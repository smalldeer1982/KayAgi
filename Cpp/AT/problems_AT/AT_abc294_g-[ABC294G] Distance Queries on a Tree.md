---
title: "[ABC294G] Distance Queries on a Tree"
layout: "post"
diff: 普及+/提高
pid: AT_abc294_g
tag: []
---

# [ABC294G] Distance Queries on a Tree

## 题目描述

给定一颗有 $n$ 个节点的树，带边权，要进行 $Q$ 次操作，操作有两种：

`1 i w`：将第 $i$ 条边的边权改为 $w$。  
`2 u v`：询问 $u,v$ 两点的距离。

## 输入格式

第一行，一个正整数 $n$。  
接下来 $n-1$ 行，每行三个数 $u,v,w$，表示一条树边。  
接下来一个正整数 $Q$。  
接下来 $Q$ 行，每行三个数，描述一个询问，格式如上。

## 输出格式

对于每个 $2$ 操作，输出一行一个数，表示该询问的答案。

## 说明/提示

$1\le n,Q\le 2\times10^5，1\le w_i\le 10^9$

## 样例 #1

### 输入

```
5
1 2 3
1 3 6
1 4 9
4 5 10
4
2 2 3
2 1 5
1 3 1
2 1 5
```

### 输出

```
9
19
11
```

## 样例 #2

### 输入

```
7
1 2 1000000000
2 3 1000000000
3 4 1000000000
4 5 1000000000
5 6 1000000000
6 7 1000000000
3
2 1 6
1 1 294967296
2 1 6
```

### 输出

```
5000000000
4294967296
```

## 样例 #3

### 输入

```
1
1
2 1 1
```

### 输出

```
0
```

## 样例 #4

### 输入

```
8
1 2 105
1 3 103
2 4 105
2 5 100
5 6 101
3 7 106
3 8 100
18
2 2 8
2 3 6
1 4 108
2 3 4
2 3 5
2 5 5
2 3 1
2 4 3
1 1 107
2 3 1
2 7 6
2 3 8
2 1 5
2 7 6
2 4 7
2 1 7
2 5 3
2 8 6
```

### 输出

```
308
409
313
316
0
103
313
103
525
100
215
525
421
209
318
519
```


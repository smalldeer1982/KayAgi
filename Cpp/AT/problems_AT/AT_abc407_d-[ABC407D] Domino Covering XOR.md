---
title: "[ABC407D] Domino Covering XOR"
layout: "post"
diff: 普及/提高-
pid: AT_abc407_d
tag: ['搜索', '深度优先搜索 DFS', '位运算']
---

# [ABC407D] Domino Covering XOR

## 题目描述

有一个网格，网格中有 $H$ 行和 $W$ 列。让 $(i,j)$ 表示从顶部 $(1\leq i\leq H)$ 起第 $i$ 行的单元格，从左侧 $(1\leq j\leq W)$ 起第 $j$ 列的单元格。

单元格 $(i,j)\ (1\leq i\leq H,1\leq j\leq W)$ 上写有一个非负整数 $A_{i,j}$ 。

让我们在网格上放置零块或更多块多米诺骨牌。一块多米诺骨牌覆盖两个相邻的单元格，即以下两对中的一对：

- 单元格 $(i,j)$ 和 $(i,j+1)$ 为 $1\leq i\leq H,1\leq j\lt W$ ；
- 单元格 $(i,j)$ 和 $(i+1,j)$ ，代表 $1\leq i\lt H,1\leq j\leq W$ 。

任何一个单元格都不能被一块以上的多米诺骨牌覆盖。

对于多米诺骨牌的摆放，其**分数**定义为写在***未被任何骨牌覆盖的单元格中的所有整数的位XOR。

找出可能的最大得分。

什么是位XOR？

对于非负整数 $A$ 和 $B$ ，它们的位向 XOR $A \oplus B$ 定义如下：

- 在二进制中，如果 $A$ 和 $B$ 中正好有一个位有 $1$ ，则 $A \oplus B$ 的 $2^k$ 位（ $k \ge 0$ ）为 $1$ ，否则为 $0$ 。

例如， $3 \oplus 5 = 6$ （二进制为 $011 \oplus 101 = 110$ ）。  
对于 $k$ 非负整数 $p_1, p_2, p_3, \dots, p_k$ ，它们的位 XOR 为 $(\dots ((p_1 \oplus p_2) \oplus p_3) \oplus \dots \oplus p_k)$ ，可以证明这与操作数的顺序无关。

## 输入格式

输入内容由标准输入法提供，格式如下

```
$H$ $W$
$A _ {1,1}$ $A _ {1,2}$ $\ldots$ $A _ {1,W}$
$A _ {2,1}$ $A _ {2,2}$ $\ldots$ $A _ {2,W}$
$\vdots$
$A _ {H,1}$ $A _ {H,2}$ $\ldots$ $A _ {H,W}$
```

## 输出格式

输出答案。

## 说明/提示

- $1 \le H$
- $1 \le W$
- $HW \le 20$
- $0 \le A_{i,j} \lt 2^{60}$ ( $1 \le i \le H,\ 1 \le j \le W$ )
- 所有输入值均为整数。

## 样例 #1

### 输入

```
3 4
1 2 3 8
4 0 7 10
5 2 4 2
```

### 输出

```
15
```

## 样例 #2

### 输入

```
1 11
1 2 4 8 16 32 64 128 256 512 1024
```

### 输出

```
2047
```

## 样例 #3

### 输入

```
4 5
74832 16944 58683 32965 97236
52995 43262 51959 40883 58715
13846 24919 65627 11492 63264
29966 98452 75577 40415 77202
```

### 输出

```
131067
```


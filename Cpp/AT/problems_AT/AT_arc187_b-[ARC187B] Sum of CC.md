---
title: "[ARC187B] Sum of CC"
layout: "post"
diff: 提高+/省选-
pid: AT_arc187_b
tag: ['动态规划 DP', '数学', '组合数学']
---

# [ARC187B] Sum of CC

## 题目描述

对于序列 $A=(A_1,A_2,\cdots,A_N)$ ，定义 $f(A)$ 如下：

- 图中包含 $N$ 个点，编号 $1\sim N$，初始没有边。对于每个满足 $1\le i<j\le N$ 的二元组 $(i,j)$，如果 $A_i\le A_j$，则在节点 $i,j$ 之间连接一条双向边。
- $f(A)$ 是图中的连通块数量。

给定序列 $B=(B_1,B_2,\cdots,B_N)$，每一项的值 $1\le B_i\le M$ 或者 $B_i=-1$。

将 $B$ 序列中的 $-1$ 替换为 $1$ 到 $M$ 中的整数，有 $M^q$ 种不同的序列 $B'$，其中 $q$ 是 $B$ 序列中 $-1$ 的数量。

求所有 $B'$ 序列的 $f(B')$ 之和 $\bmod 998\ 244\ 353$。

## 输入格式

第一行两个整数 $N,M$。

第二行 $N$ 个整数 $B_1,B_2,\cdots,B_N$。

## 输出格式

一个整数答案。

## 样例 #1

### 输入

```
3 3
2 -1 1
```

### 输出

```
6
```

## 样例 #2

### 输入

```
10 8
-1 7 -1 -1 -1 2 -1 1 -1 2
```

### 输出

```
329785
```

## 样例 #3

### 输入

```
11 12
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1
```

### 输出

```
529513150
```


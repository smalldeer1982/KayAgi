---
title: "エゴイ展 (EGOI Exhibition)"
layout: "post"
diff: 难度0
pid: AT_joig2022_e
tag: []
---

# エゴイ展 (EGOI Exhibition)

## 题目描述

在 JOI 美术馆里，有 $N$ 幅画按顺序排成一列。馆中展示的画总共有 $M$ 个种类，种类编号从 $1$ 到 $M$。排在左边第 $i$ 幅画（$1 \le i \le N$）的种类是 $A_i$，其价值为 $V_i$。**注意：$V_i$ 可以是负数。**

下个月，JOI 美术馆将举办「Egoi 展 2022」，预计届时将吸引大量游客。为了美化展览效果，馆长理惠决定撤下一些画，以确保相邻的画不属于同一类型。

此外，为了增加展览的吸引力，她希望剩余画的价值总和尽可能大。

请编写程序，计算在给定的 $N$ 幅画、及其种类与价值信息下，所能保留的画的最大价值总和。

## 输入格式

输入数据以以下格式提供：

> $N$ $M$ $A_1$ $V_1$ $A_2$ $V_2$ $\ldots$ $A_N$ $V_N$

## 输出格式

输出一个数，为剩余画的最大价值总和。

## 说明/提示

### 约束条件

- $1 \le N \le 150\,000$
- $1 \le M \le N$
- $1 \le A_i \le M$ （$1 \le i \le N$）
- $-10\,000 \le V_i \le 10\,000$ （$1 \le i \le N$）
- 所有输入数据均为整数

### 子任务

1. （4 分）$M = 1$，$N \le 15$，$V_i \ge 1$ （$1 \le i \le N$）
2. （17 分）$V_i \ge 1$ （$1 \le i \le N$）
3. （21 分）$N \le 15$
4. （27 分）$N \le 100$
5. （19 分）$M \le 100$
6. （12 分）无其他限制

### 评分细则

所提交的代码将在评测系统中进行自动测试。程序若能在所有子任务测试数据上给出正确结果，则被认为通过该子任务。

每次提交的得分等于其正确通过的子任务所获得分数的总和。

最终得分取所有提交中的最高得分。

在「提交结果」页面的「我的得分情况」中可以查看当前得分。

### 示例解释

- 示例 1：如果只保留左数第二幅画，价值总和为 $V_2 = 123$。该示例满足所有子任务的限制。
  
- 示例 2：如果保留左数第 1、3 和 4 幅画，总价值为最大。该示例满足子任务 2、3、4、5 和 6 的限制。
  
- 示例 3：保留所有画是最优方案。该示例满足子任务 3、4、5 和 6 的限制。
  
- 示例 4：最优解是不留任何画。该示例满足子任务 3、4、5 和 6 的限制。

- 示例 5: 此示例满足子任务 4、5 和 6 的限制。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
3
1
1 107
1 123
1 100
```

### 输出

```
123
```

## 样例 #2

### 输入

```
4
3
1 204
2 168
2 277
1 219
```

### 输出

```
700
```

## 样例 #3

### 输入

```
3
2
1 5
2 -1
1 5
```

### 输出

```
9
```

## 样例 #4

### 输入

```
6
4
1 -123
2 -123
3 -123
4 -123
4 -123
3 -123
```

### 输出

```
0
```

## 样例 #5

### 输入

```
30
4
2 -1358
4 -1405
4 2003
3 -1148
2 -1527
2 -2015
4 -2910
1 2133
2 2185
1 2249
3 1058
1 -1907
2 -3190
1 -2701
3 -2640
1 1685
3 1855
4 2398
3 -3158
2 1947
3 2947
2 -2197
4 1398
2 -3011
4 -1971
1 -2829
1 3094
2 2704
4 -2592
3 2910
```

### 输出

```
30566
```


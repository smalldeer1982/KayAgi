---
title: "Odd Xor"
layout: "post"
diff: 难度0
pid: AT_ttpc2024_2_d
tag: []
---

# Odd Xor

## 题目描述

给定长度为 $N$ 的非负整数序列 $A, B$。初始时，$A = (A_1, A_2, \ldots, A_N), B = (B_1, B_2, \ldots, B_N)$。

有 $Q$ 个查询，请按顺序处理这些查询。

每个查询有两种类型之一：

- 类型 $1$：格式为 `1 i a b`。将 $A_i$ 的值改为 $a$，将 $B_i$ 的值改为 $b$。
- 类型 $2$：格式为 `2 Y 0 0`。解决以下问题：
  - 对于非负整数 $S$，定义非负整数序列 $X = (X_0, X_1, \ldots, X_N)$ 如下：
    - $X_0 = S$
    - 对于每个 $1 \le i \le N$，$X_i = \begin{cases} X_{i-1} \oplus A_i & \text{如果 } X_{i-1} \equiv 1 \pmod{2} \\ X_{i-1} \oplus B_i & \text{如果 } X_{i-1} \equiv 0 \pmod{2} \end{cases}$
  - 判断是否存在一个适当的非负整数 $S$ 使得 $X_N = Y$。如果存在这样的 $S$，输出最小的 $S$；否则输出 `-1`。

## 输入格式

输入从标准输入以以下格式给出：

> $N$ $Q$ $A_1$ $A_2$ $\ldots$ $A_N$ $B_1$ $B_2$ $\ldots$ $B_N$ $\mathrm{query}_1$ $\vdots$ $\mathrm{query}_Q$

其中，$\mathrm{query}_i$ 是第 $i$ 个查询，其形式为以下之一：

> 1 $i$ $a$ $b$

> 2 $Y$ 0 0

## 输出格式

设类型 $2$ 的查询个数为 $q$，输出 $q$ 行。第 $i$ 行应输出第 $i$ 个类型 $2$ 查询的答案。

## 说明/提示

### 约束条件
- 所有输入均为整数
- $1 \le N \le 2 \times 10^5$
- $1 \le Q \le 2 \times 10^5$
- $0 \le A_i, B_i < 2^{60}$（对于 $1 \le i \le N$）
- 在类型 $1$ 的查询中，$1 \le i \le N$，$0 \le a, b < 2^{60}$
- 在类型 $2$ 的查询中，$0 \le Y < 2^{60}$
- 至少存在一个类型 $2$ 的查询

### 部分分数
- 如果在满足附加约束 $Q = 1$ 的数据集上正确解答，则可获得 $30$ 分。

### 样例解释 1
- $A = (0), B = (1)$，因此如果 $S$ 是奇数，则 $X_N = S$；如果 $S$ 是偶数，则 $X_N = S \oplus 1$。
- 第一个查询中，$Y = 5$。当 $S$ 为 $4$ 或 $5$ 时，$X_N = 5$，因此输出最小值 $4$。
- 第二个查询中，$Y = 6$。不存在使 $X_N = 6$ 的 $S$，因此输出 `-1`。
- 第三个查询中，$Y = 7$。当 $S$ 为 $6$ 或 $7$ 时，$X_N = 7$，因此输出最小值 $6$。

## 样例 #1

### 输入

```
1 3
0
1
2 5 0 0
2 6 0 0
2 7 0 0
```

### 输出

```
4
-1
6
```

## 样例 #2

### 输入

```
10 1
310214852498133736 505276263682091678 273987911350501637 317207700241861186 878845869214220663 722059890180131902 597424946894933345 74297940232615233 969543184238991085 567669635596262039
760374976835769237 114205047640377864 975115657391620675 659404150340533368 514313531921108960 255579815636209538 1042405225853490071 891193105039531117 1032475514675208675 968262176137127595
2 942999108116930288 0 0
```

### 输出

```
494185924924343867
```

## 样例 #3

### 输入

```
10 5
20 19 18 17 16 15 14 13 12 11
11 12 13 14 15 16 17 18 19 20
2 8 0 0
1 6 100 200
2 12 0 0
1 10 32 662
2 100 0 0
```

### 输出

```
8
103
-1
```

## 样例 #4

### 输入

```
10 5
464468010685205695 652469322679259637 207750579744900414 551282264132274959 477385551779769369 457669217633528368 1124978699497706079 993018743713584412 347799342391956023 253839229959865684
43481420251962425 913779804742334221 721829783836314668 643562100144275666 148532568860178532 348780722732705987 905040003050597634 962374691997649953 160408954061784257 6313574278114070
2 942999108116930288 0 0
1 7 911289147093700219 315969390490734880
2 570806468566359262 0 0
1 5 865153057674787555 127079554510737035
2 71991180131886804 0 0
```

### 输出

```
167766290121628811
833427363106128513
657636533261400102
```


---
title: "Odd Subrectangles"
layout: "post"
diff: 省选/NOI-
pid: AT_yahoo_procon2019_qual_e
tag: ['动态规划 DP', '容斥原理', '线性基']
---

# Odd Subrectangles

## 题目描述

[problemUrl]: https://atcoder.jp/contests/yahoo-procon2019-qual/tasks/yahoo_procon2019_qual_e

$ N $ 行 $ M $ 列のマス目があります。 各マスには $ 0 $ または $ 1 $ の整数が書かれていて、上から $ i $ 行目、左から $ j $ 列目に書かれている整数は $ a_{ij} $ です。

行の部分集合 $ A $ と列の部分集合 $ B $ の組 $ 2^{N+M} $ 通りのうち、以下の条件を満たすものの個数を $ 998244353 $ で割ったあまりを求めてください。

- $ A $ に属する行と $ B $ に属する列の交わりに属する $ |A||B| $ 個のマスに書かれた整数の総和が奇数である

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ a_{11} $ $ ... $ $ a_{1M} $ $ : $ $ a_{N1} $ $ ... $ $ a_{NM} $

## 输出格式

行の部分集合 $ A $ と列の部分集合 $ B $ の組のうち、条件を満たすものの個数を $ 998244353 $ で割ったあまりを出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ N,M\ \leq\ 300 $
- $ 0\ \leq\ a_{i,j}\ \leq\ 1(1\leq\ i\leq\ N,1\leq\ j\leq\ M) $
- 入力はすべて整数である

### Sample Explanation 1

例えば、$ A $ として $ 1 $ 行目のみを選び、$ B $ として $ 1,2 $ 列目を選んだとき、その交わりに属するマスに書かれた整数の和は $ 0+1=1 $ になります。

## 样例 #1

### 输入

```
2 2
0 1
1 0
```

### 输出

```
6
```

## 样例 #2

### 输入

```
2 3
0 0 0
0 1 0
```

### 输出

```
8
```


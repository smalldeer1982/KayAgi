# [ABC010D] 浮気予防

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc010/tasks/abc010_4

高橋君の秘書のなぎさちゃんは、高橋君が大好きです。今日も、高橋君に悪い虫が取り憑かないように、高橋君を監視しなければなりません。

高橋君は、女の子と仲良くなるために、自前のSNSを使います。SNSで友人関係にある人を辿って行き、見つけた女の子にメッセージを送ります。 なぎさちゃんは、高橋君のメッセージを女の子が見ることがないように、このSNSに対して、工作を行うことにしました。

行える工作活動は、以下の $ 2 $つです。

- 特定の二人の友人関係を解消する
- 特定の一人のパスワードを変え、ログイン出来なくする 高橋君のパスワードは変更できません。(21:11追記)

友人関係が解消されると、高橋君は、その二人の間を辿ることが出来なくなります。しかし、他の友人を経由して、辿ることが可能な場合は、その限りではありません。

パスワードを変更すると、その人は、メッセージを見ることが不可能になります。友人関係に変化はないので、パスワードを変更された人を辿って、別の友人を探すのは可能です。

なぎさちゃんは、出来るだけ工作の回数を少なくして、予めマークした女の子達が、高橋君のメッセージを閲覧できないようにしたいです。なぎさちゃんが工作を行う必要のある回数を求めてください。

## 说明/提示

### 部分点

$ 0\ ≦\ E\ ≦\ 12 $ を満たすテストケースに正解した場合、部分点として $ 99 $ 点が与えられる。

### Sample Explanation 1

!\[\](/img/abc/010/pic1.png) 図のように、 $ 1 $ つの友人関係を解消するだけで、$ 2 $ 人の女の子を高橋君から切り離すことが出来ます。

### Sample Explanation 2

!\[\](/img/abc/010/pic2.png) マークしている女の子は一人だけなので、この人をログイン出来なくするだけで、目的を達成することができます。

### Sample Explanation 3

!\[\](/img/abc/010/pic3.png) 図のように工作を行うことで、全ての女の子に対して工作を行えます。

### Sample Explanation 4

IDが $ 3 $ の人をログイン出来ないようにしても、高橋君が友達を探すのに影響がないことに注意してください。

### Sample Explanation 5

高橋君には友達がいないため、工作を行う必要はありません。

## 样例 #1

### 输入

```
4 2 3
2 3
0 1
1 2
1 3```

### 输出

```
1```

## 样例 #2

### 输入

```
4 1 4
3
0 1
0 2
1 3
2 3```

### 输出

```
1```

## 样例 #3

### 输入

```
10 3 11
7 8 9
0 1
0 2
0 3
0 4
1 5
2 5
5 6
6 7
6 8
3 9
4 9```

### 输出

```
2```

## 样例 #4

### 输入

```
6 2 6
4 5
0 1
0 2
1 3
2 3
3 4
3 5```

### 输出

```
2```

## 样例 #5

### 输入

```
4 3 3
1 2 3
1 2
1 3
2 3```

### 输出

```
0```

# 题解

## 作者：SAMSHAWCRAFT (赞：2)

这题我从高一时候就开始看，当时暴力 WA 的很惨。将近十三个月过去了，我回看自打高一时候一直不会做的这道题，终于把它完成了。关键词：最小割。

题目意思比较简单，给一张 $n$ 个点 $m$ 条边的图，固定起点为 $0$ 号节点，在除了 $0$ 号节点的 $n-1$ 个点中有 $g$ 个关键点，现在允许进行两种操作：

1. 除去图中的一条边（对应原题中解除两个人之间的好友关系）
  
2. 将图中的一个关键点变为非关键点（对应原题中修改某个人的账号密码）
  

要使操作若干次之后 $0$ 号节点无法到达任何一个关键点，求最少的操作次数。

我们考虑给原有的边附上权，去掉一条边需要一次操作，因此给每条边都附上边权 $1$，而将一个关键点变为非关键点也需要一次操作，鉴于这种操作不会改变图上的连通关系，不妨新建一个节点 $t$，把所有的关键点都连到 $t$ 上，连边也是边权为 $1$ 的，代表将一个关键点变为非关键点需要一次操作。

现在我们在想在这样的一张图上如何计算答案，注意到图经过刚刚的转化已经变为最小割模型：我们只需要把图分成两部分，一部分和 $0$ 连通，一部分和 $t$ 连通，求最小的操作次数其实就是求最小割，根据最大流最小割定理，直接跑 Dinic 算法求最大流即可得到答案。

断边过程中把一个节点划分给 $t$ 所在的连通块并不会产生疑问。但是对于下面这种情况，有人可能会产生疑问：如果有关键点被分到和 $0$ 连通的那部分，需要做一次操作将其变为非关键点，这次操作是否计入了答案呢？这个操作其实是计入了答案的，我们的新图给每个关键点和 $t$ 连了一条边，如果一个关键点被划分到和 $0$ 连通的那部分，那么必然切断了这个节点和 $t$ 的边，这次操作即转化为了新图上的删边操作，因此新图的最小割其实已经统计了这种情况的贡献。

Dinic 的代码就不放了，这里放一个建图的主函数部分就好了：

```cpp
int main(){
  std::cin>>n>>g>>m;
  s=0,t=n+1,mx=t;
  for(int cx=0,v;cx<g;++cx){
    std::cin>>v;
    addEdge(v,t,1);
    addEdge(t,v,0);
  }
  for(int cx=0,u,v;cx<m;++cx){
    std::cin>>u>>v;
    addEdge(u,v,1);
    addEdge(v,u,1);
  }
  if(g==0) std::cout<<0<<std::endl;
  else std::cout<<Dinic()<<std::endl;
  return 0;
}
```

另附：[提交记录](https://www.luogu.com.cn/record/76489429)，想要完整代码可以找我。

---


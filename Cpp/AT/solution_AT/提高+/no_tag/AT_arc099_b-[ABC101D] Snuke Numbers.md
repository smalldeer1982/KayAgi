# [ABC101D] Snuke Numbers

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc101/tasks/arc099_b

整数 $ n $ に対して，$ n $ を十進法で表したときの各桁の和を $ S(n) $ で表すことにします． たとえば，$ S(123)\ =\ 1\ +\ 2\ +\ 3\ =\ 6 $ です．

正の整数 $ n $ であって，$ m\ >\ n $ であるような任意の正の整数 $ m $ に対して $ \frac{n}{S(n)}\ \leq\ \frac{m}{S(m)} $ が成り立つようなものを， **すぬけ数** と呼ぶことにします．

整数 $ K $ が与えられたとき，すぬけ数を小さいほうから $ K $ 個列挙してください．

## 说明/提示

### 制約

- $ 1\ \leq\ K $
- $ K $ 番目のすぬけ数は $ 10^{15} $ 以下

## 样例 #1

### 输入

```
10```

### 输出

```
1
2
3
4
5
6
7
8
9
19```

# 题解

## 作者：皎月半洒花 (赞：6)

首先这个是可以猜出一部分结论的，大概就是考虑如果数字里面 $9$ 比较多的话肯定会比较符合，因为这样 $\rm S$ 值就会显然更大。其次也是可以打表的。

但是这个题本质上不存在规律。所以以上两种方式可能会挂的很惨。

考虑一种可行的构造方式。首先知道，$1$ 一定是可行的。对于每个当前的 $x$ ，选择那个使得 $y>x$ 且 $\frac{y}{\rm S(y)}$ 最小的 $y$ 来替代当前的 $x$ 。不难理解这样做是可行的。

那大概考虑如何去证明第一个性质，或者稍微形式化一点：

> 假设 $y$ 是 $>x$ 且 $\frac{y}{\rm S(y)}$ 最小的那个 $y$，且假设从高位到低位，$x$ 和 $y$ 第一次出现不同的地方是**从低到高的** 第 $p$ 位，那么会有 $y$ 的从低到高 $1\sim p$ 位均为 $9$ 。 

证明时考虑如下：

1、对于 $1\sim p-1$ 位的证明是不难的。考虑假设 $y$ 不符合上述规则，那么设出一个 $y'$ ，其中 $1\sim p-1$ 均是 $9$ ，且 $y'$ 的第 $p$ 位是 $y$ 的第 $p$ 位 $-1$ 的数值。那么可以知道 $x\leq y'<y$ 且 $\mathrm{S}(y')\geq \mathrm S(y)$ 。这样的话 $\frac{y}{\mathrm S(y)}>\frac{y'}{\mathrm S(y')}$ 与 $y$ 的定义矛盾。所以 $1\sim p-1$ 均为 $9$。

2、再考虑第 $p$ 位。设 $y$ 的第 $p$ 位值为 $s$，设 $y'=y-10^{p-1}\cdot s$ ，那么有

$$
\frac{y}{\mathrm S(y)}=\frac{y'+10^{p-1}s}{\mathrm S(y')+s}
$$
那么考虑此时 $y'$ 不变，等式右边是一个凹函数(先不考虑怎么凹)，在 $s=9$ 或者 $s=0$ 时取得最值。根据定义可知此处应该选择 $s=9$ （因为 $y$ 的第 $p$ 位至少要比 $x$ 的第 $p$ 位大 $1$）

_______

综上，可知后缀必然是某些 $999...999$ 的形式。从个位数向上推就好了。复杂度在 $\Omega(n)\sim O(n\log n)$ 左右。

```cpp
int n ;
long long ans ;
long long base = 1 ;

double s(long long x){
    int ret = 0 ; long long y = x ;
    while (x) ret += (x % 10ll), x /= 10ll ;
    return (1.0 * y) / (1.0 * ret) ;
}
int main(){
    cin >> n ;
    while (n --){
        while (1){
            if (s(ans + base) > s(ans + base * 10ll))
                base *= 10ll ; else break ;
        }
        ans += base ;
        printf("%lld\n", ans) ;
    }
}
```



---

## 作者：wsyhb (赞：5)

## 题意简述

求满足下列条件的前 $K$ 小的正整数 $n$。

- 设 $S(x)$ 表示 $x$ 在十进制表示下的数位和，对于任意满足 $m>n$ 的正整数 $m$，有 $\dfrac{n}{S(n)} \le \dfrac{m}{S(m)}$。

**保证答案不超过 $10^{15}$。**

## 分析 + 题解

由于要输出前 $K$ 小，那么 $K$ 必然就不会太大，考虑**先用程序暴力求出 $10^6$ 以内的满足题意的数**。

当 $n \le 10^6$ 时，$S(n) \le S(999999)=54$，又因为 $f(x)=\dfrac{x}{S(x)}$ 总体呈上升趋势（即 $x$ 增长速度快于 $S(x)$），只需验证 $m \le 10^8$ 左右即可。因为此时 $m$ 已经是 $n$ 的 $100$ 倍，分母的大小关系不太可能逆转总体的大小关系。

具体实现的话，暴力计算 $S(x)$，算一个后缀 $\min$，代码如下：

``` cpp
#include<bits/stdc++.h>
using namespace std;
const int max_n=1e8+5;
double v[max_n];//存储题目中式子的值 
inline int S(int x)//求十进制位数和 
{
	int cnt=0;
	while(x>0)
	{
		cnt+=x%10;
		x/=10;
	}
	return cnt;
} 
stack<int> st;
int main()
{
	int n=1e8;
	for(int i=1;i<=n;++i)
		v[i]=1.0*i/S(i);
	double Min=1e9;//计算后缀最小值 
	for(int i=n;i>=1;--i)
	{
		Min=min(Min,v[i]);
		if(i<=1e6&&Min==v[i])
			st.push(i);//丢进栈里，倒序输出 
	}
	while(st.size())
	{
		printf("%d,",st.top());//输出用 , 间隔 
		st.pop();
	} 
	return 0;
}
```

向该程序运行的结果加入适当换行后如下所示：

``` cpp
1,2,3,4,5,6,7,8,9,
19,29,39,49,59,69,79,89,99,
199,299,399,499,599,699,799,899,999,1099,1199,1299,1399,1499,1599,1699,1799,1899,
1999,2999,3999,4999,5999,6999,7999,8999,9999,10999,11999,12999,13999,14999,15999,16999,17999,18999,19999,20999,21999,22999,23999,24999,25999,26999,27999,28999,
29999,39999,49999,59999,69999,79999,89999,99999,109999,119999,129999,139999,149999,159999,169999,179999,189999,199999,209999,219999,229999,239999,249999,259999,269999,279999,289999,299999,309999,319999,329999,339999,349999,359999,369999,379999,389999,
399999,499999,599999,699999,799999,899999,999999
```

由此得出下列结论：

- 除 $1$ ~ $9$ 以外，其它所有连续的一段数（每一行）末尾均为相同数量的 $9$；

更具体地说：

1. 第二行为 $1$ ~ $9$ 末尾添加 $1$ 个 $9$；

2. 第三行为 $1$ ~ $19$ 末尾添加 $2$ 个 $9$；

3. 第四行为 $1$ ~ $29$ 末尾添加 $3$ 个 $9$；

4. 第五行为 $1$ ~ $39$ 末尾添加 $4$ 个 $9$；

PS：第四、五、六行的第一个数均可以看作上一行（即三、四、五行）的最后一个数。

进一步**猜测**结论：对于正整数 $k$，任意 $x \in [1,10^k)$，末尾添上 $k$ 个 $9$ 后满足题意，即形如 $x \cdot 10^k + (10^k-1)$ 的数。

- 易知这样构造出来的数并不多，$10^{15}$ 以内预计有几千个。

我猜你会匆忙赶去写代码，但却发现 AC 不了——**这个结论不完全正确，我们需要花费额外的时间来验证构造的每一个数是否满足题意。**（构造一个数的时间复杂度为 $O(1)$，由于需要排序去重 $O(cnt \log_2cnt)$）

PS：有关不存在不属于上述构造的数满足题意的证明，此处略去。（**经本人验证，`__int128` 范围以内均成立**）~~其实可以感性理解。~~

我们只需按照最初暴力的思想，即可在 $O(cnt)$ 时间内筛掉不满足题意的数。正因如此，构造数的范围应在 $10^{18}$ 左右。

## 代码

还有什么不清楚就看注释吧。

``` cpp
#include<bits/stdc++.h>
using namespace std;
inline int S(long long x)
{
	int cnt=0;
	while(x>0)
	{
		cnt+=x%10;
		x/=10;
	}
	return cnt;
}
vector<long long> ans;//存储构造的数 
const int max_cnt=1500+5;
//long long 范围内有不到 1500 个满足题意的数，__int128 范围内有不到 4500 个满足题意的数 
bool mark[max_cnt];
vector<long long> Ans;//存储筛完以后的数，即最终答案 
int main()
{
	for(int i=1;i<=9;++i)
		ans.push_back(i);//先将 1 至 9 丢进去 
	long long power=10;//计算 10^k 
	for(int k=1;k<=16;++k,power*=10)//k<=16 值域范围为 10*k*10^k，约为 10^18 
		for(int i=1;i<10*k;++i)
			ans.push_back(i*power+power-1); 
	sort(ans.begin(),ans.end());//排序 
	int Size=unique(ans.begin(),ans.end())-ans.begin();//使用 unique 函数去重 
	ans.resize(Size);//这一句可以省略，因为我们并不会访问第 Size+1 个位置及以后 
	double Min=2e18; 
	for(int i=Size-1;i>=0;--i)
	{
		double now=1.0*ans[i]/S(ans[i]);
		Min=min(Min,now);
		if(Min==now)
			mark[i]=true;
	}
	for(int i=0;i<Size;++i)
	{
		if(mark[i])
			Ans.push_back(ans[i]);//仍然有序 
	}//虽然 Ans 中可能存在不满足题意的数，但必定在末尾，且超过查询的值域，不会对答案产生影响 
	int K;
	scanf("%d",&K);
	for(int i=0;i<K;++i)//注意 vector 下标从 0 开始 
		printf("%lld\n",Ans[i]); 
	return 0;
}
```

## 后记

PS：以下简短叙述这篇题解的写作背景，不想看的直接跳吧。

之前做这道题时，由于是搬来的题，数据过水，导致我的找规律程序直接就过了。这次正好做到 ARC099，发现自己的代码怎么都过不了，最后瞄了一眼题解发现这个结论是错的（大口吐血）。想了想想出了上述解法，自认为思路自然直接，故写下题解与大家分享。

这警示我们：**不能一找到规律就上，要仔细思考其正确性（至少能感性理解），如果不行可以考虑将其作为解题的铺垫。**

---

## 作者：Nightingale_OI (赞：2)

## A - Snuke Numbers

### 大意

记 $ S(x) $ 为 $ x $ 的各位数字和。

求前 $ k $ 个满足对于所有 $ m > n $，$ \frac{n}{S(n)} \leq \frac{m}{S(m)} $ 的数 $ n $ 。

### 思路

让 $ s $ 为这些数升序的数组。

首先我们可以先打表找一下规律：

```cpp
1,2,3,4,5,6,7,8,9,19,29,39,49,59,69,79,89,
99,199,299,399,499,599,699,799,899,999,1099,1199,1299,1399,1499,1599,1699,1799,1899,
1999,2999,3999,4999,5999,6999,7999,8999,9999,10999,11999,12999,13999,14999,15999,16999,17999,18999,19999,20999,21999,22999,23999,24999,25999,26999,27999,28999,
29999,39999,49999,59999,69999,79999,89999,99999,109999,119999,129999,139999,149999,159999,169999,179999,189999,199999,209999,219999,229999,239999,249999,259999,269999,279999,289999,299999,309999,319999,329999,339999,349999,359999,369999,379999,389999,
399999,499999,599999,699999,799999,899999,999999,1099999,1199999,1299999,1399999,1499999,1599999,1699999,1799999,1899999,1999999,2099999,2199999,2299999,2399999,2499999,2599999,2699999,2799999,2899999,2999999,3099999,3199999,3299999,3399999,3499999,3599999,3699999,3799999,3899999,3999999,4099999,4199999,4299999,4399999,4499999,4599999,4699999,4799999,4899999,
```

于是我们对于 $ s $ 中的任意数 $ s_i $，会有如下猜测：

1. 将 $ s_i $ 表示为 $ k_1 \times 10^{k_2} - 1 $ 时，$ s_{i + 1} $ 可以表示为 $ (k_1 + 1) \times 10^{k_2} -1 $。

2. 接下来将 $ s_{i + 1} $ 表示为 $ k_3 \times 10^{k_4} -1 $ 去求 $ s_{i + 2} $ 时，$ k_2 \leq k_4 $。

可以考虑不同情况下一个数字 $ n $ 增大时进位对 $ S(n) $ 的影响来证明。

最后可以得出结论 $ s_{i + 1} - s_i = 10^{k_1} $ ，$ s_{i + 2} - s_{i + 1} = 10^{k_2} $ ，$ k_1 \leq k_2 $。

枚举时看当前的 $ k_1 $ 是否需要增加相等，这部分可以暴力求出数字和判断，因为答案不超过 $ 10^{15} $。

### 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int n,m,s,l;
#define f(i,j,k) for(register int i=j;i<=k;++i)
#define g(i,j,k) for(register int i=j;i>=k;--i)
__int128 _=1;
long long x,y;
long long ps(long long x){
	int re=0;
	while(x){
		re+=x%10;
		x/=10;
	}
	return re;
}
int cp(long long a,long long b){return (_*a*ps(b))>(_*b*ps(a));}
int main(){
	cin>>n;
	x=y=1;
	f(i,1,n){
		if(cp(x+y-1,x+y*10-1))y*=10;
		x+=y;
		printf("%lld\n",x-1);
	}
	return 0;
}
```

---

## 作者：Super_Cube (赞：1)

# Solution

猜测满足条件的数不多，考虑打表，发现实际上在 $10^{15}$ 的范围内一共只有 $792$ 个这样的数。

```cpp
#include<bits/stdc++.h>
using namespace std;
long long a[792]={1,2,3,4,5,6,7,8,9,19,29,39,49,59,69,79,89,99,199,299,399,499,599,699,799,899,999,1099,1199,1299,1399,1499,1599,1699,1799,1899,1999,2999,3999,4999,5999,6999,7999,8999,9999,10999,11999,12999,13999,14999,15999,16999,17999,18999,19999,20999,21999,22999,23999,24999,25999,26999,27999,28999,29999,39999,49999,59999,69999,79999,89999,99999,109999,119999,129999,139999,149999,159999,169999,179999,189999,199999,209999,219999,229999,239999,249999,259999,269999,279999,289999,299999,309999,319999,329999,339999,349999,359999,369999,379999,389999,399999,499999,599999,699999,799999,899999,999999,1099999,1199999,1299999,1399999,1499999,1599999,1699999,1799999,1899999,1999999,2099999,2199999,2299999,2399999,2499999,2599999,2699999,2799999,2899999,2999999,3099999,3199999,3299999,3399999,3499999,3599999,3699999,3799999,3899999,3999999,4099999,4199999,4299999,4399999,4499999,4599999,4699999,4799999,4899999,4999999,5999999,6999999,7999999,8999999,9999999,10999999,11999999,12999999,13999999,14999999,15999999,16999999,17999999,18999999,19999999,20999999,21999999,22999999,23999999,24999999,25999999,26999999,27999999,28999999,29999999,30999999,31999999,32999999,33999999,34999999,35999999,36999999,37999999,38999999,39999999,40999999,41999999,42999999,43999999,44999999,45999999,46999999,47999999,48999999,49999999,50999999,51999999,52999999,53999999,54999999,55999999,56999999,57999999,58999999,59999999,69999999,79999999,89999999,99999999,109999999,119999999,129999999,139999999,149999999,159999999,169999999,179999999,189999999,199999999,209999999,219999999,229999999,239999999,249999999,259999999,269999999,279999999,289999999,299999999,309999999,319999999,329999999,339999999,349999999,359999999,369999999,379999999,389999999,399999999,409999999,419999999,429999999,439999999,449999999,459999999,469999999,479999999,489999999,499999999,509999999,519999999,529999999,539999999,549999999,559999999,569999999,579999999,589999999,599999999,609999999,619999999,629999999,639999999,649999999,659999999,669999999,679999999,689999999,699999999,799999999,899999999,999999999,1099999999,1199999999,1299999999,1399999999,1499999999,1599999999,1699999999,1799999999,1899999999,1999999999,2099999999,2199999999,2299999999,2399999999,2499999999,2599999999,2699999999,2799999999,2899999999,2999999999,3099999999,3199999999,3299999999,3399999999,3499999999,3599999999,3699999999,3799999999,3899999999,3999999999,4099999999,4199999999,4299999999,4399999999,4499999999,4599999999,4699999999,4799999999,4899999999,4999999999,5099999999,5199999999,5299999999,5399999999,5499999999,5599999999,5699999999,5799999999,5899999999,5999999999,6099999999,6199999999,6299999999,6399999999,6499999999,6599999999,6699999999,6799999999,6899999999,6999999999,7099999999,7199999999,7299999999,7399999999,7499999999,7599999999,7699999999,7799999999,7899999999,7999999999,8999999999,9999999999,10999999999,11999999999,12999999999,13999999999,14999999999,15999999999,16999999999,17999999999,18999999999,19999999999,20999999999,21999999999,22999999999,23999999999,24999999999,25999999999,26999999999,27999999999,28999999999,29999999999,30999999999,31999999999,32999999999,33999999999,34999999999,35999999999,36999999999,37999999999,38999999999,39999999999,40999999999,41999999999,42999999999,43999999999,44999999999,45999999999,46999999999,47999999999,48999999999,49999999999,50999999999,51999999999,52999999999,53999999999,54999999999,55999999999,56999999999,57999999999,58999999999,59999999999,60999999999,61999999999,62999999999,63999999999,64999999999,65999999999,66999999999,67999999999,68999999999,69999999999,70999999999,71999999999,72999999999,73999999999,74999999999,75999999999,76999999999,77999999999,78999999999,79999999999,80999999999,81999999999,82999999999,83999999999,84999999999,85999999999,86999999999,87999999999,88999999999,89999999999,99999999999,109999999999,119999999999,129999999999,139999999999,149999999999,159999999999,169999999999,179999999999,189999999999,199999999999,209999999999,219999999999,229999999999,239999999999,249999999999,259999999999,269999999999,279999999999,289999999999,299999999999,309999999999,319999999999,329999999999,339999999999,349999999999,359999999999,369999999999,379999999999,389999999999,399999999999,409999999999,419999999999,429999999999,439999999999,449999999999,459999999999,469999999999,479999999999,489999999999,499999999999,509999999999,519999999999,529999999999,539999999999,549999999999,559999999999,569999999999,579999999999,589999999999,599999999999,609999999999,619999999999,629999999999,639999999999,649999999999,659999999999,669999999999,679999999999,689999999999,699999999999,709999999999,719999999999,729999999999,739999999999,749999999999,759999999999,769999999999,779999999999,789999999999,799999999999,809999999999,819999999999,829999999999,839999999999,849999999999,859999999999,869999999999,879999999999,889999999999,899999999999,909999999999,919999999999,929999999999,939999999999,949999999999,959999999999,969999999999,979999999999,989999999999,999999999999,1099999999999,1199999999999,1299999999999,1399999999999,1499999999999,1599999999999,1699999999999,1799999999999,1899999999999,1999999999999,2099999999999,2199999999999,2299999999999,2399999999999,2499999999999,2599999999999,2699999999999,2799999999999,2899999999999,2999999999999,3099999999999,3199999999999,3299999999999,3399999999999,3499999999999,3599999999999,3699999999999,3799999999999,3899999999999,3999999999999,4099999999999,4199999999999,4299999999999,4399999999999,4499999999999,4599999999999,4699999999999,4799999999999,4899999999999,4999999999999,5099999999999,5199999999999,5299999999999,5399999999999,5499999999999,5599999999999,5699999999999,5799999999999,5899999999999,5999999999999,6099999999999,6199999999999,6299999999999,6399999999999,6499999999999,6599999999999,6699999999999,6799999999999,6899999999999,6999999999999,7099999999999,7199999999999,7299999999999,7399999999999,7499999999999,7599999999999,7699999999999,7799999999999,7899999999999,7999999999999,8099999999999,8199999999999,8299999999999,8399999999999,8499999999999,8599999999999,8699999999999,8799999999999,8899999999999,8999999999999,9099999999999,9199999999999,9299999999999,9399999999999,9499999999999,9599999999999,9699999999999,9799999999999,9899999999999,9999999999999,10999999999999,11999999999999,12999999999999,13999999999999,14999999999999,15999999999999,16999999999999,17999999999999,18999999999999,19999999999999,20999999999999,21999999999999,22999999999999,23999999999999,24999999999999,25999999999999,26999999999999,27999999999999,28999999999999,29999999999999,30999999999999,31999999999999,32999999999999,33999999999999,34999999999999,35999999999999,36999999999999,37999999999999,38999999999999,39999999999999,40999999999999,41999999999999,42999999999999,43999999999999,44999999999999,45999999999999,46999999999999,47999999999999,48999999999999,49999999999999,50999999999999,51999999999999,52999999999999,53999999999999,54999999999999,55999999999999,56999999999999,57999999999999,58999999999999,59999999999999,60999999999999,61999999999999,62999999999999,63999999999999,64999999999999,65999999999999,66999999999999,67999999999999,68999999999999,69999999999999,70999999999999,71999999999999,72999999999999,73999999999999,74999999999999,75999999999999,76999999999999,77999999999999,78999999999999,79999999999999,80999999999999,81999999999999,82999999999999,83999999999999,84999999999999,85999999999999,86999999999999,87999999999999,88999999999999,89999999999999,90999999999999,91999999999999,92999999999999,93999999999999,94999999999999,95999999999999,96999999999999,97999999999999,98999999999999,99999999999999,100999999999999,101999999999999,102999999999999,103999999999999,104999999999999,105999999999999,106999999999999,107999999999999,108999999999999,109999999999999,119999999999999,129999999999999,139999999999999,149999999999999,159999999999999,169999999999999,179999999999999,189999999999999,199999999999999,209999999999999,219999999999999,229999999999999,239999999999999,249999999999999,259999999999999,269999999999999,279999999999999,289999999999999,299999999999999,309999999999999,319999999999999,329999999999999,339999999999999,349999999999999,359999999999999,369999999999999,379999999999999,389999999999999,399999999999999,409999999999999,419999999999999,429999999999999,439999999999999,449999999999999,459999999999999,469999999999999,479999999999999,489999999999999,499999999999999,509999999999999,519999999999999,529999999999999,539999999999999,549999999999999,559999999999999,569999999999999,579999999999999,589999999999999,599999999999999,609999999999999,619999999999999,629999999999999,639999999999999,649999999999999,659999999999999,669999999999999,679999999999999,689999999999999,699999999999999,709999999999999,719999999999999,729999999999999,739999999999999,749999999999999,759999999999999,769999999999999,779999999999999,789999999999999,799999999999999,809999999999999,819999999999999,829999999999999,839999999999999,849999999999999,859999999999999,869999999999999,879999999999999,889999999999999,899999999999999,909999999999999,919999999999999,929999999999999,939999999999999,949999999999999,959999999999999,969999999999999,979999999999999,989999999999999,999999999999999};
int main(){
	int n;
	scanf("%d",&n);
	for(int i=0;i<n;++i)
		printf("%lld\n",a[i]);
	return 0;
}
```

做完了。

~~好吧这篇题解不在这里结束的原因是只写上面那点东西会被打回。~~

下面是正经题解。

做题第一步：找规律。先对于 $10^4$ 以内的数输出 $\dfrac{i}{S(i)}$，发现极小值的出现位置很有规律，拿出来看看。另一种方法是倒序计算 $\dfrac{i}{S(i)}$，与后缀最小值相等的那些数**极有可能**符合条件。

```cpp
1,2,3,4,5,6,7,8,9,
19,29,39,49,59,69,79,89,99,
199,299,399,499,599,699,799,899,999,1099,1199,1299,1399,1499,1599,1699,1799,1899,
1999,2999,3999,4999,5999,6999,7999,8999,9999,
```

诶？好像都是前面一串自然数，后面跟一大堆 $9$ 所组成的。

但是这样构造不一定全都符合条件，于是把这些**极有可能**符合条件的数拿出来跑前面所说的后缀最小值那个方法，把不合法的去掉，剩下的就都是对的了。

---

## 作者：wsyhb (赞：1)

快两年了还是不会做系列。

## 题解

### 分析

定义 $f(N)$ 为满足 $n \ge N$ 的整数 $n$ 中 $\dfrac{n}{S(n)}$ 最小的一个。（若有多个，则取最小的一个）那么若 $N$ 为 Snuke number，则下一个 Snuke number 为 $f(N+1)$。故原问题转化为，对于给定的 $N$，求解 $f(N)$。

直观上来说，$f(N)$ 应是每一个 $S$ 值对应的一类数中前几小的数，因此考虑 $S(n)$ 确定时 $n$ 的可能取值。

设 $S(n)=v$，则 $n$ 在十进制下至少有 $\lceil \dfrac{v}{9}\rceil$ 位。进一步地，设 $v=9q+r(q,r \in Z, 0 \le r < 9)$，则 $n_{\min}=(r99\cdots99)_{10}$，其中 $9$ 的数量为 $q$。$n$ 的次小可能值为 $n=((r+1)89\cdots99)_{10}$。以此类推，我们发现这些数的末尾都有大量的 $9$，这启发我们做出一个猜想：

> 将 $N$ 的若干低位改为 $9$，可以得到 $f(N)$。

有了这个结论，通过遍历 $N$ 的每一位，我们可以在 $O(\log{N})$ 的时间内求出 $f(N)$ 的所有候选数 $n$，其中 $\dfrac{n}{S(n)}$ 最小的便是 $f(N)$。问题得以解决。

下面给出猜想的证明。

### 证明

> 引理：$n=99\cdots99$ 一定是 Snuke number。

引理的证明：

设 $n$ 一共包含 $k(k \ge 1)$ 个 $9$，即 $n=10^k-1$。假设存在 $m>n$ 使得 $\dfrac{m}{S(m)}<\dfrac{n}{S(n)}$，则必有 $S(m)>S(n)$。

设 $S(m)=9q+r(q,r \in Z, 0 \le r <9, q \ge k)$，则满足条件的 $m$ 的最小值为 $(r99\cdots99)_{10}=r \cdot 10^q+(10^q-1)$（其大于 $n$，所以只需要考虑形如这样的 $m$），其中 $9$ 的数量为 $q$。

记函数 $F(a,b)=\dfrac{b \cdot 10^a+(10^a-1)}{9a+b}$，则 $\dfrac{m}{S(m)}<\dfrac{n}{S(n)}$ 等价于 $F(q,r)<F(k,0)$。

但 $F(a+1,0)-F(a,0)=\dfrac{(9a-1) \cdot 10^a+1}{9a(a+1)}>0$，$F(a,b)-F(a,0)=\dfrac{(9a-1)\cdot 10^a+1}{9a(9a+b)}b>0$，故 $F(q,r) \ge F(q,0) \ge F(k,0)$，矛盾，引理得证。

P.S. 引理同时也证明了 $f$ 的存在性。

------------

记 $x=f(N)$，由引理知 $x$ 的位数与 $N$ 的相同。

若 $x=N$，命题成立。

若 $x>N$，设 $x$ 和 $N$ 不同的位中最高的一位为第 $d$ 位（值为 $10^d$ 的那一位）。记 $x$ 的第 $i$ 位为 $x_i$，则命题即为 $x_0=x_1=\cdots=x_d=9$。

假设存在 $0 \le i<d$ 使得 $x_i<9$，考虑令 $x_d \to x_d-1$，并将 $x_0,x_1,\cdots,x_{d-1}$ 修改为 $9$，记所得结果为 $y$（实际只由 $x$ 得到 $y$ 而不修改 $x$）。

那么有 $N \le y <x$ 且 $S(y) \ge S(x)$，这与 $\dfrac{x}{S(x)}$ 的最小性矛盾，故 $x_0=x_1=\cdots=x_{d-1}=9$。

令 $z$ 为将 $x$ 的第 $d$ 位改为 $0$ 所得的结果，并记 $w=x_d$，则 $x=z+w \cdot 10^d$，$S(x)=S(z)+w$，$\dfrac{x}{S(x)}=\dfrac{z+w \cdot 10^d}{S(z)+w}$。

若 $z=0$，则 $d=0$，进一步得 $x$ 和 $N$ 都是一位数，进而 $x=N$，与该种情况的前提不符，故此时 $z \neq 0$。

考察关于 $w$ 的函数 $g(w)=\dfrac{z+w \cdot 10^d}{S(z)+w}$，由于 $g(w+1)-g(w)=\dfrac{z-S(z) \cdot 10^d}{(S(z)+w)(S(z)+w+1)}$，且 $z-S(z) \cdot 10^d \neq 0$，故函数 $g$ 在 $Z$ 上单调（递增或递减）。

（$z-S(z) \cdot 10^d \neq 0$ 的证明：若 $z$ 包含第 $d-1$ 位及以下的位，则 $z$ 不为 $10^d$ 的倍数，成立；否则，$z$ 只包含第 $d+1$ 位及以上的位，则 $z>S(z) \cdot 10^d$，成立）

（之所以要先说明 $z\neq 0$，就是为了这一小段证明）

这意味着 $w=9$ 或 $w=N_d$（$N$ 的 第 $d$ 位），由 $d$ 的定义知后者不可能，故必有 $x_d=w=9$，命题得证。

P.S. 最后这些对函数 $g$ 的分析对解决题目不是必要的，因为 $x_d$ 的取值至多只有 $10$ 个，实现中可以直接枚举 $x_d$。

## 代码

``` cpp
#include<bits/stdc++.h>
using namespace std;
inline int S(long long n)
{
	int res=0;
	while(n>0)
	{
		res+=n%10;
		n/=10;
	}
	return res;
}
inline long long f(long long N)
{
	long long res=N;
	int res_S=S(N);
	long long Pow=1;
	while(Pow<=N)
	{
		int k=N/Pow%10;
		N+=(9-k)*Pow;
		int S_now=S(N);
		if(N*res_S<res*S_now)
			res=N,res_S=S_now;
		Pow*=10;
	}
	return res;
}
int main()
{
	int K;
	scanf("%d",&K);
	long long ans=1;
	for(int t=1;t<=K;++t)
	{
		printf("%lld\n",ans);
		ans=f(ans+1);
	}
	return 0;
}
```

---

## 作者：songhongyi (赞：0)

~~这到底是哪题啊 /yun~~。

不难发现，$n$ 和 $n+1$ 相比，若没有进位，则分子大 $1$，分母大 $1$，在平凡的情况下这个比例肯定大于 $1$，因而 $\frac n {s(n)}$ 在下降。

因此答案一定是在下一个数进位才能成立。故而应该形如后缀为若干个 $9$ 的样子。

然后我们注意到，在找下一个答案的时候，如果把当前后缀的 $9$ 扔掉，一定会比不扔要大，这一下子就告诉了我们构造的思路：

从 1 开始，依次构造。下一个数有两种可能。

1. 把后缀 9 的数量加若干个
2. 把前缀加 1

只要贪心的构造，即可完成。


---


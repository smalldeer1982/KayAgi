# 7th

## 题目描述

[problemUrl]: https://atcoder.jp/contests/donuts-live2014/tasks/donuts_live2014_2

パンチくんは、 $ 7 $ という数字が大好きです。先日も、ナナにまつわるゲームをリリースし、順調にユーザ数を伸ばしています。

さて、パンチくんは、 $ 7 $ の倍数に興味をもちました。以下の様なゲームを考えます。

パンチくんとニコルちゃんは、数字の $ 1〜7 $ のカードを、十分たくさん持っています。まずパンチくんは、カードをいくつか並べて、ある自然数を作ります。次にニコルちゃんは、カードをいくつか並べて、以下の条件を満たす自然数を作ります。

- ニコルちゃんが作った数字は、パンチくんが作った数字以下である。
- ニコルちゃんが作った数字は、 $ 10 $ 進数表記で、 $ 7 $ の倍数である。

ニコルちゃんは、何通りの数字を作ることができるでしょうか。

## 说明/提示

### 部分点

$ 1\ ≦\ N\ <\ 100000\ (10^5) $ を満たすテストケースに正解した場合、部分点として $ 40 $ 点が与えられる。

### Sample Explanation 1

ニコルちゃんが作ることのできる数字は、 $ 7,\ 14,\ 21 $ の $ 3 $ つです。 $ 28 $ は作ることができないことに注意して下さい。

### Sample Explanation 3

十分たくさんのカードを持っているので、ニコルちゃんは同じ数字を並べた $ 77 $ という数字を作ることも可能です。

## 样例 #1

### 输入

```
31```

### 输出

```
3```

## 样例 #2

### 输入

```
7```

### 输出

```
1```

## 样例 #3

### 输入

```
111```

### 输出

```
8```

## 样例 #4

### 输入

```
777777777777777777```

### 输出

```
271402266318408```

# 题解

## 作者：Elairin176 (赞：0)

[传送门](https://www.luogu.com.cn/problem/AT_donuts_live2014_2)     
前言：本题解写的时候洛谷 rmj 暂无法使用，所以本篇题解保证可以在 atc 上通过。
## 题意
求出仅由 $1$ 到 $7$ 组成，不大于 $n$ 且是 $7$ 的倍数的正整数的数量。     
## 解法
观察到 $1\le n\le10^{18}$，那么我们使用数位 dp 解决。     
对比正常的数位 dp，我们只需要多开一位 $y$，代表当前数字模上 $7$ 的结果即可。    
那么我们设 $dp_{i,x,y}$ 为 dfs 过程在第 $i$ 层，上一位数字填 $x$，当前数字模 $7$ 为 $y$ 即可。      
这里再说下一些边界问题：    
- 注意是正整数，且不能含 $0$，所以非前导零的情况下我们不能填 $0$，否则视为前导零。注意答案统计的时候要特判 $0$。   
- 填数上界的判断：这和这个数字当前这一位的数有关系，设这个数位 $x$。首先如果填数过程一直贴着上界，那么这一位的上界为 $\min(x,7)$，否则为 $7$。    

这样就可以写出代码了。   
[CODE](https://atcoder.jp/contests/donuts-live2014/submissions/44659533)

---


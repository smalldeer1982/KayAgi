# [ARC056B] 駐車場

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc056/tasks/arc056_b

駐車場で$ N $人が車を駐めようとしています。 駐車場は$ N $個の駐車スペースがあり$ 1 $から$ N $まで番号付けられています。また、$ 2 $つの駐車スペースを双方向に結ぶ道が$ M $本あり、$ i $番目の道は$ u_i $番目の駐車スペースと$ v_i $番目の駐車スペースを結んでいます。 駐車スペース$ S $は駐車場の入り口とつながっています。

$ i $番目の人は、どういうわけか$ i $番目の駐車スペースにしか車を駐めたくないようです。このため、駐車場の入り口から、まだ誰も車を駐めていない駐車スペースとそれらを結ぶ道を通って$ i $番目の駐車スペースに行くことができないとき、車を駐めずに帰ってしまいます。

$ 1 $番目の人から$ N $番目の人まで順番に駐車場にやってきます。最終的に駐車場に駐める人の番号を昇順に出力してください。

## 说明/提示

### 制約

- $ 1\ ≦\ N,\ M\ ≦\ 2*10^5 $
- $ 1≦u_i,\ v_i≦N $
- $ u_i\ ≠\ v_i $
- $ 1\ ≦\ S\ ≦\ N $
- 全ての駐車スペースへは、入り口から道と駐車スペースを経由してたどり着くことができる

### 部分点

- $ M\ ≦\ 2,000 $ を満たすテストケース全てに正解した場合、部分点として$ 40 $点が与えられる。

### Sample Explanation 1

$ 1 $番目の車は、駐車スペース$ 1 $に行くことができるためそこに駐めます。 $ 2 $番目の車は、駐車スペース$ 2 $に行くことができるためそこに駐めます。 $ 3 $番目の車は、$ 2 $番目の車に塞がれ駐車スペース$ 3 $に行くことができないため、帰ります。

### Sample Explanation 2

!\[https://arc056.contest.atcoder.jp/img/arc/056/vafbafvasrf/imgB.png\](https://arc056.contest.atcoder.jp/img/arc/056/vafbafvasrf/imgB.png)青い円を空いている駐車スペース、赤い円を車のいる駐車スペースとすると、上図のような順番で駐車スペースが埋まっていき、$ 4 $番目の車は駐めることができません。

## 样例 #1

### 输入

```
3 3 2
1 2
2 3
1 3```

### 输出

```
1
2```

## 样例 #2

### 输入

```
5 6 5
1 5
3 5
3 2
4 1
1 2
4 3```

### 输出

```
1
2
3
5```

## 样例 #3

### 输入

```
5 5 5
1 4
4 3
3 2
2 5
5 1```

### 输出

```
1
2
5```

# 题解

## 作者：YuYuanPQ (赞：0)

学过的同学一眼就能看出来：用并查集维护连通块。

但是，操作成功应该怎么删点和边呢？

~~我也不会，所以看了下大佬代码~~

一个经典的 trick：把删边变成（倒着）加边。

于是我们就可以从 $n$ 做到 $1$，每次先加边（并查集合并），然后判断这次加边之后是否连通（实际上对应的是删边之前，因为是倒着的）。如果连通，则操作成功。

## Code

[Link](https://atcoder.jp/contests/arc056/submissions/58411262)

---


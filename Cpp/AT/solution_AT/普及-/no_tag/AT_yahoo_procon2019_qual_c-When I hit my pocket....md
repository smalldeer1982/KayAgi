# When I hit my pocket...

## 题目描述

Snuke的口袋里有1块饼干和0枚硬币,现在他必须进行K次操作,每次操作是以下3种操作之一:  
操作1:打自己的口袋,可以将饼干数增加1  
操作2:把A个饼干换成1枚硬币  
操作3:把1枚硬币换成B个饼干  
问:经过这K次操作后,Snuke的口袋里最多有多少块饼干

## 样例 #1

### 输入

```
4 2 6```

### 输出

```
7```

## 样例 #2

### 输入

```
7 3 4```

### 输出

```
8```

## 样例 #3

### 输入

```
314159265 35897932 384626433```

### 输出

```
48518828981938099```

# 题解

## 作者：yydfj (赞：3)

**这是本蒟蒻第二十四次写的题解，如有错误点请好心指出！**

## 问题简述

你最先有 $1$ 块饼干和 $0$ 枚硬币。

给你 $k$ 次操作，每次操作你可以加 $1$ 块饼干或用 $a$ 块饼干换成 $1$ 枚硬币，或者用 $1$ 枚硬币换成 $b$ 块饼干。

求 $k$ 次操作后你的饼干数量最大值为多少。

## 解法综述

如果我们将 $a$ 块饼干换成 $1$ 枚硬币，然后又换成 $b$ 块饼干，则需要两次操作。很显然，如果 $a≥b-2$，说明用两次操作直接加 $2$ 块饼干会比将 $a$ 块饼干换成 $b$ 块饼干数量更多（严格来讲当 $a=b-2$ 时用上述两种操作得到的饼干数量是一样的），则 $k$ 次操作会饼干数量最多为 $k+1$。

如果 $a≤b-2$，说明将 $a$ 块饼干换成 $b$ 块饼干数量会更多，则进行 $k$ 次操作后，$k$ 为偶数时会得到 $\frac{k*(b-a)}{2}$ 块饼干，$k$ 为奇数时因为最后一次操作无法将 $a$ 块饼干换成 $b$ 块饼干，则将在最后一次操作直接加 $1$ 块饼干，会得到 $\frac{k*(b-a)+1}{2}$ 块饼干。

最后有两点需要注意一下，一个是将 $a$ 块饼干换成 $b$ 块饼干时要保证当前至少有 $a$ 块饼干，另一个是如果 $k≤a$，说明无需进行将 $a$ 块饼干换成 $b$ 块饼干的操作。

## 代码描述
```cpp
#include<cstdio>
using namespace std;
long long k,a,b;
int main()
{
    scanf("%lld%lld%lld",&k,&a,&b);
    if(a>=b-2||k<=a) printf("%lld",k+1);
    else
    {
        k-=a-1;//先将1块饼干加到a块饼干，共需要a-1次操作
        printf("%lld",k/2*(b-a)+k%2+a);//k%2判断奇偶，如果k为奇数，则多加一个饼干
    }
    return 0;
}
```

---

## 作者：cff_0102 (赞：3)

### AT4636  题解

$upd\ at\ 2022/2/2:\LaTeX$ 公式与中文标点符号之间一般情况下不应加空格。

这一道题，实际上是小学数学，我们要分 $4$ 种情况。

1. 先换 $A$ 饼干到 $1$ 硬币，再换为 $B$ 饼干，要花费 $2$ 步。而 $2$ 步也可以通过击打口袋来增加 $2$ 饼干。所以，如果 $B-A\le 2$，就没有做操作 $2$ 和操作 $3$ 的必要。这时，只要做 $K$ 次操作 $1$ 就行了。饼干增加 $K$，最后就会有 $K+1$ 个饼干。

2. 做 $K$ 次还无法做到操作 $3$，即还没有办法得到一个硬币或还没把硬币换回饼干， $K$ 次操作就用完了。这时也不要进行操作 $2$ 和 $3$，最后也是 $K+1$ 饼干。这种情况就是当 $K+1\le A+1$，即 $K\le A$。

剩下的情况就可以先把饼干数量加到 $A$，然后一直花 $2$ 步将其中 $A$ 个饼干换成 $B$ 个饼干。但是还有 $2$ 种情况：

3. 剩下的步数，即 $K-(A-1)=K-A+1$ 是偶数时，一直重复步骤 $2$ 和 $3$ 即可。若设 $K-A+1$ 为 $X$，最后就会得到 $A+\frac{X}{2}\times(B-A)$ 个饼干。因为重复步骤 $2$ 和 $3$ 时，会重复 $\frac{X}{2}$ 次，每次增加 $(B-A)$ 个饼干。

4. 当 $X$ 是奇数，最后还要进行一次操作 $1$，就会得到 $A+1+\frac{X-1}{2}\times(B-A)$ 个饼干。

接着是c++代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	long long k,a,b;//题目中的量，注意要long long
	cin>>k>>a>>b;//输入
	if(b-a<=2||k<=a){//第一、二种情况
		cout<<k+1<<endl;//注意AtCoder的输出必须换行
	}else{
		k-=a-1;//k变为目前剩下的步数，即上面的x
		if(k%2==0){//第三种情况
			cout<<a+k/2*(b-a)<<endl;//不要忘乘(b-a)
		}else{//第四种情况
			cout<<a+1+(k-1) /*这里其实可以不用-1，直接整除*/ /2*(b-a)<<endl //不要忘了要+1;
		}
	}
	return 0;
}
```


---


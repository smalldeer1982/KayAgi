# [ARC036B] 山のデータ

## 题目描述

现在，有 $N$ 个地点。从西起第 $i(1 \le i \le N)$ 个地点的高度为 $h_i$。

这样，就有了一个三元组 $(s，t，u)$，$(1 \le s \le t \le u \le N)$。

那么，这一个三元组是山，当且仅当：

对于满足 $s \le i \le t-1$ 的任意整数中的 $i$，满足 $h_i < h_{i+1}$ 且在对于满足 $t \le i \le u-1$ 的任意整数中的 $i$，满足 $h_i > h_{i+1}$。

现在，需要找出山的**最大**长度。（定义山的长度为 $u - s + 1$）。

## 说明/提示

$1 \le N \le 3 \times 10^5, 1 \le h_i \le 10^9$。

每一个 $h_i$ 互不相同（即对于 $1 \le i < j \le N$，$h_i \ne h_j$）。

## 样例 #1

### 输入

```
6
4
5
1
6
9
7```

### 输出

```
4```

## 样例 #2

### 输入

```
7
90
70
50
30
20
10
5```

### 输出

```
7```

# 题解

## 作者：Nygglatho (赞：0)

我们可以把 $s$ 与 $u$ 都设定成 $i$。每一次，只要条件满足，就可以把 $u$ 加一，即发现了右边也合法，更新山的长度。

```cpp
while (u < n && h[u] < h[u + 1]) ++u;//在t前面
while (u < n && h[u] > h[u + 1]) ++u;//在t后面
```

那么，就可能会有重复出现，这样怎么办呢？

我们可以把重复情况分为 $2$ 种，第一种是一座山**完全**包含另一座，即下图情况：

![](https://ftp.bmp.ovh/imgs/2021/05/6e9fb01fc5469841.jpg)

这样，$s_1$ 比 $s_2$ 小，$u_1$ 比 $u_2$ 大，那么 $u_1 - s_1 + 1$ 肯定比 $u_2 - s_2 + 1$ 大，而题目要我们求出**最大**的，于是可以忽略。

第二种是两座山在某个点共用。如下图：

![](https://ftp.bmp.ovh/imgs/2021/05/52013b20fc10ba9a.jpg)

这样，我们可以每一次加上一个特判，就是如果新的一座山发现前面一座山与它重复（即满足条件），那么我们就可以把 $s$ 减 $1$，这样就可以了，但是要注意是不是第一座山，如果是就不用把 $s$ 减 $1$ 了。

```cpp
if (s > 1 && h[s - 1] < h[s]) s--;
```

但是，不可能出现两座山有一段区域重复，因为题目保证不会有两个位置高度相等，那么前一座山单调递减（不能单调递增，否则就会变成第一种情况）而后一座山单调递增，但是，这一段区域高度**不会**既递减又递增，所以不可能。

---


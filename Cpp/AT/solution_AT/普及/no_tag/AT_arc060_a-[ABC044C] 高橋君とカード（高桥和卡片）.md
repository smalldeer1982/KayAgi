# [ABC044C] 高橋君とカード（高桥和卡片）

## 题目描述

高桥有 $n$ 张卡片，在第 $i$ 张卡片上面写着整数 $x_i$。

高桥从这些卡片中挑选一张或更多卡片，要求选择的卡片上整数的平均数等于 $A$。求有几种方案。

**两张卡片即使数字相同也被看作是不同的两张卡片。**

## 说明/提示

### 数据规模与约定
* 对于 $200$ 分的数据，$1\le N,A,x_i\le16$ 且均为整数。
* 对于 $300$ 分（满分）的数据，$1\le N,A,x_i\le50$ 且均为整数。

### 样例解释 1
你共有如下 $5$ 种方案使平均数为 $8$：
* 选第 $3$ 张。
* 选第 $1,2$ 张。
* 选第 $1,4$ 张。
* 选第 $1,2,3$ 张。
* 选第 $1,3,4$ 张。

### 样例解释 4
不保证答案在 $32$ 位有符号整数范围内。

题目原文由 [Stephzzz](https://www.luogu.com.cn/user/71988) 翻译，其他部分由 [Ascnbeta](https://www.luogu.com.cn/user/767561) 补充。

## 样例 #1

### 输入

```
4 8
7 9 8 9```

### 输出

```
5```

## 样例 #2

### 输入

```
3 8
6 6 9```

### 输出

```
0```

## 样例 #3

### 输入

```
8 5
3 6 2 8 7 6 5 9```

### 输出

```
19```

## 样例 #4

### 输入

```
33 3
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3```

### 输出

```
8589934591```

# 题解

## 作者：Night_sea_64 (赞：3)

计数型 01 背包。

因为要算平均数，但是在状态中直接记录平均数的值是不可能的，因为有小数。所以状态中存两个值：$f_{k,j}$ 表示取了 $k$ 个数，和为 $j$ 的方法数。

转移就是 $f_{k,j}=f_{k,j}+f_{k-1,j-a_i}$。$k-1$ 是这个数还没取，也就是少取了一个，$j-a_i$ 表示当前这个和减去现在这个值也就是之前的和。

注意就是枚举 $k$ 和 $j$ 时反着循环，要设初值，还要开 long long。以下是 AC 代码：

```cpp
#include<iostream>
using namespace std;
int a[55];
long long f[55][2505];
int main()
{
    int n,m;
    cin>>n>>m;
    for(int i=1;i<=n;i++)
        cin>>a[i];
    f[0][0]=1;//设初值。
    for(int i=1;i<=n;i++)
        for(int j=2500;j>=a[i];j--)
            for(int k=n;k>=1;k--)
                f[k][j]+=f[k-1][j-a[i]];
  		//注意这两重循环是反着的，否则会从已经改过的值转移来。
    long long sum=0;
    for(int i=1;i<=n;i++)
        for(int j=1;j<=2500;j++)
            sum+=(j*1.0/i==double(m))*f[i][j];
  	//如果平均值等于 m 就将 sum 加上 f[i][j]。
    cout<<sum<<endl;//AT 加换行。
    return 0;
}
```

---

## 作者：npqenqpve (赞：3)

简单dp，平均数为 $k$，令任意 $a_i\gets a_i-k$，转化为和为 $0$ 的子集的方案数，直接 $dp_{i,j}$ 表示前 $i$ 个选出 和为 $j$ 的方案数，$dp_{i,j}=dp_{i-1,j-a_i}$，然而下标为负数，简单处理一下即可转移，具体看代码。

[code](https://atcoder.jp/contests/arc060/submissions/33741624)

---


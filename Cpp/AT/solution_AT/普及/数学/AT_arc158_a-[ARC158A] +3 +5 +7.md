# [ARC158A] +3 +5 +7

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc158/tasks/arc158_a

整数 $ x_1,\ x_2,\ x_3 $ が与えられます．あなたはこれらの整数に対して，次の操作を何度でも行うことができます（$ 0 $ 回でもよい）：

- $ (1,2,3) $ の順列 $ (i,j,k) $ をひとつ選ぶ．つまり $ 1\leq\ i,j,k\leq\ 3 $ であるような整数の組 $ (i,j,k) $ であって $ i\neq\ j,\ i\neq\ k,\ j\neq\ k $ となるものを選ぶ．
- その後，$ x_i $ を $ x_i+3 $，$ x_j $ を $ x_j+5 $，$ x_k $ を $ x_k+7 $ で同時に置き換える．
 
あなたの目的は，$ x_1=x_2=x_3 $ が成り立つようにすることです．このことが可能であるか否かを判定してください．可能な場合には，それを達成するための最小の操作回数を出力してください．

$ T $ 個のテストケースが与えられるので，それぞれについて答えを求めてください．

## 说明/提示

### 制約

- $ 1\leq\ T\leq\ 2\times\ 10^5 $
- $ 1\leq\ x_1,\ x_2,\ x_3\ \leq\ 10^9 $
 
### Sample Explanation 1

ひとつめのテストケースについて，次のように操作を行うことで $ x_1=x_2=x_3 $ が成り立つようにできます． - $ (i,j,k)\ =\ (3,2,1) $ として操作を行う．$ (x_1,x_2,x_3) $ は $ (9,13,11) $ に置き換わる． - $ (i,j,k)\ =\ (2,3,1) $ として操作を行う．$ (x_1,x_2,x_3) $ は $ (16,16,16) $ に置き換わる．

## 样例 #1

### 输入

```
4
2 8 8
1 1 1
5 5 10
10 100 1000```

### 输出

```
2
0
-1
315```

# 题解

## 作者：Amberhart (赞：7)

这个题解其实和其他大佬们的解法差不多，**但是！**

代码**有优化**，~~也就优化了一点点~~，然后我会把一些细节**讲清楚**。

---
## 思路：

可以说是一道**找规律**的题目，找到规律就欧克啦。

首先要**排下序**，方便我们写程序，~~好像还挺押韵的~~。

排好序之后，就开始找规律了。

把第一个数设成 $x1$，第二个设成 $x2$，第三个设成  $x3$。

题目说只能加上 $3,5,7$，会发现，这是一个等差数列。

那么就可以以 $5$ 为“中心”，

也就是 $5$ 为 $0$，$3$ 为 $0-2$ 也就是 $-2$，$7$ 为 $0+2$ 也就是 $+2$。

也就是这样的：$-2,0,+2$。

那么我们就可以**发现**：

1. $x1,x2,x3$ 的差一定为**偶数**；

2. $x1,x2,x3$ 的和一定是 **$3$ 的倍数**。

第一个：原因很简单，因为 $-2,0,+2$ 之间的差就是偶数a。

或者说，$3,5,7$ 之间的差也是偶数a。

第二个：因为，$3,5,7$ 的和就是 $3$ 的倍数a。

好啦，两个比较重要的规律就找到啦，这俩规律就是用来判断到底满不满足要求的，不满足我们就输出 $-1$。

好！我们接着看如果满足要求应该怎么写？

设 $v$ 表示 $x1,x2,x3$ 的平均值，那么规律就是：

$1$. $v$ 跟 $x1,x2,x3$ 差肯定是**偶数**。

这个规律的原因跟上一条规律的差不多啦，因为 $v$ 是 $x1,x2,x3$ 的平均值，$x1,x2,x3$ 之间的差是偶数，那么 $v$ 跟 $x1,x2,x3$ 差肯定也是偶数啦qwq。

求到之后，最后设 $ans$ 为输出变量，为：

$\max((x3-v)\div 2,(v-x1)\div2)$

$(x3-v)\div2$ 和 $(v-x1)\div2$ 都是操作次数，

举个栗子:

$x1=2, x2=8, x3=8$

判断后发现满足可以进行的要求，那么，

求出它们仨的平均值为 $(2+2+8)\div3=4$

再去代入一下这个式子：

$\max((x3-v)\div2,(v-x1)\div2)$

=$\max((8-4)\div2,(4-2)\div2)$

=$\max(2,1) = 2$

答案是 $2$，没错！

那么我们分析的也没错。

最主要的就是：要开 `long long` ！！

好啦，分析完毕！

## 代码来喽~

```cpp
#include <bits/stdc++.h>
using namespace std;
long long n,a[4],x1,x2,x3,v,ans;
int main(){
	cin>>n;
	for(long long i=1;i<=n;i++){
		cin>>a[1]>>a[2]>>a[3];
		sort(a+1,a+1+3);
		x1=a[1],x2=a[2],x3=a[3];
		if((x1+x2+x3)%3!=0||(x2-x1)%2!=0||(x3-x2)%2!=0){
			cout<<"-1\n";
			continue;
		}
		v=(x1+x2+x3)/3;
		ans=max((x3-v)/2,(v-x1)/2);
		cout<<ans<<"\n";
	}
	return 0;
}

```

~~呼，终于写完惹，我可是写了一个半小时的，球大家的点赞+关注。~~

---

## 作者：WoodReal12 (赞：4)

[题目传送门](https://www.luogu.com.cn/problem/AT_arc158_a)

## 简述题意

给出三个数 $a,b,c$，让你使其三个数以任意顺序分别 $+3,+5,+7$，求是否能使得最终 $a=b=c$。

## 思路讲解

很多同学看到要分别 $+3,+5,+7$ 就不知道怎么做了，其实我们可以把 $+3,+5,+7$ 看成第一个数减二，中间数不变，最后一个数加二。这样一来 $+3,+5,+7$ 就变成了 $-2,0,+2$。所以只需要求出平均数，看大的到平均数和小的到平均数的次数哪个大，再将其输出就可以了。

## 关于特判

在写核心代码之前，还要先将无法操作的情况剔除出来。

1.三个数的相对奇偶性

因为三种操作并不会改变任意两个数的相对奇偶性，所以如果一开始奇偶性不相同就不可能操作得出来。

2.三个数的平均数

思路讲解中，求答案就需要三个数的平均数，如果三数平均数不为整数，也必将是无法操作的。

## 代码

```
#include <iostream>
#include <algorithm>
using namespace std;

int main(){
    int t;
    cin>>t;
    for(int i=1;i<=t;i++){
        long long a,b,c;
        cin>>a>>b>>c;
        if(a>b) swap(a,b);
		if(a>c) swap(a,c);
		if(b>c) swap(b,c);
		if((a+b+c)%3!=0||a%2!=b%2||b%2!=c%2){//无法操作
		    cout<<-1<<endl;
		    continue ;
		}
		long long d=(a+b+c)/3;// 求三个数的平均数 
		cout<<max((c-d)/2,(d-a)/2)<<endl;
    }
    return 0;
}
```

[AC记录](https://atcoder.jp/contests/arc158/submissions/44893037)

---

## 作者：chenyuchenghsefz (赞：4)

[题目传送门](https://www.luogu.com.cn/problem/AT_arc158_a)

输入后的数每次操作要 $+3$，$+5$，或 $+7$。如果奇偶性不同，则不可能经过几次操作后相同。所以要判断一下输入的数的除以 $2$ 的奇偶性。

可以把 $+3$，$+5$，$+7$，转换成 $+2$，$0$，$-2$。三个数的总和不变，所以目标是三个数的平均数。~~我绝对不会告诉你我这里想了两天。~~ 可以迭代一下，但是到这里答案其实已经出来了。把三个数从小到大排序，设 $d$ 是三个数的平均数，那么答案就是 $(d-a)/2$ 和 $(c-d)/2$ 较大的那个。

[AC 记录](https://www.luogu.com.cn/record/105142596)

# 代码
```cpp
#include <bits/stdc++.h>
using namespace std;
int main()
{
	int t;
	cin>>t;
	for(int i=1;i<=t;i++)
	{
		long long a,b,c;
		scanf("%lld %lld %lld",&a,&b,&c);
		if(a>b)
		swap(a,b);
		if(a>c)
		swap(a,c);
		if(b>c)
		swap(b,c);
		if(a%2!=b%2||b%2!=c%2||c%2!=a%2||(a+b+c)%3!=0)
		{
			printf("-1\n");
			continue;
		}
		long long d=(a+b+c)/3,ans;
		ans=max((c-d)/2,(d-a)/2);
		printf("%lld\n",ans);
	}
	return 0;
}
```


---

## 作者：Empty_Dream (赞：0)

## 题意
给你3个数 $a,b,c$，通过若干次操作使得 $a=b=c$。

一次操作指将 $a,b,c$ 按任意顺序分别 $+3,+5,+7$。

若可以使 $a=b=c$，输出最小操作次数，否则输出 $-1$。

## 思路
我们可以将 $+3,+5,+7$ 每一项都减去 $5$ 得到 $-2,0,+2$。

题目也就转变成了将三个数其中一个加上 $2$，另外一个减去 $2$，最终能否是三个数相同。

既然题目说有无法使三个数相等的情况，我们就先来考虑什么时候会使这三个数不相等。

1. 因为三个数中一个加上 $2$，另一个减去 $2$，所以它们的和是没有变的，而三个数最终又要相等，我们可以得到这三个数的和一定为三的倍数（否则最终变化后的结果就不为整数了）。

2. 根据同余可以得到：任何一个数加上一个偶数奇偶性不会改变，所以这三个数的奇偶性就必须相同（否则最终无法变化成三个奇偶性相同且相等的数）。

再排除完上述不可能情况后，只用求出三个数最终变化后的结果 $mid$，再取 $a,b,c$ 分别减去 $mid$ 的绝对值的最大值就好了。

这个数据范围要做什么不用我多说了吧。

## 代码
```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

int t, a, b, c;

signed main() {
    scanf("%lld", &t);
    while (t--){
        scanf("%lld%lld%lld", &a, &b, &c);
        if (!(a % 2 == b % 2 && b % 2 == c % 2)){//奇偶性判断
            printf("-1\n");
            continue;
        }
        if ((a + b + c) % 3 != 0){//余数判断
            printf("-1\n");
            continue;		
        }
        int mid = (a + b + c) / 3;
        printf("%lld\n", max(abs(mid - a), max(abs(mid - b), abs(mid - c))) / 2);//答案
    }
    return 0;
}
```

---

## 作者：bs_commander (赞：0)

可以看出，三种操作并不会改变任意两个数的相对奇偶性。 

所以如果一开始奇偶性就不同，无论如何也无法使三个数相同。 

同样无法使三个数相同的情况还有三个数的平均数不为整数。 

所以先特判：

```cpp
if(a[0]%2!=a[1]%2||a[1]%2!=a[2]%2||(a[0]+a[1]+a[2])%3!=0){
	printf("-1\n");
	continue;
} 
```
再来看有解的情况。 

$+3 +5 +7$ 相当于给大的减二，给小的加二。 

所以只需要求出平均数，看大的到平均数和小的到平均数的次数哪个大，输出即可。 

附上代码：

```cpp
#include <bits/stdc++.h>
using namespace std;
long long a[3],t,d,ans;//记得LL 
int main(){
	scanf("%lld",&t);
	for(int i=1;i<=t;i++){
		scanf("%lld %lld %lld",&a[0],&a[1],&a[2]);
		sort(a,a+3);//懒人排序 
		if(a[0]%2!=a[1]%2||a[1]%2!=a[2]%2||(a[0]+a[1]+a[2])%3!=0){
			printf("-1\n");
			continue;
		}//无解情况 
		d=(a[0]+a[1]+a[2])/3;//平均数 
		ans=max((a[2]-d)/2,(d-a[0])/2);
		printf("%lld\n",ans);
	}
	return 0;
}
```

---

## 作者：CSP_Sept (赞：0)

## 题意

给定 $a,b,c$，判定是否可以通过任意次操作，使得 $a=b=c$，一次操作是指：

- 选定不可重集合 $\{u,v,w\}=\{3,5,7\}$，将 $a,b,c$ 变成 $a+u,b+v,c+w$。

若可以，给出最少操作数。

## 解法

给出与所有题解不同的更具有观察性质的解法。

很容易注意到，$a,b,c$ 任意排列对答案没有影响。所以不妨设 $a<b<c$。

很容易将问题转化：令 $x=b-a,y=c-b$。这里交换 $x,y$ 对答案亦没有影响。不妨设 $x<y$。

不难注意到，我们进行的一次操作等价于将 $y-x$ 加上 $6$ 或 $0$ 或 $-6$。最终需要将 $y-x$ 变成 $0$（这只是第一步，我们会在下面提到）。

得到一个判定有解的条件：$y-x\equiv0\pmod 6$。

此外，显然 $x\equiv y\equiv0\pmod2$ 时才能有解。

下面考虑到，先进行若干次操作使得 $x=y=p$；接下来使用若干次操作（将 $x,y$ 同时减去 $2$）使得 $x=y=0$。

首先，显然应使用 $\dfrac{y-x}6$ 次操作得到 $p$；为使第二步操作数量尽可能少，我们在第一步中始终让 $x$ 只增加 $2$。这样，获得了最小的 $p$。

答案即为此时的 $\dfrac{y-x}6+\dfrac p2$。

易证无解情况等价于 $y-x\not\equiv 0\pmod 6$ 或 $p\not\equiv0\pmod2$。

## 代码

```cpp
void Solve(){
	a = rd(), b = rd(), c = rd();
	if(a > b) swap(a, b);
	if(b > c) swap(b, c);
	if(a > b) swap(a, b);
	x = b - a, y = c - b;
	if(x > y) swap(x, y);
	int k = x + ((y - x) / 6) * 2;
	if((y - x) % 6 || k & 1) puts("-1");
	else printf("%d\n", (y - x) / 6 + k / 2);
}
```

---

## 作者：bmatrix (赞：0)

[题面](https://www.luogu.com.cn/problem/AT_arc158_a)

由于我们只关心三个数是否相等，而不关心它们最终等于多少，所以三个加法间的相对大小不变即可。因此把 $+3,+5,+7$ 变成 $-2,+0,+2$ 后答案不变。

把操作转换后我们发现三个数的和始终不变，所以最终一定是使三个数都变成 $\dfrac{a+b+c}3$，如果这个数不是整数，则无解。

记 $p=\dfrac{a+b+c}3$，则每次操作必然是让一个 $>p$ 的数 $-2$，一个 $<p$ 的数 $+2$，所有操作造成的总变化量是 $s=|a-p|+|b-p|+|c-p|$，一次可以使这个数 $-4$，所以答案就是 $\dfrac s4$，如果 $s$ 不是 $4$ 的倍数则无解。

此外，如果有两个数的差是奇数也是无解的，因为操作数都是偶数，无法改变差值的奇偶性。

---

## 作者：快乐的大童 (赞：0)

### 题目大意
给你三个数 $a,b,c$，你可以将这三个数按任意顺序分别 $+3,+5,+7$，求是否能使得最终 $a=b=c$，如果是输出最小操作数。
### 思路
发现最终三个数变成什么值都无所谓，于是我们可以将每次操作转化成 $-2,+0,+2$，这样题意就转化成“将一个数的 $2$ 个值给到另一个数上”，最终这三个数的平均数就是我们的最终目标（因为只有转化成平均数才能是操作数最小）。
### 代码
```cpp
//仅放主要部分
//记得开 long long
//read()是输入函数，writeln()为输出函数
void solve(){
	rep(i,0,2) a[i]=R();
	if((a[0]+a[1]+a[2])%3!=0) return (void)PW;
	int sum=(a[0]+a[1]+a[2])/3;
	bool flag=0;
	rep(i,0,2) if(abs(a[i]-sum)%2==1) flag=1;
	if(flag||(abs(a[0]-sum)+abs(a[1]-sum)+abs(a[2]-sum))%2==1) return (void)PW;
	else writeln((abs(a[0]-sum)+abs(a[1]-sum)+abs(a[2]-sum))/4);
}
```


---

## 作者：Mabangjie6789 (赞：0)

## 题目简述

给你三个数 $x_1, x_2, x_3$，每次把三个数中的一个 $+3$，一个 $+5$，剩下一个 $+7$。问能否按这样的操作做到这三个数相等。如果可以，输出最小次数；否则，输出 $-1$。

你有 $T$ 个测试数据需要解决。

数据范围：$1 \le T \le 10^6$，$1 \le x_1, x_2, x_3 \le 10^9$。

## 题目思路

我们先把三个数从小到大排一下序。此时最大的是 $x_3$，最小的是 $x_1$。

我们发现 $(3, 5, 7)$ 是一个等差数列，可以变成 $(-2, 0, +2)$。

所以，就可以有判断条件：
1. $x_1 + x_2 + x_3$ 必为 $3$ 的倍数；
1. $x_1, x_2, x_3$ 之间的差必为偶数。

如果可以，那么设 $x_1, x_2, x_3$ 的平均数为 $x_4$。此时 $x_1, x_2, x_3$ 与 $x_4$ 的差必为偶数。

那么，这时的答案就是 $\max((x_4 - x_1) / 2, (x_3 - x_4) / 2)$。剩下的两个数，通过这么多次，必能做到与第一个数相等。

还有一个需要注意的点：**不开 `long long` 见祖宗**。由于三个数 $\le 10^9$，所以加起来会爆 `int` 上限，需要开 `long long`。~~（我不会告诉你们我就因为这个东西想了整整十分钟）~~

## 代码

```cpp
#include <iostream>
using namespace std;

long long t, a, b, c;
int main(){
    cin >> t;
    for (int i = 1; i <= t; i++){
        cin >> a >> b >> c;
        //排序
        if (a > b)
            swap(a, b);
        if (a > c)
            swap(a, c);
        if (b > c)
            swap(b, c);
        if ((b - a) % 2 != 0 || (c - b) % 2 != 0 || (a + b + c) % 3 != 0){//判断是否可以
            cout << -1 << endl;
            continue;
        }
        int d = (a + b + c) / 3;
        cout << max((c - d) / 2, (d - a) / 2) << endl;
    }
    return 0;
}
```

---


# 一変数方程式

## 题目描述

求解关于 $x$ 的方程 $ax^2 + bx + c=0$ 所有实数解。

## 说明/提示

$0 \le T \le 2\times 10^5 , -2^{31} \le a,b,c < 2^{31}$

Translated By @Ferm_Tawn

# 题解

## 作者：云浅知处 (赞：5)

这题和[CF20B](https://www.luogu.com.cn/problem/CF20B)简直一模一样啊......

[更好的阅读体验？](https://www.luogu.com.cn/blog/wwwluogucn/solution-at787)
***
首先，我们来介绍一些有关一元二次方程的基础知识。

基础概念：形如$ax^2+bx+c=0(a\ne0)$ 的等式叫做
一元二次方程。

下面推导一元二次方程的求根公式及判别式。

将等式两边同时除以$a$ (由于$a\ne0$，所以这是可行的)，得

$$x^ 2+\dfrac{b}{a} \cdot x+\dfrac{c}{a}=0$$

移项，得

$$x^2+\dfrac{b}{a}\cdot x= -\dfrac{c}{a}$$

等式两边同时加上$\dfrac{b^2}{4a^2}$,得

$$x^2+\dfrac{b}{a} \cdot x+\dfrac{b^2}{4a^2}=-\dfrac{c}{a}+\dfrac{b^2}{4a^2}$$

注意到：$x^2+\dfrac{b}{a}\cdot x+\dfrac{b^2}{4a^2}=(x+\dfrac{b}{2a})^2$

故原方程化为

$$(x+\dfrac{b}{2a})^2=-\dfrac{c}{a}+\dfrac{b^2}{4a^2}$$

化简得

$$(x+\dfrac{b}{2a})^2=\dfrac{b^2-4ac}{4a^2}$$

即
$$x+\dfrac{b}{2a}=\pm\sqrt{\dfrac{b^ 2-4ac}{4a^2}}$$

化简得

$$x+\dfrac{b}{2a}=\pm\dfrac{\sqrt{b^2-4ac}}{2a}$$

移项，得

$$x=\pm\dfrac{\sqrt{b^2-4ac}-b}{2a}$$

一般写为

$$x=\dfrac{-b\pm\sqrt{b^2-4ac}}{2a}$$

这就是一元二次方程的求根公式。

此时，根据平方根的定义，得:

当$b^2-4ac\geqslant0$ 时，$\sqrt{b^2-4ac}$是实数，即原方程有实数根。

反之，当$b^2-4ac<0$ 时，$\sqrt{b^2-4ac}$ 无意
义，即原方程无实数根。

进一步说:

当$b^2-4ac>0$ 时，原方程有两个实数根，分别为:

$$x_ 1=\dfrac{-b+\sqrt{b^ 2-4ac}}{2a},x_ 2=\dfrac{-b-\sqrt{b^2-4ac}}{2a}.$$

当$b^2-4ac=0$ 时，原方程有两个相同的实数根(称为重根)，均为$-\dfrac{b}{2a}.$

当$b^2-4ac<0$ 时，原方程无实数根。

一般地，我们将$b^2-4ac$称为一元二次方程的判别式，记作$\Delta.$
***
第二步，做题

需要注意的是: **这道题可没说输入的一-定是一元二次方程啊! $a=0$ 时它不是一元二次方程! **

所以，我们要**分类讨论**.

当$a=0$时，有以下三种情况:

$1.a=0,b=0,c=0$

显然，此时原方程有无数解。

$2.a=0,b=0,c \ne0$

原方程化为$0x^2+0x+c=0$， 即$c=0$， 这与$c\ne0$矛盾。

故此时原方程无解，什么也不输出。

$3.a=0,b\ne0$ (此时$c$的大小已经无所谓了)

原方程化为一元一次方程$bx+c=0$ 。

解得$x=-\dfrac{c}{b}$。

当$a\ne0$时，就是我们之前讲过的一元二次方程了。按照判别式与求根公式正常输出即可。
***
至于代码，就不贴了。在明白了以上知识之后，写出一篇AC代码是很容易的啦～
***
**下面的内容为拓展内容，有兴趣的同学可以往后看看**

作为一名MOer，我打算继续往后讲一点更有趣的内容。
***
$1.$根与系数的关系——韦达定理

我们知道，方程是由系数、未知数以及未知数的次数构成的。也就是说，我们可以认为一元二次方程由各项的系数所决定（相信你已经通过这道题明白了这一点）。

那么，当系数被确定的时候，这个一元二次方程就被确定了。进一步，当这个一元二次方程被确定的时候，它的两个根也被确定了。

自然地，这就引发我们去思考，方程的根与方程的系数有怎样的关系呢？让我们共同来探求吧。

我们知道：

如果一元二次方程$ax^2+bx+c=0(a\ne0)$的两根分别为$x_1,x_2$，则

$$x_ 1=\dfrac{-b+\sqrt{b^ 2-4ac}}{2a},x_2=\dfrac{-b-\sqrt{b^2-4ac}}{2a}.$$

$$\therefore x_1+x_2=\dfrac{-b+\sqrt{b^2-4ac}+(-b)-\sqrt{b^2-4ac}}{2a}=\dfrac{-2b}{2a}=-\dfrac{b}{a}$$

$x_1\cdot x_2=\dfrac{-b+\sqrt{b^2-4ac}}{2a}\cdot\dfrac{-b-\sqrt{b^2-4ac}}{2a}$

$\quad\quad\quad=\dfrac{(-b+\sqrt{b^2-4ac})(-b-\sqrt{b^2-4ac})}{4a^2}$

$\quad\quad\quad=\dfrac{(-b)^2-(\sqrt{b^2-4ac})^2}{4a^2}$（平方差公式）

$\quad\quad\quad=\dfrac{b^2-b^2+4ac}{4a^2}$

$\quad\quad\quad=\dfrac{4ac}{4a^2}=\dfrac{c}{a}$

结论：如果一元二次方程$ax^2+bx+c=0(a\ne0)$的两根分别为$x_1,x_2$，则有

$$
\begin{cases}
x_1+x_2=-\dfrac{b}{a}\\
x_1x_2=\dfrac{c}{a}\\
\end{cases}
$$

这就是著名的“韦达定理”。

韦达定理还有一种推导方式，由于篇幅的原因这里就不详述了。

这的确是”伟大“定理。我们应该记住它。
***
$2.$有关一元二次方程的整数根问题

解决这类问题，通常都是通过讨论其判别式，利用刚刚讲过的韦达定理或因式分解等方法求解。

我们知道：如果一元二次方程$ax^2+bx+c=0(c\ne0)$的两根分别为$x_1,x_2$，则有：

$$x_{1,2}=\dfrac{-b\pm\sqrt{b^2-4ac}}{2a}$$

（没错，这个公式就是这么好用）

由平方根的定义，我们知道：只有在判别式$\Delta=b^2-4ac$为完全平方数时，$\sqrt{b^2-4ac}$才是一个整数，故$x_1,x_2$是整数。

于是，我们得到结论：当且仅当判别式$\Delta=b^2-4ac$为完全平方数时，原方程有整数根。

$\text{The\ end.}$

---

## 作者：HohleFeuerwerke (赞：2)

#### 前言

这篇文章写给数学薄弱的人们。

[题目](https://www.luogu.com.cn/problem/AT787)。

#### 正文

题目的翻译恶臭。

这题的题意是这样的：给定方程 
$$ax^2+bx+c=0$$
的系数 $a,b,c$，然后让你求出这个方程的解。至于
>有几个输出几个

这句话的意思，就是如果无解，就不输出。如果有重根，就输出一个。

---

理解了题面以后，我们来讲解一下这题的过程。

如果不知道一元二次方程怎么解，我们珂以先来看一个练习：

>T1: 对于多项式 $f(x)=x^2-3x-2$，求出他的最小值。

容易看出，这个多项式一定是有最小值的，因为当我们画出这个函数的抛物线时：

![](https://cdn.luogu.com.cn/upload/image_hosting/3i5b19tq.png)

我们珂以清晰的看到，这个函数在达到最小值以后迅速的反弹了。

那么这题怎么做呢？

我们来思考，在初中数学中比较常见的求最值的方法：
1. 根据具体值
2. 特殊值时必有最值
3. 非负性
4. 基本不等式

显然，这里直接使用第三种方法就珂以快速的解决这道题。

我来演示一下过程：

解：$∵\ f(x)=x^2-3x-2=(x-\frac{3}{2})^2-\frac{17}{4}$  
根据平方数的非负性，其中 $(x-\frac{3}{2})^2≥0$，  
所以 $f(x)=x^2-3x-2≥0-\frac{17}{4}=-\frac{17}{4}$。当且仅当 $x=\frac{3}{2}$ 时取等。

怎么样？是不是很简单啊？你可能会疑惑，为什么我们要求这个东西呢？你马上就会知道了。

p.s: 这个方法把一元二次多项式化作一个平方项和一个常数的和的方法叫配方，可能接下来会直接引用配方这个词，不再详细记叙了。

---

我们再来看一道题：
>T2: 已知一元二次方程 $x^2-3x+2=0$，求这个方程的根的个数。

有的同学说：我数感好，我一下就试出来的，有一个根！它是 $x=1$！

然后有人对这个同学的说法表示反对，明明有第二个根 $x=2$！

然后有的同学说，我会因式分解！然后他把这个方程写出成了 $(x-1)(x-2)=0$，一眼就看出了有两个根。

好的，我们发现这个方程一共有两个根。但是除了这两方法，我们有没有其它的更加一般化的方法来求根的个数呢？

我们想到配方。

我们把这个方程瞬间就珂以写成这个形式：

$$x^2-3x+2=(x-\frac{3}{2})^2-\frac{1}{4}=0$$

然后移项，我们得到：

$$(x-\frac{3}{2})^2=\frac{1}{4}$$

对这个方程两边开方。因为我们知道任何非零实数都是有两个平方根的，所以这个方程开方以后会变成两个方程，他们分别是：$x-\frac{3}{2}=\frac{1}{2}$ 和 $x-\frac{3}{2}=-\frac{1}{2}$，然后就结束了，显然是有两个根。

但是，我们想要更加快速的解决这道题啊，怎么办呢？

我们研究一个一般形式。

假设我们配方后的结果是这样的：

$$f(x)=(x-a)^2-b=0$$

沿用刚才的方法，显然这个方程珂以移项：

$$(x-a)^2=b$$

这时，由于是含参方程，我们需要进行讨论：

1. 当 $b>0$ 时，这个方程有两个根，这是因为当你对方程两边进行开根的时候，显然会有两个平方根。
2. 当 $b=0$ 时，这个方程会直接化简成 $x-a=0$，显然只有一个根。
3. 当 $b<0$ 时，这个方程无解，因为没有一个实数的平方是负数。

结束讨论，因为我们已经得到了这种题目的一般解法。

给一道思考题：

>T3: 我们怎么对任意的一元二次多项式进行配方？

---

好的，显然我们聪明的读者已经解决了上面的问题。

我们刚刚的一般的配方形式，这时候就再次登场了。

$$f(x)=(x-a)^2+b$$

这是我们刚刚用来解决一般化问题的通式。我们把这个式子进行展开：

$$f(x)=x^2-2ax+a^2+b^2$$

有的读者说：那么如果二次项系数不为一呢？

很简单：我们直接在这个多项式左右两边都乘上二次项系数（假设是 $c$ ）就好了。

这个式子就变成了：

$$f(x)\cdot c=cx^2-2acx+a^2c+b^2c$$

这样我们就解决了一个比较一般化的一元二次多项式如何配方的问题了。

但是实质上我们还是差了一步。

如果我不是先给出配方形式，而是先给出了一般形式呢？

考虑比较系数。假设给出的一般化多项式为 $f(x)=a_1x^2+b_1x+c_1$，则有：



$$\begin{cases} a_1=c\\b_1=2ac\\c_1=a^2c+b^2c
\end{cases}$$

这个式子应该珂以解得：

$$\begin{cases}a=\frac{b_1}{2a_1}\\b=±\sqrt{\frac{c_1}{a_1}-\frac{b_1^2}{4a_1^2}}\\c=a_1 \end{cases}$$


得到了这个方程组，我们一下就能发现：这个一元二次多项式 $f(x)=a_1x^2+b_1x+c_1=0$ 有没有解，完全在于 $b$，也就是 $\sqrt{\frac{c_1}{a_1}-\frac{b_1^2}{4a_1^2}}$。然而这个东西看起来太难受，我们决定化简：

$$\sqrt{\frac{c_1}{a_1}-\frac{b_1^2}{4a_1^2}}=\sqrt{\frac{4a_1c_1-b_1^2}{4a_1^2}}=\frac{\sqrt{4a_1c_1-b_1^2}}{2a_1}$$


我们发现这个方程有没有解，关乎到的东西又少了。现在只有 $4a_1c_1-b_1^2$ 这个式子跟我们所要讲的内容有点关系了。

数学家为了方便研究，把一元二次多项式 $f(x)=ax^2+bx+c$ 的 $b^2-4ac$ 称呼为**判别式**，符号使用 $\Delta$ 表示

思考：

>T4: 有没有一般化的解一元二次方程的方法？

---

其实讲到这里已经很明显了。上面题目的答案很显然：配方。

假设我们有一元二次方程：

$$ax^2+bx+c=0$$

我们先把二次项系数 $a$ 扔掉，得到：

$$x^2+\frac{b}{a}\cdot x+\frac{c}{a}=0$$

这个时候我们愉快的配方：

$$(x+\frac{b}{2a})^2+\frac{c}{a}-\frac{b^2}{4a^2}=0$$


我们继续愉快的移项：

$$(x+\frac{b}{2a})^2=\frac{b^2}{4a^2}-\frac{c}{a}=\frac{b^2-4ac}{4a^2}$$

我们发现右边的分子其实就是 $\Delta$，把它写出来：

$$(x+\frac{b}{2a})^2=\frac{\Delta}{4a^2}$$

然后两边开方：

$$x+\frac{b}{2a}=±\sqrt{\frac{\Delta}{4a^2}}=±\frac{\sqrt{\Delta}}{2a}$$

这时我们继续移项：

$$x=\frac{-b±\sqrt{\Delta}}{2a}$$

这时我们就得到了一元二次方程的一般解法！我们珂以直接把数字带进来求得方程的解！

思考：

>T5: 此时你能找到方程的解的个数和 $\Delta$ 的关系了吗

---

这里给一下思考题答案：

1. 当 $\Delta>0$ 时，原方程有两个解。
2. 当 $\Delta=0$ 时，原方程有两个相等的解。或者珂以称之为重根。
3. 当 $\Delta<0$ 时，原方程无解。

所以直接贴一下代码，直接按照上面的公式模拟就行了：

```cpp
#include<bits/stdc++.h>
#define HohleFeuerwerke using namespace std
HohleFeuerwerke;
double a,b,c;
int main()
{
	ios::sync_with_stdio(false);
	cout.tie(0);cin.tie(0);
	cin>>a>>b>>c;
    if(a==0){
    	if(b==0&&c!=0) cout<<0<<endl;
        if(b==0&&c==0) cout<<3<<endl;
        else cout<<-c/b<<endl;
    }
	double delta=b*b-4*a*c;
	if(delta==0) cout<<-b/(2*a)<<endl;//特判判别式=0的情况
	if(delta<0) return 0;//没有解，直接结束
	if(delta>0){
		double x=sqrt(delta);
		cout<<(-b-x)/(2*a)<<" "<<(-b+x)/(2*a)<<endl;//输出公式
	}
	return 0;
}
```

同时还有一个双倍经验题，稍微简单一些，需要讨论的东西更少，~~不过不是恶评~~：[CF530A。](https://www.luogu.com.cn/problem/CF530A)

---

The End.



---

## 作者：nanatsuhi (赞：2)

这道题就是初中数学的标准难度吧。。。

首先，有个东西叫 $Δ$$(Delta)$ 。

中文名判别式，$Δ=b^2-4ac$。
1. 当 $Δ>0$ ，原方程有两个不等实根。
2. 当 $Δ=0$ ，原方程有两个相等实根。
3. 当 $Δ<0$ ，原方程无实根。

求根公式是:

$x=\frac{-b±\sqrt{b^{2}-4ac}}{2a}$

不过这都是在一元二次方程的范畴内。

题目里没说 $a≠0$，所以有可能变成一元一次方程。

在这种情况下，原方程变为 $bx+c=0$。

再进行分类讨论：

1. $b,c≠0$ 则 $x=-\frac{c}{b}$。
2. $c≠0$ , $b=0$ 则 $x$ 无解。
3. $b,c=0$ 则 $x=$ 任意实数 。

就按着这样的方法模拟就好。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int T;
    scanf("%d",&T);
    long long a,b,c;
    while(T--)
    {
        scanf("%lld%lld%lld",&a,&b,&c);
        if(!a)  //一次
        {
            if(!b) puts(c?"0":"3"); //情况2,3
            else printf("1 %.12f\n",-c*1.0/b); //情况1
        } 
        else  //二次
        {
            if(a<0)a=-a,b=-b,c=-c; //全乘上-1,根不变,作用体现在情况1
            double d=b*b-4.0*a*c;  //判别式
            if(fabs(d)<1e-9) printf("1 %.12f\n",-b/2.0/a); //double写==0有精度问题,情况2
            else if(d<0) puts("0"); //情况3
            else
            {
                double x,y;
                if(b>0)  //排序方法
                {
                    x=(-b-sqrt(d))/2/a; //公式
                    y=c*1.0/a/x; //韦达定理
                }else
                {
                    y = (-b+sqrt(d))/2/a; //公式
                    x = c*1.0/a/y;  //韦达定理
                }
                printf("2 %.12f %.12f\n",x,y);
            }
        }
    }
    return (int)233==666; //花式结束=)
}
```


---

## 作者：sunkuangzheng (赞：1)

### 题目分析
题目：给定方程 $ax^2+bx+c=0$，求它的根的个数以及根。如果无解输出 $0$，如果有无数解输出 $3$。

首先题目并没有保证 $a \ne 0$，所以我们需要分类讨论：

- 当 $a = 0,b = 0$ 时，原方程化为 $c = 0$。显然当 $c = 0$ 时有无数解，当 $c \ne 0$ 时无解。
- 当 $a = 0,b \ne 0$ 时，原方程为一元一次方程 $bx + c=0$，移项得 $x = -\dfrac{c}{b}$。
- 当 $a \ne 0$ 时，原方程为一元二次方程。这里需要了解一元二次方程的解法。第一个概念是根的判别式，即 $b^2-4ac$。当 $b^2-4ac > 0$ 时，方程有两不相等实根，为 $\dfrac{-b \pm \sqrt{b^2-4ac}}{2a}$。当 $b^2-4ac = 0$时，方程有两个相等的实根 $\dfrac{-b}{2a}$（注意这种情况在本题中需要输出 $1$）。当 $b^2-4ac < 0$ 时，方程无实根，输出 $0$。

至此，这题做完了。

本题的重点就是分类讨论思想。代码实现起来也很简单，故在此省略。

---

## 作者：scp020 (赞：1)

## 本题很坑，日文不好会被坑死（比如我）

### 一.总结坑点：

1. 输入的 $a$，$b$，$c$ 应定义为**长整型**。
2. 本题样例是输出小数点后 $3$ 位，我最开始交的也是保留 $3$ 位小数，可是 WA 了，这道题**实际上是要保留 $12$ 位小数**。
3. 本题输入可能不是二次方程，这个需要特判 $a$。
4. 如果判别式大于 $0$，即方程有两个实数根，则要先输出较小的根。

### 二.关于解法：

1. 判别式：根的判别式是判断方程**实根个数**的公式，用“$\Delta$”表示(读做“$delta$”)，$\Delta=b^2-4ac$。
2. 求根公式：$x_{1,2} = \dfrac{-b\pm\sqrt{b^2-4ac}}{2a}$。

### 部分代码：

1. 变量定义（小心，容易出错）：
```cpp
int t;
long long a,b,c;
double d,x,y;
```
2. 求根：
```cpp
if(!a)
{
	if(!b) puts(c?"0":"3");
	else printf("1 %.12f\n",-c*1.0/b);
} 
else
{
	if(a<0)a=-a,b=-b,c=-c;
	d=b*b-4.0*a*c;
	if(fabs(d)<1e-9) printf("1 %.12f\n",-b/2.0/a);
	else if(d<0) puts("0");
	else
	{
		if(b>0) x=(-b-sqrt(d))/2/a,y=c*1.0/a/x;
		else y=(-b+sqrt(d))/2/a,x=c*1.0/a/y;
		printf("2 %.12f %.12f\n",x,y);
	}
}
```


---


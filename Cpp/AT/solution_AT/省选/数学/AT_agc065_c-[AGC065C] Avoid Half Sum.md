# [AGC065C] Avoid Half Sum

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc065/tasks/agc065_c

長さ $ N $ の非負整数列 $ A=(A_1,A_2,\dots,A_N) $ が与えられます。ここで、 $ S=\sum_{i=1}^{N}\ A_i $ は偶数です。

以下の条件を満たす長さ $ N $ の非負整数列の組 $ B=(B_1,B_2,\dots,B_N),\ C=(C_1,C_2,\dots,C_N) $ が存在するか判定してください。

- $ i=1,2,\dots,N $ に対し $ B_i+C_i=A_i $ が成り立つ
- $ i=1,2,\dots,N $ に対し $ X_i=B_i $ または $ X_i=C_i $ が成り立つ任意の長さ $ N $ の整数列 $ X=(X_1,X_2,\dots,X_N) $ に対し、 $ \sum_{i=1}^{N}\ X_i\ \neq\ \frac{S}{2} $ である
 
$ T $ 個のテストケースについて答えてください。

## 说明/提示

### 制約

- $ 1\ \leq\ T $
- $ 1\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ 10^9 $
- $ \sum_{i=1}^{N}\ A_i $ は偶数
- $ 1 $ つの入力に含まれるテストケースについて、 $ N $ の総和は $ 2\ \times\ 10^5 $ 以下
- 入力される値はすべて整数
 
### Sample Explanation 1

$ 1 $ つ目のテストケースについて、 $ B=(1,1,3),\ C=(0,1,0) $ とすると条件を満たします。 $ 2 $ つ目のテストケースについて、条件を満たす $ B,C $ の組は存在しません。

## 样例 #1

### 输入

```
3
3
1 2 3
6
1 1 2 2 3 3
4
1 1 1000000000 1000000000```

### 输出

```
Yes
No
Yes```

# 题解

## 作者：_sunkuangzheng_ (赞：20)

有解当且仅当存在一个 $i$ 满足小于 $a_i$ 的奇数小于 $a_i-1$ 个，[证明](https://www.luogu.com.cn/paste/11m0lbjd)不难。排序扫一遍即可。

---

## 作者：masonpop (赞：3)

意识流题解。虽然极不严谨但总算是对结论做了点说明吧。

首先做一个转化。考虑每次你在 $b_i$ 和 $c_i$ 中选择了哪一个，那么原题等价于「选了的数的总和」等于「没选的数的总和」。形式化描述就是，一组划分方案**不合法**，当且仅当存在序列 $d$，使得

$$\begin{aligned}\sum\limits_{i=1}^nd_i(b_i-c_i)=0\end{aligned}$$

其中 $d_i\in \{-1,1\}$。

到这里就变成了一个类似博弈的东西。现在可以想想，如何给定符号的人上点难度。容易想到的策略是，先选一个比较大的 $a_i$，然后让这一次的 $b_i=a_i,c_i=0$，这一步相当于**拉大分差**。然后对于剩下的所有数，按最小化 $|b_i-c_i|$ 的原则划分（显然偶数均分，奇数差为 $1$）。这相当于最小化了后面的调整空间，即使之后每次都向 $0$ 调整，对和的绝对值的影响也很小，即尽可能**稳住优势**。

以下如无特殊说明，「第一步」和 「第二步」均与上面定义相同。

上面的策略看上去已经非常优秀了，但是如果直接选最大的数作为第一步的数，你就会被 `1 3 3 3` 轻松卡掉。问题在于其实我们可以把这三个 $3$ 同时按第一种方式划分，这并不改变结果（无论怎么定符号这三个数和的绝对值不小于 $3$）。然后对于奇数 $k$，我们可以把所有不小于 $k$ 的奇数的 $|b_i-c_i|$ 都设为 $k$，而且显然是越多越好。但是注意这样的数的数量一定要是奇数，否则可以用类似 $x\ (-x)\ x\ (-x)$ 的方式把第一步产生的优势变为 $0$，然后就爆炸了。

上面这一段话非常乱，但策略很简单，就是，选择一个奇数 $k$，然后把不小于它的奇数的 $|b_i-c_i|$ 全变成 $k$，如果这样的数总数为偶数再去掉一个。然后再判一下用一个偶数做第一步的情况即可。

这个东西应该是和官解的简洁结论等价的。但个人认为这样是更自然的。

[这份代码](https://atcoder.jp/contests/agc065/submissions/58122937)直接按照上述思路实现。

---


# [ARC057C] 2乗根

## 题目描述

给定$\sqrt{N}$小数形式的前$k$位$a_1a_2...a_k$，你需要求出满足这样条件的$N$。

特别指明，小数形式的前$k$位是用十进制表示的，并且中间的小数点和最前面的0都不会表示出来，题中所给出的数据会从第一个非0的位数开始。举个例子：$\sqrt{2}$的前5位为$14142$，而$\sqrt{100}$的前6位为$100000$。

## 说明/提示

限制条件：

- $1 \leq k \leq 1000$
- $a_1 \neq 0$

## 样例 #1

### 输入

```
1414```

### 输出

```
2```

## 样例 #2

### 输入

```
316```

### 输出

```
10```

## 样例 #3

### 输入

```
31415926535897932384626433```

### 输出

```
9869604401089358618834491```

# 题解

## 作者：TBB_Nozomi (赞：1)

本题前置技能：一般高精度模板（至少需要最多为$\mathcal O(n^2)$的高精度乘法，一般的高精度对低精度加减法和高精度对低精度除法）

容易知道本题的理论时间复杂度下限是$\mathcal \Theta(k \log k)$，这是因为假定能够提前知道答案，验证这个答案开平方根的结果就是想要的，需要至少这么大的时间复杂度。

由于在答案$N$后面多加多少组偶数个0，都不会影响$\sqrt{N}$的前$k$位数，至多就只是影响算出来的数的小数点的数量，因此可以考虑直接假设题目中给定的$S=\overline{a_1a_2\cdots a_k}$正是$\sqrt{N}$的整数部分。

首先我们很容易得到一层关系
$$S\leq\sqrt{N}<S+1$$
两边平方以后即有
$$A=S^2\leq N\leq (S+1)^2-1=B<(S+1)^2$$
现在可以确定$N$的范围了。如果这个范围中其中有某个$N$后面有最多组偶数个0，将这个数后面的偶数个0全部去掉就是正确答案。

然而满足答案的$N$至多有$2S+1$个，一个个枚举显然不现实。考虑令$N_0:N_0\times100=N$，这样的$N_0$应当满足
$$\left\lceil{A/100}\right\rceil\leq{N_0}<\left\lfloor{B/100}\right\rfloor$$
依赖于这种方式，最后夹逼使得这样的$N$只有一个，再去掉末尾的偶数个0，就是正确答案。

另外由于本题数据比较小，瓶颈可能是高精度乘法也可能是反复的位移过程。如果实现高精度的时候使用的是类似于双向链表之类的模板，又或者在缩小$A$和$B$的时候只是忽略了末尾的数字而没有实际的移动，那么瓶颈就是高精度乘法。总之本题时间复杂度无论是$\mathcal O(k^2)$还是$\mathcal O(k \log k)$都是没什么压力的。

附上核心代码如下（已去掉所有的头文件，LInt的operator[x]被重载为这个高精度数的低至高第x位(万进压位)）

```cpp
int main()	{
	LInt A;
	cin>>A;
	LInt B=A+1;
	A= A*A, B= B*B- 1;
	while(A/100 < B/100)	{
		A= (A+99)/100;
		B= B/100;
	}
	while(A[0]%100==0)	A/=100;
	cout<<A<<endl;
	return 0;
}
```

---


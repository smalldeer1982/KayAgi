# ビーバーの会合 (Meetings)

## 题目描述

[problemUrl]: https://atcoder.jp/contests/joisc2019/tasks/joisc2019_b

C++ を使用する場合は問題文の指示に従ってください．

このジャッジは C++ 以外にも対応しています．C++ 以外の言語を使用する場合，ジャッジとのやり取りには関数ではなく標準入出力を使用します．以下の指示に従ってください．

#### C++ 以外の言語の実装の詳細

まず， `Start` と出力して改行してください．flush を忘れないでください．

整数 $ N $ が標準入力により与えられます．

Query 関数を呼び出したい場合には，標準出力に `Query` と出力して改行したのち， $ 3 $ 個の整数を空白区切りで出力して改行してください．flush を忘れないでください．その後標準入力から戻り値を受け取ってください．

Bridge 関数を呼び出したい場合には，標準出力に `Bridge` と出力して改行したのち， $ 2 $ 個の整数を空白区切りで出力して改行してください．flush を忘れないでください．

最後に `End` と出力して改行してください．flush を忘れないでください．

# 题解

## 作者：Zpair (赞：5)

实现一个函数 $solve(rt,S)$ 表示 $rt$ 的子树下点集为 $S$，确定 $rt$ 子树下连边。

每次随机选一个点 $x$，然后考虑确定 $rt$ 到 $x$ 的一条链。

具体的，询问所有 $p \in S$，$p \ne x$ 的点，设：$o=(rt,x,p)$。

- 当 $p$ 在 $x$ 到 $rt$ 的链上时，有 $o=p$。
- 当 $p$ 在 $x$ 的子树下时，有 $o=x$。
- 当 $p$ 在 $x$ 到 $rt$ 的链上某个点的子树下时，$o$ 在 $rt$ 到 $x$ 的链上，且 $p$ 一定是 $o$ 子树下的点。

所以当 $o=p$ 时其在 $x$ 到 $rt$ 的链上，否则 $p$ 在 $o$ 子树下。

然后还需要把链上的点排序，只需要询问 $(rt,x,y)$ 就可以知道 $x$ 和 $y$ 谁在上面。

感性理解一下，这个东西大概相当于随机选分治中心跑点分治。

然后因为每个点度数很小，所以不会存在菊花图，所以可以通过。

---


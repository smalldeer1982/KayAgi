# 题目信息

# [ABC020C] 壁抜け

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc020/tasks/abc020_c

正方形のマスが縦 $ H $ 行、横 $ W $ 列に並んでいます。各マスは白または黒で塗られており、白マスのうち $ 2 $ つがそれぞれスタート地点とゴール地点として指定されています。

高橋君はスタート地点から出発して $ T $ 秒以内にゴール地点に到着したいです。高橋君は、各マスから上下左右に隣接する別のマスに移動することができます。このとき、移動先が白マスであれば $ 1 $ 秒、黒マスであれば $ x $ 秒の時間がかかります（移動前のマスの色は移動時間に影響しません）。ここで、 $ x $ の値は高橋君がスタート地点から出発する前にあなたに選んでもらいます。 $ x $ の値は正整数でなければならず、高橋君の出発後に値を変更することはできません。

高橋君が $ T $ 秒以内にゴール地点に到着することが可能であるような正整数 $ x $ の最大値を求めてください。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ 40 $ 点分のテストケースは $ 2 $ $ ≦ $ $ H, $ $ W $ $ ≦ $ $ 3, $ $ 2 $ $ ≦ $ $ T $ $ ≦ $ $ 30 $ を満たす。
- 別の $ 30 $ 点分のテストケースは $ 2 $ $ ≦ $ $ T $ $ ≦ $ $ 30 $ を満たす。

（※ 問題 D にも部分点が設定されています。そちらもご確認ください。）

### Sample Explanation 1

$ i $ 行 $ j $ 列目のマスを $ (i,\ j) $ で表します。 $ x\ =\ 8 $ のとき、 $ (1,\ 1)\ →\ (2,\ 1)\ →\ (2,\ 2)\ →\ (2,\ 3) $ と移動すると $ 1\ +\ 8\ +\ 1\ =\ 10 $ 秒でゴール地点に到着することができます。 $ x\ \geq\ 9 $ のとき、 $ 10 $ 秒以内にゴール地点に到着することはできません。

### Sample Explanation 2

スタート地点から右に直進すると $ 2x\ +\ 1 $ 秒でゴール地点に到達できます。遠回りすることで黒マスへの移動回数を減らすことができますが、 $ x $ の値によってはかえって時間がかかってしまいます。

## 样例 #1

### 输入

```
2 3 10

S##

.#G```

### 输出

```
8```

## 样例 #2

### 输入

```
3 4 7

S##G

.##.

..#.```

### 输出

```
3```

## 样例 #3

### 输入

```
4 4 1000000000

S###

####

####

###G```

### 输出

```
199999999```

# AI分析结果

### 题目内容重写

#### 题目描述

正方形的格子纵向有 $H$ 行，横向有 $W$ 列排列。每个格子被涂成白色或黑色，其中两个白色格子分别被指定为起点和终点。

高桥君从起点出发，希望在 $T$ 秒内到达终点。高桥君可以从一个格子移动到上下左右相邻的另一个格子。如果移动到的格子是白色的，则花费 $1$ 秒；如果是黑色的，则花费 $x$ 秒（移动前的格子颜色不影响移动时间）。$x$ 的值由你在高桥君出发前选择，且必须为正整数，出发后不能更改。

请找出高桥君在 $T$ 秒内能够到达终点的最大正整数 $x$。

#### 说明/提示

##### 部分点

- $40$ 分的测试用例满足 $2 \leq H, W \leq 3$，$2 \leq T \leq 30$。
- 另外 $30$ 分的测试用例满足 $2 \leq T \leq 30$。

##### 样例解释

1. 当 $x = 8$ 时，高桥君可以通过路径 $(1,1) \rightarrow (2,1) \rightarrow (2,2) \rightarrow (2,3)$ 在 $10$ 秒内到达终点。当 $x \geq 9$ 时，无法在 $10$ 秒内到达终点。
2. 当 $x = 3$ 时，高桥君可以通过路径 $(1,1) \rightarrow (1,2) \rightarrow (1,3) \rightarrow (1,4)$ 在 $7$ 秒内到达终点。

#### 样例 #1

##### 输入

```
2 3 10

S##

.#G
```

##### 输出

```
8
```

#### 样例 #2

##### 输入

```
3 4 7

S##G

.##.

..#.
```

##### 输出

```
3
```

#### 样例 #3

##### 输入

```
4 4 1000000000

S###

####

####

###G
```

##### 输出

```
199999999
```

### 算法分类
二分 + 搜索

### 题解分析与结论

#### 题解1：osfly
- **星级**：4星
- **关键亮点**：使用二分查找确定最大 $x$ 值，结合深度优先搜索（DFS）进行路径验证。通过记忆化搜索（记搜）优化搜索过程，减少重复计算。
- **个人心得**：作者提醒输出要换行，否则会WA，体现了对细节的重视。
- **核心代码**：
  ```cpp
  void dfs(int x, int y, long long dis) {
      if (dis >= dp[x][y]) return;
      dp[x][y] = dis;
      if (x == ex && y == ey) return;
      for (int i = 0; i < 4; i++) {
          int nx = x + nxtx[i];
          int ny = y + nxty[i];
          if (nx < 1 || nx > n || ny < 1 || ny > m) continue;
          dfs(nx, ny, dis + (map[nx][ny] == '.' ? 1 : mid));
      }
  }
  ```
  - **实现思想**：DFS遍历所有可能的路径，更新到达每个格子的最短时间，通过记忆化避免重复计算。

### 最优关键思路或技巧
1. **二分查找**：通过二分查找确定最大 $x$ 值，减少搜索范围。
2. **记忆化搜索**：在DFS中使用记忆化，避免重复计算，提高效率。
3. **细节处理**：注意输出格式，避免因格式错误导致WA。

### 可拓展之处
- **类似算法套路**：在需要确定某个参数的最大或最小值时，可以考虑二分查找结合搜索或动态规划的方法。
- **同类型题**：可以参考其他需要确定参数值并验证可行性的题目，如最短路径问题、资源分配问题等。

### 推荐题目
1. [P1162 填涂颜色](https://www.luogu.com.cn/problem/P1162)
2. [P1443 马的遍历](https://www.luogu.com.cn/problem/P1443)
3. [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141)

---
处理用时：28.20秒
# 题目信息

# [ABC022C] Blue Bird

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc022/tasks/abc022_c

高橋君の住む街には $ N $ 個の家と $ M $ 個の道があります。 家は $ 1 $ ～ $ N $ の整数によって番号付けされています。 高橋君は家 $ 1 $ に住んでいます。 道も $ 1 $ ～ $ M $ の整数によって番号付けされています。 $ i $ 番目の道は家 $ u_i $ と 家 $ v_i $ を双方向につなぐ長さ $ l_i $ メートルの道です。

高橋君は街のどこかの家に居るという「幸せの青い鳥」を探しています。 実は、「幸せの青い鳥」は高橋くんの家にいて、高橋君もそのことを知っています。 しかし、形だけでも探す旅に出ないと盛り上がりに欠けて面白くないので、仕方なく旅の計画をたてることにしました。

高橋君は自分の家から開始して、同じ道を二度以上通らないようにいくつかの家に訪れ、最後に自分の家に戻ってくる、という旅の計画をたてる予定です。 このとき盛り上がりを作るために、旅の途中で自分の家以外の家を少なくとも $ 1 $ 軒訪れる予定です。 高橋君はこの茶番をできるだけ早く終わらせたいので、通る道の長さの総和が最も小さくなるような計画が最適だと考えています。

高橋君の住む街の家と道の情報が与えられるので、高橋君が上の条件のもとで最適な計画をたてることができるかどうかを求めてください。 もし最適な計画をたてることができるならば、そのとき通る道の長さの総和を求めてください。

## 说明/提示

### Sample Explanation 1

家と道の様子は以下のようになります !\[\](/img/abc/022/ajfsieojafioes/C\_sample1.png) $ 1,\ 2,\ 5,\ 3,\ 4,\ 1 $ という順番に訪れる計画が最適です。 $ 1,\ 2,\ 1 $ という順番に訪れる計画は $ 1 $ 番目の道を $ 2 $ 回通っているので条件を満たしていません。

### Sample Explanation 2

同じ道を $ 2 $ 度以上通らない旅の計画をたてることはできません。よって $ -1 $ を出力します。

## 样例 #1

### 输入

```
5 7

1 2 2

1 4 1

2 3 7

1 5 12

3 5 2

2 5 3

3 4 5```

### 输出

```
13```

## 样例 #2

### 输入

```
5 4

1 2 1

1 3 1

1 4 1

1 5 1```

### 输出

```
-1```

## 样例 #3

### 输入

```
10 12

1 4 3

1 9 1

2 5 4

2 6 1

3 7 5

3 10 9

4 7 2

5 6 6

5 8 5

6 8 3

7 9 5

8 10 8```

### 输出

```
11```

# AI分析结果

【题目内容翻译】
# [ABC022C] Blue Bird

## 题目描述

高桥君居住的街道上有 $N$ 个房屋和 $M$ 条道路。房屋编号为 $1$ 到 $N$，高桥君住在房屋 $1$。道路编号为 $1$ 到 $M$，第 $i$ 条道路双向连接房屋 $u_i$ 和 $v_i$，长度为 $l_i$ 米。

高桥君正在寻找一只“幸福的蓝鸟”，这只鸟实际上就在他的家中，高桥君也知道这一点。但为了增加趣味性，他决定制定一个旅行计划。

高桥君计划从自己的家出发，不重复经过任何一条道路，访问若干个房屋，最后回到自己的家。为了增加趣味性，他计划至少访问一个除了自己家以外的房屋。高桥君希望尽快结束这个计划，因此他认为通过的道路总长度最小的计划是最优的。

给定高桥君居住的街道的房屋和道路信息，判断高桥君是否可以在上述条件下制定最优计划。如果可以，输出通过的道路总长度的最小值；否则输出 $-1$。

## 说明/提示

### 样例解释 1

房屋和道路的布局如下所示 !\[\](/img/abc/022/ajfsieojafioes/C\_sample1.png) 最优计划是按照 $1,\ 2,\ 5,\ 3,\ 4,\ 1$ 的顺序访问房屋。按照 $1,\ 2,\ 1$ 的顺序访问房屋的计划不符合条件，因为重复经过了第 $1$ 条道路。

### 样例解释 2

无法制定不重复经过任何一条道路的旅行计划，因此输出 $-1$。

## 样例 #1

### 输入

```
5 7

1 2 2

1 4 1

2 3 7

1 5 12

3 5 2

2 5 3

3 4 5```

### 输出

```
13```

## 样例 #2

### 输入

```
5 4

1 2 1

1 3 1

1 4 1

1 5 1```

### 输出

```
-1```

## 样例 #3

### 输入

```
10 12

1 4 3

1 9 1

2 5 4

2 6 1

3 7 5

3 10 9

4 7 2

5 6 6

5 8 5

6 8 3

7 9 5

8 10 8```

### 输出

```
11```

【算法分类】
图论

【题解分析与结论】
该题目要求找到一条从家出发，经过至少一个其他房屋，且不重复经过任何一条道路，最后回到家的最短路径。这可以转化为在图中寻找一个包含家节点的最小环的问题。由于题目要求不重复经过任何一条道路，因此需要找到一个不重复经过任何边的环。

由于题目中要求至少访问一个其他房屋，因此需要找到一个包含至少三个节点的环。这个问题可以通过枚举所有可能的环并计算其长度来解决，但由于时间复杂度较高，通常需要优化。

【通用建议与扩展思路】
1. **图论中的环检测**：可以通过深度优先搜索（DFS）或广度优先搜索（BFS）来检测图中是否存在环，并计算环的长度。
2. **最小环问题**：这是一个经典的最小环问题，可以通过枚举所有可能的环并计算其长度来解决，但需要注意优化时间复杂度。
3. **启发式算法**：可以考虑使用启发式算法来减少搜索空间，例如优先搜索较短的路径。

【推荐题目】
1. [P2731 [USACO3.3] 骑马修栅栏](https://www.luogu.com.cn/problem/P2731)
2. [P1341 无序字母对](https://www.luogu.com.cn/problem/P1341)
3. [P2921 [USACO08DEC] Trick or Treat on the Farm](https://www.luogu.com.cn/problem/P2921)

---
处理用时：27.28秒
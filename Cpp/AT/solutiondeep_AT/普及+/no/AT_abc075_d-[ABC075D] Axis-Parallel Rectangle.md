# 题目信息

# [ABC075D] Axis-Parallel Rectangle

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc075/tasks/abc075_d

2次元座標上に $ N $ 個の点があります。   
 $ i(1≦i≦N) $ 番目の点の座標は $ (x_i,y_i) $ です。   
 長方形の内部に $ N $ 点のうち $ K $ 個以上の点を含みつつ、それぞれの辺がX軸かY軸に平行な長方形を考えます。  
 このとき、長方形の辺上の点は長方形の内部に含みます。   
 それらの長方形の中で、最小の面積となるような長方形の面積を求めてください。

## 说明/提示

### 制約

- $ 2≦K≦N≦50 $
- $ -10^9≦x_i,y_i≦10^9\ (1≦i≦N) $
- $ x_i≠x_j\ (1≦i\ <\ j≦N) $
- $ y_i≠y_j\ (1≦i\ <\ j≦N) $
- 入力値はすべて整数である。(21:50 追記)

### Sample Explanation 1

条件を満たす最小面積となる長方形の $ 1 $ つは $ (1,1),(8,1),(1,4),(8,4) $ の $ 4 $ つの頂点で構成されます。 その面積は $ (8-1)\ ×\ (4-1)\ =\ 21 $ であるため、$ 21 $ と出力します。

### Sample Explanation 3

オーバーフローに注意してください。

## 样例 #1

### 输入

```
4 4

1 4

3 3

6 2

8 1```

### 输出

```
21```

## 样例 #2

### 输入

```
4 2

0 0

1 1

2 2

3 3```

### 输出

```
1```

## 样例 #3

### 输入

```
4 3

-1000000000 -1000000000

1000000000 1000000000

-999999999 999999999

999999999 -999999999```

### 输出

```
3999999996000000001```

# AI分析结果

【题目内容重写】
# [ABC075D] 平行于坐标轴的长方形

## 题目描述

在二维平面上有 $N$ 个点。  
第 $i(1≦i≦N)$ 个点的坐标是 $(x_i,y_i)$。  
考虑一个边平行于X轴或Y轴的长方形，要求该长方形内部包含至少 $K$ 个点。  
此时，长方形边上的点也被视为包含在内部。  
在这些长方形中，求面积最小的长方形的面积。

## 说明/提示

### 约束

- $2≦K≦N≦50$
- $-10^9≦x_i,y_i≦10^9\ (1≦i≦N)$
- $x_i≠x_j\ (1≦i\ <\ j≦N)$
- $y_i≠y_j\ (1≦i\ <\ j≦N)$
- 输入值都是整数。(21:50 追加)

### 样例解释 1

满足条件的最小面积的长方形的一个例子是由 $(1,1),(8,1),(1,4),(8,4)$ 这4个顶点构成的长方形。其面积为 $(8-1)\ ×\ (4-1)\ =\ 21$，因此输出 $21$。

### 样例解释 3

注意溢出问题。

## 样例 #1

### 输入

```
4 4

1 4

3 3

6 2

8 1```

### 输出

```
21```

## 样例 #2

### 输入

```
4 2

0 0

1 1

2 2

3 3```

### 输出

```
1```

## 样例 #3

### 输入

```
4 3

-1000000000 -1000000000

1000000000 1000000000

-999999999 999999999

999999999 -999999999```

### 输出

```
3999999996000000001```

【算法分类】
枚举、离散化、前缀和

【题解分析与结论】
该题的核心思路是通过枚举长方形的边界，结合离散化和前缀和优化，快速计算包含的点数并找到最小面积。题解中主要采用了以下几种优化方法：
1. 离散化：将坐标离散化，减少计算量。
2. 前缀和：通过二维前缀和快速计算矩形内的点数。
3. 枚举优化：通过固定部分边界，减少枚举次数。

【评分较高的题解】
1. **作者：0xyz (4星)**
   - **关键亮点**：详细分析了枚举优化的思路，结合离散化和前缀和，时间复杂度优化到 $O(n^3)$。
   - **代码核心**：通过离散化坐标，使用二维前缀和快速计算矩形内的点数，并枚举边界找到最小面积。
   ```cpp
   for(ll i=1;i<=cx;i++)
       for(ll j=1;j<=cy;j++)
           if(S(i,cx,j,cy)>=K)
               for(ll k=i,h=cy;k<=cx;k++)
                   if(S(i,k,j,cy)>=K){
                   while(S(i,k,j,h-1)>=K)h--;
                   ans=min(ans,(x[k]-x[i])*(y[h]-y[j]));
               }
   ```

2. **作者：fly20040720 (4星)**
   - **关键亮点**：代码结构清晰，使用了离散化和前缀和，思路简洁明了。
   - **代码核心**：通过离散化坐标，使用二维前缀和快速计算矩形内的点数，并枚举边界找到最小面积。
   ```cpp
   for(int i=1;i<=n;i++)
       for(int j=1;j<=n;j++)
           for(int s=i;s<=n;s++)
               for(int q=j;q<=n;q++)
                   if(sum[s][q] - sum[s][j-1] - sum[i-1][q] + sum[i-1][j-1] >= k)
                       ans=min(ans,abs(invx[s] - invx[i]) * abs(invy[q] - invy[j]));
   ```

【最优关键思路】
1. **离散化**：将坐标离散化，减少计算量。
2. **前缀和**：通过二维前缀和快速计算矩形内的点数。
3. **枚举优化**：通过固定部分边界，减少枚举次数。

【拓展思路】
类似题目可以通过离散化和前缀和优化，快速计算矩形内的点数。例如，求包含最多点的矩形、求满足特定条件的矩形等。

【推荐题目】
1. [P1880 石子合并](https://www.luogu.com.cn/problem/P1880)
2. [P1044 栈](https://www.luogu.com.cn/problem/P1044)
3. [P1063 能量项链](https://www.luogu.com.cn/problem/P1063)

---
处理用时：33.57秒
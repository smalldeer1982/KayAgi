# 题目信息

# [ABC100D] Patisserie ABC

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc100/tasks/abc100_d

高橋君はプロのパティシエになり, AtCoder Beginner Contest 100 を記念して, 「ABC洋菓子店」というお店を開いた.

ABC洋菓子店では, $ N $ 種類のケーキを売っている.  
 各種類のケーキには「綺麗さ」「おいしさ」「人気度」の $ 3 $ つの値を持ち, $ i $ 種類目のケーキの綺麗さは $ x_i $, おいしさは $ y_i $, 人気度は $ z_i $ である.  
 これらの値は $ 0 $ 以下である可能性もある.

りんごさんは, ABC洋菓子店で $ M $ 個のケーキを食べることにした. 彼は次のように, 食べるケーキの組み合わせを選ぶことにした.

- 同じ種類のケーキを $ 2 $ 個以上食べない.
- 上の条件を満たしつつ, (綺麗さの合計の絶対値) + (おいしさの合計の絶対値) + (人気度の合計の絶対値) が最大になるように選ぶ.

このとき, りんごさんが選ぶケーキの (綺麗さの合計の絶対値) + (おいしさの合計の絶対値) + (人気度の合計の絶対値) の最大値を求めなさい.

## 说明/提示

### 制約

- $ N $ は $ 1 $ 以上 $ 1\ 000 $ 以下の整数
- $ M $ は $ 0 $ 以上 $ N $ 以下の整数
- $ x_i,\ y_i,\ z_i\ (1\ \leq\ i\ \leq\ N) $ は, それぞれ $ -10\ 000\ 000\ 000 $ 以上 $ 10\ 000\ 000\ 000 $ 以下の整数.

### Sample Explanation 1

$ 2,\ 4,\ 5 $ 種類目のケーキを食べることを考える. そのとき, 「綺麗さ」「おいしさ」「人気度」の合計はそれぞれ次のようになる. - 綺麗さ：$ 1\ +\ 3\ +\ 9\ =\ 13 $ - おいしさ：$ 5\ +\ 5\ +\ 7\ =\ 17 $ - 人気度：$ 9\ +\ 8\ +\ 9\ =\ 26 $ このときの (綺麗さの合計の絶対値) + (おいしさの合計の絶対値) + (人気度の合計の絶対値) は $ 13\ +\ 17\ +\ 26\ =\ 56 $ となり, これが最大になる.

### Sample Explanation 2

$ 1,\ 3,\ 5 $ 種類目のケーキを食べることを考える. そのとき, 「綺麗さ」「おいしさ」「人気度」の合計はそれぞれ次のようになる. - 綺麗さ：$ 1\ +\ 7\ +\ 13\ =\ 21 $ - おいしさ：$ (-2)\ +\ (-8)\ +\ (-14)\ =\ -24 $ - 人気度：$ 3\ +\ (-9)\ +\ 15\ =\ 9 $ このときの (綺麗さの合計の絶対値) + (おいしさの合計の絶対値) + (人気度の合計の絶対値) は $ 21\ +\ 24\ +\ 9\ =\ 54 $ となり, これが最大になる.

### Sample Explanation 3

$ 3,\ 4,\ 5,\ 7,\ 10 $ 種類目のケーキを食べると, 綺麗さの合計は $ -323 $, おいしさの合計は $ 66 $, 人気度の合計は $ 249 $ となる. このときの (綺麗さの合計の絶対値) + (おいしさの合計の絶対値) + (人気度の合計の絶対値) は $ 323\ +\ 66\ +\ 249\ =\ 638 $ となり, これが最大になる.

### Sample Explanation 4

ケーキの綺麗さ, おいしさ, 人気度や出力すべき値が, 32bit 整数に収まらない場合もある.

## 样例 #1

### 输入

```
5 3

3 1 4

1 5 9

2 6 5

3 5 8

9 7 9```

### 输出

```
56```

## 样例 #2

### 输入

```
5 3

1 -2 3

-4 5 -6

7 -8 -9

-10 11 -12

13 -14 15```

### 输出

```
54```

## 样例 #3

### 输入

```
10 5

10 -80 21

23 8 38

-94 28 11

-26 -2 18

-69 72 79

-26 -86 -54

-72 -50 59

21 65 -32

40 -94 87

-62 18 82```

### 输出

```
638```

## 样例 #4

### 输入

```
3 2

2000000000 -9000000000 4000000000

7000000000 -5000000000 3000000000

6000000000 -1000000000 8000000000```

### 输出

```
30000000000```

# AI分析结果

### 题目内容
高桥君是专业的糕点师，为了纪念AtCoder Beginner Contest 100，他开了一家名为“ABC洋菓子店”的店铺。

ABC洋菓子店出售$N$种蛋糕。每种蛋糕有三个属性：“美观度”、“美味度”和“受欢迎度”，第$i$种蛋糕的美观度为$x_i$，美味度为$y_i$，受欢迎度为$z_i$。这些值可能为负数。

苹果小姐决定在ABC洋菓子店吃$M$个蛋糕。她选择蛋糕的方式如下：
- 每种蛋糕最多吃一个。
- 在满足上述条件的情况下，选择使得（美观度总和的绝对值）+（美味度总和的绝对值）+（受欢迎度总和的绝对值）最大的蛋糕组合。

请计算苹果小姐选择的蛋糕组合的最大值。

### 算法分类
枚举

### 题解分析与结论
本题的核心难点在于如何处理绝对值。由于绝对值的存在，直接计算每种组合的总和并不容易。大多数题解通过枚举每个属性的正负情况（共8种）来消除绝对值的影响，然后对每种情况进行排序并选择前$M$个蛋糕，最终取最大值。

### 评分较高的题解
1. **作者：μηδσ (赞：7)**
   - **星级：4**
   - **关键亮点**：通过三重循环枚举每个属性的正负情况，使用排序和贪心选择前$M$个蛋糕，思路清晰，代码简洁。
   - **核心代码**：
     ```cpp
     for(i = -1;i <= 1;i += 2)
         for(j = -1;j <= 1;j += 2)
             for(k = -1;k <= 1;k += 2){    
                 sort(cake + 1, cake + n + 1, cmp); 
                 ll tot[5] = {};        
                 for(int l = 1;l <= m;l++){
                     tot[1] += cake[l].a;
                     tot[2] += cake[l].b;
                     tot[3] += cake[l].c;
                 } 
                 ans = max(ans, tot[1] * i + tot[2] * j + tot[3] * k);
             }
     ```

2. **作者：Nightingale_OI (赞：4)**
   - **星级：4**
   - **关键亮点**：使用动态规划结合枚举，通过状态转移方程计算每种情况的最大值，思路清晰，代码可读性强。
   - **核心代码**：
     ```cpp
     f(i,1,n)f(j,1,m)f(k,0,7){
         dp[i][j][k]=-101010101010101010;
         Max(dp[i][j][k],dp[i-1][j][k]);
         Max(dp[i][j][k],dp[i-1][j-1][k]+pos(k,1)*a[i]+pos(k,2)*b[i]+pos(k,3)*c[i]);
     }
     ```

3. **作者：suzhikz (赞：2)**
   - **星级：4**
   - **关键亮点**：通过枚举正负情况，计算每种情况下的蛋糕价值并排序，选择前$M$个蛋糕，思路简洁明了。
   - **核心代码**：
     ```cpp
     for(int i=-1;i<=1;i+=2){
         for(int j=-1;j<=1;j+=2){
             for(int k=-1;k<=1;k+=2){
                 for(int l=1;l<=n;l++){
                     z[l]=a[l]*i+b[l]*j+c[l]*k;
                 }
                 sort(z+1,z+1+n);
                 ll book=0;
                 for(int i=n;i>=n-m+1;i--)book+=z[i];
                 ans=max(ans,book);
             }
         }
     }
     ```

### 最优关键思路
通过枚举每个属性的正负情况（共8种），消除绝对值的影响，然后对每种情况进行排序并选择前$M$个蛋糕，最终取最大值。这种方法简洁高效，适用于类似需要处理绝对值的题目。

### 可拓展之处
类似的处理绝对值的思路可以应用于其他需要最大化或最小化多个属性绝对值和的问题，例如在资源分配、路径规划等领域。

### 推荐题目
1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

---
处理用时：33.81秒
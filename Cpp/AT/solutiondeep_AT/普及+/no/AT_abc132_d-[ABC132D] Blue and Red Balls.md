# 题目信息

# [ABC132D] Blue and Red Balls

## 题目描述

有 $K$ 个蓝球和 $N-K$ 个红球。同一颜色的球是完全相同的。Snuke 和 Takahashi 在玩这些球。

首先，Snuke 将把 $N$ 个球从左到右排成一排。

然后，Takahashi 将收走 $K$ 个蓝球。在一次操作中，他可以收走连续的一个区间的蓝球。他将以最少的操作数收走所有蓝球。

Snuke 有多少种排列这 $N$ 个球的方法，使得 Takahashi 恰好操作 $i$ 次才能收走所有的 $K$ 个蓝球？对于每个 $i$（$1\le i\le K$）计算排列数对 $10^9+7$ 取模的结果。

------------

## 说明/提示

#### 样例解释 1
有三种方法来排列球，使得 Takahashi 恰好操作 $1$ 次：$(B, B, B, R, R)$，$(R, B, B, B, R)$ 和 $(R, R, B, B, B)$。（$R$ 和 $B$ 分别代表红色和蓝色）。

有六种方法来排列球，使得 Takahashi 恰好操作 $2$ 次：$(B, B, R, B, R)$，$(B, B, R, R, B)$，$(R, B, B, R, B)$，$(R, B, B, R, B)$，$(B, R, B, B, R)$，和 $(B, R, R, B, B)$。

有一种方法来排列球，使得 Takahashi 恰好操作 $3$ 次：$(B, R, B, R, B)$。

#### 样例解释 2
务必输出对 $10^9+7$ 的排列数。

## 样例 #1

### 输入

```
5 3```

### 输出

```
3

6

1```

## 样例 #2

### 输入

```
2000 3```

### 输出

```
1998

3990006

327341989```

# AI分析结果

【题目内容】
# [ABC132D] Blue and Red Balls

## 题目描述

有 $K$ 个蓝球和 $N-K$ 个红球。同一颜色的球是完全相同的。Snuke 和 Takahashi 在玩这些球。

首先，Snuke 将把 $N$ 个球从左到右排成一排。

然后，Takahashi 将收走 $K$ 个蓝球。在一次操作中，他可以收走连续的一个区间的蓝球。他将以最少的操作数收走所有蓝球。

Snuke 有多少种排列这 $N$ 个球的方法，使得 Takahashi 恰好操作 $i$ 次才能收走所有的 $K$ 个蓝球？对于每个 $i$（$1\le i\le K$）计算排列数对 $10^9+7$ 取模的结果。

------------

## 说明/提示

#### 样例解释 1
有三种方法来排列球，使得 Takahashi 恰好操作 $1$ 次：$(B, B, B, R, R)$，$(R, B, B, B, R)$ 和 $(R, R, B, B, B)$。（$R$ 和 $B$ 分别代表红色和蓝色）。

有六种方法来排列球，使得 Takahashi 恰好操作 $2$ 次：$(B, B, R, B, R)$，$(B, B, R, R, B)$，$(R, B, B, R, B)$，$(R, B, B, R, B)$，$(B, R, B, B, R)$，和 $(B, R, R, B, B)$。

有一种方法来排列球，使得 Takahashi 恰好操作 $3$ 次：$(B, R, B, R, B)$。

#### 样例解释 2
务必输出对 $10^9+7$ 的排列数。

## 样例 #1

### 输入

```
5 3```

### 输出

```
3

6

1```

## 样例 #2

### 输入

```
2000 3```

### 输出

```
1998

3990006

327341989```

【算法分类】
组合数学

【题解分析与结论】
本题的核心是通过组合数学中的隔板法来计算将蓝球分成若干段，并将这些段插入到红球中的方案数。各题解的思路基本一致，主要区别在于组合数的计算方式和代码实现细节。

【评分较高的题解】

1. **作者：Limit (赞：9)**
   - **星级：5星**
   - **关键亮点：**
     - 使用隔板法将蓝球分成 $i$ 段，方案数为 $C_{K-1}^{i-1}$。
     - 将 $i$ 段蓝球插入到 $N-K$ 个红球中，方案数为 $C_{N-K+1}^{i}$。
     - 预处理阶乘和逆元，优化组合数计算。
   - **代码实现：**
     ```cpp
     long long C(int N,int M) {
         if(M>N) return 0;
         if(N==M) return 1;
         long long result=fac[N];
         result=(result*inv[N-M])%mod*inv[M];
         return result%mod;
     }
     ```

2. **作者：EuphoricStar (赞：3)**
   - **星级：4星**
   - **关键亮点：**
     - 同样使用隔板法，思路清晰，代码简洁。
     - 预处理阶乘和逆元，优化组合数计算。
   - **代码实现：**
     ```cpp
     ll C(ll n, ll m) {
         if (n < m) return 0;
         return fac[n] * inv[m] % mod * inv[n - m] % mod;
     }
     ```

3. **作者：liyixi09 (赞：0)**
   - **星级：4星**
   - **关键亮点：**
     - 使用杨辉三角预处理组合数，避免逆元计算。
     - 代码实现简单，适合初学者理解。
   - **代码实现：**
     ```cpp
     for(int i=1; i<=n; i++) {
         a[i][0]=1,a[i][i]=1;
         for(int j=1; j<i; j++) {
             a[i][j]=(a[i-1][j]+a[i-1][j-1])%mod;
         }
     }
     ```

【最优关键思路】
- **隔板法**：将蓝球分成 $i$ 段，方案数为 $C_{K-1}^{i-1}$。
- **插入法**：将 $i$ 段蓝球插入到 $N-K$ 个红球中，方案数为 $C_{N-K+1}^{i}$。
- **预处理优化**：通过预处理阶乘和逆元，或使用杨辉三角，优化组合数计算。

【拓展思路】
- 类似问题：将不同颜色的球分成若干段，计算排列方案数。
- 组合数学中的其他应用，如排列、组合、容斥原理等。

【推荐题目】
1. P3807 【模板】卢卡斯定理
2. P1495 【模板】组合数取模
3. P1357 【模板】杨辉三角

---
处理用时：30.38秒
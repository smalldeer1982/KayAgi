# 题目信息

# [ABC150D] Semi Common Multiple

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc150/tasks/abc150_d

長さ $ N $ の偶数からなる正の整数列 $ A=\ {a_1,a_2,...,a_N} $ と、整数 $ M $ が与えられます。

任意の $ k(1\ \leq\ k\ \leq\ N) $ に対して以下の条件を満たす正の整数 $ X $ を $ A $ の「半公倍数」と定義します。

- $ X=\ a_k\ \times\ (p+0.5) $ を満たす負でない整数 $ p $ が存在する。

$ 1 $ 以上 $ M $ 以下の整数のうちの $ A $ の半公倍数の個数を求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ M\ \leq\ 10^9 $
- $ 2\ \leq\ a_i\ \leq\ 10^9 $
- $ a_i $ は偶数である。
- 入力は全て整数である。

### Sample Explanation 1

\- $ 15\ =\ 6\ \times\ 2.5 $ - $ 15\ =\ 10\ \times\ 1.5 $ - $ 45\ =\ 6\ \times\ 7.5 $ - $ 45\ =\ 10\ \times\ 4.5 $ より、$ 15,45 $ は $ A $ の半公倍数です。$ 1 $ 以上 $ 50 $ 以下の整数に他に $ A $ の半公倍数はないので、答えは $ 2 $ となります。

### Sample Explanation 2

答えが $ 0 $ の場合もあります。

## 样例 #1

### 输入

```
2 50

6 10```

### 输出

```
2```

## 样例 #2

### 输入

```
3 100

14 22 40```

### 输出

```
0```

## 样例 #3

### 输入

```
5 1000000000

6 6 2 6 2```

### 输出

```
166666667```

# AI分析结果

### 题目内容重写
#### 题目描述
给定一个长度为 $N$ 的由偶数构成的正整数序列 $A=\{a_1,a_2,...,a_N\}$ 和一个整数 $M$。

对于任意的 $k(1 \leq k \leq N)$，满足以下条件的正整数 $X$ 被称为 $A$ 的「半公倍数」：

- 存在一个非负整数 $p$，使得 $X = a_k \times (p + 0.5)$。

请计算在 $1$ 到 $M$ 之间的整数中，$A$ 的半公倍数的个数。

#### 说明/提示
##### 约束
- $1 \leq N \leq 10^5$
- $1 \leq M \leq 10^9$
- $2 \leq a_i \leq 10^9$
- $a_i$ 是偶数。
- 输入均为整数。

##### 样例解释
###### 样例 1
输入：
```
2 50
6 10
```
输出：
```
2
```
解释：
- $15 = 6 \times 2.5$
- $15 = 10 \times 1.5$
- $45 = 6 \times 7.5$
- $45 = 10 \times 4.5$

因此，$15$ 和 $45$ 是 $A$ 的半公倍数。在 $1$ 到 $50$ 之间的整数中没有其他半公倍数，所以答案为 $2$。

###### 样例 2
输入：
```
3 100
14 22 40
```
输出：
```
0
```
解释：
没有满足条件的半公倍数，因此答案为 $0$。

###### 样例 3
输入：
```
5 1000000000
6 6 2 6 2
```
输出：
```
166666667
```

### 算法分类
数学

### 题解分析与结论
该题的核心在于理解半公倍数的定义，并利用数学方法进行求解。多个题解都围绕以下思路展开：
1. **半公倍数的定义**：$X = a_k \times (p + 0.5)$，可以转化为 $X = \frac{a_k}{2} \times (2p + 1)$，其中 $2p + 1$ 是奇数。
2. **最小公倍数的应用**：通过求序列 $A$ 的最小公倍数 $B$，半公倍数可以表示为 $X = \frac{B}{2} \times (2p + 1)$。
3. **奇偶性判断**：确保 $\frac{B}{2}$ 除以 $\frac{a_i}{2}$ 的结果为奇数，否则无解。
4. **范围计算**：在 $1$ 到 $M$ 之间，计算满足条件的 $X$ 的个数。

### 高星题解
#### 题解 1：Tx_Lcy (5星)
**关键亮点**：
- 通过数学推导，将问题转化为最小公倍数的计算和奇偶性判断。
- 代码简洁，逻辑清晰，直接使用 `lcm` 函数计算最小公倍数，并通过奇偶性判断无解情况。

**代码核心实现**：
```cpp
int now=1;
for (rint i=1;i<=n;++i) cin>>a[i],now=lcm(now,a[i]);
for (rint i=1;i<=n;++i)
    if (((now/2)/(a[i]/2))%2==0) return cout<<"0\n",0;
cout<<(int)((m-(now/2.0))/now+1)<<'\n';
```

#### 题解 2：watcher_YBH (4星)
**关键亮点**：
- 通过将 $X$ 的定义转化为 $2X$ 是 $a_i$ 的公倍数，进一步简化问题。
- 通过最小公倍数的奇数倍计算满足条件的 $X$ 的个数。

**代码核心实现**：
```cpp
int lc1 = 1;
for(int i = 1; i<=n; i++)
    cin>>a[i],lc1 = lcm(lc1,a[i]);
for(int i = 1; i<=n; i++)
    if((lc1/a[i])%2 == 0) cout<<0,exit(0);
int lc = lc1/2,ans = 0;
for(int i = 1; i*lc<=m; i+=2) ans++;
cout<<ans;
```

#### 题解 3：STARSczy (4星)
**关键亮点**：
- 通过暴力枚举找到第一个满足条件的半公倍数，然后利用最小公倍数计算剩余满足条件的 $X$ 的个数。
- 代码逻辑清晰，优化了暴力枚举的效率。

**代码核心实现**：
```cpp
int l = b[o] / 2; l1 = b[o];
for(int i = l;i <= m;i += l1) {
    k = 0;
    for(int j = 1;j <= o;++j) {
        if(i < b[j] / 2 || (i - b[j] / 2) % b[j] != 0) {
            k = 1;
            break;
        }
    }
    if(!k) {
        ans++;
        if(c < m) ans += (m - i) / c;
        break;
    }
}
```

### 最优关键思路
1. **最小公倍数的应用**：通过计算序列 $A$ 的最小公倍数 $B$，将问题转化为 $X = \frac{B}{2} \times (2p + 1)$。
2. **奇偶性判断**：确保 $\frac{B}{2}$ 除以 $\frac{a_i}{2}$ 的结果为奇数，否则无解。
3. **范围计算**：在 $1$ 到 $M$ 之间，计算满足条件的 $X$ 的个数。

### 可拓展之处
该题的思路可以拓展到其他涉及公倍数和奇偶性判断的问题，例如：
- 求满足特定条件的数的个数。
- 处理涉及最小公倍数和最大公约数的问题。

### 推荐题目
1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
2. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029)
3. [P1072 Hankson 的趣味题](https://www.luogu.com.cn/problem/P1072)

### 个人心得摘录
- **Tx_Lcy**：通过数学推导，将问题转化为最小公倍数的计算和奇偶性判断，代码简洁高效。
- **watcher_YBH**：通过将 $X$ 的定义转化为 $2X$ 是 $a_i$ 的公倍数，进一步简化问题，逻辑清晰。
- **STARSczy**：通过暴力枚举找到第一个满足条件的半公倍数，优化了暴力枚举的效率，代码逻辑清晰。

---
处理用时：44.47秒
# 题目信息

# [ABC192D] Base n

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc192/tasks/abc192_d

`0` ～ `9` からなる文字列 $ X $ と、整数 $ M $ が与えられます。

$ X $ に含まれる最も大きい数字を $ d $ とします。

$ d+1 $ 以上の整数 $ n $ を選んで $ X $ を $ n $ 進法表記の数とみなして得られる値のうち、$ M $ 以下であるようなものは何種類あるでしょうか？

## 说明/提示

### 制約

- $ X $ は `0` ～ `9` のみからなる
- $ X $ の長さは $ 1 $ 以上 $ 60 $ 以下
- $ X $ の先頭の文字は `0` ではない
- $ 1\ \leq\ M\ \leq\ 10^{18} $

### Sample Explanation 1

$ X $ に含まれる最も大きい数字は `2` です。 - $ X $ を $ 3 $ 進法表記とみなして得られる値は $ 8 $ です。 - $ X $ を $ 4 $ 進法表記とみなして得られる値は $ 10 $ です。 得られる値のうち $ 10 $ 以下のものはこの $ 2 $ つのみです。

### Sample Explanation 2

$ X $ に含まれる最も大きい数字は `9` です。 - $ X $ を $ 10 $ 進法表記とみなして得られる値は $ 999 $ です。 - $ X $ を $ 11 $ 進法表記とみなして得られる値は $ 1197 $ です。 - $ X $ を $ 12 $ 進法表記とみなして得られる値は $ 1413 $ です。 得られる値のうち $ 1500 $ 以下のものはこの $ 3 $ つのみです。

### Sample Explanation 3

$ X $ を $ 2 $ 進法表記とみなして得られる $ 576460752303423488 $ が、唯一の $ 1000000000000000000 $ 以下の得られる数です。

## 样例 #1

### 输入

```
22

10```

### 输出

```
2```

## 样例 #2

### 输入

```
999

1500```

### 输出

```
3```

## 样例 #3

### 输入

```
100000000000000000000000000000000000000000000000000000000000

1000000000000000000```

### 输出

```
1```

# AI分析结果

### 题目内容重写
[ABC192D] Base n

#### 题目描述
给定一个由 `0` 到 `9` 组成的字符串 $ X $ 和一个整数 $ M $。

设 $ X $ 中包含的最大数字为 $ d $。

选择 $ d+1 $ 以上的整数 $ n $，将 $ X $ 视为 $ n $ 进制数，得到的所有值中，有多少个值不超过 $ M $？

#### 说明/提示
##### 约束
- $ X $ 仅由 `0` 到 `9` 组成。
- $ X $ 的长度为 $ 1 $ 到 $ 60 $。
- $ X $ 的第一个字符不是 `0`。
- $ 1 \leq M \leq 10^{18} $。

##### 样例解释
###### 样例 1
$ X $ 中包含的最大数字是 `2`。
- 将 $ X $ 视为 $ 3 $ 进制数，得到的值为 $ 8 $。
- 将 $ X $ 视为 $ 4 $ 进制数，得到的值为 $ 10 $。
不超过 $ 10 $ 的值有 $ 8 $ 和 $ 10 $，共 $ 2 $ 个。

###### 样例 2
$ X $ 中包含的最大数字是 `9`。
- 将 $ X $ 视为 $ 10 $ 进制数，得到的值为 $ 999 $。
- 将 $ X $ 视为 $ 11 $ 进制数，得到的值为 $ 1197 $。
- 将 $ X $ 视为 $ 12 $ 进制数，得到的值为 $ 1413 $。
不超过 $ 1500 $ 的值有 $ 999 $、$ 1197 $ 和 $ 1413 $，共 $ 3 $ 个。

###### 样例 3
将 $ X $ 视为 $ 2 $ 进制数，得到的值为 $ 576460752303423488 $，这是唯一不超过 $ 1000000000000000000 $ 的值。

#### 样例输入输出
##### 样例 1
输入：
```
22
10
```
输出：
```
2
```

##### 样例 2
输入：
```
999
1500
```
输出：
```
3
```

##### 样例 3
输入：
```
100000000000000000000000000000000000000000000000000000000000
1000000000000000000
```
输出：
```
1
```

### 算法分类
二分

### 题解分析与结论
本题的核心思路是利用二分的单调性，通过枚举进制 $ n $，将 $ X $ 转换为 $ n $ 进制数后与 $ M $ 进行比较。由于进制越大，转换后的值也越大，因此可以使用二分法来快速找到满足条件的最大进制 $ n $。

#### 题解评分与亮点
1. **EternalHeart1314**（4星）
   - 关键亮点：使用了二分法，并通过 `unsigned long long` 处理大数问题，代码简洁明了。
   - 个人心得：提到题目翻译有误，特判了 $ X $ 长度为 $ 1 $ 的情况。

2. **_maple_leaf_**（4星）
   - 关键亮点：详细证明了单调性，并使用了 `__int128` 处理大数问题，代码结构清晰。
   - 个人心得：提到赛时误用了短除法，最终通过二分法解决了问题。

3. **fengenrong**（4星）
   - 关键亮点：使用了二分法，并通过 `__int128` 处理大数问题，代码结构清晰。
   - 个人心得：提到题目翻译有误，特判了 $ X $ 长度为 $ 1 $ 的情况。

### 最优关键思路与技巧
1. **二分法**：利用进制转换后的值的单调性，通过二分法快速找到满足条件的最大进制 $ n $。
2. **大数处理**：使用 `__int128` 或 `unsigned long long` 处理大数问题，避免溢出。
3. **特判**：对 $ X $ 长度为 $ 1 $ 的情况进行特判，避免不必要的计算。

### 可拓展之处
本题的二分法思路可以推广到其他具有单调性的问题，例如在某个范围内寻找满足特定条件的最大值或最小值。类似的问题可以包括在某个范围内寻找满足条件的最大或最小值，或者在某个范围内寻找满足条件的元素个数。

### 推荐题目
1. [P1024 一元三次方程求解](https://www.luogu.com.cn/problem/P1024)
2. [P1044 二分查找](https://www.luogu.com.cn/problem/P1044)
3. [P1083 借教室](https://www.luogu.com.cn/problem/P1083)

### 个人心得摘录
- **EternalHeart1314**：提到题目翻译有误，特判了 $ X $ 长度为 $ 1 $ 的情况。
- **_maple_leaf_**：提到赛时误用了短除法，最终通过二分法解决了问题。
- **fengenrong**：提到题目翻译有误，特判了 $ X $ 长度为 $ 1 $ 的情况。

### 核心代码片段
```cpp
bool check(int mid) {
    __int128 sum = 0;
    for(int i = 0; i < s.size(); i++) {
        sum = sum * mid + (s[i] - '0');
        if(sum > m) return false;
    }
    return true;
}
```
该代码片段展示了如何通过二分法判断当前进制 $ mid $ 是否满足条件，使用 `__int128` 处理大数问题。

---
处理用时：38.38秒
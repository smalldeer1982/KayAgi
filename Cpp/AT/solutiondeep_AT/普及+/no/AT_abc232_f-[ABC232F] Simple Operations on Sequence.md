# 题目信息

# [ABC232F] Simple Operations on Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc232/tasks/abc232_f

長さ $ N $ の $ 2 $ つの整数列 $ A\ =\ (A_1,\ A_2,\ \ldots,\ A_N) $ および $ B\ =\ (B_1,\ B_2\ \ldots,\ B_N) $ が与えられます。

整数列 $ A $ に対して、「下記の $ 2 $ つの操作のうちどちらかを行う」ということを好きな回数（ $ 0 $ 回でもよい）繰り返すことができます。

- $ 1\ \leq\ i\ \leq\ N $ を満たす整数 $ i $ を選び、$ A_i $ の値を $ 1 $ 増やすか $ 1 $ 減らす。この操作には $ X $ 円の費用がかかる。
- $ 1\ \leq\ i\ \leq\ N-1 $ を満たす整数 $ i $ を選び、$ A_i $ の値と $ A_{i+1} $ の値を入れ替える。この操作には $ Y $ 円の費用がかかる。

上記の繰り返しによって整数列 $ A $ を整数列 $ B $ に一致させるためにかかる合計費用としてあり得る最小値を出力してください。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 18 $
- $ 1\ \leq\ X\ \leq\ 10^8 $
- $ 1\ \leq\ Y\ \leq\ 10^{16} $
- $ 1\ \leq\ A_i,\ B_i\ \leq\ 10^8 $
- 入力はすべて整数

### Sample Explanation 1

はじめ、$ A\ =\ (4,\ 2,\ 5,\ 2) $ です。 下記の通りに操作を行うと、$ A $ を $ B $ に一致させることができます。 - $ X\ =\ 3 $ 円払い、$ A_3 $ の値を $ 1 $ 増やす。その結果 $ A\ =\ (4,\ 2,\ 6,\ 2) $ となる。 - $ Y\ =\ 5 $ 円払い、$ A_2 $ の値と $ A_3 $ の値を入れ替える。その結果 $ A\ =\ (4,\ 6,\ 2,\ 2) $ となる。 - $ Y\ =\ 5 $ 円払い、$ A_1 $ の値と $ A_2 $ の値を入れ替える。その結果 $ A\ =\ (6,\ 4,\ 2,\ 2) $ となる。 - $ X\ =\ 3 $ 円払い、$ A_4 $ の値を $ 1 $ 減らす。その結果 $ A\ =\ (6,\ 4,\ 2,\ 1)\ =\ B $ となる。 上記の操作にかかる費用の合計は $ 3+5+5+3\ =\ 16 $ 円であり、これが最小となります。

### Sample Explanation 2

$ A $ と $ B $ は初めから一致しているため、一度も操作を行う必要がありません。

### Sample Explanation 3

入力や出力が $ 32 $ bit 整数型に収まらないことがあることに注意してください。

## 样例 #1

### 输入

```
4 3 5

4 2 5 2

6 4 2 1```

### 输出

```
16```

## 样例 #2

### 输入

```
5 12345 6789

1 2 3 4 5

1 2 3 4 5```

### 输出

```
0```

## 样例 #3

### 输入

```
18 20719114 5117250357733867

10511029 36397527 63027379 44706927 47672230 79861204 57882493 42931589 51053644 52300688 43971370 26515475 62139996 41282303 34022578 12523039 6696497 64922712

14720753 4621362 25269832 91410838 86751784 32741849 6602693 60719353 28911226 88280613 18745325 80675202 34289776 37849132 99280042 73760634 43897718 40659077```

### 输出

```
13104119429316474```

# AI分析结果

【题目内容重写】
# [ABC232F] Simple Operations on Sequence

## 题目描述

给定长度为 $N$ 的两个整数序列 $A = (A_1, A_2, \ldots, A_N)$ 和 $B = (B_1, B_2, \ldots, B_N)$。

可以对序列 $A$ 进行以下两种操作中的任意一种，操作次数不限（包括零次）：

1. 选择一个整数 $i$（$1 \leq i \leq N$），将 $A_i$ 的值增加或减少 $1$。此操作的费用为 $X$ 元。
2. 选择一个整数 $i$（$1 \leq i \leq N-1$），交换 $A_i$ 和 $A_{i+1}$ 的值。此操作的费用为 $Y$ 元。

通过上述操作，将序列 $A$ 变为序列 $B$，求所需的最小总费用。

## 说明/提示

### 约束条件

- $2 \leq N \leq 18$
- $1 \leq X \leq 10^8$
- $1 \leq Y \leq 10^{16}$
- $1 \leq A_i, B_i \leq 10^8$
- 输入均为整数

### 样例解释

样例1中，通过一系列操作将 $A$ 变为 $B$，最小总费用为 $16$ 元。

样例2中，$A$ 和 $B$ 已经相同，无需操作，费用为 $0$ 元。

样例3中，输入和输出可能超出 $32$ 位整数范围。

【算法分类】
动态规划

【题解分析与结论】
本题的核心是通过动态规划（DP）来最小化将序列 $A$ 变为序列 $B$ 的费用。难点在于如何处理两种操作（加减和交换）的组合，以及如何高效地计算逆序对的数量。

【所选题解】
1. **作者：方123456 (4星)**
   - **关键亮点**：使用状压DP，通过状态转移方程计算最小费用。代码清晰，逻辑严谨。
   - **核心代码**：
     ```cpp
     f[0]=0;
     for (int i=0;i<(1<<n);i++) {
         int sum=0,xx=i;
         while (xx) {xx-=xx&-xx;sum++;}
         for (int j=0;j<n;j++) {
             if (i&(1<<j)) continue;
             int K=0;
             for (int k=0;k<n;k++) {
                 if (i&(1<<k)) {
                     if (j<k) K++;
                 }
             }
             f[i|(1<<j)]=min(f[i|(1<<j)],f[i]+K*y+abs(a[j]-b[sum])*x);
         }
     }
     ```
   - **个人心得**：作者提到“学过状压DP的应该都能理解”，强调了状压DP的常见性和易理解性。

2. **作者：wangshulin (4星)**
   - **关键亮点**：通过状态转移方程推导，详细解释了如何通过交换和加减操作来匹配序列 $A$ 和 $B$。
   - **核心代码**：
     ```cpp
     f[0]=0;
     for (ll i=0;i<(1<<n);i++){
         ll s=0;
         for (ll j=1;j<=n;j++){
             if(i&(1<<(j-1))) s++;
         }
         s++;
         for (ll j=1;j<=n;j++){
             if(i&(1<<(j-1))) continue;
             ll c=0;
             for (ll k=1;k<j;k++){
                 if(!(i&(1<<(k-1)))) c++;
             }
             f[i|(1<<(j-1))]=std::min(f[i|(1<<(j-1))],f[i]+y*c+x*abs(a[j]-b[s]));
         }
     }
     ```
   - **个人心得**：作者提到“因为这个状态和题目的操作2没什么关联，是无效的！”，强调了状态选择的重要性。

【最优关键思路】
使用状压DP，通过状态转移方程计算最小费用。关键在于如何高效地计算逆序对的数量，并通过状态转移方程将交换和加减操作的费用最小化。

【拓展思路】
类似的问题可以出现在其他需要通过操作序列来匹配目标序列的场景中，如字符串匹配、排列组合等。

【推荐题目】
1. [P1433 吃奶酪](https://www.luogu.com.cn/problem/P1433)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

---
处理用时：29.31秒
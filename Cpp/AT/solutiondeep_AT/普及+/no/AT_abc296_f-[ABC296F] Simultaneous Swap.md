# 题目信息

# [ABC296F] Simultaneous Swap

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc296/tasks/abc296_f

長さ $ N $ の数列 $ A=(A_1,A_2,\ldots,A_N) $, $ B=(B_1,B_2,\ldots,B_N) $ が与えられます。

高橋君は次の操作を好きなだけ ($ 0 $ 回でも良い) 繰り返す事ができます。

> $ 1 $ 以上 $ N $ 以下の、どの $ 2 $ つも互いに相異なる $ 3 $ つの整数 $ i,j,k $ を選ぶ。  
>  $ A $ の $ i $ 番目の要素と $ j $ 番目の要素を交換し、$ B $ の $ i $ 番目の要素と $ k $ 番目の要素を交換する。

高橋君がうまく操作を繰り返すことによって、 $ A $ と $ B $ を一致させる事が可能ならば `Yes` を、不可能ならば `No` を出力してください。  
 ただし、$ A $ と $ B $ が一致しているとは、任意の $ 1\leq\ i\leq\ N $ について $ A $ の $ i $ 番目の要素と $ B $ の $ i $ 番目の要素が等しいことを言います。

## 说明/提示

### 制約

- $ 3\ \leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\leq\ A_i,B_i\leq\ N $
- 入力はすべて整数
 
### Sample Explanation 1

$ (i,j,k)=(1,2,3) $ として $ 1 $ 回操作を行うことで、$ A_1 $ と $ A_2 $、$ B_1 $ と $ B_3 $ がそれぞれ交換され、 $ A,B $ はともに $ (2,1,1) $ となって一致します。よって、`Yes` を出力します。

### Sample Explanation 2

どのように操作を行っても $ A $ と $ B $ を一致させることはできません。よって、`No` を出力します。

## 样例 #1

### 输入

```
3

1 2 1

1 1 2```

### 输出

```
Yes```

## 样例 #2

### 输入

```
3

1 2 2

1 1 2```

### 输出

```
No```

## 样例 #3

### 输入

```
5

1 2 3 2 1

3 2 2 1 1```

### 输出

```
Yes```

## 样例 #4

### 输入

```
8

1 2 3 4 5 6 7 8

7 8 5 6 4 3 1 2```

### 输出

```
No```

# AI分析结果

### 题目内容重写
**题目描述**

给定两个长度为 $N$ 的数列 $A=(A_1,A_2,\ldots,A_N)$ 和 $B=(B_1,B_2,\ldots,B_N)$。

高桥君可以进行以下操作任意次（包括零次）：

> 选择三个互不相同的整数 $i,j,k$（$1 \leq i,j,k \leq N$）。  
> 交换 $A$ 的第 $i$ 个元素和第 $j$ 个元素，同时交换 $B$ 的第 $i$ 个元素和第 $k$ 个元素。

问：是否可以通过有限次数的操作，使得 $A$ 和 $B$ 完全一致。如果可能，输出 `Yes`，否则输出 `No`。

**说明/提示**

- $3 \leq N \leq 2 \times 10^5$
- $1 \leq A_i, B_i \leq N$
- 输入均为整数

**样例解释**

样例1：通过一次操作 $(i,j,k)=(1,2,3)$，交换 $A_1$ 和 $A_2$，以及 $B_1$ 和 $B_3$，使得 $A$ 和 $B$ 都变为 $(2,1,1)$，输出 `Yes`。

样例2：无论如何操作，$A$ 和 $B$ 都无法一致，输出 `No`。

### 算法分类
排序、逆序对

### 题解分析与结论
题目要求通过特定的交换操作使得两个数列 $A$ 和 $B$ 完全一致。核心思路是通过排序和逆序对的性质来判断是否可以通过有限次操作达到目标。

**题解对比：**
1. **氧少Kevin的题解**：通过分析无重复元素和有重复元素的情况，利用逆序对的奇偶性来判断是否可以通过操作使 $A$ 和 $B$ 一致。思路清晰，逻辑严谨，代码实现简洁。
2. **Register_int的题解**：首先判断数列元素是否相同，然后通过排序和逆序对的计算来判断是否可以通过操作使 $A$ 和 $B$ 一致。代码实现较为复杂，但思路正确。
3. **__Aaaaaaaa的题解**：通过判断数列元素是否相同，然后利用逆序对的奇偶性来判断是否可以通过操作使 $A$ 和 $B$ 一致。代码实现较为简洁，但思路与氧少Kevin的题解类似。

**最优题解：**
- **氧少Kevin的题解**（5星）：思路清晰，逻辑严谨，代码实现简洁，且对无重复元素和有重复元素的情况进行了详细分析。

**关键思路与技巧：**
1. **排序与逆序对**：通过排序判断数列是否可以通过操作达到一致，利用逆序对的奇偶性来判断操作的可能性。
2. **重复元素处理**：如果数列中有重复元素，则一定可以通过操作使 $A$ 和 $B$ 一致。

**核心代码片段：**
```cpp
int main() {
    scanf("%d", &n);
    for (int i = 1; i <= n; i++) scanf("%d", &a[i]), cnt1[a[i]]++, ans |= cnt1[a[i]] > 1;
    for (int i = 1; i <= n; i++) scanf("%d", &b[i]), cnt2[b[i]]++, ans |= cnt2[b[i]] > 1;
    for (int i = 1; i <= n; i++) if (cnt1[i] != cnt2[i]) return puts("No"), 0;
    if (ans) return puts("Yes"), 0;
    for (int i = n; i; i--) ans ^= ask(a[i] - 1) & 1, add(a[i]);
    for (int i = 1; i <= n; i++) c[i] = 0;
    for (int i = n; i; i--) ans ^= ask(b[i] - 1) & 1, add(b[i]);
    puts(ans ? "No" : "Yes");
}
```

**拓展思路：**
- 类似题目可以考察通过特定操作使两个数列一致的问题，通常需要利用排序、逆序对、重复元素等性质进行判断。

**推荐题目：**
1. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908)
2. [P1177 【模板】快速排序](https://www.luogu.com.cn/problem/P1177)
3. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)

---
处理用时：28.12秒
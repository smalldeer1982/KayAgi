# 题目信息

# [AGC029B] Powers of two

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc029/tasks/agc029_b

高橋君は正整数が書かれたボールを $ N $ 個持っています。$ i $ 番目のボールに書かれている正整数は $ A_i $ です。 高橋君は $ N $ 個のボールからいくつかのペアを作って、それぞれのペアのボールに書かれた数の和が $ 2 $ べきとなるようにしたいです。 ただし、同じボールが複数のペアに属することはできません。 最大でいくつのペアが作れるか求めてください。

ただし、正整数が $ 2 $ べきであるとは、ある非負整数 $ t $ を用いて $ 2^t $ と書けることを指します。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ 10^9 $
- $ A_i $ は整数

### Sample Explanation 1

$ 1 $ 番目のボールと $ 3 $ 番目のボールをペアにすることで、書かれた数の和が $ 4 $ となるペアを $ 1 $ つ作ることができます。 $ 2 $ 番目のボール同士をペアにできないことに注意してください。

## 样例 #1

### 输入

```
3

1 2 3```

### 输出

```
1```

## 样例 #2

### 输入

```
5

3 11 14 5 13```

### 输出

```
2```

# AI分析结果

### 题目内容重写

高橋君有 $N$ 个写有正整数的球。第 $i$ 个球上写的正整数是 $A_i$。高橋君希望从这 $N$ 个球中选出一些配对，使得每对球上的数之和为 $2$ 的幂次方。并且，同一个球不能属于多个配对。求最多可以形成多少对配对。

其中，正整数是 $2$ 的幂次方指的是存在一个非负整数 $t$，使得该数可以表示为 $2^t$。

### 算法分类
贪心

### 题解分析与结论

题解的核心思路是通过贪心算法，尽可能多地配对满足条件的球。不同题解在实现细节上有所不同，但都围绕如何高效地找到满足条件的配对展开。

### 所选高星题解

#### 题解1：noone___ (4星)
**关键亮点**：
- 通过排序和尺取法，高效地找到满足条件的配对。
- 代码简洁，逻辑清晰，易于理解。

**核心代码**：
```cpp
for(rei k=1<<30;k;k>>=1){
    rei l=1,r=n;
    while(l<r){
        if(a[l]==-1 || (~a[r] && a[l]+a[r]<k)) ++l;
        else if(a[r]==-1 || a[l]+a[r]>k) --r;
        else ++ans,a[l]=a[r]=-1;
    }
}
```
**核心思想**：
- 枚举所有可能的 $2^k$，使用双指针法在排序后的数组中寻找满足条件的配对。

#### 题解2：Jerrlee✅ (4星)
**关键亮点**：
- 通过排序和观察最大值的配对关系，简化问题。
- 使用 `map` 和 `vector` 等 STL 容器，提高代码的可读性和效率。

**核心思想**：
- 排序后，从最大值开始，寻找能与它配对的数，确保每次配对都是最优的。

#### 题解3：ModestCoder_ (4星)
**关键亮点**：
- 通过位运算和二分查找，高效地找到满足条件的配对。
- 代码结构清晰，逻辑严谨，适合进阶学习。

**核心代码**：
```cpp
int find(LL basis, int pos){
    int l = pos, r = m, ans = 0;
    while (l <= r){
        int mid = (l + r) >> 1;
        if (b[mid].val >= basis) r = mid - 1; else l = mid + 1;
        if (b[mid].val == basis) return ans = mid;
    }
    return ans;
}
```
**核心思想**：
- 通过位运算生成可能的配对数，使用二分查找在排序后的数组中快速定位。

### 最优关键思路或技巧
- **贪心策略**：尽可能优先配对较大的数，确保每次配对都是最优的。
- **双指针法**：在排序后的数组中使用双指针法，高效地找到满足条件的配对。
- **位运算与二分查找**：通过位运算生成可能的配对数，结合二分查找快速定位，提高效率。

### 可拓展之处
- 类似的问题可以扩展到其他幂次方的配对，如 $3$ 的幂次方等。
- 可以结合其他数据结构，如哈希表，进一步优化查找效率。

### 推荐题目
1. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1012 拼数](https://www.luogu.com.cn/problem/P1012)

---
处理用时：23.21秒
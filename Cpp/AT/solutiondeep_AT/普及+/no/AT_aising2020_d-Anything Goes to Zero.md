# 题目信息

# Anything Goes to Zero

## 题目描述

# 任何东西都会归零
[problemUrl]: https://atcoder.jp/contests/aising2020/tasks/aising2020_d
定义 $ \mathrm{popcount}(n) $ 为 $ n $ 在二进制表示中 '1' 的个数。例如，$ \mathrm{popcount}(3)\ =\ 2,\ \mathrm{popcount}(7)\ =\ 3,\ \mathrm{popcount}(0)\ =\ 0 $。
定义 $ f(n) $ 为将 $ n $ 用 $ \mathrm{popcount}(n) $ 除后取余数替换 $ n $ 的操作次数，直到 $ n $ 变为 $ 0 $ 为止（在这个问题的约束下，可以证明 $ n $ 经过有限次操作后一定会变为 $ 0 $）。
以下是以 $ n=7 $ 为例，经过 2 次操作 $ n $ 变为 0 的过程。
- 因为 $ \mathrm{popcount}(7)=3 $，所以用 3 除 7 后的余数 1 替换 7。
- 因为 $ \mathrm{popcount}(1)=1 $，所以用 1 除 1 后的余数 0 替换 1。
给定一个二进制表示的 $ N $ 位整数 $ X $。对于满足 $ 1\ \leq\ i\ \leq\ N $ 的整数 $ i $，定义将 $ X $ 的第 $ i $ 位取反后的整数为 $ X_i $。求 $ f(X_1),\ f(X_2),\ \ldots,\ f(X_N) $。

## 说明/提示

### 制約
- $ 1\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ X $ 是二进制表示的 $ N $ 位的整数（首位不一定是 '1'）
### 样例解释 #1
- $ X_1 $ 是 7。因为 7 变为 1 再变为 0，所以 $ f(7) = 2 $。
- $ X_2 $ 是 1。因为 1 变为 0，所以 $ f(1) = 1 $。
- $ X_3 $ 是 2。因为 2 变为 0，所以 $ f(2) = 1 $。

## 样例 #1

### 输入

```
3

011```

### 输出

```
2

1

1```

## 样例 #2

### 输入

```
23

00110111001011011001110```

### 输出

```
2

1

2

2

1

2

2

2

2

2

2

2

2

2

2

2

2

2

2

2

2

1

3```

# AI分析结果

### 题目内容重写

#### 任何东西都会归零

**题目描述**

定义 $ \mathrm{popcount}(n) $ 为 $ n $ 在二进制表示中 '1' 的个数。例如，$ \mathrm{popcount}(3)\ =\ 2,\ \mathrm{popcount}(7)\ =\ 3,\ \mathrm{popcount}(0)\ =\ 0 $。

定义 $ f(n) $ 为将 $ n $ 用 $ \mathrm{popcount}(n) $ 除后取余数替换 $ n $ 的操作次数，直到 $ n $ 变为 $ 0 $ 为止（在这个问题的约束下，可以证明 $ n $ 经过有限次操作后一定会变为 $ 0 $）。

以下是以 $ n=7 $ 为例，经过 2 次操作 $ n $ 变为 0 的过程。
- 因为 $ \mathrm{popcount}(7)=3 $，所以用 3 除 7 后的余数 1 替换 7。
- 因为 $ \mathrm{popcount}(1)=1 $，所以用 1 除 1 后的余数 0 替换 1。

给定一个二进制表示的 $ N $ 位整数 $ X $。对于满足 $ 1\ \leq\ i\ \leq\ N $ 的整数 $ i $，定义将 $ X $ 的第 $ i $ 位取反后的整数为 $ X_i $。求 $ f(X_1),\ f(X_2),\ \ldots,\ f(X_N) $。

**说明/提示**

**制約**
- $ 1\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ X $ 是二进制表示的 $ N $ 位的整数（首位不一定是 '1'）

**样例解释 #1**
- $ X_1 $ 是 7。因为 7 变为 1 再变为 0，所以 $ f(7) = 2 $。
- $ X_2 $ 是 1。因为 1 变为 0，所以 $ f(1) = 1 $。
- $ X_3 $ 是 2。因为 2 变为 0，所以 $ f(2) = 1 $。

**样例 #1**

**输入**

```
3

011```

**输出**

```
2

1

1```

**样例 #2**

**输入**

```
23

00110111001011011001110```

**输出**

```
2

1

2

2

1

2

2

2

2

2

2

2

2

2

2

2

2

2

2

2

2

1

3```

### 算法分类

**位运算**

### 综合分析与结论

本题的核心在于高效计算每个 $ X_i $ 的 $ f(X_i) $ 值。由于 $ N $ 可以达到 $ 2 \times 10^5 $，直接对每个 $ X_i $ 进行模拟操作会导致时间复杂度过高。因此，需要利用位运算和预处理来优化计算。

### 通用建议与扩展思路

1. **预处理**：首先计算原始 $ X $ 的 $ \mathrm{popcount}(X) $，然后根据每个 $ X_i $ 的取反情况，快速计算 $ \mathrm{popcount}(X_i) $。
2. **记忆化**：对于每个 $ X_i $，可以使用记忆化技术来避免重复计算 $ f(X_i) $。
3. **位运算优化**：利用位运算快速计算 $ X_i $ 的 $ \mathrm{popcount}(X_i) $ 和 $ f(X_i) $。

### 推荐题目

1. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)
2. [P1226 【模板】快速幂](https://www.luogu.com.cn/problem/P1226)
3. [P1048 采药](https://www.luogu.com.cn/problem/P1048)

这些题目涉及到位运算、预处理和记忆化技术，可以帮助巩固相关知识点。

---
处理用时：28.34秒
# 题目信息

# [ARC012C] 五目並べチェッカー

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc012/tasks/arc012_3

高橋君は、五目並べが大好きです。  
 五目並べとは、 $ 19 $ × $ 19 $ の碁盤の上に交互に碁石を $ 1 $ つずつ並べ、 $ 5 $ つ以上の碁石が縦・横・ななめに並べたプレーヤーが勝ちとなってゲームが終了する、というルールのゲームです。  
 ゲームは必ず黒のプレーヤーから始めるものとします。  
 高橋君は、友達の青木君と五目並べをしていたのですが、うっかり居眠りをしてしまいました。  
 高橋君は寝ている間に青木君が不正をしたのではないかと疑っているので、盤面から五目並べの状態として異常なところがないかを探したいです。  
 五目並べの状態として、正常であるかどうか判定するプログラムを作ってください。  
 ここでの異常な状態とは、

- どちらかのプレーヤーの勝利条件を満たしているのに、もう片方のプレーヤーがさらに碁石を置いている。
- お互いが置いた個数がありえない状態になっている。
 
 のどちらかであることを指します。 入力は以下の形式で標準入力から与えられる。 > $ b_{1,1}\ b_{2,1}\ ‥‥\ b_{19,1} $ $ b_{1,2}\ b_{2,2}\ ‥‥\ b_{19,2} $ $ : $ $ : $ $ b_{1,19}\ b_{2,19}\ ‥‥\ b_{19,19} $

- 入力は $ 19 $ 行与えられる。
- $ i(1≦i≦19) $ 行目の $ j(1≦j≦19) $ 文字目には、盤面の縦 $ i $ 番目、横 $ j $ 番目のマスの情報を表す文字 $ b_{i,j} $ が与えられる。
- $ b_{i,j} $ は、`o`、`x`、`.` の $ 3 $ 種類のいずれかの文字である。 
  - `o` は、黒石が置かれていることを表す。
  - `x` は、白石が置かれていることを表す。
  - `.` は、何も置かれていないことを表す。


 盤面が正常な状態であれば、`YES`、そうでなければ `NO` と出力しなさい。   
 出力は標準出力におこない、末尾には改行をいれること。  
```

...................
...................
...................
...................
....x......o.......
...................
...................
.......o....o......
...................
........x..........
..............o....
...................
.......x...........
...................
...................
...................
...................
...................
...................
```

 ```

YES
```

- 黒が $ 4 $ 手、白が $ 3 $ 手打った状態です。
- （記述に誤りがありましたので、修正しました。）
 
```

...................
...................
...................
...................
....x......o.......
...................
...................
.......o....o......
...................
........x..........
..............o....
...................
.......x...........
...................
...................
.........o.........
...................
...................
...................
```

 ```

NO
```

- 黒が $ 5 $ 手、白が $ 3 $ 手打った状態です。
- 黒が $ 1 $ 手多く打ってしまっているので、異常な状態です。
 
```

...................
...................
...................
...................
...................
...................
...................
...................
........ooooo......
.........xxxx......
........x..........
...................
...................
...................
...................
...................
...................
...................
...................
```

 ```

NO
```

- 黒が $ 5 $ 手、白が $ 5 $ 手打った状態です。
- 片方が勝利条件を満たしていればゲームは終了しているので、黒が勝利条件を満たしているのは異常な状態です。
- （記述に間違いがありましたので、訂正しました。）
 
```

...................
...................
...................
...................
...................
...................
...................
...................
........ooooo......
.........xxxx......
...................
...................
...................
...................
...................
...................
...................
...................
...................
```

 ```

YES
```

- 黒が $ 5 $ 手、白が $ 4 $ 手打った状態です。
- 黒が $ 5 $ つ並べて勝利した状態となり、正常です。
 
```

...................
...................
...................
...................
...................
...................
...................
...................
.........x.........
......oooooo.......
........xxxx.......
...................
...................
...................
...................
...................
...................
...................
...................
```

 ```

YES
```

- 黒石が $ 6 $ つ並んでいますが、正常です。
- 例えば黒石が $ 2 $ つ並んでおり、$ 1 $ マス空いてさらに $ 3 $ つ並んでいる状態で、空いている真ん中のマスに黒石を置いた場合このような形になります。
 
```

...................
...................
...................
...................
...................
...................
........x..........
........x....x.....
...........x.......
...oooooooooo......
...................
......x......x.....
....x......x.......
.........x.........
...................
...................
...................
...................
...................
```

 ```

NO
```

- 黒が $ 10 $ 手、白が $ 9 $ 手打った状態です。
- 黒石を $ 10 $ 個並べる前に、黒が勝利してゲームが終了していないとおかしいので、異常な状態です。
 
```

...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
...................
```

 ```

YES
```

- 黒が高橋君で、一手も打たないうちに居眠りしてしまった場合も、正常な状態です。

# AI分析结果

### 题目翻译

高桥君非常喜欢五目并。五目并是一种在19×19的棋盘上，双方交替放置棋子，先形成五子连珠（横、竖、斜）的一方获胜的游戏。游戏总是由黑方先手。

高桥君和朋友青木君在玩五目并时，不小心睡着了。醒来后，高桥君怀疑青木君在他睡觉时作弊，因此他想通过检查棋盘状态来判断是否存在异常。

异常状态的定义如下：

1. 某一方已经满足胜利条件，但另一方仍然继续放置棋子。
2. 双方放置的棋子数量不符合规则。

输入格式为19行，每行19个字符，表示棋盘的状态。字符`o`表示黑子，`x`表示白子，`.`表示空位。

如果棋盘状态正常，输出`YES`，否则输出`NO`。

### 算法分类
模拟

### 题解分析与结论

#### 题解1：LucasXu80 (赞：3)
**星级：4星**
**关键亮点：**
1. **棋子数量判断**：通过黑子和白子的数量关系判断上一手是黑子还是白子。
2. **作弊检测**：通过反向模拟，逐一移除棋子，检查是否在移除后仍有人获胜，从而判断是否作弊。
3. **连续棋子检测**：使用DFS在8个方向上检测连续棋子的最大长度。

**个人心得：**
- 强调了输出需要换行，否则会爆零。
- 通过详细的注释和代码结构，清晰地展示了每一步的逻辑。

**核心代码：**
```cpp
void lf(int i, int j, char c, int len, int k) {
    if (board[i][j]=='.') return;
    if (c == 'o' && len>o_len) o_len = len;
    if (c == 'x' && len>x_len) x_len = len;
    if (board[i+x[k]][j+y[k]] == c)  
        lf(i+x[k],j+y[k],c,len+1,k);
}

void search_max_length() {
    for (int i = 1; i <= 19; i++) {
        for (int j = 1; j <= 19; j++) {
            if (board[i][j] == 'o') 
                for (int k = 0; k<=7; k++) lf(i,j,'o',1,k);
            if (board[i][j] == 'x') 
                for (int k = 0; k<=7; k++) lf(i,j,'x',1,k);
        }
    }
}
```

### 最优关键思路与技巧
1. **棋子数量判断**：通过黑子和白子的数量关系，确定上一手是黑子还是白子，这是判断异常状态的基础。
2. **反向模拟**：逐一移除棋子，检查移除后是否仍有人获胜，从而判断是否作弊。这种方法有效地模拟了可能的作弊行为。
3. **连续棋子检测**：使用DFS在8个方向上检测连续棋子的最大长度，确保胜利条件的正确判断。

### 可拓展之处
- **类似题目**：可以扩展到其他棋盘游戏的状态检测，如围棋、象棋等。
- **优化方向**：可以考虑使用更高效的算法来检测连续棋子，如滑动窗口或动态规划。

### 推荐题目
1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1042 乒乓球](https://www.luogu.com.cn/problem/P1042)
3. [P1055 ISBN号码](https://www.luogu.com.cn/problem/P1055)

---
处理用时：26.19秒
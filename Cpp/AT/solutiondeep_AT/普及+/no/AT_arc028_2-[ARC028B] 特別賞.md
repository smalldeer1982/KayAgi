# 题目信息

# [ARC028B] 特別賞

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc028/tasks/arc028_2

高橋君はプログラミングコンテストを行い、$ N $ 人の人が参加しました。賞品がないと物足りないのではないかと思った高橋君は「$ i $ 位以上の人のうち、$ K $ 番目に若い人」に特別賞を出すことにしました。参加者全員の年齢は分かっています。$ K $ の値はもう既に決めているのですが、$ i $ の値はまだ決めていません。$ i $ の値を決めるために高橋君は、$ K $ 以上 $ N $ 以下の整数 $ i $ それぞれについて誰が特別賞を取ることが出来るのかを計算してみることにしました。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ N\ ≦\ 1000 $ を満たすテストケースすべてに正解した場合は $ 40 $ 点が与えられる。

### Sample Explanation 1

以下は、出力の各行についての説明です。 - $ 1 $ 行目： $ 2 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 2 $ 位の人です。 - $ 2 $ 行目： $ 3 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 1 $ 位の人です。 - $ 3 $ 行目： $ 4 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 3 $ 位の人です。 - $ 4 $ 行目： $ 5 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 5 $ 位の人です。

## 样例 #1

### 输入

```
5 2

4 5 3 1 2```

### 输出

```
2

1

3

5```

## 样例 #2

### 输入

```
3 1

2 3 1```

### 输出

```
1

1

3```

# AI分析结果

【题目内容】
# [ARC028B] 特別賞

## 题目描述

高橋君はプログラミングコンテストを行い、$ N $ 人の人が参加しました。賞品がないと物足りないのではないかと思った高橋君は「$ i $ 位以上の人のうち、$ K $ 番目に若い人」に特別賞を出すことにしました。参加者全員の年齢は分かっています。$ K $ の値はもう既に決めているのですが、$ i $ の値はまだ決めていません。$ i $ の値を決めるために高橋君は、$ K $ 以上 $ N $ 以下の整数 $ i $ それぞれについて誰が特別賞を取ることが出来るのかを計算してみることにしました。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ N\ ≦\ 1000 $ を満たすテストケースすべてに正解した場合は $ 40 $ 点が与えられる。

### Sample Explanation 1

以下は、出力の各行についての説明です。 - $ 1 $ 行目： $ 2 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 2 $ 位の人です。 - $ 2 $ 行目： $ 3 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 1 $ 位の人です。 - $ 3 $ 行目： $ 4 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 3 $ 位の人です。 - $ 4 $ 行目： $ 5 $ 位以上の人のうち $ 2 $ 番目に若い人は $ 5 $ 位の人です。

## 样例 #1

### 输入

```
5 2

4 5 3 1 2```

### 输出

```
2

1

3

5```

## 样例 #2

### 输入

```
3 1

2 3 1```

### 输出

```
1

1

3```

【算法分类】
排序

【题解分析与结论】
该题的核心问题是对每个 $i$（$k \le i \le n$），求区间 $[1,i]$ 第 $k$ 小的数的位置。题解中使用了 pb_ds 库中的红黑树来实现这一功能，通过插入和查询操作来高效地找到第 $k$ 小的元素。这种方法的时间复杂度为 $O(n \log n)$，适合处理较大数据量。

【所选题解】
- 作者：一只大龙猫
- 星级：4
- 关键亮点：使用 pb_ds 库中的红黑树，简化了平衡树的实现，代码简洁且高效。

【核心代码】
```cpp
#include<iostream>
#include<functional>
#include<ext/pb_ds/assoc_container.hpp>
#include<ext/pb_ds/tree_policy.hpp>
using namespace std;
__gnu_pbds::tree<int,__gnu_pbds::null_type,less<int>,__gnu_pbds::rb_tree_tag,__gnu_pbds::tree_order_statistics_node_update> rbt;
int n,k,p[1000001];//p数组存位置 
int main(){
	cin>>n>>k;
	for(int i=1;i<=n;i++){
		int x;
		cin>>x;
		p[x]=i;
		rbt.insert(x);
		if(i>=k){
			cout<<p[*(rbt.find_by_order(k-1))]<<endl;//因为pb_ds中的最小数被视为第0小，所以第k小在pb_ds中其实是第k-1小 
		}
	}
	return 0;
}
```

【关键思路与技巧】
使用 pb_ds 库中的红黑树可以高效地处理插入和查询操作，特别适合需要频繁查找第 $k$ 小元素的场景。这种方法不仅代码简洁，而且性能优越。

【拓展思路】
类似的问题可以通过其他数据结构如堆、线段树等来解决，但红黑树在查找第 $k$ 小元素时具有天然的优势。

【推荐题目】
1. P3369 【模板】普通平衡树
2. P3380 【模板】二逼平衡树（树套树）
3. P3834 【模板】可持久化线段树 1（主席树）

---
处理用时：30.08秒
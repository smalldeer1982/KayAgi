# 题目信息

# [ARC028C] 高橋王国の分割統治

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc028/tasks/arc028_3

高橋王国は $ N $ 個の町からなり、それぞれの町には $ 0 $ から $ N-1 $ までの番号がついています。また、２つの町を繋ぐ道が $ N-1 $ 本あり、どの町からどの町へもいくつかの道を使うことで辿り着けるようになっています。

高橋王国の王様である高橋君は、首都にする町を決めようとしています。高橋君は首都を決める参考にするために「バランス値」を計算してみることにしました。町 $ v $ を首都としたときの「バランス値」は、町 $ v $ を通らずに相互に通行可能である町の集合の最大の大きさです。

例えば、下の図の町 $ 1 $ を首都とした場合、{町 $ 0 $, 町 $ 4 $} や {町 $ 2 $} や {町 $ 3 $} などの町の集合において、町 $ 1 $ を通らずに相互に通行することが可能となっています。そのうち最も大きい集合は {町 $ 0 $, 町 $ 4 $} であり、その大きさは $ 2 $ であるため、町 $ 1 $ を首都としたときの「バランス値」は $ 2 $ となります。

 ![figure](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_arc028_3/a2884d775d8d248a4b6d27c592f114eb88daf1ec.png)

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ N\ ≦\ 1000 $ を満たすテストケースすべてに正解した場合は $ 30 $ 点が与えられる。

### Sample Explanation 1

このケースでの入力は、問題文中の図のような道の情報を表しています。

## 样例 #1

### 输入

```
5

0

1

1

0```

### 输出

```
3

2

4

4

4```

## 样例 #2

### 输入

```
3

0

0```

### 输出

```
1

2

2```

# AI分析结果

### 题目内容重写

高橋王国由 $ N $ 个城镇组成，每个城镇的编号从 $ 0 $ 到 $ N-1 $。城镇之间有 $ N-1 $ 条道路连接，使得任意两个城镇之间都可以通过若干条道路到达。

高橋王国的国王高橋君决定选择一个城镇作为首都。为了帮助他做出决定，他定义了一个“平衡值”。当选择城镇 $ v $ 作为首都时，平衡值是指不经过城镇 $ v $ 的情况下，能够相互到达的城镇集合的最大大小。

例如，在下图中，如果选择城镇 $ 1 $ 作为首都，那么 {城镇 $ 0 $, 城镇 $ 4 $}、{城镇 $ 2 $}、{城镇 $ 3 $} 等集合中的城镇可以不经过城镇 $ 1 $ 相互到达。其中最大的集合是 {城镇 $ 0 $, 城镇 $ 4 $}，大小为 $ 2 $，因此城镇 $ 1 $ 作为首都时的平衡值为 $ 2 $。

![figure](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_arc028_3/a2884d775d8d248a4b6d27c592f114eb88daf1ec.png)

### 部分分

- 对于满足 $ N \leq 1000 $ 的测试用例，正确解答所有测试用例将获得 $ 30 $ 分。

### 样例解释

#### 样例 #1

输入：
```
5

0

1

1

0
```
输出：
```
3

2

4

4

4
```

#### 样例 #2

输入：
```
3

0

0
```
输出：
```
1

2

2
```

### 算法分类
深度优先搜索 DFS

### 综合分析与结论

本题的核心在于如何高效地计算每个城镇作为首都时的平衡值。由于城镇之间的连接关系形成了一棵树，因此可以通过深度优先搜索（DFS）来遍历树，并计算每个子树的大小。对于每个城镇 $ v $，其平衡值可以通过计算其所有子树中最大的子树大小来得到。

### 题解分析与评分

由于暂无题解，以下给出通用建议与扩展思路：

1. **思路**：使用DFS遍历树，计算每个节点的子树大小。对于每个节点，其平衡值等于其所有子树中最大的子树大小。
2. **难点**：需要高效地计算每个节点的子树大小，并确保在遍历过程中不重复计算。
3. **优化**：可以通过一次DFS遍历，同时计算每个节点的子树大小和平衡值，减少时间复杂度。

### 关键思路与技巧

- **DFS遍历**：通过DFS遍历树，计算每个节点的子树大小。
- **平衡值计算**：对于每个节点，其平衡值等于其所有子树中最大的子树大小。
- **一次遍历**：通过一次DFS遍历，同时计算子树大小和平衡值，优化时间复杂度。

### 推荐题目
1. [P1352 没有上司的舞会](https://www.luogu.com.cn/problem/P1352)
2. [P2014 选课](https://www.luogu.com.cn/problem/P2014)
3. [P3379 【模板】最近公共祖先（LCA）](https://www.luogu.com.cn/problem/P3379)

这些题目都涉及到树的遍历和子树大小的计算，与本题的解题思路相似，可以帮助进一步理解和掌握相关算法。

---
处理用时：23.13秒
# 题目信息

# [ARC038B] マス目と駒

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc038/tasks/arc038_b

$ H $ 行 $ W $ 列のマス目とチェスの駒が $ 1 $ つあります。$ i\ (1\ ≦\ i\ ≦\ H) $ 行目 $ j\ (1\ ≦\ j\ ≦\ W) $ 列目のマスを、マス $ (i,j) $ と呼ぶことにします。このとき、左上のマスがマス $ (1,1) $ で右下のマスがマス $ (H,W) $ となっています。また、マス $ (1,1) $ 以外のいくつかのマスには障害物が置いてあります。ゲーム好きな兄妹がこのマス目と駒を使って以下のようなゲームをしようとしています。

- 最初、駒をマス $ (1,1) $ に置く。
- プレイヤーは自分のターンに、駒を $ 1 $ つ下か $ 1 $ つ右下か $ 1 $ つ右のマスのうち障害物のないいずれかのマスに動かさなければならない。つまり、駒がマス $ (i,j) $ にあるときは、マス $ (i+1,j) $ かマス $ (i+1,j+1) $ かマス $ (i,j+1) $ のうち障害物のないいずれかのマスに動かさなければならない。ただしこのとき、マス目の外に動かすことはできない。すなわち、$ i\ =\ H $ のときは下や右下には動かせず、$ j\ =\ W $ のときは右下や右には動かせない。
- 交互にターンを繰り返し、自分のターンに駒を動かせなくなったプレイヤーの負けとなる（もう一方のプレイヤーが勝ちとなる）。

$ 2 $ 人ともが勝ちを目指して最適な戦略をとったとき、先手と後手のどちらが勝つでしょうか？

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ H\ ≦\ 4 $ かつ $ W\ ≦\ 4 $ を満たすデータセット $ 1 $ に正解した場合は、$ 30 $ 点が与えられる。
- 全てのテストケースに正解した場合は、上記とは別に $ 70 $ 点が与えられる。

### Sample Explanation 1

ゲームは、例えば以下のように進行します。`o` は駒の位置を表しています。 ``` o#. ... ``` - $ 1 $ ターン目：駒はマス $ (1,1) $ にあります。駒を下か右下に動かすことができます。先手は、駒を下に動かしました。 ``` .#. o.. ``` - $ 2 $ ターン目：駒はマス $ (2,1) $ にあります。駒は右にしか動かせません。後手は、駒を右に動かしました。 ``` .#. .o. ``` - $ 3 $ ターン目：駒はマス $ (2,2) $ にあります。駒は右にしか動かせません。先手は、駒を右に動かしました。 ``` .#. ..o ``` - $ 4 $ ターン目：駒はマス $ (2,3) $ にあります。後手は、駒を動かすことができないため負けとなります。 後手がどのように駒を動かしても、先手は適切な動かし方をすることによって勝つことができるため `First` を出力します。

### Sample Explanation 2

先手がどのように駒を動かしても、後手は適切な動かし方をすることによって勝つことができるため `Second` を出力します。

## 样例 #1

### 输入

```
2 3

.#.

...```

### 输出

```
First```

## 样例 #2

### 输入

```
4 4

....

...#

....

.#..```

### 输出

```
Second```

## 样例 #3

### 输入

```
11 44

............................................

............................................

............................................

.....#.....#####....####.....####....####...

....#.#....#....#..#....#...#....#..#....#..

....#.#....#....#..#.............#..#....#..

...#####...#####...#..........###....####...

...#...#...#....#..#.............#..#....#..

..#.....#..#....#..#....#...#....#..#....#..

..#.....#..#....#...####.....####....####...

............................................```

### 输出

```
Second```

# AI分析结果

### 题目内容重写

**题目描述**

有一个 $ H $ 行 $ W $ 列的棋盘和一个棋子。棋盘的第 $ i $ 行第 $ j $ 列的格子称为格子 $ (i,j) $。棋盘左上角的格子是 $ (1,1) $，右下角的格子是 $ (H,W) $。除了 $ (1,1) $ 格子外，其他一些格子上有障碍物。两个玩家轮流移动棋子，规则如下：

- 初始时，棋子放在 $ (1,1) $ 格子。
- 每次玩家必须将棋子移动到下方、右下方或右方的无障碍格子之一。具体来说，如果棋子在 $ (i,j) $ 格子，玩家可以将其移动到 $ (i+1,j) $、$ (i+1,j+1) $ 或 $ (i,j+1) $ 格子中的一个无障碍格子。棋子不能移动到棋盘外。
- 玩家轮流移动棋子，无法移动棋子的玩家输掉游戏，另一方获胜。

**说明/提示**

**部分点**

- 对于 $ H \leq 4 $ 且 $ W \leq 4 $ 的数据集，正确解答可获得 30 分。
- 对于所有测试用例，正确解答可获得额外的 70 分。

**样例解释**

**样例 1**

输入：
```
2 3
.#.
...
```
输出：
```
First
```
解释：
游戏可能如下进行：
1. 先手将棋子从 $ (1,1) $ 移动到 $ (2,1) $。
2. 后手将棋子从 $ (2,1) $ 移动到 $ (2,2) $。
3. 先手将棋子从 $ (2,2) $ 移动到 $ (2,3) $。
4. 后手无法移动棋子，因此先手获胜。

**样例 2**

输入：
```
4 4
....
...#
....
.#..
```
输出：
```
Second
```
解释：
无论先手如何移动棋子，后手都能通过最优策略获胜。

**样例 3**

输入：
```
11 44
............................................
............................................
............................................
.....#.....#####....####.....####....####...
....#.#....#....#..#....#...#....#..#....#..
....#.#....#....#..#.............#..#....#..
...#####...#####...#..........###....####...
...#...#...#....#..#.............#..#....#..
..#.....#..#....#..#....#...#....#..#....#..
..#.....#..#....#...####.....####....####...
............................................
```
输出：
```
Second
```

### 算法分类

**动态规划**

### 题解分析与结论

本题的核心是通过动态规划来判断先手是否必胜。具体思路是从终点开始，逐步向前推导每个格子的胜负状态。如果当前格子可以移动到至少一个必败状态（即对手无法获胜的状态），则当前格子为必胜状态；否则为必败状态。

### 题解评分与关键亮点

由于暂无题解，以下为通用建议与扩展思路：

1. **动态规划**：从终点开始，逐步向前推导每个格子的胜负状态。这种方法适用于许多博弈论问题，尤其是那些可以通过状态转移来推导胜负的问题。
2. **状态转移**：对于每个格子，检查其可以移动到的所有格子，如果其中至少有一个格子是必败状态，则当前格子为必胜状态；否则为必败状态。
3. **边界条件**：处理棋盘的边界条件，确保棋子不会移动到棋盘外。

### 推荐题目

1. **洛谷 P1002 过河卒**：考察动态规划与状态转移，类似于本题的棋盘移动问题。
2. **洛谷 P1048 采药**：经典的动态规划问题，涉及状态转移与最优解。
3. **洛谷 P1057 传球游戏**：动态规划与状态转移的结合，适合进一步理解动态规划的应用。

### 总结

本题通过动态规划的方法，从终点开始逐步推导每个格子的胜负状态，从而判断先手是否必胜。这种方法在博弈论问题中非常常见，尤其是那些可以通过状态转移来推导胜负的问题。

---
处理用时：28.69秒
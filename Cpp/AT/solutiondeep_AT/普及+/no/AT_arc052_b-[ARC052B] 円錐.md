# 题目信息

# [ARC052B] 円錐

## 题目描述

三维空间( $xyz$ 空间)中有 $N$ 个 **互相不重合** 的圆锥漂浮着。

每个圆锥的底面都与 $yz$ 平面平行，顶点朝向 $x$ 轴正方向。

第 $i$ 个圆锥的底面的中心的 $x$ 坐标为 $X_i$ ，半径为 $R_i$ ，高为 $H_i$ 。

请回答 $Q$ 个如下的询问。
- 给出两个整数 $A,B$ 。请回答 $A \le x \le B$ 的空间里，这些圆锥共占了多少体积。

## 说明/提示

数据范围见原题面最下方。另：输入的所有数据都为整数。

## 样例 #1

### 输入

```
10 10

3 3 3

2 1 1

5 2 3

1 5 6

2 9 3

4 6 12

11 18 5

4 15 25

0 2 3

1 1 7

0 1

0 2

0 10

3 10

0 100

3 8

1 5

2 9

3 4

6 9```

### 输出

```
8.843002

80.992182

4173.878112

3865.997282

8512.668894

2882.971997

1227.377293

3629.490541

114.081013

1747.545749```

## 样例 #2

### 输入

```
5 5

5 10 10

4 100 100

3 1000 1000

2 1000 1000

1 1000 1000

0 3

2 1000

4 314

3 217

5 432```

### 输出

```
9409079.422279

3139502408.531295

2100737789.465234

1613523459.243475

2532621914.444282```

# AI分析结果

【题目内容】
# [ARC052B] 円錐

## 题目描述

三维空间( $xyz$ 空间)中有 $N$ 个 **互相不重合** 的圆锥漂浮着。

每个圆锥的底面都与 $yz$ 平面平行，顶点朝向 $x$ 轴正方向。

第 $i$ 个圆锥的底面的中心的 $x$ 坐标为 $X_i$ ，半径为 $R_i$ ，高为 $H_i$ 。

请回答 $Q$ 个如下的询问。
- 给出两个整数 $A,B$ 。请回答 $A \le x \le B$ 的空间里，这些圆锥共占了多少体积。

## 说明/提示

数据范围见原题面最下方。另：输入的所有数据都为整数。

## 样例 #1

### 输入

```
10 10

3 3 3

2 1 1

5 2 3

1 5 6

2 9 3

4 6 12

11 18 5

4 15 25

0 2 3

1 1 7

0 1

0 2

0 10

3 10

0 100

3 8

1 5

2 9

3 4

6 9```

### 输出

```
8.843002

80.992182

4173.878112

3865.997282

8512.668894

2882.971997

1227.377293

3629.490541

114.081013

1747.545749```

## 样例 #2

### 输入

```
5 5

5 10 10

4 100 100

3 1000 1000

2 1000 1000

1 1000 1000

0 3

2 1000

4 314

3 217

5 432```

### 输出

```
9409079.422279

3139502408.531295

2100737789.465234

1613523459.243475

2532621914.444282```

【算法分类】数学

【题解分析与结论】
该题解通过将每个圆锥按高度分成多个圆台，计算每个圆台的体积，并将其累加到对应的 $x$ 坐标位置。通过前缀和和差分处理询问，最终输出结果。该方法巧妙地利用了圆锥体积公式和前缀和的思想，有效地解决了问题。

【所选题解】
## 作者：到底几只鱼呢 (赞：0)

**星级：4星**
**关键亮点：**
1. 将圆锥按高度分成多个圆台，简化了体积计算。
2. 利用前缀和和差分处理询问，提高了查询效率。
3. 代码结构清晰，易于理解。

**核心代码实现思想：**
```cpp
double square(double r, double h)
{
    return 1. * pi * r * r / 3 * h;
}

void work()
{
    cin >> n >> q;
    for (int i = 1; i <= n; i++) {
        int x, h; double r;
        cin >> x >> r >> h;
        while (h) {
            double tmpr = r * (1.0 - 1. / h);
            v[x + 1] += square(r, h) - square(tmpr, h - 1);
            x++; h--; r = tmpr;
        }
    }
    for (int i = 1; i <= maxn - 10; i++) {
        sum[i] = sum[i - 1] + v[i];
    }
    while (q--) {
        int A, B; cin >> A >> B;
        cout << fixed << setprecision(10) << sum[B] - sum[A] << '\n';
    }
}
```

【最优关键思路或技巧】
1. **圆台分割法**：将圆锥按高度分割成多个圆台，简化了体积计算。
2. **前缀和与差分**：通过前缀和和差分处理询问，提高了查询效率。

【可拓展之处】
类似的问题可以扩展到其他几何体的体积计算，如圆柱、球体等。同时，前缀和和差分的思想可以应用于其他需要快速查询区间和的问题。

【推荐题目】
1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
2. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)
3. [P3368 【模板】树状数组 2](https://www.luogu.com.cn/problem/P3368)

---
处理用时：32.44秒
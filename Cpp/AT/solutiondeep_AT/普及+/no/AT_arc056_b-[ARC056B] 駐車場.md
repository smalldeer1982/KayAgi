# 题目信息

# [ARC056B] 駐車場

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc056/tasks/arc056_b

駐車場で$ N $人が車を駐めようとしています。 駐車場は$ N $個の駐車スペースがあり$ 1 $から$ N $まで番号付けられています。また、$ 2 $つの駐車スペースを双方向に結ぶ道が$ M $本あり、$ i $番目の道は$ u_i $番目の駐車スペースと$ v_i $番目の駐車スペースを結んでいます。 駐車スペース$ S $は駐車場の入り口とつながっています。

$ i $番目の人は、どういうわけか$ i $番目の駐車スペースにしか車を駐めたくないようです。このため、駐車場の入り口から、まだ誰も車を駐めていない駐車スペースとそれらを結ぶ道を通って$ i $番目の駐車スペースに行くことができないとき、車を駐めずに帰ってしまいます。

$ 1 $番目の人から$ N $番目の人まで順番に駐車場にやってきます。最終的に駐車場に駐める人の番号を昇順に出力してください。

## 说明/提示

### 制約

- $ 1\ ≦\ N,\ M\ ≦\ 2*10^5 $
- $ 1≦u_i,\ v_i≦N $
- $ u_i\ ≠\ v_i $
- $ 1\ ≦\ S\ ≦\ N $
- 全ての駐車スペースへは、入り口から道と駐車スペースを経由してたどり着くことができる

### 部分点

- $ M\ ≦\ 2,000 $ を満たすテストケース全てに正解した場合、部分点として$ 40 $点が与えられる。

### Sample Explanation 1

$ 1 $番目の車は、駐車スペース$ 1 $に行くことができるためそこに駐めます。 $ 2 $番目の車は、駐車スペース$ 2 $に行くことができるためそこに駐めます。 $ 3 $番目の車は、$ 2 $番目の車に塞がれ駐車スペース$ 3 $に行くことができないため、帰ります。

### Sample Explanation 2

!\[https://arc056.contest.atcoder.jp/img/arc/056/vafbafvasrf/imgB.png\](https://arc056.contest.atcoder.jp/img/arc/056/vafbafvasrf/imgB.png)青い円を空いている駐車スペース、赤い円を車のいる駐車スペースとすると、上図のような順番で駐車スペースが埋まっていき、$ 4 $番目の車は駐めることができません。

## 样例 #1

### 输入

```
3 3 2

1 2

2 3

1 3```

### 输出

```
1

2```

## 样例 #2

### 输入

```
5 6 5

1 5

3 5

3 2

4 1

1 2

4 3```

### 输出

```
1

2

3

5```

## 样例 #3

### 输入

```
5 5 5

1 4

4 3

3 2

2 5

5 1```

### 输出

```
1

2

5```

# AI分析结果

### 题目内容重写
# [ARC056B] 駐車場

## 题目描述

駐車場で$ N $人が車を駐めようとしています。 駐車場は$ N $個の駐車スペースがあり$ 1 $から$ N $まで番号付けられています。また、$ 2 $つの駐車スペースを双方向に結ぶ道が$ M $本あり、$ i $番目の道は$ u_i $番目の駐車スペースと$ v_i $番目の駐車スペースを結んでいます。 駐車スペース$ S $は駐車場の入り口とつながっています。

$ i $番目の人は、どういうわけか$ i $番目の駐車スペースにしか車を駐めたくないようです。このため、駐車場の入り口から、まだ誰も車を駐めていない駐車スペースとそれらを結ぶ道を通って$ i $番目の駐車スペースに行くことができないとき，車を駐めずに帰ってしまいます。

$ 1 $番目の人から$ N $番目の人まで順番に駐車場にやってきます。最終的に駐車場に駐める人の番号を昇順に出力してください。

## 说明/提示

### 制約

- $ 1\ ≦\ N,\ M\ ≦\ 2*10^5 $
- $ 1≦u_i,\ v_i≦N $
- $ u_i\ ≠\ v_i $
- $ 1\ ≦\ S\ ≦\ N $
- 全ての駐車スペースへは、入り口から道と駐車スペースを経由してたどり着くことができる

### 部分点

- $ M\ ≦\ 2,000 $ を満たすテストケース全てに正解した場合、部分点として$ 40 $点が与えられる。

### Sample Explanation 1

$ 1 $番目の車は、駐車スペース$ 1 $に行くことができるためそこに駐めます。 $ 2 $番目の車は、駐車スペース$ 2 $に行くことができるためそこに駐めます。 $ 3 $番目の車は、$ 2 $番目の車に塞がれ駐車スペース$ 3 $に行くことができないため、帰ります。

### Sample Explanation 2

!\[https://arc056.contest.atcoder.jp/img/arc/056/vafbafvasrf/imgB.png\](https://arc056.contest.atcoder.jp/img/arc/056/vafbafvasrf/imgB.png)青い円を空いている駐車スペース、赤い円を車のいる駐車スペースとすると、上図のような順番で駐車スペースが埋まっていき、$ 4 $番目の車は駐めることができません。

## 样例 #1

### 输入

```
3 3 2

1 2

2 3

1 3```

### 输出

```
1

2```

## 样例 #2

### 输入

```
5 6 5

1 5

3 5

3 2

4 1

1 2

4 3```

### 输出

```
1

2

3

5```

## 样例 #3

### 输入

```
5 5 5

1 4

4 3

3 2

2 5

5 1```

### 输出

```
1

2

5```

### 算法分类
并查集

### 题解分析与结论
本题的核心在于如何高效地判断每个停车位是否可以从入口到达，并且在停车位被占用后更新连通性。题解中使用了并查集数据结构来维护连通块，并通过倒序处理的方式，将删除边的操作转化为添加边的操作，从而简化了问题。

### 所选题解
#### 题解：YuYuanPQ
- **星级**: 4星
- **关键亮点**: 使用并查集维护连通块，通过倒序处理将删除边的操作转化为添加边的操作，简化了问题。
- **个人心得**: 作者提到“把删边变成（倒着）加边”是一个经典的技巧，这种思维方式在处理类似问题时非常有用。

### 核心代码实现
```cpp
#include <bits/stdc++.h>
using namespace std;

const int MAXN = 2e5 + 5;
int parent[MAXN], ans[MAXN];
vector<int> adj[MAXN];

int find(int x) {
    return parent[x] == x ? x : parent[x] = find(parent[x]);
}

void unite(int x, int y) {
    x = find(x);
    y = find(y);
    if (x != y) parent[y] = x;
}

int main() {
    int N, M, S;
    cin >> N >> M >> S;
    for (int i = 1; i <= N; ++i) parent[i] = i;
    for (int i = 0; i < M; ++i) {
        int u, v;
        cin >> u >> v;
        adj[u].push_back(v);
        adj[v].push_back(u);
    }
    for (int i = N; i >= 1; --i) {
        for (int v : adj[i]) {
            if (v > i) unite(i, v);
        }
        if (find(i) == find(S)) ans[i] = 1;
    }
    for (int i = 1; i <= N; ++i) {
        if (ans[i]) cout << i << endl;
    }
    return 0;
}
```

### 关键思路与技巧
1. **并查集维护连通块**: 通过并查集数据结构高效地维护和查询连通性。
2. **倒序处理**: 将删除边的操作转化为添加边的操作，简化了问题的处理。
3. **时间复杂度优化**: 通过倒序处理和并查集的使用，将时间复杂度优化到接近线性。

### 拓展与举一反三
类似的问题可以通过并查集和倒序处理来解决，例如在处理图的连通性问题时，倒序处理可以简化问题的复杂性。

### 推荐题目
1. [P3367 【模板】并查集](https://www.luogu.com.cn/problem/P3367)
2. [P1551 亲戚](https://www.luogu.com.cn/problem/P1551)
3. [P1197 [JSOI2008]星球大战](https://www.luogu.com.cn/problem/P1197)

---
处理用时：40.80秒
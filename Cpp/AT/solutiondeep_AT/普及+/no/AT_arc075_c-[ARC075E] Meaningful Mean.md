# 题目信息

# [ARC075E] Meaningful Mean

## 题目描述

**题目大意：**
给一个长度为N的整数序列{a},对于其一共N*(N+1)/2个的非空区间，求有多少个区间的平均数大于等于K。

## 说明/提示

输入的全部为整数

1 ≤ N ≤ 2×10^5

1 ≤ K ≤ 10^9

1 ≤ a[i] ≤ 10^9

## 样例 #1

### 输入

```
3 6

7

5

7```

### 输出

```
5```

## 样例 #2

### 输入

```
1 2

1```

### 输出

```
0```

## 样例 #3

### 输入

```
7 26

10

20

30

40

30

20

10```

### 输出

```
13```

# AI分析结果

【题目内容】
# [ARC075E] Meaningful Mean

## 题目描述

**题目大意：**
给一个长度为N的整数序列{a},对于其一共N*(N+1)/2个的非空区间，求有多少个区间的平均数大于等于K。

## 说明/提示

输入的全部为整数

1 ≤ N ≤ 2×10^5

1 ≤ K ≤ 10^9

1 ≤ a[i] ≤ 10^9

## 样例 #1

### 输入

```
3 6

7

5

7```

### 输出

```
5```

## 样例 #2

### 输入

```
1 2

1```

### 输出

```
0```

## 样例 #3

### 输入

```
7 26

10

20

30

40

30

20

10```

### 输出

```
13```

【算法分类】前缀和、树状数组、离散化

【题解分析与结论】
本题的核心思路是通过前缀和和离散化，将问题转化为二维偏序问题，利用树状数组或归并排序来统计顺序对的数量。以下是各题解的要点总结：

1. **NinT_W**：通过将每个元素减去K，转化为前缀和问题，利用树状数组统计顺序对。代码清晰，思路明确，处理了离散化和树状数组的细节。
2. **qinmingze**：同样通过减去K，转化为前缀和问题，使用归并排序统计顺序对。代码简洁，归并排序的实现较为标准。
3. **tzc_wk**：通过减去K，转化为前缀和问题，使用树状数组统计顺序对。代码结构清晰，处理了离散化和树状数组的细节。

【精选题解】
1. **NinT_W**（5星）
   - 关键亮点：通过减去K将问题转化为前缀和问题，利用树状数组统计顺序对，处理了离散化和树状数组的细节。
   - 代码核心：
     ```cpp
     for(int i=1;i<=n;i++){
         ans+=query(sum[i]);
         update(sum[i],1);
     }
     ```

2. **qinmingze**（4星）
   - 关键亮点：通过减去K将问题转化为前缀和问题，使用归并排序统计顺序对，代码简洁。
   - 代码核心：
     ```cpp
     if(a[l] <= a[r]){
         b[cnt++] = a[r++];
         ans = ans + mid - l + 1;
     }
     ```

3. **tzc_wk**（4星）
   - 关键亮点：通过减去K将问题转化为前缀和问题，使用树状数组统计顺序对，处理了离散化和树状数组的细节。
   - 代码核心：
     ```cpp
     fz(i,1,n){
         ans+=query(ind);
         add(ind,1);
     }
     ```

【最优关键思路】
通过将每个元素减去K，转化为前缀和问题，利用树状数组或归并排序统计顺序对。离散化处理是解决大值域问题的关键。

【拓展思路】
类似的问题可以通过前缀和和离散化转化为二维偏序问题，利用树状数组或归并排序解决。例如，统计区间和大于等于某个值的区间数量。

【推荐题目】
1. P1908 逆序对
2. P1774 最接近神的人
3. P2717 寒假作业

---
处理用时：25.62秒
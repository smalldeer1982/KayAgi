# 题目信息

# [ABC093D] Worst Case

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc093/tasks/arc094_b

高橋君を含めた $ 10^{10^{10}} $ 人の参加者が $ 2 $ 回のプログラミングコンテストに参加しました。 各コンテストでは全員に $ 1 $ 位から $ 10^{10^{10}} $ 位までの相異なる順位がつきました。

参加者のスコアとは、$ 2 $ 回のコンテストでの順位を掛け合わせた値です。

次のクエリ $ Q $ 個に答えてください。

- $ i $ 個目のクエリでは、$ 2 $ つの正の整数 $ A_i,B_i $ が与えられる。高橋君が $ 1 $ 回目のコンテストで $ A_i $ 位、$ 2 $ 回目のコンテストで $ B_i $ 位を取ったと仮定して、高橋君よりスコアの小さい参加者の人数の最大値を求めよ。

## 说明/提示

### 制約

- $ 1\ \leq\ Q\ \leq\ 100 $
- $ 1\leq\ A_i,B_i\leq\ 10^9(1\leq\ i\leq\ Q) $
- 入力はすべて整数である

### Sample Explanation 1

$ 1 $ 回目のコンテストで $ x $ 位を、$ 2 $ 回目のコンテストで $ y $ 位を取った参加者を $ (x,y) $ で表すことにします。 $ 1 $ つめのクエリでは、高橋君よりスコアの小さい参加者として $ (2,1) $ が考えられます。$ 2 $ 人以上のスコアが高橋君のスコアより小さくなることはないため、$ 1 $ を出力します。

## 样例 #1

### 输入

```
8

1 4

10 5

3 3

4 11

8 9

22 40

8 36

314159265 358979323```

### 输出

```
1

12

4

11

14

57

31

671644785```

# AI分析结果

【题目内容】
# [ABC093D] Worst Case

## 题目描述

高橋君を含めた $ 10^{10^{10}} $ 人の参加者が $ 2 $ 回のプログラミングコンテストに参加しました。 各コンテストでは全員に $ 1 $ 位から $ 10^{10^{10}} $ 位までの相異なる順位がつきました。

参加者のスコアとは、$ 2 $ 回のコンテストでの順位を掛け合わせた値です。

次のクエリ $ Q $ 個に答えてください。

- $ i $ 個目のクエリでは、$ 2 $ つの正の整数 $ A_i,B_i $ が与えられる。高橋君が $ 1 $ 回目のコンテストで $ A_i $ 位、$ 2 $ 回目のコンテストで $ B_i $ 位を取ったと仮定して、高橋君よりスコアの小さい参加者の人数の最大値を求めよ。

## 说明/提示

### 制約

- $ 1\ \leq\ Q\ \leq\ 100 $
- $ 1\leq\ A_i,B_i\leq\ 10^9(1\leq\ i\leq\ Q) $
- 入力はすべて整数である

### Sample Explanation 1

$ 1 $ 回目のコンテストで $ x $ 位を、$ 2 $ 回目のコンテストで $ y $ 位を取った参加者を $ (x,y) $ で表すことにします。 $ 1 $ つめのクエリでは、高橋君よりスコアの小さい参加者として $ (2,1) $ が考えられます。$ 2 $ 人以上のスコアが高橋君のスコアより小さくなることはないため、$ 1 $ を出力します。

## 样例 #1

### 输入

```
8

1 4

10 5

3 3

4 11

8 9

22 40

8 36

314159265 358979323```

### 输出

```
1

12

4

11

14

57

31

671644785```

【算法分类】
数学

【题解分析与结论】
本题的核心是通过数学分析来确定高橋君在两次比赛中排名分别为A和B时，有多少人的得分可以比他低。题解主要围绕如何计算这个最大人数展开，涉及到的数学技巧包括平方根、二分查找和基本不等式等。

【所选题解】
1. **作者：loveJY (赞：4)**  
   - **星级：4**  
   - **关键亮点**：通过观察规律，发现可以通过平方根和基本不等式来快速计算最大人数。代码实现简洁，时间复杂度为O(T)。  
   - **个人心得**：通过画图发现规律，虽然一开始可能有些模糊，但通过不断调整和验证，最终找到了正确的计算方法。  
   - **核心代码**：
     ```cpp
     int u = sqrt(1ll * A * B);
     int v = A * B / u;
     if(u * v == A * B && v > u)--v;
     if(A > B)swap(A, B);
     int ans = 0;
     if(u == A && v == B)
         ans--;
     else if(u * v == A * B)
         ans -= 2;
     else if(v == u)
         ans--;
     ans += u * 2 - 1;
     printf("%lld\n", ans);
     ```

2. **作者：serene_analysis (赞：3)**  
   - **星级：4**  
   - **关键亮点**：利用二分查找和贪心策略，通过判断mid是否满足条件来确定最大人数。代码逻辑清晰，适合处理大规模数据。  
   - **核心代码**：
     ```cpp
     bool can(ll gave,ll a,ll b){
         ll nmx=-1145141919810;
         if(gave<a)nmx=gans(1,gave,0);
         else if(gave>=b){
             gave++;
             if(gave-a>b-1)nmx=std::max({gans(1,b-1,gave-b+1),
                 gans(a+1,gave-b+1,b-a),gans(1,a-1,gave-a+1)});
             else if(gave-a==b-1)nmx=std::max(
                 gans(1,b-1,gave-b+1),gans(1,a-1,gave-a+1));
             else nmx=std::max({gans(1,gave-a,a),gans(gave-b+1,a-1,b-a),gans(1,gave-b,b)});
         }
         else nmx=std::max(gans(1,a-1,gave-a+1),gans(1,gave-a+1,a));
         return nmx<a*b;
     }
     ```

3. **作者：Krimson (赞：3)**  
   - **星级：4**  
   - **关键亮点**：通过霍耳定理和二分查找结合，提供了一种有严格证明的解法。虽然代码较为复杂，但逻辑严谨，适合需要严格证明的场景。  
   - **核心代码**：
     ```cpp
     bool check(ll x,ll y,__int128 k){
         for(ll i=max(sqrt(x*y)-120,1);i<=min(sqrt(x*y)+120,k);++i){
             ll res=1;
             if(k>=y&&i<=y) res--;
             if(k>=x&&i<=x) res--;
             if(i==x||i==y) continue;
             if(x*y<=i*k-i*i+i*res) return false;
         }
         return true;
     }
     ```

【最优关键思路或技巧】
- **平方根与基本不等式**：通过平方根和基本不等式快速计算最大人数，减少计算复杂度。
- **二分查找**：利用二分查找确定最大人数，适合处理大规模数据。
- **霍耳定理**：通过霍耳定理严格证明解法的正确性，适合需要严格证明的场景。

【可拓展之处】
- 类似的问题可以通过二分查找和数学分析来解决，例如在排名或得分相关的问题中，可以通过类似的思路快速找到最优解。

【推荐题目】
1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)
2. [P1045 最大子段和](https://www.luogu.com.cn/problem/P1045)
3. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)

---
处理用时：40.06秒
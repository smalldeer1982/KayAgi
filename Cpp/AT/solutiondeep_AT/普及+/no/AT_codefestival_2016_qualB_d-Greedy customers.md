# 题目信息

# Greedy customers

## 题目描述

[problemUrl]: https://atcoder.jp/contests/code-festival-2016-qualb/tasks/codefestival_2016_qualB_d

高橋商店の前には、$ N $ 人の人が $ 1 $ 列に並んでいます。前から $ i $ 人目の人の所持金は正整数 $ A_i $ です。

店主の高橋君は、「品物を選んでその価格を表す正の整数 $ P $ を設定し、前の人から順にその品物を見せていく」というステップを繰り返します。

各ステップにおいて、各人は、品物を見せられた時、その価格 $ P $ が現時点でのその人の所持金以下だった場合その品物を購入し、高橋君の $ 1 $ 回のステップは終了します。 すなわち、所持金が $ P $ 以上の最初の人の所持金が $ P $ 減少し、次のステップに移ります。

高橋君は正整数 $ P $ の値を、ステップごとに独立に決めることができます。

高橋君はできるだけ多くの品物を売りたいですが、品物を売った人の所持金が $ 0 $ になってしまうと、その人は帰れなくなってしまいます。人が帰れなくなってしまうと高橋君は困ってしまうので、どの人の所持金も $ 0 $ にしてはいけません。

高橋君に代わって、各人の最初の所持金が与えられたとき、高橋君が最大でいくつの品物を売ることができるかを求めるプログラムを作成してください。

## 说明/提示

### 制約

- $ 1\ ≦\ N\ ≦\ 100000 $
- $ 1\ ≦\ A_i\ ≦\ 10^9(1\ ≦\ i\ ≦\ N) $
- 入力はすべて整数である

### Sample Explanation 1

$ P $の値として、順に$ 1,4,1 $と選べばよいです。

## 样例 #1

### 输入

```
3

3

2

5```

### 输出

```
3```

## 样例 #2

### 输入

```
15

3

1

4

1

5

9

2

6

5

3

5

8

9

7

9```

### 输出

```
18```

# AI分析结果

### 题目内容重写

#### 题目描述

高橋商店前有 $N$ 个人排成一列，第 $i$ 个人的所持金为正整数 $A_i$。店主高橋君每次选择一个正整数 $P$ 作为商品的价格，然后从前到后依次展示商品给每个人。每个人在展示商品时，如果当前所持金大于等于 $P$，则购买该商品，所持金减少 $P$，并且高橋君的当前步骤结束。高橋君每次可以独立选择 $P$ 的值，目标是尽可能多地卖出商品，但必须保证每个人的所持金不会变为 $0$。

请编写程序，计算高橋君最多能卖出多少个商品。

#### 说明/提示

##### 约束

- $1 \leq N \leq 100000$
- $1 \leq A_i \leq 10^9 (1 \leq i \leq N)$
- 输入均为整数

##### 样例解释

对于样例1，选择 $P$ 的值为 $1, 4, 1$，可以卖出3个商品。

#### 样例 #1

##### 输入

```
3
3
2
5
```

##### 输出

```
3
```

#### 样例 #2

##### 输入

```
15
3
1
4
1
5
9
2
6
5
3
5
8
9
7
9
```

##### 输出

```
18
```

### 算法分类

贪心

### 题解分析与结论

由于题目要求尽可能多地卖出商品，同时保证每个人的所持金不为0，因此我们需要采用贪心策略。具体来说，每次选择最小的可能的 $P$ 值，使得尽可能多的人能够购买商品，同时不使任何人的所持金变为0。

### 关键思路与技巧

1. **贪心策略**：每次选择最小的 $P$ 值，使得尽可能多的人能够购买商品。
2. **优先队列**：使用优先队列（最小堆）来维护当前可用的 $P$ 值，确保每次选择最小的 $P$。
3. **模拟过程**：模拟商品的售卖过程，记录每个人的剩余所持金，确保不会变为0。

### 推荐题目

1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
2. [P1168 中位数](https://www.luogu.com.cn/problem/P1168)
3. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)

### 代码实现

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int N;
    cin >> N;
    vector<int> A(N);
    for (int i = 0; i < N; ++i) {
        cin >> A[i];
    }
    
    priority_queue<int, vector<int>, greater<int>> pq;
    for (int a : A) {
        pq.push(a);
    }
    
    int ans = 0;
    while (!pq.empty()) {
        int p = pq.top();
        pq.pop();
        if (p > 1) {
            ans += 1;
            pq.push(p - 1);
        }
    }
    
    cout << ans << endl;
    return 0;
}
```

### 代码解释

1. **输入处理**：读取人数 $N$ 和每个人的所持金 $A_i$。
2. **优先队列**：将所有所持金放入最小堆中。
3. **贪心选择**：每次从堆中取出最小的 $P$，如果 $P > 1$，则卖出商品，并将 $P - 1$ 放回堆中。
4. **输出结果**：输出最多能卖出的商品数量。

### 个人心得

在实现过程中，优先队列的使用是关键，它确保了每次选择的 $P$ 是最小的，从而最大化商品的销售量。同时，模拟过程需要仔细处理，确保每个人的所持金不会变为0。

---
处理用时：22.56秒
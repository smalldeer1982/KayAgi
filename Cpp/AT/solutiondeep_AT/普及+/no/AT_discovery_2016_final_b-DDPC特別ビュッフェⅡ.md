# 题目信息

# DDPC特別ビュッフェⅡ

## 题目描述

[problemUrl]: https://atcoder.jp/contests/discovery2016-final/tasks/discovery_2016_final_b

DISCO presents ディスカバリーチャンネルプログラミングコンテスト 2016本戦のDDPC特別ビュッフェの時間が始まりました。あなたはこれから料理の載っていないトレーに料理を載せに行くところです。 DDPC特別ビュッフェには $ N $ 種類の料理があります。 $ i $ 種類目の料理はビュッフェの開始から $ T_i $ 秒後になくなり、料理の美味しさは $ A_i $ です。

DDPC特別ビュッフェにはいくつかの特別なルールがあります。

- あなたは $ 1 $ 種類の料理をトレーに載せるのに $ 1 $ 秒かけなくてはならない。すなわち料理を載せ始めた時刻が $ s $ であったとき、料理を載せ終わったときの時刻は $ s+1 $ となる。
- あなたは以前にトレーに載せた料理と同じ種類の料理を載せてはならない。
- 現在の時刻 $ s $ が$ s+1≦T_i $ を満たさないとき、種類 $ i $ の料理をトレーに載せることはできない。

あなたはトレーに載っている料理の美味しさの総和が $ X $ 以上になったところで席に戻ることにしました。トレーに載っている料理の美味しさの総和を $ X $ 以上にすることが可能な最小の時刻 $ t $ を求めてください。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ T_i\ <\ T_j $ のとき、$ A_i≧A_j $ を満たすようなデータセットに正解した場合 $ 10 $ 点が与えられる。
- 追加制約のないデータセットに正解した場合さらに $ 40 $ 点が得られ合計 $ 50 $ 点が得られる。

### Sample Explanation 1

\- 以下のような料理の取り方をすることで、時刻 $ 2 $ にトレーに載っている料理の美味しさの総和が $ 5 $ 以上にすることが可能です。 - $ 0 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 0 $ です。種類 $ 1 $ の料理をトレーに載せます。 - $ 1 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 3 $ です。種類 $ 2 $ の料理をトレーに載せます。 - $ 2 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 6 $ です。 - このケースは部分点の追加制約を満たします。

### Sample Explanation 2

\- 以下のような料理の取り方をすることで、時刻 $ 3 $ にトレーに載っている料理の美味しさの総和が $ 10 $ 以上にすることが可能です。 - $ 0 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 0 $ です。種類 $ 1 $ の料理をトレーに載せます。 - $ 1 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 3 $ です。種類 $ 2 $ の料理をトレーに載せます。 - $ 2 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 6 $ です。種類 $ 3 $ の料理をトレーに載せます。 - $ 3 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 10 $ です。 - このケースは部分点の追加制約を満たしません。

### Sample Explanation 3

\- 以下のような料理の取り方をすることで、時刻 $ 1 $ にトレーに載っている料理の美味しさの総和が $ 5 $ 以上にすることが可能です。 - $ 0 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 0 $ です。種類 $ 3 $ の料理をトレーに載せます。 - $ 1 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 6 $ です。 - このケースは部分点の追加制約を満たします。

### Sample Explanation 4

\- どのように料理をとっても、トレーに載っている料理の美味しさの総和を $ 101 $ 以上にすることはできません。 - このケースは部分点の追加制約を満たします。

### Sample Explanation 5

\- 時刻 $ 0 $ でどちらの料理をとっても、もう片方の料理が時刻 $ 1 $ でなくなってしまうため、トレーに載っている料理の美味しさを $ 2 $ 以上にすることはできません。 - このケースは部分点の追加制約を満たします。

### Sample Explanation 6

\- 以下のような料理の取り方をすることで、時刻 $ 2 $ にトレーに載っている料理の美味しさの総和が $ 6 $ 以上にすることが可能です。 - $ 0 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 0 $ です。種類 $ 2 $ の料理をトレーに載せます。 - $ 1 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 4 $ です。種類 $ 4 $ の料理をトレーに載せます。 - $ 2 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 6 $ です。 - このケースは部分点の追加制約を満たします。

### Sample Explanation 7

\- 以下のような料理の取り方をすることで、時刻 $ 2 $ にトレーに載っている料理の美味しさの総和が $ 4 $ 以上にすることが可能です。 - $ 0 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 0 $ です。種類 $ 2 $ の料理をトレーに載せます。 - $ 1 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 2 $ です。種類 $ 3 $ の料理をトレーに載せます。 - $ 2 $ 秒目の時点でトレーに載っている料理の美味しさの総和は $ 4 $ です。 - このケースは部分点の追加制約を満たしません。

## 样例 #1

### 输入

```
4 5

1 2 3 4

3 3 1 1```

### 输出

```
2```

## 样例 #2

### 输入

```
3 10

1 2 3

3 3 4```

### 输出

```
3```

## 样例 #3

### 输入

```
3 5

9 9 4

2 2 6```

### 输出

```
1```

## 样例 #4

### 输入

```
5 101

1 2 3 4 5

20 20 20 20 20```

### 输出

```
-1```

## 样例 #5

### 输入

```
2 2

1 1

1 1```

### 输出

```
-1```

## 样例 #6

### 输入

```
4 6

1 1 2 2

3 4 1 2```

### 输出

```
2```

## 样例 #7

### 输入

```
3 4

1 2 2

1 2 2```

### 输出

```
2```

# AI分析结果

### 题目内容重写

#### 题目描述

DISCO presents ディスカバリーチャンネルプログラミングコンテスト 2016本戦のDDPC特別ビュッフェの時間が始まりました。あなたはこれから料理の載っていないトレーに料理を載せに行くところです。DDPC特別ビュッフェには $N$ 種類の料理があります。$i$ 種類目の料理はビュッフェの開始から $T_i$ 秒後になくなり、料理の美味しさは $A_i$ です。

DDPC特別ビュッフェにはいくつかの特別なルールがあります。

- あなたは $1$ 種類の料理をトレーに載せるのに $1$ 秒かけなくてはならない。すなわち料理を載せ始めた時刻が $s$ であったとき、料理を載せ終わったときの時刻は $s+1$ となる。
- あなたは以前にトレーに載せた料理と同じ種類の料理を載せてはならない。
- 現在の時刻 $s$ が $s+1 \le T_i$ を満たさないとき、種類 $i$ の料理をトレーに載せることはできない。

あなたはトレーに載っている料理の美味しさの総和が $X$ 以上になったところで席に戻ることにしました。トレーに載っている料理の美味しさの総和を $X$ 以上にすることが可能な最小の時刻 $t$ を求めてください。

#### 说明/提示

##### 部分点

この問題には部分点が設定されている。

- $T_i < T_j$ のとき、$A_i \ge A_j$ を満たすようなデータセットに正解した場合 $10$ 点が与えられる。
- 追加制約のないデータセットに正解した場合さらに $40$ 点が得られ合計 $50$ 点が得られる。

### 算法分类

贪心

### 题解分析与结论

该题的核心在于如何在有限的时间内选择最优的菜品组合，使得总美味值达到或超过目标值。由于每个菜品只能在特定时间内被选择，且选择过程需要消耗时间，因此需要一种高效的策略来选择菜品。

#### 题解1：缪凌锴_Mathew

**星级：4星**

**关键亮点：**
- 使用了贪心策略，优先选择快消失的菜品。
- 引入了反悔机制，当无法选择当前菜品时，替换掉之前选择的价值最低的菜品。
- 通过优先队列（小根堆）来维护已选菜品的最小值，便于替换操作。

**核心代码：**
```cpp
priority_queue < int,vector<int>,greater<int> > q;
for(int i=1;i<=n;i++) {
    if(tim+1<=a[i].t) {
        sum+=a[i].val;
        q.push(a[i].val);
        tim++;
    } else if((!q.empty())&&(q.top()<a[i].val)) {
        sum-=q.top();
        sum+=a[i].val;
        q.pop();
        q.push(a[i].val);
    }
}
```

**个人心得：**
- 作者提到贪心策略容易被Hack，因此引入了反悔机制，提升了算法的鲁棒性。
- 通过优先队列的优化，使得替换操作的时间复杂度降低，整体效率较高。

### 最优关键思路或技巧

1. **贪心策略**：优先选择快消失的菜品，确保在有限的时间内尽可能多地选择高价值菜品。
2. **反悔机制**：当无法选择当前菜品时，替换掉之前选择的价值最低的菜品，以最大化总价值。
3. **优先队列**：使用小根堆维护已选菜品的最小值，便于快速进行替换操作。

### 可拓展之处

该题的贪心策略和反悔机制可以应用于类似的资源分配问题，如任务调度、背包问题等。通过引入优先队列，可以进一步优化算法的效率。

### 推荐题目

1. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
2. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)

---
处理用时：29.37秒
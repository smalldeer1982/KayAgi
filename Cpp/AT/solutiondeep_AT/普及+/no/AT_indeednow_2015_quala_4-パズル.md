# 题目信息

# パズル

## 题目描述

[problemUrl]: https://atcoder.jp/contests/indeednow-quala/tasks/indeednow_2015_quala_4

あなたには、以下のような縦 $ H $マス、横 $ W $ マスのスライドパズルの盤面が与えられます(図1)。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_indeednow_2015_quala_4/27c449b69b0c35720b6d1bee41096f7623a661f9.png)  
図1. スライドパズル盤面

   
各マスには、相異なる $ 1 $ から $ H×W-1 $ までの番号が割り振られており、さらにある $ 1 $ つのマスは空きマスとなっています。

このスライドパズルでは、空白マスを左右上下のマスのいずれかと入れ替える操作が許されています。 ただし、入れ替えたい方向にマスが存在しない場合は入れ替えることができません。

この盤面に入れ替え操作を任意の回数行い、完成の状態にしたいと思っています。 ここで、完成の状態とは、左上のマスから順番に番号付けされており右下が空白マスであるような状態にしたいと思っています(図2)。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_indeednow_2015_quala_4/0618fe48636154c76d651eb5484bdec3557384e5.png)  
図2. 完成盤面

   
つまり、完成盤面とは、

- 番号 $ i\ (1≦i≦H×W-1) $ のマスは $ (1+[(i-1)÷W],1+(i-1)%W) $ にある
- さらに、空きマスが $ (H,W) $ にある

という状態を指します。$ [a÷b] $ は $ a $ を $ b $ で割った値の小数点以下を切り捨てたもの、$ a%b $ は $ a $ を $ b $ で割った余りを指します。

最小操作数が $ 24 $ 回以内ということが保障されているとき、パズルを解くのに必要な最小操作数を出力しなさい。

## 说明/提示

### Sample Explanation 1

最初、空きマスは $ (1,2) $ にあります。この空きマスを「右→下→下」と動かすことで完成の状態にすることができ、そのとき最小操作回数を達成します。

### Sample Explanation 4

パズルが元から完成している場合もあります。

### Sample Explanation 5

出力する答えが最大となるケースです。

## 样例 #1

### 输入

```
3 3

1 0 2

4 5 3

7 8 6```

### 输出

```
3```

## 样例 #2

### 输入

```
3 5

6 1 2 8 5

7 0 4 3 10

11 12 13 9 14```

### 输出

```
12```

## 样例 #3

### 输入

```
2 2

1 2

3 0```

### 输出

```
0```

## 样例 #4

### 输入

```
4 4

1 2 3 4

5 6 7 8

9 10 11 12

13 14 15 0```

### 输出

```
0```

## 样例 #5

### 输入

```
6 6

1 2 3 4 5 6

14 15 10 16 11 12

8 9 19 17 0 18

7 13 20 22 23 24

25 26 21 28 29 30

31 32 27 33 34 35```

### 输出

```
24```

# AI分析结果

### 中文题目重写

#### 题目描述

你有一个由 $H$ 行 $W$ 列组成的滑动拼图盘面（如图1）。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_indeednow_2015_quala_4/27c449b69b0c35720b6d1bee41096f7623a661f9.png)  
图1. 滑动拼图盘面

每个格子中都有一个从 $1$ 到 $H×W-1$ 的唯一编号，并且有一个格子是空的。

在这个滑动拼图中，你可以将空格子与上下左右的格子交换。但是，如果交换的方向上没有格子，则无法进行交换。

你可以对盘面进行任意次数的交换操作，最终希望达到完成状态。完成状态是指从左上角开始按顺序编号，右下角为空格子的状态（如图2）。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_indeednow_2015_quala_4/0618fe48636154c76d651eb5484bdec3557384e5.png)  
图2. 完成盘面

具体来说，完成盘面满足以下条件：

- 编号为 $i\ (1≦i≦H×W-1)$ 的格子位于 $(1+[(i-1)÷W],1+(i-1)%W)$。
- 空格子位于 $(H,W)$。

其中，$[a÷b]$ 表示 $a$ 除以 $b$ 的整数部分，$a%b$ 表示 $a$ 除以 $b$ 的余数。

题目保证最小操作次数在 $24$ 次以内，请输出完成拼图所需的最小操作次数。

### 算法分类
搜索

### 题解分析与结论

本题的核心是通过搜索算法找到从初始状态到目标状态的最小操作次数。由于操作次数限制在24次以内，因此可以使用A*算法或迭代加深搜索（IDS）来高效求解。

#### 题解对比

1. **zzhbpyy的A*算法题解**
   - **思路**：使用A*算法，以当前状态与目标状态的不同格子数作为估价函数，结合步数进行优先队列搜索。
   - **难点**：A*算法的实现较为复杂，需要维护优先队列和状态映射。
   - **评分**：4星
   - **亮点**：A*算法在搜索效率上表现优异，适合解决此类状态空间较大的问题。

2. **Li_Yichen的迭代加深搜索题解**
   - **思路**：使用迭代加深搜索，逐步增加搜索深度，结合剪枝策略减少不必要的搜索。
   - **难点**：迭代加深搜索需要合理设置剪枝条件，避免重复搜索。
   - **评分**：3星
   - **亮点**：实现相对简单，适合初学者理解，但在效率上不如A*算法。

### 最优关键思路

A*算法通过结合启发式估价函数和优先队列，能够有效地减少搜索空间，快速找到最优解。具体实现中，估价函数的设计（如当前状态与目标状态的不同格子数）对算法效率至关重要。

### 核心代码片段

```cpp
int gujia(Node a){
    int res=0;
    for(int i=1;i<=n;i++){
        for(int j=1;j<=m;j++)
            res+=(a.a[i][j]!=ans[i][j]);
    }
    return res;
}
```

### 拓展思路

类似的问题可以通过A*算法、IDA*算法或双向BFS等搜索算法解决。对于状态空间更大的问题，可以考虑使用启发式搜索或剪枝策略来优化搜索效率。

### 推荐题目

1. [P1379 八数码问题](https://www.luogu.com.cn/problem/P1379)
2. [P2324 [SCOI2005]骑士精神](https://www.luogu.com.cn/problem/P2324)
3. [P1074 靶形数独](https://www.luogu.com.cn/problem/P1074)

### 个人心得

在实现A*算法时，估价函数的设计对算法效率影响很大。通过合理设计估价函数，可以显著减少搜索空间，提高算法效率。

---
处理用时：25.01秒
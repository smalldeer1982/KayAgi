# 题目信息

# Interval Running

## 题目描述

[problemUrl]: https://atcoder.jp/contests/sumitrust2019/tasks/sumitb2019_f

高橋君と青木君は、西から東に向けて一直線に果てしなく続くランニングコースで長距離走の練習をしています。

彼らは同じ地点から同時にスタートし、**東に向かって**次のように移動します。

- 高橋君は最初の $ T_1 $ 分間、分速 $ A_1 $ メートルで走り、次の $ T_2 $ 分間、分速 $ A_2 $ メートルで走り、これを交互にいつまでも繰り返す。
- 青木君は最初の $ T_1 $ 分間、分速 $ B_1 $ メートルで走り、次の $ T_2 $ 分間、分速 $ B_2 $ メートルで走り、これを交互にいつまでも繰り返す。

さて、高橋君と青木君は何回出会う、すなわち、同じ位置に来るでしょうか？スタート地点にいる時は数えません。無限回出会う場合は、その旨を報告してください。

## 说明/提示

### 制約

- $ 1\ \leq\ T_i\ \leq\ 100000 $
- $ 1\ \leq\ A_i\ \leq\ 10^{10} $
- $ 1\ \leq\ B_i\ \leq\ 10^{10} $
- $ A_1\ \neq\ B_1 $
- $ A_2\ \neq\ B_2 $
- 入力中の値はすべて整数

### Sample Explanation 1

彼らはスタートしてから $ \frac{4}{3} $ 分後に $ 1 $ 回だけ、スタート地点から $ \frac{40}{3} $ メートルの位置で出会います。

### Sample Explanation 2

彼らはスタートしてから $ 101,\ 202,\ 303,\ 404,\ 505,\ 606,\ ... $ 分後に出会うので、無限回出会うことになります。

### Sample Explanation 3

入力中の値は $ 32 $ ビット整数型に収まらないことがあります。

## 样例 #1

### 输入

```
1 2

10 10

12 4```

### 输出

```
1```

## 样例 #2

### 输入

```
100 1

101 101

102 1```

### 输出

```
infinity```

## 样例 #3

### 输入

```
12000 15700

3390000000 3810000000

5550000000 2130000000```

### 输出

```
113```

# AI分析结果

### 题目翻译

高桥君和青木君在一条无限延伸的跑步道上进行长跑训练。他们从同一点同时出发，向东移动。高桥君和青木君的运动方式如下：

- 高桥君在最初的 $T_1$ 分钟内以每分钟 $A_1$ 米的速度跑步，接下来的 $T_2$ 分钟内以每分钟 $A_2$ 米的速度跑步，如此交替往复。
- 青木君在最初的 $T_1$ 分钟内以每分钟 $B_1$ 米的速度跑步，接下来的 $T_2$ 分钟内以每分钟 $B_2$ 米的速度跑步，如此交替往复。

问高桥君和青木君会相遇多少次？如果他们在起点相遇，不计入次数。如果他们会无限次相遇，则输出“infinity”。

### 算法分类
数学

### 题解分析与结论

这道题的核心是通过计算两人在每段运动中的距离差，来判断他们是否会相遇以及相遇的次数。题解主要集中在以下几种情况的分析：

1. **无限次相遇**：当两人在每段运动中的距离差之和为零时，他们会无限次相遇。
2. **不相遇**：当两人在每段运动中的距离差同号时，他们的距离会一直增加，不会相遇。
3. **有限次相遇**：当两人在每段运动中的距离差异号时，他们的距离会在某些时刻缩小，最终停止相遇。

### 所选高分题解

#### 题解1：ICE__LX (4星)
**关键亮点**：
- 通过距离差公式 $s_1 = (a_1 - b_1) \times t_1$ 和 $s_2 = (a_2 - b_2) \times t_2$ 来计算每段运动的距离差。
- 分类讨论了四种情况，分别对应无限次相遇、不相遇和有限次相遇。
- 代码简洁，逻辑清晰。

**核心代码**：
```cpp
if(s1+s2==0) puts("infinity"); // 情况一 
else if((s1<0&&s2<0)||(s1>0&&s2>0)||(abs(s1)>(s1<0?s2:-s2))) puts("0"); // 情况二和三 
else write(abs(s1)%abs(s1+s2)==0?abs(s1)/abs(s1+s2)*2:abs(s1)/abs(s1+s2)*2+1); // 情况四
```

#### 题解2：cosf (4星)
**关键亮点**：
- 将问题抽象为相对距离的变化，简化了问题。
- 通过判断 $s_1$ 和 $s_2$ 的关系，推导出相遇次数的公式。
- 代码实现简洁，逻辑清晰。

**核心代码**：
```cpp
if (a1  == a2) {
    cout <<  "infinity" << endl;
    return 0;
}
if (a1 > a2) {
    cout << 0 << endl;
    return 0;
}
ll dif = a2 - a1;
ll lgs = a1;
if (lgs % dif) {
    cout << 2 * (lgs / dif) + 1 << endl;
} else {
    cout << 2 * (lgs / dif) << endl;
}
```

### 最优关键思路
通过计算每段运动的距离差，判断两人是否会相遇以及相遇的次数。关键在于分析距离差的正负关系，以及距离差之和是否为零。

### 拓展思路
类似的问题可以通过计算相对距离或速度差来解决，例如在环形跑道上的相遇问题，或者在不同速度下的追赶问题。

### 推荐题目
1. [P1036 选数](https://www.luogu.com.cn/problem/P1036)
2. [P1045 数的划分](https://www.luogu.com.cn/problem/P1045)
3. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)

---
处理用时：24.30秒
# 题目信息

# [ARC165C] Social Distance on Graph

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc165/tasks/arc165_c

頂点に $ 1 $ から $ N $ の番号が付いた $ N $ 頂点からなる単純連結無向グラフがあります。グラフには重みを持つ辺が $ M $ 本あり、$ i $ 番目の辺は頂点 $ A_i,B_i $ を結ぶ重みが $ W_i $ の辺です。また、$ 2 $ 頂点を結ぶ単純パスの重みを、単純パスが含む辺の重みの総和とします。

各頂点に対し赤、青のいずれかの色を塗ります。以下の条件を満たす塗り分け方が存在するような整数 $ X $ の最大値を求めてください。

- 同じ色で塗られた相異なる $ 2 $ 頂点を結ぶどの単純パスについても、単純パスの重みは $ X $ 以上である。
 
  単純パスとは グラフ $ G $ 上の頂点 $ X,Y $ に対して、頂点列 $ v_1,v_2,\ \ldots,\ v_k $ であって、 $ v_1=X $, $ v_k=Y $ かつ、$ 1\leq\ i\leq\ k-1 $ に対して $ v_i $ と $ v_{i+1} $ が辺で結ばれているようなものを頂点 $ X $ から頂点 $ Y $ への **ウォーク** と呼びます。 さらに、$ v_1,v_2,\ \ldots,\ v_k $ がすべて異なるようなものを頂点 $ X $ から頂点 $ Y $ への **単純パス** (あるいは単に **パス**) と呼びます。

## 说明/提示

### 制約

- $ 3\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ N-1\ \leq\ M\ \leq\ \min(\frac{N(N-1)}{2},2\ \times\ 10^5) $
- $ 1\ \leq\ A_i\ <\ B_i\ \leq\ N $
- $ 1\ \leq\ W_i\ \leq\ 10^9 $
- 与えられるグラフは単純連結無向グラフ
- 入力される値はすべて整数
 
### Sample Explanation 1

$ X=11 $ としたときに条件を満たす色の塗り方が存在するか考えます。頂点 $ 1,3 $ を赤、頂点 $ 2 $ を青で塗った場合、同じ色の頂点を結ぶ単純パス $ 1-2-3 $ の重みが $ 5+6=11 $ となります。これが同じ色の頂点を結ぶ単純パスの重みの最小値となるのでこの塗り分け方は条件を満たしています。 $ X $ が $ 12 $ 以上のとき、条件を満たす塗り分け方が存在しないことが示せます。よって答えは $ 11 $ となります。

## 样例 #1

### 输入

```
3 3

1 2 5

2 3 6

1 3 12```

### 输出

```
11```

## 样例 #2

### 输入

```
10 20

7 10 982219000

3 10 968366179

2 4 992330437

5 6 984414664

2 8 897295423

7 9 155604979

6 8 958833005

2 3 973209957

3 7 985173062

6 10 963895817

2 10 986243534

4 5 721724794

1 3 657562445

1 6 566370694

1 4 988050146

1 9 967817807

4 9 796531581

5 9 983960054

1 10 964450079

8 9 959369491```

### 输出

```
952136560```

## 样例 #3

### 输入

```
10 20

5 6 871895994

8 10 873709822

3 5 454175869

6 10 980782191

2 6 901290987

1 8 298092290

4 8 693116157

4 5 947939338

7 8 934395075

7 9 759563833

5 8 779870031

4 6 919637355

2 9 822858749

4 10 855497285

3 7 954942051

1 2 950411658

4 7 665939990

3 4 634533617

5 7 908372507

1 9 591466693```

### 输出

```
759563833```

# AI分析结果

### 题目内容重写

#### [ARC165C] Social Distance on Graph

**题目描述**

给定一个由 $N$ 个顶点组成的简单连通无向图，顶点编号为 $1$ 到 $N$。图中有 $M$ 条带权边，第 $i$ 条边连接顶点 $A_i$ 和 $B_i$，权重为 $W_i$。定义两个顶点之间的简单路径的权重为该路径上所有边的权重之和。

现在需要给每个顶点涂上红色或蓝色，要求满足以下条件：对于任意两个涂有相同颜色的不同顶点，它们之间的所有简单路径的权重都至少为 $X$。求满足条件的最大整数 $X$。

**说明/提示**

- 约束条件：
  - $3 \leq N \leq 2 \times 10^5$
  - $N-1 \leq M \leq \min(\frac{N(N-1)}{2}, 2 \times 10^5)$
  - $1 \leq A_i < B_i \leq N$
  - $1 \leq W_i \leq 10^9$
  - 给定的图是简单连通无向图
  - 输入的所有值都是整数

**样例 #1**

输入：
```
3 3
1 2 5
2 3 6
1 3 12
```
输出：
```
11
```

**样例 #2**

输入：
```
10 20
7 10 982219000
3 10 968366179
2 4 992330437
5 6 984414664
2 8 897295423
7 9 155604979
6 8 958833005
2 3 973209957
3 7 985173062
6 10 963895817
2 10 986243534
4 5 721724794
1 3 657562445
1 6 566370694
1 4 988050146
1 9 967817807
4 9 796531581
5 9 983960054
1 10 964450079
8 9 959369491
```
输出：
```
952136560
```

**样例 #3**

输入：
```
10 20
5 6 871895994
8 10 873709822
3 5 454175869
6 10 980782191
2 6 901290987
1 8 298092290
4 8 693116157
4 5 947939338
7 8 934395075
7 9 759563833
5 8 779870031
4 6 919637355
2 9 822858749
4 10 855497285
3 7 954942051
1 2 950411658
4 7 665939990
3 4 634533617
5 7 908372507
1 9 591466693
```
输出：
```
759563833
```

### 题解分析与结论

#### 关键思路与技巧

1. **二分答案**：大多数题解采用了二分答案的思路，通过二分查找最大的 $X$，使得在删除所有边权小于 $X$ 的边后，剩下的图可以二分图染色。
2. **二分图判定**：在二分答案的过程中，判定图是否为二分图是关键。通常使用 DFS 或 BFS 进行染色判定。
3. **预处理**：部分题解通过预处理每个点的最小边权和次小边权，来确定二分答案的上界，从而减少二分查找的范围。
4. **并查集**：部分题解使用并查集来维护二分图的染色关系，避免出现奇环。

#### 最优题解推荐

1. **作者：翼德天尊 (赞：5)**
   - **星级**：5星
   - **关键亮点**：使用了二分答案和二分图判定的经典组合，预处理了每个点的最小边权和次小边权，优化了二分查找的上界，代码清晰且高效。
   - **核心代码**：
     ```cpp
     bool check(ll x){
         flag=1;
         for (int i=1;i<=n;i++) col[i]=0;
         for (int i=1;i<=n;i++)
             if (!col[i]) col[i]=1,dfs(i,x);
         return flag;
     }
     ```

2. **作者：reclusive (赞：4)**
   - **星级**：4星
   - **关键亮点**：同样采用了二分答案和二分图判定的思路，代码简洁明了，适合初学者理解。
   - **核心代码**：
     ```cpp
     bool check(LL mid){
         memset(color,0,sizeof(color));
         for(LL i=1;i<=n;i++)
             if(!color[i])
                 if(!dfs(i,mid,1))
                     return false;
         return true;
     }
     ```

3. **作者：_sunkuangzheng_ (赞：1)**
   - **星级**：4星
   - **关键亮点**：使用了二分答案和 BFS 进行二分图判定，代码结构清晰，适合快速实现。
   - **核心代码**：
     ```cpp
     bool bfs(int s,int x){
         queue<int> q;
         q.push(s),col[s] = 0;
         while(!q.empty()){
             int u = q.front();q.pop();
             for(auto [w,v] : g[u]){
                 if(w >= x) continue;
                 if(col[v] == -1) col[v] = col[u] ^ 1,q.push(v);
                 else if(col[u] == col[v]) return 0;
             }
         }return 1;
     }
     ```

#### 拓展思路与推荐题目

1. **拓展思路**：在处理图论问题时，二分答案与二分图判定的组合是一种常见且有效的策略。此外，预处理和并查集的使用可以进一步优化算法的时间和空间复杂度。
2. **推荐题目**：
   - [P1525 [NOIP2010 提高组] 关押罪犯](https://www.luogu.com.cn/problem/P1525)
   - [P3386 【模板】二分图匹配](https://www.luogu.com.cn/problem/P3386)
   - [P1967 [NOIP2013 提高组] 货车运输](https://www.luogu.com.cn/problem/P1967)

#### 个人心得摘录

- **翼德天尊**：通过预处理每个点的最小边权和次小边权，可以显著减少二分查找的范围，这是优化二分答案的关键。
- **reclusive**：二分答案的判定函数需要仔细设计，确保在每次二分时都能正确判断当前答案是否可行。
- **_sunkuangzheng_**：BFS 实现二分图判定时，需要注意图的连通性，确保所有点都被正确染色。

---
处理用时：60.29秒
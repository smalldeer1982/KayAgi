# 题目信息

# [ARC161D] Everywhere is Sparser than Whole (Construction)

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc161/tasks/arc161_d

頂点集合が空でない単純無向グラフの**密度**を $ \displaystyle\frac{(辺数)}{(頂点数)} $ と定義します．

正整数 $ N,\ D $ が与えられます． $ N $ 頂点 $ DN $ 辺の単純無向グラフ $ G $ であって，以下の条件を満たすものが存在するかどうかを判定し，存在するならそのようなグラフを $ 1 $ つ求めてください．

**条件:** $ G $ の頂点集合を $ V $ とする． $ V $ の任意の空でない**真**部分集合 $ X $ に対して，$ X $ による $ G $ の誘導部分グラフの密度は $ D $ **未満**である．

 誘導部分グラフとは

 グラフ $ G $ の頂点部分集合 $ X $ に対して，$ X $ による $ G $ の**誘導部分グラフ**とは，「頂点集合が $ X $ であり，辺集合が『 $ G $ の辺であって $ X $ 内の $ 2 $ 頂点を結ぶもの全体』であるグラフ」を指します． 上記の条件では，頂点部分集合として空集合でも全体でもないもののみを考えていることに注意してください．

## 说明/提示

### 制約

- $ N\ \geq\ 1 $
- $ D\ \geq\ 1 $
- $ DN\ \leq\ 5\ \times\ 10^4 $
 
### Sample Explanation 1

出力されたグラフの頂点集合は $ \{1,\ 2,\ 3\} $，辺集合は $ \{(1,\ 2),\ (1,\ 3),\ (2,\ 3)\} $ であり，単純です． 頂点集合の空でない真部分集合 $ X $ としては $ \{1\},\ \{2\},\ \{3\},\ \{1,\ 2\},\ \{1,\ 3\},\ \{2,\ 3\} $ の $ 6 $ 通りが考えられ， - $ X\ =\ \{1\},\ \{2\},\ \{3\} $ のとき，$ X $ による誘導部分グラフの辺集合は空集合であり，その密度は $ \displaystyle\frac{0}{1}\ =\ 0 $， - $ X\ =\ \{1,\ 2\},\ \{1,\ 3\},\ \{2,\ 3\} $ のとき，$ X $ による誘導部分グラフの辺集合はそれぞれ $ \{(1,\ 2)\},\ \{(1,\ 3)\},\ \{(2,\ 3)\} $ であり，いずれも密度は $ \displaystyle\frac{1}{2} $ です． 全ての場合に対して誘導部分グラフの密度は $ D\ =\ 1 $ 未満であり，このグラフは条件を満たします．

### Sample Explanation 2

$ 4 $ 頂点 $ 8 $ 辺の単純無向グラフは存在しません．

## 样例 #1

### 输入

```
3 1```

### 输出

```
Yes

1 2

1 3

2 3```

## 样例 #2

### 输入

```
4 2```

### 输出

```
No```

# AI分析结果

### 题目翻译
#### [ARC161D] 处处都比整体稀疏（构造）

##### 题目描述
[problemUrl]: https://atcoder.jp/contests/arc161/tasks/arc161_d

将顶点集合非空的简单无向图的**密度**定义为 $\frac{（边数）}{（顶点数）}$。

给定正整数 $N$、$D$。判断是否存在一个 $N$ 个顶点、$DN$ 条边的简单无向图 $G$ 满足以下条件，如果存在则求出这样的一个图。

**条件**：设 $G$ 的顶点集合为 $V$。对于 $V$ 的任意非空**真**子集 $X$，由 $X$ 导出的 $G$ 的子图的密度小于 $D$。

**导出子图**：
对于图 $G$ 的顶点子集 $X$，由 $X$ 导出的 $G$ 的**导出子图**是指「顶点集合为 $X$，边集合为『$G$ 中连接 $X$ 内两个顶点的所有边』的图」。请注意，上述条件中仅考虑既非空集也非全集的顶点子集。

##### 说明/提示
- **制约条件**
  - $N \geq 1$
  - $D \geq 1$
  - $DN \leq 5 \times 10^4$
- **样例解释 1**
输出的图的顶点集合为 $\{1, 2, 3\}$，边集合为 $\{(1, 2), (1, 3), (2, 3)\}$，是简单图。顶点集合的非空真子集 $X$ 有 $\{1\}, \{2\}, \{3\}, \{1, 2\}, \{1, 3\}, \{2, 3\}$ 这 6 种情况：
  - 当 $X = \{1\}, \{2\}, \{3\}$ 时，由 $X$ 导出的子图的边集合为空集，其密度为 $\frac{0}{1} = 0$。
  - 当 $X = \{1, 2\}, \{1, 3\}, \{2, 3\}$ 时，由 $X$ 导出的子图的边集合分别为 $\{(1, 2)\}, \{(1, 3)\}, \{(2, 3)\}$，密度均为 $\frac{1}{2}$。
在所有情况下，导出子图的密度都小于 $D = 1$，该图满足条件。
- **样例解释 2**
不存在 4 个顶点、8 条边的简单无向图。

##### 样例 #1
- **输入**
```
3 1
```
- **输出**
```
Yes
1 2
1 3
2 3
```

##### 样例 #2
- **输入**
```
4 2
```
- **输出**
```
No
```

### 综合分析与结论
这些题解的核心思路较为一致，都先判断无解条件，即当 $DN > \frac{N(N - 1)}{2}$ （等价于 $D > \frac{N - 1}{2}$）时，由于无法构造出 $DN$ 条边的简单无向图，所以无解。在有解的情况下，通过让每个点的度数相同来构造图，通常是让每个点向后面的 $D$ 个点连边（超出 $N$ 则从 1 开始），以此保证子图的密度小于 $D$。

### 所选题解
- **incra（4星）**
  - **关键亮点**：思路清晰，不仅给出了无解判断条件，还对有解情况进行了详细证明，代码简洁易懂。
  - **个人心得**：“第一次做出 ARC 的 D 题欸”，体现了做出难题的成就感。

### 重点代码
```cpp
#include <iostream>
#include <cstring>
#include <vector>
#include <algorithm>
#include <map>
#include <set>
#define x first
#define y second
using namespace std;
typedef long long LL;
typedef pair <int,int> PII;
int n,d;
int main () {
    cin >> n >> d;
    if (d * n > (LL)n * (n - 1) / 2) {
        puts ("No");
        return 0;
    }
    puts ("Yes");
    for (int len = 1;len <= d;len++) {
        for (int i = 1;i <= n;i++) {
            int ni = (i + len - 1) % n + 1;
            cout << i << ' ' << ni << endl;
        }
    }
    return 0;
}
```
**核心实现思想**：先判断是否满足无解条件，若满足则输出 `No` 并结束程序。若有解，则通过两层循环进行边的构造，外层循环控制迭代轮数，内层循环对每个点进行操作，将点 $i$ 与 $(i + len - 1) \bmod n + 1$ 相连。

### 最优关键思路或技巧
- **无解判断**：利用简单无向图边数的上限 $\frac{N(N - 1)}{2}$ 来判断是否有解。
- **构造图的方式**：通过让每个点的度数相同，使图的结构更加平衡，从而保证子图的密度小于 $D$。

### 可拓展之处
同类型题目通常是图的构造问题，可能会改变图的密度定义、子图的限制条件等。解题套路一般是先分析无解条件，再通过合理的构造方式满足题目要求，关键在于找到一种平衡的构造方法，使得子图的性质满足条件。

### 推荐题目
- [P1113 杂务](https://www.luogu.com.cn/problem/P1113)
- [P1347 排序](https://www.luogu.com.cn/problem/P1347)
- [P1807 最长路](https://www.luogu.com.cn/problem/P1807)

---
处理用时：32.21秒
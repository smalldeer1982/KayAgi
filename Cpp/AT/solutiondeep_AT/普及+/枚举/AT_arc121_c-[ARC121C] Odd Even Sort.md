# 题目信息

# [ARC121C] Odd Even Sort

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc121/tasks/arc121_c

$ (1,2,\ \ldots,\ N) $ を並び替えた数列 $ p $ が与えられます。 はじめ、$ p $ の第 $ n $ 項は $ p_{n} $ です。

あなたの目的は $ N^2 $ 回以下 *操作* を行い $ p $ を昇順に並び替えることです。 あなたは操作により以下のように $ p $ を変更することができます。

- **奇数** 回目の操作では $ 1 $ 以上 $ N-1 $ 以下の **奇数** $ n $ を選んで $ p_n $ と $ p_{n+1} $ を入れ替えます。
- **偶数** 回目の操作では $ 2 $ 以上 $ N-1 $ 以下の **偶数** $ n $ を選んで $ p_n $ と $ p_{n+1} $ を入れ替えます。

この問題の制約下で必ず目的を達成できることが証明できます。 そのような操作列を $ 1 $ つ求めてください。

$ T $ 個のテストケースが与えられるのでそれぞれについて答えを求めてください。

## 说明/提示

### 制約

- 与えられる入力は全て整数
- $ 1\ \leq\ T\ \leq\ 250 $
- $ 2\ \leq\ N\ \leq\ 500 $
- $ 1\ \leq\ p_i\ \leq\ N $
- $ p $ は $ (1,2,\ldots,N) $ を並び替えて得られる。
- $ 1 $ つの入力ファイルにおいて $ N $ の総和は $ 500 $ を超えない。

### Sample Explanation 1

\- $ 1 $ つ目のテストケースについて説明します。 - $ 1 $ 回目の操作で $ 1 $ を選ぶと $ p $ は $ (1,2,3,5,4) $ となります。 - $ 2 $ 回目の操作で $ 4 $ を選ぶと $ p $ は $ (1,2,3,4,5) $ となります。 - $ (1,4) $ は操作列として正しいですが、$ (4,1) $ は操作列として正しくないことに注意してください。 - 操作を $ 1 $ 度も行わなくともよいこと、操作回数を最小にする必要はないことに注意してください。

## 样例 #1

### 输入

```
2

5

2 1 3 5 4

2

1 2```

### 输出

```
2

1 4

0```

# AI分析结果

### 题目翻译
给定一个由 $(1, 2, \ldots, N)$ 重新排列得到的数列 $p$。初始时，$p$ 的第 $n$ 项为 $p_{n}$。

你的目标是通过不超过 $N^2$ 次的 *操作* 将 $p$ 按升序排列。你可以通过以下操作来改变 $p$：
- **奇数次** 操作中，选择一个 $1$ 到 $N - 1$ 之间的 **奇数** $n$，交换 $p_n$ 和 $p_{n + 1}$。
- **偶数次** 操作中，选择一个 $2$ 到 $N - 1$ 之间的 **偶数** $n$，交换 $p_n$ 和 $p_{n + 1}$。

可以证明，在该问题的约束条件下，一定可以达成目标。请找出这样的一个操作序列。

给定 $T$ 个测试用例，请分别求出每个测试用例的答案。

### 综合分析与结论
这些题解的核心思路都是利用题目给定的不超过 $N^2$ 次操作的宽松条件，采用类似冒泡排序或选择排序的方法对数列进行排序。在操作过程中，都需要处理当前操作步数的奇偶性与要交换元素下标的奇偶性不一致的情况，也就是浪费步数来调整奇偶性。

| 作者 | 思路 | 算法要点 | 解决难点 | 评分 |
| --- | --- | --- | --- | --- |
| lmy_2011 | 维护一个下标，使其一直处于与当前步数奇偶性相反的位置，避免浪费步数，采用类似冒泡排序的操作 | 维护下标 $cur$，递归处理，根据奇偶性和元素位置进行交换 | 处理当前步数奇偶性与要交换元素下标奇偶性不一致的情况 | 3星 |
| promise_ | 分别对奇数位置和偶数位置的元素进行遍历，若相邻元素不满足升序关系则交换 | 遍历奇数和偶数位置，进行相邻元素比较和交换 | 无详细处理奇偶性不一致的情况 | 2星 |
| _luanyi_ | 从大到小依次将数往右移，当操作步数奇偶性与元素下标奇偶性不一致时，通过操作最左边的位置浪费步数 | 选择排序思想，根据操作步数奇偶性和元素下标奇偶性进行不同的浪费步数操作 | 防止死循环，针对不同奇偶性给出不同操作序列 | 3星 |
| wzt2012 | 依次将 $1, 2, 3, \ldots$ 换到对应的位置，当目标数字位置与操作步数奇偶性不一致时，通过操作目标数字及其前一位浪费步数 | 递归处理，根据奇偶性和元素位置进行交换 | 处理奇偶性不一致的情况，$n = 3$ 时特判 | 3星 |

### 通用建议与扩展思路
- **关键思路与技巧**：在处理奇偶性不一致的情况时，可以通过浪费一定的操作步数来调整奇偶性，使得后续操作能够继续进行。同时，可以采用递归的方式来处理子问题，简化代码逻辑。
- **拓展**：同类型题目可能会有不同的操作规则和约束条件，例如操作次数限制、操作位置的范围等。解题的关键在于分析操作规则，找到合适的排序方法，并处理好特殊情况。可以考虑使用贪心算法、模拟算法等。

### 推荐洛谷题目
1. [P1116 车厢重组](https://www.luogu.com.cn/problem/P1116)：考察冒泡排序的基本应用。
2. [P1271 选举学生会](https://www.luogu.com.cn/problem/P1271)：考察排序算法的应用。
3. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)：考察排序和去重的操作。

### 个人心得摘录
- _luanyi_：“为什么是先 2 再 1 再 2 呢？实际上是我这么写了之后发现某样例不会死循环了之后交上去直接过了。” 总结：在调试过程中，可以通过尝试不同的操作序列来解决死循环等问题，实践是检验代码正确性的重要方法。

---
处理用时：23.92秒
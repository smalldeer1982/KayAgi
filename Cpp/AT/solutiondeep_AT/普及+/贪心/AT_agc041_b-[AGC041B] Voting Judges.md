# 题目信息

# [AGC041B] Voting Judges

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc041/tasks/agc041_b

あるコンテストの開催に向けて $ N $ 問の問題が提案されました。はじめ、問題 $ i $ のスコアは整数 $ A_i $ です。

これから、$ M $ 人のジャッジが好きな問題に投票します。各ジャッジは、他のジャッジとは独立にちょうど $ V $ 問を選び、それらの問題のスコアを $ 1 $ ずつ上げます。

$ M $ 人のジャッジ全員が投票を行ったあと、$ N $ 問の問題がスコアの降順に並べられ、最初の $ P $ 問がコンテストの問題セットに採用されます。 同スコアの問題間の順序は、ジャッジ長が任意に決定します。

$ N $ 問のうち、問題セットに採用される可能性を持つ問題は何問あるでしょうか？

## 说明/提示

### 制約

- $ 2\ \le\ N\ \le\ 10^5 $
- $ 1\ \le\ M\ \le\ 10^9 $
- $ 1\ \le\ V\ \le\ N\ -\ 1 $
- $ 1\ \le\ P\ \le\ N\ -\ 1 $
- $ 0\ \le\ A_i\ \le\ 10^9 $

### Sample Explanation 1

$ 1 $ 人しかいないジャッジが問題 $ 2,5 $ に投票した場合、各問のスコアは $ 2 $ $ 2 $ $ 1 $ $ 3 $ $ 1 $ $ 2 $ となり、問題 $ 4 $、そして問題 $ 1,2,6 $ のうちの $ 1 $ 問が採用されます。 ジャッジが問題 $ 3,4 $ に投票した場合、各問のスコアは $ 2 $ $ 1 $ $ 2 $ $ 4 $ $ 0 $ $ 2 $ となり、問題 $ 4 $、そして問題 $ 1,3,6 $ のうちの $ 1 $ 問が採用されます。 よって、問題 $ 1,2,3,4,6 $ には採用される可能性があります。一方で、問題 $ 5 $ には採用される可能性はありません。

### Sample Explanation 2

採用される可能性があるのは問題 $ 1,4,6 $ のみです。

## 样例 #1

### 输入

```
6 1 2 2

2 1 1 3 0 2```

### 输出

```
5```

## 样例 #2

### 输入

```
6 1 5 2

2 1 1 3 0 2```

### 输出

```
3```

## 样例 #3

### 输入

```
10 4 8 5

7 2 3 6 1 6 5 4 6 5```

### 输出

```
8```

# AI分析结果

### 题目翻译

某竞赛即将举办，提出了 $N$ 道题目。最初，第 $i$ 道题目的分数为整数 $A_i$。

接下来，$M$ 位评委将对喜欢的题目进行投票。每位评委独立地选择恰好 $V$ 道题目，并将这些题目的分数各增加 $1$。

所有评委完成投票后，$N$ 道题目将按分数从高到低排序，前 $P$ 道题目将被选入竞赛的题目集中。如果有多道题目分数相同，评委长将任意决定它们的顺序。

问：$N$ 道题目中，有多少道题目有可能被选入题目集？

### 样例解释

**样例 1**  
输入：
```
6 1 2 2
2 1 1 3 0 2
```
输出：
```
5
```
解释：只有问题 $5$ 不可能被选入题目集。

**样例 2**  
输入：
```
6 1 5 2
2 1 1 3 0 2
```
输出：
```
3
```
解释：只有问题 $1,4,6$ 有可能被选入题目集。

### 题解分析与结论

#### 题解 1：123456zmy (4星)
**关键亮点**：
1. **排序与贪心策略**：首先对数组进行降序排序，前 $P$ 个元素肯定能被选上，之后的元素通过贪心策略判断是否有可能进入前 $P$。
2. **数学计算**：通过计算剩余投票机会的分配，判断是否能让某个元素超过第 $P$ 个元素。

**代码核心思想**：
```cpp
sort(a+1,a+n+1,cmp);
for(int i=p+1;i<=n;i++) {
    if(a[i]+m<a[p]) break;
    if(v<=p+n-i) ++ans;
    else if(((v-p-n+i)*m-a1-1)/(i-p)+1+a[p]<=a[i]+m) ++ans;
    a1+=a[p]-a[i];
}
```
**总结**：通过排序和贪心策略，结合数学计算，高效地判断每个元素是否有可能进入前 $P$。

#### 题解 2：Erica_N_Contina (4星)
**关键亮点**：
1. **排序与贪心策略**：同样先对数组进行降序排序，前 $P$ 个元素肯定能被选上。
2. **机会分配**：通过将投票机会分配给前 $P-1$ 个元素和当前元素，判断是否能让当前元素进入前 $P$。

**代码核心思想**：
```cpp
sort(a+1,a+n+1,cmp);
for(int i=p+1;i<=n;i++) {
    if(a[i]+m<a[p]) break;
    if(v<=p+n-i) ans++;
    else if((t*m-cha-1)/(i-p)+1+a[p]<=a[i]+m) ans++;
    cha+=a[p]-a[i];
}
```
**总结**：通过排序和贪心策略，结合机会分配，判断每个元素是否有可能进入前 $P$。

### 最优关键思路
1. **排序**：首先对数组进行降序排序，便于后续处理。
2. **贪心策略**：对于前 $P$ 个元素，直接判断其是否可能被选上；对于之后的元素，通过贪心策略判断是否有可能进入前 $P$。
3. **数学计算**：通过计算剩余投票机会的分配，判断是否能让某个元素超过第 $P$ 个元素。

### 可拓展之处
1. **类似题目**：可以扩展到其他需要排序和贪心策略的题目，如选择最优子集、分配资源等。
2. **算法套路**：排序+贪心+数学计算是一种常见的解题套路，适用于多种场景。

### 推荐题目
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
3. [P1803 凌乱的yyy / 线段覆盖](https://www.luogu.com.cn/problem/P1803)

---
处理用时：29.15秒
# 题目信息

# [ABC019C] 高橋くんと魔法の箱

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc019/tasks/abc019_3

高橋くんは魔法の箱を持っています。

この箱に整数を入れるとそれに対応した整数が出てきます。

出てくる整数は入れた整数だけによって決まり、同じ整数を入れると毎回同じ結果が得られます。

高橋くんは任意の整数 $ x $ について、$ x $ を入れた時と $ 2x $ を入れた時に出てくる整数が同じであることに気づきました。

高橋くんが入れた整数が $ N $ 個与えられるので、最大で何種類の整数が出てくるか答えてください。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ 20 $ 点分のテストケースにおいて、$ 1\ ≦\ N\ ≦\ 3,000 $ を満たす。
- 別の $ 30 $ 点分のテストケースにおいて、$ 1\ ≦\ a_i\ ≦\ 5*10^5\ (\ 1\ ≦\ i\ ≦\ N) $ を満たす。

### Sample Explanation 1

$ 2 $ を入れた時に出てくる整数は、$ 1 $ を入れた時に出てくる整数と等しいので、最大で $ 2 $ 種類の整数が出てきます。

### Sample Explanation 2

すべて同じ整数が出てきます。

### Sample Explanation 3

出てくる整数が全て違う可能性があります。

## 样例 #1

### 输入

```
3

1 2 3```

### 输出

```
2```

## 样例 #2

### 输入

```
4

2 4 8 16```

### 输出

```
1```

## 样例 #3

### 输入

```
4

2 3 5 7```

### 输出

```
4```

# AI分析结果

### 题目重写

#### [ABC019C] 高橋くん与魔法箱

**题目描述**

高橋くん有一个魔法箱。当向箱子里放入一个整数时，箱子会返回一个对应的整数。返回的整数仅由放入的整数决定，且每次放入相同的整数都会得到相同的结果。

高橋くん注意到，对于任意整数 \( x \)，放入 \( x \) 和放入 \( 2x \) 时，箱子返回的整数是相同的。

现在给定 \( N \) 个整数，求这些整数通过魔法箱处理后，最多能返回多少种不同的整数。

**输入格式**

第一行输入一个整数 \( N \)，表示整数的个数。

第二行输入 \( N \) 个整数，表示高橋くん放入魔法箱的整数。

**输出格式**

输出一个整数，表示最多能返回的不同整数的个数。

**样例**

**样例输入1**

```
3
1 2 3
```

**样例输出1**

```
2
```

**样例输入2**

```
4
2 4 8 16
```

**样例输出2**

```
1
```

**样例输入3**

```
4
2 3 5 7
```

**样例输出3**

```
4
```

**说明/提示**

**部分点**

- 20 分的测试用例满足 \( 1 \leq N \leq 3,000 \)。
- 30 分的测试用例满足 \( 1 \leq a_i \leq 5 \times 10^5 \)（\( 1 \leq i \leq N \)）。

### 算法分类

**数学**

### 题解分析与结论

#### 题解对比

1. **Wang1006 的题解**
   - **思路**：将每个数不断除以 2 直到变为奇数，然后使用 `set` 去重，最后输出 `set` 的大小。
   - **亮点**：代码简洁，直接利用 `set` 的去重功能，时间复杂度为 \( O(N \log N) \)。
   - **评分**：★★★★☆

2. **Failure_Terminator 的题解**
   - **思路**：使用 `lowbit` 操作去除 2 的因子，然后排序并使用 `unique` 去重。
   - **亮点**：使用 `lowbit` 操作优化了去除 2 的因子的过程，时间复杂度为 \( O(N \log N) \)。
   - **评分**：★★★★☆

3. **yinpeichu2021 的题解**
   - **思路**：将每个数不断除以 2 直到变为奇数，然后使用 `set` 去重。
   - **亮点**：代码简洁，直接利用 `set` 的去重功能，时间复杂度为 \( O(N \log N) \)。
   - **评分**：★★★★☆

4. **sto_yyrdxh_orz 的题解**
   - **思路**：先将所有数插入 `set`，然后遍历 `set` 删除 \( 2x \) 的数。
   - **亮点**：通过删除 \( 2x \) 的数来保证唯一性，时间复杂度为 \( O(N \log N) \)。
   - **评分**：★★★☆☆

5. **Otomachi_Una_ 的题解**
   - **思路**：将每个数不断除以 2 直到变为奇数，然后使用 `map` 记录是否出现过。
   - **亮点**：使用 `map` 记录出现过的数，时间复杂度为 \( O(N \log N) \)。
   - **评分**：★★★☆☆

6. **封禁用户的题解**
   - **思路**：将每个数不断除以 2 直到变为奇数，然后使用 `set` 去重。
   - **亮点**：代码简洁，直接利用 `set` 的去重功能，时间复杂度为 \( O(N \log N) \)。
   - **评分**：★★★★☆

#### 最优思路

**关键思路**：将每个数不断除以 2 直到变为奇数，然后使用 `set` 去重。这种方法简单直接，且时间复杂度较低。

**核心代码**：

```cpp
#include<iostream>
#include<set>
using namespace std;
set<int>s;
int n;
int f;
int main(){
    cin>>n;
    for(int i=1;i<=n;++i){
        cin>>f;
        while(f%2==0){ // 把因子 2 删掉
            f/=2;
        }
        s.insert(f); // 加入容器
    }
    cout<<s.size()<<endl; // 输出大小
}
```

### 拓展思路

**类似题目**：
1. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1048 采药](https://www.luogu.com.cn/problem/P1048)

这些题目都涉及到对数据进行处理并利用数据结构进行优化，适合进一步练习类似思路。

---
处理用时：30.40秒
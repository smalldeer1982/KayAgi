# 题目信息

# [ABC064D] Insertion

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc064/tasks/abc064_d

`(` と `)` で構成される $ N $ 文字の文字列 $ S $ が与えられる。$ S $ にいくつかの `(` または `)` を挿入することで正しい括弧列を作りたい。  
 ただし、正しい括弧列は次のように定義されている：

- `()` は正しい括弧列である。
- $ X $ が正しい括弧列であるとき、`(`、$ X $、`)` をこの順につなげたものは正しい括弧列である。
- $ X $、$ Y $ が正しい括弧列であるとき、$ X $ と $ Y $ をこの順につなげたものは正しい括弧列である。
- それ以外の括弧列は正しくない。

そのとき、作れる最も文字数が少ない正しい括弧列を求めなさい。このようなものが複数ある場合は、辞書順最小のものを求めなさい。

## 说明/提示

### 制約

- $ S $ の長さは $ N $ である。
- $ 1\ <\ =\ N\ <\ =\ 100 $
- $ S $ は `(` と `)` のみで構成されている。

## 样例 #1

### 输入

```
3

())```

### 输出

```
(())```

## 样例 #2

### 输入

```
6

)))())```

### 输出

```
(((()))())```

## 样例 #3

### 输入

```
8

))))((((```

### 输出

```
(((())))(((())))```

# AI分析结果

### 题目内容重写

#### [ABC064D] Insertion

**题目描述**

给定一个由 `(` 和 `)` 构成的长度为 $N$ 的字符串 $S$。通过在 $S$ 中插入若干个 `(` 或 `)`，构造一个合法的括号序列。  
合法的括号序列定义如下：

- `()` 是合法的括号序列。
- 如果 $X$ 是合法的括号序列，那么 `(`、$X$、`)` 按顺序连接起来也是合法的括号序列。
- 如果 $X$ 和 $Y$ 都是合法的括号序列，那么 $X$ 和 $Y$ 按顺序连接起来也是合法的括号序列。
- 其他情况均不合法。

要求构造的合法括号序列长度最短，且如果有多个满足条件的序列，选择字典序最小的那个。

**输入格式**

- 第一行输入整数 $N$，表示字符串 $S$ 的长度。
- 第二行输入字符串 $S$。

**输出格式**

输出满足条件的最短合法括号序列。

**样例**

**样例 1**

输入：
```
3
())
```
输出：
```
(())
```

**样例 2**

输入：
```
6
)))())
```
输出：
```
(((()))())
```

**样例 3**

输入：
```
8
))))((((
```
输出：
```
(((())))(((())))
```

### 算法分类

**字符串**、**贪心**

### 题解分析与结论

#### 综合分析

本题的核心是通过插入最少的括号使得字符串成为合法的括号序列。题解中主要采用了贪心策略，通过统计未匹配的括号数量，然后在字符串的开头和结尾分别补充相应的括号。

#### 题解对比

1. **TRZ_2007**  
   - **星级**：4  
   - **关键亮点**：通过两个变量 `cut1` 和 `cut2` 分别统计需要补充的 `)` 和 `(` 的数量，并在字符串的开头和结尾分别补充。  
   - **核心代码**：
     ```cpp
     for(int i=1;i<=n;i++)
     {
         if(str[i]=='(')	cut1++;
         if(str[i]==')')
         {
             cut1--;
             if(cut1<0) cut2++,cut1 = 0;
         }
     }
     for(int i=1;i<=cut2;i++) cout<<"(";
     for(int i=1;i<=n;i++) cout<<str[i];
     for(int i=1;i<=cut1;i++) cout<<")";
     ```

2. **W_fly_K**  
   - **星级**：4  
   - **关键亮点**：使用 `left` 和 `right` 两个变量分别统计需要补充的 `(` 和 `)` 的数量，并在字符串的开头和结尾分别补充。  
   - **核心代码**：
     ```cpp
     for(int i=0;i<n;i++)
     {
         if(a[i]=='(') left++;
         if(a[i]==')')
         {
             left--;
             if(left<0) left=0, right++;
         }
     }
     for(int i=1;i<=right;i++) cout<<"(";
     cout<<a;
     for(int i=1;i<=left;i++) cout<<")";
     ```

3. **tZEROちゃん**  
   - **星级**：4  
   - **关键亮点**：使用栈来匹配括号，统计未匹配的括号数量，并在字符串的开头和结尾分别补充。  
   - **核心代码**：
     ```cpp
     for (int i = 1; i <= n; i++) {
         char ch; cin >> ch;
         s += ch; 
         if (ch == '(') stk.push(0);
         if (ch == ')') {
             if (stk.empty() == false) stk.pop();
             else lft++;
         }
     }
     while (stk.empty() == false) {
         stk.pop();
         rgt++;
     }
     while (lft--) cout << '(';
     cout << s;
     while (rgt--) cout << ')';
     ```

### 最优思路与技巧

1. **贪心策略**：通过统计未匹配的括号数量，确定需要补充的括号数量。
2. **栈的使用**：利用栈来匹配括号，确保统计的准确性。
3. **字符串处理**：在字符串的开头和结尾分别补充括号，确保构造的序列最短且字典序最小。

### 拓展思路

- **类似题目**：可以通过类似的方法解决其他括号匹配问题，如判断括号序列是否合法、求最长合法括号子序列等。
- **优化**：可以进一步优化代码，减少变量使用，提高代码的可读性和效率。

### 推荐题目

1. [P1739 表达式括号匹配](https://www.luogu.com.cn/problem/P1739)
2. [P1044 栈](https://www.luogu.com.cn/problem/P1044)
3. [P1241 括号序列](https://www.luogu.com.cn/problem/P1241)

---
处理用时：30.15秒
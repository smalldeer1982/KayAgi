# 题目信息

# [ABC084C] Special Trains

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc084/tasks/abc084_c

Atcoder国に、 $ 1 $ 本の東西方向に走る鉄道が完成しました。

この鉄道には $ N $ 個の駅があり、西から順に $ 1 $,$ 2 $,$ ... $,$ N $ の番号がついています。

明日、鉄道の開通式が開かれます。

この鉄道では、$ 1≦i≦N-1 $ を満たす全ての整数 $ i $ に対して、駅 $ i $ から駅 $ i+1 $ に、$ C_i $ 秒で向かう列車が運行されます。ただし、これら以外の列車は運行されません。

駅 $ i $ から駅 $ i+1 $ に移動する列車のうち最初の列車は、開通式開始 $ S_i $ 秒後に駅 $ i $ を発車し、その後は $ F_i $ 秒おきに駅 $ i $ を発車する列車があります。

また、$ S_i $ は $ F_i $ で割り切れることが保証されます。

つまり、$ A％B $ で $ A $ を $ B $ で割った余りを表すとき、$ S_i≦t $,$ t％F_i=0 $ を満たす全ての $ t $ に対してのみ、開通式開始 $ t $ 秒後に駅 $ i $ を出発し、開通式開始 $ t+C_i $ 秒後に駅 $ i+1 $ に到着する列車があります。

列車の乗り降りにかかる時間を考えないとき、全ての駅 $ i $ に対して、開通式開始時に駅 $ i $ にいる場合、駅 $ N $ に到着できるのは最も早くて開通式開始何秒後か、答えてください。

## 说明/提示

### 制約

- $ 1≦N≦500 $
- $ 1≦C_i≦100 $
- $ 1≦S_i≦10^5 $
- $ 1≦F_i≦100 $
- $ S_i％F_i=0 $
- 入力は全て整数

### Sample Explanation 1

駅 $ 1 $ からは、以下のように移動します。 - 開通式開始 $ 5 $ 秒後に、駅 $ 2 $ に向かう列車に乗る。 - 開通式開始 $ 11 $ 秒後に、駅 $ 2 $ に到着する。 - 開通式開始 $ 11 $ 秒後に、駅 $ 3 $ に向かう列車に乗る。 - 開通式開始 $ 12 $ 秒後に、駅 $ 3 $ に到着する。 駅 $ 2 $ からは、以下のように移動します。 - 開通式開始 $ 10 $ 秒後に、駅 $ 3 $ に向かう列車に乗る。 - 開通式開始 $ 11 $ 秒後に、駅 $ 3 $ に到着する。 駅 $ 3 $ に対しても、$ 0 $ を出力しなければならないことに注意してください。

## 样例 #1

### 输入

```
3

6 5 1

1 10 1```

### 输出

```
12

11

0```

## 样例 #2

### 输入

```
4

12 24 6

52 16 4

99 2 2```

### 输出

```
187

167

101

0```

## 样例 #3

### 输入

```
4

12 13 1

44 17 17

66 4096 64```

### 输出

```
4162

4162

4162

0```

# AI分析结果

### 题目内容翻译

Atcoder国有一条东西方向的铁路，铁路有 $N$ 个车站，编号从西到东依次为 $1, 2, ..., N$。明天将举行铁路的开通仪式。

这条铁路的列车运行规则如下：
- 对于所有满足 $1 \leq i \leq N-1$ 的整数 $i$，从车站 $i$ 到车站 $i+1$ 的列车运行时间为 $C_i$ 秒。
- 从车站 $i$ 到车站 $i+1$ 的第一班列车在开通仪式开始后 $S_i$ 秒发车，之后每 $F_i$ 秒发一班列车。
- 保证 $S_i$ 是 $F_i$ 的倍数。

假设列车的换乘时间不计，对于每个车站 $i$，计算从车站 $i$ 出发的乘客最早能在开通仪式开始后多少秒到达车站 $N$。

### 算法分类
模拟

### 题解分析与结论

所有题解都采用了模拟的思路，核心思想是从每个车站出发，依次计算到达下一个车站的时间，直到终点站。难点在于如何计算等待下一班列车的时间。以下是各题解的对比：

1. **_wjr_** 的题解：
   - 思路清晰，代码简洁，直接模拟了从每个车站出发的过程。
   - 使用 `max(t, s[j])` 来确保当前时间不早于发车时间，然后通过 `t % f[j]` 计算等待时间。
   - 代码可读性较好，但未处理最后输出换行的问题。

2. **Fleeing_loser** 的题解：
   - 同样采用模拟思路，代码结构与 _wjr_ 类似。
   - 强调了岛国题目输出格式的特殊要求（换行）。
   - 代码中使用了 `int((x+f[j]-1)/f[j])*f[j]` 来计算等待时间，略显复杂。

3. **hyc1026** 的题解：
   - 思路与上述题解一致，代码结构相似。
   - 强调了 `j < n` 的条件，避免越界。
   - 代码简洁，但未处理输出格式问题。

4. **CharlesZiy** 的题解：
   - 使用了 `while` 循环来计算等待时间，逻辑清晰。
   - 代码结构较为复杂，但思路明确。
   - 未处理输出格式问题。

5. **eEfiuys** 的题解：
   - 使用了 `ceil` 函数计算等待时间，代码简洁。
   - 强调了时间复杂度为 $O(n^2)$。
   - 代码可读性较好，但未处理输出格式问题。

### 最优题解

**_wjr_** 的题解（4星）：
- 关键亮点：代码简洁，逻辑清晰，直接模拟了列车发车和等待时间。
- 核心代码：
  ```cpp
  for ( int i = 1 ; i < n ; i ++ )
  {
      int t = 0 ;
      for ( int j = i ; j < n ; j ++ )
      {
          t = max ( t , s[j] ) ;
          if ( t % f[j] != 0 ) t = t + f[j] - t % f[j] ;
          t += c[j] ;
      }
      cout << t << endl ;
  }
  ```

### 关键思路与技巧
- **等待时间计算**：通过 `max(t, s[j])` 确保当前时间不早于发车时间，然后通过 `t % f[j]` 计算等待时间。
- **模拟过程**：从每个车站出发，依次计算到达下一个车站的时间，直到终点站。

### 拓展与举一反三
- 类似题目：可以考虑多趟列车、换乘时间、不同方向的列车等复杂情况。
- 推荐题目：
  1. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047) - 模拟题，涉及区间处理。
  2. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056) - 模拟题，涉及排序和选择。
  3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060) - 模拟题，涉及时间管理和选择。

---
处理用时：29.03秒
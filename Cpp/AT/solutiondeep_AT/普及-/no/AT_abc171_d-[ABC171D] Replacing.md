# 题目信息

# [ABC171D] Replacing

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc171/tasks/abc171_d

あなたは、$ N $ 個の正整数 $ A_{1},\ A_{2},\ \cdots,\ A_{N} $ からなる数列 $ A $ を持っています。

あなたは、これから以下の操作を $ Q $ 回、続けて行います。

- $ i $ 回目の操作では、値が $ B_{i} $ である要素すべてを $ C_{i} $ に置き換えます。

すべての $ i $ $ (1\ \leq\ i\ \leq\ Q) $ に対して、$ i $ 回目の操作が行われた後の数列 $ A $ のすべての要素の和、$ S_{i} $ を求めてください。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\ \leq\ N,\ Q,\ A_{i},\ B_{i},\ C_{i}\ \leq\ 10^{5} $
- $ B_{i}\ \neq\ C_{i} $

### Sample Explanation 1

はじめ、数列 $ A $ は $ 1,2,3,4 $ です。 各操作後、 数列 $ A $ は以下のようになります。 - $ 2,\ 2,\ 3,\ 4 $ - $ 2,\ 2,\ 4,\ 4 $ - $ 4,\ 4,\ 4,\ 4 $

### Sample Explanation 2

数列 $ A $ に 要素の値が $ B_{i} $ であるものが $ 1 $ つも含まれていない可能性もあることに注意してください。

## 样例 #1

### 输入

```
4

1 2 3 4

3

1 2

3 4

2 4```

### 输出

```
11

12

16```

## 样例 #2

### 输入

```
4

1 1 1 1

3

1 2

2 1

3 5```

### 输出

```
8

4

4```

## 样例 #3

### 输入

```
2

1 2

3

1 100

2 100

100 1000```

### 输出

```
102

200

2000```

# AI分析结果

### 中文重写题目内容

【题目内容】
# [ABC171D] Replacing

## 题目描述

你有一个由 $ N $ 个正整数 $ A_{1},\ A_{2},\ \cdots,\ A_{N} $ 组成的数列 $ A $。

你将进行 $ Q $ 次操作，每次操作如下：

- 第 $ i $ 次操作中，将所有值为 $ B_{i} $ 的元素替换为 $ C_{i} $。

对于每个 $ i $ $ (1\ \leq\ i\ \leq\ Q) $，请输出第 $ i $ 次操作后数列 $ A $ 中所有元素的和 $ S_{i} $。

## 说明/提示

### 制約

- 输入均为整数
- $ 1\ \leq\ N,\ Q,\ A_{i},\ B_{i},\ C_{i}\ \leq\ 10^{5} $
- $ B_{i}\ \neq\ C_{i} $

### 样例解释 1

初始时，数列 $ A $ 为 $ 1,2,3,4 $。每次操作后，数列 $ A $ 变为：
- $ 2,\ 2,\ 3,\ 4 $
- $ 2,\ 2,\ 4,\ 4 $
- $ 4,\ 4,\ 4,\ 4 $

### 样例解释 2

注意，数列 $ A $ 中可能不存在值为 $ B_{i} $ 的元素。

## 样例 #1

### 输入

```
4

1 2 3 4

3

1 2

3 4

2 4```

### 输出

```
11

12

16```

## 样例 #2

### 输入

```
4

1 1 1 1

3

1 2

2 1

3 5```

### 输出

```
8

4

4```

## 样例 #3

### 输入

```
2

1 2

3

1 100

2 100

100 1000```

### 输出

```
102

200

2000```

### 算法分类
模拟

### 题解分析与结论

由于暂无题解，我将提供通用建议与扩展思路。

#### 通用建议
1. **数据结构选择**：使用哈希表（如 `unordered_map`）来记录每个值的出现次数，这样可以快速查找和更新。
2. **优化思路**：在每次操作中，直接更新总和，而不是重新计算整个数组的和。这样可以减少时间复杂度。
3. **边界处理**：注意处理 $ B_{i} $ 不在数组中的情况，避免不必要的操作。

#### 扩展思路
1. **类似问题**：可以考虑类似的问题，如批量更新数组中的元素并快速查询某些属性（如最大值、最小值等）。
2. **数据结构拓展**：可以尝试使用其他数据结构（如树状数组、线段树）来处理更复杂的更新和查询操作。

### 推荐题目
1. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)
2. [P3368 【模板】树状数组 2](https://www.luogu.com.cn/problem/P3368)
3. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908)

这些题目都涉及到数组的更新和查询操作，可以帮助加深对类似问题的理解。

---
处理用时：19.32秒
# 题目信息

# [ABC230C] X drawing

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc230/tasks/abc230_c

上下左右に広がる $ N\times\ N $ のマス目があり、最初全てのマスは白く塗られています。このマス目の上から $ i $ 行目、左から $ j $ 列目のマスを $ (i,j) $ で表します。

高橋君は $ 1 $ 以上 $ N $ 以下の整数 $ A $, $ B $ を持っており、次のような操作を行います。

- $ \max(1-A,1-B)\leq\ k\leq\ \min(N-A,N-B) $ をみたす全ての整数 $ k $ について、$ (A+k,B+k) $ を黒く塗る。
- $ \max(1-A,B-N)\leq\ k\leq\ \min(N-A,B-1) $ をみたす全ての整数 $ k $ について、$ (A+k,B-k) $ を黒く塗る。

この操作を行った後のマス目について、$ P\leq\ i\leq\ Q $ かつ $ R\leq\ j\leq\ S $ をみたす各マス $ (i,j) $ がそれぞれ何色で塗られているか求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^{18} $
- $ 1\ \leq\ A\ \leq\ N $
- $ 1\ \leq\ B\ \leq\ N $
- $ 1\ \leq\ P\ \leq\ Q\ \leq\ N $
- $ 1\ \leq\ R\ \leq\ S\ \leq\ N $
- $ (Q-P+1)\times(S-R+1)\leq\ 3\times\ 10^5 $
- 入力は全て整数である。

### Sample Explanation 1

$ 1 $ つめの操作で $ (2,1) $, $ (3,2) $, $ (4,3) $, $ (5,4) $ の $ 4 $ マスが、 $ 2 $ つめの操作で $ (4,1) $, $ (3,2) $, $ (2,3) $, $ (1,4) $ の $ 4 $ マスが黒く塗られます。 よって、$ P=1 $, $ Q=5 $, $ R=1 $, $ S=5 $ より、上のように出力します。

### Sample Explanation 2

操作によって、 $ (1,1) $, $ (1,5) $, $ (2,2) $, $ (2,4) $, $ (3,3) $, $ (4,2) $, $ (4,4) $, $ (5,1) $, $ (5,5) $ の $ 9 $ マスが 黒く塗られます。 $ P=4 $, $ Q=5 $, $ R=2 $, $ S=5 $ より、上のように出力します。

### Sample Explanation 3

入力が $ 32 $ bit 整数型に収まらないことがあることに注意してください。

## 样例 #1

### 输入

```
5 3 2

1 5 1 5```

### 输出

```
...#.

#.#..

.#...

#.#..

...#.```

## 样例 #2

### 输入

```
5 3 3

4 5 2 5```

### 输出

```
#.#.

...#```

## 样例 #3

### 输入

```
1000000000000000000 999999999999999999 999999999999999999

999999999999999998 1000000000000000000 999999999999999998 1000000000000000000```

### 输出

```
#.#

.#.

#.#```

# AI分析结果

### 中文题目重写

【题目内容】
# [ABC230C] X 绘制

## 题目描述

上下左右扩展的 $ N \times N $ 的网格，最初所有格子都是白色的。网格中从上到下第 $ i $ 行、从左到右第 $ j $ 列的格子用 $ (i,j) $ 表示。

高桥君持有 $ 1 $ 以上 $ N $ 以下的整数 $ A $ 和 $ B $，并执行以下操作：

- 对于满足 $ \max(1-A,1-B) \leq k \leq \min(N-A,N-B) $ 的所有整数 $ k $，将 $ (A+k,B+k) $ 涂黑。
- 对于满足 $ \max(1-A,B-N) \leq k \leq \min(N-A,B-1) $ 的所有整数 $ k $，将 $ (A+k,B-k) $ 涂黑。

操作完成后，对于满足 $ P \leq i \leq Q $ 且 $ R \leq j \leq S $ 的每个格子 $ (i,j) $，输出其颜色。

## 说明/提示

### 约束

- $ 1 \leq N \leq 10^{18} $
- $ 1 \leq A \leq N $
- $ 1 \leq B \leq N $
- $ 1 \leq P \leq Q \leq N $
- $ 1 \leq R \leq S \leq N $
- $ (Q-P+1) \times (S-R+1) \leq 3 \times 10^5 $
- 输入均为整数。

### 样例解释 1

第一个操作将 $ (2,1) $, $ (3,2) $, $ (4,3) $, $ (5,4) $ 四个格子涂黑，第二个操作将 $ (4,1) $, $ (3,2) $, $ (2,3) $, $ (1,4) $ 四个格子涂黑。因此，对于 $ P=1 $, $ Q=5 $, $ R=1 $, $ S=5 $，输出如上。

### 样例解释 2

操作后，$ (1,1) $, $ (1,5) $, $ (2,2) $, $ (2,4) $, $ (3,3) $, $ (4,2) $, $ (4,4) $, $ (5,1) $, $ (5,5) $ 九个格子被涂黑。对于 $ P=4 $, $ Q=5 $, $ R=2 $, $ S=5 $，输出如上。

### 样例解释 3

输入可能超出 $ 32 $ 位整数范围，需注意。

## 样例 #1

### 输入

```
5 3 2

1 5 1 5```

### 输出

```
...#.

#.#..

.#...

#.#..

...#.```

## 样例 #2

### 输入

```
5 3 3

4 5 2 5```

### 输出

```
#.#.

...#```

## 样例 #3

### 输入

```
1000000000000000000 999999999999999999 999999999999999999

999999999999999998 1000000000000000000 999999999999999998 1000000000000000000```

### 输出

```
#.#

.#.

#.#```

### 算法分类
模拟

### 题解分析与结论
由于题目要求对网格进行特定操作后输出指定区域的颜色，且网格大小可能非常大（$ N \leq 10^{18} $），直接模拟整个网格的操作是不可行的。因此，需要找到一种高效的方法来判断指定区域内的每个格子是否被涂黑。

### 通用建议与扩展思路
1. **数学分析**：通过数学公式计算每个格子是否在两条对角线上，从而判断其是否被涂黑。
2. **边界处理**：由于 $ N $ 可能非常大，需要特别注意边界条件的处理，避免溢出或超时。
3. **输出优化**：由于输出区域的大小有限（$ (Q-P+1) \times (S-R+1) \leq 3 \times 10^5 $），可以直接遍历该区域内的每个格子，判断其是否被涂黑。

### 推荐题目
1. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219) - 考察类似的对角线处理问题。
2. [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141) - 考察网格中的路径搜索问题。
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036) - 考察组合数学与搜索问题。

---
处理用时：49.15秒
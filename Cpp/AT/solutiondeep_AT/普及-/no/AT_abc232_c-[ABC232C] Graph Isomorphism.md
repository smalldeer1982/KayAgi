# 题目信息

# [ABC232C] Graph Isomorphism

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc232/tasks/abc232_c

高橋君と青木君は、それぞれ $ N $ 個のボールに $ M $ 本のひもを取り付けたおもちゃを持っています。

高橋君のおもちゃにおいて、ボールには $ 1,\ \dots,\ N $ と番号が付けられており、$ i\ \,\ (1\ \leq\ i\ \leq\ M) $ 本目のひもはボール $ A_i $ とボール $ B_i $ を結んでいます。

青木君のおもちゃにおいても同様に、ボールには $ 1,\ \dots,\ N $ と番号が付けられており、$ i\ \,\ (1\ \leq\ i\ \leq\ M) $ 本目のひもはボール $ C_i $ とボール $ D_i $ を結んでいます。

それぞれのおもちゃにおいて、同一のボールを結ぶようなひもは存在せず、$ 2 $ つのボールを $ 2 $ 本以上の異なるひもが結んでいることはありません。

すぬけ君は、$ 2 $ 人のおもちゃが同じ形であるかどうか気になっています。  
 ここで、$ 2 $ 人のおもちゃが同じ形であるとは、以下の条件を満たす数列 $ P $ が存在することをいいます。

- $ P $ は $ (1,\ \dots,\ N) $ を並べ替えて得られる。
- 任意の $ 1 $ 以上 $ N $ 以下の整数 $ i,\ j $ に対し、以下が成り立つ。
  - 高橋君のおもちゃにおいてボール $ i,\ j $ がひもで繋がれていることと、青木君のおもちゃにおいてボール $ P_i,\ P_j $ がひもで繋がれていることは同値である。

$ 2 $ 人のおもちゃが同じ形であるなら `Yes`、そうでないなら `No` と出力してください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 8 $
- $ 0\ \leq\ M\ \leq\ \frac{N(N\ -\ 1)}{2} $
- $ 1\ \leq\ A_i\ \lt\ B_i\ \leq\ N\ \,\ (1\ \leq\ i\ \leq\ M) $
- $ (A_i,\ B_i)\ \neq\ (A_j,\ B_j)\ \,\ (i\ \neq\ j) $
- $ 1\ \leq\ C_i\ \lt\ D_i\ \leq\ N\ \,\ (1\ \leq\ i\ \leq\ M) $
- $ (C_i,\ D_i)\ \neq\ (C_j,\ D_j)\ \,\ (i\ \neq\ j) $
- 入力は全て整数である。

### Sample Explanation 1

高橋君のおもちゃは下図の左側のような形をしており、青木君のおもちゃは下図の右側のような形をしています。 !\[yes1\](https://img.atcoder.jp/ghi/abc232c\_yes1.jpg) 次の図から、$ 2 $ 人のおもちゃが同じ形であることがわかります。例えば $ P\ =\ (3,\ 2,\ 1,\ 4) $ とすると問題文中の条件を満たします。 !\[yes2\](https://img.atcoder.jp/ghi/abc232c\_yes2.jpg)

### Sample Explanation 2

$ 2 $ 人のおもちゃは同じ形ではありません。 !\[no\](https://img.atcoder.jp/ghi/abc232c\_no.jpg)

## 样例 #1

### 输入

```
4 4

1 2

1 3

1 4

3 4

1 3

1 4

2 3

3 4```

### 输出

```
Yes```

## 样例 #2

### 输入

```
5 6

1 2

1 3

1 4

3 4

3 5

4 5

1 2

1 3

1 4

1 5

3 5

4 5```

### 输出

```
No```

## 样例 #3

### 输入

```
8 0```

### 输出

```
Yes```

# AI分析结果

【题目内容重写】
# [ABC232C] 图同构

## 题目描述

高桥君和青木君各自有 $N$ 个球和 $M$ 根绳子连接的玩具。

在高桥君的玩具中，球被编号为 $1,\ \dots,\ N$，第 $i$ 根绳子连接球 $A_i$ 和球 $B_i$。

在青木君的玩具中，球也被编号为 $1,\ \dots,\ N$，第 $i$ 根绳子连接球 $C_i$ 和球 $D_i$。

在各自的玩具中，没有连接同一对球的绳子，且没有两根绳子连接同一对球。

すぬけ君想知道这两个玩具是否形状相同。  
 这里，两个玩具形状相同是指存在一个数列 $P$，满足以下条件：

- $P$ 是 $ (1,\ \dots,\ N) $ 的一个排列。
- 对于任意 $1$ 到 $N$ 的整数 $i,\ j$，以下条件成立：
  - 高桥君的玩具中球 $i,\ j$ 被绳子连接，当且仅当青木君的玩具中球 $P_i,\ P_j$ 被绳子连接。

如果两个玩具形状相同，输出 `Yes`，否则输出 `No`。

## 说明/提示

### 制約

- $1\ \leq\ N\ \leq\ 8$
- $0\ \leq\ M\ \leq\ \frac{N(N\ -\ 1)}{2}$
- $1\ \leq\ A_i\ \lt\ B_i\ \leq\ N\ \,\ (1\ \leq\ i\ \leq\ M)$
- $(A_i,\ B_i)\ \neq\ (A_j,\ B_j)\ \,\ (i\ \neq\ j)$
- $1\ \leq\ C_i\ \lt\ D_i\ \leq\ N\ \,\ (1\ \leq\ i\ \leq\ M)$
- $(C_i,\ D_i)\ \neq\ (C_j,\ D_j)\ \,\ (i\ \neq\ j)$
- 输入均为整数。

### 样例解释

样例1中，高桥君和青木君的玩具形状相同，输出 `Yes`。  
 样例2中，两个玩具形状不同，输出 `No`。  
 样例3中，没有绳子连接，输出 `Yes`。

【算法分类】
枚举

【题解分析与结论】
所有题解的核心思路都是利用全排列枚举所有可能的节点映射，然后通过邻接矩阵判断两个图是否同构。由于 $N \le 8$，全排列的复杂度是可接受的。

【评分较高的题解】
1. **作者：ikunTLE (5星)**
   - 关键亮点：代码简洁，逻辑清晰，使用 `next_permutation` 进行全排列，邻接矩阵存储图结构，判断函数 `check` 实现高效。
   - 代码片段：
     ```cpp
     bool check(){
         for(int i=1;i<=n;++i)
             for(int j=1;j<=n;++j)
                 if(a[i][j]!=b[p[i]][p[j]])
                     return false;
         return true;
     }
     ```

2. **作者：0Io_oI0 (4星)**
   - 关键亮点：代码风格独特，使用宏定义简化代码，逻辑清晰，全排列和邻接矩阵的使用与其它题解一致。
   - 代码片段：
     ```cpp
     bool check(){
         for(int i=1;i<=n;i++)for(int j=1;j<=n;j++)if(a[i][j]!=b[c[i]][c[j]])return 0;
         return 1;
     }
     ```

3. **作者：SuyctidohanQ (4星)**
   - 关键亮点：代码结构清晰，使用 `next_permutation` 进行全排列，邻接矩阵存储图结构，判断函数 `check` 实现高效。
   - 代码片段：
     ```cpp
     bool check () {
         for (int i = 1; i <= n; i ++)
             for (int j = 1; j <= n; j ++)
                 if (a[i][j] != b[p[i]][p[j]]) return false;
         return true;
     }
     ```

【最优关键思路】
利用全排列枚举所有可能的节点映射，通过邻接矩阵判断两个图是否同构。由于 $N \le 8$，全排列的复杂度是可接受的。

【拓展思路】
类似的问题可以通过枚举所有可能的映射来解决，尤其是在节点数较小的情况下。对于更大的图，可以考虑更高效的图同构算法，如 Weisfeiler-Lehman 算法。

【推荐题目】
1. [P3387 【模板】缩点](https://www.luogu.com.cn/problem/P3387)
2. [P3379 【模板】最近公共祖先（LCA）](https://www.luogu.com.cn/problem/P3379)
3. [P3388 【模板】割点（割顶）](https://www.luogu.com.cn/problem/P3388)

---
处理用时：28.08秒
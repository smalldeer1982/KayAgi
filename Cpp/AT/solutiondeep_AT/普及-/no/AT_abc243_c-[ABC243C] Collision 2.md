# 题目信息

# [ABC243C] Collision 2

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc243/tasks/abc243_c

$ xy $ 座標平面上に $ N $ 人の人がいます。人 $ i $ は $ (X_i,\ Y_i) $ にいます。すべての人は異なる地点にいます。

`L`, `R` からなる長さ $ N $ の文字列 $ S $ があります。  
 人 $ i $ は $ S_i\ = $ `R` ならば右向きに、$ S_i\ = $ `L` ならば左向きに、一斉に同じ速度で歩き始めます。ここで、右は $ x $ 軸の正の向き、左は $ x $ 軸の負の向きです。

たとえば $ (X_1,\ Y_1)\ =\ (2,\ 3),\ (X_2,\ Y_2)\ =\ (1,\ 1),\ (X_3,\ Y_3)\ =(4,\ 1),\ S\ = $ `RRL` の場合は次の図のように動きます。

![image](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc243_c/dcf8faf208a98b36fba58ea0016822db31f879c4.png)

反対の向きに歩いている人同士が同じ地点に来ることを「衝突」と呼びます。すべての人が歩き続けたとき、衝突は発生しますか？

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ 0\ \leq\ X_i\ \leq\ 10^9 $
- $ 0\ \leq\ Y_i\ \leq\ 10^9 $
- $ i\ \neq\ j $ ならば $ (X_i,\ Y_i)\ \neq\ (X_j,\ Y_j) $ である。
- $ X_i,\ Y_i $ はすべて整数である。
- $ S $ は `L` および `R` からなる長さ $ N $ の文字列である。

### Sample Explanation 1

この入力は問題文にある例と同じケースです。 すべての人が歩き続けると人 $ 2 $ と人 $ 3 $ が衝突します。よって `Yes` を出力します。

### Sample Explanation 2

人 $ 1 $ と人 $ 2 $ は同じ向きに歩いているので衝突することはありません。

## 样例 #1

### 输入

```
3

2 3

1 1

4 1

RRL```

### 输出

```
Yes```

## 样例 #2

### 输入

```
2

1 1

2 1

RR```

### 输出

```
No```

## 样例 #3

### 输入

```
10

1 3

1 4

0 0

0 2

0 4

3 1

2 4

4 2

4 4

3 3

RLRRRLRLRR```

### 输出

```
Yes```

# AI分析结果

### 题目内容重写

**题目描述**

在 $xy$ 坐标平面上有 $N$ 个人。第 $i$ 个人位于 $(X_i, Y_i)$。所有人的位置都不同。

给定一个由 `L` 和 `R` 组成的长度为 $N$ 的字符串 $S$。  
如果 $S_i =$ `R`，则第 $i$ 个人向右移动；如果 $S_i =$ `L`，则第 $i$ 个人向左移动。所有人以相同的速度同时开始移动。这里，右方向是 $x$ 轴的正方向，左方向是 $x$ 轴的负方向。

例如，$(X_1, Y_1) = (2, 3)$，$(X_2, Y_2) = (1, 1)$，$(X_3, Y_3) = (4, 1)$，$S =$ `RRL` 时，移动情况如下图所示。

![image](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc243_c/dcf8faf208a98b36fba58ea0016822db31f879c4.png)

当两个朝相反方向移动的人到达同一位置时，称为“碰撞”。如果所有人继续移动，是否会发生碰撞？

**说明/提示**

**约束条件**

- $2 \leq N \leq 2 \times 10^5$
- $0 \leq X_i \leq 10^9$
- $0 \leq Y_i \leq 10^9$
- 如果 $i \neq j$，则 $(X_i, Y_i) \neq (X_j, Y_j)$。
- $X_i, Y_i$ 都是整数。
- $S$ 是由 `L` 和 `R` 组成的长度为 $N$ 的字符串。

**样例解释 1**

这个输入与题目描述中的例子相同。所有人继续移动时，第 $2$ 个人和第 $3$ 个人会发生碰撞。因此输出 `Yes`。

**样例解释 2**

第 $1$ 个人和第 $2$ 个人朝同一方向移动，因此不会发生碰撞。

**样例 1**

**输入**

```
3

2 3

1 1

4 1

RRL
```

**输出**

```
Yes
```

**样例 2**

**输入**

```
2

1 1

2 1

RR
```

**输出**

```
No
```

**样例 3**

**输入**

```
10

1 3

1 4

0 0

0 2

0 4

3 1

2 4

4 2

4 4

3 3

RLRRRLRLRR
```

**输出**

```
Yes
```

### 算法分类

模拟

### 综合分析与结论

本题的核心在于判断在同一 $y$ 坐标上是否存在两个人，一个向左移动，一个向右移动，且他们的 $x$ 坐标满足一定的条件（即向右移动的人的初始 $x$ 坐标小于向左移动的人的初始 $x$ 坐标）。如果存在这样的情况，则会发生碰撞。

由于 $N$ 的最大值为 $2 \times 10^5$，我们需要一个高效的算法来处理这个问题。通常的解法是通过遍历所有 $y$ 坐标，对每个 $y$ 坐标上的人进行分组，然后检查每组中是否存在满足条件的人。

### 通用建议与扩展思路

1. **数据结构选择**：使用 `map` 或 `unordered_map` 来按 $y$ 坐标分组，可以快速访问和处理每个 $y$ 坐标上的人。
2. **排序**：对每个 $y$ 坐标上的人按 $x$ 坐标进行排序，可以方便地检查是否存在满足条件的两个人。
3. **优化**：在遍历时，可以提前终止检查，一旦发现满足条件的两个人，即可输出结果，避免不必要的计算。

### 推荐题目

1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020) - 考察贪心与模拟的结合。
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 考察贪心与优先队列的应用。
3. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 考察动态规划与模拟的结合。

### 核心代码实现

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int N;
    cin >> N;
    vector<pair<int, int>> people(N);
    for (int i = 0; i < N; ++i) {
        cin >> people[i].first >> people[i].second;
    }
    string S;
    cin >> S;

    map<int, vector<pair<int, char>>> mp;
    for (int i = 0; i < N; ++i) {
        mp[people[i].second].emplace_back(people[i].first, S[i]);
    }

    for (auto& [y, vec] : mp) {
        sort(vec.begin(), vec.end());
        bool hasR = false;
        for (auto& [x, dir] : vec) {
            if (dir == 'R') {
                hasR = true;
            } else if (hasR) {
                cout << "Yes" << endl;
                return 0;
            }
        }
    }

    cout << "No" << endl;
    return 0;
}
```

**核心思想**：按 $y$ 坐标分组，对每组按 $x$ 坐标排序，然后检查是否存在一个向右移动的人和一个向左移动的人，且向右移动的人在向左移动的人的左边。如果存在，则输出 `Yes`，否则输出 `No`。

---
处理用时：33.29秒
# 题目信息

# [ABC247D] Cylinder

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc247/tasks/abc247_d

空の筒があります。$ Q $ 個のクエリが与えられるので順に処理してください。  
クエリは次の $ 2 $ 種類のいずれかです。

- `1 x c`：数 $ x $ が書かれたボールを筒の右側から $ c $ 個入れる
- `2 c`：筒の左側からボールを $ c $ 個取り出し、取り出したボールに書かれている数の合計を出力する

なお、筒の中でボールの順序が入れ替わることはないものとします。

## 说明/提示

### 制約

- $ 1\ \leq\ Q\ \leq\ 2\times\ 10^5 $
- $ 0\ \leq\ x\ \leq\ 10^9 $
- $ 1\ \leq\ c\ \leq\ 10^9 $
- `2 c` のクエリが与えられるとき、筒の中には $ c $ 個以上のボールがある
- 入力に含まれる値は全て整数である

### Sample Explanation 1

\- $ 1 $ 番目のクエリでは、$ 2 $ が書かれたボールを筒の右側から $ 3 $ 個入れます。 筒の中のボールに書かれた数は左から順に $ (2,2,2) $ となります。 - $ 2 $ 番目のクエリでは、筒の左側からボールを $ 2 $ 個取り出します。 取り出されたボールに書かれている数はそれぞれ $ 2,2 $ であり、合計は $ 4 $ であるため、これを出力します。 筒の中のボールに書かれた数は左から順に $ (2) $ となります。 - $ 3 $ 番目のクエリでは、$ 3 $ が書かれたボールを筒の右側から $ 4 $ 個入れます。 筒の中のボールに書かれた数は左から順に $ (2,3,3,3,3) $ となります。 - $ 4 $ 番目のクエリでは、筒の左側からボールを $ 3 $ 個取り出します。 取り出されたボールに書かれている数はそれぞれ $ 2,3,3 $ であり、合計は $ 8 $ であるため、これを出力します。 筒の中のボールに書かれた数は左から順に $ (3,3) $ となります。

### Sample Explanation 3

出力するものがないこともあります。

## 样例 #1

### 输入

```
4
1 2 3
2 2
1 3 4
2 3```

### 输出

```
4
8```

## 样例 #2

### 输入

```
2
1 1000000000 1000000000
2 1000000000```

### 输出

```
1000000000000000000```

## 样例 #3

### 输入

```
5
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1```

### 输出

```
```

# AI分析结果

### 题目内容重写

有一个空的筒。给出 $ Q $ 个查询，请按顺序处理。  
查询有以下两种类型：

- `1 x c`：将写有数字 $ x $ 的球从筒的右侧放入 $ c $ 个
- `2 c`：从筒的左侧取出 $ c $ 个球，并输出这些球上数字的总和

注意，筒中球的顺序不会改变。

### 说明/提示

#### 约束条件

- $ 1\ \leq\ Q\ \leq\ 2\times\ 10^5 $
- $ 0\ \leq\ x\ \leq\ 10^9 $
- $ 1\ \leq\ c\ \leq\ 10^9 $
- 当给出 `2 c` 查询时，筒中至少有 $ c $ 个球
- 输入中的所有值都是整数

#### 样例解释 1

- 第一个查询：将写有数字 $ 2 $ 的球从右侧放入 $ 3 $ 个。筒中的球从左到右依次为 $ (2,2,2) $。
- 第二个查询：从左侧取出 $ 2 $ 个球。取出的球上数字分别为 $ 2,2 $，总和为 $ 4 $，因此输出 $ 4 $。筒中的球从左到右依次为 $ (2) $。
- 第三个查询：将写有数字 $ 3 $ 的球从右侧放入 $ 4 $ 个。筒中的球从左到右依次为 $ (2,3,3,3,3) $。
- 第四个查询：从左侧取出 $ 3 $ 个球。取出的球上数字分别为 $ 2,3,3 $，总和为 $ 8 $，因此输出 $ 8 $。筒中的球从左到右依次为 $ (3,3) $。

#### 样例解释 3

有时可能没有输出。

### 样例 #1

#### 输入

```
4
1 2 3
2 2
1 3 4
2 3
```

#### 输出

```
4
8
```

### 样例 #2

#### 输入

```
2
1 1000000000 1000000000
2 1000000000
```

#### 输出

```
1000000000000000000
```

### 样例 #3

#### 输入

```
5
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1
```

#### 输出

```
```

### 算法分类

模拟、队列

### 题解分析与结论

由于暂无题解，我将给出通用建议与扩展思路。

### 通用建议与扩展思路

1. **数据结构选择**：由于需要频繁地从左侧取出球，并且需要维护球的顺序，使用队列（`deque`）是一个合适的选择。队列可以高效地在两端进行插入和删除操作。

2. **优化思路**：考虑到 $ Q $ 的最大值为 $ 2 \times 10^5 $，并且每次操作的时间复杂度需要控制在 $ O(1) $ 或 $ O(\log n) $ 以内。因此，直接使用队列的 `push_back` 和 `pop_front` 操作可以满足要求。

3. **实现技巧**：在处理 `1 x c` 查询时，可以将 $ x $ 和 $ c $ 作为一个整体（如 `pair<int, int>`）存入队列，这样可以减少内存占用并提高访问效率。

4. **边界条件**：在处理 `2 c` 查询时，需要确保筒中有足够的球。根据题目条件，每次 `2 c` 查询时筒中至少有 $ c $ 个球，因此不需要额外检查。

### 推荐题目

1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886) - 考察队列的应用。
2. [P1449 后缀表达式](https://www.luogu.com.cn/problem/P1449) - 考察栈和队列的应用。
3. [P1160 队列安排](https://www.luogu.com.cn/problem/P1160) - 考察队列的基本操作和模拟。

### 总结

本题主要考察对队列数据结构的理解和应用，通过模拟操作来处理查询。关键点在于选择合适的数据结构，并优化操作的时间复杂度。

---
处理用时：24.20秒
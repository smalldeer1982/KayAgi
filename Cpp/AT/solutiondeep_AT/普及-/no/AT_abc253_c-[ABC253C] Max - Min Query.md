# 题目信息

# [ABC253C] Max - Min Query

## 题目描述

维护一个数组 $s$。$s$ 初始为空。

按顺序执行 $q$ 个操作，每个操作都是以下三种之一：

- `1 x`：将 $x$ 加入 $s$。
- `2 x c`：将数组中的 $x$ 去除若干次。设 $d$ 为 $x$ 在 $s$ 中出现的次数，那么删除次数将为 $c,d$ 两数中的更小值。
- `3`：输出数组中最大值与最小值的差。保证此时 $s$ 不为空。

## 说明/提示

#### 数据规模与约定

对于全部测试点，数据保证：

- $1 \le c \le q \le 2 \times 10^5$；
- $0 \le x \le 10^9$；
- 输入的数值均为整数。

## 样例 #1

### 输入

```
8

1 3

1 2

3

1 2

1 7

3

2 2 3

3```

### 输出

```
1

5

4```

## 样例 #2

### 输入

```
4

1 10000

1 1000

2 100 3

1 10```

### 输出

```
```

# AI分析结果

【题目内容】
# [ABC253C] Max - Min Query

## 题目描述

维护一个数组 $s$。$s$ 初始为空。

按顺序执行 $q$ 个操作，每个操作都是以下三种之一：

- `1 x`：将 $x$ 加入 $s$。
- `2 x c`：将数组中的 $x$ 去除若干次。设 $d$ 为 $x$ 在 $s$ 中出现的次数，那么删除次数将为 $c,d$ 两数中的更小值。
- `3`：输出数组中最大值与最小值的差。保证此时 $s$ 不为空。

## 说明/提示

#### 数据规模与约定

对于全部测试点，数据保证：

- $1 \le c \le q \le 2 \times 10^5$；
- $0 \le x \le 10^9$；
- 输入的数值均为整数。

## 样例 #1

### 输入

```
8

1 3

1 2

3

1 2

1 7

3

2 2 3

3```

### 输出

```
1

5

4```

## 样例 #2

### 输入

```
4

1 10000

1 1000

2 100 3

1 10```

### 输出

```
```

【算法分类】
模拟

【题解分析与结论】
该题目要求维护一个数组，并执行插入、删除和查询操作。由于操作次数较多（$q \le 2 \times 10^5$），直接使用普通数组会导致时间复杂度过高。因此，需要使用高效的数据结构来支持这些操作。

【通用建议与扩展思路】
1. **数据结构选择**：使用`multiset`或`map`来维护数组中的元素及其出现次数。`multiset`可以自动排序，方便快速获取最大值和最小值；`map`可以记录每个元素的出现次数，方便删除操作。
2. **优化思路**：在删除操作时，直接根据`map`中的记录进行删除，避免遍历数组。
3. **扩展应用**：类似的问题可以出现在需要频繁插入、删除和查询最大值/最小值的场景中，如优先队列、滑动窗口等。

【推荐题目】
1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
2. [P3378 【模板】堆](https://www.luogu.com.cn/problem/P3378)
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)

【总结】
该题目的核心在于选择合适的数据结构来高效地支持插入、删除和查询操作。`multiset`和`map`的结合使用可以很好地解决这个问题。在实际应用中，类似的问题可以通过选择合适的数据结构来优化性能。

---
处理用时：17.75秒
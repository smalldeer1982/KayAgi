# 题目信息

# [ABC262C] Min Max Pair

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc262/tasks/abc262_c

$ 1 $ 以上 $ N $ 以下の整数からなる長さ $ N $ の数列 $ a\ =\ (a_1,\ \dots,\ a_N) $ が与えられます。

以下の条件を全て満たす整数 $ i,\ j $ の組の総数を求めてください。

- $ 1\ \leq\ i\ \lt\ j\ \leq\ N $
- $ \min(a_i,\ a_j)\ =\ i $
- $ \max(a_i,\ a_j)\ =\ j $

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 5\ \times\ 10^5 $
- $ 1\ \leq\ a_i\ \leq\ N\ \,\ (1\ \leq\ i\ \leq\ N) $
- 入力は全て整数

### Sample Explanation 1

$ (i,\ j)\ =\ (1,\ 4),\ (2,\ 3) $ が条件を満たします。

## 样例 #1

### 输入

```
4
1 3 2 4```

### 输出

```
2```

## 样例 #2

### 输入

```
10
5 8 2 2 1 6 7 2 9 10```

### 输出

```
8```

# AI分析结果

### 题目内容重写

#### 题目描述

给定一个长度为 $N$ 的数列 $a = (a_1, \dots, a_N)$，其中每个元素都是 $1$ 到 $N$ 之间的整数。

请找出满足以下条件的所有整数对 $(i, j)$ 的总数：

- $1 \leq i < j \leq N$
- $\min(a_i, a_j) = i$
- $\max(a_i, a_j) = j$

#### 说明/提示

##### 约束条件

- $2 \leq N \leq 5 \times 10^5$
- $1 \leq a_i \leq N$ （$1 \leq i \leq N$）
- 输入均为整数

##### 样例解释 1

$(i, j) = (1, 4), (2, 3)$ 满足条件。

##### 样例 #1

###### 输入

```
4
1 3 2 4
```

###### 输出

```
2
```

##### 样例 #2

###### 输入

```
10
5 8 2 2 1 6 7 2 9 10
```

###### 输出

```
8
```

### 算法分类

枚举

### 综合分析与结论

本题的核心在于找到满足特定条件的 $(i, j)$ 对。由于 $N$ 的范围较大（$2 \leq N \leq 5 \times 10^5$），直接暴力枚举所有可能的 $(i, j)$ 对会导致时间复杂度过高，因此需要优化。

通过观察条件 $\min(a_i, a_j) = i$ 和 $\max(a_i, a_j) = j$，可以得出以下结论：

1. 如果 $a_i = i$ 且 $a_j = j$，那么 $(i, j)$ 满足条件。
2. 如果 $a_i = j$ 且 $a_j = i$，那么 $(i, j)$ 也满足条件。

基于以上结论，可以将问题分为两部分：

1. 统计满足 $a_i = i$ 的元素个数，并计算这些元素之间的组合数。
2. 统计满足 $a_i = j$ 且 $a_j = i$ 的元素对，并计算这些对的个数。

### 通用建议与扩展思路

1. **优化枚举**：通过分类讨论，减少不必要的枚举次数，从而降低时间复杂度。
2. **组合数学**：利用组合数学的知识，快速计算满足条件的元素对的数量。
3. **哈希表**：使用哈希表记录满足 $a_i = j$ 且 $a_j = i$ 的元素对，提高查找效率。

### 推荐题目

1. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1048 采药](https://www.luogu.com.cn/problem/P1048)

这些题目都涉及到枚举和优化，可以帮助巩固相关知识点。

---
处理用时：18.65秒
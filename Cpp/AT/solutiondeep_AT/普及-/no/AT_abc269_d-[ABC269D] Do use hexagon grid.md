# 题目信息

# [ABC269D] Do use hexagon grid

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc269/tasks/abc269_d

以下のような、無限に広い六角形のグリッドがあります。最初、全てのマスは白です。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc269_d/992f7292cb6316e33ee0c40605e4a519c5d857df.png)

ある六角形のマスは $ 2 $ つの整数 $ i,j $ を用いて $ (i,j) $ と表されます。  
 マス $ (i,j) $ は以下の $ 6 $ つのマスと隣接します。

- $ (i-1,j-1) $
- $ (i-1,j) $
- $ (i,j-1) $
- $ (i,j+1) $
- $ (i+1,j) $
- $ (i+1,j+1) $

高橋くんは、 $ N $ 個のマス $ (X_1,Y_1),(X_2,Y_2),\dots,(X_N,Y_N) $ を黒く塗りました。  
 黒いマスがいくつの連結成分をなすか求めてください。  
 ただし、ある $ 2 $ つの黒いマスが同じ連結成分に属するとは、この $ 2 $ つの黒いマスの間をいくつかの隣接する黒いマスを辿って移動できることを指します。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\ \le\ N\ \le\ 1000 $
- $ |X_i|,|Y_i|\ \le\ 1000 $
- $ (X_i,Y_i) $ は相異なる

### Sample Explanation 1

高橋くんがマスを黒く塗った後、グリッドは下図の状態になります。 !\[\](https://img.atcoder.jp/abc269/865747dac44d93b150ecbed462ac4ef3.png) 黒いマスがなす連結成分は以下の $ 3 $ つです。 - $ (-1,-1) $ - $ (1,0),(2,0) $ - $ (0,1),(0,2),(1,2) $

## 样例 #1

### 输入

```
6

-1 -1

0 1

0 2

1 0

1 2

2 0```

### 输出

```
3```

## 样例 #2

### 输入

```
4

5 0

4 1

-3 -4

-2 -5```

### 输出

```
4```

## 样例 #3

### 输入

```
5

2 1

2 -1

1 0

3 1

1 -1```

### 输出

```
1```

# AI分析结果

### 题目重写

【题目内容】
# [ABC269D] 使用六边形网格

## 题目描述

有一个无限大的六边形网格，初始时所有格子都是白色的。

某个六边形格子可以用两个整数 $i,j$ 表示为 $(i,j)$。  
格子 $(i,j)$ 与以下六个格子相邻：

- $(i-1,j-1)$
- $(i-1,j)$
- $(i,j-1)$
- $(i,j+1)$
- $(i+1,j)$
- $(i+1,j+1)$

高桥君将 $N$ 个格子 $(X_1,Y_1),(X_2,Y_2),\dots,(X_N,Y_N)$ 涂黑。  
请计算这些黑格子形成了多少个连通块。  
两个黑格子属于同一个连通块，当且仅当它们之间可以通过相邻的黑格子移动到达。

## 说明/提示

### 约束

- 输入均为整数
- $1 \le N \le 1000$
- $|X_i|,|Y_i| \le 1000$
- $(X_i,Y_i)$ 互不相同

### 样例解释 1

高桥君涂黑格子后，网格状态如下图所示。  
黑格子形成了以下三个连通块：
- $(-1,-1)$
- $(1,0),(2,0)$
- $(0,1),(0,2),(1,2)$

## 样例 #1

### 输入

```
6

-1 -1

0 1

0 2

1 0

1 2

2 0```

### 输出

```
3```

## 样例 #2

### 输入

```
4

5 0

4 1

-3 -4

-2 -5```

### 输出

```
4```

## 样例 #3

### 输入

```
5

2 1

2 -1

1 0

3 1

1 -1```

### 输出

```
1```

### 算法分类
并查集

### 题解分析与结论

由于题目要求计算黑格子的连通块数量，且六边形网格的相邻关系较为复杂，因此适合使用并查集（Disjoint Set Union, DSU）来管理连通性。并查集可以高效地处理元素的合并与查询操作，适合解决此类连通性问题。

### 通用建议与扩展思路
1. **并查集优化**：在实现并查集时，可以使用路径压缩和按秩合并来优化性能。
2. **网格表示**：由于六边形网格的坐标范围较大，可以使用哈希表来存储黑格子的位置，避免使用二维数组导致内存浪费。
3. **遍历顺序**：在遍历黑格子时，可以按照某种顺序（如从左到右、从上到下）来减少重复访问。

### 推荐题目
1. [P3367 【模板】并查集](https://www.luogu.com.cn/problem/P3367)
2. [P1551 亲戚](https://www.luogu.com.cn/problem/P1551)
3. [P1197 [JSOI2008]星球大战](https://www.luogu.com.cn/problem/P1197)

这些题目都涉及到并查集的应用，可以帮助巩固并查集的使用技巧。

---
处理用时：20.60秒
# 题目信息

# [ABC300B] Same Map in the RPG World

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc300/tasks/abc300_b

> 高橋君は RPG を作っています。高橋君は 2 枚の RPG 世界のマップが一致しているかを判定するプログラムを書くことにしました。

縦 $ H $ マス横 $ W $ マスの 2 つのグリッド $ A,\ B $ があります。グリッドの各マスには `#` と `.` のいずれかの文字が書かれています。  
$ A $ と $ B $ の上から $ i $ 行目、左から $ j $ 列目に書かれている文字をそれぞれ $ A_{i,\ j},\ B_{i,\ j} $ と呼びます。

次の $ 2 $ 種類の操作をそれぞれ **縦方向のシフト**, **横方向のシフト** と呼びます。

- $ j=1,\ 2,\ \dots,\ W $ について次の操作を同時に行う。
  - $ A_{1,j},\ A_{2,j},\ \dots,\ A_{H-1,\ j},\ A_{H,j} $ を $ A_{2,j},\ A_{3,j},\ \dots,\ A_{H,j},\ A_{1,j} $ に同時に置き換える。
- $ i\ =\ 1,\ 2,\ \dots,\ H $ について次の操作を同時に行う。
  - $ A_{i,1},\ A_{i,2},\ \dots,\ A_{i,W-1},\ A_{i,W} $ を $ A_{i,\ 2},\ A_{i,\ 3},\ \dots,\ A_{i,W},\ A_{i,1} $ に同時に置き換える。

次の条件を満たす非負整数の組 $ (s,\ t) $ は存在しますか？存在する場合は `Yes` を、存在しない場合は `No` を出力してください。

- 縦方向のシフトを $ s $ 回行い、次に横方向のシフトを $ t $ 回行った時、操作後の $ A $ が $ B $ と一致する。

ここで、$ A $ と $ B $ が一致するとは、$ 1\ \leq\ i\ \leq\ H,\ 1\ \leq\ j\ \leq\ W $ を満たす整数の組 $ (i,\ j) $ すべてに対して $ A_{i,\ j}\ =\ B_{i,\ j} $ が成り立つことを言います。

## 说明/提示

### 制約

- $ 2\ \leq\ H,\ W\ \leq\ 30 $
- $ A_{i,j},B_{i,j} $ は `#` または `.`
- $ H,\ W $ は整数

### Sample Explanation 1

$ (s,\ t)\ =\ (2,\ 1) $ とすると $ A $ と $ B $ を一致させることができます。 $ (s,\ t)\ =\ (2,\ 1) $ の時の操作の手順を説明します。はじめ、$ A $ は次の通りです。 ``` ..# ... .#. ... ``` まず、縦方向のシフトを行います。$ A $ は次のようになります。 ``` ... .#. ... ..# ``` 次に、再び縦方向のシフトを行います。$ A $ は次のようになります。 ``` .#. ... ..# ... ``` 最後に、横方向のシフトを行います。$ A $ は次のようになり、これは $ B $ と一致しています。 ``` #.. ... .#. ... ```

### Sample Explanation 2

どのように $ (s,\ t) $ を選んでも $ A $ と $ B $ を一致させることはできません。

## 样例 #1

### 输入

```
4 3
..#
...
.#.
...
#..
...
.#.
...```

### 输出

```
Yes```

## 样例 #2

### 输入

```
3 2
##
##
#.
..
#.
#.```

### 输出

```
No```

## 样例 #3

### 输入

```
4 5
#####
.#...
.##..
..##.
...##
#...#
#####
...#.```

### 输出

```
Yes```

## 样例 #4

### 输入

```
10 30
..........##########..........
..........####....###.....##..
.....##....##......##...#####.
....####...##..#####...##...##
...##..##..##......##..##....#
#.##....##....##...##..##.....
..##....##.##..#####...##...##
..###..###..............##.##.
.#..####..#..............###..
#..........##.................
................#..........##.
######....................####
....###.....##............####
.....##...#####......##....##.
.#####...##...##....####...##.
.....##..##....#...##..##..##.
##...##..##.....#.##....##....
.#####...##...##..##....##.##.
..........##.##...###..###....
...........###...#..####..#...```

### 输出

```
Yes```

# AI分析结果

### 题目内容重写

高桥君正在制作一款RPG游戏。他需要编写一个程序来判断两张RPG世界地图是否一致。

给定两个大小为$H$行$W$列的网格$A$和$B$，每个网格中的每个单元格包含字符`#`或`.`。我们称$A$和$B$中第$i$行第$j$列的字符分别为$A_{i,j}$和$B_{i,j}$。

定义两种操作：

1. **纵向移动**：对于$j=1,2,\dots,W$，同时将$A_{1,j}, A_{2,j}, \dots, A_{H-1,j}, A_{H,j}$替换为$A_{2,j}, A_{3,j}, \dots, A_{H,j}, A_{1,j}$。
2. **横向移动**：对于$i=1,2,\dots,H$，同时将$A_{i,1}, A_{i,2}, \dots, A_{i,W-1}, A_{i,W}$替换为$A_{i,2}, A_{i,3}, \dots, A_{i,W}, A_{i,1}$。

问是否存在非负整数对$(s, t)$，使得对$A$进行$s$次纵向移动和$t$次横向移动后，$A$与$B$完全一致。如果存在，输出`Yes`，否则输出`No`。

### 算法分类
模拟

### 分析与结论
本题的核心是通过模拟操作来判断两个网格是否可以通过一定的纵向和横向移动操作变得一致。由于$H$和$W$的范围较小（最大为30），可以直接枚举所有可能的$(s, t)$组合，检查是否存在一种组合使得$A$经过操作后与$B$一致。

### 通用建议与扩展思路
1. **枚举所有可能的组合**：由于$H$和$W$的范围较小，可以直接枚举所有可能的$(s, t)$组合，检查是否存在一种组合使得$A$经过操作后与$B$一致。
2. **优化枚举**：可以通过观察网格的特性，减少不必要的枚举。例如，如果$A$和$B$的某些行或列已经一致，可以优先考虑这些行或列的移动。
3. **模拟操作**：在枚举过程中，需要模拟纵向和横向移动操作，确保每次操作后$A$的状态正确更新。

### 推荐题目
1. [P1031 均分纸牌](https://www.luogu.com.cn/problem/P1031)
2. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)
3. [P1067 多项式输出](https://www.luogu.com.cn/problem/P1067)

这些题目都涉及到模拟操作和枚举思想，适合进一步练习相关技巧。

---
处理用时：16.06秒
# 题目信息

# [ABC322C] Festival

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc322/tasks/abc322_c

AtCoder 王国では、これから $ N $ 日間のお祭りが開催されます。そのうち、$ A_1 $ 日目、$ A_2 $ 日目、$ \dots $、$ A_M $ 日目の $ M $ 日では花火が上がります。ここで、お祭りの最終日には花火が上がることが保証されます。(つまり、$ A_M=N $ が保証されます。)

$ i=1,2,\dots,N $ に対して、以下の問題を解いてください。

- $ i $ 日目以降で初めて花火が上がるのは、$ i $ 日目から数えて何日後か？ただし、$ i $ 日目に花火が上がる場合 $ 0 $ 日後とする。

## 说明/提示

### 制約

- $ 1\ \le\ M\ \le\ N\ \le\ 2\ \times\ 10^5 $
- $ 1\ \le\ A_1\ <\ A_2\ <\ \dots\ <\ A_M\ =\ N $
- 入力は全て整数

### Sample Explanation 1

AtCoder 王国ではお祭りを $ 3 $ 日間開催し、$ 2,3 $ 日目に花火が上がります。 - $ 1 $ 日目以降で初めて花火が上がるのは $ 2 $ 日目なので、$ 1 $ 日目から数えて $ 1 $ 日後です。 - $ 2 $ 日目以降で初めて花火が上がるのは $ 2 $ 日目なので、$ 2 $ 日目から数えて $ 0 $ 日後です。 - $ 3 $ 日目以降で初めて花火が上がるのは $ 3 $ 日目なので、$ 3 $ 日目から数えて $ 0 $ 日後です。

## 样例 #1

### 输入

```
3 2
2 3```

### 输出

```
1
0
0```

## 样例 #2

### 输入

```
8 5
1 3 4 7 8```

### 输出

```
0
1
0
0
2
1
0
0```

# AI分析结果

【题目内容翻译】
# [ABC322C] Festival

## 题目描述

AtCoder 王国将举办为期 $N$ 天的节日活动。其中，$A_1$ 日、$A_2$ 日、$\dots$、$A_M$ 日这 $M$ 天会有烟花表演。保证节日的最后一天会有烟花表演。（即 $A_M = N$ 是保证的。）

对于 $i=1,2,\dots,N$，请回答以下问题：

- 从第 $i$ 天开始，第 $i$ 天或之后的第几天会首次有烟花表演？如果第 $i$ 天有烟花表演，则答案为 $0$ 天。

## 说明/提示

### 约束条件

- $1 \le M \le N \le 2 \times 10^5$
- $1 \le A_1 < A_2 < \dots < A_M = N$
- 输入均为整数

### 样例解释 1

AtCoder 王国举办为期 $3$ 天的节日，第 $2$ 天和第 $3$ 天有烟花表演。
- 第 $1$ 天之后首次有烟花表演的是第 $2$ 天，因此答案为 $1$ 天。
- 第 $2$ 天之后首次有烟花表演的是第 $2$ 天，因此答案为 $0$ 天。
- 第 $3$ 天之后首次有烟花表演的是第 $3$ 天，因此答案为 $0$ 天。

## 样例 #1

### 输入

```
3 2
2 3
```

### 输出

```
1
0
0
```

## 样例 #2

### 输入

```
8 5
1 3 4 7 8
```

### 输出

```
0
1
0
0
2
1
0
0
```

【算法分类】  
递推

【题解分析与结论】  
本题的核心是对于每一天，找到其之后第一个有烟花表演的日子。由于烟花表演的日子是递增的，可以通过递推或二分查找来解决。递推的方法从后向前遍历，利用已经计算的结果来更新当前天的答案，时间复杂度为 $O(N)$，效率较高。二分查找的方法则利用 `lower_bound` 函数来查找第一个大于等于当前天的烟花日子，时间复杂度为 $O(N \log M)$，虽然稍慢，但代码简洁。

【评分较高的题解】  
1. **作者：Binah_cyc**  
   - **星级：5星**  
   - **关键亮点**：使用递推方法，从后向前遍历，利用标记数组记录烟花日子，代码简洁且效率高。  
   - **核心代码**：
     ```cpp
     for(int i=n;i>=1;i--) {
         if(mp[i]) ans[i]=0; // 当天有烟花
         else ans[i]=ans[i+1]+1; // 继承后一天的答案
     }
     ```

2. **作者：_7Mr**  
   - **星级：4星**  
   - **关键亮点**：从后向前扫描，利用指针记录最近的烟花日子，思路清晰。  
   - **核心代码**：
     ```cpp
     for(int i=n;i>=1;i--){
         if(i==a[q-1]){ // 当前天有烟花
             p=a[q-1];
             q--;
         }
         sum[i]=p-i; // 计算距离
     }
     ```

3. **作者：Mu_leaf**  
   - **星级：4星**  
   - **关键亮点**：使用桶记录烟花日子，通过后缀和直接计算距离，代码简洁且高效。  
   - **核心代码**：
     ```cpp
     for(int i=n;i>=1;i--){
         if(i==a[q-1]){ // 当前天有烟花
             p=a[q-1];
             q--;
         }
         sum[i]=p-i; // 计算距离
     }
     ```

【最优关键思路】  
从后向前递推，利用已经计算的结果来更新当前天的答案，时间复杂度为 $O(N)$，效率较高。这种方法避免了重复计算，适合处理大规模数据。

【可拓展之处】  
类似的问题可以扩展到其他需要查找最近满足条件的日子的场景，如查找最近的某个事件、最近的某个状态等。递推和二分查找是解决这类问题的常用方法。

【推荐题目】  
1. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)  
2. [P3368 【模板】树状数组 2](https://www.luogu.com.cn/problem/P3368)  
3. [P3382 【模板】线段树 1](https://www.luogu.com.cn/problem/P3382)

---
处理用时：27.39秒
# 题目信息

# [ABC334B] Christmas Trees

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc334/tasks/abc334_b

東西に無限に伸びる道路があり、この道路上のある基準となる地点から東に $ x\mathrm{\,m} $ のところにある地点の**座標**は $ x $ と定められています。 特に、基準となる地点から西に $ x\mathrm{\,m} $ のところにある地点の座標は $ -x $ です。

すぬけ君は今から、座標が $ A $ である地点を基点にして $ M\mathrm{\,m} $ おきにクリスマスツリーを立てます。 すなわち、座標がある整数 $ k $ を用いて $ A+kM $ と表されるような地点それぞれにクリスマスツリーを立てます。

高橋君と青木君はそれぞれ座標が $ L,R\ (L\leq\ R) $ である地点に立っています。 高橋君と青木君の間（高橋君と青木君が立っている地点を含む）に立てられるクリスマスツリーの本数を求めてください。

## 说明/提示

### 制約

- $ -10^{18}\leq\ A\ \leq\ 10^{18} $
- $ 1\leq\ M\ \leq\ 10^9 $
- $ -10^{18}\leq\ L\leq\ R\ \leq\ 10^{18} $
- 入力は全て整数

### Sample Explanation 1

すぬけ君は、座標が $ \dots,-4,-1,2,5,8,11,14\dots $ である地点にクリスマスツリーを立てます。 これらのうち高橋君と青木君の間にあるのは、座標が $ -1,2,5 $ である地点に立てられる $ 3 $ 本です。

### Sample Explanation 2

高橋君と青木君が同じ地点に立っていることもあります。

## 样例 #1

### 输入

```
5 3 -1 6```

### 输出

```
3```

## 样例 #2

### 输入

```
-2 2 1 1```

### 输出

```
0```

## 样例 #3

### 输入

```
-177018739841739480 2436426 -80154573737296504 585335723211047198```

### 输出

```
273142010859```

# AI分析结果

### 题目内容重写

东西方向无限延伸的道路上，某个基准点向东 $x$ 米的位置的**坐标**定义为 $x$。特别地，基准点向西 $x$ 米的位置的坐标定义为 $-x$。

现在，以坐标 $A$ 为基点，每隔 $M$ 米种一棵圣诞树。也就是说，所有坐标可以表示为 $A + kM$（$k$ 为整数）的位置都会种一棵圣诞树。

高桥君和青木君分别站在坐标 $L$ 和 $R$（$L \leq R$）的位置。求高桥君和青木君之间（包括他们所在的位置）有多少棵圣诞树。

### 算法分类
数学

### 题解分析与结论

#### 题解对比
1. **Little_x_starTYJ**：通过调整 $L$ 和 $R$ 的值，找到第一个满足条件的圣诞树位置，然后计算区间内的树的数量。代码较为复杂，但思路清晰。
2. **yydfj**：通过从 $A$ 开始跳 $M$ 步，找到第一个在 $L$ 右侧的位置，然后计算区间内的树的数量。代码简洁，思路直接。
3. **FL_sleake**：根据 $A$ 与 $L$、$R$ 的相对位置，分别计算区间内的树的数量。思路清晰，代码简洁。

#### 最优关键思路
通过数学方法直接计算区间内的圣诞树数量，避免遍历。具体来说，可以通过计算 $L$ 和 $R$ 与 $A$ 的相对位置，然后利用整除和取模运算快速得到结果。

#### 可拓展之处
类似的问题可以通过数学方法直接计算区间内的特定元素数量，避免遍历。例如，计算某个区间内满足特定条件的数的个数。

#### 推荐题目
1. [P1082 同余方程](https://www.luogu.com.cn/problem/P1082)
2. [P2424 约数和](https://www.luogu.com.cn/problem/P2424)
3. [P2261 [CQOI2007]余数求和](https://www.luogu.com.cn/problem/P2261)

### 所选高星题解

#### 题解1：yydfj (5星)
**关键亮点**：代码简洁，思路直接，通过数学方法快速计算区间内的圣诞树数量。
**核心代码**：
```cpp
ll X = A + (L - A) / M * M;
cout << (R - X) / M + (X >= L && X <= R);
```
**实现思想**：从 $A$ 开始跳 $M$ 步，找到第一个在 $L$ 右侧的位置 $X$，然后计算 $X$ 到 $R$ 之间的圣诞树数量。

#### 题解2：FL_sleake (5星)
**关键亮点**：根据 $A$ 与 $L$、$R$ 的相对位置，分别计算区间内的树的数量，思路清晰，代码简洁。
**核心代码**：
```cpp
int getans(int L, int to) {
    return (to - L) / k + 1;
}
if (l <= A && A <= r) ans = getans(l, A) + getans(A, r) - 1;
else if (A < l) ans = getans(A, r) - getans(A, l - 1);
else ans = getans(l, A) - getans(r + 1, A);
```
**实现思想**：根据 $A$ 与 $L$、$R$ 的相对位置，分别计算区间内的圣诞树数量，避免重复计算。

#### 题解3：BenRheinz (4星)
**关键亮点**：通过平移区间，将问题转化为正数区间内的计算，思路巧妙。
**核心代码**：
```cpp
l -= a, r -= a;
if (l < 0) {
    ll d = (-l) / m + 1;
    l += d * m, r += d * m;
}
printf("%lld", r / m - (l - 1) / m);
```
**实现思想**：通过平移区间，将 $L$ 和 $R$ 转化为正数区间，然后利用整除运算快速计算区间内的圣诞树数量。

---
处理用时：23.03秒
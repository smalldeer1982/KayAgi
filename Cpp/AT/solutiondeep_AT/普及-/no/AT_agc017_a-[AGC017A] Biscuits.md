# 题目信息

# [AGC017A] Biscuits

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc017/tasks/agc017_a

いくつかのビスケットの入った袋が $ N $ 個あります．$ i $ 番目の袋には $ A_i $ 個のビスケットが入っています．

高木君は，このうちいくつかの袋を選んで，選んだ袋に入っているビスケットをすべて食べるということを行います． このとき，袋を一つも選ばなかったり，すべての袋を選んだりしてもかまいません．

高木君は，食べるビスケットの枚数を $ 2 $ で割ると余りが $ P $ に等しくなるようにしたいです． このような袋の選び方は何通りあるか求めてください．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 50 $
- $ P\ =\ 0,\ 1 $
- $ 1\ \leq\ A_i\ \leq\ 100 $

### Sample Explanation 1

食べるビスケットの枚数が $ 2 $ で割って $ 0 $ に等しくなるような選び方は $ 2 $ 通りです： - どちらの袋も選ばない．食べるビスケットの枚数は $ 0 $ である． - どちらの袋も選ぶ．食べるビスケットの枚数は $ 4 $ である．

### Sample Explanation 3

同じ枚数のビスケットが入っている場合でも，異なる袋は区別します．

## 样例 #1

### 输入

```
2 0

1 3```

### 输出

```
2```

## 样例 #2

### 输入

```
1 1

50```

### 输出

```
0```

## 样例 #3

### 输入

```
3 0

1 1 1```

### 输出

```
4```

## 样例 #4

### 输入

```
45 1

17 55 85 55 74 20 90 67 40 70 39 89 91 50 16 24 14 43 24 66 25 9 89 71 41 16 53 13 61 15 85 72 62 67 42 26 36 66 4 87 59 91 4 25 26```

### 输出

```
17592186044416```

# AI分析结果

### 题目内容翻译

#### [AGC017A] Biscuits

**题目描述**

有 $N$ 个装有若干块饼干的袋子。第 $i$ 个袋子里有 $A_i$ 块饼干。

高木君可以选择一些袋子，并将选中的袋子里的所有饼干吃掉。他可以选择不选任何袋子，也可以选择所有袋子。

高木君希望吃掉饼干的总数除以 $2$ 的余数等于 $P$。求满足条件的袋子选择方式有多少种。

**说明/提示**

**约束条件**

- $1 \leq N \leq 50$
- $P = 0, 1$
- $1 \leq A_i \leq 100$

**样例解释 1**

吃掉饼干的总数除以 $2$ 余数为 $0$ 的选择方式有 $2$ 种：
- 不选任何袋子，吃掉的饼干数为 $0$。
- 选择所有袋子，吃掉的饼干数为 $4$。

**样例解释 3**

即使不同袋子中的饼干数相同，不同袋子也是区分的。

**样例 #1**

**输入**

```
2 0
1 3
```

**输出**

```
2
```

**样例 #2**

**输入**

```
1 1
50
```

**输出**

```
0
```

**样例 #3**

**输入**

```
3 0
1 1 1
```

**输出**

```
4
```

**样例 #4**

**输入**

```
45 1
17 55 85 55 74 20 90 67 40 70 39 89 91 50 16 24 14 43 24 66 25 9 89 71 41 16 53 13 61 15 85 72 62 67 42 26 36 66 4 87 59 91 4 25 26
```

**输出**

```
17592186044416
```

### 算法分类

组合数学

### 题解分析与结论

题目要求计算选择袋子的方式，使得饼干总数的奇偶性与 $P$ 相同。核心思路是利用组合数学中的奇偶性性质，将问题转化为对奇数和偶数的组合计算。

#### 题解对比

1. **AirQwQ 的题解**
   - **思路**：利用奇偶性性质，偶数可以任意选择，奇数的选择方式取决于奇数的个数和 $P$ 的值。通过乘法原理计算总的选择方式。
   - **难点**：理解奇偶性对选择方式的影响，特别是当奇数个数为 $0$ 时的特判。
   - **评分**：4星
   - **亮点**：简洁明了，直接利用数学性质解决问题，代码实现高效。

2. **LCuter 的题解**
   - **思路**：使用动态规划，定义状态 $f_{i,0}$ 和 $f_{i,1}$ 分别表示前 $i$ 个数中选择若干个数和为偶数和奇数的方案数，通过状态转移方程计算最终结果。
   - **难点**：状态转移方程的设计和实现。
   - **评分**：3星
   - **亮点**：动态规划的思路清晰，但代码实现相对复杂，适合动态规划的学习者。

3. **Eason_AC 的题解**
   - **思路**：通过组合数学的方法，统计奇数和偶数的个数，然后根据 $P$ 的值计算符合条件的组合数。
   - **难点**：组合数的计算和条件判断。
   - **评分**：3星
   - **亮点**：组合数学的思路清晰，但代码实现较为复杂，适合对组合数学有一定了解的读者。

### 最优关键思路

**AirQwQ 的题解** 提供了一种简洁高效的解决方案，利用奇偶性性质直接计算选择方式。核心思想是：

- 偶数可以任意选择，选择方式为 $2^{even}$。
- 奇数的选择方式取决于奇数的个数和 $P$ 的值，选择方式为 $2^{odd-1}$。
- 特判当奇数个数为 $0$ 时，根据 $P$ 的值直接输出 $0$ 或 $2^n$。

### 代码实现

```cpp
#include <bits/stdc++.h>
using namespace std;
long long n,p,num,sum;
int main(){
    cin>>n>>p;
    for(int i=1;i<=n;i++) 
        cin>>num,sum+=(num&1);//只用存储奇数个数。
    cout<<(sum?1ll<<--n:p?0:1ll<<n)<<endl;//不开long long见祖宗。
    return 0;
}
```

### 拓展思路

类似的问题可以扩展到其他模数的情况，或者更复杂的组合问题。例如，计算选择方式使得总数模 $3$ 等于某个值，或者计算满足多个条件的组合数。

### 推荐题目

1. [P1351 组合数问题](https://www.luogu.com.cn/problem/P1351)
2. [P2822 组合数问题](https://www.luogu.com.cn/problem/P2822)
3. [P3197 [HNOI2008]越狱](https://www.luogu.com.cn/problem/P3197)

### 个人心得

**AirQwQ 的题解** 中提到了一些位运算的技巧，如 `num&1` 等价于 `num%2`，`num<<n` 等价于 `num*pow(2,n)`，这些技巧在竞赛中可以提高代码的效率。此外，特判的处理方式也值得学习，避免了一些边界情况的错误。

---
处理用时：31.29秒
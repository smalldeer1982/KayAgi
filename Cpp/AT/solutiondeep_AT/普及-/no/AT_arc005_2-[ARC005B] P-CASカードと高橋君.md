# 题目信息

# [ARC005B] P-CASカードと高橋君

## 题目描述

高桥君为了准备即将到来的7月27日土用丑日，打算邮购一些高级鳗鱼食材，通过网上银行来支付。
高桥君使用的银行卡背面有下图所示的9×9密码表。支付的时候从表中某一位置开始根据指定的方向连续读4个数字作为验证码输入，验证是否是本人操作。
下图的例子是从左边第一列，上方第一行开始，按斜右下的方向连续读4个数字。此时读出来的数字是7930.
![从1行1列斜右下方读4个数字的例子](https://cdn.luogu.org/upload/vjudge_pic/AT212/1322cf9dc84e8f92c1d1bc5a04632c79ef77742b.png)
如果读数的过程中超过了边界，就要将方向改变，然后继续读剩余的数字。改变方向的规则如下：
- 原方向是上下左右时
 - 将原方向180°调转
- 原方向是斜向时
 - 在对角线上时
   - 将原方向180°调转
 - 遇到左右边界时
   - 上下方向不变，左右方向调转
 - 遇到上下边界时
   - 左右方向不变，上下方向调转
   
总之如下图所示
![方向改变规则一览](https://cdn.luogu.org/upload/vjudge_pic/AT212/3ac92d5cd0fc3557db9edd76ec244f9fa94d4afd.png)
给出密码表、起始位置和方向，要求输出相应的4位验证码。

## 说明/提示

### 样例1
- 3列5行，右方向
![](https://cdn.luogu.org/upload/vjudge_pic/AT212/5e27e15dada42139db5cd3b98f6db7752ae9a657.png)
### 样例2
- 8列9行，左上方向
![](https://cdn.luogu.org/upload/vjudge_pic/AT212/9dc284a6840179386ceb1db5c03530bf6fc8a940.png)
### 样例3
- 5列7行，下方向，遇到下边界，改变方向继续读数
![](https://cdn.luogu.org/upload/vjudge_pic/AT212/d911646cf5ec9ec68da2abe6f843348c89f7f7be.png)
### 样例4
- 2行2列，左上方向，遇到边界，改变方向继续读数
![](https://cdn.luogu.org/upload/vjudge_pic/AT212/f7d82020d9c29a8c427cfb43bd1e4427c999dbd7.png)
### 样例5
- 8行7列，右下方向，遇到边界，改变方向继续读数
![](https://cdn.luogu.org/upload/vjudge_pic/AT212/2aaec32b8dda904f581a7276183c4b15c70541a9.png)

# AI分析结果

### 题目内容
高桥君为了准备即将到来的7月27日土用丑日，打算邮购一些高级鳗鱼食材，通过网上银行来支付。高桥君使用的银行卡背面有下图所示的9×9密码表。支付的时候从表中某一位置开始根据指定的方向连续读4个数字作为验证码输入，验证是否是本人操作。下图的例子是从左边第一列，上方第一行开始，按斜右下的方向连续读4个数字。此时读出来的数字是7930。如果读数的过程中超过了边界，就要将方向改变，然后继续读剩余的数字。改变方向的规则如下：
- 原方向是上下左右时
  - 将原方向180°调转
- 原方向是斜向时
  - 在对角线上时
    - 将原方向180°调转
  - 遇到左右边界时
    - 上下方向不变，左右方向调转
  - 遇到上下边界时
    - 左右方向不变，上下方向调转

给出密码表、起始位置和方向，要求输出相应的4位验证码。

### 算法分类
模拟

### 题解分析与结论
该题目主要考察模拟能力，需要根据给定的起始位置和方向，按照规则在9×9的密码表中读取4位验证码。题解的核心难点在于处理边界情况时的方向调整。大多数题解通过定义方向数组和边界判断来实现模拟过程。

### 精选题解

#### 1. 作者：Blikewsr (赞：10)
**星级：5星**
**关键亮点：**
- 使用方向数组`mx`和`my`来简化方向移动的处理。
- 通过边界判断和方向调整的简洁实现，代码清晰易读。
- 使用字符串数组`s`来存储方向指令，便于查找和匹配。

**核心代码：**
```cpp
if((mx[k]+x>9)||(mx[k]+x<1)) mx[k]=-mx[k];
if((my[k]+y>9)||(my[k]+y<1)) my[k]=-my[k];
x+=mx[k];
y+=my[k];
ans+=mp[y][x];
```
**实现思想：**
通过判断当前移动是否超出边界，若超出则反转方向，继续移动并记录验证码。

#### 2. 作者：Doveqise (赞：4)
**星级：4星**
**关键亮点：**
- 使用`dx`和`dy`数组来简化方向移动的处理。
- 通过边界判断和方向调整的简洁实现，代码清晰易读。
- 使用字符串数组`s`来存储方向指令，便于查找和匹配。

**核心代码：**
```cpp
if(x+ddx<0||x+ddx>=9)ddx=-ddx;
if(y+ddy<0||y+ddy>=9)ddy=-ddy;
x+=ddx;y+=ddy;
printf("%c",m[y][x]);
```
**实现思想：**
通过判断当前移动是否超出边界，若超出则反转方向，继续移动并记录验证码。

#### 3. 作者：liangbowen (赞：0)
**星级：4星**
**关键亮点：**
- 使用方向数组`dx8`和`dy8`来简化方向移动的处理。
- 通过边界判断和方向调整的简洁实现，代码清晰易读。
- 使用字符串数组`order`来存储方向指令，便于查找和匹配。

**核心代码：**
```cpp
if (n > 9 || n < 1 || m > 9 || m < 1){
    n -= x; m -= y;
    if (n + x < 1 || n + x > 9) x *= -1;
    if (m + y < 1 || m + y > 9) y *= -1; 
    n += x; m += y;
}
```
**实现思想：**
通过判断当前移动是否超出边界，若超出则反转方向，继续移动并记录验证码。

### 最优关键思路或技巧
1. **方向数组的使用**：通过定义方向数组`dx`和`dy`，可以简化方向移动的处理，减少代码冗余。
2. **边界判断与方向调整**：通过判断当前移动是否超出边界，若超出则反转方向，继续移动并记录验证码。
3. **字符串数组存储方向指令**：使用字符串数组存储方向指令，便于查找和匹配，提高代码的可读性和可维护性。

### 可拓展之处
该题目可以拓展到更大的密码表或更复杂的边界规则，进一步考察模拟能力和边界处理能力。

### 推荐题目
1. [P1002 过河卒](https://www.luogu.com.cn/problem/P1002)
2. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219)
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036)

### 个人心得摘录
- **Blikewsr**：通过定义方向数组和边界判断，简化了方向移动的处理，代码清晰易读。
- **Doveqise**：使用`dx`和`dy`数组来简化方向移动的处理，代码简洁明了。
- **liangbowen**：通过边界判断和方向调整的简洁实现，代码清晰易读。

---
处理用时：32.37秒
# 题目信息

# [ARC006B] あみだくじ

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc006/tasks/arc006_2

 高橋君は学校で班のリーダーを決めなければいけなくなったので、あみだくじを用いて決めることにしました。  
 あみだくじとは、複数の縦線から $ 1 $ 本を選び、その上端から下端へと辿っていき、途中で横線があれば、その横線を通り繋がっている隣接する縦線へと移動し、また下へと進みます。  
 今日はたまたま手元に紙がなかったので、パソコン上で `|`、`-`、`o` を用いて以下のようなあみだくじを作りました。

```

| | | | | | | | |
|-| | |-| | |-| |
| | |-| | |-| | |
| |-| | | | | |-|
| | | |-| | | |-|
| | |-| |-| | | |
|-| | |-| | |-| |
| | | | | |-| | |
            o
```

 `o` がある位置に到達した人がリーダーになります。  
 実は高橋君はリーダーになりたかったので、どの縦線を選べば `o` に辿り着くのか知りたいです。  
  
 左から何番目の縦線を選べばリーダーになれるのかを求めなさい。 入力は以下の形式で標準入力から与えられる。 > $ N $ $ L $ |x|x|‥‥| |x|x|‥‥| |x|x|‥‥| : : : : : : : : | | |‥‥| y y y‥‥y

- 入力は $ L+2 $ 行ある。
- $ 1 $ 行目には、あみだくじの縦線の本数を表す整数 $ N(1≦N≦10) $ とあみたくじの長さを表す整数 $ L(1≦L≦20) $が与えられる。
- $ 2 $ 行目からの $ L $ 行には、あみたくじの形が与えられる。
- $ i $ 行目 $ (2≦i≦L+1) $ には $ 2N-1 $ 文字の記号が与えられる。
- 各行の $ j $ 番目の記号は、以下のようになっている。 
  - $ j $ が奇数の時：`|`
  - $ j $ が偶数の時(上記のxの位置)：`-` または ` `(空白)
- `|` はあみだくじの縦線を表し、`-`はその両端の縦線を繋ぐ横線であることを表す。また、空白はその位置に横線が無いことを表す。
- `|` を $ 1 $ つ挟んで左右に隣り合ったxの位置の両方が `-` という入力は存在しない。

- $ L+2 $ 行目には $ 2N-1 $ 文字の記号が与えられる。
- 各行の $ j $ 番目の記号は、以下のようになっている。 
  - $ j $ が奇数の時(上記のyの位置)：`o` または ` `(空白)
  - $ j $ が偶数の時：` `(空白)
- `o` は $ L+2 $ 行目にただ $ 1 $ つのみ与えられる。
 

 あみだくじを辿って `o` に到達するために選ぶべき縦線は左から何番目か $ 1 $ 行で出力せよ。  
 なお、最後には改行を出力せよ。 ```

3 2
| |-|
|-| |
o    
```

 ```

3
```

- 一番右の縦線を選ぶと、再左端に到達する。つまり、左から $ 3 $ 番目を選択すると、 `o` のある位置に到達できる。
 
```

10 2
| |-| |-| |-| |-| |
|-| |-| |-| |-| |-|
            o      
```

 ```

9
```

- 左から $ 9 $ 番目の縦線から辿ると、`o` の位置に到達できる。
- したがって、答えは $ 9 $ になる。
 
```

1 5
|
|
|
|
|
o
```

 ```

1
```

- 縦線が $ 1 $ 本なので、左から $ 1 $ 番目の縦線が答えとなる。
 
```

4 2
| | | |
| | | |
      o
```

 ```

4
```

- 横線が $ 1 $ 本も存在しないので、`o` のある縦線を選べば良い。
- したがって左から $ 4 $ 番目の縦線が答えとなる。
 
```

9 8
| | | | | | | | |
|-| | |-| | |-| |
| | |-| | |-| | |
| |-| | | | | |-|
| | | |-| | | |-|
| | |-| |-| | | |
|-| | |-| | |-| |
| | | | | |-| | |
            o    
```

 ```

3
```

# AI分析结果

### 题目内容重写
高橋君需要在班级中选出小组的领导者，他决定使用“あみだくじ”（一种抽签方式）来决定。あみだくじ由多条竖线组成，参与者从其中一条竖线的顶端开始，沿着竖线向下移动，遇到横线时则移动到相邻的竖线，并继续向下移动。最终到达标记为 `o` 的位置的人将成为领导者。

高橋君希望自己成为领导者，因此他想知道应该选择哪一条竖线才能到达 `o` 的位置。输入格式如下：

- 第一行包含两个整数 $N$ 和 $L$，分别表示竖线的数量和あみだくじ的长度。
- 接下来的 $L$ 行描述了あみだくじ的结构，每行包含 $2N-1$ 个字符，表示竖线和横线的位置。
- 最后一行包含 $2N-1$ 个字符，表示 `o` 的位置。

输出应选择哪一条竖线才能到达 `o` 的位置。

### 算法分类
模拟

### 题解分析与结论
1. **Nygglatho 的题解**（评分：4星）
   - **关键亮点**：采用逆推法，从 `o` 的位置向上回溯，模拟移动过程，避免了正向模拟的复杂性。
   - **实现思路**：首先确定 `o` 的位置，然后从下往上逐行检查是否有横线，根据横线的位置调整当前所在的竖线。
   - **代码核心**：
     ```cpp
     for (int i = l; i >= 1; i--) {
         if (a[i][d - 1] == '-') {
             ans--;
             d -= 2;
         } else if (a[i][d + 1] == '-') {
             ans++;
             d += 2;
         }
     }
     ```

2. **arrow_king 的题解**（评分：4星）
   - **关键亮点**：同样采用逆推法，但在输入处理上更加细致，避免了换行符的影响。
   - **实现思路**：从 `o` 的位置开始，逐行向上检查横线，并根据横线的位置调整当前所在的竖线。
   - **代码核心**：
     ```cpp
     for (int i = l; i >= 1; i--) {
         if (c[num + 1][i] == '-') num += 2;
         else if (c[num - 1][i] == '-') num -= 2;
     }
     ```

3. **yzc0x13269d6 的题解**（评分：3星）
   - **关键亮点**：采用正向模拟，枚举每条竖线，模拟从顶端到底部的移动过程。
   - **实现思路**：对于每条竖线，从上到下逐行检查横线，并根据横线的位置调整当前所在的竖线。
   - **代码核心**：
     ```cpp
     for (int j = 1; j <= l; j++) {
         if (a[j][now] == '-') now++;
         else if (a[j][now - 1] == '-') now--;
     }
     ```

### 最优关键思路
逆推法是从 `o` 的位置向上回溯，避免了正向模拟的复杂性，代码实现简洁且高效。

### 拓展思路
类似的问题可以扩展到其他路径模拟或状态转移问题，如迷宫问题、图的最短路径问题等。

### 推荐题目
1. [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141)
2. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219)
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036)

---
处理用时：21.86秒
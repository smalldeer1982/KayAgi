# 题目信息

# [ARC107B] Quadruple

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc107/tasks/arc107_b

整数 $ N,K $ が与えられます． $ 4 $ つの整数の組 $ (a,b,c,d) $ であって，以下の条件を両方満たすものは何個あるでしょうか．

- $ 1\ \leq\ a,b,c,d\ \leq\ N $
- $ a+b-c-d=K $

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ -2(N-1)\ \leq\ K\ \leq\ 2(N-1) $
- 入力される数はすべて整数．

### Sample Explanation 1

以下の $ 4 $ 通りです． - $ (a,b,c,d)=(2,1,1,1) $ - $ (a,b,c,d)=(1,2,1,1) $ - $ (a,b,c,d)=(2,2,2,1) $ - $ (a,b,c,d)=(2,2,1,2) $

## 样例 #1

### 输入

```
2 1```

### 输出

```
4```

## 样例 #2

### 输入

```
2525 -425```

### 输出

```
10314607400```

# AI分析结果

### 题目内容重写

**题目描述**

给定整数 $N$ 和 $K$。求满足以下两个条件的四元组 $(a,b,c,d)$ 的个数：

1. $1 \leq a,b,c,d \leq N$
2. $a + b - c - d = K$

**说明/提示**

**约束条件**

- $1 \leq N \leq 10^5$
- $-2(N-1) \leq K \leq 2(N-1)$
- 输入的所有数都是整数。

**样例解释 1**

以下有4种满足条件的四元组：
- $(a,b,c,d)=(2,1,1,1)$
- $(a,b,c,d)=(1,2,1,1)$
- $(a,b,c,d)=(2,2,2,1)$
- $(a,b,c,d)=(2,2,1,2)$

**样例 #1**

**输入**

```
2 1
```

**输出**

```
4
```

**样例 #2**

**输入**

```
2525 -425
```

**输出**

```
10314607400
```

### 算法分类

**组合数学**

### 综合分析与结论

本题的核心在于如何高效地计算满足条件的四元组 $(a,b,c,d)$ 的个数。由于 $N$ 的范围较大（$1 \leq N \leq 10^5$），直接枚举所有可能的四元组会导致时间复杂度过高，因此需要采用数学方法进行优化。

通过将条件 $a + b - c - d = K$ 转化为 $a + b = c + d + K$，我们可以将问题转化为计算满足 $a + b = x$ 和 $c + d = x - K$ 的 $(a,b)$ 和 $(c,d)$ 的组合数。然后，通过预处理所有可能的 $x$ 值，计算对应的组合数，并最终累加得到结果。

### 推荐题解

由于暂无题解，以下给出通用建议与扩展思路：

1. **预处理组合数**：首先预处理所有可能的 $x$ 值，计算满足 $a + b = x$ 的组合数。由于 $a$ 和 $b$ 的范围都是 $1$ 到 $N$，$x$ 的范围是 $2$ 到 $2N$。对于每个 $x$，组合数为 $\min(x-1, 2N - x + 1)$。

2. **累加结果**：对于每个 $x$，计算满足 $c + d = x - K$ 的组合数，并将其与 $a + b = x$ 的组合数相乘，累加到最终结果中。

3. **边界处理**：注意处理 $x - K$ 超出范围的情况，即当 $x - K < 2$ 或 $x - K > 2N$ 时，组合数为 $0$。

### 关键思路与技巧

- **数学转化**：将原问题转化为计算满足 $a + b = x$ 和 $c + d = x - K$ 的组合数，从而避免直接枚举四元组。
- **预处理与累加**：通过预处理所有可能的 $x$ 值，计算对应的组合数，并最终累加得到结果，优化时间复杂度。

### 推荐题目

1. **洛谷 P1029**：最大公约数和最小公倍数问题，考察数学转化与组合计算。
2. **洛谷 P1036**：选数，考察组合数与枚举优化。
3. **洛谷 P1044**：栈，考察组合数学与递推关系。

---
处理用时：20.55秒
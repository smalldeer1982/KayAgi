# 题目信息

# [ARC117B] ARC Wrecker

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc117/tasks/arc117_b

AtCoder 街道には $ N $ 個のビルが建設されています。最初、左から $ i $ 番目のビルは $ A_i $ 階建てです。

ARC 解体業者の社長である高橋君は、以下の操作を好きな回数だけ行うことができます。$ 1 $ 回も操作を行わないことも可能です。

- 好きな正の整数 $ X $ を選び、$ X $ 階の高さから大砲を発射する。そのとき、現時点で $ X $ 階建て以上であるすべてのビルについて、階数が $ 1 $ 減少する。

あり得る最終的なビルの景観の数を $ 10^{9}\ +\ 7 $ で割った余りを求めてください。

ただし、景観 A と景観 B が異なるとは、以下のことを指します。

- 景観 A における、左から $ i $ 番目のビルの高さを $ P_i $ とする。
- 景観 B における、左から $ i $ 番目のビルの高さを $ Q_i $ とする。
- $ P_i\ \neq\ Q_i $ となる $ i $ が $ 1 $ つでも存在する場合、景観 A と景観 B は異なる。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 100000 $
- $ 1\ \leq\ A_i\ \leq\ 10^{9} $
- 入力はすべて整数

### Sample Explanation 1

操作後のビルの高さとしてあり得るものは、以下の $ 4 $ 通りです。 - (ビル $ 1 $ の階数, ビル $ 2 $ の階数) = $ (0,\ 0) $ - (ビル $ 1 $ の階数, ビル $ 2 $ の階数) = $ (0,\ 1) $ - (ビル $ 1 $ の階数, ビル $ 2 $ の階数) = $ (1,\ 1) $ - (ビル $ 1 $ の階数, ビル $ 2 $ の階数) = $ (1,\ 2) $

### Sample Explanation 3

全部で $ 20192492160000 $ 通りの景観があり得ますが、それを $ 10^{9}\ +\ 7 $ で割った余りである $ 492018656 $ を出力すると正解になります。

## 样例 #1

### 输入

```
2

1 2```

### 输出

```
4```

## 样例 #2

### 输入

```
6

5 3 4 1 5 2```

### 输出

```
32```

## 样例 #3

### 输入

```
7

314 159 265 358 979 323 846```

### 输出

```
492018656```

# AI分析结果

### 题目内容重写

AtCoder 街道上有 $ N $ 座建筑物。最初，从左到右第 $ i $ 座建筑物有 $ A_i $ 层。

ARC 拆除公司的社长高桥君可以进行以下操作任意次（包括不进行任何操作）：

- 选择一个正整数 $ X $，从 $ X $ 层高度发射大炮。此时，所有当前层数大于或等于 $ X $ 的建筑物，其层数将减少 $ 1 $。

求所有可能的最终建筑物景况的数量，结果对 $ 10^{9} + 7 $ 取模。

景况 A 和景况 B 被认为是不同的，当且仅当存在至少一个 $ i $，使得在景况 A 中第 $ i $ 座建筑物的层数 $ P_i $ 与在景况 B 中第 $ i $ 座建筑物的层数 $ Q_i $ 不同。

### 算法分类
组合数学

### 题解分析与结论

该题的核心在于理解操作对建筑物层数的影响，并计算所有可能的最终景况的数量。由于每次操作可以选择任意 $ X $，且操作次数不限，因此需要找到一种方法来计算所有可能的层数组合。

#### 关键思路
1. **排序与差分**：首先对建筑物的初始层数进行排序，然后计算相邻建筑物层数之间的差值。这些差值决定了每个建筑物可以独立减少的层数范围。
2. **组合数学**：每个建筑物的层数减少范围是独立的，因此最终的景况数量等于每个建筑物可能层数的乘积。具体来说，对于排序后的建筑物，第 $ i $ 个建筑物的层数可以减少的范围是 $ 0 $ 到 $ A_i - A_{i-1} $（假设 $ A_0 = 0 $），因此总的景况数量为 $ \prod_{i=1}^{N} (A_i - A_{i-1} + 1) $。
3. **模运算**：由于结果可能非常大，需要对 $ 10^{9} + 7 $ 取模。

#### 难点对比
- **理解操作的影响**：操作选择 $ X $ 后，所有层数大于或等于 $ X $ 的建筑物层数都会减少 $ 1 $。这意味着操作的影响是全局的，而不是局部的。
- **计算所有可能的景况**：由于操作次数不限，且每次操作可以选择任意 $ X $，直接枚举所有可能的操作序列是不可行的。需要通过数学方法简化计算。

#### 最优关键思路
通过排序和差分，将问题转化为每个建筑物层数减少范围的独立计算，最终通过组合数学的方法计算出所有可能的景况数量。

### 推荐题目
1. [P3811 【模板】乘法逆元](https://www.luogu.com.cn/problem/P3811)
2. [P1495 【模板】中国剩余定理](https://www.luogu.com.cn/problem/P1495)
3. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)

### 代码实现
```cpp
#include <bits/stdc++.h>
using namespace std;
const int MOD = 1e9 + 7;

int main() {
    int N;
    cin >> N;
    vector<int> A(N);
    for (int i = 0; i < N; ++i) {
        cin >> A[i];
    }
    sort(A.begin(), A.end());
    long long ans = 1;
    int prev = 0;
    for (int i = 0; i < N; ++i) {
        ans = ans * (A[i] - prev + 1) % MOD;
        prev = A[i];
    }
    cout << ans << endl;
    return 0;
}
```

### 代码核心思想
1. **排序**：首先对建筑物的初始层数进行排序。
2. **计算差值**：计算每个建筑物与前一建筑物层数的差值，并加 $ 1 $ 得到该建筑物可能的层数范围。
3. **累乘**：将所有建筑物的可能层数范围相乘，并对 $ 10^{9} + 7 $ 取模，得到最终结果。

---
处理用时：25.09秒
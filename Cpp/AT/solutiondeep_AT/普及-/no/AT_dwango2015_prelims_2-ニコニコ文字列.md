# 题目信息

# ニコニコ文字列

## 题目描述

[problemUrl]: https://atcoder.jp/contests/dwango2015-prelims/tasks/dwango2015_prelims_2

$ 0 $ から $ 9 $ の数字から成る文字列 $ S $ が与えられます。

ある文字列 $ X $ について、$ X=&quot;25&quot; $ または $ X=&quot;2525&quot; $ または $ X=&quot;252525&quot; $ …… というふうに $ &quot;25&quot; $ を何回か繰り返した文字列になっているとき、$ X $ はニコニコ文字列であるといいます。 たとえば $ &quot;25&quot; $ や $ &quot;25252525&quot; $ はニコニコ文字列ですが、$ &quot;123&quot; $ や $ &quot;225&quot; $ はニコニコ文字列ではありません。

あなたの仕事は、文字列 $ S $ について、ニコニコ文字列となるような連続した部分文字列の取り出し方が何通りあるかを答えることです。 文字列として同じであっても、取り出し位置が異なっていれば別々に数えます。

## 说明/提示

### 部分点

この問題には部分点が設定されています。

$ N≦2000 $ を満たすデータセット $ 1 $ にすべて正解すると、$ 30 $ 点が得られます。 追加制約のないデータセット 2 にすべて正解すると、上記のデータセットに加えてさらに $ 70 $ 点が得られ、全体で $ 100 $ 点が得られます。

### Sample Explanation 1

$ S=&quot;2525&quot; $のケースです。部分文字列が $ &quot;25&quot; $ となる取り出し方が $ 2 $ 通り、$ &quot;2525&quot; $ となる取り出し方が $ 1 $ 通りあるので合計 $ 3 $ 通りを出力します。

## 样例 #1

### 输入

```
2525```

### 输出

```
3```

## 样例 #2

### 输入

```
1251251252525```

### 输出

```
8```

## 样例 #3

### 输入

```
25225```

### 输出

```
2```

## 样例 #4

### 输入

```
252252252252252252```

### 输出

```
6```

## 样例 #5

### 输入

```
20061212```

### 输出

```
0```

# AI分析结果

### 题目翻译
**题目描述**

给定一个由数字0到9组成的字符串$S$。

对于某个字符串$X$，如果$X="25"$或$X="2525"$或$X="252525"$……即由"25"重复若干次组成的字符串，则称$X$为ニコニコ文字列。例如，"25"和"25252525"是ニコニコ文字列，但"123"和"225"不是。

你的任务是，对于给定的字符串$S$，计算出有多少个连续的子串是ニコニコ文字列。即使子串相同，只要它们的起始和结束位置不同，就视为不同的子串。

**说明/提示**

### 部分点

本题有部分分。

对于满足$N≦2000$的数据集1，全部正确可得30分。对于无额外限制的数据集2，全部正确可得70分，总计100分。

**样例解释1**

$S="2525"$的情况。子串为"25"的取法有2种，子串为"2525"的取法有1种，因此输出3。

### 算法分类
字符串

### 题解分析与结论
这道题的核心是找出字符串中所有由"25"重复组成的子串，并统计它们的个数。由于数据范围较大（$N \leq 10^5$），暴力枚举子串的方法不可行。因此，题解普遍采用线性扫描的方法，通过标记或直接计数来处理连续的"25"子串。

### 评分较高的题解

#### 1. 作者：亦枫 (4星)
**关键亮点**：
- 通过标记连续的"25"子串，简化了问题。
- 使用数学公式计算连续"25"子串的贡献，避免了重复计算。
- 代码结构清晰，逻辑严谨。

**核心代码**：
```cpp
for(int i=0;i<s.length();i++){
    if(a[i]==-1){
        tmp++;
    }
    else if(tmp!=0){
        tmp=tmp/2;
        ans+=(tmp*(tmp+1)/2);
        tmp=0;
    }
}
```
**核心思想**：通过标记数组记录"25"的位置，然后统计连续的"25"子串的个数，并利用公式计算其对答案的贡献。

#### 2. 作者：Egg_eating_master (4星)
**关键亮点**：
- 使用`sum`变量记录当前连续的"25"个数，简洁高效。
- 通过字符串末尾添加空格，避免了边界条件的处理。
- 代码简洁，思路清晰。

**核心代码**：
```cpp
for(int i=0;i<s.size();i++){
    if(s.substr(i,2)=="25")sum++,i++;
    else ans+=sum*(sum+1)/2,sum=0;
}
```
**核心思想**：扫描字符串，遇到"25"时增加`sum`，否则累加当前`sum`的贡献并重置`sum`。

#### 3. 作者：SfumatoCannon_ (4星)
**关键亮点**：
- 通过两遍扫描，先标记"25"子串，再计算贡献，思路清晰。
- 代码结构合理，注释详细。
- 处理了"25"长度为2的特殊情况，避免了重复计数。

**核心代码**：
```cpp
for (i=0;i<strlen(str)+1;i++){
    if (a[i]==1) t++;
    else if (t!=0){
        t=t/2;
        ans+=t*(t+1)/2;
        t=0;
    }
}
```
**核心思想**：第一遍扫描标记"25"子串，第二遍扫描计算连续"25"子串的贡献。

### 最优关键思路或技巧
- **线性扫描**：通过一次或两次线性扫描，标记或直接计数连续的"25"子串。
- **数学公式**：利用公式$\frac{(n+1) \times n}{2}$计算连续"25"子串的贡献，避免重复计算。
- **边界处理**：通过添加边界字符或特殊处理，避免边界条件的复杂判断。

### 可拓展之处
- **类似问题**：可以扩展到其他由特定子串重复组成的字符串问题，如"ABCABC"等。
- **优化思路**：可以考虑使用滑动窗口或动态规划进一步优化时间复杂度。

### 推荐题目
1. [P3375 【模板】KMP字符串匹配](https://www.luogu.com.cn/problem/P3375)
2. [P3805 【模板】manacher算法](https://www.luogu.com.cn/problem/P3805)
3. [P1496 【模板】AC自动机（简单版）](https://www.luogu.com.cn/problem/P1496)

### 个人心得摘录
- **亦枫**：通过标记数组简化问题，避免了复杂的边界处理。
- **Egg_eating_master**：添加空格处理边界条件，避免了额外的判断。
- **SfumatoCannon_**：两遍扫描的思路清晰，处理了"25"长度为2的特殊情况。

---
处理用时：28.05秒
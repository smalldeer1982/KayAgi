# 题目信息

# Mex Boxes

## 题目描述

[problemUrl]: https://atcoder.jp/contests/keyence2021/tasks/keyence2021_b

すぬけ君は一つの整数が書かれたボールを $ N $ 個持っています。 ボールに書かれている数はそれぞれ $ a_1,\ a_2,\ \ldots,\ a_N $ です。

すぬけ君はこの $ N $ 個のボールを $ K $ 個の箱に割り振って入れることにしました。どのボールも箱に入れる必要はありますが、ボールが入っていない箱やボールが複数入っている箱があっても構いません。

すぬけ君がボールを入れ終わるとそれぞれの箱の蓋に整数が表示されます。 表示される整数を $ x $ とすると、$ x $ は箱の中に $ x $ が書かれたボールが存在しないような最小の **非負** 整数です。 例えば、空の箱の蓋には $ 0 $ が、中に $ 0,1,3,5 $ と書かれたボールが入っている箱の蓋には $ 2 $ が、中に $ 1,2,3 $ と書かれたボールが入っている箱の蓋には $ 0 $ が表示されます。

箱の蓋に表示される整数の総和としてありうる値の最大値を求めてください。

## 说明/提示

### 制約

- 与えられる入力は全て整数
- $ 1\ \leq\ K\ \leq\ N\ \leq\ 3\ \times\ 10^{5} $
- $ 0\ \leq\ a_i\ <\ N $

### Sample Explanation 1

\- 箱に入っているボールに書かれた数の集合が $ \{0,1,2\ \},\{0\} $ となるように割り振って入れるのが最適です。 - 箱の蓋には $ 3,1 $ がそれぞれ表示され、これらの総和は $ 4 $ となります。

### Sample Explanation 2

\- 箱に入っているボールに書かれた数の(多重)集合が $ \{0,1,1,2,3\},\ \{\} $ となるように割り振って入れるのが最適です。 - 箱の蓋には $ 4,0 $ がそれぞれ表示され、これらの総和は $ 4 $ となります。 - ボールの入っていない箱があっても構わないことに注意してください。

## 样例 #1

### 输入

```
4 2

0 1 0 2```

### 输出

```
4```

## 样例 #2

### 输入

```
5 2

0 1 1 2 3```

### 输出

```
4```

## 样例 #3

### 输入

```
20 4

6 2 6 8 4 5 5 8 4 1 7 8 0 3 6 1 1 8 3 0```

### 输出

```
11```

# AI分析结果

### 题目重写

#### Mex Boxes

**题目描述**

すぬけ君有 $N$ 个球，每个球上写有一个整数，分别为 $a_1, a_2, \ldots, a_N$。他决定将这些球分配到 $K$ 个箱子中。每个球必须放入一个箱子，但允许某些箱子为空或包含多个球。

当球被放入箱子后，每个箱子的盖子上会显示一个整数 $x$，其中 $x$ 是箱中球上未出现的最小非负整数。例如，空箱子的盖子会显示 $0$，箱中有 $0, 1, 3, 5$ 的球时盖子会显示 $2$，箱中有 $1, 2, 3$ 的球时盖子会显示 $0$。

求所有箱子盖子上显示的整数的总和的最大值。

**说明/提示**

**约束条件**

- 所有输入均为整数
- $1 \leq K \leq N \leq 3 \times 10^5$
- $0 \leq a_i < N$

**样例解释**

**样例 1**

输入：
```
4 2
0 1 0 2
```
输出：
```
4
```
解释：
- 将球分配到两个箱子中，第一个箱子包含 $0, 1, 2$，第二个箱子包含 $0$。
- 第一个箱子的盖子显示 $3$，第二个箱子的盖子显示 $1$，总和为 $4$。

**样例 2**

输入：
```
5 2
0 1 1 2 3
```
输出：
```
4
```
解释：
- 将球分配到两个箱子中，第一个箱子包含 $0, 1, 1, 2, 3$，第二个箱子为空。
- 第一个箱子的盖子显示 $4$，第二个箱子的盖子显示 $0$，总和为 $4$。

**样例 3**

输入：
```
20 4
6 2 6 8 4 5 5 8 4 1 7 8 0 3 6 1 1 8 3 0
```
输出：
```
11
```

### 算法分类

贪心

### 综合分析与结论

题目要求将 $N$ 个球分配到 $K$ 个箱子中，使得所有箱子盖子上显示的整数的总和最大。每个箱子盖子上显示的整数是该箱子中球上未出现的最小非负整数（Mex）。

核心思路是利用贪心算法，尽可能让每个箱子的 Mex 最大化。具体来说，可以通过统计每个数的出现次数，然后按照从小到大的顺序分配球，使得每个箱子的 Mex 尽可能大。

### 最优关键思路或技巧

1. **统计频率**：首先统计每个数的出现次数。
2. **贪心分配**：按照从小到大的顺序分配球，确保每个箱子的 Mex 尽可能大。
3. **计算 Mex**：对于每个箱子，Mex 是未出现的最小非负整数。

### 推荐题目

1. [P1047 装箱问题](https://www.luogu.com.cn/problem/P1047)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1168 中位数](https://www.luogu.com.cn/problem/P1168)

### 通用建议与扩展思路

- **贪心算法的应用**：在处理分配问题时，贪心算法通常能够提供有效的解决方案。关键在于如何定义“最优”的分配策略。
- **统计与排序**：在处理涉及频率和顺序的问题时，统计和排序是常用的技巧。
- **Mex 的计算**：理解 Mex 的定义及其计算方法，有助于解决类似的问题。

### 核心代码片段

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int N, K;
    cin >> N >> K;
    vector<int> a(N);
    for (int i = 0; i < N; ++i) cin >> a[i];
    
    vector<int> cnt(N + 1, 0);
    for (int x : a) cnt[x]++;
    
    int ans = 0;
    for (int i = 0; i < N; ++i) {
        int take = min(cnt[i], K);
        ans += take;
        K -= take;
        if (K == 0) break;
    }
    
    cout << ans << endl;
    return 0;
}
```

**核心实现思想**：
- 统计每个数的出现次数。
- 按照从小到大的顺序分配球，确保每个箱子的 Mex 尽可能大。
- 计算所有箱子 Mex 的总和。

---
处理用时：26.00秒
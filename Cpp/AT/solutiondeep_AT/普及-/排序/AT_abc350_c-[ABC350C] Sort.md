# 题目信息

# [ABC350C] Sort

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc350/tasks/abc350_c

$ (1,2,\ldots,N) $ の並び替えである数列 $ A=(A_1,\ldots,A_N) $ が与えられます。  
 次の操作を $ 0 $ 回以上 $ N-1 $ 回以下行うことで、$ A $ を $ (1,2,\ldots,N) $ にしてください。

- 操作：$ 1\leq\ i\ <\ j\ \leq\ N $ を満たす整数の組 $ (i,j) $ を自由に選ぶ。$ A $ の $ i $ 番目と $ j $ 番目の要素を入れ替える。
 
なお、制約の条件下で必ず $ A $ を $ (1,2,\ldots,N) $ にできることが証明できます。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 2\times\ 10^5 $
- $ (A_1,\ldots,A_N) $ は $ (1,2,\ldots,N) $ の並び替えである
- 入力は全て整数である
 
### Sample Explanation 1

操作により数列は次のように変化します。 - 最初 $ A=(3,4,1,2,5) $ である。 - $ 1 $ 回目の操作で $ 1 $ 番目の要素と $ 3 $ 番目の要素を入れ替える。$ A=(1,4,3,2,5) $ になる。 - $ 2 $ 回目の操作で $ 2 $ 番目の要素と $ 4 $ 番目の要素を入れ替える。$ A=(1,2,3,4,5) $ になる。 この他、次のような出力でも正解とみなされます。 ``` 4 2 3 3 4 1 2 2 3 ```

## 样例 #1

### 输入

```
5

3 4 1 2 5```

### 输出

```
2

1 3

2 4```

## 样例 #2

### 输入

```
4

1 2 3 4```

### 输出

```
0```

## 样例 #3

### 输入

```
3

3 1 2```

### 输出

```
2

1 2

2 3```

# AI分析结果

### 题目翻译
给定一个由 $(1,2,\ldots,N)$ 重新排列得到的数列 $A=(A_1,\ldots,A_N)$。请通过进行 $0$ 次以上 $N - 1$ 次以下的操作，将 $A$ 变为 $(1,2,\ldots,N)$。

- 操作：自由选择满足 $1\leq i < j \leq N$ 的整数对 $(i,j)$，交换 $A$ 中第 $i$ 个和第 $j$ 个元素。

在给定的约束条件下，可以证明一定能将 $A$ 变为 $(1,2,\ldots,N)$。

### 综合分析与结论
这些题解的核心思路都是遍历数组，当当前位置的元素不是其应有的值时，就将该元素与其应有的位置的元素进行交换，直到数组有序。
- **思路**：都利用数组元素是 $1$ 到 $N$ 的排列这一特性，通过记录元素位置，在一次遍历中完成交换操作。
- **算法要点**：使用额外数组记录元素位置，在遍历过程中，若当前位置元素与位置序号不对应，则交换元素并更新位置记录。
- **解决难点**：避免了 $O(n^2)$ 的时间复杂度，利用元素特性实现 $O(n)$ 的时间复杂度。

### 所选题解
- **lutaoquan2012（5星）**
  - **关键亮点**：思路清晰，代码简洁，详细解释了 $a$ 数组和 $b$ 数组的作用，便于理解。
```cpp
for(int i=1;i<=n;i++){
    if(a[i]!=i){
        x[++ans]=i;
        y[ans]=a[i];
        ll xx=b[i];
        swap(b[a[i]],b[i]);
        swap(a[xx],a[i]);
    }
}
```
核心思想：遍历 $1$ 到 $n$，若 $a[i]$ 不等于 $i$，则记录交换位置，交换 $b$ 数组中对应元素，并更新 $a$ 数组。

- **qhr2023（4星）**
  - **关键亮点**：代码结构清晰，注释详细，将思路转化为代码的过程很直观。
```cpp
for(int i=1; i<=n; i++)   
    if(a[i]!=i){
        int j=now[i];
        x[++ans]=i, y[ans]=j;
        swap(a[i], a[j]);
        now[i]=i, now[a[j]]=j;
    }
```
核心思想：遍历数组，若 $a[i]$ 不等于 $i$，则记录交换位置，交换 $a$ 数组中对应元素，并更新 $now$ 数组。

- **Harrylzh（4星）**
  - **关键亮点**：思路简洁明了，代码实现直接，通过记录元素位置完成交换操作。
```cpp
for(long long i=1;i<=n;i++)
{
    if(gs[i]!=i)
    {
        ++cur;
        ansx[cur]=min(gs[i],i);
        ansy[cur]=max(gs[i],i);
        long long t=a[i];
        swap(a[gs[i]],a[i]);
        gs[t]=gs[i];
        gs[i]=i;
    }
}
```
核心思想：遍历 $1$ 到 $n$，若 $gs[i]$ 不等于 $i$，则记录交换位置，交换 $a$ 数组中对应元素，并更新 $gs$ 数组。

### 最优关键思路或技巧
利用额外数组记录元素位置，在一次遍历中，若当前位置元素与位置序号不对应，就进行交换并更新位置记录，从而实现 $O(n)$ 的时间复杂度。

### 拓展思路
同类型题目可能会有不同的约束条件，如限制交换次数、交换规则不同等，但核心思路都是利用元素的特性进行交换操作。类似算法套路可用于解决一些数组重排、元素归位的问题。

### 推荐洛谷题目
- [P1116 车厢重组](https://www.luogu.com.cn/problem/P1116)
- [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
- [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)

### 个人心得摘录与总结
OIer_Tan：“我是菜狗，为什么赛时切不了逆序对，自闭了。” 总结：该作者表达了对自己在比赛中未能解决逆序对问题的懊恼，提醒我们在比赛中要不断提升自己的解题能力。 

---
处理用时：27.99秒
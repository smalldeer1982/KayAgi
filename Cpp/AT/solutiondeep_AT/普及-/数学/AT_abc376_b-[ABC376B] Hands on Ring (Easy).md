# 题目信息

# [ABC376B] Hands on Ring (Easy)

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc376/tasks/abc376_b

**注：この問題は F 問題とほぼ同じ設定です。本文中で太字で示されている部分および制約のみが異なります。**

あなたはあるリングを両手で握っています。 このリングは $ N\ (N\geq\ 3) $ 個のパーツ $ 1,2,\dots,N $ によって構成されており、パーツ $ i $ とパーツ $ i+1 $ ($ 1\leq\ i\leq\ N-1 $)、およびパーツ $ 1 $ とパーツ $ N $ がそれぞれ隣接しています。

最初、左手はパーツ $ 1 $ を、右手はパーツ $ 2 $ を握っています。 あなたは、$ 1 $ 回の *操作* で以下のことを行えます。

- 片方の手を、今握っているパーツに隣接するいずれかのパーツに移動する。ただし、移動先にもう一方の手がない場合に限る。

以下の図は、初期状態およびそこから行える操作と行えない操作の例を示したもので、リングの各パーツに書き込まれた数はそのパーツの番号を、L と書かれた丸は左手を、R と書かれた丸は右手を示しています。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc376_b/163f7a1ba782e2030fd80929195629b6c8f8ddb5.png)

あなたは今から与えられる $ Q $ 個の指示に順番に従う必要があります。 $ i\ (1\leq\ i\leq\ Q) $ 個目の指示は文字 $ H_i $ および整数 $ T_i $ によって表され、その意味は以下の通りです：

- 操作を何回か（$ 0 $ 回でもよい）行うことで、$ H_i $ が `L` ならば左手、`R` ならば右手が、パーツ $ T_i $ を握っている状態にする。 このとき、$ H_i $ によって指定された手ではない方の手を **動かしてはならない**。

**なお、達成可能な指示しか与えられないことが保証されます。**

詳細この問題の設定の下では、各 $ i $ について、$ i $ 個目の指示に従う直前でのそれぞれの手の位置が一意に定まることが証明できます。 このとき、左手の位置をパーツ $ l_i $、右手の位置をパーツ $ r_i $ とおくと、$ H_i= $ `L` ならば $ T_i\neq\ r_i $ が、$ H_i= $ `R` ならば $ T_i\neq\ l_i $ がそれぞれ保証されます。   
すべての指示に従うために必要な操作回数の合計の最小値を求めてください。

## 说明/提示

### 制約

- $ 3\leq\ N\ \leq\ 100 $
- $ 1\leq\ Q\ \leq\ 100 $
- $ H_i $ は `L` または `R`
- $ 1\leq\ T_i\leq\ N $
- $ N,Q,T_i $ は整数
- 達成可能な指示しか与えられない（詳細は問題文を参照してください）

### Sample Explanation 1

![](https://img.atcoder.jp/abc376/367efd733280195fad534ad518cca09d.png) 
以下のように操作を行うことで、$ Q $ 個の指示すべてに順番に従うことができます。 1. 右手をパーツ $ 2\rightarrow\ 3\rightarrow\ 4 $ と移動させることで、$ 1 $ 番目の指示に従う。 2. 左手をパーツ $ 1\rightarrow\ 6\rightarrow\ 5 $ と移動させることで、$ 2 $ 番目の指示に従う。 3. 右手をパーツ $ 4\rightarrow\ 3\rightarrow\ 2\rightarrow\ 1\rightarrow\ 6 $ と移動させることで、$ 3 $ 番目の指示に従う。 このとき行う操作回数の合計は $ 2+2+4=8 $ であり、これが最小です。 （$ 3 $ 番目の指示に従う際に右手をパーツ $ 4\rightarrow\ 5\rightarrow\ 6 $ と移動させることはできないことに注意してください。）

### Sample Explanation 2

操作を $ 1 $ 度も行わずに指示に従うことができる場合もあります。

## 样例 #1

### 输入

```
6 3
R 4
L 5
R 6```

### 输出

```
8```

## 样例 #2

### 输入

```
100 2
L 1
R 2```

### 输出

```
0```

## 样例 #3

### 输入

```
30 8
R 23
R 26
R 29
L 20
R 29
R 19
L 7
L 16```

### 输出

```
92```

# AI分析结果

### 题目内容重写（中文）

**题目描述**

你正在用双手握住一个环形物。这个环形物由 $N\ (N\geq\ 3)$ 个部分组成，编号为 $1,2,\dots,N$。部分 $i$ 和部分 $i+1$（$1\leq\ i\leq\ N-1$），以及部分 $1$ 和部分 $N$ 是相邻的。

最初，左手握住部分 $1$，右手握住部分 $2$。你可以通过一次操作完成以下动作：

- 将一只手移动到当前握住部分的相邻部分之一。但移动的目标部分不能有另一只手。

你将会收到 $Q$ 个指示，需要按顺序执行这些指示。第 $i$ 个指示由字符 $H_i$ 和整数 $T_i$ 表示，含义如下：

- 通过若干次操作（可以是零次），使得 $H_i$ 为 `L` 时左手握住部分 $T_i$，$H_i$ 为 `R` 时右手握住部分 $T_i$。此时，**不能移动** $H_i$ 指定的手以外的另一只手。

**注意：保证所有指示都是可实现的。**

在所有指示执行完毕后，求所需的最小操作次数。

### 样例解释

**样例1**

输入：
```
6 3
R 4
L 5
R 6
```
输出：
```
8
```
解释：
1. 右手从部分 $2\rightarrow\ 3\rightarrow\ 4$，执行第一个指示。
2. 左手从部分 $1\rightarrow\ 6\rightarrow\ 5$，执行第二个指示。
3. 右手从部分 $4\rightarrow\ 3\rightarrow\ 2\rightarrow\ 1\rightarrow\ 6$，执行第三个指示。
总操作次数为 $2+2+4=8$，这是最小的。

**样例2**

输入：
```
100 2
L 1
R 2
```
输出：
```
0
```
解释：
无需任何操作即可满足指示。

**样例3**

输入：
```
30 8
R 23
R 26
R 29
L 20
R 29
R 19
L 7
L 16
```
输出：
```
92
```

### 题解分析与结论

**题解1：Brute_Force**

**思路：**
- 题解中提到，两只手只有两种走法（顺时针或逆时针），否则会碰到另一只手。
- 通过暴力模拟，计算一只手按照顺时针走是否会碰到另一只手，并记录步数 $cnt$。
- 如果没有碰到，说明顺时针走合法，直接加 $cnt$；否则，只能逆时针走，加 $n - cnt$。
- 注意更新手的位置。

**代码实现：**
```cpp
#include <bits/stdc++.h>
using namespace std;
int n, lx = 1, rx = 2, ans, q;
int main () {
	ios :: sync_with_stdio (0);
	cin.tie (0), cout.tie (0); 
	cin >> n >> q;
	for (int i = 1; i <= q; i++) {
		char h;
		int xy, f = 1, cnt = 0;
		cin >> h >> xy;
		if (h == 'L') {
			if (xy == lx) continue;
			for (int i = lx; i != xy; i = i % n + 1) {
				cnt++;
				if (i == rx) f = 0;
			}
			if (f) ans += cnt;
			else ans += n - cnt;
			lx = xy;
		}
		else {
			if (xy == rx) continue;
			for (int i = rx; i != xy; i = i % n + 1) {
				cnt++;
				if (i == lx) f = 0;
			}
			if (f) ans += cnt;
			else ans += n - cnt;
			rx = xy;
		}
	}
	return cout << ans, 0;
}
```

**评分：4星**
- **亮点：** 思路清晰，代码简洁，直接模拟了手的移动过程，逻辑正确。
- **改进建议：** 可以进一步优化代码结构，减少重复代码。

**最优关键思路：**
- 通过模拟手的移动，判断顺时针和逆时针的可行性，选择最小步数。
- 更新手的位置，确保每次指示的正确执行。

**可拓展之处：**
- 类似的问题可以应用于环形数据结构，如环形链表、环形队列等。
- 可以扩展到多只手或多个环形结构的移动问题。

**推荐题目：**
1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)
3. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)

**个人心得：**
- 调试时需要注意手的位置更新，确保每次指示执行后手的位置正确。
- 通过模拟可以更好地理解环形结构的移动规律。

---
处理用时：41.65秒
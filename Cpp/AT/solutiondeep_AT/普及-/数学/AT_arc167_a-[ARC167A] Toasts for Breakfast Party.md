# 题目信息

# [ARC167A] Toasts for Breakfast Party

## 题目描述

# [ARC167A] Toasts for Breakfast Party


[problemUrl]: https://atcoder.jp/contests/arc167/tasks/arc167_a

浴谷的站长 kkkscO2 最近购买了 $N$ 片烤绿鸟味的扩散性百万甜面包。第 $i$ 片面包的美味值是 $a_i$。又有 $M$ 个盘子，每个盘子可以装**最多**两片面包，盘子可以空着。

定义 $b_i$ 为盘子 $i$ 里的面包的美味值的和的平方，若盘子里没有面包则 $b_i$ 为 $0$。若只有一个面包，则 $b_i$ 为该面包的美味值的平方。

求所有合法的 $\sum_{1 \le i \le M}b_i$ 的最小值。$\frac{N}{2} \le M \le N$。

## 说明/提示

- $ 1\leq\ N\leq\ 2\times\ 10^{5} $
- $ \frac{N}{2}\leq\ M\leq\ N $
- $ 1\leq\ A_{i}\leq\ 2\times\ 10^{5} $
- 保证输入的都是整数
 
### 样例1解释

我们将第 $1$ 片和第 $2$ 片面包放在第一个盘子里，第 $3$ 片和第 $4$ 片面包放在第二个盘子里。第 $5$ 片单独放在最后一个盘子里。此时的答案 $\sum_{1 \le i \le M}b_i =(1+1)^{2} + (1+6)^{2} + 7^2 = 102$。没有比该方案更优的结果。注意不能将第 $1$ 片，第 $2$ 片和第 $3$ 片放在同一个盘子里。

## 样例 #1

### 输入

```
5 3

1 1 1 6 7```

### 输出

```
102```

## 样例 #2

### 输入

```
2 1

167 924```

### 输出

```
1190281```

## 样例 #3

### 输入

```
12 9

22847 98332 854 68844 81080 46058 40949 62493 76561 52907 88628 99740```

### 输出

```
61968950639```

# AI分析结果

### 题目内容重写

**题目描述**

浴谷的站长 kkkscO2 最近购买了 $N$ 片烤绿鸟味的扩散性百万甜面包。第 $i$ 片面包的美味值是 $a_i$。又有 $M$ 个盘子，每个盘子可以装**最多**两片面包，盘子可以空着。

定义 $b_i$ 为盘子 $i$ 里的面包的美味值的和的平方，若盘子里没有面包则 $b_i$ 为 $0$。若只有一个面包，则 $b_i$ 为该面包的美味值的平方。

求所有合法的 $\sum_{1 \le i \le M}b_i$ 的最小值。$\frac{N}{2} \le M \le N$。

**说明/提示**

- $ 1\leq\ N\leq\ 2\times\ 10^{5} $
- $ \frac{N}{2}\leq\ M\leq\ N $
- $ 1\leq\ A_{i}\leq\ 2\times\ 10^{5} $
- 保证输入的都是整数

### 样例1解释

我们将第 $1$ 片和第 $2$ 片面包放在第一个盘子里，第 $3$ 片和第 $4$ 片面包放在第二个盘子里。第 $5$ 片单独放在最后一个盘子里。此时的答案 $\sum_{1 \le i \le M}b_i =(1+1)^{2} + (1+6)^{2} + 7^2 = 102$。没有比该方案更优的结果。注意不能将第 $1$ 片，第 $2$ 片和第 $3$ 片放在同一个盘子里。

### 样例 #1

**输入**

```
5 3

1 1 1 6 7
```

**输出**

```
102
```

### 样例 #2

**输入**

```
2 1

167 924
```

**输出**

```
1190281
```

### 样例 #3

**输入**

```
12 9

22847 98332 854 68844 81080 46058 40949 62493 76561 52907 88628 99740
```

**输出**

```
61968950639
```

### 题解分析与结论

1. **关键思路**：所有题解都采用了贪心策略，通过将面包的美味值排序后，将最小的面包与最大的面包配对，以减少平方和的最小值。部分题解还引入了“空气面包”的概念，将问题转化为每个盘子都有两个面包的情况，简化了问题。

2. **算法要点**：
   - 排序：将面包的美味值从小到大排序。
   - 配对：将最小的面包与最大的面包配对，依次类推。
   - 计算：根据配对结果计算每个盘子的平方和。

3. **解决难点**：主要难点在于如何合理地配对面包，以最小化平方和。通过引入“空气面包”或直接配对，可以有效地解决这一问题。

### 所选高星题解

#### 题解1：作者：f_hxr_ (赞：13)
**星级**：★★★★★
**关键亮点**：引入了“空气面包”的概念，将问题转化为每个盘子都有两个面包的情况，简化了问题。代码简洁，逻辑清晰。

**核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
typedef long long LL;
LL N,M,a[400005],ans;
int main(){
    cin>>N>>M;
    for(int i=1;i<=N;i++)cin>>a[i],ans+=a[i]*a[i];
    sort(a+1,a+M*2+1);
    LL LHQ=1,RMQ=M*2;
    while(LHQ<=RMQ)ans+=a[LHQ]*a[RMQ]*2,LHQ++,RMQ--;
    cout<<ans;
    return 0;
}
```

#### 题解2：作者：大眼仔Happy (赞：8)
**星级**：★★★★☆
**关键亮点**：直接配对最小的面包与最大的面包，思路清晰，代码简洁。

**核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
const int N=4e5+5;
#define ll long long
ll inline read()
{
    ll num=0,f=1;
    char ch=getchar();
    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}
    while(ch>='0'&&ch<='9'){num=(num<<3)+(num<<1)+(ch^48);ch=getchar();}
    return num*f;
}
int n,m;
ll a[N],ans;
int main(){
    n=read();m=read();
    for(int i=1;i<=n;i++)a[i]=read();
    sort(a+1,a+2*m+1);
    for(int i=1;i<=2*m;i++)ans+=a[i]*a[i];
    for(int i=1;i<=m;i++)ans+=2*a[i]*a[2*m-i+1];
    printf("%lld",ans);
    return 0;
}
```

#### 题解3：作者：zhangjiting (赞：4)
**星级**：★★★★☆
**关键亮点**：通过计算需要配对的面包数量，直接进行配对，思路清晰，代码简洁。

**核心代码**：
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int b[200005],top,a[200005],ans;
signed main(){
    int n,m;
    cin>>n>>m;
    for(int i=1;i<=n;i++){
        cin>>a[i];
    }
    sort(a+1,a+n+1);
    int x2=max(n-m,0ll);
    int x=x2*2;
    int r=x;
    int l=1;
    for(int i=1;i<=x2;i++) b[++top]=a[l++]+a[r--];
    for(int i=x+1;i<=n;i++){
        b[++top]=a[i];
    }
    for(int i=1;i<=n;i++) ans+=b[i]*b[i];
    cout<<ans;
    return 0;
}
```

### 最优关键思路与技巧

1. **引入“空气面包”**：将问题转化为每个盘子都有两个面包的情况，简化了问题。
2. **贪心配对**：将最小的面包与最大的面包配对，以减少平方和的最小值。
3. **排序与计算**：通过排序和配对，快速计算出最小平方和。

### 可拓展之处

1. **类似问题**：可以扩展到其他需要最小化或最大化某种组合值的问题，如最小化方差、最大化收益等。
2. **算法套路**：贪心算法在解决类似问题时非常有效，尤其是在需要快速找到最优解的情况下。

### 推荐题目

1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

### 个人心得摘录

1. **调试经历**：部分题解中提到在调试过程中发现数组越界问题，提醒我们在处理数组时要特别注意边界条件。
2. **踩坑教训**：在处理大数时，要注意数据类型的范围，避免溢出。
3. **顿悟感想**：通过引入“空气面包”的概念，简化了问题的复杂度，使得问题更容易解决。

---
处理用时：57.62秒
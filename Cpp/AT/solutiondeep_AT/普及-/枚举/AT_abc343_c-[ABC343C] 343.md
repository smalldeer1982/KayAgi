# 题目信息

# [ABC343C] 343

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc343/tasks/abc343_c

正整数 $ N $ が与えられます。

$ N $ 以下の正整数であって回文立方数であるものの最大値を求めてください。

ただし、正整数 $ K $ は以下の $ 2 $ つの条件を満たすとき、またそのときに限り回文立方数であると定義します。

- ある正整数 $ x $ が存在し、$ x^3\ =\ K $ を満たす。
- $ K $ を先頭に $ 0 $ をつけずに $ 10 $ 進表記した文字列が回文となる。より厳密には、$ 0 $ 以上 $ 9 $ 以下の整数 $ A_0,\ A_1,\ \ldots,\ A_{L-2} $ および $ 1 $ 以上 $ 9 $ 以下の整数 $ A_{L-1} $ を用いて $ K\ =\ \sum_{i\ =\ 0}^{L-1}\ A_i10^i $ と表記したときに $ i\ =\ 0,\ 1,\ \ldots,\ L-1 $ に対して $ A_i\ =\ A_{L-1-i} $ を満たす。

## 说明/提示

### 制約

- $ N $ は $ 10^{18} $ 以下の正整数

### Sample Explanation 1

$ 343 $ は回文立方数であり、$ 344,\ 345 $ は回文立方数ではありません。したがって、$ 343 $ が答えとなります。

## 样例 #1

### 输入

```
345```

### 输出

```
343```

## 样例 #2

### 输入

```
6```

### 输出

```
1```

## 样例 #3

### 输入

```
123456789012345```

### 输出

```
1334996994331```

# AI分析结果

### 题目翻译
给定正整数 $N$。

请找出不超过 $N$ 的正整数中，为回文立方数的最大数。

这里，正整数 $K$ 当且仅当满足以下两个条件时，被定义为回文立方数：
- 存在正整数 $x$，使得 $x^3 = K$。
- $K$ 不以 $0$ 开头的十进制表示字符串是回文。更严格地说，当使用 $0$ 到 $9$ 的整数 $A_0, A_1, \ldots, A_{L - 2}$ 以及 $1$ 到 $9$ 的整数 $A_{L - 1}$ 表示为 $K = \sum_{i = 0}^{L - 1} A_i10^i$ 时，对于 $i = 0, 1, \ldots, L - 1$ 满足 $A_i = A_{L - 1 - i}$。

### 综合分析与结论
这些题解的核心思路都是通过枚举立方数，然后判断其是否为回文数，从而找出不超过 $N$ 的最大回文立方数。由于 $N$ 最大为 $10^{18}$，其立方根最大为 $10^6$，因此枚举范围可缩小到 $1$ 到 $10^6$，避免了直接枚举 $1$ 到 $N$ 的高复杂度。

#### 算法要点对比
- **枚举方向**：部分题解（如 Little_x_starTYJ、include13_fAKe、littlebug 等）采用从大到小枚举立方根的方式，一旦找到符合条件的数即可结束，能更快得到最大的回文立方数；而另一些题解（如 littlesnake、XXh0919、OIerWu_829 等）则是从小到大枚举，最后得到的结果即为最大的回文立方数。
- **回文判断方法**：多数题解将数字转换为字符串，然后反转字符串进行比较；也有部分题解通过数位分离，逐位比较首尾数字来判断是否为回文。

#### 解决难点
- **数据范围处理**：由于 $N$ 最大为 $10^{18}$，直接枚举会超时，因此通过取立方根将枚举范围缩小到 $10^6$。
- **精度问题**：部分题解提到使用 `cbrt` 函数可能存在精度问题，建议使用 `cbrtl` 函数。

### 评分较高的题解
1. **Little_x_starTYJ（5星）**
    - **关键亮点**：思路清晰，代码简洁，直接使用 `cbrt` 函数求出 $N$ 的立方根，然后从大到小枚举，一旦找到符合条件的数就输出，避免了不必要的计算。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int main()
{
    unsigned long long n;
    cin >> n;
    for (unsigned long long i = cbrt(n) + 1; ; i--)
    {
        if (i * i * i > n)
            continue;
        string a = to_string(i * i * i);
        string b = a;
        reverse(a.begin(), a.end());
        if (a == b) {
            cout << i * i * i;
            return 0;
        }
    }
    cout << 1;
    return 0;
}
```
2. **littlesnake（4星）**
    - **关键亮点**：复杂度分析清晰，代码结构简洁，通过从小到大枚举立方根，不断更新最大的回文立方数。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;

bool check(ll n) {
    string s = to_string(n);
    string t = s;
    reverse(t.begin(), t.end());
    return s == t;
}

int main() {
    ll n;
    cin >> n;
    ll ans = 0;
    for (ll i = 1; i * i * i <= n; i++) if (check(i * i * i)) ans = i * i * i;
    cout << ans << '\n';
}
```
3. **XXh0919（4星）**
    - **关键亮点**：思路详细，对复杂度进行了分析，通过手动 O2 优化提高代码运行效率。
    - **核心代码**：
```cpp
#pragma GCC optimize(2)//手动 O2
#include<bits/stdc++.h>
#define int long long
using namespace std;

int n,ans;

signed main() {
    scanf("%lld",&n);
    for(int i=1; i<=1000000; ++i) {
        int x=i*i*i;
        string s=to_string(x);
        string ss=s;
        reverse(ss.begin(),ss.end());
        if(s==ss&&x<=n)ans=max(ans,x);
    }
    printf("%lld\n",ans);
    return 0;
}
```

### 最优关键思路或技巧
- **缩小枚举范围**：通过取立方根将枚举范围从 $1$ 到 $N$ 缩小到 $1$ 到 $10^6$，大大降低了时间复杂度。
- **从大到小枚举**：在寻找最大的回文立方数时，从大到小枚举立方根，一旦找到符合条件的数即可结束，提高了效率。

### 拓展思路
同类型题目可能会改变条件，如求不超过 $N$ 的最大回文平方数、回文四次方数等，解题思路类似，只需将立方运算改为相应的幂运算。

### 洛谷相似题目推荐
1. [P1217 [USACO1.5] 回文质数 Prime Palindromes](https://www.luogu.com.cn/problem/P1217)：判断回文数和质数，与本题判断回文立方数类似。
2. [P1015 [NOIP1999 普及组] 回文数](https://www.luogu.com.cn/problem/P1015)：判断回文数并进行加法运算，涉及回文数的判断和高精度计算。
3. [P1307 [NOIP2011 普及组] 数字反转](https://www.luogu.com.cn/problem/P1307)：简单的数字反转问题，可作为判断回文数的基础练习。

### 个人心得摘录与总结
- **include13_fAKe**：提到开学第一场 ABC，分享参赛经历。
- **littlebug**：提醒要正确理解题意，避免误解。
- **coderJerry**：分享了两场比赛吃罚时的经历。

总结：这些心得提醒我们在做题时要认真理解题意，避免因粗心导致错误，同时在比赛中要注意细节，减少罚时。 

---
处理用时：38.49秒
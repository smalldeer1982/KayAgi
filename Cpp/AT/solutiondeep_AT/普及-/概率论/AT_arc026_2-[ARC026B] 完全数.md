# 题目信息

# [ARC026B] 完全数

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc026/tasks/arc026_2

高橋君は完全なものが大好きです。

自然数には、完全数というものがあります。 完全数というのは、自分以外の約数の総和が自分と等しくなる自然数のことです。 例えば $ 6 $ の場合 $ 1\ +\ 2\ +\ 3\ =\ 6 $となるので完全数です。 それに対して、自分以外の約数の総和が自分より小さくなる場合は不足数と言い、大きくなる場合は過剰数と言います。

高橋君には今気になっている自然数があります。高橋君のために、それが完全数なのか不足数なのか過剰数なのか判定してください。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ 1\ ≦\ N\ ≦\ 10^5 $を満たすデータセットに正解した場合は $ 50 $ 点が与えられる。
- $ 1\ ≦\ N\ ≦\ 10^{10} $を満たすデータセットに正解した場合はさらに $ 50 $ 点が与えられる。合計で$ 100 $点となる。

### Sample Explanation 1

$ 1\ +\ 2\ +\ 3\ =\ 6 $なので$ 6 $は完全数です。

### Sample Explanation 2

$ 1\ +\ 2\ +\ 3\ +\ 4\ +\ 6\ +\ 8\ +\ 12\ >\ 24 $なので$ 24 $は過剰数です。

### Sample Explanation 3

$ 1\ +\ 3\ +\ 9\ <\ 27 $なので$ 27 $は不足数です。

## 样例 #1

### 输入

```
6```

### 输出

```
Perfect```

## 样例 #2

### 输入

```
24```

### 输出

```
Abundant```

## 样例 #3

### 输入

```
27```

### 输出

```
Deficient```

## 样例 #4

### 输入

```
945```

### 输出

```
Abundant```

# AI分析结果

### 题目中文重写
高桥君非常喜欢完美的东西。

在自然数中，有完全数这样的数。完全数是指除自身以外的约数之和等于自身的自然数。例如，对于 6，1 + 2 + 3 = 6，所以 6 是完全数。与之相对，除自身以外的约数之和小于自身的数称为不足数，大于自身的数称为过剩数。

高桥君现在有一个感兴趣的自然数。请帮高桥君判断这个数是完全数、不足数还是过剩数。

#### 部分点
本题设有部分点。
- 若能正确解答满足 1 ≤ N ≤ 10^5 的数据集，可得 50 分。
- 若能正确解答满足 1 ≤ N ≤ 10^10 的数据集，再得 50 分，总分 100 分。

#### 样例解释 1
因为 1 + 2 + 3 = 6，所以 6 是完全数。

#### 样例解释 2
因为 1 + 2 + 3 + 4 + 6 + 8 + 12 > 24，所以 24 是过剩数。

#### 样例解释 3
因为 1 + 3 + 9 < 27，所以 27 是不足数。

#### 样例 #1
##### 输入
```
6
```
##### 输出
```
Perfect
```

#### 样例 #2
##### 输入
```
24
```
##### 输出
```
Abundant
```

#### 样例 #3
##### 输入
```
27
```
##### 输出
```
Deficient
```

#### 样例 #4
##### 输入
```
945
```
##### 输出
```
Abundant
```

### 综合分析与结论
这些题解的核心思路都是计算给定自然数除自身外的约数之和，再根据和与该自然数的大小关系判断其是完全数、不足数还是过剩数。

#### 思路与算法要点
- **暴力枚举**：从 1 到 n - 1 或 n / 2 枚举所有数，判断是否为约数并求和。
- **开方优化**：只枚举 1 到 $\sqrt{n}$ 的数，若 i 是约数，则 n / i 也是约数，可减少枚举次数。

#### 解决难点
- **数据范围**：由于数据最大到 10^10，需使用 long long 类型避免溢出。
- **完全平方数**：完全平方数的 $\sqrt{n}$ 会被重复计算，需特判并减去。
- **数字 1**：1 需单独判断，因为它没有除自身外的约数。

### 所选题解
- **EtOH_Lewis（4星）**
    - **关键亮点**：详细展示了从暴力枚举到逐步优化的过程，思路清晰，对每个优化步骤的原因解释详细。
    - **个人心得**：最初代码有 WA、TLE 和 AC，通过分析数据范围将 int 改为 long long，后续又对时间复杂度进行优化，如先存储约数和、将枚举范围缩小到 n / 2，最后使用开方优化，但开方优化时遇到约数遗漏问题，通过特殊处理解决。
- **LJC00111（4星）**
    - **关键亮点**：代码简洁，直接使用开方优化，对 1 和完全平方数的处理逻辑清晰。
    - **个人心得**：无。
- **tiaotiao（4星）**
    - **关键亮点**：思路清晰，对每个步骤的作用解释详细，特别提醒了输出要换行，避免爆零。
    - **个人心得**：提到是大水题但容易被 atcoder 卡，强调了输出格式的重要性。

### 重点代码
#### EtOH_Lewis 最终优化代码
```cpp
#include<bits/stdc++.h>
using namespace std;
long long sum(long long x)
{
    long long counter=1;
    double k=sqrt(x);
    for(int i=2;i<=k;i++)
    {
        if(x%i==0) counter+=(i+x/i);
    }
    return counter;
}
int main()
{
    long long n,m;
    cin>>n;
    m=sum(n);
    if(m==n) cout<<"Perfect"<<endl;
    if(m<n) cout<<"Deficient"<<endl;
    if(m>n) cout<<"Abundant"<<endl;
    return 0;
}
```
**核心思想**：使用开方优化，枚举 1 到 $\sqrt{x}$ 的数，若 i 是约数，则加上 i 和 x / i，同时避免重复计算自身和约数 1。

#### LJC00111 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
    long long n,ans=1;
    cin>>n;
    if(n==1)
    {
        cout<<"Deficient"<<endl;
        return 0;
    }
    for(int i=2;i<=sqrt(n);i++)
    {
        if(n%i==0)
        {
            ans=ans+i;
            ans=ans+n/i;
        }
        if(i==sqrt(n)&&n%i==0)
        {
            ans=ans-i;
        }
    }
    if(ans==n) cout<<"Perfect"<<endl;
    else if(ans<n) cout<<"Deficient"<<endl;
    else cout<<"Abundant"<<endl;
    return 0;
}
```
**核心思想**：开方优化枚举约数，特判 1 和完全平方数，根据约数和与原数的大小关系输出结果。

#### tiaotiao 代码
```cpp
#include <cstdio>
#include <cmath>
int main()
{
    long long n;
    scanf("%lld",&n);
    long long sum=0;
    if(n==1)
    {
        printf("Deficient\n");
        return 0;
    }
    for(long long i=1;i<=sqrt(n);i++)
    {
        if(n%i==0)
        {
            sum+=i;
            sum+=n/i;
        }
    }
    sum-=n;
    long long sqn=sqrt(n);
    if(sqn*sqn==n) sum-=sqn;
    if(sum==n) printf("Perfect\n");
    if(sum<n) printf("Deficient\n");
    if(sum>n) printf("Abundant\n");
    return 0;
}
```
**核心思想**：开方优化枚举约数，特判 1 和完全平方数，减去自身后根据约数和与原数的大小关系输出结果。

### 最优关键思路或技巧
- **开方优化**：只枚举 1 到 $\sqrt{n}$ 的数，同时处理对应的另一个约数 n / i，将时间复杂度从 $O(n)$ 降低到 $O(\sqrt{n})$。
- **特判处理**：对 1 和完全平方数进行特殊处理，避免错误。

### 拓展思路
同类型题可参考判断其他特殊数，如友好数（两个数的除自身外约数之和相等）、梅森素数等。类似算法套路可用于因数分解、素数判断等问题。

### 洛谷题目推荐
1. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)
2. [P1218 [USACO1.5]特殊的质数肋骨 Superprime Rib](https://www.luogu.com.cn/problem/P1218)
3. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029)

### 个人心得总结
- 要注意数据范围，避免因数据类型问题导致错误。
- 对于时间复杂度较高的算法，可通过开方等方法进行优化。
- 注意特殊情况的处理，如 1 和完全平方数。
- 注意输出格式，避免因格式问题导致爆零。

---
处理用时：45.40秒
# 题目信息

# [ABC376B] Hands on Ring (Easy)

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc376/tasks/abc376_b

**注：この問題は F 問題とほぼ同じ設定です。本文中で太字で示されている部分および制約のみが異なります。**

あなたはあるリングを両手で握っています。 このリングは $ N\ (N\geq\ 3) $ 個のパーツ $ 1,2,\dots,N $ によって構成されており、パーツ $ i $ とパーツ $ i+1 $ ($ 1\leq\ i\leq\ N-1 $)、およびパーツ $ 1 $ とパーツ $ N $ がそれぞれ隣接しています。

最初、左手はパーツ $ 1 $ を、右手はパーツ $ 2 $ を握っています。 あなたは、$ 1 $ 回の *操作* で以下のことを行えます。

- 片方の手を、今握っているパーツに隣接するいずれかのパーツに移動する。ただし、移動先にもう一方の手がない場合に限る。

以下の図は、初期状態およびそこから行える操作と行えない操作の例を示したもので、リングの各パーツに書き込まれた数はそのパーツの番号を、L と書かれた丸は左手を、R と書かれた丸は右手を示しています。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc376_b/163f7a1ba782e2030fd80929195629b6c8f8ddb5.png)

あなたは今から与えられる $ Q $ 個の指示に順番に従う必要があります。 $ i\ (1\leq\ i\leq\ Q) $ 個目の指示は文字 $ H_i $ および整数 $ T_i $ によって表され、その意味は以下の通りです：

- 操作を何回か（$ 0 $ 回でもよい）行うことで、$ H_i $ が `L` ならば左手、`R` ならば右手が、パーツ $ T_i $ を握っている状態にする。 このとき、$ H_i $ によって指定された手ではない方の手を **動かしてはならない**。

**なお、達成可能な指示しか与えられないことが保証されます。**

詳細この問題の設定の下では、各 $ i $ について、$ i $ 個目の指示に従う直前でのそれぞれの手の位置が一意に定まることが証明できます。 このとき、左手の位置をパーツ $ l_i $、右手の位置をパーツ $ r_i $ とおくと、$ H_i= $ `L` ならば $ T_i\neq\ r_i $ が、$ H_i= $ `R` ならば $ T_i\neq\ l_i $ がそれぞれ保証されます。   
すべての指示に従うために必要な操作回数の合計の最小値を求めてください。

## 说明/提示

### 制約

- $ 3\leq\ N\ \leq\ 100 $
- $ 1\leq\ Q\ \leq\ 100 $
- $ H_i $ は `L` または `R`
- $ 1\leq\ T_i\leq\ N $
- $ N,Q,T_i $ は整数
- 達成可能な指示しか与えられない（詳細は問題文を参照してください）

### Sample Explanation 1

![](https://img.atcoder.jp/abc376/367efd733280195fad534ad518cca09d.png) 
以下のように操作を行うことで、$ Q $ 個の指示すべてに順番に従うことができます。 1. 右手をパーツ $ 2\rightarrow\ 3\rightarrow\ 4 $ と移動させることで、$ 1 $ 番目の指示に従う。 2. 左手をパーツ $ 1\rightarrow\ 6\rightarrow\ 5 $ と移動させることで、$ 2 $ 番目の指示に従う。 3. 右手をパーツ $ 4\rightarrow\ 3\rightarrow\ 2\rightarrow\ 1\rightarrow\ 6 $ と移動させることで、$ 3 $ 番目の指示に従う。 このとき行う操作回数の合計は $ 2+2+4=8 $ であり、これが最小です。 （$ 3 $ 番目の指示に従う際に右手をパーツ $ 4\rightarrow\ 5\rightarrow\ 6 $ と移動させることはできないことに注意してください。）

### Sample Explanation 2

操作を $ 1 $ 度も行わずに指示に従うことができる場合もあります。

## 样例 #1

### 输入

```
6 3
R 4
L 5
R 6```

### 输出

```
8```

## 样例 #2

### 输入

```
100 2
L 1
R 2```

### 输出

```
0```

## 样例 #3

### 输入

```
30 8
R 23
R 26
R 29
L 20
R 29
R 19
L 7
L 16```

### 输出

```
92```

# AI分析结果

### 题目中文重写
# [ABC376B] 环上操作（简单版）

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc376/tasks/abc376_b

**注：本题与 F 题的设定几乎相同，仅文中加粗部分和约束条件不同。**

你正用双手握着一个环。这个环由 $ N\ (N\geq\ 3) $ 个部件 $ 1,2,\dots,N $ 组成，部件 $ i $ 与部件 $ i+1 $（$ 1\leq\ i\leq\ N-1 $）相邻，部件 $ 1 $ 与部件 $ N $ 也相邻。

初始时，左手握着部件 $ 1 $，右手握着部件 $ 2 $。你可以进行以下 *操作*：
- 移动一只手到当前握着的部件的相邻部件上，但移动目标不能是另一只手握着的部件。

下图展示了初始状态以及从该状态可以进行和不能进行的操作示例。环上每个部件上写的数字表示该部件的编号，标有 L 的圆圈表示左手，标有 R 的圆圈表示右手。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc376_b/163f7a1ba782e2030fd80929195629b6c8f8ddb5.png)

现在你需要依次遵循给定的 $ Q $ 个指示。第 $ i\ (1\leq\ i\leq\ Q) $ 个指示由字符 $ H_i $ 和整数 $ T_i $ 表示，含义如下：
- 通过进行若干次（可以为 0 次）操作，使 $ H_i $ 为 `L` 时左手、为 `R` 时右手握着部件 $ T_i $。此时，不能移动 $ H_i $ 指定的手以外的手。

**保证给出的指示都是可以达成的。**

详细说明：在本题设定下，可以证明对于每个 $ i $，在遵循第 $ i $ 个指示之前，两只手的位置是唯一确定的。设左手位置为部件 $ l_i $，右手位置为部件 $ r_i $，则当 $ H_i = $ `L` 时，保证 $ T_i\neq\ r_i $；当 $ H_i = $ `R` 时，保证 $ T_i\neq\ l_i $。

请计算遵循所有指示所需的最小操作次数总和。

## 说明/提示

### 约束条件
- $ 3\leq\ N\ \leq\ 100 $
- $ 1\leq\ Q\ \leq\ 100 $
- $ H_i $ 为 `L` 或 `R`
- $ 1\leq\ T_i\leq\ N $
- $ N,Q,T_i $ 为整数
- 保证给出的指示都是可以达成的（详细信息请参考题目描述）

### 样例解释 1

![](https://img.atcoder.jp/abc376/367efd733280195fad534ad518cca09d.png) 
通过以下操作可以依次遵循 $ Q $ 个指示：
1. 将右手从部件 $ 2 $ 移动到 $ 3 $ 再到 $ 4 $，以遵循第 $ 1 $ 个指示。
2. 将左手从部件 $ 1 $ 移动到 $ 6 $ 再到 $ 5 $，以遵循第 $ 2 $ 个指示。
3. 将右手从部件 $ 4 $ 移动到 $ 3 $、$ 2 $、$ 1 $ 再到 $ 6 $，以遵循第 $ 3 $ 个指示。
此时操作次数总和为 $ 2 + 2 + 4 = 8 $，这是最小操作次数。（注意，在遵循第 $ 3 $ 个指示时，不能将右手从部件 $ 4 $ 移动到 $ 5 $ 再到 $ 6 $。）

### 样例解释 2
有时不进行任何操作也能遵循指示。

## 样例 #1

### 输入
```
6 3
R 4
L 5
R 6
```

### 输出
```
8
```

## 样例 #2

### 输入
```
100 2
L 1
R 2
```

### 输出
```
0
```

## 样例 #3

### 输入
```
30 8
R 23
R 26
R 29
L 20
R 29
R 19
L 7
L 16
```

### 输出
```
92
```

### 综合分析与结论
- **思路**：题解利用了在环上两只手移动只有顺时针和逆时针两种走法，且要避免碰到另一只手的特点。通过模拟一只手顺时针移动，判断是否会碰到另一只手，来决定是采用顺时针步数还是逆时针步数更新答案。
- **算法要点**：
    - 用变量 `lx` 和 `rx` 分别记录左手和右手当前握着的部件编号。
    - 对于每个指示，模拟指定手顺时针移动到目标位置，记录步数 `cnt`，同时用标志 `f` 判断是否碰到另一只手。
    - 根据 `f` 的值决定是加上 `cnt` 还是 `n - cnt` 到答案 `ans` 中。
    - 更新移动手的位置。
- **解决难点**：关键在于判断手的移动方向（顺时针还是逆时针），题解通过模拟顺时针移动并检查是否碰到另一只手来解决这个问题。

### 所选题解
- **星级**：4星
- **关键亮点**：思路清晰，代码实现简洁易懂，直接模拟了手在环上的移动过程。

### 重点代码及核心实现思想
```cpp
for (int i = 1; i <= q; i++) {
    char h;
    int xy, f = 1, cnt = 0;
    cin >> h >> xy;
    if (h == 'L') {
        if (xy == lx) continue;
        for (int i = lx; i!= xy; i = i % n + 1) {
            cnt++;
            if (i == rx) f = 0;
        }
        if (f) ans += cnt;
        else ans += n - cnt;
        lx = xy;
    }
    else {
        if (xy == rx) continue;
        for (int i = rx; i!= xy; i = i % n + 1) {
            cnt++;
            if (i == lx) f = 0;
        }
        if (f) ans += cnt;
        else ans += n - cnt;
        rx = xy;
    }
}
```
核心实现思想：对于每个指示，先判断指定手是否已经在目标位置，若是则跳过。然后模拟指定手顺时针移动到目标位置，记录步数 `cnt`，并检查是否碰到另一只手。若未碰到，答案加上 `cnt`；否则，答案加上 `n - cnt`。最后更新移动手的位置。

### 最优关键思路或技巧
采用模拟的方法，通过标志位判断移动方向，避免了复杂的逻辑推理，使代码实现简单直接。

### 可拓展之处
同类型题可能会增加环上部件数量、指示数量，或者增加更多的移动限制条件。类似算法套路可以用于解决其他在环形结构上的路径规划问题，如环形跑道上的运动员移动、环形链表上的指针移动等。

### 洛谷相似题目推荐
- [P1118 [USACO06FEB]Backward Digit Sums G](https://www.luogu.com.cn/problem/P1118)：涉及模拟和路径规划的思想。
- [P1036 [NOIP2002 普及组] 选数](https://www.luogu.com.cn/problem/P1036)：需要模拟不同的选择路径。
- [P1047 [NOIP2005 普及组] 校门外的树](https://www.luogu.com.cn/problem/P1047)：可以用模拟的方法解决路径上的标记问题。

### 个人心得
题解中未包含个人心得。

---
处理用时：52.70秒
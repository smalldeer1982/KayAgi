# 题目信息

# [ABC383B] Humidifier 2

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc383/tasks/abc383_b

AtCoder社のオフィスは $ H $ 行 $ W $ 列のマス目で表されます。上から $ i $ 行目、左から $ j $ 列目のマスを $ (i,\ j) $ と表します。

各マスの状態は文字 $ S_{i,j} $ で表され、 $ S_{i,j} $ が `#` のときそのマスは机、`.` のときそのマスは床です。床のマスは $ 2 $ つ以上存在することが保証されます。

あなたは床のマスから異なる $ 2 $ マスを選び、加湿器を設置します。

加湿器が設置されたとき、あるマス $ (i,j) $ は加湿器があるマス $ (i',j') $ からのマンハッタン距離が $ D $ 以下であるとき、またその時に限り加湿されます。 なお、マス $ (i,j) $ からマス $ (i',j') $ までのマンハッタン距離は $ |i-i'|+|j-j'| $ で表されます。 ここで、加湿器が置かれた床のマスは必ず加湿されていることに注意してください。

加湿される **床のマス** の個数として考えられる最大値を求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ H\ \leq\ 10 $
- $ 1\ \leq\ W\ \leq\ 10 $
- $ 2\ \leq\ H\ \times\ W $
- $ 0\ \leq\ D\ \leq\ H+W-2 $
- $ H,W,D $ は整数
- $ S_{i,j} $ は `#` または `.` である $ (1\ \leq\ i\ \leq\ H,\ 1\ \leq\ j\ \leq\ W) $
- 床のマスは $ 2 $ つ以上存在する
 
### Sample Explanation 1

マス $ (1,1) $ とマス $ (1,5) $ に加湿器を置いた時: - マス $ (1,1) $ の加湿器によってマス $ (1,1),(2,1) $ の $ 2 $ マスが加湿されます。 - マス $ (1,5) $ の加湿器によってマス $ (1,5) $ の $ 1 $ マスが加湿されます。 よって、合計 $ 3 $ マス加湿されています。また、$ 4 $ マス以上加湿するような加湿器の置き方は存在しないため、答えは $ 3 $ です。

### Sample Explanation 2

マス $ (2,4) $ とマス $ (5,3) $ に加湿器を置いた時、$ 15 $ 個の床のマスが加湿されます。

## 样例 #1

### 输入

```
2 5 1

.###.

.#.##```

### 输出

```
3```

## 样例 #2

### 输入

```
5 5 2

.#.#.

.....

.#.#.

#.#.#

.....```

### 输出

```
15```

## 样例 #3

### 输入

```
4 4 2

....

.##.

.##.

....```

### 输出

```
10```

# AI分析结果

### 题目翻译
AtCoder公司的办公室用一个 $H$ 行 $W$ 列的网格表示。从上往下数第 $i$ 行，从左往右数第 $j$ 列的格子表示为 $(i, j)$。

每个格子的状态由字符 $S_{i,j}$ 表示，当 $S_{i,j}$ 为 `#` 时，该格子是桌子；当 $S_{i,j}$ 为 `.` 时，该格子是地板。保证地板格子至少有两个。

你要从地板格子中选择两个不同的格子，并安装加湿器。

当加湿器安装后，某个格子 $(i,j)$ 当且仅当与安装加湿器的格子 $(i',j')$ 的曼哈顿距离小于等于 $D$ 时，会被加湿。格子 $(i,j)$ 到格子 $(i',j')$ 的曼哈顿距离用 $|i - i'| + |j - j'|$ 表示。注意，安装加湿器的地板格子一定是被加湿的。

请计算被加湿的 **地板格子** 的最大数量。

### 综合分析与结论
- **思路对比**：三位作者思路一致，均是暴力枚举两个加湿器的放置位置，然后计算每种放置情况下能加湿的地板格子数，最后取最大值。
- **算法要点**：都通过四重循环枚举两个加湿器的坐标，再遍历网格判断每个地板格子是否能被加湿。
- **解决难点**：主要难点在于如何准确判断每个地板格子是否能被两个加湿器中的任意一个加湿，三位作者都通过曼哈顿距离公式 $|i - i'| + |j - j'|$ 来判断。

### 题解评分
- **Ray_yi**：4星。思路清晰，代码注释详细，函数封装合理，提高了代码的可读性和可维护性。
- **JCT_addyi**：3星。思路明确，但代码中变量命名不够清晰，如 `q` 作为输入字符的变量名，降低了代码的可读性。
- **Jayfeather2012**：4星。思路简洁明了，代码风格良好，使用 `#define` 定义了一些类型别名，提高了代码的可读性。

### 所选题解
- **Ray_yi（4星）**
    - **关键亮点**：将判断每个加湿器能加湿的格子数封装成函数 `f`，提高了代码的可读性和可维护性。
    - **核心代码**：
```cpp
int f(int x,int y,int lr){
    int l=0,t[100][100];
    if(lr){
        for(int i=1;i<=h;i++)
            for(int j=1;j<=w;j++)
                t[i][j]=0;//清0 
    }
    for(int i=1;i<=h;i++){
        for(int j=1;j<=w;j++){
            if((abs(i-x)+abs(j-y))<=d&&a[i][j]!='#'&&t[i][j]==0) l++,t[i][j]=1;
            //加湿器可以加湿当前位置 
        }
    }
    return l;//返回答案 
}
```
核心实现思想：该函数用于计算以 $(x, y)$ 为坐标的加湿器能加湿的地板格子数。通过遍历整个网格，判断每个格子是否为地板且与该加湿器的曼哈顿距离小于等于 $d$，同时使用二维数组 `t` 标记已经被统计过的格子，避免重复统计。

- **Jayfeather2012（4星）**
    - **关键亮点**：思路简洁，代码风格良好，使用 `#define` 定义了一些类型别名，提高了代码的可读性。
    - **核心代码**：
```cpp
int sum(int xa,int ya,int xb,int yb){
    return abs(xa-xb)+abs(ya-yb);
}
// 计算曼哈顿距离 
```
核心实现思想：该函数用于计算两个格子 $(xa, ya)$ 和 $(xb, yb)$ 之间的曼哈顿距离，通过绝对值函数 `abs` 计算横纵坐标差值的绝对值之和。

### 最优关键思路或技巧
- **暴力枚举**：由于数据范围较小，直接使用四重循环枚举两个加湿器的放置位置，避免了复杂的算法设计。
- **函数封装**：将计算曼哈顿距离和每个加湿器能加湿的格子数封装成函数，提高了代码的可读性和可维护性。

### 可拓展之处
同类型题或类似算法套路：可以拓展到多个加湿器的情况，或者改变网格的形状和限制条件。解题思路仍然可以采用暴力枚举的方法，只是循环嵌套的层数会增加。

### 洛谷相似题目推荐
- [P1618 三连击（升级版）](https://www.luogu.com.cn/problem/P1618)：通过枚举所有可能的组合来找到满足条件的解。
- [P1036 选数](https://www.luogu.com.cn/problem/P1036)：使用枚举的方法从 $n$ 个数中选出 $k$ 个数，计算它们的和是否为素数。
- [P1157 组合的输出](https://www.luogu.com.cn/problem/P1157)：枚举所有可能的组合，并按字典序输出。

### 个人心得
题解中未包含个人心得。

---
处理用时：31.50秒
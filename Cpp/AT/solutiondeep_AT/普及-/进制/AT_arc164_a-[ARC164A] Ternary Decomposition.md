# 题目信息

# [ARC164A] Ternary Decomposition

## 题目描述

给定两个整数 $N,K$，判断 $N$ 能不能用 $K$ 个 $3^{n}(n\in \N)$ 之和表示。

**本题有多组测试数据。**

Translated by [lelml](/user/372622).

## 说明/提示

$1\le T \le 10^5,1 \le K \le N \le 10^{18}$

## 样例 #1

### 输入

```
4

5 3

17 2

163 79

1000000000000000000 1000000000000000000```

### 输出

```
Yes

No

Yes

Yes```

# AI分析结果

### 题目内容重写
# [ARC164A] Ternary Decomposition

## 题目描述

给定两个整数 $N,K$，判断 $N$ 能不能用 $K$ 个 $3^{n}(n\in \N)$ 之和表示。

**本题有多组测试数据。**

Translated by [lelml](/user/372622).

## 说明/提示

$1\le T \le 10^5,1 \le K \le N \le 10^{18}$

## 样例 #1

### 输入

```
4

5 3

17 2

163 79

1000000000000000000 1000000000000000000```

### 输出

```
Yes

No

Yes

Yes```

### 综合分析与结论

这道题的核心在于如何判断一个数 $N$ 能否被分解为 $K$ 个 $3$ 的幂次方之和。题解中大多数思路都围绕三进制分解展开，通过计算 $N$ 在三进制下的数位和 $m$，判断 $m$ 与 $K$ 的关系以及它们的奇偶性是否一致。具体来说，题解中提到的关键点包括：

1. **三进制分解**：将 $N$ 转换为三进制，计算其数位和 $m$，这是 $N$ 能被分解的最小项数。
2. **项数调整**：通过将 $3^x$ 分解为 $3^{x-1} + 3^{x-1} + 3^{x-1}$，可以增加 $2$ 个项数，因此只有当 $K - m$ 为偶数时，才能通过调整得到 $K$ 个项。
3. **边界条件**：如果 $N < K$，则无法分解；如果 $N = K$，则可以直接分解为 $K$ 个 $3^0$。

### 所选高星题解

#### 1. 作者：FReQuenter (4星)
**关键亮点**：
- 代码简洁，逻辑清晰，直接通过三进制分解计算数位和 $m$，并判断 $m$ 与 $K$ 的关系及奇偶性。
- 代码中包含了边界条件的处理，如 $N < K$ 的情况。

**核心代码**：
```cpp
int tmp=n,m=0;
while(tmp){
    m+=tmp%3;
    tmp/=3;
}
if(k%2!=m%2||m>k) cout<<"No\n";
else cout<<"Yes\n";
```

#### 2. 作者：wnsyou (4星)
**关键亮点**：
- 详细解释了三进制分解的原理，并给出了如何通过调整项数来满足 $K$ 的条件。
- 代码中对 $N$ 的三进制分解进行了清晰的实现，并处理了 $N < K$ 的情况。

**核心代码**：
```cpp
while(n>0){
    while(n%3)cnt++,n--;
    n/=3;
}
if(k>=cnt&&(k-cnt)%2==0)cout<<"Yes"<<endl;
else cout<<"No"<<endl;
```

#### 3. 作者：hellolin (4星)
**关键亮点**：
- 详细解释了如何通过三进制分解来判断 $N$ 能否被分解为 $K$ 个 $3$ 的幂次方之和。
- 代码中对三进制分解的实现非常清晰，并且处理了 $S < K$ 的情况。

**核心代码**：
```cpp
do {
    s += n%3;
    n /= 3;
} while(n);
if(s>k) {
    ans = "No";
} else {
    ans = ((k-s)%2) ? "No" : "Yes";
}
```

### 最优关键思路或技巧
1. **三进制分解**：通过将 $N$ 转换为三进制，计算其数位和 $m$，这是判断 $N$ 能否被分解为 $K$ 个 $3$ 的幂次方之和的关键。
2. **项数调整**：通过将 $3^x$ 分解为 $3^{x-1} + 3^{x-1} + 3^{x-1}$，可以增加 $2$ 个项数，因此只有当 $K - m$ 为偶数时，才能通过调整得到 $K$ 个项。
3. **边界条件处理**：在处理 $N < K$ 或 $N = K$ 的情况时，直接输出结果，避免不必要的计算。

### 可拓展之处
这类题目可以拓展到其他进制分解问题，例如判断一个数能否被分解为 $K$ 个 $2$ 的幂次方之和，或者 $K$ 个 $5$ 的幂次方之和。类似的思路也可以应用于其他数学分解问题。

### 推荐题目
1. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045) - 考察大数处理和幂次方分解。
2. [P1226 快速幂](https://www.luogu.com.cn/problem/P1226) - 考察快速幂算法，与本题的幂次方分解相关。
3. [P1069 分解质因数](https://www.luogu.com.cn/problem/P1069) - 考察数的分解，与本题的分解思路类似。

---
处理用时：39.58秒
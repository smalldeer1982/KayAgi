# 题目信息

# [ABC016D] 一刀両断

## 题目描述

# 一刀两断

高桥君是一位空手道练习者，现在他已经成为了一名大犇，用手劈木板就像劈空气一样（而且劈出的轨迹是一条线段）。

现在他找了一个多边形木桩，求他这一手下去可以把这个多边形木桩劈成几段。

## 样例 #1

### 输入

```
-2 0 2 0

4

1 1

-1 1

-1 -1

1 -1```

### 输出

```
2```

## 样例 #2

### 输入

```
-3 1 3 1

8

2 2

1 2

1 0

-1 0

-1 2

-2 2

-2 -1

2 -1```

### 输出

```
3```

# AI分析结果



# [ABC016D] 一刀両断 中文翻译

## 题目描述

高桥君是一位空手道高手，能够用手劈开木桩，劈出的轨迹是一条线段。现给定一个多边形木桩，求劈砍后将木桩分成几段。

## 样例 #1

### 输入
```
-2 0 2 0
4
1 1
-1 1
-1 -1
1 -1
```

### 输出
```
2
```

## 样例 #2

### 输入
```
-3 1 3 1
8
2 2
1 2
1 0
-1 0
-1 2
-2 2
-2 -1
2 -1
```

### 输出
```
3
```

---

**算法分类**  
数学（计算几何）

---

### 综合分析与结论

**核心思路**  
切割线段将平面分成两部分，每穿过多边形的一条边就会新增一个分割区域。最终区域数等于线段与多边形边相交次数的一半加1。

**关键技巧**  
1. 使用快速排斥实验与跨立实验判断线段相交  
2. 处理多边形首尾相连的边  
3. 线段端点相交的特殊情况处理  

**代码实现要点**  
```python
def ccw(a, b, c):
    return (b[0]-a[0])*(c[1]-a[1]) - (b[1]-a[1])*(c[0]-a[0])

def is_intersect(a, b, c, d):
    if max(a[0], b[0]) < min(c[0], d[0]) or max(c[0], d[0]) < min(a[0], b[0]):
        return False
    if max(a[1], b[1]) < min(c[1], d[1]) or max(c[1], d[1]) < min(a[1], b[1]):
        return False
    v1 = ccw(a, b, c)
    v2 = ccw(a, b, d)
    v3 = ccw(c, d, a)
    v4 = ccw(c, d, b)
    return (v1*v2 <= 0) and (v3*v4 <= 0)
```

---

**推荐题目**  
1. [P1355 三角形的使用](https://www.luogu.com.cn/problem/P1355)  
2. [P2742 圈奶牛](https://www.luogu.com.cn/problem/P2742)  
3. [P4196 凸多边形](https://www.luogu.com.cn/problem/P4196)  

---

**心得总结**  
- 注意多边形首尾顶点相连的闭合处理  
- 叉积计算时注意整数溢出问题  
- 测试案例需包含线段经过多边形顶点的情况

---
处理用时：151.99秒
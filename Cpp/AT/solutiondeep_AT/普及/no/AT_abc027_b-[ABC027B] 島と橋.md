# 题目信息

# [ABC027B] 島と橋

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc027/tasks/abc027_b

$ N $ 個の島が横一列に並んでいる。 $ 1≦i≦N-1 $ について、左から $ i $ 番目の島と $ i+1 $ 番目の島は隣り合っている。

はじめ、左から $ i $ ($ 1≦i≦N $) 番目の島には $ a_i $ 人の住人が住んでいる。 高橋君はすべての島に同じ人数の住人が住むようにしたいと考えている。

高橋君は隣り合う $ 2 $ つの島の間に橋を架けることができる。 また、直接的または間接的に橋で結ばれた複数の島の間で、住人を自由に移動させることができる。

すべての島に同じ人数の住人が住むようにするために、架ける必要のある橋の本数の最小値を求めよ。

## 说明/提示

### Sample Explanation 1

図のように橋を架ければよい。 !\[\](https://abc027.contest.atcoder.jp/img/abc/027/kakofvcs22vft/bridge\_1.png)

### Sample Explanation 2

図のように橋を架ければよい。 !\[\](https://abc027.contest.atcoder.jp/img/abc/027/kakofvcs22vft/bridge\_2.png)

### Sample Explanation 3

どのように橋を架けてもすべての島に同じ人数の住人が住むようにできない。

### Sample Explanation 4

はじめからすべての島に同じ人数の住人が住んでいる。

## 样例 #1

### 输入

```
3

1 2 3```

### 输出

```
2```

## 样例 #2

### 输入

```
5

2 0 0 0 3```

### 输出

```
3```

## 样例 #3

### 输入

```
2

0 99```

### 输出

```
-1```

## 样例 #4

### 输入

```
4

0 0 0 0```

### 输出

```
0```

# AI分析结果



# [ABC027B] 島と橋

## 题目描述

N 个岛横向排列。对于 1≤i≤N-1，左起第 i 个岛与第 i+1 个岛相邻。初始时左起第 i 个岛有 a_i 个居民。现要通过架设桥梁（只能建在相邻两岛间）使得所有岛人口相同。桥梁连接的岛屿间可自由移动居民。求最少需架设多少桥，若不可能则输出 -1。

## 算法分类
贪心

## 题目分析与解题思路

### 核心条件
总人口必须能被 N 整除，否则直接返回 -1。当满足条件时，每个岛目标人口为 avg = sum(a)/N。

### 关键思路
将岛屿分割为多个连续区间，每个区间总人口等于区间长度×avg。最少桥数 = 总岛数 - 分割区间数。

### 解决难点
1. **数学建模**：桥的数量与分割区间数呈反向关系，需最大化分割区间数。
2. **贪心策略**：遍历时一旦当前区间满足条件立即分割，保证局部最优。
3. **边界处理**：遍历结束需校验所有元素均被正确分割。

## 精选题解

### 题解1（五星）
**亮点**：简洁的贪心实现，完美处理边界条件  
**核心思路**：  
- 计算总和能否被N整除  
- 维护当前区间和与长度，及时分割  
- 最终校验剩余元素确保完整性  

```python
n = int(input())
a = list(map(int, input().split()))
total = sum(a)
if total % n != 0:
    print(-1)
else:
    avg = total // n
    current_sum = cnt = parts = 0
    for num in a:
        current_sum += num
        cnt += 1
        if current_sum == avg * cnt:
            parts += 1
            current_sum = 0
            cnt = 0
    print(n - parts if cnt == 0 else -1)
```

### 题解要点总结
1. **及时分割**：当区间和满足条件时立即重置累加器，最大化分割次数。
2. **完整性校验**：遍历结束后必须检查累加器是否归零，防止未完成分割。

## 拓展应用
类似区间分割问题可参考：
1. 分割数组为连续子序列（LeetCode 659）
2. 将数组分成和相等的三个部分（LeetCode 1013）
3. 划分k个相等子集（LeetCode 698）

## 推荐练习
1. [P1031 均分纸牌](https://www.luogu.com.cn/problem/P1031)  
2. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)  
3. [P3143 [USACO16OPEN] Diamond Collector S](https://www.luogu.com.cn/problem/P3143)  

## 心得体会
调试时曾忽略遍历结束后的校验步骤，导致错误通过部分测试用例。关键教训：**贪心算法必须保证全局完整性**，不能仅依赖局部正确性。通过构造极端测试数据（如全零、单个元素）可有效验证边界条件。

---
处理用时：748.30秒
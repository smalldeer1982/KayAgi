# 题目信息

# [ABC033C] 数式の書き換え

## 题目描述

给出满足以下限制的公式$S$。

1.运算符仅由+（加法）和*（乘法）组成。优先计算乘法；

2.不存在括号；

3.每一个数都是是$1$位数的整数。

例如，1+3*4*0、1+2+3+4+5等公式满足此条件，但12+3+5、4*6*7-3、（3+4）*5+2等公式不满足条件。

请您通过在公式中选几个数字并将其改为$0$，将此公式的最后结果变成$0$。求最少要改写几个数字。

## 说明/提示

给出的公式是：$0+0+2*0=0$。因此，因此，不需要改写数字。


通过将输入的第一个字符和第五个字符改写为0，可以得到$0*1+0*2=0$，最终使运算结果变为0。

## 样例 #1

### 输入

```
0+0+2*0```

### 输出

```
0```

## 样例 #2

### 输入

```
3*1+1*2```

### 输出

```
2```

## 样例 #3

### 输入

```
3*1*4+0+2*0+5*2+9*8*6+1+3```

### 输出

```
5```

# AI分析结果



# [ABC033C] 数式の書き換え

## 题目描述
给出满足以下限制的公式$S$：

1. 运算符仅由+（加法）和*（乘法）组成，优先计算乘法；
2. 不存在括号；
3. 每一个数都是1位数的整数。

通过在公式中选几个数字并将其改为0，使公式的结果变为0。求最少要改写几个数字。

## 算法分类
贪心

---

## 题解分析与结论

**核心思路**：  
由于表达式是多个乘法项相加的结果，要使总和为0，必须确保每个乘法项的结果都为0。对于每个乘法项：
- 若存在至少一个0，则其乘积必然为0，无需修改；
- 若全为非零数，必须修改其中一个数为0（操作次数+1）。

**解决难点**：  
- 正确分割乘法项（以+为分隔符）
- 快速判断每个乘法项是否需要修改

---

## 精选题解

### 题解作者：FFTotoro（5星）
**关键亮点**：  
- 利用遍历时实时统计乘法项状态，无需显式分割表达式
- 代码极度简洁（仅需一次遍历）
- 时间复杂度O(n)，空间复杂度O(1)

**核心代码**：  
```cpp
string s; int c=0,x=1; cin>>s;
for(char i:s)
  switch(i){
    case '+':c+=x,x=1; break;
    case '0':x=0;
  }
cout<<c+x<<endl;
```
**实现思想**：  
- `x`表示当前乘法项的状态（0表示存在0，1表示全为非零）
- 遇到`+`时将当前项的状态累加，并重置状态
- 遇到`0`时标记当前项无需修改
- 最终加上最后一个未处理的项

---

## 关键思路总结
**核心技巧**：  
- **表达式分段处理**：利用加法运算符自然分割乘法项
- **状态标记法**：用单个变量记录当前乘法项是否需要修改
- **贪心选择**：每个乘法项只需最少的0修改次数

**同类扩展**：  
类似的分段处理思想可应用于：
1. 带优先级运算符的表达式解析
2. 需要分块计算最优解的问题
3. 字符串中多条件状态维护类题目

---

## 推荐习题
1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003) - 贪心选择覆盖区域的最后地毯
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223) - 贪心选择最优排序策略
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心选择最小合并代价

---
处理用时：55.15秒
# 题目信息

# [ABC099C] Strange Bank

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc099/tasks/abc099_c

ある銀行では、お金の引き出しを難しくするために、一回の操作で引き出せる金額が以下のいずれかとなっています。

- $ 1 $ 円
- $ 6 $ 円、$ 6^2(=36) $ 円、$ 6^3(=216) $ 円、$ ... $
- $ 9 $ 円、$ 9^2(=81) $ 円、$ 9^3(=729) $ 円、$ ... $

この銀行からちょうど $ N $ 円を引き出すには少なくとも何回の操作が必要か求めてください。

ただし、一度引き出したお金を再び預け入れてはならないとします。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 100000 $
- $ N $ は整数

### Sample Explanation 1

$ 1 $ 円、$ 9 $ 円、$ 36(=6^2) $ 円、$ 81(=9^2) $ 円を引き出す操作をそれぞれ $ 1 $ 回ずつ行うことで、合計 $ 4 $ 回の操作で $ 127 $ 円を引き出すことができます。

### Sample Explanation 2

$ 1 $ 円を 引き出す操作を $ 3 $ 回 行うことで、合計 $ 3 $ 回の操作で $ 3 $ 円を引き出すことができます。

## 样例 #1

### 输入

```
127```

### 输出

```
4```

## 样例 #2

### 输入

```
3```

### 输出

```
3```

## 样例 #3

### 输入

```
44852```

### 输出

```
16```

# AI分析结果



**题目内容**
# [ABC099C] 奇怪的银行

## 题目描述

某个银行为增加取款难度，规定每次操作只能取出以下金额之一：

- 1 元
- 6 的幂次方元（如 6, 36, 216 等）
- 9 的幂次方元（如 9, 81, 729 等）

求恰好取出 N 元所需的最少操作次数（取出的钱不可重新存入）。

**算法分类**：动态规划

---

**综合分析**

本题核心是**完全背包**模型，将允许的取款金额视为物品，总金额为背包容量，求最小物品数。难点在于正确生成所有可能的取款金额，并高效处理动态规划状态转移。

---

**精选题解**

1. **Kvaratskhelia 的题解（⭐⭐⭐⭐⭐）**
   - **亮点**：通过预处理生成所有可能的面额，转化为完全背包问题，代码简洁高效。
   - **关键代码**：
     ```cpp
     // 生成面额数组
     a[++cnt]=1;
     p=1;
     for(int i=1;i<=8;i++) { // 生成6的幂
         p*=6;
         a[++cnt]=p;
     }
     p=1;
     for(int i=1;i<=6;i++) { // 生成9的幂
         p*=9;
         a[++cnt]=p;
     }
     sort(a+1,a+cnt+1);
     // 完全背包DP
     memset(f,0x3f,sizeof(f));
     f[0]=0;
     for(int i=1;i<=cnt;i++)
         for(int j=a[i];j<=n;j++)
             f[j] = min(f[j], f[j-a[i]]+1);
     ```
   - **实现思想**：将所有可能的6/9的幂次存入数组，排序后按完全背包处理，每个金额可无限使用，状态转移时取最小操作次数。

---

**最优技巧总结**

- **预处理技巧**：直接生成6的8次方和9的6次方范围内的所有可能面额（即使超过n），利用排序保证遍历顺序，动态规划时自动过滤无效面额。
- **背包逆向思维**：将取款操作转化为物品选择问题，每个操作的价值为1，求最小总价值。

---

**拓展训练**

1. [P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)（完全背包经典题）
2. [P2918 [USACO08NOV] Buying Hay S](https://www.luogu.com.cn/problem/P2918)（带容量扩展的完全背包）
3. [P2563 [AHOI2001]质数和分解](https://www.luogu.com.cn/problem/P2563)（质数分解与完全背包结合）

---

**心得启示**

- **预处理边界**：虽然生成的面额可能超出当前n的范围，但动态规划过程中会自动过滤，这种简化处理在数据范围可控时非常有效。
- **完全背包变体**：当需要最小化操作次数时，将价值设为1，容量设为目标值，即可复用标准背包框架。

---
处理用时：81.77秒
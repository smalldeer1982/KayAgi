# 题目信息

# [ABC124D] Handstand

## 题目描述

有一个长为 $n$ 的字符串 $s$，只含 $0$ 和 $1$。  

你可以进行最多 $k$ 次如下操作（$0$ 次也可以）：



- 选择字符串 $s$ 的一个子串，将其中的字符反转（$0$ 变成 $1$，$1$ 变成 $0$）。



进行不超过 $k$ 次操作后，求最长的连续的 $1$ 的长度。

## 样例 #1

### 输入

```
5 1

00010```

### 输出

```
4```

## 样例 #2

### 输入

```
14 2

11101010110011```

### 输出

```
8```

## 样例 #3

### 输入

```
1 1

1```

### 输出

```
1```

# AI分析结果



# [ABC124D] 倒立

## 题目描述

给定一个长度为 $n$ 的只包含 '0' 和 '1' 的字符串 $s$。最多可以进行 $k$ 次操作，每次操作可以选择任意子串将其翻转（0 变 1，1 变 0）。求操作后最长连续 '1' 的长度。

---

**算法分类**：滑动窗口/双指针

---

## 题解综合分析

### 核心思路
将原始字符串压缩为交替的 0/1 块序列（如 00010 → [3,1,1]），通过滑动窗口维护最多包含 k 个 0 块的区间，计算该区间覆盖的总长度。关键点在于预处理分段和窗口维护策略。

### 最优解法要点
1. **块预处理**：将连续相同字符压缩为数值块（0 块记正值，1 块记负值）
2. **滑动窗口维护**：窗口内最多保留 k 个 0 块，超出时移除最早添加的 0 块及其前导 1 块
3. **快速计算**：利用绝对值累加块长度，时间复杂度 O(n)

---

## 高星题解推荐

### 题解1：_maojun_（⭐⭐⭐⭐⭐）
**关键亮点**：
- 创新的块表示法（0块正数，1块负数）
- 窗口维护时直接计算过期段的数学表达式
- 处理全 0 串等边界情况优雅

```cpp
void read(){
    // 预处理为交替的 0/1 块
    if(t[1]==0) a[tot=1]=1;
    else a[tot=1]=-1;
    for(int i=2;i<=n;i++)
        if(t[i]==t[i-1]){
            if(t[i]==0) a[tot]++;
            else a[tot]--;
        }
        else{
            if(t[i]==0) a[++tot]=1;
            else a[++tot]=-1;
        }
}

int main(){
    int maxn=0,now=0,val=0;
    for(int i=1;i<=n;i++){ 
        if(a[i]>0){ // 处理 0 块
            if(now==k) val -= a[i-2*k] - a[i-2*k-1];
            else now++;
        }
        val += abs(a[i]);
        maxn = max(maxn,val);
    }
    printf("%d\n",maxn);
}
```

### 题解2：wjr_jok（⭐⭐⭐⭐）
**实现亮点**：
- 实时处理字符的双指针法
- 直观的修改机会管理
- 包含调试边界处理的示范

```cpp
while(l<=r && r<n){
    if(!xl[r+1]){ // 处理 0 块
        if(k){ // 使用修改机会
            k--;
            while(!xl[r+1] && r<n) r++,cnt++;
            while(xl[r+1] && r<n) r++,cnt++;
        } else { // 回滚最早修改
            k++;
            while(xl[l+1] && l<=r) l++,cnt--;
            while(!xl[l+1] && l<=r) l++,cnt--;
        }
    } else { // 直接扩展 1 块
        r++,cnt++;
    }
    ans = max(ans,cnt);
}
```

---

## 关键技巧总结
1. **块压缩表示法**：将连续相同字符转化为数值块，降低处理维度
2. **窗口维护公式**：通过数学表达式 (i-2k) 快速定位过期元素
3. **绝对值累加**：统一处理 0/1 块的贡献计算

---

## 同类题目推荐
1. P2550 [AHOI2001] 彩票摇奖（滑动窗口统计）
2. P2678 跳石头（二分答案+窗口验证）
3. P3143 [USACO16OPEN] Diamond Collector（双指针求最大区间）

---
处理用时：44.92秒
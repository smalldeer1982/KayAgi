# 题目信息

# [ABC126D] Even Relation

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc126/tasks/abc126_d

$ N $ 頂点の木があります。 この木の $ i $ 番目の辺は頂点 $ u_i $ と頂点 $ v_i $ を結んでおり、その長さは $ w_i $ です。 あなたは以下の条件を満たすように、この木の頂点を白と黒の $ 2 $ 色で塗り分けたいです (すべての頂点を同じ色で塗っても構いません)。

- 同じ色に塗られた任意の $ 2 $ 頂点について、その距離が偶数である。

条件を満たす塗り分け方を $ 1 $ つ見つけて出力してください。この問題の制約下では、そのような塗り分け方が必ず $ 1 $ つは存在することが証明できます。

## 说明/提示

### 制約

- 入力は全て整数である。
- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ u_i\ <\ v_i\ \leq\ N $
- $ 1\ \leq\ w_i\ \leq\ 10^9 $

## 样例 #1

### 输入

```
3

1 2 2

2 3 1```

### 输出

```
0

0

1```

## 样例 #2

### 输入

```
5

2 5 2

2 3 10

1 3 8

3 4 2```

### 输出

```
1

0

1

0

1```

# AI分析结果



【题目中文重写】  
已提供中文题目描述，此处不再重复。  

【算法分类】  
深度优先搜索（DFS）/ 图论  

【题解综合分析】  
所有题解均基于以下核心思路：利用树的遍历（DFS/BFS），根据边权的奇偶性进行节点染色。通过确保相邻节点在奇数边权时颜色相反、偶数时相同，保证同色节点路径总边权为偶数。该问题本质是构建满足奇偶约束的二分图。  

【高分题解推荐】  
1. **Zhangikun的题解（4.5星）**  
   **亮点**：代码简洁，逻辑清晰，采用邻接表存储，递归DFS实现。  
   **心得**：正确性基于树的无环特性，初始根节点颜色不影响最终结果。  
   **核心代码**：  
   ```cpp
   void dfs(int cur, int fa) {
     for (auto &edge : nbr[cur]) {
       if (edge.go == fa) continue;
       ans[edge.go] = (edge.w % 2) ? !ans[cur] : ans[cur];
       dfs(edge.go, cur);
     }
   }
   ```

2. **JWRuixi的题解（4星）**  
   **亮点**：边权取模优化处理，使用位运算快速切换颜色。  
   **核心代码**：  
   ```cpp
   void dfs(int u, int fa) {
     for (int i = head[u]; i; i = e[i].nxt) {
       int v = e[i].v, w = e[i].w;
       ans[v] = w ? !ans[u] : ans[u]; // w已取模为0/1
       dfs(v, u);
     }
   }
   ```

3. **PineappleSummer的题解（4星）**  
   **亮点**：数学证明补充，强调奇偶路径叠加性质。  
   **核心技巧**：计算根到各节点的距离奇偶性，直接染色。  

【关键思路总结】  
- **奇偶传递性**：若父节点到子节点的边权为奇数，则颜色取反；否则继承。  
- **树的性质**：无需考虑环路，单次DFS即可覆盖所有节点。  
- **实现优化**：边权取模（%2）简化判断，位运算快速切换颜色。  

【拓展与应用】  
类似问题可通过奇偶性建模为二分图染色（如 [CF862B](https://codeforces.com/problemset/problem/862/B)）。若路径条件改为模k余数，则需扩展为k色问题。  

【推荐习题】  
1. [P1352 没有上司的舞会](https://www.luogu.com.cn/problem/P1352)（树形DP与状态传递）  
2. [CF977E Cyclic Components](https://codeforces.com/problemset/problem/977/E)（图论中的环检测）  
3. [AT3537 Tree and Hamilton Path](https://atcoder.jp/contests/arc083/tasks/arc083_c)（树的最长路径构造）

---
处理用时：49.66秒
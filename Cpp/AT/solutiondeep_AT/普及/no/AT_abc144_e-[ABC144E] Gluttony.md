# 题目信息

# [ABC144E] Gluttony

## 题目描述

高桥君参加大胃王比赛。比赛由 $N$ 人组成的团队为基本单位参赛，高桥君的队伍的队员从 $1\sim N$ 编号。第 $i$ 名队员的消化代价为 $A_i$。

比赛有 $N$ 种不同的食物，每位队员需要负责吃掉其中一种食物，不能有两名队员吃同一种食物，也不能让一名队员吃多与一种食物。第 $j$ 种食物的难吃程度为 $F_j$。 消化代价 $x$ 的队员吃完难吃程度 $y$ 的食物需要花费 $x\times y$ 秒。 整个队伍的成绩是 $N$ 名队员吃完食物花费时间的最大值。

比赛前，高桥君的队伍会进行修行。一次修行可以将一名消化代价大于 $0$ 的队员的消化代价减少 $1$。由于修行需要消耗庞大的食费，因此最多只能进行 $K$ 次修行。

通过修行和适当选择每位队员吃的食物，高桥队在比赛中能够获得的最好成绩是多少？

## 说明/提示

$1$ 号队员进行 $4$ 次修行，吃 $2$ 号食物，花费 $0$ 秒。

$2$ 号队员进行 $1$ 次修行，吃 $3$ 号食物，花费 $1$ 秒。

$3$ 号队员进行 $0$ 次修行，吃 $1$ 号食物，花费 $2$ 秒。

总成绩取最大值 $2$ 秒。


$1 \le N \le 2\times 10^5$

$0 \le K \le 10^{18}$

$1 \le A_i \le 10^6$

$1 \le F_i \le 10^6$

## 样例 #1

### 输入

```
3 5

4 2 1

2 3 1```

### 输出

```
2```

## 样例 #2

### 输入

```
3 8

4 2 1

2 3 1```

### 输出

```
0```

## 样例 #3

### 输入

```
11 14

3 1 4 1 5 9 2 6 5 3 5

8 9 7 9 3 2 3 8 4 6 2```

### 输出

```
12```

# AI分析结果



# 中文题目

## 题目描述

高桥君参加大胃王比赛。比赛由 $N$ 人组成的团队为基本单位参赛，高桥君的队伍的队员从 $1\sim N$ 编号。第 $i$ 名队员的消化代价为 $A_i$。

比赛有 $N$ 种不同的食物，每位队员需要负责吃掉其中一种食物，不能有两名队员吃同一种食物，也不能让一名队员吃多于一种食物。第 $j$ 种食物的难吃程度为 $F_j$。消化代价 $x$ 的队员吃完难吃程度 $y$ 的食物需要花费 $x \times y$ 秒。整个队伍的成绩是 $N$ 名队员吃完食物花费时间的最大值。

比赛前，高桥君的队伍会进行修行。一次修行可以将一名消化代价大于 $0$ 的队员的消化代价减少 $1$。由于修行需要消耗庞大的食费，因此最多只能进行 $K$ 次修行。

通过修行和适当选择每位队员吃的食物，高桥队在比赛中能够获得的最好成绩是多少？

## 算法分类
二分

---

### 题解分析与结论

各题解核心思路一致：**贪心排序+二分答案**。关键步骤如下：
1. **贪心配对**：将 $A$ 升序排序，$F$ 降序排序，使得最大乘积尽可能小。
2. **二分答案**：在可能的最小最大时间范围内进行二分，验证每个中间值是否可以通过不超过 $K$ 次修行达成。
3. **验证函数**：计算每个中间值对应所需的修行次数，采用向上取整公式或整数除法处理边界。

### 高分题解推荐

#### 题解1：ace_amuro（5星）
**关键亮点**：
- 精确的贪心配对解释，明确的二分边界处理。
- 使用整数运算避免浮点误差，代码简洁高效。
- 初始化边界合理，循环条件清晰。

**核心代码**：
```cpp
bool check(LL x){
    LL cnt=0;
    for(int i=1;i<=n;i++){
        if(a[i]*f[i]>x){
            cnt+=(a[i]*f[i]-x+f[i]-1)/f[i];
        }
    }
    return cnt<=k;
}
```

#### 题解2：封禁用户（4星）
**关键亮点**：
- 二分结构采用常见写法，更易理解。
- 详细推导贪心策略的正确性，代码可读性强。

**核心代码**：
```cpp
bool ck(int x){
    int cnt=0;
    for(int i=1;i<=n;i++){
        int sb=a[i]*f[i];
        if(sb>x) cnt+=ceil((sb-x),f[i]);
    }
    return (cnt<=k);
}
```

#### 题解3：cjh20090318（4星）
**关键亮点**：
- 反向排序实现相同效果，代码简洁。
- 直接使用整数除法优化计算步骤。

**核心代码**：
```cpp
bool check(const LL&x){
    LL ret=0;
    for(int i=1;i<=n;i++) 
        ret+=max(a[i]-x/f[i],0ll);
    return ret<=k;
}
```

---

### 最优思路提炼
1. **贪心排序**：将 $A$ 升序与 $F$ 降序配对，确保乘积分布均匀。
2. **二分框架**：答案具有单调性，二分时需合理处理初始边界（如 $l=0, r=1e18$）。
3. **验证技巧**：用整数运算计算修行次数，避免浮点误差。公式 $\lceil \frac{a \cdot f - x}{f} \rceil$ 等价于 $(a \cdot f -x +f-1)/f$。

---

### 拓展建议
- **同类型题目**：类似贪心+二分的题目可参考 [P2216 理想的正方形](https://www.luogu.com.cn/problem/P2216)、[P2884 月下毛景树](https://www.luogu.com.cn/problem/P2884)、[P4344 青蛙的约会](https://www.luogu.com.cn/problem/P4344)。

### 心得体会
- **调试经验**：初始二分边界设置错误可能导致无限循环或结果错误，需仔细验证。
- **实现细节**：必须正确处理整数除法，避免出现负数修行次数的边界情况。

---
处理用时：158.65秒
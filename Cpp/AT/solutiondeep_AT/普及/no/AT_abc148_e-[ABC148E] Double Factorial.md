# 题目信息

# [ABC148E] Double Factorial

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc148/tasks/abc148_e

$ 0 $ 以上の整数 $ n $ に対し、 $ f(n) $ を次のように定義します。

- $ f(n)\ =\ 1 $ ($ n\ <\ 2 $ のとき)
- $ f(n)\ =\ n\ f(n-2) $ ($ n\ >\ =\ 2 $ のとき)

整数 $ N $ が与えられます。$ f(N) $ を $ 10 $ 進法で表記した時に末尾に何個の $ 0 $ が続くかを求めてください。

## 说明/提示

### 制約

- $ 0\ <\ =\ N\ <\ =\ 10^{18} $

### Sample Explanation 1

$ f(12)\ =\ 12\ ×\ 10\ ×\ 8\ ×\ 6\ ×\ 4\ ×\ 2\ =\ 46080 $ なので、末尾の $ 0 $ の個数は $ 1 $ 個です。

### Sample Explanation 2

$ f(5)\ =\ 5\ ×\ 3\ ×\ 1\ =\ 15 $ なので、末尾の $ 0 $ の個数は $ 0 $ 個です。

## 样例 #1

### 输入

```
12```

### 输出

```
1```

## 样例 #2

### 输入

```
5```

### 输出

```
0```

## 样例 #3

### 输入

```
1000000000000000000```

### 输出

```
124999999999999995```

# AI分析结果



# [ABC148E] Double Factorial

## 题目描述

对于 $0$ 以上的整数 $n$，定义 $f(n)$ 如下：

- $f(n) = 1$（当 $n < 2$ 时）
- $f(n) = n \times f(n-2)$（当 $n \geq 2$ 时）

给定整数 $N$，求 $f(N)$ 在十进制表示中末尾有多少个连续的 $0$。

### 制約
- $0 \leq N \leq 10^{18}$

---

**算法分类**：数学

---

## 题解综合分析

题目核心在于计算双阶乘中因子 10 的数量，等价于计算因子 2 和 5 的较小值。对于奇数 $N$，双阶乘中不存在因子 2，故结果为 0。对于偶数 $N$，双阶乘可转化为 $2^{k} \times k!$（其中 $k=N/2$），此时因子 2 的总量远多于 5，只需计算 $k!$ 中因子 5 的个数。

---

### 精选题解（评分：4.5⭐）

**作者**：_Andy_Lin_  
**关键思路**：
1. 奇偶性分治：奇数直接返回 0，偶数转计算 $(N/2)!$ 的因子 5 数
2. 数学优化：利用阶乘因子计数法，通过连续除以 5 的迭代求和
3. 时间复杂度：$O(\log_5 N)$，完美处理 $10^{18}$ 量级

**代码核心**：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long n,ans;
int main(){
    scanf("%lld",&n);
    if(n&1) { printf("0"); return 0; } // 奇数情况
    n >>= 1; // 计算 k = N/2
    while(n){
        ans += n/5;
        n /=5; // 累加因子5的数量
    }
    printf("%lld",ans);
}
```

**个人心得**：
- 调试关键：验证奇偶分治的正确性，特别是边界值如 $N=0$（应输出 0）
- 优化理解：发现双阶乘可拆解为 $2^k \times k!$ 是突破点

---

## 同类题目推荐
1. [P1403 阶乘末尾的零](https://www.luogu.com.cn/problem/P1403) - 直接考察阶乘末尾零计算
2. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029) - 数论因子分析
3. [P2751 分解因数](https://www.luogu.com.cn/problem/P2751) - 质因数分解的变种应用

---
处理用时：81.83秒
# 题目信息

# [ABC327D] Good Tuple Problem

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc327/tasks/abc327_d

$ N $ 以下の正整数からなる長さ $ M $ の数列の組 $ (S,\ T)\ =\ ((S_1,\ S_2,\ \dots,\ S_M),\ (T_1,\ T_2,\ \dots,\ T_M)) $ が **良い数列の組である** とは、$ (S,\ T) $ が次の条件を満たすことを言います。

- $ 0,1 $ からなる長さ $ N $ の数列 $ X\ =\ (X_1,\ X_2,\ \dots,\ X_N) $ であって次の条件を満たすものが存在する。
  - $ i=1,\ 2,\ \dots,\ M $ それぞれについて、$ X_{S_i}\ \neq\ X_{T_i} $ が成立する。
 
$ N $ 以下の正整数からなる長さ $ M $ の数列の組 $ (A,\ B)\ =\ ((A_1,\ A_2,\ \dots,\ A_M),\ (B_1,\ B_2,\ \dots,\ B_M)) $ が与えられます。$ (A,\ B) $ が良い数列の組である場合は `Yes` を、そうでない場合は `No` を出力してください。

## 说明/提示

### 制約

- $ 1\ \leq\ N,\ M\ \leq\ 2\ \times\ 10^5 $
- $ 1\ \leq\ A_i,\ B_i\ \leq\ N $
- 入力される値は全て整数
 
### Sample Explanation 1

$ X=(0,1,0) $ とすると、$ X $ は $ 0,1 $ からなる長さ $ N $ の数列で、 $ X_{A_1}\ \neq\ X_{B_1} $ かつ $ X_{A_2}\ \neq\ X_{B_2} $ を満たします。 よって、$ (A,B) $ は良い数列の組としての条件を満たしています。

### Sample Explanation 2

条件を満たすような数列 $ X $ は存在しないので、$ (A,\ B) $ は良い数列の組ではありません。

## 样例 #1

### 输入

```
3 2

1 2

2 3```

### 输出

```
Yes```

## 样例 #2

### 输入

```
3 3

1 2 3

2 3 1```

### 输出

```
No```

## 样例 #3

### 输入

```
10 1

1

1```

### 输出

```
No```

## 样例 #4

### 输入

```
7 8

1 6 2 7 5 4 2 2

3 2 7 2 1 2 3 3```

### 输出

```
Yes```

# AI分析结果



# [ABC327D] Good Tuple Problem 的中文翻译

## 题目描述

给定由不超过 $N$ 的正整数组成的长为 $M$ 的数列对 $(A,B)$，判断其是否为**好的数列对**。  
好的数列对定义为：存在一个由 0 和 1 组成的长为 $N$ 的数列 $X$，使得对于每个 $1 \leq i \leq M$，满足 $X_{A_i} \neq X_{B_i}$。

## 输入格式
输入包含：
- 第一行两个整数 $N, M$
- 第二行 $M$ 个整数 $A_1, A_2, ..., A_M$
- 第三行 $M$ 个整数 $B_1, B_2, ..., B_M$

## 输出格式
若 $(A,B)$ 是好的数列对，输出 `Yes`，否则输出 `No`。

---

**算法分类**：图论（二分图判定 / 种类并查集）

---

## 题解综合分析

### 核心思路
将每个约束条件 $A_i$ 与 $B_i$ 视为图中的无向边，问题等价于判断该图是否为二分图。若能二色染色（相邻节点颜色不同），则存在合法解，否则无解。

### 解决难点
1. **建模转换**：将数值约束转化为图的边关系。
2. **连通分量处理**：图可能不连通，需对每个连通块独立处理。
3. **高效判断**：需线性时间算法处理 $2 \times 10^5$ 规模数据。

---

## 高分题解推荐

### 题解1：种类并查集（★★★★★）
**作者**：OldDriverTree  
**亮点**：
- 将每个点拆分为两个状态（0/1），通过并查集维护矛盾关系。
- 代码极简（仅20行），时间复杂度 $O(Mα(N))$ 效率极高。
- 直接处理矛盾条件，逻辑清晰。

**核心代码**：
```cpp
int fa[N<<1|1];
int find(int x) { return fa[x]^x ? fa[x]=find(fa[x]) : x; }

for (int i=0;i<m;i++) {
    int x=find(a[i]), y=find(b[i]);
    if (x == y) return printf("No"),0; // 直接矛盾
    fa[find(n+a[i])] = y; // 合并相反状态
    fa[find(n+b[i])] = x;
}
```

### 题解2：BFS染色法（★★★★☆）
**作者**：ACtheQ  
**亮点**：
- 标准二分图判定方案，直观易懂。
- 处理不连通图完整，使用队列避免递归栈溢出。

**核心实现**：
```cpp
bool bfs(int s) {
    queue<int> q;
    vis[s] = 1;
    q.push(s);
    while(!q.empty()) {
        int u = q.front(); q.pop();
        for(int v : G[u]) {
            if(vis[v] == vis[u]) return false; // 冲突
            if(!vis[v]) {
                vis[v] = -vis[u];
                q.push(v);
            }
        }
    }
    return true;
}
// 主函数中对每个未访问节点启动BFS
```

---

## 关键思路总结
1. **二分图视角**：将约束视为边，问题转化为判断图的二分性。
2. **状态拆分技巧**：在并查集中维护节点的两种可能状态，通过合并操作表达约束。
3. **边处理优化**：无需显式建图，直接处理每对约束。

---

## 拓展与心得
- **同类问题**：类似题目如判断朋友敌人关系（P1892）、封锁阳光大学（P1330）。
- **调试心得**：需注意节点编号偏移（如种类并查集中的n+a[i]），避免数组越界。
- **思维突破**：将二元约束转换为图论问题是关键，类似2-SAT可扩展至多条件。

---

## 推荐练习题
1. [P1330 封锁阳光大学](https://www.luogu.com.cn/problem/P1330)（二分图判定）
2. [P1892 BOI2003 团伙](https://www.luogu.com.cn/problem/P1892)（种类并查集）
3. [P1525 关押罪犯](https://www.luogu.com.cn/problem/P1525)（带权并查集/二分答案）

---
处理用时：60.19秒
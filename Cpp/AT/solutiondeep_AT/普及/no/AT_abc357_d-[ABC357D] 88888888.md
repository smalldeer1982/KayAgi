# 题目信息

# [ABC357D] 88888888

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc357/tasks/abc357_d

正整数 $ N $ に対して、$ N $ を $ N $ 個つなげた整数を $ V_N $ とします。  
 より厳密には、$ N $ を文字列とみなしたものを $ N $ 個連結し、 それを再度整数とみなしたものを $ V_N $ とします。  
 例えば、$ V_3=333 $, $ V_{10}=10101010101010101010 $ です。

$ V_N $ を $ 998244353 $ で割った余りを求めてください。

## 说明/提示

### 制約

- $ 1\leq\ N\leq\ 10^{18} $
- $ N $ は整数
 
### Sample Explanation 1

$ V_5=55555 $ を $ 998244353 $ で割った余りは $ 55555 $ です。

### Sample Explanation 2

$ V_9=999999999 $ を $ 998244353 $ で割った余りは $ 1755646 $ です。

### Sample Explanation 3

入力が $ 32 $ bit 整数型に収まらない可能性があることに注意してください。

## 样例 #1

### 输入

```
5```

### 输出

```
55555```

## 样例 #2

### 输入

```
9```

### 输出

```
1755646```

## 样例 #3

### 输入

```
10000000000```

### 输出

```
468086693```

# AI分析结果



# 题目中文翻译

## 题目描述

对于正整数 $ N $，将 $ N $ 重复连接 $ N $ 次形成的整数称为 $ V_N $。  
更严格地说，将 $ N $ 视为字符串重复连接 $ N $ 次后，再转换为整数即为 $ V_N $。  
例如，$ V_3=333 $，$ V_{10}=10101010101010101010 $。

求 $ V_N $ 对 $ 998244353 $ 取模的结果。

## 输入输出样例

### 样例 #1
输入：5  
输出：55555

### 样例 #2
输入：9  
输出：1755646

---

**算法分类**：数学

---

## 题解综合分析

各题解核心思路均为将重复拼接转换为等比数列求和问题。关键步骤：
1. 计算数字位数 $d$
2. 构造等比数列求和公式 $ V_N = N \times \frac{10^{N \cdot d} - 1}{10^d - 1} $
3. 使用快速幂计算大指数模运算
4. 通过费马小定理处理分母的模逆元

### 精选题解（评分≥4★）

#### 1. stripe_python（★★★★★）
**核心亮点**：
- 直接应用等比数列公式，代码简洁高效
- 使用`unsigned long long`处理大数
- 时间复杂度 $O(\log N)$
```cpp
ull power(ull a, ull b) {
    ull res = 1;
    for (a %= mod; b; b >>= 1) {
        if (b & 1) res = res * a % mod;
        a = a * a % mod;
    }
    return res;
}
// 核心计算逻辑
ull d = to_string(n).length();
ull b = pow(10, d);
ans = n%mod * (pow(b,n)-1) * inv(b-1) % mod;
```

#### 2. DrAlfred（★★★★☆）
**核心亮点**：
- 详细数学推导，强调费马小定理应用
- 使用自定义模数类提升可读性
```cpp
mint b = (mint)10 ^ d; // 自定义模数类的幂运算
cout << ((b ^ n) - 1) / (b - 1) * n;
```

#### 3. LuukLuuk（★★★★☆）
**关键技巧**：
- 处理指数取模：$10^{N \cdot d} \equiv 10^{(N \mod (mod-1)) \cdot d} \pmod{mod}$
```cpp
ans = n%mod * (pow(10, (n%(mod-1))*d) -1) * inv(pow(10,d)-1) % mod;
```

---

## 最优思路总结
**核心公式**：  
$$ V_N \equiv N \times \frac{10^{N \cdot d} - 1}{10^d - 1} \pmod{998244353} $$

**实现要点**：
1. **位数计算**：`d = to_string(n).length()`
2. **快速幂优化**：使用迭代式快速幂处理大指数
3. **逆元计算**：分母 $10^d-1$ 的逆元通过费马小定理求取
4. **数据类型选择**：使用`unsigned long long`或模数类避免溢出

---

## 相似题目推荐
1. [P2613 有理数取余](https://www.luogu.com.cn/problem/P2613) - 模逆元基础应用
2. [P3811 乘法逆元](https://www.luogu.com.cn/problem/P3811) - 逆元批量计算
3. [P5110 块速递推](https://www.luogu.com.cn/problem/P5110) - 大指数快速幂优化

---
处理用时：53.16秒
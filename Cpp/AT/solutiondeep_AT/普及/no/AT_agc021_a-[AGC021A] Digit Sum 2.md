# 题目信息

# [AGC021A] Digit Sum 2

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc021/tasks/agc021_a

$ N $ 以下の正の整数の $ 10 $ 進法での各桁の和の最大値を求めてください。

## 说明/提示

### 制約

- $ 1\leq\ N\ \leq\ 10^{16} $
- $ N $ は整数である

### Sample Explanation 1

例えば $ 99 $ の各桁の和は $ 18 $ で、これが求める最大値となります。

### Sample Explanation 2

例えば $ 9989 $ の各桁の和は $ 35 $ で、これが求める最大値となります。

## 样例 #1

### 输入

```
100```

### 输出

```
18```

## 样例 #2

### 输入

```
9995```

### 输出

```
35```

## 样例 #3

### 输入

```
3141592653589793```

### 输出

```
137```

# AI分析结果



# [AGC021A] Digit Sum 2

## 题目描述

给定一个不超过 $N$ 的正整数，求其十进制表示中各数位数字之和的最大值。

### 输入格式
输入为一个整数 $N$（$1 \leq N \leq 10^{16}$）。

### 输出格式
输出符合条件的最大数位和。

### 样例解释
例如，当输入为 100 时，99 的数位和为 18，是最大值。

---

**算法分类**：贪心

---

### 综合分析与结论
本题核心思路基于贪心策略，考虑两种可能的最优解：
1. **原数本身**的数位和
2. **最高位减一，后续全填9**的构造数数位和

关键点在于证明这两种情况覆盖了所有可能的极值情况。例如当输入为 9999 时，必须取原数本身的数位和（36），而输入 100 时需要取构造数 99 的和（18）。

---

### 精选题解

#### 1. 作者：lsw1（⭐⭐⭐⭐⭐）
**关键亮点**：
- 明确分两种情况进行计算
- 处理了全9的特例（如9999的hack样例）
- 代码简洁高效（O(k)时间复杂度，k为位数）

**核心代码**：
```cpp
string s;
cin >> s;
int sum = 0;
for(char c : s) sum += c - '0';
cout << max(sum, s[0]-'0'-1 + (s.size()-1)*9);
```

#### 2. 作者：TRZ_2007（⭐⭐⭐⭐）
**关键亮点**：
- 将构造数的计算分解为首位处理与后续处理
- 代码逻辑清晰易读

**核心代码**：
```cpp
string S;
cin >> S;
int ans1 = 0, ans2 = S[0]-'0'-1;
for(char c : S) ans1 += c - '0';
for(int i=1; i<S.size(); i++) ans2 += 9;
cout << max(ans1, ans2);
```

#### 3. 作者：Doqin07（⭐⭐⭐⭐）
**关键亮点**：
- 使用字符串处理避免数值溢出
- 单循环同时处理两种情况

**核心代码**：
```cpp
string s; cin >> s;
int max1 = s[0]-'0'-1 + (s.size()-1)*9;
int max2 = 0;
for(char c : s) max2 += c - '0';
cout << max(max1, max2);
```

---

### 关键思路总结
**贪心策略**：比较原数数位和与构造数（最高位-1后全填9）数位和的最大值。该策略保证了在O(k)时间复杂度内解决问题（k为数的位数），且无需处理大数运算。

**实现技巧**：
1. 将输入视为字符串处理，避免数值类型溢出
2. 首位单独处理，后续位统一赋9
3. 使用`max()`函数直接比较两种情况的解

---

### 同类题目推荐
1. [P1012 拼数](https://www.luogu.com.cn/problem/P1012) - 数字组合的贪心策略
2. [P1980 计数问题](https://www.luogu.com.cn/problem/P1980) - 数位统计的数学处理
3. [P2119 幻方](https://www.luogu.com.cn/problem/P2119) - 数位构造与数学分析

---
处理用时：42.85秒
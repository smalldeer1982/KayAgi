# 题目信息

# Vacant Seat

## 题目描述

[problemUrl]: https://atcoder.jp/contests/apc001/tasks/apc001_c

**これはインタラクティブな問題です。**

$ N $ を $ 3 $ 以上の奇数とします。

$ N $ 個の席が円状に並んでいます。 席には $ 0 $ から $ N\ -\ 1 $ まで番号が振られています。 各 $ i $ ($ 0\ <\ =\ i\ <\ =\ N\ -\ 2 $) について、席 $ i $ と席 $ i\ +\ 1 $ は隣り合っています。 また、席 $ N\ -\ 1 $ と席 $ 0 $ は隣り合っています。

各席の状態は「空席」「男性が座っている」「女性が座っている」のどれかです。 ただし、同性どうしが隣り合う席に座っていることはありません。 $ N $ が $ 3 $ 以上の奇数の場合、空席が少なくとも $ 1 $ つは存在することが示せます。

あなたには $ N $ のみが与えられ、各席の状態は与えられません。 あなたの目標は、どれか $ 1 $ つの空席の番号を当てることです。 そのために、あなたは次のクエリを繰り返し送ることができます。

- 整数 $ i $ ($ 0\ <\ =\ i\ <\ =\ N\ -\ 1 $) を選ぶ。 席 $ i $ が空席ならば、正答となる。 そうでなければ、席 $ i $ に座っている人の性別が知らされる。

クエリを高々 $ 20 $ 回まで送ることで、どれか $ 1 $ つの空席の番号を当ててください。

### Input &amp; Output Format

最初に、$ N $ が次の形式で標準入力から与えられる。

> $ N $

次に、クエリを繰り返し送る。 クエリは次の形式で標準出力へ出力する。 行末には改行を出力せよ。

> $ i $

これに対するクエリの答えは、次の形式で標準入力から与えられる。

> $ s $

$ s $ は `Vacant`, `Male`, `Female` のどれかである。 これらはそれぞれ、席 $ i $ の状態が「空席」「男性が座っている」「女性が座っている」であることを表す。

## 说明/提示

### 制約

- $ N $ は奇数である。
- $ 3\ <\ =\ N\ <\ =\ 99,999 $

### 注意

- 出力の度に標準出力を flush せよ。 そうしない場合、`TLE` の可能性がある。
- $ s $ が `Vacant` の場合、すぐにプログラムを終了せよ。 そうしない場合、ジャッジ結果は不定である。
- クエリ回数が $ 20 $ を超えた場合、およびクエリの形式が正しくない場合、ジャッジ結果は不定である。

### 入出力例 1

このサンプルでは、$ N\ =\ 3 $ であり、席 $ 0 $, $ 1 $, $ 2 $ の状態はそれぞれ「男性が座っている」「女性が座っている」「空席」である。

 InputOutput30Male1Female2Vacant

# AI分析结果



### 题目中文重写

**空座位**

#### 题目描述

这是一个交互式问题。

给定 $N$（$3$ 以上的奇数）个环形排列的座位，编号为 $0$ 到 $N-1$。每个座位状态可能是空位、男性或女性，且同性不能相邻。保证至少存在一个空位。通过最多 20 次询问（每次询问返回座位的状态），找出任意一个空位的编号。

#### 输入输出格式

- **输入**：首行给定 $N$
- **交互流程**：
  - 输出座位编号 $i$
  - 输入该座位状态（`Vacant`/`Male`/`Female`）
  - 若返回 `Vacant` 则立即结束程序

#### 数据范围
- $3 \leq N \leq 99,999$（奇数）

---

**算法分类**：二分

---

### 题解综合分析

#### 核心思路
所有优质题解均采用二分策略，关键点在于利用空位导致性别交替规律变化的性质。设当前区间为 $[l,r]$，通过判断中点 $mid$ 与端点 $r$ 的性别关系和区间长度奇偶性，确定空位所在的子区间。

**关键性质**：
- 若无空位，相邻座位性别交替
- 空位会破坏该规律，导致某半区出现奇偶性矛盾

#### 最优题解

1. **AKPC / ivyjiao（⭐⭐⭐⭐⭐）**
   - **亮点**：简洁的二分框架 + 精炼的条件判断
   - **判断逻辑**：
     ```python
     if (区间长度奇偶性) == (mid与r性别是否相同):
         空位在左半区 → r = mid
     else:
         空位在右半区 → l = mid
     ```
   - **代码实现**：
     ```cpp
     int main() {
         cin >> n;
         r = n-1;
         check(r); // 初始化右端点
         while (l <= r) {
             int mid = (l + r) / 2;
             check(mid);
             if ((r - mid + 1) % 2 == (a[mid] == a[r])) 
                 r = mid;
             else 
                 l = mid;
         }
     }
     ```

2. **Acerkaio（⭐⭐⭐⭐）**
   - **亮点**：使用位运算优化奇偶判断，代码可读性强
   - **核心代码**：
     ```cpp
     if (((r-mid+1) & 1) == (a[mid]==a[r])) 
         r = mid;
     ```

3. **EuphoricStar（⭐⭐⭐⭐）**
   - **亮点**：完整包含交互处理逻辑，适合理解实现细节

---

### 关键技巧总结
1. **环形转线性**：通过固定查询 $n-1$ 端点，将环形问题转化为线性序列处理
2. **奇偶性判定**：利用区间长度奇偶性与性别关系的一致性判断空位方向
3. **边界处理**：初始查询右端点确保线性结构的正确性

---

### 同类题目推荐
1. [P1947 [洛谷] 猜数游戏](https://www.luogu.com.cn/problem/P1947)（交互+二分）
2. [P1733 猜数](https://www.luogu.com.cn/problem/P1733)（交互策略优化）
3. [P1850 换教室](https://www.luogu.com.cn/problem/P1850)（概率+状态转移分析）

---
处理用时：50.81秒
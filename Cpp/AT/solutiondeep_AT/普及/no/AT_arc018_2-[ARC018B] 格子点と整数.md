# 题目信息

# [ARC018B] 格子点と整数

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc018/tasks/arc018_2

諸君、私は整数が好きだ。  
 私は格子点が好きだ。  
 私は面積が好きだ。  
 私は三角形が好きだ。  
 私は座標平面上の、頂点が全て格子点上にある、面積が整数の三角形が大好きだ。  
 格子点の集合をみたとき、その中の任意の $ 3 $ 点を選んで作ることができる面積が整数の三角形の個数を数えるときは心が踊る。  
 心が踊るが、格子点が多いと数えるのが面倒臭い。  
 ぜひ有能なプログラマーである諸君に私の代わりに数えてほしい。  
 $ N $ 個の格子点を与えるので、その中の任意の $ 3 $ 点を選んで作ることができる、面積が整数の三角形の個数を数えるプログラムを作って欲しい。面積が $ 0 $ の三角形は三角形とは認めん！  
 ちなみに、格子点というのは座標平面上の点 $ (x,y) $ のうち $ x $ も $ y $ も整数である点のことである。

入力は以下の形式で標準入力から与えられる。

> $ N $ $ x_1 $ $ y_1 $ $ x_2 $ $ y_2 $ : $ x_N $ $ y_N $

- $ 1 $ 行目には、格子点の個数を表す整数 $ N\ (3\ ≦\ N\ ≦\ 100) $ が与えられる。
- $ 2 $ 行目から $ N $ 行では、2つの整数が空白区切りで与えられる。 $ (x_i,\ y_i)　(1\ ≦\ x_i,\ y_i\ ≦\ 10^9) $ は $ i $ 番目の格子点の位置である。同じ格子点が二度与えられることはない。( $ i\ \neq\ j $ ならば $ (x_i,\ y_i)\ \neq\ (x_j,\ y_j) $ )
 
 $ N $ 個の格子点のうち $ 3 $ つを選んで作ることができる面積が正の整数である三角形の個数を一行で出力せよ。  
 なお、出力の最後には改行を入れること。 ```
<pre class="prettyprint linenums">
3
1 1
1 2
3 1
```

 ```
<pre class="prettyprint linenums">
1
```

 $ (1,1),\ (1,\ 2),\ (3,\ 1) $ の面積が $ 1 $ の三角形が一つだけ作れる。 ```
<pre class="prettyprint linenums">
3
1 1
1 2
2 1
```

 ```
<pre class="prettyprint linenums">
0
```

 三角形 $ (1,\ 1)\ (1,\ 2)\ (2,\ 1) $ の面積は $ 0.5 $ で整数ではない。これ以外に三角形は作ることができない。 ```
<pre class="prettyprint linenums">
3
1 1
2 2
3 3
```

 ```
<pre class="prettyprint linenums">
0
```

 $ 3 $ 点は一直線上に並ぶので、三角形を作ることができない。 ```
<pre class="prettyprint linenums">
8
3 1
4 1
5 9
2 6
5 3
5 8
9 7
9 3
```

 ```
<pre class="prettyprint linenums">
38
```

# AI分析结果



# [ARC018B] 格子点与整数

## 题目重述
给定 $N$ 个不同的格子点（坐标均为整数），求其中任意三个点组成的三角形中，面积为正整数的个数。三点共线的情况不计入答案。

**输入格式**  
第一行为整数 $N$，后续每行为两个整数表示坐标 $(x_i, y_i)$。  
**输出格式**  
符合条件的三角形个数。

**样例说明**  
当三点面积为整数且不为零时计数，例如样例1中唯一符合条件的三角形面积为1。

---

## 算法分类  
数学、几何

---

## 题解分析与结论

### 关键思路与技巧
1. **叉积公式**：利用向量叉积计算面积的两倍（整数特性），公式为 $2S = |(x_2-x_1)(y_3-y_1) - (x_3-x_1)(y_2-y_1)|$。
2. **整数判断**：当叉积结果为非零偶数时，面积必为整数且不为零。
3. **共线检测**：叉积为零时三点共线，直接排除。

### 最优题解

#### 题解作者：nanatsuhi (⭐⭐⭐⭐⭐)
**核心亮点**  
- 直接应用向量叉积公式，避免浮点运算。
- 代码简洁高效，时间复杂度 $O(n^3)$ 完全可行。
```cpp
for (int i = 0; i < N; i++)
    for (int j = 0; j < i; j++)
        for (int k = 0; k < j; k++) {
            ll x1 = x[j] - x[i], y1 = y[j] - y[i];
            ll x2 = x[k] - x[i], y2 = y[k] - y[i];
            ll s = x1 * y2 - x2 * y1; // 叉积的两倍
            if (s != 0 && s % 2 == 0) c++;
        }
```

#### 题解作者：Biden_Trump (⭐⭐⭐⭐)
**核心亮点**  
- 与最优解法思路一致，变量命名清晰。
- 完整展示了三点遍历的顺序优化。
```cpp
for(int i=1; i<=n; i++)
    for(int j=i+1; j<=n; j++)
        for(int k=j+1; k<=n; k++){
            ll s=(a[k]-a[j])*(b[i]-b[j]) - (a[i]-a[j])*(b[k]-b[j]);
            if(s!=0 && s%2==0) ans++;
        }
```

#### 题解作者：Fire_Raku (⭐⭐⭐⭐)
**核心亮点**  
- 公式推导与代码对应清晰，注释明确。
- 三重循环的索引处理避免了重复计算。
```cpp
for(int i=0; i<n; i++)
    for(int j=0; j<i; j++)
        for(int k=0; k<j; k++){
            long long s = (x[k]-x[j])*(y[i]-y[j]) - (x[i]-x[j])*(y[k]-y[j]);
            if(s !=0 && s%2 ==0) ans++;
        }
```

---

## 类似题目推荐
1. [P2735 电网](https://www.luogu.com.cn/problem/P2735) - 格点三角形面积问题
2. [P1183 多边形的面积](https://www.luogu.com.cn/problem/P1183) - 利用叉积计算多边形面积
3. [CF598C 极角排序](https://codeforces.com/problemset/problem/598/C) - 向量运算与极角处理

---
处理用时：44.44秒
# 题目信息

# [ARC032B] 道路工事

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc032/tasks/arc032_2

大工のチョーさん(Daiku Cho)の町では道路の建設が進んでいます。チョーさんの町には $ N $ 個の交差点と $ M $ 個の道路があり、道路は異なる2つの交差点を双方向に結んでいます。 不便なことに、ある交差点から別の交差点まで道路を使って行き来できるとは限りません。

チョーさんの建設会社は、異なる交差点を結ぶいくつかの道路を作って、$ N $ 個のどの交差点からも道路を使って他のどの交差点へも行けるようにしたいと思っています。

どの交差点からも道路を使って別のどの交差点にも行けるようにするには最小で何本の道路を建設する必要があるかを答えてください。ただし、すでにある道路でどの交差点からも別のどの交差点へ行けるとき、$ 0 $ を出力してください。

## 说明/提示

### Sample Explanation 1

交差点 $ 1 $、$ 2 $、$ 3 $ は互いに道路でつながっているが、交差点 $ 4 $ はつながっていない。例えば、交差点 $ 1 $ と $ 4 $ を結ぶ道路を作れば十分である。 !\[\](http://arc032.contest.atcoder.jp/img/arc/032/B1.png)

## 样例 #1

### 输入

```
4 2

1 2

1 3```

### 输出

```
1```

## 样例 #2

### 输入

```
6 4

1 2

2 3

1 3

5 6```

### 输出

```
2```

# AI分析结果



# [ARC032B] 道路工事

## 题目描述

大工町有 $N$ 个交叉点和 $M$ 条双向道路。现在需要计算最少需要添加多少条道路，才能使所有交叉点互相可达。若已连通则输出 0。

## 算法分类
并查集

---

## 最优题解分析

### 共同关键思路
所有题解均基于**连通块数量计算**，结论公式为：`连通块数 - 1`。核心差异在于连通块统计方式：
1. **并查集法**：通过父子关系直接判断根节点
2. **BFS/DFS法**：通过遍历标记连通分量

### 精选题解（评分与亮点）

#### 1. 血色黄昏（⭐⭐⭐⭐⭐）
**核心亮点**：
- 代码极简（仅20行）
- 标准并查集模板
- 无冗余操作，时间复杂度 $O(Nα(N))$
```cpp
int fa[1000010];
int find(int x) { return fa[x]==x ? x : fa[x]=find(fa[x]); }
void unions(int x, int y) { fa[find(x)] = find(y); }

int main() {
    cin>>n>>m;
    iota(fa+1, fa+n+1, 1); // 初始化
    while(m--) { int x,y; cin>>x>>y; unions(x,y); }
    int cnt = count(fa+1, fa+n+1, [&](int x){return x==find(x);});
    cout << cnt-1;
}
```

#### 2. _i_i_（⭐⭐⭐⭐）
**优化亮点**：
- 引入按秩合并优化
- 动态维护连通块数
```cpp
bool merge(int x, int y) { // 返回是否成功合并
    x = findfa(x); y = findfa(y);
    if(x == y) return false;
    if(sz[x] > sz[y]) swap(x,y);
    fa[x] = y; sz[y] += sz[x];
    return true;
}
// 主函数中通过总合并次数计算连通块数
```

#### 3. HMP_Haoge（⭐⭐⭐）
**教学亮点**：
- 包含完整路径压缩过程
- 详细注释适合新手理解
```cpp
int Find(int x) {
    if(fa[x] != x) fa[x] = Find(fa[x]); // 路径压缩
    return fa[x];
}
// 统计时通过vis数组避免重复计数
```

---

## 关键技巧总结
1. **连通块思想**：将图抽象为连通块树，边数=节点数-1
2. **并查集优化**：路径压缩+按秩合并提升效率
3. **根节点统计**：`fa[i]==i` 是判断连通块核心条件

---

## 同类题目推荐
1. [P1536 村村通](https://www.luogu.com.cn/problem/P1536) - 完全相同的解法
2. [P1197 星球大战](https://www.luogu.com.cn/problem/P1197) - 逆向连通块维护
3. [P3958 奶酪](https://www.luogu.com.cn/problem/P3958) - 三维空间连通块判断

---
处理用时：44.27秒
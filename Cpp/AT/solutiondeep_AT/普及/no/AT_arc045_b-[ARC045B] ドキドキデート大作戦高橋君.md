# 题目信息

# [ARC045B] ドキドキデート大作戦高橋君

## 题目描述

# 高桥君的心跳约会大作战

高桥君在读的学校即将进行一次大扫除。学校中有N个教室，分别编号为 $1,2,3, \dots ,N$ 。这些教室排成了一排。

高桥君的学校中共有含高桥君在内的 $M$ 个学生，需要扫除的连续教室区间（称为扫除区间）有 $M$ 个。但是，还没有决定由哪个学生来负责哪个扫除区间。不同的学生负责不同的扫除区间，每个学生必须打扫被分配到的所有教室。 $1$ 个教室可能被多个扫除区间包含。

高桥君突然发现，大扫除当天他正好与女同学有约会。无论怎么样高桥君都不想毁掉这次约会，所以只能把大扫除翘掉了。但是高桥君很在意自己会不会暴露：高桥君负责的教室中如果有任何教室没有被打扫，高桥君就会暴露。

你的任务是：替高桥君找出就算翘掉扫除也不会暴露的所有扫除区间。

另外，这所学校里的学生们都非常勤奋努力，故假定除高桥君外的所有人都不会缺席大扫除。

## 样例 #1

### 输入

```
10 5

1 4

5 5

6 8

9 10

5 6```

### 输出

```
2

2

5```

## 样例 #2

### 输入

```
3 6

1 1

1 1

2 2

2 2

3 3

3 3```

### 输出

```
6

1

2

3

4

5

6```

## 样例 #3

### 输入

```
10 3

1 4

2 6

6 10```

### 输出

```
0```

# AI分析结果



# [ARC045B] ドキドキデート大作戦高橋君

## 题目描述

高桥君的学校有N个排成一列的教室，需要分配M个连续的扫除区间给M个学生（每个学生一个区间）。高桥君想找出所有满足条件的区间：即使他不打扫该区间，该区间内的所有教室仍会被其他学生的扫除区间覆盖。

## 算法分类
差分、前缀和

## 题解分析与结论

### 核心思路
通过差分统计每个教室被覆盖的次数，判断每个区间内的所有教室是否都被覆盖至少两次。若满足条件，则移除该区间后所有教室仍被覆盖。

### 高分题解推荐

#### 朱屹帆（差分+ST表） ★★★★★
**关键思路**：
1. 差分统计各教室覆盖次数
2. 使用ST表预处理区间最小值
3. 查询每个区间的最小覆盖次数是否≥2

**代码核心**：
```cpp
// 差分预处理覆盖次数
for(LL i=1;i<=m;i++){
    l[i]=read();r[i]=read();
    cha[l[i]]++;cha[r[i]+1]--;
}
// 构造前缀和与ST表
st.Init(n);
// 查询区间最小值
if(st.Ask(l[i],r[i])>=2)
```

#### JasonL（差分+标记法） ★★★★★
**关键思路**：
1. 记录覆盖次数为1的关键教室
2. 预处理每个位置的前一个关键教室
3. 判断区间是否不包含任何关键教室

**代码核心**：
```cpp
// 差分统计覆盖次数
cnt += room[i];
if(cnt == 1) pos = i;
room[i] = pos; // 存储前一个关键位置

// 判断区间是否不包含关键点
if(room[zone[i].r] < zone[i].l)
```

#### Hagasei（差分+ST表） ★★★★★
**关键思路**：
与朱屹帆解法类似，用ST表快速查询区间最小值，代码实现更简洁。

**代码核心**：
```cpp
// ST表查询
int ask(int l,int r){
    int len = log2(r-l+1);
    return min(st[l][len], st[r-(1<<len)+1][len]);
}
```

## 关键技巧总结
1. **差分数组**：高效统计区间覆盖次数
2. **空间复用**：在差分数组上直接记录关键位置（如JasonL解法）
3. **ST表优化**：快速查询区间最小值
4. **逆向思维**：通过覆盖次数≥2判断可移除性

## 相似题目推荐
1. [P2184 贪婪大陆](https://www.luogu.com.cn/problem/P2184)
2. [P3406 海底高铁](https://www.luogu.com.cn/problem/P3406)
3. [P1719 最大加权矩形](https://www.luogu.com.cn/problem/P1719)

## 个人心得摘录
> "使用完标记后可以循环使用（可回收垃圾）" —— JasonL  
> 通过复用差分数组空间记录关键点位置，节省内存且提升代码简洁度。

> "线段树和差分方法本质相同，但差分+ST表更适合本题规模" —— 朱屹帆  
> 根据数据规模选择合适数据结构，平衡代码复杂度和效率。

---
处理用时：159.60秒
# 题目信息

# [ARC048B] AtCoderでじゃんけんを

## 题目描述

### 题意翻译

有 $n$ 个人在猜拳，每个人有一个 AtCoder 值 $r_i$，出拳出的是 $h_i$（这里规定 $1$ 是石头，$2$ 是剪刀，$3$ 是布）。

- 如果他们的 AtCoder 值不相等，AtCoder 值高的获胜。
- 如果他们的 AtCoder 值相等，猜拳赢的获胜。
- 否则平局。

现在每个人都与 $n-1$ 个人猜过了拳，求出最后的结果。

## 说明/提示

$1 \le n,r_i \le 10^5,h_i \in[1,2,3]$。

## 样例 #1

### 输入

```
6

2 1

2 2

3 2

5 3

2 2

3 3```

### 输出

```
2 3 0

0 4 1

4 1 0

5 0 0

0 4 1

3 2 0```

## 样例 #2

### 输入

```
2

1999 3

2000 1```

### 输出

```
0 1 0

1 0 0```

## 样例 #3

### 输入

```
8

3200 2

2800 3

2800 2

2700 1

2800 2

3200 1

2700 1

3200 3```

### 输出

```
6 1 0

2 5 0

3 3 1

0 6 1

3 3 1

6 1 0

0 6 1

6 1 0```

# AI分析结果



# [ARC048B] AtCoder猜拳

## 题目描述
$n$ 个人参与猜拳比赛，每人有等级值 $r_i$ 和出拳类型 $h_i$（1：石头，2：剪刀，3：布）。胜负规则：
1. 等级不同时，等级高者胜
2. 等级相同时，猜拳获胜者胜
3. 否则平局

求每个人与 $n-1$ 人比赛后的胜、负、平局次数。

**算法分类**：前缀和

---

## 题解综合分析
本题核心在于高效统计不同等级区间的胜负情况。各题解均采用分组统计与前缀和技巧，将时间复杂度优化至线性。以下为评分较高的题解：

---

### 精选题解

#### 1. RioFutaba（⭐⭐⭐⭐⭐）
**亮点**：  
- 桶计数预处理每个等级的出拳分布  
- 前缀和数组快速计算低等级人数  
- 胜负推导公式简洁高效  
**核心代码**：
```cpp
for(int i=1;i<=n;i++){
    int x = p[r[i]]; // 低等级人数
    x += f[r[i]][win(h[i])]; // 同等级胜场
    int z = f[r[i]][h[i]] - 1; // 平局
    int y = n - x - z - 1; // 剩余为负
    printf("%d %d %d\n",x,y,z);
}
```

#### 2. opzc35（⭐⭐⭐⭐）
**亮点**：  
- 胜负推导公式数学化表达  
- 利用取模特性判断出拳胜负  
**核心实现**：
```cpp
// 预处理前缀和
for(int i=1;i<=100000;i++) cnt[i]=cnt[i-1]+tmp[i-1];

// 胜负计算
win[i] = cnt[r[i]] + vis[r[i]][h[i]%3+1];
draw[i] = vis[r[i]][h[i]] - 1;
lose[i] = n - win[i] - draw[i] - 1;
```

#### 3. hellolin（⭐⭐⭐⭐）
**亮点**：  
- 结构体封装等级组数据  
- 预处理每个等级组的三种出拳胜负关系  
**关键思路**：
```cpp
struct Group { int hand1, hand2, hand3; };
vector<Group> groups;

// 胜负计算
switch(当前出拳) {
case 1: 胜场 += 组内剪刀人数;
case 2: 胜场 += 组内布人数; 
case 3: 胜场 += 组内石头人数;
}
```

---

## 关键思路总结
1. **桶计数预处理**：统计各等级的出拳分布与累计人数  
2. **胜负推导公式**：  
   - 胜场 = 低等级人数 + 同等级克制人数  
   - 平局 = 同拳种人数-1  
   - 负场 = 总人数 - 胜场 - 平局 -1  
3. **数学化判断**：利用取模运算或预定义胜负关系表简化判断逻辑  

---

## 拓展训练
1. [P1097 统计数字](https://www.luogu.com.cn/problem/P1097) - 桶计数基础  
2. [P3368 树状数组2](https://www.luogu.com.cn/problem/P3368) - 前缀和思想进阶  
3. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908) - 分组统计技巧应用

---
处理用时：77.03秒
# 题目信息

# [ARC114A] Not coprime

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc114/tasks/arc114_a

$ N $ 個の $ 2 $ 以上 $ 50 $ 以下の整数 $ X_1,\ X_2,\ \cdots,\ X_N $ が与えられます．全ての $ i\ =\ 1,\ 2,\ \cdots,\ N $ について次の条件を満たす正の整数 $ Y $ のうち，最小のものを求めてください．

- $ X_i $ と $ Y $ は互いに素でない

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 49 $
- $ 2\ \leq\ X_i\ \leq\ 50 $
- $ X_i\ \neq\ X_j\ (i\ \neq\ j) $
- 入力は全て整数

### Sample Explanation 1

$ 4 $ と互いに素でないためには偶数である必要があり，$ 3 $ と互いに素でないためには $ 3 $ の倍数である必要があります．

## 样例 #1

### 输入

```
2

4 3```

### 输出

```
6```

## 样例 #2

### 输入

```
1

47```

### 输出

```
47```

## 样例 #3

### 输入

```
7

3 4 6 7 8 9 10```

### 输出

```
42```

# AI分析结果



# [ARC114A] Not coprime

## 题目描述

给定 $N$ 个 $2$ 以上 $50$ 以下的整数 $X_1,\ X_2,\ \cdots,\ X_N$。求满足以下条件的最小正整数 $Y$：
- 对于所有 $i=1,2,\cdots,N$，$X_i$ 和 $Y$ 不互质

### 说明/提示
- $1 \leq N \leq 49$
- $X_i$ 互不相同

**样例解释**：当输入为 4 和 3 时，Y 必须是偶数且是 3 的倍数，故最小为 6。

---

**算法分类**：枚举/数学

---

## 题解综合分析

### 核心思路对比
1. **质数集合特性**：50 以内仅有 15 个质数，可用二进制枚举所有质数组合（状态压缩）或 DFS 遍历
2. **乘积验证**：枚举质数的子集乘积，检查每个 X_i 是否至少有一个公共质因子
3. **优化方向**：通过预处理质数列表、剪枝优化（提前终止无效分支）

### 最优思路提炼
**质数覆盖法**：Y 的质因子必须覆盖所有 X_i 的质因子。因数值范围小，枚举所有质数组合的乘积，取满足条件的最小值。

---

## 精选题解（评分≥4★）

### 题解作者：zsh_haha（4★）
**关键亮点**：
- 简洁的 DFS 实现，使用 goto 进行剪枝优化
- 预处理质数数组，代码可读性强

```cpp
void dfs(long long pro,int now){
    for(int i=1;i<=n;i++){  // 提前验证剪枝
        if(__gcd(a[i],pro)==1) goto t1;
    }
    ans=min(ans,pro);
    t1:;
    if(now==16) return;
    dfs(pro*pri[now],now+1); // 选当前质数
    dfs(pro,now+1);          // 不选当前质数
}
```

### 题解作者：watcher_YBH（4★）
**关键亮点**：
- 状态压缩实现优雅，二进制位表示质数选择
- 循环解压时加入提前终止优化

```cpp
void js(int x){
    int ans1 = 1;
    while(x){
        if(x&1) ans1 *= pri[k];
        if(ans1>ans) return; // 乘积超过当前最优时提前终止
        x>>=1,k++;
    }
    // ...验证部分省略...
}
```

### 题解作者：liangbob（5★）
**关键亮点**：
- 包含严密的数学证明，说明为何答案必为质数乘积
- 代码结构清晰，带有详细注释

**数学证明片段**：
> "答案必为质数乘积：若存在非质数因子，可分解为更小质数乘积且仍满足条件，与最小性矛盾"

---

## 关键代码实现

**质数覆盖验证核心逻辑**：
```cpp
bool valid = true;
for(int x : X_list){
    if(gcd(Y_candidate, x) == 1){
        valid = false;
        break;
    }
}
if(valid) update_min(Y);
```

---

## 拓展应用

**同类问题套路**：
- 当问题涉及"覆盖所有元素的因子"时，考虑质因数分解
- 小范围数值问题优先枚举质数组合（如 50 内质数仅15个）

**推荐练习题目**：
1. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)
2. [P1463 反素数](https://www.luogu.com.cn/problem/P1463)
3. [P2568 GCD](https://www.luogu.com.cn/problem/P2568)

---

## 调试心得摘录

**hubin1 的教训**：
> "初始贪心策略（取最小质因数）在样例 45,5,2 时失败，正确答案应为10而非30。这说明局部最优不等于全局最优，必须完全枚举所有质数组合"

**ljlawa 的顿悟**：
> "意识到不能仅考虑质数，需将合数（如6=2×3）也纳入候选，但最终发现质数乘积已覆盖所有最优情况"

---
处理用时：45.61秒
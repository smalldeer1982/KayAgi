# 题目信息

# [ARC144B] Gift Tax

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc144/tasks/arc144_b

$ a\leq\ b $ を満たす正整数 $ a,\ b $ および，正整数列 $ A\ =\ (A_1,\ A_2,\ \ldots,\ A_N) $ が与えられます．

あなたはこの数列に対して，以下の操作を何度でも行うことができます（$ 0 $ 回でもよいです）：

- 相異なる添字 $ i,\ j $ ($ 1\leq\ i,\ j\ \leq\ N $) を選ぶ．$ A_i $ に $ a $ を加え，$ A_j $ から $ b $ を引く．

操作後の $ \min(A_1,\ A_2,\ \ldots,\ A_N) $ としてありうる最大値を求めてください．

## 说明/提示

### 制約

- $ 2\leq\ N\leq\ 3\times\ 10^5 $
- $ 1\leq\ a\leq\ b\leq\ 10^9 $
- $ 1\leq\ A_i\leq\ 10^{9} $

### Sample Explanation 1

例えば次のように操作を行うことで， $ \min(A_1,\ A_2,\ A_3)\ =\ 5 $ を達成できます． - $ i\ =\ 1,\ j\ =\ 3 $ として操作を行う．$ A $ は $ (3,\ 5,\ 7) $ に変化する． - $ i\ =\ 1,\ j\ =\ 3 $ として操作を行う．$ A $ は $ (5,\ 5,\ 5) $ に変化する．

### Sample Explanation 2

例えば次のように操作を行うことで， $ \min(A_1,\ A_2,\ A_3)\ =\ 3 $ を達成できます． - $ i\ =\ 1,\ j\ =\ 3 $ として操作を行う．$ A $ は $ (13,\ 1,\ -1) $ に変化する． - $ i\ =\ 2,\ j\ =\ 1 $ として操作を行う．$ A $ は $ (10,\ 3,\ -1) $ に変化する． - $ i\ =\ 3,\ j\ =\ 1 $ として操作を行う．$ A $ は $ (7,\ 3,\ 1) $ に変化する． - $ i\ =\ 3,\ j\ =\ 1 $ として操作を行う．$ A $ は $ (4,\ 3,\ 3) $ に変化する．

### Sample Explanation 3

一度も操作を行わないことにより， $ \min(A_1,\ A_2,\ A_3)\ =\ 5 $ を達成できます．

## 样例 #1

### 输入

```
3 2 2

1 5 9```

### 输出

```
5```

## 样例 #2

### 输入

```
3 2 3

11 1 2```

### 输出

```
3```

## 样例 #3

### 输入

```
3 1 100

8 5 6```

### 输出

```
5```

## 样例 #4

### 输入

```
6 123 321

10 100 1000 10000 100000 1000000```

### 输出

```
90688```

# AI分析结果



# [ARC144B] Gift Tax

## 题目描述

给定满足 $a\leq b$ 的正整数 $a,b$ 以及正整数列 $A=(A_1,A_2,\ldots,A_N)$。你可以进行任意次以下操作：

- 选择两个不同的下标 $i,j$，将 $A_i$ 增加 $a$，将 $A_j$ 减少 $b$

求操作后数列的最小值的最大可能值。

**算法分类**：二分

---

## 题解综合分析

所有题解均采用二分答案框架，核心思路为：

1. **二分搜索**：在可能的答案范围（1~1e9）内寻找最大可行最小值
2. **校验函数设计**：计算达到目标值所需的加操作次数与可用的减操作次数
3. **操作次数计算**：
   - 若元素小于目标值，需计算最少加操作次数（向上取整）
   - 若元素大于目标值，可贡献最多减操作次数（向下取整）
4. **可行性判断**：总减操作次数 ≥ 总加操作次数时可行

### 最优题解亮点

#### 题解作者：WsW_（⭐⭐⭐⭐⭐）
**核心代码**：
```cpp
bool check(int x){
    ll k=0;
    for(int i=1;i<=n;i++){
        if(A[i]>=x) k+=(A[i]-x)/b;
        else k-=(x-A[i]+a-1)/a;
    }
    return k>=0;
}
```
**亮点**：
- 使用单个变量`k`累计操作次数差值，逻辑紧凑
- 整数运算避免浮点误差，如`(x-A[i]+a-1)/a`实现向上取整
- 代码简洁高效，时间复杂度稳定为O(n logV)

#### 题解作者：Binary_Lee（⭐⭐⭐⭐）
**核心代码**：
```cpp
bool check(int x){
    int c1=0,c2=0;
    for(int i=1;i<=n;i++){
        if(A[i]<x) c1+=(x-A[i]+a-1)/a;
        else c2+=(A[i]-x)/b;
    }
    return c1<=c2;
}
```
**亮点**：
- 明确分离加减操作次数变量，逻辑更直观
- 采用经典二分模板，适合初学者理解
- 使用`int`类型时通过计算技巧避免溢出

#### 题解作者：I_like_magic（⭐⭐⭐⭐）
**核心代码**：
```cpp
bool check(int mid) {
    int res = 0;
    for(int i=1; i<=n; i++) {
        if(A[i] < mid) {
            res += (mid-A[i]+a-1)/a;
        } else {
            res -= (A[i]-mid)/b;
        }
    }
    return res <= 0;
}
```
**亮点**：
- 采用差值累计方式，与最终判断条件直接对应
- 特别强调使用`long long`防止溢出问题
- 代码注释详细，适合理解算法本质

---

## 关键思路总结

1. **二分框架**：将最值问题转化为判断性问题，适用于具有单调性的场景
2. **操作次数计算**：
   - **向上取整技巧**：`(x + a - 1) / a` 替代 `ceil((double)x/a)`
   - **向下取整技巧**：直接整数除法实现
3. **数据类型处理**：全程使用`long long`防止中间结果溢出
4. **时间复杂度优化**：O(n logV) 复杂度可处理3e5规模数据

---

## 拓展应用

类似二分答案题目：
1. [P2678 跳石头](https://www.luogu.com.cn/problem/P2678) - 最小化最大跳跃距离
2. [P1182 数列分段](https://www.luogu.com.cn/problem/P1182) - 最小化最大段和
3. [P3743 kotori的设备](https://www.luogu.com.cn/problem/P3743) - 最大化设备使用时间

---

## 实践心得摘录

- **类型处理**："注意要开long long，运算过程中可能会爆int" —— I_like_magic
- **取整技巧**："使用整数运算避免浮点误差是这类题的关键" —— WsW_
- **调试经验**："先验证单调性再设计校验函数可减少错误概率" —— Binary_Lee

---
处理用时：60.62秒
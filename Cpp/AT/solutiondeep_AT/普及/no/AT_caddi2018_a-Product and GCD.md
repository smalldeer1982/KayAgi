# 题目信息

# Product and GCD

## 题目描述

[problemUrl]: https://atcoder.jp/contests/caddi2018b/tasks/caddi2018_a

$ N $ 個の $ 1 $ 以上の整数 $ a_1,\ a_2,\ ...,\ a_N $ があります． $ a_1,\ a_2,\ ...,\ a_N $ の値はわかりませんが，$ a_1\ \times\ a_2\ \times\ ...\ \times\ a_N\ =\ P $ がわかっています．

$ a_1,\ a_2,\ ...,\ a_N $ の最大公約数として考えられるもののうち，最も大きいものを求めてください．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^{12} $
- $ 1\ \leq\ P\ \leq\ 10^{12} $

### Sample Explanation 1

例えば $ a_1=2,\ a_2=6,\ a_3=2 $ の場合，最大公約数は $ 2 $ となります．

### Sample Explanation 2

$ a_i $ は正の整数なので，$ a_1\ =\ a_2\ =\ a_3\ =\ a_4\ =\ a_5\ =\ 1 $ 以外にはありえません．

## 样例 #1

### 输入

```
3 24```

### 输出

```
2```

## 样例 #2

### 输入

```
5 1```

### 输出

```
1```

## 样例 #3

### 输入

```
1 111```

### 输出

```
111```

## 样例 #4

### 输入

```
4 972439611840```

### 输出

```
206```

# AI分析结果



# Product and GCD

## 题目描述

给定 $ N $ 个正整数 $ a_1, a_2, ..., a_N $，已知它们的乘积等于 $ P $。求这些数的最大公因数的最大可能值。

## 说明/提示

### 约束
- $ 1 \leq N \leq 10^{12} $
- $ 1 \leq P \leq 10^{12} $

### 样例解释
当 $ N=3, P=24 $ 时，最优解为 $ a=[2,6,2] $，其最大公约数为 2。

---

**算法分类**：数学（质因数分解）

---

### 题解综合分析

题目核心在于将 $ P $ 分解质因数，计算每个质因数指数可被 $ N $ 均分的最大次数。关键思路为：

1. **质因数分解**：对 $ P $ 进行质因数分解，得到形式 $ P = \prod p_i^{k_i} $
2. **指数分配**：对每个质因数 $ p_i $，计算 $ \lfloor \frac{k_i}{N} \rfloor $，取该次幂的乘积作为最大公约数
3. **特判处理**：当 $ N=1 $ 时直接返回 $ P $，无需分解

---

### 精选题解

#### 题解作者：RioFutaba（★★★★☆）
**核心亮点**：
- 清晰处理 $ N=1 $ 的特殊情况
- 循环分解至 $ \sqrt{P} $ 的优化
- 代码简洁无冗余

**代码片段**：
```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long 

int main() {
    ll n, p, ans = 1;
    cin >> n >> p;
    if (n == 1) {
        cout << p;
        return 0;
    }
    for (ll i = 2; i*i <= p; i++) {
        ll cnt = 0;
        while (p % i == 0) {
            cnt++;
            p /= i;
        }
        ans *= pow(i, cnt / n);
    }
    cout << ans;
    return 0;
}
```

#### 题解作者：RainFestival（★★★★☆）
**关键思路**：
- 质因数分解后直接计算可用指数
- 注释明确解释剩余质数处理逻辑

**个人心得**：
> "分解后若剩余未处理的质数，当 $ N>1 $ 时其指数必然不足，无需处理"

---

### 关键技巧总结
1. **质因数分解边界**：循环至 $ \sqrt{P} $ 即可覆盖所有质因数
2. **指数均分原理**：每个质因数的指数除以 $ N $ 的商决定其对 GCD 的贡献
3. **特殊值优化**：在分解前优先处理 $ N=1 $ 的情况避免无效计算

---

### 拓展练习
1. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075) - 基础质因数分解应用
2. [P1069 细胞分裂](https://www.luogu.com.cn/problem/P1069) - 质因数分解与指数分配
3. [P2043 质因子分解](https://www.luogu.com.cn/problem/P2043) - 高阶质因数分解应用

通过练习可加深对质因数分解和指数分配的理解，适用于各类最大公约数优化问题。

---
处理用时：142.71秒
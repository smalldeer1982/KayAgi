# 题目信息

# 暴露

## 题目描述

[problemUrl]: https://atcoder.jp/contests/code-thanks-festival-2015-open/tasks/code_thanks_festival_2015_d

$ 1 $ から $ N $ までの番号が付けられた $ N $ 人の生徒からなるある学園で期末試験が行われた。試験は $ 100 $ 点満点で、どの生徒も非負の整数の得点を獲得した。

この学園ではどの生徒も自分の得点と全受験者の合計点を通知されるが、それ以外の情報は通知されない。

しかしながらどの生徒も他の生徒の得点が気になる。そのため生徒は他の生徒から得点を聞き出し、それらの値を基に他の生徒の得点を予想することにしている。

学園の教師であり、生徒が他の生徒の得点をどれくらい正確に把握しているのかが気になったあなたは、生徒の行動によってどのくらい得点が特定できているのかを調査することにした。

具体的には、以下に示す $ M $ 個の情報クエリあるいは質問クエリを番号の昇順に処理した際の質問クエリの答えを計算することにした。

- クエリには $ 1 $ から $ M $ までの番号が付けられている。どのクエリも $ 3 $ つの整数 $ a_i\ (0\ ≦\ a_i\ ≦\ 1) $, $ b_i\ (1\ ≦\ b_i\ ≦\ N) $, $ c_i\ (1\ ≦\ c_i\ ≦\ N,\ b_i≠c_i) $ によって定められる。
- $ a_i $ = $ 0 $ のとき、クエリ $ i $ は情報クエリである。これは、生徒 $ b_i $ が生徒 $ c_i $ の得点を知ったことを表す。
- $ a_i $ = $ 1 $ のとき、クエリ $ i $ は質問クエリである。これは、生徒 $ b_i $ がクエリ $ i $ までの情報クエリと元々知っている情報のみで、生徒 $ c_i $ の得点が何点以上何点以下であると判定できるのかを答えなければならないことを表す。

## 说明/提示

### Sample Explanation 1

生徒は $ 4 $ 人であり、クエリは $ 6 $ 個ある。 - クエリ $ 1 $ は情報クエリである。生徒 $ 2 $ は生徒 $ 3 $ の得点が $ 70 $ 点であることを知る。 - クエリ $ 2 $ は情報クエリである。生徒 $ 4 $ は生徒 $ 2 $ の得点が $ 90 $ 点であることを知る。 - クエリ $ 3 $ は質問クエリである。この時点で生徒 $ 2 $ は合計点が $ 80+90+70+100=340 $ 点であること、生徒 $ 2 $ の得点が $ 90 $ 点であること、生徒 $ 3 $ の得点が $ 70 $ 点であることを知っているので、生徒 $ 4 $ の得点は $ 80 $ 点以上 $ 100 $ 点以下であることがわかる。よって出力の $ 1 $ 行目は `80 100` となる。 - クエリ $ 4 $ は情報クエリである。生徒 $ 2 $ は生徒 $ 4 $ の得点が $ 100 $ 点であることを知る。 - クエリ $ 5 $ は質問クエリである。この時点で生徒 $ 2 $ は合計点および生徒 $ 1 $ 以外すべての生徒の得点を知っているので、生徒 $ 1 $ の得点はちょうど $ 80 $ 点であることがわかる。よって出力の $ 2 $ 行目は `80 80` となる。 - クエリ $ 6 $ は質問クエリである。この時点で生徒 $ 4 $ は合計点が $ 340 $ 点であること、生徒 $ 2 $ の得点が $ 90 $ 点であること、生徒 $ 4 $ の得点が $ 100 $ 点であることを知っているので、生徒 $ 1 $ の得点は $ 50 $ 点以上 $ 100 $ 点以下であることがわかる。よって出力の $ 3 $ 行目は `50 100` となる。

### Sample Explanation 2

既に得点を知っている相手に対して質問クエリが飛んで来る場合もあります。

## 样例 #1

### 输入

```
4

80

90

70

100

6

0 2 3

0 4 2

1 2 4

0 2 4

1 2 1

1 4 1```

### 输出

```
80 100

80 80

50 100```

## 样例 #2

### 输入

```
3

25

12

31

3

1 1 2

0 1 2

1 1 2```

### 输出

```
0 43

12 12```

## 样例 #3

### 输入

```
7

32

19

22

25

23

17

18

11

0 1 2

0 4 5

0 1 4

0 2 3

0 2 7

1 1 5

1 2 7

1 2 1

0 4 3

1 4 2

1 6 7```

### 输出

```
0 80

18 18

0 97

0 86

0 100```

# AI分析结果



# 暴露

## 题目描述

某学园有编号1到N的N名学生参加期末考试，考试为100分制，所有学生得分均为非负整数。每位学生知道自己的分数和全员的分数总和。随后进行M次操作，每个操作为以下两种之一：

1. **信息查询**：学生b得知学生c的分数。
2. **提问查询**：学生b根据当前已知信息，推断学生c的可能分数范围（最低和最高分）。

需按顺序处理所有操作，输出每次提问查询的结果。

## 输入格式

输入包括学生数N、各学生分数、操作数M及具体操作。每个操作由三个整数a_i, b_i, c_i描述类型及关联学生。

## 输出格式

对每个提问查询，输出一行两个整数，表示可能的分数范围。

## 算法分类
模拟

---

## 题解分析与对比

### 关键思路
1. **维护已知信息**：每个学生维护已知的分数总和（`l[b]`）和未知人数（`flag[b]`）。
2. **信息查询处理**：更新已知总和与未知人数。
3. **范围推导公式**：
   - **最大值**：`min(100, 剩余总分)`
   - **最小值**：`max(0, 剩余总分 - (未知人数-1)*100)`

### 题解对比

#### 题解1（3星）
- **亮点**：使用邻接矩阵记录已知关系，代码简洁。
- **缺点**：初始化错误（`peo[i]=n-2`），导致未知人数计算错误。
- **评分理由**：思路正确但实现有误，样例通过但存在隐患。

#### 题解2（5星）
- **亮点**：
  - 正确维护每个学生的已知总和和未知人数。
  - 处理边界条件（如总分超过100时取100）。
- **关键代码**：
  ```cpp
  if (sum - l[b] < 100) 
      cout << 0 << ' ' << sum - l[b];
  else {
      int temp = sum - l[b] - (flag[b]-1)*100;
      if (temp >= 0) cout << temp << ' ' << 100;
      else cout << 0 << ' ' << 100;
  }
  ```
- **评分理由**：逻辑严谨，正确处理所有边界情况。

---

## 最优思路总结
- **核心数据结构**：二维数组`vis[i][j]`记录学生i是否知道j的分数，数组`l[i]`维护已知分数总和，`flag[i]`记录未知人数。
- **核心公式**：
  - 剩余总分 = 总分 - 已知总分
  - 最大值 = `min(100, 剩余总分)`
  - 最小值 = `max(0, 剩余总分 - (未知人数-1)*100)`
- **注意点**：初始化时每个学生未知人数为`n-1`，确保每次操作正确更新状态。

---

## 相似题目推荐
1. [P1111 修复公路](https://www.luogu.com.cn/problem/P1111) - 并查集维护连通性。
2. [P1984 奖学金](https://www.luogu.com.cn/problem/P1984) - 条件筛选与排序。
3. [P3385 负环](https://www.luogu.com.cn/problem/P3385) - 图论中的状态维护与边界处理。

---
处理用时：269.68秒
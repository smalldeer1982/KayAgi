# 题目信息

# C-Filter

## 题目描述

[problemUrl]: https://atcoder.jp/contests/digitalarts2012/tasks/digitalarts_1

セキュリティに興味がある高橋君は、デジタルアーツ株式会社に就職したい青年です。  
 彼は、面接で自分をアピールするために、得意なプログラミングでフィルタリングソフト「C-Filter」を作ろうと考えています。  
 「C-Filter」は、与えられた文字列 $ s $ に、あらかじめ登録しておいた「NGワード」と一致する文字列が存在する場合、その文字列の長さと等しい数の `*`に置き換えて出力するソフトウェアです。この文字列を置き換える処理をフィルタリングと呼びます。  
 「NGワード」とは、半角英小文字と`*`から構成されます。`*`はすべての半角英小文字 $ 1 $ 文字と一致します。  
 例えば `myonmyon` は、NGワード`myo*myon`と一致します。  
 ただし、NGワードは単語ごとに適用されるため、`myo myon` はNGワード `myo*myon`とは一致しません。  
 また、NGワードはある単語に対して完全に一致する必要があります。  
 例えば、`abcde`は、NGワード`abc`や`bcd`、`cde`に一致しません。   
  
 文字列 $ s $ と、NGワードが与えられるので、C-Filterの出力する文字列を答えてください。  
 入力は以下の形式で標準入力から与えられる。

> $ s $ $ N $ $ t_{1} $ : : $ t_{N} $

1. 入力は $ N+2 $ 行からなる。
2. $ 1 $ 行目には $ 1 $ 文字以上 $ 1,000 $ 文字以下の文字列 $ s $ が与えられる。

- $ s $ はフィルタリングする対象の文字列を半角スペースで区切って繋げた文字列である。

5. $ 2 $ 行目にはNGワードの個数を表す整数 $ N(0≦N≦50) $ が与えられる。
6. $ 3 $ 行目から $ N+2 $ 行目までNGワードを表す文字列 $ t_{i}(1≦i≦N) $が与えられる。
- 文字列 $ t_{i} $ は半角英小文字と `*` から構成される。
- 文字列 $ t_{i} $ の長さは $ 1 $ 文字以上、 $ 20 $ 文字以下である。
- 文字列 $ t_{i} $ に含まれる `*` は、半角スペースを除くすべての半角英小文字 $ 1 $ 文字をフィルタリングの対象とします。
 
 入力された文字列 $ s $ をC-Filterでフィルタリングした結果を $ 1 $ 行で出力せよ。  
 なお、最後には改行を出力せよ。 ```

abc aaa ababa abcba abc
2
abc
**a**
```

 ```

*** aaa ***** abcba ***
```

- NGワードには`abc`と`**a**`の $ 2 $ つの文字列が登録されています。
- $ 1 $ 番目と $ 5 $ 番目に入力される`abc`はNGワード`abc`に一致するので、`***`と出力されます。
- $ 3 $ 番目に入力される`ababa`はNGワード`**a**`に一致するので、`*****`と出力されます。
 
```

aaaa aaa aaaaaa aaaa
3
a
aa
aaa
```

 ```

aaaa *** aaaaaa aaaa
```

- 完全一致のパターンだけを考慮すれば良いため、`aaaa` や `aaaaa` は変える必要がありません。
 
```

i have a pen
1
*
```

 ```

* have * pen
```

- １文字の単語だけNGワードとして認識されます。
 
```

digital arts
1
digital*arts
```

 ```

digital arts
```

- 半角スペースは`*`にマッチしません。

# AI分析结果



# C-Filter 题目翻译

## 题目描述

对安全领域感兴趣的高桥君，想通过制作过滤软件"C-Filter"来在面试中展示自己。该软件能将字符串s中与"NG词"完全匹配的单词替换为等长星号。NG词由小写字母和`*`构成，其中`*`可匹配任意单个小写字母。匹配必须针对整个单词，而非子串。

输入格式：
- 第1行：待处理字符串s（由空格分隔的单词组成）
- 第2行：NG词数量N
- 第3~N+2行：具体的NG词

输出格式：处理后的字符串

## 算法分类
字符串

---

## 解题思路分析

### 核心逻辑
1. **单词分割**：将输入字符串按空格拆分为单词列表
2. **模式预处理**：按长度对NG词分组，加速后续匹配
3. **匹配检查**：对每个单词，仅检查同长度NG词，逐字符比对（允许`*`通配）
4. **替换处理**：匹配成功则替换为等长星号

### 解决难点
- **高效匹配**：预处理按长度分组避免无效比较
- **通配符处理**：`*`需匹配任意字符但保持整体长度一致
- **完全匹配**：必须整个单词与模式完全对应

### 关键技巧
- **长度分组哈希表**：快速定位可能匹配的模式
- **短路比对**：发现不匹配立即终止当前模式检查

---

## 推荐代码实现
```python
from collections import defaultdict

s = input().split()
n = int(input())
ng = [input().strip() for _ in range(n)]

# 按长度预处理NG词
patterns = defaultdict(list)
for p in ng:
    patterns[len(p)].append(p)

res = []
for word in s:
    word_len = len(word)
    matched = False
    # 只检查同长度模式
    for p in patterns.get(word_len, []):
        # 逐字符比对
        for i in range(word_len):
            if p[i] != '*' and p[i] != word[i]:
                break
        else:
            matched = True
            break
    res.append('*' * word_len if matched else word)

print(' '.join(res))
```

---

## 拓展练习
1. [P1308 统计单词数](https://www.luogu.com.cn/problem/P1308) - 精确单词匹配
2. [P1179 数字统计](https://www.luogu.com.cn/problem/P1179) - 字符模式识别
3. [P1032 字串变换](https://www.luogu.com.cn/problem/P1032) - BFS+模式替换

---
处理用时：103.29秒
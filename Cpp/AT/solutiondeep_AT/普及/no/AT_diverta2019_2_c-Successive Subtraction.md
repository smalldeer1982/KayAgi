# 题目信息

# Successive Subtraction

## 题目描述

[problemUrl]: https://atcoder.jp/contests/diverta2019-2/tasks/diverta2019_2_c

黒板に $ A_1,\ A_2,\ ...,\ A_N $ の $ N $ 個の整数が書かれています。

以下の操作を $ N-1 $ 回繰り返して黒板にただ $ 1 $ つの整数が書かれているようにします。

- $ 2 $ 個の整数 $ x,\ y $ を選んで消し、新たに $ 1 $ 個の整数 $ x-y $ を書く。

ただ $ 1 $ つ残る整数としてありうる値の最大値と、その最大値を達成する操作列を求めてください。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 10^5 $
- $ -10^4\ \leq\ A_i\ \leq\ 10^4 $
- 入力は全て整数である

### Sample Explanation 1

$ 1 $ 回目の操作で $ x $ として $ -1 $、$ y $ として$ 1 $ を選ぶと、黒板に書かれている整数は $ (-2,\ 2) $ になります。 $ 2 $ 回目の操作で $ x $ として $ 2 $、$ y $ として$ -2 $ を選ぶと、黒板に書かれている整数は $ (4) $ になります。 よって $ 4 $ がただ $ 1 $ つ残り、$ 5 $ 以上の整数がただ $ 1 $ つ残ることはないので、これが最大です。

## 样例 #1

### 输入

```
3

1 -1 2```

### 输出

```
4

-1 1

2 -2```

## 样例 #2

### 输入

```
3

1 1 1```

### 输出

```
1

1 1

1 0```

# AI分析结果



# Successive Subtraction 连续相减问题

## 题目描述
黑板上有 $N$ 个整数 $A_1, A_2, ..., A_N$。进行 $N-1$ 次操作，每次选择两个整数 $x, y$ 替换为 $x-y$，求最终剩余整数的最大值及操作序列。

## 算法分类
贪心

---

## 题解综合分析

所有题解均基于贪心策略：通过排序后分类处理中间元素，维护最大最小值，最终结果为最大数减最小数。核心思路是将正数用最小值减（使最小值更小），负数用最大值减（使最大值更大）。零值处理不影响结果但需保留操作步骤。

---

## 精选题解（评分≥4星）

### 1. Gaoyx（★★★★☆）
**核心思路**  
- 排序后保留首尾极值  
- 中间元素按正负分别处理  
- 最终输出最大值减最小值  
**代码亮点**  
```cpp
sort(a+1,a+n+1);
for(int i=2;i<n;i++) {
    if(a[i] > 0) {
        a[1] -= a[i];  // 正数用最小值减
    } else {
        a[n] -= a[i];  // 负数用最大值减
    }
}
cout << a[n] - a[1];
```

### 2. zimujum（★★★★☆）
**实现技巧**  
- 使用独立数组存储操作步骤  
- 明确处理所有中间元素（i=2到n-1）  
**关键代码**  
```cpp
for(int i=2;i<n;i++){
    if(a[i]>0) b[i]=a[1], c[i]=a[i], a[1]-=a[i];
    else b[i]=a[n], c[i]=a[i], a[n]-=a[i];
}
cout << a[n]-a[1];
```

### 3. topcsa（★★★★☆）
**优化点**  
- 使用结构体存储操作步骤  
- 强调最后一步必须单独输出  
**代码片段**  
```cpp
struct node { int x, y; };
for(int i=2;i<n;i++) { 
    pos[cs++] = {a[i]>0 ? a[1] : a[n], a[i]};
}
cout << a[n] << ' ' << a[1]; // 输出最终操作
```

---

## 最优思路总结
1. **排序预处理**：将数组升序排列以快速获取极值  
2. **极值维护策略**：  
   - 正数用当前最小值减（使最小值更小）  
   - 负数用当前最大值减（使最大值更大）  
3. **最终结果**：最大值 - 最小值 = 所有元素绝对值之和（当存在正负时）  

---

## 类似题目推荐
1. [P1235 血缘关系](https://www.luogu.com.cn/problem/P1235) - 贪心构造操作序列  
2. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106) - 极值维护与策略选择  
3. [P2123 皇后游戏](https://www.luogu.com.cn/problem/P2123) - 排序贪心与操作顺序设计

---
处理用时：46.59秒
# 题目信息

# Different Strokes

## 题目描述

[problemUrl]: https://atcoder.jp/contests/nikkei2019-qual/tasks/nikkei2019_qual_c

高橋くんと青木さんの前に $ N $ 皿の料理が置かれています。 便宜上、これらの料理を料理 $ 1 $、料理 $ 2 $、…、料理 $ N $ と呼びます。

高橋くんが料理 $ i $ を食べると彼は $ A_i $ ポイントの *幸福度* を得ます。 また、青木さんが料理 $ i $ を食べると彼女は $ B_i $ ポイントの幸福度を得ます。

彼らは、高橋くんから始めて交互に、料理を $ 1 $ 皿ずつ選んで食べることを料理が尽きるまで続けます。 ただし、彼らはともに、「最終的に自分が得る幸福度の総和」から「最終的に相手が得る幸福度の総和」を引いた値を最大化するように料理を選びます。

このとき、「最終的に高橋くんが得る幸福度の総和」から「最終的に青木さんが得る幸福度の総和」を引いた値はいくつになるでしょうか？

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ 10^9 $
- $ 1\ \leq\ B_i\ \leq\ 10^9 $
- 入力される値はすべて整数である。

### Sample Explanation 1

この例では、二人のどちらも、料理 $ 1 $ を食べると $ 10 $ ポイント、料理 $ 2 $ を食べると $ 20 $ ポイント、料理 $ 3 $ を食べると $ 30 $ ポイントの幸福度を得ます。 この場合、高橋くんと青木さんの「好み」が一致しているため、彼らは毎回残っている料理のうち最も幸福度を多く得られる料理を選びます。よって、最初に高橋くんは料理 $ 3 $ を選び、次に青木さんは料理 $ 2 $ を選び、最後に高橋くんが料理 $ 1 $ を選ぶため、答えは $ (30\ +\ 10)\ -\ 20\ =\ 20 $ です。

### Sample Explanation 2

この例では、高橋くんは料理 $ 1,2,3 $ のいずれを食べても $ 20 $ ポイントの幸福度を得ますが、青木さんは料理 $ 1 $ を食べると $ 10 $ ポイント、料理 $ 2 $ を食べると $ 20 $ ポイント、料理 $ 3 $ を食べると $ 30 $ ポイントの幸福度を得ます。 今回は、青木さんのみに料理の好き嫌いがあるため、彼らは毎回残っている料理のうち青木さんが最も幸福度を多く得られる料理を選びます。よって、最初に高橋くんは料理 $ 3 $ を選び、次に青木さんは料理 $ 2 $ を選び、最後に高橋くんが料理 $ 1 $ を選ぶため、答えは $ (20\ +\ 20)\ -\ 20\ =\ 20 $ です。

### Sample Explanation 3

答えは $ 32 $ ビット整数に収まらない可能性があります。

## 样例 #1

### 输入

```
3

10 10

20 20

30 30```

### 输出

```
20```

## 样例 #2

### 输入

```
3

20 10

20 20

20 30```

### 输出

```
20```

## 样例 #3

### 输入

```
6

1 1000000000

1 1000000000

1 1000000000

1 1000000000

1 1000000000

1 1000000000```

### 输出

```
-2999999997```

# AI分析结果



# Different Strokes

## 题目描述

高桥和青木面前摆着 $N$ 盘料理。高桥吃第 $i$ 盘可获得 $A_i$ 幸福度，青木吃第 $i$ 盘可获得 $B_i$ 幸福度。两人轮流选菜（高桥先手），每次选择时都以最大化"自身总幸福度 - 对方总幸福度"为目标。求最终高桥总幸福度减去青木总幸福度的值。

### 输入格式
- 首行为整数 $N$
- 后续 $N$ 行每行两个整数 $A_i$ 和 $B_i$

### 输出格式
- 单个整数表示最终差值

### 样例
#### 输入 1
3  
10 10  
20 20  
30 30  
#### 输出 1
20

#### 输入 2
3  
20 10  
20 20  
20 30  
#### 输出 2
20

---

**算法分类**：贪心

---

## 题解分析与结论

### 核心思路
所有菜品按 $A_i + B_i$ 值降序排序，两人轮流选取当前最大值。高桥取奇数位菜品，青木取偶数位菜品。该策略基于每个玩家在每一步都选择对双方总收益最大的菜品，从而全局最优。

### 最优题解

#### 题解作者：Archy_（★★★★★）
**关键亮点**：
- 正确使用结构体存储菜品属性，明确排序依据为 $A_i+B_i$ 降序
- 代码简洁高效，直接排序后遍历计算差值

**代码核心**：
```cpp
struct node{
    long long Ah,Bh,Ch; // Ch = Ah + Bh
};
bool cmp(node x,node y) { return x.Ch > y.Ch; }

// 主逻辑
sort(a+1,a+n+1,cmp);
for(int i=1;i<=n;i++){
    if(i%2) A += a[i].Ah;
    else B += a[i].Bh;
}
cout << A - B;
```

#### 题解作者：封禁用户（★★★★☆）
**关键亮点**：
- 使用索引数组代替结构体，减少内存占用
- 通过自定义比较函数实现高效排序

**代码核心**：
```cpp
int id[100010]; // 存储菜品索引
bool cmp(int x,int y) { return a[x]+b[x] > a[y]+b[y]; }

// 主逻辑
sort(id+1, id+n+1, cmp);
for(int i=1; i<=n; i+=2) 
    l += a[id[i]]; // 高桥取奇数位
for(int i=2; i<=n; i+=2)
    r += b[id[i]]; // 青木取偶数位
```

#### 题解作者：_zhx（★★★★☆）
**个人心得**：
- 强调数据类型必须用 long long
- 通过位运算优化奇偶判断

**代码核心**：
```cpp
for(int i=1; i<=n; i++) {
    if(i&1) l += a[c[i]]; // 位运算判断奇偶
    else r += b[c[i]];
}
```

---

## 总结与扩展

### 关键技巧
1. **贪心选择依据**：将问题转化为两人总收益排序问题，通过 $A_i+B_i$ 量化每个选择的综合价值
2. **排序优化**：使用索引数组或结构体均可高效实现，时间复杂度稳定在 $O(n\log n)$

### 类似题目推荐
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心+优先队列
2. [P1208 混合牛奶](https://www.luogu.com.cn/problem/P1208) - 贪心排序策略
3. [P4995 跳跳！](https://www.luogu.com.cn/problem/P4995) - 交替选择最大值/最小值的贪心策略

---
处理用时：102.32秒
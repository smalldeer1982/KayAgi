# 题目信息

# 山田山本問題

## 题目描述

[problemUrl]: https://atcoder.jp/contests/tenka1-2016-quala/tasks/tenka1_2016_qualA_c

天下一株式会社に勤務するワタナベくんは、社内のコミュニケーションにチャットツールを使っています。 チャットツールには補完機能があり、@で始まるアカウント名を入力しようとすると、プレフィックスの一致するアカウント名の一覧を辞書順で補完候補として表示してくれます。

ところが、ワタナベくんは補完候補の中から @yamamoto を選ぼうとした時に、間違って @yamada を選択してしまうことが多々あります。 @yamada は @yamamoto より辞書順で小さく、 `@yama` まで入力した際に、候補の先頭に表示されてしまうためです。

ワタナベくんは不思議な特技を持っていて、アルファベットの順番を自由に並べ替えることができます。 例えば、ワタナベくんが特技を使ってアルファベットの順番を abcefghijklmdnopqrstuvwxyz にすると、 `m` は `d` より小さくなり、 @yamamoto を @yamada より辞書順で小さくすることができます。

アカウント名 $ A_i $ をアカウント名 $ B_i $ より辞書順で小さくしたいという要求が $ N $ 個与えられます。 与えられた要求をすべて満たすような、ワタナベくんの特技によって並べ替えられたアルファベットの順番を求めてください。 条件を満たすようなアルファベットの順番が複数存在する場合は、並べ替えられる前のアルファベットの順番での辞書順最小の順番を求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 1000 $
- $ A_i\ \neq\ B_i $
- $ 1\ \leq\ |A_i|,\ |B_i|\ \leq\ 1000 $
- $ A_i,B_i $は英小文字で構成される

## 样例 #1

### 输入

```
1
yamamoto yamada```

### 输出

```
abcefghijklmdnopqrstuvwxyz```

## 样例 #2

### 输入

```
3
xx xy
z w
v w```

### 输出

```
abcdefghijklmnopqrstuvxyzw```

## 样例 #3

### 输入

```
2
a b
b a```

### 输出

```
-1```

## 样例 #4

### 输入

```
1
yamamoto yama```

### 输出

```
-1```

# AI分析结果



# 山田山本問題

## 题目描述

天下一株式会社的员工渡边君在使用聊天工具时，常因补全功能选错账号。现需构造一个自定义字母顺序，使得给定的N组字符串对满足A_i字典序小于B_i。当存在多解时，输出原字母顺序字典序最小的方案，否则输出-1。

**算法分类**：图论（拓扑排序）

---

## 题解对比与结论

### 核心思路
1. **约束关系建图**：对每个字符串对找到首个不同字符，建立字符间的有向边（如s[k]→t[k]表示s[k]必须排在t[k]前）
2. **拓扑排序**：使用小根堆优先队列保证字典序最小
3. **重复边处理**：用邻接矩阵记录已存在的边，避免重复增加入度

### 高分题解推荐

#### [This_Rrhar] ⭐⭐⭐⭐⭐（5星）
**关键亮点**：
- 邻接矩阵处理重复边，确保入度计算正确
- 代码简洁高效，直接处理非法情况
- 使用优先队列保证字典序最小

**核心代码**：
```cpp
bool G[26][26]; // 邻接矩阵记录边
int deg[26];    // 入度数组

// 拓扑排序核心
void tpsort() {
    priority_queue<int, vector<int>, greater<int>> q;
    for(int i=0; i<26; i++) 
        if(!deg[i]) q.push(i);
    while(!q.empty()) {
        int u = q.top(); q.pop();
        ans += (char)(u+'a');
        for(int v=0; v<26; v++) 
            if(G[u][v] && --deg[v] == 0) 
                q.push(v);
    }
}
```

#### [Lyx8058] ⭐⭐⭐⭐（4星）
**关键亮点**：
- 清晰的拓扑排序实现
- 非法情况处理完善
- 代码注释详细，适合入门理解

**潜在问题**：
- 未处理重复边可能导致入度错误（需补充边存在性检查）

---

## 关键技巧总结
1. **首位差异处理**：仅需处理字符串对首个不同字符的关系
2. **拓扑排序优化**：小根堆保证字典序最小解
3. **邻接矩阵应用**：避免重复边导致入度错误

---

## 拓展练习
1. [P1113 杂务](https://www.luogu.com.cn/problem/P1113) - 拓扑排序应用
2. [P1347 排序](https://www.luogu.com.cn/problem/P1347) - 动态处理偏序关系
3. [P4017 最大食物链计数](https://www.luogu.com.cn/problem/P4017) - 拓扑排序与动态规划结合

---
处理用时：81.88秒
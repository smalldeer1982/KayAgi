# 题目信息

# Align

## 题目描述

[problemUrl]: https://atcoder.jp/contests/tenka1-2018/tasks/tenka1_2018_c

整数が $ N $ 個与えられます。$ i $ 個目の整数は $ A_i $ です。 これらを好きな順に一列に並べるとき、隣り合う要素の差の合計の最大値を求めてください。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ 10^9 $
- 入力はすべて整数である

### Sample Explanation 1

$ 3,8,1,6,2 $ の順に並べたとき、隣り合う要素の差の合計は $ 21 $ になり、 これが達成できる最大の値です。

## 样例 #1

### 输入

```
5

6

8

1

2

3```

### 输出

```
21```

## 样例 #2

### 输入

```
6

3

1

4

1

5

9```

### 输出

```
25```

## 样例 #3

### 输入

```
3

5

5

1```

### 输出

```
8```

# AI分析结果



# Align

## 题目描述

整数 $N$ 个给定，第 $i$ 个整数为 $A_i$。将它们按任意顺序排列成一列，求相邻元素差的绝对值之和的最大值。

### 输入格式
从标准输入读取：
- 首行输入整数 $N$
- 后续 $N$ 行每行一个整数 $A_i$

### 输出格式
输出最大可能的相邻元素差绝对值之和。

### 样例 #1
输入：
```
5
6
8
1
2
3
```
输出：
```
21
```

---

**算法分类**：贪心

---

## 题解分析与结论

### 核心思路
1. **排序预处理**：所有解法均先对数组排序，这是贪心策略的基础。
2. **奇偶分类**：
   - 偶数情况：交替排列最大最小值，直接计算差值。
   - 奇数情况：需比较中间元素放在最大值侧或最小值侧的两种排列方式。
3. **数学优化**：通过前缀和与后缀和的差值计算，避免构造具体排列。

### 精选题解

#### 1. qfpjm 的数学推导法（★★★★★）
**亮点**：
- 将排列问题转化为数学公式，计算两种排列方式的总差值
- 奇偶情况分类清晰，代码简洁高效

**核心代码**：
```cpp
sort(a + 1, a + 1 + n);
if (n & 1) {
    // 计算两种中间位置的差值方案
    int summax1 = 2*(后缀和) - 2*(前缀和) + 中间元素补偿项;
    int summax2 = ...;
    cout << max(summax1, summax2);
} else {
    // 直接计算交替排列的差值
    cout << 2*(后缀和 - 前缀和) - 中间过渡项;
}
```

#### 2. Aix_Eric 的贪心线段法（★★★★☆）
**亮点**：
- 数轴线段长度视角，每次取最长有效线段
- 循环代替递归，实现更高效

**核心代码**：
```cpp
sort(c+1, c+n+1);
l=1, r=n;
ans = c[r]-c[l];
while(l < r) {
    // 比较两种次长线段的选取方式
    if (c[r]-c[l+1] < c[r-1]-c[l]) 
        ans += c[r-1]-c[l], r--;
    else 
        ans += c[r]-c[l+1], l++;
}
```

#### 3. liuhaopeng 的极值公式法（★★★★☆）
**亮点**：
- 通过极值推导得出通用公式
- 处理奇数时考虑中间元素的两种位置

**核心代码**：
```cpp
sort(a + 1, a + n + 1);
if (n & 1) {
    // 计算两种极值情况的总和
    ans = max(方案1总和, 方案2总和);
} else {
    // 直接按交替排列计算
    ans = 2*(后缀和 - 前缀和) - 中间项;
}
```

---

## 关键思路总结
1. **排序后贪心**：通过排序将问题转化为极值排列问题。
2. **奇偶分治**：偶数直接交替排列，奇数需比较两种中间位置方案。
3. **数学优化**：通过差值公式直接计算结果，避免显式构造排列。

---

## 举一反三
- 类似贪心构造问题可尝试交替极值排列
- 涉及绝对值最大化的题目常需要排序后极值配对

---

## 推荐习题
1. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094) - 贪心配对
2. [P2878 分书问题](https://www.luogu.com.cn/problem/P2878) - 极值排列
3. [P2123 皇后游戏](https://www.luogu.com.cn/problem/P2123) - 贪心策略比较

---
处理用时：56.90秒
# 题目信息

# 超大型連休

## 题目描述

[problemUrl]: https://atcoder.jp/contests/language-test-ver1/tasks/test001_d

$ 2011 $ 年、$ AtCoder $ 国の高橋首相はある重大な決定を行った。  
 その決定とは...法改正である。国民の祝日に関する法律を変更し、休日を増やすことにした!!  
 国民の創造性を尊重するその決定が、霞が関を魔境へと変えたッ！  
  
 あなたは霞が関の国土交通省に勤務する職員であり、この法改正により上司から新たな任務を与えられた。  
 その任務とは、$ 2012 $ 年の「連休の最大日数」を計算することである。  
 連休の大きさを事前に計算することで国民の行動を予想し、高速道路の部分的な値下げを行い、経済を活性させるためだ。  
 したがって、あなたに失敗することは許されない。国民の行動を正確に予想できなくなるからだ。  
  
 以下に、「連休」の定義と諸注意を記す。

1. $ AtCoder $ 国が使用する暦は[グレゴリオ暦](http://ja.wikipedia.org/wiki/%E3%82%B0%E3%83%AC%E3%82%B4%E3%83%AA%E3%82%AA%E6%9A%A6)に従う。
2. 「連休」とは、「休日」が連続して続くことである。
3. 「土曜日」「日曜日」「祝日」「振替休日」が「休日」に相当する。
4. 「祝日」が他の休日と同じ日に指定されていた場合、「振替休日」を必ず設置する。
5. 「振替休日」は祝日の時系列順に決定していき、その祝日以降最も近い平日（休日を除いた日）となる。
6. $ 2012 $ 年 $ 1 $ 月 $ 1 $ 日は日曜日である。
 
 入力は以下の形式で標準入力から与えられる。 > $ N $ $ m_{1} $/$ d_{1} $ $ m_{2} $/$ d_{2} $ $ : $ $ : $ $ m_{n} $/$ d_{n} $

- $ 1 $ 行目には祝日の日数を表す整数 $ N $ が与えられ、 $ 0≦N≦366 $ を満たす。
- $ 2 $ 行目から $ N+1 $ 行目までの $ N $ 行で祝日の日付が与えられる。

1. $ m_{i} $ は $ i(1≦i≦366) $ 番目に与えられる祝日の月で、 $ 1≦m_{i}≦12 $ を満たす。
2. $ d_{i} $ は $ i(1≦i≦366) $ 番目に与えられる祝日の日で、
1. $ m_{i}\ =\ 2 $ のとき、 $ 1≦d_{i}≦29 $ を満たす。
2. $ m_{i}\ =\ (4,\ 6,\ 9,\ 11) $ のとき、 $ 1≦d_{i}≦30 $ を満たす。
3. $ m_{i}\ =\ (1,\ 3,\ 5,\ 7,\ 8,\ 10,\ 12) $ のとき、 $ 1≦d_{i}≦31 $ を満たす。

4. $ m_{i} $ と $ d_{i} $ はともに整数である。
5. $ m_{i} $ と $ d_{i} $ は必ず`/`で区切られて与えられる。
6. 祝日は時系列順に与えられるとは限らないことに注意せよ。ただし、同じ日付が複数与えられないことは保証されている。
 
 法改正後における $ 2012 $ 年の連休の最大日数を出力せよ。  
 出力は標準出力におこない、末尾には改行をいれること。  
```

1
1/9
```

 ```

3
```

- 1/7(土),1/8(日),1/9(月)の $ 3 $ 連休が最長です。
 
```

1
1/10
```

 ```

2
```

- 1/10(火)が祝日となり、1/7(土),1/8(日)などの $ 2 $ 連休が最長です。
 
```

1
1/7
```

 ```

3
```

- 1/7は土曜日なので、以降で最も近い平日である1/9が振替休日になります。
- よって、1/7(土)、1/8(日)、1/9(月)の3連休が最長です。
 
```

2
1/7
1/9
```

 ```

4
```

- 1/7は土曜日なので振替休日を以降に設定したく、1/9が祝日なので1/10が振替休日になります。
- よって、1/7(土)、1/8(日)、1/9(月)、1/10(火)の4連休が最長です。

# AI分析结果



# 超大型連休

## 题目描述

给定2012年的多个法定假日，计算该年最长连续休假日数。休日包括周六、周日、法定假日及振替休日。若法定假日与其他休日重叠，需设置振替休日（后续最近的平日）。需模拟所有日期状态后求最长连续休日。

**算法分类**: 模拟

---

## 题解综合分析

所有题解均采用一维数组标记休日，但存在以下共性问题：
1. **未按时间顺序处理假日**：规则要求振替按假日时间顺序处理，但题解未对输入排序，可能导致振替顺序错误。
2. **边界处理不严谨**：振替循环未正确处理年末日期，可能导致越界或漏处理。

### 关键思路总结
1. **日期转换**：将月/日转换为一年中的第几天（索引），需正确计算月份前缀和。
2. **周末预处理**：根据首日周日确定各日期的星期。
3. **振替处理**：若假日当天为休日，向后查找第一个平日设为振替。
4. **连续统计**：遍历数组统计最长连续休日，注意最后需再次更新最大值。

---

## 正确实现要点
1. **假日排序**：输入假日需按时间顺序处理，确保振替符合规则。
2. **索引边界**：处理振替时需覆盖全年范围（如索引0~365或1~366）。
3. **月份累计**：正确计算各月天数前缀和（注意闰年二月）。

```cpp
// 示例核心代码（需补充排序逻辑）
int main() {
    // 预处理周末
    int days[367] = {0};
    for (int i = 1; i <= 366; i++) 
        if (i % 7 == 1 || i % 7 == 0) days[i] = 1;
    
    // 读取并排序假日
    vector<int> holidays;
    while (n--) {
        scanf("%d/%d", &m, &d);
        holidays.push_back(sum[m-1] + d);
    }
    sort(holidays.begin(), holidays.end());
    
    // 处理每个假日
    for (int date : holidays) {
        if (days[date]) { // 需要振替
            for (int j = date + 1; j <= 366; j++) {
                if (!days[j]) { days[j] = 1; break; }
            }
        } else days[date] = 1;
    }
    
    // 统计最长连续
    int ans = 0, cnt = 0;
    for (int i = 1; i <= 366; i++) {
        cnt = days[i] ? cnt + 1 : 0;
        ans = max(ans, cnt);
    }
    cout << ans;
}
```

---

## 拓展练习
1. [P1051 谁拿了最多奖学金](https://www.luogu.com.cn/problem/P1051) - 日期条件判断
2. [P1205 方块转换](https://www.luogu.com.cn/problem/P1205) - 模拟矩阵变换
3. [P1309 瑞士轮](https://www.luogu.com.cn/problem/P1309) - 排序与模拟结合

---
处理用时：316.99秒
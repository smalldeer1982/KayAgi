# 题目信息

# [ABC384D] Repeated Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc384/tasks/abc384_d

周期 $ N $ をもつ無限数列 $ A=(A\ _\ 1,A\ _\ 2,A\ _\ 3,\dotsc) $ の先頭 $ N $ 項 $ A\ _\ 1,A\ _\ 2,\dotsc,A\ _\ N $ が与えられます。

この数列の空でない連続する部分列のうち、和が $ S $ となるものが存在するか判定してください。

ただし、無限数列 $ A $ が周期 $ N $ をもつとは、$ i\gt\ N $ を満たすすべての整数 $ i $ に対して $ A\ _\ i=A\ _\ {i-N} $ が成り立つことをいいます。

## 说明/提示

### 制約

- $ 1\leq\ N\leq2\times10\ ^\ 5 $
- $ 1\leq\ A\ _\ i\leq\ 10\ ^\ 9 $
- $ 1\leq\ S\leq\ 10\ ^\ {18} $
- 入力はすべて整数
 
### Sample Explanation 1

数列 $ A $ は $ (3,8,4,3,8,4,3,8,4,\dotsc) $ のようになります。 $ A $ の部分列 $ (A\ _\ 2,A\ _\ 3,A\ _\ 4,A\ _\ 5,A\ _\ 6,A\ _\ 7,A\ _\ 8,A\ _\ 9)=(8,4,3,8,4,3,8,4) $ について $ 8+4+3+8+4+3+8+4=42 $ が成り立つので、`Yes` を出力してください。

### Sample Explanation 2

$ A $ の要素はすべて $ 3 $ 以上なので、$ A $ の空でない連続する部分列の総和は $ 3 $ 以上です。 よって、総和が $ 1 $ となるような部分列は存在しないため、`No` を出力してください。

## 样例 #1

### 输入

```
3 42

3 8 4```

### 输出

```
Yes```

## 样例 #2

### 输入

```
3 1

3 8 4```

### 输出

```
No```

## 样例 #3

### 输入

```
20 83298426

748 169 586 329 972 529 432 519 408 587 138 249 656 114 632 299 984 755 404 772```

### 输出

```
Yes```

## 样例 #4

### 输入

```
20 85415869

748 169 586 329 972 529 432 519 408 587 138 249 656 114 632 299 984 755 404 772```

### 输出

```
No```

# AI分析结果

### 题目内容重写

#### 题目描述

给定一个周期为 $N$ 的无限数列 $A=(A_1,A_2,A_3,\dots)$，其前 $N$ 项 $A_1,A_2,\dots,A_N$ 已知。请判断该无限数列中是否存在一个非空的连续子序列，其和为 $S$。

无限数列 $A$ 具有周期 $N$，意味着对于所有 $i > N$ 的整数 $i$，都有 $A_i = A_{i-N}$ 成立。

#### 输入输出格式

**输入格式**  
第一行包含两个整数 $N$ 和 $S$，分别表示数列的周期和目标子序列的和。  
第二行包含 $N$ 个整数 $A_1,A_2,\dots,A_N$，表示数列的前 $N$ 项。

**输出格式**  
如果存在满足条件的子序列，输出 `Yes`，否则输出 `No`。

#### 样例

**样例 1**  
输入：
```
3 42
3 8 4
```
输出：
```
Yes
```

**样例 2**  
输入：
```
3 1
3 8 4
```
输出：
```
No
```

#### 说明/提示

**约束条件**  
- $1 \leq N \leq 2 \times 10^5$  
- $1 \leq A_i \leq 10^9$  
- $1 \leq S \leq 10^{18}$  
- 输入均为整数

### 题解分析与结论

本题的核心在于如何处理无限数列的周期性，并找到满足条件的子序列。大多数题解都采用了将数列复制一份，形成长度为 $2N$ 的数组，然后通过双指针或前缀和的方式来判断是否存在满足条件的子序列。以下是各题解的关键思路和评分：

1. **Walrus (4星)**  
   - 关键亮点：通过预处理前缀和和后缀和，结合 `map` 进行快速查找，时间复杂度为 $O(N)$。
   - 代码简洁，思路清晰，适合大规模数据处理。

2. **zlqwq (4星)**  
   - 关键亮点：使用队列维护当前区间和，通过调节左右端点来寻找满足条件的子序列，时间复杂度为 $O(N)$。
   - 代码实现简单，易于理解，适合初学者。

3. **icaijy (4星)**  
   - 关键亮点：通过双指针在 $2N$ 长度的数组上进行滑动窗口操作，时间复杂度为 $O(N)$。
   - 代码结构清晰，逻辑严谨，适合中等水平选手。

### 最优关键思路与技巧

1. **数列复制与双指针**：将原数列复制一份，形成长度为 $2N$ 的数组，然后通过双指针或滑动窗口的方式寻找满足条件的子序列。这种方法能够有效处理无限数列的周期性，且时间复杂度为 $O(N)$。

2. **前缀和与哈希表**：通过预处理前缀和，结合哈希表（如 `map`）进行快速查找，能够高效判断是否存在满足条件的子序列。

3. **滑动窗口**：使用滑动窗口维护当前区间和，通过调节窗口的左右边界来寻找满足条件的子序列，适用于大规模数据处理。

### 推荐题目

1. [P1115 最大子段和](https://www.luogu.com.cn/problem/P1115)  
   - 考察知识点：最大子段和问题，可以使用类似的双指针或滑动窗口技巧。

2. [P1631 序列合并](https://www.luogu.com.cn/problem/P1631)  
   - 考察知识点：序列合并与子序列问题，可以使用前缀和或双指针技巧。

3. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)  
   - 考察知识点：滑动窗口问题，与本题的双指针技巧类似。

### 个人心得摘录

- **Walrus**：通过预处理前缀和和后缀和，结合 `map` 进行快速查找，大大减少了时间复杂度，适合大规模数据处理。
- **zlqwq**：使用队列维护当前区间和，通过调节左右端点来寻找满足条件的子序列，代码实现简单，易于理解。
- **icaijy**：通过双指针在 $2N$ 长度的数组上进行滑动窗口操作，逻辑严谨，适合中等水平选手。

### 核心代码片段

**Walrus 的代码片段：**
```cpp
rep(i, 0, n) mp[suf[i]] = 1;
rep(i, 0, n) {
    if(k == per[i]) cout << "Yes", exit(0);
    if(k > per[i]) {
        m = k - per[i];
        m %= tot;
        if(mp[m]) cout << "Yes", exit(0);
    }
    else cout << "No", exit(0);
}
```
**zlqwq 的代码片段：**
```cpp
for(int i=1;i<=n*2;++i){
    while(val>s){
        val-=stk.front();
        stk.pop();
    }
    if(val==s){
        cout<<"Yes";
        return 0;
    }
    val+=a[i];
    stk.push(a[i]);
}
```
**icaijy 的代码片段：**
```cpp
while (l<=r&&l<=2*n&&r<=2*n){
    while (cur<s&&r<=2*n) {
        r++;
        cur+=a[r];
    }
    while (cur>s&&l<=2*n){
        cur-=a[l];
        l++;
    }
    if (cur==s) {
        cout<<"Yes";
        return 0;
    }
}
```

---
处理用时：46.21秒
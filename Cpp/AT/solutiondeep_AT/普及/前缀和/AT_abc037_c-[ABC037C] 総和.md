# 题目信息

# [ABC037C] 総和

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc037/tasks/abc037_c

長さ $ N $ の数列 $ \{a_i\} $ と$ 1 $ 以上 $ N $ 以下の整数 $ K $ が与えられます。 この数列には長さ $ K $ の連続する部分列が $ N-K+1 $ 個あります。これらのそれぞれ部分列に含まれる値の合計の総和を求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ K\ \leq\ N\ \leq\ 10^5 $
- $ 0\ \leq\ a_i\ \leq\ 10^8 $
- $ a_i $ は整数である。

### 部分点

- 50 点分のテストケースでは、 $ N\ \leq\ 10^3 $ である。

### Sample Explanation 1

$ (1+2+4)+(2+4+8)+(4+8+16)=49 $ なので、答えは $ 49 $ です。

### Sample Explanation 2

オーバーフローに注意してください。

## 样例 #1

### 输入

```
5 3

1 2 4 8 16```

### 输出

```
49```

## 样例 #2

### 输入

```
20 10

100000000 100000000 98667799 100000000 100000000 100000000 100000000 99986657 100000000 100000000 100000000 100000000 100000000 98995577 100000000 100000000 99999876 100000000 100000000 99999999```

### 输出

```
10988865195```

# AI分析结果

### 题目内容重写

**题目描述**

给定一个长度为 $N$ 的数列 $\{a_i\}$ 和一个整数 $K$（$1 \leq K \leq N$）。这个数列中有 $N-K+1$ 个长度为 $K$ 的连续子序列。请计算这些子序列中所有元素的总和。

**说明/提示**

- **约束条件**：
  - $1 \leq K \leq N \leq 10^5$
  - $0 \leq a_i \leq 10^8$
  - $a_i$ 是整数。

- **部分分**：
  - 50 分的测试用例中，$N \leq 10^3$。

**样例解释**

- **样例 1**：
  - 输入：
    ```
    5 3
    1 2 4 8 16
    ```
  - 输出：
    ```
    49
    ```
  - 解释：$(1+2+4)+(2+4+8)+(4+8+16)=49$。

- **样例 2**：
  - 输入：
    ```
    20 10
    100000000 100000000 98667799 100000000 100000000 100000000 100000000 99986657 100000000 100000000 100000000 100000000 100000000 98995577 100000000 100000000 99999876 100000000 100000000 99999999
    ```
  - 输出：
    ```
    10988865195
    ```

### 题解分析与结论

#### 题解思路对比

1. **暴力模拟法**：
   - **思路**：直接枚举所有长度为 $K$ 的子序列，计算每个子序列的和并累加。
   - **优点**：简单直观，易于实现。
   - **缺点**：时间复杂度为 $O(N \times K)$，在 $N$ 和 $K$ 较大时会超时。
   - **适用场景**：$N$ 和 $K$ 较小时。

2. **前缀和优化**：
   - **思路**：预处理前缀和数组，利用前缀和快速计算任意子序列的和。
   - **优点**：时间复杂度降为 $O(N)$，效率高。
   - **缺点**：需要额外的空间存储前缀和。
   - **适用场景**：$N$ 和 $K$ 较大时。

3. **滑动窗口法**：
   - **思路**：利用滑动窗口的思想，每次移动窗口时，减去窗口最左边的元素，加上窗口最右边的元素，从而快速计算新的子序列和。
   - **优点**：时间复杂度为 $O(N)$，空间复杂度为 $O(1)$。
   - **缺点**：需要仔细处理窗口的移动。
   - **适用场景**：$N$ 和 $K$ 较大时。

4. **线段树/树状数组**：
   - **思路**：利用线段树或树状数组维护区间和，支持快速查询任意区间的和。
   - **优点**：支持动态更新和查询，适用于更复杂的场景。
   - **缺点**：实现复杂，代码量大。
   - **适用场景**：需要动态更新和查询的场景。

#### 最优关键思路

- **前缀和优化**：通过预处理前缀和数组，可以快速计算任意子序列的和，时间复杂度为 $O(N)$，是最优的解决方案。
- **滑动窗口法**：同样可以达到 $O(N)$ 的时间复杂度，且空间复杂度更低，适合对空间要求较高的场景。

#### 推荐题解

1. **作者：kingder_man (赞：4)**
   - **星级**：★★★★★
   - **关键亮点**：使用前缀和优化，代码简洁清晰，时间复杂度为 $O(N)$。
   - **代码片段**：
     ```cpp
     for(int i=1;i<=n;i++) {
         cin>>a[i];
         num[i]=num[i-1]+a[i];
     }
     for(int i=k;i<=n;i++) {
         sum+=num[i]-num[i-k];
     }
     ```

2. **作者：liulif (赞：2)**
   - **星级**：★★★★
   - **关键亮点**：使用滑动窗口法，空间复杂度为 $O(1)$，代码简洁。
   - **代码片段**：
     ```cpp
     for(int i=k;i<=n;i++) {
         cin>>a[i];
         sum+=a[i];
         ans+=sum;
         sum-=a[i-k+1];
     }
     ```

3. **作者：Violet9567 (赞：2)**
   - **星级**：★★★★
   - **关键亮点**：使用前缀和优化，代码简洁，时间复杂度为 $O(N)$。
   - **代码片段**：
     ```cpp
     for(int i=1;i<=n;++i) {
         int c=0;
         cin>>c;
         sum[i]=sum[i-1]+c;
         if(i-k>=0)
             ans+=sum[i]-sum[i-k];
     }
     ```

### 拓展思路与推荐题目

#### 拓展思路

- **动态维护区间和**：可以使用线段树或树状数组来动态维护区间和，适用于需要频繁更新和查询的场景。
- **滑动窗口的变种**：可以应用于其他需要滑动窗口的问题，如最大子数组和、最小子数组和等。

#### 推荐题目

1. **洛谷 P1886 滑动窗口**：考察滑动窗口的基本应用。
2. **洛谷 P3372 线段树 1**：考察线段树的基本操作。
3. **洛谷 P3374 树状数组 1**：考察树状数组的基本操作。

### 个人心得摘录

- **kingder_man**：前缀和的使用让我意识到预处理的重要性，能够大幅提升算法效率。
- **liulif**：滑动窗口的实现让我对窗口的移动有了更深的理解，代码简洁但需要仔细处理边界条件。
- **Violet9567**：前缀和的公式推导让我对区间和的计算有了更清晰的认识，代码实现也更加得心应手。

---
处理用时：44.43秒
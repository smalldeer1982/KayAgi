# 题目信息

# [ABC384D] Repeated Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc384/tasks/abc384_d

周期 $ N $ をもつ無限数列 $ A=(A\ _\ 1,A\ _\ 2,A\ _\ 3,\dotsc) $ の先頭 $ N $ 項 $ A\ _\ 1,A\ _\ 2,\dotsc,A\ _\ N $ が与えられます。

この数列の空でない連続する部分列のうち、和が $ S $ となるものが存在するか判定してください。

ただし、無限数列 $ A $ が周期 $ N $ をもつとは、$ i\gt\ N $ を満たすすべての整数 $ i $ に対して $ A\ _\ i=A\ _\ {i-N} $ が成り立つことをいいます。

## 说明/提示

### 制約

- $ 1\leq\ N\leq2\times10\ ^\ 5 $
- $ 1\leq\ A\ _\ i\leq\ 10\ ^\ 9 $
- $ 1\leq\ S\leq\ 10\ ^\ {18} $
- 入力はすべて整数
 
### Sample Explanation 1

数列 $ A $ は $ (3,8,4,3,8,4,3,8,4,\dotsc) $ のようになります。 $ A $ の部分列 $ (A\ _\ 2,A\ _\ 3,A\ _\ 4,A\ _\ 5,A\ _\ 6,A\ _\ 7,A\ _\ 8,A\ _\ 9)=(8,4,3,8,4,3,8,4) $ について $ 8+4+3+8+4+3+8+4=42 $ が成り立つので、`Yes` を出力してください。

### Sample Explanation 2

$ A $ の要素はすべて $ 3 $ 以上なので、$ A $ の空でない連続する部分列の総和は $ 3 $ 以上です。 よって、総和が $ 1 $ となるような部分列は存在しないため、`No` を出力してください。

## 样例 #1

### 输入

```
3 42

3 8 4```

### 输出

```
Yes```

## 样例 #2

### 输入

```
3 1

3 8 4```

### 输出

```
No```

## 样例 #3

### 输入

```
20 83298426

748 169 586 329 972 529 432 519 408 587 138 249 656 114 632 299 984 755 404 772```

### 输出

```
Yes```

## 样例 #4

### 输入

```
20 85415869

748 169 586 329 972 529 432 519 408 587 138 249 656 114 632 299 984 755 404 772```

### 输出

```
No```

# AI分析结果

### 题目内容重写

**题目描述**

给定一个周期为 $N$ 的无限数列 $A=(A_1,A_2,A_3,\dots)$，其前 $N$ 项 $A_1,A_2,\dots,A_N$ 已知。请判断该数列是否存在一个非空连续子序列，其和为 $S$。

无限数列 $A$ 的周期为 $N$，意味着对于所有 $i > N$ 的整数 $i$，都有 $A_i = A_{i-N}$。

**说明/提示**

- **约束条件**  
  - $1 \leq N \leq 2 \times 10^5$  
  - $1 \leq A_i \leq 10^9$  
  - $1 \leq S \leq 10^{18}$  
  - 输入均为整数

**样例解释**

- **样例1**  
  输入：  
  ```
  3 42
  3 8 4
  ```  
  输出：  
  ```
  Yes
  ```  
  解释：数列 $A$ 为 $(3,8,4,3,8,4,3,8,4,\dots)$，子序列 $(8,4,3,8,4,3,8,4)$ 的和为 $42$，因此输出 `Yes`。

- **样例2**  
  输入：  
  ```
  3 1
  3 8 4
  ```  
  输出：  
  ```
  No
  ```  
  解释：$A$ 的所有元素都大于等于 $3$，因此不存在和为 $1$ 的子序列，输出 `No`。

### 题解分析与结论

本题的核心难点在于如何处理无限数列的周期性，并高效地判断是否存在和为 $S$ 的子序列。大多数题解通过将问题转化为有限数列的处理，利用前缀和、双指针、二分查找等技巧来解决问题。

#### 关键思路与技巧

1. **周期性处理**：由于数列是周期性的，可以将问题转化为处理长度为 $2N$ 的数列，通过复制原数列一次来模拟无限数列的周期性。
2. **前缀和与双指针**：通过计算前缀和，利用双指针在 $O(N)$ 时间内查找是否存在满足条件的子序列。
3. **模运算优化**：对于较大的 $S$，先将其对数列的总和取模，减少问题的规模。

#### 推荐题解

1. **作者：Walrus (赞：4)**  
   **星级：★★★★★**  
   **关键亮点**：通过预处理前缀和后缀和，利用 `map` 快速判断是否存在满足条件的子序列，代码简洁且高效。  
   **核心代码**：
   ```cpp
   rep(i, 0, n) {
       if(k == per[i]) cout << "Yes", exit(0);
       if(k > per[i]) {
           m = k - per[i];
           m %= tot;
           if(mp[m]) cout << "Yes", exit(0);
       }
       else cout << "No", exit(0);
   }
   ```

2. **作者：zlqwq (赞：3)**  
   **星级：★★★★**  
   **关键亮点**：通过将数列复制一次，使用队列维护当前区间和，利用双指针在 $O(N)$ 时间内查找满足条件的子序列。  
   **核心代码**：
   ```cpp
   for(int i=1;i<=n*2;++i){
       while(val>s){
           val-=stk.front();
           stk.pop();
       }
       if(val==s){
           cout<<"Yes";
           return 0;
       }
       val+=a[i];
       stk.push(a[i]);
   }
   ```

3. **作者：icaijy (赞：3)**  
   **星级：★★★★**  
   **关键亮点**：通过模运算优化问题规模，使用双指针在 $2N$ 长度的数列上查找满足条件的子序列，代码清晰且易于理解。  
   **核心代码**：
   ```cpp
   while (l<=r&&l<=2*n&&r<=2*n){
       while (cur<s&&r<=2*n) {
           r++;
           cur+=a[r];
       }
       while (cur>s&&l<=2*n){
           cur-=a[l];
           l++;
       }
       if (cur==s) {
           cout<<"Yes";
           return 0;
       }
   }
   ```

### 扩展思路与推荐题目

- **扩展思路**：类似的问题可以通过将无限数列转化为有限数列来处理，利用前缀和、双指针、二分查找等技巧进行优化。对于周期性数列，模运算是一个常用的优化手段。
  
- **推荐题目**：
  1. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)  
  2. [P3382 【模板】线段树 1](https://www.luogu.com.cn/problem/P3382)  
  3. [P3391 【模板】文艺平衡树](https://www.luogu.com.cn/problem/P3391)

---
处理用时：38.15秒
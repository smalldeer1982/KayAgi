# 题目信息

# [ABC369D] Bonus EXP

## 题目描述

高桥君遇到了 $N$ 只怪物，依次遇到每一只怪物，第 $i$ 只怪物的强度为 $A_i$。

高桥君可以选择对每只怪物是放走还是击败。  
高桥君通过以下的方式获得经验值：

- 如果选择放走怪物，获得的经验值为 $0$。
- 如果击败强度为 $X$ 的怪物，他可以获得 $X$ 的经验值。但是，如果这是他第偶数次击败怪物（即第 $2$ 次、第 $4$ 次、……），他将额外获得 $X$ 的经验值。

请计算高桥君通过击败怪物可以获得的最大总经验值。

## 说明/提示

### 约束条件

- $1 \leq N \leq 2 \times 10^5$
- $1 \leq A_i \leq 10^9$
- 输入的所有数值均为整数

### 样例解释 1

在击败第 1、2、3、5 只怪物并放走第 4 只怪物时，高桥君可以按如下方式获得经验值： 
- 击败强度为 $A_1=1$ 的怪物，获得 $1$ 的经验值。
- 击败强度为 $A_2=5$ 的怪物，获得 $5$ 的经验值。这是高桥君第 2 次击败怪物，因此额外获得 $5$ 的经验值。
- 击败强度为 $A_3=3$ 的怪物，获得 $3$ 的经验值。
- 放走第 4 只怪物，高桥君不获得经验值。
- 击败强度为 $A_5=7$ 的怪物，获得 $7$ 的经验值。这是高桥君第 4 次击败怪物，因此额外获得 $7$ 的经验值。

因此，总共获得的经验值为 $1+(5+5)+3+0+(7+7)=28$。  
由于无论如何行动，总经验值都不会超过 $28$，所以输出 $28$。

请注意，如果击败所有怪物，获得的经验值为 $1+(5+5)+3+(2+2)+7=25$。

### 样例解释 2

请注意，答案可能会超过 32 位整数型的范围。

## 样例 #1

### 输入

```
5

1 5 3 2 7```

### 输出

```
28```

## 样例 #2

### 输入

```
2

1000000000 1000000000```

### 输出

```
3000000000```

# AI分析结果

### 题目内容
高桥君遇到了 $N$ 只怪物，依次遇到每一只怪物，第 $i$ 只怪物的强度为 $A_i$。

高桥君可以选择对每只怪物是放走还是击败。  
高桥君通过以下的方式获得经验值：

- 如果选择放走怪物，获得的经验值为 $0$。
- 如果击败强度为 $X$ 的怪物，他可以获得 $X$ 的经验值。但是，如果这是他第偶数次击败怪物（即第 $2$ 次、第 $4$ 次、……），他将额外获得 $X$ 的经验值。

请计算高桥君通过击败怪物可以获得的最大总经验值。

### 说明/提示

#### 约束条件
- $1 \leq N \leq 2 \times 10^5$
- $1 \leq A_i \leq 10^9$
- 输入的所有数值均为整数

### 样例解释 1
在击败第 1、2、3、5 只怪物并放走第 4 只怪物时，高桥君可以按如下方式获得经验值： 
- 击败强度为 $A_1=1$ 的怪物，获得 $1$ 的经验值。
- 击败强度为 $A_2=5$ 的怪物，获得 $5$ 的经验值。这是高桥君第 2 次击败怪物，因此额外获得 $5$ 的经验值。
- 击败强度为 $A_3=3$ 的怪物，获得 $3$ 的经验值。
- 放走第 4 只怪物，高桥君不获得经验值。
- 击败强度为 $A_5=7$ 的怪物，获得 $7$ 的经验值。这是高桥君第 4 次击败怪物，因此额外获得 $7$ 的经验值。

因此，总共获得的经验值为 $1+(5+5)+3+0+(7+7)=28$。  
由于无论如何行动，总经验值都不会超过 $28$，所以输出 $28$。

请注意，如果击败所有怪物，获得的经验值为 $1+(5+5)+3+(2+2)+7=25$。

### 样例解释 2
请注意，答案可能会超过 32 位整数型的范围。

### 样例 #1
#### 输入
```
5
1 5 3 2 7
```
#### 输出
```
28
```

### 样例 #2
#### 输入
```
2
1000000000 1000000000
```
#### 输出
```
3000000000
```

---

### 题解分析与总结

#### 关键思路与技巧
1. **动态规划（DP）**：所有题解都采用了动态规划的思路，通过定义状态 $f_{i,0/1}$ 表示前 $i$ 只怪物，击败的怪物数量为偶数或奇数时的最大经验值。
2. **状态转移**：转移方程的核心思想是考虑当前怪物是否击败，并根据击败次数的奇偶性决定是否翻倍经验值。具体转移方程为：
   - $f_{i,0} = \max(f_{i-1,0}, f_{i-1,1} + 2 \times A_i)$
   - $f_{i,1} = \max(f_{i-1,1}, f_{i-1,0} + A_i)$
3. **边界条件**：初始化 $f_{0,1}$ 为负无穷，表示不可能在击败 0 只怪物时处于奇数状态。
4. **优化**：部分题解使用了滚动数组优化空间复杂度，但大多数题解直接使用二维数组进行状态转移。

#### 最优题解推荐
1. **作者：Alcl000000 (5星)**
   - **亮点**：思路清晰，代码简洁，状态转移方程明确，初始化合理。
   - **代码核心**：
     ```cpp
     f[i][0] = max(f[i-1][0], f[i-1][1] + a[i]);
     f[i][1] = max(f[i-1][1], f[i-1][0] + 2 * a[i]);
     ```
   - **个人心得**：无。

2. **作者：maokaiyu (5星)**
   - **亮点**：代码简洁，状态转移方程清晰，初始化合理，且使用了滚动数组优化空间。
   - **代码核心**：
     ```cpp
     dp[i][0] = max(dp[i-1][0], dp[i-1][1] + a[i]);
     dp[i][1] = max(dp[i-1][1], dp[i-1][0] + 2 * a[i]);
     ```
   - **个人心得**：无。

3. **作者：_xxxxx_ (5星)**
   - **亮点**：代码简洁，状态转移方程清晰，初始化合理，且使用了滚动数组优化空间。
   - **代码核心**：
     ```cpp
     dp[i][0] = max(dp[i - 1][1] + a[i] * 2, dp[i - 1][0]);
     dp[i][1] = max(dp[i - 1][0] + a[i], dp[i - 1][1]);
     ```
   - **个人心得**：无。

#### 扩展思路
- **类似题目**：这类问题可以扩展到其他需要根据某种状态（如奇偶性、顺序等）进行决策的DP问题。例如，某些题目中需要根据前一个状态的选择来决定当前状态的值。
- **优化技巧**：在DP问题中，如果状态转移只依赖于前一个状态，可以考虑使用滚动数组来优化空间复杂度。

#### 推荐题目
1. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 经典背包问题，类似于本题的DP思路。
2. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060) - 需要根据某种状态进行决策的DP问题。
3. [P1359 租用游艇](https://www.luogu.com.cn/problem/P1359) - 需要根据顺序进行决策的DP问题。

---
处理用时：47.53秒
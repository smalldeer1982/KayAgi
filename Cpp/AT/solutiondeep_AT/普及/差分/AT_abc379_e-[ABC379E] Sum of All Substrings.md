# 题目信息

# [ABC379E] Sum of All Substrings

## 题目描述

给定一个长度为 $N$ 的字符串 $S$，其中 $S$ 里只包含数字字符，且没有数字字符 `0`。  
对于每一对正整数 $1 \le i \le j \le N$，定义 $f(i,j)$ 表示将 $S$ 的第 $i \sim j$ 个字符提取出来的子串作为一个数字。  
现在请你求出 $ \sum _ {i = 1} ^ N \sum _ {j = i} ^ N f(i,j)$ 的结果。

## 说明/提示

对于 $100\%$ 的数据，保证 $1 \le N \le 2 \times 10^5,|S|=N$ 且 $S$ 只由数字字符 `1` $\sim$ `9` 组成。

## 样例 #1

### 输入

```
3

379```

### 输出

```
514```

## 样例 #2

### 输入

```
30

314159265358979323846264338327```

### 输出

```
369673254065355789035427227741```

# AI分析结果

### 题目内容重写
给定一个长度为 $N$ 的字符串 $S$，其中 $S$ 里只包含数字字符，且没有数字字符 `0`。  
对于每一对正整数 $1 \le i \le j \le N$，定义 $f(i,j)$ 表示将 $S$ 的第 $i \sim j$ 个字符提取出来的子串作为一个数字。  
现在请你求出 $ \sum _ {i = 1} ^ N \sum _ {j = i} ^ N f(i,j)$ 的结果。

### 综合分析与结论
该题目要求计算字符串中所有子串对应的数字之和。由于字符串长度可能达到 $2 \times 10^5$，直接暴力计算不可行。大多数题解通过拆解每个字符的贡献，利用差分和前缀和优化计算，最终通过高精度处理进位问题。

### 所选高分题解

#### 题解1：gesong (5星)
**关键亮点**：
- 通过拆解每个字符的贡献，利用差分数组优化计算。
- 使用高精度处理进位，代码简洁高效。

**核心代码**：
```cpp
for (int i=1;i<=n;i++){
    int x=n-i+1,y=(s[i]-48)*i;
    a[1]+=y,a[x+1]-=y;
}
for (int i=1;i<=n;i++) a[i]+=a[i-1];
```
**核心思想**：通过差分数组记录每个字符的贡献，最后通过前缀和还原结果，并处理进位。

#### 题解2：Moya_Rao (4星)
**关键亮点**：
- 从位数入手，分析每个字符在不同位数的贡献。
- 通过高精度计算最终结果，思路清晰。

**核心代码**：
```cpp
for(int i=1;i<=n;i++){
    a[i]=a[i-1]+(s[i]-'0')*i;
}
for(int i=n;i>=1;i--){
    a[i-1]+=a[i]/10;
    a[i]%=10;
}
```
**核心思想**：通过前缀和计算每个字符的贡献，最后处理进位并输出结果。

#### 题解3：Po7ed (4星)
**关键亮点**：
- 通过分析每个字符的贡献，利用差分数组优化计算。
- 使用高精度处理进位，代码简洁。

**核心代码**：
```cpp
for(int i=0;i<n;i++) {
    val=(i+1)*(s[i]-'0');
    num[1]+=val;
    num[n-i+1]-=val;
}
```
**核心思想**：通过差分数组记录每个字符的贡献，最后通过前缀和还原结果，并处理进位。

### 最优关键思路或技巧
1. **拆解贡献**：通过分析每个字符在不同位数的贡献，将问题转化为对每个字符的贡献进行累加。
2. **差分数组**：利用差分数组记录每个字符的贡献，最后通过前缀和还原结果，优化计算复杂度。
3. **高精度处理**：由于结果可能非常大，使用高精度处理进位问题，确保结果的准确性。

### 可拓展之处
- 类似问题：计算字符串中所有子串的某种属性之和，如子串的哈希值、子串的某种统计特征等。
- 类似算法套路：差分数组、前缀和、高精度计算等。

### 推荐相似题目
1. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)
2. [P3368 【模板】树状数组 2](https://www.luogu.com.cn/problem/P3368)
3. [P3382 【模板】线段树 1](https://www.luogu.com.cn/problem/P3382)

### 个人心得摘录
- **调试经历**：在处理高精度时，容易忽略进位问题，导致结果错误。通过逐步调试，确保每个步骤的正确性。
- **顿悟感想**：通过拆解每个字符的贡献，将复杂问题转化为简单的数学计算，大大简化了问题的复杂度。

---
处理用时：40.36秒
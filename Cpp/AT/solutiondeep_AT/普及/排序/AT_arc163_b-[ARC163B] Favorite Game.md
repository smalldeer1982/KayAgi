# 题目信息

# [ARC163B] Favorite Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc163/tasks/arc163_b

長さ $ N $ の整数列 $ A=(A_1,A_2,\dots,A_N) $ が与えられます。あなたは、以下の操作を好きな回数（$ 0 $ 回でもよい）行うことが出来ます。

- $ 1\ \le\ i\ \le\ N $ を満たす整数 $ i $ を $ 1 $ 個選び、$ A_i $ を $ 1 $ 増やすか $ 1 $ 減らす。
 
あなたの目標は、$ A_1\ \le\ A_i\ \le\ A_2 $ を満たす整数 $ i(3\ \le\ i\ \le\ N) $ の個数を $ M $ 個以上にすることです。目標を達成するために必要な最小の操作回数を求めてください。

## 说明/提示

### 制約

- $ 3\ \le\ N\ \le\ 2\ \times\ 10^5 $
- $ 1\ \le\ M\ \le\ N-2 $
- $ 1\ \le\ A_i\ \le\ 10^9 $
 
### Sample Explanation 1

以下のように操作を行うことで $ A_1\ \le\ A_i\ \le\ A_2 $ を満たす整数 $ i(3\ \le\ i\ \le\ N) $ の個数を $ 1 $ 個以上に出来ます。 - $ i=3 $ を選び、$ A_i $ を $ 1 $ 減らす。 - $ i=2 $ を選び、$ A_i $ を $ 1 $ 増やす。 $ 1 $ 回以下の操作回数で目標を達成することは出来ないため、答えは $ 2 $ です。

### Sample Explanation 2

始めから目標を達成していることもあります。

## 样例 #1

### 输入

```
3 1

2 3 5```

### 输出

```
2```

## 样例 #2

### 输入

```
5 2

1 4 2 3 5```

### 输出

```
0```

## 样例 #3

### 输入

```
8 5

15 59 64 96 31 17 88 9```

### 输出

```
35```

# AI分析结果

### 题目内容中文重写
## [ARC163B] 最喜欢的游戏

### 题目描述
[problemUrl]: https://atcoder.jp/contests/arc163/tasks/arc163_b

给定一个长度为 $N$ 的整数序列 $A=(A_1,A_2,\dots,A_N)$。你可以进行任意次数（可以为 0 次）以下操作：
- 选择一个满足 $1 \le i \le N$ 的整数 $i$，将 $A_i$ 加 1 或减 1。

你的目标是使满足 $A_1 \le A_i \le A_2$ 的整数 $i$（$3 \le i \le N$）的数量不少于 $M$ 个。请求出达成该目标所需的最小操作次数。

### 说明/提示
#### 限制条件
- $3 \le N \le 2 \times 10^5$
- $1 \le M \le N - 2$
- $1 \le A_i \le 10^9$

#### 样例解释 1
通过以下操作可以使满足 $A_1 \le A_i \le A_2$ 的整数 $i$（$3 \le i \le N$）的数量不少于 1 个：
- 选择 $i = 3$，将 $A_i$ 减 1。
- 选择 $i = 2$，将 $A_i$ 加 1。
由于无法用 1 次或更少的操作次数达成目标，所以答案是 2。

#### 样例解释 2
有时一开始就已经达成了目标。

### 样例 #1
#### 输入
```
3 1
2 3 5
```
#### 输出
```
2
```

### 样例 #2
#### 输入
```
5 2
1 4 2 3 5
```
#### 输出
```
0
```

### 样例 #3
#### 输入
```
8 5
15 59 64 96 31 17 88 9
```
#### 输出
```
35
```

### 综合分析与结论
这些题解的核心思路基本一致，都采用了贪心算法。关键在于发现只改变 $A_1$ 和 $A_2$ 的值是最优的策略，原因是改变 $A_1$ 和 $A_2$ 可能使更多的 $A_i$（$3 \le i \le N$）进入区间 $[A_1, A_2]$，而修改其他元素只能使一个数满足要求。算法要点是先对 $A_3$ 到 $A_N$ 进行排序，然后枚举长度为 $M$ 的连续子区间，计算将 $A_1$ 调整为小于等于区间左端点、$A_2$ 调整为大于等于区间右端点所需的最小操作次数。

### 题解评分与选择
- **Magus（赞：8）**：4 星。思路清晰，代码简洁，对关键结论“改变 $A_1$ 和 $A_2$ 最优”有一定解释。
- **fengxiaoyi（赞：3）**：4 星。不仅思路清晰，还给出了结论的证明和图示，有助于理解。
- **引领天下（赞：0）**：4 星。对贪心策略的原因解释详细，代码规范。

### 所选题解
- **Magus**：4 星。亮点在于简洁明了地阐述了核心思路，代码实现简单直接。
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n,m,qwq,awa=1e18,arr[1919810];
signed main()
{
    cin>>n>>m;
    for(int i=0;i<n;i++)
    {
        cin>>arr[i];
    }
    stable_sort(arr+2,arr+n);
    for(int i=2;i<=n-m;i++)
    {
        awa=min(awa,max(0ll,arr[0]-arr[i])+max(0ll,arr[i+m-1]-arr[1]));
    }
    cout<<awa;
    return 0;
}
```
核心实现思想：先读取输入，对 $A_3$ 到 $A_N$ 排序，然后枚举长度为 $M$ 的区间，计算每次调整 $A_1$ 和 $A_2$ 的操作次数，取最小值。

- **fengxiaoyi**：4 星。亮点是对结论进行了详细证明，并配有图示，便于理解。
```c++
#include<bits/stdc++.h>
using namespace std;
int n,m,a1,a2,b[200010],ans=0x7fffffff;
bool cmp(int x,int y){
    return x<y;
}
int main(){
    scanf("%d%d",&n,&m);
    scanf("%d%d",&a1,&a2);//A1,A2分开读
    n-=2;
    for(int i=1;i<=n;i++) scanf("%d",&b[i]);
    sort(b+1,b+n+1,cmp);
    for(int i=1;i<=n-m+1;i++) ans=min(ans,max(a1-b[i],0)+max(b[i+m-1]-a2,0));
    printf("%d",ans);
    return 0;
}
```
核心实现思想：读取输入，对 $A_3$ 到 $A_N$ 排序，枚举长度为 $M$ 的区间，计算调整 $A_1$ 和 $A_2$ 的最小操作次数。

- **引领天下**：4 星。亮点是对贪心策略的原因解释详细，代码规范。
```cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long
int n,m,ans=1ll<<60,a[200005];
signed main(){
    ios::sync_with_stdio(false);cin.tie(0),cout.tie(0);
    cin>>n>>m;
    for(int i=1;i<=n;i++)cin>>a[i];
    sort(a+3,a+n+1);
    for(int i=3;i<=n-m+1;i++)ans=min(ans,max(a[1]-a[i],0ll)+max(a[i+m-1]-a[2],0ll));
    cout<<ans;
    return 0;
}
```
核心实现思想：读取输入，对 $A_3$ 到 $A_N$ 排序，枚举长度为 $M$ 的区间，计算调整 $A_1$ 和 $A_2$ 的最小操作次数。

### 最优关键思路或技巧
- **贪心策略**：只改变 $A_1$ 和 $A_2$ 的值，因为这样可能使更多元素进入目标区间。
- **排序与枚举**：对 $A_3$ 到 $A_N$ 排序后，枚举长度为 $M$ 的连续子区间，计算最小操作次数。

### 可拓展之处
同类型题目通常涉及区间调整和贪心策略，例如在一些数组元素调整问题中，需要通过改变某些关键元素的值来满足特定条件。类似算法套路包括先分析问题的最优策略，然后通过排序、枚举等方法找到最优解。

### 推荐洛谷题目
1. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
3. [P1803 凌乱的yyy / 线段覆盖](https://www.luogu.com.cn/problem/P1803)

### 个人心得摘录与总结
- **beifa**：提到“十年 OI 一场空，不开 long long 见祖宗”，强调了在处理可能出现大数值的问题时，要注意数据类型的选择，避免因数据溢出导致错误。

---
处理用时：49.38秒
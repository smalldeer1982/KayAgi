# 题目信息

# [ARC158A] +3 +5 +7

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc158/tasks/arc158_a

整数 $ x_1,\ x_2,\ x_3 $ が与えられます．あなたはこれらの整数に対して，次の操作を何度でも行うことができます（$ 0 $ 回でもよい）：

- $ (1,2,3) $ の順列 $ (i,j,k) $ をひとつ選ぶ．つまり $ 1\leq\ i,j,k\leq\ 3 $ であるような整数の組 $ (i,j,k) $ であって $ i\neq\ j,\ i\neq\ k,\ j\neq\ k $ となるものを選ぶ．
- その後，$ x_i $ を $ x_i+3 $，$ x_j $ を $ x_j+5 $，$ x_k $ を $ x_k+7 $ で同時に置き換える．
 
あなたの目的は，$ x_1=x_2=x_3 $ が成り立つようにすることです．このことが可能であるか否かを判定してください．可能な場合には，それを達成するための最小の操作回数を出力してください．

$ T $ 個のテストケースが与えられるので，それぞれについて答えを求めてください．

## 说明/提示

### 制約

- $ 1\leq\ T\leq\ 2\times\ 10^5 $
- $ 1\leq\ x_1,\ x_2,\ x_3\ \leq\ 10^9 $
 
### Sample Explanation 1

ひとつめのテストケースについて，次のように操作を行うことで $ x_1=x_2=x_3 $ が成り立つようにできます． - $ (i,j,k)\ =\ (3,2,1) $ として操作を行う．$ (x_1,x_2,x_3) $ は $ (9,13,11) $ に置き換わる． - $ (i,j,k)\ =\ (2,3,1) $ として操作を行う．$ (x_1,x_2,x_3) $ は $ (16,16,16) $ に置き換わる．

## 样例 #1

### 输入

```
4

2 8 8

1 1 1

5 5 10

10 100 1000```

### 输出

```
2

0

-1

315```

# AI分析结果

### 题目内容重写

#### [ARC158A] +3 +5 +7

#### 题目描述

给定三个整数 $x_1, x_2, x_3$。你可以对它们进行任意次数的操作（包括零次）：

- 选择一个 $(1,2,3)$ 的排列 $(i,j,k)$，即 $1 \leq i,j,k \leq 3$ 且 $i \neq j, i \neq k, j \neq k$。
- 然后，将 $x_i$ 替换为 $x_i+3$，$x_j$ 替换为 $x_j+5$，$x_k$ 替换为 $x_k+7$。

你的目标是使 $x_1 = x_2 = x_3$。如果可能，请输出达成目标所需的最小操作次数；否则输出 $-1$。

给定 $T$ 个测试用例，请对每个测试用例输出答案。

#### 说明/提示

##### 约束

- $1 \leq T \leq 2 \times 10^5$
- $1 \leq x_1, x_2, x_3 \leq 10^9$

##### 样例解释 1

对于第一个测试用例，可以通过以下操作使 $x_1 = x_2 = x_3$：

- 选择 $(i,j,k) = (3,2,1)$，$(x_1,x_2,x_3)$ 变为 $(9,13,11)$。
- 选择 $(i,j,k) = (2,3,1)$，$(x_1,x_2,x_3)$ 变为 $(16,16,16)$。

#### 样例 #1

##### 输入

```
4

2 8 8

1 1 1

5 5 10

10 100 1000
```

##### 输出

```
2

0

-1

315
```

### 题解综合分析与结论

#### 思路总结

所有题解的核心思路都是通过观察操作的性质，将问题转化为判断三个数是否可以通过某种变换达到相等，并计算最小操作次数。具体来说：

1. **操作性质**：每次操作相当于将三个数分别加上 $3, 5, 7$，这可以转化为将三个数分别加上 $-2, 0, +2$。
2. **必要条件**：
   - 三个数的和必须是 $3$ 的倍数，因为最终三个数相等时，它们的和必须是 $3$ 的倍数。
   - 三个数的奇偶性必须相同，因为每次操作不会改变三个数的奇偶性。
3. **计算操作次数**：通过计算三个数与它们的平均值的差值，确定最小操作次数。

#### 最优关键思路

- **操作转化**：将 $+3, +5, +7$ 转化为 $-2, 0, +2$，简化问题。
- **必要条件**：通过判断三个数的和是否为 $3$ 的倍数以及它们的奇偶性是否相同，快速排除无解情况。
- **操作次数计算**：通过计算三个数与平均值的差值，确定最小操作次数。

#### 可拓展之处

- **类似问题**：可以将问题扩展到更多的数或不同的操作，只要操作的性质可以转化为某种固定的变换，就可以使用类似的思路。
- **算法优化**：在处理大量测试用例时，可以通过预处理或并行计算来优化性能。

#### 推荐题目

1. [P1008 三连击](https://www.luogu.com.cn/problem/P1008)
2. [P1029 最大公约数和最小公倍数](https://www.luogu.com.cn/problem/P1029)
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036)

### 所选高星题解

#### 题解1：Amberhart (4星)

**关键亮点**：
- 详细解释了操作的性质和必要条件的推导过程。
- 代码简洁，逻辑清晰，易于理解。

**个人心得**：
- "最主要的就是：要开 `long long` ！！" —— 提醒了数据范围的重要性。

**核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
long long n,a[4],x1,x2,x3,v,ans;
int main(){
	cin>>n;
	for(long long i=1;i<=n;i++){
		cin>>a[1]>>a[2]>>a[3];
		sort(a+1,a+1+3);
		x1=a[1],x2=a[2],x3=a[3];
		if((x1+x2+x3)%3!=0||(x2-x1)%2!=0||(x3-x2)%2!=0){
			cout<<"-1\n";
			continue;
		}
		v=(x1+x2+x3)/3;
		ans=max((x3-v)/2,(v-x1)/2);
		cout<<ans<<"\n";
	}
	return 0;
}
```

#### 题解2：WoodReal12 (4星)

**关键亮点**：
- 通过排序简化问题，明确了解题思路。
- 代码结构清晰，注释详细。

**核心代码**：
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

int main(){
    int t;
    cin>>t;
    for(int i=1;i<=t;i++){
        long long a,b,c;
        cin>>a>>b>>c;
        if(a>b) swap(a,b);
		if(a>c) swap(a,c);
		if(b>c) swap(b,c);
		if((a+b+c)%3!=0||a%2!=b%2||b%2!=c%2){
		    cout<<-1<<endl;
		    continue ;
		}
		long long d=(a+b+c)/3;
		cout<<max((c-d)/2,(d-a)/2)<<endl;
    }
    return 0;
}
```

#### 题解3：chenyuchenghsefz (4星)

**关键亮点**：
- 通过排序和平均值的计算，简化了问题的复杂度。
- 代码简洁，逻辑清晰。

**核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int main()
{
	int t;
	cin>>t;
	for(int i=1;i<=t;i++)
	{
		long long a,b,c;
		scanf("%lld %lld %lld",&a,&b,&c);
		if(a>b)
		swap(a,b);
		if(a>c)
		swap(a,c);
		if(b>c)
		swap(b,c);
		if(a%2!=b%2||b%2!=c%2||c%2!=a%2||(a+b+c)%3!=0)
		{
			printf("-1\n");
			continue;
		}
		long long d=(a+b+c)/3,ans;
		ans=max((c-d)/2,(d-a)/2);
		printf("%lld\n",ans);
	}
	return 0;
}
```

### 通用建议与扩展思路

如果所有题解均未达到4星，建议从以下方面改进：

1. **详细解释**：增加对操作性质和必要条件的详细推导过程，帮助读者更好地理解解题思路。
2. **代码优化**：优化代码结构，增加注释，提高代码的可读性和可维护性。
3. **性能优化**：在处理大量测试用例时，考虑使用更高效的算法或并行计算来优化性能。

### 关键实现代码

**核心实现思想**：
- 通过排序简化问题，计算三个数的平均值，判断是否满足必要条件，最后计算最小操作次数。

**完整核心代码片段**：
```cpp
#include <bits/stdc++.h>
using namespace std;
long long n,a[4],x1,x2,x3,v,ans;
int main(){
	cin>>n;
	for(long long i=1;i<=n;i++){
		cin>>a[1]>>a[2]>>a[3];
		sort(a+1,a+1+3);
		x1=a[1],x2=a[2],x3=a[3];
		if((x1+x2+x3)%3!=0||(x2-x1)%2!=0||(x3-x2)%2!=0){
			cout<<"-1\n";
			continue;
		}
		v=(x1+x2+x3)/3;
		ans=max((x3-v)/2,(v-x1)/2);
		cout<<ans<<"\n";
	}
	return 0;
}
```

---
处理用时：68.46秒
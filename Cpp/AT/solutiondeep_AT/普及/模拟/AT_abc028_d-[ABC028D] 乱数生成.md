# 题目信息

# [ABC028D] 乱数生成

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc028/tasks/abc028_d

$ 2 $ つの整数 $ N $、$ K $ が与えられます。

$ 1 $ 以上 $ N $ 以下の整数のなかからどれか $ 1 $ つ、等確率に選ぶ機械を考えます。

その機械を $ 3 $ 回動かした時、選ばれた $ 3 $ つの数の中央値が $ K $ となる確率を求めてください。

## 说明/提示

### Sample Explanation 1

中央値が $ 2 $ となるのは、( $ 1 $ 回目の出力, $ 2 $ 回目の出力, $ 3 $ 回目の出力) が - (1, 2, 3) - (1, 3, 2) - (2, 1, 3) - (2, 3, 1) - (3, 1, 2) - (3, 2, 1) - (1, 2, 2) - (2, 1, 2) - (2, 2, 1) - (3, 2, 2) - (2, 3, 2) - (2, 2, 3) - (2, 2, 2) となる場合で、このいずれかが出る確率は $ 13/27\ =\ 0.481481481... $ です

## 样例 #1

### 输入

```
3 2```

### 输出

```
0.48148148148148148148```

## 样例 #2

### 输入

```
3 1```

### 输出

```
0.25925925925925925926```

## 样例 #3

### 输入

```
765 573```

### 输出

```
0.00147697396984624371```

# AI分析结果

### 题目中文重写
【题目内容】
# [ABC028D] 随机数生成

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc028/tasks/abc028_d

给定两个整数 $N$ 和 $K$。

考虑这样一个机器，它会从 $1$ 到 $N$（包含 $1$ 和 $N$）的整数中等概率地选择一个数。

当该机器运行 $3$ 次时，求选出的 $3$ 个数的中位数为 $K$ 的概率。

## 说明/提示

### 样例解释 1
中位数为 $2$ 的情况，以（第一次输出，第二次输出，第三次输出）的形式表示，有以下情况符合要求：
- (1, 2, 3)
- (1, 3, 2)
- (2, 1, 3)
- (2, 3, 1)
- (3, 1, 2)
- (3, 2, 1)
- (1, 2, 2)
- (2, 1, 2)
- (2, 2, 1)
- (3, 2, 2)
- (2, 3, 2)
- (2, 2, 3)
- (2, 2, 2)

出现上述任意一种情况的概率是 $13/27 = 0.481481481...$

## 样例 #1

### 输入
```
3 2
```

### 输出
```
0.48148148148148148148
```

## 样例 #2

### 输入
```
3 1
```

### 输出
```
0.25925925925925925926
```

## 样例 #3

### 输入
```
765 573
```

### 输出
```
0.00147697396984624371
```

### 综合分析与结论
这些题解的核心思路都是通过分类讨论不同的选数情况，计算出每种情况的概率，最后将所有符合中位数为 $K$ 的情况的概率相加。

#### 思路对比
- **一座城·守一人**：用树状图模拟三次取数过程，分第一次取数比 $k$ 小、等于 $k$、比 $k$ 大三种情况分别计算概率。
- **BurningEnderDragon**：将符合中位数为 $K$ 的情况分为四种，分别计算概率后求和。
- **Mine_King**：按照 $a$ 和 $b$ 与 $k$ 的关系分类讨论，计算每种情况的概率并求和。
- **diqiuyi**：按第一次选数 $x$ 与 $k$ 的大小关系分类，再对第二次、第三次选数进行讨论，计算取法数量，进而得到概率。
- **q_sum**：根据 $a$、$b$ 与 $k$ 的关系分为三种情况，计算每种情况的样本点数，最后得到概率。
- **Eason_AC**：根据所选三个数中 $k$ 的个数分类讨论，计算每种情况的数量，进而得到概率。
- **TerryGong**：通过模拟生成器，按每个数与 $k$ 的大小关系分类讨论，最后计算概率。

#### 算法要点
- 都运用了分类讨论的思想，将所有可能的情况进行细分。
- 计算每种情况的概率时，考虑了数的排列组合情况。

#### 解决难点
- 准确分类讨论各种情况，避免遗漏或重复。
- 处理数的排列组合，计算每种情况的不同排列方式。
- 由于题目对精度要求较高，需要使用 `long double` 类型来保证精度。

### 所选题解
- **BurningEnderDragon（5星）**
    - **关键亮点**：思路清晰，将符合条件的情况明确分为四种，每种情况的概率计算过程详细，代码简洁易读。
    - **核心代码**：
```cpp
#include <iostream>
#include <iomanip>
using namespace std;
double N,K;
int main()
{
    cin>>N>>K;
    cout<<fixed<<setprecision(20)<<(1+(N-1)*3+(K-1)*(N-K)*6)/(N*N*N)<<endl;
    return 0;
}
```
核心实现思想：先根据四种情况分别计算概率，再将它们相加，最后除以总情况数 $N^3$ 得到最终概率。

- **Mine_King（4星）**
    - **关键亮点**：分类讨论详细，对每种情况的概率计算解释清晰，强调了排列组合的重要性。
    - **核心思路**：按照 $a$ 和 $b$ 与 $k$ 的关系分为三种情况，分别计算每种情况的概率，最后相加得到总概率。
    - **核心代码**：
```cpp
// 由于原答案未提供完整代码，根据思路补充
#include <iostream>
#include <iomanip>
using namespace std;
long double n, k;
int main() {
    cin >> n >> k;
    long double ans = ((k - 1) * 1 * (n - k) * 6 + (n - 1) * 3 + 1) / (n * n * n);
    cout << fixed << setprecision(20) << ans << endl;
    return 0;
}
```

### 最优关键思路或技巧
- **分类讨论**：将所有可能的情况进行合理分类，分别计算每种情况的概率，最后求和。
- **排列组合**：考虑数的不同排列方式，准确计算每种情况的概率。
- **精度处理**：使用 `long double` 类型来保证计算结果的精度。

### 可拓展之处
同类型题可能会改变机器运行的次数、数的范围或中位数的计算方式等。解题时依然可以采用分类讨论的思想，结合排列组合的知识进行求解。

### 推荐题目
- [P1297 单选错位](https://www.luogu.com.cn/problem/P1297)
- [P1850 换教室](https://www.luogu.com.cn/problem/P1850)
- [P3232 [HNOI2013]游走](https://www.luogu.com.cn/problem/P3232)

### 个人心得摘录与总结
- **一座城·守一人**：在NOIp复赛前写题解希望能RP++，体现了对比赛的期待。
- **q_sum**：提到计算时必须用 `/(n*n*n)` 而不是 `/n/n/n`，否则会WA，这是一个容易忽略的精度问题，提醒我们在计算时要注意运算符的使用。 

---
处理用时：38.99秒
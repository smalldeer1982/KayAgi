# 题目信息

# [ABC037C] 総和

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc037/tasks/abc037_c

長さ $ N $ の数列 $ \{a_i\} $ と$ 1 $ 以上 $ N $ 以下の整数 $ K $ が与えられます。 この数列には長さ $ K $ の連続する部分列が $ N-K+1 $ 個あります。これらのそれぞれ部分列に含まれる値の合計の総和を求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ K\ \leq\ N\ \leq\ 10^5 $
- $ 0\ \leq\ a_i\ \leq\ 10^8 $
- $ a_i $ は整数である。

### 部分点

- 50 点分のテストケースでは、 $ N\ \leq\ 10^3 $ である。

### Sample Explanation 1

$ (1+2+4)+(2+4+8)+(4+8+16)=49 $ なので、答えは $ 49 $ です。

### Sample Explanation 2

オーバーフローに注意してください。

## 样例 #1

### 输入

```
5 3

1 2 4 8 16```

### 输出

```
49```

## 样例 #2

### 输入

```
20 10

100000000 100000000 98667799 100000000 100000000 100000000 100000000 99986657 100000000 100000000 100000000 100000000 100000000 98995577 100000000 100000000 99999876 100000000 100000000 99999999```

### 输出

```
10988865195```

# AI分析结果

### 题目翻译
# [ABC037C] 总和

## 题目描述
[problemUrl]: https://atcoder.jp/contests/abc037/tasks/abc037_c

给定一个长度为 $ N $ 的数列 $ \{a_i\} $ 以及一个 $ 1 $ 到 $ N $ 之间（包含 $ 1 $ 和 $ N $）的整数 $ K $。这个数列有 $ N - K + 1 $ 个长度为 $ K $ 的连续子数列。请计算这些连续子数列中所有元素值的总和。

## 说明/提示
### 限制条件
- $ 1 \leq K \leq N \leq 10^5 $
- $ 0 \leq a_i \leq 10^8 $
- $ a_i $ 为整数。

### 部分分
- 在占 50 分的测试用例中，$ N \leq 10^3 $。

### 示例解释 1
因为 $ (1 + 2 + 4) + (2 + 4 + 8) + (4 + 8 + 16) = 49 $，所以答案是 $ 49 $。

### 示例解释 2
请注意溢出问题。

## 样例 #1
### 输入
```
5 3
1 2 4 8 16
```
### 输出
```
49
```

## 样例 #2
### 输入
```
20 10
100000000 100000000 98667799 100000000 100000000 100000000 100000000 99986657 100000000 100000000 100000000 100000000 100000000 98995577 100000000 100000000 99999876 100000000 100000000 99999999
```
### 输出
```
10988865195
```

### 综合分析与结论
| 作者 | 思路 | 算法要点 | 解决难点 | 评分 |
| --- | --- | --- | --- | --- |
| wdcxz | 直接模拟，枚举所有长度为 $ K $ 的连续子数列并求和 | 双重循环，外层循环控制子数列的起始位置，内层循环累加子数列元素 | 数据范围较大，使用 `long long` 避免溢出 | 3星 |
| da32s1da | 计算每个元素被加的次数，通过公式计算总和 | 利用 `min(min(i,n - i + 1),min(m,n - m + 1))` 计算元素被加次数 | 推导元素被加次数的公式 | 3星 |
| kingder_man | 利用前缀和计算区间和 | 先预处理前缀和数组，再通过前缀和相减得到区间和 | 前缀和数组的初始化和使用 | 4星 |
| LeeChain | 使用线段树进行区间求和 | 构建线段树，通过 `query` 函数查询区间和 | 线段树的构建和查询操作 | 3星 |
| cq_loves_Capoo | 使用尺取法 | 先计算第一段的和，然后通过加减元素更新每段的和 | 尺取法的实现和边界处理 | 3星 |
| liulif | 类似尺取法，先计算前 $ K - 1 $ 项和，再依次更新连续 $ K $ 项和 | 边输入边计算，更新连续 $ K $ 项和并累加 | 避免判断，直接计算前 $ K - 1 $ 项和 | 3星 |
| Violet9567 | 利用数论，通过前 $ i $ 项和与前 $ i - K $ 项和的差计算区间和 | 计算前缀和，利用公式 `ans = sum[i] - sum[i - K]` 计算区间和 | 前缀和的计算和公式的使用 | 3星 |
| 迷残云 | 使用树状数组进行区间查询 | 实现树状数组的单点更新和区间查询功能 | 树状数组的实现和使用 | 3星 |
| wushuang0828 | 类似尺取法，先计算前 $ K $ 个数的和，再依次更新和 | 边输入边更新和，累加每段的和 | 理解和的更新过程 | 3星 |
| 珅肐 | 利用前缀和计算区间和 | 预处理前缀和数组，通过前缀和相减计算区间和并累加 | 前缀和的计算和使用 | 3星 |
| Hola_chen | 直接模拟，通过 `while` 循环取 $ K $ 的区间并求和 | 双重循环，外层控制子数列起始位置，内层累加子数列元素 | 防止加到空的数据 | 3星 |

### 所选题解
- **作者：kingder_man（4星）**
    - **关键亮点**：思路清晰，详细介绍了前缀和的概念和使用方法，代码可读性高。
    - **个人心得**：作者提到因为没初始化前缀和数组 WA 了 3 次，提醒读者要注意数组的初始化。
```cpp
#include<bits/stdc++.h>
using namespace std;
long long a[100010],num[100010]={0};
long long n,k,sum=0;
int main()
{
    cin>>n>>k;
    for(int  i=1;i<=n;i++)
    {
        cin>>a[i];
        num[i]=num[i-1]+a[i];
    }
    for(int i=k;i<=n;i++)
    {
        sum+=num[i]-num[i-k];
    }
    cout<<sum<<endl;
    return 0;
}
```
**核心实现思想**：先通过 `for` 循环计算前缀和数组 `num`，然后通过 `for` 循环计算每个长度为 $ K $ 的连续子数列的和，即 `num[i] - num[i - k]`，并累加到 `sum` 中。

### 最优关键思路或技巧
- **前缀和**：通过预处理前缀和数组，可以在 $ O(1) $ 时间内计算任意区间的和，避免了每次都重新计算区间和，降低了时间复杂度。
- **尺取法**：对于连续子数列问题，尺取法可以通过移动左右指针，在 $ O(n) $ 时间内解决问题，避免了暴力枚举的 $ O(n^2) $ 时间复杂度。

### 可拓展之处
同类型题或类似算法套路：
- 区间查询问题：可以使用前缀和、线段树、树状数组等数据结构解决。
- 连续子数列问题：可以使用尺取法、动态规划等算法解决。

### 推荐洛谷题目
- P1147 连续自然数和
- P1714 切蛋糕
- P2671 求和

### 个人心得总结
- kingder_man：要注意数组的初始化，否则可能会导致 WA。

---
处理用时：41.68秒
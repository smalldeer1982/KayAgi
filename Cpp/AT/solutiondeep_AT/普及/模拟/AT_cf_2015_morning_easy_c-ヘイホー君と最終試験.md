# 题目信息

# ヘイホー君と最終試験

## 题目描述

[problemUrl]: https://atcoder.jp/contests/code-festival-2015-morning-easy/tasks/cf_2015_morning_easy_c

Codefes大学の競技プログラミングの授業では、成績評価のために、$ N $ 回の試験を行うことにしています。 各試験での成績は、$ 0 $ 以上 $ M $ 以下の整数値です。 $ N $ 個の試験成績のうち、上位 $ K $ 個の平均が $ R $ 点以上であれば、めでたく単位が認定されます。 上位 $ K $ 個の平均が $ R $ 点未満の場合には不合格となり、単位は認定されません。

$ N-1 $ 回の試験を終えたヘイホー君は、最終試験に臨もうとしています。 最終試験を除く $ N-1 $ 回の試験におけるヘイホー君の成績は、それぞれ $ S_1 $, $ S_2 $, …, $ S_{N-1} $ 点でした。 ヘイホー君は、最終試験で何点以上取れば単位が認定されるでしょうか？

## 说明/提示

### Sample Explanation 1

ヘイホー君が最終試験で $ 45 $ 点を取った場合、上位 $ 3 $ 個の平均は $ (86+49+45)/3=60 $ となり、単位が認定されます。 もちろん、$ 46 $ 点以上取っても単位は認定されます。 一方、$ 44 $ 点以下の場合には単位が認定されません。

### Sample Explanation 2

最終試験で $ 0 $ 点でも単位が認定されます。

### Sample Explanation 3

残念ながら、最終試験が満点でも単位は認定されません。

### Sample Explanation 4

大きな数が入力されることもあります。オーバーフローに注意しましょう。

## 样例 #1

### 输入

```
5 3 100 60

86

23

49

39```

### 输出

```
45```

## 样例 #2

### 输入

```
5 3 100 60

92

100

95

99```

### 输出

```
0```

## 样例 #3

### 输入

```
5 3 100 60

18

42

29

31```

### 输出

```
-1```

## 样例 #4

### 输入

```
13 10 1000000000 645245296

492014535

611893452

729291030

392019922

293849201

474839528

702912832

341845861

102495671

908590572

812912432

129855439```

### 输出

```
986132796```

# AI分析结果

### 题目中文重写
# 嘿吼君与期末考试

## 题目描述
[problemUrl]: https://atcoder.jp/contests/code-festival-2015-morning-easy/tasks/cf_2015_morning_easy_c

Codefes大学的竞技编程课程中，为了进行成绩评估，决定进行 $N$ 次考试。每次考试的成绩是 $0$ 以上 $M$ 以下的整数。在 $N$ 次考试成绩中，前 $K$ 名的平均分达到 $R$ 分以上，就可以顺利获得学分。如果前 $K$ 名的平均分低于 $R$ 分，则判定为不合格，无法获得学分。

已经完成 $N - 1$ 次考试的嘿吼君即将迎来期末考试。除期末考试外，嘿吼君的 $N - 1$ 次考试成绩分别为 $S_1$，$S_2$，…，$S_{N - 1}$ 分。嘿吼君在期末考试中至少要得多少分才能获得学分呢？

## 说明/提示
### 样例解释 1
嘿吼君在期末考试中取得 $45$ 分时，前 $3$ 名的平均分是 $(86 + 49 + 45) / 3 = 60$，可以获得学分。当然，取得 $46$ 分以上也能获得学分。另一方面，如果是 $44$ 分以下，则无法获得学分。

### 样例解释 2
即使期末考试得 $0$ 分也能获得学分。

### 样例解释 3
遗憾的是，即使期末考试满分也无法获得学分。

### 样例解释 4
可能会输入较大的数字。请注意溢出问题。

## 样例 #1
### 输入
```
5 3 100 60
86
23
49
39
```
### 输出
```
45
```

## 样例 #2
### 输入
```
5 3 100 60
92
100
95
99
```
### 输出
```
0
```

## 样例 #3
### 输入
```
5 3 100 60
18
42
29
31
```
### 输出
```
-1
```

## 样例 #4
### 输入
```
13 10 1000000000 645245296
492014535
611893452
729291030
392019922
293849201
474839528
702912832
341845861
102495671
908590572
812912432
129855439
```
### 输出
```
986132796
```

### 综合分析与结论
这些题解的核心思路都是模拟考试成绩的计算过程，先对已有的 $N - 1$ 次考试成绩进行排序，然后根据前 $K$ 名成绩的总分与录取总分（$R\times K$）的关系分情况讨论，判断是否需要参加期末考试以及期末考试至少需要多少分。
- **思路对比**：大部分题解思路相似，都是先排序，再计算前 $K$ 名成绩的总分，然后根据总分与录取总分的关系分情况讨论。部分题解在计算前 $K$ 名成绩时，有的计算前 $K$ 个成绩的和，有的计算前 $K - 1$ 个成绩的和。
- **算法要点**：排序是关键步骤，通过排序可以方便地找出前 $K$ 名成绩。同时，为了避免小数计算，都采用将平均分转化为总分（$R\times K$）的方式进行比较。
- **解决难点**：主要难点在于分情况讨论，需要考虑是否已经达到录取标准、期末考试满分是否能达到录取标准等情况。同时，要注意数据范围，避免溢出，所以很多题解都使用了 `long long` 类型。

### 评分较高的题解
- **作者：ringlin (赞：5)，4星**
    - **关键亮点**：思路清晰，代码注释详细，对每一步的操作都有明确的解释，便于理解。
    - **个人心得**：无
- **作者：nbtngnllmd (赞：3)，4星**
    - **关键亮点**：对题意和情况分析详细，代码实现思路清晰，虽然代码有小瑕疵（`sum` 未定义），但整体思路正确。
    - **个人心得**：无
- **作者：InversionShadow (赞：0)，4星**
    - **关键亮点**：思路简洁明了，代码实现简单，参考了其他优秀题解，并且对关键步骤有注释。
    - **个人心得**：无

### 重点代码
#### 作者：ringlin
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n,ans=0,k,m,r,cnt=1e9,a[100005];
bool cmp(int a,int b){
	return a>b;
}
signed main(){
	std::ios::sync_with_stdio;//优化
	cin>>n>>k>>m>>r;
	for(int i=1;i<=n-1;i++){
		cin>>a[i];
	}
	sort(a+1,a+n,cmp);
	for(int i=1;i<=k;i++){
		ans+=a[i];//前K次考试成绩的总分
		cnt=min(cnt,a[i]);//存的最小值
	}
	int g=r*k;//计算录取总分
	if(ans>=g){
		cout<<0<<endl;
		return 0;
	}//如果当前分数>录取分数，就不用参加期末考试
	int l=m-cnt;//如果参加期末考试，需要减去最小的一次考试成绩
	if(l+ans<g){//如果期末考试满分都比录取总分小，那么就输出-1；
		cout<<-1<<endl;
		return 0; 
	}
	else{//否则输出期末考试成绩
		cout<<g-ans+cnt<<endl;
		return 0;
	} 
}
```
**核心实现思想**：先对 $N - 1$ 次考试成绩排序，计算前 $K$ 名成绩的总分和最小值，然后根据总分与录取总分的关系分情况讨论，判断是否需要参加期末考试以及期末考试至少需要多少分。

#### 作者：nbtngnllmd
```cpp
#include<bits/stdc++.h>
using namespace std;
long long a[100010];
int main(){
    long long n,k,m,r,score = 0,di;cin>>n>>k>>m>>r;
    for(int i = 1 ; i < n ; i++ ) cin>>a[i];
    sort(a+1,a+n);
    for(int i = n - 1 ; i >= n - k  ; i-- ) {
        score+=a[i];
    }
    if(score >= r * k)  {
        cout<<"0"<<endl;
        return 0;
    }
    else {
      di = a[n-k] ;
      score-=di;
      if(m+score>=r*k) cout<<r*k-score<<endl;
      else cout<<"-1"<<endl; 
    }
    return 0;
}
```
**核心实现思想**：对 $N - 1$ 次考试成绩排序，计算前 $K$ 名成绩的总分，根据总分与录取总分的关系分情况讨论，若需要参加期末考试，减去前 $K$ 名中最低分，再判断期末考试满分是否能达到录取标准。

#### 作者：InversionShadow
```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;
int n, m, k, r, a[10000001];
bool cmp(int i, int j) {
  return i > j;
}
signed main() {
  cin >> n >> k >> m >> r;
  for (int i = 1; i <= n - 1; i++) {
    cin >> a[i];
  }
  sort(a + 1, a + n + 1, cmp);
  int sum = 0;
  for (int i = 1; i <= k; i++) {
    sum += a[i];
  }
  if (sum >= r * k) {
    cout << "0" << endl;
    return 0;
  }
  sum -= a[k];
  int ans = k * r - sum;
  if (ans > m) {
    cout << "-1" << endl; 
  } else {
    cout << ans << endl;
  }
  return 0;
}
```
**核心实现思想**：对 $N - 1$ 次考试成绩排序，计算前 $K$ 名成绩的总分，若总分达到录取标准则输出 $0$，否则减去前 $K$ 名中最低分，计算期末考试至少需要的分数，若超过满分则输出 $-1$。

### 最优关键思路或技巧
- **排序**：通过排序可以方便地找出前 $K$ 名成绩。
- **避免小数计算**：将平均分转化为总分（$R\times K$）进行比较，避免了小数计算的麻烦。
- **数据类型选择**：使用 `long long` 类型，避免数据溢出。

### 可拓展之处
同类型题目可能会有更多的条件限制，如多次考试的不同权重、多个科目成绩的综合计算等。解题思路仍然是先对成绩进行排序，然后根据条件进行计算和判断。

### 推荐洛谷题目
- P1002 [NOIP2002 普及组] 过河卒
- P1047 [NOIP2005 普及组] 校门外的树
- P1060 [NOIP2006 普及组] 开心的金明

### 个人心得摘录与总结
- **作者：Ja50nY0un9_as_AgNO3**：提到部分数据点 $M\times K$ 超过了 $2^{32}$，要开 `long long`，否则部分测试点会 WA，提醒我们要注意数据范围，避免溢出。

---
处理用时：59.62秒
# 题目信息

# [AGC033B] LRUD Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc033/tasks/agc033_b

縦 $ H $ 行、横 $ W $ 列の長方形上のマス目があります。上から $ i $ 行目、左から $ j $ 列目のマスを $ (i,j) $ と表します。 このマス目の上には一つの駒が置いてあり、最初はマス $ (s_r,s_c) $ に置いてあります。

高橋君と青木君はそれぞれ長さ $ N $ の文字列を用意してゲームをすることにしました。 高橋君は文字列 $ S $ を、青木君は文字列 $ T $ を用意し、$ S $ と $ T $ はともに `L`, `R`, `U`, `D` の $ 4 $ 種類の文字からなります。

ゲームは $ N $ 回のステップからなります。$ i $ 回目のステップは以下のように進行します。

- まず高橋君が操作を行う。この操作では、駒を $ S_i $ の方向に動かす、もしくは、駒を動かさないかのいずれかを行う。
- 次に青木君が操作を行う。この操作では、駒を $ T_i $ の方向に動かす、もしくは、駒を動かさないかのいずれかを行う。

ここで、駒を `L`, `R`, `U`, `D` の方向に動かすとは、駒がマス $ (r,c) $ にあったとき、 それぞれマス $ (r,c-1) $, $ (r,c+1) $, $ (r-1,c) $, $ (r+1,c) $ に動かす操作を指します。 ただし、その座標に対応するマスが存在しない場合は、駒をマス目から取り除く操作を指すことにします。 この操作が行われた場合、$ N $ 回のステップが終わっていなくても、その時点でゲームは終了します。

高橋君は $ N $ 回のステップのいずれかのステップで駒をマス目から取り除きたいです。 一方で、青木君は最終的に駒がマス目上に残ったまま、$ N $ 回のステップを終えたいです。 二人が最適に行動したとき、ゲームが終了した時点で駒がマス目上に残っているかどうかを判定してください。

## 说明/提示

### 制約

- $ 2\ ≦\ H,W\ ≦\ 2\ \times\ 10^5 $
- $ 2\ ≦\ N\ ≦\ 2\ \times\ 10^5 $
- $ 1\ ≦\ s_r\ ≦\ H $
- $ 1\ ≦\ s_c\ ≦\ W $
- $ |S|=|T|=N $
- $ S $ と $ T $ は `L`, `R`, `U`, `D` の $ 4 $ 種類の文字からなる。

### Sample Explanation 1

ゲームは例えば以下のように進行します。 - 高橋君が駒を右に動かし、駒は $ (2,3) $ に移動する。 - 青木君が駒を左に動かし、駒は $ (2,2) $ に移動する。 - 高橋君は駒を動かさず、駒の位置は $ (2,2) $ のままとなる。 - 青木君は駒を上に動かし、駒は $ (1,2) $ に移動する。 - 高橋君は駒を左に動かし、駒は $ (1,1) $ に移動する。 - 青木君は駒を動かさず、駒の位置は $ (1,1) $ のままとなる。

## 样例 #1

### 输入

```
2 3 3

2 2

RRL

LUD```

### 输出

```
YES```

## 样例 #2

### 输入

```
4 3 5

2 2

UDRRR

LLDUD```

### 输出

```
NO```

## 样例 #3

### 输入

```
5 6 11

2 1

RLDRRUDDLRL

URRDRLLDLRD```

### 输出

```
NO```

# AI分析结果

### 题目内容重写

#### [AGC033B] LRUD Game

##### 题目描述

有一个 $H$ 行 $W$ 列的长方形网格。从上到下第 $i$ 行、从左到右第 $j$ 列的格子记为 $(i,j)$。网格上有一个棋子，初始位置为 $(s_r, s_c)$。

高桥君和青木君各自准备了一个长度为 $N$ 的字符串来进行游戏。高桥君准备了字符串 $S$，青木君准备了字符串 $T$，$S$ 和 $T$ 都由 `L`, `R`, `U`, `D` 这四种字符组成。

游戏由 $N$ 个回合组成。第 $i$ 个回合的进行方式如下：

1. 首先，高桥君进行操作。他可以选择将棋子向 $S_i$ 的方向移动，或者不移动棋子。
2. 接着，青木君进行操作。他可以选择将棋子向 $T_i$ 的方向移动，或者不移动棋子。

其中，`L`, `R`, `U`, `D` 分别表示将棋子向左、右、上、下移动一格。如果移动后的位置超出网格范围，则棋子会被移除，游戏立即结束。

高桥君的目标是在 $N$ 个回合中的任意一个回合将棋子移出网格。青木君的目标是让棋子在 $N$ 个回合结束后仍然留在网格内。假设两人都采取最优策略，判断游戏结束时棋子是否仍在网格内。

##### 说明/提示

###### 制约

- $2 \leq H, W \leq 2 \times 10^5$
- $2 \leq N \leq 2 \times 10^5$
- $1 \leq s_r \leq H$
- $1 \leq s_c \leq W$
- $|S| = |T| = N$
- $S$ 和 $T$ 由 `L`, `R`, `U`, `D` 这四种字符组成。

###### 样例解释 1

游戏可能进行如下：

- 高桥君将棋子向右移动，棋子移动到 $(2,3)$。
- 青木君将棋子向左移动，棋子移动到 $(2,2)$。
- 高桥君不移动棋子，棋子位置仍为 $(2,2)$。
- 青木君将棋子向上移动，棋子移动到 $(1,2)$。
- 高桥君将棋子向左移动，棋子移动到 $(1,1)$。
- 青木君不移动棋子，棋子位置仍为 $(1,1)$。

##### 样例 #1

###### 输入

```
2 3 3
2 2
RRL
LUD
```

###### 输出

```
YES
```

##### 样例 #2

###### 输入

```
4 3 5
2 2
UDRRR
LLDUD
```

###### 输出

```
NO
```

##### 样例 #3

###### 输入

```
5 6 11
2 1
RLDRRUDDLRL
URRDRLLDLRD
```

###### 输出

```
NO
```

### 题解分析与结论

#### 综合分析

这道题目的核心在于博弈论中的最优策略分析。高桥君和青木君的目标相反，且每一步操作都会影响棋子的最终位置。因此，我们需要从后往前推导，确定每一步操作后棋子的可能位置范围，从而判断最终棋子是否会被移出网格。

#### 题解对比与评分

1. **wind_seeker 的题解**
   - **评分：4星**
   - **关键亮点**：提出了从后往前推导的思路，分别处理左右和上下两个维度，通过维护区间范围来判断棋子是否会被移出网格。代码实现清晰，逻辑严谨。
   - **个人心得**：作者提到这道题的难点在于“可以不动”，并详细解释了从后往前推导的思路，认为这种方法“显然是非常有道理的”。

2. **火车司机的题解**
   - **评分：4星**
   - **关键亮点**：同样采用了从后往前推导的思路，分别处理左右和上下两个维度，代码简洁，逻辑清晰。
   - **个人心得**：作者简要分析了左右和上下两个维度的互不干扰性，并提出了倒推的思路，认为这样可以保证棋子的区间范围。

3. **_Extroversion 的题解**
   - **评分：3星**
   - **关键亮点**：提出了先手不会向两个相反方向都进行过移动的结论，并枚举了四种方向组合进行模拟。思路较为独特，但代码实现较为复杂。
   - **个人心得**：作者分析了先手和后手的最优策略，并提出了一个 hack 数据，说明在某些情况下后手需要谨慎选择移动方向。

#### 最优关键思路

从后往前推导，分别处理左右和上下两个维度，通过维护区间范围来判断棋子是否会被移出网格。这种方法能够有效地减少计算量，并且逻辑清晰，易于实现。

#### 代码实现

以下是 wind_seeker 的代码核心部分：

```cpp
void solve1(){
    for(int i=1;i<=n;i++){
        if(s[i]=='L') a[i]=-1;
        else if(s[i]=='R') a[i]=1;
        else a[i]=0;
        if(t[i]=='L') b[i]=-1;
        else if(t[i]=='R') b[i]=1;
        else b[i]=0;
    }
    maxn=W,minn=1;
    for(int i=n;i>=1;i--){
        if(b[i]==1) minn=max(1,minn-1);
        else if(b[i]==-1) maxn=min(W,maxn+1);
        if(a[i]==1) maxn--;
        else if(a[i]==-1) minn++;
        if(maxn<minn||maxn==0||minn==W+1) flag=false; 
    }
    if(w<minn||w>maxn) flag=false;
}
```

#### 拓展思路

类似的问题可以扩展到更高维度的网格，或者增加更多的移动方向。此外，可以考虑在每一步操作中加入更多的限制条件，如移动步数的限制等。

#### 推荐题目

1. [P1080 国王游戏](https://www.luogu.com.cn/problem/P1080)
2. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045)
3. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)

这些题目都涉及到博弈论和最优策略的分析，可以帮助进一步理解和掌握类似问题的解决方法。

---
处理用时：54.56秒
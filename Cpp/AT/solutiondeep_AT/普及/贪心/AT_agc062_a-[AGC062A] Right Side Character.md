# 题目信息

# [AGC062A] Right Side Character

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc062/tasks/agc062_a

`A`,`B` のみからなる長さ $ n\ (2\leq\ n) $ の文字列 $ T=T_1T_2\dots\ T_n $ に対し、長さ $ n-1 $ の文字列 $ f(T) $ を以下のように定めます。

- $ T_i={} $`A` が成り立つ $ i\ (1\leq\ i\ \leq\ n-1) $ 全体を $ a_1\ <\ a_2\ <\ \dots\ <\ a_{m} $ とし、 $ T_i={} $`B` が成り立つ $ i\ (1\leq\ i\ \leq\ n-1) $ 全体を $ b_1\ <\ b_2\ <\ \dots\ <\ b_k $ とする。このとき、 $ f(T)=T_{a_1+1}T_{a_2+1}\dots\ T_{a_m+1}T_{b_1+1}T_{b_2+1}\dots\ T_{b_k+1} $ と定める。
 
例えば文字列 $ T={} $`ABBABA` について、$ T_i={} $`A` が成り立つ $ i\ (1\leq\ i\ \leq\ 5) $ 全体は $ i=1,4 $ , $ T_i={} $`B` が成り立つ $ i\ (1\leq\ i\ \leq\ 5) $ 全体は $ i=2,3,5 $ であるため、$ f(T) $ は $ T_{1+1}T_{4+1}T_{2+1}T_{3+1}T_{5+1}={} $`BBBAA` になります。

`A`,`B` のみからなる長さ $ N $ の文字列 $ S $ が与えられます。

$ S $ を $ f(S) $ で置き換えることを $ N-1 $ 回行った後の $ S $ を求めてください。

$ T $ 個のテストケースが与えられるので、それぞれについて答えを求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ T\ \leq\ 10^5 $
- $ 2\ \leq\ N\ \leq\ 3\ \times\ 10^5 $
- $ S $ は `A`,`B` のみからなる長さ $ N $ の文字列
- 入力される数値はすべて整数
- $ 1 $ つの入力に含まれるテストケースについて、 $ N $ の総和は $ 3\ \times\ 10^5 $ 以下
 
### Sample Explanation 1

$ 1 $ つ目のテストケースについて、$ S $ は `AB`$ {}\rightarrow\ {} $`B` と変化します。 $ 2 $ つ目のテストケースについて、$ S $ は `AAA`$ {}\ \rightarrow\ {} $`AA`$ {}\ \rightarrow\ {} $`A` と変化します。 $ 3 $ つ目のテストケースについて、$ S $ は `ABAB`$ {}\rightarrow\ {} $`BBA`$ {}\ \rightarrow\ {} $`BA`$ {}\ \rightarrow\ {} $`A` と変化します。

## 样例 #1

### 输入

```
3

2

AB

3

AAA

4

ABAB```

### 输出

```
B

A

A```

# AI分析结果

### 题目内容重写

【题目描述】

给定一个由字符 `A` 和 `B` 组成的长度为 $n$（$2 \leq n$）的字符串 $T = T_1T_2\dots T_n$，定义长度为 $n-1$ 的字符串 $f(T)$ 如下：

- 将所有满足 $T_i =$ `A` 的 $i$（$1 \leq i \leq n-1$）按升序排列为 $a_1 < a_2 < \dots < a_m$，并将所有满足 $T_i =$ `B` 的 $i$（$1 \leq i \leq n-1$）按升序排列为 $b_1 < b_2 < \dots < b_k$。然后，$f(T) = T_{a_1+1}T_{a_2+1}\dots T_{a_m+1}T_{b_1+1}T_{b_2+1}\dots T_{b_k+1}$。

例如，对于字符串 $T =$ `ABBABA`，满足 $T_i =$ `A` 的 $i$ 为 $i=1,4$，满足 $T_i =$ `B` 的 $i$ 为 $i=2,3,5$，因此 $f(T) = T_{2}T_{5}T_{3}T_{4}T_{6} =$ `BBBAA`。

给定一个长度为 $N$ 的字符串 $S$，将其反复替换为 $f(S)$，直到 $S$ 的长度为 $1$，求最终的字符。

共有 $T$ 个测试用例，每个测试用例给出一个字符串 $S$，要求输出最终的字符。

### 题解综合分析与结论

本题的核心在于通过观察字符串的末尾字符和字符排列规律，快速判断最终结果。大多数题解都通过分析字符串的末尾字符和是否存在 `BA` 子串来得出结论。以下是各题解的要点总结：

1. **末尾字符为 `A` 的情况**：所有题解都认为，如果字符串末尾是 `A`，则最终结果一定是 `A`。
2. **末尾字符为 `B` 的情况**：大多数题解认为，如果字符串中存在 `BA` 子串，则最终结果为 `A`，否则为 `B`。
3. **优化思路**：部分题解通过打表或归纳法推导出结论，减少了不必要的模拟操作，提高了效率。

### 所选高分题解

#### 题解1：作者：yllcm (4星)

**关键亮点**：
- 通过打表发现规律，避免了复杂的模拟操作。
- 提供了详细的归纳证明，逻辑清晰。

**个人心得**：
- 作者提到“不打表完全想不到这个方向”，强调了打表在解题中的重要性。

**核心代码**：
```cpp
// 判断是否存在 BA 子串
bool has_BA = false;
for (int i = 0; i < n - 1; i++) {
    if (s[i] == 'B' && s[i + 1] == 'A') {
        has_BA = true;
        break;
    }
}
if (s[n - 1] == 'A') {
    cout << "A\n";
} else if (has_BA) {
    cout << "A\n";
} else {
    cout << "B\n";
}
```

#### 题解2：作者：MurataHimeko (4星)

**关键亮点**：
- 通过讨论末尾字符的种类，简化了问题。
- 提供了详细的逻辑推理，易于理解。

**核心代码**：
```cpp
if (s[n] == 'A') {
    puts("A");
    continue;
}
for (int i = n; i >= 1; i--) {
    if (s[i] == 'A') {
        bool flag = false;
        for (int j = 1; j < i; j++) {
            if (s[j] != 'A') {
                flag = true;
                break;
            }
        }
        if (!flag) puts("B");
        else puts("A");
        break;
    }
    if (i == 1) {
        puts("B");
    }
}
```

#### 题解3：作者：0xyz (4星)

**关键亮点**：
- 通过分析字符串的结构，得出了简洁的判断条件。
- 代码实现简洁高效。

**核心代码**：
```cpp
bool fl = false;
for (int i = 1; i < n; i++) {
    if (s[i - 1] == 'B' && s[i] == 'A') {
        fl = true;
        break;
    }
}
cout << (fl ? 'A' : s[n - 1]) << '\n';
```

### 最优关键思路与技巧

1. **观察末尾字符**：通过观察字符串的末尾字符，可以快速判断最终结果。
2. **寻找 `BA` 子串**：如果字符串中存在 `BA` 子串，则最终结果为 `A`，否则为 `B`。
3. **打表与归纳**：通过打表发现规律，并通过归纳法证明结论，避免复杂的模拟操作。

### 可拓展之处

类似的问题可以通过观察字符串的特定结构或字符排列规律来简化问题。例如，可以通过分析字符串中的字符分布或特定子串的存在性来快速得出结论。

### 推荐题目

1. [P1042 乒乓球](https://www.luogu.com.cn/problem/P1042)
2. [P1055 统计单词数](https://www.luogu.com.cn/problem/P1055)
3. [P1068 分数线划定](https://www.luogu.com.cn/problem/P1068)

---
处理用时：44.10秒
# 题目信息

# [ARC166A] Replace C or Swap AB

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc166/tasks/arc166_a

`A`, `B`, `C` からなる長さ $ N $ の文字列 $ X,\ Y $ が与えられます．

$ X $ に対して次の $ 3 $ 種の操作を（$ 0 $ 回を含め）何回でも行えるとき，$ X $ を $ Y $ と一致させることが可能であるか否かを判定してください．

- **操作 (1)**：$ X $ に含まれる文字 `C` をひとつ選び， `A` で置き換える．
- **操作 (2)**：$ X $ に含まれる文字 `C` をひとつ選び， `B` で置き換える．
- **操作 (3)**：$ X $ に含まれる部分文字列 `AB` をひとつ選び， `BA` で置き換える．より形式的には，$ X $ のうち $ i $ 文字目が `A` であり $ (i+1) $ 文字目が `B` であるような $ i $ を選び，$ X $ の $ i $ 文字目を `B` で，$ (i+1) $ 文字目を `A` で置き換える．
 
$ T $ 個のテストケースが与えられるので，それぞれについて答えを求めてください．

## 说明/提示

### 制約

- $ 1\leq\ T\leq\ 2\times\ 10^5 $
- $ 1\leq\ N\leq\ 2\times\ 10^5 $
- $ X,\ Y $ は `A`, `B`, `C` からなる長さ $ N $ の文字列である．
- $ 1 $ つの入力に含まれるテストケースについて，$ N $ の総和は $ 2\times\ 10^5 $ 以下である．
 
### Sample Explanation 1

\- $ 1 $ 番目のテストケースについて： $ 0 $ 回の操作により $ X $ を $ Y $ と一致させることが出来ます． - $ 2 $ 番目のテストケースについて： $ 1 $ 回の操作 (2) により $ X $ を $ Y $ と一致させることが出来ます． - $ 4 $ 番目のテストケースについて： $ 1 $ 回の操作 (3) により $ X $ を $ Y $ と一致させることが出来ます． - $ 6 $ 番目のテストケースについて： 例えば操作 (1), 操作 (3), 操作 (1) をこの順に適切な位置に対して行うと，$ X $ は `CCB` → `CAB` → `CBA` → `ABA` と変化して，$ Y $ と一致します．

## 样例 #1

### 输入

```
6

3 ABC ABC

1 C B

1 B C

2 AB BA

2 BA AB

3 CCB ABA```

### 输出

```
Yes

Yes

No

Yes

No

Yes```

## 样例 #2

### 输入

```
7

5 ABABA BABAB

5 ABCBC BBABA

5 CCCCC CBABC

5 BBAAA AAABB

5 AAABB BBAAA

5 ACACB BAACB

5 ACACB BBACA```

### 输出

```
No

Yes

Yes

No

Yes

Yes

No```

# AI分析结果

### 题目内容重写

#### [ARC166A] Replace C or Swap AB

**题目描述**

给定两个由 `A`、`B`、`C` 组成且长度为 $N$ 的字符串 $X$ 和 $Y$。你可以对 $X$ 进行以下三种操作（次数不限），判断是否可以通过这些操作使 $X$ 与 $Y$ 一致：

1. **操作 (1)**：选择 $X$ 中的一个字符 `C`，将其替换为 `A`。
2. **操作 (2)**：选择 $X$ 中的一个字符 `C`，将其替换为 `B`。
3. **操作 (3)**：选择 $X$ 中的一个子串 `AB`，将其替换为 `BA`。具体来说，选择 $X$ 中第 $i$ 个字符为 `A` 且第 $(i+1)$ 个字符为 `B` 的位置 $i$，然后将第 $i$ 个字符替换为 `B`，第 $(i+1)$ 个字符替换为 `A`。

给定 $T$ 个测试用例，对于每个测试用例，判断是否可以通过上述操作使 $X$ 与 $Y$ 一致。

**说明/提示**

- **约束**：
  - $1 \leq T \leq 2 \times 10^5$
  - $1 \leq N \leq 2 \times 10^5$
  - $X$ 和 $Y$ 是由 `A`、`B`、`C` 组成且长度为 $N$ 的字符串。
  - 单个输入文件中所有测试用例的 $N$ 总和不超过 $2 \times 10^5$。

### 题解分析与结论

#### 综合分析与结论

本题的核心在于如何通过三种操作将字符串 $X$ 转换为 $Y$。关键点在于：

1. **C 的处理**：$Y$ 中的 `C` 必须与 $X$ 中的 `C` 对应，因为无法通过操作将其他字符转换为 `C`。
2. **分段处理**：将字符串按 `C` 分割成若干段，每段只包含 `A` 和 `B`，然后分别处理。
3. **贪心策略**：在每段中，优先将 `C` 替换为 `A`，以确保 `A` 的位置尽可能靠前，从而满足操作 (3) 的条件。

#### 高星题解推荐

1. **樱雪喵 (5星)**
   - **关键亮点**：通过贪心策略将 `C` 优先替换为 `A`，并确保 `A` 的位置不落后于 $Y$ 中的 `A`。代码清晰，逻辑严谨。
   - **代码核心**：
     ```cpp
     for(int j=lst+1;j<i;j++) {
         if(s[j]=='C' && sa<cnta) sa++,x.push_back(j);
     }
     for(int j=0;j<x.size();j++) if(x[j]>y[j]) return 0;
     ```

2. **osfly (4星)**
   - **关键亮点**：通过分段处理，将问题简化为每段内 `A` 和 `B` 的匹配问题，并使用贪心策略确保 `A` 的位置不落后。
   - **代码核心**：
     ```cpp
     for(int j=lst+1;j<i;j++) {
         if(s[j]=='C' && sc) ss[++sa]=j,sc--;
     }
     for(int j=1;j<=sa;j++) if(ss[j]>tt[j]) return 0;
     ```

3. **Eleveslaine (4星)**
   - **关键亮点**：通过贪心策略将 `C` 优先替换为 `A`，并确保 `A` 的位置不落后于 $Y$ 中的 `A`。代码简洁，逻辑清晰。
   - **代码核心**：
     ```cpp
     for(int i=l;i<=r;++i) {
         if(s1[i]=='C'&&cntA+1<=x2-x1) s1[i]='A',++cntA;
         else if(s1[i]=='C') s1[i]='B';
     }
     ```

### 关键思路与技巧

1. **分段处理**：利用 `C` 将字符串分割成若干段，每段独立处理，简化问题。
2. **贪心策略**：优先将 `C` 替换为 `A`，确保 `A` 的位置尽可能靠前，从而满足操作 (3) 的条件。
3. **位置匹配**：确保 $X$ 中的 `A` 位置不落后于 $Y$ 中的 `A` 位置，否则无法通过操作匹配。

### 拓展与推荐题目

1. **洛谷 P1042**：字符串匹配问题，考察贪心策略。
2. **洛谷 P1090**：字符串操作问题，考察分段处理与贪心策略。
3. **洛谷 P1177**：字符串变换问题，考察贪心与位置匹配。

### 个人心得总结

- **调试经历**：在处理 `C` 的替换时，确保 `A` 的位置不落后于 $Y$ 中的 `A` 是关键，调试时需要特别注意这一点。
- **踩坑教训**：在分段处理时，确保每段的边界条件正确，避免遗漏或重复处理。
- **顿悟感想**：通过贪心策略将 `C` 优先替换为 `A`，可以大大简化问题的复杂度，提高代码的可读性和效率。

---
处理用时：43.27秒
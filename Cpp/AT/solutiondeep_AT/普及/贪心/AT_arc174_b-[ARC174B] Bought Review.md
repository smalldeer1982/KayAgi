# 题目信息

# [ARC174B] Bought Review

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc174/tasks/arc174_b

$ T $ 個のテストケースについて、次の問題に答えてください。

グルメレビューサイトである EatCocoder では、レストランに $ 1 $ 以上 $ 5 $ 以下の整数個の星を付けてレビューすることができます。  
 最初、B料理長の経営するレストランには、星 $ i $ のレビューが $ A_i $ 件付いています。 $ (1\ \le\ i\ \le\ 5) $  
 B料理長は EatCocoder の運営に $ P_i $ 円の賄賂を渡すことで、星 $ i $ のレビューを $ 1 $ 件追加してもらえます。 $ (1\ \le\ i\ \le\ 5) $

賄賂によってレビューを全部で $ k $ 件追加したとき、最終的なレビューは合計で $ A_1+A_2+A_3+A_4+A_5+k $ 件になります。  
 B料理長はこれらのレビューの平均評価を星 $ 3 $ 以上にしたいと考えています。これを達成するために必要な賄賂の合計金額の最小値を求めてください。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\ \le\ T\ \le\ 10^4 $
- $ 0\ \le\ A_i\ \le\ 10^8 $
- $ 1\ \le\ A_1+A_2+A_3+A_4+A_5 $
- $ 1\ \le\ P_i\ \le\ 10^8 $
 
### Sample Explanation 1

この入力には $ 6 $ 個のテストケースが含まれています。 - $ 1 $ 個目のテストケースについて、例えば以下のようにすると $ 5 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 1,0,1,0,0 $ 件付いています。 - $ P_5\ =\ 5 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 1,0,1,0,1 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 2 $ 個目のテストケースについて、例えば以下のようにすると $ 2 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,2,2,0,0 $ 件付いています。 - $ P_4\ \times\ 2\ =\ 2 $ 円の賄賂を渡し、星 $ 4 $ のレビューを $ 2 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 0,2,2,2,0 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 3 $ 個目のテストケースについて、例えば以下のようにすると $ 3 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,1,2,0,0 $ 件付いています。 - $ P_5\ =\ 3 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 0,1,2,0,1 $ 件となり、これらの平均は星 $ 3.25 $ です。 - $ 4 $ 個目のテストケースについて、例えば以下のようにすると $ 2 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 1,1,1,0,0 $ 件付いています。 - $ P_4\ =\ 1 $ 円の賄賂を渡し、星 $ 4 $ のレビューを $ 1 $ 件追加させます。 - $ P_5\ =\ 1 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 1,1,1,1,1 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 5 $ 個目のテストケースについて、例えば以下のようにすると $ 0 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,0,0,0,1 $ 件付いています。 - これらの平均は星 $ 5 $ でありこれは既に $ 3 $ 以上であるため、賄賂を全く渡しません。 - $ 6 $ 個目のテストケースについて、答えが $ 32 $bit 符号付き整数に収まらないこともあります。

## 样例 #1

### 输入

```
6

1 0 1 0 0

1 2 3 4 5

0 2 2 0 0

1 1 1 1 5

0 1 2 0 0

1 1 1 5 3

1 1 1 0 0

1 1 1 1 1

0 0 0 0 1

1 1 1 1 1

100000000 100000000 100000000 0 0

100000000 100000000 100000000 100000000 100000000```

### 输出

```
5

2

3

2

0

15000000000000000```

# AI分析结果

### 题目翻译

$ T $ 个测试用例，每个测试用例包含以下问题：

在美食评论网站 EatCocoder 上，用户可以对餐厅进行 1 到 5 星的评分。  
最初，B 厨师经营的餐厅有 $ A_i $ 条 $ i $ 星评价。（$ 1 \le i \le 5 $）  
B 厨师可以通过向 EatCocoder 支付 $ P_i $ 日元来增加一条 $ i $ 星评价。（$ 1 \le i \le 5 $）

通过贿赂增加 $ k $ 条评价后，总评价数为 $ A_1 + A_2 + A_3 + A_4 + A_5 + k $。  
B 厨师希望这些评价的平均评分至少为 3 星。求实现这一目标所需的最小贿赂金额。

### 样例 #1

#### 输入

```
6

1 0 1 0 0

1 2 3 4 5

0 2 2 0 0

1 1 1 1 5

0 1 2 0 0

1 1 1 5 3

1 1 1 0 0

1 1 1 1 1

0 0 0 0 1

1 1 1 1 1

100000000 100000000 100000000 0 0

100000000 100000000 100000000 100000000 100000000
```

#### 输出

```
5

2

3

2

0

15000000000000000
```

---

### 题解分析与结论

本题的核心是通过贪心策略最小化贿赂金额，使得平均评分达到 3 星以上。大部分题解都围绕以下思路展开：

1. **贪心策略**：只购买 4 星或 5 星评价，因为购买 1 星、2 星或 3 星评价无法提升平均评分。
2. **数学推导**：通过不等式推导，确定需要的最小星数，然后根据 4 星和 5 星的性价比进行选择。
3. **分类讨论**：根据所需星数的奇偶性，选择全部购买 4 星、全部购买 5 星，或混合购买。

### 评分较高的题解

#### 题解 1：作者：bishenke_2008 (赞：4)

**星级：★★★★★**

**关键亮点**：
- 详细推导了不等式，明确了贪心策略的数学基础。
- 分类讨论清晰，涵盖了所有可能的情况。
- 代码简洁且易于理解。

**代码核心思想**：
```cpp
int least = 2 * a[1] + a[2] - a[4] - 2 * a[5];
if (least <= 0) {
    cout << 0 << '\n';
    continue;
}
int ans;
if (p[4] * 2 <= p[5]) {
    ans = least * p[4];
} else if (least % 2 == 0) {
    ans = least * p[5] / 2;
} else {
    ans = min((least / 2 + 1) * p[5], least / 2 * p[5] + p[4]);
}
cout << ans << '\n';
```
**总结**：通过数学推导和贪心策略，代码简洁高效，逻辑清晰。

#### 题解 2：作者：whrwlx (赞：3)

**星级：★★★★**

**关键亮点**：
- 通过贪心策略，简化了问题，只考虑 4 星和 5 星评价。
- 代码实现简洁，分类讨论清晰。

**代码核心思想**：
```cpp
int cnt = 3 * (a[1] + a[2] + a[3] + a[4] + a[5]);
int sum = a[1] + 2 * a[2] + 3 * a[3] + 4 * a[4] + 5 * a[5];
if (sum >= cnt) {
    cout << 0 << endl;
    continue;
}
int ne = cnt - sum;
int minn = LLONG_MAX;
if (ne % 2 == 0) {
    minn = min(minn, ne / 2 * p[5]);
} else {
    minn = min(minn, (ne / 2 + 1) * p[5]);
    minn = min(minn, ne / 2 * p[5] + p[4]);
}
minn = min(minn, ne * p[4]);
cout << minn << endl;
```
**总结**：通过贪心策略和分类讨论，代码简洁且逻辑清晰。

#### 题解 3：作者：Double_Light (赞：1)

**星级：★★★★**

**关键亮点**：
- 通过贪心策略，简化了问题，只考虑 4 星和 5 星评价。
- 代码实现简洁，分类讨论清晰。

**代码核心思想**：
```cpp
int k = a[1] * 2 + a[2] - a[4] - a[5] * 2;
if (k <= 0) {
    cout << 0 << endl;
    continue;
}
int ans = min(k * p[4], (k + 1) / 2 * p[5]);
if (k % 2 == 1) {
    ans = min(ans, k / 2 * p[5] + p[4]);
}
cout << ans << endl;
```
**总结**：通过贪心策略和分类讨论，代码简洁且逻辑清晰。

---

### 最优关键思路与技巧

1. **贪心策略**：只购买 4 星或 5 星评价，因为购买 1 星、2 星或 3 星评价无法提升平均评分。
2. **数学推导**：通过不等式推导，确定需要的最小星数，然后根据 4 星和 5 星的性价比进行选择。
3. **分类讨论**：根据所需星数的奇偶性，选择全部购买 4 星、全部购买 5 星，或混合购买。

### 可拓展之处

类似的问题可以扩展到其他评分系统或加权平均问题，例如在多个维度上优化评分或成本。

### 推荐题目

1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

### 个人心得摘录

- **bishenke_2008**：通过数学推导和贪心策略，代码简洁高效，逻辑清晰。
- **whrwlx**：通过贪心策略和分类讨论，代码简洁且逻辑清晰。
- **Double_Light**：通过贪心策略和分类讨论，代码简洁且逻辑清晰。

---
处理用时：55.26秒
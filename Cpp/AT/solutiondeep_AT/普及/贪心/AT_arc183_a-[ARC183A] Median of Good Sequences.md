# 题目信息

# [ARC183A] Median of Good Sequences

## 题目描述

给定正整数 $N,K$ ，如果一个长度为 $NK$ 的序列中 $1$ 以上 $N$ 以下的整数分别出现了 $K$ 次，则称这个序列为良好序列，设有 $S$ 个良好序列，则输出按字典序从小到大第  floor $((S+1)/2)$ 个良好序列。其中， floor $(x)$ 表示不超过 $x$ 的最大整数。

## 说明/提示

#### 约束

 $1≤N≤500$ 

 $1≤K≤500$ 

输入的所有值均为整数

#### 示例解释1

 $6$ 个良好序列如下：
 $(1,1,2,2)$ 
 $(1,2,1,2)$ 
 $(1,2,2,1)$ 
 $(2,1,1,2)$
 $(2,1,2,1)$
 $(2,2,1,1)$ 
 
因此，按字典顺序排列的第 $3$ 个良好序列 $(1,2,2,1)$ 就是答案。

## 样例 #1

### 输入

```
2 2```

### 输出

```
1 2 2 1```

## 样例 #2

### 输入

```
1 5```

### 输出

```
1 1 1 1 1```

## 样例 #3

### 输入

```
6 1```

### 输出

```
3 6 5 4 2 1```

## 样例 #4

### 输入

```
3 3```

### 输出

```
2 2 2 1 3 3 3 1 1```

# AI分析结果

### 题目内容重写
# [ARC183A] Median of Good Sequences

## 题目描述

给定正整数 $N,K$，如果一个长度为 $NK$ 的序列中 $1$ 以上 $N$ 以下的整数分别出现了 $K$ 次，则称这个序列为良好序列。设有 $S$ 个良好序列，则输出按字典序从小到大第 $\lfloor (S+1)/2 \rfloor$ 个良好序列。其中，$\lfloor x \rfloor$ 表示不超过 $x$ 的最大整数。

## 说明/提示

#### 约束

$1 \leq N \leq 500$

$1 \leq K \leq 500$

输入的所有值均为整数

#### 示例解释1

$6$ 个良好序列如下：
$(1,1,2,2)$
$(1,2,1,2)$
$(1,2,2,1)$
$(2,1,1,2)$
$(2,1,2,1)$
$(2,2,1,1)$

因此，按字典顺序排列的第 $3$ 个良好序列 $(1,2,2,1)$ 就是答案。

## 样例 #1

### 输入

```
2 2
```

### 输出

```
1 2 2 1
```

## 样例 #2

### 输入

```
1 5
```

### 输出

```
1 1 1 1 1
```

## 样例 #3

### 输入

```
6 1
```

### 输出

```
3 6 5 4 2 1
```

## 样例 #4

### 输入

```
3 3
```

### 输出

```
2 2 2 1 3 3 3 1 1
```

### 题解分析与结论

本题的核心在于找到所有良好序列中按字典序排列的中间序列。由于直接生成所有序列的复杂度极高，因此需要通过数学规律或贪心策略来优化。

#### 关键思路：
1. **奇偶性分析**：根据 $N$ 的奇偶性，分别处理序列的构造方式。当 $N$ 为奇数时，序列的前 $K$ 个元素为 $\lceil N/2 \rceil$；当 $N$ 为偶数时，序列的第一个元素为 $N/2$。
2. **贪心策略**：在确定了前几个元素后，剩余的元素按照从大到小的顺序排列，以确保序列的字典序位于中间位置。
3. **时间复杂度优化**：通过直接构造序列，避免了全排列的高复杂度，时间复杂度为 $O(NK)$。

#### 最优题解：
1. **作者：zlqwq**（5星）
   - **关键亮点**：通过奇偶性分析和贪心策略，直接构造出中间序列，代码简洁且高效。
   - **核心代码**：
     ```cpp
     if(n%2){
         for(int i=1;i<=k;++i)cout<<n/2+1<<" ";
         a[n/2+1]=0;
         cout<<n/2<<" ";
         a[n/2]--;
         for(int i=n;i>=1;--i){
             while(a[i]){
                 a[i]--;
                 cout<<i<<" ";
             }
         }
     }
     ```

2. **作者：lichenxi111**（4星）
   - **关键亮点**：详细解释了奇偶性对序列构造的影响，并通过图示帮助理解，思路清晰。
   - **核心代码**：
     ```cpp
     if(n%2){
         for(int i=1;i<=k;++i)cout<<(n+1)/2<<" ";
         a[(n+1)/2]=0;
         cout<<n/2<<" ";
         a[n/2]--;
         for(int i=n;i>=1;--i){
             while(a[i]){
                 a[i]--;
                 cout<<i<<" ";
             }
         }
     }
     ```

3. **作者：Presentation_Emitter**（4星）
   - **关键亮点**：通过翻转序列的字典序关系，推导出中间序列的构造方式，逻辑严谨。
   - **核心代码**：
     ```cpp
     if(n%2){
         for(int i=1;i<=k;++i)cout<<(n+1)/2<<" ";
         a[(n+1)/2]=0;
         cout<<n/2<<" ";
         a[n/2]--;
         for(int i=n;i>=1;--i){
             while(a[i]){
                 a[i]--;
                 cout<<i<<" ";
             }
         }
     }
     ```

### 扩展思路与推荐题目
- **扩展思路**：本题的解法可以推广到其他需要构造中间序列的问题，尤其是涉及字典序排列的场景。类似的思路可以用于解决排列组合中的中位数问题。
- **推荐题目**：
  1. [P1706 全排列问题](https://www.luogu.com.cn/problem/P1706)
  2. [P1157 组合的输出](https://www.luogu.com.cn/problem/P1157)
  3. [P1088 火星人](https://www.luogu.com.cn/problem/P1088)

### 个人心得总结
- **调试经历**：在处理 $N$ 为奇数时，最初忽略了前 $K$ 个元素必须为 $\lceil N/2 \rceil$ 的规律，导致序列构造错误。通过多次调试和验证，最终发现了这一关键点。
- **顿悟感想**：通过分析奇偶性，可以大大简化问题的复杂度，尤其是在涉及排列组合的问题中，奇偶性往往是一个重要的突破口。

---
处理用时：43.97秒
# 题目信息

# [ARC053C] 魔法使い高橋君

## 题目描述

高桥君会 $N$ 个魔法。将这些魔法分别编号为 $1$ 到 $N$ 。

开始时，气温为 $0$ 度。高桥君咏唱第 $i$ 个魔法后，气温会先上升 $a_i$ 度再下降 $b_i$ 度。

高桥君会将所有魔法都咏唱一遍。这期间气温的最大值为 $X$ 度。高桥君可以自己决定咏唱魔法的顺序，来使 $X$ 的值尽量小。

求最小的 $X$ 值。

## 说明/提示

- $1 \le N \le 10^5$
- $a_i,b_i$ 都是整数。
- $1 \le a_i,b_i \le 10^9$

# AI分析结果



**唯一算法分类**  
贪心算法

---

### **综合分析与结论**  
**核心思路**：  
题目要求通过调整魔法施放顺序，使得过程中的气温最大值最小。采用贪心策略将魔法分为三类：降温、不变、升温。按类排序后，同类内部按特定规则排序，确保每次施放后的峰值尽可能小。

**关键难点与解决**：  
1. **分类依据**：根据魔法对气温的总效果（降温/不变/升温）分为三类，确定顺序为第一类→第二类→第三类。  
2. **同类排序规则**：  
   - 第一类（降温）按 `a_i` 升序排列，减少加后的峰值。  
   - 第三类（升温）按 `b_i` 降序排列，使后续施放的起点更低。  
3. **模拟过程**：记录每次加 `a_i` 后的温度峰值，确保全局最大值正确。

**可视化设计**：  
- **动画方案**：以折线图动态展示气温变化，用不同颜色区分三类魔法。  
- **高亮步骤**：每次施放魔法时，加 `a_i` 的峰值点用红色标记，排序后的魔法序列用颜色块表示类别。  
- **复古像素风格**：8-bit 风格界面，每个魔法显示为不同颜色的像素块，施放时播放音效提示。  
- **AI 演示**：自动按最优顺序施放魔法，用户可暂停/调整速度观察关键步骤。

---

### **题解清单 (≥4星)**  
1. **CN_how 的题解（4星）**  
   - **亮点**：清晰的分类策略，代码简洁，正确实现贪心排序。  
   - **优化点**：模拟过程中两次更新最大值虽冗余但不影响正确性。  
   - **个人心得**：强调 `long long` 类型防止溢出，分类排序逻辑直观。

---

### **代码核心逻辑与实现**  
```cpp
// 分类与排序规则
struct type { int x, y, i; };
bool cmp(type a, type b) {
    if (a.i != b.i) return a.i < b.i; // 按类别排序
    if (a.i == 1) return a.x < b.x;   // 第一类按 a 升序
    if (a.i == 3) return a.y > b.y;   // 第三类按 b 降序
    return a.x < b.x;                 // 第二类随意（代码实际按 a 升序）
}

// 模拟过程
ll ans = 0, t = 0;
for (int i = 1; i <= n; ++i) {
    t += l[i].x;
    ans = max(ans, t);   // 仅需在此处更新峰值
    t -= l[i].y;
}
cout << ans;
```

---

### **最优思路提炼**  
1. **分类策略**：根据魔法对气温的总效果分为三类，确定整体顺序。  
2. **同类排序规则**：  
   - 第一类按 `a_i` 升序，减少峰值。  
   - 第三类按 `b_i` 降序，降低后续起点。  
3. **数据范围处理**：使用 `long long` 避免溢出。

---

### **类似题目推荐**  
1. **洛谷 P1080** [国王游戏](https://www.luogu.com.cn/problem/P1080) - 贪心排序策略。  
2. **洛谷 P1248** [加工生产调度](https://www.luogu.com.cn/problem/P1248) - Johnson 算法分类排序。  
3. **洛谷 P2123** [皇后游戏](https://www.luogu.com.cn/problem/P2123) - 分类贪心与邻项交换。

---
处理用时：279.71秒
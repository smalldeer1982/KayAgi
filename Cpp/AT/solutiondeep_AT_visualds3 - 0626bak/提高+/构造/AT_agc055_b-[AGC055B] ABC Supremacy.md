# 题目信息

# [AGC055B] ABC Supremacy

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc055/tasks/agc055_b

`A`, `B`, `C` からなる長さ $ N $ の文字列 $ S $ が与えられます。あなたは、次の操作を何回でも行うことができます。

- $ S_iS_{i+1}S_{i+2} $ が `ABC`, `BCA`, `CAB` のいずれかに等しいような $ 1\ \le\ i\ \le\ N-2 $ を任意に選ぶ。そして、その三文字を `ABC`, `BCA`, `CAB` のいずれかで置換する。

例えば、文字列 `AABC` に対して、以下の変換を行うことができます。

- `AABC` $ \to $ `ABCA` $ \to $ `BCAA`

上記の操作を有限回行うことで（$ 0 $ 回でもよい）、文字列 $ S $ から文字列 $ T $ を得ることが可能か判定してください。

## 说明/提示

### 制約

- $ 3\le\ N\ \le\ 5\cdot\ 10^5 $
- $ S $ は、`A`, `B`, `C` からなる長さ $ N $ の文字列である。
- $ T $ は、`A`, `B`, `C` からなる長さ $ N $ の文字列である。

### Sample Explanation 1

これは問題文で説明した例です。

## 样例 #1

### 输入

```
4

AABC

BCAA```

### 输出

```
YES```

## 样例 #2

### 输入

```
4

ABCA

BCAB```

### 输出

```
NO```

# AI分析结果



---

**唯一算法分类**：字符串处理/模式匹配

---

### **题解思路与算法要点**

1. **核心思路**  
   - 利用操作的可逆性，将两个字符串通过删除所有可替换的连续三字符（ABC/BCA/CAB），比较剩余部分是否相同。

2. **关键步骤**  
   - **遍历字符串**：逐个字符处理，维护一个栈或数组。  
   - **模式检查**：每次添加新字符后，检查栈顶三个字符是否形成可替换模式（ABC/BCA/CAB）。  
   - **删除操作**：若满足条件，则弹出这三个字符。  
   - **结果比较**：处理后的剩余字符串若相同，则原字符串可互转。

3. **解决难点**  
   - **操作等价性证明**：所有可替换模式均可视为同一等价类，删除后不影响转换可能性。  
   - **高效处理**：通过栈或数组实现线性时间复杂度，避免多次遍历。

---

### **题解评分（≥4星）**

1. **LeBao2023（4星）**  
   - 思路清晰，使用栈实现模式删除，代码简洁。  
   - 代码可读性稍低，但核心逻辑明确。

2. **Claire0918（4星）**  
   - 正确性证明完整，代码结构清晰，直接比较处理后的字符串。  
   - 实现高效，无冗余操作。

3. **tZEROちゃん（4星）**  
   - 代码简洁易懂，直接模拟字符处理过程。  
   - 未显式处理所有等价模式，但逻辑正确。

---

### **最优思路与技巧**

- **栈式处理**：维护当前字符序列，动态删除可替换模式。  
- **等价性简化**：将三种模式视为同一等价类，统一删除。  
- **线性复杂度**：通过单次遍历实现处理，适用于大长度字符串。

---

### **同类型题与推荐题目**

1. **LeetCode 1209. 删除字符串中的所有相邻重复项 II**  
   （类似栈操作，删除连续重复字符）  
2. **洛谷 P1042 乒乓球**  
   （字符串替换与统计）  
3. **LeetCode 394. 字符串解码**  
   （模式匹配与递归处理）

推荐洛谷题目：  
- P1308（字符串匹配）  
- P1071（模式替换）  
- P1482（字符串处理与计数）

---

### **代码实现核心逻辑**

```cpp
string process(string s) {
    string res;
    for (char c : s) {
        res.push_back(c);
        if (res.size() >= 3) {
            string tail = res.substr(res.size() - 3, 3);
            if (tail == "ABC" || tail == "BCA" || tail == "CAB") {
                res.erase(res.end() - 3, res.end());
            }
        }
    }
    return res;
}

// 主函数调用
bool canConvert(string S, string T) {
    return process(S) == process(T);
}
```

---

### **可视化算法设计**

1. **动画方案**  
   - **字符块流动**：字符从左到右逐个进入栈区域。  
   - **模式高亮**：当栈顶三个字符形成可替换模式时，高亮为红色并触发删除动画。  
   - **栈状态更新**：删除后栈长度减少，剩余字符左移填充空缺。

2. **复古像素风格**  
   - **字符显示**：A/B/C 分别用绿/蓝/黄 8-bit 像素块表示。  
   - **音效设计**：  
     - 删除时播放“哔”音效（Web Audio API）。  
     - 成功匹配时播放短促胜利音效。  
   - **Canvas 交互**：支持暂停/步进，显示当前处理位置和栈状态。

3. **自动演示模式**  
   - AI 自动运行，模拟字符处理流程，用户可调节速度观察细节。

---

### **总结**

通过动态维护字符栈并删除等价模式，问题被简化为字符串等价性判断。核心在于操作的可逆性与模式处理的贪心策略，结合线性复杂度实现高效解答。

---
处理用时：74.00秒
# 题目信息

# [AGC060B] Unique XOR Path

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc060/tasks/agc060_b

$ N $ 行 $ M $ 列のグリッドがあります． あなたはグリッドの各マスに $ 0 $ 以上 $ 2^K-1 $ 以下の整数を書き込み，以下の条件を満たしたいです．

- 左上のマスを出発し，右または下に隣接するマスへの移動を繰り返して，右下のマスへと至るパスを考える． ここで，通ったマス (始点終点を含む) に書かれた整数の総 $ \mathrm{XOR} $ が $ 0 $ になるパスを，**よい**パスと呼ぶことにする．
- よいパスはちょうど $ 1 $ つだけ存在し，それは文字列 $ S $ が表すパスである． 文字列 $ S $ が表すパスとは，各 $ i $ ($ 1\ \leq\ i\ \leq\ N+M-2 $) について，$ i $ 回目の移動の際，$ S $ の $ i $ 文字目が `R` なら右，`D` なら下に進むようなパスである．

条件を満たす整数の書き込み方が存在するかどうか判定してください．

$ 1 $ つの入力ファイルにつき，$ T $ 個のテストケースを解いてください．

  ビット単位 $ \mathrm{XOR} $ 演算とは  非負整数 $ A,\ B $ のビット単位 $ \mathrm{XOR} $ 、$ A\ \oplus\ B $ は、以下のように定義されます。

- $ A\ \oplus\ B $ を二進表記した際の $ 2^k $ ($ k\ \geq\ 0 $) の位の数は、$ A,\ B $ を二進表記した際の $ 2^k $ の位の数のうち一方のみが $ 1 $ であれば $ 1 $、そうでなければ $ 0 $ である。
 
 例えば、$ 3\ \oplus\ 5\ =\ 6 $ となります (二進表記すると: $ 011\ \oplus\ 101\ =\ 110 $)。  
 一般に $ k $ 個の非負整数 $ p_1,\ p_2,\ p_3,\ \dots,\ p_k $ のビット単位 $ \mathrm{XOR} $ は $ (\dots\ ((p_1\ \oplus\ p_2)\ \oplus\ p_3)\ \oplus\ \dots\ \oplus\ p_k) $ と定義され、これは $ p_1,\ p_2,\ p_3,\ \dots,\ p_k $ の順番によらないことが証明できます。

## 说明/提示

### 制約

- $ 1\ \leq\ T\ \leq\ 100 $
- $ 2\ \leq\ N,M\ \leq\ 30 $
- $ 1\ \leq\ K\ \leq\ 30 $
- $ S $ はちょうど $ N-1 $ 個の `D` と $ M-1 $ 個の `R` からなる文字列
- 入力される数はすべて整数

### Sample Explanation 1

例えば $ 1 $ ケース目については，以下のようなグリッドを作れば良いです． ``` 11 00 ```

## 样例 #1

### 输入

```
4
2 2 1
RD
4 3 1
RDDDR
15 20 18
DDRRRRRRRDDDDRRDDRDRRRRDDRDRDDRRR
20 15 7
DRRDDDDDRDDDRRDDRRRDRRRDDDDDRRRDD```

### 输出

```
Yes
No
Yes
No```

# AI分析结果



### 综合分析与结论

题目要求确保仅有给定路径的异或和为0，其他路径异或和不为0。关键在于计算所需的最小二进制位数，判断是否不超过K。正确解法基于统计路径中的连续拐点块，每个块贡献的位数由块大小决定。

**核心思路**：将路径中的连续方向变化视为拐点块。每个块长度a贡献⌈a/2⌉位，总位数是否≤K。

### 题解评分（≥4星）

- **Augury的题解（5星）**  
  正确统计连续拐点块，每个块贡献⌈块大小/2⌉位。代码简洁高效，思路清晰。

### 最优思路与技巧

1. **连续拐点处理**  
   将路径中的连续方向变化视为一个块，每个块需要的二进制位数为⌈块大小/2⌉。例如，连续3个拐点需要2位，减少总位数需求。
2. **数学推导**  
   每个拐点块的贡献确保了任何绕道路径的异或和必不为0，通过线性基思想保证各调整路径的异或变化量独立。

### 同类型题推荐

1. [P4151 WC2011 最大XOR和路径](https://www.luogu.com.cn/problem/P4151)  
2. [P4551 最长异或路径](https://www.luogu.com.cn/problem/P4551)  
3. [P3857 TJOI2008 彩灯](https://www.luogu.com.cn/problem/P3857)

### 可视化与算法演示

**动画设计**：  
1. **路径标记**：用不同颜色标记连续拐点块，展示每个块对应的二进制位覆盖区域。  
2. **动态统计**：实时显示当前拐点块大小及所需位数，颜色区分不同位。  
3. **交互控制**：允许调整路径观察拐点块变化，验证位数计算逻辑。

**复古像素风格**：  
- **Canvas网格**：用8位像素风格绘制路径，拐点块以闪烁高亮。  
- **音效提示**：每次统计块时播放不同音调，成功/失败时播放对应音效。

### 代码实现（Augury题解）

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,m,k;
char s[100];
int tot=0,ans=0;
void real_main(){
    scanf("%d%d%d",&n,&m,&k);
    scanf("%s",s);
    tot=ans=0;
    for(int i=1;i<n+m-2;i++){
        if(s[i]!=s[i-1])++tot;
        else{
            ans+=(tot+1)/2;
            tot=0;
        }
    }
    ans+=(tot+1)/2;
    if(ans<=k)puts("Yes");
    else puts("No");
}
int main(){
    int T;
    scanf("%d",&T);
    while(T--){
        real_main();
    }
    return 0;
}
```

**核心逻辑**：遍历路径字符串，统计连续拐点块的长度，每个块贡献⌈长度/2⌉位，最终判断总位数是否≤K。

---
处理用时：377.80秒
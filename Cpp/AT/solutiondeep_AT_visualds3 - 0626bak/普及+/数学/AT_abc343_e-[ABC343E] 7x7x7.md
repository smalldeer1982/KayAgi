# 题目信息

# [ABC343E] 7x7x7

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc343/tasks/abc343_e

> 座標空間上に一辺 $ 7 $ の立方体を $ 3 $ つ、ちょうど $ 1,2,3 $ 個の立方体に含まれる領域の体積がそれぞれ $ V_1,V_2,V_3 $ となるように配置したいです。

$ 3 $ つの整数 $ a,b,c $ に対し、$ (a\leq\ x\leq\ a+7)\ \land\ (b\leq\ y\leq\ b+7)\ \land\ (c\leq\ z\leq\ c+7) $ で表される立方体領域を $ C(a,b,c) $ とおきます。

以下の条件を全て満たすような $ 9 $ つの整数 $ a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3 $ が存在するか判定し、存在するならば実際に $ 1 $ つ求めてください。

- $ |a_1|,|b_1|,|c_1|,|a_2|,|b_2|,|c_2|,|a_3|,|b_3|,|c_3|\ \leq\ 100 $
- $ C_i\ =\ C(a_i,b_i,c_i)\ (i=1,2,3) $ とおいたとき、
  - $ C_1,C_2,C_3 $ のうちちょうど $ 1 $ 個に含まれる領域の体積は $ V_1 $ である。
  - $ C_1,C_2,C_3 $ のうちちょうど $ 2 $ 個に含まれる領域の体積は $ V_2 $ である。
  - $ C_1,C_2,C_3 $ の全てに含まれる領域の体積は $ V_3 $ である。

## 说明/提示

### 制約

- $ 0\leq\ V_1,V_2,V_3\ \leq\ 3\times\ 7^3 $
- 入力は全て整数

### Sample Explanation 1

$ (a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3)=(0,0,0,0,6,0,6,0,0) $ の場合を考えます。 !\[\](https://img.atcoder.jp/abc343/aa534bf0a0e8e3f3487c5eeb540e54dc.png) この図は $ C_1,C_2,C_3 $ の位置関係を表したもので、それぞれ橙、水色、緑の立方体に対応しています。 このとき、 - $ |a_1|,|b_1|,|c_1|,|a_2|,|b_2|,|c_2|,|a_3|,|b_3|,|c_3| $ は全て $ 100 $ 以下 - $ C_1,C_2,C_3 $ の全てに含まれる領域は $ (6\leq\ x\leq\ 7)\land\ (6\leq\ y\leq\ 7)\ \land\ (0\leq\ z\leq\ 7) $ であり、その体積は $ (7-6)\times(7-6)\times(7-0)=7 $ - $ C_1,C_2,C_3 $ のうちちょうど $ 2 $ 個に含まれる領域は $ ((0\leq\ x\ <\ 6)\land\ (6\leq\ y\leq\ 7)\ \land\ (0\leq\ z\leq\ 7))\lor((6\leq\ x\leq\ 7)\land\ (0\leq\ y\ <\ 6)\ \land\ (0\leq\ z\leq\ 7)) $ であり、 その体積は $ (6-0)\times(7-6)\times(7-0)\times\ 2=84 $ - $ C_1,C_2,C_3 $ のうちちょうど $ 1 $ 個に含まれる領域の体積は $ 840 $ であり、条件を全て満たします。 $ (a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3)=(-10,\ 0,\ 0,\ -10,\ 0,\ 6,\ -10,\ 6,\ 1) $ なども同様に条件を全て満たすため、正当な出力として判定されます。

### Sample Explanation 2

条件を全て満たすような $ 9 $ つの整数 $ a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3 $ は存在しません。

## 样例 #1

### 输入

```
840 84 7```

### 输出

```
Yes
0 0 0 0 6 0 6 0 0```

## 样例 #2

### 输入

```
343 34 3```

### 输出

```
No```

# AI分析结果



**算法分类**：暴力枚举、容斥原理

---

### **题解思路、算法要点与解决难点**

1. **核心思路**：
   - **约束条件**：利用体积关系公式 `V1 + 2V2 + 3V3 = 3*7³ = 1029`，提前排除不合法输入。
   - **枚举优化**：固定第一个立方体的位置（如原点），枚举其他两个立方体的坐标在有限范围内（如 `[-7, 7]`），避免全范围枚举。
   - **体积计算**：通过计算两两交集和三者交集的体积，利用容斥原理推导出 `V2` 和 `V3`。

2. **算法实现要点**：
   - **体积计算函数**：对于两个立方体，计算它们在每个轴上的重叠长度，乘积即为交集体积。对于三个立方体，取三个坐标轴上的最小重叠长度。
   - **容斥原理**：计算两两交集体积之和后，减去三倍的三重交集体积，得到恰好两个立方体覆盖的体积 `V2`。

3. **解决难点**：
   - **复杂度优化**：通过限制枚举范围将时间复杂度从 `O(200^9)` 降低到 `O(15^6)`。
   - **正确性验证**：需确保枚举范围覆盖所有可能的相交情况，当三个立方体互不相交时需特殊处理。

---

### **题解评分 (≥4星)**

1. **作者：_Weslie_ (⭐⭐⭐⭐⭐)**
   - **关键亮点**：枚举范围合理（`[-7, 7]`），正确性高，代码简洁易懂。
   - **核心代码**：
     ```cpp
     int f1(int a1, int b1, int c1, int a2, int b2, int c2) {
         // 计算两两交集体积
         int res = 1;
         res *= max(0, min(a1, a2) + 7 - max(a1, a2));
         res *= max(0, min(b1, b2) + 7 - max(b1, b2));
         res *= max(0, min(c1, c2) + 7 - max(c1, c2));
         return res;
     }
     ```

2. **作者：kczw (⭐⭐⭐⭐)**
   - **关键亮点**：枚举范围更小（`[0, 7]`），时间复杂度更低，但需额外验证不相交情况的覆盖性。

---

### **最优思路或技巧提炼**

- **固定第一个立方体**：通过固定第一个立方体的位置（如原点），减少问题自由度。
- **枚举范围剪枝**：利用立方体边长为7的特性，限制其他立方体的坐标在 `[-7, 7]` 内，覆盖所有可能的相交情况。
- **容斥原理**：通过公式 `V2 = 两两交集体积之和 - 3*V3` 快速计算满足条件的体积。

---

### **同类型题或类似算法套路**

- **三维几何覆盖问题**：如计算多个几何体的覆盖区域体积（[洛谷 P1884](https://www.luogu.com.cn/problem/P1884)）。
- **暴力枚举优化**：通过剪枝和约束减少枚举量（[洛谷 P1379](https://www.luogu.com.cn/problem/P1379)）。
- **容斥原理应用**：处理多集合交并问题（[洛谷 P1450](https://www.luogu.com.cn/problem/P1450)）。

---

### **推荐相似题目**

1. **洛谷 P1884 [USACO12FEB] Overplanting S**  
   **标签**：离散化、面积并

2. **洛谷 P1379 八数码难题**  
   **标签**：BFS、状态压缩、剪枝

3. **洛谷 P1450 [HAOI2008] 硬币购物**  
   **标签**：容斥原理、动态规划

---

### **可视化与算法演示**

1. **动画方案**：
   - **三维网格绘制**：用不同颜色标记三个立方体，高亮当前枚举的坐标组合。
   - **体积计算演示**：动态显示两两/三重交集的区域，颜色区分覆盖次数（1/2/3次）。
   - **步进控制**：允许单步执行枚举过程，观察体积计算逻辑。

2. **复古像素风格**：
   - **颜色方案**：立方体用不同色块（橙/蓝/绿），覆盖区域用半透明叠加。
   - **音效提示**：枚举时播放“滴答”音效，找到解时播放胜利音效。

---

### **代码实现片段**

```cpp
// 核心代码（_Weslie_ 的题解）
int f2(int a1, int b1, int c1, int a2, int b2, int c2, int a3, int b3, int c3) {
    // 计算三重交集体积
    int res = 1;
    res *= max(0, min(min(a1, a2), a3) + 7 - max(max(a1, a2), a3));
    res *= max(0, min(min(b1, b2), b3) + 7 - max(max(b1, b2), b3));
    res *= max(0, min(min(c1, c2), c3) + 7 - max(max(c1, c2), c3));
    return res;
}
```

---

### **结论**

正确解法需结合 **固定立方体位置**、**有限范围枚举** 和 **容斥原理**。对于特殊的不相交情况，需额外构造解。现有题解中，_Weslie_ 的实现最为稳健，覆盖了大部分相交情况，但需注意处理全不相交的特殊输入。

---
处理用时：275.70秒
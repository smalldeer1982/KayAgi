# 题目信息

# [ARC173B] Make Many Triangles

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc173/tasks/arc173_b

二次元平面上に相異なる $ N $ 個の点があります。 $ i $ 番目の点の座標は $ (x_i,y_i) $ です。

これらの点のいずれかを頂点とする（非退化な）三角形をたくさん作りたいです。ただし、同じ点を複数の三角形の頂点として用いることはできません。

最大で何個の三角形が作れるか求めてください。

   非退化な三角形とは 非退化な三角形とは、 $ 3 $ つの頂点が同一直線上に並ばない三角形のことを指します。

## 说明/提示

### 制約

- $ 3\ \leq\ N\ \leq\ 300 $
- $ -10^9\ \leq\ x_i,y_i\ \leq\ 10^9 $
- $ i\ \neq\ j $ ならば $ (x_i,y_i)\ \neq\ (x_j,y_j) $
- 入力される値はすべて整数
 
### Sample Explanation 1

例えば $ 1,3,6 $ 番目の点からなる三角形と $ 2,4,5 $ 番目の点からなる三角形を考えると、三角形を $ 2 $ つ作ることができます。 同じ点を複数の三角形の頂点として用いることはできませんが、三角形が共通部分を持っても構いません。

## 样例 #1

### 输入

```
7

0 0

1 1

0 3

5 2

3 4

2 0

2 2```

### 输出

```
2```

## 样例 #2

### 输入

```
3

0 0

0 1000000000

0 -1000000000```

### 输出

```
0```

# AI分析结果



**唯一算法分类**: 几何与贪心

---

### **题解思路与算法要点**

1. **核心结论**  
   - 找出所有点中最多共线的点数 `c`，最大三角形数为 `min(n - c, n//3)`。
   - **关键推导**：若存在 `c` 个点共线，则每两个共线点需与一个非共线点组成三角形。当 `n - c ≥ c//2` 时，答案为 `n - c`；否则为 `n//3`。

2. **解决难点**  
   - **共线判定**：通过向量叉积或斜率比较判断三点是否共线（避免浮点误差）。
   - **暴力枚举**：遍历所有两点确定的直线，统计该直线上的点数，复杂度 `O(n^3)`。

3. **可视化设计思路**  
   - **动画步骤**：
     1. 显示所有点，高亮当前检查的两点形成的直线。
     2. 统计该直线上所有点，记录最大值 `c`。
     3. 最终答案由 `c` 决定，若 `c ≥ 2n/3`，显示 `n - c` 个三角形；否则显示 `n//3`。
   - **复古像素风格**：用 8 位色块表示点，直线用不同颜色高亮，共线点闪烁提示。

---

### **题解评分 ≥4星**

1. **Phartial (★★★★★)**  
   - **亮点**：严谨数学证明，简洁代码实现。  
   - **核心代码**：
     ```cpp
     for (int i=1; i<=n; ++i)
         for (int j=i+1; j<=n; ++j) {
             int c = 0;
             for (int k=1; k<=n; ++k)
                 if (共线判断) c++;
             ans = max(ans, c);
         }
     cout << min(n/3, n - ans);
     ```

2. **coderJerry (★★★★☆)**  
   - **亮点**：直观结论与清晰代码结构。  
   - **关键点**：使用向量叉积避免浮点误差，直接输出 `min(n/3, n - max_c)`。

3. **Starrykiller (★★★★☆)**  
   - **亮点**：随机化贪心的实践性代码。  
   - **技巧**：通过多次 shuffle 点序列并贪心配对，寻找局部最优解。

---

### **最优思路提炼**

- **数学结论**：最大三角形数由最多共线点数 `c` 决定，答案为 `min(n - c, n//3)`。
- **共线判定优化**：使用向量叉积 `(x2 - x1)*(y3 - y1) == (x3 - x1)*(y2 - y1)`，避免浮点运算。

---

### **同类题型与拓展**

- **同类型题目**：  
  1. [ABC340F - S=1](https://atcoder.jp/contests/abc340/tasks/abc340_f)（向量叉积应用）  
  2. [洛谷 P2789 直线交点数](https://www.luogu.com.cn/problem/P2789)（几何计数问题）  
  3. [CF 1025B - Weakened Common Divisor](https://codeforces.com/problemset/problem/1025/B)（数学与最大公约数）

---

### **可视化与算法演示**

- **8位像素动画设计**：  
  - **颜色标记**：共线点用红色，当前检查直线用蓝色，非共线点绿色。  
  - **音效**：找到新最大 `c` 时播放上升音调，最终答案显示时播放胜利音效。  
  - **Canvas 实现**：绘制网格坐标系，点用 8x8 像素方块表示，直线动态绘制。

---

### **代码片段（核心逻辑）**

```cpp
// 寻找最多共线点数
int max_c = 0;
for (int i = 1; i <= n; ++i) {
    for (int j = i + 1; j <= n; ++j) {
        int cnt = 2; // i和j本身在直线上
        for (int k = 1; k <= n; ++k) {
            if (k == i || k == j) continue;
            // 向量叉积判断共线
            if ((x[j] - x[i]) * (y[k] - y[i]) == (x[k] - x[i]) * (y[j] - y[i])) {
                cnt++;
            }
        }
        max_c = max(max_c, cnt);
    }
}
cout << min(n / 3, n - max_c) << endl;
```

---

### **个人心得摘录**

- **调试教训**：浮点误差易导致误判，改用整数运算（向量叉积）是关键。  
- **思维突破**：问题本质是最大化资源（点）分配，贪心与数学结合简化问题。

---
处理用时：58.58秒
# 题目信息

# [ARC121C] Odd Even Sort

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc121/tasks/arc121_c

$ (1,2,\ \ldots,\ N) $ を並び替えた数列 $ p $ が与えられます。 はじめ、$ p $ の第 $ n $ 項は $ p_{n} $ です。

あなたの目的は $ N^2 $ 回以下 *操作* を行い $ p $ を昇順に並び替えることです。 あなたは操作により以下のように $ p $ を変更することができます。

- **奇数** 回目の操作では $ 1 $ 以上 $ N-1 $ 以下の **奇数** $ n $ を選んで $ p_n $ と $ p_{n+1} $ を入れ替えます。
- **偶数** 回目の操作では $ 2 $ 以上 $ N-1 $ 以下の **偶数** $ n $ を選んで $ p_n $ と $ p_{n+1} $ を入れ替えます。

この問題の制約下で必ず目的を達成できることが証明できます。 そのような操作列を $ 1 $ つ求めてください。

$ T $ 個のテストケースが与えられるのでそれぞれについて答えを求めてください。

## 说明/提示

### 制約

- 与えられる入力は全て整数
- $ 1\ \leq\ T\ \leq\ 250 $
- $ 2\ \leq\ N\ \leq\ 500 $
- $ 1\ \leq\ p_i\ \leq\ N $
- $ p $ は $ (1,2,\ldots,N) $ を並び替えて得られる。
- $ 1 $ つの入力ファイルにおいて $ N $ の総和は $ 500 $ を超えない。

### Sample Explanation 1

\- $ 1 $ つ目のテストケースについて説明します。 - $ 1 $ 回目の操作で $ 1 $ を選ぶと $ p $ は $ (1,2,3,5,4) $ となります。 - $ 2 $ 回目の操作で $ 4 $ を選ぶと $ p $ は $ (1,2,3,4,5) $ となります。 - $ (1,4) $ は操作列として正しいですが、$ (4,1) $ は操作列として正しくないことに注意してください。 - 操作を $ 1 $ 度も行わなくともよいこと、操作回数を最小にする必要はないことに注意してください。

## 样例 #1

### 输入

```
2

5

2 1 3 5 4

2

1 2```

### 输出

```
2

1 4

0```

# AI分析结果



1. **唯一算法分类**  
构造性算法（结合选择排序思想）

2. **综合分析与结论**  
本题核心在于构造满足奇偶操作限制的排序策略。通过分析题解，最优解法采用选择排序思路，逐个将最大值归位，当奇偶性不匹配时进行"无效"交换来调整操作奇偶性。关键点在于：

- **核心算法流程**：  
  1. 从后往前找到第一个未归位的最大值  
  2. 若当前操作奇偶与目标位置奇偶匹配，直接连续交换到正确位置  
  3. 若不匹配，执行预设的"无效"交换（如操作最左奇/偶位）改变奇偶性  
  4. 重复直到所有元素归位  

- **可视化设计**：  
  - **像素动画**：用16色块表示数组元素，当前操作位置用闪烁边框高亮  
  - **音效触发**：奇数次操作播放8-bit"哔"声，偶数次操作播放"咚"声  
  - **状态面板**：显示当前步骤奇偶性、已用操作次数、目标元素移动轨迹  
  - **AI自动演示**：模拟贪吃蛇移动逻辑，自动选择下一步操作位置  

3. **题解清单 (≥4星)**  
   - **4星 | _luanyi_的解法**：  
     亮点：巧用"无效"交换调整奇偶性，代码简洁高效，实践验证可靠  
     个人心得："实践是检验真理的唯一标准，调参后直接AC"  

4. **关键代码实现**  
```cpp
void solve() {
    // ...初始化...
    while (!sorted) {
        int x = n;
        while (a[x] == x) --x; // 找最大未归位值
        int j = find_position(x); // 找到x当前位置
        if ((j % 2) == current_parity) { 
            swap_normal(j); // 直接交换
        } else {
            if (current_parity == ODD) swap(1); // 奇操作无效交换
            else swap_chain(2,1,2); // 偶操作三步链式交换
        }
        // ...更新状态...
    }
}
```

5. **同类型题目推荐**  
   - CF1144F（奇偶边构造）  
   - P6184（机械操作序列）  
   - CF1038C（博弈构造）  

6. **可视化实现要点**  
   - **8-bit风格**：使用NES调色板（#401070紫背景，#F8F8F8白文字）  
   - **Canvas网格**：每个元素显示为32x32像素块，归位元素变为绿色  
   - **自动演示**：算法每步延迟300ms，ESC键暂停/继续  
   - **音效设计**：  
     - 有效交换：短促"哔"声（Web Audio正弦波）  
     - 无效交换：低沉"嗡"声（方波）  
     - 完成排序：马里奥过关音效复刻  

7. **核心思想总结**  
通过选择排序框架保证操作次数上限，设计巧妙的奇偶调整策略突破操作限制，将构造题转化为可控的逐步修正过程。该模式适用于需要满足特定操作规则的排序问题。

---
处理用时：92.00秒
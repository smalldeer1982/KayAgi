# 题目信息

# [ABC343E] 7x7x7

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc343/tasks/abc343_e

> 座標空間上に一辺 $ 7 $ の立方体を $ 3 $ つ、ちょうど $ 1,2,3 $ 個の立方体に含まれる領域の体積がそれぞれ $ V_1,V_2,V_3 $ となるように配置したいです。

$ 3 $ つの整数 $ a,b,c $ に対し、$ (a\leq\ x\leq\ a+7)\ \land\ (b\leq\ y\leq\ b+7)\ \land\ (c\leq\ z\leq\ c+7) $ で表される立方体領域を $ C(a,b,c) $ とおきます。

以下の条件を全て満たすような $ 9 $ つの整数 $ a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3 $ が存在するか判定し、存在するならば実際に $ 1 $ つ求めてください。

- $ |a_1|,|b_1|,|c_1|,|a_2|,|b_2|,|c_2|,|a_3|,|b_3|,|c_3|\ \leq\ 100 $
- $ C_i\ =\ C(a_i,b_i,c_i)\ (i=1,2,3) $ とおいたとき、
  - $ C_1,C_2,C_3 $ のうちちょうど $ 1 $ 個に含まれる領域の体積は $ V_1 $ である。
  - $ C_1,C_2,C_3 $ のうちちょうど $ 2 $ 個に含まれる領域の体積は $ V_2 $ である。
  - $ C_1,C_2,C_3 $ の全てに含まれる領域の体積は $ V_3 $ である。

## 说明/提示

### 制約

- $ 0\leq\ V_1,V_2,V_3\ \leq\ 3\times\ 7^3 $
- 入力は全て整数

### Sample Explanation 1

$ (a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3)=(0,0,0,0,6,0,6,0,0) $ の場合を考えます。 !\[\](https://img.atcoder.jp/abc343/aa534bf0a0e8e3f3487c5eeb540e54dc.png) この図は $ C_1,C_2,C_3 $ の位置関係を表したもので、それぞれ橙、水色、緑の立方体に対応しています。 このとき、 - $ |a_1|,|b_1|,|c_1|,|a_2|,|b_2|,|c_2|,|a_3|,|b_3|,|c_3| $ は全て $ 100 $ 以下 - $ C_1,C_2,C_3 $ の全てに含まれる領域は $ (6\leq\ x\leq\ 7)\land\ (6\leq\ y\leq\ 7)\ \land\ (0\leq\ z\leq\ 7) $ であり、その体積は $ (7-6)\times(7-6)\times(7-0)=7 $ - $ C_1,C_2,C_3 $ のうちちょうど $ 2 $ 個に含まれる領域は $ ((0\leq\ x\ <\ 6)\land\ (6\leq\ y\leq\ 7)\ \land\ (0\leq\ z\leq\ 7))\lor((6\leq\ x\leq\ 7)\land\ (0\leq\ y\ <\ 6)\ \land\ (0\leq\ z\leq\ 7)) $ であり、 その体積は $ (6-0)\times(7-6)\times(7-0)\times\ 2=84 $ - $ C_1,C_2,C_3 $ のうちちょうど $ 1 $ 個に含まれる領域の体積は $ 840 $ であり、条件を全て満たします。 $ (a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3)=(-10,\ 0,\ 0,\ -10,\ 0,\ 6,\ -10,\ 6,\ 1) $ なども同様に条件を全て満たすため、正当な出力として判定されます。

### Sample Explanation 2

条件を全て満たすような $ 9 $ つの整数 $ a_1,b_1,c_1,a_2,b_2,c_2,a_3,b_3,c_3 $ は存在しません。

## 样例 #1

### 输入

```
840 84 7```

### 输出

```
Yes
0 0 0 0 6 0 6 0 0```

## 样例 #2

### 输入

```
343 34 3```

### 输出

```
No```

# AI分析结果



---

### 算法分类
**暴力枚举 + 数学容斥**

---

### 题解思路、算法要点与解决难点

#### 核心思路
1. **固定第一个立方体的位置**：所有题解均将第一个立方体固定在原点 `(0,0,0)`，减少枚举变量。
2. **枚举其他立方体的相对坐标**：其他两个立方体的坐标在 `[-7,7]` 或 `[0,7]` 范围内枚举，利用立方体边长为7的特性，保证枚举覆盖所有可能的相交情况。
3. **数学计算交集体积**：通过计算三个维度上的重叠长度，直接求交集区域的体积，避免逐点统计。
4. **容斥原理验证条件**：利用公式 `V1 + 2V2 + 3V3 = 3×7³ = 1029` 快速剪枝，并计算两两和三个立方体的交集体积。

#### 解决难点
- **枚举范围优化**：通过固定第一个立方体和限制其他立方体的相对坐标，将枚举量从 `200^9` 降低到 `15^6` 或 `8^9`。
- **高效体积计算**：利用数学公式直接计算交集体积，避免三维数组遍历。
- **正确性验证**：通过容斥原理验证两两和三个立方体的交集是否满足条件。

---

### 题解评分（≥4星）

1. **wenlebo (4星)**
   - **亮点**：直接暴力枚举所有可能坐标，代码逻辑简单。
   - **缺点**：使用三维数组记录覆盖次数，时间和空间效率较低。

2. **_Weslie_ (5星)**
   - **亮点**：数学计算交集体积，枚举范围合理，代码可读性强。
   - **关键代码**：
     ```cpp
     int three = f2(0,0,0, x2,y2,z2, x3,y3,z3);
     int ab = f1(0,0,0, x2,y2,z2),
         bc = f1(x2,y2,z2, x3,y3,z3),
         ac = f1(0,0,0, x3,y3,z3);
     int two = ab + bc + ac - 3 * three;
     ```

3. **kczw (4星)**
   - **亮点**：完全数学推导，枚举范围进一步缩小。
   - **关键公式**：`V1 = 3×7³ - 2V2 - 3V3`，避免显式计算。

---

### 最优思路或技巧提炼

1. **固定原点策略**：固定第一个立方体位置，减少变量数量。
2. **相对坐标枚举**：其他立方体坐标在 `[-7,7]` 内枚举，覆盖所有可能的相交情况。
3. **数学计算交集体积**：
   - 两两交集：各维度重叠长度相乘。
   - 三立方体交集：取三个立方体各维度的最小重叠长度。
4. **容斥剪枝**：通过 `V1 + 2V2 + 3V3 = 1029` 提前排除非法输入。

---

### 同类型题与类似算法

- **通用解法**：对于多几何体重叠体积问题，固定参考系 + 数学计算是常见优化手段。
- **类似题目**：
  1. [P1888 三角形面积](https://www.luogu.com.cn/problem/P1888)（二维几何计算）
  2. [CF1000D Yet Another Problem On a Subsequence](https://codeforces.com/problemset/problem/1000/D)（多维容斥）
  3. [AT4142 立方体の切り分け](https://atcoder.jp/contests/abc196/tasks/abc196_d)（三维空间划分）

---

### 可视化与算法演示设计

#### 核心逻辑动画
- **三维坐标系**：用不同颜色表示三个立方体，动态调整坐标并高亮重叠区域。
- **体积实时计算**：显示两两交集体积和三个交集体积的变化。
- **步进控制**：允许单步调整立方体坐标，观察体积计算过程。

#### 复古像素风格设计
- **8位色块表示**：用像素方块表示立方体，颜色区分不同区域。
- **音效触发**：
  - 正确解：播放胜利音效。
  - 错误解：短促“错误”音效。
- **自动演示模式**：AI自动遍历坐标组合，动态显示搜索过程。

---

### 代码片段（核心逻辑）

```cpp
// 计算两个立方体的交集体积
int f1(int a1, int b1, int c1, int a2, int b2, int c2) {
    int dx = max(0, 7 - abs(a1 - a2));
    int dy = max(0, 7 - abs(b1 - b2));
    int dz = max(0, 7 - abs(c1 - c2));
    return dx * dy * dz;
}

// 计算三个立方体的交集体积
int f2(int a1, int b1, int c1, int a2, int b2, int c2, int a3, int b3, int c3) {
    int x_min = max({a1, a2, a3});
    int x_max = min({a1+7, a2+7, a3+7});
    int dx = max(0, x_max - x_min);

    int y_min = max({b1, b2, b3});
    int y_max = min({b1+7, b2+7, b3+7});
    int dy = max(0, y_max - y_min);

    int z_min = max({c1, c2, c3});
    int z_max = min({c1+7, c2+7, c3+7});
    int dz = max(0, z_max - z_min);

    return dx * dy * dz;
}
```

---

### 个人心得摘录

- **调试教训**：初始枚举范围过大导致超时，需利用立方体特性缩小范围。
- **顿悟点**：交集体积仅与相对位置有关，平移不影响结果，可固定原点。
- **优化技巧**：数学公式替代逐点统计，效率提升百倍。

---

### 推荐类似题目
1. **洛谷P3384**：三维空间几何计算。
2. **ATcoder ABC196D**：立方体切割问题。
3. **CF1359D**：多维区间交集与极值。

---
处理用时：119.21秒
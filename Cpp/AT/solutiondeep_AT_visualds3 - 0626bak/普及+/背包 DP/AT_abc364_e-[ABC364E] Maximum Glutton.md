# 题目信息

# [ABC364E] Maximum Glutton

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc364/tasks/abc364_e

高橋君はすぬけ君のために $ N $ 個の料理を作りました。 料理には $ 1 $ から $ N $ までの番号がつけられていて、料理 $ i $ の**甘さ**は $ A_i $、**しょっぱさ**は $ B_i $ です。

高橋君はこれらの料理を好きな順番で並べることができます。 すぬけ君は料理を並べられた順に食べていきますが、ある時点においてそれまでに食べた料理の甘さの合計が $ X $ を超えるかしょっぱさの合計が $ Y $ を超えた場合、それ以降の料理は食べません。

高橋君は、すぬけ君にできるだけ多くの料理を食べてほしいと思っています。 高橋君がうまく料理を並べたとき、すぬけ君が最大で何個の料理を食べることになるか求めてください。

## 说明/提示

### 制約

- $ 1\leq\ N\ \leq\ 80 $
- $ 1\leq\ A_i,B_i\ \leq\ 10000 $
- $ 1\leq\ X,Y\ \leq\ 10000 $
- 入力は全て整数

### Sample Explanation 1

高橋君が料理を $ 2,3,1,4 $ の順番で並べた場合のすぬけ君の行動を考えます。 - まず料理 $ 2 $ を食べる。ここまでに食べた料理の甘さの合計は $ 3 $、しょっぱさの合計は $ 2 $ である。 - 次に料理 $ 3 $ を食べる。ここまでに食べた料理の甘さの合計は $ 7 $、しょっぱさの合計は $ 3 $ である。 - 次に料理 $ 1 $ を食べる。ここまでに食べた料理の甘さの合計は $ 8 $、しょっぱさの合計は $ 8 $ である。 - しょっぱさの合計が $ Y=4 $ を超えたので、これ以降の料理は食べない。 よって、この並び方の場合すぬけ君は $ 3 $ 個の料理を食べることになります。 高橋君が料理をどのように並べてもすぬけ君が $ 4 $ つ全ての料理を食べることはないので、答えは $ 3 $ です。

## 样例 #1

### 输入

```
4 8 4
1 5
3 2
4 1
5 3```

### 输出

```
3```

## 样例 #2

### 输入

```
2 1 1
3 2
3 2```

### 输出

```
1```

## 样例 #3

### 输入

```
2 100 100
3 2
3 2```

### 输出

```
2```

## 样例 #4

### 输入

```
6 364 463
230 381
154 200
328 407
339 94
193 10
115 309```

### 输出

```
3```

# AI分析结果



## 算法分类
模拟退火

## 题解思路、算法要点与解决难点

### 核心思路
题目要求找到一种菜品排列顺序，使得斯努克在吃完某道菜后总甜度或咸度首次超过限制，从而确定能吃的最大菜品数。由于顺序对结果影响极大，且直接枚举所有排列不可行，采用模拟退火（SA）进行启发式搜索，通过随机交换元素寻找较优解。

### 解决难点
1. **排列顺序敏感**：不同的排列顺序可能导致完全不同的结果，无法通过简单的子集选择解决。
2. **动态规划失效**：传统二维背包无法处理中间步骤的累加和检查。
3. **高效搜索策略**：模拟退火通过概率性接受次优解，避免陷入局部最优，适合此类排列优化问题。

### 算法要点
1. **评估函数**：计算当前排列下能吃的最大菜品数。
2. **邻域生成**：随机交换两个菜品位置，生成新解。
3. **退火参数**：初始温度、降温速率、终止温度控制搜索过程。

## 最优思路或技巧提炼
- **模拟退火**：适用于排列优化问题，尤其当状态空间庞大且难以用传统方法求解时。
- **概率性接受次优解**：避免陷入局部最优，增加找到全局最优的可能性。
- **参数调优**：初始温度（1e5）、降温速率（0.998）等参数需根据问题规模调整。

## 题解评分（≥4星）
### Link_Cut_Y 的题解（赞15） ★★★★☆
- **思路亮点**：利用模拟退火处理排列优化，代码简洁高效。
- **代码亮点**：随机交换邻域生成，退火参数设置合理。
- **改进点**：未优化初始温度和降温策略，可能影响收敛速度。

## 可视化与算法演示
### 像素风格动画设计
1. **像素网格**：用8x8像素块表示每道菜，颜色按甜度（红）和咸度（蓝）渐变。
2. **当前操作高亮**：交换的菜品用闪烁边框标记。
3. **累加条显示**：顶部动态显示甜度（红条）和咸度（蓝条）的实时累加。
4. **音效反馈**：交换时触发“哔”声，找到更优解时播放上扬音效。

### 算法演示逻辑
```javascript
// 伪代码示例
class Dish {
  constructor(a, b) { this.a = a; this.b = b; }
}

class SA {
  constructor(dishes) {
    this.dishes = dishes;
    this.bestOrder = [...dishes];
    this.currentOrder = [...dishes];
    this.temperature = 1e5;
  }

  evaluate(order) {
    let sumA = 0, sumB = 0, cnt = 0;
    for (const dish of order) {
      if (sumA + dish.a > X || sumB + dish.b > Y) break;
      sumA += dish.a; sumB += dish.b; cnt++;
    }
    return cnt;
  }

  anneal() {
    const currentScore = this.evaluate(this.currentOrder);
    while (this.temperature > 1e-7) {
      const [i, j] = this.randomSwap();
      const newScore = this.evaluate(this.currentOrder);
      const delta = newScore - currentScore;
      if (delta > 0 || Math.exp(delta / this.temperature) > Math.random()) {
        // 接受新解
      } else {
        this.undoSwap(i, j);
      }
      this.temperature *= 0.998;
    }
  }
}
```

## 同类型题与算法套路
- **排列优化问题**：如旅行商问题（TSP）、作业调度问题。
- **启发式算法**：模拟退火、遗传算法、粒子群优化。

## 推荐题目
1. **洛谷P1337 [JSOI2004]平衡点**（模拟退火经典）
2. **洛谷P4366 [Code+#4]最短路**（启发式搜索）
3. **洛谷P3698 [CQOI2017]小Q的棋盘**（状态压缩+贪心）

---
处理用时：422.41秒
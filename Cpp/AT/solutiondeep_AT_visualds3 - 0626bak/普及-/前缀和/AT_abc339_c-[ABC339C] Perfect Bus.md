# 题目信息

# [ABC339C] Perfect Bus

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc339/tasks/abc339_c

一台のバスが走っています。バスの乗客の数は常に非負整数です。

このバスにはある時点で $ 0 $ 人以上の乗客が乗っており、その時点から現在までに $ N $ 回停車しました。このうち $ i $ 回目の停車では乗客が差し引き $ A_i $ 人増えました。$ A_i $ は負の値であることもあり、その場合は乗客が差し引き $ -A_i $ 人減ったことを意味しています。また、停車時以外には乗客の乗り降りはありませんでした。

与えられた情報に矛盾しない現在のバスの乗客の数として考えられる最小値を求めてください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ -10^9\ \leq\ A_i\ \leq\ 10^9 $
- 入力される数値はすべて整数
 
### Sample Explanation 1

はじめに乗っている乗客の人数が $ 2 $ 人であるとき、現在の乗客の人数は $ 2\ +\ 3\ +\ (-5)\ +\ 7\ +\ (-4)\ =\ 3 $ 人であり、さらにバスの乗客の人数は常に非負整数となります。

## 样例 #1

### 输入

```
4

3 -5 7 -4```

### 输出

```
3```

## 样例 #2

### 输入

```
5

0 0 0 0 0```

### 输出

```
0```

## 样例 #3

### 输入

```
4

-1 1000000000 1000000000 1000000000```

### 输出

```
3000000000```

# AI分析结果



**唯一算法分类**  
前缀和与贪心

---

### **题解思路、算法要点与解决难点**

#### **核心思路**
1. **问题转化**：初始人数未知，需保证所有时刻乘客数≥0。通过前缀和的最小值确定初始人数的补偿量。
2. **关键变量**：计算前缀和数组的最小值 `Min`。若 `Min < 0`，则初始人数需至少为 `-Min`，否则初始为0。最终结果为 `总和 - Min`。
3. **解决难点**：理解前缀和的最小值对应初始人数的调整量，确保所有时刻非负。

---

### **题解评分 (≥4星)**

1. **Genius_Star（4星）**  
   - 亮点：思路清晰，直接计算前缀和最小值，代码高效。
   - 代码：`sum` 累加，`Min` 记录最小值，最终输出 `abs(Min) + sum`。

2. **indream（4星）**  
   - 亮点：代码极简，直接边读边计算，空间复杂度 O(1)。
   - 代码：`sum` 动态更新，`minn` 记录最小值，输出 `sum - minn`。

3. **SJZ2010（4星）**  
   - 亮点：明确前缀和最小值与初始人数的关系，代码简明。
   - 代码：前缀和 `tmp` 动态计算，最终结果 `-mi + tmp`。

---

### **最优思路或技巧提炼**
- **前缀和最小值法**：计算前缀和的最小值 `Min`，初始人数为 `max(0, -Min)`，最终结果为 `总和 + 初始人数`。
- **时间复杂度 O(N)**：无需额外存储前缀和数组，动态计算即可。

---

### **同类型题或类似算法套路**
- **前缀和极值问题**：如最大子数组和（LeetCode 53）。
- **约束条件下的极值调整**：如「柠檬水找零」（LeetCode 860）。

---

### **推荐相似题目**
1. [洛谷 P1115 最大子段和](https://www.luogu.com.cn/problem/P1115)  
2. [LeetCode 53. 最大子数组和](https://leetcode.com/problems/maximum-subarray/)  
3. [洛谷 P1981 表达式求值](https://www.luogu.com.cn/problem/P1981)

---

### **个人心得摘录**
- **调试教训**：二分法需注意上界范围，否则可能越界（如 `r=1e18` 不够大）。
- **顿悟点**：前缀和最小值直接决定初始补偿量，无需复杂模拟。

---

### **可视化与算法演示**

#### **核心算法流程**
1. **动态更新前缀和**：逐站累加 `sum`，记录最小值 `Min`。
2. **颜色标记**：当前站点数值变化用红色高亮，`Min` 更新时用黄色闪烁。
3. **动画设计**：Canvas 绘制折线图，实时显示 `sum` 和 `Min`，最终展示初始人数补偿。

#### **复古像素化实现**
- **颜色方案**：8位色调，绿色表示正常乘客数，红色表示负数告警。
- **音效触发**：  
  - 站点变化：短促「滴」声。  
  - `Min` 更新：低音「咚」声。  
  - 结果计算：胜利音效。

#### **代码片段（关键逻辑）**
```cpp
long long sum = 0, minn = 0;
for (int i = 0; i < n; ++i) {
    int a;
    cin >> a;
    sum += a;
    if (sum < minn) minn = sum; // 更新最小值
}
cout << (sum - minn); // 最终结果
```

---

### **结论**
通过前缀和最小值直接推导初始人数，贪心法时间复杂度最优（O(N)），代码简洁。可视化设计可结合动态折线图与复古像素风格，增强理解与趣味性。

---
处理用时：69.74秒
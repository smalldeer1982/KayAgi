# 题目信息

# 鏡文

## 题目描述

给出由b、d、p、q四种字符组成的字符串$S$。请判断$S$是不是“镜像字符串”。

这里的“镜像字符串”是指对字符串S进行以下操作后，可得到与原字符串相同的字符串。
1. 反转S。（例："bdpq"=>"qpdb"）
2. 改b为d，改d为b，改p为q，改q为p（不要搞错对应关系）

## 说明/提示

## 条件：
- $1≤|S|≤10^5$（$|S|$表示$S$的长度）
- $S$由且仅由b、d、p、q四种字符构成

感谢@std_cpp 提供的翻译

## 样例 #1

### 输入

```
pdbq```

### 输出

```
Yes```

## 样例 #2

### 输入

```
ppqb```

### 输出

```
No```

# AI分析结果



# 鏡文题解分析

## 算法分类
字符串处理/模拟

---

## 题解思路与核心难点
**核心逻辑**：  
镜像字符串需满足以下条件：  
1. 反转字符串后，将每个字符按规则替换（b↔d，p↔q），结果与原字符串相同。
2. 若字符串长度为奇数，中间字符无法满足镜像对称条件（替换后必变），直接返回`No`。

**解决难点**：  
1. **正确替换顺序**：必须先反转字符串再替换字符，或等效检查每个字符的对称关系。
2. **高效的空间优化**：避免完全复制和反转长字符串，采用双指针法直接比较。

---

## 题解评分（≥4星）
1. **PBCWZCC（5星）**  
   - **双指针法**，时间复杂度O(n/2)，空间复杂度O(1)。  
   - 通过数值编码和模运算简化字符替换逻辑，高效且简洁。  
   - 正确处理奇数长度情况。

2. **k2saki（4星）**  
   - 使用`reverse`函数反转字符串后替换，代码简洁易懂。  
   - 时间复杂度O(n)，空间复杂度O(n)，适合小规模输入。

3. **Bob_Wang（4星）**  
   - 指针法直接比较对称位置的替换结果，节省空间。  
   - 代码逻辑清晰，易于理解。

---

## 最优思路提炼
**双指针法**：  
1. **奇数长度直接排除**：`if (len % 2 != 0) return "No"`。
2. **对称位置检查**：  
   对于每个位置`i`，原字符串的`s[i]`必须等于对称位置`s[n-i-1]`替换后的字符。
3. **替换规则映射**：  
   用数值编码（如b→0, p→1, d→2, q→3），通过`(val + 2) % 4`判断是否匹配。

---

## 同类型题与算法套路
- **对称性检查**：如回文串判断（LeetCode 125）。  
- **字符替换映射**：如罗马数字转整数（LeetCode 13）。  
- **双指针优化空间**：如两数之和（LeetCode 167）。

---

## 推荐练习题
1. **洛谷 P1308**（字符串处理）  
2. **洛谷 P1012**（字符替换与拼接）  
3. **洛谷 P1598**（对称性与哈希统计）

---

## 核心代码实现
```cpp
// PBCWZCC的双指针法代码（数值编码+模运算）
#include<cstdio>
#include<cstring>
int get[128]; // 字符到数值的映射
int main() {
    get['b'] = 0, get['p'] = 1, get['d'] = 2, get['q'] = 3;
    char s[100007];
    scanf("%s", s + 1);
    int len = strlen(s + 1);
    if (len % 2) { puts("No"); return 0; }
    for (int i = 1; i <= len / 2 + 1; ++i) {
        int j = len - i + 1;
        if (get[s[i]] != (get[s[j]] + 2) % 4) {
            puts("No"); return 0;
        }
    }
    puts("Yes");
    return 0;
}
```

---

## 可视化算法设计
### 动画方案（双指针法）
1. **像素风格界面**：  
   - 使用Canvas绘制字符串为像素块，颜色区分`b/d/p/q`。
2. **指针移动与高亮**：  
   - 左右指针（红色/蓝色方块）向中间移动，每一步高亮当前比较的字符。
3. **替换效果展示**：  
   - 右侧字符替换后变为对应颜色，与原左侧字符对比，匹配则显示绿色√，否则显示红色×。
4. **音效与交互**：  
   - 匹配成功播放“叮”音效，失败播放“哔”音效。  
   - 支持暂停/步进，速度调节。

![动画示意图](https://i.imgur.com/8mR0XqC.gif)

---

## 个人心得摘录
> **PBCWZCC**：  
> “数值编码和模运算让对称检查变得优雅，避免复杂的条件分支。”  
> **k2saki**：  
> “善用STL的`reverse`和字符串比较，代码简洁才是王道。”  
> **Bob_Wang**：  
> “指针法省空间，但边界处理需谨慎，差一错误是常客。”

---
处理用时：139.26秒
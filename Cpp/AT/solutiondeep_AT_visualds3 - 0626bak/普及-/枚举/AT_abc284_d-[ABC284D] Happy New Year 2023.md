# 题目信息

# [ABC284D] Happy New Year 2023

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc284/tasks/abc284_d

正整数 $ N $ が与えられます。$ N $ は、$ 2 $ つの相異なる素数 $ p,q $ を用いて $ N=p^2q $ と表せることがわかっています。

$ p,q $ を求めてください。

$ T $ 個のテストケースが与えられるので、それぞれについて答えを求めてください。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\leq\ T\leq\ 10 $
- $ 1\leq\ N\ \leq\ 9\times\ 10^{18} $
- $ N $ は、$ 2 $ つの相異なる素数 $ p,q $ を用いて $ N=p^2q $ と表せる
 
### Sample Explanation 1

$ 1 $ 番目のテストケースについて、$ N=2023=17^2\times\ 7 $ です。よって、$ p=17,q=7 $ です。

## 样例 #1

### 输入

```
3

2023

63

1059872604593911```

### 输出

```
17 7

3 7

104149 97711```

# AI分析结果



**唯一算法分类**：数学因数分解

---

### **综合分析与结论**

**核心思路**：  
题目给定 \( N = p^2 q \)，其中 \( p, q \) 为质数。关键性质是 \(\min(p, q) \leq \sqrt[3]{N}\)。通过枚举较小的质数 \( i \)，判断其是否为 \( p \) 或 \( q \)，并验证剩余部分的合法性。

**算法流程**：
1. 枚举 \( i \) 从 2 开始，找到第一个能整除 \( N \) 的数。
2. 若 \( i^2 \mid N \)，则 \( p = i \)，\( q = N / i^2 \)。
3. 否则 \( q = i \)，计算 \( p = \sqrt{N / i} \)，验证是否为整数。

**解决难点**：
- **大数处理**：直接暴力枚举需处理大数，但利用性质将范围限制在 \( O(\sqrt[3]{N}) \)。
- **质数验证**：多数解法通过枚举第一个因子，无需显式判断质数（题目保证解存在）。

**可视化设计**：
- **动画效果**：以网格展示枚举过程，当前枚举的 \( i \) 高亮显示，动态计算 \( N/i \) 和平方根。
- **音效**：找到合法 \( i \) 时播放成功音效，错误时提示。
- **复古风格**：用 8-bit 像素风格展示因数分解过程，步进控制允许用户观察每个 \( i \) 的判断逻辑。

---

### **题解清单 (≥4星)**

1. **CarroT1212 (5星)**  
   - **亮点**：代码简洁，直接暴力枚举第一个因子，利用数学性质快速判断 \( p \) 或 \( q \)，无预处理，适合大范围数据。
   ```cpp
   for (ll i = 2;; i++) if (n % i == 0) {
       ll j = sqrt(n / i);
       if (j * j == n / i) printf("%lld %lld\n", j, i);
       else printf("%lld %lld\n", i, n / i / i);
   }
   ```

2. **Hell0_W0rld (4星)**  
   - **亮点**：明确分情况讨论，优先处理偶数，减少枚举次数，逻辑清晰。
   ```cpp
   if (N % 4 == 0) { ... } // 处理偶数
   else if (N % 2 == 0) { ... }
   ```

3. **Esperance (4星)**  
   - **亮点**：处理精度问题，存储平方根避免浮点误差，代码鲁棒性强。
   ```cpp
   long long ljp = n / i, wyx = sqrt(ljp);
   ```

---

### **最优思路提炼**

1. **枚举第一个因子**：题目保证解存在，第一个满足 \( i \mid N \) 的数必为 \( p \) 或 \( q \)，无需质数判断。
2. **分情况讨论**：
   - \( i^2 \mid N \) → \( p = i \)
   - 否则 \( q = i \)，计算 \( p = \sqrt{N/i} \)
3. **避免浮点误差**：用整数运算或二分法求平方根。

---

### **同类型题推荐**

1. **P1075 [NOIP2012 普及组] 质因数分解**  
   - 求 \( N = p \times q \) 中的较小质数。

2. **P1069 [NOIP2009 普及组] 细胞分裂**  
   - 分解质因数并计算指数关系。

3. **P1029 [NOIP2001 普及组] 最大公约数和最小公倍数问题**  
   - 利用质因数分解求数对数量。

---

### **可视化与算法演示**

**动画设计**：
- **界面布局**：左侧为 8-bit 像素风格网格，右侧显示当前 \( i \) 和 \( N \) 的分解状态。
- **关键步骤**：
  1. 高亮当前枚举的 \( i \)，计算 \( N \% i \)。
  2. 若整除，计算 \( N/i \) 并判断平方根是否为整数。
  3. 成功时显示 \( p \) 和 \( q \)，播放胜利音效。
- **交互功能**：支持步进控制，可调节枚举速度，背景音乐为复古芯片音乐。

**代码片段（JS 伪代码）**：
```javascript
function visualize() {
  let i = 2;
  const interval = setInterval(() => {
    highlight(i); // 高亮当前i
    if (N % i === 0) {
      const sqrtVal = Math.sqrt(N / i);
      if (sqrtVal % 1 === 0) {
        playSuccessSound();
        showResult(sqrtVal, i);
      } else {
        playClickSound();
        showResult(i, N / (i * i));
      }
      clearInterval(interval);
    }
    i++;
  }, speed);
}
```

---

**个人心得**：  
- **调试教训**：直接使用 `sqrt()` 可能导致浮点误差，需强制转换为整数类型。
- **优化经验**：优先处理偶数可显著减少枚举次数，尤其在 \( N \) 较大时。

---
处理用时：70.71秒
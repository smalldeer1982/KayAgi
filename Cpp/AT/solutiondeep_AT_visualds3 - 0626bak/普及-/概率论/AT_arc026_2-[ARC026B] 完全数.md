# 题目信息

# [ARC026B] 完全数

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc026/tasks/arc026_2

高橋君は完全なものが大好きです。

自然数には、完全数というものがあります。 完全数というのは、自分以外の約数の総和が自分と等しくなる自然数のことです。 例えば $ 6 $ の場合 $ 1\ +\ 2\ +\ 3\ =\ 6 $となるので完全数です。 それに対して、自分以外の約数の総和が自分より小さくなる場合は不足数と言い、大きくなる場合は過剰数と言います。

高橋君には今気になっている自然数があります。高橋君のために、それが完全数なのか不足数なのか過剰数なのか判定してください。

## 说明/提示

### 部分点

この問題には部分点が設定されている。

- $ 1\ ≦\ N\ ≦\ 10^5 $を満たすデータセットに正解した場合は $ 50 $ 点が与えられる。
- $ 1\ ≦\ N\ ≦\ 10^{10} $を満たすデータセットに正解した場合はさらに $ 50 $ 点が与えられる。合計で$ 100 $点となる。

### Sample Explanation 1

$ 1\ +\ 2\ +\ 3\ =\ 6 $なので$ 6 $は完全数です。

### Sample Explanation 2

$ 1\ +\ 2\ +\ 3\ +\ 4\ +\ 6\ +\ 8\ +\ 12\ >\ 24 $なので$ 24 $は過剰数です。

### Sample Explanation 3

$ 1\ +\ 3\ +\ 9\ <\ 27 $なので$ 27 $は不足数です。

## 样例 #1

### 输入

```
6```

### 输出

```
Perfect```

## 样例 #2

### 输入

```
24```

### 输出

```
Abundant```

## 样例 #3

### 输入

```
27```

### 输出

```
Deficient```

## 样例 #4

### 输入

```
945```

### 输出

```
Abundant```

# AI分析结果



# 算法分类与题解分析

**唯一算法分类**：数学（约数和计算）

---

## **题解思路与核心难点**

**核心思路**：  
1. **约数对优化**：遍历至√n，每找到因数i，同时累加i和n/i（避免重复遍历）。  
2. **平方数处理**：当i = n/i时（即完全平方数），需避免重复累加。  
3. **真约数和**：最终结果需减去n本身（题目要求排除自身）。  
4. **特判n=1**：1的真约数和为0，直接判定为不足数。

**难点与解决**：  
- **时间复杂度**：暴力枚举O(n)无法处理1e10，优化至O(√n)。  
- **重复计数**：平方根因数导致重复累加，需特殊处理。  
- **边界条件**：n=1需单独处理。

---

## **题解评分（≥4星）**

1. **珅肐（4星）**  
   - **亮点**：正确处理平方数，代码简洁，注释明确。  
   - **代码**：通过累加后减sqrt(n)避免重复，逻辑清晰。  

2. **tiaotiao（4星）**  
   - **亮点**：详细注释，显式处理减n和平方根。  
   - **代码**：使用`sum -= n`直接得到真约数和。  

3. **dmslhy（4星）**  
   - **亮点**：循环外单独处理i=1，代码风格独特但正确。  
   - **代码**：循环从i=2开始，最后加1，避免漏算。  

---

## **最优思路提炼**

1. **因数对遍历**：  
   ```cpp
   for (int i=1; i<=sqrt(n); i++) {
       if (n%i == 0) {
           sum += i + (n/i);
           if (i == n/i) sum -= i; // 平方根去重
       }
   }
   sum = sum - n; // 排除自身
   ```

2. **特判与优化**：  
   - 提前处理n=1。  
   - 使用`sqrt(n)`减少循环次数。  

---

## **同类型题与推荐**

1. **质因数分解**（洛谷P1075）：分解大数的质因数。  
2. **最大公约数**（洛谷P1029）：利用因数性质求解。  
3. **回文质数**（洛谷P1217）：结合质数与回文数特性。  

---

## **个人心得摘录**

- **调试教训**：未处理平方根导致重复累加（EtOH_Lewis的初始代码）。  
- **优化思路**：通过因数对减少循环次数是核心优化（珅肐的题解）。  

---

## **可视化算法设计**

**动画设计**：  
1. **网格遍历**：以√n为边长绘制网格，高亮当前遍历的i和n/i。  
2. **颜色标记**：  
   - 绿色：当前i和n/i被选中。  
   - 红色：平方根因数（特殊提示）。  
3. **动态更新**：实时显示sum的累加过程，最终与n比较。  

**复古风格**：  
- **像素音效**：每找到因数播放“滴”声，平方根时播放“嘟”声。  
- **自动演示**：AI自动遍历i，步进速度可调，过关提示积分。  

**代码片段（Canvas绘图）**：  
```javascript
// 绘制因数的网格遍历
ctx.fillStyle = "#00FF00"; // 高亮当前i
ctx.fillRect(i*cellSize, 0, cellSize, cellSize);
ctx.fillStyle = "#FF0000"; // 平方根特殊标记
if (i === n/i) ctx.fillRect(...);
```

---

## **结论**

通过优化因数遍历至√n并处理边界条件，可在O(√n)时间高效求解。关键点在于正确去重平方根和排除自身，结合可视化可直观展示算法流程。

---
处理用时：178.88秒
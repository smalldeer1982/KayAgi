# 题目信息

# [ABC178C] Ubiquity

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc178/tasks/abc178_c

長さ $ N $ の整数の列 $ A_1,A_2,\ldots,A_N $ であって以下の条件をすべて満たすものはいくつありますか。

- $ 0\ \leq\ A_i\ \leq\ 9 $
- $ A_i=0 $ なる $ i $ が存在する。
- $ A_i=9 $ なる $ i $ が存在する。

ただし、答えはとても大きくなる可能性があるので、$ 10^9+7 $ で割った余りを出力してください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^6 $
- $ N $ は整数

### Sample Explanation 1

数列$ \{0,9\} $,$ \{9,0\} $の $ 2 $ つが条件をすべて満たします。

## 样例 #1

### 输入

```
2```

### 输出

```
2```

## 样例 #2

### 输入

```
1```

### 输出

```
0```

## 样例 #3

### 输入

```
869121```

### 输出

```
2511445```

# AI分析结果



## 算法分类
**组合数学（容斥原理）**

---

## 综合分析与结论

### 题解思路与核心难点
题目要求统计满足同时包含0和9的序列数目。直接计算较难，故采用容斥原理：
- **总情况数**：10^N（每个位置0-9）
- **不合法情况**：
  - 不含0的数目：9^N（每个位置1-9）
  - 不含9的数目：9^N
  - 同时不含0和9的数目：8^N（每个位置1-8）
- **公式**：`ans = 10^N - 2*9^N + 8^N`  
  通过快速幂计算大数取模，避免溢出。

### 可视化设计思路
- **动画演示**：以网格展示不同情况数的变化，高亮当前计算步骤（如10^N、9^N等）。
- **像素风格**：用不同颜色方块表示各幂次结果，结合音效提示关键步骤完成。
- **交互控制**：允许单步执行观察公式推导过程，动态显示容斥原理的减加逻辑。

---

## 最优思路提炼
**核心公式推导**  
利用容斥原理将问题转化为数学表达式，快速幂高效计算大数模运算。  
**关键代码实现**  
快速幂函数确保大指数计算效率，模运算处理负数情况：
```cpp
ll pow_mod(ll a, ll n) {
    ll res = 1;
    while (n) {
        if (n & 1) res = res * a % MOD;
        a = a * a % MOD;
        n >>= 1;
    }
    return res;
}

ll ans = (pow_mod(10, n) - 2 * pow_mod(9, n) + pow_mod(8, n)) % MOD;
ans = (ans + MOD) % MOD; // 确保非负
```

---

## 完整代码
```cpp
#include <iostream>
using namespace std;
using ll = long long;
const ll MOD = 1e9 + 7;

ll pow_mod(ll a, ll n) {
    ll res = 1;
    a %= MOD;
    while (n > 0) {
        if (n % 2) res = (res * a) % MOD;
        a = (a * a) % MOD;
        n /= 2;
    }
    return res;
}

int main() {
    ll n;
    cin >> n;
    ll a = pow_mod(10, n);
    ll b = pow_mod(9, n);
    ll c = pow_mod(8, n);
    ll ans = (a - (2 * b) % MOD + c) % MOD;
    ans = (ans + MOD) % MOD;
    cout << ans << endl;
    return 0;
}
```

---

## 相似题目推荐
1. **洛谷 P3197 [HNOI2008]越狱**  
   组合计数，容斥原理应用。
2. **洛谷 P3414 SAC#1 - 组合数**  
   快速幂与组合数学结合。
3. **洛谷 P1313 计算系数**  
   二项式定理与快速幂。

---
处理用时：79.37秒
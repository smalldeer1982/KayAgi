# 题目信息

# [ABC312B] TaK Code

## 题目描述

**题意简述**

对 Tak 二维码的定义为：

- 一个 $9 \times 9$ 的黑白方阵。
- 左上角和右下角 $3 \times 3$ 的方块都为黑块，并且它们周围一圈的 $14$ 个方块都为白块。

给定一个图，求出其中所有 Tak 二维码的左上角字符的坐标。`#` 代表黑块，`.` 代表白块。

如果没看懂，请看下图。其中 `#` 的位置必须为黑块，`.` 的位置必须为白块，`@` 的位置都可以。
```
###.@@@@@
###.@@@@@
###.@@@@@
....@@@@@
@@@@@@@@@
@@@@@....
@@@@@.###
@@@@@.###
@@@@@.###
```

## 说明/提示

- $9 \le N,M \le 100$

## 样例 #1

### 输入

```
19 18
###......###......
###......###......
###..#...###..#...
..............#...
..................
..................
......###......###
......###......###
......###......###
.###..............
.###......##......
.###..............
............###...
...##.......###...
...##.......###...
.......###........
.......###........
.......###........
........#.........```

### 输出

```
1 1
1 10
7 7
10 2```

## 样例 #2

### 输入

```
9 21
###.#...........#.###
###.#...........#.###
###.#...........#.###
....#...........#....
#########...#########
....#...........#....
....#.###...###.#....
....#.###...###.#....
....#.###...###.#....```

### 输出

```
1 1```

## 样例 #3

### 输入

```
18 18
######............
######............
######............
######............
######............
######............
..................
..................
..................
..................
..................
..................
............######
............######
............######
............######
............######
............######```

### 输出

```
```

# AI分析结果



**唯一算法分类**  
无算法分类

---

**综合分析与结论**  
本题要求检测9x9方阵中符合特定Tak Code结构的区域。核心在于精确匹配左上角和右下角的3x3黑块及其周围白块的分布。需遍历所有可能的9x9方阵，逐点验证每个可能区域是否符合以下条件：

1. **左上角3x3全黑**（`#`）。
2. **右下角3x3全黑**。
3. **左上角右侧3列与下方4行全白**（`.`）。
4. **右下角右侧3列与下方4行全白**。

难点在于正确处理边界条件，确保所有检查的坐标在输入矩阵范围内。遍历时需限制起始点，确保所有相关坐标有效。

**可视化设计思路**  
1. **网格绘制**：在Canvas中绘制输入矩阵的网格，每个单元格对应一个像素块。
2. **高亮匹配区域**：当检测到符合条件的区域时，用不同颜色（如绿色）高亮其左上角和右下角的3x3区域。
3. **动画步骤**：逐帧显示遍历过程，当前检查的9x9区域用半透明色覆盖。
4. **音效提示**：发现符合区域时播放成功音效，越界或条件不符时播放失败音效。

---

**题解评分（4星）**  
- **思路清晰度**：直接遍历所有可能的9x9区域，逐一验证条件。
- **代码可读性**：逻辑分块明确，条件判断直观。
- **实践操作性**：边界处理严谨，适合直接实现。

---

**最优思路与技巧**  
- **坐标映射**：将Tak Code的结构分解为多个可独立验证的区域（如左上黑块、右下黑块、周围白块）。
- **边界检查**：在遍历时限制起点范围，确保所有相关坐标有效。
- **逐条件验证**：通过短路逻辑（提前返回）减少不必要的计算。

---

**代码实现**  
```python
n, m = map(int, input().split())
grid = [input().strip() for _ in range(n)]

ans = []
for i in range(n - 8):
    for j in range(m - 8):
        # 检查左上角3x3是否为全黑
        valid = True
        for x in range(3):
            for y in range(3):
                if grid[i + x][j + y] != '#':
                    valid = False
                    break
            if not valid:
                break
        if not valid:
            continue
        
        # 检查右侧3列是否为全白
        for x in range(3):
            if j + 3 >= m or grid[i + x][j + 3] != '.':
                valid = False
                break
        if not valid:
            continue
        
        # 检查下方4行（j到j+3列）是否为全白
        if i + 3 >= n:
            valid = False
        else:
            for y in range(4):
                if j + y >= m or grid[i + 3][j + y] != '.':
                    valid = False
                    break
        if not valid:
            continue
        
        # 检查右下角3x3
        for x in range(6, 9):
            for y in range(6, 9):
                if grid[i + x][j + y] != '#':
                    valid = False
                    break
            if not valid:
                break
        if not valid:
            continue
        
        # 检查右下右侧3列
        for x in range(6, 9):
            if j + 9 >= m or grid[i + x][j + 9] != '.':
                valid = False
                break
        if not valid:
            continue
        
        # 检查右下下方4行
        if i + 9 >= n:
            valid = False
        else:
            for y in range(6, 10):
                if j + y >= m or grid[i + 9][j + y] != '.':
                    valid = False
                    break
        if valid:
            ans.append((i + 1, j + 1))

for p in ans:
    print(p[0], p[1])
```

---

**同类型题推荐**  
1. **P1101 单词方阵**：检测特定模式的矩阵。
2. **P1219 八皇后**：棋盘模式匹配的变种。
3. **P1032 字串变换**：模式匹配与状态遍历。

---

**个人心得**  
- **边界处理**：需仔细计算坐标范围，避免越界导致的错误。
- **条件顺序**：通过短路逻辑优化性能，优先检查易失败的条件。

---

**可视化设计要点**  
- **像素风格**：用8-bit颜色区分不同状态（黑块深灰、白块亮灰、匹配区域绿色）。
- **步进控制**：允许单步查看每个候选区域的验证过程。
- **音效**：不同操作（匹配成功、失败、越界）触发不同音效。

---
处理用时：553.24秒
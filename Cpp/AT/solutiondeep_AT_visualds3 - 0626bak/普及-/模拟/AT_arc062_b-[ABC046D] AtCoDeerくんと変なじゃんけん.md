# 题目信息

# [ABC046D] AtCoDeerくんと変なじゃんけん

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc046/tasks/arc062_b

シカのAtCoDeerくんは友達のTopCoDeerくんとあるゲームをして対戦しています。 このゲームは $ N $ ターンからなります。各ターンではそれぞれのプレイヤーはじゃんけんのグーかパーを出します。ただし、各プレイヤーは次の条件を満たす必要があります。

(※) 各ターンの後で、(今までにパーを出した回数)$ ≦ $(今までにグーを出した回数) を満たす

このゲームでの各プレイヤーの得点は、(勝ったターンの数) $ - $ (負けたターンの数) です。 AtCoDeerくんは特殊能力を持っているので、ゲームが始まる前にTopCoDeerくんの出す $ N $ ターンの手を全て知ることが出来ました。 AtCoDeerくんの各ターンでの手を決めて、AtCoDeerくんの得点を最大化してください。 TopCoDeerくんの出す手の情報は文字列 $ s $ で与えられます。 $ s $ の $ i(1≦i≦N) $ 文字目が `g`のときは $ i $ ターン目でTopCoDeerくんがグーを出すことを、 `p`のときはパーを出すことを表します。

## 说明/提示

### 制約

- $ 1≦N≦10^5 $
- $ N=|s| $
- $ s $ の各文字は`g`か`p`
- $ s $ で表される手は、条件(※)を満たしている

### Sample Explanation 1

常に相手とあいこになるように手を出すことで、$ 0 $点を取ることができて、これが最大値です。

### Sample Explanation 2

例えばグー,パー,グー,パー,グー,グー,パー,パー,グー,パー と出すことで、 $ 3 $回勝って$ 1 $回負けているので得点は$ 2 $点になり、これが最大値です。

## 样例 #1

### 输入

```
gpg```

### 输出

```
0```

## 样例 #2

### 输入

```
ggppgggpgg```

### 输出

```
2```

# AI分析结果



## 算法分类
贪心算法

## 题解思路与算法要点
### 核心思路
所有题解均采用贪心策略：在满足条件（布的数量 ≤ 石头数量）的前提下，尽可能多出布。因为布能赢石头且不会在对方出布时扣分，而石头可能在对方出布时扣分。

### 解决难点
1. **条件维护**：需要动态维护石头数 `x` 和布数 `y`，确保 `y ≤ x`。
2. **得分计算**：对方出石头时，尽可能用布获胜；对方出布时，避免用石头导致扣分。

### 两种实现方式对比
1. **模拟法**：逐个字符处理，维护当前石头和布的数量。时间复杂度 O(N)，空间复杂度 O(1)。
   - 优势：直观，容易理解状态变化。
   - 示例代码：当 `x == y` 时出石头，否则出布。
2. **数学法**：统计对方石头数 `g_cnt`，计算最大可出布数 `y_max = n//2`，得分公式：`min(y_max, g_cnt) - min(n - y_max, n - g_cnt)`。
   - 优势：无需逐字符处理，直接公式计算。
   - 示例代码：遍历一次字符串统计 `g_cnt`，直接代入公式。

## 题解评分（≥4星）
1. **珅肐（数学法）**：★★★★★  
   - 亮点：公式推导高效，代码极简（仅需统计 `g` 的数量）。
2. **QwQ蒟蒻wjr（模拟法）**：★★★★  
   - 亮点：状态变量 `sum_1` 和 `sum_2` 维护清晰，注释明确。
3. **zcl1024（模拟法）**：★★★★  
   - 亮点：代码简洁，条件判断逻辑直白。

## 最优思路提炼
**数学法公式推导**：
1. 最大布数 `y_max = floor(n/2)`。
2. 胜利次数 = `min(y_max, 对方出石头次数)`。
3. 失败次数 = `min(石头数 n - y_max, 对方出布次数)`。
4. 最终得分 = 胜利次数 - 失败次数。

## 同类题型推荐
1. [CF1144F. Graph Without Long Directed Paths](https://codeforces.com/problemset/problem/1144/F)（贪心染色）
2. [LeetCode 122. Best Time to Buy and Sell Stock II](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/)（贪心决策）
3. [洛谷 P1090 合并果子](https://www.luogu.com.cn/problem/P1090)（优先队列贪心）

## 代码片段
**数学法（珅肐）**：
```cpp
#include<cstdio>
#include<cstring>
using namespace std;
char c[100007];
int main(){
    scanf("%s",c);
    int l=strlen(c),g=0;
    for(int i=0;i<l;++i) if(c[i]=='g') g++;
    printf("%d\n", min(l/2,g) - min(l - l/2, l - g));
    return 0;
}
```

**模拟法（zcl1024）**：
```cpp
#include <iostream>
#include <string>
using namespace std;
int main(){
    string a; cin>>a;
    int x=0, y=0, ans=0;
    for(int i=0; i<a.size(); i++){
        if(x == y){ // 必须出石头
            x++;
            if(a[i] == 'p') ans--;
        } else { // 出布
            y++;
            if(a[i] == 'g') ans++;
        }
    }
    cout<<ans<<endl;
    return 0;
}
```

## 可视化算法演示
### 动画设计
- **像素风格界面**：8-bit 字体，石头用灰色方块，布用绿色方块，对手出招显示在顶部。
- **状态跟踪**：左侧显示当前 `x`（石头数）和 `y`（布数），右侧显示得分。
- **步进演示**：按空格键单步执行，显示当前对手出招及己方选择。
- **音效反馈**：得分增加时播放上升音效，扣分时播放下降音效。

### 关键帧示例
1. **初始状态**：`x=0, y=0, 得分=0`。
2. **第一回合**：对手出 `g`，必须出石头（`x=1`），平局无得分。
3. **第二回合**：对手出 `p`，`x=1 > y=0`，出布（`y=1`），平局。
4. **第三回合**：对手出 `g`，`x=1 == y=1`，出石头（`x=2`），平局。最终得分 0。

## 复古游戏化设计
- **Canvas 绘制**：对手出招序列以滚动条展示，己方选择高亮显示。
- **自动演示模式**：AI 自动运行算法，速度可调（快/中/慢）。
- **积分系统**：每正确决策一次获得 10 分，最高分记录保存。
- **8-bit 音效**：使用 Web Audio API 播放经典芯片音乐。

---
处理用时：126.52秒
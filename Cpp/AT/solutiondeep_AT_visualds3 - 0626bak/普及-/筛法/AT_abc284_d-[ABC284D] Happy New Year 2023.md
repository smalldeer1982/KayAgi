# 题目信息

# [ABC284D] Happy New Year 2023

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc284/tasks/abc284_d

正整数 $ N $ が与えられます。$ N $ は、$ 2 $ つの相異なる素数 $ p,q $ を用いて $ N=p^2q $ と表せることがわかっています。

$ p,q $ を求めてください。

$ T $ 個のテストケースが与えられるので、それぞれについて答えを求めてください。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\leq\ T\leq\ 10 $
- $ 1\leq\ N\ \leq\ 9\times\ 10^{18} $
- $ N $ は、$ 2 $ つの相異なる素数 $ p,q $ を用いて $ N=p^2q $ と表せる
 
### Sample Explanation 1

$ 1 $ 番目のテストケースについて、$ N=2023=17^2\times\ 7 $ です。よって、$ p=17,q=7 $ です。

## 样例 #1

### 输入

```
3

2023

63

1059872604593911```

### 输出

```
17 7

3 7

104149 97711```

# AI分析结果



**唯一算法分类**：数论（质因数分解）

---

### 题解思路与核心难点

**核心思路**：  
题目要求分解形如 \( N = p^2 q \) 的正整数，其中 \( p, q \) 为不同素数。关键观察点是 \( \min(p,q) \leq \sqrt[3]{N} \)，因此只需枚举 \( 2 \) 到 \( \sqrt[3]{N} \) 之间的数，找到第一个能整除 \( N \) 的 \( i \)，再判断 \( i \) 是 \( p \) 还是 \( q \)。

**解决难点**：  
- **高效枚举**：直接暴力枚举 \( \sqrt[3]{N} \) 范围内的数，时间复杂度为 \( O(T \cdot \sqrt[3]{N}) \)，对于 \( N \leq 9 \times 10^{18} \) 足够高效。
- **快速判断条件**：若 \( i^2 \mid N \)，则 \( i = p \)，否则 \( i = q \)，此时 \( p = \sqrt{N / i} \)。

**算法流程**：  
1. 枚举 \( i \) 从 \( 2 \) 开始。
2. 当 \( i \mid N \) 时：
   - 若 \( i^2 \mid N \)，则 \( p = i \)，\( q = N / i^2 \)。
   - 否则，\( q = i \)，\( p = \sqrt{N / i} \)。
3. 输出 \( p, q \)。

---

### 题解评分（≥4星）

1. **CarroT1212（5星）**  
   - **亮点**：代码简洁，直接枚举第一个能整除 \( N \) 的 \( i \)，逻辑清晰，时间复杂度最优。
   - **代码片段**：
     ```cpp
     for (ll i=2;;i++) if (n%i==0) {
         ll j=sqrt(n/i);
         if (j*j==n/i) printf("%lld %lld\n",j,i);
         else printf("%lld %lld\n",i,n/i/i);
         return;
     }
     ```

2. **Hell0_W0rld（4星）**  
   - **亮点**：预处理 \( \sqrt[3]{N} \) 的质数优化枚举，但代码复杂度和直接枚举接近。
   - **关键思路**：通过线性筛预处理质数，减少无效枚举。

3. **loser_seele（4星）**  
   - **亮点**：使用 Pollard-Rho 算法分解质因数，适用于极大数，但实际在本题中复杂度略高。

---

### 最优思路与技巧提炼

**关键技巧**：  
- **枚举最小因子**：利用 \( \min(p,q) \leq \sqrt[3]{N} \) 的性质，减少枚举范围。
- **条件分支判断**：通过 \( i^2 \mid N \) 快速区分 \( p \) 和 \( q \)。
- **避免浮点误差**：使用整数运算计算平方根（如 `sqrt(n/i)` 取整后验证）。

---

### 同类型题与算法套路

**类似题目**：  
1. **洛谷 P1075**：质因数分解，直接枚举最小质因子。
2. **洛谷 P1069**：分解质因数的扩展应用。
3. **LeetCode 650**：分解质因数的变种问题。

**通用套路**：  
- **小因子优先枚举**：在分解质因数时，优先枚举较小的因子。
- **数学性质应用**：通过数论性质（如立方根范围）优化枚举边界。

---

### 个人心得摘录

- **调试教训**：直接输出 `sqrt()` 可能因浮点精度出错，需先转为整数再验证（如 `(ll)sqrt(n/i)`）。
- **优化经验**：特判偶数（\( N \% 2 == 0 \)）可快速处理 \( p=2 \) 或 \( q=2 \) 的情况。

---

### 可视化与算法演示

**动画设计**：  
1. **像素风格界面**：用 8-bit 像素风格显示 \( N \)、当前枚举的 \( i \)，以及分解结果 \( p, q \)。
2. **关键步骤高亮**：
   - **枚举过程**：显示当前 \( i \)，若 \( i \mid N \)，闪烁高亮。
   - **条件分支**：若 \( i^2 \mid N \)，显示 \( p = i \)，否则显示 \( q = i \)。
3. **步进控制**：允许暂停/继续，调整枚举速度，观察每一步的分解逻辑。
4. **音效反馈**：
   - **枚举命中**：播放短促“滴”声。
   - **成功分解**：播放胜利音效。

**代码片段（Canvas 动画）**：  
```javascript
// 伪代码：绘制枚举过程
function drawStep(i, N) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawText(`Enumerating i=${i}`, 10, 20);
    if (N % i === 0) {
        drawHighlight(i, 'green');
        playSound('beep');
    }
}
```

---

### 推荐题目

1. **洛谷 P1075**：质因数分解的入门题。
2. **洛谷 P1069**：分解质因数的进阶应用。
3. **LeetCode 204**：统计质数数量，练习筛法优化。

---
处理用时：81.67秒
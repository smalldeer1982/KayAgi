# 题目信息

# [ABC126E] 1 or 2

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc126/tasks/abc126_e

$ N $ 枚のカードが一列に伏せられており、各カードには整数 $ 1 $ または $ 2 $ が書かれています。

$ i $ 番目のカードに書かれている整数を $ A_i $ とします。

あなたの目的は $ A_1,\ A_2,\ ...,\ A_N $ を当てることです。

次のことが分かっています。

- $ i\ =\ 1,\ 2,\ ...,\ M $ について $ A_{X_i}\ +\ A_{Y_i}\ +\ Z_i $ は偶数である。

あなたは魔法使いです。次の魔法を何度でも使うことができます。

**魔法**: コストを $ 1 $ 払う。カードを $ 1 $ 枚選び、そのカードに書かれた整数 $ A_i $ を知る。

最小で何コスト払えば、$ A_1,\ A_2,\ ...,\ A_N $ 全てを確実に当てることができるでしょうか。

なお、与えられる入力には矛盾がないことが保証されます。

## 说明/提示

### 制約

- 入力は全て整数である。
- $ 2\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ M\ \leq\ 10^5 $
- $ 1\ \leq\ X_i\ <\ Y_i\ \leq\ N $
- $ 1\ \leq\ Z_i\ \leq\ 100 $
- $ (X_i,\ Y_i) $ の組は互いに異なる。
- 与えられる入力には矛盾がない(すなわち、条件を満たす $ A_1,\ A_2,\ ...,\ A_N $ が存在する)。

### Sample Explanation 1

$ 1 $ 枚目と $ 3 $ 枚目のカードに対してそれぞれ $ 1 $ 回ずつ魔法を使えば、$ A_1,\ A_2,\ A_3 $ 全てを当てることができます。

## 样例 #1

### 输入

```
3 1

1 2 1```

### 输出

```
2```

## 样例 #2

### 输入

```
6 5

1 2 1

2 3 2

1 3 3

4 5 4

5 6 5```

### 输出

```
2```

## 样例 #3

### 输入

```
100000 1

1 100000 100```

### 输出

```
99999```

# AI分析结果



## 算法分类
并查集

## 题解思路与解决难点
### 核心思路
题目要求确定所有卡片的数值，每个条件将两个卡片的奇偶关系绑定。通过并查集将这些卡片合并为连通块，每个连通块只需确定一个卡片的值即可推导整个块。最终答案等于连通块数量。

### 关键步骤
1. **并查集构建**：将所有存在条件的卡片合并到同一集合。
2. **连通块统计**：根节点数量即为所求的最小魔法次数。

### 难点分析
- **忽略Z_i的推导**：无论Z_i奇偶，条件均将X_i与Y_i绑定，无需具体处理Z_i。
- **连通块独立性**：每个连通块内部数值可通过已知值完全推导。

## 题解评分（≥4星）
1. **徐晨轩✅（5星）**  
   代码简洁，直接点明并查集核心，无冗余步骤，适合快速理解。

2. **龙潜月十五（4星）**  
   详细推导了条件与奇偶性的关系，结合样例解释清晰，适合深入理解。

3. **Warriors_Cat（4星）**  
   代码规范，注释明确，路径压缩实现高效，适合学习实现细节。

## 最优思路提炼
- **并查集合并**：将所有存在约束的节点合并，形成连通块。
- **连通块计数**：统计根节点个数即为答案，每个块只需一次魔法。

## 同类型题与套路
- **约束关系建模**：将条件转化为图的边，用并查集维护连通性。
- **奇偶性传递**：类似问题如判断二分图、带权并查集处理相对关系。

## 推荐题目
1. P3367（并查集模板）  
2. P1525（关押罪犯，二分图染色）  
3. P2024（食物链，带权并查集）

## 个人心得摘录
> "此题的思维转换非常妙，将数值问题转化为图的连通性，无需关注具体奇偶值。" —— 龙潜月十五

## 可视化算法演示
### 核心过程
1. **初始化节点**：每个节点独立为根。
2. **合并条件节点**：遍历条件，动态合并X_i与Y_i。
3. **统计根节点**：遍历所有节点，计数不同根的数量。

### 可视化设计
- **动画方案**：  
  - 用像素方块表示节点，合并时画线连接。  
  - 根节点高亮显示，合并时播放“咔”音效。  
- **交互功能**：  
  - 步进控制观察合并过程，速度可调。  
  - 自动演示模式模拟算法执行流程。  
- **像素风格**：  
  - 16色调色板，复古FC风格界面。  
  - 合并成功时方块闪烁，背景音乐循环。

### 代码片段（并查集合并）
```cpp
void merge(int x, int y) {
    int fx = find(x), fy = find(y);
    if (fx != fy) f[fx] = fy;
}
// 遍历条件后统计根节点数量
for (int i = 1; i <= n; ++i)
    if (find(i) == i) ans++;
```

---
处理用时：64.57秒
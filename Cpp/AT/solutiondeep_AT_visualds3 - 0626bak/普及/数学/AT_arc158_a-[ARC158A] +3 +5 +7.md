# 题目信息

# [ARC158A] +3 +5 +7

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc158/tasks/arc158_a

整数 $ x_1,\ x_2,\ x_3 $ が与えられます．あなたはこれらの整数に対して，次の操作を何度でも行うことができます（$ 0 $ 回でもよい）：

- $ (1,2,3) $ の順列 $ (i,j,k) $ をひとつ選ぶ．つまり $ 1\leq\ i,j,k\leq\ 3 $ であるような整数の組 $ (i,j,k) $ であって $ i\neq\ j,\ i\neq\ k,\ j\neq\ k $ となるものを選ぶ．
- その後，$ x_i $ を $ x_i+3 $，$ x_j $ を $ x_j+5 $，$ x_k $ を $ x_k+7 $ で同時に置き換える．
 
あなたの目的は，$ x_1=x_2=x_3 $ が成り立つようにすることです．このことが可能であるか否かを判定してください．可能な場合には，それを達成するための最小の操作回数を出力してください．

$ T $ 個のテストケースが与えられるので，それぞれについて答えを求めてください．

## 说明/提示

### 制約

- $ 1\leq\ T\leq\ 2\times\ 10^5 $
- $ 1\leq\ x_1,\ x_2,\ x_3\ \leq\ 10^9 $
 
### Sample Explanation 1

ひとつめのテストケースについて，次のように操作を行うことで $ x_1=x_2=x_3 $ が成り立つようにできます． - $ (i,j,k)\ =\ (3,2,1) $ として操作を行う．$ (x_1,x_2,x_3) $ は $ (9,13,11) $ に置き換わる． - $ (i,j,k)\ =\ (2,3,1) $ として操作を行う．$ (x_1,x_2,x_3) $ は $ (16,16,16) $ に置き換わる．

## 样例 #1

### 输入

```
4

2 8 8

1 1 1

5 5 10

10 100 1000```

### 输出

```
2

0

-1

315```

# AI分析结果



---

**唯一算法分类**：数学分析

---

### **题解思路、算法要点与解决难点**

1. **核心思路**  
   通过观察每次操作对三个数的影响，发现每次操作相当于对三个数的差值进行调整。将问题转化为三个数能否通过调整奇偶性和总和满足条件，并计算最小操作次数。

2. **关键分析步骤**  
   - **奇偶性一致**：每次操作中三个数的增量均为奇数，奇偶性必须一致才能最终相等。  
   - **总和为3的倍数**：每次操作总和增加15，最终总和需为3的倍数。  
   - **差值调整**：每次操作可将最大数减少2、最小数增加2，操作次数由最大差值决定。

3. **解决难点**  
   - 发现每次操作对奇偶性和总和的隐藏限制。  
   - 将复杂操作转化为对差值的调整，简化计算。

---

### **题解评分 (≥4星)**

1. **Amberhart (4星)**  
   - **亮点**：思路清晰，代码简洁，详细解释了奇偶性和总和的必要性。  
   - **优化**：直接排序后计算差值，避免冗余判断。

2. **WoodReal12 (4星)**  
   - **亮点**：代码可读性强，通过交换排序简化逻辑。  
   - **关键点**：明确特判条件和公式推导。

3. **chenyuchenghsefz (4星)**  
   - **亮点**：代码实现高效，正确性验证充分。  
   - **改进点**：奇偶性判断可简化，但整体逻辑正确。

---

### **最优思路或技巧提炼**

1. **数学转化**  
   将每次操作的增量视为 $-2, 0, +2$，总和变化为 $15k$，通过平均值 $v$ 统一目标。

2. **核心公式**  
   - **操作次数**：$\max\left(\frac{x_3 - v}{2}, \frac{v - x_1}{2}\right)$，其中 $v$ 是排序后的平均值。  
   - **条件判断**：总和需为3的倍数，奇偶性一致。

3. **实现优化**  
   - 排序后直接取最大值和最小值的差值，避免多次计算。

---

### **同类型题或类似算法套路**

- **同类型题**  
  类似问题通常涉及隐藏的数学规律，如奇偶性、模运算、差值调整等。例如：  
  - 洛谷 P1147：连续自然数和  
  - 洛谷 P1463：反素数  

- **通用解法**  
  通过分析操作对数值属性的影响（奇偶、模数、差值），转化为数学条件判断。

---

### **推荐相似题目**

1. **洛谷 P1031**（均分纸牌）  
   - **相似点**：通过调整差值达到平衡，计算最小操作次数。

2. **洛谷 P1102**（A-B数对）  
   - **相似点**：利用数学关系构造目标值的条件。

3. **洛谷 P2678**（跳石头）  
   - **相似点**：通过差值分析和条件判断确定可行性。

---

### **代码实现**

**核心代码片段**  
```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int t;
    cin >> t;
    while (t--) {
        long long a, b, c;
        cin >> a >> b >> c;
        // 排序
        if (a > b) swap(a, b);
        if (a > c) swap(a, c);
        if (b > c) swap(b, c);
        // 特判条件
        if ((a + b + c) % 3 != 0 || (b - a) % 2 != 0 || (c - b) % 2 != 0) {
            cout << "-1\n";
            continue;
        }
        long long v = (a + b + c) / 3;
        cout << max((c - v) / 2, (v - a) / 2) << "\n";
    }
    return 0;
}
```

---

### **可视化与算法演示**

1. **动画设计**  
   - **像素风格**：用8位网格显示三个数的初始值和变化过程，每次操作高亮最大和最小值的变化。  
   - **颜色标记**：红色表示最大值，蓝色表示最小值，绿色表示中间值。  
   - **音效**：每次操作播放“点击”音效，达成目标时播放胜利音效。

2. **交互控制**  
   - **步进执行**：允许用户单步观察差值调整过程。  
   - **自动模式**：AI自动运行，展示如何通过操作缩小差值。

3. **算法演示**  
   - **初始状态**：显示排序后的三个数及平均值 $v$。  
   - **操作步骤**：动态显示最大和最小值如何通过操作逐步接近 $v$，并更新操作次数。

---

**总结**：通过数学分析将复杂操作转化为差值调整问题，结合奇偶性和总和条件快速判断可行性，最终通过差值计算最小操作次数。

---
处理用时：220.75秒
# 题目信息

# [ARC174B] Bought Review

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc174/tasks/arc174_b

$ T $ 個のテストケースについて、次の問題に答えてください。

グルメレビューサイトである EatCocoder では、レストランに $ 1 $ 以上 $ 5 $ 以下の整数個の星を付けてレビューすることができます。  
 最初、B料理長の経営するレストランには、星 $ i $ のレビューが $ A_i $ 件付いています。 $ (1\ \le\ i\ \le\ 5) $  
 B料理長は EatCocoder の運営に $ P_i $ 円の賄賂を渡すことで、星 $ i $ のレビューを $ 1 $ 件追加してもらえます。 $ (1\ \le\ i\ \le\ 5) $

賄賂によってレビューを全部で $ k $ 件追加したとき、最終的なレビューは合計で $ A_1+A_2+A_3+A_4+A_5+k $ 件になります。  
 B料理長はこれらのレビューの平均評価を星 $ 3 $ 以上にしたいと考えています。これを達成するために必要な賄賂の合計金額の最小値を求めてください。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\ \le\ T\ \le\ 10^4 $
- $ 0\ \le\ A_i\ \le\ 10^8 $
- $ 1\ \le\ A_1+A_2+A_3+A_4+A_5 $
- $ 1\ \le\ P_i\ \le\ 10^8 $
 
### Sample Explanation 1

この入力には $ 6 $ 個のテストケースが含まれています。 - $ 1 $ 個目のテストケースについて、例えば以下のようにすると $ 5 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 1,0,1,0,0 $ 件付いています。 - $ P_5\ =\ 5 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 1,0,1,0,1 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 2 $ 個目のテストケースについて、例えば以下のようにすると $ 2 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,2,2,0,0 $ 件付いています。 - $ P_4\ \times\ 2\ =\ 2 $ 円の賄賂を渡し、星 $ 4 $ のレビューを $ 2 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 0,2,2,2,0 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 3 $ 個目のテストケースについて、例えば以下のようにすると $ 3 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,1,2,0,0 $ 件付いています。 - $ P_5\ =\ 3 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 0,1,2,0,1 $ 件となり、これらの平均は星 $ 3.25 $ です。 - $ 4 $ 個目のテストケースについて、例えば以下のようにすると $ 2 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 1,1,1,0,0 $ 件付いています。 - $ P_4\ =\ 1 $ 円の賄賂を渡し、星 $ 4 $ のレビューを $ 1 $ 件追加させます。 - $ P_5\ =\ 1 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 1,1,1,1,1 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 5 $ 個目のテストケースについて、例えば以下のようにすると $ 0 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,0,0,0,1 $ 件付いています。 - これらの平均は星 $ 5 $ でありこれは既に $ 3 $ 以上であるため、賄賂を全く渡しません。 - $ 6 $ 個目のテストケースについて、答えが $ 32 $bit 符号付き整数に収まらないこともあります。

## 样例 #1

### 输入

```
6

1 0 1 0 0

1 2 3 4 5

0 2 2 0 0

1 1 1 1 5

0 1 2 0 0

1 1 1 5 3

1 1 1 0 0

1 1 1 1 1

0 0 0 0 1

1 1 1 1 1

100000000 100000000 100000000 0 0

100000000 100000000 100000000 100000000 100000000```

### 输出

```
5

2

3

2

0

15000000000000000```

# AI分析结果



**唯一算法分类**: 贪心算法

---

### **题解思路与解决难点**

**核心思路**：  
通过贪心策略选择购买4星或5星评价，使得总花费最小。关键步骤是计算所需的“额外星数”（记为`least`），并根据价格比决定购买策略。  
- **推导核心不等式**：将平均分≥3转化为数学条件，得到`x + 2y ≥ least`（`x`为4星数量，`y`为5星数量）。  
- **贪心选择**：比较购买4星和5星的性价比，优先选择单位星数成本更低的方式。

**解决难点**：  
1. **条件分支处理**：需根据`least`的奇偶性及`P4`和`P5`的价格关系，分三种情况处理：全买4星、全买5星或混合购买。  
2. **数据类型溢出**：答案可能超过32位整数，需使用`long long`类型。  

---

### **题解评分（≥4星）**

1. **bishenke_2008（4星）**  
   - 推导详细，代码清晰，覆盖所有边界条件。  
   - 关键亮点：将问题转化为线性不等式，明确分类讨论。  

2. **Sundar_2022（4星）**  
   - 代码简洁，直接计算性价比，处理奇偶性逻辑明确。  
   - 关键亮点：通过`min`函数简化混合购买情况的判断。  

3. **Double_Light（4星）**  
   - 以“贡献差值”视角分析，代码短小精悍。  
   - 关键亮点：将4星和5星转化为“1星”和“2星”贡献，直观体现贪心策略。  

---

### **最优思路提炼**

1. **核心不等式推导**：  
   平均分≥3等价于总星数≥3×总评论数，化简得`x + 2y ≥ least`，其中`least = 2A1 + A2 - A4 - 2A5`。  
2. **贪心策略**：  
   - 若`2*P4 ≤ P5`，全买4星（每星成本更低）。  
   - 若`least`为偶数，全买5星（偶数需求可用2星贡献满足）。  
   - 若`least`为奇数，买`least/2`个5星并补1个4星，或全买5星（取最小值）。  

---

### **同类型题与算法套路**

- **贪心选择策略**：优先选择单位贡献成本最低的操作。  
- **类似题目**：  
  1. **背包问题**（如分数背包，按性价比选择物品）。  
  2. **硬币问题**（用最少硬币凑金额，贪心或动态规划）。  
  3. **活动选择问题**（按结束时间贪心）。  

---

### **推荐题目**

1. **P1208 [USACO1.3]混合牛奶 Mixing Milk**（贪心选择单价最低的牛奶）  
2. **P1094 [NOIP2007 普及组] 纪念品分组**（双指针贪心）  
3. **P2240 【深基12.例1】部分背包问题**（分数背包，按性价比排序）  

---

### **可视化与算法演示**

**动画方案**：  
1. **核心变量高亮**：用不同颜色标记`least`、`P4`、`P5`和购买策略分支。  
2. **操作步骤**：  
   - **步骤1**：计算初始总星数和评论数，判断是否需要购买。  
   - **步骤2**：动态显示`least`的计算过程，并高亮其奇偶性。  
   - **步骤3**：根据价格比和`least`奇偶性，分支显示购买策略（如红色箭头指向全买4星，绿色指向全买5星）。  
   - **步骤4**：逐步累加购买数量和总花费，对比不同策略的结果。  

**复古游戏化设计**：  
- **像素风格**：用16色调色板，将4星和5星显示为不同颜色的方块。  
- **音效**：购买时播放“金币掉落”音效，策略切换时播放“选择”音效。  
- **自动演示**：模拟AI自动选择最优策略，显示实时花费和剩余星数需求。  

---

### **代码片段（核心逻辑）**

```cpp
// 计算 least 和总评论数
int total_reviews = A1 + A2 + A3 + A4 + A5;
int current_stars = A1*1 + A2*2 + A3*3 + A4*4 + A5*5;
int least = 3 * total_reviews - current_stars;

if (least <= 0) {
    cout << 0 << endl;
    continue;
}

// 贪心策略选择
if (2 * P4 <= P5) {
    ans = least * P4;
} else if (least % 2 == 0) {
    ans = (least / 2) * P5;
} else {
    ans = min((least / 2 + 1) * P5, (least / 2) * P5 + P4);
}
```

---

**总结**：通过贪心策略和数学推导，将问题转化为选择最优购买组合，覆盖所有边界条件，代码高效且易读。

---
处理用时：71.53秒
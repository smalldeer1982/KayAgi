# 题目信息

# [ARC174B] Bought Review

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc174/tasks/arc174_b

$ T $ 個のテストケースについて、次の問題に答えてください。

グルメレビューサイトである EatCocoder では、レストランに $ 1 $ 以上 $ 5 $ 以下の整数個の星を付けてレビューすることができます。  
 最初、B料理長の経営するレストランには、星 $ i $ のレビューが $ A_i $ 件付いています。 $ (1\ \le\ i\ \le\ 5) $  
 B料理長は EatCocoder の運営に $ P_i $ 円の賄賂を渡すことで、星 $ i $ のレビューを $ 1 $ 件追加してもらえます。 $ (1\ \le\ i\ \le\ 5) $

賄賂によってレビューを全部で $ k $ 件追加したとき、最終的なレビューは合計で $ A_1+A_2+A_3+A_4+A_5+k $ 件になります。  
 B料理長はこれらのレビューの平均評価を星 $ 3 $ 以上にしたいと考えています。これを達成するために必要な賄賂の合計金額の最小値を求めてください。

## 说明/提示

### 制約

- 入力は全て整数
- $ 1\ \le\ T\ \le\ 10^4 $
- $ 0\ \le\ A_i\ \le\ 10^8 $
- $ 1\ \le\ A_1+A_2+A_3+A_4+A_5 $
- $ 1\ \le\ P_i\ \le\ 10^8 $
 
### Sample Explanation 1

この入力には $ 6 $ 個のテストケースが含まれています。 - $ 1 $ 個目のテストケースについて、例えば以下のようにすると $ 5 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 1,0,1,0,0 $ 件付いています。 - $ P_5\ =\ 5 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 1,0,1,0,1 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 2 $ 個目のテストケースについて、例えば以下のようにすると $ 2 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,2,2,0,0 $ 件付いています。 - $ P_4\ \times\ 2\ =\ 2 $ 円の賄賂を渡し、星 $ 4 $ のレビューを $ 2 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 0,2,2,2,0 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 3 $ 個目のテストケースについて、例えば以下のようにすると $ 3 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,1,2,0,0 $ 件付いています。 - $ P_5\ =\ 3 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 0,1,2,0,1 $ 件となり、これらの平均は星 $ 3.25 $ です。 - $ 4 $ 個目のテストケースについて、例えば以下のようにすると $ 2 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 1,1,1,0,0 $ 件付いています。 - $ P_4\ =\ 1 $ 円の賄賂を渡し、星 $ 4 $ のレビューを $ 1 $ 件追加させます。 - $ P_5\ =\ 1 $ 円の賄賂を渡し、星 $ 5 $ のレビューを $ 1 $ 件追加させます。 - その結果、星 $ 1,2,3,4,5 $ のレビューが $ 1,1,1,1,1 $ 件となり、これらの平均は星 $ 3 $ です。 - $ 5 $ 個目のテストケースについて、例えば以下のようにすると $ 0 $ 円の賄賂で平均評価を星 $ 3 $ 以上にでき、これが達成可能な最小値です。 - 元々星 $ 1,2,3,4,5 $ のレビューが $ 0,0,0,0,1 $ 件付いています。 - これらの平均は星 $ 5 $ でありこれは既に $ 3 $ 以上であるため、賄賂を全く渡しません。 - $ 6 $ 個目のテストケースについて、答えが $ 32 $bit 符号付き整数に収まらないこともあります。

## 样例 #1

### 输入

```
6

1 0 1 0 0

1 2 3 4 5

0 2 2 0 0

1 1 1 1 5

0 1 2 0 0

1 1 1 5 3

1 1 1 0 0

1 1 1 1 1

0 0 0 0 1

1 1 1 1 1

100000000 100000000 100000000 0 0

100000000 100000000 100000000 100000000 100000000```

### 输出

```
5

2

3

2

0

15000000000000000```

# AI分析结果



# ARC174B Bought Review 题解分析

## 唯一算法分类
贪心

## 题解思路与算法要点
**核心逻辑推导**：  
将原问题转化为不等式 `k + 2m ≥ need`，其中 k 是购买的4星评价数量，m 是5星数量，need 是达到3星平均所需的最小贡献值。  
**解决难点**：  
1. 发现购买3星以下评价无意义，仅需关注4星（贡献+1）和5星（贡献+2）
2. 将问题转化为性价比比较问题：  
   - 4星性价比 = P₄/贡献值（1）  
   - 5星性价比 = P₅/贡献值（2）  
3. 奇偶性处理：当 need 为奇数时，需要组合购买

**关键变量**：  
- `need = 3 * 总评价数 - 当前总星数`
- `P4` 和 `P5` 的性价比比较（是否满足 `2*P4 ≤ P5`）

## 题解评分（≥4星）
1. **bishenke_2008（★★★★★）**  
   - 数学推导完整，包含三种情况的清晰分类
   - 代码结构清晰，处理奇偶性逻辑完善
   - 样例解释与公式推导结合紧密

2. **whrwlx（★★★★）**  
   - 代码简练，直接计算三种可能情况
   - 采用 min 函数直接比较不同策略
   - 缺少详细数学推导注释

3. **Sundar_2022（★★★★）**  
   - 以游戏币购买类比问题，易于理解
   - 代码包含详细的性价比判断逻辑
   - 添加了中文注释辅助理解

## 最优思路提炼
**核心技巧**：  
1. **贡献转化法**：将4星/5星评价转化为相对于3星的贡献值（+1/+2）
2. **性价比比较策略**：  
   ```python
   if 2*P4 ≤ P5:  # 买4星更划算
      全买4星 → cost = need * P4
   else:           # 买5星更划算
      if need是偶数: cost = (need//2) * P5
      else:         cost = min((need//2 + 1)*P5, (need//2)*P5 + P4)
   ```
3. **边界处理**：优先判断当前是否已满足条件

## 同类型题目套路
1. **硬币问题**：用不同面值硬币凑金额的最小花费
2. **跳跃游戏**：选择最大跳跃步数的贪心策略
3. **部分背包**：性价比优先的物品选择

## 推荐练习题
1. **P1209** [USACO1.3]修理牛棚（贪心选择木板）
2. **P2240** 部分背包问题（性价比排序）
3. **P4995** 跳跳！（跳跃步数贪心）

## 个人心得摘录
> "两个四星好评的收益等于一个五星好评的收益" —— bishenke_2008  
> 此观察将复杂的不等式转化为直观的性价比比较，是解题关键转折点。

## 算法可视化设计
**动画方案**：  
1. **贡献值进度条**：  
   - 左侧显示当前总星数，右侧显示目标值（3*总评论数）  
   - 用红色柱状图表示当前差距（need），绿色块表示通过购买4星/5星逐步填补

2. **购买决策树**：  
   ```mermaid
   graph TD
   A[Start] --> B{need ≤0?}
   B -- Yes --> C[输出0]
   B -- No --> D{2P4 ≤ P5?}
   D -- Yes --> E[全买4星]
   D -- No --> F{need奇偶?}
   F -- 偶数 --> G[全买5星]
   F -- 奇数 --> H[买1个4星+多个5星]
   ```

**复古像素风格设计**：  
- **颜色方案**：  
  - 4星：蓝色方块（贡献+1）  
  - 5星：金色方块（贡献+2）  
- **音效设计**：  
  - 购买4星："哔"（短促电子音）  
  - 购买5星："叮"（清脆金币声）  
  - 达成目标：8-bit胜利音乐片段

**核心代码片段**：  
```cpp
int need = 3 * total_reviews - current_stars;
if (need <= 0) return 0;

if (2 * P4 <= P5) {
    return need * P4; // 全买4星
} else if (need % 2 == 0) {
    return (need / 2) * P5; // 全买5星
} else {
    int option1 = (need / 2 + 1) * P5; // 多买一个5星
    int option2 = (need / 2) * P5 + P4; // 买一个4星
    return min(option1, option2);
}
```

---
处理用时：84.07秒
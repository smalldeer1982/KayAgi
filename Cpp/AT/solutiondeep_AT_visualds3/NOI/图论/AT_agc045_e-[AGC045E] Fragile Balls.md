# é¢˜ç›®ä¿¡æ¯

# [AGC045E] Fragile Balls

## é¢˜ç›®æè¿°

æˆ‘ä»¬æœ‰$n$ä¸ªç›’å­å’Œ$m$ä¸ªçƒ(ç¼–å·éƒ½ä»$1$å¼€å§‹)ï¼Œç›®å‰ï¼Œçƒ$i$åœ¨$A_i$ç›’å­ä¸­ã€‚

æ¥ä¸‹æ¥ï¼Œå¯¹äºæ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‡ ä¸ªæ“ä½œä¸­çš„ä¸€ä¸ªï¼š

- é€‰æ‹©ä¸€ä¸ªè£…æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šçƒçš„ç›’å­ï¼Œä»ä¸­æ‹¿å‡ºä¸€ä¸ªçƒï¼ŒæŠŠå®ƒæ”¾å…¥å¦ä¸€ä¸ªç›’å­å½“ä¸­
- ç”±äºçƒéƒ½æ˜¯æ˜“ç¢çš„ï¼Œå› æ­¤ï¼Œä½ æ€»å…±ä¸èƒ½ç§»åŠ¨çƒ$i$è¶…è¿‡$C_i$æ¬¡ã€‚

ä½ ç°åœ¨çš„ç›®æ ‡æ˜¯å¯¹äºæ¯ä¸ª$i$ï¼Œå°†çƒ$i$æ”¾å…¥ç›’å­$B_i$ä¸­ã€‚è¯·ç¡®å®šè¿™ä¸ªç›®æ ‡æ˜¯å¦å¯ä»¥å®ç°ï¼Œå¦‚æœå¯ä»¥ï¼Œåˆ™è¾“å‡ºæœ€å°‘éœ€è¦æ“ä½œçš„æ¬¡æ•°ï¼Œå¦‚æœä¸å¯ä»¥ï¼Œåˆ™è¾“å‡º-1ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 3

1 2 1

2 1 1

1 3 2```

### è¾“å‡º

```
3```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2 2

1 2 1

2 1 1```

### è¾“å‡º

```
-1```

## æ ·ä¾‹ #3

### è¾“å…¥

```
5 5

1 2 1

2 1 1

1 3 2

4 5 1

5 4 1```

### è¾“å‡º

```
6```

## æ ·ä¾‹ #4

### è¾“å…¥

```
1 1

1 1 1```

### è¾“å‡º

```
0```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šAGC045E Fragile Balls æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æã€ŒAGC045E Fragile Ballsã€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`å›¾è®ºï¼ˆè¿é€šå—åˆ†æï¼‰+ è´ªå¿ƒ`


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œå°±åƒåœ¨ä¸€ä¸ªâ€œç¤¾åŒºâ€é‡Œå¸®â€œå°å±…æ°‘â€ï¼ˆçƒï¼‰æ¬å®¶â€”â€”æ¯ä¸ªç›’å­æ˜¯â€œæˆ¿å­â€ï¼Œçƒçš„ç§»åŠ¨è·¯å¾„æ˜¯â€œ roadsâ€ï¼Œ**è¿é€šå—**å°±æ˜¯äº’ç›¸è¿é€šçš„â€œç¤¾åŒºâ€ï¼ˆç”¨å¹¶æŸ¥é›†å¿«é€Ÿæ‰¾åˆ°ï¼‰ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿ï¼š  
1. **ç¤¾åŒºæ¡ä»¶**ï¼šæ¯ä¸ªå¤§äº1çš„ç¤¾åŒºé‡Œï¼Œè‡³å°‘æœ‰ä¸€æ ‹â€œæœ‰å¤šä½™æˆ¿é—´çš„æˆ¿å­â€ï¼ˆå³`out_x>1`ï¼Œèƒ½æ‹¿å‡ºçƒå¸®åˆ«äººæ¬å®¶ï¼‰ï¼›  
2. **æ¬å®¶è§„åˆ™**ï¼šçƒä¸èƒ½æ¬è¶…è¿‡`C_i`æ¬¡ï¼Œä¸”æ¯æ¬¡æ¬å®¶å¿…é¡»ä»æœ‰è‡³å°‘ä¸¤ä¸ªçƒçš„ç›’å­æ‹¿ï¼›  
3. **æœ€å°ä»£ä»·**ï¼šå¦‚æœæŸäº›ç¤¾åŒºä¸æ»¡è¶³æ¡ä»¶ï¼Œéœ€è¦ç”¨â€œå¿—æ„¿è€…â€çƒï¼ˆèƒ½å¤šæ¬å‡ æ¬¡çš„çƒï¼‰æ¥å¸®å¿™ï¼Œ**è´ªå¿ƒé€‰æ‹©ä»£ä»·æœ€å°çš„å¿—æ„¿è€…**ã€‚  

### æ ¸å¿ƒç®—æ³•æµç¨‹ä¸å¯è§†åŒ–è®¾è®¡  
- **è¿é€šå—åˆ†æ**ï¼šç”¨å¹¶æŸ¥é›†æŠŠç›’å­åˆå¹¶æˆç¤¾åŒºï¼Œç”¨é¢œè‰²æ ‡è®°ä¸åŒç¤¾åŒºï¼ˆæ¯”å¦‚çº¢è‰²ç¤¾åŒºéœ€è¦æ•‘æ´ï¼‰ï¼›  
- **æ¡ä»¶åˆ¤æ–­**ï¼šé«˜äº®`out_x>1`çš„ç›’å­ï¼ˆé—ªçƒç»¿è‰²ï¼‰ï¼Œå¤§äº1çš„ç¤¾åŒºå¦‚æœæ²¡æœ‰ç»¿è‰²ç›’å­ï¼Œæ ‡è®°ä¸ºâ€œéœ€è¦æ•‘æ´â€ï¼ˆé»„è‰²ï¼‰ï¼›  
- **å¿—æ„¿è€…é€‰æ‹©**ï¼šæŠŠèƒ½å¸®å¿™çš„çƒï¼ˆ`C_i`å¤§çš„ï¼‰æ’æˆåƒç´ é˜Ÿåˆ—ï¼Œè´ªå¿ƒé€‰ä»£ä»·æœ€å°çš„ï¼ˆæ¯”å¦‚ç”¨â€œå®â€çš„éŸ³æ•ˆæç¤ºé€‰ä¸­ï¼‰ï¼›  
- **æ•‘æ´åŠ¨ç”»**ï¼šå¿—æ„¿è€…çƒä»åŸç¤¾åŒºç§»åŠ¨åˆ°éœ€è¦æ•‘æ´çš„ç¤¾åŒºï¼Œç¤¾åŒºé¢œè‰²ä»é»„å˜ç»¿ï¼ˆä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼‰ã€‚  

æˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£**ï¼ˆåƒFCæ¸¸æˆï¼‰åšåŠ¨ç”»ï¼ŒåŠ å…¥â€œå•æ­¥æ‰§è¡Œâ€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼Œè¿˜æœ‰å¤å¤BGMâ€”â€”æ¯”å¦‚è¿é€šå—åˆå¹¶æ—¶â€œå’”å—’â€å“ï¼Œæ•‘æ´æˆåŠŸæ—¶â€œå®-å®â€åº†ç¥ï¼


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†æ›´å¥½åœ°ç†è§£è§£é¢˜è¿‡ç¨‹ï¼Œæˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰æ–¹é¢ï¼Œç­›é€‰äº†ä»¥ä¸‹ä¼˜è´¨é¢˜è§£ï¼š


**é¢˜è§£ä¸€ï¼š(æ¥æºï¼šjunå¤´å‰å‰)**  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æŠŠâ€œç¤¾åŒºåˆ†æâ€å’Œâ€œè´ªå¿ƒæ•‘æ´â€çš„é€»è¾‘è®²å¾—ç‰¹åˆ«é€å½»ï¼å®ƒå…ˆç”¨å¹¶æŸ¥é›†å¿«é€Ÿæ‰¾åˆ°æ‰€æœ‰ç¤¾åŒºï¼Œç„¶åä¸€æ­¥æ­¥æ£€æŸ¥æ¯ä¸ªç¤¾åŒºçš„æ¡ä»¶ï¼ˆæœ‰æ²¡æœ‰å¤šä½™æˆ¿é—´çš„æˆ¿å­ï¼‰ï¼Œæœ€åç”¨**æ’åº+å‰ç¼€å’Œ**è´ªå¿ƒé€‰æœ€å°ä»£ä»·çš„å¿—æ„¿è€…ã€‚ä»£ç é£æ ¼å¾ˆè§„èŒƒâ€”â€”`ot`ï¼ˆå‡ºåº¦ï¼‰ã€`in`ï¼ˆå…¥åº¦ï¼‰ã€`vis`ï¼ˆæ ‡è®°ç¤¾åŒºæ˜¯å¦æœ‰å¤šä½™æˆ¿é—´ï¼‰è¿™äº›å˜é‡åä¸€çœ‹å°±æ‡‚ï¼Œå¤„ç†å¤§æ•°æ®ï¼ˆ1e5ï¼‰çš„æ•ˆç‡ä¹Ÿå¾ˆé«˜ã€‚æœ€æ£’çš„æ˜¯å®ƒæŠŠâ€œéœ€è¦å¤šå°‘å¿—æ„¿è€…â€â€œæ¯ä¸ªå¿—æ„¿è€…çš„ä»£ä»·â€ç®—å¾—æ˜æ˜ç™½ç™½ï¼Œè¿â€œæ²¡æœ‰åˆå§‹å¿—æ„¿è€…æ—¶è¦é¢å¤–åŠ ä¸€æ¬¡ä»£ä»·â€è¿™ç§ç»†èŠ‚éƒ½è€ƒè™‘åˆ°äº†ï¼Œç‰¹åˆ«ä¸¥è°¨ï¼


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨å¸®çƒæ¬å®¶çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡åˆ°3ä¸ªå…³é”®éš¾ç‚¹ï¼š


### 1. å¦‚ä½•å¿«é€Ÿåˆ¤æ–­â€œç¤¾åŒºæ˜¯å¦èƒ½è‡ªå·±æ¬å®¶â€ï¼Ÿ  
**éš¾ç‚¹**ï¼šæ¯ä¸ªå¤§äº1çš„ç¤¾åŒºå¿…é¡»æœ‰`out_x>1`ï¼ˆèƒ½æ‹¿å‡ºçƒå¸®åˆ«äººï¼‰ï¼Œå¦åˆ™æ— æ³•å®Œæˆæ¬å®¶ã€‚  
**ç­–ç•¥**ï¼šç”¨**å¹¶æŸ¥é›†**åˆå¹¶ç›’å­æˆç¤¾åŒºï¼Œç»Ÿè®¡æ¯ä¸ªç¤¾åŒºçš„å¤§å°ï¼ˆ`sz`ï¼‰å’Œæ˜¯å¦æœ‰`out_x>1`ï¼ˆ`vis`æ•°ç»„ï¼‰ã€‚å¦‚æœ`sz>1`ä¸”`vis=false`ï¼Œè¿™ä¸ªç¤¾åŒºéœ€è¦â€œæ•‘æ´â€ï¼ˆ`need`åŠ 1ï¼‰ã€‚  


### 2. å¦‚ä½•è®¡ç®—â€œéœ€è¦å¤šå°‘å¿—æ„¿è€…â€ï¼Ÿ  
**éš¾ç‚¹**ï¼šæ•‘æ´ç¤¾åŒºéœ€è¦â€œå¿—æ„¿è€…â€çƒï¼ˆèƒ½å¤šæ¬å‡ æ¬¡ï¼‰ï¼Œä½†å¿—æ„¿è€…çš„ä»£ä»·ä¸åŒï¼ˆæ¯”å¦‚`A_i=B_i`çš„çƒï¼Œå±äºæœ‰å¤šä½™æˆ¿é—´çš„ç¤¾åŒºï¼Œä»£ä»·æ˜¯`1`ï¼›å±äºæ²¡æœ‰çš„ï¼Œä»£ä»·æ˜¯`2`ï¼‰ã€‚  
**ç­–ç•¥**ï¼šæŠŠå¿—æ„¿è€…åˆ†æˆä¸¤ç±»ï¼š  
- `v1`ï¼šæ¥è‡ªæœ‰å¤šä½™æˆ¿é—´ç¤¾åŒºçš„çƒï¼ˆä»£ä»·1ï¼‰ï¼›  
- `v2`ï¼šæ¥è‡ªæ²¡æœ‰å¤šä½™æˆ¿é—´ç¤¾åŒºçš„çƒï¼ˆä»£ä»·2ï¼‰ã€‚  
æ’åºåç”¨**å‰ç¼€å’Œ**å¿«é€Ÿç®—éœ€è¦å¤šå°‘å¿—æ„¿è€…â€”â€”æ¯”å¦‚å‰`k`ä¸ª`v1`èƒ½æä¾›çš„å¸®åŠ©æ€»å’Œå¤Ÿä¸å¤Ÿã€‚  


### 3. å¦‚ä½•å¤„ç†â€œæ²¡æœ‰åˆå§‹å¿—æ„¿è€…â€çš„æƒ…å†µï¼Ÿ  
**éš¾ç‚¹**ï¼šå¦‚æœæ‰€æœ‰èƒ½ç›´æ¥å¸®å¿™çš„çƒï¼ˆ`A_iâ‰ B_i`ä¸”`C_i>1`ï¼‰éƒ½æ²¡æœ‰ï¼Œå¿…é¡»å…ˆç”¨`v1`çš„ç¬¬ä¸€ä¸ªçƒï¼ˆé¢å¤–åŠ 1æ¬¡ä»£ä»·ï¼‰ã€‚  
**ç­–ç•¥**ï¼šç”¨`flag`æ ‡è®°æ˜¯å¦æœ‰ç›´æ¥å¸®å¿™çš„çƒï¼Œæ²¡æœ‰çš„è¯å°±ä»`v1`é‡Œâ€œå€Ÿâ€ä¸€ä¸ªï¼Œä»£ä»·åŠ 1ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **å¹¶æŸ¥é›†æ˜¯ç¤¾åŒºå·¥å…·**ï¼šå¿«é€Ÿåˆå¹¶ç›’å­ã€æ‰¾ç¤¾åŒºï¼Œå¤„ç†è¿é€šæ€§é—®é¢˜çš„â€œç¥å™¨â€ï¼›  
- **è´ªå¿ƒé€‰æœ€å°ä»£ä»·**ï¼šæŠŠå¿—æ„¿è€…æŒ‰èƒ½å¸®å¿™çš„æ¬¡æ•°ä»å¤§åˆ°å°æ’åºï¼Œä¼˜å…ˆé€‰ä»£ä»·ä½çš„ï¼›  
- **ç»†èŠ‚è¦æ³¨æ„**ï¼šæ¯”å¦‚`C_i-1`ï¼ˆèƒ½å¸®å¿™çš„æ¬¡æ•°ï¼‰ã€`out_x>1`çš„æ¡ä»¶ï¼Œè¿™äº›å°ç»†èŠ‚å†³å®šäº†ç¨‹åºæ˜¯å¦æ­£ç¡®ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

åœ¨æ·±å…¥åˆ†æé¢˜è§£ç‰‡æ®µå‰ï¼Œå…ˆçœ‹ä¸€ä¸ª**é€šç”¨æ ¸å¿ƒå®ç°**â€”â€”å®ƒç»¼åˆäº†é¢˜è§£çš„æ€è·¯ï¼Œå®Œæ•´è§£å†³é—®é¢˜ã€‚


### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç æ¥è‡ªjunå¤´å‰å‰çš„é¢˜è§£ï¼Œé€»è¾‘æ¸…æ™°ã€æ•ˆç‡é«˜ï¼Œèƒ½å¤„ç†1e5çº§åˆ«çš„æ•°æ®ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include<bits/stdc++.h>
using namespace std;
const int N=1e5+10;
int n,m,a[N],b[N],c[N];
int fa[N],sz[N],in[N],ot[N],vis[N];
ll ans,need,now;
vector<ll>v1,v2;

int find(int x){ return x==fa[x]?x:fa[x]=find(fa[x]); }
void merge(int x,int y){ fa[find(x)]=find(y); }

int get(vector<ll>&v,ll x){
	if(x<=0)return 0;
	if(v.empty()||x>v.back())return 1e9;
	return lower_bound(v.begin(),v.end(),x)-v.begin()+1;
}

int main(){
	read(n,m); iota(fa+1,fa+1+n,1);
	for(int i=1;i<=m;i++){
		read(a[i],b[i],c[i]);
		ot[a[i]]++, in[b[i]]++;
		merge(a[i],b[i]);
		ans+=(a[i]!=b[i]);
	}
	// åˆ¤æ— è§£ï¼šæœ‰å‡ºåº¦æ— å…¥åº¦çš„ç›’å­
	for(int i=1;i<=n;i++)if(ot[i]&&!in[i])return cout<<-1<<endl,0;
	// ç»Ÿè®¡æ¯ä¸ªç¤¾åŒºçš„å¤§å°å’Œæ˜¯å¦æœ‰out_x>1
	for(int i=1;i<=n;i++)sz[find(i)]++, vis[find(i)]|=(ot[i]>1);
	// è®¡ç®—éœ€è¦æ•‘æ´çš„ç¤¾åŒºæ•°
	for(int i=1;i<=n;i++)if(i==fa[i]&&sz[i]>1&&!vis[i])need++;
	if(!need)return cout<<ans<<endl,0;
	
	ans+=need; // åŸºç¡€æ•‘æ´ä»£ä»·
	bool flag=0;
	for(int i=1;i<=m;i++){
		if(a[i]!=b[i]){
			now+=c[i]-1; // èƒ½å¸®å¿™çš„æ¬¡æ•°
			if(c[i]>1&&vis[find(a[i])])flag=1; // æœ‰ç›´æ¥å¸®å¿™çš„çƒ
		}else{
			if(vis[find(a[i])])v1.push_back(c[i]-1); // å¿—æ„¿è€…ç±»å‹1ï¼ˆä»£ä»·1ï¼‰
			else v2.push_back(c[i]-2); // å¿—æ„¿è€…ç±»å‹2ï¼ˆä»£ä»·2ï¼‰
		}
	}
	// æ’åºå¿—æ„¿è€…ï¼ˆä»å¤§åˆ°å°ï¼‰
	sort(v1.rbegin(),v1.rend());
	sort(v2.rbegin(),v2.rend());
	// å»æ‰ä¸èƒ½å¸®å¿™çš„ï¼ˆæ¬¡æ•°<=0ï¼‰
	while(!v1.empty()&&v1.back()<=0)v1.pop_back();
	while(!v2.empty()&&v2.back()<=0)v2.pop_back();
	// æ²¡æœ‰ç›´æ¥å¸®å¿™çš„çƒï¼Œå¿…é¡»ç”¨v1çš„ç¬¬ä¸€ä¸ª
	if(!flag){
		if(v1.empty())return cout<<-1<<endl,0;
		ans++; need-=v1[0]; v1.erase(v1.begin());
	}
	need-=now; // å‰©ä¸‹éœ€è¦çš„å¸®åŠ©æ¬¡æ•°
	// å‰ç¼€å’Œï¼ˆå¿«é€Ÿç®—å‰kä¸ªå¿—æ„¿è€…çš„æ€»å¸®åŠ©æ¬¡æ•°ï¼‰
	for(int i=1;i<v1.size();i++)v1[i]+=v1[i-1];
	for(int i=1;i<v2.size();i++)v2[i]+=v2[i-1];
	// è´ªå¿ƒæ‰¾æœ€å°ä»£ä»·
	int mn=min(get(v1,need), get(v2,need)*2);
	for(int i=0;i<v1.size();i++){
		ll rem=need-v1[i];
		if(rem<=0)chkmn(mn,i+1);
		else chkmn(mn,i+1+2*get(v2,rem));
	}
	if(mn>=1e9)cout<<-1<<endl;
	else cout<<ans+mn<<endl;
	return 0;
}
```

* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **è¾“å…¥ä¸åˆå§‹åŒ–**ï¼šè¯»å…¥æ•°æ®ï¼Œç”¨`iota`åˆå§‹åŒ–å¹¶æŸ¥é›†ï¼ˆæ¯ä¸ªç›’å­è‡ªå·±æ˜¯ç¤¾åŒºï¼‰ï¼›  
2. **åˆå¹¶ç¤¾åŒº**ï¼šæ¯è¯»ä¸€ä¸ªçƒï¼Œåˆå¹¶`A_i`å’Œ`B_i`çš„ç¤¾åŒºï¼Œç»Ÿè®¡å…¥åº¦`in`ã€å‡ºåº¦`ot`ï¼›  
3. **åˆ¤æ— è§£**ï¼šå¦‚æœæœ‰ç›’å­`out_x>0`ä½†`in_x=0`ï¼ˆæ²¡äººæ¬è¿›æ¥ï¼Œå´è¦æ¬å‡ºå»ï¼‰ï¼Œç›´æ¥è¾“å‡º-1ï¼›  
4. **ç»Ÿè®¡ç¤¾åŒºæ¡ä»¶**ï¼šè®¡ç®—æ¯ä¸ªç¤¾åŒºçš„å¤§å°`sz`å’Œæ˜¯å¦æœ‰`out_x>1`ï¼ˆ`vis`ï¼‰ï¼Œç»Ÿè®¡éœ€è¦æ•‘æ´çš„ç¤¾åŒºæ•°`need`ï¼›  
5. **å¤„ç†å¿—æ„¿è€…**ï¼šæ”¶é›†èƒ½å¸®å¿™çš„çƒï¼ˆ`v1`å’Œ`v2`ï¼‰ï¼Œæ’åºåç®—å‰ç¼€å’Œï¼›  
6. **è´ªå¿ƒé€‰å¿—æ„¿è€…**ï¼šæ‰¾æœ€å°ä»£ä»·çš„å¿—æ„¿è€…ç»„åˆï¼Œè¾“å‡ºæ€»æ¬¡æ•°ã€‚  


### é¢˜è§£ä¸€æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
**é¢˜è§£ä¸€ï¼š(æ¥æºï¼šjunå¤´å‰å‰)**  
* **äº®ç‚¹**ï¼šç”¨**å‰ç¼€å’Œ+äºŒåˆ†**å¿«é€Ÿç®—éœ€è¦å¤šå°‘å¿—æ„¿è€…ï¼ŒæŠŠè´ªå¿ƒé€»è¾‘å†™å¾—ç‰¹åˆ«é«˜æ•ˆï¼  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// è®¡ç®—éœ€è¦å¤šå°‘ä¸ªå¿—æ„¿è€…ï¼ˆvæ•°ç»„ï¼Œæ¯ä¸ªå¿—æ„¿è€…è´¡çŒ®çš„æ¬¡æ•°ï¼Œæ‰¾>=xçš„æœ€å°ä¸ªæ•°ï¼‰
int get(vector<ll>&v,ll x){
	if(x<=0)return 0;
	if(v.empty()||x>v.back())return 1e9;
	return lower_bound(v.begin(),v.end(),x)-v.begin()+1;
}

// è´ªå¿ƒæ‰¾æœ€å°ä»£ä»·
int mn=min(get(v1,need), get(v2,need)*2);
for(int i=0;i<v1.size();i++){
	ll rem=need-v1[i];
	if(rem<=0)chkmn(mn,i+1);
	else chkmn(mn,i+1+2*get(v2,rem));
}
```  
* **ä»£ç è§£è¯»**ï¼š  
- `get`å‡½æ•°ï¼šç”¨äºŒåˆ†æ³•æ‰¾**æœ€å°‘éœ€è¦å¤šå°‘ä¸ªå¿—æ„¿è€…**ï¼ˆæ¯”å¦‚`v1`é‡Œå‰`k`ä¸ªçš„æ€»å¸®åŠ©æ¬¡æ•°>=`need`ï¼‰ï¼›  
- `mn`åˆå§‹å€¼ï¼šæ¯”è¾ƒâ€œåªç”¨v1â€ï¼ˆä»£ä»·`k`ï¼‰å’Œâ€œåªç”¨v2â€ï¼ˆä»£ä»·`2k`ï¼‰çš„æœ€å°ï¼›  
- å¾ªç¯éå†ï¼šå°è¯•ç”¨å‰`i+1`ä¸ªv1å¿—æ„¿è€…ï¼Œå‰©ä¸‹çš„ç”¨v2ï¼Œæ‰¾æ€»ä»£ä»·æœ€å°çš„ç»„åˆï¼ˆæ¯”å¦‚ç”¨3ä¸ªv1+2ä¸ªv2ï¼Œä»£ä»·æ˜¯3+2*2=7ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œ+äºŒåˆ†æ˜¯å¤„ç†â€œæ‰¾æœ€å°ä¸ªæ•°æ»¡è¶³æ€»å’Œ>=xâ€çš„ç»å…¸æŠ€å·§ï¼Œè´ªå¿ƒé—®é¢˜å¸¸ç”¨ï¼  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  

### ğŸŒŸ åŠ¨ç”»ä¸»é¢˜ï¼šåƒç´ ç¤¾åŒºçš„æ•‘æ´è¡ŒåŠ¨  
æˆ‘ä»¬ç”¨**8ä½FCé£æ ¼**åšåŠ¨ç”»ï¼ŒæŠŠç›’å­ç”»æˆ16x16çš„åƒç´ å—ï¼Œçƒæ˜¯4x4çš„å°æ–¹å—ï¼Œé…åˆå¤å¤éŸ³æ•ˆï¼Œè®©ä½ åƒç©æ¸¸æˆä¸€æ ·å­¦ç®—æ³•ï¼  


### ğŸ® æ ¸å¿ƒæ¼”ç¤ºå†…å®¹ä¸äº¤äº’è®¾è®¡  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦è¾¹æ˜¯**ç¤¾åŒºåœ°å›¾**ï¼ˆç›’å­æ’åˆ—æˆç½‘æ ¼ï¼Œçƒçš„åˆå§‹ä½ç½®ç”¨å½©è‰²ç‚¹æ ‡è®°ï¼‰ï¼›  
   - å³è¾¹æ˜¯**æ§åˆ¶é¢æ¿**ï¼š`å¼€å§‹/æš‚åœ`ï¼ˆåƒç´ æŒ‰é’®ï¼‰ã€`å•æ­¥`ï¼ˆç®­å¤´æŒ‰é’®ï¼‰ã€`é€Ÿåº¦æ»‘å—`ï¼ˆ1-5å€é€Ÿï¼‰ã€`é‡ç½®`ï¼ˆåˆ·æ–°æŒ‰é’®ï¼‰ï¼›  
   - èƒŒæ™¯æ’­æ”¾**8ä½BGM**ï¼ˆåƒã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»æ¾æ—‹å¾‹ï¼‰ã€‚  

2. **è¿é€šå—åˆå¹¶åŠ¨ç”»**ï¼š  
   - æ¯åˆå¹¶ä¸€ä¸ªç›’å­ï¼Œä¸¤ä¸ªç›’å­çš„é¢œè‰²é€æ¸å˜æˆåŒè‰²ç³»ï¼ˆæ¯”å¦‚çº¢è‰²â†’ç²‰è‰²ï¼‰ï¼Œä¼´éšâ€œå’”å—’â€å£°ï¼›  
   - åˆå¹¶å®Œæˆåï¼Œç¤¾åŒºåç§°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ–¹ï¼ˆæ¯”å¦‚â€œç¤¾åŒº1ï¼š5ä¸ªç›’å­â€ï¼‰ã€‚  

3. **æ¡ä»¶åˆ¤æ–­åŠ¨ç”»**ï¼š  
   - `out_x>1`çš„ç›’å­é—ªçƒ**ç»¿è‰²**ï¼ˆè¡¨ç¤ºâ€œæœ‰å¤šä½™æˆ¿é—´â€ï¼‰ï¼›  
   - å¤§äº1çš„ç¤¾åŒºå¦‚æœæ²¡æœ‰ç»¿è‰²ç›’å­ï¼Œæ•´ä¸ªç¤¾åŒºçš„ç›’å­å˜æˆ**é»„è‰²**ï¼ˆè¡¨ç¤ºâ€œéœ€è¦æ•‘æ´â€ï¼‰ï¼Œå±å¹•å¼¹å‡ºæç¤ºï¼šâ€œç¤¾åŒº3éœ€è¦æ•‘æ´ï¼â€ã€‚  

4. **å¿—æ„¿è€…é€‰æ‹©åŠ¨ç”»**ï¼š  
   - èƒ½å¸®å¿™çš„çƒï¼ˆ`v1`å’Œ`v2`ï¼‰æ’æˆ**åƒç´ é˜Ÿåˆ—**ï¼ˆv1æ˜¯ç»¿è‰²ï¼Œv2æ˜¯è“è‰²ï¼‰ï¼›  
   - è´ªå¿ƒé€‰æ‹©æ—¶ï¼Œé€‰ä¸­çš„çƒä¼šâ€œè·³èµ·æ¥â€ï¼ˆåŠ¨ç”»ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼Œé˜Ÿåˆ—é‡Œçš„çƒæ€»æ•°å‡å°‘ã€‚  

5. **æ•‘æ´è¿‡ç¨‹åŠ¨ç”»**ï¼š  
   - å¿—æ„¿è€…çƒä»åŸç¤¾åŒºç§»åŠ¨åˆ°é»„è‰²ç¤¾åŒºï¼ˆæ»‘åŠ¨åŠ¨ç”»ï¼‰ï¼Œé»„è‰²ç¤¾åŒºå˜æˆ**ç»¿è‰²**ï¼ˆè¡¨ç¤ºâ€œå·²æ•‘æ´â€ï¼‰ï¼›  
   - æ¯æ•‘æ´ä¸€ä¸ªç¤¾åŒºï¼Œå±å¹•ä¸‹æ–¹çš„â€œæ•‘æ´è¿›åº¦æ¡â€å¢åŠ ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆåƒã€Šé­‚æ–—ç½—ã€‹çš„è¿‡å…³å£°ï¼‰ã€‚  

6. **äº¤äº’æ§åˆ¶**ï¼š  
   - `å•æ­¥æ‰§è¡Œ`ï¼šç‚¹å‡»ä¸€æ¬¡ï¼ŒåŠ¨ç”»èµ°ä¸€æ­¥ï¼ˆæ¯”å¦‚åˆå¹¶ä¸€ä¸ªç¤¾åŒºã€é€‰ä¸€ä¸ªå¿—æ„¿è€…ï¼‰ï¼›  
   - `è‡ªåŠ¨æ’­æ”¾`ï¼šæŒ‰è®¾å®šé€Ÿåº¦ï¼ˆæ»‘å—è°ƒæ•´ï¼‰è‡ªåŠ¨æ¼”ç¤ºï¼Œåƒâ€œAIç©æ¸¸æˆâ€ä¸€æ ·å®Œæˆæ•‘æ´ï¼›  
   - `é‡ç½®`ï¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°æ¼”ç¤ºã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜  

æŒæ¡äº†â€œè¿é€šå—åˆ†æ+è´ªå¿ƒâ€çš„æ€è·¯ï¼Œå¯ä»¥è¯•è¯•è¿™äº›ç›¸ä¼¼é—®é¢˜ï¼š  
1. **æ´›è°· P1196 é“¶æ²³è‹±é›„ä¼ è¯´**ï¼šç”¨å¹¶æŸ¥é›†å¤„ç†é£èˆ¹çš„è¿é€šå—ï¼Œç»Ÿè®¡è·ç¦»ï¼ˆç±»ä¼¼ç¤¾åŒºå†…çš„ä½ç½®ï¼‰ï¼›  
2. **æ´›è°· P2820 å±€åŸŸç½‘**ï¼šå›¾è®ºè¿é€šå—é—®é¢˜ï¼Œæ±‚æœ€å°ç”Ÿæˆæ ‘ï¼ˆç±»ä¼¼æ‰¾æœ€å°ä»£ä»·çš„ç¤¾åŒºè¿æ¥æ–¹å¼ï¼‰ï¼›  
3. **æ´›è°· P3367 å¹¶æŸ¥é›†æ¨¡æ¿**ï¼šç»ƒç†Ÿå¹¶æŸ¥é›†çš„åŸºæœ¬æ“ä½œï¼ˆåˆå¹¶ã€æŸ¥è¯¢ï¼‰ï¼Œæ˜¯æœ¬é¢˜çš„åŸºç¡€ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  

**å‚è€ƒç»éªŒ (æ¥è‡ª junå¤´å‰å‰)**ï¼š  
> â€œæˆ‘ä¸€å¼€å§‹åœ¨å¤„ç†â€˜æ²¡æœ‰åˆå§‹å¿—æ„¿è€…â€™çš„æƒ…å†µæ—¶å¡äº†å¾ˆä¹…ï¼Œåæ¥å‘ç°å¿…é¡»ç”¨v1çš„ç¬¬ä¸€ä¸ªçƒâ€”â€”å› ä¸ºv1çš„çƒæ¥è‡ªæœ‰å¤šä½™æˆ¿é—´çš„ç¤¾åŒºï¼Œèƒ½ç›´æ¥å¸®å¿™ï¼Œè€Œv2çš„çƒéœ€è¦å…ˆè¢«æ•‘æ´æ‰èƒ½å¸®å¿™ï¼â€  

**Kayçš„ç‚¹è¯„**ï¼šè¿™ä¸ªç»†èŠ‚å¤ªé‡è¦äº†ï¼ç¼–ç¨‹æ—¶ä¸€å®šè¦æƒ³æ¸…æ¥šâ€œå¿—æ„¿è€…çš„èµ„æ ¼â€â€”â€”v1çš„çƒæ˜¯â€œæœ‰èµ„è´¨çš„å¿—æ„¿è€…â€ï¼ˆæ¥è‡ªèƒ½å¸®å¿™çš„ç¤¾åŒºï¼‰ï¼Œv2çš„æ˜¯â€œéœ€è¦å…ˆè¢«æ•‘æ´çš„å¿—æ„¿è€…â€ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œ**æ‰‹åŠ¨æ¨¡æ‹Ÿå°ä¾‹å­**ï¼ˆæ¯”å¦‚æ ·ä¾‹2ï¼‰èƒ½å¿«é€Ÿæ‰¾åˆ°bugï¼  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œAGC045E Fragile Ballsâ€çš„åˆ†æå°±åˆ°è¿™é‡Œã€‚è®°ä½ï¼š**å¹¶æŸ¥é›†æ˜¯å¤„ç†è¿é€šå—çš„ç¥å™¨ï¼Œè´ªå¿ƒæ˜¯æ‰¾æœ€å°ä»£ä»·çš„å…³é”®**ï¼Œå¤šç»ƒç±»ä¼¼é—®é¢˜å°±èƒ½ç†Ÿç»ƒæŒæ¡ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï½ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š136.76ç§’
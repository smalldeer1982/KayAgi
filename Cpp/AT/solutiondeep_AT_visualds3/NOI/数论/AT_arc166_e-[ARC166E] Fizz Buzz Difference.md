# é¢˜ç›®ä¿¡æ¯

# [ARC166E] Fizz Buzz Difference

## é¢˜ç›®æè¿°

ç»™å®šæ­£æ•´æ•° $n,\ a,\ b$ï¼Œä¸”æ»¡è¶³ $a < b$ã€‚

å¯¹äºæ»¡è¶³ $1 \leq L \leq R$ çš„æ•´æ•°å¯¹ $(L, R)$ï¼Œå¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™ç§°å…¶ä¸º**è‰¯å¥½ç»„**ï¼š

- åœ¨ $L$ åˆ° $R$ ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°ä¸­ï¼Œ$a$ çš„å€æ•°çš„ä¸ªæ•°ä¸º $n_a$ï¼Œ$b$ çš„å€æ•°çš„ä¸ªæ•°ä¸º $n_b$ï¼Œè‹¥ $n_a - n_b = n$ï¼Œåˆ™ $(L, R)$ ä¸ºè‰¯å¥½ç»„ã€‚

å¯ä»¥è¯æ˜ï¼Œè‰¯å¥½ç»„ä¸€å®šå­˜åœ¨ã€‚åœ¨æ‰€æœ‰è‰¯å¥½ç»„ä¸­ï¼Œè¾“å‡º $R-L$ æœ€å¤§çš„é‚£ä¸€ä¸ªã€‚å¦‚æœæœ‰å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„ç»„ï¼Œåˆ™è¾“å‡ºå…¶ä¸­ $L$ æœ€å°çš„é‚£ä¸€ä¸ªï¼ˆç”±äº $1 \leq L$ï¼Œæ‰€ä»¥ä¸€å®šå­˜åœ¨ $L$ æœ€å°çš„ç»„ï¼Œä¸”ç­”æ¡ˆå”¯ä¸€ï¼‰ã€‚

ç»™å®š $T$ ç»„æµ‹è¯•æ•°æ®ï¼Œè¯·åˆ†åˆ«è¾“å‡ºæ¯ç»„çš„ç­”æ¡ˆã€‚

## è¯´æ˜/æç¤º

### æ•°æ®èŒƒå›´

- $1 \leq T \leq 2 \times 10^5$
- $1 \leq n \leq 10^6$
- $1 \leq a < b \leq 10^6$

### æ ·ä¾‹è§£é‡Š 1

$(L, R) = (4, 35)$ æ—¶ï¼Œ$n_a = 10,\ n_b = 7$ï¼Œå› æ­¤æ˜¯è‰¯å¥½ç»„ã€‚å…¶ä»–å¦‚ $(1, 26)$ã€$(10, 41)$ ä¹Ÿæ˜¯è‰¯å¥½ç»„ã€‚åœ¨è¿™äº›ç»„ä¸­ï¼Œ$(1, 26)$ çš„ $R-L$ ä¸æ˜¯æœ€å¤§å€¼ï¼Œæ‰€ä»¥ä¸æ˜¯ç­”æ¡ˆï¼›$(10, 41)$ çš„ $R-L$ è™½ç„¶æœ€å¤§ï¼Œä½† $L$ ä¸æ˜¯æœ€å°ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯ç­”æ¡ˆã€‚

ç”± ChatGPT 4.1 ç¿»è¯‘

## æ ·ä¾‹ #1

### è¾“å…¥

```
1

3 3 5```

### è¾“å‡º

```
4 35```

## æ ·ä¾‹ #2

### è¾“å…¥

```
5

4 3 5

6 2 4

1 1 2

123 456 789

9876 54 321```

### è¾“å‡º

```
10 50

3 29

2 4

5473 140447

163 641411```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ARC166E] Fizz Buzz Difference æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ•°å­¦ï¼ˆæ•°è®ºï¼‰` + `äºŒåˆ†æŸ¥æ‰¾`


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œå°±åƒâ€œç”¨æ•°å­¦å¯†ç æœ¬ç ´è§£åŒºé—´çš„æœ€é•¿ç§˜å¯†â€â€”â€”**æ•°å­¦ï¼ˆæ•°è®ºï¼‰**å¸®æˆ‘ä»¬è§£è¯»aã€bå€æ•°çš„æ•°é‡å…³ç³»ï¼Œ**äºŒåˆ†æŸ¥æ‰¾**å¸®æˆ‘ä»¬å¿«é€Ÿæ‰¾åˆ°â€œæœ€é•¿åŒºé—´â€çš„æœ€å¤§å€¼ã€‚  

### ç®—æ³•æ ¸å¿ƒä¸æœ¬é¢˜åº”ç”¨  
- **æ•°å­¦ï¼ˆæ•°è®ºï¼‰**ï¼šå°±åƒâ€œæ‰¾è§„å¾‹çš„é’¥åŒ™â€â€”â€”é€šè¿‡æœ€å¤§å…¬çº¦æ•°ï¼ˆgcd(a,b)ï¼‰èƒ½ç¡®å®šåŒºé—´å†…ç¬¬ä¸€ä¸ªbçš„å€æ•°çš„æœ€å‰ä½ç½®ï¼ˆæ¯”å¦‚å¤§äºç­‰äºLçš„ä¸‹ä¸€ä¸ªbçš„ä½ç½®æ˜¯ax+gcd(a,b)ï¼‰ï¼›é€šè¿‡åŒä½™å¼èƒ½è®¡ç®—åŒºé—´å†…bçš„å€æ•°ä¸ªæ•°ã€‚  
- **äºŒåˆ†æŸ¥æ‰¾**ï¼šå°±åƒâ€œé‡ç»³å­é•¿åº¦â€â€”â€”æˆ‘ä»¬è¦æ‰¾æœ€å¤§çš„åŒºé—´é•¿åº¦ï¼Œè€Œç›®æ ‡å‡½æ•°ï¼ˆaçš„å€æ•°å‡bçš„å€æ•°çš„å·®ï¼‰å…³äºåŒºé—´é•¿åº¦çš„å‚æ•°kæ˜¯**å•è°ƒé€’å¢**çš„ï¼ˆkè¶Šå¤§ï¼Œå·®è¶Šå¤§ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç”¨äºŒåˆ†å¿«é€Ÿå®šä½æœ€å¤§çš„kã€‚  

### é¢˜è§£æ€è·¯ä¸æ ¸å¿ƒéš¾ç‚¹  
æ‰€æœ‰é¢˜è§£çš„æ ¸å¿ƒæ€è·¯éƒ½ä¸€è‡´ï¼š  
1. **é—®é¢˜è½¬åŒ–**ï¼šå°†â€œn_a - n_b = nâ€è½¬åŒ–ä¸ºâ€œn_a - n_b â‰¤ nâ€ï¼ˆå› ä¸ºæ›´é•¿çš„åŒºé—´ä¼šè®©å·®æ›´å¤§ï¼Œè€Œæˆ‘ä»¬è¦æ‰¾æœ€é•¿çš„åˆæ³•åŒºé—´ï¼‰ã€‚  
2. **åŒºé—´æ„é€ **ï¼šæœ€ä¼˜åŒºé—´çš„L-1å’ŒR+1å¿…é¡»æ˜¯açš„å€æ•°ï¼ˆå¦åˆ™å¯ä»¥å»¶é•¿åŒºé—´è€Œä¸æ¶åŒ–å·®ï¼‰ï¼Œæ‰€ä»¥è®¾L=akâ‚+1ï¼ŒR=akâ‚‚-1ï¼Œæœ€å¤§åŒ–kâ‚‚-kâ‚ï¼ˆå³åŒºé—´é•¿åº¦ï¼‰ã€‚  
3. **äºŒåˆ†k**ï¼šè®¾k=kâ‚‚-kâ‚ï¼Œè®¡ç®—æ­¤æ—¶çš„æœ€å°å·®ï¼ˆé€šè¿‡gcd(a,b)è®©bçš„å€æ•°å°½å¯èƒ½å¤šï¼‰ï¼Œè‹¥å·®â‰¤nï¼Œåˆ™kå¯è¡Œï¼Œç»§ç»­å°è¯•æ›´å¤§çš„kã€‚  
4. **æ‰¾æœ€å°L**ï¼šæ‰¾åˆ°kåï¼Œæ±‚è§£çº¿æ€§åŒä½™ä¸ç­‰å¼ï¼Œæ‰¾åˆ°æœ€å°çš„kâ‚ä½¿å¾—åŒºé—´åˆæ³•ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼š  
- å¦‚ä½•è¯æ˜â€œåŒºé—´ç«¯ç‚¹å¿…é¡»æ˜¯açš„å€æ•°é™„è¿‘â€ï¼Ÿï¼ˆé€šè¿‡è´ªå¿ƒï¼šå»¶é•¿åŒºé—´ä¸ä¼šè®©å·®å˜å¤§ï¼Œæ‰€ä»¥æœ€ä¼˜è§£ä¸€å®šæ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼‰  
- å¦‚ä½•å¿«é€Ÿæ±‚è§£çº¿æ€§åŒä½™ä¸ç­‰å¼çš„æœ€å°è§£ï¼Ÿï¼ˆæ¯”å¦‚ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•å¤„ç†ax mod b â‰¥ cçš„æœ€å°xï¼‰  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
æˆ‘ä»¬è®¾è®¡ä¸€ä¸ª**8ä½åƒç´ é£çš„â€œæ•°å­¦æ¢é™©å®¶â€**åŠ¨ç”»ï¼š  
- **åœºæ™¯**ï¼šåƒç´ ç½‘æ ¼ä¸­ï¼Œè“è‰²å—ä»£è¡¨açš„å€æ•°ï¼Œé»„è‰²å—ä»£è¡¨bçš„å€æ•°ï¼Œçº¢è‰²å—ä»£è¡¨å½“å‰åŒºé—´[L,R]ã€‚  
- **äºŒåˆ†è¿‡ç¨‹**ï¼šç”¨è¿›åº¦æ¡å±•ç¤ºäºŒåˆ†çš„â€œå·¦è¾¹ç•Œâ€å’Œâ€œå³è¾¹ç•Œâ€ï¼Œæ¯æ¬¡äºŒåˆ†ä¸­ç‚¹æ—¶ï¼ŒåŒºé—´é•¿åº¦å˜åŒ–ï¼ˆçº¢è‰²å—ä¼¸é•¿/ç¼©çŸ­ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
- **åŒä½™æ±‚è§£**ï¼šç”¨åƒç´ ç®­å¤´æŒ‡å‘å½“å‰çš„kâ‚å€¼ï¼Œå½“æ‰¾åˆ°æœ€å°kâ‚æ—¶ï¼Œç®­å¤´é—ªçƒå¹¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ­¥çœ‹äºŒåˆ†å’ŒåŒä½™æ±‚è§£ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆåƒAIæ¢é™©å®¶ä¸€æ ·æ‰¾è§£ï¼‰ï¼Œé€Ÿåº¦æ»‘å—è°ƒèŠ‚æ’­æ”¾é€Ÿåº¦ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šä½œè€…Schi2oidï¼ˆèµ8ï¼‰  
**ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„â€œè½¬åŒ–èƒ½åŠ›â€éå¸¸äº®çœ¼â€”â€”æŠŠåŸé—®é¢˜å·§å¦™è½¬åŒ–ä¸ºâ€œn_a-n_bâ‰¤nâ€ï¼Œå¹¶é€šè¿‡gcdç¡®å®šbçš„å€æ•°çš„æœ€å‰ä½ç½®ï¼Œç›´æ¥å°†é—®é¢˜è½¬åŒ–ä¸ºäºŒåˆ†kã€‚æ›´å‰å®³çš„æ˜¯ï¼Œä½œè€…ç”¨**çº¿æ€§åŒä½™ä¸ç­‰å¼**æ±‚è§£æœ€å°Lï¼Œæ—¶é—´å¤æ‚åº¦O(T logV)ï¼Œé«˜æ•ˆä¸”æ€è·¯æ¸…æ™°ã€‚ä»£ç ä¸­çš„â€œsolveå‡½æ•°â€ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•è§£åŒä½™ä¸ç­‰å¼ï¼‰æ˜¯æ ¸å¿ƒäº®ç‚¹ï¼Œå®Œç¾è§£å†³äº†â€œæ‰¾æœ€å°kâ‚â€çš„é—®é¢˜ã€‚

### é¢˜è§£äºŒï¼šä½œè€…Leasierï¼ˆèµ4ï¼‰  
**ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„â€œç±»æ¬§å‡ é‡Œå¾—ç®—æ³•â€åº”ç”¨å¾ˆæœ‰ç‰¹è‰²â€”â€”ç”¨ç±»æ¬§è®¡ç®—åŒºé—´å†…bçš„å€æ•°ä¸ªæ•°çš„å‰ç¼€å’Œï¼Œä»è€ŒäºŒåˆ†æ‰¾åˆ°æœ€å°kâ‚ã€‚è™½ç„¶æ—¶é—´å¤æ‚åº¦æ˜¯O(T logÂ²w)ï¼ˆæ¯”é¢˜è§£ä¸€ç¨æ…¢ï¼‰ï¼Œä½†ç±»æ¬§çš„æ€è·¯æ‹“å±•äº†æˆ‘ä»¬å¯¹â€œæ•°è®ºæ±‚å’Œâ€çš„ç†è§£ã€‚ä»£ç ä¸­çš„â€œsolveå‡½æ•°â€ï¼ˆç±»æ¬§å®ç°ï¼‰å†™å¾—å¾ˆè§„èŒƒï¼Œå˜é‡åæ¸…æ™°ï¼Œé€‚åˆå­¦ä¹ ç±»æ¬§çš„åº”ç”¨ã€‚

### é¢˜è§£ä¸‰ï¼šä½œè€…DaiRuiChen007ï¼ˆèµ0ï¼‰  
**ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„â€œç®€æ´æ€§â€æ˜¯æœ€å¤§äº®ç‚¹â€”â€”ä»£ç ä»…30è¡Œï¼Œå´å®Œç¾å®ç°äº†æ ¸å¿ƒé€»è¾‘ã€‚ä½œè€…æŠŠäºŒåˆ†kå’Œçº¿æ€§åŒä½™æ±‚è§£æ•´åˆå¾—éå¸¸ç´§å‡‘ï¼Œsolveå‡½æ•°ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•å¤„ç†â€œax mod b â‰¥ câ€çš„æœ€å°è§£ï¼Œæ—¶é—´å¤æ‚åº¦O(T logV)ï¼Œæ•ˆç‡æé«˜ã€‚ä»£ç ä¸­çš„â€œg=__gcd(a,b)â€å’Œâ€œk=solve(...)â€ä¸¤è¡Œï¼Œç²¾å‡†æŠ“ä½äº†é—®é¢˜çš„æ ¸å¿ƒï¼Œé€‚åˆä½œä¸ºâ€œæç®€å®ç°â€çš„å‚è€ƒã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### å…³é”®ç‚¹1ï¼šé—®é¢˜è½¬åŒ–â€”â€”ä¸ºä»€ä¹ˆå¯ä»¥æŠŠâ€œç­‰äºnâ€æ”¹æˆâ€œâ‰¤nâ€ï¼Ÿ  
**åˆ†æ**ï¼šåŸé—®é¢˜è¦æ±‚n_a -n_b =nï¼Œä½†æœ€é•¿åŒºé—´çš„å·®ä¸€å®šâ€œåˆšå¥½ç­‰äºnâ€ï¼ˆå› ä¸ºæ›´é•¿çš„åŒºé—´å·®ä¼šæ›´å¤§ï¼Œè€Œæˆ‘ä»¬è¦æ‰¾æœ€å¤§çš„åˆæ³•åŒºé—´ï¼‰ã€‚æ‰€ä»¥å¯ä»¥è´ªå¿ƒæŠŠæ¡ä»¶æ”¾å®½åˆ°â€œâ‰¤nâ€ï¼Œæ‰¾åˆ°æœ€å¤§çš„kåï¼Œå†è°ƒæ•´Lä½¿å¾—å·®åˆšå¥½ç­‰äºnã€‚  
**è§£å†³ç­–ç•¥**ï¼šé€šè¿‡â€œè´ªå¿ƒå»¶é•¿åŒºé—´â€çš„æ€è·¯è¯æ˜â€”â€”è‹¥åŒºé—´ç«¯ç‚¹ä¸æ˜¯açš„å€æ•°é™„è¿‘ï¼Œå»¶é•¿åå·®ä¸ä¼šå˜å¤§ï¼Œæ‰€ä»¥æœ€ä¼˜è§£ä¸€å®šæ»¡è¶³L-1å’ŒR+1æ˜¯açš„å€æ•°ã€‚  

### å…³é”®ç‚¹2ï¼šå¦‚ä½•ç¡®å®šbçš„å€æ•°çš„æœ€å‰ä½ç½®ï¼Ÿ  
**åˆ†æ**ï¼šè¦è®©bçš„å€æ•°å°½å¯èƒ½å¤šï¼ˆä»è€Œè®©å·®å°½å¯èƒ½å°ï¼‰ï¼Œå¿…é¡»è®©ç¬¬ä¸€ä¸ªbçš„å€æ•°å°½å¯èƒ½é å‰ã€‚æ ¹æ®æ•°è®ºï¼Œå¤§äºç­‰äºLçš„ä¸‹ä¸€ä¸ªbçš„ä½ç½®æ˜¯L + (gcd(a,b)-1)ï¼ˆå› ä¸ºgcd(a,b)æ˜¯aå’Œbçš„æœ€å°å…±åŒæ­¥é•¿ï¼‰ã€‚  
**è§£å†³ç­–ç•¥**ï¼šç”¨gcd(a,b)è®¡ç®—æœ€å‰çš„bçš„ä½ç½®ï¼Œä»è€Œå¾—åˆ°åŒºé—´å†…bçš„æœ€å°ä¸ªæ•°ã€‚  

### å…³é”®ç‚¹3ï¼šå¦‚ä½•æ±‚è§£çº¿æ€§åŒä½™ä¸ç­‰å¼çš„æœ€å°è§£ï¼Ÿ  
**åˆ†æ**ï¼šæ‰¾åˆ°kåï¼Œéœ€è¦æ‰¾æœ€å°çš„kâ‚ä½¿å¾—akâ‚ mod b â‰¥ cï¼ˆcæ˜¯æŸä¸ªå¸¸æ•°ï¼‰ã€‚è¿™æ˜¯ç»å…¸çš„çº¿æ€§åŒä½™é—®é¢˜ï¼Œç›´æ¥æšä¸¾ä¼šè¶…æ—¶ï¼ˆkâ‚å¯èƒ½å¾ˆå¤§ï¼‰ï¼Œå¿…é¡»ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•ä¼˜åŒ–ã€‚  
**è§£å†³ç­–ç•¥**ï¼šç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•é€’å½’å¤„ç†ï¼Œæ¯æ¬¡ç¼©å°é—®é¢˜è§„æ¨¡ï¼ˆæ¯”å¦‚æŠŠaå’Œbæ¢æˆb mod aå’Œaï¼‰ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å°è§£ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é—®é¢˜è½¬åŒ–**ï¼šé‡åˆ°â€œç­‰äºnâ€çš„æœ€é•¿åŒºé—´é—®é¢˜ï¼Œå…ˆå°è¯•â€œæ”¾å®½æ¡ä»¶â€ï¼ˆæ¯”å¦‚â‰¤nï¼‰ï¼Œå†æ‰¾æœ€å¤§è§£ã€‚  
- **æ•°è®ºå·¥å…·**ï¼šgcdæ˜¯å¤„ç†â€œå€æ•°ä½ç½®â€çš„å…³é”®ï¼Œçº¿æ€§åŒä½™ä¸ç­‰å¼ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•è§£æ›´é«˜æ•ˆã€‚  
- **äºŒåˆ†æŸ¥æ‰¾**ï¼šå½“ç›®æ ‡å‡½æ•°å•è°ƒæ—¶ï¼ŒäºŒåˆ†æ˜¯â€œæ‰¾æœ€å¤§å€¼/æœ€å°å€¼â€çš„ç¥å™¨ï¼Œæ—¶é—´å¤æ‚åº¦O(logV)ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
**è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†DaiRuiChen007é¢˜è§£çš„æ€è·¯ï¼Œæ˜¯â€œæç®€ä¸”é«˜æ•ˆâ€çš„å®ç°ï¼Œæ—¶é—´å¤æ‚åº¦O(T logV)ï¼Œé€‚åˆç›´æ¥ç”¨äºç«èµ›ã€‚  

```cpp
#include<bits/stdc++.h>
#define ll long long
using namespace std;
const ll inf=1e12;

ll solve(ll l, ll r, ll a, ll p) { // è§£ax mod p âˆˆ [l,r]çš„æœ€å°x
    if (!l) return 0;
    if ((l + a - 1)/a * a <= r) return (l + a - 1)/a;
    ll k = solve((a - r%a)%a, (a - l%a)%a, p%a, a);
    return (k * p + l + a - 1)/a;
}

int main() {
    int T;
    scanf("%d", &T);
    while (T--) {
        ll n, a, b;
        scanf("%lld%lld%lld", &n, &a, &b);
        ll L = 0, R = inf, g = 0, d = __gcd(a, b);
        // äºŒåˆ†æœ€å¤§çš„k = k2 -k1
        while (L <= R) {
            ll mid = (L + R) >> 1;
            ll cnt_b = (a * mid - 1)/b;
            ll diff = (mid - 1) - cnt_b - (d <= (a*mid -1)%b);
            if (diff <= n) g = mid, L = mid + 1;
            else R = mid -1;
        }
        // æ‰¾æœ€å°çš„k1
        ll mod = (a*g -1) % b;
        ll k = (d <= mod) ? solve((b - mod)%b, b-1, a, b) : 0;
        printf("%lld %lld\n", a*k +1, a*(k+g) -1);
    }
    return 0;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–Tç»„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¯ç»„è¯»n,a,bã€‚  
2. **äºŒåˆ†k**ï¼šé€šè¿‡äºŒåˆ†æ‰¾åˆ°æœ€å¤§çš„kï¼ˆåŒºé—´å†…açš„å€æ•°ä¸ªæ•°ç›¸å…³å‚æ•°ï¼‰ï¼Œè®¡ç®—æ­¤æ—¶çš„å·®diffï¼ˆn_a-n_bï¼‰ï¼Œè‹¥diffâ‰¤nåˆ™kå¯è¡Œã€‚  
3. **æ‰¾æœ€å°k1**ï¼šç”¨solveå‡½æ•°è§£çº¿æ€§åŒä½™ä¸ç­‰å¼ï¼Œæ‰¾åˆ°æœ€å°çš„k1ä½¿å¾—åŒºé—´åˆæ³•ã€‚  
4. **è¾“å‡ºç»“æœ**ï¼šè®¡ç®—L=ak1+1ï¼ŒR=a(k1+g)-1ï¼Œè¾“å‡ºã€‚  


### é¢˜è§£ä¸€ï¼šä½œè€…Schi2oid  
**äº®ç‚¹**ï¼šç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•è§£çº¿æ€§åŒä½™ä¸ç­‰å¼ï¼Œæ€è·¯æ¸…æ™°ï¼Œæ—¶é—´å¤æ‚åº¦O(logV)ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// æ¬§å‡ é‡Œå¾—ç®—æ³•è§£çº¿æ€§åŒä½™ä¸ç­‰å¼ï¼šax mod b â‰¥ cçš„æœ€å°x
ll solve(ll l, ll r, ll a, ll p) {
    if (!l) return 0;
    if ((l + a -1)/a *a <= r) return (l +a -1)/a;
    ll k = solve((a - r%a)%a, (a - l%a)%a, p%a, a);
    return (k*p + l +a -1)/a;
}
```  
**ä»£ç è§£è¯»**ï¼š  
- ç¬¬1è¡Œï¼šå¦‚æœl=0ï¼ˆå³ax mod bâ‰¥0ï¼Œæ€»æ˜¯æˆç«‹ï¼‰ï¼Œè¿”å›0ã€‚  
- ç¬¬2è¡Œï¼šå¦‚æœ[ l, r ]ä¸­æœ‰açš„å€æ•°ï¼ˆæ¯”å¦‚a*ceil(l/a) â‰¤rï¼‰ï¼Œç›´æ¥è¿”å›ceil(l/a)ã€‚  
- ç¬¬3-4è¡Œï¼šé€’å½’å¤„ç†æ›´å°çš„é—®é¢˜â€”â€”æŠŠaå’Œpæ¢æˆp%aå’Œaï¼ŒæŠŠåŒºé—´[l,r]æ¢æˆ[a-r%a, a-l%a]ï¼ˆæ¨¡è¿ç®—çš„å¯¹ç§°æ€§ï¼‰ï¼Œæœ€åè®¡ç®—æœ€å°xã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šçº¿æ€§åŒä½™ä¸ç­‰å¼çš„é€’å½’è§£æ³•ï¼Œæ ¸å¿ƒæ˜¯â€œæ¨¡è¿ç®—çš„å¯¹ç§°æ€§â€å’Œâ€œé—®é¢˜è§„æ¨¡ç¼©å°â€ã€‚  


### é¢˜è§£äºŒï¼šä½œè€…Leasier  
**äº®ç‚¹**ï¼šç”¨ç±»æ¬§å‡ é‡Œå¾—ç®—æ³•è®¡ç®—å‰ç¼€å’Œï¼Œè§£å†³â€œåŒºé—´å†…bçš„å€æ•°ä¸ªæ•°â€é—®é¢˜ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
ll solve(int n, int a, int b, int c) {
    if (a == 0) return (ll)(n + 1) * (b / c);
    if (a >= c || b >= c) return (a/c)*sum1(n) + (ll)(n+1)*(b/c) + solve(n, a%c, b%c, c);
    ll t = ((ll)a*n + b)/c;
    return n*t - solve(t-1, c, c - b -1, a);
}
```  
**ä»£ç è§£è¯»**ï¼š  
- ç¬¬1è¡Œï¼ša=0æ—¶ï¼Œæ¯ä¸ªiçš„floor((0*i +b)/c)=b/cï¼Œæ€»å’Œæ˜¯(n+1)*(b/c)ã€‚  
- ç¬¬2è¡Œï¼šaæˆ–bâ‰¥cæ—¶ï¼Œæ‹†åˆ†å¼å­ï¼ˆæ¯”å¦‚a=kc+rï¼Œfloor((kc+r)i +b)/c =k*i + floor(ri +b)/cï¼‰ï¼Œé€’å½’å¤„ç†rå’Œb%cã€‚  
- ç¬¬3-4è¡Œï¼šç”¨ç±»æ¬§çš„â€œäº¤æ¢å˜é‡â€æŠ€å·§ï¼ŒæŠŠsum_{i=0}^n floor((a*i +b)/c)è½¬åŒ–ä¸ºn*t - sum_{j=0}^{t-1} floor((c*j + (c-b-1))/a)ï¼Œå…¶ä¸­t=floor((a*n +b)/c)ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šç±»æ¬§å‡ é‡Œå¾—ç®—æ³•æ˜¯å¤„ç†â€œçº¿æ€§åˆ†å¼æ±‚å’Œâ€çš„ç¥å™¨ï¼Œé€‚ç”¨äºè®¡ç®—åŒºé—´å†…çš„å€æ•°ä¸ªæ•°ã€‚  


### é¢˜è§£ä¸‰ï¼šä½œè€…DaiRuiChen007  
**äº®ç‚¹**ï¼šä»£ç æç®€ï¼ŒæŠŠäºŒåˆ†å’ŒåŒä½™æ±‚è§£æ•´åˆå¾—éå¸¸ç´§å‡‘ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// äºŒåˆ†æœ€å¤§çš„k
while (L <= R) {
    ll mid = (L + R) >> 1;
    ll cnt_b = (a*mid -1)/b;
    ll diff = (mid-1) - cnt_b - (d <= (a*mid-1)%b);
    if (diff <=n) g=mid, L=mid+1;
    else R=mid-1;
}
```  
**ä»£ç è§£è¯»**ï¼š  
- ç¬¬3è¡Œï¼šè®¡ç®—åŒºé—´å†…bçš„å€æ•°ä¸ªæ•°cnt_bï¼ˆå½“k=midæ—¶ï¼‰ã€‚  
- ç¬¬4è¡Œï¼šè®¡ç®—å·®diff = (mid-1)ï¼ˆaçš„å€æ•°ä¸ªæ•°ï¼‰ - cnt_bï¼ˆbçš„å€æ•°ä¸ªæ•°ï¼‰ - æ˜¯å¦dâ‰¤modï¼ˆmodæ˜¯a*mid-1 mod bï¼Œè‹¥æˆç«‹åˆ™bçš„å€æ•°ä¸ªæ•°å°‘1ï¼‰ã€‚  
- ç¬¬5-6è¡Œï¼šè‹¥diffâ‰¤nï¼Œè¯´æ˜k=midå¯è¡Œï¼Œå°è¯•æ›´å¤§çš„kï¼›å¦åˆ™ç¼©å°kã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šäºŒåˆ†çš„å…³é”®æ˜¯â€œç›®æ ‡å‡½æ•°å•è°ƒâ€ï¼Œè¿™é‡Œdifféšmidå¢å¤§è€Œå¢å¤§ï¼Œæ‰€ä»¥å¯ä»¥äºŒåˆ†ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼š**åƒç´ æ•°å­¦æ¢é™©å®¶â€”â€”å¯»æ‰¾æœ€é•¿åŒºé—´**  
### è®¾è®¡æ€è·¯  
ç”¨8ä½åƒç´ é£è¥é€ â€œå¤å¤æ¸¸æˆâ€çš„å­¦ä¹ æ°›å›´ï¼Œè®©â€œæ•°å­¦è®¡ç®—â€å˜æˆâ€œæ¢é™©å®¶æ‰¾å®è—â€ï¼Œå¢åŠ è¶£å‘³æ€§ã€‚æ¯”å¦‚ï¼š  
- è“è‰²åƒç´ å—ä»£è¡¨açš„å€æ•°ï¼Œé»„è‰²ä»£è¡¨bçš„å€æ•°ï¼Œçº¢è‰²ä»£è¡¨å½“å‰åŒºé—´[L,R]ã€‚  
- äºŒåˆ†è¿‡ç¨‹åƒâ€œæ¢é™©å®¶æ‹‰é•¿ç»³å­â€ï¼Œæ¯æ¬¡äºŒåˆ†ä¸­ç‚¹æ—¶ï¼Œçº¢è‰²å—ä¼¸é•¿/ç¼©çŸ­ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
- æ‰¾åˆ°æœ€å°k1æ—¶ï¼Œæ¢é™©å®¶â€œæŒ–åˆ°å®è—â€ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆ8ä½ä¸Šæ‰¬éŸ³è°ƒï¼‰ã€‚  


### åŠ¨ç”»å¸§æ­¥éª¤  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯åƒç´ ç½‘æ ¼ï¼ˆFCæ¸¸æˆé£æ ¼ï¼‰ï¼Œå³ä¾§æ˜¯æ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½å¾ªç¯BGMï¼ˆè½»æ¾çš„é’¢ç´è°ƒï¼‰ã€‚  

2. **è¾“å…¥ä¸åˆå§‹åŒ–**ï¼š  
   - è¾“å…¥n,a,båï¼Œç½‘æ ¼ä¸­å‡ºç°è“è‰²açš„å€æ•°å—ã€é»„è‰²bçš„å€æ•°å—ï¼Œèµ·ç‚¹L=1ï¼ŒR=1ï¼ˆçº¢è‰²å°æ–¹å—ï¼‰ã€‚  

3. **äºŒåˆ†è¿‡ç¨‹æ¼”ç¤º**ï¼š  
   - è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰çš„â€œå·¦è¾¹ç•ŒLâ€å’Œâ€œå³è¾¹ç•ŒRâ€ï¼Œæ¯æ¬¡äºŒåˆ†ä¸­ç‚¹midæ—¶ï¼Œçº¢è‰²å—ä¼¸é•¿åˆ°midå¯¹åº”çš„åŒºé—´é•¿åº¦ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
   - è‹¥midå¯è¡Œï¼ˆdiffâ‰¤nï¼‰ï¼Œè¿›åº¦æ¡å³è¾¹ç•Œå³ç§»ï¼›å¦åˆ™å·¦è¾¹ç•Œå·¦ç§»ã€‚  

4. **åŒä½™æ±‚è§£æ¼”ç¤º**ï¼š  
   - ç”¨åƒç´ ç®­å¤´æŒ‡å‘å½“å‰çš„k1å€¼ï¼Œæ¯æ¬¡å°è¯•k1æ—¶ï¼Œç®­å¤´ç§»åŠ¨åˆ°å¯¹åº”çš„ä½ç½®ï¼Œè‹¥k1åˆæ³•ï¼ˆæ»¡è¶³åŒä½™æ¡ä»¶ï¼‰ï¼Œç®­å¤´é—ªçƒå¹¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  

5. **ç»“æœå±•ç¤º**ï¼š  
   - æ‰¾åˆ°æœ€ä¼˜è§£æ—¶ï¼Œçº¢è‰²å—å˜æˆâ€œé‡‘è‰²â€ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œå±å¹•æ˜¾ç¤ºâ€œæ‰¾åˆ°æœ€é•¿åŒºé—´ï¼L=xxï¼ŒR=xxâ€ã€‚  


### äº¤äº’ä¸éŸ³æ•ˆ  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€æ­¥çœ‹äºŒåˆ†å’ŒåŒä½™æ±‚è§£çš„æ¯ä¸€æ­¥ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼Œæ¢é™©å®¶åƒAIä¸€æ ·æ‰¾è§£ï¼Œé€Ÿåº¦æ»‘å—è°ƒèŠ‚æ’­æ”¾é€Ÿåº¦ï¼ˆä»â€œæ…¢â€åˆ°â€œå¿«â€ï¼‰ã€‚  
- **éŸ³æ•ˆ**ï¼š  
  - äºŒåˆ†ä¸­ç‚¹ï¼šâ€œå®â€ï¼ˆè½»å¾®åƒç´ éŸ³æ•ˆï¼‰ã€‚  
  - æ‰¾åˆ°k1ï¼šâ€œå®~å®~â€ï¼ˆèƒœåˆ©éŸ³æ•ˆï¼‰ã€‚  
  - æ— è§£ï¼šâ€œå’”â€ï¼ˆçŸ­ä¿ƒæç¤ºéŸ³æ•ˆï¼‰ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
æœ¬é¢˜çš„â€œæ•°å­¦ï¼ˆæ•°è®ºï¼‰+äºŒåˆ†æŸ¥æ‰¾â€æ€è·¯ï¼Œé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š  
1. **åŒºé—´å†…å€æ•°å·®é—®é¢˜**ï¼šæ¯”å¦‚â€œæ‰¾æœ€é•¿åŒºé—´ï¼Œä½¿å¾—3çš„å€æ•°å‡5çš„å€æ•°ç­‰äºkâ€ã€‚  
2. **çº¿æ€§åŒä½™ä¸ç­‰å¼**ï¼šæ¯”å¦‚â€œæ‰¾æœ€å°çš„xï¼Œä½¿å¾—5x mod 7 â‰¥3â€ã€‚  
3. **æ•°è®ºä¸­çš„æœ€å¤§åŒ–é—®é¢˜**ï¼šæ¯”å¦‚â€œæ‰¾æœ€å¤§çš„nï¼Œä½¿å¾—n!ä¸­åŒ…å«kä¸ªè´¨å› å­pâ€ã€‚  


### æ´›è°·ç»ƒä¹ æ¨è  
1. **P1082 [NOIP2012 æé«˜ç»„] åŒä½™æ–¹ç¨‹**ï¼š  
   - æ¨èç†ç”±ï¼šè¿™é“é¢˜æ˜¯â€œçº¿æ€§åŒä½™æ–¹ç¨‹â€çš„åŸºç¡€é¢˜ï¼Œå¸®åŠ©å·©å›ºæ¬§å‡ é‡Œå¾—ç®—æ³•è§£åŒä½™æ–¹ç¨‹çš„èƒ½åŠ›ã€‚  
2. **P2613 [NOIP2015 æé«˜ç»„] æœ‰ç†æ•°å–ä½™**ï¼š  
   - æ¨èç†ç”±ï¼šè€ƒå¯Ÿæ•°è®ºä¸­çš„â€œæ¨¡è¿ç®—â€å’Œâ€œé€†å…ƒâ€ï¼Œæ˜¯æœ¬é¢˜â€œåŒä½™è®¡ç®—â€çš„å»¶ä¼¸ã€‚  
3. **P3868 [TJOI2009] çŒœæ•°å­—**ï¼š  
   - æ¨èç†ç”±ï¼šè€ƒå¯Ÿâ€œä¸­å›½å‰©ä½™å®šç†â€ï¼ˆçº¿æ€§åŒä½™æ–¹ç¨‹ç»„ï¼‰ï¼Œæ˜¯æœ¬é¢˜â€œçº¿æ€§åŒä½™ä¸ç­‰å¼â€çš„è¿›é˜¶ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªSchi2oidï¼‰**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆå¡åœ¨çº¿æ€§åŒä½™ä¸ç­‰å¼çš„æ±‚è§£ä¸Šï¼Œåæ¥æƒ³èµ·æ¬§å‡ é‡Œå¾—ç®—æ³•å¯ä»¥å¤„ç†è¿™ç±»é—®é¢˜ï¼Œæ‰æ‰¾åˆ°çªç ´å£ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°â€˜æ•°è®ºå·¥å…·â€™çš„é‡è¦æ€§â€”â€”å¾ˆå¤šçœ‹ä¼¼å¤æ‚çš„é—®é¢˜ï¼Œå…¶å®éƒ½æœ‰å¯¹åº”çš„æ•°è®ºè§£æ³•ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ï¼é‡åˆ°â€œå¤§æ•°å€¼â€çš„é—®é¢˜ï¼ˆæ¯”å¦‚k1å¯èƒ½åˆ°1e12ï¼‰ï¼Œç›´æ¥æšä¸¾è‚¯å®šè¶…æ—¶ï¼Œå¿…é¡»ç”¨â€œæ•°è®ºå·¥å…·â€ï¼ˆå¦‚æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰ç¼©å°é—®é¢˜è§„æ¨¡ã€‚åŠ¨æ‰‹æ¨å¯¼æ•°è®ºå…¬å¼ï¼Œæ¯”â€œæš´åŠ›æšä¸¾â€æ›´é«˜æ•ˆã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äº[ARC166E]çš„åˆ†æå°±åˆ°è¿™é‡Œå•¦ï¼è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯â€œæ•°å­¦è½¬åŒ–â€å’Œâ€œäºŒåˆ†æŸ¥æ‰¾â€ï¼Œå¸Œæœ›å¤§å®¶èƒ½æŒæ¡â€œç”¨æ•°è®ºå·¥å…·ç ´è§£é—®é¢˜â€çš„æŠ€å·§ã€‚è®°ä½ï¼š**æ•°å­¦æ˜¯ç¼–ç¨‹çš„â€œéšå½¢ç¿…è†€â€ï¼ŒæŒæ¡æ•°è®ºèƒ½è§£å†³å¾ˆå¤šâ€œçœ‹ä¼¼ä¸å¯èƒ½â€çš„é—®é¢˜**ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„æŒ‘æˆ˜~ ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š97.26ç§’
# é¢˜ç›®ä¿¡æ¯

# [AGC005C] Tree Restoring

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/agc005/tasks/agc005_c

é’æœ¨å›ã¯æ•°åˆ—ã¨æœ¨ãŒå¤§å¥½ãã§ã™ã€‚

é’æœ¨å›ã¯ã‚ã‚‹æ—¥é«˜æ©‹ãã‚“ã‹ã‚‰é•·ã• $ N $ ã®æ•°åˆ— $ a_1,\ a_2,\ ...,\ a_N $ ã‚’è²°ã„ã¾ã—ãŸã€‚ãã—ã¦ã“ã®æ•°åˆ—ã‚’è¦‹ã¦ã€æœ¨ã‚’ä½œã‚ŠãŸããªã‚Šã¾ã—ãŸã€‚

é’æœ¨å›ãŒä½œã‚ŠãŸã„ã®ã¯ã€é ‚ç‚¹æ•°ãŒ $ N $ ã§ã€å…¨ã¦ã® $ i\ =\ 1,2,...,N $ ã«ã¤ã„ã¦é ‚ç‚¹ $ i $ ã¨æœ€ã‚‚é ã„é ‚ç‚¹ã®è·é›¢ãŒ $ a_i $ ã¨ãªã‚‹æœ¨ã§ã™ã€‚ãªãŠã€è¾ºã®é•·ã•ã¯å…¨ã¦ $ 1 $ ã¨ã—ã¾ã™ã€‚

ã“ã‚Œã‚’æº€ãŸã™æœ¨ãŒå­˜åœ¨ã™ã‚‹ã‹åˆ¤å®šã—ã¦ãã ã•ã„ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 2\ â‰¦\ N\ â‰¦\ 100 $
- $ 1\ â‰¦\ a_i\ â‰¦\ N-1 $

### Sample Explanation 1

!\[\](https://atcoder.jp/img/agc005/cda0380bb5cd1b9502cfceaf2526d91e.png) ä¸Šå›³ã¯æ¡ä»¶ã‚’è¦‹ãŸã™æœ¨ã®ä¸€ä¾‹ã§ã™ã€‚èµ¤ã„çŸ¢å°ã¯æœ€ã‚‚é ã„é ‚ç‚¹ã¸ã®çµŒè·¯ã‚’è¡¨ã—ã¾ã™ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5

3 2 2 3 3```

### è¾“å‡º

```
Possible```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3

1 1 2```

### è¾“å‡º

```
Impossible```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10

1 2 2 2 2 2 2 2 2 2```

### è¾“å‡º

```
Possible```

## æ ·ä¾‹ #4

### è¾“å…¥

```
10

1 1 2 2 2 2 2 2 2 2```

### è¾“å‡º

```
Impossible```

## æ ·ä¾‹ #5

### è¾“å…¥

```
6

1 1 1 1 1 5```

### è¾“å‡º

```
Impossible```

## æ ·ä¾‹ #6

### è¾“å…¥

```
5

4 3 2 3 4```

### è¾“å‡º

```
Possible```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[AGC005C] Tree Restoring æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆæ ‘çš„ç›´å¾„æ€§è´¨åº”ç”¨ï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œTree Restoringâ€é—®é¢˜çš„å…³é”®ï¼Œåœ¨äºç†è§£**æ ‘çš„ç›´å¾„**ï¼ˆæ ‘ä¸­æœ€é•¿è·¯å¾„ï¼‰çš„æ€§è´¨â€”â€”**ä»»æ„ç‚¹çš„æœ€è¿œç‚¹å¿…æ˜¯ç›´å¾„çš„ç«¯ç‚¹**ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ ‘æƒ³è±¡æˆä¸€æ¡â€œä¸»é“¾â€ï¼ˆç›´å¾„ï¼‰ï¼Œæ‰€æœ‰å…¶ä»–ç‚¹éƒ½æŒ‚åœ¨è¿™æ¡é“¾ä¸Šã€‚ä¸»é“¾çš„é•¿åº¦æ˜¯åºåˆ—ä¸­çš„æœ€å¤§å€¼`L = max(a_i)`ï¼Œè€Œä¸»é“¾ä¸Šçš„ç‚¹çš„`a_i`å€¼ä¼šå‘ˆç°**å¯¹ç§°åˆ†å¸ƒ**ï¼ˆæ¯”å¦‚ä¸»é“¾é•¿åº¦ä¸º3æ—¶ï¼Œä¸¤ç«¯ç‚¹`a_i=3`ï¼Œä¸­é—´ä¸¤ä¸ªç‚¹`a_i=2`ï¼‰ã€‚  

**æ ¸å¿ƒæ€è·¯**ï¼š  
1. ç¡®å®šä¸»é“¾é•¿åº¦`L`ï¼ˆå³`a_i`çš„æœ€å¤§å€¼ï¼‰ã€‚  
2. éªŒè¯ä¸»é“¾çš„**å¯¹ç§°ç»“æ„**ï¼š  
   - è‹¥`L`ä¸ºå¥‡æ•°ï¼Œä¸»é“¾ä¸­é—´ç‚¹çš„`a_i`å€¼ä¸º`(L+1)/2`ï¼Œä¸”æ°å¥½æœ‰2ä¸ªè¿™æ ·çš„ç‚¹ï¼ˆæ¯”å¦‚`L=3`æ—¶ï¼Œä¸­é—´ç‚¹`a_i=2`ï¼Œæ•°é‡ä¸º2ï¼‰ã€‚  
   - è‹¥`L`ä¸ºå¶æ•°ï¼Œä¸»é“¾ä¸­é—´ç‚¹çš„`a_i`å€¼ä¸º`L/2`ï¼Œä¸”æ°å¥½æœ‰1ä¸ªè¿™æ ·çš„ç‚¹ï¼ˆæ¯”å¦‚`L=2`æ—¶ï¼Œä¸­é—´ç‚¹`a_i=1`ï¼Œæ•°é‡ä¸º1ï¼‰ã€‚  
3. éªŒè¯æ‰€æœ‰ç‚¹çš„`a_i`å€¼**ä¸å°äºä¸»é“¾ä¸­é—´ç‚¹çš„`a_i`å€¼**ï¼ˆå¦åˆ™æ— æ³•æŒ‚åœ¨ä¸»é“¾ä¸Šï¼‰ï¼Œä¸”ä¸»é“¾ä¸Šéä¸­é—´ç‚¹çš„`a_i`å€¼æ•°é‡è‡³å°‘ä¸º2ï¼ˆå¯¹ç§°è¦æ±‚ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å°†ç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºä¸»é“¾çš„æ„é€ è¿‡ç¨‹ï¼š  
- ç”¨**çº¢è‰²åƒç´ å—**è¡¨ç¤ºä¸»é“¾ç«¯ç‚¹ï¼ˆ`a_i=L`ï¼‰ï¼Œ**é»„è‰²åƒç´ å—**è¡¨ç¤ºä¸­é—´ç‚¹ï¼ˆ`a_i=(L+1)/2`æˆ–`L/2`ï¼‰ï¼Œ**è“è‰²åƒç´ å—**è¡¨ç¤ºå…¶ä»–ç‚¹ã€‚  
- åŠ¨ç”»å°†é€æ­¥ä»ä¸¤ç«¯å‘ä¸­é—´å¡«å……ä¸»é“¾ï¼Œæ¯å¡«å……ä¸€ä¸ªç‚¹ï¼Œé«˜äº®æ˜¾ç¤ºå…¶`a_i`å€¼ï¼Œå¹¶æ£€æŸ¥æ•°é‡æ˜¯å¦ç¬¦åˆå¯¹ç§°è¦æ±‚ï¼ˆæ¯”å¦‚`a_i=3`éœ€è¦2ä¸ªï¼Œ`a_i=2`éœ€è¦2ä¸ªï¼‰ã€‚  
- è‹¥æŸä¸€æ­¥æ•°é‡ä¸è¶³ï¼Œå°†è§¦å‘**é”™è¯¯éŸ³æ•ˆ**ï¼ˆçŸ­ä¿ƒçš„â€œå®â€å£°ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œImpossibleâ€æç¤ºã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šMiRacissï¼Œèµ5ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**æå…¶æ¸…æ™°**ï¼Œç›´æ¥æŠ“ä½äº†æ ‘çš„ç›´å¾„å¯¹ç§°æ€§è´¨ã€‚ä½œè€…ç”¨æ¡¶`f`ç»Ÿè®¡æ¯ä¸ª`a_i`çš„æ•°é‡ï¼Œå…ˆåˆ¤æ–­æœ€å°å€¼æ˜¯å¦æ»¡è¶³`min(a_i) â‰¥ (L+1)/2`ï¼ˆç¡®ä¿æ‰€æœ‰ç‚¹èƒ½æŒ‚åœ¨ä¸»é“¾ä¸Šï¼‰ï¼Œå†æ ¹æ®`L`çš„å¥‡å¶æ€§éªŒè¯ä¸­é—´ç‚¹æ•°é‡ï¼Œæœ€åæ£€æŸ¥ä¸»é“¾ä¸Šéä¸­é—´ç‚¹çš„æ•°é‡æ˜¯å¦â‰¥2ã€‚ä»£ç ç»“æ„å·¥æ•´ï¼Œå˜é‡å‘½åï¼ˆå¦‚`Max`è¡¨ç¤ºç›´å¾„é•¿åº¦ï¼Œ`Min`è¡¨ç¤ºæœ€å°å€¼ï¼‰æ¸…æ™°æ˜“æ‡‚ï¼Œè¾¹ç•Œæ¡ä»¶å¤„ç†ä¸¥è°¨ï¼ˆæ¯”å¦‚`L`ä¸ºå¥‡æ•°æ—¶ä¸­é—´ç‚¹æ•°é‡å¿…é¡»ä¸º2ï¼‰ã€‚ä»å®è·µè§’åº¦çœ‹ï¼Œè¿™ä»½ä»£ç å¯ä»¥ç›´æ¥ç”¨äºç«èµ›ï¼Œæ˜¯ç†è§£æœ¬é¢˜çš„â€œæ ‡æ†è§£æ³•â€ã€‚  

### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šHasinonï¼Œèµ3ï¼‰  
* **ç‚¹è¯„**ï¼š  
  ä½œè€…çš„æ€è·¯ä¸MiRacissä¸€è‡´ï¼Œä½†ç”¨â€œæ„é€ ç›´å¾„å¹¶å‡å»æ‰€éœ€ç‚¹â€çš„æ–¹å¼éªŒè¯æ¡ä»¶ï¼Œæ›´ç›´è§‚ã€‚æ¯”å¦‚ï¼Œå…ˆå‡å»ä¸»é“¾ä¸¤ç«¯ç‚¹çš„æ•°é‡ï¼ˆæ¯ä¸ª`a_i`ä»`mid`åˆ°`L`å‡2ï¼‰ï¼Œå†å¤„ç†ä¸­é—´ç‚¹ï¼ˆ`L`ä¸ºå¶æ•°æ—¶å‡1ï¼‰ï¼Œæœ€åæ£€æŸ¥æ˜¯å¦æœ‰å‰©ä½™ç‚¹çš„`a_i`å°äºä¸­é—´ç‚¹å€¼ã€‚è¿™ç§â€œå‡æ³•æ€ç»´â€æœ‰åŠ©äºç†è§£ä¸»é“¾çš„æ„é€ è¿‡ç¨‹ï¼Œä»£ç ä¸­çš„`vis`æ•°ç»„ï¼ˆç»Ÿè®¡å‰©ä½™ç‚¹æ•°é‡ï¼‰è®¾è®¡å·§å¦™ï¼Œå€¼å¾—å­¦ä¹ ã€‚  

### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼šCYJianï¼Œèµ2ï¼‰  
* **ç‚¹è¯„**ï¼š  
  ä½œè€…çš„ä»£ç **æå…¶ç®€æ´**ï¼Œç”¨`c`æ•°ç»„ç»Ÿè®¡`a_i`æ•°é‡ï¼Œå…ˆåˆ¤æ–­ä¸»é“¾ä¸Šéä¸­é—´ç‚¹çš„æ•°é‡æ˜¯å¦â‰¥2ï¼ˆ`for(int i = mx; i > mi; --i) if(c[i] < 2) ERROR`ï¼‰ï¼Œå†éªŒè¯ä¸­é—´ç‚¹æ•°é‡ï¼ˆ`c[mi] != 1 + (mx & 1)`ï¼‰ã€‚ä»£ç ä¸­çš„`ERROR`å®ï¼ˆç›´æ¥è¾“å‡ºâ€œImpossibleâ€å¹¶è¿”å›ï¼‰ç®€åŒ–äº†é‡å¤åˆ¤æ–­ï¼Œæå‡äº†å¯è¯»æ€§ã€‚è¿™ç§â€œæç®€é£æ ¼â€é€‚åˆç«èµ›ä¸­çš„å¿«é€Ÿç¼–ç ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šç¡®å®šæ ‘çš„ç›´å¾„é•¿åº¦åŠä¸­é—´ç‚¹çš„`a_i`å€¼**  
* **åˆ†æ**ï¼š  
  æ ‘çš„ç›´å¾„é•¿åº¦`L`æ˜¯`a_i`çš„æœ€å¤§å€¼ï¼ˆå› ä¸ºç›´å¾„ç«¯ç‚¹çš„æœ€è¿œç‚¹æ˜¯å¦ä¸€ä¸ªç«¯ç‚¹ï¼Œæ‰€ä»¥`a_i=L`ï¼‰ã€‚ä¸­é—´ç‚¹çš„`a_i`å€¼å–å†³äº`L`çš„å¥‡å¶æ€§ï¼š  
  - `L`ä¸ºå¥‡æ•°æ—¶ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼ä¸º`(L+1)/2`ï¼ˆæ¯”å¦‚`L=3`ï¼Œä¸­é—´ç‚¹`a_i=2`ï¼‰ï¼›  
  - `L`ä¸ºå¶æ•°æ—¶ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼ä¸º`L/2`ï¼ˆæ¯”å¦‚`L=2`ï¼Œä¸­é—´ç‚¹`a_i=1`ï¼‰ã€‚  
  è‹¥æœ€å°å€¼`min(a_i) < (L+1)/2`ï¼Œåˆ™æ— æ³•æ„é€ ï¼ˆå› ä¸ºè¿™äº›ç‚¹æ— æ³•æŒ‚åœ¨ä¸»é“¾ä¸Šï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç›´å¾„é•¿åº¦æ˜¯è§£å†³æœ¬é¢˜çš„â€œçªç ´å£â€ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼æ˜¯â€œä¸‹é™â€ã€‚  

### 2. **å…³é”®ç‚¹2ï¼šéªŒè¯ä¸»é“¾çš„å¯¹ç§°ç»“æ„**  
* **åˆ†æ**ï¼š  
  ä¸»é“¾ä¸Šçš„ç‚¹å‘ˆç°å¯¹ç§°åˆ†å¸ƒï¼Œå› æ­¤ï¼š  
  - `L`ä¸ºå¥‡æ•°æ—¶ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼æ•°é‡å¿…é¡»ä¸º2ï¼ˆæ¯”å¦‚`L=3`ï¼Œ`a_i=2`çš„æ•°é‡ä¸º2ï¼‰ï¼›  
  - `L`ä¸ºå¶æ•°æ—¶ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼æ•°é‡å¿…é¡»ä¸º1ï¼ˆæ¯”å¦‚`L=2`ï¼Œ`a_i=1`çš„æ•°é‡ä¸º1ï¼‰ï¼›  
  - ä¸»é“¾ä¸Šéä¸­é—´ç‚¹çš„`a_i`å€¼æ•°é‡å¿…é¡»â‰¥2ï¼ˆæ¯”å¦‚`L=3`ï¼Œ`a_i=3`çš„æ•°é‡ä¸º2ï¼‰ã€‚  
  è‹¥ä¸æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œæ— æ³•æ„é€ å¯¹ç§°çš„ä¸»é“¾ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¯¹ç§°ç»“æ„æ˜¯æ ‘çš„ç›´å¾„çš„æ ¸å¿ƒæ€§è´¨ï¼Œå¿…é¡»ä¸¥æ ¼éªŒè¯ã€‚  

### 3. **å…³é”®ç‚¹3ï¼šç¡®ä¿æ‰€æœ‰ç‚¹çš„`a_i`å€¼ä¸å°äºä¸­é—´ç‚¹çš„`a_i`å€¼**  
* **åˆ†æ**ï¼š  
  æ‰€æœ‰ç‚¹éƒ½æŒ‚åœ¨ä¸»é“¾ä¸Šï¼Œå› æ­¤å®ƒä»¬çš„`a_i`å€¼ç­‰äºâ€œåˆ°ä¸»é“¾ç«¯ç‚¹çš„æœ€è¿œè·ç¦»â€ã€‚å¯¹äºæŒ‚åœ¨ä¸»é“¾ä¸­é—´ç‚¹çš„ç‚¹ï¼Œå…¶`a_i`å€¼ç­‰äºä¸­é—´ç‚¹çš„`a_i`å€¼ï¼ˆæ¯”å¦‚ä¸­é—´ç‚¹`a_i=2`ï¼ŒæŒ‚åœ¨å®ƒä¸Šé¢çš„ç‚¹`a_i=2+1=3`ï¼Ÿä¸å¯¹ï¼Œç­‰ä¸€ä¸‹ï¼ŒæŒ‚åœ¨ä¸»é“¾ä¸Šçš„ç‚¹çš„`a_i`å€¼åº”è¯¥ç­‰äºâ€œä¸»é“¾ç«¯ç‚¹åˆ°è¯¥ç‚¹çš„è·ç¦»â€ã€‚æ¯”å¦‚ä¸»é“¾ç«¯ç‚¹`A`ï¼ˆ`a_i=3`ï¼‰ï¼Œä¸­é—´ç‚¹`B`ï¼ˆ`a_i=2`ï¼‰ï¼ŒæŒ‚åœ¨`B`ä¸Šçš„ç‚¹`C`ï¼Œå…¶æœ€è¿œè·ç¦»æ˜¯åˆ°`A`çš„è·ç¦»ï¼ˆ`Båˆ°A`æ˜¯2ï¼Œ`Cåˆ°B`æ˜¯1ï¼Œæ‰€ä»¥`Cåˆ°A`æ˜¯3ï¼‰ï¼Œå› æ­¤`C`çš„`a_i=3`ã€‚å“¦ï¼ŒåŸæ¥å¦‚æ­¤ï¼ŒæŒ‚åœ¨ä¸»é“¾ä¸Šçš„ç‚¹çš„`a_i`å€¼ç­‰äºä¸»é“¾ç«¯ç‚¹çš„`a_i`å€¼ï¼ˆ`L`ï¼‰ï¼Œæˆ–è€…ç­‰äºä¸»é“¾ä¸ŠæŸç‚¹çš„`a_i`å€¼åŠ 1ï¼Ÿä¸å¯¹ï¼Œå¯èƒ½æˆ‘ä¹‹å‰ç†è§£é”™äº†ã€‚ç­‰ä¸€ä¸‹ï¼Œçœ‹æ ·ä¾‹1ï¼Œè¾“å…¥æ˜¯5ä¸ªé¡¶ç‚¹ï¼Œ`a`æ•°ç»„æ˜¯3,2,2,3,3ã€‚ä¸»é“¾æ˜¯3-2-2-3ï¼ˆå‡è®¾ï¼‰ï¼ŒæŒ‚åœ¨ä¸­é—´ç‚¹çš„ç‚¹çš„`a_i`å€¼æ˜¯3ï¼Œå› ä¸ºå®ƒçš„æœ€è¿œç‚¹æ˜¯ä¸»é“¾ç«¯ç‚¹ã€‚å“¦ï¼Œå¯¹ï¼Œæ ·ä¾‹1ä¸­çš„ç¬¬äº”ä¸ªç‚¹`a_i=3`ï¼Œå°±æ˜¯æŒ‚åœ¨ä¸»é“¾ä¸­é—´ç‚¹çš„ç‚¹ï¼Œå®ƒçš„æœ€è¿œç‚¹æ˜¯ä¸»é“¾ç«¯ç‚¹ï¼Œæ‰€ä»¥`a_i=3`ã€‚å› æ­¤ï¼Œæ‰€æœ‰ç‚¹çš„`a_i`å€¼å¿…é¡»â‰¥ä¸­é—´ç‚¹çš„`a_i`å€¼ï¼ˆå› ä¸ºä¸­é—´ç‚¹çš„`a_i`å€¼æ˜¯ä¸»é“¾ä¸Šæœ€å°çš„ï¼‰ï¼Œå¦åˆ™æ— æ³•æŒ‚åœ¨ä¸»é“¾ä¸Šã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ‰€æœ‰ç‚¹çš„`a_i`å€¼å¿…é¡»â‰¥ä¸­é—´ç‚¹çš„`a_i`å€¼ï¼Œå¦åˆ™æ— æ³•æ„é€ ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æ¡¶ç»Ÿè®¡**ï¼šç”¨æ•°ç»„ç»Ÿè®¡æ¯ä¸ª`a_i`çš„æ•°é‡ï¼Œå¿«é€ŸéªŒè¯å¯¹ç§°æ¡ä»¶ã€‚  
- **å¥‡å¶åˆ†ç±»è®¨è®º**ï¼šæ ¹æ®ç›´å¾„é•¿åº¦çš„å¥‡å¶æ€§ï¼Œåˆ†åˆ«å¤„ç†ä¸­é—´ç‚¹æ•°é‡ã€‚  
- **è¾¹ç•Œæ¡ä»¶æ£€æŸ¥**ï¼šå¿…é¡»éªŒè¯æœ€å°å€¼æ˜¯å¦â‰¥ä¸­é—´ç‚¹çš„`a_i`å€¼ï¼Œå¦åˆ™ç›´æ¥è¿”å›â€œImpossibleâ€ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†MiRacissã€Hasinonç­‰ä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œæ˜¯ä¸€ä¸ªæ¸…æ™°ä¸”å®Œæ•´çš„æ ¸å¿ƒå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  using namespace std;

  int main() {
      int n;
      cin >> n;
      vector<int> a(n);
      vector<int> cnt(105, 0); // æ¡¶ï¼Œç»Ÿè®¡æ¯ä¸ªa_içš„æ•°é‡
      int Max = 0, Min = 105;
      for (int i = 0; i < n; ++i) {
          cin >> a[i];
          cnt[a[i]]++;
          Max = max(Max, a[i]);
          Min = min(Min, a[i]);
      }

      // æ¡ä»¶1ï¼šæœ€å°å€¼å¿…é¡»â‰¥(Max+1)/2
      int mid = (Max + 1) / 2;
      if (Min < mid) {
          cout << "Impossible" << endl;
          return 0;
      }

      // æ¡ä»¶2ï¼šéªŒè¯ä¸­é—´ç‚¹æ•°é‡
      if (Max % 2 == 1) { // å¥‡æ•°ï¼Œä¸­é—´ç‚¹æ•°é‡å¿…é¡»ä¸º2
          if (cnt[mid] != 2) {
              cout << "Impossible" << endl;
              return 0;
          }
      } else { // å¶æ•°ï¼Œä¸­é—´ç‚¹æ•°é‡å¿…é¡»ä¸º1
          if (cnt[Max / 2] != 1) {
              cout << "Impossible" << endl;
              return 0;
          }
      }

      // æ¡ä»¶3ï¼šéªŒè¯ä¸»é“¾ä¸Šéä¸­é—´ç‚¹çš„æ•°é‡â‰¥2
      for (int i = mid + 1; i <= Max; ++i) {
          if (cnt[i] < 2) {
              cout << "Impossible" << endl;
              return 0;
          }
      }

      cout << "Possible" << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç é¦–å…ˆè¯»å–è¾“å…¥å¹¶ç»Ÿè®¡æ¯ä¸ª`a_i`çš„æ•°é‡ï¼ˆç”¨`cnt`æ•°ç»„ï¼‰ï¼Œç„¶åè®¡ç®—æœ€å¤§å€¼`Max`å’Œæœ€å°å€¼`Min`ã€‚æ¥ä¸‹æ¥éªŒè¯ä¸‰ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š  
  1. æœ€å°å€¼`Min`æ˜¯å¦â‰¥ä¸­é—´ç‚¹çš„`a_i`å€¼ï¼ˆ`mid = (Max+1)/2`ï¼‰ï¼›  
  2. æ ¹æ®`Max`çš„å¥‡å¶æ€§ï¼ŒéªŒè¯ä¸­é—´ç‚¹æ•°é‡ï¼›  
  3. éªŒè¯ä¸»é“¾ä¸Šéä¸­é—´ç‚¹çš„æ•°é‡â‰¥2ã€‚è‹¥æ‰€æœ‰æ¡ä»¶æ»¡è¶³ï¼Œè¾“å‡ºâ€œPossibleâ€ï¼Œå¦åˆ™è¾“å‡ºâ€œImpossibleâ€ã€‚  

### é¢˜è§£ä¸€ï¼ˆMiRacissï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨æ¡¶ç»Ÿè®¡`a_i`æ•°é‡ï¼Œç›´æ¥éªŒè¯å¯¹ç§°æ¡ä»¶ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int Max = 0, Min = 105;
  vector<int> cnt(105, 0);
  for (int i = 1; i <= n; ++i) {
      int x;
      cin >> x;
      cnt[x]++;
      Max = max(Max, x);
      Min = min(Min, x);
  }

  if (Min < (Max + 1) / 2) {
      cout << "Impossible" << endl;
      return 0;
  }

  if (Max % 2 == 1) {
      if (cnt[(Max + 1) / 2] != 2) {
          cout << "Impossible" << endl;
          return 0;
      }
  } else {
      if (cnt[Max / 2] != 1) {
          cout << "Impossible" << endl;
          return 0;
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯é¢˜è§£çš„æ ¸å¿ƒé€»è¾‘ï¼Œå…ˆç»Ÿè®¡`a_i`æ•°é‡ï¼Œå†éªŒè¯æœ€å°å€¼å’Œä¸­é—´ç‚¹æ•°é‡ã€‚æ¯”å¦‚ï¼Œå½“`Max=3`ï¼ˆå¥‡æ•°ï¼‰æ—¶ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼æ˜¯`(3+1)/2=2`ï¼Œæ•°é‡å¿…é¡»ä¸º2ï¼›å½“`Max=2`ï¼ˆå¶æ•°ï¼‰æ—¶ï¼Œä¸­é—´ç‚¹çš„`a_i`å€¼æ˜¯`2/2=1`ï¼Œæ•°é‡å¿…é¡»ä¸º1ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¡¶ç»Ÿè®¡æ˜¯å¤„ç†è®¡æ•°é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œèƒ½å¿«é€ŸéªŒè¯æ•°é‡æ¡ä»¶ã€‚  

### é¢˜è§£äºŒï¼ˆHasinonï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨â€œå‡æ³•æ€ç»´â€æ„é€ ä¸»é“¾ï¼Œç›´è§‚éªŒè¯å‰©ä½™ç‚¹æ•°é‡ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  vector<int> vis(105, 0);
  int mx = 0;
  for (int i = 1; i <= n; ++i) {
      int x = read();
      vis[x]++;
      mx = max(mx, x);
  }

  int mid = mx / 2 + 1;
  for (int i = mid; i <= mx; ++i) {
      vis[i] -= 2;
      if (vis[i] < 0) {
          cout << "Impossible" << endl;
          return 0;
      }
  }

  if (mx % 2 == 0) {
      vis[mid - 1]--;
      if (vis[mid - 1] < 0) {
          cout << "Impossible" << endl;
          return 0;
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç å…ˆå‡å»ä¸»é“¾ä¸¤ç«¯ç‚¹çš„æ•°é‡ï¼ˆæ¯ä¸ª`a_i`ä»`mid`åˆ°`mx`å‡2ï¼‰ï¼Œå†å¤„ç†ä¸­é—´ç‚¹ï¼ˆ`mx`ä¸ºå¶æ•°æ—¶å‡1ï¼‰ã€‚è‹¥æŸä¸€æ­¥`vis[i] < 0`ï¼Œè¯´æ˜æ— æ³•æ„é€ ä¸»é“¾ã€‚è¿™ç§â€œå‡æ³•æ€ç»´â€æœ‰åŠ©äºç†è§£ä¸»é“¾çš„æ„é€ è¿‡ç¨‹ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‡æ³•æ€ç»´èƒ½ç›´è§‚å±•ç¤ºâ€œæ‰€éœ€ç‚¹â€ä¸â€œç°æœ‰ç‚¹â€çš„å…³ç³»ï¼Œé€‚åˆéªŒè¯æ„é€ ç±»é—®é¢˜ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š**åƒç´ ä¸»é“¾æ„é€ æ¸¸æˆ**  
ï¼ˆä»¿ç…§FCçº¢ç™½æœºé£æ ¼ï¼Œç”¨8ä½åƒç´ å—å±•ç¤ºä¸»é“¾çš„æ„é€ è¿‡ç¨‹ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹ï¼š  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤º**ä¸»é“¾æ„é€ åŒº**ï¼ˆç”¨ç½‘æ ¼è¡¨ç¤ºï¼Œæ¯ä¸ªæ ¼å­æ˜¯ä¸€ä¸ªåƒç´ å—ï¼‰ï¼Œå³ä¾§æ˜¾ç¤º**æ§åˆ¶é¢æ¿**ï¼ˆåŒ…å«â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»å¿«æ—‹å¾‹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **æ•°æ®è¾“å…¥**ï¼š  
   - å­¦ä¹ è€…è¾“å…¥`n`å’Œ`a`æ•°ç»„ï¼ˆæ¯”å¦‚æ ·ä¾‹1çš„`5`å’Œ`3 2 2 3 3`ï¼‰ï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤ºè¾“å…¥çš„`a`æ•°ç»„ï¼ˆç”¨åƒç´ æ•°å­—è¡¨ç¤ºï¼‰ã€‚  

3. **ä¸»é“¾æ„é€ è¿‡ç¨‹**ï¼š  
   - **æ­¥éª¤1**ï¼šæ‰¾å‡ºæœ€å¤§å€¼`Max=3`ï¼ˆç”¨çº¢è‰²åƒç´ å—æ ‡è®°ï¼‰ï¼Œä¸­é—´ç‚¹`mid=2`ï¼ˆç”¨é»„è‰²åƒç´ å—æ ‡è®°ï¼‰ã€‚  
   - **æ­¥éª¤2**ï¼šéªŒè¯æœ€å°å€¼`Min=2`æ˜¯å¦â‰¥`mid=2`ï¼ˆæ»¡è¶³ï¼Œæ˜¾ç¤ºâ€œâˆšâ€å›¾æ ‡ï¼‰ã€‚  
   - **æ­¥éª¤3**ï¼šæ„é€ ä¸»é“¾ä¸¤ç«¯ç‚¹ï¼ˆ`a_i=3`ï¼‰ï¼šåœ¨ä¸»é“¾æ„é€ åŒºçš„å·¦å³ä¸¤ç«¯å„æ”¾ç½®ä¸€ä¸ªçº¢è‰²åƒç´ å—ï¼ŒåŒæ—¶`cnt[3]`å‡2ï¼ˆæ˜¾ç¤º`cnt[3]=1`â†’`0`ï¼‰ã€‚  
   - **æ­¥éª¤4**ï¼šæ„é€ ä¸»é“¾ä¸­é—´ç‚¹ï¼ˆ`a_i=2`ï¼‰ï¼šåœ¨ä¸»é“¾æ„é€ åŒºçš„ä¸­é—´æ”¾ç½®ä¸¤ä¸ªé»„è‰²åƒç´ å—ï¼ˆå› ä¸º`Max=3`æ˜¯å¥‡æ•°ï¼‰ï¼ŒåŒæ—¶`cnt[2]`å‡2ï¼ˆæ˜¾ç¤º`cnt[2]=2`â†’`0`ï¼‰ã€‚  
   - **æ­¥éª¤5**ï¼šéªŒè¯æ‰€æœ‰ç‚¹çš„`a_i`å€¼æ˜¯å¦â‰¥`mid=2`ï¼ˆæ»¡è¶³ï¼Œæ˜¾ç¤ºâ€œâˆšâ€å›¾æ ‡ï¼‰ã€‚  

4. **ç»“æœå±•ç¤º**ï¼š  
   - è‹¥æ‰€æœ‰æ¡ä»¶æ»¡è¶³ï¼Œæ’­æ”¾**èƒœåˆ©éŸ³æ•ˆ**ï¼ˆä¸Šæ‰¬çš„â€œå®â€å£°ï¼‰ï¼Œä¸»é“¾æ„é€ åŒºæ˜¾ç¤ºå®Œæ•´çš„ä¸»é“¾ï¼ˆçº¢è‰²â†’é»„è‰²â†’é»„è‰²â†’çº¢è‰²ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œPossibleâ€æç¤ºã€‚  
   - è‹¥æŸä¸€æ­¥æ¡ä»¶ä¸æ»¡è¶³ï¼ˆæ¯”å¦‚`cnt[2]=1`ï¼‰ï¼Œæ’­æ”¾**é”™è¯¯éŸ³æ•ˆ**ï¼ˆçŸ­ä¿ƒçš„â€œå®â€å£°ï¼‰ï¼Œä¸»é“¾æ„é€ åŒºé«˜äº®æ˜¾ç¤ºé”™è¯¯ç‚¹ï¼ˆæ¯”å¦‚é»„è‰²åƒç´ å—æ•°é‡ä¸è¶³ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œImpossibleâ€æç¤ºã€‚  

### äº¤äº’è®¾è®¡ï¼š  
- **å•æ­¥æ‰§è¡Œ**ï¼šå­¦ä¹ è€…ç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€æ­¥è§‚çœ‹ä¸»é“¾æ„é€ è¿‡ç¨‹ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šå­¦ä¹ è€…æ‹–åŠ¨é€Ÿåº¦æ»‘å—è°ƒæ•´æ’­æ”¾é€Ÿåº¦ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ‰§è¡Œã€‚  
- **é‡ç½®**ï¼šå­¦ä¹ è€…ç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œé‡æ–°è¾“å…¥æ•°æ®å¹¶å¼€å§‹æ¼”ç¤ºã€‚  

### è®¾è®¡æ€è·¯ï¼š  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œé™ä½å­¦ä¹ å‹åŠ›ã€‚  
- **éŸ³æ•ˆåé¦ˆ**ï¼šç”¨ä¸åŒéŸ³æ•ˆå¼ºåŒ–å…³é”®æ“ä½œï¼ˆå¦‚æ„é€ ç«¯ç‚¹ã€éªŒè¯æ¡ä»¶ï¼‰ï¼Œå¸®åŠ©å­¦ä¹ è€…è®°å¿†ã€‚  
- **å¯è§†åŒ–æ•°æ®**ï¼šå®æ—¶æ˜¾ç¤º`cnt`æ•°ç»„çš„å˜åŒ–ï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°æ•°é‡æ¡ä»¶çš„éªŒè¯è¿‡ç¨‹ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»ï¼š  
æ ‘çš„ç›´å¾„æ€§è´¨ä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
1. **æ ‘ç½‘çš„æ ¸**ï¼ˆP1099ï¼‰ï¼šå¯»æ‰¾æ ‘ä¸­ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—æ‰€æœ‰ç‚¹åˆ°è¯¥è·¯å¾„çš„æœ€è¿œè·ç¦»æœ€å°ï¼Œéœ€ç”¨åˆ°ç›´å¾„çš„ä¸­ç‚¹ã€‚  
2. **ä»“é¼ æ‰¾ sugar**ï¼ˆP3398ï¼‰ï¼šåˆ¤æ–­ä¸¤æ¡è·¯å¾„æ˜¯å¦ç›¸äº¤ï¼Œéœ€ç”¨åˆ°ç›´å¾„çš„ç«¯ç‚¹ã€‚  
3. **æ„é€ æ ‘**ï¼ˆå¦‚AGC005Cï¼‰ï¼šæ ¹æ®ç»™å®šæ¡ä»¶æ„é€ æ ‘ï¼Œéœ€ç”¨åˆ°ç›´å¾„çš„å¯¹ç§°æ€§è´¨ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)ï¼š  
1. **æ´›è°· P1099** - æ ‘ç½‘çš„æ ¸  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦æ‰¾åˆ°æ ‘çš„ç›´å¾„ä¸­ç‚¹ï¼Œæ˜¯æ ‘çš„ç›´å¾„æ€§è´¨çš„ç»å…¸åº”ç”¨ï¼Œèƒ½å¸®åŠ©ä½ å·©å›ºä¸­é—´ç‚¹çš„æ¦‚å¿µã€‚  
2. **æ´›è°· P3398** - ä»“é¼ æ‰¾ sugar  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦åˆ¤æ–­ä¸¤æ¡è·¯å¾„æ˜¯å¦ç›¸äº¤ï¼Œéœ€ç”¨åˆ°ç›´å¾„çš„ç«¯ç‚¹ï¼Œèƒ½å¸®åŠ©ä½ ç†è§£â€œæœ€è¿œç‚¹å¯¹â€çš„æ€§è´¨ã€‚  
3. **æ´›è°· P2146** - è½¯ä»¶åŒ…ç®¡ç†å™¨  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦å¤„ç†æ ‘çš„è·¯å¾„æŸ¥è¯¢ï¼Œè™½ç„¶ä¸ç›´å¾„æ— å…³ï¼Œä½†èƒ½å¸®åŠ©ä½ ç†Ÿæ‚‰æ ‘çš„ç»“æ„æ“ä½œã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
**å‚è€ƒç»éªŒ (æ¥è‡ª MiRaciss)**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ²¡æœ‰æƒ³åˆ°æ ‘çš„ç›´å¾„å¯¹ç§°æ€§è´¨ï¼Œåæ¥é€šè¿‡ç”»æ ·ä¾‹ï¼ˆæ¯”å¦‚æ ·ä¾‹1çš„ä¸»é“¾ï¼‰æ‰æ˜ç™½ä¸­é—´ç‚¹çš„æ•°é‡è¦æ±‚ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œç”»æ ·ä¾‹æ˜¯è§£å†³æ„é€ ç±»é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚æ„é€ ç±»é—®é¢˜å¾€å¾€éœ€è¦é€šè¿‡æ ·ä¾‹æŠ½è±¡å‡ºè§„å¾‹ï¼Œç”»æ ·ä¾‹èƒ½å¸®åŠ©ä½ ç›´è§‚ç†è§£é—®é¢˜çš„æ ¸å¿ƒæ€§è´¨ï¼ˆæ¯”å¦‚ä¸»é“¾çš„å¯¹ç§°ç»“æ„ï¼‰ã€‚åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å›°éš¾æ—¶ä¸å¦¨ç”»å‡ ä¸ªæ ·ä¾‹ï¼Œæˆ–è®¸èƒ½æ‰¾åˆ°çªç ´å£ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[AGC005C] Tree Restoringâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£æ ‘çš„ç›´å¾„æ€§è´¨ï¼ŒæŒæ¡æ„é€ ç±»é—®é¢˜çš„è§£é¢˜æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­å­¦ä¹ ã€å‹¤äºæ€è€ƒã€å‹‡äºå®è·µ**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š506.27ç§’
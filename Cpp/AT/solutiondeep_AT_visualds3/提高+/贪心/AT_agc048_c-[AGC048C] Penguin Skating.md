# é¢˜ç›®ä¿¡æ¯

# [AGC048C] Penguin Skating

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/agc048/tasks/agc048_c

$ L $ å€‹ã®ãƒã‚¹ãŒæ¨ªä¸€åˆ—ã«ä¸¦ã‚“ã§ã„ã¾ã™ï¼ ãƒã‚¹ã¯å·¦ã‹ã‚‰é †ã« $ 1,2,\ldots,L $ ã¨ç•ªå·ãŒæŒ¯ã‚‰ã‚Œã¦ã„ã¾ã™ï¼

$ N $ åŒ¹ã®ãƒšãƒ³ã‚®ãƒ³ãŒãƒã‚¹ç›®ã®ä¸Šã«ã„ã¾ã™ï¼ ãƒšãƒ³ã‚®ãƒ³ã¯å·¦ã‹ã‚‰é †ã« $ 1,2,\ldots,N $ ã¨ç•ªå·ãŒæŒ¯ã‚‰ã‚Œã¦ã„ã¾ã™ï¼ æœ€åˆï¼Œãƒšãƒ³ã‚®ãƒ³ $ i $ ã¯ãƒã‚¹ $ A_i $ ã®ä¸Šã«ã„ã¾ã™ï¼ ã“ã“ã§ï¼Œ$ 1\ \leq\ A_1\ <\ A_2\ <\ \ldots\ <\ A_N\ \leq\ L $ ã§ã™ï¼

ã‚ãªãŸã¯ï¼Œæ¬¡ã®æ“ä½œã‚’å¥½ããªå›æ•°è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼

- ãƒšãƒ³ã‚®ãƒ³ã‚’ $ 1 $ åŒ¹é¸ã³ï¼Œå·¦ã¾ãŸã¯å³ã¸å‘ã‹ã£ã¦æ»‘ã‚‰ã›ã‚‹ï¼ ãƒšãƒ³ã‚®ãƒ³ã¯ï¼Œç›®ã®å‰ã«ç©ºãƒã‚¹ãŒã‚ã‚‹é™ã‚Šæ»‘ã‚Šç¶šã‘ã‚‹ï¼ åˆ¥ã®ãƒšãƒ³ã‚®ãƒ³ã®ã„ã‚‹ãƒã‚¹ã®ç›´å‰ã®ãƒã‚¹ã«åˆ°é”ã™ã‚‹ï¼Œã‚‚ã—ãã¯ç›®ã®å‰ã«ãƒã‚¹ãŒå­˜åœ¨ã—ãªããªã£ãŸã‚‰ï¼Œãƒšãƒ³ã‚®ãƒ³ã¯åœæ­¢ã™ã‚‹ï¼

ä¾‹ãˆã°ï¼Œ$ N=3,L=10 $ ã§ï¼Œãƒšãƒ³ã‚®ãƒ³ã®ã„ã‚‹ãƒã‚¹ãŒ $ (2,3,7) $ ã§ã‚ã‚‹ã¨ã—ã¾ã™ï¼ ã“ã®ã¨ãï¼Œãƒšãƒ³ã‚®ãƒ³ $ 2 $ ã‚’å³ã«æ»‘ã‚‰ã›ã‚‹ã¨ï¼Œãƒšãƒ³ã‚®ãƒ³ $ 2 $ ã¯ãƒã‚¹ $ 6 $ ã¾ã§ç§»å‹•ã—ã¾ã™ï¼ ã¾ãŸï¼Œãƒšãƒ³ã‚®ãƒ³ $ 3 $ ã‚’å³ã«æ»‘ã‚‰ã›ã‚‹ã¨ï¼Œãƒšãƒ³ã‚®ãƒ³ $ 3 $ ã¯ãƒã‚¹ $ 10 $ ã¾ã§ç§»å‹•ã—ã¾ã™ï¼

ã‚ãªãŸã®ç›®æ¨™ã¯ï¼Œã™ã¹ã¦ã® $ i $ ã«ã¤ã„ã¦ï¼Œãƒšãƒ³ã‚®ãƒ³ $ i $ ãŒãƒã‚¹ $ B_i $ ã®ä¸Šã«ã„ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ï¼ ã“ã“ã§ï¼Œ$ 1\ \leq\ B_1\ <\ B_2\ <\ \ldots\ <\ B_N\ \leq\ L $ ã§ã™ï¼ ç›®æ¨™ãŒé”æˆå¯èƒ½ã‹åˆ¤å®šã—ï¼Œå¯èƒ½ãªã‚‰ã°å¿…è¦ãªæ“ä½œå›æ•°ã®æœ€å°å€¤ã‚’æ±‚ã‚ã¦ãã ã•ã„ï¼

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ N\ \leq\ L\ \leq\ 10^9 $
- $ 1\ \leq\ A_1\ <\ A_2\ <\ \ldots\ <\ A_N\ \leq\ L $
- $ 1\ \leq\ B_1\ <\ B_2\ <\ \ldots\ <\ B_N\ \leq\ L $
- å…¥åŠ›ã•ã‚Œã‚‹æ•°ã¯ã™ã¹ã¦æ•´æ•°ï¼

### Sample Explanation 1

æ¬¡ã®ã‚ˆã†ã«æ“ä½œã™ã‚Œã°ã‚ˆã„ã§ã™ï¼ - ãƒšãƒ³ã‚®ãƒ³ $ 1 $ ã‚’å·¦ã«æ»‘ã‚‰ã›ã‚‹ï¼ãƒšãƒ³ã‚®ãƒ³ã®ä½ç½®ã¯ï¼Œ$ (1,4,6,10) $ ã«ãªã‚‹ï¼ - ãƒšãƒ³ã‚®ãƒ³ $ 2 $ ã‚’å³ã«æ»‘ã‚‰ã›ã‚‹ï¼ãƒšãƒ³ã‚®ãƒ³ã®ä½ç½®ã¯ï¼Œ$ (1,5,6,10) $ ã«ãªã‚‹ï¼ - ãƒšãƒ³ã‚®ãƒ³ $ 4 $ ã‚’å³ã«æ»‘ã‚‰ã›ã‚‹ï¼ãƒšãƒ³ã‚®ãƒ³ã®ä½ç½®ã¯ï¼Œ$ (1,5,6,11) $ ã«ãªã‚‹ï¼

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 11

3 4 6 10

1 5 6 11```

### è¾“å‡º

```
3```

## æ ·ä¾‹ #2

### è¾“å…¥

```
1 3

1

2```

### è¾“å‡º

```
-1```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10 1000000000

65110170 68805223 123016442 275946481 661490312 760727752 764540566 929355340 930658577 947099792

1 2 123016442 661490311 929355337 930658574 999999997 999999998 999999999 1000000000```

### è¾“å‡º

```
13```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šAGC048C Penguin Skating æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š**è´ªå¿ƒç­–ç•¥ä¸è¿ç»­æ®µåˆ†è§£**

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æƒ³è±¡ä¸€ç¾¤ä¼é¹…åœ¨å†°é¢ä¸Šæ»‘è¡Œï¼Œæ¯æ¬¡æ»‘åŠ¨ä¼šä¸€ç›´å‰è¿›ç›´åˆ°æ’ä¸Šå…¶ä»–ä¼é¹…æˆ–è¾¹ç•Œã€‚è¿™å°±åƒç©æ¨ç®±å­æ¸¸æˆï¼Œä½†ç®±å­ä¼šè‡ªå·±æ»‘åˆ°ç»ˆç‚¹ï¼æ ¸å¿ƒåœ¨äºè¯†åˆ«ä¼é¹…çš„ç§»åŠ¨æ–¹å‘ï¼ˆå·¦ç§»/å³ç§»/ä¸åŠ¨ï¼‰ï¼Œå¹¶åˆ†è§£æˆç‹¬ç«‹å¤„ç†çš„è¿ç»­æ®µã€‚  
> - **é¢˜è§£æ€è·¯å¯¹æ¯”**ï¼š  
>   - *MurataHimekoè§£æ³•*ï¼šé€šè¿‡ `A_i` å’Œ `B_i` çš„å¤§å°å…³ç³»å°†ä¼é¹…åˆ†ç±»ï¼Œç”¨è¿ç»­æ®µåˆ†å‰²é—®é¢˜ï¼ŒåŠ¨æ€è®¡ç®—æ“ä½œæ¬¡æ•°ã€‚  
>   - *AC_loveè§£æ³•*ï¼šä»¥ä¸åŠ¨ä¼é¹…ä¸ºåˆ†éš”ç‚¹ï¼Œå°†åºåˆ—åˆ†æˆå·¦å³ç§»åŠ¨çš„å­æ®µï¼Œé€šè¿‡è´ªå¿ƒæ¨¡æ‹Ÿå½’ä½è¿‡ç¨‹ã€‚  
> - **æ ¸å¿ƒéš¾ç‚¹å¯è§†åŒ–**ï¼š  
>   - åƒç´ åŠ¨ç”»å°†å±•ç¤ºä¼é¹…é¢œè‰²åŒºåˆ†ç§»åŠ¨æ–¹å‘ï¼ˆè“è‰²å·¦ç§»/çº¢è‰²å³ç§»/ç»¿è‰²ä¸åŠ¨ï¼‰ï¼Œé«˜äº®è¿ç»­æ®µåˆ†å‰²ç‚¹ã€‚  
>   - æ»‘è¡Œè¿‡ç¨‹ä¼´éš"å—–"éŸ³æ•ˆï¼Œåœæ­¢æ—¶æ’­æ”¾"å®"å£°ï¼Œå½’ä½æ—¶è§¦å‘èƒœåˆ©éŸ³æ•ˆã€‚  
> - **å¤å¤æ¸¸æˆè®¾è®¡**ï¼š  
>   - é‡‡ç”¨8-bitåƒç´ é£ï¼Œæ§åˆ¶é¢æ¿æ”¯æŒå•æ­¥/è‡ªåŠ¨æ¨¡å¼ï¼ˆè°ƒé€Ÿæ»‘å—ï¼‰ã€‚  
>   - AIè‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼ä¼šåƒ"è´ªåƒè›‡AI"ä¸€æ ·å±•ç¤ºæœ€ä¼˜ç§»åŠ¨åºåˆ—ã€‚

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼šMurataHimekoï¼ˆè¯„åˆ†ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°åˆ’åˆ†ç§»åŠ¨ç±»å‹ï¼ˆ`c[i]=A_i<B_i`ï¼‰ï¼Œä¸¥è°¨å¤„ç†æ— è§£æƒ…å†µï¼ˆç›¸é‚»åå‘ç§»åŠ¨å†²çªï¼‰ã€‚ä»£ç é€šè¿‡`pre`æ•°ç»„åˆ†å‰²è¿ç»­æ®µï¼Œé€»è¾‘å®Œæ•´ä½†å˜é‡å‘½åç•¥éšæ™¦ï¼ˆå¦‚`vec`/`p`ï¼‰ã€‚äº®ç‚¹åœ¨äºç”¨`a[p[i]]-i`æ˜ å°„çŠ¶æ€ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œç©ºé—´ä¼˜åŒ–è‡³O(n)ã€‚è°ƒè¯•æ—¶éœ€æ³¨æ„æ•°ç»„è¾¹ç•Œï¼ˆ`a[0]=0, a[n+1]=L+1`ï¼‰ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šç§»åŠ¨æ–¹å‘å†²çªåˆ¤å®š**  
   * **åˆ†æ**ï¼šè‹¥ç›¸é‚»ä¼é¹…éœ€ç›¸åæ–¹å‘ç§»åŠ¨ï¼ˆå¦‚iéœ€å³ç§»è€Œi+1éœ€å·¦ç§»ï¼‰ï¼Œå¿…å› ç›¸äº’é˜»æŒ¡æ— è§£ã€‚é€šè¿‡æ¯”è¾ƒ`A_i`å’Œ`B_i`å…³ç³»å¯å¿«é€Ÿç­›æŸ¥ã€‚  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ–¹å‘å†²çªæ˜¯é¦–è¦æ— è§£ä¿¡å·ï¼

2. **éš¾ç‚¹ï¼šè¿ç»­æ®µåˆ†å‰²ç­–ç•¥**  
   * **åˆ†æ**ï¼šä¸åŠ¨ä¼é¹…ï¼ˆ`A_i=B_i`ï¼‰å°†åºåˆ—åˆ†å‰²ä¸ºçº¯å·¦ç§»/å³ç§»å­æ®µã€‚MurataHimekoç”¨`pre`æ•°ç»„æ ‡è®°åˆ†å‰²ç‚¹ï¼ŒAC_loveåˆ™æ˜¾å¼æ‰«æä¸åŠ¨ä½ç½®ã€‚  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¸åŠ¨ç‚¹å¦‚åŒ"é”šç‚¹"ï¼Œåˆ‡å‰²é—®é¢˜ä¸ºç‹¬ç«‹å­ä»»åŠ¡ã€‚

3. **éš¾ç‚¹ï¼šè¿ç»­æ®µå†…æœ€å°æ“ä½œè®¡ç®—**  
   * **åˆ†æ**ï¼šå·¦ç§»æ®µä»å³å‘å·¦å¤„ç†ï¼Œæ¯åªä¼é¹…éœ€ç§»åŠ¨åˆ°å‰ä¸€åªå³ä¾§ç›¸é‚»ä½ã€‚è‹¥`B_{j-1}+1=B_j`åªéœ€1æ­¥ï¼›å¦åˆ™éœ€`j-k`æ­¥ï¼ˆ`k`ä¸ºæœ€è¿‘å¯æ’ä¸Šçš„ä¼é¹…ï¼‰ã€‚  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€†å‘å¤„ç†æ˜¯è´ªå¿ƒå…³é”®ï¼

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **æ–¹å‘ä¸€è‡´æ€§æ£€éªŒ**ï¼šä¼˜å…ˆæ‰«æç›¸é‚»ä¼é¹…ç§»åŠ¨æ–¹å‘  
- **çŠ¶æ€æ˜ å°„ä¼˜åŒ–**ï¼šç”¨`A_i-i`æ˜ å°„ä½ç½®é¿å…å¤§æ•°ç»„  
- **è¾¹ç•Œä¿æŠ¤æŠ€å·§**ï¼šæ·»åŠ è™šæ‹Ÿç«¯ç‚¹ï¼ˆ0å’ŒL+1ï¼‰ç®€åŒ–è¾¹ç•Œåˆ¤æ–­  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆé¢˜è§£ä¼˜åŒ–ç‰ˆï¼‰**  
```cpp
#include <iostream>
#include <vector>
#include <unordered_map>
using namespace std;

int main() {
    long long L, n;
    cin >> n >> L;
    vector<long long> A(n+2), B(n+2);
    A[0]=B[0]=0; A[n+1]=B[n+1]=L+1; // è™šæ‹Ÿè¾¹ç•Œ
    for (int i=1; i<=n; i++) cin >> A[i];
    for (int i=1; i<=n; i++) cin >> B[i];
    
    // 1. æ£€æŸ¥æ–¹å‘å†²çª
    for (int i=1; i<n; i++) 
        if (A[i]<B[i] && A[i+1]>B[i+1]) 
            { cout << -1; return 0; }

    long long ans = 0;
    unordered_map<long long, int> stateMap;
    vector<int> segEnds = {0}; // å­˜å‚¨åˆ†å‰²ç‚¹
    
    // 2. æ ‡è®°ä¸åŠ¨ç‚¹ä½œä¸ºåˆ†å‰²ç‚¹
    for (int i=1; i<=n; i++)
        if (A[i] == B[i]) segEnds.push_back(i);
    segEnds.push_back(n+1);

    // 3. å¤„ç†æ¯ä¸ªè¿ç»­æ®µ
    for (int s=0; s<segEnds.size()-1; s++) {
        int l = segEnds[s]+1, r = segEnds[s+1]-1;
        if (l > r) continue;
        
        // å·¦ç§»æ®µï¼ˆB[i] < A[i]ï¼‰
        if (B[l] < A[l]) {
            stateMap.clear();
            for (int i=l; i<=r; i++) {
                long long key = A[i] - i;
                if (i>l && B[i-1]+1 == B[i]) ans++;
                else if (stateMap.count(B[i]-i)) 
                    ans += i - stateMap[B[i]-i];
                else { cout << -1; return 0; }
                stateMap[key] = i;
            }
        }
        // å³ç§»æ®µï¼ˆå¯¹ç§°å¤„ç†ï¼‰
        else { ... } // ç±»ä¼¼é€»è¾‘
    }
    cout << ans;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
> 1. **è™šæ‹Ÿè¾¹ç•Œ**ï¼šé¦–å°¾æ·»åŠ 0å’ŒL+1é¿å…è¾¹ç•Œåˆ¤æ–­  
> 2. **å†²çªæ£€æµ‹**ï¼šä¼˜å…ˆæ’é™¤ç›¸é‚»åå‘ç§»åŠ¨çš„æ— è§£æƒ…å†µ  
> 3. **è¿ç»­æ®µå¤„ç†**ï¼š  
>    - ä¸åŠ¨ç‚¹åˆ†å‰²åºåˆ—ï¼ˆ`segEnds`ï¼‰  
>    - å·¦ç§»æ®µï¼šä»å³å‘å·¦ç”¨`stateMap`è®°å½•ä½ç½®æ˜ å°„  
>    - å³ç§»æ®µï¼šå¯¹ç§°é€»è¾‘ï¼ˆä»£ç ç•¥ï¼‰  
> 4. **è´ªå¿ƒè®¡æ•°**ï¼šåˆ©ç”¨å‰é©±ä½ç½®å…³ç³»è®¡ç®—æœ€å°æ­¥æ•°  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
![](https://via.placeholder.com/400x200/000000/FFFFFF?text=8-bit+Penguin+Skating+Demo)  
* **ä¸»é¢˜**ï¼šFCçº¢ç™½æœºé£æ ¼ã€Šä¼é¹…å†°é¢å†’é™©ã€‹  
* **æ ¸å¿ƒäº¤äº’è®¾è®¡**ï¼š  
  1. **åƒç´ ç½‘æ ¼**ï¼š  
     - å†°é¢=é’è‰²åƒç´ å—ï¼Œä¼é¹…=é»„è‰²åƒç´ å—ï¼ˆç§»åŠ¨æ—¶æ‹–å°¾ç‰¹æ•ˆï¼‰  
     - æ–¹å‘æ ‡è¯†ï¼šå·¦ç§»ä¼é¹…å¤´æˆ´è“å¸½ï¼Œå³ç§»æˆ´çº¢å¸½  
  2. **å…³é”®å¸§æ§åˆ¶**ï¼š  
     - å•æ­¥æ‰§è¡Œï¼šæŒ‰æ–¹å‘é”®é€‰æ‹©ä¼é¹…ï¼Œç©ºæ ¼è§¦å‘æ»‘è¡Œ  
     - è‡ªåŠ¨æ¨¡å¼ï¼šAIè‡ªåŠ¨è§„åˆ’è·¯å¾„ï¼ˆé€Ÿåº¦æ»‘å—è°ƒé€Ÿï¼‰  
  3. **éŸ³æ•ˆç³»ç»Ÿ**ï¼š  
     - ç§»åŠ¨ä¸­ï¼š"å—–å—–"è„‰å†²éŸ³ï¼ˆWeb Audio APIç”Ÿæˆ8-bitéŸ³æ•ˆï¼‰  
     - åœæ­¢æ—¶ï¼šæ¸…è„†"å®"å£°  
     - è§£è°œå®Œæˆï¼š8-bitèƒœåˆ©æ—‹å¾‹  
  4. **åŠ¨æ€æ•™å­¦æç¤º**ï¼š  
     - é¡¶éƒ¨æ˜¾ç¤ºå½“å‰æ“ä½œï¼š`ç§»åŠ¨ä¼é¹…#3 â†’ è‡³ä½ç½®X`  
     - å†²çªæ£€æµ‹ï¼šåå‘ä¼é¹…ç¢°æ’æ—¶å±å¹•é—ªçƒçº¢å…‰  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
1. **æ´›è°· P1086 [èŠ±ç”Ÿé‡‡æ‘˜]**  
   ğŸ—£ï¸ è´ªå¿ƒæ¨¡æ‹Ÿç§»åŠ¨è·¯å¾„ï¼Œç±»ä¼¼ä¼é¹…æ»‘åŠ¨çš„æ–¹å‘å†³ç­–  
2. **æ´›è°· P5019 [é“ºè®¾é“è·¯]**  
   ğŸ—£ï¸ è¿ç»­æ®µåˆ†è§£æ€æƒ³ï¼Œæœ€å°åŒ–æ“ä½œæ¬¡æ•°  
3. **æ´›è°· P1090 [åˆå¹¶æœå­]**  
   ğŸ—£ï¸ è´ªå¿ƒé€‰æ‹©ç­–ç•¥çš„ç»å…¸è®­ç»ƒ  

---

> æŒæ¡æ ¸å¿ƒï¼š**ç§»åŠ¨æ–¹å‘åˆ†ç±» â†’ è¿ç»­æ®µåˆ†è§£ â†’ è´ªå¿ƒæ¨¡æ‹Ÿ**  
> ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š120.00ç§’
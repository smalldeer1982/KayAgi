# é¢˜ç›®ä¿¡æ¯

# Shortest Path on a Line

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/nikkei2019-2-qual/tasks/nikkei2019_2_qual_d

ä¸€ç›´ç·šä¸Šã« $ N $ å€‹ã®ç‚¹ãŒã‚ã‚Šã€é †ã« $ 1 $ ã‹ã‚‰ $ N $ ã¾ã§ã®ç•ªå·ãŒã¤ã„ã¦ã„ã¾ã™ã€‚

é«˜æ©‹å›ã¯ã“ã‚Œã‚‰ã®ç‚¹ã‚’é ‚ç‚¹ã¨ã—ã¦ç„¡å‘ã‚°ãƒ©ãƒ•ã‚’ä½œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ ã¯ã˜ã‚ã¯ã‚°ãƒ©ãƒ•ã«è¾ºã¯ãªã„ã§ã™ãŒã€$ M $ å›ã®æ“ä½œã«ã‚ˆã£ã¦è¾ºã‚’è¿½åŠ ã—ã¾ã™ã€‚ $ i $ å›ç›®ã®æ“ä½œã§ã¯æ¬¡ã®ã‚ˆã†ã«è¾ºã‚’è¿½åŠ ã—ã¾ã™ã€‚

- $ 1 $ ä»¥ä¸Š $ N $ ä»¥ä¸‹ã®æ•´æ•° $ L_i $, $ R_i $ åŠã³æ­£æ•´æ•° $ C_i $ ã‚’ç”¨ã„ã‚‹ã€‚ $ L_i\ â‰¦\ s\ <\ t\ â‰¦\ R_i $ ãªã‚‹æ•´æ•°ã®çµ„ $ (s,t) $ ã™ã¹ã¦ã«å¯¾ã—ã€é ‚ç‚¹ $ s $ ã¨é ‚ç‚¹ $ t $ ã®é–“ã«é•·ã• $ C_i $ ã®è¾ºã‚’è¿½åŠ ã™ã‚‹ã€‚

ãŸã ã—ã€$ L_1,...,L_M $, $ R_1,...,R_M $, $ C_1,...,C_M $ ã¯ã™ã¹ã¦å…¥åŠ›ã§ä¸ãˆã‚‰ã‚Œã¾ã™ã€‚

é«˜æ©‹å›ã¯æœ€çµ‚çš„ã«å¾—ã‚‰ã‚ŒãŸã‚°ãƒ©ãƒ•ä¸Šã§æœ€çŸ­è·¯å•é¡Œã‚’è§£ããŸã„ã§ã™ã€‚å¾—ã‚‰ã‚ŒãŸã‚°ãƒ©ãƒ•ä¸Šã§ã®é ‚ç‚¹ $ 1 $ ã‹ã‚‰é ‚ç‚¹ $ N $ ã¾ã§ã®æœ€çŸ­è·¯ã®é•·ã•ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 2\ â‰¦\ N\ â‰¦\ 10^5 $
- $ 1\ â‰¦\ M\ â‰¦\ 10^5 $
- $ 1\ â‰¦\ L_i\ <\ R_i\ â‰¦\ N $
- $ 1\ â‰¦\ C_i\ â‰¦\ 10^9 $

### Sample Explanation 1

é ‚ç‚¹ $ 1 $ ã¨é ‚ç‚¹ $ 2 $ ã®é–“ã«é•·ã• $ 2 $ ã®è¾ºãŒã‚ã‚Šã€é ‚ç‚¹ $ 2 $ ã¨é ‚ç‚¹ $ 4 $ ã®é–“ã«é•·ã• $ 3 $ ã®è¾ºãŒã‚ã‚‹ã®ã§ã€é ‚ç‚¹ $ 1 $ ã¨é ‚ç‚¹ $ 4 $ ã®é–“ã«é•·ã• $ 5 $ ã®ãƒ‘ã‚¹ãŒå­˜åœ¨ã—ã¾ã™ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 3

1 3 2

2 4 3

1 4 6```

### è¾“å‡º

```
5```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4 2

1 2 1

3 4 2```

### è¾“å‡º

```
-1```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10 7

1 5 18

3 4 8

1 3 5

4 7 10

5 9 8

6 10 5

8 10 3```

### è¾“å‡º

```
28```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šShortest Path on a Line æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆæœ€çŸ­è·¯ä¼˜åŒ–å»ºå›¾ï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯æ±‚**1åˆ°Nçš„æœ€çŸ­è·¯**ï¼Œä½†éš¾ç‚¹åœ¨äº**å¤§è§„æ¨¡åŒºé—´è¿è¾¹**â€”â€”å¦‚æœæŒ‰ç…§é¢˜æ„ç»™æ¯ä¸ªåŒºé—´å†…çš„æ‰€æœ‰ç‚¹å¯¹éƒ½è¿è¾¹ï¼Œè¾¹æ•°ä¼šè¾¾åˆ°O(NÂ²M)ï¼Œå®Œå…¨æ— æ³•å¤„ç†1e5çº§åˆ«çš„æ•°æ®ã€‚  

è§£å†³é—®é¢˜çš„å…³é”®åœ¨äº**ä¼˜åŒ–å»ºå›¾**ï¼ŒæŠŠâ€œåŒºé—´å†…æ‰€æœ‰ç‚¹å¯¹è¿è¾¹â€è½¬åŒ–ä¸ºâ€œå°‘é‡å…³é”®è¾¹â€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç”ŸåŠ¨çš„æ¯”å–»ï¼š**ç»™æ¯ä¸ªåŒºé—´[L,R]å¼€ä¸€æ‰‡â€œä¼ é€é—¨â€**â€”â€”ä»Lå¯ä»¥ç›´æ¥è·³åˆ°Rï¼ˆè¾¹æƒä¸ºCï¼‰ï¼Œè€Œç›¸é‚»ç‚¹ä¹‹é—´ï¼ˆæ¯”å¦‚iå’Œi-1ï¼‰è¿ä¸€æ¡**å…è´¹å°è·¯**ï¼ˆè¾¹æƒä¸º0ï¼‰ã€‚è¿™æ ·ï¼Œå½“ä½ åœ¨åŒºé—´[L,R]å†…çš„ä»»æ„ç‚¹æ—¶ï¼Œéƒ½å¯ä»¥é€šè¿‡å…è´¹å°è·¯èµ°åˆ°Lï¼Œå†ç”¨ä¼ é€é—¨è·³åˆ°Rï¼Œä»è€Œæ›¿ä»£åŒºé—´å†…çš„æ‰€æœ‰è¾¹ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. ç»™æ¯ä¸ªç‚¹iï¼ˆ2â‰¤iâ‰¤Nï¼‰è¿ä¸€æ¡åˆ°i-1çš„0è¾¹ï¼ˆå…è´¹å°è·¯ï¼‰ï¼›  
2. ç»™æ¯ä¸ªåŒºé—´[L,R]è¿ä¸€æ¡Låˆ°Rçš„è¾¹ï¼ˆä¼ é€é—¨ï¼Œè¾¹æƒä¸ºCï¼‰ï¼›  
3. ç”¨**å †ä¼˜åŒ–çš„Dijkstraç®—æ³•**æ±‚1åˆ°Nçš„æœ€çŸ­è·¯ï¼ˆå› ä¸ºè¾¹æƒéƒ½æ˜¯éè´Ÿçš„ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼š  
- ç‚¹ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼ˆæ¯”å¦‚1å·ç‚¹æ˜¯çº¢è‰²ï¼ŒNå·ç‚¹æ˜¯ç»¿è‰²ï¼‰ï¼›  
- å…è´¹å°è·¯æ˜¯ç°è‰²çš„ç»†çº¿æ¡ï¼Œä¼ é€é—¨æ˜¯é—ªçƒçš„è“è‰²æ–¹å—ï¼ˆLåˆ°Rï¼‰ï¼›  
- Dijkstraç®—æ³•è¿è¡Œæ—¶ï¼Œå·²ç¡®å®šæœ€çŸ­è·ç¦»çš„ç‚¹ä¼šå˜æˆé»„è‰²ï¼Œæ­£åœ¨å¤„ç†çš„ç‚¹ä¼šé—ªçƒï¼›  
- å½“ä½¿ç”¨ä¼ é€é—¨æ—¶ï¼Œä¼šæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œåˆ°è¾¾ç»ˆç‚¹æ—¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šä¼˜åŒ–å»ºå›¾+å †ä¼˜åŒ–Dijkstraï¼ˆä½œè€…ï¼šzjc5ï¼Œè¯„åˆ†ï¼š5æ˜Ÿï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**éå¸¸æ¸…æ™°**ï¼Œå®Œç¾è§£å†³äº†å¤§è§„æ¨¡åŒºé—´è¿è¾¹çš„é—®é¢˜ã€‚ä½œè€…é€šè¿‡â€œå…è´¹å°è·¯+ä¼ é€é—¨â€çš„ä¼˜åŒ–å»ºå›¾ï¼ŒæŠŠè¾¹æ•°ä»O(NÂ²M)é™åˆ°äº†O(N+M)ï¼Œå®Œå…¨ç¬¦åˆ1e5çº§åˆ«çš„æ•°æ®è¦æ±‚ã€‚ä»£ç é£æ ¼**è§„èŒƒæ˜“æ‡‚**ï¼Œå˜é‡å‘½åï¼ˆæ¯”å¦‚`dis`è¡¨ç¤ºè·ç¦»ï¼Œ`st`è¡¨ç¤ºæ˜¯å¦è®¿é—®è¿‡ï¼‰æ¸…æ™°ï¼Œå¹¶ä¸”ç‰¹æ„æé†’â€œä¸€å®šè¦å¼€long longâ€ï¼ˆé¿å…æ•°æ®æº¢å‡ºï¼‰ï¼Œéå¸¸è´´å¿ƒã€‚ç®—æ³•ä¸Šï¼Œå †ä¼˜åŒ–çš„Dijkstraæ—¶é—´å¤æ‚åº¦ä¸ºO((N+M)logN)ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œå®è·µä¸­å¯ä»¥ç›´æ¥ç”¨äºç«èµ›ã€‚  

### é¢˜è§£äºŒï¼šçº¿æ®µæ ‘ä¼˜åŒ–DPï¼ˆä½œè€…ï¼šRem_CandleFireï¼Œè¯„åˆ†ï¼š4æ˜Ÿï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**éå¸¸æ–°é¢–**ï¼Œæ²¡æœ‰ä½¿ç”¨æœ€çŸ­è·¯ç®—æ³•ï¼Œè€Œæ˜¯ç”¨**çº¿æ®µæ ‘ä¼˜åŒ–DP**è§£å†³é—®é¢˜ã€‚ä½œè€…å®šä¹‰`f[i]`è¡¨ç¤ºèµ°åˆ°içš„æœ€çŸ­è·ç¦»ï¼Œé€šè¿‡çº¿æ®µæ ‘ç»´æŠ¤åŒºé—´æœ€å°å€¼ï¼Œå¿«é€Ÿå¤„ç†â€œåŒºé—´[L+1,R]å–min(f[i]+C)â€çš„è½¬ç§»ã€‚è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(NlogN)ï¼Œå¯¹äºå¤§è§„æ¨¡æ•°æ®ä¹Ÿå¾ˆé«˜æ•ˆã€‚ä»£ç ä¸­çš„çº¿æ®µæ ‘å®ç°ï¼ˆ`Build`ã€`Update`ã€`Query`ï¼‰å¾ˆè§„èŒƒï¼Œé€‚åˆå­¦ä¹ çº¿æ®µæ ‘çš„åº”ç”¨ã€‚  

### é¢˜è§£ä¸‰ï¼šçº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ï¼ˆä½œè€…ï¼šsysongï¼Œè¯„åˆ†ï¼š4æ˜Ÿï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£é‡‡ç”¨äº†**çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾**çš„ç»å…¸æ–¹æ³•ï¼ŒæŠŠåŒºé—´è¿è¾¹è½¬åŒ–ä¸ºçº¿æ®µæ ‘èŠ‚ç‚¹ä¹‹é—´çš„è¾¹ã€‚è™½ç„¶å®ç°å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†æ€è·¯å…·æœ‰æ™®é€‚æ€§ï¼ˆæ¯”å¦‚å¤„ç†åŒºé—´å‘åŒºé—´è¿è¾¹çš„é—®é¢˜ï¼‰ã€‚ä»£ç ä¸­çš„çº¿æ®µæ ‘æ„å»ºï¼ˆ`build`ï¼‰å’ŒåŠ è¾¹ï¼ˆ`addedge`ï¼‰è¿‡ç¨‹å¾ˆè¯¦ç»†ï¼Œé€‚åˆå­¦ä¹ çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾çš„æŠ€å·§ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•å¤„ç†å¤§è§„æ¨¡åŒºé—´è¿è¾¹ï¼Ÿ  
* **åˆ†æ**ï¼š  
  ç›´æ¥ç»™åŒºé—´å†…æ‰€æœ‰ç‚¹å¯¹è¿è¾¹ä¼šå¯¼è‡´è¾¹æ•°çˆ†ç‚¸ï¼Œæ— æ³•å¤„ç†1e5çº§åˆ«çš„æ•°æ®ã€‚è§£å†³æ–¹æ³•æ˜¯**ä¼˜åŒ–å»ºå›¾**â€”â€”ç”¨â€œå…è´¹å°è·¯+ä¼ é€é—¨â€æ›¿ä»£åŒºé—´å†…çš„æ‰€æœ‰è¾¹ã€‚å…è´¹å°è·¯ï¼ˆiâ†’i-1ï¼Œè¾¹æƒ0ï¼‰è®©æˆ‘ä»¬å¯ä»¥åœ¨åŒºé—´å†…è‡ªç”±ç§»åŠ¨ï¼Œä¼ é€é—¨ï¼ˆLâ†’Rï¼Œè¾¹æƒCï¼‰è®©æˆ‘ä»¬å¯ä»¥å¿«é€Ÿè·¨è¶Šæ•´ä¸ªåŒºé—´ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¼˜åŒ–å»ºå›¾çš„å…³é”®æ˜¯æ‰¾åˆ°â€œç­‰ä»·æ›¿ä»£â€ï¼Œç”¨å°‘é‡è¾¹å®ç°åŒæ ·çš„åŠŸèƒ½ã€‚  

### 2. å¦‚ä½•é€‰æ‹©æœ€çŸ­è·¯ç®—æ³•ï¼Ÿ  
* **åˆ†æ**ï¼š  
  æœ¬é¢˜ä¸­çš„è¾¹æƒéƒ½æ˜¯éè´Ÿçš„ï¼ˆC_iâ‰¥1ï¼Œ0è¾¹ä¹Ÿæ˜¯éè´Ÿçš„ï¼‰ï¼Œæ‰€ä»¥**å †ä¼˜åŒ–çš„Dijkstraç®—æ³•**æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚å®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸ºO((N+M)logN)ï¼Œå¯ä»¥å¤„ç†1e5çº§åˆ«çš„æ•°æ®ã€‚å¦‚æœç”¨SPFAç®—æ³•ï¼Œå¯èƒ½ä¼šå› ä¸ºæ•°æ®å¡å¸¸è€Œè¶…æ—¶ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹æƒéè´Ÿæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©Dijkstraç®—æ³•ï¼›è¾¹æƒæœ‰è´Ÿæ—¶ï¼Œæ‰è€ƒè™‘SPFAæˆ–Bellman-Fordç®—æ³•ã€‚  

### 3. å¦‚ä½•å¤„ç†æ•°æ®èŒƒå›´ï¼Ÿ  
* **åˆ†æ**ï¼š  
  C_içš„æœ€å¤§å€¼æ˜¯1e9ï¼ŒNæ˜¯1e5ï¼Œæ‰€ä»¥æœ€çŸ­è·¯çš„é•¿åº¦å¯èƒ½è¾¾åˆ°1e14ï¼Œè¿œè¶…intçš„èŒƒå›´ï¼ˆçº¦2e9ï¼‰ã€‚å› æ­¤ï¼Œå¿…é¡»ç”¨**long long**ç±»å‹å­˜å‚¨è·ç¦»ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡åˆ°å¤§æ•°æ—¶ï¼Œä¸€å®šè¦æ£€æŸ¥æ•°æ®ç±»å‹ï¼Œé¿å…æº¢å‡ºã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆæ¥è‡ªzjc5çš„é¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼š  
  è¿™æ˜¯ä¼˜åŒ–å»ºå›¾+å †ä¼˜åŒ–Dijkstraçš„ç»å…¸å®ç°ï¼Œæ€è·¯æ¸…æ™°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œé€‚åˆä½œä¸ºæœ¬é¢˜çš„æ¨¡æ¿ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include<bits/stdc++.h>
  using namespace std;
  #define N 200010
  #define int long long
  inline char gc(){
      static char buf[1000010],*p1=buf,*p2=buf;
      return p1==p2&&(p2=(p1=buf)+fread(buf,1,1000010,stdin),p1==p2)?EOF:*p1++;
  }
  inline int read(){
      int x=0;
      char s=gc();
      while(s<'0'||s>'9') s=gc();
      while(s>='0'&&s<='9'){
          x=(x<<3)+(x<<1)+(s^48);s=gc();
      }return x;
  }
  typedef pair<int,int> pii;
  bool st[N];
  int n,m,x,y,z,v,tot;
  int head[N],e[N],ne[N],l[N],dis[N];
  void add(int x,int y,int z){
      e[++tot]=y;
      l[tot]=z;
      ne[tot]=head[x];
      head[x]=tot;
  }
  int Dijkstra(){
      memset(dis,0x3f,sizeof(dis));
      dis[1]=0;
      priority_queue<pii, vector<pii>, greater<pii> >q;
      q.push({0,1});
      while(q.size()){
          auto t=q.top();
          int a=t.first,b=t.second;
          q.pop();
          if(st[b]) continue;
          st[b]=true;
          for(int i=head[b];i;i=ne[i]){
              v=e[i];
              if(a+l[i]<dis[v]) {
                  dis[v]=a+l[i];
                  q.push({dis[v],v});
              }
          }
      }
      if(dis[n]==dis[0]) return -1;
      return dis[n];
  }
  signed main(){
      n=read();
      m=read();
      for(int i=1;i<=m;i++) {
          x=read();
          y=read();
          z=read();
          add(x,y,z);
      }
      for(int i=n;i>1;i--)
          add(i,i-1,0);
      int t=Dijkstra();
      printf("%lld",t);
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šç”¨`gc`å’Œ`read`å‡½æ•°å¿«é€Ÿè¯»å–è¾“å…¥ï¼ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶å¾ˆæœ‰ç”¨ï¼‰ï¼›  
  2. **å»ºå›¾**ï¼š`add`å‡½æ•°æ·»åŠ è¾¹ï¼Œé¦–å…ˆæ·»åŠ æ¯ä¸ªåŒºé—´çš„Lâ†’Rè¾¹ï¼ˆä¼ é€é—¨ï¼‰ï¼Œç„¶åæ·»åŠ iâ†’i-1çš„0è¾¹ï¼ˆå…è´¹å°è·¯ï¼‰ï¼›  
  3. **Dijkstraç®—æ³•**ï¼šç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰ç»´æŠ¤å½“å‰æœ€çŸ­è·ç¦»çš„ç‚¹ï¼Œ`dis`æ•°ç»„å­˜å‚¨æ¯ä¸ªç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œ`st`æ•°ç»„æ ‡è®°æ˜¯å¦å·²è®¿é—®ã€‚  


### é¢˜è§£äºŒï¼šçº¿æ®µæ ‘ä¼˜åŒ–DPï¼ˆä½œè€…ï¼šRem_CandleFireï¼‰  
* **äº®ç‚¹**ï¼šç”¨çº¿æ®µæ ‘ç»´æŠ¤åŒºé—´æœ€å°å€¼ï¼Œå®ç°é«˜æ•ˆDPè½¬ç§»ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  struct SegmentTree {
      struct node { LL tag, val; } tr[N<<2];
      void Build(int l,int r,int k) {
          if(l==r) return tr[k].val=(l==1?0:Inf),void();
          int mid=(l+r)>>1;
          Build(l,mid,k<<1); Build(mid+1,r,k<<1|1);
      }
      void Update(int l,int r,int k,int x,int y,LL v) {
          if(r<x||l>y) return ;
          if(x<=l&&r<=y) {
              if(tr[k].tag>0) tr[k].tag=min(tr[k].tag,v);
              else tr[k].tag=v;
              return ;
          }
          int mid=(l+r)>>1;
          Update(l,mid,k<<1,x,y,v);
          Update(mid+1,r,k<<1|1,x,y,v);
      }
      LL Query(int l,int r,int k,int pos,LL v) {
          if(tr[k].tag) v=min(v,tr[k].tag);
          if(l==r) return tr[k].val=min(tr[k].val,v);
          int mid=(l+r)>>1;
          if(pos<=mid) return Query(l,mid,k<<1,pos,v);
          else return Query(mid+1,r,k<<1|1,pos,v); 
      }
  } S;
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `Build`å‡½æ•°åˆå§‹åŒ–çº¿æ®µæ ‘ï¼Œ`tr[k].val`è¡¨ç¤ºåŒºé—´çš„æœ€å°å€¼ï¼Œ1å·ç‚¹çš„åˆå§‹å€¼ä¸º0ï¼ˆèµ·ç‚¹ï¼‰ï¼Œå…¶ä»–ç‚¹ä¸ºæ— ç©·å¤§ï¼›  
  - `Update`å‡½æ•°ç»™åŒºé—´[L+1,R]æ‰“ä¸Šæ ‡è®°ï¼ˆè¡¨ç¤ºè¿™ä¸ªåŒºé—´çš„æœ€å°å€¼å¯ä»¥æ›´æ–°ä¸º`f[i]+C`ï¼‰ï¼›  
  - `Query`å‡½æ•°æŸ¥è¯¢posç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œå¹¶æ›´æ–°çº¿æ®µæ ‘ä¸­çš„å€¼ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçº¿æ®µæ ‘å¯ä»¥é«˜æ•ˆå¤„ç†åŒºé—´æ›´æ–°å’ŒæŸ¥è¯¢é—®é¢˜ï¼Œæ˜¯DPä¼˜åŒ–çš„å¸¸ç”¨å·¥å…·ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶çš„ä¼ é€é—¨ä¹‹æ—…  
**è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹Ÿâ€œæ¢é™©å®¶ä»1å·ç‚¹èµ°åˆ°Nå·ç‚¹â€çš„è¿‡ç¨‹ï¼Œé€šè¿‡â€œå…è´¹å°è·¯â€å’Œâ€œä¼ é€é—¨â€å¿«é€Ÿç§»åŠ¨ï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°ä¼˜åŒ–å»ºå›¾çš„æ•ˆæœã€‚  

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹ï¼š  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤ºä¸€æ¡åƒç´ åŒ–çš„ç›´çº¿ï¼Œä¸Šé¢æœ‰Nä¸ªç‚¹ï¼ˆ1å·ç‚¹æ˜¯çº¢è‰²ï¼ŒNå·ç‚¹æ˜¯ç»¿è‰²ï¼Œå…¶ä»–ç‚¹æ˜¯ç°è‰²ï¼‰ï¼›  
   - åº•éƒ¨æœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥æ‰§è¡Œâ€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼›  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ï¼‰ã€‚  

2. **å»ºå›¾å±•ç¤º**ï¼š  
   - å…è´¹å°è·¯ï¼ˆiâ†’i-1ï¼‰ç”¨ç°è‰²ç»†çº¿æ¡è¿æ¥ï¼›  
   - ä¼ é€é—¨ï¼ˆLâ†’Rï¼‰ç”¨é—ªçƒçš„è“è‰²æ–¹å—è¡¨ç¤ºï¼Œæ—è¾¹æ˜¾ç¤ºè¾¹æƒCã€‚  

3. **Dijkstraè¿è¡Œè¿‡ç¨‹**ï¼š  
   - å·²ç¡®å®šæœ€çŸ­è·ç¦»çš„ç‚¹å˜æˆé»„è‰²ï¼›  
   - æ­£åœ¨å¤„ç†çš„ç‚¹ï¼ˆä¼˜å…ˆé˜Ÿåˆ—é¡¶éƒ¨çš„ç‚¹ï¼‰é—ªçƒï¼›  
   - å½“ä½¿ç”¨å…è´¹å°è·¯æ—¶ï¼Œæ¢é™©å®¶ï¼ˆä¸€ä¸ªå°åƒç´ äººï¼‰æ²¿ç€ç°è‰²çº¿æ¡ç§»åŠ¨ï¼Œæ’­æ”¾â€œæ²™æ²™â€çš„éŸ³æ•ˆï¼›  
   - å½“ä½¿ç”¨ä¼ é€é—¨æ—¶ï¼Œæ¢é™©å®¶ä»Lç‚¹â€œè·³è¿›â€è“è‰²æ–¹å—ï¼Œç¬é—´å‡ºç°åœ¨Rç‚¹ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“æ¢é™©å®¶åˆ°è¾¾Nå·ç‚¹ï¼ˆç»¿è‰²ï¼‰æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ï¼Œå±å¹•æ˜¾ç¤ºâ€œæˆåŠŸï¼æœ€çŸ­è·ç¦»ï¼šXâ€ï¼›  
   - å¦‚æœæ— æ³•åˆ°è¾¾ï¼Œæ’­æ”¾â€œå¤±è´¥â€éŸ³æ•ˆï¼Œæ˜¾ç¤ºâ€œæ— æ³•åˆ°è¾¾â€ã€‚  

### äº¤äº’è®¾è®¡ï¼š  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»ä¸€æ¬¡ï¼Œæ‰§è¡ŒDijkstraçš„ä¸€æ­¥ï¼ˆå¤„ç†ä¸€ä¸ªç‚¹ï¼‰ï¼›  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šå¯ä»¥è°ƒæ•´é€Ÿåº¦ï¼ˆæ¯”å¦‚1xã€2xã€4xï¼‰ï¼Œè®©åŠ¨ç”»è‡ªåŠ¨è¿è¡Œï¼›  
- **é‡ç½®**ï¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»ï¼š  
- **ä¼˜åŒ–å»ºå›¾**ï¼šé€‚ç”¨äºæ‰€æœ‰â€œå¤§è§„æ¨¡åŒºé—´è¿è¾¹â€çš„é—®é¢˜ï¼Œæ¯”å¦‚â€œç»™åŒºé—´å†…çš„æ‰€æœ‰ç‚¹è¿è¾¹â€â€œåŒºé—´å†…çš„ç‚¹å¯ä»¥äº’ç›¸åˆ°è¾¾â€ç­‰ï¼›  
- **çº¿æ®µæ ‘ä¼˜åŒ–**ï¼šé€‚ç”¨äºâ€œåŒºé—´æ›´æ–°+åŒºé—´æŸ¥è¯¢â€çš„DPé—®é¢˜ï¼Œæ¯”å¦‚â€œæœ€é•¿ä¸Šå‡å­åºåˆ—â€çš„ä¼˜åŒ–ã€â€œåŒºé—´æœ€å°å€¼â€çš„ç»´æŠ¤ç­‰ï¼›  
- **å †ä¼˜åŒ–Dijkstra**ï¼šé€‚ç”¨äºæ‰€æœ‰â€œè¾¹æƒéè´Ÿâ€çš„æœ€çŸ­è·¯é—®é¢˜ï¼Œæ¯”å¦‚â€œåŸå¸‚é—´çš„æœ€çŸ­è·¯å¾„â€â€œç½‘ç»œå»¶è¿Ÿé—®é¢˜â€ç­‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)ï¼š  
1. **æ´›è°· P3371** - ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ï¼ˆå¼±åŒ–ç‰ˆï¼‰  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯Dijkstraç®—æ³•çš„æ¨¡æ¿é¢˜ï¼Œå¸®åŠ©ä½ å·©å›ºå †ä¼˜åŒ–Dijkstraçš„å®ç°ã€‚  
2. **æ´›è°· P2387** - é­”æ³•æ£®æ—  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨åˆ°çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ï¼Œé€‚åˆç»ƒä¹ åŒºé—´è¿è¾¹çš„æŠ€å·§ã€‚  
3. **æ´›è°· P4779** - ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ï¼ˆæ ‡å‡†ç‰ˆï¼‰  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯å †ä¼˜åŒ–Dijkstraçš„æ ‡å‡†ç‰ˆï¼Œæ•°æ®è§„æ¨¡æ›´å¤§ï¼Œå¸®åŠ©ä½ æå‡ä»£ç æ•ˆç‡ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªzjc5)ï¼š  
â€œä¸€å®šè¦å¼€long longï¼â€  
**ç‚¹è¯„**ï¼šè¿™æ˜¯æœ¬é¢˜æœ€å®¹æ˜“è¸©çš„å‘ä¹‹ä¸€ã€‚å› ä¸ºC_içš„æœ€å¤§å€¼æ˜¯1e9ï¼ŒNæ˜¯1e5ï¼Œæœ€çŸ­è·¯çš„é•¿åº¦å¯èƒ½è¾¾åˆ°1e14ï¼Œè¿œè¶…intçš„èŒƒå›´ã€‚ä½œè€…çš„æé†’éå¸¸é‡è¦ï¼Œåœ¨ç¼–ç¨‹æ—¶ä¸€å®šè¦æ³¨æ„æ•°æ®ç±»å‹çš„é€‰æ‹©ã€‚  

### å‚è€ƒç»éªŒ (æ¥è‡ªRem_CandleFire)ï¼š  
â€œçº¿æ®µæ ‘å¯ä»¥ä¼˜åŒ–DPçš„åŒºé—´è½¬ç§»ã€‚â€  
**ç‚¹è¯„**ï¼šçº¿æ®µæ ‘ä¸ä»…å¯ä»¥ç”¨äºåŒºé—´æŸ¥è¯¢å’Œæ›´æ–°ï¼Œè¿˜å¯ä»¥ä¼˜åŒ–DPçš„è½¬ç§»è¿‡ç¨‹ã€‚æ¯”å¦‚æœ¬é¢˜ä¸­çš„â€œåŒºé—´å–minâ€æ“ä½œï¼Œç”¨çº¿æ®µæ ‘å¯ä»¥æŠŠæ—¶é—´å¤æ‚åº¦ä»O(NM)é™åˆ°O(NlogN)ï¼Œéå¸¸é«˜æ•ˆã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œShortest Path on a Lineâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£**ä¼˜åŒ–å»ºå›¾**å’Œ**æœ€çŸ­è·¯ç®—æ³•**çš„æ ¸å¿ƒæ€æƒ³ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„å…³é”®æ˜¯â€œæ‰¾è§„å¾‹ã€ä¼˜åŒ–å¤æ‚åº¦â€â€”â€”å½“é‡åˆ°å¤§è§„æ¨¡æ•°æ®æ—¶ï¼Œä¸€å®šè¦æƒ³â€œæœ‰æ²¡æœ‰æ›´èªæ˜çš„æ–¹æ³•â€ï¼Œè€Œä¸æ˜¯æš´åŠ›è§£å†³ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š185.28ç§’
# é¢˜ç›®ä¿¡æ¯

# [ABC399F] Range Power Sum

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/abc399/tasks/abc399_f

ç»™å®šæ­£æ•´æ•° $N, K$ ä»¥åŠé•¿åº¦ä¸º $N$ çš„æ•´æ•°åºåˆ— $A = (A_1, A_2, \dots, A_N)$ã€‚  
è¯·è®¡ç®—ä»¥ä¸‹è¡¨è¾¾å¼çš„å€¼å¯¹ $998244353$ å–æ¨¡åçš„ä½™æ•°ï¼š

$$
\displaystyle \sum_{1 \leq l \leq r \leq N} \left( \sum_{l \leq i \leq r} A_i \right)^K
$$

## è¯´æ˜/æç¤º

### çº¦æŸæ¡ä»¶

- $1 \leq N \leq 2 \times 10^5$
- $1 \leq K \leq 10$
- $0 \leq A_i < 998244353$
- è¾“å…¥å‡ä¸ºæ•´æ•°

### æ ·ä¾‹è§£é‡Š 1

æ‰€æ±‚çš„å€¼ä¸º $A_1^2 + A_2^2 + A_3^2 + (A_1 + A_2)^2 + (A_2 + A_3)^2 + (A_1 + A_2 + A_3)^2 = 3^2 + 1^2 + 2^2 + 4^2 + 3^2 + 6^2 = 75$ã€‚

### æ ·ä¾‹è§£é‡Š 3

æ³¨æ„éœ€è¦å¯¹ç»“æœå– $998244353$ çš„æ¨¡ã€‚

ç¿»è¯‘ç”± DeepSeek R1 å®Œæˆ

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 2

3 1 2```

### è¾“å‡º

```
75```

## æ ·ä¾‹ #2

### è¾“å…¥

```
1 10

0```

### è¾“å‡º

```
0```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10 5

91 59 85 60 57 72 12 3 27 16```

### è¾“å‡º

```
428633385```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ABC399F] Range Power Sum æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ•°å­¦ï¼ˆäºŒé¡¹å¼å®šç†ï¼‰+ å‰ç¼€å’Œä¼˜åŒ–  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œRange Power Sumâ€çš„å…³é”®ï¼Œåœ¨äºå°†**å­æ®µå’Œçš„Kæ¬¡æ–¹å’Œ**è½¬åŒ–ä¸º**å‰ç¼€å’Œçš„ç»„åˆé—®é¢˜**ï¼Œå¹¶é€šè¿‡**äºŒé¡¹å¼å®šç†**å±•å¼€ç®€åŒ–è®¡ç®—ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªå­æ®µå’Œè¡¨ç¤ºä¸ºâ€œå‰ç¼€å’Œä¹‹å·®â€ï¼ˆæ¯”å¦‚å­æ®µ`[l,r]`çš„å’Œç­‰äº`sum[r] - sum[l-1]`ï¼‰ï¼Œç„¶åç”¨äºŒé¡¹å¼å®šç†å°†è¿™ä¸ªå·®çš„Kæ¬¡æ–¹å±•å¼€æˆå¤šä¸ªé¡¹çš„å’Œã€‚æ¥ç€ï¼Œé€šè¿‡**äº¤æ¢æ±‚å’Œé¡ºåº**ï¼Œå°†åŸæœ¬O(NÂ²K)çš„å¤æ‚åº¦ä¼˜åŒ–åˆ°O(NK)ï¼Œä»è€Œå¤„ç†2e5è§„æ¨¡çš„æ•°æ®ã€‚  

- **æ ¸å¿ƒæ€è·¯**ï¼š  
  1. ç”¨å‰ç¼€å’Œ`sum[i]`è¡¨ç¤ºæ•°ç»„å‰ié¡¹çš„å’Œï¼Œå­æ®µ`[l,r]`çš„å’Œä¸º`sum[r] - sum[l-1]`ã€‚  
  2. å¯¹`(sum[r] - sum[l-1])^K`ä½¿ç”¨äºŒé¡¹å¼å®šç†å±•å¼€ï¼Œå¾—åˆ°`Î£ï¼ˆç»„åˆæ•°C(K,i) * sum[r]^i * (-sum[l-1])^(K-i)ï¼‰`ï¼ˆiä»0åˆ°Kï¼‰ã€‚  
  3. äº¤æ¢æ±‚å’Œé¡ºåºï¼Œå°†â€œå…ˆæšä¸¾lå†æšä¸¾râ€æ”¹ä¸ºâ€œå…ˆæšä¸¾rå†æšä¸¾iâ€ï¼Œå¹¶ä½¿ç”¨**å‰ç¼€å’Œ**ç»´æŠ¤`Î£(-sum[l-1])^(K-i)`ï¼ˆlâ‰¤rï¼‰ï¼Œä»è€Œæ¯ä¸ªrå¯ä»¥O(K)è®¡ç®—è´¡çŒ®ã€‚  

- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
  æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºç®—æ³•æµç¨‹ï¼š  
  - ç”¨åƒç´ å—è¡¨ç¤ºæ•°ç»„å…ƒç´ ï¼ŒåŠ¨æ€è®¡ç®—å‰ç¼€å’Œï¼ˆæ¯”å¦‚`sum[0]=0`ï¼Œ`sum[1]=a[1]`ï¼Œ`sum[2]=sum[1]+a[2]`ï¼‰ã€‚  
  - ç”¨ä¸åŒé¢œè‰²æ ‡è®°äºŒé¡¹å¼å±•å¼€åçš„æ¯ä¸€é¡¹ï¼ˆæ¯”å¦‚`C(K,i)*sum[r]^i`ä¸ºè“è‰²ï¼Œ`(-sum[l-1])^(K-i)`ä¸ºçº¢è‰²ï¼‰ã€‚  
  - åŠ¨æ€å±•ç¤ºå‰ç¼€å’Œç»´æŠ¤çš„è¿‡ç¨‹ï¼ˆæ¯”å¦‚ç´¯åŠ `(-sum[l-1])^(K-i)`æ—¶ï¼Œçº¢è‰²åƒç´ å—é€æ¸å¢åŠ ï¼‰ã€‚  
  - åŠ å…¥â€œå®â€çš„éŸ³æ•ˆè¡¨ç¤ºå®Œæˆä¸€æ¬¡é¡¹çš„è®¡ç®—ï¼Œâ€œèƒœåˆ©â€éŸ³æ•ˆè¡¨ç¤ºæœ€ç»ˆç»“æœçš„è¾“å‡ºã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šyuhong056ï¼Œèµ6ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**éå¸¸æ¸…æ™°**ï¼Œç›´æ¥å‘½ä¸­é—®é¢˜çš„æ ¸å¿ƒâ€”â€”ç”¨å‰ç¼€å’Œå’ŒäºŒé¡¹å¼å®šç†ä¼˜åŒ–ã€‚ä½œè€…è¯¦ç»†æ¨å¯¼äº†å¼å­çš„å˜æ¢è¿‡ç¨‹ï¼Œä»â€œå­æ®µå’Œçš„Kæ¬¡æ–¹â€åˆ°â€œå‰ç¼€å’Œä¹‹å·®çš„å±•å¼€â€ï¼Œå†åˆ°â€œäº¤æ¢æ±‚å’Œé¡ºåºâ€ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰ä¸¥è°¨çš„æ•°å­¦ä¾æ®ã€‚ä»£ç å®ç°**è§„èŒƒä¸”é«˜æ•ˆ**ï¼šé¢„å¤„ç†äº†ç»„åˆæ•°ï¼ˆé˜¶ä¹˜å’Œé€†å…ƒï¼‰ï¼Œç”¨å‰ç¼€å’Œç»´æŠ¤`Î£(-sum[l-1])^(K-i)`ï¼Œæ—¶é—´å¤æ‚åº¦O(NK)ï¼Œå®Œå…¨æ»¡è¶³é¢˜ç›®çº¦æŸã€‚ç‰¹åˆ«æ˜¯å¯¹æ¨¡è¿ç®—çš„å¤„ç†ï¼ˆæ¯”å¦‚è´Ÿæ•°å–æ¨¡ï¼‰éå¸¸ä¸¥è°¨ï¼Œé¿å…äº†æº¢å‡ºé—®é¢˜ã€‚  

### é¢˜è§£äºŒï¼ˆæ¥æºï¼šyszkddzyhï¼Œèµ4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£é‡‡ç”¨äº†**åŠ¨æ€è§„åˆ’**çš„æ€è·¯ï¼Œå®šä¹‰`s[i][j]`ä¸ºä»¥iç»“å°¾çš„æ‰€æœ‰å­æ®µå’Œçš„jæ¬¡æ–¹å’Œã€‚è½¬ç§»æ–¹ç¨‹é€šè¿‡äºŒé¡¹å¼å®šç†æ¨å¯¼å¾—å‡ºï¼Œå°†`s[i][j]`è¡¨ç¤ºä¸º`s[i+1][j]`åŠ ä¸Šæ–°çš„é¡¹ã€‚æ€è·¯**æ–°é¢–ä¸”æ­£ç¡®**ï¼Œè™½ç„¶æ—¶é—´å¤æ‚åº¦ä¸ºO(NKÂ²)ï¼Œä½†å¯¹äºKâ‰¤10çš„æƒ…å†µå®Œå…¨å¯è¡Œã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œå˜é‡å‘½ååˆç†ï¼Œå®¹æ˜“ç†è§£ã€‚  

### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šgavinliu266ï¼Œèµ4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„åŠ¨æ€è§„åˆ’æ€è·¯ä¸é¢˜è§£äºŒç±»ä¼¼ï¼Œä½†**ä»£ç å®ç°æ›´ç®€æ´**ã€‚ä½œè€…å®šä¹‰`dp[x][y]`ä¸ºå‰xé¡¹ä¸­ä»¥xç»“å°¾çš„å­æ®µå’Œçš„yæ¬¡æ–¹å’Œï¼Œè½¬ç§»æ–¹ç¨‹ç›´æ¥åˆ©ç”¨äºŒé¡¹å¼å±•å¼€ï¼Œå°†`dp[x][y]`è¡¨ç¤ºä¸º`a[x]^y`åŠ ä¸Š`Î£ï¼ˆç»„åˆæ•°C(y,j)*a[x]^(y-j)*dp[x-1][j]ï¼‰`ã€‚ä»£ç ä¸­çš„æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼ˆç”¨`dp[0/1][j]`ä»£æ›¿äºŒç»´æ•°ç»„ï¼‰èŠ‚çœäº†ç©ºé—´ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. éš¾ç‚¹1ï¼šå¦‚ä½•å°†å­æ®µå’Œè½¬åŒ–ä¸ºå‰ç¼€å’Œä¹‹å·®ï¼Ÿ  
* **åˆ†æ**ï¼š  
  å­æ®µå’Œçš„è®¡ç®—æ˜¯æœ¬é¢˜çš„åŸºç¡€ï¼Œä½†ç›´æ¥æšä¸¾æ‰€æœ‰å­æ®µï¼ˆO(NÂ²)ï¼‰ä¼šè¶…æ—¶ã€‚å‰ç¼€å’Œçš„ä½œç”¨æ˜¯å°†å­æ®µå’Œè½¬åŒ–ä¸ºâ€œä¸¤ä¸ªå‰ç¼€å’Œçš„å·®â€ï¼Œä»è€Œå°†é—®é¢˜è½¬åŒ–ä¸ºå¤„ç†å‰ç¼€å’Œçš„ç»„åˆã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œæ˜¯å¤„ç†å­æ®µå’Œé—®é¢˜çš„â€œç¥å™¨â€ï¼Œä¸€å®šè¦è®°ä½`sum[l..r] = sum[r] - sum[l-1]`ã€‚  

### 2. éš¾ç‚¹2ï¼šå¦‚ä½•å¤„ç†äºŒé¡¹å¼å±•å¼€åçš„æ±‚å’Œé¡ºåºï¼Ÿ  
* **åˆ†æ**ï¼š  
  äºŒé¡¹å¼å±•å¼€åå¾—åˆ°çš„æ˜¯ä¸‰é‡å¾ªç¯ï¼ˆlã€rã€iï¼‰ï¼Œç›´æ¥è®¡ç®—ä¼šè¶…æ—¶ã€‚äº¤æ¢æ±‚å’Œé¡ºåºï¼ˆå°†`Î£lÎ£rÎ£i`æ”¹ä¸º`Î£iÎ£rÎ£l`ï¼‰å¯ä»¥å°†å†…å±‚å¾ªç¯çš„å¤æ‚åº¦ä»O(NÂ²)é™åˆ°O(N)ï¼Œå› ä¸ºå¯ä»¥ç”¨å‰ç¼€å’Œç»´æŠ¤`Î£(-sum[l-1])^(K-i)`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šäº¤æ¢æ±‚å’Œé¡ºåºæ˜¯ä¼˜åŒ–ç»„åˆé—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œå…³é”®æ˜¯æ‰¾åˆ°â€œå¯ä»¥é¢„å¤„ç†çš„éƒ¨åˆ†â€ã€‚  

### 3. éš¾ç‚¹3ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ  
* **åˆ†æ**ï¼š  
  å¯¹äºæ¯ä¸ªiï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—`Î£sum[r]^i * Î£(-sum[l-1])^(K-i)`ï¼ˆlâ‰¤rï¼‰ã€‚è¿™é‡Œçš„`Î£(-sum[l-1])^(K-i)`å¯ä»¥ç”¨å‰ç¼€å’Œç»´æŠ¤ï¼Œæ¯æ¬¡æšä¸¾ræ—¶ç´¯åŠ `(-sum[r-1])^(K-i)`ï¼Œä»è€ŒO(1)å¾—åˆ°å½“å‰rçš„è´¡çŒ®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œ/åç¼€å’Œæ˜¯ä¼˜åŒ–ç´¯åŠ é—®é¢˜çš„â€œåˆ©å™¨â€ï¼Œèƒ½å°†å¤šæ¬¡è®¡ç®—è½¬åŒ–ä¸ºä¸€æ¬¡é¢„å¤„ç†ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆyuhong056çš„é¢˜è§£æ€è·¯ï¼Œæç‚¼å‡ºçš„O(NK)å®ç°ï¼ŒåŒ…å«å‰ç¼€å’Œè®¡ç®—ã€ç»„åˆæ•°é¢„å¤„ç†ã€äºŒé¡¹å¼å±•å¼€ä¼˜åŒ–ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  using namespace std;
  typedef long long ll;
  const int MOD = 998244353;
  const int MAXN = 2e5 + 5;
  const int MAXK = 12;

  ll fac[MAXK], inv[MAXK];
  ll sum[MAXN][MAXK]; // sum[i][j] = sum[0..i-1]çš„jæ¬¡æ–¹å’Œ
  ll a[MAXN]; // å‰ç¼€å’Œæ•°ç»„

  ll qpow(ll base, int exp) {
      ll res = 1;
      while (exp) {
          if (exp & 1) res = res * base % MOD;
          base = base * base % MOD;
          exp >>= 1;
      }
      return res;
  }

  void init_comb(int k) {
      fac[0] = 1;
      for (int i = 1; i <= k; i++) fac[i] = fac[i-1] * i % MOD;
      inv[k] = qpow(fac[k], MOD-2);
      for (int i = k-1; i >= 0; i--) inv[i] = inv[i+1] * (i+1) % MOD;
  }

  ll comb(int n, int k) {
      if (k < 0 || k > n) return 0;
      return fac[n] * inv[k] % MOD * inv[n-k] % MOD;
  }

  int main() {
      int n, k;
      cin >> n >> k;
      for (int i = 1; i <= n; i++) {
          ll x;
          cin >> x;
          a[i] = (a[i-1] + x) % MOD;
      }
      init_comb(k);
      // é¢„å¤„ç†sum[i][j]ï¼šsum[0..i-1]çš„jæ¬¡æ–¹å’Œ
      vector<ll> pre(k+1, 0);
      pre[0] = 1; // sum[0][0] = 1ï¼ˆ0^0=1ï¼‰
      ll ans = 0;
      for (int r = 1; r <= n; r++) {
          // è®¡ç®—å½“å‰rçš„è´¡çŒ®ï¼šÎ£ï¼ˆC(k,i) * a[r]^i * pre[k-i]ï¼‰
          ll current = 0;
          for (int i = 0; i <= k; i++) {
              ll c = comb(k, i);
              ll s_r_i = qpow(a[r], i);
              ll sign = (k - i) % 2 ? MOD - 1 : 1;
              ll term = c * s_r_i % MOD;
              term = term * pre[k - i] % MOD;
              term = term * sign % MOD;
              current = (current + term) % MOD;
          }
          ans = (ans + current) % MOD;
          // æ›´æ–°preæ•°ç»„ï¼špre[j] += (-a[r])^j
          vector<ll> new_pre = pre;
          for (int j = 0; j <= k; j++) {
              ll val = qpow(MOD - a[r], j); // (-a[r])^j
              new_pre[j] = (new_pre[j] + val) % MOD;
          }
          pre = new_pre;
      }
      cout << ans << endl;
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **å‰ç¼€å’Œè®¡ç®—**ï¼š`a[i]`è¡¨ç¤ºæ•°ç»„å‰ié¡¹çš„å’Œã€‚  
  2. **ç»„åˆæ•°é¢„å¤„ç†**ï¼šç”¨å¿«é€Ÿå¹‚è®¡ç®—é˜¶ä¹˜å’Œé€†å…ƒï¼Œä»è€ŒO(1)å¾—åˆ°ç»„åˆæ•°C(k,i)ã€‚  
  3. **äºŒé¡¹å¼å±•å¼€ä¼˜åŒ–**ï¼šç”¨`pre[j]`ç»´æŠ¤`Î£(-a[l-1])^j`ï¼ˆlâ‰¤rï¼‰ï¼Œæ¯æ¬¡æšä¸¾ræ—¶è®¡ç®—å½“å‰rçš„è´¡çŒ®ï¼Œå¹¶æ›´æ–°`pre`æ•°ç»„ã€‚  


### é¢˜è§£ä¸€ï¼ˆyuhong056ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨å‰ç¼€å’Œç»´æŠ¤`Î£(-sum[l-1])^(K-i)`ï¼Œæ—¶é—´å¤æ‚åº¦O(NK)ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  vector<ll> pre(k+1, 0);
  pre[0] = 1;
  ll ans = 0;
  for (int r = 1; r <= n; r++) {
      ll current = 0;
      for (int i = 0; i <= k; i++) {
          ll c = comb(k, i);
          ll s_r_i = qpow(a[r], i);
          ll sign = (k - i) % 2 ? MOD - 1 : 1;
          ll term = c * s_r_i % MOD * pre[k - i] % MOD * sign % MOD;
          current = (current + term) % MOD;
      }
      ans = (ans + current) % MOD;
      // æ›´æ–°preæ•°ç»„
      vector<ll> new_pre = pre;
      for (int j = 0; j <= k; j++) {
          ll val = qpow(MOD - a[r], j);
          new_pre[j] = (new_pre[j] + val) % MOD;
      }
      pre = new_pre;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `pre[j]`å­˜å‚¨çš„æ˜¯`Î£(-a[0])^j + (-a[1])^j + ... + (-a[r-1])^j`ï¼ˆlä»1åˆ°rï¼‰ã€‚  
  - å¯¹äºæ¯ä¸ªrï¼Œè®¡ç®—`current`ä¸ºå½“å‰rçš„è´¡çŒ®ï¼š`Î£ï¼ˆC(k,i) * a[r]^i * pre[k-i] * signï¼‰`ï¼Œå…¶ä¸­`sign`æ˜¯`(-1)^(k-i)`ã€‚  
  - æ›´æ–°`pre`æ•°ç»„æ—¶ï¼Œå°†`(-a[r])^j`åŠ å…¥`pre[j]`ï¼Œä»¥ä¾¿ä¸‹ä¸€ä¸ªrä½¿ç”¨ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œç»´æŠ¤çš„æ˜¯â€œå†å²æ•°æ®çš„ç´¯åŠ â€ï¼Œèƒ½å°†å¤šæ¬¡æŸ¥è¯¢è½¬åŒ–ä¸ºä¸€æ¬¡æ›´æ–°ï¼Œè¿™æ˜¯ä¼˜åŒ–çš„å…³é”®ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œåƒç´ å‰ç¼€å’Œæ¢é™©å®¶â€**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºå‰ç¼€å’Œè®¡ç®—ã€äºŒé¡¹å¼å±•å¼€åŠå‰ç¼€å’Œä¼˜åŒ–çš„è¿‡ç¨‹ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºæ•°ç»„å…ƒç´ ï¼ˆæ¯”å¦‚`[3,1,2]`ï¼‰ï¼Œç”¨åƒç´ å—è¡¨ç¤ºï¼Œæ¯ä¸ªå…ƒç´ ä¸‹æ–¹æ ‡æ³¨å€¼ã€‚  
   - å±å¹•å³ä¾§æ˜¾ç¤ºå‰ç¼€å’Œæ•°ç»„`sum`ï¼ˆåˆå§‹ä¸º`[0]`ï¼‰ï¼Œç”¨ç»¿è‰²åƒç´ å—è¡¨ç¤ºã€‚  
   - åº•éƒ¨æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ã€‚  

2. **å‰ç¼€å’Œè®¡ç®—**ï¼š  
   - åŠ¨æ€è®¡ç®—å‰ç¼€å’Œï¼š`sum[1] = sum[0] + 3`ï¼ˆç»¿è‰²åƒç´ å—å¢åŠ åˆ°`[0,3]`ï¼‰ï¼Œ`sum[2] = sum[1] + 1`ï¼ˆå¢åŠ åˆ°`[0,3,4]`ï¼‰ï¼Œ`sum[3] = sum[2] + 2`ï¼ˆå¢åŠ åˆ°`[0,3,4,6]`ï¼‰ã€‚  
   - æ¯è®¡ç®—ä¸€ä¸ªå‰ç¼€å’Œï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  

3. **äºŒé¡¹å¼å±•å¼€**ï¼š  
   - å¯¹äº`r=3`ï¼ˆsum[3]=6ï¼‰ï¼Œå±•ç¤ºäºŒé¡¹å¼å±•å¼€åçš„é¡¹ï¼š`C(2,0)*6^0*(-sum[l-1])^2`ã€`C(2,1)*6^1*(-sum[l-1])^1`ã€`C(2,2)*6^2*(-sum[l-1])^0`ï¼ˆlä»1åˆ°3ï¼‰ã€‚  
   - ç”¨ä¸åŒé¢œè‰²æ ‡è®°æ¯ä¸€é¡¹ï¼šè“è‰²è¡¨ç¤º`C(k,i)*sum[r]^i`ï¼Œçº¢è‰²è¡¨ç¤º`(-sum[l-1])^(k-i)`ã€‚  

4. **å‰ç¼€å’Œä¼˜åŒ–**ï¼š  
   - åŠ¨æ€ç»´æŠ¤`pre`æ•°ç»„ï¼ˆ`Î£(-sum[l-1])^(k-i)`ï¼‰ï¼šæ¯”å¦‚`pre[2]`åˆå§‹ä¸º`(-sum[0])^2 = 0^2 = 0`ï¼Œå½“l=1æ—¶ï¼Œ`pre[2]`å¢åŠ `(-sum[1])^2 = (-3)^2 = 9`ï¼›å½“l=2æ—¶ï¼Œå¢åŠ `(-sum[2])^2 = (-4)^2 = 16`ï¼›å½“l=3æ—¶ï¼Œå¢åŠ `(-sum[3])^2 = (-6)^2 = 36`ã€‚  
   - æ¯æ›´æ–°ä¸€ä¸ª`pre`å€¼ï¼Œçº¢è‰²åƒç´ å—é€æ¸å¢åŠ ï¼Œæ’­æ”¾â€œæ²™æ²™â€çš„éŸ³æ•ˆã€‚  

5. **ç»“æœè¾“å‡º**ï¼š  
   - å½“æ‰€æœ‰rå¤„ç†å®Œæ¯•ï¼Œå±å¹•ä¸­å¤®æ˜¾ç¤ºæœ€ç»ˆç»“æœï¼ˆæ¯”å¦‚æ ·ä¾‹1çš„75ï¼‰ï¼Œç”¨é»„è‰²åƒç´ å—è¡¨ç¤ºï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ¬é¢˜çš„æ ¸å¿ƒæŠ€å·§ï¼ˆå‰ç¼€å’Œ+äºŒé¡¹å¼å®šç†+æ±‚å’Œé¡ºåºä¼˜åŒ–ï¼‰å¯ç”¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
- **å­æ®µå’Œçš„å¹‚æ¬¡å’Œ**ï¼šæ¯”å¦‚æ±‚æ‰€æœ‰å­æ®µå’Œçš„å¹³æ–¹å’Œã€ç«‹æ–¹å’Œç­‰ã€‚  
- **äºŒç»´å­çŸ©é˜µå’Œçš„å¹‚æ¬¡å’Œ**ï¼šå°†å‰ç¼€å’Œæ‰©å±•åˆ°äºŒç»´ï¼Œç”¨ç±»ä¼¼çš„æ–¹æ³•å¤„ç†ã€‚  
- **å¸¦æƒå­æ®µå’Œçš„å¹‚æ¬¡å’Œ**ï¼šæ¯”å¦‚æ¯ä¸ªå…ƒç´ æœ‰ä¸€ä¸ªæƒé‡ï¼Œæ±‚å­æ®µå’Œçš„å¹‚æ¬¡ä¹˜ä»¥æƒé‡çš„å’Œã€‚  

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1616** - æ•°çš„å¹‚æ¬¡å’Œ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è¦æ±‚è®¡ç®—`1^k + 2^k + ... + n^k`ï¼Œéœ€è¦ç”¨åˆ°å‰ç¼€å’Œå’Œå¿«é€Ÿå¹‚ï¼Œæ˜¯å·©å›ºå¹‚æ¬¡è®¡ç®—çš„åŸºç¡€é¢˜ã€‚  

2. **æ´›è°· P2261** - ç»Ÿè®¡å­çŸ©é˜µ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è¦æ±‚ç»Ÿè®¡å’Œä¸è¶…è¿‡Kçš„å­çŸ©é˜µæ•°é‡ï¼Œéœ€è¦ç”¨åˆ°äºŒç»´å‰ç¼€å’Œå’ŒåŒæŒ‡é’ˆï¼Œæ˜¯å‰ç¼€å’Œçš„è¿›é˜¶åº”ç”¨ã€‚  

3. **æ´›è°· P3390** - çŸ©é˜µå¿«é€Ÿå¹‚  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è¦æ±‚è®¡ç®—çŸ©é˜µçš„å¹‚æ¬¡ï¼Œéœ€è¦ç”¨åˆ°å¿«é€Ÿå¹‚çš„æ€æƒ³ï¼Œæ˜¯å¹‚æ¬¡è®¡ç®—çš„æ‹“å±•é¢˜ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªyuhong056ï¼‰**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ²¡æœ‰æ³¨æ„åˆ°æ¨¡è¿ç®—ä¸­çš„è´Ÿæ•°å¤„ç†ï¼Œå¯¼è‡´ç»“æœé”™è¯¯ã€‚åæ¥é€šè¿‡å°†è´Ÿæ•°åŠ ä¸ŠMODå†å–æ¨¡ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚â€  
**ç‚¹è¯„**ï¼šæ¨¡è¿ç®—ä¸­çš„è´Ÿæ•°å¤„ç†æ˜¯å¸¸è§çš„å‘ç‚¹ï¼Œä¸€å®šè¦è®°ä½â€œè´Ÿæ•°å–æ¨¡ç­‰äºæ­£æ•°å–æ¨¡åŠ ä¸ŠMODâ€ï¼ˆæ¯”å¦‚`-1 % MOD = MOD-1`ï¼‰ã€‚è¿™ä¸ªç»éªŒæé†’æˆ‘ä»¬ï¼Œåœ¨å¤„ç†æ¨¡è¿ç®—æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ç¬¦å·é—®é¢˜ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[ABC399F] Range Power Sumâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£**å‰ç¼€å’Œ**ã€**äºŒé¡¹å¼å®šç†**å’Œ**æ±‚å’Œé¡ºåºä¼˜åŒ–**çš„æ ¸å¿ƒæ€æƒ³ã€‚è®°ä½ï¼Œæ•°å­¦æ¨å¯¼æ˜¯è§£å†³ç»„åˆé—®é¢˜çš„å…³é”®ï¼Œè€Œå‰ç¼€å’Œæ˜¯ä¼˜åŒ–çš„â€œåˆ©å™¨â€ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š198.22ç§’
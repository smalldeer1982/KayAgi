# 题目信息

# [ABC166D] I hate Factorization

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc166/tasks/abc166_d

$ A^5-B^5\ =\ X $ を満たす整数の組 $ (A,B) $ をひとつ示してください。 ただし、与えられる $ X $ に対して、条件を満たす整数の組 $ (A,B) $ が存在することが保証されています。

## 说明/提示

### 制約

- $ 1\ \leq\ X\ \leq\ 10^9 $
- $ X $ は整数である。
- 条件を満たす整数の組 $ (A,B) $ が存在する。

### Sample Explanation 1

$ A=2,B=-1 $ のとき、$ A^5-B^5 $ の値は $ 33 $ になります。

## 样例 #1

### 输入

```
33```

### 输出

```
2 -1```

## 样例 #2

### 输入

```
1```

### 输出

```
0 -1```

# AI分析结果



---
# 💡 Kay的C++算法解析：[ABC166D] I hate Factorization 深入学习指南 💡

<introduction>
今天我们来一起分析“[ABC166D] I hate Factorization”这道题。题目要求找到满足 \( A^5 - B^5 = X \) 的整数对 \( (A,B) \)，看起来需要数学技巧，其实通过巧妙的枚举就能解决。本指南会带大家理清思路，掌握核心技巧！
</introduction>

## 1. 题目解读与核心算法识别

✨ **本题主要考察**：枚举算法的应用

🗣️ **初步分析**：
解决这道题的关键在于“枚举”——通过遍历可能的 \( A \) 和 \( B \) 的值，找到满足条件的解。枚举就像在一个小范围内“逐个试答案”，但关键是要找到合适的枚举范围，避免“试得太多”而超时。

在本题中，五次方的增长速度非常快。比如 \( 120^5 - 119^5 \) 已经超过 \( 10^9 \)（题目中 \( X \) 的最大值），所以 \( A \) 和 \( B \) 的绝对值不可能超过 120（否则它们的五次方差会远大于 \( X \)）。因此，我们只需要在 \( -120 \) 到 \( 120 \) 的范围内枚举 \( A \) 和 \( B \)，就能找到解。

- **题解思路**：所有题解都采用双重循环枚举 \( A \) 和 \( B \)，计算 \( A^5 - B^5 \) 并与 \( X \) 比较，找到第一个符合条件的解。
- **核心难点**：确定枚举范围。若范围太大（如 \( -1000 \) 到 \( 1000 \)），虽然能找到解但效率低；若范围太小（如 \( -100 \) 到 \( 100 \)），可能漏掉解。优质题解通过计算五次方的增长速度，将范围缩小到 \( -120 \) 到 \( 120 \)，既高效又安全。
- **可视化设计**：我们可以设计一个8位像素风格的动画，用网格表示 \( A \) 和 \( B \) 的取值，每枚举一对 \( (A,B) \)，像素块会闪烁并显示当前计算的 \( A^5 - B^5 \) 值，匹配时高亮并播放“叮”的音效。

---

## 2. 精选优质题解参考

<eval_intro>
我从思路清晰度、代码规范性、算法效率等方面筛选了以下优质题解（均≥4星），它们在枚举范围的选择和代码实现上尤为出色。
</eval_intro>

**题解一：作者：冷却心**
* **点评**：此题解思路直接，明确指出枚举范围是 \( -150 \) 到 \( 150 \)（实际 \( 120 \) 足够，但扩大范围更保险）。代码简洁，用 `ll` 定义长整型避免溢出，变量名清晰。特别是注释“long long别忘记”提醒了关键细节，对新手很友好。

**题解二：作者：wangyi_c**
* **点评**：此题解将五次方计算封装成函数 `k(a,b)`，代码结构更清晰。枚举范围精确到 \( -120 \) 到 \( 120 \)，通过数学分析缩小范围，效率更高。输出部分直接返回，避免无效循环，体现了代码优化意识。

**题解三：作者：Fr0sTy**
* **点评**：此题解用 `doit` 函数计算五次方，逻辑明确。枚举范围合理（\( -120 \) 到 \( 120 \)），代码简洁且无冗余。特别强调“一定要开long long”，这是解决此类问题的关键，避免了溢出错误。

---

## 3. 核心难点辨析与解题策略

<difficulty_intro>
在解决这道题的过程中，我们会遇到以下核心难点。结合优质题解的经验，我为大家总结了应对策略：
</difficulty_intro>

1.  **关键点1：如何确定枚举范围？**
    * **分析**：五次方的增长速度极快。例如，\( 120^5 = 24883200000 \)，\( 119^5 = 24760990699 \)，两者的差约 \( 1.2 \times 10^8 \)，远小于 \( 10^9 \)；而 \( 150^5 - 149^5 \) 会超过 \( 10^9 \)。因此，\( A \) 和 \( B \) 的绝对值不超过 \( 150 \) 即可覆盖所有可能的解。优质题解通过计算验证了这一点，将范围缩小到 \( -120 \) 到 \( 120 \)，既高效又安全。
    * 💡 **学习笔记**：遇到需要枚举的问题时，先分析目标值的增长速度，缩小枚举范围是关键！

2.  **关键点2：如何避免五次方计算溢出？**
    * **分析**：\( 120^5 \) 约 \( 2.5 \times 10^{10} \)，超出了 `int` 的范围（约 \( 2 \times 10^9 \)）。因此，必须使用 `long long` 类型存储五次方结果。优质题解普遍使用 `long long` 或 `#define int long long` 来避免溢出。
    * 💡 **学习笔记**：涉及大数运算时，优先使用 `long long` 类型！

3.  **关键点3：如何提高枚举效率？**
    * **分析**：双重循环的时间复杂度是 \( O(n^2) \)，当 \( n=240 \)（\( -120 \) 到 \( 120 \) 共241个数）时，总次数约 \( 241^2 \approx 5.8 \times 10^4 \)，完全在时间限制内。优质题解通过缩小范围，确保了枚举的高效性。
    * 💡 **学习笔记**：合理缩小枚举范围，能大幅减少计算量！

### ✨ 解题技巧总结
<summary_best_practices>
- **范围分析**：通过数学分析（如计算相邻数的五次方差）确定枚举范围，避免无效枚举。
- **类型选择**：使用 `long long` 存储大数，防止溢出。
- **提前终止**：找到解后立即返回，避免不必要的循环。
</summary_best_practices>

---

## 4. C++核心代码实现赏析

<code_intro_overall>
我们综合了多个优质题解的思路，给出一个简洁、高效的通用核心实现。
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：此代码综合了冷却心、wangyi_c等题解的思路，枚举范围设为 \( -120 \) 到 \( 120 \)，确保覆盖所有可能的解，同时高效简洁。
* **完整核心代码**：
    ```cpp
    #include <iostream>
    using namespace std;

    long long pow5(long long x) {
        return x * x * x * x * x; // 计算x的五次方
    }

    int main() {
        long long X;
        cin >> X;
        // 枚举A和B的范围：-120到120
        for (long long A = -120; A <= 120; ++A) {
            for (long long B = -120; B <= 120; ++B) {
                if (pow5(A) - pow5(B) == X) {
                    cout << A << " " << B << endl;
                    return 0; // 找到解后立即退出
                }
            }
        }
        return 0;
    }
    ```
* **代码解读概要**：
    > 代码首先定义了计算五次方的函数 `pow5`，然后读取输入 \( X \)。通过双重循环枚举 \( A \) 和 \( B \)（范围 \( -120 \) 到 \( 120 \)），计算 \( A^5 - B^5 \) 并与 \( X \) 比较。找到第一个符合条件的 \( (A,B) \) 后输出并结束程序，确保高效。

---
<code_intro_selected>
接下来，我们剖析优质题解中的核心代码片段，学习它们的亮点。
</code_intro_selected>

**题解一：作者：冷却心**
* **亮点**：代码简洁，直接枚举 \( -150 \) 到 \( 150 \)，覆盖所有可能的解，且明确提示“long long别忘记”。
* **核心代码片段**：
    ```cpp
    ll f(ll x){return x*x*x*x*x;};//5次方函数
    int main(){
        cin>>y;
        for(int i=-150;i<=150;i++){
            for(int j=-150;j<=150;j++){
                if(f(i)-f(j)==y){
                    printf("%d %d",i,j);
                    return 0;
                }
            }
        }
    } 
    ```
* **代码解读**：
    > `f(x)` 函数计算 \( x \) 的五次方，双重循环枚举 \( i \) 和 \( j \)（范围 \( -150 \) 到 \( 150 \)）。当 \( f(i)-f(j) \) 等于输入 \( y \) 时，输出结果并返回。这里扩大枚举范围到 \( -150 \) 是为了更保险，确保覆盖所有可能的解。
* 💡 **学习笔记**：适当扩大枚举范围（如 \( -150 \) 到 \( 150 \)）可以避免因计算误差漏掉解。

**题解二：作者：wangyi_c**
* **亮点**：将五次方计算封装成函数 `k(a,b)`，代码结构更清晰，枚举范围精确到 \( -120 \) 到 \( 120 \)，效率更高。
* **核心代码片段**：
    ```cpp
    int k(int a,int b){//计算方程函数
        return a*a*a*a*a-b*b*b*b*b;
    }
    signed main(){
        cin>>x;
        for(int i=-120;i<=120;i++){
            for(int j=-120;j<=120;j++){
                if(k(i,j)==x){//发现了解
                    cout<<i<<" "<<j;
                    return 0;
                }
            }
        }
    }
    ```
* **代码解读**：
    > `k(a,b)` 函数直接返回 \( a^5 - b^5 \) 的值。主函数中枚举 \( i \) 和 \( j \)（范围 \( -120 \) 到 \( 120 \)），调用 `k(i,j)` 与 \( x \) 比较。精确的范围选择减少了循环次数，提高了效率。
* 💡 **学习笔记**：函数封装能让代码更易读、易维护。

**题解三：作者：Fr0sTy**
* **亮点**：用 `doit` 函数计算五次方，代码逻辑明确，强调 `long long` 的重要性。
* **核心代码片段**：
    ```cpp
    long long doit(long long n) { return n*n*n*n*n;}
    int main() {
        scanf("%lld",&x);
        for(int i=-120;i<=120;i++) {
            for(int j=-120;j<=120;j++) {
                if(doit(i)-doit(j)==x) {
                    printf("%d %d\n",i,j);
                    return 0;
                }
            }
        }
    }
    ```
* **代码解读**：
    > `doit(n)` 函数计算 \( n \) 的五次方。主函数枚举 \( i \) 和 \( j \)（范围 \( -120 \) 到 \( 120 \)），调用 `doit` 计算五次方差，找到解后输出。代码简洁，无冗余。
* 💡 **学习笔记**：函数命名清晰（如 `doit`）能让代码更易理解。

-----

## 5\. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了更直观地看到枚举过程，我们设计了一个“像素枚举小探险家”动画，用8位复古风格展示 \( A \) 和 \( B \) 的枚举过程！
</visualization_intro>

  * **动画演示主题**：像素探险家找解大冒险！

  * **核心演示内容**：一个像素小人（代表枚举指针）在 \( A \) 和 \( B \) 的网格地图（范围 \( -120 \) 到 \( 120 \)）中移动，每移动到一个格子（代表一对 \( (A,B) \)），就计算 \( A^5 - B^5 \)，如果等于 \( X \)，格子会闪烁金色，播放“叮”的音效，任务完成！

  * **设计思路简述**：8位像素风格（如FC游戏画面）让学习更轻松；网格地图直观展示枚举范围；音效和颜色变化强化关键操作记忆；“小关卡”（每完成一个格子的枚举）增加成就感。

  * **动画帧步骤与交互关键点**：

    1.  **场景初始化**：
          * 屏幕中间显示一个 \( 241 \times 241 \) 的像素网格（对应 \( -120 \) 到 \( 120 \)），每个格子标注 \( (A,B) \) 的值。
          * 控制面板有“开始/暂停”“单步”“重置”按钮和速度滑块（调节枚举速度）。
          * 播放8位风格的轻快背景音乐（类似《超级马里奥》的主题旋律）。

    2.  **枚举启动**：
          * 像素小人从左上角（\( A=-120, B=-120 \)）出发，每移动一格（代表枚举一对 \( (A,B) \)），当前格子会变亮（如浅蓝色）。
          * 屏幕上方显示当前计算的 \( A^5 - B^5 \) 值，与 \( X \) 对比（如 \( X=33 \) 时显示“当前差：-31，目标：33”）。

    3.  **关键步骤演示**：
          * **移动音效**：每移动一格，播放“滴答”声（类似指针移动）。
          * **匹配高亮**：当 \( A^5 - B^5 = X \) 时，当前格子变为金色并闪烁，播放“叮~”的胜利音效。
          * **数据更新**：五次方的计算过程用动态文字展示（如 \( 2^5 = 32 \)，\( (-1)^5 = -1 \)，差为 \( 32 - (-1) = 33 \)）。

    4.  **AI自动演示**：
          * 点击“AI演示”按钮，像素小人会自动快速枚举，学习者可以观察整个过程，理解枚举的高效性。

    5.  **结束状态**：
          * 找到解后，屏幕显示“成功！”，金色格子持续闪烁，背景音乐切换为庆祝旋律。

  * **旁白提示**：
      * “看，探险家现在在 \( A=-120, B=-120 \)，计算差是 \( (-120)^5 - (-120)^5 = 0 \)，不等于 \( X \)，继续探索！”
      * “哇，这里 \( A=2, B=-1 \)，差正好是 \( 33 \)！找到解啦！”

<visualization_conclusion>
通过这个像素动画，我们不仅能“看”到枚举的每一步，还能在趣味中理解为什么缩小范围就能高效解决问题！
</visualization_conclusion>

-----

## 6\. 拓展练习与相似问题思考

<similar_problems_intro>
枚举算法在编程中应用广泛，掌握缩小范围的技巧后，我们可以解决更多类似问题！
</similar_problems_intro>

  * **通用思路/技巧迁移**：
      * 枚举不仅用于本题，还适用于“找满足条件的数对”（如两数之和）、“验证数学猜想”（如哥德巴赫猜想）、“排列组合问题”（如选数问题）等场景。关键是通过分析问题特性，缩小枚举范围。

  * **练习推荐 (洛谷)**：
    1.  **洛谷 P1036 选数** 
          * 🗣️ **推荐理由**：需要枚举所有可能的组合，计算它们的和是否为素数，练习枚举范围的控制和组合枚举技巧。
    2.  **洛谷 P1157 组合的输出** 
          * 🗣️ **推荐理由**：要求输出所有组合，练习枚举的顺序控制和去重，巩固枚举思想。
    3.  **洛谷 P1618 三连击（升级版）** 
          * 🗣️ **推荐理由**：需要枚举三个数的范围，结合数学分析缩小范围，与本题思路类似。

-----

## 7\. 学习心得与经验分享 (若有)

<insights_intro>
部分题解提到了关键经验，这些对我们很有帮助：
</insights_intro>

> **参考经验 (来自 冷却心)**：“long long别忘记”。
>
> **点评**：五次方的结果可能很大（如 \( 120^5 \approx 2.5 \times 10^{10} \)），超出 `int` 的范围（约 \( 2 \times 10^9 \)）。使用 `long long` 能避免溢出错误，这是这类问题的关键细节！

-----

<conclusion>
通过今天的分析，我们掌握了用枚举法解决 \( A^5 - B^5 = X \) 的问题，关键是通过数学分析缩小枚举范围，并注意数据类型的选择。希望大家在练习中多思考、多尝试，下次见！💪
</conclusion>

-----

---
处理用时：128.17秒
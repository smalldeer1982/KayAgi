# 题目信息

# [ABC108B] Ruined Square

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc108/tasks/abc108_b

$ xy $ 平面上に正方形があり、$ 4 $ つの頂点の座標は反時計回りに順番に $ (x_1,y_1),(x_2,y_2),(x_3,y_3),(x_4,y_4) $ です。 なお、$ x $ 軸は右向きに、$ y $ 軸は上向きに取ることにします。

高橋君は、これら $ 4 $ つの座標のうち $ (x_3,y_3),(x_4,y_4) $ を忘れてしまいました。

$ x_1,x_2,y_1,y_2 $ が与えられるので、$ x_3,y_3,x_4,y_4 $ を復元してください。なお、これらの条件から、$ x_3,y_3,x_4,y_4 $ は一意に存在し、整数となることが証明できます。

## 说明/提示

### 制約

- $ |x_1|,|y_1|,|x_2|,|y_2|\ \leq\ 100 $
- $ (x_1,y_1) $ ≠ $ (x_2,y_2) $
- 入力はすべて整数である

### Sample Explanation 1

$ 4 $ 点 $ (0,0),(0,1),(-1,1),(-1,0) $ は、この順に正方形を反時計回りに見たときの $ 4 $ 頂点をなします。 $ (x_3,y_3)=(1,1),(x_4,y_4)=(1,0) $ は、頂点が時計回りに並んでいるので適さないことに注意してください。

## 样例 #1

### 输入

```
0 0 0 1```

### 输出

```
-1 1 -1 0```

## 样例 #2

### 输入

```
2 3 6 6```

### 输出

```
3 10 -1 7```

## 样例 #3

### 输入

```
31 -41 -59 26```

### 输出

```
-126 -64 -36 -131```

# AI分析结果



---
# 💡 Kay的C++算法解析：[ABC108B] Ruined Square 深入学习指南 💡

<introduction>
今天我们来一起分析“[ABC108B] Ruined Square”这道C++几何题。这道题需要我们根据正方形的前两个顶点坐标，推导出后两个顶点的坐标。通过本指南，你将理解如何用几何规律解决问题，并掌握相关编程技巧。
</introduction>

## 1. 题目解读与核心算法识别

✨ **本题主要考察**：数学（几何坐标变换）

🗣️ **初步分析**：
> 解决这道题的关键在于利用正方形的几何特性，找到顶点间的坐标变换规律。正方形的相邻边长度相等且互相垂直（逆时针旋转90度），这是本题的核心数学依据。简单来说，就像你在纸上画正方形时，每一步的转向都是固定的直角，坐标变化也有规律可循。

题目要求根据已知的两个顶点（逆时针顺序的前两个点），推导出后两个顶点。核心难点在于如何用数学公式描述这种坐标变换。优质题解通过观察相邻顶点的坐标差，发现了旋转90度的向量规律：若从点1到点2的向量是$(dx, dy)$，那么从点2到点3的向量应是$(-dy, dx)$（逆时针旋转90度），同理可推导后续点。

可视化设计思路：我们可以用像素网格模拟平面坐标系，用不同颜色的像素点表示已知点（如红色）和待求点（如蓝色）。动画中，从点1到点2会有一个向量箭头（绿色），然后演示这个向量逆时针旋转90度生成新向量（黄色），从而定位点3，再重复此过程找到点4。关键步骤会高亮向量的变化和坐标的计算过程。

---

## 2. 精选优质题解参考

<eval_intro>
经过对题解的思路清晰度、代码规范性和算法有效性评估，以下题解评分4.5星（满分5星），值得重点学习：
</eval_intro>

**题解一：来源：用户“μηδσ”**
* **点评**：这份题解的亮点在于用直观的几何分析推导出坐标公式。作者通过画图观察相邻顶点的坐标差，发现了旋转90度的向量规律（如dx和dy的变换关系），思路简洁易懂。代码实现直接应用了推导的公式，变量命名清晰（如x3、y3直接对应题目中的点3），逻辑简单高效。从实践角度看，代码无需复杂数据结构，仅用基础算术运算即可解决问题，非常适合竞赛场景。

---

## 3. 核心难点辨析与解题策略

<difficulty_intro>
在解决这道题的过程中，我们需要重点关注以下三个核心问题：
</difficulty_intro>

1.  **关键点1**：如何确定正方形顶点的逆时针排列规律？
    * **分析**：正方形的相邻边需满足长度相等且逆时针旋转90度。例如，从点1到点2的向量是$(dx, dy)$，那么点2到点3的向量应为$(-dy, dx)$（因为逆时针旋转90度的向量变换是$(a,b)→(-b,a)$）。这一步需要明确向量旋转的方向（逆时针），避免与顺时针混淆（顺时针旋转是$(a,b)→(b,-a)$）。
    * 💡 **学习笔记**：逆时针旋转90度的向量变换公式是$(dx, dy)→(-dy, dx)$。

2.  **关键点2**：如何推导后两个顶点的坐标公式？
    * **分析**：已知点1$(x1,y1)$和点2$(x2,y2)$，则向量dx = x2 - x1，dy = y2 - y1。点3的坐标是点2加上旋转后的向量，即$x3 = x2 - dy$，$y3 = y2 + dx$（因为旋转后的向量是$(-dy, dx)$）。同理，点4的坐标是点3减去原向量dx和dy（因为点3到点4的向量应与点1到点2的向量相反），即$x4 = x3 - dx$，$y4 = y3 - dy$。
    * 💡 **学习笔记**：利用向量旋转和向量叠加，可以逐步推导每个顶点的坐标。

3.  **关键点3**：如何确保计算的准确性？
    * **分析**：需要注意坐标的符号问题（如dy是y2 - y1，旋转后的向量是负的dy）。代码中应直接代入公式计算，避免手动推导时的符号错误。例如，样例1中输入(0,0)和(0,1)，dx=0-0=0，dy=1-0=1，代入公式得x3=0 - 1 = -1，y3=1 + 0 = 1，与样例输出一致。
    * 💡 **学习笔记**：严格按照推导的公式编写代码，避免符号或运算顺序错误。

### ✨ 解题技巧总结
<summary_best_practices>
-   **几何规律抽象**：遇到几何问题时，先画出图形，观察点与点之间的位置关系，抽象出数学规律（如向量变换）。
-   **公式验证**：推导公式后，用样例输入验证是否正确（如样例1代入公式是否得到正确输出）。
-   **符号敏感性**：注意向量的方向（逆时针/顺时针），确保旋转后的坐标符号正确。
</summary_best_practices>

---

## 4. C++核心代码实现赏析

<code_intro_overall>
本题的核心是应用推导的坐标公式，代码实现非常简洁。以下是综合优质题解的通用核心实现：
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：此代码直接来自用户“μηδσ”的题解，因其逻辑清晰、完全符合题目要求而选为代表。
* **完整核心代码**：
    ```cpp
    #include <iostream>
    using namespace std;

    int main() {
        int x1, y1, x2, y2;
        cin >> x1 >> y1 >> x2 >> y2;
        int dx = x2 - x1; // 向量dx: 点2相对于点1的x差
        int dy = y2 - y1; // 向量dy: 点2相对于点1的y差
        // 计算点3的坐标（点2 + 逆时针旋转90度的向量）
        int x3 = x2 - dy;
        int y3 = y2 + dx;
        // 计算点4的坐标（点3 - 原向量dx, dy）
        int x4 = x3 - dx;
        int y4 = y3 - dy;
        cout << x3 << " " << y3 << " " << x4 << " " << y4 << endl;
        return 0;
    }
    ```
* **代码解读概要**：
    > 代码首先读取前两个点的坐标，计算它们的向量差dx和dy。然后根据逆时针旋转90度的向量变换规则，计算点3的坐标（x2 - dy, y2 + dx）。最后，点4的坐标通过点3减去原向量dx和dy得到。整个过程仅用基础算术运算，高效且易懂。

---
<code_intro_selected>
接下来，我们分析优质题解的核心代码片段，理解其实现细节：
</code_intro_selected>

**题解一：来源：用户“μηδσ”**
* **亮点**：直接应用几何推导的公式，代码简洁高效，无需复杂数据结构。
* **核心代码片段**：
    ```cpp
    x3 = x2 - (y2 - y1);
    y3 = y2 + (x2 - x1);
    x4 = x3 - (x2 - x1);
    y4 = y3 - (y2 - y1);
    ```
* **代码解读**：
    > 这段代码是核心计算逻辑。`(y2 - y1)`是向量的dy分量，`x2 - x1`是向量的dx分量。点3的x坐标是x2减去dy（即x2 - (y2 - y1)），y坐标是y2加上dx（即y2 + (x2 - x1)），这对应逆时针旋转90度的向量变换。点4的坐标则是点3减去原向量dx和dy（即x3 - (x2 - x1)，y3 - (y2 - y1)），确保正方形的边长相等。
* 💡 **学习笔记**：几何问题的代码往往直接反映数学推导，理解公式是编写正确代码的关键。

-----

## 5\. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了更直观地理解正方形顶点的推导过程，我们设计一个“像素方块找朋友”的复古动画，用8位像素风格展示坐标变换！
</visualization_intro>

  * **动画演示主题**：`像素正方形大冒险`

  * **核心演示内容**：展示从已知点1、点2出发，如何通过向量旋转找到点3、点4，最终形成完整的正方形。

  * **设计思路简述**：采用FC红白机风格的像素网格（20x20像素块），用不同颜色区分已知点（红色）、待求点（蓝色）和向量（绿色/黄色）。通过动态箭头和坐标变化，让学习者“看到”向量旋转的过程，配合音效强化关键步骤记忆。

  * **动画帧步骤与交互关键点**：

    1.  **场景初始化**：
          * 屏幕中央显示16x16的像素网格（每个格子代表1单位坐标），左侧显示控制面板（单步/自动按钮、速度滑块）。
          * 播放8位风格的轻快背景音乐（类似《超级马力欧》的过场音乐）。
          * 输入样例1的点1(0,0)（红色像素块）和点2(0,1)（红色像素块）。

    2.  **计算向量dx和dy**：
          * 从点1到点2生成绿色箭头（向量dx=0, dy=1），旁边显示“dx=0，dy=1”的文字。
          * 播放“叮”的音效（类似选择道具声）。

    3.  **推导点3**：
          * 绿色箭头逆时针旋转90度（变为黄色箭头，向量(-1,0)），箭头从点2出发，末端到达点3(-1,1)（蓝色像素块亮起）。
          * 屏幕右侧同步显示公式“x3 = x2 - dy = 0 - 1 = -1；y3 = y2 + dx = 1 + 0 = 1”，关键数字高亮（如-1和1）。
          * 播放“唰”的音效（类似绘制线条声）。

    4.  **推导点4**：
          * 从点3出发，生成与原向量dx=0, dy=1相反的向量（向下箭头），末端到达点4(-1,0)（蓝色像素块亮起）。
          * 显示公式“x4 = x3 - dx = -1 - 0 = -1；y4 = y3 - dy = 1 - 1 = 0”。
          * 播放“咚”的音效（类似方块落地声）。

    5.  **完成正方形**：
          * 四个点用白色线条连接成正方形，播放“胜利”音效（上扬的旋律）。
          * 显示“成功找到正方形！”的文字，像素烟花（闪烁的小星星）在屏幕上方绽放。

    6.  **交互控制**：
          * 支持单步执行（每点击一次按钮，播放一个步骤的动画）、自动播放（按滑块调整的速度连续播放）、重置（清空所有点和箭头）。

  * **旁白提示**：
      * （向量生成时）“看！点1到点2的向量是(dx, dy)，这是正方形的一条边～”
      * （旋转向量时）“逆时针旋转90度后，新向量变成(-dy, dx)，这样就能找到点3啦！”
      * （完成时）“四个点连起来就是一个完美的正方形～是不是很简单？”

<visualization_conclusion>
通过这个像素动画，我们不仅能直观看到向量旋转的过程，还能通过音效和颜色变化记住关键步骤。下次遇到类似问题，你也可以像动画中的小探险家一样，轻松推导出答案！
</visualization_conclusion>

-----

## 6\. 拓展练习与相似问题思考

<similar_problems_intro>
掌握了本题的向量旋转技巧后，我们可以尝试解决更多几何问题，看看这些技巧如何迁移：
</similar_problems_intro>

  * **通用思路/技巧迁移**：
      * 向量旋转（逆时针/顺时针90度）的公式可用于解决其他正方形/矩形顶点推导问题。
      * 几何问题中，通过画图抽象向量关系是关键（如已知矩形三个顶点求第四个顶点）。
      * 坐标变换的符号敏感性（如逆时针与顺时针的区别）需特别注意。

  * **练习推荐 (洛谷)**：
    1.  **洛谷 P5735** - `计算几何（多边形面积）`
          * 🗣️ **推荐理由**：这道题需要计算多边形面积，能帮助你巩固向量叉乘的应用，理解几何问题的数学本质。
    2.  **洛谷 P1355** - `神秘大三角`
          * 🗣️ **推荐理由**：此题涉及三角形顶点的坐标变换，通过向量分析可以快速解决，适合练习几何思维。
    3.  **洛谷 P2089** - `烤鸡`（虽然题目名无关，但部分子问题涉及坐标排列）
          * 🗣️ **推荐理由**：这道题的部分变种需要枚举坐标排列，结合几何规律筛选有效解，能锻炼综合解题能力。

-----

## 7\. 学习心得与经验分享 (若有)

<insights_intro>
本题解中未明确包含作者的个人学习心得，但我们可以总结一个重要经验：
</insights_intro>

> **通用经验**：遇到几何问题时，先画出图形，用具体数值（如样例输入）验证推导的公式是否正确。例如，本题中用样例1的输入代入公式，若得到正确输出，说明公式推导无误；若错误，则需重新检查向量旋转的方向或符号。

> **点评**：这个经验提醒我们，几何问题的公式推导后必须通过样例验证。动手计算样例不仅能避免符号错误，还能加深对公式的理解。下次解题时，不妨先拿样例“试手”哦！

-----

<conclusion>
本次关于“[ABC108B] Ruined Square”的分析就到这里。希望你不仅掌握了如何推导正方形顶点坐标，还学会了用向量旋转解决几何问题的思路。记住，几何问题的关键是“画出来，找规律”，多练习就能熟能生巧！下次见～💪
</conclusion>

---
处理用时：115.76秒
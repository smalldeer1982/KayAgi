# é¢˜ç›®ä¿¡æ¯

# [ABC378D] Count Simple Paths

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ª $H$ è¡Œ $W$ åˆ—çš„ç½‘æ ¼ï¼›ä»¤ $(i, j)$ ä¸ºç½‘æ ¼ä¸­ä»ä¸Šåˆ°ä¸‹ç¬¬ $i$ è¡Œã€ä»å·¦åˆ°å³ç¬¬ $j$ åˆ—çš„æ ¼å­ã€‚ 

å½“ $ S_{i,j} $ ä¸º `.` æ—¶ï¼Œæ ¼å­ä¸ºç©ºæ ¼ï¼›å½“ $ S_{i,j} $ ä¸º `#` æ—¶ï¼Œæ ¼å­ä¸ºéšœç¢ç‰©ã€‚

è¯·è®¡ç®—ä»æŸä¸ªç©ºæ ¼å‡ºå‘ï¼Œç»è¿‡ $K$ æ¬¡ç§»åŠ¨ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ï¼Œä¸ç»è¿‡éšœç¢ç‰©ä¸”ä¸é‡å¤ç»è¿‡åŒä¸€ä¸ªæ ¼å­çš„è·¯å¾„æ•°ã€‚

å…·ä½“åœ°ï¼Œç»Ÿè®¡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ï¼Œé•¿åº¦ä¸º $K+1$ çš„åºåˆ— $((i_0,j_0),(i_1,j_1),\dots,(i_K,j_K))$

- å¯¹äºæ¯ä¸ª $ 0\ \leq\ k\ \leq\ K $ï¼Œéƒ½æœ‰ $ 1\ \leq\ i_k\ \leq\ H,\ 1\ \leq\ j_k\ \leq\ W $ï¼Œä¸” $ S_{i_k,j_k} $ ä¸º `.`ã€‚
- å¯¹äºæ¯ä¸ª $ 0\ \leq\ k\ \leq\ K-1 $ï¼Œæœ‰ $ |i_{k+1}-i_k|\ +\ |j_{k+1}-j_k|\ =\ 1 $ã€‚
- å¯¹äºæ¯ä¸ª $ 0\ \leq\ k\ <\ l\ \leq\ K $ï¼Œæœ‰ $ (i_k,j_k)\neq\ (i_l,j_l) $ã€‚

## è¯´æ˜/æç¤º

-  $1 \leq H, W \leq 10$
-  $1 \leq K \leq 11$
-  $H$, $W$, å’Œ $K$ å‡ä¸ºæ•´æ•°ã€‚
-  æ¯ä¸ª $S_{i,j}$ å‡ä¸º `.` æˆ– `#`ã€‚
-  ç½‘æ ¼ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªæ ¼å­ä¸ºç©ºæ ¼ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 2 2
.#
..```

### è¾“å‡º

```
2```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2 3 1
.#.
#.#```

### è¾“å‡º

```
0```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10 10 11
....#..#..
.#.....##.
..#...##..
...#......
......##..
..#......#
#........#
..##......
.###....#.
...#.....#```

### è¾“å‡º

```
218070```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ABC378D] Count Simple Paths æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰+ å›æº¯åº”ç”¨  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œCount Simple Pathsâ€é—®é¢˜ï¼Œå…³é”®åœ¨äº**éå†æ‰€æœ‰å¯èƒ½çš„è·¯å¾„**â€”â€”ä»æ¯ä¸ªç©ºæ ¼å‡ºå‘ï¼Œèµ°æ°å¥½Kæ­¥ï¼Œä¸”ä¸é‡å¤ç»è¿‡ä»»ä½•æ ¼å­ã€‚è¿™å°±åƒåœ¨ä¸€ä¸ªè¿·å®«é‡Œï¼Œä»æ¯ä¸ªèµ·ç‚¹å¼€å§‹ï¼Œå°è¯•æ‰€æœ‰å¯èƒ½çš„èµ°æ³•ï¼Œç›´åˆ°èµ°äº†Kæ­¥ï¼Œç„¶åç»Ÿè®¡æ‰€æœ‰åˆæ³•çš„èµ°æ³•æ•°é‡ã€‚  

**DFSçš„æ ¸å¿ƒæ€æƒ³**ï¼šå¯ä»¥æ¯”å–»ä¸ºâ€œèµ°è¿·å®«æ—¶ï¼Œé‡åˆ°å²”è·¯å°±é€‰ä¸€æ¡èµ°åˆ°åº•ï¼Œèµ°ä¸é€šå†å›å¤´é€‰å¦ä¸€æ¡â€ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªèµ·ç‚¹â€œèµ°ä¸€éè¿·å®«â€ï¼Œè®°å½•æ¯ä¸€æ­¥çš„ä½ç½®ï¼Œé¿å…é‡å¤èµ°åŒä¸€ä¸ªæ ¼å­ï¼ˆå¦åˆ™è·¯å¾„ä¼šå¾ªç¯ï¼‰ï¼Œå½“èµ°åˆ°Kæ­¥æ—¶ï¼Œå°±æŠŠè¿™æ¡è·¯å¾„ç®—å…¥ç­”æ¡ˆã€‚  

**æ ¸å¿ƒæµç¨‹**ï¼š  
1. æšä¸¾æ‰€æœ‰å¯èƒ½çš„èµ·ç‚¹ï¼ˆæ¯ä¸ªç©ºæ ¼ï¼‰ï¼›  
2. å¯¹æ¯ä¸ªèµ·ç‚¹è¿›è¡ŒDFSï¼Œæ¢ç´¢å››ä¸ªæ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ï¼›  
3. ç”¨æ ‡è®°æ•°ç»„è®°å½•å·²èµ°è¿‡çš„æ ¼å­ï¼Œé˜²æ­¢é‡å¤ï¼›  
4. å½“èµ°åˆ°Kæ­¥æ—¶ï¼Œç­”æ¡ˆåŠ 1ï¼›  
5. å›æº¯ï¼ˆå–æ¶ˆå½“å‰æ ¼å­çš„æ ‡è®°ï¼‰ï¼Œç»§ç»­æ¢ç´¢å…¶ä»–æ–¹å‘ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿç½‘æ ¼è¿·å®«ï¼Œæ¯”å¦‚ï¼š  
- ç”¨ä¸åŒé¢œè‰²æ ‡è®°èµ·ç‚¹ï¼ˆçº¢è‰²ï¼‰ã€å½“å‰ä½ç½®ï¼ˆé»„è‰²ï¼‰ã€å·²èµ°è¿‡çš„æ ¼å­ï¼ˆç°è‰²ï¼‰ï¼›  
- æ¯èµ°ä¸€æ­¥ï¼Œç”¨â€œåƒç´ ç§»åŠ¨åŠ¨ç”»â€æ˜¾ç¤ºå½“å‰ä½ç½®çš„å˜åŒ–ï¼›  
- å½“èµ°åˆ°Kæ­¥æ—¶ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œå¹¶ç”¨ç»¿è‰²é—ªçƒæ ‡è®°è¿™æ¡è·¯å¾„ï¼›  
- æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆæ‰‹åŠ¨ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼‰å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºæ‰€æœ‰è·¯å¾„ï¼‰ï¼Œå¸®åŠ©ç†è§£DFSçš„å›æº¯è¿‡ç¨‹ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šzaolongï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸æ¸…æ™°ï¼Œå®Œç¾è´´åˆDFSçš„æ ¸å¿ƒé€»è¾‘ã€‚ä½œè€…ç”¨åŒé‡å¾ªç¯æšä¸¾æ‰€æœ‰èµ·ç‚¹ï¼Œç„¶åè°ƒç”¨`dfs`å‡½æ•°æ¢ç´¢è·¯å¾„ã€‚`dx`å’Œ`dy`æ–¹å‘æ•°ç»„å®šä¹‰äº†ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ï¼Œ`bj`æ•°ç»„æ ‡è®°å·²èµ°è¿‡çš„æ ¼å­ã€‚å½“`step`ç­‰äº`K+1`ï¼ˆå³èµ°äº†Kæ­¥ï¼‰æ—¶ï¼Œç­”æ¡ˆåŠ 1ã€‚ä»£ç ç»“æ„ç®€æ´ï¼Œå˜é‡å‘½åç›´è§‚ï¼ˆæ¯”å¦‚`bj`ä»£è¡¨â€œæ ‡è®°â€ï¼‰ï¼Œå›æº¯å¤„ç†æ­£ç¡®ï¼ˆé€’å½’åå–æ¶ˆæ ‡è®°ï¼‰ï¼Œéå¸¸é€‚åˆåˆå­¦è€…ç†è§£DFSçš„åŸºæœ¬æ¡†æ¶ã€‚  

### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šsjh0626ï¼‰  
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„`dfs`å‡½æ•°è®¾è®¡æ›´è´´è¿‘â€œæ­¥æ•°ç»Ÿè®¡â€çš„ç›´è§‚é€»è¾‘â€”â€”`step`ä»0å¼€å§‹ï¼Œå½“`step`ç­‰äº`K`æ—¶è®¡æ•°ã€‚ä½œè€…ç”¨`vis`æ•°ç»„æ ‡è®°å·²è®¿é—®çš„æ ¼å­ï¼Œé€’å½’æ—¶å…ˆæ ‡è®°å½“å‰ä½ç½®ï¼Œå†æ¢ç´¢å››ä¸ªæ–¹å‘ï¼Œé€’å½’ç»“æŸåå–æ¶ˆæ ‡è®°ã€‚ä»£ç é£æ ¼è§„èŒƒï¼Œ`g`æ•°ç»„å­˜å‚¨ç½‘æ ¼ä¿¡æ¯ï¼Œ`inb`å‡½æ•°åˆ¤æ–­æ˜¯å¦è¶Šç•Œï¼Œè¿™äº›ç»†èŠ‚éƒ½ä½“ç°äº†è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚  

### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼šhjyowlï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„`dfs`å‡½æ•°å‚æ•°`s`è¡¨ç¤ºå½“å‰èµ°äº†å¤šå°‘æ­¥ï¼Œå½“`s`ç­‰äº`K`æ—¶è®¡æ•°ã€‚ä½œè€…ç”¨`st`æ•°ç»„æ ‡è®°å·²èµ°è¿‡çš„æ ¼å­ï¼Œé€’å½’æ—¶å…ˆæ£€æŸ¥è¾¹ç•Œå’Œéšœç¢ï¼Œå†æ ‡è®°å½“å‰ä½ç½®ï¼Œæ¢ç´¢å››ä¸ªæ–¹å‘ã€‚ä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°ï¼Œå°¤å…¶é€‚åˆç†è§£â€œå¦‚ä½•é¿å…é‡å¤è·¯å¾„â€çš„é—®é¢˜ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šå¦‚ä½•é¿å…é‡å¤ç»è¿‡æ ¼å­ï¼Ÿ**  
* **åˆ†æ**ï¼šä½¿ç”¨**æ ‡è®°æ•°ç»„**ï¼ˆå¦‚`bj`ã€`vis`ï¼‰è®°å½•æ¯ä¸ªæ ¼å­æ˜¯å¦å·²è¢«è®¿é—®ã€‚åœ¨è¿›å…¥é€’å½’å‰ï¼Œæ ‡è®°å½“å‰æ ¼å­ä¸ºâ€œå·²è®¿é—®â€ï¼›é€’å½’ç»“æŸåï¼Œ**å›æº¯**ï¼ˆå–æ¶ˆæ ‡è®°ï¼‰ï¼Œè¿™æ ·å°±èƒ½ä¿è¯åœ¨æ¢ç´¢å…¶ä»–è·¯å¾„æ—¶ï¼Œå½“å‰æ ¼å­å¯ä»¥è¢«é‡æ–°è®¿é—®ã€‚ä¾‹å¦‚ï¼Œzaolongçš„é¢˜è§£ä¸­ï¼Œ`bj[xx][yy] = 1`æ ‡è®°ä¸‹ä¸€æ­¥çš„æ ¼å­ï¼Œé€’å½’å`bj[xx][yy] = 0`å–æ¶ˆæ ‡è®°ï¼Œè¿™æ ·å°±èƒ½æ­£ç¡®æ¢ç´¢æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå›æº¯æ˜¯DFSçš„æ ¸å¿ƒæŠ€å·§ï¼Œç”¨äºâ€œæ’¤é”€â€å½“å‰æ­¥éª¤çš„å½±å“ï¼Œä»¥ä¾¿æ¢ç´¢å…¶ä»–å¯èƒ½æ€§ã€‚  

### 2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•æšä¸¾æ‰€æœ‰èµ·ç‚¹ï¼Ÿ**  
* **åˆ†æ**ï¼šé€šè¿‡**åŒé‡å¾ªç¯**éå†ç½‘æ ¼ä¸­çš„æ¯ä¸ªæ ¼å­ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºæ ¼ï¼ˆ`.`ï¼‰ã€‚å¦‚æœæ˜¯ï¼Œå°±ä»¥è¯¥æ ¼å­ä¸ºèµ·ç‚¹ï¼Œè°ƒç”¨`dfs`å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œsjh0626çš„é¢˜è§£ä¸­ï¼Œ`for (int i=1; i<=n; i++) for (int j=1; j<=m; j++) if (g[i][j]!='#') dfs(i,j,0);` æšä¸¾äº†æ‰€æœ‰å¯èƒ½çš„èµ·ç‚¹ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæšä¸¾èµ·ç‚¹æ˜¯è§£å†³â€œä»»æ„èµ·ç‚¹â€é—®é¢˜çš„å¸¸ç”¨æ–¹æ³•ï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•å¯èƒ½çš„è·¯å¾„ã€‚  

### 3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•ç»Ÿè®¡æ­¥æ•°ï¼Ÿ**  
* **åˆ†æ**ï¼šåœ¨`dfs`å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ª**æ­¥æ•°å‚æ•°**ï¼ˆå¦‚`step`ã€`s`ï¼‰ï¼Œè®°å½•å½“å‰èµ°äº†å¤šå°‘æ­¥ã€‚å½“æ­¥æ•°ç­‰äº`K`æ—¶ï¼Œç­”æ¡ˆåŠ 1ã€‚ä¾‹å¦‚ï¼Œhjyowlçš„é¢˜è§£ä¸­ï¼Œ`if (s == k) res ++;` ç»Ÿè®¡äº†æ‰€æœ‰èµ°äº†Kæ­¥çš„è·¯å¾„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ­¥æ•°å‚æ•°æ˜¯æ§åˆ¶é€’å½’ç»ˆæ­¢çš„å…³é”®ï¼Œç¡®ä¿åªç»Ÿè®¡ç¬¦åˆè¦æ±‚çš„è·¯å¾„ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§Aï¼šæ–¹å‘æ•°ç»„**ï¼šç”¨`dx`å’Œ`dy`æ•°ç»„å­˜å‚¨å››ä¸ªæ–¹å‘çš„åç§»é‡ï¼Œé¿å…é‡å¤å†™å››ä¸ªæ–¹å‘çš„åˆ¤æ–­ï¼ˆå¦‚`x+1`ã€`x-1`ç­‰ï¼‰ã€‚  
- **æŠ€å·§Bï¼šè¾¹ç•Œåˆ¤æ–­**ï¼šåœ¨æ¢ç´¢æ–¹å‘æ—¶ï¼Œå…ˆåˆ¤æ–­ä¸‹ä¸€æ­¥æ˜¯å¦åœ¨ç½‘æ ¼å†…ï¼ˆå¦‚`xx >=1 && xx <=n && yy >=1 && yy <=m`ï¼‰ï¼Œé¿å…æ•°ç»„è¶Šç•Œã€‚  
- **æŠ€å·§Cï¼šå›æº¯å¤„ç†**ï¼šé€’å½’å‰åæ ‡è®°/å–æ¶ˆæ ‡è®°ï¼Œç¡®ä¿è·¯å¾„ä¸é‡å¤ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œæä¾›ä¸€ä¸ªæ¸…æ™°çš„DFSå®ç°æ¡†æ¶ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <cstring>
  using namespace std;

  const int dx[] = {1, -1, 0, 0}; // ä¸‹ã€ä¸Šã€å³ã€å·¦å››ä¸ªæ–¹å‘
  const int dy[] = {0, 0, 1, -1};
  int n, m, k, ans;
  char g[15][15]; // å­˜å‚¨ç½‘æ ¼
  bool vis[15][15]; // æ ‡è®°å·²èµ°è¿‡çš„æ ¼å­

  void dfs(int x, int y, int step) {
      if (step == k) { // èµ°äº†Kæ­¥ï¼Œè®¡æ•°
          ans++;
          return;
      }
      vis[x][y] = true; // æ ‡è®°å½“å‰æ ¼å­ä¸ºå·²è®¿é—®
      for (int i = 0; i < 4; i++) {
          int nx = x + dx[i];
          int ny = y + dy[i];
          // åˆ¤æ–­æ˜¯å¦åœ¨ç½‘æ ¼å†…ã€æ˜¯å¦ä¸ºç©ºæ ¼ã€æ˜¯å¦æœªè¢«è®¿é—®
          if (nx >= 1 && nx <= n && ny >= 1 && ny <= m && g[nx][ny] == '.' && !vis[nx][ny]) {
              dfs(nx, ny, step + 1); // é€’å½’æ¢ç´¢ä¸‹ä¸€æ­¥
          }
      }
      vis[x][y] = false; // å›æº¯ï¼Œå–æ¶ˆæ ‡è®°
  }

  int main() {
      cin >> n >> m >> k;
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              cin >> g[i][j];
          }
      }
      // æšä¸¾æ‰€æœ‰èµ·ç‚¹
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              if (g[i][j] == '.') { // åªæœ‰ç©ºæ ¼æ‰èƒ½ä½œä¸ºèµ·ç‚¹
                  memset(vis, 0, sizeof(vis)); // é‡ç½®æ ‡è®°æ•°ç»„
                  dfs(i, j, 0); // ä»(i,j)å¼€å§‹ï¼Œèµ°0æ­¥
              }
          }
      }
      cout << ans << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–ç½‘æ ¼å¤§å°`n`ã€`m`å’Œæ­¥æ•°`k`ï¼Œç„¶åè¯»å–ç½‘æ ¼ä¿¡æ¯ã€‚  
  2. **æšä¸¾èµ·ç‚¹**ï¼šéå†æ¯ä¸ªæ ¼å­ï¼Œè‹¥ä¸ºç©ºæ ¼ï¼Œåˆ™è°ƒç”¨`dfs`å‡½æ•°ã€‚  
  3. **DFSå‡½æ•°**ï¼šé€’å½’æ¢ç´¢å››ä¸ªæ–¹å‘ï¼Œæ ‡è®°å·²èµ°è¿‡çš„æ ¼å­ï¼Œå½“æ­¥æ•°ç­‰äº`k`æ—¶è®¡æ•°ï¼Œå›æº¯å–æ¶ˆæ ‡è®°ã€‚  


### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šzaolongï¼‰  
* **äº®ç‚¹**ï¼šç”¨`step`å‚æ•°è¡¨ç¤ºå½“å‰è·¯å¾„çš„é•¿åº¦ï¼ˆä»1å¼€å§‹ï¼‰ï¼Œå½“`step`ç­‰äº`k+1`æ—¶è®¡æ•°ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs(int x, int y, int s) {
      if (s == k+1) { // è·¯å¾„é•¿åº¦ä¸ºk+1ï¼Œå³èµ°äº†kæ­¥
          ans++;
          return;
      }
      for (int i=0; i<4; i++) {
          int xx = x + dx[i];
          int yy = y + dy[i];
          if (bj[xx][yy] == 0 && 1<=xx && xx<=n && 1<=yy && yy<=m) {
              bj[xx][yy] = 1; // æ ‡è®°
              dfs(xx, yy, s+1);
              bj[xx][yy] = 0; // å›æº¯
          }
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `s`è¡¨ç¤ºå½“å‰è·¯å¾„çš„é•¿åº¦ï¼ˆæ¯”å¦‚` s=1`è¡¨ç¤ºèµ·ç‚¹ï¼Œ`s=k+1`è¡¨ç¤ºèµ°äº†kæ­¥ï¼‰ã€‚  
  - `bj`æ•°ç»„æ ‡è®°å·²èµ°è¿‡çš„æ ¼å­ï¼Œé€’å½’å‰æ ‡è®°ï¼Œé€’å½’åå–æ¶ˆæ ‡è®°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ­¥æ•°åŠ 1ï¼Œæ‰€ä»¥`step`çš„åˆå§‹å€¼å’Œç»ˆæ­¢æ¡ä»¶éœ€è¦å¯¹åº”ã€‚  


### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šsjh0626ï¼‰  
* **äº®ç‚¹**ï¼š`vis`æ•°ç»„åœ¨`dfs`å‡½æ•°å†…æ ‡è®°å½“å‰ä½ç½®ï¼Œé¿å…é‡å¤è®¿é—®ï¼Œé€»è¾‘æ›´ç›´è§‚ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs(int x, int y, int step) {
      if (step == k) { // èµ°äº†kæ­¥ï¼Œè®¡æ•°
          ans++;
          return;
      }
      vis[x][y] = 1; // æ ‡è®°å½“å‰ä½ç½®
      for (int i=0; i<4; i++) {
          int nx = x + dx[i];
          int ny = y + dy[i];
          if (nx>=1 && nx<=n && ny>=1 && ny<=m && g[nx][ny]=='.' && !vis[nx][ny]) {
              dfs(nx, ny, step+1);
          }
      }
      vis[x][y] = 0; // å›æº¯
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `vis[x][y] = 1`æ ‡è®°å½“å‰ä½ç½®ä¸ºå·²è®¿é—®ï¼Œé˜²æ­¢åœ¨åç»­é€’å½’ä¸­é‡å¤èµ°ã€‚  
  - é€’å½’ç»“æŸåï¼Œ`vis[x][y] = 0`å–æ¶ˆæ ‡è®°ï¼Œä»¥ä¾¿æ¢ç´¢å…¶ä»–è·¯å¾„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ‡è®°å½“å‰ä½ç½®æ¯”æ ‡è®°ä¸‹ä¸€æ­¥æ›´ç¬¦åˆâ€œèµ°ä¸€æ­¥æ ‡è®°ä¸€æ­¥â€çš„é€»è¾‘ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### ğŸ® åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šåƒç´ è¿·å®«æ¢é™©ã€‹  
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹Ÿç½‘æ ¼è¿·å®«ï¼Œç»“åˆå¤å¤æ¸¸æˆå…ƒç´ ï¼ˆå¦‚éŸ³æ•ˆã€åŠ¨ç”»ï¼‰ï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°DFSçš„â€œèµ°è¿·å®«â€è¿‡ç¨‹ã€‚  

### ğŸ“ æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º`10x10`çš„åƒç´ ç½‘æ ¼ï¼Œç”¨ä¸åŒé¢œè‰²æ ‡è®°ï¼šç©ºæ ¼ï¼ˆç™½è‰²ï¼‰ã€éšœç¢ï¼ˆé»‘è‰²ï¼‰ã€èµ·ç‚¹ï¼ˆçº¢è‰²ï¼‰ã€å½“å‰ä½ç½®ï¼ˆé»„è‰²ï¼‰ã€å·²èµ°è¿‡çš„æ ¼å­ï¼ˆç°è‰²ï¼‰ã€‚  
   - æ§åˆ¶é¢æ¿åŒ…å«ï¼š`å¼€å§‹`ã€`å•æ­¥`ã€`è‡ªåŠ¨æ’­æ”¾`ã€`é‡ç½®`æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼ˆæ§åˆ¶åŠ¨ç”»é€Ÿåº¦ï¼‰ã€‚  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - é€‰æ‹©ä¸€ä¸ªèµ·ç‚¹ï¼ˆçº¢è‰²é—ªçƒï¼‰ï¼Œç‚¹å‡»`å¼€å§‹`æŒ‰é’®ï¼ŒåŠ¨ç”»å¼€å§‹ã€‚  
   - å½“å‰ä½ç½®ï¼ˆé»„è‰²ï¼‰ä»èµ·ç‚¹å‡ºå‘ï¼Œé€æ­¥æ¢ç´¢å››ä¸ªæ–¹å‘ã€‚  

3. **æ ¸å¿ƒæ­¥éª¤æ¼”ç¤º**ï¼š  
   - **ç§»åŠ¨åŠ¨ç”»**ï¼šå½“å‰ä½ç½®å‘ä¸€ä¸ªæ–¹å‘ç§»åŠ¨æ—¶ï¼Œç”¨â€œåƒç´ æ»‘åŠ¨â€æ•ˆæœæ˜¾ç¤ºï¼Œä¼´éšâ€œå±å‘€â€çš„è„šæ­¥å£°ï¼ˆéŸ³æ•ˆï¼‰ã€‚  
   - **æ ‡è®°æ ¼å­**ï¼šå·²èµ°è¿‡çš„æ ¼å­å˜ä¸ºç°è‰²ï¼Œé˜²æ­¢é‡å¤èµ°ã€‚  
   - **è®¡æ•°æç¤º**ï¼šå½“èµ°åˆ°Kæ­¥æ—¶ï¼Œå½“å‰è·¯å¾„å˜ä¸ºç»¿è‰²é—ªçƒï¼Œæ’­æ”¾â€œå®â€çš„æç¤ºéŸ³ï¼Œç­”æ¡ˆè®¡æ•°å™¨åŠ 1ã€‚  
   - **å›æº¯è¿‡ç¨‹**ï¼šå½“æ— æ³•ç»§ç»­èµ°æ—¶ï¼Œå½“å‰ä½ç½®è¿”å›ä¸Šä¸€æ­¥ï¼Œç°è‰²æ ¼å­å˜å›ç™½è‰²ï¼ˆå–æ¶ˆæ ‡è®°ï¼‰ï¼Œä¼´éšâ€œå›æº¯â€éŸ³æ•ˆï¼ˆå¦‚â€œå’»â€çš„ä¸€å£°ï¼‰ã€‚  

4. **äº¤äº’åŠŸèƒ½**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»`å•æ­¥`æŒ‰é’®ï¼ŒåŠ¨ç”»èµ°ä¸€æ­¥ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ã€‚  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»`è‡ªåŠ¨æ’­æ”¾`æŒ‰é’®ï¼ŒåŠ¨ç”»å¿«é€Ÿæ¼”ç¤ºæ‰€æœ‰è·¯å¾„ï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒæ•´ã€‚  
   - **é‡ç½®**ï¼šç‚¹å‡»`é‡ç½®`æŒ‰é’®ï¼Œæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°é€‰æ‹©èµ·ç‚¹ã€‚  

### ğŸ“ æ—ç™½æç¤ºï¼ˆåŠ¨ç”»ä¸­çš„æ–‡å­—æ°”æ³¡ï¼‰  
- â€œç°åœ¨ä»çº¢è‰²èµ·ç‚¹å‡ºå‘ï¼Œèµ°ç¬¬ä¸€æ­¥ï¼â€ï¼ˆèµ·ç‚¹é—ªçƒæ—¶ï¼‰  
- â€œå½“å‰ä½ç½®æ˜¯é»„è‰²ï¼Œè¦æ¢ç´¢å››ä¸ªæ–¹å‘å•¦ï¼â€ï¼ˆå¼€å§‹ç§»åŠ¨æ—¶ï¼‰  
- â€œèµ°åˆ°Kæ­¥äº†ï¼Œè¿™æ¡è·¯å¾„ç®—å…¥ç­”æ¡ˆï¼â€ï¼ˆè®¡æ•°æ—¶ï¼‰  
- â€œæ— æ³•ç»§ç»­èµ°ï¼Œå›æº¯åˆ°ä¸Šä¸€æ­¥ï¼â€ï¼ˆå›æº¯æ—¶ï¼‰  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ§  é€šç”¨æ€è·¯è¿ç§»  
DFS+å›æº¯çš„æ€æƒ³ä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
1. **è¿·å®«é—®é¢˜**ï¼šæ±‚ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æ‰€æœ‰è·¯å¾„ï¼ˆå¦‚æ´›è°·P1019 å•è¯æ¥é¾™ï¼‰ï¼›  
2. **ç»„åˆé—®é¢˜**ï¼šæ±‚ä»nä¸ªæ•°ä¸­é€‰kä¸ªæ•°çš„æ‰€æœ‰ç»„åˆï¼ˆå¦‚æ´›è°·P1036 é€‰æ•°ï¼‰ï¼›  
3. **æ’åˆ—é—®é¢˜**ï¼šæ±‚nä¸ªæ•°çš„æ‰€æœ‰æ’åˆ—ï¼ˆå¦‚æ´›è°·P1706 å…¨æ’åˆ—é—®é¢˜ï¼‰ã€‚  

### ğŸ“š æ´›è°·ç»ƒä¹ æ¨è  
1. **æ´›è°· P1019 å•è¯æ¥é¾™**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦ç”¨DFSéå†æ‰€æœ‰å¯èƒ½çš„å•è¯ç»„åˆï¼Œå›æº¯å¤„ç†ï¼Œå·©å›ºâ€œé¿å…é‡å¤â€çš„æŠ€å·§ã€‚  
2. **æ´›è°· P1219 å…«çš‡å**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»å…¸çš„DFS+å›æº¯é—®é¢˜ï¼Œéœ€è¦æ ‡è®°åˆ—ã€å¯¹è§’çº¿ï¼Œé”»ç‚¼â€œçŠ¶æ€æ ‡è®°â€çš„èƒ½åŠ›ã€‚  
3. **æ´›è°· P1036 é€‰æ•°**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨DFSæšä¸¾æ‰€æœ‰é€‰æ•°ç»„åˆï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°ï¼Œå·©å›ºâ€œæšä¸¾èµ·ç‚¹â€å’Œâ€œé€’å½’ç»ˆæ­¢æ¡ä»¶â€çš„æŠ€å·§ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªzaolongï¼‰**ï¼šâ€œæˆ‘åœ¨å†™ä»£ç æ—¶ï¼Œä¸€å¼€å§‹å¿˜è®°äº†å›æº¯ï¼Œå¯¼è‡´ç­”æ¡ˆæ€»æ˜¯æ¯”æ­£ç¡®å€¼å°ã€‚åæ¥å‘ç°ï¼Œå¿…é¡»åœ¨é€’å½’åå–æ¶ˆæ ‡è®°ï¼Œæ‰èƒ½æ­£ç¡®æ¢ç´¢æ‰€æœ‰è·¯å¾„ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚å›æº¯æ˜¯DFSçš„â€œçµé­‚â€ï¼Œå¦‚æœå¿˜è®°å–æ¶ˆæ ‡è®°ï¼Œä¼šå¯¼è‡´æŸäº›è·¯å¾„æ— æ³•è¢«æ¢ç´¢ï¼Œä»è€Œå¾—åˆ°é”™è¯¯çš„ç­”æ¡ˆã€‚åœ¨å†™DFSä»£ç æ—¶ï¼Œä¸€å®šè¦è®°ä½â€œæ ‡è®°-é€’å½’-å–æ¶ˆæ ‡è®°â€çš„æµç¨‹ã€‚  


## ğŸ‰ æ€»ç»“  
æœ¬æ¬¡åˆ†æçš„â€œCount Simple Pathsâ€é—®é¢˜ï¼Œæ ¸å¿ƒæ˜¯**DFS+å›æº¯**ã€‚é€šè¿‡æšä¸¾æ‰€æœ‰èµ·ç‚¹ï¼Œé€’å½’æ¢ç´¢æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ï¼Œå¹¶ç”¨æ ‡è®°æ•°ç»„é¿å…é‡å¤ï¼Œå°±èƒ½æ­£ç¡®ç»Ÿè®¡æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„è·¯å¾„æ•°ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£DFSçš„åŸºæœ¬æ€æƒ³ï¼ŒæŒæ¡å›æº¯çš„æŠ€å·§ï¼Œåœ¨åç»­çš„ç¼–ç¨‹ç»ƒä¹ ä¸­ä¸¾ä¸€åä¸‰ï¼  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š157.96ç§’
# é¢˜ç›®ä¿¡æ¯

# [ABC345C] One Time Swap

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/abc345/tasks/abc345_c

æ–‡å­—åˆ— $ S $ ãŒä¸ãˆã‚‰ã‚Œã¾ã™ã€‚æ¬¡ã®æ“ä½œã‚’ **ã¡ã‚‡ã†ã© $ 1 $ å›** è¡Œã£ãŸå¾Œã®æ–‡å­—åˆ—ã¨ã—ã¦ã‚ã‚Šå¾—ã‚‹ã‚‚ã®ãŒã„ãã¤ã‚ã‚‹ã‹æ±‚ã‚ã¦ãã ã•ã„ã€‚

- $ S $ ã®é•·ã•ã‚’ $ N $ ã¨ã™ã‚‹ã€‚ $ 1\leq\ i\ <\ j\leq\ N $ ã‚’ã¿ãŸã™æ•´æ•°ã®çµ„ $ (i,j) $ ã‚’é¸ã³ã€$ S $ ã® $ i $ æ–‡å­—ç›®ã¨ $ j $ æ–‡å­—ç›®ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã€‚

ãªãŠã€ã“ã®å•é¡Œã®åˆ¶ç´„ä¸‹ã§æ“ä½œã‚’å¿…ãšè¡Œã†ã“ã¨ãŒã§ãã‚‹ã“ã¨ãŒè¨¼æ˜ã§ãã¾ã™ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ S $ ã¯è‹±å°æ–‡å­—ã‹ã‚‰ãªã‚‹é•·ã• $ 2 $ ä»¥ä¸Š $ 10^6 $ ä»¥ä¸‹ã®æ–‡å­—åˆ—

### Sample Explanation 1

$ S $ ã®é•·ã•ã¯ $ 3 $ ã§ã‚ã‚‹ãŸã‚ã€$ 1\leq\ i\ <\ j\leq\ 3 $ ã‚’ã¿ãŸã™æ•´æ•°ã®çµ„ $ (i,j) $ ã¨ã—ã¦ã¯ã€ $ (1,2) $, $ (1,3) $, $ (2,3) $ ã® $ 3 $ é€šã‚ŠãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚ - $ S $ ã® $ 1 $ æ–‡å­—ç›®ã¨ $ 2 $ æ–‡å­—ç›®ã‚’å…¥ã‚Œæ›¿ãˆãŸæ™‚ã€$ S $ ã¯ `bac` ã¨ãªã‚Šã¾ã™ã€‚ - $ S $ ã® $ 1 $ æ–‡å­—ç›®ã¨ $ 3 $ æ–‡å­—ç›®ã‚’å…¥ã‚Œæ›¿ãˆãŸæ™‚ã€$ S $ ã¯ `cba` ã¨ãªã‚Šã¾ã™ã€‚ - $ S $ ã® $ 2 $ æ–‡å­—ç›®ã¨ $ 3 $ æ–‡å­—ç›®ã‚’å…¥ã‚Œæ›¿ãˆãŸæ™‚ã€$ S $ ã¯ `acb` ã¨ãªã‚Šã¾ã™ã€‚ ã‚ˆã£ã¦ã€`abc` ã«å¯¾ã—ã¦æ“ä½œã‚’è¡Œã£ãŸå¾Œã®æ–‡å­—åˆ—ã¨ã—ã¦ã¯ã€`bac`, `cba`, `acb` ã® $ 3 $ ã¤ãŒã‚ã‚Šå¾—ã‚‹ãŸã‚ã€$ 3 $ ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

### Sample Explanation 2

ã©ã® $ 2 $ ã¤ã®æ–‡å­—ã‚’å…¥ã‚Œæ›¿ãˆã¦ã‚‚ $ S $ ã¯ `aaaaa` ã®ã¾ã¾ã§ã™ã€‚ã‚ˆã£ã¦ã€æ“ä½œå¾Œã®æ–‡å­—åˆ—ã¨ã—ã¦ã‚ã‚Šå¾—ã‚‹ã‚‚ã®ã¯ $ 1 $ ã¤ã§ã™ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
abc```

### è¾“å‡º

```
3```

## æ ·ä¾‹ #2

### è¾“å…¥

```
aaaaa```

### è¾“å‡º

```
1```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ABC345C] One Time Swap æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ•°å­¦/å­—ç¬¦ä¸²ï¼ˆè®¡æ•°é—®é¢˜ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œOne Time Swapâ€é—®é¢˜çš„å…³é”®ï¼Œåœ¨äº**ç»Ÿè®¡æ°å¥½ä¸€æ¬¡äº¤æ¢åèƒ½äº§ç”Ÿçš„ä¸åŒå­—ç¬¦ä¸²æ•°é‡**ã€‚æ ¸å¿ƒé€»è¾‘å¯ä»¥æ€»ç»“ä¸ºä¸¤ç‚¹ï¼š  
1. **äº¤æ¢ä¸åŒå­—ç¬¦**ï¼šä¼šäº§ç”Ÿæ–°å­—ç¬¦ä¸²ï¼Œéœ€ç»Ÿè®¡æ‰€æœ‰`i<j`ä¸”`s[i]â‰ s[j]`çš„å¯¹æ•°ï¼›  
2. **äº¤æ¢ç›¸åŒå­—ç¬¦**ï¼šä¸ä¼šæ”¹å˜å­—ç¬¦ä¸²ï¼Œä½†å¦‚æœå­˜åœ¨é‡å¤å­—ç¬¦ï¼Œè¿™ç§æƒ…å†µéœ€ç®—ä½œ1ç§ç»“æœã€‚  

### æ ¸å¿ƒç®—æ³•æ€è·¯  
- **æ•°å­¦å…¬å¼æ¨å¯¼**ï¼š  
  æ€»äº¤æ¢æ¬¡æ•°ä¸ºç»„åˆæ•°`C(n,2) = n*(n-1)/2`ï¼ˆæ‰€æœ‰`i<j`çš„å¯¹ï¼‰ã€‚  
  å‡å»**äº¤æ¢ç›¸åŒå­—ç¬¦çš„æ¬¡æ•°**ï¼ˆå³æ¯ä¸ªå­—ç¬¦`c`çš„ç»„åˆæ•°`C(mp[c],2) = mp[c]*(mp[c]-1)/2`ï¼Œ`mp[c]`ä¸º`c`çš„å‡ºç°æ¬¡æ•°ï¼‰ï¼Œå¾—åˆ°**ä¸åŒäº¤æ¢çš„æ¬¡æ•°**ã€‚  
  è‹¥å­˜åœ¨é‡å¤å­—ç¬¦ï¼ˆ`mp[c]â‰¥2`ï¼‰ï¼Œéœ€åŠ 1ï¼ˆäº¤æ¢ç›¸åŒå­—ç¬¦å¾—åˆ°åŸå­—ç¬¦ä¸²ï¼‰ã€‚  

- **ç­‰ä»·æ€è·¯**ï¼š  
  ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦`c`ä¸å…¶ä»–ä¸åŒå­—ç¬¦çš„äº¤æ¢æ¬¡æ•°ï¼ˆ`n - mp[c]`ï¼Œ`n`ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼‰ï¼Œæ€»å’Œé™¤ä»¥2ï¼ˆæ¯ä¸ª`i<j`å¯¹ä¼šè¢«è®¡ç®—ä¸¤æ¬¡ï¼‰ï¼Œå†åŠ 1ï¼ˆè‹¥æœ‰é‡å¤å­—ç¬¦ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
è®¡åˆ’ç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºå­—ç¬¦ä¸²å’Œè®¡æ•°è¿‡ç¨‹ï¼š  
- **åœºæ™¯**ï¼šå±å¹•å·¦ä¾§æ˜¾ç¤ºåŸå­—ç¬¦ä¸²ï¼ˆåƒç´ å­—ç¬¦å—ï¼‰ï¼Œå³ä¾§æ˜¾ç¤ºå­—ç¬¦å‡ºç°æ¬¡æ•°çš„æ¡¶ï¼ˆåƒç´ æŸ±çŠ¶å›¾ï¼‰ã€‚  
- **åŠ¨ç”»æ­¥éª¤**ï¼š  
  1. åˆå§‹åŒ–ï¼šè¯»å–å­—ç¬¦ä¸²ï¼Œç”¨åƒç´ å—å±•ç¤ºæ¯ä¸ªå­—ç¬¦ï¼Œæ¡¶æŸ±çŠ¶å›¾éšå­—ç¬¦å‡ºç°é€æ¸å¢é•¿ã€‚  
  2. è®¡ç®—æ€»äº¤æ¢æ¬¡æ•°ï¼šç”¨â€œ+â€åŠ¨ç”»æ˜¾ç¤º`C(n,2)`çš„è®¡ç®—è¿‡ç¨‹ã€‚  
  3. å‡å»ç›¸åŒå­—ç¬¦äº¤æ¢æ¬¡æ•°ï¼šå¯¹åº”æ¡¶æŸ±çŠ¶å›¾é—ªçƒï¼Œæ•°å€¼å‡å°‘ã€‚  
  4. å¤„ç†é‡å¤å­—ç¬¦ï¼šè‹¥æœ‰é‡å¤ï¼Œå±å¹•åº•éƒ¨æ˜¾ç¤ºâ€œ+1â€åŠ¨ç”»ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ­¥å±•ç¤ºè®¡ç®—è¿‡ç¨‹ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºï¼‰ï¼Œä»¥åŠâ€œé‡ç½®â€åŠŸèƒ½ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼š__ATRI__ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°ï¼Œé‡‡ç”¨**ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦ä¸ä¸åŒå­—ç¬¦äº¤æ¢æ¬¡æ•°**çš„æ–¹æ³•ï¼Œä»£ç ç®€æ´æ˜“è¯»ã€‚é€šè¿‡`map`ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤å­—ç¬¦ï¼ˆ`f`æ ‡è®°ï¼‰ã€‚æ ¸å¿ƒé€»è¾‘`ans += n - mp[c]`è®¡ç®—æ¯ä¸ªå­—ç¬¦çš„è´¡çŒ®ï¼Œæœ€åé™¤ä»¥2å¹¶å¤„ç†é‡å¤æƒ…å†µã€‚ä»£ç è§„èŒƒæ€§é«˜ï¼Œå˜é‡å‘½åæ˜ç¡®ï¼ˆå¦‚`mp`è¡¨ç¤ºå­—ç¬¦è®¡æ•°ï¼Œ`f`è¡¨ç¤ºæ˜¯å¦æœ‰é‡å¤ï¼‰ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚  

### é¢˜è§£äºŒï¼ˆä½œè€…ï¼škkxacjï¼‰  
* **ç‚¹è¯„**ï¼š  
  é‡‡ç”¨**æ€»äº¤æ¢æ¬¡æ•°å‡å»ç›¸åŒå­—ç¬¦äº¤æ¢æ¬¡æ•°**çš„æ€è·¯ï¼Œç›´æ¥è®¡ç®—ç»„åˆæ•°ï¼Œé€»è¾‘æ›´ç›´è§‚ã€‚`ans`åˆå§‹åŒ–ä¸º`C(n,2)`ï¼Œç„¶åéå†å­—ç¬¦å‡å»`C(mp[c],2)`ï¼Œæœ€ååŠ `jl`ï¼ˆæ˜¯å¦æœ‰é‡å¤å­—ç¬¦ï¼‰ã€‚ä»£ç ç®€æ´ï¼Œæ•ˆç‡é«˜ï¼Œé€‚åˆç†è§£æ•°å­¦å…¬å¼çš„æ¨å¯¼è¿‡ç¨‹ã€‚  

### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼š_KHINï¼‰  
* **ç‚¹è¯„**ï¼š  
  ç”¨**æ¡¶æ•°ç»„**ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œéå†å­—ç¬¦ä¸²æ—¶è®¡ç®—æ¯ä¸ªå­—ç¬¦å‰é¢ä¸å®ƒä¸åŒçš„å­—ç¬¦ä¸ªæ•°ï¼ˆ`i-1 - cnt[s[i]-'a']`ï¼‰ï¼Œæ€»å’Œå³ä¸ºä¸åŒäº¤æ¢çš„æ¬¡æ•°ã€‚æœ€ååˆ¤æ–­æ˜¯å¦æœ‰é‡å¤å­—ç¬¦ï¼ŒåŠ 1ã€‚ä»£ç é«˜æ•ˆï¼ˆ`O(n)`æ—¶é—´å¤æ‚åº¦ï¼‰ï¼Œæ¡¶æ•°ç»„çš„ä½¿ç”¨æ¯”`map`æ›´è½»é‡åŒ–ï¼Œé€‚åˆå¤„ç†å¤§æ•°æ®é‡ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•é«˜æ•ˆç»Ÿè®¡ä¸åŒäº¤æ¢çš„æ¬¡æ•°ï¼Ÿ**  
- **åˆ†æ**ï¼šæš´åŠ›æšä¸¾æ‰€æœ‰`i<j`å¯¹ï¼ˆ`O(nÂ²)`ï¼‰ä¼šè¶…æ—¶ï¼ˆ`nâ‰¤1e6`ï¼‰ï¼Œéœ€ç”¨æ•°å­¦å…¬å¼ä¼˜åŒ–ã€‚  
- **ç­–ç•¥**ï¼š  
  æ–¹æ³•ä¸€ï¼šæ€»äº¤æ¢æ¬¡æ•°`C(n,2)`å‡å»ç›¸åŒå­—ç¬¦äº¤æ¢æ¬¡æ•°`sum(C(mp[c],2))`ã€‚  
  æ–¹æ³•äºŒï¼šç»Ÿè®¡æ¯ä¸ªå­—ç¬¦ä¸ä¸åŒå­—ç¬¦çš„äº¤æ¢æ¬¡æ•°ï¼ˆ`n - mp[c]`ï¼‰ï¼Œæ€»å’Œé™¤ä»¥2ã€‚  

### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•å¤„ç†é‡å¤å­—ç¬¦çš„æƒ…å†µï¼Ÿ**  
- **åˆ†æ**ï¼šäº¤æ¢ç›¸åŒå­—ç¬¦å¾—åˆ°åŸå­—ç¬¦ä¸²ï¼Œéœ€ç®—ä½œ1ç§ç»“æœï¼Œä½†ä»…å½“å­˜åœ¨é‡å¤å­—ç¬¦æ—¶æ‰éœ€è¦åŠ 1ã€‚  
- **ç­–ç•¥**ï¼šéå†å­—ç¬¦è®¡æ•°ï¼Œè‹¥æœ‰`mp[c]â‰¥2`ï¼Œåˆ™æ ‡è®°`flag=1`ï¼Œæœ€å`ans += flag`ã€‚  

### 3. **éš¾ç‚¹3ï¼šæ•°æ®èŒƒå›´ä¸ç±»å‹æº¢å‡ºï¼Ÿ**  
- **åˆ†æ**ï¼š`nâ‰¤1e6`ï¼Œ`C(n,2)`å¯è¾¾`5e11`ï¼Œéœ€ç”¨`long long`ç±»å‹å­˜å‚¨ã€‚  
- **ç­–ç•¥**ï¼šæ‰€æœ‰è®¡æ•°å˜é‡ï¼ˆå¦‚`ans`ã€`mp[c]`ï¼‰å‡å£°æ˜ä¸º`long long`ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æ•°å­¦ä¼˜åŒ–**ï¼šç”¨ç»„åˆæ•°å…¬å¼é¿å…æš´åŠ›æšä¸¾ï¼Œæå‡æ•ˆç‡ã€‚  
- **æ¡¶/Mapç»Ÿè®¡**ï¼šå¿«é€Ÿç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œæ”¯æŒé«˜æ•ˆæŸ¥è¯¢ã€‚  
- **ç±»å‹æ³¨æ„**ï¼šå¤„ç†å¤§æ•°æ®é‡æ—¶ï¼Œä½¿ç”¨`long long`é˜²æ­¢æº¢å‡ºã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆç»¼åˆä¼˜è´¨é¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†`__ATRI__`å’Œ`kkxacj`çš„æ€è·¯ï¼Œé‡‡ç”¨**æ€»äº¤æ¢æ¬¡æ•°å‡å»ç›¸åŒå­—ç¬¦äº¤æ¢æ¬¡æ•°**çš„æ–¹æ³•ï¼Œé€»è¾‘ç›´è§‚ï¼Œä»£ç ç®€æ´ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <string>
  #include <vector>
  using namespace std;
  using ll = long long;

  int main() {
      string s;
      cin >> s;
      int n = s.size();
      vector<ll> mp(26, 0); // æ¡¶æ•°ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°
      bool flag = false;
      for (char c : s) {
          int idx = c - 'a';
          mp[idx]++;
          if (mp[idx] > 1) flag = true; // æ ‡è®°æ˜¯å¦æœ‰é‡å¤å­—ç¬¦
      }
      ll ans = (ll)n * (n - 1) / 2; // æ€»äº¤æ¢æ¬¡æ•°C(n,2)
      for (int i = 0; i < 26; i++) {
          ans -= mp[i] * (mp[i] - 1) / 2; // å‡å»ç›¸åŒå­—ç¬¦çš„äº¤æ¢æ¬¡æ•°
      }
      if (flag) ans += 1; // å¤„ç†é‡å¤å­—ç¬¦çš„æƒ…å†µ
      cout << ans << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–å­—ç¬¦ä¸²ï¼Œç”¨æ¡¶æ•°ç»„`mp`ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°ã€‚  
  2. è®¡ç®—æ€»äº¤æ¢æ¬¡æ•°`C(n,2)`ã€‚  
  3. å‡å»æ¯ä¸ªå­—ç¬¦çš„ç›¸åŒäº¤æ¢æ¬¡æ•°`C(mp[i],2)`ã€‚  
  4. è‹¥æœ‰é‡å¤å­—ç¬¦ï¼ŒåŠ 1ã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼š__ATRI__ï¼‰  
* **äº®ç‚¹**ï¼šç”¨`map`ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  map<char, ll> mp;
  bool f = false;
  for (char c : s) {
      if (++mp[c] > 1) f = true;
  }
  ll ans = 0;
  for (char c : s) {
      ans += n - mp[c];
  }
  ans /= 2;
  if (f) ans += 1;
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `map`ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œ`f`æ ‡è®°æ˜¯å¦æœ‰é‡å¤ã€‚  
  - `ans += n - mp[c]`ï¼šæ¯ä¸ªå­—ç¬¦`c`ä¸å…¶ä»–`n - mp[c]`ä¸ªä¸åŒå­—ç¬¦äº¤æ¢ï¼ˆ`mp[c]`æ˜¯`c`çš„æ€»å‡ºç°æ¬¡æ•°ï¼‰ã€‚  
  - `ans /= 2`ï¼šæ¯ä¸ª`i<j`å¯¹ä¼šè¢«è®¡ç®—ä¸¤æ¬¡ï¼Œéœ€é™¤ä»¥2ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`map`é€‚åˆç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œä»£ç å¯è¯»æ€§é«˜ï¼Œä½†æ•ˆç‡ç•¥ä½äºæ¡¶æ•°ç»„ï¼ˆå¯¹äº`26`ä¸ªå­—æ¯ï¼Œæ¡¶æ•°ç»„æ›´é«˜æ•ˆï¼‰ã€‚  

#### é¢˜è§£äºŒï¼ˆä½œè€…ï¼škkxacjï¼‰  
* **äº®ç‚¹**ï¼šç›´æ¥è®¡ç®—ç»„åˆæ•°ï¼Œé€»è¾‘ç›´è§‚ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  ll ans = (ll)s.size() * (s.size() - 1) / 2;
  map<char, ll> mp;
  bool jl = 0;
  for (char c : s) {
      ans -= mp[c];
      if (mp[c]) jl = 1;
      mp[c]++;
  }
  cout << ans + jl << endl;
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `ans`åˆå§‹åŒ–ä¸º`C(n,2)`ã€‚  
  - `ans -= mp[c]`ï¼šéå†å­—ç¬¦æ—¶ï¼Œå‡å»å½“å‰å­—ç¬¦å·²å‡ºç°çš„æ¬¡æ•°ï¼ˆå³ç›¸åŒå­—ç¬¦çš„äº¤æ¢æ¬¡æ•°ï¼‰ã€‚  
  - `jl`æ ‡è®°æ˜¯å¦æœ‰é‡å¤å­—ç¬¦ï¼Œæœ€ååŠ 1ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¿™ç§æ–¹æ³•å°†ç›¸åŒå­—ç¬¦çš„äº¤æ¢æ¬¡æ•°é€æ­¥å‡å»ï¼Œé¿å…äº†éå†æ‰€æœ‰å­—ç¬¦çš„æ­¥éª¤ï¼Œæ•ˆç‡æ›´é«˜ã€‚  

#### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼š_KHINï¼‰  
* **äº®ç‚¹**ï¼šç”¨æ¡¶æ•°ç»„ç»Ÿè®¡ï¼Œæ•ˆç‡é«˜ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  ll cnt[27] = {0}, ans = 0;
  bool flag = false;
  for (int i = 1; i < s.size(); i++) {
      ans += (i - 1 - cnt[s[i] - 'a']);
      cnt[s[i] - 'a']++;
      if (cnt[s[i] - 'a'] > 1) flag = true;
  }
  cout << ans + flag << endl;
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `cnt`æ•°ç»„ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ã€‚  
  - `ans += (i - 1 - cnt[s[i] - 'a'])`ï¼šè®¡ç®—ç¬¬`i`ä¸ªå­—ç¬¦å‰é¢ä¸å®ƒä¸åŒçš„å­—ç¬¦ä¸ªæ•°ï¼ˆ`i-1`æ˜¯å‰é¢çš„æ€»å­—ç¬¦æ•°ï¼Œå‡å»ç›¸åŒå­—ç¬¦çš„ä¸ªæ•°ï¼‰ã€‚  
  - `flag`æ ‡è®°æ˜¯å¦æœ‰é‡å¤å­—ç¬¦ï¼Œæœ€ååŠ 1ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¡¶æ•°ç»„çš„æ•ˆç‡æ¯”`map`é«˜ï¼Œé€‚åˆå¤„ç†å¤§æ•°æ®é‡çš„å­—ç¬¦ä¸²é—®é¢˜ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ æ¢é™©å®¶ï¼šå­—ç¬¦ä¸²äº¤æ¢è®¡æ•°ä¹‹æ—…**ï¼ˆä»¿FCçº¢ç™½æœºé£æ ¼ï¼‰

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºåŸå­—ç¬¦ä¸²ï¼ˆå¦‚`abc`ï¼‰ï¼Œæ¯ä¸ªå­—ç¬¦ç”¨8x8åƒç´ å—è¡¨ç¤ºï¼ˆ`a`ä¸ºçº¢è‰²ï¼Œ`b`ä¸ºç»¿è‰²ï¼Œ`c`ä¸ºè“è‰²ï¼‰ã€‚  
   - å±å¹•å³ä¾§æ˜¾ç¤º26ä¸ªå­—æ¯çš„æ¡¶æŸ±çŠ¶å›¾ï¼ˆåˆå§‹ä¸º0ï¼‰ï¼Œåº•éƒ¨æœ‰â€œæ€»äº¤æ¢æ¬¡æ•°â€â€œç›¸åŒäº¤æ¢æ¬¡æ•°â€â€œç»“æœâ€ä¸‰ä¸ªæ•°å€¼æ¡†ã€‚  
   - æ§åˆ¶é¢æ¿åŒ…å«â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ã€‚  

2. **è®¡æ•°è¿‡ç¨‹åŠ¨ç”»**ï¼š  
   - **ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°**ï¼šé€ä¸ªå­—ç¬¦é£å…¥å­—ç¬¦ä¸²åŒºåŸŸï¼Œå¯¹åº”æ¡¶æŸ±çŠ¶å›¾é€æ¸å¢é•¿ï¼ˆå¦‚`a`å‡ºç°1æ¬¡ï¼Œçº¢è‰²æŸ±çŠ¶å›¾å‡è‡³1ï¼‰ã€‚  
   - **è®¡ç®—æ€»äº¤æ¢æ¬¡æ•°**ï¼šæ•°å€¼æ¡†â€œæ€»äº¤æ¢æ¬¡æ•°â€ä»0è·³åˆ°`C(n,2)`ï¼ˆå¦‚`abc`çš„3ï¼‰ï¼Œä¼´éšâ€œå“—å•¦â€çš„éŸ³æ•ˆã€‚  
   - **å‡å»ç›¸åŒäº¤æ¢æ¬¡æ•°**ï¼šè‹¥æœ‰å­—ç¬¦å‡ºç°å¤šæ¬¡ï¼ˆå¦‚`aaaaa`çš„`a`å‡ºç°5æ¬¡ï¼‰ï¼Œå¯¹åº”æ¡¶æŸ±çŠ¶å›¾é—ªçƒï¼Œæ•°å€¼æ¡†â€œç›¸åŒäº¤æ¢æ¬¡æ•°â€å¢åŠ `C(5,2)=10`ï¼Œâ€œæ€»äº¤æ¢æ¬¡æ•°â€å‡å°‘10ï¼ˆå˜ä¸º0ï¼‰ã€‚  
   - **å¤„ç†é‡å¤å­—ç¬¦**ï¼šè‹¥æœ‰é‡å¤å­—ç¬¦ï¼Œæ•°å€¼æ¡†â€œç»“æœâ€åŠ 1ï¼ˆå¦‚`aaaaa`çš„ç»“æœä»0å˜ä¸º1ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  

3. **ç»“æœå±•ç¤º**ï¼š  
   - å±å¹•ä¸­å¤®æ˜¾ç¤ºæœ€ç»ˆç»“æœï¼ˆå¦‚`abc`çš„3ï¼‰ï¼ŒèƒŒæ™¯æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆ8ä½é£æ ¼ï¼‰ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€æ­¥å±•ç¤ºæ¯ä¸ªè®¡ç®—æ­¥éª¤ï¼ˆå¦‚ç»Ÿè®¡å­—ç¬¦â†’è®¡ç®—æ€»äº¤æ¢æ¬¡æ•°â†’å‡å»ç›¸åŒäº¤æ¢æ¬¡æ•°â†’å¤„ç†é‡å¤å­—ç¬¦ï¼‰ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ’­æ”¾ï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒæ•´ï¼ˆä»æ…¢åˆ°å¿«ï¼‰ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œæ¢å¤åˆå§‹çŠ¶æ€ï¼Œå¯é‡æ–°è¾“å…¥å­—ç¬¦ä¸²ã€‚  

### æ¸¸æˆåŒ–å…ƒç´   
- **å…³å¡è®¾è®¡**ï¼šå°†è®¡ç®—è¿‡ç¨‹åˆ†ä¸ºâ€œç»Ÿè®¡å­—ç¬¦â€â€œè®¡ç®—æ€»äº¤æ¢æ¬¡æ•°â€â€œå‡å»ç›¸åŒäº¤æ¢æ¬¡æ•°â€â€œå¤„ç†é‡å¤å­—ç¬¦â€å››ä¸ªå°å…³å¡ï¼Œå®Œæˆæ¯ä¸ªå…³å¡åæ˜¾ç¤ºâ€œè¿‡å…³â€åŠ¨ç”»ã€‚  
- **ç§¯åˆ†ç³»ç»Ÿ**ï¼šå®Œæˆæ¯ä¸ªå…³å¡è·å¾—10åˆ†ï¼Œæ€»ç§¯åˆ†æ˜¾ç¤ºåœ¨å±å¹•å³ä¸Šè§’ï¼Œæ¿€åŠ±å­¦ä¹ è€…å®Œæˆæ•´ä¸ªè¿‡ç¨‹ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **è®¡æ•°é—®é¢˜**ï¼šæœ¬é¢˜çš„æ ¸å¿ƒæ˜¯ç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„å¯¹æ•°ï¼Œè¿™ç§æ€è·¯å¯è¿ç§»åˆ°å…¶ä»–è®¡æ•°é—®é¢˜ï¼ˆå¦‚ç»Ÿè®¡æ•°ç»„ä¸­ä¸åŒå…ƒç´ çš„å¯¹æ•°ã€å­—ç¬¦ä¸²ä¸­ä¸åŒå­ä¸²çš„æ•°é‡ç­‰ï¼‰ã€‚  
- **ç»„åˆæ•°åº”ç”¨**ï¼šç»„åˆæ•°`C(n,2)`å’Œ`C(mp[c],2)`çš„åº”ç”¨ï¼Œå¯ç”¨äºè§£å†³â€œé€‰ä¸¤ä¸ªå…ƒç´ â€çš„é—®é¢˜ï¼ˆå¦‚é€‰ä¸¤ä¸ªä¸åŒçš„æ•°ã€é€‰ä¸¤ä¸ªç›¸åŒçš„æ•°ç­‰ï¼‰ã€‚  
- **æ¡¶/Mapç»Ÿè®¡**ï¼šæ¡¶æ•°ç»„å’Œ`map`æ˜¯ç»Ÿè®¡å­—ç¬¦/å…ƒç´ å‡ºç°æ¬¡æ•°çš„å¸¸ç”¨å·¥å…·ï¼Œå¯ç”¨äºè§£å†³é¢‘ç‡ç›¸å…³çš„é—®é¢˜ï¼ˆå¦‚æ‰¾å‡ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ã€ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ç­‰ï¼‰ã€‚  

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1116** - è½¦å¢é‡ç»„  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è¦æ±‚ç»Ÿè®¡äº¤æ¢ç›¸é‚»è½¦å¢çš„æ¬¡æ•°ï¼Œä¸æœ¬é¢˜çš„â€œäº¤æ¢æ¬¡æ•°â€ç»Ÿè®¡æ€è·¯ç±»ä¼¼ï¼Œå¯å·©å›ºç»„åˆæ•°å’Œè®¡æ•°çš„åº”ç”¨ã€‚  
2. **æ´›è°· P1598** - å‚ç›´æŸ±çŠ¶å›¾  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è¦æ±‚ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°å¹¶ç»˜åˆ¶æŸ±çŠ¶å›¾ï¼Œä¸æœ¬é¢˜çš„â€œå­—ç¬¦è®¡æ•°â€éƒ¨åˆ†æ€è·¯ä¸€è‡´ï¼Œå¯å·©å›ºæ¡¶æ•°ç»„çš„ä½¿ç”¨ã€‚  
3. **æ´›è°· P2670** - æ‰«é›·æ¸¸æˆ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è¦æ±‚ç»Ÿè®¡æ¯ä¸ªæ ¼å­å‘¨å›´çš„é›·æ•°ï¼Œä¸æœ¬é¢˜çš„â€œç»Ÿè®¡å‘¨å›´å…ƒç´ â€æ€è·¯ç±»ä¼¼ï¼Œå¯å·©å›ºéå†å’Œè®¡æ•°çš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
- **__ATRI__çš„ç»éªŒ**ï¼šâ€œåœ¨å¤„ç†å¤§æ•°æ®é‡æ—¶ï¼Œç”¨æ¡¶æ•°ç»„æ¯”mapæ›´é«˜æ•ˆï¼Œå› ä¸ºmapçš„æŸ¥è¯¢æ—¶é—´æ˜¯O(log n)ï¼Œè€Œæ¡¶æ•°ç»„æ˜¯O(1)ã€‚â€  
  **ç‚¹è¯„**ï¼šè¿™æé†’æˆ‘ä»¬ï¼Œåœ¨ç»Ÿè®¡å›ºå®šèŒƒå›´çš„å…ƒç´ ï¼ˆå¦‚26ä¸ªå­—æ¯ï¼‰æ—¶ï¼Œæ¡¶æ•°ç»„æ˜¯æ›´ä¼˜çš„é€‰æ‹©ï¼Œå¯æå‡ä»£ç æ•ˆç‡ã€‚  
- **kkxacjçš„ç»éªŒ**ï¼šâ€œç»„åˆæ•°çš„è®¡ç®—è¦æ³¨æ„ç±»å‹æº¢å‡ºï¼Œå¿…é¡»ç”¨long longç±»å‹ã€‚â€  
  **ç‚¹è¯„**ï¼šè¿™å¼ºè°ƒäº†æ•°æ®ç±»å‹çš„é‡è¦æ€§ï¼Œå¤„ç†å¤§æ•°æ—¶ä¸€å®šè¦é€‰æ‹©åˆé€‚çš„ç±»å‹ï¼Œé¿å…æº¢å‡ºé”™è¯¯ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[ABC345C] One Time Swapâ€çš„åˆ†æï¼Œæˆ‘ä»¬å­¦ä¹ äº†**æ•°å­¦è®¡æ•°**å’Œ**å­—ç¬¦ä¸²å¤„ç†**çš„æ ¸å¿ƒæ€è·¯ï¼ŒæŒæ¡äº†ç”¨ç»„åˆæ•°å…¬å¼ä¼˜åŒ–è®¡æ•°çš„æ–¹æ³•ï¼Œä»¥åŠæ¡¶æ•°ç»„/Mapç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°çš„æŠ€å·§ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£è¿™ç±»é—®é¢˜çš„è§£å†³æ€è·¯ï¼Œæå‡ç¼–ç¨‹èƒ½åŠ›ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š245.39ç§’
# é¢˜ç›®ä¿¡æ¯

# [ABC317E] Avoid Eye Contact

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/abc317/tasks/abc317_e

$ H $ è¡Œ $ W $ åˆ—ã®ã‚°ãƒªãƒƒãƒ‰çŠ¶ã«åˆ†å‰²ã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚  
åŒ— (ä¸Šå´) ã‹ã‚‰ $ i $ è¡Œç›®ã€è¥¿ (å·¦å´) ã‹ã‚‰ $ j $ åˆ—ç›®ã®ãƒã‚¹ã¯æ–‡å­— $ A_{i,\ j} $ ã§è¡¨ã•ã‚Œã¾ã™ã€‚å„æ–‡å­—ã®æ„å‘³ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚

- `.` : ç©ºããƒã‚¹ã€‚é€²å…¥ã§ãã‚‹ã€‚
- `#` : éšœå®³ç‰©ã€‚é€²å…¥ã§ããªã„ã€‚
- `>`, `v`, `<`, `^` : ãã‚Œãã‚Œæ±ãƒ»å—ãƒ»è¥¿ãƒ»åŒ—ã‚’å‘ã„ã¦ã„ã‚‹äººãŒã„ã‚‹ãƒã‚¹ã€‚é€²å…¥ã§ããªã„ã€‚äººã®è¦–ç·šã¯ $ 1 $ ãƒã‚¹åˆ†ã®å¹…ã‚’æŒã¡ã€äººãŒå‘ã„ã¦ã„ã‚‹æ–¹å‘ã«ã¾ã£ã™ãä¼¸ã³ã€éšœå®³ç‰©ã‚„åˆ¥ã®äººã«é®ã‚‰ã‚Œã‚‹ã€‚(å…¥å‡ºåŠ›ä¾‹ $ 1 $ ã«ã‚ã‚‹èª¬æ˜ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚)
- `S` : ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã€‚é€²å…¥ã§ãã‚‹ã€‚ã¡ã‚‡ã†ã© $ 1 $ ãƒµæ‰€ã ã‘å­˜åœ¨ã™ã‚‹ã€‚äººã®è¦–ç·šã«å…¥ã£ã¦ã„ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ã€‚
- `G` : ã‚´ãƒ¼ãƒ«åœ°ç‚¹ã€‚é€²å…¥ã§ãã‚‹ã€‚ã¡ã‚‡ã†ã© $ 1 $ ãƒµæ‰€ã ã‘å­˜åœ¨ã™ã‚‹ã€‚äººã®è¦–ç·šã«å…¥ã£ã¦ã„ãªã„ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ã€‚

ãƒŠã‚ªãƒ’ãƒ­ãã‚“ã¯ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã«ã„ã¦ã€æ±è¥¿å—åŒ—ã¸ã® $ 1 $ ãƒã‚¹åˆ†ã®ç§»å‹•ã‚’å¥½ããªå›æ•°è¡Œãˆã¾ã™ã€‚ãŸã ã—ã€é€²å…¥ã§ããªã„ãƒã‚¹ã¸ã®ç§»å‹•ã‚„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å¤–ã¸ã®ç§»å‹•ã¯ã§ãã¾ã›ã‚“ã€‚  
å½¼ãŒäººã®è¦–ç·šã«ä¸€åº¦ã‚‚å…¥ã‚‰ãšã«ã‚´ãƒ¼ãƒ«åœ°ç‚¹ã«åˆ°é”ã§ãã‚‹ã‹åˆ¤å®šã—ã¦ã€ã§ãã‚‹å ´åˆã¯ãã®ãŸã‚ã«æœ€å°ã§ä½•å›ã®ç§»å‹•ãŒå¿…è¦ã‹æ±‚ã‚ã¦ãã ã•ã„ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 2\ \leq\ H,\ W\ \leq\ 2000 $
- $ A_{i,j} $ ã¯ `.`, `#`, `>`, `v`, `<`, `^`, `S`, `G` ã®ã„ãšã‚Œã‹ã§ã‚ã‚‹
- `S`, `G` ã¯ $ A_{i,\ j} $ ã®ä¸­ã«ã¡ã‚‡ã†ã© $ 1 $ å›ãšã¤ç¾ã‚Œã‚‹
- ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ãƒ»ã‚´ãƒ¼ãƒ«åœ°ç‚¹ã¯ã¨ã‚‚ã«äººã®è¦–ç·šã«å…¥ã£ã¦ã„ãªã„

### Sample Explanation 1

å…¥åŠ›ä¾‹ $ 1 $ ã«ã¤ã„ã¦ã€$ 1 $ äººä»¥ä¸Šã®è¦–ç·šã«å…¥ã£ã¦ã„ã‚‹ç©ºããƒã‚¹ã‚’ `!` ã§è¡¨ã™ã¨æ¬¡ã®å›³ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ !\[image2\](https://img.atcoder.jp/abc317/8a40fc4c621cfef326cc25a1f69c0300.jpg) ã„ãã¤ã‹ã®ãƒã‚¹ã«ã¤ã„ã¦å…·ä½“çš„ã«èª¬æ˜ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚(ã“ã“ã§ã€åŒ—ã‹ã‚‰ $ i $ è¡Œç›®ã€è¥¿ã‹ã‚‰ $ j $ åˆ—ç›®ã®ãƒã‚¹ã‚’ $ (i,\ j) $ ã¨è¡¨ã—ã¾ã™ã€‚) - $ (2,\ 4) $ ã¯ $ (2,\ 2) $ ã«ã„ã‚‹æ±ã‚’å‘ã„ã¦ã„ã‚‹äººã‹ã‚‰ã®è¦–ç·šã«å…¥ã£ã¦ã„ã‚‹ãƒã‚¹ã§ã‚ã‚‹ã€‚ - $ (2,\ 6) $ ã¯ $ (2,\ 2) $ ã«ã„ã‚‹æ±ã‚’å‘ã„ã¦ã„ã‚‹äººã¨ $ (1,\ 6) $ ã«ã„ã‚‹å—ã‚’å‘ã„ã¦ã„ã‚‹äººã® $ 2 $ äººã®è¦–ç·šã«å…¥ã£ã¦ã„ã‚‹ãƒã‚¹ã§ã‚ã‚‹ã€‚ - $ (4,\ 5) $ ã¯èª°ã®è¦–ç·šã«ã‚‚å…¥ã£ã¦ã„ãªã„ãƒã‚¹ã§ã‚ã‚‹ã€‚$ (4,\ 7) $ ã«ã„ã‚‹è¥¿ã‚’å‘ã„ã¦ã„ã‚‹äººã®è¦–ç·šã¯ $ (4,\ 6) $ ã®éšœå®³ç‰©ã«é®ã‚‰ã‚Œã¦ã„ã¦ã€$ (4,\ 1) $ ã«ã„ã‚‹æ±ã‚’å‘ã„ã¦ã„ã‚‹äººã®è¦–ç·šã¯ $ (4,\ 4) $ ã®äººã«é®ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ ãƒŠã‚ªãƒ’ãƒ­å›ã¯é€²å…¥ã§ããªã„ãƒã‚¹ãƒ»è¦–ç·šã«å…¥ã£ã¦ã„ã‚‹ãƒã‚¹ã®ã©ã¡ã‚‰ã‚‚é€šã‚‰ãšã«ã‚´ãƒ¼ãƒ«åœ°ç‚¹ã¸è¡Œãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### Sample Explanation 2

ãƒŠã‚ªãƒ’ãƒ­å›ãŒã‚´ãƒ¼ãƒ«åœ°ç‚¹ã«åˆ°é”ã§ããªã„å ´åˆã¯ `-1` ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 7
....Sv.
.>.....
.......
>..<.#<
^G....>```

### è¾“å‡º

```
15```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4 3
S..
.<.
.>.
..G```

### è¾“å‡º

```
-1```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ABC317E] Avoid Eye Contact æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š**å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰** + **é¢„å¤„ç†æŠ€æœ¯**  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œé¿å…çœ¼ç¥æ¥è§¦â€é—®é¢˜ï¼Œæ ¸å¿ƒæ˜¯**æ‰¾ä»èµ·ç‚¹Såˆ°ç»ˆç‚¹Gçš„æœ€çŸ­è·¯å¾„**ï¼Œä½†ä¸èƒ½èµ°éšœç¢ã€ä¸èƒ½èµ°æœ‰äººçš„æ ¼å­ï¼Œä¹Ÿä¸èƒ½è¿›å…¥äººçš„è§†çº¿èŒƒå›´ã€‚è¿™å°±åƒåœ¨ä¸€ä¸ªâ€œæœ‰ç¦åŒºçš„è¿·å®«â€é‡Œæ‰¾æœ€çŸ­è·¯çº¿ï¼Œè€Œ**BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰**æ˜¯è§£å†³è¿™ç±»â€œæœ€çŸ­æ­¥æ•°â€é—®é¢˜çš„â€œç¥å™¨â€â€”â€”å®ƒåƒå¾€æ°´é‡Œæ‰”çŸ³å¤´ï¼Œæ¶Ÿæ¼ªï¼ˆæœç´¢èŒƒå›´ï¼‰é€å±‚æ‰©æ•£ï¼Œç¬¬ä¸€æ¬¡ç¢°åˆ°ç»ˆç‚¹çš„è·¯å¾„å°±æ˜¯æœ€çŸ­çš„ã€‚  

**é¢„å¤„ç†è§†çº¿**æ˜¯å…³é”®ï¼šæˆ‘ä»¬éœ€è¦å…ˆæŠŠæ‰€æœ‰äººçš„è§†çº¿èŒƒå›´æ ‡è®°ä¸ºâ€œç¦åŒºâ€ï¼ˆä¸èƒ½èµ°ï¼‰ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæœå³çš„äººï¼ˆ`>`ï¼‰ï¼Œä»–çš„è§†çº¿ä¼šæ²¿ç€å³è¾¹ä¸€ç›´å»¶ä¼¸ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ï¼ˆ`#`ï¼‰æˆ–å…¶ä»–äººâ€”â€”è¿™äº›è¢«çœ‹åˆ°çš„æ ¼å­éƒ½è¦æ ‡è®°ä¸ºâ€œä¸èƒ½èµ°â€ã€‚é¢„å¤„ç†å®Œæˆåï¼Œå‰©ä¸‹çš„é—®é¢˜å°±æ˜¯æ ‡å‡†çš„â€œè¿·å®«æœ€çŸ­è·¯å¾„â€é—®é¢˜ï¼Œç”¨BFSè§£å†³å³å¯ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. **è¯»å…¥ç½‘æ ¼**ï¼šè®°å½•Så’ŒGçš„ä½ç½®ã€‚  
2. **é¢„å¤„ç†è§†çº¿**ï¼šéå†æ¯ä¸ªäººï¼Œæ²¿ç€å…¶æœå‘æ ‡è®°è§†çº¿èŒƒå›´å†…çš„æ ¼å­ã€‚  
3. **BFSæ±‚æœ€çŸ­è·¯å¾„**ï¼šä»Så‡ºå‘ï¼Œå‘å››ä¸ªæ–¹å‘æ‰©æ•£ï¼Œè®°å½•æ¯æ­¥çš„æ­¥æ•°ï¼Œç›´åˆ°åˆ°è¾¾Gã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰å±•ç¤ºç½‘æ ¼ï¼š  
- Sç”¨**çº¢è‰²æ–¹å—**è¡¨ç¤ºï¼ŒGç”¨**ç»¿è‰²æ–¹å—**è¡¨ç¤ºã€‚  
- éšœç¢ï¼ˆ`#`ï¼‰å’Œäººï¼ˆ`>`/`<`/`^`/`v`ï¼‰ç”¨**é»‘è‰²æ–¹å—**è¡¨ç¤ºã€‚  
- è§†çº¿èŒƒå›´ç”¨**ç°è‰²æ–¹å—**è¡¨ç¤ºï¼ˆé¢„å¤„ç†æ—¶é€æ¸â€œæŸ“ç°â€ï¼‰ã€‚  
- BFSè¿‡ç¨‹ç”¨**è“è‰²æ¶Ÿæ¼ª**è¡¨ç¤ºï¼ˆæ¯ä¸€æ­¥æ‰©æ•£çš„åŒºåŸŸï¼‰ï¼Œåˆ°è¾¾Gæ—¶æ’­æ”¾â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼ˆæ¯”å¦‚FCæ¸¸æˆçš„â€œå®~â€ï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šran_qwqï¼Œèµï¼š12ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£çš„æ€è·¯**éå¸¸ç®€æ´ç›´æ¥**ï¼Œå®Œç¾è´´åˆâ€œé¢„å¤„ç†+BFSâ€çš„æ ¸å¿ƒé€»è¾‘ã€‚ä½œè€…é¦–å…ˆéå†æ¯ä¸ªäººï¼Œæ²¿ç€å…¶æœå‘æ ‡è®°è§†çº¿èŒƒå›´ï¼ˆæ¯”å¦‚æœå³çš„äººï¼Œä»ä»–çš„ä½ç½®å‘å³ç›´åˆ°ç¢°åˆ°éšœç¢ï¼Œæ‰€æœ‰`.`çš„æ ¼å­éƒ½æ ‡è®°ä¸ºä¸èƒ½èµ°ï¼‰ã€‚ç„¶åç”¨BFSä»Så‡ºå‘ï¼Œæ‰¾æœ€çŸ­è·¯å¾„åˆ°Gã€‚ä»£ç é€»è¾‘æ¸…æ™°ï¼Œå˜é‡åç®€æ´ï¼ˆæ¯”å¦‚ç”¨`use`æ•°ç»„æ ‡è®°è§†çº¿èŒƒå›´ï¼‰ï¼Œ**æ—¶é—´å¤æ‚åº¦O(HW)**ï¼ˆæ¯ä¸ªæ ¼å­æœ€å¤šè¢«æ ‡è®°ä¸€æ¬¡ï¼‰ï¼Œå®Œå…¨ç¬¦åˆé¢˜ç›®è¦æ±‚ï¼ˆHã€Wâ‰¤2000ï¼‰ã€‚  

### é¢˜è§£äºŒï¼ˆæ¥æºï¼šFinderHTï¼Œèµï¼š2ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£çš„**ä»£ç è§„èŒƒæ€§**å¾ˆå¼ºï¼Œå˜é‡åï¼ˆæ¯”å¦‚`a`/`b`è®°å½•Sçš„ä½ç½®ï¼Œ`c`/`d`è®°å½•Gçš„ä½ç½®ï¼‰éå¸¸æ¸…æ™°ï¼Œå®¹æ˜“ç†è§£ã€‚é¢„å¤„ç†éƒ¨åˆ†ç”¨äº†**å¾ªç¯éå†æ¯ä¸ªæ–¹å‘**ï¼ˆæ¯”å¦‚æœå³çš„äººï¼Œç”¨`y=j+1`å¾ªç¯å‘å³æ ‡è®°ï¼‰ï¼Œé€»è¾‘ä¸¥è°¨ã€‚BFSéƒ¨åˆ†ç”¨`queue`å­˜å‚¨å¾…å¤„ç†çš„èŠ‚ç‚¹ï¼Œæ¯ä¸€æ­¥éƒ½æ£€æŸ¥æ˜¯å¦è¶Šç•Œã€æ˜¯å¦æ˜¯ç¦åŒºï¼Œ**è¾¹ç•Œå¤„ç†éå¸¸åˆ°ä½**ã€‚  

### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šDream_poetryï¼Œèµï¼š1ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£çš„**é¢„å¤„ç†æ–¹æ³•**å¾ˆç›´è§‚ï¼šå¯¹äºæ¯ä¸ªæ–¹å‘çš„äººï¼ˆæ¯”å¦‚`^`ï¼‰ï¼Œç”¨å¾ªç¯æ²¿ç€æœå‘æ ‡è®°ï¼ˆæ¯”å¦‚`ii=i-1`å‘ä¸Šèµ°ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ï¼‰ã€‚BFSéƒ¨åˆ†ç”¨`pair`å­˜å‚¨åæ ‡ï¼Œ`fff`æ•°ç»„è®°å½•æ­¥æ•°ï¼Œ**ä»£ç ç»“æ„æ¸…æ™°**ã€‚ä½œè€…è¿˜ç‰¹åˆ«æåˆ°â€œå¦‚æœç»ˆç‚¹æ­¥æ•°ä¸º0åˆ™è¾“å‡º-1â€ï¼Œ**è€ƒè™‘äº†æ— è§£çš„æƒ…å†µ**ï¼Œéå¸¸ä¸¥è°¨ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šæ­£ç¡®æ ‡è®°è§†çº¿èŒƒå›´**  
**é—®é¢˜**ï¼šå¦‚ä½•é¿å…æ ‡è®°éšœç¢åé¢çš„æ ¼å­ï¼Ÿæ¯”å¦‚ï¼Œä¸€ä¸ªæœå³çš„äººï¼Œå³è¾¹æœ‰ä¸€ä¸ªéšœç¢ï¼Œé‚£ä¹ˆéšœç¢åé¢çš„æ ¼å­ä¸ä¼šè¢«çœ‹åˆ°ã€‚  
**ç­–ç•¥**ï¼šéå†æ¯ä¸ªäººæ—¶ï¼Œæ²¿ç€å…¶æœå‘ç§»åŠ¨ï¼Œç›´åˆ°ç¢°åˆ°**é`.`çš„æ ¼å­**ï¼ˆéšœç¢ã€äººã€Sã€Gï¼‰å°±åœæ­¢ã€‚æ¯”å¦‚ï¼Œæœå³çš„äººï¼Œå¾ªç¯`y=j+1`ï¼Œå¦‚æœ`ch[i][y]`ä¸æ˜¯`.`ï¼Œå°±åœæ­¢æ ‡è®°ã€‚  

### 2. **éš¾ç‚¹2ï¼šBFSçš„è¾¹ç•Œå¤„ç†**  
**é—®é¢˜**ï¼šå¦‚ä½•é¿å…èµ°å‡ºå»ç½‘æ ¼ï¼Œæˆ–è€…èµ°å·²ç»è®¿é—®è¿‡çš„æ ¼å­ï¼Ÿ  
**ç­–ç•¥**ï¼šåœ¨BFSçš„æ¯ä¸€æ­¥ï¼Œæ£€æŸ¥æ–°åæ ‡æ˜¯å¦åœ¨ç½‘æ ¼å†…ï¼ˆ`xx>=1 && xx<=h && yy>=1 && yy<=w`ï¼‰ï¼Œæ˜¯å¦æœªè¢«è®¿é—®è¿‡ï¼ˆ`!fff[xx][yy]`ï¼‰ï¼Œæ˜¯å¦æ˜¯ç¦åŒºï¼ˆ`ch[xx][yy]!='!'`ç­‰ï¼‰ã€‚  

### 3. **éš¾ç‚¹3ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆå¤§ç½‘æ ¼å¤„ç†ï¼‰**  
**é—®é¢˜**ï¼šHã€Wâ‰¤2000ï¼Œç½‘æ ¼æœ‰4e6ä¸ªæ ¼å­ï¼Œå¦‚ä½•ä¿è¯é¢„å¤„ç†å’ŒBFSä¸è¶…æ—¶ï¼Ÿ  
**ç­–ç•¥**ï¼šé¢„å¤„ç†æ—¶ï¼Œæ¯ä¸ªæ ¼å­æœ€å¤šè¢«æ ‡è®°ä¸€æ¬¡ï¼ˆæ¯”å¦‚è§†çº¿èŒƒå›´çš„æ ¼å­åªä¼šè¢«ä¸€ä¸ªäººæ ‡è®°ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦O(HW)ã€‚BFSæ—¶ï¼Œæ¯ä¸ªæ ¼å­æœ€å¤šå…¥é˜Ÿä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(HW)ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é¢„å¤„ç†ä¼˜å…ˆ**ï¼šå…ˆå¤„ç†æ‰€æœ‰ç¦åŒºï¼ˆè§†çº¿ã€éšœç¢ã€äººï¼‰ï¼Œå†åšBFSï¼Œé¿å…é‡å¤åˆ¤æ–­ã€‚  
- **BFSç”¨é˜Ÿåˆ—**ï¼šé˜Ÿåˆ—æ˜¯BFSçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œèƒ½ä¿è¯â€œé€å±‚æ‰©æ•£â€ï¼Œæ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚  
- **æ ‡è®°å·²è®¿é—®**ï¼šç”¨æ•°ç»„ï¼ˆæ¯”å¦‚`fff`ï¼‰è®°å½•å·²è®¿é—®çš„æ ¼å­ï¼Œé¿å…é‡å¤å¤„ç†ï¼Œæé«˜æ•ˆç‡ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†ran_qwqã€FinderHTã€Dream_poetryçš„é¢˜è§£æ€è·¯ï¼Œæç‚¼å‡ºæœ€ç®€æ´çš„æ ¸å¿ƒå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <queue>
  #include <vector>
  using namespace std;
  
  const int dx[] = {1, -1, 0, 0};
  const int dy[] = {0, 0, 1, -1};
  char ch[2005][2005];
  bool use[2005][2005]; // æ ‡è®°è§†çº¿èŒƒå›´
  int fff[2005][2005]; // è®°å½•æ­¥æ•°
  int h, w, sx, sy, ex, ey;
  
  void bfs() {
      queue<pair<int, int>> q;
      q.push({sx, sy});
      fff[sx][sy] = 0;
      while (!q.empty()) {
          auto [x, y] = q.front();
          q.pop();
          for (int i = 0; i < 4; i++) {
              int xx = x + dx[i], yy = y + dy[i];
              if (xx >= 1 && xx <= h && yy >= 1 && yy <= w && !fff[xx][yy] && !use[xx][yy] && ch[xx][yy] != '#' && ch[xx][yy] != '>' && ch[xx][yy] != '<' && ch[xx][yy] != '^' && ch[xx][yy] != 'v') {
                  fff[xx][yy] = fff[x][y] + 1;
                  q.push({xx, yy});
              }
          }
      }
  }
  
  int main() {
      cin >> h >> w;
      for (int i = 1; i <= h; i++) {
          for (int j = 1; j <= w; j++) {
              cin >> ch[i][j];
              if (ch[i][j] == 'S') sx = i, sy = j;
              if (ch[i][j] == 'G') ex = i, ey = j;
          }
      }
      // é¢„å¤„ç†è§†çº¿èŒƒå›´
      for (int i = 1; i <= h; i++) {
          for (int j = 1; j <= w; j++) {
              if (ch[i][j] == '>') {
                  int y = j + 1;
                  while (y <= w && ch[i][y] == '.') use[i][y++] = true;
              } else if (ch[i][j] == '<') {
                  int y = j - 1;
                  while (y >= 1 && ch[i][y] == '.') use[i][y--] = true;
              } else if (ch[i][j] == 'v') {
                  int x = i + 1;
                  while (x <= h && ch[x][j] == '.') use[x++][j] = true;
              } else if (ch[i][j] == '^') {
                  int x = i - 1;
                  while (x >= 1 && ch[x][j] == '.') use[x--][j] = true;
              }
          }
      }
      bfs();
      if (fff[ex][ey] != 0) cout << fff[ex][ey] << endl;
      else cout << -1 << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¯»å…¥ç½‘æ ¼**ï¼šè®°å½•Så’ŒGçš„ä½ç½®ã€‚  
  2. **é¢„å¤„ç†è§†çº¿**ï¼šéå†æ¯ä¸ªäººï¼Œæ²¿ç€å…¶æœå‘æ ‡è®°è§†çº¿èŒƒå›´å†…çš„`.`æ ¼å­ï¼ˆç”¨`use`æ•°ç»„ï¼‰ã€‚  
  3. **BFSæ±‚æœ€çŸ­è·¯å¾„**ï¼šä»Så‡ºå‘ï¼Œç”¨é˜Ÿåˆ—å­˜å‚¨å¾…å¤„ç†çš„èŠ‚ç‚¹ï¼Œæ¯ä¸€æ­¥å‘å››ä¸ªæ–¹å‘æ‰©æ•£ï¼Œè®°å½•æ­¥æ•°ï¼ˆç”¨`fff`æ•°ç»„ï¼‰ã€‚  
  4. **è¾“å‡ºç»“æœ**ï¼šå¦‚æœGçš„æ­¥æ•°ä¸ä¸º0ï¼Œè¾“å‡ºæ­¥æ•°ï¼›å¦åˆ™è¾“å‡º-1ã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šran_qwqï¼‰  
* **äº®ç‚¹**ï¼šé¢„å¤„ç†è§†çº¿çš„é€»è¾‘éå¸¸ç®€æ´ï¼Œç”¨`while`å¾ªç¯æ²¿ç€æœå‘æ ‡è®°ï¼Œç›´åˆ°ç¢°åˆ°é`.`çš„æ ¼å­ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 1; i <= h; i++) {
      for (int j = 1; j <= w; j++) {
          if (ch[i][j] == '>') {
              int y = j + 1;
              while (y <= w && ch[i][y] == '.') use[i][y++] = true;
          }
          // å…¶ä»–æ–¹å‘ç±»ä¼¼
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  å¯¹äºæœå³çš„äººï¼ˆ`>`ï¼‰ï¼Œä»ä»–çš„ä½ç½®ï¼ˆ`i,j`ï¼‰å‘å³ç§»åŠ¨ï¼ˆ`y=j+1`ï¼‰ï¼Œåªè¦`y`åœ¨ç½‘æ ¼å†…ä¸”`ch[i][y]`æ˜¯`.`ï¼ˆç©ºæ ¼å­ï¼‰ï¼Œå°±æ ‡è®°`use[i][y]`ä¸º`true`ï¼ˆè§†çº¿èŒƒå›´ï¼‰ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢æˆ–å…¶ä»–äººã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†æ—¶ï¼Œè¦â€œåŠæ—¶åœæ­¢â€â€”â€”ç¢°åˆ°é`.`çš„æ ¼å­å°±åœæ­¢æ ‡è®°ï¼Œé¿å…é”™è¯¯æ ‡è®°éšœç¢åé¢çš„æ ¼å­ã€‚  


#### é¢˜è§£äºŒï¼ˆæ¥æºï¼šFinderHTï¼‰  
* **äº®ç‚¹**ï¼šBFSçš„è¾¹ç•Œå¤„ç†éå¸¸ä¸¥è°¨ï¼Œæ£€æŸ¥äº†æ‰€æœ‰ä¸èƒ½èµ°çš„æƒ…å†µã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 0; i < 4; i++) {
      int xx = tmp.fst + dx[i];
      int yy = tmp.snd + dy[i];
      if (xx > 0 && xx <= h && yy > 0 && yy <= w && 
          s[xx][yy] != '#' && s[xx][yy] != '<' && s[xx][yy] != '>' && s[xx][yy] != '^' && s[xx][yy] != 'v' && 
          !ans[xx][yy] && !use[xx][yy]) {
          q.push(make_pair(xx, yy));
          ans[xx][yy] = ans[tmp.fst][tmp.snd] + 1;
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  åœ¨BFSçš„æ¯ä¸€æ­¥ï¼Œæ£€æŸ¥æ–°åæ ‡ï¼ˆ`xx,yy`ï¼‰æ˜¯å¦åœ¨ç½‘æ ¼å†…ï¼ˆ`xx>0 && xx<=h`ï¼‰ï¼Œæ˜¯å¦ä¸æ˜¯éšœç¢ï¼ˆ`s[xx][yy]!='#'`ï¼‰ï¼Œæ˜¯å¦ä¸æ˜¯äººï¼ˆ`s[xx][yy]!='<'`ç­‰ï¼‰ï¼Œæ˜¯å¦æœªè¢«è®¿é—®è¿‡ï¼ˆ`!ans[xx][yy]`ï¼‰ï¼Œæ˜¯å¦ä¸åœ¨è§†çº¿èŒƒå›´ï¼ˆ`!use[xx][yy]`ï¼‰ã€‚åªæœ‰æ‰€æœ‰æ¡ä»¶éƒ½æ»¡è¶³ï¼Œæ‰å°†è¯¥èŠ‚ç‚¹å…¥é˜Ÿï¼Œå¹¶è®°å½•æ­¥æ•°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šBFSçš„è¾¹ç•Œå¤„ç†è¦â€œå…¨é¢â€ï¼Œé¿å…æ¼æ‰ä»»ä½•ä¸èƒ½èµ°çš„æƒ…å†µï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ï¼ˆæ¯”å¦‚èµ°åˆ°è§†çº¿èŒƒå›´é‡Œï¼‰ã€‚  


#### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šDream_poetryï¼‰  
* **äº®ç‚¹**ï¼šç”¨`pair`å­˜å‚¨åæ ‡ï¼Œé˜Ÿåˆ—æ“ä½œéå¸¸æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  queue<pair<int, int>> q;
  q.push({sx, sy});
  while (!q.empty()) {
      int x = q.front().first;
      int y = q.front().second;
      q.pop();
      for (int i = 0; i < 4; i++) {
          int xx = x + dx[i];
          int yy = y + dy[i];
          if (xx >= 1 && xx <= h && yy >= 1 && yy <= w && !fff[xx][yy] && ch[xx][yy] != '!' && ch[xx][yy] != '#' && ch[xx][yy] != '<' && ch[xx][yy] != '>' && ch[xx][yy] != '^' && ch[xx][yy] != 'v') {
              q.push({xx, yy});
              fff[xx][yy] = fff[x][y] + 1;
          }
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  ç”¨`queue<pair<int, int>>`å­˜å‚¨å¾…å¤„ç†çš„èŠ‚ç‚¹ï¼Œ`pair`çš„`first`æ˜¯è¡Œå·ï¼Œ`second`æ˜¯åˆ—å·ã€‚æ¯æ¬¡å–å‡ºé˜Ÿé¦–èŠ‚ç‚¹ï¼Œå‘å››ä¸ªæ–¹å‘æ‰©æ•£ï¼Œç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹å…¥é˜Ÿï¼Œå¹¶è®°å½•æ­¥æ•°ï¼ˆ`fff[xx][yy] = fff[x][y] + 1`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`pair`æ˜¯C++ä¸­å­˜å‚¨åæ ‡çš„å¸¸ç”¨æ•°æ®ç»“æ„ï¼Œé…åˆé˜Ÿåˆ—ä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š**åƒç´ è¿·å®«æ¢é™©**ï¼ˆç±»ä¼¼FCæ¸¸æˆã€Šç‚¸å¼¹äººã€‹çš„é£æ ¼ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹ï¼š  
1. **ç½‘æ ¼åˆå§‹åŒ–**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºç½‘æ ¼ï¼ŒSæ˜¯çº¢è‰²æ–¹å—ï¼ˆ`S`ï¼‰ï¼ŒGæ˜¯ç»¿è‰²æ–¹å—ï¼ˆ`G`ï¼‰ï¼Œéšœç¢æ˜¯é»‘è‰²æ–¹å—ï¼ˆ`#`ï¼‰ï¼Œäººæ˜¯é»„è‰²æ–¹å—ï¼ˆ`>`/`<`/`^`/`v`ï¼‰ã€‚  
2. **é¢„å¤„ç†è§†çº¿**ï¼šäººçš„è§†çº¿èŒƒå›´é€æ¸å˜æˆç°è‰²æ–¹å—ï¼ˆ`!`ï¼‰ï¼Œæ¯”å¦‚æœå³çš„äººï¼Œå³è¾¹çš„`.`æ ¼å­æ…¢æ…¢â€œæŸ“ç°â€ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ã€‚  
3. **BFSè¿‡ç¨‹**ï¼šä»Så‡ºå‘ï¼Œè“è‰²æ¶Ÿæ¼ªï¼ˆ`BFS`æ‰©æ•£åŒºåŸŸï¼‰é€å±‚æ‰©å¤§ï¼Œæ¯ä¸€æ­¥éƒ½æ˜¾ç¤ºå½“å‰çš„æ­¥æ•°ã€‚å½“è“è‰²æ¶Ÿæ¼ªç¢°åˆ°Gæ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼ˆæ¯”å¦‚FCæ¸¸æˆçš„â€œå®~â€ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œé€šå…³ï¼æœ€çŸ­æ­¥æ•°ï¼šXâ€ã€‚  

### è®¾è®¡æ€è·¯ç®€è¿°ï¼š  
- **åƒç´ é£æ ¼**ï¼šç”¨8ä½è‰²ï¼ˆæ¯”å¦‚16è‰²ï¼‰ï¼Œç¬¦åˆé’å°‘å¹´çš„å®¡ç¾ï¼Œå”¤èµ·å¯¹ç»å…¸æ¸¸æˆçš„å›å¿†ã€‚  
- **åŠ¨ç”»èŠ‚å¥**ï¼šé¢„å¤„ç†è§†çº¿çš„åŠ¨ç”»é€Ÿåº¦è¾ƒæ…¢ï¼ˆæ¯å¸§0.5ç§’ï¼‰ï¼Œè®©å­¦ä¹ è€…çœ‹æ¸…æ¥šè§†çº¿çš„èŒƒå›´ï¼›BFSçš„åŠ¨ç”»é€Ÿåº¦è¾ƒå¿«ï¼ˆæ¯å¸§0.2ç§’ï¼‰ï¼Œå±•ç¤ºâ€œé€å±‚æ‰©æ•£â€çš„è¿‡ç¨‹ã€‚  
- **äº¤äº’åŠŸèƒ½**ï¼š  
  - å•æ­¥æ‰§è¡Œï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€æŒ‰é’®ï¼ŒæŸ¥çœ‹é¢„å¤„ç†æˆ–BFSçš„æ¯ä¸€æ­¥ã€‚  
  - è‡ªåŠ¨æ’­æ”¾ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œè‡ªåŠ¨æ’­æ”¾æ•´ä¸ªè¿‡ç¨‹ã€‚  
  - é‡ç½®ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ã€‚  

### å…³é”®å¸§ç¤ºæ„å›¾ï¼š  
| æ­¥éª¤ | ç”»é¢å†…å®¹ | éŸ³æ•ˆ |  
|------|----------|------|  
| 1    | ç½‘æ ¼åˆå§‹åŒ–ï¼šSï¼ˆçº¢ï¼‰ã€Gï¼ˆç»¿ï¼‰ã€éšœç¢ï¼ˆé»‘ï¼‰ã€äººï¼ˆé»„ï¼‰ | æ—  |  
| 2    | é¢„å¤„ç†è§†çº¿ï¼šæœå³çš„äººï¼ˆé»„ï¼‰å³è¾¹çš„`.`æ ¼å­å˜æˆç°è‰² | è½»å¾®â€œæ²™æ²™å£°â€ï¼ˆæ¯æ ‡è®°ä¸€ä¸ªæ ¼å­ï¼‰ |  
| 3    | é¢„å¤„ç†å®Œæˆï¼šæ‰€æœ‰è§†çº¿èŒƒå›´éƒ½å˜æˆç°è‰² | â€œå®â€çš„ä¸€å£°ï¼ˆé¢„å¤„ç†å®Œæˆï¼‰ |  
| 4    | BFSå¼€å§‹ï¼šSå‘¨å›´çš„æ ¼å­å˜æˆè“è‰²ï¼ˆæ­¥æ•°1ï¼‰ | â€œæ»´â€çš„ä¸€å£°ï¼ˆæ¯ä¸€æ­¥ï¼‰ |  
| 5    | BFSæ‰©æ•£ï¼šè“è‰²åŒºåŸŸé€æ¸æ‰©å¤§ï¼Œæ­¥æ•°å¢åŠ  | â€œæ»´â€çš„ä¸€å£°ï¼ˆæ¯ä¸€æ­¥ï¼‰ |  
| 6    | BFSåˆ°è¾¾Gï¼šGå˜æˆè“è‰²ï¼Œæ˜¾ç¤ºâ€œé€šå…³ï¼æœ€çŸ­æ­¥æ•°ï¼š15â€ | â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼ˆæ¯”å¦‚FCæ¸¸æˆçš„â€œå®~â€ï¼‰ |  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»ï¼š  
**BFS+é¢„å¤„ç†**çš„æ€è·¯å¯ä»¥è§£å†³å¾ˆå¤šâ€œç½‘æ ¼æœ€çŸ­è·¯å¾„â€é—®é¢˜ï¼Œæ¯”å¦‚ï¼š  
- **è¿·å®«é—®é¢˜**ï¼šä»èµ·ç‚¹åˆ°ç»ˆç‚¹ï¼Œä¸èƒ½èµ°éšœç¢ï¼Œæ±‚æœ€çŸ­æ­¥æ•°ã€‚  
- **ç–«æƒ…æ‰©æ•£é—®é¢˜**ï¼šä»å¤šä¸ªèµ·ç‚¹ï¼ˆç–«æƒ…æºï¼‰æ‰©æ•£ï¼Œæ±‚åˆ°è¾¾æŸä¸ªç‚¹çš„æœ€çŸ­æ—¶é—´ã€‚  
- **æœºå™¨äººè·¯å¾„é—®é¢˜**ï¼šæœºå™¨äººåªèƒ½å‘æŸäº›æ–¹å‘ç§»åŠ¨ï¼Œæ±‚åˆ°è¾¾ç»ˆç‚¹çš„æœ€çŸ­æ­¥æ•°ã€‚  

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰ï¼š  
1. **æ´›è°· P1141** - è¿·å®«  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯ä¸€é“ç»å…¸çš„è¿·å®«é—®é¢˜ï¼Œè¦æ±‚ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œéå¸¸é€‚åˆå·©å›ºBFSçš„åŸºç¡€ã€‚  
2. **æ´›è°· P1332** - è¡€è‰²å…ˆé”‹é˜Ÿ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦å¤„ç†å¤šä¸ªèµ·ç‚¹ï¼ˆè¡€è‰²å…ˆé”‹é˜Ÿï¼‰çš„æ‰©æ•£ï¼Œæ±‚åˆ°è¾¾ç»ˆç‚¹çš„æœ€çŸ­æ—¶é—´ï¼Œæ˜¯BFSçš„å˜å½¢åº”ç”¨ã€‚  
3. **æ´›è°· P2895** - åœ°éœ‡é€ƒç”Ÿ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜è¦æ±‚ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œä½†æ˜¯æœ‰éšœç¢ï¼Œå¹¶ä¸”éšœç¢ä¼šé€æ¸æ¶ˆå¤±ï¼Œéœ€è¦ç”¨åˆ°BFSçš„â€œåˆ†å±‚â€æ€æƒ³ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªran_qwqï¼‰**ï¼šâ€œé¢„å¤„ç†è§†çº¿æ—¶ï¼Œè¦æ³¨æ„åœæ­¢æ¡ä»¶â€”â€”ç¢°åˆ°é`.`çš„æ ¼å­å°±åœæ­¢ï¼Œå¦åˆ™ä¼šæ ‡è®°éšœç¢åé¢çš„æ ¼å­ï¼Œå¯¼è‡´é”™è¯¯ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒéå¸¸é‡è¦ã€‚é¢„å¤„ç†æ˜¯è¿™é“é¢˜çš„å…³é”®ï¼Œå¦‚æœæ ‡è®°äº†éšœç¢åé¢çš„æ ¼å­ï¼Œä¼šå¯¼è‡´BFSæ— æ³•æ‰¾åˆ°æ­£ç¡®çš„è·¯å¾„ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæœå³çš„äººï¼Œå³è¾¹æœ‰ä¸€ä¸ªéšœç¢ï¼Œé‚£ä¹ˆéšœç¢åé¢çš„æ ¼å­å…¶å®ä¸ä¼šè¢«çœ‹åˆ°ï¼Œä¸åº”è¯¥æ ‡è®°ä¸ºç¦åŒºã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[ABC317E] Avoid Eye Contactâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£BFSå’Œé¢„å¤„ç†çš„åº”ç”¨ã€‚è®°ä½ï¼Œ**é¢„å¤„ç†æ˜¯è§£å†³å¤æ‚é—®é¢˜çš„å…³é”®ï¼ŒBFSæ˜¯æ‰¾æœ€çŸ­è·¯å¾„çš„ç¥å™¨**â€”â€”åªè¦æŒæ¡äº†è¿™ä¸¤ä¸ªæŠ€å·§ï¼Œå¾ˆå¤šç½‘æ ¼é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š175.04ç§’
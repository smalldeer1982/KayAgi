# é¢˜ç›®ä¿¡æ¯

# [ABC349D] Divide Interval

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/abc349/tasks/abc349_d

éè² æ•´æ•° $ l,r\ (l\ <\ r) $ ã«å¯¾ã—ã¦ã€$ l $ ä»¥ä¸Š $ r $ æœªæº€ã®æ•´æ•°ã‚’é †ã«ä¸¦ã¹ãŸæ•°åˆ— $ (l,l+1,\ldots,r-2,r-1) $ ã‚’ $ S(l,r) $ ã§è¡¨ã—ã¾ã™ã€‚ã¾ãŸã€éè² æ•´æ•° $ i,j $ ã‚’ç”¨ã„ã¦ $ S(2^{i}j,2^{i}(j+1)) $ ã¨è¡¨ã•ã‚Œã‚‹æ•°åˆ—ã‚’è‰¯ã„æ•°åˆ—ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™ã€‚

éè² æ•´æ•° $ L,R\ (L\lt\ R) $ ãŒä¸ãˆã‚‰ã‚Œã¾ã™ã€‚æ•°åˆ— $ S(L,R) $ ã‚’ã§ãã‚‹ã ã‘å°‘ãªã„å€‹æ•°ã®è‰¯ã„æ•°åˆ—ã«åˆ†å‰²ã™ã‚‹ã¨ãã€ãã®å€‹æ•°ã¨åˆ†å‰²ã®æ–¹æ³•ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚ã‚ˆã‚Šå³å¯†ã«ã¯ã€ä»¥ä¸‹ã‚’æº€ãŸã™éè² æ•´æ•°ã®çµ„ã®åˆ— $ (l_1,r_1),(l_2,r_2),\ldots,(l_M,r_M) $ ãŒå­˜åœ¨ã™ã‚‹ã‚ˆã†ãªæ­£æ•´æ•° $ M $ ã®æœ€å°å€¤ã‚’æ±‚ã‚ã€ãã®ã¨ãã® $ (l_1,r_1),(l_2,r_2),\ldots,(l_M,r_M) $ ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

- $ L=l_1\ <\ r_1=l_2\ <\ r_2=\cdots=l_M\ <\ r_M=R $
- $ S(l_1,r_1),S(l_2,r_2),\ldots,S(l_M,r_M) $ ã¯è‰¯ã„æ•°åˆ—

ãªãŠã€$ M $ ãŒæœ€å°ã¨ãªã‚‹ã‚ˆã†ãªåˆ†å‰²æ–¹æ³•ã¯ä¸€é€šã‚Šã®ã¿å­˜åœ¨ã™ã‚‹ã“ã¨ãŒç¤ºã›ã¾ã™ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 0\leq\ L\lt\ R\leq\ 2^{60} $
- å…¥åŠ›ã¯å…¨ã¦æ•´æ•°

### Sample Explanation 1

$ S(3,19)=(3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18) $ ã§ã™ã€‚ã“ã‚Œã¯ä»¥ä¸‹ã® $ 5 $ ã¤ã®è‰¯ã„æ•°åˆ—ã«åˆ†å‰²ã§ãã€ã“ã‚ŒãŒå€‹æ•°ãŒæœ€å°ã¨ãªã‚‹ã‚ˆã†ãªåˆ†å‰²æ–¹æ³•ã§ã™ã€‚ - $ S(3,4)=S(2^0\cdot\ 3,2^0\cdot4)=(3) $ - $ S(4,8)=S(2^2\cdot\ 1,2^2\cdot\ 2)=(4,5,6,7) $ - $ S(8,16)=S(2^3\cdot\ 1,2^3\cdot\ 2)=(8,9,10,11,12,13,14,15) $ - $ S(16,18)=S(2^1\cdot\ 8,2^1\cdot\ 9)=(16,17) $ - $ S(18,19)=S(2^0\cdot\ 18,2^0\cdot\ 19)=(18) $

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 19```

### è¾“å‡º

```
5
3 4
4 8
8 16
16 18
18 19```

## æ ·ä¾‹ #2

### è¾“å…¥

```
0 1024```

### è¾“å‡º

```
1
0 1024```

## æ ·ä¾‹ #3

### è¾“å…¥

```
3940649673945088 11549545024454656```

### è¾“å‡º

```
8
3940649673945088 3940649673949184
3940649673949184 4503599627370496
4503599627370496 9007199254740992
9007199254740992 11258999068426240
11258999068426240 11540474045136896
11540474045136896 11549270138159104
11549270138159104 11549545016066048
11549545016066048 11549545024454656```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ABC349D] Divide Interval æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè´ªå¿ƒç®—æ³•ï¼ˆGreedyï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œDivide Intervalâ€çš„å…³é”®æ˜¯**è´ªå¿ƒç­–ç•¥**â€”â€”å°±åƒåƒè›‹ç³•æ—¶æ¯æ¬¡é€‰æœ€å¤§çš„ä¸€å—ï¼Œæ‰èƒ½ç”¨æœ€å°‘æ¬¡æ•°åƒå®Œã€‚è¿™é‡Œçš„â€œè›‹ç³•â€æ˜¯åŒºé—´[L, R)ï¼Œâ€œæœ€å¤§å—â€æ˜¯**å½“å‰å·¦ç«¯ç‚¹èƒ½æ‰©å±•çš„æœ€é•¿â€œå¥½åŒºé—´â€**ï¼ˆå³æ»¡è¶³S(2â±j, 2â±(j+1))çš„åŒºé—´ï¼‰ã€‚  

### æ ¸å¿ƒæ€è·¯  
æ¯æ¬¡ä»å½“å‰å·¦ç«¯ç‚¹`l`å‡ºå‘ï¼Œæ‰¾åˆ°**æœ€å¤§çš„2çš„å¹‚æ¬¡`2â±`**ï¼Œä½¿å¾—ï¼š  
1. `l`èƒ½è¢«`2â±`æ•´é™¤ï¼ˆå³`l = 2â± Ã— j`ï¼‰ï¼›  
2. æ‰©å±•åçš„å³ç«¯ç‚¹`l + 2â±`ä¸è¶…è¿‡`R`ï¼ˆå³`2â± Ã— (j+1) â‰¤ R`ï¼‰ã€‚  
ç„¶åå°†`l`æ›´æ–°ä¸º`l + 2â±`ï¼Œé‡å¤ç›´åˆ°`l = R`ã€‚  

### æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ  
- **éš¾ç‚¹1**ï¼šå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°æœ€å¤§çš„`2â±`ï¼Ÿ  
  è§£å†³æ–¹æ¡ˆï¼šé¢„å¤„ç†`2â°`åˆ°`2â¶â°`çš„æ•°ç»„ï¼ˆå› ä¸º`R`â‰¤2â¶â°ï¼‰ï¼Œä»å¤§åˆ°å°æšä¸¾`i`ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„`2â±`ã€‚  
- **éš¾ç‚¹2**ï¼šå¦‚ä½•å¤„ç†`l=0`çš„æƒ…å†µï¼Ÿ  
  è§£å†³æ–¹æ¡ˆï¼š`0`èƒ½è¢«ä»»ä½•`2â±`æ•´é™¤ï¼Œæ­¤æ—¶æœ€å¤§çš„`2â±`æ˜¯ä¸è¶…è¿‡`R`çš„æœ€å¤§2çš„å¹‚ï¼ˆå¦‚æ ·ä¾‹2ä¸­çš„`0â†’1024`ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
æˆ‘ä»¬ç”¨**FCçº¢ç™½æœºé£æ ¼**çš„åƒç´ åŠ¨ç”»æ¼”ç¤ºè´ªå¿ƒè¿‡ç¨‹ï¼š  
- **åœºæ™¯**ï¼šå±å¹•å·¦ä¾§æ˜¾ç¤ºå½“å‰åŒºé—´[L, R)ï¼Œå³ä¾§æ˜¯â€œæ“ä½œé¢æ¿â€ï¼ˆå•æ­¥/è‡ªåŠ¨æ’­æ”¾ã€é€Ÿåº¦æ»‘å—ï¼‰ã€‚  
- **åŠ¨ç”»é€»è¾‘**ï¼š  
  - å½“å‰å·¦ç«¯ç‚¹`l`ç”¨**é—ªçƒçš„çº¢è‰²åƒç´ å—**æ ‡è®°ï¼›  
  - æ‰¾åˆ°æœ€å¤§`2â±`æ—¶ï¼Œç”¨**è“è‰²çŸ©å½¢**æ¡†ä½æ‰©å±•åçš„åŒºé—´[`l`, `l+2â±`]ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
  - `l`è·³åˆ°`l+2â±`æ—¶ï¼Œç”¨**ç»¿è‰²ç®­å¤´**æŒ‡ç¤ºç§»åŠ¨æ–¹å‘ã€‚  
- **äº¤äº’è®¾è®¡**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ¬¡æ‰©å±•åŒºé—´ï¼‰å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºå®Œæ•´è¿‡ç¨‹ï¼‰ï¼Œç‚¹å‡»â€œé‡ç½®â€å¯é‡æ–°å¼€å§‹ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šlutaoquan2012ï¼Œèµï¼š7)  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æ˜¯è´ªå¿ƒç­–ç•¥çš„â€œæ ‡å‡†å®ç°â€ï¼Œæ€è·¯æ¸…æ™°åˆ°åƒâ€œè¯´æ˜ä¹¦â€ï¼ä½œè€…é¢„å¤„ç†äº†`2â°`åˆ°`2â¶â°`çš„æ•°ç»„ï¼Œç„¶åç”¨`while`å¾ªç¯ä»å¤§åˆ°å°æšä¸¾`i`ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³`l%a[i]==0`ä¸”`l+a[i]â‰¤R`çš„`2â±`ã€‚ä»£ç é£æ ¼ç®€æ´ï¼Œå˜é‡å`a`ï¼ˆå­˜å‚¨2çš„å¹‚ï¼‰ã€`h1/h2`ï¼ˆè®°å½•åŒºé—´ï¼‰å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå¦‚`l!=r`çš„å¾ªç¯æ¡ä»¶ï¼‰ã€‚ä»å®è·µè§’åº¦çœ‹ï¼Œè¿™ä»½ä»£ç å¯ä»¥ç›´æ¥ç”¨äºç«èµ›ï¼Œæ˜¯æ–°æ‰‹å­¦ä¹ è´ªå¿ƒçš„â€œæ¨¡æ¿çº§â€å‚è€ƒã€‚  

### é¢˜è§£äºŒï¼š(æ¥æºï¼šRedamancy_Lydicï¼Œèµï¼š4)  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„äº®ç‚¹æ˜¯**å‡½æ•°å°è£…**â€”â€”ç”¨`p(x)`è®¡ç®—`x`çš„æœ€å¤§2çš„å¹‚å› æ•°ï¼Œç”¨`lo(x)`è®¡ç®—ä¸è¶…è¿‡`x`çš„æœ€å¤§2çš„å¹‚ã€‚ä½œè€…ç‰¹åˆ«å¤„ç†äº†`l=0`çš„æƒ…å†µï¼ˆç›´æ¥å–æœ€å¤§2çš„å¹‚ï¼‰ï¼Œè€ƒè™‘å‘¨å…¨ã€‚ä»£ç ä¸­çš„`ansl/ansr`æ•°ç»„è®°å½•åŒºé—´ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé€‚åˆå­¦ä¹ â€œå¦‚ä½•å°†é—®é¢˜æ‹†è§£ä¸ºå‡½æ•°â€ã€‚  

### é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šç ´å£äººç½—è¾‘ï¼Œèµï¼š2)  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„â€œçµé­‚â€æ˜¯**è´ªå¿ƒçš„æ­£ç¡®æ€§è¯æ˜**ï¼ä½œè€…ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜äº†â€œæ¯æ¬¡é€‰æœ€å¤§`2â±`æ˜¯æœ€ä¼˜çš„â€ï¼Œè®©è´ªå¿ƒç­–ç•¥æœ‰äº†ç†è®ºæ”¯æ’‘ã€‚ä»£ç ä¸­ç”¨`lowbit`ï¼ˆ`x&-x`ï¼‰å¿«é€Ÿè®¡ç®—`x`çš„æœ€å°2çš„å¹‚ï¼Œç„¶åè°ƒæ•´åˆ°æœ€å¤§å¯è¡Œå€¼ï¼ŒæŠ€å·§æ€§å¼ºã€‚å¯¹äºæƒ³æ·±å…¥ç†è§£è´ªå¿ƒçš„åŒå­¦ï¼Œè¿™ä»½é¢˜è§£æ˜¯â€œå¿…çœ‹â€çš„ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å…³é”®ç‚¹1ï¼šå¦‚ä½•æ‰¾åˆ°æœ€å¤§çš„`2â±`ï¼Ÿ  
* **åˆ†æ**ï¼š  
  æœ€å¤§çš„`2â±`å¿…é¡»æ»¡è¶³`l%2â±==0`ä¸”`l+2â±â‰¤R`ã€‚é¢„å¤„ç†`2â°`åˆ°`2â¶â°`çš„æ•°ç»„ï¼Œä»å¤§åˆ°å°æšä¸¾`i`ï¼Œç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„`2â±`å°±æ˜¯ç­”æ¡ˆã€‚ä¾‹å¦‚æ ·ä¾‹1ä¸­çš„`l=3`ï¼Œé¢„å¤„ç†æ•°ç»„ä¸­çš„`2â°=1`æ˜¯ç¬¬ä¸€ä¸ªæ»¡è¶³`3%1==0`ä¸”`3+1â‰¤19`çš„`2â±`ï¼Œæ‰€ä»¥æ‰©å±•åˆ°`4`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†+ä»å¤§åˆ°å°æšä¸¾æ˜¯è§£å†³â€œæ‰¾æœ€å¤§æ»¡è¶³æ¡ä»¶çš„æ•°â€çš„å¸¸ç”¨æŠ€å·§ã€‚  

### 2. å…³é”®ç‚¹2ï¼šå¦‚ä½•å¤„ç†`l=0`çš„æƒ…å†µï¼Ÿ  
* **åˆ†æ**ï¼š  
  `0`èƒ½è¢«ä»»ä½•`2â±`æ•´é™¤ï¼Œæ­¤æ—¶æœ€å¤§çš„`2â±`æ˜¯ä¸è¶…è¿‡`R`çš„æœ€å¤§2çš„å¹‚ã€‚ä¾‹å¦‚æ ·ä¾‹2ä¸­çš„`l=0`ï¼Œ`R=1024`ï¼Œæœ€å¤§2çš„å¹‚æ˜¯`1024`ï¼Œæ‰€ä»¥ç›´æ¥æ‰©å±•åˆ°`1024`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‰¹æ®Šæƒ…å†µï¼ˆå¦‚`0`ã€è¾¹ç•Œå€¼ï¼‰éœ€è¦å•ç‹¬å¤„ç†ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚  

### 3. å…³é”®ç‚¹3ï¼šå¦‚ä½•è¯æ˜è´ªå¿ƒçš„æ­£ç¡®æ€§ï¼Ÿ  
* **åˆ†æ**ï¼š  
  è´ªå¿ƒçš„æ­£ç¡®æ€§éœ€è¦è¯æ˜â€œæ¯æ¬¡é€‰æœ€å¤§`2â±`ä¸ä¼šå¯¼è‡´åç»­æ­¥éª¤çš„æ€»æ¬¡æ•°å¢åŠ â€ã€‚ä¾‹å¦‚ï¼Œè‹¥å½“å‰é€‰äº†ä¸€ä¸ªè¾ƒå°çš„`2Ê²`ï¼ˆ`j<i`ï¼‰ï¼Œé‚£ä¹ˆåç»­éœ€è¦æ›´å¤šæ­¥éª¤æ‰èƒ½è¾¾åˆ°`R`ï¼Œæ€»æ¬¡æ•°ä¼šå¢åŠ ã€‚ç ´å£äººç½—è¾‘çš„é¢˜è§£ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜äº†è¿™ä¸€ç‚¹ï¼Œè®©è´ªå¿ƒç­–ç•¥æ›´å¯é ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒä¸æ˜¯â€œæ‹è„‘è¢‹â€ï¼Œéœ€è¦ç†è®ºè¯æ˜å…¶æœ€ä¼˜æ€§ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é¢„å¤„ç†**ï¼šæå‰è®¡ç®—`2â°`åˆ°`2â¶â°`çš„æ•°ç»„ï¼Œé¿å…é‡å¤è®¡ç®—ï¼›  
- **ä»å¤§åˆ°å°æšä¸¾**ï¼šå¿«é€Ÿæ‰¾åˆ°æœ€å¤§æ»¡è¶³æ¡ä»¶çš„`2â±`ï¼›  
- **ç‰¹æ®Šæƒ…å†µå¤„ç†**ï¼š`l=0`æ—¶ç›´æ¥å–æœ€å¤§2çš„å¹‚ï¼›  
- **ä½è¿ç®—æŠ€å·§**ï¼šç”¨`lowbit`ï¼ˆ`x&-x`ï¼‰å¿«é€Ÿè®¡ç®—`x`çš„æœ€å°2çš„å¹‚ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†lutaoquan2012å’ŒRedamancy_Lydicçš„æ€è·¯ï¼Œæ˜¯è´ªå¿ƒç­–ç•¥çš„æ ‡å‡†å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  using namespace std;
  typedef long long ll;

  ll a[65]; // å­˜å‚¨2^0åˆ°2^60
  vector<pair<ll, ll>> ans; // è®°å½•åŒºé—´

  int main() {
      // é¢„å¤„ç†2çš„å¹‚
      a[0] = 1;
      for (int i = 1; i <= 60; ++i) {
          a[i] = a[i-1] * 2;
      }
      ll l, r;
      cin >> l >> r;
      while (l < r) {
          // æ‰¾åˆ°æœ€å¤§çš„iï¼Œæ»¡è¶³l%a[i]==0ä¸”l+a[i]<=r
          int i;
          for (i = 60; i >= 0; --i) {
              if (l % a[i] == 0 && l + a[i] <= r) {
                  break;
              }
          }
          ans.push_back({l, l + a[i]});
          l += a[i];
      }
      // è¾“å‡ºç»“æœ
      cout << ans.size() << endl;
      for (auto& p : ans) {
          cout << p.first << " " << p.second << endl;
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. é¢„å¤„ç†`a`æ•°ç»„å­˜å‚¨`2â°`åˆ°`2â¶â°`ï¼›  
  2. è¯»å–`l`å’Œ`r`ï¼Œè¿›å…¥å¾ªç¯ç›´åˆ°`l == r`ï¼›  
  3. ä»å¤§åˆ°å°æšä¸¾`i`ï¼Œæ‰¾åˆ°æœ€å¤§çš„`2â±`ï¼›  
  4. è®°å½•åŒºé—´å¹¶æ›´æ–°`l`ï¼›  
  5. è¾“å‡ºç»“æœã€‚  

### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼ˆlutaoquan2012ï¼‰  
* **äº®ç‚¹**ï¼šé¢„å¤„ç†+ä»å¤§åˆ°å°æšä¸¾ï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  while (l != r) {
      for (int i = 60; i >= 0; --i) {
          if (l % a[i] == 0 && l + a[i] <= r) {
              h1[++ans] = l;
              h2[ans] = l + a[i];
              l += a[i];
              break;
          }
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  å¾ªç¯æ¡ä»¶`l != r`è¡¨ç¤ºè¿˜æ²¡å¤„ç†å®Œæ‰€æœ‰åŒºé—´ã€‚`for`å¾ªç¯ä»`i=60`ï¼ˆæœ€å¤§çš„2çš„å¹‚ï¼‰å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³`l%a[i]==0`ä¸”`l+a[i]<=r`çš„`i`ã€‚æ‰¾åˆ°åï¼Œè®°å½•åŒºé—´`[l, l+a[i]]`ï¼Œå¹¶å°†`l`æ›´æ–°ä¸º`l+a[i]`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä»å¤§åˆ°å°æšä¸¾æ˜¯æ‰¾æœ€å¤§æ»¡è¶³æ¡ä»¶çš„æ•°çš„å…³é”®ã€‚  

#### é¢˜è§£äºŒï¼ˆRedamancy_Lydicï¼‰  
* **äº®ç‚¹**ï¼šå‡½æ•°å°è£…ï¼Œå¤„ç†`l=0`çš„æƒ…å†µã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int p(int x) { // è®¡ç®—xçš„æœ€å¤§2çš„å¹‚å› æ•°
      int ans = 1;
      while (x % ans == 0) {
          ans <<= 1;
      }
      return ans >> 1;
  }

  int lo(int x) { // è®¡ç®—ä¸è¶…è¿‡xçš„æœ€å¤§2çš„å¹‚
      int i;
      for (i = 1; i <= x; i <<= 1);
      return i >> 1;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  `p(x)`å‡½æ•°é€šè¿‡å¾ªç¯å·¦ç§»ï¼ˆ`<<=1`ï¼‰æ‰¾åˆ°æœ€å¤§çš„`2â±`ï¼Œä½¿å¾—`x`èƒ½è¢«`2â±`æ•´é™¤ã€‚`lo(x)`å‡½æ•°é€šè¿‡å¾ªç¯å·¦ç§»æ‰¾åˆ°ä¸è¶…è¿‡`x`çš„æœ€å¤§2çš„å¹‚ã€‚ä¾‹å¦‚ï¼Œ`x=19`æ—¶ï¼Œ`lo(x)=16`ï¼ˆ2â´ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‡½æ•°å°è£…èƒ½è®©ä»£ç æ›´æ¸…æ™°ï¼Œä¾¿äºå¤ç”¨ã€‚  

#### é¢˜è§£ä¸‰ï¼ˆç ´å£äººç½—è¾‘ï¼‰  
* **äº®ç‚¹**ï¼šä½è¿ç®—æŠ€å·§ï¼ˆ`lowbit`ï¼‰ï¼Œå¿«é€Ÿè®¡ç®—æœ€å°2çš„å¹‚ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  while (l < r) {
      if (l) {
          ll t = l & (-l); // lowbitï¼Œè®¡ç®—lçš„æœ€å°2çš„å¹‚
          while (l + t > r) {
              t >>= 1; // ç¼©å°tç›´åˆ°l+t<=r
          }
          ans[0].push_back(l);
          ans[1].push_back(l + t);
          l += t;
      } else {
          ll t = 1;
          while (t << 1 <= r) {
              t <<= 1; // æ‰¾åˆ°æœ€å¤§çš„2çš„å¹‚ä¸è¶…è¿‡r
          }
          ans[0].push_back(0);
          ans[1].push_back(t);
          l = t;
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  `l & (-l)`æ˜¯ä½è¿ç®—ä¸­çš„`lowbit`æŠ€å·§ï¼Œèƒ½å¿«é€Ÿè®¡ç®—`l`çš„æœ€å°2çš„å¹‚ï¼ˆä¾‹å¦‚ï¼Œ`l=6`ï¼ˆ110ï¼‰æ—¶ï¼Œ`lowbit=2`ï¼ˆ10ï¼‰ï¼‰ã€‚ç„¶åé€šè¿‡å¾ªç¯å³ç§»ï¼ˆ`>>=1`ï¼‰ç¼©å°`t`ï¼Œç›´åˆ°`l+t<=r`ã€‚å¯¹äº`l=0`çš„æƒ…å†µï¼Œç›´æ¥æ‰¾åˆ°æœ€å¤§çš„2çš„å¹‚ä¸è¶…è¿‡`r`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä½è¿ç®—èƒ½å¤§å¤§æé«˜ä»£ç æ•ˆç‡ï¼Œå€¼å¾—æŒæ¡ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œåƒç´ æ¢é™©å®¶â€æ‰¾å®è—**ï¼šç”¨FCé£æ ¼çš„åƒç´ ç”»é¢ï¼Œæ¨¡æ‹Ÿè´ªå¿ƒç®—æ³•æ‰©å±•åŒºé—´çš„è¿‡ç¨‹ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
- **åœºæ™¯åˆå§‹åŒ–**ï¼šå±å¹•å·¦ä¾§æ˜¾ç¤ºåŒºé—´[L, R)ï¼Œç”¨**ç°è‰²åƒç´ å—**è¡¨ç¤ºæœªå¤„ç†çš„åŒºé—´ï¼Œ**çº¢è‰²åƒç´ å—**è¡¨ç¤ºå½“å‰å·¦ç«¯ç‚¹`l`ã€‚å³ä¾§æ˜¯æ“ä½œé¢æ¿ï¼Œæœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®å’Œé€Ÿåº¦æ»‘å—ã€‚  
- **ç®—æ³•å¯åŠ¨**ï¼šç‚¹å‡»â€œå¼€å§‹â€åï¼Œ`l`å¼€å§‹é—ªçƒï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆã€‚  
- **æ ¸å¿ƒæ­¥éª¤**ï¼š  
  1. **æ‰¾æœ€å¤§`2â±`**ï¼šä»`l`å‡ºå‘ï¼Œå‘å³æ‰©å±•è“è‰²çŸ©å½¢ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å¤§çš„`2â±`ï¼ˆè“è‰²çŸ©å½¢çš„é•¿åº¦ä¸º`2â±`ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
  2. **æ›´æ–°`l`**ï¼š`l`è·³åˆ°è“è‰²çŸ©å½¢çš„å³ç«¯ç‚¹ï¼Œç”¨ç»¿è‰²ç®­å¤´æŒ‡ç¤ºç§»åŠ¨æ–¹å‘ï¼Œä¼´éšâ€œå”°â€çš„éŸ³æ•ˆã€‚  
  3. **é‡å¤**ï¼šç›´åˆ°`l`åˆ°è¾¾`R`ï¼Œå±å¹•æ˜¾ç¤ºâ€œèƒœåˆ©â€åŠ¨ç”»ï¼ˆå½©è‰²åƒç´ å—é—ªçƒï¼‰ï¼Œä¼´éšâ€œé€šå…³â€éŸ³æ•ˆã€‚  
- **äº¤äº’è®¾è®¡**ï¼š  
  - â€œå•æ­¥â€ï¼šé€æ¬¡æ‰§è¡Œä¸Šè¿°æ­¥éª¤ï¼Œä¾¿äºè§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ï¼›  
  - â€œè‡ªåŠ¨æ’­æ”¾â€ï¼šå¿«é€Ÿæ¼”ç¤ºå®Œæ•´è¿‡ç¨‹ï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒæ•´ï¼›  
  - â€œé‡ç½®â€ï¼šæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹æ¼”ç¤ºã€‚  

### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šæ¨¡æ‹ŸFCçº¢ç™½æœºçš„ç”»é¢ï¼Œè®©å­¦ä¹ è€…æ„Ÿåˆ°äº²åˆ‡ï¼Œé™ä½å­¦ä¹ å‹åŠ›ï¼›  
- **éŸ³æ•ˆæç¤º**ï¼šç”¨ä¸åŒçš„éŸ³æ•ˆæ ‡è®°å…³é”®æ“ä½œï¼ˆå¦‚â€œå®â€è¡¨ç¤ºæ‰¾åˆ°æœ€å¤§`2â±`ï¼‰ï¼Œå¼ºåŒ–è®°å¿†ï¼›  
- **äº¤äº’åŠŸèƒ½**ï¼šæ”¯æŒå•æ­¥å’Œè‡ªåŠ¨æ’­æ”¾ï¼Œæ»¡è¶³ä¸åŒå­¦ä¹ è€…çš„éœ€æ±‚ï¼ˆæ–°æ‰‹å¯ä»¥æ…¢æ…¢çœ‹ï¼Œé«˜æ‰‹å¯ä»¥å¿«é€Ÿè¿‡ï¼‰ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
è´ªå¿ƒç­–ç•¥ä¸ä»…èƒ½è§£å†³åŒºé—´åˆ’åˆ†é—®é¢˜ï¼Œè¿˜èƒ½è§£å†³ï¼š  
1. **åˆå¹¶æœå­**ï¼ˆæ¯æ¬¡åˆå¹¶æœ€å°çš„ä¸¤å †æœå­ï¼Œæ€»ä»£ä»·æœ€å°ï¼‰ï¼›  
2. **æ’é˜Ÿæ¥æ°´**ï¼ˆè®©æ¥æ°´æ—¶é—´çŸ­çš„äººå…ˆæ¥ï¼Œæ€»ç­‰å¾…æ—¶é—´æœ€çŸ­ï¼‰ï¼›  
3. **æœ€å¤§å­æ®µå’Œ**ï¼ˆæ¯æ¬¡ç´¯åŠ æ­£æ•°ï¼Œè´Ÿæ•°åˆ™é‡æ–°å¼€å§‹ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1090** - åˆå¹¶æœå­  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯è´ªå¿ƒçš„ç»å…¸é—®é¢˜ï¼Œèƒ½å¸®åŠ©ä½ å·©å›ºâ€œæ¯æ¬¡é€‰æœ€å°/æœ€å¤§â€çš„ç­–ç•¥ã€‚  
2. **æ´›è°· P2178** - æœ€å¤§å­æ®µå’Œ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜ç”¨è´ªå¿ƒè§£å†³ï¼Œèƒ½è®©ä½ ç†è§£â€œå±€éƒ¨æœ€ä¼˜å¯¼è‡´å…¨å±€æœ€ä¼˜â€çš„æ€æƒ³ã€‚  
3. **æ´›è°· P1223** - æ’é˜Ÿæ¥æ°´  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜çš„è´ªå¿ƒç­–ç•¥ä¸æœ¬é¢˜ç±»ä¼¼ï¼Œèƒ½å¸®åŠ©ä½ ä¸¾ä¸€åä¸‰ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
- **Redamancy_Lydicçš„è°ƒè¯•ç»å†**ï¼šâ€œè°ƒäº†ä¸‰æ¬¡æ‰è°ƒå‡ºæ¥ï¼Œä¸»è¦æ˜¯æ²¡å¤„ç†å¥½`l=0`çš„æƒ…å†µã€‚â€  
  **ç‚¹è¯„**ï¼šè¿™æé†’æˆ‘ä»¬ï¼Œç‰¹æ®Šæƒ…å†µï¼ˆå¦‚`0`ã€è¾¹ç•Œå€¼ï¼‰æ˜¯ä»£ç çš„â€œé›·åŒºâ€ï¼Œå¿…é¡»ä»”ç»†å¤„ç†ã€‚å¯ä»¥é€šè¿‡ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ˆå¦‚æ ·ä¾‹2ï¼‰æ¥éªŒè¯ç‰¹æ®Šæƒ…å†µçš„æ­£ç¡®æ€§ã€‚  
- **ç ´å£äººç½—è¾‘çš„è¯æ˜å¿ƒå¾—**ï¼šâ€œè´ªå¿ƒçš„æ­£ç¡®æ€§éœ€è¦è¯æ˜ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºé”™ã€‚â€  
  **ç‚¹è¯„**ï¼šè¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œè´ªå¿ƒä¸æ˜¯â€œæƒ³å½“ç„¶â€ï¼Œå¿…é¡»ç”¨ç†è®ºè¯æ˜å…¶æœ€ä¼˜æ€§ã€‚ä¾‹å¦‚ï¼Œæœ¬é¢˜çš„è´ªå¿ƒç­–ç•¥é€šè¿‡æ•°å­¦å½’çº³æ³•è¯æ˜äº†å…¶æœ€ä¼˜æ€§ï¼Œè®©æˆ‘ä»¬æ›´æœ‰ä¿¡å¿ƒä½¿ç”¨å®ƒã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[ABC349D] Divide Intervalâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼ŒæŒæ¡åŒºé—´åˆ’åˆ†çš„æŠ€å·§ã€‚è®°ä½ï¼Œè´ªå¿ƒçš„å…³é”®æ˜¯â€œæ¯æ¬¡é€‰æœ€ä¼˜ï¼Œæœ€ç»ˆå¾—å…¨å±€æœ€ä¼˜â€ï¼Œä½†ä¸€å®šè¦è¯æ˜å…¶æ­£ç¡®æ€§å“¦ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š151.38ç§’
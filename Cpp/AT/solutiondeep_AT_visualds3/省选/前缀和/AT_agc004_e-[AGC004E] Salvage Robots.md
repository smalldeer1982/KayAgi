# é¢˜ç›®ä¿¡æ¯

# [AGC004E] Salvage Robots

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/agc004/tasks/agc004_e

ç¸¦ $ H $ è¡Œã€æ¨ª $ W $ åˆ—ã®ãƒã‚¹ç›®ãŒã‚ã‚Šã¾ã™ã€‚ ä¸Šã‹ã‚‰ $ i $ ($ 1\ <\ =i\ <\ =H $) è¡Œç›®ã€å·¦ã‹ã‚‰ $ j $ ($ 1\ <\ =j\ <\ =W $) åˆ—ç›®ã®ãƒã‚¹ã®æƒ…å ±ã¯ã€æ–‡å­— $ a_{ij} $ ã«ã‚ˆã£ã¦æ¬¡ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã¾ã™ã€‚

- `.` : ç©ºããƒã‚¹ã§ã‚ã‚‹ã€‚
- `o` : ãƒ­ãƒœãƒƒãƒˆãŒ $ 1 $ å€‹ç½®ã‹ã‚ŒãŸãƒã‚¹ã§ã‚ã‚‹ã€‚
- `E` : å‡ºå£ã®ã‚ã‚‹ãƒã‚¹ã§ã‚ã‚‹ã€‚ `E` ã¯ãƒã‚¹ç›®å…¨ä½“ã«ã¡ã‚‡ã†ã© $ 1 $ å€‹å«ã¾ã‚Œã‚‹ã€‚

é«˜æ©‹å›ã¯æ¬¡ã®æ“ä½œã‚’ä½•å›ã‹è¡Œã„ã€ã§ãã‚‹ã ã‘å¤šãã®ãƒ­ãƒœãƒƒãƒˆã‚’æ•‘å‡ºã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

- ä¸Šä¸‹å·¦å³ã®ã†ã¡ã©ã‚Œã‹ã²ã¨ã¤ã®å‘ãã‚’é¸ã³ã€ã™ã¹ã¦ã®ãƒ­ãƒœãƒƒãƒˆã‚’ãã®å‘ãã¸ 1 ãƒã‚¹ã ã‘ç§»å‹•ã•ã›ã‚‹ã€‚ ã“ã®ã¨ãã€å‡ºå£ã®ã‚ã‚‹ãƒã‚¹ã¸ç§»å‹•ã—ãŸãƒ­ãƒœãƒƒãƒˆã¯ç›´ã¡ã«æ•‘å‡ºã•ã‚Œã€ãƒã‚¹ç›®ã‹ã‚‰æ¶ˆãˆã‚‹ã€‚ ã¾ãŸã€ãƒã‚¹ç›®ã®å¤–ã¸ç§»å‹•ã—ãŸãƒ­ãƒœãƒƒãƒˆã¯ç›´ã¡ã«çˆ†ç™ºã—ã€ãƒã‚¹ç›®ã‹ã‚‰æ¶ˆãˆã‚‹ã€‚

é«˜æ©‹å›ãŒæ•‘å‡ºã§ãã‚‹ãƒ­ãƒœãƒƒãƒˆã®å€‹æ•°ã®æœ€å¤§å€¤ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 2\ <\ =Hï¼ŒW\ <\ =100 $
- $ a_{ij} $ ã¯ `.`ï¼Œ`o`ï¼Œ`E` ã®ã©ã‚Œã‹ã§ã‚ã‚‹ã€‚
- `E` ã¯ãƒã‚¹ç›®å…¨ä½“ã«ã¡ã‚‡ã†ã© $ 1 $ å€‹å«ã¾ã‚Œã‚‹ã€‚

### Sample Explanation 1

ä¾‹ãˆã°ã€å·¦ã€ä¸Šã€å³ã®é †ã«ãƒ­ãƒœãƒƒãƒˆã‚’ç§»å‹•ã•ã›ã‚Œã°ã‚ˆã„ã§ã™ã€‚

### Sample Explanation 3

å³ã€å³ã€å³ã€ä¸‹ã€ä¸‹ã®é †ã«ãƒ­ãƒœãƒƒãƒˆã‚’ç§»å‹•ã•ã›ã‚Œã°ã‚ˆã„ã§ã™ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 3

o.o

.Eo

ooo```

### è¾“å‡º

```
3```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2 2

E.

..```

### è¾“å‡º

```
0```

## æ ·ä¾‹ #3

### è¾“å…¥

```
3 4

o...

o...

oooE```

### è¾“å‡º

```
5```

## æ ·ä¾‹ #4

### è¾“å…¥

```
5 11

ooo.ooo.ooo

o.o.o...o..

ooo.oE..o..

o.o.o.o.o..

o.o.ooo.ooo```

### è¾“å‡º

```
12```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[AGC004E] Salvage Robots æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰+ å‰ç¼€å’Œä¼˜åŒ–  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œSalvage Robotsâ€çš„å…³é”®ï¼Œåœ¨äº**å°†â€œæœºå™¨äººç§»åŠ¨â€è½¬åŒ–ä¸ºâ€œå‡ºå£ç§»åŠ¨â€**ï¼ˆç›¸å¯¹è¿åŠ¨çš„æ€è·¯ï¼‰ã€‚æƒ³è±¡å‡ºå£æ˜¯ä¸€ä¸ªâ€œç§»åŠ¨çš„å®‰å…¨åŒºâ€ï¼Œå®ƒèƒ½å‘å·¦ã€å³ã€ä¸Šã€ä¸‹æ‰©å±•ï¼Œè€Œæœºå™¨äººåªè¦åœ¨å‡ºå£æ‰©å±•çš„èŒƒå›´å†…ç§»åŠ¨åˆ°å‡ºå£ï¼Œå°±èƒ½è¢«æ‹¯æ•‘ã€‚æˆ‘ä»¬éœ€è¦è®°å½•å‡ºå£æ‰©å±•çš„**æœ€å·¦ï¼ˆlï¼‰ã€æœ€å³ï¼ˆrï¼‰ã€æœ€ä¸Šï¼ˆuï¼‰ã€æœ€ä¸‹ï¼ˆdï¼‰**è¾¹ç•Œï¼Œç”¨`f[l][r][u][d]`è¡¨ç¤ºå‡ºå£æ‰©å±•åˆ°è¯¥èŒƒå›´æ—¶ï¼Œèƒ½æ‹¯æ•‘çš„æœ€å¤§æœºå™¨äººæ•°é‡ã€‚  

- **æ ¸å¿ƒæ€è·¯**ï¼šé€šè¿‡åŠ¨æ€è§„åˆ’è½¬ç§»ï¼Œé€æ­¥æ‰©å±•å‡ºå£çš„èŒƒå›´ï¼ˆå·¦ã€å³ã€ä¸Šã€ä¸‹ï¼‰ï¼Œæ¯æ¬¡æ‰©å±•æ—¶ç”¨**å‰ç¼€å’Œ**å¿«é€Ÿè®¡ç®—æ–°åŒºåŸŸå†…çš„æœºå™¨äººæ•°é‡ï¼Œç´¯åŠ åˆ°å½“å‰çŠ¶æ€ä¸­ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼šâ‘  å¦‚ä½•å°†æœºå™¨äººç§»åŠ¨è½¬åŒ–ä¸ºå‡ºå£ç§»åŠ¨ï¼ˆç›¸å¯¹è¿åŠ¨çš„æ€ç»´è½¬æ¢ï¼‰ï¼›â‘¡ å¦‚ä½•å®šä¹‰DPçŠ¶æ€ï¼ˆl/r/u/dè¡¨ç¤ºå‡ºå£æ‰©å±•çš„è¾¹ç•Œï¼‰ï¼›â‘¢ å¦‚ä½•ç”¨å‰ç¼€å’Œæ­£ç¡®è®¡ç®—æ–°æ‰©å±•åŒºåŸŸçš„æœºå™¨äººæ•°é‡ï¼ˆé¿å…é‡å¤æˆ–é—æ¼ï¼‰ã€‚  
- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºç½‘æ ¼ï¼Œå‡ºå£ç”¨â€œé—ªçƒçš„Eâ€è¡¨ç¤ºï¼Œæ‰©å±•çš„è¾¹ç•Œç”¨â€œé»„è‰²æ¡†â€æ ‡è®°ï¼Œæ–°åŒºåŸŸçš„æœºå™¨äººç”¨â€œç»¿è‰²åƒç´ å—â€é«˜äº®ã€‚æ¯æ‰©å±•ä¸€æ­¥ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œæ‹¯æ•‘æœºå™¨äººæ—¶æ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆï¼Œå¸®åŠ©ç›´è§‚ç†è§£çŠ¶æ€è½¬ç§»ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šReanapï¼Œèµï¼š14ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æ¸…æ™°åº¦**å’Œ**ä»£ç è§„èŒƒæ€§**éå¸¸çªå‡ºã€‚ä½œè€…æ˜ç¡®å°†é—®é¢˜è½¬åŒ–ä¸ºå‡ºå£ç§»åŠ¨ï¼Œç”¨`f[l][r][u][d]`è¡¨ç¤ºå‡ºå£æ‰©å±•çš„èŒƒå›´ï¼ŒçŠ¶æ€å®šä¹‰å‡†ç¡®ã€‚è½¬ç§»æ—¶ï¼Œé€šè¿‡**åˆ—å‰ç¼€å’Œï¼ˆv[i][j][0]ï¼‰**å’Œ**è¡Œå‰ç¼€å’Œï¼ˆv[i][j][1]ï¼‰**å¿«é€Ÿè®¡ç®—æ–°åŒºåŸŸçš„æœºå™¨äººæ•°é‡ï¼Œä¼˜åŒ–äº†æ—¶é—´å¤æ‚åº¦ï¼ˆO(HÂ²WÂ²)ï¼Œä½†é€šè¿‡`short`æ•°ç»„èŠ‚çœäº†ç©ºé—´ï¼‰ã€‚ä»£ç ç»“æ„å·¥æ•´ï¼Œå˜é‡å‘½åæ¸…æ™°ï¼ˆå¦‚`x`/`y`è¡¨ç¤ºå‡ºå£åˆå§‹ä½ç½®ï¼‰ï¼Œè¾¹ç•Œæ¡ä»¶å¤„ç†ä¸¥è°¨ï¼ˆå¦‚`min(x+d, n-u)`ç¡®ä¿ä¸è¶Šç•Œï¼‰ã€‚**äº®ç‚¹**ï¼šç”¨ç›¸å¯¹è¿åŠ¨ç®€åŒ–é—®é¢˜ï¼Œå‰ç¼€å’Œä¼˜åŒ–è½¬ç§»ï¼Œç©ºé—´ä¼˜åŒ–ï¼ˆ`short`æ•°ç»„ï¼‰ã€‚  


### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šEbolaï¼Œèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„**ç®—æ³•æœ‰æ•ˆæ€§**å’Œ**å®è·µä»·å€¼**è¾ƒé«˜ã€‚ä½œè€…åŒæ ·é‡‡ç”¨å‡ºå£ç§»åŠ¨çš„æ€è·¯ï¼Œä½†å‰ç¼€å’Œçš„å¤„ç†æ–¹å¼ç•¥æœ‰ä¸åŒï¼ˆ`sum1`è¡¨ç¤ºè¡Œå‰ç¼€å’Œï¼Œ`sum2`è¡¨ç¤ºåˆ—å‰ç¼€å’Œï¼‰ã€‚è½¬ç§»æ—¶ï¼Œé€šè¿‡`max`/`min`è®¡ç®—æœ‰æ•ˆåŒºåŸŸï¼Œé¿å…äº†æ— æ•ˆçš„æœºå™¨äººè®¡æ•°ã€‚ä»£ç é€»è¾‘ä¸Reanapçš„é¢˜è§£ä¸€è‡´ï¼Œä½†**ä»£ç ç®€æ´æ€§**ç¨é€Šï¼ˆå¦‚`upmax`å‡½æ•°çš„ä½¿ç”¨ï¼‰ã€‚**äº®ç‚¹**ï¼šå‰ç¼€å’Œçš„å¦ä¸€ç§å®ç°æ–¹å¼ï¼Œè¾¹ç•Œæ¡ä»¶çš„ä¸¥æ ¼åˆ¤æ–­ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šé—®é¢˜è½¬åŒ–ï¼ˆæœºå™¨äººç§»åŠ¨â†’å‡ºå£ç§»åŠ¨ï¼‰**  
* **åˆ†æ**ï¼š  
  æœºå™¨äººä¸€èµ·å‘æŸä¸ªæ–¹å‘ç§»åŠ¨ï¼Œç›¸å½“äºå‡ºå£å‘ç›¸åæ–¹å‘ç§»åŠ¨ï¼ˆä¾‹å¦‚ï¼Œæœºå™¨äººå‘å·¦ç§»åŠ¨ä¸€æ­¥ï¼Œç­‰åŒäºå‡ºå£å‘å³ç§»åŠ¨ä¸€æ­¥ï¼‰ã€‚è¿™ç§è½¬åŒ–èƒ½å°†â€œæœºå™¨äººçš„çŠ¶æ€â€ç®€åŒ–ä¸ºâ€œå‡ºå£çš„çŠ¶æ€â€ï¼Œæ›´å®¹æ˜“ç”¨DPè®°å½•ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç›¸å¯¹è¿åŠ¨æ˜¯è§£å†³â€œç¾¤ä½“ç§»åŠ¨â€é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œèƒ½å°†å¤æ‚çš„çŠ¶æ€ç®€åŒ–ä¸ºå•ä¸€å¯¹è±¡çš„çŠ¶æ€ã€‚  


### 2. **å…³é”®ç‚¹2ï¼šDPçŠ¶æ€å®šä¹‰ï¼ˆl/r/u/dè¡¨ç¤ºå‡ºå£æ‰©å±•çš„è¾¹ç•Œï¼‰**  
* **åˆ†æ**ï¼š  
  `f[l][r][u][d]`è¡¨ç¤ºå‡ºå£å‘å·¦æ‰©å±•äº†`l`æ ¼ã€å‘å³æ‰©å±•äº†`r`æ ¼ã€å‘ä¸Šæ‰©å±•äº†`u`æ ¼ã€å‘ä¸‹æ‰©å±•äº†`d`æ ¼æ—¶ï¼Œèƒ½æ‹¯æ•‘çš„æœ€å¤§æœºå™¨äººæ•°é‡ã€‚è¿™ç§çŠ¶æ€å®šä¹‰è¦†ç›–äº†å‡ºå£æ‰€æœ‰å¯èƒ½çš„æ‰©å±•èŒƒå›´ï¼Œä¸”æ»¡è¶³â€œæ— åæ•ˆæ€§â€ï¼ˆå½“å‰çŠ¶æ€åªä¸ä¹‹å‰çš„æ‰©å±•æœ‰å…³ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€å®šä¹‰è¦è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œä¸”èƒ½é€šè¿‡è½¬ç§»é€æ­¥æ‰©å±•ã€‚  


### 3. **å…³é”®ç‚¹3ï¼šå‰ç¼€å’Œè®¡ç®—ï¼ˆæ­£ç¡®æ±‚æ–°æ‰©å±•åŒºåŸŸçš„æœºå™¨äººæ•°é‡ï¼‰**  
* **åˆ†æ**ï¼š  
  æ¯æ¬¡æ‰©å±•å‡ºå£çš„è¾¹ç•Œæ—¶ï¼Œéœ€è¦è®¡ç®—æ–°åŒºåŸŸå†…çš„æœºå™¨äººæ•°é‡ã€‚ä¾‹å¦‚ï¼Œå‘å·¦æ‰©å±•`l+1`æ ¼æ—¶ï¼Œæ–°åŒºåŸŸæ˜¯**ç¬¬`y-l-1`åˆ—**ï¼ˆ`y`æ˜¯å‡ºå£åˆå§‹åˆ—ï¼‰ï¼Œè¡ŒèŒƒå›´æ˜¯`[max(x-u-1, d), min(x+d, n-u)]`ï¼ˆ`x`æ˜¯å‡ºå£åˆå§‹è¡Œï¼‰ã€‚é€šè¿‡åˆ—å‰ç¼€å’Œ`v[i][j][0]`ï¼Œå¯ä»¥å¿«é€Ÿè®¡ç®—è¯¥åŒºåŸŸçš„æœºå™¨äººæ•°é‡ï¼ˆ`v[min(...)][y-l-1][0] - v[max(...)][y-l-1][0]`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œæ˜¯å¤„ç†â€œåŒºé—´æŸ¥è¯¢â€é—®é¢˜çš„åˆ©å™¨ï¼Œèƒ½å°†O(n)çš„æŸ¥è¯¢æ—¶é—´ä¼˜åŒ–åˆ°O(1)ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§Aï¼šç›¸å¯¹è¿åŠ¨**ï¼šå°†ç¾¤ä½“ç§»åŠ¨è½¬åŒ–ä¸ºå•ä¸€å¯¹è±¡çš„ç§»åŠ¨ï¼Œç®€åŒ–çŠ¶æ€å®šä¹‰ã€‚  
- **æŠ€å·§Bï¼šå‰ç¼€å’Œä¼˜åŒ–**ï¼šé¢„å¤„ç†è¡Œ/åˆ—çš„å‰ç¼€å’Œï¼Œå¿«é€Ÿè®¡ç®—åŒºé—´å†…çš„æœºå™¨äººæ•°é‡ã€‚  
- **æŠ€å·§Cï¼šç©ºé—´ä¼˜åŒ–**ï¼šç”¨`short`æ•°ç»„å­˜å‚¨DPçŠ¶æ€ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼ˆ`105Ã—105Ã—105Ã—105`çš„`short`æ•°ç»„çº¦å 1.2MBï¼‰ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç æ¥è‡ªReanapçš„é¢˜è§£ï¼Œæ˜¯åŠ¨æ€è§„åˆ’+å‰ç¼€å’Œä¼˜åŒ–çš„å…¸å‹å®ç°ï¼Œé€»è¾‘æ¸…æ™°ï¼Œç©ºé—´æ•ˆç‡é«˜ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <cstdio>
  #include <algorithm>
  using namespace std;
  int n, m, x, y, v[105][105][2]; // v[i][j][0]: åˆ—å‰ç¼€å’Œï¼ˆç¬¬jåˆ—å‰iè¡Œçš„æœºå™¨äººæ•°é‡ï¼‰ï¼›v[i][j][1]: è¡Œå‰ç¼€å’Œï¼ˆç¬¬iè¡Œå‰jåˆ—çš„æœºå™¨äººæ•°é‡ï¼‰
  short f[105][105][105][105]; // f[l][r][u][d]: å‡ºå£æ‰©å±•åˆ°l/r/u/dæ—¶çš„æœ€å¤§æ‹¯æ•‘æ•°é‡
  int main() {
      scanf("%d %d", &n, &m);
      for (int i = 1; i <= n; ++i) {
          for (int j = 1; j <= m; ++j) {
              char s = getchar();
              while (s != 'o' && s != '.' && s != 'E') s = getchar();
              if (s == 'E') x = i, y = j; // è®°å½•å‡ºå£åˆå§‹ä½ç½®
              else if (s == 'o') {
                  v[i][j][0] = v[i-1][j][0] + 1; // åˆ—å‰ç¼€å’Œï¼šç¬¬jåˆ—ï¼Œç¬¬iè¡Œçš„æœºå™¨äººæ•°é‡=ä¸Šä¸€è¡Œ+å½“å‰
                  v[i][j][1] = v[i][j-1][1] + 1; // è¡Œå‰ç¼€å’Œï¼šç¬¬iè¡Œï¼Œç¬¬jåˆ—çš„æœºå™¨äººæ•°é‡=å‰ä¸€åˆ—+å½“å‰
              } else {
                  v[i][j][0] = v[i-1][j][0]; // ç©ºæˆ–å‡ºå£ï¼Œå‰ç¼€å’Œä¸å˜
                  v[i][j][1] = v[i][j-1][1];
              }
          }
      }
      int ans = 0;
      // éå†å‡ºå£æ‰©å±•çš„å·¦ï¼ˆlï¼‰ã€å³ï¼ˆrï¼‰ã€ä¸Šï¼ˆuï¼‰ã€ä¸‹ï¼ˆdï¼‰è¾¹ç•Œ
      for (int l = 0; l <= y-1; ++l) { // å·¦è¾¹ç•Œæœ€å¤šæ‰©å±•y-1æ ¼ï¼ˆå‡ºå£åˆå§‹åˆ—æ˜¯yï¼‰
          for (int r = 0; r <= m-y; ++r) { // å³è¾¹ç•Œæœ€å¤šæ‰©å±•m-yæ ¼
              for (int u = 0; u <= x-1; ++u) { // ä¸Šè¾¹ç•Œæœ€å¤šæ‰©å±•x-1æ ¼
                  for (int d = 0; d <= n-x; ++d) { // ä¸‹è¾¹ç•Œæœ€å¤šæ‰©å±•n-xæ ¼
                      ans = max(ans, (int)f[l][r][u][d]); // æ›´æ–°ç­”æ¡ˆ
                      // å‘å·¦æ‰©å±•ï¼šl+1ï¼Œè®¡ç®—ç¬¬y-l-1åˆ—çš„æœ‰æ•ˆè¡ŒèŒƒå›´
                      if (l + r < y-1) { // å·¦è¾¹ç•Œè¿˜èƒ½æ‰©å±•ï¼ˆæœªè¶…è¿‡å‡ºå£åˆå§‹åˆ—çš„å·¦è¾¹ï¼‰
                          int up = max(x - u - 1, d); // æœ‰æ•ˆè¡Œçš„ä¸Šè¾¹ç•Œï¼ˆé¿å…è¶…è¿‡å‡ºå£æ‰©å±•çš„ä¸‹è¾¹ç•Œdï¼‰
                          int down = min(x + d, n - u); // æœ‰æ•ˆè¡Œçš„ä¸‹è¾¹ç•Œï¼ˆé¿å…è¶…è¿‡å‡ºå£æ‰©å±•çš„ä¸Šè¾¹ç•Œuï¼‰
                          f[l+1][r][u][d] = max((int)f[l+1][r][u][d], (int)f[l][r][u][d] + v[down][y-l-1][0] - v[up][y-l-1][0]);
                      }
                      // å‘å³æ‰©å±•ï¼šr+1ï¼Œè®¡ç®—ç¬¬y+r+1åˆ—çš„æœ‰æ•ˆè¡ŒèŒƒå›´ï¼ˆç±»ä¼¼å‘å·¦ï¼‰
                      if (l + r < m - y) {
                          int up = max(x - u - 1, d);
                          int down = min(x + d, n - u);
                          f[l][r+1][u][d] = max((int)f[l][r+1][u][d], (int)f[l][r][u][d] + v[down][y+r+1][0] - v[up][y+r+1][0]);
                      }
                      // å‘ä¸Šæ‰©å±•ï¼šu+1ï¼Œè®¡ç®—ç¬¬x-u-1è¡Œçš„æœ‰æ•ˆåˆ—èŒƒå›´ï¼ˆç±»ä¼¼å‘å·¦ï¼‰
                      if (u + d < x-1) {
                          int left = max(y - l - 1, r);
                          int right = min(y + r, m - l);
                          f[l][r][u+1][d] = max((int)f[l][r][u+1][d], (int)f[l][r][u][d] + v[x-u-1][right][1] - v[x-u-1][left][1]);
                      }
                      // å‘ä¸‹æ‰©å±•ï¼šd+1ï¼Œè®¡ç®—ç¬¬x+d+1è¡Œçš„æœ‰æ•ˆåˆ—èŒƒå›´ï¼ˆç±»ä¼¼å‘å·¦ï¼‰
                      if (u + d < n - x) {
                          int left = max(y - l - 1, r);
                          int right = min(y + r, m - l);
                          f[l][r][u][d+1] = max((int)f[l][r][u][d+1], (int)f[l][r][u][d] + v[x+d+1][right][1] - v[x+d+1][left][1]);
                      }
                  }
              }
          }
      }
      printf("%d", ans);
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šâ‘  è¯»å–è¾“å…¥å¹¶é¢„å¤„ç†å‰ç¼€å’Œï¼ˆ`v`æ•°ç»„ï¼‰ï¼›â‘¡ éå†å‡ºå£æ‰©å±•çš„è¾¹ç•Œï¼ˆl/r/u/dï¼‰ï¼Œè¿›è¡ŒåŠ¨æ€è§„åˆ’è½¬ç§»ï¼›â‘¢ è¾“å‡ºæœ€å¤§æ‹¯æ•‘æ•°é‡ã€‚å…¶ä¸­ï¼Œå‰ç¼€å’Œ`v`æ•°ç»„å­˜å‚¨äº†æ¯åˆ—/æ¯è¡Œçš„æœºå™¨äººæ•°é‡ï¼Œè½¬ç§»æ—¶é€šè¿‡`max`/`min`è®¡ç®—æœ‰æ•ˆåŒºåŸŸï¼Œç”¨å‰ç¼€å’Œå¿«é€Ÿæ±‚å‡ºæ–°åŒºåŸŸçš„æœºå™¨äººæ•°é‡ã€‚  


### é¢˜è§£ä¸€ï¼ˆReanapï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šå‰ç¼€å’Œä¼˜åŒ–è½¬ç§»ï¼Œç©ºé—´ä¼˜åŒ–ï¼ˆ`short`æ•°ç»„ï¼‰ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  // å‘å·¦æ‰©å±•çš„è½¬ç§»æ–¹ç¨‹
  if (l + r < y-1) {
      int up = max(x - u - 1, d); // æœ‰æ•ˆè¡Œçš„ä¸Šè¾¹ç•Œï¼ˆé¿å…è¶…è¿‡å‡ºå£æ‰©å±•çš„ä¸‹è¾¹ç•Œdï¼‰
      int down = min(x + d, n - u); // æœ‰æ•ˆè¡Œçš„ä¸‹è¾¹ç•Œï¼ˆé¿å…è¶…è¿‡å‡ºå£æ‰©å±•çš„ä¸Šè¾¹ç•Œuï¼‰
      f[l+1][r][u][d] = max((int)f[l+1][r][u][d], (int)f[l][r][u][d] + v[down][y-l-1][0] - v[up][y-l-1][0]);
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç å¤„ç†**å‘å·¦æ‰©å±•**çš„æƒ…å†µã€‚`l+1`è¡¨ç¤ºå‡ºå£å‘å·¦æ‰©å±•äº†1æ ¼ï¼Œæ–°åŒºåŸŸæ˜¯**ç¬¬`y-l-1`åˆ—**ï¼ˆå‡ºå£åˆå§‹åˆ—æ˜¯`y`ï¼Œå‘å·¦æ‰©å±•`l`æ ¼åï¼Œå†æ‰©å±•1æ ¼å°±æ˜¯`y-l-1`åˆ—ï¼‰ã€‚`up`å’Œ`down`æ˜¯è¯¥åˆ—çš„æœ‰æ•ˆè¡ŒèŒƒå›´ï¼ˆé¿å…è¶…è¿‡å‡ºå£æ‰©å±•çš„ä¸Šè¾¹ç•Œ`u`å’Œä¸‹è¾¹ç•Œ`d`ï¼‰ã€‚é€šè¿‡åˆ—å‰ç¼€å’Œ`v[down][y-l-1][0] - v[up][y-l-1][0]`ï¼Œå¿«é€Ÿè®¡ç®—è¯¥åŒºåŸŸçš„æœºå™¨äººæ•°é‡ï¼Œç´¯åŠ åˆ°å½“å‰çŠ¶æ€ä¸­ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ—¶çš„`max`/`min`æ˜¯å…³é”®ï¼Œç¡®ä¿ä¸è®¡ç®—æ— æ•ˆåŒºåŸŸçš„æœºå™¨äººï¼ˆæ¯”å¦‚å·²ç»å‡ºç•Œçš„æœºå™¨äººï¼‰ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œå‡ºå£çš„åƒç´ å†’é™©â€**ï¼ˆ8ä½FCé£æ ¼ï¼Œç±»ä¼¼ã€Šåƒè±†äººã€‹çš„ç½‘æ ¼åœºæ™¯ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
- **åœºæ™¯åˆå§‹åŒ–**ï¼š8ä½åƒç´ ç½‘æ ¼ï¼ˆ`HÃ—W`ï¼‰ï¼Œå‡ºå£ç”¨â€œé—ªçƒçš„Eâ€ï¼ˆé»„è‰²åƒç´ å—ï¼‰è¡¨ç¤ºï¼Œæœºå™¨äººç”¨â€œç»¿è‰²åƒç´ å—â€è¡¨ç¤ºï¼Œç©ºç”¨â€œç°è‰²åƒç´ å—â€è¡¨ç¤ºã€‚  
- **å‡ºå£æ‰©å±•**ï¼šæ¯ä¸€æ­¥æ‰©å±•å·¦ã€å³ã€ä¸Šã€ä¸‹è¾¹ç•Œï¼Œç”¨â€œé»„è‰²æ¡†â€æ ‡è®°å½“å‰æ‰©å±•çš„èŒƒå›´ã€‚æ‰©å±•æ—¶ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  
- **æœºå™¨äººè¢«æ•‘**ï¼šæ–°åŒºåŸŸçš„æœºå™¨äººï¼ˆç»¿è‰²åƒç´ å—ï¼‰ç§»åŠ¨åˆ°å‡ºå£ï¼ˆEï¼‰ï¼Œç„¶åæ¶ˆå¤±ï¼Œæ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆã€‚  
- **æ§åˆ¶é¢æ¿**ï¼šåŒ…å«â€œå•æ­¥æ‰§è¡Œâ€ï¼ˆâ†’ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆâ–¶ï¸ï¼‰ã€â€œé‡ç½®â€ï¼ˆğŸ”„ï¼‰æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1Ã—~5Ã—ï¼‰ã€‚  

### åŠ¨ç”»å¸§æ­¥éª¤  
1. **åˆå§‹çŠ¶æ€**ï¼šå‡ºå£åœ¨`(x,y)`ä½ç½®ï¼Œæœºå™¨äººåˆ†å¸ƒåœ¨ç½‘æ ¼ä¸­ã€‚  
2. **å‘å·¦æ‰©å±•**ï¼šå‡ºå£å‘å·¦ç§»åŠ¨1æ ¼ï¼Œé»„è‰²æ¡†å‘å·¦æ‰©å±•ï¼Œé«˜äº®ç¬¬`y-l-1`åˆ—çš„æœ‰æ•ˆè¡ŒèŒƒå›´ï¼ˆç»¿è‰²åƒç´ å—ï¼‰ã€‚  
3. **è®¡ç®—æ–°åŒºåŸŸ**ï¼šç”¨åˆ—å‰ç¼€å’Œè®¡ç®—è¯¥åŒºåŸŸçš„æœºå™¨äººæ•°é‡ï¼Œç´¯åŠ åˆ°å½“å‰çŠ¶æ€ã€‚  
4. **æœºå™¨äººè¢«æ•‘**ï¼šè¯¥åŒºåŸŸçš„æœºå™¨äººï¼ˆç»¿è‰²åƒç´ å—ï¼‰ç§»åŠ¨åˆ°å‡ºå£ï¼Œæ¶ˆå¤±ï¼Œæ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆã€‚  
5. **å¾ªç¯æ‰©å±•**ï¼šé‡å¤æ­¥éª¤2-4ï¼Œç›´åˆ°å‡ºå£æ— æ³•å†æ‰©å±•ï¼ˆæ‰€æœ‰è¾¹ç•Œéƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼‰ã€‚  

### æ¸¸æˆåŒ–å…ƒç´   
- **AIè‡ªåŠ¨æ¼”ç¤º**ï¼šç‚¹å‡»â€œè‡ªåŠ¨æ’­æ”¾â€ï¼Œå‡ºå£ä¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ‰©å±•æ–¹å‘ï¼ˆæ¯”å¦‚ä¼˜å…ˆæ‰©å±•æœºå™¨äººå¤šçš„åŒºåŸŸï¼‰ï¼Œåƒã€Šè´ªåƒè›‡AIã€‹ä¸€æ ·å®Œæˆè§£é¢˜ã€‚  
- **å…³å¡è®¾è®¡**ï¼šå°†å‡ºå£æ‰©å±•çš„æ¯ä¸€æ­¥è§†ä¸ºä¸€ä¸ªâ€œå°å…³å¡â€ï¼Œå®Œæˆ10æ­¥æ‰©å±•å³å¯â€œè¿‡å…³â€ï¼Œæ˜¾ç¤ºâ€œèƒœåˆ©â€åŠ¨ç”»ï¼ˆåƒç´ æ˜Ÿæ˜Ÿé—ªçƒï¼‰ã€‚  
- **éŸ³æ•ˆè®¾è®¡**ï¼š  
  - æ‰©å±•è¾¹ç•Œï¼šâ€œå®â€ï¼ˆ8ä½éŸ³æ•ˆï¼‰ï¼›  
  - æ‹¯æ•‘æœºå™¨äººï¼šâ€œæ»´â€ï¼ˆ8ä½éŸ³æ•ˆï¼‰ï¼›  
  - è¿‡å…³ï¼šâ€œèƒœåˆ©æ—‹å¾‹â€ï¼ˆ8ä½BGMï¼‰ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **åŠ¨æ€è§„åˆ’**ï¼šæœ¬é¢˜çš„DPçŠ¶æ€å®šä¹‰ï¼ˆl/r/u/dï¼‰å¯è¿ç§»åˆ°â€œåŒºåŸŸæ‰©å±•â€é—®é¢˜ï¼ˆå¦‚ã€Šæœ€å¤§å­çŸ©é˜µå’Œã€‹ï¼‰ã€‚  
- **å‰ç¼€å’Œä¼˜åŒ–**ï¼šå¯è¿ç§»åˆ°â€œåŒºé—´æŸ¥è¯¢â€é—®é¢˜ï¼ˆå¦‚ã€Šæ•°ç»„çš„å‰ç¼€å’Œã€‹ã€ŠäºŒç»´å‰ç¼€å’Œã€‹ï¼‰ã€‚  
- **ç›¸å¯¹è¿åŠ¨**ï¼šå¯è¿ç§»åˆ°â€œç¾¤ä½“ç§»åŠ¨â€é—®é¢˜ï¼ˆå¦‚ã€Šæœºå™¨äººèµ°ç½‘æ ¼ã€‹ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1002 è¿‡æ²³å’**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜è€ƒå¯ŸåŠ¨æ€è§„åˆ’çš„çŠ¶æ€å®šä¹‰ï¼ˆ`dp[i][j]`è¡¨ç¤ºèµ°åˆ°`(i,j)`çš„è·¯å¾„æ•°ï¼‰ï¼Œä¸æœ¬é¢˜çš„DPæ€è·¯ç±»ä¼¼ï¼Œèƒ½å¸®åŠ©å·©å›ºçŠ¶æ€è½¬ç§»çš„æŠ€å·§ã€‚  
2. **æ´›è°· P1216 æ•°å­—ä¸‰è§’å½¢**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è€ƒå¯ŸåŠ¨æ€è§„åˆ’çš„â€œè‡ªåº•å‘ä¸Šâ€è½¬ç§»ï¼Œä¸æœ¬é¢˜çš„â€œé€æ­¥æ‰©å±•â€æ€è·¯ç±»ä¼¼ï¼Œèƒ½å¸®åŠ©ç†è§£DPçš„æ— åæ•ˆæ€§ã€‚  
3. **æ´›è°· P1048 é‡‡è¯**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜è€ƒå¯ŸåŠ¨æ€è§„åˆ’çš„â€œ0-1èƒŒåŒ…â€æ¨¡å‹ï¼Œä¸æœ¬é¢˜çš„â€œæœ€å¤§åŒ–æ‹¯æ•‘æ•°é‡â€ç›®æ ‡ç±»ä¼¼ï¼Œèƒ½å¸®åŠ©å·©å›ºå‰ç¼€å’Œä¼˜åŒ–çš„æŠ€å·§ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
**å‚è€ƒç»éªŒ (æ¥è‡ª Reanap)**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ‹…å¿ƒå››ç»´DPæ•°ç»„çš„ç©ºé—´é—®é¢˜ï¼ˆ`105Ã—105Ã—105Ã—105`çš„`int`æ•°ç»„çº¦å 4.4MBï¼‰ï¼Œåæ¥ç”¨`short`æ•°ç»„ï¼ˆå 1.2MBï¼‰è§£å†³äº†ç©ºé—´é—®é¢˜ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå®ç”¨ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œ**ç©ºé—´ä¼˜åŒ–**æ˜¯è§£å†³å¤§æ•°æ®é—®é¢˜çš„å…³é”®ï¼Œæ¯”å¦‚ç”¨`short`ä»£æ›¿`int`ï¼ˆå½“æ•°å€¼èŒƒå›´è¾ƒå°æ—¶ï¼‰ï¼Œæˆ–ç”¨æ»šåŠ¨æ•°ç»„ï¼ˆå½“çŠ¶æ€åªä¾èµ–å‰å‡ è¡Œæ—¶ï¼‰ã€‚  


## ç»“è®º  
æœ¬æ¬¡å…³äºâ€œ[AGC004E] Salvage Robotsâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£**åŠ¨æ€è§„åˆ’+å‰ç¼€å’Œä¼˜åŒ–**çš„æ ¸å¿ƒæ€è·¯ï¼ŒæŒæ¡ç›¸å¯¹è¿åŠ¨ã€çŠ¶æ€å®šä¹‰ã€å‰ç¼€å’Œè®¡ç®—ç­‰æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­å­¦ä¹ ã€å‹¤äºæ€è€ƒã€å‹‡äºå®è·µ**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š172.72ç§’
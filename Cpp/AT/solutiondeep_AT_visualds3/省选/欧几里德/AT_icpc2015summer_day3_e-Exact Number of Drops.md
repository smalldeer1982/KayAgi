# é¢˜ç›®ä¿¡æ¯

# Exact Number of Drops

## é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªå®¹é‡åˆ†åˆ«ä¸º $a$ æ»´æ°´å’Œ $b$ æ»´æ°´çš„æ¯å­ï¼ˆå¼€å§‹æ—¶å‡ä¸ºç©ºï¼‰ï¼Œæ¯æ­¥éƒ½åšä»¥ä¸‹æ“ä½œä¹‹ä¸€ï¼š

- å°†æŸä¸ªæ¯å­å€’ç©ºï¼›
- å°†æŸä¸ªæ¯å­è£…æ»¡ï¼›
- å°†ä¸€ä¸ªæ¯å­çš„æ°´å€’åˆ°å¦ä¸€ä¸ªæ¯å­ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªæ¯å­å€’ç©ºæˆ–è€…ç¬¬äºŒä¸ªæ¯å­è£…æ»¡ã€‚   

æ±‚ä½¿å¾—ä»»æ„ä¸€ä¸ªæ¯å­è£…ä¸Šæ°å¥½ $c$ æ»´æ°´çš„æœ€å°‘æ­¥æ•°ã€‚

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šExact Number of Drops æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ•°å­¦ï¼ˆè£´èœ€å®šç†/æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰` ä¸ `ç¼–ç¨‹æŠ€å·§åº”ç”¨`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³"æ¯å­å€’æ°´"é—®é¢˜ï¼Œå…³é”®åœ¨äºå°†ç‰©ç†æ“ä½œè½¬åŒ–ä¸º**æ•°å­¦æ–¹ç¨‹**ã€‚å°±åƒç”¨å¯†ç ç ´è§£ä¿é™©ç®±ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ•°å­¦è§„å¾‹æ‰¾åˆ°æœ€çŸ­æ“ä½œè·¯å¾„ã€‚  
> - **æ ¸å¿ƒæ€è·¯**ï¼šé€šè¿‡è§‚å¯Ÿå‘ç°ï¼Œæ°´çš„æ€»é‡å˜åŒ–æ»¡è¶³çº¿æ€§æ–¹ç¨‹ `-aX + bY = k`ï¼ˆXï¼šå€’ç©ºAæ¯æ¬¡æ•°ï¼ŒYï¼šè£…æ»¡Bæ¯æ¬¡æ•°ï¼‰ã€‚åˆ©ç”¨**æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•**æ±‚è§£æœ€å°éè´Ÿæ•´æ•°è§£  
> - **å¯è§†åŒ–è®¾è®¡**ï¼š  
>   â€¢ ç”¨åƒç´ ç½‘æ ¼è¡¨ç¤ºæ¯å­çŠ¶æ€ï¼ˆç©º/æ»¡/éƒ¨åˆ†ï¼‰  
>   â€¢ é«˜äº®æ–¹ç¨‹å‚æ•°å˜åŒ–ï¼ˆa, b, cå®æ—¶æ˜¾ç¤ºï¼‰  
>   â€¢ å€’æ°´åŠ¨ç”»é…åˆ"å“—å•¦"éŸ³æ•ˆï¼Œè§£æ–¹ç¨‹æ—¶æ˜¾ç¤ºæ•°å­¦ç¬¦å·æµ®åŠ¨ç‰¹æ•ˆ  

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ï¼ˆä½œè€…ï¼šZeroOf149ï¼‰**
* **ç‚¹è¯„**ï¼š
  - æ€è·¯æ¸…æ™°æ€§ï¼šå®Œç¾å»ºç«‹æ“ä½œä¸æ–¹ç¨‹çš„æ˜ å°„å…³ç³»ï¼Œæ­ç¤º"ä»»ä¸€æ—¶åˆ»æ¯å­å¿…ç©º/æ»¡"çš„æ ¸å¿ƒè§‚å¯Ÿ
  - ä»£ç è§„èŒƒæ€§ï¼šexgcdå°è£…ä¼˜é›…ï¼Œå˜é‡åï¼ˆg, k, tï¼‰ç®€æ´ä½†å«ä¹‰æ˜ç¡®
  - ç®—æ³•æœ‰æ•ˆæ€§ï¼šé€šè¿‡ç»å¯¹å€¼æœ€å°åŒ–æŠ€å·§ï¼ˆ`f`å‡½æ•°ï¼‰ä¼˜åŒ–è§£çš„é€‰æ‹©
  - å®è·µä»·å€¼ï¼šå®Œæ•´å¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆc>max(a,b)ç­‰ï¼‰ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›
  > ğŸ’¡ **äº®ç‚¹**ï¼šå°†ç‰©ç†æ“ä½œè½¬åŒ–ä¸ºæ–¹ç¨‹ `-aX + bY = k` çš„æ•°å­¦å»ºæ¨¡èƒ½åŠ›

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **å…³é”®ç‚¹1ï¼šæ“ä½œåˆ°æ–¹ç¨‹çš„æ˜ å°„**
   * **åˆ†æ**ï¼šå‘ç°"å€’ç©º/è£…æ»¡"æ“ä½œå¯¹åº”ç³»æ•°å˜åŒ–ï¼ˆ-aæˆ–+bï¼‰ï¼Œ"å€’æ°´"æ“ä½œä¿æŒæ€»é‡ä¸å˜
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‰©ç†é—®é¢˜æ•°å­¦åŒ–æ˜¯ç®—æ³•ä¼˜åŒ–çš„é’¥åŒ™

2. **å…³é”®ç‚¹2ï¼šè§£çš„æœ€å°åŒ–å¤„ç†**
   * **åˆ†æ**ï¼šåˆ©ç”¨é€šè§£å…¬å¼ `x = xâ‚€ - (b/g)t` çš„ç‰¹æ€§ï¼Œé€šè¿‡`f`å‡½æ•°è®¡ç®—æœ€å°ç»å¯¹å€¼ç»„åˆ
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçº¿æ€§æ–¹ç¨‹çš„é€šè§£æ˜¯å‘¨æœŸæ€§è§£ç©ºé—´

3. **å…³é”®ç‚¹3ï¼šè¾¹ç•Œæ¡ä»¶æ•´åˆ**
   * **åˆ†æ**ï¼škéœ€å–{c, a+c, b+c}ï¼Œcâ‰¤min(a,b)æ—¶éœ€å…¨éªŒè¯ï¼ˆwork(c)å’Œwork(a+c)ç­‰ï¼‰
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ”¯è¦†ç›–æ˜¯é¿å…WAçš„å…³é”®é˜²çº¿

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æ•°å­¦å»ºæ¨¡æŠ€å·§**ï¼šå°†æ“ä½œåºåˆ—è½¬åŒ–ä¸ºç³»æ•°çŸ©é˜µï¼ˆ-a, +bï¼‰
- **é€šè§£ä¼˜åŒ–æŠ€å·§**ï¼šåˆ©ç”¨å‘¨æœŸæ€§é¿å…æš´åŠ›æœç´¢ï¼ˆtçš„è°ƒæ•´ï¼‰
- **è¾¹ç•Œé˜²å¾¡æŠ€å·§**ï¼šæ˜¾å¼å¤„ç†æ— è§£æƒ…å†µï¼ˆc>max(a,b)æˆ–c%gâ‰ 0ï¼‰

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**
```cpp
#include <algorithm>
#include <cmath>
#include <cstdio>
#include <numeric>
#include <tuple>
using ll = long long;

// æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼ˆæ ¸å¿ƒæ•°å­¦å·¥å…·ï¼‰
ll exgcd(ll a, ll &x, ll b, ll &y) {
  ll x1=1, x2=0, x3=0, x4=1;
  while (b) {
    ll q = a / b;
    std::tie(x1,x2,x3,x4,a,b) = 
        std::tuple{x3,x4,x1-q*x3,x2-q*x4,b,a%b};
  }
  x = x1; y = x2;  // è·å¾—ç‰¹è§£(x,y)
  return a;        // è¿”å›gcd(a,b)
}

// è®¡ç®—æœ€å°ç»å¯¹å€¼ç»„åˆï¼ˆä¼˜åŒ–å…³é”®ï¼‰
ll f(ll k, ll b) {
  ll t = std::abs(b % k);
  return std::min(t, k - t);  // å–æ¨¡ç¯ä¸Šæœ€çŸ­è·ç¦»
}

// æ±‚è§£ç‰¹å®škå€¼çš„æœ€å°æ“ä½œæ­¥æ•°
ll work(ll k) { 
  return f((a+b)/g, k/g*(y-x)); 
}

int main() {
  scanf("%d", &T);
  while (T--) {
    scanf("%lld %lld %lld", &a, &b, &c);
    g = std::gcd(a, b);  // è®¡ç®—æœ€å¤§å…¬çº¦æ•°
    
    // è¾¹ç•Œæƒ…å†µå¤„ç†
    if (c > std::max(a,b) || c % g) puts("-1");
    else if (c == a || c == b) puts("1");
    else {
      exgcd(a, x, b, y);  // æ±‚è§£ax+by=gcd(a,b)
      ll mn = std::min(a, b);
      // ä¸‰ç§kå€¼å–æœ€å°æ“ä½œæ­¥æ•°
      printf("%lld\n", std::min({
        work(c), 
        c<=mn ? work(a+c) : LLONG_MAX,
        c<=mn ? work(b+c) : LLONG_MAX
      }) * 2);  // æ¯å¯¹(X,Y)å¯¹åº”2æ­¥æ“ä½œ
    }
  }
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
> 1. **æ•°å­¦å¼•æ“**ï¼š`exgcd`å®ç°é«˜æ•ˆæ±‚è§£çº¿æ€§æ–¹ç¨‹  
> 2. **ä¼˜åŒ–æ ¸å¿ƒ**ï¼š`f`å‡½æ•°åˆ©ç”¨æ¨¡è¿ç®—å‘¨æœŸæ€§å¿«é€Ÿå®šä½æœ€ä¼˜è§£  
> 3. **ç­–ç•¥æ•´åˆ**ï¼šä¸»å‡½æ•°åˆ†å±‚å¤„ç†è¾¹ç•Œâ†’ç‰¹ä¾‹â†’é€šè§£  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
```mermaid
graph LR
  A[8-bitåƒç´ å¯åŠ¨ç•Œé¢] --> B[æ¯å­çŠ¶æ€ç½‘æ ¼]
  B --> C[æ“ä½œåŠ¨ç”»]
  C --> D[æ–¹ç¨‹å‚æ•°æ˜¾ç¤º]
  D --> E[æ•°å­¦ç‰¹æ•ˆ]

  subgraph åŠ¨ç”»æ§åˆ¶
    F[å•æ­¥/è‡ªåŠ¨æ’­æ”¾] --> G[é€Ÿåº¦æ»‘å—]
    H[é‡ç½®] --> I[AIè‡ªåŠ¨æ¨æ¼”]
  end

  subgraph éŸ³æ•ˆç³»ç»Ÿ
    J[å€’æ°´ï¼šå“—å•¦å£°] --> K[è§£æ–¹ç¨‹ï¼šç”µå­éŸ³]
    L[æˆåŠŸï¼šèƒœåˆ©æ—‹å¾‹] --> M[å¤±è´¥ï¼šä½æ²‰æç¤º]
  end
```

**å…³é”®å¸§è®¾è®¡**ï¼š
1. **åˆå§‹åŒ–**ï¼š  
   - åƒç´ åŒ–åŒæ¯ï¼ˆAçº¢/Bè“ï¼‰æ˜¾ç¤ºå®¹é‡a/b  
   - æ§åˆ¶é¢æ¿å«é€Ÿåº¦æ»‘å—å’ŒAIæ¼”ç¤ºæŒ‰é’®  
   - èƒŒæ™¯æ’­æ”¾8-bité£æ ¼å¾ªç¯éŸ³ä¹

2. **æ“ä½œæ¼”ç¤º**ï¼š  
   - å€’ç©ºæ¯ï¼šæ¯å†…åƒç´ å—æ¸…ç©º + "å”°"éŸ³æ•ˆ  
   - è£…æ»¡æ¯ï¼šåƒç´ å—å¡«å…… + "å®"éŸ³æ•ˆ  
   - å€’æ°´ï¼šåƒç´ å—æµåŠ¨åŠ¨ç”» + å®æ—¶æ–¹ç¨‹æ›´æ–°

3. **æ•°å­¦æ¨å¯¼**ï¼š  
   - æ˜¾ç¤º `-aX + bY = k` çš„æ¨å¯¼è¿‡ç¨‹  
   - ç‰¹è§£(x,y)æ˜¾ç¤ºä¸ºæµ®åŠ¨åƒç´ æ•°å­—  
   - é€šè§£tè°ƒæ•´æ—¶æ˜¾ç¤ºæ¨¡è¿ç®—ç¯çŠ¶åŠ¨ç”»

4. **ç»“æœå±•ç¤º**ï¼š  
   - æˆåŠŸï¼šæ¯å­é—ªçƒ + èƒœåˆ©éŸ³æ•ˆ + æ“ä½œè®¡æ•°  
   - å¤±è´¥ï¼šç°è‰²æ»¤é•œ + é”™è¯¯æç¤ºéŸ³  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
**çŸ¥è¯†è¿ç§»**ï¼š
1. ç“¶å­æ¢æ°´é—®é¢˜ï¼ˆå¦‚ï¼šç”¨3L/5Lç“¶å¾—åˆ°4Læ°´ï¼‰
2. çº¿æ€§ä¸¢ç•ªå›¾æ–¹ç¨‹æ±‚è§£
3. æ¨¡è¿ç®—ä¼˜åŒ–é—®é¢˜

**æ´›è°·æ¨è**ï¼š
1. **P1516** é’è›™çš„çº¦ä¼š  
   â†’ åŒæ¬¾exgcdåº”ç”¨ï¼Œå¼ºåŒ–æ–¹ç¨‹å»ºæ¨¡èƒ½åŠ›
2. **P1082** åŒä½™æ–¹ç¨‹  
   â†’ è®­ç»ƒæœ€å°æ­£æ•´æ•°è§£æ±‚è§£æŠ€å·§
3. **P3951** å°å‡¯çš„ç–‘æƒ‘  
   â†’ æ‹“å±•è£´èœ€å®šç†çš„æ•°å­¦ç›´è§‰

---

> æœ¬æ¬¡é¢˜è§£å±•ç¤ºäº†**æ•°å­¦å·¥å…·è§£å†³ç‰©ç†é—®é¢˜**çš„ç»å…¸æ€è·¯ã€‚è®°ä½ï¼šå½“é‡åˆ°æ“ä½œåºåˆ—é—®é¢˜æ—¶ï¼Œå…ˆæ€è€ƒ"æ˜¯å¦å­˜åœ¨å®ˆæ’é‡æˆ–æ•°å­¦æ˜ å°„"ï¼

---
å¤„ç†ç”¨æ—¶ï¼š76.81ç§’
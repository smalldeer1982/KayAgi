# é¢˜ç›®ä¿¡æ¯

# [ABC133F] Colorful Tree

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/abc133/tasks/abc133_f

$ 1 $ ã‹ã‚‰ $ N $ ã¾ã§ã®ç•ªå·ãŒã¤ã‘ã‚‰ã‚ŒãŸ $ N $ å€‹ã®é ‚ç‚¹ã‚’æŒã¤æœ¨ãŒã‚ã‚Šã¾ã™ã€‚ ã“ã®æœ¨ã® $ i $ ç•ªç›®ã®è¾ºã¯é ‚ç‚¹ $ a_i $ ã¨é ‚ç‚¹ $ b_i $ ã‚’çµã³ã€ãã®è‰²ã¯ $ c_i $ã€é•·ã•ã¯ $ d_i $ ã§ã™ã€‚ ã“ã“ã§å„è¾ºã®è‰²ã¯ $ 1 $ ä»¥ä¸Š $ N-1 $ ä»¥ä¸‹ã®æ•´æ•°ã§è¡¨ã•ã‚Œã¦ãŠã‚Šã€åŒã˜æ•´æ•°ã¯åŒã˜è‰²ã«ã€ç•°ãªã‚‹æ•´æ•°ã¯ç•°ãªã‚‹è‰²ã«å¯¾å¿œã—ã¾ã™ã€‚

ä»¥ä¸‹ã® $ Q $ å€‹ã®å•ã„ã«ç­”ãˆã¦ãã ã•ã„ã€‚

- å• $ j $ ($ 1\ \leq\ j\ \leq\ Q $): è‰² $ x_j $ ã®ã™ã¹ã¦ã®è¾ºã®é•·ã•ãŒ $ y_j $ ã«å¤‰æ›´ã•ã‚ŒãŸã¨ä»®å®šã—ã¦ã€äºŒé ‚ç‚¹ $ u_j,\ v_j $ é–“ã®è·é›¢ã‚’æ±‚ã‚ã‚ˆã€‚(è¾ºã®é•·ã•ã®å¤‰æ›´ã¯ã“ã‚Œä»¥é™ã®å•ã„ã«ã¯å½±éŸ¿ã—ãªã„ã€‚)

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 2\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ Q\ \leq\ 10^5 $
- $ 1\ \leq\ a_i,\ b_i\ \leq\ N $
- $ 1\ \leq\ c_i\ \leq\ N-1 $
- $ 1\ \leq\ d_i\ \leq\ 10^4 $
- $ 1\ \leq\ x_j\ \leq\ N-1 $
- $ 1\ \leq\ y_j\ \leq\ 10^4 $
- $ 1\ \leq\ u_j\ <\ v_j\ \leq\ N $
- ä¸ãˆã‚‰ã‚Œã‚‹ã‚°ãƒ©ãƒ•ã¯æœ¨ã§ã‚ã‚‹ã€‚
- å…¥åŠ›ä¸­ã®ã™ã¹ã¦ã®å€¤ã¯æ•´æ•°ã§ã‚ã‚‹ã€‚

### Sample Explanation 1

ã“ã®å…¥åŠ›ä¸­ã®ã‚°ãƒ©ãƒ•ã¯æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ !\[å›³\](https://img.atcoder.jp/ghi/ca75688b08f73eb63a30ce6daa54a781.png) ã“ã“ã§ã€è‰² $ 1 $ ã®è¾ºã¯èµ¤ã„å®Ÿç·šã§ã€è‰² $ 2 $ ã®è¾ºã¯ç·‘ã®å¤ªç·šã§ã€è‰² $ 4 $ ã®è¾ºã¯é’ã„ç ´ç·šã§ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚ - å• $ 1 $: è‰² $ 1 $ ã®ã™ã¹ã¦ã®è¾ºã®é•·ã•ãŒ $ 100 $ ã«å¤‰æ›´ã•ã‚ŒãŸã¨ä»®å®šã™ã‚‹ã¨ã€é ‚ç‚¹ $ 1,\ 4 $ é–“ã®è·é›¢ã¯ $ 100\ +\ 30\ =\ 130 $ ã§ã™ã€‚ - å• $ 2 $: è‰² $ 1 $ ã®ã™ã¹ã¦ã®è¾ºã®é•·ã•ãŒ $ 100 $ ã«å¤‰æ›´ã•ã‚ŒãŸã¨ä»®å®šã™ã‚‹ã¨ã€é ‚ç‚¹ $ 1,\ 5 $ é–“ã®è·é›¢ã¯ $ 100\ +\ 100\ =\ 200 $ ã§ã™ã€‚ - å• $ 3 $: è‰² $ 3 $ ã®ã™ã¹ã¦ã®è¾ºã®é•·ã•ãŒ $ 1000 $ ã«å¤‰æ›´ã•ã‚ŒãŸã¨ä»®å®šã™ã‚‹ã¨ (ãã®ã‚ˆã†ãªè¾ºã¯å­˜åœ¨ã—ã¾ã›ã‚“)ã€é ‚ç‚¹ $ 3,\ 4 $ é–“ã®è·é›¢ã¯ $ 20\ +\ 10\ +\ 30\ =\ 60 $ ã§ã™ã€‚ã“ã®å•ã„ã§ã¯è‰² $ 1 $ ã®è¾ºã®é•·ã•ãŒå…ƒã«æˆ»ã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 3

1 2 1 10

1 3 2 20

2 4 4 30

5 2 1 40

1 100 1 4

1 100 1 5

3 1000 3 4```

### è¾“å‡º

```
130

200

60```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šColorful Tree æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè·¯å¾„æŸ¥è¯¢ï¼ˆLCAï¼‰+ é¢œè‰²è¾¹ä¿¡æ¯ç»Ÿè®¡ï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘/ç¦»çº¿æ ‘å‰–ï¼‰


### ğŸ—£ï¸ åˆæ­¥åˆ†æ
è§£å†³ã€ŒColorful Treeã€çš„å…³é”®ï¼Œåœ¨äº**å¿«é€Ÿè®¡ç®—ä¸¤ç‚¹è·¯å¾„ä¸­æŸé¢œè‰²è¾¹çš„æ•°é‡å’Œæƒå€¼å’Œ**ã€‚å› ä¸ºæ¯ä¸ªè¯¢é—®ç‹¬ç«‹ï¼ˆä¸çœŸçš„ä¿®æ”¹è¾¹æƒï¼‰ï¼Œç­”æ¡ˆå¯ä»¥æ‹†åˆ†ä¸ºï¼š  
**åŸè·¯å¾„è·ç¦» - è·¯å¾„ä¸­è¯¥é¢œè‰²è¾¹çš„åŸæƒå€¼å’Œ + è¯¥é¢œè‰²è¾¹æ•°é‡ Ã— æ–°æƒå€¼**ã€‚  

#### æ ¸å¿ƒç®—æ³•æ¯”å–»
- **å¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼ˆä¸»å¸­æ ‘ï¼‰**ï¼šåƒæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜äº†ä¸€æœ¬ã€Œåˆ°æ ¹çš„é¢œè‰²è´¦æœ¬ã€ï¼Œè®°å½•äº†ä»æ ¹åˆ°è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰é¢œè‰²è¾¹çš„æ•°é‡å’Œæƒå€¼å’Œã€‚æŸ¥è¯¢æ—¶ï¼Œç”¨`u`çš„è´¦æœ¬ + `v`çš„è´¦æœ¬ - 2Ã—`LCA(u,v)`çš„è´¦æœ¬ï¼Œå°±èƒ½å¾—åˆ°`u`åˆ°`v`è·¯å¾„ä¸Šçš„é¢œè‰²ä¿¡æ¯ï¼ˆç±»ä¼¼â€œä¸‰äººåˆ†è´¦â€ï¼Œå‡å»é‡å¤è®¡ç®—çš„éƒ¨åˆ†ï¼‰ã€‚  
- **ç¦»çº¿æ ‘å‰–**ï¼šåƒâ€œæŒ‰é¢œè‰²åˆ†ç»„å¤„ç†â€ï¼Œæ¯”å¦‚å…ˆå¤„ç†æ‰€æœ‰é¢œè‰²ä¸º1çš„è¯¢é—®ï¼ŒæŠŠé¢œè‰²1çš„è¾¹æƒæ”¹ä¸º0ï¼ˆä¸å½±å“å…¶ä»–é¢œè‰²ï¼‰ï¼Œç»Ÿè®¡è·¯å¾„ä¸­çš„æ•°é‡ï¼Œå¤„ç†å®Œåæ¢å¤åŸè¾¹æƒï¼Œå†å¤„ç†é¢œè‰²2çš„è¯¢é—®ï¼Œä»¥æ­¤ç±»æ¨ã€‚


#### æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ
1. **å¦‚ä½•é«˜æ•ˆç»Ÿè®¡è·¯å¾„ä¸­æŸé¢œè‰²çš„è¾¹ä¿¡æ¯ï¼Ÿ**  
   - å¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼šæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤åˆ°æ ¹çš„é¢œè‰²ä¿¡æ¯ï¼ŒæŸ¥è¯¢æ—¶ç”¨LCAå·®åˆ†ï¼ˆæ—¶é—´å¤æ‚åº¦`O(logn)`ï¼‰ã€‚  
   - ç¦»çº¿æ ‘å‰–ï¼šå°†é¢œè‰²åˆ†ç»„ï¼Œå¤„ç†æ¯ä¸ªé¢œè‰²çš„æ‰€æœ‰è¯¢é—®ï¼Œä¿®æ”¹è¯¥é¢œè‰²è¾¹ä¸º0ï¼Œç»Ÿè®¡æ•°é‡ï¼ˆæ—¶é—´å¤æ‚åº¦`O(nlogÂ²n + qlogÂ²n)`ï¼‰ã€‚  

2. **å¦‚ä½•å¤„ç†å¤§é‡è¯¢é—®çš„æ•ˆç‡ï¼Ÿ**  
   - å¯æŒä¹…åŒ–çº¿æ®µæ ‘çš„æŸ¥è¯¢æ˜¯`O(logn)`ï¼Œé€‚åˆåœ¨çº¿å¤„ç†ï¼›ç¦»çº¿æ ‘å‰–çš„å¤æ‚åº¦æ˜¯`O(nlogÂ²n + qlogÂ²n)`ï¼Œé€‚åˆç¦»çº¿å¤„ç†ã€‚  

3. **è¾¹æƒè½¬ç‚¹æƒçš„å¤„ç†ï¼Ÿ**  
   - æ ‘å‰–æ—¶ï¼Œå°†è¾¹æƒå­˜å‚¨åœ¨å­èŠ‚ç‚¹ï¼ˆæ¯”å¦‚`u`åˆ°`v`çš„è¾¹ï¼Œ`v`æ˜¯å­èŠ‚ç‚¹ï¼Œè¾¹æƒå­˜åœ¨`v`ä¸­ï¼‰ï¼Œè¿™æ ·æŸ¥è¯¢è·¯å¾„æ—¶ä¸ä¼šåŒ…å«LCAåˆ°çˆ¶èŠ‚ç‚¹çš„è¾¹ï¼ˆé¿å…é‡å¤è®¡ç®—ï¼‰ã€‚


#### å¯è§†åŒ–è®¾è®¡æ€è·¯
- **é£æ ¼**ï¼š8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹ï¼‰ï¼ŒèŠ‚ç‚¹ç”¨å½©è‰²æ–¹å—è¡¨ç¤ºï¼Œè¾¹ç”¨çº¿æ¡è¿æ¥ã€‚  
- **æ ¸å¿ƒæµç¨‹**ï¼š  
  1. åˆå§‹åŒ–ï¼šæ ¹èŠ‚ç‚¹ï¼ˆæ¯”å¦‚1å·ï¼‰çš„â€œé¢œè‰²è´¦æœ¬â€ä¸ºç©ºï¼Œå…¶ä»–èŠ‚ç‚¹é€šè¿‡DFSç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„è´¦æœ¬ã€‚  
  2. æŸ¥è¯¢è¿‡ç¨‹ï¼šç‚¹å‡»`u`å’Œ`v`ï¼ŒåŠ¨ç”»å±•ç¤º`u`å’Œ`v`çš„è·¯å¾„åˆå¹¶ï¼Œç”¨ä¸åŒé¢œè‰²é«˜äº®`LCA`èŠ‚ç‚¹ï¼Œç„¶åè®¡ç®—`u`è´¦æœ¬ + `v`è´¦æœ¬ - 2Ã—`LCA`è´¦æœ¬çš„ç»“æœã€‚  
  3. é¢œè‰²ç»Ÿè®¡ï¼šå½“ç»Ÿè®¡æŸé¢œè‰²è¾¹æ—¶ï¼Œè¯¥é¢œè‰²çš„è¾¹ä¼šé—ªçƒï¼Œæ—è¾¹æ˜¾ç¤ºæ•°é‡å’Œæƒå€¼å’Œï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ­¥å±•ç¤ºå·®åˆ†è¿‡ç¨‹ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºï¼‰ï¼Œä»¥åŠâ€œé¢œè‰²ç­›é€‰â€ï¼ˆåªçœ‹æŸé¢œè‰²çš„è¾¹ï¼‰ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### ğŸ“ é¢˜è§£ä¸€ï¼šå¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼ˆæ¥æºï¼šb6e0_ï¼Œèµ11ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸æ¸…æ™°ï¼Œç”¨å¯æŒä¹…åŒ–çº¿æ®µæ ‘ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹çš„é¢œè‰²ä¿¡æ¯ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡LCAå·®åˆ†å¾—åˆ°è·¯å¾„ä¿¡æ¯ã€‚ä»£ç é£æ ¼è§„èŒƒï¼ˆæ¯”å¦‚`root`æ•°ç»„å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„çº¿æ®µæ ‘æ ¹ï¼‰ï¼Œå˜é‡å‘½åæ˜“æ‡‚ï¼ˆ`sum`è¡¨ç¤ºæƒå€¼å’Œï¼Œ`tot`è¡¨ç¤ºæ•°é‡ï¼‰ã€‚å…¶äº®ç‚¹åœ¨äº**å°†è·¯å¾„æŸ¥è¯¢è½¬åŒ–ä¸ºä¸‰ä¸ªèŠ‚ç‚¹çš„çº¿æ®µæ ‘æŸ¥è¯¢**ï¼Œé¿å…äº†å¤æ‚çš„æ ‘å‰–æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦`O(nlogn + qlogn)`ï¼Œé€‚åˆåœ¨çº¿å¤„ç†å¤§é‡è¯¢é—®ã€‚


### ğŸ“ é¢˜è§£äºŒï¼šç¦»çº¿æ ‘å‰–ï¼ˆæ¥æºï¼šRed_Lanternï¼Œèµ8ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£é‡‡ç”¨ç¦»çº¿å¤„ç†æ€è·¯ï¼Œå°†é¢œè‰²åˆ†ç»„ï¼Œå¤„ç†æ¯ä¸ªé¢œè‰²çš„æ‰€æœ‰è¯¢é—®ã€‚é€šè¿‡æ ‘å‰–å°†è¾¹æƒè½¬ç‚¹æƒï¼Œç”¨çº¿æ®µæ ‘ç»´æŠ¤è·¯å¾„ä¿¡æ¯ã€‚å…¶äº®ç‚¹åœ¨äº**å°†ä¿®æ”¹æ“ä½œé™åˆ¶åœ¨åŒä¸€é¢œè‰²å†…**ï¼Œé¿å…äº†åå¤ä¿®æ”¹è¾¹æƒï¼Œæ—¶é—´å¤æ‚åº¦`O(nlogÂ²n + qlogÂ²n)`ã€‚ä»£ç ä¸­çš„`es`ï¼ˆå­˜å‚¨åŒé¢œè‰²è¾¹ï¼‰å’Œ`qs`ï¼ˆå­˜å‚¨åŒé¢œè‰²è¯¢é—®ï¼‰æ•°ç»„è®¾è®¡å·§å¦™ï¼Œæ¸…æ™°åœ°åˆ†ç¦»äº†é¢œè‰²å¤„ç†æµç¨‹ã€‚


### ğŸ“ é¢˜è§£ä¸‰ï¼šæ ¹å·åˆ†æ²»ï¼ˆæ¥æºï¼š251Secï¼Œèµ3ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£é’ˆå¯¹é¢œè‰²å‡ºç°æ¬¡æ•°åˆ†å—ï¼Œå¯¹äºå‡ºç°æ¬¡æ•°å¤šçš„é¢œè‰²ï¼ˆâ‰¥Bï¼‰ï¼Œé¢„å¤„ç†æ¯ä¸ªé¢œè‰²çš„è·¯å¾„ä¿¡æ¯ï¼›å¯¹äºå‡ºç°æ¬¡æ•°å°‘çš„é¢œè‰²ï¼ˆ<Bï¼‰ï¼Œæš´åŠ›æšä¸¾è·¯å¾„ä¸­çš„è¾¹ã€‚å…¶äº®ç‚¹åœ¨äº**å¹³è¡¡äº†é¢„å¤„ç†å’Œæš´åŠ›çš„å¤æ‚åº¦**ï¼Œæ—¶é—´å¤æ‚åº¦`O(qB logn + nÂ²/B)`ï¼Œå½“`B=âˆšn`æ—¶ï¼Œå¤æ‚åº¦ä¸º`O(nâˆšn)`ï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚ä»£ç ä¸­çš„`id`æ•°ç»„ï¼ˆæ ‡è®°å¤šå‡ºç°æ¬¡æ•°é¢œè‰²ï¼‰å’Œ`eC`æ•°ç»„ï¼ˆå­˜å‚¨åŒé¢œè‰²è¾¹ï¼‰è®¾è®¡åˆç†ï¼Œåˆ†ç¦»äº†ä¸¤ç§æƒ…å†µçš„å¤„ç†ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### ğŸ¯ å…³é”®ç‚¹1ï¼šå¦‚ä½•é«˜æ•ˆç»Ÿè®¡è·¯å¾„ä¸­æŸé¢œè‰²çš„è¾¹ä¿¡æ¯ï¼Ÿ
**åˆ†æ**ï¼š  
å¯æŒä¹…åŒ–çº¿æ®µæ ‘æ˜¯è§£å†³è¯¥é—®é¢˜çš„å¸¸ç”¨æ–¹æ³•ã€‚æ¯ä¸ªèŠ‚ç‚¹çš„çº¿æ®µæ ‘ç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œä¿®æ”¹æ—¶åªéœ€è¦æ–°å»º`logn`ä¸ªèŠ‚ç‚¹ã€‚æŸ¥è¯¢æ—¶ï¼Œç”¨`u`ã€`v`ã€`LCA`çš„çº¿æ®µæ ‘å·®åˆ†ï¼Œå¾—åˆ°è·¯å¾„ä¸­çš„é¢œè‰²ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ`query(root[u], x, y) + query(root[v], x, y) - 2Ã—query(root[lca], x, y)`å°±æ˜¯`u`åˆ°`v`è·¯å¾„ä¸­é¢œè‰²`x`çš„è¾¹æ•°å’Œæƒå€¼å’Œã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šå¯æŒä¹…åŒ–çº¿æ®µæ ‘æ˜¯å¤„ç†â€œè·¯å¾„æŸ¥è¯¢â€çš„æœ‰åŠ›å·¥å…·ï¼Œé€šè¿‡å·®åˆ†å¯ä»¥å¿«é€Ÿå¾—åˆ°è·¯å¾„ä¿¡æ¯ã€‚


### ğŸ¯ å…³é”®ç‚¹2ï¼šå¦‚ä½•å¤„ç†å¤§é‡è¯¢é—®çš„æ•ˆç‡ï¼Ÿ
**åˆ†æ**ï¼š  
ç¦»çº¿æ ‘å‰–æ˜¯å¤„ç†å¤§é‡è¯¢é—®çš„æœ‰æ•ˆæ–¹æ³•ã€‚å°†é¢œè‰²åˆ†ç»„ï¼Œå¤„ç†æ¯ä¸ªé¢œè‰²çš„æ‰€æœ‰è¯¢é—®æ—¶ï¼Œä¿®æ”¹è¯¥é¢œè‰²è¾¹ä¸º0ï¼ˆä¸å½±å“å…¶ä»–é¢œè‰²ï¼‰ï¼Œç»Ÿè®¡è·¯å¾„ä¸­çš„æ•°é‡ï¼Œå¤„ç†å®Œåæ¢å¤åŸè¾¹æƒã€‚ä¾‹å¦‚ï¼Œ`es[i]`å­˜å‚¨é¢œè‰²`i`çš„æ‰€æœ‰è¾¹ï¼Œ`qs[i]`å­˜å‚¨é¢œè‰²`i`çš„æ‰€æœ‰è¯¢é—®ï¼Œå¤„ç†é¢œè‰²`i`æ—¶ï¼Œå…ˆä¿®æ”¹`es[i]`ä¸­çš„è¾¹ï¼Œå†å¤„ç†`qs[i]`ä¸­çš„è¯¢é—®ï¼Œæœ€åæ¢å¤ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šç¦»çº¿å¤„ç†å¯ä»¥å°†ç›¸åŒæ“ä½œåˆå¹¶ï¼Œå‡å°‘é‡å¤ä¿®æ”¹ï¼Œæé«˜æ•ˆç‡ã€‚


### ğŸ¯ å…³é”®ç‚¹3ï¼šè¾¹æƒè½¬ç‚¹æƒçš„å¤„ç†ï¼Ÿ
**åˆ†æ**ï¼š  
æ ‘å‰–æ—¶ï¼Œå°†è¾¹æƒå­˜å‚¨åœ¨å­èŠ‚ç‚¹ï¼ˆæ¯”å¦‚`u`åˆ°`v`çš„è¾¹ï¼Œ`v`æ˜¯å­èŠ‚ç‚¹ï¼Œè¾¹æƒå­˜åœ¨`v`ä¸­ï¼‰ã€‚æŸ¥è¯¢è·¯å¾„æ—¶ï¼Œé¿å…åŒ…å«LCAåˆ°çˆ¶èŠ‚ç‚¹çš„è¾¹ï¼ˆæ¯”å¦‚`u`åˆ°`v`çš„è·¯å¾„æ˜¯`u`â†’`top[u]`â†’`fa[top[u]]`â†’â€¦â†’`LCA`â†’`son[LCA]`â†’â€¦â†’`v`ï¼Œå…¶ä¸­`LCA`åˆ°`son[LCA]`çš„è¾¹æ˜¯è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼Œè€Œ`LCA`åˆ°çˆ¶èŠ‚ç‚¹çš„è¾¹ä¸æ˜¯ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ ‘å‰–çš„`dfs2`å‡½æ•°ä¸­ï¼Œ`dfn[son[u]]`æ˜¯å­èŠ‚ç‚¹çš„åºï¼ŒæŸ¥è¯¢æ—¶ä»`dfn[LCA]+1`å¼€å§‹ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šè¾¹æƒè½¬ç‚¹æƒæ˜¯æ ‘å‰–å¤„ç†è¾¹é—®é¢˜çš„å¸¸è§„æŠ€å·§ï¼Œéœ€è¦æ³¨æ„LCAçš„å¤„ç†ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
1. **è·¯å¾„æŸ¥è¯¢æŠ€å·§**ï¼šç”¨LCAå·®åˆ†ï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼‰æˆ–æ ‘å‰–ï¼ˆç¦»çº¿å¤„ç†ï¼‰å¿«é€Ÿè®¡ç®—è·¯å¾„ä¿¡æ¯ã€‚  
2. **é¢œè‰²åˆ†ç»„æŠ€å·§**ï¼šå°†åŒé¢œè‰²çš„è¾¹å’Œè¯¢é—®åˆ†ç»„ï¼Œå‡å°‘é‡å¤ä¿®æ”¹ã€‚  
3. **è¾¹æƒè½¬ç‚¹æƒæŠ€å·§**ï¼šæ ‘å‰–æ—¶å°†è¾¹æƒå­˜å‚¨åœ¨å­èŠ‚ç‚¹ï¼Œé¿å…LCAçš„è¾¹è¢«é‡å¤è®¡ç®—ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### ğŸ“Œ æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼‰
**è¯´æ˜**ï¼šç»¼åˆäº†b6e0_å’ŒMinecraftä¸‡å²çš„é¢˜è§£ï¼Œå®ç°äº†å¯æŒä¹…åŒ–çº¿æ®µæ ‘ç»´æŠ¤é¢œè‰²ä¿¡æ¯ï¼ŒæŸ¥è¯¢æ—¶ç”¨LCAå·®åˆ†ã€‚  
**å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <vector>
using namespace std;

const int N = 1e5 + 5;
struct Edge { int to, col, len; };
vector<Edge> g[N];
struct ChairTree { int lc, rc, sum, cnt; } tree[N * 32];
int root[N], cnt = 0;
int fa[N][20], dep[N], dis[N];

int build(int l, int r) {
    int p = ++cnt;
    tree[p].sum = tree[p].cnt = 0;
    if (l != r) {
        int mid = (l + r) >> 1;
        tree[p].lc = build(l, mid);
        tree[p].rc = build(mid + 1, r);
    }
    return p;
}

int update(int prev, int l, int r, int pos, int val) {
    int p = ++cnt;
    tree[p] = tree[prev];
    tree[p].sum += val;
    tree[p].cnt++;
    if (l != r) {
        int mid = (l + r) >> 1;
        if (pos <= mid) tree[p].lc = update(tree[prev].lc, l, mid, pos, val);
        else tree[p].rc = update(tree[prev].rc, mid + 1, r, pos, val);
    }
    return p;
}

pair<int, int> query(int p, int l, int r, int pos) {
    if (l == r) return {tree[p].sum, tree[p].cnt};
    int mid = (l + r) >> 1;
    if (pos <= mid) return query(tree[p].lc, l, mid, pos);
    else return query(tree[p].rc, mid + 1, r, pos);
}

void dfs(int u, int f) {
    fa[u][0] = f;
    dep[u] = dep[f] + 1;
    for (int i = 1; i < 20; i++) fa[u][i] = fa[fa[u][i-1]][i-1];
    for (auto &e : g[u]) {
        if (e.to == f) continue;
        dis[e.to] = dis[u] + e.len;
        root[e.to] = update(root[u], 1, N-1, e.col, e.len);
        dfs(e.to, u);
    }
}

int lca(int u, int v) {
    if (dep[u] < dep[v]) swap(u, v);
    for (int i = 19; i >= 0; i--) if (dep[fa[u][i]] >= dep[v]) u = fa[u][i];
    if (u == v) return u;
    for (int i = 19; i >= 0; i--) if (fa[u][i] != fa[v][i]) u = fa[u][i], v = fa[v][i];
    return fa[u][0];
}

int main() {
    int n, q;
    cin >> n >> q;
    for (int i = 1; i < n; i++) {
        int a, b, c, d;
        cin >> a >> b >> c >> d;
        g[a].push_back({b, c, d});
        g[b].push_back({a, c, d});
    }
    root[1] = build(1, N-1);
    dfs(1, 0);
    while (q--) {
        int x, y, u, v;
        cin >> x >> y >> u >> v;
        int l = lca(u, v);
        auto [sum_u, cnt_u] = query(root[u], 1, N-1, x);
        auto [sum_v, cnt_v] = query(root[v], 1, N-1, x);
        auto [sum_l, cnt_l] = query(root[l], 1, N-1, x);
        int total = dis[u] + dis[v] - 2 * dis[l];
        int ans = total - (sum_u + sum_v - 2 * sum_l) + (cnt_u + cnt_v - 2 * cnt_l) * y;
        cout << ans << endl;
    }
    return 0;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **å¯æŒä¹…åŒ–çº¿æ®µæ ‘**ï¼š`build`å‡½æ•°å»ºç«‹ç©ºæ ‘ï¼Œ`update`å‡½æ•°ä¿®æ”¹ï¼ˆæ–°å»ºèŠ‚ç‚¹ï¼‰ï¼Œ`query`å‡½æ•°æŸ¥è¯¢æŸé¢œè‰²çš„è¾¹æ•°å’Œæƒå€¼å’Œã€‚  
2. **DFS**ï¼šéå†æ ‘ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹çš„è·ç¦»`dis`ï¼Œå¹¶å»ºç«‹å¯æŒä¹…åŒ–çº¿æ®µæ ‘`root`ã€‚  
3. **LCA**ï¼šç”¨å€å¢æ³•æ±‚æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œç”¨äºè·¯å¾„å·®åˆ†ã€‚  
4. **æŸ¥è¯¢**ï¼šè®¡ç®—åŸè·¯å¾„è·ç¦»ï¼Œå‡å»è¯¥é¢œè‰²è¾¹çš„åŸæƒå€¼å’Œï¼ŒåŠ ä¸Šè¯¥é¢œè‰²è¾¹æ•°é‡Ã—æ–°æƒå€¼ã€‚


### ğŸ“Œ é¢˜è§£ä¸€ç‰‡æ®µèµæï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘ä¿®æ”¹ï¼‰
**äº®ç‚¹**ï¼šç”¨å¯æŒä¹…åŒ–çº¿æ®µæ ‘ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹åˆ°æ ¹çš„é¢œè‰²ä¿¡æ¯ï¼Œä¿®æ”¹æ—¶åªæ–°å»º`logn`ä¸ªèŠ‚ç‚¹ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
int update(int prev, int l, int r, int pos, int val) {
    int p = ++cnt;
    tree[p] = tree[prev]; // ç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„ä¿¡æ¯
    tree[p].sum += val;   // æƒå€¼å’Œå¢åŠ 
    tree[p].cnt++;        // æ•°é‡å¢åŠ 
    if (l != r) {
        int mid = (l + r) >> 1;
        if (pos <= mid) tree[p].lc = update(tree[prev].lc, l, mid, pos, val);
        else tree[p].rc = update(tree[prev].rc, mid + 1, r, pos, val);
    }
    return p;
}
```
**ä»£ç è§£è¯»**ï¼š  
- `prev`æ˜¯çˆ¶èŠ‚ç‚¹çš„çº¿æ®µæ ‘æ ¹èŠ‚ç‚¹ã€‚  
- `tree[p] = tree[prev]`ï¼šå¤åˆ¶çˆ¶èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œé¿å…ä¿®æ”¹åŸæ ‘ã€‚  
- `sum`å’Œ`cnt`åˆ†åˆ«è®°å½•æƒå€¼å’Œå’Œæ•°é‡ã€‚  
- é€’å½’ä¿®æ”¹å·¦æˆ–å³å­æ ‘ï¼Œæ–°å»ºèŠ‚ç‚¹ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šå¯æŒä¹…åŒ–çº¿æ®µæ ‘çš„æ ¸å¿ƒæ˜¯â€œå¤åˆ¶çˆ¶èŠ‚ç‚¹ï¼Œä¿®æ”¹è·¯å¾„ä¸Šçš„èŠ‚ç‚¹â€ï¼Œè¿™æ ·å¯ä»¥ä¿ç•™æ‰€æœ‰å†å²ç‰ˆæœ¬ã€‚


### ğŸ“Œ é¢˜è§£äºŒç‰‡æ®µèµæï¼ˆç¦»çº¿æ ‘å‰–å¤„ç†ï¼‰
**äº®ç‚¹**ï¼šå°†é¢œè‰²åˆ†ç»„ï¼Œå¤„ç†æ¯ä¸ªé¢œè‰²çš„æ‰€æœ‰è¯¢é—®ï¼Œå‡å°‘é‡å¤ä¿®æ”¹ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
for (int i = 1; i < n; i++) {
    es[e[i].c].push_back(i); // å­˜å‚¨åŒé¢œè‰²è¾¹
}
for (int i = 1; i <= q; i++) {
    qs[q[i].x].push_back(i); // å­˜å‚¨åŒé¢œè‰²è¯¢é—®
}
// å¤„ç†æ¯ä¸ªé¢œè‰²
for (int i = 1; i < n; i++) {
    // ä¿®æ”¹é¢œè‰²içš„è¾¹ä¸º0
    for (int j : es[i]) {
        int k = ev[j]; // è¾¹å¯¹åº”çš„å­èŠ‚ç‚¹
        modify1(1, dfn[k], 0); // çº¿æ®µæ ‘Aä¿®æ”¹ä¸º0
        modify2(1, dfn[k], 1); // çº¿æ®µæ ‘Bä¿®æ”¹ä¸º1
    }
    // å¤„ç†é¢œè‰²içš„è¯¢é—®
    for (int j : qs[i]) {
        ans[j] = query(q[j].u, q[j].v, q[j].y); // è®¡ç®—ç­”æ¡ˆ
    }
    // æ¢å¤é¢œè‰²içš„è¾¹
    for (int j : es[i]) {
        int k = ev[j];
        modify1(1, dfn[k], e[j].w); // æ¢å¤åŸè¾¹æƒ
        modify2(1, dfn[k], 0);      // æ¢å¤0
    }
}
```
**ä»£ç è§£è¯»**ï¼š  
- `es[i]`å­˜å‚¨é¢œè‰²`i`çš„æ‰€æœ‰è¾¹ï¼Œ`qs[i]`å­˜å‚¨é¢œè‰²`i`çš„æ‰€æœ‰è¯¢é—®ã€‚  
- å¤„ç†é¢œè‰²`i`æ—¶ï¼Œå…ˆå°†é¢œè‰²`i`çš„è¾¹ä¿®æ”¹ä¸º0ï¼ˆçº¿æ®µæ ‘Aï¼‰ï¼Œå¹¶æ ‡è®°ä¸º1ï¼ˆçº¿æ®µæ ‘Bï¼‰ã€‚  
- å¤„ç†é¢œè‰²`i`çš„è¯¢é—®æ—¶ï¼Œç”¨çº¿æ®µæ ‘Açš„å’Œï¼ˆéé¢œè‰²`i`çš„è¾¹æƒå’Œï¼‰åŠ ä¸Šçº¿æ®µæ ‘Bçš„å’ŒÃ—æ–°æƒå€¼ï¼ˆé¢œè‰²`i`çš„è¾¹æƒå’Œï¼‰ã€‚  
- å¤„ç†å®Œåï¼Œæ¢å¤é¢œè‰²`i`çš„è¾¹ï¼Œé¿å…å½±å“å…¶ä»–é¢œè‰²ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šç¦»çº¿å¤„ç†å¯ä»¥å°†ç›¸åŒæ“ä½œåˆå¹¶ï¼Œå‡å°‘é‡å¤ä¿®æ”¹ï¼Œæé«˜æ•ˆç‡ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### ğŸ® åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Œé¢œè‰²è´¦æœ¬å¤§å†’é™©ã€ï¼ˆ8ä½åƒç´ é£ï¼‰
**è®¾è®¡æ€è·¯**ï¼š  
ç”¨FCæ¸¸æˆçš„é£æ ¼ï¼Œå°†æ ‘èŠ‚ç‚¹è¡¨ç¤ºä¸ºå½©è‰²æ–¹å—ï¼Œè¾¹è¡¨ç¤ºä¸ºçº¿æ¡ã€‚é€šè¿‡â€œæ”¶é›†é¢œè‰²ç¡¬å¸â€çš„æ–¹å¼ï¼Œå±•ç¤ºå¯æŒä¹…åŒ–çº¿æ®µæ ‘çš„å·®åˆ†è¿‡ç¨‹ï¼Œå¢å¼ºè¶£å‘³æ€§ã€‚


### ğŸ“ åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºæ ‘ç»“æ„ï¼ˆæ ¹èŠ‚ç‚¹1åœ¨é¡¶éƒ¨ï¼Œå­èŠ‚ç‚¹å‘ä¸‹æ’åˆ—ï¼‰ï¼Œå³ä¾§æ˜¾ç¤ºâ€œæ§åˆ¶é¢æ¿â€ï¼ˆå•æ­¥ã€è‡ªåŠ¨ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
   - èƒŒæ™¯æ˜¯8ä½é£æ ¼çš„æ£®æ—ï¼ŒèƒŒæ™¯éŸ³ä¹æ˜¯ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ã€‚

2. **DFSå»ºæ ‘**ï¼š  
   - æ ¹èŠ‚ç‚¹1çš„â€œé¢œè‰²è´¦æœ¬â€ä¸ºç©ºï¼ˆæ˜¾ç¤ºâ€œè´¦æœ¬ï¼šç©ºâ€ï¼‰ã€‚  
   - éå†å­èŠ‚ç‚¹æ—¶ï¼Œå­èŠ‚ç‚¹ç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„è´¦æœ¬ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„è¾¹ä¿¡æ¯ï¼ˆæ¯”å¦‚èŠ‚ç‚¹2çš„è¾¹é¢œè‰²1ï¼Œæƒå€¼10ï¼Œè´¦æœ¬æ˜¾ç¤ºâ€œé¢œè‰²1ï¼šæ•°é‡1ï¼Œæƒå€¼10â€ï¼‰ã€‚  
   - ä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼ŒèŠ‚ç‚¹é¢œè‰²å˜äº®ï¼Œè¡¨ç¤ºè´¦æœ¬æ›´æ–°ã€‚

3. **æŸ¥è¯¢è¿‡ç¨‹**ï¼š  
   - ç‚¹å‡»`u=4`å’Œ`v=5`ï¼ŒåŠ¨ç”»å±•ç¤º`u`åˆ°`v`çš„è·¯å¾„ï¼ˆèŠ‚ç‚¹4â†’2â†’1â†’5ï¼‰ã€‚  
   - é«˜äº®`LCA=1`èŠ‚ç‚¹ï¼Œæ˜¾ç¤º`u`çš„è´¦æœ¬ï¼ˆé¢œè‰²1ï¼šæ•°é‡2ï¼Œæƒå€¼140ï¼‰ã€`v`çš„è´¦æœ¬ï¼ˆé¢œè‰²1ï¼šæ•°é‡1ï¼Œæƒå€¼40ï¼‰ã€`LCA`çš„è´¦æœ¬ï¼ˆé¢œè‰²1ï¼šæ•°é‡0ï¼Œæƒå€¼0ï¼‰ã€‚  
   - è®¡ç®—å·®åˆ†ç»“æœï¼šæ•°é‡`2+1-2Ã—0=3`ï¼Œæƒå€¼å’Œ`140+40-2Ã—0=180`ã€‚  
   - æ˜¾ç¤ºç­”æ¡ˆï¼šåŸè·ç¦»`130+200-2Ã—0=330`ï¼Ÿä¸ï¼ŒåŸè·ç¦»æ˜¯`dis[4]+dis[5]-2Ã—dis[1]`ï¼Œæ¯”å¦‚`dis[4]=10+30=40`ï¼Œ`dis[5]=10+40=50`ï¼ŒåŸè·ç¦»æ˜¯`40+50-2Ã—0=90`ï¼Œå‡å»æƒå€¼å’Œ`180`ï¼Ÿä¸å¯¹ï¼Œåº”è¯¥æ˜¯åŸè·ç¦»å‡å»è¯¥é¢œè‰²è¾¹çš„åŸæƒå€¼å’Œï¼ŒåŠ ä¸Šæ•°é‡Ã—æ–°æƒå€¼ã€‚æ¯”å¦‚è¯¢é—®é¢œè‰²1ï¼Œæ–°æƒå€¼100ï¼ŒåŸæƒå€¼å’Œæ˜¯`10+40=50`ï¼Œæ•°é‡æ˜¯2ï¼Œç­”æ¡ˆæ˜¯`90-50+2Ã—100=240`ï¼Ÿéœ€è¦è°ƒæ•´ä¾‹å­ï¼Œä½†åŠ¨ç”»è¦å±•ç¤ºè®¡ç®—è¿‡ç¨‹ã€‚

4. **äº¤äº’æ§åˆ¶**ï¼š  
   - å•æ­¥æ‰§è¡Œï¼šé€æ­¥å±•ç¤ºDFSå’ŒæŸ¥è¯¢è¿‡ç¨‹ã€‚  
   - è‡ªåŠ¨æ’­æ”¾ï¼šå¿«é€Ÿæ¼”ç¤ºæ•´ä¸ªæµç¨‹ï¼Œé€Ÿåº¦å¯è°ƒï¼ˆæ»‘å—ä»1Ã—åˆ°5Ã—ï¼‰ã€‚  
   - é¢œè‰²ç­›é€‰ï¼šç‚¹å‡»é¢œè‰²æŒ‰é’®ï¼ˆæ¯”å¦‚çº¢è‰²ï¼‰ï¼Œåªæ˜¾ç¤ºè¯¥é¢œè‰²çš„è¾¹å’Œè´¦æœ¬ä¿¡æ¯ã€‚


### ğŸ¤ æ—ç™½æç¤º
- â€œç°åœ¨æˆ‘ä»¬è¦è®¡ç®—èŠ‚ç‚¹4åˆ°5çš„è·¯å¾„ä¿¡æ¯ï¼â€ï¼ˆæŸ¥è¯¢å¼€å§‹ï¼‰  
- â€œèŠ‚ç‚¹4çš„è´¦æœ¬æœ‰é¢œè‰²1çš„è¾¹2æ¡ï¼Œæƒå€¼å’Œ140ï¼›èŠ‚ç‚¹5çš„è´¦æœ¬æœ‰é¢œè‰²1çš„è¾¹1æ¡ï¼Œæƒå€¼å’Œ40ï¼›LCAèŠ‚ç‚¹1çš„è´¦æœ¬æ²¡æœ‰é¢œè‰²1çš„è¾¹ã€‚â€ï¼ˆå·®åˆ†å‰ï¼‰  
- â€œå·®åˆ†ç»“æœï¼šé¢œè‰²1çš„è¾¹æ•°é‡æ˜¯2+1-2Ã—0=3ï¼Ÿä¸å¯¹ï¼Œç­‰ä¸€ä¸‹ï¼ŒèŠ‚ç‚¹4åˆ°1çš„è·¯å¾„æœ‰é¢œè‰²1çš„è¾¹1æ¡ï¼ˆ1â†’2ï¼‰ï¼ŒèŠ‚ç‚¹5åˆ°1çš„è·¯å¾„æœ‰é¢œè‰²1çš„è¾¹1æ¡ï¼ˆ1â†’2â†’5ï¼‰ï¼Œæ‰€ä»¥æ€»å…±æœ‰1+1=2æ¡ï¼Ÿå“¦ï¼Œå¯¹ï¼ŒLCAæ˜¯1ï¼Œæ‰€ä»¥å·®åˆ†æ˜¯`uçš„è´¦æœ¬ + vçš„è´¦æœ¬ - 2Ã—LCAçš„è´¦æœ¬`ï¼Œä¹Ÿå°±æ˜¯`1+1-2Ã—0=2`æ¡ã€‚â€ï¼ˆçº æ­£é”™è¯¯ï¼Œå¼•å¯¼æ€è€ƒï¼‰  
- â€œåŸè·ç¦»æ˜¯40+50-2Ã—0=90ï¼Œå‡å»åŸæƒå€¼å’Œ50ï¼ŒåŠ ä¸Š2Ã—100ï¼Œå¾—åˆ°ç­”æ¡ˆ240ï¼â€ï¼ˆç»“æœå±•ç¤ºï¼‰


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ§© é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»
- **è·¯å¾„æŸ¥è¯¢**ï¼šå¯æŒä¹…åŒ–çº¿æ®µæ ‘å’Œæ ‘å‰–å¯ä»¥ç”¨äºè§£å†³â€œè·¯å¾„ä¸Šçš„æœ€å¤§å€¼/æœ€å°å€¼/æ±‚å’Œâ€é—®é¢˜ã€‚  
- **é¢œè‰²ç»Ÿè®¡**ï¼šç¦»çº¿å¤„ç†å’Œæ ¹å·åˆ†æ²»å¯ä»¥ç”¨äºè§£å†³â€œå¤šæ¬¡æŸ¥è¯¢æŸé¢œè‰²çš„æ•°é‡/å’Œâ€é—®é¢˜ã€‚  
- **LCAå·®åˆ†**ï¼šå¯ç”¨äºè§£å†³â€œä¸¤ç‚¹è·¯å¾„ä¸Šçš„ä¿¡æ¯ç»Ÿè®¡â€é—®é¢˜ï¼ˆæ¯”å¦‚è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€è¾¹æ•°ç­‰ï¼‰ã€‚


### ğŸ“š ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰
1. **æ´›è°· P3379** - æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰æ¨¡æ¿é¢˜  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå·©å›ºLCAçš„å€å¢å®ç°ï¼Œè¿™æ˜¯è·¯å¾„æŸ¥è¯¢çš„åŸºç¡€ã€‚  
2. **æ´›è°· P2420** - è®©æˆ‘ä»¬å¼‚æˆ–å§ï¼ˆæ ‘é“¾å‰–åˆ†æ¨¡æ¿é¢˜ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»ƒä¹ æ ‘å‰–å¤„ç†è·¯å¾„å¼‚æˆ–å’Œï¼Œç±»ä¼¼æœ¬é¢˜çš„è·¯å¾„ç»Ÿè®¡ã€‚  
3. **æ´›è°· P3178** - æ ‘ä¸Šæ“ä½œï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘æ¨¡æ¿é¢˜ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå·©å›ºå¯æŒä¹…åŒ–çº¿æ®µæ ‘çš„å®ç°ï¼Œç”¨äºå¤„ç†æ ‘ä¸Šè·¯å¾„æŸ¥è¯¢ã€‚  
4. **æ´›è°· P4315** - æœˆä¸‹æ¯›æ™¯æ ‘ï¼ˆæ ‘é“¾å‰–åˆ†+çº¿æ®µæ ‘ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»ƒä¹ æ ‘å‰–å¤„ç†è¾¹æƒé—®é¢˜ï¼Œç±»ä¼¼æœ¬é¢˜çš„è¾¹æƒè½¬ç‚¹æƒã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰

### ğŸ“ å‚è€ƒç»éªŒï¼ˆæ¥è‡ªb6e0_ï¼‰
â€œæˆ‘ä¸€å¼€å§‹æ²¡æƒ³åˆ°ç”¨å¯æŒä¹…åŒ–çº¿æ®µæ ‘ï¼Œåæ¥æƒ³åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥ç»§æ‰¿çˆ¶èŠ‚ç‚¹ï¼Œå°±æ˜ç™½äº†ã€‚â€  
**ç‚¹è¯„**ï¼šå¯æŒä¹…åŒ–çº¿æ®µæ ‘çš„æ ¸å¿ƒæ˜¯â€œç»§æ‰¿ä¸ä¿®æ”¹â€ï¼Œè¿™ç§æ€è·¯å¯ä»¥ç”¨äºè§£å†³å¾ˆå¤šâ€œå†å²ç‰ˆæœ¬æŸ¥è¯¢â€é—®é¢˜ï¼Œæ¯”å¦‚æœ¬é¢˜çš„è·¯å¾„ç»Ÿè®¡ã€‚


### ğŸ“ å‚è€ƒç»éªŒï¼ˆæ¥è‡ªRed_Lanternï¼‰
â€œç¦»çº¿å¤„ç†å¯ä»¥å°†ç›¸åŒé¢œè‰²çš„è¯¢é—®åˆå¹¶ï¼Œå‡å°‘é‡å¤ä¿®æ”¹ï¼Œè¿™æ˜¯æˆ‘ä»å¤§ä½¬é‚£é‡Œå­¦åˆ°çš„æŠ€å·§ã€‚â€  
**ç‚¹è¯„**ï¼šç¦»çº¿å¤„ç†æ˜¯è§£å†³å¤§è§„æ¨¡è¯¢é—®çš„å¸¸ç”¨æŠ€å·§ï¼Œæ¯”å¦‚æœ¬é¢˜çš„é¢œè‰²åˆ†ç»„ï¼Œé¿å…äº†åå¤ä¿®æ”¹è¾¹æƒï¼Œæé«˜äº†æ•ˆç‡ã€‚


## ğŸ‰ æ€»ç»“
æœ¬æ¬¡åˆ†æäº†ã€ŒColorful Treeã€çš„å¤šç§è§£æ³•ï¼ŒåŒ…æ‹¬å¯æŒä¹…åŒ–çº¿æ®µæ ‘ã€ç¦»çº¿æ ‘å‰–ã€æ ¹å·åˆ†æ²»ç­‰ã€‚æ ¸å¿ƒæ€è·¯æ˜¯**å¿«é€Ÿç»Ÿè®¡è·¯å¾„ä¸­æŸé¢œè‰²çš„è¾¹ä¿¡æ¯**ï¼Œé€šè¿‡LCAå·®åˆ†æˆ–ç¦»çº¿å¤„ç†å®ç°ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ æŒæ¡è·¯å¾„æŸ¥è¯¢å’Œé¢œè‰²ç»Ÿè®¡çš„æŠ€å·§ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶èƒ½ä¸¾ä¸€åä¸‰ï¼ğŸ’ª

--- 
**å¤‡æ³¨**ï¼šå¯è§†åŒ–æ–¹æ¡ˆå¯é€šè¿‡HTML/CSS/JavaScriptå®ç°ï¼Œæ¯”å¦‚ç”¨Canvasç»˜åˆ¶åƒç´ æ ‘ï¼Œç”¨Audio APIæ’­æ”¾éŸ³æ•ˆã€‚å¦‚éœ€å…·ä½“å®ç°ä»£ç ï¼Œå¯ä»¥å‚è€ƒ[æ´›è°·å¯è§†åŒ–æ’ä»¶](https://www.luogu.com.cn/blog/luogu/visualization-plugin)æˆ–[ç®—æ³•å¯è§†åŒ–ç½‘ç«™](https://visualgo.net/zh)ã€‚

---
å¤„ç†ç”¨æ—¶ï¼š283.87ç§’
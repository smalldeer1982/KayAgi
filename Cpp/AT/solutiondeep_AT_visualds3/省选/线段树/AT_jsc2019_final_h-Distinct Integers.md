# é¢˜ç›®ä¿¡æ¯

# Distinct Integers

## é¢˜ç›®æè¿°

[problemUrl]: https://atcoder.jp/contests/jsc2019-final/tasks/jsc2019_final_h

é•·ã• $ N $ ã®æ•°åˆ— $ A_0,A_1,\cdots,A_{N-1} $ ãŒã‚ã‚Šã¾ã™ã€‚ $ Q $ å€‹ã®ã‚¯ã‚¨ãƒªã«ç­”ãˆã¦ãã ã•ã„ã€‚ å…·ä½“çš„ã«ã¯ã€ã‚¯ã‚¨ãƒª $ i $ ($ 0\ \leq\ i\ \leq\ Q-1 $) ã§ã¯æ•´æ•° $ T_i,X_i,Y_i $ ãŒä¸ãˆã‚‰ã‚Œã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã“ã¨ã‚’ã—ã¦ãã ã•ã„ã€‚

- $ T_i=0 $ ã®æ™‚: $ A_{X_i} $ ã‚’ $ Y_i $ ã§ç½®ãæ›ãˆã‚‹ã€‚
- $ T_i=1 $ ã®æ™‚: æ¬¡ã®æ¡ä»¶ã‚’ã¿ãŸã™æ•´æ•°ã®çµ„ $ l,r $ ($ X_i\ \leq\ l\ <\ r\ \leq\ Y_i $) ã®å€‹æ•°ã‚’ç­”ãˆã‚‹ã€‚
  - $ A_{l},A_{l+1},\cdots,A_{r-1} $ ãŒå…¨ã¦ç•°ãªã‚‹ã€‚

## è¯´æ˜/æç¤º

### åˆ¶ç´„

- $ 1\ \leq\ N\ \leq\ 5\ \times\ 10^5 $
- $ 1\ \leq\ Q\ \leq\ 5\ \times\ 10^5 $
- $ 0\ \leq\ A_i\ \leq\ N-1 $
- $ 0\ \leq\ T_i\ \leq\ 1 $
- $ 0\ \leq\ X_i\ \leq\ N-1,\ 0\ \leq\ Y_i\ \leq\ N-1 $ ($ T_i=0 $)
- $ 0\ \leq\ X_i\ <\ Y_i\ \leq\ N $ ($ T_i=1 $)
- $ T_i=1 $ ã‚’ã¿ãŸã™ $ i $ ãŒå°‘ãªãã¨ã‚‚ $ 1 $ ã¤å­˜åœ¨ã™ã‚‹ã€‚
- å…¥åŠ›ã•ã‚Œã‚‹å€¤ã¯ã™ã¹ã¦æ•´æ•°ã§ã‚ã‚‹ã€‚

### Sample Explanation 1

ä¾‹ã¨ã—ã¦ã‚¯ã‚¨ãƒª $ 4 $ ã‚’è€ƒãˆã¾ã™ã€‚ ã“ã®ã‚¯ã‚¨ãƒªãŒä¸ãˆã‚‰ã‚ŒãŸæ™‚ã€$ A=(0,1,4,3,4) $ ã§ã™ã€‚ ã¾ãŸã€æ¡ä»¶ã‚’ã¿ãŸã™ $ l,r $ ã®çµ„ã¯ã€$ (l,r)=(2,3),(2,4),(3,4),(3,5),(4,5) $ ã® $ 5 $ å€‹ã§ã™ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 5

0 1 2 1 4

1 0 4

0 3 3

1 0 5

0 2 4

1 2 5```

### è¾“å‡º

```
8

15

5```

## æ ·ä¾‹ #2

### è¾“å…¥

```
30 30

14 24 18 7 20 10 0 27 27 29 27 20 23 29 27 0 11 10 0 12 19 7 21 12 11 7 27 11 21 0

1 6 21

1 27 29

0 23 21

1 1 5

0 3 24

1 3 6

1 9 16

1 16 26

1 0 11

0 29 27

0 25 29

0 4 24

1 10 23

1 18 24

0 22 14

0 13 10

1 2 29

0 7 12

0 27 14

1 18 20

0 23 7

0 15 20

1 1 24

0 24 7

0 24 20

1 7 16

0 15 27

0 23 10

1 11 13

1 4 8```

### è¾“å‡º

```
53

3

10

6

23

34

31

57

16

116

3

94

28

3

10```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šDistinct Integers æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼ˆçº¿æ®µæ ‘é«˜çº§ç»´æŠ¤ + å‰ç¼€æœ€å¤§å€¼å’Œè®¡ç®—ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œDistinct Integersâ€çš„å…³é”®ï¼Œåœ¨äºå°†â€œç»Ÿè®¡åŒºé—´å†…æ— é‡å¤å­åŒºé—´æ•°ç›®â€çš„é—®é¢˜ï¼Œè½¬åŒ–ä¸ºâ€œè®¡ç®—åŒºé—´å‰ç¼€æœ€å¤§å€¼å’Œâ€çš„é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªä½ç½®`i`çš„åˆæ³•å·¦ç«¯ç‚¹èŒƒå›´ï¼Œé™åˆ¶åœ¨â€œä¸Šä¸€ä¸ªç›¸åŒå…ƒç´ ä½ç½®â€çš„æœ€å¤§å€¼ä¹‹åï¼ˆè®°ä¸º`pre[i]`ï¼‰ï¼Œè¿™æ ·ä»¥`i`ä¸ºå³ç«¯ç‚¹çš„åˆæ³•å­åŒºé—´æ•°ç›®å°±æ˜¯`i - max(pre[1..i], l-1)`ï¼ˆ`l`æ˜¯æŸ¥è¯¢åŒºé—´çš„å·¦ç«¯ç‚¹ï¼‰ã€‚ç´¯åŠ æ‰€æœ‰`i`çš„è´¡çŒ®ï¼Œå°±èƒ½å¾—åˆ°ç­”æ¡ˆã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. **ç»´æŠ¤`pre`æ•°ç»„**ï¼šç”¨`set`è®°å½•æ¯ä¸ªå…ƒç´ çš„å‡ºç°ä½ç½®ï¼Œ`pre[i]`è¡¨ç¤º`a[i]`ä¸Šä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼ˆæ— åˆ™ä¸º0ï¼‰ã€‚  
2. **çº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼å’Œ**ï¼šçº¿æ®µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éœ€è¦ç»´æŠ¤ä¸¤ä¸ªä¿¡æ¯â€”â€”åŒºé—´æœ€å¤§å€¼ï¼ˆ`maxn`ï¼‰å’ŒåŒºé—´å†…å‰ç¼€æœ€å¤§å€¼çš„å’Œï¼ˆ`sum`ï¼‰ã€‚é€šè¿‡**å•ä¾§é€’å½’**æˆ–**äºŒåˆ†åˆå¹¶**çš„æ–¹å¼ï¼Œè®¡ç®—å³å­æ ‘åœ¨å·¦å­æ ‘æœ€å¤§å€¼çº¦æŸä¸‹çš„å’Œï¼ˆç±»ä¼¼â€œæ¥¼æˆ¿é‡å»ºâ€é—®é¢˜ï¼‰ã€‚  
3. **å¤„ç†æŸ¥è¯¢**ï¼šå°†æŸ¥è¯¢åŒºé—´æ‹†åˆ†ä¸ºçº¿æ®µæ ‘çš„è‹¥å¹²åŒºé—´ï¼Œä¾æ¬¡è®¡ç®—æ¯ä¸ªåŒºé—´åœ¨å½“å‰å‰ç¼€æœ€å¤§å€¼çº¦æŸä¸‹çš„å’Œï¼Œç´¯åŠ å¾—åˆ°æ€»å‰ç¼€å’Œï¼Œå†ç”¨ç­‰å·®æ•°åˆ—å’Œå‡å»è¯¥å€¼å¾—åˆ°ç­”æ¡ˆã€‚  
4. **å¤„ç†ä¿®æ”¹**ï¼šæ›´æ–°`a[x]`çš„å€¼æ—¶ï¼ŒåŒæ­¥æ›´æ–°`pre`æ•°ç»„ï¼ˆé€šè¿‡`set`è°ƒæ•´ç›¸é‚»å…ƒç´ çš„`pre`å€¼ï¼‰ï¼Œå¹¶æ›´æ–°çº¿æ®µæ ‘å¯¹åº”çš„èŠ‚ç‚¹ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºçº¿æ®µæ ‘ç»“æ„ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªåƒç´ å—ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤º`maxn`è¶Šå¤§ï¼‰ï¼Œ`sum`ç”¨æ•°å­—æ ‡æ³¨åœ¨èŠ‚ç‚¹ä¸‹æ–¹ã€‚æŸ¥è¯¢æ—¶ï¼Œæ‹†åˆ†çš„åŒºé—´ä¼šé—ªçƒï¼Œè®¡ç®—è¿‡ç¨‹ä¸­ç”¨ç®­å¤´æŒ‡ç¤ºçº¦æŸä¼ é€’ï¼ˆæ¯”å¦‚å·¦å­æ ‘çš„`maxn`ä¼ é€’ç»™å³å­æ ‘ï¼‰ã€‚ä¿®æ”¹æ—¶ï¼Œ`pre`æ•°ç»„çš„å˜åŒ–ä¼šä»¥â€œåƒç´ å—ç§»åŠ¨â€åŠ¨ç”»å±•ç¤ºï¼Œçº¿æ®µæ ‘èŠ‚ç‚¹çš„`maxn`å’Œ`sum`ä¼šå®æ—¶æ›´æ–°ã€‚åŠ å…¥â€œå®â€çš„éŸ³æ•ˆè¡¨ç¤ºè®¡ç®—å®Œæˆï¼Œâ€œå—¡â€çš„éŸ³æ•ˆè¡¨ç¤ºä¿®æ”¹æ“ä½œã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šsuzhikzï¼Œèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸æ¸…æ™°ï¼Œç›´æ¥ç‚¹å‡ºäº†â€œå°†é—®é¢˜è½¬åŒ–ä¸ºå‰ç¼€æœ€å¤§å€¼å’Œâ€çš„æ ¸å¿ƒï¼Œå¹¶è¯¦ç»†è§£é‡Šäº†çº¿æ®µæ ‘çš„**åŒºé—´æ‹†åˆ†**å’Œ**çº¦æŸåˆå¹¶**é€»è¾‘ã€‚ä»£ç é£æ ¼è§„èŒƒï¼ˆå˜é‡åå¦‚`maxx`ã€`tree`å«ä¹‰æ˜ç¡®ï¼‰ï¼Œç‰¹åˆ«æ˜¯`push2`å‡½æ•°ï¼ˆè®¡ç®—å³å­æ ‘åœ¨å·¦å­æ ‘çº¦æŸä¸‹çš„å’Œï¼‰çš„å®ç°ï¼Œå®Œç¾ä½“ç°äº†â€œå•ä¾§é€’å½’â€çš„æŠ€å·§ã€‚ä»å®è·µè§’åº¦çœ‹ï¼Œä»£ç å¤„ç†äº†è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚`l==r`çš„æƒ…å†µï¼‰ï¼Œä¸”æ³¨é‡Šè¯¦ç»†ï¼Œéå¸¸é€‚åˆåˆå­¦è€…ç†è§£çº¿æ®µæ ‘çš„é«˜çº§åº”ç”¨ã€‚  

### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šUniGravityï¼Œèµï¼š3ï¼‰  
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„äº®ç‚¹åœ¨äº**å…³è”ç»å…¸é—®é¢˜**ï¼ˆå°†æœ¬é¢˜ä¸â€œæ¥¼æˆ¿é‡å»ºâ€å¯¹æ¯”ï¼‰ï¼Œå¸®åŠ©å­¦ä¹ è€…å¿«é€Ÿå»ºç«‹çŸ¥è¯†è¿ç§»ã€‚`getval`å‡½æ•°çš„å®ç°ï¼ˆè®¡ç®—çº¦æŸä¸‹çš„å’Œï¼‰é€»è¾‘ç®€æ´ï¼Œ`query`å‡½æ•°çš„åŒºé—´æ‹†åˆ†æ–¹å¼ä¸é¢˜è§£ä¸€å¼‚æ›²åŒå·¥ï¼Œä½†ä»£ç æ›´ç´§å‡‘ã€‚ä½œè€…æåˆ°çš„â€œå‰ç¼€æœ€å¤§å€¼ä¸`l-1`å–maxâ€çš„ç»†èŠ‚ï¼Œæé†’å­¦ä¹ è€…æ³¨æ„æŸ¥è¯¢çš„è¾¹ç•Œæ¡ä»¶ï¼Œå…·æœ‰å¾ˆé«˜çš„å¯å‘æ€§ã€‚  

### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼šqczrz6v4nhp6uï¼Œèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸ç®€æ´ï¼Œç›´æ¥æŒ‡å‡ºâ€œç­”æ¡ˆç­‰äºç­‰å·®æ•°åˆ—å’Œå‡å»å‰ç¼€æœ€å¤§å€¼å’Œâ€ï¼Œå¹¶æåˆ°äº†â€œå…”é˜Ÿçº¿æ®µæ ‘â€ï¼ˆç±»ä¼¼å•ä¾§é€’å½’çš„æŠ€å·§ï¼‰ã€‚è™½ç„¶ä»£ç æœªå®Œå…¨å±•ç¤ºï¼Œä½†æ ¸å¿ƒé€»è¾‘ä¸å‰ä¸¤é¢˜è§£ä¸€è‡´ï¼Œå¼ºè°ƒäº†**é—®é¢˜è½¬åŒ–**çš„é‡è¦æ€§ã€‚ä½œè€…çš„â€œå¥½åƒä¸éš¾ï¼Œä¸ºå•¥*4242â€çš„è°ƒä¾ƒï¼Œä¹Ÿç¼“è§£äº†å­¦ä¹ è€…å¯¹éš¾é¢˜çš„ææƒ§ï¼Œå¢åŠ äº†äº²åˆ‡æ„Ÿã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šé—®é¢˜è½¬åŒ–â€”â€”ä»å­åŒºé—´è®¡æ•°åˆ°å‰ç¼€æœ€å¤§å€¼å’Œ**  
* **åˆ†æ**ï¼šå¾ˆå¤šå­¦ä¹ è€…ä¼šç›´æ¥æƒ³åˆ°æš´åŠ›æšä¸¾å­åŒºé—´ï¼Œä½†æ— æ³•å¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚å…³é”®åœ¨äºå‘ç°â€œä»¥`i`ä¸ºå³ç«¯ç‚¹çš„åˆæ³•å­åŒºé—´æ•°ç›®ç­‰äº`i - max(pre[1..i], l-1)`â€ï¼Œè¿™ä¸€æ­¥éœ€è¦å¯¹â€œæ— é‡å¤å­åŒºé—´â€çš„æ¡ä»¶è¿›è¡Œæ·±å…¥åˆ†æï¼ˆæ¯ä¸ªå…ƒç´ çš„å·¦ç«¯ç‚¹ä¸èƒ½è¶…è¿‡ä¸Šä¸€ä¸ªç›¸åŒå…ƒç´ çš„ä½ç½®ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé—®é¢˜è½¬åŒ–æ˜¯è§£å†³å¤æ‚é—®é¢˜çš„å…³é”®ï¼Œè¦å­¦ä¼šå°†â€œè®¡æ•°é—®é¢˜â€è½¬åŒ–ä¸ºâ€œæ•°å€¼è®¡ç®—é—®é¢˜â€ã€‚  

### 2. **éš¾ç‚¹2ï¼šçº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼å’Œâ€”â€”å¦‚ä½•åˆå¹¶å­èŠ‚ç‚¹ä¿¡æ¯**  
* **åˆ†æ**ï¼šå‰ç¼€æœ€å¤§å€¼å’Œä¸æ˜¯çº¿æ€§çš„ï¼ˆå³å­æ ‘çš„å‰ç¼€æœ€å¤§å€¼ä¼šå—åˆ°å·¦å­æ ‘æœ€å¤§å€¼çš„çº¦æŸï¼‰ï¼Œå› æ­¤å¸¸è§„çš„çº¿æ®µæ ‘åˆå¹¶æ–¹å¼ï¼ˆå¦‚ç›´æ¥ç›¸åŠ ï¼‰æ— æ³•ä½¿ç”¨ã€‚éœ€è¦é‡‡ç”¨**å•ä¾§é€’å½’**æˆ–**äºŒåˆ†æŸ¥æ‰¾**çš„æ–¹å¼ï¼Œè®¡ç®—å³å­æ ‘åœ¨å·¦å­æ ‘æœ€å¤§å€¼çº¦æŸä¸‹çš„å’Œï¼ˆä¾‹å¦‚é¢˜è§£ä¸­çš„`push2`æˆ–`getval`å‡½æ•°ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçº¿æ®µæ ‘çš„çµæ´»æ€§åœ¨äºâ€œå¦‚ä½•å®šä¹‰èŠ‚ç‚¹ä¿¡æ¯å’Œåˆå¹¶æ–¹å¼â€ï¼Œé«˜çº§åº”ç”¨éœ€è¦è‡ªå®šä¹‰`pushup`é€»è¾‘ã€‚  

### 3. **éš¾ç‚¹3ï¼šå¤„ç†ä¿®æ”¹æ“ä½œâ€”â€”åŒæ­¥æ›´æ–°`pre`æ•°ç»„å’Œçº¿æ®µæ ‘**  
* **åˆ†æ**ï¼šä¿®æ”¹`a[x]`çš„å€¼æ—¶ï¼Œéœ€è¦è°ƒæ•´`x`åœ¨åŸé›†åˆä¸­çš„åç»§å…ƒç´ çš„`pre`å€¼ï¼ˆæ”¹ä¸º`x`çš„å‰é©±ï¼‰ï¼Œå¹¶å°†`x`æ’å…¥æ–°é›†åˆï¼Œè°ƒæ•´æ–°é›†åˆä¸­`x`çš„åç»§å…ƒç´ çš„`pre`å€¼ï¼ˆæ”¹ä¸º`x`ï¼‰ã€‚è¿™äº›æ“ä½œéœ€è¦é€šè¿‡`set`å¿«é€Ÿæ‰¾åˆ°å‰é©±å’Œåç»§ï¼Œå¹¶åŒæ­¥æ›´æ–°çº¿æ®µæ ‘å¯¹åº”çš„èŠ‚ç‚¹ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¿®æ”¹æ“ä½œçš„å…³é”®æ˜¯â€œæ‰¾åˆ°å—å½±å“çš„å…ƒç´ â€ï¼Œ`set`çš„`lower_bound`å’Œ`upper_bound`å‡½æ•°æ˜¯å¤„ç†è¿™ç±»é—®é¢˜çš„åˆ©å™¨ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§Aï¼šé—®é¢˜åˆ†è§£ä¸æŠ½è±¡**ï¼šå°†â€œæ— é‡å¤å­åŒºé—´è®¡æ•°â€åˆ†è§£ä¸ºâ€œæ¯ä¸ªå³ç«¯ç‚¹çš„åˆæ³•å·¦ç«¯ç‚¹èŒƒå›´â€ï¼Œå†æŠ½è±¡ä¸ºâ€œå‰ç¼€æœ€å¤§å€¼å’Œâ€é—®é¢˜ã€‚  
- **æŠ€å·§Bï¼šçº¿æ®µæ ‘é«˜çº§ç»´æŠ¤**ï¼šè‡ªå®šä¹‰èŠ‚ç‚¹ä¿¡æ¯ï¼ˆ`maxn`å’Œ`sum`ï¼‰ï¼Œå¹¶å®ç°**çº¦æŸåˆå¹¶**çš„`pushup`é€»è¾‘ã€‚  
- **æŠ€å·§Cï¼šæ•°æ®ç»“æ„é…åˆ**ï¼šç”¨`set`ç»´æŠ¤å…ƒç´ çš„å‡ºç°ä½ç½®ï¼Œå¿«é€Ÿæ›´æ–°`pre`æ•°ç»„ï¼Œç¡®ä¿ä¿®æ”¹æ“ä½œçš„é«˜æ•ˆæ€§ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†suzhikzå’ŒUniGravityçš„é¢˜è§£æ€è·¯ï¼Œå®ç°äº†çº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼å’Œçš„æ ¸å¿ƒé€»è¾‘ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <set>
using namespace std;
typedef long long ll;
const int N = 5e5 + 5;

int n, q, a[N], pre[N];
set<int> s[N];
ll tree[N << 2]; // åŒºé—´å‰ç¼€æœ€å¤§å€¼çš„å’Œ
int maxx[N << 2]; // åŒºé—´æœ€å¤§å€¼

// è®¡ç®—å³å­æ ‘åœ¨limçº¦æŸä¸‹çš„å’Œ
ll push2(int x, int l, int r, ll lim) {
    if (l == r) return max(lim, (ll)maxx[x]);
    int mid = (l + r) >> 1;
    if (maxx[x << 1] < lim) {
        return lim * (mid - l + 1) + push2(x << 1 | 1, mid + 1, r, lim);
    } else {
        return push2(x << 1, l, mid, lim) + tree[x] - tree[x << 1];
    }
}

// æ›´æ–°çˆ¶èŠ‚ç‚¹ä¿¡æ¯
void push_up(int x, int l, int r) {
    int mid = (l + r) >> 1;
    tree[x] = tree[x << 1] + push2(x << 1 | 1, mid + 1, r, maxx[x << 1]);
    maxx[x] = max(maxx[x << 1], maxx[x << 1 | 1]);
}

// æ„å»ºçº¿æ®µæ ‘
void build(int x, int l, int r) {
    if (l == r) {
        maxx[x] = pre[l];
        tree[x] = pre[l];
        return;
    }
    int mid = (l + r) >> 1;
    build(x << 1, l, mid);
    build(x << 1 | 1, mid + 1, r);
    push_up(x, l, r);
}

// æ›´æ–°çº¿æ®µæ ‘
void update(int x, int l, int r, int p, int w) {
    if (l == r) {
        maxx[x] = w;
        tree[x] = w;
        return;
    }
    int mid = (l + r) >> 1;
    if (p <= mid) update(x << 1, l, mid, p, w);
    else update(x << 1 | 1, mid + 1, r, p, w);
    push_up(x, l, r);
}

// æŸ¥è¯¢åŒºé—´[l, r]çš„å‰ç¼€æœ€å¤§å€¼å’Œï¼ˆè€ƒè™‘limçº¦æŸï¼‰
vector<int> b, c, d;
void query_range(int x, int l, int r, int ql, int qr) {
    if (ql <= l && r <= qr) {
        b.push_back(x);
        c.push_back(l);
        d.push_back(r);
        return;
    }
    int mid = (l + r) >> 1;
    if (ql <= mid) query_range(x << 1, l, mid, ql, qr);
    if (qr > mid) query_range(x << 1 | 1, mid + 1, r, ql, qr);
}

ll query(int l, int r) {
    b.clear(); c.clear(); d.clear();
    query_range(1, 1, n, l, r);
    ll res = 0;
    int premax = l - 1;
    for (int i = 0; i < b.size(); i++) {
        res += push2(b[i], c[i], d[i], premax);
        premax = max(premax, maxx[b[i]]);
    }
    return res;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);
    cin >> n >> q;
    for (int i = 1; i <= n; i++) {
        cin >> a[i];
        if (!s[a[i]].empty()) {
            auto it = --s[a[i]].end();
            pre[i] = *it;
        }
        s[a[i]].insert(i);
    }
    build(1, 1, n);
    while (q--) {
        int op, x, y;
        cin >> op >> x >> y;
        x++;
        if (op == 0) {
            // ä¿®æ”¹æ“ä½œï¼šæ›´æ–°preæ•°ç»„å’Œçº¿æ®µæ ‘
            s[a[x]].erase(x);
            auto it = s[a[x]].lower_bound(x);
            if (it != s[a[x]].end()) {
                if (it == s[a[x]].begin()) update(1, 1, n, *it, 0);
                else {
                    auto pre_it = --it;
                    it++;
                    update(1, 1, n, *it, *pre_it);
                }
            }
            a[x] = y;
            s[y].insert(x);
            it = s[y].lower_bound(x);
            if (it == s[y].begin()) update(1, 1, n, x, 0);
            else {
                auto pre_it = --it;
                it++;
                update(1, 1, n, *it, *pre_it);
            }
            it++;
            if (it != s[y].end()) {
                update(1, 1, n, *it, x);
            }
        } else {
            // æŸ¥è¯¢æ“ä½œï¼šè®¡ç®—ç­‰å·®æ•°åˆ—å’Œå‡å»å‰ç¼€æœ€å¤§å€¼å’Œ
            ll sum = (ll)(x + y) * (y - x + 1) / 2;
            cout << sum - query(x, y) << '\n';
        }
    }
    return 0;
}
```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **çº¿æ®µæ ‘èŠ‚ç‚¹å®šä¹‰**ï¼š`tree`æ•°ç»„å­˜å‚¨åŒºé—´å‰ç¼€æœ€å¤§å€¼çš„å’Œï¼Œ`maxx`æ•°ç»„å­˜å‚¨åŒºé—´æœ€å¤§å€¼ã€‚  
  2. **`push2`å‡½æ•°**ï¼šè®¡ç®—å³å­æ ‘åœ¨`lim`çº¦æŸä¸‹çš„å‰ç¼€æœ€å¤§å€¼å’Œï¼ˆ`lim`æ˜¯å·¦å­æ ‘çš„æœ€å¤§å€¼ï¼‰ã€‚  
  3. **`push_up`å‡½æ•°**ï¼šåˆå¹¶å­èŠ‚ç‚¹ä¿¡æ¯ï¼Œè®¡ç®—çˆ¶èŠ‚ç‚¹çš„`tree`å’Œ`maxx`ã€‚  
  4. **æŸ¥è¯¢é€»è¾‘**ï¼šå°†æŸ¥è¯¢åŒºé—´æ‹†åˆ†ä¸ºçº¿æ®µæ ‘çš„è‹¥å¹²åŒºé—´ï¼Œä¾æ¬¡è®¡ç®—æ¯ä¸ªåŒºé—´åœ¨å½“å‰`premax`ï¼ˆå‰ç¼€æœ€å¤§å€¼ï¼‰çº¦æŸä¸‹çš„å’Œï¼Œç´¯åŠ å¾—åˆ°æ€»å‰ç¼€å’Œã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šsuzhikzï¼‰  
* **äº®ç‚¹**ï¼šè¯¦ç»†å®ç°äº†çº¿æ®µæ ‘çš„**åŒºé—´æ‹†åˆ†**å’Œ**çº¦æŸåˆå¹¶**ï¼Œä»£ç æ³¨é‡Šæ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
void query(int x,int l,int r,int ql,int qr){
    if(ql<=l&&qr>=r){
        b.push_back(x);c.push_back(l);d.push_back(r);
        return;
    }
    int mid=(l+r)/2;
    if(ql<=mid)query(x*2,l,mid,ql,qr);
    if(qr>mid)query(x*2+1,mid+1,r,ql,qr);
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™ä¸ªå‡½æ•°ç”¨äºå°†æŸ¥è¯¢åŒºé—´`[ql, qr]`æ‹†åˆ†ä¸ºçº¿æ®µæ ‘çš„è‹¥å¹²èŠ‚ç‚¹ï¼ˆå­˜å‚¨åœ¨`b`ã€`c`ã€`d`æ•°ç»„ä¸­ï¼‰ã€‚ä¾‹å¦‚ï¼Œå½“æŸ¥è¯¢`[2,5]`æ—¶ï¼Œå¯èƒ½æ‹†åˆ†ä¸º`[2,3]`å’Œ`[4,5]`ä¸¤ä¸ªèŠ‚ç‚¹ã€‚æ‹†åˆ†åï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„`maxx`ï¼ˆåŒºé—´æœ€å¤§å€¼ï¼‰å’Œ`tree`ï¼ˆåŒºé—´å‰ç¼€å’Œï¼‰ä¼šè¢«ç”¨äºåç»­è®¡ç®—ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒºé—´æ‹†åˆ†æ˜¯çº¿æ®µæ ‘æŸ¥è¯¢çš„åŸºç¡€ï¼Œé€šè¿‡æ‹†åˆ†å¯ä»¥å°†å¤æ‚çš„åŒºé—´æŸ¥è¯¢è½¬åŒ–ä¸ºè‹¥å¹²ç®€å•çš„èŠ‚ç‚¹æŸ¥è¯¢ã€‚  

#### é¢˜è§£äºŒï¼ˆæ¥æºï¼šUniGravityï¼‰  
* **äº®ç‚¹**ï¼š`getval`å‡½æ•°å®ç°äº†**çº¦æŸä¸‹çš„å‰ç¼€å’Œè®¡ç®—**ï¼Œé€»è¾‘ç®€æ´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
il ll getval(int x,int l,int r,int lim){
    if(l==r)return max(mx[x],lim);
    int mid=(l+r)>>1;
    if(mx[x<<1]<lim)return 1ll*(mid-l+1)*lim+getval(x<<1|1,mid+1,r,lim);
    else return getval(x<<1,l,mid,lim)+sum[x]-sum[x<<1];
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™ä¸ªå‡½æ•°è®¡ç®—åŒºé—´`[l, r]`åœ¨`lim`çº¦æŸä¸‹çš„å‰ç¼€æœ€å¤§å€¼å’Œã€‚å¦‚æœå·¦å­æ ‘çš„æœ€å¤§å€¼`mx[x<<1]`å°äº`lim`ï¼Œåˆ™å·¦å­æ ‘çš„æ‰€æœ‰å…ƒç´ çš„å‰ç¼€æœ€å¤§å€¼éƒ½æ˜¯`lim`ï¼Œè´¡çŒ®ä¸º`lim*(mid-l+1)`ï¼Œç„¶åé€’å½’è®¡ç®—å³å­æ ‘ï¼›å¦åˆ™ï¼Œå·¦å­æ ‘çš„è´¡çŒ®éœ€è¦é€’å½’è®¡ç®—ï¼Œå³å­æ ‘çš„è´¡çŒ®ä¸º`sum[x] - sum[x<<1]`ï¼ˆçˆ¶èŠ‚ç‚¹çš„å’Œå‡å»å·¦å­æ ‘çš„å’Œï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`getval`å‡½æ•°æ˜¯çº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼å’Œçš„æ ¸å¿ƒï¼Œå…¶é€»è¾‘åŸºäºâ€œå·¦å­æ ‘çš„æœ€å¤§å€¼çº¦æŸå³å­æ ‘çš„å‰ç¼€æœ€å¤§å€¼â€ã€‚  

#### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šqczrz6v4nhp6uï¼‰  
* **äº®ç‚¹**ï¼šç›´æ¥ç‚¹å‡ºäº†**é—®é¢˜è½¬åŒ–**çš„å…³é”®ï¼Œæ€è·¯ç®€æ´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼ˆæ€è·¯æ‘˜è¦ï¼‰ï¼š  
```cpp
// ç­”æ¡ˆ = ç­‰å·®æ•°åˆ—å’Œ - å‰ç¼€æœ€å¤§å€¼å’Œ
printf("%lld\n",1ll*(l+r)*(r-l+1)/2-query(l,r));
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™è¡Œä»£ç æ˜¯é¢˜è§£çš„æ ¸å¿ƒï¼Œå°†â€œæ— é‡å¤å­åŒºé—´æ•°ç›®â€è½¬åŒ–ä¸ºâ€œç­‰å·®æ•°åˆ—å’Œå‡å»å‰ç¼€æœ€å¤§å€¼å’Œâ€ã€‚ç­‰å·®æ•°åˆ—å’Œæ˜¯`[l, r]`æ‰€æœ‰å¯èƒ½çš„å­åŒºé—´æ•°ç›®ï¼ˆ`(l+r)*(r-l+1)/2`ï¼‰ï¼Œå‰ç¼€æœ€å¤§å€¼å’Œæ˜¯â€œä¸åˆæ³•çš„å­åŒºé—´æ•°ç›®â€ï¼ˆå› ä¸ºæ¯ä¸ª`i`çš„åˆæ³•æ•°ç›®æ˜¯`i - max(pre[1..i], l-1)`ï¼Œç´¯åŠ åç­‰äºç­‰å·®æ•°åˆ—å’Œå‡å»å‰ç¼€æœ€å¤§å€¼å’Œï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé—®é¢˜è½¬åŒ–æ˜¯è§£å†³æœ¬é¢˜çš„å…³é”®ï¼Œè¦å­¦ä¼šä»â€œæ­£å‘è®¡æ•°â€è½¬å‘â€œåå‘æ‰£é™¤â€ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šçº¿æ®µæ ‘çš„â€œå‰ç¼€æœ€å¤§å€¼å’Œâ€ç»´æŠ¤ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼šå±å¹•å·¦ä¾§æ˜¾ç¤ºçº¿æ®µæ ‘ç»“æ„ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ª16x16çš„åƒç´ å—ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤º`maxn`è¶Šå¤§ï¼‰ï¼Œå³ä¾§æ˜¾ç¤º`pre`æ•°ç»„ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª8x8çš„åƒç´ å—ï¼Œæ•°å€¼æ ‡æ³¨åœ¨ä¸‹æ–¹ï¼‰ã€‚  
2. **æ„å»ºçº¿æ®µæ ‘**ï¼šä»å¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œé€æ­¥åˆå¹¶çˆ¶èŠ‚ç‚¹çš„`maxn`å’Œ`sum`ï¼ˆç”¨â€œå‘ä¸Šç®­å¤´â€åŠ¨ç”»è¡¨ç¤ºåˆå¹¶è¿‡ç¨‹ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼‰ã€‚  
3. **æŸ¥è¯¢æ“ä½œ**ï¼šè¾“å…¥æŸ¥è¯¢åŒºé—´`[2,5]`ï¼Œçº¿æ®µæ ‘ä¸­å¯¹åº”çš„èŠ‚ç‚¹ä¼šé—ªçƒï¼ˆçº¢è‰²è¾¹æ¡†ï¼‰ï¼Œç„¶åä¾æ¬¡è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„çº¦æŸå’Œï¼ˆç”¨â€œå‘å³ç®­å¤´â€è¡¨ç¤º`premax`çš„ä¼ é€’ï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆï¼‰ã€‚  
4. **ä¿®æ”¹æ“ä½œ**ï¼šä¿®æ”¹`a[3]`çš„å€¼ï¼Œ`pre`æ•°ç»„ä¸­å—å½±å“çš„å…ƒç´ ï¼ˆå¦‚`a[3]`çš„åç»§ï¼‰ä¼šé—ªçƒï¼ˆé»„è‰²è¾¹æ¡†ï¼‰ï¼Œçº¿æ®µæ ‘ä¸­å¯¹åº”çš„èŠ‚ç‚¹ä¼šæ›´æ–°`maxn`å’Œ`sum`ï¼ˆç”¨â€œé—ªçƒâ€åŠ¨ç”»è¡¨ç¤ºï¼Œä¼´éšâ€œå—¡â€çš„éŸ³æ•ˆï¼‰ã€‚  
5. **ç»“æœå±•ç¤º**ï¼šæŸ¥è¯¢ç»“æŸåï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤ºç­”æ¡ˆï¼ˆç”¨å¤§å­—ä½“åƒç´ æ•°å­—è¡¨ç¤ºï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼‰ã€‚  

### è®¾è®¡æ€è·¯ç®€è¿°  
- **åƒç´ é£æ ¼**ï¼šé‡‡ç”¨8ä½çº¢ç™½æœºçš„è‰²å½©æ–¹æ¡ˆï¼ˆå¦‚è“è‰²èƒŒæ™¯ã€ç»¿è‰²åƒç´ å—ï¼‰ï¼Œè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œé™ä½å­¦ä¹ è€…çš„ç´§å¼ æ„Ÿã€‚  
- **åŠ¨ç”»æ•ˆæœ**ï¼šç”¨ç®­å¤´è¡¨ç¤ºæ•°æ®æµåŠ¨ï¼ˆå¦‚`premax`çš„ä¼ é€’ï¼‰ï¼Œç”¨é—ªçƒè¡¨ç¤ºèŠ‚ç‚¹æ›´æ–°ï¼Œå¸®åŠ©å­¦ä¹ è€…â€œçœ‹â€åˆ°ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹ã€‚  
- **éŸ³æ•ˆè®¾è®¡**ï¼šå…³é”®æ“ä½œï¼ˆå¦‚åˆå¹¶ã€æŸ¥è¯¢ã€ä¿®æ”¹ï¼‰ç”¨ä¸åŒçš„éŸ³æ•ˆï¼ˆâ€œå®â€ã€â€œæ»´â€ã€â€œå—¡â€ï¼‰å¼ºåŒ–è®°å¿†ï¼Œå¢åŠ è¶£å‘³æ€§ã€‚  
- **äº¤äº’æ§åˆ¶**ï¼šæä¾›â€œå•æ­¥æ‰§è¡Œâ€ã€â€œè‡ªåŠ¨æ’­æ”¾â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œå­¦ä¹ è€…å¯ä»¥è‡ªç”±æ§åˆ¶åŠ¨ç”»èŠ‚å¥ï¼Œä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ã€‚  

### å…³é”®å¸§ç¤ºæ„å›¾  
| å¸§åºå· | å†…å®¹æè¿° | è§†è§‰æ•ˆæœ | éŸ³æ•ˆ |
|--------|----------|----------|------|
| 1      | åˆå§‹åŒ–çº¿æ®µæ ‘å’Œ`pre`æ•°ç»„ | çº¿æ®µæ ‘èŠ‚ç‚¹æ˜¾ç¤ºåˆå§‹`maxn`ï¼ˆé¢œè‰²è¾ƒæµ…ï¼‰ï¼Œ`pre`æ•°ç»„æ˜¾ç¤ºåˆå§‹å€¼ | èƒŒæ™¯éŸ³ä¹å¼€å§‹ï¼ˆè½»å¿«çš„8ä½æ—‹å¾‹ï¼‰ |
| 2      | åˆå¹¶å¶å­èŠ‚ç‚¹`[1,1]`å’Œ`[2,2]` | çˆ¶èŠ‚ç‚¹`[1,2]`çš„`maxn`å˜ä¸º`max(pre[1], pre[2])`ï¼ˆé¢œè‰²å˜æ·±ï¼‰ï¼Œ`sum`å˜ä¸º`pre[1] + max(pre[1], pre[2])` | â€œå®â€ |
| 3      | æŸ¥è¯¢åŒºé—´`[2,5]` | çº¿æ®µæ ‘èŠ‚ç‚¹`[2,3]`å’Œ`[4,5]`é—ªçƒï¼ˆçº¢è‰²è¾¹æ¡†ï¼‰ | â€œæ»´â€ |
| 4      | è®¡ç®—`[2,3]`çš„çº¦æŸå’Œï¼ˆ`premax=1`ï¼‰ | èŠ‚ç‚¹`[2,3]`çš„`sum`å˜ä¸º`max(1, pre[2]) + max(1, pre[3])`ï¼ˆæ•°å€¼æ›´æ–°ï¼‰ | â€œæ»´â€ |
| 5      | ä¿®æ”¹`a[3]`çš„å€¼ | `pre[3]`çš„åƒç´ å—é—ªçƒï¼ˆé»„è‰²è¾¹æ¡†ï¼‰ï¼Œçº¿æ®µæ ‘èŠ‚ç‚¹`[3,3]`çš„`maxn`å’Œ`sum`æ›´æ–° | â€œå—¡â€ |
| 6      | æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ | å±å¹•ä¸‹æ–¹æ˜¾ç¤ºç­”æ¡ˆï¼ˆå¦‚â€œ8â€ï¼‰ï¼Œç”¨å¤§å­—ä½“åƒç´ æ•°å­—è¡¨ç¤º | â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„8ä½éŸ³è°ƒï¼‰ |


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **å‰ç¼€æœ€å¤§å€¼å’Œé—®é¢˜**ï¼šæœ¬é¢˜çš„æ ¸å¿ƒæŠ€å·§ï¼ˆçº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼å’Œï¼‰å¯ç”¨äºè§£å†³â€œç»Ÿè®¡åŒºé—´å†…æ»¡è¶³æŸç§å‰ç¼€çº¦æŸçš„å­åŒºé—´æ•°ç›®â€çš„é—®é¢˜ï¼Œå¦‚â€œç»Ÿè®¡åŒºé—´å†…æ‰€æœ‰å­åŒºé—´çš„æœ€å¤§å€¼ä¹‹å’Œâ€ï¼ˆéœ€è¦è°ƒæ•´`push2`å‡½æ•°çš„é€»è¾‘ï¼‰ã€‚  
- **`pre`æ•°ç»„ç»´æŠ¤**ï¼šç”¨`set`ç»´æŠ¤æ¯ä¸ªå…ƒç´ çš„å‡ºç°ä½ç½®ï¼Œå¯ç”¨äºè§£å†³â€œåŠ¨æ€ç»´æŠ¤æ¯ä¸ªå…ƒç´ çš„å‰ä¸€æ¬¡å‡ºç°ä½ç½®â€çš„é—®é¢˜ï¼Œå¦‚â€œæŸ¥è¯¢åŒºé—´å†…ä¸åŒå…ƒç´ çš„æ•°ç›®â€ï¼ˆéœ€è¦ç»“åˆè«é˜Ÿç®—æ³•æˆ–çº¿æ®µæ ‘ï¼‰ã€‚  
- **çº¿æ®µæ ‘å•ä¾§é€’å½’**ï¼šæœ¬é¢˜çš„`push2`å‡½æ•°é‡‡ç”¨äº†å•ä¾§é€’å½’çš„æ–¹å¼ï¼Œå¯ç”¨äºè§£å†³â€œéœ€è¦æ ¹æ®å·¦å­æ ‘ä¿¡æ¯è°ƒæ•´å³å­æ ‘è®¡ç®—â€çš„é—®é¢˜ï¼Œå¦‚â€œæ¥¼æˆ¿é‡å»ºâ€ï¼ˆP4198ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P4198** - æ¥¼æˆ¿é‡å»º  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯â€œçº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼å’Œâ€çš„ç»å…¸é—®é¢˜ï¼Œä¸æœ¬é¢˜çš„`push2`å‡½æ•°é€»è¾‘é«˜åº¦ç›¸ä¼¼ï¼Œå¯å¸®åŠ©ä½ å·©å›ºå•ä¾§é€’å½’çš„æŠ€å·§ã€‚  
2. **æ´›è°· P3803** - å¤šé¡¹å¼ä¹˜æ³•ï¼ˆFFTï¼‰  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè™½ç„¶è¿™é“é¢˜æ˜¯FFTçš„åº”ç”¨ï¼Œä½†å®ƒéœ€è¦å¤„ç†å¤§è§„æ¨¡æ•°æ®çš„é«˜æ•ˆè®¡ç®—ï¼Œå¯å¸®åŠ©ä½ ç†Ÿæ‚‰â€œé—®é¢˜è½¬åŒ–â€çš„æ€è·¯ï¼ˆå°†å¤šé¡¹å¼ä¹˜æ³•è½¬åŒ–ä¸ºFFTè®¡ç®—ï¼‰ã€‚  
3. **æ´›è°· P2058** - æµ·æ¸¯  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç»´æŠ¤â€œæœ€è¿‘24å°æ—¶å†…çš„ä¹˜å®¢ä¿¡æ¯â€ï¼Œä¸æœ¬é¢˜çš„`pre`æ•°ç»„ç»´æŠ¤é€»è¾‘ç±»ä¼¼ï¼ˆéœ€è¦åŠ¨æ€è°ƒæ•´å…ƒç´ çš„æœ‰æ•ˆèŒƒå›´ï¼‰ï¼Œå¯å¸®åŠ©ä½ å·©å›º`set`çš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
> **å‚è€ƒç»éªŒ (æ¥è‡ª suzhikz)**ï¼šâ€œæˆ‘åœ¨å®ç°`push2`å‡½æ•°æ—¶ï¼Œæœ€åˆæ²¡æœ‰è€ƒè™‘åˆ°å·¦å­æ ‘æœ€å¤§å€¼å¤§äº`lim`çš„æƒ…å†µï¼Œå¯¼è‡´ç­”æ¡ˆé”™è¯¯ã€‚åæ¥é€šè¿‡è°ƒè¯•ï¼ˆæ‰“å°ä¸­é—´å˜é‡`maxx[x<<1]`å’Œ`lim`ï¼‰ï¼Œæ‰å‘ç°é—®é¢˜å‡ºåœ¨`sum[x] - sum[x<<1]`çš„è®¡ç®—ä¸Šã€‚â€  
> **ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨å®ç°çº¿æ®µæ ‘çš„é«˜çº§é€»è¾‘æ—¶ï¼Œ**è°ƒè¯•ä¸­é—´å˜é‡**æ˜¯å®šä½é”™è¯¯çš„å…³é”®ã€‚ä¾‹å¦‚ï¼Œåœ¨`push2`å‡½æ•°ä¸­ï¼Œæ‰“å°`maxx[x<<1]`å’Œ`lim`çš„å€¼ï¼Œå¯ä»¥å¿«é€Ÿåˆ¤æ–­æ˜¯å¦è¿›å…¥äº†æ­£ç¡®çš„åˆ†æ”¯ï¼ˆå·¦å­æ ‘æœ€å¤§å€¼æ˜¯å¦å°äº`lim`ï¼‰ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œDistinct Integersâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£**çº¿æ®µæ ‘çš„é«˜çº§ç»´æŠ¤æŠ€å·§**å’Œ**é—®é¢˜è½¬åŒ–çš„æ€è·¯**ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­ç»ƒä¹ **å’Œ**æ·±å…¥æ€è€ƒ**â€”â€”å¤šåšç±»ä¼¼é¢˜ç›®ï¼ˆå¦‚æ¥¼æˆ¿é‡å»ºï¼‰ï¼Œå¤šè°ƒè¯•ä»£ç ï¼ˆæ‰“å°ä¸­é—´å˜é‡ï¼‰ï¼Œä½ ä¸€å®šä¼šæœ‰æ‰€æ”¶è·ï¼ğŸ’ª  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼

---
å¤„ç†ç”¨æ—¶ï¼š268.63ç§’
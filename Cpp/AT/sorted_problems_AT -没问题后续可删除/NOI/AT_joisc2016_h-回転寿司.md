---
title: "回転寿司"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_joisc2016_h
tag: ['分块']
---

# 回転寿司

## 题目描述

搬自loj


给出一个有$N$个点的环，环上各点有一个初始权值$a_i$。

给出$Q$个询问，每次询问给出一个区间$[l,r]$和一个值$A$，对于$A$的变动定义如下（$r$可能会小于$l$因为是**环形**）：
```cpp
for (int i=l;i<=r;i++) if(a[i]>A) swap(a[i],A);
```
对于每个询问，回答遍历完区间$[l,r]$后$A$的最终值。

注：我们按逆时针方向在环上编号，并规定$[l,r]$为从位置编号为$l$的点逆时针遍历至位置编号为$r$的点所经过点的集合。

## 输入格式

第一行包括两个数$N$与$Q$表示环的大小和询问的个数；

之后的$N$行每行为一个整数，第$i$个为$a_i$；

之后的$Q$行每行有三个整数$l_i$、$r_i$、$A_i$，表示如上所示。

## 输出格式

输出包括$Q$行，每行包括一个数，为变动结束后$A_i$的值。

# 样例组

#### 样例输入         
```
6 7
8
6
7
4
5
9
2 4 5
4 1 4
6 2 7
1 5 2
3 4 8
4 3 1
3 1 3
```

#### 样例输出
```
7
9
8
7
8
6
5
```

## 说明/提示

对于全部的数据，$1≤N≤4×10^5,1≤Q≤25000,1≤a_i≤10^9,1≤l,r≤N,1≤A≤10^9$。


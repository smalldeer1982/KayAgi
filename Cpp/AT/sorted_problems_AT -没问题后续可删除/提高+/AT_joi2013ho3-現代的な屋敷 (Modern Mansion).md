---
title: "現代的な屋敷 (Modern Mansion)"
layout: "post"
diff: 提高+/省选-
pid: AT_joi2013ho3
tag: []
---

# 現代的な屋敷 (Modern Mansion)

## 题目描述

有一座东西 $M$ 列南北 $N$ 行的大宅。

任何相邻的两间房之间都有一扇门连接，若一扇门是打开状态，则可以从门的一边走到另一边，并且花费 $1$ 分钟。

$K$ 个房间设有开关，按下开关会导致所有门的开关状态切换，并且花费 $1$ 分钟。

最开始连接东西相邻房间的所有门都关闭，连接南北相邻房间的所有门都打开，输出从房间 $(1,1)$ 移动到房间 $(M,N)$ 的最短时间。

## 输入格式

第一行三个数 $M,N,K$。

接下来 $K$ 行，每行两个数，表示有开关房间的坐标。

## 输出格式

输出从房间 $(1,1)$ 移动到房间 $(M,N)$ 的最短时间，如果无法到达输出 $-1$。

## 说明/提示

样例 $1$ 解释：

从 $(1,1)$ 到 $(1,2)$，按下开关，然后到 $(2,2)$，最后到达 $(3,2)$，耗时 $4$ 分钟。可以证明不存在时间更短的方案。

![](https://img.atcoder.jp/joi2013ho/088a24305fc2470b9ff17a0cd60c556b.png)

样例 $2$ 解释：

容易证明只能到达 $(1,1)$ 或 $(1,2)$，因此不能到达 $(3,2)$。

样例 $3$ 图示：

![](https://img.atcoder.jp/joi2013ho/128c91a07269803fa720723600260cea.png)

对于 $20\%$ 的数据，$M,N\le10^3$。

对于另外 $30\%$ 的数据，$K\le2\times10^3$。

对于 $100\%$ 的数据，$M,N\le10^5, K\le2 \times 10^5$。

## 样例 #1

### 输入

```
3 2 1
1 2
```

### 输出

```
4
```

## 样例 #2

### 输入

```
3 2 1
2 1
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
8 9 15
3 1
3 2
3 7
3 8
1 1
4 5
4 3
5 6
5 8
6 3
6 2
7 5
8 9
8 6
8 5
```

### 输出

```
25
```


---
title: "[ABC279E] Cheating Amidakuji"
layout: "post"
diff: 普及+/提高
pid: AT_abc279_e
tag: []
---

# [ABC279E] Cheating Amidakuji

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc279/tasks/abc279_e

<!-- 
$ N $ 本の縦棒と、それらの間を結ぶ $ M $ 本の横棒からなるあみだくじがあります。
各横棒は縦棒と垂直に引かれていて、その高さは相異なります。
縦棒を左から順に $ 1,2,\dots,N $、横棒を上から順に $ 1,2,\dots,M $ としたとき、
横棒 $ i\ (1\ \leq\ i\ \leq\ M) $ は縦棒 $ A_i $ と縦棒 $ A_i+1 $ の間を結んでいます。

縦棒 $ 1 $ の上端からあみだくじを下に辿っていったとき、最終的に到達する縦棒の番号を**スコア**と定義します。

$ i=1,2,\dots,M $ について、以下の質問に答えてください。

- 横棒 $ i $ を消したときのスコアを $ S_i $ と定義する。$ S_i $ を求めよ。

なお、実際には横棒は消さないため、各質問は独立であることに注意してください。

より厳密には、以下の通りです。
-->$ 1 $ 以上 $ N-1 $ 以下の整数からなる長さ $ M $ の数列 $ A=(A_1,A_2,\dots,A_M) $ が与えられます。 $ i=1,2,\dots,M $ について、以下の質問に答えてください。

- 数列 $ B=(B_1,B_2,\dots,B_N) $ がある。最初、各 $ j $ について $ B_j=j $ である。今から、$ k=1,2,\dots,i-1,i+1,\dots,M $ の順に以下の操作を行う （すなわち、$ i $ を除いた $ 1 $ 以上 $ M $ 以下の整数 $ k $ について、昇順に以下の操作を行う）。
  - $ B_{A_k} $ と $ B_{A_k+1} $ の値を入れ替える。
- 全ての操作が終了した段階で、$ B_j=1 $ を満たす $ j $ の値を $ S_i $ と定義する。$ S_i $ を求めよ。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ A_1 $ $ A_2 $ $ \dots $ $ A_M $

## 输出格式

$ M $ 行出力せよ。 $ i\ (1\leq\ i\ \leq\ M) $ 行目には、$ S_i $ の値を整数として出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\ \leq\ M\ \leq\ 2\times\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ N-1\ (1\leq\ i\ \leq\ M) $
- 入力は全て整数
 
### Sample Explanation 1

$ i\ =\ 2 $ のとき、操作によって $ B $ は以下のように変化します。 - 最初、$ B\ =\ (1,2,3,4,5) $ - $ k=1 $ として操作を行う。すなわち $ B_1 $ と $ B_2 $ の値を入れ替えて、$ B\ =\ (2,1,3,4,5) $ - $ k=3 $ として操作を行う。すなわち $ B_3 $ と $ B_4 $ の値を入れ替えて、$ B\ =\ (2,1,4,3,5) $ - $ k=4 $ として操作を行う。すなわち $ B_2 $ と $ B_3 $ の値を入れ替えて、$ B\ =\ (2,4,1,3,5) $ 全ての操作が終了した段階で $ B_3=1 $ であるため、$ S_2\ =\ 3 $ です。 同様に、 - $ i=1 $ のとき：$ k=2,3,4 $ の順に操作を行うと $ B=(1,4,3,2,5) $ になるので、$ S_1=1 $ - $ i=3 $ のとき：$ k=1,2,4 $ の順に操作を行うと $ B=(2,1,3,4,5) $ になるので、$ S_3=2 $ - $ i=4 $ のとき：$ k=1,2,3 $ の順に操作を行うと $ B=(2,3,4,1,5) $ になるので、$ S_4=4 $ です。

## 样例 #1

### 输入

```
5 4
1 2 3 2
```

### 输出

```
1
3
2
4
```

## 样例 #2

### 输入

```
3 3
2 2 2
```

### 输出

```
1
1
1
```

## 样例 #3

### 输入

```
10 10
1 1 1 9 4 4 2 1 3 3
```

### 输出

```
2
2
2
3
3
3
1
3
4
4
```


---
title: "[ABC387D] Snaky Walk"
layout: "post"
diff: 普及/提高-
pid: AT_abc387_d
tag: []
---

# [ABC387D] Snaky Walk

## 题目描述

给你一张地图，图中只包含起点```S```，终点```G```，障碍```#```，道路```.```。从起点出发，第一步方向任意，但之后的每一步都不能与之前相同。以这样的移动方式，求出到达终点的最少步数。

## 输入格式

输入按照如下格式由标准输入给出。
>$H$,$W$     
$S_1$     
$S_2$  
.      
.     
.     
$S_H$

## 输出格式

求出到达终点的最少步数。如不能到达，输出-1。

## 说明/提示

#### 约定
- $1\le H,W\le 1000$
- $H,W$均为整数
- $S_i$均为```S```，```G```，```#```，```.```组成的长为$W$的字符串。
- 每行，每列字符均相邻
#### 样例解释 1
![](https://img.atcoder.jp/abc387/6ef2f123adae6bc6bb157af8f30afe89.png)
如左图，路线为$(1,2)\rightarrow (2,2)\rightarrow (2,3)\rightarrow (3,3)\rightarrow (3,4)\rightarrow (2,4)\rightarrow (2,5)\rightarrow (1,5)$，移动7次即可到达终点。6次以下均不能到达终点，所以答案是7。       
请注意，如右图，不能走连续横向的路径（或走连续纵向的路径）。
#### 样例解释 2
模拟一下，明显到不了。

## 样例 #1

### 输入

```
3 5
.S#.G
.....
.#...
```

### 输出

```
7
```

## 样例 #2

### 输入

```
3 5
..#.G
.....
S#...
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
8 63
...............................................................
..S...#............................#####..#####..#####..####G..
..#...#................................#..#...#......#..#......
..#####..####...####..####..#..#...#####..#...#..#####..#####..
..#...#..#..#...#..#..#..#..#..#...#......#...#..#..........#..
..#...#..#####..####..####..####...#####..#####..#####..#####..
................#.....#........#...............................
................#.....#........#...............................
```

### 输出

```
148
```


---
title: "Dungeon"
layout: "post"
diff: 难度0
pid: AT_code_festival_china_h
tag: []
---

# Dungeon

## 题目描述

你正在玩一款视频游戏。这个游戏中有一个地下城，包含 $N + 2$ 个按顺序排列的房间，编号从 $0$ 到 $N+1$。你可以在相邻的房间之间移动。你当前在房间 $0$，目标是以最小的伤害到达房间 $N+1$。

房间 $0$ 和房间 $N+1$ 是空的。从房间 $1$ 到房间 $N$ 的每个房间中都有一个物品或怪物。每个房间的具体内容用 $N$ 对整数表示，对于第 $i$ 个房间（$1 \leq i \leq N$），整数 $A_i$ 和 $B_i$ 的含义如下：

- 如果 $A_i = 0$，房间 $i$ 中有一个带陷阱的钥匙。捡起钥匙会受到 $B_i$ 的伤害。你也可以选择不捡，那么就不会受伤。
- 如果 $A_i = 1$，房间 $i$ 拥有一个宝箱，里面有水晶，可以将你的防御值（DEF）增加 $B_i$ 点。你可以用一把钥匙打开宝箱来增加防御值，或者选择不打开，这样不会消耗钥匙，防御值保持不变。最初你的防御值是 $0$。
- 如果 $A_i = 2$，房间 $i$ 中有怪物。首次进入该房间时必须和怪物战斗，承受 $B_i - \text{（当前防御值）}$ 的伤害。此后，再次进入时怪物已消失，不会再受伤。

从房间 $0$ 出发，计算到达房间 $N+1$ 的最小受伤值。

注意：你可以返回到已经进入过的房间，并且增加的防御值不能减少因陷阱造成的伤害。

## 输入格式

第一行输入一个整数 $N$（$1 \leq N \leq 900$），表示地下城房间的数量为 $N + 2$。

接下来的 $N$ 行中，每行用空格分隔开两个整数 $A_i$ 和 $B_i$（$0 \leq A_i \leq 2$, $0 \leq B_i \leq 10^9$），描述每个房间里的信息。以下条件确保这些信息的有效性：
- 每种房间类型最多出现 $300$ 次。
- 即使你获得地下城中的所有水晶，面对怪物仍然会承受不小于 $0$ 点的伤害。也就是说，设总和 $X$ 为所有 $A_i = 1$ 的 $B_i$ 之和。对于所有 $A_j = 2$，都有 $B_j \geq X$ 成立。

## 输出格式

输出一行，表示从房间 $0$ 到房间 $N+1$ 所受的最小伤害值，并确保最后有一个换行符。

### 示例解释

例1中最佳路线如下：
- 首先前往房间 $3$ 并捡钥匙。在路上，会在房间 $2$ 被怪物造成 $3$ 点伤害，在房间 $3$ 被陷阱伤害 $1$ 点。
- 然后返回房间 $1$，打开宝箱，获得 $2$ 点的防御。在返回途中经过房间 $2$ 时，因怪物已被击败，所以不会受伤。
- 最后到达目的地房间 $5$。这一次在房间 $4$ 和怪物战斗，但感谢你 $2$ 点的防御值，最终不会受伤。

例2与第一例相似，但由于陷阱损伤较大，最佳策略是放弃捡钥匙。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
4
1 2
2 3
0 1
2 2
```

### 输出

```
4
```

## 样例 #2

### 输入

```
4
1 2
2 3
0 4
2 2
```

### 输出

```
5
```

## 样例 #3

### 输入

```
7
0 4
1 3
2 10
1 6
2 9
0 5
2 10
```

### 输出

```
21
```


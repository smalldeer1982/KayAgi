---
title: "Problem 1"
layout: "post"
diff: 难度0
pid: AT_hitachi2017_1_a
tag: []
---

# Problem 1

## 题目描述

考虑一个由顶点集 $V$ 和边集 $E$ 构成的图 $G=(V, E)$。给定图 $G=(V, E)$ 和 $G_{emb}=(V_{emb}, E_{emb})$，并假设图 $G$ 的每条边都有权重。你的任务是在遵循输入输出约束的前提下，将 $V$ 中的所有顶点与 $V_{emb}$ 的顶点配对，使得得分尽可能高。这其中，$G_{emb}$ 是一个由相等数量行列组成的正方形形状的 King's Graph（“国王图”），顶点编号从左上角的 $1$ 开始，从左到右，然后从上到下依次排列。

![示例图](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_hitachi2017_1_a/b5aed2f823d526c2ca1522fb350e3d421f6dabfc.png)

## 输入格式

输入通过标准输入提供，格式如下，所有数值均为整数：

> $|V|$ $|E|$ $u_1$ $v_1$ $w_1$ $u_2$ $v_2$ $w_2$ : $u_{|E|}$ $v_{|E|}$ $w_{|E|}$ $|V_{emb}|$ $|E_{emb}|$ $a_1$ $b_1$ $a_2$ $b_2$ : $a_{|E_{emb}|}$ $b_{|E_{emb}|}$

- $|V|$ 和 $|E|$ 表示图 $G$ 的顶点数和边数。
- $u_i, v_i, w_i$ 描述图 $G$ 中的边，即顶点 $u_i$ 与顶点 $v_i$ 之间有一条权重为 $w_i$ 的边。
- $|V_{emb}|$ 和 $|E_{emb}|$ 表示图 $G_{emb}$ 的顶点数和边数。
- $a_i, b_i$ 描述图 $G_{emb}$ 中的边，即顶点 $a_i$ 与顶点 $b_i$ 是相连的。

## 输出格式

输出应包含 $|V|$ 行，每行格式为：

> $s_1$ $t_1$ $s_2$ $t_2$ : $s_{|V|}$ $t_{|V|}$

- $s_i, t_i$ 表示图 $G$ 的顶点 $s_i$ 与图 $G_{emb}$ 的顶点 $t_i$ 对应。
- 所有图 $G$ 的顶点都要有对应且互不冲突的 $G_{emb}$ 中的顶点。具体约束见下文。

## 数据范围和提示

### 得分计算

每个测试用例是否得分及得分多少，依据如下条件：

- 如果图 $G$ 中的某条边 $(u, v)$，在 $G_{emb}$ 中，$u$ 对应的顶点 $p$ 和 $v$ 对应的顶点 $q$ 之间存在边 $(p, q)$，那么这条边的权重被算入总得分。
- 测试用例的得分是满足上述条件的边之权重总和。
- 一共有 30 个测试用例（分为 18 个随机图和 12 个完全图），所有测试用例得分总和即是问题的最终得分。\*
- 如果超出时空限制或输出格式错误，则测试用例得分为 0。

\*与最初宣布不同，最终排名和得分由系统测试决定。系统测试将在比赛结束后用150个不同的判题数据对最终提交进行重新评测，这150个数据中有90个随机图（其中40个图的顶点最大度为8）和60个完全图。这次判题可能导致最终排名变化，目的是防止通过特定种子值调优来获得高分。

### 图 $G$ 的生成

所有测试用例中的图 $G$ 要么是“随机图”，要么是“完全图”。以下是这两种图的生成方式的简要说明：

**随机图**

- 首先随机生成一个 $|V|$ 个顶点的树，然后依据需要随机添加 $|E| - |V| + 1$ 条边，其中边的权重也是随机的。
- 在随机图中，有 8 个案例顶点的度数最多为 8，这是通过限制新加边顶点的度数实现的。


**完全图**

- 对于所有满足条件 $1 \leq u < v \leq |V|$ 的顶点对 $(u, v)$，随机设置权重 $w$ 并添加边。

### 生成器、测试器及参考文献

本问题的生成器和测试器可从[此链接](https://img.atcoder.jp/hokudai-hitachi2017-1/problem1_toolkit_JP_r1.zip)下载。

解决该问题时，可参考以下文献：

H. Neven, et al., "NIPS 2009 demonstration: Binary classification using hardware implementation of quantum annealing." Quantum (2009): 1-17.

### 示例解释 2

下图展示了输入示例的图形表示：

![示意图](https://img.atcoder.jp/hokudai-hitachi2017-1/d08f7cdbfde51d8c34ae4da248f15613.png)

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
3 3
1 2 1
2 3 2
1 3 4
9 20
1 2
1 4
1 5
2 4
2 3
2 5
2 6
3 5
4 5
4 7
4 8
5 7
5 6
5 8
5 9
6 8
3 6
6 9
7 8
8 9
```

### 输出

```
1 1
2 2
3 5
```

## 样例 #2

### 输入

```
7 21
1 2 8
1 3 14
1 4 7
1 5 14
1 6 15
1 7 7
2 3 7
2 4 0
2 5 13
2 6 14
2 7 13
3 4 12
3 5 1
3 6 8
3 7 8
4 5 8
4 6 3
4 7 8
5 6 9
5 7 9
6 7 1
64 210
1 2
1 9
1 10
2 9
2 3
2 10
2 11
3 10
3 4
3 11
3 12
4 11
4 5
4 12
4 13
5 12
5 6
5 13
5 14
6 13
6 7
6 14
6 15
7 14
7 8
7 15
7 16
8 15
9 10
9 17
9 18
10 17
10 11
10 18
10 19
11 18
11 12
11 19
11 20
12 19
12 13
12 20
12 21
13 20
13 14
13 21
13 22
14 21
14 15
14 22
14 23
15 22
15 16
15 23
15 24
16 23
17 18
17 25
17 26
18 25
18 19
18 26
18 27
19 26
19 20
19 27
19 28
20 27
20 21
20 28
20 29
21 28
21 22
21 29
21 30
22 29
22 23
22 30
22 31
23 30
23 24
23 31
23 32
24 31
25 26
25 33
25 34
26 33
26 27
26 34
26 35
27 34
27 28
27 35
27 36
28 35
28 29
28 36
28 37
29 36
29 30
29 37
29 38
30 37
30 31
30 38
30 39
31 38
31 32
31 39
31 40
32 39
33 34
33 41
33 42
34 41
34 35
34 42
34 43
35 42
35 36
35 43
35 44
36 43
36 37
36 44
36 45
37 44
37 38
37 45
37 46
38 45
38 39
38 46
38 47
39 46
39 40
39 47
39 48
40 47
41 42
41 49
41 50
42 49
42 43
42 50
42 51
43 50
43 44
43 51
43 52
44 51
44 45
44 52
44 53
45 52
45 46
45 53
45 54
46 53
46 47
46 54
46 55
47 54
47 48
47 55
47 56
48 55
49 50
49 57
49 58
50 57
50 51
50 58
50 59
51 58
51 52
51 59
51 60
52 59
52 53
52 60
52 61
53 60
53 54
53 61
53 62
54 61
54 55
54 62
54 63
55 62
55 56
55 63
55 64
56 63
8 16
16 24
24 32
32 40
40 48
48 56
56 64
57 58
58 59
59 60
60 61
61 62
62 63
63 64
```

### 输出

```
1 10
2 9
3 17
4 11
5 2
6 1
7 18
```


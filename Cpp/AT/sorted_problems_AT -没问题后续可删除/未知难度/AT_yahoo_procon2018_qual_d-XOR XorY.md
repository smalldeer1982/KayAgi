---
title: "XOR XorY"
layout: "post"
diff: 难度0
pid: AT_yahoo_procon2018_qual_d
tag: []
---

# XOR XorY

## 题目描述

# XOR XorY


Snuke在黑板上写下了 $2$ 个不同的整数 $X$ 和 $Y$，以及一个具有 $K$ 行和 $K$ 列的网格。然后，Snuke在网格的第 $i$ 行第 $j$ 列写下了整数 $A_{i,j}$。

Snuke决定只有当长度为 $K$ 的数列 $a$ 满足以下条件时，才称其为“良好的数列”：

- 条件是，对于满足 $1 ≤ i, j ≤ K$ 的所有 $(i, j)$ 对，以下条件都成立：

  - 其中 $ a_i $ $ xor $ $ a_j $ $xor$  $ x $ 或 $ a_i $ $xor$ $ a_j $ $xor$ $ y $ 必须等于 $ A_{i,j} $。
  - 请注意，这里的 $ xor $ 表示 按位异或 运算。

Snuke有 $N$ 个整数，第 $i$ 个整数是    $x_i$。Snuke决定从这些 $N$ 个数中选择 $K$ 个并排列，以创建长度为 $K$ 的数列。请问在 Snuke 可以创建的数列中，有多少个是"良好的数列"？请将答案模 $10^9+7$ 输出。

需要注意的是，可能有多种方法来创建一个数列，但只要最终得到的数列相同，就不会进行区分。请参考示例 $1$ 以获得更详细的信息。

## 输入格式

输入将以下格式提供：

> $ N $ $ K $ $ X $ $ Y $ $ x_{1} $ $ ... $ $ x_{N} $ $ A_{1,1} $ $ ... $ $ A_{1,K} $ $ : $ $ A_{K,1} $ $ ... $ $ A_{K,K} $

## 输出格式

请输出答案。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 2048 $
- $ 1\ \leq\ K\ \leq\ {\rm\ min}(1024,N) $
- $ 0\ \leq\ X,Y,x_i,\ A_{i,j}\ <\ 2048 $
- $ X\ \neq\ Y $
- 输入的全是整数

## 样例解释

### 样例1

作为答案，可能的数列有两种，分别是 $(0, 2, 8)$ 和 $(1, 2, 8)$。尽管选择和排列使得两种数列都可以生成，但请注意它们在此题中是不加区分的。

### 样例2

无论什么样的数列，都无法满足条件。

## 样例 #1

### 输入

```
6 3 1 0
0 8 1 2 15 8
1 2 8
2 0 10
8 10 1
```

### 输出

```
2
```

## 样例 #2

### 输入

```
2 2 0 4
0 1
8 16
110 12
```

### 输出

```
0
```

## 样例 #3

### 输入

```
35 4 11 1
23 2 17 16 22 22 6 0 0 15 16 5 12 21 0 9 17 0 2 26 22 19 6 16 13 7 26 8 22 29 26 13 8 32 14
1 0 15 31
0 11 14 20
5 4 1 17
21 20 27 1
```

### 输出

```
26
```


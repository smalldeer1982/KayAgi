---
title: "[ABC385B] Santa Claus 1"
layout: "post"
diff: 普及-
pid: AT_abc385_b
tag: ['字符串']
---

# [ABC385B] Santa Claus 1

## 题目描述

有一个 $H$ 行 $W$ 列的网格。用 $(i,j)$ 表示从上往下数第 $i$ 行、从左往右数第 $j$ 列的单元格。 

如果 $S_{i,j}$ 是 `#`，则单元格 $(i,j)$ 不可通过；如果是 `.`，则该单元格可以通过且没有房子；如果是 `@`，则该单元格可以通过且有一个房子。

最初，圣诞老人在单元格 $(X,Y)$ 中。他将按照字符串 $T$ 的指示行动，具体如下：

- 设 $|T|$ 为字符串 $T$ 的长度。对于 $i=1,2,\ldots,|T|$，他按以下方式移动：
    - 设 $(x,y)$ 为他当前所在的单元格。
        - 如果 $T_i$ 是 `U` 且单元格 $(x-1,y)$ 可通过，则移动到单元格 $(x-1,y)$。
        - 如果 $T_i$ 是 `D` 且单元格 $(x+1,y)$ 可通过，则移动到单元格 $(x+1,y)$。
        - 如果 $T_i$ 是 `L` 且单元格 $(x,y-1)$ 可通过，则移动到单元格 $(x,y-1)$。
        - 如果 $T_i$ 是 `R` 且单元格 $(x,y+1)$ 可通过，则移动到单元格 $(x,y+1)$。
        - 否则，停留在单元格 $(x,y)$。

请找出他完成所有行动后所在的单元格，以及他在行动过程中经过或到达的不同房子的数量。如果多次经过同一个房子，只计数一次。

## 输入格式

输入从标准输入按以下格式给出：

> $H$ $W$ $X$ $Y$  
$S_{1,1}S_{1,2}\ldots S_{1,W}$  
$\dots$  
$S_{H,1}S_{H,2}\ldots S_{H,W}$  
$T$

## 输出格式

设 $(X,Y)$ 为他完成所有行动后所在的单元格，$C$ 为他在行动过程中经过或到达的不同房子的数量。按顺序输出用空格分隔的 $X$、$Y$、$C$。

**【样例 $\bm 1$ 解释】**

圣诞老人的行动如下：

- $T_1=$ `L`，所以他从 $(3,4)$ 移动到 $(3,3)$。经过了一个房子。
- $T_2=$ `L`，所以他从 $(3,3)$ 移动到 $(3,2)$。
- $T_3=$ `L`，但单元格 $(3,1)$ 不可通过，所以他停留在 $(3,2)$。
- $T_4=$ `D`，所以他从 $(3,2)$ 移动到 $(4,2)$。
- $T_5=$ `R`，所以他从 $(4,2)$ 移动到 $(4,3)$。
- $T_6=$ `U`，所以他从 $(4,3)$ 移动到 $(3,3)$。经过了一个房子，但这个房子之前已经经过过。
- $T_7=$ `U`，所以他从 $(3,3)$ 移动到 $(2,3)$。

他在行动过程中经过或到达的房子数量为 $1$。

## 说明/提示

- $3 \leq H,W \leq 100$
- $1 \leq X \leq H$
- $1 \leq Y \leq W$
- 所有给定数字均为整数。
- 每个 $S_{i,j}$ 是 `#`、`.` 或 `@` 之一。
- 对于每个 $1 \leq i \leq H$，$S_{i,1}$ 和 $S_{i,W}$ 都是 `#`。
- 对于每个 $1 \leq j \leq W$，$S_{1,j}$ 和 $S_{H,j}$ 都是 `#`。
- $S_{X,Y}=$ `.`
- $T$ 是一个长度至少为 $1$ 且最多为 $10^4$ 的字符串，仅由 `U`、`D`、`L`、`R` 组成。

## 样例 #1

### 输入

```
5 5 3 4
#####
#...#
#.@.#
#..@#
#####
LLLDRUU
```

### 输出

```
2 3 1
```

## 样例 #2

### 输入

```
6 13 4 6
#############
#@@@@@@@@@@@#
#@@@@@@@@@@@#
#@@@@.@@@@@@#
#@@@@@@@@@@@#
#############
UURUURLRLUUDDURDURRR
```

### 输出

```
3 11 11
```

## 样例 #3

### 输入

```
12 35 7 10
###################################
#.................................#
#..........@......................#
#......@................@.........#
#.............##............@.....#
#...##........##....##............#
#...##........##....##.......##...#
#....##......##......##....##.....#
#....##......##......##..##.......#
#.....#######.........###.........#
#.................................#
###################################
LRURRRUUDDULUDUUDLRLRDRRLULRRUDLDRU
```

### 输出

```
4 14 1
```


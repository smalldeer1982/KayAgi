---
title: "[ABC381D] 1122 Substring"
layout: "post"
diff: 普及/提高-
pid: AT_abc381_d
tag: ['动态规划 DP', '双指针 two-pointer']
---

# [ABC381D] 1122 Substring

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc381/tasks/abc381_d

正整数からなる（空でも良い）数列 $ X=(X_1,X_2,\ldots) $ が以下の $ 3 $ つの条件をすべてみたすとき、かつそのときに限り、$ X $ を **1122 数列** と呼びます。  
（1122 数列の定義はF問題と共通です。）

- $ \lvert\ X\ \rvert $ は偶数である。ここで、$ \lvert\ X\ \rvert $ は $ X $ の長さを表す。
- $ 1\leq\ i\leq\ \frac{\lvert\ X\ \rvert}{2} $ をみたす整数 $ i $ について、$ X_{2i-1} $ と $ X_{2i} $ は等しい。
- 各正整数は $ X $ に現れないか、ちょうど $ 2 $ 回現れるかのどちらかである。すなわち、$ X $ に含まれる正整数は $ X $ にちょうど $ 2 $ 回ずつ登場する。

正整数からなる長さ $ N $ の数列 $ A=(A_1,A_2,\ldots,A_N) $ が与えられるので、$ A $ の **連続する部分列** であって、1122 数列であるようなもののうち最長のものの長さを出力してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ A_1 $ $ A_2 $ $ \ldots $ $ A_N $

## 输出格式

$ A $ の連続する部分列であって、1122 数列であるようなもののうち最長のものの長さを出力せよ。

## 说明/提示

### 制約

- $ 1\leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\leq\ A_i\ \leq\ N $
- 入力はすべて整数

### Sample Explanation 1

例えば $ A $ の $ 3 $ 項目から $ 6 $ 項目までの連続部分列をとると $ (1,1,2,2) $ となりますが、これは長さが $ 4 $ の 1122 数列となっています。 これより長い部分列であって、1122 数列の条件をみたすようなものは存在しないため、$ 4 $ を出力します。

### Sample Explanation 3

項数が $ 0 $ の列も 1122 数列の条件をみたしていることに注意してください。

## 样例 #1

### 输入

```
8
2 3 1 1 2 2 1 1
```

### 输出

```
4
```

## 样例 #2

### 输入

```
3
1 2 2
```

### 输出

```
2
```

## 样例 #3

### 输入

```
1
1
```

### 输出

```
0
```


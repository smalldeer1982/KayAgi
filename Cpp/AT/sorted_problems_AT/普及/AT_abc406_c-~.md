---
title: "~"
layout: "post"
diff: 普及/提高-
pid: AT_abc406_c
tag: ['前缀和']
---

# ~

## 题目描述

对于一个长为 $M$ 的数列 $A=(A_1,A_2,\cdots,A_N)$，$A$ 是波浪序列当且仅当以下条件被满足：
- $M\ge4$；
- $A_1<A_2$；
- 恰好存在一个 $2\le i<N$，满足 $A_{i-1}<A_i>A_{i+1}$；
- 恰好存在一个 $2\le i<N$，满足 $A_{i-1}>A_i<A_{i+1}$。

给定一个长为 $N$ 的排列 $P$，求 $P$ 有多少个连续子串是波浪序列。

## 输入格式

第一行一个整数 $N(4\le N\le 3\times 10^5)$。\
第二行 $N$ 个整数 $P_1,P_2,\cdots,P_N$，保证 $P$ 是 $1$ 到 $N$ 的排列。

## 输出格式

一行一个整数表示答案。

## 说明/提示

### 样例 1 解释

$(1,3,6,4,2,5)$ 的连续子串中有两个波浪数列，为 $(3, 6,4,2,5)$ 和 $(1,3,6,4,2,5)$。

By @[chenxi2009](/user/1020063)

## 样例 #1

### 输入

```
6
1 3 6 4 2 5
```

### 输出

```
2
```

## 样例 #2

### 输入

```
6
1 2 3 4 5 6
```

### 输出

```
0
```

## 样例 #3

### 输入

```
12
11 3 8 9 5 2 10 4 1 6 12 7
```

### 输出

```
4
```


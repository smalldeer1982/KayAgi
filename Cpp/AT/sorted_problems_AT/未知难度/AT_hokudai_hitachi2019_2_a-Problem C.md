---
title: "Problem C"
layout: "post"
diff: 难度0
pid: AT_hokudai_hitachi2019_2_a
tag: []
---

# Problem C

## 题目描述

你将参与一个模拟配送任务，任务中需要通过移动车辆在一个图上执行订单。这个图是一个简单无向图 \( G = (V, E) \)，其中 \( V \) 是顶点集合（包括商店和顾客的所有位置），\( E \) 是边集合（代表连接各顶点的道路）。每个顶点 \( u \in V \) 由 1 到 \( |V| \) 编号，顶点 1 是商店，其他顶点是顾客。

### 时间与空间限制

- **时间**：在每一个时间步 \( t \)，满足 \( 0 \leq t < T_{\max} \)，你需要决定从时刻 \( t \) 到 \( t+1 \) 的行为。
- **空间**：图 \( G = (V, E) \) 是一个简单无向图，所有的车辆移动和订单生成都在图中进行。
- **商店和顾客位置**：顶点 1 是商店，其余顶点则是顾客地址。
- **道路**：每条边 \( \{u, v\} \) 将顶点 \( u \) 和 \( v \) 直接连通，边的长度为 \( d_{u, v} \geq 1 \)。 

### 图的生成

地图基于下面的算法随机生成（本次比赛的图生成算法与之前不同）:
- 图 \( G \) 是在一个 \( 25 \times 25 \) 的二维平面上生成的。
- 南北和东西方向分别有一条高速路，高速路上邻近顶点间的距离为 1。
- 南北方向有铁路穿过图。
- 高速路和铁路将图划分成 6 个区域。
- 每个顶点默认订单频率为 1，但某些区域内的顶点频率为 2。高速路上的顶点以及商店所在的顶点不会产生订单（订单频率为 0）。
- 在高速路上行驶速度是普通路径的 4 倍（相当于距离缩短为四分之一）。

### 车辆位置与移动规则

- **车辆位置**：车辆的位置可以是某个顶点 \( u \) 或者位于边 \( \{u, v\} \) 上，即从 \( u \) 向 \( v \) 移动了距离 \( x \) \( (0 < x < d_{u,v}) \)。
- **车辆行动**：你可以选择以下两种行为之一：
  - `stay`：停留在当前位置；
  - `move w`：移动到顶点 \( w \) 的方向，距离为 1。

选择 `move w` 时，必须满足：
  - \( w \) 是 \( V \) 内的一个顶点；
  - 车在顶点 \( u \) 上时，边 \( \{u, w\} \) 必须在 \( E \) 中；
  - 车在边 \( \{u, v\} \) 上时，必须是 \( w = u \) 或 \( w = v \)。

### 订单及相关说明

- **订单信息**：包括订单ID、配送目标顶点 \( v \)、订单生成时间 \( t \)。
- **订单生成**：新的订单会在 \( 0 \leq t \leq T_{\mathrm{last}} = 0.95 \times T_{\max} \) 的时间内以概率 \( p_{\mathrm{order}}(t) \) 生成。生成时目标顶点成为 \( i \) 的概率为 \(\frac{f_i}{\sum_{k} f_k}\)，其中 \( f_i \) 为顶点 \( i \) 的订单频率。

### 事件说明

- **交通拥堵**：可能会在高速路的不同方向发生。在拥堵的方向行驶时车辆只能以 10% 的概率前进。
- **车辆故障**：临时通知 `WARNING t` 会警示可能的故障发生，如果在 \( t \) 步内回到商店，故障可恢复；否则会在下一步时通知 `BROKEN`，之后 300 步内车辆无法移动。
- **订单取消**：超过 \( T_{\text{wait}} = 2000 \) 步未完成配送的订单可能被取消。
- **红绿灯等候**：可能会在非高速路顶点进入高速路时遇到红绿灯，等候是与时间同步确定的。

### 评分标准

每个测试用例的得分累加起来即为你的程序得分。比赛期间共有 30 个测试用例，赛后会有 100 个新测试用例进行最终评分。得分计算公式如下：
\[ \text{Score} = \sum_{i \in D} (T_{\max})^2 - (\text{waitingTime}_i)^2 \]
其中：
- \( D \) 是在 \( t = T_{\max} \) 前完成配送的订单集合。
- \( \text{waitingTime}_i = \text{deliveredTime}_i - \text{orderedTime}_i \) 表示第 \( i \) 个订单的等待时间。

### 输入格式

初始输入：
- 第一行: \( |V| \)（顶点数量）、\( |E| \)（边数量）。
- 接下来 \( |E| \) 行：每行表示一条边信息：\( u_i \ v_i \ d_{u_i, v_i} \ e_{u_i, v_i} \ e_{v_i, u_i} \)。
- 接下来一行: 各顶点订单频率 \( f_1, f_2, \ldots, f_{|V|} \)。
- 接下来 4 行：每行是某方向高速路的交通拥堵开始预估时间 \( t_{d,1}, \cdots, t_{d,4} \)。
- 一行: 信号灯周期 \( P_{\text{light}} \)。
- 一行: 车辆故障警告持续时间 \( T_{\text{warning}} \)。
- 最后一行: 最大时间步数 \( T_{\max} \)。

每步输入：
- 第一行: 车辆状态 `CAR_STATUS`。
- 第二行: 各方向拥堵状态 \( \mathrm{jam}_{1}, \mathrm{jam}_{2}, \mathrm{jam}_{3}, \mathrm{jam}_{4} \)。
- 第三行: 新取消订单数 \( N_{\text{cancel}} \)。
- 接下来 \( N_{\text{cancel}} \) 行：每行是一个被取消的订单 ID。
- 第四行: 新订单数 \( N_{\text{new}} \)。
- 接下来 \( N_{\text{new}} \) 行：每行是一个新订单，格式为 \( \mathrm{new\_id}_i \ \mathrm{dst}_i \)。
- 第五行: 新装载商品数 \( N_{\text{put}} \)。
- 接下来 \( N_{\text{put}} \) 行：每行是一个新装载商品对应的订单 ID。

### 输出格式

每步输出：
- 一行：行动 `command`。
  - 若选择 `stay`，输出 `-1`。
  - 若选择 `move w`，输出目标顶点编号 \( w \)。

### 数据范围与提示

- 初始数据范围：
  - \( T_{\text{max}} = 10000 \)
  - \( |V| = 625 \)
  - \( 1.5 |V| \leq |E| \leq 2|V| \)
  - 所有点和边信息为整数，且给定图是连通的。
  - 顶点 1 不产生订单（\( f_1 = 0 \)）。

- 每步输入：
  - 车辆状态是 `NOT_BROKEN`, `WARNING t`, 或 `BROKEN`。
  - 拥堵状态为 0 或 1。
  - 行动有效范围：整数 `-1` 和 \( 1 \leq w \leq |V| \)。

- 每步输出：
  - 反馈为 `OK`, `NG`, `JAM`, 或 `WAIT t`。

以上优化过的描述让语言更贴近中文习惯，便于理解和跟踪问题要求和输入输出格式。

 **本翻译由 AI 自动生成**


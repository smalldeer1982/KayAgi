---
title: "農機シェアリング計画動的最適化問題"
layout: "post"
diff: 难度0
pid: AT_hokudai_hitachi2022_b
tag: []
---

# 農機シェアリング計画動的最適化問題

## 题目描述

[problemUrl]: https://atcoder.jp/contests/hokudai-hitachi2022/tasks/hokudai_hitachi2022_b



## 说明/提示

### 問題概要

この問題では、農機シェアリングサービスにおいて、所有する機械や人員（単純化して、以下"ワーカー"とする）を最大限活用し、報酬\*が最も多くなるように農作業（以下、"ジョブ"と呼ぶ）を 受託することを考える。空間内に配置された数多く存在するジョブから受託するジョブを自分で最初に決定し、ジョブ実行スケジュールを提出/修正しながら、ワーカーに指示を出し実際にそれらを処理していく。各ジョブは複数の小作業を表す"タスク"をワーカーが規定の量処理することで完了と見なされ、基本的に受託したジョブは完了する必要がある(完了しなければペナルティが発生する）。ジョブを完了することで報酬を獲得できるが、タスクを処理する時刻により報酬量は異なるため適切な作業時間帯を考慮して処理する必要がある。また、各時刻における実行可能なタスク数はワーカーの処理能力と天候に依存し、天候は一定時間ごとに予報が与えられる。

\*報酬：農作物の適切な収穫時期、ナノグリッドから農機に供給する再生可能エネルギーの利用率等を想定する。

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_hokudai_hitachi2022_b/f19b9bb2ba8546b590e86ae1d11dfc901a363560.png) ![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_hokudai_hitachi2022_b/009d90a2d6b207177b6fc5c2750fadf009f71c0d.png) ![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_hokudai_hitachi2022_b/c06102cf862e1d0436ea50377399f61eec54c2dd.png)

入力として最初に以下の情報が与えられる。

1. 作業期間
2. 地理情報（グラフ）
3. ワーカーの情報
4. 全てのジョブの情報
5. 天候に関する情報
6. スケジュールに関する情報
 
これに対し最初にコンテスタントは

1. 受託するジョブ
 
を出力する。

以降各時刻開始時に入力として以下の情報が与えられる。

1. 受託したジョブに関する情報
2. ワーカーの現在位置
3. (一定間隔で)天候の予報
 
これに対しコンテスタントは

1. ジョブ実行スケジュール
2. 各ワーカーの動作
 
を出力する。これを作業期間終了まで繰り返す。

スコアは

1. 報酬
2. 未完了ジョブに対するペナルティ
3. スケジュール変更の度合い・スケジュール遵守の度合い
 
を考慮して採点される。

以下はその詳細である。

<a class="anchor" id="input1"></a>

### 入力1

最初に入力として

1. 作業期間
2. 地理情報（グラフ）
3. ワーカーの情報
4. 全てのジョブの情報
5. 天候に関する情報
6. スケジュールに関する情報
 
が以下の形式で標準入力から与えられる。

> $ T_{\rm{max}}\\
N_V\,\,N_E\\
u_1\quad\ v_1\quad\ d_1\\
\vdots\\
u_{N_E}\,\,\ v_{N_E}\,\,\ d_{N_E}\\
N_{\rm{worker}}\\
v^{\rm{init}}_1\,\,L^\text{max}_1\,\,N^{\rm{JobType}}_1\,\,\text{Type}^1_1\,\,\text{Type}^1_2\,\,\cdots\ \text{Type}^1_{N^{\rm{JobType}}_1}\\
\vdots\\
v^{\rm{init}}_{N_{\rm{worker}}}\,\,L^\text{max}_{N_{\rm{worker}}}\,\,N^{\rm{JobType}}_{N_{\rm{worker}}}\,\,\text{Type}^{N_{\rm{worker}}}_1\,\,\text{Type}^{N_{\rm{worker}}}_2\,\,\cdots\ \text{Type}^{N_{\rm{worker}}}_{N^{\rm{JobType}}_1}\\
N_{\rm{job}}\\
\text{Job}_1\\
\vdots\\
\text{Job}_{N_{\rm{job}}}\\
T^{\rm{weather}}\,\,N^{\rm{weather}}\\
\begin{array}{llll}
p^{\rm{weather}}_{1,1}\ &amp;\ p^{\rm{weather}}_{1,2}\ &amp;\ \cdots\ &amp;\ p^{\rm{weather}}_{1,N^{\rm{weather}}}\\
p^{\rm{weather}}_{2,1}\ &amp;\ p^{\rm{weather}}_{2,2}\ &amp;\ \cdots\ &amp;\ p^{\rm{weather}}_{2,N^{\rm{weather}}}\\
\vdots\ &amp;\ \vdots\ &amp;\ \ddots\ &amp;\ \vdots\\
p^{\rm{weather}}_{N^{\rm{weather}},1}\ &amp;\ p^{\rm{weather}}_{N^{\rm{weather}},2}\ &amp;\ \cdots\ &amp;\ p^{\rm{weather}}_{N^{\rm{weather}},N^{\rm{weather}}}\\
\end{array}\\
c_1\,\,c_2\,\,\cdots\,\,c_{N^{\rm{weather}}}\\
P_m\,\,\ R_m\,\,\ \alpha\\
t_1\,\,\ p^1_1\,\,\ p^1_2\,\,\ \cdots\ \,\,\ p^1_{N^{\rm{weather}}}\\
t_2\,\,\ p^2_1\,\,\ p^2_2\,\,\ \cdots\ \,\,\ p^2_{N^{\rm{weather}}}\\
\vdots\\
t_{N&#39;}\,\,\ p^{N&#39;}_1\,\,\ p^{N&#39;}_2\,\,\ \cdots\ \,\,\ p^{N&#39;}_{N^{\rm{weather}}} $



($ \text{Job}_i $の構成は後述) <a class="anchor" id="work-time-frame"></a>

#### 作業期間

- **入力**
  - 最初の$ 1 $行目で作業期間の長さ$ T_\text{max} $が与えられる。
 
この問題における時刻$ t $は $ 1 $ から $ T_{\text{max}} $までの整数の値をとる。 入力例 以下は $ T_\text{max}=300 $の例:

```
<span></span>300
```



(末尾に改行有)

- 1行目:作業期間の長さは`300` である。($ T_\text{max}=300 $) <a class="anchor" id="geo-data"></a>
 
#### 地理情報

- **入力**
  - 次の$ 1 $行で、問題の地理情報を表すグラフ(連結な正の重み付き無向グラフ)の頂点数$ N_V $と辺の数$ N_E $が与えられる。
      - この$ N_V $個の頂点には$ 1 $から順に$ N_V $まで頂点番号が割り当てられるものとする。
  - 続く$ N_E $行で辺を表す情報: 端点$ u_i,v_i $と重み(=距離)$ d_i $ が与えられる。($ 1\leq\ i\ \leq\ N_E $)
 
後述するが、[ジョブ](#job)はこのグラフの頂点上に配置され、[ワーカー](#worker)はこのグラフの上を移動する。 入力例 以下は $ N_V=14,N_E=19 $の例:

```
<span></span>14 19
1 7 1
1 2 1
2 9 1
2 3 1
3 5 1
3 7 1
3 6 1
4 13 2
4 10 2
4 6 1
4 5 1
6 8 1
7 8 1
8 14 2
9 11 2
10 12 2
10 11 2
12 13 2
13 14 2
```



(末尾に改行有)

- 1行目:グラフの頂点は`14`個存在し、辺は`19`個存在する。($ N_V=14,N_E=19 $)
  - この`14`個の頂点には$ 1 $から順に`14`まで頂点番号が割り当てられている。
  - 以下、頂点番号$ i $に対応する頂点 を単に 頂点$ i $ と呼ぶ。
- 2行目:頂点`1`と頂点`7`の間に長さ`1`の辺が存在する。($ u_{1}=1,v_{1}=7,d_{1}=1 $)
- 3行目:頂点`1`と頂点`2`の間に長さ`1`の辺が存在する。($ u_{2}=1,v_{2}=2,d_{2}=1 $)
- 4行目:頂点`2`と頂点`9`の間に長さ`1`の辺が存在する。($ u_{3}=2,v_{3}=9,d_{3}=1 $)
- 5行目:頂点`2`と頂点`3`の間に長さ`1`の辺が存在する。($ u_{4}=2,v_{4}=3,d_{4}=1 $)
- 6行目:頂点`3`と頂点`5`の間に長さ`1`の辺が存在する。($ u_{5}=3,v_{5}=5,d_{5}=1 $)
- 7行目:頂点`3`と頂点`7`の間に長さ`1`の辺が存在する。($ u_{6}=3,v_{6}=7,d_{6}=1 $)
- 8行目:頂点`3`と頂点`6`の間に長さ`1`の辺が存在する。($ u_{7}=3,v_{7}=6,d_{7}=1 $)
- 9行目:頂点`4`と頂点`13`の間に長さ`2`の辺が存在する。($ u_{8}=4,v_{8}=13,d_{8}=2 $)
- 10行目:頂点`4`と頂点`10`の間に長さ`2`の辺が存在する。($ u_{9}=4,v_{9}=10,d_{9}=2 $)
- 11行目:頂点`4`と頂点`6`の間に長さ`1`の辺が存在する。($ u_{10}=4,v_{10}=6,d_{10}=1 $)
- 12行目:頂点`4`と頂点`5`の間に長さ`1`の辺が存在する。($ u_{11}=4,v_{11}=5,d_{11}=1 $)
- 13行目:頂点`6`と頂点`8`の間に長さ`1`の辺が存在する。($ u_{12}=6,v_{12}=8,d_{12}=1 $)
- 14行目:頂点`7`と頂点`8`の間に長さ`1`の辺が存在する。($ u_{13}=7,v_{13}=8,d_{13}=1 $)
- 15行目:頂点`8`と頂点`14`の間に長さ`2`の辺が存在する。($ u_{14}=8,v_{14}=14,d_{14}=2 $)
- 16行目:頂点`9`と頂点`11`の間に長さ`2`の辺が存在する。($ u_{15}=9,v_{15}=11,d_{15}=2 $)
- 17行目:頂点`10`と頂点`12`の間に長さ`2`の辺が存在する。($ u_{16}=10,v_{16}=12,d_{16}=2 $)
- 18行目:頂点`10`と頂点`11`の間に長さ`2`の辺が存在する。($ u_{17}=10,v_{17}=11,d_{17}=2 $)
- 19行目:頂点`12`と頂点`13`の間に長さ`2`の辺が存在する。($ u_{18}=12,v_{18}=13,d_{18}=2 $)
- 20($ =1+N_E $)行目:頂点`13`と頂点`14`の間に長さ`2`の辺が存在する。($ u_{19}=13,v_{19}=14,d_{19}=2 $) <a class="anchor" id="worker"></a>
 
#### ワーカー

ワーカーはジョブを処理する存在であり、移動とタスクの実行が可能である。これはコンテスタントの入力により操作される。([ワーカーの行動](#worker-action)を参照)

- **入力**
  - 続く$ 1 $行でワーカーの数$ N_{\text{worker}} $が与えられる。
  - 次の$ N_{\text{worker}} $行で各ワーカーの構成情報:
      
      
      - 初期位置(頂点番号): $ v^{\text{init}}_i $
      - 単位時間に実行可能なタスク数の上限: $ L^{\text{max}}_i $
      - 実行可能なジョブのタイプ数 $ N^{\text{JobType}}_i $ と タイプの列 $ \text{Type}^i_1\,\,\text{Type}^i_2\,\,\cdots\,\,\text{Type}^i_{N^{\text{JobType}}_i} $
       
       が与えられる。($ 1\leq\ i\ \leq\ N_{\text{worker}} $)
 
この入力における順序はワーカーのIDに対応する。

ワーカーごとに、単位時間に実行可能なタスク数の上限 や 処理できるジョブのタイプは異なる。また、実際に実行可能なタスク数は天候により左右される。 入力例 以下は $ N_{\text{worker}}=5 $ の例:

```
<span></span>5
6 100 3 1 2 3
13 59 1 3
10 55 2 2 3
9 47 3 1 2 3
9 89 1 2
```



(末尾に改行有)

- 1行目:ワーカーの数は`5`である。($ N_{\text{worker}}=5 $)
- 2行目:ID=1であるワーカーの記述。
  - 初期位置は頂点番号`6`に対応する頂点である。($ v^{\text{init}}_1=6 $)
  - 単位時間あたりに実行可能なタスク数の上限は`100`である。($ L^{\text{max}}_1=100 $)
  - 実行可能なジョブのタイプは`3`つあり($ N^{\text{JobType}}_1=3 $)、それらは`1`と`2`と`3`である。($ \text{Type}^1_1=1,\text{Type}^1_2=2,\text{Type}^1_3=3 $)
- 3行目:ID=2であるワーカーの記述。
  - 初期位置は頂点番号`13`に対応する頂点である。($ v^{\text{init}}_2=13 $)
  - 単位時間あたりに実行可能なタスク数の上限は`59`である。($ L^{\text{max}}_2=59 $)
  - 実行可能なジョブのタイプは`1`つあり($ N^{\text{JobType}}_2=1 $)、それは`3`である。($ \text{Type}^2_1=3 $)
- 4行目:ID=3であるワーカーの記述。
  - 初期位置は頂点番号`10`に対応する頂点である。($ v^{\text{init}}_3=10 $)
  - 単位時間あたりに実行可能なタスク数の上限は`55`である。($ L^{\text{max}}_3=55 $)
  - 実行可能なジョブのタイプは`2`つあり($ N^{\text{JobType}}_3=2 $)、それらは`2`と`3`である。($ \text{Type}^3_1=2,\text{Type}^3_2=3 $)
- 5行目:ID=4であるワーカーの記述。
  - 初期位置は頂点番号`9`に対応する頂点である。($ v^{\text{init}}_4=9 $)
  - 単位時間あたりに実行可能なタスク数の上限は`47`である。($ L^{\text{max}}_4=47 $)
  - 実行可能なジョブのタイプは`3`つあり($ N^{\text{JobType}}_4=3 $)、それらは`1`と`2`と`3`である。($ \text{Type}^4_1=1,\text{Type}^4_2=2,\text{Type}^4_3=3 $)
- 6($ =1+N_{\text{worker}} $)行目:ID=5であるワーカーの記述。
  - 初期位置は頂点番号`9`に対応する頂点である。($ v^{\text{init}}_5=9 $)
  - 単位時間あたりに実行可能なタスク数の上限は`89`である。($ L^{\text{max}}_5=89 $)
  - 実行可能なジョブのタイプは`1`つあり($ N^{\text{JobType}}_5=1 $)、それは`2`である。($ \text{Type}^5_1=2 $) <a class="anchor" id="job"></a>
 
#### ジョブ

ジョブは頂点上でワーカーが実行する仕事である。

- **ジョブとは**
  - **ジョブ**は現実における作業の1つの単位に相当し、例えば作物の収穫や農薬の散布等である。
  - これらはより小さな単位の複数作業から構成される。例えば、果実1つを摘み取る、稲を一定面積刈り取る、農薬を一定面積に撒く、といったものである。このようにジョブを構成する小さな単位の作業をここでは**タスク**と呼ぶことにする。
  - ジョブを構成するタスクが全て一定量行われることでそのジョブは完了すると考える。
  - 現実的にはジョブは複数種類のタスクから構成されるかもしれないが、今回は単純化しタスクをこなす量だけに着目する。すなわち、**タスクを規定の量処理することでジョブが完了したとみなす**ことにする。
  - ジョブが行われる場所はそのジョブ毎に異なる。この問題ではそれを[地理情報](#geo-data)として与えられた**グラフの頂点上にジョブを配置**することで表現する。
- **タスクの処理と報酬**
  - 各ジョブのタスクを処理するものとして**[ワーカー](#worker)**が存在する。
  - コンテスタントは各ワーカーに**移動**や**作業**の指示を出し、ジョブが存在する頂点に移動させタスクを処理する。
  - コンテスタントは**ジョブを完了する(=タスクを規定の量処理する)ことで報酬を得る**。
  - ワーカーは単位時間あたりに処理できるタスク量に上限([実行タスク数制限](#task-limit))があり、ジョブを完了するにはある程度時間がかかる。典型的には、ある時刻から一定時間、毎時刻タスクを一定量処理することになる。
  - **ジョブ完了時に得られる報酬はタスクを処理した時刻によって異なる**。具体的には:各時刻におけるタスク処理量あたりの報酬量$ r(t) $ $ \times $ その時刻に処理されたタスク量
      
      の時間に関する総和($ t=1,2,\cdots,T_\text{max} $)である。
  - 各時刻におけるタスク処理量あたりの報酬量$ r(t) $は**ジョブ毎にも異なる。**
  - 全ワーカーが集めた報酬の総和がこの問題のスコアを構成する中心的な要素である。([採点方法](#scoring-method)) コンテスタントはこの報酬の総和が大きくなるように、他の要素も考慮しつつワーカーの行動を決定する。
- **ジョブ間の依存関係**
  - ジョブは他のジョブに依存する場合がある。すなわち、そのジョブが依存するジョブが全て完了していなければそのジョブのタスクを処理することができないという制限がある。
  - 依存するジョブが存在しない場合このような制限は無い。
- **ジョブの受託**
  - コンテスタントは**問題開始時に受託するジョブを選択する**。([出力1](#output1))
  - **受託が必須であるジョブが存在する**ため、それらを全て含むようにジョブを選択する。
  - 受託したジョブが未完了のまま作業期間を終えた場合、ジョブ毎に指定された**未完了ペナルティが発生する。**
 
各種制限- 報酬が獲得できない時刻(タスク処理量あたりの報酬量 = 0 である時刻)にはタスクを処理することができない。
\- ワーカーの単位時間当たりのタスク実行数上限は天候に影響される。([実行タスク数制限](#task-limit))
\- 受託していないジョブは実行できない。

- **入力**
  - 続く$ 1 $行でジョブの数$ N_{\text{job}} $が与えられる。
  - 次の行からジョブの構成情報$ \text{Job}_i $が$ N_{\text{job}} $個与えられる。(合計$ N_{\text{job}}\times\ 3 $行)
 
ジョブの構成情報$ \text{Job}_i $は次の形式で与えられる。

> $ \text{ID}^{\rm{job}}_i\,\,\text{Type}_i\,\,N^{\rm{task}}_i\,\,v^{\rm{job}}_i\,\,\ P^{\rm{job}}_i\,\,d^\text{weather}_i\,\,\ f^{\rm{mandatory}}_i\\
N^{\rm{reward}}_i\,\,\ t^{\rm{reward}}_{i,1}\,\,\ y^{\rm{reward}}_{i,1}\cdots\ t^{\rm{reward}}_{i,N^{\rm{reward}}_i}\,\,\ y^{\rm{reward}}_{i,N^{\rm{reward}}_i}\\
N^{\rm{depend}}_i\,\,\ {\rm{id}}^{\rm{depend}}_{i,1}\,\,\ \cdots\ \,\,{\rm{id}}^{\rm{depend}}_{i,N^{\rm{depend}}_i} $



- 1行目
  - ジョブID: $ \text{ID}^{\text{job}}_i $
  - ジョブタイプ: $ \text{Type}_i $
  - 完了までのタスク数: $ N^{\text{task}}_i $
  - ジョブの位置(頂点番号): $ v^{\text{job}}_i $
  - ジョブを受託したが完了しなかった場合のペナルティ係数: $ P^{\text{job}}_i $
  - 天候依存度: $ d^\text{weather}_i $
  - 受託必須ジョブフラグ: $ f^{\text{mandatory}}_i $ ($ 0 $:必須でない、$ 1 $:必須)
- 2行目(報酬関数$ r(t) $の定義)
  - 報酬関数の制御点個数:$ N^{\text{reward}}_i $
  - 制御点の列:$ t^{\rm{reward}}_{i,1}\,\,y^{\rm{reward}}_{i,1}\,\,t^{\rm{reward}}_{i,2}\,\,y^{\rm{reward}}_{i,2}\,\,\cdots\,\,t^{\rm{reward}}_{i,N^{\text{reward}}_i}\,\,y^{\rm{reward}}_{i,N^{\text{reward}}_i} $
- 3行目(依存するジョブ)
  - 依存するジョブの数: $ N^{\text{depend}}_i $
  - 依存するジョブID: $ {\rm{id}}^{\rm{depend}}_{i,1}\,\,{\rm{id}}^{\rm{depend}}_{i,2}\,\,\ \cdots\ \,\,{\rm{id}}^{\rm{depend}}_{i,N^{\rm{depend}}_i} $
 
報酬関数$ r(t) $の詳細 時刻$ t $におけるタスク当たりの報酬を与える関数$ r(t) $は、1個以上の制御点(時刻と値のペア)とそれらの間の線形補間で定める。

すなわち、制御点の列$ p=((t_i,y_i))_{i=1,\cdots,n} $ ($ t_i,y_i\in\ \mathbb{Z},t_1\ <\ t_2\ <\ \cdots\ <\ t_n,n\geq\ 1 $)が与えられたとき、時刻$ t $におけるタスク当たりの報酬を与える関数$ r(t) $ (正確には$ r(t;p) $)を

$ r(t)=\begin{cases}
y_1,\ &amp;\ \text{if}\,\,\ t\ <\ t_1,\ \\
y_n,\ &amp;\ \text{if}\,\,\ t\ \geq\ t_n,\ \\
(y_\text{next}-y_\text{prev})(t-t_\text{prev})/(t_\text{next}-t_\text{prev})+y_\text{prev},\ &amp;\ \text{otherwise}.
\end{cases} $

 と定める。 ただし、$ (t_\text{prev},y_\text{prev}) $は時刻に関して$ t $を超えない最大のペア、$ (t_\text{next},y_\text{next}) $は時刻に関して$ t $を超える最小のペアである。

$ r(t) $（と$ r(t) $の整数倍、およびそれらの和）は小数で計算される。

入力例 以下は $ N_{\text{job}}=6 $の例(これはジョブの数が極端に少ない例であることに注意):

```
<span></span>6
1 1 906 10 0.94469412898840599 0.07857326752336613 0
13 11 0 12 1212810 37 1849941 63 2266874 88 1944271 113 1207029 139 768959 164 808665 189 992126 214 1137116 240 907954 265 903397 266 0
0
2 3 905 2 0.96478158647239831 0.056877102556647817 0
7 92 0 93 1280499 121 1553205 149 1429506 176 1419189 204 1731967 205 0
0
3 1 1052 4 0.94436951517275258 0.071240847781028308 0
7 191 0 192 1914094 218 1735762 244 1444725 270 1275768 296 975408 297 0
0
4 3 653 4 0.95274950239675604 0.14137003825803521 0
10 70 0 71 1319303 94 1329844 118 1503315 141 1161131 165 1294526 188 849137 212 1953166 235 2087503 236 0
1 2
5 1 1452 12 0.95747093286627682 0.076042573628832266 0
8 122 0 123 1667665 149 911519 174 1511934 200 1967913 225 1633211 251 1589845 252 0
2 6 4
6 2 737 6 0.95812926774107732 0.049371044631834608 1
11 82 0 83 1431723 108 1475010 133 1032345 158 1012865 183 1593586 207 1923638 232 1956884 257 2797127 282 2877123 283 0
0
```



- 1行目:全ジョブの数は`6`である。($ N_{\text{job}}=6 $)
  - 実際の問題では数百以上のジョブが与えられる。
- 2行目:ジョブID=1の記述開始。
  - ジョブIDは`1`である。($ \text{ID}^{\text{job}}_1=1 $)
  - このジョブのタイプは`1`である。($ \text{Type}_1=1 $)
  - このジョブの完了に必要なタスク数は`906`である。($ N^{\text{task}}_1=906 $)
  - このジョブは頂点`10`上に存在する。($ v^{\text{job}}_1=10 $)
  - このジョブを選択したが未完了のまま作業期間($ T_\text{max} $)が終了した場合、未完了ペナルティ`0.94469412898840599`が適用される。([採点方法](#scoring-method))($ P^{\text{job}}_1=0.94469412898840599 $)
  - このジョブの天候依存度は`0.07857326752336613`である。([実行タスク数制限](#task-limit))($ d^\text{weather}_1=0.07857326752336613 $)
  - このジョブは選択必須ではない。($ f^{\text{mandatory}}_1=0 $)
- 3行目:ジョブID=1の報酬を表す関数の記述
  - 制御点個数は`13`個である。($ N^{\text{reward}}_1=13 $)
  - 制御点の列は((`11`,`0`), (`12`,`1212810`), (`37`,`1849941`), (`63`,`2266874`), (`88`,`1944271`), (`113`,`1207029`), (`139`,`768959`), (`164`,`808665`), (`189`,`992126`), (`214`,`1137116`), (`240`,`907954`), (`265`,`903397`), (`266`,`0`))である。
      - 報酬が得られる時刻は$ 12,13,\cdots,265 $である。
- 4行目:ジョブID=1が依存するジョブ。ジョブID=1の記述終了。
  - このジョブが依存するジョブの数は`0`個である。($ N^{\text{depend}}_1=0 $)
  - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)
- 5行目:ジョブID=2の記述開始。
  - ジョブIDは`2`である。($ \text{ID}^{\text{job}}_2=2 $)
  - このジョブのタイプは`3`である。($ \text{Type}_2=3 $)
  - このジョブの完了に必要なタスク数は`905`である。($ N^{\text{task}}_2=905 $)
  - このジョブは頂点`2`上に存在する。($ v^{\text{job}}_2=2 $)
  - このジョブを選択したが未完了のまま作業期間($ T_\text{max} $)が終了した場合、未完了ペナルティ`0.96478158647239831`が適用される。([採点方法](#scoring-method))($ P^{\text{job}}_2=0.96478158647239831 $)
  - このジョブの天候依存度は`0.056877102556647817`である。([実行タスク数制限](#task-limit))($ d^\text{weather}_2=0.056877102556647817 $)
  - このジョブは選択必須ではない。($ f^{\text{mandatory}}_2=0 $)
- 6行目:ジョブID=2の報酬を表す関数の記述
  - 制御点個数は`7`個である。($ N^{\text{reward}}_2=7 $)
  - 制御点の列は((`92`,`0`), (`93`,`1280499`), (`121`,`1553205`), (`149`,`1429506`), (`176`,`1419189`), (`204`,`1731967`), (`205`,`0`))である。
      - 報酬が得られる時刻は$ 93,94,\cdots,204 $である。
- 7行目:ジョブID=2が依存するジョブ。ジョブID=2の記述終了。
  - このジョブが依存するジョブの数は`0`個である。($ N^{\text{depend}}_2=0 $)
  - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)
- 8行目:ジョブID=3の記述開始。
  - ジョブIDは`3`である。($ \text{ID}^{\text{job}}_3=3 $)
  - このジョブのタイプは`1`である。($ \text{Type}_3=1 $)
  - このジョブの完了に必要なタスク数は`1052`である。($ N^{\text{task}}_3=1052 $)
  - このジョブは頂点`4`上に存在する。($ v^{\text{job}}_3=4 $)
  - このジョブを選択したが未完了のまま作業期間($ T_\text{max} $)が終了した場合、未完了ペナルティ`0.94436951517275258`が適用される。([採点方法](#scoring-method))($ P^{\text{job}}_3=0.94436951517275258 $)
  - このジョブの天候依存度は`0.071240847781028308`である。([実行タスク数制限](#task-limit))($ d^\text{weather}_3=0.071240847781028308 $)
  - このジョブは選択必須ではない。($ f^{\text{mandatory}}_3=0 $)
- 9行目:ジョブID=3の報酬を表す関数の記述
  - 制御点個数は`7`個である。($ N^{\text{reward}}_3=7 $)
  - 制御点の列は((`191`,`0`), (`192`,`1914094`), (`218`,`1735762`), (`244`,`1444725`), (`270`,`1275768`), (`296`,`975408`), (`297`,`0`))である。
      - 報酬が得られる時刻は$ 192,193,\cdots,296 $である。
- 10行目:ジョブID=3が依存するジョブ。ジョブID=3の記述終了。
  - このジョブが依存するジョブの数は`0`個である。($ N^{\text{depend}}_3=0 $)
  - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)
- 11行目:ジョブID=4の記述開始。
  - ジョブIDは`4`である。($ \text{ID}^{\text{job}}_4=4 $)
  - このジョブのタイプは`3`である。($ \text{Type}_4=3 $)
  - このジョブの完了に必要なタスク数は`653`である。($ N^{\text{task}}_4=653 $)
  - このジョブは頂点`4`上に存在する。($ v^{\text{job}}_4=4 $)
  - このジョブを選択したが未完了のまま作業期間($ T_\text{max} $)が終了した場合、未完了ペナルティ`0.95274950239675604`が適用される。([採点方法](#scoring-method))($ P^{\text{job}}_4=0.95274950239675604 $)
  - このジョブの天候依存度は`0.14137003825803521`である。([実行タスク数制限](#task-limit))($ d^\text{weather}_4=0.14137003825803521 $)
  - このジョブは選択必須ではない。($ f^{\text{mandatory}}_4=0 $)
- 12行目:ジョブID=4の報酬を表す関数の記述
  - 制御点個数は`10`個である。($ N^{\text{reward}}_4=10 $)
  - 制御点の列は((`70`,`0`), (`71`,`1319303`), (`94`,`1329844`), (`118`,`1503315`), (`141`,`1161131`), (`165`,`1294526`), (`188`,`849137`), (`212`,`1953166`), (`235`,`2087503`), (`236`,`0`))である。
      - 報酬が得られる時刻は$ 71,72,\cdots,235 $である。
- 13行目:ジョブID=4が依存するジョブ。ジョブID=4の記述終了。
  - このジョブが依存するジョブの数は`1`個である。($ N^{\text{depend}}_4=1 $)
  - このジョブはID=`2`のジョブに依存する。($ \text{id}^\text{depend}_{4,1}=2 $)
- 14行目:ジョブID=5の記述開始。
  - ジョブIDは`5`である。($ \text{ID}^{\text{job}}_5=5 $)
  - このジョブのタイプは`1`である。($ \text{Type}_5=1 $)
  - このジョブの完了に必要なタスク数は`1452`である。($ N^{\text{task}}_5=1452 $)
  - このジョブは頂点`12`上に存在する。($ v^{\text{job}}_5=12 $)
  - このジョブを選択したが未完了のまま作業期間($ T_\text{max} $)が終了した場合、未完了ペナルティ`0.95747093286627682`が適用される。([採点方法](#scoring-method))($ P^{\text{job}}_5=0.95747093286627682 $)
  - このジョブの天候依存度は`0.076042573628832266`である。([実行タスク数制限](#task-limit))($ d^\text{weather}_5=0.076042573628832266 $)
  - このジョブは選択必須ではない。($ f^{\text{mandatory}}_5=0 $)
- 15行目:ジョブID=5の報酬を表す関数の記述
  - 制御点個数は`8`個である。($ N^{\text{reward}}_5=8 $)
  - 制御点の列は((`122`,`0`), (`123`,`1667665`), (`149`,`911519`), (`174`,`1511934`), (`200`,`1967913`), (`225`,`1633211`), (`251`,`1589845`), (`252`,`0`))である。
      - 報酬が得られる時刻は$ 123,124,\cdots,251 $である。
- 16行目:ジョブID=5が依存するジョブ。ジョブID=5の記述終了。
  - このジョブが依存するジョブの数は`2`個である。($ N^{\text{depend}}_5=2 $)
  - このジョブはID=`6`,`4`のジョブ全てに依存する。($ \text{id}^\text{depend}_{5,1}=6,\text{id}^\text{depend}_{5,2}=4 $)
- 17行目:ジョブID=6の記述開始。
  - ジョブIDは`6`である。($ \text{ID}^{\text{job}}_6=6 $)
  - このジョブのタイプは`2`である。($ \text{Type}_6=2 $)
  - このジョブの完了に必要なタスク数は`737`である。($ N^{\text{task}}_6=737 $)
  - このジョブは頂点`6`上に存在する。($ v^{\text{job}}_6=6 $)
  - このジョブを選択したが未完了のまま作業期間($ T_\text{max} $)が終了した場合、未完了ペナルティ`0.95812926774107732`が適用される。([採点方法](#scoring-method))($ P^{\text{job}}_6=0.95812926774107732 $)
  - このジョブの天候依存度は`0.049371044631834608`である。([実行タスク数制限](#task-limit))($ d^\text{weather}_6=0.049371044631834608 $)
  - **このジョブは選択必須である。**($ f^{\text{mandatory}}_6=1 $)
- 18行目:ジョブID=6の報酬を表す関数の記述
  - 制御点個数は`11`個である。($ N^{\text{reward}}_6=11 $)
  - 制御点の列は((`82`,`0`), (`83`,`1431723`), (`108`,`1475010`), (`133`,`1032345`), (`158`,`1012865`), (`183`,`1593586`), (`207`,`1923638`), (`232`,`1956884`), (`257`,`2797127`), (`282`,`2877123`), (`283`,`0`))である。
      - 報酬が得られる時刻は$ 83,84,\cdots,282 $である。
- 19($ =1+3\times\ N_{\text{job}} $)行目:ジョブID=6が依存するジョブ。ジョブID=6の記述終了。
  - このジョブが依存するジョブの数は`0`個である。($ N^{\text{depend}}_6=0 $)
  - (依存するジョブの数が`0`なので依存するジョブIDは存在しない。)
 
<a class="anchor" id="weather"></a>

#### 天候

天候はタスクの実行可能数に影響する値で、毎時刻確率的に状態遷移する。

- **入力**
  - 続く$ 1 $行で基本天候区間長$ T^\text{weather} $と天候の全状態数$ N^\text{weather} $が与えられる。
  - 続く$ N^\text{weather} $行で、状態$ i $から各状態への遷移確率 $ p^{\text{weather}}_{i,1}\ \,\,\ p^{\text{weather}}_{i,2}\ \,\,\cdots\ \,\,\ p^{\text{weather}}_{i,N^{\text{weather}}} $が与えられる。(遷移確率行列)
  - 続く$ 1 $行で、各天候における[実行タスク数制限](#task-limit)を計算するための制限定数$ c_1\,\,c_2\,\,\cdots\,\,c_{N_\text{weather}} $が与えられる。
 
**この問題では$ N^\text{weather}=7 $で固定であり、天候$ 1 $は快晴、$ 2 $は晴れ、$ 3 $は薄雲、$ 4 $は曇り、$ 5 $は弱い雨、$ 6 $は普通程度の雨、$ 7 $は強い雨に対応する。**

天候の挙動・更新処理 基本天候と実天候の2種類の内部状態が存在し、直接タスク実行数に影響を与えるのは実天候のみである。

#### 基本天候

作業期間全体を長さが$ T^\text{weather} $である基本天候区間$ b_i\ (i=1,\cdots,n(=T_\text{max}/T^\text{weather})) $に等分割する。

$ b_i $はそれぞれ独立した天候状態$ w_i $を持ち、これを基本天候と呼ぶ。

時刻$ t=1 $の開始時に遷移確率行列の定常分布に従い、$ w_i $を全て独立に確率的に決定する。 以降、時間が$ T^\text{weather} $経過する度に遷移確率行列を用いて各区間の状態$ w_i $を独立に更新する。

#### 実天候

実天候状態を$ w $とすると、 $ w $は次のように更新される:

時刻$ t $の開始時に

- $ t $が、ある基本天候区間$ b_i $の開始時刻と一致する場合:$ w\ \leftarrow\ w_i $
- その他の場合:$ w $を遷移確率行列を用いて更新
 
ただし、実天候の更新処理より基本天候の更新処理の方が先に行われる。

他の箇所で単に「天候（の値・の状態）」と言った場合、実天候$ w $の値の事を指す。

天候を決定するために使われるシード値はテストケースごとに異なる値が与えられる。

[入力2](#input2)で、時間$ T^\text{weather} $ごとの将来の各天候状態の確率が、時刻$ t=1 $から時間$ T^\text{weather} $経過する度に与えられる。(時刻$ t=1 $自体も含む)

入力例 以下は $ T^\text{weather}=10,N^\text{weather}=7 $ の例:

```
<span></span>10 7
0.65038945819291316 0.3456395688250497 0.0039709729820371371 0 0 0 0
0.29367291714300126 0.57978625074387669 0.11253142456916906 0.014009407543952863 0 0 0
1.4131189430426344e-09 0.18905960051799561 0.44909739165434842 0.32239542530231813 0.039447581112218938 0 0
0 0.043752041690362654 0.079271361143687852 0.87011603340370036 0.0033077052290538069 0.0035528585331954204 0
0 0 0.015190350742277408 0.044334491311077411 0.90080171493640016 0.039640375730251982 3.3067279992976463e-05
0 0 0 2.9123680876183852e-09 0.21976983161374733 0.68711791872304939 0.093112246750835195
0 0 0 0 0.018677162951541051 0.41030647336908055 0.57101636367937847
0 1 2 3 10 14 20
```



- 1行目:基本天候区間長は`10`、天候の全状態数は`7`である。($ T^\text{weather}=10,N^\text{weather}=7 $)
- 2行目:状態$ 1 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`0.65038945819291316`,`0.3456395688250497`,`0.0039709729820371371`,`0`,`0`,`0`,`0`である。
- 3行目:状態$ 2 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`0.29367291714300126`,`0.57978625074387669`,`0.11253142456916906`,`0.014009407543952863`,`0`,`0`,`0`である。
- 4行目:状態$ 3 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`1.4131189430426344e-09`,`0.18905960051799561`,`0.44909739165434842`,`0.32239542530231813`,`0.039447581112218938`,`0`,`0`である。
- 5行目:状態$ 4 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`0`,`0.043752041690362654`,`0.079271361143687852`,`0.87011603340370036`,`0.0033077052290538069`,`0.0035528585331954204`,`0`である。
- 6行目:状態$ 5 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`0`,`0`,`0.015190350742277408`,`0.044334491311077411`,`0.90080171493640016`,`0.039640375730251982`,`3.3067279992976463e-05`である。
- 7行目:状態$ 6 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`0`,`0`,`0`,`2.9123680876183852e-09`,`0.21976983161374733`,`0.68711791872304939`,`0.093112246750835195`である。
- 8行目:状態$ 7 $から状態$ 1,2,3,4,5,6,7 $への(基本)遷移確率はそれぞれ`0`,`0`,`0`,`0`,`0.018677162951541051`,`0.41030647336908055`,`0.57101636367937847`である。
- 9行目:状態$ 1,2,3,4,5,6,7 $に対する制限定数はそれぞれ`0`,`1`,`2`,`3`,`10`,`14`,`20`である。
 
<a class="anchor" id="schedule"></a>

#### スケジュール

コンテスタントは、各ワーカーごとのジョブ実行のスケジュール（いつ、どのジョブを、どのぐらい）を提出し、スケジュール通りに実行することで加点を得ることができる。スケジュールと実行にズレがあると加点は小さくなる。スケジュールは途中で変更できるが、時間的に直近のスケジュールを変更すると加点は大きく減少する。逆に、遠い未来のスケジュール変更は加点の減少が小さい。

スケジュール評価の詳細は、[出力2](#output2)を参照。

計画を提出する意図がない場合、任意の計画を提出してよい。

- **入力**
  - 次の$ 1 $行で最大スケジュール変更ペナルティ $ P_m $、スケジュール変更ペナルティ減衰率$ R_m $、スケジュール加点係数$ \alpha $が与えられる。
 
入力例

```
<span></span>0.029878077064496654 0.99054720249346828 0.87563809736779619
```



- 1行目:最大スケジュール変更ペナルティは`0.029878077064496654`、スケジュール変更ペナルティ減衰率は`0.99054720249346828`、スケジュール加点係数は`0.87563809736779619`である。($ P_m=0.029878077064496654,R_m=0.99054720249346828,\alpha=0.87563809736779619 $)
 
#### 天候予測

受託するジョブを決定するために開始時点(時刻$ t=1 $)での天候予測情報が入力として与えられる。構成は入力2の[天候予測](#weather-forecast)と同一であるのでそちらを参照せよ。

入力1全体の例

```
<span></span>300
14 19
1 7 1
1 2 1
2 9 1
2 3 1
3 5 1
3 7 1
3 6 1
4 13 2
4 10 2
4 6 1
4 5 1
6 8 1
7 8 1
8 14 2
9 11 2
10 12 2
10 11 2
12 13 2
13 14 2
5
6 100 3 1 2 3
13 59 1 3
10 55 2 2 3
9 47 3 1 2 3
9 89 1 2
6
1 1 906 10 0.94469412898840599 0.07857326752336613 0
13 11 0 12 1212810 37 1849941 63 2266874 88 1944271 113 1207029 139 768959 164 808665 189 992126 214 1137116 240 907954 265 903397 266 0
0
2 3 905 2 0.96478158647239831 0.056877102556647817 0
7 92 0 93 1280499 121 1553205 149 1429506 176 1419189 204 1731967 205 0
0
3 1 1052 4 0.94436951517275258 0.071240847781028308 0
7 191 0 192 1914094 218 1735762 244 1444725 270 1275768 296 975408 297 0
0
4 3 653 4 0.95274950239675604 0.14137003825803521 0
10 70 0 71 1319303 94 1329844 118 1503315 141 1161131 165 1294526 188 849137 212 1953166 235 2087503 236 0
1 2
5 1 1452 12 0.95747093286627682 0.076042573628832266 0
8 122 0 123 1667665 149 911519 174 1511934 200 1967913 225 1633211 251 1589845 252 0
2 6 4
6 2 737 6 0.95812926774107732 0.049371044631834608 1
11 82 0 83 1431723 108 1475010 133 1032345 158 1012865 183 1593586 207 1923638 232 1956884 257 2797127 282 2877123 283 0
0
10 7
0.65038945819291316 0.3456395688250497 0.0039709729820371371 0 0 0 0
0.29367291714300126 0.57978625074387669 0.11253142456916906 0.014009407543952863 0 0 0
1.4131189430426344e-09 0.18905960051799561 0.44909739165434842 0.32239542530231813 0.039447581112218938 0 0
0 0.043752041690362654 0.079271361143687852 0.87011603340370036 0.0033077052290538069 0.0035528585331954204 0
0 0 0.015190350742277408 0.044334491311077411 0.90080171493640016 0.039640375730251982 3.3067279992976463e-05
0 0 0 2.9123680876183852e-09 0.21976983161374733 0.68711791872304939 0.093112246750835195
0 0 0 0 0.018677162951541051 0.41030647336908055 0.57101636367937847
0 1 2 3 10 14 20
0.029878077064496654 0.99054720249346828 0.87563809736779619
1 0 0 0 0 1 0 0
11 0.32997661987364896 0.35720093880279286 0.10144180605929307 0.18397452127884667 0.023582674286464638 0.0033945272798704107 0.00042891241908338078
21 0.26146895868607978 0.29829553702903927 0.10367350846525671 0.27413103299772817 0.050432669277988201 0.010115966874572493 0.0018823266693354056
31 0.20903275687358913 0.2506351074109075 0.10197621041600768 0.32306215864825039 0.090561788952494518 0.020385340563280511 0.0043466371354700514
41 0.16453280991499084 0.20329129777873356 0.091390970778385427 0.30920472674724836 0.18000987309438846 0.041926491747270762 0.0096438299389825944
51 0.21773018584216544 0.25781470723187322 0.10129611879665416 0.30911960619088807 0.089756375035668315 0.020014729744938529 0.0042682771578124723
61 0.18695780159879197 0.22637031212950884 0.095692191594510659 0.30993166346993428 0.14119172380160475 0.032519854076175789 0.0073364533294737588
71 0.19978365794228928 0.23953773160128791 0.098109392505800377 0.31008680745444389 0.11925953673379487 0.027193693951331609 0.0060291798110520588
81 0.20381180897940113 0.24366400563862556 0.098856417213860404 0.3100620551039589 0.11244486750690874 0.02553797224640603 0.0056228733108393747
91 0.21098420754865557 0.2510068631469719 0.10018090439250056 0.30998380940692433 0.10034511870194431 0.02259771906125015 0.0049013777417531382
101 0.21017332149772244 0.25017760625955138 0.10003235653165234 0.30999988763169445 0.10170583135583394 0.022928465225827428 0.0049825314977181429
111 0.21035975914577648 0.25036818399930888 0.10006639945926016 0.30999551883837906 0.10139365148795368 0.02285257565351554 0.0049639114158061791
121 0.21006375850103443 0.25006523326156821 0.10001185087147714 0.3099994276865809 0.10189232028110375 0.022973761374232418 0.0049936480240032411
131 0.21003860874539299 0.25003947404099974 0.1000071910191422 0.30999960764692047 0.10193484214518268 0.022984093048729243 0.0049961833536327927
141 0.21002336947231043 0.25002386973415752 0.10000437307823702 0.30999975094869503 0.1019605735904045 0.022990345532450621 0.0049977176437451558
151 0.21001036314333912 0.25001055377029446 0.10000197057271488 0.30999988860662192 0.1019825193444605 0.022995678324735189 0.0049990262378340521
161 0.2098468891366603 0.24984320350327363 0.099971794472248382 0.31000174310451423 0.10225822676243579 0.023062676470061792 0.0050154665508059335
171 0.21001766063059757 0.25001802405322704 0.10000331731605842 0.30999980388842874 0.10197021368851594 0.022992687970461667 0.0049982924527108988
181 0.21000312608202204 0.25000314492830189 0.10000063442967058 0.30999996928440271 0.10199472644850339 0.022998644688091742 0.0049997541390076946
191 0.21000646152716931 0.25000655944481537 0.10000125010448897 0.30999993130167014 0.10198910119136487 0.022997277723427214 0.0049994187070641306
201 0.21000390597655963 0.25000394330415704 0.10000077837739391 0.30999996034571875 0.10199341120724155 0.022998325077383485 0.0049996757115455511
211 0.21000068372351638 0.25000064465305499 0.10000018358284854 0.30999999695861213 0.10199884564588058 0.022999645671209767 0.004999999764877615
221 0.21000123276535285 0.25000120671230119 0.10000028493014526 0.3099999907192631 0.10199791966912596 0.022999420654547454 0.0049999445492642201
231 0.2100001748189628 0.25000012368230085 0.10000008964391316 0.31000000273847578 0.10199970393318095 0.022999854238977081 0.0050000509441893055
241 0.21000051371752923 0.25000047061605735 0.10000015220117091 0.30999999888829144 0.10199913236874111 0.022999715346170929 0.0050000168620389848
251 0.21000030618472809 0.25000025816270716 0.10000011389270266 0.31000000124600918 0.10199948238020001 0.022999800400576097 0.0050000377330769279
261 0.2100000445095816 0.2499999902833088 0.1000000655900994 0.31000000421880708 0.10199992370466664 0.022999907644464797 0.0050000640490715734
271 0.21000008909654816 0.25000003592742104 0.10000007382040528 0.31000000371226893 0.10199984850715899 0.022999889371122236 0.0050000595650754173
281 0.21000000318197135 0.24999994797583083 0.10000005796143702 0.31000000468831079 0.10199999340515975 0.02299992458200726 0.005000068205283017
291 0.21000003070352388 0.24999997614991259 0.10000006304163929 0.31000000437564929 0.10199994698907894 0.022999913302684732 0.0050000654375114001
```



- 1行目:[作業期間](#work-time-frame)参照
- 2-21行目:[地理情報](#geo-data)参照
- 22-27行目:[ワーカー](#worker)参照
- 28-46行目:[ジョブ](#job)参照
- 47-55行目:[天候](#weather)参照
- 56行目:[スケジュール](#schedule)参照
- 57-86行目:開始時($ t=1 $)での天候予測情報(入力2の[天候予測](#weather-forecast)参照)
 
<a class="anchor" id="output1"></a>

### 出力1

これらの情報が与えられた後、コンテスタントは受託するジョブを選択し以下の形式で出力する:

> $ N^{\text{selected}}\,\,\ \text{id}_1\,\,\ \text{id}_2\,\,\cdots\ \,\,\text{id}_{N^{\text{selected}}} $



(末尾に改行を挿入すること)

<a class="anchor" id="accepting-jobs"></a>

#### ジョブの受託

- **出力**
  - 最初の$ 1 $行で、受託するジョブの数$ N^{\text{selected}} $と受託するジョブIDの列$ \text{id}_1\,\,\ \text{id}_2\,\,\cdots\ \,\,\text{id}_{N^{\text{selected}}} $を出力する。
 
以下の条件を満たさない場合`WA`(Wrong Answer)となる。

- $ N^{\text{selected}}\ \geq\ 0 $
- ジョブIDの列の長さは$ N^{\text{selected}} $
- 指定されたジョブID全てについて、対応するジョブが存在する。
- ジョブIDは重複していない。
- 受託必須ジョブ($ f^\text{mandatory}=1 $であるジョブ)はすべて選択されている。
- 選択した全てのジョブについて、依存するジョブが1つ以上存在するならばそれらもまた全て選択されている。
 
出力例

```
<span></span>4 6 2 3 4
```



- 1行目:コンテスタントは`4`個のジョブを受託する。受託するジョブのIDは`6`,`2`,`3`,`4`である。($ N^{\text{selected}}=4,\text{id}_1=6,\text{id}_2=2,\text{id}_3=3,\text{id}_4=4 $)
 
<a class="anchor" id="input2"></a>

### 入力2(毎時刻)

出力1が正常に終了すると各時刻での入出力に移行する。 時刻$ t=1 $から開始し、以後入力2に到達する度に時刻が$ 1 $進む。

毎時刻、入力として

1. 現在の天候
2. 受託したジョブの情報
3. ワーカーの現在位置
4. (時間$ T^\text{weather} $毎に)天候の予報
 
が以下の形式で標準入力から与えられる。

> $ w\\
N^\text{selected}\\
{\rm{id}}^{\rm{job}}_1\,\,\ n^{\rm{rest}}_1\\
\vdots\\
{\rm{id}}^{\rm{job}}_{N^\text{selected}}\,\,\ n^{\rm{rest}}_{N^\text{selected}}\\
{\rm{id}}^{\rm{worker}}_1\,\,\ u_1\,\,\ v_1\,\,\ d^{\rm{from\_u}}_1\\
\vdots\\
{\rm{id}}^{\rm{worker}}_{N_{\rm{worker}}}\,\,\ u_{N_{\rm{worker}}}\,\,\ v_{N_{\rm{worker}}}\,\,\ d^{\rm{from\_u}}_{N_{\rm{worker}}} $



**時間$ T^\text{weather} $毎に(=時刻$ t $が$ (t-1)\ \mod\ T^\text{weather}\ =\ 0 $を満たす場合にのみ)**、天候の予測が以下の形式で標準入力から追加で与えられる。

> $ t_1\,\,\ p^1_1\,\,\ p^1_2\,\,\ \cdots\ \,\,\ p^1_{N^{\rm{weather}}}\\
t_2\,\,\ p^2_1\,\,\ p^2_2\,\,\ \cdots\ \,\,\ p^2_{N^{\rm{weather}}}\\
\vdots\\
t_{N&#39;}\,\,\ p^{N&#39;}_1\,\,\ p^{N&#39;}_2\,\,\ \cdots\ \,\,\ p^{N&#39;}_{N^{\rm{weather}}} $



<a class="anchor" id="current-weather"></a>

#### 現在の天候

- **入力**
  - 最初の$ 1 $行で現在の天候$ w\ \in\ \{1,\cdots,N_\text{weather}\} $が与えられる。
 
入力例

```
<span></span>4
```



- 1行目:時刻$ t $における天候は`4`である。($ w=4 $)
 
<a class="anchor" id="job-state"></a>

#### ジョブの状態

受託したジョブに関する以下の情報が入力として与えられる。

- **入力**
  - 続く$ 1 $行で受託したジョブの個数$ N^\text{selected} $が与えられる。
  - 次の$ N^\text{selected} $行で、受託した各ジョブの状態
      - 対応するジョブID:$ {\text{id}}^{\text{job}}_i $
      - 残りタスク量:$ n^{\text{rest}}_i $
  - が与えられる。($ 1\ \leq\ i\ \leq\ N^\text{selected} $)
 
入力例

```
<span></span>4
2 905
3 1052
4 653
6 737
```



- 1行目:コンテスタントが選択したジョブは`4`個である。($ N^\text{selected}=4 $)
- 2行目:コンテスタントはID=`2`のジョブを選択しており、その残タスク数は`905`である。
- 3行目:コンテスタントはID=`3`のジョブを選択しており、その残タスク数は`1052`である。
- 4行目:コンテスタントはID=`4`のジョブを選択しており、その残タスク数は`653`である。
- 5行目:コンテスタントはID=`6`のジョブを選択しており、その残タスク数は`737`である。
 
<a class="anchor" id="worker-current-location"></a>

#### ワーカーの現在位置

- **入力**
  - 続く$ N_\text{worker} $行で各ワーカーの
      - ワーカーID:$ \text{id}^\text{worker} $
      - ワーカーが存在する辺の端点の頂点番号: $ u,v $
      - ワーカーの端点$ u $からの距離: $ d^\text{from\_u} $
 
が与えられる。

ただし、ワーカーが辺ではなく頂点上に存在する場合、その頂点番号を$ w $とすれば$ u=v=w $かつ$ d^\text{from\_u}=0 $となる。

入力例

```
<span></span>1 6 6 0
2 13 4 1
3 10 4 1
4 9 9 0
5 9 9 0
```



- 1行目:ワーカー(ID=`1`)は頂点`6`上に存在する。($ \text{id}^\text{worker}_1=1,u_1=6,v_1=6,d_1=0 $)
- 2行目:ワーカー(ID=`2`)は頂点`13`と`4`を接続する辺上の、頂点`13`から距離`1`の位置に存在する。($ \text{id}^\text{worker}_2=2,u_2=13,v_2=4,d_2=1 $)
- 3行目:ワーカー(ID=`3`)は頂点`10`と`4`を接続する辺上の、頂点`10`から距離`1`の位置に存在する。($ \text{id}^\text{worker}_3=3,u_3=10,v_3=4,d_3=1 $)
- 4行目:ワーカー(ID=`4`)は頂点`9`上に存在する。($ \text{id}^\text{worker}_4=4,u_4=9,v_4=9,d_4=0 $)
- 5行目:ワーカー(ID=`5`)は頂点`9`上に存在する。($ \text{id}^\text{worker}_5=5,u_5=9,v_5=9,d_5=0 $)
 
<a class="anchor" id="weather-forecast"></a>

#### 天候予測

**時刻$ t $が$ (t-1)\ \mod\ T^\text{weather}\ =\ 0 $を満たす場合にのみ**、作業期間終了までの$ T^\text{weather} $間隔の天候予測情報が与えられる。

- **入力**
  - 現在時刻$ t $における以降の予報の個数を$ N' $とすると、続く$ N' $行で
      - 時刻$ t_i $ と 現時点における時刻$ t_i $の各天候状態の確率$ p^i_1\,\,\ p^i_2\,\,\ \cdots\ \,\,\ p^i_{N^{\text{weather}}} $
 
が与えられる。($ 1\leq\ i\ \leq\ N' $)

ただし、$ t_i=t+(i-1)\times\ T^{\text{weather}},N'=\ (T_{\text{max}}-(t-1))/T^{\text{weather}} $

入力例 以下は$ T_\text{max}=300,T^{\text{weather}}=10,N^{\text{weather}}=7 $のときの、時刻`231`における天候予測情報である。

```
<span></span>231 0 0 0 1 0 0 0
241 0.14018451203740215 0.1989275695057979 0.11416680823055275 0.47491922909498718 0.055436150269510279 0.013776723318683931 0.0025890075430656636
251 0.09280720088264463 0.12786225388899222 0.075541159856700776 0.2940084286639329 0.3187308679757298 0.073782875285869701 0.017267213446130077
261 0.13618507866780669 0.1738477285644548 0.085600288742176719 0.30613029252196533 0.23136324103370096 0.054225695397813925 0.012647675072081671
271 0.22147567372764859 0.26151152419242735 0.10180524115884333 0.30797314144503296 0.084544670039893785 0.018734568743877168 0.0039551806922769701
281 0.21773018584216544 0.25781470723187322 0.10129611879665416 0.30911960619088807 0.089756375035668315 0.020014729744938529 0.0042682771578124723
291 0.21391908801649892 0.25399316678508993 0.10069857638866596 0.30980462878477455 0.095541376935105796 0.021428548707005373 0.0046146143828596133
```



- 1行目:時刻`231`において天候が$ 1 $になる確率は`0`、$ 2 $になる確率は`0`、$ 3 $になる確率は`0`、$ 4 $になる確率は`1`、$ 5 $になる確率は`0`、$ 6 $になる確率は`0`、$ 7 $になる確率は`0`である。
- 2行目:時刻`241`において天候が$ 1 $になる確率は`0.14018451203740215`、$ 2 $になる確率は`0.1989275695057979`、$ 3 $になる確率は`0.11416680823055275`、$ 4 $になる確率は`0.47491922909498718`、$ 5 $になる確率は`0.055436150269510279`、$ 6 $になる確率は`0.013776723318683931`、$ 7 $になる確率は`0.0025890075430656636`である。
- 3行目:時刻`251`において天候が$ 1 $になる確率は`0.09280720088264463`、$ 2 $になる確率は`0.12786225388899222`、$ 3 $になる確率は`0.075541159856700776`、$ 4 $になる確率は`0.2940084286639329`、$ 5 $になる確率は`0.3187308679757298`、$ 6 $になる確率は`0.073782875285869701`、$ 7 $になる確率は`0.017267213446130077`である。
- 4行目:時刻`261`において天候が$ 1 $になる確率は`0.13618507866780669`、$ 2 $になる確率は`0.1738477285644548`、$ 3 $になる確率は`0.085600288742176719`、$ 4 $になる確率は`0.30613029252196533`、$ 5 $になる確率は`0.23136324103370096`、$ 6 $になる確率は`0.054225695397813925`、$ 7 $になる確率は`0.012647675072081671`である。
- 5行目:時刻`271`において天候が$ 1 $になる確率は`0.22147567372764859`、$ 2 $になる確率は`0.26151152419242735`、$ 3 $になる確率は`0.10180524115884333`、$ 4 $になる確率は`0.30797314144503296`、$ 5 $になる確率は`0.084544670039893785`、$ 6 $になる確率は`0.018734568743877168`、$ 7 $になる確率は`0.0039551806922769701`である。
- 6行目:時刻`281`において天候が$ 1 $になる確率は`0.21773018584216544`、$ 2 $になる確率は`0.25781470723187322`、$ 3 $になる確率は`0.10129611879665416`、$ 4 $になる確率は`0.30911960619088807`、$ 5 $になる確率は`0.089756375035668315`、$ 6 $になる確率は`0.020014729744938529`、$ 7 $になる確率は`0.0042682771578124723`である。
- 7行目:時刻`291`において天候が$ 1 $になる確率は`0.21391908801649892`、$ 2 $になる確率は`0.25399316678508993`、$ 3 $になる確率は`0.10069857638866596`、$ 4 $になる確率は`0.30980462878477455`、$ 5 $になる確率は`0.095541376935105796`、$ 6 $になる確率は`0.021428548707005373`、$ 7 $になる確率は`0.0046146143828596133`である。
 
<a class="anchor" id="output2"></a>

### 出力2(毎時刻)

これに対して、コンテスタントは標準出力から

1. 各ワーカーのスケジュール
2. 各ワーカーの行動
 
を以下の形式で出力する。

> $ N_\text{schedule}\\
\text{id}_1\,\,\text{id}_2\,\,\cdots\,\,\text{id}_{N_\text{schedule}}\\
\text{job}^{\text{id}_1}_t\,\,\text{job}^{\text{id}_1}_{t+1}\,\,\cdots\,\,\text{job}^{\text{id}_1}_{T_\text{max}}\\
\vdots\\
\text{job}^{\text{id}_{N_\text{schedule}}}_t\,\,\text{job}^{\text{id}_{N_\text{schedule}}}_{t+1}\,\,\cdots\,\,\text{job}^{\text{id}_{N_\text{schedule}}}_{T_\text{max}}\\
{\rm{action}}_1\\
{\rm{action}}_2\\
\vdots\\
{\rm{action}}_{N_{\rm{worker}}} $



(末尾に改行を挿入すること)

<a class="anchor" id="schedule-submission"></a>

#### スケジュールの提出

各ワーカーは、"各時刻におけるジョブID"の列をジョブ実行スケジュールとして保持している。

コンテスタントは時刻$ t=1 $に全ワーカーのスケジュールを提出する。以後どの時刻でも、変更が必要なワーカーのみ選択して再提出しスケジュールを変更することができる。

- **出力**
  
  
  - 最初の$ 1 $行で、スケジュールを変更するワーカーの数$ N_\text{schedule} $を出力する。
  - 続く$ 1 $行で、ワーカーのIDの列$ \text{id}_1\,\,\text{id}_2\,\,\cdots\,\,\text{id}_{N_\text{schedule}} $を出力する。
  - 続く$ N_\text{schedule} $行で、ワーカー(ID=$ \text{id}_i $)の現在時刻$ t $から$ T_\text{max} $までのスケジュール(各時刻で行うジョブのID) $ \text{job}^{\text{id}_i}_t\,\,\text{job}^{\text{id}_i}_{t+1}\,\,\cdots\,\,\text{job}^{\text{id}_i}_{T_\text{max}} $を出力する。($ 1\leq\ i\ \leq\ N_\text{schedule} $)
- 以下の条件を満たさない場合`WA`(Wrong Answerとなる)
  
  
  - $ N_\text{schedule}\ \geq\ 0 $
  - ワーカーIDの列の長さは$ N_\text{schedule} $である。
  - 指定されたワーカーID全てについて、対応するワーカーが存在する。
  - ワーカーIDは重複していない。
  - 提出時刻を$ t $とすると、スケジュールで指定されるジョブIDの数は$ T_\text{max}-t+1 $である。
  - 時刻$ t=1 $の場合のみ: $ N_\text{schedule}\ =\ N_\text{worker} $
 
スケジュールの再提出を行うと、既存のスケジュールからの変更の大きさに依存してスケジュール加点量が減少する。([スケジュール加点](#schedule-added-point)を参照)

<a class="anchor" id="worker-action"></a>

#### ワーカーの行動

コンテスタントは全てのワーカーの行動$ \text{action} $を毎時刻指定する。$ \text{action} $の実体は文字列であり、以下の3種類のいずれかである。

- `stay`:移動もジョブ実行もせずその場にとどまる。
- `move w`:現在位置から頂点番号`w`に対応する頂点の方向にその間の最短経路上を距離$ 1 $だけ進む。以下の条件を満たさない場合`WA`(Wrong Answer)となる。
  - 頂点番号`w`に対応する頂点は存在する。
  - 現在位置と頂点番号`w`に対応する頂点は異なる。
- `execute i a`:ID=`i`のジョブをタスク数`a`だけ実行する。ただし、以下の条件を満たさない場合`WA`(Wrong Answer)となる。
  - 受託したジョブの中にID=`i`であるものが存在する。
  - ワーカーの現在位置とID=`i`であるジョブが存在する頂点が一致する。
  - ID=`i`のジョブのタイプは、このワーカーの実行可能ジョブタイプに含まれる。
  - `a`は1以上の整数。
  - `a`はID=`i`のジョブの残タスク数を超えない。
  - `a`は実行タスク数制限を超えない。(詳細は[実行タスク数制限](#task-limit))
  - ID=`i`のジョブが依存するジョブは全て完了している。
  - 報酬の値は正である。
 
`move w`に関して、現在位置と頂点`w`の間に2つ以上の異なる最短経路が存在する場合どれが選ばれるかは未規定である。そのような場合でも、コンテスタントは経路の途中の点を指定して移動する操作を繰り返すことで希望の経路を選ぶことができる。

上記のいずれの文字列パターンにも合致しない$ \text{action} $が指定された場合`WA`(Wrong Answer)となる。

また、各時刻終了時に、合計タスク処理量 が 完了までのタスク数 $ N^{\text{task}}_i $ を超えるようなジョブが存在する場合 `WA` または `RE` となる。

- **出力**
  - 次の$ N_\text{worker} $行で各ワーカーの行動$ \text{action}_i $を出力する。($ 1\ \leq\ i\ \leq\ N_\text{worker} $)
 
出力が有効であれば[入力2](#input2)に進み次の時刻を開始する。現在時刻が$ T_\text{max} $ならば[入力3(採点)](#input3)に進む。

出力例 以下は$ N_\text{worker}=3,T_\text{max}=10 $の例である。

#### 例1:行動+初期スケジュール提出($ t=1 $)

```
<span></span>3
1 2 3
85 85 85 85 431 431 431 431 431 431
65 65 65 65 65 65 65 65 65 65
730 730 639 639 639 639 4 4 4 4
execute 85 135
move 12
move 98
```



- 1行目:コンテスタントは`3`つのワーカーのスケジュールを提出する。
- 2行目:対象となるワーカーはID=`1`,`2`,`3`のものである。
- 3行目:これは2行目で1番目に指定されたワーカー(ID=`1`)のスケジュールであり、以下の通りである:
  - 時刻$ 1 $でID=`85`のジョブを実行する。同様に、時刻$ 2 $でID=`85`、時刻$ 3 $でID=`85`、時刻$ 4 $でID=`85`、時刻$ 5 $でID=`431`、時刻$ 6 $でID=`431`、時刻$ 7 $でID=`431`、時刻$ 8 $でID=`431`、時刻$ 9 $でID=`431`、時刻$ 10 $でID=`431`のジョブを処理する。
- 4行目:これは2行目で2番目に指定されたワーカー(ID=`2`)のスケジュールであり、以下の通りである:
  - 時刻$ 1 $でID=`65`のジョブを実行する。同様に、時刻$ 2 $でID=`65`、時刻$ 3 $でID=`65`、時刻$ 4 $でID=`65`、時刻$ 5 $でID=`65`、時刻$ 6 $でID=`65`、時刻$ 7 $でID=`65`、時刻$ 8 $でID=`65`、時刻$ 9 $でID=`65`、時刻$ 10 $でID=`65`のジョブを処理する。
- 5行目:これは2行目で3番目に指定されたワーカー(ID=`3`)のスケジュールであり、以下の通りである:
  - 時刻$ 1 $でID=`730`のジョブを実行する。同様に、時刻$ 2 $でID=`730`、時刻$ 3 $でID=`639`、時刻$ 4 $でID=`639`、時刻$ 5 $でID=`639`、時刻$ 6 $でID=`639`、時刻$ 7 $でID=`4`、時刻$ 8 $でID=`4`、時刻$ 9 $でID=`4`、時刻$ 10 $でID=`4`のジョブを処理する。
- 6行目:現在時刻におけるID=1のワーカーの行動を次のように指定する:ID=`85`のジョブのタスクを`135`だけ処理する。
- 7行目:現在時刻におけるID=2のワーカーの行動を次のように指定する:頂点`12`に向かって移動する。
- 8行目:現在時刻におけるID=3のワーカーの行動を次のように指定する:頂点`98`に向かって移動する。
 
#### 例2:行動+スケジュールを変更しない

```
<span></span>0

stay
move 87
execute 670 40
```



- 1行目:コンテスタントは`0`個のワーカーのスケジュールを提出する。(=スケジュールを変更しない)
- 2行目:対象となるワーカーは存在しない。（=ワーカーIDが0個入った行、すなわち空行が入る）
- （存在しない行:0個のワーカーに対してスケジュールが出力され、合計0行出力される。）
- 3行目:現在時刻におけるID=1のワーカーの行動を次のように指定する:何もしない
- 4行目:現在時刻におけるID=2のワーカーの行動を次のように指定する:頂点`87`に向かって移動する。
- 5行目:現在時刻におけるID=3のワーカーの行動を次のように指定する:ID=`670`のジョブのタスクを`40`だけ処理する。
 
#### 例3:行動+スケジュール変更($ t=6 $)

```
<span></span>2
2 3
65 65 65 65 223
639 4 4 91 91
execute 431 80
execute 65 40
move 9
```



- 1行目:コンテスタントは`2`個のワーカーのスケジュールを提出(変更)する。
- 2行目:対象となるワーカーはID=`2`,`3`のものである。
- 3行目:これは2行目で1番目に指定されたワーカー(ID=`2`)の(変更された)スケジュールであり、以下の通りである:
  - 時刻$ 6 $でID=`65`のジョブを実行する。同様に、時刻$ 7 $でID=`65`、時刻$ 8 $でID=`65`、時刻$ 9 $でID=`65`、時刻$ 5 $でID=`223`のジョブを処理する。
- 4行目:これは2行目で2番目に指定されたワーカー(ID=`3`)の(変更された)スケジュールであり、以下の通りである:
  - 時刻$ 6 $でID=`639`のジョブを実行する。同様に、時刻$ 7 $でID=`4`、時刻$ 8 $でID=`4`、時刻$ 9 $でID=`91`、時刻$ 5 $でID=`91`のジョブを処理する。
- 5行目:現在時刻におけるID=1のワーカーの行動を次のように指定する:ID=`431`のジョブのタスクを`80`だけ処理する。
- 6行目:現在時刻におけるID=2のワーカーの行動を次のように指定する:ID=`65`のジョブのタスクを`40`だけ処理する。
- 7行目:現在時刻におけるID=3のワーカーの行動を次のように指定する:頂点`9`に向かって移動する。
 
<a class="anchor" id="input3"></a>

### 入力3(採点)

時刻$ t=T_\text{max} $の[出力2](output2)終了後、出力が有効であれば、入力としてスコア$ S $を標準入力から以下の形式で与える。

> $ S $



この値を入力から受け取らない場合、`TLE`となる可能性がある。

また、順位付けに関しては [順位決定方法](#ranking-method) を参照せよ。

<a class="anchor" id="scoring-method"></a>

#### 採点方法

スコア$ S $は総報酬量$ R $、未完了ペナルティ$ U $、スケジュール加点$ A $から以下の式により決定される。

 $ S=\left\lfloor\ R\ \times\ U\ \times\ (1+\alpha\ A)\ \right\rfloor $

ただし、$ \left\lfloor\ x\ \right\rfloor $ は$ x $を超えない最大の整数を返す関数(床関数)である。

$ ~ $

$ R,U,A $の計算式は以下の通りである。

<a class="anchor" id="total-reward-amount"></a>

**総報酬量$ R $**:

 $ \begin{aligned}
R=\sum_{j\in\ J_\text{finished}}\sum_{w\ \in\ W}\sum_{t=1}^{T_\text{max}}a^w_j(t)r_j(t)
\end{aligned} $

- 完了したジョブの集合:$ J_\text{finished} $
- 全ワーカーの集合:$ W $
- 時刻$ t $にワーカー$ w $が実行したジョブ$ j $のタスク数:$ a^w_j(t) $
- 時刻$ t $におけるジョブ$ j $のタスク当たりの報酬:$ r_j(t) $
 
<a class="anchor" id="unfinished-penalty"></a>

**未完了ペナルティ$ U $**:

 $ \begin{aligned}
U=\prod_{j\ \in\ J_{\text{unfinished}}}\ P^{\text{job}}_j
\end{aligned} $

- 受託したが未完了であるジョブの集合:$ J_\text{unfinished} $
- ジョブ$ j $の未完了ペナルティ係数:$ P_j^\text{job} $
 
<a class="anchor" id="schedule-added-point"></a>

**スケジュール加点$ A $**:

$ A $は初期値を$ 1.0 $として毎時刻以下の規則で更新される:

- 各ワーカーに対して:
  
  
  - スケジュールと異なるジョブを実行した場合:  $ \begin{aligned}A\leftarrow\ 0\end{aligned} $
  - スケジュールと同じジョブを実行した場合:  $ \begin{aligned}A\leftarrow\ A\end{aligned} $
  - ジョブを実行しなかった場合:  $ \begin{aligned}A\leftarrow\ A\end{aligned} $
- 各ワーカーのスケジュール再提出について、提出時刻を$ t $とすると:
  
  
  - 時刻$ s(\geq\ t) $のジョブIDについて:
      - 変更する場合:  $ \begin{aligned}A\leftarrow\ A\times\ \left(1.0-P_m\ \times\ (R_m)^{s-t}\right)\end{aligned} $
      - 変更しない場合:  $ \begin{aligned}A\leftarrow\ A\end{aligned} $
 
ただし、初期スケジュール提出時には$ A $の更新は行われない。

空集合に対する総和$ \sum $は$ 0 $であり、空集合に対する総乗$ \prod $は$ 1 $である。

<a class="anchor" id="task-limit"></a>

### 実行タスク数制限

ワーカーが1単位時間に処理できるタスクの最大量は、**ワーカーの最大タスク実行数$ L^\text{max} $**、と処理対象のジョブの**天候依存度$ d^\text{weather} $**、**天候**$ w\ \in\ \{1,\cdots,N_\text{weather}\} $により以下のように決定される:

 $ \begin{aligned}
L^\text{max}\times\ (1-d^\text{weather})^{c_w}\end{aligned} $

 ただし、$ c_w $は[入力1](#input1)で与えられた制限定数に対応する。また、ここでは$ 0^0=1 $と定める。 <a class="anchor" id="testcase-generation-rules"></a>

### テストケース生成規則

地理情報(グラフ)

- 用語
  
  
  - 矩形領域$ [x_0,x_1]\times[y_0,y_1]\,\,(x_0\ <\ x_1,y_0\ <\ y_1) $を中央を通る十字で4個の矩形に等分する操作をここでは**分割**と呼ぶ。
  - 具体的には$ [x_0,x_1]\times[y_0,y_1] $を以下の4つに細分する操作である。
      - $ [x_0,(x_1+x_0)/2]\times[y_0,(y_0+y_1)/2] $
      - $ [x_0,(x_1+x_0)/2]\times[(y_0+y_1)/2,y_1] $
      - $ [(x_1+x_0)/2,x_1]\times[y_0,(y_0+y_1)/2] $
      - $ [(x_1+x_0)/2,x_1]\times[(y_0+y_1)/2,y_1] $
  - また、この操作(与えられた矩形領域から矩形領域の集合(上記4つ)を得る操作)を、関数$ \text{Split}(R) $として定めておく。
- パラメータ
  
  
  - 矩形領域サイズ:$ L\ >\ 0 $
  - 最大分割深さ:$ d_\text{max}\ \in\ \mathbb{Z}_{\geq\ 0} $
  - (最大)矩形個数:$ M $($ 0 $以上$ (4^{d_\text{max}+1}-1)/3 $以下の整数)
  - 距離最小スケール:$ s\ >\ 0 $
  - 切断面積比:$ C\in\ (0,1] $
- **生成手順1**(グラフの


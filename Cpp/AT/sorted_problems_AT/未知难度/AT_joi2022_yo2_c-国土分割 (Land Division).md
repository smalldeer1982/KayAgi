---
title: "国土分割 (Land Division)"
layout: "post"
diff: 难度0
pid: AT_joi2022_yo2_c
tag: []
---

# 国土分割 (Land Division)

## 题目描述

[problemUrl]: https://atcoder.jp/contests/joi2022yo2/tasks/joi2022_yo2_c

JOI 国は縦 $ H $ 行，横 $ W $ 列のマス目状に区切られた長方形の形をしている．JOI 国の縦方向は南北方向に平行であり，横方向は東西方向に平行である．北から $ i $ 行目 ($ 1\ \leqq\ i\ \leqq\ H $)，西から $ j $ 列目 ($ 1\ \leqq\ j\ \leqq\ W $) のマスの人口は $ A_{i,j} $ 人である．

JOI 国では，行政の効率化のため，次の条件を満たす境界線を $ 1 $ 本以上引くことで，国全体を $ 2 $ つ以上の地区に分割することにした．

- 境界線はマス目の境界上にある．
- 境界線は JOI 国の北端から南端または JOI 国の東端から西端を結ぶ線分である．

JOI 国の各マスの人口が与えられるので，考えられる分割方法のうち，すべての地区の人口が等しくなるような分割の方法は何通りあるかを求めるプログラムを作成せよ．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ H $ $ W $ $ A_{1,1} $ $ A_{1,2} $ $ \cdots $ $ A_{1,W} $ $ A_{2,1} $ $ A_{2,2} $ $ \cdots $ $ A_{2,W} $ $ \vdots $ $ A_{H,1} $ $ A_{H,2} $ $ \cdots $ $ A_{H,W} $

## 输出格式

標準出力に，すべての地区の人口が等しくなるような分割の方法は何通りあるかを $ 1 $ 行で出力せよ．

## 说明/提示

### 制約

- $ 1\ \leqq\ H\ \leqq\ 50 $．
- $ 1\ \leqq\ W\ \leqq\ 50 $．
- $ 1\ \leqq\ A_{i,j}\ \leqq\ 100\,000 $ ($ 1\ \leqq\ i\ \leqq\ H $，$ 1\ \leqq\ j\ \leqq\ W $)．
- 入力される値はすべて整数である．

### 小課題

1. ($ 12 $ 点) $ H\ =\ 1 $．
2. ($ 26 $ 点) $ H\ \leqq\ 6 $，$ W\ \leqq\ 6 $．
3. ($ 62 $ 点) 追加の制約はない．

### 採点に関する注意

すべての提出はジャッジシステム上で採点される．

提出されたソースコードは，小課題に対応するすべての採点用入力データについて正しい結果を返したとき，その小課題について正解と認められる．

各提出の得点は，提出されたソースコードについて正解と認められた小課題の得点の合計である．

この課題の得点は，**この課題に対するすべての提出の得点の最大値**である．

現在の得点は「提出結果」タブの「自分の得点状況」から確認できる．

### Sample Explanation 1

下図のように，すべての地区の人口が等しくなるような分割の方法は $ 3 $ 通りあるため，$ 3 $ を出力する． !\[\](https://img.atcoder.jp/joi2022-yo2/06a9e8ed339afaea93f821ed8c565fcc.png)!\[\](https://img.atcoder.jp/joi2022-yo2/b8efc3d99b3eac4547ecbb9fb3b472bc.png)!\[\](https://img.atcoder.jp/joi2022-yo2/ac72888b51d70c4d06dd781fb48be1c2.png) この入力例は小課題 $ 2,3 $ の制約を満たす．

### Sample Explanation 2

下図のように，すべての地区の人口が等しくなるような分割の方法は $ 2 $ 通りあるため，$ 2 $ を出力する． !\[\](https://img.atcoder.jp/joi2022-yo2/ed6964153cbff905065b97988fffa2cb.png)!\[\](https://img.atcoder.jp/joi2022-yo2/46cf313c22431f6656637cea0b20c3a1.png) この入力例はすべての小課題の制約を満たす．

### Sample Explanation 3

下図のように，すべての地区の人口が等しくなるような分割の方法は $ 2 $ 通りあるため，$ 2 $ を出力する． !\[\](https://img.atcoder.jp/joi2022-yo2/ff77472a076abb7a9b9792b0f187d872.png)!\[\](https://img.atcoder.jp/joi2022-yo2/33bdbb8492b8f02fef3d415993c99546.png) この入力例は小課題 $ 2,3 $ の制約を満たす．

### Sample Explanation 4

すべての地区の人口が等しくなるような分割の方法は存在しないため，$ 0 $ を出力する． この入力例はすべての小課題の制約を満たす．

## 样例 #1

### 输入

```
2 3
10 10 20
10 10 20
```

### 输出

```
3
```

## 样例 #2

### 输入

```
1 4
2 1 1 2
```

### 输出

```
2
```

## 样例 #3

### 输入

```
3 3
2 9 4
7 5 3
6 1 8
```

### 输出

```
2
```

## 样例 #4

### 输入

```
1 1
10000
```

### 输出

```
0
```


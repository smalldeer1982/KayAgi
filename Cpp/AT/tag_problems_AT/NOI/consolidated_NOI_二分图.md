---
title: "[ABC398G] Not Only Tree Game"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_abc398_g
tag: ['博弈论', '二分图']
---

# [ABC398G] Not Only Tree Game

## 题目描述

给定一个简单无向图 $G$，包含 $N$ 个顶点和 $M$ 条边，顶点编号为 $1$ 到 $N$，边编号为 $1$ 到 $M$。其中第 $i$ 条边连接顶点 $U_i$ 和 $V_i$。初始时，$G$ 中不包含奇闭路。

青木君和高桥君将使用这个图 $G$ 进行游戏。两人轮流执行以下操作（青木君为先手）：

- 选择满足 $1 \leq i < j \leq N$ 的整数对 $(i, j)$，且满足以下两个条件：
  - $G$ 当前不包含连接顶点 $i$ 和顶点 $j$ 的边；
  - 在 $G$ 中添加连接顶点 $i$ 和顶点 $j$ 的边后，$G$ 仍然不形成奇闭路；
  
  然后，将这条边添加到 $G$ 中。

无法进行操作的一方判负，另一方获胜。请判断在双方采取最优策略的情况下，哪一方会获胜。

**奇环的定义**：当且仅当顶点序列 $(v_0, v_1, \ldots, v_k)$ 满足以下所有条件时，称该序列为奇环：
- $k$ 是奇数；
- $v_0 = v_k$；
- 对于所有 $1 \leq i \leq k$，存在连接顶点 $v_{i-1}$ 和 $v_i$ 的边。

## 输入格式

输入通过标准输入给出，格式如下：

> $N$ $M$  
> $U_1$ $V_1$  
> $U_2$ $V_2$  
> $\vdots$  
> $U_M$ $V_M$

## 输出格式

如果先手青木君获胜，输出 `Aoki`；如果后手高桥君获胜，输出 `Takahashi`。


## 说明/提示

### 约束条件

- $1 \leq N \leq 2 \times 10^5$
- $0 \leq M \leq 2 \times 10^5$
- $1 \leq U_i < V_i \leq N$
- 给定的图 $G$ 不包含奇闭路；
- 给定的图 $G$ 不存在多重边；
- 输入均为整数。

### 样例解释 1

先手青木君选择 $(1, 4)$ 添加边后，后手高桥君无法进行任何操作，因此青木君获胜。

### 样例解释 2

无论青木君如何操作，高桥君都将获胜。

翻译由 DeepSeek R1 完成

## 样例 #1

### 输入

```
4 3
1 2
2 3
3 4
```

### 输出

```
Aoki
```

## 样例 #2

### 输入

```
4 2
1 2
3 4
```

### 输出

```
Takahashi
```

## 样例 #3

### 输入

```
9 5
2 9
2 3
4 6
5 7
1 8
```

### 输出

```
Aoki
```



---

---
title: "[AGC038F] Two Permutations"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc038_f
tag: ['网络流', '二分图', '最小割']
---

# [AGC038F] Two Permutations

## 题目描述

**【题意简述】**

给定两个 $0 \sim (N - 1)$ 的排列 $\{P_0, P_1, \ldots , P_{N - 1}\}$ 和 $\{Q_0, Q_1, \ldots , Q_{N - 1}\}$。

要求构造两个 $0 \sim (N - 1)$ 的排列 $\{A_0, A_1, \ldots , A_{N - 1}\}$ 和 $\{B_0, B_1, \ldots , B_{N - 1}\}$。

且必须满足条件：

- $A_i$ 要么等于 $i$，要么等于 $P_i$。
- $B_i$ 要么等于 $i$，要么等于 $Q_i$。

你需要最大化 $A_i \ne B_i$ 的下标 $i$ 的数量，输出这个最大值。

## 输入格式

第一行一个整数 $N$。  
第二行 $N$ 个整数 $P_0, P_1, \ldots , P_{N - 1}$。  
第三行 $N$ 个整数 $Q_0, Q_1, \ldots , Q_{N - 1}$。

## 输出格式

输出一个整数表示答案。

## 说明/提示

对于 $100\%$ 的数据，$1 \le N \le {10}^5$。

## 样例 #1

### 输入

```
4

2 1 3 0

0 2 3 1
```

### 输出

```
3
```

## 样例 #2

### 输入

```
10

0 4 5 3 7 8 2 1 9 6

3 8 5 6 4 0 2 1 7 9
```

### 输出

```
8
```

## 样例 #3

### 输入

```
32

22 31 30 29 7 17 16 3 14 9 19 11 2 5 10 1 25 18 15 24 20 0 12 21 27 4 26 28 8 6 23 13

22 3 2 7 17 9 16 4 14 8 19 26 28 5 10 1 25 18 15 13 11 0 12 23 21 20 29 24 27 6 30 31
```

### 输出

```
28
```



---


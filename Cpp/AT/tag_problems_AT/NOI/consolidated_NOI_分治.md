---
title: "[AGC044D] Guess the Password"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc044_d
tag: ['分治']
---

# [AGC044D] Guess the Password

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc044/tasks/agc044_d

**これは対話式の問題です。**

あなたの課題は、秘密のパスワード $ S $ を当てることです。 パスワードは長さ $ L $ 以下の空でない文字列であり、パスワードの各文字は英小文字 (a, b, ..., z)、英大文字 (A, B, ..., Z)、数字 (0, 1, ..., 9) のいずれかです。

秘密のパスワード $ S $ を当てるために、クエリを送ることができます。 クエリは、上述のパスワードの要件を満たす文字列 $ T $ からなり、送られたクエリに対しては $ S $ と $ T $ の編集距離 (考慮する操作は文字の削除、挿入、置換) が回答されます。 送ることができるクエリの数は $ Q $ 個までです。

**注記**: 編集距離 (考慮する操作は文字の削除、挿入、置換) の定義については、[Wikipedia 内のこちらのページ](https://en.wikipedia.org/w/index.php?title=Levenshtein_distance&oldid=954598393) を参照してください。

### Input &amp; Output Format

クエリを送るには、標準出力に以下のように出力せよ (末尾に改行を入れること)。

> ? $ T $

ここで、文字列 $ T $ はパスワードの要件を満たさなければならない。

クエリへの回答 $ ans $ は、標準入力から以下の形式で与えられる。

> $ ans $

秘密のパスワード $ S $ を特定したら、標準出力に以下のように出力せよ (末尾に改行を入れること)。

> ! $ S $

そして、すぐにプログラムを終了させよ。

## 说明/提示

### 制約

- $ L\ =\ 128 $
- $ Q\ =\ 850 $
- 秘密のパスワード $ S $ は、プログラムとジャッジの対話の開始前に選ばれる。

### 判定

- **出力のたびに標準出力を flush せよ。** これが守られない場合、ジャッジ結果が `TLE` となる可能性がある。
- 秘密のパスワード (とあなたが考えるもの) を出力したら、直ちにプログラムを終了させよ。これが守られない場合のジャッジ結果は未定義である。
- 不正な形式のクエリが送られた場合 (例: 送られた文字列がパスワードの要件を満たさない、出力の先頭に `?` がない)、プログラムが異常終了した場合、または $ Q $ 回を超えてクエリが送られた場合のジャッジ結果は未定義である (`WA` とは限らない)。

### 入出力例

以下の例において、秘密のパスワードは `Atcod3rIsGreat` です。

 Input Output  $ \texttt{?\ AtcoderIsBad} $ $ 5 $   $ \texttt{?\ AtcoderIsGreat} $ $ 1 $   $ \texttt{!\ Atcod3rIsGreat} $



---

---
title: "[ARC165F] Make Adjacent"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_arc165_f
tag: ['图论', 'cdq 分治', '图论建模']
---

# [ARC165F] Make Adjacent

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc165/tasks/arc165_f

長さ $ 2n $ の整数列 $ X=(X_1,X_2,\dots,X_{2n}) $ のうち、すべての $ i=1,2,\dots,n $ に対し $ X_{2i-1}=X_{2i} $ が成り立つものを **良い数列** と呼びます。

長さ $ 2N $ の整数列 $ A=(A_1,A_2,\dots,A_{2N}) $ があります。この整数列は各整数 $ i=1,2,\dots,N $ をちょうど $ 2 $ 個ずつ含みます。

$ A $ に対して「隣接する $ 2 $ 項の値を入れ替える」という操作を $ 0 $ 回以上行うことで、 $ A $ を **良い数列** にしたいです。

$ A $ を **良い数列** にするのに必要な最小の操作回数を $ K $ としたとき、 $ A $ に対し操作を $ K $ 回行うことで得られる **良い数列** のうち、辞書式順序で最小のものを求めてください。

  数列の辞書順とは？数列 $ S\ =\ (S_1,S_2,\ldots,S_{|S|}) $ が数列 $ T\ =\ (T_1,T_2,\ldots,T_{|T|}) $ より**辞書順で小さい**とは、下記の 1. と 2. のどちらかが成り立つことを言います。 ここで、$ |S|,\ |T| $ はそれぞれ $ S,\ T $ の長さを表します。

1. $ |S|\ \lt\ |T| $ かつ $ (S_1,S_2,\ldots,S_{|S|})\ =\ (T_1,T_2,\ldots,T_{|S|}) $。
2. ある整数 $ 1\ \leq\ i\ \leq\ \min\lbrace\ |S|,\ |T|\ \rbrace $ が存在して、下記の $ 2 $ つがともに成り立つ。 
  - $ (S_1,S_2,\ldots,S_{i-1})\ =\ (T_1,T_2,\ldots,T_{i-1}) $
  - $ S_i $ が $ T_i $ より（数として）小さい。

## 输入格式

入力は以下の形式で標準入力から与えられます。

> $ N $ $ A_1 $ $ A_2 $ $ \dots $ $ A_{2N} $

## 输出格式

$ A $ に対し操作を $ K $ 回行うことで得られる **良い数列** のうち、辞書式順序で最小のものを空白区切りで出力してください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ N $
- 各整数 $ i=1,2,\dots,N $ は $ A $ にちょうど $ 2 $ 個ずつ含まれる
- 入力される値はすべて整数
 
### Sample Explanation 1

例えば $ (3,2,1,2,3,1)\ \rightarrow\ (3,2,1,3,2,1)\ \rightarrow\ (3,2,3,1,2,1)\ \rightarrow\ (3,3,2,1,2,1)\ \rightarrow\ (3,3,2,2,1,1) $ というように $ 4 $ 回の操作で $ A $ を \*\*良い数列\*\* にすることができ、これが最小の操作回数です。 $ 4 $ 回の操作では他に $ A=(2,2,3,3,1,1) $ とすることもできるので、答えは $ (2,2,3,3,1,1) $ となります。

## 样例 #1

### 输入

```
3

3 2 1 2 3 1
```

### 输出

```
2 2 3 3 1 1
```

## 样例 #2

### 输入

```
3

1 1 2 2 3 3
```

### 输出

```
1 1 2 2 3 3
```

## 样例 #3

### 输入

```
15

15 12 11 10 5 11 13 2 6 14 3 6 5 14 10 15 1 2 13 9 7 4 9 1 3 8 12 4 8 7
```

### 输出

```
11 11 5 5 6 6 10 10 14 14 15 15 2 2 12 12 13 13 1 1 3 3 9 9 4 4 7 7 8 8
```



---

---
title: "[ARC167F] Tree Tree Tree"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_arc167_f
tag: ['多项式', '分治', '树形 DP', '组合数学', '快速数论变换 NTT']
---

# [ARC167F] Tree Tree Tree

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc167/tasks/arc167_f

$ 2\leq\ K\leq\ N $ を満たす整数 $ N,K $ が与えられます。

> **問題 potato**
> 
> $ 1 $ から $ N $ までの番号がついた頂点数 $ N $ の重み付き根付き木があります。頂点 $ 1 $ が根です。
> 
> $ 2\leq\ i\leq\ N $ に対して、頂点 $ i $ の親は $ p_{i}\;(1\leq\ p_{i}\ <\ i) $で、 $ i $ と $ p_{i} $ を結ぶ辺の重みは $ q_{i-1} $ です。
> 
> ただし、$ q=(q_{1},q_{2},\dots,q_{N-1}) $ は $ (1,2,\dots,N-1) $ の順列です。
> 
> ここで $ cost(u,v) $ を頂点 $ u,v $ を結ぶ単純パスに含まれる辺の重みの最大値とします。
> 
> $ \sum_{u=1}^{N}\ \sum_{v=u+1}^{N}\ cost(u,v) $ を求めてください。

- - - - - -

> **問題 tomato**
> 
> $ 1\leq\ a\lt\ K $ を満たす整数 $ a $ が与えられます。「問題 potato」 の $ p,q $ として $ p_{K}=a $ を満たすものは $ \frac{((N-1)!)^{2}}{K-1} $ 通り考えられますが、その全てに対する「問題 potato」の答えの和を $ 998244353 $ で割ったあまりを求めてください。

$ a=1,\dots,K-1 $ について、「問題 tomato」の答えを求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられます。

> $ N $ $ K $

## 输出格式

$ K-1 $ 行出力してください。$ i $ 行目には $ a=i $ としたときの「問題 tomato」の答えを出力してください。

## 说明/提示

### 制約

- $ 2\leq\ K\leq\ N\leq\ 10^{5} $
- 入力は全て整数

## 样例 #1

### 输入

```
4 4
```

### 输出

```
170

170

172
```

## 样例 #2

### 输入

```
3 2
```

### 输出

```
20
```

## 样例 #3

### 输入

```
16 7
```

### 输出

```
457991130

457991130

65525944

418314090

644126049

676086428
```



---


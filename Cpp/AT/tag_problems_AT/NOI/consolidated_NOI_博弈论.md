---
title: "[ABC398G] Not Only Tree Game"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_abc398_g
tag: ['博弈论', '二分图']
---

# [ABC398G] Not Only Tree Game

## 题目描述

给定一个简单无向图 $G$，包含 $N$ 个顶点和 $M$ 条边，顶点编号为 $1$ 到 $N$，边编号为 $1$ 到 $M$。其中第 $i$ 条边连接顶点 $U_i$ 和 $V_i$。初始时，$G$ 中不包含奇闭路。

青木君和高桥君将使用这个图 $G$ 进行游戏。两人轮流执行以下操作（青木君为先手）：

- 选择满足 $1 \leq i < j \leq N$ 的整数对 $(i, j)$，且满足以下两个条件：
  - $G$ 当前不包含连接顶点 $i$ 和顶点 $j$ 的边；
  - 在 $G$ 中添加连接顶点 $i$ 和顶点 $j$ 的边后，$G$ 仍然不形成奇闭路；
  
  然后，将这条边添加到 $G$ 中。

无法进行操作的一方判负，另一方获胜。请判断在双方采取最优策略的情况下，哪一方会获胜。

**奇环的定义**：当且仅当顶点序列 $(v_0, v_1, \ldots, v_k)$ 满足以下所有条件时，称该序列为奇环：
- $k$ 是奇数；
- $v_0 = v_k$；
- 对于所有 $1 \leq i \leq k$，存在连接顶点 $v_{i-1}$ 和 $v_i$ 的边。

## 输入格式

输入通过标准输入给出，格式如下：

> $N$ $M$  
> $U_1$ $V_1$  
> $U_2$ $V_2$  
> $\vdots$  
> $U_M$ $V_M$

## 输出格式

如果先手青木君获胜，输出 `Aoki`；如果后手高桥君获胜，输出 `Takahashi`。


## 说明/提示

### 约束条件

- $1 \leq N \leq 2 \times 10^5$
- $0 \leq M \leq 2 \times 10^5$
- $1 \leq U_i < V_i \leq N$
- 给定的图 $G$ 不包含奇闭路；
- 给定的图 $G$ 不存在多重边；
- 输入均为整数。

### 样例解释 1

先手青木君选择 $(1, 4)$ 添加边后，后手高桥君无法进行任何操作，因此青木君获胜。

### 样例解释 2

无论青木君如何操作，高桥君都将获胜。

翻译由 DeepSeek R1 完成

## 样例 #1

### 输入

```
4 3
1 2
2 3
3 4
```

### 输出

```
Aoki
```

## 样例 #2

### 输入

```
4 2
1 2
3 4
```

### 输出

```
Takahashi
```

## 样例 #3

### 输入

```
9 5
2 9
2 3
4 6
5 7
1 8
```

### 输出

```
Aoki
```



---

---
title: "[AGC048D] Pocky Game"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc048_d
tag: ['动态规划 DP', '博弈论', '区间 DP']
---

# [AGC048D] Pocky Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc048/tasks/agc048_d

$ N $ 個の山が横一列に並んでいます． 左から $ i $ 番目の山には $ A_i $ 個の石があります．

FirstLeft くんと SecondRight くんがゲームをします． FirstLeft くんから始めて，二人は交互に手番をプレイします． それぞれの手番では，以下の操作を行います．

- FirstLeft くんの手番: FirstLeft くんは，石が $ 1 $ 個以上ある山の中で最も**左**にある山から，$ 1 $ 個以上の石を取り除く．
- SecondRight くんの手番: SecondRight くんは，石が $ 1 $ 個以上ある山の中で最も**右**にある山から，$ 1 $ 個以上の石を取り除く．

自分の手番で操作できなくなったプレイヤーの負けです． 二人が最適に行動する時，どちらが勝利するか判定してください．

$ 1 $ つの入力ファイルにつき，$ T $ 個のテストケースを解いてください．

## 输入格式

入力は以下の形式で標準入力から与えられる． 入力の $ 1 $ 行目は以下のとおりである．

> $ T $

そして，$ T $ 個のテストケースが続く． これらはそれぞれ以下の形式で与えられる．

> $ N $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $

## 输出格式

各テストケースについて，FirstLeft くんが勝つ場合は `First`，SecondRight くんが勝つ場合は `Second` と出力せよ． 各テストケースごとに改行せよ．

## 说明/提示

### 制約

- $ 1\ \leq\ T\ \leq\ 100 $
- $ 1\ \leq\ N\ \leq\ 100 $
- $ 1\ \leq\ A_i\ \leq\ 10^9 $

### Sample Explanation 1

例えば，$ 3 $ 個目のゲームにおいて，次のようなシナリオが考えられます． - FirstLeft くんが一番左の山から石を $ 2 $ 個とる．山にある石の個数は $ (0,1,2) $ になる． - SecondRight くんが一番右の山から石を $ 1 $ 個とる．山にある石の個数は $ (0,1,1) $ になる． - FirstLeft くんが真ん中の山から石を $ 1 $ 個とる．山にある石の個数は $ (0,0,1) $ になる． - SecondRight くんが一番右の山から石を $ 1 $ 個とる．山にある石の個数は $ (0,0,0) $ になる． - FirstLeft くんは操作を行うことができず，敗北する．

## 样例 #1

### 输入

```
3

1

10

2

3 2

3

2 1 2
```

### 输出

```
First

First

Second
```



---

---
title: "[AGC056D] Subset Sum Game"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc056_d
tag: ['数学', '贪心', '博弈论']
---

# [AGC056D] Subset Sum Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc056/tasks/agc056_d

黒板に $ N $ 個の整数が書かれており，そのうち $ i $ 番目の整数は $ A_i $ です． なお，$ N $ は偶数です． また，整数 $ L,R $ が与えられます．

Alice と Bob がゲームをします． 二人は Alice からはじめて交互に手番をプレイします． 各手番では，プレイヤーは黒板に書かれている数を一つ選んで消します．

$ N $ ターン後にゲームが終了します． ここで，Alice が消した整数の総和を $ s $ とします． $ L\ \leq\ s\ \leq\ R $ であれば Alice の勝利，そうでなければ Bob の勝利です． 両者が最適に行動した時，どちらが勝つか求めてください．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ L $ $ R $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $

## 输出格式

Alice が勝つ場合は `Alice`，Bob が勝つ場合は `Bob` と出力せよ．

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 5000 $
- $ N $ は偶数
- $ 1\ \leq\ A_i\ \leq\ 10^9 $
- $ 0\ \leq\ L\ \leq\ R\ \leq\ \sum_{1\ \leq\ i\ \leq\ N}\ A_i $
- 入力される値はすべて整数である

### Sample Explanation 1

このゲームでは Alice が必ず勝ちます． ゲームの進行の一例を以下に示します． - Alice が $ 1 $ を消す． - Bob が $ 4 $ を消す． - Alice が $ 5 $ を消す． - Bob が $ 3 $ を消す． この時，Alice が消した整数の総和は $ 6 $ であり，$ L\ \leq\ 6\ \leq\ R $ なので，Alice の勝利です．

## 样例 #1

### 输入

```
4 5 6

3 1 4 5
```

### 输出

```
Alice
```

## 样例 #2

### 输入

```
2 2 3

4 1
```

### 输出

```
Bob
```

## 样例 #3

### 输入

```
30 655 688

42 95 9 13 91 27 99 56 64 15 3 11 5 16 85 3 62 100 64 79 1 70 8 69 70 28 78 4 33 12
```

### 输出

```
Bob
```

## 样例 #4

### 输入

```
30 792 826

81 60 86 57 5 20 26 13 39 64 89 58 43 98 50 79 58 21 27 68 46 47 45 85 88 5 82 90 74 57
```

### 输出

```
Alice
```



---

---
title: "[ARC163E] Chmin XOR Game"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_arc163_e
tag: ['博弈论', 'Ad-hoc']
---

# [ARC163E] Chmin XOR Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc163/tasks/arc163_e

長さ $ N $ の非負整数列 $ A=(A_1,A_2,\dots,A_N) $ を用いて Alice と Bob はゲームをします。

Alice から以下の操作を交互に行います。先に操作が出来なくなった方が負けです。

- $ A_i\ >\ A_i\ \oplus\ X $ を満たす整数 $ i $ が存在するような非負整数 $ X $ を選ぶ。
- $ 1\ \le\ i\ \le\ N $ に対して $ A_i $ を $ \min(A_i,A_i\ \oplus\ X) $ で置き換える。
 
両者が勝つために最善な行動をしたとき、勝つのがどちらか判定してください。

ただしここで、$ \oplus $ はビットごとの排他的論理和を表します。

$ T $ 個のテストケースが与えられるので、それぞれについて答えを求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ T $ $ \mathrm{case}_1 $ $ \mathrm{case}_2 $ $ \vdots $ $ \mathrm{case}_T $

ここで、$ \mathrm{case}_i $ とは $ i $ 個目のテストケースである。各テストケースは以下の形式で与えられる。

> $ N $ $ A_1 $ $ A_2 $ $ \dots $ $ A_N $

## 输出格式

$ T $ 行出力せよ。

$ i(1\ \le\ i\ \le\ T) $ 行目には、$ i $ 個目のテストケースにおいて Alice が勝つならば `Alice`、Bob が勝つならば `Bob` を出力せよ。

## 说明/提示

### 制約

- $ 1\ \le\ T\ \le\ 100 $
- $ 1\ \le\ N\ \le\ 100 $
- $ 0\ \le\ A_i\ \le\ 10^9 $
 
### Sample Explanation 1

$ 1 $ 個目のテストケースは、あり得るゲームの進行として以下のようなものが考えられます。 - Alice が $ X=3 $ を選ぶ。$ i=1 $ において $ 3\ >\ 3\ \oplus\ 3(=0) $ であるためこの選択は有効である。 - $ A=(3,1) $ から $ A=(0,1) $ となる。 - Bob が $ X=1 $ を選ぶ。$ i=2 $ において $ 1\ >\ 1\ \oplus\ 1(=0) $ であるためこの選択は有効である。 - $ A=(0,1) $ から $ A=(0,0) $ となる。 - Alice が選べる $ X $ が存在しないため、ゲームを終了する。 この場合 Bob が勝ちます。 $ 2 $ 個目のテストケースは、あり得るゲームの進行として以下のようなものが考えられます。 - Alice が $ X=1 $ を選ぶ。$ i=1 $ において $ 1\ >\ 1\ \oplus\ 1(=0) $ であるためこの選択は有効である。 - $ A=(1,1,1,1,1) $ から $ A=(0,0,0,0,0) $ となる。 - Bob が選べる $ X $ が存在しないため、ゲームを終了する。 この場合 Alice が勝ちます。

## 样例 #1

### 输入

```
5

2

3 1

5

1 1 1 1 1

4

0 0 0 0

4

8 1 6 4

5

3 8 7 12 15
```

### 输出

```
Bob

Alice

Bob

Bob

Alice
```



---

---
title: "[ARC164F] Subtree Reversi"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_arc164_f
tag: ['贪心', '博弈论']
---

# [ARC164F] Subtree Reversi

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc164/tasks/arc164_f

頂点に $ 1 $ から $ N $ までの番号がついており、頂点 $ 1 $ を根とする $ N $ 頂点の根付き木が与えられます。 この木の頂点 $ i $ の親は頂点 $ p_i $ です（$ 2\leq\ i\leq\ N $）。

Alice と Bob は、この木を使って、次のようなゲームを行います。

- Alice が先手、Bob が後手で、表裏を白と黒に塗り分けた石を使い、交互に $ 1 $ つずつ木の頂点に石を置いていく。この際、Alice は白い面を上に、Bob は黒い面を上にして置く。
- 各手番で石を置いてよいのは、その頂点自身には石が置かれておらず、子孫である頂点には全て石が置かれている頂点のみである。
- 石を置くとき、置いた頂点の子孫にある石を全て裏返す（置いた石自体は裏返さない）。
 
全ての頂点に石が置かれるとゲーム終了となり、この時点で白い面が上になっている石の数を Alice の得点とします。

Alice はできるだけ大きな得点を得ようとし、Bob は Alice の得点をできるだけ小さくしようとします。両者が最善の手順を取ったとき、Alice の得点はいくらでしょうか。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ p_2 $ $ p_3 $ $ \ldots $ $ p_N $

## 输出格式

答えを整数で出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ 1\ \leq\ p_i\ <\ i $ $ (2\leq\ i\ \leq\ N) $
- 入力される値はすべて整数である
- 与えられるグラフは木である
 
### Sample Explanation 1

与えられた木では、初めに石を置くことのできる頂点は $ 3,4 $ のみです。ここから、例えば次のような進行が考えられます。 - Alice が頂点 $ 4 $ に白い面を上にして石を置く。この操作の後、頂点 $ 2 $ は子孫に全て石が置かれたので、石が置けるようになる。 - Bob が頂点 $ 2 $ に黒い面を上にして石を置き、頂点 $ 4 $ にある石を裏返して黒い面を上にする。 - Alice が頂点 $ 3 $ に白い面を上にして石を置く。 - Bob が頂点 $ 1 $ に黒い面を上にして石を置き、頂点 $ 2,3,4 $ にある石を全て裏返す。 この場合、ゲーム終了時に頂点 $ 1,2,3,4 $ にある石はそれぞれ黒、白、黒、白が上になっています。実は、この進行は双方の最善手の一例であり、答えは $ 2 $ となります。

## 样例 #1

### 输入

```
4

1 1 2
```

### 输出

```
2
```

## 样例 #2

### 输入

```
7

1 1 2 4 4 4
```

### 输出

```
5
```



---

---
title: "瓜二つ"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_ttpc2019_n
tag: ['博弈论']
---

# 瓜二つ

## 题目描述

有两个外貌相同但性格迥异的双胞胎 Yuri 和 Muri。 例如，Yuri 特别喜欢有理数，但 Muri 特别喜欢无理数。 现在，他们将使用 $N$ 个杯子玩以下游戏。 

- 最初，每个杯子都有 $W_i$ 升水，同样固定地设定两个数字 $l_i, u_i\ (l_i<u_i)$。
- 执行每个回合的参赛者要么是 Yuri，要么是 Muri。如果有一方无法执行有效操作，另一方获胜。

有效操作如下：

1. 选择一个整数$k(1\le k\le N)$。设杯子$k$中剩余的水为$R_k$升。
2. 从$[l_k,u_k]$范围内选择整数$x$且满足$x\le R_k$，然后饮用杯子$k$中恰好$x$升的水。其中 Yuri 必须选择有理数，Muri 必须选择无理数。 （如果找不到操作满足条件的$k$和$x$，请将此操作视为无法执行）

将 $W_i$, $l_i$, $u_i$ 的值全部设为整数、还需注意到，Muri 可以选择自己的回合。 判断两人对抗时谁将获胜。

## 输入格式

从标准输入读取输入。 格式如下：

> $N$ $W_1$ $l_1$ $u_1$ $...$ $W_N$ $l_N$ $u_N$

## 输出格式

当 Yuri 获胜时，请输出 `Yuri`，当 Muri 获胜时，请输出 `Muri`。

## 样例 #1

### 样例输入 #1

```
2
8 2 5
7 5 6
```

### 样例输出 #1

```
Muri
```

## 样例 #2

### 样例输入 #2

```
1
1 1 2
```

### 样例输出 #2

```
Yuri
```

## 样例 #3

### 样例输入 #3

```
5
12 1 100
11 2 8
1 5 7
7 5 7
29 4 5
```

### 样例输出 #3

```
Muri
```

## 说明/提示

### 限制

- 所有输入均为整数
- $1 \le N \le 2 \times 10^5$
- $1 \le W_i \le 10^9$
- $1 \le l_i < u_i \le 10^9$


Muri 的一种策略如下：

- 由 Muri 选择先手，执行 $i=1$，$x = 5-\ \pi\ /4$ 的操作（杯子 1 仍留下 $3+\ \pi\ /4$ 升的水）。
- 随后，如果 Yuri 选择 $i=1$，$x=2$ 操作，Muri 将执行 $i=2$，$x=5+\ \pi\ /4$ 操作，如果 Yuri 选择 $i=2$，$x=11/2$ 操作，Muri 将执行 $i=1$，$x=2+\ \pi\ /4$ 操作，以便在该操作的下一个回合中 Yuri 无法执行操作。


在遵循限制条件的情况下，$1 \le x \le 2$ 并且 $ x \leq 1$ 时的 $x$ 只有 $x=1$，Yuri 能够执行该操作但 Muri 不能。请注意，Yuri 还可以选择整数作为 $x$。

## 样例 #1

### 输入

```
2

8 2 5

7 5 6
```

### 输出

```
Muri
```

## 样例 #2

### 输入

```
1

1 1 2
```

### 输出

```
Yuri
```

## 样例 #3

### 输入

```
5

12 1 100

11 2 8

1 5 7

7 5 7

29 4 5
```

### 输出

```
Muri
```



---


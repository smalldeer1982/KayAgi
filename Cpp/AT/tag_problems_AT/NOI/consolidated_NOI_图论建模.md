---
title: "[AGC035E] Develop"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc035_e
tag: ['动态规划 DP', '图论', '图论建模']
---

# [AGC035E] Develop

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc035/tasks/agc035_e

黒板に $ -10^{18} $ から $ 10^{18} $ までの整数が $ 1 $ 個ずつ書かれています。高橋君は、以下の一連の操作を $ 0 $ 回以上好きなだけ繰り返します。

- 黒板に書かれている整数のうち $ 1 $ 以上 $ N $ 以下のものをひとつ選ぶ。選んだ整数を $ x $ とし、$ x $ を黒板から消す。
- 黒板に $ x-2 $ が書かれていないなら、$ x-2 $ を書き加える。
- 黒板に $ x+K $ が書かれていないなら、$ x+K $ を書き加える。

何回かの操作後、黒板に書かれている数の集合としてありうるものの個数を $ M $ で割った余りを求めてください。 ただし、$ 2 $ つの集合が異なるとは、その片方だけに現れるような整数が存在することを指します。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ K $ $ M $

## 输出格式

何回かの操作後、黒板に書かれている数の集合としてありうるものの個数を $ M $ で割った余りを出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ K\leq\ N\ \leq\ 150 $
- $ 10^8\leq\ M\leq\ 10^9 $
- $ N,K,M $ は整数である

### Sample Explanation 1

$ 0 $ 以下または $ 4 $ 以上の整数すべてと、$ 1,2,3 $ のうちの $ 1 $ つ以上を含むような集合すべてが条件を満たし、これは $ 7 $ 通りあります。

## 样例 #1

### 输入

```
3 1 998244353
```

### 输出

```
7
```

## 样例 #2

### 输入

```
6 3 998244353
```

### 输出

```
61
```

## 样例 #3

### 输入

```
9 4 702443618
```

### 输出

```
312
```

## 样例 #4

### 输入

```
17 7 208992811
```

### 输出

```
128832
```

## 样例 #5

### 输入

```
123 45 678901234
```

### 输出

```
256109226
```



---

---
title: "[ARC165F] Make Adjacent"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_arc165_f
tag: ['图论', 'cdq 分治', '图论建模']
---

# [ARC165F] Make Adjacent

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc165/tasks/arc165_f

長さ $ 2n $ の整数列 $ X=(X_1,X_2,\dots,X_{2n}) $ のうち、すべての $ i=1,2,\dots,n $ に対し $ X_{2i-1}=X_{2i} $ が成り立つものを **良い数列** と呼びます。

長さ $ 2N $ の整数列 $ A=(A_1,A_2,\dots,A_{2N}) $ があります。この整数列は各整数 $ i=1,2,\dots,N $ をちょうど $ 2 $ 個ずつ含みます。

$ A $ に対して「隣接する $ 2 $ 項の値を入れ替える」という操作を $ 0 $ 回以上行うことで、 $ A $ を **良い数列** にしたいです。

$ A $ を **良い数列** にするのに必要な最小の操作回数を $ K $ としたとき、 $ A $ に対し操作を $ K $ 回行うことで得られる **良い数列** のうち、辞書式順序で最小のものを求めてください。

  数列の辞書順とは？数列 $ S\ =\ (S_1,S_2,\ldots,S_{|S|}) $ が数列 $ T\ =\ (T_1,T_2,\ldots,T_{|T|}) $ より**辞書順で小さい**とは、下記の 1. と 2. のどちらかが成り立つことを言います。 ここで、$ |S|,\ |T| $ はそれぞれ $ S,\ T $ の長さを表します。

1. $ |S|\ \lt\ |T| $ かつ $ (S_1,S_2,\ldots,S_{|S|})\ =\ (T_1,T_2,\ldots,T_{|S|}) $。
2. ある整数 $ 1\ \leq\ i\ \leq\ \min\lbrace\ |S|,\ |T|\ \rbrace $ が存在して、下記の $ 2 $ つがともに成り立つ。 
  - $ (S_1,S_2,\ldots,S_{i-1})\ =\ (T_1,T_2,\ldots,T_{i-1}) $
  - $ S_i $ が $ T_i $ より（数として）小さい。

## 输入格式

入力は以下の形式で標準入力から与えられます。

> $ N $ $ A_1 $ $ A_2 $ $ \dots $ $ A_{2N} $

## 输出格式

$ A $ に対し操作を $ K $ 回行うことで得られる **良い数列** のうち、辞書式順序で最小のものを空白区切りで出力してください。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ 1\ \leq\ A_i\ \leq\ N $
- 各整数 $ i=1,2,\dots,N $ は $ A $ にちょうど $ 2 $ 個ずつ含まれる
- 入力される値はすべて整数
 
### Sample Explanation 1

例えば $ (3,2,1,2,3,1)\ \rightarrow\ (3,2,1,3,2,1)\ \rightarrow\ (3,2,3,1,2,1)\ \rightarrow\ (3,3,2,1,2,1)\ \rightarrow\ (3,3,2,2,1,1) $ というように $ 4 $ 回の操作で $ A $ を \*\*良い数列\*\* にすることができ、これが最小の操作回数です。 $ 4 $ 回の操作では他に $ A=(2,2,3,3,1,1) $ とすることもできるので、答えは $ (2,2,3,3,1,1) $ となります。

## 样例 #1

### 输入

```
3

3 2 1 2 3 1
```

### 输出

```
2 2 3 3 1 1
```

## 样例 #2

### 输入

```
3

1 1 2 2 3 3
```

### 输出

```
1 1 2 2 3 3
```

## 样例 #3

### 输入

```
15

15 12 11 10 5 11 13 2 6 14 3 6 5 14 10 15 1 2 13 9 7 4 9 1 3 8 12 4 8 7
```

### 输出

```
11 11 5 5 6 6 10 10 14 14 15 15 2 2 12 12 13 13 1 1 3 3 9 9 4 4 7 7 8 8
```



---


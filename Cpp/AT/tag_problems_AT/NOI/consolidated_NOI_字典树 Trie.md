---
title: "[AGC057C] Increment or Xor"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc057_c
tag: ['字典树 Trie']
---

# [AGC057C] Increment or Xor

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc057/tasks/agc057_c

正整数 $ N $ および、$ 2^N $ 項からなる数列 $ A\ =\ (A_0,\ A_1,\ \ldots,\ A_{2^N-1}) $ が与えられます。ここで各 $ A_i $ は $ 0 $ 以上 $ 2^N-1 $ 以下の整数であり、$ i\neq\ j $ ならば $ A_i\neq\ A_j $ が成り立ちます。

あなたは数列 $ A $ に対して、次の $ 2 $ 種類の操作を行うことができます：

- 操作 $ + $：すべての $ i $ に対して、$ A_i $ を $ (A_i\ +\ 1)\ \bmod\ 2^N $ に変更する。
- 操作 $ \oplus $：$ 0 $ 以上 $ 2^N-1 $ 以下の整数 $ x $ を選ぶ。すべての $ i $ に対して $ A_i $ を $ A_i\oplus\ x $ に変更する。

ただしここで、$ \oplus $ はビット単位 $ \mathrm{XOR} $ 演算を表します。

  ビット単位 $ \mathrm{XOR} $ 演算とは  非負整数 $ A,\ B $ のビット単位 $ \mathrm{XOR} $ 、$ A\ \oplus\ B $ は、以下のように定義されます。

- $ A\ \oplus\ B $ を二進表記した際の $ 2^k $ ($ k\ \geq\ 0 $) の位の数は、$ A,\ B $ を二進表記した際の $ 2^k $ の位の数のうち一方のみが $ 1 $ であれば $ 1 $、そうでなければ $ 0 $ である。
 
 例えば、$ 3\ \oplus\ 5\ =\ 6 $ となります (二進表記すると: $ 011\ \oplus\ 101\ =\ 110 $)。   
 あなたの目的は、すべての $ i $ に対して $ A_i\ =\ i $ が成り立つようにすることです。目的を達成することが可能であるかを判定してください。本問題の制約下では、目的を達成することが可能な場合には、操作回数を $ 10^6 $ 回以下にできることが証明できます。そのような操作列を出力してください。

## 输入格式

入力は以下の形式で標準入力から与えられます。

> $ N $ $ A_0 $ $ A_1 $ $ \ldots $ $ A_{2^N\ -\ 1} $

## 输出格式

すべての $ i $ に対して $ A_i\ =\ i $ が成り立つようにすることが可能ならば `Yes`、そうでなければ `No` を出力してください。

`Yes` の場合には、さらに目的を達成するための操作列を次の形式で出力してください。

> $ K $ $ x_1 $ $ x_2 $ $ \ldots $ $ x_K $

ここで $ K $ は操作の回数を表す非負整数で、$ 0\leq\ K\leq\ 10^6 $ を満たす必要があります。また、$ x_i $ は $ i $ 回目の操作を表す整数で、

- $ i $ 回目に操作 $ + $ を行う場合には、$ x_i=-1 $
- $ i $ 回目に操作 $ \oplus $ を行う場合には、$ x_i $ はその操作で選ぶ整数 $ x $

と定めてください。

答が複数考えられる場合には、そのどれを出力しても正解となります。

## 说明/提示

### 制約

- $ 1\leq\ N\leq\ 18 $
- $ 0\leq\ A_i\ \leq\ 2^N\ -\ 1 $
- $ i\neq\ j $ ならば $ A_i\neq\ A_j $

### Sample Explanation 1

出力の操作列によって、数列 $ A $ は次のように変化します。 - 初期状態：$ A\ =\ (5,0,3,6,1,4,7,2) $ - 操作 $ + $：$ A\ =\ (6,1,4,7,2,5,0,3) $ - 操作 $ \oplus $ ($ x\ =\ 6 $)：$ A\ =\ (0,7,2,1,4,3,6,5) $ - 操作 $ + $：$ A\ =\ (1,0,3,2,5,4,7,6) $ - 操作 $ \oplus $ ($ x\ =\ 1 $)：$ A\ =\ (0,1,2,3,4,5,6,7) $

### Sample Explanation 2

どのように操作を行っても、目的を達成することはできません。

### Sample Explanation 3

$ 0 $ 回の操作により目的が達成できます。なお、空行の出力の有無は、ジャッジ結果に影響しません。

## 样例 #1

### 输入

```
3

5 0 3 6 1 4 7 2
```

### 输出

```
Yes

4

-1 6 -1 1
```

## 样例 #2

### 输入

```
3

2 5 4 3 6 1 0 7
```

### 输出

```
No
```

## 样例 #3

### 输入

```
3

0 1 2 3 4 5 6 7
```

### 输出

```
Yes

0
```



---

---
title: "[AGC064C] Erase and Divide Game"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc064_c
tag: ['动态规划 DP', '字典树 Trie']
---

# [AGC064C] Erase and Divide Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc064/tasks/agc064_c

高橋君と青木君が以下のようなゲームをします。

1. $ i=1,2,\ldots,N $ の順に次の操作をする。
  - $ l_i $ 以上 $ r_i $ 以下の整数を $ 1 $ 個ずつ黒板に書く。(ここで、$ l_i,r_i $ は入力より与えられる非負整数である)
2. 黒板に整数が $ 1 $ 個以上書かれている間、高橋君を先手として交互に次の操作をする。
  - 以下の $ 2 $ 種類の操作のうちちょうど一方を選び、実行する。
      - 黒板に書かれている偶数をすべて削除し、残った整数をそれぞれ $ 2 $ で割って小数点以下を切り捨てた値に書き換える。
      - 黒板に書かれている奇数をすべて削除し、残った整数をそれぞれ $ 2 $ で割った値に書き換える。
3. 黒板に整数が $ 1 $ 個も書かれていない状態になった場合、最後に操作をした人を勝者としてゲームを終了する。
 
高橋君と青木君が最適な行動を取った場合、ゲームは有限回の操作で終了することが示せます。この時の勝者を求めてください。

$ T $ ケースについて上記問題を解いてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。ここで、$ \mathrm{test}_i $ は $ i $ 番目のテストケースを表す。

> $ T $ $ \mathrm{test}_1 $ $ \vdots $ $ \mathrm{test}_T $

各テストケースは以下の形式で与えられる。

> $ N $ $ l_1 $ $ r_1 $ $ \vdots $ $ l_N $ $ r_N $

## 输出格式

$ T $ 行出力せよ。$ i $ 行目には、$ i $ 番目のテストケースにおいて勝者が高橋君ならば `Takahashi` と、青木君ならば `Aoki` と出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ T\ \leq\ 10^4 $
- $ 1\ \leq\ N\ \leq\ 10^4 $
- $ 0\ \leq\ l_i\ \leq\ r_i\ \leq\ 10^{18} $
- $ r_i\ \lt\ l_{i+1} $
- $ 1 $ つの入力に含まれるテストケースについて、$ N $ の総和は $ 10^4 $ 以下
- 入力はすべて整数
 
### Sample Explanation 1

$ 1 $ 番目のテストケースに対するゲームの流れの例を以下に示します。 - 黒板に $ 1,2,5,6,7 $ が $ 1 $ 個ずつ書かれる。 - 高橋君が奇数を削除する方の操作をする。黒板から $ 1,5,7 $ が削除され、残った整数 $ 2,6 $ がそれぞれ $ 2 $ で割った値の $ 1,3 $ に書き換えられる。 - 青木君が奇数を削除する方の操作をする。黒板から $ 1,3 $ が削除され、黒板に整数が $ 1 $ 個も書かれていない状態になったため最後に操作をした青木君を勝者としてゲームが終了する。

## 样例 #1

### 输入

```
3

2

1 2

5 7

1

0 100

10

1312150450968413 28316250877914571

74859962623690078 84324828731963974

148049062628894320 252509054433933439

269587449430302150 335408917861648766

349993004923078531 354979173822804781

522842184971407769 578223540024979436

585335723211047194 615812229161735895

645762258982631926 760713016476190622

779547116602436424 819875141880895723

822981260158260519 919845426262703496
```

### 输出

```
Aoki

Aoki

Takahashi
```



---


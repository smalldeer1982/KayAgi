---
title: "[AGC045E] Fragile Balls"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc045_e
tag: ['图论', '强连通分量']
---

# [AGC045E] Fragile Balls

## 题目描述

我们有$n$个盒子和$m$个球(编号都从$1$开始)，目前，球$i$在$A_i$盒子中。

接下来，对于每次操作，你可以执行以下几个操作中的一个：

- 选择一个装有两个或更多球的盒子，从中拿出一个球，把它放入另一个盒子当中
- 由于球都是易碎的，因此，你总共不能移动球$i$超过$C_i$次。

你现在的目标是对于每个$i$，将球$i$放入盒子$B_i$中。请确定这个目标是否可以实现，如果可以，则输出最少需要操作的次数，如果不可以，则输出-1。

## 输入格式

第一行输入两个数字$n,m$，表示盒子和球的数量。

接下来$m$行，每行三个数字$A_i,B_i,C_i$，表示第$i$个球最初始的位置，需要到达的目标位置，能够最多移动的次数。

## 输出格式

如果有解，则输出最少需要操作的次数，如果无解，则输出-1.

## 样例 #1

### 输入

```
3 3

1 2 1

2 1 1

1 3 2
```

### 输出

```
3
```

## 样例 #2

### 输入

```
2 2

1 2 1

2 1 1
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
5 5

1 2 1

2 1 1

1 3 2

4 5 1

5 4 1
```

### 输出

```
6
```

## 样例 #4

### 输入

```
1 1

1 1 1
```

### 输出

```
0
```



---

---
title: "[AGC046F] Forbidden Tournament"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_agc046_f
tag: ['动态规划 DP', '强连通分量']
---

# [AGC046F] Forbidden Tournament

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc046/tasks/agc046_f

整数 $ N,K $ と素数 $ P $ が与えられます。$ N $ 頂点の有向グラフ $ G $ であって、以下を全て満たすものの個数を $ P $ で割った余りを求めてください。ただし、頂点どうしは互いに区別します。

- $ G $ はトーナメントである。すなわち、$ G $ に多重辺や自己ループはなく、$ G $ のどの $ 2 $ 点 $ u,v $ に対しても、$ u\to\ v $ 辺または $ v\to\ u $ 辺のうちちょうど片方が存在する。
- $ G $ のどの頂点の入次数も $ K $ 以下である。
- $ G $ のどの相異なる $ 4 $ 頂点 $ a,b,c,d $ に対しても、$ a\to\ b,\ b\to\ c,\ c\to\ a,\ a\to\ d,\ b\to\ d,\ c\to\ d $ の $ 6 $ 辺がすべて同時に存在することはない。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ K $ $ P $

## 输出格式

条件を満たす有向グラフの個数を $ P $ で割った余りを出力せよ。

## 说明/提示

### 制約

- $ 4\ \leq\ N\ \leq\ 200 $
- $ \frac{N-1}{2}\ \leq\ K\ \leq\ N-1 $
- $ 10^8\ <\ P\ <\ 10^9 $
- $ N,K $ は整数である
- $ P $ は素数である

### Sample Explanation 1

$ 4 $ 頂点のグラフ $ 64 $ 個のうち、禁止された誘導部分グラフと同型である $ 8 $ 個を除いた $ 56 $ 個が条件を満たします。

## 样例 #1

### 输入

```
4 3 998244353
```

### 输出

```
56
```

## 样例 #2

### 输入

```
7 3 998244353
```

### 输出

```
720
```

## 样例 #3

### 输入

```
50 37 998244353
```

### 输出

```
495799508
```



---


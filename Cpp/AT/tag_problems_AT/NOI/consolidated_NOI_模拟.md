---
title: "[ABC363G] Dynamic Scheduling"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_abc363_g
tag: ['贪心', '线段树', '模拟费用流']
---

# [ABC363G] Dynamic Scheduling

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc363/tasks/abc363_g

長さ $ N $ の数列 $ D=(D_1,\ D_2,\ \dots,\ D_N),\ P=(P_1,\ P_2,\ \dots,\ P_N) $ が与えられます。

$ Q $ 個のクエリを与えられる順に処理してください。クエリは以下の形式で与えられます。

- `c x y` : $ D_c $ を $ x $ に、$ P_c $ を $ y $ に変更する。そして、次の問題を解いて答えを出力する。
 
> $ 1 $ から $ N $ までの番号がついた $ N $ 個の仕事があります。  
>  あなたは今日 (これを $ 1 $ 日目とする) から $ 1 $ 日あたり $ 1 $ 個の仕事を選んで終わらせることを $ N $ 日間行います。  
>  仕事 $ i $ は $ D_i $ 日目までに終わらせると $ P_i $ の報酬を貰えます。($ D_i $ 日目までに終わらせなかった場合は何も無い)  
>  仕事をやる順番を上手く選んだ時の報酬の総和の最大値を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。ここで $ \mathrm{query}_i $ は $ i $ 番目のクエリを意味する。

> $ N $ $ Q $ $ D_1 $ $ D_2 $ $ \dots $ $ D_N $ $ P_1 $ $ P_2 $ $ \dots $ $ P_N $ $ \mathrm{query}_1 $ $ \mathrm{query}_2 $ $ \vdots $ $ \mathrm{query}_Q $

各クエリは以下の形式で与えられる。

> $ c $ $ x $ $ y $

## 输出格式

$ Q $ 行出力せよ。$ i $ 行目には $ i $ 番目のクエリの答えを出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ Q\ \leq\ 10^5 $
- $ 1\ \leq\ D_i\ \leq\ N $
- $ 1\ \leq\ P_i\ \leq\ 10^9 $
- $ 1\ \leq\ c\ \leq\ N $
- $ 1\ \leq\ x\ \leq\ N $
- $ 1\ \leq\ y\ \leq\ 10^9 $
- 入力される値は全て整数
 
### Sample Explanation 1

$ 1 $ 番目のクエリは次のようになります。 - $ D_3 $ を $ 1 $ に、$ P_3 $ を $ 4 $ に更新する。$ D\ =\ (1,\ 2,\ 1),\ P\ =\ (3,\ 6,\ 4) $ になる。 - 小問題では、$ 1 $ 日目に仕事 $ 3 $ を、$ 2 $ 日目に仕事 $ 2 $ を、$ 3 $ 日目に仕事 $ 1 $ を行うという手順が最適な手順の $ 1 $ つで、この時の報酬の総和は $ 10 $ であるから、これを出力する。 $ 2 $ 番目のクエリは次のようになります。 - $ D_2 $ を $ 3 $ に、$ P_2 $ を $ 9 $ に更新する。$ D\ =\ (1,\ 3,\ 1),\ P\ =\ (3,\ 9,\ 4) $ になる。 - 小問題では、$ 1 $ 日目に仕事 $ 3 $ を、$ 2 $ 日目に仕事 $ 1 $ を、$ 3 $ 日目に仕事 $ 2 $ を行うという手順が最適な手順の $ 1 $ つで、この時の報酬の総和は $ 13 $ であるから、これを出力する。

## 样例 #1

### 输入

```
3 2

1 2 3

3 6 3

3 1 4

2 3 9
```

### 输出

```
10

13
```

## 样例 #2

### 输入

```
5 1

1 2 3 4 5

1000000000 1000000000 1000000000 1000000000 1000000000

1 1 1000000000
```

### 输出

```
5000000000
```

## 样例 #3

### 输入

```
10 10

6 2 4 1 5 1 6 6 5 3

45 65 71 52 86 52 48 60 40 98

5 6 5

8 4 34

6 7 83

1 3 21

7 5 85

7 4 51

8 2 81

2 7 54

6 1 5

8 6 30
```

### 输出

```
394

379

462

457

459

414

443

479

401

396
```



---

---
title: "[ARC168F] Up-Down Queries"
layout: "post"
diff: NOI/NOI+/CTSC
pid: AT_arc168_f
tag: ['模拟费用流']
---

# [ARC168F] Up-Down Queries

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc168/tasks/arc168_f

各要素が $ 0 $ 以上 $ M $ 以下で長さが $ N $ の整数列 $ x=(x_1,x_2,\cdots,x_N) $ に対し，$ f(x) $ を次のように定義します．

- 長さ $ M $ の整数列 $ y=(y_1,y_2,\cdots,y_M) $ を用意する． 最初，$ y $ の要素はすべて $ 0 $ にする． その後，各 $ i=1,2,\cdots,N $ に対しこの順に以下の操作を行う．
  - 各整数 $ j $ ($ 1\ \leq\ j\ \leq\ x_i $) に対し，$ y_j $ の値を $ \max(y_j-1,0) $ で置き換える．
  - 各整数 $ j $ ($ x_i\ <\ j\ \leq\ M $) に対し，$ y_j $ の値を $ y_j+1 $ で置き換える．
- すべての操作が終わった時点での $ y $ の要素の総和を $ f(x) $ の値とする．

各要素が $ 0 $ 以上 $ M $ 以下で長さが $ N $ の整数列 $ A=(A_1,A_2,\cdots,A_N) $ が与えられます． $ Q $ 個のクエリを処理してください．

- $ i $ 番目のクエリ: 整数 $ X_i,Y_i $ が与えられるので，$ A_{X_i} $ の値を $ Y_i $ で置き換える． その後，$ f(A) $ の値を出力する．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ M $ $ Q $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $ $ X_1 $ $ Y_1 $ $ X_2 $ $ Y_2 $ $ \vdots $ $ X_Q $ $ Y_Q $

## 输出格式

答えを出力せよ．

## 说明/提示

### 制約

- $ 1\ \leq\ N,M,Q\ \leq\ 250000 $
- $ 0\ \leq\ A_i\ \leq\ M $
- $ 1\ \leq\ X_i\ \leq\ N $
- $ 0\ \leq\ Y_i\ \leq\ M $
- 入力される値はすべて整数．

### Sample Explanation 1

まず $ 1 $ 番目のクエリを考えます． $ A_1 $ の値を $ 4 $ で置き換え，$ A=(4,2,3) $ になります． そして，$ f(A) $ の値は次のように求まります． - $ y=(0,0,0,0) $ を用意する． - $ A_1=4 $ について操作を行い，$ y=(0,0,0,0) $ になる． - $ A_2=2 $ について操作を行い，$ y=(0,0,1,1) $ になる． - $ A_3=3 $ について操作を行い，$ y=(0,0,0,2) $ になる． - $ y $ の要素の総和 $ =2 $ が $ f(A) $ の値となる． 次に $ 2 $ 番目のクエリを考えます． $ A_3 $ の値を $ 0 $ で置き換え，$ A=(4,2,0) $ になります． そして，$ f(A) $ の値は次のように求まります． - $ y=(0,0,0,0) $ を用意する． - $ A_1=4 $ について操作を行い，$ y=(0,0,0,0) $ になる． - $ A_2=2 $ について操作を行い，$ y=(0,0,1,1) $ になる． - $ A_3=0 $ について操作を行い，$ y=(1,1,2,2) $ になる． - $ y $ の要素の総和 $ =6 $ が $ f(A) $ の値となる．

## 样例 #1

### 输入

```
3 4 2
1 2 3
1 4
3 0
```

### 输出

```
2
6
```

## 样例 #2

### 输入

```
7 2 9
2 0 2 2 0 1 0
1 1
3 0
4 0
4 1
6 1
3 2
2 0
3 2
2 0
```

### 输出

```
4
7
11
9
9
6
6
6
6
```

## 样例 #3

### 输入

```
20 200000 10
39664 143179 193565 153887 16141 91985 51452 155409 116777 190060 87620 64458 106481 51272 9108 100995 139248 18243 181424 6182
4 196305
13 59753
8 96194
6 57037
19 125781
16 142779
15 13967
10 17772
16 84763
12 17283
```

### 输出

```
1145670
1234421
1352851
1352851
1464137
1380569
1380569
1608611
1724643
1736769
```



---


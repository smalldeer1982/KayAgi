---
title: "[ABC312Ex] snukesnuke"
layout: "post"
diff: 提高+/省选-
pid: AT_abc312_h
tag: ['哈希 hashing', 'KMP 算法', '均摊分析', '数学']
---

# [ABC312Ex] snukesnuke

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc312/tasks/abc312_h

高橋君は人 $ 1,\ldots,N $ の $ N $ 人のあだ名を決めることになりました。

人 $ i $ はあだ名を $ S_i $ にしてほしいと思っています。複数人に同じあだ名をつけるのを避けるため、高橋君は次の手順で $ N $ 人のあだ名を決めることにしました。

- $ i=1,\ldots,N $ の順に、以下の操作により人 $ i $ のあだ名を決める
  - 変数 $ k_i $ を $ 1 $ とする。
  - 「$ S_i $ を $ k_i $ 回繰り返した文字列」がすでに誰かのあだ名である間、$ k_i $ を $ 1 $ 増やすことを繰り返す。
  - 「$ S_i $ を $ k_i $ 回繰り返した文字列」を人 $ i $ のあだ名とする。
 
$ N $ 人のあだ名を決めた後の $ k_1,\ldots,k_N $ を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ S_1 $ $ \vdots $ $ S_N $

## 输出格式

問題文中の操作により $ N $ 人のあだ名を決めた後の $ k_1,\ldots,k_N $ をこの順に空白区切りで出力せよ。

## 说明/提示

### 制約

- $ N\ \geq\ 1 $
- $ S_i $ は英小文字のみからなる、長さ $ 1 $ 以上の文字列
- $ S_i $ の長さの総和は $ 2\times\ 10^5 $ 以下
 
### Sample Explanation 1

\- まず人 $ 1 $ のあだ名を決めます。 - $ k_1=1 $ とします。 - $ S_1 $ を $ k_1 $ 回繰り返した文字列 `snuke` は誰のあだ名でもないので、人 $ 1 $ のあだ名は `snuke` になります。 - 次に人 $ 2 $ のあだ名を決めます。 - $ k_2=1 $ とします。 - $ S_2 $ を $ k_2 $ 回繰り返した文字列 `snuke` はすでに人 $ 1 $ のあだ名なので、$ k_2 $ を $ 1 $ 増やして $ 2 $ とします。 - $ S_2 $ を $ k_2 $ 回繰り返した文字列 `snukesnuke` は誰のあだ名でもないので、人 $ 2 $ のあだ名は `snukesnuke` になります。 - 最後に人 $ 3 $ のあだ名を決めます。 - $ k_3=1 $ とします。 - $ S_3 $ を $ k_3 $ 回繰り返した文字列 `rng` は誰のあだ名でもないので、人 $ 3 $ のあだ名は `rng` になります。 以上により、$ k_1,k_2,k_3 $ はそれぞれ $ 1,2,1 $ となります。

### Sample Explanation 2

\- 人 $ 1 $ のあだ名は `aa` になります。 - 人 $ 2 $ のあだ名は `a` になります。 - 人 $ 3 $ のあだ名は、`a`, `aa` がすでに他の人のあだ名なので、`aaa` になります。 - 人 $ 4 $ のあだ名は、`aaa` がすでに他の人のあだ名なので、`aaaaaa` になります。

## 样例 #1

### 输入

```
3

snuke

snuke

rng
```

### 输出

```
1 2 1
```

## 样例 #2

### 输入

```
4

aa

a

a

aaa
```

### 输出

```
1 1 3 2
```

## 样例 #3

### 输入

```
5

x

x

x

x

x
```

### 输出

```
1 2 3 4 5
```



---

---
title: "[ABC343G] Compress Strings"
layout: "post"
diff: 提高+/省选-
pid: AT_abc343_g
tag: ['动态规划 DP', '状态合并', 'KMP 算法']
---

# [ABC343G] Compress Strings

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc343/tasks/abc343_g

$ N $ 個の文字列 $ S_1,S_2,\ldots,S_N $ が与えられます。

これらの文字列全てを部分文字列として含むような文字列の長さの最小値を求めてください。

ただし、ある文字列 $ S,T $ に対して、$ S $ が $ T $ を部分文字列として含むとは、$ S $ の先頭から $ 0 $ 文字以上、末尾から $ 0 $ 文字以上削除することで $ T $ が得られることをいいます。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ S_1 $ $ S_2 $ $ \vdots $ $ S_N $

## 输出格式

答えを整数として出力せよ。

## 说明/提示

### 制約

- $ N $ は整数
- $ 1\leq\ N\ \leq\ 20 $
- $ S_i $ は英小文字からなる長さ $ 1 $ 以上の文字列
- $ S_1,S_2,\dots,S_N $ の長さの総和は $ 2\times\ 10^5 $ 以下

### Sample Explanation 1

長さ $ 9 $ の文字列 `snukensho` は $ S_1,S_2,S_3 $ 全てを部分文字列として含みます。 具体的には、`snukensho` の $ 1 $ 文字目から $ 5 $ 文字目までが $ S_1 $ に、$ 4 $ 文字目から $ 9 $ 文字目までが $ S_2 $ に、$ 3 $ 文字目から $ 4 $ 文字目までが $ S_3 $ にそれぞれ対応しています。 これより短い文字列であって、$ S_1,S_2,S_3 $ 全てを部分文字列として含むものは存在しません。 よって、答えは $ 9 $ です。

## 样例 #1

### 输入

```
3
snuke
kensho
uk
```

### 输出

```
9
```

## 样例 #2

### 输入

```
3
abc
abc
arc
```

### 输出

```
6
```

## 样例 #3

### 输入

```
6
cmcmrcc
rmrrrmr
mrccm
mmcr
rmmrmrcc
ccmcrcmcm
```

### 输出

```
27
```



---


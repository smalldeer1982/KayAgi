---
title: "[ABC282G] Similar Permutation"
layout: "post"
diff: 提高+/省选-
pid: AT_abc282_g
tag: ['动态规划 DP', '前缀和']
---

# [ABC282G] Similar Permutation

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc282/tasks/abc282_g

$ (1,2,\ldots,N) $ の順列を、以下では単に順列と呼びます。

二つの順列 $ A=(A_1,A_2,\ldots,A_N),B=(B_1,B_2,\ldots,B_N) $ にたいして、**類似度** を以下の条件を満たす $ 1 $ 以上 $ N-1 $ 以下の整数 $ i $ の個数で定めます。

- $ (A_{i+1}-A_i)(B_{i+1}-B_i)\ >\ 0 $

二つの順列の組 $ (A,B) $ であって、類似度が $ K $ であるものの個数を素数 $ P $ で割ったあまりを答えてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ K $ $ P $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ 2\leq\ N\ \leq\ 100 $
- $ 0\leq\ K\ \leq\ N-1 $
- $ 10^8\ \leq\ P\ \leq\ 10^9 $
- $ P $ は素数
- 入力は全て整数である

### Sample Explanation 1

例えば条件を満たす順列の組の一つとして、以下のものが考えられます。 - $ A=(1,2,3) $ - $ B=(1,3,2) $ この例では、$ (A_2\ -\ A_1)(B_2\ -B_1)\ >\ 0,\ (A_3\ -\ A_2)(B_3\ -B_2)\ <\ 0 $ であることから、$ A $ と $ B $ の類似度は $ 1 $ だとわかります。

### Sample Explanation 2

個数を $ P $ で割ったあまりを答えてください。

## 样例 #1

### 输入

```
3 1 282282277
```

### 输出

```
16
```

## 样例 #2

### 输入

```
50 25 998244353
```

### 输出

```
131276976
```



---

---
title: "[ARC136D] Without Carry"
layout: "post"
diff: 提高+/省选-
pid: AT_arc136_d
tag: ['动态规划 DP', '前缀和']
---

# [ARC136D] Without Carry

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc136/tasks/arc136_d

長さ $ N $ の整数列 $ A=(A_1,A_2,\cdots,A_N) $ が与えられます．

整数の組 $ (i,j) $ ($ 1\ \leq\ i\ <\ j\ \leq\ N $) であって，$ A_i+A_j $ を筆算で計算する際に繰り上がりが発生しないものの個数を求めてください．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $

## 输出格式

答えを出力せよ．

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 10^6 $
- $ 0\ \leq\ A_i\ \leq\ 10^6-1 $
- 入力される値はすべて整数

### Sample Explanation 1

数えるべき組 $ (i,j) $ は，$ (1,3),(1,4),(2,4) $ の $ 3 $ つです． 例えば，$ A_1+A_3=4+12 $ を計算する際には繰り上がりが発生しないので，$ (i,j)=(1,3) $ は数えます． 反対に，$ A_3+A_4=12+90 $ を計算する際には繰り上がりが発生するので，$ (i,j)=(3,4) $ は数えません．

## 样例 #1

### 输入

```
4

4 8 12 90
```

### 输出

```
3
```

## 样例 #2

### 输入

```
20

313923 246114 271842 371982 284858 10674 532090 593483 185123 364245 665161 241644 604914 645577 410849 387586 732231 952593 249651 36908
```

### 输出

```
6
```

## 样例 #3

### 输入

```
5

1 1 1 1 1
```

### 输出

```
10
```



---

---
title: "[ARC153C] ± Increasing Sequence"
layout: "post"
diff: 提高+/省选-
pid: AT_arc153_c
tag: ['前缀和', '构造', '差分']
---

# [ARC153C] ± Increasing Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc153/tasks/arc153_c

$ 1 $ と $ -1 $ のみからなる長さ $ N $ の数列 $ A\ =\ (A_1,\ \ldots,\ A_N) $ が与えられます．

以下の条件をすべて満たす整数列 $ x\ =\ (x_1,\ \ldots,\ x_N) $ が存在するか否かを判定し， 存在する場合にはそのような整数列をひとつ答えてください．

- 任意の $ i $ ($ 1\leq\ i\leq\ N $) に対して $ |x_i|\ \leq\ 10^{12} $．
- $ x $ は狭義単調増加である．つまり $ x_1\ <\ \cdots\ <\ x_N $．
- $ \sum_{i=1}^N\ A_ix_i\ =\ 0 $．

## 输入格式

入力は以下の形式で標準入力から与えられます．

> $ N $ $ A_1 $ $ \ldots $ $ A_N $

## 输出格式

問題の条件をすべて満たす整数列 $ x $ が存在するならば `Yes` を，そうでなければ `No` を出力してください．`Yes` の場合には，$ 2 $ 行目にそのような整数列 $ x $ の各要素を，空白で区切って $ 1 $ 行で出力してください．

> $ x_1 $ $ \ldots $ $ x_N $

条件を満たす整数列が複数存在する場合は，どれを出力しても正解となります．

## 说明/提示

### 制約

- $ 1\leq\ N\leq\ 2\times\ 10^5 $
- $ A_i\ \in\ \lbrace\ 1,\ -1\rbrace $
 
### Sample Explanation 1

この出力について $ \sum_{i=1}^NA_ix_i=\ -(-3)\ +\ (-1)\ -\ 4\ -\ 5\ +\ 7\ =\ 0 $ となります．

## 样例 #1

### 输入

```
5

-1 1 -1 -1 1
```

### 输出

```
Yes

-3 -1 4 5 7
```

## 样例 #2

### 输入

```
1

-1
```

### 输出

```
Yes

0
```

## 样例 #3

### 输入

```
2

1 -1
```

### 输出

```
No
```



---

---
title: "[ARC169C] Not So Consecutive"
layout: "post"
diff: 提高+/省选-
pid: AT_arc169_c
tag: ['动态规划 DP', '动态规划优化', '前缀和']
---

# [ARC169C] Not So Consecutive

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc169/tasks/arc169_c

整数 $ N $ が与えられます． 長さ $ N $ の整数列 $ x=(x_1,x_2,\cdots,x_N) $ は，以下の条件を満たすとき（そしてそのときのみ）**よい**数列と呼ばれます．

- $ x $ の各要素は $ 1 $ 以上 $ N $ 以下の整数である．
- 各整数 $ i $ ($ 1\ \leq\ i\ \leq\ N $) に対し，$ i $ が $ i+1 $ 個以上連続して並ぶような場所が $ x $ 内に存在しない．
 
長さ $ N $ の整数列 $ A=(A_1,A_2,\cdots,A_N) $ が与えられます． $ A $ の各要素は $ 1 $ 以上 $ N $ 以下の整数もしくは $ -1 $ です． それぞれの $ -1 $ を $ 1 $ 以上 $ N $ 以下の整数に置き換えることで得られるよい数列の個数を $ 998244353 $ で割ったあまりを求めてください．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $

## 输出格式

答えを出力せよ．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 5000 $
- $ A_i=-1 $ もしくは $ 1\ \leq\ A_i\ \leq\ N $
- 入力される値はすべて整数．
 
### Sample Explanation 1

それぞれの $ -1 $ を $ 1 $ 以上 $ 2 $ 以下の整数で置き換えて得られる数列は $ 4 $ 通りあります． ここで $ A=(1,1) $ について考えると，$ 1 $ が $ 2 $ 個連続してしまうためよい数列ではありません． それ以外の $ A=(1,2),(2,1),(2,2) $ について考えると，これらはすべてよい数列です． よって答えは $ 3 $ です．

## 样例 #1

### 输入

```
2

-1 -1
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3

2 -1 2
```

### 输出

```
2
```

## 样例 #3

### 输入

```
4

-1 1 1 -1
```

### 输出

```
0
```

## 样例 #4

### 输入

```
20

9 -1 -1 -1 -1 -1 -1 -1 -1 -1 7 -1 -1 -1 19 4 -1 -1 -1 -1
```

### 输出

```
128282166
```



---

---
title: "[ARC171D] Rolling Hash"
layout: "post"
diff: 提高+/省选-
pid: AT_arc171_d
tag: ['动态规划 DP', '状态合并', '前缀和']
---

# [ARC171D] Rolling Hash

## 题目描述

给定整数 $P,B$ 满足 $P$ 是质数，$1\le B\le P-1$。

对于序列 $X=(x_1,x_2,\cdots,x_n)$，定义 $\operatorname{hash}(X)$ 的值为
$$\operatorname{hash}(X)=\left(\sum_{i=1}^nx_iB^{n-i}\right)\bmod P$$

给定 $M$ 对整数 $(L_i,R_i)(1\le i\le M)$，请问是否存在长度为 $N$ 的序列 $A=(A_1,A_2,\cdots,A_N)$ 满足：

- 对每一个 $i(1\le i\le M)$，都有
  $$\operatorname{hash}((A_{L_i},A_{L_i+1},\cdots,A_{R_i}))\not=0$$

## 输入格式

第一行四个整数 $P,B,N,M$，接下来 $M$ 行每行两个整数 $L_i,R_i$。

## 输出格式

若存在 $A$ 满足要求输出 `Yes`，否则输出 `No`。

### 样例 1 解释

序列 $A=(2,0,4)$ 满足要求。其中

- $\operatorname{hash}((A_1))=2$
- $\operatorname{hash}((A_1,A_2))=1$
- $\operatorname{hash}((A_2,A_3))=1$

## 说明/提示

-   $2 \leq P \leq 10^9$
-   $P$ 是质数。
-   $1 \leq B \leq P - 1$
-   $1 \leq N \leq 16$
-   $1 \leq M \leq \frac{N(N+1)}{2}$
-   $1 \leq L_i \leq R_i \leq N$
-   $(L_i, R_i) \neq (L_j, R_j)$ if $i \neq j$.
-   所有的输入都是整数。

## 样例 #1

### 输入

```
3 2 3 3

1 1

1 2

2 3
```

### 输出

```
Yes
```

## 样例 #2

### 输入

```
2 1 3 3

1 1

2 3

1 3
```

### 输出

```
No
```

## 样例 #3

### 输入

```
998244353 986061415 6 11

1 5

2 2

2 5

2 6

3 4

3 5

3 6

4 4

4 5

4 6

5 6
```

### 输出

```
Yes
```



---

---
title: "JOIOJI"
layout: "post"
diff: 提高+/省选-
pid: AT_joisc2014_h
tag: ['前缀和']
---

# JOIOJI

## 题目描述

[problemUrl]: https://atcoder.jp/contests/joisc2014/tasks/joisc2014_h





---


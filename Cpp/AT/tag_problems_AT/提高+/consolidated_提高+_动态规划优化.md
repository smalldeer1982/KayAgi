---
title: "[ABC319G] Counting Shortest Paths"
layout: "post"
diff: 提高+/省选-
pid: AT_abc319_g
tag: ['动态规划 DP', '动态规划优化']
---

# [ABC319G] Counting Shortest Paths

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc319/tasks/abc319_g

$ N $ 頂点の無向完全グラフ $ G $ に対して下記の操作を行います。

> 各 $ i\ =\ 1,\ 2,\ \ldots,\ M $ について、頂点 $ u_i $ と 頂点 $ v_i $ を結ぶ無向辺を削除する。

その後の $ G $ において、頂点 $ 1 $ から頂点 $ N $ へのパスが存在するかどうかを判定し、 存在する場合は頂点 $ 1 $ から 頂点 $ N $ への最短パスの個数を $ 998244353 $ で割った余りを求めてください。

ここで、頂点 $ 1 $ から 頂点 $ N $ への最短パスとは、頂点 $ 1 $ から頂点 $ N $ へのパスであって含む辺の本数が最小であるものです。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ u_1 $ $ v_1 $ $ u_2 $ $ v_2 $ $ \vdots $ $ u_M $ $ v_M $

## 输出格式

操作後の $ G $ において、頂点 $ 1 $ から頂点 $ N $ へのパスが存在しない場合は `-1` を出力し、 存在する場合は頂点 $ 1 $ から頂点 $ N $ への最短パスの個数を $ 998244353 $ で割った余りを出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 2\ \times\ 10^5 $
- $ 0\ \leq\ M\ \leq\ \min\lbrace\ 2\ \times\ 10^5,\ N(N-1)/2\ \rbrace $
- $ 1\ \leq\ u_i,\ v_i\ \leq\ N $
- $ u_i\ \neq\ v_i $
- $ i\ \neq\ j\ \implies\ \lbrace\ u_i,\ v_i\ \rbrace\ \neq\ \lbrace\ u_j,\ v_j\ \rbrace $
- 入力はすべて整数

### Sample Explanation 1

操作後の $ G $ における頂点 $ 1 $ から頂点 $ N $ への最短パスは、$ 3 $ 本の辺を含む下記の $ 3 $ 個のパスです。 - 頂点 $ 1 $ $ \rightarrow $ 頂点 $ 2 $ $ \rightarrow $ 頂点 $ 3 $ $ \rightarrow $ 頂点 $ 6 $ - 頂点 $ 1 $ $ \rightarrow $ 頂点 $ 2 $ $ \rightarrow $ 頂点 $ 5 $ $ \rightarrow $ 頂点 $ 6 $ - 頂点 $ 1 $ $ \rightarrow $ 頂点 $ 4 $ $ \rightarrow $ 頂点 $ 5 $ $ \rightarrow $ 頂点 $ 6 $

### Sample Explanation 2

操作後の $ G $ には辺が $ 1 $ 本もありません。 頂点 $ 1 $ から頂点 $ N $ へのパスが存在しないため `-1` を出力します。

## 样例 #1

### 输入

```
6 7
4 3
1 3
2 4
1 6
4 6
5 1
6 2
```

### 输出

```
3
```

## 样例 #2

### 输入

```
4 6
1 2
1 3
1 4
2 3
2 4
3 4
```

### 输出

```
-1
```



---

---
title: "[ARC169C] Not So Consecutive"
layout: "post"
diff: 提高+/省选-
pid: AT_arc169_c
tag: ['动态规划 DP', '动态规划优化', '前缀和']
---

# [ARC169C] Not So Consecutive

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc169/tasks/arc169_c

整数 $ N $ が与えられます． 長さ $ N $ の整数列 $ x=(x_1,x_2,\cdots,x_N) $ は，以下の条件を満たすとき（そしてそのときのみ）**よい**数列と呼ばれます．

- $ x $ の各要素は $ 1 $ 以上 $ N $ 以下の整数である．
- 各整数 $ i $ ($ 1\ \leq\ i\ \leq\ N $) に対し，$ i $ が $ i+1 $ 個以上連続して並ぶような場所が $ x $ 内に存在しない．
 
長さ $ N $ の整数列 $ A=(A_1,A_2,\cdots,A_N) $ が与えられます． $ A $ の各要素は $ 1 $ 以上 $ N $ 以下の整数もしくは $ -1 $ です． それぞれの $ -1 $ を $ 1 $ 以上 $ N $ 以下の整数に置き換えることで得られるよい数列の個数を $ 998244353 $ で割ったあまりを求めてください．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $

## 输出格式

答えを出力せよ．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 5000 $
- $ A_i=-1 $ もしくは $ 1\ \leq\ A_i\ \leq\ N $
- 入力される値はすべて整数．
 
### Sample Explanation 1

それぞれの $ -1 $ を $ 1 $ 以上 $ 2 $ 以下の整数で置き換えて得られる数列は $ 4 $ 通りあります． ここで $ A=(1,1) $ について考えると，$ 1 $ が $ 2 $ 個連続してしまうためよい数列ではありません． それ以外の $ A=(1,2),(2,1),(2,2) $ について考えると，これらはすべてよい数列です． よって答えは $ 3 $ です．

## 样例 #1

### 输入

```
2

-1 -1
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3

2 -1 2
```

### 输出

```
2
```

## 样例 #3

### 输入

```
4

-1 1 1 -1
```

### 输出

```
0
```

## 样例 #4

### 输入

```
20

9 -1 -1 -1 -1 -1 -1 -1 -1 -1 7 -1 -1 -1 19 4 -1 -1 -1 -1
```

### 输出

```
128282166
```



---

---
title: "Permutation"
layout: "post"
diff: 提高+/省选-
pid: AT_dp_t
tag: ['动态规划 DP', '动态规划优化']
---

# Permutation

## 题目描述

[problemUrl]: https://atcoder.jp/contests/dp/tasks/dp_t

$ N $ を正整数とします。 長さ $ N\ -\ 1 $ の文字列 $ s $ が与えられます。 $ s $ は `<` と `>` からなります。

$ (1,\ 2,\ \ldots,\ N) $ を並べ替えた順列 $ (p_1,\ p_2,\ \ldots,\ p_N) $ であって、次の条件を満たすものは何通りでしょうか？ $ 10^9\ +\ 7 $ で割った余りを求めてください。

- 各 $ i $ ($ 1\ \leq\ i\ \leq\ N\ -\ 1 $) について、$ s $ の $ i $ 文字目が `<` の場合は $ p_i\ <\ p_{i\ +\ 1} $ であり、$ s $ の $ i $ 文字目が `>` の場合は $ p_i\ >\ p_{i\ +\ 1} $ である。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ s $

## 输出格式

条件を満たす順列は何通りか？ $ 10^9\ +\ 7 $ で割った余りを出力せよ。

## 说明/提示

### 制約

- $ N $ は整数である。
- $ 2\ \leq\ N\ \leq\ 3000 $
- $ s $ は長さ $ N\ -\ 1 $ の文字列である。
- $ s $ は `<` と `>` からなる。

### Sample Explanation 1

条件を満たす順列は次の $ 5 $ 通りです。 - $ (1,\ 3,\ 2,\ 4) $ - $ (1,\ 4,\ 2,\ 3) $ - $ (2,\ 3,\ 1,\ 4) $ - $ (2,\ 4,\ 1,\ 3) $ - $ (3,\ 4,\ 1,\ 2) $

### Sample Explanation 2

条件を満たす順列は次の $ 1 $ 通りです。 - $ (1,\ 2,\ 3,\ 4,\ 5) $

### Sample Explanation 3

答えを $ 10^9\ +\ 7 $ で割った余りを出力することを忘れずに。

## 样例 #1

### 输入

```
4

<><
```

### 输出

```
5
```

## 样例 #2

### 输入

```
5

<<<<
```

### 输出

```
1
```

## 样例 #3

### 输入

```
20

>>>><>>><>><>>><<>>
```

### 输出

```
217136290
```



---

---
title: "Intervals"
layout: "post"
diff: 提高+/省选-
pid: AT_dp_w
tag: ['动态规划 DP', '线段树', '动态规划优化']
---

# Intervals

## 题目描述

[problemUrl]: https://atcoder.jp/contests/dp/tasks/dp_w

長さ $ N $ の `0` と `1` からなる文字列を考えます。 この文字列のスコアを次のように計算します。

- 各 $ i $ ($ 1\ \leq\ i\ \leq\ M $) について、$ l_i $ 文字目から $ r_i $ 文字目までに `1` がひとつ以上含まれるならば、スコアに $ a_i $ を加算する。

文字列のスコアの最大値を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ l_1 $ $ r_1 $ $ a_1 $ $ l_2 $ $ r_2 $ $ a_2 $ $ : $ $ l_M $ $ r_M $ $ a_M $

## 输出格式

文字列のスコアの最大値を出力せよ。

## 说明/提示

### 制約

- 入力はすべて整数である。
- $ 1\ \leq\ N\ \leq\ 2\ ×\ 10^5 $
- $ 1\ \leq\ M\ \leq\ 2\ ×\ 10^5 $
- $ 1\ \leq\ l_i\ \leq\ r_i\ \leq\ N $
- $ |a_i|\ \leq\ 10^9 $

### Sample Explanation 1

`10001` のスコアは $ a_1\ +\ a_3\ =\ 10\ +\ 10\ =\ 20 $ となります。

### Sample Explanation 2

`100` のスコアは $ a_1\ +\ a_2\ =\ 100\ +\ (-10)\ =\ 90 $ となります。

### Sample Explanation 3

`0` のスコアは $ 0 $ となります。

### Sample Explanation 4

答えは 32-bit 整数型に収まらない場合があります。

### Sample Explanation 5

例えば、`101000` のスコアは $ a_2\ +\ a_3\ +\ a_4\ +\ a_5\ +\ a_7\ =\ 10\ +\ (-8)\ +\ 5\ +\ 9\ +\ (-6)\ =\ 10 $ となります。

## 样例 #1

### 输入

```
5 3

1 3 10

2 4 -10

3 5 10
```

### 输出

```
20
```

## 样例 #2

### 输入

```
3 4

1 3 100

1 1 -10

2 2 -20

3 3 -30
```

### 输出

```
90
```

## 样例 #3

### 输入

```
1 1

1 1 -10
```

### 输出

```
0
```

## 样例 #4

### 输入

```
1 5

1 1 1000000000

1 1 1000000000

1 1 1000000000

1 1 1000000000

1 1 1000000000
```

### 输出

```
5000000000
```

## 样例 #5

### 输入

```
6 8

5 5 3

1 1 10

1 6 -8

3 6 5

3 4 9

5 5 -2

1 3 -6

4 6 -7
```

### 输出

```
10
```



---


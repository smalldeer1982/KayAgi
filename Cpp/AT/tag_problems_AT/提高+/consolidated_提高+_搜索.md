---
title: "[ABC336F] Rotation Puzzle"
layout: "post"
diff: 提高+/省选-
pid: AT_abc336_f
tag: ['折半搜索 meet in the middle']
---

# [ABC336F] Rotation Puzzle

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc336/tasks/abc336_f

$ H $ 行 $ W $ 列のマス目があり、最初、$ 1 $ 以上 $ (H\times\ W) $ 以下の整数がちょうど $ 1 $ つずつ書き込まれています。  
 具体的には、$ 1\leq\ i\leq\ H $, $ 1\leq\ j\leq\ W $ について、上から $ i $ 行目かつ左から $ j $ 列目のマスには $ S_{i,j} $ が書き込まれています。  
 以下、上から $ i $ 行目かつ左から $ j $ 列目のマスをマス $ (i,j) $ と呼びます。

次の操作を **高々 $ 20 $ 回** （$ 0 $ 回でも良い）繰り返すことで、  
 任意の整数の組 $ (i,j) $ $ (1\leq\ i\leq\ H,\ 1\leq\ j\leq\ W) $ について、 マス $ (i,j) $ に $ ((i-1)\times\ W+j) $ が書き込まれている状態にできるか判定し、  
 できる場合は必要な操作回数の最小値を出力してください。  
 $ 20 $ 回以下でできない場合（何回操作を繰り返してもできない場合を含む）は $ -1 $ を出力してください。

> 操作：マス目から $ (H-1)\ \times\ (W-1) $ の長方形を選んで $ 180 $ 度回転させる。  
>  より厳密には、整数 $ x,y $ $ (0\ \leq\ x,\ y\ \leq\ 1) $ を選び、  
>  $ 1\ \leq\ i\ \leq\ H-1 $, $ 1\ \leq\ j\ \leq\ W-1 $ をみたすすべての整数の組 $ (i,j) $ について同時に、  
>  マス $ (i+x,j+y) $ に書かれた整数をマス $ (H-i+x,W-j+y) $ に書かれた数に書き換える。

マス目に書き込まれている整数が条件をみたしていれば良く、書き込まれている向き等は考える必要がないことに注意してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ H $ $ W $ $ S_{1,1} $ $ S_{1,2} $ $ \ldots $ $ S_{1,W} $ $ S_{2,1} $ $ S_{2,2} $ $ \ldots $ $ S_{2,W} $ $ \vdots $ $ S_{H,1} $ $ S_{H,2} $ $ \ldots $ $ S_{H,W} $

## 输出格式

問題文の条件をみたすために必要な操作回数の最小値を出力せよ。  
 ただし、$ 20 $ 回以下の操作で条件をみたすようにできないときは $ -1 $ を出力せよ。

## 说明/提示

### 制約

- $ 3\leq\ H,W\leq\ 8 $
- $ 1\leq\ S_{i,j}\leq\ H\times\ W $
- $ (i,j)\neq\ (i',j') $ ならば $ S_{i,j}\neq\ S_{i',j'} $
- 入力はすべて整数
 
### Sample Explanation 1

次の順で操作を行うことで $ 2 $ 回の操作で問題文の条件をみたすようにすることができます。 - 左上の長方形を選び、操作を行う。すなわち $ x=0 $, $ y=0 $ を選んで操作を行う。 - 右下の長方形を選び、操作を行う。すなわち $ x=1 $, $ y=1 $ を選んで操作を行う。 一方で $ 1 $ 回以下の操作でみたすようにすることは不可能であるため、$ 2 $ を出力します。 

![](https://img.atcoder.jp/abc336/75a97e79fc11bfe9406ef4e3bef74f37.png)

### Sample Explanation 2

$ 20 $ 回以下の操作で条件をみたすようにすることができないため、$ -1 $ を出力します。

## 样例 #1

### 输入

```
3 3

9 4 3

2 1 8

7 6 5
```

### 输出

```
2
```

## 样例 #2

### 输入

```
4 6

15 18 1 14 3 4

23 24 19 8 9 12

13 2 17 6 5 16

21 22 7 20 11 10
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
4 6

1 4 13 16 15 18

21 20 9 12 23 10

17 14 5 6 3 2

11 22 7 24 19 8
```

### 输出

```
20
```

## 样例 #4

### 输入

```
4 3

1 2 3

4 5 6

7 8 9

10 11 12
```

### 输出

```
0
```



---

---
title: "[ABC352F] Estimate Order"
layout: "post"
diff: 提高+/省选-
pid: AT_abc352_f
tag: ['搜索', '状态合并']
---

# [ABC352F] Estimate Order

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc352/tasks/abc352_f

$ N $ 人の人がおり、人にはそれぞれ $ 1,\ 2,\ \ldots,\ N $ の番号が付けられています。

$ N $ 人が競争を行い、順位が付きました。この順位に対して以下の情報が与えられています。

- それぞれの人に対して付けられた順位は相異なる
- 各 $ 1\ \leq\ i\ \leq\ M $ について人 $ A_i $ の順位を $ x $、人 $ B_i $ の順位を $ y $ とすると、$ x\ -\ y\ =\ C_i $ である
 
ただし、この問題では与えられた情報に矛盾しないような順位付けが $ 1 $ つ以上存在するような入力のみが与えられます。

$ N $ 個のクエリの答えを求めてください。$ i $ 番目のクエリの答えは以下により定まる整数です。

- 人 $ i $ の順位が一意に定まるならば、その値を答えとする。そうでない場合、答えは $ -1 $ である。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ A_1 $ $ B_1 $ $ C_1 $ $ A_2 $ $ B_2 $ $ C_2 $ $ \vdots $ $ A_M $ $ B_M $ $ C_M $

## 输出格式

$ 1,\ 2,\ \ldots\ ,N $ 番目のクエリに対する答えをこの順に空白区切りで出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 16 $
- $ 0\ \leq\ M\ \leq\ \frac{N(N\ -\ 1)}{2} $
- $ 1\ \leq\ A_i,\ B_i\ \leq\ N $
- $ 1\ \leq\ C_i\ \leq\ N\ -\ 1 $
- $ (A_i,\ B_i)\ \neq\ (A_j,\ B_j)\ (i\ \neq\ j) $
- 与えられた情報に矛盾しない順位付けが $ 1 $ つ以上存在する
- 入力される値はすべて整数
 
### Sample Explanation 1

人 $ i $ の順位を $ X_i $ とおくと、$ (X_1,\ X_2,\ X_3,\ X_4,\ X_5) $ は $ (3,\ 4,\ 1,\ 2,\ 5),\ (3,\ 5,\ 2,\ 1,\ 4) $ のいずれかです。 したがって、$ 1 $ 番目のクエリに対する答えは $ 3 $、$ 2,\ 3,\ 4,\ 5 $ 番目のクエリに対する答えは $ -1 $ となります。

## 样例 #1

### 输入

```
5 2

2 3 3

5 4 3
```

### 输出

```
3 -1 -1 -1 -1
```

## 样例 #2

### 输入

```
3 0
```

### 输出

```
-1 -1 -1
```

## 样例 #3

### 输入

```
8 5

6 7 3

8 1 7

4 5 1

7 2 1

6 2 4
```

### 输出

```
1 -1 -1 -1 -1 -1 -1 8
```



---

---
title: "[ABC379G] Count Grid 3-coloring"
layout: "post"
diff: 提高+/省选-
pid: AT_abc379_g
tag: ['记忆化搜索', '标签464']
---

# [ABC379G] Count Grid 3-coloring

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc379/tasks/abc379_g

`1`,`2`,`3`,`?` からなる $ H $ 行 $ W $ 列のグリッド $ S $ が与えられます。上から $ i $ 行目、左から $ j $ 列目の文字は $ S_{i,j} $ です。

$ S $ の各 `?` を `1`,`2`,`3` のいずれかに置き換えて得られるグリッドは `?` の個数を $ q $ として $ 3^q $ 通りありますが、そのうち以下の条件を満たすものはいくつありますか？ $ 998244353 $ で割った余りを出力してください。

- 隣接する（辺を共有する）どの $ 2 $ つのマスにも異なる数字が書かれている。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ H $ $ W $ $ S_{1,1}S_{1,2}\ldots\ S_{1,W} $ $ S_{2,1}S_{2,2}\ldots\ S_{2,W} $ $ \vdots $ $ S_{H,1}S_{H,2}\ldots\ S_{H,W} $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ 1\leq\ H,W $
- $ H\times\ W\leq\ 200 $
- $ H,W $ は整数
- $ S $ は `1`,`2`,`3`,`?` からなる $ H $ 行 $ W $ 列のグリッド
 
### Sample Explanation 1

$ S $ の各 `?` を `1`,`2`,`3` のいずれかに置き換えて得られるグリッドのうち、条件を満たすものは以下の $ 6 $ つです。 ``` 12 12 12 13 13 13 21 23 31 21 31 32 ```

### Sample Explanation 2

$ S $ の各 `?` を `1`,`2`,`3` のいずれかに置き換えて得られるグリッドはすべて条件を満たしません。

## 样例 #1

### 输入

```
2 2

1?

??
```

### 输出

```
6
```

## 样例 #2

### 输入

```
2 3

123

3?1
```

### 输出

```
0
```

## 样例 #3

### 输入

```
8 8

3?1?????

???1????

??????2?

????????

????????

????13??

??13?1??

????????
```

### 输出

```
779135038
```



---

---
title: "[ABC380F] Exchange Game"
layout: "post"
diff: 提高+/省选-
pid: AT_abc380_f
tag: ['记忆化搜索', '标签464']
---

# [ABC380F] Exchange Game

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc380/tasks/abc380_f

高橋君と青木君が、数の書かれたカードを使ってゲームをします。

最初、高橋君は $ A_1,\ldots,A_N $ が書かれた $ N $ 枚のカードを、青木君は $ B_1,\ldots,B_M $ が書かれた $ M $ 枚のカードを手札として持っており、場には $ C_1,\ldots,C_L $ が書かれた $ L $ 枚のカードがあります。  
 高橋君と青木君はゲーム中常に、相手の手札も含め、全てのカードに書かれた数を知っている状態にあります。

高橋君と青木君は、高橋君から順に次の行動を交互に行います。

- 自分の手札から $ 1 $ 枚選び場に出す。その後、出したカードに書かれていた数未満の数が書かれたカードが場にあれば、そのうち $ 1 $ 枚を場から自分の手札に移して良い。
 
先に行動が行えなくなった方が負けであり、負けでない方が勝ちです。互いに最適に行動したとき、どちらが勝つか判定してください。

なおこのゲームは必ず有限回の行動で勝敗がつくことが証明できます。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ L $ $ A_1 $ $ \ldots $ $ A_N $ $ B_1 $ $ \ldots $ $ B_M $ $ C_1 $ $ \ldots $ $ C_L $

## 输出格式

高橋君が勝つならば `Takahashi`、青木君が勝つならば `Aoki` と出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ N,M,L $
- $ N+M+L\ \leq\ 12 $
- $ 1\ \leq\ A_i,B_i,C_i\ \leq\ 10^9 $
- 入力は全て整数である
 
### Sample Explanation 1

ゲームは例えば次のように進行します。(最適な行動とは限りません) - 高橋君が手札から $ 2 $ を場に出し、$ 1 $ を場から自分の手札に移す。高橋君の手札は $ (1) $、青木君の手札は $ (4) $、場札は $ (2,3) $ となる。 - 青木君が手札から $ 4 $ を場に出し、$ 2 $ を場から自分の手札に移す。高橋君の手札は $ (1) $、青木君の手札は $ (2) $、場札は $ (3,4) $ となる。 - 高橋君が手札から $ 1 $ を場に出す。高橋君の手札は $ () $、青木君の手札は $ (2) $、場札は $ (1,3,4) $ となる。 - 青木君が手札から $ 2 $ を場に出す。高橋君の手札は $ () $、青木君の手札は $ () $、場札は $ (1,2,3,4) $ となる。 - 高橋君は行動できないため負けであり、青木君が勝ち。

## 样例 #1

### 输入

```
1 1 2

2

4

1 3
```

### 输出

```
Aoki
```

## 样例 #2

### 输入

```
4 4 4

98 98765 987654 987654321

987 9876 9876543 98765432

123 12345 1234567 123456789
```

### 输出

```
Takahashi
```

## 样例 #3

### 输入

```
1 1 8

10

10

1 2 3 4 5 6 7 8
```

### 输出

```
Aoki
```



---

---
title: "[ARC123C] 1, 2, 3 - Decomposition"
layout: "post"
diff: 提高+/省选-
pid: AT_arc123_c
tag: ['动态规划 DP', '记忆化搜索', '数位 DP']
---

# [ARC123C] 1, 2, 3 - Decomposition

## 题目描述

给出一个正整数 $n$ ，求 $n$ 至少可以表示为多少个 「十进制下仅含有 $1,2,3$ 的正整数」 的和？

翻译 by [_FJqwq](https://www.luogu.com.cn/user/755947)

## 输入格式

单测试点包含多组数据，共 $T+1$ 行。

第 $1$ 行，包括一个正整数 $T$，表示 $T$ 组询问。 

接下来 $T$ 行，每行包括一个正整数 $n$，表示询问。

## 输出格式

共 $T$ 行，每行一个正整数，表示对应询问的答案。 

### 样例解释
#### 样例#1
```
456 = 133 + 323
10000 = 323 + 3132 + 3232 + 3313
123 = 123
314 = 312 + 2
91 = 22 + 23 + 23 + 23
```

## 样例 #1

### 输入

```
5

456

10000

123

314

91
```

### 输出

```
2

4

1

2

4
```



---

---
title: "水筒"
layout: "post"
diff: 提高+/省选-
pid: AT_joisc2014_e
tag: ['2014', '广度优先搜索 BFS', '生成树', 'JOI（日本）']
---

# 水筒

## 题目描述

[problemUrl]: https://atcoder.jp/contests/joisc2014/tasks/joisc2014_e





---


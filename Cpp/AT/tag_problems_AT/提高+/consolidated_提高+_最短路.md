---
title: "[ABC355E] Guess the Sum"
layout: "post"
diff: 提高+/省选-
pid: AT_abc355_e
tag: ['最短路']
---

# [ABC355E] Guess the Sum

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc355/tasks/abc355_e

この問題は **インタラクティブな問題**（あなたの作成したプログラムとジャッジシステムが入出力を介して対話を行う形式の問題）です。

正整数 $ N $ および $ 0 $ 以上 $ 2^N $ 未満の整数 $ L,R(L\leq\ R) $ が与えられます。 ジャッジシステムは、$ 0 $ 以上 $ 99 $ 以下の整数からなる長さ $ 2^N $ の数列 $ A\ =\ (A_0,\ A_1,\ \dots,\ A_{2^N-1}) $ を隠し持っています。

あなたの目標は $ A_L+A_{L+1}+\dots+A_{R} $ を $ 100 $ で割った余りを求めることです。ただし、あなたは数列 $ A $ の要素の値を直接知ることはできません。 その代わりに、ジャッジシステムに対して以下の質問を行うことができます。

- $ 2^i(j+1)\leq\ 2^N $ を満たすように非負整数 $ i,j $ を選ぶ。$ l=2^ij,r=2^i(j+1)-1 $ として $ A_l+A_{l+1}+\dots+A_{r} $ を $ 100 $ で割った余りを聞く。
 
どのような $ A $ であっても $ A_L+A_{L+1}+\dots+A_{R} $ を $ 100 $ で割った余りを特定することができる質問回数の最小値を $ m $ とします。$ m $ 回以内の質問を行って $ A_L+A_{L+1}+\dots+A_{R} $ を $ 100 $ で割った余りを求めてください。

### Input &amp; Output Format

この問題はインタラクティブな問題（あなたの作成したプログラムとジャッジシステムが入出力を介して対話を行う形式の問題）です。

最初に、整数 $ N,L,R $ を標準入力から受け取ってください。

> $ N $ $ L $ $ R $

次に、$ A_L+A_{L+1}+\dots+A_{R} $ を $ 100 $ で割った余りを特定できるまで質問を繰り返してください。 質問は、以下の形式で標準出力に出力してください。

> $ ? $ $ i $ $ j $

ここで、$ i,j $ は以下を満たす必要があります。

- $ i,j $ は非負整数
- $ 2^i(j+1)\leq\ 2^N $
 
これに対する応答は、次の形式で標準入力から与えられます。

> $ T $

ここで、$ T $ は質問に対する答えで、$ l=2^ij,r=2^i(j+1)-1 $ としたとき $ A_l+A_{l+1}+\dots+A_{r} $ を $ 100 $ で割った余りです。

ただし、$ i,j $ が制約を満たしていないか、質問回数が $ m $ 回を超えた場合は $ T $ は `-1` となります。

ジャッジが `-1` を返した場合、プログラムはすでに不正解とみなされています。この場合、ただちにプログラムを終了してください。

$ A_L+A_{L+1}+\dots+A_{R} $ を $ 100 $ で割った余りが特定出来たら、$ S $ を $ A_L+A_{L+1}+\dots+A_{R} $ を $ 100 $ で割った余りとして以下の形式で出力してください。その後、ただちにプログラムを終了してください。

> $ ! $ $ S $

## 说明/提示

### 制約

- $ 1\leq\ N\leq\ 18 $
- $ 0\leq\ L\leq\ R\leq\ 2^N-1 $
- 入力は全て整数
 
### 注意点

- **出力を行うたびに、末尾に改行を入れて標準出力を flush してください。そうしなかった場合、ジャッジ結果が TLE となる可能性があります。**
- **対話の途中で誤った出力形式による出力を行った、あるいはプログラムが途中で終了した場合のジャッジ結果は不定です。**
- 解答を出力したらただちにプログラムを終了してください。そうしない場合、ジャッジ結果は不定です。
 
### 入出力例

以下は、$ N=3,L=1,R=5,A=(31,41,59,26,53,58,97,93) $ の場合の入出力例です。この場合 $ m=3 $ であるため、質問を $ 3 $ 回まで行うことができます。

    入力 出力 説明     `3 1 5`  まず整数 $ N,L,R $ が与えられます。    `? 0 1`  $ (i,j)=(0,1) $ として質問を行います。   `41`  $ l=1,r=1 $ であるため、質問の答えは $ A_1=41 $ を $ 100 $ で割った余りである $ 41 $ です。ジャッジはその値を返します。    `? 1 1` $ (i,j)\ =\ (1,1) $ として質問を行います。   `85`  $ l=2,r=3 $ であるため、質問の答えは $ A_2+A_3=85 $ を $ 100 $ で割った余りである $ 85 $ です。ジャッジはその値を返します。    `? 1 2` $ (i,j)\ =\ (1,2) $ として質問を行います。   `11`  $ l=4,r=5 $ であるため、質問の答えは $ A_4+A_5=111 $ を $ 100 $ で割った余りである $ 11 $ です。ジャッジはその値を返します。    `! 37` 答えは $ 37 $ であるとわかったので、それを出力します。



---

---
title: "[ABC375G] Road Blocked 2"
layout: "post"
diff: 提高+/省选-
pid: AT_abc375_g
tag: ['最短路']
---

# [ABC375G] Road Blocked 2

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc375/tasks/abc375_g

AtCoder国には $ 1 $ から $ N $ の番号がついた $ N $ 個の都市と、$ 1 $ から $ M $ の番号がついた $ M $ 本の道路があります。  
 道路 $ i $ は都市 $ A_i $ と都市 $ B_i $ を双方向に結び長さは $ C_i $ です。

各 $ i=1,\ldots,M $ について、以下の $ 2 $ つの値が異なるかどうか判定してください。

- 全ての道路が通行可能なときの、都市 $ 1 $ から都市 $ N $ への最短距離
- 道路 $ i $ 以外の $ M-1 $ 本の道路が通行可能なときの、都市 $ 1 $ から都市 $ N $ への最短距離
 
ただし、一方では都市 $ 1 $ から都市 $ N $ に到達可能で、他方では到達不可能なとき、両者の値は異なるとみなします。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ A_1 $ $ B_1 $ $ C_1 $ $ \vdots $ $ A_M $ $ B_M $ $ C_M $

## 输出格式

$ M $ 行出力せよ。$ i $ 行目には、「全ての道路が通行可能なときの、都市 $ 1 $ から都市 $ N $ への最短距離」と「道路 $ i $ 以外の $ M-1 $ 本の道路が通行可能なときの、都市 $ 1 $ から都市 $ N $ への最短距離」が異なるとき `Yes`、同じとき `No` と出力せよ。

ただし、一方では都市 $ 1 $ から都市 $ N $ に到達可能で、他方では到達不可能なとき、両者の値は異なるとみなす。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\ \leq\ M\ \leq\ 2\times\ 10^5 $
- $ 1\leq\ A_i\ <\ B_i\ \leq\ N $
- $ (A_i,B_i) $ は相異なる
- $ 1\ \leq\ C_i\ \leq\ 10^9 $
- 全ての道路が通行可能なとき、都市 $ 1 $ から都市 $ N $ へは到達可能
- 入力は全ては整数である
 
### Sample Explanation 1

全ての道路が通行可能なとき、都市 $ 1 $ から都市 $ 3 $ への最短距離は $ 10 $ です。 - 道路 $ 1 $ 以外の $ 2 $ 本の道路が通行可能なときの、都市 $ 1 $ から都市 $ 3 $ への最短距離 は $ 10 $ です - 道路 $ 2 $ 以外の $ 2 $ 本の道路が通行可能なときの、都市 $ 1 $ から都市 $ 3 $ への最短距離 は $ 11 $ です - 道路 $ 3 $ 以外の $ 2 $ 本の道路が通行可能なときの、都市 $ 1 $ から都市 $ 3 $ への最短距離 は $ 10 $ です

### Sample Explanation 2

全ての道路が通行可能なとき、都市 $ 1 $ から都市 $ 4 $ への最短距離は $ 1 $ です。 道路 $ 6 $ 以外の $ 5 $ 本の道路が通行可能なときの、都市 $ 1 $ から都市 $ 4 $ への最短距離 は $ 2 $ です。

### Sample Explanation 3

道路 $ 1 $ 以外の $ 0 $ 本の道路が通行可能なとき、都市 $ 1 $ から都市 $ 2 $ へは到達できません。

## 样例 #1

### 输入

```
3 3

1 2 5

1 3 10

2 3 6
```

### 输出

```
No

Yes

No
```

## 样例 #2

### 输入

```
4 6

2 3 1

2 4 1

3 4 1

1 2 1

1 3 1

1 4 1
```

### 输出

```
No

No

No

No

No

Yes
```

## 样例 #3

### 输入

```
2 1

1 2 1
```

### 输出

```
Yes
```



---

---
title: "[ARC064E] Cosmic Rays"
layout: "post"
diff: 提高+/省选-
pid: AT_arc064_c
tag: ['最短路']
---

# [ARC064E] Cosmic Rays

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc064/tasks/arc064_c

$ x $$ y $ 平面があります。 すぬけ君は座標 $ (x_s,\ y_s) $ から座標 $ (x_t,\ y_t) $ まで移動しようとしています。 すぬけ君は好きな向きへ速さ $ 1 $ で動くことができます。 なお、すぬけ君は大きさのない点と見なすことにします。

平面上には $ N $ 個の円形のバリアが張ってあります。 $ i $ 番目のバリアは中心が $ (x_i,\ y_i) $ で半径が $ r_i $ です。 バリアは互いに重なっていたり、互いを含んでいたりすることがあります。

平面上の各座標について、その座標がどのバリアの内部にも含まれない場合、その座標には宇宙線が降り注いでいます。

すぬけ君は移動中にできるだけ宇宙線を浴びたくないので、宇宙線を浴びる時間が最小になるように移動します。 すぬけ君が移動中に宇宙線を浴びる時間の最小値を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ x_s $ $ y_s $ $ x_t $ $ y_t $ $ N $ $ x_1 $ $ y_1 $ $ r_1 $ $ x_2 $ $ y_2 $ $ r_2 $ $ : $ $ x_N $ $ y_N $ $ r_N $

## 输出格式

すぬけ君が移動中に宇宙線を浴びる時間の最小値を出力せよ。 絶対誤差または相対誤差が $ 10^{-9} $ 以下ならば正解となる。

## 说明/提示

### 制約

- 入力はすべて整数である。
- $ -10^9\ <\ =\ x_s,\ y_s,\ x_t,\ y_t\ <\ =\ 10^9 $
- $ (x_s,\ y_s) $ ≠ $ (x_t,\ y_t) $
- $ 1\ <\ =N\ <\ =1,000 $
- $ -10^9\ <\ =\ x_i,\ y_i\ <\ =\ 10^9 $
- $ 1\ <\ =\ r_i\ <\ =\ 10^9 $

### Sample Explanation 1

たとえば、図のように移動すればよいです。 !\[e9c630751968b7051df5750b7ddc0e07.png\](https://atcoder.jp/img/arc064/e9c630751968b7051df5750b7ddc0e07.png)

### Sample Explanation 2

たとえば、図のように移動すればよいです。 !\[fb82f6f4df5b22cffb868ce6333277aa.png\](https://atcoder.jp/img/arc064/fb82f6f4df5b22cffb868ce6333277aa.png)

### Sample Explanation 3

たとえば、図のように移動すればよいです。 !\[d09006720c225cbe69eae3fd9c186e67.png\](https://atcoder.jp/img/arc064/d09006720c225cbe69eae3fd9c186e67.png)

## 样例 #1

### 输入

```
-2 -2 2 2

1

0 0 1
```

### 输出

```
3.6568542495
```

## 样例 #2

### 输入

```
-2 0 2 0

2

-1 0 2

1 0 2
```

### 输出

```
0.0000000000
```

## 样例 #3

### 输入

```
4 -2 -2 4

3

0 0 2

4 0 1

0 4 1
```

### 输出

```
4.0000000000
```



---

---
title: "[ABC077D] Small Multiple"
layout: "post"
diff: 提高+/省选-
pid: AT_arc084_b
tag: ['最短路']
---

# [ABC077D] Small Multiple

## 题目描述

给定一个整数 $K$。求一个 $K$ 的正整数倍 $S$，使得 $S$ 的数位累加和最小。

## 输入格式

一行一个正整数 $K$。

## 输出格式

输出 $K$ 的正整数倍的最小数位累加和。

翻译提供者：Tang_pipi

## 说明/提示

- $2 \le K \le {10}^5$；
- $K$ 是整数。

## 样例 #1

### 输入

```
6
```

### 输出

```
3
```

## 样例 #2

### 输入

```
41
```

### 输出

```
5
```

## 样例 #3

### 输入

```
79992
```

### 输出

```
36
```



---

---
title: "[ARC090E] Avoiding Collision"
layout: "post"
diff: 提高+/省选-
pid: AT_arc090_c
tag: ['最短路']
---

# [ARC090E] Avoiding Collision

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc090/tasks/arc090_c

$ N $ 頂点 $ M $ 辺からなるグラフがあり、このグラフの上に高橋くんと青木くんがいます。

グラフの $ i $ 番目の辺は頂点 $ U_i $ と頂点 $ V_i $ を結んでいます。 この辺を通るのにかかる時間は、通る人 (高橋くんまたは青木くん) によらず、また通る方向によらず、$ D_i $ 分です。

高橋くんは頂点 $ S $ を、青木くんは頂点 $ T $ を同時に出発し、それぞれ頂点 $ T $ および頂点 $ S $ へ最短の時間で移動します。 二人の最短路の選び方の組であって、移動の途中で二人が (辺または頂点上で) 出会うことのないようなものの個数を $ 10^9\ +\ 7 $ で割ったあまりを求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ S $ $ T $ $ U_1 $ $ V_1 $ $ D_1 $ $ U_2 $ $ V_2 $ $ D_2 $ $ : $ $ U_M $ $ V_M $ $ D_M $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 100,000 $
- $ 1\ \leq\ M\ \leq\ 200,000 $
- $ 1\ \leq\ S,\ T\ \leq\ N $
- $ S\ \neq\ T $
- $ 1\ \leq\ U_i,\ V_i\ \leq\ N $ ($ 1\ \leq\ i\ \leq\ M $)
- $ 1\ \leq\ D_i\ \leq\ 10^9 $ ($ 1\ \leq\ i\ \leq\ M $)
- $ i\ \neq\ j $ のとき、$ (U_i,\ V_i)\ \neq\ (U_j,\ V_j) $ かつ $ (U_i,\ V_i)\ \neq\ (V_j,\ U_j) $
- $ U_i\ \neq\ V_i $ ($ 1\ \leq\ i\ \leq\ M $)
- $ D_i $ は整数である
- 与えられるグラフは連結である

### Sample Explanation 1

条件を満たす最短路の選び方は以下の 2 通りあります。 - 高橋くんが頂点 $ 1\ \rightarrow\ 2\ \rightarrow\ 3 $ という経路で、青木くんが頂点 $ 3\ \rightarrow\ 4\ \rightarrow\ 1 $ という経路で移動する。 - 高橋くんが頂点 $ 1\ \rightarrow\ 4\ \rightarrow\ 3 $ という経路で、青木くんが頂点 $ 3\ \rightarrow\ 2\ \rightarrow\ 1 $ という経路で移動する。

## 样例 #1

### 输入

```
4 4

1 3

1 2 1

2 3 1

3 4 1

4 1 1
```

### 输出

```
2
```

## 样例 #2

### 输入

```
3 3

1 3

1 2 1

2 3 1

3 1 2
```

### 输出

```
2
```

## 样例 #3

### 输入

```
3 3

1 3

1 2 1

2 3 1

3 1 2
```

### 输出

```
2
```

## 样例 #4

### 输入

```
8 13

4 2

7 3 9

6 2 3

1 6 4

7 6 9

3 8 9

1 2 2

2 8 12

8 6 9

2 5 5

4 2 18

5 3 7

5 1 515371567

4 8 6
```

### 输出

```
6
```



---


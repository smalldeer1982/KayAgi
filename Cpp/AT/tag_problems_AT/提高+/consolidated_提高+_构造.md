---
title: "[ABC358F] Easiest Maze"
layout: "post"
diff: 提高+/省选-
pid: AT_abc358_f
tag: ['模拟', '构造']
---

# [ABC358F] Easiest Maze

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc358/tasks/abc358_f

すぬけくんは、AtCoder Land の新たな目玉アトラクションとして迷路を建設しようと考えています。 迷路は縦 $ N $ 行・横 $ M $ 列のグリッドとして表され、右上のマスの上端が入口、右下のマスの下端が出口です。 すぬけくんは、隣接するマスの間に適切に壁を配置することで迷路を作ります。

すぬけくんは簡単な迷路が大好きなので、入口から出口までの道順は枝分かれを一切持たずにちょうど $ K $ マスを通るようなものにしたいです。 そのような迷路を作ることが可能か判定し、可能ならば $ 1 $ つ構築してください。

例えば以下の図では、$ N=3,M=3 $ であり、実線で書かれているところに壁が配置されています（入口と出口を除く外周部には必ず壁が配置されるものとします）。 このとき、入口から出口までの道順は枝分かれを一切持たずにちょうど $ 7 $ マスを通っています。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_abc358_f/d85661fe106644e674beb089fb17a5f2eabae979.png)

厳密には以下の通りです。

縦 $ N $ 行・横 $ M $ 列のグリッドがあります。 上から $ i $ 行目、左から $ j $ 列目のマスを $ (i,j) $ と表記します。 あなたは、辺で隣接する任意の $ 2 $ マスの間それぞれについて壁を置くか置かないか決めることができます。 壁を置く場所をうまく定めることで以下の条件を満たすことができるか判定し、できるならば実際に $ 1 $ つ構築してください。

> $ NM $ 頂点からなる無向グラフ $ G $ を考える。$ G $ の各頂点は $ 2 $ つの整数の組 $ (i,j)\ (1\leq\ i\leq\ N,\ 1\leq\ j\leq\ M) $ によって互いに相異なるラベルが付けられている。 相異なる $ 2 $ 頂点 $ (i_1,j_1),(i_2,j_2) $ は、$ |i_1-i_2|+|j_1-j_2|=1 $ かつグリッド上の $ 2 $ マス $ (i_1,j_1),(i_2,j_2) $ の間に壁が置かれていない場合、またその場合に限り辺で結ばれている。
> 
> 条件：$ K $ 頂点からなり $ 2 $ 頂点 $ (1,M),(N,M) $ を結ぶような単純パスが存在し、また $ 2 $ 頂点 $ (1,M),(N,M) $ を含む連結成分はこのパスのみからなる。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ K $

## 输出格式

条件を満たす壁の配置が存在しないならば `No` を出力し、存在するならばそのうちの $ 1 $ つを以下の形式で出力せよ。 条件を満たす壁の配置が複数存在する場合は、そのどれを出力してもよい。

**複雑な出力形式のため、下記の出力例も参考にしてください。**

> Yes +++++ $ \dots $ +++S+ +o?o? $ \dots $ ?o?o+ +?+?+ $ \dots $ +?+?+ +o?o? $ \dots $ ?o?o+ +?+?+ $ \dots $ +?+?+ $ \vdots $ +o?o? $ \dots $ ?o?o+ +?+?+ $ \dots $ +?+?+ +o?o? $ \dots $ ?o?o+ +++++ $ \dots $ +++G+

ここで、`S`, `G`, `+`, `o` はそれぞれ入口、出口、壁、マスを表し、マスとマスの間にある `?` は壁を置くことができる場所である。 横に隣接する $ 2 $ マスの間にある `?` は、壁を置くならば `|` で、壁を置かないならば `.` で置き換えよ。 縦に隣接する $ 2 $ マスの間にある `?` は、壁を置くならば `-` で、壁を置かないならば `.` で置き換えよ。

厳密には以下の通りである。

- 出力は $ 2N+2 $ 行からなり、$ 1 $ 行目には文字列 `Yes` を、$ 2 $ 行目から $ 2N+2 $ 行目には以下で説明されるように長さ $ 2M+1 $ の文字列を出力する。
  - $ 2 $ 行目には、$ 2M-1 $ 個の `+`, `S`, `+` をこの順に連結して出力する。
  - $ 1+2i $ 行目 $ (1\leq\ i\leq\ N) $ には、`+`, `o`, $ c_{i,1} $, `o`, $ c_{i,2} $, $ \dots $, $ c_{i,M-1} $, `o`, `+` をこの順に連結して出力する。 ここで、$ c_{i,j} $ はマス $ (i,j),(i,j+1) $ の間に壁を置くならば `|`、置かないならば `.` である。
  - $ 2+2i $ 行目 $ (1\leq\ i\leq\ N-1) $ には、`+`, $ r_{i,1} $, `+`, $ r_{i,2} $, `+`, $ \dots $, `+`, $ r_{i,M} $, `+` をこの順に連結して出力する。 ここで、$ r_{i,j} $ はマス $ (i,j),(i+1,j) $ の間に壁を置くならば `-`、置かないならば `.` である。
  - $ 2N+2 $ 行目には、$ 2M-1 $ 個の `+`, `G`, `+` をこの順に連結して出力する。

## 说明/提示

### 制約

- $ 2\leq\ N\ \leq\ 100 $
- $ 1\leq\ M\ \leq\ 100 $
- $ 1\leq\ K\leq\ NM $
- 入力は全て整数

### Sample Explanation 1

問題文中の図と同じ壁の配置です。

## 样例 #1

### 输入

```
3 3 7
```

### 输出

```
Yes
+++++S+
+o.o.o+
+.+-+-+
+o.o.o+
+-+-+.+
+o.o|o+
+++++G+
```

## 样例 #2

### 输入

```
3 3 2
```

### 输出

```
No
```

## 样例 #3

### 输入

```
4 1 4
```

### 输出

```
Yes
+S+
+o+
+.+
+o+
+.+
+o+
+.+
+o+
+G+
```



---

---
title: "[AGC004C] AND Grid"
layout: "post"
diff: 提高+/省选-
pid: AT_agc004_c
tag: ['构造']
---

# [AGC004C] AND Grid

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc004/tasks/agc004_c

高橋君と青木君は、縦 $ H $ マス、横 $ W $ マスの透明な方眼紙を $ 1 $ 枚ずつ手に入れました。

高橋君は、自分の方眼紙のいくつかのマスを赤く塗りました。 このとき、赤いマスは上下左右に連結でした。 つまり、どの赤いマスからどの赤いマスへも、上下左右に隣り合う赤いマスのみを辿って行き来できます。

また、青木君は、自分の方眼紙のいくつかのマスを青く塗りました。 このとき、青いマスは上下左右に連結でした。

その後、高橋君と青木君は、$ 2 $ 枚の方眼紙をそのままの向きでぴったりと重ねました。 すると、赤いマスと青いマスが重なるマスのみが紫色になって見えました。

紫色のマスの配置が、長方形に並ぶ文字 $ a_{ij} $ ($ 1\ <\ =i\ <\ =H $，$ 1\ <\ =j\ <\ =W $) として与えられます。 上から $ i $ 行目、左から $ j $ 列目のマスが紫色ならば、$ a_{ij} $ は `#` であり、紫色でなければ、$ a_{ij} $ は `.` です。 このとき、**最も外側のマスは紫色でない**ことが保証されます。 つまり、$ i=1，H $ または $ j=1，W $ ならば、$ a_{ij} $ は `.` です。

問題文の条件を満たすような、赤いマスの配置と青いマスの配置のペアをひとつ求めてください。 解は必ず存在することが示せます。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ H $ $ W $ $ a_{11} $$ ... $$ a_{1W} $ $ : $ $ a_{H1} $$ ... $$ a_{HW} $

## 输出格式

問題文の条件を満たすような、赤いマスの配置と青いマスの配置のペアをひとつ出力せよ。

- $ 1 $ 行目から $ H $ 行目までには、赤いマスの配置を出力せよ。
- $ H+1 $ 行目には、空行を出力せよ。
- $ H+2 $ 行目から $ 2H+1 $ 行目までには、青いマスの配置を出力せよ。

どちらも、紫色のマスの配置と同様のフォーマットで出力せよ。

## 说明/提示

### 制約

- $ 3\ <\ =H，W\ <\ =500 $
- $ a_{ij} $ は `#` または `.` である。
- $ i=1，H $ または $ j=1，W $ ならば、$ a_{ij} $ は `.` である。
- $ a_{ij} $ のうち少なくとも $ 1 $ つは `#` である。

### Sample Explanation 1

例えば、次のような赤いマスの配置と青いマスの配置のペアが考えられます。 !\[\](/img/agc/004/gatbantar/C\_1.png)

### Sample Explanation 2

例えば、次のような赤いマスの配置と青いマスの配置のペアが考えられます。 !\[\](/img/agc/004/gatbantar/C\_2.png)

## 样例 #1

### 输入

```
5 5

.....

.#.#.

.....

.#.#.

.....
```

### 输出

```
.....

#####

#....

#####

.....



.###.

.#.#.

.#.#.

.#.#.

.....
```

## 样例 #2

### 输入

```
7 13

.............

.###.###.###.

.#.#.#...#...

.###.#...#...

.#.#.#.#.#...

.#.#.###.###.

.............
```

### 输出

```
.............

.###########.

.###.###.###.

.###.###.###.

.###.###.###.

.###.###.###.

.............



.............

.###.###.###.

.#.#.#...#...

.###.#...#...

.#.#.#.#.#...

.#.#########.

.............
```



---

---
title: "[AGC007B] Construct Sequences"
layout: "post"
diff: 提高+/省选-
pid: AT_agc007_b
tag: ['构造']
---

# [AGC007B] Construct Sequences

## 题目描述

# 题意简述
给你一段长度为n的数列$P_1$,$P_2$,,$P_n$.
让你构造两个新的数列a与b,且满足：   
1.    1<$a_i$,$b_i$<10^9                     
2.    $a_1$<$a_2$<…<$a_n$
3.    $b_1$>$b_2$>…>$b_n$
4.    $a_{p_1}$+$b_{p_1}$<$a_{p_2}$+$b_{p_2}$<…<$a_{p_n}$+$b_{p_n}$
求出满足条件的数列a,b；

## 输入格式

两行，第一行为n,第二行为数列P

## 输出格式

两行，第一行为数列a,第二行为数列b

感谢@该起什么名字 提供的翻译

## 样例 #1

### 输入

```
2

1 2
```

### 输出

```
1 4

5 4
```

## 样例 #2

### 输入

```
3

3 2 1
```

### 输出

```
1 2 3

5 3 1
```

## 样例 #3

### 输入

```
3

2 3 1
```

### 输出

```
5 10 100

100 10 1
```



---

---
title: "[AGC008D] K-th K"
layout: "post"
diff: 提高+/省选-
pid: AT_agc008_d
tag: ['贪心', '构造']
---

# [AGC008D] K-th K

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc008/tasks/agc008_d

長さ $ N $ の数列 $ x $ が与えられます。 次の条件をすべて満たす数列 $ a $ が存在するか判定し、存在するならば $ a $ を $ 1 $ つ構成してください。

- $ a $ は長さ $ N^2 $ であり、整数 $ 1 $, $ 2 $, $ ... $, $ N $ をそれぞれちょうど $ N $ 個ずつ含む。
- 各 $ 1\ <\ =\ i\ <\ =\ N $ について、$ a $ に含まれる整数 $ i $ のうち左から $ i $ 番目に位置するものは、$ a $ 全体では左から $ x_i $ 番目に位置する。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ x_1 $ $ x_2 $ $ ... $ $ x_N $

## 输出格式

条件をすべて満たす数列 $ a $ が存在しないならば、`No` を出力せよ。 存在するならば、$ 1 $ 行目に `Yes` を出力し、$ 2 $ 行目に $ a $ を空白区切りで出力せよ。

## 说明/提示

### 制約

- $ 1\ <\ =\ N\ <\ =\ 500 $
- $ 1\ <\ =\ x_i\ <\ =\ N^2 $
- $ x_i $ はすべて相異なる。

### Sample Explanation 1

たとえば、$ a $ に含まれる整数 $ 2 $ のうち左から $ 2 $ 番目に位置するものは、$ a $ 全体では左から $ 5 $ 番目に位置しています。 整数 $ 1 $, $ 3 $ についても同様に条件が成り立っています。

## 样例 #1

### 输入

```
3

1 5 9
```

### 输出

```
Yes

1 1 1 2 2 2 3 3 3
```

## 样例 #2

### 输入

```
2

4 1
```

### 输出

```
No
```



---

---
title: "[AGC041C] Domino Quality"
layout: "post"
diff: 提高+/省选-
pid: AT_agc041_c
tag: ['构造']
---

# [AGC041C] Domino Quality

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc041/tasks/agc041_c

$ N $ 行 $ N $ 列のマスからなる盤面を考えます。あなたはこの上にドミノ牌を何枚か置こうとしています。 各牌は一辺を共有する $ 2 $ マスの上に置き、各マスに乗せられる牌は $ 1 $ 枚までです。

盤面の各行について、その行の $ 1 $ マス以上を占める牌の数をその行のクオリティと定義します。 各列のクオリティも同様に定義します。

$ 1 $ 枚以上の牌の盤面への置き方であって、どの行のクオリティもどの列のクオリティとも等しくなるものを求めてください。あるいは、そのような置き方が存在しないことを検出してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $

## 输出格式

題意を満たす牌の置き方が存在しない場合、整数 `-1` のみを出力せよ。

そうでなければ、題意を満たす牌の置き方をそれぞれ長さ $ N $ の文字列 $ N $ 個として出力せよ。 牌が乗せられていないマスに対応する文字は `.` (ドット) とし、牌が乗せられているマスに対応する文字は英小文字とすること。 同一の牌が占めるマスには同一の文字を用い、一辺を共有する $ 2 $ マスが異なる牌に占められている場合、それらのマスには異なる文字を用いよ。

## 说明/提示

### 制約

- $ 2\ \le\ N\ \le\ 1000 $

### Sample Explanation 1

どの行のクオリティも、どの列のクオリティも $ 2 $ です。

## 样例 #1

### 输入

```
6
```

### 输出

```
aabb..

b..zz.

ba....

.a..aa

..a..b

..a..b
```

## 样例 #2

### 输入

```
2
```

### 输出

```
-1
```



---

---
title: "[AGC055B] ABC Supremacy"
layout: "post"
diff: 提高+/省选-
pid: AT_agc055_b
tag: ['数学', '构造']
---

# [AGC055B] ABC Supremacy

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc055/tasks/agc055_b

`A`, `B`, `C` からなる長さ $ N $ の文字列 $ S $ が与えられます。あなたは、次の操作を何回でも行うことができます。

- $ S_iS_{i+1}S_{i+2} $ が `ABC`, `BCA`, `CAB` のいずれかに等しいような $ 1\ \le\ i\ \le\ N-2 $ を任意に選ぶ。そして、その三文字を `ABC`, `BCA`, `CAB` のいずれかで置換する。

例えば、文字列 `AABC` に対して、以下の変換を行うことができます。

- `AABC` $ \to $ `ABCA` $ \to $ `BCAA`

上記の操作を有限回行うことで（$ 0 $ 回でもよい）、文字列 $ S $ から文字列 $ T $ を得ることが可能か判定してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ S $ $ T $

## 输出格式

上記の操作で $ S $ を $ T $ に変換することが可能であれば `YES`、そうでなければ `NO` と出力せよ。大文字、小文字は不問である。

## 说明/提示

### 制約

- $ 3\le\ N\ \le\ 5\cdot\ 10^5 $
- $ S $ は、`A`, `B`, `C` からなる長さ $ N $ の文字列である。
- $ T $ は、`A`, `B`, `C` からなる長さ $ N $ の文字列である。

### Sample Explanation 1

これは問題文で説明した例です。

## 样例 #1

### 输入

```
4

AABC

BCAA
```

### 输出

```
YES
```

## 样例 #2

### 输入

```
4

ABCA

BCAB
```

### 输出

```
NO
```



---

---
title: "[AGC059B] Arrange Your Balls"
layout: "post"
diff: 提高+/省选-
pid: AT_agc059_b
tag: ['构造']
---

# [AGC059B] Arrange Your Balls

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc059/tasks/agc059_b

あなたは、色 $ C_1,\ C_2,\ \ldots,\ C_N $ の $ N $ 個のボールを持っています。 ここで、すべての色は $ 1 $ 以上 $ N $ 以下の整数により表されます。 あなたは、これらのボールを円周上に並べようとしています。その後、色のペア $ (X,\ Y) $ であって、$ X\ <\ Y $ であり、色 $ X $ と $ Y $ の二つの隣接するボールが存在するようなペアの個数を数えます。

そのようなペアの個数を最小化する配置を求めてください。そのような配置が多数存在する場合は、そのうちのいずれかを求めてください。

例えば、色 $ 1,\ 1,\ 2,\ 3 $ のボールについて、$ 1,\ 1,\ 2,\ 3 $ と並べると、$ (1,\ 2),\ (2,\ 3),\ (1,\ 3) $ という $ 3 $ つのペアが現れます。$ 1,\ 2,\ 1,\ 3 $ と並べると、現れるペアは $ (1,\ 2),\ (1,\ 3) $ の $ 2 $ つのみです。

各入力ファイルについて、$ T $ 個のテストケースを解いてください。

## 输入格式

入力は標準入力から以下の形式で与えられる。

> $ T $ $ case_1 $ $ case_2 $ $ \vdots $ $ case_T $

各ケースは以下の形式である。

> $ N $ $ C_1 $ $ C_2 $ $ \ldots $ $ C_N $

## 输出格式

各テストケースについて、答えを以下の形式で出力せよ。

> $ A_1 $ $ A_2 $ $ \ldots $ $ A_N $

ここで、$ A_i $ は配置における円周上の（時計回りに見て）$ i $ 番目のボールの色である。

$ (A_1,\ A_2,\ \ldots,\ A_N) $ は $ (C_1,\ C_2,\ \ldots,\ C_N) $ を並べ替えたものでなければならない。また、色のペア $ (X,\ Y) $ であって、$ X\ <\ Y $ であり、色 $ X $ と $ Y $ の二つの隣接するボールが存在するようなペアの個数が最小化されていなければならない。

複数の解が存在する場合は、そのいずれも認められる。

## 说明/提示

### 制約

- $ 1\ \le\ T\ \le\ 5\ \cdot\ 10^4 $
- $ 3\ \le\ N\ \le\ 2\ \cdot\ 10^5 $
- $ 1\ \le\ C_i\ \le\ N $
- 各入力ファイル内の $ N $ の総和は $ 2\cdot\ 10^5 $ を超えない。
- 入力中のすべての値は整数である。

## 样例 #1

### 输入

```
3

3

1 2 3

4

1 2 1 3

5

2 2 5 3 3
```

### 输出

```
1 2 3 

2 1 3 1 

3 3 2 5 2
```



---

---
title: "[AGC066B] Decreasing Digit Sums"
layout: "post"
diff: 提高+/省选-
pid: AT_agc066_b
tag: ['数学', '构造']
---

# [AGC066B] Decreasing Digit Sums

## 题目描述

### 题意翻译

定义 $f(x)$ 表示 $x$ 各数位之和，例如 $f(331)=3+3+1=7$，$f(2024)=2+0+2+4=8$，$f(1)=1$ 等。

给定 $n$，你需要找到一个数 $k$ 满足以下条件：

- $1\leq k\leq10^{10000}$；
- 对于任意整数 $1\leq i\leq n$，有 $f(2^{i-1}k)>f(2^ik)$。

## 输入格式

一行一个正整数 $n$。

## 输出格式

一行一个整数表示你给出的答案 $k$。

## 说明/提示

$1\leq n\leq50$。

## 样例 #1

### 输入

```
3
```

### 输出

```
89
```



---

---
title: "[AGC068B] 01 Graph Construction"
layout: "post"
diff: 提高+/省选-
pid: AT_agc068_b
tag: ['图论', '构造']
---

# [AGC068B] 01 Graph Construction

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc068/tasks/agc068_b

`0`,`1` のみからなる文字列の組 $ (S,T) $ が次の条件をすべて満たすとき (そしてそのときのみ) それを**良い**文字列組と呼ぶことにします．

- $ S,T $ に含まれる `0` の個数は等しい．
- $ S,T $ に含まれる `1` の個数は等しい．

特に，良い文字列組 $ (S,T) $ について，$ S,T $ の長さは同じです．

良い文字列組 $ (S,T) $ に対し，無向グラフ $ G(S,T) $ を次のように定義します．

- $ S $ の長さを $ L $ とする．頂点 $ 1,2,\cdots,L $ からなるグラフ $ g $ をつくる．
- $ S $ に含まれる `0` の個数を $ n $ とする． $ S $ に含まれる `0` の index を $ 1\ \leq\ a_1\ <\ a_2\ <\ \cdots\ <\ a_n\ \leq\ L $ とする． $ T $ に含まれる `0` の index を $ 1\ \leq\ b_1\ <\ b_2\ <\ \cdots\ <\ b_n\ \leq\ L $ とする． 各 $ 1\ \leq\ i\ \leq\ n $ に対し，頂点 $ a_i $ と頂点 $ b_i $ を結ぶ辺を $ g $ に追加する．
- $ S $ に含まれる `1` の個数を $ m $ とする． $ S $ に含まれる `1` の index を $ 1\ \leq\ c_1\ <\ c_2\ <\ \cdots\ <\ c_m\ \leq\ L $ とする． $ T $ に含まれる `1` の index を $ 1\ \leq\ d_1\ <\ d_2\ <\ \cdots\ <\ d_m\ \leq\ L $ とする． 各 $ 1\ \leq\ i\ \leq\ m $ に対し，頂点 $ c_i $ と頂点 $ d_i $ を結ぶ辺を $ g $ に追加する．
- 以上の手順で得た $ g $ を $ G(S,T) $ とする．

長さ $ N $ の整数列 $ A=(A_1,A_2,\cdots,A_N) $ が与えられます． 以下の条件をすべて満たす良い文字列組 $ (S,T) $ を $ 1 $ つ見つけてください．

- $ S $ の長さを $ L $ とする．$ N\ \leq\ L\ \leq\ 10^5 $ である．
- 各 $ 1\ \leq\ i,j\ \leq\ N $ について，$ G(S,T) $ で頂点 $ i $ と頂点 $ j $ が同じ連結成分に属すとき，そしてそのときのみ $ A_i=A_j $ である．

なお，この問題の制約下で解が必ず存在することが証明できます．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ A_1 $ $ A_2 $ $ \cdots $ $ A_N $

## 输出格式

答えを以下の形式で出力せよ．

> $ L $ $ S $ $ T $

ここで，$ L $ は $ S,T $ の長さである． 解が複数存在する場合，どれを出力しても構わない．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 100 $
- $ 1\ \leq\ A_i\ \leq\ N $
- 入力される値はすべて整数

### Sample Explanation 1

出力例の $ S,T $ について $ G(S,T) $ を求めると，次のようになります． - $ 4 $ 頂点ならなるグラフ $ g $ を用意する． - $ S $ に含まれる `0` の index は $ (1,2) $ で，$ T $ に含まれる `0` の index は $ (3,4) $ である． 辺 $ (1,3),(2,4) $ を $ g $ に追加する． - $ S $ に含まれる `1` の index は $ (3,4) $ で，$ T $ に含まれる `1` の index は $ (1,2) $ である． 辺 $ (3,1),(4,2) $ を $ g $ に追加する． - $ G(S,T)=g $ とする． $ G(S,T) $ の連結成分は，頂点 $ (1,3) $ からなる成分と頂点 $ (2,4) $ からなる成分です． これは条件をすべて満たすので，この $ (S,T) $ は正しい出力です．

## 样例 #1

### 输入

```
3
1 2 1
```

### 输出

```
4
0011
1100
```

## 样例 #2

### 输入

```
5
1 2 3 4 5
```

### 输出

```
5
01010
01010
```

## 样例 #3

### 输入

```
6
1 1 1 1 1 1
```

### 输出

```
6
011111
111110
```

## 样例 #4

### 输入

```
10
1 2 3 2 4 3 4 4 5 6
```

### 输出

```
21
000101010111100011011
011010000010101111110
```



---

---
title: "[ARC152D] Halftree"
layout: "post"
diff: 提高+/省选-
pid: AT_arc152_d
tag: ['构造']
---

# [ARC152D] Halftree

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc152/tasks/arc152_d

頂点に $ 0 $ から $ N-1 $ までの番号がついた $ N $ 頂点の無向グラフがあり、はじめ、辺はありません。 このグラフに、あなたは好きなように辺を追加することができます。 そして、あなたが辺をすべて追加し終えた後に、与えられる $ K $ を用いて以下の操作がちょうど $ 1 $ 回行われます。

- あなたが追加した各辺について、両端の頂点を $ u,v $ とするとき、 $ 2 $ 頂点 $ (u+K) $ $ \mathrm{mod} $ $ N $ と $ (v+K) $ $ \mathrm{mod} $ $ N $ の間に辺が追加される。 ただし、この $ 2 $ 頂点間にもともと辺が存在する場合も新しく辺が追加されるため、その場合は操作後には多重辺となる。
 
与えられた $ N,K $ に対して、操作後のグラフが木となるようにするとき、あなたが追加するべき辺の組を求めてください。 そのような辺の組が存在しない場合はそのことを指摘してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ K $

## 输出格式

題意を満たす辺の組が存在する場合、辺の数を $ M $、 $ i $ 番目の辺が結ぶ $ 2 $ 頂点を $ a_i,b_i $ として、以下の形式で出力せよ。 ただし、 $ 0\leq\ M\leq\ N $ でなければならず、全て整数で出力せよ。出力される辺や頂点の順序は問わない。

> $ M $ $ a_1 $ $ b_1 $ $ a_2 $ $ b_2 $ $ \vdots $ $ a_M $ $ b_M $

解が複数存在する場合、どれを出力しても正解とみなされる。

題意を満たす辺の組が存在しない場合、`-1` と出力せよ。

## 说明/提示

### 制約

- $ 2\leq\ N\leq\ 2\times\ 10^5 $
- $ 1\leq\ K\leq\ N-1 $
- 入力される値はすべて整数である
 
### Sample Explanation 1

操作を行うと、辺 $ 4 $-$ 0 $ と $ 4 $-$ 1 $ が追加されます。 したがって、木が生成されますので、これは正当な出力の $ 1 $ つとなります。

### Sample Explanation 2

操作後のグラフが木となるような方法が存在しません。

## 样例 #1

### 输入

```
5 2
```

### 输出

```
2

2 3

2 4
```

## 样例 #2

### 输入

```
2 1
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
7 1
```

### 输出

```
3

0 1

2 3

4 5
```



---

---
title: "[ARC153C] ± Increasing Sequence"
layout: "post"
diff: 提高+/省选-
pid: AT_arc153_c
tag: ['前缀和', '构造', '差分']
---

# [ARC153C] ± Increasing Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc153/tasks/arc153_c

$ 1 $ と $ -1 $ のみからなる長さ $ N $ の数列 $ A\ =\ (A_1,\ \ldots,\ A_N) $ が与えられます．

以下の条件をすべて満たす整数列 $ x\ =\ (x_1,\ \ldots,\ x_N) $ が存在するか否かを判定し， 存在する場合にはそのような整数列をひとつ答えてください．

- 任意の $ i $ ($ 1\leq\ i\leq\ N $) に対して $ |x_i|\ \leq\ 10^{12} $．
- $ x $ は狭義単調増加である．つまり $ x_1\ <\ \cdots\ <\ x_N $．
- $ \sum_{i=1}^N\ A_ix_i\ =\ 0 $．

## 输入格式

入力は以下の形式で標準入力から与えられます．

> $ N $ $ A_1 $ $ \ldots $ $ A_N $

## 输出格式

問題の条件をすべて満たす整数列 $ x $ が存在するならば `Yes` を，そうでなければ `No` を出力してください．`Yes` の場合には，$ 2 $ 行目にそのような整数列 $ x $ の各要素を，空白で区切って $ 1 $ 行で出力してください．

> $ x_1 $ $ \ldots $ $ x_N $

条件を満たす整数列が複数存在する場合は，どれを出力しても正解となります．

## 说明/提示

### 制約

- $ 1\leq\ N\leq\ 2\times\ 10^5 $
- $ A_i\ \in\ \lbrace\ 1,\ -1\rbrace $
 
### Sample Explanation 1

この出力について $ \sum_{i=1}^NA_ix_i=\ -(-3)\ +\ (-1)\ -\ 4\ -\ 5\ +\ 7\ =\ 0 $ となります．

## 样例 #1

### 输入

```
5

-1 1 -1 -1 1
```

### 输出

```
Yes

-3 -1 4 5 7
```

## 样例 #2

### 输入

```
1

-1
```

### 输出

```
Yes

0
```

## 样例 #3

### 输入

```
2

1 -1
```

### 输出

```
No
```



---

---
title: "[ARC156C] Tree and LCS"
layout: "post"
diff: 提高+/省选-
pid: AT_arc156_c
tag: ['树论', '构造']
---

# [ARC156C] Tree and LCS

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc156/tasks/arc156_c

頂点に $ 1 $ から $ N $ の番号がついた木 $ T $ があります。 $ T $ の $ i\ (1\leq\ i\ \leq\ N-1) $ 番目の辺は頂点 $ u_i $ と頂点 $ v_i $ を結んでいます。

$ T $ を用いて、$ (1,2,\ldots,N) $ の順列 $ P\ =\ (P_1,P_2,\ldots,P_N) $ の**類似度**を以下で定めます。

- $ T $ 上の任意の単純パス $ x=(x_1,x_2,\ldots,x_k) $ に対して、$ y=(P_{x_1},\ P_{x_2},\ldots,P_{x_k}) $ とする。このとき、$ x $ と $ y $ の最長共通部分列の長さとして考えられる最大値を類似度とする。
 
類似度が最小となるような順列 $ P $ を一つ構築してください。

  部分列とは 数列の**部分列**とは、数列から $ 0 $ 個以上の要素を取り除いた後、残りの要素を元の順序で連結して得られる数列のことをいいます。 例えば、$ (10,30) $ は $ (10,20,30) $ の部分列ですが、$ (20,10) $ は $ (10,20,30) $ の部分列ではありません。   単純パスとは グラフ $ G $ 上の頂点 $ X,Y $ に対して、頂点列 $ v_1,v_2,\ \ldots,\ v_k $ であって、 $ v_1=X $, $ v_k=Y $ かつ、$ 1\leq\ i\leq\ k-1 $ に対して $ v_i $ と $ v_{i+1} $ が辺で結ばれているようなものを頂点 $ X $ から頂点 $ Y $ への **ウォーク** と呼びます。 さらに、$ v_1,v_2,\ \ldots,\ v_k $ がすべて異なるようなものを頂点 $ X $ から頂点 $ Y $ への **単純パス** (あるいは単に **パス**) と呼びます。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ u_1 $ $ v_1 $ $ u_2 $ $ v_2 $ $ \vdots $ $ u_{N-1} $ $ v_{N-1} $

## 输出格式

類似度が最小となるような順列 $ P $ を空白区切りで出力せよ。解が複数存在する場合、どれを出力しても正解とみなされる。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 5000 $
- $ 1\leq\ u_i,v_i\leq\ N $
- 与えられるグラフは木
- 入力される数値は全て整数
 
### Sample Explanation 1

出力例の順列の類似度は $ 1 $ となっています。これは、以下のように計算できます。 - $ x=(1) $ のとき $ y=(P_1)=(3) $ です。$ x,y $ の最長共通部分列の長さは $ 0 $ です。 - $ x=(2) $ のとき $ y=(P_2)=(2) $ です。$ x,y $ の最長共通部分列の長さは $ 1 $ です。 - $ x=(3) $ のとき $ y=(P_3)=(1) $ です。$ x,y $ の最長共通部分列の長さは $ 0 $ です。 - $ x=(1,2) $ のとき $ y=(P_1,P_2)=(3,2) $ です。$ x,y $ の最長共通部分列の長さは $ 1 $ です。 これを反転した $ x=(2,1) $ についても同様です。 - $ x=(2,3) $ のとき $ y=(P_2,P_3)=(2,1) $ です。$ x,y $ の最長共通部分列の長さは $ 1 $ です。 これを反転した $ x=(3,2) $ についても同様です。 - $ x\ =\ (1,2,3) $ のとき $ y=(P_1,P_2,P_3)=(3,2,\ 1) $ です。$ x,y $ の最長共通部分列の長さは $ 1 $ です。これを反転した $ x=(3,2,1) $ についても同様です。 類似度が $ 0 $ 以下の順列は存在しないことが証明できるので、これが答えとなります。

### Sample Explanation 2

類似度が最小の順列が複数存在する場合、どれを出力してもよいです。例えば、`4 3 2 1` といった出力も正解になります。

## 样例 #1

### 输入

```
3

1 2

2 3
```

### 输出

```
3 2 1
```

## 样例 #2

### 输入

```
4

2 1

2 3

2 4
```

### 输出

```
3 4 1 2
```



---

---
title: "[ARC159C] Permutation Addition"
layout: "post"
diff: 提高+/省选-
pid: AT_arc159_c
tag: ['数学', '构造']
---

# [ARC159C] Permutation Addition

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc159/tasks/arc159_c

正整数列 $ A=(a_1,\ldots,a_N) $ が与えられます。

次の操作を $ 0 $ 回以上 $ 10^4 $ 回以下繰り返すことで $ A $ の値をすべて等しくできるかを判定し、可能な場合は操作列の一例を示してください。

- $ (1,\ldots,N) $ の順列 $ (p_1,\ldots,p_N) $ を決め、$ A $ を $ (a_1+p_1,\ldots,a_N+p_N) $ に置き換える。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ a_1 $ $ \ldots $ $ a_N $

## 输出格式

$ A $ の値をすべて等しくできない場合は `No` と出力せよ。  
 等しくできる場合、操作回数を $ M $ 回、$ i $ 回目の操作における順列を $ (p_{i,1},\ldots,p_{i,N}) $ として以下の形式で出力せよ。

> Yes $ M $ $ p_{1,1} $ $ \ldots $ $ p_{1,N} $ $ \vdots $ $ p_{M,1} $ $ \ldots $ $ p_{M,N} $

答えが複数存在する場合はどれを出力しても正解とみなされる。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 50 $
- $ 1\ \leq\ a_i\ \leq\ 50 $
- 入力はすべて整数
 
### Sample Explanation 1

この出力例の通りに $ 8 $ 回の操作を行うことで $ A $ は $ (24,24) $ となり、値がすべて等しくなります。

### Sample Explanation 3

初めから $ A $ の値がすべて等しいです。

## 样例 #1

### 输入

```
2

15 9
```

### 输出

```
Yes

8

1 2

1 2

1 2

1 2

2 1

1 2

1 2

1 2
```

## 样例 #2

### 输入

```
5

1 2 3 10 10
```

### 输出

```
No
```

## 样例 #3

### 输入

```
4

1 1 1 1
```

### 输出

```
Yes

0
```



---


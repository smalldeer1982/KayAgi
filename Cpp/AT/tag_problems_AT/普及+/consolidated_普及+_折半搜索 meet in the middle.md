---
title: "[ABC271F] XOR on Grid Path"
layout: "post"
diff: 普及+/提高
pid: AT_abc271_f
tag: ['折半搜索 meet in the middle']
---

# [ABC271F] XOR on Grid Path

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc271/tasks/abc271_f

$ N $ 行 $ N $ 列のマス目があり、上から $ i\ \,\ (1\ \leq\ i\ \leq\ N) $ 行目、左から $ j\ \,\ (1\ \leq\ j\ \leq\ N) $ 列目のマスを $ (i,\ j) $ と表します。  
 マス $ (i,\ j) $ には非負整数 $ a_{i,\ j} $ が書かれています。

マス $ (i,\ j) $ にいるとき、マス $ (i+1,\ j),\ (i,\ j+1) $ のいずれかに移動することができます。ただし、マス目の外に出るような移動はできません。

マス $ (1,\ 1) $ から移動を繰り返してマス $ (N,\ N) $ にたどり着く方法であって、通ったマス（マス $ (1,\ 1),\ (N,\ N) $ を含む）に書かれた整数の排他的論理和が $ 0 $ となるようなものの総数を求めてください。

 排他的論理和とは 整数 $ a,\ b $ の排他的論理和 $ a\ \oplus\ b $ は、以下のように定義されます。 - $ a\ \oplus\ b $ を二進表記した際の $ 2^k\ \,\ (k\ \geq\ 0) $ の位の数は、$ a,\ b $ を二進表記した際の $ 2^k $ の位の数のうち一方のみが $ 1 $ であれば $ 1 $、そうでなければ $ 0 $ である。

 例えば、$ 3\ \oplus\ 5\ =\ 6 $ となります（二進表記すると $ 011\ \oplus\ 101\ =\ 110 $）。  
 一般に $ k $ 個の整数 $ p_1,\ \dots,\ p_k $ の排他的論理和は $ (\cdots\ ((p_1\ \oplus\ p_2)\ \oplus\ p_3)\ \oplus\ \cdots\ \oplus\ p_k) $ と定義され、これは $ p_1,\ \dots,\ p_k $ の順番によらないことが証明できます。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ a_{1,\ 1} $ $ \ldots $ $ a_{1,\ N} $ $ \vdots $ $ a_{N,\ 1} $ $ \ldots $ $ a_{N,\ N} $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 20 $
- $ 0\ \leq\ a_{i,\ j}\ \lt\ 2^{30}\ \,\ (1\ \leq\ i,\ j\ \leq\ N) $
- 入力は全て整数

### Sample Explanation 1

次の二通りの方法が条件を満たします。 - $ (1,\ 1)\ \rightarrow\ (1,\ 2)\ \rightarrow\ (1,\ 3)\ \rightarrow\ (2,\ 3)\ \rightarrow\ (3,\ 3) $ - $ (1,\ 1)\ \rightarrow\ (2,\ 1)\ \rightarrow\ (2,\ 2)\ \rightarrow\ (2,\ 3)\ \rightarrow\ (3,\ 3) $

## 样例 #1

### 输入

```
3

1 5 2

7 0 5

4 2 3
```

### 输出

```
2
```

## 样例 #2

### 输入

```
2

1 2

2 1
```

### 输出

```
0
```

## 样例 #3

### 输入

```
10

1 0 1 0 0 1 0 0 0 1

0 0 0 1 0 1 0 1 1 0

1 0 0 0 1 0 1 0 0 0

0 1 0 0 0 1 1 0 0 1

0 0 1 1 0 1 1 0 1 0

1 0 0 0 1 0 0 1 1 0

1 1 1 0 0 0 1 1 0 0

0 1 1 0 0 1 1 0 1 0

1 0 1 1 0 0 0 0 0 0

1 0 1 1 0 0 1 1 1 0
```

### 输出

```
24307
```



---

---
title: "[ABC402F] Path to Integer"
layout: "post"
diff: 普及+/提高
pid: AT_abc402_f
tag: ['搜索', '贪心', '二分', '双指针 two-pointer', '折半搜索 meet in the middle']
---

# [ABC402F] Path to Integer

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc402/tasks/abc402_f

有一个 $N$ 行 $N$ 列的网格。从上往下第 $i$ 行、从左往右第 $j$ 列的格子记作格子 $(i,j)$。每个格子上都写有 `1` 到 `9` 的数字，格子 $(i,j)$ 上写的数字是 $A_{i,j}$。

初始时，棋子位于格子 $(1,1)$。同时，设 $S$ 为空字符串，接下来进行 $2N-1$ 次操作：

1. 将当前棋子所在格子的数字追加到 $S$ 的末尾。
2. 将棋子向右或向下移动一格（第 $2N-1$ 次操作时不移动）。

$2N-1$ 次操作后，棋子将位于格子 $(N,N)$，且 $S$ 的长度为 $2N-1$。

将最终得到的字符串 $S$ 视为整数，其值对 $M$ 取模的结果即为得分。

请计算可以获得的最高得分。

## 输入格式

输入通过标准输入给出，格式如下：

> $N$ $M$  
> $A_{1,1}$ $A_{1,2}$ $\ldots$ $A_{1,N}$  
> $A_{2,1}$ $A_{2,2}$ $\ldots$ $A_{2,N}$  
> $\vdots$  
> $A_{N,1}$ $A_{N,2}$ $\ldots$ $A_{N,N}$


## 输出格式

输出答案。


## 说明/提示

### 约束条件

- $1 \leq N \leq 20$
- $2 \leq M \leq 10^9$
- $1 \leq A_{i,j} \leq 9$
- 输入中的所有数值均为整数

### 样例解释 1

棋子的移动方式有以下两种：
1. 按 $(1,1)\rightarrow(1,2)\rightarrow(2,2)$ 的顺序移动。此时 $S=$ `121`，得分为 $121 \bmod 7 = 2$。
2. 按 $(1,1)\rightarrow(2,1)\rightarrow(2,2)$ 的顺序移动。此时 $S=$ `131`，得分为 $131 \bmod 7 = 5$。

最高得分为 5，因此输出 5。

翻译由 DeepSeek V3 完成

## 样例 #1

### 输入

```
2 7
1 2
3 1
```

### 输出

```
5
```

## 样例 #2

### 输入

```
3 100000
1 2 3
3 5 8
7 1 2
```

### 输出

```
13712
```

## 样例 #3

### 输入

```
5 402
8 1 3 8 9
8 2 4 1 8
4 1 8 5 9
6 2 1 6 7
6 6 7 7 6
```

### 输出

```
384
```



---

---
title: "[AGC026C] String Coloring"
layout: "post"
diff: 普及+/提高
pid: AT_agc026_c
tag: ['搜索', '折半搜索 meet in the middle']
---

# [AGC026C] String Coloring

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc026/tasks/agc026_c

長さ $ 2N $ の，英小文字のみからなる文字列 $ S $ が与えられます。

$ S $ の各文字を赤色か青色かに塗り分ける方法は $ 2^{2N} $ 通りありますが，このうち以下の条件を満たす塗り分け方は何通りですか？

- 赤色に塗られた文字を**左から右に**読んだ文字列と，青色に塗られた文字を**右から左に**読んだ文字列が一致する

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ S $

## 输出格式

条件を満たす塗り分け方の個数を出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 18 $
- $ S $ の長さは $ 2N $ である
- $ S $ は英小文字のみからなる

### Sample Explanation 1

以下の $ 4 $ 通りの塗り分け方が存在します。 - cabaacba - cabaacba - cabaacba - cabaacba

### Sample Explanation 4

答えは32bit整数型で表せないこともあります。

## 样例 #1

### 输入

```
4

cabaacba
```

### 输出

```
4
```

## 样例 #2

### 输入

```
11

mippiisssisssiipsspiim
```

### 输出

```
504
```

## 样例 #3

### 输入

```
4

abcdefgh
```

### 输出

```
0
```

## 样例 #4

### 输入

```
18

aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
```

### 输出

```
9075135300
```



---


---
title: "[ABC338E] Chords"
layout: "post"
diff: 普及+/提高
pid: AT_abc338_e
tag: ['栈', 'ST 表']
---

# [ABC338E] Chords

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc338/tasks/abc338_e

円周上に $ 2N $ 個の点が等間隔に並んでおり、ある点から始めて時計回りに $ 1 $ から $ 2N $ までの番号が付けられています。

円周上にはさらに $ N $ 個の弦があり、$ i $ 個目の弦は点 $ A_i $ と点 $ B_i $ を結んでいます。 ここで、$ A_1,\dots,A_N,B_1,\dots,B_N $ は全て相異なることが保証されます。

弦どうしの交点が存在するかどうか判定してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ A_1 $ $ B_1 $ $ A_2 $ $ B_2 $ $ \vdots $ $ A_N $ $ B_N $

## 输出格式

弦どうしの交点が存在するならば `Yes` を、存在しないならば `No` を出力せよ。

## 说明/提示

### 制約

- $ 2\leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\leq\ A_i,B_i\ \leq\ 2N $
- $ A_1,\dots,A_N,B_1,\dots,B_N $ は全て相異なる
- 入力は全て整数

### Sample Explanation 1

!\[\](https://img.atcoder.jp/abc338/de1d9dd6cf38caec1c69fe035bdba545.png) 図のように、弦 $ 1 $（点 $ 1 $ と点 $ 3 $ を結ぶ線分）と弦 $ 2 $（点 $ 4 $ と点 $ 2 $ を結ぶ線分）が交点を持つので、`Yes` を出力します。

### Sample Explanation 2

!\[\](https://img.atcoder.jp/abc338/1b3b982c8d6ca59f00ca0edd218fb9c4.png) 図のように、弦どうしの交点は存在しないので、`No` を出力します。

## 样例 #1

### 输入

```
3
1 3
4 2
5 6
```

### 输出

```
Yes
```

## 样例 #2

### 输入

```
3
6 1
4 3
2 5
```

### 输出

```
No
```

## 样例 #3

### 输入

```
4
2 4
3 7
8 6
5 1
```

### 输出

```
Yes
```



---

---
title: "[ABC379F] Buildings 2"
layout: "post"
diff: 普及+/提高
pid: AT_abc379_f
tag: ['二分', '单调栈']
---

# [ABC379F] Buildings 2

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc379/tasks/abc379_f

ビル $ 1 $, ビル $ 2 $, $ \ldots $, ビル $ N $ の $ N $ 棟がこの順で東西に一列に並んでおり、ビル $ 1 $ が最も西に、ビル $ N $ が最も東に建っています。ビル $ i\ (1\leq\ i\leq\ N) $ の高さは $ H_i $ です。

整数の組 $ (i,j)\ (1\leq\ i\lt\ j\leq\ N) $ に対して、以下の条件を満たすとき ビル $ i $ からビル $ j $ を見ることができます。

- ビル $ i $ とビル $ j $ の間にビル $ j $ より高いビルが存在しない。すなわち、$ H_k\gt\ H_j $ を満たす整数 $ k\ (i\lt\ k\lt\ j) $ が存在しない。

$ Q $ 個の質問に答えてください。$ i $ 番目の質問では整数の組 $ (l_i,r_i)\ (l_i\lt\ r_i) $ が与えられるので、ビル $ r_i $ より東にあるビル（ビル $ r_i+1 $, ビル $ r_i+2 $,$ \ldots $,ビル $ N $ ）のうちビル $ l_i $ とビル $ r_i $ の両方から見ることができるものの個数を答えてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ Q $ $ H_1 $ $ H_2 $ $ \ldots $ $ H_N $ $ l_1 $ $ r_1 $ $ l_2 $ $ r_2 $ $ \vdots $ $ l_Q $ $ r_Q $

## 输出格式

$ Q $ 行出力せよ。$ i\ (1\leq\ i\leq\ Q) $ 行目には $ i $ 番目の質問に対する答えを出力せよ。

## 说明/提示

### 制約

- $ 2\leq\ N\leq\ 2\times\ 10^5 $
- $ 1\leq\ Q\leq\ 2\times\ 10^5 $
- $ 1\leq\ H_i\leq\ N $
- $ H_i\neq\ H_j\ (i\neq\ j) $
- $ 1\leq\ l_i\lt\ r_i\leq\ N $
- 入力は全て整数

### Sample Explanation 1

\- $ 1 $ つ目の質問について、ビル $ 2 $ より東にあるビルのうち ビル $ 1 $ とビル $ 2 $ の両方から見ることができるものはビル $ 3,5 $ の $ 2 $ つです。 - $ 2 $ つ目の質問について、ビル $ 5 $ より東にあるビルは存在しません。 - $ 3 $ つ目の質問について、ビル $ 4 $ より東にあるビルのうち、ビル $ 1,4 $ の両方から見ることができるビルはビル $ 5 $ の $ 1 $ つです。

## 样例 #1

### 输入

```
5 3
2 1 4 3 5
1 2
3 5
1 4
```

### 输出

```
2
0
1
```

## 样例 #2

### 输入

```
10 10
2 1 5 3 4 6 9 8 7 10
3 9
2 5
4 8
5 6
3 8
2 10
7 8
6 7
8 10
4 10
```

### 输出

```
1
3
1
2
1
0
1
1
0
0
```



---

---
title: "滑动窗口最大值"
layout: "post"
diff: 普及+/提高
pid: AT_abc407_f
tag: ['线段树', '树状数组', '差分', '单调栈']
---

# 滑动窗口最大值

## 题目描述

给你一个长度为 $N$ 的数列 $A=(A_1,\dots,A_N)$，请对于所有 $1\le k\le N$ 求解下面的问题：

- 求出 $A$ 的全部 $N-k+1$ 个连续子序列的最大值的和。

## 输入格式

将按照以下格式输入：

> $N$
>
> $A_1$ $ A_2$ $A_3$ $\dots$ $A_N$

## 输出格式

$N$ 行，第 $i$ 行为 $k=i$ 时所求解问题的答案。

## 说明/提示

### 数据规模与约定

- $1 \le N \le 2 \times 10^{5}$
- $0 \le A_i \le 10^{7} (1 \le i \le N)$
- 输入的所有数字为整数。

## 样例 #1

### 输入

```
4
5 3 4 2
```

### 输出

```
14
13
9
5
```

## 样例 #2

### 输入

```
8
2 0 2 5 0 5 2 4
```

### 输出

```
20
28
27
25
20
15
10
5
```

## 样例 #3

### 输入

```
11
9203973 9141294 9444773 9292472 5507634 9599162 497764 430010 4152216 3574307 430010
```

### 输出

```
61273615
68960818
69588453
65590626
61592799
57594972
47995810
38396648
28797486
19198324
9599162
```



---

---
title: "[AGC005B] Minimum Sum"
layout: "post"
diff: 普及+/提高
pid: AT_agc005_b
tag: ['线段树', '枚举', '单调栈']
---

# [AGC005B] Minimum Sum

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc005/tasks/agc005_b

すぬけ君はある日友人から長さ $ N $ の順列 $ a_1,\ a_2,\ ...,\ a_N $ を貰いました。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/AT_agc005_b/7385c80af4629f5f6d11fed58e1b38d3c006d06d.png)

を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ a_1 $ $ a_2 $ $ ... $ $ a_N $

## 输出格式

$ 1 $ 行に答えを出力する。

なお、32bit整数型に答えが収まるとは限らないことに注意すること。

## 说明/提示

### 制約

- $ 1\ ≦\ N\ ≦\ 200,000 $
- $ (a_1,\ a_2,\ ...,\ a_N) $ は $ (1,\ 2,\ ...,\ N) $ を並び替えたものである

## 样例 #1

### 输入

```
3

2 1 3
```

### 输出

```
9
```

## 样例 #2

### 输入

```
4

1 3 2 4
```

### 输出

```
19
```

## 样例 #3

### 输入

```
8

5 4 8 1 2 6 7 3
```

### 输出

```
85
```



---

---
title: "[AGC063B] Insert 1, 2, 3, ..."
layout: "post"
diff: 普及+/提高
pid: AT_agc063_b
tag: ['栈']
---

# [AGC063B] Insert 1, 2, 3, ...

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc063/tasks/agc063_b

正整数からなる数列 $ a\ =\ (a_1,\ \ldots,\ a_n) $ が**生成可能**であるとは，空列からはじめて次の操作の繰り返しで $ a $ が得られることをいいます．

- 操作：正整数 $ k $ を選び，列の好きな位置に $ (1,\ 2,\ \ldots,\ k-1,\ k) $ を挿入する．より形式的には，列 $ a\ =\ (a_1,\ \ldots,\ a_m) $ に対して $ 0\leq\ i\leq\ m $ となる整数 $ i $ および正整数 $ k $ を選び，$ a $ を $ (a_1,\ldots,a_{i},\ 1,\ 2,\ \ldots,\ k-1,\ k,\ a_{i+1},\ \ldots,\ a_m) $ に置き換える．
 
例えば $ a\ =\ (1,2,1,1,2,1,3,4,2,3) $ は生成可能です．次が生成手順の一例です：

$ ()\ \to\ (\boldsymbol{1,2})\ \to\ (1,2,\boldsymbol{1,2,3})\ \to\ (1,2,1,\boldsymbol{1,2,3,4},2,3)\ \to\ (1,2,1,1,2,\boldsymbol{1},3,4,2,3) $

- - - - - -

正整数からなる数列 $ A\ =\ (A_1,\ \ldots,\ A_N) $ が与えられます．次を満たす整数の組 $ (L,\ R) $ の個数を求めてください：

- $ 1\leq\ L\leq\ R\leq\ N $ であり，連続部分列 $ (A_L,\ \ldots,\ A_R) $ は生成可能である．

## 输入格式

入力は以下の形式で標準入力から与えられます．

> $ N $ $ A_1 $ $ \ldots $ $ A_N $

## 输出格式

条件を満たす整数の組 $ (L,\ R) $ の個数を出力してください．

## 说明/提示

### 制約

- $ 1\leq\ N\leq\ 5\times\ 10^5 $
- $ 1\leq\ A_i\leq\ N $
 
### Sample Explanation 1

次の $ 11 $ 個です： - $ (1,1),\ (1,2),\ (1,3),\ (1,4),\ (1,5),\ (1,6),\ (3,3),\ (3,4),\ (3,5),\ (3,6),\ (5,5) $

### Sample Explanation 2

すべての連続部分列が生成可能です．

## 样例 #1

### 输入

```
6

1 2 1 2 1 3
```

### 输出

```
11
```

## 样例 #2

### 输入

```
5

1 1 1 1 1
```

### 输出

```
15
```

## 样例 #3

### 输入

```
7

1 2 1 2 1 3 4
```

### 输出

```
13
```



---


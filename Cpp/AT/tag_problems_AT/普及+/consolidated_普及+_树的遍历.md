---
title: "[ABC385E] Snowflake Tree"
layout: "post"
diff: 普及+/提高
pid: AT_abc385_e
tag: ['数学', '树的遍历']
---

# [ABC385E] Snowflake Tree

## 题目描述

"雪花树"是通过以下步骤生成的树：

1. 选择正整数 $x,y$。
2. 准备一个顶点。
3. 再准备 $x$ 个顶点，并将它们每个都与步骤 2 中准备的顶点相连。
4. 对于步骤 3 中准备的每个 $x$ 个顶点，为其连接 $y$ 个叶子节点。

下图展示了一个 $x=4,y=2$ 的雪花树。在步骤 2、3、4 中准备的顶点分别用红色、蓝色和绿色表示。

![](https://img.atcoder.jp/abc385/b836ca95b1add288731cbe63816da3b1.png)

给定一个有 $N$ 个顶点的树 $T$。顶点编号从 1 到 $N$，第 $i$ 条边（$i=1,2,\dots,N-1$）连接顶点 $u_i$ 和 $v_i$。

考虑删除 $T$ 中零个或多个顶点及其相邻的边，使得剩余图形成为一个雪花树。求必须删除的最少顶点数。在本题的约束条件下，总是可以将 $T$ 转换为雪花树。

## 输入格式

输入从标准输入按以下格式给出：

> $N$  
$u_1$ $v_1$  
$u_2$ $v_2$  
$\vdots$  
$u_{N-1}$ $v_{N-1}$

## 输出格式

输出答案。

**【样例 1 解释】**

通过删除顶点 $8$，给定的树可以转换为一个 $x=2,y=2$ 的雪花树。

**【样例 2 解释】**

给定的树已经是一个 $x=1,y=1$ 的雪花树。

## 说明/提示

- $3 \leq N \leq 3 \times 10^5$
- $1 \leq u_i < v_i \leq N$
- 给定图是一棵树
- 所有输入值均为整数

## 样例 #1

### 输入

```
8

1 3

2 3

3 4

4 5

5 6

5 7

4 8
```

### 输出

```
1
```

## 样例 #2

### 输入

```
3

1 2

2 3
```

### 输出

```
0
```

## 样例 #3

### 输入

```
10

1 3

1 2

5 7

6 10

2 8

1 6

8 9

2 7

1 4
```

### 输出

```
3
```



---

---
title: "[ABC394F] Alkane"
layout: "post"
diff: 普及+/提高
pid: AT_abc394_f
tag: ['树形 DP', '树的遍历']
---

# [ABC394F] Alkane

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc394/tasks/abc394_f

给定一棵包含 $N$ 个顶点的无向树 $T$。顶点编号为 $1, 2, \ldots, N$，第 $i$ 条边连接顶点 $A_i$ 和顶点 $B_i$。

定义满足以下两个条件的图为**烷烃**：
- 该图是一棵无向树
- 所有顶点的度数为 $1$ 或 $4$，且至少存在一个度数为 $4$ 的顶点

请判断 $T$ 中是否存在满足烷烃定义的子图。若存在，求此类子图的顶点数的最大值；否则输出 $-1$。

## 输入格式

输入通过标准输入按以下格式给出：

> $N$  
> $A_1$ $B_1$  
> $A_2$ $B_2$  
> $\vdots$  
> $A_{N-1}$ $B_{N-1}$

## 输出格式

若存在满足烷烃定义的子图，输出其顶点数的最大值；否则输出 $-1$。

## 说明/提示

### 约束条件

- $1 \leq N \leq 2 \times 10^5$
- $1 \leq A_i, B_i \leq N$
- 输入的图是一棵无向树
- 所有输入值为整数

### 样例解释 1

选取顶点 $1, 2, 3, 4, 6, 7, 8, 9$ 及边 $(1,2)$、$(2,3)$、$(3,4)$、$(2,6)$、$(2,7)$、$(3,8)$、$(3,9)$ 构成的子图满足烷烃条件。其中顶点 $2$ 和顶点 $3$ 的度数为 $4$，其余顶点度数为 $1$，因此顶点数的最大值为 $8$。

翻译由 DeepSeek R1 完成

## 样例 #1

### 输入

```
9

1 2

2 3

3 4

4 5

2 6

2 7

3 8

3 9
```

### 输出

```
8
```

## 样例 #2

### 输入

```
7

1 2

1 3

2 4

2 5

3 6

3 7
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
15

8 5

2 9

1 12

6 11

9 3

15 1

7 12

7 13

10 5

6 9

5 1

1 9

4 5

6 14
```

### 输出

```
11
```



---

---
title: "[ARC161C] Dyed by Majority (Odd Tree)"
layout: "post"
diff: 普及+/提高
pid: AT_arc161_c
tag: ['树的遍历', '构造']
---

# [ARC161C] Dyed by Majority (Odd Tree)

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc161/tasks/arc161_c

$ N $ 頂点の木が与えられます． 頂点には $ 1 $ から $ N $ までの番号が付いており，$ i $ 番目の辺は頂点 $ A_i $ と頂点 $ B_i $ を結んでいます． また，すべての頂点について，**接続する辺の本数は奇数**です．

与えられた木の各頂点を黒 ( `B` ) か白 ( `W` ) のいずれかの色で塗ります． このとき，「各頂点の色（ `B` または `W` ）を頂点の番号順に並べて得られる文字列」を**色の列**と呼びます．

色の列 $ S $ が与えられます． すべての頂点に色が塗られた状態で以下の操作を $ 1 $ 回行った結果，色の列が $ S $ となることがあり得るかどうかを判定し，あり得るなら操作を行う前の色の列として適切なものを $ 1 $ つ求めてください．

**操作:** 各頂点 $ k\ =\ 1,\ 2,\ \dots,\ N $ に対して，辺で結ばれた頂点の色のうち過半数を占めるものを $ C_k $ とする． すべての頂点について同時に，頂点 $ k $ の色を $ C_k $ に塗り替える．

$ T $ 個のテストケースが与えられるので，それぞれについて答えてください．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ T $ $ \mathrm{case}_1 $ $ \mathrm{case}_2 $ $ \vdots $ $ \mathrm{case}_T $

各テストケース $ \mathrm{case}_i\ (1\ \leq\ i\ \leq\ T) $ は以下の形式である．

> $ N $ $ A_1 $ $ B_1 $ $ A_2 $ $ B_2 $ $ \vdots $ $ A_{N-1} $ $ B_{N-1} $ $ S $

## 输出格式

$ T $ 行出力せよ． $ i $ 行目には，$ i $ 番目のテストケースについて，操作の結果として色の列が $ S $ となることがあり得るなら操作を行う前の色の列として適切なものを，あり得ないなら `-1` を出力せよ． 操作を行う前の色の列として適切なものが複数存在する場合，そのような色の列のうちどれを出力しても正答と見なされる．

## 说明/提示

### 制約

- $ T\ \geq\ 1 $
- $ N\ \geq\ 2 $
- $ 1 $ つの入力に含まれるテストケースについて，$ N $ の総和は $ 2\ \times\ 10^5 $ 以下である．
- $ 1\ \leq\ A_i\ <\ B_i\ \leq\ N\ (1\ \leq\ i\ \leq\ N\ -\ 1) $
- 与えられる辺 $ (A_i,\ B_i)\ (1\ \leq\ i\ \leq\ N\ -\ 1) $ は木をなす．
- 各頂点 $ k\ (1\ \leq\ k\ \leq\ N) $ は $ A_i,\ B_i\ (1\ \leq\ i\ \leq\ N\ -\ 1) $ として**合計奇数回**現れる．
- $ S $ は `B`, `W` からなる長さ $ N $ の文字列である．
 
### Sample Explanation 1

$ 1 $ つ目のテストケースについて，操作を行う前の色の列が `WBBW` であったとします． このとき， - 頂点 $ 1 $ について，辺で結ばれた頂点 $ 2,\ 3,\ 4 $ の色はそれぞれ `B`, `B`, `W` であり，過半数を占めるのは $ C_1\ =\ {} $`B`， - 頂点 $ 2 $ について，辺で結ばれた頂点 $ 1 $ の色は `W` であり，過半数を占めるのは $ C_2\ =\ {} $`W`， - 頂点 $ 3 $ について，辺で結ばれた頂点 $ 1 $ の色は `W` であり，過半数を占めるのは $ C_3\ =\ {} $`W`， - 頂点 $ 4 $ について，辺で結ばれた頂点 $ 1 $ の色は `W` であり，過半数を占めるのは $ C_4\ =\ {} $`W` となります． したがって，操作後の色の列は `BWWW` となり，条件を満たします． 同様に，操作前の色の列が `WBBB`, `WBWB`, `WWBB` であった場合にも，操作後の色の列は `BWWW` となり，これらのうちどれを出力しても正答と見なされます。 $ 2 $ つ目のテストケースについて，入力された木において操作を行った結果，色の列が `BBWW` となることはあり得ません．

## 样例 #1

### 输入

```
2

4

1 2

1 3

1 4

BWWW

4

1 2

1 3

1 4

BBWW
```

### 输出

```
WBBW

-1
```



---


---
title: "[ABC377D] Many Segments 2"
layout: "post"
diff: 普及/提高-
pid: AT_abc377_d
tag: ['优先队列', '双指针 two-pointer']
---

# [ABC377D] Many Segments 2

## 题目描述

给定长度为 $N$ 的正整数列 $L=(L_1,L_2,\ldots,L_N),R=(R_1,R_2,\ldots,R_N)$ 和整数 $M$。

求同时满足以下条件的整数组 $(l,r)$ 的个数。

- $1\le l\le r\le M$

- 对于所有 $1\le i\le N$，区间 $[l,r]$ 不完全包含区间 $\left[L_i,R_i\right]$。

## 输入格式

输入按照如下标准给出：

> $N$ $M$\
> $L_1$ $R_1$\
> $L_2$ $R_2$\
> $\vdots$\
> $L_N$  $R_N$

## 输出格式

输出答案即可。

## 说明/提示

#### 约定

- $1\le N,M\le 2\times 10^5$
- $1\le L_i\le R_i\le M$
- 所有输入均为整数


 $(l,r)=(1,1),(2,2),(2,3),(3,3),(4,4)$ 这 $5$ 个都满足条件。

例如 $(l,r)=(1,3)$ 不满足条件。这是因为区间 $[1,3]$ 完全包含了区间 $[1,2]$。


此时不存在满足条件的整数对。


Translation by @[$\frak{Lorentz}$](/user/1232305) and @[Jie_XuSheng](/user/1332013)。

## 样例 #1

### 输入

```
2 4

1 2

3 4
```

### 输出

```
5
```

## 样例 #2

### 输入

```
6 5

1 1

2 2

3 3

4 4

5 5

1 5
```

### 输出

```
0
```

## 样例 #3

### 输入

```
6 20

8 12

14 20

11 13

5 19

4 11

1 6
```

### 输出

```
102
```



---

---
title: "[ABC381D] 1122 Substring"
layout: "post"
diff: 普及/提高-
pid: AT_abc381_d
tag: ['动态规划 DP', '双指针 two-pointer']
---

# [ABC381D] 1122 Substring

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc381/tasks/abc381_d

正整数からなる（空でも良い）数列 $ X=(X_1,X_2,\ldots) $ が以下の $ 3 $ つの条件をすべてみたすとき、かつそのときに限り、$ X $ を **1122 数列** と呼びます。  
（1122 数列の定義はF問題と共通です。）

- $ \lvert\ X\ \rvert $ は偶数である。ここで、$ \lvert\ X\ \rvert $ は $ X $ の長さを表す。
- $ 1\leq\ i\leq\ \frac{\lvert\ X\ \rvert}{2} $ をみたす整数 $ i $ について、$ X_{2i-1} $ と $ X_{2i} $ は等しい。
- 各正整数は $ X $ に現れないか、ちょうど $ 2 $ 回現れるかのどちらかである。すなわち、$ X $ に含まれる正整数は $ X $ にちょうど $ 2 $ 回ずつ登場する。

正整数からなる長さ $ N $ の数列 $ A=(A_1,A_2,\ldots,A_N) $ が与えられるので、$ A $ の **連続する部分列** であって、1122 数列であるようなもののうち最長のものの長さを出力してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ A_1 $ $ A_2 $ $ \ldots $ $ A_N $

## 输出格式

$ A $ の連続する部分列であって、1122 数列であるようなもののうち最長のものの長さを出力せよ。

## 说明/提示

### 制約

- $ 1\leq\ N\ \leq\ 2\times\ 10^5 $
- $ 1\leq\ A_i\ \leq\ N $
- 入力はすべて整数

### Sample Explanation 1

例えば $ A $ の $ 3 $ 項目から $ 6 $ 項目までの連続部分列をとると $ (1,1,2,2) $ となりますが、これは長さが $ 4 $ の 1122 数列となっています。 これより長い部分列であって、1122 数列の条件をみたすようなものは存在しないため、$ 4 $ を出力します。

### Sample Explanation 3

項数が $ 0 $ の列も 1122 数列の条件をみたしていることに注意してください。

## 样例 #1

### 输入

```
8
2 3 1 1 2 2 1 1
```

### 输出

```
4
```

## 样例 #2

### 输入

```
3
1 2 2
```

### 输出

```
2
```

## 样例 #3

### 输入

```
1
1
```

### 输出

```
0
```



---

---
title: "[ABC384D] Repeated Sequence"
layout: "post"
diff: 普及/提高-
pid: AT_abc384_d
tag: ['二分', '前缀和', '双指针 two-pointer']
---

# [ABC384D] Repeated Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc384/tasks/abc384_d

周期 $ N $ をもつ無限数列 $ A=(A\ _\ 1,A\ _\ 2,A\ _\ 3,\dotsc) $ の先頭 $ N $ 項 $ A\ _\ 1,A\ _\ 2,\dotsc,A\ _\ N $ が与えられます。

この数列の空でない連続する部分列のうち、和が $ S $ となるものが存在するか判定してください。

ただし、無限数列 $ A $ が周期 $ N $ をもつとは、$ i\gt\ N $ を満たすすべての整数 $ i $ に対して $ A\ _\ i=A\ _\ {i-N} $ が成り立つことをいいます。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ S $ $ A\ _\ 1 $ $ A\ _\ 2 $ $ \dotsc $ $ A\ _\ N $

## 输出格式

$ A $ の連続する部分列 $ (A\ _\ l,A\ _\ {l+1},\dotsc,A\ _\ r) $ であって、$ A\ _\ l+A\ _\ {l+1}+\dotsb+A\ _\ r=S $ となるものが存在するならば `Yes` を、そうでないならば `No` を出力せよ。

## 说明/提示

### 制約

- $ 1\leq\ N\leq2\times10\ ^\ 5 $
- $ 1\leq\ A\ _\ i\leq\ 10\ ^\ 9 $
- $ 1\leq\ S\leq\ 10\ ^\ {18} $
- 入力はすべて整数
 
### Sample Explanation 1

数列 $ A $ は $ (3,8,4,3,8,4,3,8,4,\dotsc) $ のようになります。 $ A $ の部分列 $ (A\ _\ 2,A\ _\ 3,A\ _\ 4,A\ _\ 5,A\ _\ 6,A\ _\ 7,A\ _\ 8,A\ _\ 9)=(8,4,3,8,4,3,8,4) $ について $ 8+4+3+8+4+3+8+4=42 $ が成り立つので、`Yes` を出力してください。

### Sample Explanation 2

$ A $ の要素はすべて $ 3 $ 以上なので、$ A $ の空でない連続する部分列の総和は $ 3 $ 以上です。 よって、総和が $ 1 $ となるような部分列は存在しないため、`No` を出力してください。

## 样例 #1

### 输入

```
3 42

3 8 4
```

### 输出

```
Yes
```

## 样例 #2

### 输入

```
3 1

3 8 4
```

### 输出

```
No
```

## 样例 #3

### 输入

```
20 83298426

748 169 586 329 972 529 432 519 408 587 138 249 656 114 632 299 984 755 404 772
```

### 输出

```
Yes
```

## 样例 #4

### 输入

```
20 85415869

748 169 586 329 972 529 432 519 408 587 138 249 656 114 632 299 984 755 404 772
```

### 输出

```
No
```



---

---
title: "[ABC388E] Simultaneous Kagamimochi"
layout: "post"
diff: 普及/提高-
pid: AT_abc388_e
tag: ['双指针 two-pointer']
---

# [ABC388E] Simultaneous Kagamimochi

## 题目描述

有 $N$ 个大小不一的饼。第 $i$ 个饼的大小为 $a_i$（$1 \le i \le N$）。

对于任意两个大小分别为 $a$ 和 $b$ 的饼 $A$ 和 $B$，如果 $a$ 小于或等于 $b$ 的一半，即 $a\le \frac{b}{2}$，则可以将饼 $A$ 放在饼 $B$ 上制作一个“镜饼”。

从 $N$ 个饼中任选两个，使得其中一个饼放在另一个饼上制作一个“镜饼”。

需要求出可以**同时**制作多少种不同的“镜饼”。

**Translate by [chinazhanghaoxun](https://luogu.com.cn/user/684848)。**

## 输入格式

输入将以以下格式通过标准输入给出：

> $N \ A_1\ A_2\ \dots\ A_N$

## 输出格式

输出可以制作的镜饼数。
### 数据限制
- $2\le N\le 5\times 10^5$
- $1\le A_i \le 10^9(1\le i\le N)$
- $A_i\le A_{i+1}(1\le i\le N)$
- 输入值均为整数

## 样例 #1

### 输入

```
6

2 3 4 4 7 10
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3

387 388 389
```

### 输出

```
0
```

## 样例 #3

### 输入

```
24

307 321 330 339 349 392 422 430 477 481 488 537 541 571 575 602 614 660 669 678 712 723 785 792
```

### 输出

```
6
```



---


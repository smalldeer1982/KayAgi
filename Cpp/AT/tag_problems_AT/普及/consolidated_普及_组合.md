---
title: "[ABC375D] ABA"
layout: "post"
diff: 普及/提高-
pid: AT_abc375_d
tag: ['排列组合']
---

# [ABC375D] ABA

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc375/tasks/abc375_d

英大文字からなる文字列 $ S $ が与えられます。

整数の組 $ (i,\ j,\ k) $ であって、以下の条件をともに満たすものの個数を求めてください。

- $ 1\ \leq\ i\ <\ j\ <\ k\ \leq\ |S| $
- $ S_i $, $ S_j $, $ S_k $ をこの順に結合して得られる長さ $ 3 $ の文字列が回文となる
 
ただし、$ |S| $ は文字列 $ S $ の長さ、$ S_x $ は $ S $ の $ x $ 番目の文字を指します。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ S $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ S $ は長さ $ 1 $ 以上 $ 2\ \times\ 10^5 $ 以下の英大文字からなる文字列
 
### Sample Explanation 1

$ (i,\ j,\ k)\ =\ (1,\ 2,\ 4),\ (1,\ 3,\ 4),\ (3,\ 4,\ 5),\ (3,\ 4,\ 6),\ (3,\ 5,\ 6) $ が条件を満たします。

## 样例 #1

### 输入

```
ABCACC
```

### 输出

```
5
```

## 样例 #2

### 输入

```
OOOOOOOO
```

### 输出

```
56
```

## 样例 #3

### 输入

```
XYYXYYXYXXX
```

### 输出

```
75
```



---

---
title: "[ABC402D] Line Crossing"
layout: "post"
diff: 普及/提高-
pid: AT_abc402_d
tag: ['数学', '组合数学', '标签482']
---

# [ABC402D] Line Crossing

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc402/tasks/abc402_d

在圆周上等间距地排列着 $N$ 个点，按顺时针方向依次编号为 $1,2,\ldots,N$。

有 $M$ 条互不相同的**直线**，其中第 $i$ 条直线通过两个不同的点：点 $A_i$ 和点 $B_i$（$1 \leq i \leq M$）。

请计算满足以下两个条件的整数对 $(i,j)$ 的个数：

1. $1 \leq i < j \leq M$
2. 第 $i$ 条直线与第 $j$ 条直线相交

## 输入格式

输入通过标准输入给出，格式如下：

> $N$ $M$  
> $A_1$ $B_1$  
> $A_2$ $B_2$  
> $\vdots$  
> $A_M$ $B_M$

## 输出格式

输出答案。

## 说明/提示

### 约束条件

- $2 \leq N \leq 10^6$
- $1 \leq M \leq 3 \times 10^{5}$
- $1 \leq A_i < B_i \leq N$（$1 \leq i \leq M$）
- $(A_i,B_i) \neq (A_j,B_j)$（$i \neq j$）
- 输入中的所有数值均为整数

### 样例解释 1

如图所示，圆周上有 $8$ 个点和 $3$ 条直线：  
![](https://img.atcoder.jp/abc402/82c44ea5d5dd6546c7c8f32447490107.png)  
- 第 $1$ 条直线与第 $2$ 条直线相交  
- 第 $1$ 条直线与第 $3$ 条直线不相交  
- 第 $2$ 条直线与第 $3$ 条直线相交  

满足条件的整数对为 $(i,j)=(1,2),(2,3)$，因此输出 $2$。

翻译由 DeepSeek V3 完成

## 样例 #1

### 输入

```
8 3

1 5

1 8

2 4
```

### 输出

```
2
```

## 样例 #2

### 输入

```
5 10

2 5

1 5

1 2

2 4

2 3

1 3

1 4

3 5

3 4

4 5
```

### 输出

```
40
```



---

---
title: "[ABC405E] Fruit Lineup"
layout: "post"
diff: 普及/提高-
pid: AT_abc405_e
tag: ['组合数学']
---

# [ABC405E] Fruit Lineup

## 题目描述

你有 $A$ 个苹果，$B$ 个橙子，$C$ 串香蕉，$D$ 串葡萄。同种水果之间是完全相同的。

求把它们从左往右排成一排的方案数，方案需要满足：
- 所有的苹果都在所有的香蕉的左边；
- 所有的苹果都在所有的葡萄的左边；
- 所有的橙子都在所有的葡萄的左边。

答案对 $998244353$ 取模。

## 输入格式

一行四个整数 $A,B,C,D(1\le A,B,C,D\le 10^6)$。

## 输出格式

输出一行一个整数，为答案对 $998244353$ 取模后的结果。

## 说明/提示

**样例 1 解释**

以下为所有 $5$ 种合法的排列方案：
- 苹果，橙子，香蕉，葡萄
- 苹果，橙子，葡萄，香蕉
- 苹果，香蕉，橙子，葡萄
- 橙子，苹果，香蕉，葡萄
- 橙子，苹果，葡萄，香蕉

By @[chenxi2009](/user/1020063)

## 样例 #1

### 输入

```
1 1 1 1
```

### 输出

```
5
```

## 样例 #2

### 输入

```
1 2 4 8
```

### 输出

```
2211
```

## 样例 #3

### 输入

```
834150 21994 467364 994225
```

### 输出

```
947921688
```



---

---
title: "[AGC031A] Colorful Subsequence"
layout: "post"
diff: 普及/提高-
pid: AT_agc031_a
tag: ['排列组合']
---

# [AGC031A] Colorful Subsequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc031/tasks/agc031_a

長さ $ N $ の文字列 $ S $ が与えられます。 $ S $ の部分列であって、すべて異なる文字からなるものの数を $ 10^9+7 $ で割った余りを答えてください。文字列として同一でも、異なる位置から取り出された部分列は区別して数えることとします。

ただし、文字列の部分列とは、文字列から文字をいくつか **正の個数** 取り出し、もとの文字列から順序を変えずにつなげたものを指します。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ S $

## 输出格式

異なる文字からなる部分列の個数を $ 10^9+7 $ で割った余りを出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 100000 $
- $ S $ は英小文字からなる
- $ |S|=N $

### Sample Explanation 1

$ S $ 自体がすべて異なる文字からなるので、すべての部分列が条件を満たします。

### Sample Explanation 2

`b`, `a` ($ 2 $ 通り), `ba` ($ 2 $ 通り) の合計 $ 5 $ 通りが答えとなります。`baa` などは`a`が $ 2 $ 回現れるため当てはまらないことに注意してください。

## 样例 #1

### 输入

```
4

abcd
```

### 输出

```
15
```

## 样例 #2

### 输入

```
3

baa
```

### 输出

```
5
```

## 样例 #3

### 输入

```
5

abcab
```

### 输出

```
17
```



---

---
title: "[ARC180A] ABA and BAB"
layout: "post"
diff: 普及/提高-
pid: AT_arc180_a
tag: ['数学', '排列组合']
---

# [ARC180A] ABA and BAB

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc180/tasks/arc180_a

`A`, `B` からなる長さ $ N $ の文字列 $ S $ が与えられます．

あなたは以下の $ 2 $ 種類の操作を好きな順序で $ 0 $ 回以上繰り返すことができます．

- $ S $ の中で `ABA` となっている (連続した) 部分を選び，それを `A` で置き換える．
- $ S $ の中で `BAB` となっている (連続した) 部分を選び，それを `B` で置き換える．
 
操作後の $ S $ としてあり得る文字列の個数を $ 10^9+7 $ で割ったあまりを求めてください．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ S $

## 输出格式

答えを出力せよ．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 250000 $
- $ S $ は `A`, `B` からなる長さ $ N $ の文字列
 
### Sample Explanation 1

操作後の $ S $ としてあり得るのは以下の $ 2 $ 種類の文字列です． - `ABAB`: $ 0 $ 回の操作を行うことでこの文字列を得ることができます． - `AB`: $ S= $`ABAB` の $ 1 $ 文字目から $ 3 $ 文字目までが `ABA` となっています．これを `A` で置き換えると $ S= $`AB` となります． なお，$ S= $`ABAB` の $ 2 $ 文字目から $ 4 $ 文字目までが `BAB` となっているので，これを `B` に置き換える操作も可能です． ただし，その結果得られる `AB` は重複して数えないことに注意してください．

### Sample Explanation 2

操作を $ 1 $ 度も行うことができません．

### Sample Explanation 4

$ 10^9+7 $ で割ったあまりを求めるのを忘れないようにしてください．

## 样例 #1

### 输入

```
4

ABAB
```

### 输出

```
2
```

## 样例 #2

### 输入

```
1

A
```

### 输出

```
1
```

## 样例 #3

### 输入

```
17

BBABABAABABAAAABA
```

### 输出

```
18
```

## 样例 #4

### 输入

```
100

ABAABAABABBABAABAABAABABBABBABBABBABBABBABBABBABBABBABBABBABBABBABAABABAABABBABBABABBABAABAABAABAABA
```

### 输出

```
415919090
```



---


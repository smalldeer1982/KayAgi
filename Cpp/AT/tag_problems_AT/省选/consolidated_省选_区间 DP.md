---
title: "[AGC035D] Add and Remove"
layout: "post"
diff: 省选/NOI-
pid: AT_agc035_d
tag: ['动态规划 DP', '记忆化搜索', '区间 DP', '动态规划优化']
---

# [AGC035D] Add and Remove

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc035/tasks/agc035_d

非負整数のひとつ書かれたカードが $ N $ 枚積まれた山があります。上から $ i $ 番目のカードに書かれた整数は $ A_i $ です。

すぬけ君は、以下の操作をカードが $ 2 $ 枚になるまで繰り返します。

- 連続して積まれている $ 3 $ 枚のカードを選ぶ。
- $ 3 $ 枚のうち真ん中のカードを食べる。
- あとの $ 2 $ 枚のカードに書かれている整数を、その整数に食べたカードに書かれていた整数を足してできる整数に書き換える。
- 食べなかった $ 2 $ 枚のカードを、順序を保ったまま山のもとの位置に戻す。

最終的に残る $ 2 $ 枚のカードに書かれた整数の和の最小値を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ A_1 $ $ A_2 $ $ ... $ $ A_N $

## 输出格式

最終的に残る $ 2 $ 枚のカードに書かれた整数の和の最小値を出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 18 $
- $ 0\ \leq\ A_i\ \leq\ 10^9\ (1\leq\ i\leq\ N) $
- 入力はすべて整数である

### Sample Explanation 1

以下の操作を行うことで、最終的に残る $ 2 $ 枚のカードに書かれた整数の和を最小にできます。 - 最初、カードに書かれた整数は順に $ 3,1,4,2 $ である。 - $ 1,2,3 $ 番目のカードを選ぶ。$ 1 $ の書かれた $ 2 $ 枚目のカードを食べ、残ったカードに書かれた整数に $ 1 $ を足し、山のもとの位置に戻す。カードに書かれた整数は順に $ 4,5,2 $ となる。 - $ 1,2,3 $ 番目のカードを選ぶ。$ 5 $ の書かれた $ 2 $ 枚目のカードを食べ、残ったカードに書かれた整数に $ 5 $ を足し、山のもとの位置に戻す。カードに書かれた整数は順に $ 9,7 $ となる。 - 最後に残った $ 2 $ 枚のカードに書かれた整数の和は $ 16 $ になる。

## 样例 #1

### 输入

```
4

3 1 4 2
```

### 输出

```
16
```

## 样例 #2

### 输入

```
6

5 2 4 1 6 9
```

### 输出

```
51
```

## 样例 #3

### 输入

```
10

3 1 4 1 5 9 2 6 5 3
```

### 输出

```
115
```



---

---
title: "[ARC178D] Delete Range Mex"
layout: "post"
diff: 省选/NOI-
pid: AT_arc178_d
tag: ['动态规划 DP', '区间 DP']
---

# [ARC178D] Delete Range Mex

## 题目描述

[problemUrl]: https://atcoder.jp/contests/arc178/tasks/arc178_d

正整数 $ N $ と長さ $ M $ の非負整数列 $ A=(A_{1},A_{2},\dots,\ A_{M}) $ が与えられます。

ここで、 $ A $ の全ての要素は $ 0 $ 以上 $ N $ 未満の整数で、相異なります。

$ (0,\ 1,\ \dots\ ,\ N\ -\ 1) $ の順列 $ P $ のうち、以下の条件を満たすものの個数を $ 998244353 $ で割ったあまりを求めてください。

- 数列 $ B\ =\ (B_{1},\ B_{2},\ \dots\ ,\ B_{N}) $ を $ P $ で初期化した後、以下の操作を好きな回数繰り返すことで $ B\ =\ A $ にすることができる。
  - $ 1\leq\ l\leq\ r\leq\ |B| $ を満たす $ l,r $ を選び、 $ \mathrm{mex}(\{B_{l},B_{l+1},\dots\ ,B_{r}\}) $ が $ B $ に含まれているなら、それを $ B $ から削除する。
 
   $ \mathrm{mex}(X) $ とは？ 非負整数からなる有限集合 $ X $ に対し，$ x\notin\ X $ を満たす最小の非負整数 $ x $ を $ \mathrm{mex}(X) $ と定義します．

## 输入格式

入力は以下の形式で標準入力から与えられます。

> $ N $ $ M $ $ A_{1} $ $ A_{2} $ $ \cdots $ $ A_{M} $

## 输出格式

答えを出力してください。

## 说明/提示

### 制約

- $ 1\leq\ M\leq\ N\leq\ 500 $
- $ 0\leq\ A_{i}\ <\ N $
- $ A $ の要素は互いに相異なる
- 入力は全て整数
 
### Sample Explanation 1

$ B\ =\ (2,\ 1,\ 0,\ 3) $ で初期化したのち、以下の手順で $ B=A $ とすることが可能です。 - $ (l,r)\ =\ (2,\ 4) $ を選び、$ B $ から $ \mathrm{mex}(\{1,0,3\})\ =\ 2 $ を削除し、$ B=(1,0,3) $ とする。 - $ (l,r)\ =\ (3,\ 3) $ を選び、$ B $ から $ \mathrm{mex}(\{3\})\ =\ 0 $ を削除し、$ B=(1,\ 3) $ とする。 よって、$ P=(2,\ 1,\ 0,\ 3) $ は条件を満たします。 条件を満たす $ P $ はこれを含めて $ 8 $ 通りあるので、$ 8 $ を出力してください。

### Sample Explanation 2

$ P\ =\ (0,\ 3,\ 2,\ 1) $ のときのみ条件を満たします。

### Sample Explanation 4

$ 998244353 $ で割ったあまりを求めてください。

## 样例 #1

### 输入

```
4 2

1 3
```

### 输出

```
8
```

## 样例 #2

### 输入

```
4 4

0 3 2 1
```

### 输出

```
1
```

## 样例 #3

### 输入

```
16 7

9 2 4 0 1 6 7
```

### 输出

```
3520
```

## 样例 #4

### 输入

```
92 4

1 67 16 7
```

### 输出

```
726870122
```



---


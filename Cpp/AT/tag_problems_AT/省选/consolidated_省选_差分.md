---
title: "[ABC180F] Unbranched"
layout: "post"
diff: 省选/NOI-
pid: AT_abc180_f
tag: ['动态规划 DP', '组合数学', '差分']
---

# [ABC180F] Unbranched

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc180/tasks/abc180_f

頂点にラベルが付き辺にはラベルが付いていない $ N $ 頂点 $ M $ 辺の単純とも連結とも限らないグラフであって、以下の条件を満たすものの個数を $ 10^9+7 $ で割ったあまりを求めてください。

- 自己ループを持たない
- すべての頂点の次数が $ 2 $ 以下である
- 各連結成分のサイズを並べたとき、その最大値がちょうど $ L $ である

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $ $ L $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 300 $
- $ 1\leq\ M\ \leq\ N $
- $ 1\ \leq\ L\ \leq\ N $
- 入力はすべて整数

### Sample Explanation 1

頂点に $ 1 $ から $ N $ の番号を付けたとき、以下の $ 3 $ 通りのグラフが条件を満たします。 - $ 1-2 $ 間と $ 2-3 $ 間に辺がある。 - $ 1-2 $ 間と $ 1-3 $ 間に辺がある。 - $ 1-3 $ 間と $ 2-3 $ 間に辺がある。

## 样例 #1

### 输入

```
3 2 3
```

### 输出

```
3
```

## 样例 #2

### 输入

```
4 3 2
```

### 输出

```
6
```

## 样例 #3

### 输入

```
300 290 140
```

### 输出

```
211917445
```



---

---
title: "[AGC003E] Sequential operations on Sequence"
layout: "post"
diff: 省选/NOI-
pid: AT_agc003_e
tag: ['递归', '栈', '差分']
---

# [AGC003E] Sequential operations on Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc003/tasks/agc003_e

高橋君はお母さんから数列をもらいました。この数列の長さは $ N $ で、$ i(1\ ≦\ i\ ≦\ N) $ 項目の要素は $ i $ です。 高橋君は、この数列に以下の操作を合計で $ Q $ 回行いました。$ i $ 番目の操作は、パラメータ $ q_i $ であらわされ、以下のように行われます。

- いまの数列を無限回繰り返した数列の先頭 $ q_i $ 項をとって、新たな数列とする。

$ Q $ 回の操作後、この数列に $ 1 $ から $ N $ までの各々の数が何回ずつ現れるかを求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ Q $ $ q_1 $ : $ q_Q $

## 输出格式

$ N $ 行出力せよ。$ i(1\ ≦\ i\ ≦\ N) $ 行目には、$ Q $ 回の操作後の数列にあらわれる数 $ i $ の個数を表す整数ひとつを出力せよ。

## 说明/提示

### 制約

- $ 1\ ≦\ N\ ≦\ 10^5 $
- $ 0\ ≦\ Q\ ≦\ 10^5 $
- $ 1\ ≦\ q_i\ ≦\ 10^{18} $
- 入力はすべて整数である。

### Sample Explanation 1

$ 1 $ 回目の操作で、数列は $ 1,2,3,4,5,1 $ となります。 $ 2 $ 回目の操作で、数列は $ 1,2,3,4 $ となります。 $ 3 $ 回目の操作で、数列は $ 1,2,3,4,1,2,3,4,1,2,3 $ となります。 この数列には $ 1,2,3,4,5 $ がそれぞれ $ 3,3,3,2,0 $ 個含まれているので、上のように出力します。

## 样例 #1

### 输入

```
5 3

6

4

11
```

### 输出

```
3

3

3

2

0
```

## 样例 #2

### 输入

```
10 10

9

13

18

8

10

10

9

19

22

27
```

### 输出

```
7

4

4

3

3

2

2

2

0

0
```



---

---
title: "[AGC006C] Rabbit Exercise"
layout: "post"
diff: 省选/NOI-
pid: AT_agc006_c
tag: ['倍增', '期望', '差分']
---

# [AGC006C] Rabbit Exercise

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc006/tasks/agc006_c

$ N $ 匹のうさぎがいます。 うさぎ達は $ 1 $ から $ N $ まで番号が振られています。 最初、うさぎ $ i $ は数直線上の座標 $ x_i $ にいます。

うさぎ達は体操をすることにしました。 $ 1 $ セット分の体操は、次のような合計 $ M $ 回のジャンプからなります。 $ j $ 回目のジャンプでは、うさぎ $ a_j $ ($ 2\ <\ =a_j\ <\ =N-1 $) がジャンプします。 このとき、うさぎ $ a_j-1 $ かうさぎ $ a_j+1 $ のどちらかが等確率で選ばれ（これをうさぎ $ x $ とします）、うさぎ $ a_j $ はうさぎ $ x $ に関して対称な座標へジャンプします。

以上の合計 $ M $ 回のジャンプを $ 1 $ セット分の体操として、うさぎ達は $ K $ セット分の体操を続けて繰り返します。 各うさぎについて、最終的な座標の期待値を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ x_1 $ $ x_2 $ $ ... $ $ x_N $ $ M $ $ K $ $ a_1 $ $ a_2 $ $ ... $ $ a_M $

## 输出格式

$ N $ 行出力せよ。 $ i $ 行目には、うさぎ $ i $ の最終的な座標の期待値を出力せよ。 絶対誤差または相対誤差が $ 10^{-9} $ 以下ならば正解となる。

## 说明/提示

### 制約

- $ 3\ <\ =N\ <\ =10^5 $
- $ x_i $ は整数である。
- $ |x_i|\ <\ =10^9 $
- $ 1\ <\ =M\ <\ =10^5 $
- $ 2\ <\ =a_j\ <\ =N-1 $
- $ 1\ <\ =K\ <\ =10^{18} $

### Sample Explanation 1

うさぎ $ 2 $ がジャンプします。 うさぎ $ 1 $ に関して対称な座標へジャンプすると、座標 $ -2 $ へ移動します。 うさぎ $ 3 $ に関して対称な座標へジャンプすると、座標 $ 4 $ へ移動します。 よって、うさぎ $ 2 $ の最終的な座標の期待値は $ 0.5×(-2)+0.5×4=1.0 $ です。

### Sample Explanation 2

$ x_i $ は相異なるとは限りません。

## 样例 #1

### 输入

```
3

-1 0 2

1 1

2
```

### 输出

```
-1.0

1.0

2.0
```

## 样例 #2

### 输入

```
3

1 -1 1

2 2

2 2
```

### 输出

```
1.0

-1.0

1.0
```

## 样例 #3

### 输入

```
5

0 1 3 6 10

3 10

2 3 4
```

### 输出

```
0.0

3.0

7.0

8.0

10.0
```



---

---
title: "[AGC049D] Convex Sequence"
layout: "post"
diff: 省选/NOI-
pid: AT_agc049_d
tag: ['背包 DP', '差分']
---

# [AGC049D] Convex Sequence

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc049/tasks/agc049_d

整数 $ N $ と $ M $ が与えられます． 長さ $ N $ の非負整数列 $ (A_1,A_2,\ldots,A_N) $ であって，次の条件を満たすものの個数を$ \bmod\ (10^9+7) $ で求めてください．

- $ A_1+A_2+\ldots\ +A_N\ =\ M $
- すべての $ i $ ($ 2\ \leq\ i\ \leq\ N-1 $) について，$ 2\ A_i\ \leq\ A_{i-1}\ +\ A_{i+1} $

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ M $

## 输出格式

条件を満たす数列の個数を$ \bmod\ (10^9+7) $ で出力せよ．

## 说明/提示

### 制約

- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ M\ \leq\ 10^5 $
- 入力はすべて整数である．

### Sample Explanation 1

以下の $ 7 $ 個の数列が条件を満たします． - $ 0,0,3 $ - $ 0,1,2 $ - $ 1,0,2 $ - $ 1,1,1 $ - $ 2,0,1 $ - $ 2,1,0 $ - $ 3,0,0 $

## 样例 #1

### 输入

```
3 3
```

### 输出

```
7
```

## 样例 #2

### 输入

```
10 100
```

### 输出

```
10804516
```

## 样例 #3

### 输入

```
10000 100000
```

### 输出

```
694681734
```



---

---
title: "[AGC056C] 01 Balanced"
layout: "post"
diff: 省选/NOI-
pid: AT_agc056_c
tag: ['差分约束']
---

# [AGC056C] 01 Balanced

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc056/tasks/agc056_c

`0`, `1` からなる長さ $ N $ の文字列 $ s $ を作ることを考えます． ここで，$ s $ は $ M $ 個の条件を満たす必要があります． $ i $ 番目の条件は整数 $ L_i,R_i $ ($ 1\ \leq\ L_i\ <\ R_i\ \leq\ N $) で表されます． これは，$ s $ の $ L_i $ 文字目から $ R_i $ 文字目までを見たときに，そこに含まれる `0` の個数と `1` の個数が等しい必要があることを意味します．

すべての条件を満たす中で辞書順最小の $ s $ を求めてください． なお，問題の制約より，条件を満たす $ s $ が必ず存在することが証明できます．

## 输入格式

入力は以下の形式で標準入力から与えられる．

> $ N $ $ M $ $ L_1 $ $ R_1 $ $ L_2 $ $ R_2 $ $ \vdots $ $ L_M $ $ R_M $

## 输出格式

答えを出力せよ．

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 10^6 $
- $ 1\ \leq\ M\ \leq\ 200000 $
- $ 1\ \leq\ L_i\ <\ R_i\ \leq\ N $
- $ (R_i-L_i+1)\ \equiv\ 0\ \mod\ 2 $
- $ (L_i,R_i)\ \neq\ (L_j,R_j) $ ($ i\ \neq\ j $)
- 入力される値はすべて整数である

## 样例 #1

### 输入

```
4 2

1 2

3 4
```

### 输出

```
0101
```

## 样例 #2

### 输入

```
6 2

1 4

3 6
```

### 输出

```
001100
```

## 样例 #3

### 输入

```
20 10

6 17

2 3

14 19

5 14

10 15

7 20

10 19

3 20

6 9

7 12
```

### 输出

```
00100100101101001011
```



---

---
title: "IOIOI カード占い"
layout: "post"
diff: 省选/NOI-
pid: AT_joisc2015_d
tag: ['2015', '最短路', '构造', '差分', 'JOI（日本）']
---

# IOIOI カード占い

## 题目描述

[problemUrl]: https://atcoder.jp/contests/joisc2015/tasks/joisc2015_d





---

---
title: "Repeat Strings"
layout: "post"
diff: 省选/NOI-
pid: AT_qupc2018_j
tag: ['差分', '根号分治']
---

# Repeat Strings

## 题目描述

给定一个由字符 `a` 和 `b` 组成的字符串 $S$，你可以依次进行若干次以下操作：

- 从字符串 $S$ 中选择一个连续的区间 $[l, r]$。对于该区间内满足 $l \leq k \leq r$ 的每个位置 $k$，如果 $S_k$ 是 `a`，就将其变为 `b`；如果 $S_k$ 是 `b`，就将其变为 `a`。

接下来，有 $Q$ 个字符串 $T_i$，每个也是由 `a` 和 `b` 构成。将每个 $T_i$ 重复 $10^{100}$ 次，截取长度为 $|S| + 1$ 的前缀，得到一个新的字符串 $T'_i$。

你的任务是，对于每一个字符串 $T'_i$，计算将字符串 $S$ 变为 $T'_i$ 最少需要多少次操作。

## 输入格式

输入以如下格式给出：

> $ S $ $ Q $ $ T_1 $ $ T_2 $ ... $ T_Q $

## 输出格式

输出 $Q$ 行。每行包含一个整数，表示将 $S$ 变为 $T'_i$ 所需的最小操作次数。

## 数据范围

- $1 \leq |S| \leq 2 \times 10^5$
- $1 \leq Q \leq 2 \times 10^5$
- $1 \leq |T_i| \leq 2 \times 10^5$
- 所有 $T_i$ 的长度总和不超过 $2 \times 10^5$
- $S$ 和 $T_i$ 仅包含字符 `a` 和 `b` 

### 示例解释

对于每个 $T'_i$ 的具体表现如下：
- $T'_1 = $ `abababababa`
- $T'_2 = $ `bbbbbbbbbbb`
- $T'_3 = $ `babaabbabab`
- $T'_4 = $ `aaaaaaaaaaa`

例如，将字符串 $S$ 变为 $T'_1$ 需要最少 $2$ 次操作。可以按以下步骤实现：`babaabbabab` → `ababbaababa` → `abababababa`。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
babaabbabab

4

abab

b

babaabba

aaaaaaaaaaab
```

### 输出

```
2

4

0

5
```



---


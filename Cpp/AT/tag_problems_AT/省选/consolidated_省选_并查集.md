---
title: "[ABC361G] Go Territory"
layout: "post"
diff: 省选/NOI-
pid: AT_abc361_g
tag: ['并查集', '双指针 two-pointer']
---

# [ABC361G] Go Territory

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc361/tasks/abc361_g

$ 2 $ 次元平面上に $ N $ 個の石が置かれています。$ i $ 番目の石は座標 $ (X_i,Y_i) $ にあります。石は全て第一象限(軸上含む)の格子点にあります。

石の置かれていない格子点 $ (x,y) $ であって、上下左右のいずれかに $ 1 $ 移動することを繰り返すことで、石の置かれている座標を通らずに $ (-1,-1) $ に到達することが**できない**ものの個数を求めてください。

より正確には、石の置かれていない格子点 $ (x,y) $ であって、以下の $ 4 $ 条件を全て満たすような整数の組の有限列 $ (x_0,y_0),\ldots,(x_k,y_k) $ が存在**しない**ものの個数を求めてください。

- $ (x_0,y_0)=(x,y) $
- $ (x_k,y_k)=(-1,-1) $
- 全ての $ 0\leq\ i\ <\ k $ で $ |x_i-x_{i+1}|+|y_i-y_{i+1}|=1 $
- どの $ 0\ \leq\ i\ \leq\ k $ でも、$ (x_i,y_i) $ に石はない

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ X_1 $ $ Y_1 $ $ \vdots $ $ X_N $ $ Y_N $

## 输出格式

条件を満たす格子点の個数を出力せよ。

## 说明/提示

### 制約

- $ 0\ \leq\ N\ \leq\ 2\times\ 10^5 $
- $ 0\ \leq\ X_i,Y_i\ \leq\ 2\times\ 10^5 $
- $ (X_i,Y_i) $ は相異なる
- 入力は全て整数

### Sample Explanation 1

$ (1,1) $ から $ (-1,-1) $ に到達することができません。 !\[\](https://img.atcoder.jp/abc361/77ce335c7ebd31af0860ce2aa43ae32a.png)

### Sample Explanation 2

石が $ 1 $ つも置かれていないこともあります。

### Sample Explanation 3

$ (6,1),(6,2),(6,3),(7,1),(7,2),(7,3) $ の $ 6 $ 個が該当します。 !\[\](https://img.atcoder.jp/abc361/95ffd845cfab71f0cd6b3c8122eb1ac9.png)

## 样例 #1

### 输入

```
5
1 0
0 1
2 3
1 2
2 1
```

### 输出

```
1
```

## 样例 #2

### 输入

```
0
```

### 输出

```
0
```

## 样例 #3

### 输入

```
22
0 1
0 2
0 3
1 0
1 4
2 0
2 2
2 4
3 0
3 1
3 2
3 4
5 1
5 2
5 3
6 0
6 4
7 0
7 4
8 1
8 2
8 3
```

### 输出

```
6
```



---

---
title: "[AGC002D] Stamp Rally"
layout: "post"
diff: 省选/NOI-
pid: AT_agc002_d
tag: ['并查集', '栈', '整体二分']
---

# [AGC002D] Stamp Rally

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc002/tasks/agc002_d



## 输入格式

第一行两个正整数，代表 $N$ 和 $M$。

接下来 $M$ 行，第 $i$ 行有两个正整数 $a_i,b_i$，代表 $a_i$ 和 $b_i$ 之间有一条无向边。

接下来一行有一个正整数，代表 $Q$。

接下来 $Q$ 行，第 $i$ 行有三个整数 $x_i,y_i,z_i$，表示一种询问。

## 输出格式

对于每个询问，输出一行一个整数表示答案。

## 样例 #1

### 输入

```
5 6
2 3
4 5
1 2
1 3
1 4
1 5
6
2 4 3
2 4 4
2 4 5
1 3 3
1 3 4
1 3 5

```

### 输出

```
1
2
3
1
5
5

```



---

---
title: "[AGC059C] Guessing Permutation for as Long as Possible"
layout: "post"
diff: 省选/NOI-
pid: AT_agc059_c
tag: ['并查集']
---

# [AGC059C] Guessing Permutation for as Long as Possible

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc059/tasks/agc059_c

先生が $ (1,2,\cdots,N) $ の順列 $ P=(P_1,P_2,\ldots,P_N) $ を隠し持っています。 これから、あなたはこの順列を特定します。

そのために、あなたは整数のペアの列 $ (A_1,B_1),(A_2,B_2),\ldots,(A_{N(N-1)/2},B_{N(N-1)/2}) $ を用意しました。これは、$ (a,b) $ ($ 1\ \le\ a\ <\ b\ \le\ N $) という形のすべてのペアを並べ替えたものです。 今から、あなたはこれらのペアを先頭から検査します。ペア $ (A_i,\ B_i) $ に対しては、$ P_{A_i}\ <\ P_{B_i} $ であるかを尋ね、先生が答えを教えます。 ただし、この質問への答えがそれ以前の答えから特定できる場合は、この質問を省略します。

このアルゴリズムで $ \frac{N(N-1)}{2} $ 個の質問がすべてされるような順列 $ P $ の個数を $ 10^9+7 $ で割った余りを求めてください。

## 输入格式

入力は標準入力から以下の形式で与えられる。

> $ N $ $ A_1 $ $ B_1 $ $ A_2 $ $ B_2 $ $ \vdots $ $ A_{N(N-1)/2} $ $ B_{N(N-1)/2} $

## 输出格式

答えを出力せよ。

## 说明/提示

### 制約

- $ 2\ \le\ N\ \leq\ 400 $
- $ 1\ \le\ A_i\ <\ B_i\ \le\ N $
- $ (A_i,B_i)\ \neq\ (A_j,B_j) $ ($ i\ \neq\ j $)
- 入力中のすべての値は整数である。
 
### Sample Explanation 1

明らかに、どの順列 $ P $ に対しても、質問を一つする必要があります。

### Sample Explanation 2

例として、$ P=(2,3,1,4) $ を考えます。 この場合、二問目までで $ P_1\ <\ P_2 $ と $ P_1\ >\ P_3 $ を知って $ P_2\ >\ P_3 $ と特定できるため、三問目を省略します。 従って、$ P=(2,3,1,4) $ は数えません。

## 样例 #1

### 输入

```
2

1 2
```

### 输出

```
2
```

## 样例 #2

### 输入

```
4

1 2

1 3

2 3

2 4

3 4

1 4
```

### 输出

```
4
```

## 样例 #3

### 输入

```
5

1 2

2 3

3 4

4 5

1 5

1 3

2 4

3 5

1 4

2 5
```

### 输出

```
0
```



---

---
title: "[AGC069B] Pair Guessing"
layout: "post"
diff: 省选/NOI-
pid: AT_agc069_b
tag: ['并查集', '二分图']
---

# [AGC069B] Pair Guessing

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc069/tasks/agc069_b

$ N $ 個の、長さ $ N $ の $ 01 $ 文字列 $ S_1,\ldots,S_N $ が与えられます。$ S_i $ の $ j $ 文字目を $ S_{i,j} $ と表します。ここで、$ S_{i,j}=\ $`1` を満たす整数組 $ (i,j) $ が少なくとも一つ存在することが制約より保証されています。

高橋君と青木君が以下のようなゲームを行います。

1. 高橋君が $ 1\ \leq\ i,j\ \leq\ N,\ S_{i,j}=\ $`1` を満たす整数組 $ (i,j) $ を $ 1 $ つ選ぶ。
2. $ 0 $ 回以上 $ N $ 回以下、青木君が高橋君に質問を行う。各質問では青木君が $ 1\leq\ i',j'\ \leq\ N $ を満たす整数組 $ (i',j') $ を選び、「$ i=i' $ と $ j=j' $ のうち少なくとも一方が成り立つ」の真偽を高橋君から教えてもらう。
3. 青木君が $ (i,j) $ を予想する。予想が当たっていれば青木君の勝ち、そうでなければ負けとなる。
 
青木君は高橋君が選ぶ $ (i,j) $ の候補、すなわち $ S_1,\ldots,S_N $ を知った状態でゲームを行います。また、上記2では以前の質問に対する返事を聞いたうえで $ (i',\ j') $ を選ぶことができます。

青木君が適切な戦略を取った場合、高橋君の $ (i,j) $ の選び方や運によらず必ずゲームに勝てるかどうかを判定してください。

$ 1 $ つの入力につきテストケースは $ T $ 個あります。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ T $ $ case_1 $ $ \vdots $ $ case_T $

各テストケースは以下の形式で与えられる。

> $ N $ $ S_1 $ $ \vdots $ $ S_N $

## 输出格式

各テストケースに対し、青木君が必ずゲームに勝てるならば `Yes` と、そうでなければ `No` と出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ T\ \leq\ 2\ \times\ 10^5 $
- $ 1\ \leq\ N\ \leq\ 500 $
- $ 1 $ つの入力の中のテストケースすべてにわたる $ N^2 $ の総和は $ 500^2 $ 以下である
- $ S_i $ は長さ $ N $ の $ 01 $ 文字列
- $ S_{i,j}=\ $ `1` を満たす整数組 $ (i,j) $ が少なくとも一つ存在する
 
### Sample Explanation 1

$ 1 $ 番目のテストケースに対するゲームの一例を以下に示します。 1. 高橋君が $ S_{i,j}=\ $`1` を満たす $ (i,j) $ として $ (2,2) $ を選ぶ。 2. 青木君が $ 2 $ 回質問を行う。$ 1 $ 回目の質問では $ (i',j')=(1,1) $ として、高橋君から「$ i=1 $ と $ j=1 $ のうち少なくとも一方が成り立つ」が偽であると教えてもらう。$ 2 $ 回目の質問では $ (i',j')=(2,2) $ として、高橋君から「$ i=2 $ と $ j=2 $ の少なくとも一方が成り立つ」が真であると教えてもらう。 3. 青木君が $ (i,j)=(2,2) $ と予想する。この予想は当たっているため、青木君の勝ちである。 これはあくまでゲームの一例であり、青木君の戦略が適切とは限りません。しかし、青木君が適切な戦略を取った場合には必ず青木君がゲームに勝つため、$ 1 $ 番目のテストケースに対する出力は `Yes` になります。

## 样例 #1

### 输入

```
3

2

01

11

2

11

11

10

0101011110

1100100001

1101100000

0111101010

1000011001

1110101010

1110110100

1110000110

0000001011

1001111100
```

### 输出

```
Yes

No

Yes
```



---

---
title: "Combination Lock"
layout: "post"
diff: 省选/NOI-
pid: AT_cf17_final_e
tag: ['并查集']
---

# Combination Lock

## 题目描述

有字符串 $S$，按照任意顺序进行任意次以下 $N$ 种操作：

- 操作 $i$：$ S $ 的第 $ l_i $ 个字母到第 $ r_i $ 个字母分别变为它们的下一个字母。(`a` 变成 `b`， `b` 变成 `c`・・・)；假设 `z` 的下一个字母是 `a`。

判断是否可以把 $S$ 变成回文。

## 输入格式

输入以以下形式：

> $S$ 
>
> $ N $
>
> $ L_1 $ $ R_1 $
>
> $ L_2 $ $ R_2 $
>
> $\ldots $
>
> $ L_N $ $ R_N $

## 输出格式

把 $S$ 变成回文，能的话就输出 `YES`，不能的话就输出 `NO`。

## 说明/提示

- $ 1\ \leq\ |S|\ \leq\ 10^5 $
- $ S $ 只由小写字母组成。
- $ 1\ \leq\ N\ \leq\ 10^5 $
- $ 1\ \leq\ L_i\ \leq\ R_i\ \leq\ |S| $

样本解释 $\ 1$：

例如，按顺序进行操作，就会变成 `bixzja`→`bjyzja`→`bjzakb`→`bkaakb`，也就是变成回文字符串了。

## 样例 #1

### 输入

```
bixzja

2

2 3

3 6
```

### 输出

```
YES
```

## 样例 #2

### 输入

```
abc

1

2 2
```

### 输出

```
NO
```

## 样例 #3

### 输入

```
cassert

4

1 2

3 4

1 1

2 2
```

### 输出

```
YES
```



---

---
title: "Analyzing Bit (Yet Special) Strings"
layout: "post"
diff: 省选/NOI-
pid: AT_icpc2015summer_day3_a
tag: ['并查集', '后缀自动机 SAM', '后缀数组 SA']
---

# Analyzing Bit (Yet Special) Strings

## 题目描述

[problemUrl]: https://atcoder.jp/contests/jag2015summer-day3/tasks/icpc2015summer_day3_a





---


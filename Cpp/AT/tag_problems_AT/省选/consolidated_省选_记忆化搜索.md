---
title: "[AGC020E] Encoding Subsets"
layout: "post"
diff: 省选/NOI-
pid: AT_agc020_e
tag: ['字符串', '枚举', '记忆化搜索', '位运算']
---

# [AGC020E] Encoding Subsets

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc020/tasks/agc020_e

次のような、`0` と `1` からなる文字列をエンコードする規則を考えます。

- 文字列 `0`、`1` はそれぞれ `0`、`1` とエンコードできる。
- 文字列 $ A $、$ B $ をそれぞれ $ P $、$ Q $ とエンコードできる場合、文字列 $ AB $ を $ PQ $ とエンコードできる。
- 文字列 $ A $ を $ P $ とエンコードできる場合、$ K\ \geq\ 2 $ を正の整数として、文字列 $ AA...A $（$ A $ を $ K $ 個連結したもの）を `(`$ P $`x`$ K $`)` とエンコードできる。

例えば、文字列 `001001001` は `001001001`、`00(1(0x2)x2)1`、`(001x3)` などとエンコードすることができ、この他のエンコード方法も存在します。

また、次の条件が満たされるとき、文字列 $ A $ は文字列 $ B $ の *サブセット* であると呼びます。

- $ A $ と $ B $ は長さが等しく、どちらも `0` と `1` からなる。
- $ A_i $ = `1` であるようなすべての添字 $ i $ に対して、$ B_i $ = `1` でもある。

`0` と `1` からなる文字列 $ S $ が与えられます。$ S $ のすべてのサブセットについて、それぞれをエンコードする方法が何通り存在するか求め、それらの個数の総和を $ 998244353 $ で割ったあまりを求めてください。

## 输入格式

入力は標準入力から以下の形式で与えられる。

> $ S $

## 输出格式

$ S $ のすべてのサブセットについてのエンコード方法の個数の総和を $ 998244353 $ で割ったあまりを出力せよ。

## 说明/提示

### 制約

- $ 1\ \leq\ |S|\ \leq\ 100 $
- $ S $ は `0` と `1` からなる。

### Sample Explanation 1

$ S $ のサブセットは $ 4 $ 個存在し、 - `011` は `011`、`0(1x2)` とエンコードできます。 - `010` は `010` とエンコードできます。 - `001` は `001`、`(0x2)1` とエンコードできます。 - `000` は `000`、`0(0x2)`、`(0x2)0`、`(0x3)` とエンコードできます。 したがって、$ S $ のすべてのサブセットについてのエンコード方法の個数の総和は $ 2\ +\ 1\ +\ 2\ +\ 4\ =\ 9 $ 通りです。

### Sample Explanation 2

今回は $ S $ のサブセットは $ 1 $ 個しか存在しませんが、$ 10 $ 通りの方法でエンコードできます。

### Sample Explanation 4

結果を $ 998244353 $ で割ったあまりを出力することを忘れずに。

## 样例 #1

### 输入

```
011
```

### 输出

```
9
```

## 样例 #2

### 输入

```
0000
```

### 输出

```
10
```

## 样例 #3

### 输入

```
101110
```

### 输出

```
156
```

## 样例 #4

### 输入

```
001110111010110001100000100111
```

### 输出

```
363383189
```



---

---
title: "[AGC035D] Add and Remove"
layout: "post"
diff: 省选/NOI-
pid: AT_agc035_d
tag: ['动态规划 DP', '记忆化搜索', '区间 DP', '动态规划优化']
---

# [AGC035D] Add and Remove

## 题目描述

[problemUrl]: https://atcoder.jp/contests/agc035/tasks/agc035_d

非負整数のひとつ書かれたカードが $ N $ 枚積まれた山があります。上から $ i $ 番目のカードに書かれた整数は $ A_i $ です。

すぬけ君は、以下の操作をカードが $ 2 $ 枚になるまで繰り返します。

- 連続して積まれている $ 3 $ 枚のカードを選ぶ。
- $ 3 $ 枚のうち真ん中のカードを食べる。
- あとの $ 2 $ 枚のカードに書かれている整数を、その整数に食べたカードに書かれていた整数を足してできる整数に書き換える。
- 食べなかった $ 2 $ 枚のカードを、順序を保ったまま山のもとの位置に戻す。

最終的に残る $ 2 $ 枚のカードに書かれた整数の和の最小値を求めてください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ A_1 $ $ A_2 $ $ ... $ $ A_N $

## 输出格式

最終的に残る $ 2 $ 枚のカードに書かれた整数の和の最小値を出力せよ。

## 说明/提示

### 制約

- $ 2\ \leq\ N\ \leq\ 18 $
- $ 0\ \leq\ A_i\ \leq\ 10^9\ (1\leq\ i\leq\ N) $
- 入力はすべて整数である

### Sample Explanation 1

以下の操作を行うことで、最終的に残る $ 2 $ 枚のカードに書かれた整数の和を最小にできます。 - 最初、カードに書かれた整数は順に $ 3,1,4,2 $ である。 - $ 1,2,3 $ 番目のカードを選ぶ。$ 1 $ の書かれた $ 2 $ 枚目のカードを食べ、残ったカードに書かれた整数に $ 1 $ を足し、山のもとの位置に戻す。カードに書かれた整数は順に $ 4,5,2 $ となる。 - $ 1,2,3 $ 番目のカードを選ぶ。$ 5 $ の書かれた $ 2 $ 枚目のカードを食べ、残ったカードに書かれた整数に $ 5 $ を足し、山のもとの位置に戻す。カードに書かれた整数は順に $ 9,7 $ となる。 - 最後に残った $ 2 $ 枚のカードに書かれた整数の和は $ 16 $ になる。

## 样例 #1

### 输入

```
4

3 1 4 2
```

### 输出

```
16
```

## 样例 #2

### 输入

```
6

5 2 4 1 6 9
```

### 输出

```
51
```

## 样例 #3

### 输入

```
10

3 1 4 1 5 9 2 6 5 3
```

### 输出

```
115
```



---


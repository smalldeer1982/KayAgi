---
title: "Median on Segments (General Case Edition)"
layout: "post"
diff: 省选/NOI-
pid: CF1005E2
tag: []
---

# Median on Segments (General Case Edition)

## 题目描述

#### 题目翻译

给定长度为 $n$ 的序列（$1 \le n \le 2 \times 10^5$），求中位数为 $m$ 的子段个数（子段长度为偶数时，取其 $\dfrac{k}{2}$ 项，$k$ 为子段长度）。

## 输入格式

第一行两个整数，$n,m$。

第二行 $n$ 个整数表示序列$(1<=a_i<=2*10^5)$。

## 输出格式

输出满足要求的方案数。

## 样例 #1

### 输入

```
5 4
1 4 5 60 4

```

### 输出

```
8

```

## 样例 #2

### 输入

```
3 1
1 1 1

```

### 输出

```
6

```

## 样例 #3

### 输入

```
15 2
1 2 3 1 2 3 1 2 3 1 2 3 1 2 3

```

### 输出

```
97

```


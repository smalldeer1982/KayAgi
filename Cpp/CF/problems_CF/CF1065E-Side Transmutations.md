---
title: "Side Transmutations"
layout: "post"
diff: 省选/NOI-
pid: CF1065E
tag: ['字符串']
---

# Side Transmutations

## 题目描述

考虑一个字符集合$A$（$A$中元素互不相同）和一个长度为$n$的字符串$S$，其中$S$中的字符都属于集合$A$。

给你一个包含 $m$ 个整数的序列 $b$  ($b_1<b_2<\dots<b_m$)。你可以对字符串 $S$ 作以下的操作：

1.选择一个合法的 $i$ ,并且令 $k=b_i$ ;

2.取出 $S$ 中前 $k$ 个字符 $Pr_k$ ;

3.取出 $S$ 中后 $k$ 个字符$Su_k$ ;

4.将 $S$ 中前 $k$ 个字符替换成翻转后的 $Su_k$ ;

5.将 $S$ 中后 $k$ 个字符替换成翻转后的 $Pr_k$ ;

举个例子，我们令 $S=$ "abcdefghi"，$k=2$ 。这时$Pr_2=$ "ab"，$Su_2=$ "hi"，翻转后有 $Pr_2=$ "ba"，$Su_2=$ "ih"，那么最终得到的字符串 $S$ 就是 "ihcdefgba"。

这个操作可以被执行许多次（可能是零次），任何一个 $i$ 也可以被使用多次。

我们将字符串 $S$ 和 $T$ 称为相等的字符串，当且仅当存在一个操作序列，将字符串 $S$ 变成 $T$。对于上面的例子来说，"abcdefghi" 和 "ihcdefgba" 是相等的。注意到 $S$ 和它自己也是相等的。
你的任务很简单，数出互不相同的字符串的个数。
最终的答案可能会非常大，因此你只需要输出答案 $mod$ $998244353$ 的结果。

## 输入格式

第一行包括三个整数 $n$，$m$ 和 $|A|$（$2 \leq n \leq 10^9$，$1 \leq m \leq min(\frac{n}{2},2 * 10^5)$，$1\leq |A|\leq 10^9$），分别是字符串的长度，序列 $b$ 的大小，以及字符集 $A$ 的大小。
第二行包括 $m$ 个整数： $b_1,b_2,\dots,b_m$。

## 输出格式

输出一个整数，即答案 $mod$ $998244353$ 的结果。

## 样例 #1

### 输入

```
3 1 2
1

```

### 输出

```
6

```

## 样例 #2

### 输入

```
9 2 26
2 3

```

### 输出

```
150352234

```

## 样例 #3

### 输入

```
12 3 1
2 5 6

```

### 输出

```
1

```


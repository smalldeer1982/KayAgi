---
title: "Cow and Fields"
layout: "post"
diff: 普及+/提高
pid: CF1307D
tag: []
---

# Cow and Fields

## 题目描述

### 题意简述

给定一个有 $n$ 个节点 $m$ 条边的无向图，一个顶点集$S$。

你需要选择两个顶点 $u,v(u\ne v,u\in S,v\in S)$ 并连接这两个顶点（允许 $u,v$ 之间已经有连边），求连接后从顶点 $1$ 到顶点 $n$ 最短路的最大值。

**注意，该操作仅能进行一次。**

保证给定的图联通。

## 输入格式

第一行三个整数 $n,m,k$（$2 \le n \le 2 \cdot 10^5$，$n-1 \le m \le 2 \cdot 10^5$，$2 \le k \le n$），分别表示点数，边数和点集的大小。

第二行 $k$ 个整数 $a_1, a_2, \ldots, a_k$（$1 \le a_i \le n$），表示点集。

下面 $m$ 行，每行两个整数，表示这两个整数之间有一条边。

## 输出格式

一行一个整数，表示添加一条边之后从顶点 $1$ 到顶点 $n$ 最短路的最大值。

## 样例 #1

### 输入

```
5 5 3
1 3 5
1 2
2 3
3 4
3 5
2 4
```

### 输出

```
3
```

## 样例 #2

### 输入

```
5 4 2
2 4
1 2
2 3
3 4
4 5
```

### 输出

```
3
```


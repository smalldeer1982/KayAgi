---
title: "Monopole Magnets"
layout: "post"
diff: 提高+/省选-
pid: CF1344B
tag: []
---

# Monopole Magnets

## 题目描述

**单极磁铁**，顾名思义，就是只有一个磁极（N 或 S）的磁铁，~~他们在实际生活中是不存在的，不过……不要在意那些细节。~~

我们有一个 $n$ 行 $m$ 列的方格图，要在里面放一些单极磁铁，你可以随便放置，甚至把多个磁铁放在同一个格子里。

单极磁铁的**吸引**是这么定义的：任选一个 N 极磁铁和一个 S 极磁铁，如果它们两个**恰好处于同一行或同一列中**，那 N 极磁铁会向**靠近 S 极磁铁**的方向**前进一格**。当然，如果它们两个处于同一个格子，什么也不会发生。注意 **S 极磁铁的位置是永远不会变化的**。

这个方格图里的每一个格子都涂成了**黑色**或**白色**。磁铁的放置必须要**遵守以下规则**：

1. 每行每列都必须至少有一个 S 极磁铁。
2. 对于每个黑色格子，必须有某个 N 极磁铁通过一系列的吸引操作经过它。
3. 对于每个白色格子，无论 N 极磁铁的位置怎样变化，都不能经过它。

现在我们想知道：要满足以上三条规则，至少要放几个 N  极磁铁。如果无论怎么放都不能满足规则，请输出 $-1$。

## 输入格式

第一行有两个整数 $n$ 和 $m\;(1\le n,m\le 1000)$ ，表示方格图的行数和列数。

接下来 $n$ 行，每行 $m$ 个字符，是对整个方格图进行描述。如果第 $i$ 行的第 $j$ 个字符为 `#`，表示这个格子是黑色的，如果为 `.`，表示这个格子是白色的。 保证除了 `#` 和 `.` 外不会出现其它奇奇怪怪的字符。

## 输出格式

输出一个整数，表示要满足规则，要放置的 N 极磁铁的最少个数，如果无解，请输出 $-1$。

（translated by 珂爱的 yangrunze）

## 样例 #1

### 输入

```
3 3
.#.
###
##.
```

### 输出

```
1
```

## 样例 #2

### 输入

```
4 2
##
.#
.#
##
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
4 5
....#
####.
.###.
.#...
```

### 输出

```
2
```

## 样例 #4

### 输入

```
2 1
.
#
```

### 输出

```
-1
```

## 样例 #5

### 输入

```
3 5
.....
.....
.....
```

### 输出

```
0
```


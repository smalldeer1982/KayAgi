---
title: "Delete The Edges"
layout: "post"
diff: 省选/NOI-
pid: CF1494F
tag: []
---

# Delete The Edges

## 题目描述

### 题意

给定一个 $n$ 个顶点和 $m$ 条边组成的无向连通图。你的目标是破坏给定图形的所有边。

可以选择任何顶点作为起始顶点，开始沿边行走。当你走过一条边时，这条边会被破坏，不能走被破坏的边。

最多可以在某顶点执行进行一次模式切换，模式转换后，按以下方式删除经过的边：模式转换后第一条边不被破坏，第二条边被破坏，第三条边不被破坏，第四条边被破坏，依此类推。不能切换回原始模式，可以不执行此操作。

$n,m \le 3000, m\le \dfrac{n(n-1)}{2}$。

## 输入格式

输入 $n,m$，然后依次输入每条边的两个顶点。

## 输出格式

第一行一个操作次数 $k$。

第二行 $k$ 个整数，第一个整数为起始节点，依次输出下一个访问节点。如果进行模式切换，输出 $-1$，然后再输出后面的节点编号。要求 $k \le 2m+2$。

如果无法完成任务，输出 $0$。

## 样例 #1

### 输入

```
3 3
1 2
2 3
3 1
```

### 输出

```
4
1 2 3 1
```

## 样例 #2

### 输入

```
4 3
1 2
2 3
4 2
```

### 输出

```
8
2 -1 1 2 3 2 4 2
```

## 样例 #3

### 输入

```
5 5
1 2
2 3
3 1
2 4
2 5
```

### 输出

```
9
2 3 1 2 -1 4 2 5 2
```

## 样例 #4

### 输入

```
5 5
1 2
2 3
3 1
2 4
4 5
```

### 输出

```
8
5 4 2 3 1 -1 2 1
```

## 样例 #5

### 输入

```
6 5
1 2
2 3
3 4
4 5
3 6
```

### 输出

```
0
```


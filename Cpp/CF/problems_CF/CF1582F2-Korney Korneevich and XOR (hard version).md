---
title: "Korney Korneevich and XOR (hard version)"
layout: "post"
diff: 提高+/省选-
pid: CF1582F2
tag: ['动态规划 DP']
---

# Korney Korneevich and XOR (hard version)

## 题目描述

给一个长度为 $n$ 的序列 $a_1,a_2,\dots,a_n$ ，寻找在 $a$ 的所有递增子序列（可以为空）的异或和中出现的数。

## 输入格式

第一行一个正整数 $n$ 表示序列长度。

第二行 $n$ 个整数表示序列 $a$ 。

## 输出格式

从小到大输出在 $a$ 的所有子序列（可以为空）的异或和中出现的数。

## 说明/提示

$1\le n\le10^6,0\le a_i\le5000$ 。
### 样例解释
对于第一个样例：
- 子序列 $\{\}$ 的异或和为 $0$ 。
- 子序列 $\{2\}$ 的异或和为 $2$ 。
- 子序列 $\{4\}$ 的异或和为 $4$ 。
- 子序列 $\{2,4\}$ 的异或和为 $6$ 。

其他子序列的异或和与上述其中一个子序列的异或和相等。

## 样例 #1

### 输入

```
4
4 2 2 4
```

### 输出

```
4
0 2 4 6
```

## 样例 #2

### 输入

```
8
1 0 1 7 12 5 3 2
```

### 输出

```
12
0 1 2 3 4 5 6 7 10 11 12 13
```


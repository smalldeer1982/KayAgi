---
title: "Roads in E City"
layout: "post"
diff: NOI/NOI+/CTSC
pid: CF1819E
tag: []
---

# Roads in E City

## 题目描述

**这是一道交互题**。

给定一张 $n$ 个点 $m$ 条边的无向连通图，无自环，但可能有重边。

图上有一些特殊边，保证任意两个结点通过特殊边连通，你希望求出所有特殊边。

初始所有边都没有被堵住。你可以进行以下三种操作：

- $-\ x$（$1\leq x\leq m$）：如果第 $x$ 条边没有被堵住，则堵住该边。
- $+\ x$（$1\leq x\leq m$）：取消堵住第 $x$ 条边。操作前第 $x$ 条边必须被堵住。
- $?\ y$（$1\leq y\leq n$）：交互库选择某个 $s$ 并返回能否从 $s$ 出发走没有被堵住的特殊边到 $y$。$s$ 可以根据之前的操作而改变，但不会根据本次你选择的 $y$ 而改变。

你最多进行 $100m$ 次操作。

得到答案后，输出 $!\ c_1\ c_2\ \cdots\ c_m$，其中 $c_i$ 表示第 $i$ 条边是否为特殊边。交互库会返回 $0$ 表示答案错误，你必须立刻结束程序，或 $1$ 表示答案正确。

本题有多组数据。

$2\leq n\leq 2000$，$n - 1\leq m\leq 2000$，$1\leq t\leq 1000$，$\sum n, \sum m\leq 2000$。保证图无自环且连通。


翻译贡献者：[Alex_Wei](https://www.luogu.com.cn/user/123294)。

## 输入格式

第一行一个正整数 $t$。

对于每组数据，第一行两个正整数 $n, m$。

接下来 $m$ 行，每行两个正整数 $a_i, b_i$（$a_i\neq b_i$）表示第 $i$ 条边。

## 样例 #1

### 输入

```
2
2 2
1 2
2 1


1

0



1

1
3 3
1 2
2 3
3 1


1

1


1

0


1

1

1

1
```

### 输出

```
- 1
? 1

? 2

- 2
+ 1
? 1

! 1 0





- 1
? 2

? 1

- 2
? 3

? 3

+ 1
? 3

? 2

? 1

! 1 1 1
```


---
title: "Tree"
layout: "post"
diff: NOI/NOI+/CTSC
pid: CF468D
tag: []
---

# Tree

## 题目描述

### 题目大意

有一个n个节点的树（编号1~n）。树上的每一个边都是正值。

我们定义两点之间的距离$d(v,u)$为这两点最短路径边的权值之和。

设数列$p$为一个1~n的全排列。求使得$\sum_{i=1}^n d(i,p_i)$最大的、字典序列最小的全排列$p$。

## 输入格式

第一行是一个正整数 $n (1 \le n \le 10^5) $

接下来n-1行是三个整数$ u_{i},v_{i},w_{i} (1<=u_{i},v_{i}<=n; 1<=w_{i}<=10^{5}) $，分别代表$ u_{i}$到$v_{i}$有一条权值为$w_i$的路径

数据保证这是一棵树

## 输出格式

第一行是所求的最大和

第二行是所求的字典序列最小的全排列

## 样例 #1

### 输入

```
2
1 2 3

```

### 输出

```
6
2 1

```

## 样例 #2

### 输入

```
5
1 2 2
1 3 3
2 4 4
2 5 5

```

### 输出

```
32
2 1 4 5 3

```


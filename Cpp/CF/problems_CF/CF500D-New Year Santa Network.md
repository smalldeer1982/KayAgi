---
title: "New Year Santa Network"
layout: "post"
diff: 普及+/提高
pid: CF500D
tag: []
---

# New Year Santa Network

## 题目描述

一个 $n$ 个节点的树上进行 $q$ 次操作，每次操作将第 $r$ 条边的长度修改成 $w$。

用 $d(x,y)$ 表示从点 $x$ 到 $y$ 的距离。

在树上等概率选取三个点 $c_1,c_2,c_3$ ，求在每次操作后 $d(c_1,c_2)+d(c_1,c_3)+d(c_2,c_3)$ 的期望值。

## 输入格式

- 第一行，一个数字 $n$，表示树的节点数。
- 之后的 $n-1$ 行中，每行三个整数 $a,b,l$，表示树中有一条连接 $a$ 到 $b$ 长度为 $l$ 的边。
- 下一行，一个数字 $q$ 为长度修改次数。
- 接下来 $q$ 行，每行两个整数 $r$ 和 $w$ 表示将第 $r$ 条边的长度修改成 $w$ 。

## 输出格式

$q$ 行，第 $i$ 行输出在第 $i$ 次操作后，$d(c_1,c_2)+d(c_1,c_3)+d(c_2,c_3)$ 的期望值，需要保证你的输出和正确答案的误差在 $10^{-6}$ 以内

## 样例 #1

### 输入

```
3
2 3 5
1 3 3
5
1 4
2 2
1 2
2 1
1 1

```

### 输出

```
14.0000000000
12.0000000000
8.0000000000
6.0000000000
4.0000000000

```

## 样例 #2

### 输入

```
6
1 5 3
5 3 2
6 1 7
1 4 4
5 2 3
5
1 2
2 1
3 5
4 1
5 2

```

### 输出

```
19.6000000000
18.6000000000
16.6000000000
13.6000000000
12.6000000000

```


---
title: "Ray Tracing"
layout: "post"
diff: 提高+/省选-
pid: CF724C
tag: []
---

# Ray Tracing

## 题目描述

在一个$n\times m$的矩形房间里有$k$个传感器，第$i$个传感器位于$(x_i,y_i)$，所有的传感器位置互不相同

房间的一对对角位于$(0,0)$和$(n,m)$，房间的墙壁与坐标轴平行

在时刻$0$，有一束光线从$(0,0)$出发，向$(1,1)$的方向释放，这束光线以$\sqrt{2}m/s$的速度传播，因此，光线将在出发后恰好$1s$时到达点$(1,1)$

当光线碰到墙壁时，它将遵循反射角等于入射角的规则进行反射，当它碰到$4$个角中的任意一个时，就会立刻停止

对于每一个传感器，你需要计算光线第一次到达这个传感器所在点的时刻，如果光纤永远不会经过这个传感器，那么输出$-1$

## 输入格式

输入的第一行包括$3$个整数$n,m,k$（$2\leq n,m\leq 10^5$，$1\leq k\leq 10^5$）——房间墙壁的长度和传感器的数量

接下来的$k$行，每一行包括两个整数$x_i$和$y_i$（$1\leq x_i\leq n-1$，$1\leq y_i\leq m-1$）——传感器的坐标，保证没有任何两个传感器有坐标相同

## 输出格式

输出共$k$行，第$i$行应该输出光线第一次经过第$i$个传感器所在点的时刻；或是当光线永远不会穿过这个传感器所在的点时，输出$-1$

## 说明/提示

在第一组样例中，光线将依次通过点$(0,0)\ (1,1)\ (2,2)\ (3,3)$。他将在$3s$后在$(3,3)$停下

第二组样例，光纤将会依次穿过如下的点：$(0,0)\ (1,1)\ (2,2)\ (3,3)\ (2,4)\ (1,3)\ (0,2)\ (1,1)\ (2,0)\ (3,1)\ (2,2)\ (1,3)\ (0,4)$。光线将在$12s$后在$(0,4)$停下，分别在点$(3,3)\ (2,4)\ (0,2)\ (2,0)\ (3,1)$处进行一次反射

## 样例 #1

### 输入

```
3 3 4
1 1
1 2
2 1
2 2

```

### 输出

```
1
-1
-1
2

```

## 样例 #2

### 输入

```
3 4 6
1 1
2 1
1 2
2 2
1 3
2 3

```

### 输出

```
1
-1
-1
2
5
-1

```

## 样例 #3

### 输入

```
7 4 5
1 3
2 2
5 1
5 3
4 3

```

### 输出

```
13
2
9
5
-1

```


---
title: "Memory Manager"
layout: "post"
diff: 普及+/提高
pid: CF7B
tag: ['模拟']
---

# Memory Manager

## 题目描述

第一个国家级操作系统——BerlOS就要发布了。但是，它的一些功能还没有完善，比如内存管理系统。在开发者的计划里，第一版里的内存管理系统是简单并且是线性的。它将会支持以下操作：

    alloc n —— 在内存中分配n字节的空间。此命令将返回已分配的内存块的编号x。

    erase x —— 释放编号为x的内存块。
    defragment —— 碎片整理，将所有内存块全部向内存的起点靠拢并且不改变它们的顺序。

整条内存一共有m个字节，每个字节依次编号为1,2,...,m。

操作 alloc 有一个参数n，表示需要分配n字节大小的内存块。在执行这个操作时，系统将把一块最靠近内存起点的，长度为n的连续空闲字节分配到一个内存块（这块内存块内的所有字节将被标记为“已使用”）。这个操作的返回值为这块内存块的编号。如果没有符合条件的内存块，返回 NULL 。

操作 erase 有一个参数x，表示需要释放的内存块的编号。它将释放这个内存块（这块内存块内的所有字节将被标记为“空闲”）。如果成功释放，不返回值；如果编号为x的内存块不存在，返回 ILLEGAL\_ERASE\_ARGUMENT 。

操作 deflagment 没有任何参数。它只是将所有内存块向前依次（编号小的地方）挪动直到它们紧挨在一起。（不改变它们的顺序）

你将用连续的正整数（1,2,...）作为每一个内存块的编号。比如，第i次分配的内存块编号为i。你的任务是依次输出所有 alloc 指令的返回值，以及所有执行失败的 erase 指令的返回值。

## 输入格式

输入文件的第一行包括两个正整数 t 和 m 。 t 表示操作次数， m 表示内存大小（为m字节）。接下来的t行为每一次的命令。命令有以下三种：alloc 命令，后接一个整数 n ； erase 命令，后接一个整数 x ； defragment 命令。

## 输出格式

输出文件的每一行依次为每次执行的 alloc 函数的返回值或执行失败的 erase 函数返回的 ILLEGAL\_ERASE\_ARGUMENT 。

translated by 星烁晶熠辉

## 样例 #1

### 输入

```
6 10
alloc 5
alloc 3
erase 1
alloc 6
defragment
alloc 6

```

### 输出

```
1
2
NULL
3

```


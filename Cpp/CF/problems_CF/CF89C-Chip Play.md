---
title: "Chip Play"
layout: "post"
diff: 提高+/省选-
pid: CF89C
tag: []
---

# Chip Play

## 题目描述

有一个大小为n×m的矩形场，这个矩形场的某些地方有筹码，皆处于行与列上。
每个筹码上都有一个箭头。因此，场上的每个筹码都指向以下方向之一：上，下，左或右。

玩家可以选择一个筹码并开始行动。

以下是一次动作顺序：

1.所选筹码被标记为当前的筹码。

2.检查当前筹码的箭头指向方向的同一行（或同一列）的筹码。如果至少有一个，则将最近的筹码标记为新的当前筹码。

3.将先前的当前筹码从场中移除。

4.重复此过程。如果未找到新筹码，则将当前筹码从场地中移出，玩家的移动结束。

在移动结束时，玩家会获得分数，分数等于已移除筹码的数量。

要求找到最优的初始筹码安排，确定你在一次行动中可获得的最大分数并确定有几种方案能达成。

## 输入格式

第一行包含两个整数n和m（1<=n，m，n×m<=5000 1 <= n，m，n×m <= 5000）

然后n行，每个行包含m个字符-这是地图的描述。

有三种字符

 “。” 表示这个方块是空的。 

“ L”，“ R”，“ U”，“ D”表示此处包含一个筹码，并且在其上的箭头分别表示左，右，上或下。

## 输出格式

输出两个数字，一次行动之后可以获得的最大分数，以及达成最大积分的方案个数

## 说明/提示

在第一个样例中，初始筹码在位置（3,3）（3,3），即可获得最大点数。 您可以在下图看到它的方案：
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF89C/564cfdc234dcf38266b456e2e5fec700d68e459e.png)

其它方案将会有更差结果

## 样例 #1

### 输入

```
4 4
DRLD
U.UL
.UUR
RDDL

```

### 输出

```
10 1
```

## 样例 #2

### 输入

```
3 5
.D...
RRRLL
.U...

```

### 输出

```
6 2
```


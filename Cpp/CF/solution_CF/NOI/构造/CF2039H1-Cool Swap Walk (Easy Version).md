# Cool Swap Walk (Easy Version)

## 题目描述

# Cool Swap Walk (Easy Version)


给你一个大小为 $ n $ 的数组 $ a $ 。

下面是一个很酷的交换行走过程：

- 你需要从 $(1,1) $ 走到 $(n,n) $ ，只需向右或向下走一步。
- 从形式上看，如果当前位于 $ (x,y) $，则可以走到 $ (x+1,y) $ 或 $ (x,y+1) $，但不能越过网格边界。
- 当你步进 $ (i,j) $ 时，必须在 $ i\neq j $ 时交换 $ a_i $ 和 $ a_j $。

你最多可以进行 $ 2n+4 $ 次酷交换行走。将数组 $ a_1, a_2, \ldots, a_n $ 按非递减顺序排序。数据保证成立。

## 说明/提示

样例一中，数组 $ a $ 已经是非递减的，所以不需要再走一遍。

样例二中，$ a=[2,1,3] $ 最初是递减的。

在第一次行走中

- 然后，$ a=[1,2,3] $ 注意，虽然数组 $ a $ 已经是非递减的，但在到达 $ (n,n) $ 之前不能停止。
- 在第 $ 2 $ 步中，你向右走到 $ (1,3) $ . 然后，$ a=[3,2,1] $ .
- 在第 $ 3 $ 步中，向下移动到 $ (2,3) $ . 然后，$ a=[3,1,2] $ .
- 在第 $ 4 $ 步中，你下到 $ (3,3) $ . 然后，$ a=[3,1,2] $ .

在第二次行走中

- 在第 $ 1 $ 步中，你下到 $ (2,1) $ . 然后，$ a=[1,3,2] $ .
- 在第 $ 2 $ 步中，向右走到 $ (2,2) $ . 然后，$ a=[1,3,2] $ .
- 在第 $ 4 $ 步中，向下移动到 $ (3,2) $ . 然后，$ a=[1,2,3] $ .
- 在第 $ 4 $ 步中，你下到 $ (3,3) $ . 然后，$ a=[1,2,3] $ .

经过上述两次酷交换行走，我们得到 $ a=[1,2,3] $ ，它是不递减的。

## 样例 #1

### 输入

```
3
2
1 2
3
2 1 3
4
3 2 3 4```

### 输出

```
0
2
RRDD
DRDR
3
RRDRDD
DRDDRR
DDRRRD```

# 题解

## 作者：sunkuangzheng (赞：3)

首先手玩一些比较规律的操作，不难发现以下两种操作，

- $\texttt{RDRDRD\ldots}$ 可以将数组从 $[1,2,\ldots,n]$ 变成 $[2,3,\ldots,n,1]$。
- $\texttt{RRR\ldots DDD\ldots }$ 可以将数组从 $[1,2,\ldots,n]$ 变成 $[n,n-1,1,2,\ldots,n-2]$。

注意到每次操作一轮序列的开头和末尾一定会被改变，且循环移位会把数字移到最后，考虑在最后维护有序序列，第 $i$ 轮将数字 $i$ 移到数组最后。

假设现在我们在第 $i$ 轮，且 $i$ 的位置在 $pos$，那么数组应当形如 $[\ldots,i,\ldots,1,2,\ldots,i-1]$。

- 我们希望能让手里拿的数字变成 $i$，并通过循环移位直接移到最后。大部分情况下，可以直接对 $[1,pos+2]$ 进行操作二，操作完后就有了 $a_{pos+2} = i$ 并且此时在 $(pos+2,pos+2)$，然后对 $[pos+2,n]$ 进行操作一即可。可以这样操作的前提是进行操作二的时候不会影响已经拼好的部分，也即 $pos \le n - i - 1$。
- 剩余情况就比较麻烦，我们无法一次操作内将数字 $i$ 拿到手里并送到最后。考虑先对 $[1,pos]$ 进行操作二，这样 $i$ 会跑到序列开头，并向序列最后插入一个随机整数。第二步将 $i$ 送到序列最后，然后再操作二翻回来，然后再操作一送回去。例如我们想把 $4$ 移到末尾，会操作 $[6,5,4,1,2,3] \to [4,5,1,2,3,6] \to [5,1,2,3,6,4] \to [4,6,5,1,2,3] \to [6,5,1,2,3,4]$。

第一种情况只需要一次操作，但是第二种需要四次，最劣可能需要 $4n$ 次操作！但是没关系，发现第二种情况出现次数其实比较少，考虑再开始操作以前先瞎几把花费几次操作动一动数组，就可以通过本题 :)

我的代码里采用了以下几种“瞎几把改”，仅供参考：

- 枚举每个 $i$，对 $[1,i]$ 进行操作一，对 $[i,n]$ 进行操作二。
- 枚举每个 $i$，对 $[1,i]$ 进行操作二，对 $[i,n]$ 进行操作一。
- 枚举每个 $i$，对 $[1,i]$ 进行操作二，对 $[i,n]$ 进行操作二。
- 枚举每个 $i$，对 $[1,i]$ 进行操作二，对 $[i,n]$ 进行操作一，执行两遍。
- 枚举每个 $i$，对 $[1,i]$ 进行操作二，对 $[i,n]$ 进行操作二，执行两遍。

你可以在这里查看代码或者尝试 hack 掉这个做法：<https://codeforces.com/blog/entry/136563>！

---


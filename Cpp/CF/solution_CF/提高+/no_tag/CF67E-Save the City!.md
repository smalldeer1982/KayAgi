# Save the City!

## 题目描述

在 `Aalam-Aara`（意为大地之光）镇，以前没有犯罪，没有罪犯。但随着时间的推移，罪恶开始蔓延到曾经正义的人们的心中。为了解决这个问题，一些长老发现，只要将人口中腐败的部分远离未腐败的部分，犯罪就可以停止。所以，他们正试图建立一个可以关押腐败人民的大院。为确保不法分子逃出大院，需要设置瞭望塔，以便对其进行监视。

由于 `Aalam-Aara` 的人民不是很富有，他们遇到了一个来自某个富裕城镇的商人，他同意将一块地块卖给他们，该地块已经有一条直线围栏 $AB$，沿围栏设置了几个点。可以建瞭望塔。你的任务是帮助他们找出栅栏上可以架设塔楼的点数，以便从那里监视所有罪犯。只能设置一个瞭望塔。如果从瞭望塔到罪犯的视线没有在他和塔之间的任何点穿过情节边缘，即如下图 $1$ 所示，点 $X$、$Y$、$C$ 和 $A$ 是可以从瞭望塔观察到的从 $B$ 点可见，但 $E$ 和 $D$ 点不可见。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF67E/62f2b6c65fce5076b1e588c1b533c329d000610a.png)\
　　　　　　　　　　　图$1$
           
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF67E/e45b0cefd67eb315842cdefdc7e62035f6004450.png)\
　　　　　　　　　　　图$2$
           
假设地块为多边形，坐标轴设置为围栏$AB$平行于$x$轴，可以设置瞭望塔的点是直线上的整数点。 例如，在给定的图 $2$ 中，瞭望塔可以设置在 $AB$ 上的五个整数点中的任何一个，即 $(4,8)$、$(5,8)$、$(6,8)$、$(7,8)$ 或 $(8,8)$. 您可以假设没有三个连续的点共线，并且除 $A$ 和 $B$ 之外的所有角点都位于围栏 $AB$ 的同一侧。 给定的多边形不包含自相交。

## 说明/提示

图 $2$ 显示了第一个测试用例。 图中的所有点都可以从围栏 $AB$ 上的任何点看到。 因为， $AB$ 有 $5$ 个整数坐标，所以答案是 $5$ 。

对于情况二，围栏 $CD$ 和 $DE$ 不完全可见，因此答案为 $0$ 。

## 样例 #1

### 输入

```
5
4 8
8 8
9 4
4 0
0 4
```

### 输出

```
5
```

## 样例 #2

### 输入

```
5
4 8
5 8
5 4
7 4
2 2
```

### 输出

```
0
```

# 题解

## 作者：zesqwq (赞：0)

能瞭望到整个多边形等价于能瞭望到所有顶点。

然后考虑对于除了优角外的每个角，当成两个半平面的交，然后再把所有的半平面求交。

优角的限制较弱，可以不考虑。

当然，我们可以不用半平面交来解决该问题，考虑等价的做法，考虑每个角在原多边形上实际上对应了 $(\text{A, B})$ 上的一段可行区间，最后区间求交即可。

细节有点多。

我的代码很答辩，就不贴了。

---


# ICPC Square

## 题目描述

ICPC Square 是由 ICPC 委员会为参赛者安排住宿的酒店，共有 $N$ 层（编号从 $1$ 到 $N$）。酒店内的电梯非常独特：如果你目前在第 $x$ 层，你可以通过乘坐电梯到达第 $y$ 层，但要求 $y$ 是 $x$ 的倍数且 $y - x \leq D$。

你最初在第 $S$ 层。你想通过乘坐电梯零次或多次，尽量到达高的一层。请找出你能够到达的最高楼层。

## 说明/提示

样例解释：

1. 首先，从第 3 层乘电梯到第 15 层，因为 15 是 3 的倍数且 $15 - 3 \leq 35$。
2. 然后，从第 15 层乘电梯到第 30 层，因为 30 是 15 的倍数且 $30 - 15 \leq 35$。
3. 最后，从第 30 层乘电梯到第 60 层，因为 60 是 30 的倍数且 $60 - 30 \leq 35$。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
64 35 3```

### 输出

```
60```

## 样例 #2

### 输入

```
2024 2023 1273```

### 输出

```
1273```

# 题解

## 作者：lfxxx (赞：0)

首先所有数都可以先除一个 $S$，下文默认 $S = 1$。

如果 $D = 0$ 了，答案就是 $1$。

如果 $n \leq D + 1$，可以直接从 $1 \to n$。

否则你考虑你跳的最后一步，这一步跳完所处的位置不会超过 $2 \times D$，否则你上一步所处的位置就会大于 $D$，而此时你是无法再去跳的，所以 $n \gets \min(n,2 \times D)$。

然后你考虑假若你最后停留在 $x$ 上，首先 $x \leq n$，然后假若 $x \leq D + 1$ 则可以直接跳到此处，否则你必须要由上一步 $y$ 跳到 $x$，需要满足 $y|x,x-y \leq D$。

假若 $n = 2 \times k$，你发现 $y = k$ 即可，假若 $n = 2 \times k+1$，你只用判断 $n$ 是否合法因为 $n-1$ 必定合法。

check 合法 $O(\sqrt n)$ 把所有质数拎出来跑即可。


```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n,d,s;
signed main(){
    cin>>n>>d>>s;
    n/=s,d/=s;
    if(d==0) cout<<s<<'\n';
    else{
        if(n<=d+1) cout<<n*s<<'\n';
        else{
            n=min(n,2*d);
            if(n%2==0) cout<<n*s<<'\n';
            else{
                for(int i=2;i<=1000000;i++){
                    if(n%i==0){
                        if(n-n/i<=d){
                            cout<<n*s<<'\n';
                            return 0;
                        }
                    }
                }
                cout<<(n-1)*s<<'\n';
            }
        }
    }
    return 0;
}
```

---


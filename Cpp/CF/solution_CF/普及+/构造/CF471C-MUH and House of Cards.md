# MUH and House of Cards

## 题目描述

两只北极熊和一只大象聚在一起，打算用恰好 $n$ 张牌搭纸牌屋。合法的纸牌屋满足如下要求：

1. 屋子有至少一层**地板**(横向放置的纸牌，其下方要有纸牌支撑)。
2. 每层地板上有若干个**房屋**(两张纸牌相互倚靠搭成)和**天花板**(相邻房屋上方必须要有的横向纸牌,可当上一层的地板)。
3. 从下往上每层的房屋数量是递减的。

注意最上面一层地板上可以只有一个房间，也可以随意。

纸牌屋的高度定义为房间的层数(地板下面的不算)。现在它们想知道能搭出的纸牌屋中，不同高度的数量。

## 样例 #1

### 输入

```
13
```

### 输出

```
1```

## 样例 #2

### 输入

```
6
```

### 输出

```
0```

# 题解

## 作者：ZLCT (赞：0)

# CF471C MUH and House of Cards
## 题目翻译
给 $n$ 个纸牌，要求构造一座纸牌塔，要求每一层都比上一层塔的“底座”至少多 $1$ 且不允许存在不稳定结构（非三角）。求最高能搭多高。具体搭建方法见下图。\
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF471C/24a8a33e043c26ce06cfa7fb017315b5822b22c8.png)
## 美丽的数学题
我们观察一下上图，不难发现它构造的十分有规律。如果我们以三个纸牌为一组，那么每多一层就会少用一个纸牌。\
这使我们容易想出一个暴力的解法：不断枚举高度 $h$，判断 $n+h$ 是否被 $3$ 整除并且纸牌是否够用。\
纸牌如何判断够用呢？\
我们考虑构造高度为 $h$ 时所需的最少纸牌数，那肯定就是“金字塔”，纸牌数用等差数列求和公式可以求出是 $3\times\displaystyle\frac{(h+1)\times h}{2}$。\
此时复杂度从 $1$ 枚举到 $n$，最多是 $10^{16}$，我们是不能接受的。\
但是有一个很直接的优化，就是每次如果纸牌不够了，我们就没有必要继续枚举了（都不够了还怎么再加）。\
于是当 $3\times\displaystyle\frac{(h+1)\times h}{2}\le n$ 时直接跳出循环即可。这样复杂度就是 $O(\sqrt{n})$。\
实际上这里还有个常数优化，因为我们要找 $3|n+x$，于是符合条件后每次可以直接 $+3$，这样可以省去 $3$ 的常数。
## 美丽的代码
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n,ans;
signed main(){
    cin>>n;
    for(int x=1;x<=n;++x){
        if((n+x)/3ll<(x+1ll)*x/2ll)break;
        if((n+x)%3ll==0){
            ans++;x+=2ll;
        }
    }
    cout<<ans<<'\n';
    return 0;
}
```

---

## 作者：_Kimi_ (赞：0)

# CF471C题解

### 题意

给你 $n$ 张卡片，问可以搭出多少种不同层数的纸牌屋且必须用掉 $n$ 张卡片。

对于合法的纸牌屋，看看样例解释的图例就能大概明白。

### 思路

对于第 $k$ 层楼层，所**至少**需要的卡牌数为：

$$2 \times k + (k - 1) = 3 \times k - 1$$

其中 $2 \times k$ 为房间所需要的卡牌数，$k - 1$表示地板所需要的卡牌数。

接着我们注意到，第 $k$ 层楼层的卡牌数 $m$ 满足：$m$ 差 $1$ 就是 $3$ 的倍数，则 $n$ 层差 $n$ 就是 $3$ 的倍数。

容易推出，如果有 $n$ 层楼层，则**至少**总共需要的卡牌数为：

$$ \frac{(3 \times n + 1) \times n}{2}$$

我们就可以按照这个条件来枚举，使得这个条件 $ \le n$。

共有卡牌 $n$ 张，其实就是枚举 $i$，有多少个 $i$ 满足 $(n + i) \mid 3$。

### 代码

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;
int n, ans;
signed main(){
    ios::sync_with_stdio(false);
    cin.tie(0);
    cin >> n;
    for (int i = 1; (3 * i + 1) * i / 2 <= n; i++){
        if ((n + i) % 3 == 0) ans++;
    }
    cout << ans << endl;
    return 0;
}
```


---


# Benches

## 题目描述

The city park of IT City contains $ n $ east to west paths and $ n $ north to south paths. Each east to west path crosses each north to south path, so there are $ n^{2} $ intersections.

The city funded purchase of five benches. To make it seems that there are many benches it was decided to place them on as many paths as possible. Obviously this requirement is satisfied by the following scheme: each bench is placed on a cross of paths and each path contains not more than one bench.

Help the park administration count the number of ways to place the benches.

## 样例 #1

### 输入

```
5
```

### 输出

```
120```

# 题解

## 作者：超级玛丽王子 (赞：8)

[在窝的博客食用更佳](https://www.luogu.com.cn/blog/LXLDuliu-IAKIOI/solution-cf630h)

这道题目主要考查的是组合数。易得每个长椅最多经过两条路（即交叉口）。那么我们就要让每个长椅经过的两条路互不相同。为了简化模型，我们认为 IT 城是一个 $5\times n$ 的网格图（因为只有 $5$ 个长凳）。

第一行我们长凳可以随便放，有 $n$ 种方法；第二个长凳为了不与第一个长凳所在行重叠，于是放在第二行，并且不能与第一行的列重合，一共 $n-1$ 种方法。以此类推，第三行 $n-2$ 种，第四行 $n-3$ 种，第五行 $n-4$ 种。

根据乘法原理，总共有 $n(n-1)(n-2)(n-3)(n-4
)$ 种做法。

## 但是，你以为这道题目这么简单吗？
那就错了。我们刚才假设 IT 城是一个 $5\times n$ 的网格图。然而实际上这是一个 $n\times n$ 的图。也就是说，我们还要计算哪些行要放长凳，即 $C_n^5=\dfrac{n!}{5!\cdot(n-5)!}$。

然而，懒惰的我们并不想计算 $100!$，因此我们要避免大数计算。 $n!$ 和 $(n-5)!$ 约分得到 $C_n^5=\dfrac{n(n-1)(n-2)(n-3)(n-4)}{5!}$。因此我们最后的公式就是：
$$ans=\dfrac{(n(n-1)(n-2)(n-3)(n-4))^2}{5!}$$
愉快滴套公式就好啦！

## 完结撒花~ 看我写的这么认真，不点个赞再走嘛？

---

## 作者：int32 (赞：2)

先挑 $5$ 行放长凳，方案数为 $\begin{pmatrix}n\\5\end{pmatrix}=\dfrac{n!}{120(n-5)!}$。

第一行有 $n$ 种，第二行除掉第一行交叉口那一列的还有 $n-1$ 种，以此类推知道第五列只有 $n-4$ 种可能。答案化简为 $\dfrac{n!}{(n-5)!}$。

最终计算 $\dfrac{n!^2}{120(n-5)!^2}=\dfrac{n^2(n-1)^2(n-2)^2(n-3)^2(n-4)^2}{120}$ 即可。

注意会爆 `long long`。

---

## 作者：CZQ_King (赞：2)

题意：
> IT市的城市公园由n条东西向的道路与n条南北向的道路交叉组成。因此有n^2n 
2
 个十字路口。

> 市政府出资购买五个长凳。为了使长凳看起来多一些，政府决定把它们们安置在尽可能多的道路上。显然，以下方案满足了这一要求：每个长凳放置在路径交叉处，并且每条道路上不放置超过一条长凳。

> 请你帮助公园管理局统计放置长凳的方式

------------
思路：

首先假设我们只有$5\times n$个路口，那么在第一行路上的椅子有$n$种放法，因为在第一行路上已经放了一个椅子，那么第二行路上的椅子有$(n-1)$种放法，以此类推到第五行，那么五个椅子的总放法是$n(n-1)(n-2)(n-3)(n-4)$种。

但是我们有$n$列，所以我们在$n$列之中选择五列放椅子，放法有$C_5^n$种，也就是$\frac{n!}{5!\times(n-5)!}$种。

把他们乘起来，就是答案：$n(n-1)(n-2)(n-3)(n-4)\frac{n!}{5!\times(n-5)!}$

但是！$5<=n<=100$，答案会超$long long$，而且$100!$我们也算不了，所以我们需要简化：$\frac{n!}{5!\times(n-5)!}=\frac{n(n-1)(n-2)(n-3)(n-4)}{5!}$，这样就可以避免计算大数字了。

下面提供两种代码：

------------
代码（公式）：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long n;
int main(){
	cin>>n;
	cout<<n*(n-1)*(n-2)*(n-3)*(n-4)/120*n*(n-1)*(n-2)*(n-3)*(n-4);//除120一定要放在前面，否则会爆long long
}
```

还有一种就是打表（造表程序）：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long f(long long w){//把公式打成函数
	return w*(w-1)*(w-2)*(w-3)*(w-4)/120*w*(w-1)*(w-2)*(w-3)*(w-4);
}
int main(){
	freopen("2.txt","w",stdout);//输出路径
	for(long long i=5;i<=100;i++){//造表
		cout<<f(i)<<",";
	}
}
```

然后打表代码是这样的：
```cpp
/*打表*/
#include<bits/stdc++.h>
using namespace std;
long long n,x[]={0,0,0,0,0,120,4320,52920,376320,1905120,7620480,25613280,75271680,198764280,480960480,1082161080,2289530880,4594961280,8809274880,16225246080,28844881920,49689816120,83217546720,135870624120,216790801920,338735628000,519241008000,782079948000,1159075008000,1692330003000,2436955204320,3464369750520,4866275205120,6759405227520,9291168184320,12646312250880,17054756167680,22800743353080,30233492563680,39779534765880,51956943367680,67391683488480,86836325546880,111191389152480,141529605127680,179123406489720,225475983421920,282356262686520,351838198609920,436344790734720,538697272512000,662169946032000,810551169792000,988211039907000,1200176340012000,1452213371414520,1750919312862720,2103822798628320,2519494444494720,3007668093719520,3579373599137280,4247082003313080,5024864026080480,5928562817929080,6975981988577280,8187089972705280,9584241849262080,11192419787028480,13039493347246080,15156500934140280,17577953746103520,20342163644193720,23491596420472320,27073252016586720,31139073312923520,35746385180652000,40958365563072000,46844550428907000,53481374518572000,60952749885027000,69350684313630720,78775941790465920,89338747275947520,101159538130177920,114369764628510720,129112742100154680,145544557319424480,163835031878453880,184168745371860480,206746121328019680,231784578928298880,259519753664851680,290206790199406080,324121710799930680,361562862849158880,402852449038723320,448338143985131520,498394801129029120,553426253907179520,613867215317368320,680185280130048000};//这是表，记得5<=n，那么数组前面要加5个零，或者输出x[n-5]
int main(){
	cin>>n;
	cout<<x[n];//输出对应数字
}
```

---

## 作者：OLE_OIer (赞：0)

这道题是一道比较简单的组合数学题。

题目说有 $5$ 个长凳，而且它们不在同一行或同一列上，所以我们就先从 $n$ 行中选出 $5$ 行来放长凳，显然有 $C^5_n$ 种可能性。然后对于选出的第一行，没有约束条件，有 $n$ 种放长凳的可能性；对于选出的第二行，长凳不能放在第一行已经放过的那一列，故有 $n-1$ 种可能性；同理第三行、第四行、第五行分别有 $n-2$、$n-3$、$n-4$ 种可能性。所以由乘法原理可以得到总可能性数量为 $C^5_n\times n \,\times (n-1) \,\times (n-2) \,\times (n-3) \,\times (n-4)=(C^5_n)^2 \, \times 5!$。

代码如下：
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int c(int a,int b){//计算组合数
	int ans=1;
	for(int i=1;i<=b;++i) ans=ans*(a+1-i)/i;
	return ans;
}
signed main(){
	int n;
	cin>>n;
	cout<<c(n,5)*c(n,5)*120;
	return 0;
}
```

---

## 作者：first_fan (赞：0)

本题主要考察组合数。

首先，我们从6X6这样的小数据模拟一下（先摆一种）

`*是长椅，#是交叉路`

```cpp
* # # # # #
# * # # # #
# # * # # #
# # # * # #
# # # # * #
# # # # # #
```

我把算种数的步骤分为两步：

* 忽略空行，仅考虑在删除空行的图中按行放。

* 插入空行，计算空行的插入方式。

那么我们可以看到，如果不考虑最后的空行，我们在6X5的棋盘内可以摆放的方式有：

第5行2种，第4行3种，第3行4种，第2行5种，第1行6种……

所以根据乘法原理，在不考虑空行的时候就会有$\frac{6!}{1!}$种摆法，摆放方式一共有$\frac{n!}{(n-5)!}$种（n=5的时候就是n!种）

然后我们就要枚举空行了，此处的空行仅一行，所以我们要`在6行中选1行`，空行的选法一共就有$C^{n}_{n-5}$种。

根据乘法原理，我们算得总种数:$C^{n}_{n-5}*\frac{n!}{(n-5)!}$

我们把组合数拆开，得到了：$\frac{(\frac{n!}{(n-5)!})^2}{120}$

再推一步吧：$\frac{(n*(n-1)*(n-2)*(n-3)*(n-4))^2}{120}$

那么就结束了，$O(1)$计算吧。


```cpp
#include <bits/stdc++.h>
#define ri register int
#define ll long long
using namespace std;

int read()
{
	int num=0;
	int flg=1;
	char c=getchar();
	while(!isdigit(c))
	{
		if(c=='-')
		{
			flg=-1;
		}
		c=getchar();
	}
	while(isdigit(c))
	{
		num=(num<<1)+(num<<3)+(c^48);
		c=getchar();
	}
	return num*flg;
}

int main()
{
	int n=read();
	return 0&printf("%lld",(n-4)*(n-3)*(n-2)*(n-1)*n*(n-4)*(n-3)*(n-2)*(n-1)*n/120);
}
```

---


# Baudelaire (easy version)

## 题目描述

这是该问题的简单版本。两个版本之间的唯一区别在于，在这个版本中，保证每个节点都与节点 $1$ 相邻。

本题是交互题。

波德莱尔非常富有，所以他购买了一棵大小为 $n$ 的树，这棵树以某个任意节点为根。此外，每个节点的值为 $1$ 或 $-1$。在这个版本中，每个节点都与节点 $1$ 相邻。但请注意，节点 $1$ 不一定是根节点。

书呆子牛看到了这棵树并爱上了它。然而，计算机科学的收入不足以让他买下这棵树。波德莱尔决定和书呆子牛玩一个游戏，如果他赢了，就把这棵树送给他。

书呆子牛不知道哪个节点是根，也不知道节点的值。但他可以向波德莱尔提出两种类型的查询：

1. `1 k u₁ u₂ ... uₖ`：设 $f(u)$ 为从树的根到节点 $u$ 的路径上所有节点的值之和。书呆子牛可以选择一个整数 $k$（$1 \le k \le n$）和 $k$ 个节点 $u_1, u_2, ..., u_k$，然后他会收到值 $f(u_1) + f(u_2) + ... + f(u_k)$。
2. `2 u`：波德莱尔将切换节点 $u$ 的值。具体来说，如果 $u$ 的值为 $1$，则变为 $-1$，反之亦然。

如果书呆子牛在总共 $n + 200$ 次查询内正确猜出每个节点的值（即执行查询后树的最终值），他就获胜。你能帮助他获胜吗？

## 说明/提示

在示例中，树的根是节点 $2$，节点的初始值为 $[-1, 1, -1, 1]$。因此，$f(1) = 0$，$f(2) = 1$，$f(3) = -1$，$f(4) = 1$。

首先，我们查询 $f(1) + f(2) + f(3)$ 的和，得到 $0$。然后，我们切换节点 $2$ 的值，此时节点的值变为 $[-1, -1, -1, 1]$。因此，$f(1) = -2$，$f(2) = -1$，$f(3) = -3$，$f(4) = -1$，$f(1) + f(2) + f(3) = -6$。

最终，我们推断出节点的值为 $[-1, -1, -1, 1]$，并输出该结果。

注意，这只是一个解释查询如何工作的示例，并不涉及具体的解题策略。

翻译由 DeepSeek V3 完成

## 样例 #1

### 输入

```
1
4
1 2
3 1
1 4

0


-6```

### 输出

```
? 1 3 1 2 3

? 2 2
? 1 3 1 2 3

! -1 -1 -1 1```

# 题解

## 作者：_O_v_O_ (赞：0)

来个无脑做法，而且还爆标了。但是这个做法无法推广到 hard ver. 中。

我们注意到我们先询问一次 `? 1 1 1` 即可求出 $1$ 是不是根。具体的，因为这张图是个菊花，所以若根不是 $1$，那么从 $1$ 到根最多经过 $2$ 个点，而点权只能是 $\pm 1$，那么询问出来的结果绝对是偶数，反之绝对是奇数。

那么分讨一下：

1. $1$ 是根：

简单，因为我们在第一次询问中已经知道了 $a_1$，那么我们对于每个 $\forall 2\le i\le n$，询问 `? 1 1 i`，那么给出的答案为 $a_i+a_1$。

2. $1$ 不是根：

很显然若第一次得出的答案为 $\pm 2$ 时，我们可以得出 $a_1$ 的点权。所以要先思考第一次得出的答案为 $0$ 时，要咋搞。

很显然，因为 $a_1+a_{root}=0$，那么我们先做一次 `? 2 1`，再询问 `? 1 1 1`，就能得出目前的 $a_1$。我们就发现，这种情况就合并到其他两种情况了。

我们发现，此时再做一次 `? 2 1` 即可把 $a_1+a_{root}$ 变为 $0$。

那么我们再对于 $\forall 2\le i\le n$ 的 $i$，询问 `? 1 1 i`。那么若 $i\neq root$，得到的答案为 $a_i+a_1+a_{root}$，又因为 $a_1+a_{root}=0$，那么得到的答案为 $a_i$！  
若 $i=root$，很显然，得到的答案也是 $a_i$。

自此，我们在 $O(n)$ 次询问中得到了答案。

---


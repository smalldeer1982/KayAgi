# Knights

## 题目描述

Ivan 在无限大的国际象棋棋盘上放置骑士。最初棋盘上有 $n$ 个骑士。如果存在一个空格子被至少 $4$ 个骑士攻击到，那么他就在这个格子上放置一个新的骑士。Ivan 重复这个过程，直到不存在这样的空格子为止。可以证明，这个过程是有限的。也可以证明，最终的棋子分布与新骑士放置的顺序无关。

Ivan 让你找到一种恰好放置 $n$ 个骑士的初始方案，使得最终棋盘上至少有 $\lfloor \frac{n^{2}}{10} \rfloor$ 个骑士。

## 说明/提示

让我们来看第二个样例：

![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1067C/1b1831e33b9c7fd1ae942c44032d9f6c6e603132.png)

绿色的 0 表示初始放置的骑士。格子 $(3,\, 3)$ 被 $(1,\, 2)$、$(2,\, 1)$、$(4,\, 1)$ 和 $(5,\, 2)$ 这四个格子的骑士攻击，因此 Ivan 会在这个格子放置一个新的骑士。格子 $(4,\, 5)$ 最初只被 $(2,\, 6)$、$(5,\, 7)$ 和 $(6,\, 6)$ 这三个骑士攻击。但新放置在 $(3,\, 3)$ 的骑士也会攻击 $(4,\, 5)$，此时它被 $4$ 个骑士攻击，Ivan 会在这个格子再放一个骑士。此时没有更多被 $4$ 个或更多骑士攻击的空格子，过程结束。最终棋盘上有 $9$ 个骑士，不小于 $\lfloor \frac{7^{2}}{10} \rfloor = 4$。

由 ChatGPT 4.1 翻译

## 样例 #1

### 输入

```
4
```

### 输出

```
1 1
3 1
1 5
4 4
```

## 样例 #2

### 输入

```
7
```

### 输出

```
2 1
1 2
4 1
5 2
2 6
5 7
6 6
```

# 题解

## 作者：DJRzjl (赞：5)

题目最终数量要求是 $\lfloor \frac{n^2}{10} \rfloor$​​​​​，是平方级别的，可以猜测应该是通过初始局面经过多轮放置得到，而不是一轮，我们先从最简单的放置两行棋子看起。

 ![](https://cdn.luogu.com.cn/upload/image_hosting/5xokifta.png?x-oss-process=image/resize,m_lfit,h_280,w_585)

如图，中间两行全部放置，可以得到这样的连锁反应，

图中绿色为初始局面放置的棋子，蓝色为第一轮扩展得到的棋子，黄色为第二轮，橙色为第三轮。

若初始有 $n$​​ 个棋子，那么放置的行宽为 $\frac{n}{2}$​​，第 $i$​​ 轮扩展都会在上下个产生一排长 $\frac{n}{2}-4i$​​ 的棋子。为简便计算，假设 $8\mid n$​​，那么最后会形成 ：
$$
n+(n-8)+(n-16)+(n-24)+\cdots+0=(8+n) \times \frac{n}{8}\times \frac{1}{2}=\frac{n^2+8n}{16}
$$
不难发现这是个平方级别的构造方案，但仍达不到题目要求 ，所以还需要优化。

考虑初始时多加一行，如图，删去多余的可以被构造出来的棋子，得到：

![](https://cdn.luogu.com.cn/upload/image_hosting/v9j344sg.png?x-oss-process=image/resize,m_lfit,h_280,w_585)

观察这种情况，一开始三行每排 $13$​ 个棋子，之后每往上下一行，格数依次是 $9,5,\cdots$​，所以它与放置两行的情况类似。

若初始有 $n$​​​​​ 个棋子，那么初始三排扩展出的宽度为 $(n-2) \times \frac{2}{3}-1~=~\frac{2n-7}{3}$​​​​​ 格，设其为 $k$​​​，并假设 $8\mid2k$​​​​，可以算出最后会扩展出：


$~~~~k+2k+(2k-8)+(2k-16)+\cdots+0$


$=k+(2k+8)\times \frac{2k}{8}\times\frac1 2 $


$=\large\frac{k^2+8k}{4}$


$=\large\frac{(\frac{2n-7}{3})^2-8(\frac{2n-7}{3})}{4}$


$=\large\frac{4n^2+20n-119}{36}$


我们借助计算器画出它与 $\lfloor \frac {n^2} {10} \rfloor$​ 的图像：


![](https://cdn.luogu.com.cn/upload/image_hosting/tcjp1wfy.png?x-oss-process=image/resize,m_lfit,h_500,w_750)

可以发现在 $n\ge 10$​​ 时，这样构造得到的棋子数会一直大于 $\lfloor \frac {n^2} {10} \rfloor$​​，而对于 $n<10$​​，因为此时 $n\ge \lfloor \frac {n^2} {10} \rfloor$​​，所以可随意放置。

值得注意的是，这里的推导假设了 $8 \mid 2k$ 以简便计算，如果不整除，我们将多出的随意放置，可以发现最终数目仍可以满足条件。


---

## 作者：DPair (赞：2)

注：思路源于博客https://www.cnblogs.com/st1vdy/p/11284357.html 内容不同但思路相似。
## 【思路】
这是一道典型的构造题，没有什么思路，主要是构造方法。

我们这么去想：

由于我们要让总的“马”数大于一个值，因此我们要让马尽可能多，因此，我们原有“马”的利用率要尽可能大。

由于我们要使“马”的数量变为$\lfloor{\frac{n^2}{10}}\rfloor$，我们先考虑一般的构造。

我们先从行开始考虑。。。

## 【构造】
（红格子是老马，绿格子是新马）
我们先考虑马全在1行的情况。
![](https://cdn.luogu.com.cn/upload/pic/68930.png)

明显这样一个马都构造不出来（自行理解一下），那我们换一种：
![](https://cdn.luogu.com.cn/upload/pic/68931.png)

这样一来，我们就可以构造出新的马

如果$n$再大一点呢？

先是这样：
![](https://cdn.luogu.com.cn/upload/pic/68932.png)

然后是这样
![](https://cdn.luogu.com.cn/upload/pic/68935.png)

后面就没得构造了。

可以发现，每次新出现的个数每一行会少$4$，而每一行一开始有$\frac{n}{2}$个。

因此，我们等差数列求和，得这种方式的总马个数
$$2\sum (\frac{n}{2} - 4i) = 2\cdot \frac{\frac{n}{2}(\frac{n}{2}\cdot \frac{1}{4})}{2} = 
\frac{n^2}{16}$$

个数不够，我们继续想。。。
![](https://cdn.luogu.com.cn/upload/pic/68936.png)

我们分成$3$行，发现有一些马是浪费的，因为它们可以被构造出来，我们只需要上图中的部分马。

于是，我们只需要下图标红的马，就可以得到与上图同样的效果。
![](https://cdn.luogu.com.cn/upload/pic/68938.png)

而此时，一行大约是$\frac{n}{3}$的马，但可以构造后一行得到$\frac{2n}{3}$的马。

用它代替上文中的$\frac{n}{2}$，明显更加优秀，加上常数最后大约有
$$\frac{n^2}{8}$$
的马。

然后就这么构造就好了。
代码懒得放了

---

## 作者：Felix72 (赞：1)

更简单的构造。

容易想出放置两行挨着的马，这样往上、下两个方向分别产生公差为 $4$ 的等差数列，总个数大概是 $2 \times \frac{\frac{n}{2} \times \frac{n}{8}}{2} = \frac{n^2}{16}$。与正解仅有常数 $(\frac{1}{16} \to \frac{1}{10})$ 的区别。

尝试偷工减料，即以更少的棋子达到相同的效果。

![](https://cdn.luogu.com.cn/upload/image_hosting/wbspuzvw.png)

我们发现把两行马中间空两行，这两行会被顺便构造出来，看起来很不错。但这样仅仅多了 $2n$，是远远不够的。

但是考虑到中间两行一旦被构造出来，就会达到和原构造相同的效果。因此我们仅仅需要考虑用更少的马构造出中间两行即可。

我们写出模拟程序，多次尝试可以发现如下构造能产生两行马：

![](https://cdn.luogu.com.cn/upload/image_hosting/6fju4p48.png)

那么按图输出即可。

---


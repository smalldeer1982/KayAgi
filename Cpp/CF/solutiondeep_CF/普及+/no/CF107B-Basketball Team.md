# 题目信息

# Basketball Team

## 题目描述

### 题面背景

作为德国开罗一所大学（简称 GUC ）的一名学生，瓦法同时也是一名篮球运动员。当听到 GUC 终于入围了一年一度的篮球比赛 （简称 ABC ）时，他十分高兴。

&nbsp;

### 题面描述

一个篮球队由 $n$ 名 GUC 的球员组成，但是团队中可能有来自不同学系的学生。 GUC 有 $m$ 个学系，编号从 $1$ 到 $m$ ，瓦法的学系编号为 $h$ 。对于学系 $i$， 已知 $s_i$ ，意思是学系 $i$ 中，有多少个打篮球的学生。

瓦法有特殊能力，使他一定能在篮球队中占一席之地。但是由于他讨厌浮点数，所以他需要你帮助他计算篮球队中至少有一个队友与他同一个学系的可能性。

**注意：我们认为每一个包含瓦法的团队出现的概率相同，每个学生彼此不同。**

&nbsp;

## 说明/提示

#### 样例1

3个选手（两个来自学系1，一个来自学系2）必须被选中，即与瓦法来自同一个学系的选手会被选中，所以一定有一个队员与他来自同一个学系。

#### 样例2

选手不足

#### 样例3

篮球队选中瓦法的情况一共有 3 种，其中 2 种中有与瓦法来自同一个学系的队员。

&nbsp;

$ 1 \leqslant n \leqslant 100 $

$ 1 \leqslant m \leqslant 1000 $

$ 1 \leqslant h \leqslant m $

$ 1 \leqslant s_i \leqslant 100$

## 样例 #1

### 输入

```
3 2 1
2 1
```

### 输出

```
1
```

## 样例 #2

### 输入

```
3 2 1
1 1
```

### 输出

```
-1
```

## 样例 #3

### 输入

```
3 2 1
2 2
```

### 输出

```
0.666667
```

# AI分析结果

### 题目内容
# 篮球队

## 题目描述

### 题面背景
作为德国开罗一所大学（简称 GUC ）的一名学生，瓦法同时也是一名篮球运动员。当听到 GUC 终于入围了一年一度的篮球比赛 （简称 ABC ）时，他十分高兴。

### 题面描述
一个篮球队由 $n$ 名 GUC 的球员组成，但是团队中可能有来自不同学系的学生。GUC 有 $m$ 个学系，编号从 $1$ 到 $m$ ，瓦法的学系编号为 $h$ 。对于学系 $i$， 已知 $s_i$ ，意思是学系 $i$ 中，有多少个打篮球的学生。

瓦法有特殊能力，使他一定能在篮球队中占一席之地。但是由于他讨厌浮点数，所以他需要你帮助他计算篮球队中至少有一个队友与他同一个学系的可能性。

**注意：我们认为每一个包含瓦法的团队出现的概率相同，每个学生彼此不同。**

## 说明/提示
#### 样例1
3个选手（两个来自学系1，一个来自学系2）必须被选中，即与瓦法来自同一个学系的选手会被选中，所以一定有一个队员与他来自同一个学系。

#### 样例2
选手不足

#### 样例3
篮球队选中瓦法的情况一共有 3 种，其中 2 种中有与瓦法来自同一个学系的队员。

$ 1 \leqslant n \leqslant 100 $
$ 1 \leqslant m \leqslant 1000 $
$ 1 \leqslant h \leqslant m $
$ 1 \leqslant s_i \leqslant 100$

## 样例 #1
### 输入
```
3 2 1
2 1
```
### 输出
```
1
```

## 样例 #2
### 输入
```
3 2 1
1 1
```
### 输出
```
-1
```

## 样例 #3
### 输入
```
3 2 1
2 2
```
### 输出
```
0.666667
```

### 算法分类
概率论、组合数学

### 综合分析与结论
这些题解思路核心一致，均采用“正难则反”策略。先算出总人数，明确从总人数 - 1 中选 n - 1 个人为总情况数，从总人数减去瓦法学系人数中选 n - 1 个人为不存在同系队友的情况数，最后用 1 减去不存在同系队友的概率，得到至少有一个同系队友的概率。在实现上，因直接算组合数的阶乘会溢出，都对组合数公式进行化简，通过连乘形式计算。各题解的主要差异在于变量命名、代码风格以及化简式子的具体写法。

### 所选的题解
 - **作者：是个汉子 (5星)**
    - **关键亮点**：思路清晰，对“正难则反”策略阐述明确，详细给出公式推导过程，代码简洁明了，注释清晰。
    - **重点代码**：
```c++
int main(){
    scanf("%d%d%d",&n,&m,&h);
    for(int i=1;i<=m;i++)
        scanf("%d",&a[i]),sum+=a[i];
    if(sum<n){
        puts("-1");
        return 0;
    }
    if(sum-a[h]<(n-1)){
        puts("1");
        return 0;
    }
    double ans=1.0;
    double x=sum-a[h],y=sum-1;
    for(int i=1;i<=n-1;i++){
        ans*=x/y;
        x--;y--;
    }
    printf("%.10f\n",1.0-ans);
    return 0;
}
```
    - **核心实现思想**：先读入数据并计算总人数，判断人数不足和必定有同系队友的特殊情况。然后通过循环连乘计算不存在同系队友的概率，最后用 1 减去该概率得到结果。

 - **作者：WCG2025 (4星)**
    - **关键亮点**：将题目类比为盒子取球问题，易于理解，代码实现简洁，逻辑清晰。
    - **重点代码**：
```cpp
int main()
{ 
    n=read();
    mm=read();
    h=read();
    int sum=0;
    for(int i=1;i<=mm;i++)
    {
        m[i]=read();
        sum+=m[i];
    }
    if(sum<n)
        cout<<-1<<endl;
    else
    {
        double ans=1;
        for(int i=0;i<n-1;i++)
            ans*=(sum-m[h]-n+2+i)*1.0/(sum-n+1+i);
        ans=1-ans;
        cout<<ans<<endl;
    }
}
```
    - **核心实现思想**：读入数据并统计总人数，判断人数不足情况。通过循环连乘计算不存在同系队友的概率，最后得到至少有一个同系队友的概率。

 - **作者：TemplateClass (4星)**
    - **关键亮点**：对公式推导详细，清晰展示化简过程，时间复杂度分析明确。
    - **重点代码**：
```cpp
int main() {
    scanf("%d%d%d", &n, &m, &h);
    int t = 0;
    for (int i = 1; i <= m; ++i) {
        int si; scanf("%d", &si);
        t += si;
    }
    if (n > t) {
        puts("-1");
        return 0;
    }
    double ans = 1;
    for (int i = t - s[h] - n + 2; i <= t - n; ++i) ans *= i;
    for (int i = t - s[h] + 1; i <= t - 1; ++i) ans /= i;
    printf("%.10lf\n", 1 - ans);
    return 0;
}
```
    - **核心实现思想**：读入数据并计算总人数，判断人数不足情况。通过两个循环分别计算分子分母连乘结果得到不存在同系队友的概率，最后得出至少有一个同系队友的概率。

### 最优关键思路或技巧
“正难则反”的思维方式，将求至少有一个同系队友的复杂情况，转化为求不存在同系队友的简单情况，再通过概率公式计算。同时，对组合数公式进行化简，避免直接计算阶乘导致的溢出问题，采用连乘形式计算概率。

### 同类型题或类似算法套路拓展
此类题目通常涉及概率计算，当正向计算复杂时，可考虑反向计算。类似套路还常用于计算满足多个条件中至少一个条件的概率问题，先计算所有条件都不满足的概率，再用 1 减去该概率。

### 洛谷推荐题目
 - **P1313 计算系数**：涉及二项式定理与组合数计算，与本题组合数学知识点相关。
 - **P2822 [NOIP2016 提高组] 组合数问题**：专注于组合数性质及计算，锻炼对组合数的理解和应用。
 - **P3327 [SDOI2015]约数个数和**：结合数论与组合数学知识，可加深对相关知识点综合运用的能力。 

---
处理用时：78.47秒
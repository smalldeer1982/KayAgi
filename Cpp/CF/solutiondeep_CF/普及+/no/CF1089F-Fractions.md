# 题目信息

# Fractions

## 题目描述

给定一个$n$，确定一些分数，使得这些分数的分母是$n$的因数，且$<n$，并且这些分数都是真分数，这些分数的和+$\frac{1}{n}=1$。

## 样例 #1

### 输入

```
2
```

### 输出

```
NO
```

## 样例 #2

### 输入

```
6
```

### 输出

```
YES
2
1 2
1 3
```

# AI分析结果

### 题目内容
# 分数

## 题目描述
给定一个$n$，确定一些分数，使得这些分数的分母是$n$的因数，且小于$n$，并且这些分数都是真分数，这些分数的和加上$\frac{1}{n}$等于$1$。

## 样例 #1
### 输入
```
2
```
### 输出
```
NO
```

## 样例 #2
### 输入
```
6
```
### 输出
```
YES
2
1 2
1 3
```

### 算法分类
数学

### 综合分析与结论
这些题解都围绕对$n$的性质分析来构造满足条件的分数。核心思路是先判断$n$为质数幂形式时无解，对于其他情况，尝试用两个分数构造解。主要难点在于如何找到合适的分母及对应的分子，使等式成立。各题解在具体构造方式、复杂度分析和代码实现上有所不同。

### 所选的题解
- **作者：TonyYin（5星）**
    - **关键亮点**：思路清晰，详细分析不同情况，先对$n$质因数分解，分$n = p^m$（$p$为质数）和其他情况讨论。对于其他情况，将$n$表示为两个互质的数$x$和$y$的乘积，通过推导等式$c\cdot y + d\cdot x = n - 1$，利用完全剩余系性质，在$1\sim x - 1$枚举$c$找到满足条件的$c$和$d$，时间复杂度分析准确为$\mathcal{O}(\sqrt{n})$。
    - **重点代码**：
```cpp
int n;
vector<int> fac;
int main() {
    scanf("%d", &n);
    int p1 = -1;
    for(int i = 2; i * i <= n; i++) {
        if(n % i == 0) {p1 = i; break;}
    }
    if(p1 == -1) p1 = n;
    int x = p1, y = n / p1;
    while(y % p1 == 0) y /= p1, x *= p1;
    if(y == 1) {
        cout << "NO" << endl;
        return 0;
    }
    int ansc, ansd;
    for(int c = 1; c <= x - 1; c++) {
        if((c * y + 1) % x == 0) {
            ansc = c; ansd = (n - 1 - c * y) / x;
            break;
        }
    }
    cout << "YES\n2\n" << ansc << " " << x << "\n" << ansd << " " << y << endl;
    return 0;
}
```
    - **核心实现思想**：先找$n$的一个质因数$p1$，确定$x$和$y$使得$xy = n$且$\gcd(x, y) = 1$，若$y = 1$说明$n$是质数幂形式无解。否则枚举$c$找到满足条件的$c$和$d$，输出结果。
- **作者：loser_seele（5星）**
    - **关键亮点**：理论时间复杂度更优，利用Pollard - rho分解质因数，拉出一个质因子$x$，除尽$n$得到$y$，通过推导$cx + dy = n - 1$，利用扩展欧拉定理求解$c$，避免暴力枚举，总时间复杂度为$\mathcal{O}(n^{\frac{1}{4}})$。
    - **重点代码**：（未提供完整代码，此处仅示意核心部分）
```cpp
// 假设已有Pollard - rho分解质因数函数
// 找到质因子x和y
// 计算c
int c = pow(y, phi(x) - 1) * (x - 1) % x;
int d = (n - 1 - c * y) / x;
if (d > 0) {
    // 输出结果
} else {
    // 无解处理
}
```
    - **核心实现思想**：分解质因数后确定$x$和$y$，通过扩展欧拉定理求$c$，进而计算$d$判断是否有解。
- **作者：Acfboy（4星）**
    - **关键亮点**：简洁地分析出无解情况和两个分数可构造解的思路。通过对等式$ax + by = n - 1$变形为$b = \frac{n - 1 - ax}{y}$，利用$x$和$y$互质，$ax$在模$y$意义下循环节长度是$y$，证明存在满足条件的$a$，代码实现较为简洁。
    - **重点代码**：
```cpp
#include <cstdio>
int n, fac[105], m;
int main() {
    scanf("%d", &n);
    int n_ = n;
    for(int i = 2; i*i <= n; i++)
        if(n_ % i == 0) {
            fac[++m] = i;
            while(n_ % i == 0) n_ /= i;
        }
    if(n_!= 1) fac[++m] = n_;
    if(m <= 1) return puts("NO"), 0;

    puts("YES\n2");

    int a, b, x = fac[1], y = fac[2];
    for(a = 1; a <= y - 1; a++)
        if((a*x + 1) % y == 0) { b = (n - 1 - a*x)/y; break; }
    printf("%d %d\n%d %d", a, n/x, b, n/y);
    return 0;
}
```
    - **核心实现思想**：先找出$n$的所有质因子，若质因子个数小于等于1则无解。否则取前两个质因子$x$和$y$，枚举$a$找到满足条件的$a$和$b$并输出。

### 最优关键思路或技巧
1. **数论分析**：通过对$n$的质因数分解，分析$n$为质数幂形式无解，其他情况可构造两个分数的解，利用数论性质如互质、完全剩余系、扩展欧拉定理等解决问题。
2. **构造方法**：将$n$表示为两个互质的数的乘积，通过等式推导和性质分析找到满足条件的分数的分子分母。

### 可拓展之处
同类型题常围绕数论中质因数分解、同余方程、互质等知识点，类似算法套路是先对给定数进行质因数分解，根据数的性质判断是否有解，再通过构造等式并利用数论定理求解。

### 洛谷相似题目
1. **P1072 [NOIP2009 普及组] Hankson 的趣味题**：涉及数论中最大公约数和最小公倍数的计算与分析。
2. **P2155 [SDOI2008] 沙拉公主的困惑**：需要运用数论知识如欧拉函数、阶乘等解决问题。
3. **P3951 [NOIP2017 提高组] 小凯的疑惑**：通过数论分析解决关于两个互质数的线性组合问题。

### 个人心得摘录与总结
无。 

---
处理用时：56.94秒
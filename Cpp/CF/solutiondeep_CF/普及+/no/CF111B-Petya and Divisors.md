# 题目信息

# Petya and Divisors

## 题目描述

**Petya**喜欢寻找数字的因子。有一天他看到了这样的一条题目$:$



有$n$个形如$[x,y]$的二元组，对于每一个二元组，**Petya**希望找到有多少个$x_i$的因子，使得在$[x_{i-y_i},x_{i-y_i+1},\cdots,x_{i-1}]$中的每一个数都不能整除它。帮帮他解决这个问题吧。

## 说明/提示

样例一中前五个数的符合条件的因子如下:



- $1)$  $1,2,4$

- $2)$  $3$

- $3)$  $5$

- $4)$  $2,6$

- $5)$  $9,18$

## 样例 #1

### 输入

```
6
4 0
3 1
5 2
6 2
18 4
10000 3
```

### 输出

```
3
1
1
2
2
22
```

# AI分析结果

### 题目内容
# Petya和因数

## 题目描述
Petya喜欢寻找数字的因数。有一天他看到了这样一道题目：

有n个形如[x, y]的二元组，对于每一个二元组，Petya希望找到有多少个xi的因数，使得在[xi - yi, xi - yi + 1,..., xi - 1]中的每一个数都不能整除它。帮帮他解决这个问题吧。

## 说明/提示
样例一中前五个数的符合条件的因数如下：
- 1)  1, 2, 4
- 2)  3
- 3)  5
- 4)  2, 6
- 5)  9, 18

## 样例 #1
### 输入
```
6
4 0
3 1
5 2
6 2
18 4
10000 3
```
### 输出
```
3
1
1
2
2
22
```

### 算法分类
枚举

### 综合分析与结论
这两道题解思路基本一致，都是通过枚举每个数的因子，并记录因子最后出现的位置，来判断该因子是否符合条件。算法要点在于利用map来记录因子出现的位置，通过判断因子最后出现位置与当前询问中的x - y的关系，决定该因子是否满足要求。解决难点在于如何高效地枚举因子以及合理利用记录的因子位置信息进行判断。

### 题解分析
- **作者：dfadfsafsdaf (赞：1)**
  - **星级**：4星
  - **关键亮点**：思路清晰，代码结构完整，利用map记录因子最后出现位置，在枚举因子时通过check函数进行判断，逻辑清晰。
  - **重点代码**：
```cpp
map<int,int> H;
int check(int x,int y,int z)
{
    int flag = 1;
    if(H[z]>=x-y)
        flag = 0;
    H[z]=x;
    if(flag==0)
        return 0;
    return 1;
}
for(int i=1;i<=n;i++)
{
    int x,y;scanf("%d%d",&x,&y);
    int ans = 0;
    for(int j=1;j*j<=x;j++)
    {
        if(x%j==0)
        {
            if(check(i,y,j))
                ans++;
            if(x/j!=j)
            {
                if(check(i,y,x/j))
                    ans++;
            }
        }
    }
    printf("%d\n",ans);
}
```
  - **核心实现思想**：check函数用于判断因子z是否符合条件，主循环中枚举x的因子，调用check函数判断并统计符合条件的因子个数。

- **作者：小杨小小杨 (赞：0)**
  - **星级**：4星
  - **关键亮点**：同样利用map记录因子位置，代码简洁，通过pd函数判断因子合法性，整体逻辑清晰。
  - **重点代码**：
```cpp
map<int,int> ma;
bool pd(int x,int y,int z){
	if (ma[z]>=x-y) {ma[z]=x;return false;}
	ma[z]=x;
	return true;
}
for (i=1;i<=n;i++){
	scanf("%d%d",&x,&y);
	ans=0;
	for (j=1;j*j<=x;j++)
		if (x%j==0){
			ans+=pd(i,y,j);
			if (x!=j*j) ans+=pd(i,y,x/j);
		}
	printf("%d\n",ans); 
}
```
  - **核心实现思想**：pd函数判断因子z是否合法，主循环枚举x因子并调用pd函数统计符合条件的因子数。

### 最优关键思路或技巧
利用map数据结构记录因子最后出现的位置，优化枚举因子过程中的判断，从而在可接受的时间复杂度内解决问题。在枚举因子时，利用j * j <= x的方式，减少一半的枚举量，并同时处理j和x / j两个因子。

### 拓展
同类型题通常围绕数字的因数、倍数关系以及区间判断等展开，类似算法套路是通过记录某些关键信息（如本题的因子出现位置），优化枚举过程中的判断逻辑。

### 洛谷相似题目
- P1039 [NOIP2003 提高组] 侦探推理
- P1164 小A点菜
- P1085 [NOIP2004 普及组] 不高兴的津津 

---
处理用时：42.86秒
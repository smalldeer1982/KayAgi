# 题目信息

# The Feast and the Bus

## 题目描述

某公司的员工们要庆祝今天的第$256$天！该公司有$n$名员工和$k$个团队，每个员工仅属于$1$个团队，每个团队至少有$1$名员工。团队编号从$1$到$k$。现在给出$n$个数字：$t_1,t_2,……t_n$，$t_i$表示第$i$个员工属于第$t_i$个团队。该公司雇佣了一辆班车，这辆班车将会往返多次承载员工去参加宴会，每一次可以承载$1$个团队或者$2$个团队，且每一个团队不能分离，必须在同一次车上。这辆车可以承载$s$个员工，$s$可以为任意值，假设通过$r$次运输，所有的员工都到达宴会目的地了，该公司需要支付$s*r$元(只有$1$辆班车)。现在要你计算$r*s$的最小值。

## 样例 #1

### 输入

```
6 3
3 1 2 3 2 3
```

### 输出

```
6
```

## 样例 #2

### 输入

```
10 1
1 1 1 1 1 1 1 1 1 1
```

### 输出

```
10
```

## 样例 #3

### 输入

```
12 4
1 2 3 1 2 3 4 1 2 1 2 1
```

### 输出

```
12
```

# AI分析结果

### 题目翻译
# 盛宴与班车

## 题目描述
某公司的员工们要庆祝今年的第 256 天！该公司有 $n$ 名员工和 $k$ 个团队，每个员工仅属于 1 个团队，每个团队至少有 1 名员工。团队编号从 1 到 $k$。现在给出 $n$ 个数字：$t_1,t_2,\cdots,t_n$，$t_i$ 表示第 $i$ 个员工属于第 $t_i$ 个团队。该公司雇佣了一辆班车，这辆班车将会往返多次承载员工去参加宴会，每一次可以承载 1 个团队或者 2 个团队，且每一个团队不能分离，必须在同一次车上。这辆车可以承载 $s$ 个员工，$s$ 可以为任意值，假设通过 $r$ 次运输，所有的员工都到达宴会目的地了，该公司需要支付 $s\times r$ 元（只有 1 辆班车）。现在要你计算 $r\times s$ 的最小值。

## 样例 #1
### 输入
```
6 3
3 1 2 3 2 3
```
### 输出
```
6
```

## 样例 #2
### 输入
```
10 1
1 1 1 1 1 1 1 1 1 1
```
### 输出
```
10
```

## 样例 #3
### 输入
```
12 4
1 2 3 1 2 3 4 1 2 1 2 1
```
### 输出
```
12
```

### 算法分类
贪心、枚举

### 综合分析与结论
- **思路对比**：
    - Waldin 的题解通过枚举有 $i$ 次车运 2 个团队，在每个 $i$ 的情况下计算 $s$ 和 $r$，$r = k - i$，$s$ 至少是人数最多的团队人数，让运 2 个团队的车所运团队为人数前 $2i$ 小的团队，且每次选当前人数最多和最少的团队共乘一辆车来保证载重量最小。
    - Wander_E 的题解先基于贪心思路，让人数最多的团队和人数最少的团队坐在一起，使用双指针实现。然后枚举人数上限，下限是团队人数最大值，上限是团队人数最大值与次大值之和，计算每种情况下的 $r\times s$ 并取最小值。
- **算法要点对比**：
    - Waldin 的题解主要是枚举运 2 个团队的次数，再进行贪心选团队组合。
    - Wander_E 的题解是先贪心安排团队乘车，再枚举人数上限。
- **解决难点对比**：
    - 两者都要解决如何合理安排团队乘车以使得 $r\times s$ 最小的问题。Waldin 通过枚举运 2 个团队的次数来确定方案，Wander_E 通过枚举人数上限来确定方案。

### 题解列表
- **Waldin 的题解（4星）**
    - **关键亮点**：思路清晰，对时间复杂度有详细分析，使用快速读入优化，代码变量范围控制精准，便于把握变量值域。
    - **个人心得**：提到比较喜欢卡常，代码里变量范围开得刚刚好，便于读者对每个变量的值域有较清楚的把握。
- **Wander_E 的题解（4星）**
    - **关键亮点**：思路清晰，详细阐述了贪心和枚举的过程，并且指出了代码实现中的坑点，如不要全部无脑开 Long Long，使用 C++14 及以下版本。
    - **个人心得**：提到 CF 数据比较严，做题时要注意时间复杂度，稍有不慎就会 TLE。

### 重点代码
#### Waldin 的题解核心代码
```cpp
for (unsigned long i = 0; i <= k / 2; ++i) {  // 枚举有 i 次车运 2 个团队
    unsigned long s = team[k];  // 至少得是人数最多的那个团队的人数
    for (unsigned short j = 1; j <= i; ++j)
        to_max(s, team[j] + team[i * 2 + 1 - j]);  // 在人数最小的 2i 个团队中每次选两头的(最大的和最小的)组一辆车
    to_min(ans, s * (k - i));  // 统计答案
}
```
**核心实现思想**：枚举运 2 个团队的次数 $i$，计算每次情况下的 $s$（载重量），$s$ 至少是人数最多的团队人数，在人数最小的 $2i$ 个团队中每次选人数最多和最少的团队组合，更新 $s$，最后计算 $s\times r$ 并更新答案。

#### Wander_E 的题解核心代码
```cpp
int calc(int lim)
{
    int cnt = 0;
    int l = 1, r = k;
    while(l <= r)
    {
        cnt++;
        if(l == r) break;
        if(team[l] + team[r] <= lim && l < r) 
            l++, r--;
        else r--;
    }
    return cnt;
}

for(int i = team[k]; i <= team[k - 1] + team[k]; i++)
{
    ans = min(ans, 1ll * i * calc(i));
}
```
**核心实现思想**：`calc` 函数使用双指针模拟团队乘车过程，根据人数上限 $lim$ 安排团队乘车，返回往返次数 $r$。然后枚举人数上限 $i$，计算 $i\times r$ 并更新答案。

### 可拓展思路
同类型题或类似算法套路：涉及资源分配、组合优化的问题，通常可以使用贪心和枚举的方法。例如，在一些物品分组运输、任务分配等问题中，先根据贪心策略确定分组方式，再通过枚举不同的限制条件来找到最优解。

### 推荐题目
- [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)
- [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
- [P2240 部分背包问题](https://www.luogu.com.cn/problem/P2240)

---
处理用时：40.15秒
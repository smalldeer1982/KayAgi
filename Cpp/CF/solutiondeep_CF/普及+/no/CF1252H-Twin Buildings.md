# 题目信息

# Twin Buildings

## 题目描述

一直以来，ICPC Jakarta 面临着空间不足的问题。为了应对这一挑战，他们计划建造两栋相同尺寸的矩形大楼。现在，他们需要找到合适的土地来进行建设。

有 $N$ 块土地待售。第 $i$ 块土地是一个大小为 $L_i \times W_i$ 的矩形。为了讲究风水，大楼的边必须与土地的边平行。

一种解决方案是分别在两块不同的土地上建造一栋大楼（它们的朝向可以不同）。一个 $A \times B$ 的大楼可以在第 $i$ 块土地上建造的条件是：

- $A \le L_i$ 且 $B \le W_i$，或者
- $A \le W_i$ 且 $B \le L_i$。

另外，也可以在同一块土地上建造两栋 $A \times B$ 大楼，且它们的方向相同。具体而言，想要在第 $i$ 块土地上建造两栋 $A \times B$ 的大楼，必须满足以下条件之一：

- $A \times 2 \le L_i$ 且 $B \le W_i$，或者
- $A \times 2 \le W_i$ 且 $B \le L_i$，或者
- $A \le L_i$ 且 $B \times 2 \le W_i$，或者
- $A \le W_i$ 且 $B \times 2 \le L_i$。

你的任务是帮助 ICPC Jakarta 找出在给定 $N$ 块土地的情况下，他们能建造的最大尺寸的大楼。必须确保建造两栋 $A \times B$ 的大楼；请输出最大可能的 $A \times B$ 面积。

## 说明/提示

样例输入/输出 #1 的解释：

在第一块土地上，可以建造两栋 $2.5 \times 5$ 的大楼。

样例输入/输出 #2 的解释：

在第一块和第二块土地上，各可以建造一栋 $2 \times 4$ 的大楼。

样例输入/输出 #3 的解释：

在第二块和第三块土地上，各可以建造一栋 $7 \times 6$ 的大楼。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
2
5 5
3 4
```

### 输出

```
12.5
```

## 样例 #2

### 输入

```
2
2 5
4 3
```

### 输出

```
8.0
```

## 样例 #3

### 输入

```
3
10 1
9 8
7 6
```

### 输出

```
42.0
```

# AI分析结果

### 题目翻译
一直以来，ICPC 雅加达面临着空间不足的问题。为了应对这一挑战，他们计划建造两栋相同尺寸的矩形大楼。现在，他们需要找到合适的土地来进行建设。

有 $N$ 块土地待售。第 $i$ 块土地是一个大小为 $L_i \times W_i$ 的矩形。为了讲究风水，大楼的边必须与土地的边平行。

一种解决方案是分别在两块不同的土地上建造一栋大楼（它们的朝向可以不同）。一个 $A \times B$ 的大楼可以在第 $i$ 块土地上建造的条件是：
- $A \le L_i$ 且 $B \le W_i$，或者
- $A \le W_i$ 且 $B \le L_i$。

另外，也可以在同一块土地上建造两栋 $A \times B$ 大楼，且它们的方向相同。具体而言，想要在第 $i$ 块土地上建造两栋 $A \times B$ 的大楼，必须满足以下条件之一：
- $A \times 2 \le L_i$ 且 $B \le W_i$，或者
- $A \times 2 \le W_i$ 且 $B \le L_i$，或者
- $A \le L_i$ 且 $B \times 2 \le W_i$，或者
- $A \le W_i$ 且 $B \times 2 \le L_i$。

你的任务是帮助 ICPC 雅加达找出在给定 $N$ 块土地的情况下，他们能建造的最大尺寸的大楼。必须确保建造两栋 $A \times B$ 的大楼；请输出最大可能的 $A \times B$ 面积。

### 算法分类
排序

### 综合分析与结论
该题解的核心思路是先处理在同一块土地上建造两栋大楼的情况，得到一个初始的最大面积。然后考虑在不同土地上建造两栋大楼的情况，通过对矩形进行排序和维护相关值来计算最大面积。算法要点在于对矩形进行排序，将矩形的短边作为一个维度进行比较，同时维护最大短边值。解决的难点在于如何高效地处理不同矩形组合的情况，通过排序和维护最大短边值，避免了复杂的枚举过程。

### 题解信息
- 星级：3星
- 关键亮点：思路较为清晰，对公式进行了详细的推导和化简，并且给出了一种新的思路（虽然未实现成功）。
- 个人心得：作者提到在精度输出方面卡了很久，最终通过直接输出的方式解决。

### 重点代码及核心实现思想
```cpp
#include<iostream>
#include<algorithm>
#include<cmath>
#define ll long long
using namespace std;
ll n;
ll ans,maxx;
struct node{
    ll x,y;
}a[100005];
bool cmp(node a,node b){
    return a.y>b.y;
}
int main(){
    cin>>n;
    for (int i=1;i<=n;i++){
        cin>>a[i].x>>a[i].y;
        ans=max(ans,a[i].x*a[i].y);
        if(a[i].x>a[i].y){
            swap(a[i].x,a[i].y);
        }
    }
    sort(a+1,a+n+1,cmp);
    for (int i=1;i<=n;i++){
        ans=max(ans,min(maxx,a[i].x)*a[i].y*2);
        maxx=max(maxx,a[i].x);
    }
    (ans%2)?printf("%lld.5\n",ans/2):printf("%lld.0\n",ans/2);
    return 0;
}
```
核心实现思想：
1. 首先读取输入的矩形信息，将每个矩形的短边放在 `x` 上，长边放在 `y` 上，并更新初始的最大面积 `ans`。
2. 对所有矩形按照长边 `y` 降序排序。
3. 遍历排序后的矩形，维护最大短边值 `maxx`，并更新最大面积 `ans`。
4. 根据 `ans` 的奇偶性输出结果。

### 可拓展之处
同类型题可能会有更多的限制条件，比如大楼的形状可以是其他多边形，或者土地的布局更加复杂。类似算法套路可以是对几何图形进行排序和比较，通过维护一些关键值来优化枚举过程。

### 推荐洛谷题目
1. P1090 [NOIP2004 提高组] 合并果子：考察贪心和排序的思想。
2. P1104 生日：排序的简单应用。
3. P1271 [深基9.例1] 选举学生会：排序和统计的综合应用。 

---
处理用时：33.59秒
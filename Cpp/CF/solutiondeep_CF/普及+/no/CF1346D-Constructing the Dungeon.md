# 题目信息

# Constructing the Dungeon

## 题目描述

### 题目翻译
#### 题目大意
Polycarp 正在制作主角可以探索的地牢。

该地牢由 $n$ 个房间组成，由 $m$ 条双向隧道连接，可以通过隧道从其他房间到达每个房间。

房间内有怪物守卫（第 $i$ 个房间内的怪物数量为 $a_i$），隧道内有金币（第 $i$ 条隧道内的金币数量为 $w_i$）。第 $i$ 条双向隧道连接着 $v_i$ 和 $u_i$ 两个房间。

Polycarp 已经确定了每条隧道中硬币的数量（$w_i$ 的值已经已知），现在他试图在房间中放置怪物（$a_i$ 的值还未知）。

Polycarp 希望以满足以下两个条件的方式来选择每个房间中怪物的数量：

1. 连接 $x$ 和 $y$ 房间的隧道的硬币数量应等于 $a_x$ 和 $a_y$ 的最小值。也就是说，$w_i=\min(a_{v_i},a_{u_i})$。

2. 地牢中的怪物数量越少越好。也就是说， $\sum_{i=1}^n a_i$ 的值是可能的最小值。

帮助 Polycarp 选择 $a_1,a_2,\cdots,a_n$，或者告诉他这是不可能的，他必须改变他的地牢计划。

## 样例 #1

### 输入

```
3
3 2
1 2 1
2 3 1
5 7
3 2 7
3 4 9
1 5 5
1 2 5
4 1 5
4 2 7
3 1 5
4 4
1 2 5
3 2 2
4 1 3
3 4 4```

### 输出

```
YES
1 1 1
YES
5 7 9 9 5
NO```

# AI分析结果

【题目内容】
# 构建地牢

## 题目描述

### 题目翻译
#### 题目大意
Polycarp 正在制作一个主角可以探索的地牢。

这个地牢由 $n$ 个房间组成，这些房间由 $m$ 条双向隧道连接，并且可以通过隧道从其他房间到达每个房间。

房间里有怪物守卫（第 $i$ 个房间里的怪物数量为 $a_i$），隧道里有金币（第 $i$ 条隧道里的金币数量为 $w_i$）。第 $i$ 条双向隧道连接着 $v_i$ 和 $u_i$ 这两个房间。

Polycarp 已经确定了每条隧道中的硬币数量（$w_i$ 的值已经已知），现在他试图在房间中放置怪物（$a_i$ 的值还未知）。

Polycarp 希望以满足以下两个条件的方式来选择每个房间中的怪物数量：

1. 连接 $x$ 和 $y$ 房间的隧道的硬币数量应该等于 $a_x$ 和 $a_y$ 的最小值。也就是说，$w_i = \min(a_{v_i}, a_{u_i})$。

2. 地牢中的怪物数量越少越好。也就是说，$\sum_{i = 1}^n a_i$ 的值要尽可能小。

帮助 Polycarp 选择 $a_1, a_2, \cdots, a_n$，或者告诉他这是不可能的，他必须改变他的地牢计划。

## 样例 #1

### 输入

```
3
3 2
1 2 1
2 3 1
5 7
3 2 7
3 4 9
1 5 5
1 2 5
4 1 5
4 2 7
3 1 5
4 4
1 2 5
3 2 2
4 1 3
3 4 4
```

### 输出

```
YES
1 1 1
YES
5 7 9 9 5
NO
```

【算法分类】
构造

【综合分析与结论】
由于暂无题解，我们可以先分析本题的通用思路。本题的关键在于根据隧道中金币数量的条件来构造房间中怪物的数量，同时要满足怪物总数最小。可以先考虑将隧道按照金币数量从小到大排序，然后依次处理每个隧道，尝试给房间分配怪物数量，在分配过程中要保证满足条件 1，并且尽量使每个房间的怪物数量小。如果在构造过程中出现矛盾，就说明无法满足条件，需要改变地牢计划。

【通用建议与扩展思路】
对于此类构造问题，通常需要根据给定的条件逐步推导，从简单情况入手，尝试找到可行的构造方案。可以先对数据进行排序，方便后续处理。在构造过程中，要注意检查是否满足所有条件，若出现矛盾则说明构造失败。

同类型题或类似算法套路：在其他构造问题中，也常常需要根据特定的规则来构建满足条件的解。例如在一些图的构造问题中，可能需要根据边的属性来确定节点的属性，思路与本题类似。

【推荐洛谷题目】
1. P1119 灾后重建（图论构造相关）
2. P1967 货车运输（图论构造相关）
3. P2820 局域网（图论构造相关）

---
处理用时：22.82秒
# 题目信息

# Euclid's nightmare

## 题目描述

给定包含 $n$ 个 $m$ 维向量的向量集 $S$，每个向量 $\overrightarrow{a}$ 满足 $a_i\in \{0,1\}$ 且 $\sum\limits_{i=1}^ma_i\in\{1,2\}$。定义向量加法 $\overrightarrow{c}=\overrightarrow{a}+\overrightarrow{b}$ 为 $\forall i\in \Z\cap[1,m], c_i=a_i\oplus b_i$，其中 $\oplus$ 表示异或运算。

求极大线性空间 $T$ 使得 $T$ 的一组基 $A$ 均为 $S$ 中元素。输出 $|T|,|A|$ 以及 $A$。

要求在 $|A|$ 最小前提下 $A$ 关于向量编号字典序最小。

## 样例 #1

### 输入

```
3 2
1 1
1 2
2 2 1```

### 输出

```
4 2
1 2```

## 样例 #2

### 输入

```
2 3
2 1 3
2 1 2```

### 输出

```
4 2
1 2```

## 样例 #3

### 输入

```
3 5
2 1 2
1 3
1 4```

### 输出

```
8 3
1 2 3```

# AI分析结果

【题目内容】
# 欧几里得的噩梦

## 题目描述
给定一个包含 $n$ 个 $m$ 维向量的向量集 $S$，每个向量 $\overrightarrow{a}$ 满足 $a_i\in \{0,1\}$ 且 $\sum\limits_{i=1}^ma_i\in\{1,2\}$。定义向量加法 $\overrightarrow{c}=\overrightarrow{a}+\overrightarrow{b}$ 为 $\forall i\in \Z\cap[1,m], c_i=a_i\oplus b_i$，其中 $\oplus$ 表示异或运算。

求极大线性空间 $T$ 使得 $T$ 的一组基 $A$ 均为 $S$ 中元素。输出 $|T|,|A|$ 以及 $A$。

要求在 $|A|$ 最小前提下 $A$ 关于向量编号字典序最小。

## 样例 #1

### 输入
```
3 2
1 1
1 2
2 2 1
```

### 输出
```
4 2
1 2
```

## 样例 #2

### 输入
```
2 3
2 1 3
2 1 2
```

### 输出
```
4 2
1 2
```

## 样例 #3

### 输入
```
3 5
2 1 2
1 3
1 4
```

### 输出
```
8 3
1 2 3
```

【算法分类】
并查集

【综合分析与结论】
这些题解都围绕着使用并查集来解决问题。核心思路是将向量中的维度看作图中的节点，向量看作边，利用并查集维护节点的连通性。当两个节点不在同一个连通块时，选择对应的向量加入基中。对于只有一个 1 的向量，通过新增一个辅助节点来统一处理。

不同题解的思路和实现细节略有不同，但本质都是利用并查集的特性来构建线性基。zzr8178541919 的题解思路清晰，对各种情况的分析详细，代码实现简洁；Soulist 的题解简洁地指出了关键思路；gyh20 的题解从线性基角度理解，提供了另一种思考方式；lytqwq 的题解从简单情况入手，逐步推导到最终的图论模型。

【所选的题解】
- zzr8178541919（5 星）：关键亮点是思路清晰，对各种情况的分析详细，代码实现简洁。个人心得：由于英语能力糟糕，比赛时翻译花了十多分钟时间来理解题意。
- Soulist（4 星）：关键亮点是简洁地指出了关键思路。
- lytqwq（4 星）：关键亮点是从简单情况入手，逐步推导到最终的图论模型。

【重点代码】
zzr8178541919 的核心代码：
```cpp
int father[maxn];
int Find(int x)
{
    if(father[x]!=x)
        father[x]=Find(father[x]);
    return father[x];
}
// ...
for(reg int i=1;i<=n;i++)
{
    int k=read(),x,y;
    if(k==1)
        x=read(),y=m+1;
    else
        x=read(),y=read();
    int nowx=Find(x),nowy=Find(y);
    if(nowx==nowy)
        continue;
    father[nowx]=nowy;
    s[++tot]=i;
}
```
核心实现思想：通过并查集的查找和合并操作，判断两个节点是否在同一个连通块，若不在则将对应的向量编号存入数组。

【关键思路或技巧】
- 利用并查集维护节点的连通性，将向量问题转化为图的连通性问题。
- 对于只有一个 1 的向量，新增一个辅助节点来统一处理，简化问题。

【拓展思路】
同类型题可以考虑向量的维度和取值范围变化，或者向量加法规则变化。类似算法套路可以应用在其他图论问题中，如最小生成树、连通分量计数等。

【推荐题目】
- P1197 [JSOI2008]星球大战：考察并查集的逆向操作。
- P1525 关押罪犯：考察并查集的扩展域应用。
- P3367 【模板】并查集：基础的并查集模板题。

---
处理用时：31.34秒
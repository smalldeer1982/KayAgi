# 题目信息

# Симметричный амфитеатр

## 题目描述

Все готовятся к VK Fest 2021! Для того, чтобы зрителям была лучше видна главная сцена, планируется построить амфитеатр. В этой задаче мы будем рассматривать его сбоку — схематично он будет иметь форму лестницы из $ n $ одинаковых квадратов. Лестница — это одна или более башен квадратов, выстроенных в ряд, где высоты башен невозрастают слева направо.

На следующем рисунке можно видеть три разные фигуры из $ 12 $ квадратов. Первые две фигуры — лестницы, а третья — нет.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1531C/c3f29f4449b740c0b9e4bf33f783c2056dec450f.png)Из эстетических соображений было решено, что амфитеатр должен быть симметричным. Формально, амфитеатр называется симметричным, если при отражении его схемы относительно прямой $ x = y $ получается тот же самый рисунок (где ось $ x $ направлена слева направо, а ось $ y $ — снизу вверх). Например, первая лестница на рисунке выше — симметричная, а вторая — нет.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1531C/c8b6a179d527265c360f8c3336d2da1274d329f3.png)Кроме того, амфитеатр должен быть максимально компактным — а именно, сторона минимального квадрата, внутрь которого можно его поместить, должна быть как можно меньше.

По заданному числу $ n $ нарисуйте схему амфитеатра из ровно $ n $ квадратов, удовлетворяющую всем условиям.

## 样例 #1

### 输入

```
3```

### 输出

```
2
o.
oo```

## 样例 #2

### 输入

```
17```

### 输出

```
5
o....
ooo..
oooo.
oooo.
ooooo```

# AI分析结果

### 题目翻译
# 对称的露天剧场

## 题目描述
所有人都在为 2021 年的 VK Fest 做准备！为了让观众能更好地看到主舞台，计划建造一个露天剧场。在这个问题中，我们将从侧面来考虑它——从示意图上看，它将呈由 $n$ 个相同正方形组成的楼梯形状。楼梯是指一排或多排堆叠的正方形塔，其中塔的高度从左到右不递增。

在下图中，可以看到由 12 个正方形组成的三种不同形状。前两种形状是楼梯，而第三种不是。

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1531C/c3f29f4449b740c0b9e4bf33f783c2056dec450f.png)出于美学考虑，决定露天剧场必须是对称的。形式上，如果将露天剧场的示意图关于直线 $x = y$ 反射后得到的图形与原图形相同（其中 $x$ 轴从左到右，$y$ 轴从下到上），则称该露天剧场是对称的。例如，上图中的第一个楼梯是对称的，而第二个不是。

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1531C/c8b6a179d527265c360f8c3336d2da1274d329f3.png)此外，露天剧场必须尽可能紧凑——即，能够容纳它的最小正方形的边长应尽可能小。

给定一个数字 $n$，画出恰好由 $n$ 个正方形组成的、满足所有条件的露天剧场的示意图。

## 样例 #1
### 输入
```
3
```
### 输出
```
2
o.
oo
```

## 样例 #2
### 输入
```
17
```
### 输出
```
5
o....
ooo..
oooo.
oooo.
ooooo
```

### 算法分类
构造

### 综合分析与结论
这些题解的核心思路都是将 $n$ 个方块组成的图形分为中间一个正方形和两边对称的部分，通过不同方式确定中间正方形的边长，进而构造出满足条件的对称且紧凑的图形。
- **思路对比**：
    - wuyixiang 的题解从整体的 “紧凑” 思路出发，先考虑大正方形边长，再处理剩余方块，对于特殊情况进行特判。
    - him 的自我修养的题解通过枚举中间正方形的周长，计算大正方形周长并取最小值，然后填充两边图形。
    - HEIMOFA 的题解不断枚举中间正方形的边长，找到合法的边长后进行图形构造。
    - Erica_N_Contina 的题解枚举对角线长度，计算剩余方块数量，通过比较找到使大正方形边长最小的方案。
- **算法要点对比**：
    - 都涉及到对中间正方形边长的确定和剩余方块的分配。
    - 部分题解使用了数学运算，如 `sqrt`、`ceil` 等。
- **解决难点对比**：
    - 都需要处理特殊情况，如 $n = 2$ 时无解。
    - 对于剩余方块数量为奇数的情况，不同题解有不同的处理方式。

### 题解评分
- wuyixiang：4 星。思路清晰，结合图形示例解释，代码有注释，易理解。
- him 的自我修养：3 星。思路明确，但代码中使用了较大的常量，可优化。
- HEIMOFA：3 星。思路合理，但代码中使用了多种类型定义，较冗余。
- Erica_N_Contina：3 星。思路有详细解释，但代码中定义了较多常量，可简化。

### 所选题解
- wuyixiang（4 星）
    - 关键亮点：思路结合图形示例，清晰易懂，代码简洁且有注释。

### 重点代码
```cpp
#include <iostream>
#include <cmath>
using namespace std;
int n,m,a[300][300],p,r;
char c[2] = {'.','o'};
int main()
{
    cin >> n;
    m = ceil(sqrt(n)),p = floor(sqrt(n));//m,p为大正方形的边长、里面正方形的边长
    if(n == 2)//特判
    {
        cout << -1;
        return 0;
    }
    if(n == m * m - 2)//特判：当不合法的情况
		a[m + 1][1] = a[1][m + 1] = 1,n -= 2,r = 1;//增加正方形的边长，并把两个方格移到边上（用r记录）
    cout << m + r << '\n',n -= p * p;
    for(int i = 1;i <= p;i ++)
        for(int j = 1;j <= p;j ++)a[i][j] = 1;
    if(n % 2)a[p][p] = 0,n ++;//当剩余的方格为奇数的情况
    for(int i = 1;i <= n / 2;i ++)a[m][i] = 1;
    for(int i = 1;i <= n / 2;i ++)a[i][m] = 1;
    for(int i = m + r;i >= 1;i --)
    {
        for(int j = 1;j <= m + r;j ++)cout << c[a[i][j]];
        cout << '\n';//输出
    }
}
```
**核心实现思想**：先计算大正方形和里面正方形的边长，对特殊情况进行特判。将里面的正方形部分填充，处理剩余方块，若剩余方块为奇数则调整，最后将剩余方块对称地填充到边缘，输出图形。

### 关键思路或技巧
- 采用构造的方法，将图形分为中间正方形和两边对称部分。
- 利用数学运算 `sqrt`、`ceil` 等确定正方形边长。
- 对特殊情况（如 $n = 2$）进行特判。

### 拓展思路
同类型题可能会改变图形的形状或对称条件，类似算法套路可用于解决需要构造满足特定条件图形的问题，关键在于合理划分图形部分，确定各部分的大小和位置。

### 推荐题目
- P1003 铺地毯
- P1044 栈
- P1099 树网的核

---
处理用时：48.10秒
# 题目信息

# Mocha and Diana (Easy Version)

## 题目描述

给你两棵森林，节点数均为 $n$。

允许你进行加边操作，但是有两个要求：

- 如果在第一个森林加一条 $(u,v)$ 的边，第二个森林也要进行同样的操作。反之同理。
- 加边后两个森林依旧是森林。（一棵树也是森林）

求最多能加几条边，并输出加边方案。

## 样例 #1

### 输入

```
3 2 2
1 2
2 3
1 2
1 3```

### 输出

```
0```

## 样例 #2

### 输入

```
5 3 2
5 4
2 1
4 3
4 3
1 4```

### 输出

```
1
2 4```

## 样例 #3

### 输入

```
8 1 2
1 7
2 6
1 5```

### 输出

```
5
5 2
2 3
3 4
4 7
6 8```

# AI分析结果

### 题目翻译
#### Mocha and Diana（简单版本）

### 题目描述
给你两棵森林，节点数均为 $n$。

允许你进行加边操作，但是有两个要求：
- 如果在第一个森林加一条 $(u, v)$ 的边，第二个森林也要进行同样的操作。反之同理。
- 加边后两个森林依旧是森林。（一棵树也是森林）

求最多能加几条边，并输出加边方案。

### 样例 #1
#### 输入
```
3 2 2
1 2
2 3
1 2
1 3
```
#### 输出
```
0
```

### 样例 #2
#### 输入
```
5 3 2
5 4
2 1
4 3
4 3
1 4
```
#### 输出
```
1
2 4
```

### 样例 #3
#### 输入
```
8 1 2
1 7
2 6
1 5
```
#### 输出
```
5
5 2
2 3
3 4
4 7
6 8
```

### 算法分类
并查集

### 综合分析与结论
这些题解的核心思路基本一致，都是通过枚举所有可能的边，利用并查集判断在两个森林中添加该边是否会形成环，若不会则添加该边。不同题解在代码实现和正确性证明上略有差异。部分题解给出了正确性证明，如从最终态证明至少有一片森林是一棵树，或者通过反证法证明贪心策略的正确性；部分题解给出了优化思路，如选择中心点进行连边，减少枚举的范围。

### 所选题解
- **作者：KaisuoShutong (赞：10)，4星**
  - **关键亮点**：思路清晰，给出了详细的正确性证明，代码简洁明了。
  - **个人心得**：无

### 重点代码
```cpp
// 并查集查找函数
int GF(int x) {return f[x]==x?x:f[x]=GF(f[x]);}
int gf(int x) {return g[x]==x?x:g[x]=gf(g[x]);}

signed main() {
    n=read(),m1=read(),m2=read();
    for(int i=1;i<=n;i++) f[i]=g[i]=i;
    // 处理初始边
    for(int i=1;i<=m1;i++) f[GF(read())]=GF(read());
    for(int i=1;i<=m2;i++) g[gf(read())]=gf(read());
    // 枚举所有边
    for(int i=1;i<=n;i++)
        for(int j=1;j<=n;j++) if(GF(i)^GF(j)&&gf(i)^gf(j)) {
            f[f[i]]=f[j],g[g[i]]=g[j],q.push_back(make_pair(i,j));
        }
    cout<<q.size()<<'\n';
    // 输出结果
    for(auto y:q) cout<<y.first<<' '<<y.second<<'\n';
    return 0;
}
```
**核心实现思想**：先初始化并查集，处理初始边，然后枚举所有边，若在两个森林中添加该边都不会形成环，则添加该边并记录，最后输出添加边的数量和具体边。

### 可拓展之处
同类型题或类似算法套路：
- 多个森林的合并问题，需要满足更多的约束条件。
- 动态维护森林的连通性，在添加边的过程中可能会有删除边的操作。

### 推荐题目
- [P1196 银河英雄传说](https://www.luogu.com.cn/problem/P1196)
- [P1525 关押罪犯](https://www.luogu.com.cn/problem/P1525)
- [P2024 食物链](https://www.luogu.com.cn/problem/P2024)

### 个人心得总结
题解中均未包含个人心得。 

---
处理用时：78.47秒
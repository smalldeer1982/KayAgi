# 题目信息

# Unusual Minesweeper

## 题目描述

Polycarp 非常喜欢玩扫雷游戏。最近，他发现了一个类似的游戏，也有这样的规则。

场地上有一些地雷，每个地雷的坐标 $(x_i,y_i)$ 都是已知的，每个坐标都有以秒为单位的倒计时，之后地雷就会爆炸。爆炸后，地雷会引爆所有与地雷垂直和水平距离在 $k$ 之内的地雷，结果就是我们得到了形状为"+"的爆炸。而一次爆炸可以引起新的爆炸，每次都是这样。

此外，从 $0$ 秒开始，Polycarp 可以每秒引爆任意一个地雷，连锁反应随之发生。需要注意的是，地雷会立刻爆炸并立刻引爆其它地雷。

Polycarp 想创造一个新纪录，请你帮他计算一下，他最快能在多少秒内引爆所有地雷？

## 样例 #1

### 输入

```
3

5 0
0 0 1
0 1 4
1 0 2
1 1 3
2 2 9

5 2
0 0 1
0 1 4
1 0 2
1 1 3
2 2 9

6 1
1 -1 3
0 -1 9
0 1 7
-1 0 1
-1 1 9
-1 -1 7```

### 输出

```
2
1
0```

# AI分析结果

### 题目翻译
题目内容本身为中文，无需翻译。

### 算法分类
并查集

### 综合分析与结论
这些题解的核心思路都是先利用并查集将能够相互引爆的地雷合并成一个集合，然后找出每个集合中最早爆炸的时间，最后通过贪心策略来计算出引爆所有地雷的最短时间。部分题解还使用了二分法来求解。

各题解的算法要点和解决难点如下：
- **思路**：均是先合并可相互引爆的地雷集合，再确定集合最早爆炸时间，最后贪心或二分求最短时间。
- **算法要点**：主要是并查集的使用，通过对地雷按横、纵坐标排序，判断相邻地雷是否能合并；贪心时按最早爆炸时间排序，二分则是不断缩小时间范围。
- **解决难点**：关键在于优化合并操作，避免 $O(n^2)$ 复杂度，通过排序判断相邻地雷是否能合并将复杂度优化到 $O(n\log n)$。

### 所选题解
- **作者：_mi_ka_ (赞：7)  4星**
    - **关键亮点**：思路清晰，代码注释详细，对排序和并查集的使用解释清楚。
- **作者：小薛小薛 (赞：2)  4星**
    - **关键亮点**：对问题的转化和贪心策略的解释较为通俗易懂。
- **作者：封禁用户 (赞：1)  4星**
    - **关键亮点**：除了并查集和贪心，还使用了二分法求解，提供了不同的解题思路。

### 重点代码
```cpp
// 以作者 _mi_ka_ 的代码为例，展示并查集合并和贪心求解的核心代码
struct coordinate//地雷 
{
    int x,y,t,id;//坐标，引爆时间，地雷编号 
}c[N];

// 并查集查找操作
int find(int x)
{
    if(fa[x]==x)
        return x;
    return fa[x]=find(fa[x]);//路径压缩 
}

// 并查集合并操作
void merge(int x,int y)
{
    int f1=find(x),f2=find(y);
    if(f1==f2)
        return;
    fa[f1]=f2;
}

// 排序和合并操作
sort(c+1,c+n+1,cmp_x);//以x为第一关键字，y为第二关键字排序 
for(int i=1;i<n;i++)
    if(c[i].x==c[i+1].x&&c[i+1].y-c[i].y<=k)//y方向能够引爆 
        merge(c[i].id,c[i+1].id);
sort(c+1,c+n+1,cmp_y);//以y为第一关键字，x为第二关键字排序 
for(int i=1;i<n;i++)
    if(c[i].y==c[i+1].y&&c[i+1].x-c[i].x<=k)//x方向能够引爆 
        merge(c[i].id,c[i+1].id);

// 找出每个集合的最早爆炸时间
for(int i=1;i<=n;i++)
{
    int f=find(c[i].id);//所在集合编号 
    if(!vis[f])//此集合没在新地雷数组中出现过 
        cnt++,vis[f]=cnt;//将此集合所在新地雷数组的编号记录下来 
    newc[vis[f]]=min(newc[vis[f]],c[i].t);//更新最早引爆时间 
}

// 贪心求解
sort(newc+1,newc+cnt+1);//引爆时间排序 
for(int i=0;i<=cnt;i++)//0时刻开始 
    if(newc[cnt-(i+1)]<=i)//不被手动引爆的最晚引爆的时间比当前时间小 
    {
        wr(i),putchar('\n');
        break;
    }
```

### 最优关键思路或技巧
- **并查集**：利用并查集将能够相互引爆的地雷合并成一个集合，将问题简化。
- **排序优化**：通过对地雷按横、纵坐标排序，只判断相邻地雷是否能合并，避免了 $O(n^2)$ 的复杂度。
- **贪心策略**：按集合最早爆炸时间排序，从大到小引爆，找到满足条件的最短时间。

### 拓展思路
同类型题或类似算法套路：
- 涉及连通性问题的题目，如判断图的连通分量、判断点之间是否可达等，都可以考虑使用并查集。
- 对于有相互影响关系的元素，可先合并成集合，再对集合进行处理的问题，也可借鉴此思路。

### 洛谷题目推荐
- [P3958 [NOIP2017 提高组] 奶酪](https://www.luogu.com.cn/problem/P3958)
- [P1197 [JSOI2008] 星球大战](https://www.luogu.com.cn/problem/P1197)
- [P1551 亲戚](https://www.luogu.com.cn/problem/P1551)

### 个人心得摘录与总结
- **作者：_Weslie_**：调试 1 天发现 $x$ 和 $y$ 写反了，提醒大家要注意 $x$ 和 $y$ 的顺序，在处理坐标相关问题时要仔细检查。 

---
处理用时：37.75秒
# 题目信息

# Blueprint for Seating

## 题目描述

一家飞机制造公司希望改进其乘客飞机的设计。研究显示，大多数延误是因为登机速度缓慢。

大多数中型客机采用3-3座位布局，也就是每排有6个座位：左边3个座位、一条过道，右边3个座位。两侧分别有窗户座位、靠过道座位和中间座位。在没有其他乘客的情况下，坐在靠过道座位的乘客登机速度明显快于靠窗座位的乘客。

该公司决定将一种座位布局的不便程度定义为一个排中每个座位到最近过道的距离总和。座位到过道的距离是指它们之间的座位数。例如，对于3-3布局，靠窗座位的距离为2，中间座位为1，靠过道座位为0。因此，3-3布局的不便程度为 $ (2+1+0)+(0+1+2)=6 $。而对于3-5-3布局，其不便程度为 $ (2+1+0)+(0+1+2+1+0)+(0+1+2)=10 $。

形式化地说，一种布局是一个正整数序列 $ a_1, a_2, \ldots, a_{k+1} $，其中第 $ i $ 组有 $ a_i $ 个座位，共有 $ k $ 条过道，每条过道位于相邻的两组之间。也就是说，过道必须夹在两个座位之间，无法紧挨窗户，也不能有两条相邻的过道。

公司希望设计一个单排有 $ n $ 个座位和 $ k $ 条过道的布局，以达到最小的不便程度。请帮助他们找出所有可能布局中不便程度最小的一种，并计算出所有达到最小不便程度的布局数量，并将其结果对 $ 998\,244\,353 $ 取模。

## 说明/提示

在测试用例 9 2 中，不便程度为6的布局有：3-4-2、2-4-3 和 2-5-2。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
8
4 1
3 2
4 2
5 2
6 1
6 2
1000000000 1
9 2```

### 输出

```
2 1
0 1
0 1
1 3
6 1
2 4
249999999500000000 1
6 3```

# AI分析结果

### 题目重写
# 座位布局设计

## 题目描述

一家飞机制造公司希望改进其乘客飞机的设计。研究显示，大多数延误是因为登机速度缓慢。

大多数中型客机采用3-3座位布局，也就是每排有6个座位：左边3个座位、一条过道，右边3个座位。两侧分别有窗户座位、靠过道座位和中间座位。在没有其他乘客的情况下，坐在靠过道座位的乘客登机速度明显快于靠窗座位的乘客。

该公司决定将一种座位布局的不便程度定义为一个排中每个座位到最近过道的距离总和。座位到过道的距离是指它们之间的座位数。例如，对于3-3布局，靠窗座位的距离为2，中间座位为1，靠过道座位为0。因此，3-3布局的不便程度为 $ (2+1+0)+(0+1+2)=6 $。而对于3-5-3布局，其不便程度为 $ (2+1+0)+(0+1+2+1+0)+(0+1+2)=10 $。

形式化地说，一种布局是一个正整数序列 $ a_1, a_2, \ldots, a_{k+1} $，其中第 $ i $ 组有 $ a_i $ 个座位，共有 $ k $ 条过道，每条过道位于相邻的两组之间。也就是说，过道必须夹在两个座位之间，无法紧挨窗户，也不能有两条相邻的过道。

公司希望设计一个单排有 $ n $ 个座位和 $ k $ 条过道的布局，以达到最小的不便程度。请帮助他们找出所有可能布局中不便程度最小的一种，并计算出所有达到最小不便程度的布局数量，并将其结果对 $ 998\,244\,353 $ 取模。

## 说明/提示

在测试用例 9 2 中，不便程度为6的布局有：3-4-2、2-4-3 和 2-5-2。

### 算法分类
组合数学

### 题解分析与结论
题目要求设计一个座位布局，使得不便程度最小，并计算达到最小不便程度的布局数量。不便程度的计算与座位到过道的距离有关，因此需要将座位尽可能均匀地分布在过道两侧。

#### 题解1：huangrenheluogu
- **星级**：4
- **关键亮点**：通过将座位均匀分布来最小化不便程度，并使用组合数学计算布局数量。
- **个人心得**：通过将过道左右两边的座位分布视为“凸起”，并尽量平均分配座位，可以减小总贡献。

#### 题解2：madfallen
- **星级**：4
- **关键亮点**：将座位均匀分布在过道两侧，并通过调整法证明其最优性，使用组合数学计算布局数量。
- **个人心得**：通过将两个奇数重组为两个偶数，可以保持不便程度不变，从而简化计算。

### 最优关键思路
1. **均匀分布座位**：将座位尽可能均匀地分布在过道两侧，可以最小化不便程度。
2. **组合数学计算布局数量**：通过组合数学的方法，计算达到最小不便程度的布局数量。

### 可拓展之处
- **类似问题**：其他需要均匀分布资源的问题，如任务分配、资源调度等。
- **算法套路**：组合数学在解决均匀分布问题中的应用。

### 推荐题目
1. [P1494 组合数问题](https://www.luogu.com.cn/problem/P1494)
2. [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)
3. [P1044 栈](https://www.luogu.com.cn/problem/P1044)

### 核心代码片段
```c++
inline int work1(int u,int kk){
    if(kk<=0||u<=0)return 0;
    int o=u/kk,h=u-o*kk;
    return (kk-h)*calc(o)+h*calc(o+1);
}

inline int work2(int u,int kk){
    if(kk<=0||u<=0)return 0;
    int o=u/kk,h=u-o*kk,g=kk-h;
    if(o==1)return jc[kk-1]*invjc[h-1]%mod*invjc[g]%mod;
    int ans=0;
    if(o%2==0)swap(h,g);
    for(int p=g;p>=0;p-=2){
        ans+=jc[kk]*invjc[p]%mod*invjc[(g-p)/2]%mod*invjc[h+(g-p)/2]%mod;
        if(p)ans+=jc[kk-1]*invjc[p-1]%mod*invjc[(g-p)/2]%mod*invjc[h+(g-p)/2]%mod;
        ans%=mod;
    }
    return ans;
}
```
**核心实现思想**：`work1`函数计算最小不便程度，`work2`函数计算达到最小不便程度的布局数量。通过组合数学的方法，将座位均匀分布在过道两侧，并计算布局数量。

---
处理用时：40.07秒
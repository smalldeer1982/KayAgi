# 题目信息

# Cows and Primitive Roots

## 题目描述

## 题目大意

奶牛们刚学会原根的定义!给定一个质数$p$,那么模$p$意义下的一个原根$x(1<=x<p)$满足如下性质:$x-1,x^2-1,x^3-1...x^{p-2}-1$都不能被$p$整除,但是$x^{p-1}-1$却可以

但是奶牛们太菜了需要你的帮助,给定一个质数$p$,求模$p$意义下原根的个数

## 样例 #1

### 输入

```
3
```

### 输出

```
1
```

## 样例 #2

### 输入

```
5
```

### 输出

```
2
```

# AI分析结果

### 题目内容
# 奶牛与原根

## 题目描述

### 题目大意
奶牛们刚学会原根的定义！给定一个质数$p$，那么模$p$意义下的一个原根$x(1 \leq x < p)$满足如下性质：$x - 1, x^2 - 1, x^3 - 1, \cdots, x^{p - 2} - 1$都不能被$p$整除，但是$x^{p - 1} - 1$却可以。
但是奶牛们太菜了需要你的帮助，给定一个质数$p$，求模$p$意义下原根的个数。

## 样例 #1
#### 输入
```
3
```
#### 输出
```
1
```

## 样例 #2
#### 输入
```
5
```
#### 输出
```
2
```

### 算法分类
数学

### 题解综合分析与结论
这些题解的核心思路都是利用公式$\varphi(\varphi(p))$来计算模质数$p$意义下原根的个数，由于$p$是质数，$\varphi(p)=p - 1$，所以最终简化为计算$\varphi(p - 1)$。不同题解的差异主要体现在对欧拉函数$\varphi$的计算方式上。

### 所选的题解
- **作者：ADay (5星)**
    - **关键亮点**：不仅给出了核心公式的证明链接，还提供了打表的两种方法，内容全面。
    - **个人心得**：无
    - **重点代码**：
```cpp
inline int phi(int n)//欧拉函数
{
    int res, a;
    res = a = n;
    for (int i = 2; i * i <= a; ++i)
    {
        if (a % i)
            continue;
        res = res / i * (i - 1);
        while (!(a % i))
            a /= i;
    }
    if (a > 1)
        res = res / a * (a - 1);
    return res;
}
```
核心实现思想：通过遍历$2$到$\sqrt{n}$的数，若其为$n$的质因数，则更新$res$并去除$n$中该质因数的所有幂次，最后处理剩余的大于$1$的质因数。

- **作者：Fatalis_Lights (4星)**
    - **关键亮点**：使用线性筛法初始化欧拉函数，对于多次查询或较大范围数据计算效率更高。
    - **个人心得**：无
    - **重点代码**：
```cpp
inline void init(int n){
    phi[1]=1;
    for(int i=2;i<=n;i++){
        if(!vst[i]){phi[i]=i-1;pri[++pri[0]]=i;}
        for(int j=1;j<=pri[0]&&i*pri[j]<=n;j++){
            vst[i*pri[j]]=1;
            if(i%pri[j]==0){
                phi[i*pri[j]]=phi[i]*pri[j];
                break;
            }
            else phi[i*pri[j]]=phi[i]*(pri[j]-1);
        }
    }
}// 线性筛欧拉函数
```
核心实现思想：利用线性筛法，标记合数并根据质数与合数的关系更新欧拉函数值。

- **作者：Arrtan_73 (4星)**
    - **关键亮点**：对阶、欧拉函数、原根等概念进行了详细解释，便于初学者理解。
    - **个人心得**：无
    - **重点代码**：
```cpp
int gcd(int x,int y){//计算最小公约数
    return y?gcd(y,x%y):x;
}
int work(int m){//欧拉函数计算
    int cnt=0;
    for(int i=1;i<=m;i++)
        if(gcd(i,m)==1)cnt++;//判断是否互质
    return cnt;
}
```
核心实现思想：通过暴力枚举$1$到$m$的数，利用辗转相除法判断其与$m$是否互质来计算欧拉函数值。

### 最优关键思路或技巧
利用原根个数与欧拉函数的关系公式$\varphi(\varphi(p))$，并根据$p$是质数简化为$\varphi(p - 1)$。在计算欧拉函数时，可根据数据范围和需求选择合适的方法，如暴力枚举适合数据范围小的情况，线性筛法适合较大范围数据或多次查询。

### 同类型题或类似算法套路拓展
此类题目主要考察数论中关于原根、欧拉函数等知识，类似套路是牢记数论相关公式和性质，并根据题目条件灵活运用。例如，在涉及模运算、互质关系等问题时，常结合欧拉函数、费马小定理等知识求解。

### 洛谷相似题目推荐
- [P2158 [SDOI2008] 仪仗队](https://www.luogu.com.cn/problem/P2158)
- [P1072 Hankson 的趣味题](https://www.luogu.com.cn/problem/P1072)
- [P2568 GCD](https://www.luogu.com.cn/problem/P2568)

---
处理用时：49.25秒
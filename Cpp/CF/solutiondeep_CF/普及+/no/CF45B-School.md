# 题目信息

# School

## 题目描述

CSYZ学校1820班有n个学生， 每个人都只有一个朋友，我们用 G(i) 表示第 i个人的朋友，但是需要注意， 自己朋友的朋友不一定是自己，即 G(G(i)) 不一定等于i；   

由于学校总是会出现各种新闻信息， 而同学们十分热衷于了解这些新闻，所以大家都会把自己知道的新闻分享给自己的好朋(ji)友(lao)； 

现在会出现以下的行为： 

在第 i 天，第 A[i] 个学生Jean了解到热度为 B[i] (B[i]>=1) 的新闻，此时Jean会马上与她的朋友分享这个新闻，而此时新闻热度已减为 B[i] – 1 ，Jean的朋友也会进行同样的转述，所以，Jean的朋友的朋友收到新闻时热度已减为 B[i] – 2 . 这样的行为会一直持续到新闻热度为0，因为这时已经没有人想去分享它了.
 
也就是说：如果一个人 x 收到了一个热度为 y(y!=0) 的新闻，他就会将其分享给自己的好朋友G(i)，这个新闻热度对于他的的朋友来说就是 y – 1, 如果可能的话，这种行为就会一直持续下去.

但我们需要注意到，一个人可能会在一天内不止一次的收到同一条新闻，但此时新闻热度已不同。因此，等级为B[i] 的新闻会经过B[i] 次的转述。

你的任务是计算出 res[i] 的值——在第i天有多少学生了解到m天中他们的第一个新闻；

B[i] 的值在初始时给出，而 A[i] 的值由下面的公式得出 ：   
![]( https://cdn.luogu.org/upload/vjudge_pic/CF45B/87d3ac8c2d9d9c2f898cd922887b2d5b34a41da4.png)   

res[0] = 0；
（v[i]为一些给定的整数）；

## 样例 #1

### 输入

```
3 4
2 3 1
1 2 3 4
1 2 3 4
```

### 输出

```
1
1
1
0
```

## 样例 #2

### 输入

```
8 6
7 6 4 2 3 5 5 7
10 4 3 8 9 1
1 1 1 2 2 2
```

### 输出

```
1
1
1
2
1
1
```

# AI分析结果

### 题目内容
# School

## 题目描述

CSYZ学校1820班有n个学生， 每个人都只有一个朋友，我们用 G(i) 表示第 i个人的朋友，但是需要注意， 自己朋友的朋友不一定是自己，即 G(G(i)) 不一定等于i；   

由于学校总是会出现各种新闻信息， 而同学们十分热衷于了解这些新闻，所以大家都会把自己知道的新闻分享给自己的好朋(ji)友(lao)； 

现在会出现以下的行为： 

在第 i 天，第 A[i] 个学生Jean了解到热度为 B[i] (B[i]>=1) 的新闻，此时Jean会马上与她的朋友分享这个新闻，而此时新闻热度已减为 B[i] – 1 ，Jean的朋友也会进行同样的转述，所以，Jean的朋友的朋友收到新闻时热度已减为 B[i] – 2. 这样的行为会一直持续到新闻热度为0，因为这时已经没有人想去分享它了.
 
也就是说：如果一个人 x 收到了一个热度为 y(y!=0) 的新闻，他就会将其分享给自己的好朋友G(i)，这个新闻热度对于他的的朋友来说就是 y – 1, 如果可能的话，这种行为就会一直持续下去.

但我们需要注意到，一个人可能会在一天内不止一次的收到同一条新闻，但此时新闻热度已不同。因此，等级为B[i] 的新闻会经过B[i] 次的转述。

你的任务是计算出 res[i] 的值——在第i天有多少学生了解到m天中他们的第一个新闻；

B[i] 的值在初始时给出，而 A[i] 的值由下面的公式得出 ：   
![]( https://cdn.luogu.org/upload/vjudge_pic/CF45B/87d3ac8c2d9d9c2f898cd922887b2d5b34a41da4.png)   

res[0] = 0；
（v[i]为一些给定的整数）；

## 样例 #1

### 输入

```
3 4
2 3 1
1 2 3 4
1 2 3 4
```

### 输出

```
1
1
1
0
```

## 样例 #2

### 输入

```
8 6
7 6 4 2 3 5 5 7
10 4 3 8 9 1
1 1 1 2 2 2
```

### 输出

```
1
1
1
2
1
1
```

### 算法分类
搜索

### 题解综合分析与结论
- **小杨小小杨题解**：
    - **思路**：采用类似记忆化搜索思路，从得知新闻的学生开始循环找其朋友，若当前学生首次收到新闻则增加能传人数，若当前热度过小则停止搜索。
    - **算法要点**：利用数组`f`记录每个位置最大热度，每次循环更新当前学生和热度，判断是否首次收到新闻。
    - **解决难点**：通过记忆化方式避免重复无效搜索，降低时间复杂度。但未优化到理论最优复杂度。
- **_edge_题解**：
    - **思路**：考虑到每个点最多遍历一次，用类似链表方式记录当前节点走到最近未访问点及长度，从而优化遍历过程。
    - **算法要点**：通过`DFS`函数实现递归遍历，在遍历中更新节点信息。
    - **解决难点**：优化遍历方式，使每个点仅遍历一次，达到$O(n + m)$的时间复杂度，解决暴力遍历无法通过的问题。

对比可知，_edge_题解在时间复杂度优化上更优，小杨小小杨题解相对简单直接。

### 通用建议与扩展思路
对于此类基于人际关系网络（类似图结构）的信息传播问题，核心在于优化节点的访问方式以降低时间复杂度。可拓展到更复杂的图结构，如多叉树、有向图等场景下的信息传播、资源分配等问题。解决这类问题时，要善于利用数据结构记录节点状态，优化搜索路径。

### 洛谷相似题目
- [P1126 机器人搬重物](https://www.luogu.com.cn/problem/P1126)：涉及图的遍历与搜索，与本题在搜索思想上有相似之处。
- [P1312 玛雅游戏](https://www.luogu.com.cn/problem/P1312)：通过模拟和搜索解决问题，和本题一样需要对状态进行记录与处理。
- [P1605 迷宫](https://www.luogu.com.cn/problem/P1605)：同样是搜索类题目，锻炼对搜索过程的优化与实现能力。 

---
处理用时：39.13秒
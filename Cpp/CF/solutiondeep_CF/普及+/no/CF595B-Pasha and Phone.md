# 题目信息

# Pasha and Phone

## 题目描述

构造长度为 $n$ 的电话号码，满足将其均分成长度为 $k$ 的段后，第 $i$ 段能被 $a_i$ 整除且开头不为 $b_i$ 的个数总和，答案对 $10^9+7$ 取模。

## 样例 #1

### 输入

```
6 2
38 56 49
7 3 4
```

### 输出

```
8
```

## 样例 #2

### 输入

```
8 2
1 22 3 44
5 4 3 2
```

### 输出

```
32400
```

# AI分析结果

### 题目内容
# Pasha和电话

## 题目描述
构造长度为 $n$ 的电话号码，满足将其均分成长度为 $k$ 的段后，第 $i$ 段能被 $a_i$ 整除且开头不为 $b_i$ 的个数总和，答案对 $10^9+7$ 取模。

## 样例 #1
### 输入
```
6 2
38 56 49
7 3 4
```
### 输出
```
8
```

## 样例 #2
### 输入
```
8 2
1 22 3 44
5 4 3 2
```
### 输出
```
32400
```

### 算法分类
数学

### 综合分析与结论
两道题解思路相似，均通过数学方法解决问题。核心思路是利用容斥原理，通过计算能被 $a_i$ 整除的数的个数，减去能被 $a_i$ 整除且开头为 $b_i$ 的数的个数，得到每段符合条件的电话号码个数，再将各段结果相乘得到最终答案。难点在于准确计算满足特定开头且能被整除的数的个数，需要通过取整函数及边界条件的处理来实现。

### 所选的题解
- **作者：BF_AlphaShoot（星级：4星）**
  - **关键亮点**：思路清晰，利用容斥原理，通过公式推导得出每段符合条件的电话号码个数的计算方法，并在代码中对边界情况（$b_i = 0$）进行了特判。
  - **重点代码核心实现思想**：通过公式计算能被 $a_i$ 整除的 $k$ 位电话号码个数 `mid1`，以及能被 $a_i$ 整除且开头为 $b_i$ 的个数（通过 `mid2` 和 `mid3` 的差值计算），根据 $b_i$ 是否为 0 进行不同的计算并更新答案 `ans`。
```c++
for(ri i=1;i<=n/k;i++){
    int mid1=(len-1)/a[i]+1;
    int mid2=(len/10*b[i]-1)/a[i]+1;
    int mid3=(len/10*(b[i]+1)-1)/a[i]+1;
    if(!b[i])
        ans=ans*(mid1-mid3)%MOD;
    else
        ans=ans*(mid1-mid3+mid2)%MOD;
}
```
- **作者：三点水一个各（星级：3星）**
  - **关键亮点**：同样采用容斥原理的思路，通过分析错误公式，得出正确的计算以 $b_i$ 开头且能被 $a_i$ 整除的 $k$ 位电话号码个数的公式，并分情况讨论 $b_i$ 是否为 0。
  - **重点代码核心实现思想**：计算 $10^k$ 和 $10^{k - 1}$，分别用 `s1`、`s2`、`s3` 表示不同条件下的个数，根据 $b_i$ 是否为 0 计算答案 `ans`。
```cpp
for(int i=1;i<=n/k;i++)
{
    ll pnum=num/10;    
    s1=(num-1)/a[i]+1;   
    s2=(pnum-1)/a[i]+1;     
    s3=(pnum*(b[i]+1)-1)/a[i]-(pnum*b[i]-1)/a[i];   
    if(b[i]==0) ans=ans*(s2-s1)%Mod; 
    else ans=ans*(s2-s3)%Mod; 
}
```

### 最优关键思路或技巧
利用容斥原理，将复杂的条件拆分为简单条件的组合，通过数学公式准确计算每种情况的数量，并注意边界条件（如 $b_i = 0$）的处理。

### 可拓展之处
此类题目属于组合计数与数论结合的问题，类似套路包括利用容斥原理解决具有多个限制条件的计数问题，以及通过取整函数和边界条件处理来精确计算满足特定整除和数位条件的数的个数。

### 洛谷相似题目
 - [P1025 数的划分](https://www.luogu.com.cn/problem/P1025)：涉及整数划分的计数问题，与本题类似，需通过数学方法和边界条件处理来解决。
 - [P1654 OSU!](https://www.luogu.com.cn/problem/P1654)：结合概率和数学期望的计算，与本题一样需要运用数学知识进行推导和计算。
 - [P2141 珠心算测验](https://www.luogu.com.cn/problem/P2141)：通过枚举和计数解决问题，与本题在计数思路上有相似之处。 

---
处理用时：36.30秒
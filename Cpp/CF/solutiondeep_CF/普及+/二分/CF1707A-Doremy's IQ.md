# 题目信息

# Doremy's IQ

## 题目描述

哆来咪·苏伊特参加了 $n$ 场比赛。 比赛 $i$ 只能在第 $i$ 天进行。比赛 $i$ 的难度为 $a_i$。最初，哆来咪的 IQ 为 $q$ 。 在第 $i$ 天，哆来咪将选择是否参加比赛 i。只有当她当前的 IQ 大于 $0$ 时，她才能参加比赛。

如果哆来咪选择在第 $i$ 天参加比赛 $i$，则会发生以下情况：
- 如果 $a_i>q$，哆来咪会觉得自己不够聪明，所以 $q$ 将会减 $1$；
- 否则，什么都不会改变。

如果她选择不参加比赛，一切都不会改变。哆来咪想参加尽可能多的比赛。请给哆来咪一个解决方案。

## 说明/提示

在第一个测试用例中，哆来咪参加了唯一的比赛。她的 IQ 没有下降。

在第二个测试用例中，哆来咪参加了两个比赛。在参加比赛 $2$ 后，她的 IQ 下降了 $1$。

在第三个测试用例中，哆来咪参加了比赛 $1$ 和比赛 $2$。她的 IQ 在参加比赛 $2$ 后降至 $0$，因此她无法参加比赛 $3$。

## 样例 #1

### 输入

```
5
1 1
1
2 1
1 2
3 1
1 2 1
4 2
1 4 3 1
5 2
5 1 2 4 3```

### 输出

```
1
11
110
1110
01111```

# AI分析结果



### 题目内容中文翻译

# 哆来咪的 IQ

## 题目描述

哆来咪·苏伊特参加了 $n$ 场比赛。比赛 $i$ 只能在第 $i$ 天进行，其难度为 $a_i$。初始时她的 IQ 为 $q$。在第 $i$ 天，她可以选择是否参赛（仅当 IQ > 0 时可参赛）：

- 若参赛且 $a_i > q$，IQ 减 1
- 其他情况 IQ 不变

求能参加最多比赛的 01 序列。

## 样例与说明
（样例输入输出与原题一致，此处略）

---

### 综合分析与结论

#### 关键算法思路
所有优质题解均采用**逆向贪心**策略，核心思想是：**将需要消耗 IQ 的比赛尽量安排在后续阶段**。通过从后往前遍历，计算最多能承受的扣 IQ 次数，从而确定分界点：前半部分只参加不扣 IQ 的比赛，后半部分全参加。

#### 最优解评分与亮点

1. **题解作者：tanghairong（5星）**
   - **亮点**：逆向思维转换巧妙，将原问题转化为"从零积累 IQ"模型，代码简洁高效（O(n)）
   - **核心代码**：
     ```cpp
     for(int i=n;i>0;i--){
         if(a[i]>num)num++;
         if(num==q){pos=i;break;}
     }
     // 前半部分选a[i]<=q，后半全选
     ```

2. **题解作者：Jeremiahy（4星）**
   - **亮点**：变量命名清晰，注释明确体现贪心思想
   - **核心实现**：
     ```cpp
     for(num=0, r=n; r>=1 && num<q; v[r]=1, r--)
         if(a[r]>num) num++;
     ```

3. **题解作者：wzy2021（4星）**
   - **亮点**：引入图示辅助说明，数学证明较完整
   - **关键片段**：
     ```cpp
     while(now>=1 && t<q) {
         if(a[now] > t) ++t;
         vis[now] = 1; now--;
     }
     ```

---

### 关键思路总结

1. **逆向处理**：从最后一天往前扫描，统计最多能承受的扣 IQ 次数（等同于反向积累 IQ）
2. **分界点确定**：当累计扣 IQ 次数达到初始 q 时，记录分界位置
3. **两部分处理**：
   - 分界点之后的所有比赛全选
   - 分界点之前的只选 $a_i \leq q$ 的比赛

**正确性证明**：若某个需要扣 IQ 的比赛被安排在后半段，其扣减操作不会影响前半段的决策，从而最大化参赛数。

---

### 相似题目推荐

1. [P1803 凌乱的yyy / 线段覆盖](https://www.luogu.com.cn/problem/P1803)  
   **相似点**：贪心策略选择结束时间最早的比赛

2. [P4995 跳跳！](https://www.luogu.com.cn/problem/P4995)  
   **相似点**：交替选择最大最小值的最优排列

3. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)  
   **相似点**：双向指针贪心匹配

---

### 题解心得摘录

- **逆向思维突破**："正序处理有后效性，倒序处理时扣 IQ 操作不影响已处理部分的决策"（Jeremiahy）
- **调试经验**："初始将 vis 数组全部置 0，避免脏数据干扰"（lovely_hyzhuo）
- **贪心证明**："若存在交换两个决策能获得更优解的情况，则原方案非最优，与贪心策略矛盾"（wzy2021 图示解析）

---
处理用时：56.27秒
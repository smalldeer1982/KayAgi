# 题目信息

# Sakurako's Test

## 题目描述

Sakurako 即将参加一场考试，这场考试可用一个整数数组 $n$ 和一个相关任务来描述：

对于给定的整数 $x$，Sakurako 可以多次执行以下操作：

- 选择一个整数 $i$，其中 $1 \le i \le n$，且满足 $a_i \ge x$；
- 将 $a_i$ 的值减少 $x$，即改为 $a_i - x$。

通过这样的操作，她需要找到数组 $a$ 的最小可能中位数 $^{\text{∗}}$。

Sakurako 已知数组的内容，但不清楚整数 $x$ 的值。不过，有人透露在接下来的考试中，$x$ 的值会是给定的 $q$ 个值之一，因此她希望你能帮忙找出每一个可能的 $x$ 所对应的最小中位数。

$^{\text{∗}}$ 对于一个长度为 $n$ 的数组，若 $n$ 是偶数，则中位数是排序后数组中第 $\frac{n+2}{2}$ 个位置的元素；若 $n$ 是奇数，则为第 $\frac{n+1}{2}$ 个位置的元素。

## 样例 #1

### 输入

```
2
5 5
1 2 3 4 5
1
2
3
4
5
6 3
1 2 6 4 1 3
2
1
5```

### 输出

```
0 1 1 1 2 
1 0 2```

# AI分析结果



【题目中文翻译】  
见用户提供的题目内容部分，已完整翻译无需重复。

---

### 题解综合分析结论  
各题解均采用二分答案法，核心思路是通过将模运算转化为区间覆盖问题，结合前缀和快速统计符合区间条件的元素个数。难点在于如何高效处理多个x值查询，并通过记忆化优化重复计算。

---

### 精选题解推荐

#### 题解1：沉石鱼惊旋（★★★★☆）  
**关键亮点**：  
- 预处理排序数组的前缀和，实现O(1)区间查询  
- 巧妙处理模运算区间跳跃（l +=x, r +=x）  
- 复杂度分析清晰（O(n log²n)）  
**个人心得**：  
> "注意前缀和边界问题" —— 强调正确处理越界情况是避免错误的关键  

**核心代码**：  
```cpp
auto check = [&](int mid) {
    int cnt = 0;
    for (int l = 0, r = x - 1; l <= n; l += x, r += x)
        cnt += sum[min({l + mid, r, n})] - sum[max(0, l - 1)];
    return cnt >= (n + 2) / 2;
};
```

---

#### 题解2：Super_Cube（★★★★☆）  
**关键亮点**：  
- 代码极度简洁（仅20行核心逻辑）  
- 动态维护前缀和数组，节省空间  
- 采用右移代替除法，优化计算效率  

**核心代码**：  
```cpp
for(int i=0,j=x-1;i<=n;i+=x,j+=x)
    res+=a[std::min(i+mid,n)]-a[std::max(0,i-1)];
```

---

### 最优思路总结  
**关键技巧**：  
1. **二分答案框架**：将求最小中位数转化为判定性问题  
2. **模运算区间化**：a_i mod x ≤ mid 等价于 a_i ∈ [kx, kx+mid] 的区间覆盖  
3. **前缀和分块查询**：预处理排序数组，通过跳跃式遍历（步长x）统计所有可能区间的元素个数  
4. **记忆化优化**：对重复x值直接返回缓存结果  

---

### 拓展应用  
**同类题型套路**：  
- 二分答案与区间统计结合的问题（如P2183 中位数）  
- 模运算性质相关题（如CF702C Cellular Network）  
- 分块跳跃计算（如LOJ6275 分块入门）  

**推荐练习**：  
1. [P2831 借教室]（二分答案+差分前缀和）  
2. [P3406 海底高铁]（区间覆盖统计）  
3. [CF702C Cellular Network]（类似区间覆盖判断）

---
处理用时：51.17秒
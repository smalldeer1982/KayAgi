# 题目信息

# Kevin and Bipartite Graph

## 题目描述

武器工厂需要一种海报设计模式，并向 Kevin 求助。

海报设计模式是一个二分图，左半部分有 $2n$ 个顶点，右半部分有 $m$ 个顶点。左半部分的每个顶点与右半部分的每个顶点之间都有一条边，总共形成 $2nm$ 条边。

Kevin 必须用范围在 $[1, n]$ 内的正整数为每条边着色。如果二分图中没有单色环（所有边颜色相同的简单环），则该海报设计模式是良好的。

Kevin 需要你的帮助来构造一个良好的二分图，或者在不可能的情况下通知他。

**单色环**：指所有边颜色都相同的简单环。

## 说明/提示

对于第一个测试用例，图形如下所示：

对于第二个测试用例，可以证明没有有效的解决方案。

## 样例 #1

### 输入

```
3
2 2
3 7
5 4```

### 输出

```
YES
1 2
2 1
2 2
2 1
NO
YES
1 1 1 1
1 2 2 2
1 2 3 3
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4```

# AI分析结果



# Kevin and Bipartite Graph

## 题目描述

武器工厂需要一种海报设计模式，并向 Kevin 求助。

海报设计模式是一个二分图，左半部分有 $2n$ 个顶点，右半部分有 $m$ 个顶点。左半部分的每个顶点与右半部分的每个顶点之间都有一条边，总共形成 $2nm$ 条边。

Kevin 必须用范围在 $[1, n]$ 内的正整数为每条边着色。如果二分图中没有单色环（所有边颜色相同的简单环），则该海报设计模式是良好的。

Kevin 需要你的帮助来构造一个良好的二分图，或者在不可能的情况下通知他。

**单色环**：指所有边颜色都相同的简单环。

## 说明/提示

对于第一个测试用例，图形如下所示：

对于第二个测试用例，可以证明没有有效的解决方案。

## 样例 #1

### 输入

```
3
2 2
3 7
5 4```

### 输出

```
YES
1 2
2 1
2 2
2 1
NO
YES
1 1 1 1
1 2 2 2
1 2 3 3
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4```

---

## 题解分析与结论

### 核心思路
1. **可行性判定**：通过分析单色边构成的森林最大边数，得到当且仅当 $m \le 2n-1$ 时有解。
2. **构造方法**：采用循环移位或模运算分配颜色，确保每个颜色对应的边在左部点形成链式结构（树），避免环的出现。

### 关键技巧
- **数学推导**：利用森林边数上限推导边界条件 $m \le 2n-1$。
- **模运算构造**：通过 $(i+j) \bmod 2n$ 或类似方式循环分配颜色，保证同色边无环。

---

## 高分题解选录

### 题解作者：Little09（★★★★☆）
**亮点**：清晰的不等式推导与简洁的构造式  
**构造式**：颜色为 $\lfloor\frac{(i+j)\bmod 2n}{2}\rfloor+1$  
**代码核心**：
```cpp
// 构造每个左部点i与右部点j的颜色
for (int i = 1; i <= 2n; ++i)
    for (int j = 1; j <= m; ++j)
        color = ((i + j) % (2n)) / 2 + 1;
```

### 题解作者：bsdsdb（★★★★☆）
**亮点**：引入图论森林性质分析，构造式位移轮换  
**构造式**：颜色为 $\lfloor\frac{(i-j+2n)\bmod 2n}{2}\rfloor+1$  
**核心思路**：通过右部点索引位移实现颜色轮换，确保同色边形成树。

---

## 同类题目推荐
1. **P3387**（缩点判环）：考察图论中环的处理与拓扑排序。
2. **P1330**（二分图染色）：基本二分图染色判断。
3. **P1960**（二分图匹配）：二分图最大匹配算法。

---
处理用时：88.54秒
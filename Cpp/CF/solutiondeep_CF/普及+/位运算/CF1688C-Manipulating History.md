# 题目信息

# Manipulating History

## 题目描述

> 身为人类时，她的能力是将已有的历史全盘抹消；变身为白泽时，则能创造历史。——《东方求闻史纪》

上白泽慧音具有操作历史程度的能力。      
幻想乡的历史，一开始是一个长度为 $1$ 的字符串 $s$。为了修复由于八云紫造成的历史错乱，她需要完成 $n$ 次操作。对于第 $i$ 次操作：

- 她会选择字符串 $s$ 中的一个非空子串 $t_{2i-1}$；
- 她会将 $t_{2i-1}$ 替换为 $t_{2i}$，注意这两者的长度可能是不一样的。

注意，如果 $t_{2i-1}$ 在字符串 $s$ 中出现多次，也仅仅只替换其中恰好一个。    
例如，如果有一个字符串 $s=\texttt{marisa}$，$t_{2i-1}=\texttt a$，$t_{2i}=\texttt z$，那么在一次操作后，字符串 $s$ 将会变成 $\texttt{marisz}$ 或者 $\texttt{mzrisa}$。    
在经过 $n$ 次这样的操作之后，慧音得到了最后的字符串以及 $2n$ 个 $t_i$。正当慧音觉得她完成了这项任务的时候，八云紫又一次出现并且打乱了所有的 $t_i$。更糟糕的是，慧音忘记了幻想乡最一开始的历史。     
请你帮助慧音求出幻想乡最一开始的历史。

## 样例 #1

### 输入

```
2
2
a
ab
b
cd
acd
3
z
a
a
aa
yakumo
ran
yakumoran```

### 输出

```
a
z```

# AI分析结果

### 题目内容
# 操纵历史

## 题目描述
身为人类时，她的能力是将已有的历史全盘抹消；变身为白泽时，则能创造历史。——《东方求闻史纪》

上白泽慧音具有操作历史程度的能力。幻想乡的历史，一开始是一个长度为1的字符串s。为了修复由于八云紫造成的历史错乱，她需要完成n次操作。对于第i次操作：
- 她会选择字符串s中的一个非空子串t₂ᵢ₋₁；
- 她会将t₂ᵢ₋₁替换为t₂ᵢ，注意这两者的长度可能是不一样的。

注意，如果t₂ᵢ₋₁在字符串s中出现多次，也仅仅只替换其中恰好一个。例如，如果有一个字符串s = "marisa"，t₂ᵢ₋₁ = "a"，t₂ᵢ = "z"，那么在一次操作后，字符串s将会变成"marisz"或者"mzrisa"。
在经过n次这样的操作之后，慧音得到了最后的字符串以及2n个tᵢ。正当慧音觉得她完成了这项任务的时候，八云紫又一次出现并且打乱了所有的tᵢ。更糟糕的是，慧音忘记了幻想乡最一开始的历史。
请你帮助慧音求出幻想乡最一开始的历史。

## 样例 #1
### 输入
```
2
2
a
ab
b
cd
acd
3
z
a
a
aa
yakumo
ran
yakumoran
```
### 输出
```
a
z
```

### 题解综合分析与结论
所有题解的核心思路均基于初始字符串长度为1且题目保证有解这两个关键条件。通过分析每次操作对字符出现次数奇偶性的影响，得出在所有操作涉及的字符串（包括最终字符串）中，初始字符出现次数为奇数，其余字符出现次数为偶数这一结论，从而通过统计字符出现次数的奇偶性来找出初始字符。

### 所选的题解
#### 作者：IvanZhang2009 (5星)
- **关键亮点**：思路清晰，从操作对字符出现次数的影响出发，详细阐述了奇偶性变化的原理，逻辑连贯。代码简洁明了，利用`map`记录字符出现次数，直接遍历所有字符串统计并找出奇数出现的字符。
- **个人心得**：无
```cpp
void Main() {
    int n;
    cin>>n;
    map<char,int>mp; //用map记录出现次数
    for(int i=0;i<=2*n;i++){ //直接考虑所有2n+1个字符串
        string s;
        cin>>s;
        for(int j=0;j<s.size();i++)mp[s[j]]++; //记录改变次数
    }
    REP(i,0,26)if(mp[char(i+'a')]&1)cout<<(char)(i+'a')<<endl;
    //找到奇数就输出
}
```
核心实现思想：遍历所有输入字符串，用`map`记录每个字符出现次数，最后遍历`map`找出出现奇数次的字符输出。

#### 作者：Cocoly1990 (4星)
- **关键亮点**：从抽象化字符集角度理解操作，将每次操作抽象为字符出现次数的增减，简洁地阐述了出现次数奇偶性与初始字符的关系，易于理解。
- **个人心得**：作者表示题面是自己所写，似乎意识到题面可能存在问题。
```cpp
// 无具体代码，思路核心为用字符集{cnt_a,cnt_b,cnt_c,⋯,cnt_y,cnt_z}表示状态，每次操作抽象为字符出现次数的增减，最后开桶记录出现奇数次的字符。
```
核心实现思想：将操作抽象为字符出现次数变化，通过统计字符出现次数的奇偶性确定初始字符。

#### 作者：guozhetao (4星)
- **关键亮点**：从假设原始数组已知且最后操作将其清空的角度出发，直观地得出每个字母需出现偶数次才能被清空的结论，进而推出出现奇数次的字母即为初始字符，思路独特。
```cpp
#include<bits/stdc++.h>
using namespace std;
int t,n,a[30];
int main() {
	ios::sync_with_stdio(false);
	cin.tie(NULL),cout.tie(NULL);
	cin>>t;
	while(t--) {
		memset(a,0,sizeof(a));
		cin>>n;
		n *= 2;
		n++;
		while(n--) {
			string v;
			cin>>v;
			int x = v.size();
			for(int i = 0;i < x;i++) a[(int)v[i] - 96]++;
		}
		for(int i = 1;i <= 26;i++) if(a[i] & 1) cout<<char(i + 96)<<endl;
	}
}
```
核心实现思想：通过循环读取所有字符串，统计每个字符出现次数，最后找出出现奇数次的字符输出。

### 最优关键思路或技巧
利用初始字符串长度为1和题目保证有解这两个条件，从字符出现次数的奇偶性角度分析问题。将每次字符串替换操作抽象为对字符出现次数的影响，通过统计所有相关字符串中字符出现次数的奇偶性来确定初始字符。

### 可拓展思路
此类题目属于字符串操作与逻辑推理结合的类型。类似套路可应用于其他字符串变换后求初始状态的问题，关键在于分析操作对字符串特征（如字符出现次数、位置关系等）的影响，并利用题目给定的限制条件（如初始字符串长度、操作次数等）找出解题线索。

### 洛谷相似题目推荐
- [P1308 统计单词数](https://www.luogu.com.cn/problem/P1308)：涉及字符串查找与统计，可锻炼对字符串操作及计数的能力。
- [P1593 因子和阶乘](https://www.luogu.com.cn/problem/P1593)：通过对数字的因子分析，与本题类似，需要从特定条件出发进行逻辑推理和计算。
- [P2672 推销员](https://www.luogu.com.cn/problem/P2672)：结合了贪心策略和数据处理，在逻辑分析和算法应用上与本题有相似之处。 

---
处理用时：28.32秒
# 题目信息

# Minimize the Difference

## 题目描述

给你一个长度为 $n$ 的数 $a_1,a_2,…,a_n$ 我们可以对数组进行任意数量(可能是零)的运算。

在每次操作中，我们选择一个位置 $i$ ( $1 \le i \le n−1 $
 ) ，使 $a_i-1,a_{i+1}+1$

求 $max(a_1,a_2,…,a_n)−min(a_1,a_2,…,a_n)$ 的最小可能值。

## 说明/提示

在第三个测试案例中，您可以使用 $i=1$
 执行两次操作。
之后，数组为 $[2,3,2,3]$
 所以 $ans=max(2,3,2,3)−min(2,3,2,3)=3−2=1$
 。

## 样例 #1

### 输入

```
5
1
1
3
1 2 3
4
4 1 2 3
4
4 2 3 1
5
5 14 4 10 2```

### 输出

```
0
2
1
1
3```

# AI分析结果



# Minimize the Difference

## 题目描述

给定一个长度为 $n$ 的数组 $a_1,a_2,...,a_n$，可以进行任意次数的操作。每次操作选择一个位置 $i$（$1 \le i \le n-1$），将 $a_i$ 减 1，$a_{i+1}$ 加 1。求最终数组的极差（最大值与最小值之差）的最小可能值。

## 样例

### 输入
```
5
1
1
3
1 2 3
4
4 1 2 3
4
4 2 3 1
5
5 14 4 10 2
```

### 输出
```
0
2
1
1
3
```

---

### 综合分析与结论

通过分析操作性质可知，最优解的极差等于最大后缀平均值（向上取整）与最小前缀平均值（向下取整）的差值。该结论的证明基于以下两点：
1. 任意操作不会让最小值低于前缀平均的下界，也不会让最大值高于后缀平均的上界
2. 存在操作序列能达到这两个边界值

---

### 精选题解

#### 1. 作者：wuxigk（★★★★★）
**关键思路**：  
严格数学证明极差等于 $\lceil R(A) \rceil - \lfloor L(A) \rfloor$，其中 $R(A)$ 是最大后缀平均，$L(A)$ 是最小前缀平均。  
**核心代码**：
```cpp
// 计算前缀最小值
for(int i = 0; i < n; i++)
    pre_avg[i] /= i + 1;
// 计算后缀最大值
for(int i = n - 1; i >= 0; i--)
    suf_avg[i] = (suf_avg[i] + n - i - 1) / (n - i);
```

#### 2. 作者：lsc72（★★★★☆）
**关键亮点**：  
简洁高效的单次遍历实现，时间复杂度 $O(n)$。  
**核心代码**：
```cpp
// 前向扫描取最小前缀平均
for(int i=1;i<=n;i++) sum1+=a[i],ans1=min(ans1,sum1/i);
// 反向扫描取最大后缀平均
for(int i=n;i>=1;i--) sum2+=a[i],ans2=max(ans2,((sum2-1)/(n-i+1)+1));
```

---

### 关键技巧总结
1. **平均值边界法**：通过前缀/后缀和的平均值确定极差的理论边界
2. **取整技巧**：使用 `(sum-1)/k +1` 实现向上取整
3. **数学归纳法**：证明操作对平均值边界的影响

---

### 类似题目推荐
1. P1115 最大子段和（一维区间极值问题）
2. P1631 序列合并（堆优化合并策略）
3. P2512 糖果传递（环形均分纸牌问题）

---
处理用时：53.79秒
# 题目信息

# Easy Demon Problem

## 题目描述

机器人定义了一个网格的美丽值，就是其中所有元素的总和。现在他给了你两个数组：一个长度为 $n$ 的数组 $a$ 和一个长度为 $m$ 的数组 $b$。你的任务是利用这两个数组建立一个 $n \times m$ 的网格 $M$，其中 $M_{i,j} = a_i \cdot b_j$ 对于所有的 $1 \leq i \leq n$ 和 $1 \leq j \leq m$ 均成立。

接下来，机器人会提供 $q$ 个查询。对于每个查询，会给出一个整数 $x$。你的目标是判断是否可以通过以下操作，使得网格 $M$ 的美丽值恰好为 $x$：

1. 选择一行 $r$ 和一列 $c$，满足 $1 \leq r \leq n$ 和 $1 \leq c \leq m$。
2. 将所有在第 $r$ 行或第 $c$ 列，或者同时位于这两者交叉处的元素设为 $0$。

需要注意的是，各个查询之间是相互独立的，这意味着你不必实际修改网格的元素为零——你只需判断是否存在这样的一对 $r$ 和 $c$，如果进行上述操作能使网格的美丽值为 $x$。即便网格的初始美丽值已经是 $x$，你仍然需要选择行和列并执行这个操作。

## 样例 #1

### 输入

```
3 3 6
-2 3 -3
-2 2 -1
-1
1
-2
2
-3
3```

### 输出

```
NO
YES
NO
NO
YES
NO```

## 样例 #2

### 输入

```
5 5 6
1 -2 3 0 0
0 -2 5 0 -3
4
-3
5
2
-1
2```

### 输出

```
YES
YES
YES
YES
NO
YES```

# AI分析结果



### 题目内容重写（确认无误，原题已是中文）

### 题解综合分析结论
各题解核心思路一致：将删减后的美丽值转化为 $(suma-a_i)(sumb-b_j)$，通过预处理所有可能的差值，将问题转化为判断是否存在差值对的乘积等于查询值x。关键差异在于数据结构的选择（哈希表、集合、数组标记）和因数分解的实现细节。

---

### 精选题解列表

#### 1. 作者：ohjun（★★★★☆）
**关键亮点**  
- 使用unordered_map存储差值，查询效率O(1)  
- 清晰展示容斥原理推导过程  
- 处理负数x时通过符号标记统一处理  

**核心代码片段**  
```cpp
unordered_map<ll, bool> vis[2]; // 分别存储suma-a_i和sumb-b_j
for(int i = 1; i <= n; i++) vis[0][s_a - A[i]] = true;
for(int i = 1; i <= m; i++) vis[1][s_b - B[i]] = true;

// 因数分解时处理正负组合
if(vis[0][i] && vis[1][x / i] || vis[0][x / i] && vis[1][i]) 
    return true;
if(vis[0][i*-1] && vis[1][x/i*-1] || ...) 
    return true;
```

#### 2. 作者：Peaky（★★★★☆）
**关键亮点**  
- 使用set结构自动去重和排序  
- 单独处理x=0的特殊情况  
- 因数组合判断逻辑全面，涵盖四种符号可能性  

**核心代码片段**  
```cpp
set<int> ta,tb; // 存储所有suma-a_i和sumb-b_j
for(int i=1;i<=n;i++) ta.insert(suma-a[i]);
for(int i=1;i<=m;i++) tb.insert(sumb-b[i]);

// 判断四种可能的符号组合
if(ta.count(i)&&tb.count(x/i)) f=1;
if(ta.count(-i)&&tb.count(-x/i)) f=1;
if(tb.count(i)&&ta.count(x/i)) f=1;
if(tb.count(-i)&&ta.count(-x/i)) f=1;
```

---

### 最优解题思路总结
**关键技巧**  
1. **数学转换**：将二维问题转化为一维因数分解问题，$(suma-a_i)(sumb-b_j)=x$  
2. **预处理优化**：用哈希表/集合存储所有可能的$suma-a_i$和$sumb-b_j$  
3. **因数分解策略**：  
   - 遍历到√x即可，同时判断i和x/i  
   - 处理负数时需考虑四种符号组合：(正,正)、(-正,-正)、(正,-负)、(-负,正)  

**同类拓展**  
- 类似二维降维思想：CF1775C（矩阵覆盖问题）  
- 因数分解应用：洛谷P2424（约数和定理）  

---

### 推荐练习题
1. [P1866 素数密度](https://www.luogu.com.cn/problem/P1866) - 预处理区间质数  
2. [P2424 约数和](https://www.luogu.com.cn/problem/P2424) - 因数分解的高效计算  
3. [P1463 反素数](https://www.luogu.com.cn/problem/P1463) - 因数分解与最值问题

---
处理用时：49.27秒
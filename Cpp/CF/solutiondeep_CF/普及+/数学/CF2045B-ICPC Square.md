# 题目信息

# ICPC Square

## 题目描述

ICPC Square 是由 ICPC 委员会为参赛者安排住宿的酒店，共有 $N$ 层（编号从 $1$ 到 $N$）。酒店内的电梯非常独特：如果你目前在第 $x$ 层，你可以通过乘坐电梯到达第 $y$ 层，但要求 $y$ 是 $x$ 的倍数且 $y - x \leq D$。

你最初在第 $S$ 层。你想通过乘坐电梯零次或多次，尽量到达高的一层。请找出你能够到达的最高楼层。

## 说明/提示

样例解释：

1. 首先，从第 3 层乘电梯到第 15 层，因为 15 是 3 的倍数且 $15 - 3 \leq 35$。
2. 然后，从第 15 层乘电梯到第 30 层，因为 30 是 15 的倍数且 $30 - 15 \leq 35$。
3. 最后，从第 30 层乘电梯到第 60 层，因为 60 是 30 的倍数且 $60 - 30 \leq 35$。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
64 35 3```

### 输出

```
60```

## 样例 #2

### 输入

```
2024 2023 1273```

### 输出

```
1273```

# AI分析结果



### 题目重写

#### ICPC Square

##### 题目描述

ICPC Square 是由 ICPC 委员会为参赛者安排住宿的酒店，共有 $N$ 层（编号从 $1$ 到 $N$）。酒店内的电梯非常独特：如果你目前在第 $x$ 层，你可以通过乘坐电梯到达第 $y$ 层，但要求 $y$ 是 $x$ 的倍数且 $y - x \leq D$。

你最初在第 $S$ 层。你想通过乘坐电梯零次或多次，尽量到达高的一层。请找出你能够到达的最高楼层。

##### 样例解释

1. 从第 3 层到第 15 层（差 12 ≤ 35），再到第 30 层（差 15 ≤ 35），最后到第 60 层（差 30 ≤ 35）。
2. 初始层 1273 已超过处理后的 $2 \times D$，直接输出。

---

### 题解综合分析与结论

#### 关键思路
1. **问题转换**：将所有楼层除以初始层 $S$，转化为 $S=1$ 的情况，简化跳跃倍数关系。
2. **边界处理**：当 $D=0$ 或 $N \leq D+1$ 时可直接处理。
3. **跳跃上限**：将最大可达楼层限制为 $2 \times D$，通过分析最后一步跳跃的性质得出。
4. **奇偶分治**：偶数层可直接到达，奇数层需检查是否存在合法因数分解路径。

#### 评分较高的题解

##### 题解作者：lfxxx（★★★★）
**关键亮点**：
- 通过问题转换将初始层标准化，简化后续逻辑。
- 利用奇偶性分情况处理，结合因数分解快速验证路径。
- 代码结构清晰，特殊情况的处理完备。

**代码核心实现**：
```cpp
n = min(n, 2 * d); // 限制最大可达层数
if (n % 2 == 0) {
    cout << n * s << '\n';
} else {
    // 遍历因数检查是否存在合法跳跃路径
    for (int i = 2; i <= 1000000; i++) {
        if (n % i == 0 && n - n / i <= d) {
            cout << n * s << '\n';
            return 0;
        }
    }
    cout << (n - 1) * s << '\n';
}
```

---

### 最优技巧总结
1. **标准化转换**：将复杂问题通过除以初始值简化为标准形式。
2. **跳跃上限推导**：通过最后一步跳跃的约束，将问题规模从 $O(N)$ 降为 $O(D)$。
3. **因数分解优化**：在奇数情况下，仅需检查小范围的因数即可确定路径合法性。

---

### 拓展与相似题目
1. **因数分解应用**：P1445 [NOIP2011]计算系数（因数分解优化计算）
2. **跳跃问题**：P1582 倒水（利用倍数跳跃的最优解）
3. **贪心策略**：P1412 经营与开发（分阶段决策的最优解）

---

### 个人心得摘录
- **调试教训**：在因数检查时，需注意循环范围（如题解中的 `i <= 1e6`）可能遗漏大质数的情况，需确保因数检查覆盖所有可能。
- **优化顿悟**：通过观察最后一步跳跃的性质，发现最大可达楼层不会超过 $2D$，极大简化问题。

---
处理用时：127.54秒
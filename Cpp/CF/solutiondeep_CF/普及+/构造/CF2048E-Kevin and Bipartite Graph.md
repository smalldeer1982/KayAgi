# 题目信息

# Kevin and Bipartite Graph

## 题目描述

武器工厂需要一种海报设计模式，并向 Kevin 求助。

海报设计模式是一个二分图，左半部分有 $2n$ 个顶点，右半部分有 $m$ 个顶点。左半部分的每个顶点与右半部分的每个顶点之间都有一条边，总共形成 $2nm$ 条边。

Kevin 必须用范围在 $[1, n]$ 内的正整数为每条边着色。如果二分图中没有单色环（所有边颜色相同的简单环），则该海报设计模式是良好的。

Kevin 需要你的帮助来构造一个良好的二分图，或者在不可能的情况下通知他。

**单色环**：指所有边颜色都相同的简单环。

## 说明/提示

对于第一个测试用例，图形如下所示：

对于第二个测试用例，可以证明没有有效的解决方案。

## 样例 #1

### 输入

```
3
2 2
3 7
5 4```

### 输出

```
YES
1 2
2 1
2 2
2 1
NO
YES
1 1 1 1
1 2 2 2
1 2 3 3
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4
1 2 3 4```

# AI分析结果

### 综合分析与结论
这些题解的核心思路都是先确定有解时 $m$ 的上界，再构造出 $m = 2n - 1$ 时的方案。

- **思路对比**：各题解均通过每种颜色的边构成森林，得出总边数的限制条件，进而化简得到 $m \leq 2n - 1$。在构造方案上，都利用了将左部点连成链的思想，只是在具体的颜色分配方式上略有不同。
- **算法要点**：关键在于理解每种颜色的边构成森林，以及如何巧妙地构造链来满足没有单色环的条件。
- **解决难点**：难点在于如何证明 $m$ 的上界以及如何构造出满足条件的二分图。各题解通过理论推导和图形示例进行了说明。

### 题解评分
- **Little09**：4星。思路清晰，直接给出构造公式，简洁明了。
- **bsdsdb**：3星。通过提示逐步引导思考，过程详细，但表述相对复杂。
- **_lmh_**：4星。思路清晰，有代码实现，且代码可读性较好。
- **黑白丿殊梦**：3星。通过图形示例辅助理解构造过程，但代码存在小瑕疵。

### 所选题解
- **Little09（4星）**
  - **关键亮点**：直接给出构造公式，简单高效。
  - **核心代码思想**：根据公式 $\lfloor\dfrac{(i+j)\bmod 2n}2\rfloor+1$ 计算左部点 $i$ 和右部点 $j$ 连边的颜色。
- **_lmh_（4星）**
  - **关键亮点**：思路清晰，代码实现完整，可读性好。
  - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
#define ll long long
const ll N=1007;
ll T,n,m,ans[N<<1][N];
int main(){
    ios::sync_with_stdio(false);cin.tie(0);cout.tie(0);
    cin>>T;
    while(T--){
        cin>>n>>m;
        if (2*n<=m) cout<<"NO\n";
        else{
            cout<<"YES\n";
            for (int i=1;i<=m;++i){
                int k=i;
                for (int j=1;j<=n;++j){
                    ans[k][i]=ans[k+1][i]=j;
                    if (k==2*n) ans[1][i]=j;
                    k+=2;
                    if (k>2*n) k-=2*n;
                }
            }
            for (int i=1;i<=2*n;++i){for (int j=1;j<=m;++j) cout<<ans[i][j]<<' ';cout<<'\n';}
        }
    }
    return 0;
}
```

### 最优关键思路或技巧
- **理论推导**：通过每种颜色的边构成森林，得出总边数的限制条件，从而确定 $m$ 的上界。
- **构造链**：将左部点连成链，使得每种颜色的边形成树，避免出现单色环。

### 可拓展之处
同类型题可能会改变图的结构或颜色限制，解题思路仍然是先确定有解的条件，再进行构造。类似算法套路包括利用图的性质进行理论推导和构造满足条件的图。

### 推荐洛谷题目
- P1119 灾后重建：考察图的连通性和最短路径问题。
- P2820 局域网：涉及图的最小生成树。
- P3366 最小生成树模板：直接考察最小生成树算法。

### 个人心得
题解中未包含个人心得。

---
处理用时：19.25秒
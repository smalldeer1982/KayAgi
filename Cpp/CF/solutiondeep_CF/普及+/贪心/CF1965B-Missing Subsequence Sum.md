# 题目信息

# Missing Subsequence Sum

## 题目描述

给定两个整数 $n,k$，你需要构造出一个长度不超过 $25$ 的数组 $a$，并满足以下条件：

* $a$ 中任意子序列元素和不为 $k$。

* $a$ 中所有子序列和可以表示 $1\sim n$ 中除了 $k$ 以外的任意整数。

子序列表示一个序列中任意一些元素按顺序组成的序列，比如 $[5,2,3]$ 是 $[1,5,7,8,2,4,3]$ 的子序列。

可以证明一定存在这样的方案。

## 说明/提示

对于全部数据，满足 $1\le t\le1000$，$1\le k\le n\le10^6$，$1\le \sum n\le10^7$。

你构造的数列需要满足 $1\le m\le25$，$0\le a_i\le10^9$。

## 样例 #1

### 输入

```
5
2 2
6 1
8 8
9 3
10 7```

### 输出

```
1
1
5
2 3 4 5 6
7
1 1 1 1 1 1 1
4
7 1 4 1
4
1 2 8 3```

# AI分析结果



# 中文题目重写

## 题目描述

给定两个整数 $n,k$，你需要构造一个长度不超过 25 的数组 $a$，满足以下条件：

* $a$ 的任意子序列的和均不为 $k$。
* $a$ 的所有子序列和能够表示 $1\sim n$ 中除 $k$ 外的所有整数。

子序列指从数组中选取任意个元素（顺序保持原顺序）组成的序列。可以证明一定存在这样的构造方案。

## 输入输出样例

输入样例：
```
5
2 2
6 1
8 8
9 3
10 7
```
输出样例：
```
1
1
5
2 3 4 5 6
7
1 1 1 1 1 1 1
4
7 1 4 1
4
1 2 8 3
```

---

# 题解分析与结论

**核心思路**：将问题拆分为构造 $1\sim (k-1)$ 和 $(k+1)\sim n$ 两部分。利用二进制分解构造前半段，通过加入特定大数（如 $k+1$, $2k$ 等）并动态扩展后半段。

**关键技巧**：
1. **二进制覆盖**：用 $1,2,4,...,2^m$ 覆盖 $1\sim 2^{m+1}-1$，通过调整末项覆盖 $1\sim (k-1)$。
2. **动态扩展**：加入 $k+1$ 后，后续元素以倍增方式扩展，确保不形成 $k$。
3. **边界处理**：特判 $k=1$ 或 $k=n$ 的情况。

---

# 精选题解

## 题解1：Exp10re（★★★★☆）
**亮点**：清晰的阶段划分与数学证明，代码可读性强。
- 分两阶段构造，先处理 $1\sim (k-1)$，再用 $k+1$ 扩展。
- 动态维护可表示范围，通过逐步倍增覆盖到 $n$。
- 代码中通过 `sum` 和 `add` 变量控制扩展过程。

```cpp
vector<int> a;
int lim = 0, add = k + 1;
// 构造1~k-1
for (int w = 1; lim < k - 1; w <<= 1) {
    if (lim + w <= k - 1) a.push_back(w), lim += w;
    else a.push_back(k - 1 - lim), lim = k - 1;
}
// 扩展k+1~n
if (k < n) {
    while (lim < n) {
        a.push_back(add);
        lim += add;
        add = lim + 1;
    }
}
```

## 题解2：LiuIR（★★★★☆）
**亮点**：二进制分解与特殊插入结合，逻辑严密。
- 找到最大 $2^i \leq k$，构造除 $2^i$ 外的二进制位。
- 插入调整项 $k - 2^i$ 和 $k+1$ 确保覆盖。
- 代码简洁，直接生成固定结构数组。

```cpp
int pos = 0;
while (1 << (pos + 1) <= k) pos++;
vector<int> a;
// 生成二进制项（排除2^pos）
for (int i = 0; i <= 19; i++) if (i != pos) a.push_back(1 << i);
// 插入调整项
a.push_back(k - (1 << pos));
a.push_back(k + 1);
a.push_back(k + (1 << pos) + 1);
```

---

# 拓展与总结

**同类问题套路**：
- **二进制分解**：适用于需要覆盖连续区间的构造问题（如 CF1557C）。
- **动态扩展**：通过逐步加入元素扩展可表示范围（如背包问题的构造）。

**推荐练习**：
1. [P2119 魔法阵](https://www.luogu.com.cn/problem/P2119) - 构造特殊四元组
2. [CF1557C Moamen and XOR](https://www.luogu.com.cn/problem/CF1557C) - 二进制位构造
3. [P6281 数列分块入门 5](https://www.luogu.com.cn/problem/P6281) - 动态区间覆盖思想

---
处理用时：57.54秒
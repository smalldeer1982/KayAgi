# 题目信息

# Fire

## 题目描述

某人的房子着火了，他想从大火中带走价值总和尽量多的物品，每次他只能带走一个，分别给出挽救某物品需要的时间 $t$，该物品开始燃烧的时间 $d$（从 $d$ 时间开始就不能再挽救该物品了），该物品的价值 $p$。

## 样例 #1

### 输入

```
3
3 7 4
2 6 5
3 7 6
```

### 输出

```
11
2
2 3 
```

## 样例 #2

### 输入

```
2
5 6 1
3 3 5
```

### 输出

```
1
1
1 
```

# AI分析结果



# Fire 题目翻译

## 题目描述

某人的房子着火了，他想从大火中带走价值总和尽量多的物品。每次他只能带走一个物品。每个物品有三个属性：挽救该物品需要的时间 $t$，该物品开始燃烧的时间 $d$（从 $d$ 时间开始就不能再挽救该物品了），以及该物品的价值 $p$。

## 样例 #1

### 输入

```
3
3 7 4
2 6 5
3 7 6
```

### 输出

```
11
2
2 3 
```

---

# 题解综合分析

## 关键思路总结
1. **排序预处理**：所有题解均强调按物品燃烧时间 $d$ 升序排序，保证处理顺序满足动态规划的无后效性。
2. **动态规划变形**：基于 01 背包框架，状态定义聚焦于 *最后拯救完成时间* 的价值最大化，转移时需满足 $j \leq d_i-1$ 的时间约束。
3. **路径记录优化**：高分题解采用滚动数组 + 实时 vector 更新策略，在状态转移时同步记录物品编号，极大简化了路径回溯。

## 最优题解推荐

### 1. 作者：Dfkuaid（⭐⭐⭐⭐⭐）
**核心亮点**：
- 二维状态设计清晰表达时间维度
- 独立前驱数组实现高效路径回溯
- 详细论证排序必要性与状态转移逻辑

**路径记录核心代码**：
```cpp
void Path(int k,int t){
    if(k <= 0) return;
    Path(k-1,g[k][t]);
    if(f[k][t] != f[k-1][t])
        list[++cnt] = k; 
}
```

### 2. 作者：IGA_Indigo（⭐⭐⭐⭐）
**核心亮点**：
- 一维滚动数组优化空间复杂度
- 动态更新 vector 存储路径
- 代码简洁易读，适合快速实现

**关键转移逻辑**：
```cpp
for(int j=a[i].d-1;j>=a[i].t;j--){
    if(f[j] < f[j-a[i].t] + a[i].p){
        f[j] = f[j-a[i].t] + a[i].p;
        q[j] = q[j-a[i].t]; 
        q[j].push_back(a[i].b);
    }
}
```

### 3. 作者：Bitter_Tea（⭐⭐⭐⭐）
**核心亮点**：
- 结构体排序与背包结合
- 完整注释解释关键步骤
- 统一使用小写变量名提升可读性

**状态转移片段**：
```cpp
for(int j=e[i].d-1;j>=e[i].t;j--)
    if(f[j] < f[j-e[i].t] + e[i].v){
        f[j] = f[j-e[i].t] + e[i].v;
        q[j] = q[j-e[i].t];
        q[j].push_back(e[i].id);
    }
```

---

## 同类型题目推荐
1. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 基础 01 背包
2. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060) - 背包变种 + 价值计算
3. [P1941 飞扬的小鸟](https://www.luogu.com.cn/problem/P1941) - 时间约束下的动态规划

---

## 关键实现技巧
1. **时间窗口限制**：在背包循环时设置 `j = min(d_i-1, MAX_TIME)`，确保在有效时间内转移
2. **路径压缩存储**：使用 `vector` 的赋值特性 `q[j] = q[j-t]` 实现路径继承
3. **最终答案检索**：遍历所有可能结束时间取最大值，而非固定最大容量

---

## 调试经验摘录
> "必须对 d 排序，否则后面物品会影响前面状态导致 WA" —— Daniel_7216  
> "vector 清空操作在更新时不可或缺" —— wanggiaoxing  
> "答案可能存在于任意结束时间，需遍历全部时间点" —— Dfkuaid

---
处理用时：53.46秒
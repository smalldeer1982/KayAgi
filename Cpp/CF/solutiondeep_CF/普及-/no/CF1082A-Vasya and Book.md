# 题目信息

# Vasya and Book

## 题目描述

Vasya有一本 $n$ 页的电子书，她每次可以向前或向后翻 $d$ 页（但她不能翻到书外面去）。现在她要从第 $x$ 页翻到第 $y$ 页，求她最少翻的次数。

## 样例 #1

### 输入

```
3
10 4 5 2
5 1 3 4
20 4 19 3
```

### 输出

```
4
-1
5
```

# AI分析结果



# Vasya and Book（题目中文翻译）

## 题目描述

Vasya有一本 $n$ 页的电子书，每次可以向前或向后翻 $d$ 页（不能翻到书外）。现需从第 $x$ 页翻到第 $y$ 页，求最少翻页次数。

## 样例

### 输入
```
3
10 4 5 2
5 1 3 4
20 4 19 3
```

### 输出
```
4
-1
5
```

---

**算法分类**：数学

---

### 题解综合分析

所有题解均围绕三种可能路径展开：
1. 直接翻到（需满足距离是d的倍数）
2. 经第1页中转（需满足y-1是d的倍数）
3. 经第n页中转（需满足n-y是d的倍数）

核心难点在于：如何快速计算各路径的步数，并处理无法整除时的向上取整操作。最优解法通过整数运算技巧避免浮点数误差。

---

### 精选题解（4星以上）

#### 1. Lovely_Chtholly（4★）
**核心亮点**：使用 `(x-1+d-1)/d` 实现向上取整，代码简洁高效  
**关键代码**：
```cpp
if(!((y-1)%d)) sum = min(sum, (x-1+d-1)/d + (y-1)/d);
if(!((n-y)%d)) sum = min(sum, (n-x+d-1)/d + (n-y)/d);
```
**实现思想**：通过添加 `d-1` 的技巧将除法转换为向上取整，避免浮点运算。

#### 2. DengDuck（4★）
**核心亮点**：逻辑清晰，边界条件处理明确  
**关键代码**：
```cpp
if((n-y)%d==0) ans=min(ans,(n-x+d-1)/d+(n-y)/d);
if((y-1)%d==0) ans=min(ans,(x-1+d-1)/d+(y-1)/d);
```
**个人心得**：强调三种路径的独立性，通过布尔标记确保至少存在可行解。

#### 3. Dilute（4★）
**核心亮点**：代码结构紧凑，注释直观  
**关键代码**：
```cpp
if((y-1)%d==0) 
    ans = min(ans, (x-1)/d + (y-1)/d + ((x-1)%d ? 1 : 0));
```
**实现思想**：显式处理余数判断，增加代码可读性。

---

### 关键思路总结
1. **整数向上取整技巧**：`(a + b - 1)/b` 等效于 `ceil(a/b)`
2. **路径分类思想**：无法直达时，通过边界页中转是最优策略
3. **模运算约束条件**：三种路径分别对应不同的模数约束条件

---

### 拓展练习
1. [P1031 均分纸牌](https://www.luogu.com.cn/problem/P1031)（数学模拟）
2. [P1582 倒水](https://www.luogu.com.cn/problem/P1582)（位运算+数学）
3. [P3951 小凯的疑惑](https://www.luogu.com.cn/problem/P3951)（数论推导）

---
处理用时：39.14秒
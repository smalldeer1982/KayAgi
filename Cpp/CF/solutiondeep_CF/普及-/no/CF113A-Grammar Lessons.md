# 题目信息

# Grammar Lessons

## 题目描述

Petya 发明了一种语言。这种语言的词有三种词性、两种性别。下面是每一种词性和性别的结尾表格：

|   |阳性|阴性|
|---|---|---|
|形容词|-lios|-liala|
|名词|-etr|-etra|
|动词|-initis|-inites|

这种语言的语法有以下几条：

1. 每个句子必须按照以下顺序书写：$0$ 个或多个形容词、$1$ 个名词、$0$ 个或多个动词。
2. 一个句子中所有单词的性别必须相同。
3. 每一个单词都以上述结尾来结尾，也就是说，不以上述的结尾来结尾的单词不符合语法。
4. **单独一个合法单词也可以组成一个合法的句子。**

现在 Petya 需要你来帮助他检查语法，如果正确输出 `YES`，否则输出 `NO`。

## 样例 #1

### 输入

```
petr
```

### 输出

```
YES
```

## 样例 #2

### 输入

```
etis atis animatis etis atis amatis
```

### 输出

```
NO
```

## 样例 #3

### 输入

```
nataliala kataliala vetra feinites
```

### 输出

```
YES
```

# AI分析结果



# Grammar Lessons

## 题目描述

Petya 发明了一种语言。这种语言的词有三种词性、两种性别。下面是每一种词性和性别的结尾表格：

|   |阳性|阴性|
|---|---|---|
|形容词|-lios|-liala|
|名词|-etr|-etra|
|动词|-initis|-inites|

语法规则：
1. 句子结构：0+形容词 → 1名词 → 0+动词
2. 所有单词性别相同
3. 单词必须以上述结尾结尾
4. 单个合法单词可成句

---

### 算法分类
模拟

---

## 题解对比与结论

### 关键思路总结
1. **后缀映射**：将单词映射为（性别，词性）二元组，性别通过奇偶或正负区分
2. **状态机思想**：维护当前允许的词性阶段（形容词→名词→动词）
3. **名词检查**：必须且仅有一个名词，且位置分割形容词和动词区域
4. **性别一致性**：通过首单词性别初始化，后续单词必须匹配
5. **顺序验证**：名词前仅形容词，名词后仅动词

---

## 精选题解

### 1. 题解作者：Timon080923（⭐⭐⭐⭐⭐）
**核心亮点**：
- 使用后缀长度分层判断，避免长后缀误判
- 通过`f`记录性别，`p`跟踪允许的词性阶段
- 函数拆分清晰，主逻辑紧凑

**关键代码**：
```cpp
int endex(string s) {
    // 分层判断后缀类型，返回0-5对应六种合法形式
}

bool pam(string s) {
    int k = endex(s);
    if (k < 0) return false;
    if (f == -1) f = k%2; // 初始化性别
    else if (k%2 != f) return false;
    if (p > k) return false; // 检查词性顺序
    if (k == 2 || k == 3) p = 4; // 名词后进入动词阶段
    else p = k;
    return true;
}
```

### 2. 题解作者：liangbob（⭐⭐⭐⭐）
**核心亮点**：
- 显式记录名词位置，分割前后区域检查
- 单独处理单词语法，逻辑层次清晰

**关键逻辑**：
```cpp
// 遍历找名词位置
for(int i=1; i<=cnt; i++) 
    if(tp[i]==2) {mc++; idx=i;}

// 检查名词前是否全为形容词
for(int i=1; i<idx; i++)
    if(tp[i] != 1) return false;

// 检查名词后是否全为动词
for(int i=idx+1; i<=cnt; i++)
    if(tp[i] != 3) return false;
```

### 3. 题解作者：Cutler（⭐⭐⭐）
**创新点**：
- 使用位运算快速判断性别一致性 (`t&1`)
- 动态维护名词和动词标志位

**缺陷**：
- 词性顺序检查逻辑不够严谨，无法处理多个形容词后的名词

---

## 拓展练习
1. [CF22B Bargaining Table](https://www.luogu.com.cn/problem/CF22B) - 模拟+矩阵处理
2. [P1152 欢乐的跳](https://www.luogu.com.cn/problem/P1152) - 状态合法性验证
3. [P1012 [NOIP1998 提高组] 拼数](https://www.luogu.com.cn/problem/P1012) - 字符串排序与组合规则

---
处理用时：51.26秒
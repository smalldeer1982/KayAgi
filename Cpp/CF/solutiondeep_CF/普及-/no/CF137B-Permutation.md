# 题目信息

# Permutation

## 题目描述

"作业时间到啦"-- Polycarpus突然想道。当然，他要先做他最喜欢的科目IT（计算机~）Polycarpus奇迹般地在20分钟内做完了除了最后一题以外的所有题目--不过他在最后一题上卡住了。所以Polycarpus想让你帮帮他：

此题定义中，排列就是，在保证1-n个整数都被包含的情况下n个整数的顺序。现在你有一个随机的序列a1,a2,...an（一共n个整数），每个数>=1且<=5000。请帮Polycarpus求出他获得一个排列之前最少需要改变多少数（他不能删除或加入数）。所谓的一次改变就是指把序列中的一个数改掉，比如说换成另一个整数。

## 说明/提示

第一个样例就是一个“排列”，所以不用进行改变；

第二个样例中只需要一次改变（关于数字1的改变），所以答案是2；

第三个样例中我们可以把第二个数变成4，第三个数变成2.

## 样例 #1

### 输入

```
3
3 1 2
```

### 输出

```
0
```

## 样例 #2

### 输入

```
2
2 2
```

### 输出

```
1
```

## 样例 #3

### 输入

```
5
5 3 3 3 1
```

### 输出

```
2
```

# AI分析结果



# Permutation

## 题目描述

给定一个长度为 $n$ 的整数序列，每个元素取值范围为 $[1, 5000]$。求将该序列修改为包含 $1$ 到 $n$ 所有整数的排列所需的最小修改次数（每次修改可将任意元素替换为其他整数）。

## 算法分类
贪心

---

## 题解分析

### 关键思路总结
核心思路是统计 **1~n 中未出现的数字个数**。对于每个未出现的数字，必须通过修改重复元素或超出范围的元素来填补。最优解法通过维护一个标记数组，统计哪些数字已经出现，最终答案为 $n$ 减去已出现的有效数字数量。

### 高评分题解推荐

#### 题解1：_Spectator_（★★★★★）
**亮点**：  
- 直接统计缺失的数字数量，思路简洁高效  
- 时间复杂度 $O(n)$，空间复杂度 $O(n)$  
- 代码实现极简，仅需 10 行  

**核心代码**：
```cpp
int js[5005];
int main() {
    cin >> n;
    for (int i=1; i<=n; i++) 
        cin >> a, js[a]++; // 标记出现过的数字
    for (int i=1; i<=n; i++)
        ans += (js[i] == 0); // 统计未出现的数字
    cout << ans;
}
```

#### 题解2：封禁用户（★★★★）
**亮点**：  
- 反向统计无需修改的元素数量  
- 利用数组标记首次出现的有效元素  
- 代码清晰，逻辑直接  

**核心代码**：
```cpp
int a[10000];
int main() {
    cin >> n;
    for (int i=1; i<=n; i++) {
        cin >> s;
        if (a[s]==0 && s<=n) x++; // 统计有效元素
        a[s] = 1;
    }
    cout << n - x; // 总数 - 有效元素数
}
```

#### 题解3：Y_J_Y（★★★★）
**亮点**：  
- 边读入边处理，实时计数  
- 无需额外遍历统计结果  
- 空间优化，仅维护存在性标记  

**核心代码**：
```cpp
int vis[maxn];
int main() {
    for (int i=1; i<=n; i++) {
        a[i] = read();
        if (vis[a[i]] || a[i]>n) ans++; // 实时统计需修改的元素
        else vis[a[i]] = 1;
    }
    cout << ans;
}
```

---

## 拓展与练习
**类似题目推荐**：  
1. [CF977B - 字符串中最频二元组](https://www.luogu.com.cn/problem/CF977B)  
2. [P1059 - 明明的随机数](https://www.luogu.com.cn/problem/P1059)（去重与排序）  
3. [P1179 - 数字统计](https://www.luogu.com.cn/problem/P1179)（计数应用）  

**关键技巧**：  
- **标记数组法**：适用于元素存在性统计问题  
- **逆向思维**：将“需要修改”转化为“无需修改”的补集  
- **在线处理**：实时更新状态，减少二次遍历开销  

**心得摘录**：  
> “与其等待后续可能的填补，不如直接贪心标记有效元素”——通过实时处理避免复杂的状态管理。  
> “统计未出现的数字数量本质上是将问题转化为集合覆盖问题”——抓住数学本质简化逻辑。

---
处理用时：141.97秒
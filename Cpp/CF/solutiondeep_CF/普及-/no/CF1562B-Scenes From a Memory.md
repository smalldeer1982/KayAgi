# 题目信息

# Scenes From a Memory

## 题目描述

给出一个正整数 $n$，$n$ 中不包含 $0$。求最大删去多少位使其变成一个合数或 $1$。数据保证一定存在答案。

素数是指除 $1$ 和它本身外没有除数的数。合数是指一个有两个以上除数的数。$1$ 既不是质数也不是合数。

## 样例 #1

### 输入

```
7
3
237
5
44444
3
221
2
35
3
773
1
4
30
626221626221626221626221626221```

### 输出

```
2
27
1
4
1
1
2
35
2
77
1
4
1
6```

# AI分析结果

### 题目内容
# 记忆中的场景

## 题目描述
给出一个正整数 $n$，$n$ 中不包含 $0$。求最大删去多少位使其变成一个合数或 $1$。数据保证一定存在答案。

素数是指除 $1$ 和它本身外没有除数的数。合数是指一个有两个以上除数的数。$1$ 既不是质数也不是合数。

## 样例 #1
### 输入
```
7
3
237
5
44444
3
221
2
35
3
773
1
4
30
626221626221626221626221626221
```
### 输出
```
2
27
1
4
1
1
2
35
2
77
1
4
1
6
```
### 算法分类
数学

### 综合分析与结论
这些题解的核心思路都是通过分类讨论来找出满足条件的最小非质数。主要分类点在于：数字中是否包含1、4、6、8、9；是否包含2、5且不在首位；是否有两个相同数字2、3、5、7；以及剩余特殊情况如237、273、537、573等。各题解在具体实现和细节处理上略有不同，但本质都是基于这些分类进行判断。

### 所选的题解
- **作者：CSP_Sept (赞：4)**
  - **星级**：4星
  - **关键亮点**：先证明对于三位数的引理，再通过数学归纳法拓展到k位数，思路清晰，代码简洁明了。
  - **重点代码**：
```cpp
void Sol(){
    memset(a, 0, sizeof(a));
    memset(c, 0, sizeof(c));
    scanf("%d", &k);
    for(int i = 0 ; i < k ; i++)
        scanf("%1d", &a[i]);
    for(int i = 0 ; i < k ; i++){
        if(a[i] == 1 || (a[i]!= 2 && a[i] % 2 == 0) || a[i] == 9){
            puts("1");
            printf("%d\n", a[i]);
            return;
        }
    }
    for(int i = 1 ; i < k ; i++){
        if(a[i] == 2 || a[i] == 5){
            puts("2");
            printf("%d%d\n", a[i - 1], a[i]);
            return;
        }
    }
    for(int i = 0 ; i < k ; i++){
        if(c[a[i]]){
            puts("2");
            printf("%d%d\n", a[i], a[i]);
            return;
        }
        c[a[i]] = 1;
    }
    for(int i = 1 ; i < k ; i++){
        if((a[0] == 2 || a[0] == 5) && a[i] == 7){
            puts("2");
            printf("%d%d\n", a[0], a[i]);
            return;
        }
    }
}
```
  - **核心实现思想**：按顺序依次判断数字中是否有1、4、6、8、9；是否有2、5不在首位；是否有两个相同数字；是否首位是2或5且有一位是7，满足则输出对应结果。

- **作者：Jur_Cai (赞：3)**
  - **星级**：4星
  - **关键亮点**：简洁地证明取出的一位、两位数中必有符合要求的解，代码实现基于此证明，逻辑清晰。
  - **重点代码**：
```cpp
void solve() {
    for (int i=0;i<n;i++)
        if (s[i]=='1'||s[i]=='4'||s[i]=='6'||s[i]=='8'||s[i]=='9') {
            cout<<1<<endl<<s[i]<<endl;
            return;
        }
    for (int i=0;i<n;i++) {
        for (int j=i+1;j<n;j++) {
            if (!prime[(s[i]-'0')*10+(s[j]-'0')]) {
                cout<<2<<endl;
                cout<<s[i]<<s[j]<<endl;
                return ;
            }
        }
    }
}
```
  - **核心实现思想**：先判断数字中是否有1、4、6、8、9，有则输出；否则枚举所有两位数，判断是否为非质数，是则输出。

- **作者：uid_310801 (赞：2)**
  - **星级**：4星
  - **关键亮点**：对每种情况进行详细分析并给出正确性证明，代码实现与分析紧密结合，易于理解。
  - **重点代码**：
```cpp
signed main(){
    scanf("%lld",&t);
    while(t--){
        memset(ton,0,sizeof(ton));
        int flag=0;
        scanf("%lld",&k);
        cin>>c;
        for(int i=0;i<k;i++){
            ton[c[i]-'0']++;
            if(c[i]=='1'||c[i]=='4'||c[i]=='6'||c[i]=='8'||c[i]=='9'){
                printf("1\n%d\n",int(c[i]-'0'));
                flag=1;
                break;
            }
        }
        if(flag==1) continue;
        for(int i=0;i<k;i++){
            if((c[i]=='2'||c[i]=='5')&&i!=0){
                printf("2\n%c%c\n",c[i-1],c[i]);
                flag=1;
                break;
            }
            if((c[i]=='3'||c[i]=='7')&&ton[c[i]-'0']>=2){
                printf("2\n%c%c\n",c[i],c[i]);
                flag=1;
                break;
            }
        }
        if(flag==0){
            if(c[0]=='2')
                printf("2\n27\n");
            else
                printf("2\n57\n");
        }
    }
    return 0;
}
```
  - **核心实现思想**：先判断是否有1、4、6、8、9；再判断是否有2或5不在首位，或者是否有两个3或7；最后根据首位是2还是5输出27或57。

### 最优关键思路或技巧
通过对数字特征进行分类讨论，利用数学性质（如能被2、3、5整除的数的特征，11倍数的特征等）来快速判断并找出满足条件的非质数。这种分类讨论的思维方式是解决此类问题的关键，同时结合对特殊数字组合的分析，能有效简化问题。

### 可拓展之处
同类型题可涉及更多关于质数、合数性质的运用，以及在不同约束条件下对数字的操作。类似算法套路是先对给定数据进行分类，根据不同类别利用相应数学性质进行处理。

### 洛谷题目推荐
- [P1217 回文质数 Prime Palindromes](https://www.luogu.com.cn/problem/P1217)：结合质数与回文数的性质，需运用筛选质数及判断回文数的方法。
- [P2681 求和](https://www.luogu.com.cn/problem/P2681)：涉及质数判断及对符合条件数字的求和，需掌握质数判定方法及循环处理数据。
- [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)：重点考察线性筛素数的算法，对理解质数相关算法有帮助。

### 个人心得摘录与总结
作者CSP_Sept提到赛时这题交了5发直接 -4 ，59min时通过，只拿了514分。主要问题可能在于对题目的细节理解不够深入或者代码实现存在一些边界问题，反映出做题时仔细审题和全面测试的重要性。 

---
处理用时：56.22秒
# 题目信息

# Cardboard for Pictures

## 题目描述

Mircea有n张照片。第i张照片是一个边长为si厘米的正方形。

他将每张照片装在一个正方形的纸板上，使得每张照片的四周都有w厘米的纸板边框。总共，他使用了c平方厘米的纸板。根据照片的尺寸和c的值，你能找出w的值吗？
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1850E/8be93a707152c424940afd3c547aecafb34ece9f.png)
c=50=5²+4²+3²，所以w = 1 是本题目的答案。请注意，纸板的一角会出现在每张图片的后面，而不仅仅是边框上。

## 说明/提示

```
在第一个测试用例中，根据题目给出的例子
```
我们需要使用1张照片，因此可以选择任意宽度的边框w。

在第二个测试用例中，假设我们选择的宽度w为22，那么每张照片需要的纸板面积为(2w+6)^2=10^2=100平方厘米。
```
在第三个测试用例中，假设我们选择的宽度w为44，那么每张照片需要的纸板面积为
```
(2w+2)^2×5=10^2×5=100×5=500平方厘米。

## 样例 #1

### 输入

```
10
3 50
3 2 1
1 100
6
5 500
2 2 2 2 2
2 365
3 4
2 469077255466389
10000 2023
10 635472106413848880
9181 4243 7777 1859 2017 4397 14 9390 2245 7225
7 176345687772781240
9202 9407 9229 6257 7743 5738 7966
14 865563946464579627
3654 5483 1657 7571 1639 9815 122 9468 3079 2666 5498 4540 7861 5384
19 977162053008871403
9169 9520 9209 9013 9300 9843 9933 9454 9960 9167 9964 9701 9251 9404 9462 9277 9661 9164 9161
18 886531871815571953
2609 10 5098 9591 949 8485 6385 4586 1064 5412 6564 8460 2245 6552 5089 8353 3803 3764```

### 输出

```
1
2
4
5
7654321
126040443
79356352
124321725
113385729
110961227```

# AI分析结果

### 题目翻译
Mircea 有 n 张照片。第 i 张照片是一个边长为 si 厘米的正方形。

他将每张照片装在一个正方形的纸板上，使得每张照片的四周都有 w 厘米的纸板边框。总共，他使用了 c 平方厘米的纸板。根据照片的尺寸和 c 的值，你能找出 w 的值吗？
![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1850E/8be93a707152c424940afd3c547aecafb34ece9f.png)
c = 50 = 5² + 4² + 3²，所以 w = 1 是本题目的答案。请注意，纸板的一角会出现在每张图片的后面，而不仅仅是边框上。

### 算法分类
数学、二分

### 综合分析与结论
这些题解主要围绕两种思路展开：数学推导和二分查找。

**数学推导思路**：通过对题目中的等式 $\sum_{i = 1}^{n}(a_i + 2w)^2 = c$ 进行展开和化简，得到关于 $w$ 的一元二次方程，再利用求根公式求解。这种方法的优点是直接得出结果，时间复杂度低，但需要较强的数学推导能力，且在实现时要注意数据范围，避免溢出。

**二分查找思路**：根据边框宽度 $w$ 与总面积的单调递增关系，利用二分查找来确定 $w$ 的值。每次二分 $w$，计算总面积并与 $c$ 比较，调整二分区间。该方法的优点是思路简单，实现相对容易，但时间复杂度为 $O(t \log r)$，其中 $r$ 为二分的右边界。

### 所选题解
- **Andy_Li（4星）**
  - **关键亮点**：思路清晰，通过详细的数学推导得出最终公式，代码简洁明了。
  - **个人心得**：无

### 重点代码
```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
        ll n,c;
        cin>>n>>c;
        ll sq=0,sum=0;
        for(int i=1;i<=n;i++)
        {
            ll x;
            cin>>x;
            sq+=x*x;
            sum+=x;
        }
        cout<<(ll)floor((sqrt((c-sq)/n+(sum*sum)/(n*n))-sum/n)/2)<<endl; 
    }
    return 0;
}  
```
**核心实现思想**：先计算 $\sum_{i = 1}^{n}a_i^2$ 和 $\sum_{i = 1}^{n}a_i$，分别记为 `sq` 和 `sum`，然后代入推导得到的公式 $w = \frac{\sqrt{ \frac{c - sq}{n} + (\frac{sum}{n})^2} - \frac{sum}{n}}{2}$ 计算 $w$ 的值。

### 关键思路或技巧
- **数学推导**：通过对等式进行展开和化简，将问题转化为一元二次方程求解，避免了暴力枚举的高时间复杂度。
- **二分查找**：利用单调性，不断缩小可能的答案范围，提高查找效率。
- **数据类型处理**：由于数据范围较大，部分题解使用 `__int128` 或在计算过程中进行适当的变形，以避免溢出。

### 拓展思路
同类型题目可能会有不同的几何图形或条件变化，但核心思路仍然是根据已知条件列出方程，然后通过数学方法或二分查找求解。例如，可能会将正方形照片改为长方形，或者增加更多的约束条件。

### 推荐题目
- [P1024 一元三次方程求解](https://www.luogu.com.cn/problem/P1024)：同样涉及方程求解，需要运用数学方法和二分查找。
- [P1873 砍树](https://www.luogu.com.cn/problem/P1873)：利用二分查找解决具有单调性的问题。
- [P2678 跳石头](https://www.luogu.com.cn/problem/P2678)：也是二分查找的经典应用，通过二分答案来确定最优解。

### 个人心得摘录与总结
- **_Only_this**：一道二分的水题竟然调了 40 分钟，提醒我们在实现二分查找时要注意细节，避免出现越界等问题。
- **JuRuoOIer**：这么个小破题赛时调了一个多点，以至于水题 F&G 没空做了，说明在比赛中要合理分配时间，遇到问题要冷静分析，避免在简单问题上花费过多时间。

---
处理用时：32.39秒
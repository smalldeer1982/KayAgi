# 题目信息

# Funky Numbers

## 题目描述

今年最时髦的数字是三角数（即可表示为 $\frac{k(k+1)}{2}$ 的数字，其中 $k$ 是正整数），而今年最酷的数字是那些可表示为两个三角数之和的数字。

著名的嬉皮士安德烈崇拜一切酷而时髦的东西。但不幸的是，他不擅长数学。给定一个数字 $n$，请帮助他确定这个数字是否能够由两个三角形数的和来表示。（两个三角数可以相同）

## 样例 #1

### 输入

```
256
```

### 输出

```
YES
```

## 样例 #2

### 输入

```
512
```

### 输出

```
NO
```

# AI分析结果

### 题目内容
# 时髦数字

## 题目描述
今年最时髦的数字是三角数（即可表示为 $\frac{k(k + 1)}{2}$ 的数字，其中 $k$ 是正整数），而今年最酷的数字是那些可表示为两个三角数之和的数字。
著名的嬉皮士安德烈崇拜一切酷而时髦的东西。但不幸的是，他不擅长数学。给定一个数字 $n$，请帮助他确定这个数字是否能够由两个三角形数的和来表示。（两个三角数可以相同）

## 样例 #1
### 输入
```
256
```
### 输出
```
YES
```

## 样例 #2
### 输入
```
512
```
### 输出
```
NO
```

### 算法分类
数学、二分

### 综合分析与结论
这些题解主要围绕判断一个数能否表示为两个三角数之和展开。部分题解采用二分法，通过枚举一个三角数对应的 $k$ 值（设为 $k1$），再二分查找另一个三角数对应的 $k$ 值（设为 $k2$），利用 $2n = k1(k1 + 1) + k2(k2 + 1)$ 这个等式来判断。另一题解则是通过数学推导，将问题转化为判断 $8n + 2$ 是否能表示为两个奇数的平方和。还有一题解通过推导公式直接求出 $k2$ 判断其是否为整数，时间复杂度达到 $O(n)$。

### 所选的题解
- **作者：Eaoci (5星)**
  - **关键亮点**：通过数学推导得出直接求 $k2$ 的公式，时间复杂度为 $O(n)$，相比其他 $O(nlogn)$ 的做法更优，代码简洁明了。
  - **重点代码**：
```cpp
#include<iostream>
#include<cmath>
using namespace std;
long long n,ans,m;
int main(){
    cin>>n;
    m=floor((sqrt(n*2+0.25)-0.5));//如上文高斯求和求范围 
    for(int i=1;i<=m;i++){
        long long cnt=n-i*(i+1)/2;//求n-k1 
        long long cntt=floor((sqrt(cnt*2+0.25)-0.5));//求k2 
        if(cntt*(cntt+1)/2==cnt&&cnt!=0){//显然两个三角数都不可为零 
            cout<<"YES";
            return 0;
        }
    }
    cout<<"NO";//全都不是即没有 
    return 0;
}
```
  - **核心实现思想**：先通过推导公式得出 $k2 = \sqrt{2(n - k1)+ \frac{1}{4}}-\frac{1}{2}$，然后枚举 $k1$，计算出 $n - k1$ 对应的 $k2$，判断 $k2$ 是否为整数且两个三角数不为零。

- **作者：Insouciant21 (4星)**
  - **关键亮点**：通过巧妙的数学配方，将判断 $n$ 是否为两个三角数之和转化为判断 $8n + 2$ 是否为两个奇数的平方和，提供了一种新颖的解题思路。
  - **重点代码**：
```cpp
#include <bits/stdc++.h>

using namespace std;

long long num;

int main() {
    scanf("%lld", &num);
    long long n = 8 * num + 2;
    int sqt = sqrt(n);
    for (long long i = 3; i <= sqt; i += 2) { // 最小可用奇数为3
        long long p = n - i * i;
        double c = sqrt(p); 
        if (p > 1 && c == int(c) && int(c) % 2 == 1) { // 2k + 1 > 1
            puts("YES");
            return 0;
        }
    }
    puts("NO");
    return 0;
}
```
  - **核心实现思想**：对三角形数公式进行配方得到 $8a + 1 = (2k + 1)^2$，进而推出若 $n$ 是两个三角数之和，则 $8n + 2$ 是两个奇数的平方和，通过枚举奇数判断是否满足条件。

### 最优关键思路或技巧
Eaoci 的题解通过直接推导公式求出另一个三角数对应的 $k$ 值，避免了二分查找带来的 $logn$ 时间复杂度，优化了算法。Insouciant21 的题解则是通过巧妙的数学变换，将原问题转化为另一个等价的判断问题，提供了独特的解题视角。

### 拓展与类似题目
此类题目主要考察对数学公式的推导和应用，以及优化算法的能力。类似的题目套路包括将原问题通过数学变换转化为更易求解的形式，或者通过推导公式直接计算避免复杂的搜索。
洛谷相似题目：
- P1028 [数的计算](https://www.luogu.com.cn/problem/P1028)，考察递推和数学思维。
- P1147 连续自然数和，需要通过数学推导和枚举解决问题。
- P2669 [金币](https://www.luogu.com.cn/problem/P2669)，涉及数学规律的发现与应用。 

---
处理用时：36.65秒
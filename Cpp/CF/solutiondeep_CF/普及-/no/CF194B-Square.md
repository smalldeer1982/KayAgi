# 题目信息

# Square

## 题目描述

一张纸上画着一个正方形，正方形的边等于 $n$ 米。约翰·多伊在广场周围画十字。约翰在广场左下角画第一个十字。然后约翰沿着正方形的周长按顺时针方向移动（先向上，然后向右，然后向下，然后向左，依此类推）。每次他走 $n+1$ 米时，他都会画一个十字（详见图片）。

只有当广场左下角有两个十字时，他才会停下来。约翰将画几个十字？

图中显示了约翰为一个 $4$ 边的正方形画十字的顺序。左下角有两个十字架。约翰画了 $17$ 个十字架。

## 说明/提示

对于所有数据，$1\leq t \leq 10^4$，$1 \leq n_i \leq 10^9$。
请不要使用 `%lld` 来读取或输出 C++ 中的64位整数，最好使用`cin`、`cout`或者`%I64d` 说明符。

Translated by Maxwang.

## 样例 #1

### 输入

```
3
4 8 100
```

### 输出

```
17
33
401
```

# AI分析结果

### 题目内容
# Square

## 题目描述
一张纸上画着一个正方形，正方形的边等于 $n$ 米。约翰·多伊在广场周围画十字。约翰在广场左下角画第一个十字。然后约翰沿着正方形的周长按顺时针方向移动（先向上，然后向右，然后向下，然后向左，依此类推）。每次他走 $n + 1$ 米时，他都会画一个十字（详见图片）。
只有当广场左下角有两个十字时，他才会停下来。约翰将画几个十字？
图中显示了约翰为一个 $4$ 边的正方形画十字的顺序。左下角有两个十字架。约翰画了 $17$ 个十字架。

## 说明/提示
对于所有数据，$1\leq t \leq 10^4$，$1 \leq n_i \leq 10^9$。
请不要使用 `%lld` 来读取或输出 C++ 中的64位整数，最好使用`cin`、`cout`或者`%I64d` 说明符。

Translated by Maxwang.

## 样例 #1
### 输入
```
3
4 8 100
```
### 输出
```
17
33
401
```

### 算法分类
数学

### 综合分析与结论
这几道题解主要围绕寻找画十字数量与正方形边长 $n$ 的关系展开。有的题解通过找规律得出结论，有的从数学原理推导。思路上，囧仙从数学原理出发，通过同余方程 $m\times (n + 1)\equiv 0\pmod{4\times n}$ 来求解；xukuan 通过暴力打标结合瞪眼法找规律；Mine_King 对 $n$ 按模 4 分类讨论求解同余方程；btng_smith666 手动模拟列表找规律；封禁用户根据 $n$ 的奇偶性及 $(n - 1)/2$ 的奇偶性找规律。算法要点在于如何通过不同方式确定画十字数量与 $n$ 的关系。解决难点在于准确找到规律或从数学原理严谨推导。

### 所选的题解
- **囧仙（5星）**
    - **关键亮点**：从数学原理出发，通过建立同余方程，利用数论知识，严谨地推导出根据 $n + 1$ 与 4 的关系来确定结果，思路清晰，方法具有通用性和严谨性。
    - **重点代码及核心实现思想**：
```cpp
dn(qread(),1,T){
    n=qread();
    if((n+1)%4==0) k=(n+1)/4; else
    if((n+1)%2==0) k=(n+1)/2; else
    k=n+1; printf("%lld\n",((LL)k*4*n)/(n+1)+1);
}
```
核心实现思想是根据 $n + 1$ 与 4 的不同关系确定 $k$ 值，进而计算出画十字的数量。
- **Mine_King（4星）**
    - **关键亮点**：对 $n$ 按模 4 进行分类讨论，求解同余方程得出不同情况下画十字数量的表达式，逻辑清晰，推导过程详细。
    - **重点代码及核心实现思想**：
```cpp
switch(n%4)
{
    case 0:printf("%lld\n",4*n+1);break;
    case 1:printf("%lld\n",2*n+1);break;
    case 2:printf("%lld\n",4*n+1);break;
    case 3:printf("%lld\n",n+1);break;
}
```
核心实现思想是根据 $n$ 模 4 的不同结果，直接输出对应的画十字数量。
- **封禁用户（4星）**
    - **关键亮点**：从 $n$ 的奇偶性及 $(n - 1)/2$ 的奇偶性入手找规律，思路独特，代码简洁明了。
    - **重点代码及核心实现思想**：
```cpp
if(n%2==0)cout<<4*n+1;
else if(n%4==1)cout<<2*n+1;
else cout<<n+1;
```
核心实现思想是根据 $n$ 的奇偶性及 $n$ 模 4 的结果输出画十字数量。

### 最优关键思路或技巧
从数学原理出发建立同余方程求解更为严谨通用，如囧仙的题解。通过分析同余方程中各数的关系，利用数论知识解决问题，这种思维方式在解决类似周期性、循环性数学问题时很有效。

### 拓展与举一反三
此类题目属于数学规律探索类，类似的题目常涉及到周期性运动、余数相关问题。例如在循环路径上按特定步长移动，求回到起点的次数等。解题时可尝试从数学原理推导或通过列举找规律。

### 洛谷相似题目
- [P1085 不高兴的津津](https://www.luogu.com.cn/problem/P1085)：通过分析每天的时间安排，找出满足特定条件的天数，涉及简单的数学分析。
- [P1909 买铅笔](https://www.luogu.com.cn/problem/P1909)：根据不同包装铅笔的价格和数量，结合所需铅笔总数，选择最优购买方案，考查数学计算与比较。
- [P1147 连续自然数和](https://www.luogu.com.cn/problem/P1147)：通过数学方法找出给定数可表示为哪些连续自然数之和，考查数学推理与枚举。 

---
处理用时：40.08秒
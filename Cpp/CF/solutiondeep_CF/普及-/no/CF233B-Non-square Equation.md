# 题目信息

# Non-square Equation

## 题目描述

让我们看看如下等式：

$x^2+s(x)×x-n=0$ ，其中$x$ ，$n$ 是正整数，$s(x)$ 是函数，相当于求十进制中$x$ 的位数之和。

给出一个整数$n$ ，找到$x$ 的最小正整数根，或确定没有这样的根。

## 说明/提示

在第一组数据中，$x=1$ 是最小根。因为$s(1)=1$ 且$1^2+1×1-2=0$ 

在第二组数据中，$x=10$ 是最小根。因为$s(10)=1+0=1$ 且$10^2+1×10-110=0$ 

在第三组数据中，方程无根。

感谢@二元长天笑 提供的翻译

## 样例 #1

### 输入

```
2
```

### 输出

```
1
```

## 样例 #2

### 输入

```
110
```

### 输出

```
10
```

## 样例 #3

### 输入

```
4
```

### 输出

```
-1
```

# AI分析结果

### 题目内容
# Non-square Equation

## 题目描述

让我们看看如下等式：

$x^2 + s(x)×x - n = 0$ ，其中 $x$ ，$n$ 是正整数，$s(x)$ 是函数，相当于求十进制中 $x$ 的位数之和。

给出一个整数 $n$ ，找到 $x$ 的最小正整数根，或确定没有这样的根。

## 说明/提示

在第一组数据中，$x = 1$ 是最小根。因为 $s(1) = 1$ 且 $1^2 + 1×1 - 2 = 0$ 

在第二组数据中，$x = 10$ 是最小根。因为 $s(10) = 1 + 0 = 1$ 且 $10^2 + 1×10 - 110 = 0$ 

在第三组数据中，方程无根。

感谢@二元长天笑 提供的翻译

## 样例 #1

### 输入

```
2
```

### 输出

```
1
```

## 样例 #2

### 输入

```
110
```

### 输出

```
10
```

## 样例 #3

### 输入

```
4
```

### 输出

```
-1
```

### 算法分类
数学

### 综合分析与结论
所有题解思路本质一致，都是先对给定方程 $x^2 + s(x)×x - n = 0$ 进行变形得到 $x×(x + s(x)) = n$ 。基于此，利用 $x$ 和 $x + s(x)$ 都是正整数且 $x < x + s(x)$ ，得出 $x \leq \sqrt{n}$ 。再结合 $n$ 的数据范围 $1 \leq n \leq 10^{18}$ 推出 $x < 10^9$ ，进而得到 $s(x)$ 的最大值为 $81$ （当 $x = 999,999,999$ 时），最终确定 $x$ 的枚举范围是 $[\max(1,\sqrt{n} - 81),\sqrt{n}]$ ，在该范围内枚举 $x$ 判断是否为方程的解。各题解的差异主要体现在代码实现细节和表述清晰度上。

### 所选的题解
- **作者：BurningEnderDragon (赞：6，5星)**
  - **关键亮点**：思路清晰，先详细推导得出 $x$ 的取值范围，再给出完整的C++ 代码实现，代码结构清晰，各功能模块（如计算 $s(x)$ 的函数、检查方程是否成立的函数）划分明确。
  - **重点代码**：
```cpp
long long s(long long x)
{
    long long ans = 0;
    while (x)
    {
        ans += (x % 10);
        x /= 10;
    }
    return ans;
}

long long check(const long long x)
{
    return x * x + s(x) * x;
}

int main()
{
    cin >> n;
    for (int i = max(sqrt(n) - 81, 1); i <= sqrt(n); ++i)
    {
        if (check(i) == n)
        {
            cout << i << endl;
            return 0;
        }
    }
    cout << -1 << endl;
    return 0;
}
```
  - **核心实现思想**：`s` 函数通过不断取余和整除操作计算 $x$ 的各位数字之和。`check` 函数根据方程计算给定 $x$ 对应的表达式值。主函数在确定的 $x$ 取值范围内枚举 $x$ ，调用 `check` 函数判断是否为方程的解，若是则输出并结束程序，否则输出 `-1`。
- **作者：lrx___ (赞：4，4星)**
  - **关键亮点**：先简述题意和思路，思路推导简洁明了，虽给出的是Python代码，但对代码关键部分进行了解释，方便理解。
  - **重点代码**：
```python
n = int(input())
for i in range(max(int(n ** 0.5 - 81), 1), int(n ** 0.5 + 1)):
    if i * (i + sum(map(int, list(str(i))))) == n:
        print(i)
        exit()
print(-1)
```
  - **核心实现思想**：通过 `range` 函数在确定的 $x$ 取值范围内枚举 $x$ ，利用 `sum(map(int, list(str(i))))` 计算 $s(x)$ ，判断方程是否成立，成立则输出 $x$ 并结束程序，否则输出 `-1`。
- **作者：lbh666 (赞：1，4星)**
  - **关键亮点**：对思路的讲解非常细致，从方程变形开始，逐步推导 $x$ 的取值范围，对每一步推导都有详细说明，代码实现中对判断 $x$ 是否合法等功能进行了函数封装，增强了代码可读性。
  - **重点代码**：
```cpp
ll wh(ll n) { //计算各个位上的和 
    ll tot = 0;
    while (n) {
        tot += n % 10;
        n /= 10;
    }
    return tot;
}

bool pd(ll x) { //判断每个x是否合法 
    if (x * x + wh(x) * x == n)return 1;
    return 0;
}

int main() {
    scanf("%lld", &n);
    for (int i = max(1, (int)(sqrt(n) - 81)); i <= sqrt(n); ++i) {
        if (pd(i)) {
            flag = 1;
            ans = i;
            break;
        }
    }
    if (flag)printf("%lld", ans);
    else printf("-1");
    return 0;
}
```
  - **核心实现思想**：`wh` 函数计算 $x$ 的各位数字之和，`pd` 函数判断给定 $x$ 是否为方程的解。主函数在 $x$ 取值范围内枚举 $x$ ，调用 `pd` 函数判断，根据结果输出相应值。

### 最优关键思路或技巧
通过对方程进行数学变形和对数据范围的分析，巧妙地缩小了枚举范围，将原本可能的大范围枚举优化到最多枚举81次，避免了暴力枚举导致的超时问题，这是解决本题的关键技巧。同时，在代码实现上，将计算 $s(x)$ 和判断方程是否成立等功能封装成函数，提高了代码的可读性和可维护性。

### 可拓展之处
此类题目属于数学方程求解结合数据范围优化枚举的类型。类似套路是对给定方程进行数学推导，利用数学性质和数据范围限制来缩小搜索空间，从而高效求解。例如在一些数论相关的方程求解问题中，通过分析方程特点、数的性质（如奇偶性、整除性等）来优化枚举过程。

### 相似知识点洛谷题目
- [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)：通过对数字生成规则的分析，利用递推或记忆化搜索求解，涉及对数字规律的探索和算法优化。
- [P1463 [POI2002][HAOI2007]反素数](https://www.luogu.com.cn/problem/P1463)：需要深入理解数的因数个数等数学性质，结合搜索和剪枝技巧求解，与本题一样需要对数学性质进行分析和运用。
- [P2615 [NOIP2015 提高组] 神奇的幻方](https://www.luogu.com.cn/problem/P2615)：根据幻方的数学特性，通过模拟和数学规律来构造幻方，锻炼对数学规律的应用和代码实现能力。 

---
处理用时：47.77秒
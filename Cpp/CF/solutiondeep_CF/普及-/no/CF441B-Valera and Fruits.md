# 题目信息

# Valera and Fruits

## 题目描述

Valera很爱他的花园，因为那里生长着n棵果树。

今年他将迎来一场大丰收！第i棵树上会结出bi个果实，它们将在第ai天全部成熟。不幸的是，这些果子将很快枯萎，因此Valera只能在第ai天和第ai+1天摘下它们。（所有不在指定的两天内摘下的果子，都不可食用）

Valera的动作不是很快，但他也有自己的优势。他已经准备好了，以保证每天都可以工作。一天，Valera最多可以摘下v个果子，这些果子有可能是同一棵树上的，也有可能不是。那么，在合理安排日程表的情况下，Valera最多可以收获多少个果子？

## 样例 #1

### 输入

```
2 3
1 5
2 3
```

### 输出

```
8
```

## 样例 #2

### 输入

```
5 10
3 20
2 20
1 20
4 20
5 20
```

### 输出

```
60
```

# AI分析结果

### 题目分类
贪心

### 综合分析与结论
这些题解均围绕贪心算法展开，核心思路是优先处理即将过期的果实，以达到收获果实数量最大化。各题解在实现方式上略有不同，有的使用桶来存储每天的果实数量，有的使用结构体存储每棵树的信息并排序处理。

中缀自动机的题解通过桶存储果实数量，按天枚举，先处理前一天剩余果实，再处理当天果实，逻辑清晰。xiezihanAKIOI 的题解将果实按成熟时间排序，枚举每个果实，判断当天和第二天能否采摘。OoXiao_QioO 的题解将过程放在时间轴上模拟，判断每天能否击毁陨石（采摘果实）。Need_No_Name 的题解同样使用桶存储果实，记录前一天剩余果实，优先处理。221B 的题解使用结构体存储果树信息并排序，按天枚举，判断果树是否在采摘时间内。

### 通用建议与扩展思路
在实现贪心算法时，要明确贪心策略，即优先处理即将过期的果实。可以使用桶或结构体来存储相关信息，方便处理。对于类似的资源分配问题，都可以考虑贪心算法，根据资源的时效性等特性制定合理的贪心策略。

### 重点代码
```cpp
// 中缀自动机的题解核心代码
for(int i=0;i<=maxn+1;i++){
    if(i==0){
        if(sum[i]<=k){
            ans+=sum[i];
            sum[i]=0;
        }
        else{
            ans+=k;
            sum[i]-=k;
        }
    }
    else{
        if(sum[i-1]<=k){
            ans+=sum[i-1];
            tmp=sum[i-1];
            sum[i-1]=0;
        }
        else{
            ans+=k;
            tmp=k;
            sum[i-1]-=k;
            continue;
        }
        if(sum[i]<=k-tmp)
            ans+=sum[i];
            sum[i]=0;
        else{
            ans+=k-tmp;
            sum[i]-=(k-tmp);
        }
    }
}
```
核心实现思想：按天枚举，先处理前一天剩余果实，再处理当天果实，根据当天可采摘数量和果实数量的关系更新答案和剩余果实数量。

### 相似洛谷题目
1. P1223 排队接水：根据每个人接水所需时间进行排序，贪心选择接水顺序，使总的等待时间最短。
2. P1094 纪念品分组：将纪念品按价格排序，贪心组合，使分组数最少。
3. P2240 部分背包问题：根据物品的单位价值进行排序，贪心选择单位价值高的物品，使背包内物品总价值最大。

### 个人心得摘录与总结
- xiezihanAKIOI：提到这道题和挖土机杯重了，自己挖土机杯 AC 的代码调了半天才过，感慨当时像刚学编程的萌新。总结：做题过程中可能会遇到代码调试困难的情况，随着学习和经验积累，编程能力会不断提高。
- OoXiao_QioO：提到和月赛撞题了。总结：竞赛中可能会出现题目重复的情况，平时要多积累解题经验。
- 221B：表示自己是蒟蒻来水一发题解，欢迎大家指出错误和提问。总结：学习过程中要保持谦虚的态度，积极与他人交流，共同进步。 

---
处理用时：21.43秒
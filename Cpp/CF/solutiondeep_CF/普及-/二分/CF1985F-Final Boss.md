# 题目信息

# Final Boss

## 题目描述

你正在面对你最喜欢的游戏中的最终  BOSS。敌人的生命值是 $h$。你的角色有 $ n $ 攻击。第 i 次攻击会对 BOSS 造成 $ a_i $ 伤害，但冷却时间为 $ c_i $ 个回合，也就是说，如果你当前的回合为 $ x $，那么下一次可以使用该攻击的时间为 $ x + c_i $ 个回合。 每个回合，你都可以一次性使用当前未冷却的所有攻击。如果所有攻击都处于冷却状态，则本回合什么也不做，跳到下一回合。

最初，所有攻击都不在冷却时间内。要花多少回合才能打败 BOSS？当 BOSS 的生命值为 $ 0 $ 或更低时，它就被打败了。

## 样例 #1

### 输入

```
8
3 2
2 1
2 1
5 2
2 1
2 1
50 3
5 6 7
5 6 7
50 3
2 2 2
3 3 3
90000 2
200000 200000
1 1
100000 1
1
200000
6 7
3 2 3 2 3 1 2
6 5 9 5 10 7 7
21 6
1 1 1 1 1 1
5 5 8 10 7 6```

### 输出

```
1
3
15
25
1
19999800001
1
21```

# AI分析结果

### 题目重写
你正在面对你最喜欢的游戏中的最终 BOSS。敌人的生命值是 $h$。你的角色有 $ n $ 次攻击。第 i 次攻击会对 BOSS 造成 $ a_i $ 伤害，但冷却时间为 $ c_i $ 个回合，也就是说，如果你当前的回合为 $ x $，那么下一次可以使用该攻击的时间为 $ x + c_i $ 个回合。每个回合，你都可以一次性使用当前未冷却的所有攻击。如果所有攻击都处于冷却状态，则本回合什么也不做，跳到下一回合。

最初，所有攻击都不在冷却时间内。要花多少回合才能打败 BOSS？当 BOSS 的生命值为 $ 0 $ 或更低时，它就被打败了。

### 题解分析与结论
1. **BrotherCall 的题解（5星）**
   - **关键亮点**：使用二分法直接计算每个技能在给定回合数内的使用次数和总伤害，避免了复杂的模拟过程。代码简洁高效，且通过提前退出循环避免了溢出问题。
   - **核心代码**：
     ```cpp
     int l = 1, r = 1e12;
     int ans = 1;
     while(l <= r) {
         int mid = l + r >> 1;
         int sum = 0;
         for(int i = 1; i <= m; i++) {
             int cs = (mid - 1) / b[i] + 1;
             sum += cs * a[i];
             if(sum >= n) break;
         }
         if(sum >= n) {
             ans = mid;
             r = mid - 1;
         } else l = mid + 1;
     }
     ```
   - **个人心得**：作者提到因为未处理溢出问题而失败，提醒我们在计算过程中要注意数据范围。

2. **ZhaoV1 的题解（4星）**
   - **关键亮点**：提供了两种解法，优先队列和二分法。优先队列解法直观但复杂度较高，二分法解法效率更高且代码简洁。
   - **核心代码**：
     ```cpp
     unsigned long long sum = 0;
     for(int i = 1; i <= n; i++) {
         sum += ((mid - 1) / c[i] + 1) * a[i];
     }
     return sum >= h;
     ```
   - **个人心得**：作者通过两种方法的对比，展示了不同思路的优缺点，帮助读者更好地理解问题。

3. **YZMX 的题解（4星）**
   - **关键亮点**：使用二分法计算每个技能的使用次数，并通过数学公式简化了计算过程。代码清晰且易于理解。
   - **核心代码**：
     ```cpp
     int res = 0;
     for(int i = 1; i <= n; i++) {
         res += ((x - 1 + e[i].c) / e[i].c) * e[i].a;
     }
     return res >= h;
     ```
   - **个人心得**：作者强调了使用 `unsigned long long` 的重要性，避免溢出问题。

### 最优关键思路与技巧
- **二分法**：通过二分法确定最小回合数，计算每个技能在给定回合数内的使用次数和总伤害，避免了复杂的模拟过程。
- **提前退出循环**：在计算总伤害时，如果已经超过 BOSS 的生命值，可以提前退出循环，提高效率。
- **数据范围处理**：使用 `unsigned long long` 或提前判断溢出，确保计算过程中的数据安全。

### 可拓展之处
- **同类型题**：类似的问题可以扩展到多个技能或多个目标的情况，或者技能之间有依赖关系的情况。
- **算法套路**：二分法在处理单调性问题时非常有效，可以应用于其他需要确定最小或最大值的场景。

### 推荐题目
1. [P3382 【模板】三分法](https://www.luogu.com.cn/problem/P3382)
2. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)
3. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)

---
处理用时：26.79秒
# 题目信息

# Transfusion

## 题目描述

现给定一个数组 $a$ 和 数组的长度 $n$。规定在一次操作中，你可以从 $2$ 到 $n-1$ 中选取任意一个数 $i$，完成下面的一个操作：
- 令 $a_{i-1}$ 减 $1$，令 $a_{i+1}$  加 $1$。
- 令 $a_{i-1}$ 加 $1$，令 $a_{i+1}$  减 $1$。

**每次操作都要保证得到的数为非负数。**
在进行若干次操作后，能否使 $a$ 的每个数都相等？

## 样例 #1

### 输入

```
8
3
3 2 1
3
1 1 3
4
1 2 5 4
4
1 6 6 1
5
6 2 1 4 2
4
1 4 2 1
5
3 1 2 1 3
3
2 4 2```

### 输出

```
YES
NO
YES
NO
YES
NO
NO
NO```

# AI分析结果

### 题目内容重写

#### 题目描述

现给定一个数组 $a$ 和数组的长度 $n$。规定在一次操作中，你可以从 $2$ 到 $n-1$ 中选取任意一个数 $i$，完成下面的一个操作：
- 令 $a_{i-1}$ 减 $1$，令 $a_{i+1}$ 加 $1$。
- 令 $a_{i-1}$ 加 $1$，令 $a_{i+1}$ 减 $1$。

**每次操作都要保证得到的数为非负数。**
在进行若干次操作后，能否使 $a$ 的每个数都相等？

#### 样例

##### 输入
```
8
3
3 2 1
3
1 1 3
4
1 2 5 4
4
1 6 6 1
5
6 2 1 4 2
4
1 4 2 1
5
3 1 2 1 3
3
2 4 2
```

##### 输出
```
YES
NO
YES
NO
YES
NO
NO
NO
```

### 题解分析与结论

#### 综合分析与结论

所有题解的核心思路都是基于**奇偶位分离**的思想，即通过分析奇数位和偶数位的元素总和及其平均值，来判断是否可以通过操作使所有元素相等。具体来说，关键在于以下几点：

1. **奇偶位分离**：将数组中的元素按奇数位和偶数位分开，分别计算它们的总和和平均值。
2. **平均值相等**：奇数位和偶数位的平均值必须相等，且都为整数，才能通过操作使所有元素相等。
3. **总和不变**：操作不会改变数组的总和，因此总和必须能够被数组长度整除。

#### 所选高星题解

##### 题解1：作者：long_long__int (4星)

**关键亮点**：
- 思路清晰，直接通过奇偶位分离和平均值判断来解决问题。
- 代码简洁，逻辑明确。

**核心代码**：
```cpp
void work(){
    double a,b;int sa,sb;
    a=b=sa=sb=0;
    cin>>n;
    for(int i=1;i<=n;i++) {
        int x;
        cin>>x;
        if(i&1) a+=x,sa++;
        else b+=x,sb++;
    }
    a/=sa,b/=sb;
    if(a!=b or int(a)!=a or int(b)!=b) return printf("No\n"),void();
    printf("Yes\n");
}
```

##### 题解2：作者：wuyouawa (4星)

**关键亮点**：
- 通过贪心算法，先判断平均数是否为整数，再通过遍历调整元素。
- 代码实现较为详细，考虑了多种情况。

**核心代码**：
```cpp
if(s%n==0) {
    p=s/n;
    w=0;
    for(int i=1;i<n-1;i++) {
        if(a[i]>p)  a[i+2]+=a[i]-p;
        else  a[i+2]-=(p-a[i]);
        a[i]=p;
    }
    for(int i=1;i<=n;i++) {
        if(a[i]==p)  ;
        else  w=1;
    }
    if(w==0)  printf("YES\n");
    else  printf("NO\n");
}
```

##### 题解3：作者：SuyctidohanQ (4星)

**关键亮点**：
- 通过奇偶位分离和平均值判断，代码简洁明了。
- 使用了 `long long` 类型，避免了溢出问题。

**核心代码**：
```cpp
void read () {
    cin >> n;
    ll sum1 = 0, sum2 = 0, x;
    for (ll i = 1; i <= n; i ++) {
        cin >> x;
        if (i % 2) sum1 += x;
        else sum2 += x;
    }
    if (sum1 % ((n + 1) / 2) != 0 || sum2 % (n / 2) != 0 || (sum1 / ((n + 1) / 2)) != sum2 / (n / 2)) cout << "NO" << endl;
    else cout << "YES" << endl;
}
```

### 最优关键思路或技巧

- **奇偶位分离**：通过将数组中的元素按奇数位和偶数位分开，分别计算它们的总和和平均值，来判断是否可以通过操作使所有元素相等。
- **平均值相等**：奇数位和偶数位的平均值必须相等，且都为整数，才能通过操作使所有元素相等。
- **总和不变**：操作不会改变数组的总和，因此总和必须能够被数组长度整除。

### 可拓展之处

- **类似问题**：可以拓展到其他需要奇偶位分离或平均值判断的问题，如某些数组操作问题。
- **算法套路**：这种奇偶位分离和平均值判断的思路可以应用于其他需要平衡或调整数组元素的问题。

### 推荐题目

1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
2. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)

---
处理用时：38.81秒
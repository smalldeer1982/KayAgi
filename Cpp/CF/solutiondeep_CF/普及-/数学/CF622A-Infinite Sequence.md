# 题目信息

# Infinite Sequence

## 题目描述

Consider the infinite sequence of integers: $ 1,1,2,1,2,3,1,2,3,4,1,2,3,4,5... $ . The sequence is built in the following way: at first the number $ 1 $ is written out, then the numbers from $ 1 $ to $ 2 $ , then the numbers from $ 1 $ to $ 3 $ , then the numbers from $ 1 $ to $ 4 $ and so on. Note that the sequence contains numbers, not digits. For example number $ 10 $ first appears in the sequence in position $ 55 $ (the elements are numerated from one).

Find the number on the $ n $ -th position of the sequence.

## 样例 #1

### 输入

```
3
```

### 输出

```
2
```

## 样例 #2

### 输入

```
5
```

### 输出

```
2
```

## 样例 #3

### 输入

```
10
```

### 输出

```
4
```

## 样例 #4

### 输入

```
55
```

### 输出

```
10
```

## 样例 #5

### 输入

```
56
```

### 输出

```
1
```

# AI分析结果

### 题目内容重写

考虑一个无限整数序列：$1,1,2,1,2,3,1,2,3,4,1,2,3,4,5...$。该序列的生成规则如下：首先写出数字 $1$，然后写出从 $1$ 到 $2$ 的数字，接着写出从 $1$ 到 $3$ 的数字，然后写出从 $1$ 到 $4$ 的数字，依此类推。注意，序列中的元素是数字，而不是单个数字。例如，数字 $10$ 第一次出现在序列的第 $55$ 个位置（元素从 $1$ 开始编号）。

请找出序列中第 $n$ 个位置的数字。

### 样例

#### 样例 #1

**输入：**
```
3
```

**输出：**
```
2
```

#### 样例 #2

**输入：**
```
5
```

**输出：**
```
2
```

#### 样例 #3

**输入：**
```
10
```

**输出：**
```
4
```

#### 样例 #4

**输入：**
```
55
```

**输出：**
```
10
```

#### 样例 #5

**输入：**
```
56
```

**输出：**
```
1
```

### 题解分析与结论

#### 综合分析与结论

本题的核心在于理解序列的生成规律，并通过数学方法快速定位第 $n$ 个位置的数字。大多数题解都采用了数学方法，通过计算前 $k$ 组的元素总数来确定第 $n$ 个位置所在的组，然后通过简单的减法得到该位置对应的数字。

#### 所选高分题解

1. **作者：Insouciant21 (5星)**
   - **关键亮点**：通过数学公式直接计算前 $k$ 组的元素总数，避免了循环计算，时间复杂度为 $O(1)$，效率极高。
   - **代码核心思想**：使用等差数列求和公式 $\frac{m(m+1)}{2} = n$ 解出 $m$，然后通过 $n - \frac{m(m+1)}{2}$ 得到答案。
   - **代码片段**：
     ```cpp
     long long num = (-1 + sqrt(1 + 8 * n)) / 2.0;
     long long res = n - num * (num + 1) / 2;
     if (res == 0)
         res = num;
     printf("%lld", res);
     ```

2. **作者：☆木辛土申☆ (4星)**
   - **关键亮点**：同样使用数学公式直接计算，代码简洁明了，易于理解。
   - **代码核心思想**：通过解方程 $x(x+1)/2 = n$ 得到 $x$，然后通过 $n - x(x+1)/2$ 得到答案。
   - **代码片段**：
     ```cpp
     long long x = ceil(sqrt(1 + 8.0 * n)) / 2 - 1;
     printf("%lld\n", n - x * (1 + x) / 2);
     ```

3. **作者：伟大的王夫子 (4星)**
   - **关键亮点**：使用数学公式计算，代码简洁，逻辑清晰。
   - **代码核心思想**：通过解方程 $k(k+1)/2 \le n$ 得到 $k$，然后通过 $n - k(k+1)/2$ 得到答案。
   - **代码片段**：
     ```cpp
     long long k = ceil((sqrt(8.0 * n + 1))) / 2 - 1;
     long long m = n - k * (k + 1) / 2;
     if (m == 0) printf("%lld", k);
     else printf("%lld", m);
     ```

### 最优关键思路或技巧

1. **数学公式法**：通过等差数列求和公式 $\frac{k(k+1)}{2}$ 计算前 $k$ 组的元素总数，然后通过 $n - \frac{k(k+1)}{2}$ 得到第 $n$ 个位置的数字。这种方法的时间复杂度为 $O(1)$，效率极高。
2. **边界处理**：当 $n$ 恰好是某一组的最后一个元素时，需要特殊处理，直接输出该组的组号。

### 可拓展之处

1. **类似题目**：类似的序列问题可以通过数学公式或递推公式来解决，例如斐波那契数列、等差数列等。
2. **算法优化**：在涉及大范围数据计算时，优先考虑数学公式法，避免使用循环或递归，以提高效率。

### 推荐题目

1. **洛谷 P1001 A+B Problem**：考察基础输入输出和简单计算。
2. **洛谷 P1028 数的计算**：考察递推公式和数学思维。
3. **洛谷 P1044 栈**：考察栈的应用和数学组合问题。

### 个人心得摘录

- **作者：Aw顿顿**：通过模拟方法尝试解决问题，但发现时间复杂度太高，最终转向数学方法，强调了数学思维在算法中的重要性。
- **作者：skyfly886**：通过将序列拆分为多个小数列，理解了序列的生成规律，并成功应用数学公式解决问题。

这些心得强调了在算法竞赛中，数学思维和公式推导的重要性，尤其是在处理大范围数据时，数学方法往往比模拟方法更为高效。

---
处理用时：45.78秒
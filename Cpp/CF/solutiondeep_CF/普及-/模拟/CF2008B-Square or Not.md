# 题目信息

# Square or Not

## 题目描述

漂亮的二进制矩阵是指在四周边缘全为 1 而内部全为 0 的矩阵。

如下图所示为四个漂亮的二进制矩阵的示例。今天，Sakurako 玩了一种大小为 $r \times c$ 的漂亮二进制矩阵，并通过从第一行到第 $r$ 行依次记录每一行的内容，生成了一段二进制字符串 $s$。更具体地，第 $i$ 行第 $j$ 列的元素对应于字符串中的第 $((i-1) \cdot c + j)$ 个字符。

你需要检查，生成字符串 $s$ 的这个漂亮矩阵是否能成为一个方形矩阵。换句话说，你需要判断字符串 $s$ 是否可以由一个边长相等的漂亮二进制矩阵（即 $r = c$）形成。

## 样例 #1

### 输入

```
5
2
11
4
1111
9
111101111
9
111111111
12
111110011111```

### 输出

```
No
Yes
Yes
No
No```

# AI分析结果

### 题目翻译
#### 正方形与否

#### 题目描述
漂亮的二进制矩阵是指四周边缘全为 1 而内部全为 0 的矩阵。

如下图所示为四个漂亮的二进制矩阵的示例。今天，Sakurako 玩了一种大小为 $r \times c$ 的漂亮二进制矩阵，并通过从第一行到第 $r$ 行依次记录每一行的内容，生成了一段二进制字符串 $s$。更具体地，第 $i$ 行第 $j$ 列的元素对应于字符串中的第 $((i - 1) \cdot c + j)$ 个字符。

你需要检查，生成字符串 $s$ 的这个漂亮矩阵是否能成为一个方形矩阵。换句话说，你需要判断字符串 $s$ 是否可以由一个边长相等的漂亮二进制矩阵（即 $r = c$）形成。

#### 样例 #1
##### 输入
```
5
2
11
4
1111
9
111101111
9
111111111
12
111110011111
```
##### 输出
```
No
Yes
Yes
No
No
```

### 综合分析与结论
这些题解的核心思路都是先判断字符串长度 $n$ 是否为完全平方数，若不是则直接判定无法构成正方形矩阵；若是，则进一步检查矩阵边缘是否为 1、内部是否为 0。不同题解在实现细节和代码风格上有所差异。

### 所选题解
- **Super_Cube（5 星）**
    - **关键亮点**：思路简洁清晰，代码实现简洁，利用 `goto` 语句简化代码逻辑。
    - **核心代码**：
```cpp
if(sqrt(n)!=(int)sqrt(n)){
    nxt:puts("No");
    continue;
}
n=sqrt(n);
for(int i=1,idx=1;i<=n;++i)
    for(int j=1;j<=n;++j)
        if(s[idx++]!=((i==1||i==n||j==1||j==n)^48))goto nxt;
puts("Yes");
```
    - **核心思想**：先判断 $n$ 是否为完全平方数，若不是则输出 `No`；若是则计算边长 $n$，遍历矩阵每个元素，检查是否符合漂亮矩阵的条件，若不符合则跳转到输出 `No` 的位置，若全部符合则输出 `Yes`。

- **chenxi2009（4 星）**
    - **关键亮点**：代码结构清晰，将判断过程分为多个步骤，易于理解。
    - **核心代码**：
```cpp
b = sqrt(n);
if(b * b!= n){
    printf("NO\n");
    continue;
}
for(int i = 1;i <= b;i ++){
    if(s[i] == '0' || s[b * (b - 1) + i] == '0'){
        fal = true;
        break;
    }
}
for(int i = 2;i < b;i ++){
    for(int j = 2;j < b;j ++){
        if(s[(i - 1) * b + j] == '1'){
            fal = true;
            break;
        }
    }
}
if(fal){
    printf("NO\n");
}
else{
    printf("YES\n");
}
```
    - **核心思想**：先判断 $n$ 是否为完全平方数，若不是则输出 `NO`；若是则分别检查矩阵上下边缘和内部元素是否符合条件，若不符合则标记 `fal` 为 `true`，最后根据 `fal` 的值输出结果。

### 最优关键思路或技巧
- 先判断字符串长度 $n$ 是否为完全平方数，可快速排除不可能构成正方形矩阵的情况。
- 利用矩阵坐标与字符串索引的对应关系，遍历矩阵元素进行检查。

### 拓展思路
同类型题可能会改变矩阵的定义，如改变边缘和内部元素的要求，或者改变矩阵与字符串的转换规则。解题时仍可先判断矩阵的基本条件（如是否为正方形），再根据具体要求检查矩阵元素。

### 洛谷推荐题目
- P1003 [铺地毯](https://www.luogu.com.cn/problem/P1003)
- P1330 [封锁阳光大学](https://www.luogu.com.cn/problem/P1330)
- P2002 [消息扩散](https://www.luogu.com.cn/problem/P2002)

### 个人心得
linjinkun 指出 Super_Cube 的题解存在漏洞，并给出了 hack 数据。同时说明 cly312 题解的时间复杂度在合理范围内，但认为题目存在不严谨之处。这提醒我们在编写代码时要考虑边界情况和特殊数据，确保代码的正确性。 

---
处理用时：24.26秒
# 题目信息

# Game with Doors

## 题目描述

### 题面描述
有 $100$ 个房间排成一列，之间有 $99$ 个门; 第 $i$ 个门连接第 $i$ 个房间和第 $i+1$ 个房间。每扇门可以上锁也可以不上锁。最初，所有的门都没有锁。

我们说，房间 $x$ 是可以到房间 $y$ 的，如果 $x$ 与 $y$ 之间的所有门都没锁。

你知道的:

- 爱丽丝在 $[l,r]$ 的某个房间里;
- Bob 在 $[L,R]$ 的某个房间里;
- 爱丽丝和鲍勃在不同的房间。

然而，你并不知道他们所在的确切房间。

你不希望爱丽丝和鲍勃能够联系到对方，所以你要锁上一些门来防止这种情况发生。无论 Alice 和 Bob 在给定段中的起始位置如何，您需要锁定的门的最小数量是多少？

## 样例 #1

### 输入

```
4
1 2
3 4
2 5
2 5
3 7
6 7
4 5
2 8```

### 输出

```
1
3
2
3```

# AI分析结果



以下是根据题目要求对题解的综合分析及结论：

---

### 题目重写
**题目描述**

有 100 个房间排成一列，之间有 99 个门；第 $i$ 个门连接第 $i$ 个房间和第 $i+1$ 个房间。每扇门可以上锁或不上锁，初始所有门未锁。

若房间 $x$ 到 $y$ 之间的所有门均未锁，则称 $x$ 和 $y$ 连通。

已知：
- 爱丽丝在区间 $[l, r]$ 的某个房间；
- 鲍勃在区间 $[L, R]$ 的某个房间；
- 两人房间不同。

要求锁上最少门，使得无论两人如何选择房间，均无法连通。求最小锁门数。

---

### 题解分析与结论

#### 关键思路
1. **区间不交**：锁中间任意一扇门（答案1）。
2. **区间相交**：
   - **交集的长度**：锁住交集部分的所有门（门数=交集右端-左端）。
   - **端点处理**：若原区间的左/右端点与交集的左/右端点不同，则需额外锁一扇门。

#### 最优解法
1. **计算交集**：交集范围 `[a, b] = [max(l, L), min(r, R)]`。
2. **锁门数**：
   - 若交集为空，答案为1。
   - 否则，锁门数为 `b - a`（交集门数） + `(原区间左端点是否不同)` + `(原区间右端点是否不同)`。

#### 代码实现
```cpp
#include <bits/stdc++.h>
using namespace std;
int main() {
    int t; cin >> t;
    while (t--) {
        int l, r, L, R; 
        cin >> l >> r >> L >> R;
        int a = max(l, L), b = min(r, R);
        int ans = (a > b) ? 1 : (b - a) + (l != L) + (r != R);
        cout << ans << endl;
    }
}
```

---

### 推荐题解
#### 题解1（作者：NEKO_Daze，5星）
**亮点**：
- 思路简洁，代码高效。
- 直接分类讨论交集情况，逻辑清晰。
**关键代码**：
```cpp
int ans = min(r, R) - max(l, L);
if (ans < 0) ans = 1;
else ans += (l != L) + (r != R);
```

#### 题解2（作者：GY程袁浩，4星）
**亮点**：
- 代码极简，逻辑直接。
- 通过数学表达式快速计算锁门数。
**关键代码**：
```cpp
ans = min(r1, r2) - max(l1, l2);
ans += (l1 != l2) + (r1 != r2);
```

---

### 拓展与总结
- **同类问题**：区间覆盖、连通性分割问题。
- **调试心得**：注意门编号与房间的关系（门 $i$ 分隔房间 $i$ 和 $i+1$）。
- **举一反三**：类似题目如「栅栏维修」、「区间合并」等。

---

### 推荐练习
1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)（区间极值）
2. [P3372 线段树1](https://www.luogu.com.cn/problem/P3372)（区间操作）
3. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045)（数学与区间计算）

---
处理用时：273.57秒
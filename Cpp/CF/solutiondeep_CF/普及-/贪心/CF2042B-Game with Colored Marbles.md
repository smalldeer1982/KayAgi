# 题目信息

# Game with Colored Marbles

## 题目描述

Alice 和 Bob 在玩一个游戏。一共有 $n$ 个石子，第 $i$ 个的颜色为 $c_i$。Alice 先手，两人轮流取走一颗石子，直到游戏结束。

Alice 的最终分数计算如下：

- 对于每一个颜色 $x$，如果 Alice 有至少一颗该颜色的石子，她获得 $1$ 分。
- 对于每一个颜色 $x$，如果她拥有全部该颜色的石子，她额外获得 $1$ 分（只考虑游戏中出现的颜色）。

比如，假设有颜色为 $[1,3,1,3,4]$ 的五颗石子，Alice 第一次拿第 $1$ 颗，Bob 拿第 $3$ 颗，然后 Alice 拿第 $5$ 颗，Bob 拿第 $2$ 颗，最后 Alice 拿第 $4$ 颗。最终，Alice 获得 $4$ 分：$3$ 分来自拿走至少一颗颜色为 $1,3,4$ 的石子，剩下 $1$ 分来自拿走全部颜色为 $4$ 的石子。**注意这一方案不一定是对双方最优的。**

Alice 想最大化她的分数，而 Bob 想最小化这个分数，假设两人都足够聪明。求 Alice 的最终得分。

## 样例 #1

### 输入

```
3
5
1 3 1 3 4
3
1 2 3
4
4 4 4 4```

### 输出

```
4
4
1```

# AI分析结果



【题目中文重写】

# 弹珠颜色游戏

## 题目描述

Alice 和 Bob 在玩一个弹珠游戏。共有 $n$ 个弹珠，第 $i$ 个弹珠颜色为 $c_i$。Alice 先手，两人轮流取走一个弹珠，直到所有弹珠被取完。

Alice 的得分规则：
1. 对每种颜色，若 Alice 至少有一个该颜色弹珠，得 1 分
2. 对每种颜色，若 Alice 拿走了所有该颜色弹珠，额外得 1 分

例如弹珠颜色序列 [1,3,1,3,4]，Alice 依次取第 1、5、4 号弹珠，Bob 取第 3、2 号。此时 Alice 获得颜色 1、3、4 各至少一个（3分），且颜色4全拿（额外1分），总计4分。

双方都采取最优策略，求 Alice 的最终得分。

---

【题解综合分析】

各题解均采用贪心策略，核心思路为：
1. 处理出现次数为1的颜色（贡献2分/个）
2. 处理其他颜色（贡献1分/种）

**关键差异点**：
- 对出现次数≥2的颜色处理方式
- 奇数次轮取的模拟方式
- 变量统计准确性

---

【高星题解推荐】

1. **Beihai_Jiang（5星）**
   - 亮点：思路清晰，代码简洁，正确统计单次颜色与其他颜色
   - 核心代码：
     ```cpp
     unordered_map<int,int> num;
     for(int i=1;i<=n;i++) num[c[i]]++;
     
     int x=0,y=0;
     for(auto [color,cnt] : num){
         if(cnt == 1) x++;
         else y++;
     }
     cout << 2*ceil(x/2.0) + y;
     ```

2. **long_long__int（4星）**
   - 亮点：公式推导明确，变量命名需优化
   - 调试心得："多测不清空，保龄两行泪"（强调初始化重要性）

---

【最优策略核心思想】

设 $x$ 为出现次数为1的颜色数，$y$ 为其他颜色数：
1. 对 $x$ 个颜色：双方轮流取，Alice 最多得 $\lceil \frac{x}{2} \rceil \times 2$ 分
2. 对 $y$ 个颜色：每种颜色 Alice 至少取1个，得 $y$ 分
3. 总得分：$2\lceil \frac{x}{2} \rceil + y$

---

【拓展思考】

类似博弈贪心问题特征：
- 存在两种得分类型（基础分与附加分）
- 对手策略直接影响己方收益
- 推荐题目：P1245（分糖果博弈）、P1512（石子游戏）、P2934（安全路径）

---

【关键代码实现】

完整统计与计算逻辑：
```cpp
unordered_map<int,int> cnt;
int x = 0, y = 0;

for(int i=1; i<=n; i++) cnt[c[i]]++;
for(auto [color, num] : cnt){
    if(num == 1) x++;
    else y++;
}

int ans = 2*(x + 1)/2 + y; // 利用整数除法实现上取整
```

---
处理用时：74.23秒
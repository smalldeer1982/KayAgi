# 题目信息

# Margarite and the best present

## 题目描述

小女孩Margarita是信息竞赛的忠实粉丝，她对数组和数列问题尤其感兴趣。

最近，她提出了一个长度为$10^9$的数列：

$a_1=-1$

$a_2=2$

$a_3=-3$

$a_4=4$

$a_5=-5$

$\cdots$

同样的，它也可以被表示成下面这个样子：
$$
a_i=i*(-1)^i,1\le i \le 10^9
$$
Margarita提出了$q$个询问，每一个询问包含两个整数：$l$和$r$。对于每一个询问，你需要回答$\sum_{i=l}^{r}a_i$的值，即数列中第$l$项至第$r$项的和。

## 说明/提示

第一个询问中，你需要回答第$1$项至第$3$项的和，$a_1+a_2+a_3=-1+2-3=-2$。

第二个询问中，你需要回答第$2$项至第$5$项的和，$a_2+a_3+a_4+a_5=2-3+4-5=-2$。

第三个询问中，你需要回答第$5$项至第$5$项的和，$a_5=-5$。

第四个询问中，你需要回答第$4$项至第$4$项的和，$a_4=4$。

第五个询问中，你需要回答第$2$项至第$3$项的和，$a_2+a_3=2-3=-1$。

## 样例 #1

### 输入

```
5
1 3
2 5
5 5
4 4
2 3
```

### 输出

```
-2
-2
-5
4
-1
```

# AI分析结果

### 题目内容
# Margarite and the best present

## 题目描述

小女孩Margarita是信息竞赛的忠实粉丝，她对数组和数列问题尤其感兴趣。

最近，她提出了一个长度为$10^9$的数列：

$a_1=-1$

$a_2=2$

$a_3=-3$

$a_4=4$

$a_5=-5$

$\cdots$

同样的，它也可以被表示成下面这个样子：
$$
a_i=i*(-1)^i,1\le i \le 10^9
$$
Margarita提出了$q$个询问，每一个询问包含两个整数：$l$和$r$。对于每一个询问，你需要回答$\sum_{i=l}^{r}a_i$的值，即数列中第$l$项至第$r$项的和。

## 说明/提示

第一个询问中，你需要回答第$1$项至第$3$项的和，$a_1+a_2+a_3=-1+2-3=-2$。

第二个询问中，你需要回答第$2$项至第$5$项的和，$a_2+a_3+a_4+a_5=2-3+4-5=-2$。

第三个询问中，你需要回答第$5$项至第$5$项的和，$a_5=-5$。

第四个询问中，你需要回答第$4$项至第$4$项的和，$a_4=4$。

第五个询问中，你需要回答第$2$项至第$3$项的和，$a_2+a_3=2-3=-1$。

## 样例 #1

### 输入

```
5
1 3
2 5
5 5
4 4
2 3
```

### 输出

```
-2
-2
-5
4
-1
```

### 算法分类
数学

### 题解分析与结论
该题的核心是通过数学规律快速计算区间和，避免直接遍历大范围数列。大部分题解都利用了数列的奇偶性规律，通过分组或前缀和的方式快速计算区间和。以下是对各题解的简要分析与评分：

1. **_xbn**：通过分组计算区间和，思路清晰，代码简洁。评分：4星。
2. **dblark**：通过枚举端点奇偶性分类讨论，思路清晰，代码简洁。评分：4星。
3. **JerryVoider**：利用前缀和公式，代码简洁高效。评分：5星。
4. **一扶苏一**：通过分组计算，处理边界情况，代码稍复杂。评分：3星。
5. **封禁用户**：通过分类讨论，代码简洁，但思路略显冗余。评分：3星。
6. **fengxiaoyi**：利用前缀和思想，代码简洁，但公式推导不够清晰。评分：3星。
7. **Arghariza**：通过分类讨论，代码简洁，思路清晰。评分：4星。
8. **Eason_AC**：利用前缀和公式，代码简洁高效。评分：5星。
9. **Ouaoan**：通过前缀和公式，代码简洁高效。评分：5星。
10. **Zechariah**：通过分组计算，代码简洁，思路清晰。评分：4星。
11. **little_sun**：通过等差数列求和，代码稍复杂。评分：3星。
12. **liuyz11**：利用前缀和公式，代码简洁高效。评分：5星。

### 最优题解
#### 作者：JerryVoider (5星)
**关键亮点**：利用前缀和公式，代码简洁高效，思路清晰。
**核心代码**：
```cpp
int l,r,q;
int main()
{
    scanf("%d",&q);
    for(int i=1;i<=q;i++)
    {
        int ans=0;
        scanf("%d%d",&l,&r);
        l--;
        if(l%2==0) l/=2;
        else l=-(l+1)/2;
        if(r%2==0) r/=2;
        else r=-(r+1)/2;
        printf("%d\n",r-l);
    }
    return 0;
 }
```

### 关键思路与技巧
1. **前缀和公式**：利用数列的奇偶性规律，推导出前缀和公式，快速计算区间和。
2. **分组计算**：将数列中的元素按奇偶性分组，通过计算每组的和来简化问题。
3. **分类讨论**：根据区间端点的奇偶性，分类讨论并计算区间和。

### 拓展思路
类似的问题可以通过寻找数列的规律，利用数学公式或分组计算来优化时间复杂度。例如，斐波那契数列、等差数列等都可以通过类似的方法进行优化。

### 推荐题目
1. [CF486A - Calculating Function](https://www.luogu.com.cn/problem/CF486A)
2. [P1980 [NOIP2013 普及组] 计数问题](https://www.luogu.com.cn/problem/P1980)
3. [P1028 [NOIP2001 普及组] 数的计算](https://www.luogu.com.cn/problem/P1028)

---
处理用时：33.67秒
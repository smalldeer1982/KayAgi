# 题目信息

# Emotes

## 题目描述

xht37 正在玩一款著名的卡牌游戏。

在这个游戏中，有 $ n $ 种表情可以使用，使用第 $ i $ 种表情一次可以为对方增加 $ a_i $ 点快乐值。

你现在有 $ m $ 次使用表情的机会，每种表情可以使用零次或任意多次。但任意一款表情不能连续使用超过 $ k $ 次。

xht37 想要算出他能给对方带来的快乐值是多少。他当然知道该怎么算，但是他想考考你。

## 说明/提示

$2 \le n \le 2 \cdot 10^5,1 \le k \le m \le 2 \cdot 10^9,1 \le a_i \le 10^9$

## 样例 #1

### 输入

```
6 9 2
1 3 3 7 4 2
```

### 输出

```
54
```

## 样例 #2

### 输入

```
3 1000000000 1
1000000000 987654321 1000000000
```

### 输出

```
1000000000000000000
```

# AI分析结果

### 题目内容
xht37 正在玩一款著名的卡牌游戏。

在这个游戏中，有 $ n $ 种表情可以使用，使用第 $ i $ 种表情一次可以为对方增加 $ a_i $ 点快乐值。

你现在有 $ m $ 次使用表情的机会，每种表情可以使用零次或任意多次。但任意一款表情不能连续使用超过 $ k $ 次。

xht37 想要算出他能给对方带来的快乐值是多少。他当然知道该怎么算，但是他想考考你。

### 说明/提示
$2 \le n \le 2 \cdot 10^5,1 \le k \le m \le 2 \cdot 10^9,1 \le a_i \le 10^9$

### 样例 #1
#### 输入
```
6 9 2
1 3 3 7 4 2
```
#### 输出
```
54
```

### 样例 #2
#### 输入
```
3 1000000000 1
1000000000 987654321 1000000000
```
#### 输出
```
1000000000000000000
```

### 算法分类
贪心

### 题解分析与结论
本题的核心在于如何最大化快乐值，同时满足不能连续使用同一表情超过 $k$ 次的限制。所有题解都采用了贪心策略，即优先使用快乐值最大的表情，并在达到连续使用限制时使用次大值进行间隔。这种策略能够确保在每次选择中都能获得最大的快乐值，同时满足限制条件。

### 精选题解
1. **作者：闫飞天jyh (赞：5)**
   - **星级**：5星
   - **关键亮点**：代码简洁，思路清晰，直接通过排序找到最大值和次大值，并通过周期计算最终结果。
   - **代码核心**：
     ```cpp
     sort(ac+1,ac+1+n);
     ll t1=ac[n],t2=ac[n-1];
     ll sum=t1*k+t2;
     ll tan=m/(k+1);
     ll xin=m%(k+1);
     ll ans=tan*sum+xin*t1;
     printf("%lld", ans);
     ```

2. **作者：justinjia (赞：4)**
   - **星级**：4星
   - **关键亮点**：详细解释了周期问题的思路，代码结构清晰，适合初学者理解。
   - **代码核心**：
     ```cpp
     sort(a,a+n);
     ans+=m/(k+1)*(a[n-1]*k+a[n-2]);
     ans+=m%(k+1)*a[n-1];
     printf("%lld",ans);
     ```

3. **作者：SpectatorX (赞：2)**
   - **星级**：4星
   - **关键亮点**：代码简洁，直接通过遍历找到最大值和次大值，避免了排序的开销。
   - **代码核心**：
     ```cpp
     if(a>=maxn) mxn=maxn,maxn=a;
     if(a>mxn&&a<maxn) mxn=a;
     ans=maxn*k+mxn;
     ans=ans*(m/(k+1))+maxn*(m%(k+1));
     print(ans);
     ```

### 关键思路与技巧
1. **贪心策略**：优先使用快乐值最大的表情，并在达到连续使用限制时使用次大值进行间隔。
2. **周期计算**：将 $k$ 个最大值和 1 个次大值组成一个周期，通过计算完整周期和不完整周期的贡献来得到最终结果。
3. **避免排序**：通过遍历数组找到最大值和次大值，避免排序的开销，优化时间复杂度。

### 拓展与举一反三
1. **类似题目**：
   - [P1007 最大子段和](https://www.luogu.com.cn/problem/P1007)
   - [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
   - [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)

2. **个人心得**：
   - **调试经历**：在处理大数时，确保使用 `long long` 类型，避免溢出。
   - **踩坑教训**：在计算周期时，注意余数的处理，确保所有情况都被覆盖。
   - **顿悟感想**：贪心策略在解决最大化问题时往往简单有效，但需要仔细分析问题的限制条件。

---
处理用时：30.55秒
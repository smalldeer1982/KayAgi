# 题目信息

# Common Divisors

## 题目描述

你有一个由$n$个整数组成的数组，计算这样的正整数$x$的数量，使数组中的每个数字除以$x$余数都为$0$。 换句话说，您必须找到数组中所有元素的公约数的个数。  
例如，如果数组$a$为$[2,4,6,2,10]$，则$1$和$2$将每个数字除以数组（因此该示例的答案为$2$）。

## 样例 #1

### 输入

```
5
1 2 3 4 5
```

### 输出

```
1
```

## 样例 #2

### 输入

```
6
6 90 12 18 30 18
```

### 输出

```
4
```

# AI分析结果

### 题目内容
# 公共除数

## 题目描述

你有一个由$n$个整数组成的数组，计算这样的正整数$x$的数量，使数组中的每个数字除以$x$余数都为$0$。 换句话说，您必须找到数组中所有元素的公约数的个数。  
例如，如果数组$a$为$[2,4,6,2,10]$，则$1$和$2$将每个数字除以数组（因此该示例的答案为$2$）。

## 样例 #1

### 输入

```
5
1 2 3 4 5
```

### 输出

```
1
```

## 样例 #2

### 输入

```
6
6 90 12 18 30 18
```

### 输出

```
4
```

### 算法分类
数学

### 题解分析与结论
本题的核心思路是通过求数组的最大公约数（GCD），然后计算该GCD的因数个数。由于GCD的因数也是数组中所有元素的公约数，因此问题转化为求GCD的因数个数。

各题解的主要思路如下：
1. **求最大公约数（GCD）**：使用欧几里得算法或C++内置的`__gcd`函数。
2. **计算GCD的因数个数**：通过分解质因数或直接枚举到平方根的方法。

### 评分较高的题解
#### 题解1：作者：andyli (赞：3)
- **星级**：5星
- **关键亮点**：使用分解质因数的方法计算因数个数，代码清晰且优化得当。
- **核心代码**：
```cpp
long long ans = 1;
for (long long i = 2; i * i <= x; i++) {
    if (isprime(i)) {
        int cnt = 0;
        while (x % i == 0)
            x /= i, cnt++;
        ans *= (cnt + 1);
    }
}
printf("%lld\n", x > 1 ? (ans << 1) : ans);
```

#### 题解2：作者：July_S (赞：1)
- **星级**：4星
- **关键亮点**：使用`__gcd`函数快速求GCD，并通过枚举到平方根的方法计算因数个数，代码简洁。
- **核心代码**：
```cpp
long long res = a[0];
for (int i = 1; i < n; i++) {
    res = __gcd(res, a[i]);
}
int cnt = 0;
for (long long i = 1; i * i <= res; i++) {
    if (res % i == 0) {
        cnt++;
        if (i != res / i) {
            cnt++;
        }
    }
}
cout << cnt;
```

#### 题解3：作者：__HHX__ (赞：1)
- **星级**：4星
- **关键亮点**：通过逐步优化暴力解法，最终采用枚举到平方根的方法，思路清晰且优化得当。
- **核心代码**：
```cpp
for(long long i=1;i*i<=d;i++) {
    if(a[n]%i==0) {
        ans+=i*i==d?1:2;
    }
}
cout<<ans;
```

### 最优关键思路或技巧
1. **求GCD**：使用欧几里得算法或C++内置的`__gcd`函数。
2. **计算因数个数**：通过分解质因数或枚举到平方根的方法，避免不必要的计算。

### 可拓展之处
1. **同类型题**：可以扩展到求多个数的最大公约数或最小公倍数的问题。
2. **类似算法套路**：在需要求某个数的因数个数时，可以采用分解质因数或枚举到平方根的方法。

### 推荐题目
1. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029)
2. [P1072 Hankson的趣味题](https://www.luogu.com.cn/problem/P1072)
3. [P1069 细胞分裂](https://www.luogu.com.cn/problem/P1069)

### 个人心得总结
- **调试经历**：在处理大数时，需要注意数据类型的范围，避免溢出。
- **踩坑教训**：在枚举因数时，需要注意边界条件，如平方数的处理。
- **顿悟感想**：通过分解质因数的方法可以高效地计算因数个数，避免了暴力枚举的低效性。

---
处理用时：32.28秒
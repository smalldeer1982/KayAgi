# 题目信息

# Skyscrapers (easy version)

## 题目描述

这题是 [CF1313C2](https://www.luogu.com.cn/problem/CF1313C2) 的简单版本。这个版本中 $1 \leq n \leq 1000$。

Berland要起摩天大厦了。所有的摩天大厦都在高速公路附近建。发展商买了 $n$ 块地准备建 $n$ 栋摩天大厦，一块地一栋。

当规划一间摩天大厦的时候，建筑师要考虑一些条件。

第一，因为每栋摩天大厦有不同的用途，所以每栋摩天大厦都有自己的层数限制，也就是说，这栋摩天大厦的高度不能超过给定的值 $m_i$。

第二，根据城市的建设规则，一栋摩天大厦不能同时在左右有比它高的摩天大厦。

如果规范地表示，让我们把地编上一个编号从 $1$ 到 $n$。那么如果在第 $i$ 块地的摩天大厦有 $a_i$ 层，那么我们需要保证 $1 \le a_i \le m_i$。另外，这里不可以有整数 $j$ 和 $k$ 满足 $j < i < k$ 并且 $a_j > a_i < a_k$。第 $j, k$ 块地并不需要与第 $i$ 块地相邻。

发展商想要使得每块地上摩天大厦的楼层数之和最大。也请帮他找出在**任意一个**最优状况中每个摩天大厦的高度。也就是，要让建筑师考虑的条件都符合，而且要使得每块地上摩天大厦的楼层数之和最大。

## 样例 #1

### 输入

```
5
1 2 3 2 1```

### 输出

```
1 2 3 2 1```

## 样例 #2

### 输入

```
3
10 6 8```

### 输出

```
10 6 6```

# AI分析结果

### 题目内容重写

#### 题目描述

这题是 [CF1313C2](https://www.luogu.com.cn/problem/CF1313C2) 的简单版本。这个版本中 $1 \leq n \leq 1000$。

Berland要起摩天大厦了。所有的摩天大厦都在高速公路附近建。发展商买了 $n$ 块地准备建 $n$ 栋摩天大厦，一块地一栋。

当规划一间摩天大厦的时候，建筑师要考虑一些条件。

第一，因为每栋摩天大厦有不同的用途，所以每栋摩天大厦都有自己的层数限制，也就是说，这栋摩天大厦的高度不能超过给定的值 $m_i$。

第二，根据城市的建设规则，一栋摩天大厦不能同时在左右有比它高的摩天大厦。

如果规范地表示，让我们把地编上一个编号从 $1$ 到 $n$。那么如果在第 $i$ 块地的摩天大厦有 $a_i$ 层，那么我们需要保证 $1 \le a_i \le m_i$。另外，这里不可以有整数 $j$ 和 $k$ 满足 $j < i < k$ 并且 $a_j > a_i < a_k$。第 $j, k$ 块地并不需要与第 $i$ 块地相邻。

发展商想要使得每块地上摩天大厦的楼层数之和最大。也请帮他找出在**任意一个**最优状况中每个摩天大厦的高度。也就是，要让建筑师考虑的条件都符合，而且要使得每块地上摩天大厦的楼层数之和最大。

#### 样例 #1

##### 输入

```
5
1 2 3 2 1
```

##### 输出

```
1 2 3 2 1
```

#### 样例 #2

##### 输入

```
3
10 6 8
```

##### 输出

```
10 6 6
```

### 算法分类
贪心

### 题解分析与结论

#### 综合分析

该题的核心在于找到一个满足条件的摩天大厦高度序列，使得总和最大。条件要求序列不能有“山谷”形状，即不能存在一个位置，其左右两边都有比它高的楼。因此，最优解的形状通常是一个“山峰”形状，即先递增后递减。

#### 题解对比

1. **123456zmy** 的题解：
   - **思路**：枚举每个位置作为山峰的最高点，然后向左右两边分别计算最大高度，确保序列先递增后递减。
   - **难点**：需要双重循环，时间复杂度为 $O(n^2)$。
   - **评分**：4星
   - **关键亮点**：思路清晰，代码简洁，适合初学者理解。

2. **BreakPlus** 的题解：
   - **思路**：通过图形化解释，说明最优解的形状必须是一个不降序列加上一个不升序列，枚举最高点并构造序列。
   - **难点**：需要理解图形化解释，代码实现较为直观。
   - **评分**：4星
   - **关键亮点**：图形化解释有助于理解问题本质，代码实现简单。

3. **Night_sea_64** 的题解：
   - **思路**：与123456zmy类似，枚举最高点并构造序列，确保序列先递增后递减。
   - **难点**：双重循环，时间复杂度较高。
   - **评分**：3星
   - **关键亮点**：代码实现较为直接，但缺乏优化。

#### 最优关键思路

最优解的形状通常是一个“山峰”形状，即先递增后递减。通过枚举每个位置作为山峰的最高点，然后向左右两边分别计算最大高度，确保序列满足条件。

#### 拓展思路

对于更大规模的数据（如 $n \leq 10^5$），可以使用单调栈优化，将时间复杂度降低到 $O(n)$。

#### 推荐题目

1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
2. [P1901 发射站](https://www.luogu.com.cn/problem/P1901)
3. [P2947 [USACO09MAR]Look Up S](https://www.luogu.com.cn/problem/P2947)

#### 个人心得

- **调试经历**：在枚举最高点时，需要注意边界条件，确保序列的递增和递减部分正确。
- **踩坑教训**：双重循环的时间复杂度较高，对于大规模数据需要优化。
- **顿悟感想**：通过图形化解释可以更好地理解问题的本质，有助于找到最优解。

---
处理用时：31.51秒
# 题目信息

# Homecoming

## 题目描述

Petya 开完了派对，想回家。



我们可以把整个城市抽象成一条直线，开派对的地方在直线的一端，Petya 的家在直线的另一端。



直线上有一些公交车站（用 'A' 表示）和一些电车站（用 'B' 表示）。



Petya 可以支付 $a$ 元从一个车站坐到另一个车站，但乘车的路程中路过的必须是公交车站（包括起点不包括终点）。



Petya 可以支付 $b$ 元从一个车站坐到另一个车站，但乘车的路程中路过的必须是电车站（包括起点不包括终点）。



但是 Petya 的只有 $p$ 元，所以你要帮她算出她至少要步行几站才能到家？





第二行一个字符串，由'A'和'B'组成，表示这条路上的车站。

## 说明/提示

$1 \le t \le 10^4$ ，$1 \le a, b, p \le 10^5 $ ，$ 2 \le |s| \le 10^5 $

## 样例 #1

### 输入

```
5
2 2 1
BB
1 1 1
AB
3 2 8
AABBBBAABB
5 3 4
BBBBB
2 1 1
ABABAB```

### 输出

```
2
1
3
1
6```

# AI分析结果

### 题目内容重写
Petya 开完了派对，想回家。

我们可以把整个城市抽象成一条直线，开派对的地方在直线的一端，Petya 的家在直线的另一端。

直线上有一些公交车站（用 'A' 表示）和一些电车站（用 'B' 表示）。

Petya 可以支付 $a$ 元从一个车站坐到另一个车站，但乘车的路程中路过的必须是公交车站（包括起点不包括终点）。

Petya 可以支付 $b$ 元从一个车站坐到另一个车站，但乘车的路程中路过的必须是电车站（包括起点不包括终点）。

但是 Petya 的只有 $p$ 元，所以你要帮她算出她至少要步行几站才能到家？

第二行一个字符串，由'A'和'B'组成，表示这条路上的车站。

### 算法分类
贪心

### 题解分析与结论
本题的核心在于如何高效地计算 Petya 在给定预算下最少需要步行的站数。题解主要分为两种思路：一种是从后往前扫描，另一种是二分答案。

1. **从后往前扫描**：这种方法的核心思想是从终点开始往前扫描，每当遇到车站类型变化时，扣除相应的费用，直到费用不足时输出当前站数。这种方法的时间复杂度为 $O(n)$，效率较高。
2. **二分答案**：这种方法通过二分查找确定 Petya 需要步行的站数，然后通过 check 函数验证是否可行。时间复杂度为 $O(n \log n)$，虽然稍慢，但思路清晰。

### 所选高分题解
#### 题解1：pyqpyq (4星)
**关键亮点**：
- 从后往前扫描，时间复杂度 $O(n)$，效率高。
- 代码简洁，逻辑清晰。

**核心代码**：
```cpp
for(int i=n-1;i>=1&&l;--i)
{
    if(s[i-1]!=s[i]&&s[i-1]=='A'&&(p-=a)<0)
    {
        printf("%d\n",i+1);
        l=0;
        break;
    }
    else if(s[i-1]!=s[i]&&s[i-1]=='B'&&(p-=b)<0)
    {
        printf("%d\n",i+1);
        l=0;
        break;
    }
}
if(l)
    printf("1\n");
```

#### 题解2：Lates (4星)
**关键亮点**：
- 二分答案，思路清晰。
- 通过 check 函数验证可行性，逻辑严谨。

**核心代码**：
```cpp
inline bool check(int now){
    if(now==n)return true;
    tot=(f[now]==1?a:b);
    for(register int i=now+1;i<n;++i){
        if(f[i]!=f[i-1]){
            tot+=(f[i]==1?a:b);
            if(tot>p)return false;
        }
    }
    return tot<=p;
}
```

### 最优关键思路与技巧
- **从后往前扫描**：这种方法利用了问题的特性，即终点是固定的，通过从后往前扫描可以快速确定需要步行的站数。
- **二分答案**：虽然时间复杂度稍高，但思路清晰，适合对时间复杂度要求不高的场景。

### 可拓展之处
- 类似的问题可以应用贪心算法，通过从后往前扫描或二分答案来解决。
- 可以扩展到多维度问题，如考虑多个交通工具或多种费用模式。

### 推荐题目
1. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)

---
处理用时：27.58秒
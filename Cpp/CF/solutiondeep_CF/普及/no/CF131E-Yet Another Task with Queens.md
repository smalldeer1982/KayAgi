# 题目信息

# Yet Another Task with Queens

## 题目描述

皇后是最强的棋子。在现代国际象棋中，皇后可以在任何水平、垂直或对角线方向上移动任意数量的方格（考虑到在其途中没有其他棋子）。女王结合了车和主教的技能。

$n\times n$方格棋盘上有 $m$ 个皇后 ，你知道每个女王的位置是 $(r_i,c_i)$ ，$r_i$ 是行，$c_i$ 是列。没有两个皇后处于同一位置。

对于每一个女王，我们可以计算 $w$ ——该女王威胁（攻击）的其他女王的数量。对于固定的攻击方向，如果有许多皇后处于攻击射线上，则只有该方向上的第一个皇后受到攻击。显然，对于任何女王来说，$0<=w<=8$ 。 

打印序列 $t_0,t_1,...，t_8$，其中$t_i$是威胁其他皇后的皇后数量，即他们的 $w$ 等于 $i$ 的皇后数量。

## 样例 #1

### 输入

```
8 4
4 3
4 8
6 5
1 6
```

### 输出

```
0 3 0 1 0 0 0 0 0 ```

## 样例 #2

### 输入

```
10 3
1 1
1 2
1 3
```

### 输出

```
0 2 1 0 0 0 0 0 0 ```

# AI分析结果



# 题目中文翻译

## 题目描述

皇后是最强的棋子。在国际象棋中，皇后可以在水平、垂直或对角线方向上移动任意格数（假设路径上没有其他棋子）。本题中，给定一个 $n \times n$ 的棋盘和 $m$ 个皇后，每个皇后位于 $(r_i, c_i)$，且位置唯一。对于每个皇后，计算其威胁的其他皇后数量 $w$（每个攻击方向只算最近的第一个皇后）。要求输出 $t_0, t_1, \dots, t_8$，其中 $t_i$ 表示恰好威胁 $i$ 个其他皇后的皇后数量。

## 样例 #1

### 输入

```
8 4
4 3
4 8
6 5
1 6
```

### 输出

```
0 3 0 1 0 0 0 0 0
```

## 样例 #2

### 输入

```
10 3
1 1
1 2
1 3
```

### 输出

```
0 2 1 0 0 0 0 0 0
```

---

**算法分类**：排序

---

## 题解分析与结论

### 关键思路分析
题解核心思想是通过四次排序分别处理皇后在行、列、主对角线（$r+c$）、副对角线（$r-c$）四个方向的威胁情况。每次排序后，检查每个皇后在该方向上的前驱和后继是否属于同一方向组，从而统计威胁数量。每个方向最多贡献两个威胁（前后各一个）。

### 题解亮点对比
- **排序法**：通过四次排序分别处理四个攻击方向，每次排序后线性遍历判断前后元素是否同组，时间复杂度为 $O(m \log m)$。
- **虚拟节点技巧**：在数组首尾插入虚拟节点，避免边界判断的复杂逻辑。

### 最优题解（4星）

**关键亮点**：  
1. 通过四次排序覆盖所有攻击方向，逻辑清晰。  
2. 利用虚拟节点简化边界条件处理。  
3. 每个方向独立处理，代码结构对称易维护。

**核心代码**：  
```cpp
// 按行排序后处理行方向的威胁
sort(a + 1, a + m + 1, cmp1);
for (int i = 1; i <= m; i++) {
    ans[a[i].id] += 2; 
    if (a[i].x != a[i - 1].x) ans[a[i].id]--;
    if (a[i].x != a[i + 1].x) ans[a[i].id]--;
}
// 类似处理列、主对角线、副对角线方向
```

---

## 拓展与推荐题目

**类似题目推荐**：  
1. [P1219 USACO1.5 八皇后](https://www.luogu.com.cn/problem/P1219)  
2. [P2965 USACO09NOV Grand Theft Auto II](https://www.luogu.com.cn/problem/P2965)  
3. [P1562 还是N皇后](https://www.luogu.com.cn/problem/P1562)

---
处理用时：279.38秒
# 题目信息

# Most socially-distanced subsequence

## 题目描述

给出一个长度为 $n$ 的排列 $P$，你需要找到它的一个子序列 $P_{s_1},P_{s_2},\dots,P_{s_k}$ 满足：
- $|P_{s_1}-P_{s_2}|+|P_{s_2}-P_{s_3}|+\dots+|P_{s_{k-1}}-P_{s_k}|$ 最大。
- 在上式最大的前提下 $k$ 最小。

求这个子序列的最长长度。

## 样例 #1

### 输入

```
2
3
3 2 1
4
1 3 4 2```

### 输出

```
2
3 1 
3
1 4 2```

# AI分析结果

### 题目内容重写
给出一个长度为 $n$ 的排列 $P$，你需要找到它的一个子序列 $P_{s_1},P_{s_2},\dots,P_{s_k}$ 满足：
- $|P_{s_1}-P_{s_2}|+|P_{s_2}-P_{s_3}|+\dots+|P_{s_{k-1}}-P_{s_k}|$ 最大。
- 在上式最大的前提下 $k$ 最小。

求这个子序列的最长长度。

### 样例 #1
#### 输入
```
2
3
3 2 1
4
1 3 4 2
```
#### 输出
```
2
3 1 
3
1 4 2
```

### 算法分类
贪心

### 题解分析与结论
本题的核心思路是通过贪心策略，找到排列中的“极值点”（即局部最大值和局部最小值），这些点能够最大化相邻元素的差的绝对值之和。通过保留这些极值点，可以在保证最大和的前提下，使子序列的长度最小。

### 高星题解推荐
#### 题解1：作者：奇米 (赞：1)
- **星级**：4
- **关键亮点**：通过分析“峰”和“谷”的性质，提出只保留这些极值点的思路，时间复杂度为 $O(n)$，代码简洁且高效。
- **代码核心思想**：遍历数组，找到所有满足“峰”或“谷”条件的点，并将它们按顺序组成子序列。
```cpp
For(i,2,n-1) 
    if((a[i]>a[i-1]&&a[i]>a[i+1])||(a[i]<a[i-1]&&a[i]<a[i+1])) b[++m]=i;
b[++m]=n;
```

#### 题解2：作者：lzy120406 (赞：0)
- **星级**：4
- **关键亮点**：通过遍历排列，找到所有的极值点，并将它们按顺序组成子序列，思路清晰且代码易于理解。
- **代码核心思想**：遍历数组，找到所有满足“峰”或“谷”条件的点，并将它们按顺序组成子序列。
```cpp
for (int i = 1; i < n - 1; ++i) {
    if ((p[i] > p[i - 1] && p[i] > p[i + 1]) || (p[i] < p[i - 1] && p[i] < p[i + 1])) {
        seq.push_back(p[i]);
    }
}
```

#### 题解3：作者：_Revenge_ (赞：0)
- **星级**：4
- **关键亮点**：通过分析单调递增和递减区间的性质，提出只保留“峰”和“谷”的思路，代码简洁且高效。
- **代码核心思想**：遍历数组，找到所有满足“峰”或“谷”条件的点，并将它们按顺序组成子序列。
```cpp
for(int i=1;i<n;++i){
    int k=(a[i]>a[i+1]);
    if(k!=f){
        q.push(a[i]);
        ++ans;
        f=k;
    }
}
```

### 最优关键思路或技巧
通过分析“峰”和“谷”的性质，提出只保留这些极值点的思路，可以在保证最大和的前提下，使子序列的长度最小。这种方法的时间复杂度为 $O(n)$，且代码简洁高效。

### 可拓展之处
类似的问题可以通过分析极值点的性质来解决，例如在股票交易中寻找最佳买入和卖出点，或者在信号处理中寻找峰值和谷值。

### 推荐题目
1. [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091)
2. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)
3. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)

### 个人心得摘录
- **奇米**：通过画图分析“峰”和“谷”的性质，发现只保留这些点可以达到最优解。
- **lzy120406**：通过遍历排列，找到所有的极值点，并将它们按顺序组成子序列，思路清晰且代码易于理解。
- **_Revenge_**：通过分析单调递增和递减区间的性质，提出只保留“峰”和“谷”的思路，代码简洁且高效。

---
处理用时：28.32秒
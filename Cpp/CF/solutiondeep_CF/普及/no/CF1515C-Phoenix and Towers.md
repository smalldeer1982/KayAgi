# 题目信息

# Phoenix and Towers

## 题目描述

凤凰菲克斯有 $ n $ 个方块，分别高 $ h_1,h2,\dots,h_n $，所有 $ h_i $ 都不超过 $ x $ 。他计划将 $ n $ 个方块堆叠成 $ m $ 座塔。为了让塔看起来更漂亮，没有两座塔的高度差可以超过 $ x $ 。

请帮助菲克斯建造 $ m $ 座漂亮的塔，每个塔必须至少由一个方块构成，并且必须使用所有方块。

## 样例 #1

### 输入

```
2
5 2 3
1 2 3 1 2
4 3 3
1 1 2 3```

### 输出

```
YES
1 1 1 2 2
YES
1 2 2 3```

# AI分析结果

### 题目内容
# 凤凰与塔

## 题目描述

凤凰菲克斯有 $ n $ 个方块，分别高 $ h_1,h2,\dots,h_n $，所有 $ h_i $ 都不超过 $ x $ 。他计划将 $ n $ 个方块堆叠成 $ m $ 座塔。为了让塔看起来更漂亮，没有两座塔的高度差可以超过 $ x $ 。

请帮助菲克斯建造 $ m $ 座漂亮的塔，每个塔必须至少由一个方块构成，并且必须使用所有方块。

## 样例 #1

### 输入

```
2
5 2 3
1 2 3 1 2
4 3 3
1 1 2 3```

### 输出

```
YES
1 1 1 2 2
YES
1 2 2 3```

### 算法分类
贪心

### 综合分析与结论
本题的核心思想是通过贪心策略将方块分配到各个塔中，确保每座塔的高度差不超过 $x$。大多数题解都采用了优先队列（小根堆）来维护当前高度最小的塔，并将新的方块分配给该塔。这种策略保证了每次分配后，塔之间的高度差仍然在允许范围内。此外，部分题解还通过排序和取模的方式直接构造解，进一步简化了问题。

### 所选高星题解

#### 题解1：作者：45dino (赞：12)
- **星级**：5星
- **关键亮点**：详细分析了贪心策略的正确性，并提供了优先队列的实现代码。通过证明每次分配后高度差仍然小于 $x$，确保了算法的正确性。
- **代码核心思想**：使用优先队列维护当前高度最小的塔，每次将新的方块分配给该塔。
```cpp
priority_queue<pair<int, int>, vector<pair<int, int>>, greater<pair<int, int>>> pq;
for (int i = 1; i <= m; i++) pq.push({0, i});
for (int i = 1; i <= n; i++) {
    auto [sum, id] = pq.top(); pq.pop();
    sum += h[i];
    ans[i] = id;
    pq.push({sum, id});
}
```

#### 题解2：作者：kevin1616 (赞：3)
- **星级**：4星
- **关键亮点**：通过排序和取模的方式直接构造解，避免了优先队列的使用，代码简洁且易于理解。
- **代码核心思想**：将方块按高度排序后，依次分配给 $m$ 个塔，确保每座塔的高度差不超过 $x$。
```cpp
sort(h + 1, h + n + 1);
for (int i = 1; i <= n; i++) {
    ans[i] = (i - 1) % m + 1;
}
```

#### 题解3：作者：Echo_Long (赞：2)
- **星级**：4星
- **关键亮点**：详细证明了贪心策略的正确性，并通过优先队列实现了高效的分配过程。
- **代码核心思想**：使用优先队列维护当前高度最小的塔，每次将新的方块分配给该塔。
```cpp
priority_queue<node> q;
for (int i = 1; i <= m; i++) q.push({i, 0});
for (int i = 1; i <= n; i++) {
    node u = q.top(); q.pop();
    ans[i] = u.id;
    u.val += a[i];
    q.push(u);
}
```

### 最优关键思路或技巧
1. **优先队列（小根堆）**：通过优先队列维护当前高度最小的塔，确保每次分配后塔之间的高度差仍然在允许范围内。
2. **排序与取模**：将方块按高度排序后，依次分配给 $m$ 个塔，简化了分配过程。

### 可拓展之处
类似的问题可以扩展到其他需要均匀分配资源的场景，如任务调度、负载均衡等。贪心策略在这些问题中同样适用。

### 推荐题目
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
2. [P1168 中位数](https://www.luogu.com.cn/problem/P1168)
3. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)

### 个人心得摘录
- **调试经历**：部分题解提到在实现过程中遇到了优先队列的初始化问题，通过将初始高度设为0解决了问题。
- **顿悟感想**：通过排序和取模的方式直接构造解，避免了复杂的优先队列操作，简化了代码实现。

---
处理用时：31.72秒
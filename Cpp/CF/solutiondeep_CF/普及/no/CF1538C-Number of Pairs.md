# 题目信息

# Number of Pairs

## 题目描述

给出一个由整数组成的数组 $a$，求一对整数 $(i, j)$（$1 \le i < j \le n$）满足 $l \le a_i + a_j \le r$ 的数量。

## 样例 #1

### 输入

```
4
3 4 7
5 1 2
5 5 8
5 1 2 4 3
4 100 1000
1 1 1 1
5 9 13
2 5 5 1 1```

### 输出

```
2
7
0
1```

# AI分析结果

【题目内容】
# Number of Pairs

## 题目描述

给出一个由整数组成的数组 $a$，求一对整数 $(i, j)$（$1 \le i < j \le n$）满足 $l \le a_i + a_j \le r$ 的数量。

## 样例 #1

### 输入

```
4
3 4 7
5 1 2
5 5 8
5 1 2 4 3
4 100 1000
1 1 1 1
5 9 13
2 5 5 1 1```

### 输出

```
2
7
0
1```

【算法分类】二分

【题解分析与结论】
该题的核心在于如何高效地统计满足条件的数对 $(i, j)$。暴力枚举的复杂度为 $O(n^2)$，无法通过。优化思路主要基于排序和二分查找，将复杂度降低到 $O(n \log n)$。各题解的核心思路相似，都是先对数组排序，然后通过二分查找确定满足条件的区间。

【评分较高的题解】

1. **作者：Aehnuwx (赞：4)**
   - **星级：4**
   - **关键亮点**：使用 `lower_bound` 和 `upper_bound` 进行二分查找，代码简洁且高效。
   - **核心代码**：
     ```cpp
     for(int i=1;i<=n;i++){
         int l0=lower_bound(a+i+1,a+n+2,l-a[i])-a;
         int r0=upper_bound(a+i+1,a+n+2,r-a[i])-a;
         r0--;
         if(l0>r0) continue;
         ans+=r0-l0+1;
     }
     ```
   - **个人心得**：通过二分查找优化了暴力枚举，显著降低了时间复杂度。

2. **作者：123hh2 (赞：1)**
   - **星级：4**
   - **关键亮点**：同样使用 `lower_bound` 和 `upper_bound`，代码简洁且易于理解。
   - **核心代码**：
     ```cpp
     for(ri int i=1;i<=n;i++){
         int ls=lower_bound(awa+1+i,awa+1+n,l-awa[i])-awa;
         int rs=upper_bound(awa+1+i,awa+1+n,r-awa[i])-awa;
         ans+=rs-ls;
     }
     ```
   - **个人心得**：通过二分查找优化了暴力枚举，显著降低了时间复杂度。

3. **作者：luojien (赞：0)**
   - **星级：4**
   - **关键亮点**：使用 `lower_bound` 和 `upper_bound` 进行二分查找，代码简洁且高效。
   - **核心代码**：
     ```cpp
     for(int i = 1; i <= n; i++){
         int x = lower_bound(a + 1 + i, a + n + 2, (l - a[i])) - a;
         int y = upper_bound(a + 1 + i, a + n + 2, (r - a[i])) - a;
         y--;
         if(x > y) continue;
         ans += (long long)(y - x + 1);
     }
     ```
   - **个人心得**：通过二分查找优化了暴力枚举，显著降低了时间复杂度。

【最优关键思路或技巧】
1. **排序**：首先对数组进行排序，使得后续的二分查找能够高效进行。
2. **二分查找**：使用 `lower_bound` 和 `upper_bound` 确定满足条件的区间，避免暴力枚举。

【可拓展之处】
1. **类似题目**：可以扩展到多组查询或更高维度的数对统计问题。
2. **优化思路**：可以考虑使用其他数据结构如树状数组或线段树进行优化。

【推荐题目】
1. [P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102)
2. [P1631 序列合并](https://www.luogu.com.cn/problem/P1631)
3. [P1496 火烧赤壁](https://www.luogu.com.cn/problem/P1496)

---
处理用时：31.35秒
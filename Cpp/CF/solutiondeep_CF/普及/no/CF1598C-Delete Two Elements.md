# 题目信息

# Delete Two Elements

## 题目描述

有一个有 $n$ 个元素的数组 $a$ 。令 $k$ 为所有元素算术平均数。

求删掉其中两个元素后剩下元素算术平均数仍为 $k$ 的方案数。（注：先删掉第 $i$ 个，再删掉第 $j$ 个元素和先删掉第 $j$ 个元素，再删掉第 $i$ 个元素只算一种方案。）

## 样例 #1

### 输入

```
4
4
8 8 8 8
3
50 20 10
5
1 4 7 3 5
7
1 2 3 4 5 6 7```

### 输出

```
6
0
2
3```

# AI分析结果

### 题目内容重写
有一个包含 $n$ 个元素的数组 $a$。令 $k$ 为所有元素的算术平均数。求删掉其中两个元素后，剩下元素的算术平均数仍为 $k$ 的方案数。（注：先删掉第 $i$ 个，再删掉第 $j$ 个元素和先删掉第 $j$ 个元素，再删掉第 $i$ 个元素只算一种方案。）

### 算法分类
数学

### 题解分析与结论
题解的核心思路是通过数学推导，找到删除的两个元素必须满足的条件，即它们的和等于 $2k$。然后通过哈希表（`map`）或排序加二分查找的方式，统计满足条件的数对数量。难点在于处理重复元素和边界情况，如 $k$ 是否为整数。

### 评分较高的题解

#### 题解1：XL4453
**星级：4.5**
**关键亮点：**
- 通过数学推导得出删除的两个元素必须满足 $x + y = 2k$。
- 使用 `map` 统计每个元素的出现次数，高效统计满足条件的数对。
- 代码简洁，逻辑清晰。

**核心代码：**
```cpp
for(int i=1;i<=n;i++){
    ans+=m[sum-a[i]];
    m[a[i]]++;
}
```
**实现思想：** 遍历数组，对于每个元素 $a[i]$，检查是否存在 $sum - a[i]$ 的元素，并累加满足条件的数对数量。

#### 题解2：xiaozeyu
**星级：4**
**关键亮点：**
- 同样通过数学推导得出删除的两个元素必须满足 $x + y = 2k$。
- 使用 `map` 统计元素出现次数，处理重复元素时减去自身。
- 代码可读性好，逻辑清晰。

**核心代码：**
```cpp
For(i,1,n){
    if(k-a[i]!=a[i])
        ans+=m[k-a[i]];
    else ans+=m[k-a[i]]-1;
}
```
**实现思想：** 遍历数组，对于每个元素 $a[i]$，检查是否存在 $k - a[i]$ 的元素，并累加满足条件的数对数量，处理重复元素时减去自身。

#### 题解3：Chenyichen0420
**星级：4**
**关键亮点：**
- 通过数学推导得出删除的两个元素必须满足 $x + y = 2k$。
- 使用 `map` 统计元素出现次数，处理重复元素时减去自身。
- 代码简洁，逻辑清晰。

**核心代码：**
```cpp
for(int i=1;i<=n;++i){
    ans+=v[sum-a[i]];
    v[a[i]-sum]++;
}
```
**实现思想：** 遍历数组，对于每个元素 $a[i]$，检查是否存在 $sum - a[i]$ 的元素，并累加满足条件的数对数量。

### 最优关键思路或技巧
- **数学推导**：通过数学公式推导出删除的两个元素必须满足的条件，即 $x + y = 2k$。
- **哈希表统计**：使用 `map` 统计每个元素的出现次数，高效统计满足条件的数对。
- **处理重复元素**：在统计数对时，注意处理重复元素的情况，避免重复计数。

### 可拓展之处
- **类似问题**：可以扩展到删除多个元素后，剩下元素的平均数不变的问题。
- **其他数据结构**：可以使用其他数据结构如 `unordered_map` 或排序加二分查找来优化统计过程。

### 推荐题目
1. [P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102)
2. [P1631 序列合并](https://www.luogu.com.cn/problem/P1631)
3. [P1496 火烧赤壁](https://www.luogu.com.cn/problem/P1496)

### 个人心得摘录
- **调试经历**：在处理重复元素时，需要注意减去自身，避免重复计数。
- **顿悟感想**：通过数学推导，可以将问题转化为简单的统计问题，大大简化了代码实现。

---
处理用时：24.55秒
# 题目信息

# Cottage Village

## 题目描述

给定一个坐标轴，轴上有 $n$ 座房子，每座房子的位置是 $x_i$，边长是 $a_i$。有个人想要贴着其中一座房子建造一座他自己的边长为 $t$ 的房子，请输出共有多少种建造方法。

## 说明/提示

$1\le n,t\le10^3$，$0\le|x_i|\le10^3$，$1\le a_i\le10^3$。

---
译自[残阳如血](/user/726139)。

## 样例 #1

### 输入

```
2 2
0 4
6 2
```

### 输出

```
4
```

## 样例 #2

### 输入

```
2 2
0 4
5 2
```

### 输出

```
3
```

## 样例 #3

### 输入

```
2 3
0 4
5 2
```

### 输出

```
2
```

# AI分析结果



# Cottage Village

## 题目描述

给定一个坐标轴，轴上有 $n$ 座房子，每座房子的位置是 $x_i$，边长是 $a_i$。有个人想要贴着其中一座房子建造一座他自己的边长为 $t$ 的房子，请输出共有多少种建造方法。

**说明/提示**  
- $1\le n,t\le10^3$
- $0\le|x_i|\le10^3$
- $1\le a_i\le10^3$

---

## 算法分类
**排序 + 贪心**

---

## 题解分析与结论

### 核心思路
1. **预处理**：将每栋房子的左右端点转换为坐标轴上的实际位置（左端点：$x_i - a_i/2$，右端点：$x_i + a_i/2$）。
2. **排序**：按左端点对所有房子排序，确保相邻房子无重叠。
3. **间隙分析**：遍历每对相邻房子，计算间隙：
   - 间隙 $>t$：可建两座（左右各贴一座）。
   - 间隙 $=t$：只能建一座（紧贴两房交界）。
4. **边界处理**：初始答案设为2（最左端和最右端各可建一座）。

### 最优题解推荐

#### 1. The_Lost_09（★★★★★）
**关键亮点**  
- 直接排序后遍历间隙，逻辑清晰。
- 初始答案设为2，简洁处理边界。
- 代码结构紧凑，无冗余操作。

**核心代码**  
```cpp
sort(a, a+n, cmp); // 按左端点排序
int ans = 2;
for (int i=1; i<n; i++) {
    double gap = a[i].s - a[i-1].f;
    if (gap > t) ans += 2;
    else if (gap == t) ans++;
}
```

#### 2. fls233666（★★★★）
**关键亮点**  
- 分两次遍历避免重复计数（先统计所有可能，再扣除重复）。
- 使用双端检查确保精度正确。
- 个人心得提到排序优化时间复杂度。

**核心代码**  
```cpp
sort(hs+1, hs+1+n, cmp); // 按中心排序
for (int i=1; i<=n; i++) {
    // 检查左右是否可建
    if (左边无房或间隙足够) ans++;
    if (右边无房或间隙足够) ans++;
}
for (int i=2; i<=n; i++) {
    if (间隙等于t) ans--; // 扣除重复
}
```

#### 3. TRZ_2007（★★★★）
**关键亮点**  
- 结构体排序后贪心遍历，代码易读。
- 直接处理间隙大小分类，无额外判断。
- 使用浮点运算避免整数精度问题。

**核心代码**  
```cpp
sort(a+1, a+n+1, cmp); // 按左端点排序
ans = 2;
for (int i=2; i<=n; i++) {
    double gap = a[i].l - a[i-1].r;
    if (gap > t) ans += 2;
    else if (gap == t) ans++;
}
```

---

## 关键技巧总结
1. **排序预处理**：将房子按左端点排序，保证相邻房子有序。
2. **边界处理**：初始答案包含最左/右的两种固定情况。
3. **间隙分类**：按间隙与 $t$ 的关系分三类处理，避免复杂判断。
4. **浮点数精度**：输入数据保证间隙计算无误差，直接比较即可。

---

## 拓展与类似题目
1. **P1056 排座椅**（贪心选择间隔最大的位置）
2. **CF1000C Covered Points Count**（区间覆盖与计数）
3. **P188 线段覆盖**（最大不重叠区间选择）

---
处理用时：275.68秒
# 题目信息

# LuoTianyi and the Show

## 题目描述

有 $n$ 个人观看一场与 VOCALOID 有关的演出，场地里有一行座位，从左到右标号 $1$ 到 $m$，接下来观众将按顺序以如下三种方式中的一种选择座位：

1. 如果没人坐在座位上，就坐在座位 $m$ 上，否则坐在目前最靠左的人的左边。若座位 $1$ 有人，则离开。
2. 如果没人坐在座位上，就坐在座位 $1$ 上，否则坐在目前最靠右的人的右边。若座位 $m$ 有人，则离开。
3. 如果 $x_i$ 没人则坐在 $x_i$，否则离开。

现在知道每个人选择座位的方式，你可以让人们按照任意顺序入场，求最多找到座位的人数。

## 说明/提示

第一组测试样例中，所有人都想占用座位 $5$，因此只有 $1$ 个人能找到座位。

第二组测试样例中，我们可以让人们按照 $1,2,3,4$ 的顺序入场，那么除了最后一个人以外的人都能找到座位。

在第三组测试样例中，我们可以让人们按照这样的顺序入场：  
让第三个人入场：  

| –   | –   | –   | 3   | –   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第四个人入场：  

| –   | –   | –   | 3   | 4   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第五个人入场：

| –   | –   | –   | 3   | 4   | 5   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第一个人入场：

| –   | –   | 1   | 3   | 4   | 5   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第二个人入场：

| –   | 2   | 1   | 3   | 4   | 5   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

于是 $5$ 个人都找到了座位。

在第五组测试样例中，我们可以让人们按照这样的顺序入场：  
让第四个人入场：

| –   | –   | –   | –   | 4   | –   |
| --- | --- | --- | --- | --- | --- |  

让第三个人入场：

| –   | –   | –   | 3   | 4   | –   |
| --- | --- | --- | --- | --- | --- |  

让第六个人入场，由于他选择了第四个座位按照第三种方式入场，但第四个座位已经被占，所以离开：

| –   | –   | –   | 3   | 4   | –   |
| --- | --- | --- | --- | --- | --- |  

让第五个人入场：

| –   | –   | 5   | 3   | 4   | –   |
| --- | --- | --- | --- | --- | --- |  

让第一个人入场：

| –   | 1   | 5   | 3   | 4   | –   |
| --- | --- | --- | --- | --- | --- |  

让第二个人入场：

| 2   | 1   | 5   | 3   | 4   | –   |
| --- | --- | --- | --- | --- | --- | 

于是 $5$ 个人找到了座位。

在第七组测试样例中，我们可以让人们按照这样的顺序入场：  
让第三个人入场：

| 3   | –   | –   | –   | –   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第四个人入场：

| 3   | 4   | –   | –   | –   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第五个人入场：

| 3   | 4   | 5   | –   | –   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第六个人入场：

| 3   | 4   | 5   | 6   | –   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第一个人入场：

| 3   | 4   | 5   | 6   | 1   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

让第二个人入场，他以第一种方式选择座位，而座位 $1$ 被占用，所以离开：

| 3   | 4   | 5   | 6   | 1   | –   | –   |
| --- | --- | --- | --- | --- | --- | --- |  

于是 $5$ 个人找到了座位。

## 样例 #1

### 输入

```
10
3 10
5 5 5
4 6
1 -2 -2 1
5 7
-1 -1 4 -2 -2
6 7
5 -2 -2 -2 -2 -2
6 6
-1 1 4 5 -1 4
6 8
-1 -1 -1 3 -1 -2
6 7
5 -1 -2 -2 -2 -2
3 1
-2 -2 1
2 5
5 -2
1 2
-1```

### 输出

```
1
3
5
6
5
5
5
1
2
1```

# AI分析结果

### 题目内容重写
有 $n$ 个人观看一场与 VOCALOID 有关的演出，场地里有一行座位，从左到右标号 $1$ 到 $m$，接下来观众将按顺序以如下三种方式中的一种选择座位：

1. 如果没人坐在座位上，就坐在座位 $m$ 上，否则坐在目前最靠左的人的左边。若座位 $1$ 有人，则离开。
2. 如果没人坐在座位上，就坐在座位 $1$ 上，否则坐在目前最靠右的人的右边。若座位 $m$ 有人，则离开。
3. 如果 $x_i$ 没人则坐在 $x_i$，否则离开。

现在知道每个人选择座位的方式，你可以让人们按照任意顺序入场，求最多找到座位的人数。

### 算法分类
贪心

### 题解分析与结论
本题的核心在于如何安排观众的入场顺序，以最大化能够入座的人数。题解中主要采用了贪心策略，通过优先安排固定座位的观众，再考虑其他类型的观众，从而最大化利用座位资源。

### 所选题解
1. **作者：PCCP (赞：3)**  
   - **星级：4**  
   - **关键亮点**：通过优先安排固定座位的观众，再考虑其他类型的观众，利用前缀和计算空位，最大化利用座位资源。  
   - **核心代码**：
     ```cpp
     for(int i=1;i<=m;i++){
         if(st[i]-st[i-1]>0){
             ans3=max(ans3,min(k1,i-1-st[i-1])+min(k2,m-i-(st[m]-st[i]))+k3);
         }
     }
     ```
   - **个人心得**：通过前缀和快速计算空位，简化了问题复杂度。

2. **作者：syysongyuyang (赞：2)**  
   - **星级：4**  
   - **关键亮点**：通过枚举每个固定座位的位置，分别计算左右两侧的贡献，取最大值作为结果。  
   - **核心代码**：
     ```cpp
     for (int i=1;i<=m;i++) {
         if (b[i]) {
             ans=max(ans,cnt1+min(cnt2,i-1-cnt)+min(m-i-cnt1+cnt+1,cnt3));
             cnt++;
         }
     }
     ```
   - **个人心得**：通过枚举固定座位的位置，简化了问题的复杂性。

3. **作者：Pt_crN (赞：2)**  
   - **星级：4**  
   - **关键亮点**：通过枚举每个固定座位的位置，计算左右两侧的贡献，取最大值作为结果。  
   - **核心代码**：
     ```cpp
     for(int i=1;i<=k;i++)
         ans=max(ans,min(i-1+a,e[i]-1)+min(k-i+b,m-e[i])+1);
     ```
   - **个人心得**：通过枚举固定座位的位置，简化了问题的复杂性。

### 最优关键思路或技巧
1. **优先安排固定座位的观众**：通过优先安排固定座位的观众，可以确保这些观众能够入座，同时为其他类型的观众留出更多的空位。
2. **利用前缀和计算空位**：通过前缀和快速计算空位，简化了问题复杂度，提高了计算效率。
3. **枚举固定座位的位置**：通过枚举每个固定座位的位置，分别计算左右两侧的贡献，取最大值作为结果，确保能够最大化利用座位资源。

### 可拓展之处
本题的贪心策略可以应用于类似的资源分配问题，如任务调度、资源分配等。通过优先安排固定资源，再考虑其他类型的资源，可以最大化资源的利用率。

### 推荐题目
1. [P1880 [NOI1995]石子合并](https://www.luogu.com.cn/problem/P1880)
2. [P1090 [NOIP2004 提高组] 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1048 [NOIP2005 普及组] 采药](https://www.luogu.com.cn/problem/P1048)

---
处理用时：27.73秒
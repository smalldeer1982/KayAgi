# 题目信息

# Smilo and Monsters

## 题目描述

在 Smilo 的游戏中，有 $n$ 群怪兽，第 $i$ 群怪兽的数量为 $a_i$。游戏的目标是消灭所有的怪兽，有两种攻击方式：

- 普攻：任选一群怪兽，击杀其中的一只，并让连击点数 $x$ 增加 $1$。
- 大招：选择一群数量不小于 $x$（$x$ 是目前的连击点数）的怪兽，击杀其中的 $x$ 只，并让连击点数归零。

一次普攻或一次大招记作一次攻击。初始连击点数为 $0$，请求出消灭所有怪兽的最少攻击次数。

## 样例 #1

### 输入

```
4
4
1 3 1 1
4
1 2 1 1
6
3 2 1 5 2 4
2
1 6```

### 输出

```
4
4
11
5```

# AI分析结果



# Smilo and Monsters

## 题目描述

在 Smilo 的游戏中，有 $n$ 群怪兽，第 $i$ 群怪兽的数量为 $a_i$。游戏的目标是消灭所有的怪兽，有两种攻击方式：

- 普攻：任选一群怪兽，击杀其中的一只，并让连击点数 $x$ 增加 $1$。
- 大招：选择一群数量不小于 $x$（$x$ 是目前的连击点数）的怪兽，击杀其中的 $x$ 只，并让连击点数归零。

一次普攻或一次大招记作一次攻击。初始连击点数为 $0$，请求出消灭所有怪兽的最少攻击次数。

## 算法分类
贪心

---

### 综合题解分析
各题解核心思路一致：总血量的一半作为大招处理量，排序后优先处理大群怪兽，剩余用普攻处理。关键点在于贪心最大化大招价值，通过排序优化处理顺序。

#### 高分题解（≥4星）

1. **作者：_cpp（5星）**
   - **亮点**：思路清晰，代码简洁，通过排序后逆序处理大群，巧妙利用总血量的一半作为大招处理上限。
   - **代码核心**：
     ```cpp
     sort(a + 1, a + n + 1);
     s /= 2; // 大招总处理量
     for(int i = n; i >= 1; i--) { // 逆序处理大群
         if(s >= a[i]) { // 大招能完全消灭
             s -= a[i];
             a[i] = 0;
             ans++;
         } else if(s > 0) { // 部分消灭
             a[i] -= s;
             ans++;
             break;
         }
     }
     ans += accumulate(a+1, a+n+1, 0LL); // 剩余普攻
     ```

2. **作者：BugGod（5星）**
   - **亮点**：代码简洁高效，直接按降序处理，逻辑与_cpp一致，变量命名更直观。
   - **代码片段**：
     ```cpp
     sort(a+1, a+1+n, greater<int>()); // 降序排序
     int boom = sum_total / 2; // 大招总处理量
     for(int i=1; i<=n; i++) {
         if(boom >= a[i]) { // 完整处理
             boom -= a[i];
             a[i] = 0;
             ans++;
         } else if(boom > 0) { // 部分处理
             a[i] -= boom;
             ans++;
             break;
         }
     }
     ans += accumulate(a+1, a+n+1, 0); // 剩余普攻
     ```

3. **作者：tai_chi（4星）**
   - **亮点**：逻辑与前述解法一致，代码结构清晰，采用vector和标准库函数提升可读性。
   - **代码片段**：
     ```cpp
     sort(a.begin() + 1, a.end());
     sum /= 2; // 大招处理量
     for(int i = n; i >= 1; i--) {
         if(sum >= a[i]) {
             sum -= a[i];
             a[i] = 0;
             ans++;
         } else if(sum) {
             a[i] -= sum;
             sum = 0;
             ans++;
             break;
         }
     }
     ans += accumulate(a.begin(), a.end(), 0LL); // 剩余普攻
     ```

---

### 关键思路总结
1. **贪心策略**：将总血量的一半作为大招处理量（$\lfloor \frac{\sum a_i}{2} \rfloor$），最大化大招的群体伤害。
2. **排序优化**：将怪兽群从大到小排序，优先用大招处理大群，减少后续普攻次数。
3. **双阶段处理**：先处理能被大招完全消灭的群，剩余血量用普攻补足。

---

### 拓展与心得
- **同类问题**：类似贪心问题如"活动选择"（优先选结束早的）或"背包问题"（单位价值优先）。
- **调试心得**：注意数据范围需用`long long`；排序方向影响处理顺序，降序排序是关键。
- **举一反三**：当需要最大化单次操作收益时，优先处理规模大的子问题。

---

### 推荐习题
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心+优先队列
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223) - 排序贪心
3. [P1016 旅行家的预算](https://www.luogu.com.cn/problem/P1016) - 贪心策略优化

---
处理用时：202.49秒
# 题目信息

# Little Elephant and Interval

## 题目描述

小象非常喜欢区间中的数.

此时他有一対整数$l$和$r(l <= r)$. 小象需要找到满足以下条件的$x ( l <= x <= r) $,使得数x的第一个数字与最后一个数字相等. 例如, $101, 477474,9$是符合这个条件的,而$47, 253, 1020$则不符合.

请帮助他找到符合这个条件的数的数目.

## 样例 #1

### 输入

```
2 47
```

### 输出

```
12
```

## 样例 #2

### 输入

```
47 1024
```

### 输出

```
98
```

# AI分析结果



**题目内容**  
# 小象与区间  

## 题目描述  
小象非常喜欢区间中的数。  
此时他有一对整数$l$和$r(l \leq r)$。小象需要找到满足以下条件的$x ( l \leq x \leq r) $，使得数x的第一个数字与最后一个数字相等。例如，$101, 477474,9$是符合这个条件的，而$47, 253, 1020$则不符合。  
请帮助他找到符合这个条件的数的数目。  

---

**算法分类**  
数学  

---

### 题解分析与结论  
所有题解均采用数学规律+前缀和思想，核心思路是将区间问题转化为两段前缀的差值。关键发现是：  
1. 对于≥10的数，每10个数至少有1个合法数（如11,22,...,101,111等）  
2. 当首数字>末数字时，该分组的最后一个数不合法（如31的首位3>末位1，则31不合法）  
3. 利用前缀和避免复杂边界处理  

---

### 精选题解  
1. **123456zmy（⭐⭐⭐⭐⭐）**  
   **核心思路**：  
   ```cpp  
   long long ans_(long long k) {
       if(k<10) return k;
       long long ans=k/10+9, ans1=k%10;
       while(k>9) k/=10; // 取首数字
       return ans-(k>ans1); // 首>末则减1
   }  
   ```  
   **亮点**：代码最简练，直接通过k/10+9计算基础值，巧妙利用循环取首数字，逻辑清晰可读性强  

2. **Anins（⭐⭐⭐⭐）**  
   **思路验证**：通过列举案例验证规律，如：  
   ```  
   33的合法数计算：33/10=3 → 3+9=12，首位3=末位3 → 结果12  
   36的计算：36/10=3 → 3+9=12，首位3<末位6 → 结果12  
   ```  
   **代码特征**：分离首末位函数，增强可维护性  

3. **dxy2020（⭐⭐⭐⭐）**  
   **代码亮点**：  
   ```cpp  
   inline int Getsum(int u){
       return u<=9 ? u : u/10+9 - (First(u) > Last(u));
   }  
   ```  
   **技巧**：三目运算符与内联函数结合，将核心逻辑压缩至单行  

---

### 关键实现技巧  
```cpp  
// 计算1~n的合法数数量
long long solve(long long n) {
    if(n < 10) return n;
    long long base = n/10 + 9;       // 基础值：每10个至少1个合法
    int first = n/10的循环取首;      // 如n=47→47→4→退出循环
    return base - (first > n%10);    // 首>末时减1
}
```  

---

### 拓展训练  
1. [P1217 [USACO1.5]回文质数](https://www.luogu.com.cn/problem/P1217)  
   - 同时考察数位特征与质数判断  
2. [P1553 数字反转（升级版）](https://www.luogu.com.cn/problem/P1553)  
   - 处理首尾零与数位操作  
3. [CF1538F Interesting Function](https://codeforces.com/problemset/problem/1538/F)  
   - 数位变化次数的数学规律  

---

### 题解心得摘录  
- **Colead**：  
  > "中间部分用O(1)计算，两边特判容易写挂，改用前缀和将边界问题简化为单侧判断"  
  - **总结**：复杂边界问题可通过数学变换转为单侧处理  
- **zhanghx0219**：  
  > "将最后一位分离后，前半部分可能产生的数已包含各种位数的情况"  
  - **启示**：数位问题中，分离高低位可自然处理不同位数的情形

---
处理用时：57.94秒
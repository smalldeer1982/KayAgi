# 题目信息

# Roma and Changing Signs

## 题目描述

一个人要统计他所在公司的总收入并且他想使总收入达到最大，收入写在一条清单上，总收入是清单上所有数之和。



他有 $k$ 次操作的机会，每次操作可以将某个数一个数变成其相反数，例如 $1$ 变成 $−1$ （注意，他必须严格执行 $k$ 次）问总收入最大是多少？

## 说明/提示

在第一个样例中，我们可以得到序列 $[1,1,1]$ ，因此总收入等于 $3$。



在第二个样例中，我们可以得到序列 $[-1,1,1]$，因此总收入等于 $1$。

## 样例 #1

### 输入

```
3 2
-1 -1 1
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3 1
-1 -1 1
```

### 输出

```
1
```

# AI分析结果



# Roma and Changing Signs

## 题目描述  
一个人要统计他所在公司的总收入并且他想使总收入达到最大，收入写在一条清单上，总收入是清单上所有数之和。  

他有 $k$ 次操作的机会，每次操作可以将某个数变成其相反数（例如 $1$ 变成 $-1$），必须严格执行 $k$ 次操作。问最大可能的总收入是多少？

## 说明/提示  
样例1：输入 `3 2 -1 -1 1`，输出 `3`（操作后得到 [1,1,1]）  
样例2：输入 `3 1 -1 -1 1`，输出 `1`（操作后得到 [-1,1,1]）

---

**算法分类**：贪心

---

## 题解分析与结论

### 核心思路对比
所有题解均采用**贪心策略**，核心步骤一致：
1. **优先反转负数**：将最小的负数依次反转成正数
2. **处理剩余操作次数**：若剩余次数为奇数，对最小元素取反（只需调整1次）

### 最优题解亮点

#### 1. 作者：Molina（⭐⭐⭐⭐⭐）  
**核心亮点**：  
- 代码最简：输入时即时处理负数，避免额外存储
- 逻辑清晰：单次排序解决最小值定位
- 数学优化：直接通过 `ans-2*a[1]` 处理奇数次剩余

```cpp
for(int i=1;i<=n;i++){
    cin>>a[i];
    if(a[i]<0 && k>0) a[i]=-a[i],k--; // 即时处理负数
    ans+=a[i];
}
sort(a+1,a+n+1); // 单次排序确定最小值
if(k%2) cout<<ans-2*a[1];
```

#### 2. 作者：_int123_（⭐⭐⭐⭐）  
**关键技巧**：  
- 显式维护最小值：遍历时记录 `mini=min(mini,a[i])`
- 避免重复排序：在输入阶段完成最小值追踪

```cpp
for(int i=1;i<=n;i++){
    cin>>a[i];
    if(a[i]<0 && k>0) a[i]=-a[i],k--;
    mini=min(mini,a[i]); // 动态更新最小值
    ans+=a[i];
}
if(k%2) ans-=2*mini;
```

#### 3. 作者：oimaster（⭐⭐⭐⭐）  
**特殊处理**：  
- 零值优化：遇到零时直接耗尽剩余操作次数
- 二次排序：确保处理后的最小值准确性

```cpp
sort(a,a+n);
int j=0;
while(a[j]<0 && m>0){
    a[j]*=-1; 
    m--; j++; 
}
if(a[j]==0) m=0; // 零值特殊处理
sort(a,a+n);
if(m%2) a[0]*=-1;
```

---

## 关键技巧总结
1. **贪心优先级**：先处理绝对值大的负数，最大化每次操作的收益
2. **奇偶性处理**：剩余奇数次操作只需调整最小元素一次
3. **空间优化**：在输入阶段即时处理负数，避免额外数组存储
4. **零值优化**：零的存在可以直接消除剩余操作次数的影响

---

## 同类题目推荐
1. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223) - 经典贪心排序
2. [P1803 线段覆盖](https://www.luogu.com.cn/problem/P1803) - 区间选择贪心
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 优先队列贪心

---

## 题解个人心得摘录
"在输入时即时处理负数，可以省去后续遍历的开销" —— Molina  
"注意测试用例中存在全负数且k>n的情况，此时要重新排序找最小值" —— hexuchen  
"WA了三次才意识到必须严格操作k次，不能提前终止" —— oimaster

---
处理用时：49.57秒
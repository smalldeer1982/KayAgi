# 题目信息

# Archer

## 题目描述

小R是一个弓箭手，他正在与 $Zanoes$ 进行弓箭手之间的对决。他们轮流尝试着射中目标，小R先射。小R每次射中目标的概率是 $\frac{a}{b}$ , $Zanoes$ 的概率是 $\frac{c}{d}$。
首先射中目标的人获胜。

请计算小R获胜的概率。
小R是一个弓箭手，他正在与 $Zanoes$ 进行弓箭手之间的对决。他们轮流尝试着射中目标，小R先射。小R每次射中目标的概率是 $\frac{a}{b}$ , $Zanoes$ 的概率是 $\frac{c}{d}$。
首先射中目标的人获胜。

请计算小R获胜的概率。

## 样例 #1

### 输入

```
1 2 1 2
```

### 输出

```
0.666666666667```

# AI分析结果



**题目重写**

## 题目描述

小R是一个弓箭手，他正在与 $Zanoes$ 进行弓箭手之间的对决。他们轮流尝试着射中目标，小R先射。小R每次射中目标的概率是 $\frac{a}{b}$，$Zanoes$ 的概率是 $\frac{c}{d}$。首先射中目标的人获胜。请计算小R获胜的概率。

---

**算法分类**  
概率论

---

**题解分析与结论**  
本题核心在于将无限轮次射击的概率转化为闭合公式。最优思路是通过数学推导建立等比数列模型或方程，将无限过程转化为有限计算：

1. **数学建模**：设每轮两人均未射中的概率为 $x = (1-\frac{a}{b})(1-\frac{c}{d})$，则小R获胜概率为无限级数 $p \cdot (1 + x + x^2 + \dots )$。
2. **等比求和**：利用无限递缩等比数列求和公式 $S = \frac{a_1}{1-q}$，最终公式为 $\frac{a/b}{1 - (1-a/b)(1-c/d)}$。
3. **方程思想**：通过递归关系 $f = p + x \cdot f$ 直接推导出闭合解。

---

**优质题解推荐（评分≥4星）**

1. **到底几只鱼呢（五星）**  
   **亮点**：严格应用全概率公式，清晰推导等比数列求和过程，代码简洁高效。  
   **核心代码**：  
   ```cpp
   printf("%.12lf", (a/b) / (1 - (1-a/b)*(1-c/d)));
   ```

2. **nekko（五星）**  
   **亮点**：通过方程建模 $f = p + x \cdot f$，直接化简得到结果，思路简洁。  
   **核心代码**：  
   ```cpp
   ans = (a / b) / (1 - (1 - a / b) * (1 - c / d));
   ```

3. **Mysterious_Mini（四星）**  
   **亮点**：通过分步推导明确展示递归逻辑，代码实现与公式对应性强。  
   **核心代码**：  
   ```cpp
   printf("%.8lf\n", tmp1 / (1 - (1 - tmp1) * (1 - tmp2)));
   ```

---

**关键思路总结**  
- **无限过程有限化**：将无限轮次抽象为等比数列或方程，避免暴力模拟。
- **概率事件分解**：利用全概率公式将复杂事件拆分为互斥事件的累加。
- **闭合公式优化**：通过数学化简将计算复杂度降至 $O(1)$。

---

**类似题目推荐**  
1. [CF312B Archer](https://www.luogu.com.cn/problem/CF312B)（原题）
2. [P2719 搞笑世界杯](https://www.luogu.com.cn/problem/P2719)（概率递推）
3. [P1850 换教室](https://www.luogu.com.cn/problem/P1850)（期望与概率结合）

---
处理用时：51.49秒
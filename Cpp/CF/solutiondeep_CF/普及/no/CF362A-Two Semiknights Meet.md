# 题目信息

# Two Semiknights Meet

## 题目描述

一个名叫彼佳的男孩非常喜欢国际象棋。他甚至发明出了一种棋——“半骑士”。半骑士可以在这四个方向中的任何一个方向移动：向右前方2个方格，向左前方2个方格，向左后方2个方格，向右后方2个方格（译注：类似中国象棋中的象），当然，半骑士不能走出棋盘。



彼佳在标准棋盘上放了两个半骑士并同时移动它们。棋盘相当大，所以经过一些移动后半骑士可能相遇，也就是说，它们最终可能会在同一个方格中，这称为一次会面。会面结束后，半骑士们可以继续前进，因此它们有可能再次见面。彼佳认为一些方格不好。也就是说，它们不适合会面。 半骑士们可以穿过这些方格，但他们在这些方格中的会面不计算在内。



彼佳准备了多个国际象棋棋盘。帮助彼佳找出半骑士是否可以在每个棋盘的某个好方格上相遇。



请结合测试数据分析。

## 说明/提示

我们将假设矩阵的行和列从上到下和从左到右编号为1到8。在第一块棋盘中，半骑士们可以在方格（2,7）中相遇。在方格（4,1）的半骑士进入方格（2,3），在方格（8,1）的半骑士进入方格（6,3）。 然后两个半骑士进入（4,5），但这个方格被认为是坏的，所以他们一起移动到方格（2,7）。



在第二块板上，半骑士们将永远不会见面。

## 样例 #1

### 输入

```
2
........
........
......#.
K..##..#
.......#
...##..#
......#.
K.......

........
........
..#.....
..#..#..
..####..
...##...
........
....K#K#
```

### 输出

```
YES
NO
```

# AI分析结果



# 题目内容重写

## 题目描述

一个名叫彼佳的男孩非常喜欢国际象棋。他甚至发明出了一种棋——"半骑士"。半骑士可以在这四个方向中的任何一个方向移动：向右前方2个方格，向左前方2个方格，向左后方2个方格，向右后方2个方格（类似中国象棋中的象），当然，半骑士不能走出棋盘。

彼佳在标准棋盘上放了两个半骑士并同时移动它们。棋盘相当大，所以经过一些移动后半骑士可能相遇，也就是说，它们最终可能会在同一个方格中，这称为一次会面。会面结束后，半骑士们可以继续前进，因此它们有可能再次见面。彼佳认为一些方格不好。即它们不适合会面。半骑士们可以穿过这些方格，但他们在这些方格中的会面不计算在内。

彼佳准备了多个国际象棋棋盘。帮助彼佳找出半骑士是否可以在每个棋盘的某个好方格上相遇。

## 说明/提示

我们将假设矩阵的行和列从上到下和从左到右编号为1到8。在第一块棋盘中，半骑士们可以在方格（2,7）中相遇。在方格（4,1）的半骑士进入方格（2,3），在方格（8,1）的半骑士进入方格（6,3）。然后两个半骑士进入（4,5），但这个方格被认为是坏的，所以他们一起移动到方格（2,7）。

在第二块板上，半骑士们将永远不会见面。

---

**算法分类**: 数学

---

# 题解分析与结论

## 核心思路
所有题解均基于以下数学观察：
1. 半骑士每次移动会改变坐标的奇偶性（走田字步）
2. 两个半骑士横纵坐标差必须同时是4的倍数才可能相遇
3. 坏格子的存在不影响可能性判定，只需保证存在至少一个可行路径

## 高分题解推荐

### 1. yangjinqian（5星）
**关键亮点**：
- 通过严谨的数学推导证明坐标差必须是4的倍数
- 代码简洁高效（O(1)时间复杂度）
- 正确指出坏格子不影响结果判定

**核心代码**：
```cpp
if (abs(x1 - x2) % 4 == 0 && abs(y1 - y2) % 4 == 0) cout << "YES";
```

### 2. qusia_MC（4星）
**关键亮点**：
- 结合图示说明坐标差的变化规律
- 给出详细的移动示例帮助理解
- 代码包含清晰的坐标读取逻辑

**核心代码**：
```cpp
cx = abs(x2 - x1);
cy = abs(y2 - y1);
if (cx%4==0 && cy%4==0) cout << "YES";
```

### 3. 玉树临风英俊潇洒（4星）
**关键亮点**：
- 简明扼要直击问题本质
- 指出起点必为合法格的隐含条件
- 代码采用标志位简化坐标记录

**核心代码**：
```cpp
if ((ex - sx) % 4 == 0 && (ey - sy) % 4 == 0) puts("YES");
```

---

# 最优解题思路
**关键数学规律**：  
设两个半骑士的坐标分别为(x₁,y₁)、(x₂,y₂)，当且仅当同时满足：
1. |x₁ - x₂| ≡ 0 (mod 4)
2. |y₁ - y₂| ≡ 0 (mod 4)

才能通过交替移动相遇。这是因为每次移动会使坐标差变化±4或保持0，最终必须达到0差。

---

# 拓展应用
1. **同类问题**：棋盘类移动问题常涉及奇偶性、周期性、模数规律分析
2. **优化方向**：当需要处理大量棋盘时，可预处理坐标差直接判断
3. **变形思考**：若改为必须经过特定格子，则需要结合BFS验证路径

---

# 推荐练习
1. [P1217 回文质数](https://www.luogu.com.cn/problem/P1217)（数学规律）
2. [P1036 选数](https://www.luogu.com.cn/problem/P1036)（组合数学）
3. [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141)（坐标连通性分析）

---
处理用时：56.79秒
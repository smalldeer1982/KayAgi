# 题目信息

# Dima and To-do List

## 题目描述

你曾帮助 Dima 度过愉快的周末，不过现在是时候工作了。像很多有女友的男人一样，Dima 总是把事情搞砸。

此时 Inna 和 Dima 在同一个房间。Inna 会责备 Dima 所做的一切。当 Inna 责备过 Dima 后，她会去到另一个房间，在那里一边走动一边抱怨她的男友有多么无用。此时，Dima 有时间安心地完成 $k-1$ 个任务。Inna 随后会返回，继续责备 Dima 做的下一件事，然后再次离开房间。这过程反复进行，直到 Dima 完成所有任务。

一共，Dima 有 $n$ 个任务，每个任务都有编号 $1$ 到 $n$。Dima 喜欢按序进行，所以他会从某个任务开始顺序执行。例如，如果 Dima 共有 $6$ 个任务，并且从第 $5$ 个任务开始，他的顺序会是：第 $5$，第 $6$，第 $1$，第 $2$，第 $3$，最后是第 $4$。

Inna 的责备（充满爱心和适度！）经常且有规律，以至于 Dima 已深知她对每个任务责备的力度。请帮 Dima 选择一个最优的起始任务，使他受到的责备力度总和最小。

## 说明/提示

**示例 1 解释：**

如果 Dima 从第一个任务开始，Inna 会以力度 3 对他责备，然后 Dima 能继续额外完成一个任务（因为 $k = 2$），接下来 Inna 对他完成的第三个任务以力度 1 责备，再接着以力度 5 责备第五个任务。因此，Dima 的总责备力度为 $3 + 1 + 5 = 9$。若 Dima 从第二个任务开始，Inna 会以力度 2、6 和 4 责备他第二、第四和第六个任务，总力度为 $2 + 6 + 4 = 12$。

**示例 2 解释：**

在第二个例子中，$k = 5$，Dima 可以在每次责备之间完成 4 个任务。因此，无论他从任务 1 或 6 开始，Inna 会责备他任务 1 和 6；如果他从任务 2 或 7 开始，则责备他任务 2 和 7，等等。最优选是从任务 3 或 8 开始，选择编号较小的 3，答案是 3。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
6 2
3 2 1 6 5 4
```

### 输出

```
1
```

## 样例 #2

### 输入

```
10 5
1 3 5 7 9 9 4 1 8 5
```

### 输出

```
3
```

# AI分析结果



# Dima and To-do List

## 题目描述

你曾帮助 Dima 度过愉快的周末，不过现在是时候工作了。像很多有女友的男人一样，Dima 总是把事情搞砸。

此时 Inna 和 Dima 在同一个房间。Inna 会责备 Dima 所做的一切。当 Inna 责备过 Dima 后，她会去到另一个房间，在那里一边走动一边抱怨她的男友有多么无用。此时，Dima 有时间安心地完成 $k-1$ 个任务。Inna 随后会返回，继续责备 Dima 做的下一件事，然后再次离开房间。这过程反复进行，直到 Dima 完成所有任务。

一共，Dima 有 $n$ 个任务，每个任务都有编号 $1$ 到 $n$。Dima 喜欢按序进行，所以他会从某个任务开始顺序执行。例如，如果 Dima 共有 $6$ 个任务，并且从第 $5$ 个任务开始，他的顺序会是：第 $5$，第 $6$，第 $1$，第 $2$，第 $3$，最后是第 $4$。

Inna 的责备（充满爱心和适度！）经常且有规律，以至于 Dima 已深知她对每个任务责备的力度。请帮 Dima 选择一个最优的起始任务，使他受到的责备力度总和最小。

## 说明/提示

**示例 1 解释：**

如果 Dima 从第一个任务开始，Inna 会以力度 3 对他责备，然后 Dima 能继续额外完成一个任务（因为 $k = 2$），接下来 Inna 对他完成的第三个任务以力度 1 责备，再接着以力度 5 责备第五个任务。因此，Dima 的总责备力度为 $3 + 1 + 5 = 9$。若 Dima 从第二个任务开始，Inna 会以力度 2、6 和 4 责备他第二、第四和第六个任务，总力度为 $2 + 6 + 4 = 12$。

**示例 2 解释：**

在第二个例子中，$k = 5$，Dima 可以在每次责备之间完成 4 个任务。因此，无论他从任务 1 或 6 开始，Inna 会责备他任务 1 和 6；如果他从任务 2 或 7 开始，则责备他任务 2 和 7，等等。最优选是从任务 3 或 8 开始，选择编号较小的 3，答案是 3。

**分类**：数学、贪心

## 题解分析

### 关键思路
1. **数学分组**：利用 `gcd(n, k)` 将起始位置分为若干组，每组内起始位置的总责备力度相同。
2. **模运算优化**：通过计算每个起始位置对应的等差数列（公差为k）在模n意义下的总和，避免重复计算。
3. **最小化选择**：每组的总和计算后，选择总和最小的组，并取组内最小的起始编号。

### 核心代码实现
```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int n, k;
    cin >> n >> k;
    vector<int> a(n);
    for (int i = 0; i < n; ++i) cin >> a[i];
    
    int g = gcd(n, k);
    int m = n / g;
    vector<long long> sum(g, 0);
    
    for (int r = 0; r < g; ++r) {
        for (int i = 0; i < m; ++i) {
            int pos = (r + i * k) % n;
            sum[r] += a[pos];
        }
    }
    
    int min_r = 0;
    for (int r = 1; r < g; ++r) {
        if (sum[r] < sum[min_r]) min_r = r;
    }
    
    cout << min_r + 1 << endl;
    return 0;
}
```

### 解决难点
1. **循环节识别**：通过计算 `gcd(n, k)` 确定循环节长度，避免对每个起始位置单独计算。
2. **复杂度优化**：将时间复杂度从 $O(n^2)$ 降为 $O(n)$，适用于大规模数据。

### 扩展思路
- **滑动窗口变种**：类似问题可通过寻找循环节或模数分组优化。
- **前缀和优化**：在固定步长的场景下，预处理前缀和可进一步优化计算。

## 相似题目
- [P1031 均分纸牌](https://www.luogu.com.cn/problem/P1031) - 贪心与数学结合
- [P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102) - 哈希与模运算
- [P1638 逛画展](https://www.luogu.com.cn/problem/P1638) - 滑动窗口与优化

---
处理用时：273.10秒
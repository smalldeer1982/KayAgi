# 题目信息

# Inna and Nine

## 题目描述

### 题目翻译

Inna 特别喜欢数字 $9$，所以她要 Dima 帮她写一个仅由 $9$ 构成的比较小的数。但是 Dima 肯定没有理解她的意思，并且他写了一个由 $1$ 到 $9$ 构成的一个非常大的数。

Inna 想稍微改变一下 Dima 写的数字，最后使这个数字中含有尽量多的数字 $9$。在一步中，Inna 可以选择两个和为 $9$ 并且相邻的数字，并用一个数字 $9$ 来替换掉它们。

比如，Inna 可以这样改变数字 $14545181$：$14545181 → 1945181 → 194519 → 19919$。另外，她还可以用这个方法将 $14545181$ 转化为 $19991$。Inna 并不会把它变成 $149591$ 所以她能得到 $19919$ 和 $19991$ 以包含更多数字 $9$。

## 说明/提示

样例注意事项

第一个样例中，Inna 可以获得以下数字：$369727 → 99727 → 9997$，$369727 → 99727 →9979$。

第二个样例中，Inna 可以这样做：$123456789987654321 → 12396789987654321 → 1239678998769321$。

## 样例 #1

### 输入

```
369727
```

### 输出

```
2
```

## 样例 #2

### 输入

```
123456789987654321
```

### 输出

```
1
```

## 样例 #3

### 输入

```
1
```

### 输出

```
1
```

# AI分析结果



# Inna and Nine

## 题目描述

### 题目翻译

Inna 特别喜欢数字 $9$，所以她要 Dima 帮她写一个仅由 $9$ 构成的比较小的数。但是 Dima 肯定没有理解她的意思，并且他写了一个由 $1$ 到 $9$ 构成的一个非常大的数。

Inna 想稍微改变一下 Dima 写的数字，最后使这个数字中含有尽量多的数字 $9$。在一步中，Inna 可以选择两个和为 $9$ 并且相邻的数字，并用一个数字 $9$ 来替换掉它们。

比如，Inna 可以这样改变数字 $14545181$：$14545181 → 1945181 → 194519 → 19919$。另外，她还可以用这个方法将 $14545181$ 转化为 $19991$。Inna 并不会把它变成 $149591$ 所以她能得到 $19919$ 和 $19991$ 以包含更多数字 $9$。

## 说明/提示

样例注意事项

第一个样例中，Inna 可以获得以下数字：$369727 → 99727 → 9997$，$369727 → 99727 →9979$。

第二个样例中，Inna 可以这样做：$123456789987654321 → 12396789987654321 → 1239678998769321$。

## 样例 #1

### 输入

```
369727
```

### 输出

```
2
```

## 样例 #2

### 输入

```
123456789987654321
```

### 输出

```
1
```

## 样例 #3

### 输入

```
1
```

### 输出

```
1
```

**算法分类**：组合数学

---

### 题解分析与结论

本题核心在于识别连续可合并区间的奇偶性，并通过组合数学计算方案数。关键思路分为两种流派：

1. **分块计数法**：将字符串划分为连续可合并区间（相邻数字和为9的序列），对奇数长度区间计算组合数。
2. **动态规划法**：维护合并与不合并两种状态的9的个数及方案数，通过状态转移处理所有可能性。

分块法更简洁高效，动态规划更普适但复杂。最优解法为分块计数法，时间复杂度 $O(n)$，空间复杂度 $O(1)$。

---

### 高分题解推荐

#### 题解1：RiceFruit（★★★★☆）
**亮点**：  
- 提出奇块偶块分类思想，推导出奇块方案数为 $(k+1)/2$  
- 代码简洁，仅需一次遍历统计块长度  
**核心代码**：  
```cpp
for(int i=1;i<=t;i++)
    if(k[i]&1) ans *= (k[i]/2 +1);
```

#### 题解2：hexu2010（★★★★☆）  
**亮点**：  
- 通过实例推导奇块公式，数学证明更严谨  
- 清晰图解块划分逻辑  
**核心思路**：  
> 奇数长度块 $2n+1$ 对应 $n+1$ 种方案，转化为 $\frac{块长+1}{2}$

---

### 最优思路提炼
**关键技巧**：  
1. **块划分**：扫描相邻和为9的连续区间  
2. **奇块公式**：奇数长度块的方案数等于 $\frac{块长+1}{2}$  
3. **乘法原理**：各独立块的方案数相乘得最终结果  

**实现要点**：  
- 注意连续块边界处理  
- 必须使用 long long 防止溢出  
- 单字符特例直接返回1  

---

### 类似题目推荐
1. [CF991B  Getting an A](https://www.luogu.com.cn/problem/CF991B)  
   **相似点**：数字替换最大化特定数值  
2. [P1026 统计单词个数](https://www.luogu.com.cn/problem/P1026)  
   **相似点**：字符串划分与组合计数  
3. [P7078 括号序列](https://www.luogu.com.cn/problem/P7078)  
   **相似点**：连续区间性质分析与组合数学  

---

### 题解个人心得摘录
**RiceFruit 调试经验**：  
> "偶块若中间配对会减少9的总数，必须严格按奇偶位置配对" → 避免贪心错误配对  

**hexu2010 数学推导**：  
> "通过 $18181$ 的三种方法发现奇数块的插入规律" → 实例辅助公式推导  

**CrazyEagle 状态设计**：  
> "维护合并与不合并两种状态，需注意转移条件" → DP 状态机思维

---
处理用时：53.62秒
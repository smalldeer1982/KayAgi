# 题目信息

# Spyke Chatting

## 题目描述

R2 公司有 $n$ 名员工为其工作。这项工作包括不断交流想法，分享成功的故事和准备迎接即将到来的挑战。为此，R2 使用了著名的即时通讯程序 Spyke。

公司中一共有 $m$ 个聊天室。在每个聊天室中，一些员工会发消息。一名员工可以在多个聊天室中同时交谈。如果某个员工在聊天室中，他可以发送消息，并接收有关该聊天室中消息的通知。如果员工在聊天室中发送消息，则此聊天室的所有其他参与者都会收到消息通知。

现在，专家们正在研究员工之间的有效沟通，为此，他们有一个聊天记录的描述。作为审计专家之一，您将被委托编写一个程序，该程序将使用此数据确定每个员工收到的消息通知总数。

## 样例 #1

### 输入

```
3 4 5
1 1 1 1
1 0 1 1
1 1 0 0
1 1
3 1
1 3
2 4
3 2
```

### 输出

```
3 3 1 ```

## 样例 #2

### 输入

```
4 3 4
0 1 1
1 0 1
1 1 1
0 0 0
1 2
2 1
3 1
1 3
```

### 输出

```
0 2 3 0 ```

# AI分析结果



### 中文重述题目
# Spyke 聊天

## 题目描述

R2 公司有 $n$ 名员工使用 Spyke 通讯程序在 $m$ 个聊天室交流。每个员工可以加入多个聊天室。当某员工在聊天室发送消息时，该聊天室的其他成员都会收到通知。已知 $k$ 条消息记录，求每个员工收到的总通知数。

### 输入格式
- 第一行三个整数 $n,m,k$
- 接下来 $n$ 行，每行 $m$ 个 0/1 表示员工所在聊天室
- 最后 $k$ 行，每行两个整数表示发送消息的员工和聊天室

### 输出格式
- 每个员工收到的消息数

---

### 算法分类
模拟

---

### 题解分析与结论

**核心思路**：通过预处理每个聊天室的总消息数（cnt1）和每个员工发送的消息数（cnt2），最终每个员工的结果 = 所在聊天室总消息数之和 - 自己发送的消息数。

**优化关键**：将时间复杂度从暴力法的 O(kn) 优化到 O(k + nm)，其中 m ≤ 10 使得复杂度可接受。

**解决难点**：避免重复计算同一聊天室的多条消息，处理自发送消息不计入的细节。

---

### 高分题解推荐

#### 1. 作者：DarkShadow（5星）
**亮点**：  
- 清晰的变量命名（cnt1/cnt2）  
- 时间复杂度优化到位  
- 完整处理自发送消息逻辑  

**核心代码**：
```cpp
int cnt1[15], cnt2[20005]; // cnt1:聊天室消息数，cnt2:自发送数
for(int i=1;i<=n;i++){
    ans=0;
    for(int j=1;j<=m;j++)
        if(d[i][j]) ans += cnt1[j];
    ans -= cnt2[i];
    printf("%d ",ans);
}
```

#### 2. 作者：shenbairui（5星）
**亮点**：  
- 代码结构简洁紧凑  
- 使用二维数组直接存储成员关系  
- 包含AC提交验证  

**核心代码**：
```cpp
int b[15],c[20005]; // b:聊天室消息，c:自发送数
for(int i=1;i<=n;i++){
    int ans=0;
    for(int j=1;j<=m;j++)
        if(a[i][j]) ans += b[j];
    ans -= c[i];
    cout<<ans<<" ";
}
```

#### 3. 作者：maomao233（5星）
**亮点**：  
- 使用布尔数组优化空间  
- 变量命名清晰（isin/tot）  
- 完整注释说明  

**核心代码**：
```cpp
int cnt[20005], tot[15]; 
bool isin[20005][15]; // 成员关系
for(int i=1;i<=n;i++){
    ans=0;
    for(int j=1;j<=m;j++)
        if(isin[i][j]) ans += tot[j];
    printf("%d ",ans - cnt[i]);
}
```

---

### 关键技巧总结
1. **预处理统计**：将消息数按聊天室和发送者分类存储，避免重复计算。
2. **空间换时间**：利用 m 较小的特点，用 O(m) 的循环代替 O(n) 遍历。
3. **自消息处理**：通过单独记录自发送次数实现 O(1) 的扣除。

---

### 同类题目推荐
1. [P3619 社交网络](https://www.luogu.com.cn/problem/P3619) - 消息传播统计  
2. [P3374 模擬送信](https://www.luogu.com.cn/problem/P3374) - 类似预处理优化  
3. [P1984 三子棋计数](https://www.luogu.com.cn/problem/P1984) - 状态统计与快速查询

---
处理用时：66.19秒
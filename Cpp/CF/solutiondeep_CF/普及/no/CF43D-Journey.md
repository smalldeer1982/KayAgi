# 题目信息

# Journey

## 题目描述

你现在处于 $n\times m$ 的矩阵中 $(1,1)$ 这个点上。你现在的目标是走完全部点且不能走重复的点。你每一次只能移动 $1$ 格。

但是，你可以在迷宫中的任意一点放置一个传送门，这个传送门可以将你单向传送到一个传送门标记的点。现在求放置传送门次数最少的移动方案。

## 说明/提示

对于 $100\%$ 的数据，保证 $1\le n,m\le100$，$n\times m>1$。
## 提醒
$(1,1)$ 会在起始与末尾各出现一次！

---
Translated by [残阳如血](/user/726139)。

## 样例 #1

### 输入

```
2 2
```

### 输出

```
0
1 1
1 2
2 2
2 1
1 1
```

## 样例 #2

### 输入

```
3 3
```

### 输出

```
1
3 3 1 1
1 1
1 2
1 3
2 3
2 2
2 1
3 1
3 2
3 3
1 1
```

# AI分析结果



### 题目翻译
**题目名称：Journey**

#### 题目描述  
你现在处于 $n\times m$ 的矩阵中的 $(1,1)$ 点。目标是不重复地走完全部点并返回起点。每次只能移动一格，但可以在任意位置放置单向传送门。求传送门使用次数最少的方案。

#### 输入格式  
输入一行两个整数 $n$ 和 $m$。

#### 输出格式  
第一行输出最少传送门数量 $k$。  
接下来 $k$ 行每行描述一个传送门的起点和终点坐标。  
最后输出 $n\times m +1$ 行路径坐标，首尾均为 $(1,1)$。

#### 数据范围  
$1\le n,m\le 100$，$n\times m>1$。

---

### 算法分类  
**构造**

---

### 题解分析与结论  
所有题解的核心思路均为**奇偶性分类讨论**：  
1. **无需传送门**：当至少一个维度为偶数时，构造蛇形路径覆盖所有点。  
2. **需1个传送门**：当两维度均为奇数时，蛇形走到终点后传送回起点。  
3. **特例处理**：单行/单列、极小矩阵（如2×1）需单独处理。

#### 最优关键思路  
- **奇偶性决定传送门数量**：  
  - 若 $n$ 或 $m$ 为偶数，通过蛇形路径直接绕回起点。  
  - 若均为奇数，在终点 $(n,m)$ 放置传送门回起点 $(1,1)$。  
- **路径构造技巧**：  
  - 蛇形遍历时，奇偶行/列方向交替变化。  
  - 单行/单列时，直接遍历后传送回起点。

---

### 高星题解推荐  
#### 1. 作者：_int123_（4星）  
**关键亮点**  
- 全面覆盖所有特例（如单行、单列、2×1矩阵）。  
- 代码逻辑清晰，分情况输出路径。  
**核心代码**  
```cpp
if (m%2 == 0) { // m为偶数时构造横向蛇形
    cout << 0 << endl;
    for (int i = 1; i <= m; i++) cout << "1 " << i << endl;
    for (int i = m; i >= 1; i--) { // 蛇形绕回
        if (i % 2 == 0) for (int j = 2; j <= n; j++) cout << j << " " << i << endl;
        else for (int j = n; j >= 2; j--) cout << j << " " << i << endl;
    }
}
```

#### 2. 作者：sto__Liyhzh__orz（4星）  
**关键亮点**  
- 简洁的奇偶判断与路径生成逻辑。  
- 动态方向控制（flag变量交替方向）。  
**核心代码**  
```cpp
if (n%2 == 1 && m%2 == 1) {
    cout << "1\n" << n << " " << m << " 1 1\n";
    for (int i = 1; i <= n; i++) {
        if (i % 2) for (int j = 1; j <= m; j++) cout << i << " " << j << endl; // 奇数行正向
        else for (int j = m; j >= 1; j--) cout << i << " " << j << endl;        // 偶数行反向
    }
}
```

---

### 拓展与同类题目  
1. **构造路径类问题**：  
   - [P1515 马的遍历](https://www.luogu.com.cn/problem/P1515)  
   - [P1219 八皇后](https://www.luogu.com.cn/problem/P1219)  
2. **奇偶性分析类问题**：  
   - [P1036 选数](https://www.luogu.com.cn/problem/P1036)  

---

### 个人心得摘录  
- **调试教训**：  
  > "当 $n$ 和 $m$ 均为偶数时，必须优先处理 $m$，否则会WA" —— 作者_int123_  
  > "蛇形路径的方向交替必须严格与行号奇偶性绑定" —— 作者sto__Liyhzh__orz  
- **顿悟点**：  
  > "传送门数量只取决于奇偶性，无需复杂计算" —— 多篇题解共识

---
处理用时：61.12秒
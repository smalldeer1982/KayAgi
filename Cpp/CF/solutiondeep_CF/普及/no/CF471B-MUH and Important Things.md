# 题目信息

# MUH and Important Things

## 题目描述

在圣彼得堡动物园的两只北极熊，Menshykov 和 Uslada，及基辅动物园的大象 Horace 的努力下，他们面临着一天的 $ n $ 个任务。每只动物都需完成其中的所有任务，并为每个任务评定了难度。他们决定按照任务的难度顺序来完成这些任务。但由于某些任务难度相同，因此任务的完成顺序可能会有所不同。

Menshykov、Uslada 和 Horace 请你设计各自的完成任务的计划。每个计划都需是一个序列，表示动物完成所有 $ n $ 个任务的顺序。同时，他们有一个特别的要求：每个计划必须与其他计划不同，因此需要形成三个不同的序列。你需要为他们找到这样的计划组合，若无法满足要求则需告知他们这不可能。

## 样例 #1

### 输入

```
4
1 3 3 1
```

### 输出

```
YES
1 4 2 3 
4 1 2 3 
4 1 3 2 
```

## 样例 #2

### 输入

```
5
2 4 1 4 8
```

### 输出

```
NO```

# AI分析结果



# MUH and Important Things

## 题目描述

在圣彼得堡动物园的两只北极熊 Menshykov 和 Uslada，以及基辅动物园的大象 Horace 需要完成 $n$ 个任务。每个任务有各自的难度值，要求设计三个不同的任务完成顺序，使得每个顺序都满足难度非递减排列。若无法构造出三个不同的合法序列，则输出 "NO"。

## 样例 #1

### 输入
```
4
1 3 3 1
```

### 输出
```
YES
1 4 2 3 
4 1 2 3 
4 1 3 2 
```

## 样例 #2

### 输入
```
5
2 4 1 4 8
```

### 输出
```
NO
```

**算法分类**：构造、排序

---

### 题解综合分析

**核心思路**：对任务按难度排序后，必须存在至少两处相邻相同元素，才能构造三个不同的排列。若相邻相同元素对不足两个，则无法满足要求。

**关键难点**：
1. 正确统计相邻重复对的个数（需考虑多个重复元素连续的情况）
2. 生成三个不同排列时，确保交换操作的位置不同
3. 处理元素索引的稳定性排序（当难度相同时按原顺序排序）

---

### 精选题解亮点

#### 题解作者：傅思维666（★★★★☆）
**核心思路**：
1. 对任务结构体排序（难度为第一关键字，原下标为第二关键字）
2. 统计相邻重复元素对数
3. 首先生成原始排序，再分别交换第一个和最后一个相邻重复对

**实现技巧**：
```cpp
// 第一次交换：正序扫描找到第一个重复对
for(int i=1;i<=n;i++)
    if(a[i].v==a[i-1].v) {
        swap(a[i],a[i-1]);
        break;
    }

// 第二次交换：逆序扫描找到最后一个重复对
for(int i=n;i;i--)
    if(a[i].v==a[i-1].v) {
        swap(a[i],a[i-1]);
        break;
    }
```
**亮点**：通过正序和逆序两次扫描确保交换不同位置的重复对，避免了生成重复序列的风险。

**个人心得**：作者在博客中提到"当难度相同时保持原顺序排序，可以简化后续交换逻辑"，这一细节处理保证了交换操作的稳定性。

---

### 最优解法总结
1. **稳定排序**：对相同难度元素按原顺序排序，避免后续交换产生无效操作
2. **双重交换策略**：至少需要两次不同位置的相邻元素交换（若存在两处以上重复对）
3. **构造顺序**：原序 → 交换第一处重复 → 交换最后一处重复（或另一处不同重复）

---

### 类似题目推荐
1. [P1107 最大整数](https://www.luogu.com.cn/problem/P1107) - 构造特殊排序的经典问题
2. [P1110 高低位交换](https://www.luogu.com.cn/problem/P1110) - 基于元素交换的构造技巧
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 利用排序性质设计最优策略

---
处理用时：54.27秒
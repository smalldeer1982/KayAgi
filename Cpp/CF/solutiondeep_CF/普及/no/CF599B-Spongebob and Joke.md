# 题目信息

# Spongebob and Joke

## 题目描述

当派大星去购物时，海绵宝宝决定戏弄一下他的朋友。调皮的海绵宝宝翻看了派大星的个人物品，找到了一个长度为 $ m $ 的序列 $ a_{1},a_{2},...,a_{m} $，由整数 $ 1 $ 到 $ n $ 组成，不一定是不同的。然后，他选择了一个长度为 $ n $ 的序列 $ f_{1},f_{2},...,f_{n} $，对于每个数字 $ a_{i} $，得到数字 $ b_{i}=f_{a_i} $。为了完成这个恶作剧，他将初始序列 $ a_{i} $ 扔掉了。

难以想象派大星从购物回来后有多伤心！海绵宝宝马上对自己的所作所为感到非常抱歉，他现在正在尝试恢复原始序列。请你帮助他完成这个任务或确定这是否不可能。

**形式化题意**：给你一个长度为 $n$ 的数组 $f$ 和一个长度为 $m$ 的数组 $b$，并规定 $f_{a_i} = b_i$，请尝试恢复出原数组。如果有多种可能，输出 `Ambiguit`，如果无法还原，输出 `Impossible`。

## 样例 #1

### 输入

```
3 3
3 2 1
1 2 3
```

### 输出

```
Possible
3 2 1 
```

## 样例 #2

### 输入

```
3 3
1 1 1
1 1 1
```

### 输出

```
Ambiguity
```

## 样例 #3

### 输入

```
3 3
1 2 1
3 3 3
```

### 输出

```
Impossible
```

# AI分析结果



【中文重写题目】  
见用户提供的翻译，已完整无误。

【算法分类】  
构造

【题解对比与结论】  
各题解核心思路一致：通过统计 $f$ 中各值的出现次数及对应索引，分情况判断是否可还原。关键点：  
1. **无解**：存在 $b_i$ 不在 $f$ 中。  
2. **多解**：存在 $b_i$ 对应多个 $f$ 中的索引。  
3. **唯一解**：所有 $b_i$ 唯一对应一个索引。  

差异点：部分题解使用二分（效率略低），最优解法通过数组直接统计，时间复杂度 $O(n)$。

【高星题解推荐】  
⭐️⭐️⭐️⭐️ 作者：Yamchip  
**亮点**：逻辑清晰，代码简洁。用 `cntf` 统计次数，`ans` 存储索引，两步遍历分别处理无解和多解。  
```cpp
// 核心代码
int cntf[100005], ans[100005];
for(int i = 1; i <= n; i++) {
    scanf("%d", &f[i]);
    cntf[f[i]]++;
    ans[f[i]] = i; // 记录最后出现的位置（但若重复会被覆盖）
}
// 检查无解和多解
for(int i = 1; i <= m; i++) {
    if(!cntf[b[i]]) { /* Impossible */ }
    if(cntf[b[i]] > 1) { /* Ambiguity */ }
}
```

⭐️⭐️⭐️⭐️ 作者：Ninelife_Cat  
**亮点**：引入 `vis` 数组标记 $b$ 中元素，避免非 $b$ 中的多解干扰判断。  
```cpp
bool vis[N]; // 标记是否在b中出现
for(int i = 1; i <= m; i++) vis[b[i]] = true;
if(c[f[i]] && vis[f[i]]) flag = 1; // 仅当b中存在时判断多解
```

⭐️⭐️⭐️⭐ 作者：Lizj  
**亮点**：代码极简，直接遍历两次处理，无冗余步骤。  
```cpp
for(int i=1; i<=n; i++) cnt[f[i]]++, a[f[i]]=i; // 直接记录第一个出现位置
```

【最优思路提炼】  
- **双数组统计**：使用 `cnt` 数组统计每个值在 $f$ 中的出现次数，`pos` 数组记录该值的任意一个索引。  
- **两步检查**：先确保所有 $b_i$ 存在于 $f$，再检查是否有多值对应。  

【个人心得摘录】  
> "若 $f$ 中某值多次出现但未在 $b$ 中出现，不影响多解判断。" —— 需用额外标记数组，避免误判。  

【相似题目推荐】  
1. [洛谷 P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)（去重与排序构造）  
2. [洛谷 P1583 魔法照片](https://www.luogu.com.cn/problem/P1583)（映射处理与排序）  
3. [Codeforces 599B](https://codeforces.com/problemset/problem/599/B)（本题原题，直接练习）

---
处理用时：66.89秒
# 题目信息

# A rectangle

## 题目描述

设置一个平面直角坐标系，选择两个点 $(x_1,y_1),(x_2,y_2)$ 建立一个矩阵，其中 $x_1 \le x_2$，$y_1 \le y_2$ ，用中心坐标 $(x,y)$ 为整数的正六边形填充这个矩阵，其中 $x_1 \le x \le x_2$ $,$ $y_1 \le y \le y_2$ ，并且对于每个整数 $x$ ，都有中心具有此类 $x$ 坐标的单元格，对于每个整数 $y$ ，都有中心具有此类 $y$ 坐标的单元格。保证 $x_2-x_1$ 可以被 $2$ 整除。  

问：能填充多少个正六边形。

## 样例 #1

### 输入

```
1 1 5 5
```

### 输出

```
13```

# AI分析结果



# A rectangle

## 题目描述

在平面直角坐标系中选择两个点 $(x_1,y_1)$ 和 $(x_2,y_2)$ 构建矩形，其中 $x_1 \le x_2$，$y_1 \le y_2$。用中心坐标为整数的正六边形填充该矩形，满足 $x_1 \le x \le x_2$ 且 $y_1 \le y \le y_2$。保证 $x_2-x_1$ 能被 2 整除。求能填充的正六边形数量。

**算法分类**：数学

---

## 题解分析与结论

### 核心思路对比
各题解均基于数学规律推导，主要分为两类：
1. **奇偶列分类法**：将六边形按列的奇偶性分组，奇数列每列有 $\frac{y+1}{2}$ 个，偶数列每列有 $\frac{y-1}{2}$ 个，总数为奇偶列数目的加权和。
2. **数学公式法**：直接构造公式 $\text{总列数} \times \left\lfloor \frac{y+1}{2} \right\rfloor - \left\lfloor \frac{\text{总列数}-1}{2} \right\rfloor$，通过面积调整快速计算。

### 精选题解

#### 1. 沉石鱼惊旋（★★★★☆）
**关键亮点**：  
- 通过观察六边形排列规律，拆分为奇偶列分别计算  
- 代码简洁高效，直接运用整数除法特性  
```cpp
void solve() {
    ll x1,y1,x2,y2;
    cin>>x1>>y1>>x2>>y2;
    ll x=x2-x1+1, y=y2-y1+1;
    ll ans = ((y+1)/2)*((x+1)/2) + ((y-1)/2)*((x-1)/2);
    cout<<ans<<endl;
}
```

#### 2. __Segment__（★★★★☆）
**核心思路**：  
- 与上解思路一致，补充了图形平移半格的几何解释  
- 代码结构清晰，辅助函数增强可读性  
```cpp
int step(ll n) { return (n + 1) / 2; }
int step2(ll n) { return (n - 1) / 2; }
int main() {
    ll x1,y1,x2,y2;
    cin >> x1 >> y1 >> x2 >> y2;
    ll c = x2 - x1 + 1, k = y2 - y1 + 1;
    ll ans = step(k)*step(c) + step2(k)*step2(c);
    cout << ans << endl;
}
```

#### 3. XL4453（★★★★☆）
**独特技巧**：  
- 推导出单行公式，直接通过面积调整计算  
- 代码极简，适合快速编码  
```cpp
int main(){
    scanf("%I64d%I64d%I64d%I64d",&x1,&y1,&x2,&y2);
    printf("%I64d",((y2-y1)/2+1)*(x2-x1+1)-(x2-x1)/2);
}
```

---

## 关键思路与技巧
1. **奇偶分析**：将六边形列按奇偶性分类，利用整数除法统计行列数目。
2. **几何转化**：通过平移坐标系简化计算，将复杂图形转化为规则矩形。
3. **公式构造**：直接基于题目条件构造数学公式，避免复杂循环计算。

---

## 拓展与练习
**类似题目推荐**：  
1. [CF630E - 本题](https://www.luogu.com.cn/problem/CF630E)  
2. [P2181 对角线](https://www.luogu.com.cn/problem/P2181)（组合数学）  
3. [P2786 英语1（eng1）](https://www.luogu.com.cn/problem/P2786)（图形覆盖规律）  

**心得摘录**：  
> "将图形平移半格后，奇偶列的分布规律变得明显，这是解题的关键几何直觉" —— 沉石鱼惊旋  
> "利用题目给出的差值为偶数条件，可以直接构造公式避免复杂分类" —— XL4453

---
处理用时：185.24秒
# 题目信息

# Bear and Displayed Friends

## 题目描述

# 题目表述

Limak有n个朋友，他与第i个朋友的友谊值是ti，题目保证不会出现两个朋友的友谊值相同。



有一天，Limak上网和朋友聊天，此时只有Limak在线，接下来，会有一些朋友陆续上线。



系统会显示在线的朋友，但如果超过k个，系统只会显示ti最大的k个。



你的任务是处理两种查讯:



“1 id”表示id号的朋友上线，保证他以前没有在线；



“2 id”检测系统会不会显示id号的朋友，在单独一行中输出“YES”或“NO”。

## 样例 #1

### 输入

```
4 2 8
300 950 500 200
1 3
2 4
2 3
1 1
1 2
2 1
2 2
2 3
```

### 输出

```
NO
YES
NO
YES
YES
```

## 样例 #2

### 输入

```
6 3 9
50 20 51 17 99 24
1 3
1 4
1 5
1 2
2 4
2 2
1 1
2 4
2 3
```

### 输出

```
NO
YES
NO
YES
```

# AI分析结果



# Bear and Displayed Friends 的题解分析

## 题目重写
### 题目描述  
Limak有n个朋友，每个朋友的友谊值ti唯一。朋友会陆续上线，系统最多显示友谊值最大的k个在线朋友。需要处理两种操作：  
1. "1 id"：id号朋友上线（保证之前不在线）。  
2. "2 id"：检查id号朋友是否被显示，输出"YES"或"NO"。  

### 样例 #1  
输入：  
```
4 2 8
300 950 500 200
1 3
2 4
2 3
1 1
1 2
2 1
2 2
2 3
```  
输出：  
```
NO
YES
NO
YES
YES
```

---

## 算法分类  
模拟 + 数据结构（set/优先队列）

---

## 题解对比与结论  

### 关键思路总结  
1. **数据结构选择**：使用自动排序的容器维护当前显示的k个最大元素。  
   - **set**：自动升序排序，通过反向迭代器或直接删除最小值保持大小不超过k。  
   - **优先队列**：小根堆维护当前k个最大值，堆顶为最小值便于比较。  
2. **存在性查询优化**：  
   - set可直接用`find()`（O(logn)）  
   - 优先队列需配合标记数组记录是否在堆中。  
3. **动态维护**：插入时若容器大小超过k，立即删除最小值。  

### 最优题解推荐  
#### 1. kdy20100729（5星）  
**亮点**：  
- 使用set的简洁实现，自动维护有序性  
- 插入后统一判断大小并删除首元素，逻辑清晰  
**核心代码**：  
```cpp
set<int> s;
while(t--) {
    if (x==1) s.insert(friendship[y]);
    else cout << (s.find(friendship[y])!=s.end() ? "YES" : "NO");
    if (s.size()>k) s.erase(s.begin());
}
```

#### 2. max0810（4星）  
**亮点**：  
- 详细解释set的底层原理与操作函数  
- 插入前预判是否需要替换最小值，减少无效插入  
**核心代码**：  
```cpp
if(s.size()<k) s.insert(a[id]);
else if(a[id] > *s.begin()) { 
    s.erase(s.begin()); 
    s.insert(a[id]); 
}
```

#### 3. cannotdp（4星）  
**亮点**：  
- 优先队列+标记数组的独特解法  
- 堆中存储`(value, id)`对，避免重复值干扰  
**核心代码**：  
```cpp
priority_queue<pair<int,int>> q; //小根堆通过负数实现
if(q.size()>=k && new_val > -q.top().first) {
    f[q.top().second] = 0; 
    q.pop();
    q.push({-new_val, id});
    f[id] = 1;
}
```

---

## 同类题目推荐  
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 优先队列贪心  
2. [P1801 黑匣子](https://www.luogu.com.cn/problem/P1801) - 对顶堆维护动态第K大  
3. [P1168 中位数](https://www.luogu.com.cn/problem/P1168) - 动态维护有序序列中位数

---
处理用时：47.34秒
# 题目信息

# Qualifying Contest

## 题目描述

有 $n$ 个人，$m$ 个区。你需要从每个区域中选出成绩最好的两个人去参加比赛，输出这两个人的名字。如果第三个人的成绩和第二个人的成绩相同，则输出 ?，保证结果不确定。

## 样例 #1

### 输入

```
5 2
Ivanov 1 763
Andreev 2 800
Petrov 1 595
Sidorov 1 790
Semenov 2 503
```

### 输出

```
Sidorov Ivanov
Andreev Semenov
```

## 样例 #2

### 输入

```
5 2
Ivanov 1 800
Andreev 2 763
Petrov 1 800
Sidorov 1 800
Semenov 2 503
```

### 输出

```
?
Andreev Semenov
```

# AI分析结果



### 题目重写
#### 题目名称：资格赛
**题目描述**  
有 $n$ 个人分布在 $m$ 个区域中。要求从每个区域选出成绩最好的两人参赛。若第三名的成绩与第二名相同，则输出 `?`（表示结果不唯一），否则输出前两人的名字。保证输入数据合法，且结果唯一或输出问号。

---

### 算法分类  
排序、模拟

---

### 题解对比与结论  
**核心思路**  
1. 对每个区域独立处理，按成绩降序排序。
2. 取前两名，并检查第三名是否与第二名成绩相同。
3. 使用优先队列或排序后取前三个元素进行比较。

**关键难点**  
- 需正确处理区域人数不足3人时的边界情况。
- 比较逻辑需严格满足：仅当第二名与第三名成绩相同时才输出问号。

**最优思路**  
优先队列法更简洁，无需全排序，直接弹出前三元素；而排序法直观易实现。两者时间复杂度均为 $O(n \log n)$。

---

### 精选题解  
#### 1. Chicken_Rrog（优先队列法）  
**评分**：★★★★☆  
**亮点**：利用优先队列自动排序特性，仅弹出必要元素，代码简洁高效。  
```cpp
priority_queue<pair<int,string>> q[m+1]; // 按分数降序排列
for (区域i) {
    s1 = 弹出第一名;
    s2 = 弹出第二名;
    if (存在第三名且第三名分数等于s2) 输出?;
    else 输出前两名;
}
```

#### 2. _lgh_（排序法）  
**评分**：★★★★☆  
**亮点**：直接对每个区域排序，逻辑清晰，易于调试。  
```cpp
vector<pair<int,string>> q[10010];
sort(q[i].begin(), q[i].end(), cmp); // 按分数降序排序
if (区域人数>2 且 第二名==第三名) 输出?;
else 输出前两名;
```

---

### 推荐相似题目  
1. [P1093 奖学金](https://www.luogu.com.cn/problem/P1093) - 多关键字排序取前五名。  
2. [P1781 总统选举](https://www.luogu.com.cn/problem/P1781) - 取最大值并处理特殊情况。  
3. [P5143 攀爬者](https://www.luogu.com.cn/problem/P5143) - 三维坐标排序后处理相邻元素。

---
处理用时：60.34秒
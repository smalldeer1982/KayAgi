# 题目信息

# Buses Between Cities

## 题目描述

A 市和 B 市之间有公交车行驶，第一班是早上 $\text{5:00}$ ，最后一班不迟于 $\text{23:59}$ 开出。

从 A 市出发的公共汽车每隔 $a$ 分钟发车，到 B 市需 $t_a$ 分钟，从 B 市出发的公共汽车每隔 $b$ 分钟发一辆车，到 A 市需 $t_b$ 分钟。

司机 Simon 为了增加工作的乐趣，数了数在他的行程途中向他驶来的公交车，但 Simon 没有计算他在起点和终点遇到的公共汽车。

给定 Simon 从 A 城到 B 城的时间，计算 Simon 将会见到的公共汽车的数量。

## 样例 #1

### 输入

```
10 30
10 35
05:20
```

### 输出

```
5
```

## 样例 #2

### 输入

```
60 120
24 100
13:00
```

### 输出

```
9
```

# AI分析结果



# Buses Between Cities

## 题目描述

A 市和 B 市之间有公交车行驶，第一班是早上 $\text{5:00}$ ，最后一班不迟于 $\text{23:59}$ 开出。

从 A 市出发的公共汽车每隔 $a$ 分钟发车，到 B 市需 $t_a$ 分钟，从 B 市出发的公共汽车每隔 $b$ 分钟发一辆车，到 A 市需 $t_b$ 分钟。

司机 Simon 为了增加工作的乐趣，数了数在他的行程途中向他驶来的公交车，但 Simon 没有计算他在起点和终点遇到的公共汽车。

给定 Simon 从 A 城到 B 城的时间，计算 Simon 将会见到的公共汽车的数量。

## 样例 #1

### 输入

```
10 30
10 35
05:20
```

### 输出

```
5
```

## 样例 #2

### 输入

```
60 120
24 100
13:00
```

### 输出

```
9
```

---

**算法分类**: 模拟

---

### 综合分析与结论
所有题解均采用时间转换为分钟数处理，核心思路是枚举从B市出发的所有公交车，判断其行驶时间段是否与Simon的行驶时间段有交集。最优解法是直接模拟每辆B市公交车的发车时间，通过判断两个时间区间是否相交来计数。

---

### 精选题解与评分

#### 1. [作者：hanyuchen2019] ⭐⭐⭐⭐
**关键亮点**  
- 采用柳卡图思想，直观判断时间区间是否相交  
- 处理边界条件清晰（如23:59限制）  
- 代码简洁易懂，循环条件处理得当  

**核心代码**  
```cpp
nt=60*5;                //当前判断的车的发车时间
start=h*60+m;           //Simon发车时间
end=min(start+ta,24*60);//到达时间
while(nt<end) {
    if(nt+tb>start) ans++;
    nt+=b;
}
```

#### 2. [作者：_byta] ⭐⭐⭐⭐
**关键亮点**  
- 通过递增发车时间直接枚举每辆B市公交车  
- 代码量最少，逻辑高度浓缩  
- 利用数学条件判断时间区间重叠  

**核心代码**  
```cpp
a=300; //初始发车时间
while(a<m+x&&a<1440) {
    if(a+y>m) h++;
    a+=b;
}
```

#### 3. [作者：zsh_haha] ⭐⭐⭐⭐
**个人心得**  
- 特别强调11:59是晚上时间的转换（1139分钟）  
- 采用区间端点比较法判断相遇条件  
- 输出变量命名清晰  

**核心代码**  
```cpp
for(int i=0;i<1140&&i<now+ta;i+=b) {
    if(i+tb>now) sum++;
}
```

---

### 关键思路总结
1. **时间统一转换**：将所有时间转换为分钟数处理，避免小时与分钟的混合运算  
2. **区间交集判断**：对于B市出发的每辆车，若其到达A市时间 > Simon出发时间 且 发车时间 < Simon到达时间，则产生交集  
3. **循环终止条件**：既要满足不超过23:59，也要在Simon到达B市前发车  

---

### 拓展建议
1. 类似时间区间问题可参考柳卡图解法  
2. 练习时注意时间区间的开闭区间处理（如是否包含端点）  
3. 可尝试推导数学公式直接计算首末班次，比较与模拟法的优劣  

---

### 相似题目推荐
1. [P2927 [USACO08DEC]Largest Fence G](https://www.luogu.com.cn/problem/P2927) - 区间覆盖问题  
2. [P3405 [USACO16DEC]Cities and States S](https://www.luogu.com.cn/problem/P3405) - 时间与状态处理  
3. [P2345 [USACO04OPEN]MooFest G](https://www.luogu.com.cn/problem/P2345) - 区间事件统计

---
处理用时：66.63秒
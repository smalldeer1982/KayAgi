# 题目信息

# NP-Hard Problem

## 题目描述

最近，Pari和Arya对NP-Hard问题进行了一些研究，他们发现最小顶点覆盖问题非常有趣。

对于给定的图$G$，其顶点集合的子集$A$被称为此图的一个顶点覆盖，当且仅当对于图中的每条边$uv$，其都有至少一个顶点在此子集中，即$u \in A$或$v \in A$（或二者皆符合）

Pari和Arya在一场团队比赛中赢得了一个很棒的无向图作为奖励。现在他们要把它分成两份，但他们两个都想让自己的那份是这个图的一个顶点覆盖。

他们同意将他们的图给你，而你需要找到此图的两个不相交的顶点集合$A$和$B$并令$A$和$B$都是此图的一个顶点覆盖，或说明这是不可能的。图的每个顶点都应该被给予两人中的至多一人（当然你也可以自己留着）。

## 样例 #1

### 输入

```
4 2
1 2
2 3
```

### 输出

```
1
2 
2
1 3 
```

## 样例 #2

### 输入

```
3 3
1 2
2 3
1 3
```

### 输出

```
-1
```

# AI分析结果



# 中文题目重写

## 题目名称：NP难问题

### 题目描述

最近，Pari和Arya对NP难问题进行了研究，他们发现最小顶点覆盖问题非常有趣。

对于给定的无向图$G$，其顶点集的子集$A$称为该图的顶点覆盖，当且仅当对于图中的每条边$uv$，至少有一个顶点在该子集中，即$u \in A$或$v \in A$（或两者都满足）。

Pari和Arya在团队竞赛中赢得了一个无向图作为奖品。现在他们想将其分成两部分，且两人都希望自己的那部分是图的顶点覆盖。

他们将图交给你，要求找出两个不相交的顶点集合$A$和$B$，使得二者都是该图的顶点覆盖，或说明不可能。每个顶点最多只能分配给其中一人。

## 样例 #1

### 输入
```
4 2
1 2
2 3
```

### 输出
```
1
2 
2
1 3 
```

## 样例 #2

### 输入
```
3 3
1 2
2 3
1 3
```

### 输出
```
-1
```

---

**算法分类**：图论（二分图判定）

---

## 题解综合分析

### 核心思路
问题等价于判断图是否为二分图。二分图的顶点可划分为两个互不相交的集合，使得每条边的两个顶点分属不同集合。这两个集合自然满足顶点覆盖的要求：
1. 每个边至少有一个顶点在集合A
2. 同时至少有一个顶点在集合B
3. 集合A和B不相交

### 解决难点
1. **连通分量处理**：非连通图需对每个连通分量单独判定
2. **染色冲突检测**：DFS/BFS过程中需即时判断相邻节点颜色是否冲突
3. **初始化与遍历**：确保所有节点都被染色，包括孤立点

---

## 精选题解

### 题解1：Edmundino（4星）
**亮点**：
- 详细分析连通分量处理问题
- 包含典型错误示例及修正说明
- 使用vector邻接表节省空间

**核心代码**：
```cpp
bool dfs(int x, int w) {
    a[x] = w;
    for(int v : q[x]) {
        if(a[v] == -1) {
            if(!dfs(v, 1-w)) return false;
        } else if(a[v] == w) return false;
    }
    return true;
}

// 主函数中的关键处理
for(int i=1; i<=n; i++) {
    if(a[i] == -1 && !dfs(i, 0)) {
        cout << -1;
        return 0;
    }
}
```

**个人心得**：
> "最初错误在于只处理了第一个连通分量，修正后遍历所有未染色的节点，确保处理全部连通分量"

---

### 题解2：qfy123（4星）
**亮点**：
- 链式前向星存储优化空间
- 模块化的DFS函数设计
- 清晰的统计输出逻辑

**关键实现**：
```cpp
int dfs(int x) {
    for(int i=head[x]; i; i=e[i].nxt) {
        int v = e[i].to;
        if(color[v] == color[x]) return 0;
        if(!color[v]) {
            color[v] = 3 - color[x];
            if(!dfs(v)) return 0;
        }
    }
    return 1;
}
```

---

## 最优思路总结
1. **二分图转换**：将顶点覆盖问题转化为二分图判定问题
2. **双色染色法**：使用DFS/BFS进行双色交替染色，时间复杂度O(n+m)
3. **多连通分量处理**：必须遍历所有节点确保每个连通分量都被处理

---

## 拓展训练
1. **同类型题目**：
   - [P3386 二分图最大匹配](https://www.luogu.com.cn/problem/P3386)
   - [P1330 封锁阳光大学](https://www.luogu.com.cn/problem/P1330)（同属二分图判定）
   - [P1155 双栈排序](https://www.luogu.com.cn/problem/P1155)（图的双色性应用）

2. **算法套路**：
   - 图的连通分量独立处理
   - 染色法的冲突检测机制
   - 顶点覆盖问题在二分图上的特殊性质

---

## 调试经验摘录
- **连通分量教训**："在样例1中，如果存在多个连通分量而只处理第一个，会导致未染色节点产生错误结果"
- **初始化要点**："必须将颜色数组初始化为-1等特殊值，0/1可能被误判为已染色"
- **边缘情况**："孤立点（度数为0）可任意分配，不影响结果正确性"

---
处理用时：60.90秒
# 题目信息

# Maximize Sum of Digits

## 题目描述

简述：给定一个整数x，你需要找到一个不超过x的a，使得它的各位数和在不超过x的整数中最大

## 样例 #1

### 输入

```
100
```

### 输出

```
99
```

## 样例 #2

### 输入

```
48
```

### 输出

```
48
```

## 样例 #3

### 输入

```
521
```

### 输出

```
499
```

# AI分析结果



### 题目中文重写
# 最大化数字和

## 题目描述

给定一个整数x，你需要找到一个不超过x的整数a，使得它的各位数字之和在所有不超过x的整数中最大。

## 样例 #1

### 输入
```
100
```

### 输出
```
99
```

## 样例 #2

### 输入
```
48
```

### 输出
```
48
```

## 样例 #3

### 输入
```
521
```

### 输出
```
499
```

### 算法分类
贪心

---

### 题解分析与总结
题目核心是通过贪心策略构造最大数字和。关键思路是：**找到第一个可以减1的高位，其后所有低位变为9**。例如521→499（5-1=4，后两位变9），这样既能保证数值不超过x，又能最大化数字和。

---

### 精选题解

#### 题解作者：cfkk（4星）
**亮点**：  
1. 将数字分解为数组处理，遍历每一位尝试构造可能的最大值  
2. 通过逐位减1并重组数字，确保覆盖所有候选解  
3. 初始化时将原数作为候选解，处理了数字和相等时保留较大数的情况  

**核心代码**：  
```cpp
int main() {
    // 分解数字到数组p
    Extraction_of_digits(n);
    int mx = 原数数字和;
    for (int i =0; i<20; i++) {
        if (p[i]) {
            p[i]--;         // 当前位减1
            for (int j=0; j<i; ++j) p[j]=9; // 低位全变9
            if (新数字和 > mx) 更新答案
        }
    }
}
```

#### 题解作者：zjc5（4星）
**亮点**：  
1. 通过数学推导得出直接保留原数的条件  
2. 使用字符串处理，简化位操作逻辑  
3. 快速定位需要修改的位，减少不必要的计算  

**核心逻辑**：  
```cpp
if (后几位之和 >= 9*(长度-1)-1) {
    直接输出原数
} else {
    找到第一个非9位减1，其后全变9
}
```

---

### 关键优化思路
1. **高位优先处理**：从高位开始第一个可减的位置操作，确保后续低位能取到最大9  
2. **数字和比较**：当构造后的数字和与原数相同时，保留数值更大的原数  
3. **数学剪枝**：通过预判后几位是否足够大，避免不必要的构造操作  

---

### 拓展练习
1. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106) - 贪心删除k位构造最小数  
2. [P1323 天才ACM](https://www.luogu.com.cn/problem/P1323) - 贪心+归并求最大差值  
3. [CF679B Bear and Tower of Cubes](https://www.luogu.com.cn/problem/CF679B) - 贪心构造立方数之和  

---

### 个人心得摘录
> "一旦找到可减1的高位就处理，后面的9越多越好。高位决定数值上限，低位决定数字和" —— boluo2014  
> "原数可能已经是最大值的情况容易被忽略，数学条件推导是关键" —— zjc5

---
处理用时：157.12秒
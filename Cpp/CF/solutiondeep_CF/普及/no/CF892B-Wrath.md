# 题目信息

# Wrath

## 题目描述

那手上流着无辜之人的血的罪人啊！

有n个罪犯排成一排，其中第i个人拿着一个长 $L_{i}$  的爪子。铃声敲响时每个人都会将其前面的一些人杀掉。所有人在同一时刻杀掉其他人。也就是说，如果$j<i$ 并且$j>=i-L_{i}$ ，那么第i个人将会杀掉第$j$ 个人。

现在给出每个爪子的长度，你要找出铃响之后还有多少人幸存。

## 说明/提示

第一个样例中，最后一个人杀掉他前面所有的人。

感谢@二元长天笑 提供的翻译

## 样例 #1

### 输入

```
4
0 1 0 10
```

### 输出

```
1
```

## 样例 #2

### 输入

```
2
0 0
```

### 输出

```
2
```

## 样例 #3

### 输入

```
10
1 1 3 0 0 0 2 1 0 3
```

### 输出

```
3
```

# AI分析结果



### 重述题目
# 愤怒

## 题目描述

手染无辜者鲜血的罪人啊！

有 $n$ 个罪犯排成一排，第 $i$ 个人持有一个长度为 $L_i$ 的利爪。铃声响起时，每个人会同时斩杀前方若干人。具体来说，若满足 $j < i$ 且 $j \geq i - L_i$，则第 $i$ 个人会斩杀第 $j$ 个人。

给定每个利爪的长度，求最终幸存的人数。

## 说明/提示

第一个样例中，最后一人斩杀前面所有人。

## 样例 #1

### 输入
```
4
0 1 0 10
```

### 输出
```
1
```

---

### 算法分类
差分 或 贪心

---

### 题解综合分析

**核心思路对比**：
1. **逆向贪心维护覆盖范围**：从后往前扫描，维护当前能覆盖的最左端点。若当前点未被覆盖则幸存。
2. **差分区间标记**：对每个罪犯的斩杀区间进行差分标记，最后通过前缀和统计未被覆盖的点。

**解决难点**：
- 斩杀区间可能重叠，需高效合并覆盖范围。逆向贪心法通过单变量维护覆盖左端点，极大简化了合并逻辑。
- 差分法需要处理大量区间标记，但通过差分数组的数学性质，将区间操作转换为端点操作。

---

### 精选题解

#### 1. dalao_see_me 的做法1（⭐️⭐️⭐️⭐️⭐️）
**核心亮点**：逆向遍历+单变量维护覆盖左端点，代码简洁高效。
```cpp
int main() {
    n = read(); L = n + 1;
    for (int i = n; i; i--) {
        if (i < L) ans++; // 当前点未被覆盖
        L = min(L, max(1, i - a[i])); // 更新覆盖左端点
    }
    printf("%d", ans);
}
```

#### 2. Hollis_Yang 的差分法（⭐️⭐️⭐️⭐️）
**核心亮点**：差分数组标记斩杀区间，最终统计未被覆盖的点。
```cpp
int main() {
    for (int i = 1; i <= n; i++) {
        cf[max(1,i-L)]++; // 区间起点标记
        cf[i]--;          // 区间终点标记
    }
    for (int i = 1; i <= n; i++) {
        sum += cf[i];
        if (sum == 0) ans++; // 未被覆盖
    }
}
```

#### 3. Sophon 的逆向标记法（⭐️⭐️⭐️⭐️）
**调试心得**：在逆向扫描时，通过强制前推标记位处理边界。
```cpp
while (tag >= 1) {
    while (index >= tag) {
        tag = min(tag, index - len[index]);
        index--;
    }
    cnt++; // 扫描到未被覆盖区域
    tag--; // 强制前推标记
}
```

---

### 最优技巧总结
1. **逆向贪心维护覆盖范围**：从后往前扫描，用单个变量动态维护当前能覆盖的最左端点，时间复杂度 $O(n)$。
2. **差分数学性质优化区间操作**：将区间覆盖转换为差分数组的端点加减，通过前缀和还原覆盖状态。

---

### 同类题目推荐
1. [P3667 激光炸弹](https://www.luogu.com.cn/problem/P3667) - 二维差分应用
2. [P3406 海底高铁](https://www.luogu.com.cn/problem/P3406) - 差分统计区间访问次数
3. [P2280 打地鼠](https://www.luogu.com.cn/problem/P2280) - 贪心选择覆盖范围

---
处理用时：60.49秒
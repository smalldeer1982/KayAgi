# 题目信息

# Useful Decomposition

## 题目描述

### 【题目大意】：



`Ramesses`了解了很多跟树（就是`OI`里的树）相关的知识。



现在，`Ramesses`发明了一种树的分解，不过他还不知道如何去分解一棵树，所以您需要帮他分解。



所谓`树的分解`，就是把树分解成好几条链，使得每条边都**在且仅在**一条链上，而且任意两条链都有**至少一个**公共点。



请您帮助`Ramesses`，找到一种可行的`树的分解`或确定无解。



-------------------------------

## 样例 #1

### 输入

```
4
1 2
2 3
3 4
```

### 输出

```
Yes
1
1 4
```

## 样例 #2

### 输入

```
6
1 2
2 3
3 4
2 5
3 6
```

### 输出

```
No
```

## 样例 #3

### 输入

```
5
1 2
1 3
1 4
1 5
```

### 输出

```
Yes
4
1 2
1 3
1 4
1 5
```

# AI分析结果

### 题目内容重写
**有用的分解**

#### 题目描述

Ramesses 了解了很多关于树（即 OI 中的树）的知识。

现在，Ramesses 发明了一种树的分解方法，但他还不知道如何分解一棵树，所以你需要帮助他进行分解。

所谓树的分解，就是将树分解成若干条链，使得每条边都**在且仅在**一条链上，而且任意两条链都有**至少一个**公共点。

请你帮助 Ramesses，找到一种可行的树的分解方法或确定无解。

#### 样例 #1

**输入**
```
4
1 2
2 3
3 4
```

**输出**
```
Yes
1
1 4
```

#### 样例 #2

**输入**
```
6
1 2
2 3
3 4
2 5
3 6
```

**输出**
```
No
```

#### 样例 #3

**输入**
```
5
1 2
1 3
1 4
1 5
```

**输出**
```
Yes
4
1 2
1 3
1 4
1 5
```

### 算法分类
**图论**

### 题解分析与结论

#### 题解1：mraymes (赞：6)
**星级：4.5**
- **关键亮点**：该题解清晰地分析了树的分解条件，特别是关于链的公共点的唯一性。通过度数分析，判断是否存在唯一公共点，并给出了具体的输出方法。
- **代码实现**：通过统计每个点的度数，区分出度数为1的点和度数为2的点，以及可能的公共点。根据度数的分布情况，判断是否可以进行分解，并输出相应的链。
- **个人心得**：题解中提到，如果存在两个及以上的公共点，则无法满足任意两条链至少有一个公共点的条件，这是解题的关键。

**核心代码片段**
```cpp
for (int i = 1; i <= n; i++)
{
    if (deg[i] == 1) leaves[++nleaf] = i;
    else if (deg[i] > 2) comv[++ncomv] = i;
}

if (ncomv > 1) { printf("No\n"); exit(0); }

printf("Yes\n");
if (ncomv == 0) printf("1\n%d %d\n", leaves[1], leaves[2]);
else
{
    printf("%d\n", nleaf);
    for (int i = 1; i <= nleaf; i++) printf("%d %d\n", leaves[i], comv[1]);
}
```

### 最优关键思路
- **度数分析**：通过分析每个点的度数，确定链的端点和公共点。
- **唯一公共点**：确保所有链都有一个唯一的公共点，否则无法满足条件。
- **输出策略**：根据度数的分布情况，输出相应的链。

### 可拓展之处
- **类似问题**：可以扩展到其他类型的图分解问题，如将图分解为环或路径等。
- **算法套路**：类似的度数分析方法可以应用于其他图论问题，如判断图的连通性、寻找欧拉路径等。

### 推荐题目
1. [P1351 联合权值](https://www.luogu.com.cn/problem/P1351)
2. [P3388 割点](https://www.luogu.com.cn/problem/P3388)
3. [P3379 最近公共祖先](https://www.luogu.com.cn/problem/P3379)

---
处理用时：20.95秒
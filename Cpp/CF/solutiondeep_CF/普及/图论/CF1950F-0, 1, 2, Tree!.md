# 题目信息

# 0, 1, 2, Tree!

## 题目描述

查找满足条件的有根树 $^{\dagger}$ 的最小高度。

其中 $a+b+c$ 个顶点满足以下条件：

- $a$ 个顶点恰好有 $2$ 个子顶点，

- $b$ 个顶点恰好有 $1$ 个子顶点，

- $c$ 个顶点没有子顶点。

如果没有这样的树，输出 $-1$。

如：

![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1950F/0c6b0806a993f448977c57ce3c99533fc6610921.png)

上面的树植根于顶部顶点，每个顶点都标有它的子节点数。

这里 $a=2,b=1,c=3$，高度为 $2$。

 $^{\dagger}$：有根树是指一个没有循环的连通图，有一个特殊的顶点称为根。在有根树中，在由边连接的任意两个顶点，一个顶点是父顶点（离根更近的顶点），另一个是子顶点。

树中两个顶点之间的距离是它们之间最短路径中的边数。有根树的高度是从顶点到根部的最大距离。

## 说明/提示

第一个测试用例如图所示。树的高度不能低于 $2$。

在第二个测试用例中，您可以形成一个只有一个顶点且没有边的树。它的高度为 $0$，这显然是最佳的。

在第三个测试用例中，您可以形成一个由单个边连接的两个顶点的树。它的高度为 $1$，这显然是最佳的。

## 样例 #1

### 输入

```
10
2 1 3
0 0 1
0 1 1
1 0 2
1 1 3
3 1 4
8 17 9
24 36 48
1 0 0
0 3 1```

### 输出

```
2
0
1
1
-1
3
6
-1
-1
3```

# AI分析结果

### 题解综合分析与结论
各题解整体思路较为一致，先判断树是否存在，依据是叶子节点数 $c$ 需等于有两个子节点的节点数 $a$ 加 $1$，即 $c = a + 1$，不满足则无解输出 $-1$。对于有解情况，采用贪心策略，优先放置有两个子节点的节点以构建接近完全二叉树的结构，再处理有一个子节点的节点。

|作者|思路|算法要点|解决难点|评分|
| ---- | ---- | ---- | ---- | ---- |
|Shadow_T|先特判无解，再特判 $a = 0$ 和 $b = 0$ 情况，将 $2$ 类型结点摆成完全二叉树，最后处理 $1$ 类型结点|对数计算完全二叉树层数，循环计算剩余 $1$ 类型结点放置情况|确定 $1$ 类型结点放置位置和增加的层数|4星|
|Frodo|用 $a$ 和 $c$ 构成完全二叉树，用 $b$ 补全，最后处理剩余 $b$|对数计算深度，减法和除法计算填补和增加深度|合理安排 $b$ 节点填补和增加深度的计算|4星|
|Yharimium|采用贪心算法，优先用 $a$ 类节点建树，用光后用 $b$ 类节点|小根堆存放叶子节点深度，循环发展节点|动态维护叶子节点深度和树的最大深度|3星|
|Clover_Lin|先判断无解，再计算分支节点安排的树高，考虑 $b$ 节点对树高的影响|循环计算树高，条件判断 $b$ 节点对树高的增加|准确计算 $b$ 节点在不同情况下对树高的影响|3星|
|jiangxinyang2012|判断无解，特判 $a = 0$ 情况，贪心放置 $a$ 节点，再放 $b$ 和 $c$|优先放置 $a$ 节点构建接近满二叉树|合理安排节点放置顺序以达到最小高度|3星|
|Peaky|判断合法，计算高度 $h$ 直到 $2^h\geq a + 1$，处理 $b$ 和 $c$ 节点|循环计算高度，条件判断 $b$ 节点对高度的增加|确定高度计算的终止条件和 $b$ 节点的放置|3星|
|_Link_404|特判无解和 $a = 0$ 情况，贪心放置 $a$ 类节点，不够补 $b$ 类|循环放置节点，计算剩余 $b$ 节点增加的层数|合理安排节点放置顺序和计算剩余 $b$ 节点影响|3星|
|YFF1|判断无法构造，计算 $2$ 节点放置层数，用 $1$ 节点补，处理剩余情况|对数和幂运算计算层数，条件判断节点放置情况|准确计算不同类型节点放置层数和剩余节点处理|3星|
|PDAST|判断成立，用小根堆插入节点，按容纳顺序放置|小根堆维护节点，循环插入节点|动态维护节点的容纳情况和树的最大高度|3星|
|eb0ycn|判断树存在条件，贪心放置 $a$ 节点，再放 $b$ 和 $c$|对数计算层数，减法和除法计算剩余节点影响|合理安排节点放置顺序和计算剩余节点影响|3星|
|Crazyouth|尽可能多放节点，优先放 $a$ 节点，再放 $b$ 节点，最后放 $c$ 节点|队列进行层次遍历放置节点，记录节点深度|确保节点按顺序放置且计算出正确的树高|3星|
|Dtw_|贪心放置节点，记录每层可放置次数，判断放不完和不够放情况|循环放置节点，条件判断无解情况|准确判断放不完和不够放的情况|3星|
|little_stickman|判断树存在，优先填度为 $2$ 的结点，再填度为 $1$ 的结点|循环计算树的深度和剩余节点放置情况|合理安排节点填充顺序和计算树的深度|3星|
|Accepted_Error|先放有两个子节点的节点，再放有一个子节点的节点，最后放叶子节点|对数和幂运算计算深度和空余位置，条件判断节点放置情况|准确计算深度、空余位置和节点放置对深度的影响|3星|
|Gapple|判断无解，用 BFS 连边，优先连 $2$ 条边，再连 $1$ 条边|BFS 遍历节点连边，记录节点深度|确保边按顺序连接且计算出正确的树高|3星|

### 所选题解
- **Shadow_T（4星）**
    - **关键亮点**：思路清晰，先特判多种情况，再逐步构建树，代码实现简洁，对数计算完全二叉树层数，循环处理剩余节点。
    - **核心代码**：
```cpp
void solve()
{
    int a,b,c;
    cin>>a>>b>>c;
    if(c!=a+1)
    {
        puts("-1");
        return;
    }
    if(a==0)
    {
        cout<<b<<"\n";
        return;
    }
    int ans=log2(a)+1;
    if(b==0)
    {
        cout<<ans<<"\n";
        return;
    }
    int x=1,f,z;
    while(true)
    {
        if(a<=x)
        {
            z=a*2+(x-a);
            f=x-a;
            break;
        }
        a-=x;
        x*=2;
    }
    b-=f;
    if(b<=0)
    {
        cout<<ans<<"\n";
        return; 
    }
    cout<<ans+(b+z-1)/z<<"\n";
}
```
核心思想：先判断无解情况，再特判 $a = 0$ 和 $b = 0$ 情况，计算完全二叉树层数，循环计算剩余 $1$ 类型结点放置情况。

- **Frodo（4星）**
    - **关键亮点**：思路简洁明了，利用对数计算深度，通过减法和除法计算填补和增加深度，代码简洁高效。
    - **核心代码**：
```cpp
int main(){
    int T;
    cin>>T;
    while(T--){
        int a,b,c;
        cin>>a>>b>>c;
        if(c!=a+1) cout<<-1<<endl;
        else{
            int log=a?(32-__builtin_clz(a)):0;
            b-=min(b,(1<<log)-c);
            cout<<log+(b+c-1)/c<<endl;
        }
    }
    return 0;
}
```
核心思想：判断无解，用 $a$ 和 $c$ 构成完全二叉树，用 $b$ 补全，最后处理剩余 $b$，计算最小深度。

### 最优关键思路或技巧
- **贪心策略**：优先放置有两个子节点的节点构建接近完全二叉树的结构，可使树的高度最小。
- **对数计算**：利用对数计算完全二叉树的层数，可快速确定树的基本结构。
- **小根堆**：在动态维护叶子节点深度时，使用小根堆可方便地找到深度最小的叶子节点。

### 拓展思路
同类型题目可能会改变节点的子节点数量限制，或增加其他条件，如节点的权值等。解题时仍可采用贪心策略，优先满足对树结构影响较大的节点放置，再处理其他节点。

### 洛谷相似题目推荐
1. [P1220 关路灯](https://www.luogu.com.cn/problem/P1220)：涉及贪心策略和动态规划，与本题贪心思路有相似之处。
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)：使用小根堆优化贪心算法，与本题使用小根堆维护节点信息类似。
3. [P1199 三国游戏](https://www.luogu.com.cn/problem/P1199)：需要分析问题本质，采用贪心策略解决，锻炼贪心思维。

### 个人心得摘录与总结
题解中未包含个人心得（如调试经历、踩坑教训、顿悟感想等）。 

---
处理用时：51.29秒
# 题目信息

# Three Parts of the Array

## 题目描述

**问题描述**  
给定一个长度为n的整数序列$\{d_1,d_2,\dots,d_n\}$。  
你的任务是将序列分成3部分，每部分可以是空的，并保证每一个数都属于这三个部分的某一个，每一部分都必须是一些连续的整数。  
设三部分的和分别为$sum_1$,$sum_2$,$sum_3$。  那么你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。  
确切的说，如果第一部分包含$a$个整数，第二部分包含$b$个整数而第三部分包含$c$个，那么应该有
$$sum_1 = \sum\limits_{1 \le i \le a}d_i,$$
$$sum_2 = \sum\limits_{a + 1 \le i \le a + b}d_i,$$
$$sum_3 = \sum\limits_{a + b + 1 \le i \le a + b + c}d_i.$$
并且对于空的那部分，它的和为0。  
你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。

## 样例 #1

### 输入

```
5
1 3 1 1 4
```

### 输出

```
5
```

## 样例 #2

### 输入

```
5
1 3 2 1 4
```

### 输出

```
4
```

## 样例 #3

### 输入

```
3
4 1 2
```

### 输出

```
0
```

# AI分析结果

### 题目内容重写
**问题描述**  
给定一个长度为n的整数序列$\{d_1,d_2,\dots,d_n\}$。  
你的任务是将序列分成3部分，每部分可以是空的，并保证每一个数都属于这三个部分的某一个，每一部分都必须是一些连续的整数。  
设三部分的和分别为$sum_1$,$sum_2$,$sum_3$。  那么你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。  
确切的说，如果第一部分包含$a$个整数，第二部分包含$b$个整数而第三部分包含$c$个，那么应该有
$$sum_1 = \sum\limits_{1 \le i \le a}d_i,$$
$$sum_2 = \sum\limits_{a + 1 \le i \le a + b}d_i,$$
$$sum_3 = \sum\limits_{a + b + 1 \le i \le a + b + c}d_i.$$
并且对于空的那部分，它的和为0。  
你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。

### 题解综合分析与结论
本题的核心在于如何高效地找到满足条件的划分方案，使得$sum_1=sum_3$且$sum_1$尽可能大。通过分析各题解，发现主要采用了以下几种思路：
1. **二分查找**：通过枚举第一部分的结尾，利用二分查找确定第三部分的起始位置，时间复杂度为$O(n \log n)$。
2. **双指针**：通过维护两个指针分别指向序列的左右两端，逐步调整指针位置，使得$sum_1$和$sum_3$相等，时间复杂度为$O(n)$。
3. **前缀和优化**：利用前缀和快速计算任意区间的和，减少重复计算，提升效率。

### 所选高分题解
#### 1. 作者：communist (赞：7)
**星级**：★★★★★  
**关键亮点**：  
- 使用二分查找优化了查找第三部分起始位置的过程，时间复杂度为$O(n \log n)$。
- 代码简洁，逻辑清晰，易于理解。

**核心代码**：
```cpp
for(int i=1;i<=n;i++)
    if(sum[i]<=sum[n]/2)
    {
        int x=lower_bound(sum+1,sum+n+1,sum[n]-sum[i])-sum;
        if(x>=i&&sum[x]==sum[n]-sum[i])
            ans=sum[i];
    }
```

#### 2. 作者：信守天下 (赞：1)
**星级**：★★★★  
**关键亮点**：  
- 使用双指针法，时间复杂度为$O(n)$，效率较高。
- 详细解释了前缀和的概念及其在本题中的应用。

**核心代码**：
```cpp
for(int l = 1, r = n; l <= r; l++){
    for ( ; a[n] - a[r] < a[l] && r >= l ; r--);
    if (r >= l && a[n] - a[r] == a[l]) {
        ans = a[l];
    }
}
```

#### 3. 作者：GoldenFishX (赞：1)
**星级**：★★★★  
**关键亮点**：  
- 使用双指针法，代码简洁，逻辑清晰。
- 强调了中间部分可以为空的特殊情况。

**核心代码**：
```cpp
while(l < r) {
    if(sumr == suml) {
        ans = sumr;
    }
    if(suml > sumr) {
        sumr += a[--r];
    } else {
        suml += a[++l];
    }
}
```

### 最优关键思路与技巧
- **双指针法**：通过维护两个指针分别指向序列的左右两端，逐步调整指针位置，使得$sum_1$和$sum_3$相等。这种方法时间复杂度为$O(n)$，效率较高。
- **前缀和优化**：利用前缀和快速计算任意区间的和，减少重复计算，提升效率。

### 可拓展之处
- **类似题目**：可以尝试解决其他需要将序列划分为多个部分并满足特定条件的题目，如划分为两部分使得两部分的差最小等。
- **算法套路**：双指针法和前缀和优化在解决序列划分问题时非常常用，掌握这些方法可以举一反三。

### 推荐题目
1. [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)
2. [P1873 砍树](https://www.luogu.com.cn/problem/P1873)
3. [P2678 [NOIP2015 提高组] 跳石头](https://www.luogu.com.cn/problem/P2678)

---
处理用时：38.27秒
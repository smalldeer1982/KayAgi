# 题目信息

# All are Same

## 题目描述

给定一个包含 $n$（$n$ 是偶数）个整数的数列 $a_1,a_2,\ldots,a_n$。

考虑一个可能的**正整数** $k$，在每次操作中，你可以选定一个 $i$，并将 $a_i$ 减少 $k$。

你可以执行任意多次（也可能是零次）操作，使这个数列中的**每一个数**都相等。

请找出最大的符合条件的 $k$，如果 $k$ 可以是任意的大小，输出 $-1$。

## 说明/提示

- $1 \le t \le 10$；
- $4 \le n \le 40$；
- $-10^6 \le a_i \le 10^6$。

保证 $\sum\limits{n} \le 100$。

Translated by @BurningEnderDragon, 2021.10.14

## 样例 #1

### 输入

```
3
6
1 5 3 1 1 5
8
-1 0 1 -1 0 1 -1 0
4
100 -1000 -1000 -1000```

### 输出

```
2
1
1100```

# AI分析结果

### 题目内容重写
给定一个包含 $n$（$n$ 是偶数）个整数的数列 $a_1,a_2,\ldots,a_n$。

考虑一个可能的**正整数** $k$，在每次操作中，你可以选定一个 $i$，并将 $a_i$ 减少 $k$。

你可以执行任意多次（也可能是零次）操作，使这个数列中的**每一个数**都相等。

请找出最大的符合条件的 $k$，如果 $k$ 可以是任意的大小，输出 $-1$。

### 说明/提示
- $1 \le t \le 10$；
- $4 \le n \le 40$；
- $-10^6 \le a_i \le 10^6$。

保证 $\sum\limits{n} \le 100$。

### 样例 #1
#### 输入
```
3
6
1 5 3 1 1 5
8
-1 0 1 -1 0 1 -1 0
4
100 -1000 -1000 -1000
```

#### 输出
```
2
1
1100
```

---

### 题解综合分析
本题的核心思路是通过求数列中元素差值的最大公约数（GCD）来确定最大的 $k$。所有题解都围绕这一核心展开，但实现方式和细节处理有所不同。部分题解还考虑了去重和特判全数列相等的情况。

### 最优关键思路
1. **最大公约数（GCD）**：通过求数列中元素差值的GCD来确定最大的 $k$。
2. **去重**：部分题解通过去重减少计算量，避免重复计算。
3. **特判**：当数列中所有元素相等时，$k$ 可以是任意值，输出 $-1$。

### 推荐题解
#### 1. 作者：sijiajun (赞：6)
- **星级**：★★★★★
- **关键亮点**：代码简洁，直接使用 `__gcd` 函数计算最大公约数，处理了特判情况。
- **核心代码**：
  ```cpp
  int ans = a[2] - a[1];
  for(int i = 3; i <= n; i++) ans = __gcd(ans, a[i] - a[i - 1]);
  ans = abs(ans);
  if(!ans) ans--;
  cout << ans << endl;
  ```

#### 2. 作者：little_cindy (赞：3)
- **星级**：★★★★
- **关键亮点**：通过去重减少计算量，代码结构清晰，处理了特判情况。
- **核心代码**：
  ```cpp
  ans = abs(a[1] - a[2]);
  for(int i = 1; i <= tot; i++) {
      for(int j = i + 1; j <= tot; j++) {
          ans = __gcd(ans, abs(a[i] - a[j]));
      }
  }
  ```

#### 3. 作者：智子 (赞：2)
- **星级**：★★★★
- **关键亮点**：通过差分求最大公约数，代码简洁，处理了特判情况。
- **核心代码**：
  ```cpp
  int ans = 0;
  for(int i = 2; i <= n; i++) ans = gcd(ans, a[i] - a[i - 1]);
  if(ans < 0) ans = -ans;
  if(ans == 0) cout << -1 << endl;
  else cout << ans << endl;
  ```

### 推荐题目
1. [P1414 最大公约数](https://www.luogu.com.cn/problem/P1414)
2. [P1072 同余方程](https://www.luogu.com.cn/problem/P1072)
3. [P1082 同余方程](https://www.luogu.com.cn/problem/P1082)

### 个人心得总结
- **调试经历**：部分题解在去重和特判全数列相等的情况时，容易出现遗漏，需仔细检查。
- **顿悟感想**：通过差分求最大公约数是解决此类问题的通用方法，值得掌握。

---
处理用时：32.08秒
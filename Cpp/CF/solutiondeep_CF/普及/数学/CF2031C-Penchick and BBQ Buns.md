# 题目信息

# Penchick and BBQ Buns

## 题目描述

有 $n$ 个空位，你要用一些正整数来填充这些空位。

你用来填充空位的正整数 $k$ 必须满足以下两个条件：

-	$k$ 至少出现两次。

填完空位之后，设第 $i$ 个空位上的数是 $a_i$。对于任意的 $i\le n$ 和 $j\le n$，如果 $i\ne j$ 且 $a_i=a_j$，那么 $|i-j|$ 是完全平方数。

你需要构造出一组合法的方案，或者报告无解。

## 样例 #1

### 输入

```
2
3
12```

### 输出

```
-1
1 2 3 6 10 2 7 6 10 1 7 3```

# AI分析结果

### 题目内容重写

#### 题目描述

有 $n$ 个空位，你需要用一些正整数来填充这些空位。

你用来填充空位的正整数 $k$ 必须满足以下两个条件：

- $k$ 至少出现两次。

填完空位之后，设第 $i$ 个空位上的数是 $a_i$。对于任意的 $i\le n$ 和 $j\le n$，如果 $i\ne j$ 且 $a_i=a_j$，那么 $|i-j|$ 是完全平方数。

你需要构造出一组合法的方案，或者报告无解。

#### 样例 #1

##### 输入

```
2
3
12
```

##### 输出

```
-1
1 2 3 6 10 2 7 6 10 1 7 3
```

### 题解分析与结论

#### 题解对比与总结

1. **偶数情况的处理**：所有题解都一致认为，当 $n$ 为偶数时，可以简单地将序列构造为 `1,1,2,2,3,3,...,n/2,n/2`，因为相邻的两个数之间的距离为1，满足完全平方数的条件。

2. **奇数情况的处理**：奇数情况的难点在于必须有一个数出现至少三次，且这三个数之间的距离必须满足勾股定理（即 $a^2 + b^2 = c^2$）。大多数题解都采用了最小的勾股数 $(3,4,5)$ 来构造序列，使得三个相同的数分别出现在位置 $1,10,26$。对于 $n < 27$ 的奇数，所有题解都认为无解。

3. **构造序列的细节**：部分题解在处理奇数情况时，还考虑了如何填充 $10$ 到 $26$ 之间的空位，特别是如何将剩余的奇数长度部分转化为偶数长度部分，以便继续使用偶数情况的构造方法。

#### 最优关键思路

- **偶数情况**：直接构造相邻的成对序列，利用距离为1的特性。
- **奇数情况**：利用勾股定理构造三个相同数的位置，确保它们之间的距离满足完全平方数的条件。对于 $n \geq 27$ 的情况，先构造前27位的序列，剩余部分按偶数情况处理。

#### 可拓展之处

- **勾股定理的应用**：在处理需要多个相同数且距离满足特定条件的构造问题时，勾股定理可以作为一种有效的工具。
- **分治思想**：将问题分解为偶数情况和奇数情况，分别处理，最后合并结果。

#### 推荐题目

1. [P1008 三连击](https://www.luogu.com.cn/problem/P1008)
2. [P1012 拼数](https://www.luogu.com.cn/problem/P1012)
3. [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)

### 精选题解

#### 题解1：Sakura_Emilia (5星)

**关键亮点**：清晰地解释了奇数情况的构造思路，特别是如何利用勾股定理来构造三个相同数的位置，并给出了具体的代码实现。

**代码核心思想**：对于奇数情况，先构造前27位的序列，剩余部分按偶数情况处理。

```cpp
const int sub[] = {1, 2, 2, 3, 3, 4, 4, 5, 5, 1, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 1, 6};

inline void solve() {
    cin >> n;
    if(n % 2 == 0) {
        for(int i = 1; i <= n / 2; i++)
            cout << i << ' ' << i << ' ';
        cout << endl;
    } else{
        if(n < 27)
            cout << -1 << endl;
        else{
            for(int i : sub)
                cout << i << ' ';
            n -= 27;
            for(int i = 14; i <= 13 + n / 2; i++)
                cout << i << ' ' << i << ' ';
            cout << endl;
        }
    }
}
```

#### 题解2：chenxi2009 (4星)

**关键亮点**：详细解释了奇数情况的构造思路，特别是如何利用勾股定理来构造三个相同数的位置，并给出了具体的代码实现。

**代码核心思想**：对于奇数情况，先构造前27位的序列，剩余部分按偶数情况处理。

```cpp
ans[1] = ans[10] = ans[26] = 1, ans[23] = ans[27] = 2;
ans[2] = ans[3] = 3, ans[4] = ans[5] = 4;
ans[6] = ans[7] = 5, ans[8] = ans[9] = 6;
ans[11] = ans[12] = 7, ans[13] = ans[14] = 8;
ans[15] = ans[16] = 9, ans[17] = ans[18] = 10;
ans[19] = ans[20] = 11, ans[21] = ans[22] = 12;
ans[24] = ans[25] = 13;
for(int i = 1; i <= 27; i ++)printf("%d ",ans[i]);
for(int i = 14; i <= n / 2; i ++)printf("%d %d ",i,i);
printf("\n");
```

#### 题解3：zhangzirui66 (4星)

**关键亮点**：清晰地解释了奇数情况的构造思路，特别是如何利用勾股定理来构造三个相同数的位置，并给出了具体的代码实现。

**代码核心思想**：对于奇数情况，先构造前27位的序列，剩余部分按偶数情况处理。

```cpp
if(n & 1){
    cout << "1 2 2 3 3 4 4 5 5 1 6 6 7 7 8 8 9 9 10 10 11 11 13 12 12 1 13 ";
    for(int i = 14; i * 2 <= n; i ++) cout << i << " " << i << " ";
    cout << "\n";
}
else{
    for(int i = 1; i * 2 <= n; i ++) cout << i << " " << i << " ";
    cout << "\n";
}
```

---
处理用时：46.19秒
# 题目信息

# Penchick and BBQ Buns

## 题目描述

有 $n$ 个空位，你要用一些正整数来填充这些空位。

你用来填充空位的正整数 $k$ 必须满足以下两个条件：

-	$k$ 至少出现两次。

填完空位之后，设第 $i$ 个空位上的数是 $a_i$。对于任意的 $i\le n$ 和 $j\le n$，如果 $i\ne j$ 且 $a_i=a_j$，那么 $|i-j|$ 是完全平方数。

你需要构造出一组合法的方案，或者报告无解。

## 样例 #1

### 输入

```
2
3
12```

### 输出

```
-1
1 2 3 6 10 2 7 6 10 1 7 3```

# AI分析结果

### 题目翻译
#### Penchick 和烧烤面包

#### 题目描述
有 $n$ 个空位，你要用一些正整数来填充这些空位。

你用来填充空位的正整数 $k$ 必须满足以下两个条件：
- $k$ 至少出现两次。

填完空位之后，设第 $i$ 个空位上的数是 $a_i$。对于任意的 $i\le n$ 和 $j\le n$，如果 $i\ne j$ 且 $a_i=a_j$，那么 $|i - j|$ 是完全平方数。

你需要构造出一组合法的方案，或者报告无解。

#### 样例 #1
##### 输入
```
2
3
12
```
##### 输出
```
-1
1 2 3 6 10 2 7 6 10 1 7 3
```

### 综合分析与结论
这些题解的核心思路均为对 $n$ 的奇偶性进行分类讨论：
- **偶数情况**：构造形如 `1 1 2 2 3 3...` 的序列，因为相邻相同数字的距离为 $1$，是完全平方数，所以该构造满足条件。
- **奇数情况**：必然有一个数出现奇数次，考虑出现 $3$ 次的情况。设这三个数的位置为 $i,j,k$（$i < j < k$），则需满足 $|j - i|$、$|k - j|$、$|k - i|$ 均为完全平方数，这可转化为勾股定理问题。最小的勾股数组合为 $(3, 4, 5)$，对应位置为 $(1, 10, 26)$。对于 $n < 27$ 的奇数，无解；对于 $n \geq 27$ 的奇数，先构造长度为 $27$ 的序列，再对剩余部分按偶数情况处理。

### 高分题解
- **Sakura_Emilia（5星）**
    - **关键亮点**：思路清晰，代码简洁，对奇数情况的分析详细，明确指出利用勾股方程的最小解构造长度为 $27$ 的序列，且对无解情况的判断准确。
    - **核心代码**：
```cpp
const int sub[] = {1, 2, 2, 3, 3, 4, 4, 5, 5, 1, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 1, 6};
inline void solve() {
    cin >> n;
    if(n % 2 == 0) {
        for(int i = 1; i <= n / 2; i++)
            cout << i << ' ' << i << ' ';
        cout << endl;
    } else{
        if(n < 27)
            cout << -1 << endl;
        else{
            for(int i : sub)
                cout << i << ' ';
            n -= 27;
            for(int i = 14; i <= 13 + n / 2; i++)
                cout << i << ' ' << i << ' ';
            cout << endl;
        }
    }
}
```
- **chenxi2009（4星）**
    - **关键亮点**：思路明确，代码结构清晰，对奇数情况的处理步骤详细，通过数组存储构造序列，便于输出。
    - **核心代码**：
```cpp
int ans[200001];
int main(){
    scanf("%d",&T);
    while(T --){
        scanf("%d",&n);
        if(!(n & 1)){
            for(int i = 1;i <= n / 2;i ++)printf("%d %d ",i,i);
            printf("\n");
        } 
        else if(n <= 26)printf("-1\n");
        else{
            ans[1] = ans[10] = ans[26] = 1,ans[23] = ans[27] = 2;
            // 其他赋值操作...
            for(int i = 1;i <= 27;i ++)printf("%d ",ans[i]);
            for(int i = 14;i <= n / 2;i ++)printf("%d %d ",i,i);
            printf("\n");
        } 
    }
    return 0; 
}
```
- **zhangzirui66（4星）**
    - **关键亮点**：思路阐述详细，对奇数情况中遇到的问题及解决方法进行了清晰说明，代码简洁易读。
    - **核心代码**：
```cpp
int main(){
    cin >> t;
    while(t --){
        cin >> n;
        if((n & 1) && (n < 27)){
            cout << "-1\n";
        }
        else if(n & 1){
            cout << "1 2 2 3 3 4 4 5 5 1 6 6 7 7 8 8 9 9 10 10 11 11 13 12 12 1 13 ";
            for(int i = 14; i * 2 <= n; i ++) cout << i << " " << i << " ";
            cout << "\n";
        }
        else{
            for(int i = 1; i * 2 <= n; i ++) cout << i << " " << i << " ";
            cout << "\n";
        }
    }
    return 0;
}
```

### 最优关键思路与技巧
- **奇偶分类讨论**：将问题按 $n$ 的奇偶性分为两种情况，简化问题的处理难度。
- **勾股定理应用**：将三个相同数字位置关系转化为勾股定理问题，找到最小的合法构造。
- **构造序列复用**：对于奇数情况，先构造长度为 $27$ 的序列，再对剩余部分按偶数情况处理，避免重复构造。

### 拓展思路
此类构造题通常需要根据题目条件寻找特殊性质或规律，通过分类讨论将复杂问题简化。在处理类似问题时，可以先从简单情况入手，寻找构造的基本模式，再考虑复杂情况如何基于简单情况进行拓展。

### 洛谷相似题目推荐
1. [P1002 过河卒](https://www.luogu.com.cn/problem/P1002)：需要根据棋盘规则构造路径，通过递推的方式解决问题。
2. [P1216 [USACO1.5] 数字三角形 Number Triangles](https://www.luogu.com.cn/problem/P1216)：需要构造出数字三角形的最优路径，可使用动态规划的方法。
3. [P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)：需要构造出采药的最优方案，属于完全背包问题的变种。

### 个人心得摘录与总结
- **Walrus**：在处理奇数情况中 $11\sim25$ 区间元素个数为奇数的问题时，通过调试偶然发现令 $c_{11}=c_{27}$ 可满足题意。总结：在解决复杂构造问题时，调试是发现关键思路的重要手段。
- **include13_fAKe**：提到机房只有自己过了这题。总结：在解决构造题时，需要有独立思考和探索的能力，勇于尝试不同的方法。 

---
处理用时：33.90秒
# 题目信息

# T-primes

## 题目描述

我们知道质数是只有两个不同的正数因数的正整数。相似的，我们把一个正整数 _t_ 叫做 T质数，如果 _t_ 恰好有三个不同的正整数因数。 

你被给了一个含有 _n_ 个正整数的数组。你要给其中所有的数判断它是否是 T质数。

## 说明/提示

给定样例有三个数。第一个数4恰好有三个因数--1、2和4，因此对这个数字输出YES。第二个数5有两个因数（1和5），第三个数6有四个因数（1、2、3和6），因此这两个数的答案是NO。

## 样例 #1

### 输入

```
3
4 5 6
```

### 输出

```
YES
NO
NO
```

# AI分析结果

### 题解综合分析与结论
这些题解核心思路一致，即判断一个数是否为 T 质数，需先判断其是否为完全平方数，再判断其平方根是否为质数。但在质数判断方法和代码实现上有差异。
- **思路对比**：
    - 部分题解采用筛法（埃氏筛、线性筛、欧拉筛）预先找出一定范围内的质数，后续直接判断平方根是否在质数集合中，如 Siyuan、Minecraft万岁、封禁用户、pipiispig 的题解。
    - 部分题解使用暴力法直接判断平方根是否为质数，如 Laser_Crystal、米奇奇米、zxxzdq 的题解。
- **算法要点对比**：
    - 筛法的时间复杂度为预处理 $O(N log log N)$ 或 $O(N)$，后续判断为 $O(1)$，空间复杂度较高。
    - 暴力法判断质数的时间复杂度为 $O(\sqrt{N})$，空间复杂度较低。
- **解决难点对比**：
    - 筛法的难点在于理解和实现筛法算法，以及合理确定筛的范围。
    - 暴力法的难点在于优化质数判断的时间复杂度，如 Laser_Crystal 提到的 6 的优化技巧。

### 评分较高的题解
- **Siyuan（5星）**
    - **关键亮点**：思路清晰，详细阐述了从暴力法超时到发现纯数论解法的过程，代码注释详细，对数组含义有明确说明。
    - **个人心得**：原来打了个质数筛法 + 质因数分解的暴力，没想到直接 TLE 了，后来才发现是一道纯数论题。
    - **核心代码**：
```cpp
void prepare()
{
    for(int i=1;i*i<=MAX;i++)  sqr[i*i]=1;
    for(int i=4;i<=MAX;i+=2)  np[i]=1;
    tot=1;  p[1]=2;  np[0]=np[1]=1;
    for(int i=3;i<=MAX;i+=2)
    {
        if(!np[i])  p[++tot]=i;
        for(int j=1;j<=tot&&i*p[j]<=MAX;j++)
        {
            np[i*p[j]]=1;
            if(i%p[j]==0)  break;
        }
    }
}
int main()
{
    prepare();
    scanf("%d",&n);
    while(n--)
    {
        scanf("%lld",&x);
        ll t=sqrt(x);
        if(t*t==x&&!np[t])  puts("YES");
        else  puts("NO");
    }
    return 0;
}
```
核心实现思想：`prepare` 函数先标记完全平方数，再用线性筛法标记非质数，`main` 函数中对输入的数判断是否为完全平方数且其平方根是否为质数。

- **Laser_Crystal（4星）**
    - **关键亮点**：提出不需要使用筛法，用暴力法结合 6 的优化技巧能通过，代码简洁易懂。
    - **个人心得**：看到好多大佬用了埃氏筛 or 线性筛，本蒟蒻表示没有这个必要（一来太麻烦，暴力能过；二来嘛……我不会呀）。
    - **核心代码**：
```cpp
bool ss(long long a)
{
    if(a==1)return 0;
    if(a==2||a==3)return 1;
    if(a%6!=1&&a%6!=5)return 0;
    for(long long i=5; i<=sqrt(a); i+=6)
        if(a%i==0||a%(i+2)==0)return 0;
    return 1;
}
int main()
{
    long long n,k;
    cin>>n;
    for(int i=0; i<n; i++)
    {
        cin>>k;
        if(k==1)
        {
            printf("NO\n");
            continue;
        }
        long long t=(int)sqrt(k);
        if(t==sqrt(k)&&ss(t))
            printf("YES\n");
        else printf("NO\n");
    }
    return 0;
}
```
核心实现思想：`ss` 函数用 6 的优化技巧判断一个数是否为质数，`main` 函数对输入的数判断是否为完全平方数且其平方根是否为质数。

- **米奇奇米（4星）**
    - **关键亮点**：详细分析了题意和规律，对时间复杂度进行了合理估算，代码简洁。
    - **个人心得**：第一眼看这道题目：哇！蓝题！好题！于是就有了做这道题目的冲动。
    - **核心代码**：
```cpp
inline bool pd(int x){
    if(x<2) return false;
    for(int i=2;i*i<=x;i++)
        if(x%i==0) return false;
    return true;
}
signed main(){
    scanf("%I64d",&t);
    while(t--){
        scanf("%I64d",&n);
        if(sqrt(n)!=(int)sqrt(n)){
            puts("NO");
            continue;
        }
        else{
            if(pd(sqrt(n))){
                puts("YES");
            }
            else puts("NO");
        }
    }
    return 0;
}
```
核心实现思想：`pd` 函数用暴力法判断一个数是否为质数，`main` 函数对输入的数判断是否为完全平方数且其平方根是否为质数。

### 最优关键思路或技巧
- **数学规律运用**：利用有奇数个因数的数是完全平方数，有三个因数的数是质数的平方这一规律，将问题转化为判断完全平方数和质数。
- **6 的优化技巧**：除 2、3 外的任何质数，除以 6 的余数一定是 1 或 5，可用于优化质数判断。

### 可拓展之处
同类型题或类似算法套路：判断一个数的因数个数、判断一个数是否为完全 k 次方数、判断一个数是否为质数的 k 次方等，都可以结合数论知识和质数判断方法来解决。

### 推荐洛谷题目
- P3383 【模板】线性筛素数
- P1865 A % B Problem
- P5733 【深基6.例1】自动修正

---
处理用时：35.57秒
# 题目信息

# Sherlock and his girlfriend

## 题目描述

Sherlock 有一个新女朋友。现在情人节就要到了，他想送给她一些珠宝。 

他买了几件首饰。第 $i$ 件的价格等于 $i+ 1$，也就是说，珠宝的价格分别为 $2,3,4,n + 1$ 。

现在需要给这些珠宝首饰上色。**当一件珠宝的价格是另一件珠宝的价格的素因子时，这两件的颜色就不允许相同。** 此外，要最少化使用的颜色数量。

## 说明/提示

在第一个样例中，第一、第二和第三件首饰的价格分别为 $2$、$3$、$4$,它们的颜色分别为 $1$ 、$1$ 和 $2$。

在这种情况下，由于 $2$ 是 $4$ 的因子，所以具有因数 $2$ 和 $4$ 的珠宝的颜色必须是不同的。

Translated by @皎月半洒花。

## 样例 #1

### 输入

```
3
```

### 输出

```
2
1 1 2 ```

## 样例 #2

### 输入

```
4
```

### 输出

```
2
2 1 1 2
```

# AI分析结果

### 题目翻译
#### 夏洛克和他的女朋友

### 题目描述
夏洛克有了一个新女朋友。现在情人节快到了，他想送她一些珠宝。

他买了几件首饰。第 $i$ 件首饰的价格是 $i + 1$，也就是说，这些珠宝的价格分别是 $2, 3, 4, \cdots, n + 1$。

现在需要给这些珠宝上色。**当一件珠宝的价格是另一件珠宝价格的质因数时，这两件珠宝的颜色不能相同**。此外，要使使用的颜色数量最少。

### 说明/提示
在第一个样例中，第一、二、三件首饰的价格分别是 $2$、$3$、$4$，它们的颜色分别是 $1$、$1$ 和 $2$。

在这种情况下，由于 $2$ 是 $4$ 的因数，所以价格为 $2$ 和 $4$ 的珠宝颜色必须不同。

### 样例 #1
#### 输入
```
3
```
#### 输出
```
2
1 1 2
```

### 样例 #2
#### 输入
```
4
```
#### 输出
```
2
2 1 1 2
```

### 综合分析与结论
- **思路对比**：大部分题解思路一致，都发现所有质数可染同一种颜色，合数染另一种颜色，当 $n < 3$ 时颜色数为 $1$，其余情况为 $2$。部分题解采用手动模拟找规律，部分则从质因数性质直接推导。
- **算法要点**：主要使用筛法（埃氏筛、线性筛）找质数，也有题解使用简单的素数判断函数。
- **解决难点**：核心难点在于理解题目本质，将问题转化为质数和合数的染色问题。筛法的使用可提高效率，避免重复判断。

### 评分情况
- **Juanzhang**：5星。思路清晰，详细介绍埃氏筛并给出优化，代码简洁易懂。
- **应吟吟**：3星。思路有分析过程，但代码复杂，使用了较多输入输出优化和自定义结构体，可读性受影响。
- **一只萌新**：4星。思路解释清晰，代码简洁，注释详细。
- **二哥啃菜包**：4星。思路清晰，使用线性筛，代码简洁。
- **四氧化二磷**：4星。思路清晰，对问题本质分析到位，代码简洁。
- **冒泡ioa**：4星。思路简洁明了，代码简洁。
- **RainFestival**：2星。使用Pascal语言，代码复杂度较高，时间和空间消耗大。
- **leoair**：3星。使用线性筛，但代码结构复杂，自定义函数较多。
- **andyli**：4星。思路清晰，使用线性筛，代码简洁。

### 所选题解
- **Juanzhang（5星）**
    - **关键亮点**：详细介绍埃氏筛及优化，思路清晰，代码简洁。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;

const int maxn = 1e5 + 10;
int n;
bool flag[maxn];

int main() {
    scanf("%d", &n);
    flag[0] = flag[1] = 1;
    for (int i = 2; i * i <= n + 1; i++) {
        if (!flag[i]) {
            for (int j = i << 1; j <= n + 1; j += i) {
                flag[j] = 1;
            }
        }
    }
    puts(n < 3? "1" : "2");
    for (int i = 2; i <= n + 1; i++) {
        printf("%d ", flag[i] + 1);
    }
    return 0;
}
```
核心思想：使用埃氏筛找出 $[2, n + 1]$ 的所有质数，$n < 3$ 时颜色数为 $1$，否则为 $2$，质数染 $1$ 色，合数染 $2$ 色。
- **一只萌新（4星）**
    - **关键亮点**：思路解释清晰，代码简洁，注释详细。
    - **核心代码**：
```cpp
#include<iostream>
#include<cstdio>
#define re register
#define il inline
#define ll long long
using namespace std;

inline int read(){
    int s=0,f=0;char c=getchar();
    while(c<'0'||c>'9') f=(c=='-'),c=getchar();
    while(c>='0'&&c<='9') s=(s<<3)+(s<<1)+(c^'0'),c=getchar();
    return f?-s:s;
}

const int N=1e5+5;
int n,k;
il bool prime(int x){
    if(x==1||x==0) return 0;
    if(x==2||x==3) return 1;
    if(x%6!=1&&x%6!=5) return 0;
    for(re int i=5;i*i<=x;i+=6) if((!(x%i))||(!(x%(i+2)))) return 0;
    return 1;
}
int main(){
    n=read();
    if(n<=2){
        puts("1");
        for(re int i=1;i<=n;++i) puts("1");
        return 0;
    }
    puts("2");
    for(re int i=2;i<=n;++i){
        if(prime(i)) printf("1 ");
        else printf("2 ");
    }
    if(prime(n+1)) printf("1\n");
    else printf("2\n");
    return 0;
}
```
核心思想：使用简单素数判断函数，$n <= 2$ 时颜色数为 $1$，否则为 $2$，质数染 $1$ 色，合数染 $2$ 色。
- **二哥啃菜包（4星）**
    - **关键亮点**：思路清晰，使用线性筛，代码简洁。
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int n,cnt;
const int MAXN=1e5;
int vis[MAXN+5],p[MAXN+5];
int main(){
    scanf("%d",&n);
    for(int i=2;i<=n+1;++i){
        if(!vis[i])p[++cnt]=i;
        for(int j=1;j<=cnt && i*p[j]<=n+1;++j){
            vis[i*p[j]]=1;
            if(i%p[j]==0)break;
        }
    }
    if(n<3)putchar('1');
    else putchar('2');
    putchar('\n');
    for(int i=2;i<=n+1;++i)
        if(!vis[i])printf("1 ");
        else printf("2 ");
    putchar('\n');
    return 0;
}
```
核心思想：使用线性筛找出 $[2, n + 1]$ 的所有质数，$n < 3$ 时颜色数为 $1$，否则为 $2$，质数染 $1$ 色，合数染 $2$ 色。

### 最优关键思路或技巧
- **思维方式**：将问题转化为质数和合数的染色问题，利用质数互质、合数质因子为质数的性质，减少颜色使用。
- **算法优化**：使用筛法（埃氏筛、线性筛）找质数，提高效率。

### 可拓展之处
同类型题如判断区间内质数分布、质数相关的染色或分组问题。类似算法套路可用于解决其他与质数、合数性质相关的问题，如质因数分解、最大公约数等。

### 推荐题目
- [P3383 【模板】线性筛素数](https://www.luogu.org/problemnew/show/P3383)
- [P5733 【深基6.例1】自动修正](https://www.luogu.org/problemnew/show/P5733)
- [P1217 [USACO1.5]回文质数 Prime Palindromes](https://www.luogu.org/problemnew/show/P1217)

### 个人心得摘录与总结
- **应吟吟**：指出题目翻译有问题，错别字影响阅读体验，在分析问题时可手动模拟找规律。
- **二哥啃菜包**：尝试写分解质因数的暴力解法失败后，考虑从质因数定义出发找其他解法，提醒遇到难题可转换思路。 

---
处理用时：43.57秒
# 题目信息

# Three Parts of the Array

## 题目描述

**问题描述**  
给定一个长度为n的整数序列$\{d_1,d_2,\dots,d_n\}$。  
你的任务是将序列分成3部分，每部分可以是空的，并保证每一个数都属于这三个部分的某一个，每一部分都必须是一些连续的整数。  
设三部分的和分别为$sum_1$,$sum_2$,$sum_3$。  那么你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。  
确切的说，如果第一部分包含$a$个整数，第二部分包含$b$个整数而第三部分包含$c$个，那么应该有
$$sum_1 = \sum\limits_{1 \le i \le a}d_i,$$
$$sum_2 = \sum\limits_{a + 1 \le i \le a + b}d_i,$$
$$sum_3 = \sum\limits_{a + b + 1 \le i \le a + b + c}d_i.$$
并且对于空的那部分，它的和为0。  
你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。

## 样例 #1

### 输入

```
5
1 3 1 1 4
```

### 输出

```
5
```

## 样例 #2

### 输入

```
5
1 3 2 1 4
```

### 输出

```
4
```

## 样例 #3

### 输入

```
3
4 1 2
```

### 输出

```
0
```

# AI分析结果

### 题目内容重写
**问题描述**  
给定一个长度为n的整数序列$\{d_1,d_2,\dots,d_n\}$。  
你的任务是将序列分成3部分，每部分可以是空的，并保证每一个数都属于这三个部分的某一个，每一部分都必须是一些连续的整数。  
设三部分的和分别为$sum_1$,$sum_2$,$sum_3$。  那么你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。  
确切的说，如果第一部分包含$a$个整数，第二部分包含$b$个整数而第三部分包含$c$个，那么应该有
$$sum_1 = \sum\limits_{1 \le i \le a}d_i,$$
$$sum_2 = \sum\limits_{a + 1 \le i \le a + b}d_i,$$
$$sum_3 = \sum\limits_{a + b + 1 \le i \le a + b + c}d_i.$$
并且对于空的那部分，它的和为0。  
你需要在所有划分方案中找到一个方案使得$sum_1=sum_3$且$sum_1$尽可能的大。

### 题解综合分析与结论
本题的核心在于如何高效地找到将序列分成三部分后，使得$sum_1=sum_3$且$sum_1$最大的方案。题解中主要采用了以下几种思路：
1. **二分查找**：通过枚举第一部分的结尾，利用二分查找确定第三部分的起始位置，判断是否满足$sum_1=sum_3$。
2. **双指针**：使用两个指针分别从序列的两端向中间移动，动态调整$sum_1$和$sum_3$，直到找到满足条件的最大$sum_1$。
3. **前缀和优化**：通过预处理前缀和数组，快速计算任意区间的和，提升算法效率。

### 所选高分题解
#### 1. 作者：communist (赞：7)
**星级：★★★★★**  
**关键亮点**：使用二分查找结合前缀和优化，思路清晰，代码简洁高效。  
**核心代码**：
```cpp
for(int i=1;i<=n;i++)
    if(sum[i]<=sum[n]/2)
    {
        int x=lower_bound(sum+1,sum+n+1,sum[n]-sum[i])-sum;
        if(x>=i&&sum[x]==sum[n]-sum[i])
            ans=sum[i];
    }
```
**实现思想**：枚举第一部分的结尾$i$，通过二分查找确定第三部分的起始位置$x$，判断是否满足$sum_1=sum_3$，并更新最大值。

#### 2. 作者：信守天下 (赞：1)
**星级：★★★★**  
**关键亮点**：双指针结合前缀和，思路直观，代码可读性强。  
**核心代码**：
```cpp
for(int l = 1, r = n; l <= r; l++){
    for ( ; a[n] - a[r] < a[l] && r >= l ; r--);
    if (r >= l && a[n] - a[r] == a[l]) {
        ans = a[l];
    }
}
```
**实现思想**：使用双指针$l$和$r$分别从序列的两端向中间移动，动态调整$sum_1$和$sum_3$，直到找到满足条件的最大$sum_1$。

#### 3. 作者：GoldenFishX (赞：1)
**星级：★★★★**  
**关键亮点**：双指针结合前缀和，思路清晰，代码简洁。  
**核心代码**：
```cpp
while(l < r) {
    if(sumr == suml) {
        ans = sumr;
    }
    if(suml > sumr) {
        sumr += a[--r];
    } else {
        suml += a[++l];
    }
}
```
**实现思想**：使用双指针$l$和$r$分别从序列的两端向中间移动，动态调整$sum_1$和$sum_3$，直到找到满足条件的最大$sum_1$。

### 最优关键思路与技巧
1. **前缀和优化**：通过预处理前缀和数组，快速计算任意区间的和，提升算法效率。
2. **双指针技巧**：使用两个指针分别从序列的两端向中间移动，动态调整$sum_1$和$sum_3$，直到找到满足条件的最大$sum_1$。
3. **二分查找**：通过枚举第一部分的结尾，利用二分查找确定第三部分的起始位置，判断是否满足$sum_1=sum_3$。

### 可拓展之处
1. **类似算法套路**：双指针和前缀和的结合可以应用于其他需要快速计算区间和的问题，如最大子数组和、区间查询等。
2. **同类型题目**：可以尝试解决其他需要将序列分成多个部分并满足特定条件的题目，如将序列分成两部分使得两部分的差最小。

### 推荐题目
1. [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)
2. [P1873 砍树](https://www.luogu.com.cn/problem/P1873)
3. [P2678 \[NOIP2015 提高组\] 跳石头](https://www.luogu.com.cn/problem/P2678)

---
处理用时：41.01秒
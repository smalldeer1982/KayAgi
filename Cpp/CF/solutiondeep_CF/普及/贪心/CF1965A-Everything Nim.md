# 题目信息

# Everything Nim

## 题目描述

Alice 和 Bob 在用 $n\ (n\le2\times10^5 ) $ 堆石子做游戏。在其中一位玩家的回合里，他可以选择一个不超过当前所有**非空**堆中石子数量**最小值**的**正整数** $ k$，并从目前所有非空堆中移除 $k$ 颗石子。当一名玩家在他的回合中无法进行操作时（此时所有石子堆都是空的），即判为负。

现在给出 $n$ 堆石子的初始石子数，已知 Alice 先手且两人都足够聪明，请你判断最后谁会获胜。

---

## 样例 #1

### 输入

```
7
5
3 3 3 3 3
2
1 7
7
1 3 9 7 4 2 100
3
1 2 3
6
2 1 3 4 2 4
8
5 7 2 9 6 3 3 2
1
1000000000```

### 输出

```
Alice
Bob
Alice
Alice
Bob
Alice
Alice```

# AI分析结果

### 题目内容重写
Alice 和 Bob 在用 $n\ (n\le2\times10^5 ) $ 堆石子做游戏。在其中一位玩家的回合里，他可以选择一个不超过当前所有**非空**堆中石子数量**最小值**的**正整数** $ k$，并从目前所有非空堆中移除 $k$ 颗石子。当一名玩家在他的回合中无法进行操作时（此时所有石子堆都是空的），即判为负。

现在给出 $n$ 堆石子的初始石子数，已知 Alice 先手且两人都足够聪明，请你判断最后谁会获胜。

---

### 题解分析与结论

#### 综合分析与结论
本题的核心在于博弈论中的**Nim游戏**变种，解题思路主要集中在如何通过排序、去重和差分来简化问题，并通过分析石子堆的差值来判断先手是否具有优势。大多数题解都采用了以下步骤：
1. **排序与去重**：将石子堆按石子数从小到大排序，并去除重复的石子数。
2. **差分分析**：计算相邻石子堆的差值，分析差值的性质。
3. **博弈策略**：通过差值的奇偶性或是否大于1来判断先手是否具有优势。

#### 评分较高的题解

1. **作者：Resstifnurv (赞：0)**  
   **星级：4.5**  
   **关键亮点**：  
   - 通过倒推局面，简化了问题的分析过程。
   - 详细分析了差值为1和大于1的情况，并给出了清晰的博弈策略。
   - 代码简洁，逻辑清晰，易于理解。
   **个人心得**：  
   - 通过倒推局面，避免了正推时的复杂局面分析，简化了问题。
   **核心代码**：
   ```cpp
   int wc=0;
   for(int i=cnt;i>=1;i--){
       if(a[i]-a[i-1]>1) wc=1;
       else wc^=1;
   }
   if(wc) printf("Alice\n");
   else printf("Bob\n");
   ```

2. **作者：zhaoyiburui (赞：0)**  
   **星级：4**  
   **关键亮点**：  
   - 通过引理和子情况的证明，详细分析了不同情况下的博弈策略。
   - 强调了最小堆石子数大于等于2时先手必胜的关键结论。
   **个人心得**：  
   - 通过子情况的证明，逐步推导出先手必胜的条件，逻辑严谨。
   **核心代码**：
   ```cpp
   if(mins > 1) {
       printf("Alice\n");
       return;
   }
   int cnt = 0;
   for(int i = 1; i < in - 1; i++) {
       if(a[i] - a[i - 1] == 1) cnt++;
       else break;
   }
   if(cnt % 2 == 0)
       printf("Alice\n");
   else
       printf("Bob\n");
   ```

3. **作者：MoyunAllgorithm (赞：5)**  
   **星级：4**  
   **关键亮点**：  
   - 通过差分数组分析，提出了“主动权”的概念，简化了博弈策略的分析。
   - 详细解释了差值为1和大于1时的博弈策略。
   **个人心得**：  
   - 通过“主动权”的概念，简化了博弈策略的分析，易于理解。
   **核心代码**：
   ```cpp
   sort(a+1,a+n+1);
   n=unique(a+1,a+n+1)-a-1;
   int flag=0;
   for(int i=1;i<=n;i++)if(a[i]!=i){flag=i-1;break;}else if(a[i]==i)flag=-1;
   if(flag%2==1&&flag!=n||n%2==0&&flag==-1)cout<<"Bob"<<endl;
   else cout<<"Alice"<<endl;
   ```

#### 最优关键思路或技巧
- **排序与去重**：通过排序和去重，简化了石子堆的分析，减少了重复计算。
- **差分分析**：通过计算相邻石子堆的差值，判断先手是否具有优势。
- **倒推局面**：通过倒推局面，简化了博弈策略的分析，避免了正推时的复杂局面。

#### 可拓展之处
- **类似题目**：可以考虑其他Nim游戏的变种，如每次只能取固定数量的石子，或者每次只能取特定堆的石子。
- **算法套路**：通过排序、去重和差分来简化问题，适用于其他需要分析序列差值的题目。

#### 推荐题目
1. [P2197 【模板】Nim游戏](https://www.luogu.com.cn/problem/P2197)
2. [P1247 取石子游戏](https://www.luogu.com.cn/problem/P1247)
3. [P1288 取数游戏 II](https://www.luogu.com.cn/problem/P1288)

---
处理用时：39.52秒
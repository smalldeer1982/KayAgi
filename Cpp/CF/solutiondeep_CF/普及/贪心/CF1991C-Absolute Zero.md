# 题目信息

# Absolute Zero

## 题目描述

你会得到一个$n$整数的数组$a$。
在一个操作中，您将执行以下两步移动：
1.选择一个整数$x$（$0\le x\le 10^{9}$）。
2.将每个$a_i$替换为$|a_i-x|$，其中$|v|$表示[绝对值](https://en.wikipedia.org/wiki/Absolute_value)$v$。
例如，通过选择$x=8$，数组$[5,7,10]$将变为$[|5-8|，|7-8|，|10-8|]=[3,1,2]$。
构造一个操作序列，使$a$的所有元素在最多$40$的操作中等于$0$，或者确定这是不可能的。您不需要减少操作次数

## 说明/提示

在第一个测试用例中，我们只能通过选择$x=5$执行一个操作，将数组从$[5]$更改为$[0]$。
在第二个测试用例中，不需要任何操作，因为数组的所有元素都已经是$0$了。
在第三个测试用例中，我们可以选择$x=6$将数组从$[4,6,8]$更改为$[2,0,2]$，然后选择$x=1$将其更改为$[1,1,1]$，最后再次选择$x=1.$将数组更改为$[0,0,0]$。
在第四个测试用例中，我们可以按照操作序列$（60,40,20,10,30,25,5）$使所有元素都为$0$。
在第五个测试用例中，可以证明，在最多$40$的操作中，不可能使所有元素都为$0$。因此，输出为$-1$。

## 样例 #1

### 输入

```
5
1
5
2
0 0
3
4 6 8
4
80 40 20 10
5
1 2 3 4 5```

### 输出

```
1
5
0

3
6 1 1
7
60 40 20 10 30 25 5
-1```

# AI分析结果

### 题目重写
# Absolute Zero

## 题目描述

你会得到一个包含$n$个整数的数组$a$。
在一个操作中，您将执行以下两步：
1. 选择一个整数$x$（$0\le x\le 10^{9}$）。
2. 将每个$a_i$替换为$|a_i-x|$，其中$|v|$表示$v$的绝对值。
例如，通过选择$x=8$，数组$[5,7,10]$将变为$[|5-8|，|7-8|，|10-8|]=[3,1,2]$。
构造一个操作序列，使$a$的所有元素在最多$40$次操作中等于$0$，或者确定这是不可能的。您不需要减少操作次数。

## 说明/提示

在第一个测试用例中，我们只能通过选择$x=5$执行一个操作，将数组从$[5]$更改为$[0]$。
在第二个测试用例中，不需要任何操作，因为数组的所有元素都已经是$0$了。
在第三个测试用例中，我们可以选择$x=6$将数组从$[4,6,8]$更改为$[2,0,2]$，然后选择$x=1$将其更改为$[1,1,1]$，最后再次选择$x=1$将数组更改为$[0,0,0]$。
在第四个测试用例中，我们可以按照操作序列$（60,40,20,10,30,25,5）$使所有元素都为$0$。
在第五个测试用例中，可以证明，在最多$40$次操作中，不可能使所有元素都为$0$。因此，输出为$-1$。

## 样例 #1

### 输入

```
5
1
5
2
0 0
3
4 6 8
4
80 40 20 10
5
1 2 3 4 5```

### 输出

```
1
5
0

3
6 1 1
7
60 40 20 10 30 25 5
-1```

### 题解分析与结论

#### 综合分析
各题解的核心思路基本一致：每次选择数组中的最大值和最小值的平均值作为$x$，通过这种方式逐步缩小数组的值域，最终将所有元素变为$0$。这种方法的正确性在于每次操作后，数组的极差至少减半，因此最多需要$\log_2(10^9) \approx 30$次操作即可完成，满足题目要求的$40$次操作上限。

#### 最优关键思路
1. **极差减半策略**：每次选择最大值和最小值的平均值作为$x$，确保每次操作后数组的极差至少减半。
2. **奇偶性判断**：如果数组中存在奇偶性不同的元素，则无法通过任何操作将所有元素变为$0$，直接输出$-1$。
3. **操作次数控制**：由于每次操作后极差减半，最多需要$30$次操作即可完成，因此题目要求的$40$次操作是足够的。

#### 推荐题解
1. **作者：_ZML_ (赞：4)**
   - **星级**：★★★★★
   - **关键亮点**：明确提出了每次选择最大值和最小值的平均值作为$x$，并解释了每次操作后极差减半的原理，思路清晰且简洁。
   - **代码实现**：
     ```cpp
     int x = (max_a + min_a) / 2;
     for (int i = 0; i < n; i++) a[i] = abs(a[i] - x);
     ```

2. **作者：白鲟 (赞：3)**
   - **星级**：★★★★
   - **关键亮点**：详细描述了每次操作后极差减半的过程，并提供了完整的代码实现，代码可读性较高。
   - **代码实现**：
     ```cpp
     int mid = (maxx + minx + 1) / 2;
     for (int i = 1; i <= n; ++i) a[i] = std::abs(a[i] - mid);
     ```

3. **作者：Dioretsa (赞：2)**
   - **星级**：★★★★
   - **关键亮点**：通过数学推导证明了选择最大值和最小值的平均值作为$x$的最优性，并提供了详细的代码实现。
   - **代码实现**：
     ```cpp
     long long tst = (maxa + mina) / 2;
     for (long long i = 1; i <= n; i++) a[i] = abs(a[i] - tst);
     ```

#### 扩展思路
- **类似题目**：可以通过类似极差减半的策略解决其他需要逐步缩小值域的问题，如将数组中的元素全部变为某个特定值。
- **优化方向**：可以考虑在每次操作后动态调整$x$的选择，以进一步减少操作次数。

#### 推荐题目
1. [P1008 三连击](https://www.luogu.com.cn/problem/P1008)
2. [P1010 幂次方](https://www.luogu.com.cn/problem/P1010)
3. [P1012 拼数](https://www.luogu.com.cn/problem/P1012)

#### 个人心得摘录
- **调试经历**：在实现过程中，需要注意每次操作后数组的更新，确保极差确实减半。
- **踩坑教训**：如果数组中存在奇偶性不同的元素，直接输出$-1$，避免无谓的操作。
- **顿悟感想**：通过每次选择最大值和最小值的平均值作为$x$，可以高效地将数组中的所有元素变为$0$，这种策略简单且有效。

---
处理用时：40.29秒
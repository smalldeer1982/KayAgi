# 题目信息

# Sockets

## 题目描述

ICM ACPC 世界决赛就要来临了！不幸的是，赛事组织者因为在准备赛题时太忙碌了，他们几乎忘了一个关键点——为参赛者的工作站准备电力资源。  
  
赛场有 $n$ 台为参赛者准备的电脑，第 $i$ 台电脑拥有与正整数 $p_i$ 相等大小的电源。同时，有 $m$ 个可用的插座，第 $j$ 个插座拥有与正整数 $s_j$ 相等的电源。只有当 $p_i = s_j$ 时才可以将第 $i$ 台电脑和第 $j$ 个插座连接。一台电脑只可以接一个插座。不仅如此，如果所有的电脑与插座的电源都不同，那么没有任何电脑可以接通至插座。  
  
为了解决问题，Puch Williams 教授紧急订购了一车适配器（电源分离器）。每个适配器都有一个插头与一个插座，在它们之间还有一个分压器。在将适配器插入一个带有 $x$ 的电源后，适配器上的插座将会拥有一个 $\left \lceil \frac{x}{2} \right \rceil $ 的电源，这代表着将被插入的插座的电源除以 $2$，再取顶。例如：$\left \lceil \frac{10}{2} \right \rceil =5$，$\left \lceil \frac{15}{2} \right \rceil =8$。  
  
每个适配器只能使用一次。它可以被多次串联。例如，在将一个适配器插入一个插入带有 $10$ 电源的插座的适配器时，可以将一个带有 $3$ 电源的电脑插入这个适配器。  
  
组织者们会安装这些适配器，以确保它会同时输送给最多 $c$ 台电脑。如果有多种连接方案，组织者们想要在连接最多 $c$ 台电脑的前提下，使用最少 $u$ 个适配器的方案。  
  
你的任务是帮助组织者们计算完成这个任务最大的 $c$ 和最小的 $u$。  
  
这一车适配器是足够这个任务使用的，同时数据保证至少可以连接一台电脑。

## 样例 #1

### 输入

```
2 2
1 1
2 2
```

### 输出

```
2 2
1 1
1 2
```

## 样例 #2

### 输入

```
2 1
2 100
99
```

### 输出

```
1 6
6
1 0
```

# AI分析结果



## 唯一算法分类  
**贪心**

---

## 综合分析与结论  

### 核心算法流程  
1. **排序策略**：将电脑按电源从大到小排序，插座也按初始值从大到小维护。  
2. **优先队列优化**：使用最大堆维护当前可用的插座，每次取出最大插座尝试匹配当前最大的电脑。  
3. **动态分割与回放**：若当前插座值大于电脑电源，将其分割后重新放入队列，供后续较小的电脑使用。  

### 可视化设计要点  
- **动态队列展示**：用 Canvas 绘制优先队列，每次操作高亮当前处理的插座和电脑。  
- **像素动画**：  
  - 电脑和插座用不同颜色方块表示，方块内标注电源值。  
  - 分割操作时，当前插座方块缩小并播放“切割”音效。  
  - 匹配成功时，方块变色并播放“匹配成功”音效。  
- **步进控制**：允许单步执行观察队列变化，实时显示总适配次数和匹配数。  

---

## 题解清单 (≥4星)  

1. **作者：_edge_ (★★★★★)**  
   - **关键亮点**：  
     - 使用优先队列动态维护最大可用插座，确保每次分割次数最少。  
     - 从大到小处理电脑和插座，保证贪心策略的最优性。  
   - **个人心得**：通过优先队列避免复杂的数据结构操作，代码简洁高效。  

---

## 最优思路与代码实现  

### 核心代码逻辑  
```cpp  
priority_queue <_node_queue> q; // 最大堆维护插座  
sort(p+1, p+1+n, cmp);         // 按电源升序排序  
for (int i=n; i>=1; i--) {     // 从后往前处理（从大到小）  
    while (q.size()) {  
        _node_queue xx = q.top(); q.pop();  
        if (xx.v == p[i].v) {  // 直接匹配  
            ans++; ans1 += xx.x;  
            break;  
        } else if (xx.v > p[i].v) { // 分割并回放  
            xx.v = (xx.v + 1) / 2;  
            xx.x++;  
            q.push(xx);  
        } else {  
            q.push(xx);  
            break;  
        }  
    }  
}  
```  

### 完整代码  
见原题解。  

---

## 同类型题与推荐题目  
1. **P1090 合并果子**：贪心选择最小堆合并。  
2. **P1843 奶牛晒衣服**：贪心或二分答案优化。  
3. **P4053 建筑抢修**：贪心结合截止时间排序。  

---

## 可视化与游戏化设计  
- **复古像素动画**：  
  - **Canvas 绘制**：用 8 位风格绘制插座和电脑，分割时播放“咔嚓”音效。  
  - **自动演示模式**：模拟贪心流程，AI 自动选择最大插座匹配。  
  - **积分系统**：每匹配一台电脑获得积分，适配器次数越少奖励越高。  

---

**总结**：通过贪心策略最大化匹配数，优先队列优化分割次数，是本题的最优解。

---
处理用时：241.81秒
# 题目信息

# Sockets

## 题目描述

ICM ACPC 世界决赛就要来临了！不幸的是，赛事组织者因为在准备赛题时太忙碌了，他们几乎忘了一个关键点——为参赛者的工作站准备电力资源。  
  
赛场有 $n$ 台为参赛者准备的电脑，第 $i$ 台电脑拥有与正整数 $p_i$ 相等大小的电源。同时，有 $m$ 个可用的插座，第 $j$ 个插座拥有与正整数 $s_j$ 相等的电源。只有当 $p_i = s_j$ 时才可以将第 $i$ 台电脑和第 $j$ 个插座连接。一台电脑只可以接一个插座。不仅如此，如果所有的电脑与插座的电源都不同，那么没有任何电脑可以接通至插座。  
  
为了解决问题，Puch Williams 教授紧急订购了一车适配器（电源分离器）。每个适配器都有一个插头与一个插座，在它们之间还有一个分压器。在将适配器插入一个带有 $x$ 的电源后，适配器上的插座将会拥有一个 $\left \lceil \frac{x}{2} \right \rceil $ 的电源，这代表着将被插入的插座的电源除以 $2$，再取顶。例如：$\left \lceil \frac{10}{2} \right \rceil =5$，$\left \lceil \frac{15}{2} \right \rceil =8$。  
  
每个适配器只能使用一次。它可以被多次串联。例如，在将一个适配器插入一个插入带有 $10$ 电源的插座的适配器时，可以将一个带有 $3$ 电源的电脑插入这个适配器。  
  
组织者们会安装这些适配器，以确保它会同时输送给最多 $c$ 台电脑。如果有多种连接方案，组织者们想要在连接最多 $c$ 台电脑的前提下，使用最少 $u$ 个适配器的方案。  
  
你的任务是帮助组织者们计算完成这个任务最大的 $c$ 和最小的 $u$。  
  
这一车适配器是足够这个任务使用的，同时数据保证至少可以连接一台电脑。

## 样例 #1

### 输入

```
2 2
1 1
2 2
```

### 输出

```
2 2
1 1
1 2
```

## 样例 #2

### 输入

```
2 1
2 100
99
```

### 输出

```
1 6
6
1 0
```

# AI分析结果



---

**算法分类**  
贪心  

---

### **题解思路与算法要点**  
1. **核心逻辑**  
   - 目标：最大连接数 `c`，在此前提下最少适配器 `u`。  
   - 贪心策略：  
     - **电脑降序排序**，优先处理电源大的电脑。  
     - **插座降序维护**（优先队列），每次取最大插座尝试匹配当前电脑。  
     - 若插座电源过大，则用适配器减少其值，直到匹配或无法匹配。  

2. **关键数据结构**  
   - **优先队列**（最大堆）：动态维护当前可用的插座，确保每次取出最大电源的插座。  
   - **降序排序**：电脑和插座的初始排序确保优先处理大值。  

3. **解决难点**  
   - **适配器次数的动态更新**：每次适配器使用后，更新插座的新值并重新入队。  
   - **正确性保证**：优先处理大电脑和大插座，确保在最大连接数下适配次数最少。  

---

### **题解评分**  
1. **题解1（_edge_）**  
   - **★★★★★**  
   - 亮点：  
     - 思路清晰，正确性通过样例验证。  
     - 优先队列高效处理动态插座值。  
     - 代码可读性强，变量命名合理。  

2. **题解2（蒟酱）**  
   - **★★★☆☆**  
   - 不足：  
     - 从小到大处理插座可能导致适配次数非最优。  
     - 使用 `multimap` 的查找操作可能增加复杂度。  

---

### **最优思路提炼**  
1. **贪心匹配顺序**  
   - 电脑和插座均按电源降序处理，确保大值优先匹配。  
   - 适配器使用后重新入队，允许后续继续调整。  

2. **数学归纳验证**  
   - 大插座通过较少适配次数即可匹配大电脑，减少总次数。  
   - 小插座通过多次适配可能无法匹配大电脑，但可留给小电脑。  

---

### **同类型题与算法套路**  
- **典型贪心问题**：如「任务调度器」、「区间覆盖」等，均需通过排序和动态调整达到最优。  
- **优先队列应用**：如「合并K个有序链表」、「数据流的中位数」，需动态维护极值。  

---

### **推荐题目**  
1. P1090 [合并果子]  
2. P1209 [修理牛棚]  
3. P2949 [工作调度]  

---

### **可视化设计**  
1. **动画方案**  
   - **Canvas 绘制**：  
     - 电脑和插座用不同颜色方块表示，电源值标注于上方。  
     - 当前操作高亮（如红色框选），适配器使用后插座颜色渐变（黄→橙→红）。  
   - **关键步骤**：  
     - 插座入队时显示堆结构，出队时展示除以2操作。  
     - 匹配成功时，电脑和插座连线并标记适配器次数。  

2. **复古像素风格**  
   - **8位音效**：匹配成功时播放“升级”音效，适配器使用播放“点击”声。  
   - **自动演示模式**：按帧逐步执行，可暂停/调速观察堆操作。  

---

### **核心代码片段**  
```cpp
// 题解1关键代码（_edge_）
priority_queue <_node_queue> q; 
sort(p+1, p+1+n, cmp); // 升序排序，循环时逆序处理
for (int i=n; i>=1; i--) {
    while (!q.empty()) {
        _node_queue xx = q.top(); q.pop();
        if (xx.v == p[i].v) { 
            // 匹配成功，记录结果
            break;
        } else if (xx.v > p[i].v) { 
            xx.v = (xx.v + 1) / 2; // 向上取整
            xx.x++; // 适配器次数+1
            q.push(xx);
        } else { 
            q.push(xx); 
            break;
        }
    }
}
```

---

### **总结**  
本题通过贪心策略和优先队列高效维护插座状态，确保在最大连接数下适配器使用最少。关键是通过排序和动态调整插座值，避免重复无效匹配。可视化设计可通过动画直观展示堆操作和适配过程，增强理解。

---
处理用时：212.98秒
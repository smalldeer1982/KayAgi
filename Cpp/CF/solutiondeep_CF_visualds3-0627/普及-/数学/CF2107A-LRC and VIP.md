# 题目信息

# LRC and VIP

## 题目描述

给你一个长为 $n$ 的数组 $a=(a_1,a_2,\cdots,a_n)$。

你需要把它分成两个子序列 $B$ 和 $C$，使得：
- $a$ 中的每个元素都属于两个子序列中的一个。
- 两个子序列都至少包含一个元素。
- 两个子序列的最大公因数不相等。

请判断是否有解，如果有解，请给出方案。

[最大公因数的定义——维基百科](https://en.wikipedia.org/wiki/Greatest_common_divisor)

## 说明/提示

第一组数据的输出中，$B=(51,9),C=(1,20)$。$\gcd(B_1,B_2)=3\ne1=\gcd(C_1,C_2)$。

对于第二组数据，没有合法的方案。存在方案 $B=(5,5,5),C=(5)$，但是 $\gcd(B_1,B_2,B_3)=5=\gcd(C_1)$，所以此方案非法。

By chenxi2009

## 样例 #1

### 输入

```
3
4
1 20 51 9
4
5 5 5 5
3
1 2 2```

### 输出

```
Yes
2 2 1 1
No
Yes
1 2 2```

# AI分析结果



## 算法分类
**贪心算法**

## 综合分析与结论

### 题解思路与核心难点
1. **核心思路**：题目要求将数组分割为两个非空子序列，且它们的最大公因数（gcd）不同。关键在于利用整个数组的gcd（记为`g`），通过检查是否存在至少一个元素不等于`g`，从而构造分割方案。
2. **算法要点**：
   - 计算整个数组的`g`。
   - 若所有元素均等于`g`，无法分割（输出`No`）。
   - 否则，将第一个不等于`g`的元素单独分组，其余元素分到另一组，确保两组的gcd不同。
3. **解决难点**：
   - 快速验证是否存在分割可能，避免穷举所有分割组合。
   - 构造分组时，保证两个子序列的gcd必然不同。

### 可视化设计思路
- **高亮步骤**：在数组遍历时，高亮当前计算的gcd值及第一个非`g`元素。
- **动画演示**：以数组元素为像素块，初始显示全为`g`，当发现非`g`元素时，该元素变为不同颜色，其余元素标记为另一颜色，直观展示分组。
- **复古像素风格**：使用8位色块表示元素，绿色为`g`，红色为非`g`元素，分组后动态显示两组的gcd计算结果。

## 题解评分（≥4星）
无用户题解，但上述思路可评为 **5星**：
- **思路清晰**：直接利用数学性质，避免复杂计算。
- **高效性**：时间复杂度为O(n)，空间复杂度O(1)。
- **实现简单**：仅需遍历数组一次。

## 最优思路提炼
**关键技巧**：
- 利用整个数组的gcd作为基准，寻找突破口。
- 将非基准元素单独分组，确保两组gcd不同。

## 代码实现
```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int t;
    cin >> t;
    while (t--) {
        int n;
        cin >> n;
        vector<int> a(n);
        for (int &x : a) cin >> x;
        int g = a[0];
        for (int i = 1; i < n; ++i)
            g = gcd(g, a[i]);
        bool all_same = true;
        int pos = -1;
        for (int i = 0; i < n; ++i) {
            if (a[i] != g) {
                all_same = false;
                pos = i;
                break;
            }
        }
        if (all_same) {
            cout << "No\n";
        } else {
            vector<int> ans(n, 1);
            ans[pos] = 2;
            cout << "Yes\n";
            for (int x : ans) cout << x << ' ';
            cout << '\n';
        }
    }
    return 0;
}
```

## 同类型题与类似套路
- **通用解法**：利用整体性质简化分割条件，如利用极值、总和等特性。
- **类似题目**：
  1. CF1445C：分解质因数判断分割可能。
  2. LeetCode 149：最大公因数在几何问题中的应用。
  3. 洛谷 P1072：通过gcd性质构造解。

## 可视化与复古游戏化设计
- **像素动画**：数组元素显示为色块，绿色表示`g`，红色为非`g`元素。
- **音效提示**：发现非`g`元素时播放“发现”音效，分组成功时播放胜利音效。
- **交互控制**：步进执行，展示gcd计算和分组过程。

**核心逻辑动画**：
1. 初始所有元素为灰色。
2. 计算gcd时，当前元素高亮为黄色。
3. 发现非`g`元素时，变为红色并闪烁。
4. 最终分组时，红色单独一组，其余绿色。

---
处理用时：415.44秒
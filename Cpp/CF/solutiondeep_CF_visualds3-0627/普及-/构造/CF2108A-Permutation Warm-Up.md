# 题目信息

# Permutation Warm-Up

## 题目描述

对于一个长度为 $n ^{\text{∗}}$ 的排列 $p$，我们定义函数：

$$ f(p) = \sum_{i=1}^{n} \lvert p_i - i \rvert $$

给定一个数字 $n$。你需要计算当考虑从 $1$ 到 $n$ 的所有可能排列时，函数 $f(p)$ 可以取到多少个不同的值。

$ ^{\text{∗}}$ 一个长度为 $n$ 的排列是指由 $1$ 到 $n$ 的 $n$ 个不同整数按任意顺序组成的数组。例如，$[2,3,1,5,4]$ 是一个排列，但 $[1,2,2]$ 不是排列（$2$ 在数组中出现了两次），$[1,3,4]$ 也不是排列（$n=3$ 但数组中出现了 $4$）。

## 说明/提示

考虑输入的前两个例子。

对于 $n = 2$，只有 $2$ 个排列——$[1, 2]$ 和 $[2, 1]$。$f([1, 2]) = \lvert 1 - 1 \rvert + \lvert 2 - 2 \rvert = 0$，$f([2, 1]) = \lvert 2 - 1 \rvert + \lvert 1 - 2 \rvert = 1 + 1 = 2$。因此，函数有 $2$ 个不同的取值。

对于 $n=3$，已经有 $6$ 个排列：$[1, 2, 3]$、$[1, 3, 2]$、$[2, 1, 3]$、$[2, 3, 1]$、$[3, 1, 2]$、$[3, 2, 1]$，对应的函数值分别为 $0$、$2$、$2$、$4$、$4$ 和 $4$，总共有 $3$ 个不同的取值。

翻译由 DeepSeek V3 完成

## 样例 #1

### 输入

```
5
2
3
8
15
43```

### 输出

```
2
3
17
57
463```

# AI分析结果



---

**唯一算法分类**  
数学规律推导

---

**综合分析与结论**  
本题核心在于发现排列的绝对差之和的取值规律。通过分析样例，发现不同值的个数为 `floor(n²/4) + 1`。这一结论基于以下推导：

1. **奇偶性约束**：所有可能的绝对差和均为偶数。
2. **最大值推导**：最大值为 `floor(n²/2)`。
3. **取值范围**：可能的偶数取值数目为 `(最大值/2) + 1`，即 `floor(n²/4) + 1`。

**可视化设计思路**  
- **动画展示**：以像素网格动态演示不同排列的绝对差和生成过程，高亮当前计算的元素差。
- **步进控制**：允许用户单步观察排列生成及差值的累计。
- **复古风格**：使用 8 位像素动画，背景音乐随计算进度变化，成功时播放上扬音效。

---

**题解清单 (≥4星)**  
1. **数学公式法（5 星）**  
   - 亮点：直接推导公式 `n²//4 +1`，时间复杂度 O(1)，代码极简。
   - 代码可读性极强，无冗余逻辑。
2. **递推验证法（4 星）**  
   - 亮点：通过小样例归纳规律，验证公式的正确性。
   - 适用于数学推导不直观时的辅助分析。
3. **暴力枚举优化（4 星）**  
   - 亮点：针对小规模 n 暴力生成排列并去重，确认公式正确性。
   - 实际不可行但验证思路有价值。

---

**代码实现**  
```python
n = int(input())
print(n * n // 4 + 1)
```

**核心逻辑**  
直接应用公式 `n²//4 + 1`，时间复杂度 O(1)，空间复杂度 O(1)。

---

**同类型题与套路**  
- **数学规律题**：如斐波那契数列、组合数公式推导。
- **排列相关计数**：如逆序对数目、循环节统计。

---

**推荐洛谷题目**  
1. P1706 全排列问题（暴力枚举排列）
2. P1100 高低位交换（位运算与数学推导）
3. P1029 最大公约数与最小公倍数（数学性质应用）

---

**个人心得**  
- **观察样例**是破解数学规律题的关键，尤其是小数值的输入输出。
- **奇偶性分析**常能简化问题，避免暴力计算的复杂路径。

---

**可视化与复古动画**  
- **像素动画**：用网格展示排列元素，高亮当前差值的计算。
- **音效设计**：每步计算播放“滴”声，达成最终结果时播放胜利音效。
- **自动演示**：AI 自动生成排列并累计差值，对比公式结果。

---
处理用时：210.97秒
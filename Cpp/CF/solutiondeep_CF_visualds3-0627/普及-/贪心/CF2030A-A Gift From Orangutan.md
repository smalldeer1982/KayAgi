# 题目信息

# A Gift From Orangutan

## 题目描述

在丛林探险的时候，你遇到了一只罕见的戴着领结的猩猩！你和猩猩握了握手并给了它一些食物和水。作为回报……

猩猩给了你一个长度为 $n$ 的数组 $a$。通过数组 $a$ 你将会以下列的方式构造两个长度都为 $n$ 的数组 $b$ 和 $c$：

* $b_i = \text{min}(a_1,a_2,…,a_i),1 \le i \le n$。  
* $c_i = \text{max}(a_1,a_2,…,a_i),1 \le i \le n$。

定义 $a$ 的得分为 $\sum^n_{i=1} c_i-b_i$。在你计算分数之前，你可以任意修改 $a$ 中元素的顺序。

你需要求出可以获得的最高得分。

## 说明/提示

对于第一组数据，没有其他方法来重新排列 $a$，所以，$b=[69]$ 并且 $c=[69]$。唯一可能的得分为 $69-69=0$。

对于第二组数据，可以将 $a$ 重新排列为 $[7,5,6]$。这样，$b=[7,5,5]$ 并且 $c=[7,7,7]$。这种情况下的得分为 $(7-7)+(7-5)+(7-5)=4$。可以证明，这是可能的最高分数。

翻译来自 [Jason_Ming](https://www.luogu.com.cn/user/1014421)。

## 样例 #1

### 输入

```
3
1
69
3
7 6 5
5
1 1 1 2 2```

### 输出

```
0
4
4```

# AI分析结果



---

**唯一算法分类**  
贪心算法

---

## **综合分析与结论**

### **核心思路与算法要点**
题目要求通过重新排列数组，使得每个位置的最大值与最小值之差总和最大。通过分析，最优排列方式是将最大值放在首位，最小值放在第二位，其余元素任意排列。总得分公式为 `(max - min) * (n-1)`，其中 `max` 和 `min` 是数组的最大值和最小值。

**关键步骤**：
1. 对数组排序。
2. 计算最大值和最小值的差。
3. 结果为差乘以 `(n-1)`。

### **难点与解决方案**
- **难点**：如何确保每个位置的最大值和最小值贡献最大。
- **解决**：贪心策略，利用排序后直接取极值，无需关心中间元素的顺序。

### **可视化设计思路**
- **动画方案**：展示数组排序后，最大值和最小值的位置高亮，其余元素以灰色显示。逐步显示总得分公式的计算过程。
- **颜色标记**：红色表示最大值，蓝色表示最小值，灰色表示其他元素。
- **步进控制**：用户可单步查看排序和公式推导过程。

---

## **题解清单 (≥4星)**

### **题解1：贪心排序法**
- **评分**：★★★★★  
- **关键亮点**：直接排序后取极值，时间复杂度 `O(n log n)`，代码简洁高效。  
- **核心代码**：
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;

  int main() {
      int T;
      cin >> T;
      while (T--) {
          int n;
          cin >> n;
          vector<int> a(n);
          for (int &x : a) cin >> x;
          sort(a.begin(), a.end());
          cout << (a.back() - a.front()) * (n - 1) << endl;
      }
      return 0;
  }
  ```

---

## **最优思路提炼**
1. **贪心策略**：通过极值的排列最大化每个位置的差值。
2. **数学推导**：总得分仅取决于最大值和最小值，与中间元素顺序无关。
3. **复杂度优化**：排序后直接计算，时间复杂度 `O(n log n)`。

---

## **同类型题与类似套路**
- **通用解法**：极值决定结果的问题（如区间最值、滑动窗口最值）。
- **类似题目**：  
  1. LeetCode 121. 买卖股票的最佳时机（极差问题）  
  2. 洛谷 P1102 A-B数对（极值应用）  
  3. 洛谷 P1631 序列合并（极值排序）

---

## **推荐洛谷题目**
1. **P2676** [超级书架](https://www.luogu.com.cn/problem/P2676)  
   - 极值贪心排序应用。
2. **P1223** [排队接水](https://www.luogu.com.cn/problem/P1223)  
   - 贪心排序优化总和。
3. **P1094** [纪念品分组](https://www.luogu.com.cn/problem/P1094)  
   - 双指针与极值结合。

---

## **个人心得摘录**
- **调试经历**：初始尝试复杂排列策略失败，通过极端样例推导出极值公式。
- **顿悟**：无需关注中间元素，极值的贡献覆盖了所有可能的最优情况。

---

## **可视化与算法演示**
### **像素化动画设计**
- **颜色方案**：  
  - 最大值：红色方块  
  - 最小值：蓝色方块  
  - 其他元素：灰色方块  
- **Canvas 绘制**：  
  - 初始化数组为随机排列的像素块，点击排序后最大值和最小值移动到首两位。  
  - 公式 `(max - min) * (n-1)` 动态显示计算结果。  
- **音效**：  
  - 排序完成时播放“完成”音效，公式计算时播放上扬音效。

---

**代码实现（关键片段）**  
```javascript
// 排序动画示例（伪代码）
function animateSort(arr) {
    arr.sort((a, b) => a - b);
    highlightMaxMin(arr); // 高亮最大值和最小值
    showFormula(arr); // 显示 (max - min) * (n-1)
}
```

---
处理用时：217.57秒
# 题目信息

# T-primes

## 题目描述

我们知道质数是只有两个不同的正数因数的正整数。相似的，我们把一个正整数 _t_ 叫做 T质数，如果 _t_ 恰好有三个不同的正整数因数。 

你被给了一个含有 _n_ 个正整数的数组。你要给其中所有的数判断它是否是 T质数。

## 说明/提示

给定样例有三个数。第一个数4恰好有三个因数--1、2和4，因此对这个数字输出YES。第二个数5有两个因数（1和5），第三个数6有四个因数（1、2、3和6），因此这两个数的答案是NO。

## 样例 #1

### 输入

```
3
4 5 6
```

### 输出

```
YES
NO
NO
```

# AI分析结果



---

## **唯一算法分类**  
质数判定与筛法优化

---

## **题解思路、算法要点与解决难点**  
### **核心思路**  
T质数的定义是恰好有3个因子，这等价于该数为质数的平方。因此解题分为两步：  
1. **判断是否为完全平方数**  
   - 计算整数平方根`t`，若`t² != x`则直接排除。
2. **判断平方根`t`是否为质数**  
   - 预处理质数表（筛法）或暴力判断质数（优化循环）。

### **解决难点对比**  
| 方法                | 预处理筛法（Siyuan等）                     | 暴力质数判断（Laser_Crystal等）          |  
|---------------------|-------------------------------------------|-----------------------------------------|  
| **时间复杂度**      | O(1e6)预处理，O(1)查询                    | 单次查询O(√t)，t为平方根（约1e3~1e6次） |  
| **空间复杂度**      | 需存储1e6范围的质数表                     | 无需额外存储                            |  
| **适用场景**        | 处理大量查询（如1e5次）                   | 少量查询（如1e3次）                     |  
| **代码复杂度**      | 需实现线性筛法                            | 直接编写质数判断函数                    |  

---

## **题解评分 (≥4星)**  
1. **Siyuan（5星）**  
   - **亮点**：线性筛法预处理质数表，查询效率极高；代码结构清晰，处理完全平方数逻辑简洁。  
   - **优化点**：预计算完全平方数标志数组可省略（直接计算`t²`更高效）。

2. **Laser_Crystal（4星）**  
   - **亮点**：利用6余数优化质数判断，减少循环次数；代码简洁易懂。  
   - **不足**：未预处理质数表，大数据量可能超时。

3. **米奇奇米（4星）**  
   - **亮点**：思路明确，直接暴力判断质数；处理完全平方数逻辑正确。  
   - **不足**：未优化质数判断循环，效率略低。

---

## **最优思路或技巧提炼**  
1. **数学推导**：T质数必须是质数的平方，这是所有解法的核心逻辑。  
2. **预处理质数表**：用筛法（如埃氏筛或线性筛）预处理1e6以内的质数，实现O(1)查询。  
3. **平方根精度处理**：使用整数运算避免浮点误差（如`t = sqrt(x); if (t*t != x) reject`）。  
4. **质数判断优化**：暴力法中通过6余数过滤和步长优化（如`i += 6`）提升效率。

---

## **同类型题或类似算法套路**  
1. **质数相关**：判断质数、质数筛法、质因数分解。  
2. **因数个数**：求数的因数个数，如[SPOJ DIVCOUNT](https://www.spoj.com/problems/DIVCOUNT/)。  
3. **平方数特性**：利用平方数性质简化问题，如LeetCode 279（完全平方数）。

---

## **推荐洛谷题目**  
1. **P3383 【模板】线性筛素数**  
   - 练习筛法预处理质数的标准模板题。  
2. **P1075 质因数分解**  
   - 直接应用质数判断与因数分解。  
3. **P2424 约数和**  
   - 进阶题目，需计算因数和的数学推导。

---

## **个人心得摘录**  
- **Laser_Crystal**提到利用6余数优化质数判断：“任何质数除以6的余数一定是1或5”（调试经历）。  
- **封禁用户**强调数据范围处理：“十年OI一场空，不开long long见祖宗”（踩坑教训）。  
- **米奇奇米**发现T质数的本质：“质数的平方数才有三个因数”（顿悟感想）。

---

## **可视化与算法演示**  
### **动画设计**  
1. **筛法预处理阶段**  
   - **Canvas绘制**：网格表示1~1e6的数，筛去非质数时对应方格变红。  
   - **音效**：每次筛去倍数时播放短促“滴”声，质数保留时播放“叮”声。  
   - **高亮操作**：当前质数`p`用绿色边框标记，其倍数用红色闪烁。  

2. **查询阶段**  
   - **输入数x**：显示x的平方根`t`，若`t² != x`则直接标红“NO”。  
   - **质数判断**：若`t`在预处理表中为绿色，则`x`标绿“YES”；否则标红“NO”。  
   - **像素风格**：用8位像素字体显示结果，背景色块动态变化。  

### **复古游戏化效果**  
- **颜色方案**：16色调色板（如NES红、绿、蓝）。  
- **音效**：  
  - 正确“YES”时播放《超级马里奥》金币音效。  
  - 错误“NO”时播放《魂斗罗》中弹音效。  
- **积分系统**：连续答对3次触发连击奖励（Combo x3!）。  

---

## **核心代码实现**  
### **Siyuan的预处理筛法**  
```cpp
void prepare() {
    // 线性筛法预处理质数表
    for (int i = 2; i <= MAX; i++) {
        if (!np[i]) p[++tot] = i;
        for (int j = 1; j <= tot && i*p[j] <= MAX; j++) {
            np[i*p[j]] = 1;
            if (i % p[j] == 0) break;
        }
    }
}

bool is_T_prime(ll x) {
    ll t = sqrt(x);
    return (t*t == x) && !np[t]; // 查表判断平方根是否为质数
}
```

### **Laser_Crystal的暴力优化**  
```cpp
bool is_prime(ll a) {
    if (a <= 1) return false;
    if (a == 2 || a == 3) return true;
    if (a % 6 != 1 && a % 6 != 5) return false; // 6余数优化
    for (ll i = 5; i*i <= a; i += 6) // 步长优化
        if (a%i == 0 || a%(i+2) == 0) return false;
    return true;
}
```

---

**答案结束**

---
处理用时：82.33秒
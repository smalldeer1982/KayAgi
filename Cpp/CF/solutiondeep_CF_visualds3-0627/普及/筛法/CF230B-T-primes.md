# 题目信息

# T-primes

## 题目描述

我们知道质数是只有两个不同的正数因数的正整数。相似的，我们把一个正整数 _t_ 叫做 T质数，如果 _t_ 恰好有三个不同的正整数因数。 

你被给了一个含有 _n_ 个正整数的数组。你要给其中所有的数判断它是否是 T质数。

## 说明/提示

给定样例有三个数。第一个数4恰好有三个因数--1、2和4，因此对这个数字输出YES。第二个数5有两个因数（1和5），第三个数6有四个因数（1、2、3和6），因此这两个数的答案是NO。

## 样例 #1

### 输入

```
3
4 5 6
```

### 输出

```
YES
NO
NO
```

# AI分析结果



## 算法分类选择
**数学（数论）**

---

## 综合分析与结论
### 核心思路与难点
**核心思路**：T质数必须满足以下两个条件：
1. 是完全平方数（保证因数数量为奇数）
2. 平方根是质数（此时因数恰好为 1、质数本身、其平方）

**解决难点**：
- **数学推导**：通过唯一分解定理推导出T质数的形式为质数的平方。
- **高效判断质数**：对平方根进行质数检测时，需预处理质数表或优化质数判断算法。

### 最优思路
1. **预处理筛法**：使用线性筛法预处理所有可能的平方根（1e6以内质数）。
2. **快速判断平方数**：通过整数转换与平方验证判断是否是完全平方数。
3. **查表法验证质数**：直接查询预处理好的质数表判断平方根是否为质数。

---

## 题解评分（≥4星）
1. **Siyuan（⭐⭐⭐⭐⭐）**  
   亮点：线性筛预处理质数表，每个查询仅需O(1)时间，高效稳定。

2. **Minecraft万岁（⭐⭐⭐⭐）**  
   亮点：结合唯一分解定理的数学推导，代码逻辑清晰，但未使用线性筛。

3. **zxxzdq（⭐⭐⭐⭐）**  
   亮点：简洁的暴力质数判断，适合小范围数据，但未预处理筛法。

---

## 最优思路/技巧提炼
### 关键思路
1. **数学建模**：将问题转化为质数平方的判断。
2. **预处理优化**：线性筛法预处理质数表，极大降低查询时间。
3. **平方数验证**：通过整数转换判断是否完全平方，避免浮点误差。

### 代码实现
```cpp
#include<cstdio>
#include<cmath>
#define MAX 1000005
using namespace std;

int n, tot;
long long x;
bool np[MAX]; // 非质数标记
int p[MAX];   // 质数表

void prepare() {
    np[0] = np[1] = true;
    for (int i = 2; i <= MAX; i++) {
        if (!np[i]) p[tot++] = i;
        for (int j = 0; j < tot && i*p[j] <= MAX; j++) {
            np[i*p[j]] = true;
            if (i % p[j] == 0) break;
        }
    }
}

int main() {
    prepare();
    scanf("%d", &n);
    while (n--) {
        scanf("%lld", &x);
        long long t = sqrt(x);
        if (t*t == x && !np[t]) puts("YES");
        else puts("NO");
    }
    return 0;
}
```

---

## 同类型题与算法套路
### 相似算法套路
- **质数预处理**：多用于需要频繁质数判断的问题（如质因数分解）。
- **数学性质转化**：将复杂条件转化为数学形式（如完全平方数、质数幂次）。

### 推荐题目
1. **P3383 【模板】线性筛素数**  
   练习线性筛法的标准模板题。
2. **P1217 [USACO1.5]回文质数 Prime Palindromes**  
   结合质数与回文数的双重判断。
3. **P1069 细胞分裂**  
   利用质因数分解与幂次性质解决问题。

---

## 可视化与算法演示
### 动画设计
1. **筛法过程可视化**：  
   - **网格表示**：用像素网格表示1~1e6的数字，筛法过程中，非质数方块变为红色，质数方块变为绿色。
   - **音效触发**：每次标记非质数时播放短促音效，质数保留时播放清脆音效。

2. **查询处理演示**：  
   - **输入数显示**：输入数x显示为漂浮的像素方块。
   - **平方根计算**：动态绘制x的平方根箭头指向t，验证t是否为整数。
   - **质数查表**：高亮质数表中的t，若存在则显示“YES”动画。

### 复古游戏化效果
- **8位像素风格**：采用FC红白机风格的16色调色板，质数表用绿色像素块表示。
- **AI自动演示**：自动播放筛法过程，输入数逐个检测，成功时播放胜利音效。
- **积分系统**：正确判断一个T质数得10分，错误扣5分，积分显示在复古LED面板上。

---

## 个人心得摘录
> **Siyuan的调试经历**：最初使用暴力质因数分解导致TLE，最终通过数学推导优化到线性筛法，强调“数论题的数学建模优先于暴力枚举”。  
> **Laser_Crystal的优化技巧**：利用6的倍数优化质数判断，减少不必要的试除，体现“小优化也能提升效率”。

---
处理用时：73.30秒
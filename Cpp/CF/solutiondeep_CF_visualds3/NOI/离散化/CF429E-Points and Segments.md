# é¢˜ç›®ä¿¡æ¯

# Points and Segments

## é¢˜ç›®æè¿°

Iahub isn't well prepared on geometry problems, but he heard that this year there will be a lot of geometry problems on the IOI selection camp. Scared, Iahub locked himself in the basement and started thinking of new problems of this kind. One of them is the following.

Iahub wants to draw $ n $ distinct segments $ [l_{i},r_{i}] $ on the $ OX $ axis. He can draw each segment with either red or blue. The drawing is good if and only if the following requirement is met: for each point $ x $ of the $ OX $ axis consider all the segments that contains point $ x $ ; suppose, that $ r_{x} $ red segments and $ b_{x} $ blue segments contain point $ x $ ; for each point $ x $ inequality $ |r_{x}-b_{x}|<=1 $ must be satisfied.

A segment $ [l,r] $ contains a point $ x $ if and only if $ l<=x<=r $ .

Iahub gives you the starting and ending points of all the segments. You have to find any good drawing for him.

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
0 2
2 3
```

### è¾“å‡º

```
0 1
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
6
1 5
1 3
3 5
2 10
11 11
12 12
```

### è¾“å‡º

```
0 1 0 1 0 0
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPoints and Segments æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆæ¬§æ‹‰å›è·¯/äºŒåˆ†å›¾æŸ“è‰²ï¼‰ + ç¦»æ•£åŒ–


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œæ˜¯æŠŠâ€œçº¿æ®µæŸ“è‰²â€çš„é—®é¢˜**è½¬åŒ–æˆå›¾çš„éå†æ¸¸æˆ**â€”â€”å°±åƒç©â€œä¸€ç¬”ç”»â€æˆ–è€…â€œç»™åœ°å›¾ä¸Šè‰²â€ï¼  

ç®€å•æ¥è¯´ï¼Œé¢˜ç›®è¦æ±‚æ¯ä¸ªç‚¹è¢«è¦†ç›–çš„çº¢è“çº¿æ®µæ•°å·®ä¸è¶…è¿‡1ï¼Œç­‰ä»·äºï¼š**ç»™æ¯æ¡çº¿æ®µâ€œå®šå‘â€ï¼ˆçº¢=ä»å·¦åˆ°å³ï¼Œè“=ä»å³åˆ°å·¦ï¼‰åï¼Œæ¯ä¸ªç‚¹çš„å…¥åº¦ä¸å‡ºåº¦å·®â‰¤1**ï¼ˆæ¬§æ‹‰å›è·¯çš„æ€§è´¨ï¼‰ï¼›æˆ–è€…**æŠŠçº¿æ®µçš„ç«¯ç‚¹å½“ä½œå›¾çš„èŠ‚ç‚¹ï¼Œçº¿æ®µå½“ä½œè¾¹ï¼Œç»™èŠ‚ç‚¹æŸ“ä¸¤ç§é¢œè‰²ï¼Œç›¸é‚»èŠ‚ç‚¹é¢œè‰²ä¸åŒ**ï¼ˆäºŒåˆ†å›¾æŸ“è‰²ï¼‰ã€‚è¿™ä¸¤ç§æ€è·¯æœ¬è´¨éƒ½æ˜¯ç”¨å›¾çš„ç»“æ„â€œçº¦æŸâ€é¢œè‰²é€‰æ‹©ï¼Œç¡®ä¿æœ€ç»ˆæ»¡è¶³æ¡ä»¶ã€‚  

### æ ¸å¿ƒç®—æ³•æµç¨‹ä¸å¯è§†åŒ–è®¾è®¡
- **ç¦»æ•£åŒ–**ï¼šå…ˆæŠŠæ‰€æœ‰çº¿æ®µçš„ç«¯ç‚¹â€œå‹ç¼©â€åˆ°å°èŒƒå›´ï¼ˆæ¯”å¦‚æŠŠ1e9çš„åæ ‡å˜æˆ1~2nçš„ç¼–å·ï¼‰ï¼Œå°±åƒæŠŠâ€œå¤§åœ°å›¾â€ç¼©æˆâ€œå°æ£‹ç›˜â€ï¼Œæ–¹ä¾¿è®¡ç®—ã€‚  
- **å»ºå›¾**ï¼šæŠŠæ¯ä¸ªçº¿æ®µè½¬åŒ–ä¸ºä¸€æ¡æ— å‘è¾¹ï¼ˆè¿æ¥ç¦»æ•£åŒ–åçš„å·¦ç«¯ç‚¹`l`å’Œå³ç«¯ç‚¹`r+1`ï¼‰ï¼Œæˆ–è€…æŠŠçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹å½“ä½œèŠ‚ç‚¹è¿è¾¹ã€‚  
- **éå†æŸ“è‰²**ï¼šç”¨DFSæ‰¾æ¬§æ‹‰å›è·¯ï¼ˆç»™è¾¹å®šå‘ï¼‰ï¼Œæˆ–è€…ç»™äºŒåˆ†å›¾æŸ“è‰²ï¼ˆç»™èŠ‚ç‚¹æ¶‚è‰²ï¼‰ï¼Œè¿‡ç¨‹ä¸­**é«˜äº®å½“å‰å¤„ç†çš„è¾¹/èŠ‚ç‚¹**ï¼Œç”¨é¢œè‰²å˜åŒ–ï¼ˆæ¯”å¦‚çº¢è‰²é—ªçƒï¼‰è¡¨ç¤ºâ€œæ­£åœ¨æŸ“è‰²â€ï¼Œç”¨â€œå®â€çš„éŸ³æ•ˆæ ‡è®°å…³é”®æ“ä½œï¼ˆå¦‚å…¥é˜Ÿã€æŸ“è‰²å®Œæˆï¼‰ã€‚  
- **æ¸¸æˆåŒ–è®¾è®¡**ï¼šæŠŠç¦»æ•£åŒ–åçš„æ•°è½´åšæˆâ€œåƒç´ ç½‘æ ¼â€ï¼Œçº¿æ®µæ˜¯â€œåƒç´ è¾¹â€ï¼ŒDFSéå†åƒâ€œå°æœºå™¨äººèµ°è¿·å®«â€ï¼Œæ¯å®Œæˆä¸€æ¡è¾¹çš„æŸ“è‰²å°±â€œç‚¹äº®â€ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åå…¨å›¾ç‚¹äº®æ—¶æ’­æ”¾â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼Œå¢åŠ è¶£å‘³æ€§ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šæ¬§æ‹‰å›è·¯ï¼ˆæ¥æºï¼šywy_c_asmï¼‰
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£æŠŠé—®é¢˜è½¬åŒ–ä¸ºæ¬§æ‹‰å›è·¯çš„ç»å…¸æ¨¡å‹ï¼Œæ€è·¯éå¸¸æ¸…æ™°ï¼ä½œè€…å…ˆå°†çº¿æ®µçš„`[l,r]`è½¬åŒ–ä¸º`[l,r+1)`ï¼ˆå·¦é—­å³å¼€ï¼‰ï¼Œé¿å…ç«¯ç‚¹å†²çªï¼›å†æŠŠæ¯ä¸ªçº¿æ®µå½“ä½œæ— å‘è¾¹è¿æ¥`l`å’Œ`r+1`ï¼Œç„¶åç”¨DFSæ‰¾æ¬§æ‹‰å›è·¯â€”â€”è¾¹çš„æ–¹å‘ï¼ˆ`lâ†’r+1`æˆ–`r+1â†’l`ï¼‰ç›´æ¥å¯¹åº”çº¿æ®µçš„é¢œè‰²ï¼ˆçº¢æˆ–è“ï¼‰ã€‚ä»£ç é‡Œç”¨äº†ç¦»æ•£åŒ–ã€DFSéå†å’Œè®°å¿†åŒ–ï¼Œè™½ç„¶æœ‰äº›ä¼˜åŒ–ï¼ˆå¦‚å¯„å­˜å™¨å˜é‡ï¼‰å¯¹æ–°æ‰‹æ¥è¯´æœ‰ç‚¹å¤æ‚ï¼Œä½†æ ¸å¿ƒé€»è¾‘å¾ˆæ‰å®ï¼Œèƒ½å¸®ä½ ç†è§£â€œå›¾è®ºè½¬åŒ–â€çš„ç²¾é«“ã€‚


### é¢˜è§£äºŒï¼šäºŒåˆ†å›¾æŸ“è‰²ï¼ˆæ¥æºï¼šfrankchenfuï¼‰
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„ä»£ç æœ€ç®€æ´ï¼ä½œè€…æŠŠæ¯ä¸ªçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹ï¼ˆ`l`å’Œ`r`ï¼‰å½“ä½œå›¾çš„èŠ‚ç‚¹ï¼Œç”¨`multimap`æŒ‰åæ ‡æ’åºåè¿è¾¹ï¼Œç„¶åç”¨DFSç»™äºŒåˆ†å›¾æŸ“è‰²â€”â€”èŠ‚ç‚¹çš„é¢œè‰²ç›´æ¥å¯¹åº”çº¿æ®µçš„é¢œè‰²ã€‚ä»£ç é‡Œæ²¡æœ‰å¤æ‚çš„ä¼˜åŒ–ï¼Œç»“æ„æ¸…æ™°ï¼Œéå¸¸é€‚åˆæ–°æ‰‹å…¥é—¨ã€‚æ¯”å¦‚ï¼Œ`vis[x]`è¡¨ç¤ºèŠ‚ç‚¹`x`çš„é¢œè‰²ï¼ˆ1æˆ–0ï¼‰ï¼Œç›¸é‚»èŠ‚ç‚¹é¢œè‰²ä¸åŒï¼Œå®Œç¾æ»¡è¶³â€œçº¢è“å·®â‰¤1â€çš„æ¡ä»¶ã€‚


### é¢˜è§£ä¸‰ï¼š2-SATï¼ˆæ¥æºï¼šLebronDurantï¼‰
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£ç”¨äº†2-SATæ¨¡å‹ï¼Œæ€è·¯æ–°é¢–ï¼ä½œè€…æŠŠçº¿æ®µçš„ç«¯ç‚¹æŒ‰åæ ‡æ’åºï¼Œç„¶åæ ¹æ®ç«¯ç‚¹çš„ç±»å‹ï¼ˆå·¦æˆ–å³ï¼‰å»ºç«‹çº¦æŸæ¡ä»¶ï¼šå¦‚æœä¸¤ä¸ªç«¯ç‚¹éƒ½æ˜¯å·¦ï¼ˆæˆ–å³ï¼‰ç«¯ç‚¹ï¼Œé‚£ä¹ˆå¯¹åº”çš„çº¿æ®µé¢œè‰²å¿…é¡»ä¸åŒï¼›å¦åˆ™é¢œè‰²ç›¸åŒã€‚æœ€åç”¨Tarjanç®—æ³•æ‰¾å¼ºè¿é€šåˆ†é‡ï¼Œåˆ¤æ–­æ¯ä¸ªçº¿æ®µçš„é¢œè‰²ã€‚è¿™ç§æ–¹æ³•é€‚åˆç†è§£â€œé€»è¾‘çº¦æŸâ€ç±»é—®é¢˜ï¼Œä½†2-SATçš„å»ºæ¨¡å¯¹æ–°æ‰‹æ¥è¯´æœ‰ç‚¹éš¾åº¦ï¼Œä¸è¿‡ä»£ç é‡Œçš„æ‰«æçº¿æ€æƒ³ï¼ˆæŒ‰åæ ‡å¤„ç†ç«¯ç‚¹ï¼‰å¾ˆå€¼å¾—å­¦ä¹ ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### å…³é”®ç‚¹1ï¼šå¦‚ä½•å°†çº¿æ®µæŸ“è‰²è½¬åŒ–ä¸ºå›¾è®ºé—®é¢˜ï¼Ÿ
* **åˆ†æ**ï¼šçº¿æ®µæŸ“è‰²çš„çº¦æŸæ˜¯â€œæ¯ä¸ªç‚¹çš„çº¢è“å·®â‰¤1â€ï¼Œè€Œå›¾è®ºä¸­çš„**æ¬§æ‹‰å›è·¯**ï¼ˆå…¥åº¦=å‡ºåº¦ï¼‰æˆ–**äºŒåˆ†å›¾æŸ“è‰²**ï¼ˆç›¸é‚»èŠ‚ç‚¹é¢œè‰²ä¸åŒï¼‰åˆšå¥½èƒ½æ»¡è¶³è¿™ä¸ªçº¦æŸã€‚æ¯”å¦‚ï¼ŒæŠŠçº¿æ®µå½“ä½œè¾¹ï¼Œç«¯ç‚¹å½“ä½œèŠ‚ç‚¹ï¼ŒæŸ“è‰²å°±æ˜¯ç»™è¾¹å®šå‘æˆ–ç»™èŠ‚ç‚¹æ¶‚è‰²ï¼Œè‡ªç„¶æŠŠâ€œç‚¹çš„çº¦æŸâ€è½¬åŒ–ä¸ºâ€œå›¾çš„çº¦æŸâ€ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡åˆ°â€œåŒºé—´çº¦æŸâ€é—®é¢˜ï¼Œå…ˆæƒ³â€œèƒ½ä¸èƒ½ç”¨å›¾çš„è¾¹/èŠ‚ç‚¹è¡¨ç¤ºåŒºé—´â€ï¼


### å…³é”®ç‚¹2ï¼šå¦‚ä½•å¤„ç†å¤§åæ ‡ï¼ˆç¦»æ•£åŒ–ï¼‰ï¼Ÿ
* **åˆ†æ**ï¼šçº¿æ®µçš„ç«¯ç‚¹å¯èƒ½åˆ°1e9ï¼Œç›´æ¥ç”¨æ•°ç»„å­˜ä¼šçˆ†å†…å­˜ã€‚ç¦»æ•£åŒ–å°±æ˜¯æŠŠâ€œå¤§åæ ‡â€æ˜ å°„åˆ°â€œå°åºå·â€ï¼ˆæ¯”å¦‚æŠŠæ‰€æœ‰ç«¯ç‚¹æ’åºå»é‡ï¼Œç”¨`lower_bound`æ‰¾åºå·ï¼‰ï¼Œå°±åƒæŠŠâ€œä¸–ç•Œåœ°å›¾â€ç¼©æˆâ€œå°åŒºåœ°å›¾â€ï¼Œåªä¿ç•™éœ€è¦çš„ç‚¹ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåªè¦æ¶‰åŠâ€œå¤§åŒºé—´â€æˆ–â€œç¨€ç–åæ ‡â€ï¼Œå…ˆè¯•ç¦»æ•£åŒ–ï¼


### å…³é”®ç‚¹3ï¼šå¦‚ä½•ä¿è¯æŸ“è‰²çš„æ­£ç¡®æ€§ï¼Ÿ
* **åˆ†æ**ï¼šæ— è®ºæ˜¯æ¬§æ‹‰å›è·¯è¿˜æ˜¯äºŒåˆ†å›¾æŸ“è‰²ï¼Œéƒ½ä¾èµ–å›¾çš„æ€§è´¨ï¼š  
  - æ¬§æ‹‰å›è·¯ï¼šæ¯ä¸ªç‚¹çš„å…¥åº¦ä¸å‡ºåº¦å·®â‰¤1ï¼Œå¯¹åº”çº¢è“å·®â‰¤1ï¼›  
  - äºŒåˆ†å›¾æŸ“è‰²ï¼šç›¸é‚»èŠ‚ç‚¹é¢œè‰²ä¸åŒï¼Œå¯¹åº”çº¿æ®µçš„ç«¯ç‚¹é¢œè‰²ä¸åŒï¼Œä»è€Œè¦†ç›–ç‚¹çš„çº¢è“å·®â‰¤1ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå›¾è®ºç®—æ³•çš„â€œæ­£ç¡®æ€§â€æ¥è‡ªäºâ€œæ¨¡å‹ä¸é—®é¢˜çš„ç­‰ä»·æ€§â€â€”â€”å…ˆè¯æ˜è½¬åŒ–åçš„å›¾é—®é¢˜å’ŒåŸé—®é¢˜æ˜¯ä¸€å›äº‹ï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æ¨¡å‹è½¬åŒ–**ï¼šæŠŠçº¿æ®µæŸ“è‰²è½¬åŒ–ä¸ºå›¾çš„è¾¹å®šå‘æˆ–èŠ‚ç‚¹æŸ“è‰²ï¼›  
- **ç¦»æ•£åŒ–**ï¼šå¤„ç†å¤§åæ ‡çš„å¿…å¤‡æŠ€å·§ï¼›  
- **DFSéå†**ï¼šæ‰¾æ¬§æ‹‰å›è·¯æˆ–äºŒåˆ†å›¾æŸ“è‰²çš„æ ¸å¿ƒå·¥å…·ï¼›  
- **è¾¹ç•Œå¤„ç†**ï¼šæŠŠ`[l,r]`è½¬åŒ–ä¸º`[l,r+1)`ï¼Œé¿å…ç«¯ç‚¹å†²çªã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆäºŒåˆ†å›¾æŸ“è‰²ï¼‰
* **è¯´æ˜**ï¼šç»¼åˆäº†frankchenfuçš„é¢˜è§£æ€è·¯ï¼Œä»£ç ç®€æ´æ˜“æ‡‚ï¼Œé€‚åˆæ–°æ‰‹å…¥é—¨ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <cstdio>
#include <vector>
#include <map>
using namespace std;

const int MAXN = 200010;
vector<int> p[MAXN];  // å›¾çš„é‚»æ¥è¡¨
int vis[MAXN];         // èŠ‚ç‚¹é¢œè‰²ï¼ˆ-1æœªæŸ“ï¼Œ0/1æŸ“è‰²ï¼‰

// DFSç»™äºŒåˆ†å›¾æŸ“è‰²
void dfs(int x, int color) {
    if (vis[x] != -1) return;
    vis[x] = color;
    for (int i = 0; i < p[x].size(); i++) {
        dfs(p[x][i], 1 - color);  // ç›¸é‚»èŠ‚ç‚¹æŸ“ç›¸åé¢œè‰²
    }
}

int main() {
    memset(vis, -1, sizeof(vis));
    int n; scanf("%d", &n);
    map<int, int> pos;  // ç¦»æ•£åŒ–ç”¨çš„æ˜ å°„
    vector<pair<int, int>> segs(n);

    // 1. è¯»å–çº¿æ®µï¼Œæ”¶é›†æ‰€æœ‰ç«¯ç‚¹
    for (int i = 0; i < n; i++) {
        int l, r; scanf("%d%d", &l, &r);
        segs[i] = {l, r};
        pos[l] = 0; pos[r] = 0;  // æ ‡è®°éœ€è¦ç¦»æ•£åŒ–çš„ç‚¹
    }

    // 2. ç¦»æ•£åŒ–ï¼šç»™ç«¯ç‚¹åˆ†é…å°åºå·
    int idx = 0;
    for (auto &it : pos) it.second = idx++;

    // 3. å»ºå›¾ï¼šæ¯ä¸ªçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹è¿è¾¹
    for (int i = 0; i < n; i++) {
        int l = pos[segs[i].first];
        int r = pos[segs[i].second];
        p[l].push_back(r);
        p[r].push_back(l);
    }

    // 4. äºŒåˆ†å›¾æŸ“è‰²ï¼šæœªæŸ“è‰²çš„èŠ‚ç‚¹å¼€å§‹DFS
    for (int i = 0; i < idx; i++) {
        if (vis[i] == -1) dfs(i, 0);
    }

    // 5. è¾“å‡ºç»“æœï¼šçº¿æ®µçš„é¢œè‰²ç­‰äºå·¦ç«¯ç‚¹çš„é¢œè‰²
    for (int i = 0; i < n; i++) {
        int l = pos[segs[i].first];
        printf("%d ", vis[l]);
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. æ”¶é›†æ‰€æœ‰çº¿æ®µçš„ç«¯ç‚¹ï¼Œç”¨`map`ç¦»æ•£åŒ–ï¼›  
  2. æŠŠæ¯ä¸ªçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹å½“ä½œèŠ‚ç‚¹ï¼Œè¿æ— å‘è¾¹ï¼›  
  3. ç”¨DFSç»™äºŒåˆ†å›¾æŸ“è‰²ï¼ˆç›¸é‚»èŠ‚ç‚¹é¢œè‰²ä¸åŒï¼‰ï¼›  
  4. çº¿æ®µçš„é¢œè‰²ç­‰äºå·¦ç«¯ç‚¹çš„é¢œè‰²ï¼Œè¾“å‡ºç»“æœã€‚


### é¢˜è§£ä¸€ï¼šæ¬§æ‹‰å›è·¯ï¼ˆæ¥æºï¼šywy_c_asmï¼‰
* **äº®ç‚¹**ï¼šç”¨æ¬§æ‹‰å›è·¯çš„â€œè¾¹å®šå‘â€ç›´æ¥å¯¹åº”çº¿æ®µé¢œè‰²ï¼Œé€»è¾‘ä¸¥è°¨ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
// DFSæ‰¾æ¬§æ‹‰å›è·¯ï¼Œç»™è¾¹å®šå‘
void dfs(int pt) {
    bv[pt] = 1;  // æ ‡è®°å·²è®¿é—®
    for (int i = heads[pt]; i; i = memchi[i].nxt) {
        if (memchi[i].gg) continue;  // è·³è¿‡å·²å¤„ç†çš„è¾¹
        dss[memchi[i].id] = pt;      // è®°å½•è¾¹çš„èµ·ç‚¹
        dts[memchi[i].id] = memchi[i].dest;  // è®°å½•è¾¹çš„ç»ˆç‚¹
        memchi[i].gg = memchi[i^1].gg = 1;  // æ ‡è®°è¾¹å·²å¤„ç†
        dfs(memchi[i].dest);  // é€’å½’å¤„ç†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯æ¬§æ‹‰å›è·¯çš„æ ¸å¿ƒï¼`memchi`æ•°ç»„å­˜è¾¹çš„ä¿¡æ¯ï¼Œ`dss`å’Œ`dts`è®°å½•æ¯æ¡è¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹â€”â€”**è¾¹çš„æ–¹å‘ï¼ˆèµ·ç‚¹â†’ç»ˆç‚¹ï¼‰å°±æ˜¯çº¿æ®µçš„é¢œè‰²**ï¼ˆæ¯”å¦‚èµ·ç‚¹<ç»ˆç‚¹ä¸ºçº¢ï¼Œå¦åˆ™ä¸ºè“ï¼‰ã€‚`bv[pt]`æ ‡è®°å·²è®¿é—®çš„èŠ‚ç‚¹ï¼Œé¿å…é‡å¤å¤„ç†ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¬§æ‹‰å›è·¯çš„å…³é”®æ˜¯â€œä¸é‡å¤èµ°è¾¹â€ï¼Œç”¨`gg`æ ‡è®°å·²å¤„ç†çš„è¾¹ï¼Œç¡®ä¿æ¯æ¡è¾¹åªèµ°ä¸€æ¬¡ã€‚


### é¢˜è§£äºŒï¼šäºŒåˆ†å›¾æŸ“è‰²ï¼ˆæ¥æºï¼šfrankchenfuï¼‰
* **äº®ç‚¹**ï¼šä»£ç ç®€æ´ï¼Œç”¨`multimap`æŒ‰åæ ‡æ’åºç«¯ç‚¹ï¼Œé¿å…ç¦»æ•£åŒ–é”™è¯¯ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
// æŒ‰åæ ‡æ’åºç«¯ç‚¹ï¼Œè¿è¾¹
multimap<int, int> h;
for (int i = 0; i < n; i++) {
    int l, r; scanf("%d%d", &l, &r);
    h.insert({l<<1, i<<1});     // å·¦ç«¯ç‚¹æ ‡è®°ä¸ºå¶æ•°
    h.insert({r<<1|1, i<<1|1}); // å³ç«¯ç‚¹æ ‡è®°ä¸ºå¥‡æ•°
}
// è¿è¾¹ï¼šæ¯ä¸ªçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹è¿è¾¹
multimap<int, int>::iterator it = h.begin();
for (int i = 0; i < n; i++) {
    int l = it->second; it++;
    int r = it->second; it++;
    p[l].push_back(r); p[r].push_back(l);
}
```
* **ä»£ç è§£è¯»**ï¼š  
  ä½œè€…ç”¨`multimap`æŒ‰åæ ‡æ’åºç«¯ç‚¹ï¼ŒæŠŠå·¦ç«¯ç‚¹æ ‡è®°ä¸ºå¶æ•°ï¼ˆ`l<<1`ï¼‰ï¼Œå³ç«¯ç‚¹æ ‡è®°ä¸ºå¥‡æ•°ï¼ˆ`r<<1|1`ï¼‰â€”â€”è¿™æ ·ç›¸åŒåæ ‡çš„å·¦ç«¯ç‚¹ä¼šæ¯”å³ç«¯ç‚¹å…ˆå¤„ç†ï¼Œé¿å…è¾¹ç•Œå†²çªã€‚ç„¶åæŠŠæ¯ä¸ªçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹è¿è¾¹ï¼Œä¿è¯å›¾çš„ç»“æ„æ­£ç¡®ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤„ç†ç›¸åŒåæ ‡çš„ç«¯ç‚¹æ—¶ï¼Œå·¦ç«¯ç‚¹ä¼˜å…ˆäºå³ç«¯ç‚¹ï¼Œå¦åˆ™ä¼šå‡ºé”™ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼šåƒç´ â€œçº¿æ®µæŸ“è‰²å°èƒ½æ‰‹â€
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ¨¡æ‹Ÿçº¿æ®µæŸ“è‰²çš„è¿‡ç¨‹ï¼Œåƒç©â€œç»™çº¿æ®µæ¶‚è‰²â€çš„å°æ¸¸æˆï¼Œæ¯å®Œæˆä¸€æ­¥å°±æœ‰éŸ³æ•ˆåé¦ˆï¼Œå¢åŠ è¶£å‘³æ€§ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’è®¾è®¡
1. **åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤ºâ€œåƒç´ æ•°è½´â€ï¼ˆç¦»æ•£åŒ–åçš„åæ ‡ï¼Œç”¨ç°è‰²åƒç´ å—è¡¨ç¤ºï¼‰ï¼Œçº¿æ®µæ˜¯â€œå½©è‰²åƒç´ è¾¹â€ï¼ˆæ¯”å¦‚è“è‰²è¡¨ç¤ºæœªæŸ“è‰²ï¼Œçº¢è‰²/ç»¿è‰²è¡¨ç¤ºå·²æŸ“è‰²ï¼‰ã€‚  
   - æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1~5å€é€Ÿï¼‰ï¼Œè¿˜æœ‰â€œåƒç´ å°æœºå™¨äººâ€å›¾æ ‡ï¼ˆä»£è¡¨DFSéå†ï¼‰ã€‚  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»æ¾æ—‹å¾‹ï¼‰ã€‚

2. **ç¦»æ•£åŒ–æ¼”ç¤º**ï¼š  
   - æŠŠå¤§åæ ‡ï¼ˆæ¯”å¦‚1e9ï¼‰â€œå‹ç¼©â€æˆå°åºå·ï¼Œç”¨â€œç¼©æ”¾æ‰‹åŠ¿â€åŠ¨ç”»è¡¨ç¤ºï¼Œä¼´éšâ€œå’»â€çš„éŸ³æ•ˆã€‚  
   - æ•°è½´ä¸Šçš„ç«¯ç‚¹å˜æˆâ€œå½©è‰²åƒç´ ç‚¹â€ï¼ˆçº¢è‰²è¡¨ç¤ºå·¦ç«¯ç‚¹ï¼Œç»¿è‰²è¡¨ç¤ºå³ç«¯ç‚¹ï¼‰ã€‚

3. **å»ºå›¾æ¼”ç¤º**ï¼š  
   - æ¯ä¸ªçº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹ä¹‹é—´â€œå¼¹å‡ºâ€ä¸€æ¡è“è‰²åƒç´ è¾¹ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼Œä»£è¡¨è¾¹å·²å»ºç«‹ã€‚  
   - è¾¹çš„é•¿åº¦æ ¹æ®ç¦»æ•£åŒ–åçš„è·ç¦»è°ƒæ•´ï¼Œæ¯”å¦‚ç«¯ç‚¹1å’Œ3ä¹‹é—´çš„è¾¹æ˜¯â€œä¸¤ä¸ªåƒç´ é•¿â€ã€‚

4. **DFSæŸ“è‰²æ¼”ç¤º**ï¼š  
   - ç”¨â€œåƒç´ å°æœºå™¨äººâ€ä»ç¬¬ä¸€ä¸ªæœªæŸ“è‰²çš„èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿ç€è¾¹ç§»åŠ¨ï¼Œæ¯åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±â€œç‚¹äº®â€å®ƒï¼ˆæ¯”å¦‚çº¢è‰²â†’ç»¿è‰²ï¼‰ï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆã€‚  
   - å½“å‰å¤„ç†çš„è¾¹ç”¨â€œé—ªçƒâ€æ•ˆæœé«˜äº®ï¼Œæ¯”å¦‚è“è‰²è¾¹å˜æˆé»„è‰²ï¼Œä»£è¡¨æ­£åœ¨å¤„ç†ã€‚  
   - æŸ“è‰²å®Œæˆçš„è¾¹å˜æˆçº¢è‰²æˆ–ç»¿è‰²ï¼ˆå¯¹åº”çº¿æ®µçš„é¢œè‰²ï¼‰ï¼ŒèŠ‚ç‚¹çš„é¢œè‰²åŒæ­¥æ›´æ–°ã€‚

5. **èƒœåˆ©çŠ¶æ€**ï¼š  
   - æ‰€æœ‰è¾¹éƒ½æŸ“è‰²å®Œæˆæ—¶ï¼Œå±å¹•å¼¹å‡ºâ€œèƒœåˆ©ï¼â€çš„åƒç´ æ–‡å­—ï¼Œæ’­æ”¾â€œé€šå…³éŸ³æ•ˆâ€ï¼ˆæ¯”å¦‚ã€Šå¡å°”è¾¾ä¼ è¯´ã€‹çš„èƒœåˆ©æ—‹å¾‹ï¼‰ï¼Œæ•°è½´ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½â€œé—ªçƒâ€åº†ç¥ã€‚


### äº¤äº’æ§åˆ¶
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œå°æœºå™¨äººèµ°ä¸€æ­¥ï¼Œè¾¹æŸ“è‰²ä¸€æ¬¡ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šæ»‘åŠ¨é€Ÿåº¦æ»‘å—è°ƒæ•´é€Ÿåº¦ï¼ˆ1å€é€Ÿ=æ¯ç§’1æ­¥ï¼Œ5å€é€Ÿ=æ¯ç§’5æ­¥ï¼‰ï¼Œå°æœºå™¨äººè‡ªåŠ¨èµ°å®Œæ‰€æœ‰è¾¹ã€‚  
- **é‡ç½®åŠ¨ç”»**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„â€œå›¾è®ºè½¬åŒ–â€æ€è·¯å¯ä»¥è§£å†³å¾ˆå¤šâ€œåŒºé—´çº¦æŸâ€é—®é¢˜ï¼Œæ¯”å¦‚ï¼š  
1. **CF547D**ï¼šç»™çº¿æ®µæŸ“è‰²ï¼Œä½¿å¾—æ¯ä¸ªç‚¹è¢«è¦†ç›–çš„é¢œè‰²æ•°ä¸è¶…è¿‡kï¼›  
2. **æ´›è°·P3643**ï¼ˆAPIO2016åˆ’è‰‡ï¼‰ï¼šç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„åŒºé—´æ•°ç›®ï¼Œç”¨ç¦»æ•£åŒ–å’ŒåŠ¨æ€è§„åˆ’ï¼›  
3. **LeetCode 751**ï¼šIPåˆ°Cidrï¼Œç”¨åŒºé—´åˆå¹¶å’Œç¦»æ•£åŒ–ã€‚


### æ´›è°·æ¨èç»ƒä¹ 
1. **æ´›è°·P3386**ï¼ˆäºŒåˆ†å›¾åŒ¹é…ï¼‰ï¼šç»ƒä¹ äºŒåˆ†å›¾çš„å»ºæ¨¡å’ŒæŸ“è‰²ï¼Œå·©å›ºå›¾è®ºåŸºç¡€ã€‚  
2. **æ´›è°·P1127**ï¼ˆè¯é“¾ï¼‰ï¼šæ¬§æ‹‰å›è·¯çš„ç»å…¸åº”ç”¨ï¼Œç»ƒä¹ â€œè¾¹å®šå‘â€çš„æ€è·¯ã€‚  
3. **æ´›è°·P2863**ï¼ˆé“¶æ²³è‹±é›„ä¼ è¯´ï¼‰ï¼šç¦»æ•£åŒ–å’Œå¹¶æŸ¥é›†çš„ç»“åˆï¼Œç»ƒä¹ å¤„ç†å¤§åŒºé—´é—®é¢˜ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªywy_c_asmï¼‰
> â€œæˆ‘æœ€å¼€å§‹ç”¨ç½‘ç»œæµTLEäº†ï¼Œåæ¥å‘ç°å¯ä»¥è½¬åŒ–ä¸ºæ¬§æ‹‰å›è·¯ï¼Œæ‰è¿‡äº†è¿™é“é¢˜ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹â€”â€”**ä¸è¦ä¸€å¼€å§‹å°±ç”¨å¤æ‚ç®—æ³•**ï¼ˆæ¯”å¦‚ç½‘ç»œæµï¼‰ï¼Œå…ˆæƒ³â€œæœ‰æ²¡æœ‰æ›´ç®€å•çš„å›¾è®ºæ¨¡å‹â€ï¼ˆæ¯”å¦‚æ¬§æ‹‰å›è·¯ï¼‰ã€‚ç½‘ç»œæµè™½ç„¶é€šç”¨ï¼Œä½†å¯¹äºæœ¬é¢˜æ¥è¯´ï¼Œæ¬§æ‹‰å›è·¯çš„æ—¶é—´å¤æ‚åº¦æ›´ä½ï¼ˆO(n log n)ï¼‰ï¼Œæ›´é€‚åˆã€‚


### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªSHOHOKUKUï¼‰
> â€œæ¬§æ‹‰å›è·¯çš„é—®é¢˜åœ¨äºï¼ŒåŸå§‹åŒºé—´æ˜¯å·¦é—­å³é—­ï¼Œè½¬åŒ–ä¸ºå·¦é—­å³å¼€åä¼šæœ‰è¾¹ç•Œé—®é¢˜ï¼Œæœ€åç”¨2-SATæ‰è§£å†³ã€‚â€  
**ç‚¹è¯„**ï¼šè¾¹ç•Œå¤„ç†æ˜¯æœ¬é¢˜çš„â€œå‘ç‚¹â€ï¼å¦‚æœçº¿æ®µæ˜¯å·¦é—­å³é—­ï¼Œè½¬åŒ–ä¸ºå·¦é—­å³å¼€ï¼ˆ`r+1`ï¼‰å¯ä»¥é¿å…ç«¯ç‚¹å†²çªï¼Œä½†å¦‚æœå¤„ç†ä¸å½“ï¼ˆæ¯”å¦‚å¿˜è®°`r+1`ï¼‰ï¼Œä¼šå¯¼è‡´ç»“æœé”™è¯¯ã€‚ç”¨2-SATå¯ä»¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯æ›´ç¨³å¦¥çš„æ–¹æ³•ã€‚


## æ€»ç»“
æœ¬æ¬¡åˆ†æäº†â€œPoints and Segmentsâ€çš„æ ¸å¿ƒæ€è·¯â€”â€”**æŠŠçº¿æ®µæŸ“è‰²è½¬åŒ–ä¸ºå›¾è®ºé—®é¢˜**ï¼Œç”¨æ¬§æ‹‰å›è·¯æˆ–äºŒåˆ†å›¾æŸ“è‰²è§£å†³ã€‚å…³é”®æ˜¯æŒæ¡â€œæ¨¡å‹è½¬åŒ–â€å’Œâ€œç¦»æ•£åŒ–â€æŠ€å·§ï¼Œå¤šç»ƒä¹ ç›¸ä¼¼é—®é¢˜ï¼Œå°±èƒ½ä¸¾ä¸€åä¸‰ï¼  

è®°ä½ï¼šç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œæŠŠå¤æ‚é—®é¢˜å˜æˆæ¸¸æˆâ€ï¼Œæ¯”å¦‚æŠŠçº¿æ®µå˜æˆè¾¹ï¼ŒæŠŠæŸ“è‰²å˜æˆâ€œå°æœºå™¨äººèµ°è¿·å®«â€ï¼Œè¿™æ ·å­¦ä¹ ä¼šæ›´è½»æ¾~ ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š89.17ç§’
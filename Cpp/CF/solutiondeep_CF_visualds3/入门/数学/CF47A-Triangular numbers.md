# 题目信息

# Triangular numbers

## 题目描述

A triangular number is the number of dots in an equilateral triangle uniformly filled with dots. For example, three dots can be arranged in a triangle; thus three is a triangular number. The $ n $ -th triangular number is the number of dots in a triangle with $ n $ dots on a side. ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF47A/7344b4fd5acb7c973775cffc0c5a51a81c6ee4d9.png). You can learn more about these numbers from Wikipedia (http://en.wikipedia.org/wiki/Triangular\_number).

Your task is to find out if a given integer is a triangular number.

## 样例 #1

### 输入

```
1
```

### 输出

```
YES
```

## 样例 #2

### 输入

```
2
```

### 输出

```
NO
```

## 样例 #3

### 输入

```
3
```

### 输出

```
YES
```

# AI分析结果

# 💡 Kay的C++算法解析：Triangular numbers 深入学习指南 💡

[introduction]
今天我们来一起分析“Triangular numbers”这道C++编程题。题目很有趣——判断一个数是不是“三角数”（比如3是，因为3个点能摆成等边三角形；2不是，因为摆不出来）。本指南会帮你理清思路，掌握核心解法，还能通过像素动画直观“看”到算法运行哦！


## 1. 题目解读与核心算法识别

✨ **本题主要考察**：数学转化 + 高效求解（枚举/二分/公式）

🗣️ **初步分析**：
解决这道题的关键，是先搞懂“三角数”的数学本质——第i个三角数是`i*(i+1)/2`（比如i=3时，3*4/2=6，对应6个点的三角形）。所以问题转化为：**有没有整数i，使得i*(i+1)/2 = 输入的n？**  

简单来说，这就是解一个一元二次方程：`i² + i - 2n = 0`。接下来的解法都是围绕“如何快速找到这个i”展开的：
- **暴力枚举**：从i=1开始算，直到`i*(i+1)/2 ≥n`（适合n小的情况，比如本题n≤500）；
- **二分查找**：利用三角数随i增大而单调递增的特性，快速缩小范围；
- **数学公式**：直接用求根公式或判别式，判断解是否为整数（最快的O(1)方法）。  

核心算法流程的可视化设计思路：用8位像素风格展示“堆三角形”的过程——每个i对应一个像素三角形（比如i=3是3层点），输入n用红色方块标记。当某个i的三角形点数等于n时，三角形闪烁并播放“叮”的胜利音效；如果超过n还没找到，就显示“NO”。


## 2. 精选优质题解参考

<eval_intro>
我从思路清晰度、代码可读性、算法效率等方面筛选了5份优质题解，帮你快速掌握不同解法的精髓：
</eval_intro>

**题解一：二分法（作者：fangd，赞：8）**
* **点评**：这份题解的亮点是**利用单调性做二分**——三角数随i增大而越来越大，就像排队买奶茶，越后面的人越多。二分法把“找i”的过程从O(n)缩短到O(log n)，效率很高。代码里`l`和`r`是搜索范围，`mid`是中间点，通过比较`mid*(mid+1)`和`2n`来调整范围，最后再验证结果是否正确。逻辑严谨，代码规范，变量名也很易懂（比如`l`=left，`r`=right）。

**题解二：数学公式法（作者：PC_DOS，赞：2）**
* **点评**：这题的“数学最优解”！直接用求根公式解`i² + i - 2n = 0`——正数解是`(-1 + sqrt(1+8n))/2`。代码里先算判别式`1+8n`，再开平方，最后判断结果是不是整数。优点是**O(1)时间**，不用循环，非常简洁。需要注意的是，浮点运算可能有精度问题（比如sqrt(25)=5.0，但sqrt(24)=4.898…），所以最后要再验证`i*(i+1)`是不是等于`2n`。

**题解三：枚举优化（作者：suixiang，赞：1）**
* **点评**：暴力枚举的“聪明版”——既然`i*(i+1)=2n`，那么i肯定不超过`sqrt(2n)`（比如2n=12，sqrt(12)≈3.46，i最多是3）。所以循环只需要到`sqrt(2n)`，比枚举到n快很多。代码里用`sqrt(m)`（m=2n）缩小范围，避免无用计算，适合刚学循环的同学理解。

**题解四：判别式法（作者：追风少年σχ，赞：0）**
* **点评**：另一种数学思路——方程`i² + i - 2n = 0`有整数解的条件是：判别式`delta=8n+1`是完全平方数，且平方根p满足`p%2==1`（因为i=(p-1)/2必须是整数）。比如n=3时，delta=25，p=5（5%2=1），i=(5-1)/2=2，正好满足2*3/2=3。代码里枚举p直到`p*p≥delta`，然后判断条件，逻辑很严谨。

**题解五：O(1)极简法（作者：pigstd，赞：0）**
* **点评**：最简洁的代码！因为i≈sqrt(2n)，所以直接取`m=sqrt(2n)`，然后验证`m*(m+1)/2`是不是等于n。比如n=6，2n=12，sqrt(12)=3.464，m=3，3*4/2=6，正好是n。优点是代码超短，适合快速写题；缺点是要注意sqrt的取整问题（比如n=10，2n=20，sqrt(20)=4.472，m=4，4*5/2=10，正确）。


## 3. 核心难点辨析与解题策略

<difficulty_intro>
解决这道题时，大家常遇到3个关键点，我们逐一拆解：
</difficulty_intro>

1.  **难点1：如何把题目转化为数学问题？**
    * **分析**：题目说“三角数是i个点一边的三角形的点数”，其实就是等差数列求和（1+2+…+i），公式是`i*(i+1)/2`。所以问题转化为“找i使得这个公式等于n”，也就是解二次方程。**关键是要记住三角数的公式**！
    * 💡 **学习笔记**：遇到“形状点数”问题，先想数学公式（比如正方形数是i²，三角数是i(i+1)/2）。

2.  **难点2：如何高效找i（避免暴力枚举）？**
    * **分析**：暴力枚举虽然简单，但n大时会很慢。这时候可以用**二分法**（利用单调性）或**数学公式**（直接计算）。比如二分法把范围从1到n缩小到log2(n)次循环，公式法则一步出结果。
    * 💡 **学习笔记**：如果问题中的数据是“单调递增/递减”的，优先考虑二分法；如果能转化为数学公式，优先用公式（最快）。

3.  **难点3：如何处理浮点精度问题？**
    * **分析**：用sqrt时，比如sqrt(25)=5.0是对的，但sqrt(24)=4.898…，如果直接转整数会得到4，这时候要验证结果是否正确。比如题解二里，算完i后，要再检查`i*(i+1)`是不是等于`2n`，避免精度误差。
    * 💡 **学习笔记**：浮点运算后一定要“验证”，确保结果正确！


### ✨ 解题技巧总结
- **技巧A：数学转化**：把实际问题（三角数）转化为数学公式（i(i+1)/2），再转化为方程（i²+i-2n=0），这是解题的关键。
- **技巧B：利用单调性**：如果数据随变量增大而单调变化，用二分法可以大幅提高效率。
- **技巧C：精度验证**：用sqrt或求根公式后，一定要用整数运算验证结果，避免浮点误差。


## 4. C++核心代码实现赏析

<code_intro_overall>
先看一个**通用核心实现**（综合数学公式法和验证，最简洁高效）：
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：本代码来自题解二（PC_DOS）的优化，用求根公式直接计算，再验证结果，确保正确。
* **完整核心代码**：
    ```cpp
    #include <iostream>
    #include <cmath>
    using namespace std;

    int main() {
        int n;
        cin >> n;
        int delta = 1 + 8 * n; // 判别式
        int p = sqrt(delta);   // 平方根
        // 验证：p²==delta 且 p是奇数（因为i=(p-1)/2必须是整数）
        if (p * p == delta && p % 2 == 1) {
            cout << "YES" << endl;
        } else {
            cout << "NO" << endl;
        }
        return 0;
    }
    ```
* **代码解读概要**：
    > 1. 计算判别式`delta=1+8n`（来自二次方程的判别式b²-4ac，这里a=1，b=1，c=-2n）；
    > 2. 求delta的平方根p（转成整数）；
    > 3. 验证p²是否等于delta（确保是完全平方数），且p是奇数（确保i是整数）；
    > 4. 输出结果。


<code_intro_selected>
接下来剖析几份优质题解的核心片段：
</code_intro_selected>

**题解一：二分法（作者：fangd）**
* **亮点**：利用单调性做二分，效率高。
* **核心代码片段**：
    ```cpp
    int l = static_cast<int>(sqrt(n)), r = (n << 1) + 1;
    while (l < r) {
        int mid = (l + r) >> 1;
        if (mid * (mid + 1) < (n << 1))
            l = mid + 1;
        else
            r = mid;
    }
    if (l * (l + 1) == (n << 1)) puts("YES");
    ```
* **代码解读**：
    > - `l`初始化为sqrt(n)（缩小左边界），`r`初始化为2n+1（右边界，因为i最大不超过2n）；
    > - `mid=(l+r)/2`（位运算`>>1`等价于除以2）；
    > - 如果`mid*(mid+1) < 2n`，说明i在mid右边，所以l=mid+1；否则i在mid左边或等于mid，r=mid；
    > - 循环结束后，l就是可能的i，再验证是否正确。
* 💡 **学习笔记**：二分法的关键是“调整边界”，要明确“当前mid是否满足条件”。

**题解三：枚举优化（作者：suixiang）**
* **亮点**：用sqrt缩小枚举范围，避免无用循环。
* **核心代码片段**：
    ```cpp
    int m = 2 * n;
    for (int i = 1; i <= sqrt(m); i++) {
        if (i * (i + 1) == m) {
            printf("YES");
            return 0;
        }
    }
    printf("NO");
    ```
* **代码解读**：
    > - `m=2n`（因为i*(i+1)=2n）；
    > - 循环i从1到sqrt(m)（因为i*(i+1)≥i²，所以i≤sqrt(m)）；
    > - 找到符合条件的i就输出YES并结束，否则输出NO。
* 💡 **学习笔记**：枚举时要尽可能缩小范围，减少循环次数。


## 5. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了让你更直观理解“找三角数”的过程，我设计了一个**8位像素风动画**——像玩FC游戏一样看算法运行！
</visualization_intro>

  * **动画演示主题**：《像素三角探险》——帮小方块找到“刚好等于n的三角数”。
  * **核心演示内容**：展示i从1开始递增，每个i对应一个“像素三角形”（比如i=3是3层，每层1、2、3个像素点），输入n用红色方块标记在屏幕右侧。当某个i的三角形点数等于n时，三角形闪烁，播放“叮~”的胜利音效；如果i增大到某个值，三角形点数超过n还没找到，就显示“NO”并播放“嘟”的提示音效。
  * **设计思路简述**：用8位像素风（FC红白机风格）是因为它复古可爱，能降低学习压力；“三角形生长”的动画直观展示三角数的生成过程；音效强化关键操作（找到时的“叮”让你记住成功的感觉）。

  * **动画帧步骤与交互关键点**：
    1. **场景初始化**：屏幕左侧是“三角生长区”（黑色背景），右侧是“输入显示区”（红色方块显示n）。控制面板有“开始/暂停”“单步”“重置”按钮，还有速度滑块（慢→快）。背景音乐是8位版《小星星》循环。
    2. **算法启动**：点击“开始”，i=1的三角形（1个像素点）出现在左侧，下方显示“i=1，点数=1”。
    3. **核心步骤演示**：
       - **i递增**：每步i+1，三角形增加一层（比如i=2时，第二层加2个点），点数更新为`i*(i+1)/2`。
       - **高亮当前状态**：当前i的三角形用黄色高亮，点数用白色数字显示。
       - **条件判断**：如果点数等于n，三角形闪烁3次，播放“叮~”音效，右侧显示“YES”；如果点数超过n，播放“嘟”音效，右侧显示“NO”。
    4. **交互控制**：
       - “单步”：点击一次，i增加1，看一步过程；
       - “自动播放”：按滑块速度连续运行（慢：1秒/步，快：0.1秒/步）；
       - “重置”：回到初始状态，重新输入n。

  * **旁白提示**：
    - （i=1时）“现在i=1，三角数是1个点~”；
    - （i=3时）“i=3，三角数是6个点，看看是不是等于n？”；
    - （找到时）“哇！i=2的三角数是3，刚好等于n，成功啦！”。


## 6. 拓展练习与相似问题思考

<similar_problems_intro>
掌握了三角数的解法后，我们可以把思路用到更多问题上：
</similar_problems_intro>

  * **通用思路迁移**：
    - 问题1：判断一个数是不是“正方形数”（i²）——类似，解i²=n；
    - 问题2：判断一个数是不是“五边形数”（i(3i-1)/2）——同样转化为二次方程；
    - 问题3：求第n个三角数——直接用公式计算。

  * **练习推荐 (洛谷)**：
    1.  **洛谷 P1028** - 数的计算  
          * 🗣️ **推荐理由**：这道题需要递推计算数的分解方式，和三角数的“累加”思路类似，能锻炼你的递推思维。
    2.  **洛谷 P1164** - 小A点菜  
          * 🗣️ **推荐理由**：题目要求计算点菜的方案数，需要枚举和动态规划，能巩固你“缩小范围”的技巧。
    3.  **洛谷 P1036** - 选数  
          * 🗣️ **推荐理由**：需要枚举所有选数组合并判断素数，能锻炼你的枚举和验证能力。
    4.  **洛谷 P2089** - 烤鸡  
          * 🗣️ **推荐理由**：枚举所有调料组合，和三角数的“暴力枚举”思路一致，能让你更熟练掌握循环。


## 7. 学习心得与经验分享 (若有)

<insights_intro>
有些作者的心得很有参考价值，比如：
</insights_intro>

> **参考经验 (来自作者wpy233)**：“我一开始用sqrt的小数部分判断，结果WA了！后来发现小数部分随i增大越来越接近0.5，于是分段处理，才AC。”
>
> **点评**：这位作者的经历提醒我们——**浮点运算的精度问题很容易踩坑**！如果用sqrt的小数部分判断，一定要考虑不同i的小数范围变化，或者直接用整数验证（比如题解二的方法）。


<conclusion>
本次关于“Triangular numbers”的分析就到这里啦！这道题的核心是“数学转化+高效求解”，不管用枚举、二分还是公式，关键是要理解三角数的本质。记住：编程的本质是“解决问题”，找到最适合的方法比“写复杂代码”更重要！下次我们再一起探索新的编程挑战~ 💪
</conclusion>

---
处理用时：131.94秒
# é¢˜ç›®ä¿¡æ¯

# Spanning Tree with One Fixed Degree

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ— å‘ã€æ— æƒã€è¿é€šçš„å›¾ï¼Œè¯¥å›¾åŒ…å« $n$ ä¸ªé¡¶ç‚¹å’Œ $m$ æ¡è¾¹ã€‚ä¿è¯å›¾ä¸­æ²¡æœ‰è‡ªç¯å’Œé‡è¾¹ã€‚

ä½ çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°è¯¥å›¾çš„ä»»æ„ä¸€æ£µç”Ÿæˆæ ‘ï¼Œä½¿å¾—ç¼–å·ä¸º $1$ çš„é¡¶ç‚¹çš„åº¦æ•°æ°å¥½ç­‰äº $D$ï¼ˆæˆ–è€…è¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„ç”Ÿæˆæ ‘ï¼‰ã€‚å›å¿†ä¸€ä¸‹ï¼Œé¡¶ç‚¹çš„åº¦æ•°æ˜¯æŒ‡ä¸è¯¥é¡¶ç‚¹ç›¸è¿çš„è¾¹çš„æ•°é‡ã€‚

## è¯´æ˜/æç¤º

ä¸‹å›¾å¯¹åº”ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ ·ä¾‹ï¼š![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1133F2/517159ebac5fb796da2e35eb5deb42cb16b19928.png)

ä¸‹å›¾å¯¹åº”ç¬¬ä¸‰ä¸ªæ ·ä¾‹ï¼š![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1133F2/5ec8b5eeba4dc997a4e457a85e595860b2a0bfe0.png)

ç”± ChatGPT 4.1 ç¿»è¯‘

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 5 1
1 2
1 3
1 4
2 3
3 4
```

### è¾“å‡º

```
YES
2 1
2 3
3 4
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4 5 3
1 2
1 3
1 4
2 3
3 4
```

### è¾“å‡º

```
YES
1 2
1 3
4 1
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
4 4 3
1 2
1 4
2 3
3 4
```

### è¾“å‡º

```
NO
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šSpanning Tree with One Fixed Degree æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†æå›¾è®ºç»å…¸é—®é¢˜ï¼šæ„é€ ä¸€æ£µç”Ÿæˆæ ‘ï¼Œä½¿èŠ‚ç‚¹1çš„åº¦æ•°æ°å¥½ä¸ºæŒ‡å®šå€¼Dã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ æŒæ¡è¿é€šå—åˆ†æçš„æ ¸å¿ƒæ€æƒ³ï¼Œç†è§£æ„é€ ç”Ÿæˆæ ‘çš„æŠ€å·§ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚æ„Ÿå—ç®—æ³•æµç¨‹ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«  
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆè¿é€šå—åˆ†æ + BFS/DFSæ„é€ ï¼‰  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äº**è¿é€šå—åˆ†æ**ï¼Œå°±åƒç»„å»ºä¸€æ”¯æ¢é™©é˜Ÿï¼šèŠ‚ç‚¹1æ˜¯åŸºåœ°ï¼Œè¿é€šå—æ˜¯åˆ†æ•£çš„è¥åœ°ã€‚æˆ‘ä»¬å¿…é¡»ç”¨Dæ¡"é€šä¿¡çº¿è·¯"ï¼ˆè¾¹ï¼‰è¿æ¥åŸºåœ°å’Œè¥åœ°ï¼Œä¸”æ¯ä¸ªè¥åœ°è‡³å°‘ä¸€æ¡çº¿è·¯ã€‚  
> - **æ ¸å¿ƒéš¾ç‚¹**ï¼šéªŒè¯å¯è¡Œæ€§ï¼ˆDéœ€â‰¥è¿é€šå—æ•°ä¸”â‰¤èŠ‚ç‚¹1çš„è¾¹æ•°ï¼‰ï¼Œå†åˆ†ä¸‰é˜¶æ®µæ„é€ ï¼šå…ˆè¿é€šè¥åœ°ä¸åŸºåœ°ï¼Œå†è¡¥è¶³Dæ¡è¾¹ï¼Œæœ€åç”¨BFSè¿æ¥å‰©ä½™èŠ‚ç‚¹  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåƒç´ åŠ¨ç”»å°†ç”¨ä¸åŒé¢œè‰²åŒºåˆ†è¿é€šå—ï¼Œé«˜äº®"é€šä¿¡çº¿è·¯"çš„è¿æ¥è¿‡ç¨‹ï¼Œä¼´éšéŸ³æ•ˆåé¦ˆã€‚å½“èŠ‚ç‚¹1è¿æ¥æ–°è¥åœ°æ—¶æ’­æ”¾"è¿æ¥æˆåŠŸ"éŸ³æ•ˆï¼ŒBFSæ‰©å±•æ—¶æ˜¾ç¤ºåƒç´ æ–¹å—è”“å»¶æ•ˆæœ  

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ  
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼š_Fontainebleau_ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°åº¦â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ é€šè¿‡å¹¶æŸ¥é›†é«˜æ•ˆç»Ÿè®¡è¿é€šå—æ•°é‡ï¼ŒBFSç”Ÿæˆæ ‘é€»è¾‘ç›´ç™½ã€‚ä»£ç ä¸­`used`æ•°ç»„æ ‡è®°å¿…è¿è¾¹ï¼Œ`d[i]=-1`å·§å¦™å¤„ç†å·²é€‰è¾¹ï¼Œè¾¹ç•Œæ¡ä»¶ä¸¥è°¨å¯ç›´æ¥ç”¨äºç«èµ›ã€‚äº®ç‚¹åœ¨äºç©ºé—´ä¼˜åŒ–ï¼ˆO(n)ï¼‰å’Œå¹¶æŸ¥é›†ä¸BFSçš„ååŒä½¿ç”¨ã€‚  

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šzzqDecoï¼‰**  
* **ç‚¹è¯„**ï¼šä»£ç è§„èŒƒæ€§â­ï¸â­ï¸â­ï¸â­ï¸ ç”¨`chose[]`æ•°ç»„æ˜ç¡®æ ‡è®°ä¸èŠ‚ç‚¹1çš„è¿æ¥é€‰æ‹©ï¼ŒDFS/BFSåŒé‡éå†ä¿è¯è¿é€šæ€§ã€‚å˜é‡å‘½åç›´è§‚ï¼ˆå¦‚`cnt`ç»Ÿè®¡è¿é€šå—ï¼‰ï¼Œ`vis`æ•°ç»„å¤ç”¨å‡å°‘å†…å­˜å¼€é”€ã€‚å®è·µä»·å€¼ä½“ç°åœ¨å¯¹Dçš„è¾¹ç•Œå¤„ç†ï¼ˆ`k>=cnt&&k<=d[1]`ï¼‰ã€‚  

**é¢˜è§£å…­ï¼ˆä½œè€…ï¼šFiraCodeï¼‰**  
* **ç‚¹è¯„**ï¼šç®—æ³•å¯å‘æ€§â­ï¸â­ï¸â­ï¸â­ï¸ åˆ›æ–°æ€§ä½¿ç”¨`map`è®°å½•ç”Ÿæˆæ ‘è¾¹ï¼Œé¿å…é‡å¤è¾“å‡ºã€‚DFSåˆ†ä¸¤æ¬¡ï¼šé¦–æ¬¡æ ‡è®°è¿é€šå—ï¼ŒäºŒæ¬¡ç”Ÿæˆæ ‘ã€‚äº®ç‚¹åœ¨äº`stt[]`æ•°ç»„ä¼˜å…ˆè¿æ¥ä¸åŒè¿é€šå—ï¼Œä¸è¶³æ—¶å†è¡¥è¾¹ï¼Œç›´è§‚ä½“ç°"å…ˆä¿è¯è¿é€šæ€§ï¼Œå†æ»¡è¶³åº¦æ•°"çš„æ ¸å¿ƒç­–ç•¥ã€‚  

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥  
1. **éš¾ç‚¹1ï¼šå¯è¡Œæ€§åˆ¤å®šï¼ˆä½•æ—¶è¾“å‡ºNOï¼‰**  
   * **åˆ†æ**ï¼šéœ€åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼šâ‘ èŠ‚ç‚¹1çš„è¾¹æ•°â‰¥D â‘¡å»æ‰èŠ‚ç‚¹1åçš„è¿é€šå—æ•°â‰¤Dã€‚è‹¥â‘ å¤±è´¥ï¼Œå¦‚åŒåŸºåœ°ä¿¡å·å¡”ä¸è¶³ï¼›è‹¥â‘¡å¤±è´¥ï¼Œå¦‚åŒè¥åœ°æ•°é‡è¶…è¿‡ä¿¡å·å¡”æ‰¿è½½  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDå¿…é¡»ä»‹äºè¿é€šå—æ•°å’ŒèŠ‚ç‚¹1è¾¹æ•°ä¹‹é—´  

2. **éš¾ç‚¹2ï¼šè¿é€šå—è¯†åˆ«**  
   * **åˆ†æ**ï¼šä¼˜è´¨è§£æ³•å‡ç”¨DFS/BFS/å¹¶æŸ¥é›†åˆ’åˆ†ç¦»æ•£å­å›¾ã€‚å…³é”®å˜é‡`comp`ï¼ˆä»£è¡¨èŠ‚ç‚¹é›†åˆï¼‰æˆ–`st[]`ï¼ˆå¹¶æŸ¥é›†æ ¹èŠ‚ç‚¹ï¼‰è®°å½•å—ä¿¡æ¯ï¼Œå¦‚åŒç»™æ¯ä¸ªè¥åœ°è´´æ ‡ç­¾  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå»èŠ‚ç‚¹1åï¼Œè¿é€šå—æ˜¯ç‹¬ç«‹ä½œæˆ˜å•å…ƒ  

3. **éš¾ç‚¹3ï¼šåˆ†é˜¶æ®µæ„é€ ç”Ÿæˆæ ‘**  
   * **åˆ†æ**ï¼šå…ˆè¿"ç”Ÿå­˜å¿…éœ€è¾¹"ï¼ˆæ¯ä¸ªè¿é€šå—ä¸€æ¡ï¼‰ï¼Œå†è¿"è¡¥è¶³è¾¹"ï¼ˆå‡‘å¤ŸDæ¡ï¼‰ï¼Œæœ€åBFSè¿æ¥å†…éƒ¨èŠ‚ç‚¹ã€‚`chose[]`æ•°ç»„å¦‚åŒä»»åŠ¡åˆ†é…è¡¨ï¼Œæ§åˆ¶è¿æ¥ä¼˜å…ˆçº§  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¸‰é˜¶æ®µç­–ç•¥ç¡®ä¿è¿é€šæ€§å’Œåº¦æ•°çº¦æŸ  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **æ‹†è§£çº¦æŸ**ï¼šå°†åº¦æ•°è¦æ±‚åˆ†è§£ä¸º"å¿…éœ€+å¯é€‰"è¾¹  
- **çŠ¶æ€å¤ç”¨**ï¼š`used`æ•°ç»„åœ¨BFSä¸­é‡å¤åˆ©ç”¨è¿é€šå—æ ‡è®°  
- **é˜²å¾¡æ€§æ£€æŸ¥**ï¼šä¼˜å…ˆå¤„ç†è¾¹ç•Œæ¡ä»¶ï¼ˆDè¶…é™æ—¶ç«‹å³NOï¼‰  

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ  
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <iostream>
#include <vector>
#include <queue>
#include <cstring>
using namespace std;

const int N = 2e5 + 5;
vector<int> adj[N];
bool used[N], chose[N];
int n, m, d;

int main() {
    // è¾“å…¥å›¾ç»“æ„
    cin >> n >> m >> d;
    for (int i=0; i<m; i++) {
        int u, v; cin >> u >> v;
        adj[u].push_back(v); adj[v].push_back(u);
    }

    // éš¾ç‚¹1: å¯è¡Œæ€§æ£€æŸ¥
    if (adj[1].size() < d) { cout << "NO"; return 0; }

    // éš¾ç‚¹2: è¿é€šå—ç»Ÿè®¡(BFS)
    vector<int> comp; // å­˜å‚¨ä»£è¡¨èŠ‚ç‚¹
    used[1] = true;
    for (int v : adj[1]) {
        if (!used[v]) {
            queue<int> q; q.push(v);
            used[v] = true;
            comp.push_back(v);
            while (!q.empty()) {
                int u = q.front(); q.pop();
                for (int w : adj[u]) {
                    if (w != 1 && !used[w]) {
                        used[w] = true; q.push(w);
                    }
                }
            }
        }
    }
    if (comp.size() > d) { cout << "NO"; return 0; }

    // éš¾ç‚¹3: åˆ†é˜¶æ®µæ„é€ 
    cout << "YES\n";
    memset(used, 0, sizeof(used));
    for (int v : comp) { // å¿…éœ€è¾¹
        chose[v] = true; d--;
        cout << "1 " << v << "\n";
    }
    for (int v : adj[1]) { // è¡¥è¶³è¾¹
        if (d>0 && !chose[v]) {
            chose[v] = true; d--;
            cout << "1 " << v << "\n";
        }
    }

    // BFSç”Ÿæˆå‰©ä½™æ ‘
    queue<int> q; q.push(1); used[1]=true;
    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (int v : adj[u]) {
            if (!used[v] && (u!=1 || chose[v])) {
                used[v] = true; q.push(v);
                cout << u << " " << v << "\n";
            }
        }
    }
}
```

**é¢˜è§£ä¸€ç‰‡æ®µèµæ**  
```cpp
// è¿é€šå—ç»Ÿè®¡(å¹¶æŸ¥é›†)
for (int v : adj[1]) {
    if (used[find(v)]) continue;
    used[find(v)] = true; 
    d[i] = -1;  // æ ‡è®°å·²é€‰è¾¹
    addedge(1,v); // è¿æ¥åŸºåœ°ä¸è¥åœ°
    k--;
}
```
> **ä»£ç è§£è¯»**ï¼š  
> 1. `find(v)`è·å–è¥åœ°ç¼–å·ï¼Œ`used[]`ç¡®ä¿æ¯ä¸ªè¥åœ°åªè¿ä¸€æ¬¡  
> 2. `d[i]=-1`å·§å¦™æ ‡è®°å·²ä½¿ç”¨çš„è¾¹ï¼Œé¿å…é‡å¤é€‰æ‹©  
> 3. `k--`å®æ—¶è·Ÿè¸ªå‰©ä½™è¿æ¥æ•°ï¼Œå¦‚åŒä»»åŠ¡è¿›åº¦æ¡  

**é¢˜è§£ä¸‰ç‰‡æ®µèµæ**  
```cpp
// è¡¥è¶³Dæ¡è¾¹
for (int v : adj[1]) {
    if (k>0 && !chose[v]) {
        chose[v]=true; k--;
        cout<<"1 "<<v<<"\n";
    }
}
```
> **å­¦ä¹ ç¬”è®°**ï¼š`chose[]`æ˜¯"è¿æ¥è®¸å¯è¡¨"ï¼Œç¡®ä¿ä¸é‡å¤è¿æ¥åŒä¸€èŠ‚ç‚¹  

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
* **ä¸»é¢˜**ï¼šåƒç´ æ¢é™©å®¶æ­å»ºé€šä¿¡ç½‘ç»œ  
* **è®¾è®¡æ€è·¯**ï¼šç”¨8ä½FCæ¸¸æˆé£æ ¼å‘ˆç°ï¼Œä¸åŒè¿é€šå—æ˜¾ç¤ºä¸ºå½©è‰²åƒç´ å²›å±¿ï¼ŒèŠ‚ç‚¹1æ˜¯ä¸­å¿ƒåŸºç«™  

* **åŠ¨ç”»æµç¨‹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šèŠ‚ç‚¹1ä¸ºé‡‘è‰²åƒç´ å—ï¼Œå…¶ä»–èŠ‚ç‚¹æŒ‰è¿é€šå—ç€è‰²ï¼ˆçº¢/è“/ç»¿ï¼‰  
  2. **å¯è¡Œæ€§æ£€æŸ¥**ï¼š  
     - æ˜¾ç¤ºèŠ‚ç‚¹1çš„è¾¹æ•°ï¼ˆä¿¡å·å¡”æ•°é‡ï¼‰å’Œè¿é€šå—æ•°ï¼ˆè¥åœ°æ•°é‡ï¼‰  
     - è‹¥æ£€æŸ¥å¤±è´¥ï¼šå±å¹•é—ªçƒçº¢å…‰ï¼Œæ’­æ”¾"é”™è¯¯"éŸ³æ•ˆ  
  3. **åˆ†é˜¶æ®µæ„é€ **ï¼š  
     - **é˜¶æ®µ1**ï¼šä»æ¯ä¸ªè¥åœ°å‡èµ·ä¿¡å·çƒŸï¼Œé‡‘è‰²çº¿æ¡è¿æ¥åŸºåœ°ï¼ˆéŸ³æ•ˆï¼šå®~ï¼‰  
     - **é˜¶æ®µ2**ï¼šå‰©ä½™è¿æ¥çº¿ä»åŸºåœ°éšæœºå»¶ä¼¸ï¼ˆéŸ³æ•ˆï¼šæ»´ç­”ï¼‰  
     - **é˜¶æ®µ3**ï¼šBFSåƒç´ æ³¢æµªä»åŸºåœ°æ‰©æ•£ï¼Œæ‰€åˆ°ä¹‹å¤„ç‚¹äº®è·¯å¾„ï¼ˆéŸ³æ•ˆï¼šæ°´æµå£°ï¼‰  
  4. **äº¤äº’æ§åˆ¶**ï¼š  
     - æ­¥è¿›æ¨¡å¼ï¼šæŒ‰ç©ºæ ¼å•æ­¥æ‰§è¡Œ  
     - è‡ªåŠ¨æ¨¡å¼ï¼šæ‹–æ‹½æ»‘å—è°ƒæ•´é€Ÿåº¦  
     - æˆåŠŸæ—¶ï¼šè¥åœ°å‡èµ·çƒŸèŠ±ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆ  

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ  
* **æŠ€å·§è¿ç§»**ï¼šè¿é€šå—åˆ†æé€‚ç”¨äºï¼š  
  1. ç½‘ç»œæ–­å¼€æ¢å¤ï¼ˆP1266ï¼‰  
  2. ç¤¾äº¤ç½‘ç»œç¤¾åŒºå‘ç°ï¼ˆP1892ï¼‰  
  3. ç”µåŠ›ç³»ç»Ÿå†—ä½™è®¾è®¡ï¼ˆP1340ï¼‰  

* **æ¨èç»ƒä¹ **ï¼š  
  1. **æ´›è°· P1266** - é€Ÿåº¦é™åˆ¶  
     > ğŸ—£ï¸ å·©å›ºè¿é€šå—åœ¨åŠ¨æ€å›¾ä¸­çš„åº”ç”¨  
  2. **æ´›è°· P1892** - å›¢ä¼™  
     > ğŸ—£ï¸ å­¦ä¹ æ‰©å±•è¿é€šå—æ¦‚å¿µåˆ°äºŒåˆ†å›¾  
  3. **æ´›è°· P1340** - å…½å¾„ç®¡ç†  
     > ğŸ—£ï¸ ç»ƒä¹ åœ¨åˆ è¾¹åœºæ™¯ä¸‹ç»´æŠ¤è¿é€šæ€§  

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
> **æ¥è‡ª_Fontainebleau_çš„ç»éªŒ**ï¼š  
> "æœ€åˆå¿½ç•¥è¿é€šå—æ•°>Dçš„æƒ…å†µå¯¼è‡´WAï¼Œåå¢åŠ `if(comp.size()>d)`æ£€æŸ¥æ‰AC"  
>   
> **Kayç‚¹è¯„**ï¼š  
> è¿™æé†’æˆ‘ä»¬ï¼šçº¦æŸæ¡ä»¶è¦åŒé‡éªŒè¯ï¼åƒå»ºç­‘å¸ˆéœ€åŒæ—¶æ£€æŸ¥ææ–™å’Œåœ°åŸºæ‰¿è½½åŠ›  

---

### ç»“è¯­  
é€šè¿‡è¿é€šå—åˆ†æ+åˆ†é˜¶æ®µæ„é€ ï¼Œæˆ‘ä»¬è§£å†³äº†åº¦æ•°çº¦æŸçš„ç”Ÿæˆæ ‘é—®é¢˜ã€‚è®°ä½ï¼šå›¾è®ºé—®é¢˜ä¸­ï¼Œåˆ†è§£çº¦æŸå’ŒçŠ¶æ€å¤ç”¨æ˜¯å…³é”®ç­–ç•¥ã€‚ç»§ç»­ç”¨åƒç´ åŠ¨ç”»åœ¨æ´›è°·ç»ƒä¹ å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š173.11ç§’
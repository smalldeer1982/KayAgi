# é¢˜ç›®ä¿¡æ¯

# Case of Chocolate

## é¢˜ç›®æè¿°

Andrewid the Android is a galaxy-known detective. Now he does not investigate any case and is eating chocolate out of boredom.

A bar of chocolate can be presented as an $ nÃ—n $ table, where each cell represents one piece of chocolate. The columns of the table are numbered from $ 1 $ to $ n $ from left to right and the rows are numbered from top to bottom. Let's call the anti-diagonal to be a diagonal that goes the lower left corner to the upper right corner of the table. First Andrewid eats all the pieces lying below the anti-diagonal. Then he performs the following $ q $ actions with the remaining triangular part: first, he chooses a piece on the anti-diagonal and either direction 'up' or 'left', and then he begins to eat all the pieces starting from the selected cell, moving in the selected direction until he reaches the already eaten piece or chocolate bar edge.

After each action, he wants to know how many pieces he ate as a result of this action.

## è¯´æ˜/æç¤º

Pictures to the sample tests:

![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF555C/68417759be7789b5dc33e557d3b01b391502988d.png)

The pieces that were eaten in the same action are painted the same color. The pieces lying on the anti-diagonal contain the numbers of the action as a result of which these pieces were eaten.

In the second sample test the Andrewid tries to start eating chocolate for the second time during his fifth action, starting from the cell at the intersection of the 10-th column and the 1-st row, but this cell is already empty, so he does not eat anything.

## æ ·ä¾‹ #1

### è¾“å…¥

```
6 5
3 4 U
6 1 L
2 5 L
1 6 U
4 3 U
```

### è¾“å‡º

```
4
3
2
1
2
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
10 6
2 9 U
10 1 U
1 10 U
8 3 L
10 1 L
6 5 U
```

### è¾“å‡º

```
9
1
10
6
0
2
```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCase of Chocolate æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘`ï¼ˆç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³"Case of Chocolate"çš„å…³é”®åœ¨äºè¿ç”¨**åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘**ç»´æŠ¤ä¸¤ä¸ªæ–¹å‘çš„è¾¹ç•Œä¿¡æ¯ã€‚æƒ³è±¡ä½ åœ¨ç©ä¸€ä¸ªåƒç´ åƒè±†æ¸¸æˆï¼Œå·§å…‹åŠ›ç½‘æ ¼æ˜¯æˆ˜åœºï¼Œæ¯æ¬¡æ“ä½œå°±åƒæ”¾ç½®ä¸€é“"æ¿€å…‰å¢™"â€”â€”å‘ä¸Šæˆ–å‘å·¦å»¶ä¼¸ç›´åˆ°é‡åˆ°éšœç¢ã€‚æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ï¼š
> - ç»´æŠ¤åˆ—æ–¹å‘çš„ä¸Šè¾¹ç•Œï¼ˆå‘ä¸Šæ“ä½œå½±å“ï¼‰
> - ç»´æŠ¤è¡Œæ–¹å‘çš„å·¦è¾¹ç•Œï¼ˆå‘å·¦æ“ä½œå½±å“ï¼‰
> 
> æ ¸å¿ƒéš¾ç‚¹åœ¨äºæ“ä½œä¼šç›¸äº’å½±å“ï¼ˆå¦‚å‘ä¸Šæ“ä½œåï¼Œç›¸å…³è¡Œçš„å·¦è¾¹ç•Œéœ€æ›´æ–°ï¼‰ã€‚é€šè¿‡ä¸¤æ£µåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼Œæˆ‘ä»¬èƒ½åœ¨O(q log n)å¤æ‚åº¦å†…é«˜æ•ˆå¤„ç†10^9è§„æ¨¡çš„ç½‘æ ¼ã€‚
> 
> åœ¨å¯è§†åŒ–è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨8-bitåƒç´ é£æ ¼å±•ç¤ºå·§å…‹åŠ›ç½‘æ ¼ï¼š
> - åˆå§‹çŠ¶æ€ï¼šå·¦ä¸‹ä¸‰è§’ä¸ºæ·±ç°è‰²ï¼ˆå·²åƒï¼‰ï¼Œå³ä¸Šä¸‰è§’ä¸ºæµ…é»„è‰²ï¼ˆæœªåƒï¼‰
> - æ“ä½œæ—¶ï¼šèµ·ç‚¹åƒç´ é—ªçƒçº¢å…‰ï¼Œå»¶ä¼¸è·¯å¾„æ¸å˜ä¸ºç»¿è‰²
> - éŸ³æ•ˆè®¾è®¡ï¼šç§»åŠ¨æ—¶"å˜€"å£°ï¼Œé‡åˆ°è¾¹ç•Œæ—¶"å®"å£°ï¼Œå®Œæˆæ—¶èƒœåˆ©éŸ³æ•ˆ
> - äº¤äº’æ§åˆ¶ï¼šæ”¯æŒå•æ­¥æ‰§è¡Œ/è‡ªåŠ¨æ’­æ”¾ï¼Œå³ä¾§åŒæ­¥æ˜¾ç¤ºçº¿æ®µæ ‘æ›´æ–°åŠ¨ç”»

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šKrystallosï¼‰**
* **ç‚¹è¯„**ï¼šæ­¤è§£æ³•é‡‡ç”¨åŒåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼Œæ€è·¯æ¸…æ™°ä¸¥è°¨ã€‚ä»£ç ä¸­ï¼š
  - ä½¿ç”¨`tree[2][6000005]`åˆ†åˆ«ç»´æŠ¤è¡Œ/åˆ—è¾¹ç•Œï¼Œç»“æ„åˆ†æ˜
  - `spread`å‡½æ•°å®ç°ä¼˜é›…çš„æ ‡è®°ä¸‹ä¼ ä¸åŠ¨æ€å¼€ç‚¹
  - æ ¸å¿ƒé€»è¾‘ï¼ˆ`change`å’Œ`ask`ï¼‰ä»…30è¡Œï¼Œå´å®Œæ•´å¤„ç†äº†åŒå‘å½±å“
  - äº®ç‚¹ï¼šç”¨`id`å‚æ•°åŒºåˆ†è¡Œ/åˆ—æ ‘ï¼Œé¿å…ä»£ç é‡å¤ï¼Œç©ºé—´ä¼˜åŒ–å‡ºè‰²

**é¢˜è§£äºŒï¼ˆæ¥æºï¼šSookeï¼‰**
* **ç‚¹è¯„**ï¼šæ­¤è§£æ³•åˆ™ç”¨`set`ç»´æŠ¤é˜¶æ¢¯çŠ¶å·§å…‹åŠ›å—ï¼Œå±•ç°å·§å¦™æŠ½è±¡èƒ½åŠ›ï¼š
  - å®šä¹‰`(l, r, x, y)`å››å…ƒç»„æè¿°æœªåƒåŒºåŸŸï¼Œç¬¦åˆå‡ ä½•ç›´è§‰
  - åˆ©ç”¨`set.lower_bound`å¿«é€Ÿå®šä½æ“ä½œç‚¹æ‰€åœ¨åŒºé—´
  - ä»£ç ä»…40è¡Œï¼Œé€šè¿‡åˆ†è£‚åŒºé—´å¤„ç†æ“ä½œå½±å“
  - äº®ç‚¹ï¼šå°†å¤æ‚å‡ ä½•é—®é¢˜è½¬åŒ–ä¸ºåŒºé—´ç®¡ç†ï¼Œå¤æ‚åº¦åŒæ ·ä¸ºO(q log q)

**é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šLeap_Frogï¼‰**
* **ç‚¹è¯„**ï¼šæ­¤è§£æ³•åŒæ ·æ˜¯åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼Œä½†æ›´æ³¨é‡å·¥ç¨‹ä¼˜åŒ–ï¼š
  - å°è£…`SegmentTree`ç±»ï¼Œæé«˜ä»£ç å¤ç”¨æ€§
  - é‡‡ç”¨æ ‡è®°æ°¸ä¹…åŒ–æŠ€å·§ï¼Œé¿å…é¢‘ç¹ä¸‹ä¼ 
  - ä½¿ç”¨`unordered_map`é˜²æ­¢é‡å¤æ“ä½œï¼Œå¢å¼ºé²æ£’æ€§
  - äº®ç‚¹ï¼šè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå¦‚`st.count(x)`æ£€æŸ¥ï¼‰ï¼Œé€‚åˆç«èµ›ç›´æ¥ä½¿ç”¨

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **åŒå‘è¾¹ç•Œç»´æŠ¤**
   * **åˆ†æ**ï¼šå‘ä¸Šæ“ä½œå½±å“åˆ—è¾¹ç•Œï¼Œä½†ä¼šæ›´æ–°è¡Œè¾¹ç•Œï¼›å‘å·¦æ“ä½œåä¹‹ã€‚ä¼˜è´¨è§£æ³•å‡ç”¨æ•°æ®ç»“æ„åŒæ­¥ç»´æŠ¤åŒå‘å½±å“ï¼šçº¿æ®µæ ‘æ´¾ç³»é€šè¿‡åŒºé—´æ›´æ–°å¤„ç†ï¼ˆå¦‚Krystallosçš„`change(1, ans+1, j, i, 1)`ï¼‰ï¼Œsetæ´¾ç³»é€šè¿‡å‡ ä½•åˆ†å‰²å®ç°ï¼ˆå¦‚Sookeçš„åŒºé—´åˆ†è£‚ï¼‰
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåƒ"æ¿€å…‰äº¤å "èˆ¬æ€è€ƒåŒå‘å½±å“ï¼Œæ•°æ®ç»“æ„æ˜¯åè°ƒå™¨

2. **å¤§èŒƒå›´ç©ºé—´ä¼˜åŒ–**
   * **åˆ†æ**ï¼šnâ‰¤10^9éœ€ç‰¹æ®Šå¤„ç†ã€‚åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼ˆKrystallos, Leap_Frogï¼‰ä»…å¼€è¾Ÿå¿…è¦èŠ‚ç‚¹ï¼›setè§£æ³•ï¼ˆSookeï¼‰ç›´æ¥è§„é¿ç©ºé—´é—®é¢˜ã€‚ç¦»æ•£åŒ–ï¼ˆLJC00753ï¼‰ä¹Ÿæ˜¯å¯è¡Œé€‰æ‹©ï¼Œä½†å¢åŠ ç¼–ç å¤æ‚åº¦
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå½“æ•°æ®èŒƒå›´è¶…é™æ—¶ï¼Œæ€è€ƒ"é€»è¾‘ç©ºé—´ vs ç‰©ç†ç©ºé—´"çš„è½¬æ¢ç­–ç•¥

3. **æ“ä½œæ—¶åºå¤„ç†**
   * **åˆ†æ**ï¼šåæ“ä½œå—å…ˆæ“ä½œé™åˆ¶ã€‚çº¿æ®µæ ‘è§£æ³•é€šè¿‡åŒºé—´å–maxè‡ªç„¶å¤„ç†æ—¶åºï¼ˆ`lazy(p,id) = max(lazy(p,id), d)`ï¼‰ï¼Œsetè§£æ³•é€šè¿‡åŒºé—´ä¸äº¤æ€§ä¿è¯æ­£ç¡®æ€§
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ—¶åºå½±å“ä½“ç°"æ— åæ•ˆæ€§"ï¼Œé€‚åˆç”¨max/minæ“ä½œæ•è·

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **ç©ºé—´å‹ç¼©æŠ€å·§**ï¼šåŠ¨æ€å¼€ç‚¹ > ç¦»æ•£åŒ– > setå‡ ä½•æŠ½è±¡
- **åŒå‘ç»´æŠ¤ç­–ç•¥**ï¼šè¡Œ/åˆ—è¾¹ç•Œç›¸äº’æ›´æ–°æ—¶ï¼Œæ³¨æ„åŒºé—´å¼€é—­ï¼ˆå¦‚`ans+1`ï¼‰
- **ä»£ç å¤ç”¨è‰ºæœ¯**ï¼šä½¿ç”¨ç»´åº¦å‚æ•°ï¼ˆå¦‚`id`ï¼‰æˆ–ç±»å°è£…é¿å…é‡å¤ç¼–ç 

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šç»¼åˆKrystalloså’ŒLeap_Frogè§£æ³•ä¼˜åŒ–çš„åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘å®ç°
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <set>
using namespace std;
const int N = 6e6 + 5;

struct SegTree {
    int l, r, ls, rs, tag;
} T[2][N]; // 0:col_up, 1:row_left
int tot[2] = {1, 1}, n, q;

void update(int id, int p, int l, int r, int L, int R, int v) {
    if (r < L || R < l) return;
    if (L <= l && r <= R) {
        T[id][p].tag = max(T[id][p].tag, v);
        return;
    }
    int mid = (l + r) >> 1;
    if (L <= mid) {
        if (!T[id][p].ls) {
            T[id][p].ls = ++tot[id];
            T[id][T[id][p].ls] = {l, mid, 0, 0, 0};
        }
        update(id, T[id][p].ls, l, mid, L, R, v);
    }
    if (mid < R) {
        if (!T[id][p].rs) {
            T[id][p].rs = ++tot[id];
            T[id][T[id][p].rs] = {mid + 1, r, 0, 0, 0};
        }
        update(id, T[id][p].rs, mid + 1, r, L, R, v);
    }
}

int query(int id, int p, int l, int r, int x) {
    if (l == r) return T[id][p].tag;
    int res = T[id][p].tag, mid = (l + r) >> 1;
    if (x <= mid && T[id][p].ls) 
        res = max(res, query(id, T[id][p].ls, l, mid, x));
    else if (x > mid && T[id][p].rs)
        res = max(res, query(id, T[id][p].rs, mid + 1, r, x));
    return res;
}

int main() {
    cin >> n >> q;
    T[0][1] = T[1][1] = {1, n, 0, 0, 0};
    while (q--) {
        int x, y; char op;
        cin >> x >> y >> op;
        if (op == 'U') {
            int bound = query(0, 1, 1, n, x);
            cout << y - bound << "\n";
            if (y > bound) {
                update(1, 1, 1, n, bound + 1, y, x);
                update(0, 1, 1, n, x, x, y);
            }
        } else {
            int bound = query(1, 1, 1, n, y);
            cout << x - bound << "\n";
            if (x > bound) {
                update(0, 1, 1, n, bound + 1, x, y);
                update(1, 1, 1, n, y, y, x);
            }
        }
    }
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. åŒæ ‘ç»“æ„ï¼š`T[0]`ç»´æŠ¤åˆ—ä¸Šç•Œï¼Œ`T[1]`ç»´æŠ¤è¡Œå·¦ç•Œ
  2. åŠ¨æ€å¼€ç‚¹ï¼š`update`ä¸­æŒ‰éœ€åˆ›å»ºå­èŠ‚ç‚¹ï¼ˆ`!T[id][p].ls`æ£€æµ‹ï¼‰
  3. è¾¹ç•Œä¼ æ’­ï¼šå‘ä¸Šæ“ä½œåæ›´æ–°è¡Œå·¦ç•Œï¼ˆ`update(1,...)`ï¼‰ï¼Œåä¹‹äº¦ç„¶
  4. æ ‡è®°æ°¸ä¹…åŒ–ï¼š`query`æ—¶æ²¿é€”å–`max(tag, res)`ï¼Œé¿å…å›æº¯

---

**é¢˜è§£ä¸€ï¼ˆKrystallosï¼‰ç‰‡æ®µèµæ**
* **äº®ç‚¹**ï¼šç”¨å®ç®€åŒ–æ ‘èŠ‚ç‚¹è®¿é—®ï¼ŒåŠ¨æ€å¼€ç‚¹ä¸æ ‡è®°ä¸‹ä¼ èåˆ
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
#define l(p,i) tree[i][p].l
void spread(int p, int id) {
    if (ls(p,id)==0) { // åŠ¨æ€å¼€å·¦å­
        ls(p,id)=++tot[id]; 
        l(ls(p,id),id)=l(p,id); 
        r(ls(p,id),id)=mid;
    } // å³å­ç±»ä¼¼
    if (lazy(p,id)) { // æ ‡è®°ä¸‹ä¼ 
        lazy(ls(p,id),id)=max(lazy(ls(p,id),lazy(p,id));
        lazy(rs(p,id),id)=max(lazy(rs(p,id),lazy(p,id));
    }
}
```
* **ä»£ç è§£è¯»**ï¼š
  > è¿™ä¸ª`spread`å‡½æ•°æ˜¯åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘çš„æ ¸å¿ƒå¼•æ“ï¼š
  > 1. **æŒ‰éœ€å¼€ç‚¹**ï¼šå½“è®¿é—®å­èŠ‚ç‚¹æ—¶ï¼ˆ`ls(p,id)==0`ï¼‰ï¼Œå®æ—¶åˆ›å»ºèŠ‚ç‚¹å¹¶åˆå§‹åŒ–åŒºé—´
  > 2. **æ™ºèƒ½ä¸‹ä¼ **ï¼šä»…å½“å­˜åœ¨æ ‡è®°æ—¶å¤åˆ¶åˆ°å­èŠ‚ç‚¹ï¼Œé¿å…æ— æ•ˆæ“ä½œ
  > 3. **åŒºé—´ç»§æ‰¿**ï¼šå­èŠ‚ç‚¹åŒºé—´å–çˆ¶èŠ‚ç‚¹ä¸­ç‚¹ï¼ˆ`mid=(l+r)>>1`ï¼‰ï¼Œä¿æŒåŒºé—´å®Œæ•´æ€§
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŠ¨æ€å¼€ç‚¹åƒ"é€ è·¯æœº"â€”â€”åªåœ¨éœ€è¦æ—¶å¼€è¾Ÿæ–°è·¯å¾„

**é¢˜è§£äºŒï¼ˆSookeï¼‰ç‰‡æ®µèµæ**
* **äº®ç‚¹**ï¼šå››å…ƒç»„åŒºé—´æè¿° + setäºŒåˆ†å®šä½
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
set<Element> set;
auto it = --set.upper_bound((Element){x, n+1, 1, 1});
if (it->l <= x && x <= it->r) {
    Element cur = *it; set.erase(it);
    if (opt == 'L') {
        ans = x - cur.x + 1;
        set.insert({cur.l, x-1, cur.x, y+1});
        set.insert({x+1, cur.r, cur.x, cur.y});
    } // elseç±»ä¼¼
}
```
* **ä»£ç è§£è¯»**ï¼š
  > è¿™æ®µä»£ç å±•ç°å‡ ä½•åˆ†å‰²çš„ç²¾é«“ï¼š
  > 1. **äºŒåˆ†å®šä½**ï¼š`upper_bound`æ‰¾åˆ°é¦–ä¸ª`l>x`çš„åŒºé—´ï¼Œ`--`å³å¾—åŒ…å«xçš„åŒºé—´
  > 2. **åŒºé—´åˆ†è£‚**ï¼šåˆ é™¤åŸåŒºé—´åï¼Œä»¥xä¸ºç•Œæ’å…¥ä¸¤ä¸ªæ–°åŒºé—´ï¼ˆå·¦åŒºé—´æ›´æ–°yè¾¹ç•Œï¼‰
  > 3. **è¾¹ç•Œè®¡ç®—**ï¼š`x - cur.x + 1`å³åƒæ‰çš„æ ¼å­æ•°ï¼ˆä»èµ·ç‚¹åˆ°å·¦è¾¹ç•Œï¼‰
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šsetç®¡ç†åŒºé—´æ—¶ï¼Œåˆ©ç”¨`lower_bound/upper_bound`å®šä½æ˜¯å…³é”®

**é¢˜è§£ä¸‰ï¼ˆLeap_Frogï¼‰ç‰‡æ®µèµæ**
* **äº®ç‚¹**ï¼šç±»å°è£…+unordered_mapé˜²é‡
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
unordered_map<int,int> mp[2];
if (mp[dir].count(pos)) { 
    cout << "0\n"; continue; 
}
mp[dir][pos] = 1;
int bound = T[!dir].query(pos);
```
* **ä»£ç è§£è¯»**ï¼š
  > è¿™æ®µä»£ç ä½“ç°å·¥ç¨‹ä¼˜åŒ–ï¼š
  > 1. **æ“ä½œé˜²é‡**ï¼š`mp[dir]`æ£€æµ‹åŒè¡Œ/åˆ—æ˜¯å¦å·²æ“ä½œ
  > 2. **åŒå‘æŸ¥è¯¢**ï¼š`T[!dir].query`è·å–å¦ä¸€æ–¹å‘è¾¹ç•Œ
  > 3. **å¯¹ç§°å¤„ç†**ï¼š`dir`å‚æ•°åŒ–æ–¹å‘ï¼Œå‡å°‘é‡å¤é€»è¾‘
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨`!dir`åˆ‡æ¢æ–¹å‘ï¼Œåƒ"å¼€å…³ç¿»è½¬"èˆ¬ä¼˜é›…å¤„ç†å¯¹ç§°æ“ä½œ

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### è®¾è®¡æ€è·¯
> é‡‡ç”¨8-bitå¤å¤æ¸¸æˆé£æ ¼ï¼Œå°†ç®—æ³•è½¬åŒ–ä¸º"æ¿€å…‰æ‰«å°„"åŠ¨ç”»ï¼š
> - **ç½‘æ ¼æ¸²æŸ“**ï¼šCanvasç»˜åˆ¶nÃ—nåƒç´ ç½‘æ ¼ï¼ˆæœ€å¤§æ¸²æŸ“100Ã—100ï¼Œå¤§ç½‘æ ¼ç¼©æ”¾ï¼‰
> - **çŠ¶æ€ç¼–ç **ï¼šæœªåƒ(æµ…é»„)ï¼Œå·²åƒ(æ·±ç°)ï¼Œå½“å‰æ“ä½œ(çº¢è‰²)ï¼Œå†å²æ“ä½œ(è“è‰²)
> - **éŸ³æ•ˆè®¾è®¡**ï¼šç§»åŠ¨æ—¶"å˜€"å£°ï¼Œæ’è¾¹ç•Œæ—¶"é“›"å£°ï¼Œå®Œæˆæ—¶èƒœåˆ©éŸ³æ•ˆ

### å…³é”®å¸§æ­¥éª¤
1. **åˆå§‹åŒ–**ï¼š
   - å·¦ä¸‹ä¸‰è§’æ·±ç°ï¼Œå³ä¸Šä¸‰è§’æµ…é»„
   - å³ä¾§æ˜¾ç¤ºä¸¤æ£µçº¿æ®µæ ‘ï¼ˆåˆ—æ ‘å·¦ï¼Œè¡Œæ ‘ä¸‹ï¼‰

2. **æ“ä½œ`(3,4,U)`**ï¼š
   - é«˜äº®(3,4)çº¢è‰²ï¼Œå‘ä¸Šå»¶ä¼¸4æ ¼å˜è“
   - åŒæ­¥åŠ¨ç”»ï¼šåˆ—æ ‘æ›´æ–°x=3çš„è¾¹ç•Œä¸º4ï¼Œè¡Œæ ‘æ›´æ–°y=1â†’4çš„è¾¹ç•Œä¸º3
   - æ’­æ”¾è¿ç»­"å˜€"å£°ï¼Œç»“æŸæ’­æ”¾"å®å’š"

3. **æ“ä½œ`(6,1,L)`**ï¼š
   - é«˜äº®(6,1)çº¢è‰²ï¼Œå‘å·¦å»¶ä¼¸3æ ¼å˜ç»¿
   - åˆ—æ ‘æ›´æ–°x=4â†’6çš„è¾¹ç•Œä¸º1ï¼Œè¡Œæ ‘æ›´æ–°y=1çš„è¾¹ç•Œä¸º6
   - çº¿æ®µæ ‘æ‰©å±•æ–°èŠ‚ç‚¹ï¼ˆåŠ¨æ€å¼€ç‚¹åŠ¨ç”»ï¼‰

4. **è¾¹ç•Œç¢°æ’æ¼”ç¤º**ï¼š
   - å½“æ“ä½œ`(1,6,U)`æ—¶ï¼Œé‡åˆ°y=4çš„è¾¹ç•Œï¼ˆåˆ—æ ‘æŸ¥è¯¢ï¼‰
   - å»¶ä¼¸2æ ¼åå˜çº¢é—ªçƒï¼Œæ’­æ”¾"é“›"å£°
   - å³ä¾§æ˜¾ç¤ºçº¿æ®µæ ‘æŸ¥è¯¢è·¯å¾„ï¼ˆé«˜äº®è®¿é—®èŠ‚ç‚¹ï¼‰

### æ¸¸æˆåŒ–è®¾è®¡
- **å…³å¡æ¨¡å¼**ï¼šæ¯5æ“ä½œä¸ºä¸€ä¸ªå…³å¡ï¼Œé€šå…³è§£é”æ–°ç½‘æ ¼çš®è‚¤
- **è¿å‡»ç³»ç»Ÿ**ï¼šè¿ç»­æ­£ç¡®é¢„æµ‹æ“ä½œç»“æœå¾—é¢å¤–ç§¯åˆ†
- **AIæ¼”ç¤º**ï¼šè‡ªåŠ¨æ’­æ”¾æ¨¡å¼å±•ç¤ºçº¿æ®µæ ‘ä¸ç½‘æ ¼çš„å®æ—¶è”åŠ¨

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

1. **é€šç”¨æŠ€å·§è¿ç§»**ï¼š
   - åŒå‘è¾¹ç•Œç»´æŠ¤ â†’ çŸ©é˜µåŒºåŸŸè¦†ç›–é—®é¢˜ï¼ˆå¦‚P1904ï¼‰
   - åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ â†’ å¤§èŒƒå›´åŒºé—´ç»Ÿè®¡é—®é¢˜ï¼ˆå¦‚P1972ï¼‰
   - setç®¡ç†åŒºé—´ â†’ åŒºé—´åˆå¹¶/åˆ†è£‚é—®é¢˜ï¼ˆå¦‚P2894ï¼‰

2. **æ´›è°·æ¨è**ï¼š
   - **P1904** [å¤©é™…çº¿é—®é¢˜]  
     â†’ ç»ƒä¹ åæ ‡ç¦»æ•£åŒ–ä¸åŒºé—´æœ€å€¼ç»´æŠ¤
   - **P1972** [HHçš„é¡¹é“¾]  
     â†’ å¼ºåŒ–åŠ¨æ€å¼€ç‚¹æ ‘åœ¨ç»Ÿè®¡ä¸­çš„åº”ç”¨
   - **P2894** [é…’åº—Hotel]  
     â†’ æŒæ¡çº¿æ®µæ ‘åŒºé—´åˆå¹¶æŠ€å·§

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªFarkas_Wçš„è°ƒè¯•ç»éªŒ**ï¼š  
> "æˆ‘åœ¨å¤„ç†æ“ä½œæ—¶åºæ—¶ï¼Œæœ€åˆæœªè€ƒè™‘ç›¸åŒåæ ‡é‡å¤æ“ä½œï¼Œå¯¼è‡´WAã€‚åæ¥å¢åŠ `(x,y)`é‡å¤æ£€æµ‹æ‰é€šè¿‡ã€‚"
>
> **Kayç‚¹è¯„**ï¼š  
> è¾¹ç•Œæƒ…å†µï¼ˆå¦‚é‡å¤æ“ä½œã€é›¶ç»“æœï¼‰å¸¸æ˜¯BUGæ¸©åºŠã€‚å»ºè®®ï¼š
> 1. åœ¨æ•°æ®ç»“æ„å¤–å•ç‹¬è®°å½•æ“ä½œç‚¹ï¼ˆå¦‚`set<pair<int,int>>`ï¼‰
> 2. åˆå§‹åŒ–ä¸º`lazy=0`æ—¶ï¼Œè€ƒè™‘0æ˜¯å¦ä¼šå½±å“è¾¹ç•Œï¼ˆæœ¬é¢˜ä¸­0æ˜¯æœ‰æ•ˆä¸‹ç•Œï¼‰

---

æŒæ¡åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘å’ŒåŒºé—´ç®¡ç†æŠ€å·§ï¼Œä½ å°±èƒ½åƒåƒå·§å…‹åŠ›ä¸€æ ·è½»æ¾è§£å†³æ­¤ç±»é—®é¢˜ï¼ä¸‹æ¬¡è§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š372.69ç§’
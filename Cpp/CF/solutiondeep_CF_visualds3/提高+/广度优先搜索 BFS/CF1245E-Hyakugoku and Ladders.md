# é¢˜ç›®ä¿¡æ¯

# Hyakugoku and Ladders

## é¢˜ç›®æè¿°

Hyakugoku has just retired from being the resident deity of the South Black Snail Temple in order to pursue her dream of becoming a cartoonist. She spent six months in that temple just playing "Cat's Cradle" so now she wants to try a different game â€” "Snakes and Ladders". Unfortunately, she already killed all the snakes, so there are only ladders left now.

The game is played on a $ 10 \times 10 $ board as follows:

- At the beginning of the game, the player is at the bottom left square.
- The objective of the game is for the player to reach the Goal (the top left square) by following the path and climbing vertical ladders. Once the player reaches the Goal, the game ends.
- The path is as follows: if a square is not the end of its row, it leads to the square next to it along the direction of its row; if a square is the end of its row, it leads to the square above it. The direction of a row is determined as follows: the direction of the bottom row is to the right; the direction of any other row is opposite the direction of the row below it. See Notes section for visualization of path.
- During each turn, the player rolls a standard six-sided dice. Suppose that the number shown on the dice is $ r $ . If the Goal is less than $ r $ squares away on the path, the player doesn't move (but the turn is performed). Otherwise, the player advances exactly $ r $ squares along the path and then stops. If the player stops on a square with the bottom of a ladder, the player chooses whether or not to climb up that ladder. If she chooses not to climb, then she stays in that square for the beginning of the next turn.
- Some squares have a ladder in them. Ladders are only placed vertically â€” each one leads to the same square of some of the upper rows. In order for the player to climb up a ladder, after rolling the dice, she must stop at the square containing the bottom of the ladder. After using the ladder, the player will end up in the square containing the top of the ladder. She cannot leave the ladder in the middle of climbing. And if the square containing the top of the ladder also contains the bottom of another ladder, she is not allowed to use that second ladder.
- The numbers on the faces of the dice are 1, 2, 3, 4, 5, and 6, with each number having the same probability of being shown.

Please note that:

- it is possible for ladders to overlap, but the player cannot switch to the other ladder while in the middle of climbing the first one;
- it is possible for ladders to go straight to the top row, but not any higher;
- it is possible for two ladders to lead to the same tile;
- it is possible for a ladder to lead to a tile that also has a ladder, but the player will not be able to use that second ladder if she uses the first one;
- the player can only climb up ladders, not climb down.

Hyakugoku wants to finish the game as soon as possible. Thus, on each turn she chooses whether to climb the ladder or not optimally. Help her to determine the minimum expected number of turns the game will take.

## è¯´æ˜/æç¤º

A visualization of the path and the board from example 2 is as follows: ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1245E/43b532b250e8898c1ca20662157f9e4153d49da7.png)

The tile with an 'S' is the starting tile and the tile with an 'E' is the Goal.

For the first example, there are no ladders.

For the second example, the board looks like the one in the right part of the image (the ladders have been colored for clarity).

It is possible for ladders to overlap, as is the case with the red and yellow ladders and green and blue ladders. It is also possible for ladders to go straight to the top, as is the case with the black and blue ladders. However, it is not possible for ladders to go any higher (outside of the board). It is also possible that two ladders lead to the same tile, as is the case with the red and yellow ladders. Also, notice that the red and yellow ladders lead to the tile with the orange ladder. So if the player chooses to climb either of the red and yellow ladders, they will not be able to climb the orange ladder. Finally, notice that the green ladder passes through the starting tile of the blue ladder. The player cannot transfer from the green ladder to the blue ladder while in the middle of climbing the green ladder.

## æ ·ä¾‹ #1

### è¾“å…¥

```
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
```

### è¾“å‡º

```
33.0476190476
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 3 0 0 0 4 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 0 0 0
0 0 3 0 0 0 0 0 0 0
0 0 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 9
```

### è¾“å‡º

```
20.2591405923
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 6 6 6 6 6 6 0 0 0
1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
```

### è¾“å‡º

```
15.9047592939
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šHyakugoku and Ladders æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœŸæœ›åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“è›‡æ¢¯æ£‹é—®é¢˜çš„å…³é”®ï¼Œæ˜¯ç”¨**æœŸæœ›DP**è®¡ç®—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€å°æœŸæœ›æ­¥æ•°ã€‚æœŸæœ›DPå°±åƒâ€œé¢„æµ‹æ¸¸æˆçš„å¹³å‡æ­¥æ•°â€â€”â€”æˆ‘ä»¬ç”¨çŠ¶æ€è¡¨ç¤ºå½“å‰ä½ç½®ï¼Œç”¨è½¬ç§»æ–¹ç¨‹è®¡ç®—â€œæ·ä¸€æ¬¡éª°å­åï¼Œæ‰€æœ‰å¯èƒ½ç»“æœçš„å¹³å‡æ­¥æ•°+å½“å‰è¿™ä¸€æ­¥çš„ä»£ä»·â€ã€‚  

### é¢˜ç›®æ ¸å¿ƒé€»è¾‘
- **æ£‹ç›˜è·¯å¾„**ï¼š10Ã—10æ£‹ç›˜æ˜¯**è›‡å½¢æ’åˆ—**ï¼ˆæœ€åº•è¡Œä»å·¦åˆ°å³ï¼Œä¸Šä¸€è¡Œä»å³åˆ°å·¦ï¼Œä¾æ­¤ç±»æ¨ï¼‰ï¼Œéœ€å…ˆå°†äºŒç»´åæ ‡è½¬æˆä¸€ç»´ç¼–å·ï¼ˆèµ·ç‚¹=1ï¼Œç»ˆç‚¹=100ï¼‰ã€‚  
- **æ¢¯å­é€‰æ‹©**ï¼šåˆ°è¾¾æœ‰æ¢¯å­çš„æ ¼å­æ—¶ï¼Œå¯é€‰æ‹©â€œçˆ¬æ¢¯å­â€æˆ–â€œä¸çˆ¬â€ï¼Œå–**æœŸæœ›æ›´å°çš„é€‰é¡¹**ï¼ˆè´ªå¿ƒç­–ç•¥ï¼‰ã€‚  
- **æœŸæœ›è®¡ç®—**ï¼šè®¾`f[i]`ä¸ºä»æ ¼å­`i`åˆ°ç»ˆç‚¹çš„æœŸæœ›æ­¥æ•°ï¼Œç»ˆç‚¹`f[100]=0`ã€‚å¯¹äºå…¶ä»–æ ¼å­ï¼Œ`f[i] = 1 + (sum(æ‰€æœ‰éª°å­ç»“æœçš„æœ€ä¼˜æœŸæœ›))/6`ï¼ˆ1æ˜¯å½“å‰æ·éª°å­çš„æ­¥æ•°ï¼Œé™¤ä»¥6æ˜¯å¹³å‡æ¦‚ç‡ï¼‰ã€‚  

### æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ
1. **æ£‹ç›˜è½¬ä¸€ç»´**ï¼šéœ€æ­£ç¡®æ˜ å°„äºŒç»´åæ ‡åˆ°ä¸€ç»´ç¼–å·ï¼ˆå¦‚æœ€åº•è¡Œç¬¬1åˆ—æ˜¯1ï¼Œæœ€é¡¶è¡Œç¬¬1åˆ—æ˜¯100ï¼‰ã€‚  
2. **ç‰¹æ®Šæƒ…å†µå¤„ç†**ï¼šè·ç¦»ç»ˆç‚¹â‰¤6æ­¥çš„æ ¼å­ï¼ˆå¦‚94~99ï¼‰ï¼Œæ·éª°å­å¯èƒ½è¶…è¿‡ç»ˆç‚¹ï¼Œéœ€å•ç‹¬æ¨å¯¼è½¬ç§»æ–¹ç¨‹ï¼ˆå¦‚`f[99]=6`ï¼‰ã€‚  
3. **æ¢¯å­çš„æœ€ä¼˜é€‰æ‹©**ï¼šå¯¹æ¯ä¸ªåˆ°è¾¾çš„æ ¼å­`j`ï¼Œå–`min(f[j], f[æ¢¯å­ç»ˆç‚¹])`ï¼ˆé€‰æœŸæœ›æ›´å°çš„è·¯å¾„ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯
æˆ‘ä»¬å°†ç”¨**8ä½åƒç´ é£**åŠ¨ç”»å±•ç¤ºï¼š  
- **æ£‹ç›˜ä¸ç¼–å·**ï¼š10Ã—10åƒç´ ç½‘æ ¼ï¼Œæ¯ä¸ªæ ¼å­æ˜¾ç¤ºä¸€ç»´ç¼–å·ï¼ˆèµ·ç‚¹çº¢ã€ç»ˆç‚¹ç»¿ï¼‰ã€‚  
- **DPè¿‡ç¨‹**ï¼šä»ç»ˆç‚¹ï¼ˆ100ï¼‰é€†åºè®¡ç®—`f[i]`ï¼Œæ¯ä¸ªæ ¼å­çš„`f`å€¼ç”¨æ•°å­—åŠ¨æ€æ›´æ–°ï¼ˆå¦‚`f[99]`ä»0å˜æˆ6ï¼‰ã€‚  
- **å…³é”®æ“ä½œé«˜äº®**ï¼šæ·éª°å­çš„6ç§å¯èƒ½ç”¨å°éª°å­å›¾æ ‡é—ªçƒï¼Œæ¢¯å­é€‰æ‹©ç”¨ç®­å¤´æŒ‡å‘æ›´ä¼˜çš„æ ¼å­ï¼Œç‰¹æ®Šæƒ…å†µï¼ˆ94~99ï¼‰ç”¨é»„è‰²é«˜äº®ã€‚  
- **éŸ³æ•ˆ**ï¼šè®¡ç®—æ¯ä¸ª`i`æ—¶æ’­â€œå®â€å£°ï¼Œå¤„ç†ç‰¹æ®Šæƒ…å†µæ’­â€œå˜Ÿâ€å£°ï¼Œå®Œæˆæ—¶æ’­èƒœåˆ©éŸ³æ•ˆã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šyuzhechuanï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£çš„**æ€è·¯éå¸¸æ¸…æ™°**â€”â€”ç”¨ä¸€ç»´DPç›´æ¥å¯¹åº”æ£‹ç›˜çš„ä¸€ç»´ç¼–å·ï¼Œé¿å…äº†äºŒç»´åæ ‡çš„å¤æ‚å¤„ç†ã€‚é¢„å¤„ç†`id`æ•°ç»„å°†äºŒç»´è½¬ä¸€ç»´ã€`nxt`æ•°ç»„è®°å½•æ¢¯å­ç»ˆç‚¹ï¼Œé€»è¾‘ä¸¥è°¨ã€‚ä»£ç ä¸­**é€†åºè®¡ç®—`f[i]`**ï¼ˆä»ç»ˆç‚¹å¾€èµ·ç‚¹æ¨ï¼‰ç¬¦åˆæœŸæœ›DPçš„å¸¸è§„æ€è·¯ï¼Œç‰¹æ®Šæƒ…å†µï¼ˆ94~99ï¼‰ç›´æ¥æ‰‹ç®—ç»“æœï¼Œç®€åŒ–äº†ä»£ç ã€‚å˜é‡å‘½åï¼ˆå¦‚`f[i]`ã€`nxt[i]`ï¼‰å«ä¹‰æ˜ç¡®ï¼Œä»£ç å¯è¯»æ€§é«˜ï¼Œæ˜¯éå¸¸æ ‡å‡†çš„æœŸæœ›DPå®ç°ã€‚


### é¢˜è§£äºŒï¼ˆæ¥æºï¼šæ¢§æ¡ç¯ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£ç”¨**è®°å¿†åŒ–æœç´¢**å®ç°æœŸæœ›DPï¼Œæ›´ç¬¦åˆâ€œé€’å½’æ€è€ƒâ€çš„ä¹ æƒ¯ã€‚é¢„å¤„ç†`nx`æ•°ç»„è®°å½•æ¯ä¸ªä½ç½®çš„ä¸‹ä¸€ä¸ªè·¯å¾„ç‚¹ï¼Œè§£å†³äº†æ£‹ç›˜è›‡å½¢è·¯å¾„çš„é—®é¢˜ã€‚é€’å½’å‡½æ•°`dfs(x,y)`è®¡ç®—ä»`(x,y)`åˆ°ç»ˆç‚¹çš„æœŸæœ›ï¼Œå¤„ç†äº†â€œæå‰åˆ°è¾¾ç»ˆç‚¹â€çš„ç‰¹æ®Šæƒ…å†µï¼ˆç”¨`k`è®°å½•æ— æ•ˆçš„éª°å­ç»“æœï¼‰ã€‚ä»£ç ä¸­ç”¨`min`é€‰æ‹©æ¢¯å­çš„æœ€ä¼˜ç­–ç•¥ï¼Œé€»è¾‘æ­£ç¡®ï¼Œæ˜¯å¦ä¸€ç§æœ‰æ•ˆçš„å®ç°æ–¹å¼ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. éš¾ç‚¹1ï¼šæ£‹ç›˜è·¯å¾„çš„æ­£ç¡®è½¬æ¢
- **é—®é¢˜**ï¼šè›‡å½¢è·¯å¾„çš„äºŒç»´åæ ‡è½¬ä¸€ç»´ç¼–å·å®¹æ˜“å‡ºé”™ï¼ˆå¦‚è¡Œæ–¹å‘äº¤æ›¿ï¼‰ã€‚  
- **è§£å†³**ï¼š  
  å‚è€ƒé¢˜è§£ä¸€çš„`id`æ•°ç»„é¢„å¤„ç†ï¼š  
  - è¡Œå·`i`ä»10ï¼ˆæœ€åº•è¡Œï¼‰åˆ°1ï¼ˆæœ€é¡¶è¡Œï¼‰ï¼›  
  - å¥‡æ•°è¡Œï¼ˆå¦‚`i=9`ï¼‰åˆ—å·ä»10åˆ°1ï¼ˆä»å³åˆ°å·¦ï¼‰ï¼Œå¶æ•°è¡Œï¼ˆå¦‚`i=10`ï¼‰åˆ—å·ä»1åˆ°10ï¼ˆä»å·¦åˆ°å³ï¼‰ã€‚  
  è¿™æ ·`id[i][j]`å°±æ˜¯äºŒç»´`(i,j)`å¯¹åº”çš„ä¸€ç»´ç¼–å·ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ£‹ç›˜è·¯å¾„æ˜¯åŸºç¡€ï¼Œå¿…é¡»å…ˆç”»ä¸ªå°ä¾‹å­éªŒè¯è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼


### 2. éš¾ç‚¹2ï¼šæœŸæœ›DPçš„çŠ¶æ€è®¾è®¡ä¸è½¬ç§»
- **é—®é¢˜**ï¼šå¦‚ä½•å®šä¹‰çŠ¶æ€ï¼Ÿè½¬ç§»æ–¹ç¨‹æ€ä¹ˆå†™ï¼Ÿ  
- **è§£å†³**ï¼š  
  çŠ¶æ€`f[i]`è¡¨ç¤ºä»`i`åˆ°ç»ˆç‚¹çš„æœŸæœ›æ­¥æ•°ï¼ˆé€†åºè®¡ç®—ï¼Œå› ä¸ºç»ˆç‚¹çš„`f`å€¼å·²çŸ¥ä¸º0ï¼‰ã€‚  
  è½¬ç§»æ–¹ç¨‹åˆ†ä¸¤ç§æƒ…å†µï¼š  
  - æ™®é€šæ ¼å­ï¼ˆ`iâ‰¤93`ï¼‰ï¼š`f[i] = 1 + (sum_{j=1}^6 min(f[i+j], f[nxt[i+j]]))/6`ï¼ˆ1æ˜¯å½“å‰æ­¥æ•°ï¼Œsumæ˜¯6ç§éª°å­ç»“æœçš„æœ€ä¼˜æœŸæœ›ï¼Œé™¤ä»¥6æ˜¯å¹³å‡ï¼‰ï¼›  
  - ç‰¹æ®Šæ ¼å­ï¼ˆ`94â‰¤iâ‰¤99`ï¼‰ï¼šå•ç‹¬æ¨å¯¼ï¼ˆå¦‚`f[99] = 6`ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœŸæœ›DPé€šå¸¸â€œä»ç»“æœå¾€èµ·ç‚¹æ¨â€ï¼Œå› ä¸ºç»“æœçš„çŠ¶æ€å€¼æ˜¯ç¡®å®šçš„ï¼


### 3. éš¾ç‚¹3ï¼šæ¢¯å­çš„æœ€ä¼˜é€‰æ‹©
- **é—®é¢˜**ï¼šåˆ°è¾¾æœ‰æ¢¯å­çš„æ ¼å­æ—¶ï¼Œè¦ä¸è¦çˆ¬ï¼Ÿ  
- **è§£å†³**ï¼šçˆ¬æ¢¯å­åçš„æœŸæœ›æ˜¯`f[æ¢¯å­ç»ˆç‚¹]`ï¼Œä¸çˆ¬æ˜¯`f[å½“å‰æ ¼å­]`ï¼Œå–**è¾ƒå°å€¼**ï¼ˆå› ä¸ºè¦æœ€å°åŒ–æœŸæœ›ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒé€‰æ‹©â€œæœŸæœ›æ›´å°çš„è·¯å¾„â€ï¼Œæ˜¯æœ¬é¢˜çš„å…³é”®ä¼˜åŒ–ï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
1. **é—®é¢˜æŠ½è±¡**ï¼šå°†è›‡å½¢æ£‹ç›˜è½¬æˆä¸€ç»´ç¼–å·ï¼Œç®€åŒ–çŠ¶æ€è¡¨ç¤ºã€‚  
2. **é€†åºè®¡ç®—**ï¼šæœŸæœ›DPä»ç»ˆç‚¹å¾€èµ·ç‚¹æ¨ï¼Œé¿å…é€’å½’çš„å¤æ‚è¾¹ç•Œã€‚  
3. **ç‰¹æ®Šæƒ…å†µä¼˜å…ˆ**ï¼šå…ˆå¤„ç†è·ç¦»ç»ˆç‚¹â‰¤6æ­¥çš„æ ¼å­ï¼Œå†å¤„ç†å…¶ä»–æ ¼å­ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆé¢˜è§£ä¸€çš„æ€è·¯ï¼Œé‡‡ç”¨ä¸€ç»´DPï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <cstdio>
#include <algorithm>
using namespace std;

const int MAXN = 105;
int id[15][15], nxt[MAXN]; // id[i][j]äºŒç»´è½¬ä¸€ç»´ï¼Œnxt[i]æ¢¯å­ç»ˆç‚¹
double f[MAXN]; // f[i]ä»iåˆ°ç»ˆç‚¹çš„æœŸæœ›æ­¥æ•°

int main() {
    // 1. é¢„å¤„ç†äºŒç»´è½¬ä¸€ç»´ç¼–å·ï¼ˆiä»10åˆ°1ï¼Œè¡Œæ–¹å‘äº¤æ›¿ï¼‰
    int cnt = 0;
    for (int i = 10; i >= 1; --i) {
        if (i % 2 == 0) { // å¶æ•°è¡Œï¼ˆå¦‚ç¬¬10è¡Œï¼‰ï¼šå·¦åˆ°å³
            for (int j = 1; j <= 10; ++j) id[i][j] = ++cnt;
        } else { // å¥‡æ•°è¡Œï¼ˆå¦‚ç¬¬9è¡Œï¼‰ï¼šå³åˆ°å·¦
            for (int j = 10; j >= 1; --j) id[i][j] = ++cnt;
        }
    }

    // 2. é¢„å¤„ç†æ¢¯å­ç»ˆç‚¹nxtæ•°ç»„
    for (int i = 1; i <= 10; ++i) {
        for (int j = 1; j <= 10; ++j) {
            int x; cin >> x;
            nxt[id[i][j]] = id[i - x][j]; // æ¢¯å­ä»(i,j)åˆ°(i-x,j)
        }
    }

    // 3. è®¡ç®—æœŸæœ›DP
    f[100] = 0; // ç»ˆç‚¹æœŸæœ›ä¸º0
    for (int i = 99; i >= 94; --i) f[i] = 6; // ç‰¹æ®Šæƒ…å†µæ‰‹ç®—
    for (int i = 93; i >= 1; --i) {
        double sum = 0;
        for (int j = 1; j <= 6; ++j) {
            int pos = i + j;
            if (pos > 100) pos = i; // è¶…è¿‡ç»ˆç‚¹ï¼Œç•™åœ¨åŸåœ°ï¼ˆå…¶å®é¢˜è§£ä¸€æ²¡å†™ï¼Ÿä¸ï¼Œé¢˜è§£ä¸€ä¸­iâ‰¤93æ—¶i+jâ‰¤99â‰¤100ï¼Œæ‰€ä»¥ä¸éœ€è¦ï¼Ÿç­‰ä¸€ä¸‹ï¼Œi=93æ—¶j=6æ˜¯99ï¼Œi=92æ—¶j=6æ˜¯98ï¼Œéƒ½ä¸ä¼šè¶…è¿‡100ã€‚å“¦å¯¹ï¼Œå› ä¸ºç‰¹æ®Šæƒ…å†µæ˜¯94~99ï¼Œæ‰€ä»¥iâ‰¤93æ—¶i+jâ‰¤99ï¼Œä¸ä¼šè¶…è¿‡ç»ˆç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤„ç†ï¼ï¼‰
            sum += min(f[pos], f[nxt[pos]]); // é€‰çˆ¬æˆ–ä¸çˆ¬çš„æœ€ä¼˜
        }
        f[i] = sum / 6.0 + 1; // åŠ å½“å‰æ­¥æ•°1
    }

    printf("%.10lf\n", f[1]); // èµ·ç‚¹æ˜¯id[10][1] = 1
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸‰æ­¥ï¼šâ‘  å°†äºŒç»´æ£‹ç›˜è½¬æˆä¸€ç»´ç¼–å·ï¼›â‘¡ è¯»å–æ¢¯å­ä¿¡æ¯ï¼Œè®°å½•æ¯ä¸ªæ ¼å­çš„æ¢¯å­ç»ˆç‚¹ï¼›â‘¢ é€†åºè®¡ç®—æœŸæœ›DPï¼ˆå…ˆå¤„ç†ç‰¹æ®Šæƒ…å†µï¼Œå†å¤„ç†æ™®é€šæƒ…å†µï¼‰ã€‚æœ€åè¾“å‡ºèµ·ç‚¹`f[1]`çš„ç»“æœã€‚


### é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µèµæ
* **äº®ç‚¹**ï¼šä¸€ç»´DPç®€æ´é«˜æ•ˆï¼Œé¢„å¤„ç†`id`æ•°ç»„è§£å†³äº†æ£‹ç›˜è·¯å¾„é—®é¢˜ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
// é¢„å¤„ç†äºŒç»´è½¬ä¸€ç»´ç¼–å·
for (int i = 10; i >= 1; --i)
    if (i&1)
        for (int j=10;j>=1;j--) id[i][j]=++cnt;
    else
        for (int j=1;j<=10;j++) id[i][j]=++cnt;
```
* **ä»£ç è§£è¯»**ï¼š  
  è¡Œå·`i`ä»10ï¼ˆæœ€åº•è¡Œï¼‰åˆ°1ï¼ˆæœ€é¡¶è¡Œï¼‰ï¼š  
  - è‹¥`i`æ˜¯å¥‡æ•°ï¼ˆå¦‚ç¬¬9è¡Œï¼‰ï¼Œåˆ—å·`j`ä»10åˆ°1ï¼ˆå³åˆ°å·¦ï¼‰ï¼›  
  - è‹¥`i`æ˜¯å¶æ•°ï¼ˆå¦‚ç¬¬10è¡Œï¼‰ï¼Œåˆ—å·`j`ä»1åˆ°10ï¼ˆå·¦åˆ°å³ï¼‰ã€‚  
  è¿™æ ·`id[i][j]`å°±æ˜¯äºŒç»´`(i,j)`å¯¹åº”çš„ä¸€ç»´ç¼–å·ï¼ˆèµ·ç‚¹`id[10][1]=1`ï¼Œç»ˆç‚¹`id[1][1]=100`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨å¾ªç¯é¢„å¤„ç†æ£‹ç›˜ç¼–å·ï¼Œé¿å…æ‰‹åŠ¨è®¡ç®—é”™è¯¯ï¼


### é¢˜è§£äºŒæ ¸å¿ƒç‰‡æ®µèµæ
* **äº®ç‚¹**ï¼šè®°å¿†åŒ–æœç´¢æ›´ç¬¦åˆé€’å½’æ€è€ƒï¼Œé¢„å¤„ç†`nx`æ•°ç»„è®°å½•è·¯å¾„çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
// é¢„å¤„ç†nxæ•°ç»„ï¼ˆæ¯ä¸ªä½ç½®çš„ä¸‹ä¸€ä¸ªè·¯å¾„ç‚¹ï¼‰
for (i = 1; i <= n; ++i) {
    for (j = 1; j <= n; ++j) {
        if (i & 1) { // å¥‡æ•°è¡Œï¼šå·¦åˆ°å³ï¼Ÿä¸ï¼Œé¢˜è§£äºŒçš„iæ˜¯è¡Œå·ä»1åˆ°10ï¼Œx=1æ˜¯æœ€é¡¶è¡Œï¼Œx=10æ˜¯æœ€åº•è¡Œã€‚å¥‡æ•°è¡Œï¼ˆå¦‚x=1ï¼‰æ–¹å‘æ˜¯å·¦ï¼Ÿ
            if (j == 1) nx[i][j] = MP(i-1, j); // è¡Œé¦–ï¼Œèµ°åˆ°ä¸Šä¸€è¡Œ
            else nx[i][j] = MP(i, j-1); // å·¦èµ°
        } else { // å¶æ•°è¡Œï¼ˆå¦‚x=10ï¼‰æ–¹å‘æ˜¯å³
            if (j == 10) nx[i][j] = MP(i-1, j); // è¡Œæœ«ï¼Œèµ°åˆ°ä¸Šä¸€è¡Œ
            else nx[i][j] = MP(i, j+1); // å³èµ°
        }
    }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  `nx[i][j]`è¡¨ç¤ºä»`(i,j)`æ²¿è·¯å¾„èµ°ä¸€æ­¥åˆ°è¾¾çš„ä½ç½®ï¼š  
  - å¥‡æ•°è¡Œï¼ˆå¦‚æœ€é¡¶è¡Œx=1ï¼‰ï¼šæ–¹å‘å·¦ï¼Œè¡Œé¦–`j=1`èµ°åˆ°ä¸Šä¸€è¡Œï¼ˆä½†x=1æ²¡æœ‰ä¸Šä¸€è¡Œï¼Œæ‰€ä»¥å®é™…æ˜¯ç»ˆç‚¹ï¼‰ï¼›  
  - å¶æ•°è¡Œï¼ˆå¦‚æœ€åº•è¡Œx=10ï¼‰ï¼šæ–¹å‘å³ï¼Œè¡Œæœ«`j=10`èµ°åˆ°ä¸Šä¸€è¡Œï¼ˆx=9ï¼‰ã€‚  
  è¿™æ ·ï¼Œæ·éª°å­`r`æ­¥å°±æ˜¯è¿ç»­èµ°`r`æ¬¡`nx`ï¼Œå¾—åˆ°æœ€ç»ˆä½ç½®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨`nx`æ•°ç»„è®°å½•è·¯å¾„çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œé¿å…é‡å¤è®¡ç®—è·¯å¾„ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜
**åƒç´ è›‡æ¢¯æ£‹ï¼šæœŸæœ›DPå¤§å†’é™©**ï¼ˆä»¿FCçº¢ç™½æœºé£æ ¼ï¼‰

### è®¾è®¡æ€è·¯
ç”¨8ä½åƒç´ é£è¿˜åŸ10Ã—10æ£‹ç›˜ï¼Œé€šè¿‡åŠ¨æ€æ•ˆæœå±•ç¤ºæœŸæœ›DPçš„è®¡ç®—è¿‡ç¨‹ï¼Œç»“åˆæ¸¸æˆåŒ–å…ƒç´ ï¼ˆå¦‚â€œéª°å­æ»šåŠ¨â€â€œæ¢¯å­é—ªçƒâ€ï¼‰å¢å¼ºè¶£å‘³æ€§ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹
1. **åˆå§‹åŒ–åœºæ™¯**ï¼š  
   - å±å¹•æ˜¾ç¤º10Ã—10åƒç´ ç½‘æ ¼ï¼Œæ¯ä¸ªæ ¼å­æ˜¾ç¤ºä¸€ç»´ç¼–å·ï¼ˆèµ·ç‚¹1çº¢ã€ç»ˆç‚¹100ç»¿ï¼‰ã€‚  
   - æ§åˆ¶é¢æ¿ï¼š`å¼€å§‹/æš‚åœ`ã€`å•æ­¥`ã€`é‡ç½®`æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1~5æ¡£ï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»å¿«BGMï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„å°å…³å¡éŸ³ä¹ï¼‰ã€‚

2. **DPè®¡ç®—æ¼”ç¤º**ï¼š  
   - **é€†åºè®¡ç®—**ï¼šä»ç»ˆç‚¹100å¼€å§‹ï¼Œä¾æ¬¡é«˜äº®`i=99,98,...,1`ï¼Œæ¯ä¸ªæ ¼å­çš„`f`å€¼ç”¨æ•°å­—åŠ¨æ€æ›´æ–°ï¼ˆå¦‚`f[99]`ä»0å˜æˆ6ï¼‰ã€‚  
   - **éª°å­æ»šåŠ¨**ï¼šè®¡ç®—`f[i]`æ—¶ï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤º6ä¸ªå°éª°å­å›¾æ ‡ï¼Œä¾æ¬¡é—ªçƒè¡¨ç¤º6ç§å¯èƒ½çš„ç»“æœã€‚  
   - **æ¢¯å­é€‰æ‹©**ï¼šè‹¥`i+j`æœ‰æ¢¯å­ï¼Œç”¨é»„è‰²ç®­å¤´æŒ‡å‘`nxt[i+j]`ï¼Œå¹¶æ˜¾ç¤º`min(f[i+j], f[nxt[i+j]])`çš„ç»“æœã€‚  
   - **ç‰¹æ®Šæƒ…å†µ**ï¼š`i=94~99`ç”¨é»„è‰²é«˜äº®ï¼Œå¼¹å‡ºæ–‡å­—æç¤ºâ€œç‰¹æ®Šæƒ…å†µï¼Œæ‰‹ç®—å¾—f[i]=6â€ã€‚

3. **äº¤äº’ä¸éŸ³æ•ˆ**ï¼š  
   - **å•æ­¥æ¨¡å¼**ï¼šç‚¹å‡»`å•æ­¥`æŒ‰é’®ï¼Œè®¡ç®—ä¸‹ä¸€ä¸ª`i`ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  
   - **è‡ªåŠ¨æ¨¡å¼**ï¼šç‚¹å‡»`å¼€å§‹`ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ’­æ”¾ï¼Œé€Ÿåº¦éšæ»‘å—è°ƒæ•´ã€‚  
   - **èƒœåˆ©çŠ¶æ€**ï¼šè®¡ç®—å®Œ`f[1]`åï¼Œå±å¹•æ˜¾ç¤ºâ€œè®¡ç®—å®Œæˆï¼â€ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
æœŸæœ›DPä¸ä»…èƒ½è§£å†³è›‡æ¢¯æ£‹é—®é¢˜ï¼Œè¿˜èƒ½å¤„ç†**éšæœºå†³ç­–çš„æœŸæœ›è®¡ç®—**ï¼Œæ¯”å¦‚ï¼š  
- æ”¶é›†ç‰©å“çš„æœŸæœ›æ¬¡æ•°ï¼ˆå¦‚â€œæ”¶é›†æ‰€æœ‰é‚®ç¥¨éœ€è¦å¤šå°‘æ¬¡â€ï¼‰ï¼›  
- æ¸¸æˆä¸­çš„æœŸæœ›å¾—åˆ†ï¼ˆå¦‚â€œæ·éª°å­çš„æœŸæœ›å¾—åˆ†â€ï¼‰ï¼›  
- åŠ¨æ€è§„åˆ’ä¸­çš„æ¦‚ç‡è½¬ç§»ï¼ˆå¦‚â€œæ¢æ•™å®¤çš„æœŸæœ›æ—¶é—´â€ï¼‰ã€‚


### æ´›è°·ç»ƒä¹ æ¨è
1. **æ´›è°· P1850 æ¢æ•™å®¤**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯æœŸæœ›DPçš„ç»å…¸é¢˜ï¼Œéœ€è¦å¤„ç†â€œæ¢æ•™å®¤â€çš„æ¦‚ç‡è½¬ç§»ï¼Œèƒ½å·©å›ºæœŸæœ›DPçš„çŠ¶æ€è®¾è®¡å’Œè½¬ç§»æ–¹ç¨‹ã€‚

2. **æ´›è°· P3802 å°é­”å¥³å¸•çª**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜è€ƒå¯Ÿæ¦‚ç‡æœŸæœ›çš„è®¡ç®—ï¼Œéœ€è¦ç”¨æ•°å­¦æ¨å¯¼ç»“åˆDPï¼Œèƒ½é”»ç‚¼â€œå°†æ¦‚ç‡è½¬åŒ–ä¸ºçŠ¶æ€â€çš„èƒ½åŠ›ã€‚

3. **æ´›è°· P4550 æ”¶é›†é‚®ç¥¨**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯æœŸæœ›DPçš„è¿›é˜¶é¢˜ï¼Œéœ€è¦å¤„ç†â€œæ”¶é›†kç§é‚®ç¥¨çš„æœŸæœ›æ¬¡æ•°â€ï¼Œèƒ½æ·±åŒ–å¯¹æœŸæœ›DPçš„ç†è§£ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)
æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®çš„ä½œè€…ä¸ªäººå¿ƒå¾—åˆ†äº«éƒ¨åˆ†ï¼Œä½†ä»ä»£ç ä¸­èƒ½çœ‹å‡ºï¼š  
- é¢˜è§£ä¸€çš„ä½œè€…æ³¨é‡**é¢„å¤„ç†**ï¼ˆ`id`å’Œ`nxt`æ•°ç»„ï¼‰ï¼Œç®€åŒ–äº†åç»­çš„DPè®¡ç®—ï¼›  
- é¢˜è§£äºŒçš„ä½œè€…é‡‡ç”¨**è®°å¿†åŒ–æœç´¢**ï¼Œæ›´ç¬¦åˆé€’å½’æ€è€ƒçš„ä¹ æƒ¯ï¼Œé€‚åˆæ–°æ‰‹ç†è§£ã€‚


## æ€»ç»“
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**æœŸæœ›DP**ï¼Œå…³é”®åœ¨äºæ­£ç¡®è½¬æ¢æ£‹ç›˜è·¯å¾„ã€è®¾è®¡çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œä»¥åŠå¤„ç†æ¢¯å­çš„æœ€ä¼˜é€‰æ‹©ã€‚é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œå¸Œæœ›å¤§å®¶èƒ½æŒæ¡æœŸæœ›DPçš„åŸºæœ¬æ€è·¯ï¼š**ä»ç»“æœé€†æ¨ã€çŠ¶æ€è¡¨ç¤ºå½“å‰ä½ç½®ã€è½¬ç§»è®¡ç®—å¹³å‡æœŸæœ›**ã€‚  

ç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äºå¤šç»ƒå¤šæ€è€ƒï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç®—æ³•æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š102.58ç§’
# é¢˜ç›®ä¿¡æ¯

# Interesting Array

## é¢˜ç›®æè¿°

We'll call an array of $ n $ non-negative integers $ a\[1\],a\[2\],...,a\[n\] $ interesting, if it meets $ m $ constraints. The $ i $ -th of the $ m $ constraints consists of three integers $ l_{i} $ , $ r_{i} $ , $ q_{i} $ ( $ 1<=l_{i}<=r_{i}<=n $ ) meaning that value ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF482B/c5cfeb39e6b942f975aeab6674c1941b58030e74.png) should be equal to $ q_{i} $ .

Your task is to find any interesting array of $ n $ elements or state that such array doesn't exist.

Expression $ x&y $ means the bitwise AND of numbers $ x $ and $ y $ . In programming languages C++, Java and Python this operation is represented as "&", in Pascal â€” as "and".

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 1
1 3 3
```

### è¾“å‡º

```
YES
3 3 3
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 2
1 3 3
1 3 2
```

### è¾“å‡º

```
NO
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šInteresting Array æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼ˆä¾§é‡çº¿æ®µæ ‘ä¸ä½è¿ç®—ç»“åˆï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œInteresting Arrayâ€çš„å…³é”®ï¼Œåœ¨äº**ç”¨çº¿æ®µæ ‘å¤„ç†åŒºé—´ä½è¿ç®—**ï¼Œå¹¶åˆ©ç”¨ä½è¿ç®—çš„ç‰¹æ€§æ„é€ åˆæ³•æ•°ç»„ã€‚ç®€å•æ¥è¯´ï¼Œçº¿æ®µæ ‘å°±åƒä¸€æ£µâ€œåŒºé—´ç®¡ç†æ ‘â€ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€æ®µæ•°ç»„çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚åŒºé—´æŒ‰ä½ä¸çš„ç»“æœï¼‰ï¼Œèƒ½å¿«é€Ÿå®Œæˆâ€œç»™æŸæ®µåŒºé—´çš„æ‰€æœ‰æ•°åŠ ä¸ŠæŸä¸ªäºŒè¿›åˆ¶ä½â€ï¼ˆåŒºé—´æˆ–æ“ä½œï¼‰å’Œâ€œæŸ¥è¯¢æŸæ®µåŒºé—´çš„æŒ‰ä½ä¸ç»“æœâ€è¿™ä¸¤ä¸ªæ“ä½œã€‚  

### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹
é¢˜ç›®è¦æ±‚æ„é€ æ•°ç»„ï¼Œä½¿å¾—æ¯ä¸ªåŒºé—´[l,r]çš„æŒ‰ä½ä¸ç­‰äºqã€‚æ ¹æ®ä½è¿ç®—æ€§è´¨ï¼š  
- **æ€§è´¨1**ï¼šè‹¥qçš„æŸäºŒè¿›åˆ¶ä½ä¸º1ï¼Œåˆ™åŒºé—´å†…æ‰€æœ‰æ•°çš„è¯¥ä½å¿…é¡»ä¸º1ï¼ˆå¦åˆ™æŒ‰ä½ä¸ç»“æœè¯¥ä½ä¼šæ˜¯0ï¼‰ã€‚  
- **æ€§è´¨2**ï¼šè‹¥qçš„æŸäºŒè¿›åˆ¶ä½ä¸º0ï¼Œåˆ™åŒºé—´å†…è‡³å°‘æœ‰ä¸€ä¸ªæ•°çš„è¯¥ä½ä¸º0ï¼ˆå¦åˆ™æŒ‰ä½ä¸ç»“æœè¯¥ä½ä¼šæ˜¯1ï¼‰ã€‚  

**è§£å†³æ­¥éª¤**ï¼š  
1. å…ˆç”¨**åŒºé—´æˆ–æ“ä½œ**å¤„ç†æ‰€æœ‰çº¦æŸï¼šå°†æ¯ä¸ªçº¦æŸçš„qæŒ‰ä½æˆ–åˆ°å¯¹åº”çš„åŒºé—´ï¼ˆæ»¡è¶³æ€§è´¨1ï¼Œç¡®ä¿qçš„1ä½éƒ½è¢«åŒ…å«ï¼‰ã€‚  
2. å†ç”¨**åŒºé—´ä¸æŸ¥è¯¢**éªŒè¯æ‰€æœ‰çº¦æŸï¼šæ£€æŸ¥æ¯ä¸ªåŒºé—´çš„æŒ‰ä½ä¸ç»“æœæ˜¯å¦ç­‰äºqï¼ˆéªŒè¯æ€§è´¨2ï¼Œç¡®ä¿qçš„0ä½æ²¡æœ‰è¢«å…¨éƒ¨å¡«æ»¡ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªâ€œåƒç´ åŒ–çº¿æ®µæ ‘å®éªŒå®¤â€åŠ¨ç”»ï¼Œç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºçº¿æ®µæ ‘çš„èŠ‚ç‚¹ï¼ˆæ¯”å¦‚æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå½©è‰²æ–¹å—ï¼Œé¢œè‰²ä»£è¡¨åŒºé—´ä¸çš„ç»“æœï¼‰ã€‚å½“æ‰§è¡ŒåŒºé—´æˆ–æ“ä½œæ—¶ï¼Œå¯¹åº”çš„èŠ‚ç‚¹ä¼šâ€œé—ªçƒâ€å¹¶æ›´æ–°é¢œè‰²ï¼›æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œä¼šâ€œéå†â€ç›¸å…³èŠ‚ç‚¹å¹¶æ˜¾ç¤ºç»“æœã€‚åŠ å…¥â€œå•æ­¥æ‰§è¡Œâ€å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€åŠŸèƒ½ï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°lazyæ ‡è®°çš„ä¸‹æ”¾ï¼ˆæ¯”å¦‚èŠ‚ç‚¹åˆ†è£‚æ—¶ï¼Œå­èŠ‚ç‚¹ç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„æ ‡è®°ï¼‰å’ŒåŒºé—´ä¿¡æ¯çš„æ›´æ–°ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šwanggkï¼Œèµ13ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æ˜¯çº¿æ®µæ ‘è§£æ³•çš„ç»å…¸å®ç°ï¼Œæ€è·¯æ¸…æ™°åˆ°â€œä¸€çœ¼å°±èƒ½æŠ“ä½æ ¸å¿ƒâ€ï¼ä½œè€…é¦–å…ˆæ˜ç¡®äº†çº¿æ®µæ ‘çš„èŠ‚ç‚¹çŠ¶æ€ï¼ˆå­˜å‚¨åŒºé—´æŒ‰ä½ä¸ç»“æœï¼‰ï¼Œç„¶åç”¨**åŒºé—´æˆ–æ“ä½œ**å¤„ç†æ‰€æœ‰çº¦æŸï¼ˆæ»¡è¶³æ€§è´¨1ï¼‰ï¼Œæœ€åç”¨**åŒºé—´ä¸æŸ¥è¯¢**éªŒè¯çº¦æŸï¼ˆéªŒè¯æ€§è´¨2ï¼‰ã€‚ä»£ç ç»“æ„å·¥æ•´ï¼Œå˜é‡åï¼ˆå¦‚`sm`è¡¨ç¤ºåŒºé—´å’Œï¼Œ`lazy`è¡¨ç¤ºæ‡’æ ‡è®°ï¼‰å«ä¹‰æ˜ç¡®ï¼Œç‰¹åˆ«æ˜¯`pushdown`å‡½æ•°çš„å®ç°ï¼ˆä¸‹æ”¾æ‡’æ ‡è®°ï¼‰éå¸¸è§„èŒƒã€‚ä»å®è·µè§’åº¦çœ‹ï¼Œè¿™ä»½ä»£ç å¯ä»¥ç›´æ¥ç”¨äºç«èµ›ï¼Œè¾¹ç•Œå¤„ç†ï¼ˆæ¯”å¦‚`maxn`è®¾ä¸º4e5ï¼‰ä¹Ÿå¾ˆä¸¥è°¨ã€‚  

### é¢˜è§£äºŒï¼ˆæ¥æºï¼šTKXZ133ï¼Œèµ7ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„äº®ç‚¹åœ¨äº**ä½è¿ç®—æ€§è´¨çš„æ¸…æ™°è§£é‡Š**ï¼ä½œè€…æ˜ç¡®åŒºåˆ†äº†â€œæ¡ä»¶1â€ï¼ˆqçš„1ä½å¿…é¡»å…¨éƒ¨å­˜åœ¨ï¼‰å’Œâ€œæ¡ä»¶2â€ï¼ˆqçš„0ä½å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªä¸å­˜åœ¨ï¼‰ï¼Œå¹¶æŒ‡å‡ºâ€œç”¨åŒºé—´æˆ–å¤„ç†æ¡ä»¶1ï¼Œç”¨åŒºé—´ä¸éªŒè¯æ¡ä»¶2â€çš„é€»è¾‘ã€‚ä»£ç ä¸­çš„çº¿æ®µæ ‘å®ç°ï¼ˆ`or_all`å‡½æ•°å¤„ç†åŒºé—´æˆ–ï¼Œ`and_all`å‡½æ•°å¤„ç†åŒºé—´ä¸ï¼‰éå¸¸ç›´è§‚ï¼Œ`print`å‡½æ•°ç›´æ¥è¾“å‡ºæ•°ç»„å…ƒç´ ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚  

### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šCaiXY06ï¼Œèµ4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™æ˜¯ä¸€ä»½**å·®åˆ†æ³•çš„åˆ›æ–°é¢˜è§£**ï¼ä½œè€…æ²¡æœ‰ç”¨çº¿æ®µæ ‘ï¼Œè€Œæ˜¯å¯¹æ¯ä¸ªäºŒè¿›åˆ¶ä½å•ç‹¬å¤„ç†ï¼šç”¨å·®åˆ†ç»´æŠ¤è¯¥ä½éœ€è¦è®¾ä¸º1çš„åŒºé—´ï¼ˆæ»¡è¶³æ€§è´¨1ï¼‰ï¼Œç„¶åç”¨å‰ç¼€å’ŒéªŒè¯è¯¥ä½æ˜¯å¦åœ¨çº¦æŸçš„0ä½ä¸­å­˜åœ¨ï¼ˆéªŒè¯æ€§è´¨2ï¼‰ã€‚è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n log n)ï¼Œæ¯”çº¿æ®µæ ‘æ›´é«˜æ•ˆï¼Œé€‚åˆæ•°æ®é‡å¤§çš„æƒ…å†µã€‚ä»£ç ä¸­çš„`check`å‡½æ•°ï¼ˆå¤„ç†æ¯ä¸€ä½ï¼‰é€»è¾‘æ¸…æ™°ï¼Œ`a[i] |= x`ï¼ˆå°†è¯¥ä½è®¾ä¸º1ï¼‰çš„æ“ä½œéå¸¸å·§å¦™ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•å°†ä½è¿ç®—æ€§è´¨è½¬åŒ–ä¸ºåŒºé—´æ“ä½œï¼Ÿ  
* **åˆ†æ**ï¼š  
  ä½è¿ç®—çš„â€œæŒ‰ä½ä¸â€å’Œâ€œæŒ‰ä½æˆ–â€æ˜¯é€ä½ç‹¬ç«‹çš„ã€‚å¯¹äºqçš„æŸäºŒè¿›åˆ¶ä½bï¼š  
  - è‹¥b=1ï¼Œéœ€è¦åŒºé—´å†…æ‰€æœ‰æ•°çš„bä½ä¸º1 â†’ ç”¨**åŒºé—´æˆ–æ“ä½œ**ï¼ˆå°†åŒºé—´å†…çš„æ•°ä¸(1<<b)æŒ‰ä½æˆ–ï¼‰ã€‚  
  - è‹¥b=0ï¼Œéœ€è¦åŒºé—´å†…è‡³å°‘æœ‰ä¸€ä¸ªæ•°çš„bä½ä¸º0 â†’ ç”¨**åŒºé—´ä¸æŸ¥è¯¢**ï¼ˆè‹¥åŒºé—´ä¸ç»“æœçš„bä½ä¸º1ï¼Œåˆ™è¯´æ˜æ‰€æœ‰æ•°çš„bä½ä¸º1ï¼Œè¿åçº¦æŸï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä½è¿ç®—çš„é€ä½ç‹¬ç«‹æ€§æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„å…³é”®ï¼

### 2. å¦‚ä½•é«˜æ•ˆå¤„ç†åŒºé—´ä¿®æ”¹ä¸æŸ¥è¯¢ï¼Ÿ  
* **åˆ†æ**ï¼š  
  çº¿æ®µæ ‘æ˜¯å¤„ç†åŒºé—´æ“ä½œçš„â€œç¥å™¨â€ï¼Œå®ƒèƒ½åœ¨O(log n)æ—¶é—´å†…å®ŒæˆåŒºé—´ä¿®æ”¹ï¼ˆå¦‚åŒºé—´æˆ–ï¼‰å’ŒåŒºé—´æŸ¥è¯¢ï¼ˆå¦‚åŒºé—´ä¸ï¼‰ã€‚æ‡’æ ‡è®°ï¼ˆ`lazy`ï¼‰æ˜¯çº¿æ®µæ ‘çš„æ ¸å¿ƒä¼˜åŒ–ï¼Œå®ƒèƒ½é¿å…é‡å¤ä¿®æ”¹å­èŠ‚ç‚¹ï¼Œæé«˜æ•ˆç‡ã€‚æ¯”å¦‚ï¼Œå½“éœ€è¦ä¿®æ”¹ä¸€ä¸ªå¤§åŒºé—´æ—¶ï¼Œåªä¿®æ”¹çˆ¶èŠ‚ç‚¹çš„`lazy`æ ‡è®°ï¼Œç­‰åˆ°éœ€è¦è®¿é—®å­èŠ‚ç‚¹æ—¶å†ä¸‹æ”¾ï¼ˆ`pushdown`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ‡’æ ‡è®°æ˜¯çº¿æ®µæ ‘å¤„ç†åŒºé—´æ“ä½œçš„â€œçµé­‚â€ï¼

### 3. å¦‚ä½•éªŒè¯æ„é€ çš„æ•°ç»„æ˜¯å¦åˆæ³•ï¼Ÿ  
* **åˆ†æ**ï¼š  
  æ„é€ æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬åªä¿è¯äº†â€œqçš„1ä½éƒ½å­˜åœ¨â€ï¼ˆæ€§è´¨1ï¼‰ï¼Œä½†å¯èƒ½å¿½ç•¥äº†â€œqçš„0ä½æ˜¯å¦å­˜åœ¨â€ï¼ˆæ€§è´¨2ï¼‰ã€‚å› æ­¤ï¼Œå¿…é¡»ç”¨åŒºé—´ä¸æŸ¥è¯¢éªŒè¯æ¯ä¸ªçº¦æŸï¼šè‹¥åŒºé—´ä¸ç»“æœä¸ç­‰äºqï¼Œåˆ™è¯´æ˜å­˜åœ¨æŸä¸ª0ä½è¢«å…¨éƒ¨å¡«æ»¡ï¼Œæ•°ç»„ä¸åˆæ³•ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ„é€ å®Œæˆåçš„éªŒè¯æ˜¯å¿…ä¸å¯å°‘çš„ï¼


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆåŸºäºçº¿æ®µæ ‘ï¼‰  
* **è¯´æ˜**ï¼š  
  æ­¤ä»£ç ç»¼åˆäº†wanggkå’ŒTKXZ133çš„é¢˜è§£æ€è·¯ï¼Œæ˜¯çº¿æ®µæ ‘å¤„ç†åŒºé—´ä½è¿ç®—çš„å…¸å‹å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <cstring>
  using namespace std;
  const int MAXN = 1e5 + 5;
  const int MAXM = 1e5 + 5;

  struct Node {
      int l, r;
      int sum; // åŒºé—´æŒ‰ä½ä¸ç»“æœ
      int lazy; // æ‡’æ ‡è®°ï¼ˆåŒºé—´æˆ–æ“ä½œï¼‰
  } tree[MAXN << 2];

  int n, m;
  int L[MAXM], R[MAXM], Q[MAXM]; // å­˜å‚¨çº¦æŸ

  void pushup(int p) {
      tree[p].sum = tree[p<<1].sum & tree[p<<1|1].sum;
  }

  void pushdown(int p) {
      if (tree[p].lazy) {
          // ä¸‹æ”¾æ‡’æ ‡è®°åˆ°å·¦å³å­èŠ‚ç‚¹
          tree[p<<1].sum |= tree[p].lazy;
          tree[p<<1].lazy |= tree[p].lazy;
          tree[p<<1|1].sum |= tree[p].lazy;
          tree[p<<1|1].lazy |= tree[p].lazy;
          tree[p].lazy = 0; // æ¸…ç©ºçˆ¶èŠ‚ç‚¹æ‡’æ ‡è®°
      }
  }

  void build(int p, int l, int r) {
      tree[p].l = l;
      tree[p].r = r;
      tree[p].sum = 0;
      tree[p].lazy = 0;
      if (l == r) return;
      int mid = (l + r) >> 1;
      build(p<<1, l, mid);
      build(p<<1|1, mid+1, r);
  }

  void update(int p, int l, int r, int val) {
      if (tree[p].l >= l && tree[p].r <= r) {
          tree[p].sum |= val;
          tree[p].lazy |= val;
          return;
      }
      pushdown(p); // ä¸‹æ”¾æ‡’æ ‡è®°
      int mid = (tree[p].l + tree[p].r) >> 1;
      if (l <= mid) update(p<<1, l, r, val);
      if (r > mid) update(p<<1|1, l, r, val);
      pushup(p); // æ›´æ–°çˆ¶èŠ‚ç‚¹ä¿¡æ¯
  }

  int query(int p, int l, int r) {
      if (tree[p].l >= l && tree[p].r <= r) {
          return tree[p].sum;
      }
      pushdown(p); // ä¸‹æ”¾æ‡’æ ‡è®°
      int res = (1 << 30) - 1; // åˆå§‹åŒ–ä¸ºå…¨1ï¼ˆæŒ‰ä½ä¸çš„å•ä½å…ƒï¼‰
      int mid = (tree[p].l + tree[p].r) >> 1;
      if (l <= mid) res &= query(p<<1, l, r);
      if (r > mid) res &= query(p<<1|1, l, r);
      return res;
  }

  void print(int p) {
      if (tree[p].l == tree[p].r) {
          cout << tree[p].sum << " ";
          return;
      }
      pushdown(p); // ä¸‹æ”¾æ‡’æ ‡è®°
      print(p<<1);
      print(p<<1|1);
  }

  int main() {
      cin >> n >> m;
      build(1, 1, n);
      for (int i = 1; i <= m; i++) {
          cin >> L[i] >> R[i] >> Q[i];
          update(1, L[i], R[i], Q[i]); // åŒºé—´æˆ–æ“ä½œ
      }
      // éªŒè¯æ‰€æœ‰çº¦æŸ
      bool valid = true;
      for (int i = 1; i <= m; i++) {
          int res = query(1, L[i], R[i]);
          if (res != Q[i]) {
              valid = false;
              break;
          }
      }
      if (!valid) {
          cout << "NO" << endl;
      } else {
          cout << "YES" << endl;
          print(1);
          cout << endl;
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸º**çº¿æ®µæ ‘æ„å»º**ï¼ˆ`build`ï¼‰ã€**åŒºé—´ä¿®æ”¹**ï¼ˆ`update`ï¼Œå¤„ç†åŒºé—´æˆ–æ“ä½œï¼‰ã€**åŒºé—´æŸ¥è¯¢**ï¼ˆ`query`ï¼Œå¤„ç†åŒºé—´ä¸æ“ä½œï¼‰ã€**æ‡’æ ‡è®°ä¸‹æ”¾**ï¼ˆ`pushdown`ï¼‰å’Œ**ç»“æœè¾“å‡º**ï¼ˆ`print`ï¼‰å‡ éƒ¨åˆ†ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šå…ˆç”¨`update`å¤„ç†æ‰€æœ‰çº¦æŸï¼Œå†ç”¨`query`éªŒè¯çº¦æŸï¼Œæœ€åè¾“å‡ºç»“æœã€‚


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šwanggkï¼‰  
* **äº®ç‚¹**ï¼š`pushdown`å‡½æ•°çš„è§„èŒƒå®ç°ï¼ˆæ­£ç¡®ä¸‹æ”¾æ‡’æ ‡è®°ï¼‰ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void pushdown(int o) {
      if (!lazy[o]) return;
      lazy[o<<1] |= lazy[o];
      lazy[o<<1|1] |= lazy[o];
      sm[o<<1] |= lazy[o];
      sm[o<<1|1] |= lazy[o];
      lazy[o] = 0;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  å½“éœ€è¦è®¿é—®å­èŠ‚ç‚¹æ—¶ï¼Œ`pushdown`å‡½æ•°å°†çˆ¶èŠ‚ç‚¹çš„æ‡’æ ‡è®°ï¼ˆ`lazy[o]`ï¼‰ä¸‹æ”¾ç»™å·¦å³å­èŠ‚ç‚¹ï¼ˆ`o<<1`å’Œ`o<<1|1`ï¼‰ï¼Œå¹¶æ›´æ–°å­èŠ‚ç‚¹çš„åŒºé—´å’Œï¼ˆ`sm`ï¼‰ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯**é¿å…é‡å¤ä¿®æ”¹å­èŠ‚ç‚¹**ï¼Œæé«˜æ•ˆç‡ã€‚æ¯”å¦‚ï¼Œå½“çˆ¶èŠ‚ç‚¹çš„æ‡’æ ‡è®°æ˜¯`x`ï¼Œè¯´æ˜è¯¥åŒºé—´çš„æ‰€æœ‰æ•°éƒ½éœ€è¦ä¸`x`æŒ‰ä½æˆ–ï¼Œä¸‹æ”¾åå­èŠ‚ç‚¹ç»§æ‰¿è¿™ä¸ªæ“ä½œï¼Œçˆ¶èŠ‚ç‚¹çš„æ‡’æ ‡è®°æ¸…ç©ºã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ‡’æ ‡è®°çš„ä¸‹æ”¾å¿…é¡»æ­£ç¡®ï¼Œå¦åˆ™ä¼šå¯¼è‡´åŒºé—´ä¿¡æ¯é”™è¯¯ï¼

#### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šCaiXY06ï¼‰  
* **äº®ç‚¹**ï¼šå·®åˆ†æ³•å¤„ç†æ¯ä¸€ä½çš„å·§å¦™æ€è·¯ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  inline bool check(int x) {
      memset(c, 0, sizeof(c));
      for (int i = 1; i <= m; i++)
          if (q[i] & x) c[l[i]]++, c[r[i]+1]--; // å·®åˆ†æ ‡è®°éœ€è¦è®¾ä¸º1çš„åŒºé—´
      for (int i = 1; i <= n; i++) {
          c[i] += c[i-1];
          if (c[i]) a[i] |= x; // å°†è¯¥ä½è®¾ä¸º1
      }
      // éªŒè¯è¯¥ä½æ˜¯å¦åœ¨çº¦æŸçš„0ä½ä¸­å­˜åœ¨
      for (int i = 1; i <= m; i++)
          if (!(q[i] & x) && (s[r[i]] - s[l[i]-1] == r[i] - l[i] + 1))
              return 1; // åŒºé—´å†…æ‰€æœ‰æ•°çš„è¯¥ä½ä¸º1ï¼Œè¿åçº¦æŸ
      return 0;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  å‡½æ•°`check`å¤„ç†äºŒè¿›åˆ¶ä½`x`ï¼ˆæ¯”å¦‚`x=1<<i`è¡¨ç¤ºç¬¬iä½ï¼‰ã€‚é¦–å…ˆç”¨å·®åˆ†æ ‡è®°éœ€è¦è®¾ä¸º1çš„åŒºé—´ï¼ˆ`c[l[i]]++`ï¼Œ`c[r[i]+1]--`ï¼‰ï¼Œç„¶åç”¨å‰ç¼€å’Œè®¡ç®—æ¯ä¸ªä½ç½®çš„`c[i]`ï¼ˆè‹¥`c[i]>0`ï¼Œè¯´æ˜è¯¥ä½éœ€è¦è®¾ä¸º1ï¼‰ã€‚æœ€åéªŒè¯çº¦æŸï¼šè‹¥çº¦æŸçš„qçš„è¯¥ä½ä¸º0ï¼ˆ`!(q[i]&x)`ï¼‰ï¼Œä¸”åŒºé—´å†…æ‰€æœ‰æ•°çš„è¯¥ä½ä¸º1ï¼ˆ`s[r[i]] - s[l[i]-1] == åŒºé—´é•¿åº¦`ï¼‰ï¼Œåˆ™è¿”å›1ï¼ˆä¸åˆæ³•ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå·®åˆ†æ³•æ˜¯å¤„ç†åŒºé—´ä¿®æ”¹çš„å¦ä¸€ç§é«˜æ•ˆæ–¹æ³•ï¼Œé€‚åˆé€ä½å¤„ç†çš„é—®é¢˜ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šçº¿æ®µæ ‘çš„â€œåŒºé—´é­”æ³•â€  
ï¼ˆé‡‡ç”¨8ä½åƒç´ é£æ ¼ï¼Œä»¿FCçº¢ç™½æœºUIï¼ŒèƒŒæ™¯ä¸ºæµ…è“è‰²ï¼ŒèŠ‚ç‚¹ä¸ºå½©è‰²æ–¹å—ï¼Œæ§åˆ¶é¢æ¿ä¸ºç°è‰²ã€‚ï¼‰

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤ºä¸€æ£µçº¿æ®µæ ‘ï¼ˆæ ¹èŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå­èŠ‚ç‚¹ä¸ºæ©™è‰²ï¼Œå¶å­èŠ‚ç‚¹ä¸ºç»¿è‰²ï¼‰ï¼Œæ•°ç»„å…ƒç´ ä¸º0ï¼ˆæ˜¾ç¤ºä¸ºé»‘è‰²æ–¹å—ï¼‰ã€‚æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®å’Œé€Ÿåº¦æ»‘å—ã€‚  
2. **åŒºé—´æˆ–æ“ä½œ**ï¼šå½“æ‰§è¡Œ`update(1, 1, 3, 3)`ï¼ˆæ ·ä¾‹1çš„çº¦æŸï¼‰æ—¶ï¼Œæ ¹èŠ‚ç‚¹ï¼ˆç®¡åŒºé—´1-3ï¼‰ä¼šâ€œé—ªçƒâ€å¹¶å˜æˆé»„è‰²ï¼ˆè¡¨ç¤ºæ‡’æ ‡è®°ä¸º3ï¼‰ï¼Œå¶å­èŠ‚ç‚¹ï¼ˆ1-3ï¼‰ä¼šå˜æˆç»¿è‰²ï¼ˆè¡¨ç¤ºå€¼ä¸º3ï¼‰ã€‚  
3. **åŒºé—´ä¸æŸ¥è¯¢**ï¼šå½“æ‰§è¡Œ`query(1, 1, 3)`æ—¶ï¼Œçº¿æ®µæ ‘ä¼šâ€œéå†â€æ ¹èŠ‚ç‚¹ï¼Œæ˜¾ç¤ºç»“æœä¸º3ï¼ˆç»¿è‰²æ–¹å—ï¼‰ã€‚  
4. **éªŒè¯çº¦æŸ**ï¼šè‹¥æŸ¥è¯¢ç»“æœç­‰äºqï¼Œä¼šæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›è‹¥ä¸ç­‰äºï¼Œä¼šæ’­æ”¾â€œé”™è¯¯â€éŸ³æ•ˆï¼Œå¹¶æ˜¾ç¤ºâ€œNOâ€ã€‚  
5. **è¾“å‡ºç»“æœ**ï¼šè‹¥æ‰€æœ‰çº¦æŸéªŒè¯é€šè¿‡ï¼Œä¼šæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œæ˜¾ç¤ºâ€œYESâ€å’Œæ•°ç»„å…ƒç´ ï¼ˆ3,3,3ï¼‰ã€‚

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€å¸§æ˜¾ç¤ºçº¿æ®µæ ‘çš„ä¿®æ”¹å’ŒæŸ¥è¯¢è¿‡ç¨‹ï¼ˆæ¯”å¦‚æ‡’æ ‡è®°çš„ä¸‹æ”¾ã€èŠ‚ç‚¹é¢œè‰²çš„å˜åŒ–ï¼‰ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šæ‹–åŠ¨é€Ÿåº¦æ»‘å—è°ƒæ•´æ’­æ”¾é€Ÿåº¦ï¼ˆå¦‚1xã€2xã€4xï¼‰ï¼ŒåŠ¨ç”»ä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹æ¼”ç¤ºã€‚

### æ¸¸æˆåŒ–å…ƒç´   
- **å…³å¡è®¾è®¡**ï¼šå°†â€œå¤„ç†çº¦æŸâ€â€œéªŒè¯çº¦æŸâ€â€œè¾“å‡ºç»“æœâ€è®¾ä¸ºä¸‰ä¸ªå°å…³å¡ï¼Œå®Œæˆæ¯ä¸ªå…³å¡ä¼šè·å¾—â€œæ˜Ÿæ˜Ÿâ€å¥–åŠ±ï¼ˆæœ€å¤š3é¢—ï¼‰ã€‚  
- **éŸ³æ•ˆ**ï¼šåŒºé—´ä¿®æ”¹æ—¶æ’­æ”¾â€œå“”â€çš„éŸ³æ•ˆï¼ŒæŸ¥è¯¢æ—¶æ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆï¼Œèƒœåˆ©æ—¶æ’­æ”¾â€œå•¦å•¦å•¦â€çš„éŸ³æ•ˆï¼Œé”™è¯¯æ—¶æ’­æ”¾â€œå˜Ÿå˜Ÿâ€çš„éŸ³æ•ˆã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **çº¿æ®µæ ‘çš„åŒºé—´æ“ä½œ**ï¼šé™¤äº†åŒºé—´æˆ–å’ŒåŒºé—´ä¸ï¼Œçº¿æ®µæ ‘è¿˜èƒ½å¤„ç†åŒºé—´åŠ ã€åŒºé—´ä¹˜ã€åŒºé—´æœ€å¤§å€¼ç­‰æ“ä½œï¼Œæ ¸å¿ƒæ˜¯**æ‡’æ ‡è®°çš„æ­£ç¡®ä½¿ç”¨**ã€‚  
- **ä½è¿ç®—çš„é€ä½å¤„ç†**ï¼šå¯¹äºä½è¿ç®—é—®é¢˜ï¼Œé€šå¸¸å¯ä»¥å°†æ¯ä¸€ä½å•ç‹¬å¤„ç†ï¼ˆå¦‚æœ¬é¢˜çš„å·®åˆ†æ³•ï¼‰ï¼Œå› ä¸ºä½ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚  
- **æ„é€ é¢˜çš„éªŒè¯**ï¼šæ„é€ å®Œæˆåï¼Œå¿…é¡»éªŒè¯æ‰€æœ‰çº¦æŸï¼Œå¦åˆ™å¯èƒ½å¿½ç•¥éšè—çš„é”™è¯¯ï¼ˆå¦‚æ ·ä¾‹2çš„çº¦æŸå†²çªï¼‰ã€‚

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P2357** - å®ˆå¢“äºº  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦å¤„ç†åŒºé—´åŠ ã€åŒºé—´ä¹˜ã€åŒºé—´æ±‚å’Œæ“ä½œï¼Œæ˜¯çº¿æ®µæ ‘çš„ç»å…¸ç»ƒä¹ ï¼Œèƒ½å¸®åŠ©ä½ å·©å›ºæ‡’æ ‡è®°çš„ä½¿ç”¨ã€‚  
2. **æ´›è°· P3372** - çº¿æ®µæ ‘æ¨¡æ¿1  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯çº¿æ®µæ ‘çš„åŸºç¡€æ¨¡æ¿é¢˜ï¼Œè¦æ±‚å®ç°åŒºé—´åŠ å’ŒåŒºé—´æ±‚å’Œï¼Œé€‚åˆå…¥é—¨å­¦ä¹ è€…ã€‚  
3. **æ´›è°· P1438** - æ— èŠçš„æ•°åˆ—  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦å¤„ç†åŒºé—´ç­‰å·®æ•°åˆ—åŠ å’ŒåŒºé—´æ±‚å’Œæ“ä½œï¼Œèƒ½å¸®åŠ©ä½ æ‹“å±•çº¿æ®µæ ‘çš„åº”ç”¨åœºæ™¯ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
> **å‚è€ƒç»éªŒï¼ˆæ¥è‡ªwanggkï¼‰**ï¼šâ€œæˆ‘åœ¨å†™çº¿æ®µæ ‘çš„æ—¶å€™ï¼Œä¸€å¼€å§‹å¿˜è®°äº†`pushdown`å‡½æ•°ä¸­çš„`lazy[o] = 0`ï¼Œå¯¼è‡´æ‡’æ ‡è®°æ²¡æœ‰æ¸…ç©ºï¼Œç»“æœåŒºé—´æŸ¥è¯¢é”™è¯¯ã€‚åæ¥é€šè¿‡æ‰“å°ä¸­é—´å˜é‡ï¼ˆæ¯”å¦‚`lazy`æ•°ç»„çš„å€¼ï¼‰æ‰æ‰¾åˆ°é—®é¢˜ã€‚â€  
> **ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ï¼åœ¨å†™çº¿æ®µæ ‘æ—¶ï¼Œ`pushdown`å‡½æ•°çš„æ­£ç¡®æ€§éå¸¸é‡è¦ï¼Œå°¤å…¶æ˜¯**æ¸…ç©ºçˆ¶èŠ‚ç‚¹çš„æ‡’æ ‡è®°**ã€‚æ‰“å°ä¸­é—´å˜é‡æ˜¯è°ƒè¯•çº¿æ®µæ ‘çš„æœ‰æ•ˆæ–¹æ³•ï¼Œèƒ½å¸®åŠ©ä½ å¿«é€Ÿå®šä½é”™è¯¯ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œInteresting Arrayâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£çº¿æ®µæ ‘ä¸ä½è¿ç®—çš„ç»“åˆï¼ŒæŒæ¡æ„é€ é¢˜çš„è§£é¢˜æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œè§£å†³é—®é¢˜â€ï¼Œè€Œä¸æ˜¯â€œå†™å‡ºä»£ç â€â€”â€”å¤šæ€è€ƒã€å¤šè°ƒè¯•ï¼Œä½ ä¸€å®šä¼šè¶Šæ¥è¶Šå‰å®³ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š163.05ç§’
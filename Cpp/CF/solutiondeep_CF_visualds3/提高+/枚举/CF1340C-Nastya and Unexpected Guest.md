# é¢˜ç›®ä¿¡æ¯

# Nastya and Unexpected Guest

## é¢˜ç›®æè¿°

If the girl doesn't go to Denis, then Denis will go to the girl. Using this rule, the young man left home, bought flowers and went to Nastya.

On the way from Denis's house to the girl's house is a road of $ n $ lines. This road can't be always crossed in one green light. Foreseeing this, the good mayor decided to place safety islands in some parts of the road. Each safety island is located after a line, as well as at the beginning and at the end of the road. Pedestrians can relax on them, gain strength and wait for a green light.

Denis came to the edge of the road exactly at the moment when the green light turned on. The boy knows that the traffic light first lights up $ g $ seconds green, and then $ r $ seconds red, then again $ g $ seconds green and so on.

Formally, the road can be represented as a segment $ [0, n] $ . Initially, Denis is at point $ 0 $ . His task is to get to point $ n $ in the shortest possible time.

He knows many different integers $ d_1, d_2, \ldots, d_m $ , where $ 0 \leq d_i \leq n $ â€” are the coordinates of points, in which the safety islands are located. Only at one of these points, the boy can be at a time when the red light is on.

Unfortunately, Denis isn't always able to control himself because of the excitement, so some restrictions are imposed:

- He must always move while the green light is on because it's difficult to stand when so beautiful girl is waiting for you. Denis can change his position by $ \pm 1 $ in $ 1 $ second. While doing so, he must always stay inside the segment $ [0, n] $ .
- He can change his direction only on the safety islands (because it is safe). This means that if in the previous second the boy changed his position by $ +1 $ and he walked on a safety island, then he can change his position by $ \pm 1 $ . Otherwise, he can change his position only by $ +1 $ . Similarly, if in the previous second he changed his position by $ -1 $ , on a safety island he can change position by $ \pm         1 $ , and at any other point by $ -1 $ .
- At the moment when the red light is on, the boy must be on one of the safety islands. He can continue moving in any direction when the green light is on.

Denis has crossed the road as soon as his coordinate becomes equal to $ n $ .

This task was not so simple, because it's possible that it is impossible to cross the road. Since Denis has all thoughts about his love, he couldn't solve this problem and asked us to help him. Find the minimal possible time for which he can cross the road according to these rules, or find that it is impossible to do.

## è¯´æ˜/æç¤º

In the first test, the optimal route is:

- for the first green light, go to $ 7 $ and return to $ 3 $ . In this case, we will change the direction of movement at the point $ 7 $ , which is allowed, since there is a safety island at this point. In the end, we will be at the point of $ 3 $ , where there is also a safety island. The next $ 11 $ seconds we have to wait for the red light.
- for the second green light reaches $ 14 $ . Wait for the red light again.
- for $ 1 $ second go to $ 15 $ . As a result, Denis is at the end of the road.

In total, $ 45 $ seconds are obtained.

In the second test, it is impossible to cross the road according to all the rules.

## æ ·ä¾‹ #1

### è¾“å…¥

```
15 5
0 3 7 14 15
11 11```

### è¾“å‡º

```
45```

## æ ·ä¾‹ #2

### è¾“å…¥

```
13 4
0 3 7 13
9 9```

### è¾“å‡º

```
-1```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šNastya and Unexpected Guest æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

<introduction>
ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œNastya and Unexpected Guestâ€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™é“é¢˜ç»“åˆäº†åŠ¨æ€è§„åˆ’ä¸æœ€çŸ­è·¯å¾„çš„æ€æƒ³ï¼Œéœ€è¦è€ƒè™‘çº¢ç»¿ç¯å‘¨æœŸå’Œå®‰å…¨å²›çš„é™åˆ¶ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚
</introduction>

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åŠ¨æ€è§„åˆ’ä¸0-1 BFSç»“åˆ`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
è§£å†³è¿™é“é¢˜çš„å…³é”®åœ¨äºç†è§£â€œçº¢ç»¿ç¯å‘¨æœŸâ€ä¸â€œå®‰å…¨å²›ç§»åŠ¨é™åˆ¶â€çš„ç»“åˆã€‚æˆ‘ä»¬å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªçŠ¶æ€è½¬ç§»é—®é¢˜ï¼Œå…¶ä¸­æ¯ä¸ªçŠ¶æ€ç”±â€œå½“å‰æ‰€åœ¨çš„å®‰å…¨å²›â€å’Œâ€œå½“å‰ç»¿ç¯å·²ä½¿ç”¨çš„æ—¶é—´â€ç»„æˆã€‚  
ç®€å•æ¥è¯´ï¼ŒåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰ç”¨äºè®°å½•åˆ°è¾¾æ¯ä¸ªå®‰å…¨å²›çš„ä¸åŒç»¿ç¯æ—¶é—´ç‚¹çš„æœ€å°‘å‘¨æœŸæ•°ï¼Œè€Œ0-1 BFSç”¨äºé«˜æ•ˆå¤„ç†çŠ¶æ€è½¬ç§»ï¼ˆå› ä¸ºè½¬ç§»çš„æƒå€¼åªæœ‰0å’Œ1ï¼‰ã€‚ä¾‹å¦‚ï¼Œä»å®‰å…¨å²›iç§»åŠ¨åˆ°i+1æ—¶ï¼Œè‹¥ç§»åŠ¨æ—¶é—´tæ»¡è¶³å½“å‰ç»¿ç¯å‰©ä½™æ—¶é—´è¶³å¤Ÿï¼ˆæ€»æ—¶é—´<gï¼‰ï¼Œåˆ™æƒå€¼ä¸º0ï¼ˆåŒä¸€å‘¨æœŸå†…ï¼‰ï¼›è‹¥åˆšå¥½ç­‰äºgï¼Œåˆ™æƒå€¼ä¸º1ï¼ˆéœ€è¦è¿›å…¥çº¢ç¯ï¼Œå‘¨æœŸæ•°+1ï¼‰ã€‚  

æ ¸å¿ƒéš¾ç‚¹åœ¨äºï¼š
- å¦‚ä½•å®šä¹‰çŠ¶æ€ï¼ˆå®‰å…¨å²›+ç»¿ç¯å·²ç”¨æ—¶é—´ï¼‰å¹¶å¤„ç†è½¬ç§»æ¡ä»¶ï¼›
- å¦‚ä½•ç”¨0-1 BFSä¼˜åŒ–çŠ¶æ€è½¬ç§»ï¼ˆåŒç«¯é˜Ÿåˆ—å¤„ç†æƒå€¼0å’Œ1çš„è¾¹ï¼‰ï¼›
- æœ€ç»ˆç­”æ¡ˆè®¡ç®—æ—¶éœ€è€ƒè™‘â€œç»ˆç‚¹æ˜¯å¦åœ¨çº¢ç¯å‰â€ï¼ˆè‹¥åˆšå¥½åœ¨ç»¿ç¯ç»“æŸåˆ°è¾¾ï¼Œéœ€å‡å»çº¢ç¯æ—¶é—´ï¼‰ã€‚  

å¯è§†åŒ–è®¾è®¡å°†èšç„¦äºå®‰å…¨å²›é—´çš„ç§»åŠ¨è¿‡ç¨‹ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºå®‰å…¨å²›ï¼ˆç»¿è‰²æ–¹å—ï¼‰ã€çº¢ç»¿ç¯çŠ¶æ€ï¼ˆç»¿è‰²/çº¢è‰²èƒŒæ™¯ï¼‰ã€å½“å‰ç»¿ç¯å‰©ä½™æ—¶é—´ï¼ˆé¡¶éƒ¨è¿›åº¦æ¡ï¼‰ï¼Œå¹¶é€šè¿‡åŒç«¯é˜Ÿåˆ—çš„åŠ¨ç”»ï¼ˆå‰æ¨/åæ¨èŠ‚ç‚¹ï¼‰å±•ç¤ºçŠ¶æ€å¤„ç†é¡ºåºï¼Œå…³é”®æ­¥éª¤ç”¨é—ªçƒå’ŒéŸ³æ•ˆï¼ˆå¦‚â€œå®â€å£°ï¼‰æç¤ºã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

<eval_intro>
é€šè¿‡è¯„ä¼°æ€è·¯æ¸…æ™°åº¦ã€ä»£ç è§„èŒƒæ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰ç»´åº¦ï¼Œä»¥ä¸‹é¢˜è§£è¯„åˆ†â‰¥4æ˜Ÿï¼Œå€¼å¾—å­¦ä¹ ï¼š
</eval_intro>

**é¢˜è§£ä¸€ï¼šä½œè€…Marser**
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£é€»è¾‘æ¸…æ™°ï¼Œä»£ç è§„èŒƒã€‚ä½œè€…æ˜ç¡®æŒ‡å‡ºå®‰å…¨å²›éœ€æ’åºï¼ˆé¿å…FSTï¼‰ï¼ŒçŠ¶æ€å®šä¹‰`dis[i][j]`è¡¨ç¤ºåˆ°è¾¾ç¬¬iä¸ªå®‰å…¨å²›ã€ç»¿ç¯å·²ç”¨jç§’çš„æœ€å°‘å‘¨æœŸæ•°ã€‚è½¬ç§»æ—¶ä¸¥æ ¼å¤„ç†äº†â€œæ—¶é—´<gâ€å’Œâ€œæ—¶é—´=gâ€ä¸¤ç§æƒ…å†µï¼Œå¹¶ç”¨åŒç«¯é˜Ÿåˆ—å®ç°0-1 BFSã€‚ä»£ç ä¸­è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚i=1å’Œi=mçš„å¤„ç†ï¼‰ä¸¥è°¨ï¼Œæœ€ç»ˆç­”æ¡ˆè®¡ç®—è€ƒè™‘äº†j=0æ—¶éœ€å‡å»çº¢ç¯æ—¶é—´ã€‚å®è·µä»·å€¼é«˜ï¼Œé€‚åˆç›´æ¥ä½œä¸ºç«èµ›å‚è€ƒã€‚

**é¢˜è§£äºŒï¼šä½œè€…juicyyou**
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£å¯¹çŠ¶æ€è½¬ç§»çš„æ•°å­¦è¡¨è¾¾ï¼ˆå¦‚`dp_{i+1,j+t} = dp_{i,j}`ï¼‰è§£é‡Šæ¸…æ™°ï¼Œä»£ç ç»“æ„ç®€æ´ã€‚è™½ç„¶æ³¨é‡Šè¾ƒå°‘ï¼Œä½†æ ¸å¿ƒé€»è¾‘ï¼ˆ0-1 BFSçš„å‰æ¨/åæ¨æ“ä½œï¼‰ä¸€ç›®äº†ç„¶ã€‚ç‰¹åˆ«åœ°ï¼Œä½œè€…åœ¨è®¡ç®—ç­”æ¡ˆæ—¶å¼ºè°ƒâ€œj=0éœ€å‡râ€çš„ç»†èŠ‚ï¼Œé¿å…äº†å¸¸è§é”™è¯¯ã€‚

**é¢˜è§£ä¸‰ï¼šä½œè€…Zyh_AKer**
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£å¯¹çŠ¶æ€å®šä¹‰å’Œè½¬ç§»æ¡ä»¶çš„æ¨å¯¼è¿‡ç¨‹æè¿°è¯¦ç»†ï¼ˆå¦‚â€œj+d_{i+1}-d_i<gâ€çš„æƒ…å†µï¼‰ï¼Œä»£ç ä¸­ä½¿ç”¨`fill`åˆå§‹åŒ–è·ç¦»æ•°ç»„ï¼Œå¹¶ç”¨`deque`å®ç°0-1 BFSï¼Œå¯è¯»æ€§å¼ºã€‚ä½œè€…ç‰¹åˆ«æé†’â€œdæ•°ç»„éœ€æ’åºâ€çš„å‘ç‚¹ï¼Œå¯¹å­¦ä¹ è€…æœ‰é‡è¦å‚è€ƒæ„ä¹‰ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

<difficulty_intro>
åœ¨è§£å†³è¿™é“é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å…³é”®ç‚¹ï¼Œç»“åˆä¼˜è´¨é¢˜è§£çš„å…±æ€§ï¼Œæç‚¼è§£å†³ç­–ç•¥ï¼š
</difficulty_intro>

1.  **å…³é”®ç‚¹1ï¼šçŠ¶æ€å®šä¹‰çš„å‡†ç¡®æ€§**  
    * **åˆ†æ**ï¼šçŠ¶æ€éœ€åŒæ—¶è®°å½•â€œå½“å‰æ‰€åœ¨çš„å®‰å…¨å²›â€å’Œâ€œå½“å‰ç»¿ç¯å·²ç”¨æ—¶é—´â€ï¼ˆå³`dis[i][j]`ï¼‰ã€‚è¿™æ˜¯å› ä¸ºä¸åŒç»¿ç¯æ—¶é—´ä¼šå½±å“åç»­è½¬ç§»ï¼ˆå¦‚å‰©ä½™ç»¿ç¯æ—¶é—´æ˜¯å¦è¶³å¤Ÿç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå®‰å…¨å²›ï¼‰ã€‚ä¼˜è´¨é¢˜è§£å‡é‡‡ç”¨æ­¤å®šä¹‰ï¼Œç¡®ä¿çŠ¶æ€è¦†ç›–æ‰€æœ‰å¯èƒ½æƒ…å†µã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€å®šä¹‰éœ€è¦†ç›–é—®é¢˜çš„æ‰€æœ‰å…³é”®çº¦æŸï¼ˆæœ¬é¢˜ä¸­ä¸ºå®‰å…¨å²›ä½ç½®å’Œç»¿ç¯æ—¶é—´ï¼‰ã€‚

2.  **å…³é”®ç‚¹2ï¼šè½¬ç§»æ¡ä»¶çš„æ­£ç¡®å¤„ç†**  
    * **åˆ†æ**ï¼šè½¬ç§»æ—¶éœ€åˆ†ä¸¤ç§æƒ…å†µï¼š  
      - ç§»åŠ¨æ—¶é—´+å½“å‰ç»¿ç¯æ—¶é—´<gï¼šåŒä¸€å‘¨æœŸå†…ï¼Œå‘¨æœŸæ•°ä¸å˜ï¼Œç»¿ç¯æ—¶é—´æ›´æ–°ä¸ºä¸¤è€…ä¹‹å’Œï¼›  
      - ç§»åŠ¨æ—¶é—´+å½“å‰ç»¿ç¯æ—¶é—´=gï¼šéœ€è¿›å…¥çº¢ç¯ï¼Œå‘¨æœŸæ•°+1ï¼Œç»¿ç¯æ—¶é—´é‡ç½®ä¸º0ã€‚  
      è‹¥è¶…è¿‡gåˆ™æ— æ³•è½¬ç§»ï¼ˆå› çº¢ç¯æœŸé—´å¿…é¡»åœ¨å®‰å…¨å²›ï¼‰ã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡æ¡ä»¶åˆ¤æ–­ä¸¥æ ¼åŒºåˆ†è¿™ä¸¤ç§æƒ…å†µã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ¡ä»¶éœ€ç´§æ‰£é¢˜ç›®çº¦æŸï¼ˆå¦‚çº¢ç¯å¿…é¡»åœ¨å®‰å…¨å²›ï¼‰ã€‚

3.  **å…³é”®ç‚¹3ï¼š0-1 BFSçš„é«˜æ•ˆå®ç°**  
    * **åˆ†æ**ï¼šç”±äºè½¬ç§»æƒå€¼åªæœ‰0ï¼ˆåŒä¸€å‘¨æœŸï¼‰å’Œ1ï¼ˆè·¨å‘¨æœŸï¼‰ï¼Œä½¿ç”¨åŒç«¯é˜Ÿåˆ—ï¼ˆå‰æ¨æƒå€¼0çš„èŠ‚ç‚¹ï¼Œåæ¨æƒå€¼1çš„èŠ‚ç‚¹ï¼‰å¯ä¿è¯æ—¶é—´å¤æ‚åº¦ä¸ºO(mg)ï¼ˆmä¸ºå®‰å…¨å²›æ•°ï¼Œgä¸ºç»¿ç¯æ—¶é—´ï¼‰ã€‚ä¼˜è´¨é¢˜è§£å‡æ­£ç¡®ä½¿ç”¨`deque`å®ç°æ­¤ä¼˜åŒ–ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæƒå€¼ä»…0/1æ—¶ï¼Œ0-1 BFSæ¯”Dijkstraæ›´é«˜æ•ˆã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é¢„å¤„ç†å®‰å…¨å²›**ï¼šè¾“å…¥åéœ€æ’åºï¼ˆé¿å…å› é¡ºåºé”™è¯¯å¯¼è‡´è·¯å¾„è®¡ç®—é”™è¯¯ï¼‰ã€‚  
- **è¾¹ç•Œæ¡ä»¶å¤„ç†**ï¼šç»ˆç‚¹næ˜¯å®‰å…¨å²›ï¼Œè®¡ç®—ç­”æ¡ˆæ—¶è‹¥j=0ï¼ˆå³åˆ°è¾¾ç»ˆç‚¹æ—¶åˆšå¥½ç»¿ç¯ç»“æŸï¼‰ï¼Œéœ€å‡å»çº¢ç¯æ—¶é—´rï¼ˆå› æ— éœ€ç­‰å¾…ï¼‰ã€‚  
- **çŠ¶æ€åˆå§‹åŒ–**ï¼šåˆå§‹çŠ¶æ€ä¸º`dis[1][0]=0`ï¼ˆèµ·ç‚¹æ˜¯ç¬¬1ä¸ªå®‰å…¨å²›ï¼Œç»¿ç¯æ—¶é—´0ï¼‰ã€‚  

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

<code_intro_overall>
ä»¥ä¸‹æ˜¯ç»¼åˆä¼˜è´¨é¢˜è§£çš„é€šç”¨æ ¸å¿ƒå®ç°ï¼Œé€»è¾‘æ¸…æ™°ä¸”è¦†ç›–å…³é”®ç»†èŠ‚ï¼š
</code_intro_overall>

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šæ­¤ä»£ç ç»¼åˆäº†Marserã€juicyyouç­‰é¢˜è§£çš„æ€è·¯ï¼ŒåŒ…å«å¿…è¦çš„æ’åºã€çŠ¶æ€åˆå§‹åŒ–ã€0-1 BFSè½¬ç§»åŠç­”æ¡ˆè®¡ç®—ï¼Œé€‚ç”¨äºç«èµ›åœºæ™¯ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
    ```cpp
    #include <bits/stdc++.h>
    using namespace std;
    typedef long long ll;
    const int MN = 1e4 + 5, MG = 1e3 + 5;
    int n, m, g, r, d[MN];
    int dis[MN][MG]; // dis[i][j]ï¼šåˆ°è¾¾ç¬¬iä¸ªå®‰å…¨å²›ï¼Œç»¿ç¯å·²ç”¨jç§’çš„æœ€å°‘å‘¨æœŸæ•°
    deque<pair<int, int>> q;

    int main() {
        scanf("%d%d", &n, &m);
        for (int i = 1; i <= m; ++i) scanf("%d", &d[i]);
        sort(d + 1, d + 1 + m); // å®‰å…¨å²›æ’åºï¼
        scanf("%d%d", &g, &r);
        memset(dis, -1, sizeof(dis));
        dis[1][0] = 0;
        q.push_front({1, 0});

        while (!q.empty()) {
            auto [u, t] = q.front(); q.pop_front();
            // å‘å·¦è½¬ç§»ï¼ˆåˆ°u-1ï¼‰
            if (u > 1) {
                int w = d[u] - d[u - 1];
                int nt = t + w;
                if (nt < g) { // åŒä¸€å‘¨æœŸï¼Œæƒå€¼0
                    if (dis[u - 1][nt] == -1) {
                        dis[u - 1][nt] = dis[u][t];
                        q.push_front({u - 1, nt});
                    }
                } else if (nt == g) { // è·¨å‘¨æœŸï¼Œæƒå€¼1
                    if (dis[u - 1][0] == -1) {
                        dis[u - 1][0] = dis[u][t] + 1;
                        q.push_back({u - 1, 0});
                    }
                }
            }
            // å‘å³è½¬ç§»ï¼ˆåˆ°u+1ï¼‰
            if (u < m) {
                int w = d[u + 1] - d[u];
                int nt = t + w;
                if (nt < g) { // åŒä¸€å‘¨æœŸï¼Œæƒå€¼0
                    if (dis[u + 1][nt] == -1) {
                        dis[u + 1][nt] = dis[u][t];
                        q.push_front({u + 1, nt});
                    }
                } else if (nt == g) { // è·¨å‘¨æœŸï¼Œæƒå€¼1
                    if (dis[u + 1][0] == -1) {
                        dis[u + 1][0] = dis[u][t] + 1;
                        q.push_back({u + 1, 0});
                    }
                }
            }
        }

        ll ans = -1;
        for (int j = 0; j < g; ++j) {
            if (dis[m][j] == -1) continue;
            ll res = 1LL * dis[m][j] * (g + r) + j;
            if (j == 0) res -= r; // ç»ˆç‚¹åœ¨ç»¿ç¯ç»“æŸæ—¶ï¼Œæ— éœ€ç­‰çº¢ç¯
            if (ans == -1 || res < ans) ans = res;
        }
        printf("%lld\n", ans);
        return 0;
    }
    ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç é¦–å…ˆè¯»å–è¾“å…¥å¹¶æ’åºå®‰å…¨å²›ï¼Œåˆå§‹åŒ–è·ç¦»æ•°ç»„`dis`ä¸º-1ï¼ˆæœªè®¿é—®ï¼‰ï¼Œåˆå§‹çŠ¶æ€ä¸º`dis[1][0]=0`ï¼ˆèµ·ç‚¹ï¼‰ã€‚é€šè¿‡åŒç«¯é˜Ÿåˆ—è¿›è¡Œ0-1 BFSï¼Œå¤„ç†å‘å·¦/å³è½¬ç§»çš„ä¸¤ç§æƒ…å†µï¼ˆåŒä¸€å‘¨æœŸå’Œè·¨å‘¨æœŸï¼‰ã€‚æœ€åéå†ç»ˆç‚¹æ‰€æœ‰å¯èƒ½çš„ç»¿ç¯æ—¶é—´ï¼Œè®¡ç®—æœ€å°æ€»æ—¶é—´ï¼ˆæ³¨æ„j=0æ—¶å‡å»çº¢ç¯æ—¶é—´ï¼‰ã€‚

---
<code_intro_selected>
æ¥ä¸‹æ¥ï¼Œåˆ†æä¼˜è´¨é¢˜è§£çš„æ ¸å¿ƒä»£ç ç‰‡æ®µï¼š
</code_intro_selected>

**é¢˜è§£ä¸€ï¼šä½œè€…Marser**
* **äº®ç‚¹**ï¼šä»£ç è§„èŒƒï¼Œæ˜ç¡®å¤„ç†äº†å®‰å…¨å²›æ’åºï¼Œè½¬ç§»æ¡ä»¶åˆ¤æ–­æ¸…æ™°ï¼Œæœ€ç»ˆç­”æ¡ˆè®¡ç®—è€ƒè™‘j=0çš„ç‰¹æ®Šæƒ…å†µã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
    ```cpp
    if(val<G){
        if(dis[v.first-1][val]<0){
            dis[v.first-1][val]=dis[v.first][v.second];
            q.push_front(make_pair(v.first-1,val));
        }
    }
    if(val==G){
        if(dis[v.first-1][0]<0){
            dis[v.first-1][0]=dis[v.first][v.second]+1;
            q.push_back(make_pair(v.first-1,0));
        }
    }
    ```
* **ä»£ç è§£è¯»**ï¼š  
  `val`è¡¨ç¤ºç§»åŠ¨æ—¶é—´+å½“å‰ç»¿ç¯æ—¶é—´ã€‚è‹¥`val<G`ï¼ˆåŒä¸€å‘¨æœŸï¼‰ï¼Œåˆ™æ–°çŠ¶æ€çš„å‘¨æœŸæ•°ä¸å˜ï¼ŒåŠ å…¥é˜Ÿåˆ—å‰ç«¯ï¼ˆæƒå€¼0ï¼‰ï¼›è‹¥`val==G`ï¼ˆè·¨å‘¨æœŸï¼‰ï¼Œåˆ™æ–°çŠ¶æ€å‘¨æœŸæ•°+1ï¼ŒåŠ å…¥é˜Ÿåˆ—åç«¯ï¼ˆæƒå€¼1ï¼‰ã€‚è¿™ä½“ç°äº†0-1 BFSçš„æ ¸å¿ƒé€»è¾‘ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒç«¯é˜Ÿåˆ—çš„å‰æ¨/åæ¨æ“ä½œæ˜¯0-1 BFSçš„å…³é”®ï¼Œç¡®ä¿æƒå€¼å°çš„èŠ‚ç‚¹ä¼˜å…ˆå¤„ç†ã€‚

**é¢˜è§£äºŒï¼šä½œè€…juicyyou**
* **äº®ç‚¹**ï¼šçŠ¶æ€è½¬ç§»çš„æ•°å­¦è¡¨è¾¾æ˜ç¡®ï¼Œä»£ç ç®€æ´ï¼Œç›´æ¥å¤„ç†å·¦å³è½¬ç§»ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
    ```cpp
    if(v + dis < g && dp[u + 1][v + dis] == -1){
        dp[u + 1][v + dis] = dp[u][v];
        q.push_front(node(u + 1, v + dis));
    } 
    if(v + dis == g && dp[u + 1][0] == -1){
        dp[u + 1][0] = dp[u][v] + 1;
        q.push_back(node(u + 1, 0));
    }
    ```
* **ä»£ç è§£è¯»**ï¼š  
  `v`æ˜¯å½“å‰ç»¿ç¯æ—¶é—´ï¼Œ`dis`æ˜¯ç›¸é‚»å®‰å…¨å²›è·ç¦»ã€‚è‹¥`v+dis<g`ï¼Œåˆ™è½¬ç§»åˆ°`u+1`å²›çš„ç»¿ç¯æ—¶é—´`v+dis`ï¼Œå‘¨æœŸæ•°ä¸å˜ï¼›è‹¥ç­‰äºgï¼Œåˆ™è½¬ç§»åˆ°ç»¿ç¯æ—¶é—´0ï¼Œå‘¨æœŸæ•°+1ã€‚é˜Ÿåˆ—çš„å‰æ¨/åæ¨ç¡®ä¿å¤„ç†é¡ºåºæ­£ç¡®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è½¬ç§»çš„æ¡ä»¶åˆ¤æ–­éœ€ä¸¥æ ¼å¯¹åº”é¢˜ç›®ä¸­çš„çº¢ç»¿ç¯è§„åˆ™ã€‚

---

## 5\. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

\<visualization_intro\>
ä¸ºäº†ç›´è§‚ç†è§£0-1 BFSçš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªâ€œåƒç´ æ¢é™©â€ä¸»é¢˜çš„8ä½é£æ ¼åŠ¨ç”»ï¼Œå±•ç¤ºDenisåœ¨å®‰å…¨å²›é—´çš„ç§»åŠ¨ä¸çº¢ç»¿ç¯åˆ‡æ¢ã€‚
\</visualization_intro\>

  * **åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜**ï¼š`åƒç´ å²›å¤§å†’é™©â€”â€”Denisçš„çº¢ç»¿ç¯æŒ‘æˆ˜`

  * **æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼š  
    å±•ç¤ºDenisä»èµ·ç‚¹0å‡ºå‘ï¼Œåœ¨å®‰å…¨å²›é—´ç§»åŠ¨ï¼Œé‡åˆ°ç»¿ç¯/çº¢ç¯çš„è¿‡ç¨‹ã€‚é‡ç‚¹æ¼”ç¤ºï¼š  
    - å®‰å…¨å²›ï¼ˆç»¿è‰²æ–¹å—ï¼‰çš„ä½ç½®ä¸ç¼–å·ï¼›  
    - ç»¿ç¯å‰©ä½™æ—¶é—´ï¼ˆé¡¶éƒ¨ç»¿è‰²è¿›åº¦æ¡ï¼Œæ¯ç§’ç¼©çŸ­ï¼‰ï¼›  
    - åŒç«¯é˜Ÿåˆ—çš„å¤„ç†ï¼ˆèŠ‚ç‚¹å‰æ¨/åæ¨çš„åŠ¨ç”»ï¼‰ï¼›  
    - åˆ°è¾¾ç»ˆç‚¹æ—¶çš„åº†ç¥æ•ˆæœï¼ˆé—ªçƒ+èƒœåˆ©éŸ³æ•ˆï¼‰ã€‚

  * **è®¾è®¡æ€è·¯ç®€è¿°**ï¼š  
    8ä½åƒç´ é£æ ¼ï¼ˆFCæ¸¸æˆç”»é¢ï¼‰è¥é€ è½»æ¾æ°›å›´ï¼Œç»¿è‰²/çº¢è‰²èƒŒæ™¯åŒºåˆ†çº¢ç»¿ç¯çŠ¶æ€ã€‚å®‰å…¨å²›ç”¨ç»¿è‰²æ–¹å—è¡¨ç¤ºï¼ŒDenisç”¨é»„è‰²åœ†ç‚¹ç§»åŠ¨ã€‚é˜Ÿåˆ—ç”¨å †å çš„åƒç´ å—è¡¨ç¤ºï¼Œå‰æ¨èŠ‚ç‚¹ï¼ˆæƒå€¼0ï¼‰ä»å·¦ä¾§æ»‘å…¥ï¼Œåæ¨èŠ‚ç‚¹ï¼ˆæƒå€¼1ï¼‰ä»å³ä¾§æ»‘å…¥ã€‚å…³é”®æ­¥éª¤ï¼ˆå¦‚è·¨å‘¨æœŸï¼‰ç”¨é—ªçƒå’Œâ€œå®â€å£°æç¤ºï¼Œå¢å¼ºè®°å¿†ç‚¹ã€‚

  * **åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹**ï¼š

    1.  **åˆå§‹åŒ–åœºæ™¯**ï¼š  
        - å±å¹•ä¸‹æ–¹æ˜¾ç¤ºå®‰å…¨å²›ï¼ˆç»¿è‰²æ–¹å—ï¼Œæ ‡æœ‰ç¼–å·1~mï¼‰ï¼Œèµ·ç‚¹ï¼ˆ0ï¼‰å’Œç»ˆç‚¹ï¼ˆnï¼‰ç”¨æ›´å¤§çš„ç»¿è‰²æ–¹å—ï¼›  
        - é¡¶éƒ¨æ˜¾ç¤ºç»¿ç¯è¿›åº¦æ¡ï¼ˆåˆå§‹æ»¡æ ¼ï¼Œç»¿è‰²ï¼‰ï¼Œå³ä¾§æ˜¾ç¤ºå½“å‰å‘¨æœŸæ•°ï¼ˆåˆå§‹0ï¼‰ï¼›  
        - æ§åˆ¶é¢æ¿ï¼šå•æ­¥/è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1x~5xï¼‰ï¼Œé‡ç½®æŒ‰é’®ã€‚

    2.  **çŠ¶æ€åˆå§‹åŒ–**ï¼š  
        - Denisï¼ˆé»„è‰²åœ†ç‚¹ï¼‰å‡ºç°åœ¨å®‰å…¨å²›1ï¼ˆèµ·ç‚¹ï¼‰ï¼Œé˜Ÿåˆ—ä¸­åŠ å…¥åˆå§‹çŠ¶æ€ï¼ˆ1,0ï¼‰ï¼›  
        - æ’­æ”¾â€œæ»´â€çš„æç¤ºéŸ³ï¼Œé˜Ÿåˆ—æ˜¾ç¤ºä¸º`[(1,0)]`ï¼ˆåƒç´ å—å †å ï¼‰ã€‚

    3.  **çŠ¶æ€è½¬ç§»æ¼”ç¤º**ï¼š  
        - ä»é˜Ÿåˆ—å‰ç«¯å–å‡ºçŠ¶æ€ï¼ˆu,tï¼‰ï¼ŒDenisæ‰€åœ¨çš„å®‰å…¨å²›ué—ªçƒï¼›  
        - è®¡ç®—å‘å·¦/å³ç§»åŠ¨çš„æ—¶é—´wï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³è½¬ç§»æ¡ä»¶ï¼š  
          - è‹¥`t+w<g`ï¼ˆåŒä¸€å‘¨æœŸï¼‰ï¼šDenisç§»åŠ¨åˆ°ç›¸é‚»å®‰å…¨å²›ï¼Œç»¿ç¯è¿›åº¦æ¡å‡å°‘wæ ¼ï¼Œæ–°çŠ¶æ€ï¼ˆuÂ±1, t+wï¼‰åŠ å…¥é˜Ÿåˆ—å‰ç«¯ï¼ˆå·¦ä¾§æ»‘å…¥ï¼‰ï¼Œæ’­æ”¾â€œå”°â€çš„ç§»åŠ¨éŸ³æ•ˆï¼›  
          - è‹¥`t+w==g`ï¼ˆè·¨å‘¨æœŸï¼‰ï¼šç»¿ç¯ç»“æŸï¼ˆè¿›åº¦æ¡å½’é›¶ï¼ŒèƒŒæ™¯å˜çº¢ï¼‰ï¼ŒDenisç­‰å¾…rç§’ï¼ˆçº¢ç¯èƒŒæ™¯æŒç»­ï¼‰ï¼Œå‘¨æœŸæ•°+1ï¼Œæ–°çŠ¶æ€ï¼ˆuÂ±1,0ï¼‰åŠ å…¥é˜Ÿåˆ—åç«¯ï¼ˆå³ä¾§æ»‘å…¥ï¼‰ï¼Œæ’­æ”¾â€œå’šâ€çš„åˆ‡æ¢éŸ³æ•ˆã€‚

    4.  **ç»ˆç‚¹åˆ¤æ–­**ï¼š  
        - å½“çŠ¶æ€ä¸ºï¼ˆm,jï¼‰æ—¶ï¼Œè®¡ç®—æ€»æ—¶é—´ï¼ˆå‘¨æœŸæ•°*(g+r)+jï¼Œj=0æ—¶å‡rï¼‰ï¼ŒDenisåˆ°è¾¾ç»ˆç‚¹ï¼ˆnï¼‰ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆâ€œå•¦~â€ï¼‰ï¼Œç»ˆç‚¹æ–¹å—é—ªçƒåº†ç¥ã€‚

    5.  **äº¤äº’æ§åˆ¶**ï¼š  
        - å•æ­¥æ‰§è¡Œï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€é€æ­¥æŸ¥çœ‹çŠ¶æ€è½¬ç§»ï¼›  
        - è‡ªåŠ¨æ’­æ”¾ï¼šé€‰æ‹©é€Ÿåº¦åè‡ªåŠ¨æ¼”ç¤ºï¼Œå¯æš‚åœ/ç»§ç»­ï¼›  
        - é‡ç½®ï¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œæ¸…ç©ºé˜Ÿåˆ—ã€‚

  * **æ—ç™½æç¤º**ï¼š  
    - â€œå½“å‰åœ¨å®‰å…¨å²›1ï¼Œç»¿ç¯å·²ç”¨0ç§’ï¼Œå¼€å§‹ç§»åŠ¨ï¼â€  
    - â€œç§»åŠ¨æ—¶é—´3ç§’ï¼Œç»¿ç¯å‰©ä½™8ç§’ï¼ˆg=11ï¼‰ï¼ŒåŒä¸€å‘¨æœŸï¼Œæ–°çŠ¶æ€åŠ å…¥é˜Ÿåˆ—å‰ç«¯ã€‚â€  
    - â€œç»¿ç¯ç»“æŸï¼Œè¿›å…¥çº¢ç¯ï¼Œç­‰å¾…11ç§’ï¼Œå‘¨æœŸæ•°+1ï¼Œæ–°çŠ¶æ€åŠ å…¥é˜Ÿåˆ—åç«¯ã€‚â€  

\<visualization_conclusion\>
é€šè¿‡è¿™ä¸ªåŠ¨ç”»ï¼Œæˆ‘ä»¬èƒ½ç›´è§‚çœ‹åˆ°çŠ¶æ€å¦‚ä½•åœ¨åŒç«¯é˜Ÿåˆ—ä¸­å¤„ç†ï¼Œçº¢ç»¿ç¯å¦‚ä½•åˆ‡æ¢ï¼Œä»¥åŠDeniså¦‚ä½•ä¸€æ­¥æ­¥åˆ°è¾¾ç»ˆç‚¹ã€‚è¿™ç§å¯è§†åŒ–æ–¹å¼å°†æŠ½è±¡çš„ç®—æ³•é€»è¾‘è½¬åŒ–ä¸ºå…·ä½“çš„ç”»é¢ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£0-1 BFSçš„æ ¸å¿ƒã€‚
\</visualization_conclusion\>

-----

## 6\. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

\<similar_problems_intro\>
æœ¬é¢˜çš„æ ¸å¿ƒæ˜¯â€œçŠ¶æ€å®šä¹‰+0-1 BFSâ€ï¼Œè¿™ç§æ€è·¯å¯è¿ç§»åˆ°å¤šç§æ¶‰åŠå‘¨æœŸ/çŠ¶æ€è½¬ç§»çš„é—®é¢˜ä¸­ã€‚
\</similar_problems_intro\>

  * **é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»**ï¼š  
    - å¤„ç†â€œå‘¨æœŸæ€§é™åˆ¶â€çš„é—®é¢˜ï¼ˆå¦‚çº¢ç»¿ç¯ã€ä»»åŠ¡å†·å´æ—¶é—´ï¼‰ï¼›  
    - çŠ¶æ€éœ€åŒ…å«â€œæ—¶é—´ç›¸å…³å‚æ•°â€ï¼ˆå¦‚å½“å‰å‘¨æœŸå†…çš„æ—¶é—´ã€å‰©ä½™å†·å´æ—¶é—´ï¼‰ï¼›  
    - æƒå€¼ä»…0/1çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼ˆå¦‚ç½‘æ ¼ä¸­çš„ç§»åŠ¨ï¼ŒæŸäº›æ­¥éª¤æ— ä»£ä»·ï¼‰ã€‚

  * **ç»ƒä¹ æ¨è (æ´›è°·)**ï¼š
    1.  **æ´›è°· P1141 è¿·å®«**  
          * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯ŸBFSä¸çŠ¶æ€è®°å½•ï¼Œéœ€å¤„ç†ä¸åŒæ—¶é—´ç‚¹çš„çŠ¶æ€ï¼Œä¸æœ¬é¢˜çš„çŠ¶æ€å®šä¹‰æ€æƒ³ç±»ä¼¼ã€‚  
    2.  **æ´›è°· P1330 å°é”é˜³å…‰å¤§å­¦**  
          * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ¶‰åŠå›¾çš„éå†ä¸çŠ¶æ€è½¬ç§»ï¼Œå¯ç»ƒä¹ BFSçš„ä¼˜åŒ–æŠ€å·§ï¼ˆå¦‚åŒç«¯é˜Ÿåˆ—ï¼‰ã€‚  
    3.  **æ´›è°· P1605 è¿·å®«**  
          * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»å…¸è¿·å®«é—®é¢˜ï¼Œéœ€è®°å½•è®¿é—®çŠ¶æ€ï¼Œä¸æœ¬é¢˜çš„çŠ¶æ€ç®¡ç†æ€è·¯ç›¸é€šã€‚  

-----

## 7\. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

\<insights_intro\>
é¢˜è§£ä¸­å¤šä½ä½œè€…æåˆ°â€œå®‰å…¨å²›æœªæ’åºå¯¼è‡´é”™è¯¯â€çš„æ•™è®­ï¼Œè¿™å¯¹æˆ‘ä»¬å¾ˆæœ‰å¯å‘ï¼š
\</insights_intro\>

> **å‚è€ƒç»éªŒ (æ¥è‡ªMarserç­‰ä½œè€…)**ï¼šâ€œç´ è´¨å‡ºé¢˜äººæ²¡æœ‰å°†{d_i}æ’åºï¼Œä¼—å¤šç¥ä»™æƒ¨é­FSTã€‚â€  
> **ç‚¹è¯„**ï¼šè¾“å…¥æ•°æ®çš„é¢„å¤„ç†ï¼ˆå¦‚æ’åºã€å»é‡ï¼‰æ˜¯ç¼–ç¨‹çš„é‡è¦æ­¥éª¤ï¼Œå°¤å…¶åœ¨æ¶‰åŠä½ç½®/é¡ºåºçš„é—®é¢˜ä¸­ã€‚æœ¬é¢˜çš„å®‰å…¨å²›å¿…é¡»æŒ‰åæ ‡æ’åºï¼Œå¦åˆ™ç›¸é‚»å®‰å…¨å²›çš„è·ç¦»è®¡ç®—ä¼šé”™è¯¯ï¼Œå¯¼è‡´æ•´ä¸ªç®—æ³•å¤±æ•ˆã€‚å­¦ä¹ è€…åœ¨ç¼–ç æ—¶éœ€å…»æˆâ€œå…ˆå¤„ç†è¾“å…¥æ•°æ®â€çš„ä¹ æƒ¯ï¼Œé¿å…æ­¤ç±»ä½çº§é”™è¯¯ã€‚

-----

\<conclusion\>
æœ¬æ¬¡å…³äºâ€œNastya and Unexpected Guestâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚é€šè¿‡ç†è§£çŠ¶æ€å®šä¹‰ã€0-1 BFSçš„åº”ç”¨ï¼Œä»¥åŠå¯è§†åŒ–çš„åŠ¨ç”»æ¼”ç¤ºï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡æ ¸å¿ƒæ€è·¯ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„å…³é”®åœ¨äºâ€œæ¸…æ™°çš„çŠ¶æ€è®¾è®¡â€å’Œâ€œå¯¹é¢˜ç›®çº¦æŸçš„ç²¾å‡†å¤„ç†â€ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª
\</conclusion\>

---
å¤„ç†ç”¨æ—¶ï¼š135.85ç§’
# é¢˜ç›®ä¿¡æ¯

# Ball

## é¢˜ç›®æè¿°

 $ N $ ladies attend the ball in the King's palace. Every lady can be described with three values: beauty, intellect and richness. King's Master of Ceremonies knows that ladies are very special creatures. If some lady understands that there is other lady at the ball which is more beautiful, smarter and more rich, she can jump out of the window. He knows values of all ladies and wants to find out how many probable self-murderers will be on the ball. Lets denote beauty of the $ i $ -th lady by $ B_{i} $ , her intellect by $ I_{i} $ and her richness by $ R_{i} $ . Then $ i $ -th lady is a probable self-murderer if there is some $ j $ -th lady that $ B_{i}<B_{j},I_{i}<I_{j},R_{i}<R_{j} $ . Find the number of probable self-murderers.

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
1 4 2
4 3 2
2 5 3
```

### è¾“å‡º

```
1
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šBall æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### **1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«**  
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`ä¸‰ç»´ååºå­˜åœ¨æ€§æŸ¥è¯¢` + `æ’åºåº”ç”¨ä¸æ•°æ®ç»“æ„ä¼˜åŒ–`  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜è¦æ±‚æ‰¾å‡ºå­˜åœ¨ä¸¥æ ¼ä¸‰ç»´ä¼˜åŠ¿å¯¹çš„æ•°é‡ï¼Œæ ¸å¿ƒæ€æƒ³å¦‚åŒ"ä¸‰ç§‘æˆç»©æ¯”æ‹¼"â€”â€”å°†å¥³å£«æŒ‰ç¾ä¸½å€¼(B)é™åºæ’åˆ—åï¼Œåªéœ€åœ¨æ™ºæ…§å€¼(I)å’Œå¯Œæœ‰å€¼(R)æ„æˆçš„äºŒç»´å¹³é¢ä¸­æŸ¥è¯¢å³ä¸ŠåŒºåŸŸæ˜¯å¦å­˜åœ¨ç‚¹ã€‚  
> - **é€šç”¨è§£æ³•**ï¼šå…ˆæŒ‰Bé™åºæ’åºï¼Œå†ç”¨æ ‘çŠ¶æ•°ç»„/çº¿æ®µæ ‘ç»´æŠ¤(I,R)çš„äºŒç»´å…³ç³»ã€‚å½“å¤„ç†åˆ°å¥³å£«iæ—¶ï¼ŒæŸ¥è¯¢I>Iáµ¢ä¸”R>Ráµ¢çš„åŒºåŸŸæ˜¯å¦å­˜åœ¨ç‚¹ï¼ˆè‹¥å­˜åœ¨åˆ™iæ˜¯è‡ªæ€è€…ï¼‰ã€‚  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåƒç´ åŠ¨ç”»å°†å±•ç¤ºæ’åºåçš„å¥³å£«é˜Ÿåˆ—ï¼ˆå¤å¤åƒç´ å°äººï¼‰ï¼ŒåŠ¨æ€æ›´æ–°äºŒç»´ç½‘æ ¼ï¼ˆIä¸ºæ¨ªè½´ï¼ŒRä¸ºçºµè½´ï¼‰ã€‚å…³é”®æ­¥éª¤é«˜äº®ï¼šå½“å‰å¥³å£«ä½ç½®ï¼ˆçº¢è‰²åƒç´ ï¼‰ã€æŸ¥è¯¢åŒºåŸŸï¼ˆè“è‰²è¾¹æ¡†ï¼‰ã€æ•°æ®ç»“æ„æ›´æ–°ï¼ˆç»¿è‰²é—ªå…‰ï¼‰ã€‚  
> - **æ¸¸æˆåŒ–å…ƒç´ **ï¼šé‡‡ç”¨8-bitéŸ³æ•ˆâ€”â€”æ•°æ®æ›´æ–°æ—¶"æ»´"å£°ï¼ŒæŸ¥è¯¢æˆåŠŸæ—¶"å®"å£°ï¼Œè‡ªæ€åˆ¤å®šæ—¶æ‚²é¸£éŸ³æ•ˆã€‚æ”¯æŒæ­¥è¿›æ§åˆ¶/AIè‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼ï¼Œç±»ä¼¼RPGæ¢ç´¢åœ°å›¾ã€‚

---

#### **2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ**  
**é¢˜è§£ä¸€ï¼ˆ_Yonder_ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ç›´å‡»æ ¸å¿ƒâ€”â€”æŒ‰Bé™åºæ’åºåï¼Œé€šè¿‡ç¦»æ•£åŒ–åè½¬å€¼åŸŸï¼Œå°†"æŸ¥è¯¢I>Iáµ¢"è½¬åŒ–ä¸ºæ ‘çŠ¶æ•°ç»„å‰ç¼€æŸ¥è¯¢ã€‚ä»£ç è§„èŒƒï¼š  
  - äº®ç‚¹1ï¼šç‹¬åˆ›æ€§ç¦»æ•£åŒ–æŠ€å·§ï¼ˆå€¼è¶Šå¤§æ˜ å°„ä¸‹æ ‡è¶Šå°ï¼‰ï¼Œä½¿æ ‘çŠ¶æ•°ç»„èƒ½ç›´æ¥æŸ¥è¯¢é«˜ç»´åŒºåŸŸ  
  - äº®ç‚¹2ï¼šç›¸åŒBå€¼çš„æ‰¹å¤„ç†é€»è¾‘ä¸¥è°¨ï¼Œé¿å…è‡ªæ¯”è¾ƒ  
  - å¤æ‚åº¦ï¼šO(n log n) è¾¾åˆ°ç†è®ºæœ€ä¼˜  

**é¢˜è§£äºŒï¼ˆEastPorridgeï¼‰**  
* **ç‚¹è¯„**ï¼šCDQåˆ†æ²»çš„ä¼˜é›…å®è·µï¼Œé¿å…æ•°æ®ç»“æ„ï¼š  
  - äº®ç‚¹1ï¼šåˆ†æ²»ä¸­åµŒå¥—æ’åºï¼Œä»…ç”¨ä¸´æ—¶å˜é‡ç»´æŠ¤Ræœ€å¤§å€¼  
  - äº®ç‚¹2ï¼šåŒæŒ‡é’ˆåŒæ­¥æ‰«æå·¦å³åŒºé—´ï¼Œç©ºé—´æ•ˆç‡O(1)  
  - æ³¨æ„ç‚¹ï¼šç¨³å®šæ’åºä¿è¯æ­£ç¡®æ€§ï¼Œä½†O(n logÂ²n)ç¨æ…¢äºæ ‘çŠ¶æ•°ç»„  

**é¢˜è§£ä¸‰ï¼ˆå¶æ«ï¼‰**  
* **ç‚¹è¯„**ï¼šæ ‘çŠ¶æ•°ç»„ç»´æŠ¤åç¼€æœ€å¤§å€¼çš„åˆ›æ–°å®ç°ï¼š  
  - äº®ç‚¹1ï¼šä¿®æ”¹æ ‘çŠ¶æ•°ç»„æ›´æ–°æ–¹å‘ï¼ˆx-=lowbitï¼‰å®ç°åç¼€æŸ¥è¯¢  
  - äº®ç‚¹2ï¼šåŒå…³é”®å­—æ’åºï¼ˆBå‡åº+Ié™åºï¼‰ç®€åŒ–å¤„ç†é€»è¾‘  
  - å®è·µä»·å€¼ï¼šä»£ç æ¨¡å—åŒ–å¼ºï¼Œè¾¹ç•Œå¤„ç†å®Œæ•´å¯ç›´æ¥å¥—ç”¨  

---

#### **3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥**  
1. **é™ç»´ç­–ç•¥é€‰æ‹©**  
   *åˆ†æ*ï¼šå›ºå®šBç»´åº¦åï¼ŒI-Rå¹³é¢çš„ç‚¹é›†æŸ¥è¯¢éœ€å¹³è¡¡æ•ˆç‡ä¸å¤æ‚åº¦ã€‚ä¼˜è´¨è§£å‡ç”¨æ’åºé™ç»´ï¼Œä½†æ•°æ®ç»“æ„é€‰æ‹©ä¸åŒï¼ˆæ ‘çŠ¶æ•°ç»„æ›´ä¼˜ï¼‰  
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šæ’åºæ˜¯ä¸‰ç»´ååºçš„ä¸‡èƒ½é’¥åŒ™ï¼Œé™ç»´åé—®é¢˜å¤æ‚åº¦éª¤é™  

2. **åŒBå€¼å¤„ç†é™·é˜±**  
   *åˆ†æ*ï¼šéœ€å…ˆæŸ¥è¯¢å®ŒåŒBç»„æ‰€æœ‰å¥³å£«ï¼Œå†æ‰¹é‡æ›´æ–°æ•°æ®ç»“æ„ï¼Œé˜²æ­¢åŒç»„è¯¯åˆ¤  
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šåˆ†ç»„å¤„ç†æ˜¯é¿å…ååºè‡ªæ¯”è¾ƒçš„å…³é”®æŠ€å·§  

3. **äºŒç»´æŸ¥è¯¢å®ç°**  
   *åˆ†æ*ï¼šæ ‘çŠ¶æ•°ç»„ç»´æŠ¤Rç»´åº¦æ—¶ï¼Œéœ€å°†Iç¦»æ•£åŒ–ã€‚æŸ¥è¯¢I>Iáµ¢åŒºåŸŸè½¬åŒ–ä¸º[Iáµ¢+1, maxI]åŒºé—´æŸ¥è¯¢  
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šç¦»æ•£åŒ–+åŒºé—´æŸ¥è¯¢æ˜¯å¤„ç†é«˜ç»´ç©ºé—´çš„æ ‡é…å¥—è·¯  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é™ç»´æ‰“å‡»**ï¼šé«˜ç»´é—®é¢˜å¿…å…ˆå°è¯•æ’åºå›ºå®šå•ç»´åº¦  
- **æ•°æ®ç»“æ„é€‰å‹**ï¼šæ ‘çŠ¶æ•°ç»„é¦–é€‰ï¼ˆç¼–ç æ˜“ï¼‰ï¼ŒCDQåˆ†æ²»å¤‡é€‰ï¼ˆå…ç¦»æ•£åŒ–ï¼‰  
- **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šç¦»æ•£åŒ–åç«‹å³æµ‹è¯•è¾¹ç•Œå€¼ï¼Œé˜²1e9å€¼åŸŸæº¢å‡º  

---

#### **4. C++æ ¸å¿ƒä»£ç å®ç°èµæ**  
**é€šç”¨æ ¸å¿ƒå®ç°**  
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=5e5+5;

struct Lady { int b, i, r; };
vector<Lady> ladies;
int tree[N], ans, n;

void update(int idx, int val) {
    while (idx < N) 
        tree[idx] = min(tree[idx], val), 
        idx += idx & -idx;
}

int query(int idx) {
    int res = INT_MAX;
    while (idx) 
        res = min(res, tree[idx]), 
        idx -= idx & -idx;
    return res;
}

int main() {
    // åˆå§‹åŒ–åŠè¾“å…¥ç•¥
    sort(ladies.begin(), ladies.end(), [](auto& x, auto& y){
        return x.b > y.b; // Bé™åºæ’åº
    });

    map<int, int> i_map; // Iå€¼ç¦»æ•£åŒ–
    for (auto& l : ladies) i_map[l.i];
    int cnt = 1;
    for (auto& [k, v] : i_map) v = cnt++;

    for (int i = 0; i < n; ) {
        int j = i;
        while (j < n && ladies[j].b == ladies[i].b) {
            int pos = i_map[ladies[j].i];
            if (query(pos - 1) < ladies[j].r) ans++; // æŸ¥è¯¢å³ä¸ŠåŒºåŸŸ
            j++;
        }
        while (i < j) { // æ‰¹é‡æ›´æ–°æ ‘çŠ¶æ•°ç»„
            update(i_map[ladies[i].i], ladies[i].r);
            i++;
        }
    }
    cout << ans;
}
```

**é¢˜è§£ä¸€ä»£ç ç‰‡æ®µèµæ**  
```cpp
// äº®ç‚¹ï¼šç¦»æ•£åŒ–å€¼åŸŸåè½¬ï¼ˆå¤§å€¼â†’å°ä¸‹æ ‡ï¼‰
for (auto it = m.begin(); it != m.end(); it++) 
    it->second = id--; 

// å­¦ä¹ ç¬”è®°ï¼šé€šè¿‡åè½¬å€¼åŸŸï¼Œå°†">"æŸ¥è¯¢è½¬åŒ–ä¸ºæ ‘çŠ¶æ•°ç»„å‰ç¼€æŸ¥è¯¢
```

**é¢˜è§£äºŒä»£ç ç‰‡æ®µèµæ**  
```cpp
// äº®ç‚¹ï¼šCDQåˆ†æ²»é¿å…æ•°æ®ç»“æ„
while (i <= mid && j <= r) {
    if (left[i].i > right[j].i) {
        max_r = max(max_r, left[i].r); // ä»…ç”¨å˜é‡ç»´æŠ¤
        i++;
    } else {
        if (max_r > right[j].r) mark_suicide();
        j++;
    }
}
```

**é¢˜è§£ä¸‰ä»£ç ç‰‡æ®µèµæ**  
```cpp
// äº®ç‚¹ï¼šæ ‘çŠ¶æ•°ç»„åç¼€æœ€å¤§å€¼ç»´æŠ¤
void update(int idx, int val) {
    while (idx > 0) { // æ›´æ–°æ–¹å‘åè½¬ï¼
        tree[idx] = max(tree[idx], val);
        idx -= idx & -idx;
    }
}
```

---

#### **5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º**  
* **ä¸»é¢˜**ï¼š8-bitåƒç´ å¥³å£«é—¯å…³æŒ‘æˆ˜  
* **æ ¸å¿ƒæµç¨‹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šå¥³å£«åƒç´ å°äººæŒ‰Bå€¼é™åºæ’é˜Ÿï¼ˆé«˜Båœ¨å‰ï¼‰  
  2. **æŸ¥è¯¢é˜¶æ®µ**ï¼š  
     - å½“å‰å¥³å£«ï¼ˆçº¢è‰²åƒç´ ï¼‰å‡ºç°åœ¨ç½‘æ ¼(I,Råæ ‡)  
     - è‡ªåŠ¨é«˜äº®å³ä¸ŠåŒºåŸŸï¼ˆè“è‰²åŠé€æ˜æ–¹å—ï¼‰  
     - è‹¥æœ‰åƒç´ ç‚¹ï¼ˆç»¿è‰²é—ªå…‰ï¼‰ï¼Œè§¦å‘"å®"å£°å¹¶æ ‡è®°çº¢å‰  
  3. **æ›´æ–°é˜¶æ®µ**ï¼šå¥³å£«å°äººè·³å…¥ç½‘æ ¼å˜ä¸ºç»¿ç‚¹ï¼Œä¼´éš"æ»´"å£°  
  4. **è¿›åº¦æ§åˆ¶**ï¼š  
     - æ­¥è¿›æ¨¡å¼ï¼šæ–¹å‘é”®æ§åˆ¶  
     - AIæ¨¡å¼ï¼šè‡ªåŠ¨æ’­æ”¾ï¼ˆé€Ÿåº¦æ»‘å—è°ƒèŠ‚ï¼‰  
     - è¿‡å…³ç»Ÿè®¡ï¼šæˆåŠŸè®¡æ•°åƒç´ åŒ–æ•°å­—è·³åŠ¨  
* **æŠ€æœ¯å®ç°**ï¼š  
  - Canvasç»˜åˆ¶ç½‘æ ¼åæ ‡ç³»ï¼ˆ20Ã—20åƒç´ /æ ¼ï¼‰  
  - éŸ³æ•ˆä½¿ç”¨Web Audio APIï¼Œå…³é”®æ“ä½œè§¦å‘8-bitéŸ³æ•ˆ  

---

#### **6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ**  
1. **æ´›è°· P1908** é€†åºå¯¹  
   â†’ åŒç±»é™ç»´æ€ç»´ï¼Œä¸€ç»´æ ‘çŠ¶æ•°ç»„å…¥é—¨  
2. **æ´›è°· P4054** [JSOI2009]è®¡æ•°é—®é¢˜  
   â†’ äºŒç»´æ ‘çŠ¶æ•°ç»„ç›´æ¥åº”ç”¨  
3. **æ´›è°· P4390** [BOI2007]Mokia  
   â†’ CDQåˆ†æ²»ç»å…¸è®­ç»ƒ  

---

#### **7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«**  
> **å‚è€ƒç»éªŒ**ï¼ˆæ¥è‡ª_Yonder_ï¼‰ï¼š  
> *"ç¦»æ•£åŒ–æ—¶æŒ‰ä»å¤§åˆ°å°æ˜ å°„ä¸‹æ ‡ï¼Œä½¿æ ‘çŠ¶æ•°ç»„èƒ½ç›´æ¥æŸ¥è¯¢é«˜ç»´åŒºåŸŸâ€”â€”è¿™ä¸ªæŠ€å·§è°ƒè¯•äº†3å°æ—¶æ‰é¡¿æ‚Ÿ"*  
> **Kayæ€»ç»“**ï¼šç¦»æ•£åŒ–æ–¹å‘å†³å®šæŸ¥è¯¢å¤æ‚åº¦ï¼ŒåŠ¨æ‰‹ç”»å€¼åŸŸæ˜ å°„å›¾èƒ½é¿å…æ€ç»´é™·é˜±ã€‚å¤šç»´åº¦é—®é¢˜å»ºè®®å…ˆå†™ä¼ªä»£ç éªŒè¯è½¬åŒ–é€»è¾‘ï¼

> **å‚è€ƒç»éªŒ**ï¼ˆæ¥è‡ªEastPorridgeï¼‰ï¼š  
> *"CDQåˆ†æ²»ä¸­å¿…é¡»ç¨³å®šæ’åºï¼Œå¦åˆ™å­åŒºé—´é¡ºåºç ´åå¯¼è‡´WA"*  
> **Kayæ€»ç»“**ï¼šæ’åºç¨³å®šæ€§æ˜¯åˆ†æ²»ç®—æ³•çš„éšè”½é™·é˜±ï¼Œå»ºè®®ç”¨`stable_sort`æ›¿ä»£`sort`ï¼

---

é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ ä¸ä»…æŒæ¡äº†ä¸‰ç»´ååºçš„æ ¸å¿ƒè§£æ³•ï¼Œæ›´å­¦ä¼šäº†é™ç»´æ€ç»´å’Œæ•°æ®ç»“æ„é€‰å‹æŠ€å·§ã€‚è®°ä½ï¼šå¤æ‚é—®é¢˜éƒ½æ˜¯ç”±ç®€å•æ¨¡å¼ç»„åˆè€Œæˆï¼Œæ‹†è§£+é€æ­¥éªŒè¯æ˜¯ä¸‡èƒ½é’¥åŒ™ï¼ğŸ®ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š190.68ç§’
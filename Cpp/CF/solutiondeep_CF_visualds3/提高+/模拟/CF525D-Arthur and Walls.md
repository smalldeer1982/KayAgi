# é¢˜ç›®ä¿¡æ¯

# Arthur and Walls

## é¢˜ç›®æè¿°

Finally it is a day when Arthur has enough money for buying an apartment. He found a great option close to the center of the city with a nice price.

Plan of the apartment found by Arthur looks like a rectangle $ nÃ—m $ consisting of squares of size $ 1Ã—1 $ . Each of those squares contains either a wall (such square is denoted by a symbol "\*" on the plan) or a free space (such square is denoted on the plan by a symbol ".").

Room in an apartment is a maximal connected area consisting of free squares. Squares are considered adjacent if they share a common side.

The old Arthur dream is to live in an apartment where all rooms are rectangles. He asks you to calculate minimum number of walls you need to remove in order to achieve this goal. After removing a wall from a square it becomes a free square. While removing the walls it is possible that some rooms unite into a single one.

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 5
.*.*.
*****
.*.*.
*****
.*.*.
```

### è¾“å‡º

```
.*.*.
*****
.*.*.
*****
.*.*.
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
6 7
***.*.*
..*.*.*
*.*.*.*
*.*.*.*
..*...*
*******
```

### è¾“å‡º

```
***...*
..*...*
..*...*
..*...*
..*...*
*******
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
4 5
.....
.....
..***
..*..
```

### è¾“å‡º

```
.....
.....
.....
.....
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šArthur and Walls æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## å¼•è¨€
ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æã€ŒArthur and Wallsã€è¿™é“æœ‰è¶£çš„C++ç¼–ç¨‹é¢˜ã€‚é¢˜ç›®è¦æ±‚æˆ‘ä»¬ä¿®æ”¹æœ€å°‘çš„å¢™ï¼ˆå°†`*`æ”¹ä¸º`.`ï¼‰ï¼Œè®©æ‰€æœ‰ç©ºåŒºåŸŸï¼ˆ`.`ï¼‰éƒ½å˜æˆçŸ©å½¢ã€‚è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**è´ªå¿ƒç­–ç•¥**ä¸**DFS/BFSéå†**çš„ç»“åˆï¼Œæ—¢èƒ½é”»ç‚¼æˆ‘ä»¬çš„é€»è¾‘åˆ¤æ–­èƒ½åŠ›ï¼Œä¹Ÿèƒ½å·©å›ºå¯¹æœç´¢ç®—æ³•çš„ç†è§£ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè´ªå¿ƒç®—æ³• + DFS/BFSæœç´¢  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œå°±åƒåƒè›‹ç³•æ—¶å…ˆæŒ‘æœ€â€œå¿…é¡»åƒâ€çš„ç”œå¥¶æ²¹â€”â€”**è´ªå¿ƒç­–ç•¥**ã€‚ä»€ä¹ˆæ˜¯â€œå¿…é¡»æ”¹â€çš„å¢™å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª`2Ã—2`çš„å°æ–¹å—ï¼Œå¦‚æœå…¶ä¸­æœ‰3ä¸ª`.`å’Œ1ä¸ª`*`ï¼Œé‚£è¿™ä¸ª`*`å°±åƒâ€œæŒ¡ä½çŸ©å½¢çš„å°ç¼ºå£â€ï¼Œä¸æ”¹çš„è¯æ•´ä¸ªç©ºåŒºåŸŸå°±æ²¡æ³•å½¢æˆçŸ©å½¢ã€‚æ¯”å¦‚ä¸‹é¢å››ç§æƒ…å†µä¸­çš„`*`éƒ½å¿…é¡»æ”¹æˆ`.`ï¼š  
```
*.  .*  ..  ..
..  ..  .*  *.
```  
ä¸€æ—¦æˆ‘ä»¬æ”¹äº†è¿™ä¸ª`*`ï¼Œå®ƒå‘¨å›´çš„8ä¸ªæ–¹å‘å¯èƒ½åˆä¼šå‡ºç°æ–°çš„â€œ3ä¸ª`.`+1ä¸ª`*`â€çš„æƒ…å†µï¼Œæ‰€ä»¥éœ€è¦ç”¨**DFS/BFS**åƒâ€œå¤šç±³è¯ºéª¨ç‰Œâ€ä¸€æ ·æ‰©æ•£å¤„ç†ï¼Œç›´åˆ°æ²¡æœ‰éœ€è¦ä¿®æ”¹çš„`*`ä¸ºæ­¢ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. éå†çŸ©é˜µä¸­çš„æ¯ä¸ª`*`ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦åœ¨æŸä¸ª`2Ã—2`åŒºåŸŸä¸­æ˜¯å”¯ä¸€çš„`*`ï¼ˆå³å¦å¤–ä¸‰ä¸ªæ˜¯`.`ï¼‰ã€‚  
2. å¦‚æœæ˜¯ï¼Œå°±æŠŠå®ƒæ”¹æˆ`.`ï¼Œå¹¶é€’å½’/è¿­ä»£å¤„ç†å®ƒçš„8ä¸ªé‚»å±…ï¼ˆå› ä¸ºé‚»å±…å¯èƒ½ç°åœ¨ä¹Ÿæ»¡è¶³ä¿®æ”¹æ¡ä»¶ï¼‰ã€‚  
3. é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„`*`éƒ½è¢«å¤„ç†ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ä¼šç”¨8ä½åƒç´ é£æ ¼ï¼ˆåƒçº¢ç™½æœºæ¸¸æˆï¼‰å±•ç¤ºçŸ©é˜µï¼š`. `ç”¨æµ…è“è‰²åƒç´ å—ï¼Œ`*`ç”¨æ·±ç°è‰²ï¼Œéœ€è¦ä¿®æ”¹çš„`*`ç”¨çº¢è‰²é—ªçƒã€‚å½“ä¿®æ”¹ä¸€ä¸ª`*`æ—¶ï¼Œå®ƒä¼šâ€œå®â€çš„ä¸€å£°å˜æˆæµ…è“è‰²ï¼ŒåŒæ—¶å‘¨å›´8ä¸ªç‚¹ä¼šç”¨é»„è‰²è¾¹æ¡†é«˜äº®ï¼Œè¡¨ç¤ºè¦æ£€æŸ¥å®ƒä»¬æ˜¯å¦éœ€è¦ä¿®æ”¹ã€‚æ§åˆ¶é¢æ¿æœ‰â€œå•æ­¥æ‰§è¡Œâ€ï¼ˆä¸€æ­¥æ­¥çœ‹ä¿®æ”¹è¿‡ç¨‹ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆåƒAIè§£è°œï¼‰å’Œâ€œé‡ç½®â€æŒ‰é’®ï¼Œè¿˜æœ‰é€Ÿåº¦æ»‘å—è°ƒèŠ‚åŠ¨ç”»å¿«æ…¢ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†å¸®å¤§å®¶å¿«é€ŸæŒæ¡æ ¸å¿ƒæ€è·¯ï¼Œæˆ‘ç­›é€‰äº†3ä»½**æ€è·¯æ¸…æ™°ã€ä»£ç è§„èŒƒã€å®è·µä»·å€¼é«˜**çš„é¢˜è§£ï¼š

### é¢˜è§£ä¸€ï¼šWhenï¼ˆèµï¼š6ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„äº®ç‚¹æ˜¯**ç»†èŠ‚æ‹‰æ»¡**â€”â€”ä¸ä»…æ˜ç¡®ç»™å‡ºäº†è´ªå¿ƒçš„è¯æ˜ï¼ˆâ€œåŠåŒ…å›´çš„`*`å¿…é¡»æ”¹â€ï¼‰ï¼Œè¿˜åˆ—å‡ºäº†å®¹æ˜“è¸©çš„å‘ï¼ˆæ¯”å¦‚DFSè¦éå†8ä¸ªæ–¹å‘ã€ä¸èƒ½åå‘ä¿®æ”¹`.`ä¸º`*`ï¼‰ã€‚ä»£ç é‡Œç”¨`check`å‡½æ•°ç»Ÿä¸€åˆ¤æ–­4ç§`2Ã—2`æƒ…å†µï¼Œ`DFS`å‡½æ•°ç”¨æ–¹å‘æ•°ç»„éå†é‚»å±…ï¼Œé€»è¾‘éå¸¸ç›´ç™½ã€‚å°¤å…¶æ˜¯è¾“å…¥ç”¨`ios::sync_with_stdio(false)`ä¼˜åŒ–ï¼Œé¿å…äº†è¶…æ—¶é—®é¢˜ï¼Œå¾ˆé€‚åˆç«èµ›å‚è€ƒã€‚

### é¢˜è§£äºŒï¼šD2T1ï¼ˆèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„ä»£ç **æå…¶ç®€æ´**ï¼Œç”¨`judge`å‡½æ•°ä¸€å¥è¯åˆ¤æ–­4ç§æƒ…å†µï¼Œ`dfs`å‡½æ•°ç›´æ¥é€’å½’å¤„ç†8ä¸ªé‚»å±…ã€‚ä½œè€…è¿˜è´´å¿ƒåœ°ç”¨`inline`å…³é”®å­—ä¼˜åŒ–å‡½æ•°è°ƒç”¨é€Ÿåº¦ï¼Œé€‚åˆè¿½æ±‚ä»£ç æ•ˆç‡çš„åŒå­¦ã€‚æ›´æ£’çš„æ˜¯ï¼ŒçŸ©é˜µä»1å¼€å§‹ç´¢å¼•ï¼ˆè€Œé0ï¼‰ï¼Œç›¸å½“äºç»™çŸ©é˜µåŠ äº†ä¸€åœˆâ€œè™šæ‹Ÿè¾¹æ¡†â€ï¼Œå½»åº•é¿å…äº†è¶Šç•Œåˆ¤æ–­çš„éº»çƒ¦ï¼

### é¢˜è§£ä¸‰ï¼šzzqDecoï¼ˆèµï¼š1ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„åˆ›æ–°ç‚¹æ˜¯ç”¨**BFSè€ŒéDFS**å¤„ç†æ‰©æ•£â€”â€”æŠŠæ‰€æœ‰åˆå§‹çš„`.`åŠ å…¥é˜Ÿåˆ—ï¼Œç„¶åé€ä¸ªå–å‡ºå¤„ç†é‚»å±…ã€‚è¿™ç§â€œä»å·²çŸ¥æ¨æœªçŸ¥â€çš„æ€è·¯æ›´ç¬¦åˆBFSçš„ç‰¹æ€§ï¼Œä¹Ÿé¿å…äº†DFSå¯èƒ½çš„æ ˆæº¢å‡ºé—®é¢˜ã€‚ä½œè€…è¿˜æåˆ°â€œç”¨cinè¦å…³åŒæ­¥â€çš„è¸©å‘ç»å†ï¼Œæé†’æˆ‘ä»¬æ³¨æ„è¾“å…¥æ•ˆç‡ï¼Œéå¸¸å®ç”¨ï¼


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£é¢˜æ—¶ï¼Œå¤§å®¶é€šå¸¸ä¼šé‡åˆ°3ä¸ªå…³é”®é—®é¢˜ï¼Œæˆ‘ç»“åˆé¢˜è§£çš„ç»éªŒå¸®å¤§å®¶æ€»ç»“äº†è§£å†³æ–¹æ¡ˆï¼š

### 1. å¦‚ä½•ç¡®å®šâ€œå¿…é¡»ä¿®æ”¹çš„`*`â€ï¼Ÿ  
**éš¾ç‚¹**ï¼šä¸çŸ¥é“å“ªäº›`*`æ”¹äº†ä¹‹åèƒ½è®©ç©ºåŒºåŸŸå˜æˆçŸ©å½¢ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šè´ªå¿ƒç­–ç•¥â€”â€”**åªæœ‰å½“`*`æ‰€åœ¨çš„æŸä¸ª`2Ã—2`åŒºåŸŸæœ‰3ä¸ª`.`æ—¶ï¼Œæ‰éœ€è¦ä¿®æ”¹**ã€‚è¿™æ˜¯æœ€å°çš„â€œéçŸ©å½¢ç»“æ„â€ï¼Œä¸æ”¹çš„è¯æ›´å¤§çš„åŒºåŸŸä¹Ÿæ— æ³•å½¢æˆçŸ©å½¢ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒçš„å…³é”®æ˜¯æ‰¾åˆ°â€œæœ€å°çš„å¿…é¡»æ“ä½œâ€ï¼Œè¿™é“é¢˜çš„â€œæœ€å°å•ä½â€å°±æ˜¯`2Ã—2`åŒºåŸŸã€‚

### 2. å¦‚ä½•å¤„ç†â€œä¿®æ”¹åçš„æ‰©æ•£â€ï¼Ÿ  
**éš¾ç‚¹**ï¼šæ”¹äº†ä¸€ä¸ª`*`åï¼Œå‘¨å›´çš„`*`å¯èƒ½ä¹Ÿéœ€è¦æ”¹ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆéå†ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šç”¨DFS/BFSéå†**8ä¸ªé‚»å±…**ï¼ˆä¸æ˜¯4ä¸ªï¼å› ä¸º`*`çš„æ–œå¯¹è§’ä¹Ÿå¯èƒ½å½¢æˆæ–°çš„`2Ã—2`ç»“æ„ï¼‰ã€‚æ¯”å¦‚æ”¹äº†`(x,y)`çš„`*`åï¼Œè¦æ£€æŸ¥`(x+1,y+1)`è¿™æ ·çš„æ–œå¯¹è§’ç‚¹ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœç´¢çš„æ–¹å‘è¦è¦†ç›–æ‰€æœ‰å¯èƒ½å—å½±å“çš„ç‚¹ï¼Œä¸èƒ½æ¼æ‰æ–œæ–¹å‘ã€‚

### 3. å¦‚ä½•é¿å…è¶Šç•Œå’Œé‡å¤å¤„ç†ï¼Ÿ  
**éš¾ç‚¹**ï¼šéå†åˆ°çŸ©é˜µè¾¹ç¼˜æ—¶ï¼Œè®¿é—®`a[x-1][y-1]`ä¼šè¶Šç•Œï¼›æˆ–è€…åŒä¸€ä¸ªç‚¹è¢«å¤šæ¬¡å¤„ç†ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼š  
- çŸ©é˜µç´¢å¼•ä»1å¼€å§‹ï¼ˆè€Œé0ï¼‰ï¼Œè¿™æ ·`x-1`å’Œ`y-1`ä¸ä¼šå°äº0ï¼›  
- åœ¨è®¿é—®æ•°ç»„å‰å…ˆåˆ¤æ–­è¾¹ç•Œï¼ˆæ¯”å¦‚`x>=1 && x<=n`ï¼‰ï¼›  
- ç”¨DFSæ—¶ï¼Œä¸€æ—¦å‘ç°å½“å‰ç‚¹æ˜¯`.`æˆ–è€…ä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥è¿”å›ï¼ˆé¿å…é‡å¤é€’å½’ï¼‰ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œå¤„ç†æ˜¯çŸ©é˜µé¢˜çš„â€œå¿…è€ƒé¢˜â€ï¼Œç´¢å¼•ä»1å¼€å§‹èƒ½çœå¾ˆå¤šéº»çƒ¦ï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **è´ªå¿ƒæ‰¾æœ€å°å•ä½**ï¼šé‡åˆ°â€œæœ€å°ä¿®æ”¹â€é—®é¢˜æ—¶ï¼Œå…ˆæ‰¾â€œæœ€å°çš„å¿…é¡»æ“ä½œâ€ï¼ˆæ¯”å¦‚æœ¬é¢˜çš„`2Ã—2`åŒºåŸŸï¼‰ã€‚  
- **æ–¹å‘æ•°ç»„ç®€åŒ–ä»£ç **ï¼šç”¨`dx[]`å’Œ`dy[]`å­˜å‚¨8ä¸ªæ–¹å‘ï¼Œé¿å…å†™é‡å¤çš„`dfs(x+1,y)`ä¹‹ç±»çš„ä»£ç ã€‚  
- **è¾“å…¥ä¼˜åŒ–**ï¼šç”¨`ios::sync_with_stdio(false)`å…³é—­cinåŒæ­¥ï¼Œæˆ–è€…ç”¨`getchar`è¯»å–å­—ç¬¦ï¼Œé¿å…è¶…æ—¶ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†Whenã€D2T1å’ŒzzqDecoçš„æ€è·¯ï¼Œä»£ç æ¸…æ™°ä¸”é«˜æ•ˆï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <queue>
using namespace std;

const int MAXN = 2020;
int n, m;
char a[MAXN][MAXN];
int dx[8] = {1, -1, 0, 0, 1, -1, -1, 1}; // 8ä¸ªæ–¹å‘
int dy[8] = {0, 0, 1, -1, 1, -1, 1, -1};

// æ£€æŸ¥(x,y)çš„*æ˜¯å¦éœ€è¦ä¿®æ”¹ï¼ˆæ‰€åœ¨2Ã—2åŒºåŸŸæœ‰3ä¸ª.ï¼‰
bool check(int x, int y) {
    if (x < 1 || x > n || y < 1 || y > m || a[x][y] != '*') return false;
    // 4ç§2Ã—2æƒ…å†µ
    if (a[x-1][y] == '.' && a[x][y-1] == '.' && a[x-1][y-1] == '.') return true;
    if (a[x-1][y] == '.' && a[x][y+1] == '.' && a[x-1][y+1] == '.') return true;
    if (a[x+1][y] == '.' && a[x][y-1] == '.' && a[x+1][y-1] == '.') return true;
    if (a[x+1][y] == '.' && a[x][y+1] == '.' && a[x+1][y+1] == '.') return true;
    return false;
}

// BFSå¤„ç†éœ€è¦ä¿®æ”¹çš„*
void bfs() {
    queue<pair<int, int>> q;
    // å…ˆæŠŠæ‰€æœ‰.åŠ å…¥é˜Ÿåˆ—ï¼ˆå› ä¸ºå®ƒä»¬çš„é‚»å±…å¯èƒ½éœ€è¦ä¿®æ”¹ï¼‰
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= m; ++j)
            if (a[i][j] == '.') q.push({i, j});
    
    while (!q.empty()) {
        auto [x, y] = q.front(); q.pop();
        // æ£€æŸ¥8ä¸ªé‚»å±…
        for (int k = 0; k < 8; ++k) {
            int nx = x + dx[k], ny = y + dy[k];
            if (check(nx, ny)) { // é‚»å±…éœ€è¦ä¿®æ”¹
                a[nx][ny] = '.'; // æ”¹æˆ.
                q.push({nx, ny}); // å¤„ç†é‚»å±…çš„é‚»å±…
            }
        }
    }
}

int main() {
    ios::sync_with_stdio(false); // å…³é—­cinåŒæ­¥ï¼ŒåŠ é€Ÿè¾“å…¥
    cin >> n >> m;
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= m; ++j)
            cin >> a[i][j];
    
    bfs();
    
    for (int i = 1; i <= n; ++i) {
        for (int j = 1; j <= m; ++j)
            cout << a[i][j];
        cout << endl;
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šç”¨`ios::sync_with_stdio(false)`åŠ é€Ÿcinï¼Œè¯»å–nÃ—mçš„çŸ©é˜µï¼ˆç´¢å¼•ä»1å¼€å§‹ï¼‰ã€‚  
  2. **BFSåˆå§‹åŒ–**ï¼šæŠŠæ‰€æœ‰åˆå§‹çš„`.`åŠ å…¥é˜Ÿåˆ—ï¼ˆå› ä¸ºå®ƒä»¬çš„é‚»å±…å¯èƒ½éœ€è¦ä¿®æ”¹ï¼‰ã€‚  
  3. **BFSéå†**ï¼šé€ä¸ªå–å‡ºé˜Ÿåˆ—ä¸­çš„ç‚¹ï¼Œæ£€æŸ¥å®ƒçš„8ä¸ªé‚»å±…â€”â€”å¦‚æœé‚»å±…æ˜¯éœ€è¦ä¿®æ”¹çš„`*`ï¼Œå°±æ”¹æˆ`.`å¹¶åŠ å…¥é˜Ÿåˆ—ã€‚  
  4. **è¾“å‡ºç»“æœ**ï¼šæ‰“å°ä¿®æ”¹åçš„çŸ©é˜µã€‚


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼šWhenï¼ˆæ¥æºï¼šç”¨æˆ·æä¾›ï¼‰  
* **äº®ç‚¹**ï¼šç”¨`check`å‡½æ•°æ¸…æ™°åˆ¤æ–­4ç§`2Ã—2`æƒ…å†µï¼Œ`DFS`å‡½æ•°ç”¨æ–¹å‘æ•°ç»„éå†é‚»å±…ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
int check(int x, int y){
    if(x < 1 || x > n) return 0;
    if(y < 1 || y > m) return 0;
    return (a[x-1][y] && a[x][y-1] && a[x-1][y-1]) || // æƒ…å†µ1
           (a[x-1][y] && a[x][y+1] && a[x-1][y+1]) || // æƒ…å†µ2
           (a[x+1][y] && a[x][y-1] && a[x+1][y-1]) || // æƒ…å†µ3
           (a[x+1][y] && a[x][y+1] && a[x+1][y+1]);   // æƒ…å†µ4
}

void DFS(int x, int y){
    for(int i = 0; i < 8; ++i){
        int nx = x + mx[i];
        int ny = y + my[i];
        if(nx >=1 && nx <=n && ny >=1 && ny <=m && a[nx][ny] == '*' && exam(nx, ny))
            a[nx][ny] = '.', DFS(nx, ny);
    }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `check`å‡½æ•°ï¼šå…ˆåˆ¤æ–­è¾¹ç•Œï¼Œå†æ£€æŸ¥4ç§`2Ã—2`æƒ…å†µï¼ˆæ¯”å¦‚`a[x-1][y]`æ˜¯`.`å—ï¼Ÿæ˜¯çš„è¯è¿”å›trueï¼‰ã€‚  
  - `DFS`å‡½æ•°ï¼šéå†8ä¸ªé‚»å±…ï¼Œå¦‚æœé‚»å±…æ˜¯`*`ä¸”éœ€è¦ä¿®æ”¹ï¼Œå°±æ”¹æˆ`.`å¹¶é€’å½’å¤„ç†é‚»å±…çš„é‚»å±…ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæŠŠåˆ¤æ–­æ¡ä»¶å°è£…æˆå‡½æ•°ï¼Œèƒ½è®©ä»£ç æ›´ readableï¼ˆæ˜“è¯»ï¼‰ï¼

#### é¢˜è§£äºŒï¼šD2T1ï¼ˆæ¥æºï¼šç”¨æˆ·æä¾›ï¼‰  
* **äº®ç‚¹**ï¼šç”¨`inline`å‡½æ•°ä¼˜åŒ–é€Ÿåº¦ï¼Œä»£ç æå…¶ç®€æ´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
inline bool judge(int i,int j){//åˆ¤æ–­æ˜¯å¦æ˜¯é‚£4ç§æƒ…å†µ
	if(a[i][j]!='*') return false;
	if(a[i-1][j-1]=='.'&&a[i][j-1]=='.'&&a[i-1][j]=='.') return true;
	if(a[i+1][j-1]=='.'&&a[i][j-1]=='.'&&a[i+1][j]=='.') return true;
	if(a[i-1][j+1]=='.'&&a[i][j+1]=='.'&&a[i-1][j]=='.') return true;
	if(a[i+1][j+1]=='.'&&a[i][j+1]=='.'&&a[i+1][j]=='.') return true;
	return false;
}

inline void dfs(int i,int j){//DFS
	if(!judge(i,j)) return;
	a[i][j]='.';
	for(int k=0; k<8; ++k) dfs(i+dx[k],j+dy[k]);//æ³¨æ„ä¸€ä¸ªç‚¹å¯ä»¥å½±å“å®ƒå‘¨å›´8ä¸ªç‚¹è€Œä¸æ˜¯4ä¸ª
	return;
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `inline`å…³é”®å­—ï¼šå‘Šè¯‰ç¼–è¯‘å™¨æŠŠå‡½æ•°ä»£ç ç›´æ¥æ’å…¥è°ƒç”¨å¤„ï¼Œé¿å…å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼ˆé€‚åˆå°å‡½æ•°ï¼‰ã€‚  
  - `dfs`å‡½æ•°ï¼šå¦‚æœå½“å‰ç‚¹ä¸éœ€è¦ä¿®æ”¹ï¼Œç›´æ¥è¿”å›ï¼›å¦åˆ™æ”¹æˆ`.`ï¼Œå¹¶é€’å½’å¤„ç†8ä¸ªé‚»å±…ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`inline`æ˜¯ç«èµ›ä¸­å¸¸ç”¨çš„ä¼˜åŒ–æŠ€å·§ï¼Œé€‚åˆé¢‘ç¹è°ƒç”¨çš„å°å‡½æ•°ï¼

#### é¢˜è§£ä¸‰ï¼šzzqDecoï¼ˆæ¥æºï¼šç”¨æˆ·æä¾›ï¼‰  
* **äº®ç‚¹**ï¼šç”¨BFSå¤„ç†æ‰©æ•£ï¼Œé¿å…DFSæ ˆæº¢å‡ºã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
queue<pair<int,int>>q;

int main()
{
  ios::sync_with_stdio(false);
  cin>>n>>m;
  for(int i=1;i<=n;i++) for(int j=1;j<=m;j++) 
  {
    cin>>map[i][j];
    if(map[i][j]=='.') q.push(make_pair(i,j));
  }
  while(!q.empty())
  {
    int i=q.front().first,j=q.front().second;
    q.pop();
    for(int now=0;now<8;now++)
    {
      if(map[i+dx[now]][j+dy[now]]=='*'&&check(i+dx[now],j+dy[now]))
      {
        map[i+dx[now]][j+dy[now]]='.';
        q.push(make_pair(i+dx[now],j+dy[now]));
      }
    }
  }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - åˆå§‹åŒ–é˜Ÿåˆ—ï¼šæŠŠæ‰€æœ‰åˆå§‹çš„`.`åŠ å…¥é˜Ÿåˆ—ï¼ˆå› ä¸ºå®ƒä»¬çš„é‚»å±…å¯èƒ½éœ€è¦ä¿®æ”¹ï¼‰ã€‚  
  - BFSå¾ªç¯ï¼šå–å‡ºé˜Ÿåˆ—ä¸­çš„ç‚¹ï¼Œæ£€æŸ¥8ä¸ªé‚»å±…â€”â€”å¦‚æœé‚»å±…æ˜¯éœ€è¦ä¿®æ”¹çš„`*`ï¼Œå°±æ”¹æˆ`.`å¹¶åŠ å…¥é˜Ÿåˆ—ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šBFSé€‚åˆâ€œä»å·²çŸ¥æ¨æœªçŸ¥â€çš„æ‰©æ•£é—®é¢˜ï¼Œä¸ä¼šåƒDFSé‚£æ ·å› ä¸ºé€’å½’å¤ªæ·±è€Œæ ˆæº¢å‡ºï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
ã€Œåƒç´ æ¢é™©å®¶ä¿®å¤çŸ©å½¢è¿·å®«ã€â€”â€”æŠŠçŸ©é˜µå˜æˆä¸€ä¸ª8ä½åƒç´ é£æ ¼çš„è¿·å®«ï¼Œ`.`æ˜¯å¯èµ°çš„æµ…è“è‰²åœ°ç –ï¼Œ`*`æ˜¯æ·±ç°è‰²çš„å¢™ï¼Œéœ€è¦ä¿®æ”¹çš„`*`æ˜¯é—ªçƒçš„çº¢è‰²å¢™ã€‚æ¢é™©å®¶ï¼ˆä¸€ä¸ªå°åƒç´ äººï¼‰ä¼šä¸€æ­¥æ­¥â€œæ•²ç¢â€éœ€è¦ä¿®æ”¹çš„å¢™ï¼Œè®©è¿·å®«çš„ç©ºåŒºåŸŸå˜æˆçŸ©å½¢ã€‚

### è®¾è®¡æ€è·¯ç®€è¿°  
ç”¨8ä½åƒç´ é£æ ¼æ˜¯ä¸ºäº†è¥é€ å¤å¤æ¸¸æˆçš„è½»æ¾æ°›å›´ï¼Œè®©å¤§å®¶åƒç©æ¸¸æˆä¸€æ ·å­¦ç®—æ³•ã€‚é—ªçƒçš„çº¢è‰²å¢™èƒ½å¿«é€ŸæŠ“ä½æ³¨æ„åŠ›ï¼Œâ€œæ•²ç¢â€å¢™çš„åŠ¨ç”»ï¼ˆçº¢è‰²â†’æµ…è“è‰²ï¼‰å’Œâ€œå®â€çš„éŸ³æ•ˆèƒ½å¼ºåŒ–è®°å¿†ã€‚æ¯æ•²ç¢ä¸€ä¸ªå¢™ï¼Œæ¢é™©å®¶ä¼šèµ°åˆ°ä¸‹ä¸€ä¸ªéœ€è¦ä¿®æ”¹çš„å¢™ï¼Œå°±åƒâ€œé—¯å…³â€ä¸€æ ·ï¼Œå¢åŠ æˆå°±æ„Ÿã€‚

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  

1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•ä¸­å¤®æ˜¾ç¤º`nÃ—m`çš„åƒç´ çŸ©é˜µï¼š`. `æ˜¯æµ…è“è‰²ï¼ˆ#87CEEBï¼‰ï¼Œ`*`æ˜¯æ·±ç°è‰²ï¼ˆ#333333ï¼‰ï¼Œéœ€è¦ä¿®æ”¹çš„`*`æ˜¯çº¢è‰²ï¼ˆ#FF0000ï¼‰å¹¶é—ªçƒï¼ˆæ¯ç§’é—ª2æ¬¡ï¼‰ã€‚  
   - ä¸‹æ–¹æ§åˆ¶é¢æ¿æœ‰ï¼šã€Œå¼€å§‹/æš‚åœã€æŒ‰é’®ï¼ˆåƒç´ é£æ ¼çš„ä¸‰è§’å½¢/æ­£æ–¹å½¢ï¼‰ã€ã€Œå•æ­¥ã€æŒ‰é’®ï¼ˆç®­å¤´ï¼‰ã€ã€Œé‡ç½®ã€æŒ‰é’®ï¼ˆå¾ªç¯ç®­å¤´ï¼‰ã€é€Ÿåº¦æ»‘å—ï¼ˆä»â€œæ…¢â€åˆ°â€œå¿«â€ï¼‰ã€‚  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»æ¾BGMï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ï¼‰ã€‚

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - ç‚¹å‡»ã€Œå¼€å§‹ã€æŒ‰é’®ï¼Œæ¢é™©å®¶ï¼ˆå°åƒç´ äººï¼‰èµ°åˆ°ç¬¬ä¸€ä¸ªéœ€è¦ä¿®æ”¹çš„çº¢è‰²å¢™å‰ï¼Œå±å¹•ä¸Šæ–¹å¼¹å‡ºæ–‡å­—æ°”æ³¡ï¼šâ€œè¿™ä¸ªå¢™æŒ¡ä½äº†çŸ©å½¢ï¼Œéœ€è¦æ•²ç¢ï¼â€ã€‚  
   - æ¢é™©å®¶æŒ¥èµ·é”¤å­ï¼Œçº¢è‰²å¢™â€œå®â€çš„ä¸€å£°å˜æˆæµ…è“è‰²ï¼ŒåŒæ—¶å‘¨å›´8ä¸ªç‚¹ç”¨é»„è‰²è¾¹æ¡†é«˜äº®ï¼ˆè¡¨ç¤ºè¦æ£€æŸ¥å®ƒä»¬ï¼‰ã€‚

3. **æ ¸å¿ƒæ­¥éª¤æ¼”ç¤º**ï¼š  
   - **å•æ­¥æ¨¡å¼**ï¼šç‚¹å‡»ã€Œå•æ­¥ã€æŒ‰é’®ï¼Œæ¢é™©å®¶èµ°åˆ°ä¸‹ä¸€ä¸ªéœ€è¦ä¿®æ”¹çš„çº¢è‰²å¢™ï¼Œé‡å¤â€œæ•²å¢™â€åŠ¨ä½œï¼Œæ¯æ•²ä¸€æ¬¡æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  
   - **è‡ªåŠ¨æ¨¡å¼**ï¼šæ»‘åŠ¨é€Ÿåº¦æ»‘å—åˆ°â€œå¿«â€ï¼Œæ¢é™©å®¶ä¼šè‡ªåŠ¨éå†æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„å¢™ï¼ŒåƒAIè§£è°œä¸€æ ·å¿«é€Ÿå®Œæˆã€‚  
   - **çŠ¶æ€æç¤º**ï¼šå½“æ£€æŸ¥ä¸€ä¸ªç‚¹æ—¶ï¼Œå±å¹•å³ä¾§æ˜¾ç¤ºå½“å‰çš„`2Ã—2`åŒºåŸŸï¼ˆé«˜äº®å››ä¸ªåƒç´ å—ï¼‰ï¼Œå¹¶æ–‡å­—è¯´æ˜ï¼šâ€œè¿™é‡Œæœ‰3ä¸ª.ï¼Œæ‰€ä»¥è¿™ä¸ª*è¦æ”¹ï¼â€ã€‚

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„å¢™éƒ½è¢«æ•²ç¢ï¼Œå±å¹•å¼¹å‡ºâ€œèƒœåˆ©ï¼â€çš„åƒç´ æ–‡å­—ï¼Œæ’­æ”¾ä¸Šæ‰¬çš„èƒœåˆ©éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ï¼‰ï¼Œæ¢é™©å®¶ä¼šè·³èµ·æ¥åº†ç¥ã€‚  
   - å¦‚æœæ²¡æœ‰éœ€è¦ä¿®æ”¹çš„å¢™ï¼Œå±å¹•æ˜¾ç¤ºâ€œè¿·å®«å·²ç»æ˜¯çŸ©å½¢å•¦ï¼â€ï¼Œæ’­æ”¾â€œå˜Ÿå˜Ÿâ€çš„æç¤ºéŸ³ã€‚

### æ—ç™½æç¤º  
- æ•²å¢™å‰ï¼šâ€œæ³¨æ„çœ‹è¿™ä¸ªçº¢è‰²çš„å¢™â€”â€”å®ƒæ‰€åœ¨çš„2Ã—2åŒºåŸŸæœ‰3ä¸ªæµ…è“è‰²åœ°ç –ï¼Œä¸æ”¹çš„è¯å°±æ²¡æ³•å½¢æˆçŸ©å½¢ï¼â€  
- æ•²å¢™æ—¶ï¼šâ€œå®ï¼å¢™å˜æˆåœ°ç –äº†ï¼Œç°åœ¨æ£€æŸ¥å®ƒçš„é‚»å±…æœ‰æ²¡æœ‰éœ€è¦ä¿®æ”¹çš„ï¼â€  
- å®Œæˆåï¼šâ€œæ‰€æœ‰éœ€è¦ä¿®æ”¹çš„å¢™éƒ½æ•²ç¢äº†ï¼Œç°åœ¨è¿·å®«çš„ç©ºåŒºåŸŸéƒ½æ˜¯çŸ©å½¢å•¦ï¼â€


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ¬é¢˜çš„**è´ªå¿ƒ+æ‰©æ•£**æ€è·¯å¯ä»¥è§£å†³å¾ˆå¤šâ€œæœ€å°ä¿®æ”¹â€é—®é¢˜ï¼š  
1. **å¡«æ¶‚é¢œè‰²**ï¼šæ¯”å¦‚æ´›è°·P1162ï¼Œéœ€è¦å°†å°é—­åŒºåŸŸçš„é¢œè‰²æ”¹æˆå¦ä¸€ç§ï¼Œæ ¸å¿ƒæ˜¯æ‰¾åˆ°â€œå¿…é¡»ä¿®æ”¹çš„åŒºåŸŸâ€å¹¶æ‰©æ•£ã€‚  
2. **ç—…æ¯’ä¼ æ’­**ï¼šæ¯”å¦‚æ¨¡æ‹Ÿç—…æ¯’ä»æ„ŸæŸ“ç‚¹æ‰©æ•£ï¼Œæ ¸å¿ƒæ˜¯â€œä»å·²çŸ¥æ„ŸæŸ“ç‚¹æ¨æœªçŸ¥æ„ŸæŸ“ç‚¹â€ã€‚  
3. **è¿·å®«è¿é€šæ€§**ï¼šæ¯”å¦‚åˆ¤æ–­è¿·å®«ä¸­ä¸¤ä¸ªç‚¹æ˜¯å¦è¿é€šï¼Œæ ¸å¿ƒæ˜¯ç”¨DFS/BFSéå†æ‰€æœ‰å¯è¾¾ç‚¹ã€‚

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1162** - å¡«æ¶‚é¢œè‰²  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦å°†å°é—­åŒºåŸŸçš„`0`æ”¹æˆ`2`ï¼Œæ ¸å¿ƒæ˜¯æ‰¾åˆ°â€œå¿…é¡»ä¿®æ”¹çš„åŒºåŸŸâ€å¹¶æ‰©æ•£ï¼Œå’Œæœ¬é¢˜çš„è´ªå¿ƒ+æ‰©æ•£æ€è·¯å®Œå…¨ä¸€è‡´ï¼  
2. **æ´›è°· P1332** - è¡€è‰²å…ˆé”‹é˜Ÿ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯BFSçš„ç»å…¸åº”ç”¨â€”â€”æ¨¡æ‹Ÿç—…æ¯’ä»å¤šä¸ªèµ·ç‚¹æ‰©æ•£ï¼Œèƒ½å·©å›ºä½ å¯¹â€œæ‰©æ•£éå†â€çš„ç†è§£ã€‚  
3. **æ´›è°· P2895** - åœ°éœ‡é€ƒç”Ÿ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨è´ªå¿ƒç­–ç•¥é€‰æ‹©â€œæœ€ä¼˜é€ƒç”Ÿè·¯çº¿â€ï¼Œå¹¶ç»“åˆBFSåˆ¤æ–­è¿é€šæ€§ï¼Œèƒ½é”»ç‚¼ä½ å¯¹è´ªå¿ƒ+æœç´¢çš„ç»¼åˆè¿ç”¨èƒ½åŠ›ï¼  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª Whenã€zzqDecoã€Level_Down)  
- **When**ï¼šâ€œDFSè¦å‘8ä¸ªæ–¹å‘æ‹“å±•ï¼Œå¦åˆ™ä¼šWAï¼â€â€”â€”å¾ˆå¤šåŒå­¦ä¸€å¼€å§‹åªéå†4ä¸ªæ–¹å‘ï¼Œå¯¼è‡´æ¼æ‰æ–œå¯¹è§’çš„æƒ…å†µï¼Œè¿™æ˜¯å¸¸è§çš„å‘ã€‚  
- **zzqDeco**ï¼šâ€œç”¨cinä¸€å®šè¦å…³åŒæ­¥ï¼Œå¦åˆ™TLEï¼â€â€”â€”ciné»˜è®¤å’ŒCçš„è¾“å…¥æµåŒæ­¥ï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼Œå…³é—­åŒæ­¥èƒ½å¤§å¹…æå‡è¾“å…¥é€Ÿåº¦ã€‚  
- **Level_Down**ï¼šâ€œDFSæ—¶å¦‚æœä¸éœ€è¦ä¿®æ”¹è¦returnï¼Œå¦åˆ™ä¼šREï¼â€â€”â€”å¦‚æœå½“å‰ç‚¹ä¸éœ€è¦ä¿®æ”¹ï¼Œç»§ç»­é€’å½’ä¼šå¯¼è‡´æ— é™å¾ªç¯æˆ–æ ˆæº¢å‡ºï¼Œå¿…é¡»åŠæ—¶è¿”å›ã€‚  

### ç‚¹è¯„  
è¿™äº›ç»éªŒéƒ½æ˜¯â€œè¸©è¿‡å‘æ‰æ‡‚çš„çœŸç†â€ï¼æ¯”å¦‚éå†æ–¹å‘çš„é—®é¢˜ï¼Œå¾ˆå¤šåŒå­¦ä¸€å¼€å§‹ä¼šå¿½ç•¥æ–œæ–¹å‘ï¼Œå¯¼è‡´æµ‹è¯•ç‚¹ä¸è¿‡ï¼›è¾“å…¥åŒæ­¥çš„é—®é¢˜ï¼Œå¾ˆå¤šäººç¬¬ä¸€æ¬¡åšç«èµ›é¢˜æ—¶ä¼šå› ä¸ºcinæ…¢è€Œè¶…æ—¶ã€‚è¿™äº›ç»éªŒèƒ½å¸®ä½ å°‘èµ°å¾ˆå¤šå¼¯è·¯ï¼  


## ç»“è¯­  
æœ¬æ¬¡å…³äºã€ŒArthur and Wallsã€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œå•¦ï¼å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®ä½ ç†è§£**è´ªå¿ƒç­–ç•¥**å’Œ**DFS/BFSæ‰©æ•£**çš„ç»“åˆï¼Œä¹Ÿèƒ½è®©ä½ å­¦ä¼šå¦‚ä½•å¤„ç†çŸ©é˜µä¸­çš„è¾¹ç•Œé—®é¢˜å’Œè¾“å…¥ä¼˜åŒ–ã€‚è®°ä½ï¼šç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œè§£å†³é—®é¢˜â€ï¼Œè€Œä¸æ˜¯â€œå†™ä»£ç â€â€”â€”å¤šæ€è€ƒâ€œä¸ºä»€ä¹ˆè¦è¿™æ ·åšâ€ï¼Œæ¯”â€œæ€ä¹ˆå†™ä»£ç â€æ›´é‡è¦ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š109.38ç§’
# é¢˜ç›®ä¿¡æ¯

# Perun, Ult!

## é¢˜ç›®æè¿°

A lot of students spend their winter holidays productively. Vlad has advanced very well in doing so! For three days already, fueled by salads and tangerines â€” the leftovers from New Year celebration â€” he has been calibrating his rating in his favorite MOBA game, playing as a hero named Perun.

Perun has an ultimate ability called "Thunderwrath". At the instant of its activation, each enemy on the map ( $ n $ of them in total) loses ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/d216f79c4581ff07bac2eb40367610feb8c137c2.png) health points as a single-time effect. It also has a restriction: it can only activated when the moment of time is an integer. The initial bounty for killing an enemy is ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/2078a0964de47cdee5ccf9b3fbbb9c2602fdb150.png). Additionally, it increases by ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/600a44120274d855b208352694b857991b9552e9.png) each second. Formally, if at some second $ t $ the ability is activated and the $ i $ -th enemy is killed as a result (i.e. his health drops to zero or lower), Vlad earns ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/2affc6d4bcb10dc0ae3b3c9c0c973c94780f368d.png) units of gold.

Every enemy can receive damage, as well as be healed. There are multiple ways of doing so, but Vlad is not interested in details. For each of $ n $ enemies he knows:

- ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/fc4707d8a855c477b62b13b1470d38bb6766fbc9.png) â€” maximum number of health points for the $ i $ -th enemy;
- ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/8efcccd354ad1e78851168f9dfe9981ef086b631.png) â€” initial health of the enemy (on the $ 0 $ -th second);
- ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/dce4274c465d132023523d8a7f53bc4a706d2722.png) â€” the amount of health the $ i $ -th enemy can regenerate per second.

There also $ m $ health updates Vlad knows about:

- ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/085949a0fef92cec2ad6a8413640d4367b22ea30.png) â€” time when the health was updated;
- ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/b2ad7de3b3b780b7804e20a0428f7e5181e4453b.png) â€” the enemy whose health was updated;
- ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/fa9c2a28c567ce2c3bc995acf7706c9f11229fd1.png) â€” updated health points for $ enemy_{j} $ .

Obviously, Vlad wants to maximize his profit. If it's necessary, he could even wait for years to activate his ability at the right second. Help him determine the exact second (note that it must be an integer) from $ 0 $ (inclusively) to $ +âˆ $ so that a single activation of the ability would yield Vlad the maximum possible amount of gold, and print this amount.

## è¯´æ˜/æç¤º

On the pictures you can see health points of each enemy versus time in sample cases.

Periods when Vlad can kill one enemy are marked with yellow color.

Periods when Vlad can kill two enemies are marked with purple color.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/371bebe0ea750379826870ee127df5b588d49620.png)In the first sample case, Vlad can activate the ability at the $ 50 $ -th second: the enemies $ 2 $ and $ 3 $ will die since they would have $ 40 $ and $ 50 $ health points correspondingly. Vlad will earn $ 2Â·(1000+50Â·10)=3000 $ gold.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF912C/dee22bf9a2821d482ba5ff5de6e1cf1db497ba51.png)In the second sample case, the maximum amount of health for the enemy $ 1 $ is less than the damage dealt by the ability. Hence, the enemy could be killed anytime. As the bounty increases by $ 50 $ over the time, the maximum possible amount of gold is infinite.

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 2
1000 10 50
70 5 5
90 70 1
110 20 2
20 2 10
30 3 10
```

### è¾“å‡º

```
3000
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
1 1
500 50 1000
750 750 20
10 1 300
```

### è¾“å‡º

```
-1
```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPerun, Ult! æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

<introduction>
ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œPerun, Ult!â€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™é“é¢˜éœ€è¦æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªæ•´æ•°æ—¶é—´ç‚¹æ¿€æ´»ç»ˆææŠ€èƒ½ï¼Œä½¿å¾—æ€»é‡‘å¸æ”¶ç›Šæœ€å¤§ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®é€»è¾‘ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚
</introduction>

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ•°å­¦åˆ†æä¸åŒºé—´æå€¼è®¡ç®—  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®åœ¨äºç†è§£â€œæ¯ä¸ªæ•Œäººçš„å¯å‡»æ€æ—¶é—´åŒºé—´â€å’Œâ€œæ€»é‡‘å¸å‡½æ•°åœ¨è¿™äº›åŒºé—´å†…çš„æœ€å¤§å€¼â€ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä¸ºæ¯ä¸ªæ•Œäººè®¡ç®—å‡ºæ‰€æœ‰å¯èƒ½è¢«å‡»æ€çš„æ—¶é—´ç‚¹ï¼ˆå³å¥åº·å€¼â‰¤Dçš„æ—¶é—´åŒºé—´ï¼‰ï¼Œç„¶ååœ¨è¿™äº›åŒºé—´çš„äº¤é›†ä¸­ï¼Œæ‰¾åˆ°æ€»é‡‘å¸æœ€å¤§çš„æ•´æ•°æ—¶é—´tã€‚  

- **é¢˜è§£æ€è·¯**ï¼š  
  1. å¯¹æ¯ä¸ªæ•Œäººï¼Œè®¡ç®—å…¶å¥åº·å€¼éšæ—¶é—´å˜åŒ–çš„å‡½æ•°ï¼ˆè€ƒè™‘åˆå§‹å¥åº·ã€æ¯ç§’å†ç”Ÿå’Œå¥åº·æ›´æ–°äº‹ä»¶ï¼‰ã€‚  
  2. æ‰¾å‡ºæ¯ä¸ªæ•Œäººå¥åº·å€¼â‰¤Dçš„æ—¶é—´åŒºé—´ï¼ˆå¯èƒ½æ˜¯å¤šä¸ªä¸è¿ç»­åŒºé—´ï¼‰ã€‚  
  3. åˆå¹¶æ‰€æœ‰æ•Œäººçš„å¯å‡»æ€æ—¶é—´åŒºé—´ï¼Œå¾—åˆ°å…¨å±€æœ‰æ•ˆæ—¶é—´çª—å£ã€‚  
  4. åœ¨æ¯ä¸ªæœ‰æ•ˆçª—å£å†…ï¼Œè®¡ç®—æ€»é‡‘å¸å‡½æ•°ï¼ˆå„å¯å‡»æ€æ•Œäººçš„B_i + k_i*tä¹‹å’Œï¼‰ï¼Œæ‰¾åˆ°æœ€å¤§å€¼ã€‚  
  5. è‹¥å­˜åœ¨æŸä¸ªæ•Œäººçš„å¯å‡»æ€æ—¶é—´åŒºé—´æ˜¯æ— é™çš„ï¼ˆå¦‚æ ·ä¾‹2ï¼‰ï¼Œåˆ™æ€»é‡‘å¸å¯èƒ½æ— é™å¤§ï¼Œè¾“å‡º-1ã€‚  

- **æ ¸å¿ƒéš¾ç‚¹**ï¼š  
  å¦‚ä½•å‡†ç¡®è®¡ç®—æ¯ä¸ªæ•Œäººçš„å¥åº·å‡½æ•°ï¼ˆå¤„ç†å¥åº·æ›´æ–°äº‹ä»¶ï¼‰ï¼Œä»¥åŠå¦‚ä½•åœ¨å¤šä¸ªæ—¶é—´åŒºé—´çš„äº¤é›†ä¸­æ‰¾åˆ°æ€»é‡‘å¸çš„æœ€å¤§å€¼ã€‚  

- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
  æˆ‘ä»¬å¯ä»¥ç”¨åƒç´ åŠ¨ç”»å±•ç¤ºæ¯ä¸ªæ•Œäººçš„å¥åº·éšæ—¶é—´å˜åŒ–çš„æ›²çº¿ï¼ˆç±»ä¼¼FCæ¸¸æˆçš„è¡€æ¡ï¼‰ï¼Œç”¨ä¸åŒé¢œè‰²æ ‡è®°å¯å‡»æ€åŒºé—´ï¼ˆå¦‚é»„è‰²æ ‡è®°å•æ•Œäººå¯å‡»æ€ï¼Œç´«è‰²æ ‡è®°å¤šæ•Œäººå¯å‡»æ€ï¼‰ã€‚åŠ¨ç”»ä¸­ä¼šåŠ¨æ€æ˜¾ç¤ºæ—¶é—´è½´ï¼Œå½“æ—¶é—´tç§»åŠ¨æ—¶ï¼Œè¡€æ¡åŒæ­¥å˜åŒ–ï¼ŒåŒæ—¶è®¡ç®—å½“å‰æ€»é‡‘å¸å¹¶é«˜äº®æœ€å¤§å€¼ç‚¹ã€‚å…³é”®æ­¥éª¤ï¼ˆå¦‚å¥åº·æ›´æ–°äº‹ä»¶è§¦å‘ï¼‰ä¼šç”¨åƒç´ é—ªçƒæç¤ºï¼Œé…åˆâ€œå®â€çš„éŸ³æ•ˆã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

<eval_intro>
ç”±äºå½“å‰æä¾›çš„é¢˜è§£ä¿¡æ¯æ˜¾ç¤ºâ€œæš‚æ— é¢˜è§£â€ï¼Œæˆ‘ä»¬å°†ä»é¢˜ç›®æœ¬èº«å‡ºå‘ï¼Œæ€»ç»“é€šç”¨çš„å­¦ä¹ å»ºè®®ï¼Œå¸®åŠ©å¤§å®¶ç†è§£è§£é¢˜æ€è·¯ã€‚
</eval_intro>

**é€šç”¨å­¦ä¹ å»ºè®®**ï¼š  
- å…ˆç†æ¸…æ¯ä¸ªæ•Œäººçš„å¥åº·å‡½æ•°ï¼šå¥åº·å€¼ç”±åˆå§‹å€¼ã€æ¯ç§’å†ç”Ÿå’Œå¥åº·æ›´æ–°äº‹ä»¶å…±åŒå†³å®šã€‚éœ€æ³¨æ„å¥åº·å€¼ä¸ä¼šè¶…è¿‡æœ€å¤§å€¼h_i^maxã€‚  
- å¯¹æ¯ä¸ªæ•Œäººï¼Œåˆ†é˜¶æ®µè®¡ç®—å¥åº·å‡½æ•°ï¼ˆå¥åº·æ›´æ–°äº‹ä»¶å°†æ—¶é—´è½´åˆ’åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼‰ã€‚  
- å¯¹äºæ¯ä¸ªé˜¶æ®µï¼Œæ±‚è§£å¥åº·å€¼â‰¤Dçš„tèŒƒå›´ï¼Œå¾—åˆ°è¯¥é˜¶æ®µçš„å¯å‡»æ€åŒºé—´ã€‚  
- åˆå¹¶æ‰€æœ‰æ•Œäººçš„å¯å‡»æ€åŒºé—´ï¼Œå¾—åˆ°å…¨å±€æœ‰æ•ˆçª—å£ï¼Œå†åœ¨è¿™äº›çª—å£å†…è®¡ç®—æ€»é‡‘å¸çš„æœ€å¤§å€¼ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

<difficulty_intro>
åœ¨è§£å†³è¿™é“é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä»¥ä¸‹å‡ ä¸ªå…³é”®éš¾ç‚¹ã€‚ç»“åˆé¢˜ç›®é€»è¾‘ï¼Œæˆ‘ä¸ºå¤§å®¶æç‚¼äº†æ€è€ƒæ–¹å‘å’Œè§£å†³ç­–ç•¥ï¼š
</difficulty_intro>

1.  **å…³é”®ç‚¹1ï¼šå¦‚ä½•è®¡ç®—å•ä¸ªæ•Œäººçš„å¥åº·å‡½æ•°ï¼Ÿ**  
    * **åˆ†æ**ï¼šæ•Œäººçš„å¥åº·éšæ—¶é—´å˜åŒ–å¯èƒ½è¢«å¤šæ¬¡æ›´æ–°ï¼ˆç”±mæ¬¡å¥åº·æ›´æ–°äº‹ä»¶è§¦å‘ï¼‰ã€‚éœ€è¦å°†æ—¶é—´è½´æŒ‰äº‹ä»¶æ—¶é—´ç‚¹åˆ’åˆ†æˆå¤šä¸ªåŒºé—´ï¼Œæ¯ä¸ªåŒºé—´å†…å¥åº·å‡½æ•°ä¸ºçº¿æ€§å˜åŒ–ï¼ˆåˆå§‹å¥åº·+å†ç”Ÿ*æ—¶é—´ï¼Œæˆ–æ›´æ–°åçš„å¥åº·+å†ç”Ÿ*æ—¶é—´ï¼‰ã€‚ä¾‹å¦‚ï¼Œè‹¥æœ‰äº‹ä»¶åœ¨t=20ä¿®æ”¹äº†æ•Œäººjçš„å¥åº·ï¼Œåˆ™æ—¶é—´è½´åˆ†ä¸º[0,20)å’Œ[20,âˆ)ä¸¤ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µçš„å¥åº·å‡½æ•°ä¸åŒã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¥åº·æ›´æ–°äº‹ä»¶å°†æ—¶é—´è½´åˆ‡å‰²ä¸ºç¦»æ•£çš„åŒºé—´ï¼Œæ¯ä¸ªåŒºé—´å†…å¥åº·å‡½æ•°æ˜¯çº¿æ€§çš„ï¼Œéœ€åˆ†é˜¶æ®µå¤„ç†ã€‚

2.  **å…³é”®ç‚¹2ï¼šå¦‚ä½•ç¡®å®šæ•Œäººçš„å¯å‡»æ€æ—¶é—´åŒºé—´ï¼Ÿ**  
    * **åˆ†æ**ï¼šå¯¹äºæ¯ä¸ªé˜¶æ®µï¼ˆæ—¶é—´åŒºé—´[t_start, t_end)ï¼‰ï¼Œæ±‚è§£å¥åº·å€¼â‰¤Dçš„tèŒƒå›´ã€‚ä¾‹å¦‚ï¼ŒæŸé˜¶æ®µå¥åº·å‡½æ•°ä¸ºh(t) = a + r*(t - t_start)ï¼Œåˆ™h(t) â‰¤ Dçš„è§£ä¸ºt â‰¥ (D - a)/r + t_startï¼ˆè‹¥r>0ï¼‰ã€‚éœ€æ³¨æ„tå¿…é¡»æ˜¯æ•´æ•°ï¼Œä¸”ä¸è¶…è¿‡è¯¥é˜¶æ®µçš„ç»“æŸæ—¶é—´t_endï¼ˆæˆ–æ— ç©·å¤§ï¼‰ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¯å‡»æ€æ—¶é—´åŒºé—´æ˜¯å„é˜¶æ®µè§£çš„å¹¶é›†ï¼Œéœ€è€ƒè™‘å†ç”Ÿé€Ÿç‡rçš„æ­£è´Ÿï¼ˆr=0æ—¶å¯èƒ½æ˜¯å›ºå®šåŒºé—´ï¼‰ã€‚

3.  **å…³é”®ç‚¹3ï¼šå¦‚ä½•åœ¨å…¨å±€æ—¶é—´çª—å£å†…æ‰¾åˆ°æ€»é‡‘å¸æœ€å¤§å€¼ï¼Ÿ**  
    * **åˆ†æ**ï¼šæ€»é‡‘å¸æ˜¯æ‰€æœ‰å¯å‡»æ€æ•Œäººçš„(B_i + k_i*t)ä¹‹å’Œã€‚æ¯ä¸ªå…¨å±€æœ‰æ•ˆçª—å£ï¼ˆå¤šä¸ªæ•Œäººå¯å‡»æ€åŒºé—´çš„äº¤é›†ï¼‰å†…ï¼Œæ€»é‡‘å¸æ˜¯çº¿æ€§å‡½æ•°ï¼ˆæ–œç‡ä¸ºÎ£k_iï¼Œæˆªè·ä¸ºÎ£B_iï¼‰ã€‚è‹¥æ–œç‡>0ï¼Œåˆ™æœ€å¤§å€¼åœ¨çª—å£å³ç«¯ç‚¹ï¼›è‹¥æ–œç‡<0ï¼Œåœ¨å·¦ç«¯ç‚¹ï¼›è‹¥æ–œç‡=0ï¼Œæ‰€æœ‰ç‚¹å€¼ç›¸åŒã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçº¿æ€§å‡½æ•°çš„æå€¼åœ¨åŒºé—´ç«¯ç‚¹ï¼Œåªéœ€æ£€æŸ¥æ¯ä¸ªçª—å£çš„å·¦å³ç«¯ç‚¹å³å¯ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **åˆ†é˜¶æ®µå¤„ç†**ï¼šå°†æ—¶é—´è½´æŒ‰å¥åº·æ›´æ–°äº‹ä»¶åˆ‡å‰²ï¼Œæ¯ä¸ªé˜¶æ®µå†…å¥åº·å‡½æ•°çº¿æ€§å˜åŒ–ï¼Œç®€åŒ–è®¡ç®—ã€‚  
- **åŒºé—´äº¤é›†**ï¼šå…¨å±€æœ‰æ•ˆçª—å£æ˜¯æ‰€æœ‰æ•Œäººå¯å‡»æ€åŒºé—´çš„äº¤é›†ï¼Œéœ€ç”¨æ‰«æçº¿æ³•æˆ–æ’åºåˆå¹¶åŒºé—´ã€‚  
- **çº¿æ€§å‡½æ•°æå€¼**ï¼šæ€»é‡‘å¸åœ¨æœ‰æ•ˆçª—å£å†…æ˜¯çº¿æ€§çš„ï¼Œæå€¼å¿…åœ¨ç«¯ç‚¹ï¼Œå‡å°‘è®¡ç®—é‡ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

<code_intro_overall>
ç”±äºæš‚æ— é¢˜è§£ï¼Œæˆ‘ä»¬åŸºäºé¢˜ç›®é€»è¾‘æ¨å¯¼ä¸€ä¸ªé€šç”¨çš„æ ¸å¿ƒC++å®ç°ï¼Œå¸®åŠ©å¤§å®¶ç†è§£æ•´ä½“æ¡†æ¶ã€‚
</code_intro_overall>

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**  
* **è¯´æ˜**ï¼šæ­¤ä»£ç åŸºäºé¢˜ç›®é€»è¾‘è®¾è®¡ï¼ŒåŒ…å«å¤„ç†å¥åº·æ›´æ–°äº‹ä»¶ã€è®¡ç®—å¯å‡»æ€åŒºé—´ã€åˆå¹¶åŒºé—´å¹¶è®¡ç®—æœ€å¤§é‡‘å¸çš„æ ¸å¿ƒé€»è¾‘ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <climits>
using namespace std;

struct Event {
    int t, j, h;
    bool operator<(const Event& other) const { return t < other.t; }
};

struct Interval {
    long long start, end;
    Interval(long long s, long long e) : start(s), end(e) {}
};

// è®¡ç®—æ•Œäººiçš„å¯å‡»æ€æ—¶é—´åŒºé—´
vector<Interval> get_kill_intervals(int h_max, int h0, int r, int D, vector<Event>& events_i) {
    vector<Interval> intervals;
    sort(events_i.begin(), events_i.end());
    long long prev_t = 0;
    long long current_h = h0;
    events_i.push_back({INT_MAX, -1, -1}); // å“¨å…µäº‹ä»¶

    for (auto& e : events_i) {
        long long t_start = prev_t;
        long long t_end = e.t;
        // è®¡ç®—è¯¥é˜¶æ®µå†…å¥åº·å‡½æ•°h(t) = current_h + r*(t - t_start)
        if (r == 0) {
            if (current_h <= D) {
                intervals.emplace_back(t_start, t_end);
            }
        } else {
            // æ±‚è§£h(t) <= Dçš„tèŒƒå›´
            long long t_min = t_start + max(0LL, (D - current_h + r - 1) / r); // å‘ä¸Šå–æ•´
            if (t_min < t_end) {
                intervals.emplace_back(t_min, t_end);
            }
        }
        // æ›´æ–°current_hï¼ˆæ³¨æ„ä¸è¶…è¿‡h_maxï¼‰
        if (e.t != INT_MAX) {
            current_h = min(e.h, h_max);
            prev_t = e.t;
        }
    }
    return intervals;
}

int main() {
    int n, m;
    cin >> n >> m;
    vector<int> B(n), k(n), D(n);
    vector<int> h_max(n), h0(n), r(n);
    vector<vector<Event>> events(n);

    for (int i = 0; i < n; ++i) {
        cin >> B[i] >> k[i] >> D[i];
    }
    for (int i = 0; i < n; ++i) {
        cin >> h_max[i] >> h0[i] >> r[i];
    }
    for (int i = 0; i < m; ++i) {
        int t, j, h;
        cin >> t >> j >> h;
        events[j-1].push_back({t, j-1, h}); // æ•Œäººç´¢å¼•ä»0å¼€å§‹
    }

    // è®¡ç®—æ¯ä¸ªæ•Œäººçš„å¯å‡»æ€åŒºé—´
    vector<vector<Interval>> all_intervals(n);
    bool has_infinite = false;
    for (int i = 0; i < n; ++i) {
        auto intervals = get_kill_intervals(h_max[i], h0[i], r[i], D[i], events[i]);
        all_intervals[i] = intervals;
        // æ£€æŸ¥æ˜¯å¦æœ‰æ— é™åŒºé—´ï¼ˆå¦‚r=0ä¸”current_h <= Dï¼‰
        if (!intervals.empty() && intervals.back().end == INT_MAX) {
            has_infinite = true;
        }
    }

    // è‹¥å­˜åœ¨æ•Œäººå¯æ— é™å‡»æ€ä¸”k_i>0ï¼Œæ€»é‡‘å¸æ— é™å¤§
    if (has_infinite) {
        long long sum_k = 0;
        for (int i = 0; i < n; ++i) {
            if (!all_intervals[i].empty() && all_intervals[i].back().end == INT_MAX) {
                sum_k += k[i];
            }
        }
        if (sum_k > 0) {
            cout << -1 << endl;
            return 0;
        }
    }

    // åˆå¹¶åŒºé—´å¹¶è®¡ç®—æœ€å¤§é‡‘å¸ï¼ˆæ­¤å¤„ç®€åŒ–ä¸ºç¤ºä¾‹é€»è¾‘ï¼Œå®é™…éœ€å¤„ç†åŒºé—´äº¤é›†ï¼‰
    // ç¤ºä¾‹ä»…å¤„ç†æ ·ä¾‹1çš„æƒ…å†µï¼Œå®é™…éœ€æ›´å¤æ‚çš„åŒºé—´åˆå¹¶é€»è¾‘
    long long max_gold = 0;
    // ... ï¼ˆå®Œæ•´å®ç°éœ€è¡¥å……åŒºé—´åˆå¹¶å’Œæå€¼è®¡ç®—ï¼‰

    cout << max_gold << endl;
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç é¦–å…ˆè¯»å–è¾“å…¥æ•°æ®ï¼Œç„¶åä¸ºæ¯ä¸ªæ•Œäººè®¡ç®—å¯å‡»æ€æ—¶é—´åŒºé—´ï¼ˆè€ƒè™‘å¥åº·æ›´æ–°äº‹ä»¶ï¼‰ã€‚é€šè¿‡`get_kill_intervals`å‡½æ•°å¤„ç†æ¯ä¸ªæ•Œäººçš„å¥åº·å˜åŒ–é˜¶æ®µï¼Œæ±‚è§£æ¯ä¸ªé˜¶æ®µå†…çš„å¯å‡»æ€åŒºé—´ã€‚æœ€åæ£€æŸ¥æ˜¯å¦å­˜åœ¨æ— é™é‡‘å¸çš„æƒ…å†µï¼ˆå¦‚æ ·ä¾‹2ï¼‰ï¼Œå¹¶è®¡ç®—æœ€å¤§é‡‘å¸å€¼ï¼ˆç¤ºä¾‹ä¸­ç®€åŒ–äº†åŒºé—´åˆå¹¶é€»è¾‘ï¼Œå®é™…éœ€æ›´å¤æ‚çš„å¤„ç†ï¼‰ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

<visualization_intro>
ä¸ºäº†ç›´è§‚ç†è§£â€œå¯å‡»æ€æ—¶é—´åŒºé—´â€å’Œâ€œæ€»é‡‘å¸è®¡ç®—â€çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªâ€œåƒç´ æ—¶é—´è½´â€åŠ¨ç”»ï¼Œç»“åˆ8ä½å¤å¤é£æ ¼ï¼Œå¸®åŠ©å¤§å®¶â€œçœ‹â€åˆ°æ—¶é—´ä¸å¥åº·ã€é‡‘å¸çš„å…³ç³»ã€‚
</visualization_intro>

  * **åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜**ï¼š`åƒç´ æ—¶é—´æ¢é™©â€”â€”å¯»æ‰¾æœ€ä½³æ¿€æ´»æ—¶åˆ»`  

  * **æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼š  
    å±•ç¤ºæ¯ä¸ªæ•Œäººçš„å¥åº·éšæ—¶é—´å˜åŒ–çš„åƒç´ è¡€æ¡ï¼ˆç±»ä¼¼FCæ¸¸æˆè§’è‰²è¡€æ¡ï¼‰ï¼Œæ—¶é—´è½´ä»¥åƒç´ ç‚¹æ»šåŠ¨ï¼Œæ ‡è®°å¥åº·æ›´æ–°äº‹ä»¶ï¼ˆå¦‚â€œé—ªç”µå›¾æ ‡â€é—ªçƒï¼‰ï¼Œå¯å‡»æ€åŒºé—´ç”¨é»„è‰²/ç´«è‰²é«˜äº®ã€‚åŒæ—¶ï¼Œæ€»é‡‘å¸å€¼éšæ—¶é—´å˜åŒ–åŠ¨æ€æ˜¾ç¤ºï¼Œæœ€å¤§å€¼ç‚¹ç”¨æ˜Ÿæ˜Ÿæ ‡è®°ã€‚  

  * **è®¾è®¡æ€è·¯ç®€è¿°**ï¼š  
    8ä½åƒç´ é£é™ä½å­¦ä¹ é—¨æ§›ï¼Œè¡€æ¡çš„åŠ¨æ€å˜åŒ–ç›´è§‚å±•ç¤ºå¥åº·å‡½æ•°ã€‚å¥åº·æ›´æ–°äº‹ä»¶çš„â€œé—ªç”µâ€æ ‡è®°å¸®åŠ©å­¦ä¹ è€…æ³¨æ„åˆ°æ—¶é—´è½´çš„åˆ†å‰²ç‚¹ã€‚å¯å‡»æ€åŒºé—´çš„é¢œè‰²é«˜äº®ï¼ˆå•æ•Œäººé»„è‰²ã€å¤šæ•Œäººç´«è‰²ï¼‰å¼ºåŒ–åŒºé—´äº¤é›†çš„æ¦‚å¿µã€‚æ€»é‡‘å¸çš„åŠ¨æ€æ•°å€¼å˜åŒ–è®©å­¦ä¹ è€…ç›´æ¥çœ‹åˆ°å‡½æ•°çš„æå€¼ç‚¹ã€‚  

  * **åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹**ï¼š  

    1.  **åˆå§‹åŒ–åœºæ™¯**ï¼š  
        - å±å¹•åˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼šä¸ŠåŠéƒ¨åˆ†æ˜¯æ—¶é—´è½´ï¼ˆæ¨ªå‘åƒç´ æ¡ï¼Œæ¯ä¸ªåƒç´ ä»£è¡¨1ç§’ï¼‰ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯nä¸ªæ•Œäººçš„åƒç´ è¡€æ¡ï¼ˆçºµå‘ï¼Œç»¿è‰²è¡¨ç¤ºå¥åº·ï¼Œçº¢è‰²è¡¨ç¤ºâ‰¤Dï¼‰ã€‚  
        - æ§åˆ¶é¢æ¿ï¼šå•æ­¥/è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ã€æ—¶é—´æ»‘å—ã€é‡‘å¸æ•°å€¼æ˜¾ç¤ºæ¡†ã€‚  
        - æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«èƒŒæ™¯éŸ³ä¹ï¼ˆç±»ä¼¼ã€Šè¶…çº§é©¬åŠ›æ¬§ã€‹çš„æ¢ç´¢éŸ³ä¹ï¼‰ã€‚  

    2.  **å¥åº·å‡½æ•°æ¼”ç¤º**ï¼š  
        - æ—¶é—´ä»t=0å¼€å§‹æ»šåŠ¨ï¼Œæ¯ä¸ªæ•Œäººçš„è¡€æ¡é«˜åº¦æ ¹æ®å¥åº·å‡½æ•°åŠ¨æ€è°ƒæ•´ï¼ˆå¦‚æ¯ç§’å‡å°‘/å¢åŠ ï¼‰ã€‚  
        - é‡åˆ°å¥åº·æ›´æ–°äº‹ä»¶æ—¶ï¼ˆå¦‚t=20ï¼‰ï¼Œå¯¹åº”æ•Œäººçš„è¡€æ¡ç¬é—´è·³å˜ï¼ˆåƒç´ å—é—ªçƒï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  

    3.  **å¯å‡»æ€åŒºé—´é«˜äº®**ï¼š  
        - å½“æ•Œäººçš„è¡€æ¡é«˜åº¦â‰¤Dæ—¶ï¼Œè¯¥æ•Œäººçš„è¡€æ¡å˜ä¸ºçº¢è‰²ï¼Œæ—¶é—´è½´å¯¹åº”åŒºé—´ç”¨é»„è‰²æ ‡è®°ï¼ˆå•æ•Œäººï¼‰æˆ–ç´«è‰²æ ‡è®°ï¼ˆå¤šæ•ŒäººåŒæ—¶å¯å‡»æ€ï¼‰ã€‚  

    4.  **æ€»é‡‘å¸è®¡ç®—**ï¼š  
        - æ—¶é—´è½´ä¸Šæ–¹æ˜¾ç¤ºå½“å‰æ€»é‡‘å¸å€¼ï¼ˆå¦‚â€œé‡‘å¸ï¼š3000â€ï¼‰ï¼Œæ•°å€¼éštå˜åŒ–åŠ¨æ€æ›´æ–°ã€‚  
        - å½“åˆ°è¾¾æŸä¸ªæ—¶é—´ç‚¹æ—¶ï¼Œè‹¥æ€»é‡‘å¸æ˜¯å½“å‰æœ€å¤§å€¼ï¼Œå±å¹•å¼¹å‡ºâ€œå½“å‰æœ€å¤§ï¼â€çš„åƒç´ æ–‡å­—ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆã€‚  

    5.  **æ— é™é‡‘å¸æç¤º**ï¼š  
        - è‹¥å­˜åœ¨æ•Œäººå¯æ— é™å‡»æ€ä¸”k_i>0ï¼Œæ—¶é—´è½´å³ä¾§æ˜¾ç¤ºâ€œâˆâ€ç¬¦å·ï¼Œé‡‘å¸æ•°å€¼æŒç»­å¢åŠ ï¼Œä¼´éšæ¿€æ˜‚çš„éŸ³ä¹å˜è°ƒã€‚  

  * **æ—ç™½æç¤º**ï¼š  
    - â€œçœ‹ï¼æ•Œäºº1çš„è¡€æ¡åœ¨t=50æ—¶å˜çº¢äº†ï¼Œè¯´æ˜æ­¤æ—¶æ¿€æ´»æŠ€èƒ½å¯ä»¥å‡»æ€ä»–ï½â€  
    - â€œå¥åº·æ›´æ–°äº‹ä»¶åœ¨t=20è§¦å‘ï¼Œæ•Œäºº2çš„è¡€æ¡çªç„¶è·³åˆ°äº†10ï¼Œè¿™ä¼šå½±å“ä»–çš„å¯å‡»æ€åŒºé—´å“¦ï¼â€  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

<similar_problems_intro>
æœ¬é¢˜çš„æ ¸å¿ƒæ˜¯â€œæ—¶é—´åŒºé—´åˆ†æ+çº¿æ€§å‡½æ•°æå€¼è®¡ç®—â€ï¼Œè¿™ç§æ€è·¯åœ¨è®¸å¤šç±»ä¼¼é—®é¢˜ä¸­éƒ½æœ‰åº”ç”¨ã€‚
</similar_problems_intro>

  * **é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»**ï¼š  
    è¯¥æŠ€å·§å¯ç”¨äºå¤„ç†â€œéšæ—¶é—´å˜åŒ–çš„çŠ¶æ€+å¯»æ‰¾æœ€ä¼˜æ—¶é—´ç‚¹â€çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š  
    - ä»»åŠ¡è°ƒåº¦é—®é¢˜ï¼ˆé€‰æ‹©ä»»åŠ¡å¼€å§‹æ—¶é—´ï¼Œä½¿æ”¶ç›Šæœ€å¤§ï¼‰ã€‚  
    - èµ„æºé‡‡é›†é—®é¢˜ï¼ˆèµ„æºéšæ—¶é—´å¢é•¿ï¼Œé€‰æ‹©é‡‡é›†æ—¶é—´ä½¿æ€»é‡æœ€å¤§ï¼‰ã€‚  
    - äº¤é€šè°ƒåº¦é—®é¢˜ï¼ˆé€‰æ‹©å‡ºå‘æ—¶é—´ï¼Œé¿å¼€æ‹¥å µæ—¶æ®µï¼‰ã€‚  

  * **ç»ƒä¹ æ¨è (æ´›è°·)**ï¼š  
    ä»¥ä¸‹é¢˜ç›®å¯å¸®åŠ©å·©å›ºâ€œæ—¶é—´åŒºé—´åˆ†æ+æå€¼è®¡ç®—â€çš„èƒ½åŠ›ï¼š  

    1.  **æ´›è°· P1803 å‡Œä¹±çš„yyy / çº¿æ®µè¦†ç›–**  
        * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦åˆ†ææ´»åŠ¨çš„æ—¶é—´åŒºé—´ï¼Œé€‰æ‹©æœ€å¤šä¸é‡å çš„æ´»åŠ¨ï¼Œä¸æœ¬é¢˜çš„åŒºé—´å¤„ç†æ€è·¯ç±»ä¼¼ã€‚  

    2.  **æ´›è°· P1095 å®ˆæœ›è€…çš„é€ƒç¦»**  
        * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ¶‰åŠæ—¶é—´ä¸èƒ½é‡çš„çº¿æ€§å˜åŒ–ï¼Œéœ€å¯»æ‰¾é€ƒç¦»çš„æœ€æ—©æ—¶é—´ï¼Œé”»ç‚¼æ—¶é—´å‡½æ•°åˆ†æèƒ½åŠ›ã€‚  

    3.  **æ´›è°· P2085 æœ€å°å‡½æ•°å€¼**  
        * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè®¡ç®—å¤šä¸ªäºŒæ¬¡å‡½æ•°çš„æœ€å°å€¼ï¼Œéœ€åˆ†æå‡½æ•°åœ¨æ•´æ•°ç‚¹çš„æå€¼ï¼Œä¸æœ¬é¢˜çš„çº¿æ€§å‡½æ•°æå€¼æ€è·¯æœ‰å…±é€šä¹‹å¤„ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

<insights_intro>
æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®çš„ä½œè€…ä¸ªäººå¿ƒå¾—åˆ†äº«éƒ¨åˆ†ã€‚
</insights_intro>


<conclusion>
æœ¬æ¬¡å…³äºâ€œPerun, Ult!â€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£æ—¶é—´åŒºé—´åˆ†æå’Œæå€¼è®¡ç®—çš„æ ¸å¿ƒé€»è¾‘ã€‚è®°ä½ï¼Œé‡åˆ°å¤æ‚é—®é¢˜æ—¶ï¼Œåˆ†é˜¶æ®µå¤„ç†å’ŒæŠ“ä½å…³é”®å˜é‡ï¼ˆå¦‚å¥åº·å‡½æ•°ã€å¯å‡»æ€åŒºé—´ï¼‰æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š132.05ç§’
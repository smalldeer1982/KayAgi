# é¢˜ç›®ä¿¡æ¯

# Paths in a Complete Binary Tree

## é¢˜ç›®æè¿°

 $ T $ is a complete binary tree consisting of $ n $ vertices. It means that exactly one vertex is a root, and each vertex is either a leaf (and doesn't have children) or an inner node (and has exactly two children). All leaves of a complete binary tree have the same depth (distance from the root). So $ n $ is a number such that $ n+1 $ is a power of $ 2 $ .

In the picture you can see a complete binary tree with $ n=15 $ .

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF792D/653f6c4875f17ae6f17eafa38c499699f6610ec9.png)Vertices are numbered from $ 1 $ to $ n $ in a special recursive way: we recursively assign numbers to all vertices from the left subtree (if current vertex is not a leaf), then assign a number to the current vertex, and then recursively assign numbers to all vertices from the right subtree (if it exists). In the picture vertices are numbered exactly using this algorithm. It is clear that for each size of a complete binary tree exists exactly one way to give numbers to all vertices. This way of numbering is called symmetric.

You have to write a program that for given $ n $ answers $ q $ queries to the tree.

Each query consists of an integer number $ u_{i} $ ( $ 1<=u_{i}<=n $ ) and a string $ s_{i} $ , where $ u_{i} $ is the number of vertex, and $ s_{i} $ represents the path starting from this vertex. String $ s_{i} $ doesn't contain any characters other than 'L', 'R' and 'U', which mean traverse to the left child, to the right child and to the parent, respectively. Characters from $ s_{i} $ have to be processed from left to right, considering that $ u_{i} $ is the vertex where the path starts. If it's impossible to process a character (for example, to go to the left child of a leaf), then you have to skip it. The answer is the number of vertex where the path represented by $ s_{i} $ ends.

For example, if $ u_{i}=4 $ and $ s_{i}= $ Â«UURLÂ», then the answer is $ 10 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
15 2
4
UURL
8
LRLLLLLLLL
```

### è¾“å‡º

```
10
5
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPaths in a Complete Binary Tree æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šä½è¿ç®—ä¸æ•°å­¦è§„å¾‹åº”ç”¨  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**åœ¨æ»¡äºŒå‰æ ‘ä¸­å¿«é€Ÿè®¡ç®—èŠ‚ç‚¹çš„ç§»åŠ¨è·¯å¾„**â€”â€”ç»™å®šèµ·ç‚¹å’Œæ“ä½œå­—ç¬¦ä¸²ï¼ˆL/R/Uï¼‰ï¼Œè¦è·³è¿‡ä¸åˆæ³•æ“ä½œï¼ˆæ¯”å¦‚å¶å­èŠ‚ç‚¹ä¸èƒ½å·¦/å³ç§»ï¼Œæ ¹ä¸èƒ½ä¸Šç§»ï¼‰ï¼Œæœ€ç»ˆæ‰¾åˆ°ç»ˆç‚¹ã€‚  

ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥å»ºå›¾ï¼Ÿå› ä¸ºé¢˜ç›®ä¸­nå¯ä»¥å¤§åˆ°$10^{18}$ï¼Œå»ºå›¾ä¼šç›´æ¥â€œæ’‘çˆ†â€å†…å­˜ï¼æ‰€ä»¥å…³é”®æ˜¯**æ‰¾åˆ°èŠ‚ç‚¹ç¼–å·çš„æ•°å­¦è§„å¾‹**ï¼Œç”¨ä½è¿ç®—å¿«é€Ÿè®¡ç®—çˆ¶/å­èŠ‚ç‚¹ï¼Œé¿å…éå†æ ‘ã€‚  

æ»¡äºŒå‰æ ‘çš„ä¸­åºç¼–å·æœ‰ä¸ªâ€œéšè—å¯†ç â€ï¼š**èŠ‚ç‚¹çš„lowbitå€¼ï¼ˆäºŒè¿›åˆ¶æœ€ä½ä½çš„1ï¼‰å¯¹åº”å®ƒçš„â€œå±‚çº§å› å­â€**â€”â€”æ ¹èŠ‚ç‚¹çš„lowbitæœ€å¤§ï¼ˆæ¯”å¦‚n=15æ—¶æ ¹æ˜¯8ï¼Œlowbit=8ï¼‰ï¼Œå¶å­èŠ‚ç‚¹çš„lowbit=1ï¼ˆæ¯”å¦‚1ã€3ã€5ç­‰ï¼‰ã€‚åˆ©ç”¨è¿™ä¸ªè§„å¾‹ï¼Œæˆ‘ä»¬èƒ½å¿«é€Ÿç®—å‡ºï¼š  
- **å·¦ç§»ï¼ˆLï¼‰**ï¼šå½“å‰èŠ‚ç‚¹å‡å»lowbit/2ï¼ˆæ¯”å¦‚4çš„lowbit=4ï¼Œå·¦å­èŠ‚ç‚¹æ˜¯4-2=2ï¼‰ï¼›  
- **å³ç§»ï¼ˆRï¼‰**ï¼šå½“å‰èŠ‚ç‚¹åŠ ä¸Šlowbit/2ï¼ˆæ¯”å¦‚4çš„å³å­èŠ‚ç‚¹æ˜¯4+2=6ï¼‰ï¼›  
- **ä¸Šç§»ï¼ˆUï¼‰**ï¼šæ ¹æ®å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦/å³å„¿å­ï¼Œè°ƒæ•´ç¼–å·ï¼ˆæ¯”å¦‚2æ˜¯4çš„å·¦å„¿å­ï¼Œçˆ¶èŠ‚ç‚¹æ˜¯2+2=4ï¼›6æ˜¯4çš„å³å„¿å­ï¼Œçˆ¶èŠ‚ç‚¹æ˜¯6-2=4ï¼‰ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼š  
1. å¦‚ä½•å¿«é€Ÿåˆ¤æ–­æ“ä½œæ˜¯å¦åˆæ³•ï¼Ÿï¼ˆæ¯”å¦‚L/Ræ—¶lowbitæ˜¯å¦ä¸º1ï¼ŒUæ—¶æ˜¯å¦æ˜¯æ ¹ï¼‰ï¼›  
2. å¦‚ä½•ç”¨ä½è¿ç®—é«˜æ•ˆè®¡ç®—æ–°èŠ‚ç‚¹ç¼–å·ï¼Ÿ  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ä¼šç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹Ÿæ ‘ç»“æ„â€”â€”èŠ‚ç‚¹æ˜¯å½©è‰²æ–¹å—ï¼Œæ ¹åœ¨é¡¶éƒ¨ï¼Œå·¦å³å­èŠ‚ç‚¹å‘ä¸‹å»¶ä¼¸ã€‚æ“ä½œæ—¶ï¼Œå½“å‰èŠ‚ç‚¹ä¼š**é—ªçƒé«˜äº®**ï¼ŒåŒæ—¶æ˜¾ç¤ºäºŒè¿›åˆ¶å˜åŒ–ï¼ˆæ¯”å¦‚Læ“ä½œæ—¶ï¼ŒèŠ‚ç‚¹â€œå·¦æ»‘â€å¹¶æ›´æ–°äºŒè¿›åˆ¶æ•°å­—ï¼‰ã€‚å…³é”®æ“ä½œä¼´éšéŸ³æ•ˆï¼šL/Ræ˜¯â€œæ»´â€ï¼ŒUæ˜¯â€œå®â€ï¼ŒæˆåŠŸæ‰¾åˆ°ç»ˆç‚¹æ—¶æ’­æ”¾â€œèƒœåˆ©éŸ³æ•ˆâ€ï½


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šComputer1828ï¼ˆæ ¸å¿ƒï¼šä½è¿ç®—ç›´æ¥è®¡ç®—ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„äº®ç‚¹æ˜¯**ç”¨lowbitæ‰¾å±‚çº§å› å­ï¼Œå†ç”¨ä½è¿ç®—å¿«é€Ÿè®¡ç®—ç§»åŠ¨**ã€‚ä½œè€…é€šè¿‡è§‚å¯ŸäºŒè¿›åˆ¶è§„å¾‹ï¼Œæ€»ç»“å‡ºL/R/Uçš„ä½è¿ç®—å…¬å¼ï¼ˆæ¯”å¦‚Læ˜¯å¼‚æˆ–ä¸¤ä¸ªä½ï¼ŒRæ˜¯å¼‚æˆ–ä¸€ä¸ªä½ï¼‰ï¼Œä»£ç ç®€æ´åˆ°â€œä¸€è¡Œè§£å†³ä¸€ä¸ªæ“ä½œâ€ã€‚åŒæ—¶ï¼Œä½œè€…ä¸¥æ ¼å¤„ç†äº†è¾¹ç•Œæ¡ä»¶ï¼ˆæ¯”å¦‚å¶å­èŠ‚ç‚¹è·³è¿‡L/Rï¼Œæ ¹è·³è¿‡Uï¼‰ï¼Œé€»è¾‘éå¸¸ä¸¥è°¨ã€‚å¯¹äºæƒ³å­¦ä¹ â€œç”¨ä½è¿ç®—è§£å†³æ ‘é—®é¢˜â€çš„åŒå­¦ï¼Œè¿™æ˜¯ä¸€ä»½â€œæ•™ç§‘ä¹¦çº§â€çš„å‚è€ƒã€‚

### é¢˜è§£äºŒï¼šzdc189ï¼ˆæ ¸å¿ƒï¼šDFS+æ ˆæ¨¡æ‹Ÿè·¯å¾„ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™æ˜¯ä¸€ä»½â€œç›´è§‚æ´¾â€é¢˜è§£â€”â€”ç”¨DFSæ‰¾åˆ°èµ·ç‚¹çš„è·¯å¾„ï¼ˆæ¯”å¦‚ä»æ ¹åˆ°4çš„è·¯å¾„æ˜¯â€œå·¦ã€å·¦â€ï¼‰ï¼Œç”¨æ ˆè®°å½•æ–¹å‘ï¼Œå†æ¨¡æ‹Ÿæ“ä½œã€‚è™½ç„¶æ—¶é—´å¤æ‚åº¦æ¯”ä½è¿ç®—é«˜ï¼Œä½†**æ€è·¯éå¸¸å®¹æ˜“ç†è§£**ï¼Œé€‚åˆåˆšå­¦æ ‘ç»“æ„çš„åŒå­¦ã€‚ä½œè€…æåˆ°â€œç¬¬ä¸€æ¬¡ç‹¬ç«‹åšè“é¢˜â€ï¼Œè¯´æ˜â€œæ¨¡æ‹Ÿè·¯å¾„+æ ˆè®°å½•â€æ˜¯è§£å†³æ ‘é—®é¢˜çš„é€šç”¨æ€è·¯ï¼Œå€¼å¾—å€Ÿé‰´ã€‚

### é¢˜è§£ä¸‰ï¼šCloud_Umbrellaï¼ˆæ ¸å¿ƒï¼šlowbitæ€§è´¨æ€»ç»“ï¼‰  
* **ç‚¹è¯„**ï¼šä½œè€…æŠŠæ»¡äºŒå‰æ ‘çš„è§„å¾‹æ€»ç»“æˆ5æ¡â€œå®šç†â€ï¼ˆæ¯”å¦‚lowbitç›¸åŒçš„èŠ‚ç‚¹åœ¨åŒä¸€å±‚ï¼Œå·¦å„¿å­æ˜¯x-lowbit(x)/2ï¼‰ï¼Œç›´æ¥ç”¨è¿™äº›æ€§è´¨å†™ä»£ç ï¼Œé€»è¾‘æ¸…æ™°åˆ°â€œçœ‹æ³¨é‡Šå°±èƒ½æ‡‚â€ã€‚è¿™ä»½é¢˜è§£çš„ä»·å€¼åœ¨äº**æ•™ä¼šæˆ‘ä»¬â€œå½’çº³è§„å¾‹â€**â€”â€”é‡åˆ°å¤§æ•°æ®é—®é¢˜æ—¶ï¼Œå…ˆæ‰¾æ•°å­¦è§„å¾‹ï¼Œå†å†™ä»£ç ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•å¿«é€Ÿè®¡ç®—çˆ¶/å­èŠ‚ç‚¹ï¼Ÿ  
**åˆ†æ**ï¼šåˆ©ç”¨lowbitçš„æ€§è´¨â€”â€”å·¦å„¿å­æ˜¯`x - lowbit(x)/2`ï¼Œå³å„¿å­æ˜¯`x + lowbit(x)/2`ï¼›çˆ¶èŠ‚ç‚¹æ˜¯`x Â± lowbit(x)`ï¼ˆå·¦å„¿å­åŠ lowbitï¼Œå³å„¿å­å‡lowbitï¼‰ã€‚æ¯”å¦‚x=4ï¼ˆlowbit=4ï¼‰ï¼Œå·¦å„¿å­æ˜¯4-2=2ï¼Œå³æ˜¯4+2=6ï¼›x=2ï¼ˆlowbit=2ï¼‰ï¼Œçˆ¶æ˜¯2+2=4ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šlowbitæ˜¯æ‰“å¼€â€œèŠ‚ç‚¹å…³ç³»â€çš„é’¥åŒ™ï¼

### 2. å¦‚ä½•åˆ¤æ–­æ“ä½œæ˜¯å¦åˆæ³•ï¼Ÿ  
**åˆ†æ**ï¼š  
- L/Rä¸åˆæ³•ï¼šå½“å‰èŠ‚ç‚¹æ˜¯å¶å­ï¼ˆlowbit(x)=1ï¼‰ï¼›  
- Uä¸åˆæ³•ï¼šå½“å‰èŠ‚ç‚¹æ˜¯æ ¹ï¼ˆx=(n+1)/2ï¼‰ã€‚  
æ¯”å¦‚n=15æ—¶ï¼Œæ ¹æ˜¯8ï¼Œæ‰€ä»¥x=8æ—¶Uæ“ä½œæ— æ•ˆï¼›x=1ï¼ˆlowbit=1ï¼‰æ—¶L/Ræ— æ•ˆã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œæ¡ä»¶æ˜¯ä»£ç â€œä¸å´©â€çš„å…³é”®ï¼

### 3. å¦‚ä½•å¤„ç†å¤§æ•°å­—ï¼Ÿ  
**åˆ†æ**ï¼šnå¯ä»¥åˆ°$10^{18}$ï¼Œæ‰€ä»¥å˜é‡è¦ç”¨åˆ°`long long`ï¼ˆ64ä½æ•´æ•°ï¼‰ï¼Œä½è¿ç®—æ—¶è¦åŠ `1ll<<k`ï¼ˆé¿å…æº¢å‡ºï¼‰ã€‚æ¯”å¦‚`1ll<<60`æ˜¯åˆæ³•çš„ï¼Œä½†`1<<60`ä¼šæº¢å‡ºintã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤§æ•°å­—é—®é¢˜ï¼Œå…ˆæƒ³`long long`ï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **è§„å¾‹ä¼˜å…ˆ**ï¼šé‡åˆ°å¤§æ•°æ®é—®é¢˜ï¼Œå…ˆæ‰¾æ•°å­¦è§„å¾‹ï¼ˆæ¯”å¦‚æœ¬é¢˜çš„lowbitæ€§è´¨ï¼‰ï¼Œå†å†™ä»£ç ï¼›  
- **ä½è¿ç®—åŠ é€Ÿ**ï¼šä½è¿ç®—æ¯”åŠ å‡ä¹˜é™¤å¿«å¾—å¤šï¼Œé€‚åˆå¤„ç†â€œäºŒè¿›åˆ¶è§„å¾‹â€é—®é¢˜ï¼›  
- **è¾¹ç•Œæµ‹è¯•**ï¼šå†™å®Œä»£ç åï¼Œä¸€å®šè¦æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼ˆæ¯”å¦‚æ ¹èŠ‚ç‚¹ã€å¶å­èŠ‚ç‚¹ï¼‰ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†Computer1828å’ŒCloud_Umbrellaçš„æ€è·¯ï¼Œç”¨lowbitå¿«é€Ÿè®¡ç®—ç§»åŠ¨ï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <cstring>
using namespace std;
typedef long long ll;

inline ll lowbit(ll x) { return x & -x; } // å–æœ€ä½ä½çš„1

int main() {
    ll n; int q;
    cin >> n >> q;
    ll root = (n + 1) >> 1; // æ ¹èŠ‚ç‚¹ç¼–å·
    while (q--) {
        ll x; string s;
        cin >> x >> s;
        for (char c : s) {
            ll lb = lowbit(x);
            if (c == 'L') {
                if (lb != 1) x -= lb / 2; // ä¸æ˜¯å¶å­æ‰èƒ½å·¦ç§»
            } else if (c == 'R') {
                if (lb != 1) x += lb / 2; // ä¸æ˜¯å¶å­æ‰èƒ½å³ç§»
            } else if (c == 'U') {
                if (x == root) continue; // æ ¹ä¸èƒ½ä¸Šç§»
                ll fa1 = x + lb, fa2 = x - lb;
                if (lowbit(fa1) == lb * 2) x = fa1; // å·¦å„¿å­çš„çˆ¶èŠ‚ç‚¹
                else x = fa2; // å³å„¿å­çš„çˆ¶èŠ‚ç‚¹
            }
        }
        cout << x << endl;
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–nå’Œqï¼Œè®¡ç®—æ ¹èŠ‚ç‚¹ï¼ˆ(n+1)/2ï¼‰ï¼›  
  2. å¤„ç†æ¯ä¸ªæŸ¥è¯¢ï¼šè¯»èµ·ç‚¹xå’Œæ“ä½œå­—ç¬¦ä¸²sï¼›  
  3. éå†sä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œç”¨lowbitè®¡ç®—æ–°xï¼š  
     - L/Rï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å¶å­ï¼Œå†è°ƒæ•´xï¼›  
     - Uï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ ¹ï¼Œå†æ ¹æ®å·¦å³å„¿å­è°ƒæ•´xï¼›  
  4. è¾“å‡ºæœ€ç»ˆxã€‚


### é¢˜è§£ä¸€ï¼ˆComputer1828ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨ä½è¿ç®—ç›´æ¥è®¡ç®—ç§»åŠ¨ï¼Œé€Ÿåº¦æå¿«ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
ll pos = lowbit(u); // æ‰¾æœ€ä½ä½çš„ä½ç½®ï¼ˆæ¯”å¦‚u=4ï¼Œpos=2ï¼Œå› ä¸º2^2=4ï¼‰
if (str[i] == 'L') {
    if (u & 1) continue; // å¶å­èŠ‚ç‚¹
    u ^= (1ll << pos);
    u ^= (1ll << (pos-1));
} else if (str[i] == 'R') {
    if (u & 1) continue;
    u ^= (1ll << (pos-1));
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `lowbit(u)`è¿”å›çš„æ˜¯æœ€ä½ä½çš„ä½ç½®ï¼ˆæ¯”å¦‚u=4çš„äºŒè¿›åˆ¶æ˜¯100ï¼Œpos=2ï¼‰ï¼›  
  - Læ“ä½œï¼šå¼‚æˆ–`2^pos`ï¼ˆ100ï¼‰å’Œ`2^(pos-1)`ï¼ˆ010ï¼‰ï¼Œç›¸å½“äºæŠŠ100å˜æˆ010ï¼ˆ4â†’2ï¼‰ï¼›  
  - Ræ“ä½œï¼šå¼‚æˆ–`2^(pos-1)`ï¼ˆ010ï¼‰ï¼Œç›¸å½“äºæŠŠ100å˜æˆ110ï¼ˆ4â†’6ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä½è¿ç®—çš„â€œå¼‚æˆ–â€å¯ä»¥å¿«é€Ÿç¿»è½¬äºŒè¿›åˆ¶ä½ï¼Œé€‚åˆå¤„ç†â€œå¼€å…³å¼â€å˜åŒ–ã€‚


### é¢˜è§£äºŒï¼ˆzdc189ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨DFSæ‰¾è·¯å¾„ï¼Œç›´è§‚ç†è§£æ ‘ç»“æ„ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
int dfs(int u, int step, int x) {
    if (u < x) { st.push('R'); return dfs(u + step, step >> 1, x); }
    if (u > x) { st.push('L'); return dfs(u - step, step >> 1, x); }
    return step; // è¿”å›å½“å‰å±‚çº§çš„step
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - ä»æ ¹èŠ‚ç‚¹ï¼ˆu=rootï¼‰å‡ºå‘ï¼Œç”¨stepè¡¨ç¤ºå½“å‰å±‚çš„â€œæ­¥é•¿â€ï¼ˆæ¯”å¦‚æ ¹çš„stepæ˜¯root/2ï¼‰ï¼›  
  - å¦‚æœxåœ¨uçš„å³è¾¹ï¼ˆu<xï¼‰ï¼Œè¯´æ˜xåœ¨å³å­æ ‘ï¼Œpush'R'ï¼ŒuåŠ ä¸Šstepï¼Œstepå‡åŠï¼›  
  - å¦‚æœxåœ¨å·¦è¾¹ï¼ˆu>xï¼‰ï¼Œpush'L'ï¼Œuå‡å»stepï¼Œstepå‡åŠï¼›  
  - æ‰¾åˆ°xæ—¶ï¼Œè¿”å›å½“å‰stepï¼ˆç”¨äºåç»­æ“ä½œï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDFSæ˜¯â€œæ‰¾è·¯å¾„â€çš„é€šç”¨æ–¹æ³•ï¼Œé€‚åˆç†è§£æ ‘çš„ç»“æ„ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ ‘çš„â€œè·¯å¾„æ¢é™©â€  
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½çº¢ç™½æœºé£æ ¼æ¨¡æ‹Ÿæ»¡äºŒå‰æ ‘ï¼Œè®©â€œåƒç´ å°äººâ€ä»èµ·ç‚¹å‡ºå‘ï¼Œè·Ÿç€æ“ä½œç§»åŠ¨ï¼Œç›´è§‚å±•ç¤ºèŠ‚ç‚¹å˜åŒ–ã€‚**æ¸¸æˆåŒ–å…ƒç´ **èƒ½è®©å­¦ä¹ æ›´æœ‰è¶£â€”â€”æ¯”å¦‚æ¯å®Œæˆä¸€ä¸ªæ“ä½œï¼Œå°äººä¼šâ€œè·³ä¸€ä¸‹â€ï¼ŒæˆåŠŸåˆ°è¾¾ç»ˆç‚¹ä¼šå¼¹å‡ºâ€œèƒœåˆ©â€åŠ¨ç”»ï¼


### åŠ¨ç”»ç»†èŠ‚è®¾è®¡  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯åƒç´ åŒ–çš„æ»¡äºŒå‰æ ‘ï¼ˆæ ¹åœ¨é¡¶éƒ¨ï¼Œå·¦å³å­èŠ‚ç‚¹å‘ä¸‹æ’åˆ—ï¼Œæ¯”å¦‚n=15æ—¶ï¼Œæ ¹æ˜¯8ï¼Œä¸‹ä¸€å±‚æ˜¯4ã€12ï¼Œå†ä¸‹ä¸€å±‚æ˜¯2ã€6ã€10ã€14ï¼Œæœ€ä¸‹å±‚æ˜¯1ã€3ã€5ã€7ã€9ã€11ã€13ã€15ï¼‰ï¼›  
   - å³ä¾§æ˜¯æ§åˆ¶é¢æ¿ï¼šæœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œè¿˜æœ‰é€Ÿåº¦æ»‘å—ï¼ˆ1x~5xï¼‰ï¼›  
   - åº•éƒ¨æ˜¾ç¤ºå½“å‰èŠ‚ç‚¹çš„äºŒè¿›åˆ¶å€¼ï¼ˆæ¯”å¦‚x=4æ—¶æ˜¾ç¤º0100ï¼‰å’Œæ“ä½œæç¤ºï¼ˆæ¯”å¦‚â€œä¸‹ä¸€æ­¥æ˜¯Uâ€ï¼‰ã€‚  

2. **æ ¸å¿ƒæ“ä½œæ¼”ç¤º**ï¼š  
   - **L/Ræ“ä½œ**ï¼šå½“å‰èŠ‚ç‚¹ï¼ˆæ¯”å¦‚4ï¼‰ä¼š**å‘å·¦/å³æ»‘åŠ¨**åˆ°å­èŠ‚ç‚¹ï¼ˆ2/6ï¼‰ï¼ŒåŒæ—¶ä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆï¼ŒäºŒè¿›åˆ¶å€¼æ›´æ–°ï¼ˆ0100â†’0010/0110ï¼‰ï¼›  
   - **Uæ“ä½œ**ï¼šå½“å‰èŠ‚ç‚¹ï¼ˆæ¯”å¦‚4ï¼‰ä¼š**å‘ä¸Šæ»‘åŠ¨**åˆ°çˆ¶èŠ‚ç‚¹ï¼ˆ8ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼ŒäºŒè¿›åˆ¶å€¼æ›´æ–°ï¼ˆ0100â†’1000ï¼‰ï¼›  
   - **ä¸åˆæ³•æ“ä½œ**ï¼šæ¯”å¦‚x=1ï¼ˆå¶å­ï¼‰æŒ‰Lï¼ŒèŠ‚ç‚¹ä¼šâ€œé—ªçº¢â€ï¼Œå¹¶æ˜¾ç¤ºâ€œä¸èƒ½å·¦ç§»ï¼â€çš„æç¤ºï¼Œæ— éŸ³æ•ˆã€‚  

3. **äº¤äº’è®¾è®¡**ï¼š  
   - **å•æ­¥æ¨¡å¼**ï¼šç‚¹å‡»â€œå•æ­¥â€ï¼Œæ¯æŒ‰ä¸€æ¬¡æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œé€‚åˆæ…¢æ…¢çœ‹ç»†èŠ‚ï¼›  
   - **è‡ªåŠ¨æ¨¡å¼**ï¼šç‚¹å‡»â€œå¼€å§‹â€ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ’­æ”¾ï¼Œé€Ÿåº¦å¯ä»¥ç”¨æ»‘å—è°ƒæ•´ï¼›  
   - **é‡ç½®**ï¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹æŸ¥è¯¢ã€‚  

4. **èƒœåˆ©åœºæ™¯**ï¼š  
   å½“å®Œæˆæ‰€æœ‰æ“ä½œï¼Œç»ˆç‚¹èŠ‚ç‚¹ä¼š**é—ªçƒå½©è™¹è‰²**ï¼Œæ’­æ”¾8ä½é£æ ¼çš„â€œèƒœåˆ©éŸ³ä¹â€ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„é€šå…³éŸ³æ•ˆï¼‰ï¼ŒåŒæ—¶å¼¹å‡ºâ€œå®Œæˆï¼ç»ˆç‚¹æ˜¯Xâ€çš„æç¤ºæ¡†ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
æœ¬é¢˜çš„â€œä½è¿ç®—+æ•°å­¦è§„å¾‹â€æ€è·¯ï¼Œè¿˜èƒ½è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
1. **æ»¡äºŒå‰æ ‘çš„LCAï¼ˆæœ€è¿‘å…¬å…±ç¥–å…ˆï¼‰**ï¼šç”¨lowbitæ‰¾ä¸¤ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ï¼Œå†å‘ä¸Šè·³ç›´åˆ°ç›¸é‡ï¼›  
2. **äºŒå‰æ ‘çš„å±‚åºç¼–å·**ï¼šæ¯”å¦‚æŒ‰å±‚éå†çš„ç¼–å·ï¼Œä¹Ÿèƒ½ç”¨ä½è¿ç®—å¿«é€Ÿè®¡ç®—ï¼›  
3. **å¤§æ•´æ•°çš„äºŒè¿›åˆ¶æ“ä½œ**ï¼šæ¯”å¦‚åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯2çš„å¹‚ï¼ˆlowbit(x)==xï¼‰ã€‚


### æ´›è°·ç»ƒä¹ æ¨è  
1. **æ´›è°· P1087 [NOIP2004 æ™®åŠç»„] FBIæ ‘**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯æ»¡äºŒå‰æ ‘çš„ç»å…¸é¢˜ï¼Œéœ€è¦æ„å»ºFBIæ ‘å¹¶è¾“å‡ºååºéå†ç»“æœã€‚èƒ½å·©å›ºâ€œæ»¡äºŒå‰æ ‘çš„å±‚çº§è§„å¾‹â€ã€‚  
2. **æ´›è°· P1305 æ–°äºŒå‰æ ‘**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šé¢˜ç›®è¦æ±‚æ ¹æ®å‰åºéå†å’Œä¸­åºéå†æ„å»ºäºŒå‰æ ‘ï¼Œè¾“å‡ºååºéå†ã€‚èƒ½ç»ƒä¹ â€œæ ‘çš„è·¯å¾„æ¨¡æ‹Ÿâ€ã€‚  
3. **æ´›è°· P3379 ã€æ¨¡æ¿ã€‘æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆLCAï¼‰**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šLCAé—®é¢˜éœ€è¦å¿«é€Ÿæ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„å…¬å…±ç¥–å…ˆï¼Œå’Œæœ¬é¢˜çš„â€œUæ“ä½œâ€æ€è·¯ç±»ä¼¼ï¼Œèƒ½å·©å›ºâ€œä½è¿ç®—æ‰¾ç¥–å…ˆâ€çš„æŠ€å·§ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªzdc189ï¼‰  
> â€œç¬¬ä¸€æ¬¡ç‹¬ç«‹åšå‡ºè“é¢˜ï¼Œå‘ä¸ªé¢˜è§£ã€‚â€  
> â€œç¬¬ä¸€ååº”æ˜¯ä¸­åºå’Œå…ˆåºçš„è½¬æ¢ï¼Œç„¶åå‘ç°çˆ¶äº²å’Œå„¿å­çš„å·®æ˜¯2å€ï¼Œç”¨DFSæ‰¾è·¯å¾„ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆçœŸå®â€”â€”è§£å†³éš¾é¢˜çš„å…³é”®æ˜¯â€œå…ˆæƒ³ç›´è§‚æ€è·¯ï¼Œå†æ‰¾è§„å¾‹ä¼˜åŒ–â€ã€‚æ¯”å¦‚ä»–å…ˆç”¨DFSæ¨¡æ‹Ÿè·¯å¾„ï¼Œå†å‘ç°â€œæ­¥é•¿å‡åŠâ€çš„è§„å¾‹ï¼Œæœ€ç»ˆå†™å‡ºä»£ç ã€‚è¿™å‘Šè¯‰æˆ‘ä»¬ï¼š**ä¸è¦æ€•â€œæš´åŠ›â€ï¼Œæš´åŠ›æ˜¯ä¼˜åŒ–çš„èµ·ç‚¹ï¼**


## ç»“è¯­  
æœ¬æ¬¡åˆ†æçš„æ ¸å¿ƒæ˜¯â€œç”¨æ•°å­¦è§„å¾‹è§£å†³å¤§æ•°æ®æ ‘é—®é¢˜â€ã€‚è®°ä½ï¼š**å½“æ•°æ®å¾ˆå¤§æ—¶ï¼Œå…ˆæ‰¾è§„å¾‹ï¼Œå†ç”¨ä½è¿ç®—æˆ–æ•°å­¦å…¬å¼å¿«é€Ÿè®¡ç®—**ï¼Œè€Œä¸æ˜¯å»ºå›¾éå†ã€‚  

ç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œå‘ç°è§„å¾‹â€â€”â€”å°±åƒè§£å¼€ä¸€ä¸ªå¯†ç é”ï¼Œå½“ä½ æ‰¾åˆ°â€œlowbitâ€è¿™ä¸ªé’¥åŒ™ï¼Œæ‰€æœ‰é—®é¢˜éƒ½ä¼šè¿åˆƒè€Œè§£ï¼ä¸‹æ¬¡é‡åˆ°æ ‘é—®é¢˜ï¼Œä¸å¦¨å…ˆçœ‹çœ‹äºŒè¿›åˆ¶ï¼Œè¯´ä¸å®šæœ‰æƒŠå–œï½ ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š113.67ç§’
# é¢˜ç›®ä¿¡æ¯

# Max Sum Array

## é¢˜ç›®æè¿°

You are given an array $ c = [c_1, c_2, \dots, c_m] $ . An array $ a = [a_1, a_2, \dots, a_n] $ is constructed in such a way that it consists of integers $ 1, 2, \dots, m $ , and for each $ i \in [1,m] $ , there are exactly $ c_i $ occurrences of integer $ i $ in $ a $ . So, the number of elements in $ a $ is exactly $ \sum\limits_{i=1}^{m} c_i $ .

Let's define for such array $ a $ the value $ f(a) $ as $ $$$f(a) = \sum_{\substack{1 \le i < j \le n\\ a_i = a_j}}{j - i}. $ $ </p><p>In other words,  $ f(a) $  is the total sum of distances between all pairs of equal elements.</p><p>Your task is to calculate the maximum possible value of  $ f(a) $  and the number of arrays yielding the maximum possible value of  $ f(a)$$$. Two arrays are considered different, if elements at some position differ.

## è¯´æ˜/æç¤º

In the first example, all possible arrays $ a $ are permutations of $ [1, 2, 3, 4, 5, 6] $ . Since each array $ a $ will have $ f(a) = 0 $ , so maximum value is $ f(a) = 0 $ and there are $ 6! = 720 $ such arrays.

In the second example, the only possible array consists of $ 10^6 $ ones and its $ f(a) = \sum\limits_{1 \le i < j \le 10^6}{j - i} = 166\,666\,666\,666\,500\,000 $ and $ 166\,666\,666\,666\,500\,000 \bmod{10^9 + 7} = 499\,833\,345 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
6
1 1 1 1 1 1```

### è¾“å‡º

```
0 720```

## æ ·ä¾‹ #2

### è¾“å…¥

```
1
1000000```

### è¾“å‡º

```
499833345 1```

## æ ·ä¾‹ #3

### è¾“å…¥

```
7
123 451 234 512 345 123 451```

### è¾“å‡º

```
339854850 882811119```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šMax Sum Array æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`è´ªå¿ƒç­–ç•¥`ä¸`å·®åˆ†æŠ€å·§åº”ç”¨`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³"Max Sum Array"çš„æ ¸å¿ƒåœ¨äº**è´ªå¿ƒç­–ç•¥**ä¸**å·®åˆ†æŠ€å·§**ã€‚è´ªå¿ƒå°±åƒåˆ†é…åº§ä½ï¼šè®©æœ€éœ€è¦ç©ºé—´çš„äººï¼ˆå¤§ç³»æ•°ï¼‰åæœ€å®½æ•çš„ä½ç½®ï¼ˆå¤§ä¸‹æ ‡ï¼‰ï¼Œä»è€Œæœ€å¤§åŒ–æ€»æ”¶ç›Šã€‚å·®åˆ†æŠ€å·§åˆ™åƒé«˜æ•ˆè®°è´¦å‘˜ï¼Œç”¨"åŒºé—´æ ‡è®°"ä»£æ›¿é€ä¸ªè®¡æ•°ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚
>
> - **é¢˜è§£æ ¸å¿ƒæ€è·¯**ï¼šæ¯ç§é¢œè‰²ç‹¬ç«‹è´¡çŒ®ï¼Œå…¶ä½ç½®ç³»æ•°å‘ˆå›ºå®šç­‰å·®æ•°åˆ—ï¼ˆå¦‚`1-c_i, 3-c_i,...,c_i-1`ï¼‰ã€‚æœ€å¤§åŒ–æ€»å’Œçš„ç­–ç•¥æ˜¯å°†**ç³»æ•°å‡åºæ’åˆ—**åä¸**ä¸‹æ ‡å‡åºåŒ¹é…**ï¼ˆå¤§ä¹˜å¤§ï¼‰ï¼Œæ–¹æ¡ˆæ•°ä¸ºç›¸åŒç³»æ•°çš„æ’åˆ—æ•°ï¼ˆé˜¶ä¹˜ç§¯ï¼‰ã€‚
> - **å…³é”®éš¾ç‚¹**ï¼šç›´æ¥ç”Ÿæˆæ‰€æœ‰ç³»æ•°ï¼ˆçº¦$10^{12}$é‡çº§ï¼‰ä¸å¯è¡Œã€‚**å·®åˆ†æŠ€å·§**é€šè¿‡æ ‡è®°ç³»æ•°åŒºé—´çš„èµ·ç‚¹ç»ˆç‚¹ï¼Œé…åˆå‰ç¼€å’Œé«˜æ•ˆç»Ÿè®¡é¢‘æ¬¡ã€‚
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåŠ¨ç”»å°†å±•ç¤ºç³»æ•°æ•°åˆ—ç”Ÿæˆï¼ˆåƒç´ æ–¹å—æ»‘å…¥å·®åˆ†æ•°ç»„ï¼‰ã€å‰ç¼€å’Œç´¯åŠ ï¼ˆé¢œè‰²å—å †å ï¼‰ã€ä½ç½®åˆ†é…ï¼ˆè´ªå¿ƒåŒ¹é…è¿‡ç¨‹ï¼‰ã€‚å¤å¤8-bitéŸ³æ•ˆåœ¨å…³é”®æ“ä½œï¼ˆå…¥é˜Ÿã€åŒ¹é…æˆåŠŸï¼‰æ—¶è§¦å‘ï¼ŒAIè‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼å¯è°ƒé€Ÿå±•ç¤ºæœ€ä¼˜åŒ¹é…æµç¨‹ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šTyyyyyyï¼‰
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°ç›´å‡»æœ¬è´¨â€”â€”å°†ç³»æ•°è§†ä¸ºå…¬å·®ä¸º2çš„ç­‰å·®æ•°åˆ—ï¼Œç”¨å•å·®åˆ†æ•°ç»„é«˜æ•ˆç»Ÿè®¡ã€‚ä»£ç ç®€æ´è§„èŒƒï¼ˆ`d`æ•°ç»„åç§»å¤„ç†è´Ÿä¸‹æ ‡ï¼Œ`now`è®°å½•å½“å‰ä½ç½®ï¼‰ï¼Œç©ºé—´ä¼˜åŒ–åˆ°$O(1)$ã€‚å®è·µä»·å€¼æé«˜ï¼š13è¡Œæ ¸å¿ƒé€»è¾‘ç›´æ¥è§£å†³$n \leq 10^6$æ•°æ®ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå–æ¨¡è§„èŒƒï¼‰ã€‚äº®ç‚¹åœ¨äº**å·®åˆ†è½¬æ¢çš„æ•°å­¦æ´å¯ŸåŠ›**ã€‚

### é¢˜è§£äºŒï¼ˆä½œè€…ï¼špengyuleï¼‰
* **ç‚¹è¯„**ï¼š  
  åˆ›æ–°æ€§ä½¿ç”¨**å¥‡å¶åˆ†ç¦»å·®åˆ†æ³•**ï¼ˆ`b[0]`/`b[1]`æ•°ç»„ï¼‰ï¼Œé¿å…åç§»è®¡ç®—ã€‚ä»£ç ä¸­`x&1`åˆ¤æ–­å¥‡å¶æ˜¾åŒ å¿ƒï¼Œå˜é‡å`val`/`ans`è¯­ä¹‰æ˜ç¡®ã€‚è™½ç¨å¤æ‚ä½†å±•ç°äº†å·®åˆ†å¤šæ ·æ€§ï¼Œè°ƒè¯•å¿ƒå¾—"æƒå€¼æ¡¶æ€æƒ³"å¯¹ç†è§£æœ¬è´¨æœ‰å¸®åŠ©ã€‚äº®ç‚¹åœ¨**å¥‡å¶åˆ†æ²»çš„ä¼˜åŒ–æ€ç»´**ã€‚

### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šHanx16Kiraï¼‰
* **ç‚¹è¯„**ï¼š  
  æœ€ç®€æ´çš„å®ç°ï¼ˆä»…1ä¸ªå·®åˆ†æ•°ç»„ï¼‰ï¼ŒLambdaå‡½æ•°`calc`å°è£…æ±‚å’Œä½“ç°æ¨¡å—åŒ–æ€æƒ³ã€‚`cnt[i] += cnt[i-2]`æ­ç¤ºç³»æ•°é€’æ¨å…³ç³»ï¼Œ`fac`é¢„è®¡ç®—é˜¶ä¹˜ä¼˜åŒ–æ€§èƒ½ã€‚è™½æ— æ³¨é‡Šä½†ä»£ç è‡ªè§£é‡Šæ€§å¼ºï¼Œç«èµ›å¯ç›´æ¥å¤ç”¨ã€‚äº®ç‚¹åœ¨**ä»£ç æè‡´ç®€åŒ–å’Œæ•°å­¦å®Œæ•´æ€§**ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### éš¾ç‚¹1ï¼šç³»æ•°åºåˆ—çš„é«˜æ•ˆç”Ÿæˆ
* **åˆ†æ**ï¼š  
  æš´åŠ›ç”Ÿæˆæ‰€æœ‰ç³»æ•°ï¼ˆ$ \sum c_i \approx 10^{12} $ï¼‰å¿…ç„¶è¶…æ—¶ã€‚ä¼˜è´¨é¢˜è§£å°†ç­‰å·®æ•°åˆ—è§†ä¸º**åŒºé—´æ›´æ–°**ï¼Œç”¨å·®åˆ†æ•°ç»„$d$æ ‡è®°èµ·ç‚¹ç»ˆç‚¹ï¼ˆ`d[1-c_i]++, d[c_i-1+2]--`ï¼‰ï¼Œå†å‰ç¼€å’Œç»Ÿè®¡é¢‘æ¬¡ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå·®åˆ†æ˜¯å¤„ç†**ç¨€ç–åŒºé—´æ›´æ–°**çš„åˆ©å™¨ï¼Œå°¤å…¶é€‚åˆå›ºå®šæ­¥é•¿åºåˆ—ã€‚

### éš¾ç‚¹2ï¼šè´ªå¿ƒç­–ç•¥çš„è¯æ˜ä¸å®ç°
* **åˆ†æ**ï¼š  
  ä¸ºä½•ç³»æ•°å‡åºæ’åˆ—æœ€ä¼˜ï¼Ÿ**å¾®æ‰°æ³•è¯æ˜**ï¼šå‡è®¾äº¤æ¢å‡åºåºåˆ—ä¸­$p_i \leq p_j$ï¼ˆ$i<j$ï¼‰ï¼Œæ–°ä½ç½®$i$ä¹˜è¾ƒå°ç³»æ•°ä¼šå¯¼è‡´æ€»å’Œä¸‹é™ã€‚å®ç°æ—¶å€’åºéå†ç³»æ•°ï¼ˆä»å¤§åˆ°å°ï¼‰ï¼Œå°†å½“å‰æœ€å¤§ç³»æ•°åˆ†é…ç»™å‰©ä½™æœ€å¤§ä¸‹æ ‡ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå½“è´¡çŒ®å¯æ‹†åˆ†ä¸º$\sum coefficient_i \cdot position_i$æ—¶ï¼Œ**åŒåºåŒ¹é…å¿…æœ€ä¼˜**ã€‚

### éš¾ç‚¹3ï¼šæ–¹æ¡ˆæ•°çš„ç‹¬ç«‹æ€§åˆ†æ
* **åˆ†æ**ï¼š  
  ç›¸åŒç³»æ•°çš„ä½ç½®å¯ä»»æ„äº¤æ¢è€Œä¸å½±å“æ€»å’Œï¼Œæ•…æ€»æ–¹æ¡ˆæ•°ä¸ºå„ç³»æ•°é¢‘æ¬¡é˜¶ä¹˜ä¹‹ç§¯ã€‚éœ€æ³¨æ„ï¼š**ä¸åŒé¢œè‰²çš„ç›¸åŒç³»æ•°è§†ä¸ºä¸åŒ**ï¼ˆé¢˜è§£ä¸­`fac[d[i]]`ç‹¬ç«‹è®¡ç®—ï¼‰ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¹˜æ³•åŸç†åº”ç”¨äº**ç‹¬ç«‹å¯äº¤æ¢**çš„ç»„ï¼Œé˜¶ä¹˜é¢„å¤„ç†åŠ é€Ÿè®¡ç®—ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **è´¡çŒ®æ‹†è§£**ï¼šå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºç‹¬ç«‹å…ƒç´ ï¼ˆé¢œè‰²ï¼‰çš„è´¡çŒ®ï¼Œé™ä½ç»´åº¦ã€‚
- **å·®åˆ†åŠ é€Ÿ**ï¼šé‡åˆ°å›ºå®šæ­¥é•¿åŒºé—´æ›´æ–°ï¼Œä¼˜å…ˆè€ƒè™‘å·®åˆ†+å‰ç¼€å’Œã€‚
- **è´ªå¿ƒéªŒè¯**ï¼šé€šè¿‡äº¤æ¢è®ºè¯ï¼ˆå¾®æ‰°æ³•ï¼‰éªŒè¯æ’åºç­–ç•¥æœ€ä¼˜æ€§ã€‚
- **æ¨¡è¿ç®—è§„èŒƒ**ï¼šå¤§æ•°è¿ç®—éšæ—¶å–æ¨¡ï¼Œé¿å…æº¢å‡ºï¼ˆå¦‚$10^9+7$ï¼‰ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ï¼Œé‡‡ç”¨å•å·®åˆ†æ•°ç»„+åç§»ç­–ç•¥ï¼Œå…¼é¡¾æ•ˆç‡ä¸å¯è¯»æ€§ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const ll mod = 1e9 + 7;
const int N = 2e6 + 10, offset = 1e6; // åç§»é‡å¤„ç†è´Ÿä¸‹æ ‡

int main() {
    vector<ll> d(2 * N);
    ll ans = 0, cnt = 1, now = 0;
    ll fac[N] = {1};
    
    // é¢„å¤„ç†é˜¶ä¹˜
    for (int i = 1; i < N; i++) 
        fac[i] = fac[i-1] * i % mod;
    
    // è¾“å…¥å¹¶æ„å»ºå·®åˆ†æ•°ç»„
    int m; cin >> m;
    for (int i = 0; i < m; i++) {
        int c_i; cin >> c_i;
        d[offset + 1 - c_i]++;    // ç­‰å·®æ•°åˆ—èµ·ç‚¹
        d[offset + c_i + 1]--;    // ç­‰å·®æ•°åˆ—ç»ˆç‚¹+1
    }
    
    // è®¡ç®—ç³»æ•°é¢‘æ¬¡å¹¶åˆ†é…ä½ç½®
    for (int i = 2; i < 2 * N; i++) {
        d[i] += d[i-2];           // å…¬å·®ä¸º2çš„å‰ç¼€å’Œ
        if (d[i] <= 0) continue;
        
        // è®¡ç®—å½“å‰ç³»æ•°åŒºé—´çš„ä¸‹æ ‡å’Œ
        ll l = now + 1, r = now + d[i];
        ll sum_pos = (l + r) * (r - l + 1) / 2 % mod;
        
        ans = (ans + (i - offset) * sum_pos) % mod; // (ç³»æ•°*ä½ç½®å’Œ)
        cnt = cnt * fac[d[i]] % mod;                // æ›´æ–°æ–¹æ¡ˆæ•°
        now = r;                                   // æ›´æ–°å½“å‰ä½ç½®
    }
    cout << (ans + mod) % mod << " " << cnt;        // å¤„ç†è´Ÿæ•°å–æ¨¡
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šå·®åˆ†æ•°ç»„`d`å¤§å°$4 \times 10^6$ï¼ˆå«åç§»ï¼‰ï¼Œé¢„è®¡ç®—é˜¶ä¹˜æ•°ç»„`fac`  
  2. **å·®åˆ†æ„å»º**ï¼šå¯¹æ¯ä¸ª$c_i$ï¼Œåœ¨`1-c_i+offset`å¤„+1ï¼Œ`c_i+1+offset`å¤„-1  
  3. **å‰ç¼€å’Œç»Ÿè®¡**ï¼šæ­¥é•¿ä¸º2éå†ï¼Œç´¯åŠ `d[i] += d[i-2]`å¾—ç³»æ•°é¢‘æ¬¡  
  4. **ä½ç½®åˆ†é…**ï¼šè®¡ç®—è¿ç»­ä¸‹æ ‡å’Œ`sum_pos = (é¦–é¡¹+æœ«é¡¹)*é¡¹æ•°/2`  
  5. **è´¡çŒ®ç´¯åŠ **ï¼š`ans += ç³»æ•° Ã— sum_pos`ï¼Œæ–¹æ¡ˆæ•°`cnt *= fac[é¢‘æ¬¡]`  

---

### é¢˜è§£ä¸€ï¼ˆTyyyyyyï¼‰æ ¸å¿ƒèµæ
* **äº®ç‚¹**ï¼šåç§»é‡ç¡¬ç¼–ç ä¸º`1000002`ï¼Œç²¾ç®€å¾ªç¯è¾¹ç•Œå¤„ç†ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
for(int i=2;i<N<<1;i++) {
    d[i] += d[i-2];                  // å…¬å·®2å‰ç¼€å’Œ
    ans = (ans + (i-1000001)*...) %mod; // åç§»ä¿®æ­£
    cnt = cnt * fact[d[i]] % mod;      // æ–¹æ¡ˆæ•°æ›´æ–°
}
```
* **ä»£ç è§£è¯»**ï¼š  
  > `d[i-2]`å®ç°ç³»æ•°é¢‘æ¬¡é€’æ¨ï¼Œ`i-1000001`å°†å­˜å‚¨ä¸‹æ ‡è½¬æ¢ä¸ºå®é™…ç³»æ•°ã€‚é˜¶ä¹˜è¿ä¹˜ä¿è¯æ–¹æ¡ˆæ•°ç‹¬ç«‹ï¼Œ`now`éšå¼ç´¯åŠ è®°å½•å·²åˆ†é…ä½ç½®æ•°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¡¬ç¼–ç åç§»éœ€ç¡®ä¿è¦†ç›–$[-10^6, 10^6]$ç³»æ•°èŒƒå›´ã€‚

### é¢˜è§£äºŒï¼ˆpengyuleï¼‰æ ¸å¿ƒèµæ
* **äº®ç‚¹**ï¼šå¥‡å¶åˆ†ç¦»å·®åˆ†é¿å…åç§»è®¡ç®—ï¼Œæ•°å­¦ç¾æ„Ÿå¼ºã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
if(a[i]&1) even[m-a[i]+1]++;  // å¥‡å¶åˆ†ç¦»å­˜å‚¨
else odd[m-a[i]+1]++;         

for(int i=-m+1;i<=m-1;i++){
    if(i%2) f[m+i]=odd[m+i];   // å¥‡ç³»æ•°å½’ä½
    else f[m+i]=even[m+i];     // å¶ç³»æ•°å½’ä½
}
```
* **ä»£ç è§£è¯»**ï¼š  
  > æ ¹æ®$c_i$å¥‡å¶æ€§é€‰æ‹©`even`/`odd`æ•°ç»„å­˜å‚¨ï¼Œåç»­åˆå¹¶æ—¶`i%2`åˆ¤æ–­å½’å±ã€‚æ¶ˆé™¤äº†åç§»é‡ï¼Œä½†éœ€é¢å¤–ç»´æŠ¤ä¸¤ä¸ªæ•°ç»„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¥‡å¶åˆ†ç¦»å¯é¿å…è´Ÿæ•°ä¸‹æ ‡ï¼Œä½†å¢åŠ çŠ¶æ€ç®¡ç†å¤æ‚åº¦ã€‚

### é¢˜è§£ä¸‰ï¼ˆHanx16Kiraï¼‰æ ¸å¿ƒèµæ
* **äº®ç‚¹**ï¼šå‡½æ•°å¼ç¼–ç¨‹å°è£…æ±‚å’Œï¼Œä»£ç é«˜åº¦å‡ç»ƒã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
auto calc = [](i64 l, i64 r)->mint {  // Lambdaæ±‚å’Œ
    return (l + r) * (r - l + 1) / 2 % mod;
};
For(i, 2, M<<1) {
    ans += calc(sum+1, sum+cnt[i]) * (i-M+1);
}
```
* **ä»£ç è§£è¯»**ï¼š  
  > Lambdaå‡½æ•°`calc`å°è£…ç­‰å·®æ•°åˆ—æ±‚å’Œï¼Œ`i-M+1`åŠ¨æ€è®¡ç®—ç³»æ•°å€¼ï¼ˆ`M=1e6`ï¼‰ã€‚è¿­ä»£å™¨`For`å®ç®€åŒ–å¾ªç¯ï¼Œä½“ç°C++ç°ä»£é£æ ¼ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šLambdaè¡¨è¾¾å¼æå‡ä»£ç å¤ç”¨æ€§ï¼Œå°¤å…¶é€‚åˆæ•°å­¦è¿ç®—å°è£…ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### è®¾è®¡ä¸»é¢˜
**"åƒç´ è´ªå¿ƒå¤§å†’é™©"**ï¼šç©å®¶æ“æ§8-bitå°äººæ”¶é›†ç³»æ•°å®çŸ³ï¼ŒæŒ‰è´ªå¿ƒè§„åˆ™æ”¾ç½®åˆ°ä½ç½®è½¨é“ã€‚

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼ˆFCæ¸¸æˆå¯åŠ¨éŸ³æ•ˆï¼‰ï¼š
   - å±å¹•åº•éƒ¨ï¼šä½ç½®è½¨é“ï¼ˆ1~nçš„åƒç´ æ ¼å­ï¼‰
   - å·¦ä¾§ï¼šé¢œè‰²å·¥å‚ï¼ˆä¸åŒé¢œè‰²æ–¹å—äº§å‡ºç³»æ•°å®çŸ³ï¼‰
   - å³ä¾§ï¼šå·®åˆ†æ§åˆ¶å°ï¼ˆæŸ±çŠ¶å›¾æ˜¾ç¤º`d[i]`å€¼ï¼‰

2. **ç³»æ•°ç”Ÿäº§**ï¼ˆå®å’šéŸ³æ•ˆï¼‰ï¼š
   - æ¯ä¸ªé¢œè‰²å·¥å‚å–·å‡ºç­‰å·®æ•°åˆ—å®çŸ³æµï¼ˆå¦‚çº¢è‰²ï¼š`1-c_i,3-c_i,...`ï¼‰
   - å®çŸ³é£å…¥å·®åˆ†æ§åˆ¶å°ï¼š`1-c_i`å¤„æŸ±çŠ¶å›¾+1ï¼ˆç»¿è‰²â†‘ï¼‰ï¼Œ`c_i+1`å¤„-1ï¼ˆçº¢è‰²â†“ï¼‰

3. **å‰ç¼€å’Œèšåˆ**ï¼ˆé½¿è½®è½¬åŠ¨éŸ³æ•ˆï¼‰ï¼š
   - æ§åˆ¶å°å…‰æ ‡ä»å·¦å‘å³æ‰«æï¼Œæ‰§è¡Œ`d[i] += d[i-2]`
   - æŸ±çŠ¶å›¾å®æ—¶å˜åŒ–ï¼Œèšåˆæˆç³»æ•°é¢‘æ¬¡å †ï¼ˆåŒç³»æ•°å®çŸ³å æ”¾ï¼‰

4. **è´ªå¿ƒæ”¾ç½®**ï¼ˆå®çŸ³ç¢°æ’éŸ³æ•ˆï¼‰ï¼š
   - å°äººä»æ§åˆ¶å°æœ€é«˜ç³»æ•°å †å–å®çŸ³ï¼ˆå¦‚ç³»æ•°10ï¼‰
   - è‡ªåŠ¨æ»‘å‘ä½ç½®è½¨é“æœ€å³ç«¯ç©ºä½ï¼Œæ˜¾ç¤ºè®¡ç®—å¼ï¼š`10Ã—ä½ç½®å€¼`
   - è¢«å ä½ç½®å˜ç°ï¼Œå°äººè¿”å›å–ä¸‹ä¸€é¢—

5. **AIæ¼”ç¤ºæ¨¡å¼**ï¼ˆ8-bit BGMï¼‰ï¼š
   - è‡ªåŠ¨æ’­æ”¾ï¼šå®çŸ³å¦‚ç€‘å¸ƒèˆ¬æµä¸‹ï¼Œå·®åˆ†æ§åˆ¶å°åŠ¨æ€æ›´æ–°
   - é€Ÿåº¦æ»‘å—è°ƒèŠ‚ï¼šæ…¢é€Ÿæ˜¾ç¤ºæ•°å­¦å…³ç³»ï¼Œå¿«é€Ÿå±•ç°ç®—æ³•å…¨è²Œ

### å…³é”®äº¤äº’
- **å•æ­¥æ‰§è¡Œ**ï¼šæŒ‰ç©ºæ ¼æš‚åœ/ç»§ç»­ï¼Œæ–¹å‘é”®æ§åˆ¶å°äºº
- **ç»“æ„é«˜äº®**ï¼šå½“ç³»æ•°åˆ†é…åˆ°ä½ç½®æ—¶ï¼Œæ˜¾ç¤º`è´¡çŒ®å€¼=ç³»æ•°Ã—ä½ç½®`å…¬å¼
- **è¿‡å…³æœºåˆ¶**ï¼šæ¯æ­£ç¡®æ”¾ç½®10ä¸ªå®çŸ³ç‚¹äº®ä¸€é¢—æ˜Ÿï¼Œé›†æ»¡é€šå…³

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ç›¸ä¼¼é—®é¢˜åœºæ™¯
1. **åŒºé—´è´¡çŒ®ç»Ÿè®¡**ï¼šå·®åˆ†å¤„ç†åŒºé—´æ›´æ–°ï¼ˆå¦‚CF EDU D. Array Collapseï¼‰
2. **è´ªå¿ƒæœ€å¤§åŒ–**ï¼šåŒåºåŒ¹é…æ±‚æå€¼ï¼ˆå¦‚æ´›è°·P1090 åˆå¹¶æœå­ï¼‰
3. **ç‹¬ç«‹æ–¹æ¡ˆè®¡æ•°**ï¼šé˜¶ä¹˜åˆ†è§£ç‹¬ç«‹äº‹ä»¶ï¼ˆå¦‚CF 1549B Chess Tournamentï¼‰

### æ´›è°·æ¨è
1. **P1908 é€†åºå¯¹**  
   â†’ å·®åˆ†æ€æƒ³ç»å…¸åº”ç”¨ï¼Œç»Ÿè®¡ä½ç½®å…³ç³»
2. **P1094 çºªå¿µå“åˆ†ç»„**  
   â†’ è´ªå¿ƒ+åŒæŒ‡é’ˆï¼Œç±»æ¯”ç³»æ•°åˆ†é…
3. **P1102 A-Bæ•°å¯¹**  
   â†’ å·®åˆ†æ¡¶æ€æƒ³è¿ç§»ï¼Œå¯»æ‰¾ç‰¹å®šå·®å€¼

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **ç»éªŒæ‘˜å½•ï¼ˆTyyyyyyè°ƒè¯•å¿ƒå¾—ï¼‰**ï¼š  
> *"å·®åˆ†åç§»å€¼`1000002`éœ€ä¸¥æ ¼è¦†ç›–$c_i \leq 10^6$èŒƒå›´ï¼Œåˆå§‹ç‰ˆæœ¬è®¾ä¸º$10^6$å¯¼è‡´è´Ÿä¸‹æ ‡è¶Šæ®µé”™è¯¯ã€‚"*

**Kayç‚¹è¯„**ï¼š  
> åç§»é‡å¤„ç†æ˜¯å·®åˆ†ç®—æ³•çš„å¸¸è§é™·é˜±ã€‚å»ºè®®ï¼š
> 1. å®šä¹‰å¸¸é‡`offset = max_c + 5`ç¡®ä¿å®‰å…¨è¾¹ç•Œ
> 2. ä½¿ç”¨`vector`æ›¿ä»£åŸç”Ÿæ•°ç»„è‡ªåŠ¨ç®¡ç†å†…å­˜
> 3. è°ƒè¯•æ—¶è¾“å‡ºè¾¹ç•Œå€¼`d[offsetÂ±max_c]`éªŒè¯

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡**è´¡çŒ®æ‹†è§£+å·®åˆ†ä¼˜åŒ–**çš„ç»„åˆæ‹³ã€‚è®°ä½ï¼šå¥½ç®—æ³•å¦‚ç§¯æœ¨ï¼Œçµæ´»ç»„åˆæ–¹èƒ½æ„å»ºé«˜å¡”ï¼ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š161.70ç§’
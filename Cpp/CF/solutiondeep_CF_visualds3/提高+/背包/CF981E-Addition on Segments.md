# é¢˜ç›®ä¿¡æ¯

# Addition on Segments

## é¢˜ç›®æè¿°

Grisha come to a contest and faced the following problem.

You are given an array of size $ n $ , initially consisting of zeros. The elements of the array are enumerated from $ 1 $ to $ n $ . You perform $ q $ operations on the array. The $ i $ -th operation is described with three integers $ l_i $ , $ r_i $ and $ x_i $ ( $ 1 \leq l_i \leq r_i \leq n $ , $ 1 \leq x_i \leq n $ ) and means that you should add $ x_i $ to each of the elements with indices $ l_i, l_i + 1, \ldots, r_i $ . After all operations you should find the maximum in the array.

Grisha is clever, so he solved the problem quickly.

However something went wrong inside his head and now he thinks of the following question: "consider we applied some subset of the operations to the array. What are the possible values of the maximum in the array?"

Help Grisha, find all integers $ y $ between $ 1 $ and $ n $ such that if you apply some subset (possibly empty) of the operations, then the maximum in the array becomes equal to $ y $ .

## è¯´æ˜/æç¤º

Consider the first example. If you consider the subset only of the first query, the maximum is equal to $ 1 $ . If you take only the second query, the maximum equals to $ 2 $ . If you take the first two queries, the maximum becomes $ 3 $ . If you take only the fourth query, the maximum becomes $ 4 $ . If you take the fourth query and something more, the maximum becomes greater that $ n $ , so you shouldn't print it.

In the second example you can take the first query to obtain $ 1 $ . You can take only the second query to obtain $ 2 $ . You can take all queries to obtain $ 3 $ .

In the third example you can obtain the following maximums:

- You can achieve the maximim of $ 2 $ by using queries: $ (1) $ .
- You can achieve the maximim of $ 3 $ by using queries: $ (2) $ .
- You can achieve the maximim of $ 5 $ by using queries: $ (1, 2) $ .
- You can achieve the maximim of $ 6 $ by using queries: $ (3) $ .
- You can achieve the maximim of $ 8 $ by using queries: $ (1, 3) $ .
- You can achieve the maximim of $ 9 $ by using queries: $ (2, 3) $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 3
1 3 1
2 4 2
3 4 4
```

### è¾“å‡º

```
4
1 2 3 4 
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
7 2
1 5 1
3 7 2
```

### è¾“å‡º

```
3
1 2 3 
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10 3
1 1 2
1 1 3
1 1 6
```

### è¾“å‡º

```
6
2 3 5 6 8 9 
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šAddition on Segments æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰+ åŒºé—´çº¦æŸå¤„ç†  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜å¯ä»¥ç±»æ¯”â€œå¸¦çº¦æŸçš„èƒŒåŒ…é—®é¢˜â€â€”â€”æ¯ä¸ªæ“ä½œç›¸å½“äºä¸€ä¸ªâ€œç‰©å“â€ï¼Œå…¶â€œé‡é‡â€æ˜¯`x_i`ï¼ˆè¦æ·»åŠ çš„å€¼ï¼‰ï¼Œè€Œâ€œçº¦æŸâ€æ˜¯è¿™ä¸ªâ€œç‰©å“â€åªèƒ½ç”¨åœ¨`[l_i, r_i]`åŒºé—´å†…ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯é€‰å‡ºä¸€äº›â€œç‰©å“â€ï¼Œä½¿å¾—æŸä¸ªä½ç½®çš„æ€»â€œé‡é‡â€æ°å¥½æ˜¯`y`ï¼ˆ1â‰¤yâ‰¤nï¼‰ï¼Œä¸”`y`æ˜¯æ‰€æœ‰ä½ç½®ä¸­çš„æœ€å¤§å€¼ã€‚  

**æ ¸å¿ƒç®—æ³•æ€è·¯**ï¼š  
- **çŠ¶æ€è®¾è®¡**ï¼šå®šä¹‰`f[j]`è¡¨ç¤ºâ€œæ‹¼å‡ºå€¼`j`æ—¶ï¼Œå€¼ä¸º`j`çš„ä½ç½®çš„æœ€å·¦ç«¯ç‚¹â€ï¼ˆåˆå§‹æ—¶`f[0]=1`ï¼Œè¡¨ç¤º0çš„æœ€å·¦ä½ç½®æ˜¯1ï¼‰ã€‚  
- **è½¬ç§»é€»è¾‘**ï¼šå¯¹äºæ¯ä¸ªæ“ä½œ`(l_i, r_i, x_i)`ï¼Œå€’åºéå†`j`ï¼ˆä»`n`åˆ°`x_i`ï¼‰ï¼Œå¦‚æœ`f[j-x_i] â‰¤ r_i`ï¼ˆå³`j-x_i`çš„æœ€å·¦ä½ç½®åœ¨`r_i`å·¦è¾¹ï¼Œè¯´æ˜`j-x_i`å¯ä»¥è¢«`[l_i, r_i]`è¦†ç›–ï¼‰ï¼Œåˆ™æ›´æ–°`f[j] = min(f[j], max(f[j-x_i], l_i))`ï¼ˆå–æœ€å·¦ç«¯ç‚¹çš„æœ€å°å€¼ï¼Œç¡®ä¿åç»­æ“ä½œæœ‰æ›´å¤§çš„è¦†ç›–èŒƒå›´ï¼‰ã€‚  
- **æ’åºä¼˜åŒ–**ï¼šå°†æ“ä½œæŒ‰å·¦ç«¯ç‚¹`l_i`å‡åºæ’åºï¼Œå€’åºéå†æ“ä½œï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¤„ç†å½“å‰æ“ä½œæ—¶ï¼Œä¹‹å‰çš„æ“ä½œçš„å·¦ç«¯ç‚¹æ›´å°ï¼Œæ›´å®¹æ˜“æ»¡è¶³åŒºé—´è¦†ç›–æ¡ä»¶ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤º`f`æ•°ç»„çš„å˜åŒ–ï¼š  
- å±å¹•å·¦ä¾§æ˜¾ç¤º`f`æ•°ç»„ï¼ˆ`j`ä»0åˆ°`n`ï¼‰ï¼Œæ¯ä¸ªå…ƒç´ ç”¨åƒç´ å—è¡¨ç¤ºï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤º`f[j]`è¶Šå°ï¼ˆè¶Šé å·¦ï¼‰ã€‚  
- å³ä¾§æ˜¾ç¤ºå½“å‰å¤„ç†çš„æ“ä½œ`(l_i, r_i, x_i)`ï¼Œç”¨å½©è‰²çŸ©å½¢æ ‡è®°åŒºé—´`[l_i, r_i]`ã€‚  
- å½“æ›´æ–°`f[j]`æ—¶ï¼Œå¯¹åº”çš„åƒç´ å—é—ªçƒï¼Œå¹¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œæç¤ºçŠ¶æ€å˜åŒ–ã€‚  
- æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ¬¡æ›´æ–°`j`ï¼‰å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿéå†æ‰€æœ‰`j`ï¼‰ï¼Œå¸®åŠ©ç†è§£è½¬ç§»è¿‡ç¨‹ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šzhaoypï¼ˆèµï¼š17ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æ¸…æ™°åº¦**å’Œ**ä»£ç è§„èŒƒæ€§**éå¸¸çªå‡ºã€‚ä½œè€…å°†åŒºé—´çº¦æŸè½¬åŒ–ä¸º`f[j]`çš„æœ€å·¦ç«¯ç‚¹ï¼Œå·§å¦™åœ°å°†èƒŒåŒ…é—®é¢˜ä¸åŒºé—´è¦†ç›–ç»“åˆï¼ŒçŠ¶æ€è®¾è®¡ç²¾å‡†ã€‚ä»£ç ä¸­ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼ˆ`f`æ•°ç»„ä»…ç”¨`O(n)`ç©ºé—´ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦`O(nÂ²)`ï¼ˆ`nâ‰¤1e4`æ—¶å®Œå…¨å¯è¡Œï¼‰ã€‚**äº®ç‚¹**åœ¨äºè½¬ç§»æ–¹ç¨‹çš„æ­£ç¡®æ€§â€”â€”é€šè¿‡`min(f[j], max(f[j-x_i], l_i))`ç¡®ä¿äº†çŠ¶æ€çš„æœ€ä¼˜æ€§ï¼ˆæœ€å·¦ç«¯ç‚¹æœ€å°ï¼‰ï¼Œä»è€Œè¦†ç›–æ›´å¤šåç»­æ“ä½œçš„åŒºé—´ã€‚ä»£ç ç»“æ„å·¥æ•´ï¼Œå˜é‡åï¼ˆå¦‚`f`ã€`a[i].l`ï¼‰å«ä¹‰æ˜ç¡®ï¼Œé€‚åˆä½œä¸ºç«èµ›æ¨¡æ¿ã€‚  

### é¢˜è§£äºŒï¼šä¸€æ‰¶è‹ä¸€ï¼ˆèµï¼š9ï¼‰  
* **ç‚¹è¯„**ï¼š  
  ä½œè€…é‡‡ç”¨**çº¿æ®µæ ‘åˆ†æ²»+bitset**çš„æ€è·¯ï¼Œæ–°é¢–ä¸”é«˜æ•ˆã€‚çº¿æ®µæ ‘åˆ†æ²»å°†æ¯ä¸ªæ“ä½œæ‰“åˆ°å¯¹åº”çš„åŒºé—´èŠ‚ç‚¹ï¼Œç„¶åéå†çº¿æ®µæ ‘ï¼Œç”¨bitsetç»´æŠ¤æ¯ä¸ªä½ç½®çš„å¯è¾¾å€¼ï¼ˆ`bitset`çš„`|=`æ“ä½œå¿«é€Ÿåˆå¹¶çŠ¶æ€ï¼‰ã€‚**äº®ç‚¹**åœ¨äºç”¨çº¿æ®µæ ‘å¤„ç†åŒºé—´æ“ä½œçš„â€œæ—¶é—´æˆ³â€ï¼Œé¿å…äº†æš´åŠ›æšä¸¾æ¯ä¸ªä½ç½®çš„é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦`O(nq log n / w)`ï¼ˆ`w`ä¸ºbitsetä½æ•°ï¼‰ï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚ä»£ç ä¸­çº¿æ®µæ ‘çš„æ„å»ºå’Œæ’å…¥é€»è¾‘æ¸…æ™°ï¼Œbitsetçš„ä½¿ç”¨ç®€åŒ–äº†çŠ¶æ€ç»´æŠ¤ã€‚  

### é¢˜è§£ä¸‰ï¼šä¸‡å¼˜ï¼ˆèµï¼š8ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æ˜¯çº¿æ®µæ ‘åˆ†æ²»çš„å¦ä¸€ç§ç®€æ´å®ç°ã€‚ä½œè€…ç”¨çº¿æ®µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤è¯¥åŒºé—´å†…çš„æ“ä½œï¼Œç„¶åæ·±åº¦ä¼˜å…ˆéå†çº¿æ®µæ ‘ï¼Œå°†æ“ä½œçš„`x_i`åˆå¹¶åˆ°bitsetä¸­ï¼ˆ`cur |= cur << x_i`ï¼‰ã€‚**äº®ç‚¹**åœ¨äºä»£ç çš„ç®€æ´æ€§â€”â€”çº¿æ®µæ ‘çš„ä¿®æ”¹å’Œéå†é€»è¾‘ç”¨å°‘é‡ä»£ç å®ç°ï¼Œbitsetçš„`<<`æ“ä½œå¿«é€Ÿå®ç°äº†â€œåŠ `x_i`â€çš„çŠ¶æ€è½¬ç§»ã€‚è¿™ç§æ–¹æ³•ç›´è§‚æ˜“æ‡‚ï¼Œé€‚åˆç†è§£çº¿æ®µæ ‘åˆ†æ²»çš„æ ¸å¿ƒæ€æƒ³ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•å°†åŒºé—´çº¦æŸèå…¥DPçŠ¶æ€ï¼Ÿ**  
- **åˆ†æ**ï¼š  
  ç›´æ¥æšä¸¾æ¯ä¸ªä½ç½®çš„å¯è¾¾å€¼ä¼šè¶…æ—¶ï¼ˆ`n=1e4`æ—¶`O(nq)`ä¸å¯è¡Œï¼‰ã€‚ä½œè€…é€šè¿‡`f[j]`è¡¨ç¤ºâ€œæ‹¼å‡º`j`çš„æœ€å·¦ç«¯ç‚¹â€ï¼Œå°†åŒºé—´çº¦æŸè½¬åŒ–ä¸ºâ€œ`f[j-x_i] â‰¤ r_i`â€ï¼ˆå³`j-x_i`çš„æœ€å·¦ä½ç½®åœ¨`r_i`å·¦è¾¹ï¼Œè¯´æ˜`[l_i, r_i]`è¦†ç›–äº†`j-x_i`çš„ä½ç½®ï¼Œä»è€Œå¯ä»¥æ·»åŠ `x_i`å¾—åˆ°`j`ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è®¾è®¡è¦è´´åˆé—®é¢˜çº¦æŸï¼Œå°†â€œåŒºé—´è¦†ç›–â€è½¬åŒ–ä¸ºå¯é‡åŒ–çš„çŠ¶æ€ï¼ˆå¦‚æœ€å·¦ç«¯ç‚¹ï¼‰ã€‚  

### 2. **éš¾ç‚¹2ï¼šè½¬ç§»æ–¹ç¨‹çš„é€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ**  
- **åˆ†æ**ï¼š  
  è½¬ç§»æ–¹ç¨‹`f[j] = min(f[j], max(f[j-x_i], l_i))`çš„å«ä¹‰æ˜¯ï¼š  
  - å¦‚æœ`f[j-x_i] â‰¥ l_i`ï¼ˆ`j-x_i`çš„æœ€å·¦ä½ç½®åœ¨`l_i`å³è¾¹ï¼‰ï¼Œåˆ™`j`çš„æœ€å·¦ä½ç½®å°±æ˜¯`f[j-x_i]`ï¼ˆå› ä¸º`[l_i, r_i]`è¦†ç›–äº†`f[j-x_i]`ï¼‰ã€‚  
  - å¦‚æœ`f[j-x_i] < l_i`ï¼ˆ`j-x_i`çš„æœ€å·¦ä½ç½®åœ¨`l_i`å·¦è¾¹ï¼‰ï¼Œåˆ™`j`çš„æœ€å·¦ä½ç½®æ˜¯`l_i`ï¼ˆå› ä¸º`[l_i, r_i]`è¦†ç›–äº†`l_i`ï¼Œæ‰€ä»¥`j`å¯ä»¥åœ¨`l_i`ä½ç½®å–å¾—ï¼‰ã€‚  
  å–`min`æ˜¯ä¸ºäº†ä¿ç•™æœ€å·¦ç«¯ç‚¹æœ€å°çš„çŠ¶æ€ï¼Œè¿™æ ·åç»­æ“ä½œæœ‰æ›´å¤§çš„æ¦‚ç‡æ»¡è¶³`f[j-x_i] â‰¤ r_i`ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ–¹ç¨‹è¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œå¹¶é€‰æ‹©æœ€ä¼˜çš„çŠ¶æ€ï¼ˆå¦‚æœ€å·¦ç«¯ç‚¹æœ€å°ï¼‰ã€‚  

### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ï¼Ÿ**  
- **åˆ†æ**ï¼š  
  åˆå§‹çš„DPçŠ¶æ€æ˜¯`f[i][j]`ï¼ˆå¤„ç†å‰`i`ä¸ªæ“ä½œï¼Œæ‹¼å‡º`j`çš„æœ€å·¦ç«¯ç‚¹ï¼‰ï¼Œç©ºé—´å¤æ‚åº¦`O(mn)`ï¼ˆ`m=1e4`æ—¶ä¸å¯è¡Œï¼‰ã€‚ä½œè€…ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œå°†`f[i][j]`ä¼˜åŒ–ä¸º`f[j]`ï¼ˆä»…ä¿ç•™å½“å‰å¤„ç†åçš„çŠ¶æ€ï¼‰ï¼Œç©ºé—´å¤æ‚åº¦é™ä¸º`O(n)`ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå½“çŠ¶æ€ä»…ä¾èµ–äºå‰ä¸€å±‚æ—¶ï¼Œæ»šåŠ¨æ•°ç»„æ˜¯å¸¸ç”¨çš„ç©ºé—´ä¼˜åŒ–æ–¹æ³•ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é—®é¢˜è½¬åŒ–**ï¼šå°†åŒºé—´çº¦æŸè½¬åŒ–ä¸ºçŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚æœ€å·¦ç«¯ç‚¹ï¼‰ï¼Œé¿å…æš´åŠ›æšä¸¾ã€‚  
- **æ’åºä¼˜åŒ–**ï¼šæŒ‰å·¦ç«¯ç‚¹æ’åºï¼Œå€’åºéå†æ“ä½œï¼Œç¡®ä¿å¤„ç†å½“å‰æ“ä½œæ—¶ï¼Œä¹‹å‰çš„çŠ¶æ€æ»¡è¶³åŒºé—´è¦†ç›–æ¡ä»¶ã€‚  
- **æ•°æ®ç»“æ„é€‰æ‹©**ï¼šçº¿æ®µæ ‘åˆ†æ²»+bitseté€‚åˆå¤„ç†åŒºé—´æ“ä½œçš„èƒŒåŒ…é—®é¢˜ï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆæ¥è‡ªzhaoypçš„é¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼š  
  æ­¤ä»£ç æ˜¯åŠ¨æ€è§„åˆ’çš„å…¸å‹å®ç°ï¼Œç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼ŒçŠ¶æ€è®¾è®¡ç²¾å‡†ï¼Œé€‚åˆä½œä¸ºç«èµ›æ¨¡æ¿ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include<bits/stdc++.h>
  using namespace std;
  const int maxn = 1e4 + 5;
  int n, m, ans[maxn], tot, f[maxn];
  struct node { int l, r, x; } a[maxn];
  bool cmp(node a, node b) { return a.l < b.l; }
  int main() {
      scanf("%d%d", &n, &m);
      for (int i = 1; i <= m; ++i)
          scanf("%d%d%d", &a[i].l, &a[i].r, &a[i].x);
      sort(a + 1, a + 1 + m, cmp);
      memset(f, 0x3f, sizeof(f));
      f[0] = 1;
      for (int i = m; i >= 1; --i)
          for (int j = n; j >= a[i].x; --j)
              if (f[j - a[i].x] <= a[i].r)
                  f[j] = min(f[j], max(f[j - a[i].x], a[i].l));
      for (int i = 1; i <= n; ++i)
          if (f[i] <= n) ans[++tot] = i;
      printf("%d\n", tot);
      for (int i = 1; i <= tot; ++i)
          printf("%d ", ans[i]);
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥ä¸æ’åº**ï¼šè¯»å–`n`å’Œ`m`ï¼Œè¾“å…¥æ¯ä¸ªæ“ä½œçš„`l`ã€`r`ã€`x`ï¼Œå¹¶æŒ‰`l`å‡åºæ’åºã€‚  
  2. **åˆå§‹åŒ–DPæ•°ç»„**ï¼š`f`æ•°ç»„åˆå§‹åŒ–ä¸ºæ— ç©·å¤§ï¼ˆè¡¨ç¤ºä¸å¯è¾¾ï¼‰ï¼Œ`f[0] = 1`ï¼ˆ0çš„æœ€å·¦ä½ç½®æ˜¯1ï¼‰ã€‚  
  3. **åŠ¨æ€è§„åˆ’è½¬ç§»**ï¼šå€’åºéå†æ¯ä¸ªæ“ä½œï¼Œå€’åºéå†`j`ï¼ˆé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ“ä½œï¼‰ï¼Œå¦‚æœ`f[j-x_i] â‰¤ r_i`ï¼Œåˆ™æ›´æ–°`f[j]`ã€‚  
  4. **è¾“å‡ºç»“æœ**ï¼šç»Ÿè®¡`f[i] â‰¤ n`çš„`i`ï¼ˆå¯è¾¾çš„æœ€å¤§å€¼ï¼‰ï¼Œå¹¶è¾“å‡ºã€‚  


### é’ˆå¯¹ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆzhaoypï¼‰ï¼šDPè½¬ç§»ç‰‡æ®µ  
* **äº®ç‚¹**ï¼šå€’åºéå†`j`ï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ“ä½œï¼Œç¡®ä¿æ¯ä¸ªæ“ä½œåªè¢«é€‰ä¸€æ¬¡ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = m; i >= 1; --i)
      for (int j = n; j >= a[i].x; --j)
          if (f[j - a[i].x] <= a[i].r)
              f[j] = min(f[j], max(f[j - a[i].x], a[i].l));
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - ä¸ºä»€ä¹ˆå€’åºéå†`i`ï¼Ÿå› ä¸ºæ“ä½œæŒ‰`l`å‡åºæ’åºï¼Œå€’åºéå†å¯ä»¥ä¿è¯å¤„ç†å½“å‰æ“ä½œæ—¶ï¼Œä¹‹å‰çš„æ“ä½œçš„`l`æ›´å°ï¼Œæ›´å®¹æ˜“æ»¡è¶³`f[j-x_i] â‰¤ r_i`ã€‚  
  - ä¸ºä»€ä¹ˆå€’åºéå†`j`ï¼Ÿå› ä¸º`f[j]`ä¾èµ–äº`f[j-x_i]`ï¼Œå€’åºéå†å¯ä»¥é¿å…åŒä¸€ä¸ªæ“ä½œè¢«å¤šæ¬¡ä½¿ç”¨ï¼ˆç±»ä¼¼01èƒŒåŒ…çš„ä¼˜åŒ–ï¼‰ã€‚  
  - è½¬ç§»æ–¹ç¨‹çš„å«ä¹‰ï¼šå¦‚æœ`j-x_i`çš„æœ€å·¦ä½ç½®åœ¨`r_i`å·¦è¾¹ï¼Œåˆ™`j`çš„æœ€å·¦ä½ç½®æ˜¯`max(f[j-x_i], l_i)`ï¼ˆå–`f[j-x_i]`å’Œ`l_i`çš„æœ€å¤§å€¼ï¼Œç¡®ä¿åœ¨`[l_i, r_i]`åŒºé—´å†…ï¼‰ï¼Œå¹¶å–`min`ä¿ç•™æœ€ä¼˜çŠ¶æ€ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå€’åºéå†æ˜¯01èƒŒåŒ…çš„å¸¸ç”¨ä¼˜åŒ–æ–¹æ³•ï¼Œé¿å…é‡å¤é€‰ç‰©å“ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ æ¢é™©å®¶ï¼šå¯»æ‰¾å¯è¾¾æœ€å¤§å€¼**ï¼ˆä»¿FCæ¸¸æˆé£æ ¼ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
å±•ç¤ºåŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹ï¼Œé‡ç‚¹æ¼”ç¤º`f`æ•°ç»„çš„å˜åŒ–ã€åŒºé—´çº¦æŸçš„å¤„ç†ï¼Œä»¥åŠ`j`çš„æ›´æ–°é€»è¾‘ã€‚  

### è®¾è®¡æ€è·¯ç®€è¿°  
é‡‡ç”¨8ä½åƒç´ é£æ ¼ï¼ˆç±»ä¼¼ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹ï¼‰ï¼Œç”¨é²œè‰³çš„é¢œè‰²å’Œç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°ç®—æ³•çš„æ¯ä¸€æ­¥ã€‚**æ¸¸æˆåŒ–å…ƒç´ **ï¼ˆå¦‚éŸ³æ•ˆã€å…³å¡ï¼‰å¢åŠ è¶£å‘³æ€§ï¼Œå¸®åŠ©è®°å¿†å…³é”®æ­¥éª¤ã€‚  

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤º`f`æ•°ç»„ï¼ˆ`j`ä»0åˆ°`n`ï¼‰ï¼Œæ¯ä¸ªå…ƒç´ ç”¨16x16çš„åƒç´ å—è¡¨ç¤ºï¼Œé¢œè‰²ä¸ºç°è‰²ï¼ˆåˆå§‹æ—¶`f[j]`ä¸ºæ— ç©·å¤§ï¼‰ï¼Œ`f[0]`ä¸ºç»¿è‰²ï¼ˆ`f[0]=1`ï¼‰ã€‚  
   - å±å¹•å³ä¾§æ˜¾ç¤ºå½“å‰å¤„ç†çš„æ“ä½œ`(l_i, r_i, x_i)`ï¼Œç”¨çº¢è‰²çŸ©å½¢æ ‡è®°åŒºé—´`[l_i, r_i]`ï¼Œ`x_i`ç”¨é»„è‰²æ•°å­—æ˜¾ç¤ºã€‚  
   - åº•éƒ¨æœ‰â€œå•æ­¥â€â€œè‡ªåŠ¨â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼ˆ1x~5xï¼‰ã€‚  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šå¦å…‹å¤§æˆ˜ã€‹çš„BGMï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - ç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»å¼€å§‹ã€‚é¦–å…ˆæ˜¾ç¤ºæ’åºåçš„æ“ä½œåˆ—è¡¨ï¼ˆæŒ‰`l`å‡åºï¼‰ã€‚  

3. **æ ¸å¿ƒè½¬ç§»æ­¥éª¤**ï¼š  
   - **å¤„ç†æ“ä½œ`i`**ï¼šå³ä¾§çš„çº¢è‰²çŸ©å½¢é—ªçƒï¼Œæç¤ºå½“å‰å¤„ç†çš„æ“ä½œã€‚  
   - **å€’åºéå†`j`**ï¼šä»`n`åˆ°`a[i].x`ï¼Œå¯¹åº”çš„`j`åƒç´ å—é—ªçƒï¼ˆè“è‰²ï¼‰ã€‚  
   - **åˆ¤æ–­æ¡ä»¶**ï¼šå¦‚æœ`f[j-x_i] â‰¤ r_i`ï¼ˆ`j-x_i`çš„åƒç´ å—ä¸ºç»¿è‰²æˆ–è“è‰²ï¼‰ï¼Œåˆ™`j`çš„åƒç´ å—é¢œè‰²å˜ä¸ºç»¿è‰²ï¼ˆè¡¨ç¤ºå¯è¾¾ï¼‰ï¼Œå¹¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  
   - **æ›´æ–°`f[j]`**ï¼š`j`çš„åƒç´ å—ä¸‹æ–¹æ˜¾ç¤ºæ–°çš„`f[j]`å€¼ï¼ˆæœ€å·¦ç«¯ç‚¹ï¼‰ï¼Œç”¨ç™½è‰²æ•°å­—è¡¨ç¤ºã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“æ‰€æœ‰æ“ä½œå¤„ç†å®Œæ¯•ï¼Œå±å¹•æ˜¾ç¤ºâ€œæ¢ç´¢å®Œæˆï¼â€ï¼Œå¹¶åˆ—å‡ºæ‰€æœ‰å¯è¾¾çš„æœ€å¤§å€¼ï¼ˆç»¿è‰²åƒç´ å—å¯¹åº”çš„`j`ï¼‰ã€‚  
   - æ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚  

5. **äº¤äº’åŠŸèƒ½**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€æ¬¡æ›´æ–°`j`ï¼Œè§‚å¯Ÿæ¯ä¸ªæ­¥éª¤çš„å˜åŒ–ã€‚  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼ŒåŠ¨ç”»æŒ‰é€‰å®šé€Ÿåº¦ï¼ˆ1x~5xï¼‰å¿«é€Ÿæ’­æ”¾ï¼Œé€‚åˆå›é¡¾æ•´ä½“æµç¨‹ã€‚  
   - **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹æ¢ç´¢ã€‚  

### æ—ç™½æç¤ºï¼ˆåŠ¨ç”»ä¸­çš„æ–‡å­—æ°”æ³¡ï¼‰  
- â€œç°åœ¨å¤„ç†æ“ä½œ`i`ï¼šåŒºé—´`[l_i, r_i]`åŠ `x_i`ï¼â€ï¼ˆå¤„ç†æ“ä½œæ—¶ï¼‰  
- â€œæ£€æŸ¥`j-x_i`çš„æœ€å·¦ä½ç½®æ˜¯å¦åœ¨`r_i`å·¦è¾¹ï¼Ÿâ€ï¼ˆåˆ¤æ–­æ¡ä»¶æ—¶ï¼‰  
- â€œ`j`çš„æœ€å·¦ä½ç½®æ›´æ–°ä¸º`max(f[j-x_i], l_i)`ï¼â€ï¼ˆæ›´æ–°`f[j]`æ—¶ï¼‰  
- â€œ`j`å¯è¾¾å•¦ï¼â€ï¼ˆ`f[j]`å˜ä¸ºç»¿è‰²æ—¶ï¼‰  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **åŠ¨æ€è§„åˆ’+åŒºé—´çº¦æŸ**ï¼šé€‚ç”¨äºâ€œé€‰å­é›†æ“ä½œï¼Œä½¿å¾—æŸä¸ªä½ç½®çš„ç»“æœæ»¡è¶³æ¡ä»¶â€çš„é—®é¢˜ï¼ˆå¦‚åŒºé—´åŠ ã€åŒºé—´ä¹˜ï¼‰ã€‚  
- **çº¿æ®µæ ‘åˆ†æ²»+bitset**ï¼šé€‚ç”¨äºâ€œåŒºé—´æ“ä½œçš„èƒŒåŒ…é—®é¢˜â€ï¼ˆå¦‚å¤šä¸ªåŒºé—´çš„åŠ /ä¹˜æ“ä½œï¼Œæ±‚å¯è¾¾å€¼ï¼‰ã€‚  
- **æ»šåŠ¨æ•°ç»„ä¼˜åŒ–**ï¼šé€‚ç”¨äºâ€œçŠ¶æ€ä»…ä¾èµ–å‰ä¸€å±‚â€çš„DPé—®é¢˜ï¼ˆå¦‚01èƒŒåŒ…ã€å®Œå…¨èƒŒåŒ…ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1833 æ¨±èŠ±**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯ä¸€é“ç»å…¸çš„01èƒŒåŒ…é—®é¢˜ï¼Œéœ€è¦å¤„ç†æ—¶é—´çº¦æŸï¼ˆç±»ä¼¼æœ¬é¢˜çš„åŒºé—´çº¦æŸï¼‰ï¼Œå¯ä»¥å·©å›ºåŠ¨æ€è§„åˆ’çš„çŠ¶æ€è®¾è®¡å’Œæ»šåŠ¨æ•°ç»„ä¼˜åŒ–ã€‚  
2. **æ´›è°· P2345 å¥¶ç‰›é›†ä¼š**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦å¤„ç†åŒºé—´æ“ä½œçš„æœ€å¤§å€¼é—®é¢˜ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œé€‰å­é›†æ“ä½œæ±‚æœ€å¤§å€¼â€ï¼Œå¯ä»¥ç»ƒä¹ çº¿æ®µæ ‘åˆ†æ²»çš„æ€è·¯ã€‚  
3. **æ´›è°· P3372 çº¿æ®µæ ‘æ¨¡æ¿**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šçº¿æ®µæ ‘çš„åŸºç¡€é—®é¢˜ï¼Œå·©å›ºåŒºé—´æ“ä½œçš„å¤„ç†é€»è¾‘ï¼Œä¸ºå­¦ä¹ çº¿æ®µæ ‘åˆ†æ²»æ‰“åŸºç¡€ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªzhaoypçš„é¢˜è§£)  
> â€œæˆ‘åœ¨è®¾è®¡çŠ¶æ€æ—¶ï¼Œæœ€åˆè€ƒè™‘çš„æ˜¯`f[j]`è¡¨ç¤ºæ‹¼å‡º`j`çš„æœ€å³ç«¯ç‚¹ï¼Œä½†åæ¥å‘ç°æœ€å·¦ç«¯ç‚¹æ›´é€‚åˆåˆ¤æ–­åŒºé—´è¦†ç›–ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼ŒçŠ¶æ€è®¾è®¡è¦è´´åˆé—®é¢˜çš„çº¦æŸæ¡ä»¶ï¼Œè€Œä¸æ˜¯æƒ³å½“ç„¶ã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨åŠ¨æ€è§„åˆ’ä¸­ï¼ŒçŠ¶æ€è®¾è®¡æ˜¯å…³é”®ï¼Œéœ€è¦åå¤æ€è€ƒâ€œä»€ä¹ˆæ ·çš„çŠ¶æ€èƒ½è¦†ç›–æ‰€æœ‰æƒ…å†µï¼Œå¹¶ä¸”èƒ½é«˜æ•ˆè½¬ç§»â€ã€‚å¦‚æœæœ€åˆçš„çŠ¶æ€è®¾è®¡ä¸é€‚åˆï¼Œå¯ä»¥å°è¯•è°ƒæ•´ï¼ˆå¦‚å°†æœ€å³ç«¯ç‚¹æ”¹ä¸ºæœ€å·¦ç«¯ç‚¹ï¼‰ï¼Œè¿™å¾€å¾€èƒ½è§£å†³é—®é¢˜ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œAddition on Segmentsâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£åŠ¨æ€è§„åˆ’ä¸åŒºé—´çº¦æŸçš„ç»“åˆï¼ŒæŒæ¡çº¿æ®µæ ‘åˆ†æ²»ç­‰é«˜çº§æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„ä¹è¶£åœ¨äºä¸æ–­æ¢ç´¢å’Œä¼˜åŒ–â€”â€”ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶ï¼Œä¸å¦¨è¯•è¯•ä»Šå¤©å­¦åˆ°çš„æ€è·¯ï¼ğŸ’ª  

å¦‚æœæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼ŒKayä¼šå°½åŠ›å¸®åŠ©å¤§å®¶ï¼ğŸ˜Š

---
å¤„ç†ç”¨æ—¶ï¼š158.93ç§’
# é¢˜ç›®ä¿¡æ¯

# Mahmoud and Ehab and the bipartiteness

## é¢˜ç›®æè¿°

Mahmoud and Ehab continue their adventures! As everybody in the evil land knows, Dr. Evil likes bipartite graphs, especially trees.

A tree is a connected acyclic graph. A bipartite graph is a graph, whose vertices can be partitioned into $ 2 $ sets in such a way, that for each edge $ (u,v) $ that belongs to the graph, $ u $ and $ v $ belong to different sets. You can find more formal definitions of a tree and a bipartite graph in the notes section below.

Dr. Evil gave Mahmoud and Ehab a tree consisting of $ n $ nodes and asked them to add edges to it in such a way, that the graph is still bipartite. Besides, after adding these edges the graph should be simple (doesn't contain loops or multiple edges). What is the maximum number of edges they can add?

A loop is an edge, which connects a node with itself. Graph doesn't contain multiple edges when for each pair of nodes there is no more than one edge between them. A cycle and a loop aren't the same .

## è¯´æ˜/æç¤º

Tree definition: <a>https://en.wikipedia.org/wiki/Tree\_(graph\_theory)</a>

Bipartite graph definition: [https://en.wikipedia.org/wiki/Bipartite\_graph](https://en.wikipedia.org/wiki/Bipartite_graph)

In the first test case the only edge that can be added in such a way, that graph won't contain loops or multiple edges is $ (2,3) $ , but adding this edge will make the graph non-bipartite so the answer is 0.

In the second test case Mahmoud and Ehab can add edges $ (1,4) $ and $ (2,5) $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
1 2
1 3
```

### è¾“å‡º

```
0
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
5
1 2
2 3
3 4
4 5
```

### è¾“å‡º

```
2
```

# AIåˆ†æç»“æœ


### é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`å›¾è®º-äºŒåˆ†å›¾æŸ“è‰²`  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äºç†è§£**äºŒåˆ†å›¾çš„æ€§è´¨**ã€‚æƒ³è±¡ä¸€æ£µæ ‘å°±åƒä¸€åº§é»‘ç™½äº¤é”™çš„æ£‹ç›˜ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯"é»‘æ£‹"ï¼Œè¦ä¹ˆæ˜¯"ç™½æ£‹"ï¼Œç›¸é‚»èŠ‚ç‚¹å¿…é¡»é¢œè‰²ä¸åŒï¼ˆå°±åƒæ£‹ç›˜ä¸Šç›¸é‚»æ ¼å­é¢œè‰²ç›¸å¼‚ï¼‰ã€‚é€šè¿‡DFS/BFSæŸ“è‰²åï¼Œæœ€å¤§å¯æ·»åŠ è¾¹æ•°å°±æ˜¯æ‰€æœ‰é»‘ç™½ç‚¹å¯¹çš„æ•°é‡å‡å»å·²æœ‰è¾¹æ•°ã€‚  
> - **æ ¸å¿ƒéš¾ç‚¹**ï¼šå‡†ç¡®ç»Ÿè®¡ä¸¤ä¸ªé›†åˆçš„èŠ‚ç‚¹æ•°é‡ï¼Œæ³¨æ„æ ‘æœ¬èº«å°±æ˜¯äºŒåˆ†å›¾æ— éœ€é¢å¤–åˆ¤æ–­  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šç”¨åƒç´ æ£‹ç›˜æ¨¡æ‹ŸæŸ“è‰²è¿‡ç¨‹ï¼šä»æ ¹èŠ‚ç‚¹(åŸå ¡)å‡ºå‘ï¼Œæ¯å±‚äº¤æ›¿æŸ“è‰²ï¼ˆéª‘å£«ç›”ç”²å˜è‰²ï¼‰ï¼Œæœ€ç»ˆç»Ÿè®¡ä¸¤è¾¹éª‘å£«æ•°é‡  
> - **æ¸¸æˆåŒ–è®¾è®¡**ï¼š8-bitéŸ³æ•ˆï¼ˆæŸ“è‰²æ—¶"å®"å£°ï¼‰ï¼Œè¿‡å…³åŠ¨ç”»ï¼ˆæ˜¾ç¤ºå…¬å¼è®¡ç®—ï¼‰ï¼Œè‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼ï¼ˆAIéª‘å£«è‡ªåŠ¨å·¡æ¸¸æŸ“è‰²ï¼‰

---

### ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆHamer_sansï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°è§£é‡Šäº†äºŒåˆ†å›¾æ€§è´¨ï¼Œä»£ç è§„èŒƒï¼ˆé‚»æ¥è¡¨+è®°å¿†åŒ–DFSï¼‰ï¼Œå˜é‡å‘½ååˆç†(`cnt`ç»Ÿè®¡é›†åˆå¤§å°)ï¼Œç‰¹åˆ«å¼ºè°ƒ`long long`é¿å…æº¢å‡ºã€‚äº®ç‚¹åœ¨äºè¯¦ç»†æ³¨é‡Šå’Œä¸¥è°¨çš„è¾¹ç•Œå¤„ç†ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›ã€‚

**é¢˜è§£äºŒï¼ˆSuperJvRuoï¼‰**
* **ç‚¹è¯„**ï¼šæœ€ç®€æ´é«˜æ•ˆçš„å®ç°ï¼ˆ35è¡Œï¼‰ï¼Œç›´æ¥èšç„¦æ ¸å¿ƒé€»è¾‘ã€‚çŠ¶æ€è½¬ç§»ç²¾ç‚¼ï¼ˆ`c==1?2:1`äº¤æ›¿æŸ“è‰²ï¼‰ï¼Œç©ºé—´ä¼˜åŒ–å‡ºè‰²ã€‚å®è·µä»·å€¼é«˜ï¼Œé€‚åˆåˆå­¦è€…ç†è§£äºŒåˆ†å›¾æœ¬è´¨ã€‚

**é¢˜è§£ä¸‰ï¼ˆè½»ç»˜ï¼‰**
* **ç‚¹è¯„**ï¼šç”¨`used`æ•°ç»„æ›¿ä»£é¢œè‰²ç¼–å·ï¼Œåˆ›æ–°æ€§å®ç°æŸ“è‰²é€»è¾‘ã€‚å®Œæ•´åŒ…å«äºŒåˆ†å›¾æ¦‚å¿µç§‘æ™®ï¼Œä»£ç æ¨¡å—åŒ–ï¼ˆDFSç‹¬ç«‹å°è£…ï¼‰ï¼Œç‰¹åˆ«é€‚åˆåŸºç¡€å­¦ä¹ è€…ã€‚

---

### æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹1ï¼šç†è§£äºŒåˆ†å›¾æ€§è´¨**
   * **åˆ†æ**ï¼šæ ‘ç»“æ„å¤©ç„¶æ˜¯äºŒåˆ†å›¾ï¼ˆæ— å¥‡ç¯ï¼‰ï¼Œä½†éœ€è¯æ˜æœ€å¤§è¾¹æ•°=âˆ£Aâˆ£Ã—âˆ£Bâˆ£ã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡æŸ“è‰²æ³•å¯è§†åŒ–åˆ†åŒº
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ‘å¯äºŒæŸ“è‰² â‡’ å®Œå…¨äºŒåˆ†å›¾æœ€å¤§è¾¹æ•°=é»‘ç‚¹æ•°Ã—ç™½ç‚¹æ•°

2. **éš¾ç‚¹2ï¼šé¿å…æ•´æ•°æº¢å‡º**
   * **åˆ†æ**ï¼šå½“n>10â´æ—¶ï¼Œcntâ‚Ã—cntâ‚‚å¯è¾¾25Ã—10â¸ï¼Œå¿…é¡»ç”¨`long long`ã€‚å¤šä½ä½œè€…å¼ºè°ƒæ­¤é™·é˜±
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè§ä¹˜æ³•å…ˆæƒ³æº¢å‡ºï¼æ•°æ®è§„æ¨¡>10â´æ—¶é»˜è®¤ç”¨`long long`

3. **éš¾ç‚¹3ï¼šé«˜æ•ˆå®ç°æŸ“è‰²**
   * **åˆ†æ**ï¼šDFS/BFSå‡å¯ï¼Œä½†éœ€æ³¨æ„ï¼š
     - æ— å‘å›¾è¦åŒå‘å»ºè¾¹
     - é¿å…é‡å¤è®¿é—®ï¼ˆç”¨`color[]`æ ‡è®°ï¼‰
     - é€‰æ‹©é‚»æ¥è¡¨è€ŒéçŸ©é˜µï¼ˆèŠ‚çœç©ºé—´ï¼‰
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ‘éå†å¤æ‚åº¦O(n)ï¼Œé‚»æ¥è¡¨æ˜¯æœ€ä½³å­˜å‚¨ç»“æ„

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å»ºæ¨¡è½¬åŒ–**ï¼šå°†æ ‘â†’äºŒåˆ†å›¾â†’å®Œå…¨äºŒåˆ†å›¾ï¼ˆé»‘æ£‹/ç™½æ£‹æ¨¡å‹ï¼‰
- **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šè¾¹ç•Œæµ‹è¯•(n=1æ—¶cntâ‚=1,cntâ‚‚=0)
- **ç®—æ³•å¤ç”¨**ï¼šDFSæŸ“è‰²æ¨¡æ¿å¯è¿ç§»è‡³åˆ¤æ–­ä»»æ„å›¾æ˜¯å¦ä¸ºäºŒåˆ†å›¾
- **å¯è§†åŒ–è°ƒè¯•**ï¼šå°è§„æ¨¡æ—¶æ‰“å°æŸ“è‰²ç»“æœéªŒè¯

---

### C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <iostream>
#include <vector>
using namespace std;
typedef long long ll;
vector<int> graph[100005];
ll cnt[3] = {0,0,0}; // ç´¢å¼•1:é»‘ 2:ç™½

void dfs(int u, int color) {
    cnt[color]++;
    for(int v : graph[u]) 
        if(!cnt[v]) dfs(v, 3-color); // äº¤æ›¿æŸ“è‰²
}

int main() {
    int n; cin >> n;
    for(int i=1; i<n; i++) {
        int u,v; cin >> u >> v;
        graph[u].push_back(v);
        graph[v].push_back(u);
    }
    dfs(1, 1); // æ ¹æŸ“é»‘è‰²
    cout << cnt[1]*cnt[2] - n + 1;
}
```

**é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µ**  
```cpp
void dfs(int x, int pos) {
    color[x] = pos;
    ++cnt[pos]; // å®æ—¶ç»Ÿè®¡é›†åˆå¤§å°
    for(int i=head[x]; i; i=ne[i]) {
        int y = ver[i];
        if(!color[y]) dfs(y, 3-pos); // 3-poså®ç°é»‘ç™½äº¤æ›¿
    }
}
```
> **è§£è¯»**ï¼šé€šè¿‡é€’å½’å‚æ•°`pos`ä¼ é€’é¢œè‰²çŠ¶æ€ï¼Œ`3-pos`å·§å¦™å®ç°é»‘ç™½åˆ‡æ¢ï¼ˆ1â†’2ï¼Œ2â†’1ï¼‰ã€‚é‚»æ¥è¡¨éå†ç¡®ä¿O(n)æ•ˆç‡  

**é¢˜è§£äºŒæ ¸å¿ƒç‰‡æ®µ**  
```cpp
void dfs(int point, int c) {
    color[point] = c;
    ++cnt[c];
    for(int i=first[point]; i; i=edge[i].next)
        if(!color[edge[i].to]) 
            dfs(edge[i].to, c==1?2:1); // ä¸‰ç›®è¿ç®—ç¬¦äº¤æ›¿
}
```
> **è§£è¯»**ï¼šç”¨ä¸‰ç›®è¿ç®—ç¬¦æ›¿ä»£æ•°å­¦è¿ç®—ï¼Œæå‡å¯è¯»æ€§ã€‚`first[]`æ•°ç»„ç²¾å‡†å®šä½é‚»æ¥è¡¨å¤´ï¼Œé¿å…å¤šä½™å†…å­˜å ç”¨  

**é¢˜è§£ä¸‰æ ¸å¿ƒç‰‡æ®µ**  
```cpp
void dfs(int now, int fa) {
    for(auto v: graph[now]) {
        if(v == fa) continue;  // é˜²å›é€€
        color[v] = !color[now]; // å¸ƒå°”å€¼å®ç°æŸ“è‰²
        dfs(v, now);
    }
}
```
> **è§£è¯»**ï¼šåˆ›æ–°ç”¨å¸ƒå°”æ•°ç»„`color[]`æ›¿ä»£ä¼ ç»Ÿ1/2æŸ“è‰²ï¼Œ`!color[now]`å®ç°é€»è¾‘åè½¬ã€‚æ˜¾å¼çˆ¶èŠ‚ç‚¹åˆ¤æ–­é¿å…å›æº¯  

---

### ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š`éª‘å£«åŸå ¡æŸ“è‰²æ¢é™©`ï¼ˆ8-bitåƒç´ é£ï¼‰  
**æ ¸å¿ƒæ¼”ç¤º**ï¼š  
![](https://assets.huhao.ai/anim/bipartite-demo.gif)
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š
   - æ ‘èŠ‚ç‚¹â†’åƒç´ åŸå ¡ï¼Œè¾¹â†’åŠæ¡¥
   - æ§åˆ¶é¢æ¿ï¼šé€Ÿåº¦æ»‘å—/å•æ­¥æ‰§è¡Œ/AIè‡ªåŠ¨æ¼”ç¤º

2. **æŸ“è‰²è¿‡ç¨‹**ï¼š
   - æ ¹åŸå ¡äº®èµ·ï¼ˆé—ªçƒé»„å…‰+å·è§’éŸ³æ•ˆï¼‰
   - DFSéå†æ—¶ï¼šå½“å‰åŸå ¡æ˜¾ç¤ºå…‰åœˆï¼Œé‚»æ¥åŸå ¡å˜è‰²ï¼ˆé»‘â†’é“ç›”ï¼Œç™½â†’é“¶ç”²ï¼‰
   - éŸ³æ•ˆï¼šæŸ“è‰²æˆåŠŸï¼ˆ"å®"ï¼‰ï¼Œå‘ç°æ–°åŸå ¡ï¼ˆé©¬è¹„å£°ï¼‰

3. **ç»“æœå±•ç¤º**ï¼š
   - ä¸¤ä¾§åˆ†åˆ«å‡èµ·é»‘ç™½æ——å¸œï¼ˆcntâ‚/cntâ‚‚æ•°å€¼æ˜¾ç¤ºï¼‰
   - å¯æ·»åŠ è¾¹æ˜¾ç¤ºä¸ºé‡‘è‰²è™šçº¿ï¼ˆç‚¹å‡»è§¦å‘æ·»åŠ åŠ¨ç”»ï¼‰
   - èƒœåˆ©éŸ³æ•ˆ+å…¬å¼æµ®ç°ï¼š`cntâ‚Ã—cntâ‚‚âˆ’(nâˆ’1)`

4. **æ¸¸æˆåŒ–è®¾è®¡**ï¼š
   - æ¯æŸ“è‰²10ä¸ªèŠ‚ç‚¹è§£é”æ–°å…³å¡
   - é”™è¯¯å°è¯•ï¼ˆåŒè‰²ç›¸è¿ï¼‰è§¦å‘åŸå ¡éœ‡åŠ¨+è­¦æŠ¥éŸ³
   - ç§¯åˆ†ç³»ç»Ÿï¼šå¿«é€Ÿå‡†ç¡®å®Œæˆè·å¾—åƒç´ å‹‹ç« 

**æŠ€æœ¯å®ç°**ï¼šCanvasåˆ†å±‚ç»˜åˆ¶ï¼ˆèƒŒæ™¯å±‚/åŸå ¡å±‚/åŠ¨ç”»å±‚ï¼‰ï¼ŒWeb Audio APIè§¦å‘éŸ³æ•ˆï¼ŒrequestAnimationFrameæ§åˆ¶å¸§ç‡

---

### æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **æ´›è°·P1330** å°é”é˜³å…‰å¤§å­¦  
   â†’ ç›´æ¥åº”ç”¨äºŒåˆ†å›¾æ€§è´¨  
2. **æ´›è°·P3386** äºŒåˆ†å›¾æœ€å¤§åŒ¹é…  
   â†’ åŒˆç‰™åˆ©ç®—æ³•è¿›é˜¶  
3. **æ´›è°·P1155** åŒæ ˆæ’åº  
   â†’ äºŒåˆ†å›¾åˆ¤å®šå˜å½¢  

---

### å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **Hamer_sansçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"åå¹´OIä¸€åœºç©ºï¼Œä¸å¼€long longè§ç¥–å®—â€”â€”å½“n=10âµæ—¶ï¼Œcntâ‚Ã—cntâ‚‚å¯èƒ½è¾¾åˆ°2.5Ã—10â¹ï¼Œè¶…è¿‡intä¸Šé™"*  
> **Kayæ€»ç»“**ï¼šè¿™æ˜¯ç®—æ³•ç«èµ›çš„ç»å…¸é™·é˜±ï¼å»ºè®®ï¼š  
> 1. è§ä¹˜æ³•å…ˆæ£€æŸ¥æ•°æ®èŒƒå›´  
> 2. ç”¨`typedef long long ll`ç»Ÿä¸€æ›¿æ¢  
> 3. è¾“å‡ºç”¨`%lld`æ ¼å¼  

---

æœ¬æ¬¡è§£æé€šè¿‡åƒç´ åŠ¨ç”»å¯è§†åŒ–äºŒåˆ†å›¾æŸ“è‰²è¿‡ç¨‹ï¼Œç»“åˆç²¾é€‰é¢˜è§£çš„æ ¸å¿ƒä»£ç åˆ†æï¼Œæ­ç¤ºäº†"æœ€å¤§å¯æ·»åŠ è¾¹æ•°=é»‘ç™½ç‚¹ä¹˜ç§¯-å·²æœ‰è¾¹æ•°"çš„æ•°å­¦æœ¬è´¨ã€‚æŒæ¡æ ‘ç»“æ„çš„äºŒåˆ†å›¾ç‰¹æ€§æ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„å…³é”®ã€‚

---
å¤„ç†ç”¨æ—¶ï¼š89.65ç§’
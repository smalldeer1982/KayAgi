# é¢˜ç›®ä¿¡æ¯

# Yet Another Minimization Problem

## é¢˜ç›®æè¿°

You are given two arrays $ a $ and $ b $ , both of length $ n $ .

You can perform the following operation any number of times (possibly zero): select an index $ i $ ( $ 1 \leq i \leq n $ ) and swap $ a_i $ and $ b_i $ .

Let's define the cost of the array $ a $ as $ \sum_{i=1}^{n} \sum_{j=i + 1}^{n} (a_i + a_j)^2 $ . Similarly, the cost of the array $ b $ is $ \sum_{i=1}^{n} \sum_{j=i + 1}^{n} (b_i + b_j)^2 $ .

Your task is to minimize the total cost of two arrays.

## è¯´æ˜/æç¤º

In the second test case, in one of the optimal answers after all operations $ a = [2, 6, 4, 6] $ , $ b = [3, 7, 6, 1] $ .

The cost of the array $ a $ equals to $ (2 + 6)^2 + (2 + 4)^2 + (2 + 6)^2 + (6 + 4)^2 + (6 + 6)^2 + (4 + 6)^2 = 508 $ .

The cost of the array $ b $ equals to $ (3 + 7)^2 + (3 + 6)^2 + (3 + 1)^2 + (7 + 6)^2 + (7 + 1)^2 + (6 + 1)^2 = 479 $ .

The total cost of two arrays equals to $ 508 + 479 = 987 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
1
3
6
4
3 6 6 6
2 7 4 1
4
6 7 2 4
2 5 3 5```

### è¾“å‡º

```
0
987
914```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šYet Another Minimization Problem æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰+ æ•°å­¦å…¬å¼åŒ–ç®€  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œåœ¨äº**å…ˆé€šè¿‡æ•°å­¦åŒ–ç®€æ‰¾åˆ°â€œå¯å˜çš„ä»£ä»·éƒ¨åˆ†â€ï¼Œå†ç”¨åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰å¤„ç†æ¯ä¸ªä½ç½®çš„é€‰æ‹©**ã€‚  

### 1.1 é—®é¢˜æœ¬è´¨ï¼šæ‰¾åˆ°â€œä¸å˜â€ä¸â€œå¯å˜â€  
é¢˜ç›®è¦æ±‚æœ€å°åŒ–ä¸¤ä¸ªæ•°ç»„çš„costä¹‹å’Œï¼Œè€Œcostçš„å®šä¹‰æ˜¯`Î£Î£(a_i+a_j)Â²`ï¼ˆi<jï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡**å±•å¼€å¹³æ–¹å…¬å¼**åŒ–ç®€ï¼š  
æ€»cost = `(n-1)(Î£a_iÂ² + Î£b_iÂ²) + 2(Î£Î£a_i a_j + Î£Î£b_i b_j)`ï¼ˆi<jï¼‰ã€‚  
å…¶ä¸­ï¼Œ**å‰åŠéƒ¨åˆ†`(n-1)(Î£a_iÂ² + Î£b_iÂ²)`æ˜¯å®šå€¼**â€”â€”ä¸ç®¡æ€ä¹ˆäº¤æ¢a_iå’Œb_iï¼Œæ¯ä¸ªå…ƒç´ çš„å¹³æ–¹å’Œéƒ½ä¸ä¼šå˜ï¼å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦æœ€å°åŒ–**ååŠéƒ¨åˆ†**ï¼ˆå³`Î£Î£a_i a_j + Î£Î£b_i b_j`ï¼‰ã€‚  


### 1.2 åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€è·¯  
åŠ¨æ€è§„åˆ’å°±åƒ**â€œä¸€æ­¥æ­¥é€‰è·¯â€**ï¼šæ¯ä¸€æ­¥ï¼ˆå¤„ç†ç¬¬iä¸ªå…ƒç´ ï¼‰éƒ½æœ‰ä¸¤ä¸ªé€‰æ‹©â€”â€”äº¤æ¢a_iå’Œb_iï¼Œæˆ–è€…ä¸äº¤æ¢ã€‚æˆ‘ä»¬éœ€è¦è®°å½•â€œé€‰åˆ°ç¬¬iæ­¥æ—¶çš„çŠ¶æ€â€ï¼Œå¹¶è®¡ç®—æ­¤æ—¶çš„æœ€å°ä»£ä»·ã€‚  

è¿™é‡Œçš„**çŠ¶æ€**é€‰ä»€ä¹ˆï¼Ÿ  
è§‚å¯Ÿå‘ç°ï¼š`Î£Î£a_i a_j`ï¼ˆi<jï¼‰ç­‰äº`a_i Ã— å‰i-1ä¸ªaçš„å’Œ`çš„æ€»å’Œï¼ˆæ¯”å¦‚ç¬¬3ä¸ªaçš„è´¡çŒ®æ˜¯a3*(a1+a2)ï¼‰ã€‚åŒç†ï¼Œ`Î£Î£b_i b_j`ç­‰äº`b_i Ã— å‰i-1ä¸ªbçš„å’Œ`çš„æ€»å’Œã€‚è€Œ`å‰i-1ä¸ªaçš„å’Œ + å‰i-1ä¸ªbçš„å’Œ`æ˜¯å®šå€¼ï¼ˆç­‰äºå‰i-1ä¸ªå…ƒç´ çš„`a_k + b_k`ä¹‹å’Œï¼‰ã€‚å› æ­¤ï¼Œåªè¦è®°å½•**å‰iä¸ªaçš„å’Œ**ï¼ˆè®°ä¸ºjï¼‰ï¼Œå°±èƒ½ç®—å‡ºå‰iä¸ªbçš„å’Œï¼ˆå®šå€¼ - jï¼‰ï¼  

æ‰€ä»¥ï¼Œæˆ‘ä»¬å®šä¹‰`dp[i][j]`ä¸ºï¼š**å¤„ç†å‰iä¸ªå…ƒç´ åï¼Œaçš„å‰ç¼€å’Œä¸ºjæ—¶ï¼ŒååŠéƒ¨åˆ†çš„æœ€å°ä»£ä»·**ã€‚  


### 1.3 å¯è§†åŒ–è®¾è®¡æ€è·¯  
ä¸ºäº†ç›´è§‚å±•ç¤ºDPçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ª**8ä½åƒç´ é£çš„â€œè·¯å¾„é€‰æ‹©æ¸¸æˆâ€**ï¼š  
- ç”¨åƒç´ æ ¼å­è¡¨ç¤º`dp[i][j]`çš„çŠ¶æ€ï¼ˆiæ˜¯è¡Œï¼Œjæ˜¯åˆ—ï¼‰ï¼Œæ ¼å­é¢œè‰²è¶Šæ·±è¡¨ç¤ºä»£ä»·è¶Šå°ï¼›  
- æ¯ä¸€æ­¥ï¼ˆå¤„ç†ç¬¬iä¸ªå…ƒç´ ï¼‰ä¼šæœ‰ä¸¤ä¸ªâ€œç®­å¤´â€ï¼šçº¢è‰²ç®­å¤´ä»£è¡¨â€œä¸äº¤æ¢â€ï¼Œè“è‰²ç®­å¤´ä»£è¡¨â€œäº¤æ¢â€ï¼Œç®­å¤´æŒ‡å‘ä¸‹ä¸€æ­¥çš„çŠ¶æ€ï¼›  
- å½“çŠ¶æ€æ›´æ–°æ—¶ï¼Œæ ¼å­ä¼šé—ªçƒå¹¶ä¼´éšâ€œå®â€çš„åƒç´ éŸ³æ•ˆï¼›  
- æœ€ç»ˆæ‰¾åˆ°æœ€æµ…é¢œè‰²çš„æ ¼å­ï¼ˆæœ€å°ä»£ä»·ï¼‰æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ  

æˆ‘ä»**æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§**ä¸‰ä¸ªç»´åº¦ç­›é€‰å‡º3ä»½ä¼˜è´¨é¢˜è§£ï¼š  


### é¢˜è§£ä¸€ï¼šinclude_BMï¼ˆèµ16ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ˜¯æœ¬é¢˜çš„â€œæ ‡æ†è§£æ³•â€â€”â€”**å…¬å¼åŒ–ç®€ä¸€æ­¥åˆ°ä½ï¼ŒDPçŠ¶æ€å®šä¹‰ç²¾å‡†**ã€‚ä½œè€…é¦–å…ˆé€šè¿‡æ•°å­¦æ¨å¯¼å‰¥ç¦»å‡ºâ€œå¯å˜ä»£ä»·â€ï¼Œç„¶åæ˜ç¡®DPçš„çŠ¶æ€å’Œè½¬ç§»æ–¹ç¨‹ã€‚ä»£ç é€»è¾‘ç®€æ´ï¼Œè¾¹ç•Œæ¡ä»¶å¤„ç†ä¸¥è°¨ï¼ˆæ¯”å¦‚`f[0][0]=0`è¡¨ç¤ºâ€œå¤„ç†0ä¸ªå…ƒç´ æ—¶ï¼Œå‰ç¼€å’Œä¸º0ï¼Œä»£ä»·ä¸º0â€ï¼‰ã€‚å°¤å…¶å€¼å¾—å­¦ä¹ çš„æ˜¯**å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºâ€œå®šå€¼+å¯å˜â€**çš„æ€è·¯ï¼Œè¿™æ˜¯è§£å†³æ­¤ç±»ä¼˜åŒ–é—®é¢˜çš„å…³é”®ã€‚  


### é¢˜è§£äºŒï¼šFiraCodeï¼ˆèµ0ï¼Œä½†ä»£ç é«˜æ•ˆï¼‰  
* **ç‚¹è¯„**ï¼šä½œè€…ç”¨**æ»šåŠ¨æ•°ç»„ä¼˜åŒ–**äº†DPçš„ç©ºé—´å¤æ‚åº¦ï¼ˆä»O(nÃ—sum)é™åˆ°O(sum)ï¼‰ã€‚å› ä¸º`dp[i][j]`åªä¾èµ–`dp[i-1][...]`ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼ˆ`tmpdp`è®°å½•å‰ä¸€æ­¥çš„çŠ¶æ€ï¼Œ`dp`è®°å½•å½“å‰æ­¥çš„çŠ¶æ€ï¼‰äº¤æ›¿æ›´æ–°ã€‚è¿™ç§ä¼˜åŒ–åœ¨å¤„ç†å¤§æ•°ç»„æ—¶éå¸¸å®ç”¨ï¼Œä½“ç°äº†å¯¹DPç©ºé—´å¤æ‚åº¦çš„æ·±åˆ»ç†è§£ã€‚  


### é¢˜è§£ä¸‰ï¼šy0y68ï¼ˆèµ0ï¼Œä½†æ€è·¯ç®€æ´ï¼‰  
* **ç‚¹è¯„**ï¼šä½œè€…è¿›ä¸€æ­¥ç®€åŒ–äº†é—®é¢˜â€”â€”æ—¢ç„¶æ€»ä»£ä»·å¯ä»¥è¡¨ç¤ºä¸º`(n-2)(Î£a_iÂ²+Î£b_iÂ²) + s1Â² + s2Â²`ï¼ˆs1æ˜¯açš„æ€»å’Œï¼Œs2æ˜¯bçš„æ€»å’Œï¼Œä¸”s1+s2æ˜¯å®šå€¼ï¼‰ï¼Œé‚£ä¹ˆé—®é¢˜è½¬åŒ–ä¸º**æ‰¾åˆ°æ‰€æœ‰å¯è¡Œçš„s1ï¼Œè®¡ç®—å¯¹åº”çš„æ€»ä»£ä»·ï¼Œå–æœ€å°å€¼**ã€‚ä½œè€…ç”¨DPåˆ¤æ–­â€œå“ªäº›s1æ˜¯å¯è¡Œçš„â€ï¼ˆå³å¯ä»¥é€šè¿‡äº¤æ¢å¾—åˆ°ï¼‰ï¼Œå†æšä¸¾è®¡ç®—æœ€å°å€¼ã€‚è¿™ç§â€œç›®æ ‡è½¬æ¢â€çš„æ€è·¯éå¸¸å·§å¦™ï¼Œé€‚åˆå½“é—®é¢˜çš„â€œå¯å˜éƒ¨åˆ†â€å¯ä»¥ç”¨æ•°å­¦å…¬å¼ç›´æ¥è¡¨è¾¾æ—¶ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥  

### 3.1 æ ¸å¿ƒéš¾ç‚¹1ï¼šå…¬å¼åŒ–ç®€â€”â€”å¦‚ä½•æ‰¾åˆ°â€œå¯å˜ä»£ä»·â€ï¼Ÿ  
* **åˆ†æ**ï¼šå¾ˆå¤šåŒå­¦æ‹¿åˆ°é¢˜ç›®ä¼šç›´æ¥å°è¯•â€œæš´åŠ›æšä¸¾æ‰€æœ‰äº¤æ¢æƒ…å†µâ€ï¼Œä½†n=100æ—¶è¿™å®Œå…¨ä¸å¯è¡Œã€‚å…³é”®æ˜¯**é€šè¿‡æ•°å­¦å±•å¼€å‘ç°â€œå®šå€¼éƒ¨åˆ†â€**ï¼šå¹³æ–¹é¡¹çš„å’Œ`Î£a_iÂ²`ä¸ç®¡æ€ä¹ˆäº¤æ¢éƒ½ä¸å˜ï¼Œå› ä¸ºäº¤æ¢çš„æ˜¯a_iå’Œb_iï¼Œæ¯ä¸ªå…ƒç´ çš„å¹³æ–¹è¿˜æ˜¯è‡ªå·±çš„å¹³æ–¹ã€‚åªæœ‰äº¤å‰é¡¹`Î£Î£a_i a_j`ä¼šå˜ï¼Œå› ä¸ºäº¤æ¢ä¼šæ”¹å˜aæ•°ç»„çš„å…ƒç´ ï¼Œä»è€Œæ”¹å˜äº¤å‰é¡¹çš„å’Œã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡åˆ°â€œæ±‚æœ€å°/æœ€å¤§æ€»å’Œâ€çš„é—®é¢˜ï¼Œå…ˆå°è¯•**æ‹†åˆ†å…¬å¼**ï¼Œåˆ†ç¦»â€œä¸å˜é‡â€å’Œâ€œå˜é‡â€ï¼Œè¿™èƒ½å¤§å¤§ç®€åŒ–é—®é¢˜ï¼  


### 3.2 æ ¸å¿ƒéš¾ç‚¹2ï¼šDPçŠ¶æ€è®¾è®¡â€”â€”ä¸ºä»€ä¹ˆé€‰â€œå‰ç¼€å’Œâ€ä½œä¸ºçŠ¶æ€ï¼Ÿ  
* **åˆ†æ**ï¼šäº¤å‰é¡¹`Î£Î£a_i a_j`çš„è®¡ç®—ä¾èµ–â€œå‰i-1ä¸ªaçš„å’Œâ€ï¼ˆæ¯”å¦‚a3çš„è´¡çŒ®æ˜¯a3*(a1+a2)ï¼‰ã€‚è€Œ`å‰i-1ä¸ªaçš„å’Œ + å‰i-1ä¸ªbçš„å’Œ`æ˜¯å®šå€¼ï¼ˆç­‰äºå‰i-1ä¸ª`a_k + b_k`ä¹‹å’Œï¼‰ï¼Œæ‰€ä»¥åªè¦çŸ¥é“açš„å‰ç¼€å’Œï¼Œå°±èƒ½ç®—å‡ºbçš„å‰ç¼€å’Œã€‚è¿™æ ·ï¼ŒçŠ¶æ€åªéœ€è¦è®°å½•açš„å‰ç¼€å’Œï¼Œ**å‡å°‘äº†çŠ¶æ€ç»´åº¦**ï¼ˆä»äºŒç»´é™åˆ°ä¸€ç»´ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDPçŠ¶æ€è®¾è®¡çš„å…³é”®æ˜¯â€œæŠ“ä½é—®é¢˜çš„æ ¸å¿ƒä¾èµ–â€â€”â€”å“ªäº›ä¿¡æ¯æ˜¯åç»­æ­¥éª¤å¿…é¡»ç”¨åˆ°çš„ï¼Ÿæ¯”å¦‚è¿™é‡Œçš„â€œå‰ç¼€å’Œâ€å°±æ˜¯è®¡ç®—è´¡çŒ®çš„å…³é”®ã€‚  


### 3.3 æ ¸å¿ƒéš¾ç‚¹3ï¼šçŠ¶æ€è½¬ç§»â€”â€”å¦‚ä½•è®¡ç®—äº¤æ¢/ä¸äº¤æ¢çš„ä»£ä»·ï¼Ÿ  
* **åˆ†æ**ï¼šå‡è®¾å¤„ç†ç¬¬iä¸ªå…ƒç´ æ—¶ï¼Œå‰i-1ä¸ªaçš„å’Œæ˜¯jï¼š  
  - **ä¸äº¤æ¢**ï¼šå½“å‰a_içš„è´¡çŒ®æ˜¯`a_i Ã— j`ï¼ˆå’Œå‰é¢æ‰€æœ‰aå…ƒç´ ç›¸ä¹˜ï¼‰ï¼Œå½“å‰b_içš„è´¡çŒ®æ˜¯`b_i Ã— (sum_prev - j)`ï¼ˆsum_prevæ˜¯å‰i-1ä¸ª`a_k + b_k`ä¹‹å’Œï¼Œæ‰€ä»¥bçš„å‰ç¼€å’Œæ˜¯sum_prev - jï¼‰ã€‚æ€»è´¡çŒ®å¢é‡æ˜¯`a_iÃ—j + b_iÃ—(sum_prev - j)`ã€‚  
  - **äº¤æ¢**ï¼šæŠŠa_iå’Œb_iäº¤æ¢ï¼Œè´¡çŒ®å¢é‡å˜æˆ`b_iÃ—j + a_iÃ—(sum_prev - j)`ï¼ˆå› ä¸ºç°åœ¨aæ•°ç»„çš„å…ƒç´ æ˜¯b_iï¼Œbæ•°ç»„çš„å…ƒç´ æ˜¯a_iï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è½¬ç§»çš„å…³é”®æ˜¯**æ¨¡æ‹Ÿâ€œé€‰æ‹©åçš„å˜åŒ–â€**â€”â€”æ¯åšä¸€ä¸ªé€‰æ‹©ï¼ˆäº¤æ¢/ä¸äº¤æ¢ï¼‰ï¼Œè®¡ç®—è¿™ä¸ªé€‰æ‹©å¸¦æ¥çš„â€œä»£ä»·å¢é‡â€ï¼Œç„¶åæ›´æ–°çŠ¶æ€ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
1. **å…¬å¼åŒ–ç®€ä¼˜å…ˆ**ï¼šé‡åˆ°æ¶‰åŠå¹³æ–¹ã€æ±‚å’Œçš„é—®é¢˜ï¼Œå…ˆå±•å¼€å…¬å¼ï¼Œå¯»æ‰¾ä¸å˜é‡ï¼›  
2. **çŠ¶æ€è®¾è®¡æŠ“æ ¸å¿ƒ**ï¼šé€‰æ‹©â€œåç»­æ­¥éª¤å¿…é¡»ä¾èµ–çš„ä¿¡æ¯â€ä½œä¸ºçŠ¶æ€ï¼Œå‡å°‘ç»´åº¦ï¼›  
3. **è½¬ç§»æ–¹ç¨‹ç®—å¢é‡**ï¼šæ¯ä¸€æ­¥çš„ä»£ä»·å˜åŒ–åªå’Œå½“å‰é€‰æ‹©æœ‰å…³ï¼Œä¸ç”¨é‡æ–°è®¡ç®—æ‰€æœ‰ä¹‹å‰çš„è´¡çŒ®ï¼›  
4. **ç©ºé—´ä¼˜åŒ–å¯é€‰**ï¼šå¦‚æœDPçŠ¶æ€åªä¾èµ–å‰ä¸€æ­¥ï¼Œå¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„å‡å°‘ç©ºé—´ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ  

### 4.1 æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆinclude_BMå’ŒFiraCodeçš„æ€è·¯ï¼Œç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–çš„DPå®ç°ï¼Œå…¼é¡¾æ•ˆç‡å’Œå¯è¯»æ€§ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;

typedef long long ll;
const int N = 110, M = 10010; // næœ€å¤š100ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤š100ï¼Œå‰ç¼€å’Œæœ€å¤š100*100=10000
const ll INF = 1e18;

int T, n, a[N], b[N];
ll dp[M], tmpdp[M]; // dp:å½“å‰æ­¥çš„çŠ¶æ€ï¼Œtmpdp:å‰ä¸€æ­¥çš„çŠ¶æ€

int main() {
    cin >> T;
    while (T--) {
        cin >> n;
        for (int i = 1; i <= n; i++) cin >> a[i];
        for (int i = 1; i <= n; i++) cin >> b[i];

        // åˆå§‹åŒ–ï¼šå¤„ç†0ä¸ªå…ƒç´ æ—¶ï¼Œå‰ç¼€å’Œä¸º0ï¼Œä»£ä»·ä¸º0
        fill(tmpdp, tmpdp + M, INF);
        tmpdp[0] = 0;

        int sum_prev = 0; // å‰i-1ä¸ªå…ƒç´ çš„a_k + b_kä¹‹å’Œ
        for (int i = 1; i <= n; i++) {
            fill(dp, dp + M, INF); // é‡ç½®å½“å‰æ­¥çš„çŠ¶æ€
            int ai = a[i], bi = b[i];
            for (int j = 0; j < M; j++) {
                if (tmpdp[j] == INF) continue; // å‰ä¸€æ­¥çš„çŠ¶æ€ä¸å¯è¾¾
                // é€‰æ‹©1ï¼šä¸äº¤æ¢a[i]å’Œb[i]
                if (j + ai < M) {
                    ll cost = tmpdp[j] + (ll)ai * j + (ll)bi * (sum_prev - j);
                    dp[j + ai] = min(dp[j + ai], cost);
                }
                // é€‰æ‹©2ï¼šäº¤æ¢a[i]å’Œb[i]
                if (j + bi < M) {
                    ll cost = tmpdp[j] + (ll)bi * j + (ll)ai * (sum_prev - j);
                    dp[j + bi] = min(dp[j + bi], cost);
                }
            }
            sum_prev += ai + bi; // æ›´æ–°å‰iä¸ªå…ƒç´ çš„a_k + b_kä¹‹å’Œ
            swap(dp, tmpdp); // æ»šåŠ¨æ•°ç»„ï¼šå½“å‰æ­¥å˜æˆä¸‹ä¸€æ­¥çš„å‰ä¸€æ­¥
        }

        // è®¡ç®—å®šå€¼éƒ¨åˆ†ï¼š(n-1)*(Î£a_iÂ² + Î£b_iÂ²)
        ll fixed = 0;
        for (int i = 1; i <= n; i++) fixed += (ll)(n - 1) * (a[i] * a[i] + b[i] * b[i]);
        // æ‰¾åˆ°æœ€å°çš„å¯å˜ä»£ä»·ï¼ˆtmpdp[j]ï¼‰ï¼Œæ€»ä»£ä»·=fixed + 2*min_var
        ll min_var = INF;
        for (int j = 0; j < M; j++) min_var = min(min_var, tmpdp[j]);
        cout << fixed + 2 * min_var << endl;
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  - ç”¨`tmpdp`è®°å½•å‰ä¸€æ­¥çš„çŠ¶æ€ï¼ˆå¤„ç†å‰i-1ä¸ªå…ƒç´ çš„æœ€å°ä»£ä»·ï¼‰ï¼Œ`dp`è®°å½•å½“å‰æ­¥ï¼ˆå¤„ç†å‰iä¸ªå…ƒç´ ï¼‰çš„çŠ¶æ€ï¼›  
  - æ¯ä¸€æ­¥éå†å‰ä¸€æ­¥çš„æ‰€æœ‰å¯è¾¾çŠ¶æ€ï¼ˆ`j`ï¼‰ï¼Œè®¡ç®—â€œä¸äº¤æ¢â€å’Œâ€œäº¤æ¢â€ä¸¤ç§é€‰æ‹©çš„ä»£ä»·ï¼Œæ›´æ–°å½“å‰æ­¥çš„çŠ¶æ€ï¼›  
  - æœ€åè®¡ç®—å®šå€¼éƒ¨åˆ†å’Œæœ€å°å¯å˜ä»£ä»·ï¼Œè¾“å‡ºæ€»ä»£ä»·ã€‚  


### 4.2 ä¼˜è´¨é¢˜è§£ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼šinclude_BMçš„DPçŠ¶æ€è½¬ç§»  
* **äº®ç‚¹**ï¼šæ˜ç¡®å†™å‡ºäº†DPçš„çŠ¶æ€å’Œè½¬ç§»æ–¹ç¨‹ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// åˆå§‹çŠ¶æ€ï¼šf[0][0] = 0
for (int i = 1; i <= n; i++) {
    for (int j = 0; j <= Max; j++) {
        dp[i][j] = INF;
        // ä¸äº¤æ¢
        if (j >= a[i] && sum_prev - (j - a[i]) >= 0) {
            dp[i][j] = min(dp[i][j], dp[i-1][j - a[i]] + a[i]*(j - a[i]) + b[i]*(sum_prev - (j - a[i])));
        }
        // äº¤æ¢
        if (j >= b[i] && sum_prev - (j - b[i]) >= 0) {
            dp[i][j] = min(dp[i][j], dp[i-1][j - b[i]] + b[i]*(j - b[i]) + a[i]*(sum_prev - (j - b[i])));
        }
    }
    sum_prev += a[i] + b[i];
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `dp[i][j]`è¡¨ç¤ºå¤„ç†å‰iä¸ªå…ƒç´ ï¼Œaçš„å‰ç¼€å’Œä¸ºjæ—¶çš„æœ€å°ä»£ä»·ï¼›  
  - ä¸äº¤æ¢æ—¶ï¼Œå‰i-1ä¸ªaçš„å’Œæ˜¯`j - a[i]`ï¼Œæ‰€ä»¥bçš„å‰ç¼€å’Œæ˜¯`sum_prev - (j - a[i])`ï¼ˆsum_prevæ˜¯å‰i-1ä¸ª`a_k + b_k`ä¹‹å’Œï¼‰ï¼›  
  - äº¤æ¢æ—¶ï¼ŒæŠŠa[i]å’Œb[i]äº’æ¢ï¼Œæ‰€ä»¥å‰i-1ä¸ªaçš„å’Œæ˜¯`j - b[i]`ï¼Œbçš„å‰ç¼€å’Œæ˜¯`sum_prev - (j - b[i])`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è½¬ç§»çš„å…³é”®æ˜¯â€œé€†å‘æ¨å¯¼â€â€”â€”å½“å‰çŠ¶æ€jæ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿæ˜¯å‰ä¸€æ­¥çš„çŠ¶æ€åŠ ä¸Šå½“å‰å…ƒç´ çš„å€¼ï¼ˆa[i]æˆ–b[i]ï¼‰ã€‚  


#### é¢˜è§£äºŒï¼šFiraCodeçš„æ»šåŠ¨æ•°ç»„ä¼˜åŒ–  
* **äº®ç‚¹**ï¼šç”¨æ»šåŠ¨æ•°ç»„å°†ç©ºé—´å¤æ‚åº¦ä»O(nÃ—M)é™åˆ°O(M)ï¼Œé€‚åˆå¤„ç†å¤§nçš„æƒ…å†µã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = 0; j <= 100 * n; j++) {
        if (tmpdp[j] == INF) continue;
        // ä¸äº¤æ¢
        dp[j + a[i]] = min(dp[j + a[i]], tmpdp[j] + a[i] * j + b[i] * (sum_prev - j));
        // äº¤æ¢
        dp[j + b[i]] = min(dp[j + b[i]], tmpdp[j] + b[i] * j + a[i] * (sum_prev - j));
    }
    sum_prev += a[i] + b[i];
    swap(dp, tmpdp); // æ»šåŠ¨æ•°ç»„
    fill(dp, dp + 100 * n + 1, INF);
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `tmpdp`è®°å½•å‰ä¸€æ­¥çš„çŠ¶æ€ï¼Œ`dp`è®°å½•å½“å‰æ­¥çš„çŠ¶æ€ï¼›  
  - å¤„ç†å®Œç¬¬iä¸ªå…ƒç´ åï¼Œ`swap(dp, tmpdp)`å°†å½“å‰æ­¥çš„çŠ¶æ€å˜æˆä¸‹ä¸€æ­¥çš„å‰ä¸€æ­¥ï¼Œç„¶åé‡ç½®`dp`ä¸ºINFï¼›  
  - è¿™ç§ä¼˜åŒ–ä¸æ”¹å˜æ—¶é—´å¤æ‚åº¦ï¼Œä½†å‡å°‘äº†ç©ºé—´ä½¿ç”¨ï¼Œå°¤å…¶å½“nå¾ˆå¤§æ—¶ï¼ˆæ¯”å¦‚n=1e3ï¼‰ï¼Œæ•ˆæœæ˜æ˜¾ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  

### 5.1 åŠ¨ç”»è®¾è®¡æ¦‚è¿°  
æˆ‘ä»¬è®¾è®¡ä¸€ä¸ª**8ä½åƒç´ é£çš„â€œDPè·¯å¾„æ¢ç´¢æ¸¸æˆâ€**ï¼Œç”¨ç›´è§‚çš„åŠ¨ç”»å±•ç¤ºDPçš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹ã€‚åŠ¨ç”»çš„æ ¸å¿ƒæ˜¯**â€œæ¯ä¸€æ­¥é€‰æ‹©â€**å’Œ**â€œçŠ¶æ€æ›´æ–°â€**ï¼Œç»“åˆå¤å¤æ¸¸æˆå…ƒç´ ï¼ˆå¦‚åƒç´ éŸ³æ•ˆã€å…³å¡è¿›åº¦ï¼‰å¢å¼ºè¶£å‘³æ€§ã€‚  


### 5.2 åŠ¨ç”»ç»†èŠ‚è®¾è®¡  

#### 1. åœºæ™¯ä¸UIåˆå§‹åŒ–ï¼ˆ8ä½åƒç´ é£ï¼‰  
- **èƒŒæ™¯**ï¼šä»¿FCçº¢ç™½æœºçš„æ·±è“è‰²èƒŒæ™¯ï¼Œç”¨æµ…ç°è‰²ç½‘æ ¼è¡¨ç¤ºDPçš„çŠ¶æ€ï¼ˆè¡Œæ˜¯iï¼Œåˆ—æ˜¯jï¼‰ï¼›  
- **UIé¢æ¿**ï¼šå±å¹•ä¸‹æ–¹æœ‰4ä¸ªæŒ‰é’®â€”â€”ã€Œå¼€å§‹ã€ã€Œå•æ­¥ã€ã€Œé‡ç½®ã€ã€Œè‡ªåŠ¨æ’­æ”¾ã€ï¼Œä»¥åŠä¸€ä¸ªé€Ÿåº¦æ»‘å—ï¼ˆæ§åˆ¶è‡ªåŠ¨æ’­æ”¾çš„é€Ÿåº¦ï¼‰ï¼›  
- **æ•°æ®å±•ç¤º**ï¼šå±å¹•å³ä¾§æ˜¾ç¤ºå½“å‰å¤„ç†çš„å…ƒç´ ï¼ˆa[i]å’Œb[i]ï¼‰ã€å‰i-1ä¸ªå…ƒç´ çš„`a_k + b_k`ä¹‹å’Œï¼ˆsum_prevï¼‰ã€‚  


#### 2. ç®—æ³•åŠ¨æ€æ¼”ç¤º  
- **çŠ¶æ€è¡¨ç¤º**ï¼šç”¨åƒç´ æ ¼å­è¡¨ç¤º`dp[i][j]`ï¼Œæ ¼å­é¢œè‰²è¶Šæ·±è¡¨ç¤ºä»£ä»·è¶Šå¤§ï¼ˆç™½è‰²è¡¨ç¤ºINFï¼Œé»‘è‰²è¡¨ç¤ºæœ€å°ä»£ä»·ï¼‰ï¼›  
- **é€‰æ‹©åŠ¨ç”»**ï¼šå¤„ç†ç¬¬iä¸ªå…ƒç´ æ—¶ï¼Œä¼šå‡ºç°ä¸¤ä¸ªçº¢è‰²/è“è‰²ç®­å¤´ï¼ˆçº¢è‰²=ä¸äº¤æ¢ï¼Œè“è‰²=äº¤æ¢ï¼‰ï¼ŒæŒ‡å‘ä¸‹ä¸€æ­¥çš„çŠ¶æ€ï¼ˆj + a[i]æˆ–j + b[i]ï¼‰ï¼›  
- **çŠ¶æ€æ›´æ–°**ï¼šå½“çŠ¶æ€è¢«æ›´æ–°æ—¶ï¼Œæ ¼å­ä¼šé—ªçƒ3æ¬¡ï¼Œå¹¶ä¼´éšâ€œå®â€çš„åƒç´ éŸ³æ•ˆï¼›  
- **è‡ªåŠ¨æ¼”ç¤º**ï¼šç‚¹å‡»ã€Œè‡ªåŠ¨æ’­æ”¾ã€ï¼ŒåŠ¨ç”»ä¼šæŒ‰æ­¥éª¤è‡ªåŠ¨æ‰§è¡Œï¼Œæ¯æ­¥é—´éš”ç”±é€Ÿåº¦æ»‘å—æ§åˆ¶ï¼ˆæœ€æ…¢1ç§’/æ­¥ï¼Œæœ€å¿«0.1ç§’/æ­¥ï¼‰ã€‚  


#### 3. æ¸¸æˆåŒ–å…ƒç´   
- **å…³å¡è¿›åº¦**ï¼šå°†å¤„ç†nä¸ªå…ƒç´ åˆ†ä¸ºnä¸ªâ€œå°å…³å¡â€ï¼Œæ¯å®Œæˆä¸€ä¸ªå…³å¡ï¼ˆå¤„ç†ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå±å¹•å³ä¸Šè§’ä¼šå¼¹å‡ºâ€œLevel Up!â€çš„åƒç´ æç¤ºï¼Œå¹¶æ’­æ”¾â€œå‡çº§â€éŸ³æ•ˆï¼›  
- **èƒœåˆ©æ¡ä»¶**ï¼šå½“å¤„ç†å®Œæ‰€æœ‰nä¸ªå…ƒç´ åï¼Œæ‰¾åˆ°æœ€æµ…é¢œè‰²çš„æ ¼å­ï¼ˆæœ€å°ä»£ä»·ï¼‰ï¼Œå±å¹•ä¸­å¤®ä¼šæ˜¾ç¤ºâ€œSuccess!â€ï¼Œå¹¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆç±»ä¼¼FCæ¸¸æˆçš„é€šå…³éŸ³ä¹ï¼‰ï¼›  
- **é”™è¯¯æç¤º**ï¼šå¦‚æœçŠ¶æ€ä¸å¯è¾¾ï¼ˆæ¯”å¦‚j + a[i]è¶…è¿‡Mï¼‰ï¼Œä¼šæ’­æ”¾â€œé”™è¯¯â€éŸ³æ•ˆï¼ˆçŸ­ä¿ƒçš„â€œå“”â€å£°ï¼‰ï¼Œå¹¶è·³è¿‡è¯¥é€‰æ‹©ã€‚  


### 5.3 ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ  
- **åƒç´ é£æ ¼**ï¼šå¤å¤çš„8ä½åƒç´ é£å®¹æ˜“å¼•èµ·é’å°‘å¹´çš„å…´è¶£ï¼Œé™ä½å¯¹â€œç®—æ³•â€çš„ææƒ§æ„Ÿï¼›  
- **åŠ¨ç”»æ¼”ç¤º**ï¼šå°†æŠ½è±¡çš„DPçŠ¶æ€è½¬åŒ–ä¸ºç›´è§‚çš„â€œæ ¼å­å˜åŒ–â€ï¼Œå¸®åŠ©ç†è§£â€œçŠ¶æ€è½¬ç§»â€çš„è¿‡ç¨‹ï¼›  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šå…³å¡è¿›åº¦ã€èƒœåˆ©éŸ³æ•ˆç­‰å…ƒç´ å¢åŠ äº†â€œé—¯å…³â€çš„æ„Ÿè§‰ï¼Œè®©å­¦ä¹ æ›´æœ‰åŠ¨åŠ›ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ  

### 6.1 é€šç”¨æ€è·¯è¿ç§»  
æœ¬é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼ˆ**å…¬å¼åŒ–ç®€+DPå¤„ç†é€‰æ‹©**ï¼‰å¯ä»¥è¿ç§»åˆ°ä»¥ä¸‹åœºæ™¯ï¼š  
1. **èƒŒåŒ…é—®é¢˜å˜ç§**ï¼šæ¯”å¦‚â€œæ¯ä¸ªç‰©å“æœ‰ä¸¤ç§é€‰æ‹©ï¼Œæ±‚æœ€å°ä»£ä»·â€çš„é—®é¢˜ï¼›  
2. **å­—ç¬¦ä¸²ç¼–è¾‘é—®é¢˜**ï¼šæ¯”å¦‚â€œæ¯ä¸ªå­—ç¬¦å¯ä»¥æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ï¼Œæ±‚æœ€å°ç¼–è¾‘ä»£ä»·â€ï¼›  
3. **çŠ¶æ€å‹ç¼©DP**ï¼šæ¯”å¦‚â€œæ¯ä¸ªä½ç½®æœ‰ä¸¤ç§çŠ¶æ€ï¼Œè®°å½•çŠ¶æ€çš„å’Œ/è®¡æ•°â€çš„é—®é¢˜ã€‚  


### 6.2 æ´›è°·ç»ƒä¹ æ¨è  
1. **æ´›è°· P1048 é‡‡è¯**ï¼ˆ01èƒŒåŒ…åŸºç¡€ï¼‰  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯01èƒŒåŒ…çš„ç»å…¸é¢˜ï¼Œå¸®åŠ©ä½ å·©å›ºâ€œé€‰æ‹©/ä¸é€‰æ‹©â€çš„DPæ€è·¯ã€‚  
2. **æ´›è°· P1833 æ¨±èŠ±**ï¼ˆå¤šç»´èƒŒåŒ…ï¼‰  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦å¤„ç†â€œæ—¶é—´â€å’Œâ€œä»·å€¼â€ä¸¤ä¸ªç»´åº¦çš„çŠ¶æ€ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œå‰ç¼€å’Œâ€çŠ¶æ€è®¾è®¡ã€‚  
3. **æ´›è°· P2340 å¥¶ç‰›é˜…å…µ**ï¼ˆDPçŠ¶æ€è®¾è®¡ï¼‰  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦è®¾è®¡â€œå½“å‰ä½ç½®â€å’Œâ€œå½“å‰çŠ¶æ€â€çš„DPï¼Œé”»ç‚¼çŠ¶æ€è®¾è®¡èƒ½åŠ›ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  

### 7.1 æ¥è‡ªé¢˜è§£çš„ç»éªŒ  
- **include_BM**ï¼šâ€œå…¬å¼åŒ–ç®€æ˜¯å…³é”®ï¼Œä¸è¦ä¸€å¼€å§‹å°±æƒ³æš´åŠ›æšä¸¾ã€‚â€â€”â€”å¾ˆå¤šåŒå­¦æ‹¿åˆ°é¢˜ä¼šç›´æ¥å°è¯•æš´åŠ›ï¼Œä½†é€šè¿‡æ•°å­¦åŒ–ç®€å¯ä»¥å¿«é€Ÿæ‰¾åˆ°é—®é¢˜çš„æ ¸å¿ƒã€‚  
- **FiraCode**ï¼šâ€œæ»šåŠ¨æ•°ç»„æ˜¯DPçš„å¸¸ç”¨ä¼˜åŒ–æ‰‹æ®µï¼Œèƒ½èŠ‚çœç©ºé—´ã€‚â€â€”â€”å½“DPçŠ¶æ€åªä¾èµ–å‰ä¸€æ­¥æ—¶ï¼Œä¸€å®šè¦å°è¯•æ»šåŠ¨æ•°ç»„ï¼  


### 7.2 æˆ‘çš„å¿ƒå¾—  
- **å¤šå†™æ¨å¯¼è¿‡ç¨‹**ï¼šé‡åˆ°æ•°å­¦å…¬å¼ï¼Œä¸€å®šè¦äº²æ‰‹å±•å¼€åŒ–ç®€ï¼Œä¸è¦æ€•éº»çƒ¦ï¼›  
- **è°ƒè¯•æ—¶æ‰“å°çŠ¶æ€**ï¼šå¦‚æœDPç»“æœä¸å¯¹ï¼Œå¯ä»¥æ‰“å°æ¯ä¸€æ­¥çš„`dp`æ•°ç»„ï¼Œçœ‹çŠ¶æ€æ˜¯å¦æ­£ç¡®è½¬ç§»ï¼›  
- **ä»ç®€å•æ¡ˆä¾‹å…¥æ‰‹**ï¼šæ¯”å¦‚n=1æˆ–n=2æ—¶ï¼Œæ‰‹åŠ¨è®¡ç®—ç»“æœï¼ŒéªŒè¯DPçš„æ­£ç¡®æ€§ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œYet Another Minimization Problemâ€çš„åˆ†æå°±åˆ°è¿™é‡Œï¼å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£**â€œå…¬å¼åŒ–ç®€+åŠ¨æ€è§„åˆ’â€**çš„è§£é¢˜æ€è·¯ã€‚è®°ä½ï¼š**ç®—æ³•ä¸æ˜¯â€œé­”æ³•â€ï¼Œè€Œæ˜¯â€œä¸€æ­¥æ­¥è§£å†³é—®é¢˜çš„é€»è¾‘â€**â€”â€”å…ˆæ‹†åˆ†é—®é¢˜ï¼Œå†è®¾è®¡çŠ¶æ€ï¼Œæœ€åå®ç°è½¬ç§»ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä½ ä¸€å®šèƒ½è½»æ¾åº”å¯¹ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š163.65ç§’
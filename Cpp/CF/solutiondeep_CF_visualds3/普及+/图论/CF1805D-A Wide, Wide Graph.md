# é¢˜ç›®ä¿¡æ¯

# A Wide, Wide Graph

## é¢˜ç›®æè¿°

ç»™å®šä¸€æ£µ $n$ï¼ˆ$2\leq n\leq 10^5$ï¼‰ä¸ªèŠ‚ç‚¹çš„æ— æ ¹æ ‘ï¼Œå¯¹äºæ¯ä¸ª $k$ï¼ˆ$1\leq k \leq n$ï¼‰ï¼Œå®šä¹‰ä¸€ä¸ªæ— å‘å›¾ $G_k$ï¼Œå…¶ä¸­ç”±è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹ $u$ å’Œ $v$ çš„è·ç¦»è‡³å°‘ä¸º $k$ã€‚è¯·ä½ è®¡ç®— $G_k$ çš„è¿é€šå—ä¸ªæ•°ã€‚

## è¯´æ˜/æç¤º

$2\leq n\leq 10^5$


ç¬¬ä¸€ä¸ªæ ·ä¾‹ä¸­ï¼Œå½“$k=1$æ—¶ï¼Œæ‰€æœ‰çš„ç‚¹éƒ½è¿é€šï¼›å½“$k=4$æ—¶ï¼Œåªæœ‰$(4,6)$å’Œ$(5,6)$ä¸¤æ¡è¾¹è¿é€šï¼Œæ‰€ä»¥è¿é€šå—ä¸ªæ•°ä¸º4ã€‚

ç¬¬äºŒä¸ªæ ·ä¾‹ä¸­ï¼Œå½“$k=3$æ—¶ï¼ŒèŠ‚ç‚¹1ã€4ã€5æ„æˆä¸€ä¸ªè¿é€šå—ï¼Œå…¶ä½™ä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«ä¸ºä¸€ä¸ªè¿é€šå—ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
6
1 2
1 3
2 4
2 5
3 6```

### è¾“å‡º

```
1 1 2 4 6 6```

## æ ·ä¾‹ #2

### è¾“å…¥

```
5
1 2
2 3
3 4
3 5```

### è¾“å‡º

```
1 1 3 5 5```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šA Wide, Wide Graph æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ ‘çš„ç›´å¾„` + `è´ªå¿ƒè®¡æ•°`  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æƒ³è±¡ä¸€æ£µæ ‘æ˜¯ä¸€å¼ æ¢é™©åœ°å›¾ğŸŒ²ï¼Œç›´å¾„ç«¯ç‚¹å¦‚åŒåœ°å›¾ä¸Šæœ€è¿œçš„ä¸¤ä¸ªå®è—ç‚¹ğŸ’ã€‚å½“kå¢å¤§æ—¶ï¼Œåªæœ‰è·ç¦»è¶³å¤Ÿè¿œçš„ç‚¹æ‰èƒ½"é€šä¿¡"ï¼ˆè¿è¾¹ï¼‰ã€‚è§£é¢˜å…³é”®åœ¨äºï¼š
> - æ ‘çš„ç›´å¾„æ€§è´¨ï¼šä»»æ„ç‚¹çš„æœ€è¿œç‚¹å¿…æ˜¯ç›´å¾„ç«¯ç‚¹ä¹‹ä¸€ï¼ˆç±»ä¼¼"åœ°å›¾è¾¹ç¼˜"ï¼‰
> - è´ªå¿ƒç­–ç•¥ï¼šæ¯ä¸ªç‚¹åªä¿ç•™ä¸æœ€è¿œç‚¹çš„æ½œåœ¨è¿æ¥
> 
> **æ ¸å¿ƒæµç¨‹**ï¼š  
> 1. ç”¨ä¸¤æ¬¡DFSæ‰¾åˆ°ç›´å¾„ç«¯ç‚¹ï¼ˆå…ˆéšæœºèµ·ç‚¹æ‰¾æœ€è¿œç‚¹Aï¼Œå†ä»Aæ‰¾æœ€è¿œç‚¹Bï¼‰
> 2. è®¡ç®—æ‰€æœ‰ç‚¹åˆ°Aã€Bçš„è·ç¦»ï¼ˆdis1/dis2ï¼‰
> 3. å¯¹æ¯ä¸ªç‚¹å–max(dis1,dis2)ä½œä¸ºå…¶"ç”Ÿå­˜é˜ˆå€¼"d_i
> 4. å½“k>d_iæ—¶ç‚¹iæˆä¸ºå­¤ç«‹ç‚¹ï¼Œç”¨æ¡¶ç»Ÿè®¡d_i+1ä½ç½®
> 
> **å¯è§†åŒ–è®¾è®¡**ï¼š  
> - åƒç´ é£æ ¼ï¼šFCçº¢ç™½æœºé£æ ¼ï¼ˆ16è‰²ï¼‰ï¼Œæ ‘èŠ‚ç‚¹ä¸º8-bitåƒç´ æ–¹å—  
> - å…³é”®åŠ¨ç”»ï¼š  
>   - ç›´å¾„ç«¯ç‚¹é—ªçƒçº¢å…‰ï¼Œè·ç¦»è®¡ç®—æ—¶æ˜¾ç¤ºæ•°å­—æ ‡ç­¾  
>   - kå¢å¤§æ—¶ï¼Œd_i<kçš„ç‚¹å˜ä¸ºç°è‰²ï¼ˆå­¤ç«‹ï¼‰å¹¶æ’­æ”¾"æ‰è½éŸ³æ•ˆ"  
> - æ§åˆ¶é¢æ¿ï¼šæ»‘åŠ¨æ¡è°ƒèŠ‚kå€¼ï¼Œå•æ­¥æ‰§è¡Œè§‚å¯Ÿè¿é€šå—åˆ†è£‚

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆlihongqian__int128ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  - æ€è·¯ç›´å‡»æ ¸å¿ƒï¼Œå®Œæ•´å‘ˆç°"æ‰¾ç›´å¾„â†’ç®—è·ç¦»â†’æ¡¶è®¡æ•°"ä¸‰æ­¥éª¤  
  - ä»£ç è§„èŒƒï¼šç”¨`dis1/dis2`æ•°ç»„æ˜ç¡®å­˜å‚¨è·ç¦»ï¼Œ`s[]`æ¡¶å‘½ååˆç†  
  - äº®ç‚¹ï¼šç›´å¾„ç«¯ç‚¹yçš„ç‰¹æ®Šå¤„ç†ï¼ˆä¸åŠ å…¥æ¡¶ï¼‰ç²¾å¦™ç¡®ä¿è®¡æ•°æ­£ç¡®æ€§  
  - è°ƒè¯•æç¤ºï¼šä½œè€…å¼ºè°ƒDFSåé‡ç½®`vis`æ•°ç»„é¿å…éå†é”™è¯¯  

**é¢˜è§£äºŒï¼ˆDemeanor_Royï¼‰**  
* **ç‚¹è¯„**ï¼š  
  - åˆ›æ–°æ€§ç”¨`ex[]`æ ‡è®°è®¿é—®çŠ¶æ€ï¼ŒèŠ‚çœäº†`vis`æ•°ç»„ç©ºé—´  
  - ä»£ç ç®€æ´æ€§çªå‡ºï¼šä»…ç”¨ä¸‰ä¸ªDFSå®Œæˆå…¨éƒ¨è®¡ç®—  
  - äº®ç‚¹ï¼šæ–­è¨€å¼æ³¨é‡Šå¸®åŠ©ç†è§£ï¼ˆå¦‚"è‹¥xåˆ°æ‰€æœ‰ç‚¹è·ç¦»â‰¤kåˆ™ç‹¬ç«‹æˆå—"ï¼‰  
  - å®è·µä»·å€¼ï¼šè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå¦‚`dis[u]=-0x3f`åˆå§‹åŒ–ï¼‰  

**é¢˜è§£ä¸‰ï¼ˆRainySoulï¼‰**  
* **ç‚¹è¯„**ï¼š  
  - å˜é‡å‘½åææ¸…æ™°ï¼ˆ`pl/pr`è¡¨ç›´å¾„ç«¯ç‚¹ï¼Œ`ans`ç›´æ¥å­˜å‚¨ç»“æœï¼‰  
  - ç®—æ³•ä¼˜åŒ–ï¼šåˆå¹¶DFSä¸è·ç¦»è®¡ç®—ï¼ˆ`dfs2`åŒæ—¶æ›´æ–°`dis1`ï¼‰  
  - äº®ç‚¹ï¼šè¾“å‡ºæ—¶ç”¨`min(ans,n)`é¿å…è¶Šç•Œï¼Œå¢å¼ºé²æ£’æ€§  

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šå¦‚ä½•ç¡®å®škå¢å¤§æ—¶çš„è¿é€šå—å˜åŒ–è§„å¾‹ï¼Ÿ**  
   * **åˆ†æ**ï¼šé€šè¿‡æ ‘çš„ç›´å¾„æ€§è´¨æ¨å¯¼å‡ºï¼šè¿é€šå—æ•°=1ï¼ˆä¸»å—ï¼‰+å­¤ç«‹ç‚¹æ•°ã€‚å­¤ç«‹ç‚¹åˆ¤å®šæ¡ä»¶ä¸ºk>max(ç‚¹åˆ°ç«¯ç‚¹çš„è·ç¦»)  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç›´å¾„æ˜¯æ ‘çš„"éª¨æ¶"ï¼Œæ‰€æœ‰ç‚¹ä¾é™„ç€å®ƒ  

2. **éš¾ç‚¹ï¼šä¸ºä½•åªéœ€è€ƒè™‘ç›´å¾„ç«¯ç‚¹ï¼Ÿ**  
   * **åˆ†æ**ï¼šæ•°å­¦å½’çº³æ³•å¯è¯ï¼Œä»»æ„ç‚¹uçš„æœ€è¿œç‚¹å¿…æ˜¯ç›´å¾„ç«¯ç‚¹ã€‚è‹¥uä¸véç«¯ç‚¹èƒ½è¿è¾¹ï¼Œåˆ™é€šè¿‡ç«¯ç‚¹è·¯å¾„å¿…ç„¶æ›´ä¼˜  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœ€è¿œç‚¹=ç›´å¾„ç«¯ç‚¹ â†’ å‡å°‘æ— æ•ˆè¾¹è®¡ç®—  

3. **éš¾ç‚¹ï¼šå¦‚ä½•é«˜æ•ˆç»Ÿè®¡å­¤ç«‹ç‚¹ï¼Ÿ**  
   * **åˆ†æ**ï¼šæ¡¶è®¡æ•°æŠ€å·§ï¼ˆd_i+1å¤„+1ï¼‰ï¼Œå‰ç¼€å’Œå®ç°O(1)çŠ¶æ€è½¬ç§»  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¡¶æ˜¯ç¦»æ•£åŒ–è®¡æ•°çš„åˆ©å™¨  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **é—®é¢˜åˆ†è§£æ³•**ï¼šå°†è¿é€šå—é—®é¢˜æ‹†è§£ä¸ºï¼ˆç›´å¾„æœç´¢+è·ç¦»è®¡ç®—+è®¡æ•°ï¼‰  
- **ç©ºé—´æ¢æ—¶é—´**ï¼šç”¨`dis1/dis2`å­˜å‚¨è·ç¦»é¿å…é‡å¤è®¡ç®—  
- **è¾¹ç•Œé˜²å¾¡**ï¼šk>ç›´å¾„é•¿åº¦æ—¶ç›´æ¥è¿”å›nï¼ˆå¦‚`min(ans,n)`ï¼‰  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**  
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=1e5+5;

vector<int> g[N];
int disA[N], disB[N], bucket[N];

// è®¡ç®—ä»èµ·ç‚¹å‡ºå‘çš„æ‰€æœ‰è·ç¦»
void dfs(int u, int fa, int dis[]) {
    for(int v:g[u]) 
        if(v!=fa) {
            dis[v]=dis[u]+1;
            dfs(v,u,dis);
        }
}

int main() {
    int n; cin>>n;
    for(int i=1,u,v;i<n;++i) {
        cin>>u>>v;
        g[u].push_back(v);
        g[v].push_back(u);
    }

    // ç¬¬ä¸€æ¬¡DFSï¼šæ‰¾ç›´å¾„ç«¯ç‚¹A
    disA[1]=0; 
    dfs(1,0,disA);
    int A=1;
    for(int i=1;i<=n;++i) 
        if(disA[i]>disA[A]) A=i;

    // ç¬¬äºŒæ¬¡DFSï¼šè®¡ç®—åˆ°Açš„è·ç¦»å¹¶æ‰¾ç«¯ç‚¹B
    disA[A]=0;
    dfs(A,0,disA);
    int B=A;
    for(int i=1;i<=n;++i) 
        if(disA[i]>disA[B]) B=i;

    // ç¬¬ä¸‰æ¬¡DFSï¼šè®¡ç®—åˆ°Bçš„è·ç¦»
    disB[B]=0;
    dfs(B,0,disB);

    // æ¡¶è®¡æ•°ï¼ˆæ’é™¤ç«¯ç‚¹Bï¼‰
    for(int i=1;i<=n;++i) 
        if(i!=B) 
            bucket[max(disA[i],disB[i])+1]++;

    // å‰ç¼€å’Œè®¡ç®—ç­”æ¡ˆ
    int sum=1; // åˆå§‹è¿é€šå—
    for(int k=1;k<=n;++k) {
        sum += bucket[k];
        cout<<min(sum,n)<<' '; 
    }
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
> 1. **DFSä¸‰é‡å¥**ï¼šé¦–æ¬¡å®šä½ç›´å¾„ç«¯ç‚¹Aï¼ŒäºŒæ¬¡è®¡ç®—å„ç‚¹åˆ°Aè·ç¦»ï¼Œä¸‰æ¬¡è®¡ç®—åˆ°Bè·ç¦»  
> 2. **æ¡¶çš„ç²¾é«“**ï¼š`bucket[d_i+1]++`æ ‡è®°å­¤ç«‹ç‚¹å‘ç”Ÿæ—¶åˆ»  
> 3. **sumçš„é€’æ¨**ï¼šsum=1è¡¨ç¤ºåˆå§‹è¿é€šå—ï¼Œéškå¢å¤§é€æ­¥å¢åŠ å­¤ç«‹ç‚¹  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š`åƒç´ æ¢é™©å®¶ä¹‹è¿é€šå—åˆ†è£‚`ï¼ˆ8-bité£æ ¼ï¼‰  
**æ ¸å¿ƒæ¼”ç¤º**ï¼š  
```mermaid
graph TD
    A[å¯åŠ¨åŠ¨ç”»] --> B[ç»˜åˆ¶æ ‘å½¢åœ°å›¾]
    B --> C[çº¢è‰²é—ªçƒæ ‡è®°ç›´å¾„ç«¯ç‚¹]
    C --> D[åŠ¨æ€æ˜¾ç¤ºdis1/dis2è®¡ç®—]
    D --> E[æ»‘å—kå€¼å¢å¤§æ—¶]
    E --> F[d_iï¼œkçš„ç‚¹å˜ç°è‰²+æ‰è½éŸ³æ•ˆ]
    F --> G[è¿é€šå—è®¡æ•°å™¨å®æ—¶æ›´æ–°]
```
**äº¤äº’è®¾è®¡**ï¼š  
- **æ§åˆ¶é¢æ¿**ï¼š  
  ```plaintext
  [â–¶] è‡ªåŠ¨æ’­æ”¾  [|>] ä¸‹ä¸€æ­¥  [â†»] é‡ç½®
  é€Ÿåº¦ï¼š|=======O---| (å¯æ‹–åŠ¨)
  ```
- **éŸ³æ•ˆæ–¹æ¡ˆ**ï¼š  
  - ç›´å¾„ç«¯ç‚¹å‘ç°ï¼šğŸ® 8-bitèƒœåˆ©éŸ³æ•ˆ  
  - ç‚¹å˜å­¤ç«‹ï¼šğŸ’¥ åƒç´ çˆ†ç‚¸å£°ï¼ˆçŸ­ä¿ƒï¼‰  
  - kè¶…ç›´å¾„ï¼šğŸ”š æ¸¸æˆç»“æŸéŸ³  
- **åŠ¨ç”»é€»è¾‘**ï¼š  
  - ç”¨Canvasç»˜åˆ¶æ ‘èŠ‚ç‚¹ï¼ˆåæ ‡é¢„å…ˆè®¡ç®—ï¼‰  
  - è·ç¦»æ›´æ–°æ—¶æ˜¾ç¤ºæ•°å­—æ ‡ç­¾æ¸å˜åŠ¨ç”»  
  - å­¤ç«‹ç‚¹è‡ªç”±è½ä½“+ç²’å­æ¶ˆæ•£æ•ˆæœ  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
**æŠ€å·§è¿ç§»åœºæ™¯**ï¼š  
1. ç½‘ç»œå»¶è¿Ÿåˆ†æï¼ˆèŠ‚ç‚¹é—´æœ€å¤§è·ç¦»ï¼‰  
2. ç¾å®³é¢„è­¦ç«™ç‚¹é€‰å€ï¼ˆæœ€å°åŒ–æœ€è¿œè·ç¦»ï¼‰  
3. ç¤¾äº¤ç½‘ç»œå½±å“åŠ›è®¡ç®—ï¼ˆç›´å¾„ç«¯ç‚¹ç±»æ¯”æ ¸å¿ƒç”¨æˆ·ï¼‰  

**æ´›è°·æ¨è**ï¼š  
1. **P5536** æ ¸å¿ƒåŸå¸‚ â†’ å·©å›ºç›´å¾„æ€§è´¨+è´ªå¿ƒé€‰å€  
2. **P4408** é€ƒå­¦çš„å°å­© â†’ ç›´å¾„ç«¯ç‚¹è·ç¦»çš„å˜å¼  
3. **P3629** å·¡é€» â†’ ç›´å¾„åœ¨åŠ¨æ€è§„åˆ’ä¸­çš„åº”ç”¨  

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **lihongqian__int128çš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"DFSéå†æ—¶visæ•°ç»„å¿…é¡»é‡ç½®ï¼Œå¦åˆ™äºŒæ¬¡éå†ä¼šæ¼èŠ‚ç‚¹â€”â€”ç”¨memset(vis,0,sizeof vis)æ¯”æ‰‹åŠ¨é‡ç½®æ›´å¯é "*  
> **Kayæ€»ç»“**ï¼š  
> 1. ç›´å¾„ç±»é—®é¢˜å¿…å†™DFSæ¨¡æ¿ï¼ˆå«faé˜²å›ç¯ï¼‰  
> 2. æ¡¶è®¡æ•°çš„ä¸‹æ ‡=äº‹ä»¶å‘ç”Ÿæ—¶åˆ»ï¼ˆd_i+1å³å­¤ç«‹è§¦å‘ç‚¹ï¼‰  
> 3. å˜é‡å`disA/disB`æ¯”`d1/d2`æ›´æ˜“ç»´æŠ¤  

---
æŒæ¡æ ‘çš„ç›´å¾„ï¼Œå°±èƒ½æ¡ä½è¿é€šé—®é¢˜çš„å‘½è„‰ï¼ä¸‹æ¬¡æ¢ç´¢å†è§~ ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š455.55ç§’
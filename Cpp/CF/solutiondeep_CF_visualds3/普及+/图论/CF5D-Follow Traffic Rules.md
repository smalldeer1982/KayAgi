# é¢˜ç›®ä¿¡æ¯

# Follow Traffic Rules

## é¢˜ç›®æè¿°

Everybody knows that the capital of Berland is connected to Bercouver (the Olympic capital) by a direct road. To improve the road's traffic capacity, there was placed just one traffic sign, limiting the maximum speed. Traffic signs in Berland are a bit peculiar, because they limit the speed only at that point on the road where they are placed. Right after passing the sign it is allowed to drive at any speed.

It is known that the car of an average Berland citizen has the acceleration (deceleration) speed of $ a $ km/h $ ^{2} $ , and has maximum speed of $ v $ km/h. The road has the length of $ l $ km, and the speed sign, limiting the speed to $ w $ km/h, is placed $ d $ km ( $ 1<=d<l $ ) away from the capital of Berland. The car has a zero speed at the beginning of the journey. Find the minimum time that an average Berland citizen will need to get from the capital to Bercouver, if he drives at the optimal speed.

The car can enter Bercouver at any speed.



## æ ·ä¾‹ #1

### è¾“å…¥

```
1 1
2 1 3
```

### è¾“å‡º

```
2.500000000000
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
5 70
200 170 40
```

### è¾“å‡º

```
8.965874696353
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šFollow Traffic Rules æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

<introduction>
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†æCF5D "Follow Traffic Rules"ã€‚è¿™é“é¢˜å°†ç‰©ç†è¿åŠ¨å­¦ä¸ç¼–ç¨‹ç»“åˆï¼Œè€ƒå¯ŸåŒ€åŠ é€Ÿè¿åŠ¨çš„å…¬å¼åº”ç”¨å’Œåˆ†ç±»è®¨è®ºèƒ½åŠ›ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ ç†è§£æ ¸å¿ƒç®—æ³•é€»è¾‘ï¼ŒæŒæ¡è§£é¢˜æŠ€å·§ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚æ„Ÿå—è¿åŠ¨è¿‡ç¨‹ã€‚
</introduction>

---

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ•°å­¦å…¬å¼åº”ç”¨` ä¸ `æ¨¡æ‹Ÿåˆ†ç±»è®¨è®º`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è¿™é“é¢˜å°±åƒåœ¨ç©èµ›è½¦æ¸¸æˆï¼šæˆ‘ä»¬éœ€è¦åœ¨é™é€Ÿè·¯æ®µï¼ˆdç‚¹å‰ï¼‰æ§åˆ¶è½¦é€Ÿï¼Œåœ¨è‡ªç”±è·¯æ®µï¼ˆdç‚¹åï¼‰å…¨åŠ›åŠ é€Ÿï¼Œç”¨æœ€çŸ­æ—¶é—´åˆ°è¾¾ç»ˆç‚¹ã€‚æ ¸å¿ƒæ˜¯è¿ç”¨ç‰©ç†ä¸­çš„**åŒ€åŠ é€Ÿè¿åŠ¨å…¬å¼**ï¼š
> - é€Ÿåº¦å…¬å¼ $v = v_0 + at$
> - ä½ç§»å…¬å¼ $s = v_0t + \frac{1}{2}at^2$
> - é€Ÿåº¦-ä½ç§»å…³ç³» $v^2 - v_0^2 = 2as$
>
> **å…³é”®éš¾ç‚¹**åœ¨äºåˆ†æƒ…å†µå¤„ç†ï¼š
> 1. å½“æœ€å¤§é€Ÿåº¦v â‰¤ é™é€Ÿwæ—¶ï¼šå…¨ç¨‹åŠ é€Ÿå³å¯
> 2. å½“v > wæ—¶ï¼Œéœ€åˆ¤æ–­ï¼š
>    - èƒ½å¦åœ¨dç‚¹å‰åŠ é€Ÿåˆ°wï¼Ÿ
>    - åŠ é€Ÿåˆ°wåæ˜¯ç›´æ¥åŒ€é€Ÿè¿˜æ˜¯ç»§ç»­åŠ é€Ÿåˆ°vå†å‡é€Ÿï¼Ÿ
>
> **å¯è§†åŒ–è®¾è®¡**ï¼šæˆ‘ä»¬å°†ç”¨åƒç´ èµ›è½¦æ¸¸æˆå±•ç¤ºè¿åŠ¨è¿‡ç¨‹ã€‚æ±½è½¦ç”¨çº¢è‰²æ–¹å—è¡¨ç¤ºï¼Œèµ›é“åˆ†ä¸ºé»„ï¼ˆé™é€Ÿæ®µï¼‰ç»¿ï¼ˆè‡ªç”±æ®µï¼‰ã€‚åŠ é€Ÿæ—¶æ±½è½¦å˜çº¢é—ªçƒå¹¶å‘å‡º"å—¡"éŸ³æ•ˆï¼Œå‡é€Ÿæ—¶å˜è“å¹¶å‘å‡º"åš“"éŸ³æ•ˆï¼Œé€šè¿‡dç‚¹æ’­æ”¾"å®"æç¤ºéŸ³ã€‚æ§åˆ¶é¢æ¿æ”¯æŒå•æ­¥æ‰§è¡Œå’Œè°ƒé€Ÿï¼Œå®æ—¶æ˜¾ç¤ºé€Ÿåº¦/è·ç¦»/æ—¶é—´ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šAjwalletï¼‰**
* **ç‚¹è¯„**ï¼šæ­¤è§£æ€è·¯æ¸…æ™°ï¼Œå°†æ ¸å¿ƒç‰©ç†è®¡ç®—å°è£…ä¸ºå‡½æ•°`f()`æé«˜å¯è¯»æ€§ã€‚åˆ†ç±»è®¨è®ºå®Œæ•´è¦†ç›–ä¸‰ç§æƒ…å†µï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ã€‚ä»£ç è§„èŒƒï¼ˆå˜é‡å`stp`/`tjs`å«ä¹‰æ˜ç¡®ï¼‰ï¼Œç‰©ç†å…¬å¼æ¨å¯¼è¯¦ç»†ï¼ˆæä¾›é€Ÿåº¦-ä½ç§»å…³ç³»è¯æ˜ï¼‰ã€‚å®è·µä»·å€¼é«˜ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›ã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šå°é—¸èŸ¹ï¼‰**
* **ç‚¹è¯„**ï¼šæ³¨é‡Šè¯¦ç»†æŒ‡å‡ºæ˜“é”™ç‚¹ï¼ˆdç‚¹é€Ÿåº¦å¿…é¡»ä¸ºwï¼‰ï¼Œåˆ†ç±»é€»è¾‘ä¸¥è°¨ã€‚é‡‡ç”¨è‡ªé¡¶å‘ä¸‹ç»“æ„ï¼Œå…ˆå¤„ç†vâ‰¤wçš„ç®€å•æƒ…å†µå†è®¨è®ºå¤æ‚åœºæ™¯ã€‚å˜é‡å‘½åè§„èŒƒï¼ˆ`s_to_w`åŠ é€Ÿè·ç¦»ï¼‰ï¼Œä»£ç ç»“æ„åˆ©äºè°ƒè¯•ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šXL4453ï¼‰**
* **ç‚¹è¯„**ï¼šç›´æ¥åº”ç”¨ç‰©ç†å…¬å¼åˆ†æ­¥è®¡ç®—ï¼Œæä¾›é«˜ä¸€ç‰©ç†èƒŒæ™¯è§£é‡Šã€‚è™½ç„¶å˜é‡å‘½åç¨ç®€ï¼ˆv1/v2ï¼‰ï¼Œä½†æ ¸å¿ƒé€»è¾‘æ­£ç¡®ï¼Œå¯¹è¿åŠ¨è¿‡ç¨‹åˆ†è§£æ¸…æ™°ï¼ˆ0â†’då’Œdâ†’lä¸¤é˜¶æ®µï¼‰ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **å…³é”®ç‚¹1ï¼šå¦‚ä½•ç¡®å®š0â†’dæ®µçš„è¿åŠ¨æ¨¡å¼ï¼Ÿ**
   * **åˆ†æ**ï¼šéœ€è®¡ç®—åŠ é€Ÿåˆ°wçš„è·ç¦» $s_w = w^2/(2a)$ï¼š
     - è‹¥ $s_w \geq d$ï¼šå…¨ç¨‹åŠ é€Ÿï¼ˆå¯èƒ½è¾¾ä¸åˆ°wï¼‰
     - è‹¥ $s_w < d$ï¼šéœ€ç»§ç»­åŠ é€Ÿåˆ°$v_0 = \sqrt{(2ad + w^2)/2}$ï¼Œå†æ ¹æ®$v_0$ä¸$v$å…³ç³»é€‰æ‹©ç›´æ¥å‡é€Ÿæˆ–åŒ€é€Ÿåå‡é€Ÿ
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¯”è¾ƒ $s_w$ ä¸ $d$ æ˜¯åˆ†ç±»è®¨è®ºçš„åŸºçŸ³

2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•è®¡ç®—å¤æ‚æƒ…å†µä¸‹çš„æ—¶é—´ï¼Ÿ**
   * **åˆ†æ**ï¼šå½“éœ€è¦"åŠ é€Ÿ-åŒ€é€Ÿ-å‡é€Ÿ"æ—¶ï¼š
     1. è®¡ç®—åŠ é€Ÿåˆ°$v$æ‰€éœ€è·ç¦» $s_a = v^2/(2a)$
     2. è®¡ç®—å‡é€Ÿåˆ°$w$æ‰€éœ€è·ç¦» $s_d = (v^2 - w^2)/(2a)$
     3. åŒ€é€Ÿæ®µè·ç¦» $s_c = d - s_a - s_d$
     4. æ—¶é—´ $t = \frac{v}{a} + \frac{v-w}{a} + \frac{s_c}{v}$
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ®µè®¡ç®—æ—¶é—´å†æ±‚å’Œ

3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•ä¼˜åŒ–dâ†’læ®µçš„è®¡ç®—ï¼Ÿ**
   * **åˆ†æ**ï¼šä»åˆé€Ÿ$w$åŠ é€Ÿåˆ°$v$çš„è·ç¦» $s_{a2} = (v^2 - w^2)/(2a)$ï¼š
     - è‹¥ $s_{a2} \leq (l-d)$ï¼šæ—¶é—´ $t = \frac{v-w}{a} + \frac{(l-d)-s_{a2}}{v}$
     - å¦åˆ™ï¼šæ—¶é—´ $t = \frac{\sqrt{w^2 + 2a(l-d)} - w}{a}$
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€Ÿåº¦-ä½ç§»å…¬å¼å¯é¿å…æ±‚ä¸­é—´æ—¶é—´

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼šé—®é¢˜åˆ†è§£** - å°†å¤æ‚è¿åŠ¨æ‹†è§£ä¸º0â†’då’Œdâ†’lä¸¤ä¸ªå­é—®é¢˜
- **æŠ€å·§2ï¼šä¸´ç•Œå€¼é¢„åˆ¤** - å…ˆè®¡ç®—å…³é”®è·ç¦»ï¼ˆ$s_w$, $s_a$ï¼‰å†ç¡®å®šè¿åŠ¨æ¨¡å¼
- **æŠ€å·§3ï¼šå…¬å¼é€‰æ‹©** - æ±‚æ—¶é—´ä¼˜å…ˆç”¨$v^2 - v_0^2 = 2as$é¿å…è§£äºŒæ¬¡æ–¹ç¨‹
- **æŠ€å·§4ï¼šè¾¹ç•Œæµ‹è¯•** - ç‰¹åˆ«æ³¨æ„$d=0$æˆ–$v=w$çš„é€€åŒ–æƒ…å†µ

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
```cpp
#include <cstdio>
#include <cmath>
using namespace std;

double f(double v0, double v_max, double a, double l) {
    double s_needed = (v_max*v_max - v0*v0) / (2*a);
    if (s_needed >= l) 
        return (sqrt(v0*v0 + 2*a*l) - v0) / a;
    else 
        return (v_max - v0)/a + (l - s_needed)/v_max;
}

int main() {
    double a, v, l, d, w;
    scanf("%lf%lf%lf%lf%lf", &a, &v, &l, &d, &w);

    if (v <= w) {
        printf("%.12f", f(0, v, a, l));
    } else {
        double s_to_w = w*w/(2*a); // åŠ é€Ÿåˆ°wæ‰€éœ€è·ç¦»
        if (s_to_w >= d) {
            printf("%.12f", f(0, v, a, l));
        } else {
            double v0 = sqrt((2*a*d + w*w)/2); // ä¸´ç•Œé€Ÿåº¦
            double t1 = (v0 <= v) ? (2*v0 - w)/a  // ç›´æ¥åŠ é€Ÿå†å‡é€Ÿ
                : (v/a) + (v-w)/a + (d - (v*v/(2*a) + (v*v-w*w)/(2*a)))/v;
            double t2 = f(w, v, a, l - d); // dâ†’læ®µæ—¶é—´
            printf("%.12f", t1 + t2);
        }
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. `f()`å‡½æ•°å°è£…åŒ€åŠ é€Ÿè¿åŠ¨æ—¶é—´è®¡ç®—
  2. ä¸»å‡½æ•°ä¼˜å…ˆå¤„ç†vâ‰¤wçš„ç®€å•æƒ…å†µ
  3. è®¡ç®—`s_to_w`åˆ¤æ–­æ˜¯å¦éœ€ç‰¹æ®Šå¤„ç†é™é€Ÿæ®µ
  4. é€šè¿‡ä¸´ç•Œé€Ÿåº¦`v0`é€‰æ‹©æœ€ä¼˜è¿åŠ¨æ¨¡å¼
  5. åˆ†æ®µè®¡ç®—æ—¶é—´å¹¶æ±‚å’Œ

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**åŠ¨ç”»ä¸»é¢˜**ï¼š8ä½åƒç´ é£æ ¼èµ›è½¦æŒ‘æˆ˜é™é€Ÿè·¯æ®µ  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šæ±½è½¦åœ¨0â†’dæ®µçš„é€Ÿåº¦æ§åˆ¶ç­–ç•¥ + dâ†’læ®µå…¨åŠ›åŠ é€Ÿ  
**è®¾è®¡æ€è·¯**ï¼šç”¨é¢œè‰²å˜åŒ–ç›´è§‚å±•ç¤ºé€Ÿåº¦çŠ¶æ€ï¼ˆè“â†’åŠ é€Ÿï¼Œçº¢â†’é«˜é€Ÿï¼Œé»„â†’å‡é€Ÿï¼‰

```plaintext
[æ§åˆ¶é¢æ¿]
 å¼€å§‹ â–¶ï¸   |   æš‚åœ â¸ï¸   |   å•æ­¥ â¯ï¸   |   é‡ç½® ğŸ”„
 é€Ÿåº¦æ»‘å—ï¼šâ—â—â—â—‹ (å½“å‰1x)

[èµ›é“æ˜¾ç¤º]
 èµ·ç‚¹ [===é»„è‰²è·¯æ®µ===dç‚¹ğŸ›‘===ç»¿è‰²è·¯æ®µ===] ç»ˆç‚¹
 æ±½è½¦ï¼šğŸ”´ (å½“å‰ä½ç½®ï¼š0kmï¼Œé€Ÿåº¦ï¼š0km/h)

[çŠ¶æ€æ ]
 å·²ç”¨æ—¶é—´ï¼š0s | å½“å‰åŠ é€Ÿåº¦ï¼ša km/hÂ²
```

**åŠ¨ç”»æµç¨‹**ï¼š
1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼š  
   - åƒç´ èµ›é“æ¸²æŸ“ï¼ˆ160Ã—40ç½‘æ ¼ï¼‰  
   - æ±½è½¦ç½®äºèµ·ç‚¹ï¼ˆ8Ã—8åƒç´ æ–¹å—ï¼‰

2. **0â†’dæ®µè¿åŠ¨**ï¼ˆå…³é”®å¸§ç¤ºä¾‹ï¼‰ï¼š
   ```plaintext
   å¸§1: [ğŸ”´=======ğŸ›‘======]  // å¼€å§‹åŠ é€Ÿï¼ˆå˜çº¢ï¼‰
   å¸§2: [>> ğŸ”´=====ğŸ›‘=====] é€Ÿåº¦+20ï¼ˆæ’­æ”¾"å—¡"éŸ³æ•ˆï¼‰
   å¸§3: [>>>>>> ğŸ”´=ğŸ›‘=====] é€Ÿåº¦è¾¾åˆ°vï¼ˆå˜æ·±çº¢ï¼‰
   å¸§4: [>>>>>>>>> ğŸ”´ğŸ›‘==] å¼€å§‹å‡é€Ÿï¼ˆå˜è“ï¼Œ"åš“"éŸ³æ•ˆï¼‰
   å¸§5: [>>>>>>>>> ğŸŸ¦dç‚¹] é€Ÿåº¦é™è‡³wï¼ˆ"å®"æç¤ºéŸ³ï¼‰
   ```

3. **dâ†’læ®µè¿åŠ¨**ï¼š
   ```plaintext
   å¸§6: [>>>>>>>>> ğŸŸ¢ğŸ”´=] é‡æ–°åŠ é€Ÿï¼ˆå˜çº¢ï¼‰
   å¸§7: [>>>>>>>>> ğŸŸ¢>>ğŸ”´] è¾¾åˆ°vååŒ€é€Ÿï¼ˆæ·±çº¢é—ªçƒï¼‰
   å¸§8: åˆ°è¾¾ç»ˆç‚¹! ğŸ‰ (æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ+çƒŸèŠ±åŠ¨ç”»)
   ```

**äº¤äº’åŠŸèƒ½**ï¼š
- **å•æ­¥æ‰§è¡Œ**ï¼šæŒ‰å¸§æŸ¥çœ‹è¿åŠ¨ç»†èŠ‚ï¼Œæ˜¾ç¤ºå½“å‰ç‰©ç†å…¬å¼
- **è‡ªåŠ¨æ¼”ç¤º**ï¼šAIæ§åˆ¶æ±½è½¦æŒ‰æœ€ä¼˜ç­–ç•¥è¡Œé©¶ï¼ˆå¯è°ƒé€Ÿï¼‰
- **æ•°æ®ç»“æ„å¯è§†åŒ–**ï¼šå³ä¾§ä¿¡æ¯æ¿å®æ—¶æ›´æ–°ï¼š
   ```plaintext
   s_to_w = 20m (wÂ²/2a)
   å½“å‰æ¨¡å¼: åŠ é€Ÿâ†’åŒ€é€Ÿâ†’å‡é€Ÿ
   ä¸‹ä¸€å…³é”®ç‚¹: 2såå¼€å§‹å‡é€Ÿ
   ```

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**é€šç”¨æ€è·¯è¿ç§»**ï¼š  
è¿åŠ¨å­¦å…¬å¼å¯åº”ç”¨äºï¼š  
1. ç‰©ä½“æŠ›å°„è½¨è¿¹è®¡ç®—  
2. æœºå™¨äººè·¯å¾„è§„åˆ’  
3. äº¤é€šæµé‡ä¼˜åŒ–  

**æ´›è°·é¢˜ç›®æ¨è**ï¼š  
1. **P1036** é€‰æ•°  
   â†’ å·©å›ºæšä¸¾+æ•°å­¦ç»„åˆåº”ç”¨  
2. **P1359** ç§Ÿç”¨æ¸¸è‰‡  
   â†’ åŠ¨æ€è§„åˆ’ä¸æœ€çŸ­è·¯å¾„å˜å½¢  
3. **P1433** åƒå¥¶é…ª  
   â†’ çŠ¶æ€å‹ç¼©DPç»“åˆè·ç¦»å…¬å¼  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **å‚è€ƒç»éªŒ (æ¥è‡ª å°é—¸èŸ¹)**ï¼š  
> "æˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆå¿½ç•¥äº†dç‚¹é€Ÿåº¦å¿…é¡»ä¸ºwçš„æ¡ä»¶å¯¼è‡´WAã€‚é€šè¿‡æ‰“å°ä¸­é—´é€Ÿåº¦å€¼æ‰å®šä½åˆ°é—®é¢˜ã€‚"  

> **ç‚¹è¯„**ï¼š  
> è°ƒè¯•è¿åŠ¨å­¦é—®é¢˜æ—¶ï¼ŒéªŒè¯ä¸­é—´çŠ¶æ€ï¼ˆå¦‚å…³é”®ç‚¹é€Ÿåº¦ï¼‰è‡³å…³é‡è¦ã€‚å»ºè®®ï¼š  
> 1. åœ¨å†³ç­–åˆ†æ”¯å¤„æ‰“å°å˜é‡  
> 2. å¯¹è¾¹ç•Œæƒ…å†µï¼ˆd=0, v=wï¼‰å•ç‹¬æµ‹è¯•  
> 3. ç”¨çº¸ç¬”æ¨¡æ‹Ÿå°è§„æ¨¡ç”¨ä¾‹  

---

<conclusion>
é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†åŒ€åŠ é€Ÿè¿åŠ¨çš„å…¬å¼åº”ç”¨å’Œåˆ†ç±»è®¨è®ºæŠ€å·§ã€‚è®°ä½ï¼šå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºç‰©ç†è¿‡ç¨‹æ˜ç¡®çš„å­é—®é¢˜ï¼Œæ˜¯è§£å†³æ­¤ç±»é¢˜çš„å…³é”®ã€‚ç»§ç»­æŒ‘æˆ˜æ›´å¤šè¿åŠ¨å­¦é¢˜ç›®å§ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š209.31ç§’
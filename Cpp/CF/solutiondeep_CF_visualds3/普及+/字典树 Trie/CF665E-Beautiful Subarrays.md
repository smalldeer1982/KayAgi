# é¢˜ç›®ä¿¡æ¯

# Beautiful Subarrays

## é¢˜ç›®æè¿°

One day, ZS the Coder wrote down an array of integers $ a $ with elements $ a_{1},a_{2},...,a_{n} $ .

A subarray of the array $ a $ is a sequence $ a_{l},a_{l+1},...,a_{r} $ for some integers $ (l,r) $ such that $ 1<=l<=r<=n $ . ZS the Coder thinks that a subarray of $ a $ is beautiful if the bitwise xor of all the elements in the subarray is at least $ k $ .

Help ZS the Coder find the number of beautiful subarrays of $ a $ !

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 1
1 2 3
```

### è¾“å‡º

```
5
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 2
1 2 3
```

### è¾“å‡º

```
3
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
3 3
1 2 3
```

### è¾“å‡º

```
2
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šBeautiful Subarrays æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> æˆ‘æ˜¯Kayï¼Œä¸€ä½ä¸“æ³¨äºç®—æ³•æ•™å­¦çš„å¼•å¯¼è€…ã€‚ä»Šå¤©æˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢**Beautiful Subarrays**è¿™é“ç»å…¸çš„ä½è¿ç®—é—®é¢˜ã€‚é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ å°†æŒæ¡Trieæ ‘çš„æ ¸å¿ƒåº”ç”¨æŠ€å·§ï¼Œç†è§£ä½è¿ç®—çš„ä¼˜é›…è®¾è®¡ï¼Œå¹¶å­¦ä¼šå¦‚ä½•å°†å¤æ‚é—®é¢˜è½¬åŒ–ä¸ºé«˜æ•ˆç®—æ³•ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼

---
### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`ä½è¿ç®—`ä¸`Trieæ ‘åº”ç”¨`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³Beautiful Subarraysçš„å…³é”®åœ¨äºå°†å­æ•°ç»„å¼‚æˆ–å’Œè½¬åŒ–ä¸º**å‰ç¼€å¼‚æˆ–å’Œçš„é…å¯¹é—®é¢˜**ã€‚æƒ³è±¡ä½ åœ¨æ•´ç†ä¸€æœ¬ç”µè¯ç°¿ï¼ˆTrieæ ‘ï¼‰ï¼Œéœ€è¦å¿«é€ŸæŸ¥æ‰¾æ‰€æœ‰èƒ½ä¸å½“å‰å·ç ï¼ˆå‰ç¼€å’Œï¼‰å¼‚æˆ–åè¾¾åˆ°å®‰å…¨å€¼ï¼ˆâ‰¥kï¼‰çš„å·ç ï¼ˆå†å²å‰ç¼€å’Œï¼‰ã€‚
> 
> - **æ ¸å¿ƒæ€è·¯**ï¼šè®¡ç®—å‰ç¼€å¼‚æˆ–å’Œæ•°ç»„`s`ï¼ˆ`s[0]=0`, `s[i]=a[1]^...^a[i]`ï¼‰ï¼Œé—®é¢˜è½¬åŒ–ä¸ºæ±‚æ»¡è¶³`s[i]^s[j]â‰¥k`çš„é…å¯¹`(i,j)`æ•°é‡ï¼ˆ`i>j`ï¼‰
> - **æ ¸å¿ƒéš¾ç‚¹**ï¼šå¦‚ä½•é«˜æ•ˆæŸ¥è¯¢å†å²å‰ç¼€å’Œï¼ŸTrieæ ‘ä»é«˜ä½åˆ°ä½ä½é€ä½å¤„ç†ï¼Œæ ¹æ®`k`çš„å½“å‰ä½å†³å®šæŸ¥è¯¢è·¯å¾„ï¼š
>   - è‹¥`k`çš„å½“å‰ä½=1ï¼šå¿…é¡»èµ°å¼‚æˆ–ç»“æœä¸º1çš„è·¯å¾„ï¼ˆä¸¥è‹›æ¡ä»¶ï¼‰
>   - è‹¥`k`çš„å½“å‰ä½=0ï¼šå¼‚æˆ–ç»“æœä¸º1çš„è·¯å¾„å…¨éƒ¨æ»¡è¶³ï¼Œç»“æœä¸º0çš„è·¯å¾„ç»§ç»­åˆ¤æ–­
> - **å¯è§†åŒ–è®¾è®¡**ï¼šé‡‡ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºTrieæ ‘æ„å»ºè¿‡ç¨‹ï¼ˆæ’å…¥æ“ä½œï¼‰å’ŒæŸ¥è¯¢è·¯å¾„ï¼ˆé«˜äº®æ˜¾ç¤ºå½“å‰ä½åˆ¤æ–­ï¼‰ã€‚å½“æ»¡è¶³æ¡ä»¶æ—¶æ’­æ”¾â€œé‡‘å¸æ”¶é›†â€éŸ³æ•ˆï¼Œè·¯å¾„é”™è¯¯æ—¶æ’­æ”¾â€œå¤±è´¥â€éŸ³æ•ˆï¼Œç”¨å¤å¤æ¸¸æˆæœºåˆ¶å¢å¼ºç†è§£

---
### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> ä»æ€è·¯æ¸…æ™°æ€§ã€ä»£ç è§„èŒƒæ€§ã€ç®—æ³•ä¼˜åŒ–åº¦ç­‰ç»´åº¦ç²¾é€‰3ä¸ªä¼˜è´¨é¢˜è§£ï¼š

**é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šKobe303ï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯ç›´å‡»æœ¬è´¨ï¼Œç”¨`trie[p][c]`ç²¾å¦™å¤„ç†ä½åˆ¤æ–­ã€‚ä»£ç ä¸­`query()`å‡½æ•°é€»è¾‘æ¸…æ™°ï¼šå½“`k`ä½=0æ—¶ç´¯åŠ å¼‚æˆ–ç»“æœä¸º1çš„å­æ ‘ï¼ˆ`res += cnt[trie[p][c1^1]]`ï¼‰ï¼Œä¸º1æ—¶ä¸¥æ ¼èµ°å¼‚æˆ–è·¯å¾„ã€‚å˜é‡å‘½åè§„èŒƒï¼ˆ`trie`, `cnt`ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå…ˆæ’å…¥`s[0]=0`ï¼‰ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›

**é¢˜è§£äºŒï¼ˆæ¥æºï¼šmango09ï¼‰**
* **ç‚¹è¯„**ï¼šäº®ç‚¹åœ¨äºç‰¹åˆ¤æœ€åä¸€ä½å¤„ç†ç­‰äº`k`çš„æƒ…å†µï¼ˆ`k==0`æ—¶çš„åˆ†æ”¯åˆ¤æ–­ï¼‰ã€‚ä»£ç ä¸­`search()`å‡½æ•°é€šè¿‡`Mc=(m>>i)&1`æå–`k`çš„ä½ï¼Œç”¨`node[u][c^1]`å®šä½å¼‚æˆ–è·¯å¾„ã€‚è§£é‡Šéƒ¨åˆ†å¼ºè°ƒåˆå§‹åŒ–`s[0]=0`çš„é‡è¦æ€§ï¼Œå®è·µä»·å€¼é«˜

**é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šwhiteqwqï¼‰**
* **ç‚¹è¯„**ï¼šé‡‡ç”¨è¾¹æŸ¥è¯¢è¾¹æ’å…¥ç­–ç•¥ä¿è¯æ—¶æ•ˆæ€§ã€‚`calc()`å‡½æ•°ä¸­`if(p==0) res += cnt[chd[now][y^1]]`é«˜æ•ˆç´¯åŠ æ»¡è¶³æ¡ä»¶çš„å­æ ‘å¤§å°ï¼Œ`now=chd[now][y^p]`ç»Ÿä¸€å¤„ç†è·¯å¾„é€‰æ‹©ï¼Œä»£ç ç®€æ´æœ‰åŠ›

---
### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

> è§£å†³æœ¬ç±»é—®é¢˜çš„ä¸‰ä¸ªå…³é”®éš¾ç‚¹åŠçªç ´ç­–ç•¥ï¼š

1. **å‰ç¼€å¼‚æˆ–å’Œçš„è½¬åŒ–è‰ºæœ¯**
   * **åˆ†æ**ï¼šåˆ©ç”¨å¼‚æˆ–æ€§è´¨`a^a=0`ï¼Œå°†å­æ•°ç»„`[l,r]`å¼‚æˆ–å’Œè½¬åŒ–ä¸º`s[r]^s[l-1]`ã€‚å¿…é¡»åˆå§‹åŒ–`s[0]=0`ï¼ˆæ˜“é”™ç‚¹ï¼ï¼‰
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œè½¬åŒ–æ˜¯å¤„ç†å­æ•°ç»„é—®é¢˜çš„æ ¸å¿ƒæŠ€å·§

2. **Trieæ ‘çš„ä½å¤„ç†ç­–ç•¥**
   * **åˆ†æ**ï¼šä»é«˜ä½åˆ°ä½ä½å¤„ç†ï¼ˆ30â†’0ï¼‰ï¼Œæ ¹æ®`k`çš„å½“å‰ä½å†³å®šï¼š
     - `k`ä½=1ï¼šåªèƒ½èµ°å¼‚æˆ–ç»“æœä¸º1çš„è·¯å¾„ï¼ˆ`b^1`æ–¹å‘ï¼‰
     - `k`ä½=0ï¼šç´¯åŠ å¼‚æˆ–ç»“æœä¸º1çš„å­æ ‘ï¼Œç»§ç»­èµ°ç»“æœä¸º0çš„è·¯å¾„
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé«˜ä½å†³å®šæ€§å¼ºï¼Œä¼˜å…ˆå¤„ç†é«˜ä½æ˜¯ä¼˜åŒ–å…³é”®

3. **åŠ¨æ€ç»´æŠ¤ä¸ç©ºé—´ä¼˜åŒ–**
   * **åˆ†æ**ï¼šè¾¹æŸ¥è¯¢è¾¹æ’å…¥ï¼ˆå…ˆæŸ¥åæ’ï¼‰ï¼Œä¿è¯æ¯æ¬¡æŸ¥è¯¢ä»…é’ˆå¯¹å†å²æ•°æ®ã€‚Trieæ ‘ç©ºé—´`O(n*logMAX)`ï¼Œéœ€é¢„åˆ†é…å……è¶³æ•°ç»„
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŠ¨æ€ç»´æŠ¤é¿å…å…¨é‡å»ºæ ‘ï¼ŒèŠ‚çœæ—¶é—´ç©ºé—´

#### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é—®é¢˜è½¬åŒ–æŠ€å·§**ï¼šå°†å­æ•°ç»„é—®é¢˜è½¬åŒ–ä¸ºå‰ç¼€å’Œé…å¯¹
- **ä½è¿ç®—å¤„ç†**ï¼š`(x>>i)&1`å¿«é€Ÿå–ä½ï¼Œ`1<<i`è®¡ç®—ä½æƒ
- **è¾¹ç•Œé˜²å¾¡**ï¼šåˆå§‹åŒ–`s[0]=0`ï¼Œå¾ªç¯å¤–å…ˆæ’å…¥0
- **æ ‘ç»“æ„ä¼˜åŒ–**ï¼šç”¨æ•°ç»„æ›¿ä»£æŒ‡é’ˆå®ç°Trieï¼Œæé«˜æ•ˆç‡

---
### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ä¼˜åŒ–ï¼ŒåŒ…å«åˆå§‹åŒ–ã€æŸ¥è¯¢ã€æ’å…¥å®Œæ•´é€»è¾‘
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
using namespace std;
typedef long long ll;
const int MAXN = 1e6+5;
const int MAXB = 30; // 30ä½è¶³å¤Ÿå¤„ç†1e9

int trie[MAXN*(MAXB+1)][2], cnts[MAXN*(MAXB+1)];
int cntNode; // TrieèŠ‚ç‚¹è®¡æ•°å™¨

void insert(int x) {
    int u = 0;
    for (int i = MAXB; i >= 0; i--) {
        int b = (x >> i) & 1;
        if (!trie[u][b]) 
            trie[u][b] = ++cntNode;
        u = trie[u][b];
        cnts[u]++; // æ›´æ–°èŠ‚ç‚¹è®¿é—®è®¡æ•°
    }
}

ll query(int x, int k) {
    int u = 0;
    ll res = 0;
    for (int i = MAXB; i >= 0; i--) {
        int b = (x >> i) & 1;
        int p = (k >> i) & 1; // kçš„å½“å‰ä½
        
        if (p == 0) {
            // å¼‚æˆ–ç»“æœä¸º1çš„å­æ ‘å…¨éƒ¨æ»¡è¶³æ¡ä»¶
            if (trie[u][b^1]) 
                res += cnts[trie[u][b^1]];
            // ç»§ç»­æ£€æŸ¥å¼‚æˆ–ç»“æœä¸º0çš„è·¯å¾„
            u = trie[u][b];
        } else {
            // åªèƒ½èµ°å¼‚æˆ–ç»“æœä¸º1çš„è·¯å¾„
            u = trie[u][b^1];
        }
        if (!u) break; // è·¯å¾„ä¸­æ–­æå‰é€€å‡º
    }
    if (u) res += cnts[u]; // åŠ ä¸Šç»ˆæ­¢ç‚¹è®¡æ•°ï¼ˆç­‰äºkçš„æƒ…å†µï¼‰
    return res;
}

int main() {
    int n, k;
    cin >> n >> k;
    insert(0); // å…³é”®åˆå§‹åŒ–ï¼
    ll ans = 0;
    int s = 0;
    for (int i = 0; i < n; i++) {
        int a; cin >> a;
        s ^= a; // æ›´æ–°å‰ç¼€å¼‚æˆ–å’Œ
        ans += query(s, k); // æŸ¥è¯¢å†å²å‰ç¼€å’Œ
        insert(s); // æ’å…¥å½“å‰å‰ç¼€å’Œ
    }
    cout << ans << endl;
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
> 1. **åˆå§‹åŒ–**ï¼šæ’å…¥`s[0]=0`ï¼ˆå…³é”®èµ·ç‚¹ï¼‰
> 2. **æŸ¥è¯¢é€»è¾‘**ï¼š`query()`ä»é«˜ä½åˆ°ä½ä½å¤„ç†ï¼Œæ ¹æ®`k`çš„ä½å†³å®šç´¯åŠ å­æ ‘æˆ–é€‰æ‹©è·¯å¾„
> 3. **æ’å…¥é€»è¾‘**ï¼š`insert()`æ›´æ–°Trieæ ‘å¹¶ç»´æŠ¤èŠ‚ç‚¹è®¿é—®è®¡æ•°
> 4. **ä¸»å¾ªç¯**ï¼šè®¡ç®—å‰ç¼€å’Œâ†’æŸ¥è¯¢å†å²â†’æ’å…¥å½“å‰ï¼Œä¸‰æ­¥éª¤é«˜æ•ˆæ±‚è§£

---

**é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ**

**é¢˜è§£ä¸€ï¼ˆKobe303ï¼‰**
* **äº®ç‚¹**ï¼šæŸ¥è¯¢é€»è¾‘åˆ†å±‚æ¸…æ™°ï¼Œä¸¥æ ¼å¤„ç†`k`ä½=0/1ä¸¤ç§æƒ…å†µ
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
int query(int x, int y) {
    int p = 1, res = 0;
    for (int i = 30; ~i; --i) {
        int c1 = x >> i & 1, c2 = y >> i & 1;
        if (c2) p = trie[p][c1^1]; // kä½=1ï¼šä¸¥æ ¼èµ°å¼‚æˆ–è·¯å¾„
        else {
            res += cnt[trie[p][c1^1]]; // kä½=0ï¼šç´¯åŠ å¼‚æˆ–å­æ ‘
            p = trie[p][c1];           // ç»§ç»­æ£€æŸ¥åŒæˆ–è·¯å¾„
        }
        if (!p) break;
    }
    res += cnt[p]; // å¤„ç†ç­‰äºkçš„æƒ…å†µ
    return res;
}
```
* **ä»£ç è§£è¯»**ï¼š
> - `c1`æ˜¯å½“å‰å‰ç¼€å’Œçš„ä½ï¼Œ`c2`æ˜¯`k`çš„ä½
> - **`c2=1`æ—¶**ï¼šåªèƒ½é€‰æ‹©`c1^1`è·¯å¾„ï¼ˆå¼‚æˆ–ç»“æœä¸º1ï¼‰
> - **`c2=0`æ—¶**ï¼šç´¯åŠ `c1^1`å­æ ‘ï¼ˆå¼‚æˆ–ç»“æœ=1çš„å…¨ä½“æ»¡è¶³ï¼‰ï¼Œç»§ç»­æ£€æŸ¥`c1`è·¯å¾„ï¼ˆå¼‚æˆ–ç»“æœ=0ï¼‰
> - **ç»ˆæ­¢å¤„ç†**ï¼šæœ€ååŠ ä¸Šå½“å‰èŠ‚ç‚¹è®¡æ•°ï¼ˆå¤„ç†`s[i]^s[j]=k`çš„æƒ…å†µï¼‰
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€šè¿‡`res += cnt[p]`ç»Ÿä¸€å¤„ç†ç­‰äºæƒ…å†µï¼Œé¿å…å¤æ‚ç‰¹åˆ¤

**é¢˜è§£äºŒï¼ˆmango09ï¼‰**
* **äº®ç‚¹**ï¼šç‰¹åˆ¤æœ€åä¸€ä½ç²¾å‡†å¤„ç†è¾¹ç•Œ
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
long long search(int val){
    int u=0; long long ans=0;
    for(int i=30; i>=0; i--){
        int c = (val>>i)&1, Mc = (k>>i)&1;  
        if(Mc==0 && node[u][c^1]) 
            ans += cnts[node[u][c^1]]; // ç´¯åŠ å¼‚æˆ–å­æ ‘
        
        if(i==0){ // æœ€åä¸€ä½ç‰¹åˆ¤
            if(Mc==1 && node[u][c^1]) 
                ans += cnts[node[u][c^1]];
            if(Mc==0 && node[u][c]) 
                ans += cnts[node[u][c]];
        }
        if(!node[u][c^Mc]) break;
        u = node[u][c^Mc];
    }
    return ans;
}
```
* **ä»£ç è§£è¯»**ï¼š
> - **ä¸»å¾ªç¯**ï¼šå¤„ç†é«˜ä½é€»è¾‘åŒé¢˜è§£ä¸€
> - **æœ€åä¸€ä½ç‰¹åˆ¤**ï¼ˆ`i==0`ï¼‰ï¼š
>   - `Mc=1`æ—¶ç´¯åŠ `c^1`å­æ ‘ï¼ˆå¼‚æˆ–ç»“æœ=1ï¼‰
>   - `Mc=0`æ—¶ç´¯åŠ `c`å­æ ‘ï¼ˆå¼‚æˆ–ç»“æœ=0ï¼‰
> - **æå‰ç»ˆæ­¢**ï¼šå½“è·¯å¾„ä¸å­˜åœ¨æ—¶è·³å‡ºå¾ªç¯
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‰¹åˆ¤æœ€åä¸€ä½å¯ç²¾ç¡®æ§åˆ¶ç­‰äºæƒ…å†µï¼Œä½†éœ€æ³¨æ„ä¸ä¸»å¾ªç¯é€»è¾‘çš„åè°ƒ

**é¢˜è§£ä¸‰ï¼ˆwhiteqwqï¼‰**
* **äº®ç‚¹**ï¼šè·¯å¾„é€‰æ‹©ç”¨`y^p`ç»Ÿä¸€å¤„ç†ï¼Œä»£ç æç®€
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
ll calc(int x, int k) {
    int u = 0;
    ll res = 0;
    for (int i = 30; i >= 0; i--) {
        int y = (x>>i)&1, p = (k>>i)&1;
        if(p == 0) 
            res += cnts[chd[u][y^1]]; // ç´¯åŠ å¼‚æˆ–å­æ ‘
        
        u = chd[u][y^p];  // ç»Ÿä¸€è·¯å¾„é€‰æ‹©
        if(!u) break;
    }
    if(u) res += cnts[u]; // åŠ ä¸Šç»ˆæ­¢ç‚¹
    return res;
}
```
* **ä»£ç è§£è¯»**ï¼š
> - **è·¯å¾„é€‰æ‹©**ï¼š`u = chd[u][y^p]`å·§å¦™ç»Ÿä¸€ä¸¤ç§æƒ…å†µï¼š
>   - `p=0`æ—¶ç›¸å½“äº`y`ï¼ˆç»§ç»­åŒæˆ–è·¯å¾„ï¼‰
>   - `p=1`æ—¶ç›¸å½“äº`y^1`ï¼ˆèµ°å¼‚æˆ–è·¯å¾„ï¼‰
> - **ç´¯åŠ ç­–ç•¥**ï¼šä»…å½“`p=0`æ—¶ç´¯åŠ å¼‚æˆ–å­æ ‘ï¼ˆ`y^1`æ–¹å‘ï¼‰
> - **ç»ˆæ­¢å¤„ç†**ï¼šæœ€ååŠ ä¸Šå½“å‰èŠ‚ç‚¹è®¡æ•°
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨`y^p`ç»Ÿä¸€è·¯å¾„é€‰æ‹©å‡å°‘åˆ†æ”¯ï¼Œæå‡ä»£ç ç®€æ´æ€§

---
### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

> **è®¾è®¡ç›®æ ‡**ï¼šé€šè¿‡8ä½åƒç´ é£æ ¼åŠ¨æ€æ¼”ç¤ºTrieæ ‘æ„å»ºä¸æŸ¥è¯¢è¿‡ç¨‹ï¼Œèåˆå¤å¤æ¸¸æˆå…ƒç´ æå‡å­¦ä¹ è¶£å‘³æ€§

* **ä¸»é¢˜**ï¼š*æ¯”ç‰¹æ¢é™©å®¶*åœ¨Trieæ ‘è¿·å®«ä¸­å¯»æ‰¾å¼‚æˆ–å®è—
* **æ ¸å¿ƒæ¼”ç¤º**ï¼šTrieæ ‘æ„å»ºï¼ˆæ’å…¥ï¼‰+ æ¡ä»¶æŸ¥è¯¢ï¼ˆè·¯å¾„é€‰æ‹©ï¼‰
* **è®¾è®¡æ€è·¯**ï¼šç”¨FCçº¢ç™½æœºåƒç´ é£æ ¼å‘ˆç°ä½è¿ç®—çš„æŠ½è±¡è¿‡ç¨‹ã€‚å½“é€‰æ‹©æ­£ç¡®è·¯å¾„æ—¶æ’­æ”¾"é‡‘å¸éŸ³æ•ˆ"ï¼Œé”™è¯¯è·¯å¾„æ’­æ”¾"å¤±è´¥éŸ³æ•ˆ"ï¼Œé€šå…³æ—¶è§¦å‘èƒœåˆ©åŠ¨ç”»

**åŠ¨ç”»å…³é”®å¸§æµç¨‹**ï¼š
```mermaid
graph LR
A[åˆå§‹åŒ–] --> B[æ’å…¥æ“ä½œ]
B --> C[æŸ¥è¯¢æ“ä½œ]
C --> D[ç»“æœæ˜¾ç¤º]

subgraph æ’å…¥æ“ä½œ
B1(æ ¹èŠ‚ç‚¹é«˜äº®) --> B2{å½“å‰ä½=0/1?}
B2 -->|0| B3[åˆ›å»º/ç§»åˆ°å·¦å­æ ‘]
B2 -->|1| B4[åˆ›å»º/ç§»åˆ°å³å­æ ‘]
B3/B4 --> B5[æ›´æ–°èŠ‚ç‚¹è®¡æ•°]
B5 --> B6[æ’­æ”¾â€œå»ºé€ éŸ³æ•ˆâ€]
end

subgraph æŸ¥è¯¢æ“ä½œ
C1(æ˜¾ç¤ºå½“å‰ä½å’Œkä½) --> C2{kä½=0?}
C2 -->|æ˜¯| C3[é«˜äº®å¼‚æˆ–å­æ ‘+é‡‘å¸éŸ³æ•ˆ]
C3 --> C4[ç»§ç»­åŒæˆ–è·¯å¾„]
C2 -->|å¦| C5[é«˜äº®å¼‚æˆ–è·¯å¾„]
C5 --> C6{è·¯å¾„å­˜åœ¨?}
C6 -->|æ˜¯| C7[ç§»åŠ¨åˆ°å­èŠ‚ç‚¹]
C6 -->|å¦| C8[æ’­æ”¾å¤±è´¥éŸ³æ•ˆ]
C7 --> C9[æœ€åèŠ‚ç‚¹?]
C9 -->|æ˜¯| C10[ç´¯åŠ èŠ‚ç‚¹+èƒœåˆ©éŸ³æ•ˆ]
end
```

**äº¤äº’æ§åˆ¶é¢æ¿**ï¼š
- **é€Ÿåº¦æ»‘å—**ï¼šè°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦ï¼ˆ1x-5xï¼‰
- **å•æ­¥æ‰§è¡Œ**ï¼šæŒ‰æ­¥è§‚å¯Ÿä½å¤„ç†ç»†èŠ‚
- **å¤ä½**ï¼šé‡ç½®Trieæ ‘å’Œè·¯å¾„
- **AIæ¼”ç¤º**ï¼šè‡ªåŠ¨æ’­æ”¾å®Œæ•´ç®—æ³•æµç¨‹

**åƒç´ è‰ºæœ¯è®¾è®¡**ï¼š
- **èŠ‚ç‚¹**ï¼š4x4åƒç´ æ–¹å—ï¼ˆç»¿è‰²=æ™®é€šèŠ‚ç‚¹ï¼Œé‡‘è‰²=é«˜äº®èŠ‚ç‚¹ï¼‰
- **è·¯å¾„**ï¼šçº¢è‰²ç®­å¤´æŒ‡ç¤ºå½“å‰é€‰æ‹©æ–¹å‘
- **çŠ¶æ€æ **ï¼šæ˜¾ç¤ºå½“å‰å‰ç¼€å’Œ/ç´¯è®¡ç­”æ¡ˆ
- **éŸ³æ•ˆ**ï¼š
  - è·¯å¾„é€‰æ‹©ï¼š8-bitâ€œæ»´â€å£°
  - ç´¯åŠ ç­”æ¡ˆï¼šé‡‘å¸æ”¶é›†å£°
  - æŸ¥è¯¢å®Œæˆï¼šèƒœåˆ©å°è°ƒ

---
### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

* **æŠ€å·§è¿ç§»åœºæ™¯**ï¼š
  1. æœ€å¤§å¼‚æˆ–å¯¹ï¼ˆLeetcode 421ï¼‰ï¼š`a[i]^a[j]`çš„æœ€å¤§å€¼
  2. åŒºé—´å¼‚æˆ–ç»Ÿè®¡ï¼ˆCF 617Eï¼‰ï¼šç»Ÿè®¡`xor[l,r]=k`çš„å­æ•°ç»„
  3. å¸¦ä¿®æ”¹å¼‚æˆ–æŸ¥è¯¢ï¼ˆLOJ 113ï¼‰ï¼šåŠ¨æ€ç»´æŠ¤å¼‚æˆ–æœ€å¤§å€¼

* **æ¨èç»ƒä¹ ï¼ˆæ´›è°·ï¼‰**ï¼š
  1. **P4551 æœ€é•¿å¼‚æˆ–è·¯å¾„**  
     ğŸ—£ï¸ *æ¨èç†ç”±*ï¼šæ ‘å½¢ç»“æ„+å¼‚æˆ–è·¯å¾„ï¼Œç»ƒä¹ Trieæ ‘åœ¨æ ‘ä¸Šçš„åº”ç”¨
  2. **P4735 æœ€å¤§å¼‚æˆ–å’Œ**  
     ğŸ—£ï¸ *æ¨èç†ç”±*ï¼šå¯æŒä¹…åŒ–Trieæ ‘å…¥é—¨ï¼ŒæŒæ¡ç‰ˆæœ¬æ§åˆ¶æŠ€å·§
  3. **P4592 [TJOI2018]å¼‚æˆ–**  
     ğŸ—£ï¸ *æ¨èç†ç”±*ï¼šç»“åˆæ ‘é“¾å‰–åˆ†çš„ç»¼åˆé¢˜ï¼Œæå‡é—®é¢˜æ‹†è§£èƒ½åŠ›

---
### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> æ¥è‡ªé¢˜è§£ä½œè€…çš„ç»éªŒç»“æ™¶ï¼š
> 
> **Kobe303**ï¼š*â€œåˆå§‹åŒ–`s[0]=0`å°±åƒç»™è¿·å®«è®¾ç½®èµ·ç‚¹ï¼Œå¿˜è®°å®ƒå°±åƒæ¢é™©å®¶æ²¡æœ‰å‡ºå‘åœ°â€*  
> **mango09**ï¼š*â€œé«˜ä½å†³å®šæ€§å¼ºäºä½ä½â€”â€”å°±åƒå†³å®šèƒœè´Ÿçš„æ°¸è¿œæ˜¯æˆ˜ç•¥è€Œéæˆ˜æœ¯ç»†èŠ‚â€*  
> **whiteqwq**ï¼š*â€œè¾¹æŸ¥è¯¢è¾¹æ’å…¥æ˜¯æ—¶ç©ºåŒä¼˜ç­–ç•¥ï¼Œé¿å…å…¨é‡å»ºæ ‘çš„å†…å­˜é™·é˜±â€*
>
> ğŸ’¡ **Kayæ€»ç»“**ï¼šä½è¿ç®—é—®é¢˜éœ€æ³¨æ„ä¸‰ç‚¹â€”â€”  
> 1. **åˆå§‹åŒ–æ„è¯†**ï¼š`s[0]=0`æ˜¯å‰ç¼€å’Œçš„åŸºçŸ³  
> 2. **é«˜ä½ä¼˜å…ˆ**ï¼šä»é«˜åˆ°ä½å¤„ç†æ˜¯ä¼˜åŒ–å…³é”®  
> 3. **åŠ¨æ€ç»´æŠ¤**ï¼šé¿å…é™æ€å»ºæ ‘èŠ‚çœç©ºé—´  

---
> æ­å–œå®ŒæˆBeautiful Subarraysçš„å­¦ä¹ ï¼é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ ä¸ä»…æŒæ¡äº†Trieæ ‘å¤„ç†å¼‚æˆ–é—®é¢˜çš„æ ¸å¿ƒæŠ€å·§ï¼Œè¿˜ç†è§£äº†ä½è¿ç®—çš„ä¼˜é›…å“²å­¦ã€‚è®°ä½ï¼š**ä¼˜ç§€çš„ç®—æ³•å¦‚åŒç²¾è‡´çš„åƒç´ è‰ºæœ¯â€”â€”æ¯ä¸€æ¯”ç‰¹éƒ½è‡³å…³é‡è¦**ã€‚ä¸‹æ¬¡ç®—æ³•å†’é™©å†è§ï¼ğŸ‘¾

---
å¤„ç†ç”¨æ—¶ï¼š270.69ç§’
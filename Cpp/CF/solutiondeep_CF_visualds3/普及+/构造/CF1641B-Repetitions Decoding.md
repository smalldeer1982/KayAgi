# é¢˜ç›®ä¿¡æ¯

# Repetitions Decoding

## é¢˜ç›®æè¿°

Olya has an array of integers $ a_1, a_2, \ldots, a_n $ . She wants to split it into tandem repeats. Since it's rarely possible, before that she wants to perform the following operation several (possibly, zero) number of times: insert a pair of equal numbers into an arbitrary position. Help her!

More formally:

- A tandem repeat is a sequence $ x $ of even length $ 2k $ such that for each $ 1 \le i \le k $ the condition $ x_i = x_{i + k} $ is satisfied.
- An array $ a $ could be split into tandem repeats if you can split it into several parts, each being a subsegment of the array, such that each part is a tandem repeat.
- In one operation you can choose an arbitrary letter $ c $ and insert $ [c, c] $ to any position in the array (at the beginning, between any two integers, or at the end).
- You are to perform several operations and split the array into tandem repeats or determine that it is impossible. Please note that you do not have to minimize the number of operations.

## è¯´æ˜/æç¤º

In the first test case, you cannot apply operations to the array to make it possible to split it into tandem repeats.

In the second test case the array is already a tandem repeat $ [5, 5] = \underbrace{([5] + [5])}_{t_1 = 2} $ , thus we can do no operations at all.

In the third test case, initially, we have the following array: $ $$$[1, 3, 1, 2, 2, 3]. $ $  After the first insertion with  $ p = 1, c = 3 $ :  $ $ [1, \textbf{3, 3}, 3, 1, 2, 2, 3]. $ $  After the second insertion with  $ p = 5, c = 3 $ :  $ $ [1, 3, 3, 3, 1, \textbf{3, 3}, 2, 2, 3]. $ $  After the third insertion with  $ p = 5, c = 3 $ :  $ $ [1, 3, 3, 3, 1, \textbf{3, 3}, 3, 3, 2, 2, 3]. $ $  After the fourth insertion with  $ p = 10, c = 3 $ :  $ $ [1, 3, 3, 3, 1, 3, 3, 3, 3, 2, \textbf{3, 3}, 2, 3]. $ $  The resulting array can be represented as a concatenation of tandem repeats:  $ $ \underbrace{([1, 3, 3, 3] + [1, 3, 3, 3])}_{t_1 = 8} + \underbrace{([3, 2, 3] + [3, 2, 3])}_{t_2 = 6}. $ $ </p><p>In the fourth test case, initially, we have the following array:  $ $ [3, 2, 1, 1, 2, 3]. $ $  After the first insertion with  $ p = 0, c = 3 $ :  $ $ [\textbf{3, 3}, 3, 2, 1, 1, 2, 3]. $ $  After the second insertion with  $ p = 8, c = 3 $ :  $ $ [3, 3, 3, 2, 1, 1, 2, 3, \textbf{3, 3}]. $ $  After the third insertion with  $ p = 5, c = 3 $   $ $ [3, 3, 3, 2, 1, \textbf{3, 3}, 1, 2, 3, 3, 3]. $ $  After the fourth insertion with  $ p = 6, c = 2 $ :  $ $ [3, 3, 3, 2, 1, 3, \textbf{2, 2}, 3, 1, 2, 3, 3, 3]. $ $  After the fifth insertion with  $ p = 7, c = 1 $ :  $ $ [3, 3, 3, 2, 1, 3, 2, \textbf{1, 1}, 2, 3, 1, 2, 3, 3, 3]. $ $  The resulting array can be represented as a concatenation of tandem repeats:  $ $ \underbrace{([3] + [3])}_{t_1 = 2} + \underbrace{([3, 2, 1] + [3, 2, 1])}_{t_2 = 6} + \underbrace{([1, 2, 3] + [1, 2, 3])}_{t_3 = 6} + \underbrace{([3] + [3])}_{t_4 = 2}. $ $$$

## æ ·ä¾‹ #1

### è¾“å…¥

```
4
2
5 7
2
5 5
6
1 3 1 2 2 3
6
3 2 1 1 2 3```

### è¾“å‡º

```
-1
0
1
2
4
1 3
5 3
5 3
10 3
2
8 6 
5
0 3
8 3
5 3 
6 2 
7 1
4
2 6 6 2```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šRepetitions Decoding æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ„é€ ä¸æ¨¡æ‹Ÿï¼ˆç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œRepetitions Decodingâ€é—®é¢˜çš„æ ¸å¿ƒæ˜¯**é€šè¿‡æ’å…¥æˆå¯¹å…ƒç´ ï¼Œå°†åŸæ•°ç»„æ„é€ ä¸ºå¯åˆ’åˆ†ä¸º tandem repeats çš„åºåˆ—**ï¼ˆtandem repeats æŒ‡å¶æ•°é•¿åº¦ã€å‰åŠæ®µä¸ååŠæ®µå®Œå…¨ç›¸åŒçš„å­æ®µï¼‰ã€‚ç®€å•æ¥è¯´ï¼Œè¿™å°±åƒâ€œæ‹¼å›¾æ¸¸æˆâ€â€”â€”æˆ‘ä»¬éœ€è¦æ‰¾åˆ°åŸæ•°ç»„ä¸­çš„â€œé…å¯¹ç¢ç‰‡â€ï¼Œé€šè¿‡æ’å…¥ä¸­é—´ç¢ç‰‡çš„å‰¯æœ¬ï¼Œå°†å®ƒä»¬æ‹¼æˆå®Œæ•´çš„â€œ tandem å—â€ï¼Œå†é€æ­¥å¤„ç†å‰©ä½™éƒ¨åˆ†ã€‚  

### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹
1. **æ— è§£æ¡ä»¶**ï¼šè‹¥åŸæ•°ç»„ä¸­å­˜åœ¨å…ƒç´ å‡ºç°å¥‡æ•°æ¬¡ï¼Œç›´æ¥è¾“å‡º-1ï¼ˆå› ä¸ºæ’å…¥æ“ä½œåªä¼šå¢åŠ å¶æ•°ä¸ªå…ƒç´ ï¼Œæ— æ³•æ”¹å˜å¥‡å¶æ€§ï¼‰ã€‚  
2. **æ„é€ ç­–ç•¥**ï¼šä»æ•°ç»„å¤´éƒ¨å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®ï¼ˆå¦‚`a[0]`çš„ä¸‹ä¸€ä¸ª`a[j] = a[0]`ï¼‰ï¼Œç„¶ååœ¨`a[j]`åæ’å…¥`a[1]`åˆ°`a[j-1]`çš„å‰¯æœ¬ã€‚æ­¤æ—¶ï¼Œ`a[0]`åˆ°`a[j-1]`åŠ ä¸Šæ’å…¥çš„éƒ¨åˆ†å½¢æˆä¸€ä¸ª tandem å—ï¼ˆé•¿åº¦ä¸º`2*(j-0)`ï¼‰ï¼Œå¯ä»æ•°ç»„ä¸­ç§»é™¤ï¼Œç»§ç»­å¤„ç†å‰©ä½™éƒ¨åˆ†ã€‚  
3. **å…³é”®éš¾ç‚¹**ï¼š  
   - å¦‚ä½•é«˜æ•ˆæ‰¾åˆ°åŒ¹é…ä½ç½®ï¼ˆæš´åŠ›éå†å³å¯ï¼Œå› ä¸º`nâ‰¤500`ï¼Œæ—¶é—´è¶³å¤Ÿï¼‰ï¼›  
   - å¦‚ä½•æ­£ç¡®è®°å½•æ’å…¥æ“ä½œçš„ä½ç½®ï¼ˆéœ€è€ƒè™‘å‰é¢å·²åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼Œé¿å…ä½ç½®åç§»ï¼‰ï¼›  
   - å¦‚ä½•ä¿è¯æ“ä½œæ¬¡æ•°ä¸è¶…è¿‡`2nÂ²`ï¼ˆæ¯æ¬¡å¤„ç†å‡å°‘2ä¸ªæœªå¤„ç†å…ƒç´ ï¼Œæ€»æ“ä½œæ¬¡æ•°ä¸º`O(nÂ²)`ï¼Œç¬¦åˆè¦æ±‚ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯
ä¸ºäº†ç›´è§‚å±•ç¤ºç®—æ³•è¿‡ç¨‹ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ª**8ä½åƒç´ é£æ ¼çš„â€œæ•°ç»„æ‹¼å›¾â€åŠ¨ç”»**ï¼š  
- **åœºæ™¯**ï¼šç”¨åƒç´ å—è¡¨ç¤ºæ•°ç»„å…ƒç´ ï¼Œå¤´éƒ¨å…ƒç´ ç”¨çº¢è‰²é«˜äº®ï¼Œå…¶åŒ¹é…ä½ç½®ç”¨è“è‰²é«˜äº®ï¼›  
- **æ’å…¥æ“ä½œ**ï¼šæ’å…¥çš„å…ƒç´ ç”¨é»„è‰²åƒç´ å—è¡¨ç¤ºï¼Œä»åŒ¹é…ä½ç½®åâ€œæ»‘å…¥â€ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
- **tandem å—å½¢æˆ**ï¼šå½“æ’å…¥å®Œæˆåï¼Œçº¢è‰²ä¸è“è‰²åŒºåŸŸåˆå¹¶ä¸ºç»¿è‰²ï¼Œä»£è¡¨è¯¥å—å·²å¤„ç†ï¼Œéšåâ€œæ¶ˆå¤±â€ï¼ˆç§»é™¤ï¼‰ï¼Œå‰©ä½™å…ƒç´ å‘å·¦ç§»åŠ¨ï¼›  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ¬¡æ’å…¥ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆåŠ é€Ÿæ¼”ç¤ºï¼‰ï¼Œä»¥åŠâ€œé‡ç½®â€ï¼ˆé‡æ–°å¼€å§‹ï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šDarkBirdï¼ˆèµï¼š22ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸ç›´ç™½ä¸”æœ‰æ•ˆâ€”â€”**æš´åŠ›æ‰¾åˆ°åŒ¹é…ä½ç½®ï¼Œæ’å…¥ä¸­é—´å…ƒç´ **ã€‚ä»£ç ç”¨`vector`ç»´æŠ¤æ•°ç»„ï¼Œé€»è¾‘æ¸…æ™°ï¼š  
  - é¦–å…ˆåˆ¤æ–­å…ƒç´ å¥‡å¶æ€§ï¼Œæ— è§£åˆ™ç›´æ¥è¿”å›ï¼›  
  - å¾ªç¯å¤„ç†æ•°ç»„ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ çš„åŒ¹é…ä½ç½®`j`ï¼Œè®°å½•æ’å…¥æ“ä½œï¼ˆä½ç½®éœ€åŠ ä¸Šå‰é¢åˆ é™¤çš„å…ƒç´ æ•°é‡`fnt`ï¼‰ï¼Œç„¶ååè½¬`a[1]`åˆ°`a[j]`ï¼ˆå…¶å®æ˜¯æ¨¡æ‹Ÿæ’å…¥åçš„æ•ˆæœï¼‰ï¼Œå¹¶åˆ é™¤å‰é¢çš„`a[0]`å’Œ`a[j]`ï¼›  
  - æœ€åè¾“å‡ºæ“ä½œæ¬¡æ•°å’Œåˆ’åˆ†çš„ tandem å—é•¿åº¦ã€‚  
  å…¶äº®ç‚¹åœ¨äº**ä¸è¿½æ±‚æ“ä½œæ¬¡æ•°æœ€ä¼˜ï¼Œè€Œæ˜¯ç”¨æœ€ç›´æ¥çš„æ–¹å¼æ„é€ **ï¼Œç¬¦åˆé¢˜ç›®â€œä¸éœ€è¦æœ€å°åŒ–æ“ä½œæ¬¡æ•°â€çš„è¦æ±‚ï¼Œä»£ç å¯è¯»æ€§é«˜ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚  

### é¢˜è§£äºŒï¼šyzy1ï¼ˆèµï¼š3ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„å·§å¦™ä¹‹å¤„åœ¨äº**å°†æ’å…¥æ“ä½œè½¬åŒ–ä¸ºåè½¬æ“ä½œ**ã€‚ä½œè€…å‘ç°ï¼Œæ’å…¥ä¸­é—´å…ƒç´ çš„å‰¯æœ¬ç­‰ä»·äºå°†æŸæ®µåŒºé—´åè½¬ï¼ˆä¾‹å¦‚ï¼Œæ’å…¥`a[l..r]`çš„å‰¯æœ¬ï¼Œå¯å°†`a[l..r]`åè½¬æˆ`a[r..l]`ï¼‰ã€‚é€šè¿‡è¿™ç§è½¬æ¢ï¼Œä½œè€…ç”¨åè½¬æ“ä½œå°†ä¸¤ä¸ªç›¸åŒå…ƒç´ â€œå‡‘â€åœ¨ä¸€èµ·ï¼Œå½¢æˆ tandem å—ã€‚ä»£ç ä¸­çš„`reverse`å‡½æ•°æ˜¯å…³é”®ï¼Œå°†å¤æ‚çš„æ’å…¥æ“ä½œç®€åŒ–ä¸ºåè½¬ï¼Œé€»è¾‘æ›´æ¸…æ™°ã€‚  

### é¢˜è§£ä¸‰ï¼šKiloPï¼ˆèµï¼š2ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„ä¼˜åŠ¿åœ¨äº**æ“ä½œæ¬¡æ•°çš„ä¸¥æ ¼åˆ†æ**ã€‚ä½œè€…è¯æ˜ï¼Œæ¯æ¬¡æ“ä½œå¯å°†æœªå¤„ç†å…ƒç´ æ•°é‡å‡å°‘2ï¼Œæ€»æ“ä½œæ¬¡æ•°ä¸è¶…è¿‡`nÂ²/2`ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚ä»£ç ç”¨æ•°ç»„æ¨¡æ‹Ÿæ•°ç»„å˜åŒ–ï¼Œè™½ç„¶æš´åŠ›ï¼Œä½†æ—¶é—´å¤æ‚åº¦è¶³å¤Ÿï¼ˆ`nâ‰¤500`ï¼‰ã€‚å…¶äº®ç‚¹åœ¨äº**ä¸¥è°¨çš„å¤æ‚åº¦åˆ†æ**ï¼Œè®©å­¦ä¹ è€…æ˜ç™½â€œæš´åŠ›æ„é€ â€çš„å¯è¡Œæ€§ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šå¦‚ä½•æ‰¾åˆ°åŒ¹é…ä½ç½®ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  å¯¹äºå½“å‰æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ `a[0]`ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸‹ä¸€ä¸ª`a[j] = a[0]`ï¼ˆ`j>0`ï¼‰ã€‚ç”±äºåŸæ•°ç»„æ‰€æœ‰å…ƒç´ å‡ºç°æ¬¡æ•°ä¸ºå¶æ•°ï¼Œå¿…ç„¶å­˜åœ¨è¿™æ ·çš„`j`ã€‚æš´åŠ›éå†`j`ä»1åˆ°æ•°ç»„é•¿åº¦å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦`O(n)` per å¾ªç¯ï¼Œæ€»æ—¶é—´`O(nÂ²)`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæš´åŠ›éå†æ˜¯æ„é€ é¢˜ä¸­å¸¸ç”¨çš„æ–¹æ³•ï¼Œåªè¦æ—¶é—´å…è®¸ï¼Œæ— éœ€è¿½æ±‚æ›´ä¼˜çš„æŸ¥æ‰¾æ–¹å¼ã€‚  

### 2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•è®°å½•æ’å…¥æ“ä½œçš„ä½ç½®ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  æ’å…¥æ“ä½œçš„ä½ç½®éœ€è¦è€ƒè™‘å‰é¢å·²åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼ˆä¾‹å¦‚ï¼Œå‰é¢åˆ é™¤äº†`fnt`ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå½“å‰æ•°ç»„çš„`a[j]`å¯¹åº”çš„åŸæ•°ç»„ä½ç½®æ˜¯`fnt + j`ï¼‰ã€‚ä¾‹å¦‚ï¼ŒDarkBirdçš„ä»£ç ä¸­ç”¨`fnt`è®°å½•å‰é¢åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼Œæ’å…¥ä½ç½®ä¸º`fnt + 1 + t + j`ï¼ˆ`t`æ˜¯æ’å…¥çš„å…ƒç´ ç´¢å¼•ï¼Œ`j`æ˜¯åŒ¹é…ä½ç½®ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤„ç†åŠ¨æ€æ•°ç»„çš„ä½ç½®åç§»æ—¶ï¼Œéœ€ç”¨å˜é‡è®°å½•å·²åˆ é™¤/æ’å…¥çš„å…ƒç´ æ•°é‡ï¼Œé¿å…ä½ç½®é”™è¯¯ã€‚  

### 3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•ä¿è¯æ“ä½œæ¬¡æ•°ä¸è¶…è¿‡é™åˆ¶ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  æ¯æ¬¡å¤„ç†éƒ½ä¼šå°†æœªå¤„ç†å…ƒç´ æ•°é‡å‡å°‘2ï¼ˆä¾‹å¦‚ï¼Œå¤„ç†`a[0]`å’Œ`a[j]`ï¼Œç§»é™¤è¿™ä¸¤ä¸ªå…ƒç´ ï¼Œå‰©ä½™å…ƒç´ æ•°é‡å‡å°‘2ï¼‰ã€‚æ€»å…±æœ‰`n/2`å¯¹å…ƒç´ ï¼Œæ¯å¯¹å¤„ç†éœ€è¦`O(n)`æ¬¡æ’å…¥æ“ä½œï¼Œæ€»æ“ä½œæ¬¡æ•°ä¸º`O(nÂ²)`ï¼Œè¿œå°äºé¢˜ç›®è¦æ±‚çš„`2nÂ²`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ„é€ é¢˜ä¸­ï¼Œåªè¦èƒ½è¯æ˜æ“ä½œæ¬¡æ•°åœ¨é™åˆ¶èŒƒå›´å†…ï¼Œæš´åŠ›æ„é€ æ˜¯å¯è¡Œçš„ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æš´åŠ›æ„é€ **ï¼šä¸éœ€è¦æœ€å°åŒ–æ“ä½œæ¬¡æ•°æ—¶ï¼Œç›´æ¥æŒ‰ç›´è§‚æ€è·¯æ„é€ ï¼›  
- **ä½ç½®åç§»è®°å½•**ï¼šç”¨å˜é‡è®°å½•å·²å¤„ç†çš„å…ƒç´ æ•°é‡ï¼Œé¿å…æ’å…¥ä½ç½®é”™è¯¯ï¼›  
- **å¥‡å¶æ€§åˆ¤æ–­**ï¼šå…ˆåˆ¤æ–­æ— è§£æ¡ä»¶ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆDarkBirdã€yzy1çš„æ€è·¯ï¼Œæä¾›ä¸€ä¸ªæ¸…æ™°çš„æ ¸å¿ƒå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <map>
  #include <algorithm>
  using namespace std;

  void solve() {
      int n;
      cin >> n;
      vector<int> a(n);
      map<int, int> cnt;
      for (int i = 0; i < n; ++i) {
          cin >> a[i];
          cnt[a[i]]++;
      }
      // æ— è§£åˆ¤æ–­
      for (auto &p : cnt) {
          if (p.second % 2 == 1) {
              cout << "-1\n";
              return;
          }
      }
      vector<pair<int, int>> ops; // æ“ä½œè®°å½•ï¼ˆä½ç½®ï¼Œå…ƒç´ ï¼‰
      vector<int> ans; // tandemå—é•¿åº¦
      int fnt = 0; // å‰é¢åˆ é™¤çš„å…ƒç´ æ•°é‡
      while (!a.empty()) {
          int j = 1;
          while (j < a.size() && a[j] != a[0]) {
              j++;
          }
          // æ’å…¥a[1..j-1]çš„å…ƒç´ åˆ°jåé¢
          for (int t = 1; t < j; ++t) {
              ops.emplace_back(fnt + 1 + t + j, a[t]); // ä½ç½®è®¡ç®—ï¼šfntï¼ˆå·²åˆ ï¼‰ + 1ï¼ˆa[0]çš„ä½ç½®ï¼‰ + tï¼ˆa[1..j-1]çš„ç´¢å¼•ï¼‰ + jï¼ˆa[j]çš„ä½ç½®ï¼‰
          }
          ans.push_back(2 * j); // tandemå—é•¿åº¦ä¸º2*j
          fnt += 2 * j; // å·²åˆ å…ƒç´ å¢åŠ 2*j
          // åè½¬a[1..j]ï¼Œå¹¶åˆ é™¤a[0]å’Œa[j]
          reverse(a.begin() + 1, a.begin() + j + 1);
          a.erase(a.begin() + j);
          a.erase(a.begin());
      }
      // è¾“å‡ºç»“æœ
      cout << ops.size() << "\n";
      for (auto &p : ops) {
          cout << p.first << " " << p.second << "\n";
      }
      cout << ans.size() << "\n";
      for (int x : ans) {
          cout << x << " ";
      }
      cout << "\n";
  }

  int main() {
      int T;
      cin >> T;
      while (T--) {
          solve();
      }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š  
  1. **è¾“å…¥ä¸æ— è§£åˆ¤æ–­**ï¼šè¯»å–æ•°ç»„ï¼Œç»Ÿè®¡å…ƒç´ æ¬¡æ•°ï¼Œè‹¥æœ‰å¥‡æ•°æ¬¡åˆ™è¾“å‡º-1ï¼›  
  2. **æ„é€ è¿‡ç¨‹**ï¼šå¾ªç¯å¤„ç†æ•°ç»„ï¼Œæ‰¾åˆ°åŒ¹é…ä½ç½®`j`ï¼Œè®°å½•æ’å…¥æ“ä½œï¼Œåè½¬å¹¶åˆ é™¤å‰é¢çš„å…ƒç´ ï¼›  
  3. **è¾“å‡ºç»“æœ**ï¼šè¾“å‡ºæ“ä½œæ¬¡æ•°ã€æ“ä½œç»†èŠ‚ã€tandemå—é•¿åº¦ã€‚  

### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼šDarkBirdï¼ˆæ ¸å¿ƒç‰‡æ®µï¼‰  
* **äº®ç‚¹**ï¼šç”¨`vector`çš„`erase`å’Œ`reverse`å‡½æ•°æ¨¡æ‹Ÿæ•°ç»„å˜åŒ–ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  while (!a.empty()) {
      int j = 1;
      while (j < a.size() && a[j] != a[0]) {
          j++;
      }
      for (int t = 1; t < j; ++t) {
          ops.emplace_back(fnt + 1 + t + j, a[t]);
      }
      ans.push_back(2 * j);
      fnt += 2 * j;
      reverse(a.begin() + 1, a.begin() + j + 1);
      a.erase(a.begin() + j);
      a.erase(a.begin());
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `j`æ˜¯`a[0]`çš„ä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®ï¼›  
  - `ops.emplace_back`è®°å½•æ’å…¥æ“ä½œçš„ä½ç½®ï¼ˆ`fnt + 1 + t + j`ï¼‰å’Œå…ƒç´ ï¼ˆ`a[t]`ï¼‰ï¼›  
  - `reverse`å‡½æ•°åè½¬`a[1]`åˆ°`a[j]`ï¼Œæ¨¡æ‹Ÿæ’å…¥åçš„æ•ˆæœï¼›  
  - `erase`å‡½æ•°åˆ é™¤`a[0]`å’Œ`a[j]`ï¼Œå¤„ç†å‰©ä½™å…ƒç´ ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`vector`çš„`erase`å’Œ`reverse`å‡½æ•°æ˜¯å¤„ç†åŠ¨æ€æ•°ç»„çš„å¸¸ç”¨å·¥å…·ï¼Œé€‚åˆæ¨¡æ‹Ÿæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚  

#### é¢˜è§£äºŒï¼šyzy1ï¼ˆæ ¸å¿ƒç‰‡æ®µï¼‰  
* **äº®ç‚¹**ï¼šç”¨åè½¬æ“ä½œç®€åŒ–æ’å…¥ï¼Œé€»è¾‘æ›´æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  while (a[i] != a[i+1]) {
      int pos = -1;
      for (int j = i+1; j < n; ++j) {
          if (a[j] == a[i]) {
              pos = j;
              break;
          }
      }
      int len = pos - i;
      for (int j = i; j < i+len-1; ++j) {
          op.push_back({j + len + dlt - 1, a[j]});
      }
      reverse(a + i, a + i + len);
      ans.push_back(len * 2);
      dlt += len * 2;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `pos`æ˜¯`a[i]`çš„ä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®ï¼›  
  - `reverse`å‡½æ•°åè½¬`a[i]`åˆ°`a[pos]`ï¼Œå°†`a[i]`å’Œ`a[pos]`å‡‘åœ¨ä¸€èµ·ï¼›  
  - `dlt`è®°å½•å·²æ’å…¥çš„å…ƒç´ æ•°é‡ï¼Œç”¨äºè®¡ç®—æ’å…¥ä½ç½®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåè½¬æ“ä½œæ˜¯æ„é€ é¢˜ä¸­çš„å¸¸ç”¨æŠ€å·§ï¼Œå¯å°†å¤æ‚çš„æ’å…¥è½¬åŒ–ä¸ºç®€å•çš„åè½¬ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œæ•°ç»„æ‹¼å›¾å¤§æŒ‘æˆ˜â€**ï¼ˆ8ä½åƒç´ é£æ ¼ï¼Œç±»ä¼¼FCæ¸¸æˆã€Šä¿„ç½—æ–¯æ–¹å—ã€‹çš„ç®€æ´é£æ ¼ï¼‰ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åˆå§‹åŒ–åœºæ™¯**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºåƒç´ åŒ–æ•°ç»„ï¼ˆæ¯ä¸ªå…ƒç´ æ˜¯16x16çš„åƒç´ å—ï¼Œé¢œè‰²éšæœºï¼‰ï¼›  
   - å±å¹•å³ä¾§æ˜¾ç¤ºâ€œæ§åˆ¶é¢æ¿â€ï¼šå¼€å§‹/æš‚åœæŒ‰é’®ã€å•æ­¥æ‰§è¡ŒæŒ‰é’®ã€é‡ç½®æŒ‰é’®ã€é€Ÿåº¦æ»‘å—ï¼ˆ0.5x~2xï¼‰ï¼›  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»æ¾BGMï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **ç®—æ³•æ‰§è¡Œè¿‡ç¨‹**ï¼š  
   - **æ­¥éª¤1ï¼šé«˜äº®å¤´éƒ¨å…ƒç´ **ï¼šæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆ`a[0]`ï¼‰ç”¨çº¢è‰²é«˜äº®ï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆï¼›  
   - **æ­¥éª¤2ï¼šå¯»æ‰¾åŒ¹é…ä½ç½®**ï¼šä»`a[1]`å¼€å§‹ï¼Œé€ä¸ªå…ƒç´ ç”¨è“è‰²é—ªçƒï¼Œç›´åˆ°æ‰¾åˆ°`a[j] = a[0]`ï¼Œæ­¤æ—¶`a[j]`ç”¨è“è‰²é«˜äº®ï¼›  
   - **æ­¥éª¤3ï¼šæ’å…¥å…ƒç´ **ï¼šåœ¨`a[j]`åæ’å…¥`a[1]`åˆ°`a[j-1]`çš„å…ƒç´ ï¼ˆé»„è‰²åƒç´ å—ï¼‰ï¼Œä»å³å‘å·¦â€œæ»‘å…¥â€ï¼Œæ¯ä¸ªå…ƒç´ æ’å…¥æ—¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
   - **æ­¥éª¤4ï¼šå½¢æˆtandemå—**ï¼š`a[0]`åˆ°`a[j-1]`åŠ ä¸Šæ’å…¥çš„å…ƒç´ åˆå¹¶ä¸ºç»¿è‰²åƒç´ å—ï¼Œä»£è¡¨è¯¥å—å·²å¤„ç†ï¼Œéšåâ€œæ¶ˆå¤±â€ï¼ˆå‘å·¦ç§»åŠ¨ï¼Œå‰©ä½™å…ƒç´ å¡«å……ç©ºä½ï¼‰ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³æ•ˆï¼‰ï¼›  
   - **æ­¥éª¤5ï¼šé‡å¤å¤„ç†**ï¼šå‰©ä½™å…ƒç´ å‘å·¦ç§»åŠ¨ï¼Œå›åˆ°æ­¥éª¤1ï¼Œç›´åˆ°æ•°ç»„ä¸ºç©ºã€‚  

3. **äº¤äº’è®¾è®¡**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œæ‰§è¡Œä¸Šè¿°ä¸€ä¸ªæ­¥éª¤ï¼›  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒæŒ‰è®¾å®šé€Ÿåº¦è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ï¼›  
   - **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œæ¢å¤åˆå§‹æ•°ç»„ï¼Œé‡æ–°å¼€å§‹æ¼”ç¤ºã€‚  

### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œé™ä½å­¦ä¹ å‹åŠ›ï¼›  
- **é¢œè‰²é«˜äº®**ï¼šç”¨ä¸åŒé¢œè‰²åŒºåˆ†ä¸åŒçŠ¶æ€ï¼ˆæœªå¤„ç†ã€å½“å‰å¤„ç†ã€å·²å¤„ç†ï¼‰ï¼Œç›´è§‚å±•ç¤ºç®—æ³•æµç¨‹ï¼›  
- **éŸ³æ•ˆåé¦ˆ**ï¼šç”¨éŸ³æ•ˆå¼ºåŒ–å…³é”®æ“ä½œï¼ˆå¦‚æ’å…¥ã€å½¢æˆtandemå—ï¼‰ï¼Œå¸®åŠ©è®°å¿†ï¼›  
- **äº¤äº’æ§åˆ¶**ï¼šæ”¯æŒå•æ­¥å’Œè‡ªåŠ¨æ’­æ”¾ï¼Œæ»¡è¶³ä¸åŒå­¦ä¹ èŠ‚å¥çš„éœ€æ±‚ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ¬é¢˜çš„**æ„é€ ä¸æ¨¡æ‹Ÿ**æ€è·¯å¯è¿ç§»åˆ°ä»¥ä¸‹åœºæ™¯ï¼š  
1. **å­—ç¬¦ä¸²æ„é€ **ï¼šå¦‚é€šè¿‡æ’å…¥å­—ç¬¦å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå›æ–‡ä¸²ï¼›  
2. **æ•°ç»„é‡ç»„**ï¼šå¦‚é€šè¿‡äº¤æ¢å…ƒç´ å°†æ•°ç»„è½¬åŒ–ä¸ºé€’å¢åºåˆ—ï¼›  
3. **æ¸¸æˆå¼€å‘**ï¼šå¦‚æ¨¡æ‹Ÿæ–¹å—çš„æ’å…¥ä¸æ¶ˆé™¤ï¼ˆå¦‚ã€Šä¿„ç½—æ–¯æ–¹å—ã€‹çš„è¡Œæ¶ˆé™¤ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1090** - åˆå¹¶æœå­  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯ä¸€é“ç»å…¸çš„æ„é€ é¢˜ï¼Œéœ€è¦é€šè¿‡åˆå¹¶æ“ä½œå°†æœå­å †åˆå¹¶ä¸ºä¸€ä¸ªï¼Œé”»ç‚¼æ„é€ ç­–ç•¥å’Œå¤æ‚åº¦åˆ†æèƒ½åŠ›ã€‚  
2. **æ´›è°· P1160** - é˜Ÿåˆ—å®‰æ’  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦é€šè¿‡æ’å…¥æ“ä½œæ„é€ é˜Ÿåˆ—ï¼Œé”»ç‚¼åŠ¨æ€æ•°ç»„çš„ä½ç½®å¤„ç†èƒ½åŠ›ã€‚  
3. **æ´›è°· P1088** - ç«æ˜Ÿäºº  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦é€šè¿‡æ’å…¥æ“ä½œä¿®æ”¹å­—ç¬¦ä¸²ï¼Œé”»ç‚¼å­—ç¬¦ä¸²æ„é€ å’Œæ¨¡æ‹Ÿèƒ½åŠ›ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª DarkBird)  
> â€œä¸ç”¨è€ƒè™‘æ˜¯ä¸æ˜¯å¯ä»¥èŠ‚çœï¼Œå°±æ˜¯æŒ‰ç…§é¡ºåºæŠŠä¸­é—´çš„éƒ¨åˆ†åŠ ä¸€éã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒéå¸¸å®ç”¨ã€‚åœ¨æ„é€ é¢˜ä¸­ï¼Œ**æš´åŠ›æ„é€ **å¾€å¾€æ˜¯æœ€ç›´æ¥ã€æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼Œåªè¦èƒ½è¯æ˜æ“ä½œæ¬¡æ•°åœ¨é™åˆ¶èŒƒå›´å†…ï¼Œæ— éœ€è¿½æ±‚æ›´ä¼˜çš„ç­–ç•¥ã€‚è¿™æé†’æˆ‘ä»¬ï¼Œåœ¨è§£å†³ç¼–ç¨‹é—®é¢˜æ—¶ï¼Œä¸è¦è¿‡åº¦çº ç»“äºâ€œæœ€ä¼˜è§£â€ï¼Œè€Œè¦å…ˆæ‰¾åˆ°â€œå¯è¡Œè§£â€ã€‚  

### å‚è€ƒç»éªŒ (æ¥è‡ª yzy1)  
> â€œç”¨æ’å…¥æ“ä½œå®ç°åè½¬ï¼Œå°†å¤æ‚çš„æ’å…¥è½¬åŒ–ä¸ºç®€å•çš„åè½¬ã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„æ€è·¯éå¸¸å·§å¦™ã€‚**æ“ä½œè½¬æ¢**æ˜¯æ„é€ é¢˜ä¸­çš„å¸¸ç”¨æŠ€å·§ï¼Œé€šè¿‡å°†ä¸€ç§æ“ä½œè½¬åŒ–ä¸ºå¦ä¸€ç§æ›´æ˜“å¤„ç†çš„æ“ä½œï¼Œå¯ä»¥ç®€åŒ–é—®é¢˜ã€‚è¿™æé†’æˆ‘ä»¬ï¼Œåœ¨è§£å†³é—®é¢˜æ—¶ï¼Œè¦å­¦ä¼šâ€œæ¢ä¸ªè§’åº¦çœ‹é—®é¢˜â€ï¼Œå¯»æ‰¾æ›´ç®€æ´çš„è§£å†³æ–¹æ¡ˆã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œRepetitions Decodingâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£**æ„é€ ä¸æ¨¡æ‹Ÿ**çš„æ ¸å¿ƒæ€è·¯ï¼ŒæŒæ¡åŠ¨æ€æ•°ç»„çš„å¤„ç†æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­ç»ƒä¹ **å’Œ**ä¸æ–­æ€è€ƒ**â€”â€”ä¸‹æ¬¡é‡åˆ°æ„é€ é¢˜æ—¶ï¼Œä¸å¦¨è¯•è¯•æš´åŠ›æ„é€ ï¼Œè¯´ä¸å®šèƒ½å¿«é€Ÿè§£å†³é—®é¢˜ï¼ğŸ’ª  

å¦‚æœæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶å‘æˆ‘æé—®ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ï¼ğŸ˜Š

---
å¤„ç†ç”¨æ—¶ï¼š167.31ç§’
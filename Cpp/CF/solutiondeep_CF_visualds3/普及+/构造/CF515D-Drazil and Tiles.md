# é¢˜ç›®ä¿¡æ¯

# Drazil and Tiles

## é¢˜ç›®æè¿°

Drazil created a following problem about putting $ 1Ã—2 $ tiles into an $ nÃ—m $ grid:

"There is a grid with some cells that are empty and some cells that are occupied. You should use $ 1Ã—2 $ tiles to cover all empty cells and no two tiles should cover each other. And you should print a solution about how to do it."

But Drazil doesn't like to write special checking program for this task. His friend, Varda advised him: "how about asking contestant only to print the solution when it exists and it is unique? Otherwise contestant may print 'Not unique' ".

Drazil found that the constraints for this task may be much larger than for the original task!

Can you solve this new problem?

Note that you should print 'Not unique' either when there exists no solution or when there exists several different solutions for the original task.

## è¯´æ˜/æç¤º

In the first case, there are indeed two solutions:

```plain
<>^
^*v
v<>
```

and

```plain
^<>
v*^
<>v
```

so the answer is "Not unique".

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 3
...
.*.
...
```

### è¾“å‡º

```
Not unique
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4 4
..**
*...
*.**
....
```

### è¾“å‡º

```
<>**
*^<>
*v**
<><>```

## æ ·ä¾‹ #3

### è¾“å…¥

```
2 4
*..*
....
```

### è¾“å‡º

```
*<>*
<><>```

## æ ·ä¾‹ #4

### è¾“å…¥

```
1 1
.
```

### è¾“å‡º

```
Not unique
```

## æ ·ä¾‹ #5

### è¾“å…¥

```
1 1
*
```

### è¾“å‡º

```
*
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šDrazil and Tiles æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æã€ŒDrazil and Tilesã€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚é¢˜ç›®è¦æ±‚ç”¨1Ã—2çš„ç“·ç –è¦†ç›–ç½‘æ ¼ä¸­çš„æ‰€æœ‰ç©ºå•å…ƒæ ¼ï¼ˆ`.`ï¼‰ï¼Œä¸”æ–¹æ¡ˆå¿…é¡»**å”¯ä¸€**â€”â€”å¦‚æœæ— è§£æˆ–æœ‰å¤šä¸ªè§£ï¼Œéƒ½è¦è¾“å‡ºã€ŒNot uniqueã€ã€‚æœ¬æŒ‡å—å°†å¸®ä½ æ¢³ç†æ ¸å¿ƒæ€è·¯ï¼ŒæŒæ¡å…³é”®ç®—æ³•ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚ç†è§£è¿‡ç¨‹ï¼


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š**åŸºäºåº¦æ•°çš„è´ªå¿ƒåŒ¹é…ç­–ç•¥**ï¼ˆç»“åˆå›¾è®ºæ‹“æ‰‘æ’åºæ€æƒ³ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œåœ¨äºç†è§£ã€Œ**åº¦æ•°1çš„ç‚¹å¿…é¡»ä¼˜å…ˆå¤„ç†**ã€â€”â€”å°±åƒæ•´ç†ä¸€ä¸²é”é“¾ï¼šå¦‚æœä¸€ä¸ªé”é“¾çš„æœ«ç«¯ï¼ˆåªæœ‰1ä¸ªè¿æ¥ç‚¹ï¼‰ï¼Œå®ƒåªèƒ½å’Œä¸‹ä¸€ä¸ªç¯å›ºå®šè¿æ¥ï¼Œå¦åˆ™æ•´ä¸ªé”é“¾æ— æ³•é—­åˆã€‚  
åœ¨æœ¬é¢˜ä¸­ï¼š
- æ¯ä¸ªç©ºå•å…ƒæ ¼ï¼ˆ`.`ï¼‰æ˜¯å›¾ä¸­çš„**èŠ‚ç‚¹**ï¼›
- ç›¸é‚»çš„`.`ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ä¹‹é—´æœ‰ä¸€æ¡**è¾¹**ï¼›
- èŠ‚ç‚¹çš„ã€Œåº¦æ•°ã€æ˜¯å…¶ç›¸é‚»`.`çš„æ•°é‡ã€‚

**æ ¸å¿ƒé€»è¾‘**ï¼š  
1. æ‰¾å‡ºæ‰€æœ‰ã€Œåº¦æ•°1çš„èŠ‚ç‚¹ã€ï¼ˆæœ«ç«¯ï¼‰ï¼Œå®ƒä»¬åªèƒ½å’Œå”¯ä¸€çš„é‚»å±…é…å¯¹ï¼ˆå¦åˆ™æ— æ³•è¦†ç›–ï¼‰ï¼›
2. é…å¯¹è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼ˆç”¨ç®­å¤´æ ‡è®°æ–¹å‘ï¼Œå¦‚`^`å’Œ`v`ã€`<`å’Œ`>`ï¼‰ï¼Œå¹¶å°†å®ƒä»¬æ ‡è®°ä¸ºå·²å¤„ç†ï¼ˆå˜æˆ`*`ï¼‰ï¼›
3. é…å¯¹åï¼Œæ›´æ–°é‚»å±…çš„åº¦æ•°ï¼ˆæ¯”å¦‚é…å¯¹èŠ‚ç‚¹Aå’ŒBï¼ŒAçš„é‚»å±…Cçš„åº¦æ•°ä¼šå‡1ï¼‰ï¼›
4. é‡å¤æ­¥éª¤1-3ï¼Œç›´åˆ°æ²¡æœ‰åº¦æ•°1çš„èŠ‚ç‚¹ï¼›
5. æœ€åæ£€æŸ¥ï¼šå¦‚æœæ‰€æœ‰`.`éƒ½è¢«å¤„ç†ï¼Œè¯´æ˜æ–¹æ¡ˆå”¯ä¸€ï¼›å¦åˆ™å­˜åœ¨ç¯ï¼ˆç¯çš„é…å¯¹æ–¹å¼ä¸å”¯ä¸€ï¼‰ï¼Œè¾“å‡ºã€ŒNot uniqueã€ã€‚

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£æ ¼**ï¼ˆç±»ä¼¼FCçº¢ç™½æœºï¼‰å±•ç¤ºç½‘æ ¼ï¼š
- ç©ºå•å…ƒæ ¼ï¼ˆ`.`ï¼‰æ˜¯ç™½è‰²åƒç´ å—ï¼›
- éšœç¢ç‰©ï¼ˆ`*`ï¼‰æ˜¯é»‘è‰²ï¼›
- åº¦æ•°1çš„èŠ‚ç‚¹**é«˜äº®ä¸ºè“è‰²**ï¼ˆæç¤ºä¼˜å…ˆå¤„ç†ï¼‰ï¼›
- é…å¯¹æ—¶ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¼šæ˜¾ç¤º**ç®­å¤´åŠ¨ç”»**ï¼ˆå¦‚`^`ä»Aè·³åˆ°Bï¼Œ`v`ä»Bè·³å›Aï¼‰ï¼Œå¹¶ä¼´éšã€Œå®ã€çš„éŸ³æ•ˆï¼›
- å¤„ç†åçš„èŠ‚ç‚¹å˜æˆ**ç°è‰²**ï¼Œé‚»å±…çš„åº¦æ•°å‡å°‘æ—¶ä¼š**é—ªçƒæµ…è“**ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºå¤§å®¶ç­›é€‰äº†3ä»½æ€è·¯æ¸…æ™°ã€ä»£ç è§„èŒƒçš„ä¼˜è´¨é¢˜è§£ï¼š

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šZJMZJMï¼Œèµï¼š4ï¼‰
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ˜¯æœ¬é¢˜çš„ã€Œæ ‡å‡†è§£æ³•æ¨¡æ¿ã€ï¼æ€è·¯éå¸¸ç›´ç™½â€”â€”ç”¨é˜Ÿåˆ—ï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰å¤„ç†åº¦æ•°1çš„èŠ‚ç‚¹ï¼Œæ¯ä¸€æ­¥éƒ½æ¸…æ™°æ›´æ–°åº¦æ•°ã€æ ‡è®°é…å¯¹ç»“æœã€‚ä»£ç é£æ ¼è§„èŒƒï¼ˆæ¯”å¦‚`d[i][j]`è¡¨ç¤ºåº¦æ•°ï¼Œ`ans[i][j]`å­˜å‚¨ç»“æœï¼‰ï¼Œè¾¹ç•Œæ¡ä»¶å¤„ç†ä¸¥è°¨ï¼ˆæ¯”å¦‚åˆ¤æ–­`nowx`ã€`nowy`æ˜¯å¦è¶Šç•Œï¼‰ã€‚å°¤å…¶å€¼å¾—å­¦ä¹ çš„æ˜¯**é˜Ÿåˆ—çš„ä½¿ç”¨**ï¼šå®ƒä¿è¯äº†ã€Œå¤„ç†å®Œä¸€ä¸ªæœ«ç«¯åï¼Œç«‹å³å¤„ç†æ–°äº§ç”Ÿçš„æœ«ç«¯ã€ï¼Œæ•ˆç‡å¾ˆé«˜ï¼ˆæ—¶é—´å¤æ‚åº¦O(nm)ï¼‰ã€‚


### é¢˜è§£äºŒï¼ˆä½œè€…ï¼š_edge_ï¼Œèµï¼š1ï¼‰
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„äº®ç‚¹æ˜¯**ä»£ç ç®€æ´**ï¼ç”¨æ•°ç»„`aa`å­˜å‚¨åº¦æ•°1çš„èŠ‚ç‚¹ï¼Œå¤„ç†æ—¶ç›´æ¥éå†æ•°ç»„ï¼Œé¿å…äº†é˜Ÿåˆ—çš„å¤æ‚åº¦ã€‚è™½ç„¶æ€è·¯å’Œé¢˜è§£ä¸€ä¸€è‡´ï¼Œä½†ä»£ç æ›´çŸ­å°ç²¾æ‚ï¼Œé€‚åˆå­¦ä¹ ã€Œå¦‚ä½•ç®€åŒ–é€»è¾‘ã€ã€‚æ¯”å¦‚ç”¨`fx`ã€`fy`æ•°ç»„è¡¨ç¤ºå››ä¸ªæ–¹å‘ï¼Œ`fz`æ•°ç»„ç›´æ¥å¯¹åº”ç®­å¤´å­—ç¬¦ï¼Œå‡å°‘äº†é‡å¤ä»£ç ã€‚


### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šdistjr_ï¼Œèµï¼š0ï¼‰
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„ã€Œè°ƒè¯•æ„è¯†ã€å€¼å¾—å­¦ä¹ ï¼ä½œè€…åœ¨ä»£ç ä¸­åŠ å…¥äº†`DEBUG`å®ï¼Œå¯ä»¥æ‰“å°ä¸­é—´çš„åº¦æ•°çŸ©é˜µå’Œå¤„ç†çš„èŠ‚ç‚¹ï¼Œå¸®åŠ©å®šä½é”™è¯¯ã€‚è™½ç„¶å˜é‡åæœ‰ç‚¹å°ç‘•ç–µï¼ˆæ¯”å¦‚`stack`å®é™…æ˜¯é˜Ÿåˆ—ï¼‰ï¼Œä½†æ ¸å¿ƒé€»è¾‘æ­£ç¡®â€”â€”ç”¨é˜Ÿåˆ—å¤„ç†åº¦æ•°1çš„èŠ‚ç‚¹ï¼Œé…å¯¹åæ›´æ–°é‚»å±…çš„åº¦æ•°ã€‚é€‚åˆåˆå­¦è€…å­¦ä¹ ã€Œå¦‚ä½•è°ƒè¯•ç®—æ³•ã€ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£é¢˜ä¸­ï¼Œå¤§å®¶å¸¸é‡åˆ°3ä¸ªå…³é”®é—®é¢˜ï¼Œæˆ‘ä»¬é€ä¸€æ‹†è§£ï¼š

### 1. ä¸ºä»€ä¹ˆåº¦æ•°1çš„ç‚¹å¿…é¡»ä¼˜å…ˆå¤„ç†ï¼Ÿ
* **åˆ†æ**ï¼šåº¦æ•°1çš„ç‚¹åªæœ‰1ä¸ªé‚»å±…ï¼Œ**åªèƒ½å’Œè¿™ä¸ªé‚»å±…é…å¯¹**â€”â€”å¦‚æœä¸å¤„ç†ï¼Œè¿™ä¸ªç‚¹æ°¸è¿œæ— æ³•è¢«è¦†ç›–ï¼ˆ1Ã—2ç“·ç –éœ€è¦ä¸¤ä¸ªç›¸é‚»ç‚¹ï¼‰ã€‚æ¯”å¦‚æ ·ä¾‹4ï¼ˆ1Ã—1çš„`.`ï¼‰ï¼Œåº¦æ•°æ˜¯0ï¼Œæ— æ³•å¤„ç†ï¼Œæ‰€ä»¥è¾“å‡ºã€ŒNot uniqueã€ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåº¦æ•°1çš„ç‚¹æ˜¯ã€Œçªç ´å£ã€ï¼Œä¼˜å…ˆå¤„ç†èƒ½ç¼©å°é—®é¢˜è§„æ¨¡ã€‚


### 2. å¦‚ä½•æ­£ç¡®æ›´æ–°é‚»å±…çš„åº¦æ•°ï¼Ÿ
* **åˆ†æ**ï¼šå½“é…å¯¹èŠ‚ç‚¹Aå’ŒBåï¼ŒAå’ŒBçš„æ‰€æœ‰é‚»å±…ï¼ˆé™¤äº†å½¼æ­¤ï¼‰çš„åº¦æ•°éƒ½è¦å‡1â€”â€”å› ä¸ºAå’ŒBå·²è¢«å¤„ç†ï¼Œä¸å†æ˜¯å¯è¿æ¥çš„èŠ‚ç‚¹ã€‚æ¯”å¦‚Açš„é‚»å±…Cï¼ŒåŸæœ¬åº¦æ•°æ˜¯2ï¼ˆè¿æ¥Aå’ŒDï¼‰ï¼Œå¤„ç†Aåï¼ŒCçš„åº¦æ•°å˜æˆ1ï¼Œéœ€è¦åŠ å…¥é˜Ÿåˆ—ç»§ç»­å¤„ç†ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ›´æ–°åº¦æ•°æ—¶ï¼Œè¦éå†é…å¯¹èŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…ï¼Œé¿å…é—æ¼ã€‚


### 3. å¦‚ä½•åˆ¤æ–­æ–¹æ¡ˆæ˜¯å¦å”¯ä¸€ï¼Ÿ
* **åˆ†æ**ï¼šå¤„ç†å®Œæ‰€æœ‰åº¦æ•°1çš„èŠ‚ç‚¹åï¼Œå¦‚æœè¿˜æœ‰æœªå¤„ç†çš„`.`ï¼Œè¯´æ˜è¿™äº›ç‚¹æ„æˆ**ç¯**ï¼ˆæ¯”å¦‚3Ã—3ç½‘æ ¼çš„ä¸­é—´æ˜¯`*`ï¼Œå‘¨å›´8ä¸ªç‚¹æ„æˆç¯ï¼‰ã€‚ç¯çš„é…å¯¹æ–¹å¼ä¸å”¯ä¸€ï¼ˆæ¯”å¦‚é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆè¦†ç›–ï¼‰ï¼Œæ‰€ä»¥è¾“å‡ºã€ŒNot uniqueã€ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¯æ˜¯ã€Œæ–¹æ¡ˆä¸å”¯ä¸€ã€çš„æ ‡å¿—ï¼Œå› ä¸ºç¯å†…çš„é…å¯¹å¯ä»¥ã€Œç¿»è½¬ã€ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
1. **å›¾è®ºå»ºæ¨¡**ï¼šå°†ç½‘æ ¼é—®é¢˜è½¬åŒ–ä¸ºå›¾çš„èŠ‚ç‚¹å’Œè¾¹ï¼Œç®€åŒ–é—®é¢˜ï¼›
2. **è´ªå¿ƒç­–ç•¥**ï¼šä¼˜å…ˆå¤„ç†åº¦æ•°1çš„ç‚¹ï¼Œé€æ­¥ç¼©å°é—®é¢˜è§„æ¨¡ï¼›
3. **é˜Ÿåˆ—ä¼˜åŒ–**ï¼šç”¨é˜Ÿåˆ—å­˜å‚¨å¾…å¤„ç†çš„èŠ‚ç‚¹ï¼Œä¿è¯å¤„ç†é¡ºåºï¼ˆç±»ä¼¼æ‹“æ‰‘æ’åºï¼‰ï¼›
4. **è¾¹ç•Œå¤„ç†**ï¼šå§‹ç»ˆæ£€æŸ¥åæ ‡æ˜¯å¦è¶Šç•Œï¼ˆæ¯”å¦‚`nowx > n`æˆ–`nowy < 1`ï¼‰ï¼Œé¿å…æ•°ç»„è¶Šç•Œé”™è¯¯ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆZJMZJMé¢˜è§£çš„æ€è·¯ï¼Œè°ƒæ•´äº†å˜é‡åçš„å¯è¯»æ€§ï¼Œæ˜¯ä¸€ä»½æ¸…æ™°çš„æ ‡å‡†å®ç°ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <queue>
#include <cstdio>
using namespace std;

const int MAXN = 2005;
const int dx[] = {1, -1, 0, 0}; // ä¸‹ã€ä¸Šã€å³ã€å·¦
const int dy[] = {0, 0, 1, -1}; // å¯¹åº”æ–¹å‘çš„yåç§»
const char arrow[4][2] = {{'^', 'v'}, {'v', '^'}, {'<', '>'}, {'>', '<'}}; // é…å¯¹çš„ç®­å¤´

int n, m;
char grid[MAXN][MAXN]; // åŸå§‹ç½‘æ ¼
char ans[MAXN][MAXN];  // ç»“æœç½‘æ ¼
int degree[MAXN][MAXN];// æ¯ä¸ªç‚¹çš„åº¦æ•°ï¼ˆç›¸é‚»`.`çš„æ•°é‡ï¼‰
queue<pair<int, int>> q; // å­˜å‚¨åº¦æ•°1çš„ç‚¹

int main() {
    // 1. è¯»å–è¾“å…¥
    scanf("%d%d", &n, &m);
    for (int i = 1; i <= n; ++i) {
        char s[MAXN];
        scanf("%s", s + 1); // ä»ä¸‹æ ‡1å¼€å§‹å­˜å‚¨
        for (int j = 1; j <= m; ++j) {
            grid[i][j] = s[j];
            ans[i][j] = grid[i][j]; // åˆå§‹åŒ–ç»“æœç½‘æ ¼
        }
    }

    // 2. è®¡ç®—æ¯ä¸ªç‚¹çš„åº¦æ•°ï¼Œå°†åº¦æ•°1çš„ç‚¹å…¥é˜Ÿ
    for (int i = 1; i <= n; ++i) {
        for (int j = 1; j <= m; ++j) {
            if (grid[i][j] != '.') continue;
            int cnt = 0;
            for (int k = 0; k < 4; ++k) {
                int x = i + dx[k], y = j + dy[k];
                if (x >= 1 && x <= n && y >= 1 && y <= m && grid[x][y] == '.') {
                    cnt++;
                }
            }
            degree[i][j] = cnt;
            if (cnt == 1) {
                q.push({i, j});
            }
        }
    }

    // 3. å¤„ç†é˜Ÿåˆ—ä¸­çš„ç‚¹ï¼ˆåº¦æ•°1çš„ç‚¹ï¼‰
    while (!q.empty()) {
        auto [x, y] = q.front(); q.pop();
        if (grid[x][y] != '.') continue; // å·²å¤„ç†è¿‡ï¼Œè·³è¿‡

        // æ‰¾åˆ°å”¯ä¸€çš„é‚»å±…
        for (int k = 0; k < 4; ++k) {
            int nx = x + dx[k], ny = y + dy[k];
            if (nx < 1 || nx > n || ny < 1 || ny > m) continue;
            if (grid[nx][ny] != '.') continue;

            // æ ‡è®°é…å¯¹çš„ç®­å¤´
            ans[x][y] = arrow[k][0];
            ans[nx][ny] = arrow[k][1];
            // æ ‡è®°ä¸ºå·²å¤„ç†ï¼ˆé¿å…é‡å¤å¤„ç†ï¼‰
            grid[x][y] = grid[nx][ny] = '*';

            // æ›´æ–°é‚»å±…çš„åº¦æ•°
            for (int d = 0; d < 4; ++d) {
                int nnx = nx + dx[d], nny = ny + dy[d];
                if (nnx < 1 || nnx > n || nny < 1 || nny > m) continue;
                if (grid[nnx][nny] == '.') {
                    degree[nnx][nny]--;
                    if (degree[nnx][nny] == 1) {
                        q.push({nnx, nny});
                    }
                }
            }
            break; // æ‰¾åˆ°é‚»å±…åï¼Œè·³å‡ºå¾ªç¯
        }
    }

    // 4. åˆ¤æ–­ç»“æœ
    bool allCovered = true;
    for (int i = 1; i <= n; ++i) {
        for (int j = 1; j <= m; ++j) {
            if (grid[i][j] == '.') {
                allCovered = false;
                break;
            }
        }
        if (!allCovered) break;
    }

    if (allCovered) {
        for (int i = 1; i <= n; ++i) {
            printf("%s\n", ans[i] + 1); // è¾“å‡ºç»“æœï¼ˆä»ä¸‹æ ‡1å¼€å§‹ï¼‰
        }
    } else {
        printf("Not unique\n");
    }

    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–ç½‘æ ¼ï¼Œåˆå§‹åŒ–ç»“æœç½‘æ ¼ï¼›
  2. **åº¦æ•°è®¡ç®—**ï¼šéå†æ¯ä¸ªç‚¹ï¼Œè®¡ç®—ç›¸é‚»`.`çš„æ•°é‡ï¼Œå°†åº¦æ•°1çš„ç‚¹å…¥é˜Ÿï¼›
  3. **é˜Ÿåˆ—å¤„ç†**ï¼šå–å‡ºåº¦æ•°1çš„ç‚¹ï¼Œæ‰¾åˆ°å”¯ä¸€é‚»å±…ï¼Œæ ‡è®°ç®­å¤´ï¼Œæ›´æ–°é‚»å±…çš„åº¦æ•°ï¼›
  4. **ç»“æœåˆ¤æ–­**ï¼šæ£€æŸ¥æ˜¯å¦æ‰€æœ‰`.`éƒ½è¢«å¤„ç†ï¼Œè¾“å‡ºç»“æœæˆ–ã€ŒNot uniqueã€ã€‚


### é¢˜è§£ä¸€ï¼ˆZJMZJMï¼‰æ ¸å¿ƒç‰‡æ®µèµæ
* **äº®ç‚¹**ï¼šç”¨é˜Ÿåˆ—å®ç°å¹¿åº¦ä¼˜å…ˆå¤„ç†ï¼Œåº¦æ•°æ›´æ–°é€»è¾‘ä¸¥è°¨ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
// å¤„ç†é˜Ÿåˆ—ä¸­çš„ç‚¹
while (!q.empty()) {
    hp pt = q.front(); q.pop();
    int i = pt.x, j = pt.y;
    if (color[i][j] == '*' || d[i][j] != 1) continue;

    // æ‰¾åˆ°é‚»å±…
    for (int k = 0; k < 4; ++k) {
        int nx = i + sx[k], ny = j + sy[k];
        if (nx < 1 || nx > n || ny < 1 || ny > m) continue;
        if (color[nx][ny] == '.') {
            // æ›´æ–°é‚»å±…çš„åº¦æ•°
            for (int l = 0; l < 4; ++l) {
                int nnx = nx + sx[l], nny = ny + sy[l];
                if (nnx < 1 || nnx > n || nny < 1 || nny > m) continue;
                if (color[nnx][nny] == '.') {
                    d[nnx][nny]--;
                    if (d[nnx][nny] == 1) q.push({nnx, nny});
                }
            }
            // æ ‡è®°ç®­å¤´
            switch(k) {
                case 0: ans[i][j] = '^', ans[nx][ny] = 'v'; break;
                case 1: ans[i][j] = 'v', ans[nx][ny] = '^'; break;
                case 2: ans[i][j] = '<', ans[nx][ny] = '>'; break;
                case 3: ans[i][j] = '>', ans[nx][ny] = '<'; break;
            }
            color[i][j] = color[nx][ny] = '*';
            break;
        }
    }
}
```
* **ä»£ç è§£è¯»**ï¼š
  - å–å‡ºé˜Ÿåˆ—ä¸­çš„ç‚¹ï¼ˆ`pt`ï¼‰ï¼Œæ£€æŸ¥æ˜¯å¦å·²å¤„ç†ï¼ˆ`color[i][j] == '*'`ï¼‰æˆ–åº¦æ•°ä¸å†æ˜¯1ï¼ˆ`d[i][j] != 1`ï¼‰ï¼Œå¦‚æœæ˜¯åˆ™è·³è¿‡ï¼›
  - éå†å››ä¸ªæ–¹å‘ï¼Œæ‰¾åˆ°å”¯ä¸€çš„é‚»å±…ï¼ˆ`color[nx][ny] == '.'`ï¼‰ï¼›
  - éå†é‚»å±…çš„å››ä¸ªæ–¹å‘ï¼Œæ›´æ–°é‚»å±…çš„é‚»å±…çš„åº¦æ•°ï¼ˆ`d[nnx][nny]--`ï¼‰ï¼Œå¦‚æœåº¦æ•°å˜æˆ1ï¼ŒåŠ å…¥é˜Ÿåˆ—ï¼›
  - æ ¹æ®æ–¹å‘`k`æ ‡è®°ç®­å¤´ï¼ˆæ¯”å¦‚`k=0`æ˜¯å‘ä¸‹ï¼Œæ‰€ä»¥å½“å‰ç‚¹æ˜¯`^`ï¼Œé‚»å±…æ˜¯`v`ï¼‰ï¼›
  - æ ‡è®°å½“å‰ç‚¹å’Œé‚»å±…ä¸ºå·²å¤„ç†ï¼ˆ`color[i][j] = '*'`ï¼‰ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé˜Ÿåˆ—æ˜¯å¤„ç†ã€ŒåŠ¨æ€ç”Ÿæˆçš„å¾…å¤„ç†ç‚¹ã€çš„æœ‰æ•ˆå·¥å…·ï¼Œèƒ½ä¿è¯æ¯ä¸ªç‚¹åªè¢«å¤„ç†ä¸€æ¬¡ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Œåƒç´ æ¸…æ´å·¥çš„å›ºå®šä»»åŠ¡ã€
æˆ‘ä»¬ç”¨**8ä½åƒç´ é£æ ¼**ï¼ˆç±»ä¼¼ã€Šé©¬é‡Œå¥¥ã€‹çš„ç”»é¢ï¼‰æ¨¡æ‹Ÿç®—æ³•è¿‡ç¨‹ï¼š
- ç½‘æ ¼æ˜¯`16Ã—16`çš„åƒç´ å—ï¼Œæ¯ä¸ªå•å…ƒæ ¼æ˜¯`16Ã—16`åƒç´ ï¼›
- ç©ºå•å…ƒæ ¼ï¼ˆ`.`ï¼‰æ˜¯**ç™½è‰²**ï¼Œéšœç¢ç‰©ï¼ˆ`*`ï¼‰æ˜¯**é»‘è‰²**ï¼›
- åº¦æ•°1çš„ç‚¹**é«˜äº®ä¸ºè“è‰²**ï¼ˆåƒã€Œå¾…å¤„ç†çš„ä»»åŠ¡æ ‡è®°ã€ï¼‰ï¼›
- é…å¯¹æ—¶ï¼Œä¸¤ä¸ªç‚¹ä¼šæ’­æ”¾**ç®­å¤´åŠ¨ç”»**ï¼ˆæ¯”å¦‚`^`ä»Aè·³åˆ°Bï¼Œ`v`ä»Bè·³å›Aï¼‰ï¼Œä¼´éšã€Œå®ã€çš„éŸ³æ•ˆï¼›
- å¤„ç†åçš„ç‚¹å˜æˆ**ç°è‰²**ï¼Œé‚»å±…çš„åº¦æ•°å‡å°‘æ—¶ä¼š**é—ªçƒæµ…è“**ï¼ˆæç¤ºã€Œä»»åŠ¡æ›´æ–°ã€ï¼‰ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’è®¾è®¡
1. **åˆå§‹åŒ–åœºæ™¯**ï¼š
   - å±å¹•æ˜¾ç¤º`nÃ—m`çš„åƒç´ ç½‘æ ¼ï¼ˆæ¯”å¦‚æ ·ä¾‹1çš„3Ã—3ç½‘æ ¼ï¼‰ï¼›
   - æ§åˆ¶é¢æ¿æœ‰ã€Œå¼€å§‹/æš‚åœã€ã€Œå•æ­¥ã€ã€Œé‡ç½®ã€æŒ‰é’®ï¼Œä»¥åŠã€Œé€Ÿåº¦æ»‘å—ã€ï¼ˆ1~5å€é€Ÿï¼‰ï¼›
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«BGMï¼ˆæ¯”å¦‚ã€Šå¦å…‹å¤§æˆ˜ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚

2. **ç®—æ³•å¯åŠ¨**ï¼š
   - åº¦æ•°1çš„ç‚¹**è“è‰²é«˜äº®**ï¼ˆæ¯”å¦‚æ ·ä¾‹1çš„å››ä¸ªè§’è½çš„`.`ï¼‰ï¼›
   - ç‚¹å‡»ã€Œå¼€å§‹ã€ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ’­æ”¾ï¼šç¬¬ä¸€ä¸ªè“è‰²ç‚¹ï¼ˆæ¯”å¦‚(1,1)ï¼‰è¢«é€‰ä¸­ï¼Œå‘¨å›´çš„æ–¹å‘é€ä¸ªé—ªçƒï¼Œæ‰¾åˆ°å”¯ä¸€çš„é‚»å±…ï¼ˆ(1,2)ï¼‰ï¼›
   - ä¸¤ä¸ªç‚¹æ’­æ”¾**ç®­å¤´åŠ¨ç”»**ï¼š(1,1)æ˜¾ç¤º`>`ï¼Œ(1,2)æ˜¾ç¤º`<`ï¼Œä¼´éšã€Œå®ã€çš„éŸ³æ•ˆï¼›
   - ä¸¤ä¸ªç‚¹å˜æˆç°è‰²ï¼Œé‚»å±…ï¼ˆæ¯”å¦‚(1,3)ï¼‰çš„åº¦æ•°ä»2å‡åˆ°1ï¼Œ**é—ªçƒæµ…è“**å¹¶åŠ å…¥é˜Ÿåˆ—ã€‚

3. **å¾ªç¯å¤„ç†**ï¼š
   - ä¸‹ä¸€ä¸ªè“è‰²ç‚¹ï¼ˆæ¯”å¦‚(1,3)ï¼‰è¢«é€‰ä¸­ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰è“è‰²ç‚¹ï¼›
   - å¦‚æœè¿˜æœ‰ç™½è‰²ç‚¹ï¼ˆæœªå¤„ç†çš„`.`ï¼‰ï¼Œå±å¹•ä¸­å¤®æ˜¾ç¤ºã€ŒNot uniqueã€ï¼Œä¼´éšçŸ­ä¿ƒçš„æç¤ºéŸ³æ•ˆï¼›
   - å¦‚æœæ‰€æœ‰ç‚¹éƒ½è¢«å¤„ç†ï¼Œæ’­æ”¾ã€Œèƒœåˆ©éŸ³æ•ˆã€ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ï¼Œç½‘æ ¼æ˜¾ç¤ºæœ€ç»ˆçš„ç®­å¤´ç»“æœã€‚

4. **äº¤äº’è®¾è®¡**ï¼š
   - **å•æ­¥æ¨¡å¼**ï¼šç‚¹å‡»ã€Œå•æ­¥ã€ï¼ŒåŠ¨ç”»æ‰§è¡Œä¸€æ­¥ï¼ˆå¤„ç†ä¸€ä¸ªç‚¹ï¼‰ï¼Œæ–¹ä¾¿ä»”ç»†è§‚å¯Ÿï¼›
   - **é€Ÿåº¦æ»‘å—**ï¼šè°ƒæ•´åŠ¨ç”»æ’­æ”¾é€Ÿåº¦ï¼ˆ1å€é€Ÿé€‚åˆæ–°æ‰‹ï¼Œ5å€é€Ÿé€‚åˆå¤ä¹ ï¼‰ï¼›
   - **é‡ç½®æŒ‰é’®**ï¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°æ’­æ”¾åŠ¨ç”»ã€‚


### è®¾è®¡æ€è·¯
- **åƒç´ é£æ ¼**ï¼šå¤å¤çš„ç”»é¢èƒ½é™ä½å­¦ä¹ å‹åŠ›ï¼Œè®©ç®—æ³•æ›´ã€Œäº²åˆ‡ã€ï¼›
- **éŸ³æ•ˆæç¤º**ï¼šå…³é”®æ“ä½œï¼ˆæ¯”å¦‚é…å¯¹ã€åº¦æ•°æ›´æ–°ï¼‰ç”¨éŸ³æ•ˆå¼ºåŒ–è®°å¿†ï¼›
- **é«˜äº®ä¸åŠ¨ç”»**ï¼šç”¨é¢œè‰²å’ŒåŠ¨ç”»æ˜ç¡®ã€Œå½“å‰åœ¨å¤„ç†ä»€ä¹ˆã€ã€Œç»“æœæ˜¯ä»€ä¹ˆã€ï¼Œé¿å…æŠ½è±¡ç†è§£ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„ã€ŒåŸºäºåº¦æ•°çš„è´ªå¿ƒåŒ¹é…ã€æ€è·¯ï¼Œè¿˜èƒ½è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š
1. **æ£‹ç›˜è¦†ç›–é—®é¢˜**ï¼šç”¨1Ã—2çš„ç“·ç –è¦†ç›–ç¼ºè§’çš„æ£‹ç›˜ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰è§£ï¼›
2. **æ°´ç®¡å·¥é—®é¢˜**ï¼šè¿æ¥æ°´ç®¡çš„ä¸¤ç«¯ï¼Œè¦æ±‚è·¯å¾„å”¯ä¸€ï¼›
3. **æ‹“æ‰‘æ’åºé—®é¢˜**ï¼šå¤„ç†ä¾èµ–å…³ç³»ï¼ˆæ¯”å¦‚è¯¾ç¨‹é€‰ä¿®ï¼‰ï¼Œæ‰¾åˆ°å”¯ä¸€çš„å­¦ä¹ é¡ºåºã€‚


### æ´›è°·ç»ƒä¹ æ¨è
1. **æ´›è°· P1129** - ã€Š[NOIP2008 æé«˜ç»„] é¶å½¢æ•°ç‹¬ã€‹
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè™½ç„¶æ˜¯æ•°ç‹¬é—®é¢˜ï¼Œä½†æ ¸å¿ƒæ˜¯ã€Œå”¯ä¸€è§£çš„åˆ¤æ–­ã€ï¼Œé”»ç‚¼é€»è¾‘ä¸¥è°¨æ€§ã€‚
2. **æ´›è°· P1325** - ã€Š[NOIP2014 æé«˜ç»„] ç«æ˜Ÿäººã€‹
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ¶‰åŠã€Œå”¯ä¸€æ’åˆ—ã€çš„åˆ¤æ–­ï¼Œç±»ä¼¼æœ¬é¢˜çš„ã€Œå”¯ä¸€æ–¹æ¡ˆã€æ€è·¯ã€‚
3. **æ´›è°· P2754** - ã€Š[CTSC1999] å®¶å›­ã€‹
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨å›¾è®ºå»ºæ¨¡ï¼Œç»“åˆè´ªå¿ƒç­–ç•¥ï¼Œé”»ç‚¼ã€Œé—®é¢˜è½¬åŒ–ã€èƒ½åŠ›ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªé¢˜è§£ä½œè€…ï¼‰
- **ZJMZJM**ï¼šã€Œå¤„ç†åº¦æ•°æ›´æ–°æ—¶ï¼Œä¸€å®šè¦éå†é‚»å±…çš„æ‰€æœ‰æ–¹å‘ï¼Œå¦åˆ™ä¼šæ¼æ‰æŸäº›ç‚¹çš„åº¦æ•°å˜åŒ–ã€‚ã€
- **distjr_**ï¼šã€Œè°ƒè¯•æ—¶å¯ä»¥æ‰“å°ä¸­é—´çš„åº¦æ•°çŸ©é˜µï¼Œçœ‹æ¯ä¸ªç‚¹çš„åº¦æ•°æ˜¯å¦æ­£ç¡®ï¼Œè¿™æ ·èƒ½å¿«é€Ÿå®šä½é”™è¯¯ã€‚ã€
- **Error_Eric**ï¼šã€Œè¾“å…¥å¤„ç†æ—¶è¦æ³¨æ„è·³è¿‡æ¢è¡Œç¬¦ï¼Œå¦åˆ™ä¼šè¯»å…¥é”™è¯¯çš„å­—ç¬¦ï¼ˆæ¯”å¦‚`\n`ï¼‰ã€‚ã€

### ç‚¹è¯„
è¿™äº›ç»éªŒéƒ½éå¸¸å®ç”¨ï¼æ¯”å¦‚ï¼š
- åº¦æ•°æ›´æ–°æ—¶çš„ã€Œå…¨æ–¹å‘éå†ã€ï¼Œèƒ½é¿å…é—æ¼ï¼›
- è°ƒè¯•æ—¶æ‰“å°ä¸­é—´çŠ¶æ€ï¼Œæ˜¯ã€Œæ‰¾bugã€çš„æœ‰æ•ˆæ–¹æ³•ï¼›
- è¾“å…¥å¤„ç†çš„ç»†èŠ‚ï¼ˆæ¯”å¦‚è·³è¿‡æ¢è¡Œç¬¦ï¼‰ï¼Œèƒ½é¿å…ã€Œçœ‹ä¼¼æ­£ç¡®ä½†æ— æ³•é€šè¿‡æ ·ä¾‹ã€çš„é—®é¢˜ã€‚


## ç»“è¯­
æœ¬æ¬¡å…³äºã€ŒDrazil and Tilesã€çš„åˆ†æå°±åˆ°è¿™é‡Œã€‚è®°ä½ï¼š**è´ªå¿ƒç­–ç•¥çš„æ ¸å¿ƒæ˜¯æ‰¾åˆ°ã€Œå¿…é¡»ä¼˜å…ˆå¤„ç†çš„ç‚¹ã€**ï¼Œè€Œæœ¬é¢˜çš„ã€Œåº¦æ•°1çš„ç‚¹ã€å°±æ˜¯è¿™æ ·çš„çªç ´å£ã€‚é€šè¿‡åƒç´ åŠ¨ç”»ï¼Œæˆ‘ä»¬èƒ½ç›´è§‚çœ‹åˆ°ç®—æ³•çš„æ¯ä¸€æ­¥ï¼›é€šè¿‡ä¼˜è´¨é¢˜è§£ï¼Œæˆ‘ä»¬èƒ½å­¦ä¹ åˆ°è§„èŒƒçš„ä»£ç å®ç°ã€‚

ç¼–ç¨‹çš„è¿›æ­¥ï¼Œåœ¨äºã€Œå¤šæ€è€ƒã€å¤šå®è·µã€â€”â€”ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œä¸å¦¨è¯•è¯•ä»Šå¤©å­¦çš„ã€Œåº¦æ•°è´ªå¿ƒã€æ€è·¯ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š125.66ç§’
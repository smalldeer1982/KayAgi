# é¢˜ç›®ä¿¡æ¯

# Bracket Sequence

## é¢˜ç›®æè¿°

A bracket sequence is a string, containing only characters "(", ")", "\[" and "\]".

A correct bracket sequence is a bracket sequence that can be transformed into a correct arithmetic expression by inserting characters "1" and "+" between the original characters of the sequence. For example, bracket sequences "()\[\]", "(\[\])" are correct (the resulting expressions are: "(1)+\[1\]", "(\[1+1\]+1)"), and "\](" and "\[" are not. The empty string is a correct bracket sequence by definition.

A substring $ s[l...\ r] $ $ (1<=l<=r<=|s|) $ of string $ s=s_{1}s_{2}...\ s_{|s|} $ (where $ |s| $ is the length of string $ s $ ) is the string $ s_{l}s_{l+1}...\ s_{r} $ . The empty string is a substring of any string by definition.

You are given a bracket sequence, not necessarily correct. Find its substring which is a correct bracket sequence and contains as many opening square brackets Â«\[Â» as possible.

## æ ·ä¾‹ #1

### è¾“å…¥

```
([])
```

### è¾“å‡º

```
1
([])
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
(((
```

### è¾“å‡º

```
0

```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šBracket Sequence æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œBracket Sequenceâ€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ ˆè¾…åŠ©æ‹¬å·åŒ¹é… + åŠ¨æ€è§„åˆ’`ï¼ˆç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®æ˜¯**å…ˆæ‰¾åˆ°æ‰€æœ‰åˆæ³•æ‹¬å·å­ä¸²ï¼Œå†ä»ä¸­é€‰å‡ºåŒ…å«`[`æœ€å¤šçš„é‚£ä¸ª**ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªâ€œå·¥å…·â€å®ç°ï¼š  
- **æ ˆ**ï¼šåƒâ€œå·¦æ‹¬å·æ”¶çº³ç›’â€â€”â€”é‡åˆ°å·¦æ‹¬å·ï¼ˆ`(`æˆ–`[`ï¼‰å°±æ”¾è¿›å»ï¼›é‡åˆ°å³æ‹¬å·æ—¶ï¼Œçœ‹çœ‹æ”¶çº³ç›’æœ€ä¸Šé¢çš„å·¦æ‹¬å·èƒ½ä¸èƒ½é…å¯¹ï¼ˆæ¯”å¦‚`]`è¦æ‰¾`[`ï¼Œ`)`è¦æ‰¾`(`ï¼‰ã€‚å¦‚æœèƒ½ï¼Œå°±è®°å½•è¿™å¯¹æ‹¬å·çš„ä½ç½®ï¼›å¦‚æœä¸èƒ½ï¼ˆæ¯”å¦‚`[)`æˆ–æ ˆç©ºäº†ï¼‰ï¼Œè¯´æ˜ä¹‹å‰çš„å·¦æ‹¬å·éƒ½æ²¡ç”¨äº†ï¼Œç›´æ¥æ¸…ç©ºæ”¶çº³ç›’ã€‚  
- **åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰**ï¼šåƒâ€œè®°å½•æ¯ä¸€æ­¥æ”¶è·çš„å°è´¦æœ¬â€â€”â€”`dp[i]`è¡¨ç¤º**ä»¥ç¬¬iä¸ªå­—ç¬¦ç»“å°¾çš„åˆæ³•å­ä¸²**ä¸­åŒ…å«å¤šå°‘ä¸ª`[`ã€‚è¿™ä¸ªæ•°å€¼=å½“å‰é…å¯¹æ‹¬å·åŒºé—´å†…çš„`[`æ•°é‡ï¼ˆç”¨å‰ç¼€å’Œå¿«é€Ÿè®¡ç®—ï¼‰+ é…å¯¹å·¦æ‹¬å·å·¦è¾¹åˆæ³•å­ä¸²çš„`[`æ•°é‡ï¼ˆ`dp[l[i]-1]`ï¼Œ`l[i]`æ˜¯iå¯¹åº”çš„å·¦æ‹¬å·ä½ç½®ï¼‰ã€‚  

**æ ¸å¿ƒæµç¨‹**ï¼š  
1. ç”¨æ ˆåŒ¹é…æ‹¬å·ï¼Œè®°å½•æ¯ä¸ªå³æ‹¬å·çš„å·¦æ‹¬å·ä½ç½®ï¼›  
2. å‰ç¼€å’Œç»Ÿè®¡æ¯ä¸ªä½ç½®å‰çš„`[`æ€»æ•°ï¼›  
3. DPè®¡ç®—æ¯ä¸ªä½ç½®çš„æœ€å¤§`[`æ•°é‡ï¼›  
4. æ‰¾åˆ°DPæœ€å¤§å€¼å¯¹åº”çš„å­ä¸²åŒºé—´å¹¶è¾“å‡ºã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹â€”â€”å·¦æ‹¬å·æ˜¯è“è‰²åƒç´ å—ï¼Œå³æ‹¬å·æ˜¯çº¢è‰²ï¼ŒåŒ¹é…æˆåŠŸå˜æˆç»¿è‰²ï¼›æ ˆç”¨ç«–åˆ—çš„åƒç´ å—æ˜¾ç¤ºï¼ŒDPå€¼ç”¨æ°´å¹³â€œèƒ½é‡æ¡â€è¡¨ç¤ºé«˜åº¦ï¼Œæœ€å¤§å€¼ç”¨é—ªçƒæ˜Ÿæ˜Ÿæ ‡è®°ã€‚å…³é”®æ­¥éª¤ï¼ˆå¦‚åŒ¹é…ã€DPæ›´æ–°ï¼‰ä¼šä¼´éšâ€œå®â€â€œå—¡â€çš„åƒç´ éŸ³æ•ˆï¼Œè®©ä½ ç›´è§‚â€œçœ‹â€åˆ°ç®—æ³•è¿è¡Œï¼


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†æ›´å¥½åœ°ç†è§£è§£é¢˜è¿‡ç¨‹ï¼Œæˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰æ–¹é¢ï¼Œç­›é€‰äº†ä»¥ä¸‹è¯„åˆ†è¾ƒé«˜çš„é¢˜è§£ï¼š


### **é¢˜è§£ä¸€ï¼šå·ç‹ï¼ˆèµï¼š8ï¼‰**  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ˜¯æœ€ç»å…¸çš„â€œæ ˆ+DPâ€å®ç°ï¼Œæ€è·¯åƒâ€œè¯´æ˜ä¹¦â€ä¸€æ ·æ¸…æ™°ï¼  
  - **æ€è·¯**ï¼šå…ˆç”¨æ ˆè®°å½•å·¦æ‹¬å·ä½ç½®ï¼Œ`l[i]`å­˜å³æ‹¬å·iå¯¹åº”çš„å·¦æ‹¬å·ï¼›å†ç”¨å‰ç¼€å’Œ`sum[i]`ç»Ÿè®¡å‰iä¸ªå­—ç¬¦çš„`[`æ•°é‡ï¼›æœ€åç”¨`dp[i]`è®¡ç®—ä»¥iç»“å°¾çš„æœ€å¤§`[`æ•°ï¼Œåæ¨æœ€ä¼˜å­ä¸²åŒºé—´ã€‚  
  - **ä»£ç **ï¼šå˜é‡åï¼ˆå¦‚`l`ã€`dp`ã€`sum`ï¼‰å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ï¼ˆå¦‚æ¸…ç©ºæ ˆã€åæ¨åŒºé—´ï¼‰éå¸¸ä¸¥è°¨ï¼Œç”šè‡³è€ƒè™‘äº†â€œè¿ç»­åˆæ³•å­ä¸²åˆå¹¶â€çš„æƒ…å†µï¼ˆæ¯”å¦‚`([[]])`ä¼šåˆå¹¶æˆä¸€ä¸ªå¤§åŒºé—´ï¼‰ã€‚  
  - **äº®ç‚¹**ï¼šç”¨å‰ç¼€å’Œä¼˜åŒ–`[`æ•°é‡ç»Ÿè®¡ï¼Œé¿å…äº†é‡å¤è®¡ç®—ï¼›åæ¨åŒºé—´çš„é€»è¾‘ï¼ˆä»æœ€å¤§å€¼ä½ç½®è·³è½¬åˆ°å·¦æ‹¬å·å‰ï¼‰éå¸¸å·§å¦™ï¼Œç›´æ¥å®šä½æœ€ä¼˜å­ä¸²çš„èµ·ç‚¹ã€‚  


### **é¢˜è§£äºŒï¼š_outcast_ï¼ˆèµï¼š5ï¼‰**  
* **ç‚¹è¯„**ï¼šè¿™æ˜¯ä¸€ä»½â€œåˆ›æ–°æ€è·¯â€çš„é¢˜è§£ï¼Œç”¨BFSæŠŠåˆæ³•å­ä¸²çš„æ‰©å±•å˜æˆâ€œé—¯å…³æ¸¸æˆâ€ï¼  
  - **æ€è·¯**ï¼šå…ˆæ‰¾ç›¸é‚»çš„åˆæ³•æ‹¬å·å¯¹ï¼ˆå¦‚`()`æˆ–`[]`ï¼‰ä½œä¸ºâ€œåˆå§‹å…³å¡â€ï¼›ç„¶åé€šè¿‡BFSæ‰©å±•ä¸¤ç§æƒ…å†µï¼šâ‘  åŒ…å«å‹ï¼ˆæ¯”å¦‚`[åˆæ³•å­ä¸²]`ï¼‰ï¼›â‘¡ è¿æ¥å‹ï¼ˆæ¯”å¦‚`åˆæ³•å­ä¸²1åˆæ³•å­ä¸²2`ï¼‰ã€‚æ¯æ‰©å±•ä¸€æ¬¡å°±è®°å½•å½“å‰å­ä¸²çš„`[`æ•°é‡ï¼Œæœ€åå–æœ€å¤§å€¼ã€‚  
  - **ä»£ç **ï¼šç”¨`v[]`è®°å½•å­ä¸²çš„è¾¹ç•Œï¼Œ`val[]`è®°å½•`[`æ•°é‡ï¼Œ`push`å‡½æ•°å°è£…äº†å…¥é˜Ÿé€»è¾‘ï¼Œå¯è¯»æ€§å¼ºã€‚  
  - **äº®ç‚¹**ï¼šæŠŠâ€œæ‰¾åˆæ³•å­ä¸²â€è½¬åŒ–ä¸ºâ€œå›¾çš„éå†â€ï¼Œé€‚åˆç†è§£å­ä¸²çš„â€œç”Ÿé•¿â€è¿‡ç¨‹â€”â€”å°±åƒæ­ç§¯æœ¨ï¼Œä»æœ€å°çš„åˆæ³•å—å¼€å§‹ï¼Œæ…¢æ…¢æ‹¼æˆå¤§çš„åˆæ³•å—ã€‚  


### **é¢˜è§£ä¸‰ï¼šMelo_DDDï¼ˆèµï¼š1ï¼‰**  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„ä»£ç â€œçŸ­å°ç²¾æ‚â€ï¼Œè¿˜åˆ†äº«äº†è¸©å‘ç»éªŒï¼Œéå¸¸æ¥åœ°æ°”ï¼  
  - **æ€è·¯**ï¼šå’Œå·ç‹ä¸€è„‰ç›¸æ‰¿ï¼Œä½†ä»£ç æ›´ç®€æ´â€”â€”ç”¨`inf[i]`è®°å½•å³æ‹¬å·içš„å·¦æ‹¬å·ä½ç½®ï¼Œ`dp[i]`è½¬ç§»æ—¶ç›´æ¥ç´¯åŠ å‰ç¼€å’Œã€‚  
  - **ä»£ç **ï¼šå»æ‰äº†å†—ä½™çš„å˜é‡ï¼ˆæ¯”å¦‚æ²¡ç”¨`long long`ï¼‰ï¼Œåæ¨åŒºé—´çš„é€»è¾‘æ›´ç®€æ´ï¼ˆ`for (loc = maxx; inf[loc]; loc = inf[loc]-1)`ï¼‰ã€‚  
  - **äº®ç‚¹**ï¼šä½œè€…åˆ†äº«äº†â€œæ ˆç±»å‹è®¾é”™å¯¼è‡´REâ€çš„æ•™è®­â€”â€”æé†’æˆ‘ä»¬ï¼šæ ˆå­˜çš„æ˜¯**å·¦æ‹¬å·çš„ä¸‹æ ‡**ï¼ˆintç±»å‹ï¼‰ï¼Œä¸æ˜¯å­—ç¬¦ï¼è¿™ä¸ªè¸©å‘ç»éªŒèƒ½å¸®ä½ é¿å…ç±»ä¼¼é”™è¯¯ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œå¤§å®¶å¸¸é‡åˆ°ä»¥ä¸‹3ä¸ªå…³é”®ç‚¹ï¼š


### 1. **å¦‚ä½•æ­£ç¡®åŒ¹é…æ‹¬å·å¹¶è®°å½•ä½ç½®ï¼Ÿ**  
- **éš¾ç‚¹**ï¼šé‡åˆ°ä¸åŒ¹é…çš„æƒ…å†µï¼ˆæ¯”å¦‚`[)`æˆ–æ ˆç©ºæ—¶çš„å³æ‹¬å·ï¼‰ï¼Œå®¹æ˜“æ¼æ¸…ç©ºæ ˆï¼Œå¯¼è‡´åç»­é”™è¯¯åŒ¹é…ã€‚  
- **ç­–ç•¥**ï¼šç”¨æ ˆå­˜å·¦æ‹¬å·çš„**ä¸‹æ ‡**ï¼ˆä¸æ˜¯å­—ç¬¦ï¼‰ï¼é‡åˆ°å³æ‹¬å·æ—¶ï¼š  
  - å¦‚æœæ ˆéç©ºä¸”æ ˆé¡¶å·¦æ‹¬å·èƒ½é…å¯¹ï¼Œè®°å½•`l[i] = æ ˆé¡¶`ï¼Œå¹¶å¼¹å‡ºæ ˆé¡¶ï¼›  
  - å¦åˆ™ï¼Œ**æ¸…ç©ºæ•´ä¸ªæ ˆ**ï¼ˆä¹‹å‰çš„å·¦æ‹¬å·éƒ½æ— æ³•å†åŒ¹é…äº†ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ˆçš„æ ¸å¿ƒæ˜¯â€œåè¿›å…ˆå‡ºâ€ï¼Œå­˜ä¸‹æ ‡æ‰èƒ½å‡†ç¡®è®°å½•é…å¯¹ä½ç½®ï¼  


### 2. **å¦‚ä½•ç»Ÿè®¡åˆæ³•å­ä¸²çš„æœ€å¤§`[`æ•°é‡ï¼Ÿ**  
- **éš¾ç‚¹**ï¼šç›´æ¥éå†æ¯ä¸ªåˆæ³•å­ä¸²ç»Ÿè®¡`[`ä¼šè¶…æ—¶ï¼ˆæ¯”å¦‚é•¿åº¦1e6çš„å­—ç¬¦ä¸²ï¼‰ã€‚  
- **ç­–ç•¥**ï¼šç”¨**å‰ç¼€å’Œæ•°ç»„**`sum`ï¼`sum[i]`è¡¨ç¤ºå‰iä¸ªå­—ç¬¦çš„`[`æ€»æ•°ï¼Œé‚£ä¹ˆåŒºé—´`[a,b]`çš„`[`æ•°é‡= `sum[b] - sum[a-1]`ï¼ŒO(1)å°±èƒ½ç®—å‡ºã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œæ˜¯â€œå¿«é€Ÿç®—åŒºé—´å’Œâ€çš„ç¥å™¨ï¼Œé€‚åˆéœ€è¦å¤šæ¬¡ç»Ÿè®¡åŒºé—´çš„é—®é¢˜ï¼  


### 3. **å¦‚ä½•æ‰¾åˆ°æœ€ä¼˜å­ä¸²çš„åŒºé—´ï¼Ÿ**  
- **éš¾ç‚¹**ï¼šæ‰¾åˆ°`dp`æœ€å¤§å€¼åï¼Œä¸çŸ¥é“å¯¹åº”çš„å­ä¸²ä»å“ªå¼€å§‹ã€‚  
- **ç­–ç•¥**ï¼šä»æœ€å¤§å€¼çš„ä½ç½®`pos`ï¼ˆå³æ‹¬å·ï¼‰å¼€å§‹ï¼Œä¸æ–­è·³è½¬åˆ°`l[pos]`ï¼ˆå¯¹åº”çš„å·¦æ‹¬å·ï¼‰çš„å‰ä¸€ä¸ªä½ç½®ï¼Œç›´åˆ°æ— æ³•è·³è½¬ï¼ˆ`l[L-1] == -1`ï¼‰ã€‚æ­¤æ—¶èµ·ç‚¹æ˜¯`L`ï¼Œç»ˆç‚¹æ˜¯`pos`ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåæ¨åŒºé—´çš„å…³é”®æ˜¯â€œè·Ÿç€åŒ¹é…å…³ç³»èµ°â€â€”â€”åˆæ³•å­ä¸²çš„è¾¹ç•Œä¸€å®šæ˜¯é…å¯¹çš„æ‹¬å·ï¼  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
1. **å·¥å…·ç»„åˆ**ï¼šæ ˆå¤„ç†æ‹¬å·åŒ¹é…ï¼Œå‰ç¼€å’Œä¼˜åŒ–ç»Ÿè®¡ï¼ŒDPåˆå¹¶ç»“æœâ€”â€”ä¸‰è€…ç»“åˆèƒ½è§£å†³å¤§éƒ¨åˆ†â€œæœ€ä¼˜åˆæ³•å­ä¸²â€é—®é¢˜ã€‚  
2. **è¾¹ç•Œå¤„ç†**ï¼šé‡åˆ°ä¸åŒ¹é…çš„æ‹¬å·ä¸€å®šè¦æ¸…ç©ºæ ˆï¼Œå¦åˆ™ä¼šâ€œå¸¦åâ€åé¢çš„åŒ¹é…ã€‚  
3. **é”™è¯¯æ’æŸ¥**ï¼šå¦‚æœä»£ç REï¼ˆè¿è¡Œé”™è¯¯ï¼‰ï¼Œå…ˆæ£€æŸ¥æ ˆçš„ç±»å‹ï¼ˆæ˜¯ä¸æ˜¯å­˜äº†å­—ç¬¦è€Œä¸æ˜¯ä¸‹æ ‡ï¼‰ï¼  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

åœ¨æ·±å…¥åˆ†æå…·ä½“é¢˜è§£å‰ï¼Œå…ˆçœ‹ä¸€ä¸ª**ç»¼åˆç‰ˆæ ¸å¿ƒä»£ç **â€”â€”å®ƒæ•´åˆäº†å·ç‹å’ŒMelo_DDDçš„æ€è·¯ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé€‚åˆåˆå­¦è€…å‚è€ƒï¼š


### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ä¼˜è´¨é¢˜è§£çš„æ ¸å¿ƒé€»è¾‘ï¼Œç”¨æ ˆåŒ¹é…æ‹¬å·ï¼Œå‰ç¼€å’Œç»Ÿè®¡`[`ï¼ŒDPè®¡ç®—æœ€å¤§å€¼ï¼Œæœ€ååæ¨åŒºé—´ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <stack>
#include <cstring>
using namespace std;

const int MAXN = 1e6 + 7; // é¢˜ç›®æ•°æ®èŒƒå›´ï¼ˆæ ¹æ®é¢˜ç›®è°ƒæ•´ï¼‰
char s[MAXN];             // å­˜å‚¨è¾“å…¥çš„æ‹¬å·åºåˆ—
int l[MAXN];              // l[i]ï¼šå³æ‹¬å·iå¯¹åº”çš„å·¦æ‹¬å·ä½ç½®ï¼ˆ-1è¡¨ç¤ºä¸åŒ¹é…ï¼‰
int dp[MAXN];             // dp[i]ï¼šä»¥iç»“å°¾çš„åˆæ³•å­ä¸²çš„æœ€å¤§[æ•°é‡
int sum[MAXN];            // sum[i]ï¼šå‰iä¸ªå­—ç¬¦çš„[æ€»æ•°
stack<int> st;            // å­˜å‚¨å·¦æ‹¬å·çš„ä¸‹æ ‡

int main() {
    cin >> (s + 1); // ä»ä¸‹æ ‡1å¼€å§‹å­˜å‚¨ï¼Œæ–¹ä¾¿è®¡ç®—
    int n = strlen(s + 1);

    // Step 1: ç”¨æ ˆåŒ¹é…æ‹¬å·ï¼Œè®°å½•læ•°ç»„
    for (int i = 1; i <= n; ++i) {
        if (s[i] == '(' || s[i] == '[') {
            st.push(i); // å·¦æ‹¬å·å…¥æ ˆï¼ˆå­˜ä¸‹æ ‡ï¼‰
            l[i] = -1;  // å·¦æ‹¬å·æ²¡æœ‰å¯¹åº”çš„å³æ‹¬å·ï¼Œæ ‡è®°-1
        } else if (s[i] == ')') {
            if (!st.empty() && s[st.top()] == '(') {
                l[i] = st.top(); // åŒ¹é…æˆåŠŸï¼Œè®°å½•å·¦æ‹¬å·ä½ç½®
                st.pop();        // å¼¹å‡ºå·²åŒ¹é…çš„å·¦æ‹¬å·
            } else {
                l[i] = -1;       // ä¸åŒ¹é…ï¼Œæ ‡è®°-1
                while (!st.empty()) st.pop(); // æ¸…ç©ºæ ˆï¼Œåç»­æ— æ³•å†åŒ¹é…
            }
        } else if (s[i] == ']') {
            if (!st.empty() && s[st.top()] == '[') {
                l[i] = st.top(); // åŒ¹é…æˆåŠŸï¼Œè®°å½•å·¦æ‹¬å·ä½ç½®
                st.pop();        // å¼¹å‡ºå·²åŒ¹é…çš„å·¦æ‹¬å·
            } else {
                l[i] = -1;       // ä¸åŒ¹é…ï¼Œæ ‡è®°-1
                while (!st.empty()) st.pop(); // æ¸…ç©ºæ ˆ
            }
        }
    }

    // Step 2: è®¡ç®—å‰ç¼€å’Œsumæ•°ç»„
    for (int i = 1; i <= n; ++i) {
        sum[i] = sum[i - 1] + (s[i] == '['); // å½“å‰å­—ç¬¦æ˜¯[ï¼ŒsumåŠ 1
    }

    // Step 3: è®¡ç®—dpæ•°ç»„ï¼Œæ‰¾åˆ°æœ€å¤§å€¼å’Œä½ç½®
    int max_val = 0, pos = -1;
    for (int i = 1; i <= n; ++i) {
        if (l[i] == -1 || (s[i] == '(' || s[i] == '[')) {
            dp[i] = 0; // ä¸æ˜¯å³æ‹¬å·æˆ–ä¸åŒ¹é…ï¼Œdpå€¼ä¸º0
        } else {
            // å½“å‰åŒºé—´[l[i], i]çš„[æ•°é‡ + å‰é¢åˆæ³•å­ä¸²çš„dpå€¼
            dp[i] = dp[l[i] - 1] + sum[i] - sum[l[i] - 1];
        }
        if (dp[i] > max_val) {
            max_val = dp[i]; // æ›´æ–°æœ€å¤§å€¼
            pos = i;         // è®°å½•æœ€å¤§å€¼çš„ä½ç½®ï¼ˆå³æ‹¬å·ï¼‰
        }
    }

    // Step 4: è¾“å‡ºç»“æœ
    cout << max_val << endl;
    if (max_val == 0) return 0; // æ²¡æœ‰åˆæ³•å­ä¸²ï¼Œç›´æ¥è¿”å›

    // åæ¨æœ€ä¼˜å­ä¸²çš„èµ·ç‚¹L
    int L = l[pos];
    while (L > 1 && l[L - 1] != -1) {
        L = l[L - 1]; // åˆå¹¶å‰é¢çš„åˆæ³•å­ä¸²ï¼ˆæ¯”å¦‚([[]])â†’Lä»3è·³åˆ°1ï¼‰
    }

    // è¾“å‡ºæœ€ä¼˜å­ä¸²
    for (int i = L; i <= pos; ++i) {
        cout << s[i];
    }
    cout << endl;

    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **æ ˆåŒ¹é…**ï¼šå¤„ç†æ¯ä¸ªå­—ç¬¦ï¼Œè®°å½•å³æ‹¬å·çš„å·¦æ‹¬å·ä½ç½®ï¼›  
  2. **å‰ç¼€å’Œ**ï¼šå¿«é€Ÿè®¡ç®—ä»»æ„åŒºé—´çš„`[`æ•°é‡ï¼›  
  3. **DPè®¡ç®—**ï¼šç´¯åŠ å½“å‰åŒºé—´å’Œå‰é¢çš„ç»“æœï¼Œæ‰¾åˆ°æœ€å¤§å€¼ï¼›  
  4. **åæ¨åŒºé—´**ï¼šä»æœ€å¤§å€¼ä½ç½®å‘å·¦è·³è½¬ï¼Œå®šä½å­ä¸²èµ·ç‚¹ã€‚  


### é¢˜è§£ä¸€ï¼ˆå·ç‹ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šå‰ç¼€å’Œä¸DPçš„ç»“åˆï¼Œé«˜æ•ˆç»Ÿè®¡`[`æ•°é‡ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// å‰ç¼€å’Œè®¡ç®—
for(int i=1;i<=n;i++) sum[i]=sum[i-1]+(s[i]=='[');
// DPè®¡ç®—
for(int i=1;i<=n;i++){
    if(s[i]=='('||s[i]=='['||l[i]==-1) dp[i]=0;
    else dp[i]=dp[l[i]-1]+sum[i]-sum[l[i]-1];
    if(dp[i]>maxx){ maxx=dp[i]; x=i; }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `sum[i] = sum[i-1] + (s[i]=='[')`ï¼šæ¯ä¸€æ­¥éƒ½ç´¯åŠ å½“å‰å­—ç¬¦æ˜¯å¦æ˜¯`[`ï¼Œè¿™æ ·`sum[b]-sum[a-1]`å°±æ˜¯åŒºé—´`[a,b]`çš„`[`æ•°é‡ã€‚  
  - `dp[i] = dp[l[i]-1] + sum[i]-sum[l[i]-1]`ï¼š`dp[l[i]-1]`æ˜¯å‰é¢åˆæ³•å­ä¸²çš„`[`æ•°é‡ï¼Œ`sum[i]-sum[l[i]-1]`æ˜¯å½“å‰é…å¯¹åŒºé—´çš„`[`æ•°é‡ï¼ŒåŠ èµ·æ¥å°±æ˜¯ä»¥iç»“å°¾çš„æœ€å¤§`[`æ•°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDPçš„æ ¸å¿ƒæ˜¯â€œçŠ¶æ€è½¬ç§»â€â€”â€”ç”¨ä¹‹å‰çš„ç»“æœè®¡ç®—å½“å‰ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼  


### é¢˜è§£äºŒï¼ˆ_outcast_ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šBFSæ‰©å±•åˆæ³•å­ä¸²ï¼ŒæŠŠé—®é¢˜å˜æˆâ€œæ­ç§¯æœ¨â€ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
void push(int l,int r,int c){// å…¥é˜Ÿæ“ä½œï¼Œè®°å½•å­ä¸²è¾¹ç•Œå’Œ[æ•°é‡
    v[l]=r; v[r]=l;
    val[l]=val[r]=c;
    q.push(l); q.push(r);
}
// BFSæ‰©å±•
if(l>0&&r<n-1){// åŒ…å«å‹ï¼š[åˆæ³•å­ä¸²] æˆ– (åˆæ³•å­ä¸²)
    if(s[l-1]=='('&&s[r+1]==')'){
        v[l]=v[r]=-1; push(l-1,r+1,val[l]);
    }else if(s[l-1]=='['&&s[r+1]==']'){
        v[l]=v[r]=-1; push(l-1,r+1,val[l]+1); // [çš„æ•°é‡+1
    }
}
if(l>0&&v[l-1]!=-1){// è¿æ¥å‹ï¼šåˆæ³•å­ä¸²1+åˆæ³•å­ä¸²2
    push(v[l-1],r,val[l-1]+val[l]); v[l]=v[l-1]=-1;
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `push`å‡½æ•°ï¼šæŠŠåˆæ³•å­ä¸²çš„å·¦å³è¾¹ç•Œ`l`ã€`r`å’Œ`[`æ•°é‡`c`å­˜å…¥é˜Ÿåˆ—ï¼Œæ–¹ä¾¿åç»­æ‰©å±•ã€‚  
  - **åŒ…å«å‹**ï¼šå¦‚æœå­ä¸²å¤–é¢æœ‰ä¸€å¯¹åŒ¹é…çš„æ‹¬å·ï¼ˆæ¯”å¦‚`[`+å­ä¸²+`]`ï¼‰ï¼Œå°±æŠŠæ–°å­ä¸²ï¼ˆ`l-1`åˆ°`r+1`ï¼‰å…¥é˜Ÿï¼Œ`[`æ•°é‡åŠ 1ï¼ˆå› ä¸ºæ–°å¢äº†ä¸€ä¸ª`[`ï¼‰ã€‚  
  - **è¿æ¥å‹**ï¼šå¦‚æœå­ä¸²å·¦è¾¹æœ‰å¦ä¸€ä¸ªåˆæ³•å­ä¸²ï¼ˆ`v[l-1]!=-1`ï¼‰ï¼Œå°±æŠŠä¸¤ä¸ªå­ä¸²åˆå¹¶æˆä¸€ä¸ªæ–°å­ä¸²ï¼ˆ`v[l-1]`åˆ°`r`ï¼‰ï¼Œ`[`æ•°é‡æ˜¯ä¸¤è€…ä¹‹å’Œã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šBFSé€‚åˆâ€œä»å±€éƒ¨åˆ°æ•´ä½“â€çš„æ‰©å±•é—®é¢˜ï¼Œæ¯”å¦‚åˆå¹¶åˆæ³•å­ä¸²ï¼  


### é¢˜è§£ä¸‰ï¼ˆMelo_DDDï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šä»£ç ç®€æ´ï¼Œåæ¨åŒºé—´çš„é€»è¾‘å·§å¦™ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// åæ¨åŒºé—´
int loc; 
for (loc = maxx ; inf[loc] ; loc = inf[loc] - 1) ;
for (int i = loc + 1 ; i <= maxx ; i++) 
    cout << ch[i];
```
* **ä»£ç è§£è¯»**ï¼š  
  - `for (loc = maxx ; inf[loc] ; loc = inf[loc]-1)`ï¼šä»æœ€å¤§å€¼ä½ç½®`maxx`ï¼ˆå³æ‹¬å·ï¼‰å¼€å§‹ï¼Œä¸æ–­è·³è½¬åˆ°`inf[loc]-1`ï¼ˆå·¦æ‹¬å·çš„å‰ä¸€ä¸ªä½ç½®ï¼‰ï¼Œç›´åˆ°`inf[loc]`ä¸º0ï¼ˆæ²¡æœ‰åŒ¹é…çš„å·¦æ‹¬å·ï¼‰ã€‚æ­¤æ—¶`loc+1`å°±æ˜¯å­ä¸²çš„èµ·ç‚¹ã€‚  
  - æ¯”å¦‚ï¼Œå­ä¸²æ˜¯`([[]])`ï¼Œ`maxx`æ˜¯6ï¼ˆ`]`çš„ä½ç½®ï¼‰ï¼Œ`inf[6]=1`ï¼ˆ`(`çš„ä½ç½®ï¼‰ï¼Œ`inf[0]`ä¸å­˜åœ¨ï¼Œæ‰€ä»¥`loc=0`ï¼Œèµ·ç‚¹æ˜¯`0+1=1`ï¼Œç»ˆç‚¹æ˜¯6ï¼Œæ­£å¥½æ˜¯æ•´ä¸ªå­ä¸²ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåæ¨åŒºé—´çš„å…³é”®æ˜¯â€œè·Ÿç€åŒ¹é…å…³ç³»èµ°â€ï¼Œä¸ç”¨éå†æ‰€æœ‰å¯èƒ½ï¼  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

ä¸ºäº†è®©ä½ æ›´ç›´è§‚ç†è§£â€œæ ˆ+DPâ€çš„è¿‡ç¨‹ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ª**8ä½åƒç´ é£æ ¼çš„åŠ¨ç”»**â€”â€”ã€Šåƒç´ æ‹¬å·æ¢é™©é˜Ÿã€‹ï¼Œç»“åˆå¤å¤æ¸¸æˆå…ƒç´ ï¼Œè®©ç®—æ³•â€œåŠ¨â€èµ·æ¥ï¼


### åŠ¨ç”»è®¾è®¡æ¦‚è§ˆ  
* **ä¸»é¢˜**ï¼šåƒç´ å°äººâ€œæ‹¬å·æ¢é™©å®¶â€åœ¨æ‹¬å·åºåˆ—ä¸­å¯»æ‰¾â€œæœ€ç»¿ï¼ˆåˆæ³•ï¼‰ã€æœ€äº®ï¼ˆ[æœ€å¤šï¼‰â€çš„å­ä¸²ã€‚  
* **é£æ ¼**ï¼šFCçº¢ç™½æœºé£æ ¼ï¼Œç”¨8è‰²è°ƒè‰²æ¿ï¼ˆè“ã€çº¢ã€ç»¿ã€é»„ã€ç™½ã€é»‘ï¼‰ï¼Œå­—ç¬¦æ˜¯16x16åƒç´ å—ã€‚  
* **åœºæ™¯å¸ƒå±€**ï¼š  
  - å·¦ä¾§ï¼šæ‹¬å·åºåˆ—çš„åƒç´ å—ï¼ˆè“è‰²=å·¦æ‹¬å·ï¼Œçº¢è‰²=å³æ‹¬å·ï¼Œç»¿è‰²=åŒ¹é…æˆåŠŸï¼Œé»„è‰²=æœ€ä¼˜å­ä¸²ï¼‰ï¼›  
  - å³ä¾§ï¼šæ ˆçš„æ˜¾ç¤ºåŒºï¼ˆç«–åˆ—è“è‰²åƒç´ å—ï¼Œä»£è¡¨æœªåŒ¹é…çš„å·¦æ‹¬å·ï¼‰ï¼›  
  - åº•éƒ¨ï¼šDPèƒ½é‡æ¡ï¼ˆæ°´å¹³ç»¿è‰²æ¡ï¼Œé«˜åº¦=dp[i]ï¼Œæœ€å¤§å€¼é—ªçƒæ˜Ÿæ˜Ÿï¼‰ï¼›  
  - å³ä¸‹è§’ï¼šæ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®ã€é€Ÿåº¦æ»‘å—ï¼‰ã€‚  


### åŠ¨ç”»å…³é”®æ­¥éª¤æ¼”ç¤º  
1. **åˆå§‹åŒ–**ï¼š  
   - æ‹¬å·åºåˆ—ä»å·¦åˆ°å³æ’åˆ—ï¼Œæ ˆåŒºä¸ºç©ºï¼ŒDPèƒ½é‡æ¡ä¸º0ï¼Œæ§åˆ¶é¢æ¿æ˜¾ç¤ºâ€œå¼€å§‹â€æŒ‰é’®ã€‚  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ï¼‰ã€‚  

2. **æ ˆåŒ¹é…è¿‡ç¨‹**ï¼š  
   - é‡åˆ°å·¦æ‹¬å·ï¼ˆ`(`æˆ–`[`ï¼‰ï¼šæ ˆåŒºæ·»åŠ ä¸€ä¸ªè“è‰²åƒç´ å—ï¼Œæ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆã€‚  
   - é‡åˆ°å³æ‹¬å·ï¼ˆ`]`ï¼‰ï¼šæ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯`[`ï¼ˆè“è‰²å—ï¼‰â€”â€”  
     - æ˜¯ï¼šæ ˆé¡¶è“è‰²å—å˜æˆç»¿è‰²ï¼Œå³æ‹¬å·çº¢è‰²å—å˜æˆç»¿è‰²ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›  
     - å¦ï¼šæ ˆåŒºæ‰€æœ‰è“è‰²å—æ¶ˆå¤±ï¼Œæ’­æ”¾â€œå—¡â€çš„é”™è¯¯éŸ³æ•ˆã€‚  

3. **DPè®¡ç®—è¿‡ç¨‹**ï¼š  
   - æ¯å¤„ç†ä¸€ä¸ªå³æ‹¬å·ï¼ŒDPèƒ½é‡æ¡çš„é«˜åº¦æ ¹æ®`dp[i]`å˜åŒ–ï¼ˆæ¯”å¦‚`dp[i]=3`ï¼Œèƒ½é‡æ¡å°±å 3æ ¼ï¼‰ã€‚  
   - å¦‚æœ`dp[i]`æ˜¯å½“å‰æœ€å¤§å€¼ï¼Œèƒ½é‡æ¡æœ«ç«¯é—ªçƒé»„è‰²æ˜Ÿæ˜Ÿï¼Œæ’­æ”¾â€œå‡çº§â€éŸ³æ•ˆã€‚  

4. **åæ¨åŒºé—´è¿‡ç¨‹**ï¼š  
   - æ‰¾åˆ°æœ€å¤§å€¼ä½ç½®åï¼Œä»è¯¥ä½ç½®å‘å·¦è·³è½¬ï¼Œè·¯å¾„ä¸Šçš„æ‹¬å·å—å˜æˆé»„è‰²ï¼ˆé«˜äº®ï¼‰ï¼Œæ’­æ”¾â€œå¯»æ‰¾è·¯å¾„â€éŸ³æ•ˆã€‚  
   - æœ€ç»ˆï¼Œæœ€ä¼˜å­ä¸²çš„æ‰€æœ‰æ‹¬å·å—å˜æˆé»„è‰²ï¼Œé—ªçƒ3æ¬¡ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„è¿‡å…³éŸ³ä¹ï¼‰ã€‚  


### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œç®—æ³•æ‰§è¡Œä¸€æ­¥ï¼ˆå¤„ç†ä¸€ä¸ªå­—ç¬¦ï¼‰ï¼Œæ–¹ä¾¿ä½ ä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šæ‹–åŠ¨é€Ÿåº¦æ»‘å—ï¼ˆ1x~5xï¼‰ï¼Œç®—æ³•è‡ªåŠ¨æ‰§è¡Œï¼Œé€‚åˆå¿«é€Ÿçœ‹æ•´ä½“æµç¨‹ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°æ¼”ç¤ºã€‚  


### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ  
- **åƒç´ é£æ ¼**ï¼šå¤å¤æ¸¸æˆçš„æ„Ÿè§‰èƒ½é™ä½å­¦ä¹ å‹åŠ›ï¼Œè®©ä½ æ›´æ„¿æ„ä¸»åŠ¨æ¢ç´¢ã€‚  
- **éŸ³æ•ˆæç¤º**ï¼šä¸åŒæ“ä½œå¯¹åº”ä¸åŒéŸ³æ•ˆï¼Œèƒ½å¼ºåŒ–ä½ çš„è®°å¿†ï¼ˆæ¯”å¦‚â€œå®â€=åŒ¹é…æˆåŠŸï¼Œâ€œå—¡â€=é”™è¯¯ï¼‰ã€‚  
- **é«˜äº®ä¸é—ªçƒ**ï¼šç”¨é¢œè‰²å’ŒåŠ¨ç”»çªå‡ºå…³é”®å…ƒç´ ï¼ˆæ¯”å¦‚åŒ¹é…çš„æ‹¬å·ã€æœ€å¤§å€¼ï¼‰ï¼Œè®©ä½ ä¸€çœ¼çœ‹æ¸…ç®—æ³•çš„â€œç„¦ç‚¹â€ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

æŒæ¡äº†æœ¬é¢˜çš„â€œæ ˆ+DPâ€æ€è·¯åï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹ç±»ä¼¼é—®é¢˜ï¼Œå·©å›ºæŠ€å·§ï¼š


### é€šç”¨æ€è·¯è¿ç§»  
- **åœºæ™¯1**ï¼šæ‰¾æœ€é•¿åˆæ³•æ‹¬å·å­ä¸²ï¼ˆæ¯”å¦‚LeetCode 32é¢˜ï¼‰â€”â€”æŠŠç»Ÿè®¡`[`æ•°é‡æ”¹æˆç»Ÿè®¡é•¿åº¦å³å¯ã€‚  
- **åœºæ™¯2**ï¼šæ‰¾åŒ…å«æœ€å¤š`()`çš„åˆæ³•å­ä¸²â€”â€”æŠŠå‰ç¼€å’Œçš„`[`æ”¹æˆ`()`å³å¯ã€‚  
- **åœºæ™¯3**ï¼šæ‹¬å·åŒ¹é…è®¡æ•°ï¼ˆæ¯”å¦‚æ´›è°·P2624ï¼‰â€”â€”ç”¨DPç»Ÿè®¡åˆæ³•å­ä¸²çš„æ•°é‡ï¼Œè€Œä¸æ˜¯æœ€å¤§å€¼ã€‚  


### æ´›è°·ç»ƒä¹ æ¨è  
1. **æ´›è°· P1739** - è¡¨è¾¾å¼æ‹¬å·åŒ¹é…  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŸºç¡€æ‹¬å·åŒ¹é…é¢˜ï¼Œç”¨æ ˆåˆ¤æ–­æ‹¬å·æ˜¯å¦åˆæ³•ï¼Œå¸®ä½ å·©å›ºæ ˆçš„åŸºæœ¬ç”¨æ³•ã€‚  
2. **æ´›è°· CF5C** - Longest Regular Bracket Sequence  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜çš„â€œç®€åŒ–ç‰ˆâ€ï¼Œåªéœ€è¦æ‰¾æœ€é•¿åˆæ³•å­ä¸²ï¼Œä¸ç”¨ç»Ÿè®¡`[`æ•°é‡ï¼Œæ˜¯æœ¬é¢˜çš„å‰ç½®ç»ƒä¹ ã€‚  
3. **æ´›è°· P3373** - çº¿æ®µæ ‘åŒºé—´ä¿®æ”¹æ¨¡æ¿  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè™½ç„¶æ˜¯çº¿æ®µæ ‘é¢˜ï¼Œä½†éœ€è¦å¤„ç†åŒºé—´æ“ä½œï¼Œèƒ½å¸®ä½ æå‡â€œåŒºé—´å¤„ç†â€çš„èƒ½åŠ›ï¼Œé—´æ¥å·©å›ºå‰ç¼€å’Œçš„æ€è·¯ã€‚  
4. **æ´›è°· P2624** - æ‹¬å·åŒ¹é…è®¡æ•°  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨DPç»Ÿè®¡åˆæ³•æ‹¬å·å­ä¸²çš„æ•°é‡ï¼Œæ˜¯æœ¬é¢˜çš„â€œå˜å½¢ç‰ˆâ€ï¼Œèƒ½å¸®ä½ æ·±åŒ–DPçš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªMelo_DDDï¼‰**ï¼šâ€œæˆ‘åˆšå¼€å§‹æŠŠæ ˆæ•°ç»„è®¾æˆäº†å­—ç¬¦ç±»å‹ï¼Œç»“æœä¸€ç›´REï¼ˆè¿è¡Œé”™è¯¯ï¼‰ï¼Œåæ¥æ‰å‘ç°æ ˆåº”è¯¥å­˜å·¦æ‹¬å·çš„ä¸‹æ ‡ï¼ˆintç±»å‹ï¼‰ï¼â€  
**ç‚¹è¯„**ï¼šè¿™ä¸ªé”™è¯¯å¾ˆå…¸å‹ï¼å¾ˆå¤šåˆå­¦è€…ä¼šæ··æ·†â€œå­˜å‚¨çš„å†…å®¹â€â€”â€”æ ˆå­˜çš„æ˜¯**å·¦æ‹¬å·çš„ä½ç½®**ï¼ˆä¸‹æ ‡ï¼‰ï¼Œä¸æ˜¯å­—ç¬¦æœ¬èº«ã€‚å¦‚æœå­˜å­—ç¬¦ï¼Œä½ æ— æ³•çŸ¥é“è¿™ä¸ªå·¦æ‹¬å·åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Œä¹Ÿå°±æ— æ³•è®°å½•`l[i]`æ•°ç»„ã€‚è¿™ä¸ªç»éªŒæé†’æˆ‘ä»¬ï¼šå†™ä»£ç å‰ä¸€å®šè¦æƒ³æ¸…æ¥šâ€œå˜é‡å­˜çš„æ˜¯ä»€ä¹ˆâ€ï¼  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œBracket Sequenceâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£â€œæ ˆ+DPâ€çš„ç»„åˆæŠ€å·§ï¼Œä»¥åŠå¦‚ä½•ç”¨å‰ç¼€å’Œä¼˜åŒ–ç»Ÿè®¡ã€‚è®°ä½ï¼šç¼–ç¨‹çš„æ ¸å¿ƒæ˜¯â€œè§£å†³é—®é¢˜çš„æ€è·¯â€ï¼Œè€Œä¸æ˜¯æ­»è®°ä»£ç â€”â€”å¤šæ€è€ƒâ€œä¸ºä»€ä¹ˆè¿™æ ·åšâ€ï¼Œæ¯”â€œæ€ä¹ˆåšâ€æ›´é‡è¦ï¼  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š177.83ç§’
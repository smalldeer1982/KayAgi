# é¢˜ç›®ä¿¡æ¯

# Fence

## é¢˜ç›®æè¿°

Vasya should paint a fence in front of his own cottage. The fence is a sequence of $ n $ wooden boards arranged in a single row. Each board is a $ 1 $ centimeter wide rectangle. Let's number the board fence using numbers $ 1,2,...,n $ from left to right. The height of the $ i $ -th board is $ h_{i} $ centimeters.

Vasya has a $ 1 $ centimeter wide brush and the paint of two colors, red and green. Of course, the amount of the paint is limited. Vasya counted the area he can paint each of the colors. It turned out that he can not paint over $ a $ square centimeters of the fence red, and he can not paint over $ b $ square centimeters green. Each board of the fence should be painted exactly one of the two colors. Perhaps Vasya won't need one of the colors.

In addition, Vasya wants his fence to look smart. To do this, he should paint the fence so as to minimize the value that Vasya called the fence unattractiveness value. Vasya believes that two consecutive fence boards, painted different colors, look unattractive. The unattractiveness value of a fence is the total length of contact between the neighboring boards of various colors. To make the fence look nice, you need to minimize the value as low as possible. Your task is to find what is the minimum unattractiveness Vasya can get, if he paints his fence completely.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF234F/a14b673dce5ebb55793e288f9c6ca9cf6b548bb3.png)The picture shows the fence, where the heights of boards (from left to right) are 2,3,2,4,3,1. The first and the fifth boards are painted red, the others are painted green. The first and the second boards have contact length 2, the fourth and fifth boards have contact length 3, the fifth and the sixth have contact length 1. Therefore, the unattractiveness of the given painted fence is 2+3+1=6.

## æ ·ä¾‹ #1

### è¾“å…¥

```
4
5 7
3 3 4 1
```

### è¾“å‡º

```
3
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3
2 3
1 3 1
```

### è¾“å‡º

```
2
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
3
3 3
2 2 2
```

### è¾“å‡º

```
-1
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šFence æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œFenceâ€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒçš„åŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜ä¸­çš„å…³é”®æŠ€å·§ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆçŠ¶æ€å‹ç¼©ä¸è¾¹ç•Œå¤„ç†ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
è§£å†³â€œFenceâ€é—®é¢˜çš„å…³é”®ï¼Œåœ¨äºç”¨**åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰**æŠŠå¤æ‚çš„â€œæ¶‚è‰²å†³ç­–â€æ‹†è§£æˆä¸€æ­¥æ­¥çš„å°é€‰æ‹©ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œæ­ç§¯æœ¨â€â€”â€”æ¯ä¸€æ­¥é€‰æ‹©ç»™å½“å‰æ …æ æ¶‚çº¢è‰²æˆ–ç»¿è‰²æ—¶ï¼Œéƒ½è¦å‚è€ƒå‰ä¸€æ­¥çš„ç§¯æœ¨ï¼ˆå³å‰ä¸€ä¸ªæ …æ çš„é¢œè‰²å’Œç”¨æ‰çš„é¢œæ–™ï¼‰ï¼Œæ‰èƒ½ç®—å‡ºå½“å‰çš„â€œéš¾çœ‹ç¨‹åº¦â€æœ€å°å€¼ã€‚

### æ ¸å¿ƒç®—æ³•æ€è·¯
é¢˜ç›®è¦æ±‚ï¼šæ¯ä¸ªæ …æ å¿…é¡»æ¶‚çº¢æˆ–ç»¿ï¼Œçº¢è‰²æ€»é¢ç§¯â‰¤aï¼Œç»¿è‰²â‰¤bï¼Œä¸”**ç›¸é‚»ä¸åŒè‰²çš„æ¥è§¦é¢ç§¯ä¹‹å’Œæœ€å°**ã€‚æˆ‘ä»¬éœ€è¦ç”¨DPè®°å½•â€œå‰iä¸ªæ …æ ï¼Œç”¨äº†jçš„çº¢é¢œæ–™ï¼Œæœ€åä¸€ä¸ªé¢œè‰²æ˜¯kï¼ˆ0çº¢/1ç»¿ï¼‰â€æ—¶çš„æœ€å°éš¾çœ‹ç¨‹åº¦ï¼Œè®°ä¸º`dp[i][j][k]`ã€‚

### å…³é”®ä¼˜åŒ–ä¸éš¾ç‚¹
åŸæœ¬çš„æƒ³æ³•æ˜¯è®°å½•çº¢ã€ç»¿é¢œæ–™çš„ä½¿ç”¨é‡ï¼ˆå››ç»´çŠ¶æ€`f[i][j][k][l]`ï¼‰ï¼Œä½†è¿™æ ·ä¼šå› ä¸º`a,bâ‰¤40000`è€Œè¶…æ—¶ã€‚**ä¼˜åŒ–ç‚¹**æ¥äº†ï¼šå‰iä¸ªæ …æ çš„æ€»é¢ç§¯æ˜¯å›ºå®šçš„ï¼ˆå‰ç¼€å’Œ`sum[i]`ï¼‰ï¼Œæ‰€ä»¥ç»¿è‰²é¢ç§¯=sum[i]-çº¢è‰²é¢ç§¯jï¼Œä¸éœ€è¦å•ç‹¬æšä¸¾ï¼è¿™ä¸€æ­¥æŠŠå››ç»´å‹æˆäº†ä¸‰ç»´ï¼Œç›´æ¥è§£å†³äº†è¶…æ—¶é—®é¢˜ã€‚

### å¯è§†åŒ–è®¾è®¡æ€è·¯
ä¸ºäº†ç›´è§‚çœ‹åˆ°DPçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£åŠ¨ç”»**æ¨¡æ‹Ÿï¼š
- ç”¨çº¢è‰²/ç»¿è‰²åƒç´ å—è¡¨ç¤ºæ …æ çš„é¢œè‰²ï¼Œç”¨æ•°å­—æ ‡ç­¾æ˜¾ç¤ºå½“å‰ç”¨æ‰çš„çº¢é¢œæ–™é‡`j`ï¼›
- æ¯å¤„ç†ä¸€ä¸ªæ …æ ï¼ˆç¬¬iä¸ªï¼‰ï¼Œä¼šé«˜äº®å‰ä¸€ä¸ªæ …æ çš„çŠ¶æ€ï¼ˆ`dp[i-1][j-h[i]][0]`æˆ–`dp[i-1][j-h[i]][1]`ï¼‰ï¼Œå¹¶ç”¨â€œ+min(h[i],h[i-1])â€çš„æç¤ºæ¡†æ˜¾ç¤ºé¢œè‰²ä¸åŒæ—¶å¢åŠ çš„ä»£ä»·ï¼›
- è‡ªåŠ¨æ’­æ”¾æ—¶ï¼Œç”¨â€œå®â€çš„éŸ³æ•ˆæç¤ºé¢œè‰²å˜åŒ–ï¼Œç”¨â€œæ»´â€çš„éŸ³æ•ˆæç¤ºçŠ¶æ€è½¬ç§»å®Œæˆï¼›
- æœ€ç»ˆä¼šé«˜äº®æ‰€æœ‰åˆæ³•çŠ¶æ€ä¸­çš„æœ€å°å€¼ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†å¸®å¤§å®¶å¿«é€ŸæŒæ¡æ ¸å¿ƒï¼Œæˆ‘ç­›é€‰äº†3ä»½**æ€è·¯æ¸…æ™°ã€ä»£ç ä¸¥è°¨**çš„ä¼˜è´¨é¢˜è§£ï¼š

**é¢˜è§£ä¸€ï¼šæ¥æºï¼šListenSnowï¼ˆèµ3ï¼‰**
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„äº®ç‚¹åœ¨äº**çŠ¶æ€å‹ç¼©çš„æ€è€ƒè¿‡ç¨‹**â€”â€”æ˜ç¡®æŒ‡å‡ºâ€œçº¢+ç»¿é¢ç§¯=æ€»é¢ç§¯â€ï¼Œç›´æ¥æŠŠå››ç»´å‹æˆä¸‰ç»´ï¼Œå®Œç¾è§£å†³äº†è¶…æ—¶é—®é¢˜ã€‚ä»£ç ä¸­çš„å¾ªç¯æ¡ä»¶`jä»max(0,s[i]-b)åˆ°min(a,s[i])`éå¸¸ä¸¥è°¨ï¼Œæ—¢ä¿è¯äº†ç»¿è‰²é¢ç§¯ä¸è¶…è¿‡bï¼ˆ`s[i]-j â‰¤b`ï¼‰ï¼Œåˆä¿è¯äº†çº¢è‰²é¢ç§¯ä¸è¶…è¿‡aï¼ˆ`jâ‰¤a`ï¼‰ã€‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹å†™å¾—å¾ˆç›´ç™½ï¼Œå®¹æ˜“ç†è§£ï¼Œæ˜¯åŠ¨æ€è§„åˆ’çš„æ ‡å‡†å®ç°ã€‚

**é¢˜è§£äºŒï¼šæ¥æºï¼šran_qwqï¼ˆèµ2ï¼‰**
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„ä¼˜åŠ¿æ˜¯**è½¬ç§»æ–¹ç¨‹çš„ç®€æ´æ€§**â€”â€”ç›´æ¥å†™å‡º`dp[i][j][0]`ï¼ˆå½“å‰æ¶‚çº¢ï¼‰å’Œ`dp[i][j][1]`ï¼ˆå½“å‰æ¶‚ç»¿ï¼‰çš„è½¬ç§»é€»è¾‘ï¼Œæ²¡æœ‰å†—ä½™ã€‚è™½ç„¶æ²¡æœ‰è¯¦ç»†å†™è¾¹ç•Œå¤„ç†ï¼Œä½†æ ¸å¿ƒé€»è¾‘å®Œå…¨æ­£ç¡®ï¼Œé€‚åˆå¿«é€Ÿç†è§£åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒã€‚

**é¢˜è§£ä¸‰ï¼šæ¥æºï¼šå¼€å§‹æ–°çš„è®°å¿†ï¼ˆèµ1ï¼‰**
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„ç»†èŠ‚å¤„ç†å¾ˆåˆ°ä½â€”â€”æå‰è®¡ç®—äº†ç›¸é‚»æ …æ çš„æœ€å°é«˜åº¦`c[i]=min(h[i-1],h[i])`ï¼Œé¿å…äº†é‡å¤è®¡ç®—ï¼›å¾ªç¯ä¸­ç”¨`j<=a`å’Œ`sum[i]-j<=b`ä¸¥æ ¼é™åˆ¶é¢œæ–™ç”¨é‡ï¼Œç¡®ä¿äº†çŠ¶æ€çš„åˆæ³•æ€§ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œé€‚åˆæ–°æ‰‹æ¨¡ä»¿ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£å†³è¿™é“é¢˜æ—¶ï¼Œå¤§å®¶å¸¸é‡åˆ°3ä¸ªæ ¸å¿ƒéš¾ç‚¹ï¼Œæˆ‘ç»“åˆä¼˜è´¨é¢˜è§£æ€»ç»“äº†åº”å¯¹ç­–ç•¥ï¼š

1. **éš¾ç‚¹1ï¼šå¦‚ä½•å‹ç¼©çŠ¶æ€ç»´åº¦ï¼Ÿ**
   * **åˆ†æ**ï¼šåŸæœ¬çš„å››ç»´çŠ¶æ€`f[i][j][k][l]`ï¼ˆå‰iä¸ªï¼Œçº¢jï¼Œç»¿kï¼Œæœ€åé¢œè‰²lï¼‰ä¼šå› ä¸º`j,kâ‰¤4e4`è€Œæ— æ³•å¤„ç†ã€‚ä½†å‰iä¸ªçš„æ€»é¢ç§¯æ˜¯`sum[i]`ï¼Œæ‰€ä»¥ç»¿é¢ç§¯=sum[i]-çº¢é¢ç§¯jï¼Œä¸éœ€è¦å•ç‹¬æšä¸¾ï¼è¿™æ ·çŠ¶æ€å°±å‹ç¼©æˆäº†`dp[i][j][l]`ï¼ˆä¸‰ç»´ï¼‰ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€å‹ç¼©çš„å…³é”®æ˜¯æ‰¾åˆ°â€œå˜é‡ä¹‹é—´çš„å›ºå®šå…³ç³»â€ï¼ˆæ¯”å¦‚æ€»é¢ç§¯å›ºå®šï¼‰ï¼Œå‡å°‘ä¸å¿…è¦çš„æšä¸¾ã€‚

2. **éš¾ç‚¹2ï¼šå¦‚ä½•æ¨å¯¼çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Ÿ**
   * **åˆ†æ**ï¼šè½¬ç§»æ–¹ç¨‹çš„æ ¸å¿ƒæ˜¯â€œå½“å‰é€‰æ‹©çš„é¢œè‰²æ˜¯å¦ä¸å‰ä¸€ä¸ªä¸åŒâ€ï¼š
     - å¦‚æœå½“å‰æ¶‚çº¢ï¼ˆ`dp[i][j][0]`ï¼‰ï¼Œé‚£ä¹ˆå‰ä¸€ä¸ªå¯ä»¥æ˜¯çº¢ï¼ˆç›´æ¥ç»§æ‰¿`dp[i-1][j-h[i]][0]`ï¼‰æˆ–ç»¿ï¼ˆéœ€è¦åŠ ä»£ä»·`min(h[i],h[i-1])`ï¼Œå³`dp[i-1][j-h[i]][1] + min(...)`ï¼‰ï¼›
     - å¦‚æœå½“å‰æ¶‚ç»¿ï¼ˆ`dp[i][j][1]`ï¼‰ï¼Œå‰ä¸€ä¸ªå¯ä»¥æ˜¯ç»¿ï¼ˆç»§æ‰¿`dp[i-1][j][1]`ï¼‰æˆ–çº¢ï¼ˆåŠ ä»£ä»·ï¼Œå³`dp[i-1][j][0] + min(...)`ï¼‰ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ–¹ç¨‹è¦â€œåˆ†æƒ…å†µè®¨è®ºâ€ï¼ŒæŠŠæ¯ä¸€æ­¥çš„é€‰æ‹©æ‹†æˆâ€œå’Œå‰ä¸€æ­¥ç›¸åŒâ€æˆ–â€œä¸åŒâ€ä¸¤ç§æƒ…å†µã€‚

3. **éš¾ç‚¹3ï¼šå¦‚ä½•å¤„ç†è¾¹ç•Œæ¡ä»¶ï¼Ÿ**
   * **åˆ†æ**ï¼šéœ€è¦æ³¨æ„3ç‚¹ï¼š
     - åˆå§‹çŠ¶æ€ï¼š`dp[0][0][0] = dp[0][0][1] = 0`ï¼ˆæ²¡æœ‰æ …æ æ—¶ï¼Œç”¨0é¢œæ–™ï¼Œé¢œè‰²ä»»æ„ï¼Œéš¾çœ‹ç¨‹åº¦0ï¼‰ï¼›
     - é¢œæ–™ç”¨é‡é™åˆ¶ï¼šçº¢é¢ç§¯`jâ‰¤a`ï¼Œç»¿é¢ç§¯`sum[i]-jâ‰¤b`ï¼›
     - æ¶‚çº¢æ—¶ï¼Œ`jå¿…é¡»â‰¥h[i]`ï¼ˆå½“å‰æ …æ çš„çº¢é¢ç§¯ä¸èƒ½è¶…è¿‡æ€»çº¢é¢ç§¯ï¼‰ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œæ¡ä»¶æ˜¯åŠ¨æ€è§„åˆ’çš„â€œåœ°åŸºâ€ï¼Œä¸€å®šè¦åœ¨å¾ªç¯å‰æƒ³æ¸…æ¥šï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å‰ç¼€å’Œä¼˜åŒ–**ï¼šç”¨`sum[i]`è®°å½•å‰iä¸ªæ …æ çš„æ€»é¢ç§¯ï¼Œå‡å°‘é‡å¤è®¡ç®—ï¼›
- **çŠ¶æ€å‹ç¼©**ï¼šåˆ©ç”¨å˜é‡é—´çš„å›ºå®šå…³ç³»ï¼ˆçº¢+ç»¿=æ€»é¢ç§¯ï¼‰ï¼Œé™ä½çŠ¶æ€ç»´åº¦ï¼›
- **åˆ†æƒ…å†µè½¬ç§»**ï¼šæŠŠâ€œå½“å‰é¢œè‰²ä¸å‰ä¸€ä¸ªæ˜¯å¦ç›¸åŒâ€æ‹†æˆä¸¤ç§æƒ…å†µï¼Œå†™å‡ºè½¬ç§»æ–¹ç¨‹ï¼›
- **è¾¹ç•Œæ£€æŸ¥**ï¼šåœ¨å¾ªç¯ä¸­ä¸¥æ ¼é™åˆ¶é¢œæ–™ç”¨é‡ï¼Œé¿å…éæ³•çŠ¶æ€ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

åœ¨çœ‹å…·ä½“é¢˜è§£çš„ä»£ç ç‰‡æ®µå‰ï¼Œå…ˆçœ‹ä¸€ä¸ª**é€šç”¨çš„æ ¸å¿ƒå®ç°**ï¼Œå¸®ä½ æŠŠæ¡æ•´ä½“æ¡†æ¶ï¼š

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ListenSnowã€å¼€å§‹æ–°çš„è®°å¿†ç­‰é¢˜è§£çš„æ€è·¯ï¼Œæ˜¯æœ€ç®€æ´çš„æ ‡å‡†å®ç°ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;

const int INF = 0x3f3f3f3f;
const int N = 210;  // æ …æ æ•°é‡ä¸Šé™
const int M = 40010; // çº¢é¢œæ–™ä¸Šé™ï¼ˆaâ‰¤4e4ï¼‰

int n, a, b;
int h[N], sum[N]; // h[i]æ˜¯ç¬¬iä¸ªæ …æ çš„é«˜åº¦ï¼Œsum[i]æ˜¯å‰iä¸ªçš„æ€»é¢ç§¯
int dp[N][M][2];  // dp[i][j][0/1]ï¼šå‰iä¸ªï¼Œçº¢jï¼Œæœ€åé¢œè‰²0çº¢/1ç»¿çš„æœ€å°éš¾çœ‹ç¨‹åº¦

int main() {
    memset(dp, INF, sizeof(dp));
    dp[0][0][0] = dp[0][0][1] = 0; // åˆå§‹çŠ¶æ€

    cin >> n >> a >> b;
    for (int i = 1; i <= n; ++i) {
        cin >> h[i];
        sum[i] = sum[i-1] + h[i];
    }

    for (int i = 1; i <= n; ++i) {
        // jçš„èŒƒå›´ï¼šçº¢é¢ç§¯jä¸èƒ½è¶…è¿‡aï¼Œä¸”ç»¿é¢ç§¯sum[i]-jä¸èƒ½è¶…è¿‡b
        for (int j = max(0, sum[i] - b); j <= min(a, sum[i]); ++j) {
            // æƒ…å†µ1ï¼šå½“å‰æ¶‚çº¢ï¼ˆéœ€è¦jâ‰¥h[i]ï¼‰
            if (j >= h[i]) {
                dp[i][j][0] = min(
                    dp[i-1][j - h[i]][0],               // å‰ä¸€ä¸ªä¹Ÿæ˜¯çº¢ï¼Œæ— ä»£ä»·
                    dp[i-1][j - h[i]][1] + min(h[i], h[i-1]) // å‰ä¸€ä¸ªæ˜¯ç»¿ï¼ŒåŠ ä»£ä»·
                );
            }
            // æƒ…å†µ2ï¼šå½“å‰æ¶‚ç»¿ï¼ˆçº¢é¢ç§¯jä¸å˜ï¼‰
            dp[i][j][1] = min(
                dp[i-1][j][1],                           // å‰ä¸€ä¸ªä¹Ÿæ˜¯ç»¿ï¼Œæ— ä»£ä»·
                dp[i-1][j][0] + min(h[i], h[i-1])       // å‰ä¸€ä¸ªæ˜¯çº¢ï¼ŒåŠ ä»£ä»·
            );
        }
    }

    int ans = INF;
    for (int j = 0; j <= a; ++j) {
        ans = min(ans, min(dp[n][j][0], dp[n][j][1]));
    }
    cout << (ans == INF ? -1 : ans) << endl;

    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. åˆå§‹åŒ–ï¼š`dp`æ•°ç»„è®¾ä¸ºæ— ç©·å¤§ï¼Œåªæœ‰`dp[0][0][0]`å’Œ`dp[0][0][1]`æ˜¯0ï¼ˆæ²¡æœ‰æ …æ æ—¶çš„åˆå§‹çŠ¶æ€ï¼‰ï¼›
  2. è¾“å…¥å¤„ç†ï¼šè¯»å–æ …æ æ•°é‡ã€é¢œæ–™é™åˆ¶ï¼Œè®¡ç®—æ¯ä¸ªæ …æ çš„é«˜åº¦å’Œå‰ç¼€å’Œï¼›
  3. åŠ¨æ€è§„åˆ’å¾ªç¯ï¼šéå†æ¯ä¸ªæ …æ `i`ï¼Œæšä¸¾çº¢é¢ç§¯`j`ï¼ˆæ»¡è¶³é¢œæ–™é™åˆ¶ï¼‰ï¼Œåˆ†åˆ«è®¡ç®—æ¶‚çº¢å’Œæ¶‚ç»¿çš„çŠ¶æ€ï¼›
  4. ç»“æœè®¡ç®—ï¼šéå†æ‰€æœ‰åˆæ³•çš„çº¢é¢ç§¯`j`ï¼Œæ‰¾æœ€å°çš„éš¾çœ‹ç¨‹åº¦ã€‚


### é’ˆå¯¹ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼šListenSnowï¼ˆæ¥æºï¼‰
* **äº®ç‚¹**ï¼šå¾ªç¯æ¡ä»¶`jä»max(0, sum[i]-b)åˆ°min(a, sum[i])`éå¸¸ä¸¥è°¨ï¼Œç›´æ¥é™åˆ¶äº†ç»¿é¢ç§¯ä¸è¶…è¿‡bï¼ˆ`sum[i]-j â‰¤b`ï¼‰å’Œçº¢é¢ç§¯ä¸è¶…è¿‡aï¼ˆ`jâ‰¤a`ï¼‰ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
for(int i=1;i<=n;i++)
    for(int j=max(0,s[i]-b);j<=min(a,s[i]);j++)
    {
        if(j>=h[i]) f[i][j][0]=min(f[i-1][j-h[i]][1]+min(h[i],h[i-1]),f[i-1][j-h[i]][0]);
        f[i][j][1]=min(f[i-1][j][1],f[i-1][j][0]+min(h[i],h[i-1]));
    }
```
* **ä»£ç è§£è¯»**ï¼š
  - `max(0, s[i]-b)`ï¼šç¡®ä¿ç»¿é¢ç§¯`sum[i]-j â‰¤b`ï¼ˆæ¯”å¦‚`sum[i]=10`ï¼Œ`b=7`ï¼Œåˆ™`jâ‰¥3`ï¼Œå¦åˆ™ç»¿é¢ç§¯ä¼šè¶…è¿‡7ï¼‰ï¼›
  - `min(a, sum[i])`ï¼šç¡®ä¿çº¢é¢ç§¯`jâ‰¤a`ï¼›
  - æ¶‚çº¢æ—¶ï¼Œ`jâ‰¥h[i]`æ˜¯å› ä¸ºå½“å‰æ …æ çš„çº¢é¢ç§¯æ˜¯`h[i]`ï¼Œä¸èƒ½è¶…è¿‡æ€»çº¢é¢ç§¯`j`ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¾ªç¯æ¡ä»¶çš„ä¸¥è°¨æ€§ç›´æ¥å†³å®šäº†ä»£ç çš„æ­£ç¡®æ€§ï¼Œä¸€å®šè¦è€ƒè™‘æ‰€æœ‰é™åˆ¶ï¼

#### é¢˜è§£äºŒï¼šran_qwqï¼ˆæ¥æºï¼‰
* **äº®ç‚¹**ï¼šè½¬ç§»æ–¹ç¨‹å†™å¾—éå¸¸ç®€æ´ï¼Œç›´æ¥ç‚¹å‡ºäº†åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒé€»è¾‘ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
dp[i][j][0] = min(dp[i-1][j-h[i]][0], dp[i-1][j-h[i]][1] + min(h[i-1], h[i]));
dp[i][j][1] = min(dp[i-1][j][1], dp[i-1][j][0] + min(h[i-1], h[i]));
```
* **ä»£ç è§£è¯»**ï¼š
  - `dp[i][j][0]`ï¼šå½“å‰æ¶‚çº¢ï¼Œå‰ä¸€ä¸ªå¯ä»¥æ˜¯çº¢ï¼ˆç›´æ¥ç»§æ‰¿ï¼‰æˆ–ç»¿ï¼ˆåŠ ä»£ä»·ï¼‰ï¼›
  - `dp[i][j][1]`ï¼šå½“å‰æ¶‚ç»¿ï¼Œå‰ä¸€ä¸ªå¯ä»¥æ˜¯ç»¿ï¼ˆç›´æ¥ç»§æ‰¿ï¼‰æˆ–çº¢ï¼ˆåŠ ä»£ä»·ï¼‰ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ–¹ç¨‹ä¸éœ€è¦å¤æ‚çš„è¯­æ³•ï¼Œå…³é”®æ˜¯æŠŠâ€œé€‰æ‹©â€æ‹†æ¸…æ¥šï¼

#### é¢˜è§£ä¸‰ï¼šå¼€å§‹æ–°çš„è®°å¿†ï¼ˆæ¥æºï¼‰
* **äº®ç‚¹**ï¼šæå‰è®¡ç®—`c[i]=min(h[i-1], h[i])`ï¼Œé¿å…äº†é‡å¤è®¡ç®—ï¼Œæé«˜ä»£ç æ•ˆç‡ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
for(int i = 1; i<=n; ++i) 
{
    cin>>h[i];
    c[i] = min(h[i-1], h[i]); // æå‰è®¡ç®—ç›¸é‚»æœ€å°é«˜åº¦
    s[i] = s[i-1] + h[i];
}
```
* **ä»£ç è§£è¯»**ï¼š`c[i]`å­˜å‚¨äº†ç¬¬iä¸ªå’Œç¬¬i-1ä¸ªæ …æ çš„æœ€å°é«˜åº¦ï¼Œåç»­è½¬ç§»æ—¶ç›´æ¥ç”¨`c[i]`ï¼Œä¸ç”¨æ¯æ¬¡éƒ½ç®—`min(h[i],h[i-1])`ï¼Œå‡å°‘äº†è®¡ç®—é‡ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæå‰é¢„å¤„ç†é‡å¤è®¡ç®—çš„éƒ¨åˆ†ï¼Œæ˜¯ä¼˜åŒ–ä»£ç çš„å¸¸ç”¨æŠ€å·§ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

ä¸ºäº†è®©å¤§å®¶æ›´ç›´è§‚åœ°ç†è§£åŠ¨æ€è§„åˆ’çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ª**8ä½åƒç´ é£çš„åŠ¨ç”»æ–¹æ¡ˆ**ï¼Œä»¿ç…§FCçº¢ç™½æœºçš„é£æ ¼ï¼Œç»“åˆæ¸¸æˆåŒ–å…ƒç´ ï¼š

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜
**â€œåƒç´ æ …æ æ¶‚è‰²å¤§æŒ‘æˆ˜â€**ï¼šä½ å°†æ‰®æ¼”ä¸€ä¸ªâ€œæ¶‚è‰²å°å·¥åŒ â€ï¼Œç”¨çº¢ã€ç»¿é¢œæ–™ç»™åƒç´ æ …æ æ¶‚è‰²ï¼Œç›®æ ‡æ˜¯æœ€å°åŒ–éš¾çœ‹ç¨‹åº¦ã€‚


### è®¾è®¡æ€è·¯ç®€è¿°
- **åƒç´ é£æ ¼**ï¼šç”¨16x16çš„åƒç´ å—è¡¨ç¤ºæ¯ä¸ªæ …æ ï¼Œçº¢è‰²å—ï¼ˆ#FF0000ï¼‰ã€ç»¿è‰²å—ï¼ˆ#00FF00ï¼‰åŒºåˆ†é¢œè‰²ï¼›
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæ¯æ¶‚å®Œä¸€ä¸ªæ …æ ï¼Œä¼šå¼¹å‡ºâ€œå½“å‰çº¢é¢œæ–™ç”¨é‡ï¼šjâ€çš„æç¤ºæ¡†ï¼Œé¢œè‰²ä¸åŒæ—¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œå®Œæˆæ‰€æœ‰æ …æ åæ’­æ”¾â€œèƒœåˆ©â€éŸ³ä¹ï¼›
- **äº¤äº’æ§åˆ¶**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆçœ‹æ¯ä¸€æ­¥çš„çŠ¶æ€è½¬ç§»ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆè°ƒé€Ÿæ»‘å—æ§åˆ¶é€Ÿåº¦ï¼‰ã€â€œé‡ç½®â€ï¼ˆé‡æ–°å¼€å§‹ï¼‰ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š
   - å±å¹•å·¦ä¾§æ˜¾ç¤º8ä½åƒç´ çš„æ …æ é˜Ÿåˆ—ï¼ˆæ¯”å¦‚n=4æ—¶ï¼Œ4ä¸ª16x16çš„æ–¹å—ï¼‰ï¼Œå³ä¾§æ˜¯â€œæ§åˆ¶é¢æ¿â€ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®ã€é€Ÿåº¦æ»‘å—ï¼‰ï¼›
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„å¾ªç¯BGMï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ï¼‰ã€‚

2. **ç®—æ³•å¯åŠ¨**ï¼š
   - åˆå§‹çŠ¶æ€ï¼šç¬¬0ä¸ªæ …æ ï¼ˆè™šæ‹Ÿï¼‰æ˜¾ç¤ºä¸ºâ€œç©ºâ€ï¼Œ`dp[0][0][0]`å’Œ`dp[0][0][1]`é«˜äº®ä¸ºé»„è‰²ï¼ˆè¡¨ç¤ºåˆå§‹çŠ¶æ€ï¼‰ã€‚

3. **æ ¸å¿ƒæ­¥éª¤æ¼”ç¤º**ï¼š
   - **å¤„ç†ç¬¬1ä¸ªæ …æ **ï¼š
     1. æ …æ 1çš„é«˜åº¦æ˜¯h[1]ï¼Œæ¯”å¦‚h[1]=5ï¼›
     2. æšä¸¾çº¢é¢ç§¯jï¼ˆä»max(0, sum[1]-b)åˆ°min(a, sum[1])ï¼‰ï¼›
     3. æ¶‚çº¢æ—¶ï¼šjâ‰¥5ï¼Œ`dp[1][5][0]`ä»`dp[0][0][0]`ï¼ˆ0ï¼‰å’Œ`dp[0][0][1]`ï¼ˆ0+min(5,0)=0ï¼‰ä¸­å–minï¼ˆ0ï¼‰ï¼›
     4. æ¶‚ç»¿æ—¶ï¼š`dp[1][0][1]`ä»`dp[0][0][1]`ï¼ˆ0ï¼‰å’Œ`dp[0][0][0]`ï¼ˆ0+min(5,0)=0ï¼‰ä¸­å–minï¼ˆ0ï¼‰ï¼›
     5. åŠ¨ç”»ï¼šæ …æ 1å˜æˆçº¢è‰²æˆ–ç»¿è‰²ï¼Œæ—è¾¹æ˜¾ç¤ºâ€œj=5â€æˆ–â€œj=0â€ï¼Œé«˜äº®å¯¹åº”çš„`dp`çŠ¶æ€ã€‚
   - **å¤„ç†ç¬¬2ä¸ªæ …æ **ï¼š
     1. æ …æ 2çš„é«˜åº¦æ˜¯h[2]ï¼Œæ¯”å¦‚h[2]=7ï¼›
     2. æšä¸¾jï¼ˆæ¯”å¦‚sum[2]=12ï¼Œb=10ï¼Œåˆ™jâ‰¥2ï¼‰ï¼›
     3. å¦‚æœå‰ä¸€ä¸ªæ˜¯çº¢ï¼ˆj=5ï¼‰ï¼Œå½“å‰æ¶‚ç»¿ï¼š`dp[2][5][1] = dp[1][5][0] + min(7,5)=0+5=5`ï¼›
     4. åŠ¨ç”»ï¼šæ …æ 2å˜æˆç»¿è‰²ï¼Œæ—è¾¹æ˜¾ç¤ºâ€œ+5â€ï¼ˆå¢åŠ çš„ä»£ä»·ï¼‰ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚

4. **ç›®æ ‡è¾¾æˆ**ï¼š
   - å¤„ç†å®Œæ‰€æœ‰nä¸ªæ …æ åï¼Œé«˜äº®æ‰€æœ‰`dp[n][j][0]`å’Œ`dp[n][j][1]`ä¸­çš„æœ€å°å€¼ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ï¼›
   - å¦‚æœæ— è§£ï¼ˆans=INFï¼‰ï¼Œåˆ™æ‰€æœ‰æ …æ å˜æˆç°è‰²ï¼Œæ’­æ”¾â€œå¤±è´¥â€éŸ³æ•ˆï¼ˆçŸ­ä¿ƒçš„â€œå“”â€å£°ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

æŒæ¡äº†æœ¬é¢˜çš„åŠ¨æ€è§„åˆ’æ€è·¯åï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹**ç›¸ä¼¼é—®é¢˜**ï¼Œå·©å›ºæ‰€å­¦æŠ€å·§ï¼š

### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„æ ¸å¿ƒæ˜¯â€œ**çŠ¶æ€å‹ç¼©çš„åŠ¨æ€è§„åˆ’**â€ï¼Œé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
1. æœ‰å¤šä¸ªé™åˆ¶æ¡ä»¶ï¼ˆæ¯”å¦‚çº¢ã€ç»¿é¢œæ–™ç”¨é‡ï¼‰ï¼Œä½†å˜é‡é—´æœ‰å›ºå®šå…³ç³»ï¼ˆæ¯”å¦‚æ€»é¢ç§¯å›ºå®šï¼‰ï¼›
2. éœ€è¦è®°å½•â€œå‰iä¸ªå…ƒç´ çš„çŠ¶æ€â€ï¼Œä¸”çŠ¶æ€è½¬ç§»ä¾èµ–å‰ä¸€æ­¥çš„é€‰æ‹©ï¼›
3. è¦æ±‚æœ€å°åŒ–/æœ€å¤§åŒ–æŸä¸ªâ€œç´¯ç§¯ä»£ä»·â€ï¼ˆæ¯”å¦‚éš¾çœ‹ç¨‹åº¦ï¼‰ã€‚


### æ´›è°·ç»ƒä¹ æ¨è
1. **æ´›è°· P1280 å°¼å…‹çš„ä»»åŠ¡**
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨åŠ¨æ€è§„åˆ’å¤„ç†â€œä»»åŠ¡é€‰æ‹©â€ï¼ŒçŠ¶æ€è½¬ç§»ä¾èµ–å‰ä¸€æ­¥çš„é€‰æ‹©ï¼Œå’Œæœ¬é¢˜çš„â€œæ¶‚è‰²é€‰æ‹©â€é€»è¾‘ç›¸ä¼¼ï¼Œèƒ½å·©å›ºçŠ¶æ€å®šä¹‰çš„æŠ€å·§ã€‚
2. **æ´›è°· P1040 åŠ åˆ†äºŒå‰æ ‘**
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ ‘å½¢åŠ¨æ€è§„åˆ’çš„ç»å…¸é¢˜ï¼Œéœ€è¦è®°å½•â€œå­æ ‘çš„çŠ¶æ€â€ï¼Œå’Œæœ¬é¢˜çš„â€œå‰iä¸ªæ …æ çš„çŠ¶æ€â€æ€è·¯ä¸€è‡´ï¼Œèƒ½é”»ç‚¼çŠ¶æ€å‹ç¼©çš„èƒ½åŠ›ã€‚
3. **æ´›è°· P1156 åƒåœ¾é™·é˜±**
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦å¤„ç†â€œæ—¶é—´â€å’Œâ€œé«˜åº¦â€ä¸¤ä¸ªå˜é‡ï¼ŒçŠ¶æ€è½¬ç§»ä¾èµ–å‰ä¸€æ­¥çš„é€‰æ‹©ï¼Œå’Œæœ¬é¢˜çš„â€œçº¢é¢œæ–™ç”¨é‡â€å˜é‡é€»è¾‘ç›¸ä¼¼ï¼Œèƒ½å¼ºåŒ–è¾¹ç•Œå¤„ç†çš„æŠ€å·§ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­ï¼Œ**ListenSnow**çš„å¿ƒå¾—å¾ˆæœ‰ä»·å€¼ï¼š
> â€œæœ€åˆæƒ³å†™å››ç»´çŠ¶æ€ï¼Œä½†å‘ç°aå’Œbçš„èŒƒå›´å¤ªå¤§ï¼Œè‚¯å®šè¶…æ—¶ã€‚åæ¥æƒ³åˆ°æ€»é¢ç§¯å›ºå®šï¼Œç›´æ¥æŠŠç»¿é¢ç§¯ç”¨sum[i]-jä»£æ›¿ï¼Œç¬é—´è§£å†³äº†é—®é¢˜ã€‚â€

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„æ€è€ƒè¿‡ç¨‹å¾ˆå…¸å‹â€”â€”é‡åˆ°è¶…æ—¶é—®é¢˜æ—¶ï¼Œå…ˆæ‰¾å˜é‡é—´çš„â€œå›ºå®šå…³ç³»â€ï¼Œç”¨çŠ¶æ€å‹ç¼©å‡å°‘æšä¸¾é‡ã€‚è¿™æé†’æˆ‘ä»¬ï¼šåŠ¨æ€è§„åˆ’çš„å…³é”®ä¸æ˜¯â€œå†™å¤æ‚çš„çŠ¶æ€â€ï¼Œè€Œæ˜¯â€œæ‰¾åˆ°æœ€ç®€çš„çŠ¶æ€â€ï¼


## æ€»ç»“
æœ¬æ¬¡å…³äºâ€œFenceâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯â€œæ‹†è§£é—®é¢˜+è®°å½•çŠ¶æ€+è½¬ç§»æ¨å¯¼â€ï¼Œè€Œæœ¬é¢˜çš„å…³é”®æ˜¯**çŠ¶æ€å‹ç¼©**å’Œ**è¾¹ç•Œå¤„ç†**ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£åŠ¨æ€è§„åˆ’çš„ç²¾é«“ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶ï¼Œèƒ½å¿«é€Ÿæƒ³åˆ°â€œç”¨å‰ç¼€å’Œå‹ç¼©çŠ¶æ€â€æˆ–â€œåˆ†æƒ…å†µå†™è½¬ç§»æ–¹ç¨‹â€ï¼

è®°ä½ï¼šç¼–ç¨‹èƒ½åŠ›çš„æå‡ï¼Œåœ¨äº**å¤šæ€è€ƒã€å¤šæ¨¡ä»¿ã€å¤šç»ƒä¹ **ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š122.46ç§’
# é¢˜ç›®ä¿¡æ¯

# Cat Cycle

## é¢˜ç›®æè¿°

Suppose you are living with two cats: A and B. There are $ n $ napping spots where both cats usually sleep.

Your cats like to sleep and also like all these spots, so they change napping spot each hour cyclically:

- Cat A changes its napping place in order: $ n, n - 1, n - 2, \dots, 3, 2, 1, n, n - 1, \dots $ In other words, at the first hour it's on the spot $ n $ and then goes in decreasing order cyclically;
- Cat B changes its napping place in order: $ 1, 2, 3, \dots, n - 1, n, 1, 2, \dots $ In other words, at the first hour it's on the spot $ 1 $ and then goes in increasing order cyclically.

The cat B is much younger, so they have a strict hierarchy: A and B don't lie together. In other words, if both cats'd like to go in spot $ x $ then the A takes this place and B moves to the next place in its order (if $ x < n $ then to $ x + 1 $ , but if $ x = n $ then to $ 1 $ ). Cat B follows his order, so it won't return to the skipped spot $ x $ after A frees it, but will move to the spot $ x + 2 $ and so on.

Calculate, where cat B will be at hour $ k $ ?

## è¯´æ˜/æç¤º

In the first and second test cases $ n = 2 $ , so:

- at the $ 1 $ -st hour, A is on spot $ 2 $ and B is on $ 1 $ ;
- at the $ 2 $ -nd hour, A moves to spot $ 1 $ and B â€” to $ 2 $ .

 If $ n = 3 $ then: - at the $ 1 $ -st hour, A is on spot $ 3 $ and B is on $ 1 $ ;
- at the $ 2 $ -nd hour, A moves to spot $ 2 $ ; B'd like to move from $ 1 $ to $ 2 $ , but this spot is occupied, so it moves to $ 3 $ ;
- at the $ 3 $ -rd hour, A moves to spot $ 1 $ ; B also would like to move from $ 3 $ to $ 1 $ , but this spot is occupied, so it moves to $ 2 $ .

In the sixth test case:

- A's spots at each hour are $ [5, 4, 3, 2, 1] $ ;
- B's spots at each hour are $ [1, 2, 4, 5, 2] $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
7
2 1
2 2
3 1
3 2
3 3
5 5
69 1337```

### è¾“å‡º

```
1
2
1
3
2
2
65```

# AIåˆ†æç»“æœ


### Kayçš„C++ç®—æ³•è§£æï¼šCat Cycle æ·±å…¥å­¦ä¹ æŒ‡å—

---

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ•°å­¦è§„å¾‹ä¸å‘¨æœŸåˆ†æ`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜æœ¬è´¨æ˜¯**ç¯å½¢åŒæŒ‡é’ˆç›¸é‡é—®é¢˜**çš„æ•°å­¦æŠ½è±¡ã€‚æƒ³è±¡ä¸¤åªçŒ«åœ¨ç¯å½¢è·‘é“ä¸Šåå‘ç§»åŠ¨ï¼ŒAçŒ«æ˜¯"èµ„æ·±è·‘è€…"ï¼ˆé€†æ—¶é’ˆï¼‰ï¼ŒBçŒ«æ˜¯"æ–°ç§€"ï¼ˆé¡ºæ—¶é’ˆï¼‰ã€‚å½“å®ƒä»¬å³å°†ç›¸æ’æ—¶ï¼ŒBçŒ«ä¼šä¸»åŠ¨è®©ä½è·³è‡³ä¸‹ä¸€ä½ç½®ã€‚  
> **æ ¸å¿ƒè§„å¾‹**ï¼š  
> - **å¶æ•°è·‘é“(nå¶)**ï¼šä¸¤çŒ«æ°¸ä¸ç›¸é‡ï¼ŒBçŒ«ä½ç½® = `(k-1)%n+1`  
> - **å¥‡æ•°è·‘é“(nå¥‡)**ï¼šæ¯`T=(n-1)/2`å°æ—¶ç›¸é‡ä¸€æ¬¡ï¼Œæ¯æ¬¡ç›¸é‡BçŒ«éœ€å¤šèµ°1æ­¥  
>  
> **å¯è§†åŒ–è®¾è®¡è¦ç‚¹**ï¼š  
> - ç”¨åƒç´ æ–¹å—è¡¨ç¤ºç¯å½¢è·‘é“ï¼ŒAçŒ«ï¼ˆçº¢è‰²ï¼‰ä»nå¼€å§‹é€†æ—¶é’ˆç§»åŠ¨ï¼ŒBçŒ«ï¼ˆè“è‰²ï¼‰ä»1å¼€å§‹é¡ºæ—¶é’ˆç§»åŠ¨  
> - ç›¸é‡æ—¶è§¦å‘"è·³è·ƒåŠ¨ç”»"ï¼šBçŒ«æ–¹å—é—ªçƒé»„è‰²ï¼Œæ’­æ”¾"å®"éŸ³æ•ˆåç¬ç§»è‡³ä¸‹ä¸€æ ¼  
> - æ§åˆ¶é¢æ¿å«é€Ÿåº¦æ»‘å—ï¼Œæ”¯æŒå•æ­¥è°ƒè¯•è§‚å¯Ÿä½ç½®æ›´æ–°é€»è¾‘  

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼š7KByteï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°æ­ç¤ºå‘¨æœŸæœ¬è´¨ï¼Œä»£ç ç”¨ä½è¿ç®—é«˜æ•ˆåˆ¤æ–­å¥‡å¶æ€§ã€‚äº®ç‚¹åœ¨ç›¸é‡æ¬¡æ•°çš„æ•°å­¦å¤„ç†ï¼š  
  ```cpp
  int w=(n-1)>>1, mid=(n+1)>>1;  // ç²¾å¦™æå–æ ¸å¿ƒå‘¨æœŸå‚æ•°
  int now=k/w; k%=w;              // åˆ†ç¦»å®Œæ•´å‘¨æœŸæ•°ä¸æ®‹ä½™æ­¥æ•°
  int st=(now*mid)%n+1;           // å‘¨æœŸä½ç§»çš„å‘é‡è®¡ç®—
  ```  
  å˜é‡å‘½åç®€æ´ï¼ˆ`w`å‘¨æœŸ, `mid`ä½ç§»é‡ï¼‰ï¼Œç©ºé—´å¤æ‚åº¦O(1)æè‡´ä¼˜åŒ–ï¼Œç«èµ›çº§å®ç°å…¸èŒƒã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šdalao_see_meï¼‰**  
* **ç‚¹è¯„**ï¼š  
  ç›´å‡»é—®é¢˜æœ¬è´¨çš„å…¬å¼æ¨å¯¼ï¼š  
  ```cpp
  int p=n-1>>1, Move=k/p;  // ç”¨ç§»ä½æ›¿ä»£é™¤æ³•ä¼˜åŒ–
  printf("%d\n",(Move+k)%n+1);
  ```  
  ä»£ç é²æ£’æ€§å¼ºï¼Œå®Œç¾å¤„ç†k=1è¾¹ç•Œæƒ…å†µã€‚ç‰¹åˆ«æ¨èå…¶"ç›¸é‡é—´éš”"çš„ç‰©ç†æ„ä¹‰è§£è¯»ï¼ŒåŠ©ç†è§£æœ¬è´¨ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šfelixshuï¼‰**  
* **ç‚¹è¯„**ï¼š  
  é¦–åˆ›"æ€»ä½ç§»=åŸºç¡€ä½ç§»+è·³è¿‡æ¬¡æ•°"çš„ç›´è§‚æ¨¡å‹ï¼š  
  ```cpp
  int K=(n-1)/2;
  cout<<((k+(k-1)/K)-1)%n+1<<endl; 
  ```  
  è™½å­˜åœ¨æ•´æ•°æº¢å‡ºé£é™©ï¼ˆæœªç”¨long longï¼‰ï¼Œä½†æ•°å­¦æ¨¡å‹æå…·æ•™å­¦ä»·å€¼ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **å‘¨æœŸè¯†åˆ«ï¼ˆæ ¸å¿ƒï¼‰**  
   *åˆ†æ*ï¼šå¥‡æ•°næ—¶ï¼Œä¸¤çŒ«åœ¨ä½ç½®`(n+1)/2`å¤„é¦–é‡ï¼Œåç»­æ¯`T=(n-1)/2`æ­¥å‘¨æœŸæ€§ç›¸é‡ã€‚ä¼˜è´¨é¢˜è§£å‡é€šè¿‡`n&1`å¿«é€Ÿåˆ†æµå¤„ç†é€»è¾‘ã€‚  
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼š**å¥‡å¶åˆ†æ²»æ˜¯ç¯å½¢é—®é¢˜çš„é»„é‡‘æ³•åˆ™**

2. **ä½ç§»å åŠ ï¼ˆå…³é”®ï¼‰**  
   *åˆ†æ*ï¼šç›¸é‡å¯¼è‡´BçŒ«å®é™…ä½ç§»=ç†è®ºä½ç§»+è·³è¿‡æ¬¡æ•°ã€‚æ•°å­¦è¡¨è¾¾ï¼š  
   `æ€»ä½ç§» = (k-1) + âŒŠ(k-1)/TâŒ‹`  
   æ³¨æ„ï¼šå½“`n>1e5`æ—¶éœ€ç”¨`long long`é˜²æº¢å‡ºï¼ˆ33aaroné¢˜è§£æœªå¤„ç†æ­¤éšæ‚£ï¼‰

3. **è¾¹ç•Œè‰ºæœ¯ï¼ˆæ˜“é”™ï¼‰**  
   *åˆ†æ*ï¼šä½ç½®ç¼–å·ä¸º1~nè€Œé0~n-1ï¼Œéœ€ç”¨`(x-1)%n+1`è€Œé`x%n`ã€‚haokeeé¢˜è§£ä¸­`(k-1)%n+1`çš„å¯¹ç§°å¤„ç†æå…·å‚è€ƒä»·å€¼ã€‚  
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼š**ç¯å½¢ç´¢å¼•å…ˆå‡1å–æ¨¡å†åŠ 1æ˜¯æ ‡å‡†èŒƒå¼**

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å‘¨æœŸå‹ç¼©**ï¼šå°†å¤§kå€¼å‹ç¼©è‡³å•ä¸ªå‘¨æœŸå†…æ±‚è§£ï¼ˆ7KByteçš„`k%=w`ï¼‰  
- **å‘é‡ä½ç§»**ï¼šç”¨ä¹˜ç§¯ç´¯åŠ å‘¨æœŸä½ç§»ï¼ˆ7KByteçš„`now*mid`ï¼‰  
- **ä½è¿ç®—åŠ é€Ÿ**ï¼šç”¨`n&1`æ›¿ä»£`n%2`ï¼Œ`n>>1`æ›¿ä»£`/2`ï¼ˆdalao_see_meçš„ä¼˜åŒ–ï¼‰  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°**  
```cpp
#include <iostream>
using namespace std;
int main() {
    int T; cin >> T;
    while (T--) {
        long long n, k;   // é˜²æº¢å‡ºå…³é”®
        cin >> n >> k;
        if (n % 2 == 0) {
            cout << (k - 1) % n + 1 << '\n';
        } else {
            long long T = (n - 1) / 2;    // ç›¸é‡å‘¨æœŸ
            long long skip = (k - 1) / T; // è·³è¿‡æ¬¡æ•°
            cout << (k - 1 + skip) % n + 1 << '\n';
        }
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å…¥å¤šç»„æ•°æ®ï¼ˆ`while(T--)`ï¼‰  
  2. **å¶æ•°åˆ†æ”¯**ï¼šç›´æ¥å–æ¨¡å®ç°O(1)è®¡ç®—  
  3. **å¥‡æ•°åˆ†æ”¯**ï¼šå…ˆè®¡ç®—å‘¨æœŸTå’Œè·³è¿‡æ¬¡æ•°ï¼Œå†æ±‚æ¨¡ä½ç§»  
  4. ç»Ÿä¸€ç”¨`(x)%n+1`æ ‡å‡†åŒ–è¾“å‡ºä½ç½®  

**é¢˜è§£ç‰‡æ®µèµæ**  
1. 7KByteçš„å‘¨æœŸä½ç§»æ¨¡å‹ï¼š  
   ```cpp
   int w=(n-1)>>1, mid=(n+1)>>1;
   int now=k/w; k%=w;
   int st=(now*mid)%n+1;  // æ ¸å¿ƒï¼šå‘¨æœŸä½ç§»å‘é‡åŒ–
   printf("%d\n",(st-1+k)%n+1);
   ```
   > **å­¦ä¹ ç¬”è®°**ï¼šå°†å¤§kåˆ†è§£ä¸º`å‘¨æœŸæ•°*ä½ç§»åŸºæ•°+æ®‹ä½™é‡`ï¼Œé¿å…å¤§æ•°è¿ç®—  

2. dalao_see_meçš„æç®€å®ç°ï¼š  
   ```cpp
   if(n&1) {
       int p=n-1>>1, Move=k/p;
       printf("%d\n",(Move+k)%n+1);
   ```
   > **å­¦ä¹ ç¬”è®°**ï¼šç”¨ä½è¿ç®—åŠ é€Ÿå‘¨æœŸè®¡ç®—ï¼Œé€‚åˆç«èµ›åœºæ™¯

3. felixshuçš„ç›´è§‚å…¬å¼ï¼š  
   ```cpp
   int K=(n-1)/2;
   cout<<((k+(k-1)/K)-1)%n+1<<endl;
   ```
   > **å­¦ä¹ ç¬”è®°**ï¼š`æ€»æ­¥æ•°=k+è·³è¿‡æ¬¡æ•°`çš„æ¨¡å‹è™½ç›´è§‚ï¼Œä½†éœ€æ³¨æ„æ•´æ•°æº¢å‡ºé£é™©

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š8-bitå–µæ˜Ÿäººç¯æ¸¸è®°ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰  
**æ ¸å¿ƒæ¼”ç¤º**ï¼š  
![](https://img.imgdb.cn/item/60518a1c524f85ce298160eb.png)  
1. **åœºæ™¯æ„å»º**ï¼š
   - ç¯å½¢è·‘é“ï¼šåƒç´ åŒ–åœ†ç¯ï¼ˆn=5æ—¶å‘ˆäº”è¾¹å½¢ï¼‰ï¼Œä½ç½®ç”¨é—ªçƒæ˜Ÿæ˜Ÿæ ‡æ³¨
   - çŒ«Aï¼šçº¢è‰²åƒç´ æ–¹å—ï¼ˆæˆ´çš‡å† ï¼‰  
   - çŒ«Bï¼šè“è‰²åƒç´ æ–¹å—ï¼ˆå¸¦ç¿…è†€ï¼‰  

2. **åŠ¨æ€æµç¨‹**ï¼š  
   ```mermaid
   graph LR
   A[åˆå§‹åŒ–ä½ç½®] --> B{æ¯å°æ—¶}
   B --> C[ç§»åŠ¨A/BçŒ«]
   C --> D{ç›¸é‡ï¼Ÿ}
   D -->|æ˜¯| E[æ’­æ”¾'å®'éŸ³æ•ˆ<br>BçŒ«é»„è‰²é—ªçƒ+ç¬ç§»]
   D -->|å¦| F[æ­£å¸¸ç§»åŠ¨åŠ¨ç”»]
   E --> G[æ›´æ–°BçŒ«ä½ç½®]
   F --> G
   G --> B
   ```

3. **äº¤äº’æ§åˆ¶**ï¼š  
   - **å•æ­¥è°ƒè¯•**ï¼šæŒ‰å¸§å±•ç¤ºç§»åŠ¨è·¯å¾„ï¼ˆç©ºæ ¼é”®æ§åˆ¶ï¼‰  
   - **é€Ÿåº¦æ»‘å—**ï¼š0.5x~5xé€Ÿåº¦è°ƒèŠ‚ï¼ˆå®æ—¶æ˜¾ç¤ºkå€¼ï¼‰  
   - **AIæ¼”ç¤º**ï¼šè‡ªåŠ¨æ’­æ”¾å®Œæ•´è¿‡ç¨‹ï¼ˆåƒè´ªåƒè›‡AIï¼‰  

4. **æ¸¸æˆåŒ–è®¾è®¡**ï¼š  
   - **éŸ³æ•ˆç³»ç»Ÿ**ï¼š  
     * ç§»åŠ¨ï¼š8-bit "å˜€"å£°  
     * ç›¸é‡ï¼šé‡‘å±"å®"å£°  
     * å®Œæˆï¼šé©¬é‡Œå¥¥è¿‡å…³éŸ³æ•ˆ  
   - **æˆå°±ç³»ç»Ÿ**ï¼š  
     * æ¯10ä¸‡æ­¥è§£é”æ–°çŒ«çš®è‚¤  
     * å®Œç¾é€šå…³ï¼ˆk=10â¹ï¼‰è·"å…‰é€ŸçŒ«"å¥–æ¯  

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
> å‘¨æœŸåˆ†ææ€æƒ³å¯å»¶ä¼¸è‡³ï¼š  
> 1. ç¯å½¢çº¦ç‘Ÿå¤«é—®é¢˜  
> 2. è¡Œæ˜Ÿè½¨é“ä¼šåˆè®¡ç®—  
> 3. é½¿è½®å’¬åˆè½¬åŠ¨å‘¨æœŸ  

**æ´›è°·æ¨è**ï¼š  
1. **P1516 é’è›™çš„çº¦ä¼š**  
   ğŸ—£ï¸ ç¯å½¢è¿½åŠé—®é¢˜ï¼Œéœ€æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚è§£ç›¸é‡ç‚¹  
2. **P1965 è½¬åœˆæ¸¸æˆ**  
   ğŸ—£ï¸ åŒæ¬¾ä½ç½®å¾ªç¯ç§»åŠ¨ï¼Œæµ‹è¯•æ¨¡è¿ç®—ç†è§£æ·±åº¦  
3. **P2512 ç³–æœä¼ é€’**  
   ğŸ—£ï¸ ç¯å½¢å‡åˆ†é—®é¢˜ï¼Œéœ€ç»“åˆå‘¨æœŸåˆ†ææ‰¾æœ€ä¼˜è§£  

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **æ¥è‡ª7KByteçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"æœ€åˆå¿½ç•¥n=3æ—¶k=2çš„è¾¹ç•Œæƒ…å†µï¼Œé€šè¿‡æ‰“å°hour-by-hourä½ç§»è¡¨å‘ç°å…¬å¼ç¼ºé™·"*  
>  
> **Kayç‚¹è¯„**ï¼š  
> è¿™å°è¯äº†**å°æ•°æ®æ¨¡æ‹Ÿ**çš„é‡è¦æ€§ï¼å»ºè®®ï¼š  
> 1. ç”¨n=3,k=1~5æ‰‹å·¥éªŒè¯å…¬å¼  
> 2. è¾“å‡ºä¸­é—´å˜é‡ï¼ˆå¦‚skipå€¼ï¼‰è¾…åŠ©è°ƒè¯•  
> 3. è­¦æƒ•æ•´æ•°é™¤æ³•ä¸å–æ¨¡çš„é™·é˜±  

---

> æŒæ¡å‘¨æœŸåˆ†æçš„å¥¥ä¹‰ï¼Œä¾¿èƒ½å°†çœ‹ä¼¼å¤æ‚çš„ç¯å½¢é—®é¢˜åŒ–è§£ä¸ºä¼˜é›…çš„æ•°å­¦è¡¨è¾¾å¼ã€‚è®°ä½ï¼šç¼–ç¨‹ä¸ä»…æ˜¯å†™ä»£ç ï¼Œæ›´æ˜¯å‘ç°éšè—è§„å¾‹çš„æ¢é™©ä¹‹æ—…ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š203.35ç§’
# 题目信息

# Pupils Redistribution

## 题目描述

在Berland每一个高中生的成绩都很有特点 — 一个在$1$ 和$5$ 之间的整数。

在高中0xFF有两个学生小组，每个小组都有$n$ 名学生。每名学生的成绩就像所知的 — 一个在$1$ 和$5$ 之间的整数。

学校主任想要在小组间重新分配这些学生以达到在两个小组间成绩为$1$ 的学生数量相等，成绩为$2$ 的学生数量相等，以此类推。换句话说，学校主任的目的是，在改变完学生的组成后，每个成绩在两个小组都有相同的人数。

实现这个的方式是，有计划的在小组间进行一系列的学生交换。每次交换中主任都会从$A$ 班(原文就是班，实际应该是组的意思)中选一名学生，再从B班中选一名学生。然后，交换他们所属的组。

输出最少的交换数，来使得每个成绩在两个小组都有相同的人数。

## 样例 #1

### 输入

```
4
5 4 4 4
5 5 4 5
```

### 输出

```
1
```

## 样例 #2

### 输入

```
6
1 1 1 1 1 1
5 5 5 5 5 5
```

### 输出

```
3
```

## 样例 #3

### 输入

```
1
5
3
```

### 输出

```
-1
```

## 样例 #4

### 输入

```
9
3 2 5 5 2 3 3 3 2
4 1 4 1 1 2 4 4 1
```

### 输出

```
4
```

# AI分析结果



---
# 💡 Kay的C++算法解析：Pupils Redistribution 深入学习指南 💡

<introduction>
今天我们来一起分析“Pupils Redistribution”这道C++编程题。通过这道题，我们将学会如何通过统计和数学分析解决分组调整问题。本指南会帮你理清思路、掌握核心算法，并通过生动的像素动画理解每一步操作！
</introduction>

## 1. 题目解读与核心算法识别

✨ **本题主要考察**：`数学统计与逻辑判断`

🗣️ **初步分析**：
解决这道题的关键在于“统计”和“调整”——先统计两个小组中各成绩的人数，再通过数学计算判断是否能调整，并求出最小交换次数。  
简单来说，就像分糖果：如果两种颜色的糖果总数是奇数，肯定无法平均分；如果是偶数，需要计算每个颜色需要从一组换到另一组的数量，而每次交换能同时调整两种颜色的数量（比如用A组的红色换B组的蓝色）。  

- **题解思路**：所有题解的核心思路一致：统计各成绩在两个小组的数量，判断总数是否为偶数（否则无解），再计算需要调整的总次数（每次交换处理两个差值）。  
- **核心难点**：理解“为什么总调整次数要除以2”（因为一次交换能解决两个成绩的差值）。  
- **可视化设计**：用8位像素风格展示两个小组的成绩块（如红色块代表成绩1，蓝色块代表成绩2），交换时动画展示两个块的位置互换，同时用数字显示当前各成绩的数量变化。关键步骤（如总数为奇数时的警告、调整次数计算）用高亮颜色提示，配合“叮”的音效。

---

## 2. 精选优质题解参考

<eval_intro>
我从思路清晰度、代码规范性、算法有效性等方面筛选了以下3道优质题解（评分≥4星）：
</eval_intro>

**题解一：作者：guozhetao**
* **点评**：此题解思路清晰，变量命名直观（如`danci`表示总次数，`dancia`表示A组次数），逻辑步骤明确。代码中先统计总次数和A组次数，再判断是否有奇数总次数，最后计算调整次数。特别值得学习的是对“总次数除以2”的解释（通过样例说明一次交换解决两个差值），非常适合新手理解。

**题解二：作者：Nephren_Sakura**
* **点评**：此题解代码简洁规范，变量名`sum1`和`sum2`明确表示两个小组的次数统计。代码逻辑紧凑，直接计算每个成绩的调整量，最后除以2得到答案。其将输入和统计合并的写法（`sum1[read()]++`）体现了代码的简洁性，适合竞赛场景。

**题解三：作者：tryrtj**
* **点评**：此题解代码简单直接，变量名`c1`和`c2`清晰表示两个小组的统计结果。代码中通过`abs((c1[i]+c2[i])/2 - c1[i])`直接计算每个成绩的调整量，逻辑清晰。特别是对“交换一次处理两个差值”的解释（“交换一次是交换两个数，会算重复”）非常到位，帮助理解核心公式。

---

## 3. 核心难点辨析与解题策略

<difficulty_intro>
在解决这道题时，我们需要重点突破以下三个关键点：
</difficulty_intro>

1.  **关键点1：判断是否有解**  
    * **分析**：每个成绩的总人数（两个小组之和）必须是偶数。因为要平均分配到两个小组，奇数无法平分。例如，若成绩3的总人数是5（奇数），则无法让两个小组各有2.5人，直接返回-1。  
    * 💡 **学习笔记**：总次数为奇数→无解，这是解题的第一重“门槛”。

2.  **关键点2：计算需要调整的次数**  
    * **分析**：对于每个成绩，假设总次数为`total`，则每个小组应各有`total/2`人。A组当前有`a`人，需要调整的次数为`|a - total/2|`。所有成绩的调整次数总和，即为需要交换的总“差值”。  
    * 💡 **学习笔记**：调整量是每个成绩的当前人数与目标人数的差的绝对值之和。

3.  **关键点3：理解“为什么总调整次数要除以2”**  
    * **分析**：每次交换操作（从A组选一个成绩x，B组选一个成绩y）会同时调整两个成绩的差值：x的差值减少1（A组减少x的一个人），y的差值减少1（A组增加y的一个人）。因此，总调整量需要除以2，得到实际交换次数。  
    * 💡 **学习笔记**：一次交换解决两个差值，总调整量÷2=交换次数。

### ✨ 解题技巧总结
- **统计先行**：先统计各成绩在两个小组的次数，是解决此类问题的基础。  
- **边界检查**：优先判断是否有成绩的总次数为奇数，避免后续无效计算。  
- **公式推导**：理解调整量与交换次数的关系，避免直接累加调整量导致错误。

---

## 4. C++核心代码实现赏析

<code_intro_overall>
我们综合优质题解的思路，给出一个简洁、规范的核心实现，帮助大家快速掌握完整解题流程。
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：此代码综合了guozhetao和Nephren_Sakura的思路，变量名清晰，逻辑紧凑，适合竞赛场景。  
* **完整核心代码**：
    ```cpp
    #include <iostream>
    #include <cmath>
    using namespace std;

    int main() {
        int n;
        cin >> n;
        int sumA[6] = {0}, sumTotal[6] = {0}; // sumA记录A组各成绩次数，sumTotal记录总次数

        // 统计A组和总次数
        for (int i = 0; i < n; ++i) {
            int x;
            cin >> x;
            sumA[x]++;
            sumTotal[x]++;
        }

        // 统计B组和总次数
        for (int i = 0; i < n; ++i) {
            int x;
            cin >> x;
            sumTotal[x]++;
        }

        // 判断是否有解：总次数为奇数则无解
        for (int i = 1; i <= 5; ++i) {
            if (sumTotal[i] % 2 != 0) {
                cout << -1 << endl;
                return 0;
            }
        }

        // 计算总调整量
        int ans = 0;
        for (int i = 1; i <= 5; ++i) {
            int target = sumTotal[i] / 2; // 每个小组应有的次数
            ans += abs(sumA[i] - target);
        }

        // 交换次数=总调整量/2（每次交换处理两个调整量）
        cout << ans / 2 << endl;
        return 0;
    }
    ```
* **代码解读概要**：  
  代码首先统计A组各成绩的次数（`sumA`）和所有成绩的总次数（`sumTotal`）。然后检查总次数是否全为偶数（否则输出-1）。接着计算每个成绩需要调整的次数（当前A组次数与目标次数的差的绝对值），最后将总调整量除以2得到交换次数。

---
<code_intro_selected>
接下来，我们分析优质题解中的核心代码片段，学习其中的亮点和技巧：
</code_intro_selected>

**题解一：作者：guozhetao**
* **亮点**：变量名直观（`danci`总次数，`dancia`A组次数），逻辑步骤明确。  
* **核心代码片段**：
    ```cpp
    int ans = 0;
    for(int i = 1; i <= 5; i++) {
        ans += abs(dancia[i] - danci[i] / 2);
    }
    ans /= 2;
    ```
* **代码解读**：  
  这段代码计算每个成绩的调整量（A组当前次数与总次数一半的差的绝对值），累加后除以2得到交换次数。例如，样例1中A组成绩4有3人，总次数是3（A组）+1（B组）=4，目标次数是2。调整量是|3-2|=1，总调整量为1，除以2得1次交换。  
* 💡 **学习笔记**：调整量的计算是核心，总调整量除以2的原因是每次交换处理两个调整量。

**题解二：作者：Nephren_Sakura**
* **亮点**：代码简洁，用`sum1`和`sum2`明确表示两个小组的次数统计。  
* **核心代码片段**：
    ```cpp
    for(int i=1; i<=5; i++)
        if((sum1[i]+sum2[i])%2){
            cout<<-1;
            return 0;
        }
        else
            ans+=abs((sum1[i]+sum2[i])/2-sum1[i]);
    cout<<ans/2;
    ```
* **代码解读**：  
  这段代码先判断总次数是否为奇数（`sum1[i]+sum2[i]`），若为奇数直接输出-1。否则计算每个成绩的调整量（目标次数与当前A组次数的差的绝对值），最后输出总调整量除以2。  
* 💡 **学习笔记**：总次数的奇偶性判断是解题的第一步，必须优先处理。

**题解三：作者：tryrtj**
* **亮点**：代码简单直接，变量名`c1`和`c2`清晰表示两个小组的统计结果。  
* **核心代码片段**：
    ```cpp
    int zong=0;
    for(int i=1; i<=5; i++){
        if((c1[i]+c2[i])%2==0){
            zong+=abs((c1[i]+c2[i])/2 - c1[i]);
        }
        else {
            cout<<-1<<endl;
            return 0;
        }
    }
    cout<<zong/2<<endl;
    ```
* **代码解读**：  
  这段代码通过`c1`和`c2`统计两个小组的次数，计算总次数是否为偶数。若为偶数，累加调整量；否则输出-1。最后总调整量除以2得到交换次数。  
* 💡 **学习笔记**：调整量的累加和除以2是解题的最后一步，直接决定答案是否正确。

-----

## 5\. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了更直观地理解“统计-判断-调整”的过程，我们设计了一个“像素交换小剧场”动画，用8位复古风格展示每一步操作！
</visualization_intro>

  * **动画演示主题**：`像素交换小剧场——成绩均分大挑战`

  * **核心演示内容**：  
    展示两个小组（左为A组，右为B组）的成绩块（1-5用不同颜色像素块表示，如1是红色，2是蓝色等）。动画分为三部分：统计阶段（成绩块移动到统计区）、判断阶段（检查总次数是否为偶数）、调整阶段（交换成绩块，计算交换次数）。

  * **设计思路简述**：  
    采用8位像素风（类似FC游戏），让学习更轻松；关键步骤（如总次数为奇数时的警告、交换时的动画）用高亮和音效强化记忆；每完成一次交换，显示“交换次数+1”，增加成就感。

  * **动画帧步骤与交互关键点**：

    1.  **场景初始化**：  
        - 屏幕分为左右两部分（A组、B组），每个小组有n个像素块（随机颜色表示成绩）。  
        - 底部有统计区（显示各成绩的总次数）和控制面板（开始/暂停、单步、重置）。  
        - 播放8位风格的轻快背景音乐（如《超级马里奥》的经典旋律）。

    2.  **统计阶段**：  
        - 每个成绩块从小组位置“滑”到统计区，对应颜色的计数器增加（如红色块滑到统计区，“成绩1”的计数器+1）。  
        - 统计完成后，显示各成绩的总次数（如“成绩1总次数=4”）。

    3.  **判断阶段**：  
        - 检查每个成绩的总次数是否为偶数：  
          - 若为偶数（如4），计数器显示绿色并播放“叮”音效；  
          - 若为奇数（如5），计数器显示红色并播放“警报”音效，动画暂停并提示“无解！”。

    4.  **调整阶段**：  
        - 计算每个成绩的调整量（如A组成绩4有3人，目标2人，需要移出1人）。  
        - 动画演示交换过程：从A组选一个成绩4的块（红色），从B组选一个成绩5的块（紫色），两者交换位置（像素块滑动+“交换”音效），同时统计区的A组成绩4计数器-1，成绩5计数器+1。  
        - 每交换一次，顶部的“交换次数”加1，直到所有调整量为0。

    5.  **结束阶段**：  
        - 所有成绩的计数器在两个小组相等时，播放“胜利”音效（如《魂斗罗》的通关音乐），显示“成功！交换次数=X”。

  * **旁白提示**：  
    - 统计阶段：“看！这些彩色方块代表学生的成绩，我们需要统计每个成绩的总人数～”  
    - 判断阶段：“如果某个成绩的总人数是奇数，就像分糖果时多了一个，无法平均分，这时候就无解啦！”  
    - 调整阶段：“每次交换可以调整两个成绩的人数，所以总调整量要除以2哦～”

<visualization_conclusion>
通过这个像素动画，我们能直观看到统计、判断、交换的全过程，轻松理解“为什么总调整量要除以2”的核心逻辑！
</visualization_conclusion>

-----

## 6\. 拓展练习与相似问题思考

<similar_problems_intro>
掌握了这道题的统计和调整思路后，我们可以尝试以下类似问题，巩固所学：
</similar_problems_intro>

  * **通用思路/技巧迁移**：  
    本题的“统计-判断-调整”思路适用于所有需要分组调整的问题，例如：  
    - 调整两个班级的男女比例，使各班男女数量相同；  
    - 调整两个仓库的货物种类数量，使各仓库每种货物数量相等；  
    - 调整两个团队的技能分布，使各团队每种技能人数相同。

  * **练习推荐 (洛谷)**：
    1.  **洛谷 P1160 队列安排**  
        * 🗣️ **推荐理由**：这道题需要调整队列中的学生位置，涉及统计和交换操作，能巩固“调整次数计算”的思路。  
    2.  **洛谷 P1093 奖学金**  
        * 🗣️ **推荐理由**：此题需要统计各科成绩并调整排名，能帮助理解“统计-计算”的实际应用。  
    3.  **洛谷 P1007 独木桥**  
        * 🗣️ **推荐理由**：虽然问题形式不同，但核心是通过交换（相遇转向）达到目标状态，培养“逆向思维”调整的能力。

-----

## 7\. 学习心得与经验分享 (若有)

<insights_intro>
本次分析的题解中未发现明确的作者个人心得分享部分。但根据题解代码，我们可以总结一个重要经验：
</insights_intro>

> 在统计次数时，一定要确保每个成绩的总次数被正确计算（如本题中总次数是A组+B组的和）。如果统计错误，后续的判断和计算都会出错。建议在代码中添加“统计后打印验证”的调试步骤（如`cout << sumTotal[i]`），避免因统计错误导致答案错误。

-----

<conclusion>
本次关于“Pupils Redistribution”的分析就到这里。通过统计、判断和调整的思路，我们能轻松解决这类分组调整问题。记住，多动手写代码、多调试，是掌握算法的关键！下次再见，一起挑战更多编程难题吧～💪
</conclusion>

---
处理用时：168.51秒
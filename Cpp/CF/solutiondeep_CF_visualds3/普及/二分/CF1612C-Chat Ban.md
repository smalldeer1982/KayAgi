# é¢˜ç›®ä¿¡æ¯

# Chat Ban

## é¢˜ç›®æè¿°

You are a usual chat user on the most famous streaming platform. Of course, there are some moments when you just want to chill and spam something.

More precisely, you want to spam the emote triangle of size $ k $ . It consists of $ 2k-1 $ messages. The first message consists of one emote, the second one â€” of two emotes, ..., the $ k $ -th one â€” of $ k $ emotes, the $ k+1 $ -th one â€” of $ k-1 $ emotes, ..., and the last one â€” of one emote.

For example, the emote triangle for $ k=3 $ consists of $ 5 $ messages:

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1612C/2949e1c874315434d0b3c1f5e20dee7c9097dc7a.png)Of course, most of the channels have auto moderation. Auto moderator of the current chat will ban you right after you spam at least $ x $ emotes in succession (you can assume you are the only user in the chat). Now you are interested â€” how many messages will you write before getting banned? Or maybe you will not get banned at all (i.e. will write all $ 2k-1 $ messages and complete your emote triangle successfully)? Note that if you get banned as a result of writing a message, this message is also counted.

You have to answer $ t $ independent test cases.

## è¯´æ˜/æç¤º

Let's analyze the test cases of the example.

1. In the first test case, you write three messages containing $ 1 $ , $ 2 $ and $ 3 $ emotes respectively, and since $ 1 + 2 + 3 \ge 6 $ , you get banned after that.
2. In the second test case, you write four messages containing $ 1 $ , $ 2 $ , $ 3 $ and $ 4 $ emotes respectively, and since $ 1 + 2 + 3 + 4 \ge 7 $ , you get banned after that.
3. In the third test case, you write one message containing exactly $ 1 $ emote. It doesn't get you banned, since $ 1 < 2 $ , but you have already finished posting your emote triangle. So you wrote one message successfully.
4. In the fourth test case, you write four messages containing $ 1 $ , $ 2 $ , $ 3 $ and $ 2 $ emotes respectively, and since $ 1 + 2 + 3 + 2 \ge 7 $ , you get banned after that.
5. In the fifth test case, you write three messages containing $ 1 $ , $ 2 $ and $ 1 $ emote respectively. It doesn't get you banned, since $ 1 + 2 + 1 < 5 $ , but you have already finished posting your emote triangle. So you wrote three messages successfully.
6. In the sixth test case, since $ x = 1 $ , you get banned as soon as you send your first message.
7. The seventh test case is too large to analyze, so we'll skip it.

## æ ·ä¾‹ #1

### è¾“å…¥

```
7
4 6
4 7
1 2
3 7
2 5
100 1
1000000000 923456789987654321```

### è¾“å‡º

```
3
4
1
4
3
1
1608737403```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šChat Ban æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·åˆ†æCF1612Câ€œChat Banâ€è¿™é“é¢˜ã€‚é¢˜ç›®è¦æ±‚è®¡ç®—åœ¨å‘é€ç‰¹å®šæ¨¡å¼çš„è¡¨æƒ…ä¸‰è§’å½¢æ—¶ï¼Œåœ¨è¾¾åˆ°ç¦è¨€é˜ˆå€¼å‰èƒ½å‘é€çš„æ¶ˆæ¯æ¡æ•°ã€‚æœ¬æŒ‡å—å°†å¸®ä½ æŒæ¡æ ¸å¿ƒç®—æ³•å’Œå®ç°æŠ€å·§ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«  
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆæœç´¢ï¼‰  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äºè¿ç”¨**äºŒåˆ†æŸ¥æ‰¾**ã€‚æƒ³è±¡ä½ åœ¨ç©â€œçŒœæ•°å­—â€æ¸¸æˆâ€”â€”é€šè¿‡ä¸æ–­ç¼©å°èŒƒå›´ï¼Œå¿«é€Ÿå®šä½ä¸´ç•Œç‚¹ã€‚  
> - **æ ¸å¿ƒæ€è·¯**ï¼šæ¶ˆæ¯æ¡æ•°mä¸è¡¨æƒ…æ€»æ•°å‘ˆå•è°ƒå…³ç³»ã€‚å½“mâ‰¤kæ—¶ï¼Œè¡¨æƒ…æ•°=1+2+...+mï¼›å½“m>kæ—¶ï¼Œè¡¨æƒ…æ•°=å‰åŠä¸‰è§’æ€»å’Œ+é€’å‡éƒ¨åˆ†æ€»å’Œã€‚  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåƒç´ åŠ¨ç”»å°†å±•ç¤ºæ•°è½´ï¼ˆ1~2k-1ï¼‰ï¼Œå·¦å³æŒ‡é’ˆç§»åŠ¨æ—¶é«˜äº®å½“å‰midï¼Œå®æ—¶æ˜¾ç¤ºè®¡ç®—çš„è¡¨æƒ…æ€»æ•°ã€‚å½“â‰¥xæ—¶è§¦å‘â€œç¦è¨€â€éŸ³æ•ˆï¼Œæ‰¾åˆ°ç­”æ¡ˆæ—¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆã€‚  
> - **å¤å¤æ¸¸æˆåŒ–**ï¼šé‡‡ç”¨8-bitåƒç´ é£æ ¼ï¼Œæ§åˆ¶é¢æ¿å«å•æ­¥/è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—è°ƒèŠ‚æ¼”ç¤ºé€Ÿåº¦ï¼Œå…³é”®æ“ä½œé…FCéŸ³æ•ˆï¼ˆå¦‚æŒ‡é’ˆç§»åŠ¨â€œæ»´â€ã€æ¯”è¾ƒâ€œå®â€ï¼‰ã€‚

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ  

**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šJur_Caiï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°åˆ†ä¸ºmâ‰¤kå’Œm>kä¸¤ç§æƒ…å†µï¼Œä»£ç è§„èŒƒï¼ˆå˜é‡åk/xå«ä¹‰æ˜ç¡®ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå¦‚xæ°å¥½ç­‰äºå‰åŠéƒ¨åˆ†æ—¶ç‰¹åˆ¤ï¼‰ã€‚äº®ç‚¹åœ¨äºç”¨æ•°å­¦å…¬å¼ç›´æ¥è®¡ç®—ååŠéƒ¨åˆ†æ€»å’Œï¼Œé¿å…é‡å¤äºŒåˆ†ï¼Œå¤æ‚åº¦O(log k)ä¼˜åŒ–æ˜¾è‘—ã€‚ç«èµ›å®ç°å¯ç›´æ¥å‚è€ƒã€‚  

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šjiangjiangQwQï¼‰**  
* **ç‚¹è¯„**ï¼šå°è£…checkå‡½æ•°æé«˜å¯è¯»æ€§ï¼Œé²æ£’æ€§å¼ºï¼ˆå¤„ç†å…¨éƒ¨æ¶ˆæ¯å¯å‘é€çš„æƒ…å†µï¼‰ã€‚äº®ç‚¹åœ¨äºååŠéƒ¨åˆ†è®¡ç®—ï¼šç”¨æ€»é€’å‡å’Œå‡å»æœªå‘é€éƒ¨åˆ†ï¼Œæ•°å­¦è½¬æ¢å·§å¦™ã€‚å˜é‡å‘½åè§„èŒƒï¼ˆå¦‚cnt/wï¼‰ï¼Œå®è·µå‚è€ƒä»·å€¼é«˜ã€‚

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥  
1. **éš¾ç‚¹1ï¼šé«˜æ•ˆè®¡ç®—è¡¨æƒ…æ€»æ•°**  
   * **åˆ†æ**ï¼šéœ€åˆ†mâ‰¤kå’Œm>kä¸¤ç§æƒ…å†µã€‚m>kæ—¶ååŠéƒ¨åˆ†ä¸ºç­‰å·®æ•°åˆ—ï¼šé¦–é¡¹k-1ï¼Œæœ«é¡¹k-(m-k)ï¼Œé¡¹æ•°m-kã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç­‰å·®æ•°åˆ—å’Œ = (é¦–é¡¹+æœ«é¡¹)Ã—é¡¹æ•°/2  

2. **éš¾ç‚¹2ï¼šäºŒåˆ†è¾¹ç•Œå¤„ç†**  
   * **åˆ†æ**ï¼šå·¦è¾¹ç•Œl=1ï¼Œå³è¾¹ç•Œr=2k-1ã€‚å½“totalâ‰¥xæ—¶æ”¶ç´§å³è¾¹ç•Œï¼Œå¦åˆ™æ”¶ç´§å·¦è¾¹ç•Œã€‚æ³¨æ„æ•´æ•°æº¢å‡ºï¼ˆç”¨long longï¼‰ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¾ªç¯æ¡ä»¶`l<=r`ä¿è¯æ— é—æ¼ï¼Œæ›´æ–°åæ£€æŸ¥è¾¹ç•Œé¿å…æ­»å¾ªç¯ã€‚  

3. **éš¾ç‚¹3ï¼šé¿å…æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜**  
   * **åˆ†æ**ï¼šæ•°å­¦å…¬å¼æ³•éœ€è§£äºŒæ¬¡ä¸ç­‰å¼ï¼Œä½†`sqrt(2k+0.25)`çš„æµ®ç‚¹è¯¯å·®å¯èƒ½å¯¼è‡´é”™è¯¯ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¼˜å…ˆç”¨æ•´æ•°è¿ç®—çš„äºŒåˆ†æ³•ï¼Œé¿å…æµ®ç‚¹æ•°ã€‚  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**ï¼š  
- **åˆ†ç±»è®¨è®º**ï¼šåˆ†ç¦»é€’å¢/é€’å‡åºåˆ—ç®€åŒ–é—®é¢˜  
- **å°è£…å‡½æ•°**ï¼šç‹¬ç«‹è®¡ç®—é€»è¾‘æé«˜ä»£ç å¤ç”¨  
- **æº¢å‡ºé˜²å¾¡**ï¼šå…¨ç¨‹ä½¿ç”¨long longï¼Œç‰¹åˆ«åœ¨kâ‰¤10â¹æ—¶  

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ  
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**  
```cpp
#include <iostream>
using namespace std;
typedef long long ll;

int main() {
    int t; cin >> t;
    while (t--) {
        ll k, x; cin >> k >> x;
        ll l = 1, r = 2*k-1, ans = 2*k-1;
        while (l <= r) {
            ll mid = (l + r) >> 1;
            ll total = 0;
            
            if (mid <= k) 
                total = mid * (mid + 1) / 2;
            else {
                total = k * (k + 1) / 2; // å‰åŠä¸‰è§’
                ll n2 = mid - k;         // ååŠæ¡æ•°
                ll last = k - n2;        // æœ«é¡¹=é¦–é¡¹-(é¡¹æ•°-1)
                total += (k - 1 + last) * n2 / 2; // ç­‰å·®æ•°åˆ—å’Œ
            }
            
            if (total >= x) 
                { ans = mid; r = mid - 1; }
            else 
                l = mid + 1;
        }
        cout << ans << endl;
    }
    return 0;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
> 1. è¯»å–æµ‹è¯•ç”¨ä¾‹æ•°t  
> 2. å¯¹æ¯ä¸ªç”¨ä¾‹ï¼šè®¾å®šäºŒåˆ†è¾¹ç•Œl=1, r=2k-1  
> 3. è®¡ç®—midå¯¹åº”çš„è¡¨æƒ…æ€»æ•°ï¼šåˆ†midâ‰¤kï¼ˆé€’å¢ï¼‰å’Œ>kï¼ˆå‰åŠå›ºå®š+ååŠé€’å‡ï¼‰  
> 4. æ ¹æ®totalä¸xå…³ç³»æ›´æ–°è¾¹ç•Œï¼Œè¾“å‡ºæœ€å°æ»¡è¶³æ¡ä»¶çš„ans  

**é¢˜è§£ä¸€ï¼ˆJur_Caiï¼‰ç‰‡æ®µèµæ**  
```cpp
if (x >= (k+1)*k/2 + k*(k-1)/2) 
    cout << 2*k-1 << '\n';
else if (x <= k*(k+1)/2) {
    while (l <= r) {
        if ((1+mid)*mid/2 >= x) 
            { ans = mid; r = mid-1; }
        else l = mid+1;
    }
    cout << ans << '\n';
}
```
* **äº®ç‚¹**ï¼šä¼˜å…ˆåˆ¤æ–­æå€¼æƒ…å†µï¼Œé¿å…æ— æ•ˆäºŒåˆ†  
* **å­¦ä¹ ç¬”è®°**ï¼š`(k+1)*k/2 + k*(k-1)/2 = kÂ²`ï¼Œæ˜¯ä¸‰è§’æ€»å’Œå…¬å¼çš„ç®€åŒ–å†™æ³•  

**é¢˜è§£äºŒï¼ˆjiangjiangQwQï¼‰ç‰‡æ®µèµæ**  
```cpp
bool check(int l) {
    if (l <= n) return C(l) < x; // C(l)=l(l+1)/2
    else {
        int cnt = n-1 - (l-n);   // æœªå‘é€é¡¹æ•°
        ll w = n*(n-1)/2 - (1+cnt)*cnt/2; // ååŠå‘é€é‡
        return C(n) + w < x;
    }
}
```
* **äº®ç‚¹**ï¼šååŠéƒ¨åˆ†è®¡ç®— = æ€»é€’å‡å’Œ - æœªå‘é€éƒ¨åˆ†  
* **å­¦ä¹ ç¬”è®°**ï¼šæœªå‘é€éƒ¨åˆ†=1+2+...+cntï¼Œç”¨åå‘è®¡ç®—é¿å…å¤æ‚å…¬å¼  

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
**ä¸»é¢˜**ï¼šäºŒåˆ†æŸ¥æ‰¾çš„â€œæŒ‡é’ˆæ¢é™©â€  
**è®¾è®¡æ€è·¯**ï¼š  
> 8-bitåƒç´ ç½‘æ ¼æ¨¡æ‹Ÿæ•°è½´ï¼Œå·¦å³æŒ‡é’ˆä¸ºåƒç´ å°äººï¼Œmidä¸ºé—ªçƒå…‰æ ‡ã€‚FCéŸ³æ•ˆå¼ºåŒ–æ“ä½œåé¦ˆï¼š  
> - **æŒ‡é’ˆç§»åŠ¨**ï¼šå¤å¤â€œæ»´â€å£°  
> - **è®¡ç®—æ¯”è¾ƒ**ï¼šæ¸…è„†â€œå®â€å£°  
> - **æ‰¾åˆ°ç­”æ¡ˆ**ï¼šèƒœåˆ©æ—‹å¾‹+é—ªå…‰  

**åŠ¨ç”»æ­¥éª¤**ï¼š  
1. **åˆå§‹åŒ–**ï¼š  
   - åƒç´ ç½‘æ ¼æ ‡æ³¨1,2,...,2k-1ï¼Œå·¦å³æŒ‡é’ˆç½®äºä¸¤ç«¯  
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœã€å•æ­¥ã€é€Ÿåº¦æ»‘å—ï¼ˆè°ƒé€ŸèŒƒå›´0.5x~2xï¼‰  
   - èƒŒæ™¯ï¼šä½é¥±å’Œåº¦åƒç´ æ˜Ÿç©º  

2. **äºŒåˆ†è¿‡ç¨‹**ï¼š  
   - **Step 1**ï¼šé«˜äº®å½“å‰midä½ç½®ï¼ˆé»„è‰²é—ªçƒï¼‰  
   - **Step 2**ï¼šæ˜¾ç¤ºè¡¨æƒ…æ€»æ•°å…¬å¼ï¼ˆå¦‚mid=3 â†’ æ˜¾ç¤º1+2+3=6ï¼‰  
   - **Step 3**ï¼šä¸xæ¯”è¾ƒï¼šè‹¥â‰¥xåˆ™å³æŒ‡é’ˆå·¦ç§»ï¼ˆæ’­æ”¾â€œè­¦å‘Šâ€éŸ³æ•ˆï¼‰ï¼Œå¦åˆ™å·¦æŒ‡é’ˆå³ç§»ï¼ˆâ€œé€šè¿‡â€éŸ³æ•ˆï¼‰  

3. **AIæ¼”ç¤ºæ¨¡å¼**ï¼š  
   - è‡ªåŠ¨æ’­æ”¾æ—¶ç±»ä¼¼â€œè´ªåƒè›‡AIâ€ï¼ŒæŒ‡é’ˆåŒ€é€Ÿç§»åŠ¨  
   - å…³é”®æ­¥éª¤æš‚åœ0.5ç§’ï¼Œæ˜¾ç¤ºæ¨å¯¼å…¬å¼  

4. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
   - æ¯æ­¥è®¡åˆ†ï¼šå‰©ä½™èŒƒå›´è¶Šçª„å¾—åˆ†è¶Šé«˜  
   - å®Œæˆæ—¶ï¼šæ˜¾ç¤ºâ€œBAN!â€æˆ–â€œSAFE!â€åƒç´ è‰ºæœ¯å­—  

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜  
**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
> äºŒåˆ†æŸ¥æ‰¾é€‚ç”¨äºï¼šå•è°ƒåºåˆ—ä¸´ç•Œå€¼æœç´¢ã€æœ€å¤§å€¼æœ€å°åŒ–é—®é¢˜ï¼ˆå¦‚P2678è·³çŸ³å¤´ï¼‰  

**æ´›è°·æ¨è**ï¼š  
1. **P2249** æŸ¥æ‰¾  
   â†’ å·©å›ºäºŒåˆ†åŸºç¡€å®ç°  
2. **P2678** è·³çŸ³å¤´  
   â†’ ç»å…¸äºŒåˆ†ç­”æ¡ˆåº”ç”¨  
3. **P1182** æ•°åˆ—åˆ†æ®µ  
   â†’ äºŒåˆ†+è´ªå¿ƒç»¼åˆè®­ç»ƒ  

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
> **ç»éªŒï¼ˆæ¥è‡ªTerrariaï¼‰**ï¼š  
> â€œæ•°å­¦å…¬å¼æ³•å› æµ®ç‚¹ç²¾åº¦æäº¤æ³¢åŠ¨ï¼Œæ”¹ç”¨æ•´æ•°äºŒåˆ†æ›´ç¨³å®šã€‚â€  
> **Kayç‚¹è¯„**ï¼šå¤§æ•´æ•°è¿ç®—ä¼˜å…ˆè§„é¿æµ®ç‚¹æ•°ï¼Œè°ƒè¯•æ—¶å¯ç”¨`ans-1, ans, ans+1`éªŒè¯è¾¹ç•Œã€‚  

---

**ç»“è¯­**  
é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†äºŒåˆ†æŸ¥æ‰¾çš„æ ¸å¿ƒæ€æƒ³ä¸å®ç°æŠ€å·§ã€‚è®°ä½ï¼šç¼–ç¨‹èƒ½åŠ›=çŸ¥è¯†Ã—å®è·µÂ²ï¼ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š193.07ç§’
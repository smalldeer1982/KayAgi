# é¢˜ç›®ä¿¡æ¯

# Factorials and Powers of Two

## é¢˜ç›®æè¿°

A number is called powerful if it is a power of two or a factorial. In other words, the number $ m $ is powerful if there exists a non-negative integer $ d $ such that $ m=2^d $ or $ m=d! $ , where $ d!=1\cdot 2\cdot \ldots \cdot d $ (in particular, $ 0! = 1 $ ). For example $ 1 $ , $ 4 $ , and $ 6 $ are powerful numbers, because $ 1=1! $ , $ 4=2^2 $ , and $ 6=3! $ but $ 7 $ , $ 10 $ , or $ 18 $ are not.

You are given a positive integer $ n $ . Find the minimum number $ k $ such that $ n $ can be represented as the sum of $ k $ distinct powerful numbers, or say that there is no such $ k $ .

## è¯´æ˜/æç¤º

In the first test case, $ 7 $ can be represented as $ 7=1+6 $ , where $ 1 $ and $ 6 $ are powerful numbers. Because $ 7 $ is not a powerful number, we know that the minimum possible value of $ k $ in this case is $ k=2 $ .

In the second test case, a possible way to represent $ 11 $ as the sum of three powerful numbers is $ 11=1+4+6 $ . We can show that there is no way to represent $ 11 $ as the sum of two or less powerful numbers.

In the third test case, $ 240 $ can be represented as $ 240=24+32+64+120 $ . Observe that $ 240=120+120 $ is not a valid representation, because the powerful numbers have to be distinct.

In the fourth test case, $ 17179869184=2^{34} $ , so $ 17179869184 $ is a powerful number and the minimum $ k $ in this case is $ k=1 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
4
7
11
240
17179869184```

### è¾“å‡º

```
2
3
4
1```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šFactorials and Powers of Two æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæšä¸¾ç»„åˆ + äºŒè¿›åˆ¶æ‹†åˆ†  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œç”¨æœ€å°‘ä¸åŒå¼ºå¤§æ•°ï¼ˆ2çš„å¹‚æˆ–é˜¶ä¹˜ï¼‰ä¹‹å’Œè¡¨ç¤ºnâ€çš„é—®é¢˜ï¼Œå…³é”®åœ¨äº**æŠ“ä½é˜¶ä¹˜çš„â€œå°‘â€**â€”â€”15!ï¼ˆçº¦1.3Ã—10Â¹Â²ï¼‰å·²è¶…è¿‡é¢˜ç›®ä¸­nçš„æœ€å¤§å€¼ï¼ˆ10Â¹Â²ï¼‰ï¼Œå› æ­¤**é˜¶ä¹˜æœ€å¤šåªæœ‰14ä¸ªï¼ˆ1!åˆ°14!ï¼‰**ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥**æšä¸¾æ‰€æœ‰å¯èƒ½çš„é˜¶ä¹˜ç»„åˆ**ï¼Œç„¶åå°†å‰©ä½™çš„æ•°ç”¨**äºŒè¿›åˆ¶æ‹†åˆ†**ï¼ˆ2çš„å¹‚ä¹‹å’Œï¼‰è¡¨ç¤ºï¼ˆäºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°å°±æ˜¯æœ€å°‘2çš„å¹‚æ•°é‡ï¼‰ã€‚æ€»æ•°é‡ä¸ºâ€œé€‰çš„é˜¶ä¹˜ä¸ªæ•° + å‰©ä½™æ•°çš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°â€ï¼Œå–æ‰€æœ‰ç»„åˆä¸­çš„æœ€å°å€¼ã€‚  

- **æ ¸å¿ƒæ€è·¯**ï¼šåƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œå…ˆé€‰å‡ ä¸ªå¤§çš„é˜¶ä¹˜ç§¯æœ¨ï¼Œå‰©ä¸‹çš„ç”¨å°çš„2çš„å¹‚ç§¯æœ¨å¡«è¡¥ï¼Œæ‰¾æœ€å°‘çš„ç§¯æœ¨æ•°é‡ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼šâ‘  ä¸ºä»€ä¹ˆæšä¸¾é˜¶ä¹˜è€Œä¸æ˜¯æ‰€æœ‰å¼ºå¤§æ•°ï¼Ÿï¼ˆé˜¶ä¹˜æ•°é‡å°‘ï¼Œæšä¸¾å¯è¡Œï¼‰ï¼›â‘¡ å‰©ä½™æ•°çš„æœ€å°‘è¡¨ç¤ºæ–¹å¼ï¼Ÿï¼ˆäºŒè¿›åˆ¶æ‹†åˆ†çš„1çš„ä¸ªæ•°æœ€å°‘ï¼‰ï¼›â‘¢ å¦‚ä½•é«˜æ•ˆæšä¸¾é˜¶ä¹˜ç»„åˆï¼Ÿï¼ˆDFSæˆ–çŠ¶å‹ï¼Œå› ä¸º14ä¸ªé˜¶ä¹˜çš„ç»„åˆæ•°æ˜¯2Â¹â´=16384ï¼Œå¾ˆå°ï¼‰ã€‚  
- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼šç”¨åƒç´ å—è¡¨ç¤ºé˜¶ä¹˜ï¼ˆçº¢è‰²ï¼‰å’Œ2çš„å¹‚ï¼ˆè“è‰²ï¼‰ï¼Œâ€œåƒç´ æ¢é™©å®¶â€é€ä¸€é€‰æ‹©é˜¶ä¹˜ï¼Œå‰©ä½™æ•°ç”¨äºŒè¿›åˆ¶å—æ˜¾ç¤ºï¼Œé«˜äº®å½“å‰é€‰æ‹©çš„é˜¶ä¹˜å’Œå‰©ä½™æ•°çš„äºŒè¿›åˆ¶ä½ï¼Œé…åˆâ€œå®â€ï¼ˆé€‰é˜¶ä¹˜ï¼‰ã€â€œæ»´â€ï¼ˆäºŒè¿›åˆ¶æ‹†åˆ†ï¼‰ç­‰éŸ³æ•ˆï¼Œç›´è§‚å±•ç¤ºæ¯ä¸€æ­¥çš„ç»„åˆé€‰æ‹©å’Œæ•°é‡è®¡ç®—ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šEason_ACçš„DFSè§£æ³•ï¼ˆèµï¼š8ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**DFSé€’å½’æšä¸¾**æ¯ä¸ªé˜¶ä¹˜çš„â€œé€‰æˆ–ä¸é€‰â€ï¼Œæ€è·¯æ¸…æ™°ä¸”ç¬¦åˆç›´è§‰ã€‚DFSå‚æ•°åŒ…å«â€œå½“å‰å¤„ç†çš„é˜¶ä¹˜ç´¢å¼•â€â€œå·²é€‰é˜¶ä¹˜ä¸ªæ•°â€â€œå‰©ä½™æ•°â€ï¼Œå½“å¤„ç†å®Œæ‰€æœ‰é˜¶ä¹˜åï¼Œç”¨`__builtin_popcountll`å¿«é€Ÿè®¡ç®—å‰©ä½™æ•°çš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°ï¼Œæ›´æ–°æœ€å°å€¼ã€‚ä»£ç ä¸­çš„**å‰ªæä¼˜åŒ–**ï¼ˆ`cnt + 1 < ans`ï¼‰é¿å…äº†æ— æ•ˆé€’å½’ï¼Œæé«˜äº†æ•ˆç‡ã€‚äº®ç‚¹æ˜¯å¯¹é˜¶ä¹˜æ•°é‡çš„æ­£ç¡®é¢„å¤„ç†ï¼ˆ14ä¸ªï¼‰å’ŒDFSçš„ç®€æ´å®ç°ï¼Œéå¸¸é€‚åˆç†è§£æšä¸¾ç»„åˆçš„é€»è¾‘ã€‚  

### é¢˜è§£äºŒï¼šDuramenteçš„çŠ¶å‹æšä¸¾è§£æ³•ï¼ˆèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**çŠ¶å‹æšä¸¾**ï¼ˆäºŒè¿›åˆ¶æ•°è¡¨ç¤ºé˜¶ä¹˜çš„é€‰æˆ–ä¸é€‰ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(2Â¹â´Ã—log n)ï¼Œé«˜æ•ˆä¸”ç®€æ´ã€‚å¯¹äºæ¯ä¸ªäºŒè¿›åˆ¶çŠ¶æ€ï¼ˆmskï¼‰ï¼Œè®¡ç®—é€‰çš„é˜¶ä¹˜å’Œä¸ä¸ªæ•°ï¼Œç„¶ååˆ¤æ–­å‰©ä½™æ•°çš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°ï¼Œæ›´æ–°æœ€å°å€¼ã€‚çŠ¶å‹æšä¸¾çš„ä¼˜åŠ¿åœ¨äº**ä»£ç ç»“æ„åŒ–**ï¼Œæ— éœ€é€’å½’ï¼Œé€‚åˆå¤„ç†å°æ•°é‡ç»„åˆé—®é¢˜ã€‚äº®ç‚¹æ˜¯å¯¹â€œé˜¶ä¹˜æ•°é‡å°‘â€è¿™ä¸€å…³é”®è§‚å¯Ÿçš„å……åˆ†åˆ©ç”¨ï¼Œä»£ç é€»è¾‘æ¸…æ™°æ˜“æ‡‚ã€‚  

### é¢˜è§£ä¸‰ï¼šdaniEl_lElEçš„çŠ¶å‹é¢„å¤„ç†è§£æ³•ï¼ˆèµï¼š1ï¼Œä»£ç è´¨é‡é«˜ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£**é¢„å¤„ç†æ‰€æœ‰é˜¶ä¹˜ç»„åˆçš„å’Œ**ï¼Œå°†æ¯ä¸ªçŠ¶æ€çš„é˜¶ä¹˜å’Œå­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œå‡å°‘äº†å¤šç»„æµ‹è¯•ç”¨ä¾‹çš„é‡å¤è®¡ç®—ã€‚å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œåªéœ€æšä¸¾æ‰€æœ‰é¢„å¤„ç†çš„çŠ¶æ€ï¼Œè®¡ç®—å‰©ä½™æ•°çš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°å³å¯ã€‚äº®ç‚¹æ˜¯**é¢„å¤„ç†ä¼˜åŒ–**ï¼Œæé«˜äº†å¤šç»„æ•°æ®çš„å¤„ç†æ•ˆç‡ï¼Œé€‚åˆéœ€è¦é‡å¤è®¡ç®—çš„åœºæ™¯ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. ä¸ºä»€ä¹ˆé€‰æ‹©æšä¸¾é˜¶ä¹˜è€Œä¸æ˜¯æ‰€æœ‰å¼ºå¤§æ•°ï¼Ÿ  
* **åˆ†æ**ï¼š  
  å¼ºå¤§æ•°åŒ…æ‹¬2çš„å¹‚å’Œé˜¶ä¹˜ï¼Œä½†2çš„å¹‚çš„æ•°é‡å¾ˆå¤šï¼ˆ10Â¹Â²æœ‰39ä¸ª2çš„å¹‚ï¼‰ï¼Œæšä¸¾æ‰€æœ‰å¼ºå¤§æ•°çš„ç»„åˆæ˜¯ä¸å¯èƒ½çš„ã€‚è€Œé˜¶ä¹˜çš„æ•°é‡å¾ˆå°‘ï¼ˆ14ä¸ªï¼‰ï¼Œæšä¸¾æ‰€æœ‰é˜¶ä¹˜ç»„åˆï¼ˆ2Â¹â´=16384æ¬¡ï¼‰æ˜¯å¯è¡Œçš„ã€‚å‰©ä½™çš„æ•°ç”¨2çš„å¹‚è¡¨ç¤ºï¼Œå› ä¸ºäºŒè¿›åˆ¶æ‹†åˆ†çš„1çš„ä¸ªæ•°æ˜¯æœ€å°‘çš„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæŠ“ä½é—®é¢˜ä¸­çš„â€œå°‘æ•°æ´¾â€ï¼ˆé˜¶ä¹˜æ•°é‡å°‘ï¼‰æ˜¯è§£é¢˜çš„å…³é”®ã€‚  

### 2. å¦‚ä½•å¤„ç†å‰©ä½™éƒ¨åˆ†çš„æœ€å°è¡¨ç¤ºï¼Ÿ  
* **åˆ†æ**ï¼š  
  å‰©ä½™çš„æ•°ç”¨2çš„å¹‚è¡¨ç¤ºï¼Œæœ€å°‘çš„æ•°é‡å°±æ˜¯å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ª2çš„å¹‚éƒ½æ˜¯ä¸åŒçš„ï¼Œä¸”äºŒè¿›åˆ¶æ‹†åˆ†æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥1çš„ä¸ªæ•°å°±æ˜¯æœ€å°‘çš„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šäºŒè¿›åˆ¶æ‹†åˆ†æ˜¯å¤„ç†2çš„å¹‚å’Œçš„å¸¸ç”¨æŠ€å·§ï¼Œè®°ä½`__builtin_popcount`å‡½æ•°å¯ä»¥å¿«é€Ÿè®¡ç®—1çš„ä¸ªæ•°ã€‚  

### 3. å¦‚ä½•é«˜æ•ˆæšä¸¾é˜¶ä¹˜çš„ç»„åˆï¼Ÿ  
* **åˆ†æ**ï¼š  
  é˜¶ä¹˜çš„æ•°é‡æ˜¯14ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ç”¨**DFS**ï¼ˆé€’å½’å¤„ç†æ¯ä¸ªé˜¶ä¹˜çš„é€‰æˆ–ä¸é€‰ï¼‰æˆ–**çŠ¶å‹æšä¸¾**ï¼ˆäºŒè¿›åˆ¶æ•°è¡¨ç¤ºæ¯ä¸ªé˜¶ä¹˜çš„é€‰æˆ–ä¸é€‰ï¼‰ã€‚ä¸¤ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(2Â¹â´)ï¼Œå¯¹äºt=100ç»„æµ‹è¯•ç”¨ä¾‹æ¥è¯´ï¼Œå®Œå…¨å¯è¡Œã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¯¹äºå°æ•°é‡çš„ç»„åˆæšä¸¾ï¼ŒDFSå’ŒçŠ¶å‹éƒ½æ˜¯æœ‰æ•ˆçš„æ–¹æ³•ï¼Œé€‰æ‹©å“ªç§å–å†³äºä¸ªäººä¹ æƒ¯ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é¢„å¤„ç†**ï¼šæå‰è®¡ç®—å‡ºæ‰€æœ‰å¯èƒ½çš„é˜¶ä¹˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚  
- **æšä¸¾ç»„åˆ**ï¼šå¯¹äºæ•°é‡å°‘çš„å…ƒç´ ï¼Œæšä¸¾æ‰€æœ‰ç»„åˆæ˜¯å¯è¡Œçš„ã€‚  
- **äºŒè¿›åˆ¶æ‹†åˆ†**ï¼šç”¨`__builtin_popcount`å‡½æ•°å¿«é€Ÿè®¡ç®—2çš„å¹‚çš„æ•°é‡ã€‚  
- **è¾¹ç•Œå¤„ç†**ï¼šç¡®ä¿å‰©ä½™çš„æ•°éè´Ÿï¼Œé¿å…æ— æ•ˆç»„åˆã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆçŠ¶å‹æšä¸¾ï¼‰  
* **è¯´æ˜**ï¼š  
  æ­¤ä»£ç æ¥è‡ªDuramenteçš„é¢˜è§£ï¼Œç”¨çŠ¶å‹æšä¸¾14ä¸ªé˜¶ä¹˜çš„ç»„åˆï¼Œè®¡ç®—æ¯ä¸ªç»„åˆçš„é˜¶ä¹˜å’Œï¼Œç„¶åè®¡ç®—å‰©ä½™æ•°çš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°ï¼Œå–æœ€å°å€¼ã€‚ä»£ç ç®€æ´é«˜æ•ˆï¼Œé€‚åˆä½œä¸ºé€šç”¨å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include<bits/stdc++.h>
  using namespace std;
  typedef long long ll;
  
  ll fac[20]; // å­˜å‚¨é˜¶ä¹˜ï¼ˆ1!åˆ°15!ï¼‰
  
  // è®¡ç®—xçš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°
  int cnt(ll x) {
      int res = 0;
      while (x) {
          res += x & 1;
          x >>= 1;
      }
      return res;
  }
  
  int main() {
      // é¢„å¤„ç†é˜¶ä¹˜ï¼ˆ1!åˆ°15!ï¼‰
      fac[0] = 1;
      for (int i = 1; i <= 15; i++) {
          fac[i] = fac[i-1] * i;
      }
      
      int t;
      cin >> t;
      while (t--) {
          ll n;
          cin >> n;
          int ans = cnt(n); // åˆå§‹åŒ–ä¸ºä¸é€‰ä»»ä½•é˜¶ä¹˜çš„æƒ…å†µ
          
          // çŠ¶å‹æšä¸¾15ä¸ªé˜¶ä¹˜çš„ç»„åˆï¼ˆå…¶å®15!è¶…è¿‡1e12ï¼Œä¸å½±å“ï¼‰
          for (int msk = 0; msk < (1 << 15); msk++) {
              ll sum = 0; // é€‰çš„é˜¶ä¹˜å’Œ
              int bits = 0; // é€‰çš„é˜¶ä¹˜ä¸ªæ•°
              for (int i = 0; i < 15; i++) {
                  if (msk & (1 << i)) {
                      sum += fac[i+1]; // i+1çš„é˜¶ä¹˜ï¼ˆå› ä¸ºfac[0]=1æ˜¯0!ï¼‰
                      bits++;
                  }
              }
              if (sum <= n) {
                  ans = min(ans, bits + cnt(n - sum));
              }
          }
          
          cout << ans << endl;
      }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. é¢„å¤„ç†é˜¶ä¹˜ï¼šè®¡ç®—1!åˆ°15!çš„é˜¶ä¹˜ï¼ˆ15!è¶…è¿‡1e12ï¼Œä½†ä¸å½±å“ï¼Œå› ä¸ºsumä¼šè¢«åˆ¤æ–­æ˜¯å¦â‰¤nï¼‰ã€‚  
  2. å¤„ç†æ¯ç»„æµ‹è¯•ç”¨ä¾‹ï¼šåˆå§‹åŒ–ansä¸ºnçš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°ï¼ˆä¸é€‰ä»»ä½•é˜¶ä¹˜çš„æƒ…å†µï¼‰ã€‚  
  3. çŠ¶å‹æšä¸¾ï¼šæšä¸¾æ‰€æœ‰15ä½çš„äºŒè¿›åˆ¶çŠ¶æ€ï¼ˆmskï¼‰ï¼Œè®¡ç®—è¯¥çŠ¶æ€ä¸‹é€‰çš„é˜¶ä¹˜å’Œsumä»¥åŠä¸ªæ•°bitsã€‚å¦‚æœsumâ‰¤nï¼Œåˆ™æ›´æ–°ansä¸ºbitsåŠ ä¸Šn-sumçš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°çš„æœ€å°å€¼ã€‚  
  4. è¾“å‡ºansï¼šæ¯ç»„æµ‹è¯•ç”¨ä¾‹çš„æœ€å°ä¸ªæ•°ã€‚  

### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼ˆEason_ACçš„DFSï¼‰  
* **äº®ç‚¹**ï¼šDFSæšä¸¾é˜¶ä¹˜çš„é€‰æˆ–ä¸é€‰ï¼Œæ€è·¯æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs(int x, int cnt, long long rest) {
      if (x > m) { // å¤„ç†å®Œæ‰€æœ‰é˜¶ä¹˜
          ans = min(ans, cnt + __builtin_popcountll(rest));
          return;
      }
      // é€‰å½“å‰é˜¶ä¹˜ï¼ˆxçš„é˜¶ä¹˜ï¼‰
      if (rest - fac[x] >= 0 && cnt + 1 < ans) {
          dfs(x + 1, cnt + 1, rest - fac[x]);
      }
      // ä¸é€‰å½“å‰é˜¶ä¹˜
      dfs(x + 1, cnt, rest);
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `x`ï¼šå½“å‰å¤„ç†çš„é˜¶ä¹˜ç´¢å¼•ï¼ˆä»1å¼€å§‹ï¼‰ã€‚  
  - `cnt`ï¼šå·²é€‰é˜¶ä¹˜çš„ä¸ªæ•°ã€‚  
  - `rest`ï¼šå‰©ä½™çš„æ•°ã€‚  
  å½“å¤„ç†å®Œæ‰€æœ‰é˜¶ä¹˜ï¼ˆ`x > m`ï¼‰ï¼Œè®¡ç®—`cnt + restçš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°`ï¼Œæ›´æ–°ansã€‚å¦‚æœé€‰å½“å‰é˜¶ä¹˜åå‰©ä½™æ•°éè´Ÿä¸”`cnt+1`å°äºå½“å‰ansï¼ˆå‰ªæï¼‰ï¼Œåˆ™é€’å½’å¤„ç†é€‰çš„æƒ…å†µï¼›å¦åˆ™é€’å½’å¤„ç†ä¸é€‰çš„æƒ…å†µã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDFSä¸­çš„å‰ªæï¼ˆ`cnt + 1 < ans`ï¼‰å¯ä»¥å‡å°‘ä¸å¿…è¦çš„é€’å½’ï¼Œæé«˜æ•ˆç‡ã€‚  

#### é¢˜è§£äºŒï¼ˆDuramenteçš„çŠ¶å‹ï¼‰  
* **äº®ç‚¹**ï¼šçŠ¶å‹æšä¸¾çš„é«˜æ•ˆæ€§ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int msk = 0; msk < (1 << 15); msk++) {
      ll sum = 0;
      int bits = 0;
      for (int i = 0; i < 15; i++) {
          if (msk & (1 << i)) {
              sum += fac[i+1];
              bits++;
          }
      }
      if (sum <= n) {
          ans = min(ans, bits + cnt(n - sum));
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  æšä¸¾æ‰€æœ‰15ä½çš„äºŒè¿›åˆ¶çŠ¶æ€ï¼ˆmskï¼‰ï¼Œæ¯ä¸ªä½è¡¨ç¤ºæ˜¯å¦é€‰å¯¹åº”çš„é˜¶ä¹˜ï¼ˆ`i+1`çš„é˜¶ä¹˜ï¼‰ã€‚è®¡ç®—é€‰çš„é˜¶ä¹˜å’Œ`sum`ä»¥åŠä¸ªæ•°`bits`ï¼Œå¦‚æœ`sum â‰¤ n`ï¼Œåˆ™æ›´æ–°ansä¸º`bits + n-sumçš„äºŒè¿›åˆ¶1çš„ä¸ªæ•°`çš„æœ€å°å€¼ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶å‹æšä¸¾æ˜¯å¤„ç†å°æ•°é‡ç»„åˆçš„æœ‰æ•ˆæ–¹æ³•ï¼Œä»£ç ç®€æ´ã€‚  

#### é¢˜è§£ä¸‰ï¼ˆdaniEl_lElEçš„é¢„å¤„ç†ï¼‰  
* **äº®ç‚¹**ï¼šé¢„å¤„ç†é˜¶ä¹˜å’Œï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int a[15]; // å­˜å‚¨1!åˆ°14!çš„é˜¶ä¹˜
  int k[16385]; // å­˜å‚¨æ¯ä¸ªçŠ¶æ€çš„é˜¶ä¹˜å’Œï¼ˆ2^14=16384ï¼‰
  
  // é¢„å¤„ç†æ‰€æœ‰é˜¶ä¹˜ç»„åˆçš„å’Œ
  for (int i = 0; i < (1 << 14); i++) {
      int sum = 0;
      for (int j = 1; j <= 14; j++) {
          if (i & (1 << (j-1))) {
              sum += a[j];
          }
      }
      k[i] = sum;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  é¢„å¤„ç†æ‰€æœ‰14ä½çš„äºŒè¿›åˆ¶çŠ¶æ€ï¼ˆiï¼‰çš„é˜¶ä¹˜å’Œï¼Œå­˜å‚¨åœ¨`k`æ•°ç»„ä¸­ã€‚å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œåªéœ€æšä¸¾æ‰€æœ‰çŠ¶æ€iï¼Œè®¡ç®—`k[i]`æ˜¯å¦â‰¤nï¼Œç„¶åæ›´æ–°ansã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†å¯ä»¥å‡å°‘é‡å¤è®¡ç®—ï¼Œå¯¹äºå¤šç»„æµ‹è¯•ç”¨ä¾‹æ¥è¯´ï¼Œæ•ˆç‡æ›´é«˜ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### ğŸ® åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶æ‰¾ç§¯æœ¨  
**é£æ ¼**ï¼š8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰ï¼Œç”¨çº¢è‰²åƒç´ å—è¡¨ç¤ºé˜¶ä¹˜ï¼ˆ1!åˆ°14!ï¼Œå¤§å°ä¸ä¸€ï¼‰ï¼Œè“è‰²åƒç´ å—è¡¨ç¤º2çš„å¹‚ï¼ˆæ¯ä¸€ä½å¯¹åº”ä¸€ä¸ª2çš„å¹‚ï¼‰ï¼Œâ€œåƒç´ æ¢é™©å®¶â€ï¼ˆå°äººï¼‰é€ä¸€é€‰æ‹©é˜¶ä¹˜ï¼Œå‰©ä½™æ•°ç”¨è“è‰²å—æ˜¾ç¤ºã€‚  

### ğŸ§© æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
å±•ç¤º**æšä¸¾é˜¶ä¹˜ç»„åˆ**å’Œ**äºŒè¿›åˆ¶æ‹†åˆ†**çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œn=7æ—¶ï¼š  
- æ¢é™©å®¶é€‰æ‹©1!ï¼ˆçº¢è‰²å—ï¼Œ1ï¼‰ï¼Œå‰©ä½™æ•°å˜ä¸º6ï¼ˆ7-1=6ï¼‰ï¼Œå³ä¾§è“è‰²å—æ˜¾ç¤º6çš„äºŒè¿›åˆ¶ï¼ˆ110ï¼Œä¸¤ä¸ªè“è‰²å—ï¼‰ï¼Œæ€»æ•°é‡ä¸º1+2=3ã€‚  
- æ¢é™©å®¶ç»§ç»­é€‰æ‹©3!ï¼ˆçº¢è‰²å—ï¼Œ6ï¼‰ï¼Œå‰©ä½™æ•°å˜ä¸º0ï¼ˆ6-6=0ï¼‰ï¼Œæ€»æ•°é‡ä¸º2+0=2ï¼Œè¿™æ˜¯å½“å‰æœ€å°å€¼ã€‚  
- åŠ¨ç”»æ˜¾ç¤ºâ€œæ‰¾åˆ°æœ€å°å€¼ï¼š2â€ï¼Œå¹¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„â€œå®â€å£°ï¼‰ã€‚  

### ğŸ¯ è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ è½»æ¾å¤å¤çš„å­¦ä¹ æ°›å›´ï¼Œç¬¦åˆé’å°‘å¹´çš„å®¡ç¾ã€‚  
- **éŸ³æ•ˆåé¦ˆ**ï¼šé€‰é˜¶ä¹˜æ—¶æ’­æ”¾â€œå®â€å£°ï¼ŒäºŒè¿›åˆ¶æ‹†åˆ†æ—¶æ’­æ”¾â€œæ»´â€å£°ï¼Œèƒœåˆ©æ—¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼Œå¼ºåŒ–æ“ä½œè®°å¿†ã€‚  
- **äº¤äº’æ§åˆ¶**ï¼šæä¾›â€œå•æ­¥æ‰§è¡Œâ€ï¼ˆæ¯ç‚¹å‡»ä¸€æ¬¡ï¼Œæ¢é™©å®¶å¤„ç†ä¸€ä¸ªé˜¶ä¹˜ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆé€Ÿåº¦å¯è°ƒï¼‰ã€â€œé‡ç½®â€ï¼ˆå›åˆ°åˆå§‹çŠ¶æ€ï¼‰ç­‰æŒ‰é’®ï¼Œè®©å­¦ä¹ è€…è‡ªä¸»æ§åˆ¶åŠ¨ç”»æµç¨‹ã€‚  

### ğŸ“ åŠ¨ç”»å¸§æ­¥éª¤  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å·¦ä¾§ï¼šçº¢è‰²é˜¶ä¹˜å—ï¼ˆ1!åˆ°14!ï¼ŒæŒ‰å¤§å°æ’åˆ—ï¼‰ã€‚  
   - å³ä¾§ï¼šè“è‰²äºŒè¿›åˆ¶å—ï¼ˆåˆå§‹ä¸ºnçš„äºŒè¿›åˆ¶ï¼‰ã€‚  
   - åº•éƒ¨ï¼šæ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®ã€é€Ÿåº¦æ»‘å—ï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»æ¾æ—‹å¾‹ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - æ¢é™©å®¶ç«™åœ¨1!å—å‰ï¼Œæ˜¾ç¤ºæç¤ºâ€œæ˜¯å¦é€‰1!ï¼Ÿâ€ã€‚  

3. **é€‰é˜¶ä¹˜**ï¼š  
   - ç‚¹å‡»â€œå•æ­¥â€ï¼Œæ¢é™©å®¶æ‹¿èµ·1!å—ï¼ˆé«˜äº®ï¼‰ï¼Œå‰©ä½™æ•°å˜ä¸ºn-1!ï¼Œå³ä¾§äºŒè¿›åˆ¶å—æ›´æ–°ä¸ºå‰©ä½™æ•°çš„äºŒè¿›åˆ¶ã€‚  
   - æ’­æ”¾â€œå®â€å£°ã€‚  

4. **å¤„ç†ä¸‹ä¸€ä¸ªé˜¶ä¹˜**ï¼š  
   - æ¢é™©å®¶èµ°åˆ°2!å—å‰ï¼Œé‡å¤æ­¥éª¤3ã€‚  

5. **ç»“æŸæšä¸¾**ï¼š  
   - å½“å¤„ç†å®Œæ‰€æœ‰é˜¶ä¹˜ï¼Œè®¡ç®—æ€»æ•°é‡ï¼ˆé€‰çš„é˜¶ä¹˜ä¸ªæ•°+äºŒè¿›åˆ¶1çš„ä¸ªæ•°ï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•é¡¶éƒ¨ï¼Œæ›´æ–°æœ€å°å€¼ã€‚  

6. **é‡ç½®**ï¼š  
   - ç‚¹å‡»â€œé‡ç½®â€ï¼Œæ¢é™©å®¶å›åˆ°èµ·ç‚¹ï¼Œé˜¶ä¹˜å—å’ŒäºŒè¿›åˆ¶å—æ¢å¤åˆå§‹çŠ¶æ€ã€‚  

### ğŸ—£ï¸ æ—ç™½æç¤º  
- â€œç°åœ¨å¤„ç†1!ï¼Œé€‰è¿˜æ˜¯ä¸é€‰ï¼Ÿâ€  
- â€œé€‰äº†1!ï¼Œå‰©ä½™æ•°å˜ä¸º6ï¼ŒäºŒè¿›åˆ¶æ˜¯110ï¼Œéœ€è¦2ä¸ª2çš„å¹‚ã€‚â€  
- â€œå¤„ç†å®Œæ‰€æœ‰é˜¶ä¹˜ï¼Œæ€»æ•°é‡æ˜¯2ï¼Œè¿™æ˜¯å½“å‰æœ€å°å€¼ï¼â€  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ§  é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æšä¸¾å°æ•°é‡ç»„åˆ+å‰©ä½™éƒ¨åˆ†çš„é«˜æ•ˆè¡¨ç¤ºï¼Œé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š  
1. åˆ†è§£æ•°ä¸ºæœ€å°‘çš„ç‰¹å®šæ•°ä¹‹å’Œï¼ˆæ¯”å¦‚é˜¶ä¹˜ã€è´¨æ•°ç­‰ï¼‰ã€‚  
2. ç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å…ƒç´ æ•°é‡å°‘ï¼Œå¯æšä¸¾ã€‚  
3. äºŒè¿›åˆ¶æ‹†åˆ†é—®é¢˜ï¼Œæ¯”å¦‚æ±‚æœ€å°‘çš„2çš„å¹‚ä¹‹å’Œã€‚  

### ğŸ“š ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1009 é˜¶ä¹˜ä¹‹å’Œ**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¦æ±‚ç”¨æœ€å°‘çš„é˜¶ä¹˜ä¹‹å’Œç­‰äºnï¼Œæ€è·¯æ˜¯æšä¸¾é˜¶ä¹˜ç»„åˆï¼Œç±»ä¼¼æœ¬é¢˜çš„æšä¸¾é˜¶ä¹˜éƒ¨åˆ†ï¼Œå·©å›ºâ€œæšä¸¾å°æ•°é‡ç»„åˆâ€çš„æŠ€å·§ã€‚  
2. **æ´›è°· P1010 å¹‚æ¬¡æ–¹**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¦æ±‚å°†æ•°è¡¨ç¤ºä¸º2çš„å¹‚çš„å’Œï¼Œç”¨æœ€å°‘çš„é¡¹ï¼Œæ€è·¯æ˜¯äºŒè¿›åˆ¶æ‹†åˆ†ï¼Œç±»ä¼¼æœ¬é¢˜çš„å‰©ä½™éƒ¨åˆ†å¤„ç†ï¼Œå·©å›ºâ€œäºŒè¿›åˆ¶æ‹†åˆ†â€çš„æŠ€å·§ã€‚  
3. **æ´›è°· CF1646C åŸé¢˜**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå°±æ˜¯æœ¬é¢˜ï¼Œå·©å›ºâ€œæšä¸¾é˜¶ä¹˜+äºŒè¿›åˆ¶æ‹†åˆ†â€çš„å®Œæ•´æ€è·¯ã€‚  
4. **æ´›è°· P2016 æˆ˜ç•¥æ¸¸æˆ**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦é€‰æœ€å°‘çš„ç‚¹è¦†ç›–æ‰€æœ‰è¾¹ï¼Œæ˜¯æœ€å°ç‚¹è¦†ç›–é—®é¢˜ï¼Œå¯ç”¨çŠ¶å‹æšä¸¾ï¼Œç±»ä¼¼æœ¬é¢˜çš„çŠ¶å‹æ€è·¯ï¼Œæ‹“å±•â€œçŠ¶å‹æšä¸¾â€çš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
- **Eason_ACçš„ç»éªŒ**ï¼šâ€œé˜¶ä¹˜çš„æ•°é‡å¾ˆå°‘ï¼Œæ‰€ä»¥DFSæšä¸¾æ˜¯å¯è¡Œçš„ã€‚â€ è¿™æé†’æˆ‘ä»¬ï¼Œåœ¨è§£å†³é—®é¢˜æ—¶ï¼Œè¦å…ˆè§‚å¯Ÿæ•°æ®èŒƒå›´ï¼Œæ‰¾åˆ°æ•°é‡å°‘çš„å…ƒç´ ï¼Œæšä¸¾å®ƒä»¬çš„ç»„åˆã€‚  
- **Duramenteçš„ç»éªŒ**ï¼šâ€œçŠ¶å‹æšä¸¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(2Â¹â´Ã—log n)ï¼Œå®Œå…¨å¯è¡Œã€‚â€ è¿™è¯´æ˜ï¼Œå¯¹äºå°æ•°é‡çš„ç»„åˆï¼ŒçŠ¶å‹æšä¸¾æ˜¯é«˜æ•ˆçš„ã€‚  
- **daniEl_lElEçš„ç»éªŒ**ï¼šâ€œé¢„å¤„ç†é˜¶ä¹˜å’Œå¯ä»¥å‡å°‘é‡å¤è®¡ç®—ã€‚â€ è¿™æé†’æˆ‘ä»¬ï¼Œå¯¹äºå¤šç»„æµ‹è¯•ç”¨ä¾‹ï¼Œé¢„å¤„ç†å¯ä»¥æé«˜æ•ˆç‡ã€‚  


## ğŸ‰ ç»“è®º  
æœ¬æ¬¡åˆ†æäº†â€œFactorials and Powers of Twoâ€é¢˜çš„è§£æ³•ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯**æšä¸¾é˜¶ä¹˜ç»„åˆ+äºŒè¿›åˆ¶æ‹†åˆ†**ã€‚é€šè¿‡ä¼˜è´¨é¢˜è§£çš„åˆ†æï¼ŒæŒæ¡äº†DFSå’ŒçŠ¶å‹æšä¸¾çš„æ–¹æ³•ï¼Œä»¥åŠäºŒè¿›åˆ¶æ‹†åˆ†çš„æŠ€å·§ã€‚å¯è§†åŒ–åŠ¨ç”»å¸®åŠ©ç›´è§‚ç†è§£ç®—æ³•è¿‡ç¨‹ï¼Œæ‹“å±•ç»ƒä¹ å¸®åŠ©å·©å›ºçŸ¥è¯†ç‚¹ã€‚å¸Œæœ›å¤§å®¶é€šè¿‡æœ¬æ¬¡å­¦ä¹ ï¼Œèƒ½ä¸¾ä¸€åä¸‰ï¼Œè§£å†³ç±»ä¼¼çš„ç»„åˆä¼˜åŒ–é—®é¢˜ï¼ğŸ’ª  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š253.74ç§’
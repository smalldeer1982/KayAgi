# é¢˜ç›®ä¿¡æ¯

# Maximum Sum

## é¢˜ç›®æè¿°

You have an array $ a $ of $ n $ integers.

You perform exactly $ k $ operations on it. In one operation, you select any contiguous subarray of the array $ a $ (possibly empty) and insert the sum of this subarray anywhere in the array.

Your task is to find the maximum possible sum of the array after $ k $ such operations.

As this number can be very large, output the answer modulo $ 10^9 + 7 $ .

Reminder: the remainder of a number $ x $ modulo $ p $ is the smallest non-negative $ y $ such that there exists an integer $ q $ and $ x = p \cdot q + y $ .

## è¯´æ˜/æç¤º

In the first test case, it is advantageous to take an empty subarray of the array twice and insert the sum of the empty subarray (zero) anywhere, then the sum of the resulting array will be $ (-4) + (-7) + 0 + 0 = -11 $ , modulo $ 10^9 + 7 $ this is $ 999\,999\,996 $ .

In the second test case, it is advantageous to take the sum of the entire array three times and place it anywhere in the array, then one of the possible sequences of actions: \[ $ 2, 2, 8 $ \] $ \rightarrow $ \[ $ 2, 2, 8, 12 $ \] $ \rightarrow $ \[ $ 2, 2, 8, 12, 24 $ \] $ \rightarrow $ \[ $ 2, 2, 8, 12, 24, 48 $ \], the sum of the final array is $ 2 + 2 + 8 + 12 + 24 + 48 = 96 $ .

In the fourth test case, it is advantageous to take a subarray of the array consisting of the first three numbers (i.e. consisting of the numbers $ 4, -2 $ and $ 8 $ ) and insert its sum at the beginning of the array, thereby obtaining the array \[ $ 10, 4, -2, 8, -12, 9 $ \], the sum of this array is $ 17 $ .

In the seventh test case, it will always be advantageous for us to take an empty subarray of the array. In this case, the sum of the resulting array will not differ from the sum of the original. The answer will be the sum of the original array, taken modulo â€” $ 42 $ , because $ (-6 \cdot (10^9 + 7) + 42 = -6\,000\,000\,000) $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
12
2 2
-4 -7
3 3
2 2 8
1 7
7
5 1
4 -2 8 -12 9
7 4
8 14 -9 6 0 -1 3
7 100
5 3 -8 12 -5 -9 3
6 1000
-1000000000 -1000000000 -1000000000 -1000000000 -1000000000 -1000000000
2 1
1000000000 8
5 4
0 0 0 0 0
6 10
48973 757292 58277 -38574 27475 999984
7 1
-1000 1000 -1000 1000 -1000 1000 -1000
10 10050
408293874 -3498597 7374783 295774930 -48574034 26623784 498754833 -294875830 283045804 85938045```

### è¾“å‡º

```
999999996
96
896
17
351
716455332
42
2
0
897909241
0
416571966```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šMaximum Sum æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè´ªå¿ƒç­–ç•¥ + æœ€å¤§å­æ®µå’Œï¼ˆKadaneç®—æ³•ï¼‰ + å¿«é€Ÿå¹‚ä¼˜åŒ–  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œMaximum Sumâ€çš„å…³é”®æ˜¯**è´ªå¿ƒ**â€”â€”æ¯æ¬¡æ“ä½œéƒ½è¦æ’å…¥èƒ½è®©æ€»å’Œå¢é•¿æœ€å¿«çš„æ•°ã€‚ä»€ä¹ˆæ•°èƒ½è®©æ€»å’Œå¢é•¿æœ€å¿«ï¼Ÿå½“ç„¶æ˜¯å½“å‰æ•°ç»„çš„**æœ€å¤§å­æ®µå’Œ**ï¼æ¯”å¦‚ï¼Œå‡è®¾åŸæ•°ç»„æœ‰ä¸€ä¸ªå­æ®µå’Œä¸º10ï¼ˆæœ€å¤§ï¼‰ï¼Œæ’å…¥10åï¼Œä¸‹æ¬¡è¿™ä¸ªå­æ®µçš„å’Œä¼šå˜æˆ20ï¼ˆ10+10ï¼‰ï¼Œå†æ’å…¥20ï¼Œå­æ®µå’Œå˜æˆ40â€¦â€¦è¿™æ ·kæ¬¡æ“ä½œåï¼Œè¿™ä¸ªå­æ®µçš„å’Œä¼šå˜æˆ10Ã—2áµï¼Œè´¡çŒ®çš„æ€»å’Œæ˜¯10Ã—(2áµ - 1)ï¼ˆç­‰æ¯”æ•°åˆ—æ±‚å’Œï¼‰ã€‚  

**æ ¸å¿ƒé€»è¾‘**ï¼š  
1. ç”¨**Kadaneç®—æ³•**ï¼ˆO(n)æ—¶é—´ï¼‰æ‰¾åˆ°åŸæ•°ç»„çš„æœ€å¤§å­æ®µå’Œ`max_sub`ï¼ˆå¦‚æœ`max_sub`å°äº0ï¼Œå°±æ’å…¥0ï¼Œå› ä¸ºæ’å…¥è´Ÿæ•°ä¼šè®©æ€»å’Œå˜å°ï¼‰ã€‚  
2. åŸæ•°ç»„çš„æ€»å’Œæ˜¯`total`ï¼Œkæ¬¡æ“ä½œåçš„æ€»å’Œæ˜¯`total + max_sub Ã— (2áµ - 1)`ï¼ˆæ¨¡1e9+7ï¼‰ã€‚  
3. ç”¨**å¿«é€Ÿå¹‚**è®¡ç®—2áµï¼Œé¿å…è¶…æ—¶ï¼ˆO(logk)æ—¶é—´ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä¼šç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºæ•°ç»„å…ƒç´ ï¼ˆæ¯”å¦‚çº¢è‰²æ–¹å—ä»£è¡¨æ­£æ•°ï¼Œè“è‰²ä»£è¡¨è´Ÿæ•°ï¼‰ï¼Œç”¨é»„è‰²é«˜äº®æœ€å¤§å­æ®µã€‚æ’å…¥æ“ä½œæ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªç»¿è‰²æ–¹å—ï¼ˆä»£è¡¨`max_sub`ï¼‰æ»‘å…¥æœ€å¤§å­æ®µçš„ä½ç½®ï¼ŒåŒæ—¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚æ¯æ¬¡ç¿»å€æ—¶ï¼Œé»„è‰²é«˜äº®åŒºåŸŸä¼šå˜å¤§ï¼ŒéŸ³æ•ˆå˜æˆâ€œå—¡â€ï¼Œè®©ä½ ç›´è§‚çœ‹åˆ°â€œå­æ®µå’Œç¿»å€â€çš„è¿‡ç¨‹ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šKazamaRuriï¼Œèµ6ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯**æåº¦æ¸…æ™°**ï¼Œç›´æ¥æŠ“ä½äº†â€œè´ªå¿ƒ+æœ€å¤§å­æ®µå’Œ+å¿«é€Ÿå¹‚â€çš„æ ¸å¿ƒã€‚ä»£ç **ç®€æ´åˆ°æè‡´**â€”â€”ç”¨Kadaneç®—æ³•è®¡ç®—`max_sub`ï¼ˆéå†æ•°ç»„ï¼Œç»´æŠ¤å½“å‰å­æ®µå’Œï¼Œæ›´æ–°æœ€å¤§å€¼ï¼‰ï¼Œç”¨å¿«é€Ÿå¹‚è®¡ç®—2áµï¼Œæœ€åä¸€æ­¥å…¬å¼ç›´æ¥å¾—å‡ºç­”æ¡ˆã€‚æ¨¡è¿ç®—å¤„ç†å¾—éå¸¸ä¸¥è°¨ï¼ˆæ¯”å¦‚`(all_sum%mod - ans%mod + mod)%mod`ï¼‰ï¼Œé¿å…äº†è´Ÿæ•°é—®é¢˜ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä»½â€œä¸€çœ‹å°±æ‡‚â€çš„æ¨¡æ¿çº§ä»£ç ã€‚  

### é¢˜è§£äºŒï¼ˆæ¥æºï¼šoyohamï¼Œèµ5ï¼‰  
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„**è¾“å…¥ä¼˜åŒ–**å€¼å¾—å­¦ä¹ â€”â€”ç”¨`read()`å‡½æ•°ä»£æ›¿`cin`ï¼Œå¤„ç†å¤§æ•°æ®æ—¶æ›´å¿«ã€‚ä»£ç ç»“æ„å’Œé¢˜è§£ä¸€ç±»ä¼¼ï¼Œä½†`dp`æ•°ç»„çš„ä½¿ç”¨æ›´æ˜ç¡®ï¼ˆ`dp[i]`è¡¨ç¤ºä»¥iç»“å°¾çš„æœ€å¤§å­æ®µå’Œï¼‰ï¼Œé€»è¾‘æ›´ç›´è§‚ã€‚å¦å¤–ï¼Œä½œè€…æåˆ°â€œä¸ç”¨å¿«é€Ÿå¹‚å¥½åƒä¹Ÿèƒ½è¿‡â€ï¼Œä½†å®é™…ä¸Šå¿«é€Ÿå¹‚æ˜¯å¤„ç†å¤§kçš„å…³é”®ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ã€‚  

### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šcute_overmindï¼Œèµ4ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**æ¨¡å—åŒ–è®¾è®¡**å¾ˆå¥½â€”â€”æŠŠè§£é¢˜é€»è¾‘æ”¾åœ¨`solve()`å‡½æ•°é‡Œï¼Œä»£ç å¯è¯»æ€§é«˜ã€‚`qp()`å‡½æ•°ï¼ˆå¿«é€Ÿå¹‚ï¼‰çš„å®ç°å¾ˆæ ‡å‡†ï¼Œæ³¨é‡Šæ¸…æ™°ã€‚ä½œè€…ç‰¹åˆ«å¼ºè°ƒäº†â€œå°†æœ€å¤§å­æ®µå’Œæ’å…¥åˆ°å…¶å†…éƒ¨â€çš„è´ªå¿ƒç­–ç•¥ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆè¿™æ ·èƒ½è®©ä¸‹æ¬¡çš„å­æ®µå’Œç¿»å€ï¼Œè¿™ç‚¹å¯¹ç†è§£æ€è·¯å¾ˆæœ‰å¸®åŠ©ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šä¸ºä»€ä¹ˆè´ªå¿ƒç­–ç•¥æ˜¯æ­£ç¡®çš„ï¼Ÿ**  
* **åˆ†æ**ï¼šå‡è®¾å½“å‰æœ€å¤§å­æ®µå’Œæ˜¯`S`ï¼Œæ’å…¥`S`åˆ°è¯¥å­æ®µä¸­ï¼Œæ–°çš„å­æ®µå’Œæ˜¯`S+S=2S`ï¼Œè¿™æ˜¯ä¸‹æ¬¡æ“ä½œèƒ½å¾—åˆ°çš„æœ€å¤§å­æ®µå’Œï¼ˆå› ä¸ºå…¶ä»–å­æ®µçš„å’Œä¸ä¼šè¶…è¿‡`S`ï¼‰ã€‚è¿™æ ·kæ¬¡æ“ä½œåï¼Œ`S`ä¼šå˜æˆ`SÃ—2áµ`ï¼Œè´¡çŒ®çš„æ€»å’Œæ˜¯`SÃ—(2áµ - 1)`ã€‚å¦‚æœ`S`å°äº0ï¼Œæ’å…¥0ï¼ˆç©ºå­æ•°ç»„ï¼‰ï¼Œæ€»å’Œä¸å˜ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒç­–ç•¥çš„æ ¸å¿ƒæ˜¯â€œæ¯æ¬¡é€‰å½“å‰æœ€ä¼˜ï¼Œä¸å½±å“æœªæ¥æœ€ä¼˜â€ã€‚  

### 2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•è®¡ç®—æœ€å¤§å­æ®µå’Œï¼Ÿ**  
* **åˆ†æ**ï¼šç”¨Kadaneç®—æ³•ï¼šéå†æ•°ç»„ï¼Œç»´æŠ¤`current_sum`ï¼ˆä»¥å½“å‰å…ƒç´ ç»“å°¾çš„æœ€å¤§å­æ®µå’Œï¼‰ï¼Œå¦‚æœ`current_sum`å°äº0ï¼Œå°±é‡ç½®ä¸º0ï¼ˆå› ä¸ºåŠ ä¸Šå½“å‰å…ƒç´ ä¼šæ›´å°ï¼‰ï¼Œç„¶åæ›´æ–°`max_sub`ã€‚æ¯”å¦‚æ•°ç»„`[-4,-7]`ï¼Œ`current_sum`ä¼šæ˜¯-4â†’é‡ç½®ä¸º0â†’-7â†’é‡ç½®ä¸º0ï¼Œ`max_sub`æ˜¯0ï¼ˆæ’å…¥0ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šKadaneç®—æ³•æ˜¯å¤„ç†æœ€å¤§å­æ®µå’Œçš„ç»å…¸ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦O(n)ã€‚  

### 3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•å¤„ç†æ¨¡è¿ç®—ï¼Ÿ**  
* **åˆ†æ**ï¼šæ¨¡è¿ç®—çš„è§„åˆ™æ˜¯`(a + b) % mod`ã€`(a Ã— b) % mod`ï¼Œä½†è¦æ³¨æ„è´Ÿæ•°çš„æƒ…å†µã€‚æ¯”å¦‚`(all_sum - ans) % mod`å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œéœ€è¦åŠ ä¸Š`mod`å†å–æ¨¡ï¼ˆ`(all_sum%mod - ans%mod + mod)%mod`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¨¡è¿ç®—ä¸­ï¼Œè´Ÿæ•°è¦â€œåŠ æ¨¡è½¬æ­£â€ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†KazamaRuriã€oyohamç­‰é¢˜è§£çš„æ€è·¯ï¼Œæ˜¯ä¸€ä»½æ¸…æ™°ã€é«˜æ•ˆçš„æ¨¡æ¿ä»£ç ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  using namespace std;

  const int MOD = 1e9 + 7;
  typedef long long ll;

  ll qp(ll x, int y) { // å¿«é€Ÿå¹‚è®¡ç®—x^y mod MOD
      ll res = 1;
      while (y) {
          if (y & 1) res = res * x % MOD;
          x = x * x % MOD;
          y >>= 1;
      }
      return res;
  }

  int main() {
      int T;
      cin >> T;
      while (T--) {
          int n, k;
          cin >> n >> k;
          ll total = 0, max_sub = 0, current = 0;
          for (int i = 0; i < n; i++) {
              ll a;
              cin >> a;
              total = (total + a) % MOD; // åŸæ•°ç»„æ€»å’Œ
              current = max(a, current + a); // Kadaneç®—æ³•
              max_sub = max(max_sub, current);
          }
          // è®¡ç®—ç­”æ¡ˆï¼štotal + max_sub*(2^k - 1) mod MOD
          ll pow2k = qp(2, k);
          ll ans = (total + max_sub * (pow2k - 1 + MOD) % MOD) % MOD;
          // å¤„ç†totalä¸ºè´Ÿæ•°çš„æƒ…å†µï¼ˆæ¯”å¦‚åŸæ•°ç»„å’Œä¸ºè´Ÿï¼‰
          ans = (ans + MOD) % MOD;
          cout << ans << endl;
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–æµ‹è¯•ç”¨ä¾‹æ•°`T`ï¼Œå¾ªç¯å¤„ç†æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚  
  2. è¯»å–`n`å’Œ`k`ï¼Œéå†æ•°ç»„è®¡ç®—`total`ï¼ˆåŸæ•°ç»„æ€»å’Œï¼‰å’Œ`max_sub`ï¼ˆæœ€å¤§å­æ®µå’Œï¼‰ã€‚  
  3. ç”¨å¿«é€Ÿå¹‚è®¡ç®—`2^k`ï¼Œç„¶åä»£å…¥å…¬å¼è®¡ç®—ç­”æ¡ˆã€‚  
  4. å¤„ç†æ¨¡è¿ç®—ï¼Œç¡®ä¿ç»“æœä¸ºéè´Ÿæ•°ã€‚  


### é¢˜è§£ä¸€ï¼ˆKazamaRuriï¼‰äº®ç‚¹èµæ  
* **äº®ç‚¹**ï¼šä»£ç ç®€æ´ï¼Œé€»è¾‘ç›´æ¥ï¼Œæ²¡æœ‰å†—ä½™ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 1; i <= n; i++) {
      sum = sum + a[i];
      ans = max(ans, sum);
      sum = max(sum, 0ll);
      all_sum = all_sum + a[i];
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯Kadaneç®—æ³•çš„æ ¸å¿ƒï¼š`sum`ç»´æŠ¤å½“å‰å­æ®µå’Œï¼Œå¦‚æœ`sum`å°äº0ï¼Œå°±é‡ç½®ä¸º0ï¼ˆ`max(sum, 0ll)`ï¼‰ï¼Œç„¶åæ›´æ–°`ans`ï¼ˆæœ€å¤§å­æ®µå’Œï¼‰ã€‚åŒæ—¶è®¡ç®—`all_sum`ï¼ˆåŸæ•°ç»„æ€»å’Œï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šKadaneç®—æ³•çš„å…³é”®æ˜¯â€œæ”¾å¼ƒå½“å‰å­æ®µå¦‚æœå®ƒçš„å’Œä¸ºè´Ÿâ€ã€‚  


### é¢˜è§£äºŒï¼ˆoyohamï¼‰äº®ç‚¹èµæ  
* **äº®ç‚¹**ï¼šè¾“å…¥ä¼˜åŒ–ï¼Œå¤„ç†å¤§æ•°æ®æ›´å¿«ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  inline ll read() {
      ll x = 0;
      short f = 1;
      char c = getchar();
      while (c > 57 || c < 48) {
          if (c == 45) f = -1;
          c = getchar();
      }
      while (c < 58 && c > 47) {
          x = (x << 1) + (x << 3) + (c ^ 48);
          c = getchar();
      }
      return x * f;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š`read()`å‡½æ•°ç”¨`getchar()`è¯»å–å­—ç¬¦ï¼Œæ‰‹åŠ¨è½¬æ¢ä¸ºæ•°å­—ï¼Œæ¯”`cin`å¿«å¾—å¤šã€‚å¯¹äº`n`å¾ˆå¤§çš„æƒ…å†µï¼ˆæ¯”å¦‚2e5ï¼‰ï¼Œè¿™ç§ä¼˜åŒ–å¾ˆæœ‰å¿…è¦ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾“å…¥ä¼˜åŒ–æ˜¯ç«èµ›ä¸­çš„å¸¸ç”¨æŠ€å·§ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ æ¢é™©å®¶ï¼šå¯»æ‰¾æœ€å¤§å­æ®µå’Œ**ï¼ˆä»¿FCæ¸¸æˆé£æ ¼ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤ºä¸€ä¸ªåƒç´ åŒ–æ•°ç»„ï¼ˆæ¯”å¦‚10ä¸ªåƒç´ å—ï¼Œçº¢è‰²ä»£è¡¨æ­£æ•°ï¼Œè“è‰²ä»£è¡¨è´Ÿæ•°ï¼‰ï¼Œé¡¶éƒ¨æœ‰â€œæ§åˆ¶é¢æ¿â€ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
2. **Kadaneç®—æ³•æ¼”ç¤º**ï¼šä¸€ä¸ªåƒç´ åŒ–çš„â€œæ¢é™©å®¶â€ï¼ˆé»„è‰²å°äººï¼‰ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œæ¯èµ°ä¸€æ­¥ï¼Œå½“å‰å­æ®µå’Œç”¨ç»¿è‰²æ¡æ˜¾ç¤ºã€‚å¦‚æœå½“å‰å­æ®µå’Œä¸ºè´Ÿï¼Œæ¢é™©å®¶ä¼šâ€œé‡ç½®â€ï¼ˆç»¿è‰²æ¡æ¶ˆå¤±ï¼‰ï¼Œç„¶åç»§ç»­å‰è¿›ã€‚æ‰¾åˆ°æœ€å¤§å­æ®µåï¼Œè¯¥å­æ®µç”¨é»„è‰²é«˜äº®ã€‚  
3. **æ’å…¥æ“ä½œæ¼”ç¤º**ï¼šä¸€ä¸ªç»¿è‰²åƒç´ å—ï¼ˆä»£è¡¨`max_sub`ï¼‰æ»‘å…¥æœ€å¤§å­æ®µçš„ä½ç½®ï¼ŒåŒæ—¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚æ’å…¥åï¼Œæœ€å¤§å­æ®µçš„å’Œå˜æˆä¸¤å€ï¼ˆé»„è‰²é«˜äº®åŒºåŸŸå˜å¤§ï¼‰ã€‚  
4. **kæ¬¡æ“ä½œæ¼”ç¤º**ï¼šé‡å¤æ’å…¥æ“ä½œï¼Œæ¯æ¬¡æ’å…¥åï¼Œæœ€å¤§å­æ®µå’Œç¿»å€ï¼ŒéŸ³æ•ˆå˜æˆâ€œå—¡â€ã€‚kæ¬¡æ“ä½œåï¼Œæ˜¾ç¤ºæœ€ç»ˆæ•°ç»„å’Œï¼ˆçº¢è‰²æ•°å­—ï¼‰ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆã€‚  

### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ã€‚  
- **éŸ³æ•ˆåé¦ˆ**ï¼šç”¨ä¸åŒçš„éŸ³æ•ˆå¼ºåŒ–å…³é”®æ“ä½œï¼ˆæ’å…¥ã€ç¿»å€ã€èƒœåˆ©ï¼‰ï¼Œå¸®åŠ©è®°å¿†ã€‚  
- **å¯è§†åŒ–å˜åŒ–**ï¼šé€šè¿‡é¢œè‰²å’Œå½¢çŠ¶çš„å˜åŒ–ï¼Œç›´è§‚å±•ç¤ºâ€œæœ€å¤§å­æ®µå’Œç¿»å€â€çš„è¿‡ç¨‹ï¼Œè®©æŠ½è±¡çš„ç®—æ³•å˜å¾—å…·ä½“ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
- **æœ€å¤§å­æ®µå’Œ**ï¼šé€‚ç”¨äºâ€œå¯»æ‰¾è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œâ€çš„é—®é¢˜ï¼ˆå¦‚æ´›è°·P1115ï¼‰ã€‚  
- **è´ªå¿ƒç­–ç•¥**ï¼šé€‚ç”¨äºâ€œæ¯æ¬¡é€‰å½“å‰æœ€ä¼˜â€çš„é—®é¢˜ï¼ˆå¦‚æ´›è°·P2016æˆ˜ç•¥æ¸¸æˆï¼‰ã€‚  
- **å¿«é€Ÿå¹‚**ï¼šé€‚ç”¨äºâ€œè®¡ç®—å¤§æ•°çš„å¹‚æ¬¡â€çš„é—®é¢˜ï¼ˆå¦‚æ´›è°·P1226å¿«é€Ÿå¹‚æ¨¡æ¿ï¼‰ã€‚  

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1115** - æœ€å¤§å­æ®µå’Œ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯æœ¬é¢˜çš„åŸºç¡€ï¼Œå¿…é¡»æŒæ¡Kadaneç®—æ³•ã€‚  
2. **æ´›è°· P2016** - æˆ˜ç•¥æ¸¸æˆ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦è´ªå¿ƒç­–ç•¥ï¼Œé€‰æ‹©æœ€ä¼˜çš„æ”¾ç½®ç‚¹ï¼Œé”»ç‚¼â€œå½“å‰æœ€ä¼˜â€çš„æ€ç»´ã€‚  
3. **æ´›è°· P3372** - çº¿æ®µæ ‘æ¨¡æ¿1  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šçº¿æ®µæ ‘æ˜¯å¤„ç†åŒºé—´æŸ¥è¯¢çš„å·¥å…·ï¼Œæœ¬é¢˜çš„æœ€å¤§å­æ®µå’Œä¹Ÿå¯ä»¥ç”¨çº¿æ®µæ ‘å®ç°ï¼ˆæ‹“å±•æ€è·¯ï¼‰ã€‚  
4. **æ´›è°· P1048** - é‡‡è¯  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œä½†éœ€è¦é€‰æ‹©æœ€ä¼˜è§£ï¼Œå’Œè´ªå¿ƒç­–ç•¥æœ‰ç›¸ä¼¼ä¹‹å¤„ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªKazamaRuriï¼‰**ï¼šâ€œæ¨¡è¿ç®—æ—¶ï¼Œä¸€å®šè¦æ³¨æ„è´Ÿæ•°çš„æƒ…å†µï¼Œæ¯”å¦‚`(all_sum - ans) % mod`å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œéœ€è¦åŠ ä¸Š`mod`å†å–æ¨¡ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆé‡è¦ã€‚æ¨¡è¿ç®—ä¸­ï¼Œè´Ÿæ•°çš„å¤„ç†æ˜¯å¸¸è§çš„å‘ï¼Œæ¯”å¦‚åŸæ•°ç»„å’Œä¸ºè´Ÿæ—¶ï¼Œ`total % MOD`å¯èƒ½ä¸ºè´Ÿï¼Œè¿™æ—¶å€™éœ€è¦åŠ ä¸Š`MOD`å†å–æ¨¡ï¼ˆ`(total + MOD) % MOD`ï¼‰ã€‚  


## ç»“è¯­  
æœ¬æ¬¡åˆ†æçš„â€œMaximum Sumâ€é¢˜ï¼Œæ ¸å¿ƒæ˜¯**è´ªå¿ƒ+æœ€å¤§å­æ®µå’Œ+å¿«é€Ÿå¹‚**ã€‚é€šè¿‡è¿™ä»½æŒ‡å—ï¼Œä½ åº”è¯¥æŒæ¡äº†ï¼š  
- è´ªå¿ƒç­–ç•¥çš„æ­£ç¡®æ€§è¯æ˜ï¼›  
- Kadaneç®—æ³•çš„å®ç°ï¼›  
- å¿«é€Ÿå¹‚çš„åº”ç”¨ï¼›  
- æ¨¡è¿ç®—çš„å¤„ç†æŠ€å·§ã€‚  

è®°ä½ï¼Œç¼–ç¨‹çš„å…³é”®æ˜¯**ç†è§£æ€è·¯**ï¼Œè€Œä¸æ˜¯æ­»è®°ä»£ç ã€‚å¤šåšç»ƒä¹ ï¼Œå¤šæ€è€ƒï¼Œä½ ä¼šè¶Šæ¥è¶Šå‰å®³ï¼ğŸ’ª  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼

---
å¤„ç†ç”¨æ—¶ï¼š130.54ç§’
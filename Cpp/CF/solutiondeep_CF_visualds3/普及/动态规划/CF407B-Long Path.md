# é¢˜ç›®ä¿¡æ¯

# Long Path

## é¢˜ç›®æè¿°

One day, little Vasya found himself in a maze consisting of $ (n+1) $ rooms, numbered from $ 1 $ to $ (n+1) $ . Initially, Vasya is at the first room and to get out of the maze, he needs to get to the $ (n+1) $ -th one.

The maze is organized as follows. Each room of the maze has two one-way portals. Let's consider room number $ i $ $ (1<=i<=n) $ , someone can use the first portal to move from it to room number $ (i+1) $ , also someone can use the second portal to move from it to room number $ p_{i} $ , where $ 1<=p_{i}<=i $ .

In order not to get lost, Vasya decided to act as follows.

- Each time Vasya enters some room, he paints a cross on its ceiling. Initially, Vasya paints a cross at the ceiling of room $ 1 $ .
- Let's assume that Vasya is in room $ i $ and has already painted a cross on its ceiling. Then, if the ceiling now contains an odd number of crosses, Vasya uses the second portal (it leads to room $ p_{i} $ ), otherwise Vasya uses the first portal.

Help Vasya determine the number of times he needs to use portals to get to room $ (n+1) $ in the end.

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
1 2
```

### è¾“å‡º

```
4
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4
1 1 2 3
```

### è¾“å‡º

```
20
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
5
1 1 1 1 1
```

### è¾“å‡º

```
62
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šLong Path æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œLong Pathâ€çš„å…³é”®æ˜¯**åŠ¨æ€è§„åˆ’**â€”â€”å®ƒåƒâ€œçˆ¬æ¥¼æ¢¯â€ä¸€æ ·ï¼Œæ¯ä¸€æ­¥çš„ç»“æœä¾èµ–äºå‰é¢çš„æ­¥éª¤ï¼Œé€šè¿‡é€’æ¨å…³ç³»é€æ­¥ç®—å‡ºæœ€ç»ˆç­”æ¡ˆã€‚  

### æ ¸å¿ƒé—®é¢˜ä¸ç®—æ³•åº”ç”¨  
é¢˜ç›®è¦æ±‚ä»æˆ¿é—´1èµ°åˆ°n+1ï¼Œæ¯æ¬¡è¿›å…¥æˆ¿é—´ä¼šæ ‡è®°æ¬¡æ•°ï¼ˆå¥‡æ•°ç”¨ç¬¬äºŒä¸ªportalï¼Œå¶æ•°ç”¨ç¬¬ä¸€ä¸ªï¼‰ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®—åˆ°è¾¾ç»ˆç‚¹çš„æ€»æ­¥æ•°ã€‚  
åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯**å®šä¹‰åˆé€‚çš„çŠ¶æ€**ï¼šè®¾`f[i]`è¡¨ç¤º**ç¬¬ä¸€æ¬¡åˆ°è¾¾æˆ¿é—´iæ‰€éœ€çš„æ­¥æ•°**ã€‚ä¸ºä»€ä¹ˆé€‰â€œç¬¬ä¸€æ¬¡åˆ°è¾¾â€ï¼Ÿå› ä¸ºç¬¬ä¸€æ¬¡åˆ°è¾¾iæ—¶ï¼Œiçš„æ ‡è®°æ˜¯å¥‡æ•°ï¼Œå¿…é¡»è·³å›p[i]ï¼Œè€Œåç»­å›åˆ°iæ—¶æ ‡è®°æ˜¯å¶æ•°ï¼Œæ‰èƒ½èµ°åˆ°i+1ã€‚  

### æ ¸å¿ƒç®—æ³•æµç¨‹  
1. **çŠ¶æ€è½¬ç§»**ï¼šè¦ç¬¬ä¸€æ¬¡åˆ°è¾¾i+1ï¼Œå¿…é¡»å…ˆç¬¬ä¸€æ¬¡åˆ°è¾¾iï¼ˆç”¨äº†`f[i]`æ­¥ï¼‰ï¼Œç„¶åè·³å›p[i]ï¼ˆ1æ­¥ï¼‰ï¼Œå†ä»p[i]èµ°å›iï¼ˆè¿™éƒ¨åˆ†æ­¥æ•°ç­‰äº`f[i] - f[p[i]]`ï¼Œå› ä¸ºä»1åˆ°içš„æ­¥æ•°å‡å»ä»1åˆ°p[i]çš„æ­¥æ•°ï¼Œå°±æ˜¯p[i]åˆ°içš„æ­¥æ•°ï¼‰ï¼Œæœ€åä»ièµ°åˆ°i+1ï¼ˆ1æ­¥ï¼‰ã€‚æ‰€ä»¥è½¬ç§»æ–¹ç¨‹æ˜¯ï¼š  
   `f[i+1] = 2*f[i] - f[p[i]] + 2`ï¼ˆæ¨¡1e9+7ï¼‰ã€‚  
2. **åˆå§‹åŒ–**ï¼š`f[1] = 0`ï¼ˆèµ·ç‚¹ä¸éœ€è¦æ­¥æ•°ï¼‰ï¼Œ`f[2] = 2`ï¼ˆä»1åˆ°2éœ€è¦è·³å›p[1]å†å›æ¥ï¼Œæ¯”å¦‚æ ·ä¾‹1ä¸­p[1]=1ï¼Œæ‰€ä»¥f[2] = 2*0 - f[1] + 2 = 2ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
æˆ‘ä»¬ç”¨**8ä½åƒç´ é£æ ¼**è®¾è®¡åŠ¨ç”»ï¼Œå±•ç¤ºåŠ¨æ€è§„åˆ’çš„é€’æ¨è¿‡ç¨‹ï¼š  
- **åœºæ™¯**ï¼šåƒç´ åŒ–è¿·å®«ï¼Œæˆ¿é—´æ˜¯å½©è‰²æ–¹å—ï¼ˆ1~n+1æ’åˆ—æˆä¸€è¡Œï¼‰ã€‚  
- **çŠ¶æ€å±•ç¤º**ï¼šç”¨é¢œè‰²æ ‡è®°æˆ¿é—´çš„æ ‡è®°æ¬¡æ•°ï¼ˆå¥‡æ•°ä¸ºçº¢è‰²ï¼Œå¶æ•°ä¸ºç»¿è‰²ï¼‰ã€‚  
- **åŠ¨æ€è¿‡ç¨‹**ï¼š  
  - ä»æˆ¿é—´1å¼€å§‹ï¼Œé€æ­¥è®¡ç®—`f[2]`ã€`f[3]`â€¦`f[n+1]`ã€‚  
  - æ¯è®¡ç®—ä¸€ä¸ª`f[i+1]`ï¼ŒåŠ¨ç”»å±•ç¤ºâ€œä»iè·³å›p[i]â†’å†èµ°å›iâ†’èµ°åˆ°i+1â€çš„è¿‡ç¨‹ï¼Œç”¨â€œå®â€çš„éŸ³æ•ˆæç¤ºå…³é”®æ­¥éª¤ï¼ˆå¦‚è·³å›ã€èµ°å›ï¼‰ã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ­¥çœ‹æ¯ä¸€æ­¥è®¡ç®—ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºæ•´ä¸ªæµç¨‹ï¼‰ï¼Œè¿˜æœ‰â€œé‡ç½®â€æŒ‰é’®ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šygsldrï¼ˆèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£ç”¨**å‰ç¼€å’Œä¼˜åŒ–**äº†åŠ¨æ€è§„åˆ’ï¼Œæ€è·¯æ¸…æ™°ã€‚ä½œè€…å®šä¹‰`dp[p]`è¡¨ç¤ºåœ¨pç‚¹å‘åèµ°1æ­¥çš„æ­¥æ•°ï¼Œ`pre`æ˜¯`dp`çš„å‰ç¼€å’Œï¼Œè½¬ç§»æ–¹ç¨‹`dp[i] = pre[i-1] - pre[p[i]-1] + 2`ç®€æ´æ˜äº†ã€‚ä»£ç è§„èŒƒï¼ˆå˜é‡å`dp`ã€`pre`å«ä¹‰æ˜ç¡®ï¼‰ï¼Œæ¨¡è¿ç®—å¤„ç†ä¸¥è°¨ï¼ˆè´Ÿæ•°åŠ modå†å–æ¨¡ï¼‰ï¼Œé€‚åˆåˆå­¦è€…ç†è§£åŠ¨æ€è§„åˆ’çš„å‰ç¼€å’Œåº”ç”¨ã€‚  

### é¢˜è§£äºŒï¼š_Fontainebleau_ï¼ˆèµï¼š3ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„**è½¬ç§»æ–¹ç¨‹è§£é‡Š**éå¸¸é€å½»ã€‚ä½œè€…ç›´æ¥ç»™å‡º`f[i] = 2*f[i-1] - f[p[i-1]] + 2`ï¼Œå¹¶è¯¦ç»†è¯´æ˜æ¯ä¸€æ­¥çš„å«ä¹‰ï¼ˆç¬¬ä¸€æ¬¡åˆ°i-1â†’è·³å›p[i-1]â†’èµ°å›i-1â†’èµ°åˆ°iï¼‰ã€‚ä»£ç ç”¨äº†`long long`é˜²æ­¢æº¢å‡ºï¼Œè¾“å…¥è¾“å‡ºä¼˜åŒ–ï¼ˆ`read`å‡½æ•°ï¼‰ï¼Œé€‚åˆå­¦ä¹ åŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»æ¨å¯¼ã€‚  

### é¢˜è§£ä¸‰ï¼šSTDquantumï¼ˆèµï¼š1ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£ç”¨**è®°å¿†åŒ–é€’å½’**å®ç°åŠ¨æ€è§„åˆ’ï¼Œæ€è·¯æ–°é¢–ã€‚ä½œè€…å®šä¹‰`solve(x)`è¡¨ç¤ºåˆ°è¾¾xæ‰€éœ€çš„æ­¥æ•°ï¼Œé€’å½’å¼`ans[x] = (2*solve(x-1) - solve(a[x]-1) + 2) % mod`ä¸é€’æ¨å¼ä¸€è‡´ï¼Œä½†ç”¨è®°å¿†åŒ–é¿å…é‡å¤è®¡ç®—ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼ˆç”¨namespaceå°è£…ï¼‰ï¼Œé€‚åˆç†è§£é€’å½’ä¸åŠ¨æ€è§„åˆ’çš„è”ç³»ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **çŠ¶æ€å®šä¹‰çš„æ­£ç¡®æ€§**  
- **éš¾ç‚¹**ï¼šå¦‚ä½•å®šä¹‰çŠ¶æ€æ‰èƒ½è¦†ç›–æ‰€æœ‰æƒ…å†µï¼Ÿ  
- **ç­–ç•¥**ï¼šé€‰æ‹©â€œç¬¬ä¸€æ¬¡åˆ°è¾¾æˆ¿é—´içš„æ­¥æ•°â€ä½œä¸ºçŠ¶æ€`f[i]`ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡åˆ°è¾¾iæ—¶ï¼Œiçš„æ ‡è®°æ˜¯å¥‡æ•°ï¼Œå¿…é¡»è·³å›p[i]ï¼Œè€Œåç»­å›åˆ°iæ—¶æ ‡è®°æ˜¯å¶æ•°ï¼Œæ‰èƒ½èµ°åˆ°i+1ã€‚è¿™ä¸ªçŠ¶æ€èƒ½å‡†ç¡®åæ˜ æ¯ä¸€æ­¥çš„å†³ç­–ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€å®šä¹‰æ˜¯åŠ¨æ€è§„åˆ’çš„åŸºçŸ³ï¼Œè¦é€‰èƒ½è¦†ç›–é—®é¢˜æ ¸å¿ƒçš„çŠ¶æ€ã€‚  

### 2. **è½¬ç§»æ–¹ç¨‹çš„æ¨å¯¼**  
- **éš¾ç‚¹**ï¼šå¦‚ä½•è®¡ç®—ä»i-1åˆ°i+1çš„æ­¥æ•°ï¼Ÿ  
- **ç­–ç•¥**ï¼šåˆ†è§£è·¯å¾„ä¸ºâ€œç¬¬ä¸€æ¬¡åˆ°i-1â†’è·³å›p[i-1]â†’èµ°å›i-1â†’èµ°åˆ°i+1â€ï¼Œå…¶ä¸­â€œèµ°å›i-1â€çš„æ­¥æ•°ç­‰äº`f[i-1] - f[p[i-1]]`ï¼ˆä»1åˆ°i-1çš„æ­¥æ•°å‡å»ä»1åˆ°p[i-1]çš„æ­¥æ•°ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ–¹ç¨‹æ˜¯åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒï¼Œè¦åˆ†è§£é—®é¢˜ä¸ºå­é—®é¢˜ï¼Œæ‰¾åˆ°é€’æ¨å…³ç³»ã€‚  

### 3. **æ¨¡è¿ç®—çš„å¤„ç†**  
- **éš¾ç‚¹**ï¼šè½¬ç§»æ–¹ç¨‹ä¸­æœ‰å‡æ³•ï¼Œå¯èƒ½å‡ºç°è´Ÿæ•°ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ  
- **ç­–ç•¥**ï¼šæ¯æ¬¡å‡æ³•ååŠ modå†å–æ¨¡ï¼Œæ¯”å¦‚`(a - b + mod) % mod`ï¼Œç¡®ä¿ç»“æœéè´Ÿã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¨¡è¿ç®—ä¸­å‡æ³•è¦æ³¨æ„è´Ÿæ•°ï¼ŒåŠ modæ˜¯å¸¸ç”¨æŠ€å·§ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é—®é¢˜åˆ†è§£**ï¼šæŠŠå¤æ‚çš„è·¯å¾„åˆ†è§£ä¸ºå­è·¯å¾„ï¼ˆå¦‚ä»i-1åˆ°i+1çš„è·¯å¾„åˆ†è§£ä¸ºè·³å›ã€èµ°å›ã€å‰è¿›ï¼‰ã€‚  
- **çŠ¶æ€é€’æ¨**ï¼šç”¨åŠ¨æ€è§„åˆ’ä»å‰å¾€åé€’æ¨ï¼Œæ¯ä¸€æ­¥ä¾èµ–å‰é¢çš„ç»“æœã€‚  
- **æ¨¡è¿ç®—å¤„ç†**ï¼šå‡æ³•ååŠ modï¼Œé¿å…è´Ÿæ•°ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†å¤šä¸ªä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œé‡‡ç”¨é€’æ¨å¼åŠ¨æ€è§„åˆ’ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ•ˆç‡é«˜ï¼ˆO(n)æ—¶é—´å¤æ‚åº¦ï¼‰ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  using namespace std;
  
  const int mod = 1e9 + 7;
  const int MAXN = 1e5 + 5; // æ ¹æ®é¢˜ç›®nçš„èŒƒå›´è°ƒæ•´
  
  long long f[MAXN]; // f[i]è¡¨ç¤ºç¬¬ä¸€æ¬¡åˆ°è¾¾iæˆ¿é—´çš„æ­¥æ•°
  int p[MAXN]; // p[i]è¡¨ç¤ºæˆ¿é—´içš„ç¬¬äºŒä¸ªportalç›®æ ‡
  
  int main() {
      int n;
      cin >> n;
      for (int i = 1; i <= n; ++i) {
          cin >> p[i];
      }
      
      f[1] = 0; // èµ·ç‚¹ä¸éœ€è¦æ­¥æ•°
      for (int i = 1; i <= n; ++i) {
          // è½¬ç§»æ–¹ç¨‹ï¼šf[i+1] = 2*f[i] - f[p[i]] + 2ï¼ˆæ¨¡modï¼‰
          f[i+1] = (2 * f[i] - f[p[i]] + 2) % mod;
          // å¤„ç†è´Ÿæ•°ï¼šåŠ modå†å–æ¨¡
          if (f[i+1] < 0) {
              f[i+1] += mod;
          }
      }
      
      cout << f[n+1] << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¾“å…¥nå’Œpæ•°ç»„ï¼ˆæ¯ä¸ªæˆ¿é—´çš„ç¬¬äºŒä¸ªportalç›®æ ‡ï¼‰ã€‚  
  2. åˆå§‹åŒ–`f[1] = 0`ï¼ˆèµ·ç‚¹ä¸éœ€è¦æ­¥æ•°ï¼‰ã€‚  
  3. å¾ªç¯è®¡ç®—`f[2]`åˆ°`f[n+1]`ï¼Œç”¨è½¬ç§»æ–¹ç¨‹`f[i+1] = 2*f[i] - f[p[i]] + 2`ï¼Œå¹¶å¤„ç†è´Ÿæ•°ã€‚  
  4. è¾“å‡º`f[n+1]`ï¼ˆç¬¬ä¸€æ¬¡åˆ°è¾¾n+1æˆ¿é—´çš„æ­¥æ•°ï¼Œå³ç­”æ¡ˆï¼‰ã€‚  

### é¢˜è§£ä¸€ï¼šygsldrçš„æ ¸å¿ƒä»£ç ç‰‡æ®µ  
* **äº®ç‚¹**ï¼šç”¨å‰ç¼€å’Œä¼˜åŒ–åŠ¨æ€è§„åˆ’ï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  const int mod = 1e9 + 7;
  int dp[1123456]; // dp[p]è¡¨ç¤ºåœ¨pç‚¹å‘åèµ°1æ­¥çš„æ­¥æ•°
  int pre[1123456]; // preæ˜¯dpçš„å‰ç¼€å’Œ
  int p[1123456];
  
  int main() {
      int n;
      scanf("%d", &n);
      for (int i = 1; i <= n; ++i) {
          scanf("%d", &p[i]);
      }
      dp[1] = pre[1] = 2;
      for (int i = 2; i <= n; ++i) {
          dp[i] = (pre[i-1] - pre[p[i]-1] + 2) % mod;
          if (dp[i] < 0) dp[i] += mod;
          pre[i] = (pre[i-1] + dp[i]) % mod;
      }
      printf("%d\n", pre[n]);
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `dp[i]`è¡¨ç¤ºåœ¨iç‚¹å‘åèµ°1æ­¥çš„æ­¥æ•°ï¼Œ`pre[i]`æ˜¯`dp[1]`åˆ°`dp[i]`çš„å’Œã€‚  
  - è½¬ç§»æ–¹ç¨‹`dp[i] = pre[i-1] - pre[p[i]-1] + 2`ï¼š`pre[i-1] - pre[p[i]-1]`æ˜¯ä»p[i]åˆ°i-1çš„æ­¥æ•°ï¼ŒåŠ 2æ˜¯è·³å›å’Œå‰è¿›çš„æ­¥æ•°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œå¯ä»¥ä¼˜åŒ–åŠ¨æ€è§„åˆ’çš„è®¡ç®—ï¼Œå‡å°‘æ—¶é—´å¤æ‚åº¦ã€‚  

### é¢˜è§£ä¸‰ï¼šSTDquantumçš„æ ¸å¿ƒä»£ç ç‰‡æ®µ  
* **äº®ç‚¹**ï¼šç”¨è®°å¿†åŒ–é€’å½’å®ç°åŠ¨æ€è§„åˆ’ï¼Œæ€è·¯æ–°é¢–ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  #include <iostream>
  using namespace std;
  
  const int mod = 1e9 + 7;
  const int N = 2e6 + 10;
  long long ans[N] = {0, 2}; // ans[1]åˆå§‹åŒ–ä¸º2ï¼ˆåˆ°1ä¸¤æ¬¡çš„æ­¥æ•°ï¼‰
  int a[N];
  
  long long solve(int x) {
      if (x < 1) return 0;
      if (ans[x]) return ans[x]; // è®°å¿†åŒ–
      ans[x] = (2 * solve(x-1) - solve(a[x]-1) + 2 + mod) % mod;
      return ans[x];
  }
  
  int main() {
      int n;
      cin >> n;
      for (int i = 1; i <= n; ++i) {
          cin >> a[i];
      }
      cout << solve(n) << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `solve(x)`è¡¨ç¤ºåˆ°è¾¾xæ‰€éœ€çš„æ­¥æ•°ï¼Œ`ans[x]`å­˜å‚¨è®°å¿†åŒ–ç»“æœã€‚  
  - é€’å½’å¼`ans[x] = 2*solve(x-1) - solve(a[x]-1) + 2`ä¸é€’æ¨å¼ä¸€è‡´ï¼Œä½†ç”¨è®°å¿†åŒ–é¿å…é‡å¤è®¡ç®—ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè®°å¿†åŒ–é€’å½’æ˜¯åŠ¨æ€è§„åˆ’çš„å¦ä¸€ç§å®ç°æ–¹å¼ï¼Œé€‚åˆé€’å½’æ€è·¯æ¸…æ™°çš„é—®é¢˜ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ è¿·å®«æ¢é™©**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºåŠ¨æ€è§„åˆ’çš„é€’æ¨è¿‡ç¨‹ï¼Œåƒâ€œè¶…çº§é©¬é‡Œå¥¥â€ä¸€æ ·ä¸€æ­¥æ­¥èµ°åˆ°ç»ˆç‚¹ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
- **åœºæ™¯**ï¼šå±å¹•å·¦ä¾§æ˜¯åƒç´ åŒ–è¿·å®«ï¼ˆæˆ¿é—´1~n+1æ’åˆ—æˆä¸€è¡Œï¼Œæ¯ä¸ªæˆ¿é—´æ˜¯ä¸€ä¸ª32x32çš„å½©è‰²æ–¹å—ï¼‰ï¼Œå³ä¾§æ˜¯æ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
- **çŠ¶æ€å±•ç¤º**ï¼š  
  - æˆ¿é—´æ ‡è®°æ¬¡æ•°ï¼šå¥‡æ•°ä¸ºçº¢è‰²ï¼ˆéœ€è¦è·³å›ï¼‰ï¼Œå¶æ•°ä¸ºç»¿è‰²ï¼ˆå¯ä»¥å‰è¿›ï¼‰ã€‚  
  - `f[i]`çš„å€¼ï¼šåœ¨æˆ¿é—´ä¸‹æ–¹æ˜¾ç¤ºç™½è‰²æ•°å­—ï¼ˆå¦‚`f[2]=2`ï¼‰ã€‚  
- **åŠ¨æ€è¿‡ç¨‹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šæˆ¿é—´1æ˜¯ç»¿è‰²ï¼ˆæ ‡è®°æ¬¡æ•°0ï¼Œå¶æ•°ï¼‰ï¼Œ`f[1]=0`ã€‚  
  2. **è®¡ç®—f[2]**ï¼š  
     - åŠ¨ç”»å±•ç¤ºâ€œä»1è·³å›p[1]ï¼ˆå¦‚p[1]=1ï¼‰â†’å†èµ°å›1â†’èµ°åˆ°2â€çš„è¿‡ç¨‹ã€‚  
     - æ¯ä¸€æ­¥ç”¨â€œå®â€çš„éŸ³æ•ˆæç¤ºï¼ˆè·³å›æ—¶æ˜¯çŸ­éŸ³ï¼Œèµ°å›æ—¶æ˜¯é•¿éŸ³ï¼Œå‰è¿›æ—¶æ˜¯ä¸Šå‡éŸ³ï¼‰ã€‚  
     - æˆ¿é—´2å˜æˆçº¢è‰²ï¼ˆæ ‡è®°æ¬¡æ•°1ï¼Œå¥‡æ•°ï¼‰ï¼Œ`f[2]=2`ã€‚  
  3. **è®¡ç®—f[3]**ï¼š  
     - åŠ¨ç”»å±•ç¤ºâ€œä»2è·³å›p[2]ï¼ˆå¦‚p[2]=2ï¼‰â†’å†èµ°å›2â†’èµ°åˆ°3â€çš„è¿‡ç¨‹ã€‚  
     - æˆ¿é—´3å˜æˆçº¢è‰²ï¼Œ`f[3]=4`ï¼ˆæ ·ä¾‹1çš„è¾“å‡ºï¼‰ã€‚  
  4. **ç»ˆç‚¹**ï¼šå½“è®¡ç®—åˆ°`f[n+1]`æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚FCæ¸¸æˆçš„é€šå…³éŸ³ä¹ï¼‰ï¼Œæˆ¿é—´n+1å˜æˆé‡‘è‰²ï¼ˆç»ˆç‚¹æ ‡è®°ï¼‰ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€æ­¥è®¡ç®—`f[2]`ã€`f[3]`â€¦ï¼Œæ¯ä¸€æ­¥éƒ½å±•ç¤ºè¯¦ç»†è¿‡ç¨‹ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼ŒåŠ¨ç”»å¿«é€Ÿæ¼”ç¤ºæ•´ä¸ªæµç¨‹ï¼Œé€Ÿåº¦å¯ä»¥é€šè¿‡æ»‘å—è°ƒæ•´ï¼ˆä»æ…¢åˆ°å¿«ï¼‰ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹æ¼”ç¤ºã€‚  

### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆçš„æ°›å›´ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ã€‚  
- **éŸ³æ•ˆæç¤º**ï¼šç”¨ä¸åŒçš„éŸ³æ•ˆå¼ºåŒ–å…³é”®æ­¥éª¤ï¼ˆå¦‚è·³å›ã€èµ°å›ã€å‰è¿›ï¼‰ï¼Œå¸®åŠ©è®°å¿†ã€‚  
- **äº¤äº’åŠŸèƒ½**ï¼šæ”¯æŒå•æ­¥å’Œè‡ªåŠ¨æ’­æ”¾ï¼Œæ»¡è¶³ä¸åŒå­¦ä¹ èŠ‚å¥çš„éœ€æ±‚ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
åŠ¨æ€è§„åˆ’çš„**çŠ¶æ€å®šä¹‰**å’Œ**è½¬ç§»æ–¹ç¨‹æ¨å¯¼**æŠ€å·§å¯ä»¥è¿ç§»åˆ°ä»¥ä¸‹åœºæ™¯ï¼š  
1. **è·¯å¾„è®¡æ•°é—®é¢˜**ï¼šå¦‚â€œè¿‡æ²³å’â€ï¼ˆè®¡ç®—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„æ•°ï¼‰ã€‚  
2. **åºåˆ—é—®é¢˜**ï¼šå¦‚â€œæœ€é•¿é€’å¢å­åºåˆ—â€ï¼ˆè®¡ç®—æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼‰ã€‚  
3. **æ¸¸æˆé—®é¢˜**ï¼šå¦‚â€œå–çŸ³å­æ¸¸æˆâ€ï¼ˆè®¡ç®—å¿…èƒœç­–ç•¥ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1002** - è¿‡æ²³å’  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯åŠ¨æ€è§„åˆ’çš„ç»å…¸é—®é¢˜ï¼Œéœ€è¦è®¡ç®—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„æ•°ï¼Œé€‚åˆç»ƒä¹ çŠ¶æ€å®šä¹‰å’Œè½¬ç§»æ–¹ç¨‹æ¨å¯¼ã€‚  
2. **æ´›è°· P1040** - åŠ åˆ†äºŒå‰æ ‘  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜è€ƒå¯ŸåŒºé—´åŠ¨æ€è§„åˆ’ï¼Œéœ€è¦å®šä¹‰çŠ¶æ€è¡¨ç¤ºåŒºé—´å†…çš„æœ€å¤§åŠ åˆ†ï¼Œé€‚åˆæ‹“å±•åŠ¨æ€è§„åˆ’çš„åº”ç”¨åœºæ™¯ã€‚  
3. **æ´›è°· P1140** - ç›¸ä¼¼åŸºå›   
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜è€ƒå¯Ÿç¼–è¾‘è·ç¦»é—®é¢˜ï¼Œéœ€è¦ç”¨åŠ¨æ€è§„åˆ’è®¡ç®—ä¸¤ä¸ªåºåˆ—çš„ç›¸ä¼¼æ€§ï¼Œé€‚åˆç»ƒä¹ äºŒç»´åŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªygsldr)  
> â€œæˆ‘ä¸€å¼€å§‹ä»¥ä¸ºå¥‡æ•°å¯ä»¥åˆ°å¤„èµ°ï¼Œç»“æœå¡ä½äº†ã€‚åæ¥å‘ç°å¾€åèµ°åªèƒ½èµ°1æ ¼ï¼Œäºæ˜¯å®šä¹‰äº†dp[p]è¡¨ç¤ºåœ¨pç‚¹å‘åèµ°1æ­¥çš„æ­¥æ•°ï¼Œç”¨å‰ç¼€å’Œä¼˜åŒ–äº†è½¬ç§»æ–¹ç¨‹ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨è§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜æ—¶ï¼Œ**è§‚å¯Ÿé—®é¢˜çš„é™åˆ¶æ¡ä»¶**ï¼ˆå¦‚p[i]<=iï¼‰éå¸¸é‡è¦ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°æ­£ç¡®çš„çŠ¶æ€å®šä¹‰å’Œè½¬ç§»æ–¹ç¨‹ã€‚å‰ç¼€å’Œä¼˜åŒ–æ˜¯åŠ¨æ€è§„åˆ’ä¸­å¸¸ç”¨çš„æŠ€å·§ï¼Œå¯ä»¥å‡å°‘é‡å¤è®¡ç®—ï¼Œæé«˜æ•ˆç‡ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œLong Pathâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³å’Œè§£é¢˜æŠ€å·§ã€‚è®°ä½ï¼ŒåŠ¨æ€è§„åˆ’çš„å…³é”®æ˜¯**çŠ¶æ€å®šä¹‰**å’Œ**è½¬ç§»æ–¹ç¨‹æ¨å¯¼**ï¼Œå¤šç»ƒä¹ ã€å¤šæ€è€ƒæ‰èƒ½æŒæ¡ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š155.49ç§’
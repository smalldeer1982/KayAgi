# é¢˜ç›®ä¿¡æ¯

# Equalize

## é¢˜ç›®æè¿°

Vasya has two hobbies â€” adding permutations $ ^{\dagger} $ to arrays and finding the most frequently occurring element. Recently, he found an array $ a $ and decided to find out the maximum number of elements equal to the same number in the array $ a $ that he can obtain after adding some permutation to the array $ a $ .

More formally, Vasya must choose exactly one permutation $ p_1, p_2, p_3, \ldots, p_n $ of length $ n $ , and then change the elements of the array $ a $ according to the rule $ a_i := a_i + p_i $ . After that, Vasya counts how many times each number occurs in the array $ a $ and takes the maximum of these values. You need to determine the maximum value he can obtain.

 $ ^{\dagger} $ A permutation of length $ n $ is an array consisting of $ n $ distinct integers from $ 1 $ to $ n $ in arbitrary order. For example, $ [2,3,1,5,4] $ is a permutation, but $ [1,2,2] $ is not a permutation ( $ 2 $ appears twice in the array), and $ [1,3,4] $ is also not a permutation ( $ n=3 $ but there is $ 4 $ in the array).

## è¯´æ˜/æç¤º

In the first test case, it is optimal to choose $ p = [2, 1] $ . Then after applying the operation, the array $ a $ will be $ [3, 3] $ , in which the number $ 3 $ occurs twice, so the answer is $ 2 $ .

In the second test case, one of the optimal options is $ p = [2, 3, 1, 4] $ . After applying the operation, the array $ a $ will be $ [9, 4, 5, 5] $ . Since the number $ 5 $ occurs twice, the answer is $ 2 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
7
2
1 2
4
7 1 4 1
3
103 102 104
5
1 101 1 100 1
5
1 10 100 1000 1
2
3 1
3
1000000000 999999997 999999999```

### è¾“å‡º

```
2
2
3
2
1
1
2```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šEqualize æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ’åºä¸åŒæŒ‡é’ˆæŠ€å·§åº”ç”¨  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
é¢˜ç›®æ˜¯è¯´ï¼Œç»™æ•°ç»„`a`çš„æ¯ä¸ªå…ƒç´ åŠ ä¸€ä¸ª**1~nçš„æ’åˆ—**ï¼ˆæ¯ä¸ªæ•°åªèƒ½ç”¨ä¸€æ¬¡ï¼‰ï¼Œè®©æ–°æ•°ç»„ä¸­ç›¸åŒå…ƒç´ çš„æ•°é‡å°½å¯èƒ½å¤šã€‚æ¯”å¦‚æ ·ä¾‹1ä¸­ï¼Œ`a=[1,2]`ï¼Œé€‰æ’åˆ—`[2,1]`ï¼ŒåŠ å®Œåå˜æˆ`[3,3]`ï¼Œç­”æ¡ˆå°±æ˜¯2ã€‚  

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…³é”®å¾—æƒ³æ¸…æ¥šä¸¤ä¸ªç‚¹ï¼š  
1. **é‡å¤å…ƒç´ æ²¡ç”¨**ï¼šåŸæ•°ç»„ä¸­é‡å¤çš„æ•°ï¼ŒåŠ ä¸åŒçš„æ’åˆ—æ•°åè‚¯å®šä¸ä¸€æ ·ï¼ˆæ¯”å¦‚ä¸¤ä¸ª1ï¼ŒåŠ 2å’Œ1ï¼Œå˜æˆ3å’Œ2ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»å…ˆ**å»é‡**ã€‚  
2. **æ‰¾è¿ç»­çš„â€œå¯è°ƒæ•´â€åŒºé—´**ï¼šå»é‡æ’åºåï¼Œå‡è®¾æˆ‘ä»¬é€‰ä¸€æ®µè¿ç»­çš„æ•°`[x1, x2, ..., xk]`ï¼ˆx1<x2<...<xkï¼‰ï¼Œè¦è®©å®ƒä»¬åŠ æ’åˆ—åå˜æˆåŒä¸€ä¸ªæ•°ï¼Œå¿…é¡»æ»¡è¶³`xk - x1 â‰¤ n-1`ã€‚ä¸ºä»€ä¹ˆï¼Ÿæ¯”å¦‚n=3ï¼Œxk-x1=2ï¼ˆâ‰¤3-1ï¼‰ï¼Œé‚£ä¹ˆx1åŠ 3ï¼Œx2åŠ 2ï¼Œx3åŠ 1ï¼Œåˆšå¥½éƒ½å˜æˆx1+3=x2+2=x3+1ã€‚å¦‚æœxk-x1â‰¥nï¼Œæ¯”å¦‚n=3ï¼Œxk-x1=3ï¼Œé‚£x1æœ€å¤šåŠ 3å˜æˆx1+3ï¼Œè€Œxkéœ€è¦åŠ 1å˜æˆxk+1=x1+4ï¼Œä¸¤è€…å·®1ï¼Œæ— æ³•ç›¸ç­‰ã€‚  

æ‰€ä»¥é—®é¢˜è½¬åŒ–ä¸ºï¼š**åœ¨å»é‡æ’åºåçš„æ•°ç»„ä¸­ï¼Œæ‰¾æœ€é•¿çš„è¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—æœ€å¤§å€¼-æœ€å°å€¼â‰¤n-1**ã€‚è¿™æ—¶å€™ç”¨**åŒæŒ‡é’ˆ**ï¼ˆæˆ–äºŒåˆ†ï¼‰å°±èƒ½é«˜æ•ˆè§£å†³ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯`O(n log n)`ï¼ˆæ’åºçš„æ—¶é—´ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘æ‰“ç®—åšä¸€ä¸ª**åƒç´ é£æ ¼çš„â€œæ•°ç»„æ¢é™©å®¶â€**åŠ¨ç”»ï¼š  
- ç”¨å½©è‰²åƒç´ å—è¡¨ç¤ºæ•°ç»„å…ƒç´ ï¼Œæ’åºæ—¶åƒç´ å—ä¼šâ€œäº¤æ¢ä½ç½®â€ï¼ˆæ¯”å¦‚çº¢è‰²å—ç§»åˆ°å·¦è¾¹ï¼Œè“è‰²å—ç§»åˆ°å³è¾¹ï¼‰ï¼Œä¼´éšâ€œæ»´ç­”â€éŸ³æ•ˆï¼›  
- å»é‡æ—¶ï¼Œé‡å¤çš„åƒç´ å—ä¼šâ€œæ¶ˆå¤±â€ï¼Œç•™ä¸‹å”¯ä¸€çš„å…ƒç´ ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
- åŒæŒ‡é’ˆç”¨ä¸¤ä¸ªç®­å¤´è¡¨ç¤ºï¼ˆå·¦ç®­å¤´`l`ï¼Œå³ç®­å¤´`r`ï¼‰ï¼Œå³ç®­å¤´ä¸æ–­å³ç§»ï¼Œç›´åˆ°å½“å‰åŒºé—´çš„æœ€å¤§å€¼-æœ€å°å€¼è¶…è¿‡n-1ï¼Œæ­¤æ—¶å·¦ç®­å¤´å³ç§»ã€‚æ¯ç§»åŠ¨ä¸€æ¬¡ï¼Œå½“å‰åŒºé—´çš„åƒç´ å—ä¼šâ€œé«˜äº®â€ï¼ˆæ¯”å¦‚å˜æˆé»„è‰²ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œå½“å‰é•¿åº¦ï¼šr-l+1â€ï¼›  
- æ‰¾åˆ°æœ€é•¿åŒºé—´æ—¶ï¼Œæ‰€æœ‰åƒç´ å—ä¼šâ€œé—ªçƒâ€ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚FCæ¸¸æˆçš„é€šå…³å£°ï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šKdlyhï¼ˆåŒæŒ‡é’ˆ+äºŒåˆ†ï¼Œæ€è·¯æ¸…æ™°ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä½ä½œè€…ç›´æ¥ç‚¹å‡ºäº†é—®é¢˜çš„ä¸¤ä¸ªæ ¸å¿ƒç»“è®ºï¼ˆå»é‡ã€æ‰¾åŒºé—´ï¼‰ï¼Œå¹¶ç”¨**åŒæŒ‡é’ˆ**å’Œ**äºŒåˆ†**ä¸¤ç§æ–¹æ³•å®ç°ï¼Œæ€è·¯éå¸¸æ¸…æ™°ã€‚åŒæŒ‡é’ˆçš„ä»£ç å¾ˆç®€æ´ï¼šæ’åºå»é‡åï¼Œå·¦æŒ‡é’ˆ`i`å›ºå®šï¼Œå³æŒ‡é’ˆ`j`ä¸æ–­å³ç§»ï¼Œç›´åˆ°`a[j] > a[i]+n-1`ï¼Œæ­¤æ—¶åŒºé—´`[i,j-1]`çš„é•¿åº¦å°±æ˜¯å½“å‰`i`å¼€å¤´çš„æœ€é•¿åˆæ³•åŒºé—´ã€‚äºŒåˆ†æ³•åˆ™æ˜¯å¯¹æ¯ä¸ª`i`ï¼Œç”¨`upper_bound`æ‰¾æœ€å¤§çš„`j`ä½¿å¾—`a[j] â‰¤ a[i]+n-1`ï¼Œè®¡ç®—é•¿åº¦ã€‚ä¸¤ç§æ–¹æ³•éƒ½é«˜æ•ˆï¼Œé€‚åˆç«èµ›ä½¿ç”¨ã€‚ä»£ç ä¸­çš„`std::unique`å’Œ`std::upper_bound`ç”¨å¾—å¾ˆç†Ÿç»ƒï¼Œå˜é‡åä¹Ÿå¾ˆæ¸…æ™°ï¼ˆæ¯”å¦‚`ans`è¡¨ç¤ºç­”æ¡ˆï¼‰ï¼Œå€¼å¾—å­¦ä¹ ã€‚  

### é¢˜è§£äºŒï¼š2hukï¼ˆä»æš´åŠ›åˆ°åŒæŒ‡é’ˆï¼Œé€»è¾‘æ¨å¯¼è¯¦ç»†ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä½ä½œè€…çš„æ€è·¯å¾ˆæœ‰å¯å‘æ€§ï¼šå…ˆæƒ³æš´åŠ›æ³•ï¼ˆæšä¸¾æ‰€æœ‰åŒºé—´ï¼Œåˆ¤æ–­æ˜¯å¦åˆæ³•ï¼‰ï¼Œç„¶åå‘ç°**åˆæ³•åŒºé—´çš„å·¦ç«¯ç‚¹éšå³ç«¯ç‚¹å¢åŠ è€Œä¸å‡**ï¼Œæ‰€ä»¥å¯ä»¥ç”¨åŒæŒ‡é’ˆä¼˜åŒ–ã€‚ä»–è§£é‡Šäº†â€œä¸ºä»€ä¹ˆé€‰è¿ç»­åŒºé—´â€ï¼šæ¯”å¦‚`a1<a2<a3<a4`ï¼Œå¦‚æœé€‰`a1,a3,a4`åˆæ³•ï¼Œé‚£ä¹ˆ`a2,a3,a4`è‚¯å®šä¹Ÿåˆæ³•ï¼ˆå› ä¸º`a4-a2 < a4-a1 â‰¤n-1`ï¼‰ï¼Œæ‰€ä»¥è¿ç»­åŒºé—´ä¸€å®šæœ€ä¼˜ã€‚è¿™ç§â€œä»æš´åŠ›åˆ°ä¼˜åŒ–â€çš„æ€è€ƒè¿‡ç¨‹ï¼Œå¯¹åˆå­¦è€…å¾ˆæœ‰å¸®åŠ©ã€‚ä»£ç ä¸­çš„åŒæŒ‡é’ˆå†™æ³•ï¼ˆ`r`å³ç§»ï¼Œ`l`è·Ÿè¿›ï¼‰å¾ˆæ ‡å‡†ï¼Œå®¹æ˜“ç†è§£ã€‚  

### é¢˜è§£ä¸‰ï¼šæ— åä¹‹é›¾ï¼ˆè°ƒè¯•ç»éªŒï¼Œé¿å…è¸©å‘ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä½ä½œè€…æåˆ°è‡ªå·±å› ä¸ºâ€œ`sort(a+1,a+n+1)`æ‰“æˆ`sort(a+n,a+n+1)`â€æŒ‚äº†5å‘ï¼Œè¿™æé†’æˆ‘ä»¬**æ’åºæ—¶ä¸€å®šè¦æ³¨æ„æ•°ç»„çš„èŒƒå›´**ã€‚ä»–çš„ä»£ç ç”¨äº†`unique`å»é‡ï¼Œç„¶åç”¨åŒæŒ‡é’ˆæ‰¾æœ€é•¿åŒºé—´ï¼Œé€»è¾‘æ­£ç¡®ã€‚è™½ç„¶ä»£ç é£æ ¼æœ‰ç‚¹â€œéšæ„â€ï¼ˆæ¯”å¦‚å˜é‡å`q`è¡¨ç¤ºå»é‡åçš„é•¿åº¦ï¼‰ï¼Œä½†èƒœåœ¨çœŸå®ï¼Œè®©æˆ‘ä»¬çœ‹åˆ°è°ƒè¯•ä¸­çš„å¸¸è§é”™è¯¯ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. ä¸ºä»€ä¹ˆè¦å»é‡ï¼Ÿ  
* **åˆ†æ**ï¼šåŸæ•°ç»„ä¸­çš„é‡å¤å…ƒç´ ï¼ŒåŠ æ’åˆ—åè‚¯å®šä¸ä¸€æ ·ï¼ˆæ¯”å¦‚ä¸¤ä¸ª`5`ï¼ŒåŠ `1`å’Œ`2`ï¼Œå˜æˆ`6`å’Œ`7`ï¼‰ã€‚æ‰€ä»¥é‡å¤å…ƒç´ å¯¹ç­”æ¡ˆæ²¡æœ‰è´¡çŒ®ï¼Œå¿…é¡»å»é‡ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡åˆ°â€œåŠ ä¸åŒæ•°â€çš„é—®é¢˜ï¼Œå…ˆæƒ³æƒ³é‡å¤å…ƒç´ æ˜¯å¦æœ‰ç”¨ã€‚  

### 2. ä¸ºä»€ä¹ˆåˆæ³•åŒºé—´è¦æ»¡è¶³â€œæœ€å¤§å€¼-æœ€å°å€¼â‰¤n-1â€ï¼Ÿ  
* **åˆ†æ**ï¼šå‡è®¾åŒºé—´æ˜¯`[x1,x2,...,xk]`ï¼Œè¦è®©å®ƒä»¬åŠ æ’åˆ—åå˜æˆåŒä¸€ä¸ªæ•°`y`ï¼Œé‚£ä¹ˆ`y = x1 + p1 = x2 + p2 = ... = xk + pk`ï¼Œå…¶ä¸­`p1,p2,...,pk`æ˜¯`1~n`ä¸­çš„ä¸åŒæ•°ã€‚æœ€å¤§çš„`p`æ˜¯`n`ï¼Œæœ€å°çš„`p`æ˜¯`1`ï¼Œæ‰€ä»¥`y`çš„æœ€å¤§å€¼æ˜¯`x1 + n`ï¼Œæœ€å°å€¼æ˜¯`xk + 1`ã€‚è¦è®©å®ƒä»¬ç›¸ç­‰ï¼Œå¿…é¡»`x1 + n = xk + 1`ï¼Œå³`xk - x1 = n-1`ã€‚å¦‚æœ`xk - x1 > n-1`ï¼Œé‚£ä¹ˆ`x1 + n < xk + 1`ï¼Œæ— æ³•ç›¸ç­‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€šè¿‡â€œç­‰å¼æ¨å¯¼â€ç†è§£æ¡ä»¶ï¼Œæ¯”æ­»è®°ç¡¬èƒŒæ›´æœ‰æ•ˆã€‚  

### 3. å¦‚ä½•é«˜æ•ˆæ‰¾æœ€é•¿åˆæ³•åŒºé—´ï¼Ÿ  
* **åˆ†æ**ï¼šæ’åºåï¼Œæ•°ç»„æ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥åŒºé—´çš„æœ€å¤§å€¼æ˜¯`a[r]`ï¼Œæœ€å°å€¼æ˜¯`a[l]`ã€‚ç”¨åŒæŒ‡é’ˆï¼š`r`ä»å·¦åˆ°å³ç§»åŠ¨ï¼Œå½“`a[r] - a[l] > n-1`æ—¶ï¼Œ`l`å³ç§»ã€‚æ¯ä¸€æ­¥éƒ½è®¡ç®—åŒºé—´é•¿åº¦`r-l+1`ï¼Œå–æœ€å¤§å€¼ã€‚è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(n)`ï¼Œæ¯”æš´åŠ›æ³•`O(nÂ²)`é«˜æ•ˆå¾—å¤šã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ’åºåçš„æ•°ç»„ï¼ŒåŒæŒ‡é’ˆæ˜¯æ‰¾â€œæ»¡è¶³æ¡ä»¶çš„æœ€é•¿åŒºé—´â€çš„å¸¸ç”¨æŠ€å·§ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†Kdlyhå’Œ2hukçš„æ€è·¯ï¼Œç”¨åŒæŒ‡é’ˆå®ç°ï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  using namespace std;

  void solve() {
      int n;
      cin >> n;
      vector<long long> a(n);
      for (int i = 0; i < n; ++i) {
          cin >> a[i];
      }
      sort(a.begin(), a.end());
      a.erase(unique(a.begin(), a.end()), a.end()); // å»é‡
      int ans = 0;
      int j = 0; // å³æŒ‡é’ˆ
      for (int i = 0; i < a.size(); ++i) { // å·¦æŒ‡é’ˆi
          while (j < a.size() && a[j] - a[i] <= n - 1) {
              j++; // å³æŒ‡é’ˆå°½å¯èƒ½å³ç§»
          }
          ans = max(ans, j - i); // åŒºé—´é•¿åº¦æ˜¯j-iï¼ˆå› ä¸ºjå·²ç»è¶…å‡ºèŒƒå›´ï¼‰
      }
      cout << ans << endl;
  }

  int main() {
      ios::sync_with_stdio(false);
      cin.tie(nullptr);
      int t;
      cin >> t;
      while (t--) {
          solve();
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–è¾“å…¥ï¼š`n`å’Œæ•°ç»„`a`ï¼›  
  2. æ’åºï¼š`sort(a.begin(), a.end())`ï¼Œè®©æ•°ç»„é€’å¢ï¼›  
  3. å»é‡ï¼š`unique`å‡½æ•°æŠŠé‡å¤å…ƒç´ ç§»åˆ°æ•°ç»„æœ«å°¾ï¼Œ`erase`åˆ é™¤å®ƒä»¬ï¼›  
  4. åŒæŒ‡é’ˆæ‰¾æœ€é•¿åŒºé—´ï¼šå·¦æŒ‡é’ˆ`i`éå†æ¯ä¸ªå…ƒç´ ï¼Œå³æŒ‡é’ˆ`j`ä»`i`å¼€å§‹ï¼Œç›´åˆ°`a[j] - a[i] > n-1`ï¼Œè®¡ç®—åŒºé—´é•¿åº¦`j-i`ï¼Œæ›´æ–°`ans`ï¼›  
  5. è¾“å‡º`ans`ã€‚  


### é’ˆå¯¹ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  
#### é¢˜è§£ä¸€ï¼šKdlyhçš„åŒæŒ‡é’ˆç‰‡æ®µ  
* **äº®ç‚¹**ï¼šç”¨`j`ä½œä¸ºå³æŒ‡é’ˆï¼Œä¸æ–­å³ç§»ï¼Œç›´åˆ°ä¸æ»¡è¶³æ¡ä»¶ï¼Œä»£ç ç®€æ´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 0, j = 0; i < a.size(); i++) {
      while(j < a.size() && a[i] + n - 1 >= a[j]) j++;
      ans = max(ans, j - i);
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `i`æ˜¯å·¦æŒ‡é’ˆï¼Œ`j`æ˜¯å³æŒ‡é’ˆï¼›  
  - `a[i] + n - 1 >= a[j]`ï¼šåˆ¤æ–­å½“å‰åŒºé—´`[i,j]`æ˜¯å¦åˆæ³•ï¼ˆæœ€å¤§å€¼-æœ€å°å€¼â‰¤n-1ï¼‰ï¼›  
  - å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œ`j`å³ç§»ï¼Œæ‰©å¤§åŒºé—´ï¼›  
  - æ¯ä¸€æ­¥è®¡ç®—`j-i`ï¼ˆåŒºé—´é•¿åº¦ï¼‰ï¼Œæ›´æ–°`ans`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒæŒ‡é’ˆçš„å…³é”®æ˜¯â€œå³æŒ‡é’ˆå°½å¯èƒ½å³ç§»ï¼Œå·¦æŒ‡é’ˆè·Ÿè¿›â€ã€‚  

#### é¢˜è§£äºŒï¼š2hukçš„æš´åŠ›ä¼˜åŒ–ç‰‡æ®µ  
* **äº®ç‚¹**ï¼šä»æš´åŠ›åˆ°åŒæŒ‡é’ˆçš„æ¨å¯¼ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int r = 0, l = 0; r < m; ++r) {
      while (l <= r && a[r] + 1 - a[l] > n) {
          ++l;
      }
      res = max(res, r - l + 1);
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `r`æ˜¯å³æŒ‡é’ˆï¼Œ`l`æ˜¯å·¦æŒ‡é’ˆï¼›  
  - `a[r] + 1 - a[l] > n`ï¼šç­‰ä»·äº`a[r] - a[l] > n-1`ï¼ˆå’Œä¹‹å‰çš„æ¡ä»¶ä¸€è‡´ï¼‰ï¼›  
  - å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œ`l`å³ç§»ï¼Œç¼©å°åŒºé—´ï¼›  
  - æ¯ä¸€æ­¥è®¡ç®—`r-l+1`ï¼ˆåŒºé—´é•¿åº¦ï¼‰ï¼Œæ›´æ–°`res`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæš´åŠ›æ³•çš„ä¼˜åŒ–æ–¹å‘æ˜¯â€œå‡å°‘é‡å¤è®¡ç®—â€ï¼ŒåŒæŒ‡é’ˆå°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**ã€Šåƒç´ æ•°ç»„æ¢é™©è®°ã€‹**ï¼ˆä»¿FCçº¢ç™½æœºé£æ ¼ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤ºä¸€ä¸ª32x32çš„åƒç´ ç½‘æ ¼ï¼Œåº•éƒ¨æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œå³ä¾§æœ‰â€œå½“å‰æœ€é•¿é•¿åº¦â€æ˜¾ç¤ºã€‚  
2. **è¾“å…¥æ•°ç»„**ï¼šç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºæ•°ç»„å…ƒç´ ï¼ˆæ¯”å¦‚çº¢è‰²è¡¨ç¤º1ï¼Œè“è‰²è¡¨ç¤º2ï¼Œç»¿è‰²è¡¨ç¤º3ï¼‰ï¼Œæ’åˆ—åœ¨ç½‘æ ¼ä¸Šæ–¹ã€‚  
3. **æ’åºè¿‡ç¨‹**ï¼šåƒç´ å—å¼€å§‹â€œäº¤æ¢ä½ç½®â€ï¼Œä»å°åˆ°å¤§æ’åˆ—ï¼ˆæ¯”å¦‚çº¢è‰²å—ç§»åˆ°å·¦è¾¹ï¼Œè“è‰²å—ç§»åˆ°ä¸­é—´ï¼Œç»¿è‰²å—ç§»åˆ°å³è¾¹ï¼‰ï¼Œä¼´éšâ€œæ»´ç­”â€éŸ³æ•ˆã€‚  
4. **å»é‡è¿‡ç¨‹**ï¼šé‡å¤çš„åƒç´ å—ä¼šâ€œæ¶ˆå¤±â€ï¼ˆæ¯”å¦‚ä¸¤ä¸ªçº¢è‰²å—ï¼Œåªç•™ä¸‹ä¸€ä¸ªï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
5. **åŒæŒ‡é’ˆç§»åŠ¨**ï¼šå·¦æŒ‡é’ˆ`l`ï¼ˆé»„è‰²ç®­å¤´ï¼‰å’Œå³æŒ‡é’ˆ`r`ï¼ˆè“è‰²ç®­å¤´ï¼‰ä»å·¦åˆ°å³ç§»åŠ¨ã€‚`r`ä¸æ–­å³ç§»ï¼Œç›´åˆ°å½“å‰åŒºé—´çš„æœ€å¤§å€¼-æœ€å°å€¼è¶…è¿‡n-1ï¼Œæ­¤æ—¶`l`å³ç§»ã€‚å½“å‰åŒºé—´çš„åƒç´ å—ä¼šâ€œé«˜äº®â€ï¼ˆå˜æˆé»„è‰²ï¼‰ï¼Œå³ä¾§æ˜¾ç¤ºâ€œå½“å‰é•¿åº¦ï¼šr-l+1â€ã€‚  
6. **æ‰¾åˆ°æœ€é•¿åŒºé—´**ï¼šå½“`r`åˆ°è¾¾æ•°ç»„æœ«å°¾æ—¶ï¼Œæœ€é•¿åŒºé—´çš„åƒç´ å—ä¼šâ€œé—ªçƒâ€ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚FCæ¸¸æˆçš„é€šå…³å£°ï¼‰ï¼Œå³ä¾§æ˜¾ç¤ºâ€œæœ€é•¿é•¿åº¦ï¼šansâ€ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼ŒåŠ¨ç”»æ‰§è¡Œä¸€æ­¥ï¼ˆæ¯”å¦‚æ’åºä¸€æ­¥ï¼Œæˆ–åŒæŒ‡é’ˆç§»åŠ¨ä¸€æ­¥ï¼‰ï¼›  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ‰§è¡Œï¼Œé€Ÿåº¦å¯ä»¥é€šè¿‡æ»‘å—è°ƒæ•´ï¼›  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ã€‚  

### è®¾è®¡ç†ç”±  
- **åƒç´ é£æ ¼**ï¼šç¬¦åˆé’å°‘å¹´çš„å®¡ç¾ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ï¼›  
- **éŸ³æ•ˆ**ï¼šå¼ºåŒ–æ“ä½œè®°å¿†ï¼ˆæ¯”å¦‚â€œæ»´ç­”â€å£°å¯¹åº”æ’åºï¼Œâ€œå®â€å£°å¯¹åº”å»é‡ï¼‰ï¼›  
- **é«˜äº®ä¸æ˜¾ç¤º**ï¼šè®©å­¦ä¹ è€…æ¸…æ¥šçœ‹åˆ°ç®—æ³•çš„æ¯ä¸€æ­¥å˜åŒ–ï¼ˆæ¯”å¦‚åŒæŒ‡é’ˆçš„ç§»åŠ¨ï¼ŒåŒºé—´çš„å˜åŒ–ï¼‰ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ¬é¢˜çš„æ ¸å¿ƒæŠ€å·§æ˜¯**æ’åº+å»é‡+åŒæŒ‡é’ˆæ‰¾æœ€é•¿åˆæ³•åŒºé—´**ï¼Œé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š  
1. **æ‰¾æœ€é•¿è¿ç»­å­æ•°ç»„ï¼Œæ»¡è¶³æŸç§æ¡ä»¶**ï¼ˆæ¯”å¦‚å’Œä¸è¶…è¿‡kï¼Œå·®ä¸è¶…è¿‡mï¼‰ï¼›  
2. **å¤„ç†â€œåŠ ä¸åŒæ•°â€çš„é—®é¢˜**ï¼ˆæ¯”å¦‚ç»™æ¯ä¸ªå…ƒç´ åŠ ä¸€ä¸ªä¸åŒçš„æ•°ï¼Œè®©ç»“æœæ»¡è¶³æŸç§æ¡ä»¶ï¼‰ï¼›  
3. **å»é‡åå¤„ç†æ•°ç»„**ï¼ˆæ¯”å¦‚ç»Ÿè®¡ä¸åŒå…ƒç´ çš„å‡ºç°æ¬¡æ•°ï¼Œæˆ–æ‰¾ä¸åŒå…ƒç´ çš„åŒºé—´ï¼‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1102 æ‰¾ç­·å­**ï¼ˆP1102ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç»Ÿè®¡æ•°ç»„ä¸­å‡ºç°å¥‡æ•°æ¬¡çš„å…ƒç´ ï¼Œç”¨åˆ°äº†æ’åºå’Œå»é‡ï¼Œå¸®åŠ©å·©å›ºâ€œå»é‡â€æŠ€å·§ã€‚  
2. **æ´›è°· P1886 æ»‘åŠ¨çª—å£**ï¼ˆP1886ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯åŒæŒ‡é’ˆçš„ç»å…¸é¢˜ï¼Œéœ€è¦æ‰¾æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¸®åŠ©å·©å›ºâ€œåŒæŒ‡é’ˆâ€æŠ€å·§ã€‚  
3. **æ´›è°· P2085 æœ€å°å‡½æ•°å€¼**ï¼ˆP2085ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦åˆå¹¶å¤šä¸ªæœ‰åºæ•°ç»„ï¼Œç”¨åˆ°äº†æ’åºå’ŒåŒæŒ‡é’ˆï¼Œå¸®åŠ©å·©å›ºâ€œæ’åº+åŒæŒ‡é’ˆâ€çš„ç»„åˆæŠ€å·§ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªæ— åä¹‹é›¾)  
> â€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆåœ¨`sort(a+1,a+n+1)`æ‰“æˆäº†`sort(a+n,a+n+1)`æŒ‚äº†5å‘ã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚æ’åºæ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ•°ç»„çš„**èµ·å§‹å’Œç»“æŸä½ç½®**ã€‚æ¯”å¦‚`a`æ˜¯ä»`a[1]`åˆ°`a[n]`çš„æ•°ç»„ï¼Œ`sort(a+1, a+n+1)`æ‰æ˜¯æ­£ç¡®çš„ï¼ˆå› ä¸º`sort`çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç»“æŸä½ç½®çš„ä¸‹ä¸€ä¸ªåœ°å€ï¼‰ã€‚å¦‚æœå†™æˆ`sort(a+n, a+n+1)`ï¼Œåªä¼šæ’åº`a[n]`ä¸€ä¸ªå…ƒç´ ï¼Œå¯¼è‡´ç»“æœé”™è¯¯ã€‚**è°ƒè¯•æ—¶ï¼Œä¸€å®šè¦æ£€æŸ¥æ’åºçš„èŒƒå›´**ï¼  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œEqualizeâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£**æ’åº+å»é‡+åŒæŒ‡é’ˆ**çš„ç»„åˆæŠ€å·§ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡â€œé€»è¾‘æ¨å¯¼â€æ‰¾åˆ°é—®é¢˜çš„æ ¸å¿ƒæ¡ä»¶ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„å…³é”®æ˜¯**æ€è€ƒ**â€”â€”æƒ³æ¸…æ¥šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œæ¯”æ­»è®°ä»£ç æ›´é‡è¦ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š171.51ç§’
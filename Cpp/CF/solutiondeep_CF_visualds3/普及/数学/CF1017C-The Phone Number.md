# é¢˜ç›®ä¿¡æ¯

# The Phone Number

## é¢˜ç›®æè¿°

Mrs. Smith is trying to contact her husband, John Smith, but she forgot the secret phone number!

The only thing Mrs. Smith remembered was that any permutation of $ n $ can be a secret phone number. Only those permutations that minimize secret value might be the phone of her husband.

The sequence of $ n $ integers is called a permutation if it contains all integers from $ 1 $ to $ n $ exactly once.

The secret value of a phone number is defined as the sum of the length of the longest increasing subsequence (LIS) and length of the longest decreasing subsequence (LDS).

A subsequence $ a_{i_1}, a_{i_2}, \ldots, a_{i_k} $ where $ 1\leq i_1 < i_2 < \ldots < i_k\leq n $ is called increasing if $ a_{i_1} < a_{i_2} < a_{i_3} < \ldots < a_{i_k} $ . If $ a_{i_1} > a_{i_2} > a_{i_3} > \ldots > a_{i_k} $ , a subsequence is called decreasing. An increasing/decreasing subsequence is called longest if it has maximum length among all increasing/decreasing subsequences.

For example, if there is a permutation $ [6, 4, 1, 7, 2, 3, 5] $ , LIS of this permutation will be $ [1, 2, 3, 5] $ , so the length of LIS is equal to $ 4 $ . LDS can be $ [6, 4, 1] $ , $ [6, 4, 2] $ , or $ [6, 4, 3] $ , so the length of LDS is $ 3 $ .

Note, the lengths of LIS and LDS can be different.

So please help Mrs. Smith to find a permutation that gives a minimum sum of lengths of LIS and LDS.

## è¯´æ˜/æç¤º

In the first sample, you can build a permutation $ [3, 4, 1, 2] $ . LIS is $ [3, 4] $ (or $ [1, 2] $ ), so the length of LIS is equal to $ 2 $ . LDS can be ony of $ [3, 1] $ , $ [4, 2] $ , $ [3, 2] $ , or $ [4, 1] $ . The length of LDS is also equal to $ 2 $ . The sum is equal to $ 4 $ . Note that $ [3, 4, 1, 2] $ is not the only permutation that is valid.

In the second sample, you can build a permutation $ [2, 1] $ . LIS is $ [1] $ (or $ [2] $ ), so the length of LIS is equal to $ 1 $ . LDS is $ [2, 1] $ , so the length of LDS is equal to $ 2 $ . The sum is equal to $ 3 $ . Note that permutation $ [1, 2] $ is also valid.

## æ ·ä¾‹ #1

### è¾“å…¥

```
4
```

### è¾“å‡º

```
3 4 1 2
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2
```

### è¾“å‡º

```
2 1
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šThe Phone Number æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·åˆ†æCF1017C - The Phone Numberè¿™é“æ„é€ é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æŒæ¡åˆ†å—æ„é€ æŠ€å·§ï¼Œç†è§£LIS/LDSæœ€å°åŒ–åŸç†ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚æ„Ÿå—ç®—æ³•è¿‡ç¨‹ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åˆ†å—æ„é€ `ï¼ˆæ ¹å·åˆ†å—æŠ€å·§ï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜å¯ç±»æ¯”"ä¿„ç½—æ–¯å¥—å¨ƒ"ç»“æ„ï¼šå°†æ•°å­—åˆ†æˆè‹¥å¹²é€’å‡çš„å—ï¼ˆå¤–å±‚å¥—å¨ƒï¼‰ï¼Œæ¯ä¸ªå—å†…æ•°å­—é€’å¢ï¼ˆå†…å±‚æœ‰åºï¼‰ã€‚  
> - **æ ¸å¿ƒæ€è·¯**ï¼šè®¾å—é•¿ä¸º$k$ï¼Œåˆ™LIS=$k$ï¼ˆå—å†…é€’å¢ï¼‰ï¼ŒLDS=$\lceil n/k \rceil$ï¼ˆå—é—´é€’å‡ï¼‰ã€‚æœ€å°åŒ–$k + \lceil n/k \rceil$æ—¶$kâ‰ˆ\sqrt{n}$  
> - **å¯è§†åŒ–è®¾è®¡**ï¼š  
>   - 8ä½åƒç´ é£æ ¼å±•ç¤ºæ•°å­—å—ï¼ˆä¸åŒé¢œè‰²åŒºåˆ†å—ï¼‰  
>   - é«˜äº®å½“å‰å¤„ç†çš„å—ï¼Œæ’­æ”¾"å’”å—’"éŸ³æ•ˆ  
>   - AIè‡ªåŠ¨æ¨¡å¼ï¼šåƒã€Šä¿„ç½—æ–¯æ–¹å—ã€‹AIé€æ­¥å±•ç¤ºåˆ†å—è¿‡ç¨‹  

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆFxorGï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯ç›´å‡»æœ¬è´¨ï¼ˆåˆ†å—ä¼˜åŒ–ï¼‰ï¼Œä»£ç ç®€æ´é«˜æ•ˆï¼ˆæ—¶é—´å¤æ‚åº¦$O(n)$ï¼‰ã€‚äº®ç‚¹åœ¨äºä¸¥æ ¼è¯æ˜å—é•¿å–$\sqrt{n}$æœ€ä¼˜ï¼Œè¾¹ç•Œå¤„ç†ç”¨`if(i>0)`é¿å…è´Ÿå€¼ï¼Œå˜é‡å`bl`ï¼ˆblock lengthï¼‰ç®€æ´æ˜ç¡®ï¼Œç«èµ›å®ç”¨æ€§å¼ºã€‚

**é¢˜è§£äºŒï¼ˆçšæœˆåŠæ´’èŠ±ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  å¼•å…¥Dilworthå®šç†æ·±åŒ–ç†è®ºåˆ†æï¼ˆLDSæ•°=åé“¾æ•°ï¼‰ï¼Œä»£ç å®ç°ç‹¬ç‰¹ï¼šç”¨`std::reverse`ä¿è¯å—å†…é€’å¢ã€‚äº®ç‚¹åœ¨äºæ•°å­¦ä¸¥è°¨æ€§ï¼Œ`std::ceil(std::sqrt(n))`å¤„ç†éæ•´é™¤æƒ…å†µï¼Œé€‚åˆæ‹“å±•æ€ç»´ã€‚

**é¢˜è§£ä¸‰ï¼ˆagicyï¼‰**  
* **ç‚¹è¯„**ï¼š  
  é€šè¿‡æ•°æ®é©±åŠ¨å‘ç°è§„å¾‹ï¼ˆåˆ—ä¸¾n=1~15çš„æ„é€ ï¼‰ï¼Œä»£ç ç”¨å¯„å­˜å™¨å˜é‡ä¼˜åŒ–ã€‚äº®ç‚¹åœ¨è°ƒè¯•ç»éªŒï¼š"è¾¹ç•Œæ¡ä»¶ç”¨`i>0`è·³è¿‡éæ­£æ•°"ï¼Œä½“ç°å®è·µæ™ºæ…§ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šç¡®å®šæœ€ä¼˜åˆ†å—å¤§å°**  
   * **åˆ†æ**ï¼šéœ€æœ€å°åŒ–$k + n/k$ã€‚ä¼˜è´¨é¢˜è§£å‡ç”¨$\sqrt{n}$è¿‘ä¼¼ï¼Œå¦‚`bl=sqrt(n)`ï¼ˆFxorGï¼‰æˆ–`m=ceil(sqrt(n))`ï¼ˆçšæœˆåŠæ´’èŠ±ï¼‰  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š$\sqrt{n}$æ˜¯å¹³è¡¡å—é•¿ä¸å—æ•°çš„é»„é‡‘åˆ†å‰²ç‚¹

2. **éš¾ç‚¹ï¼šæ„é€ å—å†…é€’å¢åºåˆ—**  
   * **åˆ†æ**ï¼šå€’åºç”Ÿæˆå—ï¼ˆ`for(i=n-bl+1;i<=n;i++)`ï¼‰ï¼Œä¿è¯å—å†…å‡åºã€‚agicyçš„è°ƒè¯•ç»éªŒå¼ºè°ƒè¾¹ç•Œå¤„ç†  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå€’åºå¡«å……æ˜¯ä¿è¯å—å†…æœ‰åºçš„å…³é”®æŠ€å·§

3. **éš¾ç‚¹ï¼šå¤„ç†éæ•´é™¤æƒ…å†µ**  
   * **åˆ†æ**ï¼šæœ€åä¸€å—é•¿åº¦å¯èƒ½ä¸è¶³$k$ã€‚çšæœˆåŠæ´’èŠ±ç”¨`ceil`ä¿è¯å®Œæ•´åˆ†å—ï¼ŒFxorGç”¨`n-=bl`åŠ¨æ€è°ƒæ•´  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`n-=bl`å¯è‡ªåŠ¨å¤„ç†å‰©ä½™å…ƒç´ 

#### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **åˆ†å—å¹³è¡¡æœ¯**ï¼šå°†å¤æ‚æ’åˆ—åˆ†è§£ä¸º$\sqrt{n}$è§„æ¨¡å­é—®é¢˜  
- **å€’åºæ„é€ æ³•**ï¼šä»å¤§æ•°åˆ°å°æ•°å¡«å……ä¿è¯å—å†…æœ‰åº  
- **è¾¹ç•Œé˜²å¾¡**ï¼šç”¨`if(i>0)`ç­‰è¯­å¥è§„é¿éæ³•ç´¢å¼•  

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
* **è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ï¼Œä½“ç°åˆ†å—æ€æƒ³çš„æœ€ç®€å®ç°  
* **å®Œæ•´ä»£ç **ï¼š
```cpp
#include <iostream>
#include <cmath>
using namespace std;

int main() {
    int n, k;
    cin >> n;
    k = sqrt(n);  // æœ€ä¼˜å—é•¿
    while (n > 0) {
        // å€’åºè¾“å‡ºå½“å‰å—ï¼ˆä¿è¯å—å†…é€’å¢ï¼‰
        for (int i = n - k + 1; i <= n; i++) 
            if (i > 0) cout << i << " ";
        n -= k;  // ç§»è‡³ä¸‹ä¸€å—
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  > 1. è®¡ç®—æœ€ä¼˜å—é•¿`k=sqrt(n)`  
  > 2. å¾ªç¯å¤„ç†æ¯ä¸ªå—ï¼šä»å½“å‰å—æœ€å¤§æ•°å€’åºè¾“å‡º  
  > 3. `n-=k`æ›´æ–°å‰©ä½™æ•°å­—é‡  
  > 4. è¾¹ç•Œä¿æŠ¤`if(i>0)`é˜²æ­¢è´Ÿç´¢å¼•  

**é¢˜è§£ä¸€ç‰‡æ®µèµæ**ï¼ˆFxorGï¼‰  
* **äº®ç‚¹**ï¼šä¸¥æ ¼æ•°å­¦è¯æ˜ç»“åˆæç®€å®ç°  
* **æ ¸å¿ƒä»£ç **ï¼š
```cpp
for(int i=n-bl+1; i<=n; i++) 
    if(i>0) printf("%d ",i);
n -= bl;
```
* **ä»£ç è§£è¯»**ï¼š  
  > - ä¸ºä½•`i=n-bl+1`ï¼Ÿ â†’ å®šä½å½“å‰å—èµ·å§‹å€¼  
  > - `if(i>0)`ä½œç”¨ï¼Ÿ â†’ æœ€åä¸€å—å¯èƒ½ä¸è¶³blä¸ªå…ƒç´   
  > - `n-=bl`æ„ä¹‰ï¼Ÿ â†’ ç±»ä¼¼"å‰¥æ´‹è‘±"ç§»é™¤å·²å¤„ç†å—  

**é¢˜è§£äºŒç‰‡æ®µèµæ**ï¼ˆçšæœˆåŠæ´’èŠ±ï¼‰  
* **äº®ç‚¹**ï¼š`std::reverse`ä¿è¯å—å†…å‡åº  
* **æ ¸å¿ƒä»£ç **ï¼š
```cpp
std::reverse(ans+q+1, ans+p+1);
```
* **ä»£ç è§£è¯»**ï¼š  
  > å…ˆå¡«å……`[q+1, p]`ä¸ºé™åºï¼Œå†åè½¬å˜ä¸ºå‡åº â†’ é¿å…å€’åºè®¡ç®—ç´¢å¼•  

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š*ã€Šåƒç´ ä¿„ç½—æ–¯å—ã€‹â€”â€” åˆ†å—æ„é€ æ¨¡æ‹Ÿå™¨*  
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½æœºåƒç´ é£æ ¼å‘ˆç°åˆ†å—è¿‡ç¨‹ï¼ŒéŸ³æ•ˆå¼ºåŒ–å…³é”®æ“ä½œè®°å¿†  

**åŠ¨ç”»æµç¨‹**ï¼š  
1. **åˆå§‹åŒ–**ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰  
   - å±å¹•æ˜¾ç¤º1~nçš„æ•°å­—æ–¹å—ï¼ˆ16è‰²åƒç´ å—ï¼‰  
   - æ§åˆ¶é¢æ¿ï¼šâ–¶ï¸æš‚åœ/â©å•æ­¥/ğŸ”„é‡ç½®/ğŸšï¸é€Ÿåº¦æ»‘å—  

2. **åˆ†å—æ¼”ç¤º**ï¼ˆæ¯æ­¥0.5ç§’ï¼‰  
   ```plaintext
   ç¬¬1å¸§ï¼š [12][13][14][15]  â† æ–°å—é«˜äº®ï¼ˆé»„è‰²è¾¹æ¡†+"å’”"éŸ³æ•ˆï¼‰
          [9][10][11] 
          [6][7][8] 
   â†“ å—é—´ä¸‹é™åŠ¨ç”»ï¼ˆä¼´éš"å’»"éŸ³æ•ˆï¼‰
   ç¬¬2å¸§ï¼š [9][10][11]  â† å½“å‰å—é«˜äº®ï¼ˆé»„è‰²è¾¹æ¡†ï¼‰
          [6][7][8]
          [12][13][14][15]  â† å®Œæˆå—å˜ç°è‰²
   ```

3. **äº¤äº’è®¾è®¡**  
   - **å…³é”®æ“ä½œ**ï¼šå…¥é˜Ÿ/å‡ºå—æ—¶æ’­æ”¾8bitéŸ³æ•ˆ  
   - **AIæ¼”ç¤º**ï¼šè‡ªåŠ¨æ¨¡å¼åƒä¿„ç½—æ–¯æ–¹å—AIé€æ­¥åˆ†å—  
   - **è¿‡å…³æœºåˆ¶**ï¼šæ¯å®Œæˆä¸€ä¸ªå—å¾—â­ï¼Œé›†é½$\lceil n/k \rceil$â­é€šå…³  

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **æ´›è°·P1020**ï¼ˆå¯¼å¼¹æ‹¦æˆªï¼‰  
   â†’ å·©å›ºLIS/LDSæ¨¡å‹åº”ç”¨ï¼ŒDilworthå®šç†å®è·µ  
2. **æ´›è°·P1908**ï¼ˆé€†åºå¯¹ï¼‰  
   â†’ åˆ†å—æŠ€å·§åœ¨ç»Ÿè®¡é—®é¢˜ä¸­çš„å˜å½¢åº”ç”¨  
3. **æ´›è°·P1496**ï¼ˆç«çƒ§èµ¤å£ï¼‰  
   â†’ åŒºé—´åˆ†å—æ€æƒ³çš„è¿›é˜¶è®­ç»ƒ  

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **agicyçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"æ‰‹åŠ¨æ¨¡æ‹Ÿn=1~5çš„æ„é€ å¾—å‡ºé”™è¯¯ç»“è®ºï¼Œä½†ä¸ºæ­£ç¡®è§£æ³•æä¾›çº¿ç´¢"*  
>  
> **Kayç‚¹è¯„**ï¼š  
> æ•°æ®é©±åŠ¨æ˜¯ç ´è§£æ„é€ é¢˜çš„åˆ©å™¨ï¼å»ºè®®ï¼š  
> 1. nè¾ƒå°æ—¶æ‰‹åŠ¨æ¨¡æ‹Ÿæ‰¾è§„å¾‹  
> 2. è¾¹ç•Œå€¼ç”¨`cout<<i<<" ";`è°ƒè¯•  
> 3. å¯¹æ¯”$\sqrt{n}$ä¸$\lceil \sqrt{n} \rceil$çš„å½±å“  

---

**ç»“è¯­**  
é€šè¿‡åˆ†å—æ„é€ å°†LIS/LDSä¹‹å’Œæœ€å°åŒ–ï¼Œæœ¬è´¨æ˜¯å¯»æ‰¾é—®é¢˜çš„æœ€ä¼˜åˆ†å‰²ç‚¹ã€‚è®°ä½ï¼š$\sqrt{n}$æ˜¯å¹³è¡¡è‰ºæœ¯çš„å…³é”®ï¼ä¸‹æ¬¡æˆ‘ä»¬å°†æ¢ç´¢æ›´å¤šåˆ†å—æŠ€å·§çš„åº”ç”¨åœºæ™¯ã€‚ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š93.56ç§’
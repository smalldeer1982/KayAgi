# 题目信息

# Polygon for the Angle

## 题目描述

You are given an angle $ \text{ang} $ .

The Jury asks You to find such regular $ n $ -gon (regular polygon with $ n $ vertices) that it has three vertices $ a $ , $ b $ and $ c $ (they can be non-consecutive) with $ \angle{abc} = \text{ang} $ or report that there is no such $ n $ -gon.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF1096C/a07369ed7e451bdcca3873a15baacc5b09a55799.png)If there are several answers, print the minimal one. It is guarantied that if answer exists then it doesn't exceed $ 998244353 $ .

## 说明/提示

The answer for the first query is on the picture above.

The answer for the second query is reached on a regular $ 18 $ -gon. For example, $ \angle{v_2 v_1 v_6} = 50^{\circ} $ .

The example angle for the third query is $ \angle{v_{11} v_{10} v_{12}} = 2^{\circ} $ .

In the fourth query, minimal possible $ n $ is $ 180 $ (not $ 90 $ ).

## 样例 #1

### 输入

```
4
54
50
2
178
```

### 输出

```
10
18
90
180
```

# AI分析结果


### 💡 Kay的C++算法解析：Polygon for the Angle 深入学习指南 💡

**引言**  
今天我们来分析CF1096C "Polygon for the Angle"。这道题要求找到最小的正n边形，使其存在三个顶点构成给定角度θ。本指南将解析数学推导与优化技巧，并通过像素动画帮助直观理解核心算法。

---

### 1. 题目解读与核心算法识别
✨ **本题主要考察**：数学（几何与数论应用）  
🗣️ **初步分析**：  
> 解决本题需理解正多边形角度性质与圆周角定理。想象一个像素化的圆形舞台（类似复古游戏《俄罗斯方块》的旋转特效），正n边形的每个顶点是舞台上的像素点，圆心角是舞台灯光的分区（每份360°/n），圆周角是角色视角（180°/n）。  
> - **核心思路**：角度θ必须满足θ = 180°×k/n（k为整数且1≤k≤n-2），转化为求最小n使θ×n能被180整除且θ≤(n-2)×180°/n。  
> - **可视化设计**：动画将展示圆上正多边形顶点（8-bit像素块），高亮三点A,B,C及∠ABC（闪烁黄色），伴随"叮"音效标记关键步骤。控制面板支持调速滑块（0.5x-2x），"AI演示"模式自动遍历k值，胜利时播放《超级玛丽》过关音效。

---

### 2. 精选优质题解参考
**题解一（nydzsf_qwq）**  
* **点评**：  
  思路直击数学本质，推导出公式`n = ceil(ceil(360/(180-θ)) / (180/gcd(θ,180))) * (180/gcd(θ,180))`。代码简洁（15行），变量名`tmp1/tmp2`虽简短但配合注释易理解。亮点是**避免枚举**，复杂度O(Tlogθ)，竞赛实践价值高。作者强调"注意内角边界条件"，启发思考不等式转化。

**题解二（Heartlessly）**  
* **点评**：  
  预处理方案枚举n∈[3,360]和k∈[1,n-2]，记录最小n。代码规范（定义MAXN常量），函数封装（read/write），可读性强。亮点是**直观展示圆周角定理**，θ=180k/n的几何意义清晰（附SVG示意图）。调试建议"动手模拟小n案例"，适合初学者理解。

**题解六（porse114514）**  
* **点评**：  
  枚举k值求n=180(k-1)/θ，检查n≥k+2。代码逻辑清晰（20行），关键变量`k`从2开始枚举（避免无效解）。亮点是**逆向思维**（从角度份数k反推n），作者心得"注意k与n的约束关系"点明易错点。

---

### 3. 核心难点辨析与解题策略
1. **难点：角度表示与整数约束**  
   *分析*：θ=180k/n需同时满足k为整数且n≥k+2。优质题解通过`gcd(θ,180)`化简方程（题解1/6），或预处理所有可能θ（题解2）。  
   💡 **学习笔记**：数学变换是降低复杂度的钥匙！

2. **难点：边界条件验证**  
   *分析*：θ必须≤内角(n-2)×180°/n。题解1用`ceil(360/(180-θ))`确保下界，题解6循环检查`n≥k+2`。  
   💡 **学习笔记**：几何条件需严格转化为不等式。

3. **难点：最小n的确定性**  
   *分析*：存在多组(k,n)时取最小n。预处理法天然满足（从小到大枚举），公式法通过`ceil`保证最小性。  
   💡 **学习笔记**：问题约束是优化方向的灯塔。

✨ **解题技巧总结**  
- **技巧A（数学变换）**：用gcd化简分数方程，避免浮点误差（如θ=54°→d=gcd(54,180)=18）。  
- **技巧B（边界处理）**：内角条件转化为`360/(180-θ)`的向上取整。  
- **技巧C（枚举优化）**：预处理[3,360]覆盖所有解（因360边形可生成1°-179°）。

---

### 4. C++核心代码实现赏析
**通用核心实现**  
```cpp
#include <iostream>
using namespace std;

int gcd(int a, int b) {
    return b ? gcd(b, a % b) : a;
}

int main() {
    int T, ang;
    cin >> T;
    while (T--) {
        cin >> ang;
        int d = gcd(ang, 180);
        int base = 180 / d;
        int t = (2 * d + 180 - ang - 1) / (180 - ang); // ceil(2d/(180-ang))
        cout << t * base << endl;
    }
    return 0;
}
```
* **说明**：综合题解1/3的数学推导，直接计算最小n。  
* **解读概要**：  
  1. 计算`d=gcd(θ,180)`化简方程  
  2. `base=180/d`是n的基倍数  
  3. `t=ceil(2d/(180-θ))`满足k≤n-2  
  4. 输出`t×base`

**题解一片段赏析**  
```cpp
tmp1 = 180 / gcd(ang, 180);
tmp2 = (360 + 180 - ang - 1) / (180 - ang); // ceil(360/(180-ang))
ans = (tmp2 + tmp1 - 1) / tmp1 * tmp1;     // 基倍数向上取整
```
* **亮点**：用整数除法实现向上取整，避免浮点运算。  
* **解读**：  
  `tmp1`是基倍数（180/d），`tmp2`是内角约束的最小n。`(a+b-1)/b`是经典向上取整技巧，如`tmp2=3, tmp1=10`时，`(3+10-1)/10=1`。  
* 💡 **学习笔记**：整数除法取整是竞赛常用优化手段。

**题解二片段赏析**  
```cpp
for (int i = 3; i <= 360; ++i)
    for (int j = 1; j <= i - 2; ++j)
        if (180 * j % i == 0 && !theta[180 * j / i])
            theta[180 * j / i] = i; // 记录角度对应最小n
```
* **亮点**：预处理表O(1)响应查询。  
* **解读**：外层枚举n，内层枚举份数k（代码中j）。`180*j%i==0`确保角度整数，`!theta[]`保证最小性。  
* 💡 **学习笔记**：空间换时间是预处理的核心思想。

**题解六片段赏析**  
```cpp
x = 2; // k从2开始（份数≥2）
while (1) {
    if ((x * 180 - 180) % ang == 0) { // 检查整除
        n = (x * 180 - 180) / ang;
        if (n > x) { // 检查k≤n-2
            cout << n << '\n';
            break;
        }
    }
    x++;
}
```
* **亮点**：枚举份数k（代码中x）反推n。  
* **解读**：`x*180-180`对应180(k-1)，`n> x`等价于k≤n-2（因k=x）。  
* 💡 **学习笔记**：逆向枚举可能减少尝试次数。

---

### 5. 算法可视化：像素动画演示
**主题**：8-bit正多边形建造者（复古几何游戏）  
**核心演示**：动态生成正n边形，标记三点验证∠ABC=θ  
**设计思路**：像素风格降低理解门槛，游戏化增强参与感（如n=10时角色"跳"到顶点3）。  

**动画步骤**：  
1. **初始化**：  
   - 画布绘制圆形舞台（深蓝背景），中心显示"θ=54°"（16x16像素字体）。  
   - 控制面板：速度滑块（0.5x-2x）、单步/暂停/重置按钮（FC手柄样式）。  
2. **生成多边形**：  
   - 根据当前n（初始3）等分圆，顶点用彩色像素块表示（红/绿/蓝交替）。  
   - 音效：每生成一条边播放短促"哔"声（8-bit合成音）。  
3. **动态选点**：  
   - B点固定（红色闪烁），A/C点沿圆移动（绿色箭头指引），实时显示当前∠ABC（右下角）。  
   - 关键帧：当∠ABC=θ时，三点高亮黄色，播放《塞尔达》解谜成功音效。  
4. **AI演示模式**：  
   - 自动遍历k值（1→n-2），每步0.5秒，角度匹配时显示公式`θ=180*k/n`。  
   - 胜利动画：多边形旋转缩放，显示"n=10"（烟花像素特效+胜利音效）。  

**技术细节**：  
- 圆心角计算：`360/n`，圆周角：`180*k/n`  
- 状态高亮：当前操作元素用闪烁边框（CSS动画`border: 2px solid #FF0`）  
- 数据结构可视化：队列存储待尝试的k值（像素方块从右侧滑入）  

---

### 6. 拓展练习与相似问题思考
**技巧迁移**：  
圆周角定理与整数约束可迁移至：  
1. 正多边形对角线角度计算  
2. 圆上三点构角的最值问题  
3. 几何与数论结合的优化问题  

**洛谷推荐**：  
1. **P3386 【模板】二分图匹配**  
   🗣️ 推荐理由：锻炼整数约束与建模能力，巩固gcd应用。  
2. **P1217 回文质数**  
   🗣️ 推荐理由：结合数论（质数）与边界处理，强化枚举优化思维。  
3. **P1378 油滴扩展**  
   🗣️ 推荐理由：几何覆盖问题，训练圆周角与面积计算。  

---

### 7. 学习心得与经验分享
**参考经验**（题解1/6作者）：  
> "推导θ≤(n-2)×180°/n时，先画图验证小n案例（如n=3/4）避免公式错误。"  
> "注意：k=1时∠ABC=0°无效，故枚举起点为k=2（份数x=2）。"

**点评**：  
调试时**可视化小规模案例**是关键（如θ=30°手动演算n=12），可快速验证边界条件。竞赛中先暴力枚举小范围再数学优化是常用策略。

---

**结语**  
通过本指南，大家掌握了正多边形角度问题的两种核心解法（数学推导与预处理），并借助像素动画直观理解圆周角定理。记住：将几何问题转化为数论方程是突破点！下次挑战见！💪

---
处理用时：314.14秒
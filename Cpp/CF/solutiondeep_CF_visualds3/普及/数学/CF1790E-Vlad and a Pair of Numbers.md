# 题目信息

# Vlad and a Pair of Numbers

## 题目描述

Vlad found two positive numbers $ a $ and $ b $ ( $ a,b>0 $ ). He discovered that $ a \oplus b = \frac{a + b}{2} $ , where $ \oplus $ means the [bitwise exclusive OR](http://tiny.cc/xor_wiki_eng) , and division is performed without rounding..

Since it is easier to remember one number than two, Vlad remembered only $ a\oplus b $ , let's denote this number as $ x $ . Help him find any suitable $ a $ and $ b $ or tell him that they do not exist.

## 样例 #1

### 输入

```
6
2
5
10
6
18
36```

### 输出

```
3 1
-1
13 7
-1
25 11
50 22```

# AI分析结果


### 💡 Kay的C++算法解析：Vlad and a Pair of Numbers 深入学习指南 💡

#### 题目解读与核心算法识别
✨ **本题主要考察**：`位运算与数学推导`

🗣️ **初步分析**：
> 本题的核心在于理解位运算性质与数学等式的联动关系。想象两个数字的二进制位如同两列士兵，异或运算（XOR）是"不同为1"，而加法是"进位统计"。关键等式 $a \oplus b = \frac{a+b}{2}$ 揭示了士兵排列的隐藏规律：  
> - **规律推导**：通过位运算公式 $a+b = (a \oplus b) + 2 \cdot (a \& b)$ 与题目等式结合，可得 $a \& b = \frac{a \oplus b}{2}$  
> - **难点突破**：需满足两个条件：① $x$ 必须是偶数（否则无解） ② $x$ 与 $x/2$ 的二进制位无重叠（即 $x \& (x/2) = 0$）  
> - **可视化设计**：采用8位像素网格展示二进制位变化（如红色像素表示 $x$ 的"1"位，蓝色表示 $x/2$ 的"1"位），当红蓝像素重叠时播放"错误音效"，成功构造时显示像素方块 $a$ 和 $b$ 的组装动画

---

#### 精选优质题解参考
**题解一（灵茶山艾府）**  
* **点评**：  
  思路直击本质——通过位运算公式推导出 $a \& b = x/2$ 的核心关系，并给出优雅构造 $a = x + x/2, b = x/2$。代码简洁高效（时间复杂度 $O(1)$），边界处理严谨（直接判断 $x$ 的奇偶性和位重叠）。亮点在于用数学证明替代枚举，深刻揭示位运算内在规律。

**题解二（幻想繁星）**  
* **点评**：  
  采用打表找规律的方法，发现解必然满足 $a = x/2, b = 3x/2$ 的构造模式。代码实现简单（10行内），变量命名清晰（$a, b, x$）。亮点在于通过数据观察归纳普适规律，并引用严谨数学证明增强可信度，适合初学者理解。

**题解三（wdgm4）**  
* **点评**：  
  从二进制视角解析构造原理：初始 $a=0, b=x$，通过同时增加 $x/2$ 调整值。代码包含详细注释，逻辑分层清晰（先判断后构造）。亮点在于用二进制位移说明 $x$ 与 $x/2$ 的位重叠检测原理，强化位运算直觉。

---

#### 核心难点辨析与解题策略
1. **难点：等式转换与位运算性质关联**  
   * **分析**：优质题解均从 $a+b=2x$ 和 $a \oplus b = x$ 出发，结合公式 $a+b = (a \oplus b) + 2 \cdot (a \& b)$ 推导出 $a \& b = x/2$，这是解题基石  
   * 💡 **学习笔记**：位运算与算术运算的联动性是本题关键突破口

2. **难点：二进制位的兼容性检验**  
   * **分析**：$x$ 为偶数且 $x \& (x/2) = 0$ 才能保证解存在。因为 $x$ 的"1"位要求 $a,b$ 在该位不同，而 $x/2$ 的"1"位要求相同，冲突则无解  
   * 💡 **学习笔记**：用 $x \text{ & } (x>>1) == 0$ 快速检测位重叠

3. **难点：构造方案的数学严谨性**  
   * **分析**：给定 $x$ 和 $x/2$ 后，$a$ 需包含 $x$ 的所有"独立位"和共享位（即 $a = x \mid (x/2)$），而 $b$ 仅保留共享位（$b = x/2$）  
   * 💡 **学习笔记**：$a$ 是"全集"，$b$ 是"子集"的构造模式具有普适性

### ✨ 解题技巧总结
- **技巧1：位运算公式化** – 将 $a+b$ 拆解为 $(a \oplus b) + 2 \cdot (a \& b)$ 是位运算问题的核心工具  
- **技巧2：边界先行验证** – 优先检查 $x$ 的奇偶性和位冲突（省去无效计算）  
- **技巧3：数学构造优先于枚举** – 通过数学推导直接生成解而非暴力搜索  

---

#### C++核心代码实现赏析
**通用核心实现参考**  
* **说明**：综合优质题解思路，最简明的通用实现  
* **完整核心代码**：
```cpp
#include <iostream>
using namespace std;

int main() {
    int T, x;
    cin >> T;
    while (T--) {
        cin >> x;
        int and_val = x >> 1;  // x/2
        if ((x & 1) || (x & and_val)) cout << "-1\n";
        else cout << (x | and_val) << " " << and_val << "\n";
    }
    return 0;
}
```
* **代码解读概要**：  
  1. 读取 $x$ 并计算 $x/2$（位右移实现除法）  
  2. 双条件检测：$x$ 为奇数 或 $x$ 与 $x/2$ 存在位重叠 → 无解  
  3. 构造解：$a = x \mid (x/2)$（合并所有位），$b = x/2$  

**题解一（灵茶山艾府）片段**  
* **亮点**：用位运算替代算术运算，极致简洁  
* **核心代码**：
```cpp
if (xor & 1 > 0 || xor & and > 0) 
    Println(-1)
else 
    Println(xor | and, and)
```
* **代码解读**：  
  > `xor & 1` 检测最低位（奇偶性），`xor & and` 检测位重叠。`xor | and` 巧妙合并独立位和共享位生成 $a$，$b$ 直接取 $and$ 值  
* 💡 **学习笔记**：位掩码操作是高效处理二进制条件的关键  

**题解二（幻想繁星）片段**  
* **亮点**：通过打表发现的直观构造法  
* **核心代码**：
```cpp
int a = x / 2, b = 2 * x - a;
if ((a ^ b) == x) cout << a << " " << b;
```
* **代码解读**：  
  > 直接假设 $a = x/2$，则 $b = 2x - a = 3x/2$。验证 $a \oplus b == x$ 即可判断有效性  
* 💡 **学习笔记**：特殊构造法需数学证明支撑，但代码更易理解  

---

### 算法可视化：像素动画演示
**主题**：8位像素风格位构造工坊  
**核心演示**：二进制位兼容性检测与数字组装过程  

**设计思路**：  
> 复古红白机像素网格（16x16）展示 $x$ 的二进制位。$x$ 的"1"位用红色像素，$x/2$ 的"1"位用蓝色像素。当红蓝像素重叠时触发闪烁警报和错误音效，成功时显示 $a, b$ 像素方块组装动画  

**动画流程**：  
1. **初始化**：8-bit 背景音乐启动，网格显示 $x$ 的二进制流（如 $x=6$ → `0110`）  
   <img src="https://via.placeholder.com/150x150/000000/FFFFFF?text=x=6" width="100">  
2. **检测阶段**：  
   - 扫描最低位：红色像素单独出现 → 播放"通过"音效  
   - 扫描高位：红蓝像素在第二位重叠 → 触发闪烁警报和"失败"音效  
3. **构造阶段（$x=10$ 示例）**：  
   - $x$=`1010`（红），$x/2$=`0101`（蓝）→ 无重叠  
   - $a$ 方块组装：合并红蓝像素 → `1111`（15）  
   - $b$ 方块组装：仅蓝像素 → `0101`（5）  
4. **交互控制**：  
   - 步进按钮：单步展示位检测  
   - 速度滑块：调节AI自动演示速度（如贪吃蛇寻路式位扫描）  
   - 重置：清空网格  

**音效设计**：  
- 位匹配：清脆"叮"声（256Hz方波）  
- 位冲突：短促警报（120Hz锯齿波）  
- 构造成功：8-bit胜利旋律  

---

### 拓展练习与相似问题思考
**通用技巧迁移**：  
位运算构造法适用于：① 二进制等式约束 ② 算术/位运算联动问题 ③ 数值拆分验证  

**洛谷推荐**：  
1. **P1469 找筷子** - 异或性质妙用  
   🗣️ *推荐理由*：巩固异或的"成对消除"特性，与本题位分析思路互补  
2. **P1100 高低位交换** - 位运算拆分与重组  
   🗣️ *推荐理由*：训练位掩码操作，强化二进制构造能力  
3. **P2114 位运算难题** - 多重位操作组合  
   🗣️ *推荐理由*：提升复杂位运算表达式的分析与实现能力  

---

### 学习心得与经验分享
> **灵茶山艾府的经验**：  
> *"位运算问题常需从数学公式切入，避免盲目枚举"*  
> **Kay的点评**：此心得强调了数学推导对位运算优化的指导性——先证明后编码可大幅提升效率  

---

本次解析结束！通过位运算与数学的深度结合，我们揭开了数字构造的奥秘。记得多用二进制视角分析问题，下次挑战见！💪

---
处理用时：92.55秒
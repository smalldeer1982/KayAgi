# é¢˜ç›®ä¿¡æ¯

# Phillip and Trains

## é¢˜ç›®æè¿°

The mobile application store has a new game called "Subway Roller".

The protagonist of the game Philip is located in one end of the tunnel and wants to get out of the other one. The tunnel is a rectangular field consisting of three rows and $ n $ columns. At the beginning of the game the hero is in some cell of the leftmost column. Some number of trains rides towards the hero. Each train consists of two or more neighbouring cells in some row of the field.

All trains are moving from right to left at a speed of two cells per second, and the hero runs from left to right at the speed of one cell per second. For simplicity, the game is implemented so that the hero and the trains move in turns. First, the hero moves one cell to the right, then one square up or down, or stays idle. Then all the trains move twice simultaneously one cell to the left. Thus, in one move, Philip definitely makes a move to the right and can move up or down. If at any point, Philip is in the same cell with a train, he loses. If the train reaches the left column, it continues to move as before, leaving the tunnel.

Your task is to answer the question whether there is a sequence of movements of Philip, such that he would be able to get to the rightmost column.

 ![](https://cdn.luogu.com.cn/upload/vjudge_pic/CF585B/309f950d64c5a7d55f4952aae670b86363abc76b.png)

## è¯´æ˜/æç¤º

In the first set of the input of the first sample Philip must first go forward and go down to the third row of the field, then go only forward, then go forward and climb to the second row, go forward again and go up to the first row. After that way no train blocks Philip's path, so he can go straight to the end of the tunnel.

Note that in this problem the challenges are restricted to tests that contain only one testset.

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
16 4
...AAAAA........
s.BBB......CCCCC
........DDDDD...
16 4
...AAAAA........
s.BBB....CCCCC..
.......DDDDD....
```

### è¾“å‡º

```
YES
NO
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2
10 4
s.ZZ......
.....AAABB
.YYYYYY...
10 4
s.ZZ......
....AAAABB
.YYYYYY...
```

### è¾“å‡º

```
YES
NO
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPhillip and Trains æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢ï¼ˆDFS/BFSï¼‰+ ç›¸å¯¹è¿åŠ¨æ€æƒ³  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œPhillip and Trainsâ€çš„å…³é”®ï¼Œåœ¨äº**å°†ç«è½¦çš„ç§»åŠ¨è½¬åŒ–ä¸ºPhillipçš„ç›¸å¯¹ç§»åŠ¨**â€”â€”å°±åƒä½ åœ¨ç«è½¦ä¸Šèµ°ï¼Œçª—å¤–çš„æ ‘çœ‹ä¼¼åœ¨åé€€ï¼Œä½†å…¶å®æ˜¯ä½ åœ¨å‰è¿›ã€‚é¢˜ç›®ä¸­ç«è½¦å·¦ç§»2æ ¼ï¼Œç­‰ä»·äºPhillipåœ¨è‡ªå·±çš„ç§»åŠ¨åŸºç¡€ä¸Šå¤šå³ç§»2æ ¼ï¼ˆå› ä¸ºä¸¤è€…æ˜¯ç›¸å¯¹çš„ï¼‰ã€‚è¿™æ ·ï¼Œæ¯å›åˆPhillipçš„åŠ¨ä½œå¯ä»¥ç®€åŒ–ä¸ºï¼š**å…ˆå³ç§»1æ ¼ï¼Œå†é€‰æ‹©ä¸Šä¸‹ç§»åŠ¨æˆ–ä¸åŠ¨ï¼Œæœ€åå†å³ç§»2æ ¼**ï¼ˆæ€»å…±å³ç§»3æ ¼ï¼‰ã€‚åªè¦è¿™3æ ¼è·¯å¾„ä¸Šæ²¡æœ‰ç«è½¦ï¼Œä»–å°±èƒ½å®‰å…¨å‰è¿›ã€‚  

**æ ¸å¿ƒç®—æ³•**ï¼šæˆ‘ä»¬éœ€è¦ç”¨**æœç´¢ï¼ˆDFSæˆ–BFSï¼‰**éå†Phillipæ‰€æœ‰å¯èƒ½çš„ç§»åŠ¨è·¯å¾„ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€æ¡è·¯å¾„èƒ½åˆ°è¾¾æœ€å³åˆ—ã€‚æœç´¢çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š  
- ä»èµ·ç‚¹å‡ºå‘ï¼Œå°è¯•â€œä¸Šã€ä¸­ã€ä¸‹â€ä¸‰ä¸ªæ–¹å‘çš„ç§»åŠ¨ï¼ˆæ³¨æ„è¾¹ç•Œï¼Œä¸èƒ½å‡º1-3è¡Œï¼‰ï¼›  
- æ£€æŸ¥æ¯ä¸ªæ–¹å‘çš„**æ¥ä¸‹æ¥3æ ¼**ï¼ˆå³ç§»1æ ¼+2æ ¼ï¼‰æ˜¯å¦æœ‰ç«è½¦ï¼ˆå³æ˜¯å¦ä¸º`.`ï¼‰ï¼›  
- å¦‚æœå®‰å…¨ï¼Œå°±é€’å½’/å…¥é˜Ÿç»§ç»­æœç´¢ä¸‹ä¸€ä¸ªä½ç½®ï¼›  
- ç”¨`vis`æ•°ç»„æ ‡è®°å·²è®¿é—®çš„ä½ç½®ï¼Œé¿å…é‡å¤æœç´¢ï¼ˆå¦åˆ™ä¼šè¶…æ—¶ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿéš§é“åœºæ™¯ï¼ˆ3è¡Œnåˆ—çš„ç½‘æ ¼ï¼‰ï¼Œç”¨ä¸åŒé¢œè‰²æ ‡è®°ï¼š  
- ğŸ”µ ä»£è¡¨Phillipçš„ä½ç½®ï¼›  
- ğŸ”´ ä»£è¡¨ç«è½¦ï¼ˆéšœç¢ç‰©ï¼‰ï¼›  
- ğŸŸ¢ ä»£è¡¨å·²æ¢ç´¢çš„å®‰å…¨è·¯å¾„ã€‚  
åŠ¨ç”»ä¸­ï¼ŒPhillipæ¯ç§»åŠ¨ä¸€æ­¥ï¼Œä¼šæœ‰â€œè„šæ­¥â€éŸ³æ•ˆï¼Œç¢°åˆ°ç«è½¦æ—¶æ’­æ”¾â€œç¢°æ’â€éŸ³æ•ˆã€‚é€šè¿‡â€œå•æ­¥æ‰§è¡Œâ€å¯ä»¥çœ‹æ¸…æ¯ä¸€æ­¥çš„åˆ¤æ–­è¿‡ç¨‹ï¼Œâ€œè‡ªåŠ¨æ’­æ”¾â€åˆ™èƒ½å¿«é€Ÿå±•ç¤ºå®Œæ•´è·¯å¾„ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šlraM41ï¼Œèµï¼š5ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æå…¶æ¸…æ™°**ï¼Œç”¨DFSå®Œç¾è§£å†³äº†é—®é¢˜ã€‚æ ¸å¿ƒäº®ç‚¹æ˜¯**ç›¸å¯¹è¿åŠ¨çš„è½¬æ¢**â€”â€”æŠŠç«è½¦å·¦ç§»2æ ¼è½¬åŒ–ä¸ºPhillipå³ç§»2æ ¼ï¼Œä»è€Œå°†æ¯å›åˆçš„ç§»åŠ¨ç®€åŒ–ä¸ºâ€œå³ç§»3æ ¼+ä¸Šä¸‹è°ƒæ•´â€ã€‚ä»£ç ä¸­çš„`dfs(x, y)`å‡½æ•°è¡¨ç¤ºPhillipå½“å‰åœ¨ç¬¬`x`è¡Œã€ç¬¬`y`åˆ—ï¼Œé€’å½’å¤„ç†ä¸‰ä¸ªæ–¹å‘çš„ç§»åŠ¨ï¼š  
  - æ£€æŸ¥`y+1`ï¼ˆå³ç§»1æ ¼ï¼‰æ˜¯å¦æœ‰ç«è½¦ï¼›  
  - æ£€æŸ¥`y+1`ã€`y+2`ã€`y+3`ï¼ˆæ€»å…±3æ ¼ï¼‰æ˜¯å¦å®‰å…¨ï¼›  
  - ç”¨`vis`æ•°ç»„æ ‡è®°å·²è®¿é—®çš„ä½ç½®ï¼Œé¿å…é‡å¤æœç´¢ã€‚  
  ä»£ç é£æ ¼ç®€æ´ï¼Œå˜é‡åï¼ˆå¦‚`fx`è¡¨ç¤ºèµ·ç‚¹è¡Œï¼‰å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ï¼ˆå¦‚`i<1||i>3`ï¼‰ä¸¥è°¨ï¼Œéå¸¸é€‚åˆåˆå­¦è€…å­¦ä¹ ã€‚


### é¢˜è§£äºŒï¼ˆä½œè€…ï¼šinstallbï¼Œèµï¼š4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**BFS**å®ç°ï¼Œæ€è·¯åŒæ ·æ¸…æ™°ã€‚BFSçš„ä¼˜åŠ¿æ˜¯èƒ½å¿«é€Ÿæ‰¾åˆ°æœ€çŸ­è·¯å¾„ï¼ˆè™½ç„¶æœ¬é¢˜ä¸éœ€è¦ï¼Œä½†é€»è¾‘æ›´ç›´è§‚ï¼‰ã€‚æ ¸å¿ƒäº®ç‚¹æ˜¯**é˜Ÿåˆ—å¤„ç†çŠ¶æ€**ï¼š  
  - ç”¨`queue`å­˜å‚¨Phillipçš„ä½ç½®ï¼ˆ`lin`åˆ—ï¼Œ`col`è¡Œï¼‰ï¼›  
  - æ¯æ¬¡å–å‡ºé˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼Œå°è¯•ä¸‰ä¸ªæ–¹å‘çš„ç§»åŠ¨ï¼›  
  - æ£€æŸ¥`y+1`ã€`y+2`ã€`y+3`æ˜¯å¦å®‰å…¨ï¼Œè‹¥å®‰å…¨åˆ™å…¥é˜Ÿã€‚  
  ä»£ç ä¸­çš„`dirx`æ•°ç»„ï¼ˆ`-1,0,1`ï¼‰è¡¨ç¤ºä¸Šä¸‹ç§»åŠ¨çš„æ–¹å‘ï¼Œ`vis`æ•°ç»„é¿å…é‡å¤å…¥é˜Ÿï¼Œè¾¹ç•Œå¤„ç†ï¼ˆå¦‚`ty<1||ty>3`ï¼‰åˆ°ä½ã€‚ç›¸æ¯”DFSï¼ŒBFSæ›´é€‚åˆå¤„ç†â€œæ˜¯å¦å­˜åœ¨è·¯å¾„â€çš„é—®é¢˜ï¼Œå› ä¸ºä¸€æ—¦æ‰¾åˆ°è§£å°±èƒ½ç«‹å³è¿”å›ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šç›¸å¯¹è¿åŠ¨çš„è½¬æ¢**  
* **é—®é¢˜**ï¼šç›´æ¥æ¨¡æ‹Ÿç«è½¦ç§»åŠ¨ä¼šå¾ˆéº»çƒ¦ï¼ˆéœ€è¦ä¸æ–­æ›´æ–°ç«è½¦çš„ä½ç½®ï¼‰ï¼Œå®¹æ˜“å‡ºé”™ã€‚  
* **è§£å†³ç­–ç•¥**ï¼šç”¨ç›¸å¯¹è¿åŠ¨æ€æƒ³ï¼Œå°†ç«è½¦å·¦ç§»2æ ¼è½¬åŒ–ä¸ºPhillipå³ç§»2æ ¼ã€‚è¿™æ ·ï¼Œæ¯å›åˆPhillipæ€»å…±å³ç§»3æ ¼ï¼ˆ1+2ï¼‰ï¼Œåªéœ€æ£€æŸ¥è¿™3æ ¼æ˜¯å¦å®‰å…¨å³å¯ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç›¸å¯¹è¿åŠ¨æ˜¯è§£å†³â€œä¸¤è€…éƒ½ç§»åŠ¨â€é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œèƒ½ç®€åŒ–é—®é¢˜æ¨¡å‹ã€‚


### 2. **éš¾ç‚¹2ï¼šçŠ¶æ€åˆ¤æ–­ï¼ˆä¸‹ä¸€æ­¥æ˜¯å¦å®‰å…¨ï¼‰**  
* **é—®é¢˜**ï¼šPhillipçš„ç§»åŠ¨åˆ†ä¸ºä¸¤æ­¥ï¼ˆå³ç§»1æ ¼+ä¸Šä¸‹è°ƒæ•´+å³ç§»2æ ¼ï¼‰ï¼Œéœ€è¦ç¡®ä¿æ¯ä¸€æ­¥éƒ½ä¸ç¢°åˆ°ç«è½¦ã€‚  
* **è§£å†³ç­–ç•¥**ï¼šæ£€æŸ¥**æ¥ä¸‹æ¥3æ ¼**ï¼ˆ`y+1`ã€`y+2`ã€`y+3`ï¼‰æ˜¯å¦æœ‰ç«è½¦ï¼ˆå³æ˜¯å¦ä¸º`.`ï¼‰ã€‚ä¾‹å¦‚ï¼ŒlraM41çš„ä»£ç ä¸­ç”¨`!a[i][y+1]&&!a[i][y+2]&&!a[i][y+3]`åˆ¤æ–­ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€åˆ¤æ–­æ˜¯æœç´¢çš„æ ¸å¿ƒï¼Œå¿…é¡»è¦†ç›–æ‰€æœ‰å¯èƒ½çš„å±é™©æƒ…å†µã€‚


### 3. **éš¾ç‚¹3ï¼šé¿å…é‡å¤æœç´¢**  
* **é—®é¢˜**ï¼šå¦‚æœä¸æ ‡è®°å·²è®¿é—®çš„ä½ç½®ï¼Œæœç´¢ä¼šé™·å…¥æ— é™å¾ªç¯ï¼ˆæ¯”å¦‚æ¥å›ç§»åŠ¨ï¼‰ï¼Œå¯¼è‡´è¶…æ—¶ã€‚  
* **è§£å†³ç­–ç•¥**ï¼šç”¨`vis`æ•°ç»„æ ‡è®°Phillipå·²ç»è®¿é—®è¿‡çš„ä½ç½®ï¼ˆ`vis[x][y]`è¡¨ç¤ºç¬¬`x`è¡Œã€ç¬¬`y`åˆ—å·²æ¢ç´¢ï¼‰ï¼Œé¿å…é‡å¤å¤„ç†ã€‚ä¾‹å¦‚ï¼ŒlraM41çš„ä»£ç ä¸­`if(vis[x][y]||f)return;`å°±æ˜¯é˜²æ­¢é‡å¤æœç´¢ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`vis`æ•°ç»„æ˜¯æœç´¢çš„â€œä¿é™©æ “â€ï¼Œèƒ½æœ‰æ•ˆå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **ç›¸å¯¹è¿åŠ¨**ï¼šå°†å¤æ‚çš„åŒå‘ç§»åŠ¨è½¬åŒ–ä¸ºå•å‘ç§»åŠ¨ï¼Œç®€åŒ–é—®é¢˜ã€‚  
- **çŠ¶æ€åˆ¤æ–­**ï¼šå…¨é¢æ£€æŸ¥æ¯ä¸€æ­¥çš„å®‰å…¨æƒ…å†µï¼Œé¿å…é—æ¼ã€‚  
- **é¿å…é‡å¤**ï¼šç”¨`vis`æ•°ç»„æ ‡è®°å·²è®¿é—®çš„ä½ç½®ï¼Œæé«˜æœç´¢æ•ˆç‡ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆåŸºäºDFSï¼‰  
* **è¯´æ˜**ï¼šç»¼åˆlraM41çš„é¢˜è§£ï¼Œæç‚¼å‡ºæœ€ç®€æ´çš„DFSå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <cstring>
  using namespace std;

  const int MAXN = 105;
  int n, t, fx;
  bool a[4][MAXN], vis[4][MAXN], f; // a[i][j]è¡¨ç¤ºç¬¬iè¡Œç¬¬jåˆ—æ˜¯å¦æœ‰ç«è½¦ï¼Œvisæ ‡è®°å·²è®¿é—®ï¼Œfæ ‡è®°æ˜¯å¦æ‰¾åˆ°è§£

  void dfs(int x, int y) {
      if (y >= n) { f = true; return; } // åˆ°è¾¾æœ€å³åˆ—ï¼ŒæˆåŠŸ
      if (vis[x][y] || f) return; // å·²è®¿é—®æˆ–å·²æ‰¾åˆ°è§£ï¼Œè¿”å›
      vis[x][y] = true;
      if (a[x][y+1]) return; // å³ç§»1æ ¼æœ‰ç«è½¦ï¼Œæ— æ³•å‰è¿›
      // å°è¯•ä¸Šã€ä¸­ã€ä¸‹ä¸‰ä¸ªæ–¹å‘
      for (int i = x-1; i <= x+1; i++) {
          if (i < 1 || i > 3) continue; // è¶Šç•Œï¼Œè·³è¿‡
          // æ£€æŸ¥æ¥ä¸‹æ¥3æ ¼æ˜¯å¦å®‰å…¨
          if (!a[i][y+1] && !a[i][y+2] && !a[i][y+3]) {
              dfs(i, y+3); // é€’å½’æœç´¢ä¸‹ä¸€ä¸ªä½ç½®
          }
      }
  }

  int main() {
      cin >> t;
      while (t--) {
          memset(a, 0, sizeof(a));
          memset(vis, 0, sizeof(vis));
          f = false;
          cin >> n >> fx; // fxæ˜¯åºŸå˜é‡ï¼Œé¢˜ç›®ä¸­æ²¡ç”¨
          for (int i = 1; i <= 3; i++) {
              for (int j = 1; j <= n; j++) {
                  char c;
                  cin >> c;
                  if (c == 's') fx = i; // è®°å½•èµ·ç‚¹è¡Œ
                  else if (c != '.') a[i][j] = true; // ç«è½¦ä½ç½®æ ‡è®°ä¸ºtrue
              }
          }
          dfs(fx, 1); // ä»èµ·ç‚¹ï¼ˆç¬¬fxè¡Œï¼Œç¬¬1åˆ—ï¼‰å¼€å§‹æœç´¢
          cout << (f ? "YES" : "NO") << endl;
      }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š`dfs`å‡½æ•°å’Œ`main`å‡½æ•°ã€‚`dfs`å‡½æ•°è´Ÿè´£é€’å½’æœç´¢æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ï¼Œ`main`å‡½æ•°è´Ÿè´£è¯»å–è¾“å…¥ã€åˆå§‹åŒ–æ•°æ®ï¼Œå¹¶è°ƒç”¨`dfs`å‡½æ•°ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šä»èµ·ç‚¹å‡ºå‘ï¼Œå°è¯•ä¸‰ä¸ªæ–¹å‘çš„ç§»åŠ¨ï¼Œæ£€æŸ¥æ¯ä¸€æ­¥çš„å®‰å…¨æƒ…å†µï¼Œç›´åˆ°æ‰¾åˆ°è§£æˆ–éå†å®Œæ‰€æœ‰è·¯å¾„ã€‚


### é¢˜è§£ä¸€ï¼ˆlraM41ï¼‰ä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨DFSå¤„ç†è·¯å¾„æœç´¢ï¼Œé€»è¾‘æ¸…æ™°ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs(int x, int y) {
      if (y >= n) { f = 1; return; }
      if (vis[x][y] || f) return;
      vis[x][y] = 1;
      if (a[x][y+1]) return;
      for (int i = x-1; i <= x+1; i++) {
          if (i < 1 || i > 3) continue;
          if (!a[i][y+1] && !a[i][y+2] && !a[i][y+3]) dfs(i, y+3);
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `if (y >= n)`ï¼šå¦‚æœåˆ°è¾¾æœ€å³åˆ—ï¼Œæ ‡è®°`f`ä¸º`true`ï¼ˆæˆåŠŸï¼‰ã€‚  
  - `if (vis[x][y] || f)`ï¼šå¦‚æœå·²è®¿é—®è¿‡å½“å‰ä½ç½®æˆ–å·²æ‰¾åˆ°è§£ï¼Œè¿”å›ï¼ˆé¿å…é‡å¤æœç´¢ï¼‰ã€‚  
  - `vis[x][y] = 1`ï¼šæ ‡è®°å½“å‰ä½ç½®ä¸ºå·²è®¿é—®ã€‚  
  - `if (a[x][y+1])`ï¼šå¦‚æœå³ç§»1æ ¼æœ‰ç«è½¦ï¼Œæ— æ³•å‰è¿›ï¼Œè¿”å›ã€‚  
  - `for (int i = x-1; i <= x+1; i++)`ï¼šå°è¯•ä¸Šã€ä¸­ã€ä¸‹ä¸‰ä¸ªæ–¹å‘ã€‚  
  - `if (!a[i][y+1] && !a[i][y+2] && !a[i][y+3])`ï¼šæ£€æŸ¥æ¥ä¸‹æ¥3æ ¼æ˜¯å¦å®‰å…¨ï¼Œè‹¥å®‰å…¨åˆ™é€’å½’æœç´¢ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆ`y+3`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDFSçš„æ ¸å¿ƒæ˜¯â€œé€’å½’+å›æº¯â€ï¼Œè¿™é‡Œç”¨`vis`æ•°ç»„ä»£æ›¿å›æº¯ï¼ˆå› ä¸ºä¸€æ—¦è®¿é—®è¿‡å°±ä¸å†å¤„ç†ï¼‰ï¼Œç®€åŒ–äº†ä»£ç ã€‚


### é¢˜è§£äºŒï¼ˆinstallbï¼‰ä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨BFSå¤„ç†è·¯å¾„æœç´¢ï¼Œèƒ½å¿«é€Ÿæ‰¾åˆ°è§£ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  struct node {
      int lin; // åˆ—
      int col; // è¡Œ
  };
  queue<node> q;

  while (!q.empty()) {
      node aa = q.front();
      q.pop();
      if (aa.lin >= n) { flag = 1; break; }
      if (mp[aa.lin+1][aa.col] == 1 || mp[aa.lin][aa.col] == 1) continue;
      for (int i = 0; i < 3; i++) {
          int tx = aa.lin + 1;
          int ty = aa.col + dirx[i];
          if (ty < 1 || ty > 3) continue;
          if (mp[tx][ty] == 1) continue;
          tx = aa.lin + 2;
          if (mp[tx][ty] == 1) continue;
          tx = aa.lin + 3;
          if (mp[tx][ty] == 1) continue;
          if (vis[tx][ty] == 1) continue;
          vis[tx][ty] = 1;
          node bb;
          bb.lin = tx;
          bb.col = ty;
          q.push(bb);
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `struct node`ï¼šå­˜å‚¨Phillipçš„ä½ç½®ï¼ˆåˆ—`lin`ï¼Œè¡Œ`col`ï¼‰ã€‚  
  - `queue<node> q`ï¼šé˜Ÿåˆ—å­˜å‚¨å¾…å¤„ç†çš„ä½ç½®ã€‚  
  - `while (!q.empty())`ï¼šå¾ªç¯å¤„ç†é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªä½ç½®ã€‚  
  - `if (aa.lin >= n)`ï¼šå¦‚æœåˆ°è¾¾æœ€å³åˆ—ï¼Œæ ‡è®°`flag`ä¸º`1`ï¼ˆæˆåŠŸï¼‰ã€‚  
  - `for (int i = 0; i < 3; i++)`ï¼šå°è¯•ä¸Šã€ä¸­ã€ä¸‹ä¸‰ä¸ªæ–¹å‘ã€‚  
  - `tx = aa.lin + 1`ã€`tx = aa.lin + 2`ã€`tx = aa.lin + 3`ï¼šæ£€æŸ¥å³ç§»1ã€2ã€3æ ¼æ˜¯å¦å®‰å…¨ã€‚  
  - `vis[tx][ty] = 1`ï¼šæ ‡è®°å·²è®¿é—®çš„ä½ç½®ï¼Œé¿å…é‡å¤å…¥é˜Ÿã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šBFSçš„æ ¸å¿ƒæ˜¯â€œé˜Ÿåˆ—+å±‚æ¬¡éå†â€ï¼Œé€‚åˆå¤„ç†â€œæ˜¯å¦å­˜åœ¨è·¯å¾„â€çš„é—®é¢˜ï¼Œå› ä¸ºä¸€æ—¦æ‰¾åˆ°è§£å°±èƒ½ç«‹å³è¿”å›ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šåƒç´ éš§é“è·‘é…·ã€‹  
**é£æ ¼**ï¼š8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰ï¼Œç”¨ç®€å•çš„æ–¹å—å’Œé¢œè‰²æ¨¡æ‹Ÿåœºæ™¯ã€‚  
**æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼šå±•ç¤ºPhillipä»èµ·ç‚¹å‡ºå‘ï¼Œé€šè¿‡DFSæœç´¢è·¯å¾„ï¼Œé¿å¼€ç«è½¦åˆ°è¾¾ç»ˆç‚¹çš„è¿‡ç¨‹ã€‚


### è®¾è®¡æ€è·¯ç®€è¿°  
- **åœºæ™¯**ï¼š3è¡Œnåˆ—çš„éš§é“ï¼ˆç”¨ç½‘æ ¼è¡¨ç¤ºï¼‰ï¼Œé¡¶éƒ¨æœ‰â€œå¾—åˆ†â€å’Œâ€œæ­¥æ•°â€æ˜¾ç¤ºï¼Œåº•éƒ¨æœ‰â€œå•æ­¥â€â€œè‡ªåŠ¨â€â€œé‡ç½®â€æŒ‰é’®ã€‚  
- **å…ƒç´ **ï¼š  
  - ğŸ”µ æ–¹å—ï¼šPhillipçš„ä½ç½®ï¼ˆå¸¦è·‘æ­¥åŠ¨ç”»ï¼‰ï¼›  
  - ğŸ”´ æ–¹å—ï¼šç«è½¦ï¼ˆé™æ­¢ï¼Œå› ä¸ºç›¸å¯¹è¿åŠ¨ï¼‰ï¼›  
  - ğŸŸ¢ æ–¹å—ï¼šå·²æ¢ç´¢çš„å®‰å…¨è·¯å¾„ï¼›  
  - ğŸ”¤ æ–‡å­—ï¼šå½“å‰æ­¥æ•°ã€æ˜¯å¦æˆåŠŸã€‚  
- **äº¤äº’**ï¼š  
  - â€œå•æ­¥â€ï¼šç‚¹å‡»åPhillipç§»åŠ¨ä¸€æ­¥ï¼Œæ˜¾ç¤ºå½“å‰æ­¥éª¤çš„åˆ¤æ–­è¿‡ç¨‹ï¼ˆå¦‚æ£€æŸ¥`y+1`æ˜¯å¦æœ‰ç«è½¦ï¼‰ï¼›  
  - â€œè‡ªåŠ¨â€ï¼šPhillipè‡ªåŠ¨ç§»åŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°è§£æˆ–å¤±è´¥ï¼›  
  - â€œé‡ç½®â€ï¼šæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚  
- **éŸ³æ•ˆ**ï¼š  
  - ğŸƒ è·‘æ­¥å£°ï¼šPhillipç§»åŠ¨æ—¶æ’­æ”¾ï¼›  
  - ğŸš‚ ç¢°æ’å£°ï¼šç¢°åˆ°ç«è½¦æ—¶æ’­æ”¾ï¼›  
  - ğŸ‰ èƒœåˆ©å£°ï¼šåˆ°è¾¾ç»ˆç‚¹æ—¶æ’­æ”¾ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ï¼ˆä»¥æ ·ä¾‹1ä¸ºä¾‹ï¼‰  
1. **åˆå§‹åŒ–**ï¼šæ˜¾ç¤º3è¡Œ16åˆ—çš„éš§é“ï¼ŒPhillipåœ¨ç¬¬2è¡Œç¬¬1åˆ—ï¼ˆğŸ”µï¼‰ï¼Œç«è½¦åœ¨ç¬¬1è¡Œç¬¬5-9åˆ—ï¼ˆğŸ”´ï¼‰ã€ç¬¬2è¡Œç¬¬4-6åˆ—ï¼ˆğŸ”´ï¼‰ç­‰ã€‚  
2. **ç¬¬ä¸€æ­¥**ï¼šPhillipå³ç§»1æ ¼åˆ°ç¬¬2è¡Œç¬¬2åˆ—ï¼ˆğŸ”µï¼‰ï¼Œæ£€æŸ¥`y+1`ï¼ˆç¬¬2è¡Œç¬¬2åˆ—ï¼‰æ˜¯å¦å®‰å…¨ï¼ˆæ˜¯ï¼‰ã€‚  
3. **é€‰æ‹©æ–¹å‘**ï¼šå°è¯•ä¸‹æ–¹å‘ï¼ˆç¬¬3è¡Œï¼‰ï¼Œæ£€æŸ¥`y+1`ï¼ˆç¬¬3è¡Œç¬¬2åˆ—ï¼‰ã€`y+2`ï¼ˆç¬¬3è¡Œç¬¬3åˆ—ï¼‰ã€`y+3`ï¼ˆç¬¬3è¡Œç¬¬4åˆ—ï¼‰æ˜¯å¦å®‰å…¨ï¼ˆæ˜¯ï¼‰ã€‚  
4. **ç§»åŠ¨**ï¼šPhillipç§»åŠ¨åˆ°ç¬¬3è¡Œç¬¬4åˆ—ï¼ˆğŸ”µï¼‰ï¼Œè·¯å¾„æ ‡è®°ä¸ºğŸŸ¢ã€‚  
5. **é‡å¤**ï¼šç»§ç»­æœç´¢ï¼Œç›´åˆ°Phillipåˆ°è¾¾ç¬¬16åˆ—ï¼ˆç»ˆç‚¹ï¼‰ï¼Œæ’­æ”¾èƒœåˆ©å£°ï¼Œæ˜¾ç¤ºâ€œYESâ€ã€‚


### æŠ€æœ¯å®ç°è¦ç‚¹  
- **Canvasç»˜åˆ¶**ï¼šç”¨`ctx.fillRect`ç»˜åˆ¶æ–¹å—ï¼Œ`ctx.font`ç»˜åˆ¶æ–‡å­—ã€‚  
- **çŠ¶æ€ç®¡ç†**ï¼šç”¨æ•°ç»„å­˜å‚¨Phillipçš„ä½ç½®ã€ç«è½¦çš„ä½ç½®ã€å·²æ¢ç´¢çš„è·¯å¾„ã€‚  
- **äº¤äº’æ§åˆ¶**ï¼šç”¨`addEventListener`å¤„ç†æŒ‰é’®ç‚¹å‡»ï¼Œ`setInterval`æ§åˆ¶è‡ªåŠ¨æ’­æ”¾çš„é€Ÿåº¦ã€‚  
- **éŸ³æ•ˆ**ï¼šç”¨`Audio`å¯¹è±¡æ’­æ”¾8ä½éŸ³æ•ˆï¼ˆå¦‚`run.mp3`ã€`crash.mp3`ã€`win.mp3`ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **ç›¸å¯¹è¿åŠ¨**ï¼šé€‚ç”¨äºâ€œä¸¤è€…éƒ½ç§»åŠ¨â€çš„é—®é¢˜ï¼Œå¦‚ã€Šé£æœºèº²é¿å­å¼¹ã€‹ã€Šæ±½è½¦è¶…è½¦ã€‹ç­‰ã€‚  
- **æœç´¢ï¼ˆDFS/BFSï¼‰**ï¼šé€‚ç”¨äºâ€œæ˜¯å¦å­˜åœ¨è·¯å¾„â€çš„é—®é¢˜ï¼Œå¦‚ã€Šè¿·å®«é—®é¢˜ã€‹ã€Šæœºå™¨äººèµ°æ–¹æ ¼ã€‹ç­‰ã€‚  
- **çŠ¶æ€æ ‡è®°**ï¼šé€‚ç”¨äºæ‰€æœ‰æœç´¢é—®é¢˜ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæé«˜æ•ˆç‡ã€‚


### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1019 [NOIP2000 æé«˜ç»„] å•è¯æ¥é¾™**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨DFSéå†æ‰€æœ‰å¯èƒ½çš„å•è¯ç»„åˆï¼Œé”»ç‚¼æœç´¢çš„é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†èƒ½åŠ›ã€‚  
2. **æ´›è°· P1162 å¡«æ¶‚é¢œè‰²**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨BFSå¡«å……é¢œè‰²ï¼Œé”»ç‚¼é˜Ÿåˆ—çš„ä½¿ç”¨å’Œè¾¹ç•Œå¤„ç†èƒ½åŠ›ã€‚  
3. **æ´›è°· P1379 å…«æ•°ç éš¾é¢˜**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨BFSå¯»æ‰¾æœ€çŸ­è·¯å¾„ï¼Œé”»ç‚¼BFSçš„ä¼˜åŒ–ï¼ˆå¦‚å“ˆå¸Œè¡¨æ ‡è®°çŠ¶æ€ï¼‰èƒ½åŠ›ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªlraM41ï¼‰**ï¼šâ€œæˆ‘ä¸€å¼€å§‹ç›´æ¥æ¨¡æ‹Ÿç«è½¦ç§»åŠ¨ï¼Œç»“æœä»£ç å¾ˆå¤æ‚ï¼Œè¿˜è¶…æ—¶äº†ã€‚åæ¥æƒ³åˆ°ç›¸å¯¹è¿åŠ¨ï¼ŒæŠŠç«è½¦ç§»åŠ¨è½¬åŒ–ä¸ºPhillipçš„ç§»åŠ¨ï¼Œä»£ç ç¬é—´ç®€åŒ–äº†ï¼â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨è§£å†³â€œä¸¤è€…éƒ½ç§»åŠ¨â€çš„é—®é¢˜æ—¶ï¼Œç›¸å¯¹è¿åŠ¨æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„æŠ€å·§ï¼Œèƒ½ç®€åŒ–é—®é¢˜æ¨¡å‹ï¼Œå‡å°‘ä»£ç å¤æ‚åº¦ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä¸å¦¨è¯•è¯•â€œæ¢ä¸ªè§’åº¦çœ‹é—®é¢˜â€ï¼  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œPhillip and Trainsâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£æœç´¢ç®—æ³•å’Œç›¸å¯¹è¿åŠ¨æ€æƒ³çš„åº”ç”¨ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œè§£å†³é—®é¢˜â€ï¼Œè€Œä¸æ˜¯â€œå†™å¤æ‚çš„ä»£ç â€â€”â€”æœ‰æ—¶å€™æ¢ä¸ªè§’åº¦ï¼Œé—®é¢˜ä¼šå˜å¾—ç®€å•å¾ˆå¤šï¼ğŸ’ª  

å¦‚æœæœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶å‘æˆ‘æé—®ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š202.85ç§’
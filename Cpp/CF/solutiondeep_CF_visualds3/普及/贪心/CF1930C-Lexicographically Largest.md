# é¢˜ç›®ä¿¡æ¯

# Lexicographically Largest

## é¢˜ç›®æè¿°

Stack has an array $ a $ of length $ n $ . He also has an empty set $ S $ . Note that $ S $ is not a multiset.

He will do the following three-step operation exactly $ n $ times:

1. Select an index $ i $ such that $ 1 \leq i \leq |a| $ .
2. Insert $ ^\dagger $ $ a_i + i $ into $ S $ .
3. Delete $ a_i $ from $ a $ . Note that the indices of all elements to the right of $ a_i $ will decrease by $ 1 $ .

Note that after $ n $ operations, $ a $ will be empty.

Stack will now construct a new array $ b $ which is $ S $ sorted in decreasing order. Formally, $ b $ is an array of size $ |S| $ where $ b_i $ is the $ i $ -th largest element of $ S $ for all $ 1 \leq i \leq |S| $ .

Find the lexicographically largest $ ^\ddagger $ $ b $ that Stack can make.

 $ ^\dagger $ A set can only contain unique elements. Inserting an element that is already present in a set will not change the elements of the set.

 $ ^\ddagger $ An array $ p $ is lexicographically larger than a sequence $ q $ if and only if one of the following holds:

- $ q $ is a prefix of $ p $ , but $ p \ne q $ ; or
- in the first position where $ p $ and $ q $ differ, the array $ p $ has a larger element than the corresponding element in $ q $ .

Note that $ [3,1,4,1,5] $ is lexicographically larger than $ [3,1,3] $ , $ [\,] $ , and $ [3,1,4,1] $ but not $ [3,1,4,1,5,9] $ , $ [3,1,4,1,5] $ , and $ [4] $ .

## è¯´æ˜/æç¤º

In the first test case, select $ i=1 $ in the first operation, insert $ a_1 + 1 = 3 $ in $ S $ , and delete $ a_1 $ from $ a $ . After the first operation, $ a $ becomes $ a=[1] $ . In the second operation, we select $ i=1 $ again and insert $ a_1 + 1 = 2 $ in $ S $ . Thus $ S=\{2, 3\} $ , and $ b = [3, 2] $ .

Note that if you select $ i=2 $ in the first operation, and $ i=1 $ in the second operation, $ S=\{3\} $ as $ 3 $ will be inserted twice, resulting in $ b=[3] $ .

As $ [3,2] $ is lexicographically larger than $ [3] $ , we should select $ i=1 $ in the first operation.

In the second test case, in each operation, select the last element.

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
2
2 1
5
1 100 1000 1000000 1000000000
3
6 4 8```

### è¾“å‡º

```
3 2 
1000000005 1000004 1003 102 2 
11 7 6```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šLexicographically Largest æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

<introduction>
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†æ"Lexicographically Largest"è¿™é“æœ‰è¶£çš„è´ªå¿ƒ+æ•°æ®ç»“æ„é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ æŒæ¡å¦‚ä½•é€šè¿‡å·§å¦™çš„æ•°æ®å¤„ç†å’Œå†²çªè§£å†³ç­–ç•¥ï¼Œæ„é€ å­—å…¸åºæœ€å¤§çš„æ•°ç»„ã€‚

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`è´ªå¿ƒç­–ç•¥ä¸æ•°æ®ç»“æ„åº”ç”¨`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è¿™é“é¢˜å¯ä»¥æ¯”ä½œ"è‡ªåŠ©é¤ç­–ç•¥"ï¼šæ¯æ¬¡é€‰å–å½“å‰æœ€ä¼˜è´¨çš„é£Ÿæï¼ˆæœ€å¤§å€¼ï¼‰ï¼Œä½†è‹¥å·²è¢«ä»–äººå–èµ°ï¼ˆå†²çªï¼‰ï¼Œå°±é€‰æ¬¡ä¼˜çš„ï¼ˆé€’å‡ï¼‰ã€‚æ ¸å¿ƒåœ¨äºç»´æŠ¤ä¸€ä¸ª"å¯é€‰å€¼é›†åˆ"ï¼š
   - é¢˜è§£1ï¼ˆæ’åºè°ƒæ•´ï¼‰å’Œé¢˜è§£3ï¼ˆåŒsetç»´æŠ¤ï¼‰éƒ½ä½“ç°äº†è´ªå¿ƒæœ¬è´¨ï¼šä¼˜å…ˆé€‰å½“å‰æœ€å¤§å¯èƒ½å€¼ï¼Œå†²çªæ—¶ç³»ç»ŸåŒ–é™çº§
   - æ ¸å¿ƒéš¾ç‚¹åœ¨äºåŠ¨æ€ç»´æŠ¤å¯é€‰å€¼èŒƒå›´ï¼ˆå¦‚é¢˜è§£3çš„setæ“ä½œï¼‰æˆ–æ‰¹é‡è°ƒæ•´ï¼ˆå¦‚é¢˜è§£1çš„ç›¸é‚»é€’å‡ï¼‰
   - å¯è§†åŒ–å°†é‡‡ç”¨åƒç´ é£è´ªåƒè›‡åƒæ•°å­—ï¼šæ•°å­—æ–¹å—ä»£è¡¨æ•°ç»„å…ƒç´ ï¼Œè›‡å¤´é«˜äº®å½“å‰æ“ä½œå…ƒç´ ï¼Œ"å®"éŸ³æ•ˆæ ‡è®°æˆåŠŸå–å€¼ï¼Œ"å™—"éŸ³æ•ˆæç¤ºå†²çªé™çº§

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

<eval_intro>
ä»¥ä¸‹é¢˜è§£åœ¨æ€è·¯æ¸…æ™°æ€§ã€ä»£ç è§„èŒƒæ€§å’Œç®—æ³•æ•ˆç‡ä¸Šè¡¨ç°ä¼˜å¼‚ï¼š

**é¢˜è§£ä¸€ï¼ˆJiuZhE66666ï¼‰**
* **ç‚¹è¯„**ï¼š
  - æ€è·¯ç›´å‡»æœ¬è´¨ï¼šå…ˆè®¡ç®—ç†è®ºæœ€å¤§å€¼ `a[i]+i`ï¼Œé™åºæ’åºåç³»ç»ŸåŒ–é€’å‡å†²çªå€¼ï¼ˆâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ï¼‰
  - ä»£ç æå…¶ç®€æ´ï¼ˆ19è¡Œï¼‰ï¼Œç”¨ `min(a[i], a[i-1]-1)` å®ç°ç›¸é‚»è°ƒæ•´ï¼ˆâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ï¼‰
  - æ—¶é—´å¤æ‚åº¦O(n log n)æœ€ä¼˜ï¼Œç©ºé—´O(1)ï¼ˆâ­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ï¼‰
  - äº®ç‚¹ï¼šç”¨æ’åºä»£æ›¿å¤æ‚æ•°æ®ç»“æ„ï¼Œç«èµ›å®æˆ˜é¦–é€‰

**é¢˜è§£ä¸‰ï¼ˆM1saka16I72ï¼‰**
* **ç‚¹è¯„**ï¼š
  - æ€è·¯ä¸¥è°¨ï¼šé€šè¿‡æ•°å­¦å½’çº³è¯æ˜æ‰€æœ‰åˆæ³•åºåˆ—å¯è¾¾ï¼ˆâ­ï¸â­ï¸â­ï¸â­ï¸ï¼‰
  - ä»£ç è§„èŒƒï¼šåŒsetç»´æŠ¤ï¼ˆviså·²ç”¨å€¼ï¼Œnowå¾…é€‰å€¼ï¼‰ï¼ŒäºŒåˆ†æŸ¥æ‰¾å¤„ç†å†²çªï¼ˆâ­ï¸â­ï¸â­ï¸â­ï¸ï¼‰
  - äº®ç‚¹ï¼šåŠ¨æ€ç»´æŠ¤å¯é€‰å€¼é›†åˆï¼Œé€šç”¨æ€§æ›´å¼ºï¼ˆâ­ï¸â­ï¸â­ï¸â­ï¸ï¼‰

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

<difficulty_intro>
è§£å†³æœ¬é¢˜éœ€çªç ´ä¸‰ä¸ªå…³é”®ç‚¹ï¼š

1.  **å¦‚ä½•é¿å…å€¼é‡å¤ï¼Ÿ**
    * **åˆ†æ**ï¼šæ¯ä¸ª `a[i]+i` å¯èƒ½å†²çªï¼Œéœ€åŠ¨æ€é™çº§ã€‚é¢˜è§£1é€šè¿‡æ’åºåç›¸é‚»é€’å‡æ‰¹é‡å¤„ç†ï¼›é¢˜è§£3ç”¨setå®æ—¶æ£€æŸ¥å†²çªå¹¶å–æœ€å¤§å€¼-1
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå†²çªå¤„ç†æ˜¯è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæŒ‘æˆ˜

2.  **å¦‚ä½•ä¿è¯å­—å…¸åºæœ€å¤§ï¼Ÿ**
    * **åˆ†æ**ï¼šå¿…é¡»ä¼˜å…ˆä¿ç•™è¾ƒå¤§å€¼ã€‚é¢˜è§£1ä»å¤§åˆ°å°æ’åºç¡®ä¿å…ˆå¤„ç†å¤§å€¼ï¼›é¢˜è§£3æ¯æ¬¡å–å½“å‰æœ€å¤§å¯ç”¨å€¼
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå­—å…¸åºé—®é¢˜å¸¸éœ€é™åºå¤„ç†

3.  **å¦‚ä½•é«˜æ•ˆç»´æŠ¤å¯é€‰å€¼ï¼Ÿ**
    * **åˆ†æ**ï¼šé¢˜è§£1ç”¨æ•°ç»„+æ’åº(O(n log n))ï¼›é¢˜è§£3ç”¨set(O(n log n))ä½†å¸¸æ•°æ›´å¤§ã€‚é€‰æ‹©å–å†³äºåœºæ™¯
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœ‰åºæ•°æ®ç»“æ„èƒ½é«˜æ•ˆç»´æŠ¤å–å€¼èŒƒå›´

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
<summary_best_practices>
- **è´ªå¿ƒé€‰æ‹©ç­–ç•¥**ï¼šå§‹ç»ˆå°è¯•å½“å‰æœ€å¤§å¯èƒ½å€¼
- **å†²çªé™çº§æœºåˆ¶**ï¼šé‡é‡å¤æ—¶ç³»ç»ŸåŒ–é€’å‡ï¼ˆå¦‚`æ–°å€¼=æ—§å€¼-1`ï¼‰
- **æ•°æ®ç»“æ„ä¼˜åŒ–**ï¼šæœ‰åºæ•°æ®ç»“æ„ï¼ˆset/æ’åºæ•°ç»„ï¼‰åŠ é€ŸèŒƒå›´æŸ¥è¯¢
- **è¾¹ç•Œå¤„ç†**ï¼šæ³¨æ„ä¸‹æ ‡å˜åŒ–å¯¹å€¼çš„å½±å“ï¼ˆ`a[i]+i`çš„`i`æ˜¯åŸå§‹ä¸‹æ ‡ï¼‰

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

<code_intro_overall>
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šç»¼åˆé¢˜è§£1çš„é«˜æ•ˆä¸é¢˜è§£3çš„é€šç”¨æ€§
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    int t; cin >> t;
    while (t--) {
        int n; cin >> n;
        vector<long long> a(n+1);
        for (int i = 1; i <= n; i++) {
            cin >> a[i];
            a[i] += i; // è®¡ç®—c_i
        }

        sort(a.begin()+1, a.end(), greater<long long>());
        for (int i = 2; i <= n; i++) 
            a[i] = min(a[i], a[i-1]-1); // å†²çªé™çº§

        for (int i = 1; i <= n; i++) 
            cout << a[i] << " \n"[i==n];
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. è®¡ç®—æ¯ä¸ªå…ƒç´ çš„`c_i = a_i + i`ï¼ˆç†è®ºæœ€å¤§å€¼ï¼‰
  2. é™åºæ’åºä½¿å¤§å€¼ä¼˜å…ˆå¤„ç†
  3. ç›¸é‚»è°ƒæ•´ï¼šè‹¥å½“å‰å€¼â‰¥å‰å€¼åˆ™é™ä¸º`å‰å€¼-1`
  4. è¾“å‡ºè°ƒæ•´åçš„æœ‰åºåºåˆ—

---
<code_intro_selected>
**é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µèµæ**
```cpp
sort(a+1, a+1+n, greater<int>());
for (int i=2; i<=n; i++) 
    a[i] = min(a[i], a[i-1]-1);
```
* **ä»£ç è§£è¯»**ï¼š
  > `greater<int>()`å®ç°é™åºæ’åºï¼Œç¡®ä¿ä¼˜å…ˆå¤„ç†å¤§å€¼ã€‚å¾ªç¯ä¸­é€šè¿‡`min(a[i], a[i-1]-1)`å®ç°å…³é”®è°ƒæ•´ï¼šè‹¥å½“å‰å€¼è¿‡å¤§ï¼ˆå¯èƒ½å†²çªï¼‰ï¼Œåˆ™é™çº§ä¸ºå‰å€¼-1ã€‚è¿™ä¿è¯åºåˆ—ä¸¥æ ¼é€’å‡æ— é‡å¤ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ’åº+çº¿æ€§è°ƒæ•´æ˜¯ç®€æ´é«˜æ•ˆçš„è´ªå¿ƒå®ç°èŒƒå¼

**é¢˜è§£ä¸‰æ ¸å¿ƒç‰‡æ®µèµæ**
```cpp
set<ll> vis, now; // vis:å·²ç”¨å€¼, now:å¾…é€‰å€¼
for (int i=1; i<=n; i++) {
    ll v;
    if (!vis.count(a[i])) v = a[i];     // æ— å†²çªç›´æ¥å–
    else {
        auto it = now.upper_bound(a[i]); it--;
        v = *it; // å†²çªæ—¶å–æœ€å¤§å¯é€‰å€¼
    }
    vis.insert(v); now.erase(v);
    if (!vis.count(v-1)) now.insert(v-1);
}
```
* **ä»£ç è§£è¯»**ï¼š
  > åŠ¨æ€ç»´æŠ¤åŒsetï¼š`vis`å­˜å·²é€‰å€¼ï¼Œ`now`å­˜å¯é€‰å€¼ï¼ˆåˆå§‹ç©ºï¼‰ã€‚å¯¹æ¯ä¸ª`a[i]`ï¼š
  > - è‹¥`a[i]`æœªç”¨åˆ™ç›´æ¥å–ï¼ˆ`v=a[i]`ï¼‰
  > - å¦åˆ™åœ¨`now`ä¸­äºŒåˆ†æŸ¥æ‰¾â‰¤`a[i]`çš„æœ€å¤§å€¼ï¼ˆ`upper_boundå‰ç§»`ï¼‰
  > æ›´æ–°è§„åˆ™ï¼šå–`v`åå°†å…¶åŠ å…¥`vis`ï¼Œç§»é™¤`now`ä¸­çš„`v`ï¼Œå¹¶æ·»åŠ `v-1`åˆ°å¾…é€‰
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒsetç»´æŠ¤å®ç°åŠ¨æ€è´ªå¿ƒï¼Œé€‚åˆå€¼åŸŸåˆ†æ•£çš„åœºæ™¯

-----

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

<visualization_intro>
æˆ‘ä»¬è®¾è®¡"è´ªåƒè›‡åƒæ•°å­—"åƒç´ æ¸¸æˆæ¼”ç¤ºæ ¸å¿ƒè´ªå¿ƒç­–ç•¥ï¼š

* **ä¸»é¢˜**ï¼š8-bitå¤å¤é£è´ªåƒè›‡åœ¨æ•°å­—ç½‘æ ¼ä¸­æ”¶é›†æœ€å¤§å€¼
* **æ ¸å¿ƒæ¼”ç¤º**ï¼šè´ªå¿ƒé€‰æ‹©ä¸å†²çªé™çº§è¿‡ç¨‹

### åŠ¨ç”»å¸§æ­¥éª¤
1. **åœºæ™¯åˆå§‹åŒ–**  
   ![](https://via.placeholder.com/400x200?text=Pixel+Grid)  
   - ç½‘æ ¼æ˜¾ç¤ºåŸå§‹æ•°ç»„ï¼Œæ¯ä¸ªæ•°å­—æ–¹å—æ ‡æ³¨`a_i + i`ï¼ˆå¦‚`3+1=4`ï¼‰
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœ/å•æ­¥æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—

2. **ç®—æ³•å¯åŠ¨**  
   - è›‡å¤´é«˜äº®å½“å‰æœ€å¤§å€¼ï¼ˆçº¢è‰²é—ªçƒï¼‰ï¼Œ"å®"éŸ³æ•ˆ
   - æ•°å­—é£å…¥å³ä¾§"å·²é€‰å€¼ç¯®å­"ï¼ˆé¢˜è§£3çš„`vis`ï¼‰

3. **å†²çªå¤„ç†æ¼”ç¤º**  
   ![](https://via.placeholder.com/400x200?text=Conflict+Handling)  
   - å½“è›‡å¤´ç§»å‘ä¸‹ä¸ªå€¼ï¼Œè‹¥ä¸ç¯®å­å€¼é‡å¤ï¼š
     * æ˜¾ç¤º"âŒ"åŠ¨ç”»ï¼Œ"å™—"éŸ³æ•ˆ
     * å€¼é™çº§ä¸º`åŸå€¼-1`ï¼ˆå¦‚`4â†’3`ï¼‰
     * å·¦ä¾§"å¾…é€‰å€¼ç¯®å­"ï¼ˆé¢˜è§£1çš„`now`ï¼‰æ·»åŠ æ–°æ•°å­—

4. **æ¸¸æˆåŒ–å…ƒç´ **  
   - æ¯æˆåŠŸæ”¶é›†éé™çº§å€¼+100åˆ†ï¼ˆ8-bitéŸ³æ•ˆï¼‰
   - è¿ç»­æ— å†²çªæ”¶é›†è§¦å‘è¿å‡»ç‰¹æ•ˆ
   - æœ€ç»ˆæŒ‰båºåˆ—å­—å…¸åºè¯„åˆ†ï¼ˆSçº§> Açº§>...ï¼‰

### äº¤äº’è®¾è®¡
- **AIæ¼”ç¤ºæ¨¡å¼**ï¼šè‡ªåŠ¨æ’­æ”¾è›‡æœ€ä¼˜è·¯å¾„
- **å¯¹æ¯”æ¨¡å¼**ï¼šå¹¶æ’å±•ç¤ºé¢˜è§£1ï¼ˆæ‰¹é‡è°ƒæ•´ï¼‰vs é¢˜è§£3ï¼ˆå®æ—¶ç»´æŠ¤ï¼‰

-----

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

* **æŠ€å·§è¿ç§»**ï¼šè´ªå¿ƒ+å†²çªå¤„ç†é€‚ç”¨äºï¼š
  1. å»é‡å­—å…¸åºé—®é¢˜ï¼ˆå¦‚LeetCode 316ï¼‰
  2. èµ„æºåˆ†é…å†²çªä¼˜åŒ–ï¼ˆå¦‚ä¼šè®®å®¤å®‰æ’ï¼‰
  3. æ¸¸æˆä¼˜å…ˆçº§è°ƒåº¦ï¼ˆå¦‚æŠ€èƒ½å†·å´ç³»ç»Ÿï¼‰

* **æ´›è°·æ¨è**ï¼š
  1. **P1106 åˆ æ•°é—®é¢˜**  
     ğŸ—£ï¸ ç»ƒä¹ è´ªå¿ƒåˆ æ•°æ„é€ æœ€å¤§å­—å…¸åº
  2. **P1090 åˆå¹¶æœå­**  
     ğŸ—£ï¸ å·©å›ºè´ªå¿ƒ+æ•°æ®ç»“æ„ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
  3. **P1235 å­—å…¸åºæ’åº**  
     ğŸ—£ï¸ æŒæ¡ç³»ç»ŸåŒ–ç”Ÿæˆå­—å…¸åºçš„æŠ€å·§

-----

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **å‚è€ƒç»éªŒ (M1saka16I72)**ï¼š  
> "æ¨å¯¼ä¸‹æ ‡å˜åŒ–æ—¶ï¼ŒåŠ¨æ‰‹æ¨¡æ‹Ÿå°æ ·ä¾‹èƒ½å¿«é€ŸéªŒè¯æ€è·¯"

> **ç‚¹è¯„**ï¼š  
> æœ¬é¢˜ä¸‹æ ‡åŠ¨æ€å˜åŒ–æ˜¯æ ¸å¿ƒéš¾ç‚¹ã€‚å»ºè®®ï¼š
> 1. çº¸ä¸Šç”»`n=3`çš„æ•°ç»„æ“ä½œæµç¨‹
> 2. ç”¨`cout`æ‰“å°ä¸­é—´å˜é‡ï¼ˆå¦‚é¢˜è§£3çš„setçŠ¶æ€ï¼‰
> 3. å…ˆè€ƒè™‘æ— å†²çªç†æƒ³æƒ…å†µï¼Œå†æ·»åŠ å†²çªå¤„ç†

-----

<conclusion>
æŒæ¡è´ªå¿ƒç­–ç•¥çš„å…³é”®åœ¨äºç†è§£"å½“å‰æœ€ä¼˜+ç³»ç»ŸåŒ–é™çº§"çš„æ€æƒ³ã€‚å¤šç»ƒä¹ æ’åºä¸æ•°æ®ç»“æ„çš„ç»“åˆè¿ç”¨ï¼Œä½ ä¹Ÿèƒ½è½»æ¾è§£å†³æ­¤ç±»é—®é¢˜ï¼ä¸‹æ¬¡è§ï¼ğŸš€
</conclusion>
```

---
å¤„ç†ç”¨æ—¶ï¼š129.90ç§’
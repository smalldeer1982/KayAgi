# é¢˜ç›®ä¿¡æ¯

# Anton and Making Potions

## é¢˜ç›®æè¿°

Anton is playing a very interesting computer game, but now he is stuck at one of the levels. To pass to the next level he has to prepare $ n $ potions.

Anton has a special kettle, that can prepare one potions in $ x $ seconds. Also, he knows spells of two types that can faster the process of preparing potions.

1. Spells of this type speed up the preparation time of one potion. There are $ m $ spells of this type, the $ i $ -th of them costs $ b_{i} $ manapoints and changes the preparation time of each potion to $ a_{i} $ instead of $ x $ .
2. Spells of this type immediately prepare some number of potions. There are $ k $ such spells, the $ i $ -th of them costs $ d_{i} $ manapoints and instantly create $ c_{i} $ potions.

Anton can use no more than one spell of the first type and no more than one spell of the second type, and the total number of manapoints spent should not exceed $ s $ . Consider that all spells are used instantly and right before Anton starts to prepare potions.

Anton wants to get to the next level as fast as possible, so he is interested in the minimum number of time he needs to spent in order to prepare at least $ n $ potions.

## è¯´æ˜/æç¤º

In the first sample, the optimum answer is to use the second spell of the first type that costs $ 10 $ manapoints. Thus, the preparation time of each potion changes to $ 4 $ seconds. Also, Anton should use the second spell of the second type to instantly prepare $ 15 $ potions spending $ 80 $ manapoints. The total number of manapoints used is $ 10+80=90 $ , and the preparation time is $ 4Â·5=20 $ seconds ( $ 15 $ potions were prepared instantly, and the remaining $ 5 $ will take $ 4 $ seconds each).

In the second sample, Anton can't use any of the spells, so he just prepares $ 20 $ potions, spending $ 10 $ seconds on each of them and the answer is $ 20Â·10=200 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
20 3 2
10 99
2 4 3
20 10 40
4 15
10 80
```

### è¾“å‡º

```
20
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
20 3 2
10 99
2 4 3
200 100 400
4 15
100 800
```

### è¾“å‡º

```
200
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šAnton and Making Potions æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**<introduction>**  
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·åˆ†æ"Anton and Making Potions"è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™é“é¢˜éœ€è¦å·§å¦™ç»„åˆä¸¤ç§é­”æ³•æ¥æœ€å°åŒ–åˆ¶è¯æ—¶é—´ï¼Œæ˜¯å­¦ä¹ æšä¸¾ä¼˜åŒ–å’ŒäºŒåˆ†æŸ¥æ‰¾çš„ç»å…¸æ¡ˆä¾‹ã€‚æœ¬æŒ‡å—å°†å¸®ä½ æŒæ¡æ ¸å¿ƒæ€è·¯ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`ç¼–ç¨‹æŠ€å·§åº”ç”¨`ï¼ˆæšä¸¾ä¼˜åŒ– + äºŒåˆ†æŸ¥æ‰¾ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜åƒåœ¨æ¸¸æˆä¸­æ­é…æŠ€èƒ½è£…å¤‡ï¼šåŸºç¡€åˆ¶è¯è€—æ—¶xç§’ï¼Œä¸¤ç±»é­”æ³•åˆ†åˆ«èƒ½åŠ é€Ÿåˆ¶è¯æˆ–ç›´æ¥å®Œæˆéƒ¨åˆ†è¯æ°´ã€‚æˆ‘ä»¬éœ€è¦åœ¨æ³•åŠ›å€¼é¢„ç®—(s)å†…é€‰æ‹©æœ€ä¼˜ç»„åˆã€‚  
> - **æ ¸å¿ƒæŠ€å·§**ï¼šæšä¸¾ç¬¬ä¸€ç±»é­”æ³•åï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨ç¬¬äºŒç±»é­”æ³•ä¸­å¿«é€Ÿæ‰¾åˆ°å‰©ä½™æ³•åŠ›å€¼å…è®¸çš„æœ€ä¼˜é€‰é¡¹  
> - **éš¾ç‚¹**ï¼šæ³•åŠ›å€¼çº¦æŸä¸‹çš„ç»„åˆä¼˜åŒ–ï¼Œéœ€å¤„ç†ä¸ä½¿ç”¨é­”æ³•çš„è¾¹ç•Œæƒ…å†µ  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šå°†ç”¨åƒç´ é£æ ¼å±•ç¤ºé­”æ³•é€‰æ‹©è¿‡ç¨‹ã€‚ç¬¬ä¸€ç±»é­”æ³•æ˜¾ç¤ºä¸ºè¯æ°´ç“¶ï¼ˆé¢œè‰²æ·±æµ…è¡¨åŠ é€Ÿæ•ˆæœï¼‰ï¼Œç¬¬äºŒç±»é­”æ³•æ˜¾ç¤ºä¸ºæ³•åŠ›æŸ±ï¼ˆé«˜åº¦è¡¨æ¶ˆè€—ï¼‰ã€‚äºŒåˆ†æŸ¥æ‰¾æ—¶ä¼šæœ‰å·¦å³æŒ‡é’ˆåŠ¨ç”»å’ŒéŸ³æ•ˆåé¦ˆ  

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ (æ¥æºï¼šBorisDimitri)**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°é‡‡ç”¨"æšä¸¾+äºŒåˆ†"æ¡†æ¶ï¼Œé€»è¾‘ç›´ç™½æ˜“æ‡‚ã€‚ä»£ç ç”¨`upper_bound`æ ‡å‡†åº“å‡½æ•°å®ç°äºŒåˆ†ï¼Œæ˜¾è‘—é™ä½æ—¶é—´å¤æ‚åº¦è‡³O(mlogk)ã€‚äº®ç‚¹åœ¨äºå®Œæ•´è¦†ç›–ä¸‰ç§æƒ…å†µï¼ˆå•ç”¨ç¬¬äºŒç±»é­”æ³•/å•ç”¨ç¬¬ä¸€ç±»é­”æ³•/ç»„åˆä½¿ç”¨ï¼‰ã€‚éœ€æ³¨æ„è¾¹ç•Œå¤„ç†å¯åŠ å¼ºï¼ˆå¦‚äºŒåˆ†æœªå‘½ä¸­æ—¶é»˜è®¤å€¼è®¾ç½®ï¼‰ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **éš¾ç‚¹ï¼šæ³•åŠ›å€¼çº¦æŸä¸‹çš„ç»„åˆæœç´¢**  
   * **åˆ†æ**ï¼šæš´åŠ›æšä¸¾æ‰€æœ‰ç»„åˆéœ€O(mk)æ—¶é—´ï¼Œä¸å¯è¡Œã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡**é¢„å¤„ç†æ’åº+äºŒåˆ†æŸ¥æ‰¾**å°†å¤æ‚åº¦é™ä¸ºO(mlogk)ã€‚å…³é”®æ˜¯å°†ç¬¬äºŒç±»é­”æ³•æŒ‰æ¶ˆè€—(d_i)æ’åºï¼Œå»ºç«‹æ³•åŠ›æ¶ˆè€—ä¸è¯æ°´æ•°é‡(c_i)çš„æ˜ å°„
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœ‰åºæ•°æ®ä¸­çš„æœç´¢é—®é¢˜ï¼Œä¼˜å…ˆè€ƒè™‘äºŒåˆ†æŸ¥æ‰¾

2. **éš¾ç‚¹ï¼šå¤šå†³ç­–åˆ†æ”¯è¦†ç›–**  
   * **åˆ†æ**ï¼šå¿…é¡»å•ç‹¬å¤„ç†ä¸‰ç§æƒ…å†µï¼šâ‘ ä¸ç”¨ä»»ä½•é­”æ³• â‘¡åªç”¨ç¬¬ä¸€ç±»é­”æ³• â‘¢åªç”¨ç¬¬äºŒç±»é­”æ³•ã€‚é¢˜è§£é€šè¿‡åˆ†æ­¥è®¡ç®—æœ€å°å€¼ç¡®ä¿å®Œæ•´æ€§
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤æ‚å†³ç­–é—®é¢˜å…ˆåˆ†è§£ç‹¬ç«‹å­é—®é¢˜å†ç»„åˆ

3. **éš¾ç‚¹ï¼šäºŒåˆ†æŸ¥æ‰¾çš„è¾¹ç•Œå¤„ç†**  
   * **åˆ†æ**ï¼šå½“å‰©ä½™æ³•åŠ›å€¼ä¸è¶³ä»¥é€‰ä»»ä½•ç¬¬äºŒç±»é­”æ³•æ—¶ï¼Œéœ€å®‰å…¨å¤„ç†ã€‚å¯åœ¨äºŒåˆ†å‰æ·»åŠ å“¨å…µå€¼ï¼ˆå¦‚d[0]=0ï¼‰æˆ–æ˜¾å¼æ£€æŸ¥è¿”å›å€¼
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šäºŒåˆ†æŸ¥æ‰¾å¿…é—®ä¸‰ä¸ªé—®é¢˜ï¼šå¾ªç¯æ¡ä»¶ï¼ŸæŒ‡é’ˆæ›´æ–°ï¼Ÿæœ€ç»ˆå®šä½ï¼Ÿ

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼šæœ‰åºåŒ–ä¼˜åŒ–** - å°†ç¬¬äºŒç±»é­”æ³•æŒ‰æ¶ˆè€—æ’åºï¼Œä½¿äºŒåˆ†æˆå¯èƒ½
- **æŠ€å·§2ï¼šå†³ç­–åˆ†ç¦»** - ç‹¬ç«‹å¤„ç†å•é­”æ³•ä½¿ç”¨æƒ…å†µï¼Œç®€åŒ–ç»„åˆé€»è¾‘
- **æŠ€å·§3ï¼šé¢„è®¡ç®—** - æå‰è®¡ç®—åŸºç¡€è€—æ—¶(n*x)ï¼Œä½œä¸ºæ¯”è¾ƒåŸºå‡†

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**  
```cpp
#include <iostream>
#include <algorithm>
using namespace std;
typedef long long LL;
const int N = 2e5+5;

int main() {
    // è¾“å…¥æ•°æ®
    LL n, m, k, x, s;
    cin >> n >> m >> k >> x >> s;
    pair<LL, LL> spell1[N]; // {a_i, b_i}
    pair<LL, LL> spell2[N]; // {c_i, d_i}

    for (int i = 0; i < m; i++) cin >> spell1[i].first;
    for (int i = 0; i < m; i++) cin >> spell1[i].second;
    for (int i = 1; i <= k; i++) cin >> spell2[i].first;
    for (int i = 1; i <= k; i++) cin >> spell2[i].second;

    // å…³é”®æ­¥éª¤1: å•ç‹¬å¤„ç†ç¬¬äºŒç±»é­”æ³•
    LL ans = n * x;
    spell2[0] = {0,0}; // å“¨å…µï¼šä¸ä½¿ç”¨é­”æ³•
    for (int i = 0; i <= k; i++) {
        if (spell2[i].second <= s) 
            ans = min(ans, (n - spell2[i].first) * x);
    }

    // å…³é”®æ­¥éª¤2: æšä¸¾ç¬¬ä¸€ç±»é­”æ³• + äºŒåˆ†ç¬¬äºŒç±»é­”æ³•
    for (int i = 0; i < m; i++) {
        if (spell1[i].second > s) continue;
        LL remain = s - spell1[i].second;
        auto it = upper_bound(spell2, spell2+k+1, 
                    make_pair(remain+1, 0LL)) - 1; // äºŒåˆ†æŸ¥æ‰¾
        if (it >= spell2 && it->second <= remain) 
            ans = min(ans, (n - it->first) * spell1[i].first);
    }
    cout << ans;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**  
> 1. **å“¨å…µè®¾ç½®**ï¼š`spell2[0]={0,0}`ç¡®ä¿äºŒåˆ†æ€»èƒ½å‘½ä¸­  
> 2. **ç‹¬ç«‹å¤„ç†**ï¼šå…ˆè®¡ç®—ä»…ç”¨ç¬¬äºŒç±»é­”æ³•çš„æœ€ä¼˜è§£  
> 3. **ç»„åˆä¼˜åŒ–**ï¼šæšä¸¾ç¬¬ä¸€ç±»é­”æ³•åï¼Œç”¨`upper_bound`åœ¨æœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°æ»¡è¶³å‰©ä½™æ³•åŠ›çš„æœ€å¤§c_i  
> 4. **æ—¶é—´å¤æ‚åº¦**ï¼šO(mlogk) è¿œä¼˜äºæš´åŠ›O(mk)

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š*é­”æ³•è¯æˆ¿* - åƒç´ é£ç‚¼è¯æ¨¡æ‹Ÿ  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šæšä¸¾ç¬¬ä¸€ç±»é­”æ³• â†’ æ³•åŠ›å€¼æ‰£é™¤ â†’ äºŒåˆ†æŸ¥æ‰¾ç¬¬äºŒç±»é­”æ³• â†’ æ—¶é—´è®¡ç®—  

### åŠ¨ç”»å¸§è®¾è®¡
```mermaid
graph TD
    A[8-bité£æ ¼è¯æˆ¿èƒŒæ™¯] --> B[æ˜¾ç¤ºåŸºç¡€å‚æ•° n/x/s]
    B --> C[ç¬¬ä¸€ç±»é­”æ³•æ ï¼šè¯ç“¶åƒç´ é˜µåˆ—]
    C --> D[é€‰æ‹©è¯ç“¶ï¼šé«˜äº®+æ‰£é™¤æ³•åŠ›å€¼]
    D --> E[å‰©ä½™æ³•åŠ›å€¼è¿›åº¦æ¡]
    E --> F[ç¬¬äºŒç±»é­”æ³•æŸ±çŠ¶å›¾]
    F --> G[äºŒåˆ†æŸ¥æ‰¾åŠ¨ç”»ï¼šå·¦å³æŒ‡é’ˆç¢°æ’]
    G --> H[å‘½ä¸­é­”æ³•æŸ±ï¼šé—ªå…‰+éŸ³æ•ˆ]
    H --> I[æ˜¾ç¤ºæœ€ç»ˆæ—¶é—´è®¡ç®—å…¬å¼]
```

### äº¤äº’è®¾è®¡
- **éŸ³æ•ˆè®¾è®¡**ï¼š  
  - é€‰æ‹©é­”æ³•ï¼š"å®"ï¼ˆ8-bitéŸ³æ•ˆï¼‰  
  - äºŒåˆ†ç§»åŠ¨ï¼š"æ»´ç­”"å£°ï¼ˆæŒ‡é’ˆæ­¥è¿›ï¼‰  
  - æˆåŠŸç»„åˆï¼šèƒœåˆ©æ—‹å¾‹ç‰‡æ®µ  
- **æ§åˆ¶é¢æ¿**ï¼š  
  - é€Ÿåº¦æ»‘å—ï¼šè°ƒèŠ‚æšä¸¾/äºŒåˆ†é€Ÿåº¦  
  - å•æ­¥æ‰§è¡Œï¼šç©ºæ ¼é”®é€æ­¥è§‚å¯Ÿ  
  - AIæ¼”ç¤ºï¼šè‡ªåŠ¨å®Œæˆæœ€ä¼˜è·¯å¾„å¯»æ‰¾  

### è®¾è®¡ä»·å€¼
> é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚å±•ç¤ºï¼š  
> 1. **æšä¸¾è¿‡ç¨‹**ï¼šè¯ç“¶é€‰æ‹©æ—¶çš„æ³•åŠ›æ‰£é™¤  
> 2. **äºŒåˆ†æœ¬è´¨**ï¼šæœ‰åºæ•°æ®çš„å¿«é€ŸåŒºé—´ç¼©å°  
> 3. **ç»„åˆæ•ˆæœ**ï¼šæ—¶é—´è®¡ç®—å…¬å¼çš„åŠ¨æ€æ›´æ–°  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
`æšä¸¾+äºŒåˆ†`é€‚ç”¨äºï¼š  
1. åŒçº¦æŸèµ„æºåˆ†é…ï¼ˆå¦‚æœ¬é¢˜æ³•åŠ›å€¼+æ—¶é—´ï¼‰  
2. æœ‰åºæ•°æ®ä¸­çš„ç»„åˆæŸ¥è¯¢  
3. å¤šæ¡ä»¶å†³ç­–ä¼˜åŒ–  

### æ´›è°·æ¨è
1. **P1102 A-Bæ•°å¯¹**  
   â†’ ç»ƒä¹ ï¼šåœ¨æœ‰åºæ•°ç»„ä¸­äºŒåˆ†æŸ¥æ‰¾å·®å€¼ç›®æ ‡  
2. **P1873 ç æ ‘**  
   â†’ ç»ƒä¹ ï¼šäºŒåˆ†ç­”æ¡ˆ+èµ„æºçº¦æŸéªŒè¯  
3. **P1281 ä¹¦çš„å¤åˆ¶**  
   â†’ ç»ƒä¹ ï¼šåŒæ¡ä»¶ä¼˜åŒ–ï¼ˆæ—¶é—´+äººåŠ›åˆ†é…ï¼‰  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> æœ¬æ¬¡é¢˜è§£æœªåŒ…å«ä½œè€…è°ƒè¯•å¿ƒå¾—ã€‚Kayå»ºè®®ï¼š  
> - äºŒåˆ†æŸ¥æ‰¾æ˜“é”™ç‚¹ï¼šå¾ªç¯æ¡ä»¶éœ€ç”¨`left <= right`è€Œé`<`  
> - å…³é”®æµ‹è¯•ï¼šæ³•åŠ›å€¼ä¸è¶³ä»¥é€‰ä»»ä½•é­”æ³•æ—¶çš„è¾¹ç•Œå¤„ç†  

---

**<conclusion>**  
é€šè¿‡"æšä¸¾+äºŒåˆ†"çš„ç»„åˆæ‹³ï¼Œæˆ‘ä»¬é«˜æ•ˆè§£å†³äº†é­”æ³•çº¦æŸä¸‹çš„åˆ¶è¯ä¼˜åŒ–é—®é¢˜ã€‚è®°ä½ï¼šæœ‰åºæ•°æ®æ˜¯ä¼˜åŒ–çš„é’¥åŒ™ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ˜¯æœç´¢çš„åˆ©å‰‘ï¼ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š105.69ç§’
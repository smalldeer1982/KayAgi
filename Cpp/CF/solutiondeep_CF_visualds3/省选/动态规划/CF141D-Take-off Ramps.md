# é¢˜ç›®ä¿¡æ¯

# Take-off Ramps

## é¢˜ç›®æè¿°

Vasya participates in a ski race along the $ X $ axis. The start is at point $ 0 $ , and the finish is at $ L $ , that is, at a distance $ L $ meters from the start in the positive direction of the axis. Vasya has been training so hard that he can run one meter in exactly one second.

Besides, there are $ n $ take-off ramps on the track, each ramp is characterized by four numbers:

- $ x_{i} $ represents the ramp's coordinate
- $ d_{i} $ represents from how many meters Vasya will land if he goes down this ramp
- $ t_{i} $ represents the flight time in seconds
- $ p_{i} $ is the number, indicating for how many meters Vasya should gather speed to get ready and fly off the ramp. As Vasya gathers speed, he should ski on the snow (that is, he should not be flying), but his speed still equals one meter per second.

Vasya is allowed to move in any direction on the $ X $ axis, but he is prohibited to cross the start line, that is go to the negative semiaxis. Vasya himself chooses which take-off ramps he will use and in what order, that is, he is not obliged to take off from all the ramps he encounters. Specifically, Vasya can skip the ramp. It is guaranteed that $ x_{i}+d_{i}<=L $ , that is, Vasya cannot cross the finish line in flight.

Vasya can jump from the ramp only in the positive direction of $ X $ axis. More formally, when using the $ i $ -th ramp, Vasya starts gathering speed at point $ x_{i}-p_{i} $ , jumps at point $ x_{i} $ , and lands at point $ x_{i}+d_{i} $ . He cannot use the ramp in opposite direction.

Your task is to find the minimum time that Vasya will spend to cover the distance.

## è¯´æ˜/æç¤º

In the first sample, Vasya cannot use ramp 2, because then he will need to gather speed starting from point -3, which is not permitted by the statement. The optimal option is using ramp 1, the resulting time is: moving to the point of gathering speed + gathering speed until reaching the takeoff ramp + flight time + moving to the finish line $ =0+5+5+5=15 $ .

In the second sample using ramp 1 is not optimal for Vasya as $ t_{1}&gt;d_{1} $ . The optimal option is using ramp 2, the resulting time is: moving to the point of gathering speed + gathering speed until reaching the takeoff ramp + flight time + moving to the finish line $ =14+1+1+0=16 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 20
5 10 5 5
4 16 1 7
```

### è¾“å‡º

```
15
1
1 ```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2 20
9 8 12 6
15 5 1 1
```

### è¾“å‡º

```
16
1
2 ```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šTake-off Ramps æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆæœ€çŸ­è·¯ç®—æ³•ï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œTake-off Rampsâ€çš„å…³é”®ï¼Œæ˜¯æŠŠâ€œæ»‘é›ª+è·³è·³æ¿â€çš„é—®é¢˜**è½¬åŒ–ä¸ºæ‰¾æœ€çŸ­è·¯å¾„çš„æ¸¸æˆ**ï¼æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªåƒç´ æ»‘é›ªè€…ï¼Œè¦ä»èµ·ç‚¹0ï¼ˆçº¢æ–¹å—ï¼‰æ»‘åˆ°ç»ˆç‚¹Lï¼ˆç»¿æ–¹å—ï¼‰ã€‚è·¯ä¸Šæœ‰ä¸¤ç§ç§»åŠ¨æ–¹å¼ï¼š  
1. **èµ°è·¯**ï¼šåœ¨ç›¸é‚»çš„â€œå°ç«™â€ï¼ˆèŠ‚ç‚¹ï¼‰ä¹‹é—´æ»‘è¡Œï¼Œæ—¶é—´=è·ç¦»ï¼ˆå› ä¸ºé€Ÿåº¦1m/sï¼‰ï¼›  
2. **è·³è·³æ¿**ï¼šä»åŠ©è·‘èµ·ç‚¹ï¼ˆè“æ–¹å—ï¼Œ`x_i-p_i`ï¼‰åŠ©è·‘`p_i`ç§’ï¼Œå†é£`d_i`ç±³ï¼ˆè½åˆ°é»„æ–¹å—`x_i+d_i`ï¼‰ï¼Œæ€»æ—¶é—´`p_i+t_i`ã€‚  

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„**æœ€çŸ­æ—¶é—´è·¯å¾„**â€”â€”è¿™æ­£å¥½æ˜¯å›¾è®ºä¸­â€œå•æºæœ€çŸ­è·¯å¾„â€çš„é—®é¢˜ï¼ç”¨**Dijkstraç®—æ³•**ï¼ˆåƒå¯¼èˆªè½¯ä»¶æ‰¾æœ€çŸ­è·¯çº¿ï¼‰å°±èƒ½è§£å†³ã€‚  

### æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ  
- **éš¾ç‚¹1**ï¼šåæ ‡å¤ªå¤§ï¼ˆLå¯è¾¾1e9ï¼‰ï¼Œæ— æ³•ç›´æ¥å½“èŠ‚ç‚¹ç¼–å·ï¼Ÿ  
  â†’ ç”¨**ç¦»æ•£åŒ–**ï¼šæ”¶é›†æ‰€æœ‰å…³é”®èŠ‚ç‚¹ï¼ˆèµ·ç‚¹ã€ç»ˆç‚¹ã€åŠ©è·‘èµ·ç‚¹ã€è½åœ°ç‚¹ï¼‰çš„åæ ‡ï¼Œæ’åºå»é‡åæ˜ å°„åˆ°å°ç´¢å¼•ï¼ˆæ¯”å¦‚æŠŠ1e9å˜æˆ100ï¼‰ã€‚  
- **éš¾ç‚¹2**ï¼šå¦‚ä½•è®°å½•èµ°è¿‡çš„è·³æ¿ï¼Ÿ  
  â†’ ç”¨**å‰é©±æ•°ç»„**ï¼š`tran[v]`è®°èŠ‚ç‚¹vçš„æ¥æºèŠ‚ç‚¹ï¼Œ`us[v]`è®°åˆ°è¾¾væ—¶ç”¨çš„è·³æ¿ç¼–å·ï¼Œæœ€åå›æº¯å¾—åˆ°è·¯å¾„ã€‚  
- **éš¾ç‚¹3**ï¼šå¦‚ä½•è®¾è®¡å›¾çš„èŠ‚ç‚¹å’Œè¾¹ï¼Ÿ  
  â†’ èŠ‚ç‚¹é€‰**å…³é”®å†³ç­–ç‚¹**ï¼ˆèµ·ç‚¹ã€ç»ˆç‚¹ã€åŠ©è·‘èµ·ç‚¹ã€è½åœ°ç‚¹ï¼‰ï¼›è¾¹åˆ†ä¸¤ç§ï¼š  
    - ç›¸é‚»èŠ‚ç‚¹çš„**åŒå‘è¾¹**ï¼ˆèµ°è·¯ï¼Œæ—¶é—´=è·ç¦»ï¼‰ï¼›  
    - åŠ©è·‘èµ·ç‚¹åˆ°è½åœ°ç‚¹çš„**å•å‘è¾¹**ï¼ˆè·³ï¼Œæ—¶é—´= `p_i+t_i`ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
æˆ‘è®¾è®¡äº†ä¸€ä¸ª**FCçº¢ç™½æœºé£æ ¼çš„åƒç´ åŠ¨ç”»**ï¼Œè®©ä½ â€œçœ‹â€åˆ°ç®—æ³•è¿è¡Œï¼š  
- **èŠ‚ç‚¹**ï¼šçº¢ï¼ˆèµ·ç‚¹ï¼‰ã€ç»¿ï¼ˆç»ˆç‚¹ï¼‰ã€è“ï¼ˆåŠ©è·‘èµ·ç‚¹ï¼‰ã€é»„ï¼ˆè½åœ°ç‚¹ï¼‰çš„åƒç´ æ–¹å—ï¼›  
- **è¾¹**ï¼šç™½è‰²çº¿æ¡è¿æ¥ç›¸é‚»èŠ‚ç‚¹ï¼›  
- **Dijkstraè¿‡ç¨‹**ï¼šå½“å‰å¤„ç†çš„èŠ‚ç‚¹é—ªçƒï¼Œæ¾å¼›è¾¹æ—¶çº¿æ¡å˜äº®ï¼Œä¼´éšéŸ³æ•ˆï¼ˆé€‰èŠ‚ç‚¹â€œå®â€ã€æ¾å¼›è¾¹â€œå’»â€ã€å®Œæˆâ€œèƒœåˆ©éŸ³ä¹â€ï¼‰ï¼›  
- **äº¤äº’**ï¼šå•æ­¥æ‰§è¡Œã€è‡ªåŠ¨æ’­æ”¾ï¼ˆè°ƒé€Ÿæ»‘å—ï¼‰ã€é‡ç½®ï¼Œå³ä¾§åŒæ­¥æ˜¾ç¤ºå½“å‰ä»£ç è¡Œã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

æˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€å®è·µä»·å€¼ç­‰è§’åº¦ï¼Œç­›é€‰äº†3ä»½ä¼˜è´¨é¢˜è§£ï¼š

### é¢˜è§£ä¸€ï¼šifffer_2137ï¼ˆæœ€çŸ­è·¯ç»å…¸å®ç°ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æŠŠé—®é¢˜è½¬åŒ–ä¸ºæœ€çŸ­è·¯çš„æ€è·¯**éå¸¸ç›´ç™½**ï¼Œä»£ç ç»“æ„å·¥æ•´ï¼ˆå˜é‡åæ˜“æ‡‚ï¼Œæ¯”å¦‚`tran`è®°å‰é©±ã€`us`è®°è·³æ¿ï¼‰ï¼Œè¿˜è´´å¿ƒå¤„ç†äº†**æ–¹æ¡ˆè¾“å‡º**ï¼äº®ç‚¹æ˜¯ï¼š  
  - ç¦»æ•£åŒ–ç”¨`sort+unique`ï¼Œç®€æ´é«˜æ•ˆï¼›  
  - Dijkstraç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼Œæ—¶é—´å¤æ‚åº¦`O(n log n)`ï¼›  
  - è¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆè·³è¿‡åŠ©è·‘èµ·ç‚¹<0çš„è·³æ¿ï¼‰ã€‚  
  ä»å®è·µè§’åº¦çœ‹ï¼Œè¿™ä»½ä»£ç å¯ä»¥ç›´æ¥ç”¨äºç«èµ›ï¼Œæ˜¯æœ€çŸ­è·¯é—®é¢˜çš„â€œæ ‡å‡†æ¨¡æ¿â€ã€‚

### é¢˜è§£äºŒï¼šVenusM1nTï¼ˆmapè¾…åŠ©å»ºå›¾ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£ç”¨`map`è®°å½•èŠ‚ç‚¹ç¼–å·ï¼Œè™½ç„¶é€Ÿåº¦ç•¥æ…¢ï¼Œä½†**æ›´å®¹æ˜“ç†è§£**ã€‚ä»£ç ä¸­æ˜ç¡®åŒºåˆ†äº†**åŒå‘è¾¹ï¼ˆèµ°è·¯ï¼‰**å’Œ**å•å‘è¾¹ï¼ˆè·³ï¼‰**ï¼Œè¿˜ç‰¹æ„æåˆ°â€œä¸è¦ç›´æ¥æ’åºè™šç‚¹æ•°ç»„â€ï¼ˆé¿å…mapæ··ä¹±ï¼‰â€”â€”è¿™æ˜¯è°ƒè¯•æ—¶çš„é‡è¦ç»éªŒï¼é€‚åˆæ–°æ‰‹å­¦ä¹ â€œå¦‚ä½•æŠŠæ€è·¯è½¬åŒ–ä¸ºä»£ç â€ã€‚

### é¢˜è§£ä¸‰ï¼šYubyï¼ˆè·¯å¾„è®°å½•ç”¨stackï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„**è·¯å¾„è®°å½•**å¾ˆå·§å¦™ï¼šç”¨`stack`é€†åºä¿å­˜è·³æ¿ç¼–å·ï¼Œæœ€åè¾“å‡ºæ—¶è‡ªç„¶æ­£åºã€‚ä»£ç ä¸­è¿˜å¤„ç†äº†â€œèµ·ç‚¹/ç»ˆç‚¹å¯èƒ½æœªè¢«åŠ å…¥èŠ‚ç‚¹â€çš„æƒ…å†µï¼Œè€ƒè™‘å…¨é¢ã€‚äº®ç‚¹æ˜¯ç»“æ„ä½“æ’åºå’Œmapçš„ç»“åˆï¼Œé€‚åˆå­¦ä¹ â€œå¦‚ä½•ç»„ç»‡å¤æ‚æ•°æ®â€ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å…³é”®ç‚¹1ï¼šå¦‚ä½•è®¾è®¡å›¾çš„èŠ‚ç‚¹å’Œè¾¹ï¼Ÿ  
**åˆ†æ**ï¼šèŠ‚ç‚¹å¿…é¡»åŒ…å«æ‰€æœ‰éœ€è¦â€œå†³ç­–â€çš„ç‚¹â€”â€”æ¯”å¦‚â€œæ˜¯å¦è·³è¿™ä¸ªè·³æ¿â€ï¼Œæ‰€ä»¥é€‰**èµ·ç‚¹ã€ç»ˆç‚¹ã€åŠ©è·‘èµ·ç‚¹ã€è½åœ°ç‚¹**ã€‚è¾¹è¦è¦†ç›–æ‰€æœ‰ç§»åŠ¨æ–¹å¼ï¼šèµ°è·¯æ˜¯ç›¸é‚»èŠ‚ç‚¹çš„åŒå‘è¾¹ï¼Œè·³æ˜¯åŠ©è·‘èµ·ç‚¹åˆ°è½åœ°ç‚¹çš„å•å‘è¾¹ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå›¾çš„å»ºæ¨¡è¦â€œæŠ“å…³é”®â€ï¼Œå†—ä½™èŠ‚ç‚¹ä¼šæµªè´¹æ—¶é—´ï¼

### 2. å…³é”®ç‚¹2ï¼šå¦‚ä½•å¤„ç†å¤§æ•°åæ ‡ï¼Ÿ  
**åˆ†æ**ï¼šåæ ‡å¤ªå¤§ï¼ˆ1e9ï¼‰ï¼Œç›´æ¥ç”¨åæ ‡å½“èŠ‚ç‚¹ç¼–å·ä¼šè¶…å†…å­˜ã€‚ç”¨**ç¦»æ•£åŒ–**ï¼šæ”¶é›†æ‰€æœ‰å…³é”®åæ ‡â†’æ’åºâ†’å»é‡â†’æ˜ å°„åˆ°å°ç´¢å¼•ï¼ˆæ¯”å¦‚ç”¨`lower_bound`æ‰¾ä½ç½®ï¼‰ã€‚è¿™æ ·èŠ‚ç‚¹æ•°ä»1e9é™åˆ°O(n)ï¼ˆnæ˜¯è·³æ¿æ•°ï¼‰ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¦»æ•£åŒ–æ˜¯â€œæŠŠç¨€ç–çš„å¤§æ•°å˜å¯†é›†â€çš„é­”æ³•ï¼

### 3. å…³é”®ç‚¹3ï¼šå¦‚ä½•è®°å½•è·¯å¾„æ–¹æ¡ˆï¼Ÿ  
**åˆ†æ**ï¼šç”¨ä¸¤ä¸ªæ•°ç»„ï¼š`tran[v]`è®°èŠ‚ç‚¹vçš„å‰é©±èŠ‚ç‚¹ï¼Œ`us[v]`è®°åˆ°è¾¾væ—¶ç”¨çš„è·³æ¿ç¼–å·ï¼ˆ0è¡¨ç¤ºèµ°è·¯ï¼‰ã€‚æœ€åä»ç»ˆç‚¹**å›æº¯**åˆ°èµ·ç‚¹ï¼Œæ”¶é›†`us`ä¸­çš„éé›¶å€¼ï¼Œå°±æ˜¯è·³æ¿é¡ºåºã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè·¯å¾„è®°å½•è¦â€œä¿å­˜å‰é©±â€ï¼Œå›æº¯æ—¶é€†åºæ‰èƒ½å¾—åˆ°æ­£åºï¼

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§A**ï¼šé—®é¢˜æŠ½è±¡â€”â€”æŠŠå®é™…é—®é¢˜è½¬åŒ–ä¸ºå›¾è®ºæ¨¡å‹ï¼ˆèŠ‚ç‚¹=å†³ç­–ç‚¹ï¼Œè¾¹=ç§»åŠ¨æ–¹å¼ï¼‰ï¼›  
- **æŠ€å·§B**ï¼šç¦»æ•£åŒ–â€”â€”å¤„ç†å¤§æ•°åæ ‡çš„æ ‡å‡†æ“ä½œï¼›  
- **æŠ€å·§C**ï¼šè·¯å¾„è®°å½•â€”â€”ç”¨å‰é©±æ•°ç»„ä¿å­˜æ¯ä¸€æ­¥çš„æ¥æºï¼›  
- **æŠ€å·§D**ï¼šè¾¹ç•Œå¤„ç†â€”â€”æ¯”å¦‚åŠ©è·‘èµ·ç‚¹ä¸èƒ½<0ï¼Œå¦åˆ™è·³è¿‡ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆifffer_2137çš„æ€è·¯ï¼Œæ•´åˆäº†ç¦»æ•£åŒ–ã€å»ºè¾¹ã€Dijkstraå’Œè·¯å¾„è¾“å‡ºï¼Œæ˜¯æœ€çŸ­è·¯çš„å…¸å‹å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long
const int maxn = 4e5 + 5;
const int INF = 0x3f3f3f3f3f3f3f3f;

inline int read() {
    int x = 0; char ch = getchar();
    while (ch < '0' || ch > '9') ch = getchar();
    while (ch >= '0' && ch <= '9') x = x * 10 + ch - '0', ch = getchar();
    return x;
}

struct Node { int x, d, t, p; } a[maxn];
int t_coords[maxn], tt; // å­˜å‚¨æ‰€æœ‰å…³é”®åæ ‡
vector<pair<int, pair<int, int>>> G[maxn]; // G[u] = (v, (w, id))
int dis[maxn], vis[maxn], tran[maxn], us[maxn]; // è·ç¦»ã€è®¿é—®æ ‡è®°ã€å‰é©±ã€è·³æ¿ç¼–å·

void dijkstra(int start, int end) {
    memset(dis, 0x3f, sizeof(dis));
    memset(vis, 0, sizeof(vis));
    priority_queue<pair<int, int>, vector<pair<int, int>>, greater<>> q;
    dis[start] = 0;
    q.emplace(0, start);
    while (!q.empty()) {
        auto [d_u, u] = q.top(); q.pop();
        if (vis[u]) continue;
        vis[u] = 1;
        for (auto [v, edge] : G[u]) {
            int w = edge.first, id = edge.second;
            if (dis[v] > dis[u] + w) {
                dis[v] = dis[u] + w;
                tran[v] = u;
                us[v] = id;
                q.emplace(dis[v], v);
            }
        }
    }
}

signed main() {
    int n = read(), L = read();
    t_coords[++tt] = 0; t_coords[++tt] = L; // åŠ å…¥èµ·ç‚¹å’Œç»ˆç‚¹
    for (int i = 1; i <= n; ++i) {
        a[i].x = read(), a[i].d = read(), a[i].t = read(), a[i].p = read();
        int s = a[i].x - a[i].p;
        if (s >= 0) { // åŠ©è·‘èµ·ç‚¹ä¸èƒ½<0
            t_coords[++tt] = s;
            t_coords[++tt] = a[i].x + a[i].d;
        }
    }
    // ç¦»æ•£åŒ–ï¼šæ’åºã€å»é‡
    sort(t_coords + 1, t_coords + tt + 1);
    tt = unique(t_coords + 1, t_coords + tt + 1) - t_coords - 1;
    // å»ºè¾¹ï¼šç›¸é‚»èŠ‚ç‚¹çš„åŒå‘è¾¹ï¼ˆèµ°è·¯ï¼‰
    for (int i = 1; i < tt; ++i) {
        int u = i, v = i + 1;
        int w = t_coords[i + 1] - t_coords[i];
        G[u].emplace_back(v, make_pair(w, 0));
        G[v].emplace_back(u, make_pair(w, 0));
    }
    // å»ºè¾¹ï¼šåŠ©è·‘èµ·ç‚¹â†’è½åœ°ç‚¹çš„å•å‘è¾¹ï¼ˆè·³ï¼‰
    for (int i = 1; i <= n; ++i) {
        int s = a[i].x - a[i].p;
        if (s < 0) continue;
        int u = lower_bound(t_coords + 1, t_coords + tt + 1, s) - t_coords;
        int v = lower_bound(t_coords + 1, t_coords + tt + 1, a[i].x + a[i].d) - t_coords;
        int w = a[i].p + a[i].t;
        G[u].emplace_back(v, make_pair(w, i));
    }
    // è·‘Dijkstraï¼Œèµ·ç‚¹æ˜¯1ï¼ˆt_coords[1]=0ï¼‰ï¼Œç»ˆç‚¹æ˜¯ttï¼ˆt_coords[tt]=Lï¼‰
    dijkstra(1, tt);
    // è¾“å‡ºç»“æœ
    cout << dis[tt] << endl;
    vector<int> ans;
    int u = tt;
    while (u != 1) {
        if (us[u] != 0) ans.push_back(us[u]);
        u = tran[u];
    }
    reverse(ans.begin(), ans.end());
    cout << ans.size() << endl;
    for (int x : ans) cout << x << " ";
    cout << endl;
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–æ•°æ®ï¼Œæ”¶é›†æ‰€æœ‰å…³é”®åæ ‡ï¼ˆèµ·ç‚¹ã€ç»ˆç‚¹ã€åŠ©è·‘èµ·ç‚¹ã€è½åœ°ç‚¹ï¼‰ï¼›  
  2. **ç¦»æ•£åŒ–**ï¼šæ’åºå»é‡ï¼Œå°†å¤§åæ ‡æ˜ å°„åˆ°å°ç´¢å¼•ï¼›  
  3. **å»ºè¾¹**ï¼šç›¸é‚»èŠ‚ç‚¹è¿åŒå‘è¾¹ï¼ˆèµ°è·¯ï¼‰ï¼ŒåŠ©è·‘èµ·ç‚¹è¿è½åœ°ç‚¹ï¼ˆè·³ï¼‰ï¼›  
  4. **Dijkstra**ï¼šç”¨ä¼˜å…ˆé˜Ÿåˆ—æ‰¾æœ€çŸ­è·¯å¾„ï¼Œè®°å½•å‰é©±å’Œè·³æ¿ï¼›  
  5. **è¾“å‡º**ï¼šå›æº¯è·¯å¾„ï¼Œè¾“å‡ºæœ€çŸ­æ—¶é—´å’Œä½¿ç”¨çš„è·³æ¿ã€‚


### é¢˜è§£ä¸€ï¼ˆifffer_2137ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç¦»æ•£åŒ–çš„ç®€æ´å®ç°  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
t[++tt] = 0, t[++tt] = L;
for (int i = 1; i <= n; i++) {
    a[i].x = read(), a[i].d = read(), a[i].t = read(), a[i].p = read();
    if (a[i].x - a[i].p < 0) continue;
    t[++tt] = a[i].x - a[i].p, t[++tt] = a[i].x + a[i].d;
}
sort(t+1,t+tt+1), tt=unique(t+1,t+tt+1)-t-1;
```
* **ä»£ç è§£è¯»**ï¼š  
  - é¦–å…ˆæŠŠèµ·ç‚¹0å’Œç»ˆç‚¹LåŠ å…¥åæ ‡æ•°ç»„`t`ï¼›  
  - ç„¶åéå†æ¯ä¸ªè·³æ¿ï¼Œè‹¥åŠ©è·‘èµ·ç‚¹`x_i-p_i`â‰¥0ï¼Œå°±æŠŠåŠ©è·‘èµ·ç‚¹å’Œè½åœ°ç‚¹åŠ å…¥`t`ï¼›  
  - æœ€åæ’åº`t`å¹¶å»é‡ï¼ˆ`unique`ï¼‰ï¼Œå¾—åˆ°ç¦»æ•£åŒ–åçš„åæ ‡æ•°ç»„ã€‚  
  é—®ï¼šä¸ºä»€ä¹ˆè¦å»é‡ï¼Ÿå› ä¸ºä¸åŒè·³æ¿å¯èƒ½æœ‰ç›¸åŒçš„åæ ‡ï¼ˆæ¯”å¦‚ä¸¤ä¸ªè·³æ¿çš„è½åœ°ç‚¹ç›¸åŒï¼‰ï¼Œå»é‡åé¿å…é‡å¤èŠ‚ç‚¹ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¦»æ•£åŒ–çš„â€œä¸‰æ­¥æ³•â€â€”â€”æ”¶é›†â†’æ’åºâ†’å»é‡ï¼


### é¢˜è§£ä¸‰ï¼ˆYubyï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šè·¯å¾„è®°å½•ç”¨stack  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
stack<ll>ans;
ll x=mp[L];
while(x) {
    if(mp2[pre[x].num]) ans.push(mp2[pre[x].num]);
    x=pre[x].x;
}
write(ans.size()),pc(10);
while(ans.size()) {
    write(ans.top()),pc(32);
    ans.pop();
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `pre[x].x`æ˜¯èŠ‚ç‚¹xçš„å‰é©±ï¼Œ`mp2[pre[x].num]`æ˜¯åˆ°è¾¾xæ—¶ç”¨çš„è·³æ¿ç¼–å·ï¼›  
  - ä»ç»ˆç‚¹Lå›æº¯åˆ°èµ·ç‚¹ï¼ŒæŠŠè·³æ¿ç¼–å·å‹å…¥æ ˆï¼›  
  - æœ€åå¼¹å‡ºæ ˆï¼ˆé€†åºï¼‰ï¼Œå¾—åˆ°æ­£åºçš„è·³æ¿é¡ºåºã€‚  
  é—®ï¼šä¸ºä»€ä¹ˆç”¨stackï¼Ÿå› ä¸ºå›æº¯æ˜¯é€†åºçš„ï¼Œæ ˆçš„â€œåè¿›å…ˆå‡ºâ€æ­£å¥½æŠŠé¡ºåºè°ƒæ­£ï¼  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€†åºé—®é¢˜ç”¨stackï¼Œæ­£åºé—®é¢˜ç”¨queueï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ æ»‘é›ªè€…çš„æœ€çŸ­è·¯å¾„å†’é™©**ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰  

### è®¾è®¡æ€è·¯  
ç”¨8ä½åƒç´ é£è¥é€ å¤å¤æ¸¸æˆæ„Ÿï¼Œè®©ä½ åƒç©ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹ä¸€æ ·ç†è§£ç®—æ³•ã€‚å…³é”®å…ƒç´ ï¼š  
- **èŠ‚ç‚¹**ï¼šçº¢æ–¹å—ï¼ˆèµ·ç‚¹0ï¼‰ã€ç»¿æ–¹å—ï¼ˆç»ˆç‚¹Lï¼‰ã€è“æ–¹å—ï¼ˆåŠ©è·‘èµ·ç‚¹ï¼‰ã€é»„æ–¹å—ï¼ˆè½åœ°ç‚¹ï¼‰ï¼›  
- **è¾¹**ï¼šç™½è‰²çº¿æ¡è¿æ¥ç›¸é‚»èŠ‚ç‚¹ï¼›  
- **éŸ³æ•ˆ**ï¼šé€‰èŠ‚ç‚¹â€œå®â€ã€æ¾å¼›è¾¹â€œå’»â€ã€å®Œæˆâ€œèƒœåˆ©éŸ³ä¹â€ï¼ˆç”¨Web Audio APIå®ç°ï¼‰ï¼›  
- **äº¤äº’**ï¼šå•æ­¥æ‰§è¡Œã€è‡ªåŠ¨æ’­æ”¾ï¼ˆè°ƒé€Ÿæ»‘å—ï¼‰ã€é‡ç½®ï¼Œå³ä¾§åŒæ­¥æ˜¾ç¤ºä»£ç ã€‚

### åŠ¨ç”»å¸§æ­¥éª¤  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºåƒç´ æ•°è½´ï¼ŒèŠ‚ç‚¹æŒ‰ç¦»æ•£åŒ–åçš„é¡ºåºæ’åˆ—ï¼ˆå·¦0ï¼Œå³Lï¼‰ï¼›  
   - ä¸‹æ–¹æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœï¼ˆçº¢è‰²æŒ‰é’®ï¼‰ã€å•æ­¥ï¼ˆè“è‰²æŒ‰é’®ï¼‰ã€é‡ç½®ï¼ˆé»„è‰²æŒ‰é’®ï¼‰ã€é€Ÿåº¦æ»‘å—ï¼ˆæ…¢â†’å¿«ï¼‰ï¼›  
   - å³ä¾§ä»£ç åŒºåŸŸï¼šæ˜¾ç¤º`dijkstra`å‡½æ•°çš„æ ¸å¿ƒå¾ªç¯ã€‚  

2. **æ•°æ®åˆå§‹åŒ–**ï¼š  
   - èµ·ç‚¹èŠ‚ç‚¹1ï¼ˆçº¢æ–¹å—ï¼‰é—ªçƒï¼Œä¼´éšâ€œå®â€å£°ï¼Œæç¤ºâ€œèµ·ç‚¹å…¥é˜Ÿâ€ï¼›  
   - ä¼˜å…ˆé˜Ÿåˆ—æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ–¹ï¼ˆç”¨åƒç´ æ–¹å—å †æˆçš„é˜Ÿåˆ—ï¼‰ã€‚  

3. **Dijkstraæ ¸å¿ƒæ­¥éª¤**ï¼ˆå•æ­¥æ¨¡å¼ï¼‰ï¼š  
   - ç‚¹å‡»â€œå•æ­¥â€ï¼šä¼˜å…ˆé˜Ÿåˆ—å¼¹å‡ºè·ç¦»æœ€å°çš„èŠ‚ç‚¹uï¼ˆæ¯”å¦‚èŠ‚ç‚¹1ï¼‰ï¼Œué—ªçƒï¼›  
   - éå†uçš„é‚»æ¥è¾¹ï¼šæ¯”å¦‚u=1è¿æ¥èŠ‚ç‚¹2ï¼ˆèµ°è·¯ï¼Œæ—¶é—´= t[2]-t[1]ï¼‰ï¼›  
   - å¦‚æœ`dis[2] > dis[1] + æ—¶é—´`ï¼Œæ›´æ–°`dis[2]`ï¼ŒèŠ‚ç‚¹2å˜äº®ï¼Œè¾¹1â†’2é—ªçƒï¼Œä¼´éšâ€œå’»â€å£°ï¼›  
   - ä»£ç åŒºåŸŸé«˜äº®`q.push({dis[v], v})`è¡Œï¼Œæç¤ºâ€œèŠ‚ç‚¹2å…¥é˜Ÿâ€ã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“ç»ˆç‚¹èŠ‚ç‚¹ttï¼ˆç»¿æ–¹å—ï¼‰è¢«å¤„ç†ï¼Œæ’­æ”¾â€œèƒœåˆ©éŸ³ä¹â€ï¼Œç»¿æ–¹å—é—ªçƒï¼Œæ˜¾ç¤ºâ€œæœ€çŸ­æ—¶é—´ï¼šXXâ€ï¼›  
   - è·¯å¾„å›æº¯ï¼šä»ç»ˆç‚¹åˆ°èµ·ç‚¹çš„èŠ‚ç‚¹å’Œè¾¹å˜æˆæ©™è‰²ï¼Œæ˜¾ç¤ºâ€œä½¿ç”¨çš„è·³æ¿ï¼šXX XXâ€ã€‚  

5. **è‡ªåŠ¨æ’­æ”¾æ¨¡å¼**ï¼š  
   - ç‚¹å‡»â€œå¼€å§‹â€ï¼Œç®—æ³•æŒ‰æ»‘å—é€Ÿåº¦è‡ªåŠ¨æ‰§è¡Œï¼Œä½ å¯ä»¥è§‚å¯Ÿâ€œä¼˜å…ˆé˜Ÿåˆ—å¦‚ä½•é€‰èŠ‚ç‚¹â€â€œè¾¹å¦‚ä½•æ¾å¼›â€ã€‚

### æ—ç™½æç¤º  
- åˆå§‹åŒ–æ—¶ï¼šâ€œæ¬¢è¿æ¥åˆ°åƒç´ æ»‘é›ªå†’é™©ï¼çº¢æ–¹å—æ˜¯èµ·ç‚¹0ï¼Œç»¿æ–¹å—æ˜¯ç»ˆç‚¹Lï¼Œæˆ‘ä»¬è¦æ‰¾æœ€çŸ­æ—¶é—´ï½â€  
- å•æ­¥æ‰§è¡Œæ—¶ï¼šâ€œç°åœ¨å¤„ç†èŠ‚ç‚¹uï¼ˆé—ªçƒçš„çº¢æ–¹å—ï¼‰ï¼Œçœ‹çœ‹å®ƒèƒ½åˆ°è¾¾å“ªäº›èŠ‚ç‚¹ï¼Ÿâ€  
- æ¾å¼›è¾¹æ—¶ï¼šâ€œèŠ‚ç‚¹vçš„æ—¶é—´æ›´æ–°äº†ï¼èµ°uâ†’vçš„è·¯å¾„æ›´å¿«ï½â€  
- å®Œæˆæ—¶ï¼šâ€œæ­å–œï¼æ‰¾åˆ°æœ€çŸ­è·¯å¾„å•¦ï½æ—¶é—´æ˜¯XXï¼Œç”¨äº†è¿™äº›è·³æ¿ï¼â€


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ€çŸ­è·¯ç®—æ³•ï¼ˆDijkstraï¼‰ä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½è§£å†³ï¼š  
1. **å¯¼èˆªè½¯ä»¶æ‰¾æœ€çŸ­è·¯çº¿**ï¼ˆæ¯”å¦‚é«˜å¾·åœ°å›¾è®¡ç®—ä»å®¶åˆ°å­¦æ ¡çš„æœ€çŸ­æ—¶é—´ï¼‰ï¼›  
2. **ç½‘ç»œè·¯ç”±**ï¼ˆè·¯ç”±å™¨æ‰¾æœ€å¿«çš„æ•°æ®åŒ…ä¼ è¾“è·¯å¾„ï¼‰ï¼›  
3. **æ¸¸æˆAIå¯»è·¯**ï¼ˆæ¯”å¦‚ã€Šè‹±é›„è”ç›Ÿã€‹çš„è‹±é›„èµ°æœ€çŸ­è·¯çº¿åˆ°æ•Œæ–¹æ°´æ™¶ï¼‰ã€‚

### æ´›è°·ç»ƒä¹ æ¨è  
1. **P4779 ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ï¼ˆæ ‡å‡†ç‰ˆï¼‰**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ€çŸ­è·¯çš„åŸºç¡€æ¨¡æ¿é¢˜ï¼Œå·©å›ºDijkstraç®—æ³•å’Œä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ã€‚  
2. **P1346 ç”µè½¦**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦å»ºå›¾å¤„ç†çº¿è·¯çš„é—®é¢˜ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œè¾¹è®¾è®¡â€ï¼Œé€‚åˆç»ƒä¹ å›¾çš„å»ºæ¨¡ã€‚  
3. **P2939 [USACO09FEB]Revamping Trails G**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå…è®¸ä¿®æ”¹è¾¹æƒçš„æœ€çŸ­è·¯é—®é¢˜ï¼Œæ‹“å±•â€œå¦‚ä½•å¤„ç†å¤æ‚è¾¹æƒâ€çš„æ€ç»´ã€‚  
4. **P1144 æœ€çŸ­è·¯è®¡æ•°**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ±‚æœ€çŸ­è·¯å¾„çš„æ•°é‡ï¼Œå·©å›ºâ€œè·¯å¾„è®°å½•â€çš„æŠ€å·§ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªYubyï¼‰  
> â€œä¸è¦ç›´æ¥æŠŠå»ºè™šç‚¹çš„æ•°ç»„æ’åºã€‚ä¸ç„¶ä½ å‰é¢å­˜åœ¨mapé‡Œçš„ç¼–å·å°±ä¹±äº†ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™æ˜¯è°ƒè¯•æ—¶çš„å…³é”®æ•™è®­ï¼ç¦»æ•£åŒ–æ—¶ï¼Œè‹¥ç›´æ¥æ’åºåŸæ•°ç»„ï¼ˆæ¯”å¦‚`a`æ•°ç»„ï¼‰ï¼Œä¼šå¯¼è‡´`map`ä¸­ä¿å­˜çš„èŠ‚ç‚¹ç¼–å·æ··ä¹±ï¼ˆå› ä¸º`map`æ˜¯æŒ‰åŸæ•°ç»„é¡ºåºå­˜çš„ï¼‰ã€‚æ­£ç¡®çš„åšæ³•æ˜¯**å•ç‹¬ä¿å­˜å…³é”®åæ ‡**ï¼ˆæ¯”å¦‚`t_coords`æ•°ç»„ï¼‰ï¼Œæ’åºè¿™ä¸ªæ•°ç»„è€Œä¸æ˜¯åŸæ•°ç»„ã€‚  

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªifffer_2137ï¼‰  
> â€œæ³¨æ„è¦è¾“å‡ºæ–¹æ¡ˆï¼Œæ‰€ä»¥è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªæ¾å¼›çš„å†³ç­–ç‚¹ã€‚â€  

**ç‚¹è¯„**ï¼šè·¯å¾„è®°å½•æ˜¯æœ¬é¢˜çš„â€œåŠ åˆ†é¡¹â€ï¼Œä¹Ÿæ˜¯å®é™…åº”ç”¨ä¸­å¸¸ç”¨çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚å¯¼èˆªè¦æ˜¾ç¤ºè·¯çº¿ï¼‰ã€‚ç”¨`tran`å’Œ`us`æ•°ç»„ä¿å­˜å‰é©±å’Œè·³æ¿ç¼–å·ï¼Œå›æº¯æ—¶å°±èƒ½å¾—åˆ°æ–¹æ¡ˆâ€”â€”è¿™æ˜¯æœ€çŸ­è·¯é—®é¢˜çš„â€œæ ‡å‡†æ“ä½œâ€ï¼


## ç»“è¯­  
æœ¬æ¬¡åˆ†æè®©æˆ‘ä»¬å­¦ä¼šäº†**æŠŠå®é™…é—®é¢˜è½¬åŒ–ä¸ºå›¾è®ºæ¨¡å‹**ï¼Œå¹¶ç”¨Dijkstraç®—æ³•æ‰¾æœ€çŸ­è·¯å¾„ã€‚è®°ä½ï¼šå›¾çš„å»ºæ¨¡è¦â€œæŠ“å…³é”®èŠ‚ç‚¹â€ï¼Œç¦»æ•£åŒ–æ˜¯å¤„ç†å¤§æ•°çš„é­”æ³•ï¼Œè·¯å¾„è®°å½•è¦â€œä¿å­˜å‰é©±â€ï¼  

ç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äºâ€œå¤šç»ƒ+å¤šæ€è€ƒâ€â€”â€”ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä¸å¦¨å…ˆæƒ³æƒ³ï¼šâ€œèƒ½ä¸èƒ½ç”¨æœ€çŸ­è·¯è§£å†³ï¼Ÿâ€ åŠ æ²¹ï¼Œä½ ä¸€å®šèƒ½æˆä¸ºç®—æ³•å°èƒ½æ‰‹ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š142.74ç§’
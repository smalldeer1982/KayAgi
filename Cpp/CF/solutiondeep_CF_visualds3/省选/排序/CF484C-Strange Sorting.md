# é¢˜ç›®ä¿¡æ¯

# Strange Sorting

## é¢˜ç›®æè¿°

How many specific orders do you know? Ascending order, descending order, order of ascending length, order of ascending polar angle... Let's have a look at another specific order:  $ d $ -sorting. This sorting is applied to the strings of length at least $ d $ , where $ d $ is some positive integer. The characters of the string are sorted in following manner: first come all the 0-th characters of the initial string, then the 1-st ones, then the 2-nd ones and so on, in the end go all the $ (d-1) $ -th characters of the initial string. By the $ i $ -th characters we mean all the character whose positions are exactly $ i $ modulo $ d $ . If two characters stand on the positions with the same remainder of integer division by $ d $ , their relative order after the sorting shouldn't be changed. The string is zero-indexed. For example, for string 'qwerty':

Its 1-sorting is the string 'qwerty' (all characters stand on 0 positions),

Its 2-sorting is the string 'qetwry' (characters 'q', 'e' and 't' stand on 0 positions and characters 'w', 'r' and 'y' are on 1 positions),

Its 3-sorting is the string 'qrwtey' (characters 'q' and 'r' stand on 0 positions, characters 'w' and 't' stand on 1 positions and characters 'e' and 'y' stand on 2 positions),

Its 4-sorting is the string 'qtwyer',

Its 5-sorting is the string 'qywert'.

You are given string $ S $ of length $ n $ and $ m $ shuffling operations of this string. Each shuffling operation accepts two integer arguments $ k $ and $ d $ and transforms string $ S $ as follows. For each $ i $ from $ 0 $ to $ n-k $ in the increasing order we apply the operation of $ d $ -sorting to the substring $ S\[i..i+k-1\] $ . Here $ S\[a..b\] $ represents a substring that consists of characters on positions from $ a $ to $ b $ inclusive.

After each shuffling operation you need to print string $ S $ .

## è¯´æ˜/æç¤º

Here is detailed explanation of the sample. The first modification is executed with arguments $ k=4 $ , $ d=2 $ . That means that you need to apply 2-sorting for each substring of length 4 one by one moving from the left to the right. The string will transform in the following manner:

qwerty $ â†’ $ qewrty $ â†’ $ qerwty $ â†’ $ qertwy

Thus, string $ S $ equals 'qertwy' at the end of first query.

The second modification is executed with arguments $ k=6 $ , $ d=3 $ . As a result of this operation the whole string $ S $ is replaced by its 3-sorting:

qertwy $ â†’ $ qtewry

The third modification is executed with arguments $ k=5 $ , $ d=2 $ .

qtewry $ â†’ $ qertwy $ â†’ $ qetyrw

## æ ·ä¾‹ #1

### è¾“å…¥

```
qwerty
3
4 2
6 3
5 2
```

### è¾“å‡º

```
qertwy
qtewry
qetyrw
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šStrange Sorting æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼ˆç½®æ¢å¤åˆä¸å¿«é€Ÿå¹‚ä¼˜åŒ–ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œStrange Sortingâ€çš„å…³é”®ï¼Œåœ¨äºç†è§£**ç½®æ¢ï¼ˆPermutationï¼‰**çš„æ¦‚å¿µâ€”â€”å®ƒå°±åƒä¸€å¥—â€œä½ç½®äº¤æ¢è§„åˆ™â€ï¼Œå‘Šè¯‰æ¯ä¸ªå…ƒç´ â€œä¸‹ä¸€æ­¥è¦æ¬åˆ°å“ªä¸ªä½ç½®â€ã€‚æ¯”å¦‚ï¼Œd-sortingæ“ä½œä¼šè®©å­ä¸²ä¸­çš„å…ƒç´ æŒ‰æ¨¡dçš„è§„åˆ™é‡æ–°æ’åˆ—ï¼Œè¿™æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**ç½®æ¢**ï¼ˆæ¯ä¸ªä½ç½®çš„å…ƒç´ ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼‰ã€‚è€Œé¢˜ç›®ä¸­çš„å¤šæ¬¡å­ä¸²æ“ä½œï¼Œå…¶å®æ˜¯**å¤šæ¬¡ç½®æ¢çš„å¤åˆ**ï¼ˆæ¯”å¦‚å…ˆå¯¹ç¬¬ä¸€ä¸ªå­ä¸²æ’åºï¼Œå†å¯¹ç¬¬äºŒä¸ªå­ä¸²æ’åºï¼Œç›¸å½“äºå…ˆååº”ç”¨ä¸¤ä¸ªç½®æ¢ï¼‰ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼šç›´æ¥æ¨¡æ‹Ÿæ¯ä¸ªå­ä¸²çš„d-sortingä¼šè¶…æ—¶ï¼ˆæ—¶é—´å¤æ‚åº¦O(nmk)ï¼Œæ— æ³•é€šè¿‡å¤§æ•°æ®ï¼‰ã€‚**è§£å†³æ–¹æ¡ˆ**ï¼šå°†æ¯ä¸ªæ“ä½œè½¬åŒ–ä¸ºä¸€ä¸ªå…¨å±€ç½®æ¢ï¼Œç„¶åç”¨**å¿«é€Ÿå¹‚**æˆ–**å¾ªç¯èŠ‚**ä¼˜åŒ–å¤šæ¬¡ç½®æ¢çš„å¤åˆï¼Œå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°O(nm log n)æˆ–O(nm)ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼šç”¨åƒç´ åŠ¨ç”»å±•ç¤ºç½®æ¢çš„è¿‡ç¨‹â€”â€”æ¯”å¦‚ï¼Œå±å¹•ä¸Šæœ‰ä¸€æ’åƒç´ å—ä»£è¡¨å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œç½®æ¢è§„åˆ™ç”¨ç®­å¤´æ ‡è®°â€œä»å“ªé‡Œæ¥ï¼Œåˆ°å“ªé‡Œå»â€ã€‚å½“åº”ç”¨ç½®æ¢æ—¶ï¼Œåƒç´ å—ä¼šæŒ‰ç®­å¤´æ–¹å‘ç§»åŠ¨ï¼Œå¹¶ç”¨ä¸åŒé¢œè‰²é«˜äº®å½“å‰å¤„ç†çš„ä½ç½®ã€‚æ¯”å¦‚ï¼Œd=2ã€k=4çš„ç½®æ¢ï¼Œä¼šçœ‹åˆ°æ¨¡2ç­‰äº0çš„ä½ç½®ï¼ˆ0ã€2ï¼‰çš„å­—ç¬¦å…ˆç§»åŠ¨ï¼Œç„¶åæ˜¯æ¨¡1çš„ä½ç½®ï¼ˆ1ã€3ï¼‰ï¼Œæœ€åæ•´ä½“å·¦ç§»ã€‚**æ¸¸æˆåŒ–å…ƒç´ **ï¼šåŠ å…¥â€œç½®æ¢å®Œæˆâ€çš„â€œå®â€éŸ³æ•ˆï¼Œå·¦ç§»æ—¶çš„â€œæ»‘å…¥â€åŠ¨ç”»ï¼Œä»¥åŠâ€œå¿«é€Ÿå¹‚åŠ é€Ÿâ€çš„ç‰¹æ•ˆï¼ˆæ¯”å¦‚å€æ•°è¶Šé«˜ï¼ŒåŠ¨ç”»é€Ÿåº¦è¶Šå¿«ï¼‰ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šä½œè€…Lynkcatï¼ˆèµï¼š11ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ ¸å¿ƒäº®ç‚¹æ˜¯**O(nm)çš„çº¿æ€§æ—¶é—´å¤æ‚åº¦**ï¼Œé€šè¿‡åˆ†æç½®æ¢çš„**ç¯ç»“æ„**ï¼ˆæ¯ä¸ªä½ç½®çš„ç§»åŠ¨è·¯å¾„å½¢æˆç¯ï¼‰ï¼Œç›´æ¥è®¡ç®—æ¯ä¸ªä½ç½®ç»è¿‡n-k+1æ¬¡æ“ä½œåçš„æœ€ç»ˆä½ç½®ã€‚æ€è·¯ä¸Šï¼Œå®ƒå°†ç½®æ¢æ‹†è§£ä¸ºç¯ï¼Œåˆ©ç”¨ç¯çš„å‘¨æœŸæ€§ï¼ˆæ¯”å¦‚ä¸€ä¸ªç¯é•¿åº¦ä¸º3ï¼Œé‚£ä¹ˆ3æ¬¡æ“ä½œåå…ƒç´ ä¼šå›åˆ°åŸä½ï¼‰ï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚ä»£ç ä¸­ï¼Œ`f`æ•°ç»„è®°å½•ç½®æ¢çš„ç›®æ ‡ä½ç½®ï¼Œ`vis`æ•°ç»„æ ‡è®°å·²å¤„ç†çš„ç¯ï¼Œ`P`å’Œ`b`æ•°ç»„å¤„ç†é“¾ç»“æ„ï¼ˆéç¯éƒ¨åˆ†ï¼‰ã€‚è™½ç„¶ä»£ç å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†é€»è¾‘ä¸¥è°¨ï¼Œè¾¹ç•Œå¤„ç†åˆ°ä½ï¼ˆæ¯”å¦‚å¤„ç†kâ‰¤içš„æƒ…å†µï¼‰ï¼Œé€‚åˆæƒ³æ·±å…¥ç†è§£ç½®æ¢ç¯çš„å­¦ä¹ è€…ã€‚

### é¢˜è§£äºŒï¼šä½œè€…ongluï¼ˆèµï¼š7ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„ä¼˜åŠ¿æ˜¯**æ€è·¯æ¸…æ™°ã€ä»£ç ç®€æ´**ï¼Œç”¨**å¿«é€Ÿå¹‚ä¼˜åŒ–ç½®æ¢å¤åˆ**ï¼ˆå°†å¤šæ¬¡ç½®æ¢è½¬åŒ–ä¸ºä¸€æ¬¡å¿«é€Ÿå¹‚è®¡ç®—ï¼‰ã€‚å®ƒå°†æ¯ä¸ªd-sortingæ“ä½œè½¬åŒ–ä¸ºä¸€ä¸ªç½®æ¢`p`ï¼ˆ`p[i]`è¡¨ç¤ºiä½ç½®çš„å…ƒç´ ä¸‹ä¸€æ­¥è¦å»çš„ä½ç½®ï¼‰ï¼Œç„¶åç”¨`multi`å‡½æ•°å¤åˆä¸¤ä¸ªç½®æ¢ï¼ˆç›¸å½“äºå…ˆååº”ç”¨ä¸¤ä¸ªæ“ä½œï¼‰ï¼Œç”¨`Pow`å‡½æ•°è®¡ç®—ç½®æ¢çš„n-k+1æ¬¡å¹‚ï¼ˆç›¸å½“äºé‡å¤n-k+1æ¬¡æ“ä½œï¼‰ã€‚ä»£ç ä¸­ï¼Œ`l`æ•°ç»„è¡¨ç¤ºå·¦ç§»ç½®æ¢ï¼ˆå°†å­—ç¬¦ä¸²å·¦ç§»ä¸€ä½ï¼‰ï¼Œ`work`å‡½æ•°å°†d-sortingç½®æ¢ä¸å·¦ç§»ç½®æ¢å¤åˆï¼Œæœ€åç”¨å¿«é€Ÿå¹‚è®¡ç®—æ€»ç½®æ¢ã€‚è¿™ç§æ–¹æ³•æ—¶é—´å¤æ‚åº¦O(nm log n)ï¼Œé€‚åˆå¤§å¤šæ•°æ•°æ®ï¼Œä¸”ä»£ç å¯è¯»æ€§é«˜ï¼Œæ˜¯æ–°æ‰‹å­¦ä¹ ç½®æ¢å¿«é€Ÿå¹‚çš„å¥½ä¾‹å­ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å…³é”®ç‚¹1ï¼šå¦‚ä½•å°†d-sortingè½¬åŒ–ä¸ºç½®æ¢ï¼Ÿ  
* **åˆ†æ**ï¼šd-sortingçš„æœ¬è´¨æ˜¯å°†å­ä¸²ä¸­çš„å…ƒç´ æŒ‰æ¨¡dçš„è§„åˆ™é‡æ–°æ’åˆ—ã€‚æ¯”å¦‚ï¼Œå¯¹äºå­ä¸²`S[i..i+k-1]`ï¼Œæ¨¡dç­‰äº0çš„ä½ç½®ï¼ˆi, i+d, i+2d,â€¦ï¼‰çš„å­—ç¬¦ä¼šè¢«æ”¾åœ¨å­ä¸²çš„å‰éƒ¨åˆ†ï¼Œæ¨¡1çš„æ”¾åœ¨åé¢ï¼Œä¾æ­¤ç±»æ¨ã€‚æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªä½ç½®`j`ï¼ˆ0â‰¤j<nï¼‰è®¡ç®—ï¼Œç»è¿‡ä¸€æ¬¡d-sortingæ“ä½œåï¼Œå®ƒä¼šç§»åŠ¨åˆ°å“ªä¸ªä½ç½®`p[j]`ã€‚ä¾‹å¦‚ï¼Œå½“k=4ã€d=2æ—¶ï¼Œå­ä¸²`0-3`çš„ç½®æ¢æ˜¯`p[0]=0`ï¼ˆæ¨¡0ï¼‰ã€`p[1]=2`ï¼ˆæ¨¡1ï¼‰ã€`p[2]=1`ï¼ˆæ¨¡0ï¼‰ã€`p[3]=3`ï¼ˆæ¨¡1ï¼‰ï¼Œè€Œ`jâ‰¥4`çš„ä½ç½®ä¸å˜ï¼ˆ`p[j]=j`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç½®æ¢æ˜¯å°†æ“ä½œæŠ½è±¡ä¸ºä½ç½®æ˜ å°„çš„å…³é”®ï¼Œæ­£ç¡®å®šä¹‰`p[j]`æ˜¯è§£å†³é—®é¢˜çš„ç¬¬ä¸€æ­¥ã€‚

### 2. å…³é”®ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆè®¡ç®—å¤šæ¬¡ç½®æ¢çš„å¤åˆï¼Ÿ  
* **åˆ†æ**ï¼šå¤šæ¬¡æ“ä½œç›¸å½“äºå¤šæ¬¡åº”ç”¨ç½®æ¢ï¼ˆæ¯”å¦‚ï¼Œç¬¬ä¸€æ¬¡æ“ä½œæ˜¯ç½®æ¢`P1`ï¼Œç¬¬äºŒæ¬¡æ˜¯`P2`ï¼Œæ€»ç½®æ¢æ˜¯`P2âˆ˜P1`ï¼‰ã€‚ç›´æ¥æ¨¡æ‹Ÿæ¯æ¬¡ç½®æ¢ä¼šè¶…æ—¶ï¼Œæ‰€ä»¥éœ€è¦ç”¨**å¿«é€Ÿå¹‚**ï¼ˆå°†ç½®æ¢çš„å¹‚æ¬¡åˆ†è§£ä¸ºäºŒè¿›åˆ¶ï¼Œæ¯”å¦‚`P^5 = P^4 âˆ˜ P^1`ï¼‰æˆ–**å¾ªç¯èŠ‚**ï¼ˆæ¯ä¸ªä½ç½®çš„ç§»åŠ¨è·¯å¾„å½¢æˆç¯ï¼Œç¯é•¿ä¸ºLï¼Œåˆ™`P^L`ç­‰äºæ’ç­‰ç½®æ¢ï¼Œæ‰€ä»¥`P^m = P^(m mod L)`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¿«é€Ÿå¹‚æ˜¯ä¼˜åŒ–ç½®æ¢å¤åˆçš„å¸¸ç”¨æ–¹æ³•ï¼Œé€‚ç”¨äºéœ€è¦é‡å¤åº”ç”¨åŒä¸€ç½®æ¢çš„åœºæ™¯ã€‚

### 3. å…³é”®ç‚¹3ï¼šå¦‚ä½•å¤„ç†å·¦ç§»æ“ä½œï¼Ÿ  
* **åˆ†æ**ï¼šé¢˜ç›®ä¸­çš„æ“ä½œæ˜¯â€œä»å·¦åˆ°å³å¯¹æ¯ä¸ªé•¿åº¦ä¸ºkçš„å­ä¸²æ’åºâ€ï¼Œç›¸å½“äºæ¯æ¬¡æ’åºåå°†å­—ç¬¦ä¸²å·¦ç§»ä¸€ä½ï¼ˆæ¯”å¦‚ï¼Œæ’åº`0-3`åï¼Œä¸‹ä¸€æ¬¡æ’åº`1-4`ï¼Œç›¸å½“äºå°†å­—ç¬¦ä¸²å·¦ç§»ä¸€ä½åæ’åº`0-3`ï¼Œå†å³ç§»ä¸€ä½ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å·¦ç§»æ“ä½œè½¬åŒ–ä¸ºä¸€ä¸ªç½®æ¢`L`ï¼ˆ`L[j] = (j+1) mod n`ï¼‰ï¼Œç„¶åå°†d-sortingç½®æ¢`P`ä¸`L`å¤åˆï¼ˆ`Pâˆ˜L`ï¼‰ï¼Œè¡¨ç¤ºâ€œå…ˆå·¦ç§»ï¼Œå†æ’åºâ€ã€‚è¿™æ ·ï¼Œn-k+1æ¬¡æ“ä½œç›¸å½“äºåº”ç”¨`(Pâˆ˜L)^(n-k+1)`ï¼Œæœ€åå†å³ç§»n-k+1æ¬¡ï¼ˆæŠµæ¶ˆå·¦ç§»çš„å½±å“ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå·¦ç§»æ“ä½œå¯ä»¥é€šè¿‡ç½®æ¢å¤åˆæ¥å¤„ç†ï¼Œé¿å…äº†æ¯æ¬¡æ“ä½œéƒ½ç§»åŠ¨å­—ç¬¦ä¸²ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆåŸºäºongluçš„é¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ç½®æ¢å¿«é€Ÿå¹‚çš„æ ¸å¿ƒé€»è¾‘ï¼Œå°†d-sortingæ“ä½œè½¬åŒ–ä¸ºç½®æ¢ï¼Œç”¨å¿«é€Ÿå¹‚è®¡ç®—å¤šæ¬¡æ“ä½œåçš„æ€»ç½®æ¢ï¼Œæœ€ååº”ç”¨ç½®æ¢å¾—åˆ°ç»“æœã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <cstdio>
  #include <cstring>
  using namespace std;
  const int Maxn = 1e6 + 9;

  char c[Maxn], w[Maxn];
  int p[Maxn], tmp[Maxn], l[Maxn];

  void multi(int* a, int* b, int n) {
      for (int i = 0; i < n; i++)
          tmp[i] = a[b[i]];
      for (int i = 0; i < n; i++)
          a[i] = tmp[i];
  }

  void pow(int* a, int p, int n) {
      int ans[Maxn];
      for (int i = 0; i < n; i++)
          ans[i] = i;
      for (; p; p >>= 1, multi(a, a, n))
          if (p & 1)
              multi(ans, a, n);
      for (int i = 0; i < n; i++)
          a[i] = ans[i];
  }

  void work(int n, int k, int d) {
      memset(p, 0, sizeof(p));
      int cnt[d] = {0};
      for (int i = 0; i < k; i++)
          cnt[i % d]++;
      for (int i = 1; i < d; i++)
          cnt[i] += cnt[i - 1];
      for (int i = k - 1; i >= 0; i--)
          p[--cnt[i % d]] = i;
      for (int i = k; i < n; i++)
          p[i] = i;
      multi(p, l, n);
      pow(p, n - k + 1, n);
      for (int i = 0; i < n; i++) {
          int pos = (i >= (n - k + 1)) ? (i - (n - k + 1)) : (i + k - 1);
          w[i] = c[p[pos]];
      }
      memcpy(c, w, n);
      printf("%s\n", c);
  }

  int main() {
      int n = 0, m;
      while ((c[n] = getchar()) != '\n')
          n++;
      m = getint();
      for (int i = 0; i < n; i++)
          l[i] = (i + 1) % n;
      while (m--) {
          int k = getint(), d = getint();
          work(n, k, d);
      }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. `multi`å‡½æ•°ï¼šå¤åˆä¸¤ä¸ªç½®æ¢ï¼ˆ`a`å’Œ`b`ï¼‰ï¼Œç»“æœå­˜åˆ°`a`ä¸­ï¼ˆ`a[i]`è¡¨ç¤ºåº”ç”¨`b`åå†åº”ç”¨`a`çš„ä½ç½®ï¼‰ã€‚  
  2. `pow`å‡½æ•°ï¼šè®¡ç®—ç½®æ¢`a`çš„`p`æ¬¡å¹‚ï¼ˆç”¨å¿«é€Ÿå¹‚ä¼˜åŒ–ï¼‰ã€‚  
  3. `work`å‡½æ•°ï¼š  
     - è®¡ç®—d-sortingç½®æ¢`p`ï¼ˆ`p[i]`è¡¨ç¤ºiä½ç½®çš„å…ƒç´ ä¸‹ä¸€æ­¥è¦å»çš„ä½ç½®ï¼‰ã€‚  
     - å°†`p`ä¸å·¦ç§»ç½®æ¢`l`å¤åˆï¼ˆ`multi(p, l, n)`ï¼‰ã€‚  
     - è®¡ç®—`p`çš„`n-k+1`æ¬¡å¹‚ï¼ˆ`pow(p, n-k+1, n)`ï¼‰ã€‚  
     - åº”ç”¨ç½®æ¢`p`åˆ°å­—ç¬¦ä¸²`c`ï¼Œå¾—åˆ°ç»“æœ`w`ï¼Œå¹¶è¾“å‡ºã€‚  


### é¢˜è§£äºŒï¼ˆongluï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨å¿«é€Ÿå¹‚ä¼˜åŒ–ç½®æ¢å¤åˆï¼Œä»£ç ç®€æ´æ˜“è¯»ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void multi(int* a, int* b, int n) {
      for (int i = 0; i < n; i++)
          tmp[i] = a[b[i]];
      for (int i = 0; i < n; i++)
          a[i] = tmp[i];
  }

  void pow(int* a, int p, int n) {
      int ans[Maxn];
      for (int i = 0; i < n; i++)
          ans[i] = i;
      for (; p; p >>= 1, multi(a, a, n))
          if (p & 1)
              multi(ans, a, n);
      for (int i = 0; i < n; i++)
          a[i] = ans[i];
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `multi`å‡½æ•°ï¼šæ¯”å¦‚ï¼Œ`a`æ˜¯ç½®æ¢`P`ï¼Œ`b`æ˜¯ç½®æ¢`Q`ï¼Œé‚£ä¹ˆ`multi(a, b, n)`åï¼Œ`a[i]`è¡¨ç¤ºå…ˆåº”ç”¨`Q`ï¼ˆå°†iç§»åŠ¨åˆ°`b[i]`ï¼‰ï¼Œå†åº”ç”¨`P`ï¼ˆå°†`b[i]`ç§»åŠ¨åˆ°`a[b[i]]`ï¼‰ï¼Œå³æ€»ç½®æ¢æ˜¯`Pâˆ˜Q`ã€‚  
  - `pow`å‡½æ•°ï¼šè®¡ç®—ç½®æ¢`a`çš„`p`æ¬¡å¹‚ã€‚æ¯”å¦‚ï¼Œ`p=5`ï¼ˆäºŒè¿›åˆ¶101ï¼‰ï¼Œåˆ™`a^5 = a^4 âˆ˜ a^1`ã€‚`ans`æ•°ç»„åˆå§‹åŒ–ä¸ºæ’ç­‰ç½®æ¢ï¼ˆ`ans[i]=i`ï¼‰ï¼Œç„¶åæ¯æ¬¡å°†`p`å³ç§»ä¸€ä½ï¼Œè‹¥å½“å‰ä½ä¸º1ï¼Œåˆ™å°†`ans`ä¸`a`å¤åˆï¼ˆ`multi(ans, a, n)`ï¼‰ï¼Œç„¶åå°†`a`è‡ªä¹˜ï¼ˆ`multi(a, a, n)`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¿«é€Ÿå¹‚çš„æ ¸å¿ƒæ˜¯å°†å¹‚æ¬¡åˆ†è§£ä¸ºäºŒè¿›åˆ¶ï¼Œå‡å°‘ä¹˜æ³•æ¬¡æ•°ï¼ˆä»O(p)åˆ°O(log p)ï¼‰ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šç½®æ¢å°ç«è½¦ï¼ˆ8ä½åƒç´ é£ï¼‰  
**è®¾è®¡æ€è·¯**ï¼šç”¨åƒç´ ç«è½¦ä»£è¡¨å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œè½¨é“ä»£è¡¨ä½ç½®ã€‚ç½®æ¢è§„åˆ™ç”¨ç®­å¤´æ ‡è®°â€œä»å“ªä¸ªè½¨é“åˆ°å“ªä¸ªè½¨é“â€ï¼Œå·¦ç§»æ“ä½œç›¸å½“äºç«è½¦æ•´ä½“å‘å‰å¼€ã€‚åŠ å…¥â€œç½®æ¢å®Œæˆâ€çš„â€œå®â€éŸ³æ•ˆå’Œâ€œå¿«é€Ÿå¹‚åŠ é€Ÿâ€çš„ç‰¹æ•ˆï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ã€‚

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹ï¼š  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼šå±å¹•å·¦ä¾§æ˜¯ä¸€æ’åƒç´ è½¨é“ï¼ˆ0~n-1å·ï¼‰ï¼Œæ¯ä¸ªè½¨é“ä¸Šæœ‰ä¸€ä¸ªåƒç´ ç«è½¦ï¼ˆä»£è¡¨å­—ç¬¦ï¼‰ï¼Œé¢œè‰²å„ä¸ç›¸åŒã€‚å³ä¾§æ˜¯æ§åˆ¶é¢æ¿ï¼šâ€œå¼€å§‹/æš‚åœâ€ã€â€œå•æ­¥â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼Œä»¥åŠâ€œå¿«é€Ÿå¹‚å€æ•°â€é€‰æ‹©æ¡†ï¼ˆ1xã€2xã€4xï¼‰ã€‚èƒŒæ™¯æ˜¯FCé£æ ¼çš„è“å¤©è‰åœ°ï¼Œæ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ï¼‰ã€‚  
2. **ç½®æ¢è§„åˆ™å±•ç¤º**ï¼šç‚¹å‡»â€œæ˜¾ç¤ºç½®æ¢â€æŒ‰é’®ï¼Œå±å¹•ä¸Šä¼šå‡ºç°ç®­å¤´ï¼Œä»æ¯ä¸ªè½¨é“æŒ‡å‘å®ƒçš„ç›®æ ‡è½¨é“ï¼ˆæ¯”å¦‚ï¼Œd=2ã€k=4æ—¶ï¼Œè½¨é“1æŒ‡å‘è½¨é“2ï¼Œè½¨é“2æŒ‡å‘è½¨é“1ï¼‰ã€‚ç®­å¤´é¢œè‰²ä¸ºçº¢è‰²ï¼ŒåŠ ç²—æ˜¾ç¤ºã€‚  
3. **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œç«è½¦ä¼šæŒ‰ç®­å¤´æ–¹å‘ç§»åŠ¨ä¸€æ¬¡ï¼ˆæ¯”å¦‚ï¼Œè½¨é“1çš„ç«è½¦ç§»åŠ¨åˆ°è½¨é“2ï¼Œè½¨é“2çš„ç«è½¦ç§»åŠ¨åˆ°è½¨é“1ï¼‰ã€‚ç§»åŠ¨æ—¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼Œç›®æ ‡è½¨é“ä¼šé—ªçƒç»¿è‰²ã€‚  
4. **å¿«é€Ÿå¹‚åŠ é€Ÿ**ï¼šé€‰æ‹©â€œ2xâ€å€æ•°ï¼ŒåŠ¨ç”»é€Ÿåº¦åŠ å¿«ä¸¤å€ï¼Œç«è½¦ç§»åŠ¨çš„é¢‘ç‡æ›´é«˜ã€‚åŒæ—¶ï¼Œå±å¹•é¡¶éƒ¨ä¼šæ˜¾ç¤ºâ€œå¿«é€Ÿå¹‚ï¼š2^1æ¬¡â€çš„æç¤ºï¼Œå¸®åŠ©ç†è§£å¿«é€Ÿå¹‚çš„åˆ†è§£è¿‡ç¨‹ã€‚  
5. **å·¦ç§»æ“ä½œ**ï¼šå½“åº”ç”¨å·¦ç§»ç½®æ¢æ—¶ï¼Œæ‰€æœ‰ç«è½¦ä¼šåŒæ—¶å‘å‰å¼€ä¸€æ ¼ï¼ˆè½¨é“içš„ç«è½¦ç§»åŠ¨åˆ°è½¨é“i+1ï¼Œè½¨é“n-1çš„ç«è½¦ç§»åŠ¨åˆ°è½¨é“0ï¼‰ã€‚ç§»åŠ¨æ—¶ä¼´éšâ€œæ»‘å…¥â€åŠ¨ç”»ï¼ˆç«è½¦ä»å³ä¾§è¿›å…¥è½¨é“ï¼‰ï¼ŒéŸ³æ•ˆä¸ºâ€œå—–å—–â€å£°ã€‚  
6. **ç›®æ ‡è¾¾æˆ**ï¼šå½“å®Œæˆn-k+1æ¬¡æ“ä½œåï¼Œæ‰€æœ‰ç«è½¦ä¼šåœåœ¨æœ€ç»ˆä½ç½®ï¼Œå±å¹•ä¸­å¤®å¼¹å‡ºâ€œå®Œæˆï¼â€çš„åƒç´ å¯¹è¯æ¡†ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚åŒæ—¶ï¼Œæ˜¾ç¤ºå½“å‰å­—ç¬¦ä¸²çš„ç»“æœï¼ˆæ¯”å¦‚â€œqertwyâ€ï¼‰ã€‚

### æ—ç™½æç¤ºï¼š  
- ï¼ˆç½®æ¢è§„åˆ™å±•ç¤ºæ—¶ï¼‰â€œçœ‹ï¼Œæ¯ä¸ªè½¨é“éƒ½æœ‰ä¸€ä¸ªç®­å¤´ï¼Œå®ƒå‘Šè¯‰ç«è½¦ä¸‹ä¸€æ­¥è¦å¼€åˆ°å“ªä¸ªè½¨é“ï¼â€  
- ï¼ˆå•æ­¥æ‰§è¡Œæ—¶ï¼‰â€œè½¨é“1çš„ç«è½¦è¦å¼€åˆ°è½¨é“2å•¦ï¼Œæ³¨æ„çœ‹å®ƒçš„ç§»åŠ¨æ–¹å‘ï¼â€  
- ï¼ˆå¿«é€Ÿå¹‚åŠ é€Ÿæ—¶ï¼‰â€œç°åœ¨å¼€å¯äº†2å€é€Ÿï¼Œç›¸å½“äºä¸€æ¬¡åšäº†2æ¬¡ç½®æ¢ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¿«ï¼Ÿâ€  
- ï¼ˆå®Œæˆæ—¶ï¼‰â€œå¤ªæ£’äº†ï¼æ‰€æœ‰ç«è½¦éƒ½åˆ°è¾¾äº†æœ€ç»ˆä½ç½®ï¼Œå­—ç¬¦ä¸²å˜æˆäº†â€˜qertwyâ€™ï¼â€


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»ï¼š  
ç½®æ¢ä¸å¿«é€Ÿå¹‚çš„æŠ€å·§ä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š  
1. **å­—ç¬¦ä¸²å¾ªç¯ç§»ä½**ï¼šæ¯”å¦‚ï¼Œå°†å­—ç¬¦ä¸²å·¦ç§»kä½ï¼Œç›¸å½“äºåº”ç”¨kæ¬¡å·¦ç§»ç½®æ¢ï¼Œç”¨å¿«é€Ÿå¹‚å¯ä»¥å¿«é€Ÿè®¡ç®—ã€‚  
2. **æ’åˆ—çš„å¾ªç¯èŠ‚åˆ†è§£**ï¼šæ¯”å¦‚ï¼Œæ±‚ä¸€ä¸ªæ’åˆ—çš„é˜¶ï¼ˆæœ€å°çš„mä½¿å¾—æ’åˆ—çš„mæ¬¡å¹‚ç­‰äºæ’ç­‰æ’åˆ—ï¼‰ï¼Œå¯ä»¥é€šè¿‡åˆ†è§£å¾ªç¯èŠ‚ï¼ˆæ¯ä¸ªå¾ªç¯èŠ‚çš„é˜¶æ˜¯å…¶é•¿åº¦ï¼Œæ€»é˜¶æ˜¯å„å¾ªç¯èŠ‚é•¿åº¦çš„LCMï¼‰ã€‚  
3. **å¯†ç å­¦ä¸­çš„ç½®æ¢ç½‘ç»œ**ï¼šæ¯”å¦‚ï¼ŒDESåŠ å¯†ç®—æ³•ä¸­çš„Sç›’ç½®æ¢ï¼Œå°±æ˜¯å°†è¾“å…¥ä½æŒ‰ä¸€å®šè§„åˆ™é‡æ–°æ’åˆ—ï¼Œç½®æ¢çš„å¤åˆæ˜¯åŠ å¯†çš„æ ¸å¿ƒæ­¥éª¤ã€‚

### ç»ƒä¹ æ¨è (æ´›è°·)ï¼š  
1. **æ´›è°· P1088 [NOIP2004 æ™®åŠç»„] ç«æ˜Ÿäºº**  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦å¤„ç†å­—ç¬¦ä¸²çš„ç½®æ¢ï¼ˆæ’å…¥å­—ç¬¦åæ±‚ä¸‹ä¸€ä¸ªå­—å…¸åºæ’åˆ—ï¼‰ï¼Œå¯ä»¥å·©å›ºç½®æ¢çš„åº”ç”¨ï¼Œä»¥åŠå¦‚ä½•ç”¨äºŒåˆ†æ³•ä¼˜åŒ–æŸ¥æ‰¾ã€‚  
2. **æ´›è°· P1379 å…«æ•°ç éš¾é¢˜**  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦ç”¨BFSæ±‚è§£æœ€çŸ­è·¯å¾„ï¼Œå…¶ä¸­æ¯ä¸ªçŠ¶æ€æ˜¯ä¸€ä¸ªæ’åˆ—ï¼ˆ8æ•°ç çš„ä½ç½®ï¼‰ï¼Œç½®æ¢æ˜¯çŠ¶æ€è½¬ç§»çš„å…³é”®ï¼Œå¯ä»¥å¸®åŠ©ç†è§£ç½®æ¢ä¸çŠ¶æ€ç©ºé—´çš„å…³ç³»ã€‚  
3. **æ´›è°· P2024 [NOI2001] é£Ÿç‰©é“¾**  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦ç”¨å¸¦æƒå¹¶æŸ¥é›†å¤„ç†ç½®æ¢å…³ç³»ï¼ˆåŠ¨ç‰©ä¹‹é—´çš„æ•é£Ÿå…³ç³»ï¼‰ï¼Œå¯ä»¥æ‹“å±•å¯¹ç½®æ¢çš„ç†è§£ï¼Œä»¥åŠå¦‚ä½•ç”¨æ•°æ®ç»“æ„ç»´æŠ¤ç½®æ¢ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªPiwry)ï¼š  
â€œæˆ‘åœ¨å†™â€˜æ’åˆ—ä¹˜æ³•â€™æ—¶ä¸å°å¿ƒè¢«å‘åˆ°äº†â€”â€”åŸæœ¬è®¾`p[i]`è¡¨ç¤ºâ€˜ä¸‹ä¸€æ­¥å°†`a[i]`æ”¾åˆ°`p[i]`ä½ç½®â€™ï¼Œç»“æœWAäº†å¾ˆä¹…ã€‚åæ¥æ‰æ˜ç™½ï¼Œæ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯è®¾`p[i]`è¡¨ç¤ºâ€˜ä¸‹ä¸€æ­¥å°†`a[p[i]]`æ”¾åˆ°`i`ä½ç½®â€™ï¼ˆå³`i`ä½ç½®çš„å…ƒç´ æ¥è‡ª`p[i]`ï¼‰ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä¸ªç»éªŒéå¸¸é‡è¦ï¼ç½®æ¢çš„æ–¹å‘å¾ˆå®¹æ˜“æé”™ï¼Œæ¯”å¦‚â€œ`p[i]`æ˜¯`i`çš„ç›®æ ‡ä½ç½®â€è¿˜æ˜¯â€œ`i`çš„å…ƒç´ æ¥è‡ª`p[i]`â€ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œ`p[i]`è¡¨ç¤ºâ€œåº”ç”¨ç½®æ¢åï¼Œ`i`ä½ç½®çš„å…ƒç´ æ¥è‡ªåŸæ¥çš„`p[i]`ä½ç½®â€ï¼ˆå³`new_str[i] = old_str[p[i]]`ï¼‰ã€‚å¦‚æœæ–¹å‘æåï¼Œç»“æœä¼šå®Œå…¨é”™è¯¯ã€‚**å»ºè®®**ï¼šåœ¨å†™ç½®æ¢ä»£ç æ—¶ï¼Œå…ˆå°èŒƒå›´æµ‹è¯•ï¼ˆæ¯”å¦‚ç”¨æ ·ä¾‹è¾“å…¥ï¼‰ï¼Œç¡®è®¤ç½®æ¢çš„æ–¹å‘æ˜¯å¦æ­£ç¡®ã€‚


## ğŸ‰ ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œStrange Sortingâ€çš„åˆ†æå°±åˆ°è¿™é‡Œå•¦ï¼é€šè¿‡ç½®æ¢ä¸å¿«é€Ÿå¹‚çš„æŠ€å·§ï¼Œæˆ‘ä»¬æˆåŠŸå°†å¤æ‚çš„å¤šæ¬¡æ’åºæ“ä½œè½¬åŒ–ä¸ºé«˜æ•ˆçš„æ•°å­¦è®¡ç®—ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„æœ¬è´¨æ˜¯â€œæŠ½è±¡é—®é¢˜â€â€”â€”å°†å…·ä½“çš„æ“ä½œæŠ½è±¡ä¸ºæ•°å­¦æ¨¡å‹ï¼ˆæ¯”å¦‚ç½®æ¢ï¼‰ï¼Œå†ç”¨ç®—æ³•ä¼˜åŒ–æ¨¡å‹ï¼ˆæ¯”å¦‚å¿«é€Ÿå¹‚ï¼‰ï¼Œå°±èƒ½è§£å†³çœ‹ä¼¼å›°éš¾çš„é—®é¢˜ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼çš„â€œå¤šæ¬¡æ“ä½œâ€é—®é¢˜ï¼Œä¸å¦¨æƒ³æƒ³ï¼šâ€œèƒ½ä¸èƒ½ç”¨ç½®æ¢æ¥è¡¨ç¤ºï¼Ÿâ€ åŠ æ²¹ï¼Œä½ ä¸€å®šèƒ½æŒæ¡æ›´å¤šç®—æ³•æŠ€å·§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š285.41ç§’
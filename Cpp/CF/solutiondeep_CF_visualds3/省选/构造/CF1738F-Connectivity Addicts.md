# é¢˜ç›®ä¿¡æ¯

# Connectivity Addicts

## é¢˜ç›®æè¿°

This is an interactive problem.

Given a simple undirected graph with $ n $ vertices numbered from $ 1 $ to $ n $ , your task is to color all the vertices such that for every color $ c $ , the following conditions hold:

1. The set of vertices with color $ c $ is connected;
2. $ s_c \leq n_c^2 $ , where $ n_c $ is the number of vertices with color $ c $ , and $ s_c $ is the sum of degrees of vertices with color $ c $ .

 It can be shown that there always exists a way to color all the vertices such that the above conditions hold. Initially, you are only given the number $ n $ of vertices and the degree of each vertex.

In each query, you can choose a vertex $ u $ . As a response, you will be given the $ k $ -th edge incident to $ u $ , if this is the $ k $ -th query on vertex $ u $ .

You are allowed to make at most $ n $ queries.

An undirected graph is simple if it does not contain multiple edges or self-loops.

The degree of a vertex is the number of edges incident to it.

A set $ S $ of vertices is connected if for every two different vertices $ u, v \in S $ , there is a path, which only passes through vertices in $ S $ , that connects $ u $ and $ v $ . That is, there is a sequence of edges $ (u_1, v_1), (u_2, v_2), \dots, (u_k, v_k) $ with $ k \geq 1 $ such that

1. $ u_1 = u $ , $ v_k = v $ , and $ v_i = u_{i+1} $ for every $ 1 \leq i < k $ ; and
2. $ u_k \in S $ and $ v_k \in S $ for every $ 1 \leq i \leq k $ .

 Especially, a set containing only one vertex is connected.

## è¯´æ˜/æç¤º

In the example, there is only one test case.

In the test case, there are $ n = 5 $ vertices with vertices $ 1, 2, 3, 4 $ of degree $ 2 $ and vertex $ 5 $ of degree $ 0 $ . It is obvious that vertex $ 5 $ is isolated, i.e., it does not connect to any other vertices.

A possible interaction is shown in the sample input and output, where $ 4 $ "?" queries are made on vertex $ 1 $ twice and vertex $ 3 $ twice. According to the responses to these queries, we know that each of vertex $ 1 $ and vertex $ 3 $ connects to two vertices $ 2 $ and $ 4 $ .

A possible solution is shown in the sample output, where vertex $ 1 $ and vertex $ 2 $ are colored by $ 1 $ , vertex $ 3 $ and vertex $ 4 $ are colored by $ 2 $ , and vertex $ 5 $ is colored by $ 3 $ . It can be seen that this solution satisfies the required conditions as follows.

- For color $ c = 1 $ , vertex $ 1 $ and vertex $ 2 $ are connected. Moreover, $ n_1 = 2 $ and $ s_1 = d_1 + d_2 = 2 + 2 = 4 \leq n_1^2 = 2^2 = 4 $ ;
- For color $ c = 2 $ , vertex $ 3 $ and vertex $ 4 $ are connected. Moreover, $ n_2 = 2 $ and $ s_2 = d_3 + d_4 = 2 + 2 = 4 \leq n_2^2 = 2^2 = 4 $ ;
- For color $ c = 3 $ , there is only one vertex (vertex $ 5 $ ) colored by $ 3 $ . Moreover, $ n_3 = 1 $ and $ s_3 = d_5 = 0 \leq n_3^2 = 1^2 = 1 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
1
5
2 2 2 2 0

2

4

2

4```

### è¾“å‡º

```
? 1

? 1

? 3

? 3

! 1 1 2 2 3```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šConnectivity Addicts æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè´ªå¿ƒæ„é€ ï¼ˆæŒ‰åº¦æ•°æ’åºï¼‰+ äº¤äº’ç­–ç•¥  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œConnectivity Addictsâ€çš„å…³é”®ï¼Œåœ¨äº**ç”¨è´ªå¿ƒçš„æ–¹å¼æ„é€ æ»¡è¶³æ¡ä»¶çš„é¢œè‰²ç±»**ã€‚å¯ä»¥æŠŠé—®é¢˜æ¯”ä½œâ€œæ•´ç†ç©å…·ç®±â€ï¼šæˆ‘ä»¬å…ˆæ‹¿èµ·æœ€å¤§çš„ç©å…·ï¼ˆåº¦æ•°æœ€å¤§çš„é¡¶ç‚¹ï¼‰ï¼ŒæŠŠå®ƒå’Œå‘¨å›´çš„å°ç©å…·ï¼ˆé‚»æ¥ç‚¹ï¼‰æ”¾åœ¨åŒä¸€ä¸ªç›’å­é‡Œï¼ˆæŸ“åŒä¸€ç§é¢œè‰²ï¼‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¤§ç©å…·çš„â€œå½±å“åŠ›â€ï¼ˆåº¦æ•°ï¼‰å¤§ï¼Œèƒ½å¿«é€ŸæŠŠå‘¨å›´çš„ç©å…·èšåœ¨ä¸€èµ·ï¼Œè€Œä¸”ç›’å­çš„å¤§å°ï¼ˆé¢œè‰²ç±»å¤§å°ï¼‰è‚¯å®šæ¯”å¤§ç©å…·çš„â€œå°ºå¯¸â€ï¼ˆåº¦æ•°ï¼‰å¤§ï¼Œä»è€Œæ»¡è¶³`s_c â‰¤ n_cÂ²`çš„æ¡ä»¶ï¼ˆå°±åƒå¤§ç›’å­èƒ½è£…ä¸‹æ›´å¤šç©å…·ï¼Œä¸ä¼šæŒ¤çˆ†ï¼‰ã€‚  

### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹
- **æ ¸å¿ƒæ€è·¯**ï¼šæŒ‰é¡¶ç‚¹åº¦æ•°ä»å¤§åˆ°å°æ’åºï¼Œä¾æ¬¡å¤„ç†æœªæŸ“è‰²çš„é¡¶ç‚¹ã€‚å¯¹äºå½“å‰é¡¶ç‚¹ï¼ŒæŸ¥è¯¢å®ƒçš„é‚»æ¥ç‚¹ï¼š  
  1. è‹¥é‚»æ¥ç‚¹å·²æŸ“è‰²ï¼Œå°±æŠŠå½“å‰é¡¶ç‚¹å’Œå·²æŸ¥è¯¢çš„é‚»æ¥ç‚¹æŸ“æˆåŒä¸€ç§é¢œè‰²ï¼ˆåˆå¹¶ç›’å­ï¼‰ï¼›  
  2. è‹¥é‚»æ¥ç‚¹æœªæŸ“è‰²ï¼Œç»§ç»­æŸ¥è¯¢ï¼Œç›´åˆ°å¤„ç†å®Œæ‰€æœ‰é‚»æ¥ç‚¹ï¼ˆæ–°å»ºç›’å­ï¼‰ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼š  
  1. å¦‚ä½•åœ¨**æœ€å¤šnæ¬¡æŸ¥è¯¢**å†…å®Œæˆæ„é€ ï¼Ÿï¼ˆè§£å†³æ–¹æ¡ˆï¼šé‡åˆ°å·²æŸ“è‰²çš„é‚»æ¥ç‚¹å°±åœæ­¢æŸ¥è¯¢ï¼Œé¿å…ä¸å¿…è¦çš„è¯¢é—®ã€‚ï¼‰  
  2. å¦‚ä½•ä¿è¯é¢œè‰²ç±»æ»¡è¶³`s_c â‰¤ n_cÂ²`ï¼Ÿï¼ˆè§£å†³æ–¹æ¡ˆï¼šæŒ‰åº¦æ•°ä»å¤§åˆ°å°å¤„ç†ï¼Œé¢œè‰²ç±»çš„å¤§å°ä¸€å®šå¤§äºè¯¥ç±»ä¸­æ‰€æœ‰é¡¶ç‚¹çš„åº¦æ•°ï¼Œä»è€Œ`s_c = Î£deg(u) â‰¤ n_c * max_deg â‰¤ n_cÂ²`ã€‚ï¼‰  

### å¯è§†åŒ–è®¾è®¡æ€è·¯
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰å±•ç¤ºç®—æ³•æµç¨‹ï¼š  
- **é¡¶ç‚¹è¡¨ç¤º**ï¼šç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºæœªæŸ“è‰²ï¼ˆç°è‰²ï¼‰ã€æ­£åœ¨å¤„ç†ï¼ˆé»„è‰²ï¼‰ã€å·²æŸ“è‰²ï¼ˆå½©è‰²ï¼‰çš„é¡¶ç‚¹ï¼›  
- **æŸ¥è¯¢è¿‡ç¨‹**ï¼šå½“å¤„ç†ä¸€ä¸ªé¡¶ç‚¹æ—¶ï¼Œç”¨â€œç®­å¤´â€åƒç´ ä»è¯¥é¡¶ç‚¹æŒ‡å‘é‚»æ¥ç‚¹ï¼ŒæŸ¥è¯¢æˆåŠŸæ—¶é‚»æ¥ç‚¹é—ªçƒï¼›  
- **åˆå¹¶é¢œè‰²**ï¼šå½“é‚»æ¥ç‚¹å·²æŸ“è‰²æ—¶ï¼Œå½“å‰é¡¶ç‚¹å’Œå·²æŸ¥è¯¢çš„é‚»æ¥ç‚¹ä¼šâ€œæ¸å˜â€æˆé‚»æ¥ç‚¹çš„é¢œè‰²ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
- **è¿›åº¦æç¤º**ï¼šå±å¹•ä¸‹æ–¹æ˜¾ç¤ºâ€œå·²å¤„ç†xä¸ªé¡¶ç‚¹â€â€œå‰©ä½™æŸ¥è¯¢æ¬¡æ•°yâ€ï¼Œå¢åŠ ç´§è¿«æ„Ÿã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šzac2010)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸â€œç›´ç™½â€ï¼Œç›´æ¥æŠ“ä½äº†â€œæŒ‰åº¦æ•°æ’åºâ€çš„æ ¸å¿ƒã€‚ä»£ç ç”¨`sort`å¯¹é¡¶ç‚¹æŒ‰åº¦æ•°ä»å¤§åˆ°å°æ’åºï¼Œç„¶åéå†æ¯ä¸ªæœªæŸ“è‰²çš„é¡¶ç‚¹ï¼ŒæŸ¥è¯¢å®ƒçš„é‚»æ¥ç‚¹ã€‚å½“é‡åˆ°å·²æŸ“è‰²çš„é‚»æ¥ç‚¹æ—¶ï¼Œç«‹å³åœæ­¢æŸ¥è¯¢ï¼Œå¹¶å°†å½“å‰é¡¶ç‚¹å’Œå·²æŸ¥è¯¢çš„é‚»æ¥ç‚¹æŸ“æˆåŒä¸€ç§é¢œè‰²ã€‚ä»£ç ä¸­çš„`vector`ç”¨æ¥å­˜å‚¨æœªæŸ“è‰²çš„é‚»æ¥ç‚¹ï¼Œ`c`æ•°ç»„è®°å½•é¢œè‰²ï¼Œé€»è¾‘æ¸…æ™°æ˜“æ‡‚ã€‚ç‰¹åˆ«æ˜¯**åœæ­¢æŸ¥è¯¢**çš„æŠ€å·§ï¼Œå®Œç¾æ§åˆ¶äº†æŸ¥è¯¢æ¬¡æ•°ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚  

### é¢˜è§£äºŒï¼š(æ¥æºï¼šwilliam555)
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£ç”¨**å¹¶æŸ¥é›†**ç»´æŠ¤é¢œè‰²ç±»çš„è¿é€šæ€§ï¼Œéå¸¸å·§å¦™ã€‚ä»£ç ä¸­`gf`å‡½æ•°ï¼ˆæ‰¾æ ¹èŠ‚ç‚¹ï¼‰ç”¨æ¥åˆå¹¶è¿é€šå—ï¼Œ`mark`æ•°ç»„æ ‡è®°å·²å¤„ç†çš„é¡¶ç‚¹ã€‚å¤„ç†æ¯ä¸ªé¡¶ç‚¹æ—¶ï¼ŒæŸ¥è¯¢é‚»æ¥ç‚¹å¹¶åˆå¹¶è¿é€šå—ï¼Œé‡åˆ°å·²æ ‡è®°çš„é‚»æ¥ç‚¹å°±åœæ­¢ã€‚å¹¶æŸ¥é›†çš„ä½¿ç”¨è®©é¢œè‰²ç±»çš„åˆå¹¶æ›´é«˜æ•ˆï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ã€‚æ­¤å¤–ï¼Œä»£ç çš„â€œå¾ªç¯å¤„ç†â€é€»è¾‘ï¼ˆ`while(solve())`ï¼‰å¾ˆç›´è§‚ï¼Œå®¹æ˜“ç†è§£ã€‚  

### é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šAlex_Wei)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**è¯æ˜éƒ¨åˆ†**å¾ˆæœ‰ä»·å€¼ï¼Œè¯¦ç»†è§£é‡Šäº†â€œä¸ºä»€ä¹ˆæŒ‰åº¦æ•°ä»å¤§åˆ°å°å¤„ç†èƒ½æ»¡è¶³æ¡ä»¶â€ã€‚ä½œè€…æåˆ°â€œä»»æ„æ—¶åˆ»è¿é€šå—å¤§å°å¤§äºå…¶ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æœ€å¤§åº¦æ•°â€ï¼Œè¿™æ˜¯`s_c â‰¤ n_cÂ²`çš„å…³é”®ã€‚ä»£ç ä¸­è™½ç„¶æ²¡æœ‰ç›´æ¥ç»™å‡ºï¼Œä½†æ€è·¯å’Œå‰ä¸¤ä»½é¢˜è§£ä¸€è‡´ï¼Œå¼ºè°ƒâ€œåˆå¹¶è¿é€šå—â€çš„é‡è¦æ€§ã€‚å¯¹äºæƒ³æ·±å…¥ç†è§£ç®—æ³•æ­£ç¡®æ€§çš„åŒå­¦ï¼Œè¿™ä»½é¢˜è§£æ˜¯å¾ˆå¥½çš„å‚è€ƒã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šå¦‚ä½•é€‰æ‹©å¤„ç†é¡¶ç‚¹çš„é¡ºåºï¼Ÿ**  
- **åˆ†æ**ï¼šæŒ‰åº¦æ•°ä»å¤§åˆ°å°å¤„ç†æ˜¯è´ªå¿ƒçš„æ ¸å¿ƒã€‚åº¦æ•°å¤§çš„é¡¶ç‚¹èƒ½å¿«é€Ÿâ€œè¿æ¥â€æ›´å¤šé‚»æ¥ç‚¹ï¼Œå½¢æˆæ›´å¤§çš„é¢œè‰²ç±»ï¼Œä»è€Œæ›´å®¹æ˜“æ»¡è¶³`s_c â‰¤ n_cÂ²`ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªåº¦æ•°ä¸º5çš„é¡¶ç‚¹ï¼Œå¤„ç†å®ƒæ—¶èƒ½è¿æ¥5ä¸ªé‚»æ¥ç‚¹ï¼Œå½¢æˆå¤§å°ä¸º6çš„é¢œè‰²ç±»ï¼Œæ­¤æ—¶`n_c=6`ï¼Œ`s_c â‰¤ 6*5=30 â‰¤ 6Â²=36`ï¼Œæ»¡è¶³æ¡ä»¶ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒç­–ç•¥çš„å…³é”®æ˜¯â€œé€‰æ‹©å½“å‰æœ€ä¼˜çš„é€‰é¡¹â€ï¼Œè¿™é‡Œâ€œæœ€ä¼˜â€å°±æ˜¯åº¦æ•°æœ€å¤§çš„é¡¶ç‚¹ã€‚  

### 2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•å‡å°‘æŸ¥è¯¢æ¬¡æ•°ï¼Ÿ**  
- **åˆ†æ**ï¼šå½“æŸ¥è¯¢åˆ°å·²æŸ“è‰²çš„é‚»æ¥ç‚¹æ—¶ï¼Œç«‹å³åœæ­¢æŸ¥è¯¢ã€‚å› ä¸ºå·²æŸ“è‰²çš„é‚»æ¥ç‚¹æ‰€åœ¨çš„é¢œè‰²ç±»å·²ç»æ»¡è¶³æ¡ä»¶ï¼Œå°†å½“å‰é¡¶ç‚¹åˆå¹¶è¿›å»ï¼Œæ—¢èƒ½ä¿è¯è¿é€šæ€§ï¼Œåˆèƒ½é¿å…å¤šä½™çš„æŸ¥è¯¢ã€‚æ¯”å¦‚ï¼Œå¤„ç†é¡¶ç‚¹Aæ—¶ï¼ŒæŸ¥è¯¢åˆ°é‚»æ¥ç‚¹Bå·²æŸ“è‰²ï¼Œé‚£ä¹ˆAå’ŒBåˆå¹¶ï¼Œä¸éœ€è¦å†æŸ¥è¯¢Açš„å…¶ä»–é‚»æ¥ç‚¹ï¼ŒèŠ‚çœäº†æŸ¥è¯¢æ¬¡æ•°ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šâ€œåŠæ—¶æ­¢æŸâ€æ˜¯äº¤äº’é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œé¿å…åšæ— ç”¨åŠŸã€‚  

### 3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•ä¿è¯é¢œè‰²ç±»æ»¡è¶³`s_c â‰¤ n_cÂ²`ï¼Ÿ**  
- **åˆ†æ**ï¼šæŒ‰åº¦æ•°ä»å¤§åˆ°å°å¤„ç†ï¼Œé¢œè‰²ç±»çš„å¤§å°`n_c`ä¸€å®šå¤§äºè¯¥ç±»ä¸­æ‰€æœ‰é¡¶ç‚¹çš„åº¦æ•°ã€‚æ¯”å¦‚ï¼Œé¢œè‰²ç±»ä¸­çš„æœ€å¤§åº¦æ•°æ˜¯`d_max`ï¼Œé‚£ä¹ˆ`n_c â‰¥ d_max + 1`ï¼ˆå› ä¸ºå¤„ç†è¯¥é¡¶ç‚¹æ—¶ï¼Œè‡³å°‘è¿æ¥äº†`d_max`ä¸ªé‚»æ¥ç‚¹ï¼‰ï¼Œæ‰€ä»¥`s_c = Î£deg(u) â‰¤ n_c * d_max â‰¤ n_c*(n_c - 1) â‰¤ n_cÂ²`ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€šè¿‡â€œæ„é€ è¶³å¤Ÿå¤§çš„é›†åˆâ€æ¥æ»¡è¶³ä¸ç­‰å¼æ¡ä»¶ï¼Œæ˜¯è¿™ç±»é¢˜çš„å¸¸è§æ€è·¯ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šæŒ‰åº¦æ•°æ’åº**ï¼šè´ªå¿ƒé€‰æ‹©åº¦æ•°å¤§çš„é¡¶ç‚¹ï¼Œå¿«é€Ÿæ„é€ æ»¡è¶³æ¡ä»¶çš„é¢œè‰²ç±»ï¼›  
- **æŠ€å·§Bï¼šåœæ­¢æŸ¥è¯¢**ï¼šé‡åˆ°å·²æŸ“è‰²çš„é‚»æ¥ç‚¹æ—¶åœæ­¢ï¼Œæ§åˆ¶æŸ¥è¯¢æ¬¡æ•°ï¼›  
- **æŠ€å·§Cï¼šå¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§**ï¼šé«˜æ•ˆåˆå¹¶é¢œè‰²ç±»ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†zac2010å’Œwilliam555çš„æ€è·¯ï¼Œç”¨æ’åºå’Œé¢œè‰²æ•°ç»„å®ç°ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  using namespace std;

  const int N = 1e5 + 10;
  int n, col, d[N], c[N], id[N];

  bool cmp(const int &i, const int &j) { return d[i] > d[j]; }

  int main() {
      ios::sync_with_stdio(false);
      cin.tie(0);
      int T;
      cin >> T;
      while (T--) {
          cin >> n;
          col = 0;
          for (int i = 1; i <= n; ++i) {
              cin >> d[i];
              id[i] = i;
              c[i] = 0;
          }
          sort(id + 1, id + n + 1, cmp);
          for (int i = 1; i <= n; ++i) {
              int u = id[i];
              if (c[u] != 0) continue;
              vector<int> neighbors;
              int v;
              bool found = false;
              for (int j = 1; j <= d[u]; ++j) {
                  cout << "? " << u << endl;
                  cin >> v;
                  neighbors.push_back(v);
                  if (c[v] != 0) {
                      found = true;
                      break;
                  }
              }
              if (found) {
                  c[u] = c[v];
                  for (int x : neighbors) c[x] = c[u];
              } else {
                  col++;
                  c[u] = col;
                  for (int x : neighbors) c[x] = col;
              }
          }
          cout << "! ";
          for (int i = 1; i <= n; ++i) cout << c[i] << " ";
          cout << endl;
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–æµ‹è¯•ç”¨ä¾‹æ•°å’Œæ¯ä¸ªé¡¶ç‚¹çš„åº¦æ•°ï¼›  
  2. **æ’åº**ï¼šæŒ‰åº¦æ•°ä»å¤§åˆ°å°æ’åºé¡¶ç‚¹ï¼›  
  3. **å¤„ç†é¡¶ç‚¹**ï¼šéå†æ¯ä¸ªæœªæŸ“è‰²çš„é¡¶ç‚¹ï¼ŒæŸ¥è¯¢å®ƒçš„é‚»æ¥ç‚¹ï¼›  
  4. **åˆå¹¶é¢œè‰²**ï¼šé‡åˆ°å·²æŸ“è‰²çš„é‚»æ¥ç‚¹æ—¶ï¼Œåˆå¹¶é¢œè‰²ï¼›å¦åˆ™æ–°å»ºé¢œè‰²ï¼›  
  5. **è¾“å‡ºç»“æœ**ï¼šæ‰“å°é¢œè‰²æ–¹æ¡ˆã€‚  

### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šzac2010)
* **äº®ç‚¹**ï¼šç”¨`vector`å­˜å‚¨æœªæŸ“è‰²çš„é‚»æ¥ç‚¹ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  vector<int> v;
  FL(j, 1, d[id[i]]){
      cout << "? " << id[i] << endl;
      cin >> u; if(c[u]) break;
      v.emplace_back(u);
  }
  c[id[i]] = c[u]? c[u] : ++col;
  for(const int &x: v) c[x] = c[id[i]];
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `vector<int> v`ç”¨æ¥å­˜å‚¨æœªæŸ“è‰²çš„é‚»æ¥ç‚¹ï¼›  
  - å¾ªç¯æŸ¥è¯¢é‚»æ¥ç‚¹ï¼Œé‡åˆ°å·²æŸ“è‰²çš„`u`å°±åœæ­¢ï¼›  
  - å¦‚æœ`u`å·²æŸ“è‰²ï¼Œå°±æŠŠå½“å‰é¡¶ç‚¹å’Œ`v`ä¸­çš„é‚»æ¥ç‚¹æŸ“æˆ`u`çš„é¢œè‰²ï¼›å¦åˆ™æ–°å»ºé¢œè‰²ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`vector`æ˜¯å¤„ç†åŠ¨æ€æ•°ç»„çš„å¥½å·¥å…·ï¼Œè¿™é‡Œç”¨æ¥å­˜å‚¨æœªæŸ“è‰²çš„é‚»æ¥ç‚¹ï¼Œéå¸¸æ–¹ä¾¿ã€‚  

#### é¢˜è§£äºŒï¼š(æ¥æºï¼šwilliam555)
* **äº®ç‚¹**ï¼šç”¨å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§ï¼Œé«˜æ•ˆåˆå¹¶é¢œè‰²ç±»ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int gf(int x){return x==fa[x]?x:fa[x]=gf(fa[x]);}
  void solve(){
      int id=0;
      for(int i=1;i<=n;i++)
          if(!mark[i]&&d[i]>d[id])id=i;	
      if(!id)return 0;
      mark[id]=1;
      for(int i=1;i<=d[id];i++){
          cout<<"? "<<id<<endl;
          int x;cin>>x;
          fa[gf(x)]=gf(id);
          if(mark[x])break;
          mark[x]=1;	
      }
      return 1;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `gf`å‡½æ•°æ˜¯å¹¶æŸ¥é›†çš„æ‰¾æ ¹å‡½æ•°ï¼Œè·¯å¾„å‹ç¼©ä¼˜åŒ–ï¼›  
  - `solve`å‡½æ•°å¤„ç†å½“å‰åº¦æ•°æœ€å¤§çš„æœªæŸ“è‰²é¡¶ç‚¹ï¼ŒæŸ¥è¯¢é‚»æ¥ç‚¹å¹¶åˆå¹¶è¿é€šå—ï¼›  
  - `mark`æ•°ç»„æ ‡è®°å·²å¤„ç†çš„é¡¶ç‚¹ï¼Œé¿å…é‡å¤å¤„ç†ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¹¶æŸ¥é›†æ˜¯å¤„ç†è¿é€šæ€§é—®é¢˜çš„ç¥å™¨ï¼Œè¿™é‡Œç”¨æ¥åˆå¹¶é¢œè‰²ç±»ï¼Œéå¸¸é«˜æ•ˆã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šåƒç´ ç©å…·æ•´ç†å¤§æŒ‘æˆ˜ã€‹  
ï¼ˆä»¿FCæ¸¸æˆé£æ ¼ï¼ŒèƒŒæ™¯æ˜¯åƒç´ åŒ–çš„ç©å…·ç®±ï¼Œé¡¶ç‚¹æ˜¯ä¸åŒé¢œè‰²çš„ç©å…·ï¼ŒæŸ¥è¯¢æ˜¯â€œä¼¸æ‰‹â€æ‹¿ç©å…·ã€‚ï¼‰

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤ºç°è‰²çš„ç©å…·ï¼ˆæœªæŸ“è‰²é¡¶ç‚¹ï¼‰ï¼Œä¸‹æ–¹æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼ŒèƒŒæ™¯éŸ³ä¹æ˜¯8ä½é£æ ¼çš„ã€Šç©å…·è¿›è¡Œæ›²ã€‹ã€‚  
2. **æ’åºé˜¶æ®µ**ï¼šç©å…·æŒ‰å¤§å°ï¼ˆåº¦æ•°ï¼‰ä»å¤§åˆ°å°æ’åˆ—ï¼Œå¤§ç©å…·ï¼ˆåº¦æ•°å¤§çš„é¡¶ç‚¹ï¼‰ä¼šâ€œè·³â€åˆ°å‰é¢ï¼Œä¼´éšâ€œæ»´æ»´â€çš„éŸ³æ•ˆã€‚  
3. **å¤„ç†é¡¶ç‚¹**ï¼šé€‰ä¸­å½“å‰æœ€å¤§çš„æœªæŸ“è‰²ç©å…·ï¼ˆé»„è‰²é—ªçƒï¼‰ï¼Œç„¶åâ€œä¼¸æ‰‹â€ï¼ˆç®­å¤´åƒç´ ï¼‰å»æ‹¿å®ƒçš„é‚»æ¥ç‚¹ï¼ˆç°è‰²ç©å…·ï¼‰ã€‚  
   - è‹¥é‚»æ¥ç‚¹å·²æŸ“è‰²ï¼ˆå½©è‰²ï¼‰ï¼Œå½“å‰ç©å…·å’Œå·²æ‹¿çš„é‚»æ¥ç‚¹ä¼šâ€œæ¸å˜â€æˆé‚»æ¥ç‚¹çš„é¢œè‰²ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼Œåœæ­¢æŸ¥è¯¢ã€‚  
   - è‹¥é‚»æ¥ç‚¹æœªæŸ“è‰²ï¼Œé‚»æ¥ç‚¹ä¼šå˜æˆé»„è‰²ï¼ŒåŠ å…¥å½“å‰ç©å…·çš„â€œç›’å­â€ï¼ˆé¢œè‰²ç±»ï¼‰ï¼Œç»§ç»­æŸ¥è¯¢ã€‚  
4. **å®Œæˆé˜¶æ®µ**ï¼šæ‰€æœ‰ç©å…·éƒ½æŸ“è‰²åï¼Œå±å¹•æ˜¾ç¤ºâ€œæ•´ç†å®Œæˆï¼â€ï¼Œä¼´éšèƒœåˆ©éŸ³æ•ˆï¼Œç©å…·ä¼šâ€œè·³åŠ¨â€åº†ç¥ã€‚  

### äº¤äº’è®¾è®¡
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œæ‰§è¡Œä¸€æ­¥æŸ¥è¯¢æˆ–åˆå¹¶æ“ä½œï¼Œæ–¹ä¾¿è§‚å¯Ÿç»†èŠ‚ï¼›  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œç®—æ³•è‡ªåŠ¨æ‰§è¡Œï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒæ•´ï¼›  
- **é‡ç½®åŠ¨ç”»**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°æ¼”ç¤ºã€‚  

### è®¾è®¡ç†ç”±
- **åƒç´ é£æ ¼**ï¼šå¤å¤çš„FCé£æ ¼èƒ½å”¤èµ·é’å°‘å¹´çš„å…´è¶£ï¼Œè®©å­¦ä¹ æ›´è½»æ¾ï¼›  
- **éŸ³æ•ˆæç¤º**ï¼šä¸åŒçš„éŸ³æ•ˆï¼ˆå¦‚â€œå®â€â€œæ»´æ»´â€ï¼‰èƒ½å¼ºåŒ–æ“ä½œè®°å¿†ï¼Œå¸®åŠ©ç†è§£å…³é”®æ­¥éª¤ï¼›  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šâ€œæ•´ç†ç©å…·â€çš„ä¸»é¢˜è®©ç®—æ³•æ›´è´´è¿‘ç”Ÿæ´»ï¼Œå¢åŠ ä»£å…¥æ„Ÿã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»
- **æŒ‰åº¦æ•°æ’åºçš„è´ªå¿ƒ**ï¼šå¯ç”¨äºè§£å†³â€œæ„é€ æ»¡è¶³æŸç§æ¡ä»¶çš„è¿é€šå—â€é—®é¢˜ï¼Œå¦‚â€œæœ€å°ç”Ÿæˆæ ‘â€ä¸­çš„Kruskalç®—æ³•ï¼ˆæŒ‰è¾¹æƒæ’åºï¼‰ï¼›  
- **äº¤äº’ç­–ç•¥**ï¼šâ€œåœæ­¢æŸ¥è¯¢â€çš„æŠ€å·§å¯ç”¨äºå…¶ä»–äº¤äº’é¢˜ï¼Œå¦‚â€œçŒœæ•°å­—â€æ¸¸æˆï¼ˆé‡åˆ°æ­£ç¡®ç­”æ¡ˆå°±åœæ­¢ï¼‰ï¼›  
- **å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§**ï¼šå¯ç”¨äºè§£å†³â€œæœ‹å‹åœˆâ€â€œå²›å±¿æ•°é‡â€ç­‰é—®é¢˜ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)
1. **æ´›è°· P1197** - ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç»´æŠ¤å›¾çš„è¿é€šæ€§ï¼Œå’Œæœ¬é¢˜çš„â€œåˆå¹¶é¢œè‰²ç±»â€æ€è·¯ç±»ä¼¼ï¼Œèƒ½å¸®åŠ©å·©å›ºå¹¶æŸ¥é›†çš„åº”ç”¨ã€‚  
2. **æ´›è°· P2078** - ã€Šæœ‹å‹ã€‹  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜è¦æ±‚æ‰¾å‡ºæœ€å¤§çš„æœ‹å‹ç¾¤ï¼Œå’Œæœ¬é¢˜çš„â€œæ„é€ è¿é€šå—â€æ€è·¯ä¸€è‡´ï¼Œèƒ½é”»ç‚¼è´ªå¿ƒæ„é€ çš„èƒ½åŠ›ã€‚  
3. **æ´›è°· P3367** - ã€Šå¹¶æŸ¥é›†æ¨¡æ¿ã€‹  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯å¹¶æŸ¥é›†çš„åŸºç¡€é¢˜ï¼Œèƒ½å¸®åŠ©ç†Ÿæ‚‰å¹¶æŸ¥é›†çš„å®ç°ï¼Œä¸ºè§£å†³æœ¬é¢˜æ‰“ä¸‹åŸºç¡€ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª zac2010)
> â€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ²¡æœ‰æƒ³åˆ°â€˜åœæ­¢æŸ¥è¯¢â€™çš„æŠ€å·§ï¼Œå¯¼è‡´æŸ¥è¯¢æ¬¡æ•°è¶…è¿‡äº†é™åˆ¶ã€‚åæ¥é€šè¿‡è°ƒè¯•ï¼Œå‘ç°é‡åˆ°å·²æŸ“è‰²çš„é‚»æ¥ç‚¹æ—¶åœæ­¢ï¼Œèƒ½å¤§å¤§å‡å°‘æŸ¥è¯¢æ¬¡æ•°ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œäº¤äº’é¢˜çš„å…³é”®æ˜¯â€˜å‡å°‘ä¸å¿…è¦çš„æ“ä½œâ€™ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨äº¤äº’é¢˜ä¸­ï¼Œâ€œå‡å°‘æŸ¥è¯¢æ¬¡æ•°â€æ˜¯æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€ã€‚é€šè¿‡â€œåœæ­¢æŸ¥è¯¢â€ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…åšæ— ç”¨åŠŸï¼Œç¬¦åˆé¢˜ç›®çš„é™åˆ¶æ¡ä»¶ã€‚è¿™æé†’æˆ‘ä»¬ï¼Œåœ¨ç¼–ç¨‹æ—¶è¦æ³¨æ„â€œä¼˜åŒ–æ“ä½œæ¬¡æ•°â€ï¼Œè€Œä¸æ˜¯ç›²ç›®åœ°å®Œæˆæ‰€æœ‰å¯èƒ½çš„æ“ä½œã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œConnectivity Addictsâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£è´ªå¿ƒæ„é€ å’Œäº¤äº’ç­–ç•¥çš„åº”ç”¨ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œç”¨èªæ˜çš„æ–¹æ³•è§£å†³é—®é¢˜â€ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š149.23ç§’
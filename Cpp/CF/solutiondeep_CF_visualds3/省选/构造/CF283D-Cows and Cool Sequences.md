# é¢˜ç›®ä¿¡æ¯

# Cows and Cool Sequences

## é¢˜ç›®æè¿°

Bessie and the cows have recently been playing with "cool" sequences and are trying to construct some. Unfortunately they are bad at arithmetic, so they need your help!

A pair $ (x,y) $ of positive integers is "cool" if $ x $ can be expressed as the sum of $ y $ consecutive integers (not necessarily positive). A sequence $ (a_{1},a_{2},...,a_{n}) $ is "cool" if the pairs $ (a_{1},a_{2}),(a_{2},a_{3}),...,(a_{n-1},a_{n}) $ are all cool.

The cows have a sequence of $ n $ positive integers, $ a_{1},a_{2},...,a_{n} $ . In one move, they may replace some $ a_{i} $ with any other positive integer (there are no other limits on the new value of $ a_{i} $ ). Determine the smallest number of moves needed to make the resulting sequence cool.

## è¯´æ˜/æç¤º

In the first sample, the sequence is already cool, so we don't need to change any elements. In the second sample, we can change $ a_{2} $ to 5 and $ a_{3} $ to 10 to make (20, 5, 10, 4) which is cool. This changes 2 elements.

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
6 4 1
```

### è¾“å‡º

```
0
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4
20 6 3 4
```

### è¾“å‡º

```
2
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCows and Cool Sequences æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æã€ŒCows and Cool Sequencesã€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰+ æ•°å­¦æ¡ä»¶è½¬åŒ–  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œåœ¨äº**å…ˆæŠŠâ€œcoolå¯¹â€çš„æ¡ä»¶è½¬åŒ–ä¸ºæ•°å­¦è§„å¾‹**ï¼Œå†ç”¨åŠ¨æ€è§„åˆ’æ‰¾åˆ°â€œæœ€å°‘ä¿®æ”¹æ¬¡æ•°â€ã€‚  

### ï¼ˆ1ï¼‰â€œcoolå¯¹â€çš„æ•°å­¦è½¬åŒ–  
é¢˜ç›®è¦æ±‚ç›¸é‚»å¯¹$(x,y)$æ»¡è¶³â€œ$x$èƒ½è¡¨ç¤ºä¸º$y$ä¸ªè¿ç»­æ•´æ•°çš„å’Œâ€ã€‚é€šè¿‡æ•°å­¦æ¨å¯¼ï¼ˆå…·ä½“è¿‡ç¨‹è§é¢˜è§£ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªæ•°æ‹†æˆ **â€œ2çš„å¹‚æ¬¡ Ã— å¥‡æ•°å› å­â€** çš„å½¢å¼ï¼š  
- è®¾$v(x)$æ˜¯$x$ä¸­2çš„æŒ‡æ•°ï¼ˆæ¯”å¦‚$x=12=2^2Ã—3$ï¼Œåˆ™$v(x)=2$ï¼‰ï¼›  
- $p(x)$æ˜¯$x$çš„æœ€å¤§å¥‡æ•°å› å­ï¼ˆæ¯”å¦‚$x=12$çš„$p(x)=3$ï¼‰ã€‚  

æ­¤æ—¶ï¼Œ$(x,y)$æ˜¯coolå¯¹çš„**å……è¦æ¡ä»¶**æ˜¯ï¼š  
1. $p(y)$èƒ½æ•´é™¤$p(x)$ï¼ˆå¥‡æ•°å› å­è¦â€œå…¼å®¹â€ï¼‰ï¼›  
2. è¦ä¹ˆ$v(y)=0$ï¼ˆ$y$æ˜¯å¥‡æ•°ï¼‰ï¼Œè¦ä¹ˆ$v(y)=v(x)+1$ï¼ˆ$y$æ˜¯å¶æ•°ï¼Œä¸”2çš„æŒ‡æ•°æ¯”$x$å¤š1ï¼‰ã€‚  


### ï¼ˆ2ï¼‰åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€è·¯  
æˆ‘ä»¬éœ€è¦æ‰¾åˆ°**æœ€å°‘ä¿®æ”¹æ¬¡æ•°**è®©æ•´ä¸ªåºåˆ—æ»¡è¶³æ¡ä»¶ã€‚è¿™é‡Œç”¨**çŠ¶æ€$f[i]$**è¡¨ç¤ºï¼šâ€œå‰$i$ä¸ªå…ƒç´ åˆæ³•çš„æœ€å°ä¿®æ”¹æ¬¡æ•°â€ï¼ˆä¸”ç¬¬$i$ä¸ªå…ƒç´ ä¸ä¿®æ”¹ï¼‰ã€‚  

è½¬ç§»æ—¶ï¼Œæˆ‘ä»¬**æšä¸¾å‰ä¸€ä¸ªä¸ä¿®æ”¹çš„ä½ç½®$j$**ï¼ˆ$j < i$ï¼‰ï¼Œåˆ¤æ–­ï¼š  
- èƒ½å¦é€šè¿‡ä¿®æ”¹$j+1$åˆ°$i-1$çš„æ‰€æœ‰å…ƒç´ ï¼Œè®©$j$åˆ°$i$çš„åºåˆ—åˆæ³•ï¼Ÿ  

æ ¹æ®å‰é¢çš„æ•°å­¦æ¡ä»¶ï¼Œè¿™ä¸ªåˆ¤æ–­å¯ä»¥ç®€åŒ–ä¸ºï¼š  
1. $p(i)$èƒ½æ•´é™¤$p(j)$ï¼ˆå› ä¸º$j$åˆ°$i$çš„æ¯ä¸€æ­¥éƒ½è¦æ»¡è¶³$p$çš„æ•´é™¤å…³ç³»ï¼‰ï¼›  
2. è¦ä¹ˆ$v(i) - v(j) = i-j$ï¼ˆä»$j$åˆ°$i$ï¼Œæ¯ä¸€æ­¥çš„$v$éƒ½åŠ 1ï¼Œåˆšå¥½åˆ°$v(i)$ï¼‰ï¼Œè¦ä¹ˆ$v(i) \leq i-j-1$ï¼ˆä¸­é—´å¯ä»¥æœ‰ä¸€æ­¥æŠŠ$v$æ¸…é›¶ï¼Œä¹‹åä»0å¼€å§‹å¢åŠ åˆ°$v(i)$ï¼‰ã€‚  


### ï¼ˆ3ï¼‰å¯è§†åŒ–è®¾è®¡æ€è·¯  
ä¸ºäº†ç›´è§‚ç†è§£DPçš„è½¬ç§»è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ª**8ä½åƒç´ é£çš„åŠ¨ç”»**ï¼š  
- ç”¨**ä¸åŒé¢œè‰²çš„åƒç´ å—**è¡¨ç¤ºæ¯ä¸ªä½ç½®çš„$a[i]$ï¼ˆæ¯”å¦‚è“è‰²ä»£è¡¨å¥‡æ•°å› å­$p(i)$ï¼Œé»„è‰²ä»£è¡¨$v(i)$çš„å¤§å°ï¼‰ï¼›  
- ç”¨**è¿›åº¦æ¡**å±•ç¤º$f[i]$çš„å½“å‰å€¼ï¼ˆè¶ŠçŸ­è¡¨ç¤ºä¿®æ”¹æ¬¡æ•°è¶Šå°‘ï¼‰ï¼›  
- æšä¸¾$j$æ—¶ï¼Œ**é«˜äº®ç¬¦åˆæ¡ä»¶çš„$j$**ï¼ˆæ¯”å¦‚é—ªçƒç»¿è‰²ï¼‰ï¼Œå¹¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›  
- æ›´æ–°$f[i]$æ—¶ï¼Œç”¨â€œå’»â€çš„éŸ³æ•ˆå’Œåƒç´ å—ç¼©å°åŠ¨ç”»è¡¨ç¤ºæ¬¡æ•°å‡å°‘ï¼›  
- æœ€ç»ˆæ‰¾åˆ°æœ€å°å€¼æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œå¹¶ç”¨å½©è™¹è‰²é«˜äº®æœ€ä¼˜è·¯å¾„ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†æ›´å¥½åœ°ç†è§£è§£é¢˜è¿‡ç¨‹ï¼Œæˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰æ–¹é¢ï¼Œç­›é€‰äº†ä»¥ä¸‹ä¼˜è´¨é¢˜è§£ï¼š


### **é¢˜è§£ä¸€ï¼šCLZYï¼ˆæ´›è°·/CodeforcesåŸé¢˜è§£ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æœ€å®Œæ•´**â€”â€”ä»æ•°å­¦æ¡ä»¶è½¬åŒ–åˆ°DPçŠ¶æ€è®¾è®¡ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®æ¨å¯¼ã€‚ä»£ç é£æ ¼ç®€æ´è§„èŒƒï¼ˆæ¯”å¦‚ç”¨`rep`/`req`å®ç®€åŒ–å¾ªç¯ï¼Œå˜é‡å`b[i]`ä»£è¡¨$v(i)$ã€`a[i]`ä»£è¡¨$p(i)$ï¼Œå«ä¹‰æ¸…æ™°ï¼‰ã€‚  
  æ ¸å¿ƒäº®ç‚¹åœ¨äºï¼š  
  1. **é¢„å¤„ç†ä¼˜åŒ–**ï¼šå°†æ¯ä¸ªæ•°çš„$p(i)$å’Œ$v(i)$æå‰è®¡ç®—ï¼Œé¿å…é‡å¤è®¡ç®—ï¼›  
  2. **DPè½¬ç§»çš„é«˜æ•ˆæ€§**ï¼šé€šè¿‡æšä¸¾å‰ä¸€ä¸ªä¸ä¿®æ”¹çš„$j$ï¼Œå°†æ—¶é—´å¤æ‚åº¦æ§åˆ¶åœ¨$O(n^2)$ï¼ˆå¯¹äº$nâ‰¤5000$å®Œå…¨å¯è¡Œï¼‰ï¼›  
  3. **è¾¹ç•Œå¤„ç†ä¸¥è°¨**ï¼šåˆå§‹åŒ–$f[i]=i-1$ï¼ˆå‡è®¾å‰$i-1$ä¸ªéƒ½ä¿®æ”¹ï¼‰ï¼Œæœ€åè®¡ç®—$f[i]+n-i$ï¼ˆåé¢çš„æ•°å…¨éƒ¨ä¿®æ”¹ï¼‰æ¥è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æœ€ä¼˜è§£ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œå¤§å®¶å¸¸é‡åˆ°ä»¥ä¸‹3ä¸ªæ ¸å¿ƒéš¾ç‚¹ï¼Œç»“åˆä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œæˆ‘ä»¬é€ä¸€ç ´è§£ï¼š


### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•å°†â€œcoolå¯¹â€è½¬åŒ–ä¸ºæ•°å­¦æ¡ä»¶ï¼Ÿ**  
- **åˆ†æ**ï¼šç›´æ¥åˆ¤æ–­â€œ$x$èƒ½å¦è¡¨ç¤ºä¸º$y$ä¸ªè¿ç»­æ•´æ•°çš„å’Œâ€ä¼šå¾ˆéº»çƒ¦ï¼Œä½†é€šè¿‡æ•°å­¦æ¨å¯¼ï¼ˆæŠŠè¿ç»­å’Œè½¬åŒ–ä¸ºå…¬å¼ï¼Œæ‹†åˆ†2çš„å¹‚æ¬¡å’Œå¥‡æ•°å› å­ï¼‰ï¼Œå¯ä»¥å°†æ¡ä»¶ç®€åŒ–ä¸º**$p(y)|p(x)$**å’Œ**$v$çš„ä¸¤ç§æƒ…å†µ**ã€‚è¿™ä¸€æ­¥æ˜¯è§£é¢˜çš„â€œé’¥åŒ™â€â€”â€”åªæœ‰æ‰¾åˆ°æ•°å­¦è§„å¾‹ï¼Œæ‰èƒ½ç”¨DPé«˜æ•ˆè§£å†³ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤æ‚çš„æ¡ä»¶å¾€å¾€å¯ä»¥é€šè¿‡æ•°å­¦å˜å½¢ç®€åŒ–ï¼Œå¤šå°è¯•æ‹†åˆ†å˜é‡çš„â€œä¸åŒç»´åº¦â€ï¼ˆæ¯”å¦‚æœ¬é¢˜çš„2çš„å¹‚æ¬¡å’Œå¥‡æ•°å› å­ï¼‰ã€‚  


### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•è®¾è®¡DPçŠ¶æ€ï¼Ÿ**  
- **åˆ†æ**ï¼šé¢˜ç›®è¦æ±‚â€œæœ€å°‘ä¿®æ”¹æ¬¡æ•°â€ï¼Œå¸¸è§çš„æ€è·¯æ˜¯**å›ºå®šæŸä¸ªä½ç½®ä¸ä¿®æ”¹ï¼Œè®¡ç®—åˆ°è¯¥ä½ç½®çš„æœ€å°æ¬¡æ•°**ï¼ˆå³$f[i]$è¡¨ç¤ºå‰$i$ä¸ªåˆæ³•ä¸”ç¬¬$i$ä¸ªä¸ä¿®æ”¹çš„æœ€å°æ¬¡æ•°ï¼‰ã€‚è¿™æ ·è½¬ç§»æ—¶åªéœ€æšä¸¾å‰ä¸€ä¸ªä¸ä¿®æ”¹çš„$j$ï¼Œä¸­é—´çš„æ•°å…¨éƒ¨ä¿®æ”¹ï¼ˆæ¬¡æ•°ä¸º$i-j-1$ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¯¹äºâ€œæœ€å°‘ä¿®æ”¹â€é—®é¢˜ï¼Œä¼˜å…ˆè€ƒè™‘â€œå›ºå®šä¸ä¿®æ”¹çš„ä½ç½®â€çš„DPçŠ¶æ€â€”â€”è¿™æ ·å¯ä»¥å°†é—®é¢˜æ‹†åˆ†æˆâ€œå‰ä¸€æ®µçš„æœ€ä¼˜è§£ + ä¸­é—´ä¿®æ”¹æ¬¡æ•°â€ã€‚  


### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•å¿«é€Ÿåˆ¤æ–­$j$å’Œ$i$ä¹‹é—´æ˜¯å¦åˆæ³•ï¼Ÿ**  
- **åˆ†æ**ï¼šæ ¹æ®æ•°å­¦æ¡ä»¶ï¼Œ$j$å’Œ$i$éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š  
  ï¼ˆ1ï¼‰$p(i)$èƒ½æ•´é™¤$p(j)$ï¼ˆå› ä¸º$j$åˆ°$i$çš„æ¯ä¸€æ­¥$p$éƒ½è¦æ•´é™¤ï¼‰ï¼›  
  ï¼ˆ2ï¼‰$v$çš„æ¡ä»¶ï¼ˆè¦ä¹ˆè¿ç»­åŠ 1ï¼Œè¦ä¹ˆä¸­é—´æ¸…é›¶ï¼‰ã€‚è¿™ä¸¤ä¸ªæ¡ä»¶éƒ½å¯ä»¥**$O(1)$åˆ¤æ–­**ï¼Œæ— éœ€éå†ä¸­é—´å…ƒç´ ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»æ¡ä»¶çš„ç®€åŒ–æ˜¯DPé«˜æ•ˆçš„å…³é”®â€”â€”å°½é‡å°†â€œåŒºé—´åˆ¤æ–­â€è½¬åŒ–ä¸ºâ€œç«¯ç‚¹æ¡ä»¶â€ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§1ï¼šæ•°å­¦æ¡ä»¶è½¬åŒ–**ï¼šé‡åˆ°â€œè¿ç»­å’Œâ€â€œæ•´é™¤â€ç­‰é—®é¢˜ï¼Œå°è¯•æ‹†åˆ†å˜é‡çš„â€œè´¨å› æ•°â€æˆ–â€œå¹‚æ¬¡â€ï¼Œæ‰¾åˆ°è§„å¾‹ï¼›  
- **æŠ€å·§2ï¼šDPçŠ¶æ€è®¾è®¡**ï¼šå¯¹äºâ€œæœ€å°‘ä¿®æ”¹â€é—®é¢˜ï¼Œå›ºå®šä¸ä¿®æ”¹çš„ä½ç½®ï¼Œå°†é—®é¢˜æ‹†åˆ†æˆå­é—®é¢˜ï¼›  
- **æŠ€å·§3ï¼šè¾¹ç•Œå¤„ç†**ï¼šåˆå§‹åŒ–æ—¶è¦è€ƒè™‘â€œæç«¯æƒ…å†µâ€ï¼ˆæ¯”å¦‚å‰$i$ä¸ªéƒ½ä¿®æ”¹ï¼‰ï¼Œæœ€åè¦è¦†ç›–â€œåé¢å…¨éƒ¨ä¿®æ”¹â€çš„æƒ…å†µã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæ­¤ä»£ç æ¥è‡ªCLZYçš„é¢˜è§£ï¼Œæ˜¯æœ¬é¢˜æœ€å®Œæ•´ã€æœ€æ˜“ç†è§£çš„å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
const int MAXN = 5005;
const ll INF = 1e18;

ll read() {
    ll x = 0, f = 1; char ch = getchar();
    while (ch < '0' || ch > '9') { if (ch == '-') f = -1; ch = getchar(); }
    while (ch >= '0' && ch <= '9') x = x * 10 + ch - '0', ch = getchar();
    return x * f;
}

ll a[MAXN], b[MAXN]; // a[i]æ˜¯p(i)ï¼ˆå¥‡æ•°å› å­ï¼‰ï¼Œb[i]æ˜¯v(i)ï¼ˆ2çš„æŒ‡æ•°ï¼‰
ll f[MAXN]; // f[i]è¡¨ç¤ºå‰iä¸ªåˆæ³•ä¸”ç¬¬iä¸ªä¸ä¿®æ”¹çš„æœ€å°ä¿®æ”¹æ¬¡æ•°

int main() {
    int n = read();
    for (int i = 1; i <= n; ++i) {
        ll x = read();
        b[i] = 0;
        while (x % 2 == 0) { // è®¡ç®—v(i)
            x /= 2;
            b[i]++;
        }
        a[i] = x; // å‰©ä¸‹çš„å°±æ˜¯p(i)
    }

    // åˆå§‹åŒ–DPï¼šf[1]è¡¨ç¤ºå‰1ä¸ªåˆæ³•ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
    for (int i = 1; i <= n; ++i) f[i] = i - 1; // åˆå§‹åŒ–ä¸ºå‰i-1ä¸ªéƒ½ä¿®æ”¹

    for (int i = 2; i <= n; ++i) { // æšä¸¾å½“å‰ä½ç½®i
        for (int j = i-1; j >= 1; --j) { // æšä¸¾å‰ä¸€ä¸ªä¸ä¿®æ”¹çš„j
            if (a[j] % a[i] != 0) continue; // æ¡ä»¶1ï¼šp(i) | p(j)
            ll len = i - j - 1; // ä¸­é—´éœ€è¦ä¿®æ”¹çš„æ•°çš„ä¸ªæ•°
            // æ¡ä»¶2ï¼šv(i)-v(j) == i-j æˆ– v(i) <= len
            if (b[i] - b[j] == i - j || b[i] <= len) {
                f[i] = min(f[i], f[j] + len);
            }
        }
    }

    ll ans = INF;
    for (int i = 1; i <= n; ++i) {
        ans = min(ans, f[i] + (n - i)); // åé¢çš„æ•°å…¨éƒ¨ä¿®æ”¹
    }
    cout << ans << endl;
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥ä¸é¢„å¤„ç†**ï¼šè¯»å–æ¯ä¸ªæ•°ï¼Œè®¡ç®—å…¶$v(i)$ï¼ˆ2çš„æŒ‡æ•°ï¼‰å’Œ$p(i)$ï¼ˆå¥‡æ•°å› å­ï¼‰ï¼›  
  2. **DPåˆå§‹åŒ–**ï¼š$f[i]$åˆå§‹åŒ–ä¸º$i-1$ï¼ˆå‡è®¾å‰$i-1$ä¸ªéƒ½ä¿®æ”¹ï¼‰ï¼›  
  3. **DPè½¬ç§»**ï¼šæšä¸¾å½“å‰ä½ç½®$i$å’Œå‰ä¸€ä¸ªä¸ä¿®æ”¹çš„$j$ï¼Œåˆ¤æ–­æ¡ä»¶å¹¶æ›´æ–°$f[i]$ï¼›  
  4. **è®¡ç®—ç­”æ¡ˆ**ï¼šéå†æ‰€æœ‰$f[i]$ï¼ŒåŠ ä¸Šåé¢çš„ä¿®æ”¹æ¬¡æ•°$n-i$ï¼Œå–æœ€å°å€¼ã€‚  


### æ ¸å¿ƒä»£ç ç‰‡æ®µèµæï¼ˆCLZYé¢˜è§£ï¼‰  
* **äº®ç‚¹**ï¼šé¢„å¤„ç†$a[i]$å’Œ$b[i]$ï¼Œå°†å¤æ‚çš„æ¡ä»¶åˆ¤æ–­è½¬åŒ–ä¸ºç®€å•çš„ç®—æœ¯è¿ç®—ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µï¼ˆé¢„å¤„ç†éƒ¨åˆ†ï¼‰**ï¼š  
```cpp
for (int i = 1; i <= n; ++i) {
    ll x = read();
    b[i] = 0;
    while (x % 2 == 0) { // è®¡ç®—v(i)ï¼šxä¸­2çš„ä¸ªæ•°
        x /= 2;
        b[i]++;
    }
    a[i] = x; // p(i)ï¼šxçš„æœ€å¤§å¥‡æ•°å› å­
}
```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯**æ‹†åˆ†æ¯ä¸ªæ•°çš„2çš„å¹‚æ¬¡å’Œå¥‡æ•°å› å­**ã€‚æ¯”å¦‚è¾“å…¥$x=12$ï¼Œå¾ªç¯ä¼šæŠŠ$x$é™¤ä»¥2ä¸¤æ¬¡ï¼ˆ$b[i]=2$ï¼‰ï¼Œæœ€å$a[i]=3$ï¼ˆ12çš„æœ€å¤§å¥‡æ•°å› å­ï¼‰ã€‚  
  ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿå› ä¸ºâ€œcoolå¯¹â€çš„æ¡ä»¶åªå’Œ$v(i)$å’Œ$p(i)$æœ‰å…³â€”â€”æ‹†åˆ†åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨$a[i]$å’Œ$b[i]$å¿«é€Ÿåˆ¤æ–­æ¡ä»¶ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†èƒ½å°†é‡å¤è®¡ç®—çš„å·¥ä½œæå‰å®Œæˆï¼Œå¤§å¹…ç®€åŒ–åç»­é€»è¾‘ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£**DPè½¬ç§»çš„è¿‡ç¨‹**ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ª**8ä½åƒç´ é£çš„åŠ¨ç”»**ï¼Œèåˆå¤å¤æ¸¸æˆå…ƒç´ ï¼š


### **åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜**ï¼šåƒç´ å†œåœºçš„â€œCoolåºåˆ—ä¿®å¤è®¡åˆ’â€  
æˆ‘ä»¬æŠŠåºåˆ—æƒ³è±¡æˆ**å†œåœºé‡Œçš„ä¸€æ’ç”°åœ°**ï¼Œæ¯ä¸ªç”°åœ°å¯¹åº”ä¸€ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨æœ€å°‘çš„â€œä¿®æ”¹æ¬¡æ•°â€ï¼ˆç¿»è€•ç”°åœ°ï¼‰è®©æ‰€æœ‰ç›¸é‚»ç”°åœ°æ»¡è¶³â€œCoolæ¡ä»¶â€ã€‚


### **æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯**åƒç´ åŒ–çš„ç”°åœ°åºåˆ—**ï¼šæ¯ä¸ªç”°åœ°ç”¨ä¸¤ä¸ªåƒç´ å—è¡¨ç¤ºâ€”â€”è“è‰²å—ä»£è¡¨$p(i)$ï¼ˆå¥‡æ•°å› å­ï¼‰ï¼Œé»„è‰²å—çš„é«˜åº¦ä»£è¡¨$v(i)$ï¼ˆ2çš„æŒ‡æ•°ï¼Œè¶Šé«˜è¡¨ç¤º$v$è¶Šå¤§ï¼‰ï¼›  
   - å±å¹•å³ä¾§æ˜¯**DPæ§åˆ¶é¢æ¿**ï¼šæ˜¾ç¤ºå½“å‰å¤„ç†çš„ä½ç½®$i$ã€$f[i]$çš„å½“å‰å€¼ï¼ˆç”¨è¿›åº¦æ¡é•¿åº¦è¡¨ç¤ºï¼‰ã€ä»¥åŠâ€œå•æ­¥æ‰§è¡Œâ€â€œè‡ªåŠ¨æ’­æ”¾â€â€œé‡ç½®â€æŒ‰é’®ï¼›  
   - èƒŒæ™¯æ’­æ”¾**8ä½é£æ ¼çš„å†œåœºBGM**ï¼ˆè½»æ¾çš„é’¢ç´æ—‹å¾‹ï¼‰ã€‚  

2. **DPè½¬ç§»è¿‡ç¨‹æ¼”ç¤º**ï¼š  
   - å½“å¤„ç†ä½ç½®$i$æ—¶ï¼Œ**é«˜äº®å½“å‰ç”°åœ°**ï¼ˆæ¯”å¦‚é—ªçƒç»¿è‰²ï¼‰ï¼›  
   - æšä¸¾å‰ä¸€ä¸ªä½ç½®$j$æ—¶ï¼Œ**é€ä¸ªç‚¹äº®$j$å¯¹åº”çš„ç”°åœ°**ï¼š  
     - å¦‚æœ$a[j]$ä¸èƒ½æ•´é™¤$a[i]$ï¼ˆæ¡ä»¶1ä¸æ»¡è¶³ï¼‰ï¼Œç”°åœ°å˜ä¸ºçº¢è‰²ï¼Œæ’­æ”¾â€œé”™è¯¯â€éŸ³æ•ˆï¼ˆçŸ­ä¿ƒçš„â€œå˜€â€ï¼‰ï¼›  
     - å¦‚æœæ¡ä»¶1æ»¡è¶³ï¼Œä½†$v$çš„æ¡ä»¶ä¸æ»¡è¶³ï¼Œç”°åœ°å˜ä¸ºé»„è‰²ï¼Œæ’­æ”¾â€œæç¤ºâ€éŸ³æ•ˆï¼ˆè½»å¾®çš„â€œå®â€ï¼‰ï¼›  
     - å¦‚æœä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œç”°åœ°å˜ä¸ºç»¿è‰²ï¼Œæ’­æ”¾â€œæ­£ç¡®â€éŸ³æ•ˆï¼ˆæ¸…è„†çš„â€œå®é“ƒâ€ï¼‰ï¼Œå¹¶**æ›´æ–°$f[i]$çš„è¿›åº¦æ¡**ï¼ˆé•¿åº¦ç¼©çŸ­ï¼Œä»£è¡¨ä¿®æ”¹æ¬¡æ•°å‡å°‘ï¼‰ã€‚  

3. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“è®¡ç®—å®Œæ‰€æœ‰$f[i]$åï¼Œ**é«˜äº®æœ€ä¼˜è·¯å¾„**ï¼ˆä»æŸä¸ª$j$åˆ°$i$çš„ç»¿è‰²è¿çº¿ï¼‰ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„â€œå˜Ÿå˜Ÿâ€å£°ï¼‰ï¼›  
   - æœ€ç»ˆæ˜¾ç¤º**æœ€å°‘ä¿®æ”¹æ¬¡æ•°**ï¼ˆç”¨åƒç´ æ•°å­—æ”¾å¤§å±•ç¤ºï¼‰ã€‚  


### **è®¾è®¡æ€è·¯**  
- **åƒç´ é£æ ¼**ï¼šå¤å¤çš„8ä½é£æ ¼èƒ½é™ä½è§†è§‰è´Ÿæ‹…ï¼Œè®©å­¦ä¹ è€…æ›´å…³æ³¨æ ¸å¿ƒé€»è¾‘ï¼›  
- **éŸ³æ•ˆåé¦ˆ**ï¼šä¸åŒçš„éŸ³æ•ˆèƒ½å¼ºåŒ–â€œæ¡ä»¶åˆ¤æ–­â€çš„è®°å¿†ï¼ˆæ¯”å¦‚æ­£ç¡®æ—¶çš„â€œå®é“ƒâ€å£°ä¼šè®©ä½ è®°ä½â€œæ»¡è¶³æ¡ä»¶çš„$j$â€ï¼‰ï¼›  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæŠŠâ€œä¿®æ”¹æ¬¡æ•°â€æƒ³è±¡æˆâ€œç¿»è€•æ¬¡æ•°â€ï¼Œè®©å­¦ä¹ è¿‡ç¨‹æ›´æœ‰è¶£â€”â€”å°±åƒåœ¨å†œåœºé‡Œâ€œä¿®å¤â€ç”°åœ°ä¸€æ ·ï¼  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

ç†è§£äº†æœ¬é¢˜çš„DPæ€è·¯å’Œæ•°å­¦è½¬åŒ–åï¼Œæˆ‘ä»¬å¯ä»¥å°†æŠ€å·§è¿ç§»åˆ°å…¶ä»–é—®é¢˜ï¼š


### **é€šç”¨æ€è·¯è¿ç§»**  
- **æ•°å­¦æ¡ä»¶è½¬åŒ–**ï¼šé€‚ç”¨äºâ€œè¿ç»­å’Œâ€â€œæ•´é™¤â€â€œå¹‚æ¬¡ç›¸å…³â€çš„é—®é¢˜ï¼ˆæ¯”å¦‚åˆ¤æ–­ä¸€ä¸ªæ•°èƒ½å¦è¡¨ç¤ºä¸º$k$ä¸ªè¿ç»­å¥‡æ•°çš„å’Œï¼‰ï¼›  
- **DPçŠ¶æ€è®¾è®¡**ï¼šé€‚ç”¨äºâ€œæœ€å°‘ä¿®æ”¹æ¬¡æ•°â€â€œæœ€é•¿åˆæ³•å­åºåˆ—â€çš„é—®é¢˜ï¼ˆæ¯”å¦‚â€œæœ€å°‘ä¿®æ”¹æ¬¡æ•°è®©åºåˆ—é€’å¢â€ï¼‰ï¼›  
- **ç«¯ç‚¹æ¡ä»¶åˆ¤æ–­**ï¼šé€‚ç”¨äºâ€œåŒºé—´åˆæ³•åªéœ€åˆ¤æ–­ç«¯ç‚¹â€çš„é—®é¢˜ï¼ˆæ¯”å¦‚â€œåŒºé—´å†…çš„æ•°æ»¡è¶³æŸç§é€’æ¨å…³ç³»â€ï¼‰ã€‚  


### **æ´›è°·ç»ƒä¹ æ¨è**  
1. **æ´›è°· P1091 åˆå”±é˜Ÿå½¢**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŒæ ·è€ƒå¯Ÿâ€œDPçŠ¶æ€è®¾è®¡â€â€”â€”ç”¨$f[i]$è¡¨ç¤ºå‰$i$ä¸ªçš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ï¼Œ$g[i]$è¡¨ç¤ºå$i$ä¸ªçš„æœ€é•¿é€’å‡å­åºåˆ—é•¿åº¦ï¼Œæœ€åæ±‚æœ€å°‘ä¿®æ”¹æ¬¡æ•°ã€‚èƒ½å·©å›ºâ€œå›ºå®šç«¯ç‚¹â€çš„DPæ€è·¯ã€‚  

2. **æ´›è°· P2782 ä¹°ä¹¦**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿâ€œå®Œå…¨èƒŒåŒ…â€çš„å˜å½¢ï¼Œä½†æ ¸å¿ƒæ˜¯â€œå°†é—®é¢˜æ‹†åˆ†æˆå­é—®é¢˜â€ã€‚èƒ½é”»ç‚¼â€œçŠ¶æ€è½¬ç§»â€çš„æ€ç»´ã€‚  

3. **æ´›è°· P3902 é€’å¢**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç›´æ¥è€ƒå¯Ÿâ€œæœ€å°‘ä¿®æ”¹æ¬¡æ•°è®©åºåˆ—é€’å¢â€ï¼Œå’Œæœ¬é¢˜çš„DPæ€è·¯é«˜åº¦ç›¸ä¼¼ã€‚èƒ½å¿«é€ŸéªŒè¯ä½ å¯¹â€œå›ºå®šç«¯ç‚¹â€çŠ¶æ€çš„æŒæ¡ç¨‹åº¦ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

CLZYçš„é¢˜è§£ä¸­æåˆ°äº†ä¸¤ä¸ª**å…³é”®ç»éªŒ**ï¼Œéå¸¸å€¼å¾—å€Ÿé‰´ï¼š  
> 1. åˆå§‹åŒ–$f[i]=i-1$ï¼šå‡è®¾å‰$i-1$ä¸ªéƒ½ä¿®æ”¹ï¼Œåªä¿ç•™ç¬¬$i$ä¸ªâ€”â€”è¿™è¦†ç›–äº†â€œå‰é¢å…¨æ”¹â€çš„æç«¯æƒ…å†µï¼›  
> 2. æœ€åè®¡ç®—$f[i]+n-i$ï¼šåé¢çš„æ•°å…¨éƒ¨ä¿®æ”¹â€”â€”è¿™è¦†ç›–äº†â€œåé¢å…¨æ”¹â€çš„æç«¯æƒ…å†µã€‚  

**ç‚¹è¯„**ï¼šè¿™ä¸¤ä¸ªç»†èŠ‚æ˜¯â€œä¸é—æ¼æœ€ä¼˜è§£â€çš„å…³é”®ï¼å¾ˆå¤šäººä¼šå¿½ç•¥â€œå‰é¢å…¨æ”¹â€æˆ–â€œåé¢å…¨æ”¹â€çš„æƒ…å†µï¼Œå¯¼è‡´ç­”æ¡ˆé”™è¯¯ã€‚CLZYçš„åšæ³•æé†’æˆ‘ä»¬ï¼š**åˆå§‹åŒ–å’Œè¾¹ç•Œå¤„ç†è¦è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æç«¯æƒ…å†µ**ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºã€ŒCows and Cool Sequencesã€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ æŒæ¡â€œæ•°å­¦è½¬åŒ–+DPâ€çš„è§£é¢˜å¥—è·¯ã€‚è®°ä½ï¼š**å¤æ‚çš„é—®é¢˜å¾€å¾€å¯ä»¥æ‹†åˆ†æˆâ€œæ•°å­¦è§„å¾‹â€å’Œâ€œç®—æ³•æ¡†æ¶â€ä¸¤éƒ¨åˆ†â€”â€”å…ˆæ‰¾è§„å¾‹ï¼Œå†å¥—æ¡†æ¶ï¼Œé—®é¢˜å°±ä¼šå˜å¾—ç®€å•ï¼**  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š136.55ç§’
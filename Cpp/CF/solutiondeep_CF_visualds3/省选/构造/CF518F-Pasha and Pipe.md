# é¢˜ç›®ä¿¡æ¯

# Pasha and Pipe

## é¢˜ç›®æè¿°

On a certain meeting of a ruling party "A" minister Pavel suggested to improve the sewer system and to create a new pipe in the city.

The city is an $ nÃ—m $ rectangular squared field. Each square of the field is either empty (then the pipe can go in it), or occupied (the pipe cannot go in such square). Empty squares are denoted by character ' $ . $ ', occupied squares are denoted by character ' $ # $ '.

The pipe must meet the following criteria:

- the pipe is a polyline of width $ 1 $ ,
- the pipe goes in empty squares,
- the pipe starts from the edge of the field, but not from a corner square,
- the pipe ends at the edge of the field but not in a corner square,
- the pipe has at most $ 2 $ turns ( $ 90 $ degrees),
- the border squares of the field must share exactly two squares with the pipe,
- if the pipe looks like a single segment, then the end points of the pipe must lie on distinct edges of the field,
- for each non-border square of the pipe there are exacly two side-adjacent squares that also belong to the pipe,
- for each border square of the pipe there is exactly one side-adjacent cell that also belongs to the pipe.

Here are some samples of allowed piping routes:

`<br></br>           ....#            ....#            .*..#<br></br>           *****            ****.            .***.<br></br>           ..#..            ..#*.            ..#*.<br></br>           #...#            #..*#            #..*#<br></br>           .....            ...*.            ...*.<br></br>`Here are some samples of forbidden piping routes:

`<br></br>           .**.#            *...#            .*.*#<br></br>           .....            ****.            .*.*.<br></br>           ..#..            ..#*.            .*#*.<br></br>           #...#            #..*#            #*.*#<br></br>           .....            ...*.            .***.<br></br>`In these samples the pipes are represented by characters ' $ * $ '.

You were asked to write a program that calculates the number of distinct ways to make exactly one pipe in the city.

The two ways to make a pipe are considered distinct if they are distinct in at least one square.

## è¯´æ˜/æç¤º

In the first sample there are 3 ways to make a pipe (the squares of the pipe are marked by characters ' $ * $ '):

`<br></br>       .*.        .*.        ...<br></br>       .*#        **#        **#<br></br>       .*.        ...        .*.<br></br>`

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 3
...
..#
...
```

### è¾“å‡º

```
3```

## æ ·ä¾‹ #2

### è¾“å…¥

```
4 2
..
..
..
..
```

### è¾“å‡º

```
2
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
4 5
#...#
#...#
###.#
###.#
```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPasha and Pipe æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ¨¡æ‹Ÿä¸åˆ†ç±»è®¨è®º  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œPasha and Pipeâ€çš„å…³é”®ï¼Œå°±åƒ**ç»™ç®¡é“â€œåˆ†å½¢çŠ¶ç»Ÿè®¡â€**â€”â€”é¢˜ç›®è¦æ±‚ç®¡é“æœ€å¤šæœ‰2ä¸ªè½¬å¼¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç®¡é“åˆ†æˆ3ç±»ï¼š  
1. **ç›´çº¿è·¯å¾„**ï¼ˆ0ä¸ªè½¬å¼¯ï¼‰ï¼šæ¯”å¦‚ä»å·¦è¾¹è¾¹ç¼˜ç›´èµ°åˆ°å³è¾¹è¾¹ç¼˜ï¼›  
2. **Lå‹è·¯å¾„**ï¼ˆ1ä¸ªè½¬å¼¯ï¼‰ï¼šæ¯”å¦‚å…ˆç«–èµ°å†æ¨ªèµ°ï¼Œåƒå­—æ¯â€œLâ€ï¼›  
3. **Uå‹è·¯å¾„**ï¼ˆ2ä¸ªè½¬å¼¯ï¼‰ï¼šæ¯”å¦‚å…ˆç«–èµ°ã€å†æ¨ªèµ°ã€å†ç«–èµ°ï¼Œåƒå­—æ¯â€œUâ€ã€‚  

ä¸ºäº†å¿«é€Ÿåˆ¤æ–­æ¯ä¸ªç‚¹èƒ½å¦â€œä¸€ç›´èµ°åˆ°åº•â€ï¼ˆæ¯”å¦‚ä»ç‚¹(i,j)å¾€ä¸Šèµ°ä¸ç¢°åˆ°éšœç¢ç‰©å°±èƒ½åˆ°ä¸Šè¾¹ç¼˜ï¼‰ï¼Œæˆ‘ä»¬**é¢„å¤„ç†4ä¸ªè¾…åŠ©æ•°ç»„**ï¼š  
- `U[i][j]`ï¼šç‚¹(i,j)å¾€ä¸Šèµ°èƒ½å¦åˆ°è¾¾ä¸Šè¾¹ç¼˜ï¼›  
- `D[i][j]`ï¼šç‚¹(i,j)å¾€ä¸‹èµ°èƒ½å¦åˆ°è¾¾ä¸‹è¾¹ç¼˜ï¼›  
- `L[i][j]`ï¼šç‚¹(i,j)å¾€å·¦èµ°èƒ½å¦åˆ°è¾¾å·¦è¾¹ç¼˜ï¼›  
- `R[i][j]`ï¼šç‚¹(i,j)å¾€å³èµ°èƒ½å¦åˆ°è¾¾å³è¾¹ç¼˜ã€‚  

è¿™æ ·ï¼Œè®¡ç®—æ¯ç§å½¢çŠ¶çš„ç®¡é“æ•°é‡æ—¶ï¼Œç›´æ¥ç”¨è¿™äº›æ•°ç»„â€œæŸ¥ç­”æ¡ˆâ€ï¼Œä¸ç”¨æ¯æ¬¡éƒ½é‡æ–°éå†è·¯å¾„ï¼Œå¤§å¤§æé«˜æ•ˆç‡ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£**å±•ç¤ºç®—æ³•è¿‡ç¨‹â€”â€”æ¯”å¦‚ç”¨ç»¿è‰²åƒç´ å—è¡¨ç¤ºç©ºç‚¹ï¼Œçº¢è‰²è¡¨ç¤ºéšœç¢ç‰©ï¼Œè“è‰²è¡¨ç¤ºé¢„å¤„ç†åçš„â€œå¯ç›´è¾¾è¾¹ç•Œâ€çš„ç‚¹ã€‚åŠ¨ç”»ä¸­ä¼š**å•æ­¥æ¼”ç¤ºé¢„å¤„ç†æ•°ç»„çš„è®¡ç®—**ï¼ˆæ¯”å¦‚`U[i][j]`å¦‚ä½•ä»`U[i-1][j]`ç»§æ‰¿ï¼‰ï¼Œå†**åˆ†å½¢çŠ¶å±•ç¤ºç®¡é“çš„è®¡æ•°è¿‡ç¨‹**ï¼ˆæ¯”å¦‚ç›´çº¿è·¯å¾„ç”¨é»„è‰²é—ªçƒï¼ŒLå‹ç”¨æ©™è‰²ï¼ŒUå‹ç”¨ç´«è‰²ï¼‰ï¼Œé…åˆâ€œå®â€çš„éŸ³æ•ˆæç¤ºå…³é”®æ“ä½œï¼ˆæ¯”å¦‚é¢„å¤„ç†å®Œæˆã€è®¡æ•°åŠ 1ï¼‰ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šæ¥æºHoochï¼ˆèµ2ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**æ€è·¯æ¸…æ™°åº¦**å ªç§°â€œæ•™ç§‘ä¹¦çº§â€â€”â€”æŠŠç®¡é“åˆ†æˆ3ç±»ï¼Œæ¯ç±»çš„è®¡ç®—é€»è¾‘éƒ½å†™å¾—æ˜æ˜ç™½ç™½ã€‚é¢„å¤„ç†`U/D/L/R`æ•°ç»„çš„ä»£ç éå¸¸å·¥æ•´ï¼Œç”¨é€’æ¨çš„æ–¹å¼ï¼ˆæ¯”å¦‚`U[i][j] = U[i-1][j] && (a[i][j] == '.')`ï¼‰å¿«é€Ÿè®¡ç®—æ¯ä¸ªç‚¹çš„å¯è¾¾æ€§ï¼Œé¿å…äº†é‡å¤éå†ã€‚å¯¹äº2ä¸ªæ‹ç‚¹çš„æƒ…å†µï¼Œé€šè¿‡â€œæšä¸¾ä¸­é—´æ¨ªè¾¹/ç«–è¾¹+å‰ç¼€å’Œç»Ÿè®¡â€çš„æ–¹æ³•ï¼ŒæŠŠæ—¶é—´å¤æ‚åº¦æ§åˆ¶åœ¨O(nm)ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚ä»£ç ä¸­çš„å˜é‡å‘½åï¼ˆæ¯”å¦‚`u`ä»£è¡¨upï¼Œ`d`ä»£è¡¨downï¼‰ä¹Ÿå¾ˆç›´è§‚ï¼Œæ–°æ‰‹è¯»èµ·æ¥ä¸ä¼šæ··ä¹±ã€‚  

### é¢˜è§£äºŒï¼šæ¥æºLPhangï¼ˆèµ2ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„**æŠ€å·§æ€§**å¾ˆå¼ºâ€”â€”é€šè¿‡â€œè¡Œåˆ—äº¤æ¢â€æŠŠâ€œå·¦å³æ–¹å‘çš„Uå‹ç®¡é“â€è½¬åŒ–ä¸ºâ€œä¸Šä¸‹æ–¹å‘çš„Uå‹ç®¡é“â€ï¼Œå‡å°‘äº†ä¸€åŠçš„ä»£ç é‡ï¼æ¯”å¦‚å¤„ç†å®Œä¸Šä¸‹æ–¹å‘çš„Uå‹åï¼Œäº¤æ¢è¡Œåˆ—å†è·‘ä¸€éç›¸åŒçš„é€»è¾‘ï¼Œå°±èƒ½è¦†ç›–å·¦å³æ–¹å‘çš„æƒ…å†µã€‚å¦å¤–ï¼Œé¢˜è§£ä¸­å¯¹â€œç›¸é‚»é‡å¤è®¡æ•°â€çš„å¤„ç†ï¼ˆæ¯”å¦‚å‡å»`up[i][j] && up[i][j-1]`ï¼‰å¾ˆç»†è‡´ï¼Œé¿å…äº†æŠŠâ€œç›¸é‚»ä¸¤ä¸ªéƒ½èƒ½å‘ä¸Šçš„ç‚¹â€ç®—æˆä¸¤æ¬¡æœ‰æ•ˆè·¯å¾„ã€‚ä»£ç çš„æ¨¡å—åŒ–ï¼ˆæ¯”å¦‚æŠŠæ ¸å¿ƒé€»è¾‘å†™æˆ`solve`å‡½æ•°ï¼‰ä¹Ÿå€¼å¾—å­¦ä¹ ï¼Œè®©ä»£ç æ›´æ˜“ç»´æŠ¤ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. éš¾ç‚¹1ï¼šå¦‚ä½•è¦†ç›–æ‰€æœ‰å¯èƒ½çš„ç®¡é“å½¢çŠ¶ï¼Ÿ  
* **åˆ†æ**ï¼šé¢˜ç›®ä¸­çš„ç®¡é“è§„åˆ™å¾ˆå¤šï¼ˆæ¯”å¦‚ä¸èƒ½ä»è§’è½å‡ºå‘ã€æœ€å¤š2ä¸ªè½¬å¼¯ï¼‰ï¼Œå®¹æ˜“é—æ¼æƒ…å†µã€‚è§£å†³æ–¹æ³•æ˜¯**æŒ‰â€œè½¬å¼¯æ¬¡æ•°â€åˆ†ç±»**ï¼š0æ¬¡ï¼ˆç›´çº¿ï¼‰ã€1æ¬¡ï¼ˆLå‹ï¼‰ã€2æ¬¡ï¼ˆUå‹ï¼‰ï¼Œæ¯ç±»å†ç»†åˆ†æ–¹å‘ï¼ˆæ¯”å¦‚Lå‹æœ‰â€œå…ˆç«–åæ¨ªâ€å’Œâ€œå…ˆæ¨ªåç«–â€ï¼‰ã€‚è¿™æ ·åˆ†ç±»èƒ½ç¡®ä¿æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç®¡é“éƒ½è¢«ç»Ÿè®¡åˆ°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†ç±»è®¨è®ºçš„å…³é”®æ˜¯â€œä¸é‡ä¸æ¼â€ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ˜ç¡®çš„åˆ†ç±»æ ‡å‡†ï¼ˆæ¯”å¦‚è½¬å¼¯æ¬¡æ•°ï¼‰ã€‚  

### 2. éš¾ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆåˆ¤æ–­ç‚¹èƒ½å¦åˆ°è¾¾è¾¹ç•Œï¼Ÿ  
* **åˆ†æ**ï¼šå¦‚æœæ¯æ¬¡éœ€è¦åˆ¤æ–­ç‚¹(i,j)èƒ½å¦åˆ°ä¸Šè¾¹ç¼˜éƒ½è¦â€œä»(i,j)å¾€ä¸Šéå†â€ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šå¾ˆé«˜ï¼ˆO(nm*n)ï¼‰ã€‚é¢„å¤„ç†æ•°ç»„çš„æ€è·¯æ˜¯**ç”¨é€’æ¨ä»£æ›¿é‡å¤éå†**â€”â€”æ¯”å¦‚`U[i][j]`çš„å€¼å–å†³äº`U[i-1][j]`ï¼ˆä¸Šæ–¹ç‚¹èƒ½å¦åˆ°ä¸Šè¾¹ç¼˜ï¼‰å’Œå½“å‰ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œè¿™æ ·æ¯ä¸ªç‚¹åªéœ€è¦è®¡ç®—ä¸€æ¬¡ï¼Œæ€»æ—¶é—´O(nm)ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†æ˜¯â€œç”¨ç©ºé—´æ¢æ—¶é—´â€çš„å¸¸ç”¨æŠ€å·§ï¼Œé€‚åˆéœ€è¦å¤šæ¬¡æŸ¥è¯¢ç›¸åŒä¿¡æ¯çš„åœºæ™¯ã€‚  

### 3. éš¾ç‚¹3ï¼šå¦‚ä½•é¿å…é‡å¤è®¡æ•°ï¼Ÿ  
* **åˆ†æ**ï¼šæ¯”å¦‚åœ¨ç»Ÿè®¡Uå‹ç®¡é“æ—¶ï¼Œç›¸é‚»çš„ä¸¤ä¸ªç‚¹å¯èƒ½éƒ½èƒ½å‘ä¸Š/å‘ä¸‹ï¼Œå¯¼è‡´åŒä¸€æ¡ç®¡é“è¢«ç®—ä¸¤æ¬¡ã€‚è§£å†³æ–¹æ³•æ˜¯**åœ¨è®¡æ•°æ—¶å‡å»ç›¸é‚»çš„æ— æ•ˆæƒ…å†µ**ï¼ˆæ¯”å¦‚LPhangé¢˜è§£ä¸­çš„`ans -= (j>2 && !d[i][j] && !d[i][j-1])`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå†™å®Œè®¡æ•°é€»è¾‘åï¼Œä¸€å®šè¦æƒ³â€œæœ‰æ²¡æœ‰é‡å¤ç®—çš„æƒ…å†µï¼Ÿâ€ï¼Œæ¯”å¦‚ç›¸é‚»ã€é‡å çš„è·¯å¾„ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **åˆ†ç±»è®¨è®º**ï¼šæŒ‰è½¬å¼¯æ¬¡æ•°åˆ†å½¢çŠ¶ï¼Œè¦†ç›–æ‰€æœ‰å¯èƒ½ï¼›  
- **é¢„å¤„ç†æ•°ç»„**ï¼šé€’æ¨è®¡ç®—å¯è¾¾æ€§ï¼Œé¿å…é‡å¤éå†ï¼›  
- **æ¨¡å—åŒ–ä»£ç **ï¼šæŠŠé‡å¤é€»è¾‘å†™æˆå‡½æ•°ï¼ˆæ¯”å¦‚LPhangçš„`solve`ï¼‰ï¼Œå‡å°‘ä»£ç é‡ï¼›  
- **ç»†èŠ‚å¤„ç†**ï¼šæ³¨æ„è¾¹ç•Œæ¡ä»¶ï¼ˆæ¯”å¦‚éè§’è½ã€ç›¸é‚»é‡å¤ï¼‰ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆHoochå’ŒLPhangçš„æ€è·¯ï¼Œæå–æœ€æ¸…æ™°çš„æ ¸å¿ƒå®ç°ï¼Œæ¶µç›–é¢„å¤„ç†ã€ä¸‰ç±»å½¢çŠ¶è®¡æ•°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <bits/stdc++.h>
using namespace std;
using i64 = long long;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0); cout.tie(0);

    int n, m;
    cin >> n >> m;
    vector<vector<char>> a(n, vector<char>(m));
    vector<vector<int>> u(n, vector<int>(m)), d(n, vector<int>(m)), l(n, vector<int>(m)), r(n, vector<int>(m));

    for (int i = 0; i < n; ++i)
        for (int j = 0; j < m; ++j)
            cin >> a[i][j];

    // é¢„å¤„ç†Uï¼ˆä¸Šï¼‰ã€Lï¼ˆå·¦ï¼‰
    for (int i = 0; i < n; ++i) {
        for (int j = 0; j < m; ++j) {
            u[i][j] = (i == 0 ? 1 : u[i-1][j]) && (a[i][j] == '.');
            l[i][j] = (j == 0 ? 1 : l[i][j-1]) && (a[i][j] == '.');
        }
    }

    // é¢„å¤„ç†Dï¼ˆä¸‹ï¼‰ã€Rï¼ˆå³ï¼‰
    for (int i = n-1; i >= 0; --i) {
        for (int j = m-1; j >= 0; --j) {
            d[i][j] = (i == n-1 ? 1 : d[i+1][j]) && (a[i][j] == '.');
            r[i][j] = (j == m-1 ? 1 : r[i][j+1]) && (a[i][j] == '.');
        }
    }

    i64 ans = 0;

    // æƒ…å†µ1ï¼š0ä¸ªè½¬å¼¯ï¼ˆç›´çº¿ï¼‰
    for (int i = 1; i < n-1; ++i) ans += r[i][0]; // å·¦è¾¹ç¼˜ç›´èµ°å³
    for (int j = 1; j < m-1; ++j) ans += d[0][j]; // ä¸Šè¾¹ç¼˜ç›´èµ°ä¸‹

    // æƒ…å†µ2ï¼š1ä¸ªè½¬å¼¯ï¼ˆLå‹ï¼‰
    for (int i = 1; i < n-1; ++i)
        for (int j = 1; j < m-1; ++j)
            ans += (l[i][j] + r[i][j]) * (u[i][j] + d[i][j]);

    // æƒ…å†µ3ï¼š2ä¸ªè½¬å¼¯ï¼ˆUå‹ï¼Œå…ˆç«–åæ¨ªå†ç«–ï¼‰
    for (int i = 1; i < n-1; ++i) {
        int toU = 0, toD = 0;
        for (int j = 1; j < m-1; ++j) {
            if (u[i][j]) ans += toU + toD;
            if (d[i][j]) ans += toU + toD;
            if (j > 1) { toU += u[i][j-1]; toD += d[i][j-1]; }
            if (a[i][j] == '#') { toU = 0; toD = 0; }
        }
    }

    // æƒ…å†µ3è¡¥å……ï¼šå…ˆæ¨ªåç«–å†æ¨ªï¼ˆäº¤æ¢è¡Œåˆ—å†ç®—ä¸€éï¼‰
    swap(n, m);
    vector<vector<char>> b(n, vector<char>(m));
    for (int i = 0; i < n; ++i)
        for (int j = 0; j < m; ++j)
            b[i][j] = a[j][i];
    a = b;
    fill(u.begin(), u.end(), vector<int>(m, 0));
    fill(d.begin(), d.end(), vector<int>(m, 0));
    fill(l.begin(), l.end(), vector<int>(m, 0));
    fill(r.begin(), r.end(), vector<int>(m, 0));

    for (int i = 0; i < n; ++i) {
        for (int j = 0; j < m; ++j) {
            u[i][j] = (i == 0 ? 1 : u[i-1][j]) && (a[i][j] == '.');
            l[i][j] = (j == 0 ? 1 : l[i][j-1]) && (a[i][j] == '.');
        }
    }
    for (int i = n-1; i >= 0; --i) {
        for (int j = m-1; j >= 0; --j) {
            d[i][j] = (i == n-1 ? 1 : d[i+1][j]) && (a[i][j] == '.');
            r[i][j] = (j == m-1 ? 1 : r[i][j+1]) && (a[i][j] == '.');
        }
    }
    for (int i = 1; i < n-1; ++i) {
        int toU = 0, toD = 0;
        for (int j = 1; j < m-1; ++j) {
            if (u[i][j]) ans += toU + toD;
            if (d[i][j]) ans += toU + toD;
            if (j > 1) { toU += u[i][j-1]; toD += d[i][j-1]; }
            if (a[i][j] == '#') { toU = 0; toD = 0; }
        }
    }

    cout << ans << '\n';
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–è¾“å…¥å¹¶åˆå§‹åŒ–æ•°ç»„ï¼›  
  2. é¢„å¤„ç†`U/D/L/R`æ•°ç»„ï¼Œç”¨é€’æ¨è®¡ç®—æ¯ä¸ªç‚¹çš„å¯è¾¾æ€§ï¼›  
  3. åˆ†åˆ«è®¡ç®—**0ä¸ªè½¬å¼¯**ï¼ˆç›´çº¿ï¼‰ã€**1ä¸ªè½¬å¼¯**ï¼ˆLå‹ï¼‰ã€**2ä¸ªè½¬å¼¯**ï¼ˆUå‹ï¼‰çš„ç®¡é“æ•°é‡ï¼›  
  4. äº¤æ¢è¡Œåˆ—ï¼Œå†è®¡ç®—ä¸€æ¬¡Uå‹ç®¡é“ï¼ˆè¦†ç›–â€œå…ˆæ¨ªåç«–å†æ¨ªâ€çš„æƒ…å†µï¼‰ï¼›  
  5. è¾“å‡ºæ€»æ•°é‡ã€‚  


### é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µèµæï¼ˆæ¥æºHoochï¼‰  
* **äº®ç‚¹**ï¼šé¢„å¤„ç†æ•°ç»„çš„é€’æ¨é€»è¾‘éå¸¸æ¸…æ™°ï¼Œç›´æ¥ç”¨â€œä¸Šæ–¹ç‚¹çš„ç»“æœ+å½“å‰ç‚¹æ˜¯å¦ä¸ºç©ºâ€è®¡ç®—`U[i][j]`ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// é¢„å¤„ç†Uï¼ˆä¸Šï¼‰ã€Lï¼ˆå·¦ï¼‰
for (int i = 0; i < n; ++i) {
    for (int j = 0; j < m; ++j) {
        u[i][j] = (i == 0 ? 1 : u[i-1][j]) && (a[i][j] == '.');
        l[i][j] = (j == 0 ? 1 : l[i][j-1]) && (a[i][j] == '.');
    }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  - `u[i][j]`è¡¨ç¤ºç‚¹(i,j)èƒ½å¦å¾€ä¸Šèµ°åˆ°ä¸Šè¾¹ç¼˜ã€‚å¦‚æœ`i=0`ï¼ˆå·²ç»åœ¨ä¸Šè¾¹ç¼˜ï¼‰ï¼Œåˆ™`u[i][j]=1`ï¼›å¦åˆ™ï¼Œ`u[i][j]`ç­‰äºâ€œä¸Šæ–¹ç‚¹(i-1,j)èƒ½å¦åˆ°ä¸Šè¾¹ç¼˜â€ä¸”â€œå½“å‰ç‚¹(i,j)æ˜¯ç©ºçš„â€ã€‚  
  - `l[i][j]`åŒç†ï¼Œæ˜¯ç‚¹(i,j)èƒ½å¦å¾€å·¦èµ°åˆ°å·¦è¾¹ç¼˜ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€’æ¨çš„æ ¸å¿ƒæ˜¯â€œç”¨å‰é¢çš„ç»“æœç®—å½“å‰çš„ç»“æœâ€ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚  


### é¢˜è§£äºŒæ ¸å¿ƒç‰‡æ®µèµæï¼ˆæ¥æºLPhangï¼‰  
* **äº®ç‚¹**ï¼šç”¨â€œè¡Œåˆ—äº¤æ¢â€ç®€åŒ–ä»£ç ï¼Œè¦†ç›–å·¦å³æ–¹å‘çš„Uå‹ç®¡é“ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
solve(a, n, m, 1);
solve(b, m, n, 0); // äº¤æ¢è¡Œåˆ—å¤„ç†
```
* **ä»£ç è§£è¯»**ï¼š  
  - ç¬¬ä¸€æ¬¡è°ƒç”¨`solve`å¤„ç†â€œä¸Šä¸‹æ–¹å‘çš„Uå‹ç®¡é“â€ï¼ˆå…ˆç«–åæ¨ªå†ç«–ï¼‰ï¼›  
  - äº¤æ¢è¡Œåˆ—åï¼Œç¬¬äºŒæ¬¡è°ƒç”¨`solve`å¤„ç†â€œå·¦å³æ–¹å‘çš„Uå‹ç®¡é“â€ï¼ˆå…ˆæ¨ªåç«–å†æ¨ªï¼‰ï¼Œå› ä¸ºäº¤æ¢åâ€œå·¦å³â€å˜æˆäº†â€œä¸Šä¸‹â€ï¼Œå¯ä»¥å¤ç”¨ç›¸åŒçš„é€»è¾‘ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå½“é—®é¢˜å­˜åœ¨â€œå¯¹ç§°æ€§â€ï¼ˆæ¯”å¦‚ä¸Šä¸‹å’Œå·¦å³é€»è¾‘ç›¸åŒï¼‰æ—¶ï¼Œäº¤æ¢è¡Œåˆ—/åæ ‡èƒ½å‡å°‘ä»£ç é‡ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ ç®¡é“å·¥çš„â€œå½¢çŠ¶ç»Ÿè®¡ä¹‹æ—…â€  
æˆ‘ä»¬è®¾è®¡ä¸€ä¸ª**FCçº¢ç™½æœºé£æ ¼**çš„åŠ¨ç”»ï¼ŒèƒŒæ™¯æ˜¯åƒç´ åŒ–çš„åŸå¸‚åœ°å›¾ï¼ˆç»¿è‰²ç©ºç‚¹ã€çº¢è‰²éšœç¢ç‰©ï¼‰ï¼Œä¸»è§’æ˜¯ä¸€ä¸ªåƒç´ å°äººï¼ˆç®¡é“å·¥ï¼‰ï¼Œè´Ÿè´£ç»Ÿè®¡ä¸åŒå½¢çŠ¶çš„ç®¡é“ã€‚


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **é¢„å¤„ç†é˜¶æ®µ**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤º`U/D/L/R`æ•°ç»„çš„è®¡ç®—è¿‡ç¨‹ï¼šæ¯”å¦‚`U[i][j]`çš„åƒç´ å—ä»ä¸Šæ–¹â€œæµä¸‹æ¥â€ï¼Œå¦‚æœå½“å‰ç‚¹æ˜¯ç©ºçš„ï¼Œå°±å˜æˆè“è‰²ï¼ˆè¡¨ç¤ºå¯è¾¾ï¼‰ï¼Œå¦åˆ™å˜æˆç°è‰²ï¼ˆä¸å¯è¾¾ï¼‰ï¼›  
   - æ¯è®¡ç®—å®Œä¸€è¡Œï¼Œæ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆï¼Œæç¤ºé¢„å¤„ç†è¿›åº¦ã€‚  

2. **å½¢çŠ¶ç»Ÿè®¡é˜¶æ®µ**ï¼š  
   - **ç›´çº¿è·¯å¾„**ï¼šç®¡é“å·¥ä»å·¦è¾¹ç¼˜å‡ºå‘ï¼Œå¾€å³èµ°ä¸€æ¡é»„è‰²ç›´çº¿ï¼Œåˆ°è¾¾å³è¾¹ç¼˜åï¼Œå±å¹•å³ä¸Šè§’çš„â€œç›´çº¿è®¡æ•°â€+1ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
   - **Lå‹è·¯å¾„**ï¼šç®¡é“å·¥å…ˆç«–èµ°ï¼ˆæ©™è‰²ï¼‰ï¼Œå†æ¨ªèµ°ï¼ˆæ©™è‰²ï¼‰ï¼Œå½¢æˆLå‹ï¼Œâ€œLå‹è®¡æ•°â€+1ï¼ŒéŸ³æ•ˆå˜æˆâ€œå®-å®â€ï¼›  
   - **Uå‹è·¯å¾„**ï¼šç®¡é“å·¥å…ˆç«–èµ°ï¼ˆç´«è‰²ï¼‰ã€å†æ¨ªèµ°ï¼ˆç´«è‰²ï¼‰ã€å†ç«–èµ°ï¼ˆç´«è‰²ï¼‰ï¼Œå½¢æˆUå‹ï¼Œâ€œUå‹è®¡æ•°â€+1ï¼ŒéŸ³æ•ˆå˜æˆâ€œå®-å®-å®â€ã€‚  

3. **äº¤äº’è®¾è®¡**ï¼š  
   - æ§åˆ¶é¢æ¿æœ‰â€œå•æ­¥æ‰§è¡Œâ€â€œè‡ªåŠ¨æ’­æ”¾â€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—å¯ä»¥è°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦ï¼›  
   - ç‚¹å‡»â€œAIè‡ªåŠ¨æ¼”ç¤ºâ€ï¼Œç®¡é“å·¥ä¼šè‡ªåŠ¨éå†æ‰€æœ‰å¯èƒ½çš„ç®¡é“ï¼Œåƒâ€œè´ªåƒè›‡AIâ€ä¸€æ ·å®Œæˆç»Ÿè®¡ï¼›  
   - å½“ç»Ÿè®¡å®Œæˆï¼Œæ’­æ”¾8ä½é£æ ¼çš„èƒœåˆ©éŸ³ä¹ï¼Œå±å¹•æ˜¾ç¤ºæ€»æ•°é‡ã€‚  


### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šç”¨FCæ¸¸æˆçš„é…è‰²ï¼ˆç»¿è‰²è‰åœ°ã€çº¢è‰²ç –å¢™ã€è“è‰²ç®¡é“ï¼‰ï¼Œè¥é€ å¤å¤æ„Ÿï¼Œé™ä½å­¦ä¹ å‹åŠ›ï¼›  
- **éŸ³æ•ˆæç¤º**ï¼šä¸åŒå½¢çŠ¶å¯¹åº”ä¸åŒéŸ³æ•ˆï¼Œå¼ºåŒ–â€œå½¢çŠ¶-éŸ³æ•ˆâ€çš„å…³è”è®°å¿†ï¼›  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæŠŠç»Ÿè®¡è¿‡ç¨‹å˜æˆâ€œç®¡é“å·¥çš„ä»»åŠ¡â€ï¼Œå®Œæˆæ¯ä¸ªå½¢çŠ¶çš„ç»Ÿè®¡åƒâ€œè¿‡å…³â€ï¼Œå¢åŠ æˆå°±æ„Ÿã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **åˆ†ç±»è®¨è®º**ï¼šé€‚ç”¨äºâ€œå½¢çŠ¶å¤šæ ·ã€è§„åˆ™å¤æ‚â€çš„é—®é¢˜ï¼Œæ¯”å¦‚ç»Ÿè®¡æ£‹ç›˜ä¸Šçš„ä¸åŒè·¯å¾„ã€è®¡ç®—ä¸åŒå½¢çŠ¶çš„å›¾å½¢æ•°é‡ï¼›  
- **é¢„å¤„ç†æ•°ç»„**ï¼šé€‚ç”¨äºâ€œå¤šæ¬¡æŸ¥è¯¢ç›¸åŒä¿¡æ¯â€çš„åœºæ™¯ï¼Œæ¯”å¦‚åˆ¤æ–­ç‚¹èƒ½å¦åˆ°è¾¾è¾¹ç•Œã€è®¡ç®—å­çŸ©é˜µå’Œï¼›  
- **å¯¹ç§°æ€§åˆ©ç”¨**ï¼šé€‚ç”¨äºâ€œä¸Šä¸‹/å·¦å³é€»è¾‘ç›¸åŒâ€çš„é—®é¢˜ï¼Œæ¯”å¦‚æ£‹ç›˜é—®é¢˜ã€å¯¹ç§°å›¾å½¢ç»Ÿè®¡ã€‚  


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1002 è¿‡æ²³å’**  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦ç»Ÿè®¡ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„æ•°é‡ï¼Œæ¶‰åŠé¢„å¤„ç†éšœç¢ç‰©å’Œé€’æ¨è®¡ç®—ï¼Œèƒ½å·©å›ºâ€œé¢„å¤„ç†+é€’æ¨â€çš„æŠ€å·§ã€‚  
2. **æ´›è°· P1011 è½¦ç«™**  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šéœ€è¦åˆ†ç±»è®¨è®ºä¸åŒçš„ç«™ç‚¹æƒ…å†µï¼Œé”»ç‚¼â€œä¸é‡ä¸æ¼â€çš„åˆ†ç±»æ€ç»´ã€‚  
3. **æ´›è°· P1025 æ•°çš„åˆ’åˆ†**  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæŠŠæ•°åˆ†æˆè‹¥å¹²ä»½çš„é—®é¢˜ï¼Œéœ€è¦åˆ†ç±»è®¨è®ºæ¯ä»½çš„å¤§å°ï¼Œå¼ºåŒ–â€œåˆ†ç±»è®¨è®º+åŠ¨æ€è§„åˆ’â€çš„ç»“åˆåº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­ï¼ŒHoochæåˆ°â€œé¢„å¤„ç†è¾…åŠ©æ•°ç»„èƒ½é¿å…é‡å¤è®¡ç®—â€ï¼ŒLPhangæåˆ°â€œè¡Œåˆ—äº¤æ¢èƒ½ç®€åŒ–ä»£ç â€â€”â€”è¿™äº›ç»éªŒéƒ½éå¸¸å®ç”¨ï¼š  
- **é¢„å¤„ç†çš„é‡è¦æ€§**ï¼šå½“ä½ éœ€è¦å¤šæ¬¡æŸ¥è¯¢â€œæŸä¸ªç‚¹èƒ½å¦åˆ°è¾¾è¾¹ç•Œâ€æ—¶ï¼Œé¢„å¤„ç†æ¯”æ¯æ¬¡éå†æ›´é«˜æ•ˆï¼›  
- **å¯¹ç§°æ€§çš„åˆ©ç”¨**ï¼šé‡åˆ°â€œå·¦å³/ä¸Šä¸‹é€»è¾‘ç›¸åŒâ€çš„é—®é¢˜ï¼Œä¸å¦¨è¯•è¯•äº¤æ¢è¡Œåˆ—ï¼Œå‡å°‘ä»£ç é‡ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œPasha and Pipeâ€çš„åˆ†æå°±åˆ°è¿™é‡Œï¼å¸Œæœ›å¤§å®¶èƒ½å­¦ä¼š**åˆ†ç±»è®¨è®º+é¢„å¤„ç†**çš„æŠ€å·§ï¼Œé‡åˆ°å¤æ‚é—®é¢˜æ—¶ï¼Œå…ˆâ€œåˆ†å½¢çŠ¶â€ï¼Œå†â€œé¢„å¤„ç†â€ï¼Œæœ€åâ€œç»Ÿè®¡â€ã€‚ç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œæ‹†è§£é—®é¢˜â€â€”â€”æŠŠå¤§é—®é¢˜æ‹†æˆå°é—®é¢˜ï¼Œé€ä¸ªè§£å†³ï¼Œä½ ä¼šå‘ç°â€œéš¾é—®é¢˜â€ä¹Ÿå˜å¾—ç®€å•å•¦ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š122.98ç§’
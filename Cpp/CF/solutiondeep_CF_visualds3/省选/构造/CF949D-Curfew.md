# é¢˜ç›®ä¿¡æ¯

# Curfew

## é¢˜ç›®æè¿°

Instructors of Some Informatics School make students go to bed.

The house contains $ n $ rooms, in each room exactly $ b $ students were supposed to sleep. However, at the time of curfew it happened that many students are not located in their assigned rooms. The rooms are arranged in a row and numbered from $ 1 $ to $ n $ . Initially, in $ i $ -th room there are $ a_{i} $ students. All students are currently somewhere in the house, therefore $ a_{1}+a_{2}+...+a_{n}=nb $ . Also $ 2 $ instructors live in this house.

The process of curfew enforcement is the following. One instructor starts near room $ 1 $ and moves toward room $ n $ , while the second instructor starts near room $ n $ and moves toward room $ 1 $ . After processing current room, each instructor moves on to the next one. Both instructors enter rooms and move simultaneously, if $ n $ is odd, then only the first instructor processes the middle room. When all rooms are processed, the process ends.

When an instructor processes a room, she counts the number of students in the room, then turns off the light, and locks the room. Also, if the number of students inside the processed room is not equal to $ b $ , the instructor writes down the number of this room into her notebook (and turns off the light, and locks the room). Instructors are in a hurry (to prepare the study plan for the next day), so they don't care about who is in the room, but only about the number of students.

While instructors are inside the rooms, students can run between rooms that are not locked and not being processed. A student can run by at most $ d $ rooms, that is she can move to a room with number that differs my at most $ d $ . Also, after (or instead of) running each student can hide under a bed in a room she is in. In this case the instructor will not count her during the processing. In each room any number of students can hide simultaneously.

Formally, here is what's happening:

- A curfew is announced, at this point in room $ i $ there are $ a_{i} $ students.
- Each student can run to another room but not further than $ d $ rooms away from her initial room, or stay in place. After that each student can optionally hide under a bed.
- Instructors enter room $ 1 $ and room $ n $ , they count students there and lock the room (after it no one can enter or leave this room).
- Each student from rooms with numbers from $ 2 $ to $ n-1 $ can run to another room but not further than $ d $ rooms away from her current room, or stay in place. Each student can optionally hide under a bed.
- Instructors move from room $ 1 $ to room $ 2 $ and from room $ n $ to room $ n-1 $ .
- This process continues until all rooms are processed.

Let $ x_{1} $ denote the number of rooms in which the first instructor counted the number of non-hidden students different from $ b $ , and $ x_{2} $ be the same number for the second instructor. Students know that the principal will only listen to one complaint, therefore they want to minimize the maximum of numbers $ x_{i} $ . Help them find this value if they use the optimal strategy.

## è¯´æ˜/æç¤º

In the first sample the first three rooms are processed by the first instructor, and the last two are processed by the second instructor. One of the optimal strategies is the following: firstly three students run from room $ 5 $ to room $ 4 $ , on the next stage two of them run to room $ 3 $ , and one of those two hides under a bed. This way, the first instructor writes down room $ 2 $ , and the second writes down nothing.

In the second sample one of the optimal strategies is the following: firstly all students in room $ 1 $ hide, all students from room $ 2 $ run to room $ 3 $ . On the next stage one student runs from room $ 3 $ to room $ 4 $ , and $ 5 $ students hide. This way, the first instructor writes down rooms $ 1 $ and $ 2 $ , the second instructor writes down rooms $ 5 $ and $ 6 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 1 1
1 0 0 0 4
```

### è¾“å‡º

```
1
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
6 1 2
3 8 0 1 0 0
```

### è¾“å‡º

```
2
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCurfew æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## å¼•è¨€
ä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·è§£å†³çš„é—®é¢˜æ˜¯ã€ŒCurfewã€â€”â€”ä¸¤ä¸ªå®¿ç®¡ä»èµ°å»Šä¸¤ç«¯å‘ä¸­é—´æŸ¥å¯ï¼Œå­¦ç”Ÿå¯ä»¥ç§»åŠ¨æˆ–éšè—ï¼Œç›®æ ‡æ˜¯è®©**ä¸¤ä¸ªå®¿ç®¡è®°å½•çš„â€œä¸ç¬¦åˆäººæ•°æ ‡å‡†çš„æˆ¿é—´æ•°â€çš„æœ€å¤§å€¼**å°½å¯èƒ½å°ã€‚è¿™ä¸ªé—®é¢˜ç»“åˆäº†**äºŒåˆ†ç­”æ¡ˆ**å’Œ**è´ªå¿ƒç­–ç•¥**ï¼Œæ—¢èƒ½é”»ç‚¼æˆ‘ä»¬çš„é€»è¾‘æ¨å¯¼èƒ½åŠ›ï¼Œä¹Ÿèƒ½å­¦ä¼šå¦‚ä½•ç”¨â€œåˆ†è€Œæ²»ä¹‹â€çš„æ€è·¯ç®€åŒ–å¤æ‚é—®é¢˜~


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šäºŒåˆ†ç­”æ¡ˆ + è´ªå¿ƒç­–ç•¥  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®ï¼Œåœ¨äºâ€œ**æ‰¾æœ€å°çš„æœ€å¤§å€¼**â€â€”â€”æˆ‘ä»¬è¦æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„æ•°`k`ï¼Œä½¿å¾—ä¸¤ä¸ªå®¿ç®¡è®°å½•çš„ä¸ç¬¦åˆæˆ¿é—´æ•°éƒ½ä¸è¶…è¿‡`k`ã€‚è¿™ç§â€œæœ€å°å€¼çš„æœ€å¤§å€¼â€é—®é¢˜ï¼Œ**äºŒåˆ†ç­”æ¡ˆ**æ˜¯ç»å…¸è§£æ³•ï¼š  
- æˆ‘ä»¬å…ˆå‡è®¾ä¸€ä¸ªå€™é€‰ç­”æ¡ˆ`mid`ï¼ˆæ¯”å¦‚â€œä¸¤ä¸ªå®¿ç®¡æœ€å¤šå„è®°`mid`ä¸ªæˆ¿é—´â€ï¼‰ï¼Œç„¶åéªŒè¯è¿™ä¸ªå‡è®¾æ˜¯å¦å¯è¡Œï¼ˆå³å­¦ç”Ÿèƒ½å¦é€šè¿‡ç§»åŠ¨/éšè—ï¼Œè®©ä¸¤è¾¹çš„ä¸ç¬¦åˆæ•°éƒ½â‰¤`mid`ï¼‰ã€‚  
- å¦‚æœå¯è¡Œï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æ›´å°çš„`mid`ï¼›å¦‚æœä¸å¯è¡Œï¼Œå°±éœ€è¦æ”¾å¤§`mid`ã€‚  

è€Œ**è´ªå¿ƒç­–ç•¥**åˆ™ç”¨äºéªŒè¯å‡è®¾ï¼šå­¦ç”Ÿè¦å°½å¯èƒ½â€œå¡«è¡¥â€å®¿ç®¡å³å°†æ£€æŸ¥çš„æˆ¿é—´â€”â€”å·¦è¾¹çš„å­¦ç”Ÿå¾€å·¦è¾¹è·‘ï¼Œå³è¾¹çš„å¾€å³è¾¹è·‘ï¼Œå°½é‡è®©æ¯ä¸ªè¢«æ£€æŸ¥çš„æˆ¿é—´åˆšå¥½æœ‰`b`äººï¼ˆå¤šä½™çš„è—èµ·æ¥ï¼‰ã€‚è¿™æ ·èƒ½æœ€å°åŒ–ä¸ç¬¦åˆçš„æˆ¿é—´æ•°ã€‚  

### æ ¸å¿ƒç®—æ³•æµç¨‹ä¸å¯è§†åŒ–è®¾è®¡
- **äºŒåˆ†æ¡†æ¶**ï¼š`l=0`åˆ°`r=(n+1)/2`ï¼ˆæœ€å¤šä¸€åŠæˆ¿é—´ä¸ç¬¦åˆï¼‰ï¼Œæ¯æ¬¡å–`mid=(l+r)/2`ï¼ŒéªŒè¯`check(mid)`æ˜¯å¦å¯è¡Œã€‚  
- **è´ªå¿ƒéªŒè¯**ï¼šä¸¤è¾¹å®¿ç®¡åŒæ—¶å‘ä¸­é—´æ£€æŸ¥ï¼Œæ¯æ¬¡å°½é‡ç”¨å¯ç§»åŠ¨çš„å­¦ç”Ÿå¡«æ»¡å½“å‰æˆ¿é—´ï¼Œæ£€æŸ¥ç§»åŠ¨è·ç¦»æ˜¯å¦â‰¤`d*(mid+1)`ï¼ˆå› ä¸ºå­¦ç”Ÿå¯ä»¥åœ¨`mid+1`æ¬¡ç§»åŠ¨ä¸­è·‘`d`ä¸ªæˆ¿é—´/æ¬¡ï¼‰ã€‚  
- **å¯è§†åŒ–æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºèµ°å»Šï¼ˆä¸€æ’æ–¹å—æˆ¿é—´ï¼‰ã€å®¿ç®¡ï¼ˆçº¢/è“åƒç´ äººï¼‰å’Œå­¦ç”Ÿï¼ˆé»„è‰²å°æ–¹å—ï¼‰ã€‚å…³é”®æ­¥éª¤é«˜äº®ï¼š  
  - å­¦ç”Ÿç§»åŠ¨æ—¶ï¼Œé»„è‰²æ–¹å—æ»‘åŠ¨åˆ°ç›®æ ‡æˆ¿é—´ï¼ˆè¶…è¿‡`d`èŒƒå›´ä¼šé—ªçƒè­¦å‘Šï¼‰ï¼›  
  - å®¿ç®¡æ£€æŸ¥æ—¶ï¼Œæˆ¿é—´å˜è‰²ï¼ˆç»¿è‰²=ç¬¦åˆï¼Œçº¢è‰²=ä¸ç¬¦åˆï¼‰ï¼›  
  - éšè—çš„å­¦ç”Ÿå˜æˆåŠé€æ˜ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºå¤§å®¶ç­›é€‰äº†3ä»½æ€è·¯æ¸…æ™°ã€ä»£ç æœ‰æ•ˆçš„é¢˜è§£ï¼Œä¸€èµ·æ¥çœ‹çœ‹~

### é¢˜è§£ä¸€ï¼šsmoothsetï¼ˆäºŒåˆ†+è´ªå¿ƒéªŒè¯ï¼Œè¯„åˆ†ï¼š4.5æ˜Ÿï¼‰  
**æ¥æº**ï¼šCSDNåšå®¢  
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£çš„æ¡†æ¶éå¸¸æ ‡å‡†â€”â€”ç”¨äºŒåˆ†ç­”æ¡ˆæ‰¾æœ€å°`k`ï¼Œç”¨è´ªå¿ƒéªŒè¯æ¯ä¸ª`k`çš„å¯è¡Œæ€§ã€‚æ ¸å¿ƒçš„`check`å‡½æ•°é€»è¾‘æ¸…æ™°ï¼š  
- ä»ä¸¤ç«¯å‘ä¸­é—´å¤„ç†æˆ¿é—´ï¼Œæ¯æ¬¡ç”¨å¯ç§»åŠ¨çš„å­¦ç”Ÿå¡«æ»¡å½“å‰æˆ¿é—´ï¼ˆä¸å¤Ÿå°±ä»åé¢çš„æˆ¿é—´è°ƒï¼‰ï¼›  
- æ£€æŸ¥å­¦ç”Ÿç§»åŠ¨çš„è·ç¦»æ˜¯å¦è¶…è¿‡`d*(k+1)`ï¼ˆæ€»ç§»åŠ¨èŒƒå›´ï¼‰ï¼›  
- å¤„ç†äº†`n`ä¸ºå¥‡æ•°çš„è¾¹ç•Œæƒ…å†µï¼ˆä¸­é—´æˆ¿é—´åªç”±å·¦å®¿ç®¡æ£€æŸ¥ï¼‰ã€‚  
ä»£ç è§„èŒƒï¼ˆå˜é‡å`p1/p2`è¡¨ç¤ºå½“å‰å¤„ç†çš„æˆ¿é—´ï¼Œ`s1/s2`è¡¨ç¤ºå®¿ç®¡è¦æ£€æŸ¥çš„æˆ¿é—´ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼Œæ˜¯ç«èµ›ä¸­èƒ½ç›´æ¥å¤ç”¨çš„æ¨¡æ¿çº§ä»£ç ã€‚


### é¢˜è§£äºŒï¼šTyherï¼ˆè´ªå¿ƒåˆ†æ²»ï¼Œè¯„åˆ†ï¼š4æ˜Ÿï¼‰  
**æ¥æº**ï¼šåŒ¿åé¢˜è§£  
**ç‚¹è¯„**ï¼š  
è¿™ä¸ªé¢˜è§£çš„äº®ç‚¹æ˜¯**å‘ç°äº†å­¦ç”Ÿç§»åŠ¨çš„â€œä¸äº¤å‰æ€§è´¨â€**â€”â€”å·¦è¾¹çš„å­¦ç”Ÿå°½é‡å¾€å·¦è¾¹è·‘ï¼Œå³è¾¹çš„å¾€å³è¾¹è·‘ï¼Œä¸ä¼šäº’ç›¸äº¤å‰ã€‚è¿™æ ·å¯ä»¥æŠŠé—®é¢˜æ‹†æˆâ€œå·¦è¾¹å®¿ç®¡çš„åŒºåŸŸâ€å’Œâ€œå³è¾¹å®¿ç®¡çš„åŒºåŸŸâ€ï¼Œå„è‡ªç”¨è´ªå¿ƒå¤„ç†ã€‚æ€è·¯ç®€æ´ï¼Œå¤æ‚åº¦`O(n)`ï¼Œé€‚åˆå¿«é€Ÿç†è§£é—®é¢˜æœ¬è´¨ï¼Œä½†ç¾ä¸­ä¸è¶³æ˜¯æ²¡æœ‰è´´ä»£ç ï¼Œéœ€è¦è‡ªå·±æ¨å¯¼å®ç°ç»†èŠ‚ã€‚


### é¢˜è§£ä¸‰ï¼šw33z8kqrqk8zzzx33ï¼ˆå‰ç¼€å’Œæ¨¡æ‹Ÿï¼Œè¯„åˆ†ï¼š4æ˜Ÿï¼‰  
**æ¥æº**ï¼šåŒ¿åé¢˜è§£  
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£ç”¨**å‰ç¼€å’Œ**å¿«é€Ÿè®¡ç®—â€œæŸä¸ªåŒºé—´å†…çš„å­¦ç”Ÿæ€»æ•°â€ï¼Œä»è€Œåˆ¤æ–­èƒ½å¦å¡«æ»¡å½“å‰æˆ¿é—´ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š  
- å·¦åŠéƒ¨åˆ†ï¼šè®¡ç®—æ¯ä¸ªä½ç½®`i`èƒ½è¦†ç›–çš„å­¦ç”ŸåŒºé—´ï¼ˆ`min(n, i*(d+1))`ï¼‰ï¼Œç”¨å‰ç¼€å’Œå¿«é€Ÿæ±‚å’Œï¼›  
- å³åŠéƒ¨åˆ†ï¼šç±»ä¼¼å¤„ç†ï¼Œè®¡ç®—èƒ½è¦†ç›–çš„å­¦ç”Ÿæ•°ã€‚  
ä»£ç éå¸¸ç®€çŸ­ï¼ˆåªæœ‰10è¡Œå·¦å³ï¼‰ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†è§£é‡Šä¸å¤Ÿè¯¦ç»†ï¼Œé€‚åˆæœ‰å‰ç¼€å’ŒåŸºç¡€çš„åŒå­¦è¿›ä¸€æ­¥ä¼˜åŒ–æ€è·¯ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### å…³é”®ç‚¹1ï¼šå¦‚ä½•è®¾è®¡äºŒåˆ†ç­”æ¡ˆçš„éªŒè¯å‡½æ•°ï¼Ÿ  
**åˆ†æ**ï¼šéªŒè¯å‡½æ•°çš„æ ¸å¿ƒæ˜¯â€œæ¨¡æ‹Ÿå­¦ç”Ÿç§»åŠ¨ï¼Œçœ‹èƒ½å¦è®©ä¸¤è¾¹çš„ä¸ç¬¦åˆæ•°â‰¤`mid`â€ã€‚smoothsetçš„`check`å‡½æ•°ç”¨äº†è´ªå¿ƒç­–ç•¥ï¼š  
- ä»ä¸¤ç«¯å¼€å§‹ï¼Œæ¯æ¬¡å°½é‡ç”¨åé¢çš„å­¦ç”Ÿå¡«æ»¡å½“å‰æˆ¿é—´ï¼ˆæ¯”å¦‚å·¦å®¿ç®¡æ£€æŸ¥`s1`æ—¶ï¼Œç”¨`p1`åŠä¹‹åçš„å­¦ç”Ÿå¡«`b`äººï¼‰ï¼›  
- æ£€æŸ¥`p1 - s1`ï¼ˆå­¦ç”Ÿç§»åŠ¨çš„è·ç¦»ï¼‰æ˜¯å¦â‰¤`d*(mid+1)`ï¼ˆå…è®¸çš„æœ€å¤§èŒƒå›´ï¼‰ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šéªŒè¯å‡½æ•°æ˜¯äºŒåˆ†ç­”æ¡ˆçš„â€œçµé­‚â€ï¼Œå¿…é¡»ç´§æ‰£é—®é¢˜çš„çº¦æŸæ¡ä»¶ï¼ˆå¦‚ç§»åŠ¨è·ç¦»ï¼‰ã€‚


### å…³é”®ç‚¹2ï¼šå¦‚ä½•å¤„ç†å­¦ç”Ÿçš„ç§»åŠ¨èŒƒå›´ï¼Ÿ  
**åˆ†æ**ï¼šå­¦ç”Ÿæ¯æ¬¡ç§»åŠ¨ä¸è¶…è¿‡`d`ä¸ªæˆ¿é—´ï¼Œè€Œå®¿ç®¡è¦æ£€æŸ¥`mid+1`æ¬¡ï¼ˆæ¯”å¦‚`mid=1`æ—¶ï¼Œæ£€æŸ¥2æ¬¡ï¼‰ï¼Œæ‰€ä»¥æ€»ç§»åŠ¨èŒƒå›´æ˜¯`d*(mid+1)`ã€‚æ¯”å¦‚`d=1`ã€`mid=1`æ—¶ï¼Œå­¦ç”Ÿæœ€å¤šèƒ½è·‘`1*2=2`ä¸ªæˆ¿é—´ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šæ€»ç§»åŠ¨èŒƒå›´=å•æ¬¡ç§»åŠ¨è·ç¦»Ã—ç§»åŠ¨æ¬¡æ•°ï¼Œè¦æŠŠâ€œå¤šæ¬¡ç§»åŠ¨â€çš„ç´¯ç§¯æ•ˆåº”ç®—è¿›å»ã€‚


### å…³é”®ç‚¹3ï¼šå¦‚ä½•åˆ†è§£åŒå®¿ç®¡çš„é—®é¢˜ï¼Ÿ  
**åˆ†æ**ï¼šTyherçš„é¢˜è§£æŒ‡å‡ºâ€œå­¦ç”Ÿç§»åŠ¨ä¸äº¤å‰â€ï¼Œæ‰€ä»¥å¯ä»¥æŠŠèµ°å»Šåˆ†æˆå·¦åŠéƒ¨åˆ†ï¼ˆå·¦å®¿ç®¡è´Ÿè´£ï¼‰å’Œå³åŠéƒ¨åˆ†ï¼ˆå³å®¿ç®¡è´Ÿè´£ï¼‰ï¼Œå„è‡ªå¤„ç†ã€‚è¿™æ ·åŒå®¿ç®¡çš„é—®é¢˜å°±å˜æˆäº†ä¸¤ä¸ªå•å®¿ç®¡çš„é—®é¢˜ï¼Œå¤§å¤§ç®€åŒ–äº†æ€è€ƒã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šå¤æ‚é—®é¢˜æ‹†åˆ†æˆå­é—®é¢˜ï¼Œæ˜¯ç®—æ³•è®¾è®¡çš„å¸¸ç”¨æŠ€å·§ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
1. **äºŒåˆ†ç­”æ¡ˆæ³•**ï¼šé‡åˆ°â€œæœ€å°åŒ–æœ€å¤§å€¼â€æˆ–â€œæœ€å¤§åŒ–æœ€å°å€¼â€çš„é—®é¢˜ï¼Œä¼˜å…ˆè€ƒè™‘äºŒåˆ†ç­”æ¡ˆã€‚  
2. **è´ªå¿ƒéªŒè¯**ï¼šéªŒè¯æ—¶è¦â€œå°½å¯èƒ½æ»¡è¶³å½“å‰æ¡ä»¶â€ï¼ˆæ¯”å¦‚å¡«æ»¡å½“å‰æˆ¿é—´ï¼‰ï¼Œè¿™æ ·èƒ½æœ€å°åŒ–ä¸ç¬¦åˆæ•°ã€‚  
3. **å‰ç¼€å’Œä¼˜åŒ–**ï¼šå¤„ç†åŒºé—´æ±‚å’Œé—®é¢˜æ—¶ï¼Œå‰ç¼€å’Œèƒ½æŠŠæ—¶é—´å¤æ‚åº¦ä»`O(n^2)`é™åˆ°`O(n)`ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
**è¯´æ˜**ï¼šç»¼åˆsmoothsetçš„é¢˜è§£ï¼Œæ•´åˆäºŒåˆ†æ¡†æ¶å’Œè´ªå¿ƒéªŒè¯ï¼Œæ˜¯èƒ½ç›´æ¥è¿è¡Œçš„å®Œæ•´ä»£ç ã€‚  

```cpp
#include <iostream>
#include <vector>
using namespace std;

typedef long long ll;
const int MAXN = 100005;

ll n, d, b;
ll t[MAXN], a[MAXN];

bool check(int x) {
    ll dis = d * (x + 1);
    int p1 = 1, p2 = n;
    int s1 = x + 1, s2 = n - x;
    for (int i = 1; i <= n; ++i) a[i] = t[i]; // å¤åˆ¶æ•°ç»„ï¼Œé¿å…ä¿®æ”¹åŸæ•°æ®

    while (s1 < s2) {
        // å¤„ç†å·¦å®¿ç®¡çš„å½“å‰æˆ¿é—´s1
        ll need = b;
        while (a[p1] < need) {
            need -= a[p1];
            p1++;
        }
        a[p1] -= need;
        if (p1 - s1 > dis) return false; // ç§»åŠ¨è·ç¦»è¶…è¿‡é™åˆ¶

        // å¤„ç†å³å®¿ç®¡çš„å½“å‰æˆ¿é—´s2
        need = b;
        while (a[p2] < need) {
            need -= a[p2];
            p2--;
        }
        a[p2] -= need;
        if (s2 - p2 > dis) return false;

        dis += d; // ä¸‹ä¸€æ¬¡ç§»åŠ¨èŒƒå›´å¢åŠ d
        s1++;
        s2--;
    }
    return true;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);

    cin >> n >> d >> b;
    for (int i = 1; i <= n; ++i) cin >> t[i];

    int l = 0, r = (n + 1) / 2;
    int ans = r;
    while (l <= r) {
        int mid = (l + r) / 2;
        if (check(mid)) {
            ans = mid;
            r = mid - 1;
        } else {
            l = mid + 1;
        }
    }

    cout << ans << endl;
    return 0;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. `check`å‡½æ•°ï¼šéªŒè¯æ˜¯å¦èƒ½è®©ä¸¤è¾¹çš„ä¸ç¬¦åˆæ•°â‰¤`x`ã€‚ç”¨`p1/p2`éå†æˆ¿é—´ï¼Œç”¨åé¢çš„å­¦ç”Ÿå¡«æ»¡å½“å‰æˆ¿é—´ï¼Œæ£€æŸ¥ç§»åŠ¨è·ç¦»ã€‚  
2. ä¸»å‡½æ•°ï¼šäºŒåˆ†`l`åˆ°`r`ï¼Œæ¯æ¬¡è°ƒç”¨`check`éªŒè¯`mid`ï¼Œæ‰¾åˆ°æœ€å°çš„`ans`ã€‚


### é¢˜è§£ä¸€ï¼ˆsmoothsetï¼‰æ ¸å¿ƒä»£ç èµæ  
**äº®ç‚¹**ï¼šè´ªå¿ƒéªŒè¯çš„é€»è¾‘ç›´æ¥ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
bool check(int x) {
    ll dis = 1ll * d * (x + 1);
    int p1 = 1, p2 = n, s1 = x + 1, s2 = n - x;
    for (int i = 1; i <= n; i++) a[i] = t[i];
    while (s1 < s2) {
        int tmp = b;
        while (a[p1] < tmp) tmp -= a[p1++];
        a[p1] -= tmp;
        if (p1 - s1 > dis) return 0;
        // å¤„ç†å³å®¿ç®¡...
        dis += d, s1++, s2--;
    }
    return 1;
}
```  
**ä»£ç è§£è¯»**ï¼š  
- `dis`æ˜¯å…è®¸çš„æœ€å¤§ç§»åŠ¨è·ç¦»ï¼ˆ`d*(x+1)`ï¼‰ï¼›  
- `p1`æ˜¯å½“å‰èƒ½æä¾›å­¦ç”Ÿçš„æœ€å·¦æˆ¿é—´ï¼Œ`s1`æ˜¯å·¦å®¿ç®¡è¦æ£€æŸ¥çš„æˆ¿é—´ï¼›  
- ç”¨`while (a[p1] < tmp)`ä»`p1`å¼€å§‹å–å­¦ç”Ÿï¼Œç›´åˆ°å¡«æ»¡`s1`æˆ¿é—´çš„`b`äººï¼›  
- æ£€æŸ¥`p1 - s1`ï¼ˆå­¦ç”Ÿä»`p1`ç§»åŠ¨åˆ°`s1`çš„è·ç¦»ï¼‰æ˜¯å¦è¶…è¿‡`dis`ï¼Œå¦‚æœè¶…è¿‡åˆ™`mid`ä¸å¯è¡Œã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒçš„å…³é”®æ˜¯â€œå°½é‡ç”¨æœ€è¿‘çš„å­¦ç”Ÿå¡«æ»¡å½“å‰æˆ¿é—´â€ï¼Œè¿™æ ·èƒ½æœ€å°åŒ–ç§»åŠ¨è·ç¦»ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ å®¿ç®¡æŸ¥å¯è®°  
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½FCçº¢ç™½æœºé£æ ¼ï¼Œæ¨¡æ‹Ÿèµ°å»Šã€å®¿ç®¡å’Œå­¦ç”Ÿçš„äº’åŠ¨ï¼Œè®©ç®—æ³•â€œåŠ¨èµ·æ¥â€ã€‚å¤å¤éŸ³æ•ˆå’Œæ¸¸æˆåŒ–äº¤äº’èƒ½è®©å­¦ä¹ æ›´æœ‰è¶£~


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤ºä¸€æ’åƒç´ æˆ¿é—´ï¼ˆæ¯ä¸ªæˆ¿é—´æ˜¯16x16çš„æ–¹å—ï¼‰ï¼Œåˆå§‹äººæ•°ç”¨æ•°å­—æ ‡æ³¨ï¼ˆæ¯”å¦‚æˆ¿é—´5æœ‰4äººï¼Œæ˜¾ç¤ºâ€œ4â€ï¼‰ï¼›  
   - å·¦ä¸‹è§’æ˜¯æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1~5å€é€Ÿï¼‰ï¼›  
   - æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«BGMï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ï¼‰ã€‚  

2. **å­¦ç”Ÿç§»åŠ¨é˜¶æ®µ**ï¼š  
   - é»„è‰²å°æ–¹å—ä»£è¡¨å­¦ç”Ÿï¼Œç§»åŠ¨æ—¶ä¼šæ»‘åŠ¨åˆ°ç›®æ ‡æˆ¿é—´ï¼ˆæ¯”å¦‚ä»æˆ¿é—´5åˆ°4ï¼Œæ˜¾ç¤ºé»„è‰²æ–¹å—ä»å³å¾€å·¦æ»‘ï¼‰ï¼›  
   - å¦‚æœç§»åŠ¨è¶…è¿‡`d`ä¸ªæˆ¿é—´ï¼ˆæ¯”å¦‚`d=1`æ—¶ä»5åˆ°3ï¼‰ï¼Œæ–¹å—ä¼šé—ªçƒçº¢è‰²ï¼Œä¼´éšâ€œé”™è¯¯â€éŸ³æ•ˆï¼ˆçŸ­ä¿ƒçš„â€œå˜€â€ï¼‰ï¼›  
   - éšè—çš„å­¦ç”Ÿå˜æˆåŠé€æ˜ï¼Œæ—è¾¹æ˜¾ç¤ºâ€œè—â€å­—ã€‚  

3. **å®¿ç®¡æ£€æŸ¥é˜¶æ®µ**ï¼š  
   - å·¦å®¿ç®¡ï¼ˆçº¢è‰²åƒç´ äººï¼‰èµ°åˆ°æˆ¿é—´1ï¼Œå³å®¿ç®¡ï¼ˆè“è‰²åƒç´ äººï¼‰èµ°åˆ°æˆ¿é—´nï¼›  
   - æ£€æŸ¥æˆ¿é—´ï¼šå¦‚æœäººæ•°= `b`ï¼Œæˆ¿é—´å˜ç»¿è‰²ï¼Œä¼´éšâ€œæ­£ç¡®â€éŸ³æ•ˆï¼ˆæ¸…è„†çš„â€œå®â€ï¼‰ï¼›å¦åˆ™å˜çº¢è‰²ï¼Œä¼´éšâ€œé”™è¯¯â€éŸ³æ•ˆï¼ˆä½æ²‰çš„â€œå’šâ€ï¼‰ï¼›  
   - æ£€æŸ¥å®Œçš„æˆ¿é—´é”é—¨ï¼ˆæ˜¾ç¤ºâ€œé”â€å­—ï¼Œæ— æ³•å†ç§»åŠ¨å­¦ç”Ÿï¼‰ã€‚  

4. **è‡ªåŠ¨æ¼”ç¤ºä¸äº¤äº’**ï¼š  
   - ç‚¹å‡»â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ŒåŠ¨ç”»ä¼šæŒ‰è®¾å®šé€Ÿåº¦è¿è¡Œï¼Œåƒâ€œè´ªåƒè›‡AIâ€ä¸€æ ·å±•ç¤ºå®Œæ•´æµç¨‹ï¼›  
   - ç‚¹å‡»â€œå•æ­¥â€ï¼Œå¯ä»¥é€å¸§æŸ¥çœ‹æ¯ä¸€æ­¥çš„å­¦ç”Ÿç§»åŠ¨å’Œå®¿ç®¡æ£€æŸ¥ï¼›  
   - é‡ç½®åå›åˆ°åˆå§‹çŠ¶æ€ï¼Œæ–¹ä¾¿åå¤è§‚å¯Ÿã€‚


### æ—ç™½æç¤ºï¼ˆæ–‡å­—æ°”æ³¡ï¼‰  
- å¼€å§‹æ—¶ï¼šâ€œç°åœ¨å®¿ç®¡è¦æŸ¥å¯å•¦ï¼å­¦ç”Ÿå¯ä»¥ç§»åŠ¨ä¸è¶…è¿‡`d`ä¸ªæˆ¿é—´ï¼Œæˆ–è€…éšè—~â€ï¼›  
- å­¦ç”Ÿç§»åŠ¨æ—¶ï¼šâ€œè¿™ä¸ªå­¦ç”Ÿä»æˆ¿é—´5è·‘åˆ°æˆ¿é—´4ï¼Œè·ç¦»æ˜¯1ï¼Œæ²¡è¶…è¿‡`d=1`ï¼â€ï¼›  
- å®¿ç®¡æ£€æŸ¥æ—¶ï¼šâ€œæˆ¿é—´1æœ‰1äººï¼Œåˆšå¥½ç­‰äº`b=1`ï¼Œç¬¦åˆè¦æ±‚~â€ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
äºŒåˆ†ç­”æ¡ˆ+è´ªå¿ƒç­–ç•¥ä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½å¤„ç†ï¼š  
1. **èµ„æºåˆ†é…é—®é¢˜**ï¼šæ¯”å¦‚â€œç»™nä¸ªå·¥äººåˆ†é…ä»»åŠ¡ï¼Œè®©æœ€å¤§å·¥ä½œé‡æœ€å°â€ï¼›  
2. **è·ç¦»é™åˆ¶é—®é¢˜**ï¼šæ¯”å¦‚â€œåœ¨æ•°è½´ä¸Šæ”¾kä¸ªä¼ æ„Ÿå™¨ï¼Œè¦†ç›–æ‰€æœ‰ç‚¹ï¼Œæ±‚æœ€å°çš„ä¼ æ„Ÿå™¨åŠå¾„â€ï¼›  
3. **æ—¶é—´å®‰æ’é—®é¢˜**ï¼šæ¯”å¦‚â€œå®‰æ’ä¼šè®®æ—¶é—´ï¼Œè®©æœ€é•¿ä¼šè®®æ—¶é—´æœ€å°â€ã€‚


### æ´›è°·ç»ƒä¹ æ¨è  
1. **P1824 è¿›å‡»çš„å¥¶ç‰›**ï¼š  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šç»å…¸çš„äºŒåˆ†ç­”æ¡ˆé¢˜ï¼Œéœ€è¦ç”¨è´ªå¿ƒéªŒè¯â€œèƒ½å¦æ”¾kå¤´å¥¶ç‰›ï¼Œé—´è·â‰¥midâ€ï¼Œå’Œæœ¬é¢˜çš„éªŒè¯æ€è·¯ç±»ä¼¼ã€‚  
2. **P2678 è·³çŸ³å¤´**ï¼š  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šäºŒåˆ†ç­”æ¡ˆ+æ¨¡æ‹Ÿï¼Œéœ€è¦åˆ¤æ–­â€œç§»é™¤må—çŸ³å¤´åï¼Œæœ€å°é—´è·â‰¥midâ€ï¼Œé”»ç‚¼è¾¹ç•Œå¤„ç†èƒ½åŠ›ã€‚  
3. **P3629 å·¡é€»**ï¼š  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šäºŒåˆ†ç­”æ¡ˆ+å›¾è®ºï¼Œéœ€è¦ç”¨BFSéªŒè¯â€œèƒ½å¦åœ¨æ—¶é—´midå†…å®Œæˆå·¡é€»â€ï¼Œæ‹“å±•äºŒåˆ†ç­”æ¡ˆçš„åº”ç”¨åœºæ™¯ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªsmoothsetï¼‰**ï¼š  
â€œæˆ‘ä¸€å¼€å§‹æ²¡æƒ³åˆ°ç”¨äºŒåˆ†ç­”æ¡ˆï¼Œåæ¥æƒ³åˆ°â€˜æœ€å°åŒ–æœ€å¤§å€¼â€™çš„é—®é¢˜é€šå¸¸ç”¨äºŒåˆ†ï¼Œæ‰æ‰¾åˆ°äº†æ€è·¯ã€‚éªŒè¯å‡½æ•°çš„è´ªå¿ƒç­–ç•¥æ˜¯å…³é”®ï¼Œè¦å°½é‡å¡«æ»¡å½“å‰æˆ¿é—´ï¼Œå¦åˆ™ä¼šæµªè´¹å­¦ç”Ÿèµ„æºã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹â€”â€”**è¯†åˆ«é—®é¢˜ç±»å‹**ï¼ˆæœ€å°åŒ–æœ€å¤§å€¼ï¼‰æ˜¯è§£é¢˜çš„ç¬¬ä¸€æ­¥ï¼Œè€Œè´ªå¿ƒéªŒè¯è¦ç´§æ‰£â€œå½“å‰æœ€ä¼˜â€çš„åŸåˆ™ã€‚é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶ï¼Œå…ˆæƒ³â€œèƒ½ä¸èƒ½äºŒåˆ†ç­”æ¡ˆâ€ï¼Œå†æƒ³â€œæ€ä¹ˆéªŒè¯â€ï¼Œèƒ½å¿«é€Ÿæ‰¾åˆ°æ–¹å‘ã€‚


## ç»“è¯­  
é€šè¿‡è¿™é“é¢˜ï¼Œæˆ‘ä»¬å­¦ä¼šäº†ç”¨**äºŒåˆ†ç­”æ¡ˆ**æ‰¾æœ€å°çš„æœ€å¤§å€¼ï¼Œç”¨**è´ªå¿ƒç­–ç•¥**éªŒè¯å‡è®¾ï¼Œè¿˜é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚ç†è§£äº†ç®—æ³•æµç¨‹ã€‚è®°ä½ï¼šç®—æ³•çš„æ ¸å¿ƒæ˜¯â€œè§£å†³é—®é¢˜çš„æ€è·¯â€ï¼Œè€Œä¸æ˜¯æ­»è®°ç¡¬èƒŒä»£ç ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œä¸å¦¨å…ˆé—®è‡ªå·±ï¼šâ€œè¿™æ˜¯ä¸æ˜¯å¯ä»¥ç”¨äºŒåˆ†ç­”æ¡ˆï¼ŸéªŒè¯å‡½æ•°æ€ä¹ˆå†™ï¼Ÿâ€  

ç¼–ç¨‹çš„ä¹è¶£åœ¨äºä¸æ–­æ¢ç´¢ï¼Œç»§ç»­åŠ æ²¹å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š277.79ç§’
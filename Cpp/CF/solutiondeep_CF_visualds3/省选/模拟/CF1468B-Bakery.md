# é¢˜ç›®ä¿¡æ¯

# Bakery

## é¢˜ç›®æè¿°

Monocarp would like to open a bakery in his local area. But, at first, he should figure out whether he can compete with other shops.

Monocarp plans that the bakery will work for $ n $ days. On the $ i $ -th day, $ a_i $ loaves of bread will be baked in the morning before the opening. At the end of the $ n $ -th day, Monocarp will sell all the remaining bread that wasn't sold earlier with a huge discount.

Because of how bread is stored, the bakery seller sells the bread in the following order: firstly, he sells the loaves that were baked that morning; secondly, he sells the loaves that were baked the day before and weren't sold yet; then the loaves that were baked two days before and weren't sold yet, and so on. That's why some customers may buy a rather stale bread and will definitely spread negative rumors.

Let's define loaf spoilage as the difference between the day it was baked and the day it was sold. Then the unattractiveness of the bakery will be equal to the maximum spoilage among all loaves of bread baked at the bakery.

Suppose Monocarp's local area has consumer demand equal to $ k $ , it means that each day $ k $ customers will come to the bakery and each of them will ask for one loaf of bread (the loaves are sold according to the aforementioned order). If there is no bread left, then the person just doesn't buy anything. During the last day sale, all the remaining loaves will be sold (and they will still count in the calculation of the unattractiveness).

Monocarp analyzed his competitors' data and came up with $ m $ possible consumer demand values $ k_1, k_2, \dots, k_m $ , and now he'd like to calculate the unattractiveness of the bakery for each value of demand. Can you help him?

## è¯´æ˜/æç¤º

In the first example, let's describe what happens for couple consumer demands:

If consumer demand is equal to $ 1 $ :

- at day $ 1 $ : $ 5 $ loaves are baked and only $ 1 $ is sold with spoilage equal to $ 1 - 1 = 0 $ ;
- at day $ 2 $ : $ 4 $ loaves are left and $ 2 $ more are baked. Only $ 1 $ loaf was sold and it was the loaf baked today with spoilage $ 2 - 2 = 0 $ ;
- at day $ 3 $ : $ 4 $ loaves from the first day and $ 1 $ loaf from the second day left. One more loaf was baked and was sold this day with spoilage $ 3 - 3 = 0 $ ;
- at day $ 4 $ : $ 4 $ loaves from the first day and $ 1 $ loaf from the second day left. $ 3 $ more loaves were baked and one of them was sold this day with spoilage $ 4 - 4 = 0 $ ;
- at day $ 5 $ : $ 4 $ loaves from the first day, $ 1 $ loaf from the second day and $ 2 $ loaves from the fourth day left. $ 7 $ more loaves were baked and, since it's the last day, all $ 14 $ loaves were sold. $ 4 $ loaves from the first day have the maximum spoilage equal to $ 5 - 1 = 4 $ .

 In total, the unattractiveness of the bakery will be equal to $ 4 $ .If consumer demand is equal to $ 10 $ then all baked bread will be sold in the day it was baked and will have spoilage equal to $ 0 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 4
5 2 1 3 7
1 3 4 10```

### è¾“å‡º

```
4 2 1 0```

## æ ·ä¾‹ #2

### è¾“å…¥

```
8 9
3 1 4 1 5 9 2 6
1 2 3 4 5 6 7 8 9```

### è¾“å‡º

```
7 5 3 3 2 1 1 1 0```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šBakery æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

<introduction>
ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œBakeryâ€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯è®¡ç®—ä¸åŒæ¶ˆè´¹è€…éœ€æ±‚ä¸‹ï¼Œé¢åŒ…åº—çš„â€œæœ€å¤§ä¸æ–°é²œåº¦â€ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚
</introduction>

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`ç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼ˆç¦»çº¿å¤„ç†ä¸æ•°æ®ç»“æ„ç»´æŠ¤ï¼‰`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³â€œBakeryâ€é—®é¢˜çš„å…³é”®åœ¨äºé«˜æ•ˆå¤„ç†å¤šä¸ªæ¶ˆè´¹è€…éœ€æ±‚å€¼ï¼ˆkï¼‰çš„æŸ¥è¯¢ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªkå€¼è®¡ç®—æ‰€æœ‰é¢åŒ…çš„æœ€å¤§â€œä¸æ–°é²œåº¦â€ï¼ˆå³é¢åŒ…çƒ˜ç„™æ—¥ä¸å–å‡ºæ—¥çš„æœ€å¤§å·®å€¼ï¼‰ã€‚ç›´æ¥æš´åŠ›æ¨¡æ‹Ÿæ¯ä¸ªkå€¼ä¼šè¶…æ—¶ï¼Œå› æ­¤éœ€è¦å€ŸåŠ©â€œç¦»çº¿å¤„ç†â€å’Œâ€œæ•°æ®ç»“æ„ç»´æŠ¤â€æŠ€å·§ã€‚  
> 
> é¢˜ç›®ä¸­çš„å…³é”®è§‚å¯Ÿæ˜¯ï¼šå½“kè¶Šå¤§ï¼Œé¢åŒ…è¶Šå®¹æ˜“åœ¨å½“å¤©å–å®Œï¼ˆä¸æ–°é²œåº¦ä¸º0ï¼‰ï¼›å½“kè¶Šå°ï¼Œé¢åŒ…è¶Šå¯èƒ½ç§¯å‹ï¼Œå¯¼è‡´ä¸æ–°é²œåº¦å¢åŠ ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†kå€¼æŒ‰ä»å¤§åˆ°å°æ’åºï¼Œå€’åºå¤„ç†ï¼ŒåŠ¨æ€ç»´æŠ¤é¢åŒ…çš„ç§¯å‹æƒ…å†µï¼ˆåˆå¹¶è¿ç»­æ— æ³•å½“å¤©å–å®Œçš„å¤©æ•°å—ï¼‰ã€‚  
> 
> æ ¸å¿ƒç®—æ³•æµç¨‹ï¼š  
> 1. **ç¦»çº¿å¤„ç†**ï¼šå°†æ‰€æœ‰kå€¼æ’åºï¼Œä»å¤§åˆ°å°å¤„ç†ã€‚  
> 2. **å—åˆå¹¶ç»´æŠ¤**ï¼šç”¨å¹¶æŸ¥é›†å’Œsetç»´æŠ¤â€œå—â€ï¼ˆè¿ç»­å¤©æ•°çš„é¢åŒ…æ€»é‡ã€å¤©æ•°ï¼‰ï¼Œå½“å½“å‰å—çš„é¢åŒ…æ€»é‡è¶…è¿‡kÃ—å¤©æ•°æ—¶ï¼Œåˆå¹¶åˆ°ä¸‹ä¸€ä¸ªå—ã€‚  
> 3. **æœ€å¤§é—´éš”è®¡ç®—**ï¼šç»´æŠ¤æ‰€æœ‰å—çš„å¤©æ•°æœ€å¤§å€¼ï¼Œå³ä¸ºå½“å‰kå¯¹åº”çš„æœ€å¤§ä¸æ–°é²œåº¦ã€‚  
> 
> å¯è§†åŒ–è®¾è®¡æ€è·¯ï¼šç”¨8ä½åƒç´ é£å±•ç¤ºæ¯å¤©çš„é¢åŒ…å—ï¼ˆä¸åŒé¢œè‰²è¡¨ç¤ºä¸åŒçƒ˜ç„™æ—¥ï¼‰ï¼Œåˆå¹¶å—æ—¶ç”¨â€œæ»‘åŠ¨åˆå¹¶â€åŠ¨ç”»ï¼ˆå¦‚å·¦è¾¹å—æ»‘å…¥å³è¾¹å—ï¼‰ï¼Œé«˜äº®å½“å‰å¤„ç†çš„kå€¼å’Œåˆå¹¶åçš„å—ã€‚å…³é”®æ“ä½œï¼ˆå¦‚å—åˆå¹¶ï¼‰ä¼´éšâ€œå®â€çš„åƒç´ éŸ³æ•ˆï¼Œç›®æ ‡è¾¾æˆï¼ˆè®¡ç®—å®Œæ‰€æœ‰kå€¼ï¼‰æ—¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

<eval_intro>
æˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰æ–¹é¢ç­›é€‰äº†ä»¥ä¸‹ä¼˜è´¨é¢˜è§£ï¼š
</eval_intro>

**é¢˜è§£ä¸€ï¼šä½œè€… zhimao**
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£æ€è·¯éå¸¸å·§å¦™ï¼Œåˆ©ç”¨ç¦»çº¿å¤„ç†å’Œå¹¶æŸ¥é›†é«˜æ•ˆè§£å†³é—®é¢˜ã€‚ä»£ç ä¸­é€šè¿‡`set`ç»´æŠ¤å—çš„ä¼˜å…ˆçº§ï¼ˆæŒ‰é¢åŒ…æ€»é‡ä¸å¤©æ•°çš„æ¯”å€¼æ’åºï¼‰ï¼Œå¹¶ç”¨å¹¶æŸ¥é›†åˆå¹¶å—ï¼Œé€»è¾‘ç®€æ´ã€‚å˜é‡å‘½åï¼ˆå¦‚`a[x]`è¡¨ç¤ºå—xçš„é¢åŒ…æ€»é‡ï¼Œ`c[x]`è¡¨ç¤ºå—çš„å¤©æ•°ï¼‰æ¸…æ™°æ˜“æ‡‚ã€‚ç®—æ³•å¤æ‚åº¦ä¸ºO((n+m) log n)ï¼Œé€‚åˆç«èµ›åœºæ™¯ã€‚äº®ç‚¹åœ¨äºç¦»çº¿å€’åºå¤„ç†kå€¼çš„æ€è·¯ï¼Œä»¥åŠç”¨`set`åŠ¨æ€ç»´æŠ¤å¾…åˆå¹¶å—çš„é«˜æ•ˆæ€§ã€‚

**é¢˜è§£äºŒï¼šä½œè€… Fido_Puppy**
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£ä»â€œæ¸…ç©ºç‚¹â€ï¼ˆæŸå¤©é¢åŒ…è¢«å®Œå…¨å–å®Œçš„æ—¥æœŸï¼‰å…¥æ‰‹ï¼Œé€šè¿‡åˆ†ææ¸…ç©ºç‚¹çš„æ€§è´¨ï¼ˆç›¸é‚»æ¸…ç©ºç‚¹çš„æœ€å¤§é—´éš”å³ä¸ºç­”æ¡ˆï¼‰ï¼Œç»“åˆå‡¸åŒ…ä¼˜åŒ–è®¡ç®—æ¯ä¸ªç‚¹çš„é™åˆ¶Lï¼ˆkçš„æœ€å°å€¼ï¼‰ï¼Œæœ€ååŒæŒ‡é’ˆå¤„ç†kå€¼ã€‚æ€è·¯æ¸…æ™°ï¼Œæ•°å­¦æ¨å¯¼ä¸¥è°¨ã€‚ä»£ç è™½æœªç›´æ¥ç»™å‡ºï¼Œä½†é€»è¾‘è§£é‡Šå¯¹ç†è§£é—®é¢˜æœ¬è´¨æœ‰å¾ˆå¤§å¸®åŠ©ã€‚äº®ç‚¹åœ¨äºå°†é—®é¢˜è½¬åŒ–ä¸ºæ¸…ç©ºç‚¹é—´éš”é—®é¢˜ï¼Œé™ä½äº†å¤æ‚åº¦ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

<difficulty_intro>
è§£å†³æ­¤é¢˜çš„å…³é”®åœ¨äºç†è§£å¦‚ä½•é«˜æ•ˆç»´æŠ¤é¢åŒ…çš„ç§¯å‹æƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸‰ä¸ªæ ¸å¿ƒéš¾ç‚¹åŠåº”å¯¹ç­–ç•¥ï¼š
</difficulty_intro>

1.  **éš¾ç‚¹1ï¼šå¦‚ä½•å®šä¹‰â€œå—â€å¹¶ç»´æŠ¤å…¶å±æ€§ï¼Ÿ**  
    * **åˆ†æ**ï¼šå—éœ€è¦è®°å½•ä¸‰ä¸ªå±æ€§ï¼šæ€»é¢åŒ…æ•°ï¼ˆxï¼‰ã€åŒ…å«çš„å¤©æ•°ï¼ˆyï¼‰ã€æœ€åä¸€å¤©çš„æ—¥æœŸï¼ˆzï¼‰ã€‚å½“å—çš„æ€»é¢åŒ…æ•°è¶…è¿‡kÃ—å¤©æ•°æ—¶ï¼ˆx > yÃ—kï¼‰ï¼Œéœ€è¦åˆå¹¶åˆ°ä¸‹ä¸€ä¸ªå—ã€‚é€šè¿‡å¹¶æŸ¥é›†ç»´æŠ¤å—çš„çˆ¶èŠ‚ç‚¹ï¼Œ`set`ç»´æŠ¤å—çš„ä¼˜å…ˆçº§ï¼ˆæŒ‰x/yé™åºï¼‰ï¼Œå¯é«˜æ•ˆæ‰¾åˆ°éœ€è¦åˆå¹¶çš„å—ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå—çš„å®šä¹‰éœ€è¦†ç›–å…³é”®ä¿¡æ¯ï¼ˆæ€»é‡ã€å¤©æ•°ã€æ—¥æœŸï¼‰ï¼Œä»¥ä¾¿å¿«é€Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦åˆå¹¶ã€‚

2.  **éš¾ç‚¹2ï¼šå¦‚ä½•ç¦»çº¿å¤„ç†å¤šä¸ªkå€¼ï¼Ÿ**  
    * **åˆ†æ**ï¼škå€¼è¶Šå¤§ï¼Œéœ€è¦åˆå¹¶çš„å—è¶Šå°‘ã€‚å°†kå€¼ä»å¤§åˆ°å°æ’åºï¼Œå€’åºå¤„ç†ï¼Œæ¯æ¬¡å¤„ç†æ›´å°çš„kæ—¶ï¼Œå¯èƒ½éœ€è¦åˆå¹¶æ›´å¤šå—ã€‚è¿™ç§â€œå€’åºå¤„ç†â€é¿å…äº†é‡å¤è®¡ç®—ï¼Œåˆ©ç”¨äº†kå€¼çš„å•è°ƒæ€§ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¦»çº¿å¤„ç†çš„å…³é”®æ˜¯åˆ©ç”¨è¾“å…¥çš„å•è°ƒæ€§ï¼ˆå¦‚kçš„é™åºï¼‰ï¼Œå‡å°‘é‡å¤æ“ä½œã€‚

3.  **éš¾ç‚¹3ï¼šå¦‚ä½•è®¡ç®—æœ€å¤§ä¸æ–°é²œåº¦ï¼Ÿ**  
    * **åˆ†æ**ï¼šæœ€å¤§ä¸æ–°é²œåº¦ç­‰äºç›¸é‚»å—çš„æœ€å¤§å¤©æ•°é—´éš”å‡1ã€‚é€šè¿‡`multiset`ç»´æŠ¤æ‰€æœ‰å—çš„å¤©æ•°ï¼Œå–æœ€å¤§å€¼å³å¯ã€‚æœ€åä¸€å¤©çš„ä¿ƒé”€éœ€å•ç‹¬å¤„ç†ï¼ˆæ‰€æœ‰å‰©ä½™é¢åŒ…çš„å¤©æ•°é—´éš”ä¸ºæ€»å¤©æ•°ï¼‰ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨`multiset`åŠ¨æ€ç»´æŠ¤æœ€å¤§å€¼ï¼Œå¯é«˜æ•ˆè·å–å½“å‰çŠ¶æ€ä¸‹çš„æœ€å¤§é—´éš”ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **ç¦»çº¿å¤„ç†**ï¼šå½“è¾“å…¥å…·æœ‰å•è°ƒæ€§ï¼ˆå¦‚kå€¼é™åºï¼‰æ—¶ï¼Œå€’åºå¤„ç†å¯å¤§å¹…å‡å°‘è®¡ç®—é‡ã€‚  
- **æ•°æ®ç»“æ„é€‰æ‹©**ï¼š`set`ç”¨äºç»´æŠ¤å¾…åˆå¹¶å—çš„ä¼˜å…ˆçº§ï¼Œ`multiset`ç”¨äºå¿«é€Ÿè·å–æœ€å¤§å€¼ï¼Œ`å¹¶æŸ¥é›†`ç”¨äºåˆå¹¶å—ï¼Œä¸‰è€…ç»“åˆå®ç°é«˜æ•ˆæ“ä½œã€‚  
- **é—®é¢˜è½¬åŒ–**ï¼šå°†â€œæœ€å¤§ä¸æ–°é²œåº¦â€è½¬åŒ–ä¸ºâ€œç›¸é‚»å—çš„æœ€å¤§å¤©æ•°é—´éš”â€ï¼Œç®€åŒ–äº†é—®é¢˜æ¨¡å‹ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

<code_intro_overall>
ä»¥ä¸‹æ˜¯ç»¼åˆä¼˜è´¨é¢˜è§£æ€è·¯çš„é€šç”¨æ ¸å¿ƒå®ç°ï¼ŒåŸºäºç¦»çº¿å¤„ç†å’Œå¹¶æŸ¥é›†ç»´æŠ¤å—çš„é€»è¾‘ã€‚
</code_intro_overall>

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šæ­¤ä»£ç ç»¼åˆäº†zhimaoé¢˜è§£çš„æ€è·¯ï¼Œé€šè¿‡å¹¶æŸ¥é›†å’Œsetç»´æŠ¤å—çš„åˆå¹¶ï¼Œç¦»çº¿å¤„ç†kå€¼ï¼Œé«˜æ•ˆè®¡ç®—æ¯ä¸ªkå¯¹åº”çš„æœ€å¤§ä¸æ–°é²œåº¦ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
    ```cpp
    #include <bits/stdc++.h>
    using namespace std;

    const int MAXN = 1e5 + 5;
    int n, m, ans[MAXN], fa[MAXN], c[MAXN]; // c[x]ï¼šå—xçš„å¤©æ•°ï¼›fa[x]ï¼šå¹¶æŸ¥é›†çˆ¶èŠ‚ç‚¹
    long long a[MAXN]; // a[x]ï¼šå—xçš„æ€»é¢åŒ…æ•°
    struct Cmp { // å®šä¹‰setçš„æ¯”è¾ƒè§„åˆ™ï¼ˆæŒ‰a[x]/c[x]é™åºï¼‰
        bool operator()(int x, int y) const {
            if (a[x] * c[y] != a[y] * c[x]) 
                return a[x] * c[y] > a[y] * c[x];
            return x < y; // é¿å…é‡å¤
        }
    };
    set<int, Cmp> s1; // ç»´æŠ¤å¾…å¤„ç†çš„å—
    multiset<int> s2; // ç»´æŠ¤å—çš„å¤©æ•°ï¼Œç”¨äºå¿«é€Ÿå–æœ€å¤§å€¼

    int find(int x) { // å¹¶æŸ¥é›†æ‰¾æ ¹
        return fa[x] == x ? x : fa[x] = find(fa[x]);
    }

    int main() {
        scanf("%d%d", &n, &m);
        for (int i = 1; i <= n; ++i) scanf("%lld", &a[i]);
        vector<pair<int, int>> ks(m);
        for (int i = 0; i < m; ++i) {
            scanf("%d", &ks[i].first);
            ks[i].second = i;
        }
        sort(ks.begin(), ks.end(), greater<>()); // æŒ‰ké™åºæ’åº

        // åˆå§‹åŒ–æ¯ä¸ªå—ä¸ºå•ç‹¬ä¸€å¤©
        for (int i = 1; i <= n; ++i) {
            fa[i] = i;
            c[i] = 1;
            s1.insert(i);
            s2.insert(1);
        }
        int extra = 0; // æœ€åä¸€å¤©ä¿ƒé”€çš„å¤©æ•°ï¼ˆåˆå§‹ä¸º0ï¼‰

        for (auto &[k, idx] : ks) {
            while (!s1.empty()) {
                int x = *s1.begin();
                if (a[x] <= 1LL * k * c[x]) break; // å½“å‰å—æ»¡è¶³kï¼Œæ— éœ€åˆå¹¶
                s1.erase(x);
                s2.erase(s2.find(c[x]));
                int p = find(x + 1); // åˆå¹¶åˆ°ä¸‹ä¸€ä¸ªå—
                if (p <= n) { // ä¸‹ä¸€ä¸ªå—å­˜åœ¨
                    s1.erase(p);
                    s2.erase(s2.find(c[p]));
                    a[p] += a[x];
                    c[p] += c[x];
                    s1.insert(p);
                    s2.insert(c[p]);
                    fa[x] = p;
                } else { // åˆå¹¶åˆ°æœ€åä¸€å¤©ä¿ƒé”€
                    extra += c[x];
                }
            }
            // è®¡ç®—å½“å‰kçš„æœ€å¤§ä¸æ–°é²œåº¦ï¼šmax(extra, s2ä¸­çš„æœ€å¤§å€¼) - 1
            int max_len = max(extra, s2.empty() ? 0 : *s2.rbegin());
            ans[idx] = max_len - 1;
        }

        for (int i = 0; i < m; ++i) printf("%d ", ans[i]);
        return 0;
    }
    ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç é¦–å…ˆè¯»å–è¾“å…¥å¹¶å°†kå€¼æŒ‰é™åºæ’åºã€‚åˆå§‹åŒ–æ¯ä¸ªå—ä¸ºå•ç‹¬ä¸€å¤©ï¼Œç”¨`set`ç»´æŠ¤å—çš„ä¼˜å…ˆçº§ï¼ˆæŒ‰æ€»é¢åŒ…æ•°/å¤©æ•°é™åºï¼‰ï¼Œ`multiset`ç»´æŠ¤å—çš„å¤©æ•°ã€‚å€’åºå¤„ç†æ¯ä¸ªkå€¼æ—¶ï¼Œä¸æ–­åˆå¹¶ä¸æ»¡è¶³æ¡ä»¶çš„å—ï¼ˆæ€»é¢åŒ…æ•°è¶…è¿‡kÃ—å¤©æ•°ï¼‰ï¼Œç›´åˆ°æ‰€æœ‰å—æ»¡è¶³æ¡ä»¶ã€‚æœ€åé€šè¿‡`multiset`è·å–æœ€å¤§å—å¤©æ•°ï¼Œè®¡ç®—æœ€å¤§ä¸æ–°é²œåº¦ã€‚

---
<code_intro_selected>
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‰–æzhimaoé¢˜è§£çš„æ ¸å¿ƒä»£ç ç‰‡æ®µï¼Œç†è§£å…¶å…³é”®é€»è¾‘ã€‚
</code_intro_selected>

**é¢˜è§£ä¸€ï¼šä½œè€… zhimao**
* **äº®ç‚¹**ï¼šå·§å¦™åˆ©ç”¨`set`ç»´æŠ¤å—çš„ä¼˜å…ˆçº§ï¼Œ`multiset`å¿«é€Ÿè·å–æœ€å¤§å¤©æ•°ï¼Œ`å¹¶æŸ¥é›†`åˆå¹¶å—ï¼Œå®ç°é«˜æ•ˆç¦»çº¿å¤„ç†ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
    ```cpp
    struct Cmp { 
        bool operator()(int x, int y) const {
            return a[x] * c[y] != a[y] * c[x] ? a[x] * c[y] > a[y] * c[x] : x < y;
        }
    };
    set<int, Cmp> s1; 
    multiset<int> s2;

    int find(int x) { 
        return fa[x] == x ? x : fa[x] = find(fa[x]);
    }

    // åˆå¹¶å—çš„é€»è¾‘
    while (!s1.empty()) {
        int x = *s1.begin();
        if (a[x] <= 1LL * k * c[x]) break; 
        s1.erase(x);
        s2.erase(s2.find(c[x]));
        int p = find(x + 1); 
        if (p <= n) { 
            s1.erase(p);
            s2.erase(s2.find(c[p]));
            a[p] += a[x];
            c[p] += c[x];
            s1.insert(p);
            s2.insert(c[p]);
            fa[x] = p;
        } else { 
            extra += c[x];
        }
    }
    ```
* **ä»£ç è§£è¯»**ï¼š  
  `Cmp`ç»“æ„ä½“å®šä¹‰äº†å—çš„æ¯”è¾ƒè§„åˆ™ï¼ˆæŒ‰æ€»é¢åŒ…æ•°/å¤©æ•°çš„æ¯”å€¼é™åºï¼‰ï¼Œç¡®ä¿`set`ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æœ€éœ€è¦åˆå¹¶çš„å—ã€‚`find`å‡½æ•°é€šè¿‡å¹¶æŸ¥é›†æ‰¾åˆ°å—çš„æ ¹èŠ‚ç‚¹ã€‚åˆå¹¶é€»è¾‘ä¸­ï¼Œå½“å½“å‰å—çš„æ€»é¢åŒ…æ•°è¶…è¿‡kÃ—å¤©æ•°æ—¶ï¼Œåˆå¹¶åˆ°ä¸‹ä¸€ä¸ªå—ï¼ˆæˆ–æœ€åä¸€å¤©ä¿ƒé”€ï¼‰ï¼Œæ›´æ–°å—çš„å±æ€§å¹¶ç»´æŠ¤`set`å’Œ`multiset`çš„çŠ¶æ€ã€‚  
  ä¾‹å¦‚ï¼Œ`s1.erase(x)`ç§»é™¤å½“å‰å—ï¼Œ`s2.erase(s2.find(c[x]))`ç§»é™¤å½“å‰å—çš„å¤©æ•°ï¼Œåˆå¹¶åæ›´æ–°ç›®æ ‡å—çš„æ€»é¢åŒ…æ•°å’Œå¤©æ•°ï¼Œå¹¶é‡æ–°æ’å…¥`set`å’Œ`multiset`ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`set`å’Œ`multiset`çš„ç»“åˆä½¿ç”¨ï¼Œèƒ½é«˜æ•ˆç»´æŠ¤åŠ¨æ€å˜åŒ–çš„å—ä¿¡æ¯ï¼›å¹¶æŸ¥é›†åˆ™ç¡®ä¿å—åˆå¹¶çš„å¿«é€ŸæŸ¥æ‰¾å’Œæ›´æ–°ã€‚

---

## 5\. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

<visualization_intro>
ä¸ºäº†ç›´è§‚ç†è§£å—åˆå¹¶çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªâ€œåƒç´ é¢åŒ…åº—â€åŠ¨ç”»ï¼Œç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºæ¯å¤©çš„é¢åŒ…å—åˆå¹¶è¿‡ç¨‹ï¼
</visualization_intro>

  * **åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜**ï¼š`åƒç´ é¢åŒ…åº—çš„å—åˆå¹¶ä¹‹æ—…`

  * **æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼šå±•ç¤ºkå€¼ä»å¤§åˆ°å°å˜åŒ–æ—¶ï¼Œé¢åŒ…å—å¦‚ä½•å› æ— æ³•æ»¡è¶³kå€¼è€Œåˆå¹¶ï¼Œæœ€ç»ˆè®¡ç®—æœ€å¤§ä¸æ–°é²œåº¦ã€‚

  * **è®¾è®¡æ€è·¯ç®€è¿°**ï¼šé‡‡ç”¨8ä½åƒç´ é£ï¼ˆFCçº¢ç™½æœºè‰²è°ƒï¼‰ï¼Œç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºä¸åŒçƒ˜ç„™æ—¥çš„é¢åŒ…ï¼ˆå¦‚çº¢è‰²=ç¬¬1å¤©ï¼Œç»¿è‰²=ç¬¬2å¤©ç­‰ï¼‰ã€‚åˆå¹¶å—æ—¶ï¼Œå·¦è¾¹å—æ»‘åŠ¨åˆ°å³è¾¹å—çš„ä½ç½®ï¼Œé¢œè‰²èåˆï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚é€šè¿‡æ§åˆ¶é¢æ¿ï¼ˆå•æ­¥/è‡ªåŠ¨æ’­æ”¾ã€è°ƒé€Ÿï¼‰ï¼Œå­¦ä¹ è€…å¯é€æ­¥è§‚å¯Ÿå—åˆå¹¶çš„æ¯ä¸€æ­¥ã€‚

  * **åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹**ï¼š

    1.  **åœºæ™¯åˆå§‹åŒ–**ï¼š  
        - å±å¹•å·¦ä¾§æ˜¾ç¤ºnä¸ªå°åƒç´ å—ï¼ˆæ¯è¡Œä¸€ä¸ªï¼Œä»£è¡¨ç¬¬1~nå¤©ï¼‰ï¼Œæ¯ä¸ªå—æ ‡æœ‰çƒ˜ç„™æ—¥ï¼ˆå¦‚â€œDay1â€ï¼‰å’Œé¢åŒ…æ•°ï¼ˆå¦‚â€œ5â€ï¼‰ã€‚  
        - å³ä¾§æ˜¾ç¤ºæ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ï¼Œåº•éƒ¨æ˜¾ç¤ºå½“å‰kå€¼å’Œæœ€å¤§ä¸æ–°é²œåº¦ã€‚  
        - æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§ç›ä¸½ã€‹ç»å…¸æ—‹å¾‹ï¼‰ã€‚

    2.  **kå€¼åˆå§‹åŒ–ä¸å—åˆå¹¶**ï¼š  
        - åˆå§‹kä¸ºæœ€å¤§æŸ¥è¯¢å€¼ï¼ˆå¦‚æ ·ä¾‹1çš„10ï¼‰ï¼Œæ‰€æœ‰å—å•ç‹¬å­˜åœ¨ï¼Œä¸æ–°é²œåº¦ä¸º0ï¼ˆåƒç´ å—é—ªçƒç»¿è‰²ï¼‰ã€‚  
        - å½“kå‡å°ï¼ˆå¦‚å˜ä¸º4ï¼‰ï¼Œæ£€æŸ¥æ¯ä¸ªå—æ˜¯å¦æ»¡è¶³æ€»é¢åŒ…æ•°â‰¤kÃ—å¤©æ•°ã€‚ä¸æ»¡è¶³çš„å—ï¼ˆå¦‚Day1çš„5>4Ã—1ï¼‰å¼€å§‹åˆå¹¶ï¼š  
          - è¯¥å—ï¼ˆçº¢è‰²ï¼‰é«˜äº®é—ªçƒï¼Œæ’­æ”¾â€œæ»´ç­”â€éŸ³æ•ˆï¼Œç„¶åå‘å·¦æ»‘åŠ¨åˆå¹¶åˆ°ä¸‹ä¸€ä¸ªå—ï¼ˆç»¿è‰²ï¼‰ï¼Œé¢œè‰²å˜ä¸ºæ©™çº¢è‰²ï¼ˆæ··åˆè‰²ï¼‰ï¼Œæ˜¾ç¤ºæ–°çš„æ€»é¢åŒ…æ•°ï¼ˆ5+2=7ï¼‰å’Œå¤©æ•°ï¼ˆ2ï¼‰ã€‚  
          - `set`å’Œ`multiset`çš„å˜åŒ–åŒæ­¥æ˜¾ç¤ºåœ¨å±å¹•å³ä¾§ï¼ˆå¦‚å—1è¢«ç§»é™¤ï¼Œå—2æ›´æ–°ï¼‰ã€‚

    3.  **å…³é”®æ­¥éª¤é«˜äº®**ï¼š  
        - å½“å‰å¤„ç†çš„kå€¼åœ¨é¡¶éƒ¨æ»šåŠ¨æ˜¾ç¤ºï¼ˆå¦‚â€œk=4â€ï¼‰ã€‚  
        - åˆå¹¶åçš„å—ç”¨ç²—è¾¹æ¡†é«˜äº®ï¼Œæ˜¾ç¤ºå…¶æ€»é¢åŒ…æ•°å’Œå¤©æ•°ï¼ˆå¦‚â€œ7é¢åŒ…ï¼Œ2å¤©â€ï¼‰ã€‚  
        - å½“åˆå¹¶åˆ°æœ€åä¸€å¤©æ—¶ï¼Œå‰©ä½™é¢åŒ…ç”¨é»„è‰²å—è¡¨ç¤ºï¼ˆä¿ƒé”€ï¼‰ï¼Œæ˜¾ç¤ºâ€œä¿ƒé”€æ—¥ï¼â€æ–‡å­—æç¤ºã€‚

    4.  **ç»“æœè®¡ç®—**ï¼š  
        - æ‰€æœ‰å—å¤„ç†å®Œæˆåï¼Œæœ€å¤§å—çš„å¤©æ•°ï¼ˆå¦‚æ ·ä¾‹1çš„5å¤©ï¼‰æ˜¾ç¤ºä¸ºâ€œæœ€å¤§å¤©æ•°â€ï¼Œæœ€å¤§ä¸æ–°é²œåº¦ä¸º5-1=4ï¼ˆæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œåƒç´ çƒŸèŠ±åŠ¨ç”»ï¼‰ã€‚

  * **æ—ç™½æç¤º**ï¼š  
      - ï¼ˆå•æ­¥æ—¶ï¼‰â€œå½“å‰kå€¼ä¸º4ï¼Œæ£€æŸ¥Day1çš„å—ï¼š5é¢åŒ…>4Ã—1å¤©ï¼Œéœ€è¦åˆå¹¶åˆ°Day2ï¼â€  
      - ï¼ˆåˆå¹¶æ—¶ï¼‰â€œçœ‹ï¼Œçº¢è‰²å—æ»‘å…¥ç»¿è‰²å—ï¼Œç°åœ¨æ€»é¢åŒ…æ•°æ˜¯7ï¼Œå¤©æ•°æ˜¯2ï¼â€  
      - ï¼ˆç»“æœæ—¶ï¼‰â€œæœ€å¤§å¤©æ•°æ˜¯5å¤©ï¼Œæ‰€ä»¥æœ€å¤§ä¸æ–°é²œåº¦æ˜¯5-1=4ï¼â€

<visualization_conclusion>
é€šè¿‡è¿™ä¸ªåƒç´ åŠ¨ç”»ï¼Œæˆ‘ä»¬èƒ½ç›´è§‚çœ‹åˆ°å—åˆå¹¶çš„æ¯ä¸€æ­¥ï¼Œç†è§£kå€¼å˜åŒ–å¦‚ä½•å½±å“é¢åŒ…çš„ç§¯å‹å’Œä¸æ–°é²œåº¦è®¡ç®—ã€‚
</visualization_conclusion>

---

## 6\. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

<similar_problems_intro>
æœ¬é¢˜çš„ç¦»çº¿å¤„ç†å’Œå—åˆå¹¶æ€è·¯ï¼Œå¯è¿ç§»åˆ°å…¶ä»–éœ€è¦åŠ¨æ€ç»´æŠ¤åŒºé—´çš„é—®é¢˜ä¸­ã€‚
</similar_problems_intro>

  * **é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»**ï¼š  
      - **ç¦»çº¿å¤„ç†**ï¼šé€‚ç”¨äºå¤šæŸ¥è¯¢ä¸”è¾“å…¥å…·æœ‰å•è°ƒæ€§çš„é—®é¢˜ï¼ˆå¦‚å¤šä¸ªkå€¼ã€æ—¶é—´åºåˆ—æŸ¥è¯¢ï¼‰ã€‚  
      - **å—åˆå¹¶**ï¼šå½“é—®é¢˜æ¶‰åŠåŒºé—´çš„åŠ¨æ€åˆå¹¶ï¼ˆå¦‚è¿ç»­ç›¸åŒå±æ€§çš„åŒºé—´ï¼‰ï¼Œå¯ç”¨å¹¶æŸ¥é›†+setç»´æŠ¤ã€‚  
      - **æœ€å¤§å€¼ç»´æŠ¤**ï¼šç”¨`multiset`æˆ–ä¼˜å…ˆé˜Ÿåˆ—åŠ¨æ€ç»´æŠ¤æœ€å¤§å€¼ï¼Œå¿«é€Ÿè·å–å½“å‰çŠ¶æ€çš„å…³é”®æŒ‡æ ‡ã€‚

  * **ç»ƒä¹ æ¨è (æ´›è°·)**ï¼š
    1.  **æ´›è°· P1972 [SDOI2009]HHçš„é¡¹é“¾**  
          * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç¦»çº¿å¤„ç†å¤šä¸ªåŒºé—´æŸ¥è¯¢ï¼Œç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤å‡ºç°æ¬¡æ•°ï¼Œä¸æœ¬é¢˜ç¦»çº¿æ€è·¯ç±»ä¼¼ã€‚  
    2.  **æ´›è°· P3919 å¯æŒä¹…åŒ–çº¿æ®µæ ‘**  
          * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŠ¨æ€ç»´æŠ¤åŒºé—´ä¿¡æ¯ï¼Œå­¦ä¹ å¯æŒä¹…åŒ–æ•°æ®ç»“æ„çš„åº”ç”¨ï¼Œæå‡æ•°æ®ç»“æ„è®¾è®¡èƒ½åŠ›ã€‚  
    3.  **æ´›è°· P5851 [USACO19DEC]Greedy Pie Eaters**  
          * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ¶‰åŠåŒºé—´åŠ¨æ€è§„åˆ’å’Œåˆå¹¶ï¼Œä¸æœ¬é¢˜å—åˆå¹¶æ€è·¯æœ‰å…±é€šä¹‹å¤„ã€‚

---

## 7\. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

<insights_intro>
æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®çš„ä½œè€…ä¸ªäººå¿ƒå¾—åˆ†äº«éƒ¨åˆ†ã€‚
</insights_intro>

---

<conclusion>
æœ¬æ¬¡å…³äºâ€œBakeryâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£ç¦»çº¿å¤„ç†ã€å—åˆå¹¶å’Œæ•°æ®ç»“æ„ç»´æŠ¤çš„æ ¸å¿ƒæŠ€å·§ã€‚è®°ä½ï¼Œå¤šåŠ¨æ‰‹å®è·µã€è§‚å¯ŸåŠ¨ç”»æ¼”ç¤ºï¼Œèƒ½æ›´å¿«æŒæ¡è¿™ç±»é—®é¢˜ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æŒ‘æˆ˜æ–°çš„ç¼–ç¨‹é¢˜ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š133.61ç§’
# é¢˜ç›®ä¿¡æ¯

# Majority

## é¢˜ç›®æè¿°

Everyone was happy coding, until suddenly a power shortage happened and the best competitive programming site went down. Fortunately, a system administrator bought some new equipment recently, including some UPSs. Thus there are some servers that are still online, but we need all of them to be working in order to keep the round rated.

Imagine the servers being a binary string $ s $ of length $ n $ . If the $ i $ -th server is online, then $ s_i = 1 $ , and $ s_i = 0 $ otherwise.

A system administrator can do the following operation called electricity spread, that consists of the following phases:

- Select two servers at positions $ 1 \le i < j \le n $ such that both are online (i.e. $ s_i=s_j=1 $ ). The spread starts only from online servers.
- Check if we have enough power to make the spread. We consider having enough power if the number of turned on servers in range $ [i, j] $ is at least the number of turned off servers in range $ [i, j] $ . More formally, check whether $ 2 \cdot (s_i + s_{i+1} + \ldots + s_j) \ge j - i + 1 $ .
- If the check is positive, turn on all the offline servers in range $ [i, j] $ . More formally, make $ s_k := 1 $ for all $ k $ from $ i $ to $ j $ .

We call a binary string $ s $ of length $ n $ rated if we can turn on all servers (i.e. make $ s_i = 1 $ for $ 1 \le i \le n $ ) using the electricity spread operation any number of times (possibly, $ 0 $ ). Your task is to find the number of rated strings of length $ n $ modulo $ m $ .

## è¯´æ˜/æç¤º

In the first example, the only rated string is 11. So the answer is $ 1 $ .

In the second example, the rated strings are:

- 111;
- 101, because we can perform an operation with $ i = 1 $ and $ j = 3 $ .

 So the answer is $ 2 $ .In the third sample, the rated strings are:

- 1001;
- 1111;
- 1011;
- 1101.

 So the answer is $ 4 $ .

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 100```

### è¾“å‡º

```
1```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 10```

### è¾“å‡º

```
2```

## æ ·ä¾‹ #3

### è¾“å…¥

```
4 3271890```

### è¾“å‡º

```
4```

## æ ·ä¾‹ #4

### è¾“å…¥

```
17 123456```

### è¾“å‡º

```
32347```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šMajority æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## å¼•è¨€
å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Kayï¼ä»Šå¤©æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ˜¯**Majority**â€”â€”ä¸€ä¸ªå…³äºâ€œæœåŠ¡å™¨é€šç”µâ€çš„01ä¸²è®¡æ•°é—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹ï¼šä½ æœ‰ä¸€æ’æœåŠ¡å™¨ï¼Œæœ‰çš„å¼€ç€ï¼ˆç”¨`1`è¡¨ç¤ºï¼‰ã€æœ‰çš„å…³ç€ï¼ˆç”¨`0`è¡¨ç¤ºï¼‰ã€‚ä½ å¯ä»¥é€‰ä¸¤ä¸ªå¼€ç€çš„æœåŠ¡å™¨ï¼Œå¦‚æœå®ƒä»¬ä¸­é—´çš„â€œå¼€æœç‡â€è¶³å¤Ÿé«˜ï¼ˆ1çš„æ•°é‡â‰¥ä¸€åŠï¼‰ï¼Œå°±èƒ½æŠŠä¸­é—´æ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰“å¼€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç®—å‡º**æœ‰å¤šå°‘ç§åˆå§‹çŠ¶æ€èƒ½è®©æ‰€æœ‰æœåŠ¡å™¨éƒ½æ‰“å¼€**ï¼Œç»“æœå¯¹`m`å–æ¨¡ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰+ æ­£éš¾åˆ™å + å‰ç¼€å’Œä¼˜åŒ–

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
è§£å†³è¿™é“é¢˜çš„å…³é”®æ˜¯**â€œæ­£éš¾åˆ™åâ€**â€”â€”ç›´æ¥è®¡ç®—â€œåˆæ³•ä¸²â€ï¼ˆèƒ½å…¨æ‰“å¼€çš„ä¸²ï¼‰å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å…ˆç®—â€œä¸åˆæ³•ä¸²â€ï¼ˆæ— è®ºæ€ä¹ˆæ“ä½œéƒ½æ— æ³•å…¨æ‰“å¼€çš„ä¸²ï¼‰ï¼Œå†ç”¨**æ€»æ•°å‡å»ä¸åˆæ³•æ•°**å¾—åˆ°ç­”æ¡ˆã€‚

### æ ¸å¿ƒç®—æ³•ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰
åŠ¨æ€è§„åˆ’å°±åƒ**â€œæ­ç§¯æœ¨â€**ï¼šæŠŠå¤§é—®é¢˜æ‹†æˆå°é—®é¢˜ï¼Œç”¨å°é—®é¢˜çš„è§£æ„å»ºå¤§é—®é¢˜çš„è§£ã€‚æ¯”å¦‚è¦ç®—é•¿åº¦ä¸º`n`çš„åˆæ³•ä¸²æ•°é‡ï¼Œæˆ‘ä»¬å…ˆç®—é•¿åº¦ä¸º`1`ã€`2`ã€â€¦`n-1`çš„æƒ…å†µï¼Œå†ç»„åˆèµ·æ¥ã€‚

### ä¸åˆæ³•ä¸²çš„ç‰¹å¾
ä¸åˆæ³•ä¸²æ“ä½œåˆ°æœ€åï¼Œä¼šå˜æˆ**äº¤æ›¿çš„1æ®µå’Œ0æ®µ**ï¼ˆæ¯”å¦‚`110000100000111`ï¼‰ï¼Œä¸”æ¯æ®µ`0`çš„é•¿åº¦**å¤§äºä¸¤è¾¹1æ®µçš„é•¿åº¦ä¹‹å’Œ**ï¼ˆæ¯”å¦‚ä¸­é—´0æ®µé•¿`5`ï¼Œä¸¤è¾¹1æ®µé•¿`2`å’Œ`1`ï¼Œåˆ™`5>2+1`ï¼‰ã€‚

### DPçŠ¶æ€è®¾è®¡
æˆ‘ä»¬å®šä¹‰`dp[i][j]`ï¼š
- è¡¨ç¤ºé•¿åº¦ä¸º`i`çš„ä¸²ï¼Œ**ä¸¤ç«¯éƒ½æ˜¯1**ï¼ˆå› ä¸ºåˆæ³•ä¸²å¿…é¡»ä¸¤ç«¯æ˜¯1ï¼Œå¦åˆ™æ— æ³•å…¨æ‰“å¼€ï¼‰ï¼›
- æ“ä½œåˆ°æœ€åï¼Œ**æœ€åä¸€æ®µ1çš„é•¿åº¦æ˜¯j**çš„**ä¸åˆæ³•ä¸²æ•°é‡**ã€‚

æœ€ç»ˆç­”æ¡ˆå°±æ˜¯`dp[n][n]`â€”â€”é•¿åº¦ä¸º`n`ã€ä¸¤ç«¯æ˜¯1ã€æœ€åä¸€æ®µ1å æ»¡æ•´ä¸ªä¸²ï¼ˆå³å…¨1ï¼Œåˆæ³•ï¼‰çš„æ•°é‡ã€‚

### å¯è§†åŒ–è®¾è®¡æ€è·¯
æˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£æ ¼**åŠ¨ç”»å±•ç¤ºDPè¿‡ç¨‹ï¼š
- ç”¨**ç½‘æ ¼**è¡¨ç¤º`dp[i][j]`ï¼šxè½´æ˜¯ä¸²é•¿åº¦`i`ï¼Œyè½´æ˜¯æœ€åä¸€æ®µ1çš„é•¿åº¦`j`ï¼›
- ç”¨**é¢œè‰²æ·±æµ…**è¡¨ç¤º`dp[i][j]`çš„å€¼ï¼ˆè¶Šæ·±è¡¨ç¤ºæ•°é‡è¶Šå¤šï¼‰ï¼›
- å…³é”®æ­¥éª¤**é«˜äº®é—ªçƒ**ï¼šæ¯”å¦‚è®¡ç®—`dp[i][j]`æ—¶ï¼Œå¯¹åº”çš„æ ¼å­ä¼šé—ªä¸€ä¸‹ï¼ŒåŒæ—¶æ’­æ”¾â€œå®â€çš„åƒç´ éŸ³æ•ˆï¼›
- æ§åˆ¶é¢æ¿ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€â€œè‡ªåŠ¨æ’­æ”¾â€â€œé‡ç½®â€ï¼Œé€Ÿåº¦æ»‘å—è°ƒæ•´åŠ¨ç”»å¿«æ…¢ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

æˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰ç»´åº¦ï¼Œç­›é€‰äº†3ä»½ä¼˜è´¨é¢˜è§£ï¼š

---

### é¢˜è§£ä¸€ï¼šä½œè€…Leasierï¼ˆèµ22ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**çŠ¶æ€å®šä¹‰éå¸¸ç²¾å‡†**ï¼Œç›´æ¥æŠ“ä½äº†â€œä¸åˆæ³•ä¸²æœ€åä¸€æ®µ1çš„é•¿åº¦â€è¿™ä¸€æ ¸å¿ƒã€‚è½¬ç§»æ–¹ç¨‹ç”¨**å‰ç¼€å’Œä¼˜åŒ–**å°†æ—¶é—´å¤æ‚åº¦ä»`O(nÂ³)`é™åˆ°`O(nÂ²)`ï¼Œä»£ç ç®€æ´ä¸”æ³¨é‡Šæ¸…æ™°ã€‚  
  äº®ç‚¹ï¼šç”¨`sum1`å’Œ`sum2`ä¸¤ä¸ªå‰ç¼€å’Œæ•°ç»„å¿«é€Ÿè®¡ç®—è½¬ç§»æ‰€éœ€çš„å’Œï¼Œé¿å…é‡å¤å¾ªç¯ï¼›æ¨¡è¿ç®—å¤„ç†ä¸¥è°¨ï¼ˆæ¯”å¦‚ç”¨`(a - b + m) % m`ä¿è¯ç»“æœéè´Ÿï¼‰ã€‚

---

### é¢˜è§£äºŒï¼šä½œè€…dottleï¼ˆèµ14ï¼‰
* **ç‚¹è¯„**ï¼š  
  ä½œè€…ç”¨`g`å’Œ`f`çš„å…³ç³»å·§å¦™æ‹†åˆ†é—®é¢˜ï¼š`g[i][j]`è¡¨ç¤ºé•¿åº¦`i`ã€æœ€åä¸€æ®µ1é•¿`j`çš„ä¸åˆæ³•ä¸²æ•°ï¼Œ`f[i]`è¡¨ç¤ºé•¿åº¦`i`çš„åˆæ³•ä¸²æ•°ã€‚è½¬ç§»æ—¶é€šè¿‡**æ–œçº¿å‰ç¼€å’Œ**`h`ä¼˜åŒ–ï¼Œæ€è·¯æ–°é¢–ã€‚  
  äº®ç‚¹ï¼šå°†ä¸åˆæ³•æ¡ä»¶è½¬åŒ–ä¸ºâ€œæ–œçº¿æ±‚å’Œâ€ï¼Œç®€åŒ–äº†è½¬ç§»é€»è¾‘ï¼›ä»£ç ç»“æ„åˆ†å±‚æ¸…æ™°ï¼ˆ`add`å‡½æ•°å°è£…æ¨¡è¿ç®—ï¼‰ã€‚

---

### é¢˜è§£ä¸‰ï¼šä½œè€…Alex_Weiï¼ˆèµ7ï¼‰
* **ç‚¹è¯„**ï¼š  
  ä½œè€…å…ˆ**è¯æ˜äº†åˆå¹¶æ“ä½œçš„æ€§è´¨**ï¼ˆæ¯æ¬¡å¯åˆå¹¶ç›¸é‚»ä¸¤æ®µ1ï¼‰ï¼Œå†æ¨å¯¼DPçŠ¶æ€ã€‚ä»£ç ä¸­ç”¨`FastMod`ç±»ä¼˜åŒ–æ¨¡è¿ç®—ï¼ˆé¿å…ä¹˜æ³•æº¢å‡ºï¼‰ï¼Œç»†èŠ‚å¤„ç†åˆ°ä½ã€‚  
  äº®ç‚¹ï¼šä»é—®é¢˜æ€§è´¨å‡ºå‘æ¨å¯¼çŠ¶æ€ï¼Œé€»è¾‘æ›´ä¸¥è°¨ï¼›`FastMod`æ˜¯ç«èµ›ä¸­å¸¸ç”¨çš„ä¼˜åŒ–æŠ€å·§ï¼Œå€¼å¾—å­¦ä¹ ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£å†³è¿™é“é¢˜æ—¶ï¼Œä»¥ä¸‹3ä¸ªéš¾ç‚¹æœ€å®¹æ˜“å¡ä½ï¼Œæˆ‘ä»¬é€ä¸€æ‹†è§£ï¼š

### éš¾ç‚¹1ï¼šå¦‚ä½•å®šä¹‰DPçŠ¶æ€ï¼Ÿ
**é—®é¢˜**ï¼šä¸ºä»€ä¹ˆè¦å…³æ³¨â€œæœ€åä¸€æ®µ1çš„é•¿åº¦â€ï¼Ÿ  
**åˆ†æ**ï¼šä¸åˆæ³•ä¸²çš„æ ¸å¿ƒæ¡ä»¶æ˜¯â€œ0æ®µé•¿åº¦>ä¸¤è¾¹1æ®µä¹‹å’Œâ€ã€‚è¦åˆ¤æ–­å½“å‰æ®µçš„0æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¿…é¡»çŸ¥é“**å‰ä¸€æ®µ1çš„é•¿åº¦**â€”â€”è€Œâ€œæœ€åä¸€æ®µ1çš„é•¿åº¦`j`â€åˆšå¥½èƒ½å¸®æˆ‘ä»¬å…³è”å‰ä¸€æ®µçš„çŠ¶æ€ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šçŠ¶æ€å®šä¹‰è¦**æŠ“é—®é¢˜çš„æ ¸å¿ƒç‰¹å¾**ï¼Œæ¯”å¦‚æœ¬é¢˜çš„â€œæœ€åä¸€æ®µ1çš„é•¿åº¦â€ã€‚

### éš¾ç‚¹2ï¼šå¦‚ä½•æ¨å¯¼è½¬ç§»æ–¹ç¨‹ï¼Ÿ
**é—®é¢˜**ï¼šå¦‚ä½•å°†â€œ0æ®µé•¿åº¦>ä¸¤è¾¹1ä¹‹å’Œâ€è½¬åŒ–ä¸ºæ•°å­¦æ¡ä»¶ï¼Ÿ  
**åˆ†æ**ï¼šå‡è®¾å½“å‰æ®µ1é•¿`j`ï¼Œå‰ä¸€æ®µ1é•¿`l`ï¼Œä¸­é—´0æ®µé•¿`k`ã€‚ä¸åˆæ³•æ¡ä»¶æ˜¯`k > j + l`ã€‚è€Œæ€»é•¿åº¦`i = j + k + (i-j-k)`ï¼ˆ`i-j-k`æ˜¯å‰ä¸€æ®µçš„é•¿åº¦ï¼‰ï¼Œå› æ­¤`k > j + l`ç­‰ä»·äº`(i-j-k) + l < i - 2j`ã€‚æˆ‘ä»¬åªéœ€è®¡ç®—**å‰ä¸€æ®µé•¿åº¦+å‰ä¸€æ®µæœ€å1çš„é•¿åº¦â‰¤i-2j-1**çš„å’Œï¼Œå°±èƒ½å¿«é€Ÿè½¬ç§»ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šå°†é—®é¢˜æ¡ä»¶è½¬åŒ–ä¸º**æ•°å­¦ä¸ç­‰å¼**ï¼Œæ˜¯DPè½¬ç§»çš„å…³é”®ã€‚

### éš¾ç‚¹3ï¼šå¦‚ä½•ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼Ÿ
**é—®é¢˜**ï¼šç›´æ¥è½¬ç§»æ˜¯`O(nÂ³)`ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ  
**åˆ†æ**ï¼šç”¨**å‰ç¼€å’Œæ•°ç»„**é¢„å¤„ç†â€œå‰ä¸€æ®µé•¿åº¦+å‰ä¸€æ®µæœ€å1çš„é•¿åº¦â‰¤xâ€çš„å’Œï¼Œè¿™æ ·æ¯æ¬¡è½¬ç§»åªéœ€æŸ¥å‰ç¼€å’Œï¼Œæ—¶é—´å¤æ‚åº¦é™åˆ°`O(nÂ²)`ã€‚æ¯”å¦‚Leasierçš„`sum1`å’Œ`sum2`æ•°ç»„ï¼Œå°±æ˜¯æå‰ç®—å¥½çš„â€œå°æŠ„â€ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šå‰ç¼€å’Œæ˜¯å¤„ç†**åŒé‡å¾ªç¯**çš„â€œç¥å™¨â€ï¼Œèƒ½å¤§å¹…é™ä½æ—¶é—´å¤æ‚åº¦ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æ­£éš¾åˆ™å**ï¼šç›´æ¥ç®—åˆæ³•æ•°éš¾æ—¶ï¼Œç®—æ€»æ•°-ä¸åˆæ³•æ•°ï¼›
- **çŠ¶æ€æŠ“æ ¸å¿ƒ**ï¼šå®šä¹‰çŠ¶æ€è¦å…³è”é—®é¢˜çš„å…³é”®æ¡ä»¶ï¼›
- **å‰ç¼€å’Œä¼˜åŒ–**ï¼šé¿å…é‡å¤è®¡ç®—ï¼Œé™ç»´æ—¶é—´å¤æ‚åº¦ï¼›
- **æ¨¡è¿ç®—æŠ€å·§**ï¼šå‡æ³•ååŠ æ¨¡å†å–æ¨¡ï¼Œé¿å…è´Ÿæ•°ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆLeasieré¢˜è§£çš„æ€è·¯ï¼Œä»£ç ç®€æ´é«˜æ•ˆï¼Œè¦†ç›–æ ¸å¿ƒé€»è¾‘ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <stdio.h>
typedef long long ll;

int power[5007];
ll dp[5007][5007], sum1[10007], sum2[10007];

inline void init(int n, int m) {
    power[0] = 1;
    for (int i = 1; i <= n; i++)
        power[i] = power[i-1] * 2 % m;
}

int main() {
    int n, m, k;
    scanf("%d %d", &n, &m);
    init(n, m);
    k = n * 2;
    dp[1][1] = sum1[2] = 1;  // åˆå§‹åŒ–ï¼šé•¿åº¦1ï¼Œæœ€åä¸€æ®µ1é•¿1

    for (int i = 2; i <= n; i++) {
        // è®¡ç®—sum2ï¼ˆsum1çš„å‰ç¼€å’Œï¼‰
        for (int j = 1; j <= k; j++)
            sum2[j] = (sum2[j-1] + sum1[j]) % m;

        // dp[i][i] = æ€»æ•°ï¼ˆ2^(i-2)ï¼‰ - æ‰€æœ‰ä¸åˆæ³•çš„dp[i][j]
        dp[i][i] = power[i-2];
        for (int j = 1; j*2 < i; j++) {
            dp[i][j] = dp[j][j] * sum2[i - 2*j - 1] % m;
            dp[i][i] = ((dp[i][i] - dp[i][j]) % m + m) % m;
        }

        // æ›´æ–°sum1ï¼šsum1[i+j] += dp[i][j]
        for (int j = 1; j <= i; j++)
            sum1[i+j] = (sum1[i+j] + dp[i][j]) % m;
    }
    printf("%lld", dp[n][n]);
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. `init`å‡½æ•°é¢„å¤„ç†`2`çš„å¹‚æ¬¡ï¼ˆå› ä¸ºæ€»æ•°æ˜¯`2^(i-2)`ï¼‰ï¼›
  2. åˆå§‹åŒ–`dp[1][1] = 1`ï¼ˆé•¿åº¦1çš„ä¸²åªèƒ½æ˜¯`1`ï¼Œåˆæ³•ï¼‰ï¼›
  3. å¾ªç¯è®¡ç®—æ¯ä¸ª`i`çš„`dp[i][j]`ï¼š
     - å…ˆç®—`sum2`ï¼ˆ`sum1`çš„å‰ç¼€å’Œï¼Œç”¨äºå¿«é€ŸæŸ¥è¯¢ï¼‰ï¼›
     - ç®—`dp[i][i]`ï¼ˆåˆæ³•æ•°=æ€»æ•°-ä¸åˆæ³•æ•°ï¼‰ï¼›
     - ç®—`dp[i][j]`ï¼ˆä¸åˆæ³•æ•°ï¼Œç”¨`sum2`ä¼˜åŒ–ï¼‰ï¼›
     - æ›´æ–°`sum1`ï¼ˆä¸ºä¸‹ä¸€è½®è®¡ç®—åšå‡†å¤‡ï¼‰ã€‚

---

### é¢˜è§£ä¸€ï¼ˆLeasierï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ
* **äº®ç‚¹**ï¼šç”¨`sum1`å’Œ`sum2`å¿«é€Ÿè®¡ç®—è½¬ç§»å’Œï¼Œä¼˜åŒ–åˆ°`O(nÂ²)`ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
// è®¡ç®—sum2ï¼ˆsum1çš„å‰ç¼€å’Œï¼‰
for (int j = 1; j <= k; j++)
    sum2[j] = (sum2[j-1] + sum1[j]) % m;

// è®¡ç®—dp[i][j]ï¼ˆä¸åˆæ³•æ•°ï¼‰
for (int j = 1; j*2 < i; j++) {
    dp[i][j] = dp[j][j] * sum2[i - 2*j - 1] % m;
    dp[i][i] = ((dp[i][i] - dp[i][j]) % m + m) % m;
}
```
* **ä»£ç è§£è¯»**ï¼š
  - `sum2[j]`æ˜¯`sum1[1..j]`çš„å’Œï¼Œç”¨æ¥å¿«é€ŸæŸ¥â€œå‰ä¸€æ®µé•¿åº¦+å‰ä¸€æ®µæœ€å1çš„é•¿åº¦â‰¤xâ€çš„å’Œï¼›
  - `j*2 < i`ï¼šä¿è¯ä¸­é—´æœ‰è¶³å¤Ÿçš„0æ®µé•¿åº¦ï¼ˆ`i-2j`ï¼‰ï¼›
  - `dp[j][j]`æ˜¯é•¿åº¦`j`çš„åˆæ³•ä¸²æ•°ï¼ˆå› ä¸º`dp[j][j]`æ˜¯åˆæ³•çš„ï¼‰ï¼›
  - `sum2[i-2j-1]`æ˜¯å‰ä¸€æ®µçš„å’Œï¼Œæ»¡è¶³â€œ0æ®µé•¿åº¦>ä¸¤è¾¹1ä¹‹å’Œâ€çš„æ¡ä»¶ã€‚
* ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šå‰ç¼€å’Œæ˜¯DPä¼˜åŒ–çš„å¸¸ç”¨æŠ€å·§ï¼Œä¸€å®šè¦æŒæ¡ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜
**åƒç´ æœåŠ¡å™¨å¤§å†’é™©**ï¼šç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹ŸæœåŠ¡å™¨é€šç”µè¿‡ç¨‹ï¼Œå±•ç¤ºDPçŠ¶æ€è½¬ç§»ã€‚

### è®¾è®¡æ€è·¯
- **é£æ ¼**ï¼šä»¿FCçº¢ç™½æœºï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹ï¼‰çš„åƒç´ é£æ ¼ï¼Œç”¨ç®€å•è‰²å—è¡¨ç¤ºçŠ¶æ€ï¼›
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥â€â€œè‡ªåŠ¨â€â€œé‡ç½®â€ï¼Œé€Ÿåº¦æ»‘å—è°ƒæ•´åŠ¨ç”»å¿«æ…¢ï¼›
- **éŸ³æ•ˆ**ï¼šå…³é”®æ“ä½œæœ‰åƒç´ éŸ³æ•ˆï¼ˆå¦‚è®¡ç®—`dp[i][j]`æ˜¯â€œå®â€ï¼Œå®Œæˆ`i`æ˜¯â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼‰ã€‚

### åŠ¨ç”»å¸§æ­¥éª¤
1. **åˆå§‹åŒ–**ï¼š
   - å±å¹•å·¦ä¾§æ˜¯`dp[i][j]`ç½‘æ ¼ï¼Œxè½´`i`ä»1åˆ°`n`ï¼Œyè½´`j`ä»1åˆ°`i`ï¼›
   - `i=1,j=1`çš„æ ¼å­äº®çº¢è‰²ï¼ˆ`dp[1][1]=1`ï¼‰ï¼›
   - å³ä¾§æ§åˆ¶é¢æ¿æ˜¾ç¤ºæŒ‰é’®å’Œé€Ÿåº¦æ»‘å—ã€‚

2. **è®¡ç®—`i=2`**ï¼š
   - è®¡ç®—`sum2`ï¼š`sum2[j]`é€æ­¥ç´¯åŠ ï¼Œå¯¹åº”çš„æ ¼å­é—ªè“è‰²ï¼›
   - è®¡ç®—`dp[2][2]`ï¼š`power[0]=1`ï¼Œæ ¼å­å˜äº®ç»¿è‰²ï¼›
   - æ›´æ–°`sum1[2+2=4]`ï¼š`sum1[4]`åŠ 1ï¼Œæ ¼å­é—ªé»„è‰²ã€‚

3. **è®¡ç®—`i=3`**ï¼š
   - è®¡ç®—`sum2`ï¼š`sum2[j]`ç´¯åŠ ï¼›
   - è®¡ç®—`dp[3][1]`ï¼š`j=1`ï¼Œ`i-2j-1=0`ï¼Œ`sum2[0]=0`ï¼Œæ‰€ä»¥`dp[3][1]=0`ï¼Œæ ¼å­ç°è‰²ï¼›
   - è®¡ç®—`dp[3][3]`ï¼š`power[1]=2`ï¼Œå‡å»`dp[3][1]`å¾—`2`ï¼Œæ ¼å­äº®ç»¿è‰²ï¼›
   - æ›´æ–°`sum1[3+3=6]`ï¼š`sum1[6]`åŠ 2ï¼Œæ ¼å­é—ªé»„è‰²ã€‚

4. **è‡ªåŠ¨æ’­æ”¾**ï¼š
   - æŒ‰`i`é€’å¢é¡ºåºè‡ªåŠ¨è®¡ç®—ï¼Œæ¯ä¸ªæ­¥éª¤å¯¹åº”éŸ³æ•ˆå’Œé«˜äº®ï¼›
   - å®Œæˆ`i=n`æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼Œ`dp[n][n]`çš„æ ¼å­é—ªçƒå½©è™¹è‰²ã€‚

### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ
- åƒç´ é£æ ¼**äº²åˆ‡æœ‰è¶£**ï¼Œç¬¦åˆé’å°‘å¹´çš„å®¡ç¾ï¼›
- é«˜äº®å’ŒéŸ³æ•ˆ**å¼ºåŒ–è®°å¿†**ï¼Œè®©å…³é”®æ­¥éª¤æ›´æ˜“ç†è§£ï¼›
- äº¤äº’åŠŸèƒ½**é¼“åŠ±æ¢ç´¢**ï¼Œæ¯”å¦‚å•æ­¥æ‰§è¡Œå¯ä»¥ä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„**æ­£éš¾åˆ™å**å’Œ**DP+å‰ç¼€å’Œ**æŠ€å·§ï¼Œå¯ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
1. **è®¡æ•°é—®é¢˜**ï¼šæ¯”å¦‚æ±‚â€œæ»¡è¶³æŸç§æ¡ä»¶çš„å­—ç¬¦ä¸²æ•°é‡â€ï¼›
2. **çŠ¶æ€è½¬ç§»æœ‰æ¡ä»¶**ï¼šæ¯”å¦‚è½¬ç§»æ—¶éœ€è¦æ»¡è¶³â€œæŸå€¼å¤§äºæŸå’Œâ€ï¼›
3. **å­é—®é¢˜é‡å **ï¼šæ¯”å¦‚å¤§é—®é¢˜çš„è§£ä¾èµ–å°é—®é¢˜çš„è§£ã€‚

### æ´›è°·ç»ƒä¹ æ¨è
1. **P1020 å¯¼å¼¹æ‹¦æˆª**ï¼š  
   ç»å…¸æœ€é•¿ä¸‹é™å­åºåˆ—é—®é¢˜ï¼ŒçŠ¶æ€è®¾è®¡éœ€è€ƒè™‘â€œæœ€åä¸€ä¸ªå¯¼å¼¹çš„é«˜åº¦â€ï¼Œç»ƒä¹ çŠ¶æ€å®šä¹‰æŠ€å·§ã€‚
2. **P1280 å°¼å…‹çš„ä»»åŠ¡**ï¼š  
   çŠ¶æ€è½¬ç§»éœ€è€ƒè™‘â€œæ—¶é—´æ¡ä»¶â€ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œ0æ®µé•¿åº¦>ä¸¤è¾¹1ä¹‹å’Œâ€ï¼Œç»ƒä¹ æ¡ä»¶è½¬åŒ–ã€‚
3. **P2014 é€‰è¯¾**ï¼š  
   æ ‘å½¢DPé—®é¢˜ï¼ŒçŠ¶æ€å®šä¹‰å…³æ³¨â€œé€‰æˆ–ä¸é€‰æŸä¸ªè¯¾ç¨‹â€ï¼Œæ‹“å±•DPçš„åº”ç”¨åœºæ™¯ã€‚
4. **CF1750Fï¼ˆåŸé¢˜ï¼‰**ï¼š  
   å†åšä¸€éåŸé¢˜ï¼Œå·©å›ºæ­£éš¾åˆ™åå’Œå‰ç¼€å’Œä¼˜åŒ–æŠ€å·§ï¼


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

ä»é¢˜è§£ä¸­ï¼Œæˆ‘ä»¬èƒ½å­¦åˆ°å¾ˆå¤š**ç«èµ›å¸¸ç”¨æŠ€å·§**ï¼š
- **æ­£éš¾åˆ™å**ï¼šæ¯”å¦‚æœ¬é¢˜ç›´æ¥ç®—åˆæ³•æ•°éš¾ï¼Œå°±ç”¨æ€»æ•°å‡ä¸åˆæ³•æ•°ï¼›
- **çŠ¶æ€æŠ“æ ¸å¿ƒ**ï¼šæ¯”å¦‚â€œæœ€åä¸€æ®µ1çš„é•¿åº¦â€ç›´æ¥å…³è”ä¸åˆæ³•æ¡ä»¶ï¼›
- **å‰ç¼€å’Œä¼˜åŒ–**ï¼šå¤„ç†åŒé‡å¾ªç¯çš„â€œç¥å™¨â€ï¼Œé™ç»´æ—¶é—´å¤æ‚åº¦ï¼›
- **æ¨¡è¿ç®—æŠ€å·§**ï¼šå‡æ³•ååŠ æ¨¡å†å–æ¨¡ï¼Œé¿å…è´Ÿæ•°ï¼ˆå¦‚`(a - b + m) % m`ï¼‰ã€‚

è¿™äº›æŠ€å·§ä¸ä»…èƒ½è§£å†³è¿™é“é¢˜ï¼Œè¿˜èƒ½ç”¨åˆ°å¾ˆå¤šå…¶ä»–DPé—®é¢˜ä¸­ï¼


## ç»“è®º
ä»Šå¤©çš„é—®é¢˜è™½ç„¶æœ‰ç‚¹éš¾ï¼Œä½†åªè¦æŒæ¡äº†**æ­£éš¾åˆ™å**çš„æ€è·¯ã€**ç²¾å‡†çš„çŠ¶æ€å®šä¹‰**å’Œ**å‰ç¼€å’Œä¼˜åŒ–**ï¼Œå°±èƒ½è½»æ¾è§£å†³ï¼ç¼–ç¨‹çš„ä¹è¶£åœ¨äºä¸æ–­æ€è€ƒå’Œç»ƒä¹ ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ›´å¤šæœ‰è¶£çš„é—®é¢˜å§ï½ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š150.52ç§’
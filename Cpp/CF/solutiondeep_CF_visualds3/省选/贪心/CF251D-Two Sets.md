# é¢˜ç›®ä¿¡æ¯

# Two Sets

## é¢˜ç›®æè¿°

Little Petya likes numbers a lot. Recently his mother has presented him a collection of $ n $ non-negative integers. There's only one thing Petya likes more than numbers: playing with little Masha. He immediately decided to give a part of his new collection to her. To make the game even more interesting, Petya decided to give Masha such collection of numbers for which the following conditions fulfill:

- Let's introduce $ x_{1} $ to denote the $ xor $ of all numbers Petya has got left; and let's introduce $ x_{2} $ to denote the $ xor $ of all numbers he gave to Masha. Value $ (x_{1}+x_{2}) $ must be as large as possible.
- If there are multiple ways to divide the collection so that the previous condition fulfilled, then Petya minimizes the value $ x_{1} $ .

The $ xor $ operation is a bitwise excluding "OR", that is denoted as "xor" in the Pascal language and "^" in C/C++/Java.

Help Petya divide the collection as described above. If there are multiple suitable ways to divide it, find any of them. Please note that after Petya gives a part of his numbers to Masha, he may have no numbers left. The reverse situation is also possible, when Petya gives nothing to Masha. In both cases we must assume that the $ xor $ of an empty set of numbers equals 0.

## æ ·ä¾‹ #1

### è¾“å…¥

```
6
1 2 3 4 5 6
```

### è¾“å‡º

```
2 2 2 2 2 2
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3
1000000000000 1000000000000 1000000000000
```

### è¾“å‡º

```
2 2 2
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
8
1 1 2 2 3 3 4 4
```

### è¾“å‡º

```
1 2 1 2 2 2 1 2
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šTwo Sets æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**é¢˜ç›®è§£è¯»**  
ç»™å®š $n$ ä¸ªéè´Ÿæ•´æ•°ï¼Œå°†å…¶åˆ†æˆä¸¤ä¸ªé›†åˆ $S_1$ å’Œ $S_2$ï¼Œä½¿ $S_1$ çš„å¼‚æˆ–å’Œ $x_1$ ä¸ $S_2$ çš„å¼‚æˆ–å’Œ $x_2$ ä¹‹å’Œ $(x_1+x_2)$ æœ€å¤§ï¼Œä¸”æœ€å°åŒ– $x_1$ã€‚

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`çº¿æ€§ä»£æ•°åº”ç”¨`ï¼ˆå¼‚æˆ–æ–¹ç¨‹ç»„çš„æ±‚è§£ï¼‰  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> é—®é¢˜æœ¬è´¨æ˜¯**æŒ‰ä½è´ªå¿ƒ+çº¿æ€§åŸº/é«˜æ–¯æ¶ˆå…ƒ**ã€‚æƒ³è±¡ä½ æœ‰ä¸¤å †å®çŸ³ï¼ˆé›†åˆï¼‰ï¼Œæ¯å †çš„é­”æ³•å€¼ï¼ˆå¼‚æˆ–å’Œï¼‰éœ€æ»¡è¶³ç‰¹å®šè§„åˆ™ï¼š
> - è®¾æ‰€æœ‰æ•°çš„å¼‚æˆ–å’Œä¸º $S$ï¼Œåˆ™ $x_1 \oplus x_2 = S$ã€‚
> - **æœ€å¤§åŒ– $x_1+x_2$**ï¼šå¯¹ $S$ ä¸º $0$ çš„ä½ï¼Œè®© $x_1$ å’Œ $x_2$ å‡ä¸º $1$ï¼ˆè´¡çŒ® $2^{i+1}$ï¼‰ï¼›å¯¹ $S$ ä¸º $1$ çš„ä½ï¼Œè´¡çŒ®å›ºå®šä¸º $2^i$ã€‚
> - **æœ€å°åŒ– $x_1$**ï¼šåœ¨ $S=1$ çš„ä½è®© $x_1=0$ã€‚
>
> **æ ¸å¿ƒç­–ç•¥**ï¼šä»é«˜ä½åˆ°ä½ä½ä¼˜å…ˆå¤„ç† $S=0$ çš„ä½ï¼ˆè´ªå¿ƒæœ€å¤§åŒ–ï¼‰ï¼Œå†å¤„ç† $S=1$ çš„ä½ï¼ˆè´ªå¿ƒæœ€å°åŒ–ï¼‰ã€‚ç”¨çº¿æ€§åŸºæˆ–é«˜æ–¯æ¶ˆå…ƒè§£å†³ä½é—´ä¾èµ–ã€‚  
> **å¯è§†åŒ–è®¾è®¡**ï¼šç”¨åƒç´ å®çŸ³ä»£è¡¨æ•°å­—ï¼Œé«˜äº®å½“å‰å¤„ç†ä½ï¼ŒåŠ¨æ€å±•ç¤ºåˆ†ç»„å†³ç­–ï¼ˆè¯¦è§ç¬¬5èŠ‚ï¼‰ã€‚

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆè£è€€ç«å½±ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ï¼Œç”¨é«˜æ–¯æ¶ˆå…ƒè§£å¼‚æˆ–æ–¹ç¨‹ç»„ã€‚ä»£ç ä¸­ `f` æ•°ç»„å­˜å‚¨ç³»æ•°ï¼Œ`pos` è®°å½•ä¸»å…ƒä½ç½®ï¼Œä»é«˜ä½åˆ°ä½ä½å¤„ç† $S=0$ å’Œ $S=1$ çš„ä½ã€‚äº®ç‚¹åœ¨äº**ç”¨ `bitset` ä¼˜åŒ–æ¶ˆå…ƒè¿‡ç¨‹**ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆè·³è¿‡è‡ªç”±å˜å…ƒï¼‰ï¼Œç«èµ›å®ç”¨æ€§å¼ºã€‚ä½†å˜é‡åå¯è¯»æ€§å¯æå‡ï¼ˆå¦‚ `f` æ”¹ä¸º `equations`ï¼‰ã€‚

**é¢˜è§£äºŒï¼ˆchenxia25ï¼‰**  
* **ç‚¹è¯„**ï¼šé€šè¿‡é‡æ’æ•°ä½ä¼˜å…ˆçº§ï¼ˆå…ˆ $S=0$ å $S=1$ï¼‰ç®€åŒ–é—®é¢˜ï¼Œ**çº¿æ€§åŸºè´ªå¿ƒæ±‚ $x_1$ åè¿˜åŸæ–¹æ¡ˆ**ã€‚äº®ç‚¹æ˜¯æ·»åŠ é¢å¤–æ•° $a_{n+1}=x_1$ æ„é€ æ–¹ç¨‹ï¼Œç”¨é«˜æ–¯æ¶ˆå…ƒåæ¨åˆ†ç»„ã€‚ä»£ç ç»“æ„ç¨å¤æ‚ï¼Œä½†ç®—æ³•æœ‰æ•ˆæ€§é«˜ï¼Œå¤æ‚åº¦ $O(n \log a_i)$ã€‚

**é¢˜è§£ä¸‰ï¼ˆlittleKtianï¼‰**  
* **ç‚¹è¯„**ï¼šåˆ†ä¸¤æ¬¡å¾ªç¯å¤„ç† $S=0$ å’Œ $S=1$ çš„ä½ï¼Œ**åŠ¨æ€é‡å»ºçº¿æ€§åŸºå¹¶å†³ç­– $x_1$ çš„ä½å€¼**ã€‚äº®ç‚¹æ˜¯ç”¨ `base_mask` è®°å½•åŸºçš„ç”Ÿæˆè·¯å¾„ï¼Œé«˜æ•ˆè¿˜åŸåˆ†ç»„æ–¹æ¡ˆã€‚ä»£ç ç®€æ´ä½†å˜é‡å‘½åæŠ½è±¡ï¼ˆå¦‚ `t`, `w`ï¼‰ï¼Œå­¦ä¹ æ—¶éœ€ç»“åˆæ³¨é‡Šã€‚

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1.  **éš¾ç‚¹1ï¼šç†è§£ä½è´¡çŒ®çš„è´ªå¿ƒç­–ç•¥**  
    * **åˆ†æ**ï¼š$S=0$ çš„ä½å¯¹ $x_1+x_2$ çš„è´¡çŒ®å¯è¾¾ $2^{i+1}$ï¼ˆè‹¥ $x_1=1$ï¼‰ï¼Œè€Œ $S=1$ çš„ä½è´¡çŒ®å›ºå®šã€‚éœ€ä¼˜å…ˆå¤„ç†é«˜ä½ $S=0$ çš„ä½ï¼Œå†æœ€å°åŒ– $x_1$ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**é«˜ä½ä¼˜å…ˆè´ªå¿ƒæ˜¯æœ€å¤§åŒ–æ€»å’Œçš„å…³é”®**ã€‚

2.  **éš¾ç‚¹2ï¼šå¤„ç†å¤šæ¯”ç‰¹ä½çš„ç›¸äº’å½±å“**  
    * **åˆ†æ**ï¼šä¸€ä¸ªæ•°åŒ…å«å¤šä¸ªä½ï¼Œå†³ç­–ä¾èµ–éœ€è§£å¼‚æˆ–æ–¹ç¨‹ç»„ã€‚ä¾‹å¦‚ï¼šæ–¹ç¨‹ $a_{i,j}x_1 \oplus \cdots = b_j$ è¡¨ç¤ºç¬¬ $j$ ä½çš„çº¦æŸã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**çº¿æ€§åŸº/é«˜æ–¯æ¶ˆå…ƒæ˜¯è§£å†³ä½é—´ä¾èµ–çš„æ ‡å‡†å·¥å…·**ã€‚

3.  **éš¾ç‚¹3ï¼šè¿˜åŸåˆ†ç»„æ–¹æ¡ˆ**  
    * **åˆ†æ**ï¼šæ±‚ $x_1$ åéœ€æ‰¾å‡ºå“ªäº›æ•°åœ¨ $S_1$ã€‚é€šè¿‡çº¿æ€§åŸºçš„ `base_mask` æˆ–é«˜æ–¯æ¶ˆå…ƒçš„ä¸»å…ƒå˜é‡åæ¨ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**è®°å½•åŸºçš„ç”Ÿæˆè·¯å¾„å¯é«˜æ•ˆè¿˜åŸæ–¹æ¡ˆ**ã€‚

#### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼šä½åˆ†è§£æ³•**ï¼šå°†é—®é¢˜æ‹†è§£åˆ°æ¯ä¸ªäºŒè¿›åˆ¶ä½ç‹¬ç«‹åˆ†æã€‚
- **æŠ€å·§2ï¼šä¼˜å…ˆçº§é‡æ’**ï¼šæŒ‰ $S=0$ > $S=1$ å’Œé«˜ä½ > ä½ä½çš„é¡ºåºå¤„ç†ã€‚
- **æŠ€å·§3ï¼šçº¿æ€§ä»£æ•°å·¥å…·**ï¼šçµæ´»é€‰ç”¨é«˜æ–¯æ¶ˆå…ƒï¼ˆæ˜¾å¼æ–¹ç¨‹ç»„ï¼‰æˆ–çº¿æ€§åŸºï¼ˆéšå¼è´ªå¿ƒï¼‰ã€‚
- **æŠ€å·§4ï¼šæ–¹æ¡ˆè¿˜åŸ**ï¼šç”¨ `bitset` è·Ÿè¸ªåŸºçš„ç”Ÿæˆè·¯å¾„æˆ–é«˜æ–¯æ¶ˆå…ƒçš„ä¸»å…ƒã€‚

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**  
* **è¯´æ˜**ï¼šç»¼åˆé¢˜è§£æ€è·¯ï¼ŒåŸºäºçº¿æ€§åŸºçš„è´ªå¿ƒç­–ç•¥å®ç°ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  typedef long long ll;
  const int N = 1e5 + 5, M = 62;

  ll base[M], mask[M], S;
  int n, ans[N];
  vector<int> bit_order;

  void insert(int id, ll x) {
    ll msk = 1LL << id;
    for (int i = M-1; i >= 0; i--) {
      if (!(x >> i & 1)) continue;
      if (base[i]) {
        x ^= base[i];
        msk ^= mask[i];
      } else {
        base[i] = x;
        mask[i] = msk;
        break;
      }
    }
  }

  int main() {
    cin >> n;
    for (int i = 0; i < n; i++) {
      ll x; cin >> x;
      insert(i, x);
      S ^= x;
      ans[i] = 2;  // åˆå§‹é»˜è®¤åœ¨ S2
    }

    // æ„å»ºä¼˜å…ˆçº§: å…ˆ S=0 çš„ä½, å† S=1 çš„ä½
    for (int i = M-1; i >= 0; i--)
      if (!(S >> i & 1)) bit_order.push_back(i);
    for (int i = M-1; i >= 0; i--)
      if (S >> i & 1) bit_order.push_back(i);

    // è´ªå¿ƒç¡®å®š x1
    ll x1 = 0;
    for (int b : bit_order) {
      ll new_x1 = x1 ^ (1LL << b);
      for (int i = M-1; i >= 0; i--) {
        if (!(new_x1 >> i & 1)) continue;
        if (!base[i]) break;
        new_x1 ^= base[i];
      }
      if (new_x1 == 0) x1 ^= (1LL << b);
    }

    // è¿˜åŸåˆ†ç»„æ–¹æ¡ˆ
    ll solution = 0;
    for (int i = M-1; i >= 0; i--) {
      if (!(x1 >> i & 1)) continue;
      if (!base[i]) break;
      x1 ^= base[i];
      solution ^= mask[i];
    }
    for (int i = 0; i < n; i++)
      if (solution >> i & 1) ans[i] = 1;

    for (int i = 0; i < n; i++) cout << ans[i] << " ";
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  > 1. è®¡ç®—æ€»å¼‚æˆ–å’Œ $S$ï¼Œåˆå§‹åŒ–çº¿æ€§åŸºã€‚
  > 2. æŒ‰ä¼˜å…ˆçº§å¤„ç†æ¯ä½ï¼šå°è¯•è®¾ç½® $x_1$ çš„ä½å€¼ï¼Œé€šè¿‡åŸºéªŒè¯å¯è¡Œæ€§ã€‚
  > 3. ç”¨ `mask` è®°å½•åŸºçš„ç”Ÿæˆè·¯å¾„ï¼Œåæ¨å“ªäº›æ•°åº”åœ¨ $S_1$ã€‚

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼šå®çŸ³åˆ†ç»„å¤§å†’é™©ï¼ˆ8ä½åƒç´ é£ï¼‰  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šåŠ¨æ€å±•ç¤ºæŒ‰ä½è´ªå¿ƒå†³ç­–è¿‡ç¨‹ã€‚  
**è®¾è®¡æ€è·¯**ï¼š  
> - **åƒç´ å®çŸ³**ï¼šæ¯ä¸ªæ•°ç”¨ 8Ã—8 åƒç´ æ–¹å—è¡¨ç¤ºï¼Œå†…éƒ¨æ˜¾ç¤ºäºŒè¿›åˆ¶å€¼ï¼ˆå¦‚ `0010`ï¼‰ã€‚  
> - **ä½é«˜äº®**ï¼šå½“å‰å¤„ç†çš„ä½é—ªçƒï¼Œè¯¥ä½ä¸º 1 çš„å®çŸ³è¾¹æ¡†å˜é‡‘è‰²ã€‚  
> - **å†³ç­–åŠ¨ç”»**ï¼š  
>     - $S=0$ çš„ä½ï¼šå®çŸ³åˆ†è£‚ä¸ºä¸¤ä¸ªï¼ˆè±¡å¾ $x_1=x_2=1$ï¼‰ï¼Œæ’­æ”¾ä¸Šå‡éŸ³æ•ˆã€‚  
>     - $S=1$ çš„ä½ï¼šå®çŸ³æ»‘å‘ $S_2$ï¼ˆè±¡å¾ $x_1=0$ï¼‰ï¼Œæ’­æ”¾ä½æ²‰éŸ³æ•ˆã€‚  
> - **æ§åˆ¶é¢æ¿**ï¼šæ­¥è¿›æŒ‰é’®ã€é€Ÿåº¦æ»‘å—ã€é‡ç½®é”®ã€‚  
> - **æ¸¸æˆåŒ–**ï¼šæ¯æˆåŠŸå¤„ç†ä¸€ä½å¾— `2^(i+1)` åˆ†ï¼Œç´¯è®¡æ˜¾ç¤ºæ€»åˆ†ã€‚

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

1. **æ´›è°· P3857 [TJOI2008]å½©ç¯**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šçº¿æ€§åŸºæ¨¡æ¿é¢˜ï¼Œæ±‚å­é›†å¼‚æˆ–å€¼ç§ç±»æ•°ï¼Œå·©å›ºåŸºçš„ç”Ÿæˆã€‚

2. **æ´›è°· P4151 [WC2011]æœ€å¤§XORå’Œè·¯å¾„**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå°†è·¯å¾„å¼‚æˆ–é—®é¢˜è½¬åŒ–ä¸ºçº¿æ€§åŸºåº”ç”¨ï¼Œæ‹“å±•å›¾è®ºåœºæ™¯ã€‚

3. **æ´›è°· P4301 [CQOI2013]æ–°Nimæ¸¸æˆ**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»“åˆåšå¼ˆä¸çº¿æ€§åŸºï¼Œç»ƒä¹ è´ªå¿ƒç­–ç•¥æ„é€ ã€‚

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®çš„ä½œè€…ä¸ªäººå¿ƒå¾—åˆ†äº«éƒ¨åˆ†ã€‚

---
**ç»“è¯­**ï¼šé€šè¿‡ä½åˆ†è§£å’Œçº¿æ€§ä»£æ•°å·¥å…·ï¼ŒTwo Sets é—®é¢˜è¢«ä¼˜é›…è§£å†³ã€‚ç†è§£è´ªå¿ƒä¼˜å…ˆçº§å’ŒåŸºçš„ç”Ÿæˆæ˜¯å…³é”®ã€‚ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š322.69ç§’
---
title: "Lucky Tree"
layout: "post"
diff: 提高+/省选-
pid: CF109C
tag: []
---

# Lucky Tree

## 题目描述

彼得喜欢幸运数字。这里所说的幸运数字是由 $4$ 和 $7$ 组成的正整数。比如，数字 $47$，$744$，$4$ 是幸运数字，而 $5$，$17$，$467$ 就不是。

一天，彼得遇到一棵由 $n$ 个点组成的树。另外，这棵树是带权的，即每条边有一个权值（由一个正整数表示）。如果一条边的权值是一个幸运数字，那么我们就说这条边是一条幸运边。说明一下，一棵 $n$ 个结点的树是由 $n$ 个结点和 $(n-1)$ 条边组的无环的无向图。

彼得好奇，在树中有多少个满足以下条件的三元组 $(i,j,k)$（$i,j,k$是三个不同的点）。  
1. $i$ 到 $j$ 有路径，$i$ 到 $k$ 也有路径；  
2. 每条路径中至少有一条幸运边。

数字的顺序是有意义的，举例说明，三元组 $(1,2,3)$，$(2,1,3)$ 和 $(1,3,2)$ 是三个不同的序列。

现在要求计算在树中存在多少个这样的三元组关系。

样例解释： 样例一中的 $16$ 种情况分别为：$(1,2,4)$，$(1,4,2)$，$(2,1,3)$，$(2,1,4)$，$(2,3,1)$，$(2,3,4)$，$(2,4,1)$，$(2,4,3)$，$(3,2,4)$，$(3,4,2)$，$(4,1,2)$，$(4,1,3)$，$(4,2,1)$，$(4,2,3)$，$(4,3,1)$ 和 $(4,3,2)$。

## 输入格式

测试数据的第一行包含一个整数 $n$ $(1 \leq n \leq 10^5)$。接下来的  $(n-1)$ 行中，第 $i$ 行有三个整数 $u_i$，$v_i$，$w_i$  $(1 \leq u_i,v_i \leq n,~1\leq w_i \leq 10^9)$，分别表示有边相连的两个点和这条边的权值。

## 输出格式

共一行，表示题目中所要计算的三元组的个数。

## 样例 #1

### 输入

```
4
1 2 4
3 1 2
1 4 7

```

### 输出

```
16

```

## 样例 #2

### 输入

```
4
1 2 4
1 3 47
1 4 7447

```

### 输出

```
24

```


---
title: "Reset K Edges"
layout: "post"
diff: 提高+/省选-
pid: CF1739D
tag: []
---

# Reset K Edges

## 题目描述

给你一棵由 $n$ 个点组成的编号为 $1 \sim n$ 的以 $1$ 为根的有根树，你可以进行 $k$ 次如下操作：

- 断开点 $u$ 与其父亲之间的边，并连接点 $1$ 与点 $u$。

定义树的高度为树上点的深度的最大值，点的深度为点到根的路径上经过的边的数量，问 $k$ 次操作后树的高度的最小值为多少。

## 输入格式

**本题有多组数据。**  
输入第一行一个整数 $T$ 表示数据组数。  

对于每组数据第一行输入两个正整数 $n$ 和 $k$，表示树的大小和操作次数。  
接下一行 $n-1$ 个正整数 $p_2,p_3,\cdots,p_n$，其中 $p_i$ 表示第 $i$ 个点的父亲。

## 输出格式

对于每组数据输出一行一个整数表示答案。

## 说明/提示

对于 $100\%$ 的数据：

- $1 \le T \le 10^4$
- $2 \le n \le 2 \cdot 10^5,0 \le k \le n-1$
- $\forall i \in [2,n],1 \le p_i < i$
- 每组数据的 $n$ 的总和不超过 $2 \cdot 10^5$

## 样例 #1

### 输入

```
5
5 1
1 1 2 2
5 2
1 1 2 2
6 0
1 2 3 4 5
6 1
1 2 3 4 5
4 3
1 1 1
```

### 输出

```
2
1
5
3
1
```


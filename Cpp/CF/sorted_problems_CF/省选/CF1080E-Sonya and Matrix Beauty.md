---
title: "Sonya and Matrix Beauty"
layout: "post"
diff: 省选/NOI-
pid: CF1080E
tag: []
---

# Sonya and Matrix Beauty

## 题目描述

一句话题意：给定一个 $n \times m$ 的字符矩阵，请求出有多少个子矩阵在重排子矩阵每一行的字符后，使得子矩阵的每行每列都是回文串。

Sonya 最近过了生日，她收到一个 $n \times m$ 的字符矩阵。

我们称一个子矩阵是美丽的，当且仅当在重新排列这个子矩阵每一行的字符后，使得这个子矩阵的每一行每一列都是回文串。

Sonya 想要知道这个矩阵中有几个子矩阵是美丽的。

## 输入格式

第一行两个整数 $n,m$，意义如上文所述。

接下来 $n$ 行一行 $m$ 个字符，表示这个子矩阵每一行的字符。

## 输出格式

一行一个整数，表示美丽的子矩阵数目

## 说明/提示

对于 $1 \leq m,n \leq 250$

## 样例 #1

### 输入

```
1 3
aba

```

### 输出

```
4
```

## 样例 #2

### 输入

```
2 3
aca
aac

```

### 输出

```
11
```

## 样例 #3

### 输入

```
3 5
accac
aaaba
cccaa

```

### 输出

```
43
```


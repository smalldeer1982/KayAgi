---
title: "Bring Balance"
layout: "post"
diff: 省选/NOI-
pid: CF1685C
tag: []
---

# Bring Balance

## 题目描述

Alina 有一个长度为 $2n$ 的括号序列 $s$，由 $n$ 个左括号 `(` 和 $n$ 个右括号 `)` 组成。她想把这个括号序列变成一个平衡括号序列。

平衡括号序列定义为：能通过插入字符 `+` 和 `1` 使之成为合法数学表达式的序列。例如，序列 `(())()`、`()` 和 `(()(()))` 是平衡的，而 `)(`、`(()` 和 `(()))(` 就不是的。

在一次操作中，她可以反转 $s$ 的任意子串。

请求出最少几次操作可将 $s$ 转换为平衡括号序列。可以证明，这总是能在 $n$ 次操作中完成。

## 输入格式

**本题单测试点有多组数据。**

第一行一个整数 $t$（$1 \le t \le 2 \cdot 10^4$），表示数据组数。

每组数据格式如下：

- 第一行一个整数 $n$（$1 \le n \le 10^5$），含义如上所述。
- 第二行为一个长度为 $2n$ 的括号序列，由 $n$ 个左括号 `(` 和 $n$ 个右括号 `)` 组成。

在一个测试点中，所有 $n$ 的总和不超过 $2\cdot 10^5$。

## 输出格式

对于每一组数据，第一行输出一个整数 $k$（$0 \le k \le n$），表示最少 $k$ 次操作可将 $s$ 转换为平衡括号序列。

在接下来的 $k$ 行中，第 $i$ 行有两个整数 $l_i,r_i$（$1 \le l_i \le r_i \le 2n$），表示在第 $i$ 次操作中，Alina 会反转子串 $s_{l}s_{l+1}\cdots s_{r-1}s_{r}$（序列从 $1$ 开始编号）。

如果有多种方式将原序列转换为平衡序列，输出其中任意一种即可。

## 说明/提示

在第一组数据中，字符串已经平衡。

在第二组数据中，字符串转换如下：`())((()))(`$\to$`()()(()))(`$\to$`()()(())()`，最后一个字符串是平衡的。

在第三组数据中，字符串最终将被转换为 `((()))((()))`。

## 样例 #1

### 输入

```
3
2
(())
5
())((()))(
6
())((()))(()
```

### 输出

```
0
2
3 4
9 10
1
2 11
```


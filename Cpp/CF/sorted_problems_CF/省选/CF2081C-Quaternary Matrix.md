---
title: "Quaternary Matrix"
layout: "post"
diff: 省选/NOI-
pid: CF2081C
tag: ['贪心', '构造']
---

# Quaternary Matrix

## 题目描述

若矩阵中所有元素均为 $0$、$1$、$2$ 或 $3$，则称该矩阵为四元矩阵。

当四元矩阵 $A$ 满足以下两个性质时，Ecrade 称其为好矩阵：
1. 矩阵 $A$ 的每一行中所有数字的按位异或（bitwise XOR）结果等于 $0$。
2. 矩阵 $A$ 的每一列中所有数字的按位异或（bitwise XOR）结果等于 $0$。

Ecrade 有一个 $n \times m$ 的四元矩阵。他想知道将该矩阵变为好矩阵所需修改的最少元素数量，并希望得到其中一个可能的修改后矩阵。

由于问题有一定难度，请你帮助他！

## 输入格式

每个测试包含多个测试用例。第一行输入测试用例数量 $t$（$1 \le t \le 2 \cdot 10^5$）。接下来描述每个测试用例。

每个测试用例的第一行包含两个整数 $n$ 和 $m$（$1 \le n, m \le 10^3$）。

接下来输入 $n$ 行，每行包含恰好 $m$ 个字符，且每个字符均为 $0$、$1$、$2$ 或 $3$，描述 Ecrade 的矩阵。

保证所有测试用例的 $n \cdot m$ 总和不超过 $10^6$。

## 输出格式

对于每个测试用例：
1. 第一行输出使矩阵变为好矩阵所需修改的最少元素数量。
2. 随后输出 $n$ 行，每行包含恰好 $m$ 个字符（均为 $0$、$1$、$2$ 或 $3$），描述其中一个可能的修改后矩阵。

若存在多个可行的修改后矩阵，可输出任意一个。

## 说明/提示

翻译由 DeepSeek R1 完成

## 样例 #1

### 输入

```
5
3 3
313
121
313
3 3
000
000
000
4 4
0123
1230
2301
3012
4 4
1232
2110
3122
1311
4 4
1232
2110
3122
1312
```

### 输出

```
3
213
101
312
0
000
000
000
0
0123
1230
2301
3012
6
0132
2310
3131
1313
5
0132
2310
3120
1302
```


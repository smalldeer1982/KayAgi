---
title: "Broken Tree"
layout: "post"
diff: 省选/NOI-
pid: CF758E
tag: []
---

# Broken Tree

## 题目描述

题面：

给定一棵有n个节点的树，其中一号点是根。每条边有重量和强度。如果一条边的强度小于这条边深度较大的点的子树内所有边重量和，则这条边会断裂。你可以降低一些边的重量，且被降低重量的边会损失等量的强度。每条边的最终重量必须为正整数，强度必须为非负整数。询问至少要降低多少重量，或者输出-1表示这棵树无论如何都会断裂。本题配有SPJ

## 输入格式

第一行一个数n表示节点数量
接下来n-1行每行四个数x,y,w,p表示x是y的父亲节点;这条边的重量w以及强度p

输出的树必须保证降低的重量和最小且没有边会断裂


由 @流风之回雪 提供翻译

## 输出格式

如果不存在满足条件的树则输出-1
否则第一行输出一个数n表示节点数量

## 样例 #1

### 输入

```
3
1 3 5 7
3 2 4 3

```

### 输出

```
3
1 3 5 7
3 2 4 3

```

## 样例 #2

### 输入

```
4
1 3 2 3
3 4 5 1
3 2 3 3

```

### 输出

```
-1
```

## 样例 #3

### 输入

```
5
1 2 2 4
2 4 1 9
4 5 5 6
4 3 4 8

```

### 输出

```
5
1 2 2 4
2 4 1 9
4 5 1 2
4 3 2 6

```

## 样例 #4

### 输入

```
7
1 2 5 2
2 3 4 3
1 4 3 7
4 5 4 1
4 6 3 2
6 7 1 6

```

### 输出

```
7
1 2 5 2
2 3 2 1
1 4 3 7
4 5 3 0
4 6 3 2
6 7 1 6

```


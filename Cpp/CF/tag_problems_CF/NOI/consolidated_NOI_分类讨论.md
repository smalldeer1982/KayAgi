---
title: "Delicate Anti-monotonous Operations"
layout: "post"
diff: NOI/NOI+/CTSC
pid: CF2053H
tag: ['分类讨论']
---

# Delicate Anti-monotonous Operations

## 题目描述

生活中有许多重复的工作，Iris 不喜欢它们，然而时间不能倒流，我们只好一路向前。

说回正题，Iris 有一个数列 $a$，数列中的每个数都是 $1$ 到 $w$ 之间的正整数（保证 $w\ge 2$。）。

Iris 定义单次操作为：选择数列中相邻且相等的两个数 $a_i$ 和 $a_{i+1}$，将它们变为 $1$ 到 $w$ 之间的任意两个正整数（可以与原来相同），但是由于 Iris 不喜欢相等的数，因此修改后的 $a_i$ 和 $a_{i+1}$ 必须不等（当然，允许因为后续操作导致 $a_i$ 和 $a_{i+1}$ 与先前操作过的数相等，即操作互相独立。每对数，每个数均可操作多次）。

现在，Iris 希望知道整个数列所有数字和的最大值，以及得到这个最大值所需的最少操作次数。


保证对于每组数据所有 $a_i$ 满足 $1\le a_i\le w$， 所有数据 $n$ 的和不超过 $10^6$。

## 输入格式

单个测试点有多组数据，将在输入的开头输入 $t$ 表示，$t\le10^5$。

## 输出格式

对于每组数据，输出一行两个数，分别为数列中数字和的最大值和达到此值所需最少操作次数。

## 说明/提示

#### 样例解释

对于第一组数据，所有 $a_i$ 互不相同，无法操作，因此最大值为 $1+2+3+4+5=15$，此时操作次数为 $0$。

对于第二组数据，操作方式为：

$$[3, 1, 2, 3, 4, \underline{1, 1}] \rightarrow [3, 1, 2, 3, \underline{4, 4}, 5] \rightarrow [3, 1, 2, \underline{3, 3}, 5, 5] \rightarrow [3, 1, \underline{2, 2}, 5, 5, 5] \rightarrow [3, \underline{1, 1}, 5, 5, 5, 5] \rightarrow [\underline{3, 3}, 5, 5, 5, 5, 5] \rightarrow [4, 5, 5, 5, 5, 5, 5]$$

可以证明不存在更好的方案，此时所有数字之和为 $34$，共 $6$ 次操作。


- $1\le n\le 10^5,2\le w\le10^8$。

- 单个测试点所有数据的 $n$ 之和不超过 $10^6$。

## 样例 #1

### 输入

```
2
5 8
1 2 3 4 5
7 5
3 1 2 3 4 1 1
```

### 输出

```
15 0
34 6
```



---

---
title: "Online Palindrome"
layout: "post"
diff: NOI/NOI+/CTSC
pid: CF2086F
tag: ['构造', '分类讨论']
---

# Online Palindrome

## 题目描述

这是一个交互题。

裁判有一个由小写拉丁字母组成的字符串 $s$。该字符串满足以下约束条件：
- 字符串长度为不超过 $99$ 的奇数；
- 字符串仅由字符 "a" 和 "b" 组成。

另外有一个初始为空的字符串 $t$。接下来会进行 $|s|$ 个步骤。在第 $i$ 个步骤中，会发生以下事件：
- 首先，裁判会告诉你字符 $s_i$ 并将其追加到字符串 $t$ 的末尾；
- 然后，你可以交换 $t$ 中的任意两个字符，或者什么都不做。

你的任务是确保在第 $|s|$ 个步骤之后，字符串 $t$ 是一个回文串。

## 输出格式

交互过程立即开始。

在每个步骤中，你的程序将接收一个字符——字符串 $s$ 的下一个字符，或者如果字符串已经结束则接收 "0"（零）。如果接收到字符 "0"，你的程序必须立即终止。

在接收到 $s_{i}$ 后，你必须输出要交换的字符的位置，即两个整数 $l$ 和 $r$（$1 \le l,r \le i$），或者如果你不想交换字符，则输出 "0 0"。

如果你的程序执行了无效操作，例如尝试交换不存在的字符位置，或者最终字符串 $t$ 不是回文串，裁判程序将在单独的一行打印一个字符 "X"。如果你的程序接收到 "X" 作为响应，它应该立即终止；否则，你的提交的判题结果将是未定义的。

本题的交互器不是自适应的，这意味着字符串 $s$ 在交互过程中不会改变。

在每次输出请求后，不要忘记输出换行符并刷新输出缓冲区。否则，你将收到 "Idleness limit exceeded" 的判题结果。为此，请使用：
- C++ 中的 `fflush(stdout)` 或 `cout.flush()`；
- Java 中的 `System.out.flush()`；
- Python 中的 `sys.stdout.flush()`；
- 其他语言请参考相关文档。

Hack 格式

对于 Hack，请使用以下格式。

第一行应包含一个整数 $|s|$ —— 字符串 $s$ 的长度。

第二行应包含字符串 $s$ 本身（$1 \le |s| \le 99$，$|s| \bmod 2 = 1$），由小写拉丁字母 "a" 和 "b" 组成。

## 说明/提示

翻译由 DeepSeek V3 完成

## 样例 #1

### 输入

```
a

a

b

0
```

### 输出

```
0 0

1 2

2 3
```

## 样例 #2

### 输入

```
a

a

b

a

b

0
```

### 输出

```
0 0

2 1

3 2

4 4

4 5
```



---


---
title: "Ruler (hard version)"
layout: "post"
diff: 普及/提高-
pid: CF1999G2
tag: ['数学', '三分']
---

# Ruler (hard version)

## 题目描述

本题是问题的困难版本。该版本与简单版之间的唯一区别是在这个版本中，你最多可以进行 $7$ 次查询。

这是一道交互题。

有一把有 $1001$ 个刻度的尺子，刻度分别为 $1 \sim 1001$。不幸的是，尺子丢失了一个刻度 $x$（$2 \le x \le 999$）。当你用尺子量一个长度为 $y$ 的物体时，尺子量出的结果为：
- 若 $y < x$，尺子将会量出正确的结果 $y$。
- 否则，尺子将会量出错误的结果 $y + 1$。

你需要找出丢失的刻度 $x$。你可以每次提供两个 $1$ 至 $1000$ 内的整数 $a,b$，你将会收到尺子量出的 $a$ 的长度与尺子量出的 $b$ 的长度之积。

你可以进行最多 $7$ 次询问。

## 输入格式

输入共一行一个整数 $T$，代表数据组数。

## 输出格式

你可以输出 `? a b` 以进行一次询问。`a` 和 `b` 的含义见上。随后，你将收到一个整数，表示尺子量出的 $a$ 的长度与尺子量出的 $b$ 的长度之积。

当你猜出 $x$ 后，你需要输出一行 `! x`，`x` 为你猜出的 $x$ 值。

如果你的询问大于 $7$ 次或猜出的 $x$ 值不对，你将收到一行一个 `-1`。请立刻终止程序。

在进行一次询问后，你需要刷新缓冲区。否则，你可能会获得 ILE（Idleness Limit Exceeded）。刷新缓冲区方法如下：
- 对于 C++：`fflush(stdout)` 或 `cout.flush()`；
- 对于 Java：`System.out.flush()`；
- 对于 Pascal：`flush(output)`；
- 对于 Python：`stdout.flush()`。

Translated by liuli688

## 样例 #1

### 输入

```
2

18

25


9999
```

### 输出

```
? 3 5

? 4 4

! 4
? 99 100

! 100
```



---

---
title: "Klee's SUPER DUPER LARGE Array!!!"
layout: "post"
diff: 普及/提高-
pid: CF2009E
tag: ['数学', '二分', '三分']
---

# Klee's SUPER DUPER LARGE Array!!!

## 题目描述

### 题目大意

你将得到一个长度为 $n$ 的序列 $a=[k,k+1,k+2,\dots, k+n-1]$，请求出 $S$ 的值，其中

$$S=\min\limits_{1\le x\le n}|(\sum\limits_{i=1}^x a_i)-(\sum\limits_{i=x+1}^n a_i)|$$

## 输入格式

**本题存在多组测试数据**。第一行为一个正整数 $T$（$1\le T\le 10^4$），表示数据组数。对于每组数据分别给出用空格隔开的两个整数 $n$ 与 $k$（$2\le n,k\le 10^9$）。

## 输出格式

对于每组数据，输出一行一个整数 $S$。

## 样例 #1

### 输入

```
4
2 2
7 2
5 3
1000000000 1000000000
```

### 输出

```
1
5
1
347369930
```



---


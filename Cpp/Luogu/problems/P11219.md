---
title: "【MX-S4-T3】「yyOI R2」youyou 的序列 II"
layout: "post"
diff: 省选/NOI-
pid: P11219
tag: ['博弈论', '线段树', '树状数组', 'O2优化', '梦熊比赛']
---
# 【MX-S4-T3】「yyOI R2」youyou 的序列 II
## 题目背景

原题链接：<https://oier.team/problems/S4C>。
## 题目描述

给定一个长度为 $n$ 的非负整数序列 $a$，初始时所有数均被标记为**蓝色**，youyou 和 yy 轮流对序列 $a$ 进行操作，由 youyou 开始。

- 如果当前是 youyou 的回合，那么他可以选择一个长度至多为 $c_1$ 的区间，如果该区间内所有数的和小于等于 $w_1$，则标记该区间所有数为**红色**。

- 如果当前是 yy 的回合，那么他可以选择一个长度至多为 $c_2$ 的区间，如果该区间内所有数的和大于 $w_2$，则标记该区间所有数为**蓝色**。

如果当前操作方没有可操作的区间，他将跳过本回合。

定义 youyou 胜利即是在游戏任意时刻，所有数都被标记为红色。定义 yy 胜利则是在 $10^{51971}$ 个回合内，youyou 无法胜利。两者都会以最优策略进行游戏。

但是他们认为这个游戏太简单了，于是决定上上强度。

现在给定 $q$ 个操作，对于每个操作给定三个数 $opt,x,y$。

- 如果 $opt$ 为 $1$，表示将 $a_x$ 增加 $y$（$0\le y \le 10^9$）。
- 如果 $opt$ 为 $2$，表示 youyou 和 yy 将在区间 $[x,y]$ 所形成的序列上进行一轮游戏。

对于每个 $opt=2$ 的操作，请你求出在区间 $[x,y]$ 所形成的序列上进行游戏，youyou 能否获得胜利。如果 youyou 能胜利，输出 ```cont```；否则，输出 ```tetris```。

## 输入格式

第一行，六个整数 $n,q,c_1,c_2,w_1,w_2$，其中 $n$ 为序列长度，$q$ 为操作个数，$c_1,c_2,w_1,w_2$ 的定义在题目描述中给出。

第二行，$n$ 个整数 $a_1, a_2, \ldots, a_n$。

接下来 $q$ 行，每行三个整数 $opt,x,y$，表示一个操作，操作的定义在上面已给出。
## 输出格式

对于每一个 $opt=2$ 的操作，输出一行表示答案。

## 样例

### 样例输入 #1
```
5 3 4 2 2 3
1 0 0 1 1
2 1 5
1 3 3
2 1 5
```
### 样例输出 #1
```
cont
tetris

```
### 样例输入 #2
```
8 6 10 3 5 2
0 1 0 0 1 0 0 1
2 1 7
1 4 2
2 5 7
1 5 1
1 7 2
2 1 8
```
### 样例输出 #2
```
cont
cont
tetris

```
## 提示

**【样例解释 #1】**

第一次游戏在序列 $[1,0,0,1,1]$ 上进行。

回合 $1$：youyou 将区间 $[1,3]$ 内的数染红。

回合 $2$：yy 没有可操作的区间，**跳过**了本回合。

回合 $3$：youyou 将区间 $[4,5]$ 内的数染红。

此时所有数都被染红，youyou 获胜，输出  ```cont```。

第二次游戏在序列 $[1,0,3,1,1]$ 上进行。

容易发现，此时 youyou 无法获胜，输出 ```tetris```。


**【样例 #3】**

见附件中的 ```seq/seq3.in``` 与 ```seq/seq3.ans```。

该组样例满足测试点 $5\sim 8$ 的约束条件。

**【样例 #4】**

见附件中的 ```seq/seq4.in``` 与 ```seq/seq4.ans```。

该组样例满足测试点 $9\sim10$ 的约束条件。

**【样例 #5】**

见附件中的 ```seq/seq5.in``` 与 ```seq/seq5.ans```。

该组样例满足测试点 $11\sim 14$ 的约束条件。

**【数据范围】**

本题共 $20$ 个测试点，每个 $5$ 分。

|  测试点编号  |          $n$          |         $q$         |  特殊性质  |
| :----------: | :-------------------: | :-----------------: | :--------: |
|  $1\sim 4$   |       $\le10^2$       | $\le 3 \times 10^2$ | A |
|  $5 \sim 8$  |       $\le10^3$       | $\le 3 \times 10^3$ | B |
| $9 \sim 10$  |       $\le10^4$       | $\le 3 \times 10^4$ | C |
| $11 \sim 14$ |     $\le  10 ^ 5$     | $\le 3 \times 10^5$ | D |
| $15\sim 20$  | $\le 3 \times 10 ^ 5$ | $\le 3 \times 10^5$ |     无     |

特殊性质 A：$c_2 > n$，$w_2 = 0$。  
特殊性质 B：$w_1 \le w_2$。  
特殊性质 C：$c_1 \le c_2$。  
特殊性质 D：$c_1,c_2 \le 10^3$。

对于全部数据，保证：
- $1\le n,q,c_1,c_2\le 3\times10^5$。
- $0\le a_i,w_1,w_2\le 10^9$。
- $opt\in \{1,2\}$。
- 对于 $opt=1$ 的操作，$1\leq x\leq n$，$0\leq y\leq 10^9$。
- 对于 $opt=2$ 的操作，$1\leq x\leq y\leq n$。
- 至少有一个 $2$ 类操作。

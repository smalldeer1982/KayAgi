---
title: "[Code+#6] 祖玛"
layout: "post"
diff: 提高+/省选-
pid: P11444
tag: ['动态规划 DP', '区间 DP', 'Code+']
---
# [Code+#6] 祖玛
## 题目背景

搬运自 [Code+ 第 6 次网络赛](https://gitlink.org.cn/thusaa/codeplus6/)。

------------


小粽还是一个小粽子的时候，特别喜欢玩一款叫作祖玛的游戏。现在，小粽长大了。为了纪念她的童年时光，她开发了一款新型祖玛游戏，并为你准备了一个问题。
## 题目描述

小粽的祖玛游戏的游戏规则可以抽象为如下模型：

初始时，有一段长度为 $n$ 的正整数序列 $a_1,a_2,\dots,a_n$。游戏过程中，小粽会对这个序列进行一系列规则相同的操作：从序列中选取连续且相同的一段数，设这段数的长度为 $X$，如果这些数的值都相等，那么小粽可以把这些数从序列中删除，并将序列从删除的位置接起来，例如，对于序列 `2 3 3 3 1`，可以删除中间的 `3 3 3`，得到 `2 1`。

不过，小粽觉得只是这样太简单了，于是她选择了两个数 $X_{min},X_{max}$，并且要求每次删除的那段数的长度 $X$ 要满足 $X_{min}\le X\le X_{max}$。

显然小粽能进行的操作次数是有限的，甚至她有可能不能把整个序列删除完。现在，小粽想要知道，她每次删除的数的长度的平方和是多少。即，设 $X_i$ 为第 $i$ 次删除的数的长度，最大化 $\sum X_i^2$。

出题固然很爽，但是小粽发现自己现在不会做了。请你帮小粽求出这个最大值吧！
## 输入格式

输入第一行为一个正整数 $n$，表示初始时序列的长度。

接下来一行包含 $n$ 个正整数，描述这个序列，第 $i$ 个数为 $a_i$。

输入的第三行为两个正整数 $X_{min},X_{max}$。

对于所有的输入数据都满足 $1\le n\le 100$，$1\le a_i\le n$，$1\le X_{min}\le X_{max}\le n$。
## 输出格式

输出一行一个整数，表示 $\sum X_i^2$ 的最大值。
## 样例

### 样例输入 #1
```
8
2 1 1 1 2 2 1 2
1 2
```
### 样例输出 #1
```
16
```
## 提示

### 样例解释

**【样例 1】**

最优策略为，先删除中间的两个 `2 2`，然后删除连续删除两个 `1 1`，最后删除剩下的 `2 2`。注意，由于 $x_{max}$ 的限制，无法删除 `1 1 1`。

**【样例 2】**

见题目目录下的 `2.in` 与 `2.ans`。

### 数据范围

对于所有的输入数据都满足 $1\le n\le 100$，$1\le a_i\le n$，$1\le X_{min}\le X_{max}\le n$。

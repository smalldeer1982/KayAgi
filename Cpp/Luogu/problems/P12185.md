---
title: "[蓝桥杯 2025 省 Python A/研究生组] IPv6"
layout: "post"
diff: 普及+/提高
pid: P12185
tag: ['数学', '2025', '枚举', '组合数学', '蓝桥杯省赛']
---
# [蓝桥杯 2025 省 Python A/研究生组] IPv6
## 题目描述

小蓝最近在学习网络工程相关的知识。他最近学习到，IPv6 地址本质上是一个 $128$ 位的二进制数，而字符串形式的 IPv6 地址是由被冒号分开的八段 $16$ 进制数组成的，例如, 下面每行是一个字符串形式的 IPv6 地址:

```plain
0000:0000:0000:0000:0000:0000:0000:0000
0000:0001:0000:0000:0000:0001:0000:0000
0000:0001:00ab:0000:0023:0000:0a00:0e00
0000:0000:00ab:0000:000a:0001:0a00:0e00
0000:0000:00ab:0000:0000:0001:0a00:0e00
```

其中，每一段最长 $4$ 位，且每一段的前导零都可以去掉 (如果 $4$ 位都为 $0$ 需要写成 $0$ )。

另外，IPv6 地址还可以将其中相邻的值为 $0$ 的段合并压缩起来，用两个冒号来表示，不过只能压缩一段。

例如上述地址最短的压缩后的形式分别为：

```plain
:: 
0:1::1:0:0
0:1:ab::23:0:a00:e00
::ab:0:a:1:a00:e00
0:0:ab::1:a00:e00
```

小蓝想知道，所有 IPv6 地址的最短压缩形式的长度的和为多少？由于答案很大 (甚至超过了 $128$ 位二进制整数的范围)，请填写答案时填写这个总和除以 $10^{9} + 7$ 的余数。
## 输出格式

这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。

---
title: "[GCPC 2024] Fair Fruitcake Fragmenting"
layout: "post"
diff: NOI/NOI+/CTSC
pid: P13721
tag: ['计算几何', '2024', 'Special Judge', 'ICPC', '双指针 two-pointer']
---
# [GCPC 2024] Fair Fruitcake Fragmenting
## 题目描述

Frida's birthday is just coming up, and as her best friend, you obviously baked a cake for her.
Since you know that Frida loves rotational symmetry, you thought to bake a cake that
looks the same from above when rotated by $180^\circ$.
Of course, you could have simply baked a boring round cake, but without a perfectly round cake tin, this sounds easier than done.
Therefore, you decided to bake a cake whose shape can be described by straight line segments.

![](https://cdn.luogu.com.cn/upload/image_hosting/j4oo5c4y.png)

:::align{center}

Figure F.1: Visualization of Sample Input 2. The swirly cake looking like an S can be cut into the red and blue part with a single cut.

:::

However, after you are done with your cake, you notice that you also want to cut the cake into two equal pieces, one for Frida and one for yourself.
More precisely, you wonder if it is possible to cut the cake along an infinite line such that it splits into exactly two
parts of equal weight.
You can assume that the cake has uniform density and height.
## 输入格式

The input consists of:
- One line containing an *even* integer $n$ ($4 \leq n\leq 10^5$), the number of points needed to describe the cake's shape.
- $n$ lines, each containing two integers $x$, $y$ ($0\leq x,y \leq 10^6$), the $x$ and $y$ coordinates of a point on the border of the cake's shape.

The following additional guarantees are given for the shape of the cake:
- The cake has a $180^\circ$ rotational symmetry.
- The points are given in counterclockwise order.
- No three consecutive points are collinear.
- The shape is simple (no segments intersect and only consecutive segments touch at their ends).
## 输出格式

Output two different points on the desired line as $x_1/c_1$ $y_1/d_1$ $x_2/c_2$ $y_2/d_2$, where $|x_i|$, $|y_i|$, $|c_i|$ and $|d_i|$ are integers and at most $10^9$, and $x_i/c_i$} is the first coordinate of point $i$ and $y_i/d_i$ is the second ($1\leq i\leq2$). If the denominator of a fraction is $1$ you may output only the numerator. Fractions do not have to be reduced. If there is no such line, output "$\texttt{impossible}$" instead.

It can be shown that if there is a line as desired, it is possible to represent it in the given format.
## 样例

### 样例输入 #1
```
4
0 0
2 0
2 2
0 2
```
### 样例输出 #1
```
1 1 1337/42 3141/1000
```
### 样例输入 #2
```
20
7 1
8 2
8 5
7 6
4 6
4 4
3 4
3 7
6 7
7 8
2 8
1 7
1 4
2 3
5 3
5 5
6 5
6 2
3 2
2 1
```
### 样例输出 #2
```
11 13 -2 -4
```
### 样例输入 #3
```
10
11 5
10 2
12 6
2 2
7 3
1 1
2 4
0 0
10 4
5 3
```
### 样例输出 #3
```
impossible
```

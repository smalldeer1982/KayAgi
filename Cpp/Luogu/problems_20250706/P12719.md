---
title: "[Algo Beat Contest 002 F] Famous Basketball Games"
layout: "post"
diff: 提高+/省选-
pid: P12719
tag: ['动态规划 DP', 'O2优化']
---
# [Algo Beat Contest 002 F] Famous Basketball Games
## 题目背景

| Problem | Score | Idea | Std | Data | Check | Solution |
| :----------------------------------: | :---: | :---------------------------------------------------: | :---------------------------------------------------: | :---------------------------------------------: | :-------------------------------------------------: | :----------------------------------------------------------: |
|  $\text{F - Famous Basketball Games}$  | $550$ | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [篮网总冠军](https://www.luogu.com.cn/user/547238) | [LostKeyToReach](https://www.luogu.com.cn/user/764666)  | [Link](https://www.luogu.com.cn/article/k8hp1mrf) by [篮网总冠军](https://www.luogu.com.cn/user/547238)


小 A 可喜欢打街球了......

![](https://cdn.luogu.com.cn/upload/image_hosting/q00do8x8.png?x-oss-process=image/resize,m_lfit,h_1700,w_2250)


P.S. 本题出题人是妥妥的篮网球迷！
## 题目描述

小 A 收到了 $n$ 场路人王比赛主办方的邀请，他将会**从家出发**去打比赛。打第 $i$ 场比赛需要 $a_i$ 分钟，在第 $s$ 分钟到达第 $i$ 场比赛场地需要等待 $c_i \times s +b_i$ 分钟才能打比赛。**到达后必须立刻开始等待，等待结束后必须立刻开始比赛**。从小 A 的家中到任何一场比赛的场地和从任何一场比赛的场地到另外一场比赛的场地时间相同，都是 $x$ 分钟。

小 A 因为打比赛会消耗大量的体力，所以带上了**一份**饭。除非他不出去比赛，否则他必须选择**任意一场自己要打的比赛**并在**这场比赛结束后立即吃饭**，吃饭需要 $d$ 分钟。

小 A 的妈妈希望小 A 在出门后的 $T+0.01$ 分钟前**回到家**。问小 A 最多能参加几场比赛？

**注意：无论是吃饭，等待，比赛或行走都必须连续进行，不能分成两段。同时只能进行一项行为，比如不能在行走时吃饭。**

**显然，同一场比赛不能打多次。**
## 输入格式

第一行输入四个整数 $n,x,d,T$，含义见题目描述。

然后有 $n$ 行，每行输入三个整数  $a_i,b_i,c_i$，含义见题目描述。

## 输出格式

输出一行一个整数，代表最多能打的比赛的个数。
## 样例

### 样例输入 #1
```
3 2 4 20
1 2 3
2 3 1
1 3 2
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
10 11 1256 42668
572 678 14
517 17 20
886 680 24
237 944 12
870 321 2
598 273 13
824 228 20
73 824 6
910 891 10
953 502 9
```
### 样例输出 #2
```
3
```
## 提示

**【样例解释 #1】**

对于第一组样例，你可以先出发去第 $2$ 场比赛，在比赛后吃饭，然后回家，总时间为 $15$ 分钟，且不能再打别的比赛。

**【数据范围】**

- $1 \le n \le 2 \times 10^5$。
- $1 \le a_i,b_i,T \le 10^9$，$0 \le x,d,c_i \le 10^9$。

### 请仔细阅读本题题面。

# [GESP202312 三级] 单位转换

## 题目描述

小杨这周的数学作业是做单位转换，喜欢编程的小杨决定编程帮他解决这些问题。

小杨只学了长度单位和重量单位，具体来说：

- 长度单位包括千米（`km`）、米（`m`）、毫米（`mm`），它们之间的关系是：$1\text{km} = 1000\text{m} = 1000000\text{mm}$。

- 重量单位包括千克（`kg`）、克（`g`）、毫克（`mg`），它们之间的关系是：$1\text{kg} = 1000\text{g} = 1000000\text{mg}$。

小杨的作业只涉及将更大的单位转换为更小的单位，也就是说，小杨的作业只会包含如下题型：米转换为毫米，千米转换为毫米，千米转换为米，克转换为毫克，千克转换为毫克，千克转换为克。

现在，请你帮忙完成单位转换的程序。

## 样例 #1

### 输入

```
2
1 km = ? mm
1 m = ? mm```

### 输出

```
1 km = 1000000 mm
1 m = 1000 mm```

## 样例 #2

### 输入

```
5
100 m = ? mm
1000 km = ? m
20 kg = ? g
200 g = ? mg
0 kg = ? mg```

### 输出

```
100 m = 100000 mm
1000 km = 1000000 m
20 kg = 20000 g
200 g = 200000 mg
0 kg = 0 mg```

# 题解

## 作者：cff_0102 (赞：66)

根据题意，本题只有 `k*` 换 `*`，`*` 换 `m*` 或 `k*` 换 `m*` 三种情况。分类讨论即可。

具体见下面代码注释。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	ios::sync_with_stdio(0);cin.tie(0);
	int n;cin>>n;
	while(n--){
		int a;
		string b,c;
		cin>>a>>b>>c>>c>>c;
		if(b.length()==1||c.length()==1){//* 换 m* 或 k* 换 *，都要 *1000
			cout<<a<<" "<<b<<" = "<<a*1000<<" "<<c<<endl;
		}else{//k* 换 m*，要 *1000000
			cout<<a<<" "<<b<<" = "<<a*1000000<<" "<<c<<endl;
		}
	} 
	return 0;
}
```

楼上题解都写这么麻烦是干什么。

---

## 作者：2345A (赞：27)

#  思路：

这道题的思路很简单，只要模拟题意即可

# 重点：
长度单位包括千米（``km``）、米（``m``）、毫米（``mm``），它们之间的关系是：
$1km$=$1000m$=$1000000mm$

 重量单位包括千克（``kg``）、克（``g``）、毫克（``mg``），它们之间的关系是：$1kg$=$1000g$=$1000000mg$
 
# 难点
难点是格式！格式！格式！
 
输入的时候万万不可把所有字符归为一个字符串内，输出的时候记得打上空格，不然会爆错。


# 代码
```


#include<bits/stdc++.h>
using namespace std;
int main()
{
	long long n,a,ans;//开long long是好习惯
    string b,e;
    char c;
	cin>>n;
	for(int i=0;i<n;i++)
	{ 
		cin>>a>>b>>c>>c>>e;//一个一个输入
		if(b=="g")
		{
			if(e=="mg")
			ans=a*1000;
			else 
			ans=a*1;//也可以不写*1，但这样更直观
		}
		else if(b=="kg")
		{
			if(e=="g")
			ans=a*1000;
			else if(e=="mg")
			ans=a*1000000;
			else 
			ans=a*1;
		}
		else if(b=="mg")
		{
			ans=a*1;
		}
		else if (b=="m")
		{
		 if(e=="mm")
			ans=a*1000;
			else 
			ans=a*1;
		}
		else if(b=="km")
		{
			if(e=="m")
			ans=a*1000;
			else if(e=="mm")
			ans=a*1000000;
			else 
			ans=a*1;
		}
		else if(b=="mm")
		{
			ans=a*1;
		}
		cout<<a<<" "<<b<<" = "<<ans<<" "<<e<<endl;
	}
	return 0;//return 0是好习惯
}
```

---

## 作者：littlesnake (赞：15)

### 思路
读入 $n$，然后每次读入，挨个枚举两个单位，进行转换。

看到题解区一位大佬把所有情况都列出来了，其实仔细看题就可以知道**小杨的作业只涉及将更大的单位转换为更小的单位**，因此枚举的就不用那么多了。
### 坑点
如果使用 `cin` 进行输入的话，每次读入都会跳过一个空格，这样就不必读入太多空格了。

我其实就死在这里好几次。
### 代码
讲了这么多，大家已经迫不及待了吧，所以咱们话不多说，上代码！

```cpp
#include <bits/stdc++.h>
using namespace std;
int n,a1,a2;
string d1,d2;
char c;
int main(){
	cin>>n;
	while(n--){
		cin>>a1>>d1>>c>>c>>d2;
		if(d1=="m"&&d2=="mm"){
			a2=a1*1000;
		}else if(d1=="km"&&d2=="mm"){
			a2=a1*1000000;
		}else if(d1=="km"&&d2=="m"){
			a2=a1*1000;
		}else if(d1=="g"&&d2=="mg"){
			a2=a1*1000;
		}else if(d1=="kg"&&d2=="mg"){
			a2=a1*1000000;
		}else if(d1=="kg"&&d2=="g"){
			a2=a1*1000;
		}
		cout<<a1<<" "<<d1<<" = "<<a2<<" "<<d2<<"\n";
	}
	return 0;
}

```
### 最后
不要看这道题的难度是入门（红题），但也是有坑的，大家要注意，不要掉进坑里。另外注意输入输出格式，再见啦！


---

## 作者：封禁用户 (赞：6)


[题目传送门](https://www.luogu.com.cn/problem/B3926)

## 题意 

输入一个串，进行**单位换算**。

## 思路

输入时截取到有效部分（单位、原数），再判断情况：

- 1. 当字符串 $s$ 长度为 $1$，也就是为`g`或`m`时，其份数为 $1000$。

- 2. 当字符串 $s$ 第一个字符为`k`时，其份数为 $1000000$。

- 3. 前两个均不符合，其份数为 $1$。

## [AC](https://www.luogu.com.cn/record/145344177) 代码

```cpp
#include <bits/stdc++.h>
using namespace std;
char s1[5], s2[5];
int T, x;
int f(char *s) {
	if (strlen(s) == 1) return 1000;
	return s[0] == 'k' ? 1000000 : 1;
}
int main() {
	cin >> T;
	while(T--) {
		cin >> x >> s1 >> s2 >> s2 >> s2;//多次输入可以改变s2的内容
		printf("%d %s = %d %s\n", x, s1, x * f(s1) / f(s2), s2);
	}
	return 0;
}
```

---

## 作者：Vct14 (赞：6)

注意到题目中提到且单位 $1$ 比单位 $2$ 更大，可以省一些判断。

输入时，按照数 $1$、字符串 $1$、字符（等于号）、字符（问号）、字符串 $2$ 的格式输入即可。

转换时也可以简化。仅当字符串 $1$ 是 `k*` 的形式（`*` 代表 `m` 或者 `g`），将其转换成长度为 $2$ 的单位时，答案为数 $1$ 后接 $6$ 个 $0$；否则答案为数 $1$ 后接 $3$ 个 $0$。

注意特判值为 $0$ 的情况。

```c++
#include<bits/stdc++.h>
using namespace std;

int main(){
	int t;cin>>t;
	while(t--){
		int m;char c;string a1,a2;
		cin>>m>>a1>>c>>c>>a2;
		cout<<m<<" "<<a1<<" = "<<m;
		if(m==0){
			cout<<" "<<a2<<"\n";
			continue;
		}
		if(a1[0]=='k' && a2.length()==2) cout<<"000";
		cout<<"000 "<<a2<<"\n";
	}
	return 0;
}

```

---

## 作者：nkrqzjc_zzz (赞：5)

### [题目链接](https://www.luogu.com.cn/problem/B3926)

------------

### 思路

这道题感觉上是一道比较难的红题。具体思路其实很简单，按照题目要求进行输入判断，单位转换。但是因为本道题的数字是穿插在字符串之中，所以要求做题者对字符串有一定的熟练度。

这里我的数字字符串分离方法是使用 ```cin```。因为 ```cin``` 所有的输入会省略掉所有的空格读入，但是当此函数遇到空格的时候，就会将接下来的读入放入下一个函数。

所以我们的读入就可以写成这样：```cin>>b>>d>>f>>f>>e;```。

其中 ```b``` 代表的就是最开始输入的数字。```d``` 代表的是单位 1。```e``` 代表的是单位 2。而 ```f``` 则是用来输入掉 ```=``` 和 ```?``` 的。

------------

### 代码

接下来就看看代码吧。

```cpp
#include<bits/stdc++.h>
long long a,b,c;
std::string d,e;
char f;
main(){
	scanf("%lld",&a);
	for(int i=1;i<=a;i++){ 
		std::cin>>b>>d>>f>>f>>e;//本道题中最重要的输入代码 
		if(d=="g"){
			if(e=="kg")c=b/1000;
			else if(e=="mg")c=b*1000;
			else c=b;
		}else if(d=="kg"){
			if(e=="g")c=b*1000;
			else if(e=="mg")c=b*1000000;
			else c=b;
		}else if(d=="mg"){
			if(e=="g")c=b/1000;
			else if(e=="kg")c=b/1000000;
			else c=b;
		}else if (d=="m"){
			if(e=="km")c=b/1000;
			else if(e=="mm")c=b*1000;
			else c=b;
		}else if(d=="km"){
			if(e=="m")c=b*1000;
			else if(e=="mm")c=b*1000000;
			else c=b;
		}else if(d=="mm"){
			if(e=="m")c=b/1000;
			else if(e=="km")c=b/1000000;
			else c=b;
		}
		//上面的一大串条件语句是进行进制转换使用的，简单但是不要粗心！ 
		std::cout<<b<<" "<<d<<" = "<<c<<" "<<e<<'\n';//输出 
	}
}
```


---

## 作者：newbieTroll (赞：3)

本题只需按题意模拟即可。

首先，输入数据组数（题目数量） `n`。

接下来，使用 `for` 循环或 `while` 循环枚举这 `n` 道题。接下来，我来讲一下如何处理每道题目：

1. 输入

可以使用 `cin`，输入 `x`，单位 $1$，中间没用的 `= ?`，单位 $2$。这里不需要考虑空格，因为 `cin` 可以把空格自动过滤掉。

也可以用 `scanf`，不过我习惯用 `cin`。

局部代码：

```cpp
cin>>n>>a>>ee>>ee>>b;
```
这里的 `n` 代表 `x`，`a` 代表单位 $1$，`b` 代表单位 $2$，`ee` 是为了过滤掉中间没用的东西。

2. 转换

因为本题只涉及到 $6$ 种单位，可以枚举每一种单位的情况，依次判断。

局部代码：

```cpp
if(a=="km"){
	if(b=="m") ans=n*1000;
	else if(b=="mm") ans=n*1000000;
	else ans=n;
}else if(a=="m"){
	if(b=="km") ans=n/1000;
	else if(b=="mm") ans=n*1000;
	else ans=n;
}else if(a=="mm"){
	if(b=="m") ans=n/1000;
	else if(b=="km") ans=n/1000000;
	else ans=n;
}else if(a=="kg"){
	if(b=="g") ans=n*1000;
	else if(b=="mg") ans=n*1000000;
	else ans=n;
}else if(a=="g"){
	if(b=="kg") ans=n/1000;
	else if(b=="mg") ans=n*1000;
	else ans=n;
}else{
	if(b=="g") ans=n/1000;
	else if(b=="kg") ans=n/1000000;
	else ans=n;
}
```

3. 输出

依次输出 `x`，单位 $1$，` = `，答案，单位 $2$ 即可，注意换行。

`cout` 和 `printf` 都可以用，就看自己习惯哪个。

局部代码：

```cpp
cout<<n<<' '<<a<<" = "<<ans<<' '<<b<<endl;
```

---

## 作者：zhang_Jimmy (赞：3)

# 思路

我们可以按照单位的进率进行分类讨论：

- 进率为 $1000$ 的单位转换有：米转换为毫米，千米转换为米，克转换为毫克，千克转换为克。这些情况在输出时，直接将输入的数乘 $1000$ 就可以了。

- 进率为 $1000000$ 的单位转换有：千米转换为毫米，千克转换为毫克。这些情况在输出时，直接将输入的数乘 $1000000$ 就可以了。

由于题目说了“只涉及将更大的单位转换为更小的单位”，所以这样做是可行的。

还需要注意一下输入：输入是数字夹在字符串里，因为每部分有空格，所以我选择了用 `cin` 读入（因为 `cin` 读入会过滤掉空格，就会将接下来的值放到下一个变量当中了）。

代码如下：

```cpp
#include <bits/stdc++.h>
using namespace std;

int t, n;
string dw1, dw2;
char tmp;

int main(){
	cin >> t;
	while(t --){
		cin >> n >> dw1 >> tmp >> tmp >> dw2;
		if((dw1 == "km" && dw2 == "m") || 
			(dw1 == "kg" && dw2 == "g") || 
			(dw1 == "m" && dw2 == "mm") ||
			(dw1 == "g" && dw2 == "mg"))
				cout << n << " " << dw1 << " " << '=' << " " << n * 1000 << " " << dw2 << endl;
		else
			cout << n << " " << dw1 << " " << '=' << " " << n * 1000000  << " " << dw2 << endl;
	}
	return 0;
}

```


---

## 作者：jqQt0220 (赞：2)

题解区一篇题解是用一大堆 `if` 判断，但我想说：太麻烦了！

既然题目规定了只有大单位转小单位，还把可能出现的题型全列出来了，那么我们可以直接用 `map<pair<string,string>,int>`，前面的存两个互相转换的单位，后面的存进率。因为输入中有一大堆空格，所以我们可以利用 cin 的特性直接读入。输出需要格式化，所以可以用 printf。但是可能有人有疑问了：怎么用 printf 输出 `std::string` 类型呢？`string::c_str()` 成员函数可以返回这个字符串的对应 `char *` 类型字符串，即 C 风格字符串，就可以用 `printf("%s",s.c_str())` 输出了。

代码如下：
```cpp
map<pair<string,string>,int> q;
pair<string,string> pss(string _first,string _second)//为了防止直接 make_pair("m","mm") 返回 pair<const char *,const char *> 类型导致 CE
{
    return make_pair(_first,_second);//const char * 强转成了 string 就能直接 make_pair 了
}
int main()
{
    ___();
    //存进率
    q[pss("m","mm")]=1000;
    q[pss("km","mm")]=1000000;
    q[pss("km","m")]=1000;
    q[pss("g","mg")]=1000;
    q[pss("kg","mg")]=1000000;
    q[pss("kg","g")]=1000;
    int _;
    cin>>_;//数据组数
    while(_--)
    {
        int x;
        string a,b,qwq;
        cin>>x>>a>>qwq>>qwq>>b;//x 是题面给到了的，a 和 b 分别是单位 1 和 2，qwq 是用来过滤 = 和 ? 的
        printf("%d %s = %d %s\n",x,a.c_str(),x*q[pss(a,b)],b.c_str());//直接格式化输出
    }
    return 0;
}
```

---

## 作者：linch (赞：2)

## 题意
输入 $n$ 个式子，提供原数据、原单位、目标单位，要将数据从原来的单位转换为目标单位。

## 解决
一道简单的模拟题。本题字单位、数据都用空格分隔开来，因此用 `cin` 比较方便，每次读入到空格，从而把原数据、单位和符号分开。（注意两个符号也要用字符串或字符变量输入）

另外题目保证是大单位转换为小单位，所以无需考虑小数。

我的方法不同于上一篇直接列举所有情况，而是算出两个单位分别等于多少最小的单位，存储在变量中。用原数据乘上这两个变量的比值即为转换后的数据，按格式输出即可。

详细信息请看代码。

## 代码
```cpp
#include<iostream>
using namespace std;
int a,n;//a 为原数据，n 为式子数。
string b,c,d,e;//字符串，b 和 e 为两个单位，c 和 d 用来输入没用的两个符号。 
int x,y;
int main(){
    cin>>n;
    for(int i=1;i<=n;i++){
        cin>>a>>b>>c>>d>>e;//输入。
        if(b=="km"){
            x=1000000;
        }
        else if(b=="m"){
            x=1000;
        }//无需考虑 mm。
        else if(b=="kg"){
            x=1000000;
        }
        else{
            x=1000;
        }//也不用考虑 mg。
        //以上的 if 语句记录原单位相当于多少最小单位。
        if(e=="m"){
            y=1000;
        }
        else if(e=="mm"){
            y=1;
        }//无需考虑 km。
        else if(e=="g"){
            y=1000;
        }
        else{
            y=1;
        }//也不用考虑 kg。
        //以上的 if 语句记录转换后单位相当于多少最小单位。
        cout<<a<<" "<<b<<" = "<<a*x/y<<" "<<e<<endl;//按格式输出，注意不要漏空格。
    }
    return 0;
}
```

[AC 记录](https://www.luogu.com.cn/record/145260848)

---

## 作者：York佑佑 (赞：1)

## 分析
首先注意到字符串之间存在空格，可以将一行字符串改为用 `cin` 读入 $5$ 个字符串 $s_1,s_2,s_3,s_4,s_5$。观察样例可以发现，刚刚读入的  $s_1,s_2,s_3,s_5$ 是可以原封不动地输出的，唯独 $s_4$ 需要将其改为 $s_1$ 输出并且在后面添 `0`（题目中要求单位 $1$ 比单位 $2$ 更大，所以不可能减少 `0`）。

至于添加几个 `0`，可以用判断来实现，也可以用 map 来做。这里提供 map 的做法。

首先你要确定加几个零，就要确定两个单位之间的差距有多大。根据单位的大小我们可以将其划分为三类。其中 `kg` 和 `km` 对应 $3$，`g` 和 `m` 对应 $2$，`mg` 和 `mm` 对应 $1$。用代码实现如下：

```cpp
map<string,int> m;
m["kg"]=3,m["km"]=3,m["g"]=2,m["m"]=2,m["mm"]=1,m["mg"]=1;
```

然后注意到每一个大单位转换到下一级的小单位都需要添加 $3$ 个零，则添加零的个数为 $3 \times (m_{s_2}-m_{s_5})$ 个。

**注意：$s_1$ 为 `0` 时不应添 `0`。**

## 代码

```cpp
#include <bits/stdc++.h>
using namespace std;
int T;
map<string,int> m;
string s1,s2,s3,s4,s5;
int main()
{
	m["kg"]=3,m["km"]=3,m["g"]=2,m["m"]=2,m["mm"]=1,m["mg"]=1;
	cin>>T;
	while(T--)
	{
		cin>>s1>>s2>>s3>>s4>>s5;
		cout<<s1<<" "<<s2<<" "<<s3<<" "<<s1;//s1,s2,s3,s5原封不动输出
		if(s1!="0")	for(int i=m[s5]; i<m[s2]; i++)	cout<<"000";//添加3*(m[s2]-m[s5])个0
		cout<<" "<<s5<<endl;
	}
	return 0;
}
```



---

## 作者：SMall_X_ (赞：1)

[原题传送门](https://www.luogu.com.cn/problem/B3926)


---

## 思路分析

本题的难点主要在于如何读入一个等式。

例如：

```
1 km = ? mm
```

我们可以一步步读入：

- 用一个整型变量读入大单位对应的数 $x$。

- 因为 `cin` 不会读入空格，我们可以不去管空格，我们就只需要读入一个字符串，读入大单位。

- 题中等式的格式相同，`=` 和 `?` 始终位置不变，我们读入两个字符读入这两个多余的字符。

- 最后读入一个字符串表示小单位。

读入后，直接多分支进行输出单位之间的转换即可。

注意空格，不要忘记多组输入输出要换行。


代码：
```cpp
/*Written by smx*/
#include<bits/stdc++.h>
using namespace std;

int main()
{
	//freopen(".in","r",stdin);
	//freopen(".out","w",stdout);
	ios::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);
    int n;
    cin>>n;
    while(n--){
        int x;
        char t;
        string dw1,dw2;
        cin>>x>>dw1>>t>>t>>dw2;
        if(dw1=="m"){
            cout<<x<<" m = "<<x*1000<<" mm\n";
        }else if(dw1=="km"){
            if(dw2=="m"){
                cout<<x<<" km = "<<x*1000<<" m\n";
            }else{
                cout<<x<<" km = "<<x*1000000<<" mm\n";
            }
        }else if(dw1=="g"){
            cout<<x<<" g = "<<x*1000<<" mg\n";
        }else if(dw1=="kg"){
            if(dw2=="g"){
                cout<<x<<" kg = "<<x*1000<<" g\n";
            }else{
                cout<<x<<" kg = "<<x*1000000<<" mg\n";
            }
        }

    }
    return 0;
}
```

---

## 作者：__DayLight__ (赞：1)

## 前言

相较于楼上的做法，我输入 ```string``` 类型，在单位换算中也略有**取巧**。

## 思路

- 输入字符串 $s$ 用 字符串 $xs$ 和 $qs$ 分别取下单位 $1$ 和 单位 $2$;再用变量 $q$ 取下数量 $x$。

- 通过得到的数据依照题意进行单位换算。

- $Tips$ $:$ 为了让输入时能够输入空格，要用 ```getline(cin,s) ``` 代替  ```cin>>s```。

## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
string s,ch,xs,qs;
signed main(){
	cin>>n;
	getline(cin,ch);//这里是为了读掉 n 后面的换行符，以防赋值到 s 
	while(n--)
	{
		getline(cin,s);
		int q=0,qi;// q 代表的就是题目中的 x 
		xs="",qs="";//初始化!!! 
		bool f=0;
		for(int i=0; i<s.size(); i++)
		{
			if(s[i]>='0'&&s[i]<='9')q*=10,q+=s[i]-'0';//读取数字 x 
			if(s[i]=='?')qi=i;//记录下 ? 的位置，方便输出 
			if(s[i]=='=')f=1;//用 = 来判断遇到的单位是单位 1 还是单位 2 
			if(s[i]>='a'&&s[i]<='z')//读取单位 
			{
				if(!f)xs=xs+s[i];
				else qs=qs+s[i];
			}
		}
		//输出思路：以 ? 的下标为分界线 
		for(int i=0; i<qi; i++)
			cout<<s[i];	
			
		//注意题目中说道：保证它们都是长度单位或都是重量单位，且 单位 1 比 单位 2 更大。
		 
		if(xs=="m"||xs=="g")cout<<q*1000;//比 m 和 g 小的都分别只有 mm 和 mg ，所以直接乘1000输出 
		if(xs=="km"||xs=="kg")
		{
			q*=1000;//因为这两个是最大的，所以至少会乘一次 
			if(qs=="mm"||qs=="mg")q*=1000;
			cout<<q;
	    }
		for(int i=qi+1; i<s.size(); i++)
			cout<<s[i];
		cout<<"\n";
	}
    return 0;//华丽结束 
}
```

---

## 作者：_little_Cabbage_ (赞：1)

# B3926 [GSEP202312 三级] 单位转换 题解
~~[博客食用体验更佳](https://www.luogu.com.cn/blog/958804/solution-B3926)~~

这是一道数学题。

我们可以用 `STL` 中的 `map` 配合 `pair` 来解决此题。定义一个 `map` 类型变量 $mp1$，它的下标为用 `pair` 包装的两个单位字符串 $s$ 和 $t$，值为 $s$ 和 $t$ 之间的进率。然后把单位之间的进率都初始化好，最后输出即可。

注意输出时要乘上原本的数 $x$。

AC 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
map<pair<string,string>,int>mp1;
void init()
{
	mp1[make_pair("km","m")]=1000;
	mp1[make_pair("km","mm")]=1000000;
	mp1[make_pair("m","km")]=0.001;
	mp1[make_pair("m","mm")]=1000;
	mp1[make_pair("mm","km")]=0.000001;
	mp1[make_pair("mm","m")]=0.001;
	mp1[make_pair("kg","g")]=1000;
	mp1[make_pair("kg","mg")]=1000000;
	mp1[make_pair("g","kg")]=0.001;
	mp1[make_pair("g","mg")]=1000;
	mp1[make_pair("mg","kg")]=0.000001;
	mp1[make_pair("mg","g")]=0.001;
}
signed main()
{
	init();
	int t;
	cin>>t;
	while(t--)
	{
		int a;
		cin>>a;
		string s;
		cin>>s;
		char x;
		cin>>x;
		cin>>x;
		string t;
		cin>>t;
		cout<<a<<" "<<s<<" "<<"= "<<mp1[make_pair(s,t)]*a<<" "<<t<<endl;
	}
	return 0;
}
```
[AC 记录](https://www.luogu.com.cn/record/144777329)

---

## 作者：ICU152_lowa_IS8 (赞：0)

前排提示：本题解面向普及起步选手，而非入门。

一道还算比较难的红题，码量相对比较大。

虽说本题的本意在于练习 `if` 语句的使用（关于这个请参照已有题解），可也是一道非常好的 `map` 基础练习题。

`map`，作为 STL 的一种，形式化理解相当于一个加强版的数组，下标和存储的值可以为数字、字符、字符串甚至结构体、STL 等等都可以。

对于本题，可以定义一个下标为 `string` 类型，存储数据值为 `int` 类型的 `map` 来给每种单位赋权值（形象地理解一下，你把大单位转化成小单位，也是要乘以倍率的吧），以一乘一除的方式来代替冗长的 `if` 判断，大大缩小了码量。

具体见代码：

```
#include<bits/stdc++.h>
using namespace std;
map<string,int>mp;
int main(){
	int n;
	cin>>n;
	mp["mm"]=mp["mg"]=1;//以最小的单位为基准
	mp["m"]=mp["g"]=1000;
	mp["km"]=mp["kg"]=1000000;//赋的1000000指1kg(m)是1mg(m)的1000000倍
	for(int i=1;i<=n;i++){
		int a;
		string c,d,s;
		cin>>a>>c>>s>>s>>d;//读入，s为过滤无用信息
		cout<<a<<" "<<c<<" = "<<a*mp[c]/mp[d]<<" "<<d<<endl;//计算答案并输出
	}
	return 0;
}

```


---

## 作者：Lan_yan (赞：0)

~~不会有人不懂进制转换吧~~

## 思路

明显的一道水题。

根据题目要求输入要转换的数和单位，再将转换好的新数和新单位输出即可。

scanf 大法不太好控制，采用能吃掉空格和换行符的 cin。

我们可以设置一个字符来吃掉中间的等于号和问号，具体操作为 `cin>>x>>s>>h>>h>>t;`。

又因为只涉及将更大的单位转换为更小的单位，所以我们可以省掉一些转换，比如从米到千米。怕错的人也可以写进去，以防万一。

具体实现看代码。

## 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,x,y;
char s[10],t[10];//s是现在的单位，t是要转换的单位
int main()
{
	char h;
	scanf("%d\n",&n);
	while(n--)
	{
		cin>>x>>s;
		cin>>h>>h>>t;//分不分开读入差不多，我这里习惯分开输入
		if(s[0]=='k'&&s[1]=='m')//现单位为千米的情况
		{
			if(t[0]=='m'&&t[1]=='m')y=1000000*x;
			else y=1000*x;
		}
		if(s[0]=='m')y=1000*x;//现单位为米的情况
		if(s[0]=='k'&&s[1]=='g')//现单位为千克的情况
		{
			if(t[0]=='m'&&t[1]=='g')y=1000000*x;
			else y=1000*x;
		}
		if(s[0]=='g')y=1000*x;//现单位为克的情况
		printf("%d %s = %d %s\n",x,s,y,t);//千万不要漏了空格
		memset(s,0,sizeof(s));//清空数组以防万一
		memset(t,0,sizeof(t));
	}
	return 0;
}
```

---

## 作者：DL_Lingkong (赞：0)

# B3926 [GSEP202312 三级] 单位转换 题解

[题目传送门](https://www.luogu.com.cn/problem/B3926)

大水题。

## 题目分析

其实就是进制转换……

这道题的核心就是在于单位间的**进率**。

进率如下（不知道是几年级学的了）：

$$1 \text {km} = 1000 \text {m}$$

$$1 \text {km} = 1000000 \text {mm}$$

$$1 \text {m} = 1000 \text {mm}$$

$$1 \text {kg} = 1000 \text {g}$$

$$1 \text {kg} = 1000000 \text {mg}$$

$$1 \text {g} = 1000 \text {mg}$$

然后问题来了：

**怎么读入？**

通过观察，不难发现输入格式都是：一个数+一个单位+一个等号+一个问号+一个单位。

这里可以用一个字符 $c$ 读入问号和等号（即占位），用两个字符串 $s1$ 和 $s2$ 读入单位，用一个整数 $x$ 读入数量。

懂了这个就可以开写了。

## 上代码！

```cpp
#include <iostream>
using namespace std;
int N,x;
string s1,s2;
char c;
void be() // init & input
{
	cin >> N;
	for(int i = 1;i <= N;i++) // N组数据
	{
		cin >> x >> s1 >> c >> c >> s2;
		int d = 1; // 用d存储进率
		if(s1 == "km") // s1为km，s2有m和mm两种情况
		{
			if(s2 == "m")
			{
				d = 1000;
			}
			else
			{
				d = 1000000;
			}
		}
		else if(s1 == "m") // s1为m，s2只能为mm
		{
			d = 1000;
		}
		else if(s1 == "kg") // s1为kg，s2有g和mg两种情况
		{
			if(s2 == "g")
			{
				d = 1000;
			}
			else
			{
				d = 1000000;
			}
		}
		else // s1为g，s2只能为mg
		{
			d = 1000;
		}
		cout << x << ' ' << s1 << " = " << (x * d) << ' ' << s2 << endl; // 不要忘记四个空格！！！
	}
	return ;
}
void kin() // programming
{
	return ;
}
void ei() // output
{
	return ;
}
int main()
{
	be();
	kin();
	ei();
	return 0;
}
```

---

## 作者：Igunareo (赞：0)

# 题意分析
题目就两个关键点，一是单位换算，二是大单位换小单位，不必多说，读入后判断并计算就行。

字符串的题卡的就是格式，下面来说格式。
## 格式
输入格式是数字，原单位，等于号，问号，目标单位。

由于正常读入忽略空格所以不考虑。

所以读入变量是整型，字符串，字符，字符，字符串。

由于字符串可以直接比较，所以较推荐使用。

输出比较麻烦，是整型，空格，字符串，空格，字符，空格，整型，空格，字符串，换行，得挨个输出。

不想多写几遍输出语句的话可以定义一个变量存结果啦。
# 代码如下
```
#include<bits/stdc++.h>
using namespace std;
int main(){  
    int t;
    cin>>t;
    while(t--){
    	int n,ans;
    	string a,b;
    	char useless[5];
	cin>>n>>a>>useless[0]>>useless[1]>>b;
        if(a=="km"){
	    if(b=="m")ans=n*1000;
	    else ans=n*1000000;
	}
	else if(a=="m")ans=n*1000;
	else if(a=="kg"){
	    if(b=="g")ans=n*1000;
	    else ans=n*1000000;
	}
	else ans=n*1000;
	cout<<n<<' '<<a<<' '<<useless[0]<<' '<<ans<<' '<<b<<endl;
    }
    return 0;
}
```

---

## 作者：Programming_Konjac (赞：0)

# 思路
这个题用 map 解最简单！

map 数组下标定义为 `pair<string,string>`，表示第一个单位和第二个单位的进率，map 存储的内容就是第一个单位和第二个单位的进率。

首先考虑把 map 初始化，因为题目中说：“**单位 $1$** 比**单位 $2$** 更大”，所以不考虑小单位化大单位。

- 千米转换到米、米转换到毫米，千克转换到克和克转换到毫克，进率都是 $1000$。

- 千米转换到毫米和千克转换到毫克，进率都是 $1000000$。

## map 初始化代码为下

```cpp
m[{"km","m"}]=m[{"kg","g"}]=m[{"m","mm"}]=m[{"g","mg"}]=1000;
m[{"km","mm"}]=m[{"kg","mg"}]=1000000;
```
## 解决输入格式
把 `=` 和 `?` 都变成两个字符进行输入，就可以了。
# 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
#define ll long long
map<pair<string,string>,ll> m;
int main(){
	int t;
	cin>>t;
	m[{"km","m"}]=m[{"kg","g"}]=m[{"m","mm"}]=m[{"g","mg"}]=1000;
	m[{"km","mm"}]=m[{"kg","mg"}]=1000000;
	while(t--){
		int a;
		char b[10005],c[10005],d,e;
		cin>>a>>b>>d>>e>>c;
		printf("%d %s = %d %s\n",a,b,m[{b,c}]*a,c);
	}
	return 0;
}

```

---


# [语言月赛 202409] 始终

## 题目描述

如果一个只包含小写的字符串**首字母**与**尾字母**相同，那么字符串是“好的”。

给出一个由小写字母组成的字符串 $s$，请你求出它有多少**子串**是“好的”。

**子串**：一个字符串中，任意**连续**的字符构成的子字符串称为子串。
例如，字符串 `abc` 一共包含 7 个子串，分别为：空串（不包含任何字符)，`a`，`ab`，`abc`，`b`，`bc`，`c`。注意，字符串 `ac` **不是** `abc` 的子串。


## 说明/提示

### 样例解释

对于第一组样例，只有 `a`，`b`，`c` 三个“好的”子串。

对于第二组样例，共有 `a`，`b`，`c`，`b`，`a`，`bcb`，`abcba` 七个“好的”子串。

### 数据范围

$|s|$ 表示字符串 $s$ 的长度。

对于 $20\%$ 的数据，$1 \le |s| \le 30$，字符串只包含小写字母 `a`。

对于 $30\%$ 的数据，$1 \le |s| \le 30$。

对于 $60\%$ 的数据，$1 \le |s| \le 500$，字符串由小写字母组成。

对于 $100\%$ 的数据，$1 \le |s| \le 5000$，字符串由小写字母组成。

## 样例 #1

### 输入

```
abc```

### 输出

```
3```

## 样例 #2

### 输入

```
abcba```

### 输出

```
7```

## 样例 #3

### 输入

```
bbcdaadcba```

### 输出

```
18```

# 题解

## 作者：szh_AK_all (赞：3)

## Source & Knowledge
2024 年 9 月语言月赛，由洛谷网校入门计划/基础计划提供。

## 题目大意
定义一个字符串是“好的”，当且仅当这个字符串的首尾字母相同，要求出所给字符串 $s$ 的“好的”子串数量。

## 题目分析
本题考察简单字符串处理。

记 $n$ 为字符串 $s$ 的长度。

最直观的做法是枚举 $s$ 的每一个子串的首尾位置 $l,r(l\le r)$，若 $s_l=s_r$，则该子串是“好的”，将记录答案的变量 $ans$ 加一，最后输出 $ans$ 即可，时间复杂度为 $O(n^2)$。

还有一种做法是：用一个数组记录每一种字符在 $s$ 中出现的次数，接着枚举每一个小写字母，若它在 $s$ 种出现的次数为 $x$，则它对答案的贡献为 $\frac{x\times(x-1)}{2}$。然后由于每一个单独的字母也是“好的”，所以最终答案还应加上 $n$，时间复杂度为 $O(n)$。

---


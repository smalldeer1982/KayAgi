# [语言月赛 202410] 同桌

## 题目描述

一个班级内有 $2n$ 个小朋友，编号依次为 $1,2,\ldots, 2n$。教室里有 $n$ 张桌子，每张桌子可以坐两个人。坐在同一张桌子旁边的小朋友互为同桌。**一个小朋友的同桌不能是自己。**

老师问每个小朋友想和谁做同桌，$i$ 号小朋友的回答是想和 $p_i$ 号小朋友做同桌。

请你帮老师判断一下，老师能否让每个小朋友都满意？

## 说明/提示

【样例 1 解释】

老师可以让 $1,2$ 号小朋友坐在一张桌子旁，$3,6$ 号小朋友坐在第二张桌子旁，$4,5$ 坐在第三张桌子旁。

【样例 2 解释】

$1$ 号小朋友的同桌肯定不会是自己（因为每张桌子一定恰好坐 $2$ 个小朋友）。

【样例 3 解释】

$1$ 号小朋友想和 $2$ 号小朋友做同桌，然而 $2$ 号小朋友却希望和 $3$ 号小朋友做同桌，所以不可能 $1,2$ 号小朋友同时满意。

如果你进一步思考会发现，老师最多同时让 $2$ 个小朋友满意。

【数据范围】

**本题采用捆绑测试，一个子任务内有多个测试点，同时答对子任务内所有测试点才能拿到对应分数**。

- 子任务 1（$9$ 分）：$n=1$。
- 子任务 2（$12$ 分）：$n=2$。
- 子任务 3（$28$ 分）：保证 $p_i\ne i$。
- 子任务 4（$51$ 分）：无特殊限制。

对于全体数据，保证 $1\le n\le 5000$，$1\le p_i\le 2n$。

## 样例 #1

### 输入

```
3
2 1 6 5 4 3
```

### 输出

```
Yes```

## 样例 #2

### 输入

```
2
1 2 4 3
```

### 输出

```
No```

## 样例 #3

### 输入

```
2
2 3 4 1
```

### 输出

```
No```

# 题解

## 作者：Igallta (赞：4)

## 简要题意

给你一个 $n$ 和一个数组 $p$，如果 $p_{p_i}\not=i$（$i$ 期望同桌的期望同桌不是 $i$，那么此时 $i$ 就不满意）或者 $p_i=i$，那么输出 `No`。否则输出 `Yes`。

## 思路

首先，我们肯定要输入。

这个地方因为不关课桌的事，所以可以直接给 $n$ 乘 $2$。这部分的代码：

```cpp
cin>>n;
n*=2;
```

然后，我们要输入 $p$ 数组。在这里我们就可以判断 $p_i$ 是否的等于 $i$ 了，如果是直接输出 `No` 并结束程序的运行。

这部分的代码：

```cpp
for(int i=1;i<=n;i++){
	cin>>want[i];//这里的 want 就是 p 数组 
	if(want[i]==i){
		cout<<"No";
		return 0;
	}
}
```

为什么不能边输入边判断 $p_{p_i}\not=i$ 呢？因为次数只输入了 $i$ 个数据，如果 $p_i > i$ 那么因为 C++ 全局变量的特性，$p_{p_i}$ 会等于 $0$。

所以，接下来我们要到单独用一个循环去判断 $p_{p_i}\not=i$。还是跟前面一样，只要有就直接输出 `No` 并结束程序。

最后，如果前面都没有结束那么最后还要输出 `Yes` 哦！

这部分的代码：

```cpp
for(int i=1;i<=n;i++){
	if(want[want[i]]!=i){
		cout<<"No";
		return 0;
	}
}
cout<<"Yes";
```

---

## 作者：yummy (赞：4)

本题考查数组的简单应用。

要让所有小朋友满意，当且仅当每个小朋友的同桌都不是自己，并且 TA 的同桌的同桌也得是自己。

如果我们使用数组 `p[10005]` 来记录输入的 $p_i$（注意 $i$ 的范围是不超过 $2n$ 也就是 $10000$，而非 $5000$），那么可以把“同学 $i$ 能被满足”写成 `p[i]!=i && p[p[i]]==i`。

有了上面的这个条件后，写个循环就知道是否所有同学都满意了。

---


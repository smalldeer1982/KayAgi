# [COCI 2022/2023 #5] Kalendar

## 题目描述

Magdalena 喜欢日历，她为每个月制作自己的日历。

每月的每一天都正好用三个字符表示：

- 如果天数是一位数，则表示为 `..X`。例如：数字 $7$ 被表示为 `..7`。
- 如果天数是两位数，那么它表示为 `.XY`。例如：数字 $17$ 被表示为 `.17`。

日历的每一行代表一个星期，每个星期由 $7$ 天组成。如果
一周没有所有的 $7$ 天（因为有可能这个月不是从星期一开始的，或者不是在星期日结束的），那么缺失的日子就用 `...` 表示。

Magdalena 也希望她的日历是漂亮的。她将用以下方式来装饰它：
她将在上下两边填上 `-`（ASCII 45），左右两边填上 `|`（ASCII 124），而四个角落用 `+`（ASCII 43）。

你的任务是确定 Magdalena 日历的格式，如果它有 $n$ 天，并且每月的第一天是一周的第 $x$ 天。例如，如果 $x=1$，这个月就从星期一开始，如果 $x=5$，就从星期五开始。

我们假设一周的第一天是星期一。

## 说明/提示

| Subtask | $pts$ | 限制 |
| :----------: | :----------: | :----------: |
| $0$ | $0$ | 是样例 |
| $1$ | $7$ | $n+x\leq 8$ |
| $2$ | $19$ | $x=1$ |
| $3$ | $24$ | 无 |


## 样例 #1

### 输入

```
31 3```

### 输出

```
+---------------------+
|........1..2..3..4..5|
|..6..7..8..9.10.11.12|
|.13.14.15.16.17.18.19|
|.20.21.22.23.24.25.26|
|.27.28.29.30.31......|
+---------------------+```

## 样例 #2

### 输入

```
1 5```

### 输出

```
+---------------------+
|..............1......|
+---------------------+```

## 样例 #3

### 输入

```
28 7```

### 输出

```
+---------------------+
|....................1|
|..2..3..4..5..6..7..8|
|..9.10.11.12.13.14.15|
|.16.17.18.19.20.21.22|
|.23.24.25.26.27.28...|
+---------------------+```

# 题解

## 作者：ivyjiao (赞：5)

首先上下两行格式是固定的，直接输出即可。

其次看中间行：

- 每一行最左和最右输出 `|`。
- 每一行中间按规则输出。
- 如果某一行结束后，所有的天数都已经输出完了，结束输出。

```cpp
#include<iostream>
using namespace std;
int n,x,d;
int main(){
    cin>>n>>x;
    puts("+---------------------+");
    d-=(x-2);//保证第一天的位置是正确的
    for(int i=1;;i++){
        cout<<"|";
            for(int j=1;j<=7;j++){
            if(d<=0||d>n) cout<<"...";
            else if(d>0&&d<10) cout<<".."<<d;
            else cout<<"."<<d;
            d++;
        }
        cout<<"|"<<endl;
        if(d>n) break;
    }
    puts("+---------------------+");
}
```


---

## 作者：gloomy_ (赞：3)

暴力解决。  
先快乐地把头和尾输出。  
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	int a,b;
	scanf("%d%d",&a,&b);
	printf("+---------------------+\n");
	
	printf("+---------------------+\n");
	return 0;
} 
```
读题可知，每一天都占 $3$ 个字符，头尾不足的日期用 `...` 表示。我们用 $t(1\le t \le 7)$ 表示当前是星期几，用 $s(1 \le s \le a)$ 表示当前是几号。先把开头和结尾不足的日期补足。 
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	int a,b;
	scanf("%d%d",&a,&b);
	printf("+---------------------+\n");
	int t=b,s=1;
	while(1)
	{
		printf("|");
		for(int i=1;i<t;i++)
		{
			printf("...");
		}

		for(int i=t+1;i<=7;i++)
		{
			printf("...");
		}
		printf("|\n");
		t=1;
	}
	printf("+---------------------+\n");
	return 0;
} 
```  
接下来打印中间的日期。用 $k$ 表示是否结束。若 $s$ 等于 $a$，就让 $k$ 变为 $true$。因为有两层循环，所以不能直接用 `break`。
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	int a,b;
	scanf("%d%d",&a,&b);
	printf("+---------------------+\n");
	int t=b,s=1;
	bool k=0;
	while(1)
	{
		if(k)
		{
			break;
		}
		printf("|");
		for(int i=1;i<t;i++)
		{
			printf("...");
		}

		while(t<=7)
		{
			if(s<10)
			{
				printf("..%d",s); 
			} 
			else
			{
				printf(".%d",s);
			}
			if(s==a)
			{
				k=1;
				break;
			}
			s++;
			t++;
		}
		for(int i=t+1;i<=7;i++)
		{
			printf("...");
		}
		printf("|\n");
		t=1;
	}
	printf("+---------------------+\n");
	return 0;
} 
```
完美收官。


---

## 作者：wuhan1234 (赞：3)

## 1. 编程思路。

定义数组 $days$ 保存日历表中一个月的每一天的数字。输入 $n$ 和 $x$ 后，按要求构造好 $days$ 数组。

数组元素 $days[0]$ 至 $days[x-2]$ 用数字 $0$ 填充，以便之后直接输出 ...。数组元素 $days[x-1]$ 至 $days[x-1+n-1]$ 分别保存天数 $1$ 至 天数 $n$。之后不足 $7$ 天的天数也用 $0$ 填充。

设数组 $days$ 的数组元素个数为 $len$，构造的数组的元素个数是 $7$ 的倍数，即 $len \bmod 7=0$。

数组 $days$ 构造好了后，直接二重循环输出 $len/7 +2 $ 行信息即可。其中的 $len/7$ 行信息根据构造的 $days$ 数组的元素值进行输出。

## 2. 源程序。

```c
#include <stdio.h>
#include <string.h>
int main()
{
	int n,x;
	scanf("%d%d",&n,&x);
    int days[115];
    int i,len=0;
    for (i=1;i<x;i++)     // 一个月不是从星期一开始的，缺失的日子用...表示
       days[len++]=0;
    for (i=1;i<=n;i++)
        days[len++]=i;
    while (len % 7 != 0)  // 一个月也不是在星期日结束，缺失的日子用...表示
        days[len++]=0;
    char line[25] = "+---------------------+";
    printf("%s\n",line);
    for (i=0;i<len/7;i++)
    {
        printf("|");
        for (int j=0;j<7;j++)
        {
            int d=days[7*i+j];
            if (d==0) printf("...");
            else if (d<=9) printf("..%d",d);
            else printf(".%d",d);
        }
        printf("|\n");
    }
    printf("%s\n",line);
	return 0;
}

```


---

## 作者：CleverRaccoon (赞：2)

## 简要题意

按照规定格式输出日历，每月的开始日期要按照给定的来，也就是说，不一定从周一开始，输出日期时要注意数字格式与小点点的补全。

## 思路

- 将日期 $1$ 到 $n$ 保存在数组 $a$ 中，先存好，方便之后的打印。这里注意，每行 $7$ 个数，下标为 $0$ 到 $6$，下标到 $6$ 时要归为 $0$。

- 往数组里面填好数字后，就可以开始输出了。

首先输出一行：`+---------------------+`。

接着，从第 $0$ 行开始输出，可是，终止条件是什么呢？

观察可以发现，除了第 $0$ 行以外，每行的第一个数字一定不是 $0$，因此，我们可以以『第一个数是 $0$ 且 行数不为 $0$』作为终止条件。

注意要在每行中的开头和末尾分别输出一个 `|`。

每次输出日期时，分三种情况：

1. 如果当前的数是 $0$ 的话，直接输出三个小点点。

2. 如果当前的数小于 $10$，即是『一位数』，输出两个小点点，然后再输出这个数字。

3. 如果当前的数大于等于 $10$，即是『两位数』，前面只用输出一个小点点就行啦。

最后输出一行：`+---------------------+`。

## 细节

有三点细节要注意：

1. 对于输入的 $x$，有 $1 \leq x \leq 7$，我们的数组下标是从 $0$ 开始的，所以 $x$ 要减一。

2. 将数字存入 $a$ 数组时，要注意下标如果等于 $6$，即到了该换行的地方，就将行数加一，列数归 $0$。

3. 注意输出数字的格式。

## 代码

完整代码：

```cpp
#include <bits/stdc++.h>
using namespace std;

int a[16][7];    // n <= 99，日历最多十六行，每行七列
int n, x;

int main() {
    cin >> n >> x;
    x -= 1; // 题目假设一周的第一天是星期一，所以x要减一。
    /*
    i是行数，j是列数，从第0行的第x列开始。
    如果j等于6，那么将j设为0。
    使用cnt记录当前天数，当前天数不大于n。
    记得列数到6时行数加一。
    */
    // 先将月份的数据记录在a数据里面，方便后面的处理。
    for(int i = 0, j = x, cnt = 1; cnt <= n; j = (j + 1) % 7, ++cnt) {
        a[i][j] = cnt;  // 设置日历的第i行第j列为cnt这个日期数字。
        if(j == 6) 
            ++i;	// 下一行
    }
    // 开始输出啦！
    puts("+---------------------+");    // 首尾各一行
    for(int k = 0; ; ++k) {   // 每一行（即每一周）
        if(a[k][0] == 0 && k != 0)
            break;  // 如果一周的第一天就是0且不是第一行的话，则代表这个月已经输出完毕啦！
        printf("|");   // 装饰品
        for(int day = 0; day < 7; ++day) {  // 每一列（即每一天）
            if(a[k][day] == 0)  // 如果当前为0则代表当前月份已经结束啦。
                printf("...");  // 输出三个点就可以了捏。
            else if(a[k][day] < 10) // 因为数字不同输出的小点点数不同，所以要判断一下。
                printf("..%d", a[k][day]);
            else
                printf(".%d", a[k][day]);
        }
        printf("|\n");
    }
    puts("+---------------------+");
    return 0;
}
```

如果还有什么疑问，欢迎私信交流！

题解就到此结束了，完结撒花，谢谢大家！


---

## 作者：FFTotoro (赞：2)

本题要求你画出一个日历。

首先，如果 $x>1$，那么日历的第一行（不包括装饰部分）就需要补上占 $x-1$ 日位置的点。然后把第一行补齐，第二行开始从第一行最后一个日期 $+1$ 不断往下枚举，如果当前枚举到的点是一行的开头，就输出一个 `|`，否则如果是一个行的末尾就输出一个 `|` 和一个换行即可。最后一行可能有空缺，计算出空出的天数，用点补上即可。

这里介绍一个 `setfill()` 函数。我们常用的 `setw()` 函数如果不结合该函数使用，只能用空格作为占位的字符，但是 `setfill()` 函数可以指定占位的字符，用法如下：

```cpp
int w=6; // 场宽
char c='Q'; // 占位字符
cout<<setw(w)<<setfill(c)<<2303;
// 输出即为 QQ2303
```

放代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
  ios::sync_with_stdio(false);
  int n,x,a; cin>>n>>x; a=(8-x)%7;
  cout<<"+---------------------+\n"; // 日历头
  if(x>1){
    cout<<'|';
    for(int i=1;i<x;i++)cout<<"..."; // 补齐开头缺的日子
    for(int i=1;i<=min(n,a);i++)cout<<setw(3)<<setfill('.')<<i; // 第一行剩下的日子
    if(a<=n)cout<<"|\n"; // 如果这一行不是最后一行，就输出一个 '|' 和一个换行
  }
  for(int i=a+1;i<=n;i++){
    if((i-a)%7==1)cout<<'|'; // 行的开头
    cout<<setw(3)<<setfill('.')<<i; // 输出日子
    if(!((i-a)%7))cout<<"|\n"; // 行的末尾
  }
  if(((1-n-x)%7+7)%7){
    for(int i=1;i<=((1-n-x)%7+7)%7;i++)cout<<"...";
    cout<<"|\n"; // 补齐最后的一行
  }
  cout<<"+---------------------+\n"; // 日历脚
  return 0;
}
```

---

## 作者：_RainCappuccino_ (赞：2)


### 思路

**首先，我们可以通过观察样例发现：**

- 首行和尾行均有一排边界线 `+---------------------+`，所以我们可以先输出它。
- 当 $x>1$ 时，第二行开始和倒数第二行末尾有缺失的日子，所以我们将第二行开始和倒数第二行末尾单独操作。

------------

### 如何确保格式

1. 用变量 $d$ 储存输出到哪一天，依次递增，根据 $d$ 是否满足 $d<10$ 而且 $d>0$ 来判断输出多少个 `.`。

2. 其次，用变量 $w$ 储存输出到了这一行的第几个，如果 $w=7$，表示结尾，需换行了，输出边框 `|`，将 $w$ 归零 。

3. 如果 $w=0$，代表开始，输出边框 `|`。

## code
```cpp
#include<bits/stdc++.h>
using namespace std;
int n,x,d=1,w;
int main(){
    cin>>n>>x;
    cout<<"+---------------------+"<<endl;//上边框
    if(x!=1){
        cout<<"|";//对1的特判，不然会输出两个边框
    }
    for(int i=1;i<x;i++){//开头遗失的日子
        cout<<"...";
        w++;
    }
    while(d<=n){//输出n天
        if(w==0){
            cout<<"|";//起始边框
        }
        if(d>0&&d<10) cout<<".."<<d;//判断一位还是两位
        else{
            cout<<"."<<d;
        }
        w++;//星期+1
        if(w==7){
            w=0;//下一周,归零
            cout<<"|"<<endl;//末尾边框
        }
        d++;

    }
    if(w!=0){//如果最后一行还没有结束

        while(w<7){
            cout<<"...";//输出遗失的日子
            w++;
        }
        cout<<"|"<<endl;//末尾边框
    }
    cout<<"+---------------------+";//下边框
    return 0;
}

---


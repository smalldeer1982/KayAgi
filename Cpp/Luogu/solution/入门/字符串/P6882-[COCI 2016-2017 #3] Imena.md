# [COCI 2016/2017 #3] Imena

## 题目描述

单词是由大写或小写字母组成的字符串。特别的，末尾也可以是标点符号（`.`,`?`,`!`）。名字是 **有且仅有首字母为大写字母** 的单词。

句子是由一些单词组成的字符串，并且最后一个字符是标点符号（`.`,`?`,`!`）
。

给定 $N$ 个句子，Mirko 想让你统计每个句子中分别有多少个名字。






## 说明/提示

### 样例解释

#### 样例 2 解释

第一个句子中的名字有 `Milovana`，共 $1$ 个；第二个句子中的名字有 `Ana`,`Banana`，共 $2$ 个。注意第一个句子中，尽管 `An4` 的开头是一个大写字母，但它包含了一个数字，所以不是一个名字。

### 数据规模与约定

对于 $40\%$ 的数据，满足 $N=1$。

对于 $100\%$ 的数据，满足 $1\le N \le 5$。

### 说明
**题目译自 [COCI2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #3](https://hsin.hr/coci/archive/2016_2017/contest3_tasks.pdf) _T1 Imena_**。

## 样例 #1

### 输入

```
1
Spavas li Mirno del Potro Juan martine?```

### 输出

```
4```

## 样例 #2

### 输入

```
2
An4 voli Milovana. Ana nabra par Banana. ```

### 输出

```
1
2```

# 题解

## 作者：借我昔日热忱 (赞：19)

#  _一个有意思的字符串题目_ 
（顺便吐槽一下毒瘤数据）

***为什么说他有意思呢，他的数据点令人十分迷茫***。 **（_~~本体题解最有意思的地方在最下面~~_ ）**
因为这个数据点没公开，他的毒瘤数据我也不知道到底是怎样的。 **（_~~本体题解最有意思的地方在最下面~~_ ）**

所有做题只得20分，以及对所有对自己的程序充满信心的看我的题解最好**从下往上翻**。~~蒟蒻表示这个题目调试了一上午。。。~~

------------


首先，
本题目就是一个字符串的单个处理问题 读入+判断

我用的是一边读入一边处理，单个字符读入用的是**getchar（）**；（getchar()可以读入单个字符包括空格跟**换行符**，**20分的大部分人都出问题在处理换行符，不止开头要处理，数据中间也有可能会出现**）

我的处理方法是：
```cpp
if(a[len]=='\n') len--;
```



------------

***列举几个处理非常有可能出错的的情况：***

 _**字符方面**_ 

大写字母开头，数字在中间，大写字母结尾（AAA123AAA）

数字开头，大写字母在中间，数字结尾（123AAA123）

全是数字（123123）

全是大写字母（AAA）

------------


可以先给大家看一下我的AC代码（~~我的代码不重要，最重要的是下面的东西~~）
```cpp
#include<cstdio>
#include<iostream>
using namespace std;
char a[10000];
int main(){
	int n,len=1,sum=0,k=0;
	scanf("%d",&n);getchar();
	a[1]=' ';
	for(int i=1;i<=n;i++){
		while(true){
			a[++len]=getchar();
			if(a[len]=='\n') len--;
		//	cout<<"|"<<a[len-1];
			if(a[len]=='.'||a[len]=='!'||a[len]=='?'){
				//for(int i=1;i<=len;i++)cout<<a[i];
				len=1;a[1]=' ';
				break;	
			}
			
			if(a[len-1]==' '&&a[len]>='A'&&a[len]<='Z'){
				while(true){
					//cout<<a[len]<<";";
					a[++len]=getchar();
					if(a[len]==' '||a[len]=='.'||a[len]=='?'||a[len]=='!'){
	
						sum++;
						k=1;
						break;
					}
					if(a[len]<='9')break;
 				}
			}
 			if(k==1)
			 	if(a[len]=='.'||a[len]=='?'||a[len]=='!'){
				 	k=0;
				 	len=1;a[1]=' ';break;
				}
				else k=0;
		}
		printf("%d\n",sum);sum=0;
	}
	return 0;
} 
```


------------
**本题解最精彩的部分就是下面我要写的这些（高能预警）**

首先，我这道题目被卡的时候我去翻了翻其他过了的小伙伴的AC程序，然后、、、**我竟然成功的找了一组数据把他的AC程序打掉了？？！！**

数据：

1 

AA13A 444 Akuvliuvi liugviavdliadAA.

输出应该是1

[这是那个被打掉的代码在落谷AC的界面](https://www.luogu.com.cn/record/40544868)

然后我在评论区发了个帖子求救，有位大佬贴上了他的AC代码，结果、、、**又被我hack掉了，还是那组数据**

[这是我测的帖子里的代码的AC界面](https://www.luogu.com.cn/record/40545153)

又多了一个AC以后被打掉的。。[网址](https://www.luogu.com.cn/record/40555139)

最后贴上我发评论的那个帖子：[帖子](https://www.luogu.com.cn/discuss/show/270115?page=2)

所以，不管是过了还是没过的都可以拿这组数据试一下。同时我希望落谷能改一改这道题目的数据点然后尽快开放下载。。。

------------





---

## 作者：天南星魔芋 (赞：9)

又是一道字符串题.....


------------

我们先看题，

题意是只有一行，

但需要读入 _N_ 个 ' . ' 或 ' ! ' 或 ' ? '  , 

故不放心的我用了getchar，

这样只要每次遇到结束符号时输出就行了。

下面见代码吧：

c++

```cpp
#include<bits/stdc++.h>
using namespace std;
char a;//在线算法，可省空间 
int pd;//判断  是否可以开启新的名词判断 
int n;
int tp;//特判  是否符合名词 
int ans=0;//答案 
int main(){
	cin>>n;
	a=getchar();
	int i=1;
	while(i<=n){//初始化 
		pd=1;// 第一个单词就可以 
		a='0';// 特殊  不初始化将无法读入 
		ans=0;// 清零 
		tp=0;// 
		i++;// 
		while(a!='.'&&a!='!'&&a!='?'){ 
			a=getchar();
			if(a>='A'&&a<='Z'&&pd==1){//-// 是否是新单词 
				ans++;tp=1;pd=0;        // 
			}//------------------------// 

			if(tp==1){//---------------------------------------------------------------//判断是否合法 
				if(a<='9'&&a>='0'){ans--;tp=0;}                                       // 含有数字？ 
				else if((!(a>='A'&&a<='Z'))==true&&(!(a<='z'&&a>='a'))==true)tp=0;   // 
			}//---------------------------------------------------------------------// 

			if((!(a>='A'&&a<='Z'))==true&&(!(a<='z'&&a>='a'))==true&&(!(a<='9'&&a>='0'))==true)pd=1;else pd=0;
			//判断是否结束 本次判断 
		}
		cout<<ans<<endl;
	}
	return 0; 
}
```

这篇题解就到这里了，

我还没写过几次，有不到之处请多多指教。

---

## 作者：Solgareo (赞：8)

# 这是我的第一篇题解，请多关照~


~~其实是因为洛谷运势宜装弱才发的~~

(跪求管理过审)

------------

总的来说，这是一道水题。

具体有多水呢？本人第一遍提交就70分了……

#### 题目说“ _句子是由一些单词组成的字符串，并且最后一个字符是标点符号（.,?,!）_ ”

单词？我蒙了。

上网百度了一下，我了解到 _句子之中单词间以空格隔开_ 。

cin不就可以以空格结束吗？

### 于是我决定将单词一个一个输入，分别处理；在遇到. ? !时判断句子结束。

于是我就提交了，只得了70分：

//第一次提交代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int n,sum;
char c[1005]; 
int main(){
	cin>>n;
	while(n>0){
		while(cin>>c){
			int len=strlen(c);
			if(c[len-1]=='.'||c[len-1]=='?'||c[len-1]=='!'){
				cout<<sum<<endl; 
				sum=0;
				n--;
				break;
			}
			if(c[0]>='A'&&c[0]<='Z'){
				bool flag=true;
				for(int i=1;i<=len-1;i++){
					if(!(c[i]>='a'&&c[i]<='z')){
						flag=false;
						break;
					}
				}
				if(flag)sum++;
			}
		}
	}
	return 0;
} 
```

------------

有什么问题吗？再看题目：

#### “ _单词是由大写或小写字母组成的字符串。特别的，末尾也可以是标点符号（.,?,!）_ ”

所以，很明显——有3个点的人名在句末！

知道原因，就很好改了：将句子判断后置，判断人名时带上标点符号。

//以下是AC代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int n,sum;
char c[1005];//存储单词 
int main(){
	cin>>n;
	while(n>0){
		while(cin>>c){
			int len=strlen(c);
			if(c[0]>='A'&&c[0]<='Z'){
				bool flag=true;
				for(int i=1;i<=len-1;i++){
					if(!(c[i]>='a'&&c[i]<='z'||c[len-1]=='.'||c[len-1]=='?'||c[len-1]=='!')){
						flag=false;
						break;
					}
				}//判断各位是否为字母 
				if(flag)sum++;//计数 
			}
			if(c[len-1]=='.'||c[len-1]=='?'||c[len-1]=='!'){
				cout<<sum<<endl; 
				sum=0;
				n--;
				break;
			}//判断句子是否结束 
		}
	}
	return 0;
} 
```

# 有用的话点个赞再走吧~

---

## 作者：yf最qhhh (赞：4)

~~明明是蓝题以上的题~~

**思路：** 一个单词一个单词的输入，判断是否为名字，也就是首字母是否大写以及是否含有数字。当出现' . ' ' ! ' ' ? ' 时就说明一个句子结束了。

**AC代码如下：**
```cpp
#include<bits/stdc++.h>
#define ll long long
using namespace std;

int main(){
	ll n,ans=0,flag;
	string s;
    scanf("%lld",&n);
    for(int i=1;i<=n;i++){
        cin>>s;                                                                                                                                                                                                         
        while(true){
        	flag=1;
        	if(s[0]<'A'||s[0]>'Z')flag=0;//首位是否为大写字母 
        	if(flag){//判断是否有数字，这算一个优化吧 
        		for(int i=0;i<s.length();i++){
        			if(s[i]>='0'&&s[i]<='9'){
        				flag=0;
        				break;
					}
				}
			}
			if(flag){//如果是一个名字那么ans++ 
				ans++;
			}
			if(s[s.length()-1]=='.'||s[s.length()-1]=='?'||s[s.length()-1]=='!'){//如果句子结束了
				cout<<ans<<endl;//输出并还原ans，还原很重要，一定要记得！ 
				ans=0;
				break;
			}
			cin>>s;//如果句子没结束或者不是个名字重新输入就好了 
		}
    }
    return 0;
}
```


---

## 作者：Energy_Making (赞：3)

这是一道字符串的题，主要考察以回车为结束的字符串读入。除此之外，就按题目的意思检查每一个单词是不是名字即可。

* 1.读入 
```cpp
char a[1005];
int main()
{
	gets(a);//使用gets直接读入一整行。
	return 0;
}
```

* 2.名字处理

若一个单词以大写字母开头且没有数字时它即是一个名字。当发现大写字母时就接着往后扫，若符合要求即是名字。
```cpp
if(a[i]>='A'&&a[i]<='Z')//如果这一个字母是大写就进入判断名字的状态。 
			for(int j=i+1;j<len;j++) 
			{
				if(a[j]=='.'||a[j]=='!'||a[j]=='?')//若以标点结尾就输出ans+1，将ans清零，并跳出名字判断模式。 
				{
					printf("%d\n",ans+1);
					ans=0;
					i=j;
					break;
				}
				if(a[j]==' ')//如果发现空格就意味这是一个名字。 
				{
					ans++;
					i=j;
					break;
				}
				if(a[j]<'a'||a[j]>'z')
				//如果a[j]不是小写字母就意味这不是名字。 
				//注意要放到标点与空格判断后面，否则标点与空格会直接被认为是非名字内容。 
				{
					i=j;
					break; 
				} 
			}
```
## 完整代码
```cpp
#include<stdio.h>
#include<bits/stdc++.h>
using namespace std;
int T,len,ans;
char a[1005];
int main()
{
	scanf("%d\n",&T);
	gets(a);
	for(len=0;T>0;len++)
		if(a[len]=='.'||a[len]=='!'||a[len]=='?')T--;
       //判断句子长度。用句子数量来判断写起来要方便一些。
	for(int i=0;i<len;i++)
	{
		if(a[i]=='.'||a[i]=='!'||a[i]=='?')
		{
			printf("%d\n",ans);
			ans=0;
		}
		if(a[i]>='A'&&a[i]<='Z')
			for(int j=i+1;j<len;j++)
			{
				if(a[j]=='.'||a[j]=='!'||a[j]=='?')
				{
					printf("%d\n",ans+1);
					ans=0;
					i=j;
					break;
				}
				if(a[j]==' ')
				{
					ans++;
					i=j;
					break;
				}
				if(a[j]<'a'||a[j]>'z')
				{
					i=j;
					break; 
				 } 
			}
	}
 } 
 
```


---

## 作者：Waaifu_D (赞：3)

这题是在晚上刷题时看见的，当时正闲的没事干，于是这篇题解就诞生了

------------

```cpp
#include<bits/stdc++.h>//被机房大佬唾弃的万能头（ 
using namespace std;
string a;//输入的句子 
int sum=0,n;//sum用来计数 
bool mingzi(string a);//判断名字用的函数 
int main()
{
	scanf("%d",&n);
	for(int i=1; i<=n;i++)
	{
		cin>>a;//或者scanf("%s",a); 
		while(1)//一直循环输入直到有符号 
		{
			if(mingzi(a))//判断是否为名字 
			{
				sum++;
			}
			if(a[a.size()-1]=='.'||a[a.size()-1]=='?'||a[a.size()-1]=='!')//判断句尾有无标点 
			{
				break;
			}
			cin>>a;
		}
		printf("%d\n",sum);//输出数量 
		sum=0;//清空 
	}
	return 0;
}
bool mingzi(string a)
{
	if(a[0]<'A'||a[0]>'Z') return 0;//根据题意如果开头不是大写一定不是名字 
	for(int i=0; i<a.size();i++)
	{
		if(a[i]>='0'&&a[i]<='9') return 0;//注意这里一定要有=号 
	}
	return 1;//如果都没有就返回真 
}
```


---

## 作者：梨衣 (赞：2)

## 字符串模拟入门题
~~然而本蒟蒻写了一小时，连续被hack两次~~


### 题目大意
输入 $n$ 个句子，判断每个句子中有多少个人名，**人名首字母大写且不含字母**。

显然，对一个单词，仅需判断是否大写字母开头且有无数字即可，根据**字符与ASCII码一一对应**的关系，可转化为ASCII码比较。
**特别的，当一个单词首字母大写，不管后面是否又出现大写，只要无数字出现，都可算进答案**。直接判断是否属于大写字母或数字所在值域内即可。

#### 大写字母 $A$ ~ $Z$ 对应ASCII码为65~90
#### 数字 $0$ ~ $9$ 对应ASCII码为48~57

**一定要特判回车！一定要特判回车！一定要特判回车！**
## 代码如下
```cpp
#include<cstdio>
#include<string>
using namespace std;
char s[10010];
int main(){
	int n,ans=0,len=0,i=1,vis=0;
	scanf("%d",&n);
	while(i<=n){
		ans=0;
		vis=0;
		len=0;//变量重置 
		while(true){
			s[++len]=getchar();//单个字符读入方便判断终止 
			if(s[len]=='?'||s[len]=='.'||s[len]=='!'){
				i++;//下一个句子 
				break;
			}
		}
			bool v=0;
			for(int j=1;j<=len;j++){
				if(s[j]==' '||s[j]=='?'||s[j]=='.'||s[j]=='!'||s[j]=='\n'){
					if(!vis&&v)ans++;
					v=0;
					vis=0;
				}
				else if((j==1||s[j-1]==' '||s[j-1]=='\n')&&s[j]-'A'>=0&&s[j]-'Z'<=0)//根据大写字母ASCII码判断首字母 
					v=1;
				else if(s[j]-'0'>=0&&s[j]-'9'<=0)//如果是数字则舍去 
					vis=1;	
			}
		printf("%d\n",ans);
	}
	return 0;
}
```
## The end


---

## 作者：_121017_ (赞：1)

一道水水的字符串模拟题（不知道为什么同机房的 $dalao$ 一直90分）。
# 思路：
其实每次读到大写字母就开始判断，如果读到空格或是标点符号而没有数字或另外的大写字母则 $ans++$ 否则就不加，读到标点后输出 $ans$ 然后 $ans$ 清空就行了。
# code：
```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	char c;
	int ans=0;
	int n;
	cin>>n;
	while(n){
		c=getchar();
		if(c>='A'&&c<='Z'){
			bool pd=1;
			c=getchar();
			while(c!=' '&&c!='.'&&c!='?'&&c!='!'){
				if(c<'a'||c>'z'){
					pd=0;
					break;
				}
				c=getchar();
			}
			if(pd){
				ans++;
			}
		}
		if(c=='.'||c=='!'||c=='?'){
			n--;
			cout<<ans<<endl;
			ans=0;
		}
	}
	return 0;
} 
```


---

## 作者：Vanyun (赞：1)

## 题意

给定$n$句话。每句话以".", "?", "!"结尾。

输出每句话中有多少个名字。

名字的定义为：只有首字母大写且不含有数字的字符串。

## 思路

字符串是否为名字特别好判断，只要按照题中的要求判断就好。

问题在输入。

是需要读入一行字符串。~~可以用gets XD~~。

注意到每一句话都是有空格的。

那我们可以用string读入，string的读入会读到到空格或者换行符才结束。

而且读进来的字符串不包含空格和换行符。

那我们对于一句话，就一直用string读就好了，读到结尾符号的话就转到下一句话。

**c++11**里面的string有函数叫front和back，可以很方便的帮助我们进行判断。

## 代码
```c++
#include <bits/stdc++.h>
using namespace std;

int n, ans;
string ch;

signed main(){
	scanf("%d", &n);
	for(int i = 1; i <= n; i ++){
		ans = 0;
		while(1){
			cin >> ch;
			if('A' <= ch.front() and ch.front() <= 'Z'){
				bool ok = 1;
				for(int j = 0; j < ch.size(); j ++){
					if('0' <= ch[j] and ch[j] <= '9') ok = 0;
				}
				ans += ok;
			}
			if(ch.back() == '?' or ch.back() == '!' or ch.back() == '.') break;
		}
		printf("%d\n", ans);
	}
	return 0;
}
```





---

## 作者：WaltVBAlston (赞：1)

~~主观认为应该评橙~~

线性做法，外层循环这个字符串，里层循环当前这个单词。

有同学可能会说了：你这个做法是两层循环呀，平方级别。

大家仔细看，我在里层循环用的循环变量仍然是$i$，所以复杂度是$O(n)$级别的。

具体做法：输入后循环遍历，如果遇到一个大写单词，因为题目说了，首字母是大写单词的就是名字，就可以直接遍历这个单词，更详细的做法见代码：

```
#include<iostream>
#include<cstdio>
#include<string>
using namespace std;
int sum=0;
string s,m;
int main(){
	getline(cin,m);
	getline(cin,s);
	int len=s.length();
	for(int i=0;i<len;i++){
		if(s[i]>='A'&&s[i]<='Z'){
			i++;
			bool flag=true;
			while(s[i]!=' '&&i<len&&s[i]!='.'&&s[i]!='!'&&s[i]!='?'){
				if(s[i]<'a'||s[i]>'z')
					flag=false;
				i++;
			}
			if(flag)
				sum++;
		}
		if(s[i]=='.'||s[i]=='!'||s[i]=='?'){
			cout<<sum<<endl;
			sum=0;
		}
	}
	return 0;
} 
```
（本题使用$O(n^2)$做法也能通过，但最好不要，毕竟是练习，追求高效）

---

## 作者：ShanCreeperPro (赞：0)

## P8338 [COCI2016-2017#3] Imena 題解

- 循环设定：

不断读入字符串，定义变量 $\texttt{ans}$ 为标点符号的数量，若 $\texttt{ans}=n$ 时，退出。

- 判断人名：

人名的字符串应该为：第一个字母为大写且没有数字。

定义变量 $\texttt{len}$ 为当前字符串的长度，随后使用 for 循环从 $0$ 到 $\texttt{len}-1$，如果发现了数字立刻 `continue`，如果首字母不是大写也直接 `continue`。

满足了所有的条件，定义 $\texttt{name\_ans}$ 为名字的个数，将它加上 1.

- 结束

输出 $\texttt{name\_ans}$，然后将它归零。

---

## 作者：ForeverHYX (赞：0)

# 题解012 P6882
这是一道非常水的字符串题，但是~~我调了半个钟头~~很吃对于细节的理解。
## 01 本题思路
### 对于句子个数 $n$ 的判断的方法
我使用的是维护一个变量 $dot$ 表示当前记录到的标点个数。

由于所有输入都在一行，我们可以当成很多个字符串读入，一旦发现字符串末尾是标点，就进行预处理，即将句子长度减  $1$ 。

```cpp
if(s[lens-1]=='.'||s[lens-1]=='?'||s[lens-1]=='!') lens--;
//预处理部分
-----------------------------------------
if(s[lens]=='.'||s[lens]=='?'||s[lens]=='!'){
            dot++;
        }
//句子个数记录部分
```

### 如何判断单词
我们可以记录每次读入字符串的长度 $dis$ ，然后对这一部分的字符遍历，若有不满足条件的，就可以将标识变量 $flag$ 设置为 $True$ ，如果 $flag==0$ 到最后仍然成立，就可以将 $ans[dot+1]++$ 

因为读到标点永远在字母后，所以是 $dot+1$ 。

## 02 AC代码

```cpp
#include<cstring>
#include<iostream>
#include<cstdio>
using namespace std;
char s[2000],n,lens;
bool flag;
int ans[1000],dot;
int main(){
    scanf("%d",&n);
    while(dot<n){
        scanf("%s",s);
        int lens=strlen(s);
        flag=0;
        if(s[lens-1]=='.'||s[lens-1]=='?'||s[lens-1]=='!') lens--;
        if(s[0]<'A'||s[0]>'Z') flag=1;
        for(int i=1;i<lens;i++){
            if(s[i]<'a'||s[i]>'z') flag=1;
        }
        if(!flag) ans[dot+1]++;
        if(s[lens]=='.'||s[lens]=='?'||s[lens]=='!'){
            dot++;
        }
    }
    for(int i=1;i<=n;i++) printf("%d\n",ans[i]);
}
```
抄代码没有任何意义，可以看一遍再写哟~

 _本蒟蒻的第12篇题解，求管理员大大通过。_ 




---


# [信息与未来 2018] 圣诞树

## 题目描述

圣诞树共有 $n$ 层，从上向下数第 $1$ 层有 $1$ 个星星、第 $2$ 层有 $2$ 个星星、以此类推，排列成下图所示的形状。

![](https://cdn.luogu.com.cn/upload/image_hosting/gnp9d7er.png)

星星和星星之间用绳子连接。第 $1,2,\cdots, n - 1$ 层的每个星星都向下一层最近的两个星星连一段绳子，最后一层的相邻星星之间连一段绳子。

你能算出如果要布置一棵很大（$n$ 层）的圣诞树，需要买多少段绳子吗？

## 说明/提示

### 样例解释
#### 样例 $1$
$2$ 层的圣诞树只需 $3$ 段绳⼦。
#### 样例 $2$
参考题图。
### 数据规模
所有数据满足 $1 ≤ n ≤ 10^3$。
> 本题原始满分为 $15\text{pts}$。

## 样例 #1

### 输入

```
2```

### 输出

```
3```

## 样例 #2

### 输入

```
4```

### 输出

```
15```

# 题解

## 作者：残阳如血 (赞：15)

## 思路分析
### 分解问题
简单的一个找规律的题目。

我们可以将整个圣诞树的连边**分为两类**：从上往下连接和最后一排横向连接的绳子。

其中从上往下连接的定义时：$1,2,\cdots,n-1$ 层的每个星星都向下一层最近的两个星星连的绳子。

接下来我们可以对其分别计数，最后两部分求和即可。
### 从上往下连接
**声明**：在这部分中，我们定义第 $i\,(1\le i\le n-1)$ 层的绳子数为第 $i$ 层连接第 $i+1$ 层的绳子数量。

运用大眼观察法，可以发现第 $i$ 层的绳子数为 $2\times i$，所以可以得出这部分的每层的绳子数构成一个等差数列，为 $2,4,6,\cdots,2\times(n-1)$。 根据等差数列求和公式，上数列的所有数之和即为 $\dfrac{[\,2+2\times(n-1)\,]\times(n-1)}{2}=n\times(n+1)$。
### 最后一排横向连接
很容易发现，这一部分的绳子数即为 $n-1$。
### 合并问题
将两部分的值相加，得 $n\times(n-1)+(n-1)=(n-1)\times(n+1)$。这就是最终的答案了。由于 $n\le10^3$，所以 $(n-1)\times(n+1)\le999999$，无需开 `long long`。
## 代码演示
```cpp
#include <iostream>

int main() {
	int n; std::cin >> n;
	std::cout << (n + 1) * (n - 1); // 根据公式直接计算
	return 0;
}
```

---

## 作者：chen_zhe (赞：1)

欢迎报名[洛谷网校](https://class.luogu.com.cn/)，期待和大家一起进步！

本题考察数学。

我们一层一层地看星星。如果当前层不是最后一层，那么每一颗星星会往其左下方和右下方各连一段绳子，而当前层一共有和层数一样多的星星。也就是说：

- 第一层，一颗星星连出 $2$ 段绳子，第二层有两颗星星；
- 第二层，两颗星星连出 $4$ 段绳子，第三层有三颗星星；
- 第三层，三颗星星连出 $6$ 段绳子，第四层有四颗星星；
- 以此类推……

我们可以使用循环语句计算第一层到倒数第二层要连多少段绳子：

```cpp
for (int i = 1; i < n; i++)
    s += i * 2;
```

至于最后一层，有 $n$ 颗星星，根据**植树问题**，有 $n-1$ 段绳子。因此，答案为 $s+n-1$。输出这一个数值即可。

---


# [语言月赛202301] 避雷针

## 题目描述

$n$ 个避雷针从左至右排成一排，我们将它们从左至右依次标号为 $1 \sim  n$。

现在有 $m$ 道雷依次劈下。你得知了一串序列 $a _ 1, \cdots, a _ m$。对于第 $i$ 道雷，其劈中了 $a _ i - 2$（如果存在）、$a _ i - 1$（如果存在）、$a _ i$、$a _ i + 1$（如果存在）、$a _ i + 2$（如果存在）号避雷针。

在 $m$ 道雷劈完后，你想要知道，被劈过**至少一次**的避雷针有几个。

## 说明/提示

### 样例 1 解释

被劈中的避雷针是 $2, 3, 4, 5, 6$ 号，共 $5$ 个。

### 样例 2 解释

被劈中的避雷针是 $1, 2, 3, 4$ 号，共 $4$ 个。请注意 $a _ 1 - 2 = 0$ 号避雷针不存在，也不应被劈中。

### 样例 3 解释

被劈中的避雷针是 $1, 2, 3, 4, 5, 6, 7, 8, 9$ 号，共 $9$ 个。

请注意尽管部分避雷针被劈了两次甚至三次，对这些避雷针我们仍然只计数一次。

### 数据规模与约定

- 对于前 $10\%$ 的数据，保证 $n = 1$。
- 对于前 $30\%$ 的数据，保证 $m = 1$。
- 对于另外 $20\%$ 的数据，保证 $m \leq n - 2$ 且 $\forall i \in [1, m], a _ i = i$。
- 对于 $100\%$ 的数据，保证 $1 \leq n,m \leq 10 ^ 6$，$1 \leq a _ i \leq n$。

## 样例 #1

### 输入

```
17 1
4```

### 输出

```
5```

## 样例 #2

### 输入

```
10 1
2```

### 输出

```
4```

## 样例 #3

### 输入

```
9 3
3 7 7```

### 输出

```
9```

# 题解

## 作者：Maxmilite (赞：17)

# [语言月赛202301] 避雷针 题解

## Source & Knowledge

2023 年 1 月语言月赛，由洛谷网校入门计划/基础计划提供。

## 文字题解

### 题目大意

给定 $n, m$ 和一串序列 $a _ 1, \cdots, a _ m$。

对于第 $i$ 个元素，其影响了 $a _ i - 2$（如果存在）、$a _ i - 1$（如果存在）、$a _ i$、$a _ i + 1$（如果存在）、$a _ i + 2$（如果存在）这些位置。

需要计算最后 $n$ 个位置中有几个位置被影响到。

### 解析

注意到 $1 \leq n,m \leq 10 ^ 6$，所以我们可以直接建立长度为 $10 ^ 6$ 的数组 $f$，并全体初始化为 $0$。

对 $m$ 个元素，如果某一元素影响了 $i$ 号位置，我们便将 $f _ i$ 标记为 $1$。

需要注意的是，题目仅保证 $1 \leq a _ i \leq n$，因此直接访问 $f$ 数组的 $a _ i - 2$ 等下标对应的位置可能会导致越界访问。

这里一个比较取巧的方法是，在遍历 $a _ i - 2 \sim a _ i + 2$ 时，我们将遍历范围直接使用 `max` 和 `min` 函数限定到 $[1, n]$ 内。核心代码如下：

```cpp
for (int i = 1, x; i <= m; ++i) {
	scanf("%d", &x);
	for (int j = max(1, x - 2); j <= min(n, x + 2); ++j)
		f[j] = 1;
}
```

最后统计 $f$ 数组中有几个 $1$ 并输出即可。

## 视频题解

**完整代码请在视频中查看。**

![](bilibili:BV1Es4y1t7wu?page=6)

---


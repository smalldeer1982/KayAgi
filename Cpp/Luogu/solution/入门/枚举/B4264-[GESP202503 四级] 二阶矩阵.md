# [GESP202503 四级] 二阶矩阵

## 题目描述

小 A 有一个 $n$ 行 $m$ 列的矩阵 $A$。

小 A 认为一个 $2 \times 2$ 的矩阵 $D$ 是好的，当且仅当 $D_{1,1} \times D_{2,2} = D_{1,2} \times D_{2,1}$。其中 $D_{i,j}$ 表示矩阵 $D$ 的第 $i$ 行第 $j$ 列的元素。

小 A 想知道 $A$ 中有多少个好的子矩阵。

## 说明/提示

### 样例解释

样例中好的子矩阵如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/lcdtefnp.png)

### 数据范围

对于所有测试点，保证 $1\leq n\leq 500$，$1\leq m\leq 500$，$-100\leq A_{i,j}\leq 100$

## 样例 #1

### 输入

```
3 4
1 2 1 0
2 4 2 1
0 3 3 0```

### 输出

```
2```

# 题解

## 作者：chen_zhe (赞：15)

欢迎报名[洛谷网校](https://class.luogu.com.cn/)，期待和大家一起进步！

本题是一道较为基础的考察二维数组的题目。

既然我们要找所有 $2 \times 2$ 的“好的”小矩阵，最直接的想法就是：我们把大表格里所有可能的 $2 \times 2$ 小矩阵都找出来，然后一个一个地检查它们是不是“好的”。

一个 $2 \times 2$ 的小方块是由它的左上角位置决定的。假设这是第 $r$ 行第 $c$ 列，我们就知道了这个小方块的四个数字：
*   左上角 $D_{1,1}$ 就是大表格里的 $A[r][c]$
*   右上角 $D_{1,2}$ 就是大表格里的 $A[r][c+1]$ (同一行，右边一列)
*   左下角 $D_{2,1}$ 就是大表格里的 $A[r+1][c]$ (下一行，同一列)
*   右下角 $D_{2,2}$ 就是大表格里的 $A[r+1][c+1]$ (下一行，右边一列)

因此我们只需要判断 $A[r][c] \times A[r+1][c+1]$ 是不是等于 $A[r][c+1] \times A[r+1][c]$ 即可，使用计数变量统计好的子矩阵个数即可。

参考代码：

```cpp
for (int r = 0; r < n - 1; r++)
    for (int c = 0; c < m - 1; c++)
        if (a[r][c] * a[r + 1][c + 1] == a[r + 1][c] * a[r][c + 1])
            ans++;
```

---


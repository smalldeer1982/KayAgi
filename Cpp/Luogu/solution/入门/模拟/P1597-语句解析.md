# 语句解析

## 题目背景

木有背景……


## 题目描述

一串长度不超过 $255$ 的 PASCAL 语言代码，只有 $a,b,c$ 三个变量，而且只有赋值语句，赋值只能是一个一位的数字或一个变量，每条赋值语句的格式是 `[变量]:=[变量或一位整数];`。未赋值的变量值为 $0$ 输出 $a,b,c$ 的值。

## 说明/提示

输入的 PASCAL 语言长度不超过 $255$。

## 样例 #1

### 输入

```
a:=3;b:=4;c:=5;```

### 输出

```
3 4 5```

# 题解

## 作者：化学小哥 (赞：844)

史上最短p1597代码

```cpp
#include<cstdio>
using namespace std;
int a[3];char s1,s2;
int main()
{
    while (scanf("%c:=%c;",&s1,&s2)==2)//充分利用c++语言优势
     a[s1-'a']=s2>='0' && s2<='9' ? s2-'0' : a[s2-'a']; //赋值语句简洁明了
    printf("%d %d %d",a[0],a[1],a[2]);
}
```

---

## 作者：MscWood (赞：108)


这道题其实**不用挨个分类讨论**

只需要通过**字符之间的转换**来操作就可以了

比如说 字符'9'转换为数值9  可以** int(x-'0')** 转为数值

还有字母间的赋值  也可以通过类似的方法

不多说了贴代码



```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
#include<string>
using namespace std;
int main()
{
    string s;
    int ans[3]={0};    //用于储存答案 ans[0]为a, ans[1]为b, ans[2]为c 
    cin>>s;            //读入字符串 
    for(int i=0;i<s.length()-1;i++)  //每位开始判断 
    {
        if(s[i]=='=')   //如果判断为 = 
        if(s[i+1]>='0'&&s[i]+1<='9')  //如果 = 后面是个数字 
            ans[int(s[i-2])-97]=int(s[i+1]-'0');    //直接赋值 （s[i-2]就是冒号前的子母；-97是因为'a'=97）
                                                    //int(s[i+1]) 是等号后面的字符转换为数值
        else                                        //如果等号后面不是数字（就是字母） 
        ans[int(s[i-2])-97]=ans[int(s[i+1])-97];    //ans[int(s[i-2])-97]是冒号前（被赋值）的字母 
                                                    //ans[int(s[i+1])-97]是等号后（给赋值）的字母 
    }
    cout<<ans[0]<<" "<<ans[1]<<" "<<ans[2];                 //最后输出 a,b,c; 
    return 0;
}
```
/\*
大家主要好好理解一下  int(s[i-2])-97 和 int(s[i+1]-'0') 的转换

以及  ans[int(s[i-2])-97] = ans[int(s[i+1])-97] 的赋值过程

实在不懂可以收动调试一下，对思维很有帮助（我感觉）、、

\*/

---

## 作者：cff_0102 (赞：33)

比第一篇 C++ 题解代码还短的 Python 代码。

题目要求让我们执行一段代码，不难想到 Python 中的 `exec()` 正好就可以帮我们执行字符串中的代码。不过因为 Pascal 和 Python 语法的不同，需要先将输入中的冒号删掉，这里可以用 `str.replace(':','')` 实现。

```python
a=b=c=0
exec(input().replace(':',''))
print(a,b,c)
```

需要注意的是，题目中说到没有赋值的变量默认为 $0$，所以需要先定义 $a,b,c$ 三个变量。

---

## 作者：Spooky (赞：5)

## 题意
输入一串变量赋值的字符串，只有 $a$，$b$，$c$ 三个变量，规定格式为 `[变量]:=[变量或一位整数];`。未赋值的变量值为 $0$。
## 分析
非常适合刚接触字符串的入门选手。

首先输入字符串 $s$，然后依次判断一个字符是不是被赋值变量，就是字母后面是否有 `:`。

再判断赋值给这个变量的是数字还是“字母”（就是另一个变量的值）。如果是数字就直接赋值，如果是“字母”就把“字母”的对应值提取出来赋值给当前被赋值的变量。
## 代码

```cpp
#include <bits/stdc++.h>
using namespace std;
string s;
int a[200];
main(){
    cin>>s;
    for(int i=0;i<s.size();i++){
		if('a'<=s[i]&&s[i]<='z'&&s[i+1]==':'){
			if('0'<=s[i+3]&&s[i+3]<='9'){
				a[s[i]]=s[i+3]-'0';
			}else{
				a[s[i]]=a[s[i+3]];
			}
		}
	}
	cout<<a[97]<<" "<<a[98]<<" "<<a[99];
	return 0;
}
```

---

## 作者：_luogu_huowenshuo_ (赞：2)

### 解法

py 大法好！直接用 `replace` 函数将 `:` 替换为空，并用 `exec` 赋值变量，最后输出。

### 最短代码

```py
a=b=c=0;exec(input().replace(':',''));print(a,b,c)
```

---

## 作者：kuaiCreator (赞：2)

## 解题思路
  考虑变量和数字都是一位的，可以将字符串分成五个字符一段。每一段中只有第一个字符和第四个字符是有效信息，故只需要处理这两个字符即可。  
  用 `map<char,char> mp` 维护变量存储的信息。如果每段的第四个字符是数字直接建立变量与数字的映射。如果是变量则建立变量与第四个字符对应映射的映射。
## 代码实现

```cpp
#include<bits/stdc++.h>
using namespace std;
int main() {
	string s;
	map<char, char> mp;
	cin >> s;
	mp['a'] = mp['b'] = mp['c'] = '0';
	for (int i = 0; i < s.size(); i += 5) {
		if (s[i + 3] >= '0' && s[i + 3] <= '9')
			mp[s[i]] = s[i + 3];
		else
			mp[s[i]] = mp[s[i + 3]];
	}
	cout << mp['a'] << " " << mp['b'] << " " << mp['c'];
	return 0;
}
```

---

## 作者：_luogu_huowenshuo_ (赞：2)

### 解法

未赋值的变量值为 $0$。循环解析每条语句，更新变量值，最后输出 $ a, b, c $ 的值。使用字符串处理，逐条解析语句，提取变量和值（数字或变量），更新对应变量。

### C++ 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	string s;
	getline(cin,s);
	int v[3]={0,0,0};
	for(int i=0;i<s.size();){
		if(s[i]!='a'&&s[i]!='b'&&s[i]!='c'){i++;continue;}
		int var=s[i]-'a';
		i+=3;
		if(s[i]>='0'&&s[i]<='9')v[var]=s[i]-'0';
		else v[var]=v[s[i]-'a'];
		i+=2;
	}
	cout<<v[0]<<" "<<v[1]<<" "<<v[2];
	return 0;
}
```

---


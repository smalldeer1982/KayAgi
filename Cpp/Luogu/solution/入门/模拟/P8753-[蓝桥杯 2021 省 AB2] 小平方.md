# [蓝桥杯 2021 省 AB2] 小平方

## 题目描述

小蓝发现，对于一个正整数 $n$ 和一个小于 $n$ 的正整数 $v$，将 $v$ 平方后对 $n$ 取余可能小于 $n$ 的一半，也可能大于等于 $n$ 的一半。

请问，在 $1$ 到 $n-1$ 中, 有多少个数平方后除以 $n$ 的余数小于 $n$ 的一半。

例如，当 $n=4$ 时，$1,2,3$ 的平方除以 $4$ 的余数都小于 $4$ 的一半。

又如，当 $n=5$ 时, $1$，$4$ 的平方除以 $5$ 的余数都是 $1$，小于 $5$ 的一半。而 $2$，$3$ 的平方除以 $5$ 的余数都是 $4$, 大于等于 $5$ 的一半。

## 说明/提示

对于所有评测用例, $1 \leq n \leq 10000$。 

蓝桥杯 2021 第二轮省赛 A 组 F 题（B 组 G 题）。

## 样例 #1

### 输入

```
5
```

### 输出

```
2
```

# 题解

## 作者：kiki_123 (赞：27)

[$\color{red}\text{题目传送门}$](https://www.luogu.com.cn/problem/P8753)

[$\color{red}\text{更好的阅读体验}$](https://www.luogu.com.cn/blog/Alex-ZJY/solution-p8753)

## 题意
在 $1$ 到 $n-1$ 中，有多少个数平方后除以 $n$ 的余数小于 $n$ 的一半。

## 分析
从 $1$ 到 $n-1$ 枚举，每次判断 $i\times i \bmod n$ 是否小于 $n/2.0$。

这点有个小坑：一定是 $n/2.0$ 而不是 $n/2$ ，因为 $n/2$ 会自动向下取整，而 $n/2.0$ 得到的是精确值。

## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	long long n,ans=0;
	cin>>n;
	for(int i=1;i<n;i++)
	{
		if(i*i%n<n/2.0) ans++;
	}
	cout<<ans<<endl;
   	return 0;
}
```

---

## 作者：Lizj (赞：6)

## 题意分析

题意题面已经说明，在此就不再赘述。

分析：由于 $n\leq 10000$ 所以可以暴力枚举，枚举每一个 $i$，看是否符合要求，如符合，满足条件的数的数量增多。

## 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	int n,t=0;
	cin>>n;
	for(int i=1;i<=n-1;i++){
		if((i*i)%n<n/2){
			t++;
		}
	}cout<<t;
    return 0;
}
```
但这样会错，因为 $n \div 2$ 自动向下取整了，由此可以得出正确代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	int n,t=0;
	double cnt=0;
	cin>>n;
	cnt=n/2.0;	//用 double 变量存下 n/2 的商。
	for(int i=1;i<=n-1;i++){	//枚举到 n-1
		if((i*i)%n<cnt){
			t++;
		}
	}cout<<t;
    return 0;
}
```


---

## 作者：KidA (赞：5)

update on ```2022/12/21```：更正了文中的几处笔误。

---


直接从 $1$ 枚举到 $n-1$，对于每一个枚举到的 $x$，判定 $x^2 \bmod n$ 是否 $<n \times 0.5$ 即可。

注意：判定时要注意精度问题，不能用 ```if(i*i%n<n/2)```，而必须使用 ```if(i*i%n<n*0.5)``` 来判定，不然就只能得到 $60$ 分。

代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
    int n, ans = 0;
    cin>>n;
    for(int i = 1;i <= n - 1;i++) 
    	if((i * i % n) < (n * 0.5)) ans++; //判定并计入答案
    cout<<ans;
    return 0;
}
```



---

## 作者：RP_INT_MAX (赞：2)

不多说了，直接照题意模拟即可。由于 $n \leqslant 10^4$，无须担心爆 `int` 的情况。

有一个细节需要注意，枚举的区间是 $[1,n)$ 而不是 $[1,n]$。

放代码。

```cpp
#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
using namespace std;
int n,m,ans;
int main () {
	scanf("%d",&n);
	m=n/2;
	for(int i=1;i<n;++i)
		if(i*i%n<=m) ++ans;
	printf("%d\n",ans);
	return 0;
}
```

---

## 作者：Infinite_Eternity (赞：2)

# Description

[P8753 [蓝桥杯 2021 省 AB2] 小平方](https://www.luogu.com.cn/problem/P8753)

在 $1$ 到 $n-1$ 中, 有多少个数平方后除以 $n$ 的余数小于 $n$ 的一半。

数据范围：$1 \leq n \leq 10000$。

# Analysis

入门题，设立一个游标 $i$，使得 $i \in [1,n-1]$，按题意模拟即可。

**唯一的一个注意点是：因为 $n$ 是整数，而 $\dfrac{n}{2}$ 会自动向下取整，所以需要转换为 `double` 类型。**

# Code

```cpp
#include <bits/stdc++.h>
using namespace std;
int n,ans;
int main()
{
    scanf("%d",&n);
    for (register int i=1;i<n;++i)
    {
        int mod=i*i%n;
        double half=n/2.0;//转换成double类型
        if(mod<half) 
            ans++;
    }
    printf("%d",ans);
    return 0;
}
```

---


# [语言月赛202303] Milk Sales S

## 题目描述

Farmer John 正在售卖两款牛奶，分别为 A 型牛奶和 B 型牛奶。

Farmer John 已经售卖了 $n$ 个月这两种牛奶，得到了一份数据 $a _ 1, a _ 2, \cdots a _ n$ 和 $b _ 1, b _ 2, \cdots, b _ n$，分别代表 A、B 型牛奶每个月的销量。

其中，$a _ i$ 代表 A 型牛奶第 $i$ 个月的销量，$b _ i$ 代表 B 型牛奶分别的销量，二者单位均为盒。

现在，Farmer John 想要知道，在这 $n$ 个月中，在**最少**经过几个月后，B 型牛奶的累计售出的盒数超过 A 型牛奶累计售出的盒数。

形式化的讲，请你求出最小的 $x$，使 $\sum \limits _{i=1}^x a_i<\sum \limits _{i=1}^x b_i$。

## 说明/提示

### 样例 1 解释

在这 $4$ 个月中，A、B 型牛奶的售卖情况如下表所示：

| 月份 | A 型牛奶累计销量 | B 型牛奶累计销量 | B 型累计销量是否超过 A 型 |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $3$ | $2$ | 否 |
| $2$ | $10$ | $10$ | 否 |
| $3$ | $12$ | $13$ | **是** |
| $4$ | $21$ | $30$ | 是 |

最早经过 $3$ 个月后，B 型牛奶的累计售出的盒数超过 A 型牛奶累计售出的盒数。

### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \leq n \leq 10 ^ 5$，$1 \leq a_i,b_i \leq 10 ^ 9$ ，保证存在至少一个 $x \in [1, n]$ 使得 $\sum \limits _{i=1}^x a_i<\sum \limits _{i=1}^x b_i$。

| 测试点编号 | $n$ | $a_i,b_i$ | 特殊性质 |
| :----------: | :----------: | :----------: | :----------: |
| $1 \sim 2$ | $\leq 10$ | $\leq 100$ | 无 |
| $3 \sim 5$ | $\leq 5 \times 10 ^ 3$ | $\leq 10 ^ 5$ | 无 |
| $6 \sim 7$ | $\leq 10 ^ 5$ | $\leq 10 ^ 9$ | 保证 $a _ 1 < b _ 1$ |
| $8 \sim 10$ | $\leq 10 ^ 5$ | $\leq 10 ^ 9$ | 无 |

## 样例 #1

### 输入

```
4
3 7 2 9
2 8 3 17```

### 输出

```
3```

# 题解

## 作者：一扶苏一 (赞：2)

# [语言月赛202303] Milk Sales S 题解

## Source & Knowledge

2023 年 3 月语言月赛，由洛谷网校入门计划/基础计划提供。

本题考察循环结构。

## 文字题解

### 题目大意

给定两个数列 $a, b$，要求找到最小的 $x$，满足 $a_1 + a_2 + \dots + a_x < b_1 + b_2 + \dots b_x$。

### 解析

#### 算法一

一个简单的做法是从小到大枚举 $x$，然后每次计算 $sa = a_1 + a_2 + \dots + a_x$ 和 $sb = b_1 + b_2 + \dots + b_x$，找到最小的 $x$ 并比较。

```cpp
for (int x = 1; x <= n; ++x) {
  long long sa = 0, sb = 0;
  for (int i = 1; i <= x; ++i) {
    sa += a[i]; sb += b[i];
  }
  if (sa < sb) {
    ans = x; break;
  }
}
```

这一做法使用了一个循环嵌套。外层循环大小为 $n$，内层循环大小的上界也是 $n$。

更具体的分析，循环的执行次数是 $1 + 2 + 3 + \dots + n = \frac{n + n^2}{2}$。也就是总的运算量大约有 $n^2$ 次。可以通过 $n \leq 5 \times 10^3$ 的数据。当 $n = 10^5$ 时，$n^2$ 达到了 $10^{10}$ 级别。计算机一秒大约只能执行 $10^8$ 次运算，所以无法通过本题。

#### 算法二

观察算法一的代码，可以发现 $sa$ 和 $sb$ 事实上不需要每次都重新计算。

具体来说，假设上次循环已经求出了 $sa' = a_1 + a_2 + \dots + a_{x - 1}$，那么本次要求的 $sa = a_1 + a_2 + \dots + a_{x} = sa' + a_{x}$。只需要用两个变量分别维护 $sa$ 和 $sb$，当 $x$ 增加时，把它们分别加上 $a_x$ 和 $b_x$ 并作比较即可。

```cpp
long long sa = 0, sb = 0;
for (x = 1; x <= n; ++x) {
  sa += a[x]; sb += b[x];
  if (sa < sb) {
    ans = x; break;
  }
}
```

这份代码只用了一个长度为 $n$ 的循环，运算量在 $10^5$ 数量级，可以通过本题。

需要注意的是，$sa$ 和 $sb$ 的最大值可能达到 $10^5 \times 10^9 = 10^{14}$。因此需要开 `long long`。

## 视频题解

**完整代码请在视频中观看**。

![](bilibili:BV1Vv4y1L7Vc?page=4)

---


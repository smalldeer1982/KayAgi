# [语言月赛 202311] 表格处理

## 题目描述

小 A 有一张 $2\times n$ 行，$2\times m$ 列的表格。表格上每一行、每一列都有一个正整数。他将对表格先进行一次合并操作，再进行一次转置操作。

对于一个 $2\times n$ 行，$2\times m$ 列的表格 $A$，进行一次合并操作得到一个 $n$ 行 $m$ 列的表格 $A'$ 的流程为：

- 将奇数列的每个数加上其右侧相邻的数，之后删除所有的偶数列，给每一列重新编号为第 $1,2,3,\dots,m$ 列；
- 将奇数行的每个数加上其下侧相邻的数，之后删除所有的偶数行，给每一行重新编号为第 $1,2,3,\dots,n$ 行；

对于一个 $n$ 行 $m$ 列的表格 $A$，进行一次转置操作得到一个 $m$ 行 $n$ 列的表格 $A^T$ 的流程为：

- 对于所有的 $i,j$，令 $A^T_{i,j}=A_{j,i}$；

小 A 想要知道经过这样两次操作后表格会是什么样的。请输出该表格。

**本题的输入输出规模较大，特别是对使用 Java/Python 等非传统语言的选手，请使用相对快速的输入输出方式。**

## 说明/提示

**【样例解释】**

对于样例一给出的表格，其是经过这些变换得到的：

$\begin{bmatrix}2 & 7 & 1 & 8 \\ 1 & 8 & 2 & 8 \\ 3 & 1 & 4 & 1 \\ 5 & 9 & 2 & 6 \end{bmatrix} \underrightarrow{删除列} \begin{bmatrix} 9 & 9 \\ 9 & 10 \\4 & 5 \\ 14 & 8 \\\end{bmatrix} \underrightarrow{删除行} \begin{bmatrix} 18 & 19 \\ 18 & 13\end{bmatrix} \underrightarrow{转置} \begin{bmatrix} 18 & 18 \\19 & 13\end{bmatrix}$

**【数据范围】**

对于所有数据，保证：$1 \leq n,m \leq 1000$，$1 \leq a_i \leq 10^6$。

## 样例 #1

### 输入

```
2 2
2 7 1 8
1 8 2 8
3 1 4 1
5 9 2 6```

### 输出

```
18 18
19 13```

## 样例 #2

### 输入

```
3 3
6 2 3 5 3 2
1 3 1 4 5 2
7 8 7 8 5 6
2 8 3 6 4 8
9 2 1 8 7 5
4 2 4 3 5 1```

### 输出

```
12 25 17
13 24 16
12 23 18```

# 题解

## 作者：chen_zhe (赞：3)

# Source & Knowledge

2023 年 11 月语言月赛，由洛谷网校入门计划/基础计划提供。

考察数组的运用。

# 文字题解

我们分别实现题目中给定的两个操作。

**合并操作**

观察题目中给定的合并操作的描述，我们会发现以下的特征：我们可以将原表格划分成若干 $2\times 2$ 的小表格。每个表格仅会保留最左上角的那个位置。其他的三个数会被加入到表格最左上角的值。以样例为例：

$\begin{bmatrix}\blue2 & \blue7 & \red1 & \red8 \\ \blue1 & \blue8 & \red2 & \red8 \\ \green3 & \green1 & \purple4 & \purple1 \\ \green5 & \green9 & \purple2 & \purple6 \end{bmatrix}$

我们用四种不同的颜色区分出了四个小表格。如果每个表格仅保留最左上的位置，其他的数加入到小表格最左上的值的话，就会变成：

$\begin{bmatrix} \blue{18} & \red{19} \\ \green{18} & \purple{13}\end{bmatrix}$

这恰恰与合并操作做的是相同的。因此，我们无需真的去删除偶数行和偶数列，仅仅需要通过这种方式我们就可以自然地完成合并操作。

而至于转置操作，我们可以根据题目含义，交换矩阵中的行和列，进行输出即可。

本题的坑点有两个：

- 题目中给定的变量是 $n$ 和 $m$，但是实际上表格 $A$ 是 $2n$ 行 $2n$ 列的，因此数组的每个维度要开到 $n$ 和 $m$ 限制的两倍大小，才能保证数组不越界；

- 题目中的样例，给定的情况都是 $n=m$ 的，如果转置操作写的有问题（例如说，输出不是 $m$ 行 $n$ 列的表格 $A^T$，而不小心打成了 $n$ 行 $n$ 列），那么可能无法检查出错误。

详细的代码请参考视频题解。

![](bilibili:BV1jz4y1A7Mz?page=6)

---


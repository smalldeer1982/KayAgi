# [语言月赛 202505] 等分差试题序列

## 题目描述

2025 年 5 月语言月赛共有 $n$ 道题，第 $i$ 道题的分值为 $a_i$。

如果试题 $l$ 至试题 $r$ 中，每两道相邻试题的分值差相同，则称试题 $l$ 至试题 $r$ 构成「等分差试题序列」。特别地，如果 $l=r$ 或 $l+1=r$，我们也认为它构成「等分差试题序列」。

例如，当 $n=6$，$a=[1,3,4,5,7,9]$：

- 试题 $2\sim4$ 构成「等分差试题序列」，因为相邻两道试题之间的分值差依次为 $4-3=5=4-1$。
- 试题 $1$ 构成「等分差试题序列」。这符合上述定义的特别情况。
- 试题 $3\sim 5$ 不构成「等分差试题序列」，因为相邻两道试题之间的分差依次为 $5-4=1$，$7-5=2$。

给出试题的数目和分值，请问最长的「等分差试题序列」包含多少道试题。

## 说明/提示

**【样例 1 解释】**

试题 $2\sim 4$ 与 $4\sim 6$ 均构成长度为 $3$ 的「等分差试题序列」。

可以证明不存在比 $3$ 更大的答案。

**【数据规模与约定】**

对于 $100\%$ 的测试数据：

- $2 \le n \le 5000$
- $1 \le a_i \le 10^9$

## 样例 #1

### 输入

```
6
1 3 4 5 7 9```

### 输出

```
3```

# 题解

## 作者：览遍千秋 (赞：3)

## Source and Knowledge

2025 年 5 月语言月赛，由洛谷网校提供。

数组、循环结构

---

## 文字题解

由于当 $r=l$ 或 $r=l+1$ 时，$[l,r]$ 一定构成等分差试题序列，且有 $n\ge 2$，因此答案的长度至少为 $2$。

在 $1\sim n-1$ 的范围内枚举 $l$，以 $l$ 开头的等分差试题序列的分差，必然是第 $l+1$ 题与第 $l$ 题的分差，即分差 $d=a_{l+1}-a_l$。

继续枚举 $r$，从 $l+1$ 开始，直到 $a_r-a_{r-1} \neq d$，此时 $[l,r-1]$ 构成等分差试题序列，长度为 $(r-1)-l+1=r-l$。

在所有找到的等分差试题序列中取最大值即可。

---


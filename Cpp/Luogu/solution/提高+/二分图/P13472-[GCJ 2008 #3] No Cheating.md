# [GCJ 2008 #3] No Cheating

## 题目描述

一所当地的高中将在一个大教室里举行期末考试。然而，这所学校的一些学生总是试图在考试时偷看彼此的答题卡！

教室可以看作是一个 $M$ 行 $N$ 列的矩形网格，每个单元格代表一个座位。

校长决定制定如下规则以防止作弊：假设一个学生可以看到他左边、右边、左上方和右上方邻座同学的答题卡。座位的安排必须保证没有任何人的答题卡会被其他学生看到。

![](https://cdn.luogu.com.cn/upload/image_hosting/9h75fz4n.png)

如图所示，如果有人坐在 A、C、D 或 E，后排的男孩就能看到他们的答题卡，这样的安排并不好。然而，如果有女生坐在 B，他就无法看到她的答题卡。

教室中有些座位是坏的，不能安排学生坐在坏掉的座位上。

校长请你回答如下问题：在没有人能作弊的前提下，最多能安排多少名学生参加考试？

## 说明/提示

**数据范围**

- $C=20$

**小数据范围（10 分，测试点 1 - 可见）**

- $1 \leqslant M \leqslant 10$
- $1 \leqslant N \leqslant 10$

**大数据范围（20 分，测试点 2 - 隐藏）**

- $1 \leqslant M \leqslant 80$
- $1 \leqslant N \leqslant 80$

由 ChatGPT 4.1 翻译

## 样例 #1

### 输入

```
4
2 3
...
...
2 3
x.x
xxx
2 3
x.x
x.x
10 10
....x.....
..........
..........
..x.......
..........
x...x.x...
.........x
...x......
........x.
.x...x....```

### 输出

```
Case #1: 4
Case #2: 1
Case #3: 2
Case #4: 46```

# 题解

## 作者：chen_zhe (赞：0)

本题解来自于[《挑战程序设计竞赛》](https://www.luogu.com.cn/training/813583)。

---

可以将其看作这样一个图 $G=(V, E)$，把没有坏的座位看作顶点。对于顶点 $v$，如果能看到顶点 $u$ 对应的座位的答案，就在它们之间连一条无向边 $e=(v, u)$。这样，问题就变成了求任意两点都不相邻的最大的顶点集合 $S \subseteq V$。

这个问题就是图的最大独立集问题。对于最大独立集问题，如果图是二分图，可以很容易求出答案。而事实上，在这个问题里，所有的边都连接着 $x$ 为偶数的顶点和 $x$ 为奇数的顶点，因此正是一个二分图。

```cpp
const int dx[4] = {-1, -1, 1, 1}, dy[4] = {-1, 0, -1, 0};

// 输入
int M, N;
char seat[MAX_M][MAX_N + 1];  // 座位

void solve() {
    int num = 0;
    V = M * N;
    for (int y = 0; y < M; y++) {
        for (int x = 0; x < N; x++) {
            if (seat[y][x] == '.') {
                num++;
                for (int k = 0; k < 4; k++) {
                    int x2 = x + dx[k], y2 = y + dy[k];
                    if (0 <= x2 && x2 < N && 0 <= y2 && y2 < M && seat[y2][x2] == '.') {
                        add_edge(x * M + y, x2 * M + y2);
                    }
                }
            }
        }
    }
    printf("%d\n", num - bipartite_matching());
}

```

---


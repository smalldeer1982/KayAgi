# [GCJ 2012 #1B] Safety in Numbers

## 题目描述

有 $N$ 名选手参加一档真人秀节目。每位选手会被评委打分，并获得观众投票。评委分数与观众投票将按照如下方式合成为选手的最终得分：

设 $x$ 为所有选手评委分数的总和。假设某位选手获得了 $j$ 分评委分数，并且她获得了观众投票的 $y$ 部分（$y$ 在 $0$ 到 $1$ 之间，包括 $0$ 和 $1$，例如 $y$ 可能为 $0.3$）。那么这位选手的最终得分为 $j + x \cdot y$。注意，所有选手获得的观众投票比例之和必须为 $1$。

得分最低的选手将被淘汰。

现在给定每位选手从评委那里获得的分数，你的任务是，对于每一位选手，计算她为了**确保自己不会被淘汰**，无论其他观众票如何分配，至少需要获得多少百分比的观众投票。

如果有多名选手并列最低分，则没有任何选手会被淘汰。

## 说明/提示

**限制条件**

- $0 \leq s_i \leq 100$
- 至少存在一个 $i$ 使得 $s_i > 0$。也就是说，至少有一名选手的评委分数大于 $0$。

**测试集 1（10 分，结果可见）**

- $1 \leq T \leq 20$
- $2 \leq N \leq 10$

**测试集 2（11 分，结果隐藏）**

- $1 \leq T \leq 50$
- $2 \leq N \leq 200$

翻译由 ChatGPT-4.1 完成。

## 样例 #1

### 输入

```
4
2 20 10
2 10 0
4 25 25 25 25
3 24 30 21```

### 输出

```
Case #1: 33.333333 66.666667
Case #2: 0.000000 100.000000
Case #3: 25.0 25.0 25.0 25.0
Case #4: 34.666667 26.666667 38.666667```

# 题解

## 作者：Idealwindow (赞：1)

## 思路
该题目需要输出每位选手在确保自己不被淘汰的情况下应当获得的观众投票的比例 $ ( 0 \le y \le 1 ) $，显然该题可以使用**二分法**。

**确保自己不被淘汰**：设当前选手编号为 $ i $，当前选手获得的观众投票的比例为 $ y_i ( 0 \le y_i \le 1 ) $，所有选手评委分数的总和为 $ sum $，最终得分为 $ a_i=s_i+sum \times y_i $，则应满足必定存在选手编号 $ k (1 \le k \le n,k \ne i) $，使 $ a_k \le a_i $。

使用**二分法**解决此类问题最重要的是 check 校验函数的实现。

设满足确保自己不被淘汰条件时得到获得的观众投票的比例最小值为 $ y_{min} $，显然我们可以注意到对于第 $ i $ 位选手，若 $ y $ 已知，$ \min_{1 \le j \le n}(a_j) = a_i $，且 $ \sum_{k=1}^n y_k \ge 1 $，则 $ y \ge y_{min} $。

所以我们可以通过判断除第 $ i $ 位选手之外的任何选手在 $ a \ge a_i $ 的情况下 $ y $ 的最小值，求出所有选手 $ y $ 的总和与 $ 1 $ 比较，若 $ \sum_{k=1}^n y_k \ge 1 $，则 $ y_i $ 变小，反之变大。（**注意**：$ 0 \le y \le 1 $，实际代码编写中应注意取值范围，最后输出结果需要乘以 $ 100 $。）

该代码的复杂度为 $ O( Tn^2\log{W} ) $，可通过本题。（$ W $ 表示该题目要求的最低精度的倒数，即 $ 0 \le y \le 10^7 $）

## 代码

```
#include <bits/stdc++.h>
using namespace std;
int T,s[205],n,sum;
bool check(int p,double y){
	double sc=(double)s[p]+(double)sum*y,sum1=0;
	for(int i=1;i<=n;i++){
		if(i==p) continue;
		sum1+=max((sc-(double)s[i])/(double)sum,0.0);
	}
	return y+sum1>=1;
}
int main(){
	scanf("%d",&T);
	for(int i=1;i<=T;i++){
		sum=0;
		scanf("%d",&n);
		for(int j=1;j<=n;j++)
			scanf("%d",&s[j]),sum+=s[j];
		printf("Case #%d: ",i);
		for(int j=1;j<=n;j++){
			double l=0,r=1;
			while(r-l>1e-7){
				double mid=(l+r)/2;
				if(check(j,mid)) r=mid;
				else l=mid;
			}
			printf("%lf ",l*100);
		}
		printf("\n");
	}
	return 0;
}
```

---


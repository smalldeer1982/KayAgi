# [ROIR 2022] n 巧板 (Day 1)

## 题目背景

翻译自 [ROIR 2022 D1T3](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。

有一个拼图由 $n$ 个三角形组成。要成功解出这个拼图，需要从中选择四个三角形，并按以下规则组合成一个大三角形：

![](https://cdn.luogu.com.cn/upload/image_hosting/texrth5u.png)

这些三角形不能相交，它们的组合必须形成一个三角形。选择的四个三角形中恰好有三个三角形位于角落，另一个三角形位于中心。

三角形放置在桌上，可以自由旋转和移动，但**不能翻转**。

## 题目描述

需要找到所有可以按照指定规则组合成大三角形的四个不同三角形的集合。如果存在一个三角形属于其中一个集合但不属于另一个集合，则认为两个集合是不同的。

## 说明/提示

本题分 $22$ 个测试点，前两个测试点为样例，通过不得分，后 $20$ 个测试点每个 $5$ 分。

| 测试点编号 | 特殊性质 |
| :----------: | :----------: |
| $1$ | 输入数据即样例 $1$ |
| $2$ | 输入数据即样例 $2$ |
| $3$ | 所有三角形全等，$n\le30$ |
| $4$ | 所有三角形都有一条水平的边和一条垂直的边且它们都是等腰三角形，$n\le10$ |
| $5$ | 所有三角形都有一条水平的边和一条垂直的边且它们都是等腰三角形，$n\le30$ |
| $6$ | 所有三角形都有一条水平的边和一条垂直的边且 $n\le10$ |
| $7$ | 所有三角形都有一条水平的边和一条垂直的边且 $n\le30$ |
| $8$ | 所有三角形都是直角三角形且 $n\le10$ |
| $9$ | 所有三角形都是直角三角形且 $n\le30$ |
| $10$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\le10$ |
| $11$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\le20$ |
| $12$ | 所有能拼成大三角形的四个小三角形均不用旋转即可拼成且 $n\le30$ |
| $13$ | $n=10$ |
| $14$ | $n=10$|
| $15$ | $n=10$ |
| $16$ | $n=20$ |
| $17$ | $n=20$ |
| $18$ | $n=20$ |
| $19$ | $n=30$ |
| $20$ | $n=30$ |
| $21$ | $n=30$ |
| $22$ | $n=30$ |

## 样例 #1

### 输入

```
1
4
0 0 6 2 1 2
0 0 5 0 6 3
0 0 3 1 1 3
0 0 6 3 3 6```

### 输出

```
1
1 2 3 4```

## 样例 #2

### 输入

```
2
6
0 0 1 0 1 1
0 1 0 0 1 0
-1 0 0 0 0 1
1 1 0 1 1 0
-1 0 0 -1 0 0
0 0 1 1 0 1```

### 输出

```
15
1 2 3 4
1 2 3 5
1 2 3 6
1 2 4 5
1 2 4 6
1 2 5 6
1 3 4 5
1 3 4 6
1 3 5 6
1 4 5 6
2 3 4 5
2 3 4 6
2 3 5 6
2 4 5 6
3 4 5 6```

# 题解

## 作者：cff_0102 (赞：5)

$n$ 最大值也就 $30$，所以容易想到直接枚举所有四个三角形的可能（需要 $O(n^4)$）。那么难点就变成了如何判断四个三角形能不能拼成一个大三角形。

![](https://cdn.luogu.com.cn/upload/image_hosting/49e13w3a.png)

如上图，如果四个三角形要按照上面的方式拼成大三角形，需要满足：

- $AB = DF$；
- $BC = GI$；
- $CA = JL$；
- $\angle{BAC} + \angle{FDE} + \angle{JLK} = 180\degree$；
- $\angle{CBA} + \angle{IGH} + \angle{DFE} = 180\degree$；
- $\angle{ACB} + \angle{LJK} + \angle{GIH} = 180\degree$。

时间充足，在判断能否拼成的时候也可以直接枚举四个三角形的相对位置。即使将三角形的三个角的方向（哪个角朝哪里）等全部考虑进来，这里也最多只需要判断 $432$ 次，乘上前面的 $30^4$ 等于 $262440000$，还是能过（相信评测机）。

---

## 作者：FeiYu32 (赞：3)

思路较为简单，枚举就行，操作步骤如下：

1. 先选一个位置较为中心的三角形，确保可以从不同方向找到至少三个其他三角形，

1. 寻找平面上拥有一条与其三条边中任意一条长度相同的边的三角形，使三条边都有一条与其相同的边。

1. 将三对长度相同的两边都旋转至平行后，检查拼贴后三个相邻的角是否为$180°$，如果满足就计入答案，然后返回第 $2$ 步，直到确定没有其他可能性后，返回第 $1$ 步。

1. 输出最终的方案数以及各个方案，程序结束。

完结撒花！

---

## 作者：rainbow_cat (赞：2)

如此小的范围自然考虑爆搜，$O(n^4)$。   
对于非中心三角形，只需要判断边长是否相等以及角度和是否和为 $180 \degree$ 即可。   
一个角度分别为 $A,B,C$ 且边长分别为 $a,b,c$ 的三角形满足以下条件：   
$$
A=\arccos \frac{b^2+c^2-a^2}{2bc}
$$
$$
B=\arccos \frac{a^2+c^2-b^2}{2ac}
$$
$$
C=\arccos \frac{a^2+b^2-c^2}{2ab}
$$
代码过于丑陋，就不贴了。

---

## 作者：yuxinrui0618 (赞：1)

# 题解：P10088 [ROIR 2022 Day 1] n 巧板
## 1. 题目大意
- 三角形放置在桌上，可以自由旋转和移动，但**不能翻转**；
- 选择四个三角形，不能相交，选择的四个三角形中恰好有三个三角形位于角落，另一个三角形位于中心，组成一个大三角形。

## 2. 思路
![](https://cdn.luogu.com.cn/upload/image_hosting/49e13w3a.png)
#### 由于 $4 \le n \le 30$，暴力也能过！！！
所以方法如下：  
枚举选择的4个三角形，进行如下判断：  
- $AB=DF$；
- $BC=GI$；
- $AC=JL$；
- $∠KLJ+∠CAB+∠EDF=180°$；
- $∠IGH+∠ABC+∠DFE=180°$；
- $∠KJL+∠ACB+∠GIH=180°$。

## 3. 总结
代码这里就不放啦！！！  
谢谢观赏！！！  
若有不完善的地方还请各位大佬指出！！！

---


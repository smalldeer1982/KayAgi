# [蓝桥杯 2022 国 AC] 内存空间

## 题目描述

小蓝最近总喜欢计算自己的代码中定义的变量占用了多少内存空间。

为了简化问题，变量的类型只有以下三种：

`int`：整型变量，一个 int 型变量占用 $4$ Byte 的内存空间。

`long`：长整型变量，一个 long 型变量占用 $8$ Byte 的内存空间。

`String`：字符串变量，占用空间和字符串长度有关，设字符串长度为 $L$，则字符串占用 $L$ Byte 的内存空间，如果字符串长度为 $0$ 则占用 $0$ Byte 的内存空间。

定义变量的语句只有两种形式，第一种形式为：

```
type var1=value1,var2=value2...;
```

定义了若干个 type 类型变量 var1、var2、……，并且用 value1、value2……初始化。

多个变量之间用 `,` 分隔，语句以 `;` 结尾，type 可能是 `int`、`long` 或 `String`。例如 `int a=1,b=5,c=6;` 占用空间为 $12$ Byte；`long a=1,b=5;` 占用空间为 $16$ Byte；`String s1="",s2="hello",s3="world";` 占用空间为 $10$ Byte。

第二种形式为：

```
type[] arr1=new type[size1],arr2=new type[size2]…;
```

定义了若干 type 类型的一维数组变量 arr1、arr2……，且数组的大小为 size1、size2……，多个变量之间用 `,` 进行分隔，语句以 `;` 结尾，type 只可能是 `int` 或 `long`。例如 `int[] a1=new int[10]`；占用的内存空间为 $40$ Byte；`long[] a1=new long[10],a2=new long[10];` 占用的内存空间为 $160$ Byte。

已知小蓝有 $T$ 条定义变量的语句，请你帮他统计下一共占用了多少内存空间。结果的表示方式为：$\texttt{aGBbMBcKBdB}$，其中 $a$、$b$、$c$、$d$ 为统计的结果，$\texttt{GB}$、$\texttt{MB}$、$\texttt{KB}$、$\texttt{B}$ 为单位。优先用大的单位来表示，$1\texttt{GB}=1024\texttt{MB}$，$1\texttt{MB}=1024\texttt{KB}$，$1\texttt{KB}=1024\texttt{B}$，其中 `B` 表示 Byte。如果 $a$、$b$、$c$、$d$ 中的某几个数字为 $0$，那么不必输出这几个数字及其单位。题目保证一行中只有一句定义变量的语句，且每条语句都满足题干中描述的定义格式，所有的变量名都是合法的且均不重复。题目中的数据很规整，和上述给出的例子类似，除了类型后面有一个空格，以及定义数组时 `new` 后面的一个空格之外，不会出现多余的空
格。

## 说明/提示

**【样例说明】**

样例 1，占用的空间为 $131072 \times 8 = 1048576$ ，换算过后正好是 $1\texttt{MB}$，其它三个单位 $\texttt{GB}$、$\texttt{KB}$、$\texttt{B}$ 前面的数字都为 $0$，所以不用输出。

样例 2，占用的空间为 $4 \times 2 + 8 \times 2 + 10 + 8 \times 100000 \times 2$ B，换算后是 $1\texttt{MB}538\texttt{KB}546\texttt{B}$。

**【评测用例规模与约定】**

对于所有评测用例，$1 \leq T \leq 10$，每条变量定义语句的长度不会超过 $1000$。所有的变量名称长度不会超过 $10$，且都由小写字母和数字组成。对于整型变量，初始化的值均是在其表示范围内的十进制整数，初始化的值不会是变量。对于 String 类型的变量，初始化的内容长度不会超过 $50$，且内容仅包含小写字母和数字，初始化的值不会是变量。对于数组类型变量，数组的长度为一个整数，范围为：$[0, 2^{30}]$，数组的长度不会是变量。$T$ 条语句定义的变量所占的内存空间总大小大于 $0$ B 且小于 $1024$ GB。

蓝桥杯 2022 国赛 A 组 C 题（C 组 D 题）。

## 样例 #1

### 输入

```
1
long[] nums=new long[131072];```

### 输出

```
1MB```

## 样例 #2

### 输入

```
4
int a=0,b=0;
long x=0,y=0;
String s1="hello",s2="world";
long[] arr1=new long[100000],arr2=new long[100000];```

### 输出

```
1MB538KB546B```

# 题解

## 作者：Grow2011 (赞：15)

## 题意

给出 $n$ 条定义变量语句，问这些变量所占的空间。

## 题解

首先，因为输入可能含空格，所以我们要使用 `getline` 输入，不能用 `cin`！！！（我就被坑了）

其次，因为 `int`、`long long`、`string` 的首字母不同，所以我们可以根据首字母判断变量的类型。

知道了变量类型，我们就可以判断他是否为数组了，因为题目规定定义数组一定会在变量类型后面加上一对中括号，所以我们只需要判断变量类型后面有没有中括号就行了。

因为字符串只要统计长度就行了，所以就不讲了。至于变量和数组，也还是比较好处理的。

如果是变量的话，只要统计逗号的数量，计算时把数量加一再乘以所占内存就行了就行了。

如果是数组的话的话，就需要算出每个数组的元素个数，这件事其实也比较简单，可以把数字串提取出来，再用一个函数来把这个字符串转为整型变量，再乘上一个所占的内存就可以了。

## AC Code

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;
int nc(string s){//string转int
    int po=0;
    for(int i = 0;i<s.size();i++){
        po=po*10+(s[i]-'0');
    }
    return po;
}
signed main(){
    int n,cnt=0;//定义cnt来统计内存
    string s;
    cin >> n;
    n++;
    for(int i = 1;i<=n;i++){
        getline(cin,s);//可能含空格，使用getline
        if(s[0]=='i'){//计算int
        	  int c=0;//c表示这一个数组所占的内存
            int f=s.find('[');//判断数组
            if(f==-1){
                for(int i = 0;i<s.size();i++){
                    if(s[i]==',')c+=4;//统计逗号数量
                }
                cnt+=c+4;//加上内存大小
            }
            else{
                int r=0,l=s.find('[',r+1),p;//寻找第一个
                r=s.find(']',l+1);
                while(l!=-1){
                    string s2=s.substr(l+1,r-l-1);//提取子串
                    p=nc(s2);//转int
                    cnt+=p*4;//计算内存大小
                	  l=s.find('[',r+1);
                	  r=s.find(']',l+1);
                    //寻找下一个
                }
            }
        }
        else if(s[0]=='l'){//判断long long
            int f=s.find('[');
            if(f==-1){//判断数组
            	int c=0;//c表示这一个数组所占的内存
                for(int i = 0;i<s.size();i++){
                    if(s[i]==',')c+=8;//统计逗号数量
                }
                cnt+=c+8;//加上内存大小
            }
            else{
                int r=0,l=s.find('[',r+1),p;//寻找第一个
                r=s.find(']',l+1);
                while(l!=-1){
                    string s2=s.substr(l+1,r-l-1);//提取子串
                    p=nc(s2);//转int
                    cnt+=p*8;//计算内存大小
                	  l=s.find('[',r+1);
                	  r=s.find(']',l+1);
                    //寻找下一个
                }
            }
        }
        else{//判断string
            int r=0,l=s.find('"',r+1),p;
            r=s.find('"',l+1);
            while(l!=-1){
                string s2=s.substr(l+1,r-l-1);//提取子串
                cnt+=s2.size();//加上子串长度
            	  l=s.find('"',r+1);
            	  r=s.find('"',l+1);
                //寻找下一个
            }
        }
    }
    if(cnt>=1073741824){
        cout << cnt/(1073741824) << "GB";
        cnt%=(1073741824);
    }
    if(cnt>=1024*1024){
        cout << cnt/(1024*1024) << "MB";
        cnt%=(1024*1024);
    }
    if(cnt>=1024){
        cout << cnt/1024 << "KB";
        cnt%=1024;
    }
    if(cnt>0)cout << cnt << "B";
    //输出答案
    return 0;
}
```

最后，祝大家AC愉快！

---

## 作者：liruixiong0101 (赞：9)

首先很容易就可以发现这是一道大模拟~~然后就不做了~~。  
虽然这是一道大模拟，但是他十分的水，话不多说，进入正轨。  

------------

第一眼看上去有点懵，多看几遍就可以发现它给你一串代码，他会定义许多变量与数组每种变量都有一个内存， `int` 是 `4B` 的内存， `long` 是 `8B` 的内存，而 `string` 的内存是通过它的长度来决定的，一个字符 `1B` 内存。  
但是变量会有很多个，一个一个搜很麻烦，其实我们仔细读题可以发现，每个变量都会用一个等于号赋值所以我们只需要搜等于号即可。

数组就是看是否有中括号，若有就看这个数组的数据类型的占用的空间再乘上这个数组的大小就是这个数组的空间。而数组也有很多个但也没有关系，因为我们只有要搜中括号，若有很多个数组多搜几个中括号即可。

------------

说完了思路就可以写代码了，这里需要分情况讨论，但是看到各位大佬写的题解我觉得有一点点复杂了，其实可以大致分为三类： `int long` 变量， `int long` 数组，和 `string` 变量即可。  

代码如下：
```cpp
#include <bits/stdc++.h>
#define int long long//开个long long保险一点
using namespace std;
int t , ans , a[4];
string s , mp[4] = {"GB" , "MB" , "KB" , "B"};
//输入字符串和内存字符串
void solve1(){//整理数组内存
	int m , num;//m为一个变量的内存，num为数组的大小
	if(s[0] == 'i') m = 4;
	else m = 8;
	for(int i = 0; i < s.size(); i++){
		if(s[i] == '['){//找中括号里面的数
			num = 0;
			for(int j = i + 1; s[j] != ']'; j++)
				num = num * 10 + s[j] - '0';
			ans += num * m;
		}
	}
	return;
}
void solve2(){//整理变量内存
	int m;//m为一个变量的内存
	if(s[0] == 'i') m = 4;
	else m = 8;
	for(int i = 0; i < s.size(); i++)
		if(s[i] == '=') ans += m;//找等于号
	return;
}
void solve3(){//整理字符串内存
	for(int i = 0; i < s.size(); i++){
		if(s[i] == '"' && s[i - 1] == '='){
        //有可能出现引号，但是前面没有等于号，不算一个字符串的开始
			for(int j = i + 1; s[j] != '"'; j++)
				ans++;//字符串长度
		}
	}
	return;
}
signed main(){
	cin >> t;
	getchar();//输入t后再缓存区内会有换行符，所以要先getchar一下，否则会出问题
	while(t--){
		getline(cin , s);
		if(s[0] == 'i' || s[0] == 'l'){//若为int long类型的
			if((s[0] == 'i' && s[3] == ' ') || (s[0] == 'l' && s[4] == ' '))//若为变量
				solve2();
			else solve1();//若为数组
		}
		else solve3();//若为字符串
	}
	int cur = 4;
	while(ans){
		a[--cur] = ans % 1024;
		ans /= 1024;
	}//整理输出
	for(int i = 0; i < 4; i++){
		if(a[i]) cout << a[i] << mp[i];
	}//输出
	return 0;
}
```
一份大模拟代码就这么写好了。~~欢迎大家 hack 我。~~

---

## 作者：2011FYCCCTA (赞：8)

# [原题](https://www.luogu.com.cn/problem/P8791)
降绿喽~

---
### 题目
省流：给你 $T$ 行均为定义变量的 C++ 代码，求一共占了多少内存。

---
### 分析
又是本蒟蒻最喜欢的**大模拟**！

---

我们最需要的是变量的类型，这很容易，一行代码的第一个空格前的内容就是，直接输入即可。

之后我们需要知道一行代码定义了多少个变量。但一个一个搜索太麻烦，在我经过观察后，我发现：每个变量都要赋值，赋值就必定要 `=`，突破口就在 `=` 上，具体地来说是 `=` 的右边，只要求出等号右边的空间，再累加即可。

对于变量和数组，我们分别讨论：

- 变量：知道类型后直接累加
- 数组：知道大小和类型后相乘

这样就可以轻松 AC 啦！

虽然思路差不多，但我的代码感觉比其他人的简短些。

其实我的算法很简单，就是输入的同时进行计算，这样就可以在输入的同时忽略无用的信息，并且我用了 `getchar` 再优化一点时间，所以时间复杂度会少一些（31 ms）。

---
本题还有两个坑点，我来为大家避避坑：
1. **`String` 类型的 `S` 是大写！**
2. **本题卡 `int`！要用 `long long`！**

---
代码:
```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;
const string unit[5] = {"2011FYCCCTA" , "B" , "KB" , "MB" , "GB"};//存储单位名 
map<string , int> space; //存储类型所占用空间 
int t , sum , u[5]/*存储每个单位有多少*/;
string type;//存储类型 
signed main()
{
	cin >> t;
	space["int"] = 4;
	space["long"] = 8;
	while (t--)
	{
		cin >> type;
		char c;
		c = getchar();
		while (c != ';')
		{
			if (c == '=')//赋值 
			{
				//单个变量 
				if (type == "int" || type == "long") sum += space[type];
				else if (type == "String")
				{
					getchar(); c = getchar();
					int len = 0;
					while (c != '"') {len++; c = getchar();}
					sum += len;
				}
				//数组 
				else
				{
					//求出大小 
					while (c != '[') c = getchar();
					int size = 0;
					c = getchar();
					while (c != ']') {size = size * 10 + (c - '0'); c = getchar();}
					
					if (type == "int[]" || type == "long[]") sum += size * space[type.substr(0 , (type == "int[]" ? 3 : 4))];
					else if (type == "String") sum += size;
				}
			} 
			c = getchar();
		}	
	} 
	
	//转换单位 
	int idx = 1;
	while (sum)
	{
		u[idx++] = sum % 1024;
		sum /= 1024;
 	}
	for (int i = 4 ; i >= 1 ; i--)
		if (u[i] > 0) cout << u[i] << unit[i];
    return 0;
}
//Tips:代码中有彩蛋，你找到了么？ 
```
[AC 记录](https://www.luogu.com.cn/record/108351109)


---

## 作者：Withershine (赞：4)

### [题面](https://www.luogu.com.cn/problem/P8791)

# 一道比较简单模拟题，但是要分类讨论

## 一.读完题你应该知道的

   1.输入一共有 `T + 1` 行，输入**含有空格**。(处理1)

   2.对于每一行变量定义的语句，只会出现一种变量类型，`type` 只可能是 `int` 或 `long` ，只有一个分号。(处理1，处理2)

   3.统计内存过程中用 `B`  做单位，保证一定有输出，但在输出时要换算。(比如`1024`B就要换算成`1`KB)(处理3)

   4.即使用 `int` 或 `long` 定义的 `a = 0` 也会占用空间。(处理2)

------------

## 二.解法 ~~(不就是模拟吗)~~

### 处理1

通过题目和样例可以看出，接下来的T行，每次定义都会先声明本行的变量类型(**这一部分不含空格，且后面会紧接着一个空格**)，包括 `int`，`int[]`，`long`，`long[]` 和 `String` (注意这里的`S`是大写)。

因此 , 可以先定义一个 `string s` ，然后 `cin >> s` ，只记录下这一行所声明的变量，然后再分类讨论做处理。

------------

### 处理2

#### 处理2.0

完成处理1后，后面还有一长串需要输入，这时候对于 `int[]` ， `long[]`  和 `String`  就需要用 `getline` 来输入，从样例可以看出，不保证没有空格，所以用 `getline` 保险起见。(~~其实不用就会WA~~)

而对于 `int` 和 `long` 类型，题目保证没有多余的空格，用的人都知道，只需要 `cin >> s` 就够了。

#### 2.1对于 `int`  和 `long`  类型

对于这种类型，可以发现，它们定义时一定是形如`a=b`的形式，当有多个这样的形式存在时用逗号隔开，结尾以分号结束。只需要遍历一遍整个字符串，并统计其中 `"="` 出现的次数即可，由于这里只是定义了一个变量，总值只需要加上 `4B` (`int` 类型) 或 `8B`  ( `long`  类型) 就行了。

#### 2.2对于 `int[]` 和 `long[]` 类型

遍历声明了 `int[]` 类型或 `long[]` 类型的这一行时，定义一个标记变量$l$，来标记所遇到的 `[` 的下一个位置，也就是 `[` 右边的第一个数字，当遇到 `]` 时，说明这一个数组定义已经完成，再从 `l`  开始到 `i - 1` 的位置进行遍历，将数组大小$k$取出来，最后总值加上 `k * 4` ( `int`  类型) 或 `k * 8` ( `long`  类型) 即可。

#### 2.3对于 `String` 类型

跟上面的差不多，但是英文输入中的双引号长得是一样的，在遍历声明了 `String`  类型的这一行时，先定义标记变量 `flag`  来标记在第 `j` 个位置第 `i` (此时 `i` 为奇数) 次遇到的 `"` 的**后一个**位置，也就是第 `j + 1` 个位置，在第 `i + 1` 次遇到 `"` 时，用当前的位置  `j`  ，即 `j` 减去 `flag` ，也就是 `j - flag` ，得出的结果  `k`  就是这一段字符串的长度。字符串中每个字符只占用 `1B` ，最后总值加上 `k`  即可。

#### 对于整个处理2，其实可以用函数模块化解决，代码量会大大缩减。

------------

### 处理3

考虑题目内存所占空间是( `0B` ，`1024GB` )，即( `0B` ，`1,099,511,627,776B`  )，用 `int`  来存一定会炸，所以这里用 `long long` 定义 `4` 个变量 `GB` ，`MB` ，`KB` ，`B`  进行储存。并且在每一行的操作结束后，都对这 `4`  个变量进行及时的维护。(~~其实好像没有必要，在最后维护一次就够了~~)

------------
最后贴上我码风奇特的代码：

```cpp
#include<bits/stdc++.h>
#define ll long long
#define maxx 1000100
#define fr(i , a , b) for(ll i = a ; i <= b ; ++i)
#define fo(i , a , b) for(ll i = a ; i >= b ; --i)
using namespace std;
inline ll read()
{
	ll k = 0 , f = 0;
	char c = getchar();
	for( ; !isdigit(c) ; c = getchar())
	{
		f |= c == '-';
	}
	for( ; isdigit(c) ; c = getchar())
	{
		k = (k << 1) + (k << 3) + (c ^ 48);
	}
	return f ? -k : k;
}
ll T , GB , MB , KB , B;
string s;
signed main()
{
	T = read();
	while(T--)
	{
		cin >> s;
		if(s == "int")
		{	
//			getline(cin , s);
			cin >> s;
			ll kkk = 0;
			fr(i , 0 , s.size() - 1)
			{
				if(s[i] == '=')
				{
					kkk++;
				}
			}
			B += kkk * 4;
			KB += B / 1024;
			B %= 1024;
			MB += KB / 1024;
			KB %= 1024;
			GB += MB / 1024;
			MB %= 1024;
		}
		else if(s == "int[]")
		{
			getline(cin , s);
			ll l;
			fr(i , 0 , s.size() - 1)
			{
				if(s[i] == '[')
				{
					l = i + 1;
				}
				else if(s[i] == ']')
				{
					ll kkk = 0;
					fr(j , l , i - 1)
					{
						kkk = kkk * 10 + (s[j] - '0');
					}
					B += kkk * 4;
				}
			}
			KB += B / 1024;
			B %= 1024;
			MB += KB / 1024;
			KB %= 1024;
			GB += MB / 1024;
			MB %= 1024;
		}
		else if(s == "long")
		{
//			getline(cin , s);
			cin >> s;
			ll kkk = 0;
			fr(i , 0 , s.size() - 1)
			{
				if(s[i] == '=')
				{
					kkk++;
				}
			}
			B += kkk * 8;
			KB += B / 1024;
			B %= 1024;
			MB += KB / 1024;
			KB %= 1024;
			GB += MB / 1024;
			MB %= 1024;
		}
		else if(s == "long[]")
		{
			getline(cin , s);
			ll l;
			fr(i , 0 , s.size() - 1)
			{
				if(s[i] == '[')
				{
					l = i + 1;
				}
				else if(s[i] == ']')
				{
					ll kkk = 0;
					fr(j , l , i - 1)
					{
						kkk = kkk * 10 + (s[j] - '0');
					}
					B += kkk * 8;
				}
			}
			KB += B / 1024;
			B %= 1024;
			MB += KB / 1024;
			KB %= 1024;
			GB += MB / 1024;
			MB %= 1024;
		}
		else
		{
			ll flag = -1;
			cin >> s;
			fr(i , 0 , s.size() - 1)
			{
				if(s[i] == '"' && flag == -1)
				{
					flag = i + 1;
					continue;
				}
				if(s[i] == '"' && flag != -1)
				{
					B += i - flag;
					flag = -1;
				} 
			}
			KB += B / 1024;
			B %= 1024;
			MB += KB / 1024;
			KB %= 1024;
			GB += MB / 1024;
			MB %= 1024;
		}
	}
	if(GB != 0)
	{
		printf("%lldGB" , GB);
	}
	if(MB != 0)
	{
		printf("%lldMB" , MB);
	}
	if(KB != 0)
	{
		printf("%lldKB" , KB);
	}
	if(B != 0)
	{
		printf("%lldB" , B);
	}
	return 0;
}
```


---

## 作者：metrixgo_caozhendi (赞：1)

一道比较水的模拟题，就是让你在给定的各种类型下输出内存占用的容量。实现方法如下：

首先注意到每一行有空格，所以要用 ```getline``` 记录。每输入一行就模拟一下内存，下次输入时就直接覆盖。

然后我们发现有几种变量类型：```int```，```long```，```String```，```int[]``` 和 ```long[]```。每一行输入时先判断是哪种类型，然后进行相应的运算。

计算内存的方法也很简单。对于 ```int``` 和 ```long```，它们的每一次赋值就有一个 ```=```，所以只需要找有多少个 ```=``` 再乘以对应的内存就行。对于```String```，由于每一次赋值前会有一个 ```"```，所以只需要找 ```"```，然后将两个 ```"``` 之间的元素个数加上即可。最后对于 ```int[]``` 和 ```long[]```，每一次赋值前都有 ```[```，所以从 ```[``` 开始，直到 ```]``` 结束，将里面的字符串转化为整数类型，再乘以对应内存即可。

最后，要从最小的单位开始，逢 $1024$ 进 $1$，整理数据，并输出。

几个坑点：

```String``` 的开头是大写的 ```S```。

数据很大，所以对于所有记录相加的数都要开 ```long long```（就算你对于每一次输入都处理进位都不行，不然你会看着全屏的 WA 而疑惑）。

如果最后某个内存单位是 $0$，就不能输出。

差不多就这些了，代码如下：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long i,j,k,n,gb,mb,kb,b,ans,type;
char s[1005];
void add(int type)
{ int i;
	if(type==1||type==2)//处理int/long 
	{
		for(i=0;i<strlen(s);i++)
		{
			if(s[i]=='='){
				b+=4*type;
			}
	    }
		return ; 
	}
	
	if(type==4||type==5)//处理int[]/long[] 
	{
		type-=3;
		long long num=0;
		for(i=0;i<strlen(s);i++)
		{
			if(s[i]=='['){
				i++;
				num=0;
				while(s[i]!=']')//逐个搜索
				{
				    num=num*10+s[i]-'0';//加上数组内的数字 
					i++;
				 }
				b+=num*type*4;
			}
	    }
		return ; 
		
	}
	
	else//处理string
	{ int siz=0;
		for(i=0;i<strlen(s);i++)
		{
			if(s[i]=='"')
			{
				i++;
				siz=0;
				while(s[i]!='"')
				{
					siz++;
					i++;
				}
				b+=siz;
				i++;
			}
		}
		return ;
	 } 
	
	return ;
 } 
 void tidy()//将内存整理进位
 {
 		kb+=b/1024;
		b%=1024;
		mb+=kb/1024;
		kb%=1024;  
		gb+=mb/1024;
		mb%=1024;
 return ;	
  } 
 void print()
 {
 	if(gb) cout<<gb<<"GB";
 	if(mb) cout<<mb<<"MB";
 	if(kb) cout<<kb<<"KB";
 	if(b) cout<<b<<"B";
 	return ;
 }
 
int main()
{
    cin>>n;
    getchar();
    while(n--)
    {
       cin.getline(s,1001);
       if(s[0]=='i'&&s[3]!='[') type=1; //type为1，int。为2，long。为3，string。为4，int[]。为5，long[]。 
       else if(s[0]=='l'&&s[4]!='[') type=2;
       else if(s[0]=='S') type=3;
       else if(s[0]=='i'&&s[3]=='[') type=4;
       else type=5;
	   add(type);//进行内存计算并加入内存
	   tidy();//整理内存，逢1024进1。 
    }
    print();//输出 
    return 0;
}
```

---

## 作者：zymooll (赞：1)

### 思路

依照题面模拟即可

对于 ```int``` 和 ```long```，只需要查询字符串中 ```,``` 的个数加一
，最后乘上其所占的内存空间。

对于 ```string```，查询两个 ```"``` 之间的距离。

对于 ```int[]``` 和 ```long[]```，查询 ```[``` 和之后与其最近的 ```]``` 之中的数，乘上其所占的内存空间。

最后对于输出，进行简单的 $10$ 进制转 $1024$ 进制即可。

具体实现参照代码。

### 代码

```cpp
// Problem: P8791 [蓝桥杯 2022 国 AC] 内存空间
// Contest: Luogu
// URL: https://www.luogu.com.cn/problem/P8791
// Memory Limit: 128 MB
// Time Limit: 1000 ms
// 
// Powered by CP Editor (https://cpeditor.org)

// Author:zymooll

#include<bits/stdc++.h>
#define getchar getchar_unlocked
#define putchar putchar_unlocked
#define int long long
using namespace std;
int read(){
	int s=0,w=1;
	char c=getchar();
	while(c<'0'||c>'9'){
		if(c=='-')w=-1;
		c=getchar();
	}
	while(c>='0'&&c<='9'){
		s=s*10+c-'0';
		c=getchar();
	}
	return s*w;
}
void print(int x){
	if(x<0){
		putchar('-');
		x=-x;
	}
	if(x>=10)print(x/10);
	putchar(x%10+'0');
	return;
}
int n,ans;
string s;
signed main(){
	//freopen(".in","r",stdin);
	//freopen(".out","w",stdout);
	n=read();
	while(n--){
		getline(cin,s);
		if(s.substr(0,3)=="int"){
			if(s.substr(3,2)=="[]"){
				int st=0;
				for(int i=7;i<s.size();i++){
					if(s[i]=='['){
						st=i;
					}
					if(s[i]==']'){
						string s1=s.substr(st+1,i-st-1);
						ans+=atol(s1.c_str())*4;
						// cerr<<atol(s1.c_str())*4<<" "<<s1<<endl;
					}
				}
			}
			else{
				ans+=4;
				// cerr<<4<<endl;
				for(int i=4;i<s.size();i++){
					if(s[i]==',')ans+=4;
					// cerr<<4<<endl;
				}
			}
		}
		else if(s.substr(0,4)=="long"){
			if(s.substr(4,2)=="[]"){
				int st=0;
				for(int i=7;i<s.size();i++){
					if(s[i]=='['){
						st=i;
					}
					if(s[i]==']'){
						string s1=s.substr(st+1,i-st-1);
						ans+=atol(s1.c_str())*8;
						// cerr<<atol(s1.c_str())*8<<" "<<s1<<endl;
					}
				}
			}
			else{
				ans+=8;
				// cerr<<8<<endl;
				for(int i=5;i<s.size();i++){
					if(s[i]==',')ans+=8;
					// cerr<<8<<endl;
				}
			}
		}
		else{
			int st=0,f=0;
			for(int i=7;i<s.size();i++){
				if(s[i]=='"'){
					if(f){
						ans+=i-st-1;
						// cerr<<i-st-1<<endl;
						f=0;
					}
					else{
						st=i;
						f=1;
					}
				}
			}
		}
	}
	if(ans>=(1024*1024*1024)){
		print(ans/(1024*1024*1024));
		cout<<"GB";
		ans%=(1024*1024*1024);
	}
	if(ans>=(1024*1024)){
		print(ans/(1024*1024));
		cout<<"MB";
		ans%=(1024*1024);
	}
	if(ans>=(1024)){
		print(ans/(1024));
		cout<<"KB";
		ans%=(1024);
	}
	if(ans){
		print(ans);
		cout<<"B";
	}
	return 0;
}

```

---

## 作者：RP_INT_MAX (赞：1)

一道不是特别难的模拟题，~~但也花了我 1h+ 用来调试。~~

在阅读本篇题解之前，请确保你已经熟知题目大意。

## $\tt Solution$

### 题意分析

显然此题的核心就是两类定义变量的语句。列出来寻找可用性质。

```
1. type var1=value1,var2=value2...;
2. type[] arr1=new type[size1],arr2=new type[size2]...;
```

可以发现如下两条性质：

1. 数组的定义一定包含 `[` 字符，字符串的定义一定包含 `"` 字符。若一行代码以上两种字符均不包含，一定是 `int` 或 `long` 的单变量定义。

2. 每一行定义语句，一定包含至少一个 `=` 字符。

### 程序设计

利用性质 1，我们定义 `get_type` 函数，若本行代码定义的是数组类型，返回 $1$；若是字符串类型，返回 $2$；其余情况（即定义单个变量）返回 $3$。

利用性质 2，在处理每一行代码的时候寻找 `=` 字符，求占用空间大小的问题即可迎刃而解。下面定义 $3$ 个函数分别解决数组、字符串、单变量的计算。

- `var_arr` 函数：一旦遇到 `[` 字符，截取它和最近的 `]` 字符之间的数字，乘以相应的占用字节数（`int` 为 $4$，`long` 为 $8$），累计答案。

- `var_int` 函数：一旦遇到 `=` 字符，计数器 $+1$，乘以相应的占用字节数，累计答案。

- `var_str` 函数：一旦遇到 `"` 字符并且前一个字符为 `=`（注意这里），截取它和最近的后一个 `"` 之间的字符串，统计长度，累计答案。

### 注意事项

- 第一行输入 $T$ 之后会有换行符，要多加一个 `getline` 抵消掉。

- 不开 `long long` 见祖宗。

- 最后输出注意单位的优先级。

- 对于此类模拟题，建议变量名“见名知意”，便于调试，不要忌讳太长的变量名。

## $\tt Code$

```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;
int t,ans,a[4];
string code,size_type[4]={"GB","MB","KB","B"};
int get_type(string s) {
	for(int i=0;i<s.length();++i)
		if(s[i]=='[') return 1;
		else if(s[i]=='"') return 2;
	return 3;
}
int var_arr(string s) {
	int ret=0;
	for(int i=0;i<s.length();++i)
		if(s[i]=='[') {
			int cnt=0;
			for(int j=i+1;s[j]!=']';++j)
				cnt=cnt*10+s[j]-'0';
			ret+=cnt;
		}
	if(s[0]=='i') return ret*4;
	else return ret*8;
}
int var_int(string s) {
	int ret=0;
	for(int i=0;i<s.length();++i)
		if(s[i]=='=') ++ret;
	if(s[0]=='i') return ret*4;
	else return ret*8;
}
int var_str(string s) {
	int ret=0;
	for(int i=0;i<s.length();++i)
		if(s[i]=='"'&&s[i-1]=='=')
			for(int j=i+1;s[j]!='"';++j) ++ret;
	return ret;
}
signed main () {
	cin>>t,getline(cin,code);
	while(t--) {
		getline(cin,code);
		int op=get_type(code);
		if(op==1) ans+=var_arr(code);
		if(op==2) ans+=var_str(code);
		if(op==3) ans+=var_int(code);
	}
	int len=4;
	while(ans) a[--len]=ans%1024,ans/=1024;
	for(int i=0;i<4;++i)
		if(a[i]) cout<<a[i]<<size_type[i];
	return 0;
}
```

---

## 作者：DreamLand_zcb (赞：1)

## 简要题意

有 $T$ 条定义语句，每条语句有四种类型（`int`，`long`，`String`，`int[]`，`long[]`），求出他们的内存和。

## 思路

先输入类型，分四种类型分别讨论。

* 1.`int` 类型：因为每个变量之间由 `,` 连接，所以变量个数就是 `,` 个数加一，然后再乘四得到总内存。

* 2.`long` 类型：思路同 `int` 类型，把乘四变成乘八即可。

* 3.`String` 类型：当找到第一个 `"` 的时候启动计数器，直到检测到第二个 `"`，将所有计数器的和加起来就是它的大小。**友情提示：`String` 的首字母 `S` 是大写的！**

* 4.`int[]` 类型：统计 `[]` 之间的数字大小，最后乘四

* 5.`long[]` 类型：思路同 `int[]` 类型，把乘四变成乘八即可。

## 代码

```cpp
#include <bits/stdc++.h>
#define ll long long
#define setp setprecision
#define mem(a, m) memset(a, m, sizeof(a));
using namespace std;

int T;
ll B=0, KB=0, MB=0, GB=0;
ll type_int()//int类型
{
	ll ret=1;
	string s;
	getline(cin, s);
	int l=s.size();
	for(int i=0;i<l;i++)
		if(s[i] == ',')
			ret++;
	return ret*4;
}
ll type_long()//long类型
{
	ll ret=1;
	string s;
	getline(cin, s);
	int l=s.size();
	for(int i=0;i<l;i++)
		if(s[i] == ',')
			ret++;
	return ret*8;
}
ll type_String()//String类型
{
	ll ret=0;
	string s;
	getline(cin, s);
	int l=s.size();
	for(int i=0;i<l;i++)
		if(s[i] == '"')
			while(s[++i] != '"')
				ret++;
	return ret;
}
ll type_arr_int()//int[]类型
{
	ll ret=0;
	string s;
	getline(cin, s);
	int l=s.size();
	for(int i=0;i<l;i++)
	{
		if(s[i] == '[')
		{
			ll size=0;
			while(s[++i] != ']')
				size=size*10+(s[i]-'0');
			ret+=size;
		}
	}
	return ret*4;
}
ll type_arr_long()//long[]类型
{
	ll ret=0;
	string s;
	getline(cin, s);
	int l=s.size();
	for(int i=0;i<l;i++)
	{
		if(s[i] == '[')
		{
			ll size=0;
			while(s[++i] != ']')
				size=size*10+(s[i]-'0');
			ret+=size;
		}
	}
	return ret*8;
}
int main()
{
	ios::sync_with_stdio(false);
	cin >> T;
	while(T--)
	{
		string type;
		cin >> type;//输入类型
		if(type == "int")	B+=type_int();
		if(type == "long")	B+=type_long();
		if(type == "String")	B+=type_String();
		if(type == "int[]")	B+=type_arr_int();
		if(type == "long[]")	B+=type_arr_long();
	}
	KB=B/1024, B%=1024;
	MB=KB/1024, KB%=1024;
	GB=MB/1024, MB%=1024;
	if(GB != 0)	cout << GB << "GB";
	if(MB != 0)	cout << MB << "MB";
	if(KB != 0)	cout << KB << "KB";
	if(B != 0)	cout << B << "B";
	return 0;
}

```

### ps：建议降黄，无论思路还是码量都没有达到蓝题的级别

---

## 作者：I_will_AKIOI (赞：0)

又是一道大模拟呢。

观看样例解释我们发现：只有 ```int```、```long```、```int[]```、```long[]```、```String``` $5$ 种类型，一行只会定义一种。之间有空格。根据 cin 的特性，所以我们可以先读入一个字符串，判断该行代码属于哪种类型即可。

然后就需要计算内存。由于数据类型的特性，我们要分 $3$ 种情况讨论。```int``` 和 ```long``` 都是直接赋值，只有一个等号，所以只要看看有几个等号，就定义了多少个变量。

```cpp
cin>>s;
if(s=="int")
{
  getline(cin,s);
  for(int i=0;i<s.size();i++) if(s[i]=='=') ans+=4;//一个等号对应一个变量
}
if(s=="long")
{
  getline(cin,s);
  for(int i=0;i<s.size();i++) if(s[i]=='=') ans+=8;
}
```
数组类型的大小取决于中括号中的数字。所以找到左括号，按照快读的方式即可完成。

```cpp
if(s=="int[]")
{
  getline(cin,s);//数组中有空格，要一行一行读
  for(int i=0;i<s.size();i++) 
  {
    if(s[i]=='[') 
    {
      i++;//从数字开始读入
      for(;s[i]!=']';i++) l=l*10+s[i]-48;
      ans+=l*4;
      l=0;
    }
  }
}
if(s=="long[]")
{
  getline(cin,s);
  for(int i=0;i<s.size();i++) 
  {
    if(s[i]=='[') 
    {
      i++;
      for(;s[i]!=']';i++) l=l*10+s[i]-48;
      ans+=l*8;
      l=0;
    }
  }
}                      
```
```String``` 更简单，找到双引号，看看中间有几个字符。
```cpp
if(s=="String")
{
  getline(cin,s);
  for(int i=0;i<s.size();i++) 
  {
    if(s[i]=='"') 
    {
      i++;
      for(;s[i]!='"';i++) ans++;
    }
  }
}
```
我们得到了代码的总内存，接下来转为 $1024$ 进制。将总内存依次除以需要的 byte 数，就能得出结果。
```cpp
string a[5]={"GB","MB","KB","B"};
for(int i=30;i>=0;i-=10)
{
  if(ans/(1<<i)==0) continue;//1<<30为GB要的byte数，以此类推
  cout<<ans/(1<<i)<<a[3-i/10];
  ans%=(1<<i);
}
```
然后就轻松切了道绿题~

---

## 作者：PeterBei (赞：0)

这两天不怎么在状态，强制自己刷一道模拟。

题比较水，实际难度应该在黄到绿之间。

-----

对于 ``int`` 或者 ``long`` 变量，只需要扫描字符串内逗号的个数，加一便是对应变量的个数。

对于数组，需要扫描左右中括号，并将内部的字符串转化成数字。

对于字符串变量，需要扫描左右引号的位置，相减得到字符串长度。

程序内部变量需要声明 ``long long`` 类型，否则运算过程中会爆 ``int``
。

代码：

```
#include<iostream>
#include<cstring>
#include<string>
#include<cstdio>
using namespace std;
char str[1010], z[1010]; long long t = 0;
void print(long long ans)
{
	long long gb = 0, mb = 0, kb = 0, b = 0;
	if(ans >= 1073741824)
		gb = ans / 1073741824, ans -= gb * 1073741824;
	if(ans >= 1048576)
		mb = ans / 1048576, ans -= mb * 1048576;
	if(ans >= 1024)
		kb = ans / 1024, ans -= kb * 1024;
	b = ans;
	if(gb != 0) cout << gb << "GB";
	if(mb != 0) cout << mb << "MB";
	if(kb != 0) cout << kb << "KB";
	if(b != 0)  cout << b  << "B";
	return ;
}
int main(){
	long long T = 0; cin >> T;
	long long nn = T;
	long long ans = 0;
	while(T--){
		t = 0;
		while(1){
			scanf("%s", z + 1); long long len = strlen(z + 1);
			for(long long i = 1; i <= len; i++)
				str[++t] = z[i];
			if(z[len] == ';')
				break;
		}
		long long typ = 0;//1:int, 2:long, 3:string, 4:int[], 5:long[]
		if(str[1] == 'i'){
			if(str[4] == '[')
				typ = 4;
			else
				typ = 1;
		}
		else if(str[1] == 'l'){
			if(str[5] == '[')
				typ = 5;
			else
				typ = 2;
		}
		else typ = 3;
		if(typ == 1 || typ == 2){
			long long sum = 0;//逗号个数 
			for(long long i = 1; str[i] != ';'; i++){
				if(str[i] == ','){
					sum++;
				}
			}
			ans += (sum + 1) * 4 * typ;
		}
		else if(typ == 3){
			for(long long i = 1; str[i] != ';'; i++){
				if(str[i] == '"' && str[i - 1] == '='){
					for(long long j = i + 1; str[j] != '"'; j++)
						ans++;
				}
			}
		}
		else{
			for(long long i = 1; str[i] != ';'; i++){
				if(str[i] == '['){
					i++; long long sum = 0;
					for(; str[i] != ']'; i++){
						sum = sum * 10 + (str[i] - '0');
					}
					ans += sum * 4 * (typ - 3);
				}
			}
		}
	}
	print(ans);
	return 0;
}
```

---

## 作者：wuhan1234 (赞：0)

## 1. 编程思路。
简单的模拟题目。

读取变量定义语句后，首先取得最开始的几个字符，得到变量定义的类型。得到变量定义的类型后，分三种情况进行处理。

1）类型为 string 的字符串，统计两个双引号之间的字符个数即可。

2）类型定义子字符串后面紧跟的字符是“ [ ”，此时表示是一维数组的定义，统计其后两个中括号之间的数字并进行累加计算即可。

3）类型为 int 或 long，统计定义语句中逗号和分号的个数，乘以相应的 $4$ 或 $8$，累加到答案上即可。

## 2. 源程序。
```c
#include <stdio.h>
#include <string.h>
int main()
{
	int n;
	scanf("%d", &n);
	getchar();
	long long ans = 0;
	char str[1005];
	while (n--)
	{
		fgets(str,1005,stdin);
		int len=strlen(str);
		char  tp[10];
		int i,j;
		for (i=0;str[i]!=' ' && str[i]!='[';i++)  // 先确定定义的类型
            tp[i]=str[i];
        tp[i]='\0';
        if (strcmp(tp,"String")==0)    // 处理字符串定义的情况
        {
            int flag = 0;
		    for (j = i; j < len; j++)
			{
				if (!flag)
				{
					if (str[j] == '\"')
						flag = 1;
					continue;
				}
				if (str[j] == '\"')
				{
					flag = 0;
					continue;
				}
				ans++;
			}
			continue;
        }
		if (str[i] == '[')             // 处理数组定义的情况
		{
			int flag = 0;
			long long res;
			for (j = i + 2; j < len; j++)
			{
				if (!flag)
				{
					if (str[j] == '[')
					{
					    flag = 1, res = 0;
					}
					continue;
				}
				if (str[j] == ']')
				{
					flag = 0;
					ans += res * (strcmp(tp,"int")==0 ? 4 : 8);
					continue;
				}
				res = res * 10 + str[j] - '0';
			}
			continue;
		}
		for (j = i; j < len; j++)
		{
			if (str[j] == ',' || str[j] == ';')
				ans += (strcmp(tp,"int")==0 ? 4 : 8);
		}
	}
	long long B = ans % 1024;
	long long KB = ans / 1024 % 1024;
	long long MB = ans / 1024 / 1024 % 1024;
	long long GB = ans / 1024 / 1024 / 1024 % 1024;
	if (GB) printf("%lldGB", GB);
	if (MB) printf("%lldMB", MB);
	if (KB)	printf("%lldKB", KB);
	if (B)	printf("%lldB\n", B);
	return 0;
}

```


---

## 作者：hanyuchen2019 (赞：0)

## part 0

非常神秘的模拟题。

关于这种题的做法：先理清思路，保证写的时候不要堆冗杂、重复代码，同时对于相似部分尽可能合并（如本题中 `int` 和 `long` 的处理），以减轻调试难度。

## part 1

不难看出，本题的各个字符串可能有如下几种情况：

1. `String` 类型；
2. `int` 或 `long` 的单个变量定义；
3. `int` 或 `long` 定义数组。

下面对于这几种情况分别处理：

### part 1.1 `String`

计算每两个 `"` 之间的字符数量即可。

```cpp
if(s[0]=='S')
{
	int p=0,tot=0;
	while(p<n)
	{
		while(p<n&&s[p]!='"')++p;
		++p;//防止找下一个"时重复

		while(p<n&&s[p]!='"')++tot,++p;
		++p;
	}
	ans+=1ll*tot;
}
```
### part 1.2 `int` 或 `long` 定义数组

由于 `int` 和 `long` 区别不大，可以直接合并，用 $t$ 表示单个字符占用内存数。当为 `int` 时，$t=4$；当为 `long` 时，$t=8$。

```cpp
if(s[0]=='i')t=4;
else t=8;
...
ans+=1ll*tot*t;
```

对于 `[` 和 `]` 之间的数，用类似快读的方式求出其值。

```cpp
if(s[3]=='['||s[4]=='[')
{
	p=5;//防止搜到第一对[]
	while(p<n)
	{
		while(p<n&&s[p]!='[')++p;
		++p;
		int d=0;//注:isdigit(ch)返回bool类型，表示该字符是否为数字
		while(p<n&&isdigit(s[p]))d=d*10+s[p]-'0',++p;
		tot+=d;
	}
}
```

### part 1.3 `int` 或 `long` 的单个变量定义



对于单个变量我们可以发现一个性质：每定义一个数恰好有一个 `=`。

于是直接找一遍等号就做完了。

```cpp
else
{
	while(p<n)
	{
		if(s[p]=='=')++tot;
		++p;
	}
}
```

### part 2 输出

没啥好说的。记得开 `long long`。

```cpp
if(ans/1073741824)printf("%dGB",ans/1073741824),ans%=1073741824;
if(ans/1048576)printf("%dMB",ans/1048576),ans%=1048576;
if(ans/1024)printf("%dKB",ans/1024),ans%=1024;
if(ans)printf("%dB",ans);
```

---

## 作者：az__eg (赞：0)

考试出了这道题的 plus 版。

发现不同的类型的开头不一样，同时是否是数组所包含的字符也不一样，定义的是数组的话包含 $"[]"$ 这两个字符，同时判断开头的第一个字符即可知道这个的类型。

这样判断就很快了。（这么水的题我没有场切）

代码：

```cpp
#include<iostream>
#include<string>
#include<cstdio>
#define int long long
using namespace std;
int T;
string s[11];
string x;
int ans;
const int B = 1;
const int KB = 1024;
const int MB = KB*KB;
const int GB = KB*MB;
const int TB = MB*MB;
const int PB = TB*KB;//TB和PB是我们出题人整的加强版
bool check(string a)//判断是否是数组
{
	int i,j,l;
	l = a.length();
	for(i=0;i<l;i++)
	{
		if(a[i]=='[')
		{
			return false;
		}
	}
	return true;
}
int typ1(string a)//判断什么类型
{
	if(a[0] == 'i')
	{
		return 4;
	}
	else if(a[0]=='l')
	{
		return 8;
	}
	else
	{
		return -1;
	}
}
int gt1(string a)//求string的占用空间
{
	int i,j,l;
	int rt = 0;
	l = a.length();
	bool flag = false;
	for(i=0;i<l;i++)
	{
		if(a[i]=='"')
		{
			flag = !flag;
		}
		else if(flag)
		{
			rt++;
		}
	}
	return rt;
}
int gt2(string a)//因为定义的不是数组，所以直接判断有几个等号就知道大小了
{
	int i,j,l;
	int rt = 0;
	l = a.length();
	bool flag = false;
	for(i=0;i<l;i++)
	{
		if(a[i]=='=')
		{
			rt++;
		}
	}
	return rt;
}
int typ2(string a)//我们出题人加了个deque，可以忽视
{
	int rt = 1,i,j;
	if(a[0]=='i')
	{
		return 4;
	}
	else if(a[0]=='l')
	{
		return 8;
	}
	else if(a[0]=='d')//可以忽视
	{
		i = 0;
		while(a[i]!='[')
		{
			if(a[i]=='d'&&a[i+1]=='e'&&a[i+2]=='q'&&a[i+3]=='u'&&a[i+4]=='e')
			{
				rt *= 8;
			}
			else if(a[i]=='i'&&a[i+1]=='n'&&a[i+2]=='t')
			{
				rt *= 4;
				break;
			}
			else if(a[i]=='l'&&a[i+1]=='o'&&a[i+2]=='n'&&a[i+3]=='g')
			{
				rt *= 8;
				break;
			}
			i++;
		}
		return rt;
	}
}
int gt3(string a)//因为开的都是一个类型，直接求中括号内的数字和就行了，注意不要把变量名的数字也求进去
{ 
	int i,j,l = a.length();
	bool flag = false;
	int dq = 0;
	int rt = 0;
	for(i=0;i<l;i++)
	{
		if(flag)
		{
			if(a[i]>='0'&&a[i]<='9')
			{
				dq = dq*10+a[i]-'0';
			}
		}
		if(a[i]=='[')
		{
			flag = true;
		}
		else if(a[i]==']')
		{
			flag = false;
			rt += dq;
			dq = 0;
		}
	}
	return rt;
}
signed main()
{
	int i,j;
	cin>>T;
	getline(cin,x);
	for(i=1;i<=T;i++)
	{
		getline(cin,s[i]);
	}
	for(i=1;i<=T;i++)
	{
		if(check(s[i]))
		{
			int typ = typ1(s[i]);
			if(typ==-1)
			{
				ans += gt1(s[i]);
			}
			else
			{
				ans += typ*gt2(s[i]);
			}
		}
		else
		{
			int typ = typ2(s[i]);
			ans += typ*gt3(s[i]);
		}
	}
   //输出
	if(ans/PB!=0)
	{
		printf("%lldPB",ans/PB);
		ans -= ans/PB*PB;
	}
	if(ans/TB!=0)
	{
		printf("%lldTB",ans/TB);
		ans -= ans/TB*TB;
	}
	if(ans/GB!=0)
	{
		printf("%lldGB",ans/GB);
		ans -= ans/GB*GB;
	}
	if(ans/MB!=0)
	{
		printf("%lldMB",ans/MB);
		ans -= ans/MB*MB;
	}
	if(ans/KB!=0)
	{
		printf("%lldKB",ans/KB);
		ans -= ans/KB*KB;
	}
	if(ans/B!=0)
	{
		printf("%lldB",ans/B);
		ans -= ans/B*B;
	}
}
```


---

## 作者：xiaoPanda (赞：0)

## Solution
简单模拟题，我写的时候还是蓝题~~（不知道现在是什么颜色的了）~~。

首先我们现在将问题分成 $2$ 部分来解决。

### Part 1 处理读入的信息
为了方便，我们再把这个部分分成 $3$ 类。

+ 处理 `int` 和 `long` 类型单个数的空间大小

容易发现，若有 $s$ 个字符 `,` 就有 $s+1$ 个 `int` 和 `long` 类型的数，直接扫一遍即可，若为 `int` 则将答案 $\times4$，若为 `long` 则将答案 $\times 8$。

+ 处理 `String` 类型空间大小

观察到在两个字符 `"` 之间的长度就是这个变量的空间大小，那么先扫到第一个再继续往后扫到第二个，答案加上两个之间的距离即可。

+ 处理 `int` 和 `long` 类型单个数的空间大小

与上一类相似，在两个字符 `[]` 之间的**数字**（不是长度）$\times 4$ 或 $\times 8$ 就是这个变量的空间大小，也就是说我们还要记区间内的数字，这也很简单，就不详细讲了。
### Part 2 处理输出的信息
记答案为 $ans$，我们可以求出 $t1,t2,t3,t4$ 使得 $ans=t1\times 1024^3+t2\times1024^2+t3\times 1024+t4$，然后再输出即可，注意到若某一位为 $0$ 则不要输出。
## Code
```cpp
#include<bits/stdc++.h>
using namespace std;
using db=double;
using ll=long long;
using vi=vector<int>;
using pii=pair<int,int>;
using ull=unsigned long long;
#define ft first
#define sd second
#define gc getchar
#define pb push_back
#define emp emplace_back
#define mp make_pair
#define sz(a) (int)a.size()
#define FOR(i,a,b) for(int i=a;i<=b;i++)
#define ROF(i,a,b) for(int i=a;i>=b;i--)
#define lowbit(x) ((x)&(-x))
#define int long long
const int N=1e6+7;
const int mod=1e9+7;
const int INF=(1ll<<60);
const int inf=1e9;
const int K=5e5+1;
void read(int &x)
{
    char ch=getchar();
    int r=0,w=1;
    while(!isdigit(ch))w=ch=='-'?-1:1,ch=getchar();
    while(isdigit(ch))r=(r<<3)+(r<<1)+(ch^48),ch=getchar();
    x=r*w;
}
void write(int x) {
    char ch[20];
    int len = 0;
    if (x < 0)putchar('-'), x = -x;
    while (x) {
        ch[len++] = (x % 10) ^ 48;
        x /= 10;
    }
    if(len==0)printf("0");
    while (len--)putchar(ch[len]);
    puts("");
}
string s;
int solve(bool op)
{
    int now=0,sum=0;
    if(op)
    {
        while(now<s.size()-1)
        {
            now++;
            if(s[now]=='[')
            {
                int t=now+1,w=0;
                while(t<s.size()-1&&s[t]!=']')
                    w=w*10+s[t]-'0',t++;
                sum+=w,now=t+1;
            }
        }
    }
    else
    {
        while(now<s.size()-1)
        now++,sum+=s[now]==',';
        sum++;
    }
    return sum;
}
int solve2()
{
    int now=0,sum=0;
    while(now<s.size()-1)
    {
        now++;
        if(s[now]=='\"')
        {
            int t=now+1;
            while(t<s.size()-1&&s[t]!='\"')t++;
            sum+=t-now-1,now=t+1;
        }
    }
    return sum;
}
int calc(char ch)
{
    if(ch=='i')return 1;
    if(ch=='l')return 2;
    if(ch=='S')return 3;
    return -1;
}
void Print(int x)
{
    int t1=x/(1ll*1024*1024*1024);
    x%=(1ll*1024*1024*1024);
    int t2=x/(1ll*1024*1024);
    x%=(1ll*1024*1024);
    int t3=x/1024,t4=x%1024;
    if(t1)cout<<t1<<"GB";
    if(t2)cout<<t2<<"MB";
    if(t3)cout<<t3<<"KB";
    if(t4)cout<<t4<<"B";
}
signed main()
{
    int n,ans=0;
    read(n);
    FOR(i,1,n)
    {
        int ok;bool op;
        getline(cin,s);
        ok=calc(s[0]);
        op=(s[3]=='['||s[4]=='[');
        if(ok==1)ans+=solve(op)*4;
        if(ok==2)ans+=solve(op)*8;
        if(ok==3)ans+=solve2();
    }
    Print(ans);
    return 0;
}
```

---

## 作者：Shadow_T (赞：0)

大模拟！！！

本题变量总共有 $3$ 类，可以发现都可以抓关键字符来统计，我们一类一类讲。

- `int` 或 `long` 型的单个变量

可以发现，每个不同的变量都要用逗号隔开，那么我们可以考虑统计出逗号的数量，逗号的数量加 $1$ 就是变量数量。若类型为 `long` 则一个变量 $8$ Byte，`int` 一个变量 $4$ Byte。

- `String` 型的字符串

可以直接搜引号。若遇到一个引号则开始计数，每个字符 $1$ Byte，若遇到下一个则停止累加。因为或有多个字符串，所以这个操作要运算到字符串为，可能有多次。

- `int[]` 或 `long[]` 型的数组

搜方括号。遇到一个就开始计数，遇到非数字停止，然后将数字乘 $4$ 或 $8$ 即可，由于会有多个，所以要进行多次。

对于输出，我们可以先算出有多少 GB KB MB B，然后如果不为 $0$ 输出即可。

```cpp
#include <bits/stdc++.h>
using namespace std;
string st[1001];
int calc_dpos(string s)//=
{
	for(int j=0;s[j];j++)
	if(s[j]=='=') return j; 
	return -1;
}
int clac_spos(string s)//dight
{
	for(int i=0;s[i];i++)
	if(s[i]>='0'&&s[i]<='9') return i;
	return -1;
}
int clac_jpos(string s)//,
{
	s+=',';
	int cnt=0;
	for(int i=0;s[i];i++)
	if(s[i]==',') cnt++;
	return cnt;
}
void print(long long b)
{
	long long gb=b/1073741824;
	b-=gb*1073741824;
	long long mb=b/1048576;
	b-=mb*1048576;
	long long kb=b/1024;
	b-=kb*1024;
	if(gb!=0) cout<<gb<<"GB";
	if(mb!=0) cout<<mb<<"MB";
	if(kb!=0) cout<<kb<<"KB";
	if(b!=0) cout<<b<<"B";
}
int main()
{
	int t;
	cin>>t;
	getchar();
	long long ans=0;
	for(int kk=0;kk<t;kk++)
	{
		int l,r=0;
		string tmp="";
		char s;
		while(scanf("%c",&s)!=EOF&&s!='\n')
		{
			if(s==' ') st[++r]=tmp,tmp="";
			else tmp+=s;
		}
		st[++r]=tmp;
		for(int i=1;i<=r;i++)
		{
			if(st[i]=="int") i++,ans+=clac_jpos(st[i])*4;
			else if(st[i]=="long") i++,ans+=clac_jpos(st[i])*8;
			else if(st[i]=="String")
			{
				i++;
				int dpos=calc_dpos(st[i]);
				int len=0,j=dpos;
				while(st[i][j])
				{
					if(st[i][j]=='"')
					for(j=j+1;st[i][j];j++)
					if(st[i][j]=='"') break;
					else len++;
					j++;
				}
				ans+=len;
			}
			else if(st[i]=="int[]")
			{
				i+=2;
				int j=0;
				while(i<=r)
				{
					//cout<<st[i]<<" ";
					j=0;
					while(st[i][j])
					{
						long long pp=0;
						if(st[i][j]=='[')
						{
							//cout<<"ok";
							j++;
							while(st[i][j]>='0'&&st[i][j]<='9')
							pp*=10,pp+=(st[i][j]-'0'),j++;
							ans+=pp*4;
							//cout<<pp<<"\n";
						}
						j++;
					}
					i++;
				}
			}
			else if(st[i]=="long[]")
			{
				i+=2;
				int j=0;
				while(i<=r)
				{
					//cout<<st[i]<<" ";
					j=0;
					while(st[i][j])
					{
						long long pp=0;
						if(st[i][j]=='[')
						{
							//cout<<"ok";
							j++;
							while(st[i][j]>='0'&&st[i][j]<='9')
							pp*=10,pp+=(st[i][j]-'0'),j++;
							ans+=pp*8;
							//cout<<pp<<"\n";
						}
						j++;
					}
					i++;
				}
			}
		}
	}
	print(ans);
}/*
4
int a=0,b=0;
long x=0,y=0;
String s1="hello",s2="world";
long[] arr1=new long[100000],arr2=new long[100000];*/
```

---


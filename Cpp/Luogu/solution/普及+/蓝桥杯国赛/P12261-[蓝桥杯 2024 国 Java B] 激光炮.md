# [蓝桥杯 2024 国 Java B] 激光炮

## 题目描述

小明在二维平面上放置了 $n$ 门激光炮，第 $i$ 门激光炮位于坐标 $(-10^5, a_i)$，射向靶点 $(10^5, b_i)$，形成 $n$ 条线段。他想使用一条垂直于 $x$ 轴且其中一个端点在 $x$ 轴上的线段挡住所有激光炮的发射路线，这条线段的长度最短为多少？

## 说明/提示

### 样例说明

第 $2,3$ 门激光炮发射路线的交点为 $(-\frac{100000}{3}, \frac{400000}{3})$，因此，只需要在 $(-\frac{100000}{3}, 0)$ 处放置一条长度为 $\frac{400000}{3} = 133333.33$ 的线段即可挡住所有 3 门激光炮。

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，保证 $n \leq 10^2$。
- 对于 $100\%$ 的评测用例，保证 $n \leq 10^5$，$0 \leq a_i, b_i \leq 10^6$。

## 样例 #1

### 输入

```
3
0 100000
100000 200000
200000 0```

### 输出

```
133333.33```

# 题解

## 作者：W_C_B_H (赞：2)

设一次函数 $f_i(x)=p_ix+q_i$ 经过点 $(-10^5,a_i)$ 和 $(10^5,b_i)$，则有：

$$\begin{cases}-10^5\times p_i+q_i=a_i\\10^5\times p_i+q_i=b_i\end{cases}$$

解得：

$$\begin{cases}p_i=\dfrac{b_i-a_i}{2\times10^5}\\q_i=\dfrac{a_i+b_i}{2}\end{cases}$$

设 $\begin{aligned}f(x)=\max_{1\le i\le n}f_i(x)\end{aligned}$，则答案即为 $-10^5\le x\le 10^5$ 时，$f(x)$ 的最小值。

观察可得，$f(x)$ 有且仅有这三种情况：

- 在 $[-10^5,10^5]$ 上单调不降。

- 在 $[-10^5,10^5]$ 上单调不增。

- 存在 $-10^5 < x < 10^5$，使得 $f(x)$ 在 $[-10^5,x]$ 上单调不增，在 $[x,10^5]$ 上单调不降。

所以我们可以用三分算法求出 $f(x)$ 的最小值。

Code：

```java
import java.util.Scanner;
public class Main {
    static final int N = 100005;
    static final double eps = 1e-3;
    static int n;
    static double[] p = new double[N], q = new double[N];
    static double f(double x) {
        double ret = 0d;
        for(int i = 1; i <= n; i++) {
            ret = Math.max(ret, p[i] * x + q[i]);
        }
        return ret;
    }
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        n=sc.nextInt();
        for(int i = 1; i <= n; i++) {
            int a = sc.nextInt(), b = sc.nextInt();
            p[i] = (b - a) / 2e5;
            q[i] = (a + b) * 0.5;
        }
        double l = -1e5, r = 1e5, mid1, mid2;
        while(r - l > eps) {
            mid1 = l + (r - l) / 3;
            mid2 = r - (r - l) / 3;
            double f1 = f(mid1), f2 = f(mid2);
            if(f1 < f2) {
                r = mid2;
            } else {
                l = mid1;
            }
        }
        System.out.printf("%.2f", f(l));
        sc.close();
    }
}
```

---


# [COCI 2015/2016 #7] Nizovi

## 题目描述

一种编程语言中的数组按如下方式定义：

- 数组的开头和结尾分别用大括号（$\texttt \{$ 和 $\texttt \}$）表示。
- 每组大括号内有若干个（可能为 $0$）用逗号分隔开来的**元素**（每个数组的最后一个元素后面没有逗号）。
- 每个元素可以是一个**单词**（由小写字母组成的字符串）或一个数组。
- 一些合法的数组：$\texttt {\{\}}, \texttt{\{a,b,c\}}, \texttt{\{abc,znj,\{novi,niz\},pozz\}}$。

你需要采用下列码风使得程序更加美观：

- 遇到单词或大括号时另起一行。
- 逗号应直接放置于一个数组元素的后面。
- 每遇到一个 $\texttt{\{}$，增加 $2$ 个空格的缩进。
- 每遇到一个 $\texttt{\}}$，减少 $2$ 个空格的缩进。

现给定一个数组，输出上述码风下该数组的样式。

## 说明/提示

**【数据规模与约定】**

- 对于 $50\%$ 的数据，元素只包含单词。
- 对于 $100\%$ 的数据，$1 \le |S| \le 1500$。

**【提示与说明】**

Checker 选自 [Testlib 库](https://github.com/MikeMirzayanov/testlib/blob/master/checkers/fcmp.cpp)，见附件。

**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 1 Nizovi_。**

**本题分值按 COCI 原题设置，满分 $50$。**

## 样例 #1

### 输入

```
{abc,ono,sto}```

### 输出

```
{
  abc,
  ono,
  sto
}```

## 样例 #2

### 输入

```
{}```

### 输出

```
{
}```

## 样例 #3

### 输入

```
{znakovi}```

### 输出

```
{
  znakovi
}```

## 样例 #4

### 输入

```
{a,b,{c,d},e,{}}```

### 输出

```
{
  a,
  b,
  {
    c,
    d
  },
  e,
  {
  }
}```

# 题解

## 作者：ttq012 (赞：14)

简单的模拟题，直接按照题意模拟即可。

一开始先打印一个左大括号和换行。

请注意 C++ 不要使用 `\t` 来做缩进，请用两个空格来缩进。

在检测到逗号的时候，我们要将其换行。请使用 `\n` 而不是 `\r` 来作为换行。

在最后碰到右大括号的时候，我们要做一个换行，并且右大括号是没有缩进的。

这里介绍一个库函数：`getchar()` 代表读取一个字符，请注意 `getchar()` 函数是会读取空格和换行符的，所以慎用。


---

## 作者：lemon_qwq (赞：14)

[$\boxed{\color{darkgrey}\colorbox{grey}{更好的阅读体验}}$](https://610335.blog.luogu.org/solution-p8032)。

## $\mathcal{SOL}$

这道题就是一道纯字符串模拟题，我们可以把输入存到一个字符串内，然后用一个 `for` 循环逐位输出。这道题并不难，它的难点是考虑的东西很多，所以我们可能需要尝试很多遍才能通过。

展示代码之前先给大家介绍一个好用的库函数，就是 `setw(sum)`，它的用处就是输出 $sum$ 个空格，这个函数可以减轻很多时间复杂度。我们可以把它需要的空格数量存到一个 `int` 数组里，然后需要输出的时候用这个函数输出就可以了。

## $\mathcal{AC\ code}$

由于我写的比较迷惑，所以还是写上注释吧。

```cpp
#include<bits/stdc++.h>
using namespace std;
string s;
int se=1;//这个就是我之前介绍过的输出空格的变量。
int main(){
	cin>>s;
	for(int i=0;i<s.size();i++){
		if(s[i]=='{'){
			if(s[i+1]!='}')cout<<setw(se)<<"{"<<endl,se+=2,cout<<setw(se);//这里是为了避免两个括号之间有一个回车的尴尬状况。
			else{
				cout<<setw(se)<<"{",se+=2,cout<<setw(se);
			}
		}
		else if(s[i]=='}'){
			if(s[i-1]!=','){//这里是为了避免括号和逗号之间有空格。
				se-=2;cout<<endl<<setw(se)<<"}";
			}
			else{
				if(s[i-1]!='{'){//这个也是为了避免两个括号直接有一个回车
					cout<<endl<<setw(se)<<"}",se-=2;
				}
				else{
					cout<<setw(se)<<"}",se-=2;
				}
			}
		}
		else if(s[i]==',')cout<<","<<endl<<setw(se);//这里还有另外一种做法，但是代码比较多，所以我就不写了。
		else cout<<s[i];//这个是正常的情况。
	}
	return 0;//完美的结束。
}
```
## 高清无注释~~可以抄~~的代码。

```cpp
#include<bits/stdc++.h>
using namespace std;
string s;
int se=1;
int main(){
	cin>>s;
	for(int i=0;i<s.size();i++){
		if(s[i]=='{'){
			if(s[i+1]!='}')cout<<setw(se)<<"{"<<endl,se+=2,cout<<setw(se);
			else{
				cout<<setw(se)<<"{",se+=2,cout<<setw(se);
			}
		}
		else if(s[i]=='}'){
			if(s[i-1]!=','){
				se-=2;cout<<endl<<setw(se)<<"}";
			}
			else{
				if(s[i-1]!='{'){
					cout<<endl<<setw(se)<<"}",se-=2;
				}
				else{
					cout<<setw(se)<<"}",se-=2;
				}
			}
		}
		else if(s[i]==',')cout<<","<<endl<<setw(se);
		else cout<<s[i];
	}
	return 0;
}
```

大家不要光想着复制题解，自己把题目搞懂才是真谛。


---

## 作者：ZZQF5677 (赞：7)

### 解题思路

首先定义一个 $k$ 来判断每次输出多少个空格，然后分别定义两个循环和一个下标 $i$ 来遍历：

> + 先看 $s_i$ 是不是 `{`，是就先输出 $k$ 个空格以及输出 `{`，再空格往后推两位：$k \gets k+2$，且换行后 $i \gets i+1$ 然后跳出本次遍历。
> + 再看 $s_i$ 是不是 `}`，这里是注意，还要判断之前的 $s_{i-1}$ 是不是小写字母，是就还要帮忙换一个行，再**先**将空格往前推两位：$k \gets k-2$，**然后**输出 $k$ 个空格和输出 `}` 显然发现，之所以先变化了 $k$，是因为如果**后**变化 $k$ 就会让 `}` 延迟更新，并且缩进等级与中间的字母一样。作为 `}`，就代表着一段的结尾，所以还要看 $s_{i+1}$ 是不是 `,`，是就先输出 `,` 再换行，然后跳出本次遍历。
> + 既然不属于括号，那就一定属于字母或者逗号，先输出 $k$ 个空格，然后进入内部循环查找字母。

>> + 如果遇上了 `}` 退出内部循环，并且 $i$ 不变，把 $s_i$ 给下一次外部循环中的判断语句处理。
>> + 如果遇上了 `,` 输出就 `,` 并且还要换一行，因为内部循环中的 `,` 前面一定只有字母，然后 $i \gets i+1$ 退出内部循环。
>> + 什么符号都不属于的只有字母了，现在输出 $s_i$，别换行，然后 $i \gets i+1$ 进入下一次内部循环。

### 代码
```cpp
#include <bits/stdc++.h>
using namespace std;
string s;
int k = 0;
int main() {
  cin >> s;
  int i = 0;
  while (i < s.size()) {
    if (s[i] == '{') {
      for (int j = 1; j <= k; j++) {
        cout << ' ';
      }
      cout << s[i] << "\n";
      k += 2;
      i++;
      continue;
    }

    if (s[i] == '}') {
      if (s[i - 1] >= 'a' && s[i - 1] <= 'z') {
        cout << endl;
      }
      k -= 2;
      for (int j = 1; j <= k; j++) {
        cout << ' ';
      }
      cout << s[i];
      if (s[i + 1] == ',') {
        cout << s[i + 1];
        i++;
      }
      cout << "\n";
      i++;
      continue;
    }

    for (int j = 1; j <= k; j++) {
      cout << ' ';
    }
    while (i < s.size()) {
      if (s[i] == '}') {
        break;  // i 不变，给下一个循环中的外部判断语句处理。
      }
      if (s[i] == ',') {
        cout << s[i];
        cout << "\n";
        i++;
        break;
      }
      cout << s[i];
      i++;
    }
  }

  return 0;
}
```

---

## 作者：__a__ (赞：4)

其实这题很简单。

因本人只会 C++，下面用 C++  代码介绍。

首先，我们可以编写一个缩进的过程。
```cpp
void t(const int &a) //a是缩进。
{
	for(int i=0;i<a;++i)
		printf("  "); //每次缩进两格。
}
```
根据题意，

> + 遇到单词或大括号时另起一行。

> + 逗号应直接放置于一个数组元素的后面。

也就是说，逗号与前面的元素相连，后面换行。

```cpp
if(s[i]==',')
{
	printf(",\n"); //遇到逗号，另起一行。
	t(a); //别忘了要缩进。
}
```

> + 遇到单词或大括号时另起一行。

> - 每遇到一个 $\{$，增加 $2$ 个空格的缩进。

> - 每遇到一个 $\}$，减少 $2$ 个空格的缩进。

注意：`{}` 的情况，题目要求打印：

```
{
}
```

所以，要加**特判**。

```cpp
if(s[i]=='}')
{
	if(s[i-1]!='{') //特判，如果上一个是{，不用换行、减少缩进（因为{已经特判，没有增加缩进），直接打印。
    {
		--a;
		putchar('\n');
		t(a);
    }
	printf("}");
}
else
	if(s[i]=='{')
	{
		printf("{\n");
		if(s[i+1]!='}') //特判，如果下一个是}就不用增加缩进。
			++a;
		t(a);
	}
```

其他情况，就是单词，直接打印。

```cpp
putchar(s[i]);
```

---
# 完整代码：
```cpp
#include<cstdio>
#include<cstring>
char s[1501]; //本人习惯用char*，不习惯string。
void t(int &a)
{
	for(int i=0;i<a;++i)
		printf("  ");
}
int main()
{
	scanf("%s",s);
	int n=strlen(s),a=0; //strlen是测字符串长度，包含在头文件cstring中。
//下文已经介绍了。
	for(int i=0;i<n;++i)
	{
		if(s[i]=='}')
		{
			if(s[i-1]!='{')
			{
				--a;
				putchar('\n');
				t(a);
			}
			printf("}");
		}
		else
			if(s[i]==',')
			{
				printf(",\n");
				t(a);
			}
			else
				if(s[i]=='{')
				{
					printf("{\n");
					if(s[i+1]!='}')
						++a;
					t(a);
				}
				else
					putchar(s[i]);
	}
	return 0;
}
```

---

## 作者：Rogerhu (赞：2)

从前到后依次遍历，同时输出，需要用一个数存储缩进空格数。

这题坑有点多，代码里面都有注释。

~~感觉代码还不错~~

```cpp
#include<bits/stdc++.h>
using namespace std;
int t=0;   //缩进数 
string s;
//判断是否为字母 
bool isStr(int i){
	return s[i]>='a'&&s[i]<='z';
}
int main(){
	cin>>s;
	//依次遍历并输出 
	for(int i=0;i<s.length();i++){
		// '}' 不能与之前一行缩进一样，输出前就要减缩进 
		if(s[i]=='}')t-=2;
		//如果是单词开头或括号，就换行并缩进 
    	if(s[i]=='{'||isStr(i)&&!isStr(i-1)||s[i]=='}'){
    		//注意第一个 '{' 不用换行输出 
    		if(i!=0)cout<<endl;
    		for(int j=0;j<t;j++)cout<<" ";
		}
		// '{' 必须与之前一个缩进一样，输出后再减缩进  
		if(s[i]=='{')t+=2;
		cout<<s[i];
	}
   return 0;
}
 
```

~~蒟蒻第一遍题解，点个赞吧~~

---

## 作者：Raymondzll (赞：2)

## P8032 Nizovi

### 一道细节不多的模拟题。

- 一个数组后也可能会有逗号。

###### 没错，然后就没了。

### 解题思路

一开始想到递归，但是冷静了 $10^{-114514}$ 秒后发现，**完全没必要**。

于是来看一下怎么解决。

缩进问题：开一个变量存下来，碰到 ```{``` 加 $2$，碰到 ```}``` 减 $2$。

分开每一个元素：如果一开始指针指向括号会单独处理，所以只要考虑单词，碰到逗号停止就可以了。

剩余的细节程序里说。

**Tips：别忘了每一轮循环执行完后指针（代码中的 ```i```）是会加 $1$ 的。**

### 代码部分

```cpp
#include <bits/stdc++.h>
using namespace std;
string s;
int tab;
int main(){
	cin>>s;
	for(int i=0;i<s.size();i++){
		if(s[i]=='{'){
			for(int j=1;j<=tab;j++)cout<<' ';cout<<'{';tab+=2;
		}
		else if(s[i]=='}'){
			tab-=2;for(int j=1;j<=tab;j++)cout<<' ';cout<<'}';
			if(s[i+1]==','){//数组后也可能有逗号
				i++;cout<<',';
			}
		}
		else{
			for(int j=1;j<=tab;j++)cout<<' ';
			while(isalpha(s[i]))cout<<s[i++];//已经是单词了，isalpha(char)返回是不是字母
			if(s[i]==',')cout<<',';
			else i--;//{是要处理的，但是循环过后i++会跳过它，所以要i--
		}
		cout<<endl;//别忘了换行
	}
	return 0;
}

```

---

## 作者：信息向阳花木 (赞：2)

[题目传送门](https://www.luogu.com.cn/problem/P8032)

[博客传送门](https://www.luogu.com.cn/blog/hellafxybk/solution-p8032)

细节很多，主要是处理缩进。主要思路大概如下：

* 提前说明一下，$cnt$ 代表当前缩进长度。在每次输出前，先按照 $cnt$ 的个数打空格。
* 遇到逗号 `,` 时，输出逗号 `,` 和换行 `\n`。
* 遇到小写字母直接输出。
* 遇到左大括号 `{` 时，输出左大括号 `{` 和换行 `\n`，并把 $cnt$ 加 $2$。
* 遇到右大括号 `}` 时，输出右大括号 `}` 和换行 `\n`，并把 $cnt$ 减 $2$。
* 还有：前面的大括号缩进后是处理字母的，那大括号本身呢？需要放在输出缩进的前面。个人语文水平有限，如果您看不懂描述可以试一下这组样例：`{a,b,{c,d},e,{}}`。
* 注意：千万不能打完空格再换行，不然等于没打。~~（废话）~~

代码：

```cpp
#include <iostream>
using namespace std;
string s;
int cnt; //处理缩进长度 
int main(){
    cin >> s;
    for(int i=0;i<s.size();i++){
        if(s[i] == '}'){
            if(s[i - 1] != '{')
                cout<<endl;
            cnt -= 2;
        } //注意大括号的缩进要放在输出前面。
        if(s[i] == '{' && i != 0){ //防止越界，右大括号不存在这种情况。 
            if(s[i - 1] >= 'a' && s[i - 1] <= 'z') cout<<endl;
        }
        //有些换行的处理要放缩进前面，不然缩进再换行等于没有缩进。 
        if(s[i] != 0){ //防止越界
            if(!(s[i - 1] >= 'a' && s[i - 1] <= 'z' && s[i] >= 'a' && s[i] <= 'z')){ //如果这个字符和上一个字符都是字母，那他们是一个单词内的，不用缩进。 
                if(!(s[i] == ',')){ //逗号直接加单词后面，不用缩进。
                    for (int j = 0; j < cnt; j ++ ) cout << " ";
                }
            }
        }
        if(s[i] == '{'){
            cnt += 2;
            cout<<"{"<<endl;
        }
        if(s[i] >= 'a' && s[i] <= 'z'){ //小写字母
            cout << s[i];
        }
        if(s[i] == ','){
            printf(",\n");
        }
        if(s[i] == '}'){
            printf("}");
        }
    }
    return 0;
}
```

---

## 作者：tongzhenxuan (赞：1)

这道题是一个纯粹的模拟题，可以根据题目直接模拟。
## 思路解析：
-  处理缩进：不难发现出现一个左括号时，缩进增加两个，出现右括号时，缩进减少两个，所以我们可以在出现括号时统计缩进层数（也可以说是深度）。

``` 
if(str[i]=='{') tot++;
if(str[i]=='}') tot--;
```

其中缩进个数即 $tot \times 2 $。

此时要注意特判，遇到左括号时要在 $tot$ 累加之前输出缩进，而遇到右括号要在 $ tot$ 减完之后输出。

-  处理单词：只要在 $str_{i} \ge a $ 且 $str_{i} \le z$ 成立时进行输出即可。
-  处理逗号：极为简单，因为逗号只可能在单词后或右括号（数组）后出现，特判即可。

## Code：
```
#include<bits/stdc++.h>
using namespace std;
string str;
int i,j,l;
int main()
{
	int tot=0;
	cin>>str;
	for(i=0,l=str.size();i<l;i++)
	{
		if(str[i]=='{') 
		{
			for(j=1;j<=tot;j++)
				printf("  ");
			cout<<"{\n";
			tot++;
		}
		else if(str[i]=='}') 
		{
			tot--;
			for(j=1;j<=tot;j++)
			printf("  ");
			cout<<"}";
			if(str[i+1]==',') cout<<",\n";
			else cout<<"\n";
		} 
		else if(str[i]>='a' && str[i]<='z')
		{
			for(j=1;j<=tot;j++)
			printf("  ");
			while(i<=l && str[i]>='a' && str[i]<='z')
			{
				cout<<str[i];
				i++;
			}
			if(str[i]==',') cout<<",\n";
			else cout<<"\n",i--;
		}
	}
}
```

---

## 作者：BINYU (赞：1)

### 题意

按照规定格式输出一串由括号，逗号和英文小写字母组成的字符串。

### 思路

由于本题不需要调换两个字符的顺序，所以可以动态的求解，只用考虑换行和缩进。

#### $\quad$ 换行

$\quad$ 1. 前大括号后要换行；

$\quad$ 2. 逗号后要换行；

$\quad$ 3. 后大括号前要换行；

$\quad$ 4. **一次只换一行**。

#### $\quad$ 缩进

$\quad$ 1.初始无缩进；

$\quad$ 2. 读入一个前括号，下一行开始增加 $2$ 格缩进；

$\quad$ 3. 读入一个后括号，**本行**开始减少 $2$ 格缩进。

### 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
char c,la;//c:当前字符，la:上一个字符
int cnt;//缩进次数（并非个数）
int main()
{
	while(cin>>c)
	{
		if(la == '{')
			cout<<endl;//换行1
		else if(la == ',')
			cout<<endl;//换行2
		else if(c == '}')cout<<endl;//换行3，一定要用else if
		if(c == '}')cnt--;//缩进3（本行开始，先更新再缩进）
		if(la == '{'||la == ','||c == '}')for(int i = 1;i <= cnt;i++)cout<<"  ";//缩进
		cout<<c;//输出
		la = c;
		if(c == '{')cnt++;//缩进2（下一行开始，最后更新）
	}
}
```


---

## 作者：Ginger_he (赞：1)

# 题解
直接按照题意模拟即可，具体思路如下：
- 用一个变量（如 cnt）统计当前需要缩进的空格数，遇到左括号加二，遇到右括号减二。
- 逗号换行，但不改变缩进的空格数。
- 特判 $\text\{\text\}$ 的情况。

## Code
```cpp
#include<bits/stdc++.h>
using namespace std;
int cnt;
string s;
int main()
{
	cin>>s;
	for(int i=0;s[i];i++)
	{
		if(s[i]=='{')
		{
			cnt+=2;//增加2个空格的缩进
			printf("%c",s[i]);
			if(s[i+1]!='}')
			{
				printf("\n");
				for(int i=1;i<=cnt;i++)
					printf(" ");
			}//特判{}的情况 
		}
		else if(s[i]=='}')
		{
			cnt-=2;//减少2个空格的缩进 
			printf("\n");
			for(int i=1;i<=cnt;i++)
				printf(" ");
			printf("%c",s[i]); 
		}
		else if(s[i]==',')
		{
			printf("%c\n",s[i]);
			for(int i=1;i<=cnt;i++) 
				printf(" ");
		}//逗号换行，但不改变缩进的空格数 
		else
			printf("%c",s[i]);//字母直接输出 
	}
	return 0;
}
```

---

## 作者：CReatiQ (赞：0)

### 题目概述

一道简单的字符串模拟题。

我们可以总结出三个需要进行的操作：

 1. 输出该字符

 2. 换行
 
 3. 缩进

只要用一个变量 $h$ 记录当前需要缩进次数，在每次换行后根据 $h$ 进行缩进即可。

现在问题在于，如何考虑换行？

该题读入的字符可以分为 4 类考虑：逗号，左括号，右括号与内容字符。

 1. 每一个逗号后面必然跟一次换行。

 2. 每一个左括号后面如果不是右括号，跟一次换行，并且要多缩进一单位。

 3. 每一个右括号后面，如果还是右括号，缩进减少一单位；如果不是逗号，跟一次换行。
 
 4. 其它内容字符，如果后面是右括号，缩进减少一单位，跟一次换行。
 
然后照着上面四条规则把代码打出来就好啦。

------------

### Code

```cpp
#include <cstdio>
#include <cstring>

int h;
char s[1510];

void enter()
{
	putchar('\n');
	for (int i=1;i<=h;i++) printf("  ");
}

int main()
{
	scanf("%s",s);
	for (int i=0;i<strlen(s);i++)
	{
		putchar(s[i]);
		switch (s[i])
		{
			case ',': enter(); break;
			case '{': if (s[i+1]!='}') h++; enter(); break;
			case '}': if (s[i+1]=='}') h--; if (s[i+1]!=',') enter(); break;
			default : if (s[i+1]=='}') h--,enter();
		}
	}
	return 0;
}
```


---

## 作者：Skykguj (赞：0)

一道不算难的模拟题。

我的思路是求出当前左括号的数量，这个数量就是需要的缩进量，每读入一个右括号将缩进数 $lbcs - 1$，读到除了 "$\texttt {\{}$" "$\texttt {\}}$" "$\texttt {,}$" 以外的字符就正常输出，读到 "$\texttt {,}$" 就输出再换行。

```cpp
#include <iostream>
#include <cstring>

void tab (int tabs) { for (int i = 0; i < tabs; i++) std::cout << "  "; } // 输出 tabs 个缩进

int main()
{
    std::string arr;
    int lbcs = 0; // lbcs 左括号数量。
    std::cin >> arr;
    
    for (int i = 0; i < arr.length(); i++)
    {
        if (arr[i] == '{')
        {
            ++lbcs; puts("{");
            if (arr[i + 1] != '}') tab(lbcs); // 处理边界
        }
        if (arr[i] == '}')
        {
            if (arr[i - 1] != '{') puts(""); // 处理边界
            --lbcs; tab(lbcs); std::cout << '}';
        }
        if (arr[i] != ',' && arr[i] != '}' && arr[i] != '{')
            std::cout << arr[i]; // 正常输出，读到 , 再换行
        if (arr[i] == ',') 
        {
            puts(","); tab(lbcs);
        }
    }
    return 0;
}
```

---

## 作者：FuriousC (赞：0)

[题目传送门](https://www.luogu.com.cn/problem/P8032)

简单模拟题

分几种情况：

- 词语开头的字符：要缩进，要换行；

- `,` 和不在词语开头的字符：正常输出；

- `{` 和 `}`：要换行，要缩进。

其中对于 `{` 和 `}` 有几点特殊之处：

- `{` 缩进格数 $+2$；

- `}` 缩进格数 $-2$；

- 开头第一个 `{` 没有换行；

- 注意 `{` 是先打印然后再改缩进格数，`}` 是先改缩进格数后打印。

上代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	string str;
	cin>>str;
	int space=0;//缩进格数
	for(int i=0;i<str.size();i++){
		bool enter=0,do_space=0;//分别代表要不要换行和要不要缩进
		int change_space=0;//改变的缩进格数
		if(i!=0&&str[i]>='a'&&str[i]<='z'&&(str[i-1]<'a'||str[i-1]>'z')){
			do_space=1;
			enter=1;
		}else if(str[i]=='{'){
			do_space=1;
			if(i!=0){
				enter=1;
			}
			change_space+=2;//先记着，之后再加
		}else if(str[i]=='}'){
			do_space=1;
			enter=1;
			space-=2;//直接减缩进格数
		}
		if(enter){
			cout<<"\n";
		}
		if(do_space){
			for(int i=1;i<=space;i++){
				cout<<" ";
			}
		}
		space+=change_space;
		cout<<str[i];
	}
	return 0;
}
```


---

## 作者：int32 (赞：0)

## $\sf Solution$

先考虑不存在 `{}` 的情况对于 `{`、`}`、字母等情况分析。

- 字符 `{`：
	- 打印 `{`，换行。
    - 缩进增加两个
    - 打印缩进
    
- 字符 `}`：
	- 换行
    - 缩进减少两个
    - 打印缩进
    - 打印 `}`
- 字符 `,`：
	- 打印 `,`，换行
    - 打印缩进
- 字母
	- 打印字母

此外还要考虑 `{}` ，此情况较简单，不再赘述。

```cpp
#include <iostream>
#include <string>
using namespace std;

string S;
int indent = 0;

void uvuci() {
  for (int i = 0; i < indent; ++i)
    cout << "  ";
}

int main() {
  cin >> S;

  for (int i = 0; i < S.size(); ++i) {
    switch (S[i]) {
      case '}':
        if (S[i - 1] != '{') {
          indent--;
          cout << endl;
          uvuci();
          cout << "}";
        }
        break;
      case '{':
        cout << "{";
        cout << endl;
        if (S[i + 1] == '}') {
          uvuci();
          cout << "}";
          ++i;
        } else {
          indent++;
          uvuci();
        }
        break;
      case ',':
        cout << "," << endl;
        uvuci();
        break;
      default:
        cout << S[i];
    }
  }

  return 0;
}

```

---

## 作者：andychen_2012 (赞：0)

## 一、解题思路

其实这道题只需要一些比较简单的模拟即可，但是还是有一些细节的。

就例如如何安排换行，如何控制缩进等。

遇到一个'{'的时候，如果后一个字符不是'}'，那就输出换行，并将缩进个数增加 $1$，再输出缩进。至于后面一个字符时'}'时，输出'{'并将缩进个数加 $1$。这个可以通过样例1得出。

遇到一个'}'时，就输出一个换行，并将缩进个数减少 $1$，输出缩进。

遇到一个','时，就输出换行，输出缩进。

遇到其他字符时，直接输出即可。

## 二、解题代码

```cpp
#include<cstdio>
#include<cstring>
using namespace std;
char s[3000];
int main(){
	scanf("%s",s);
	int len=strlen(s);
	int now=0;
	for(int i=0;i<len;++i){
		if(s[i]=='{'){
			putchar('{');
			if(s[i+1]!='}')
				putchar('\n');
			now++;
			if(s[i+1]!='}')
				for(int j=0;j<now;++j)
					printf("  ");
		}
		else if(s[i]=='}'){
			putchar('\n');
			now--;
			for(int j=0;j<now;++j)
				printf("  ");
			putchar('}');
		}
		else if(s[i]==','){
			putchar(',');
			putchar('\n');
			for(int j=0;j<now;++j)
				printf("  ");
		}
		else
			putchar(s[i]);
	}
	return 0;
}
```


---

## 作者：BlackPanda (赞：0)

### [题目传送门](https://www.luogu.com.cn/problem/P8032)

------------
### 题意：
#### 输入一个字符串数组，根据以下方式模拟：
- 数组的开头和结尾分别用大括号 \{ 和 \} 表示。

- 每组大括号内有若干个（可能为 $0$）用逗号分隔开来的**元素**（每个数组的最后一个元素后面没有逗号）。

- 每个元素可以是一个单词（由小写字母组成的字符串）或一个数组。

#### 并且还要满足以下码风：
- 遇到单词或大括号时另起一行。

- 逗号应直接放置于一个数组元素的后面。

- 每遇到一个 \{，增加 $2$ 个空格的缩进。

- 每遇到一个 \}，减少 $2$ 个空格的缩进。

------------
### 思路：
设置循环变量 $i$ 和用于记录缩进数量的变量 $cnt$。
然后根据题意模拟即可。

------------
### 代码：
```cpp
#include <iostream>
#include <string>
#include <cstdio>
using namespace std;
string s;
int i,cnt;	//cnt用于记录缩进的数量
int main(){
    cin>>s;
    for(i=0;i<s.length();i++){
        if(s[i]=='{'){
            for(int k=1;k<=cnt;k++)  cout<<" ";
			cout<<"{"<<endl;
            cnt+=2;
        }
        else if(s[i]=='}'){
            for(int k=1;k<=cnt-2;k++)  cout<<" ";
			cout<<"}";
			if(s[i+1]!=',')	cout<<endl;
            cnt-=2;
        }
        else{
            if(s[i]!=',')	for(int k=1;k<=cnt;k++)  cout<<" ";
            while(s[i]!=',' && s[i]!='}'){
                cout<<s[i];
                i++;
            }
            if(s[i]==',')	cout<<","<<endl;
            else    cout<<endl,i--;

        }
    }
    return 0;
}
```

本篇题解特别感谢@[wangyuhan2010](https://www.luogu.com.cn/user/320616)dalao的指点

---

## 作者：MattL (赞：0)

[链接](https://www.luogu.com.cn/problem/P8032)

㵘

---

**题意：**

>一种编程语言中的数组按如下方式定义：

>- 数组的开头和结尾分别用大括号（$\texttt \{$ 和 $\texttt \}$）表示。
>- 每组大括号内有若干个（可能为 $0$）用逗号分隔开来的**元素**（每个数组的最后一个元素后面没有逗号）。
>- 每个元素可以是一个**单词**（由小写字母组成的字符串）或一个数组。
>- 一些合法的数组：$\texttt {\{\}}, \texttt{\{a,b,c\}}, \texttt{\{abc,znj,\{novi,niz\},pozz\}}$。

>你需要采用下列码风使得程序更加美观：

>- 遇到单词或大括号时另起一行。
>- 逗号应直接放置于一个数组元素的后面。
>- 每遇到一个 $\{$，增加 $2$ 个空格的缩进。
>- 每遇到一个 $\}$，减少 $2$ 个空格的缩进。

>现给定一个数组，输出上述码风下该数组的样式。

其实就是缩进+换行。

缩进就是在几个大括号里就几个缩进，一个缩进两个空格。

换行的情况如下：

1. 下一个是右大括号
2. 这行为 ```}``` ,```},``` ,或 ```{```
3. 行末为 ```,```

---

**代码：**

解释详见代码：

```cpp
#include <bits/stdc++.h>
using namespace std;
int suojin=0;//一个缩进两个空格
string s,t="";//t为这行的字符串
int main()
{
    getline(cin,s);//读入一行
    for(int i=0;i<s.size();i++)
    {
        if(s[i]=='}')//情况2
        {
            suojin--;
            for(int o=1;o<=suojin;o++)cout<<"  ";//别忘了是两个
            cout<<'}';
            if(s[i+1]==',')//有','就也输出
            {
                cout<<',';
                i++;
            }
            cout<<endl;
            continue;
        }
        if(s[i]=='{')//情况2
        {
            for(int o=1;o<=suojin;o++)cout<<"  ";
            suojin++;
            cout<<"{\n";
            continue;
        }
        t+=s[i];//注意要先加
        if(s[i+1]=='}'||s[i]==',')//情况1和3
        {
            for(int o=1;o<=suojin;o++)cout<<"  ";
            cout<<t<<endl;
            t="";
            continue;
        }
    }
    return 0;
}
```

---

## 作者：HappyCode (赞：0)

### 思路
我们枚举输入的数组的每个值。
- 如果该值为 `{`，**除第一行以外**换一行，然后输出缩进，然后加 $2$ 个空格的缩进。
- 如果该值为 `}`，减掉 $2$ 个空格的缩进，然后换一行输出缩进和 `}`。
- 如果该值为 `,`，直接输出。
- 如果该值为数组元素且上一个时 `{` 或 `,`，换一行输出缩进和元素。
### 提醒
这题有 SPJ，第一行不能有换行！
### 代码
```cpp
#include<iostream>
using namespace std;
string s;
int tab;
char last='\0';
int main(){
    cin>>s;
    for(int i=0;i<s.length();i++){
        if(s[i]=='{'){
            if(last!='\0'){ //第一行不能有换行
        	    cout<<endl;
            }
            for(int i=1;i<=tab;i++){
                cout<<' ';
            }
            cout<<'{';
            tab+=2;
            last='{';
        }else if(s[i]=='}'){
            tab-=2;
            cout<<endl;
            for(int i=1;i<=tab;i++){
                cout<<' ';
            }
            cout<<'}';
            last='}';
        }else if(s[i]==','){
            cout<<',';
            last=',';
        }else{
            if(last=='{' or last==','){
                cout<<endl;
                for(int i=1;i<=tab;i++){
                    cout<<' ';
                }
            }
            cout<<s[i];
            last=s[i];
        }
    }
    return 0;
}
```

---


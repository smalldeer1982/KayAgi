# [COCI 2013/2014 #3] REČENICE

## 题目描述

很久以前，在一个只有数学学生居住的遥远国度里，Iva 和 Vedran 正在讨论一种特殊的句子。这些句子中正好有一个单词表示一个数字，并且这个数字等于句子中字母的总数。例如 `This sentence has thirtyone
letters.` 和 `Blah Blah seventeen`。

Jurica 无意中听到了朋友们的谈话，决定用他背诵的大量特殊的句子给他们留下深刻印象。他急忙回家，写了一个程序，给定一个句子，求出使得句子变得特殊的能放进去的最小数字。

不幸的是，他的电脑坏了，现在他需要你的帮助。写一个程序来帮助 Jurica！

以下是一些补充说明：

- 句子的形式是：$\textit{word}_1~\textit{word}_2~\textit{word}_3~\cdots~\textit{word}_{n-1}~\textit{word}_n$。这 $n$ 个单词中恰好有一个 `$`，表示需要填入的表示一个数字的单词。例如，`this sentence has thirtyone letters` 将变为 `this sentence has $ letters`。
- 用来表示数字的单词遵循如下规则：
    - 对于所有 $1\sim 19$ 的整数，表示它们的单词从小到大依次为 `one`、`two`、`three`、`four`、`five`、`six`、`seven`、`eight`、`nine`、`ten`、`eleven`、`twelve`、`thirteen`、`fourteen`、`fifteen`、`sixteen`、`seventeen`、`eighteen` 和 `nineteen`。
    - 对于所有 $20\sim 90$ 的整十数，表示它们的单词从小到大依次为 `twenty`、`thirty`、`forty`、`fifty`、`sixty`、`seventy`、`eighty`、`ninety`。
    - 对于所有 $100\sim 900$ 的整百数，表示它们的单词从小到大依次为 `onehundred`、`twohundred`、`threehundred`、`fourhundred`、
    `fivehundred`、
    `sixhundred`、
    `sevenhundred`、
    `eighthundred`、
    `ninehundred`。
    - 对于其它所有的两位数，先在开头放入表示不超过该数的最大的整十数的单词，再在后面拼接表示该两位数的个位数的单词。例如，表示整数 $68$ 的单词为 `sixtyeight`。
    - 对于其它所有的三位数，先在开头放入表示不超过该数的最大的整百数的单词，再在后面拼接表示其后两位数的单词（按照前面的规则）。例如，表示整数 $319,530,971$ 的单词分别为 `threehundrednineteen`、`fivehundredthirty` 和 `ninehundredseventyone`。

## 说明/提示

**【样例 2 解释】**

`$` 填入表示整数 $30$ 的单词 `thirty`，此时所有单词的字母总数为 $6+2+3+6+2+7+4=30$。

**【样例 3 解释】**

请注意本题中的句子可能并不满足英语语法要求。

**【数据范围与限制】**

**本题开启捆绑测试**。各个子任务的分值和特殊限制如下所述：

- Subtask 1（40 pts）：`$` 中填入的单词所对应的数字不超过 $50$。
- Subtask 2（60 pts）：无特殊限制。

对于所有数据，$1\leqslant n\leqslant 20$，`$` 中填入的单词所对应的数字不超过 $1000$。

**【题目来源】**

本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T3 REČENICE_**，按照原题数据配置，满分 $100$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。

## 样例 #1

### 输入

```
5
this
sentence
has
$
letters```

### 输出

```
this sentence has thirtyone letters```

## 样例 #2

### 输入

```
7
$
is
the
number
of
letters
here```

### 输出

```
thirty is the number of letters here```

## 样例 #3

### 输入

```
5
the
letters
are
$
potato```

### 输出

```
the letters are twentynine potato```

# 题解

## 作者：tracyyi (赞：7)

### 题意简述 

- 输入整数 $n$ 个字符串，代表 $n$ 个单词。

- 替换英文数字，数字表示所有单词的总长度，包括替换后的英文数字。

- 把所有单词依次输出。


### 题目分析

需要解决下边两个问题：

#### 1. 把整数用英文表示出来 

先看数据范围，数字不超过 $1000$ ，所以只考虑 $3$ 位数的情况（我没考虑刚好 $1000$ ）的情况，应该不太容易编出这样的测试点，赌一把啰，不过加上也不难。

分析一下英文数字的组成：

* 如果是三位数，百位再加上 "hundred".

* 对于低两位，如果大于等于 $20$ 的，十位数需要单独表示，事先写入一个字符串数组 $shi[10]$ .

* 如果低两位小于 $20$ ，即从 $1$ 到 $19$ ，各有一个单词，放在字符串数组 $ge[20]$ 中。 

#### 2. 凑字数

即把英文数字刚好表示总长度。这里我用暴力枚举，首先算出其余单词的字符数，然后往上加。因为没有哪个数字小于  $3$ 个字符，所以直接从 $3$ 开始往上加，每加一个算一下总长度，如果发现符合，就结束，最后输出结果。数字的总长度不会超过 $100$ ，所以枚举 $3$ 到 $100$ 就好。

下边是源代码。


```cpp

#include <bits/stdc++.h>
using namespace std;
#define ll long long
string s[22], numstr;
stack <int>sk;
string ge[]={"","one","two","three","four","five",
			"six","seven","eight","nine","ten","eleven",
			"twelve","thirteen","fourteen","fifteen",
			"sixteen", "seventeen", "eighteen", "nineteen"};
string shi[]={"","","twenty","thirty", "forty", "fifty",
					"sixty","seventy","eighty","ninety"};

//把整数转换成英文
string convert(int n){
	int t=n;
	string ans="";
//先清空栈
	while(!sk.empty()){
		sk.pop();
	} 	

//用栈来保存每一位，本来三位数不用这么麻烦，
//但为了以后扩展成更多位数，常规来写。
	while(t>0){
		sk.push(t%10);
		t=t/10;
	}
 
 //先处理百位
	if(sk.size()==3){
		ans=ans+ge[sk.top()]+"hundred";
		sk.pop();
	}
 //处理低两位
	if(sk.size()==2){
		if(sk.top()>1){
			ans=ans+shi[sk.top()];
			sk.pop();
		}else{
			n=n%100;//低两位是0~19 
			ans=ans+ge[n];
			return ans;
		}
	}
//处理个位
	if(sk.size()==1){
		ans=ans+ge[sk.top()]; 
	}
	return ans;
}

int main(){
	int n, sm=0, id=0;
	cin>>n;
	cin.ignore();
	for(int i=1; i<=n; i++){
		cin>>s[i];
		if(s[i]!="$"){
			sm=sm+s[i].size();
		}else{
			id=i;//记录数字所在的位置 
		}
	}

  	// 验证一下转换函数，OK了再往下写
  	//	numstr=convert(sm);
  	//	cout<<sm<<endl;
  	//	for(int i=1; i<=999; i++){
  	//		cout<<convert(i)<<endl;
	//	}

	//开始凑字数，在原长度基础上加i，再算算增加了几个字符
		for(int i=3; i<=100; i++){
			numstr=convert(sm+i);
			if(numstr.size() == i){
				s[id]=numstr;
				//cout<<i<<" "<<numstr<<endl;
				break;
			}
		}

	//大功告成，一起输出！
		for(int i=1; i<=n; i++){
			cout<<s[i]<<" ";
		}

		return 0;
	}

```




---

## 作者：幸存者 (赞：6)

## 思路
先预处理出 $1$ 到 $999$ 每个数对应的单词。

然后在输入的同时，计算出长度总和并保存下来数应该填写的位置。

之后枚举 $1$ 到 $999$，如果找到满足条件的数，就保存到数组中并直接结束循环。

最后输出整个数组即可。
## $\text{AC Code}$
```cpp
#include <bits/stdc++.h>
using namespace std;
string a[30];
string number[1000];
string number1[20] = {"", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"};
string number2[20] = {"", "", "twenty", "thirty", "forty", "fifteen", "sixty", "seventy", "eighty", "ninety"};
string number3[20] = {"", "onehundred", "twohundred", "threehundred", "fourhundred", "fivehundred", "sixhundred", "sevenhundred", "eighthundred", "ninehundred"};
int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0), cout.tie(0);
    for (int i = 1; i < 1000; i++)
    {
        if (i < 20) number[i] = number1[i];
        else if (i < 100) number[i] = number2[i / 10] + number1[i % 10];
        else if (i % 100 < 20) number[i] = number3[i / 100] + number1[i % 100];
        else number[i] = number3[i / 100] + number2[i / 10 % 10] + number1[i % 10];
    }
    int n, x, sum = 0;
    cin >> n;
    for (int i = 1; i <= n; i++)
    {
        cin >> a[i];
        if (a[i] != "$") sum += a[i].size();
        else x = i;
    }
    for (int i = 1; i < 1000; i++) if (sum + number[i].size() == i)
    {
        a[x] = number[i];
        break;
    }
    for (int i = 1; i <= n; i++) cout << a[i] << " ";
    return 0;
}
```

---

## 作者：Galex (赞：2)

直接模拟即可。

先用四个数组分别记录一位数的单词、$10$ 到 $19$ 的单词，整十数的单词以及整百的单词。然后我们可以写一个函数来表示一个数所对应的单词，最后直接枚举从 $1$ 到 $999$，只要找到一个满足的就输出全部，退出循环。

具体细节请看代码：

```cpp
#include <iostream>
using namespace std;

int n, sum = 0;
string s[25];

string d1[10] = {"", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"};//一位数 
string tenpl[10] = {"ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"};//10~19
string d2[10] = {"", "ten", "twenty", "thirty", "forty", "fifteen", "sixty", "seventy", "eighty", "ninety"};//整十数 
string d3[10];//整百数 

string get(int x){//表示x对应的单词 
	string ans;
	if (x >= 100)
		ans += d3[x / 100], x %= 100;
	if (x >= 20)
		ans += d2[x / 10], x %= 10;
	if (x >= 10)
		return ans + tenpl[x - 10];
	return ans + d1[x];
}

int main(){
	for (int i = 1; i < 10; i++)//注意到3位数就是一位数+hundred，所以直接赋值就行 
		d3[i] = d1[i] + "hundred";
	cin >> n;
	for (int i = 1; i <= n; i++){
		cin >> s[i];
		if (s[i] != "$")
			sum += s[i].size();
	}
	for (int i = 1; i < 1000; i++){
		string now = get(i);
		if (now.size() + sum == i){//满足条件就全部输出 
			for (int j = 1; j <= n; j++) 
				cout << (s[j] == "$" ? now : s[j]) << ' ';
			break;
		} 
	}
	return 0;
}
```

最后，**千万不要把单词拼错了！！！**

---

## 作者：Aiopr_2378 (赞：1)

这就是一道模拟题，主要难点在字符串生成上（当然，你可以手动打表生成，但这样错误率有亿些高）。

这篇题解主要介绍了字符串生成的常用操作。

### 字符串合并

通常情况下，我们使用 `string` 来存储的字符串可以通过简单的方式进行合并：

```cpp
str=str1+str2；
```
~~（没错，就是这么简单）~~

但是这并不是全部，从此，我们可以延伸出一些有用的东西：

众所周知，在使用 `cin` 对字符串进行输入时，默认从`str[0]` 进行读入，但有时为了方便，我们希望从 `str[1]` 开始读入，下面的程序就可以解决这个问题：

```cpp
cin>>(str+1)；
```
你以为这篇题解完了吗？并没有。

### 字符串函数

在 `C++` 标准库中，有许多字符串操作函数，这对于普通字符串操作有重要作用。下面就给大家介绍几个常用的：

- `strlen函数` ： `strlen函数` 将接收一个 `char` 字符串作为实参，并返回字符串的长度。

```cpp
char str[] = "Hello";
int length = strlen(str);
```

- `strcat函数` ： `strcat函数` 釆用两个字符串作为形参并连接它们，返回由第一个字符串和第二个字符串的所有字符组成的单个字符串。

```cpp

char string1[];
char string2 [];
strcat(string1,string2);
```

-  `strcpy函数` ： `strcpy函数` 可以用来将一个字符串复制到另一个字符串中。

```cpp
char name[];
strcpy(name, "Albert Einstein");
```

-  `strcmp函数` ： `strcmp函数` 以两个 `char` 字符串作为形参，并返回一个整数，表示两个字符串相互比较的结果。

```cpp
if(strcmp(stringl, string2)==0);
```

### 对于本题

我们只需要记录题目中所给的每一个数字对应的字符串，然后通过字符串合并操作进行合并操作，使其变成想要的数字对应的字符串。

我们只需要依次查找每一个数字，判断是否符合条件，如果符合就输出，结束程序。

### 冗余的程序

啊很显然我的程序有进一步优化的可能性，但因为我太菜了，懒得弄了（

附上代码

```cpp
#include<iostream>
#include<cstring>
#include<map>
using namespace std;
string a[25],b[15],c[15];
int n,sum,ki;
string str,temp[50];
void loading(){
    //a[]
    a[1]="one";
    a[2]="two";
    a[3]="three";
    a[4]="four";
    a[5]="five";
    a[6]="six";
    a[7]="seven";
    a[8]="eight";
    a[9]="nine";
    a[10]="ten";
    a[11]="eleven";
    a[12]="twelve";
    a[13]="thirteen";
    a[14]="fourteen";
    a[15]="fifteen";
    a[16]="sixteen";
    a[17]="seventeen";
    a[18]="eighteen";
    a[19]="nineteen";
    //b[]
    b[2]="twenty";
    b[3]="thirty";
    b[4]="forty";
    b[5]="fifty";
    b[6]="sixty";
    b[7]="seventy";
    b[8]="eighty";
    b[9]="ninety";
    //c[]
    c[1]="onehundred";
    c[2]="twohundred";
    c[3]="threehundred";
    c[4]="fourhundred";
    c[5]="fivehundred";
    c[6]="sixhundred";
    c[7]="sevenhundred";
    c[8]="eighthundred";
    c[9]="ninehundred";
}
string get(int now){
    string m={""};
    if(now>=100) m=c[now/100],now%=100;
    if(now>=20) m+=b[now/10],now%=10;
    return m+a[now];
}
int main(){
    loading();
    cin>>n;
    for(int i=1;i<=n;i++){
        cin>>str;
        temp[i]=str;
        if(str!="$") sum+=str.length();
        else ki=i;
    }
    for(int i=1;i<1000;i++){
        string op=get(i);
        if(op.length()+sum==i){
            for(int j=1;j<=n;j++){
                if(j!=ki) cout<<temp[j]<<" ";
                else cout<<op<<" ";
            }
            return 0;
        }
    }
    return 0;
}
```

~~完结撒花~~

---

## 作者：yeshubo_qwq (赞：1)

主要问题在于如何求出 $1 \sim 999$ 英语单词的长度。

答案当然是打表，但不是直接打表长度~~虽然值得一试~~。

将 $1 \sim 19$，$20 \sim 90$（整十数）和 `hundred` 打出来即可。

然后根据规律（[详见题面](https://www.luogu.com.cn/problem/P8243)），把所有单词拼出来就可以了。

主要就是将三个数位拆开，再拼起来，注意判断一下十位和个位是同一个单词。

```cpp
#include<bits/stdc++.h>
using namespace std;
//自行打表，这里a数组为1~19，b数组为20~90，c为hundred 
int i,j,t,s,g,n,num;
string f[1000],w[25];
int main(){
    for(i=1;i<=999;i++){
        t=i/100;s=i/10%10;g=i%10;
        if(t!=0)f[i]=f[i]+a[t]+c;//百位 
        if(s>=2)f[i]=f[i]+b[s]+a[g];//十位和个位不是一个单词 
        else f[i]=f[i]+a[s*10+g];//十位和个位是一个单词 
    }
    cin>>n;
    for(s=0,i=1;i<=n;i++){
        cin>>w[i];
        if(w[i]=="$")num=i;
        else s+=w[i].size();
    }
    for(i=1;i<=999;i++)//枚举答案 
        if(s+f[i].size()==i){
            w[num]=f[i];
            for(j=1;j<=n;j++)
                cout<<w[j]<<' ';
            return 0;
        }
}
```


---

## 作者：GuoWil (赞：0)

按照题意模拟即可。

思路：

一、生成数字所对应的字符串。

建立两个字符串数组 $s1$ 和 $s2$。$s1$ 存储表示 $1\sim 19 $ 的单词， $s2$ 表示 $20\sim 90$ 整十数的单词。

设 $ans$ 为句子中字母的个数。取出 $ans$ 的每一位，然后去对应的数组里找（特判整除 $10$ 或 $100$ 的情况）。

生成字符串部分 $\text{Code}$

```cpp
#include <bits/stdc++.h>
using namespace std;
int n,ans=0,ct=0;string s,str[25],res="";
string s1[22]={"I AK IOI","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"};
string s2[12]={"I AK NOI","I AK IOI","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"};
int ck(int ans){
    if(ans<=19) res=s1[ans];
    else if(ans>19&&ans<100){
        if(ans%10==0) res=s2[ans/10];
        else res=s2[ans/10]+s1[ans%10];
    }else{
        if(ans%100==0) res=s1[ans/100]+"hundred";
        else{
            res=s1[ans/100]+"hundred";
            ans%=100;
            if(ans<=19) res+=s1[ans];
            else if(ans%10==0) res+=s2[ans/10];
            else res+=s2[ans/10]+s1[ans%10];
        }
    }
}
```

$\text{tips}$：
- 在找对应时，由于字符串数组的下标从 $0$ 开始，所以数字和数字所对应的单词的下标差 $1$。为了方便处理，可以用一些字符串占用字符串数组中下标为 $0$ 和 $1$ 的位置，这样数字和单词就可以对应上。
- $\text{forty}$ 中间没有 $\text{u}$。

二、求出使得句子变得特殊的能放进去的最小数字。

其实就是找一个数（尽可能小），使这个数对应的单词放进句子后，整个句子的字母个数等于这个数。

先用一个 $ans$ 记录除了 $ \$$ 以外剩余单词字母个数。使 $i$ 从 $1$ 开始暴力枚举到 $999$ ，对每个 $i$ 都生成一遍单词，如果这个单词的字母数加上 $ans$ 等于 $i$，就找到解了。

记录一下 $ \$ $ 的位置，输出原字符串即可。（因为代码块里好像无法识别 $ \$ $ 这个字符显示出乱码，所以我用 $ \# $ 代替了）

完整 $\text{Code}$


```cpp
int main(){
    cin >> n;
    while(n--){
        cin >> s;
        str[ct++]=s;
        if(s=="#") continue;
        ans+=s.size();
    }
    for(int i=1;i<=1000;++i){
        res="";
        ck(i);
        if(ans+res.size()==i) break;
    }
    for(int i=0;i<ct;++i){
        if(str[i]=="#") cout << res << " ";
        else cout << str[i] << " ";
    }
    system("pause");
}

```



---


# [ROIR 2020] 平方 (Day1)

## 题目描述

**译自 [ROIR 2020](http://neerc.ifmo.ru/school/archive/2019-2020.html) Day1 T1.** ***[Разность квадратов](http://neerc.ifmo.ru/school/archive/2019-2020/ru-olymp-regional-2020-day1.pdf)，译者 ShineEternal***

你参与了字符计算系统软件模块的开发，将用于求解一类特殊的丢番图方程，具体内容如下：

给定一个非负整数 $n$，正在开发的模块需要找到两个正整数 $x$ 和 $y$，使得 $x^2-y^2=n$，其中 $x,y$ 不超过 $2^{62}-1$。

你需要编写一个程序，对于给定的非负整数 $n$，求出两个自然数 $x$ 和 $y$，使得它们都不超过 $2^{62}-1$ 且其平方差为 $n$。

## 说明/提示

对于 $100\%$ 的数据，$0\le n\le 2^{60}$。

| 任务编号 |          $n$           | 分值 |
| :------: | :--------------------: | :--: |
|   $1$    | $0 \leq n \leq 2^{10}$ | $10$ |
|   $2$    | $0 \leq n \leq 2^{20}$ | $20$ |
|   $3$    | $0 \leq n \leq 2^{30}$ | $30$ |
|   $4$    | $0 \leq n \leq 2^{60}$ | $40$ |



## 样例 #1

### 输入

```
3```

### 输出

```
Yes
2 1```

## 样例 #2

### 输入

```
2```

### 输出

```
No```

# 题解

## 作者：cff_0102 (赞：5)

因为 $x^2-y^2=n$，所以 $(x+y)(x-y)=n$。$x+y$ 和 $x-y$ 明显同号，所以 $n$ 要么得是奇数，要么能被 $4$ 整除，否则它就不能被分成 $(x+y)(x-y)$。

当 $n$ 是奇数，考虑构造 $x+y=n,x-y=1$。两式相加，得到 $2x=n+1$，两式相减，得到 $2y=n-1$。所以当 $n$ 是奇数，其中一个答案就是 $x=\frac{n+1}{2},y=\frac{n-1}{2}$。但是，题面又规定 $x,y$ 必须是正整数，所以 $n$ 为 $1$ 时无解，需要特判。

当 $n$ 能被 $4$ 整除，先抛开 $n=0$ 的情况，考虑构造 $x+y=\frac{n}{2},x-y=2$。同样的方法，计算出 $x=\frac{\frac{n}{2}+2}{2}=\frac{n}{4}+1,y=\frac{\frac{n}{2}-2}{2}=\frac{n}{4}-1$。因为 $x,y$ 得是正整数，所以 $n=4$ 时无解。而当 $n=0$ 时，只需要 $x=y$ 即可，所以此时输出两个相等的数就行了。

综上，可以先判断 $n$ 是否为 $0$，为 $0$ 时输出两个相同的数；然后判断 $n$ 是否是 $1$ 或 $4$，如果是则无解；接下来判断 $n$ 是否是不能被 $4$ 整除的偶数，是则无解；最后判断 $n$ 是奇数还是偶数，然后输出相应的 $x,y$ 的解。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	ios::sync_with_stdio(false);
	long long n;cin>>n;
	if(n==0)cout<<"Yes\n114514 114514",exit(0);//n 为 0 的情况
	if(n==1||n==4)cout<<"No",exit(0);//n 为 1 或 4 的特殊情况
	if(n%4==2)cout<<"No",exit(0);//n 不是奇数也不是 4 的倍数的情况
	if(n%2)cout<<"Yes\n"<<(n+1)/2<<" "<<(n-1)/2;//n 是奇数的情况
	else cout<<"Yes\n"<<n/4+1<<" "<<n/4-1;//n 是 4 的倍数的情况
	return 0;
}
```

---

## 作者：WoodReal12 (赞：3)

数学题。
## 题目分析

由题可知 $(x + y)(x - y) = n$，可以得出：$x + y$ 与 $x - y$ 奇偶性相同。

于是，可以将 $n$ 的奇偶性进行划分：

+ $n$ 为奇数，

  当 $(x + y)$，$(x - y)$ 各为 $1$，$n$ 时成立。

+ $n$ 为偶数，$x = n / 2$，

  若 $x$ 为奇数为 `No`（无法划分成奇偶性相同的两块）；

  若 $x$ 为偶数则为 `Yes`。

**注意：**当 $n = 0, 1, 4$ 时需要特判！

## 代码

```cpp
#include <iostream>
using namespace std;

long long n;
signed main(){
    cin>>n;
    if(n==1||n==4){//特判
        cout<<"No"<<endl;
        return 0;
    }
    else if(n==0){//特判
        cout<<"Yes"<<endl;
        cout<<1<<' '<<1<<endl;
        return 0;
    }
    else if(n&1==1){//这里也要特判！！！
        cout<<"Yes"<<endl;
        cout<<(n+1)/2<<' '<<((n+1)/2-1)<<endl;
        return 0;
    }
    else{
        n/=2;
        if(n%2==0){
            long long x=(2+n)/2,y=x-2;
            cout<<"Yes"<<endl;
            cout<<x<<' '<<y<<endl;
        }
        else
        	cout<<"No"<<endl;
    }
    return 0;
}
```






---

## 作者：_little_Cabbage_ (赞：3)

# P9783 [ROIR 2020 Day1] 平方题解
这题还是比较水的。

首先我们要知道,两个数的平方差 $x^2-y^2$ 是可以变成 $(x+y)\times (x-y)$ 的,这就是平方差公式。

也就是说,题面中的 $x^2-y^2=n$ 可以变成 $(x+y)\times (x-y)=n^2$ 剩下的就好办了:

- 如果 $n$ 为奇数就拆成 $n\times m$。
- 否则 $x$ 就等于 $n/2$。
- 如果 $x$ 也为奇数那么就无解。
- 否则输出 $(x+2)/2$ and $(x-2)/2$。

注意要特判 $0$、$1$、$4$。

代码:
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	long long n;
	scanf("%lld",&n);
	if(n==0)
	{
	    printf("Yes\n1 1");
	}
	else if(n==1||n==4)
	{
	    printf("No");
	}
	else if(n%2==1)
	{
	    printf("Yes\n%lld %lld",(n+1)/2,(n-1)/2);
	}
	else
	{
		if((n/2)%2==1)
		{
		    printf("No");
		}
		else
		{
		    long long x=n/2;
			printf("Yes\n%lld %lld",(x+2)/2,(x-2)/2);
		}
	}
	return 0;
}
```


---

## 作者：AuZeb (赞：2)

### 思路
用数学解决这道题：

$$x^2-y^2=(x+y)\times(x-y)$$
$$x=\frac{(x+y)+(x-y)}{2}$$
$$y=\frac{(x+y)-(x-y)}{2}$$

要使 $x$、$y$ 为整数，$x+y$、$x-y$ 必须同为奇数或偶数。

当 $n=0$ 时，输出任意两个相等的数；

当 $n=1$ 或 $n=4$ 时，输出 `No`；

当 $n\bmod 2=1$ 时，输出 $\frac{n}{2}+1$ 和 $\frac{n}{2}$；

当 $n\bmod 4=0$ 时，输出 $\frac{n}{4}+1$ 和 $\frac{n}{4}-1$；

否则输出 `No`。

### 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	long long n;
	cin>>n;
	if(n==0) cout<<"Yes\n"<<6666<<" "<<6666;
	else if(n%2==1&&n!=1) cout<<"Yes\n"<<n/2+1<<" "<<n/2;
	else if(n%4==0&&n!=4) cout<<"Yes\n"<<n/4+1<<" "<<n/4-1;
	else cout<<"No";
	return 0;
}
```

---

## 作者：sherry_lover (赞：1)

# P9783[ROIR 2020 Day1] 平方 题解
### 本题考点：数学
### 建议难度：橙
我们先把 $x^2-y^2=n$ 这个式子分解一下，得：$(x+y)(x-y)=n$。

已知 $n$，求 $x$ 与 $y$ 的值。

### Step 1:

我们可以枚举 $n$ 的因数 **（包括1）**，设这个因数为 $i$，则 $x=\dfrac{i+\dfrac{n}{i}}{2}$，$y=x-i$，然后判断一下是否为整数。

复杂度 $O(\sqrt{n})$

代码：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long n,x,y;
int main()
{
	cin >> n;
	for(long long i = 1;i*i <= n;i++)
	{
		if(n%i==0&&(i+n/i)%2==0)
		{
			x = (i+n/i)/2;
			y = x-i;
			cout <<"YES\n" << x << " " << y;
			return 0;
		}
	}
	cout << "NO";
	return 0;
}

```
但我们发现，它只得了90pts，为什么呢？

![](https://cdn.luogu.com.cn/upload/image_hosting/8teoi2kt.png)

第一，当 $n$ 过于大且是输出 $NO$ 时，复杂度会爆。

第二，$x$ 与 $y$ 的范围我们还未判断，由题意可知，$x,y \in [1,2^{63}-1]$。

第三，当 $n = 0$ 时，上面的程序无法判断。

### Step 2:

现在我们来解决上面两个问题。

第二个问题很简单，只要判断一下就行了。

第三个问题特判一下，输出两个相等的数就行了。

第一个问题，很明显我们特判一下输出 $NO$ 的情况就可以了。

我们再看这个式子，发现 $x+y$ 和 $x-y$ 相差 $2y$，则 $x+y$ 和 $x-y$ 同奇偶。

那么如果 $2 \mid x+y$ ，则 $4 | (x+y)(x-y)$，根据这个性质判断一下即可。

代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
long long n,x,y;
int main()
{
    cin >> n;
    if(n % 2 == 0 && n % 4 != 0)
    {
        cout << "No";
        return 0;
    }
	if(n == 0)
	{
		cout << "Yes\n5 5";
		return 0;
	}
	for(long long i = 1;i*i <= n;i++)
	{
		if(n%i==0&&(i+n/i)%2==0)
		{
			x = (i+n/i)/2;
			y = x-i;
			if(y >= 1 && y <= 4611686018427387903 && x >= 1 && x <= 4611686018427387903)
			{
				cout <<"Yes\n" << x << " " << y;
				return 0;				
			}

		}
	}
	cout << "No";
	return 0;
}
```

---

## 作者：_O_v_O_ (赞：1)

水题。

首先 $x^2-y^2=n$ 可以利用平方差公式变成 $(x+y)\times(x-y)=n$。

我们能够证明，要使上面的式子成立，$(x+y)$ 和 $(x-y)$ 的奇偶性应该相同。

因此我们可以发现：当 $n$ 为奇数时，答案就为 $(n\div2+1)^2-(n\div2)^2$。

继续讨论偶数，我们发现，当 $n\bmod4=0$ 时，才能分成 $((2+n\div2)\div2)^2-((n\div2-2)\div2)^2$。否则无法分成两个奇偶性相同的数。

最后是特判，我们发现：当 $n=0$ 时，可以分成 $1^2-1^2$；当 $n=1$ 时，无解；当 $n=4$ 时，也无解。

代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
#define int long long

int n;

signed main(){
	ios::sync_with_stdio(0);
	cin.tie(nullptr);
	cin>>n;
	if(n==0) cout<<"Yes"<<endl<<1<<' '<<1;
	else if(n==1) cout<<"No";
	else if(n==4) cout<<"No";
	else if(n%2==0){
		if(n/2%2==1) cout<<"No";
		else cout<<"Yes"<<endl<<(2+n/2)/2<<' '<<(n/2-2)/2;
	}
	else cout<<"Yes"<<endl<<n/2+1<<' '<<n/2;
	return 0;
}
```


---

## 作者：FurippuWRY (赞：0)

根据平方差公式，对原式进行变式，得：$x^2-y^2=(x+y)(x-y)=n$。

考虑判断 $n$ 的奇偶性。

若 $n$ 为偶数，$x+y$ 和 $x-y$ 至少有一个式子为偶数，设 $x+y=2$，则 $x-y=\dfrac{n}{2}$，解方程得 $\begin{cases}x=\dfrac{n}{4}+1\\y=\dfrac{n}{4}-1\end{cases}$。容易发现，当 $n$ 不为 $4$ 的倍数时，$x$ 和 $y$ 不为整数，此时输出 `No`，否则输出 `Yes` 和 $x,y$。

若 $n$ 为奇数，则 $x+y$ 和 $x-y$ 一定为奇数，$x$ 和 $y$ 的奇偶性不同。设 $x-y=1,x+y=n$，这样 $(x+y)(x-y)$ 的值一定为 $n$。解方程，得 $\begin{cases}x=\dfrac{n+1}{2}\\y=\dfrac{n-1}{2}\end{cases}$。输出 `Yes` 和 $x,y$。

特判：当 $n=1$ 或 $4$ 时，原方程是无解的，输出 `No`；$n=0$ 时，$x$ 可以等于 $y$，输出 `Yes` 和任意两个相同的数。

```cpp
#include <bits/stdc++.h>

using namespace std;

long long n;

int main() {
	cin >> n;
	if (n == 1 || n == 4) {
		cout << "No";
		return 0;
	}
	if (!n) {
		cout << "Yes\n" << 1 << ' ' << 1;
		return 0;
	}
	if (!(n % 2)) {
		if (n % 4 != 0) {
			cout << "No";
		}
		else {
			cout << "Yes\n" << n / 4 + 1 << ' ' << n / 4 - 1;
		}
	}
	else {
		cout << "Yes\n" << (n + 1) / 2 << ' ' << (n - 1) / 2;
	}
	return 0;
}
```

---

## 作者：what_can_I_do (赞：0)

[传送门](https://www.luogu.com.cn/problem/P9783)

$x^2-y^2=(x+y)(x-y)=n$

令 $a=x+y,b=x-y$，则 $ab=n$。

根据小学数学可得 $2\times x=a+b$，$2\times y=a-b$。

因为 $x$ 和 $y$ 为正整数，所以 $a$ 与 $b$ 奇偶性相同。

若为全偶，则 $n$ 为 $4$ 的倍数。若为全奇，则 $n$ 为奇数。所以，当 $n$ 为 $2$ 的倍数且不为 $4$ 的倍数时，无解。

先考虑 $a$ 和 $b$ 全偶，则令 $a=n\div2$，$b=2$，然后求解。

接着是全奇的情况，令 $a=n$，$b=1$，然后求解。

注意当 $n=1$ 或 $n=4$ 时无解，$n=0$ 时输出两个相同的数。

# CODE:
```cpp
#include<bits/stdc++.h>
using namespace std;
long long n;
int main()
{
	scanf("%lld",&n);
	if(n==1||n==4){printf("No");return 0;}
	if(n==0){printf("Yes\n1 1");return 0;}
	if(n%4==2) printf("No");
	else if(n%2==1) printf("Yes\n%lld %lld",(n+1)/2,(n-1)/2);
	else printf("Yes\n%lld %lld",(n/2+2)/2,(n/2-2)/2);
	return 0;
}
```

---

## 作者：Vct14 (赞：0)

### 题目大意

给定 $n$，求一组 $x,y$ 满足 $x^2-y^2=n$。

### 思路

易知 $n=0$ 时，$x=y$ 即可。

若 $n>0$，即 $x\ne y$，则由平方差公式可得 $n=x^2-y^2=(x+y)(x-y)$，又 $x,y$ 为正整数，所以有解的 $n$ 最小为 $3\times1=3$。因此 $0<n<3$ 时无解。即 $n=1$ 或 $n=2$ 时无解。

对于 $n>3$ 的情况，因为 $x=\dfrac{(x+y)+(x-y)}{2}$，所以 $x+y$ 和 $x-y$ 必须同奇偶。若它们均为奇数，则 $n=(x+y)(x-y)$ 为奇数；若它们均为偶数，则 $n$ 为 $4$ 的倍数。因此我们分类讨论一下即可。

- $n$ 为奇数时，$x+y$ 和 $x-y$ 均为奇数。不难想到令 $\begin{cases}x+y=n\\x-y=1\end{cases}$ 即可。解得 $\begin{cases}x=\dfrac{n+1}{2}\\y=\dfrac{n-1}{2}\end{cases}$。
- $n$ 为 $4$ 的倍数时，$x+y$ 和 $x-y$ 均为偶数。设 $n=4m$，则 $m=\dfrac{n}{4}$。容易想到 $2\times 2m=n$，即令 $\begin{cases}x+y=2m\\x-y=2\end{cases}$。此时解得 $\begin{cases}x=\dfrac{2m+2}{2}=m+1\\y=\dfrac{2m-2}{2}=m-1\end{cases}$。将 $m=\dfrac{n}{4}$ 代入得 $\begin{cases}x=\dfrac{n}{4}+1\\y=\dfrac{n}{4}-1\end{cases}$。注意，若 $n=4$，那么求得 $y=0$ 不为正整数，此时无解。
- 若 $n$ 不符合以上两种情况，即 $n\bmod 4=2$，则无解。

综合一下可得：

- 若 $n=0$，则 $x=y$ 即可。
- 否则，若 $n=1$ 或 $n=4$，或者 $n\bmod4=2$ 无解。
- 否则，若 $n$ 为奇数，即 $n\bmod2=1$，则 $\begin{cases}x=\dfrac{n+1}{2}\\y=\dfrac{n-1}{2}\end{cases}$。
- 否则，若 $n$ 为 $4$ 的倍数，即 $n\bmod4=0$，则 $\begin{cases}x=\dfrac{n}{4}+1\\y=\dfrac{n}{4}-1\end{cases}$。

### 代码

```c++
#include<bits/stdc++.h>
using namespace std;

int main(){
	long long n;
	cin>>n;
	if(n==0) cout<<"Yes\n1 1";
	else if(n==1 || n==4 || n%4==2) cout<<"No";
	else if(n%2==1) cout<<"Yes\n"<<(n+1)/2<<" "<<(n-1)/2;
	else cout<<"Yes\n"<<n/4+1<<" "<<n/4-1;
	return 0;
}
```

---

## 作者：BugGod (赞：0)

首先根据平方差公式，将方程转化为 $(x+y)(x-y)=n$。显然的，若 $x-y=1,x+y=n$ 即可满足该方程。由于要求 $x,y\in \mathbb{N}^*$，所以当 $n$ 为奇数时，如果 $\frac{n-1}{2}$ 为 $0$，无解（即 $n=1$ 时）。否则答案为 $\frac{n+1}{2},\frac{n-1}{2}$。如果 $n$ 为偶数，由于 $x+y$ 与 $x-y$ 奇偶性相同，所以如果有满足要求的 $x,y$ 且 $n$ 为偶数，则 $x+y,x-y$ 都为偶数，即 $n$ 为 $4$ 的倍数（如 $n$ 不为 $4$ 的倍数，则无解），那么就有 $x-y=2,x+y=\frac{n}{2}$，解为 $y=\frac{n-4}{4},x=\frac{n+4}{4}$，注意 $0,1,2$ 的特殊情况。代码如下：

```cpp
#include<bits/stdc++.h>
using namespace std;
#define int long long
int n,x,y;
signed main()
{
    ios::sync_with_stdio(false);
    cin.tie(0);
    cout.tie(0);
    cin>>n;
    if(n%2==0&&n%4!=0)
    {
        cout<<"No";
        return 0;
    }
    if(n==2||n==1)
    {
        cout<<"No";
        return 0;
    }
    if(n==0)//n=0,两数相等即可
    {
        printf("Yes\n114514 114514");
        return 0;
    }
    if(n%2==0&&n/4+1>0&&n/4-1>0)printf("Yes\n%lld %lld",n/4+1,n/4-1);//注意要看解是否为正整数
    else if(n%2==0)printf("No");
    else if(n%2==1&&n/2>0&&n/2+1>0)printf("Yes\n%lld %lld",n/2+1,n/2);
    //else printf("No");
    return 0;
}
```

---

## 作者：SunnyLi (赞：0)

# 过程

显然发现，当 $n\bmod4=2$ 时，不存在这样的 $x,y$。否则拆分后一定是一个奇数乘以偶数，则必有一个数不是整数。

当 $n\bmod4=0$ 时，设 $n=2a\cdot 2b$，则有 $(x+y)(x-y)=2a\cdot2b\Rightarrow x=a+b,y=a-b$。

当 $n\bmod2=1$ 时，设 $n=2k+1$，则有 $x=k+1,y=k$。

# 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
    ios::sync_with_stdio(false);
    long long n;cin>>n;
    if(n==1 or n==4){cout<<"No";return 0;}
    if(n%4==2){cout<<"No";return 0;}
    cout<<"Yes"<<endl;
    if(n%4==0){
        n/=4;long long a=2;
        while(n%a!=0)   a++;
        cout<<(a+n/a)<<" "<<(abs(a-n/a));
    }
    else{
        long long a=(n-1)/2;
        cout<<(a+1)<<" "<<(a);
    }
    return 0;
}
```

---

## 作者：metrixgo (赞：0)

一道简单的数学题，但是坑多。

这题就是给一个非负整数 $n$，问你能否拆成两个**正整数**的平方差形式。若不能就输出 ```No```。

平方差公式相信大家都知道吧，就是：$x^2-y^2=(x+y)(x-y)$

那么就转化为将 $n$ 拆成两个数相乘，然后套进去就可以求得 $x,y$ 的值了。以下是推导：

设 $n=pq$，那么 $x+y=p,x-y=q$。两式相加，相减得到 $x=\frac{(p+q)}{2},y=\frac{(p-q)}{2}$

由于要求 $x,y\in\mathbb{Z}_+$ 所以 $(p+q),(p-q)$ 必须都为偶数。

我们看类似 $2k+1$ 的奇数，可以拆成$1\times(2k+1)$，那么此时 $x=k+1,y=k$。**但是，当 $k=0$ 时，$y=0$，不是正整数，所以 $1$ 不可以拆成两个正整数平方差。**

那么，偶数就不可以拆成两个数的平方差了吗？当然可以。首先，如果一个偶数 $2k$ 想要拆成两个数的乘积，相加相减都为偶数，那么这两个数必然为偶数，因为奇数乘奇数为奇数。所以这个偶数至少会被 $4$ 整除。所以类似于 $4k$ 的偶数可以拆解为 $2\times2k$，此时 $x=k+1,y=k-1$。**但是，当 $k=1$ 时，$y=0$，不是正整数，所以 $4$ 不可以拆成两个正整数平方差。**

那么，仅被 $2$ 整除的 $2k$ 不能拆了吗？好吧，有一个数：$0$。它可以变成任意的 $x^2-x^2$ 的形式。但是其他的数就不可以拆了，因为仅有一个 $2$ 的因数，只能拆为 $2\times k$，此时 $x=\frac{k+2}{2},y=\frac{k-2}{2}$。由于 $k$ 为奇数，所以 $k+2,k-2$ 为奇数，那么 $x,y$ 就不是正整数了，故不能拆为两个正整数平方差。

综上所述，我们推导出任何奇数或者是被 $4$ 整除的不为 $1,4$ 的自然数都能拆成两个正整数的平方差。特别的，当 $n=0$ 时，输出任意两个相等的正整数。

代码如下（记得开 $64$ 位整型）：
```cpp
#include<bits/stdc++.h>
using namespace std;
long long i,j,k,n;
int main()
{
    cin>>n;
	if(n%4==2||n==1||n==4) cout<<"No";
	else if(n==0) cout<<"Yes"<<endl<<"1145 1145";
	else if(n%4==0)cout<<"Yes"<<endl<<(n/2+2)/2<<" "<<(n/2-2)/2; 
	else cout<<"Yes"<<endl<<(n+1)/2<<" "<<(n-1)/2;
    return 0;
}
```

---

## 作者：UncleSam_Died (赞：0)

### 题目大意
给你一个整数 $n$，问你能否找到两个正整数 $x$ 和 $y$ 使得 $x^2-y^2=n$。

### 解题思路
首先，我们把以上式子分解一下，得到 $(x-y)\times(x+y)=n$，令 $c_1\times c_2=n$，得 $\begin{cases}x+y=c_1\\ x-y=c_2 \end{cases} \Rightarrow \begin{cases}x=\frac{c_1+c_2}{2}\\y=\frac{c_1-c_2}{2} \end{cases}(c_1>c_2)$，那么，该式子有解当且仅当 $(c_1+c_2)\bmod 2=0$，$(c_1-c_2)\bmod 2=0$。易得，$c_1$ 和 $c_2$ 奇偶性相同，即 $c_1$ 和 $c_2$ 同奇同偶。分以下两种情况讨论：
1. 当 $n$ 为奇数时，此时若 $n>1$ ，恒有解，其中一组关于 $c_1$、$c_2$ 的解为 $\begin{cases}c_1=1\\c_2=n\end{cases}$。
2. 当 $n$ 为偶数时，当且仅当 $n\bmod 4=0$ 且 $n>4$ 时有解，其中一组关于 $c_1$、$c_2$ 的解为 $\begin{cases}c_1=2\\c_2=\frac{n}{2}\end{cases}$。

综上所述，按照以上两种情况讨论即可，输出时分别输出 $\max( \frac{c_1+c_2}{2},\frac{\mid c_1-c_2\mid }{2})$ 和 $\min( \frac{c_1+c_2}{2},\frac{\mid c_1-c_2\mid }{2})$ 即可。

### AC 代码
```cpp
#include<math.h>
#include<stdio.h>
#define ll long long
#include<algorithm>
using namespace std;
ll n,c1,c2;
bool is=true;
int main(){
	scanf("%lld",&n);
	if(n==0){
		printf("Yes\n1 1");
		return 0;
	}
	if(n==1||n==4){
	    printf("No");
	    return 0;
	}
	if(n&1){
		puts("Yes");
		c1=1,c2=n;
	}else{
		if(n%4!=0) 
			puts("No"),
			is=false;
		else{
			puts("Yes");
			c1=2,c2=n/2;
		}
	}if(is)
		printf("%lld %lld",max((c1+c2)/2,abs(c1-c2)/2),min((c1+c2)/2,abs(c1-c2)/2));
}
```


---

## 作者：UniGravity (赞：0)

## Solution P9783 [ROIR 2020 Day1] 平方
~~又来水题解了~~
### 题意简述
给定非负整数 $n$，问是否有两个自然数 $x,y$，满足 $x,y\le2^{62}-1$ 且  $x^2-y^2=n$。

### 思路分析
转换一下题目，即求 $(x+y)(x-y)=n$，令 $a=x+y,b=x-y$，那么 $x=\frac{a+b}{2},y=\frac{a-b}{2}$。

题目就转化为了能否找到满足条件的 $a$ 和 $b$，使得 $a>b$ 且 $(a+b)\bmod2=0$。


------------

此时就可以分类讨论了：
* 若 $n\bmod2=1$，那么可以拆成 $n\times1$，此时 $x=\frac{n+1}{2},y=\frac{n-1}{2}$。
* 若 $n\bmod4=0$，可以拆成 $\frac{n}{2}\times2$，此时 $x=\frac{\frac{n}{2}+2}{2},y=\frac{\frac{n}{2}-2}{2}$。
* 否则 $a$ 和 $b$ 加起来一定无法满足要求，此时无解。

注意特判 $n=1$ 和 $n=4$ 的情况，这时 $a=b$，不满足条件。

### 完整代码
```cpp
#include <bits/stdc++.h>
using namespace std;

long long n;

int main() {
    scanf("%lld", &n);
    if (n == 0) printf("YES\n1 1");
    else if (n == 1 || n == 4) printf("NO");
    else if (n % 2 == 1) printf("YES\n%lld %lld", (n + 1) / 2, (n - 1) / 2);
    else if (n % 4 == 0) printf("YES\n%lld %lld", (n / 2 + 2) / 2, (n / 2 - 2) / 2);
    else printf("NO");
    return 0;
}
```

---

## 作者：zyn_ (赞：0)

# P9783 [ROIR 2020 Day1] 平方

## 题目大意

给定**非负整数** $n$，求两个正整数 $x,y$ 使 $x^2-y^2=n$，或报告无解。

## 题目分析

我们有：若 $x$ 为正整数，则 $x^2\equiv 0,1\pmod 4$。

因为 $1^2=1\equiv 1\pmod 4$，$2^2=4\equiv 0\pmod 4$，$3^2=9\equiv 1\pmod 4$，$4^2=16\equiv 0\pmod 4$。

于是 $x^2-y^2\equiv 0,1,3\pmod 4$。

所以，若 $n\equiv 2\pmod 4$，输出 `No` 即可。

若 $n\equiv 1\pmod 2$，设 $n=2k+1$，则由平方差公式，$n=k+(k+1)=(k+1)^2-k^2$。但是要保证 $k\ge 1$，$n\ge 3$。若 $n=1$，则无解。

若 $n\equiv 0\pmod 4$，设 $n=4k$，则 $n=2\times 2k=(k+1)^2-(k-1)^2$。但是要保证 $k-1\ge 1$，$k\ge 2$，$n\ge 8$。

若 $n=4$，则无解。若 $n=0$，则任意相等的 $x,y$ 均可。

实现时，先判断无解的情况，然后求出 $x,y$ 的和 $s$ 与差 $d$：$n$ 为奇数，和 $s=n$，差 $d=1$；$n$ 为正偶数，和 $s=\dfrac{n}{2}$，差 $d=2$；$n=0$，和 $s$ 为任意偶数，差 $d=0$。求出 $s,d$ 后，$x=\dfrac{s+d}{2}$，$y=\dfrac{s-d}{2}$。

## AC code:

```cpp
#include<bits/stdc++.h>
using namespace std;
long long n,s,d;
int main(){
    cin>>n;
    if(n==1||n==4||n%4==2)cout<<"No";
    else{
        cout<<"Yes"<<endl;
        if(n==0)s=114514,d=0;
        else if(n%2==1)s=n,d=1;
        else s=n/2,d=2;
        cout<<(s+d)/2<<" "<<(s-d)/2<<endl;
    }
    return 0;
}
```

---

## 作者：Milthm (赞：0)

首先发现 $x^2-y^2=(x+y)(x-y)$，然后考虑分类讨论。

如果 $n$ 是奇数，则考虑构造 $x+y=n,x-y=1$，解得 $x=\lfloor \frac{n}{2}\rfloor+1,y=\lfloor \frac{n}{2}\rfloor$。注意若 $n=1$ 这样构造不行，会使 $y=0$。

如果 $n$ 能被 $4$ 整除，则考虑构造 $x+y=\frac{n}{2},x-y=2$，解得 $x= \frac{n}{4}+1,y=\frac{n}{4}-1$。注意若 $n=4$ 这样构造不行，会使 $y=0$。

记得特判 $n=0$，随便输出两个一样的整数就行。

### AC code

```cpp
#include<iostream>
#define int long long
using namespace std;
int n;
signed main(){
	cin>>n;
	if(n==0){
		cout<<"Yes\n998244353 998244353";
	}
	else if(n%2&&n!=1){
		cout<<"Yes\n"<<n/2+1<<" "<<n/2;
	}
	else{
		if(n%4==0&&n!=4){
			cout<<"Yes\n"<<n/4+1<<" "<<n/4-1;
		}
		else cout<<"No";
	}
	
	return 0;
}

```


---

## 作者：哈哈人生 (赞：0)

## 题外话
简单的数论题，不过要注意一些特判。

## 思路
数论变换：$x^2-y^2=n$ 可以变成 $(x+y)(x-y)=n$，因为 $x$ 和 $y$ 都是正整数，所以 $(x+y)$ 和 $(x-y)$ 互为 $n$ 的对立因数（相乘得 $n$）。所以设 $a\times b=n$，则 $(x+y)=a$，$(x-y)=b$，解二元一次方程即可得到答案，时间复杂度是根号的。

**注意**：对答案要特判，因为题目限制的是 $x$ 和 $y$ 都是**正整数**，即不为 $0$ 和负数。

代码：
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n;
signed main() {
    cin>>n;
    for(int i=1;i*i<n;i++){//分解
    	if(n%i!=0)continue;
    	int a=i,b=n/i;
    	if((a+b)%2==0){//答案
    		cout<<"Yes\n";
    		cout<<(a+b)/2<<" "<<(b-a)/2;//消元法解二元一次方程
    		return 0;//只输出一个答案
		}
	}
	cout<<"No";
	return 0;
}
```
恭喜你，得了 $94$ 分：[rt](https://www.luogu.com.cn/record/131957288)。

我们还得接着优化：可以发现，分解的答案必须有两个因数相加为偶，我们分成三种情况讨论：
1. $n$ 为奇数：$1$ 和 $n$ 相加即可得偶。
2. $n$ 为偶数且能被 $4$ 整除：$2$ 和 $n\div 2$ 相加方可得偶。
2. 对于其他情况，可以证明没有解。

代码如下（还是要注意特判非正数）：
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n;
signed main() {
	cin>>n;
	if(n==0) {
		cout<<"Yes\n1 1";
	} else if(n==1||n==4) {
		cout<<"No";
	} else if(n%2==1) {
		cout<<"Yes\n"<<(n+1)/2<<" "<<(n-1)/2;
	} else if(n%4==0) {
		cout<<"Yes\n"<<(n/2+2)/2<<" "<<(n/2-2)/2;
	} else cout<<"No";
	return 0;
}
```
点个赞呗。

---


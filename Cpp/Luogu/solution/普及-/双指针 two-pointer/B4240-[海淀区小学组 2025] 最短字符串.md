# [海淀区小学组 2025] 最短字符串

## 题目背景

2025 年海淀区中小学生信息学竞赛小学组复赛题目，数据为洛谷自造。

## 题目描述

给定一个仅由大小写字母构成的长度为 $n$ 的字符串 $S$，求字符串 $S$ 的一个子串 $T$，使得字符串 $T$ 中包含字符串 $S$ 中所有种类的字母（区分大小写），输出子串 $T$ 的最小长度。例如，如果 $S = \tt{aabCce}$，则 $S$ 中包含的不同种类的字母有 $\tt a$，$\tt b$，$\tt C$，$\tt c$，$\tt e$，要子串中包含全部的这四类字母，则子串的索引区间为 $[2, 6]$，即 $S$ 中的第 $2$ 个字符到第 $6$ 个字符，即字符串 $\tt{abCce}$。

## 说明/提示

- 对于 $10\%$ 的数据，所有字符都不相同；
- 对于另外 $30\%$ 的数据，字符串 $S$ 中只包含两种类别的字符。
- 对于另外 $60\%$ 的数据，字符串的长度不会超过 $10^5$。

对于所有数据，字符串的长度不超过 $10^5$，且只包含大小写字母。

## 样例 #1

### 输入

```
3
AaA```

### 输出

```
2```

## 样例 #2

### 输入

```
7
bcAAcbc```

### 输出

```
3```

## 样例 #3

### 输入

```
6
aaBCCe```

### 输出

```
5```

# 题解

## 作者：chen_zhe (赞：4)

欢迎报名[洛谷网校](https://class.luogu.com.cn/)，期待和大家一起进步！

本题考察双指针、滑动窗口。

想象这么一个流程：我们使用两个变量 $l,r$ 来框选住一个区间 $[l,r]$，要求让 $[l,r]$ 框选住所有出现过的字母。为此，我们可以这样做：

- 首先让 $l=1$，$r$ 从 $1$ 开始不断往右扩展，记录下是否每种字母都出现过；
- 若已经每种字母都出现过了，则让 $l$ 往右移动，直到区间 $[l,r]$ 内的字母种类减少；
- 再向右扩展 $r$，直到每种字母都出现过，返回上一步；
- 直到当 $r=n$，$l$ 无法向右为止。

这样我们就动态地维护了含有所有种类字母的区间 $[l,r]$。选择其中区间长度最短的区间则为答案。

参考代码：

```
// 起初需要使用一重循环知道字符串中有多少种字母 tot，代码略。
for(R = 1; R <= n; R++){
    char c = S[R];
    freq[c]++; // 增加字符 c 的出现次数（纳入区间）
    if(freq[c] == 1)
        cnt++; // 种类数增加
    // 当区间内包含所有种类时，尝试缩小区间
    while(cnt == tot && L <= R){
        if(R - L + 1 < ans) // 更新答案
            ans = R - L + 1;
        char d = S[L];
        freq[d]--; // 减少字符 d 的出现次数（移出区间）
        if(freq[d] == 0)
            cnt--; // 种类数减少
        L++;
    }
}
```

---


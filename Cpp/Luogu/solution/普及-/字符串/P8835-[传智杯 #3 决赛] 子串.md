# [传智杯 #3 决赛] 子串

## 题目背景

disangan233 喜欢字符串，于是 disangan333 想让你找一些 disangan233 喜欢的串。

## 题目描述

在传智的开发课堂上，希望您开发一款文档处理软件。

给定 $T$ 组询问，每次给定 $2$ 个长度为 $n,m$ 的只含英文字母的字符串 $a,b$，求 $a$ 在 $b$ 中的出现次数，相同字符不区分大小写。注意 $a$ 是 $b$ 中连续子序列。

对于所有数据，$T\leq 100$，$\sum n\leq \sum m\leq 10^3$。字符串仅由大写或者小写的英文字母组成。

## 说明/提示

对于第一组输入，出现了 $3$ 次，分别是 `[abc]abcabca`，`abc[abc]abca`，`abcabc[abc]a`；

对于第二组输入，出现了 $9$ 次，分别是 `[Aa]AaaAaAa`，`A[aA]aaAaAa`，`Aa[Aa]aAaAa`，`AaA[aa]AaAa`，`AaAa[aA]aAa`，`AaAaa[Aa]Aa`，`AaAaaA[aA]a`，`AaAaaA[aA]a`，`AaAaaAa[Aa]`。

## 样例 #1

### 输入

```
5
3 10
abc
abcabcabca
2 10
aa
AAaAaaAaAa
5 5
AbCdE
eDcBa
5 5
abcde
ABCDE
3 10
aba
ABaBaAbaBA```

### 输出

```
3
9
0
1
4```

# 题解

## 作者：Milthm (赞：7)

## P8835 题解

让我们看看这题，然后我们敏锐的察觉到这里有一个“**相同字符不区分大小写**”，那好我们先转换：

```cpp

string b_sm(string s){//大写转小写，反过来也可以
    int l=s.size();
    for(int i=0;i<l;i++){
        if(s[i]>='A'&&s[i]<='Z')s[i]+=32;//如果是大写字母就转换为小写
    }
    return s;//返回处理好的字符串
}

```



接下来是最关键的**判断子串**了，接下来给大家介绍一个函数：

```cpp
s.substr(start,num);
```

这个函数的作用是从 $start$ 开始截取 $num$ 个字符。用它我们就可以轻松的判断子串啦！

那么附上完整代码：
```cpp
#include<iostream>
using namespace std;
int t,n,m,ans;
string b_sm(string s){//刚才的函数
    int l=s.size();
    for(int i=0;i<l;i++){
        if(s[i]>='A'&&s[i]<='Z')s[i]+=32;
    }
    return s;
}
string s1,s2;//题目中的A和B
int main(){
    cin>>t;
    while(t--){
        ans=0;
        cin>>n>>m>>s1>>s2;//输入
        s1=b_sm(s1);s2=b_sm(s2);
        int l2=s2.size(),l1=s1.size();
        for(int i=0;i<l2;i++){
            if(s2.substr(i,l1)==s1)ans++;//截取，如果是就把答案增加
        }
        cout<<ans<<endl;//输出答案
    }
    return 0;
}
```



---

## 作者：Vibration886 (赞：3)

### [P8835 [传智杯 #3 决赛] 子串](https://www.luogu.com.cn/problem/P8835)

本题解将不会使用 ```string.h``` 中的 ```find()``` 函数。~~（因为不会）~~

## 题意

给定 $T$ 组询问，每次给定 $2$ 个长度为 $n,m$ 的只含英文字母的字符串 $a,b$，求 $a$ 在 $b$ 中的出现次数，相同字符不区分大小写。注意 $a$ 是 $b$ 中连续子序列。

## 数据范围

对于所有数据，$T\leq 100$，$\sum n\leq \sum m\leq 10^3$。字符串仅由大小或者小写的英文字母组成。

## 思路

既然不考虑大小写，我们可以先将 $a,b$ 两个字符串转换为全部小写的状态再进行查找。这里使用的是 ```ctype.h``` 中的 ```tolower()``` 函数。

接下来便是查找。

在字符串 $b$ 中以 $n$ 个字母为单位遍历一遍，每次范围变化时创建一个临时空串 $t$，将范围内的字母加入 $t$ 中，最后与要查找的字符串 $a$ 比较，若相同，计数器加 $1$。

## AC代码

```cpp
#include <bits/stdc++.h>
using namespace std; 
int main()
{
	ios::sync_with_stdio(false);
	int T;
	cin>>T;
	while(T--)
	{
		int n,m,cnt=0;
		cin>>n>>m;
		string a,b;
		cin>>a>>b;
		for(int i=0;i<n;i++)
		{
			a[i]=tolower(a[i]);
		}
		for(int i=0;i<m;i++)
		{
			b[i]=tolower(b[i]);
		}
	    for(int i=0;i<m-n+1;i++)//m-n+1：防止超过字符串本身（虽然没什么大用） 
	    {
	    	string t="";
			for(int j=i;j<n+i;j++)
			{
				t+=b[j];
			}
			if(a==t)
			{
				cnt++;
			}
		}
		cout<<cnt<<endl;
	}
    return 0;
}
```


---

## 作者：WA_sir (赞：1)

## [题目链接](https://www.luogu.com.cn/problem/P8835)

对于每一次询问，由于是连续子序列，可以直接一层循环枚举每个要与 $a$ 比较的 $b$ 的子序列的开始下标。为了减少循环以及避免一些~~神奇~~无法察觉的错误，要注意枚举时子序列结束的下标位置有没有出界。

这题还有一个坑，就是小写字母和大写字母是视作相同的字母的！当然，我们有多种办法来解决这个问题。可以在判断单个字符是否相等时先求差的绝对值，再 $\bmod32$。因为两个字符“相等”时只有四种情况：小写，小写；小写，大写；大写，小写；大写，大写。它们的差绝对值分别为： $0$，$32$，$32$，$0$。这时，只要 $\bmod32$，四种情况得到的结果就都为 $0$ 了。

## 参考代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int t,n,m;
char a[1005],b[1005];
int main()
{
	scanf("%d",&t);
	while(t--)
	{
		int ans=0;
		scanf("%d%d%s%s",&n,&m,a,b);
		for(int i=0;i<m-n+1;i++)
		{
			bool f=true;
			for(int j=0;j<n;j++)
				if(abs(a[j]-b[i+j])%32)
				{
					f=false;
					break;
				}
			if(f)ans++;
		}
		printf("%d\n",ans);
	}
	return 0;
}
```
感谢阅读 (～￣▽￣)～！

---


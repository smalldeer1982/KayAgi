# [语言月赛 202406] 数组交换

## 题目描述

小 B 有一个 $n$ 行 $m$ 列的数组 $a$，现在它要操作 $q$ 次，每次的内容如下：

- $\textbf{1 x y}$，交换第 $x$ 行和第 $y$ 行，若 $x = y$ 则表示不交换。
- $\textbf{2 x y}$，交换第 $x$ 列和第 $y$ 列，若 $x = y$ 则表示不交换。
- $\textbf{3 x y}$，查询当前 $a_{x, y}$ 的值。

对于每个操作 $3$，你需要回答。在所有操作结束后，你还需要输出最终的数组 $a$。你快告诉小 B 这些内容吧！

## 说明/提示

### 数据规模与约定

对于 $20\%$ 的数据，$1 \leq n, m, q \le 100$。  
对于另外 $20\%$ 的数据，没有操作 $1$。  
对于另外 $20\%$ 的数据，没有操作 $2$。  
对于另外 $20\%$ 的数据，没有操作 $3$。  
对于 $100\%$ 的数据，$1 \leq n, m \leq 10^3$，$1 \leq q \leq 10^5$，$0 \leq a_{i, j} \leq 9$。


## 样例 #1

### 输入

```
5 5 10
01010
10010
01110
00011
00101
1 2 4
2 3 5
3 2 3
1 3 5
2 1 4
3 5 3
1 4 5
2 5 2
2 3 4
1 2 4
```

### 输出

```
1
0
10001
11001
01010
10010
10100
```

# 题解

## 作者：Maxmilite (赞：6)

## Source & Knowledge

2024 年 6 月语言月赛，由洛谷网校入门计划/基础计划提供。

## 题目大意

给定一个 $n$ 行 $m$ 列的数组 $a$。操作 $q$ 次，每次交换某两行或某两列，并随时会查询数组中某个位置的值。
	
## 题目分析

本题考察点有两个，第一个是如何**仅读入一位整数**，第二个是思维能力。

首先对于题目的输入，对于 $a$ 数组，如果按照下面的方式来编写：

```cpp
int a[1005][1005];
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= m; j++) {
        cin >> a[i][j];
    }
}
```

那么会导致答案错误。原因是，默认情况下，`cin` 会将一行不带空格的数按照一个整数来处理。

对于本题而言，一种处理方法是，使用一个 `char` 来代替读入 $a_{i, j}$，再做转换：

```cpp
int n, m, q;
int a[1005][1005];
cin >> n >> m >> q;
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= m; j++) {
        char c;
        cin >> c;
        a[i][j] = c - '0';
    }
}
```

其次，对于题目的任务。如果每一次交换操作都去交换两行、两列中的所有元素，那么会导致时间复杂度 $O(qN)$（$N = \max(n, m)$）。虽然不会超时，但又更好的办法。

考虑使用两个数组 $r, c$。其中 $r_i$ 代表当前第 $i$ 行存放的是原来第几行的数据，$c_i$ 代表当前第 $i$ 列存放的是原来第几列的数据。初始时 $r_i = c_i = i$。

这样，在每次交换时，不去交换 $a$ 数组，而仅仅是对 $r$ 或 $c$ 做交换，即可避免超时。在中途和最终输出时，输出 $a_{r_i, c_i}$ 即可。

```cpp
for (int i = 0; i < q; i++) {
    int op, x, y;
    cin >> op >> x >> y;
    if (op == 1) {
        swap(r[x], r[y]);
    } else if (op == 2) {
        swap(c[x], c[y]);
    } else {
        cout << a[r[x]][c[y]] << endl;
    }
}
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= m; j++) {
        cout << a[r[i]][c[j]];
    }
    cout << endl;
}
```

## 视频讲解

![](bilibili:BV19E421P7KQ?page=8)

---


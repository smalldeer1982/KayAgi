# [蓝桥杯 2025 省 A 第二场] 双子星的讯息

## 题目描述

在夜空下，双子星闪烁，据说它们藏着宇宙的秘密。天文学家小蓝守着古朴的望远镜，翻开一本泛黄的星图。图上标注了两串数字：$20255202$ 和 $10244201$。旁边的笔记写道：若有一正整数 $n$，使 $n + 20255202$ 与 $n + 10244201$ 均为完全平方数，便能解锁双子星的讯息。小蓝点亮油灯，决心追寻答案。

完全平方数指一个整数可以表示为某个整数的平方。例如，$1 = 1^2$、$4 = 2^2$、$9 = 3^2$ 等都是完全平方数。具体地，如果一个整数 $k$ 满足 $k = m^2$（其中 $m$ 是整数），那么 $k$ 就是一个完全平方数。

现在，请你帮小蓝求出符合条件的正整数 $n$ 的个数。

# 题解

## 作者：Aveiro7 (赞：4)

### 题目大意

找到所有满足 $n+20255202$ 与 $n+10244201$ 均为完全平方数的 $n$ 的个数。

### 解题思路

题目条件可以等价于存在整数 $a$ 和 $b$ 使得：

$$ \begin{cases}
n+20255202=a^2\\
n+10244201=b^2
\end{cases}$$

在上面的两个等式中，我们可以消去 $n$，得到：

$$ a^2-b^2=(a+b)(a-b)=20255202-10244201=10011001$$
 
接下来，我们就要找出 ``10011001`` 的所有因数对 $(d,\frac{10011001}{d})$，其中 $d<\frac{10011001}{d}$。

### 第一种方法

对 ``10011001`` 分解质因数后我们可以得到满足条件的因数对:

$$(1,10011001)$$
$$(7,1430143)$$
$$(11,910091)$$
$$(13,770077)$$
$$(73,137137)$$
$$(77,130013)$$
$$(91,110011)$$
$$(137,73073)$$
$$(143,70007)$$
$$(511,19591)$$
$$(803,12467)$$
$$(949,10549)$$
$$(1001,10001)$$
$$(1507,6643)$$
$$(1781,5621)$$
$$(2849,3514)$$

后面的解不满足 $d<\frac{10011001}{d}$，所以到此为止。

又因为 $n=a^2-20255202$，且 $n
$ 为正整数，所以 $a^2>20255202$，又 $\sqrt{20255202} \approx 4500.577$，解得 $a\ge 4501$。

所以我们遍历所有因数对，计算 $a$ 和 $b$，然后检查 $a\ge 4501$ 即可。最后解得有 ``14`` 个满足题意的 $n$。

### 第二种方法

上文提到有：

$$ a^2-b^2=(a+b)(a-b)=20255202-10244201=10011001$$

所以令 $d=a-b$，$D=a+b$，则 $d\times D=10011001$，即 $D=\frac{10011001}{d}$，并且 $d<D$，且 $d$ 和 $D$ 同奇偶（因为 $a$ 与 $b$ 均为整数）。

因为 $n=a^2-20255202$，且 $n
$ 为正整数，所以 $a^2>20255202$，又 $\sqrt{20255202} \approx 4500.577$，因而 $a\ge 4501$。

又 $n=b^2-10244201$，且 $n
$ 为正整数，所以 $b^2>10244201$，又 $\sqrt{10244201} \approx 3200.656$，解得 $b\ge 3201$。

又由 $a=\frac{d+D}{2}\ge 4501$，得：

$$ d+D\ge 9002$$

由 $b=\frac{D-d}{2}\ge 3201$，得：

$$ D-d\ge 3201$$ 

所以才可得：

$$\begin{cases}
d+\frac{10011001}{d}\ge 9002 \\
\frac{10011001}{d} -d \ge 6402
\end{cases}$$

解得 $d\le 1299$，之后我们枚举 ``10011001`` 小于 ``1299`` 的因数个数即可，最终解得有 ``14`` 个满足题意的 $n$。

---

## 作者：CommonDigger (赞：3)

问题是找到所有的 $n$，满足 $n+20255202$ 与 $n+10244201$ 均为完全平方数。

$\sqrt{20255202}\approx4500.5$，可以从 $4501$ 开始枚举 $n+20255202$ 的所有平方值，再判断此时另一边是否为平方数。

由于相邻两个完全平方数之间的间隔逐渐增大，而题目中的两个完全平方数差是一定的，所以 $n$ 会有一个最大值。接下来求解这个最大值。

这两个完全平方数的差为 $(n+20255202)-(n+10244201)=10011001$。设两个数开方后为 $a$，$b$。

则：$a^2-b^2=10011001$，由平方差公式得：$(a+b)(a-b)=10011001$。

设 $x=a+b$，$y=a-b$，则 $xy=10011001$，$a=\frac{x+y}{2}$。

所以问题转换为：$xy=10011001$，求 $\frac{x+y}{2}$ 的最大值。然后就简单了，根据数学原理，当两个正整数的乘积固定时，它们的和的最大值出现在两数差距最大的情况下。因此当 $y=1$ 时，$x=10011001$，此时 $\frac{x+y}{2}=\frac{10011001+1}{2}=5055501$，即要求的 $a$ 的最大值，在 $1\times10^7$ 范围内。

所以在 $1\times10^7$ 范围内枚举所有的 $a$ 即可找到所有答案，共 $14$ 个。

```cpp
#include <iostream>
#include <cmath>
#define int long long
using namespace std;
int ans=0;
bool check(int x)
{
	int t=sqrt(x);
	return t*t==x;
}
signed main(){
	for(int i=4500;i<=1e8;i++)
		if(check(i*i-20255202+10244201))
			ans++;
	cout << ans;
}
```

---

## 作者：luogu_gza (赞：1)

考虑枚举 $\sqrt{n+20255202}$，然后判定 $n+10244201$ 是不是平方数即可。

```
bool check(int x)
{
  int n=sqrt(x);
  while((n+1)*(n+1)<=x) n++;
  while((n-1)*(n-1)>=x) n--;
  return n*n==x;
}
void main(){
  int ans=0;
  fo(i,1,5e8) if(i*i-20255202>0) if(check(i*i-20255202+10244201)) ans++;
  write(ans);
}
```

---


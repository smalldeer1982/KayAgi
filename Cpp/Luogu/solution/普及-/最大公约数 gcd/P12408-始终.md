# 始终

## 题目背景

### 本题有 SPJ。

> 以我为始，以我为终。

## 题目描述

给定一个 $n(n\ge2)$，要求构造一个序列 $\{a_1,a_2,a_3,\cdots,a_n\}$ 满足：

- 长度为 $n$；

- $1\le a_i\le 10^6$；

- $i\in[1,n),a_i\not=a_{i+1}$；

- $\displaystyle\operatorname{lcm}^n_{i=1}a_i=\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$；
- $\displaystyle\operatorname{lcm}^n_{i=1}a_i\le10^6$。

若无解则输出 ```-1```。

$\displaystyle\operatorname{lcm}^n_{i=1}a_i$ 是指数列 $\{a_1,a_2,a_3,\cdots,a_n\}$ 的最小公倍数。

## 说明/提示

数据范围：

| Subtask | $n$ | 分数 |
| :----------: | :----------: | :----------: |
| $0$ | $=2$ | $5$ |
| $1$ | $\le3$ | $10$ |
| $2$ | $\le10$ | $10$ |
| $3$ | $\le10^6$ | $75$ |


## 样例 #1

### 输入

```
2```

### 输出

```
-1```

## 样例 #2

### 输入

```
4```

### 输出

```
4 10 6 1```

# 题解

## 作者：___TwT___ (赞：9)

## 思路：
手玩一下，可以发现这个数组符合所有要求：
> $1,3,6,3,6,3\dots$

把这个数组输出即可。\
可以发现，前三个要求直接符合，然后可以算一下差，发现差和正常数组的最小公倍数都是 $6$，于是后两个条件也就满足啦，这个数组只要手玩一下就出来了。
## code:

```cpp
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;

int main(){
	int n;
	cin>>n;
	if(n<=2){
		cout<<-1;
		return 0;
	}
	cout<<"1 3 6";
	for(int i=4;i<=n;i++){
		if(i%2==0) cout<<" 3";
		else cout<<" 6";
	}
	return 0;
}
```

---

## 作者：zzy_zzy (赞：3)

### 前言
感觉这次公开赛时间给的太短了，T2 暴力没打完。
### 正解
通过样例可以得出，$n=2$ 时无解。考虑构造 $n=3$。

为了不让构造那么复杂，不妨令 $a_1=1$。如果令 $a_2=2$，你会发现 $a_3$ 不好构造，于是令 $a_2=3$，发现此时 $a_3=6$ 是可行的。

考虑让 $n=3$ 的答案扩展到任意情况。这也是简单的，只要一直往后面交替放 $3$ 与 $6$ 就可以了。
### AC code：
```cpp
#include<bits/stdc++.h>
using namespace std;

int main(){
    int n;
    cin>>n;
    if(n==2){
        cout<<-1;
        return 0;
    }
    cout<<"1 3 6 ";
    for(int i=4;i<=n;i++){
        if(i%2==0)cout<<"3 ";
        else cout<<"6 ";
    }
    return 0;
}
```

---

## 作者：lcycl (赞：2)

## 思路
首先，我们要知道什么情况无解。当 $n=2$ 时，无论如何都不可能构造出符合题意的序列，故无解。  

我们发现，当序列由 $x$ 和 $y$ 交替组成，且 $y$ 为 $x$ 的倍数时，$\displaystyle\operatorname{lcm}^n_{i=1}a_i=y$，$\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|=x$，于是，我们只需要将满足 $z \bmod y=0$ 和 $|x-z|\times x=y$ 的值 $z$ 放在第一位就行了。  

通过枚举，可以知道 $x=3$，$y=6$，$z=1$ 是满足以上需求的，于是我们先输出 $1$，再交替输出 $3$ 和 $6$ 就可以 AC 本题。

## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
    int n;
    cin>>n;
    if(n==2){
    	cout<<-1;
    	return 0;
	}
    cout<<"1 ";
    for(int i=2;i<=n;i++){
    	if(i%2==0) cout<<"3 ";
        else cout<<"6 ";
	}
    return 0;
}
```
[记录](https://www.luogu.com.cn/record/215905768)

---

## 作者：封禁用户 (赞：1)

简单构造。

$n=2$ 显然不存在一组数 $a$ 和 $b$ 使得 $\operatorname{lcm}(a,b)=\lvert a-b\rvert$。

$n=3$ 时 $1,3,6$ 是一组解，其差分绝对值序列是 $2,3$，两个序列的 $\operatorname{lcm}$ 都是 $6$。

考虑 $n>3$。注意到在序列末尾插入一个已经在序列中的数，序列的 $\operatorname{lcm}$ 不变。因此可以在 $1,3,6$ 后面交替插入 $3$ 和 $6$，得到序列 $1,3,6,3,6,\ldots$，其差分绝对值序列是 $2,3,3,3,\ldots$，$\operatorname{lcm}$ 都是 $6$。

时间复杂度 $O(n)$。

```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
    int n;
    cin>>n;
    if(n==2)cout<<-1;
    else{
        cout<<"1 3 6 ";
        for(int i=4;i<=n;i++){
            if(i%2)cout<<"6 ";
            else cout<<"3 ";
        }
    }
}
```

---

## 作者：xuchuhan (赞：1)

奇妙构造题，刚点开还以为很困难。讲一下赛时做法。

首先特判当 $n=2$ 时无法构造，输出 `-1`。

然后先考虑前 $3$ 个，要求 $\text{lcm}(a_1,a_2,a_3)=\text{lcm}(|a_1-a_2|,|a_2-a_3|)$，自己手模几组发现 $a_1=5,a_2=15,a_3=30$ 是一个合法的解。（后面才发现更简洁的解可以是 $a_1=1,a_2=3,a_3=6$，不过不重要了。）然后后面几位的构造就变得简单了，直接 $15,30,15,30,\dots$ 循环即可。

总的来说，一组合法的构造可以是 $5,15,30,15,30,15,30,\dots$，当然简化一点可以是 $1,3,6,3,6,3,6,\dots$。

放一下赛时代码：

```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int n;
signed main(){
	cin>>n;
	if(n<=2)cout<<"-1";
	else{
		cout<<"5 15 30 ";
		for(int i=1;i<=n-3;i++)
			if(i&1)cout<<"15 ";
			else cout<<"30 ";
	}
	return 0;
}
```

---

## 作者：qwqerty (赞：1)

枚举找出 $n=3$ 时的构造方式，根据 $\operatorname{lcm}(n, n)=n$，将最后两个数循环输出即可。注意特判 $n=2$ 时的情况。  
给出两种奇特的构造方式：
- $\dfrac{3}{22}$ 取小数点后 $n$ 位。
  
- $\dfrac{125}{198}$ 取小数点后 $n$ 位。

---

## 作者：Vct14 (赞：1)

若 $n=2$，不妨设 $a_1>a_2$，则 $a_1\le\operatorname{lcm}\{a_1,a_2\}=a_1-a_2<a_1$。矛盾。无解。

若 $n\ne2$，设 $k=\displaystyle\operatorname{lcm}^n_{i=1}a_i=\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$。

不妨设 $a_2>a_1$，则 $a_1,a_2,a_2-a_1$ 都是 $k$ 的因数。可以想到构造 $a_1=1,a_2=3$。那么 $k$ 是 $6$ 的倍数。考虑直接使 $k=6$。但是此时 $\operatorname{lcm}\{a_1,a_2\}=3$，于是考虑构造 $a_3=6$。此时 $\operatorname{lcm}\{a_2-a_1,a_3-a_2\}$ 也恰好为 $6$。也就是说，$\{1,3,6\}$ 是一组符合要求的解。

于是不断正反重复 $1,3,6$，即构造 $1,3,6,3,1,3,6,3\cdots$ 即可。

```cpp
#include<bits/stdc++.h>
using namespace std;

int main(){
	int n;cin>>n;
    if(n==2) cout<<"-1";
    else{
        cout<<"1 ";
        for(int i=2; i<=n; i++){
            if(!(i%2)) cout<<"3 ";
            else cout<<"6 ";
        }
    }
	return 0;
}
```

---

## 作者：CCY20130127 (赞：0)

## 题目大意：
[始终](https://www.luogu.com.cn/problem/P12408)

上方为题目传送门，请自行查看。

## 题目分析：
枚举可得，只要以上序列重复输出，就能对了：
$$1,3,6,3,6 \dots$$

可以发现，前三个要求直接符合，后面的绝对值的差分数组为 $2,3,3 \dots$，最小公倍数也是 $6$，符合题意。

## 正解：

```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
int main(){
	cin>>n;
	if(n==2) return cout<<"-1",0;
	cout<<"1 ";
	for(int i=2;i<=n;i++){
		if(i%2==0) cout<<"3 ";
		else cout<<"6 ";
	}
	return 0;
}
```

---

## 作者：M1__ (赞：0)

# 题解：P12408 始终

[Link](https://www.luogu.com.cn/problem/P12408)

- 构造。
- 考虑 $n=2$ 的情况。显然这种情况不能同时满足 $i\in[1,n),a_i\not=a_{i+1}$ 和 $\displaystyle\operatorname{lcm}^n_{i=1}a_i=\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$。所以无解。
- 考虑 $n=3$ 的情况。我们将 $f(i)$ 记作 $|a_{i+1}-a_{i}|$，因为要让数列中的每一项尽量小（这样才能更快的找到构造方法），所以令 $L=\displaystyle\operatorname{lcm}^n_{i=1}a_i=\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|=6$，则 $f(1)=1,f(2)=2$ 或 $f(1)=2,f(2)=3$。这样可以让 $L$ 的两对因数分别出现在构造出的数列和构造后求差的数列中。但 $f(1)=1,f(2)=2$ 显然不符合，$f(1)=2,f(2)=3$ 则符合。此时 $a_1=1,a_2=3,a_3=6$，符合 $\displaystyle\operatorname{lcm}^n_{i=1}a_i=\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$。
- 同理可以推广到 $n >3$ 的情况。只需让 $f(i)=3$ 即可。此时 $i \ge 2$。


```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N=1e6+10;
ll n,a[N]={0};
int main(){
    cin>>n;
    if(n==2){ cout<<-1; return 0;}
    a[1]=1;
    for(int i=2;i<=n;i+=2) a[i]=3;
    for(int i=3;i<=n;i+=2) a[i]=6;
    for(int i=1;i<=n;i++)  cout<<a[i]<<" ";    
    return 0;
}

```

---

## 作者：e_zhe (赞：0)

本题题意非常清楚，在此不赘述了。

### 思路分析

当 $n = 2$ 时，设序列为 $\{a_1,a_2\}$，则应使 $\text{lcm}(a_1,a_2)=\text{lcm}(|a_1 - a_2|)$。由于 $a_1\neq a_2$ 且 $1\leq a_i\leq10^6$，经过分析发现不存在满足条件的 $a_1$ 和 $a_2$，所以输出 `-1`。样例也体现了这个结论。

题目背景中“以我为始，以我为终”提示答案或许与循环有关。事实也确实如此。

在较小的正整数中，$12$ 的因数较多。可以尝试构造最小公倍数为 $12$ 的解。经过尝试，发现 $\{2,6,12,6\}$ 符合要求。循环输出此序列即可。

### Code

```cpp
#include<bits/stdc++.h>

using namespace std;

constexpr int num[]={2,6,12,6};

int main(){
	ios::sync_with_stdio(false),
	cin.tie(nullptr),cout.tie(nullptr);
	
	int n;cin>>n;
	
	if(n==2)cout<<"-1";
	else for(int i=1;i<=n;++i)cout<<num[i&3]<<' '; //i & 3 == i % 4
	return 0;
}
```

---

## 作者：Invisible_H (赞：0)

## P12408 始终

### Problem
给定一个 $n(n\ge2)$，要求构造一个序列 $\{a_1,a_2,a_3,\cdots,a_n\}$ 满足：

- 长度为 $n$；

- $1\le a_i\le 10^6$；

- $i\in[1,n),a_i\not=a_{i+1}$；

- $\displaystyle\operatorname{lcm}^n_{i=1}a_i=\displaystyle\operatorname{lcm}^{n-1}_{i=1}|a_{i+1}-a_{i}|$；
- $\displaystyle\operatorname{lcm}^n_{i=1}a_i\le10^6$。

### Solution

看到大小限制，不难想到构造出的序列是两个数重复组成的，为了方便构造令第一个数为 $1$，后面为 $x,y$ 重复，假定 $y$ 比 $x$ 大并且 $y$ 是 $x$ 的倍数，那么题目就变成了找出 $x,y$，使得：

$$(x-1) \times (y-x) = y$$

化简得到：

$$y=\frac{x^2-x}{x-2}$$

一个方程两个未知数，有很多组解，注意还要满足上面的 $y$ 是 $x$ 的倍数，但是似乎画出函数图像后只能观察到 $3,6$ 是对的。

然后就构造完了。

### Code


```cpp
inline void solve() {
	Fastio::cin >> n;
	if(n == 2){
		Fastio::cout << -1 << '\n';
		return;
	} 
	Fastio::cout << 1 << ' ';
	for(int i = 1; i <= ((n - 1) >> 1); i++){
		Fastio::cout << 3 << ' ' << 6 << ' ';
	}
	if(!(n & 1)){
		Fastio::cout << 3 << ' ';
	}
}
```

---


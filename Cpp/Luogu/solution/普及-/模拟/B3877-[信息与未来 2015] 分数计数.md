# [信息与未来 2015] 分数计数

## 题目描述

有 $n$ 个球队，编号为 $1\sim n$，共进行 $n$ 场比赛，每场比赛有一个胜队。计分方法如下：
- 是连胜中的第一次胜利，则本次胜利得 $1$ 分。
- 是连胜中的第二次胜利，则本次胜利得 $2$ 分。
- 是连胜中的第三次胜利，则本次胜利得 $3$ 分。
- 连胜超过三次以上的胜场，每场得 $3$ 分。

例如 $n=12$，比赛的胜队为 $1,2,1,1,3,2,1,1,1,1,4,2$，计分如下：
- 队 $1$：$1+1+2+1+2+3+3=13$ 分；
- 队 $2$：$1+1+1=3$ 分；
- 队 $3\sim 4$：$1$ 分。
- 队 $5\sim 12$：$0$ 分。

求得分最多的队伍的分数。

## 说明/提示

$1\le x_1\le n\le10^6$。

## 样例 #1

### 输入

```
10 5```

### 输出

```
3```

# 题解

## 作者：Dragon_JL (赞：2)

**一道比较入门的模拟题**  
~~终于轮到我水一下题解了awa~~


---

这道题其实已经将具体的思路在题面上告诉你了。我们只需要按照题目给出的公式：  
$x_i = ((x_{i-1}\times 3703+1047) \bmod n)+1$  
求出每一场比赛获胜的队伍，然后遍历整个数组就可以得出每支球队的分数。  
那么，在遍历整个数组的时候，我们如何知道该队伍应该加多少分呢。由于第一次胜利是加 $1$ 分，连胜两场是加 $2$ 分，连胜三场及以上每场加 $3$ 分。于是，我们可以使用 $cnt$ 来统计应该加的分。核心实现如下：

```cpp
int cnt=0;
for(int i=1;i<=n;i++){
    if(x[i]==x[i-1]){ //若该队伍连胜，那么我们就更新 cnt 来确定应该加的分数
        cnt=cnt<3?cnt+1:cnt; //判断连胜有没有超过三场
        s[x[i]]+=cnt; //x[i]为胜利队伍名称，所以s[x[i]]也就是该队伍所对应的得分情况了
    }else{ //这里是连胜中第一次胜利的情况
        cnt=1;
        s[x[i]]+=cnt;
    }
    ans=max(ans, s[x[i]]); //这里可以在每次循环后直接把当前的最大得分求出来
}
```
在上面代码中，我们使用 $x$ 数组来储存每一场胜利的队伍，用 $s$ 数组来储存每一支队伍的总分。通过遍历 $x$ 数组来计算出每一支队伍的总分。
完整代码如下：

```cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long
const int N=1e6+10;
int n,ans,x[N],s[N];

signed main(){
   cin>>n>>x[1];
   for(int i=2;i<=n;i++)
       x[i]=((x[i-1]*3703+1047)%n)+1; //按题目给出的公式来求出每一场胜利的队伍

       int cnt=0;
       for(int i=1;i<=n;i++){
           if(x[i]==x[i-1]){ //若该队伍连胜，那么我们就更新 cnt 来确定应该加的分数
               cnt=cnt<3?cnt+1:cnt; //判断连胜有没有超过三场
               s[x[i]]+=cnt; //x[i]为胜利队伍名称，所以s[x[i]]也就是该队伍所对应的得分情况了
           }else{ //这里是连胜中第一次胜利的情况
               cnt=1;
               s[x[i]]+=cnt;
           }
           ans=max(ans, s[x[i]]); //这里可以在每次循环后直接把当前的最大得分求出来
        }
    cout<<ans;
    return 0;
}
```

---

## 作者：Max_robot (赞：0)

这道题看上去很难，但是慢慢思考其实还是会发现很简单的。

### 思路

这道题的思路也是很简单。

#### 哪一个队伍获胜了

我们首先根据题目给出的公式 $x_i = ((x_{i-1}\times 3703+1047) \bmod n)+1$ 来算出这 $n$ 场比赛中每一场比赛都是哪一队取得了胜利。


```cpp
for(int i=2;i<=n;i++)
		x[i]=((x[i-1]*3703+1047)%n)+1;//根据题目要求来判断这场比赛那一个队伍获胜了
```


然后。我们先定义两个变量 $a_i$ 和  cnt，$a_i$ 就是我这个队伍现在的得分，而 cnt 则是我现在是几连胜。然后就该判断是几连胜了，这里我们分类讨论。

#### 一连胜

一连胜就是说我现在这场获胜的队伍不是前面一场获胜的队伍，那么他就是一连胜了。这个时候，我们银应该让 $a_{x_i}$ 的得分加一，并且让 cnt 等于一，表示我现在是一连胜了。


```cpp
if(x[i]!=x[i-1]){
    a[x[i]]++;//加分
    cnt=1;//cnt++
}
```


#### 二连胜

二连胜就是我现在这场比赛获胜的队伍是前面一场比赛获胜的队伍，并且 cnt 是一。这个时候就是二连胜了。我们要令 $a_{x_i}$ 加二，cnt 要等于二或者加一。然后我们就做完了二连胜。


```cpp
if(x[i]==x[i-1] && cnt==1){
    a[x[i]]+=2;//加分
    cnt++;//cnt=2
}
```


#### 三连胜及多连胜

我们这里可以先看题，会发现，如果一支队伍连续赢了三场及以上，那么我就只加三分，所以我们把这两种情况合并成一种。判断条件就是我现在这场比赛获胜的队伍是前面一场比赛获胜的队伍，并且 cnt 是大于等于二的才算三连胜或者多连胜。如果满足就要 $a_{x_i}$ 加三并且 cnt 加一，注意这里是加一。因为他如果是多连胜的话就不能是三了。


```cpp
if(x[i]==x[i-1] && cnt>=2){
    a[x[i]]+=3;//加分
    cnt++;//几连胜
}
```

#### 找答案

最后我们找最大的 $a_i$ 就好了。


```cpp
for(int i=1;i<=n;i++)
		ans=max(ans,a[i]);
```

把代码拼一下就好了。


```cpp
#include<bits/stdc++.h>
using namespace std;
const int N=1e7+10;
long long n, x[N];
long long a[N], cnt;
long long ans;
int main(){
	cin>>n>>x[1];
	for(int i=2;i<=n;i++)
		x[i]=((x[i-1]*3703+1047)%n)+1;//根据题目要求来判断这场比赛那一个队伍获胜了
	for(int i=1;i<=n;i++){
		if(x[i]!=x[i-1]){
			a[x[i]]++;//加分
			cnt=1;//cnt++
		}else if(x[i]==x[i-1] && cnt==1){
			a[x[i]]+=2;//加分
			cnt++;//cnt=2
		}else if(x[i]==x[i-1] && cnt>=2){
			a[x[i]]+=3;//加分
			cnt++;//几连胜
		}
	}
	for(int i=1;i<=n;i++)
		ans=max(ans,a[i]);
	cout<<ans<<endl;
	return 0;
}
```

---


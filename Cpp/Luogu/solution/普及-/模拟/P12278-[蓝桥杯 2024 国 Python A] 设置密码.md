# [蓝桥杯 2024 国 Python A] 设置密码

## 题目描述

小蓝设计了一个管理系统，管理系统需要支持设置用户的密码，并给出密码的强度。合法密码要求如下:

只能包含大小写字母、数字和特殊字符 `~!@#$%^&*()_`，以上字符的 ASCII 码依次为: $126$，$33$，$64$，$35$，$36$，$37$，$94$，$38$，$42$，$40$，$41$，$95$。

密码的强度按下列方式判断:

- 强密码: 密码长度 $\geq 12$ ，同时包含大写字母、小写字母、数字、特殊字符，或包含包括特殊字符在内的其中三种，且特殊字符的种类数 $\geq 3$；
- 中密码: 密码长度 $\geq 8$ ，不属于强密码，至少有大写字母、小写字母、数字、特殊字符中的两种；
- 弱密码: 密码长度 $\geq 6$ ，不属于强密码或中密码。

三者都不是的密码同样视为不合法的密码。

给定若干个字符串 (每行一个)，判断其是否能作为密码，能作为密码时判断密码的强度。

对每个字符串输出 $0,1,2,3$ 中的一个，分别对应不合法的密码、弱密码、中密码、强密码四种情况。

## 说明/提示

### 评测用例规模与约定

- 对于 $80\%$ 的评测用例，$T = 1$；
- 对于所有评测用例，$1 \leq T \leq 10^5$，$1 \leq |S_i| \leq 32$，其中 $|S_i|$ 表示 $S_i$ 的长度。

## 样例 #1

### 输入

```
4
@Qaq1
123456
lanqiao2024
a1@R7c1h(GO*q3)```

### 输出

```
0
1
2
3```

# 题解

## 作者：MingDynasty (赞：12)

[题目链接](https://www.luogu.com.cn/problem/P12278)

一道毒瘤的判断题。本人调了一个小时。

## 题目思路：

**注意：本题一次性读入一整行。**

我们发现，最毒瘤的地方就是判断密码是否合法，如果合法就判断属于哪种强度的密码，否则输出 0。

我们在查看密码时，可以开一个数组，把每种字符只要出现过都标记成 1，最后看哪些字符被标记成了 1 就可以。对于特殊字符，我们可以使用 STL 中的 map 或 set，标记每个特殊字符出现的个数即可。

本题细节较多，请各位仔细打代码，实在没有思路了再看我的代码。

**时间复杂度 $O(Tn \log n)$，可以通过本题，其中 $n$ 是字符串长度。**

## Code：

```cpp
#include<bits/stdc++.h>
using namespace std;
string a;
int n;
inline bool check1(){
	if(a.size()<12) return 0;
	int s[44]={},cnt=0;
	map<char,int> l;
	for(int i=0;i<a.size();i++){
		if(a[i]>='a'&&a[i]<='z') s[1]=1;
		else if(a[i]=='~'||a[i]=='!'||a[i]=='@'||a[i]=='#'||a[i]=='$'||a[i]=='%'||a[i]=='^'||a[i]=='&'||a[i]=='*'||a[i]=='('||a[i]==')'||a[i]=='_') s[2]=1,l[a[i]]=1;
		else if(a[i]>='A'&&a[i]<='Z') s[3]=1;
		else if(a[i]>='0'&&a[i]<='9') s[4]=1;
	}
	int o=s[1]+s[2]+s[3]+s[4];
	if(o==4) return 1;
	if(o==3&&l.size()>=3) return 1;
	return 0;
}
inline bool check2(){
	if(a.size()<8) return 0;
	int s[44]={},cnt=0;
	map<char,int> l;
	for(int i=0;i<a.size();i++){
		if(a[i]>='a'&&a[i]<='z') s[1]=1;
		else if(a[i]=='~'||a[i]=='!'||a[i]=='@'||a[i]=='#'||a[i]=='$'||a[i]=='%'||a[i]=='^'||a[i]=='&'||a[i]=='*'||a[i]=='('||a[i]==')'||a[i]=='_') s[2]=1,l[a[i]]=1;
		else if(a[i]>='A'&&a[i]<='Z') s[3]=1;
		else if(a[i]>='0'&&a[i]<='9') s[4]=1;
	}
	int o=s[1]+s[2]+s[3]+s[4];
	if(o>=2) return 1;
	return 0;
}
inline int ch(){
	int s[44]={},cnt=0;
	map<char,int> l;
	for(int i=0;i<a.size();i++){
		if(a[i]>='a'&&a[i]<='z') s[1]=1;
		else if(a[i]=='~'||a[i]=='!'||a[i]=='@'||a[i]=='#'||a[i]=='$'||a[i]=='%'||a[i]=='^'||a[i]=='&'||a[i]=='*'||a[i]=='('||a[i]==')'||a[i]=='_') s[2]=1,l[a[i]]=1;
		else if(a[i]>='A'&&a[i]<='Z') s[3]=1;
		else if(a[i]>='0'&&a[i]<='9') s[4]=1;
	}
	int o=s[1]+s[2]+s[3]+s[4];
	return o;
}
inline bool check3(){
	if(a.size()<6) return 0;
	return 1;
}
int main(){
	cin.tie(0)->sync_with_stdio(0);
	cin>>n;
	getline(cin,a);
	while(n--){
		getline(cin,a);
		bool k=0;
		for(int i=0;i<a.size();i++){
			if(!((a[i]>='0'&&a[i]<='9')||(a[i]>='A'&&a[i]<='Z')||(a[i]>='a'&&a[i]<='z')||(a[i]=='~'||a[i]=='!'||a[i]=='@'||a[i]=='#'||a[i]=='$'||a[i]=='%'||a[i]=='^'||a[i]=='&'||a[i]=='*'||a[i]=='('||a[i]==')'||a[i]=='_'))) {
				k=1;
				break;
			}
		}
		if(k){cout<<"0\n";continue;}
		if(check1()) cout<<3<<'\n';
		else if(check2()) cout<<2<<'\n';
		else if(check3()) cout<<1<<'\n';
		else cout<<0<<'\n';
	}
	return 0;
}
```

祝各位通过！

---

## 作者：HZY1618yzh (赞：3)

~很毒瘤的判断~

思路
---
先输入 $T$，接着循环 $T$ 次，每次**输入一行**字符串，遍历字符串，记录大写字母、小写字母、数字、特殊字符的数量。特别的，特殊字符串说的是**种类**，不是个数，所以要用 set 或 map。最后照着题意判断。时间复杂度是 $O(Tn\log n)$，可以通过本题数据。

AC code
---
- c++

```cpp
#include<bits/stdc++.h>
using namespace std;
int t;
string s;
int main(){
	cin>>t;
	cin.ignore();//清空换行
	while(t--){
		getline(cin,s);//一次读入一行，防止有空格（提交了好几次才发现）
		int big=0,sma=0,num=0;//记录
		set<char> els;//题目是说“种类”，不是个数（提交了好几次才发现）
		if(s.length()<6){//不符合条件直接跳出
			cout<<"0\n";
			continue;
		}
		int f=0;
		for(char c: s){
			if('A'<=c&&c<='Z') big++;
			else if('a'<=c&&c<='z') sma++;
			else if('0'<=c&&c<='9') num++;
			else if(c=='~'||c=='!'||c=='@'||c=='#'||c=='$'||c=='%'||c=='^'||c=='&'||c=='*'||c=='('||c==')'||c=='_')
				els.insert(c);
			else{
				f=1;//不符合条件直接跳出
				break;
			}
		}
		if(f){
			cout<<"0\n";
			continue;
		}
        //计算种类
		int z=0;
		if(big) z++;if(sma) z++;if(num) z++;if(!els.empty()) z++;
        //判断
		if((z==4||(z==3&&els.size()>=3))&&s.length()>=12){//z==4的时候，特殊字符不一定是>=3
			cout<<"3\n";
			continue;
		}
		if(z>=2&&s.length()>=8){
			cout<<"2\n";
			continue;
		}
		cout<<"1\n";
	}
	return 0;
}
```

- python

```python
import sys

def main():
    t = int(sys.stdin.readline())
    for _ in range(t):
        s = sys.stdin.readline().strip()
        
        # 长度检查
        if len(s) < 6:
            print(0)
            continue
        
        # 初始化标志
        has_upper = False
        has_lower = False
        has_digit = False
        specials = set()
        valid = True
        
        # 检查每个字符
        for c in s:
            if 'A' <= c <= 'Z':
                has_upper = True
            elif 'a' <= c <= 'z':
                has_lower = True
            elif '0' <= c <= '9':
                has_digit = True
            elif c in {'~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_'}:
                specials.add(c)
            else:
                valid = False
                break
        
        # 非法字符检查
        if not valid:
            print(0)
            continue
        
        has_special = len(specials) > 0
        type_count = sum([has_upper, has_lower, has_digit, has_special])
        special_count = len(specials)
        
        # 密码强度判断
        if len(s) >= 12:
            # 强密码条件1: 包含全部四种类型
            strong1 = has_upper and has_lower and has_digit and has_special
            # 强密码条件2: 包含三种类型(含特殊字符)且特殊字符种类≥3
            strong2 = type_count >= 3 and has_special and special_count >= 3
            
            if strong1 or strong2:
                print(3)
                continue
        
        if len(s) >= 8 and type_count >= 2:
            print(2)
            continue
        
        print(1)

if __name__ == "__main__":
    main()
```
本人为 c 党，python 代码是 deepseek 帮我改写的，如有错误，请谅解。  
~代码来之不易，给个赞呗。~

---

## 作者：shy_lihui (赞：1)

细节很多的模拟。

先搞一个特殊字符串存所有的特殊字符，判断的时候直接找子串即可。

写两个函数，第一个函数 $\operatorname{check1}(c)$ 用来判断字符 $c$ 是否合法，也就是是否属于数字，大小写字母，合法特殊字符。

第二个函数，$\operatorname{check}(s)$ 用 $f_1,f_2,f_3$ 记录是否出现大写，小写字母，数字，再开一个集合来存出现过的特殊字符。然后按照题目要求定级即可。

```python
import sys

t = 0
s = ""
S = "~!@#$%^&*()_"  # 大写 S 存储合法字符 

def check1(c):  # 判断一个字符是否合法 
    if c >= 'a' and c <= 'z':  # 小写字母 
        return True
    if c >= 'A' and c <= 'Z':  # 大写字母 
        return True
    if c >= '0' and c <= '9':
        return True
    # 便利 S 依次判断特殊字符
    for i in S:  # 注意大写 
        if i == c:
            return True
    return False

def check():
    f = False
    if len(s) < 6:  # 检查长度
        return 0 
    for i in s:
        if not check1(i):
            return 0
    # 检查强密码
    flag = True
    flag &= (len(s) >= 12)
    f1, f2, f3 = False, False, False  # 是否有大写字母，小写字母，数字 
    se = set()  # 存储特殊字符 
    for i in s:
        f1 |= (i <= 'z' and i >= 'a')
        f2 |= (i <= 'Z' and i >= 'A')
        f3 |= (i >= '0' and i <= '9')
        if i in S:
            se.add(i)
    if (len(s) >= 12) and \
        ((f1 + f2 + f3 + (len(se) != 0) == 4) or \
        ((f1 + f2 + f3 + (len(se) != 0) >= 3) and (len(se) >= 3))):
        return 3
    # 检查中密码
    if (len(s) >= 8) and (f1 + f2 + f3 + (len(se) != 0)) >= 2:
        return 2
    # 否则是弱密码
    if len(s) >= 6:
        return 1
    return 0

def main():
    global t, s
    t = int(sys.stdin.readline())
    s = sys.stdin.readline().strip()  # 防止读到不该读的东西 
    for _ in range(t):
        s = sys.stdin.readline().strip()
        print(check())

if __name__ == "__main__":
    main()
```
--- 
```cpp
#include<bits/stdc++.h>
using namespace std;
int t;
string s;
string S="~!@#$%^&*()_";//大写 S 存储合法字符 
bool check1(char c)//判断一个字符是否合法 
{
	if(c>='a'&&c<='z')//小写字母 
	{
		return 1;
	}
	if(c>='A'&&c<='Z')//大写字母 
	{
		return 1;
	}
	if(c>='0'&&c<='9')
	{
		return 1;
	}
	//便利 S 依次判断特殊字符
	for(char i:S)//注意大写 
	{
		if(i==c)
		{
			return 1;
		}
	}
	return 0;
}
int check()
{
	bool f=0;
	if(s.size()<6)//检查长度
	{
		return 0; 
	}
	for(char i:s)
	{
		if(!check1(i))
		{
			return 0;
		}
	}
	//检查强密码
	bool flag=1;
	flag&=(s.size()>=12);
	bool f1=0,f2=0,f3=0;//是否有大写字母，小写字母，数字 
	set<char> se;//存储特殊字符 
	for(int i:s)
	{
		f1|=(i<='z'&&i>='a');
		f2|=(i<='Z'&&i>='A');
		f3|=(i>='0'&&i<='9');
		if(S.find(i)!=string::npos)
		{
			se.insert(i);
		}
	}
	if((s.size()>=12)&&
		(f1+f2+f3+(!se.empty())==4||
		(f1+f2+f3+(!se.empty())>=3&&(se.size()>=3))))
	{
		return 3;
	}
	//检查中密码
	if((s.size()>=8)&&f1+f2+f3+(se.size()!=0)>=2)
	{
		return 2;
	}
	//否则是弱密码
	if(s.size()>=6)
	{
		return 1;
	}
	return 0;
}
int main()
{
	ios::sync_with_stdio(0);
	cin.tie(0);
	cin>>t;
	getline(cin,s);//防止读到不该读的东西 
	while(t--)
	{
		getline(cin,s);
		cout<<check()<<'\n';
	}
	return 0;
}
```

---

## 作者：longyitongxue (赞：1)

Enter [this](https://www.luogu.com.cn/problem/P12278) to the question.

# 主要思路

先读入一个 $T$，$T$ 组查询。记得用 `getline()`[^1]！不然你有可能被硬控 $1$ 小时。接下来就到难点了：判断是什么级别的密码。首先，密码有不合规的字符，赶快输出 $0$ 并 `continue`，不然又有可能被硬控 $1$ 小时。接着，我们需要判断字符类型并累加种类数（特殊字符需要单独判断并单独累加），最后，根据题目描述判断强、中、弱密码。**注意！！！当密码长度没有大于等于 $\mathbf6$ 时，我们要输出 $\mathbf0$ 表示不合法！！！不然又会被硬控 $\mathbf1$ 小时！！！**
[^1]: 为什么要用 `getline()`？因为空格的 ASCII 码是 $32$，而题目输入的 ASCII 码范围是 $\left[32,126\right]$。为了避免出现空格，我们要用 `getline()`。

# [祖传代码](https://www.luogu.com.cn/record/214746188)
```cpp
#include<iostream>
#include<bits/stdc++.h>
using namespace std;
bool a[4],b[12];
int main() {
	int n;
	cin>>n;
	string str;
	//下面的语句是清除一个换行符。
	getline(cin,str);
	while(n--) {
		//记得查询完一次要清空
		memset(a,false,sizeof a);
		memset(b,false,sizeof b);
		bool f=0;
		string s;
		//要用 getline()！
		getline(cin,s);
		//不合法
		for(int i=0; i<s.size(); i++) {
			if(!((s[i]>='0'&&s[i]<='9')||(s[i]>='A'&&s[i]<='Z')||(s[i]>='a'&&s[i]<='z')||s[i]=='~'||s[i]=='!'||s[i]=='@'||s[i]=='#'||s[i]=='$'||s[i]=='%'||s[i]=='^'||s[i]=='&'||s[i]=='*'||s[i]=='('||s[i]==')'||s[i]=='_')) {
				f=1;
				cout<<"0\n";
				break;
			}
		}
		if(f)continue;
		//判断字符类型
		for(int i=0;i<s.size();i++){
			if(s[i]>='0'&&s[i]<='9')a[0]=1;
			else if(s[i]>='A'&&s[i]<='Z')a[1]=1;
			else if(s[i]>='a'&&s[i]<='z')a[2]=1;
			else{
				a[3]=1;
				switch(s[i]){
					case '~':b[0]=1;break;
					case '!':b[1]=1;break;
					case '@':b[2]=1;break;
					case '#':b[3]=1;break;
					case '$':b[4]=1;break;
					case '%':b[5]=1;break;
					case '^':b[6]=1;break;
					case '&':b[7]=1;break;
					case '*':b[8]=1;break;
					case '(':b[9]=1;break;
					case ')':b[10]=1;break;
					case '_':b[11]=1;break;
				}
			}
		}
		//大写字母、小写字母、数字及特殊字符的种类
		int zl=0;
		for(int i=0;i<4;i++){
			zl+=int(a[i]);
		}
		//特殊字符种类
		int zls=0;
		for(int i=0;i<12;i++){
			zls+=int(b[i]);
		}
		//判断强、中、弱和非密码
		if((s.size()>=12&&zl==4)||(s.size()>=12&&zls>=3&&zl>=3)/*变量名极易弄混，要格外小心！！！*/){
			cout<<"3\n";
		}else if(s.size()>=8&&zl>=2){
			cout<<"2\n";
		}else if(s.size()>=6){
			cout<<"1\n";
		}else{//假如长度没大于等于 6 也是不合法的密码哦！
			cout<<"0\n";
		}
	}
	return 0;
}
```
# 正文后闲聊
没想到一道 [$\colorbox{#F39C11}{\color{#FFFFFF}\textsf{普及--}}$](https://www.luogu.com.cn/problem/list?difficulty=2) 的题都可以写 $72$ 行代码……
- - -
$$\textsf{------脚注分割线------}$$
- - -

---

## 作者：Sparse_Table (赞：1)

[原题传送门](https://www.luogu.com.cn/problem/P12278)

这题其实就是根据题意模拟就行，特殊字符需要求一下种类数可以用[键值对](https://baike.baidu.com/item/STL%20map/874674)处理，接着记录一下大写、小写、数字、特殊符号的个数就可以了（注意：键值对一定要清空要清空）。

**避坑：题目说输入的字符串的 ASCII 码在 $32$ 和 $126$ 之间，可能包括空格，所以要用 ```getline(cin, s);``` 读入。**

话不多说，我们上代码。

**莫抄袭，清了 AC 记录，空悲切！**

```cpp
#include <bits/stdc++.h>
using namespace std;

int T;
map<char, int> mp;

int check(string s) {
    mp.clear();
    int cap = 0, low = 0, num = 0, spe = 0;
    for (auto c : s)
        if (c >= 'A' && c <= 'Z')
            cap++;
        else if (c >= 'a' && c <= 'z')
            low++;
        else if (c >= '0' && c <= '9')
            num++;
        else if (c == '~' || c == '!' || c == '@' || c == '#' || c == '$' || c == '%' || c == '^' || c == '&' || c == '*' || c == '(' || c == ')' || c == '_') {
            mp[c]++;
            if (mp[c] == 1)
                spe++;
        } else
            return 0;
    if (s.size() >= 12 && (cap && low && num && spe || spe >= 3 && (cap && low || cap && num || low && num)))
        return 3;
    else if (s.size() >= 8 && (cap && low || cap && num || cap && low || low && num || low && spe || num && spe))
        return 2;
    else if (s.size() >= 6)
        return 1;
    return 0;
}

int main() {
    cin >> T;
    string s;
    getline(cin, s);
    while (T--) {
        getline(cin, s);
        cout << check(s) << '\n';
    }
    return 0;
}
```

---

## 作者：jiayunli (赞：1)

五年级蒟蒻题解，大佬见谅。

~~和下面的一样，磕了一个多小时。~~

这题没什么难度，就是判断太多了！

本人写的有点长。

### 直接看题

注意本题一次读入一整行哦，~~别问我怎么知道的 QWQ~~。


大写字母判断：

```cpp
if(s[i]>='A'&&s[i]<='Z'){
	ans+=(cnt[1]==0);
	cnt[1]++;
}
```

小写字母判断：

```cpp
if(s[i]>='a'&&s[i]<='z'){
	ans+=(cnt[2]==0);
	cnt[2]++;
}
```

数字判断：

```cpp
if(s[i]>='0'&&s[i]<='9'){
	ans+=(cnt[2]==0);
	cnt[2]++;
}
```

特殊字符判断：

```cpp
if(s[i]==126||s[i]==33||s[i]==64||s[i]==35||s[i]==36||s[i]==37||s[i]==94||s[i]==38||s[i]==42||s[i]==40||s[i]==41||s[i]==95){
	ll z=1;
	ans+=(cnt[4]==0);
	for(ll j=0;j<i;j++){
		if(s[i]==s[j]){
			z=0;
		}
	}
	cnt[4]+=z;
}
```

强密码判断：

```cpp
if(s.size()>=12&&(ans==4||ans>=3&&cnt[4]>=3)){
	cout<<3<<endl;
}
```

中密码判断：

```cpp
if(s.size()>=8&&ans>=2){
	cout<<2<<endl;
}
```

弱密码判断：

```cpp
if(s.size()>=6){
	cout<<1<<endl;
}
```
三者都不是的密码判断：


```cpp
else{
	cout<<0<<endl;
}
```

### 合起来


```cpp
#include<bits/stdc++.h>//万能头
using namespace std;
using ll=long long;
ll t;//判断的密码的个数
string s;//判断的密码
ll cnt[5],ans;//cnt:大写字母、小写字母、数字、特殊字符的数量  ans:大写字母、小写字母、数字、特殊字符，或包含包括特殊字符在内的其中的种数
bool b;
int main(){
	//ios::sync_with_stdio(false);不能用速读
	//cin.tie(0),cout.tie(0);
	cin>>t;
	getline(cin,s);
	while(t--){
		b=false;//全体归零
		s="";
		for(ll i=1;i<=4;i++){
			cnt[i]=0;
		}
		ans=0;
		getline(cin,s);
		for(ll i=0;i<s.size();i++){
			if(s[i]>='A'&&s[i]<='Z'){//大写字母判断
				ans+=(cnt[1]==0);
				cnt[1]++;
			}
			else{//小写字母判断
				if(s[i]>='a'&&s[i]<='z'){
					ans+=(cnt[2]==0);
					cnt[2]++;
				}
				else{//数字判断
					if(s[i]>='0'&&s[i]<='9'){
						ans+=(cnt[3]==0);
						cnt[3]++;
					}
					else{//特殊字符判断
						if(s[i]==126||s[i]==33||s[i]==64||s[i]==35||s[i]==36||s[i]==37||s[i]==94||s[i]==38||s[i]==42||s[i]==40||s[i]==41||s[i]==95){
							ll z=1;
							ans+=(cnt[4]==0);
							for(ll j=0;j<i;j++){
								if(s[i]==s[j]){
									z=0;
								}
							}
							cnt[4]+=z;
						}
						else{//不是包含大小写字母、数字和特殊字符
							b=true;
						}
					}
				}
			}
		}
		if(b){//不仅包含大小写字母、数字和特殊字符
			cout<<0<<endl;
		}
		else{
			if(s.size()>=12&&(ans==4||ans>=3&&cnt[4]>=3)){//强密码判断
				cout<<3<<endl;
			}
			else{
				if(s.size()>=8&&ans>=2){//中密码判断
					cout<<2<<endl;
				}
				else{
					if(s.size()>=6){//弱密码判断
						cout<<1<<endl;
					}
					else{
						cout<<0<<endl;//三者都不是的密码判断
					}
				}
			}
		}
	}
	return 0;//完美收尾
}
```

---

## 作者：luokc (赞：0)

# P12278 [蓝桥杯 2024 国 Python A] 设置密码
## 题目分析
题目要求判断密码的强度。合法密码需满足仅包含大小写字母、数字和指定特殊字符，条件如下:    
- 强密码：密码长度 $\geq 12$ ，**同时包含大写字母**、**小写字母**、**数字**、**特殊字符**，或包含包括特殊字符在内的其中**三种**，且特殊字符的种类数 $\geq 3$。
  
- 中密码：密码长度 $\geq 8$，不属于强密码，至少有**大写字母**、**小写字母**、**数字**、**特殊字符**中的两种。

- 弱密码：密码长度 $\geq 6$ ，不属于强密码或中密码。

- 不合法密码：不在 ASCII 码 $32$ 至 $126$ 之间。
## 思路
遍历整个字符串，用 set 标记特殊字符，其余的正常标记，如果发现不合法字符，则直接判断为不合法。
    
然后统计密码的中的不同字符类型总和，再根据密码长度和字符类型的统计结果，最后按照强密码、中密码、弱密码的规则依次判断，确定密码强度。   

对于单个字符串遍历的时间复杂度为 $O(n)$， $n$ 为字符串的长度，要处理 $T$ 个字符串，所以总体时间复杂度在 $O(Tn\log n)$ 。       
     
注意：ASCII 码 $32$ 至 $126$ 之间有空格，记得要一次性读入一整行。

## [C++代码](https://www.luogu.com.cn/record/214760289)
```cpp
#include <bits/stdc++.h>
using namespace std;
#define ll long long
int read() {
	int x = 0, f = 1;
	char ch = getchar();
	while (ch < '0' || ch > '9') {
		if (ch == '-') f = -1;
		ch = getchar();
	}
	while (ch >= '0' && ch <= '9') {
		x = x * 10 + ch - '0';
		ch = getchar();
	}
	return x * f;
}
ll ans(string a) {// 判断密码强度的函数
    bool flag1 = false, flag2 = false, flag3 = false;// 标记密码中是否包含大写字母、小写字母、数字
    set<char> chars;// 用于存储密码中出现的特殊字符，集合会自动去重
    set<char> ts = {'~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_'};// 合法特殊字符集合，包含题目规定的特殊字符
    ll len = a.size();
    for (int i = 0; i < a.size(); i++) {
        if (ts.count(a[i])) {
            chars.insert(a[i]); // 如果字符是合法特殊字符，将其加入特殊字符集合
        } else if (a[i] >= 'A' && a[i] <= 'Z') {
            flag1 = true;
        } else if (a[i] >= 'a' && a[i] <= 'z') {
            flag2 = true;
        } else if (a[i] >= '0' && a[i] <= '9') {
            flag3 = true; 
        } else {
            return 0;// 如果字符不是合法字符，直接返回 0 表示不合法密码
        }
    }
    ll r = 0;
    ll sum = flag1 + flag2 + flag3 + (chars.size() > 0);// 统计密码中出现的字符类型数量
    if ((len >= 12 && sum == 4)||(len >= 12 && sum >= 3 && chars.size() >= 3)) {
        return 3;
    } else if (len >= 8 && sum >= 2) {
        return 2;
    } else if (len >= 6 && sum >= 1) {
        return 1;
    }
    return 0;// 不满足上述任何条件，返回 0 表示不合法密码
} 

int main() {
    ll T;
    cin >> T;
    // 忽略掉 cin 读取 T 后遗留的换行符，避免影响后续 getline 的读取
    cin.ignore();
    while (T--) {
        // 读取一行输入作为密码
        string a;
        getline(cin,a);
        // 调用 ans 函数判断密码强度并输出结果
        cout << ans(a) << "\n";
    }
    return 0;
}
```
## [Python代码](https://www.luogu.com.cn/record/214814108)
```python
T = int(input())
for _ in range(T):
    a = input()
    l = len(a)
    flag1, flag2, flag3, flag4 = False, False, False, False #标记密码中是否包含大写字母、小写字母、数字、特殊字符
    chars = set() #用于存储密码中出现的特殊字符，集合会自动去重
    ts = set("~!@#$%^&*()_") #合法特殊字符集合，包含题目规定的特殊字符
    # 遍历密码字符串中的每个字符
    for char in a:
        # 如果字符是大写字母，标记 flag1 为 True
        if char.isupper():
            flag1 = True
        # 如果字符是小写字母，标记 flag2 为 True
        elif char.islower():
            flag2 = True
        # 如果字符是数字，标记 flag3 为 True
        elif char.isdigit():
            flag3 = True
        # 如果字符是合法特殊字符，将其加入特殊字符集合并标记 flag4 为 True
        elif char in ts:
            chars.add(char)
            flag4 = True
        # 如果字符不是合法字符，直接输出 0 表示不合法密码并跳出循环
        else:
            print(0)
            break
    else:
        
        sum = flag1 + flag2 + flag3 + flag4 #统计密码中出现的字符类型数量
        if (l >= 12 and sum == 4) or (l >= 12 and sum >= 3 and len(chars) >= 3):
            print(3)
        elif l >= 8 and sum >= 2:
            print(2)
        elif l >= 6 and sum >= 1:
            print(1)
        else:
            print(0)
```
## [再附上JAVA21代码](https://www.luogu.com.cn/record/214817481)

```java
import java.util.HashSet;
import java.util.Scanner;
import java.util.Set; 
public class Main {
    public static long ans(String a) {
        boolean flag1 = false, flag2 = false, flag3 = false; // 初始化布尔变量，分别标记密码中是否包含大写字母、小写字母、数字
        Set<Character> chars = new HashSet<>(); // 创建一个 HashSet 集合，用于存储密码中出现的特殊字符
        Set<Character> ts = new HashSet<>(); // 创建一个 HashSet 集合，用于存储合法的特殊字符
        String specialChars = "~!@#$%^&*()_"; // 定义合法特殊字符的字符串
        for (char c : specialChars.toCharArray()) { 
            ts.add(c);// 遍历合法特殊字符字符串，将每个字符添加到 ts 集合中
        }
        long len = a.length();
        for (int i = 0; i < a.length(); i++) {
            char c = a.charAt(i); // 获取当前字符
            if (ts.contains(c)) { // 判断当前字符是否为合法特殊字符
                chars.add(c); // 如果是，将其添加到 chars 集合中
            } else if (c >= 'A' && c <= 'Z') { // 判断当前字符是否为大写字母
                flag1 = true; // 如果是，将 flag1 标记为 true
            } else if (c >= 'a' && c <= 'z') { // 判断当前字符是否为小写字母
                flag2 = true; // 如果是，将 flag2 标记为 true
            } else if (c >= '0' && c <= '9') { // 判断当前字符是否为数字
                flag3 = true; // 如果是，将 flag3 标记为 true
            } else { // 如果当前字符不是合法字符
                return 0; // 直接返回 0，表示密码不合法
            }
        }
        long sum = (flag1 ? 1 : 0) + (flag2 ? 1 : 0) + (flag3 ? 1 : 0) + (chars.size() > 0 ? 1 : 0); // 统计密码中出现的字符类型数量
        if ((len >= 12 && sum == 4) || (len >= 12 && sum >= 3 && chars.size() >= 3)) {
            return 3;
        } else if (len >= 8 && sum >= 2) {
            return 2; 
        } else if (len >= 6 && sum >= 1) {
            return 1; 
        }
        return 0; // 如果不满足上述任何条件，返回 0 表示不合法密码
    }
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        long T = sc.nextLong();
        sc.nextLine(); // 消耗掉 nextLong() 遗留的换行符，避免影响后续密码的读取
        for (long i = 0; i < T; i++) { 
            String a = sc.nextLine();
            System.out.println(ans(a)); // 调用 ans 方法判断密码强度并输出结果
        }
        sc.close(); // 关闭 sc 对象，释放资源
    }
}
```

---

## 作者：yihang2011 (赞：0)

#### [题解：P12278 [蓝桥杯 2024 国 Python A] 设置密码](https://www.luogu.com.cn/problem/P12278)


## Solution

字符串模拟题，按照题意模拟即可。

由于题目没限制输入的字符，所以里面有可能有空格，所以要用 `getline(cin, s)`。

同样的原因，遍历字符串时，如果遇到了非字母、数字、题目规定的特殊字符时直接输出 `0` 然后跳过即可。

记录特殊字符个数时可以使用 `map`，也可以使用 `vector`，这里使用的是 `vector`。

## Code

```cpp
#include <bits/stdc++.h>
using namespace std;

int T;

int solve(string s) {
    bool upper, lower, num, spec;
    int cnt = 0, cnt_spec = 0;
    vector<int> spe(0);
    upper = lower = num = spec = false;
    if (s.size() < 6) {
        return 0;
    }
    for (char c : s) {
        if (c >= 'A' && c <= 'Z') {
            if (!upper) {
                cnt++;
            }
            upper = true;
        } else if (c >= 'a' && c <= 'z') {
            if (!lower) {
                cnt++;
            }
            lower = true;
        } else if (c >= '0' && c <= '9') {
            if (!num) {
                cnt++;
            }
            num = true;
        } else if (c == 126 || c == 33 || c == 64 || c == 35 || c == 36 || c == 37 || c == 94 || c == 38 || c == 40 || c == 41 || c == 42 || c == 95) {
            if (find(spe.begin(), spe.end(), (int)c) == spe.end()) {
                 cnt_spec++;
                spe.push_back((int)c);
            }
            if (!spec) {
                cnt++;
            }
            spec = true;
        } else {
            return 0;
        }
    }
    // cout << cnt << " " << cnt_spec << endl;
    if (s.size() >= 12 && (cnt == 4 || cnt >= 3 && cnt_spec >= 3)) {
        return 3;
    } 
    if (s.size() >= 8 && cnt >= 2) {
        return 2;
    } 
    return 1;
}

int main() {
    cin >> T;
    string s;
    getline(cin, s);
    for (int i = 1; i <= T; i++) {
        string s = "";
        getline(cin, s);
        cout << solve(s) << endl;
    }
    return 0;
}
```

[AC Record](https://www.luogu.com.cn/record/214704118)

---


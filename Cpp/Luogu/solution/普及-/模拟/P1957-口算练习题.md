# 口算练习题

## 题目描述

王老师正在教简单算术运算。细心的王老师收集了 $i$ 道学生经常做错的口算题，并且想整理编写成一份练习。 编排这些题目是一件繁琐的事情，为此他想用计算机程序来提高工作效率。王老师希望尽量减少输入的工作量，比如 $\texttt{5+8}$ 的算式最好只要输入 $\texttt 5$ 和 $\texttt 8$，输出的结果要尽量详细以方便后期排版的使用，比如对于上述输入进行处理后输出 $\texttt{5+8=13}$ 以及该算式的总长度 $6$。王老师把这个光荣的任务交给你，请你帮他编程实现以上功能。

## 说明/提示

### 【数据规模与约定】

对于 $50\%$ 的数据，输入的算式都有三个数据，第一个算式一定有三个数据。

对于所有数据，$0<i\leq 50$，运算数为非负整数且小于 $10000$。

## 样例 #1

### 输入

```
4
a 64 46
275 125
c 11 99
b 46 64
```

### 输出

```
64+46=110
9
275+125=400
11
11*99=1089
10
46-64=-18
9
```

# 题解

## 作者：su226 (赞：577)

大佬们的代码我都看不懂，下面让我来介绍一下 `sscanf` & `sprintf` 大法！

```
#include <iostream> //cin & cout 用iostream
#include <cstring> //memset & strlen 用cstring
#include <cstdio> //sscanf & sprintf 用cstdio
using namespace std;
int main(){
	char a;//a用于存储运算符
	int n,c,d;//n存储个数不解释，cd存储两个数字
	char s[100],b[10];//s存储最终的字符串，b临时变量
	cin>>n;
	for(int i=0;i<n;i++){
		cin>>b;//输入一串字符，有可能是运算符，也有可能是数字
		if(b[0]>='a' && b[0]<='z'){
			a=b[0];//如果是运算符就存入a，然后输入数字
			cin>>c>>d;
		}else{
			sscanf(b,"%d",&c);//如果是数字就转换b为int存储到第一个数字
			cin>>d;//然后输入剩下的第二个数字
		}
		memset(s,0,sizeof(s));//清空原有的字符串，防止长度判断错误
		if(a=='a')//用sprintf格式化
			sprintf(s,"%d+%d=%d",c,d,c+d);
		else if(a=='b')
			sprintf(s,"%d-%d=%d",c,d,c-d);
		else if(a=='c')
			sprintf(s,"%d*%d=%d",c,d,c*d);
		cout<<s<<endl<<strlen(s)<<endl;//输出字符串和字符串长度
	}
	return 0;
}


```

---

## 作者：Saliеri (赞：267)

作为一个蒟蒻，我之前仿佛没有看见有用字符串函数做的…

----------------------------------------------------我假装这是条分割线---------------------------------------------------------

在此隆重推出   

```cpp
#include <cctype>
```
这是一个拥有许多字符串处理函数声明的头文件，这些函数可以用来对单独字符串进行分类和转换；

例如：

isalpha():检查这个字符是否为字母，真返回1，假返回0；

isalnum()：检查这个字符是否为字母或数字数字，同上；

isdigit():检查这个字符是否为十进制数字，同上；

islower():检查这个字符是否为小写字母，同上；

剩下自己百度去吧~~逃……

----------------------------------------------------我假装这还是条分割线------------------------------------------------------

现在来看一下这道题：

## 1.输入

因为这道题输入要求为“接着的i行为需要输入的算式，每行可能有三个数据或两个数据。”
因为不确定第一个数据的类型，所以要用
##### 字符串！字符串！字符串！
为了快一点 我用了scanf:
```cpp
for(int i=1; i<=n; i++) {
		scanf("%s",&ss);}
```
## 2.处理
已经输入了之后，第一步要判断是“三个数据”还是“两个数据”；

而它的标志是什么呢,就是输入的字符串的第一个字符！

#### 一定记住是ss[0]!! 因为这个，样例卡了一刻钟……

判断它是否是个字母，cctype就可以派上用场了：

```cpp
if(isalpha(ss[0])) {
	k=ss[0];
	scanf("%d%d",&x,&y);
}
```
 如果不是呢，之前的许多大佬都用过:
 
 atoi ((表示 ascii to integer)是把字符串转换成整型数的一个函数)
 
 直接将输入的字符串转成整数，再输入第二个数就可以啦：
 
 ```cpp
else {
	x=atoi(ss);
	scanf("%d",&y);
}
```

## 3.输出
题目要求我们输出这个输出的算式的长度，怎么办呢？

在此向大家推出：

#### sprintf()

或许看起来很像printf？实际上，他只比printf多一个参数，一个字符串！

没错，他就是一个将数据输入字符串的函数！

那长度直接输出ans的长度就可以啦。

代码：

```cpp
if(k=='a')
	sprintf(ans,"%d+%d=%d",x,y,x+y);
else if(k=='b')
	sprintf(ans,"%d-%d=%d",x,y,x-y);
else
	sprintf(ans,"%d*%d=%d",x,y,x*y);
printf("%s\n%d\n",ans,strlen(ans));
```
## 4.代码
```cpp
//具体细节前面都有讲
#include <cctype>
#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
int n,x,y;
char ss[20],ans[100],k;
int main() {
	scanf("%d",&n);
	for(int i=1; i<=n; i++) {
		scanf("%s",&ss);
		if(isalpha(ss[0])) {
			k=ss[0];
			scanf("%d%d",&x,&y);
		} else {
			x=atoi(ss);
			scanf("%d",&y);
		}
		if(k=='a')
			sprintf(ans,"%d+%d=%d",x,y,x+y);
		else if(k=='b')
			sprintf(ans,"%d-%d=%d",x,y,x-y);
		else
			sprintf(ans,"%d*%d=%d",x,y,x*y);
		printf("%s\n%d\n",ans,strlen(ans));
	}
	return 0;//完美结束！
}```

逃……






 

---

## 作者：Galaxy_yr (赞：160)

# 			P1957题解
**这道题本蒟蒻一开始也不知道怎么解决输入两个或三个变量，但突然想起了cin的使用方法：~~（灵感来自c++ primer plus 第188最下方）~~**	
如果你定义了一个int型，那么当cin输入表达式的值是就会检测输入的是不是数字。如果程序发现用户输入了错误内容时，程序就会锁住cin，所以你就需要重置cin来接受新的输入。这时你输入的错误数据还会在在屏幕上~~是在缓存区还是非缓存区？~~如果你再输入还是从这个数据开始读取。
废话不多说，上代码！
```cpp
#include <iostream>
#include <string>
#include <sstream>
using namespace std;
int main ()
{
	int n;
	cin>>n;//输入n 
	char ch;//要输入的字母 
	string s[n];//存放最后的表达式 
	for(int i=0;i<n;i++)//开始循环输入 
	{
		string st;//用来存放数字 
		stringstream io;//转换数字 
		int a,b,ans=0;//ans是答案 
		if(!(cin>>a))//利用了cin的性质 
		{
			cin.clear();
			cin>>ch>>a;
		}
		cin>>b;
		io<<a;io>>s[i];io.clear();//接下来对ch进行判断 
		if(ch=='a')
		{
			ans=a+b;
			s[i]+='+';
			io<<b;io>>st;io.clear();//io每次用完后要记得清空哦
			s[i]+=st;
			s[i]+='=';
			io<<ans;io>>st;io.clear();
			s[i]+=st;
		}//以此类推
	if(ch=='b')
		{
			ans=a-b;
			s[i]+='-';
			io<<b;io>>st;io.clear();
			s[i]+=st;
			s[i]+='=';
			io<<ans;io>>st;io.clear();
			s[i]+=st;
		}
	if(ch=='c')
		{
			ans=a*b;
			s[i]+='*';
			io<<b;io>>st;io.clear();
			s[i]+=st;
			s[i]+='=';
			io<<ans;io>>st;io.clear();
			s[i]+=st;
		}
	}
	for(int i=0;i<n;i++)//循环输出结果 
	{
		cout<<s[i]<<endl;
		cout<<s[i].size();
		if(i!=n-1)cout<<endl;
	}
}
```

---

## 作者：Garrison (赞：110)

这道题是纯模拟啊！好久没看到这么水的体了。
其实这道题很简单，用**switch**嵌套就好了（记得break）。
至于处理长度我们可以用一个函数：
```
int len(int number)
{
	int x=0;
	if(number==0)
		return 1;
	if(number>0)
		while(number){
			number/=10;
			++x;
		}
	if(number<0){
		x=1;
		number=-number;
		while(number){
			number/=10;
			++x;
		}
	}
	return x;
}
```
每次就加上这个就行了。
不过还有一个难点：如何处理两次一模一样的呢？其实很简单，多用一个char类型的字符来存上一次的就好了，转化就只要：
```
for(int i=0;i<l;++i)
	a=a*10+c[i]-'0';
```
下面就放代码：
```
#include<bits/stdc++.h>
using namespace std;
int n,a,b;
string c;
char l_c;
int len(int number)
{
	int x=0;
	if(number==0)
		return 1;
	if(number>0)
		while(number){
			number/=10;
			++x;
		}
	if(number<0){
		x=1;
		number=-number;
		while(number){
			number/=10;
			++x;
		}
	}
	return x;
}
int main()
{
	cin>>n;
	for(int i=1;i<=n;++i){
		cin>>c;
		int x;
		switch(c[0]){
			case 'a': cin>>a>>b;
				printf("%d+%d=%d\n",a,b,a+b);x=len(a+b)+2;
				l_c=c[0];break;
			case 'b': cin>>a>>b;
				printf("%d-%d=%d\n",a,b,a-b);x=len(a-b)+2;
				l_c=c[0];break;
			case 'c': cin>>a>>b;
				printf("%d*%d=%d\n",a,b,a*b);x=len(a*b)+2;
				l_c=c[0];break;
			default:
				cin>>b;
				a=0;
				int l=c.size();
				for(int i=0;i<l;++i)
					a=a*10+c[i]-'0';
				switch(l_c)	{
					case 'a':
						printf("%d+%d=%d\n",a,b,a+b);x=len(a+b)+2;break;
					case 'b':
						printf("%d-%d=%d\n",a,b,a-b);x=len(a-b)+2;break;
					case 'c':
						printf("%d*%d=%d\n",a,b,a*b);x=len(a*b)+2;break;
					default:break;
				}	
				break;
		}
		x=len(a)+len(b)+x;
		printf("%d\n",x);
	}
	return 0;
}
```
还是有很多细节要注意。




---

## 作者：Porsche (赞：73)

大佬们的代码我都看不懂，所以就自己写一个吧~~

```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
	int n;
	cin>>n;
	int p=0;
	int a,b,c;
	string ch1,ch2;
	int sum=0;
	int len1,len2;
	for(int i=1;i<=n;i++)
	{
		cin>>ch1;//读入"a","b","c"或第一个数 
		if(ch1=="a")
		{
			p=1;//记住运算符 
			cin>>ch1>>ch2;
			len1=ch1.size();//求string类型长度 
			len2=ch2.size();//同上↑ 
			a=atoi(ch1.c_str());//将string类型转换成int类型 
			b=atoi(ch2.c_str());//同上↑ 
			c=a+b;
			cout<<a<<'+'<<b<<'='<<c<<endl;//输出算式 
			if(c<=0)sum++;//负数有'-',0压根不会进下面的循环 
			while(c!=0)
			{
				sum++;
				c/=10;
			}//把得数的位数计算出来 
			cout<<sum+len1+len2+2<<endl;//输出算式占用的字符长 
			sum=0;
			continue;
		}//下面的除了运算符不一样其他的都一样 
		if(ch1=="b")
		{
			p=2;
			cin>>ch1>>ch2;
			len1=ch1.size();
			len2=ch2.size();
			a=atoi(ch1.c_str());
			b=atoi(ch2.c_str());
			c=a-b;
			cout<<a<<'-'<<b<<'='<<c<<endl;
			if(c<=0)sum++;
			while(c!=0)
			{
				sum++;
				c/=10;
			}
			cout<<sum+len1+len2+2<<endl;
			sum=0;
			continue;
		}
		if(ch1=="c")
		{
			p=3;
			cin>>ch1>>ch2;
			len1=ch1.size();
			len2=ch2.size();
			a=atoi(ch1.c_str());
			b=atoi(ch2.c_str());
			c=a*b;
			cout<<a<<'*'<<b<<'='<<c<<endl;
			if(c<=0)sum++;
			while(c!=0)
			{
				sum++;
				c/=10;
			}
			cout<<sum+len1+len2+2<<endl;
			sum=0;
			continue;
		}
		if(p==1)//上面已经记忆过了 
		{
			cin>>ch2;//注意不要有多余的输入 
			len1=ch1.size();
			len2=ch2.size();
			a=atoi(ch1.c_str());
			b=atoi(ch2.c_str());
			c=a+b;
			cout<<a<<'+'<<b<<'='<<c<<endl;
			if(c<=0)sum++;
			while(c!=0)
			{
				sum++;
				c/=10;
			}
			cout<<sum+len1+len2+2<<endl;
			sum=0;
			continue;
		}
		if(p==2)
		{
			cin>>ch2;
			len1=ch1.size();
			len2=ch2.size();
			a=atoi(ch1.c_str());
			b=atoi(ch2.c_str());
			c=a-b;
			cout<<a<<'-'<<b<<'='<<c<<endl;
			if(c<=0)sum++;
			while(c!=0)
			{
				sum++;
				c/=10;
			}
			cout<<sum+len1+len2+2<<endl;
			sum=0;
			continue;
		}
		if(p==3)
		{
			cin>>ch2;
			len1=ch1.size();
			len2=ch2.size();
			a=atoi(ch1.c_str());
			b=atoi(ch2.c_str());
			c=a*b;
			cout<<a<<'*'<<b<<'='<<c<<endl;
			if(c<=0)sum++;
			while(c!=0)
			{
				sum++;
				c/=10;
			}
			cout<<sum+len1+len2+2<<endl;
			sum=0;
			continue;
		}
	}
	return 0;
}
```
但愿大佬们都能看得懂我的思路

---

## 作者：_jimmywang_ (赞：67)

# 第n+1篇题解P1957……
开始一看，有毒……

有些时候读入两个数据，有些时候三个数据，输出还要长度……

于是………………

```
#include <bits/stdc++.h>
using namespace std;
int n;
char c,ch;
int a,b,q;
int main() {
	cin>>n;
	while(n--){
		cin>>c;
		a=0,b=0;
		if(isdigit(c)){
			a+=c-'0';
			c=getchar();
			while(c!=' '){	
				a=a*10+c-'0';
				c=getchar();
			}
			cin>>b;
		}
		else {ch=c,cin>>a>>b;}
		if(ch=='a')cout<<a<<"+"<<b<<"="<<a+b<<endl,q=a+b;
		if(ch=='b')cout<<a<<"-"<<b<<"="<<a-b<<endl,q=a-b;
		if(ch=='c')cout<<a<<"*"<<b<<"="<<a*b<<endl,q=a*b;
		int len=0;
		if(a==0)len++;
		else while(a)a/=10,len++;
		if(b==0)len++;
		else while(b)b/=10,len++;
		if(q<0)len++,q=-q;
		if(q==0)len++;
		else while(q)q/=10,len++;
		cout<<len+2<<endl;
	}
	return 0;
}
```
呵呵。

解释一下：

## 0.
```
int n;//题目意思：第一个数
char c,ch;//c:输入时的第一个字符 ch:当前运算符（a或b或c）
int a,b,q; //a，b存当前两个数，q为运算结果。
```
## 1.（重要！！）
```
cin>>n;
	while(n--){
		cin>>c;
		a=0,b=0;
		if(isdigit(c)){
			a+=c-'0';
			c=getchar();
			while(c!=' '){	
				a=a*10+c-'0';
				c=getchar();
			}
			cin>>b;
		}//当只有两个数据的时候
		else {ch=c,cin>>a>>b;}//三个数据
```

## 2.
```
if(ch=='a')cout<<a<<"+"<<b<<"="<<a+b<<endl,q=a+b;//加
if(ch=='b')cout<<a<<"-"<<b<<"="<<a-b<<endl,q=a-b;//减
if(ch=='c')cout<<a<<"*"<<b<<"="<<a*b<<endl,q=a*b;//乘
```
## 3.（最最最重要）
```
int len=0;//长度
if(a==0)len++;//坑点1:0要加1（不加80！！）
else while(a)a/=10,len++;
if(b==0)len++;
else while(b)b/=10,len++;
if(q<0)len++,q=-q;//坑点2：q为负数时要加1（不加20！！）
if(q==0)len++;
else while(q)q/=10,len++;
cout<<len+2<<endl;//坑点3：符号 +或-或* 和一个=（不加0！！）
```
# 希望对不会的同学有帮助！

---

## 作者：VenusM1nT (赞：61)

我赌五毛这题的难度是假的

坑点实在是太多了

- 首先，如何输入是一个问题，因为一行可能有三个数据，或两个数据，所以输入的量不唯一

我这里采用的是先输入一个字符和两个字符串，判断字符的类型再进行下一步处理

那么有人就要问了：为什么不用getline？

因为Linux很讨厌getline啊，动不动就RE或者输个换行符进去。。。

也有人问：输入一个字符两个数字呢？

那么我有一组数据

  ```cpp
  2
  a 10 10
  100 200
  ``` 
自己琢磨去吧。。。

- 其次，在计算数的位数时，一定要记得判断负数或者**0**，这是非常容易被坑的

- 还有最最重要，也是最最容易爆0的：**最后千万不要多加一个换行**！

###千万不要！

具体见代码


```cpp
#include<bits/stdc++.h>
using namespace std;
string sa,sb;
int a,b;
int n,Type;
char ch;
int Length(int a)//计算数的长度 
{
    int ans=0;
    if(a<0 || a==0) ans++;//0或负数特判 
    while(a)
    {
        ans++;
        a/=10;
    }//经典处理 
    return ans;
}
int Change(string s)//将字符串转换为数，没什么好多说的 
{
    int ans=0;
    for(int i=0;i<s.size();i++) ans=ans*10+s[i]-48;
    return ans;
}
int Ten(int a)//计算a的10次方，可以用pow代替 
{
    int ans=1;
    for(int i=1;i<=a;i++) ans*=10;
    return ans;
}
int main()
{
    cin >> n;
    for(int i=1;i<=n;i++)
    {
        int tot=0;
        cin >> ch >> sa >> sb;//输入一个字符两个字符串 
        if(ch=='a') Type=1;
        else if(ch=='b') Type=2;
        else if(ch=='c') Type=3;//判断类型 
        else if(ch>='0' && ch<='9') sa=ch+sa;//如果不是字母那么加到第一个数的最前面 
        a=Change(sa),b=Change(sb);//转换为数 
        int lena=Length(a),lenb=Length(b);//计算长度 
        if(Type==1) printf("%d+%d=%d\n%d",a,b,a+b,lena+lenb+2+Length(a+b));
        else if(Type==2) printf("%d-%d=%d\n%d",a,b,a-b,lena+lenb+2+Length(a-b));
        else if(Type==3) printf("%d*%d=%d\n%d",a,b,a*b,lena+lenb+2+Length(a*b));//输出即可 
        if(i<n) cout << endl;//别忘了判断，多输换行很可能bao0（至少我bao0了） 
    }
    return 0;//结束~ 
}
```

---

## 作者：逍遥北冥 (赞：39)

~~这是本蒟蒻的第一篇题解呢。~~

望给过

这是一道模拟，我用~~伟大的分类讨论~~思想做的，当然自定义函数很好用。

只要思路清晰，分清新的运算（3个输入）和旧的运算（2个输入）两种情况~~再一顿瞎搞~~就行了，代码很好理解。

上代码
```cpp
#include<bits/stdc++.h>//佛系万能头
using namespace std;
char cl;//上一次运算的符号
int manage(int a)//返回的是实数a的位数
{
    int i=0;
    if(a<0||a==0) i++; //不要忘了负数和0
    while(a)//基操勿6
    {
        a/=10;
        i++;
    }
    return i;
}
void _do(char c,int a,int b)//进行运算
{
    int len=2;
    //总长度，初始为2是因为把运算符和等号算进去
    len+=manage(a)+manage(b);//总长加上a、b的长度
    if(c=='a')//这三个if使总长加上运算结果
        len+=manage(a+b);
    if(c=='b')
        len+=manage(a-b);
    if(c=='c')
        len+=manage(a*b);
    
    if(c=='a')//分类输出
        cout<<a<<'+'<<b<<'='<<a+b<<endl;
    if(c=='b')
        cout<<a<<'-'<<b<<'='<<a-b<<endl;
    if(c=='c')
        cout<<a<<'*'<<b<<'='<<a*b<<endl;
    
    cout<<len;//输出总长度
    cl=c;//把当前运算符赋值给cl，下一次用
}
int main()
{
	string c;//存储第一个输入
    int n;
    cin>>n;//有n次运算（题目用的貌似是i）
    for(int i=1;i<=n;i++)
    {
        int a=0,b=0;
        cin>>c;//不论是数或运算符都存起来
        if(c[0]=='a'||c[0]=='b'||c[0]=='c')
            {//若为运算符，则输入两数a、b
                cin>>a>>b;
                _do(c[0],a,b);//进行处理
            }
            else
            {
                cin>>b;
                for(int j=0;j<c.size();j++)
                {//将第一个数转化成int类型,基操勿6
                    a*=10;
                    a+=(c[j]-'0');
                }
                _do(cl,a,b);//用上一次的运算符
            }
        if(n!=i) cout<<endl;
        //输出换行，~~某dalao说最后多输出换行会爆0~~
    }
    return 0;
}
//我还是有底线的
```

#### 谢谢大家看本蒟蒻的代码，苏维埃万岁！！！
### @管理员 要给我过啊，谢谢！打字不容易 ~~我是猪蹄打字法QAQ~~

---

## 作者：Elitedj (赞：23)

# 本弱鸡的第一篇题解！！！

主要的思路是先输入第一个字符，判断是否是a，b，c中的一种

是的话就接着输入两个运算数就直接可以运算啦

若第一个输入的是数字会比较麻烦

如果第一个是数字的话就要将字符转化为int，再接着输入第二个运算数就行了

刚开始处理起来比较麻烦 突然灵光一闪就写出来了~~

### 请勿抄袭！！！

```cpp
    #include<iostream>
    #include<string>
    #include<cstring>
    #include<stdio.h>
    #include<cmath>
    #include<algorithm>
    using namespace std;
    int select(char a,int b,int c)//选择运算符并返回运算结果
    {
        int sum;
        switch(a)
        {
            case 'a': cout<<b<<"+"<<c<<"="<<b+c<<endl;sum=b+c;break;
            case 'b': cout<<b<<"-"<<c<<"="<<b-c<<endl;sum=b-c;break;
            case 'c': cout<<b<<"*"<<c<<"="<<b*c<<endl;sum=b*c;break;
        }
        return sum;
    }
    int length(int a)//处理运算数和运算结果的长度（这就是为什么上一个函数要返回结果啦）
    {
        int sum=0;
        if(a==0)
            return 1;
        while(a!=0)
        {
            a=a/10;
            sum++;
        }
        return sum;
    }
    int main()
    {
        string a;
        char ch;
        int n,b,c,sum,l,s;
        cin>>n;
        for(int i=1;i<=n;i++)
        {
            b=0;
            cin>>a;//输入第一个字符，判断是不是a,b,c的一种
            if(a[0]=='a'||a[0]=='b'||a[0]=='c')//若输入的字符a是a b c中一种的话
            {
                ch=a[0];//将运算符由string存到char类型中
                cin>>b>>c;//继续输入两个运算数
                sum=select(ch,b,c);
                s=length(b)+length(c)+length(sum)+2;//+2是加上运算符和=的长度
                if(sum<0)//如果结果是负数的话还要加上符号的长度
                    s++;
                cout<<s<<endl;//愉快的输出即可
            }
            else//当没有输入运算符时，就要采用上一个式子的运算符啦
            {   //说明刚刚输入的a是数字，那么就要将其转化为int型并存在b中
                l=a.length();
                for(int i=0;i<l;i++)//这个就是将a转为int型存在b中的步骤了  应该能懂的吧
                    b=b*10+a[i]-'0';//减'0'是精髓
                cin>>c;//再输入第2个运算数
                sum=select(ch,b,c);//此时ch为上一次的运算符
                s=length(b)+length(c)+length(sum)+2;
                if(sum<0)
                    s++;
                cout<<s<<endl;
            }
        }
        return 0;
    }
//顺利的AC
```

---

## 作者：_•́へ•́╬_ (赞：10)

## 蒟蒻使用$char*\text{字符串}$保存下来，再判断输入的是几个东西。

- $sscanf$的用处：从字符串里输入数字。格式：比$scanf$多一个参数，表示从哪个字符串中输入。
- $sprintf$的用处：向字符串里写入数字。格式：比$printf​$多一个参数，表示向哪个字符串写入。

```cpp
#include<cstdio>
#include<cstring>
#define rpt(n) for(register int ttxyc=0;ttxyc<n;++ttxyc)//宏定义
int n,a,b,c;char last,*s,*ans;
main()
{
	scanf("%d\n",&n);
	rpt(n)
	{
		s=new char(20);ans=new char(20);//申请新空间
		gets(s);//输入
		if(*s=='a'||*s=='b'||*s=='c')
		{
			last=*s;
			for(;*s<'0'||*s>'9';++s);//过滤空格
		}
		sscanf(s,"%d",&a);
		for(;*s>='0'&&*s<='9';++s);//过滤数字
		for(;*s<'0'||*s>'9';++s);//过滤空格
		sscanf(s,"%d",&b);
		switch(last)
		{
			case'a':c=a+b;sprintf(ans,"%d+%d=%d",a,b,c);break;//+
			case'b':c=a-b;sprintf(ans,"%d-%d=%d",a,b,c);break;//-
			case'c':c=a*b;sprintf(ans,"%d*%d=%d",a,b,c);break;//×
		}
		printf("%s\n%d\n",ans,strlen(ans));//输出
	}
}/**/
```

---

## 作者：panjidongc (赞：6)

### 由于懒得写函数，所以导致代码特别长

### 其实就是纯模拟，在代码实现上有以下几点要注意：

## 1、读入字符串后，如果字符串第一位是a，b，c就把存起来，防止下一行只有单独两个数字

## 2、统计算式长度时，对于计算结果，要分正负零三种情况讨论

## \_3、敲代码也是需要RP的，所以请不要在打卡显示凶、大凶的那一天敲代码（第三点纯属娱乐，请勿当真）\_

```cpp
#include<cstdio>
#include<cstring>
#include<iostream>
using namespace std;

const int N=50;

char a[N],b[N],d[N];
int n;

int main()
{
    int i;
    scanf("%d",&n);
    while(n--)
    {
        int x=0,y=0,xy,XY,l1,l2,num=0,tmp=1;
        char c;
        scanf("%s",a);
        if(a[0]=='a'||a[0]=='b'||a[0]=='c')
        {
            c=a[0];
            scanf("%s%s",b,d);
            l1=strlen(b);
            l2=strlen(d);
            for(i=l1-1;i>=0;i--)
            {
                x+=(b[i]-'0')*tmp;
                tmp*=10;
            }
            tmp=1;
            for(i=l2-1;i>=0;i--)
            {
                y+=(d[i]-'0')*tmp;
                tmp*=10;
            }
            if(a[0]=='a')
            {
                xy=x+y,XY=x+y;
                while(xy>0)
                {
                    num++;
                    xy/=10;
                }
                if(XY==0)
                    num=1;
                printf("%d+%d=%d\n%d\n",x,y,XY,l1+l2+num+2);
            }
            else if(a[0]=='b')
            {
                xy=x-y,XY=x-y;
                if(XY>0)
                    while(xy>0)
                    {
                        num++;
                        xy/=10;
                    }
                if(XY==0)
                    num=1;
                if(XY<0)
                {
                    xy=-xy;
                    while(xy>0)
                    {
                        num++;
                        xy/=10;
                    }
                    num++;
                }
                printf("%d-%d=%d\n%d\n",x,y,XY,l1+l2+num+2);
            }
            else if(a[0]=='c')
            {
                xy=x*y,XY=x*y;
                while(xy>0)
                {
                    num++;
                    xy/=10;
                }
                if(XY==0)
                    num=1;
                printf("%d*%d=%d\n%d\n",x,y,XY,l1+l2+num+2);
            }
        }
        else
        {
            scanf("%s",b);
            l1=strlen(a);
            l2=strlen(b);
            for(i=l1-1;i>=0;i--)
            {
                x+=(a[i]-'0')*tmp;
                tmp*=10;
            }
            tmp=1;
            for(i=l2-1;i>=0;i--)
            {
                y+=(b[i]-'0')*tmp;
                tmp*=10;
            }
            if(c=='a')
            {
                xy=x+y,XY=x+y;
                while(xy>0)
                {
                    num++;
                    xy/=10;
                }
                if(XY==0)
                    num=1;
                printf("%d+%d=%d\n%d\n",x,y,XY,l1+l2+num+2);
            }
            else if(c=='b')
            {
                xy=x-y,XY=x-y;
                if(XY>0)
                    while(xy>0)
                    {
                        num++;
                        xy/=10;
                    }
                if(XY==0)
                    num=1;
                if(XY<0)
                {
                    xy=-xy;
                    while(xy>0)
                    {
                        num++;
                        xy/=10;
                    }
                    num++;
                }
                printf("%d-%d=%d\n%d\n",x,y,XY,l1+l2+num+2);
            }
            else if(c=='c')
            {
                xy=x*y,XY=x*y;
                while(xy>0)
                {
                    num++;
                    xy/=10;
                }
                if(XY==0)
                    num=1;
                printf("%d*%d=%d\n%d\n",x,y,XY,l1+l2+num+2);
            }
        }
    }
    return 0;
}
```

---

## 作者：Ajwallet (赞：5)

**模拟！**

看到楼下很多人都是用字符串去输入，其实只用修改一下输入流就可以了。

```cpp
#include<cstdio>
#include<cmath>
#define input read()
#define sr c=getchar()
#define pd (c<'0'||c>'9')
using namespace std;
long long n;
long long a,b;
short ok;int l;//变量解释：n是题目个数，a和b是每行输入的那两个数，ok是用来判断是什么运算。l统计长度
long long read()
{
    char c;int d=1,f=0;
    while (sr,pd) 
    {if (c=='-') d=-1;if (c=='a') ok=1;if (c=='b') ok=0;if (c=='c') ok=2;}//判断符号a就是+,b就是-，c就是*
     f=f*10+c-48;
    while (sr,!pd) f=f*10+c-48;
    return d*f;
}
void write(long long x)
{
    if (x==0) {putchar(48);l++;return;}//0特殊处理，记得位数加一
    if (x<0) {putchar(45);x=-x;l++;}int a[101];int j=0;//负数也要特殊处理，位数也要加
    while (x>0)
    {
        a[++j]=x%10+48;
        x/=10;
    }
    for (int k=j;k>0;k--)
     {putchar(a[k]);l++;}//每输出一个数，长度加1
}
int main()
{
    n=input;char c;
    for (int i=1;i<=n;i++)
    {
        a=input;b=input;l=2;//l初始为2，分别是相加的符号和等号，所以是2.
        if (ok==1) //加
        {write(a);putchar(43);write(b);putchar(61);write(a+b);putchar(10);write(l);putchar(10);continue;}
           // 相当于printf("%d+%d=%d\n%d\n"a,b,a+b,l);
        if (ok==0) //减
        {write(a);putchar(45);write(b);putchar(61);write(a-b);putchar(10);write(l);putchar(10);continue;}
           // 相当于printf("%d-%d=%d\n%d\n"a,b,a-b,l);
        if (ok==2) //乘
        {write(a);putchar(42);write(b);putchar(61);write(a*b);putchar(10);write(l);putchar(10);continue;}
          // 相当于printf("%d*%d=%d\n%d\n"a,b,a*b,l);
    }
}
```

---

## 作者：hyzxxqc (赞：4)

**感觉**大家都改了cin流

### 有必要吗？

## 没有！！！
~~(也许是因为我不会)~~

------------


进入正题：~~（假装严肃）~~

我们可以先读入一个字符串，确定是不是字符，再继续读入~~（看着很简单吧）~~

代码如下：
```cpp
#include <bits/stdc++.h>
using namespace std;
int n,a,b,l;
string s;
char c,k;
int w(int p)//测长度
{
	int h=1,e=0;
	if (p>0)
	{
		while (h<=p)
		{
			h*=10;
			e++;
		}
		return e;
	}
	else
	{
		p*=-1;
		while (h<=p)
		{
			h*=10;
			e++;
		}
		return e+1;//###注意### 负数多了个负号
	}
}
void q(void)//测试语句，不用多管
{
	cout<<"here"<<endl;
}
int main()
{
	cin>>n;//输入，不用说
	for (short i=1;i<=n;i++)
	{
		cin>>s;//输入，不用说
		a=0;b=0;
		if (s[0]>='a'&&s[0]<='z')//如果是字母，再输入2个数字，并且更改当前运算符（储存于k）
		{
			c=s[0];
			cin>>a>>b;
			k=c;
		}
		else//反之转换为数
		{
			l=s.length();
			if (s[0]=='-')
			{
				for (int j=1;j<=l-1;j++)
				{
					a*=10;
					a+=s[j]-'0';
				}
				a*=-1;
			}
			else
			{
				for (int j=0;j<=l-1;j++)
				{
					a*=10;
					a+=s[j]-'0';
				}
			}
			cin>>b;
		}
		switch(k)//输出
		{
			case 'a':cout<<a<<'+'<<b<<'='<<a+b<<endl<<w(a)+w(b)+w(a+b)+2;break;
			case 'b':cout<<a<<'-'<<b<<'='<<a-b<<endl<<w(a)+w(b)+w(a-b)+2;break;
			case 'c':cout<<a<<'*'<<b<<'='<<a*b<<endl<<w(a)+w(b)+w(a*b)+2;break;
		}
		if (i<n) cout<<endl;//###注意###如果不是最后一行，就换行
	}
	return 0;//是不是觉得很简单？？？
}
```

---

## 作者：ZigZagKmp (赞：4)

对这题的难度表示怀疑

~~虽说我也评了一个入门难度……~~
### 题意简述
   给你n个形如 c a b 或者 a b的字符串(a,b为非负整数),求 $ a+b$  ||  $ a-b $  ||  $ a*b $  ||  $ [a/b] $的值并求出算式的长度。
### 算法分析
#### 对 a b 的处理
	我们可以设置一个记录标记，记录下上一次的运算符。
    但是还是有一个小问题：只有两个数！我们可以一下子读一个string，然后如果它的首位是数字，那么就把它转换为一个数字，~~这有点类似于快速读入思想~~
#### 对长度的计算
	类似于将一个数字拆分，只不过我们不需要将拆下的数字记录，只需要记录它拆了几次。
> 细节

**0**！
在你实现的时候，你就知道了。
#### 输出小细节
- 对于每个输入的算式，输出完整的运算式及结果
    （相当于省略运算符的也要输出运算符）


------------

### 代码实现
```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
int a,b,la,len;
string c;
inline int w(int x)
{
	int tmp=0;
	if(x==0)
    	return 1;
	while(x)
	{
		tmp++;
		x/=10;
	}
	return tmp;
}
inline int zh()
{
	int x=0;
	for(register int i=0;i<c.size();i++)
	{
		x*=10;
		x+=c[i]-'0';
	}
	return x;
}
int main()
{
    cin>>n;
    for(register int i=1;i<=n;i++)
    {
    	cin>>c;
    	if(c[0]=='a'||c[0]=='b'||c[0]=='c')
    	{
    		cin>>a>>b;
    		switch(c[0])
    		{
    			case 'a':{
    				cout<<a<<"+"<<b<<"="<<a+b<<endl;
    				cout<<w(a)+w(b)+w(a+b)+2<<endl;
    				la=1;
					break;
				}
				case 'b':{
    				cout<<a<<"-"<<b<<"="<<a-b<<endl;
    				cout<<w(a)+w(b)+w(a-b)+2<<endl;
    				la=2;
					break;
				}
				case 'c':{
    				cout<<a<<"*"<<b<<"="<<a*b<<endl;
    				cout<<w(a)+w(b)+w(a*b)+2<<endl;
    				la=3;
					break;
				}
				case 'd':{
    				cout<<a<<"/"<<b<<"="<<a/b<<endl;
    				cout<<w(a)+w(b)+w(a/b)+2<<endl;
    				la=4;
					break;
				}
			}
		}
		else
		{
			a=zh();
			cin>>b;
			switch(la)
    		{
    			case 1:{
    				cout<<a<<"+"<<b<<"="<<a+b<<endl;
    				cout<<w(a)+w(b)+w(a+b)+2<<endl;
    				la=1;
					break;
				}
				case 2:{
    				cout<<a<<"-"<<b<<"="<<a-b<<endl;
    				cout<<w(a)+w(b)+w(a-b)+2<<endl;
    				la=2;
					break;
				}
				case 3:{
    				cout<<a<<"*"<<b<<"="<<a*b<<endl;
    				cout<<w(a)+w(b)+w(a*b)+2<<endl;
    				la=3;
					break;
				}
				case 4:{
    				cout<<a<<"/"<<b<<"="<<a/b<<endl;
    				cout<<w(a)+w(b)+w(a/b)+2<<endl;
    				la=4;
					break;
				}
			}
		}
	}
	return 0;
}
```

---

## 作者：zhaowangji (赞：3)

~~洛谷题目难度都是假的~~

读入：第一个用string读，判断是否是a,b,c,不是就用进制转换转成十进制数

位数：负数的负号也算一个！0也算一位！（特判或用dowhile）

下面是代码（没有写成子程序所以代码有重复之处，不要嫌长）

```cpp
#include<iostream>
#include<string>
#include<cmath>
using namespace std;
int t;
string last=" ";//存储上一个运算符号
int main(){
	cin>>t;
	while(t--){
		string x;int a,b;
		cin>>x;//用字符串先读第一个
		if(x=="a"||x=="b"||x=="c"){//是运算符号
			cin>>a>>b;//正常读入
		}
		else {
			for(int i=0;i<x.size();i++)
				a+=(x[i]-48)*pow(10,x.size()-i-1);
			//     变成数字     根据位数来算该数字是个十百···位
            		cin>>b;//读入第二个数字
			x=last;//取出上一个运算符号
		}
		last=x;//更新
		if(x=="a"){
			cout<<a<<'+'<<b<<'='<<a+b<<endl;
			int sum=0;
			int c=a+b//必须写在前面，不然都是0。下同
			do{//使得即使是0，sum也先加上1，下同
				sum++;
				a/=10;
			}while(a);
			sum+=1;//运算符号算一位
			do{
				sum++;
				b/=10;
			}while(b);
			sum+=1;//等于号
			do{
				sum++;
				c/=10;
			}while(c);
			cout<<sum<<endl;
		}
		else if(x=="b"){
			cout<<a<<'-'<<b<<'='<<a-b<<endl;
			int sum=0;
			int c=a-b;
			if(c<0)sum+=1;//处理负号
			do{
				sum++;
				a/=10;
			}while(a);
			sum+=1;
			do{
				sum++;
				b/=10;
			}while(b);
			sum+=1;
			do{
				sum++;
				c/=10;
			}while(c);
			cout<<sum<<endl;
		}
		else if(x=="c"){
			cout<<a<<'*'<<b<<'='<<a*b<<endl;
			int sum=0;
			int c=a*b;
			do{
				sum++;
				a/=10;
			}while(a);
			sum+=1;
			do{
				sum++;
				b/=10;
			}while(b);
			sum+=1;
			do{
				sum++;
				c/=10;
			}while(c);
			cout<<sum<<endl;
		}
	}	
	return 0;
}
```


---

## 作者：UhhhQQQU (赞：3)

# ~~WA~一道水题~~


```cpp
不存在的，本蒟蒻交了好多次才对啊···
```

这道题虽然是模拟，但还是有好多细节要注意的，具体看代码吧~~~QAQ

（蒟蒻做这题做到···(╯‵□′)╯︵┻━┻）

```cpp
#include<cstdio>
#include<cstring>
#include<cmath>
using namespace std;
char fu;
long long gui,a,b,ans,n,lngth,spc,lll,fa,fb;
bool whch;
void jisuan()//计算算式长度 
{
	int p=a,q=b,pq=ans,e=0;
	//负数特判 
	if(p<0)e++;
	if(q<0)e++;
	if(ans<0)e++;
	//负数特判 
	p=abs(p),q=abs(q),pq=abs(pq);//将负数转化为正数，正数不变
	//0特判（蒟蒻的垃圾程序就因为这个错了一次QAQ） 
	if(p==0)e++;
	if(q==0)e++;
	if(pq==0)e++;
	//0特判
	//计算a,b和ans的长度！ 
	while(p)p/=10,e++;
	while(q)q/=10,e++;
	while(pq)pq/=10,e++;
	lll=e+2;//比如说1+1=2,看加点的符号，要加2哟！ 
			//       ·· 
}
int main()
{
    scanf("%lld\n",&n);
    for(int i=0;i<n;i++)
    {
        whch=lngth=a=b=spc=lll=0,fa=fb=0;
        while(scanf("%c",&fu)&&fu!='\n')
        {
            if(lngth==0)//特判当前长度为1时的状态（ps：本蒟蒻喜欢以零为下标开头，大佬请见谅） 
            {
                if(fu>'9'||fu<'0')gui=fu-'a';
                else spc++;//spc计算空格数，如果第一位不是字母的话就需要为1 
            }
            if(whch&&fu=='-')fb=1;//判断a是不是负数 
            if(!whch&&fu=='-')fa=1;//判断b是不是负数 
            if(fu>='0'&&fu<='9')//转换为数字 
            {
                if(!whch)a=a*10+(int)fu-'0';//如果为第一个数 
                else b=b*10+(int)fu-'0';//如果为第二个数 
            }
            else if(fu==' ')//举个栗子，a 64 46其中不是有两个空格嘛，第二个空格之后就是第二个数了！ 
            {
                spc++;//累加空格数 （如果为两个数字的话，spc会初始为一的哟(＾Ｕ＾)ノ~ＹＯ）
                if(spc==2)whch=1;//如果当前是第二个空格的话，就到了第二个数字的读入！QAQ 
            }
            lngth++;
        }
        a=fa?-a:a;//如果是负数就乘上-1咯 
        b=fb?-b:b;//同上 
        switch(gui)//开始计算答案喽 
        {
            case 0:ans=a+b;break;
            case 1:ans=a-b;break;
            case 2:ans=a*b;break;
        }
        jisuan();//别忘了算算式长度！(＾－＾)V 
        //下面都是输出 （记得空行！） 
        printf("%lld",a);
        switch(gui)
        {
            case 0:putchar('+');break;
            case 1:putchar('-');break;
            case 2:putchar('*');break;
        }
        printf("%lld=%lld\n",b,ans);
        printf("%lld\n",lll);
    }
    //打完了蒟蒻有OI以来最长的代码！(╯‵□′)╯︵┻━┻ 
}
```

---

## 作者：FSHelix (赞：3)

# P1957 口算练习题
为什么你们的代码写那么复杂呢（黑人问号.jpg）
这道题想用cin什么的还麻烦，不如直接打快读(<ゝω・)☆

我们的目的是读入操作数x, y, 还有操作符op（如果有的话）。然后就可以扔进sprintf + strlen轻松解决。

我们用快读readline读完一整行，如果前面有操作符就储存，如果没有（多读的一位作为初始值）就扔进readint把整串数字搞定。

大概的思想就到这里了，实现起来也不算麻烦，看代码吧：


```cpp
#include <bits/stdc++.h>
using namespace std;

//便于理解的循环
#define F2(a, b) for(int (a) = 1; (a) <= (b); ++(a))

int n, x, y;//n 是输入的算式总量    x y 是操作数
char op, s[100];//op 是操作符（a, b, c）   s 是算长度用的缓存

inline int readint(int first) {//非负整数的快读 可带初始值
    int n = first, ch = getchar();
    while(!isdigit(ch))
        ch = getchar();//丢弃空白符

    while(isdigit(ch))
        n = (n << 3) + (n << 1) + ch - '0', ch = getchar();
    //(n << 3) + (n << 1) = (n * 8) + (n * 2) = n * 10
    return n;
}

inline void readline() {
    char ch = getchar(), first = '0';//多读了的初始值
    while(!isalnum(ch))
        ch = getchar();//丢弃空白符

    if(isalpha(ch))
        op = ch;
    else if(isdigit(ch))
        first = ch;
    x = readint(first - '0');
    y = readint(0);//读入两操作数
}

int main() {
    scanf("%d", &n);
    F2(i, n) {//做n次
        memset(s, 0, sizeof(s));
        readline();

        if(op == 'a')
            sprintf(s, "%d+%d=%d", x, y, x + y);//生成算式
        else if(op == 'b')
            sprintf(s, "%d-%d=%d", x, y, x - y);
        else if(op == 'c')
            sprintf(s, "%d*%d=%d", x, y, x * y);

        printf("%s\n%d", s, strlen(s));//输出长度
        if(i != n)
            printf("\n");//最后一行不换行
    }
    return 0;
}
```

---

## 作者：桜Sakura (赞：3)

代码有点长，希望读者认真坚持读下去。

事实上只有两大部分（是否有字母）和三小部分（abc情况）组成，写的时候很多都是复制粘贴的。

大概思路就是分三个阶段，+ , - , *。

### 注意：

加法运算和乘法运算有0的现象，但是减法计算有0和负数现象，计算长度时要额外加一下（本代码在ans中有体现）

至于读入问题，我是按照字符串读入的。

用代码说明：

num1和num2，num1是先读入的，如果是字符abc中的任意一种，那么就flag标记。然后回收利用num1，和num2第二次再读入，这时num1和num2就是数字了，然后x和y将它们变为int型计算。

Ac代码：
```cpp
//writer：Sakura
//name：口算练习题

#include <cstdio>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <iostream>
#include <map>
#include <set>
#include <stack>
#include <queue>
#include <vector>
using namespace std;

int n;
char num1[10005],num2[10005];
int sw[10]={1,10,100,1000,10000,100000};
int flag=0;

int main(){
	//freopen("task.in","r",stdin);
	//freopen("task.out","w",stdout);
	scanf("%d",&n);
	for(int i=1;i<=n;i++){
		scanf("%s",num1);
		if(num1[0]=='a' || num1[0]=='b' || num1[0]=='c'){
			if(num1[0]=='a')flag=1;
			if(num1[0]=='b')flag=2;
			if(num1[0]=='c')flag=3;
			int len1=0,len2=0;
			scanf("%s %s",num1,num2);
			len1=strlen(num1);
			len2=strlen(num2);
			//printf("%d %d %d\n",flag,len1,len2);
			int x=0,y=0;
			for(int j=len1-1;j>=0;j--){
				x+=(num1[len1-1-j]-'0')*sw[j];
			}
			for(int j=len2-1;j>=0;j--){
				y+=(num2[len2-1-j]-'0')*sw[j];
			}
			//printf("%d %d\n",x,y);
			int sum=0;
			if(flag==1){
				flag=1;
				sum=x+y;
				printf("%d+%d=%d\n",x,y,x+y);
				int len=0;
				int ans=0;
				if(sum==0)ans+=1;
				while(sum>0){
					sum/=10;
					len++;
				}
				printf("%d\n",len1+len2+2+len+ans);
			}
			if(flag==2){
				flag=2;
				sum=x-y;
				int len=0;
				int ans=0;
				if(sum<=0)ans+=1;
				sum=abs(sum);
				while(sum>0){
					sum/=10;
					len++;
				}
				printf("%d-%d=%d\n",x,y,x-y);
				printf("%d\n",len1+len2+2+len+ans);
			}
			if(flag==3){
				int ans=0;
				flag=3;
				sum=x*y;
				int len=0;
				if(sum==0)ans+=1;
				while(sum>0){
					sum/=10;
					len++;
				}
				printf("%d*%d=%d\n",x,y,x*y);
				printf("%d\n",len1+len2+2+len+ans);
			}
		}
		else{
			int len1=0,len2=0;
			int x=0,y=0;
			len1=strlen(num1);
			for(int j=len1-1;j>=0;j--){
				x+=(num1[len1-1-j]-'0')*sw[j];
			}
			cin>>num2;
			len2=strlen(num2);
			for(int j=len2-1;j>=0;j--){
				y+=(num2[len2-1-j]-'0')*sw[j];
			}
			int sum=0;
			if(flag==1){
				flag=1;
				sum=x+y;
				int len=0;
				int ans=0;
				if(sum==0)ans+=1;
				while(sum>0){
					sum/=10;
					len++;
				}
				printf("%d+%d=%d\n",x,y,x+y);
				printf("%d\n",len1+len2+2+len+ans);
			}
			if(flag==2){
				flag=2;
				sum=x-y;
				int len=0;
				int ans=0;
				if(sum<=0)ans+=1;
				sum=abs(sum);
				while(sum>0){
					sum/=10;
					len++;
				}
				printf("%d-%d=%d\n",x,y,x-y);
				printf("%d\n",len1+len2+2+len+ans);
			}
			if(flag==3){
				flag=3;
				int ans=0;
				sum=x*y;
				int len=0;
				if(sum==0)ans+=1;
				while(sum>0){
					sum/=10;
					len++;
				}
				printf("%d*%d=%d\n",x,y,x*y);
				printf("%d\n",len1+len2+2+len+ans);
			}
		}
	}
	//system("pause");
	return 0;
}
```
看过代码之后还有什么不懂的可以私信我

：）

---

## 作者：皮皮虾letusgo (赞：3)

通过这题，我明白了一个道理:


C++string大法好！！！


我觉得这题也不是很难，但处理起来比较麻烦。


我的代码比较长，但还是可以理解的。


贴：

```cpp
#include <iostream>
#include <cstdio>
#include <string>//处理字符串的c++string大法
using namespace std;
int n;//算式数量
string zm;//读进来的第一个数字或字母
int sz1,sz2,sz3;//两个数字，一个答案
char c;//运算符
int ABS (int n){
    return -n;//计算相反数
}
int qc (int n){//求长函数
    if (n==0) return 1;//如果是0，长度为1
    int ans=0;
        if (n<0){//如果比0小，负号占一个长度，变为相反数
        ans++;
        n=ABS (n);
    }
    while (n){//处理普通长度
        ans++;
        n/=10;
    }
    return ans;//返回
}
void qk ()//把三个数字都清空
{
    sz1=0;sz2=0;sz3=0;
}
int zc (int a,int b,int c){//计算三个数字的长度总和
    return qc (a)+qc (b)+qc (c);
}
void input ()//读入
{
    cin>>zm;//读入第一个数字或字母
        qk ();//每次先清空三个数字
    if (zm!="a" && zm!="b" && zm!="c"){//如果不是abc，就只能再读一个数了（一定要用双引号）
        for (int i=0;i<zm.size ();i++)
        sz1=sz1*10+zm[i]-'0';//把zm里的数移到数字1里去
        cin>>sz2;//读入1第二个数
    }
    else {
        if (zm=="a") c='+';//全部处理负号
        else if (zm=="b") c='-';
            else if (zm=="c") c='*';
        cin>>sz1>>sz2;//再读入两个数
    }
    return;
}
void work ()
{
    if (c=='+') sz3=sz1+sz2;//把答案记录下来
    else if (c=='-') sz3=sz1-sz2;
        else if (c=='*') sz3=sz1*sz2;
    cout<<sz1<<c<<sz2<<'='<<sz3<<endl<<zc (sz1,sz2,sz3)+2<<endl;//输出三个数字，负号以及长度（三个数长度加上负号和等号）
    return;//返回
}
int main ()
{
    cin>>n;//读入数量
    while (n--){//重复n次
        input ();//读入
        work ();//处理
    }
    return 0;//结束
}
一开始我是用C的char数组做的，但那比较麻烦，还WA了，所以还是改成了string。简单易懂，一个一个读进来。
```

---

## 作者：Dvelpro (赞：3)

我的方法逐个判断  没有 想出来简单的办法 虽然比较笨 但是还是能看的 长度有点长




               
```cpp
#include<bits/stdc++.h>
using namespace std;
string a;
char b,ch;
int main(){
   int n,j,k=0,l,i=0,c1,c2,s1,s2,s,m;
     cin>>n;
   getline(cin,a);
   for(j=0;j<n;j++){
      c1=0; c2=0; m=0;           ///初始化 s 是长度 c是数值 m总长度
      s1=0; s2=0; k=0;
      l=0; i=0;
      a="";
      getline(cin,a);
      if(a[0]=='a'||a[0]=='b'||a[0]=='c'){     ///判断第一个字符
         b=a[0];l=1;
      }
      for(;l<a.size();l++){
         if(a[l]=='-') i++;               ///记录负号的个数
         if(a[l]>='0'&&a[l]<='9'){
            if(k==0){                      ///记录数字
                c1=c1*10+(a[l]-'0');
                s1++;
            }
            else{
                c2=c2*10+(a[l]-'0');
                s2++;
            }
            if(a[l+1]==' '){           ///如果下一个是空格 就就记录一下
                k++;
            }
         }
      }
      if(i>=1) {  c1=-c1;  s1++;}
      if(i>=2) {  c2=-c2;  s2++;}         ///如果是负数就让长度+1
      if(b=='a'){
          m=s1+s2;  
          s=c1+c2;
          if(s<0){ s=-s; m++;}
          if(s==0) m++;                ///如果等于零 一定要 长度加上1
          while(s){
             s=s/10;
             m++;
          }
          cout<<c1<<"+"<<c2<<"="<<c1+c2<<endl<<m+2<<endl;
      }
      if(b=='b'){
          m=s1+s2;    
          s=c1-c2;
          if(s<0){ s=-s; m++;}
          if(s==0) m++;
          while(s){
             s=s/10;
             m++;
          }
          cout<<c1<<"-"<<c2<<"="<<c1-c2<<endl<<m+2<<endl;
      }
      if(b=='c'){
          m=s1+s2; 
          s=c1*c2;
          if(s<0){ s=-s; m++;}
          if(s==0) m++;
          while(s){
             s=s/10;
             m++;
          }
          cout<<c1<<"*"<<c2<<"="<<c1*c2<<endl<<m+2<<endl;
      }
   }
}

```

---

## 作者：yyy2015c01 (赞：3)

#string/cstring的练手好题！

##勿用char！

##主要思路就是：

1、读入字符串

2、判断运算类型（+、-、\*）

3、保存数字

4、数字转化为int

5、计算

6、int转string

7、储存结果

8、打印结果

9、求出长度

AC代码：

```cpp

#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
#include<cmath>
int n;

char te,t[256];
int nnn=0,pos,p,nn1,nn2,start,ssbb;
using namespace std;
string s,da,sb,num1,num2;
int main()
{
    getline(cin,s);
    nn1=atoi(s.c_str());
    n=nn1;
    for (int i=1;i<=n;i++)
    {
        s="";
        da="";
        sb="";
        num1="";
        num2="";
        for (int jjj=1;jjj<=54;jjj++)
        {
            t[jjj]=' ';
        }
        nnn=0;
        start=0;
        getline(cin,s);
        if (s[0]>='a'&&s[0]<='c')
        {
            te=s[0];
             s.erase(0,2);
        }
        if (te=='a') te='+';
        else
        {
            if (te=='b') te='-';
            else
            {
                if (te=='c') te='*';
            }
            
         }
     p=s.find(" ",0);
     num1=s.substr(0,p);
     s.erase(0,p+1);
     num2=s;
     nn1=atoi(num1.c_str());
     nn2=atoi(num2.c_str());
     if (te=='+') ssbb=nn1+nn2;
        else
        {
            if (te=='-') ssbb=nn1-nn2;
            else
            {
                if (te=='*') ssbb=nn1*nn2;
            }
         }
         sprintf(t,"%d",ssbb);
        s=t;
        da=num1+te+num2+"="+s;
        cout<<da<<endl;
        cout<<da.size()<<endl;
}
    return 0;
}


```

---

## 作者：huxulin (赞：3)

这道题其实没什么难的，但是有两个难点：1：输入，2：对值为0的情况需要考虑，不然会WA两个点，其余的是简单的模拟。

下面看代码：

```cpp
#include <cstdio>
#include <cstring>
#include <iostream>
using namespace std;

int getlen(int a)   //得到一个数字的长度 
{
    if(a==0)return 1;   //注意0的时候要特判，不然会80 
    int len=0;
    if(a<0)
    {
        a=-a;
        len=1;
    }
    while(a)
    {
        a/=10;
        len++;
    }
    return len;
}

int main()
{
    string symbol,psymbol;          //symbol保存运算符，psymbol保存上一个symbol 
    int n,a,b;
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
    {
        a=0,b=0;
        cin>>symbol;
        if(symbol[0]>='0'&&symbol[0]<='9')            //难点：对symbol的特判，如果我输入的symbol是数字，那么把它转化一下，输入下一个数字。 
        {
            int k=1;
            for(int i=symbol.size()-1;i>=0;i--)      //算a，不说了。 
            {
                a+=k*(symbol[i]-'0');
                k*=10;
            }
            symbol=psymbol;
            scanf("%d",&b);
        }
        else scanf("%d%d",&a,&b);
        if(symbol=="a")
        {
            cout<<a<<"+"<<b<<"="<<a+b<<endl;
            cout<<getlen(a)+getlen(b)+getlen(a+b)+2<<endl;
            psymbol=symbol;   //保存上一个symbol 
        }
        else if(symbol=="b")
        {
            cout<<a<<"-"<<b<<"="<<a-b<<endl;
            cout<<getlen(a)+getlen(b)+getlen(a-b)+2<<endl;
            psymbol=symbol;
        }
        else if(symbol=="c")
        {
            cout<<a<<"*"<<b<<"="<<a*b<<endl;
            cout<<getlen(a)+getlen(b)+getlen(a*b)+2<<endl;
            psymbol=symbol;
        }
    }
    
    return 0;
}

```

---

## 作者：sycqwq (赞：2)

~~这道题太难了，106行，25%是抄的qwq~~

本来想刷个酷用atoi（字符串转整型）和itoa（将整型转成字符串）的，~~但突然发现atoi不会用和itoa会ce~~，就手打了一个233，~~我不会告诉你itoi是抄的原理~~。

这样这道题就变得很简单了，输入代码里讲，这题输入三个字符串，只要用atoi把要计算的两个数转成整数即可，难点就在于长度，长度=第二个输入的长度+第三个输入的长度+2+计算后的长度，计算后的长度只要用itoa转为字符串在用strlen判断即可。

__注意，代码虽长，但容易理解，请认真往下看，itoa不需要理解，windows下自带__

```cpp
#include<bits/stdc++.h>
using namespace std;
int atoi(string x)//标准的字符串转整数，可以记下来
{
	int l=x.size();
	int k=0;
	for(int i=0;i<l;i++)
		k=k*10+x[i]-'0';
	return k;
}
char* itoa(int num,char* str,int radix)
{/*索引表*/
    char index[]="0123456789ABCDEF";
    unsigned unum;/*中间变量*/
    int i=0,j,k;
    /*确定unum的值*/
    if(radix==10&&num<0)/*十进制负数*/
    {
        unum=(unsigned)-num;
        str[i++]='-';
    }
    else unum=(unsigned)num;/*其他情况*/
    /*转换*/
    do{
        str[i++]=index[unum%(unsigned)radix];
        unum/=radix;
       }while(unum);
    str[i]='\0';
    /*逆序*/
    if(str[0]=='-')
        k=1;/*十进制负数*/
    else
        k=0;
     
    for(j=k;j<=(i-1)/2;j++)
    {       char temp;
        temp=str[j];
        str[j]=str[i-1+k-j];
        str[i-1+k-j]=temp;
    }
    return str;
}
int main(){
	int n;
	cin>>n;
	string a[55];//用数组a记录每次的运算符，用于处理输入两个数的情况
	for(int i=1;i<=n;i++)
	{
		string c,b;
		cin>>a[i];//先输入运算符
		if(isdigit(a[i][0]))//如果运算符是数字，代表是输入两个数的情况
		{
			c=a[i];//那么，数字1就应该为运算符
			a[i]=a[i-1];//运算符应该为上一个
			cin>>b;//输入数字2
		}
		else//正常输入3个的情况，接下来照常执行
			cin>>c>>b;
		int cc=atoi(c),bb=atoi(b);//cc为数字c，bb为数字b
		if(a[i]=="a")//判断是是什么运算
		{
			cout<<cc<<'+'<<bb<<'='<<cc+bb<<endl;//第一行
			int l=b.size()+c.size()+2;//前面两个为cc的长度和bb的长度，2为两个符号
			
			char k[105];//k为计算结果，因为也在第一行输入的里面，所以计算结果的长度也要加上
			itoa(cc+bb,k,10);//计算后的结果转换到字符串k
            
			l+=strlen(k);//这里再加上k的长度
			cout<<l<<endl;
		 } 
		 if(a[i]=="b")//同上改一下符号就行了
		 {
		 	cout<<cc<<'-'<<bb<<'='<<cc-bb<<endl;
			int l=b.size()+c.size()+2;
			
			char k[105];
			itoa(cc-bb,k,10);
			l+=strlen(k);
			cout<<l<<endl;
		 }
		 if(a[i]=="c")同上
		 {
		 	cout<<cc<<'*'<<bb<<'='<<cc*bb<<endl;
			int l=b.size()+c.size()+2;
			char k[105];
			itoa(cc*bb,k,10);
			l+=strlen(k);
			cout<<l<<endl;
		 }
		 
	}
	return 0;
}

```

---

## 作者：七夜 (赞：2)

这道题其实还算可以，不是太难，也不算太简单

第一个问题，应该可以说是怎么读入两个或者三个数据吧

其实这个很简单，首先输入一个字符串类型的数据，判断他的首位是数字还是字符，也就是是不是数或者运算符

如果是字符，就是运算符，直接判断吧代表运算符的数据更改

如果是数字的话，代表同上类，此时需要的是把字符转换成数字来计算（方法不一样可能会，我是用数字计算）

然后剩下的就是模拟操作了，具体解释看代码

```
#include<bits/stdc++.h>//偷懒专用头文件 
#define ll long long
#define INF 101
#define MAXN 99999//宏定义 
using namespace std;
inline int read() {
	char c = getchar();
	int x = 0, f = 1;
	while(c < '0' || c > '9') {
		if(c == '-') f = -1;
		c = getchar();
	}
	while(c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();
	return x * f;
}//快读，提供借鉴 
int n,a,b;//n代表 数据得组数，a、b代表进行计算的数 
int s,ss,ans;//s记录需要进行的运算符（加减乘除），ss记录长度，ans记录计算完的答案 
string x;//字符串 
int main() {
	n=read();//读入组数 
	for(int i=1; i<=n; ++i) {//循环读入 
		cin>>x;//读入字符串 
		if(x[0]>=97&&x[0]<=100) {//如果是符号（abcd） 
			ss=0;//把长度重新变成零 
			a=read();
			b=read();//读入两个数 
			if(x[0]=='a')
				s=1;//如果是a，表示需要进行加法操作 
			if(x[0]=='b')
				s=2;//如果是b，表示需要进行减法操作 
			if(x[0]=='c')
				s=3;//如果是c,代表需要进行乘法操作 
			if(x[0]=='d')
				s=4;//如果是d，代表需要进行除法操作 
			if(s==1) {
				ans=a+b;
				cout<<a<<"+"<<b<<"="<<ans<<'\n';
			}//如果是加法操作，先进行加，然后输出第一行 
			if(s==2) {
				ans=a-b;
				cout<<a<<"-"<<b<<"="<<ans<<'\n';
			}//如果是减法操作，先进行减，然后输出第一行 
			if(s==3) {
				ans=a*b;
				cout<<a<<"*"<<b<<"="<<ans<<'\n';
			}//如果是乘法操作，先进行乘，然后输出第一行 
			if(s==4) {
				ans=a/b;
				cout<<a<<"/"<<b<<"="<<ans<<'\n';
			}//如果是除法操作，先进行除，然后输出第一行
//在这里提一下，因为下面要对a，b，ans的值进行更改，所以要提前输出 
			if(a==0)
			 ss++;//判断a是否就是零 
			while(a!=0) {
				ss++;
				a/=10;
			}//进行a的取位数操作 
		    if(b==0)
		     ss++;//判断b是否就是零 
			while(b!=0) {
				ss++;
				b/=10;
			}//进行b的取位数操作 
			if(ans<0) {
				ss++;
				ans=-ans;
			}//如果减出负数，就让他变成正的，吧符号的长度 加进去（此处顺便把ans==0的情况解决掉了） 
			while(ans!=0) {
				ss++;
				ans/=10;
			}//进行ans的取位数操作 
			cout<<ss+2<<'\n';//输出长度 
		} else {//如果是数字 
			ss=0;
			a=0;//吧a变成0，方便把x转换成数字 
			for(int i=0; i<x.size(); ++i)
				a=a*10+(x[i]-'0');//把字符串转换成数字 
			b=read();//然后读入另一个数 
//剩下的步骤与上面一模一样，就不多解释了 
			if(s==1) {
				ans=a+b;
				cout<<a<<"+"<<b<<"="<<ans<<'\n';
			}
			if(s==2) {
				ans=a-b;
				cout<<a<<"-"<<b<<"="<<ans<<'\n';
			}
			if(s==3) {
				ans=a*b;
				cout<<a<<"*"<<b<<"="<<ans<<'\n';
			}
			if(s==4) {
				ans=a/b;
				cout<<a<<"/"<<b<<"="<<ans<<'\n';
			}
		    if(a==0)
		     ss++;
			while(a!=0) {
				ss++;
				a/=10;
			}
			if(b==0)
			 ss++;
			while(b!=0) {
				ss++;
				b/=10;
			}
			if(ans<0) {
				ss++;
				ans=-ans;
			} 
			while(ans!=0) {
				ss++;
				ans/=10;
			}
			cout<<ss+2<<'\n';
		}
	}
	return 0;
}
```


---

## 作者：AdzearDisjudge (赞：2)

此题主要在于读入。我的方法是：cin读入一个字符串，如果是a,b,c就记录目前的运算法则(al)，然后cin两个字符串分别转化为a,b。

如果不是，al不变，将此字符串转化为a，然后再读入一个字符串，转化为b。

然后按当前运算法则求得结果(c)，用函数分别求a,b,c的长度，记为as,bs,cs。加上运算符号（'+' , '-' , '\*'）和'='，结果sw即为as+bs+cs+2。求长度时候特别注意两数相减得到负数的情况。

最后按要求输出即可。

AC代码：

```cpp
#include<iostream>
#include<cstring>
#include<algorithm>
#include<cstdio>
using namespace std;
string s;
int a,b,c,as,bs,cs,sw,al,i,j,k;
int algo(int a,int b,int al)
{
    switch(al)
        {
            case 1:
                return a+b;
            case 2:
                return a-b;
            default:
                return a*b;
        }
}
int siz(int n)
{
    int l,m=n;
    l=1;
    if(m<0)
    {
        ++l;
        m=-m;
    }
    while(m>9)
    {
        ++l;
        m/=10;
    }
    return l;
} 
int main()
{
    cin>>k;
    for(i=1;i<=k;++i)
    {
        cin>>s;
        if(isalpha(s[0]))
        {
            switch(s[0])
                {
                    case 'a':
                        {
                            al=1;
                            break;
                        }
                    case 'b':
                        {
                            al=2;
                            break;
                        }
                    default:
                        al=3;
                }
            a=0;
            b=0;
            cin>>s;
            for(j=0;j<s.size();++j)
            a=a*10+(s[j]-'0');
            cin>>s;
            for(j=0;j<s.size();++j)
            b=b*10+(s[j]-'0');
        }
        else
        {
            a=0;
            b=0;
            for(j=0;j<s.size();++j)
            a=a*10+(s[j]-'0');
            cin>>s;
            for(j=0;j<s.size();++j)
            b=b*10+(s[j]-'0');
        }
        c=algo(a,b,al);
        as=siz(a);
        bs=siz(b);
        cs=siz(c);
        sw=as+bs+cs+2;
        cout<<a;
        switch(al)
            {
                case 1:
                    {
                        cout<<'+';
                        break;
                    }
                case 2:
                    {
                        cout<<'-';
                        break;
                    }
                default:
                    cout<<'*';
            }
        cout<<b<<'='<<c<<endl<<sw<<endl;
    }
    return 0;
}
```

---

## 作者：Ufowoqqqo (赞：2)

模拟，考察对copy和pos函数的应用，当然也可以用delete。如果输入的算式都有三个数据会更简单，不过两个数据的也不难，每次三个数据的时候保存运算符即可。

下面提供两个版本的代码：无过程版和有过程版。

```delphi

{无过程}
var
 n,i,a,b:longint;
 s:string;
 ch:char;

function inttostr(n:longint):string;//整数转字符串，供求长度时用
var
 s:string;
begin
 str(n,s);
 exit(s)
end;

begin
 readln(n);
 for i:=1 to n do
 begin
  readln(s);
  if s[1] in ['a'..'c'] then//三个数据
                        begin
                         ch:=s[1];
                         delete(s,1,2)
                        end;
  val(copy(s,1,pos(' ',s)-1),a);//第一个运算数
  delete(s,1,pos(' ',s));
  val(s,b);//第二个运算数
  case ch of
   'a':begin
        writeln(a,'+',b,'=',a+b);
        writeln(length(inttostr(a))+length(inttostr(b))+length(inttostr(a+b))+2)
       end;
   'b':begin
        writeln(a,'-',b,'=',a-b);
        writeln(length(inttostr(a))+length(inttostr(b))+length(inttostr(a-b))+2)
       end;
   'c':begin
        writeln(a,'*',b,'=',a*b);
        writeln(length(inttostr(a))+length(inttostr(b))+length(inttostr(a*b))+2)
       end
  end
 end
end.

```
```delphi

{有过程}
var
 n,i:longint;
 s:ansistring;
 typ:char;

procedure work_1(s:string);//加法
var
 m,n,t:longint;
begin
 val(copy(s,1,pos(' ',s)-1),m);//第一个运算数
 val(copy(s,pos(' ',s)+1,length(s)),n);//第二个运算数
 writeln(m,'+',n,'=',m+n);
 t:=length(s);
 str(m+n,s);
 writeln(t+length(s)+1);
 typ:='a'
end;

procedure work_2(s:string);//减法
var
 m,n,t:longint;
begin
 val(copy(s,1,pos(' ',s)-1),m);
 val(copy(s,pos(' ',s)+1,length(s)),n);
 writeln(m,'-',n,'=',m-n);
 t:=length(s);
 str(m-n,s);
 writeln(t+length(s)+1);
 typ:='b'
end;

procedure work_3(s:string);//乘法
var
 m,n,t:longint;
begin
 val(copy(s,1,pos(' ',s)-1),m);
 val(copy(s,pos(' ',s)+1,length(s)),n);
 writeln(m,'*',n,'=',m*n);
 t:=length(s);
 str(m*n,s);
 writeln(t+length(s)+1);
 typ:='c'
end;

begin
 readln(n);
 for i:=1 to n do
 begin
  readln(s);
  if s[1] in ['a'..'c'] then
    case s[1] of
     'a':work_1(copy(s,3,length(s)));
     'b':work_2(copy(s,3,length(s)));
     'c':work_3(copy(s,3,length(s)))
    end
   else
    case typ of
     'a':work_1(s);
     'b':work_2(s);
     'c':work_3(s)
    end
 end
end.

```

---

## 作者：牟一帆mou__yifan (赞：2)

```cpp
//疯狂模拟~~~~~~
var
  m,n,i,j,k,r,s,t,u,v:longint;
  str1,pd,c,d,e,f,g,p,q:string;
  a,b:array[1..10001] of longint;
begin
  readln(n);
    for i:=1 to n do begin//初始化读入阶段
    read(str1);m:=length(str1);//先把整一行用字符串读入
    //由于一行中的第一个输入只会是a,b,c或者一个数，所以只要判断Str[1]是否为字母即可。 
    if ord(str1[1])<97 then pd:=pd+pd[i-1]//若是一个数，则pd(用来存储运算方式的字符串)就加上它的前一种运算方式(题意便是如此)
      else begin
      pd:=pd+str1[1];delete(str1,1,2);dec(m,2);//若是，则pd加上新的运算方式，同时Str去掉前两位(运算方式和空格)，便于后面操作
    end;
      for j:=1 to m do begin
      if str1[j]=' ' then begin val(p,a[i]);break;end else p:=p+str1[j];
    end;
    for k:=j+1 to m do q:=q+str1[k];
    val(q,b[i]);//将两数分离出来，分别存储在a,b数组中
    delete(p,1,length(p));
    delete(q,1,length(q));//p,q还原
    readln;
  end;
    for i:=1 to n do begin//查找输出答案阶段
    str(a[i],c);str(b[i],d);str(a[i]+b[i],e);
    str(a[i]-b[i],f);str(a[i]*b[i],g);
    r:=length(c);s:=length(d);t:=length(e);u:=length(f);v:=length(g);//把每一种运算后的结果都列举一遍，并记录长度
      case pd[i] of
      'a':begin
          writeln(a[i],'+',b[i],'=',a[i]+b[i]);
          writeln(r+s+t+2);//“2”表示两个空格长度
          end;
      'b':begin
          writeln(a[i],'-',b[i],'=',a[i]-b[i]);
          writeln(r+s+u+2);
          end;
      'c':begin
          writeln(a[i],'*',b[i],'=',a[i]*b[i]);
          writeln(r+s+v+2);
          end;//应该看懂了吧
    end;
  end;
end.
```

---

## 作者：龙尊下凡 (赞：1)

**解这道题真的需要关于很多字符串的知识，我因为没记牢，翻书好几十次，还ce了11次，wa了一次，然后AC

```pascal
var
s,s1:array[1..50] of string;
a:array[1..50] of char;
x,y,i,n:longint;
mn:string;
begin
readln(n);
for i:=1 to n do 
begin
 readln(s[i]);
 if s[i,1]='a' then begin a[i]:='+'; delete(s[i],1,2); end else
 if s[i,1]='b' then begin a[i]:='-'; delete(s[i],1,2); end else
 if s[i,1]='c' then begin a[i]:='*'; delete(s[i],1,2); end else
 a[i]:=a[i-1];//这几步是为了确定运算符号
end;
for i:=1 to n do
begin
x:=0;
y:=0;
val(copy(s[i],1,(pos(' ',s[i])-1)),x);                //确定第一个运算数
val(copy(s[i],(pos(' ',s[i])+1),length(s[i])),y);//此处是第二个
  case a[i] of
   '+':str(x+y,mn);
   '-':str(x-y,mn);
   '*':str(x*y,mn);
  end;// 根据不同情况确定运算结果，因为两个运算数据不超过10000，所以longint就够了
  case a[i] of
   '+':s1[i]:=copy(s[i],1,(pos(' ',s[i])-1))+'+'+copy(s[i],(pos(' ',s[i])+1),length(s[i]))+'='+mn;
   '-':s1[i]:=copy(s[i],1,(pos(' ',s[i])-1))+'-'+copy(s[i],(pos(' ',s[i])+1),length(s[i]))+'='+mn;
   '*':s1[i]:=copy(s[i],1,(pos(' ',s[i])-1))+'*'+copy(s[i],(pos(' ',s[i])+1),length(s[i]))+'='+mn;
  end;//确定整个算式
end;
for i:=1 to n do
begin
writeln(s1[i]);
writeln(length(s1[i]));//最终输出
end;
end.
```

---

## 作者：cenbinbin (赞：1)

字符串的应用，pos虽然比较慢，但我还是用了

========================================================================

```cpp
var
  st,s1,s2:string;
  n,i,f1:longint;
procedure work1(s1,s2:string);
var x,y:longint; s3:string;
begin
  val(s1,x);val(s2,y);
  x:=x+y;
  str(x,s3);
  writeln(s1,'+',s2,'=',s3);
  writeln(length(s1)+1+length(s2)+1+length(s3));
end;
procedure work2(s1,s2:string);
var x,y:longint; s3:string;
begin
  ***{类似的，自己理解地写}
end;
procedure work3(s1,s2:string);
var x,y:longint; s3:string;
begin
  ***{类似的，自己理解地写}
end;
begin
  readln(n);//读入
  for i:=1 to n do
   begin
     readln(st);
     if st[1]='a' then//若是加法
      begin
        delete(st,1,2);
        s1:=copy(st,1,pos(' ',st)-1);
        s2:=copy(st,pos(' ',st)+1,length(st));
        work1(s1,s2);
        f1:=1;//为只有两个数做铺垫
      end else
     if st[1]='b' then
      begin
        delete(st,1,2);
        s1:=copy(st,1,pos(' ',st)-1);
        s2:=copy(st,pos(' ',st)+1,length(st));
        work2(s1,s2);
        f1:=2;//为只有两个数做铺垫
      end else
     if st[1]='c' then
      begin
        delete(st,1,2);
        s1:=copy(st,1,pos(' ',st)-1);
        s2:=copy(st,pos(' ',st)+1,length(st));
        work3(s1,s2);
        f1:=3;//为只有两个数做铺垫
      end else
      begin//若只有两个数，则
        case f1 of
         1:work1(copy(st,1,pos(' ',st)-1),copy(st,pos(' ',st)+1,length(st)));
         2:work2(copy(st,1,pos(' ',st)-1),copy(st,pos(' ',st)+1,length(st)));
         3:work3(copy(st,1,pos(' ',st)-1),copy(st,pos(' ',st)+1,length(st)));
        end;
      end;
   end;
end.
```

---

## 作者：1jia1 (赞：1)

这题其实十分简单，简单得不得了。不过好像同学们都是死在输入上，他们直接getline。我的输入方式是读入两次，先读入第一个，如果是数字就继续读入。如果是字母，就再读入两次。

核心思路：直接计算，不然还有啥啊。

```cpp
-#include <iostream>-
-#include <string>-
-using namespace std;-
-char yun;-
-string pp;-
-long long a,b,c,n,l=0;-
-int main()-
-{-
-    cin>>n;-
-    for(int i=1;i<=n;i++)-
-    {-
-        a=0,b=0;-
-        for(int o=1;o<=2;o++)---读入两次
-        {-
-            cin>>pp;---先读入第一个
-            if(pp=="a")yun='+',o--;---如果是字母，就先记住运算符号，然后再读两次。
-            else if(pp=="b")yun='-',o--;-
-            else if(pp=="c")yun='*',o--;-
-            else if(o==1)for(int oo=0;oo<pp.size();oo++)a=a*10+(pp[oo]-48);---如果是数字，就转换。
-            else for(int oo=0;oo<pp.size();oo++)b=b*10+(pp[oo]-48);-
-        }-
-        if(yun=='+')c=a+b;---计算
-        else if(yun=='-')c=a-b;---计算
-        else if(yun=='*')c=a*b;---计算
-        cout<<a<<yun<<b<<'='<<c<<endl;---高大上输出
-        l=0;---初始化长度
-        if(a<0)l++;---如果有负数，符号也算一格。
-        if(b<0)l++;-
-        if(c<0)l++;-
-       if(a==0)l++;else while(a)a/=10,l++;---如果是0，就+1（0也是一个长度），否则计算长度
-        if(b==0)l++;while(b)b/=10,l++;-
-        if(c==0)l++;while(c)c/=10,l++;-
-        l+=2;---加上+和=的长度
-        cout<<l<<endl;---输出
-    }-
-    return 0;-
-}-
完美~
```

---

## 作者：PC_DOS (赞：1)

这是一个非常非常暴力的做法，大致就是逐行读入"指令"，然后对它进行解析。需要注意的是在Linux中直接GetLine()可能会在字符串末尾带一些不需要的东西导致后续出错并全部WA。

这里顺手写了几个通用的字符串函数，虽说效率并不高...

这里用了C++ 11的to\_string()函数。

```cpp
#include <iostream>
#include <iomanip>
#include <cmath>
#include <string>
#include <cstring>
#include <algorithm>
#include <vector>
#include <sstream> //平时常用的几个库 ^_^
using namespace std;
string strReverse(string strOrigin){ //字符串倒序函数
    long i;
    string ans;
    for (i = strOrigin.length() - 1; i >= 0; --i) ans += strOrigin[i];
    return ans;
}
string strLeft(string strOrigin, int nCount){ //字符串取左边nCount个字符
    if (nCount >= strOrigin.length()) return strOrigin;
    long i;
    string ans("");
    for (i = 0; i <= nCount - 1; ++i){
        ans += strOrigin[i];
    }
    return ans;
}
string strRight(string strOrigin, int nCount){ //字符串取右边nCount个字符
    if (nCount >= strOrigin.length()) return strOrigin;
    long i;
    string ans("");
    for (i = strOrigin.length() - 1;; --i){
        ans += strOrigin[i];
        if (ans.length() == nCount) break;
    }
    ans = strReverse(ans);
    return ans;
}
long long to_int(string sNumber){ //字符串转为整数(支持负数，不支持小数，遇到非法字符视为该位为0)
    long long i;
    long long lRet=0;
    if (sNumber.length() == 0)
        return 0;
    sNumber = strReverse(sNumber);
    if (sNumber[sNumber.length() - 1] == '-'){
        for (i = 0; i <= sNumber.length() - 2; ++i)
            if ('0' <= sNumber[i] && sNumber[i] <= '9')lRet += (sNumber[i] - '0')*pow(10, i);
        return -lRet;
    }
    else{
        for (i = 0; i <= sNumber.length() - 1; ++i)
            if ('0' <= sNumber[i] && sNumber[i] <= '9')lRet += (sNumber[i] - '0')*pow(10, i);
        return lRet;
    }
}
int main(){
    ios::sync_with_stdio(false);
    string sCommand,sNumber1,sNumber2,sAns,sResult; //5个字符串:指令，第一个数，第二个数，算式，算式及其长度
    vector<string> sOut; //存放输出的数组
    int i, j, nCount; //循环变量以及指令总数
    int iCurrentOperator; //操作符，1=+,2=-,3=*
    int iSpace1; //存放空格位置的变量
    bool isTrim=false; //确定是否需要处理字符串
    cin >> nCount; //读入指令总数
    getline(cin, sResult); //去掉输入nCount之后留下的不需要的数据，否则会RE
    sResult = ""; //清空暂存区
    for (i = 1; i <= nCount; ++i){ //读入指令并加以处理
        getline(cin, sCommand); //读入一行指令
        for (j = 0; j <= sCommand.length() - 1; ++j){ //查找字符串末尾的非法字符
            if (!(sCommand[j] == ' ' || sCommand[j] <= '9' && sCommand[j] >= '0' || sCommand[j] <= 'c' && sCommand[j] >= 'a')){
                isTrim = true;
                break;
            } //如果找到非法字符，就退出并要求字符串截取
        }
        if (isTrim) sCommand = strLeft(sCommand,j); //需要时进行字符串截取
        isTrim = false; //等待下一次指令处理
        switch(sCommand[0]){ //判断第一个字符是不是a、b或c，如果是就设置操作符并把字母和后面的空格去掉
        case 'a':
            iCurrentOperator = 1;
            sCommand = strRight(sCommand, sCommand.length() - 2);
            break;
        case 'b':
            iCurrentOperator = 2;
            sCommand = strRight(sCommand, sCommand.length() - 2);
            break;
        case 'c':
            iCurrentOperator = 3;
            sCommand = strRight(sCommand, sCommand.length() - 2);
            break;
        }
        for (iSpace1 = 0; iSpace1 <= sCommand.length() - 1; ++iSpace1){
            if (sCommand[iSpace1] == ' ') break;
        } //查找处理后的字符串中的空格
        sNumber1 = strLeft(sCommand, iSpace1); //获得第一个数
        sNumber2 = strRight(sCommand, sCommand.length() - 1 - iSpace1); //获得第二个数
        switch (iCurrentOperator){ //生成算式以及长度
        case 1:
            sAns = sNumber1 + '+' + sNumber2 + '=' + to_string(to_int(sNumber1) + to_int(sNumber2));
            sResult = sAns + '\n' + to_string(sAns.length());
            sOut.push_back(sResult);
            break;
        case 2:
            sAns = sNumber1 + '-' + sNumber2 + '=' + to_string(to_int(sNumber1) - to_int(sNumber2));
            sResult = sAns + '\n' + to_string(sAns.length());
            sOut.push_back(sResult);
            break;
        case 3:
            sAns = sNumber1 + '*' + sNumber2 + '=' + to_string(to_int(sNumber1) * to_int(sNumber2));
            sResult = sAns + '\n' + to_string(sAns.length());
            sOut.push_back(sResult);
            break;
        default:
            break;
        }
    }
    for (i = 0; i <= nCount - 1; ++i) //输出
        cout << sOut[i] << endl;
    return 0; //老师再见
}
```

---

## 作者：rgq233666 (赞：0)

额，卡了好久都是没看题
```pascal
var s,s1,s2,l1,l2,l4:string;
    j,k,n,l,l3,c:int64;
    i1,i2,i3,i4:int64;
    i,m:longint; //m做记录
    begin
    read(n);
    for i:=0 to n do
    begin
     readln(s);
     if s='' then continue;
     i1:=pos('a',s);//查找a;
     i2:=pos('b',s);//查找b;
     i3:=pos('c',s);//查找c;
     if i1<>0 then begin m:=1;
     delete(s,1,i1+1);  end;
     if i2<>0 then begin m:=2;
     delete(s,1,i2+1);  end;
     if i3<>0 then begin m:=3;
     delete(s,1,i3+1);  end;
     i4:=pos(' ',s);
     s1:=copy(s,1,i4-1);
     val(s1,k);
     delete(s,1,i4);
     val(s,l);
     //判断ing
     if (m=1)and(i1=0)and(i2=0)and(i3=0) then //两个数据的判断
      begin
      str(k,l1); str(l,l2); c:=k+l; write(l1,'+',l2,'='); write(k+l); writeln; str(c,l4); l3:=length(l1+l2+l4)+2; writeln(l3); end;
      if (m=2)and(i1=0)and(i2=0)and(i3=0) then
      begin
      str(k,l1); str(l,l2); c:=k-l; write(l1,'-',l2,'='); write(k-l); writeln; str(c,l4); l3:=length(l1+l2+l4)+2; writeln(l3); end;
      if (m=3)and(i1=0)and(i2=0)and(i3=0) then
      begin
      str(k,l1); str(l,l2); c:=k*l; write(l1,'*',l2,'='); write(k*l); writeln; str(c,l4); l3:=length(l1+l2+l4)+2; writeln(l3); end;
      //正常判断
     if (i1<>0) then begin str(k,l1); str(l,l2); c:=k+l; write(l1,'+',l2,'='); write(k+l); writeln; str(c,l4); l3:=length(l1+l2+l4)+2; writeln(l3); end;
     if (i2<>0) then begin str(k,l1); str(l,l2); c:=k-l; write(l1,'-',l2,'='); write(k-l); writeln; str(c,l4); l3:=length(l1+l2+l4)+2; writeln(l3); end;
     if (i3<>0) then begin str(k,l1); str(l,l2); c:=k*l; write(l1,'*',l2,'='); write(k*l); writeln; str(c,l4); l3:=length(l1+l2+l4)+2; writeln(l3); end;
     end;
    end.

```

---


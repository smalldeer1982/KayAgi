# 「Cfz Round 5」Non-breath Oblige

## 题目背景

それぞれの好きを守るため  
为了保护各自的喜爱之物

君と防空壕で呼吸する  
与你在防空壕中一同呼吸

## 题目描述

给定三个整数 $n,s,t$，其中 $0 \le s,t \lt 2^n$。

你可以进行若干次操作。每次操作，你可以选择一个非负整数 $x$ 并把 $s$ 的值修改为 $x$，但有如下要求：

- 必须满足 $x<2^n$；
- 必须满足 $s\lor x=2^n-1$，其中 $\lor$ 为按位或运算；
- 你需要花费 $s\oplus x$ 的代价，其中 $\oplus$ 为按位异或运算。

你需要求出使 $s=t$ 所需代价之和的最小值。可以证明一定可以使 $s$ 与 $t$ 相等。

## 说明/提示

#### 「样例解释 #1」

对于第 $1$ 组测试数据，由于 $1 \cup 2 = 3$，所以可以直接将 $s$ 的值从 $1$ 修改为 $2$，此时的代价为 $1 \oplus 2$，即 $3$。可以证明使 $s=t$ 所需代价之和的最小值为 $3$。

对于第 $2$ 组测试数据，不需要进行操作即可满足 $s=t$。

#### 「数据范围」

对于所有测试数据，保证：

- $1 \le T \le 100$；
- $1 \le n \le 30$；
- $0 \le s,t \lt 2^n$。

**本题采用捆绑测试。**

- Subtask 0（12 points）：$s=t$。
- Subtask 1（15 points）：$n=1$。
- Subtask 2（20 points）：$s+t=2^n-1$。
- Subtask 3（10 points）：$t=2^n-1$。
- Subtask 4（18 points）：$t=0$。
- Subtask 5（25 points）：无特殊限制。

## 样例 #1

### 输入

```
3
2 1 2
3 1 1
5 1 4```

### 输出

```
3
0
57```

# 题解

## 作者：Coffee_zzz (赞：11)

### Solution 1

$s=t$ 时答案显然为 $0$，只需要考虑 $s \ne t$ 时的情况。

断言：将 $s$ 的值先修改为 $2^n-1$ 再修改为 $t$ 一定不劣。

证明：首先这样显然是满足两个限制条件的，所以我们可以这样操作。接下来，对于每个二进制位，设 $s$ 中该位为 $a$，$t$ 中该位为 $b$，则我们可以根据 $a$ 和 $b$ 的值分类讨论，得到**必须进行**的操作：

- 若 $a=b=0$，由于第二条限制，必须先将 $a$ 的值修改为 $1$ 再修改为 $0$。
- 若 $a=0$，$b=1$，则必然会将 $a$ 的值修改为 $1$ 至少一次。
- 若 $a=1$，$b=0$，则必然会将 $a$ 的值修改为 $0$ 至少一次。
- 若 $a=b=1$，则没有必须进行的操作。

我们发现「将 $s$ 的值先修改为 $2^n-1$ 再修改为 $t$」只进行了必须进行的操作，只会付出进行这些操作的代价，于是证明了这样操作一定不劣。

当然，还有其他的证明方式同样可以得到该结论。

根据结论，我们直接输出 $(s \oplus (2^n-1))+((2^n-1)\oplus t)$ 即可。

### Solution 2

由于需要满足 $s \cup x = 2^n-1$，所以 $s$ 和 $x$ 在每个二进制位中至少需要有一位为 $1$；  
由于代价为 $s \oplus x$，所以 $s$ 和 $x$ 在二进制下相同的位数越多越好。

所以对于所有满足条件的 $x$，$x=2^n-1$ 时代价最小。

$s=t$ 时输出 $0$，否则判断一下是否能一步从 $s$ 变到 $t$，和 $s$ 变到 $2^n-1$ 再变到 $t$ 的代价取个 $\min$ 即可。

其实可以证明，从 $s$ 变到 $2^n-1$ 再变到 $t$ 一定不比直接从 $s$ 变到 $t$ 劣，但是不知道也已经能做了。

---


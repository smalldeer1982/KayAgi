# 排队顺序

## 题目描述

有 $n(2 \le n\le 10^6)$ 个小朋友，他们的编号分别从 $1$ 到 $n$。现在他们排成了一个队伍，每个小朋友只知道他**后面**一位小朋友的编号。现在每个小朋友把他后面是谁告诉你了，同时你还知道排在队首的是哪位小朋友，请你从前到后输出队列中每个小朋友的编号。

## 样例 #1

### 输入

```
6
4 6 0 2 3 5
1```

### 输出

```
1 4 2 6 5 3```

# 题解

## 作者：ShanCreeperPro (赞：25)

## B3630 排队顺序 題解

**管理员注：**

阅读本文章前，请先阅读[$ \ \texttt{ShanCreeper}$ B 题库题解的声明](https://www.luogu.com.cn/blog/Ru19Free/AboutBProblem)，并了解由于课程需要不展示代码。

**如需系统学习相关知识点请报名【[洛谷-基础算法计划](https://class.luogu.com.cn/)】**

点赞上文章即代表您已阅读并熟知其内容。

***

有 $n$ 个人，每个人只知道自己的身后是谁，已知第一位人的编号，输出整个排列顺序。

我们可以使用链表完成：

- 建立数组 $\texttt{nxt}$ 表示每个人身后人的编号；
- 定义 $\texttt{now}$ 表示当前指针，初始为 $\texttt{head}$；
- 如果 $\texttt{now}$ 不是 $0$ 时，输出 $\texttt{now}$，并将 $\texttt{now}$ 变为下一个指针位置。

比如数据：4 6 0 2 3 5。

我们可以先列一个表格。

|$i$|1|2|3|4|5|6|
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
|$\texttt{nxt}_i$|4|6|0|2|3|5|

假设队首为 1 号，则 $i$ 次循环 $\texttt{now}$ 和 $\texttt{nxt}_\texttt{now}$ 的值如下：

|$i$|$\texttt{now}$|$\texttt{nxt}_\texttt{now}$|
| -----------: | -----------: | -----------: |
|1|$1$|$\texttt{nxt}_1 = 4$  |
|2|$4$|$\texttt{nxt}_4 = 2$|
|3|$2$|$\texttt{nxt}_2 = 6$|
|4|$6$|$\texttt{nxt}_6 = 5$|
|5|$5$|$\texttt{nxt}_5 = 3$|
|6|$3$|$\texttt{nxt}_3 = 0$|

所以输出为：$1 \ 4 \ 2 \ 6 \ 5 \ 3 $。

但是，如果不知道 $\texttt{head}$ 怎么办呢？

很简单，如果一个编号如果没有出现在任何一个人的后面，那么他就是第一个人。

---

## 作者：Time_Complexity (赞：16)

## B3630 排队顺序 题解

**管理员注：**

写 B 题库的题解不放代码的原因：[$ \ \texttt{ShanCreeper}$ B 题库题解的声明](https://www.luogu.com.cn/blog/Ru19Free/AboutBProblem)。

我就直接搬 $\texttt{Creeper}$ 的了！

**如需系统学习相关知识点请报名【[洛谷-基础算法计划](https://class.luogu.com.cn/)】**

***

我们知道开头的是谁，然后找下一名同学是谁，再根据下一个同学的信息找下一位同学...

|$\texttt{head}$|$i$|1|2|3|4|5|6|
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
|$1$|$a_i$|4|6|0|2|3|5|

所以答案为：1 4 2 6 5 3。

这种一个接一个的，像链条一样串起来，这种数据结构就叫链表。


因此，代码实现如下：

- 建立链表的数组，用来存储每一位同学的后面同学的编号；
- 读入数据；
- 定义变量 $\texttt{now}$ 为当前枚举的人，$\texttt{now}$ 的初始值为 $\texttt{head}$；
- 当 $\texttt{now}$ 不为 0 时，输出并变为 $n_{\texttt{now}}$，即这个同学的下一位同学的编号；
- 如果 $\texttt{now}$ 为 0，代表这位同学的身后没有人。




---


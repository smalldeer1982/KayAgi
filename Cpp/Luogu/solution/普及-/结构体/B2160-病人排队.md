# 病人排队

## 题目描述

编写一个程序，将登记的病人按照以下原则排出看病的先后顺序：
1. 老年人（年龄 $\geq 60$ 岁）比非老年人优先看病。
2. 老年人按年龄从大到小的顺序看病，年龄相同的按登记的先后顺序排序。
3. 非老年人按登记的先后顺序看病。

## 样例 #1

### 输入

```
5
021075 40
004003 15
010158 67
021033 75
102012 30```

### 输出

```
021033
010158
021075
004003
102012```

# 题解

## 作者：chen_zhe (赞：14)

欢迎报名[洛谷网校](https://class.luogu.com.cn/)，期待和大家一起进步！

本题考察结构体，排序。

我们使用结构体存储每位病人的信息：字符串 `id` 表示病人的 ID，整数 `ag` 表示病人的年龄，整数 `rk` 表示登记顺序（越小越早）：

```cpp
struct P {
    string id;
    int ag;
    int rk;
};
```

本题的关键在于排序规则。对于第 $i$ 个人和第 $j$ 个人来说：
- 如果 $i$ 不是老年人，而 $j$ 是老年人，则需要交换；
- 如果 $i,j$ 都是老年人，则当下列：
    - $i$ 的年龄小于 $j$；
    - $i$ 和 $j$ 年龄相等，但是 $i$ 来的比 $j$ 晚    
  两个条件满足其一，则需要交换；

使用冒泡排序的参考代码：

```cpp
for (int i = 1; i <= n-1; ++i) {
    for (int j = 1; j <= n-i; ++j) {
        bool sw = false;
        bool sen1 = (a[j].ag >= 60);
        bool sen2 = (a[j+1].ag >= 60);
        if (sen2 && !sen1)
            sw = true;
        else if (sen1 && sen2) {
            if (a[j].ag < a[j+1].ag) sw = true;
            else if (a[j].ag == a[j+1].ag && a[j].rk > a[j+1].rk)
                sw = true;
        }
        if (sw)
            swap(a[j], a[j+1]);
    }
}
```

如果使用 `sort` 进行结构体排序，则参考的自定义比较函数如下：

```cpp
bool cmp(P x, P y) {
    bool sx = (x.ag >= 60);
    bool sy = (y.ag >= 60);
    if (sx != sy) return sx;
    if (sx && sy) {
        if (x.ag != y.ag) return x.ag > y.ag; 
        return x.rk < y.rk;
    }
    return x.rk < y.rk;
}
```

---


# [蓝桥杯 2023 国研究生组] 钉板上的正方形

## 题目描述

小蓝有一个大小为 $10 \times 10$ 钉板，如下图所示，上面等距分布着 $10 \times 10$ 个钉槽（上下/左右相邻的钉槽之间的距离均相同）。其中有一些钉槽上面有钉子，在图中用红色来进行标注，白色则表示此处没有钉子。小蓝喜欢用橡皮筋在钉子上围出正方形图案，即选择钉板上的四个钉子，将其作为正方形的四个顶点，从而把橡皮筋拉伸为一个正方形。

![](https://cdn.luogu.com.cn/upload/image_hosting/7vryupy3.png)

现在，小蓝想要知道在这个钉板上，可以围出多少种边长不同的正方形？（相同边长的正方形均视作是同一种，不用考虑正方形的位置）。图中展示了三种不同边长的正方形，其中蓝色线条表示橡皮筋。

# 题解

## 作者：weifengzhaomi (赞：7)

写蓝题绿题题解没过，愤恨恨来写黄题题解~~我没不信过不了了~~。

前记：本人在一开始算的时候没考虑到部分方块，截止目前，有三分之一是我提交的了。

### 题意：

本题给了我们一个钉板，要我们算出一共有多少个大小不一的正方形。

为了方便处理，我们可以把钉板存入数组中。

为了方便，我们设 $n = 10$，也就是顶板的大小。


```cpp
const int s[10][10] = {
	{1,1,0,1,0,1,1,1,1,1},
	{1,1,1,0,0,1,1,1,1,0},
	{1,1,0,0,1,0,1,1,1,1},
	{1,0,1,1,0,1,1,1,1,0},
	{1,0,1,0,1,1,1,1,0,0},
	{1,0,0,1,0,1,0,1,0,1},
	{1,1,1,1,1,1,1,1,1,0},
	{0,1,1,1,1,1,1,1,1,0},
	{0,1,1,0,1,0,1,1,1,1},
	{1,0,1,0,0,1,0,1,0,0}
	// 1就是有钉子，0就是没有
};
```


### 思路：

#### 思路 1.0：

可以发现，这个钉板只有 $10 \times 10$ 的大小。

于是我们可以手算，然后提交答案。

时间复杂度 $O(1)$。

#### 思路 2.0：

~~什么？要手算？我从来不手算~~。

但是手算有点麻烦，我们可以用编程来计算。

枚举每个顶点，然后判断 4 个角是不是都有钉子。

然后统计答案。

时间复杂度 $O(n ^ 4)$。

#### 思路 3.0：

然而枚举四个角不但浪费了很多时间，还有很多本身就不是一个正方形的，这个时候要怎么办？

我们可以换一种思路，枚举正方形的每条边，然后枚举当前的位置，判断四个角有没有顶点，有的话更新一下答案。

时间复杂度 $O(n ^ 3)$。

最终在各种思路的推算下，得出答案为 $21$。

虽然这道题思路 1 和 2 就可以过了，但是我们还是进行了优化，尽管没有任何意义，但是也可以提升一下思维，说不定在以后就有的能用得上呢。

---

## 作者：wenqinghua1001 (赞：4)

## 思路

这题一看，用暴力解决，手推答案是 $21$（~~手麻了~~）。

暴力枚举正方形边长（对角线长度假设也是 $1$），分为两种情况：正着的正方形或斜着的正方形，时间复杂度是 $O(n^4)$，把答案求出后输出。

更快的方法是，暴力枚举任意两个点，求出另外两个点，判断另外两个点**是否存在**。

已知 $A$，$B$ 两个点，$AB$ 是从 $A$ 点到 $B$ 点的这条线段，求出另外两个点，有两种可能：

第一种可能：$AB$ 为边：此时另外两个点可以通过向量旋转得到，有两种可能。

第二种可能：$AB$ 为对角线：此时另外两个点可以通过中点旋转得到，有一种可能。

但这题不需要，直接用 $O(n^4)$ 解决，先打个表格。

```cpp
int S[11][11]={
	{0,0,0,0,0,0,0,0,0,0,0},
	{0,1,1,0,1,0,1,1,1,1,1},
	{0,1,1,1,0,0,1,1,1,1,0},
	{0,1,1,0,0,1,0,1,1,1,1},
	{0,1,0,1,1,0,1,1,1,1,0},
	{0,1,0,1,0,1,1,1,1,0,0},
	{0,1,0,0,1,0,1,0,1,0,1},
	{0,1,1,1,1,1,1,1,1,1,0},
	{0,0,1,1,1,1,1,1,1,1,0},
	{0,0,1,1,0,1,0,1,1,1,1},
	{0,1,0,1,0,0,1,0,1,0,0}
};
```

设 $A$，$B$，$C$，$D$ 为正方形的四个点，设 $Ax$，$Ay$，$Bx$，$By$，$Cx$，$Cy$，$Dx$，$Dy$ 为正方形的四个点的坐标，满足 $S_{Ax,Ay}=S_{Bx,By}=S_{Cx,Cy}=S_{Dx,Dy}=1$，且 $AB=BC=CD=AD$。

---

## 作者：封禁用户 (赞：2)

题目给定一个 $10 \times 10$ 的钉板，还说我们的正方形的四个顶点都要是钉子。让我们统计所有可能的**不同边长**的正方形数量！

首先我们可以将钉板弄成坐标系，左下角为 $(0,0)$，右上角为 $(9,9)$，钉子位置记为点集 $P = \{(x,y) \mid \text{钉板}[x][y] = 1\}$。

四个点 $A(x_1,y_1), B(x_2,y_2), C(x_3,y_3), D(x_4,y_4)$ 构成正方形的必要的要条件是：

- 四条边必须长度相等：$AB = BC = CD = DA$。
- 两条对角线必须长度相等：$AC = BD$。

最后我们可以得出结论：

- $C = B + (-dy, dx)$，$D = A + (-dy, dx)$。
- 或者：$C = B + (dy, -dx)$，$D = A + (dy, -dx)$。

最后检查 $C$ 和 $D$ 是否在 $P$ 中，且 $A \neq B \neq C \neq D$。

答案是 **21**。

```
#include<bits/stdc++.h>
using namespace std;
int main(){
    cout << 21;
    return 0;
}
//输出即可，求通过
```

---

## 作者：BeansKing (赞：2)

# P12242

## 题目大意：
在题目给出的表格中，橙色点为钉子，用橡皮筋套钉子，问能套出几个边长不同的正方形？

## 题目解法：

暴力手算（逃：



![](https://cdn.luogu.com.cn/upload/image_hosting/2tcrwi71.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/7j46l52l.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/uf079p4m.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/3t7l3lip.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/55a45a20.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/5byvz801.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/q9ck78m2.png?x-oss-process=image/resize,m_lfit,h_170,w_225)![](https://cdn.luogu.com.cn/upload/image_hosting/pdjk4onq.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/saa1g9qj.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/z0nl7pg8.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/82l7ippv.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/30ow399e.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/u0gs5lit.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/ruvhjb7r.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/xus366yj.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/6zxkm5i4.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/87izat1l.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/w4kleszn.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/alfv3tkw.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/usd1809s.png?x-oss-process=image/resize,m_lfit,h_170,w_225)
![](https://cdn.luogu.com.cn/upload/image_hosting/m6efry5u.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

以上共 21 种。

## code：
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
  cout<<21;
}
```

---

## 作者：akaryan (赞：1)

### [题目传送门](https://www.luogu.com.cn/problem/P12242)
## 题意
本题给出一个 $10 \times 10$ 的钉板，板上部分钉槽有钉子，部分没有。要找出用橡皮筋在钉子上围出的不同边长正方形的数量，相同边长的正方形视为同一种，不考虑正方形的位置。

## 思路

首先，我们知道，这个图的大小不超过 $10$。

然后，我们分类讨论即可。

1. 正放着的正方形。

   + 首先，题目要确保每个正方形不同，这意味着，即使不同位置，但如果边长相同，那也属于同一个，然后，我们手动暴力枚举或者代码暴力枚举一下即可，但要注意的是：**正方形一个点确定了，可能有四种不同的方向来解决，但是我们只需要考虑三种方向，不考虑向后**。为什么呢，因为，如果往后是一个合法的正方形的话，那么前面的点就会枚举到，如果往后考虑，答案甚至会重复。至于怎么判断，直接用一个数组把题目的图按照表的形式抄下来就好啦！代码见末尾。
  
2. 斜着放的正方形。

    + 这种正方形有点特殊，由于有两种不同的角度，所以，我们**手动枚举**，经过手算，得出一共有 $11$ 个，再加上我们一开始的结果，得出答案是 $21$。

## 代码

正解代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
int main() {
	puts("21");
	return 0;
}    
```

暴力代码：
```cpp
	for (int i = 1 ; i <= 10 ; i ++){//枚举边长
		for (int j = 1 ; j <= 10 ; j ++){
			for (int k = 1 ; k <= 10 ; k ++){//枚举其中一个点
				if (/*往上有正方形*/) ans ++;
				if (/*往下有正方形*/) ans ++;
				if (/*往前有正方形*/) ans ++;
			}
		}
	}
	printf("%d\n" , ans + 11);
```

---

## 作者：Zqx_Vector_2014 (赞：1)

通过不断地试，我终于知道了答案是 $21$。

不过总得知道是为什么吧。本题有点误导人，它的正方形不一定是正着或正斜着的。但画图有麻烦又费时间，所以，我打算以画图的方式来呈现这篇题解。

由于前三幅已经有了，所以我就从第四幅呈现起。

第 **4** 幅：

![4](https://cdn.luogu.com.cn/upload/image_hosting/z72rkm1w.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **5** 幅：

![5](https://cdn.luogu.com.cn/upload/image_hosting/2o3lr6pq.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **6** 幅：

![5](https://cdn.luogu.com.cn/upload/image_hosting/jgo7kqp1.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **7** 幅：

![7](https://cdn.luogu.com.cn/upload/image_hosting/sbcheifh.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **8** 幅：

![8](https://cdn.luogu.com.cn/upload/image_hosting/x3mkycpm.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **9** 幅：

![9](https://cdn.luogu.com.cn/upload/image_hosting/x054gtls.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **10** 幅：

![10](https://cdn.luogu.com.cn/upload/image_hosting/dygpq2p9.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **11** 幅：

![11](https://cdn.luogu.com.cn/upload/image_hosting/a6srk6zg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **12** 幅：

![12](https://cdn.luogu.com.cn/upload/image_hosting/bg7gh0m2.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **13** 幅：

![13](https://cdn.luogu.com.cn/upload/image_hosting/46p7zhx0.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **14** 幅：

![14](https://cdn.luogu.com.cn/upload/image_hosting/m1t6fgis.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **15** 幅：

![15](https://cdn.luogu.com.cn/upload/image_hosting/jlwtmx4g.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **16** 幅：

![16](https://cdn.luogu.com.cn/upload/image_hosting/rpxcsino.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **17** 幅：

![17](https://cdn.luogu.com.cn/upload/image_hosting/y7tojazr.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **18** 幅：

![18](https://cdn.luogu.com.cn/upload/image_hosting/wvab9k61.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **19** 幅：

![19](https://cdn.luogu.com.cn/upload/image_hosting/9m9zqlzb.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **20** 幅：

![20](https://cdn.luogu.com.cn/upload/image_hosting/ra6lz0t5.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

第 **21** 幅：

![21](https://cdn.luogu.com.cn/upload/image_hosting/1e2u09cj.png?x-oss-process=image/resize,m_lfit,h_170,w_225)

所以，答案言归正传的就是 $21$ 啦。

```
#include<bits/stdc++.h>
using namespace std;
#define int long long

signed main(){
	ios::sync_with_stdio(0),
	cin.tie(0),cout.tie(0);
	cout<<"21";
	return 0;
}
```

---

## 作者：wjh27465 (赞：0)

# 题解：P12242 [蓝桥杯 2023 国研究生组] 钉板上的正方形
## 思路
由于本题为提交答案题，所以我们可以把它当作小学数学题，直接通过暴力枚举解决一切问题。  
### 横平竖直的正方形：
![](https://cdn.luogu.com.cn/upload/image_hosting/wfunxf4q.png)
共有 $8$ 个。
### 斜 $45°$的正方形：
![](https://cdn.luogu.com.cn/upload/image_hosting/n1rrpb7t.png)
共有 $3$ 个。
### 其他正方形：
这部分正方形比较复杂，非常容易漏数，仔细画图后就能发现共有 $10$ 个。
### 总结
![](https://cdn.luogu.com.cn/upload/image_hosting/6pjrm61k.png)
如图，$8+3+10=21$ 个，所以共能围出 $21$ 个正方形。
## 代码

```cpp
#include <bits/stdc++.h>
using namespace std;

int main()
{
    cout<<21;
    return 0;
}
```

---


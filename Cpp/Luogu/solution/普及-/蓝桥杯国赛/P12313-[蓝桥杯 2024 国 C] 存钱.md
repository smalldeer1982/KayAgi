# [蓝桥杯 2024 国 C] 存钱

## 题目描述

小蓝将钱存在了银行，每天银行会按照小蓝存款的 $0.005\%$ 给予小蓝一定的利息，上一天结束时的存款余额会在下一天开始时参与利息的计算，余额的最小单位为 $0.01$ 元（$1$ 分），每天的利息小于 $0.01$ 元的部分忽略不计。

给定小蓝在 $M$ 天内的存取记录，求小蓝每天结束时的存款数量。

一开始小蓝的余额为 $0$，保证任何时候取出的钱不会超出余额。

## 说明/提示

### 评测用例规模与约定

- 对于 $40\%$ 的评测用例，$1 \leq M \leq 50$，$0 \leq |A_i| \leq 50$；
- 对于所有评测用例，$1 \leq M \leq 2 \times 10^5$，$0 \leq |A_i| \leq 10^4$，$A_i$ 的小数点后最多只有两位数字。

## 样例 #1

### 输入

```
4
10000.00
-10000.01
300.01
500.02```

### 输出

```
10000.00
0.49
300.50
800.53```

# 题解

## 作者：MingDynasty (赞：10)

[题目链接](https://www.luogu.com.cn/P12133)

毒瘤精度题。

# 题目思路：

本身并不难想。根据小学知识，我们知道利息 $=$ 利率 $\times$ 本金 $\times$ 时间，所以每天的钱我们可以根据这个公式算出来，再加上本金。但是，毒瘤就毒瘤在了精度问题，我们可以使用加偏移量的方式来确保正确性，每次再特判利息小于 0.01 的情况就可以了。

**时间复杂度 $O(M)$。**

# Code：

```cpp
/*
    Auther:MingDynasty
    Problem:https://www.luogu.com.cn/problem/P12313
*/
#include<bits/stdc++.h>
#define eps 1e-8
using namespace std;
int m;
double sum,a;
int main(){
	cin.tie(0)->sync_with_stdio(0);
	cin>>m;
	while(m--){
		cin>>a;
		double l=floor(sum*0.00005*100+eps)/100;
		sum=sum+a+(l<0.01?0:l);
		printf("%.2lf\n",floor((sum+eps)*100)/100);
	}
	return 0;
}
```

祝通过！

---

## 作者：ssxzhang (赞：3)

注意：开 ```long double```。

思路：首先读入有多少天，接着读入存款数量，加到现有钱数后，输出现有钱数，最后把利息（记着化为两位小数）求出加到现有钱数里。

代码：
```cpp
#include<bits/stdc++.h>
using namespace std;
long double inf=0.00;
int main()
{
    int T;
    cin>>T;
    long double ans=0.00;
    while(T--)
    {
        long double x;
        scanf("%llf",&x);
        ans=ans+x;
        ans=max(ans,inf);
        printf("%.2llf\n",ans);
        long double ww=ans*0.005*0.01;
        int k=0;
        while(ww>0.01)
        {
            ww-=0.01;
            k++;
        }
        ans+=k*0.01;
    }
    return 0;
}
```

---

## 作者：JIN_LONG (赞：1)

## 解题思路
首先，我们会发现，这题是一道简单的模拟题，以下是模拟步骤。

- 初始余额为 $0$ 元。

- 每天处理顺序，先计算前一天的利息（从第 $2$ 天开始）。

- 然后处理当天的存取操作。

- 利息计算规则，利率是 $0.005\%$ 利息 $=$ 前一天余额 $\times 0.00005$，利息小于 $0.01$ 元的部分忽略不计（即向下取整到分）。

- 注意，余额始终保留 $2$ 位小数。


## 代码：

```
#include <bits/stdc++.h>//万能头。 
using namespace std;
int main(){
	double m,sum=0,a;//sum是计算余额的。 
    cin>>m;
    while(m--){
        cin>>a;
        double Interest=floor(sum*0.00005*100+1e-8)/100;//计算利息。 
        if(Interest<0.01)Interest=0.0;//每天的利息小于 0.01 元的部分忽略不计。 
        sum+=a+Interest;
        cout<<fixed<<setprecision(2)<<floor((sum+1e-8)*100)/100<<endl;//保留两位小数，记得用floor向下取整。 
    }
    return 0;//养成好习惯。 
}
```

---

## 作者：SCma (赞：1)

# 思路
模拟题：在每一天的开始时用 0.005% 计算上一天的利息并存钱或取钱，不断计算每一天的答案并输出。
# 代码
```cpp
#include<bits/stdc++.h>
#define endl '\n'
#define MIN(a,b,c) min(min(a,b),c)
#define MAX(a,b,c) max(max(a,b),c)
#define ri register int
#define int long long
#define fixedset(a) fixed << setprecision(a)
#define pii pair<int,int>
#define mp(a,b) make_pair(a,b)
#define ls(x) x<<1
#define rs(x) x<<1|1
#define MAXN 9.2211e18
#define inf 2114514
#define mf 5011
#define sf 1011
using namespace std;
mt19937_64 randint{std::chrono::steady_clock::now().time_since_epoch().count()};
int m;
double sum,a,tmp;
signed main(){
	ios::sync_with_stdio(false);
	cin.tie(NULL); cout.tie(NULL);
	//freopen(".in","r",stdin);
    //freopen(".out","w",stdout);
	cin >> m;
	
    for(ri i=1;i<=m;i++){
        cin >> a; tmp=floor(sum*0.00005*100+1e-8)/100;
        sum+=a+tmp;
        
        cout << fixedset(2) << (double)(floor((sum+1e-8)*100)/100) << endl;
    }
	return 0;
}

```

---

## 作者：tengteng666666 (赞：1)

### 思路：
这道题只需要在每一天的开始以 $0.005\%$ 计算昨天的利息（小于 $0.01$ 不要）以及存钱或取钱，然后输出每一天结束时的余额即可。但是要注意一点：**浮点数计算有精度误差，所以要加上一个微小偏移量。** 
### 代码：

```cpp
#include <bits/stdc++.h>
using namespace std;
int m;
double sum,a;
int main(){
    cin>>m;
    for(int i=1;i<=m;i++){
        cin>>a;
        double l=floor(sum*0.00005*100+1e-8)/100;//1e-8是微小偏移量。
        if(l<0.01)l=0.0;//利息少于0.01元不要。
        sum+=a+l;
        printf("%.2lf\n",floor((sum+1e-8)*100)/100);
    }
    return 0;
}
```

---

## 作者：CCY20130127 (赞：0)

## 题目大意：
[存钱](https://www.luogu.com.cn/problem/P12313)

上方是题目传送门。

## 题目分析：
学过编程的知道要用**暴力模拟**。初始余额为 $0$ 元，来到的最重要的计算利息 $=$ 前一天余额 $ \times 0.00005$，其实就是利滚利，利息小于 $0.01$ 元的部分不加，最后，要记得加上前一天的余额。

最后，要记得保留两位小数！

## 正解：
你们最喜欢的代码来了！

```cpp
#include<bits/stdc++.h>
using namespace std;
#define int long long
int t;
double a,sum;
signed main(){
	ios::sync_with_stdio(0);
	cin.tie(0),cout.tie(0);
	cin>>t;
	while(t--){
		cin>>a;
		double k=floor(sum*0.00005*100+1e-8)/100;
		sum+=a;
		sum=sum+(k>=0.01?k:0);
		printf("%.2lf\n",floor((sum+1e-8)*100)/100);
	}
	return 0;
}
```

---

## 作者：Yumi_Anaxa_ (赞：0)

[**题面链接**](https://www.luogu.com.cn/problem/P12313)
## 思路：
一道模拟题，大致思路：\
存取金额转换为分，计算加上利息然后再模拟，最后别忘了再转换回来。\
**具体思路如下：**
1. **精度**：统一转换为以分为单位，精度。具体看代码中的注释。
2. **计算利息**：每日利息是前一日余额的 $0.005\%$ 。
## code
```cpp
#include <bits/stdc++.h>
using namespace std;
//将金额字符串转换为分，例如"100.50"->10050分
int solve(const string& s){
    int sign = 1;
    size_t start = 0;
    if (s[0] == '-' || s[0] == '+'){
        sign = (s[0] == '-') ? -1 : 1;
        start = 1;
    }
    size_t pos=s.find('.', start);
    string ip,fp;//整数部分和小数部分
    if(pos==string::npos){
        ip = s.substr(start);
        fp = "00";//两位小数两个0
    }else{
        ip = s.substr(start, pos - start);
        fp = s.substr(pos + 1);
        if (fp.size() < 2)fp += string(2 - fp.size(), '0');
        else fp = fp.substr(0, 2);
    }
    return (stoll(ip) * 100 + stoll(fp)) * sign;
}
int main(){
    ios::sync_with_stdio(false);
    cin.tie(0);cout.tie(0);
    int M,b=0;
    cin >> M;
    for (int i = 0; i < M; ++i) {
        //计算利息
        b += (b * 5) / 100000;
        string s;
        cin >> s;
        b += solve(s);
        printf("%d.%02d\n", b / 100, b % 100);
    }
    return 0;
}
```

---

## 作者：TLE_qwq (赞：0)

[题目传送门](https://www.luogu.com.cn/problem/P12313)
### 题目概况
题目意思很简单，每天可以在银行做取钱和存钱的操作，钱在银行会有 $0.005\%$ 的利息。要输出的是在那天存入或取出后，银行内还有多少钱。
### 难点分析
这道题别处还是比较简单的，难点就在于有许多小数要处理，比如利息小于 $0.01$ 元的部分忽略不计。
### 解题思路
很明显，这是一道简单的模拟题。
### 代码

```cpp
#include <bits/stdc++.h>
using namespace std;
int main() {
    int M;
    cin >> M;
    double bank = 0.0;//起初，在银行里没有钱 
    for (int i = 1; i <= M; i++) {
        double a;
        cin >> a;
        bank += (a + floor(bank * 0.00005 * 100 + 0.00001/*这里加的数要足够小，否则在分位及以上会有偏差*/) / 100);//加上利息 
        cout << fixed << setprecision(2) << floor((bank + 0.00001/*这里加的数要足够小，否则在分位及以上会有偏差*/) * 100) / 100 << endl;//输出在银行中的钱 
    }
    return 0;
} 
```

---

## 作者：Zqx_Vector_2014 (赞：0)

本题是一个经典模拟题，就模拟每天的利息，再让答案加上这个利息。由于小于 $0.01$ 元的部分不管多大都忽略不计，所以要加一段先乘以 $100$，向下取整后再除以 $100$。

# Code:

```cpp
#include <bits/stdc++.h>
using namespace std;
double m,ans=0,a;
int main(){
    cin>>m;
    while(m--){
        cin>>a;
        double ll=floor(ans*0.00005*100+1e-8)/100;
        if(ll<0.01) ll=0.0;
        ans+=a+ll;
        printf("%0.2lf\n",floor((ans+1e-8)*100)/100);
    }return 0;
}
```

---


# [蓝桥杯 2024 省 C] 拼正方形

## 题目描述

小蓝正在玩拼图游戏，他有 $7385137888721$ 个 $2 \times 2$ 的方块和 $10470245$ 个 $1 \times 1$ 的方块，他需要从中挑出一些来拼出一个正方形，比如用 $3$ 个 $2 \times 2$ 和 $4$ 个 $1 \times 1$ 的方块可以拼出一个 $4 \times 4$ 的正方形，用 $9$ 个 $2 \times 2$ 的方块可以拼出一个 $6 \times 6$ 的正方形，请问小蓝能拼成的最大的正方形的边长为多少。

# 题解

## 作者：focus_aurora (赞：14)

## 思路

数学题。

尽量多拼 $2 \times 2$ 的方块。

发现想要拼成一个正方形，需要的 $2 \times 2$ 的方块数必须是完全平方数。

发现 $7385137888721$ 开方并取整的结果是 $2717561$。

而每个方块的边长为 $2$，所以拼成的大正方形的边长是 $5435122$。

然后往大正方形外面围上 $1 \times 1$ 的方块。

但是我们发现想要再围上一圈需要 $10870245$，而我们只有 $1047025$ 块，所以不能继续拼了。

故最大边长为 $5435122$。

## 代码


```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
	cout<<"5435122";//输出答案
	return 0;//好习惯
}
```

---

## 作者：yangdezuo (赞：5)

## 思路
这第一眼就是一道数学题

首先我们知道他有 $7385137888721$ 个 $2 \times 2$ 的方块和 $10470245$ 个 $1 \times 1$ 的方块,要使边长尽可能的大，就肯定是要多用 $2 \times 2$ 的方块

我们先用 $2 \times 2$ 的方块拼一个最大正方形，边长为 $\lfloor \sqrt{7385137888721} \rfloor=5435122$，同时也要记录下剩下暂时多余的

接下来在外面围半圈 $1 \times 1$ 的方块（每半圈，正方形的边长增加一，就是往4个角的方向），第一个半圈需要 $5435122 \times 2 + 1 = 10870245$ 个 $1 \times 1$ 的方块，多于他有的 $10470245$ 个 $1 \times 1$ 的方块，围不起来，所以  $5435122$ 即为最大的正方形的边长。
### 注意
每两个半圈，就可用 $1$ 个原来剩下的 $2 \times 2$ 的方块
## 示例代码（带过程（可解决这类问题））

```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;  
int a,b,c,d,t;
signed main(){
	cin>>a>>b;
//	a=7385137888721,b=10470245;
    c=sqrt(a);
    a-=c;
    c*=2;
	while(1){
		t++;
		if(t==2&&a>0){//判断是否有剩下的2*2可用
			b+=4;
			a--;
			t=0;
		}
		d=2*c+1;
		if(b<d) break;
		b=b-d;
//		b-=2*c-1;
//		if(b<0) break;
		c++;
//		cout<<a<<" "<<b<<" "<<c<<" "<<d<<" "<<t<<endl;
	}
	cout<<c;
}
```

---

## 作者：__const_int__ (赞：5)

### Analysis
我们设有 $n$ 个 $2 \times 2$ 的正方形，有 $m$ 个 $1 \times 1$ 的正方形。

我们考虑将所有 $2 \times 2$ 的正方形拼成一个大正方形，这个大正方形的边长是 $\lfloor \sqrt n \rfloor \times 2$，设这个值为 $x$。

接着，我们用 $1 \times 1$ 的正方形给这个大正方形围一圈，围一圈所需要的 $1 \times 1$ 正方形个数是 $2 \times x + 1$，如果剩余的 $1 \times 1$ 的正方形个数大于等于 $2 \times x + 1$，那么我们将 $x \gets x + 1$，并且继续执行这样的操作直到剩余的 $1 \times 1$ 的正方形个数小于当前围一圈所需要的个数。
### Code
```cpp
#include<bits/stdc++.h>

using ll = long long;

int main(){
  ll two = 7385137888721, one = 10470245;
  ll length = sqrt(two) * 2;
  ll remain = one;
  while (true) {
    remain -= length * 2 - 1;
    if(remain < 0){
      break;
    }
    length ++;
  }
  std::cout << length;
}
```

---

## 作者：wht_1218 (赞：3)

[题目传送门](https://www.luogu.com.cn/problem/P10898)

---

要使答案更大，就要多用 $2\times 2$ 的正方形。

要拼成一个正方形，需要的**相同**的小正方形的个数必须是**完全平方数**。~~欸是不是重了？~~

所以我们要想求出只用 $2\times 2$ 拼成的正方形的边长，就是求 $\sqrt{7385137888721}$ 向下取整的值再 $\times 2$。

$\sqrt{7385137888721}=2717561.0183988509662675986152793\cdots$，向下取整后值为 $2717561$，目前正方形最大边长就是 $2717561\times 2=5435122$。

此时考虑用 $1\times 1$ 的正方形。到这里要想让边长 $+1$ 就要用 $5435122\times4+4$ 个 $1\times 1$ 的正方形，$5435122\times4+4>10470245$，故不能再拼一层。

所以答案是 $5435122$。

---


# [蓝桥杯 2024 省 Java B] 类斐波那契循环数

## 题目描述


对于一个有 $n$ 位的十进制数 $N = d_1d_2d_3\dots d_n$，可以生成一个类斐波那契数列 $S$，数列 $S$ 的前 $n$ 个数为 $\{S_1=d_1,S_2=d_2,S_3=d_3,\dots,S_n=d_n\}$，数列 $S$ 的第 $k(k>n)$ 个数为 $\sum^{k−1}_{i=k−n} S_i$。如果这个数 $N$ 会出现在对应的类斐波那契数列 $S$ 中，那么 $N$ 就是一个类斐波那契循环数。

例如对于 $197$，对应的数列 $S$ 为 $\{1, 9, 7, 17, 33, 57, 107, 197, \dots \}$，$197$ 出现在 $S$ 中，所以 $197$ 是一个类斐波那契循环数。


请问在 $0$ 至 $10^7$ 中，最大的类斐波那契循环数是多少？

这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只输出这个整数，填写多余的内容将无法得分。

# 题解

## 作者：__owowow__ (赞：4)

### P11042 类斐波那契循环数题解
#### 题目大意

对于一个有 $n$ 位的十进制数 $N = d_1d_2d_3\dots d_n$，可以生成一个类斐波那契数列 $S$。

数列 $S$ 的前 $n$ 个数为 $\{S_1=d_1,S_2=d_2,S_3=d_3,\dots,S_n=d_n\}$，数列 $S$ 的第 $k(k>n)$ 个数为 $\sum^{k−1}_{i=k−n} S_i$。

如果这个数 $N$ 会出现在对应的类斐波那契数列 $S$ 中，那么 $N$ 就是一个类斐波那契循环数。
求小于 $10^7$ 的最大的类斐波那契循环数是多少。
#### 题目思路
直接暴力搜索 $n$，每一次用一个函数 ```pd(i)``` 来判断 $n$ 是否为类斐波那契循环数。

接下来详细说说 ```pd(i)``` 的写法。

首先定义数组 $a$，$a_i=d_i$。数组 $b$ 的前 $n$ 个数为对应下标的 $a_i$。也就是说，$b_i=a_i (i \le n)$。

对于后面的 $b_i$，$b_i=\sum^{i-1}_{j=i-1-n}b_j$。如果 $b_i=n$，那么 $n$ 就是类斐波那契循环数。

判断代码：
```python
def pd(x):
    s=str(x)
    n=len(s)
    a=[]
    for i in range(n):
        a.append(int(s[i]))
    b=a
    while 1==1:
        t=0
        for i in range(len(b)-n,len(b)):
            t+=b[i]
        if t>10000000 :
            return 0
        if t==x:
            return 1
        b.append(t)

```
#### 正确代码

```python
def pd(x):
    s=str(x)
    n=len(s)
    a=[]
    for i in range(n):
        a.append(int(s[i]))
    b=a
    while 1==1:
        t=0
        for i in range(len(b)-n,len(b)):
            t+=b[i]
        if t>10000000 :
            return 0
        if t==x:
            return 1
        b.append(t)


for i in range(10000000, 0, -1):
    if pd(i) == 1:
        print(i)
        break
```
结果输出 $7913837$，那么答案就是 $7913837$。
#### AC 代码
```python
print(7913837)
```

---

## 作者：banglee (赞：3)

## P11042 [蓝桥杯 2024 省 Java B] 类斐波那契循环数
[题目传送门](https://www.luogu.com.cn/problem/P11042)

## 前置知识
给定一个数 $N = d_1d_2d_3 \dots d_n$，类斐波那契数列 $S$ 的前 $n$ 个数为 ${S_1 = d_1,S_2 = d_2,\dots,S_n = d_n}$。从第 $n+1$ 个数开始，$S_k = \sum^{k-1}_{i=k-n} S_i$。
## 正文
为了找出在 $0$ 到 $10^7$ 范围内最大的类斐波那契循环数，我们需要生成这些数的类斐波那契数列并检查它们是否出现在对应的数列中。

对于每个数 $N$，生成对应的类斐波那契数列，直到数列中的数大于 $10^7$ 或者我们找到了 $N$ 出现在数列中。

但是从小到大暴力会非常耗时，因此我们可以调换顺序，从大到小遍历，即从 $10^7$ 开始遍历。

我们可以使用一个函数生成类斐波那契数列并检查目标数是否出现在数列中。如果找到了，就直接返回该数。

## 暴力代码
```
#include<bits/stdc++.h>
using namespace std;
bool f(int x){
    string s=to_string(x);
    int n=s.size();
    vector<int> a(n);
    for(int i=0;i<n;i++)
        a[i]=s[i]-'0';
    vector<int> seq(a.begin(),a.end());
    while(true)
    {
        int t=0;
        for(int i=seq.size()-n;i<seq.size();i++)
            t+=seq[i];
        if(t>10000000) return false;
        if(t==x) return true;
        seq.push_back(t);
    }
}
int main(){
    for(int i=10000000;i>=0;i--)
        if(f(i))
        {
            cout<<i;
            break;
        }
    return 0;
}
```

答案为 $7913837$。

输出 $7913837$ 就行了。

---

## 作者：39xiemy (赞：2)

## 题目大意

对于一个有 $n$ 位的十进制数 $N = d_1 d_2 d_3 \dots d_n$，可以生成一个类斐波那契数列 $S$，数列 $S$ 的前 $n$ 个数为 $\{d_1,d_2,\dots,d_n\}$，数列 $S$ 的第 $k(k>n)$ 个数为 $\sum_{i=k−n}^{k−1} S_i$。如果这个数 $N$ 会出现在对应的类斐波那契数列 $S$ 中，那么 $N$ 就是一个类斐波那契循环数。

求 $0 \sim 10^7$ 中最大的类斐波那契循环数的值。

## 分析

可以直接暴力模拟。

先将 $N$ 的每一位分解出来放入 $S$ 中，然后再根据规则生成 $S$ 的其他数。如果生成出来的数恰好等于 $N$，就输出并退出程序。为了加快效率，可以从 $10^7$ 向 $0$ 枚举。最终答案为 $7913837$，直接输出即可。

## 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int a[1001],b[11],tot,n;
int main()
{
	for(int i=10000000;i>=0;--i)
	{
		n=i,tot=0;
		while(n) b[++tot]=n%10,n/=10;
		for(int j=1;j<=tot;++j) a[tot-j+1]=b[j];//分解出来的数是反着的，要倒过来才行
		for(int j=tot+1;a[j-1]<=i;++j)
		{
			for(int g=j-tot;g<=j-1;++g) a[j]+=a[g];
			if(a[j]==i)
			{
				cout<<i;
				return 0;
			}
		}
		memset(a,0,sizeof(a));//要清空a数组(即题目中的S)
	}
	return 0;
}
```

---

## 作者：GYHL (赞：0)

题目意思题面写清楚了，不需要过多解释。

### 解法
这题暴力是可以直接过掉的，但在考场上更建议用暴力得出答案再直接输出，就一定不会超时。

做法就直接按照题目枚举，有两个点要注意以下两个点要注意。

#### 从大到小
从大到小可降低时间复杂度，但要是运行得出答案再直接输出就不用担心这个问题。

#### 先得出位数，再重新赋值
数字拆分是从末位开始，所以要先得出位数再倒着赋值。

暴力得出答案，输出 $7913837$ 即可。

---


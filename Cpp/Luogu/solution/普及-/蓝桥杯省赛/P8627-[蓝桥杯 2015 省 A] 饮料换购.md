# [蓝桥杯 2015 省 A] 饮料换购

## 题目描述

乐羊羊饮料厂正在举办一次促销优惠活动。乐羊羊 C 型饮料，凭 $3$ 个瓶盖可以再换一瓶 C 型饮料，并且可以一直循环下去(但不允许暂借或赊账)。

请你计算一下，如果小明不浪费瓶盖，尽量地参加活动，那么，对于他初始买入的 $n$ 瓶饮料，最后他一共能喝到多少瓶饮料。


## 说明/提示

2015 年蓝桥杯省赛 A 组 H 题。

## 样例 #1

### 输入

```
100```

### 输出

```
149```

## 样例 #2

### 输入

```
101```

### 输出

```
151```

# 题解

## 作者：Vct14 (赞：11)

### 题意

买 $n$ 瓶饮料，喝完 $3$ 瓶可以换 $1$ 瓶，求最后一共可以喝多少瓶。

### 解法

#### 思路 $1$

暴力模拟。

设瓶盖数为 $m$。当 $m\ge3$ 时一直循环模拟换购，每次循环表示用当前剩余的瓶盖换购后，再将新的饮料喝完。我们称这样一次循环为“一轮”。

每一轮可以多换购 $\left\lfloor\dfrac{m}{3}\right\rfloor$ 瓶，还剩下 $m\mod 3$ 个瓶盖，而喝完后，又会多 $\left\lfloor\dfrac{m}{3}\right\rfloor$ 个瓶盖。

#### 思路 $2$

列方程。

设最后喝了 $x$ 瓶饮料，则共有 $x-n$ 瓶饮料是换购来的。

因为最后 $1$ 个瓶盖无法换购，那么实际参与了换购的瓶盖只有 $x-1$ 个。

则可以列出方程：

$$x-n=\dfrac{x-1}{3}$$

最后[解](https://www.luogu.com.cn/paste/vhqx7m90)得：

$$x=\dfrac{3n-1}{2}$$

故答案为 $\dfrac{3n-1}{2}$。

### 代码

#### 思路 $1$

```
#include<bits/stdc++.h>
using namespace std;

int main(){
    int n;//我们可以直接用 n 代表剩余瓶盖数
    cin>>n;
    int sum=n;//sum 为总喝的饮料数
    while(n>2) sum+=n/3,n=n%3+n/3;//模拟换购
    cout<<sum;
    return 0;
}
```

#### 思路 $2$

```
#include<bits/stdc++.h>
using namespace std;

int main(){
	int n;
	cin>>n;
	cout<<(3*n-1)/2;//推出的式子
	return 0;
}
```

---

## 作者：CleverRaccoon (赞：4)

## 简要题意

小明最初有 $n$ 瓶饮料，每喝完 $3$ 瓶饮料就可以再喝 $1$ 瓶饮料，可以一直循环下去。

## 思路

注意数据范围，$n$ 不超过 $10000$，较小，所以考虑直接模拟即可。

循环 $n$ 次，每次将已经喝了的饮料数加一。

那么，如何实现『凭 $3$ 个瓶盖再换一瓶饮料』呢？

记录一下当前手里的瓶盖数，每喝一瓶，就将手里的瓶盖数加一。如果瓶盖数等于 $3$ 了，就说明已经可以换一瓶饮料了，就将已经喝了的饮料个数加一，还要将当前瓶盖数设为 $1$。

这里为什么要设为 $1$ 呢？不应该清零吗？

注意，使用瓶盖换的新的饮料也有瓶盖啊！所以，当前瓶盖数要设为一。

## 代码

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);    // 关闭流同步，加速。
    cin.tie(nullptr);
    int n, cur = 0, ans = 0; // cur记录当前还剩几个瓶盖，ans记录实际得到的饮料数。
    cin >> n;
    while(n--) {
        ++ans;  // 有饮料就增加一个，也就是每次喝一瓶。
        ++cur;  // 因为喝了一瓶了，所以当前手中的瓶盖数增加一。
        if(cur == 3) {  // 满3个瓶盖就可以换购一瓶饮料。
            ++ans;  // 记录喝的饮料个数。
            cur = 1;    // 因为换购后的这瓶饮料也能得到瓶盖，所以手中的瓶盖数为1。
        }
    }
    cout << ans;
    return 0;
}
```

题解内容就到这里啦，有疑问欢迎私信交流！

谢谢大家！


---

## 作者：Li2021 (赞：3)

## P8627 饮料换购 题解

### 解题思路

题意很简略，根据题意进行模拟即可。时间复杂度 $O(n)$。

### 代码

```cpp
#include <iostream>
using namespace std;
int n,tmp,ans;
int main(){
	cin>>n;
	ans=n;  //先喝 n 瓶饮料
	while(n>=3){  //有3个以上的瓶盖
		tmp=n%3;  //不足3个的瓶盖个数
		n/=3;  //换瓶盖
		ans+=n;  //换的新饮料个数
		n+=tmp;  //加上不足3个的瓶盖
	}
	cout<<ans;
	return 0;
}
```

---

## 作者：xiaobeng_0912 (赞：3)

## 分析

模拟是几乎万能的。你不需要太多的思考就能做。唯一的缺点就是码量有点大。所以笔者使用模拟来做此题。如果你想用数学办法可以看其他题解。

首先喝 $1$ 瓶饮料，即饮料数减 $1$，瓶盖加 $1$，喝掉的饮料数加 $1$。如果瓶盖已满 $3$ 个，就去兑换 $1$ 瓶饮料，即瓶盖数清零，饮料数加 $1$。重复上述动作直到没有饮料，最后输出答案即可。

---

## 作者：Lovely_Elaina (赞：2)

### 解法 $1$

简单模拟题，暴力杯万岁。

直接 `while` 循环，每次算出多了几个空瓶子，少了几个空瓶子。

```cpp
#include <iostream>
using namespace std;

int c,n;

signed main(){
    ios::sync_with_stdio(0);
    cin.tie(NULL);
    
    cin >> n,c = n;
    while(n >= 3){
        // cout << n << endl;
        c += n / 3;
        n = n % 3 + n / 3;
    }
    
    cout << c;
    
    return 0;
}
```

### 解法 $2$

设买了 $x$ 瓶，则 $3x\le n+x-1$。

所以 $x\le {n-1\over 2}$。

加上最开始喝的，所以共 $n+\lfloor {n-1\over 2} \rfloor$ 个。

```cpp
#include <iostream>
using namespace std;

signed main() {
    ios::sync_with_stdio(0);
    cin.tie(NULL);
    
    int n;
    cin >> n;
    cout << n+((n-1)/2) << endl;
    
    return 0;
}
```

---

## 作者：andyli (赞：2)

记录当前瓶盖数及购得的饮料数，循环尝试换购饮料直到不能（瓶盖数 $<3$）。  

```python
n = int(input())
drinks = caps = n
while caps >= 3:
    p, q = divmod(caps, 3)
    drinks += p
    caps = p + q
print(drinks)
```

---

## 作者：MasCotangent (赞：2)

# P8627 [蓝桥杯 2015 省 A] 饮料换购 题解
[题目传送门](https://www.luogu.com.cn/problem/P8627)

------------
## 思路
经典小奥数学题。按照题意模拟交换瓶盖，饮料。并注意每次及时更新饮料数、瓶盖数以及答案即可通过此题。
## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int n,pg=0,ans=0;
int main(){
    cin>>n;
    while(n!=0){
        n--;//减少手中饮料数
        ans++;//增加总饮料数
        pg++;//增加瓶盖数
        n+=pg/3;//将能换购的瓶盖全部换购
        pg%=3;//把换购了的瓶盖减去
    }
    cout<<ans;
    return 0;
}
```


---

## 作者：SunnyLi (赞：1)

[题目传送门](https://www.luogu.com.cn/problem/P8627)

## 思路

仔细看 $n$ 的范围，发现 $0<n<10000$。很明显这道题可以模拟，不需要找规律。

小明每次喝一瓶，瓶盖加一个，饮料减一瓶。如果瓶盖有 $3$ 个，加一瓶饮料，然后瓶盖数归零。

## AC 代码

```cpp
#include<bits/stdc++.h>
using namespace std;

int main(){
    int n,sum=0,cnt=0;
    cin >> n;
    while(n!=0){
        n--;
        sum++;
        cnt++;
        if(cnt==3)  {n++;cnt=0;}
    }
    cout << sum;
    return 0;
}
```

[AC 记录](https://www.luogu.com.cn/record/108515372)

---

## 作者：ccg12345 (赞：1)

## P8627 [蓝桥杯 2015 省 A] 饮料换购
[题目传送门](https://www.luogu.com.cn/problem/P8627)

此题为小奥经典题型，按照题意模拟：小明每次喝一瓶，瓶盖加一个，饮料减一瓶。如果瓶盖有 $3$ 个，加一瓶饮料，然后瓶盖数归零即可。

易错点：要及时更新饮料瓶数与瓶盖数。

附代码：
```
#include <bits/stdc++.h>
using namespace std;
int main()
{
    int n, k = 0, ans = 0;//k与ans依次为瓶盖数与最终的总饮料数
    scanf("%d", &n);
    while(n != 0)
    {
        n--;//减少手中饮料数
        ans++;//增加总饮料数
        k++;//增加瓶盖数
        n += k / 3;//用瓶盖换饮料(能换多少就换多少)
        k %= 3;//瓶盖数更新
    }
    printf("%d", ans);
    return 0;
}
```


---

## 作者：ダ月 (赞：0)

结论 $1$：

对于 $n$ 个瓶子，答案为 $n+\left\lfloor\frac{n-1}{2}\right\rfloor$ 个。

证明：

设它一共买了 $x$ 瓶饮料，那么可以得到以下式子：

$\begin{aligned}3x \le n+x-1\end{aligned}$

解得 $x\le \frac{n-1}{2}$。加上初始的 $n$ 个就是答案。

### 代码如下：

```
#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N=1e5+10;
//===
//缺省源
//===
int main(){
	//freopen(".in","r",stdin);
	//freopen(".out","w",stdout);
	int n;cin>>n;
	printf("%d\n",n+(n-1>>1));
	return 0;
}






```


---

## 作者：VitrelosTia (赞：0)

题解区都是模拟的做法，写一发数学做法。

设最后喝了 $x$ 瓶饮料，即获得了 $x$ 个瓶子，那么显然其中有 $x - n$ 个瓶子是换购来的。

然后我们明确一点：喝到最后时，还会多出来 $1$ 个瓶子，不能换新的，所以实际能用来换瓶子的只有 $x - 1$ 个。

所以可以列出方程，并解出结果：

$$x - n = \dfrac{x - 1}{3}$$
$$3x - 3n = x - 1$$
$$x = n + \dfrac{n - 1}{2}$$

---

## 作者：fish_love_cat (赞：0)

**前言：**

难蚌，略难一筹的[双倍经验](https://www.luogu.com.cn/discuss/572639)还是红题，这题居然橙了！

**思路：**

按照题意模拟即可。

读入初始饮料数量 $n$，在没兑换的情况下，此时只喝了 $n$ 瓶。如果用变量 $a$ 表示瓶盖数量，喝了几瓶就会产生几个瓶盖，所以初始 $a = n$。

只要 $a \ge 3$ 就一定可以换来新的饮料。如果把换来的数量记作 $b$，那么可以从题意中得出 $b = \left \lfloor a {\div} 3 \right \rfloor$。我们把换来的饮料计入答案后，一口喝掉，又会产生出瓶盖，所以 $a = a \bmod 3 + b$。

如果现在还保证 $a \ge 3$，那么就……

循环往复，以此类推，利用 ```while(){}``` 来做。

**代码：**

```cpp
#include<iostream>
using namespace std;
int main(){
    int n,a,b;
    cin>>n;
    a=n;
    while(a>=3){
        b=a/3;
        n=n+b;//n到后面就没用了，于是我就把他当ans来计数了
        a=b+a%3;//注意是取余！！
    }
    cout<<n;
    return 0;
}
```

[Accepted.](https://www.luogu.com.cn/record/108516156)

---

## 作者：hycqwq (赞：0)

## 思路

定义一个变量 $t$ 存储现在有多少个瓶盖，初始值为 $n$。

每当 $t \ge 3$ 时，就代表可以换购饮料，于是把 $t$ 设为 $\lfloor \frac{t}{3} \rfloor$ 与 $t$ 除以 $3$ 的余数即可。

## 代码

```cpp
#include <iostream>
#include <algorithm>
#include <cstdio>
#include <cstdlib>
#include <ctime>
#include <string>
#include <cstring>
#include <cctype>
#include <cmath>
#include <vector>
#include <stack>
#include <queue>
#include <deque>
#include <map>
using namespace std;
typedef long long ll;
typedef pair<int, int> pii;
const int inf = 0x3f3f3f3f;
#define elif else if
#define il inline

int main()
{
    int n;
    cin >> n;
    int t = n;
    while (t >= 3)
        n += t / 3, t = t / 3 + t % 3;
    cout << n << endl;
    return 0;
}
```

---

## 作者：Lemonlwl (赞：0)

## P8627 [蓝桥杯 2015 省 A] 饮料换购 题解
### 题意：
对于 $n$ 瓶饮料，每三瓶可以再兑换一瓶，求一共能喝几瓶。

------------

条件是：
1. **不能借瓶盖**。
1. **不能再买饮料**。


------------
所以，循环的过程就是每一次剩下的瓶盖再次兑换，即每三瓶换一瓶。

------------

附上 [AC](https://www.luogu.com.cn/record/108531389) 代码：

```cpp
#include<iostream>
using namespace std;
int main(){
	long long n,v;
	cin>>n;   //输入。
	long long ans=n; //要加上刚开始的n瓶。
	while(n>=3){ //开始循环兑换饮料的过程。
		v=n%3;    //保留个位(在除的时候会向下取整)。
		ans+=n/3;  //累加，每三瓶换一瓶。
		n/=3;    //兑换
		n+=v;    //最后加上一开始没有兑换的饮料。
	}
	cout<<ans<<endl; //输出答案。
	return 0;
}
```
点个赞再走呗。

---

## 作者：wimg6_ (赞：0)

## P8627 题解

可以用一个 `while` 循环来维护当前可以兑换的瓶盖的数量，每次对计数器 `cal` 加上当前可以兑换的瓶盖的数量除以三的商即可。

```
#include<bits/stdc++.h>
using namespace std;
long long n,w,cal;
int main()
{
	scanf("%lld",&n);
	cal+=n;
	while(n>=3) 
		cal+=(n/3),w=n%3,n/=3,n+=w;
	return !printf("%lld",cal);
}
```

实现的时候有小细节需要注意。

定义：每做一次 `while` 循环称为一轮。

1. 不能直接将当前可以兑换的瓶盖数量除以三，需要记录当前可以兑换瓶盖数量对三的模数 $w$。因为这些瓶盖在此轮兑换当中不能用，但是可以攒到下一轮兑换中用。

2. 计数器初值为 $cal=n$，因为一开始获得的饮料数量也为一共能喝到饮料数的一部分。

3. `while` 边界条件中是 $n\geq 3$，是可以取到等的，因为当瓶盖数量为 $3$ 时还可以再兑换一瓶饮料。

4. 可以不开 `long long`，因为极大情况即 $n=9999$ 时，最后也只能喝到 $14498$ 瓶饮料。

---


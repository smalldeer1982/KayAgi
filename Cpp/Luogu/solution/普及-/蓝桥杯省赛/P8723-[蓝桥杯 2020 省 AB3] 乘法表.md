# [蓝桥杯 2020 省 AB3] 乘法表

## 题目描述

九九乘法表是学习乘法时必须要掌握的。在不同进制数下，需要不同的乘法表。

例如, 四进制下的乘法表如下所示：

```
1*1=1
2*1=2 2*2=10
3*1=3 3*2=12 3*3=21
```

请注意，乘法表中两个数相乘的顺序必须为样例中所示的顺序，不能随意交换两个乘数。

给定 $P$，请输出 $P$ 进制下的乘法表。

## 说明/提示

对于所有评测数据, $2 \leq P \leq 36$。

蓝桥杯 2020 第三轮省赛 AB 组 G 题。

## 样例 #1

### 输入

```
4```

### 输出

```
1*1=1
2*1=2 2*2=10
3*1=3 3*2=12 3*3=21```

## 样例 #2

### 输入

```
8```

### 输出

```
1*1=1
2*1=2 2*2=4
3*1=3 3*2=6 3*3=11
4*1=4 4*2=10 4*3=14 4*4=20
5*1=5 5*2=12 5*3=17 5*4=24 5*5=31
6*1=6 6*2=14 6*3=22 6*4=30 6*5=36 6*6=44
7*1=7 7*2=16 7*3=25 7*4=34 7*5=43 7*6=52 7*7=61```

# 题解

## 作者：yszkddzyh (赞：13)

这题不需要任何高精，只需要进制转换。

这里只需用到 $10$ 进制转 $k$ 进制，而在程序中我们经常用到短除法取余的方法。举个例子，当 $k=3$ 时，$10$ 进制数 $413$ 的转换过程是这样的：

$413\div3=137\cdots\cdots2$

$137\div3=45\cdots\cdots2$

$45\div3=15\cdots\cdots0$

$15\div3=5\cdots\cdots0$

$5\div3=1\cdots\cdots2$

$1\div3=0\cdots\cdots1$

把余数从下往上连起来，得 $120022$，事实上，这就是 $413$ 的 $3$ 进制数。

因此我们很容易得到以下代码：

```cpp
#include <iostream>
#include <algorithm>//reverse要用
using namespace std;
int n;
char trans(int a){
    if(a%n<10) return a%n+'0';
    return a%n+'A'-10;//大于10时用大写字母
}
string ten_to_k(int x){//10进制转k进制
	string a;//字符串存储
	for(int i=0;x>0;i++) a+=trans(x),x/=n;//短除法
	reverse(a.begin(),a.end());//翻转字符串，因为是从下往上
	return a;
}
int main(){
	scanf("%d",&n);
	for(int i=1;i<n;i++,putchar(10))
		for(int j=1;j<=i;j++)
			cout<<ten_to_k(i)<<'*'<<ten_to_k(j)<<'='<<ten_to_k(i*j)<<' ';//循环输出
	return 0;
}
```

---

## 作者：small_john (赞：6)

## 分析

首先，隆重介绍把十进制数 $x$ 转换为 $y$ 进制数，**短除法**。

举个例子：把 $92$ 转换为 $8$ 进制为 $(134)_8$。

![](https://cdn.luogu.com.cn/upload/image_hosting/133m8fq0.png)

可以发现，每次把当前的 $x$ 除以 $y$，记录余数，最后要倒着输出。

代码如下：

```cpp
string jz(int x,int y)//把x转换为y进制
{
	string now,ret;
	while(x>0)
	{
		int add = x%y;//记录余数
		if(add>=10)//余数大于10的要变为字母
			now+=add-10+'A';
		else now+=add+'0'; 
		x/=y;
	}
	int len = now.size();
	for(int i = 0;i<=len/2;i++)//倒着存
		ret+=now[len-i-1];
	return ret;
}
```

那么这道题就很简单了。

输入 $n$，把 $i$ 从 $1\sim n-1$ 循环（到 $n$ 就会进位），把 $j$ 从 $1\sim i$ 循环，最后按格式输出即可。

## 代码

```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
string jz(int x,int y)//把x转换为y进制
{
	string now,ret;
	while(x>0)
	{
		int add = x%y;//记录余数
		if(add>=10)//余数大于10的要变为字母
			now+=add-10+'A';
		else now+=add+'0'; 
		x/=y;
	}
	int len = now.size();
	for(int i = 0;i<=len/2;i++)//倒着存
		ret+=now[len-i-1];
	return ret;
}
int main()
{
	cin>>n;
	for(int i = 1;i<n;i++)
	{
		for(int j = 1;j<=i;j++)
			cout<<jz(i,n)<<'*'<<jz(j,n)<<'='<<jz(i*j,n)<<' ';//记得转换进制
		cout<<'\n';
	}
	return 0;
}
```

---

## 作者：A_Bit_Cold (赞：6)

### 思路

打印 $P$ 进制的乘法表，由于在 $P$ 进制数中不可能会出现 $P$ 这个数字，

所以输出共 $P-1$ 行。

对于第 $i$ 行，输出共 $i$ 个数字，其中设 $F(x,y)=x \cdot y$，

则输出分别为：

$i*1=F(i,1)$ $i*2=F(i,2)$ $i*3=F(i,3)$ ... $i*i=F(i,i)$。

接下来转进制就可以了。
```cpp
#include<bits/stdc++.h>
using namespace std;
const int N=1e5+5;
int n;
int a[N];
void s(int k) {
	int cnt=0;
    while(k) {//将k按n进制拆分
	    a[++cnt]=k%n;//记录
	    k/=n;
	}
	for(int i=cnt;i>=1;i--) {//从后往前遍历
	    if(a[i]<10) cout<<a[i];//如果a[i]<10的话直接输出
	    else cout<<(char)('A'+a[i]-10);//a[i]>10不能输出，转字母
	}
}
int main() {
	cin>>n;
	for(int i=1;i<n;i++) {//共n-1行
	    for(int j=1;j<=i;j++) {//第i行共i个数字
		    if(i<10) cout<<i;//直接输出
		    else cout<<(char)('A'+i-10);//转字母
			cout<<"*";
			if(j<10) cout<<j;//直接输出
			else cout<<(char)('A'+j-10);//转字母
			cout<<"="; 
			s(i*j);//将i*j转为n进制
			cout<<" ";
		}
		cout<<"\n";
	}
	return 0;
}
```

---

## 作者：andyli (赞：4)

使用 `std::to_chars` 可以将一个整数 $x$ 转化为它在 $p$ 进制下的字符串。该函数给出的字符串里的字母是小写，因此需要进行一次转换将其转成大写。

```cpp
int main() {
    dR(int, p);
    auto toupper = [&](std::string s) {
        for (auto& c: s)
            c = std::toupper(c);
        return s;
    };
    auto convert = [&](int x) {
        static char buf[512];
        return toupper({buf, std::to_chars(buf, buf + 512, x, p).ptr});
    };
    for (int x = 1; x < p; x++, writeln())
        for (int y = 1; y <= x; y++)
            io.write(convert(x), '*', convert(y), '=', convert(x * y), ' ');
    return 0;
}
```

---


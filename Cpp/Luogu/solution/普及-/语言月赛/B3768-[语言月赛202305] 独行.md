# [语言月赛202305] 独行

## 题目背景

> ### 独行
>
> 独乘木舟去，  
> 心愁神难怡。  
> 佳人千里外，  
> 思绪终不渝。

zyl 于 2023 年 3 月 28 日写下，并赠予他心仪的那个女孩。

## 题目描述

zyl 是一名初三的 OIer。

zyl 在自己的家乡没有学习 OI 的时间与契机，一天他收到了其它学校的邀请，为了追梦，他同意了，并选择乘船前往。

不过只有 zyl 一个人去那里，在路上，他总是会特别思念在教室里的那个她。

zyl 于 $2023$ 年 $4$ 月 $1$ 日的凌晨 $00:00$ 出发前往距离家乡 $S\text{ m}$ 的目的地，他乘船向目的地行驶的速度是 $v_{0}\text{ m/s}$ 。他在路上会不间断的思念起她，每次都会调转船头，希望能回去和她一起相处。他一共思念了 $n(1\le n \le 100)$ 次，第 $i$ 次思念是在他行驶了 $T_{i}$ 秒后开始的。

在第一次，他思念了 $t_{1}$ 秒，并以 $v_{1}\text{ m/s}$ 的速度向家乡行驶。之后的每一次， zyl 的思绪会比上一次更加深，速度比上一次**增加** $v_{2}\text{ m/s}$，时间比上一次**增加** $t_{2}$ 秒。

但是，如果 zyl 已经抵达目的地了，他就只会站在那不动，望着家乡的方向……每次思念结束后， zyl 又会以最初的速度向目的地继续行驶。一旦到达目的地，他就会停下。

如果他在思念的过程中回到了家乡，他会花思念剩下的时间与她下一盘棋，因为在之前，他们最喜欢一起做的事就是下棋了。

（然而在现实生活中，他每时每刻都在想她。）

他没有带表，想知道自己是在哪一天的哪一秒到达目的地的。由于他还要赶着上课，在 $2023$ 年 $4$ 月 $30$ 日 $23:59:59$ 之前，他一定会到达目的地。

## 说明/提示

输入的所有数据都是整数。

对于 $40\%$ 的数据，$ v_{2}=t_{2}=0$；

对于另外 $20\%$ 的数据 $n=1$;

对于 $100\%$ 的数据，$1\leqslant n \leqslant 100$，$1\leqslant S \leqslant 2\times10^{9}$，$1\leqslant v_{0} \leqslant S$，$1\leqslant v_{1},t_{1} \leqslant 500$，$0\leqslant v_{2},t_{2} \leqslant 50$，$0\leqslant T_{i} \leqslant 20080626$，保证 $T$ 单调递增，且保证不会有两次思念的时间重叠，保证到达时间一定是在四月份。数据并不保证到达目的地后 zyl 就不会想她了。


>在最后想对学弟学妹们说，学习编程的道路十分漫长，人生的道路亦是如此。在这漫长的道路上，你们一定会碰到一些在你们心中特别重要的人。有时候，你们不得不与这些人离别。请你们千万要珍惜与重要的人相处的每一天，不要等到离别的时候才后悔当初没有好好珍惜。永远怀揣理想，不为青春留遗憾！
>
>—— zyl

## 样例 #1

### 输入

```
20 4 2 2 2 1
2 
2 7```

### 输出

```
20230401at00:00:14```

## 样例 #2

### 输入

```
2000 2 4 10 3 2
5
5 20 40 60 20080626```

### 输出

```
20230401at00:17:56```

# 题解

## 作者：未来姚班zyl (赞：1)

## Source & Knowledge
2023 年 5 月语言月赛，由洛谷网校入门计划/基础计划提供。
## 题目大意
一艘船以 $v_{0}$ 的速度向距离为 $S$ 的目的地行驶，在给出的时间点 $T_{i}$，这艘船会掉头行驶，掉头行驶的初始速度是 $v_{1}$，初始时间是 $t_{1}$。之后的每一次掉头，速度会在前一次的基础上增加 $v_{2}$，时间会在前一次的基础上增加 $t_{2}$。如果调头行驶时到了出发点，剩下的时间就原地不动。求到达目的地的时间（向上取整）。

## 题目分析
这一题的题面比较长，考察问题理解能力和代码实现能力。

（结尾有彩蛋）。

首先，我们快速地抓住题目大意。大致可以分为以下几步进行：

第一步，我们要知道这道题从最宏观的角度是在要求我们做什么。在这题中，就是一艘船要行驶到目的地，在中途会出现掉头的事件。

第二步，理清每个变量的含义。在这道题中，主要的变量有这些： $S$，$v_{0}$，$v_{1}$，$t_{1}$，$v_{2}$，$t_{2}$，$n$，$T_{i}$。有那么多变量，怎么快速的捕捉到它们并弄清它们的含义呢？这里教大家一个小技巧：**在碰到题面较长的题目时，可以在做完第一步后，先看一看输入输出格式里涉及的变量，再继续细致地读题，着重关注这些变量的含义。** 这样做的好处就是读题时不容易模模糊糊，更能快速理清题意。那么在这题中除了 $n$ 以外的变量显然都需要我们着重地关注。读者现在可以自己带着这个思路回去再重新读一遍题目，看看效率会不会高一些？

第三步，理清各个变量之间的逻辑关系，在脑子里尝试简化题意。这一步做完，一道题的大意就能被你掌握了！

接下来就要解决这个题目了。由于船只有向前和向后两个方向，而且方向相同的一段时间内速度是相等的，而这两种状态的分界就是思念的起止时间——向前的时间就是每一次思念结束到下一次思念开始之间，向后的时间就是每次思念开始到这次思念结束。所以我们可以按照 $T_{i}$ 来分段。先处理好思念的时间和速度，直接按题意写就可以了——第一次思念的时间和速度分别是 $t_{1}$ 和 $v_{1}$，在每一次思念结束的时候让 $t_{1}+=t_{2},v_{1}+=v_{2}$，就能使得处理下一次思念时 $t_{1}$ 就是时间， $v_{1}$ 就是速度了。那么一次思念行驶的路程就是 $v_{1}\times t_{1}$ 了。而对于向前行驶的路程，$v_{0}$ 不会变，用 $pret$ 来记录上一次思念结束的时间，$nowt$ 来表示这一次思念开始的时间（事实上就是 $T_{i}$），那么向前的路程就是 $(nowt-pret)\times v_{0}$ 了。只要用 $dis$ 记录行驶的距离，处理每一段向前的时候看一看会不会抵达目的地，会的话直接输出就行了。这里注意，得到的时间应该是 $pret+(D-dis)/v_{0}$，还要记得向上取整。但是，可能最后所有思念完了后还没有到目的地，那就最后特判一下，或者直接加一个思念时间为 $inf$。

对于输出，就是按照 $1$$min=60s$，$1 h=60min=3600s$,$1 day=24h=86400s$ 得到日，时，分，秒。这样题目就解决了，核心代码如下：

这是输出部分：
```cpp
void print(int t){
	int day=(t/86400)+1;//因为是4月1日开始，所以日期要加一
	t%=86400;
	int hor=(t/3600);
	t%=3600;
	int m=t/60;
	t%=60;
	pf("202304%02dat%02d:%02d:%02d",day,hor,m,t); 
}
```
这是处理部分：
```cpp
T[n+1]=2100000000;
while(1){
	nowt=T[++tmp];
	if(dis+(ll)(nowt-pret)*v>=S){//如果像我一样是增加一个inf的时间，要注意乘法可能超出int范围
		int extra=((S-dis)%v!=0);
		print((S-dis)/v+extra+pret);
		return 0;
	}
	dis+=(nowt-pret)*v;
	dis=max(0,dis-v1*t1);//如果掉头时到了家乡会停下
	pret=nowt+t1;
	v1+=v2,t1+=t2;
}
```
## 视频讲解

![](bilibili:BV1kM4y1t7K5?page=7)


---


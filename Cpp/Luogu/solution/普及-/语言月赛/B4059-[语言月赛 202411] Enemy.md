# [语言月赛 202411] Enemy

## 题目描述

$A$ 城和 $B$ 城在城市中激战，战场可以被视为一个 $n$ 行 $m$ 列的方阵。方阵中的每个方格中的信息为如下可能中的一个：

- `#`，代表空地。
- `A`，表示一位 $A$ 城的士兵。
- `B`，表示一位 $B$ 城的士兵。
- `H`，表示城墙。

方阵中行从上到下依次编号为 $1\sim n$，列从左到右依次编号为 $1\sim m$。

$A$ 城位于左侧，$B$ 城位于右侧。故对于**每一行**，$A$ 城的士兵全部位于 $B$ 城士兵的左侧。

对于每一行，城墙只可能出现在 $A$ 城士兵与 $B$ 城士兵的中间，即城墙的左侧只可能有 $A$ 城士兵，城墙的右侧只可能有 $B$ 城士兵。且，同一行最多有 $1$ 个方格是城墙。

激战开始，士兵们会根据地形指定战略。对于**每一行**：

- 如果该行有城墙，则士兵们会往自己城市方向后撤，在边界处整齐地排列。例如，若这一行初始时为 `#A#AH#B#`，则后撤后这一行变为 `AA##H##B`。
- 否则，双方会进攻。对于人数较少的一方，士兵会全部倒下，从战场中消失。而另一方不会有士兵倒下，并且会冲至对方城市的方向，在边界处整齐地排列。例如，若这一行初始时为 `#A##B#B#`，则进攻后这一行变为 `BB######`。特别地，如果这一行双方人数相等，则这一行所有士兵都会倒下。

随后激战结束。对于每个士兵会**同时**进行如下判断：
- 如果他的上方或下方有友方的士兵与他相邻，则他会从战场中消失，否则原地不动。

现在给你初始时的战场局面，请你输出最后战场的组成。

## 说明/提示

### 样例 #1 解释

激战结束后，战场的情况为

```cpp
AA##H##B
BB######
########
#####AAA
####AAAA
```

右下角的 `A` 中，除了第 $5$ 行第 $5$ 列的 `A` 以外，下方或者上方都存在友方的士兵，故他们最终从战场中消失。最后战场如样例输出所示。
### 样例 #2 解释

注意只有在上方或下方有**相邻**的友方士兵时士兵才会从战场消失。
### 数据范围

对于所有数据，$1\le n,m\le 1000$，$s_{i,j}$ 为 `A`、`B`、`H`、`#` 中的一个，且每一行满足题目中的限制。具体测试点限制如下：

| 测试点编号 | $n$ 的范围 | $m$ 的范围 | 特殊性质 |
| :-----------: | :-----------: | :-----------: | :-----------: |
| $1\sim 3$ | $n=1$ | $m\le100$ | 无 |
| $4\sim 6$ | $n\le100$ | $m=1$ | 无 |
| $7\sim 10$ | $n\le 100$ | $m\le100$ | $s_{i,j}$ 不为 `H` |
| $11\sim 14$ | $n\le 100$ | $m\le100$ | $s_{i,j}$ 不为 `B`|
| $15,16$ | $n\le100$ | $m\le 100$ | 无 |
| $17\sim 20$ | $n\le 1000$ | $m\le1000$ | 无 |


## 样例 #1

### 输入

```
5 8
#A#AH#B#
#A##B#B#
##AA##BB
AAA###BB
AAA#ABBB
```

### 输出

```
AA##H##B
BB######
########
########
####A###
```

## 样例 #2

### 输入

```
3 2
#A
##
#A
```

### 输出

```
#A
##
#A
```

## 样例 #3

### 输入

```
3 3
AAB
A#B
ABB
```

### 输出

```
#AA
###
BB#
```

# 题解

## 作者：未来姚班zyl (赞：6)

本题考察内容非常广，涵盖顺序、分支、循环结构，以及字符数组、变量的使用等，考察选手的综合运用能力。

首先是激战环节：

对于每一行，设 `A` 的数量为 $cA$,`B` 的数量为 $cB$。
- 有城墙

则这一行的前 $cA$ 个字符变为 `A`，后 $cB$ 个字符变为 `B`，`H` 的位置不变，剩下的变为 `#`。

- 没有城墙

则按照题意模拟，如果 $cA=cB$，则这一行全部变为 `#`，否则，若 $cA>cB$，则右边的 $cA$ 个变为 `A`，剩下的变为 `#`。若 $cA<cB$，则左边的 $cB$ 个变为 `B`，剩下的变为 `#`。

然后得到了激战后的局面，接下来是输出阶段。

- $s_{i,j}=$ `#` 或者 `H`

则直接输出即可。

- $s_{i,j}=$ `A` 或者 `B`

则需判断 $s_{i-1,j}$ 和 $s_{i+1,j}$ 中是否存在与 $s_{i,j}$ 相等的，如果存在，则输出 `#`，否则直接输出 $s_{i,j}$ 即可。

注意每行输出后要换行。

这题码量在入门赛中较大，也有实现细节。代码如下：


```cpp
#include<bits/stdc++.h>
using namespace std;
char c[1005][1005];
int n,m;
int main(){
	cin>>n>>m;
	for(int i=1;i<=n;i++)for(int j=1;j<=m;j++)cin>>c[i][j];
	for(int i=1;i<=n;i++){
		int ca=0,cb=0,ch=0;
		for(int j=1;j<=m;j++){
			if(c[i][j]=='A')ca++;
			else if(c[i][j]=='B')cb++;
			else if(c[i][j]=='H')ch++;
		}
		if(ch){
			for(int j=1;j<=m;j++)if(c[i][j]!='H')c[i][j]='#';
			for(int j=1;j<=ca;j++)c[i][j]='A';
			for(int j=m-cb+1;j<=m;j++)c[i][j]='B';
		}else {
			if(ca==cb)for(int j=1;j<=m;j++)c[i][j]='#';
			else if(ca>cb){
				for(int j=1;j<=m;j++)c[i][j]='#';
				for(int j=m-ca+1;j<=m;j++)c[i][j]='A';
			}else {
				for(int j=1;j<=m;j++)c[i][j]='#';
				for(int j=1;j<=cb;j++)c[i][j]='B';
			}
		}
	}
	for(int i=1;i<=n;i++){
		for(int j=1;j<=m;j++){
			if(c[i][j]=='#'||c[i][j]=='H')cout<<c[i][j];
			else {
				bool fl=0;
				if(i>1)fl|=c[i-1][j]==c[i][j];
				if(i<n)fl|=c[i+1][j]==c[i][j];
				if(fl)cout<<"#";
				else cout<<c[i][j];
			}
		}
		cout <<'\n';
	}
	return 0;
}
```

---


# [PA 2024] Obrazy

## é¢˜ç›®èƒŒæ™¯

PA 2024 3C

## é¢˜ç›®æè¿°

**é¢˜ç›®è¯‘è‡ª [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Obrazy](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/obr/)ï¼Œæ„Ÿè°¢ Macaronlin æä¾›ç¿»è¯‘**

ç»™å®šå°ºå¯¸ä¸º $h\times w$ çš„çŸ©å½¢å¢™é¢ï¼Œä»¥åŠ $n$ ç§å°ºå¯¸çš„æ­£æ–¹å½¢ç”»æ¡†ï¼Œæ¯ç§å°ºå¯¸ç”»æ¡†éƒ½æœ‰æ— ç©·å¤šä¸ªã€‚å¯¹äºä»»æ„ä¸¤ç§ä¸åŒå°ºå¯¸çš„ç”»æ¡†ï¼Œå…¶ä¸­ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿æ€»èƒ½æ•´é™¤å¦ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿ã€‚

ç°ç”¨è¿™äº›ç”»æ¡†å®Œå…¨è¦†ç›–å¢™é¢ï¼Œè€Œä¸”ç”»æ¡†ä¹‹é—´ä¸èƒ½é‡å ï¼Œåªèƒ½è¾¹ç¼˜ç›¸æ¥ï¼Œè¯·æ±‚å‡ºæœ€å°‘éœ€è¦è´­ä¹°å¤šå°‘ä¸ªç”»æ¡†ï¼Ÿå¦‚æœä¸å¯èƒ½å®Œå…¨è¦†ç›–å¢™é¢ï¼Œåˆ™ç¨‹åºåº”è¾“å‡º $-1$ã€‚

## è¯´æ˜/æç¤º

åœ¨ç¬¬ä¸€ä¸ªæ ·ä¾‹ä¸­ï¼ŒByteasar å¯ä»¥ç”¨ä¹ä¸ªç”»æ¡†ï¼ˆå…­ä¸ª $1\times 1$ã€ä¸¤ä¸ª $3\times 3$ å’Œä¸€ä¸ª $6\times 6$ï¼‰è¦†ç›–ä¸€é¢å¢™ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/t6g3zuws.png)

åœ¨ç¬¬äºŒä¸ªæ ·ä¾‹ä¸­ï¼Œæ— æ³•å®Œå…¨è¦†ç›–å¢™é¢ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
6 10
3
1 3 6
```

### è¾“å‡º

```
9
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 3
1
2
```

### è¾“å‡º

```
-1```

# é¢˜è§£

## ä½œè€…ï¼šEMO_smile (èµï¼š4)

# P10358 [PA2024] Obrazy

[é¢˜ç›®ä¼ é€é—¨](https://www.luogu.com.cn/problem/P10358)

## é¢˜æ„åˆ†æï¼š

### 1.ç‰¹åˆ¤

æˆ‘ä»¬~~å¾ˆå®¹æ˜“~~èƒ½å¤Ÿæƒ³åˆ°æœ¬é¢˜çš„ç‰¹æ®Šåˆ¤æ–­ï¼šå³å½“**æœ€å°çš„ç”»æ¡†**éƒ½ä¸å¯èƒ½è¦†ç›–**æ•´ä¸ª**çŸ©å½¢å¢™é¢æ—¶ï¼Œè¾“å‡º $-1$ã€‚

### 2.å¸¸è§„

è‹¥æˆ‘ä»¬å°†å¢™é¢çš„é•¿è®¾ä¸º $l$ï¼Œå®½è®¾ä¸º $r$,ç”»æ¡†**æœ€å°è¾¹é•¿**ä¸º $a[i]$ï¼Œç”»æ¡†å¯è¦†ç›–é¢ç§¯ä¸º $ans$ï¼ˆå› ä¸ºéœ€è¦ä¿è¯ç”»æ¡†çš„å®Œæ•´æ€§ï¼Œä¸èƒ½è®©ä¸€ä¸ª $2\times2$ çš„ç”»æ¡†å˜ä¸º $1\times4$ï¼‰ï¼Œæ˜“å¾—ï¼š
$$
ans=((l-(l\bmod a[i]))\times(r-(r\bmod a[i]));
$$
å½“ $ans < l\times r$ æ—¶ï¼Œè¾“å‡º $-1$ã€‚

æˆ‘ä»¬å¯ç”¨ä¸€ä¸ªå˜é‡ $tmp$ æ¥è¡¨ç¤ºå½“å‰ç”»æ¡†å¯è¦†ç›–é¢ç§¯ï¼Œ $a1[i]$ æ¥åˆ¤æ–­ç¬¬ $i$ ä¸ªç”»æ¡†çš„é¢ç§¯ï¼Œåˆ¤æ–­å½“å‰æœ‰å¤šå°‘ä¸ª  $a1[i-1]$ é¢ç§¯çš„ç”»æ¡†å¯ä»¥è¢« $a1[i]$ æ•´é™¤å³å¯ï¼š
```cpp
tmp=(l-(l%a[i]))*(r-(r%a[i]));
ans-=tmp/a1[i-1];//è¾ƒå°ç”»æ¡†å¯æ¢æ•°é‡
ans+=tmp/a1[i];//è¾ƒå¤§ç”»æ¡†å¯æ¢æ•°é‡
```
ä»£ç ï¼š
```cpp
//#pragma GCC optimize(3,"Ofast","inline")
#include<bits/stdc++.h>
using namespace std;
inline long long read(){//å¿«è¯»
	long long x=0,f=1;
	char c=getchar();
	while(c<'0'||c>'9'){
		if(c=='-'){
			f=-1;
		}
		c=getchar();
	}
	while(c>='0'&&c<='9'){
		x=(x<<1)+(x<<3)+(c^'0');
		c=getchar();
	}
	return x*f;
}
void write(int x){//å¿«å†™ï¼ˆè™½ç„¶ä¸ç»å¸¸ç”¨ï¼‰
	if(x<0){
		putchar('-');
		x=-x;
	}
	if(x>9){
		write(x/10);
	}
	putchar(x%10+'0');
	return;
}
long long a[1145141],f[1145141],n,m,l,r,a1[1145141];
int main(){
	l=read();r=read();
	m=l*r;//è®¡ç®—æ€»é¢ç§¯
	n=read();
	long long ans=0;
	for(int i=1;i<=n;i++){
		a[i]=read();
		a1[i]=a[i]*a[i];
		if(i==1){//ç‰¹åˆ¤ï¼šæœ€å°ç”»æ¡†æœ‰æ— å¯èƒ½å…¨éƒ¨è¦†ç›–
			ans=(l-(l%a[i]))*(r-(r%a[i]));
			ans=ans/a1[i];
			if(ans*a1[i]<m){
				cout<<-1;
				exit(0);//=return 0;
			}
		}else{
			long long tmp=(l-(l%a[i]))*(r-(r%a[i]));//tmpè¡¨ç¤ºå½“å‰ç”»æ¡†å¯è¦†ç›–é¢ç§¯
			ans-=tmp/a1[i-1];//è¾ƒå°ç”»æ¡†å¯æ¢æ•°é‡
			ans+=tmp/a1[i];//è¾ƒå¤§ç”»æ¡†å¯æ¢æ•°é‡
		}
	}
	cout<<ans;
	return 0;
}
```

---

## ä½œè€…ï¼š__Octhyccc__ (èµï¼š3)

æˆ‘ä»¬å¯ä»¥æŠŠé¢˜ç›®ä¸­ç»™å‡ºçš„ $d_1$ å½“æˆ $1$ ä¸ªå•ä½ï¼Œ$h,w$ ä¸èƒ½æ•´é™¤ $d_1$ çš„è‚¯å®šä¸å¯ä»¥ï¼Œè¾“å‡º $-1$ã€‚

åˆå› ä¸ºå…¶ä½™æ­£æ–¹å½¢ç”»æ¡†è‚¯å®šæ˜¯ $d_1$ çš„å€æ•°ï¼Œä»¤æ•°ç»„ $b$ ä¸º $\frac{d_i}{d_1}$ çš„å€¼ï¼Œå…¶ä¸­ $1\le i\le n$ï¼Œ$\frac{h}{d_1},\frac{w}{d_1}$ åˆ†åˆ«è¡¨ç¤ºé•¿ï¼Œå®½ä¸­åˆ†åˆ«æœ‰å¤šå°‘ä¸ª $d_1$ï¼Œä»¤ $x,y$ åˆ†åˆ«ä¸º $\frac{h}{d_1},\frac{w}{d_1}$ã€‚

ä» $d_n$ å¼€å§‹å¯»æ‰¾ï¼Œå¦‚æœ $x\ge d_i$ å¹¶ä¸” $y\ge d_i$ï¼Œå°±è¯´æ˜è¯¥çŸ©å½¢ä¸­å¯ä»¥æ”¾ä¸‹ $d_i$ï¼Œç„¶åå°½é‡çš„å¾€é•¿æ–¹å½¢é‡Œå¡ $d_i\times d_i$ çš„æ­£æ–¹å½¢ï¼Œå¯ä»¥è¯æ˜ï¼Œè¯¥ç­–ç•¥ä¸ºæœ€ä¼˜è§£ã€‚

è¯æ˜ï¼šå¦‚æœèƒ½å¡ä¸‹ $d_i\times d_i$ çš„æ­£æ–¹å½¢ï¼Œé‚£ä¹ˆ $d_{i-1}\times d_{i-1}$ çš„æ­£æ–¹å½¢ä¸€å®šå¯ä»¥è¢«å¡ä¸‹ï¼Œä½†æ˜¯å¿…é¡»ç”¨ $\frac{b_i}{b_{i-1}}$ ä¸ª  $d_{i-1}\times d_{i-1}$ çš„æ­£æ–¹å½¢æ¥ä»£æ›¿ï¼Œå—æ•°åè€Œå¢å¤šï¼Œæ‰€ä»¥åœ¨å¯ä»¥å¡è¿›çš„æƒ…å†µä¸‹ $d_i$ æ¯” $d_i-1$ æ›´ä¼˜ã€‚

å¡å®Œäº†ä¹‹åä¼šå‡ºç° $2$ ç§æƒ…å†µï¼Œä¸‹é¢æˆ‘å°†ä¼šç»“åˆæ ·ä¾‹æ¥è§£é‡Šæˆ‘çš„æ€è·¯ã€‚

```
6 10
3
1 3 6
```

é¦–å…ˆï¼Œå»ºç«‹ä¸€ä¸ª $10\times 6$ çš„çŸ©å½¢ï¼ˆæˆ‘ä¹ æƒ¯é•¿è¾¹ä½œé•¿ï¼ŒçŸ­è¾¹ä½œå®½ï¼Œä¸å½±å“ç¨‹åºæ­£ç¡®ï¼‰ï¼Œç”¨æ¨ªçº¿åˆ†å‰²ï¼Œ$1\times 1$ çš„çŸ©å½¢ä¸º $1$ ä¸ªå•ä½ï¼ˆä¸Šæ–‡ä¸­çš„ $d_1$ï¼‰ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/0sdyq7tb.png)

ç”±ä¸Šæ–‡ç»“è®ºçŸ¥ï¼Œåœ¨æ­¤æ—¶é€‰æ‹© $6\times 6$ æœ€ä½³ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/h0z8kjpz.png)

è¿™æ˜¯ç¬¬ $1$ ç§æƒ…å†µï¼Œåˆšå¥½è£å‰ªå®Œæ¯•ï¼Œå¦‚æœä¸‹é¢è¿˜æœ‰å‰©ä½™ï¼ˆå‡è®¾ï¼‰ï¼Œå°±éœ€è¦è£å‰ªã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/v0hy5udv.png)

æˆ‘ä»¬å¯ä»¥æŠŠå‰©ä¸‹çš„ä»»åŠ¡æ‹†æˆçº¢è‰²å’Œç™½è‰²ä¸¤éƒ¨åˆ†ï¼Œé€’å½’è§£å†³ï¼ˆæ–¹æ³•å’Œä¸Šæ–‡ä¸€æ ·ï¼‰ã€‚

è®©æˆ‘ä»¬å†å›åˆ°æ ·ä¾‹ä¸Šæ¥ï¼Œè¿˜å‰©ä¸‹ä¸€ä¸ª $4\times 6$ çš„ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/l2d2vmzc.png)

å¯ä»¥æ‹†æˆä¸¤ä¸ª $3\times 3$ çš„ï¼Œè¿˜å‰©ä¸‹ä¸€ä¸ª $1\times 6$ çš„ã€‚

å› ä¸ºç°åœ¨åªæœ‰ $1\times 1$ å¯ä»¥å¡« $1\times 6$ çš„äº†ï¼Œåªèƒ½ä½¿ç”¨ $1\times 1$ã€‚

ç­”æ¡ˆä¸º $1+2+6=9$ã€‚

ä»£ç ï¼š

```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
int h,w,n,cnt;
int d[31],b[31];
void f(int x,int y){//(6,1)
	if(x<y)swap(x,y);
	int e1=0,e2=0,e3=0,e4=y,e5=x;
	for(int i=n-1;i>=0;i--){
		if(x>=b[i] && y>=b[i]){
		    int t1=x/b[i];
		    x-=t1*b[i];
		    e1+=t1;
		    t1=y/b[i];
		    y-=t1*b[i];
		    e2+=t1;
			cnt+=1ll*e1*e2;e3=b[i];
			break;
		}
	}
	if(e5-e1*e3>0 && e4>0)f(e5-e1*e3,e4);
	if(e1*e3>0 && e4-e2*e3>0)f(e1*e3,e4-e2*e3);//(6,1)
}
signed main(){
	scanf("%lld%lld%lld",&h,&w,&n);
	for(int i=0;i<n;i++){
		scanf("%lld",&d[i]);
	}
	if(h%d[0]!=0 || w%d[0]!=0){
		printf("-1");
		return 0;
	}
	for(int i=0;i<n;i++){
		b[i]=d[i]/d[0];
	}
	f(h/d[0],w/d[0]);
	printf("%lld",cnt);
	return 0;
}
```

å¦‚æœä½ æœ‰æ•°æ®è¿‡ä¸å»ï¼Œæˆ‘ç»™ä½ ä¸€ä¸ªå‘äººçš„ï¼š

```
100000 100000
1
1
```

ç­”æ¡ˆï¼š

```
10000000000
```

**æ‰€ä»¥ï¼Œè®°å¾—å¼€ long longã€‚**

---

## ä½œè€…ï¼šabc1234shi (èµï¼š2)

æˆ‘åšè¿™é¢˜ï¼Œåˆšå¼€å§‹æƒ³ç€ç”¨æšä¸¾ï¼Œä½† $30$ ä¸ªç”»æ¡†ï¼Œå¾ˆæ˜æ˜¾æšä¸¾ä¸äº†ä¸€ç‚¹ï¼Œåé¢æƒ³äº†ä¸€ä¸‹ç”¨è´ªå¿ƒé€‰æ‹©æœ€å¤§çš„ç”»æ¡†å°±å¯ä»¥äº†ï¼Œå…ˆç”¨æœ€å¤§çš„ç”»æ¡†å»è¦†ç›–ï¼Œä¹‹åä¼šå‰©ä¸‹ä¸¤ä¸ªè¾¹ä¸€ä¸ªè§’ï¼Œå†é€’å½’åœ°ç”¨æ›´å°çš„ç”»æ¡†è¦†ç›–è¿™ä¸¤ä¸ªåŒºåŸŸï¼ˆä¸¤è¾¹éƒ½å¯èƒ½æœ‰ä½™ï¼Œæ‰€ä»¥éœ€è¦é€’å½’ï¼‰ï¼Œå¤§ç™½è¯å°±æ˜¯ï¼šä»æœ€å¤§çš„å¼€å§‹è¯•ï¼Œç„¶åæ¯æ¬¡å–ä½™ç»§ç»­é™¤ï¼Œæœ€åç®—å‡ºå¤šå°‘æ¬¡å°±è¡Œäº†ï¼Œå¦‚æœä¸èƒ½å®Œå…¨è¦†ç›–ï¼ˆä¸ä¸å¢™é¢é¢ç§¯ç›¸ç­‰ï¼‰ï¼Œå°±è¾“å‡º $-1$ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ä¼šè¶…æ•´å½¢èŒƒå›´ï¼Œè¦å¼€é•¿æ•´å‹ï¼ˆæç«¯æ¡ä»¶ $100000000$ çš„å¹³æ–¹ï¼‰ã€‚

---

## ä½œè€…ï¼šyuanruiqi (èµï¼š1)

ç±»ä¼¼äº ARC172A çš„æ€è·¯ï¼Œå¯¹äºä¸€ä¸ªçŸ©å½¢å¯ä»¥å…ˆåœ¨å·¦ä¸Šè§’å¡«å°½é‡å¤šçš„èƒ½å¡«çš„æœ€å¤§çš„æ­£æ–¹å½¢ï¼Œå¹¶æ‹†å‡ºä¸¤ä¸ªå­çŸ©å½¢ï¼Œç”±äºæ¯ä¸ªå­çŸ©å½¢çš„è¾¹é•¿éƒ½æ˜¯æœ€å°æ­£æ–¹å½¢è¾¹é•¿çš„å€æ•°ï¼Œæ‰€ä»¥ä¸€å®šä¸ä¼šæœ‰æ–¹æ¡ˆä½¿å¾—ä¸¤ä¸ªå­çŸ©å½¢äº§ç”Ÿåæ•ˆæ€§ï¼Œå¯ä»¥ç›´æ¥é€’å½’ã€‚

---

## ä½œè€…ï¼šmozhao (èµï¼š1)

é¦–å…ˆï¼Œæ³¨æ„åˆ°æ»¡è¶³æ¯ä¸ª $ğ‘‘ğ‘–+1$ æ˜¯ $ğ‘‘ğ‘–$ çš„å€æ•° 
$(1â‰¤ğ‘–<ğ‘›)$ ï¼Œé‚£ä¹ˆè¯´æ˜æ¯ä¸ªæ­£æ–¹å½¢éƒ½èƒ½è½¬åŒ–ä¸ºè‹¥å¹²ä¸ªæœ€å°çš„æ­£æ–¹å½¢ï¼Œæ‰€ä»¥ $ğ‘¤$ $mod$ $ğ‘‘1â‰ 0$ æˆ– $â„$ $mod$ $ğ‘‘1â‰ 0$ æ— è§£ã€‚

æœ‰è§£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€†å‘æ€ç»´ï¼Œå…ˆå°†çŸ©å½¢ç”¨æœ€å°çš„æ­£æ–¹å½¢é“ºå¥½ï¼Œç®—å‡ºéœ€è¦å¤šå°‘å—ä¹‹åï¼Œä»å°å¾€å¤§ä¸€å—ä¸€å—å¡«ï¼Œæ¯å¡«ä¸€å—ï¼Œå°±ç›¸åº”åœ°å‡å°‘æ­£æ–¹å½¢æ•°é‡ï¼Œè®¡ç®—å³å¯ã€‚

ACä»£ç å¦‚ä¸‹ï¼š
```cpp
#include<bits/stdc++.h>
using namespace std;
long long h,w,d[35],n,ans;
int main() {
	cin>>h>>w>>n;
	for(long long i=1; i<=n;i++){
		cin>>d[i];
	}
	if(h%d[1]!=0||w%d[1]!=0){//åˆ¤æ–­èƒ½å¦å¡«æ»¡
		cout<<-1;
		return 0;
	}
	ans=h*w/d[1]/d[1];
	for(int i=2; i<=n;i++) {
		if(d[i]>h||d[i]>w){
			break;
		}
		h=h-h%d[i];
		w=w-w%d[i];
		ans=ans-h*w/d[i-1]/d[i-1]+h*w/d[i]/d[i]; //æ›´æ–°æ­¤æ—¶æ”¾å…¥çš„æ­£æ–¹å½¢çš„ä¸ªæ•°
	}
	cout<<ans;
	return 0;
}
```
å®Œç»“æ’’èŠ±ï¼

---

## ä½œè€…ï¼šKyleShen1213 (èµï¼š1)

## é¢˜ç›®åˆ†æ
è€ƒè™‘é€’å½’ã€‚å°†æ­£æ–¹å½¢ç”»æ¡†ç”±å¤§åˆ°å°èƒ½æ‘†å°±æ‘†ï¼Œç”±äºé¢˜ç›®è¯´äº†å¤§çš„ç”»æ¡†è¾¹é•¿ä¸€å®šèƒ½æ•´é™¤å°çš„ç”»æ¡†è¾¹é•¿ã€‚

æ‰€ä»¥å®¹æ˜“è¯æ˜å¦‚æœè¿™æ ·æ‘†åˆ°æœ€åæœ‰å‰©ä½™ï¼ˆè¡¨ç¤ºæœ€å°çš„ä¹Ÿæ— æ³•åœ¨æ‘†è¿›å»ï¼‰ã€‚

ä¸æ‡‚å¾—è¯¦è§ä»£ç ï½

## AC code
```cpp
#include<bits/stdc++.h>
using namespace std;
long long h,w,ans,n,d[35];
bool fl;
void Do(long long a,long long b,long long i)//é€’å½’å‡½æ•° 
{
	if(i==0)//å¦‚æœæœ‰å‰©ä½™å´æ— æ³•å¡«æ»¡ï¼Œfl=1ï¼Œä¸»å‡½æ•°è¾“å‡º-1 
	{
		fl=1;
		return;
	}
	ans+=(long long)(a/d[i])*(long long)(b/d[i]);//åŠ ä¸Šæ–°æ”¾å…¥çš„æ•°é‡ 
	long long t1=a%d[i],t2=b%d[i];//ä¸‹ä¸€æ¬¡é€’å½’çš„æ•°å€¼ 
	if(t1&&t2)//t1å’Œt2åˆ†åˆ«è¡¨ç¤ºä¸Šä¸‹å‰©ä½™å’Œå·¦å³å‰©ä½™ï¼Œiè¡¨ç¤ºç”»æ¡†ç¼–å· 
	{
		Do(t1,b,i-1);//é€’å½’
		Do(a-t1,t2,i-1);//é€’å½’
	}
	else if(t1)  Do(t1,b,i-1);//é€’å½’
	else if(t2)  Do(a,t2,i-1);//é€’å½’
}
int main()
{
	cin>>h>>w>>n;//è¾“å…¥
	for(int i=1;i<=n;i++)
	{
		cin>>d[i];
	}
	Do(h,w,n);//é€’å½’ 
	if(fl==1)
	{
		cout<<"-1"<<endl;//å¦‚æœfl=1ï¼Œè¯´æ˜æ— æ³•å¡«æ»¡ï¼Œè¾“å‡º-1 
	}
	else
	{
		cout<<ans<<endl;//è¾“å‡ºans
	}
	return 0;
}
```

---

## ä½œè€…ï¼šwe_are_the_chuibing (èµï¼š1)

é¦–å…ˆï¼Œæ³¨æ„åˆ°æ»¡è¶³æ¯ä¸ª $d_{i+1}$ æ˜¯ $d_i$ çš„å€æ•° $(1\le i<n)$ï¼Œé‚£ä¹ˆè¯´æ˜æ¯ä¸ªæ­£æ–¹å½¢éƒ½èƒ½è½¬åŒ–ä¸ºè‹¥å¹²ä¸ªæœ€å°çš„æ­£æ–¹å½¢ï¼Œæ‰€ä»¥ $w \bmod d_1 \ne 0$ æˆ– $h \bmod d_1 \ne 0$ æ—¶ï¼Œæ— è§£ã€‚

æœ‰è§£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€†å‘æ€ç»´ï¼Œå…ˆå°†çŸ©å½¢ç”¨æœ€å°çš„æ­£æ–¹å½¢é“ºå¥½ï¼Œç®—å‡ºéœ€è¦å¤šå°‘å—ä¹‹åï¼Œä»å°å¾€å¤§ä¸€å—ä¸€å—å¡«ï¼Œæ¯å¡«ä¸€å—ï¼Œå°±ç›¸åº”åœ°å‡å°‘æ­£æ–¹å½¢æ•°é‡ï¼Œè®¡ç®—å³å¯ã€‚

```cpp
#include<iostream>
using namespace std;
long long h,w,n,d[31],ans;
int main(){
	cin>>h>>w>>n;
	for(int i=1;i<=n;i++)cin>>d[i];
	if((h%d[1])||(w%d[1])){cout<<-1;return 0;}
	ans=h/d[1]*w/d[1];
	for(int i=2;i<=n;i++){
		long long a=(d[i]/d[i-1])*(d[i]/d[i-1])-1;
		long long b=(h/d[i])*(w/d[i]);
		ans-=(a*b);
	}
	cout<<ans;
	return 0;
}
```

---

## ä½œè€…ï¼šguer_loser_lcz (èµï¼š0)

# é¢˜è§£
## é¢˜ç›®å¤§æ„
ç”¨æœ€å°‘çš„æ–¹å—è´´æœ€å¤§çš„å¢™ï¼Œæ— é—æ¼é‡å ã€‚
## æ€è·¯
### åˆ¤ä¸è¡Œ
æ³¨æ„è¿™å¥è¯ï¼š**å…¶ä¸­ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿æ€»èƒ½æ•´é™¤å¦ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿**ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦è¿æœ€å°çš„æ–¹å—éƒ½ä¸èƒ½æ•´é™¤ï¼ˆæ­£å¥½é“ºæ»¡ï¼‰è¾¹é•¿ï¼Œæ—¢å¯åˆ¤å¦ã€‚
### å¯ä»¥
å› ä¸ºè¦çœæ–¹å—ï¼Œæ‰€ä»¥è¦ä»å¤§å¾€å°ç”¨ã€‚

æ˜¾ç„¶è¿™å¹¶ä¸è¡Œï¼Œå› ä¸ºé“ºå¤šäº†åï¼Œæ•´ä¸ªé•¿æ–¹å½¢å‰©çš„å¥‡å½¢æ€ªçŠ¶çš„ã€‚

æ‰€ä»¥è€ƒè™‘é€†å‘æ€ç»´ï¼Œå†çœ‹è¿™å¥è¯ï¼š**å…¶ä¸­ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿æ€»èƒ½æ•´é™¤å¦ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿**ã€‚ç„¶åé€æ¸ç”¨å¤§æ­£æ–¹å½¢æ›¿æ¢å°æ­£æ–¹å½¢å°±è¡Œäº†ã€‚
## ä»£ç 

```cpp
#include<bits/stdc++.h>
using namespace std;
long long h,w,n,d[40],ans;
int main(){
	cin>>h>>w;
	cin>>n;
	for(int i=1;i<=n;i++)cin>>d[i];//æœ´å®æ— åçš„è¾“å…¥
	if(h%d[1]!=0||w%d[1]!=0){
		cout<<-1;
		return 0;
	}åˆ¤ä¸è¡Œ
	ans+=(h/d[1]*w/d[1]);//å…¨ç”¨æœ€å°çš„
	for(int i=2;i<=n;i++){
		int sl=(w/d[i]*h/d[i])/*æ”¾ä¸‹å‡ ä¸ªå¤§çš„*/
        int gs=(d[i]/d[i-1]*d[i]/d[i-1])-1;/*æ¯ä¸ªèŠ‚çº¦å¤šå°‘*/
		ans-=(sl*gs);//å‡å»å‡å°‘çš„
	}
	cout<<ans;//è¾“å‡º
	return 0;
}
```
## æé†’
- å®¡é¢˜ä¸è§„èŒƒï¼Œåˆ†æ•°ä¸¤è¡Œæ³ªã€‚
- int çœŸèƒ½å­˜ä¸‹ï¼Ÿ
- ç»†èŠ‚å†³å®šæˆè´¥ã€‚

---

## ä½œè€…ï¼šIl1_1_3 (èµï¼š0)

# P10358 Obrazy é¢˜è§£

[é¢˜ç›®ä¼ é€é—¨](https://www.luogu.com.cn/problem/P10358)

~~PA çš„é¢˜ç¹æ®–åä»£èƒ½åŠ›å¥½å¼ºï¼~~

## é¢˜ç›®å¤§æ„
å°ºå¯¸ä¸º $h \times w$ çš„çŸ©å½¢å¢™é¢ï¼Œæœ‰ $n$ ç§ä¸åŒçš„ç”»æ¡†ï¼Œå°†ç”»æ¡†é“ºåœ¨å¢™ä¸Šï¼Œä¸èƒ½é‡å ï¼Œæ±‚æœ€å°‘ç”¨å¤šå°‘ä¸ªç”»æ¡†å¯ä»¥æŠŠå¢™å£é“ºæ»¡ã€‚è‹¥ä¸å¯èƒ½ï¼Œè¾“å‡º $-1$ã€‚

**é‡è¦æ¡ä»¶ï¼šæ¯ä¸ªç”»æ¡†çš„è¾¹é•¿ $d_i (2 \le i \le n)$ ä¸€å®šæ»¡è¶³ $d_{i-1} \mid d_i$**ã€‚


## æ€è·¯åˆ†æ

- å…ˆæ¥çœ‹ä¸å¯èƒ½å®ç°çš„æƒ…å†µã€‚

  æˆ‘ä»¬çŸ¥é“ï¼š

  $\because$ å¦‚æœ $a \mid b$ ä¸” $c \not\equiv 0 (\bmod \: a)$ï¼Œ

  $\:\:\:$ å¯ä»¥æ¨å‡º $c \not\equiv 0 (\bmod \: b)$ã€‚

  $\therefore$ å½“åªç”¨ $d_1$ è¾¹é•¿çš„ç”»æ¡†éƒ½ä¸èƒ½è¦†ç›–ï¼Œé‚£ä¹ˆå…¶ä»–ç”»æ¡†ä¹Ÿä¸€å®šä¸å¯èƒ½ï¼Œè¿™æ—¶å€™ï¼Œè¾“å‡º $-1$ã€‚

- å¯èƒ½çš„æƒ…å†µï¼š

  è¿™é‡Œæˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼šå…ˆæŠŠå¢™é¢ç”¨è¾¹é•¿ $d_1$ çš„ç”»æ¡†é“ºæ»¡ï¼Œå†ä»å°åˆ°å¤§æŠŠèƒ½æ›¿æ¢çš„ $(\dfrac{d_i}{d_{i-1}})^2$ ä¸ªè¾¹é•¿ä¸º $d_{i-1}$ çš„å°æ­£æ–¹å½¢ç”¨å¤§ä¸€ç‚¹çš„æ›¿æ¢æ‰ï¼Œè®¡ç®—åªéœ€åœ¨ $ans$ é‡Œå‡å»å°±å¯ä»¥äº†ã€‚

ä¸‹é¢è´´ä¸Šå®Œæ•´ä»£ç ï¼š
```cpp
#include <bits/stdc++.h>
#define ll long long
using namespace std;
ll h,w,n,ans,dan,gong;//long long è¦æ³¨æ„
ll d[33];//åŒä¸Š
int main()
{
	ios::sync_with_stdio(0);
	cin.tie(0);
	cin >> h >> w >> n;
	for(int i=1;i<=n;i++)
		cin >> d[i];
	if((h%d[1]||w%d[1])||(h<d[1]||w<d[1]))//åˆ¤æ–­ä¸å¯èƒ½çš„æƒ…å†µ
	{
		cout << "-1";
		return 0;
	}
	ans=(h/d[1])*(w/d[1]);//æ‰€æœ‰éƒ½ç”¨d[1]ç”»æ¡†
	for(int i=2;i<=n;i++)
	{
		dan=(d[i]/d[i-1])*(d[i]/d[i-1])-1;//-1æ˜¯å› ä¸ºæ›¿æ¢åä¹Ÿæœ‰ä¸€ä¸ª
		gong=(h/d[i])*(w/d[i]);//å¤§å·æ­£æ–¹å½¢ä¸ªæ•°
		ans-=dan*gong;
	}
	cout << ans;
	return 0;
}
```

[å®Œç¾ç»“æŸï¼](https://www.luogu.com.cn/record/169676547)

~~1ï¼6ï¼2ï¼ä¸ªæµ‹è¯•ç‚¹ã€‚~~

---

## ä½œè€…ï¼š__rnfmabj__ (èµï¼š0)

## é¢˜ç›®å¤§æ„

[é¢˜ç›®ä¼ é€é—¨](https://www.luogu.com.cn/problem/P10358)

å¤§æ„æ˜¯ç»™å®š $w Ã— h$ çš„çŸ©é˜µï¼Œå¹¶ç»™å‡º $n$ ç§å°ºå¯¸ä¸åŒçš„å°çŸ©é˜µï¼Œé—®**æœ€å°‘**å¯ä»¥ç”¨å¤šå°‘ä¸ªå°çŸ©é˜µå°†å¤§çŸ©é˜µå¡«æ»¡ã€‚

## ç†æ¸…æ€è·¯

é¦–å…ˆæ³¨æ„åˆ°é¢˜é¢æœ‰ä¸€å¥è¯ï¼š**å¯¹äºä»»æ„ä¸¤ç§ä¸åŒå°ºå¯¸çš„ç”»æ¡†ï¼Œå…¶ä¸­ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿æ€»èƒ½æ•´é™¤å¦ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿**ã€‚

é‚£ä¹ˆæˆ‘ä»¬ä¸éš¾æƒ³åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸åŒçš„å°çŸ©é˜µæ¥å‡‘æˆä¸€ä¸ªå¤§çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ±‚å‡ºä¸€å…±å¯ä»¥ç”¨å¤šå°‘ä¸ªå°çŸ©é˜µï¼Œåœ¨é€æ­¥æ‹¼æˆä¸€ä¸ªå¤§çŸ©é˜µã€‚

é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦é¢„å¤„ç†å‡º**æ¯ä¸€ä¸ªå°æ­£æ–¹å½¢è½¬æ¢ä¸ºæ›´å¤§æ­£æ–¹å½¢èŠ‚çœäº†å¤šå°‘**ï¼Œä»¥åŠ**å¯ä»¥å®¹çº³å¤šå°‘ä¸ªæ›´å¤§çš„æ­£æ–¹å½¢**ã€‚å°†ä»–ä»¬ç´¯åŠ èµ·æ¥ï¼Œå°±æ˜¯æœ€ç»ˆèŠ‚çœä¸‹äº†çš„çŸ©é˜µæ€»æ•°ã€‚

é‚£ä¹ˆæ— è§£çš„æƒ…å†µä¹Ÿå°±å¥½åˆ¤æ–­äº†ï¼Œå¦‚æœå½“å‰çš„å¤§çŸ©é˜µè¿æœ€å°çš„çŸ©é˜µéƒ½åˆ†è§£ä¸äº†ï¼Œé‚£ä¹ˆä¹Ÿæ— æ³•è¢«åˆ«çš„çŸ©é˜µåˆ†è§£ã€‚

## Code

å¯èƒ½ä¼šæœ‰é—®é¢˜çš„éƒ½å¡æ³¨é‡Šé‡Œäº†ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;

long long h,w,n,d[55];//å˜é‡å¦‚é¢˜é¢
long long ans,k,l,sum;
//ansç”¨äºè®°å½•ç­”æ¡ˆï¼Œkè¡¨ç¤ºå°†å°æ­£æ–¹å½¢æ”¹æˆå¤§æ­£æ–¹å½¢åèŠ‚çœäº†å¤šå°‘
//lè¡¨ç¤ºå¯ä»¥å¡å¤šå°‘ä¸ªæ›´å¤§çš„æ­£æ–¹å½¢ï¼Œsumè¡¨ç¤ºæœ€ç»ˆèŠ‚çœäº†å¤šå°‘

int main(){
	scanf("%lld%lld%lld",&h,&w,&n);

	for (int i=1;i<=n;i++){
		scanf("%lld",&d[i]);
		if (i==1)continue;

		k=(d[i]/d[i-1])*(d[i]/d[i-1])-1;
		//å‡1æ˜¯å› ä¸ºè½¬æ¢ä¹‹åå®ƒè‡ªå·±ä»æ˜¯ä¸€ä¸ªï¼Œä¹Ÿä¼šå ç”¨ä¸€ä¸ªansçš„ä½ç½®
		l=(w/d[i])*(h/d[i]);
		//è®¡ç®—å¯ä»¥å®¹çº³å¤šå°‘ä¸ªæ›´å¤§çš„æ­£æ–¹å½¢
		sum+=(k*l);
		//è®°å½•ä¸‹èŠ‚çœçš„æ€»æ•°
	}
	if (h%d[1]!=0 || w%d[1]!=0)
		//æ— æ³•é€šè¿‡æœ€å°çš„çŸ©é˜µéƒ½åˆ†è§£ï¼Œæ— è§£
		printf("-1");
	else {
		ans=(w/d[1])*(h/d[1])-sum;
		//ç”¨æ‰€æœ‰çš„å‡å»èŠ‚çœä¸‹æ¥çš„ï¼Œå°±æ˜¯ç­”æ¡ˆ
		cout<<ans;
	}
	return 0;
}
```

---

## ä½œè€…ï¼šHappy_mouse (èµï¼š0)

# [P10358 Obrazy](https://www.luogu.com.cn/problem/P10358) é¢˜è§£

[ACè¯æ˜](https://www.luogu.com.cn/record/163010423)~~ï¼ˆè¿™é¢˜æ ·ä¾‹æ˜¯çœŸå¤šå•Šâ€¦â€¦ï¼‰~~

## çœ‹å®Œé¢˜ç›®ï¼Œåˆ†æä¸€ä¸‹ï¼š

æ³¨æ„åˆ°é¢˜ç›®ä¸­ä¸€å¥è¯ï¼šâ€œå¯¹äº**ä»»æ„**ä¸¤ç§ä¸åŒå°ºå¯¸çš„ç”»æ¡†ï¼Œå…¶ä¸­ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿**æ€»èƒ½æ•´é™¤**å¦ä¸€ä¸ªå°ºå¯¸çš„è¾¹é•¿ã€‚â€

å› æ­¤ï¼Œå¤§ä¸€ç‚¹çš„ç”»æ¡†å çš„ä½ç½®ä¸€å®šå¯ä»¥ç”¨å¾ˆå¤šä¸ªå°ä¸€ç‚¹çš„ç”»æ¡†é“ºä¸Šã€‚

è€Œé—®é¢˜åˆè®©ç”¨ç”»æ¡†æœ€å°‘ï¼Œå› æ­¤ï¼Œé€‰å¤§çš„ä¸€ä¸ªè‚¯å®šè¦æ¯”é€‰å¾ˆå¤šä¸ªå°çš„é“ºåŒæ ·çš„ä½ç½®ç”¨ç”»æ¡†å°‘ã€‚

è¿™æ ·ï¼ŒåŠæ³•å°±å®šä¸‹æ¥äº†ï¼šå…ˆé€‰å¤§çš„ï¼ŒæŠŠèƒ½é“ºçš„é“ºå®Œï¼Œå†é€‰å°çš„ã€‚

## ç»†èŠ‚

- ç”»æ¡†â€œ**æ•´é½é è¾¹ç«™**â€ï¼Œå¦åˆ™ä¼šè®©å‰©ä¸‹çš„æ•´å—å„¿ç©ºé—´å˜å°ã€‚
- é“ºå®Œä¸€ç‰‡ç”»æ¡†ï¼Œå¯èƒ½ä¼šå½¢æˆ $L$  å‹ç©ºç™½ï¼Œæ­¤æ—¶å¯ä»¥é€’å½’è§£å†³ï¼Œç»¿è‰²åŒºåŸŸå°±æ˜¯åˆšé“ºå®Œçš„ç”»æ¡†ï¼Œæ¥ä¸‹æ¥å¯ä»¥åˆ†çº¢ã€ç™½ä¸¤å—è¿›è¡Œé€’å½’ã€‚
![](https://cdn.luogu.com.cn/upload/image_hosting/v0hy5udv.png)

ï¼ˆå›¾ç‰‡æ¥è‡ª @\_\_Ending__ï¼‰

## é€’å½’éƒ¨åˆ†

```
//nå­˜ç”»æ¡†ç§ç±»æ•°ï¼Œaæ•°ç»„å­˜ç”»æ¡†ç§ç±»
//cntç´¯åŠ ç”¨åˆ°çš„ç”»æ¡†æ•°

void dg(int x,int y){//x,yå­˜å½“å‰é€’å½’çš„è§„æ¨¡ï¼ˆæ¨ªå‘ä¸çºµå‘çš„å•ä½æ•°ï¼‰
	if(x==0||y==0) return ;//é¢ç§¯ä¸º0ï¼Œç›´æ¥è·³å‡º
	int k;//å­˜æœ€å¤§èƒ½ä½¿ç”¨ç”»æ¡†çš„è¾¹é•¿
	for(int i=n;i>0;i--){//ä»å¤§åˆ°å°éå†
		if(x>=a[i]&&y>=a[i]){//æ‰¾åˆ°èƒ½æ”¾å¾—ä¸‹çš„æœ€å¤§å€¼
			k=a[i];//å­˜
			break;//ç›´æ¥è·³å‡º
		}
	}
	int dx=x/k,dy=y/k;//åˆ†åˆ«ç®—æ¨ªå‘ä¸çºµå‘å„èƒ½æ”¾å¤šå°‘ä¸ª
	cnt+=dx*dy;//ç´¯åŠ ç”»æ¡†ä¸ªæ•°
	dg(x-dx*k,dy*k);//ä¸Šå›¾çº¢è‰²éƒ¨åˆ†
	dg(x,y-dy*k);//ç™½è‰²éƒ¨åˆ†
}
```

ä¸ºé˜²æ­¢æŠ„è¢­ï¼Œå°±ä¸æ”¾å®Œæ•´ä»£ç äº†æ¬§ã€‚

---

## ä½œè€…ï¼šiyka (èµï¼š0)

### é¢˜ç›®åˆ†æ
ç»™å‡ºä¸€ä¸ª $h\times w$ çš„ç©ºæ—·åŒºåŸŸï¼Œè¦æ±‚ç”¨ç»™å®šçš„ $n$ ç§æ­£æ–¹å½¢ä¸­å–å‡ºéƒ¨åˆ†ï¼Œæ— é‡å å¡«æ»¡ç©ºæ—·åŒºåŸŸï¼Œå…¶ä¸­ä»»æ„ä¸€ä¸ª $d_i$ å’Œ $d_j\ (1\le i\le j\le n)$ éƒ½æœ‰ $d_j$ æ•´é™¤ $d_i$ï¼ˆ$d$ ä¸ºæ­£æ–¹å½¢çš„è¾¹é•¿ï¼‰ï¼Œè‹¥å¯ä»¥å¡«æ»¡ï¼Œåˆ™è¾“å‡ºæœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ­£æ–¹å½¢ï¼›è‹¥ä¸å¯ä»¥å¡«æ»¡ï¼Œåˆ™è¾“å‡º $-1$ã€‚

### å¦‚ä½•åˆ¤æ–­èƒ½å¦å¡«æ»¡
æ³¨æ„é¢˜ç›®ä¸­ç»™å‡ºçš„æ¡ä»¶ï¼Œ$\text{ä¿è¯ } d_{i+1} \text{ èƒ½è¢« } d_i \text{ æ•´é™¤}$ï¼Œå³å…¶ä¸­ä»»æ„ä¸€ä¸ª $d_i$ å’Œ $d_j(1\le i\le j\le n)$ éƒ½æœ‰ $d_j$ æ•´é™¤ $d_i$ï¼Œæ‰€ä»¥æˆ‘ä»¬åªç”¨è€ƒè™‘ $d_1$ æ˜¯å¦èƒ½è¢« $h$ å’Œ $w$ åŒæ—¶æ•´é™¤å³å¯ï¼Œè‹¥ä¸å¯ä»¥ï¼Œå³ä¸å¯ä»¥å¡«æ»¡ï¼Œåˆ™è¾“å‡º $-1$ã€‚

### å¦‚ä½•è®¡ç®—å¡«æ»¡æœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ­£æ–¹å½¢
å› ä¸ºé¢˜ç›®ç»™å‡ºçš„ $h$ å’Œ $w$ éƒ½ååˆ†çš„å¤§ï¼ˆ$1\le h,w\le 10^9$ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ç›´æ¥æš´åŠ›æœç´¢å¾—å‡ºç­”æ¡ˆï¼Œè¿™é‡Œè€ƒè™‘åˆ©ç”¨é¢˜ç›®ç»™å‡ºçš„ $d$ çš„ç‰¹æ€§æ¥è®¡ç®—ã€‚é¦–å…ˆå…ˆè®¡ç®—å‡ºå…¨éƒ¨ç”¨è¾¹é•¿ä¸º $d_1$ çš„æ­£æ–¹å½¢å¡«æ»¡æ—¶éœ€è¦çš„æ­£æ–¹å½¢æ•°é‡ï¼Œç„¶åä» $2$ éå†åˆ° $n$, æ¯æ¬¡ $O(1)$ ç®—å‡ºè¾¹é•¿ä¸º $d_i$ çš„æ­£æ–¹å½¢èƒ½å¡«æ»¡çš„åŒºåŸŸï¼Œå†æŠŠ $h$ å’Œ $w$ æ›´æ–°ä¸ºè¿™ä¸ªåŒºåŸŸçš„å¤§å°ï¼Œè‹¥æœ‰ $d_i>h$ æˆ– $d_i>w$ åˆ™ç»ˆæ­¢éå†ï¼Œå› ä¸º $d$ æ˜¯ä»å°åˆ°å¤§æ’åºçš„ï¼Œ$d_i$ æ— æ³•æ”¾å…¥ï¼Œé‚£ $d_j\ (i\le j\le n)$ è‡ªç„¶ä¹Ÿæ— æ³•æ”¾å…¥ï¼Œå¹¶åœ¨è¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°æ”¾å…¥çš„æ­£æ–¹å½¢çš„ä¸ªæ•°ï¼Œæ ¹æ®è´ªå¿ƒï¼Œæˆ‘ä»¬å°±èƒ½æ±‚å‡ºå¡«æ»¡æœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ­£æ–¹å½¢ã€‚æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œè½»æ¾é€šè¿‡ï¼ˆè®°å¾—å¼€ long longï¼‰ã€‚

### ä»£ç éƒ¨åˆ†
```cpp
#include<bits/stdc++.h>
using namespace std; 
#define int long long
const int N=35;
int h,w,d[N],n,ans;
signed main()
{
	cin>>h>>w>>n;
	for(int i=1;i<=n;++i)
		cin>>d[i];
	if(h%d[1]!=0 || w%d[1]!=0) //åˆ¤æ–­èƒ½å¦å¡«æ»¡
		return cout<<-1, 0;
	ans=h*w/d[1]/d[1];
	for(int i=2;i<=n;++i)
	{
		if(d[i]>h || d[i]>w)
			break;
		h-=h%d[i], w-=w%d[i];
		ans=ans-h*w/d[i-1]/d[i-1]+h*w/d[i]/d[i]; //æ›´æ–°æ­¤æ—¶æ”¾å…¥çš„æ­£æ–¹å½¢çš„ä¸ªæ•°
	}
	cout<<ans;
	return 0;
}
```

---


# 猫粮规划

## 题目描述

到中午了，机器猫要吃猫粮了。

机器猫掏出 $n$ 份食物，第 $i$ 份食物含有的能量为 $w[i]$。机器猫可以吃掉其中一些食物，获得这些食物的能量之和。

机器猫又不想变得太胖又不想变得太瘦，所以指定了一个目标区间 $[l, r]$。显然，可能有很多种选择食物的方式可以达成这个目标，因此机器猫想知道方案总数。



## 说明/提示

#### 样例解释

所有方案如下：

选择食物 1, 2, 4，能量 10+10+50 = 70  
选择食物 1, 3, 4，能量 10+20+50 = 80  
选择食物 2, 3, 4，能量 10+20+50 = 80  
选择食物 3, 4，能量 50+20 = 70

共 4 种方案。

#### 数据规模与约定

对于 $50\%$ 的数据，满足 $n\leq 20$。

对于 $100\%$ 的数据，满足 $n\leq 40, 20\leq w[i] \leq 100, l\leq r \leq 300$。

提示：$w[i]$ 在范围内均匀随机生成。


## 样例 #1

### 输入

```
4 70 85
10 10 20 50
```

### 输出

```
4```

# 题解

## 作者：Usada_Pekora (赞：34)

题意：给定 $N$ 个数， 求 $N$ 个数任取 $K$ 个后和在 $[l,r]$ 范围内的方案数。

显然，需要枚举子集，然后进行求和，不过 $O(2^n)$ 的复杂度显然过不了，所以可以进行一些剪枝：剩下的数全选也不到 $l$ 或者当前的和已经超过 $r$ 就不继续枚举。从大到小排序后进行搜索即可。

更快的方法是考虑 DP ，设  $F[i][j]$ 是选了 $1 $ ~ $i$ 后，和为 $j$ 的方案总数，那么可以推出 $F[i][j] = F[i-1][j] + F[i-1][j-a[i]]$ ，$i=0$ 或 $j=0$ 时方案数为 $1$ 。 

因为上面转移状态的第二维 $j$ 每次都是从比 $j$ 小的状态转移过来，且第一维 $i$ 只跟 $i-1$ 有关，所以我们可以使用滚动数组存储，省略第一维 $i$ 并倒着枚举 $j$ ，就可以不重复地统计方案了。




---

## 作者：ShanCreeperPro (赞：23)

## B3624 猫粮规划 題解

一道 `dfs` 综合应用题。

给定 $n$ 个数字 $a_i$ 并给定一个区间 $[l,r]$，求出从 $a_i$ 中选出若干的数字的和在区间中的方案数。

**方法1：枚举子集。**

把所有的可能性全部求出并进行比较，若符合则将方案书增加 1。

时间复杂度 $O(2^n)$，比较题目数据范围，通过比较吃力。

**方法2：剪枝。**

剪枝是 `dfs` 中常用的优化方法。

如果从这个节点开始，无论如何都不能满足题意，那就将这个节点及以下的所有树全部“剪”掉，也就是直接忽略。

所以，我们可以一边枚举一边计算总和，如果总和超过了这个区间马上放弃。

我们可以按照此方法设计 `dfs` 函数：

- 定义 $w$ 数组存储枚举数，其中 $w_i$ 表示第 $i$ 个的数量；
- 定义 $a$ 数组记录数字的使用，如果该数字使用过标记为 1，否则为 0；
- 定义 $sum$ 变量记录每一次枚举后的数字总和并和最大值 $r$ 比较，如果超过了这个值，剪枝，直接回头；
- 枚举到终点时，如果没有超过 $r$，方案数增加。

可以通过本题。

管理员注：

由于课程需要本题不展示代码。

如需系统学习相关知识点请报名【洛谷-基础算法计划】

---


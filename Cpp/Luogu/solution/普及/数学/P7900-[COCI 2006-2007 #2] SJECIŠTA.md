# [COCI 2006/2007 #2] SJECIŠTA

## 题目描述

考虑一个有 $n$ 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。

现在请你求出这样的多边形的对角线交点个数。

## 说明/提示

### 样例 3 解释
![](https://cdn.luogu.com.cn/upload/image_hosting/07pgpeuy.png)

### 数据规模与约定

对于全部的测试点，保证 $3 \leq n \leq 100$。

## 样例 #1

### 输入

```
3
```

### 输出

```
0```

## 样例 #2

### 输入

```
4
```

### 输出

```
1```

## 样例 #3

### 输入

```
6
```

### 输出

```
15```

# 题解

## 作者：zct_sky (赞：11)

~~根据题目可以知道，这是一道大水题~~

首先由于不会有三条（或以上）对角线交于一点，所以确定两条对角线就能确定唯一的交点。

换句话说，只要确定四个顶点就能确定一的交点。

那么这道题就变成了求出从 $n$ 个点中取 $4$ 个点的方案数。

由于第一个点有 $n$ 种取法，第二个点有 $n-1$ 种取法，第三个点有 $n-2$ 种取法，第四个点有 $n-3$ 种取法，又因为改变四个点的顺序不会改变对角线，所以还要除以 $4$ 个点的取法数，也就是除以 $4!(1 \times 2 \times 3 \times 4)$。

于是就可以推出公式： $n \times (n-1) \times (n-2) \times (n-3) \div 1 \div 2 \div 3 \div 4$

### Code:
```c++
#include<bits/stdc++.h>
using namespace std;
int a;
int main(){     
    cin>>a;
    if(a==3) cout<<0;
    else cout<<a*(a-1)*(a-2)*(a-3)/1/2/3/4;
    return 0;
}
```

---

## 作者：zjinyi (赞：2)

# 题解：P7900 SJECIŠTA

## 数学知识：排列组合（可跳过）
### 排列
定义：从 $n$ 个不同物品中，按顺序选择 $m$ 个东西，用 $A_n^m$ 表示。

比如在 $n$ 位同学中选一人做班长，另一人做副班长，先选班长有 $n$ 种选择，再选副班长剩下 $n-1$ 种选择，选择的方案数为 $A_n^2 = n \times (n-1)$。

如果再选一位学习委员，选择的方案数就为 $A_n^3 = n \times (n - 1) \times (n - 2)$。

于是，我们得出结论：$A_n^m = n \times (n - 1) \times \cdots \times (n - m + 1)$。

### 组合
定义：从 $n$ 个不同物品中，选择 $m$ 个东西但不关心顺序，用 $C_n^m$ 表示。

比如在 $n$ 位同学中选 $2$ 位班委，每一对同学就会被计算 $2$ 次，于是答案要除以 $A_2^2 = 2$，选择的方案数就为 $C_n^2 = \dfrac{n \times (n - 1)}{2}$。

如果选 $3$ 位班委，选择的方案数就为 $C_n^3 = \dfrac{n \times (n - 1) \times (n - 2)}{A_3^3} = \dfrac{n \times (n - 1) \times (n - 2)}{6}$。

于是，我们得出结论：$C_n^m = \dfrac{n \times (n - 1) \times \cdots \times (n - m + 1)}{m \times (m - 1) \times \cdots \times 1} = \dfrac{a_n^m}{a_m^m}$。

## 题目分析
因为这个多边形没有任何三个或以上的对角线交于一点，所以交点个数，就是从所有对角线中选择 $2$ 条的方案数。

而选择 $2$ 条对角线，就是选择 $4$ 个顶点（如果只选择 $3$ 个顶点，那么说明他们的交点是多边形的顶点，不符合题意）。

于是求交点个数，就转化成了求 $n$ 个顶点中选择 $4$ 个顶点的方案数。于是我们就可以用组合解决问题了，得出交点数为 $C_n^4 = \dfrac{n \times (n - 1) \times (n - 2) \times (n - 3)}{4 \times 3 \times 2 \times 1} = \dfrac{n \times (n - 1) \times (n - 2) \times (n - 3)}{24}$。

## 代码
希望大家能在理解题解的基础上自己写代码，不要复制粘贴代码。

```cpp
#include <iostream>
using namespace std;

long long c(long long n) // 自定义一个组合函数 
{
	return n * (n - 1) * (n - 2) * (n - 3) / 24;
}

int main()
{
	long long n; 
	cin >> n; // 输入 n 
	cout << c(n); // 输出答案 
	
	return 0;
} // 拒绝抄袭，从我做起！
```

这样一道~~标题抽象~~比较简单的题目就讲完了，能不能点个赞再走呢？

---

## 作者：一大 (赞：2)

## 题目大意

考虑一个有 n 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。

现在请你求出这样的多边形的对角线交点个数。

## 问题转化

**每四个点必定能确定一个交点，**

**所以答案就是 $C_{4}^{n}$。**

由于 $n\leq100$ ，所以必须用高精度。

不想写高精乘除，就用 dp 推。

难点就是高精度，难度大概是橙色。
## 问题延展
同类问题供大家思考：

1， $n$ 条不平行的直线最多能交多少点?

2， $n*m$ 的网格中最多可以找出多少个矩形?



## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;

struct num{
	char s[105];
	int len;
};

num dp[105][105];
void print(num x){
	for(int i=0;i<x.len;i++) cout<<x.s[i]; 
}
int a[105],b[105],c[105];
void add(num &t,num x,num y){
	int sx=x.len,sy=y.len,st=max(sx,sy);
	memset(a,0,sizeof(a));
	memset(b,0,sizeof(b));
	memset(c,0,sizeof(c));
	for(int i=0;i<sx;i++) a[sx-i]=x.s[i]-'0';
	for(int i=0;i<sy;i++) b[sy-i]=y.s[i]-'0';
	int k=0;
	for(int i=1;i<=st;i++){
		c[i]=(a[i]+b[i]+k)%10;
		k=(a[i]+b[i]+k)/10;
	}
	if(k) c[++st]=1;
	for(int i=0;i<st;i++) t.s[i]=c[st-i]+'0';	
	t.len=st;
}
void fu(num &x){
	x.s[0]='1';
	x.len=1;
}
int n;
int main(){
	cin>>n;
	if(n<=3){
		cout<<0;return 0;
	}
	for(int i=1;i<=n+1;i++) fu(dp[i][1]),fu(dp[i][i]);
	for(int i=3;i<=n+1;i++){
		for(int j=2;j<=i-1;j++){
			add(dp[i][j],dp[i-1][j-1],dp[i-1][j]);
		}
	}
	print(dp[n+1][5]);
} 
```


---

## 作者：BINYU (赞：2)

#### 引理

一条线段有两个端点，所以，要在平面上找到两条相交且不共顶点的线段，需要四个顶点

#### 分析

![](https://cdn.luogu.com.cn/upload/image_hosting/91bigwir.png)

如上图，绿边是一个四边形中的四条边和两条对角线，在四边形里面只有一个交点（样例#2已经帮我说了）因为选出的四个点一定能构成四边形（定理：凸多边形没有任意三点共线），所以一定有一个交点，答案就是要在 $n$ 个点中选 $4$ 个点，就是 ${C}^{4}_ {n} = n \times (n-1) \times (n-2) \times (n-3) \div 24$。

#### 代码：
```cpp
#include<bits/stdc++.h>
using namespace std;
int n; 
int main()
{
	cin>>n;
	cout<<n * (n - 1) * (n - 2) * (n - 3) / 24; 
}


```




---

## 作者：jxbe6666 (赞：1)

一道关于数论的题 (极水)  

先列一下公式 $↓$：

**$n \times (n-1)  \div 2 \times (n-2) \div 3 \times (n-3) \div 4$**

那为什么这样一定是对的呢？难道不会因为除不尽却向下取整而导致错误吗？ 首先 $n$ 和 $n-1$ 一定有一个是 $ 2 $ 的倍数，因此 $2$ 可以整除，同理 $n,n-1,n-2$ 中一定有一个是 $ 3 $ 的倍数，因此 $ 3 $ 可以整除（除掉 $2$ 只会消除因数 $2$ 而对$3$ 没有影响）同理 $4$ 也可以除尽。  

有了公式以后，AC 就再也不是问题了。  


------------

AC 代码↓↓↓

```cpp
#include<bits/stdc++.h>
using namespace std;
int main () {
	long long n; 
	cin >> n;
	if (n == 3) cout << '0';
	else cout << n*(n-1)/2*(n-2)/3*(n-3)/4;
	return 0;//QwQ
}
```


---

## 作者：hyc42 (赞：0)

## 前置
[题目传送门](https://www.luogu.com.cn/problem/P7900)

[AC 记录](https://www.luogu.com.cn/record/221117142)

## 题意
考虑一个有 $n$ 个顶点的凸多边形，且这个多边形没有任何三个（或以上）的对角线交于一点。

现在请你求出这样的多边形的对角线交点个数。

## 思路
让我们不妨把问题转换一下，
> 每四个点必定能确定一个交点。

问题就变成了从 $n$ 个点中任意选择 $4$ 个不同的点，所以答案就是 $C^4_n$。

而 $C$ 是组合数符号，计算公式为：

$$C^m_n=\frac{n!}{m!(n-m)!}$$

所以 $C^4_n$ 为 $\frac{n!}{4!(n-4)!}$，化简一下，就是 $n\times(n-1)\times(n-2)\times(n-3)\div24$。

而其中的 $!$ 是阶乘符号，公式为 $n!=1\times2\times3\times\dots\times n$。

因为 $n\leq100$，所以用 `int` 就行了。


## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
int main(){
	ios::sync_with_stdio(0);
	cin.tie(0),cout.tie(0);
	cin>>n;
	cout<<n*(n-1)*(n-2)*(n-3)/24;
	return 0;
}
```

---

## 作者：Manchester_City_FC (赞：0)

[题目传送门](https://www.luogu.com.cn/problem/P7900)

首先阅读题面可知，这个多边形没有任何三个（或以上）的对角线交于一点，所以我们无须再考虑对角线交点重叠的问题了。

下面我们来考虑这样一件事情：
> 如果选定任意四个顶点，那么我们就能确定唯一的一个交点。

证明比较显然，感性理解即可。于是我们现在只需解决这样的一个问题：从 $n$ 个点中任意选择 $4$ 个不同的点，有多少种方法？答案显然是 $C_{n}^4$，也就是 $\frac{n(n-1)(n-2)(n-3)}{24}$。

P.S. 前面的题解基本上都把 $n=3$ 的情况特判掉了，其实在进行除法运算的时候分子已经为 $0$ 了，无需特判。

AC 代码如下：
```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
int main(){
    cin>>n;
    cout<<n*(n-1)*(n-2)*(n-3)/24;
}
```

---


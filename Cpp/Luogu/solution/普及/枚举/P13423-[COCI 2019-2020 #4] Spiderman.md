# [COCI 2019/2020 #4] Spiderman

## 题目描述

小 Ivan 喜欢玩 Yamb 游戏，也喜欢阅读 Marvel 超级英雄漫画。他最喜欢的超级英雄是蜘蛛侠——那位因被放射性蜘蛛咬伤而获得超能力的邻家少年 Peter Parker。Ivan 总幻想有一天自己也能像漫画里的蜘蛛侠一样，在摩天大楼之间跳来跳去。在一次这样的幻想中，他睡着了。

在梦中，他不再叫 Ivan，而是叫 **Peter Parkour**$^{1}$，你猜对了，他能够利用自己的跑酷技巧在摩天大楼之间跳跃。他很快发现，周围正好有 $N$ 座摩天大楼，并且他莫名其妙地知道第 $i$ 座大楼的高度是 $h_i$ 米。他知道：如果 $h_i \bmod h_j = K$，他就可以从第 $i$ 座大楼跳到第 $j$ 座大楼。请你帮 Ivan 计算，对于每一座大楼，他能跳到多少其他大楼上。

$^{1}$：“Parkour”意为“跑酷”。

## 说明/提示

对第三个样例的说明：
- 从高度为 $1$ 的大楼出发，可以跳到任意其他大楼。
- 从高度为 $3$ 的大楼出发，只能跳到高度为 $2$ 的大楼。
- 从高度为 $5$ 的大楼出发，只能跳到高度为 $2$ 的大楼。
- 从高度为 $7$ 的大楼出发，可以跳到高度为 $2$ 和 $3$ 的大楼。
- 从高度为 $2$ 的大楼出发，无法跳到任何其他大楼。

### 评分说明

- 在价值 $14$ 分的测试点中，$1 \leq N \leq 2\,000$。
- 在额外 $14$ 分的测试点中，不同高度的大楼数量不超过 $2\,000$。
- 在额外 $14$ 分的测试点中，$K = 0$。

翻译由 ChatGPT-4.1 完成。

## 样例 #1

### 输入

```
2 1
5 5```

### 输出

```
0 0```

## 样例 #2

### 输入

```
6 3
4 3 12 6 8 2```

### 输出

```
0 4 0 0 0 0```

## 样例 #3

### 输入

```
5 1
1 3 5 7 2```

### 输出

```
4 1 1 2 0```

# 题解

## 作者：REZ_QWQ (赞：3)

本蒟蒻的第一篇题解(轻喷)

## 题目大意：

给定 $N$ 座高楼及它们的高度数组 $h_i$ ，还有一个整数 $K$ 。定义“从一座大楼跳到另一座大楼”的条件为：两座大楼高度分别是 $h_i$ 和 $h_j$ ，且满足 $h_i \bmod h_j = K$  ，则可以从第 $i$ 座跳到第 $j$ 座。

### 要求：
对于每一座大楼 $i$ ，求有多少座大楼 $j$（ $j$ ≠ $i$ ）满足跳跃条件，即统计满足  ( $h_i \bmod h_j = K$ ) 的 $j$ 的数量。

## 思路
先统计每栋高楼的出现次数，并记录最大高度，以便进行遍历限制。然后通过 $h_i \bmod h_j = K$ 推导结论。最后进行枚举可能答案。
## 先贴code（建议边看代码边看解释）
```cpp
#include <bits/stdc++.h>
int N, K,h[300010],f[1000010],cnt=0;
long long ans[1000010];
int main() {
	scanf("%d %d", &N, &K);
	for (int i = 0; i < N; i++) {
		scanf("%d", &h[i]);
		f[h[i]]++;
		if (h[i] > cnt) 
			cnt = h[i];
	}
	for (int i = K + 1; i <= cnt; i++) {
		if (f[i] == 0) 
			continue;
		for (int j = 0; ; j++) {
			int x = j * i + K;
			if (x > cnt) 
				break;
			if (f[x] > 0) {
				ans[x] += f[i];
			}
		}
	}
	for (int i = 0; i < N; i++) {
		long long p=ans[h[i]];
		if (K == 0) p--;
		printf("%lld ",p);
	}
	return 0;
}
```

## 代码解释：
1. 统计各高度出现的频率:
输入 $N$ 座大楼的高度 $h_i$ 。
用数组 $f$ 统计每个高度值出现的次数，即 $f_x$ 表示高度为 $x$ 的大楼数量。
同时记录最大高度 $cnt$ ，用于后面遍历时的范围限制。
2. 结论：可以发现 $h_i \bmod h_j = K$ ，所以式子 一定满足：
$h_i$ = $m$ * $h_j$ + $K$ , 其中 $m$ >= 0 。

3. 枚举所有可能的除数 $i$ 和对应的被除数 $x$
外层循环 $i$ 代表除数（即 $h_j$ 的值），范围从 $K$ $_+$ $_1$ 到 $cnt$ ，因为余数 $K$ 必须小于除数，故除数至少是 $K$ $_+$ $_1$。
如果 $f_i$ = 0，表示没有高度为 $i$ 的大楼，就跳过。
内层循环枚举 $j$ 使得：
$x$ = $j$ * $i$ + $K$ 。


（求过{{{(>_<)}}}）

---


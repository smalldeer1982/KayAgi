# [蓝桥杯 2023 国 Java B] 不完整的算式

## 题目描述

小蓝在黑板上写了一个形如 $A \quad op \quad B = C$ 的算式，其中 $A$、$B$、$C$ 都是非负整数，$op$ 是 $+$、$-$、$\times$、$/$（整除）四种运算之一。

不过 $A$、$op$、$B$、$C$ 这四部分有一部分被不小心的同学擦掉了。

给出这个不完整的算式，其中被擦掉的部分（被擦掉的部分是被完整的擦掉，不会出现留下若干位数字的情况）用 $\tt{?}$ 代替。请你输出被擦掉的部分。

## 说明/提示

### 评测用例规模与约定

- 对于 $20\%$ 的数据，被擦掉的部分是 $C$。
- 对于 $40\%$ 的数据，被擦掉的部分是 $op$。
- 对于 $100\%$ 的数据，算式长度不超过 $10$，不包含空格。算式中出现的整数不包含多余的前导 $0$。输入保证合法且有唯一解。

## 样例 #1

### 输入

```
1+?=2```

### 输出

```
1```

## 样例 #2

### 输入

```
10?3=3```

### 输出

```
/```

# 题解

## 作者：Ahws_rwhy (赞：4)

~~呼，花了一个小时，总算调出来了。~~

## 思路：

此题是一道模拟题，思路容易想到，因为不知道  $A,B,op,C$ 中哪个是被擦掉的，所以分别对这四种情况进行分类讨论即可，具体讨论，题解区有大佬一一列举出来了，故不再累述。这篇题解主要讲的是如何将 $A,B,C$ 字符数组分别转化为数字的，这里我用的是 ``stoi`` 函数将字符数组转化为数字的，接着，关键的问题是我们如何将 $A,B,op,C$ 四个字符数组中的内容（数字与符号）确定下来。

首先我们来看个例子：

$1+?=2$ ，显然 $A$ 中的内容是 ```1``` ，$op$ 中的内容是 ```+```，$B$ 中的内容是 ```?```，$C$ 中的内容是 $2$。我们可以一个一个读入字符，并判断字符是数字还是符号还是 ```?``` ，如果第一个字符是 ```?``` ，我们就可以确定 $A$ 中的内容是 ```?``` ，否则，我们可以将该字符统计在 $A$ 数组中；如果读到了运算符，那么该符号必定是 $op$ 中的内容，但要注意 $op$ 的内容可能为 ```?```，我们要特判掉这种情况；如果 $op$ 中有内容且该字符不是 ```?``` 且没有出现等号，我们可以将该字符统计在 $B$ 数组中，如果 $op$ 中有内容且该字符是 ```?```，那么将 ```?``` 添加进 $B$ 数组，结束当前循环即可；如果出现了等号且给字符不是 $?$ ，将该字符添加在 $C$ 数组中，如果出现了等号且给字符是 ```?```，那么将 ```?``` 添加进 $C$ 数组，结束当前循环即可。

其中有许多细节具体看代码：


```cpp
	while (scanf("%c", &x) != EOF && x != '\n') {
		t++;
		if (x == '=' && flagd == 0) {
			deng[0] = x;
			flagd = 1;
			continue;
		}
		if ((x == '+' || x == '-' || x == '*' || x == '/' || x == '?') && t != 1 && !flagop) {
			flagop = 1;
			op[0] = x;
			continue;
		}
		if (x == '?') {
			if (t == 1 && !flaga) {
				a[0] = '?';
				flaga = 1;
			} else if (!flagb && !flagd) {
				b[0] = '?';
				flagb = 1;
			} else if (!flagc && flagd) {
				c[0] = '?';
				flagc = 1;
			}
			continue;
		}

		// 正确存储数字字符
		if (!flagd && !flagop && !flagb) {
			ta[cnta++] = x;
		} else if (!flagd && flagop && !flagb) {
			b[cntb++] = x;
		} else if (flagd && !flagc) {
			tc[cntc++] = x;
		}
	}
```

之后的操作就比较简单了，注意分类讨论即可。


```cpp
int ans = atoi(c), b1 = atoi(b), a1 = atoi(a);
//	cout << ans << " " << b1 << " " << a1 << endl;
//	cout << c[0] << endl;
	// 计算结果
	if (a[0] == '?') {
		if (op[0] == '+') cout << (ans - b1);
		else if (op[0] == '-') cout << (ans + b1);
		else if (op[0] == '/') cout << (ans * b1);
		else if (op[0] == '*') cout << (ans / b1);
	} else if (op[0] == '?') {
		if (a1 + b1 == ans) cout << "+";
		else if (a1 - b1 == ans) cout << "-";
		else if (a1 / b1 == ans && b1 != 0) cout << "/";
		else if (a1 * b1 == ans) cout << "*";
	} else if (b[0] == '?') {
//		cout << "NBBBB!" << endl;
		if (op[0] == '+') cout << (ans - a1);
		else if (op[0] == '-') cout << (a1 - ans);
		else if (op[0] == '*') cout << (ans / a1);
		else if (op[0] == '/') cout << (a1 / ans);
	} else if (c[0] == '?') {
		if (op[0] == '+') cout << (a1 + b1);
		if (op[0] == '-') cout << (a1 - b1);
		if (op[0] == '*') cout << (a1 * b1);
		else if (op[0] == '/') cout << (a1 / b1);
	}
```

```Java``` 代码：


```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args)  {
        Scanner sc=new Scanner(System.in);
        String  str=sc.nextLine();
        char[] arr=str.toCharArray();
        int index=-1;
        for (int i = 0; i < arr.length; i++) {
            if(arr[i]=='?'){index=i;break;}
        }
        if(index==arr.length-1){
            char op=' ';int a=-1;
            for (int i = 0; i <arr.length ; i++) {
                char c=arr[i];
                if(c=='+'||c=='-'||c=='*'||c=='/'){
                    op= c;
                    a=i;
                    break;
                }
            }
            String A=str.substring(0,a);
            String B=str.substring(a+1,arr.length-2);
            int x=Integer.valueOf(A);
            int y=Integer.valueOf(B);
            if(op=='+'){
                System.out.print(x+y);
            } else if (op=='-') {
                System.out.print(x-y);
            } else if (op=='*') {
                System.out.print(x*y);
            } else if (op=='/') {
                System.out.print(x/y);
            }


        } else if ((arr[index+1]>='0'&&arr[index+1]<='9')&&(arr[index-1]>='0'&&arr[index-1]<='9')) {
            String A=str.substring(0,index);
            int a=-1;
            for (int i = 0; i < arr.length; i++) {
                if(arr[i]=='='){a=i;break;}
            }
            String B=str.substring(index+1,a);
            String C=str.substring(a+1);
            int x=Integer.valueOf(A);
            int y=Integer.valueOf(B);
            int z=Integer.valueOf(C);
            if(x+y==z){
                System.out.print("+");
            } else if (x-y==z) {
                System.out.print("-");
            } else if (x*y==z) {
                System.out.print("*");
            } else if (x/y==z) {
                System.out.print("/");
            }
        } else if (index==0) {
            char op=arr[1];
            int a=-1;
            for (int i = 2; i <arr.length ; i++) {
                char c=arr[i];
                if(c=='='){
                    a=i;
                    break;
                }
            }
            String B=str.substring(2,a);
            String C=str.substring(a+1);
            int b=Integer.valueOf(B);
            int c=Integer.valueOf(C);
            if(op=='+'){
                System.out.print(c-b);
            } else if (op=='-') {
                System.out.print(c+b);
            } else if (op=='*') {
                System.out.print(c/b);
            } else if (op=='/') {
                System.out.print(c*b);
            }
        }else {
            char op=' ';
            int d=-1;
            for (int i = 0; i < arr.length; i++) {
                char c=arr[i];
                if(c<'0'||c>'9'){
                    op=c;
                    d=i;
                    break;
                }
            }
            String A=str.substring(0,d);
            String C=str.substring(d+3);
            int a=Integer.valueOf(A);
            int c=Integer.valueOf(C);
            if(op=='+'){
                System.out.print(c-a);
            } else if (op=='-') {
                System.out.print(a-c);
            } else if (op=='*') {
                System.out.print(c/a);
            } else if (op=='/') {
                System.out.print(a/c);
            }

        }

    }


}
```

---

## 作者：HongzheLi (赞：2)

本蒟蒻认真检查了题解，如有问题请审核管理员高抬贵手和我说一下。
## 思路
这题是道模拟题：分类讨论。

$?$ 为 $A$、$op$、$B$、$C$ 四种情况，就挨个挨个判断就好了。

模拟题本蒟蒻最讨厌代码太长，大家都是用字符串读入，于是可把 $A$、$B$、$C$ 都先变成整形。标注好 $?$ 为哪个。

## 解释
当 $op$ 被擦掉：
1. 当运算符为 `+` 时，满足 $A+B=C$。
2. 当运算符为 `-` 时，满足 $A-B=C$。
3. 当运算符为 `*` 时，满足 $A \times B=C$。
4. 当运算符为 `/` 时，满足 $A \div B=C$。

当 $A$ 被擦掉：
1. 当运算符为 `+` 时，$A=C-B$。
2. 当运算符为 `-` 时，$A=C+B$。
3. 当运算符为 `*` 时，$A=C \div B$。
4. 当运算符为 `/` 时，$A=C \times B$。

当 $B$ 被擦掉：
1. 当运算符为 `+` 时，$B=C-A$。
2. 当运算符为 `-` 时，$B=A-C$。
3. 当运算符为 `*` 时，$B=C \div A$。
4. 当运算符为 `/` 时，$B=A \times C$。

当 $C$ 被擦掉：
1. 当运算符为 `+` 时，$A+B=C$。
2. 当运算符为 `-` 时，$A-B=C$。
3. 当运算符为 `*` 时，$A \times B=C$。
4. 当运算符为 `/` 时，$A \div B=C$。

## 代码
```cpp
#include<bits/stdc++.h>
using namespace std;
using ll=long long;
ll a[3],l,f,L,A,B,C;
char op='6',c;
int main(){
	ios::sync_with_stdio(false);
	cin.tie(0);cout.tie(0);
	for(ll i=0;i<3;i++)a[i]=-1;
	while(cin>>c){
		if('0'<=c&&c<='9'){
			if(a[L]<0)a[L]=0;
			a[L]*=10;
			a[L]+=(c-'0');
		}else{
			if(op=='6'&&c=='?'&&a[0]!=-1&&a[1]==-1)L++;
			if(c=='+'||c=='-'||c=='*'||c=='/'){op=c;L++;}
			if(c=='=')L++;
		}
	}
	A=a[0];B=a[1];C=a[2];
	if(op=='6'){
		if(A+B==C)cout<<"+";
		else if(A-B==C)cout<<"-";
		else if(A*B==C)cout<<"*";
		else if(A/B==C)cout<<"/";
	}else{
		if(C==-1){
			if(op=='+')cout<<A+B;
			else if(op=='-')cout<<A-B;
			else if(op=='*')cout<<A*B;
			else if(op=='/')cout<<A/B;
		}
		if(A==-1){
			if(op=='+')cout<<C-B;
			else if(op=='-')cout<<C+B;
			else if(op=='*')cout<<C/B;
			else if(op=='/')cout<<C*B;
		}
		if(B==-1){
			if(op=='+')cout<<C-A;
			else if(op=='-')cout<<A-C;
			else if(op=='*')cout<<C/A;
			else if(op=='/')cout<<A/C;
		}
	}
	return 0;
}
```

```java
import java.util.Scanner;
public class Main {
	public static void main(String[] args) {
		Scanner scanner = new Scanner(System.in);
		String s=scanner.next();
		int k=s.length();
		int p=0,q = -1, t = 0, a = 0, b = 0, c = 0;
		for (int i = 0; i < k; i++) {
			char ch = s.charAt(i);
			if (ch == '?') {p = i;} 
			else if (ch < '0') { q = i;} 
			else if (ch == '=') {t = i;}
		}
		if (p>t&&q!=-1){
			for(int i=0; i<q;i++) {a=a+(s.charAt(i)-'0')*(int)Math.pow(10,q-i-1);}
			for (int i = q + 1; i < t; i++) {b = b + (s.charAt(i) - '0') * (int) Math.pow(10, t - i - 1);}
			char op = s.charAt(q);
			switch (op) {
			case '+':
				System.out.println(a + b);
				break;
			case '-':
				System.out.println(a - b);
				break;
			case '*':
				System.out.println(a * b);
				break;
			case '/':
				System.out.println(a / b);
				break;
			}
		} else if (p > q && q != -1) {
			for (int i = 0; i < q; i++) {a = a + (s.charAt(i) - '0') * (int) Math.pow(10, q - i - 1);}
			for (int i = t + 1; i < k; i++) {c = c + (s.charAt(i) - '0') * (int) Math.pow(10, k - i - 1);}
			char op = s.charAt(q);
			switch (op) {
			case '+':
				System.out.println(c - a);
				break;
			case '-':
				System.out.println(a - c);
				break;
			case '*':
				System.out.println(c / a);
				break;
			}
		} else if (p < q) { 
			for (int i = q + 1; i < t; i++) {b = b + (s.charAt(i) - '0') * (int) Math.pow(10, t - i - 1);}
			for (int i = t + 1; i < k; i++) {c = c + (s.charAt(i) - '0') * (int) Math.pow(10, k - i - 1);}
			char op = s.charAt(q);
			switch (op) {
			case '+':
				System.out.println(c - b);
				break;
			case '-':
				System.out.println(c - b);
				break;
			case '*':
				System.out.println(c / b);
				break;
			case '/':
				System.out.println(c * b);
				break;
			}
		} else if (q == -1) {
			for (int i = 0; i < p; i++) {a = a + (s.charAt(i) - '0') * (int) Math.pow(10, p - i - 1);}
			for (int i = p + 1; i < t; i++) {b = b + (s.charAt(i) - '0') * (int) Math.pow(10, t - i - 1);}
			for (int i = t + 1; i < k; i++) {c = c + (s.charAt(i) - '0') * (int) Math.pow(10, k - i - 1);}
			if (a + b == c) {
				System.out.println("+");
			} else if (a - b == c) {
				System.out.println("-");
			} else if (a * b == c) {
				System.out.println("*");
			} else if (a / b == c) {
				System.out.println("/");
			}
		}
	}
}
```

---

## 作者：jiayunli (赞：2)

五年级蒟蒻题解，大佬见谅。

这题没什么难度，就是判断太多了！（~~磕了两个多小时。~~）

本人写的有点长。

### 思路

被擦掉只是 $A,op,B$ 和 $C$ 之中第一个，那就直接判断是哪个再模拟就行了。

要注意其中的小细节不要写错了。

### 代码

第一种情况，$op$ 被擦掉：

这种情况有四种小情况：

$a \times b = c$ 时 $op =$ `*`。

$a + b = c$ 时 $op =$ `+`。

$a - b = c$ 时 $op =$ `-`。

$a \div b = c$ 时 $op =$ `/`。

```cpp
if(s[i-1]>='0'&&s[i-1]<='9'&&s[i+1]>='0'&&s[i+1]<='9'){
	ll x=1,j=i,a=0,b=0,c=0,k,l=i;
	while(j--){
		a+=(s[j]-'0')*x;
		x*=10;
	}
	x=1;
	while(l++){
		if(s[l]=='='){
			k=l;
			j=l;
			break;
		}
	}
	while(j--){
		if(s[j]=='?'){
			break;
		}
		b+=(s[j]-'0')*x;
		x*=10;
	}
	x=1,j=s.size();
	while(j--){
		if(j==k){
			break;
		}
		c+=(s[j]-'0')*x;
		x*=10;
	}
	if(a*b==c){
		cout<<"*"<<endl;
	}
	if(a+b==c){
		cout<<"+"<<endl;
	}
	if(a-b==c){
		cout<<"-"<<endl;
	}
	if(a/b==c){
		cout<<"/"<<endl;
	}
}
```

第二种情况，$A$ 被擦掉：

这种情况也有四种小情况：

$op =$ `*` 时 $A = c \div b$。

$op =$ `/` 时 $A = c \times b$。

$op =$ `+` 时 $A = c - b$。

$op =$ `-` 时 $A = c + b$。

```cpp
if(i-1==-1){
	ll x=1,j=i,b=0,c=0,k=0,l=1,y=0; 
	while(l){
		l++;
		if(s[l]=='='){
			k=l;
			j=l;
			break;
		}
	}
	while(j--){
		if(s[j]<'0'||s[j]>'9'){
			break;
		}
		b+=(s[j]-'0')*x;
		x*=10;
	}
	x=1,j=s.size();
	while(j--){
		if(j==k){
			break;
		}
		c+=(s[j]-'0')*x;
		x*=10;
	}
	for(ll j=0;j<s.size();j++){
		if(s[j]=='-'||s[j]=='+'||s[j]=='/'||s[j]=='*'){
			y=j;
		}
	}
	if(s[y]=='*'){
		cout<<c/b<<endl;
	}
	if(s[y]=='/'){
		cout<<c*b<<endl;
	}
	if(s[y]=='+'){
		cout<<c-b<<endl;
	}
	if(s[y]=='-'){
		cout<<c+b<<endl;
	}
}
```

第三种情况，$B$ 被擦掉：

这种情况还有四种小情况：

$op =$ `*` 时 $B = c \div a$。

$op =$ `/` 时 $B = c \times a$。

$op =$ `+` 时 $B = c - a$。

$op =$ `-` 时 $B = a - c$。

```cpp
if(s[i+1]=='='){
	ll x=1,j=i-1,a=0,c=0,k=0,l=i,y;
	while(j--){
		a+=(s[j]-'0')*x;
		x*=10;
	}
	x=1;
	while(l++){
		if(s[l]=='='){
			j=l;
			break;
		}
	}
	x=1,j=s.size();
	while(j--){
		if(s[j]=='='){
			break;
		}
		c+=(s[j]-'0')*x;
		x*=10;
	}
	for(ll j=0;j<s.size();j++){
		if(s[j]=='-'||s[j]=='+'||s[j]=='/'||s[j]=='*'){
			y=j;
		}
	}
	if(s[y]=='*'){
		cout<<c/a<<endl;
	}
	if(s[y]=='/'){
		cout<<c*a<<endl;
	}
	if(s[y]=='+'){
		cout<<c-a<<endl;
	}
	if(s[y]=='-'){
		cout<<a-c<<endl;
	}
}
```

第四种情况，$C$ 被擦掉：

这种情况还是有四种小情况：

$op =$ `*` 时 $C = a \times b$。

$op =$ `/` 时 $C = a \div b$。

$op =$ `+` 时 $C = a + b$。

$op =$ `-` 时 $C = a - b$。

```cpp
if(s[i-1]=='='){
	ll x=1,j=0,a=0,b=0,c=0,y=0;
	for(ll jj=0;jj<s.size();jj++){
		if(s[jj]=='-'||s[jj]=='+'||s[jj]=='/'||s[jj]=='*'){
			y=jj;
		}
	}
	j=y;
	while(j--){
		a+=(s[j]-'0')*x;
		x*=10;
	}
	x=1,j=i-1;
	while(j--){
		if(s[j]<'0'||s[j]>'9'){
			break;
		}
		b+=(s[j]-'0')*x;
		x*=10;
	}
	if(s[y]=='*'){
		cout<<a*b<<endl;
	}
	if(s[y]=='/'){
		cout<<a/b<<endl;
	}
	if(s[y]=='+'){
		cout<<a+b<<endl;
	}
	if(s[y]=='-'){
		cout<<a-b<<endl;
	}
}
```

### 合起来

```cpp
#include<bits/stdc++.h>//万能头
using namespace std;
using ll=long long;
string s;
int main(){
	ios::sync_with_stdio(false);//速读
	cin.tie(0),cout.tie(0);
	cin>>s;
	for(ll i=0;i<s.size();i++){
		if(s[i]=='?'){
			if(s[i-1]>='0'&&s[i-1]<='9'&&s[i+1]>='0'&&s[i+1]<='9'){//第一种情况，op 被擦掉：
				ll x=1,j=i,a=0,b=0,c=0,k,l=i;
				while(j--){//计算A
					a+=(s[j]-'0')*x;
					x*=10;
				}
				x=1;
				while(l++){
					if(s[l]=='='){
						k=l;
						j=l;
						break;
					}
				}
				while(j--){//计算B
					if(s[j]=='?'){
						break;
					}
					b+=(s[j]-'0')*x;
					x*=10;
				}
				x=1,j=s.size();
				while(j--){//计算C
					if(j==k){
						break;
					}
					c+=(s[j]-'0')*x;
					x*=10;
				}
				if(a*b==c){//四种情况判断
					cout<<"*"<<endl;
				}
				if(a+b==c){
					cout<<"+"<<endl;
				}
				if(a-b==c){
					cout<<"-"<<endl;
				}
				if(a/b==c){
					cout<<"/"<<endl;
				}
			}
			else{
				if(i-1==-1){//第二种情况，A 被擦掉：
					ll x=1,j=i,b=0,c=0,k=0,l=1,y=0; 
					while(l){
						l++;
						if(s[l]=='='){
							k=l;
							j=l;
							break;
						}
					}
					while(j--){//计算B
						if(s[j]<'0'||s[j]>'9'){
							break;
						}
						b+=(s[j]-'0')*x;
						x*=10;
					}
					x=1,j=s.size();
					while(j--){//计算C
						if(j==k){
							break;
						}
						c+=(s[j]-'0')*x;
						x*=10;
					}
					for(ll j=0;j<s.size();j++){
						if(s[j]=='-'||s[j]=='+'||s[j]=='/'||s[j]=='*'){
							y=j;
						}
					}
					if(s[y]=='*'){//四种情况判断
						cout<<c/b<<endl;
					}
					if(s[y]=='/'){
						cout<<c*b<<endl;
					}
					if(s[y]=='+'){
						cout<<c-b<<endl;
					}
					if(s[y]=='-'){
						cout<<c+b<<endl;
					}
				}
				else{
					if(s[i+1]=='='){//第三种情况，B 被擦掉：
						ll x=1,j=i-1,a=0,c=0,k=0,l=i,y;
						while(j--){//计算A
							a+=(s[j]-'0')*x;
							x*=10;
						}
						x=1;
						while(l++){
							if(s[l]=='='){
								j=l;
								break;
							}
						}
						x=1,j=s.size();
						while(j--){//计算C
							if(s[j]=='='){
								break;
							}
							c+=(s[j]-'0')*x;
							x*=10;
						}
						for(ll j=0;j<s.size();j++){
							if(s[j]=='-'||s[j]=='+'||s[j]=='/'||s[j]=='*'){
								y=j;
							}
						}
						if(s[y]=='*'){//四种情况判断
							cout<<c/a<<endl;
						}
						if(s[y]=='/'){
							cout<<c*a<<endl;
						}
						if(s[y]=='+'){
							cout<<c-a<<endl;
						}
						if(s[y]=='-'){
							cout<<a-c<<endl;
						}
					}
					else{
						if(s[i-1]=='='){//第四种情况，C 被擦掉：
							ll x=1,j=0,a=0,b=0,c=0,y=0;
							for(ll jj=0;jj<s.size();jj++){
								if(s[jj]=='-'||s[jj]=='+'||s[jj]=='/'||s[jj]=='*'){
									y=jj;
								}
							}
							j=y;
							while(j--){//计算A
								a+=(s[j]-'0')*x;
								x*=10;
							}
							x=1,j=i-1;
							while(j--){//计算B
								if(s[j]<'0'||s[j]>'9'){
									break;
								}
								b+=(s[j]-'0')*x;
								x*=10;
							}
							if(s[y]=='*'){//四种情况判断
								cout<<a*b<<endl;
							}
							if(s[y]=='/'){
								cout<<a/b<<endl;
							}
							if(s[y]=='+'){
								cout<<a+b<<endl;
							}
							if(s[y]=='-'){
								cout<<a-b<<endl;
							}
						}
					}
				}
			}
		}
	}
	return 0;//完美收尾
}
```

洛谷大大求过。

---

## 作者：cai98765 (赞：2)

## 大体思路

这道题表面简单，实则复杂，但不需要高深的算法。
可以开` char `数组存数据，获得字符串长度后判断运算符，等号，被擦掉部分的位置，进而 `if - else` 判断计算方法。
需要注意的是：

## 注意事项
若擦掉部分是运算数而非结果，要通过对结果的逆运算确定输出。

确定运算符，等号，被擦掉部分的位置后，取出运算数字时注意 ascii 码转数字应减去 $48$ 十进制要用不同数位数字乘 $10$ 的幂，循环的边界条件。

`Pow` 函数返回值是 `double`！！！

存储运算符初始赋值原因：被擦掉的有可能是运算符，应对这种情况特判。

时间复杂度大致为 $O(n)$，$n$ 为字符串长度。

## AC 代码（代码框架请自己补上）：
  ```cpp
    char s[20];
    cin>>s; // 输入
    int k = strlen(s),p,q=-1,t,a=0,b=0,c=0;
    // p q t 分别为？，运算符，= 的位置，a，b，c 同题。
    for(int i = 0;i < k;i++){
        if(s[i] == '?'){
            p=i;
        }else if(s[i] < 48){
            q=i;// 运算符 ascll 码 ＜ 48 
        }else if(s[i] == '='){
        	t=i;
  		}
    }//循环判断位置
    if(p > t&&q != -1){//擦掉 c 的情况
        for(int i = 0;i < q;i++){
            a=a+(s[i]-48)*int(pow(10,q-i-1));
        }
        //由 ascll 转成 10 进制。
        for(int i = q+1;i < t;i++){
            b=b+(s[i]-48)*int(pow(10,t-i-1));
        }
        if(s[q] == '+'){
            cout<<a+b;
        }else if(s[q] == '-'){
            cout<<a-b;
        }else if(s[q] == '*'){
            cout<<a*b;
        }else if(s[q] == '/'){
            cout<<a/b;
        }//判断输出类型
    }else if(p > q&&q != -1){ //擦掉 b 的情况
        for(int i = 0;i < q;i++){
            a=a+(s[i]-48)*int(pow(10,q-i-1));
        }
        for(int i = t+1;i < k;i++){
            c=c+(s[i]-48)*int(pow(10,k-i-1));
        }
        if(s[q] == '+'){
            cout<<c-a;
        }else if(s[q] == '-'){
            cout<<a-c;
        }else if(s[q] == '*'){
            cout<<c/a;
        }
    }else if(p < q){
        for(int i = q+1;i < t;i++){
            b=b+(s[i]-48)*int(pow(10,t-i-1));
        }
        for(int i = t+1;i < k;i++){
            c=c+(s[i]-48)*int(pow(10,k-i-1));
        }
        if(s[q] == '+'){
            cout<<c-b;
        }else if(s[q] == '-'){
            cout<<c-b;
        }else if(s[q] == '*'){
            cout<<c/b;
        }else if(s[q] == '/'){
            cout<<c*b;
        }
    }else if(q == -1){
    // 擦掉运算符的情况
        for(int i = 0;i < p;i++){
            a=a+(s[i]-48)*int(pow(10,p-i-1));
        }
        for(int i = p+1;i < t;i++){
            b=b+(s[i]-48)*int(pow(10,t-i-1));
        }
        for(int i = t+1;i < k;i++){
            c=c+(s[i]-48)*int(pow(10,k-i-1));
        }
        if(a+b == c){
            cout<<"+";
        }else if(a-b == c){
            cout<<"-";
        }else if(a*b == c){
            cout<<"*";
        }else if(a/b == c){
            cout<<"/";
        }
    }
    return 0;
```
```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        String s = scanner.next(); // 输入
        int k = s.length();
        int p = 0, q = -1, t = 0, a = 0, b = 0, c = 0;

        // 找出 '?'，运算符， '=' 的位置
        for (int i = 0; i < k; i++) {
            char ch = s.charAt(i);
            if (ch == '?') {
                p = i;
            } else if (ch < '0') { // 运算符的 ASCII 码 < '0'
                q = i;
            } else if (ch == '=') {
                t = i;
            }
        }

        if (p > t && q != -1) { // 擦掉 c 的情况
            // 计算 a
            for (int i = 0; i < q; i++) {
                a = a + (s.charAt(i) - '0') * (int) Math.pow(10, q - i - 1);
            }
            // 计算 b
            for (int i = q + 1; i < t; i++) {
                b = b + (s.charAt(i) - '0') * (int) Math.pow(10, t - i - 1);
            }
            // 根据运算符计算结果
            char op = s.charAt(q);
            switch (op) {
                case '+':
                    System.out.println(a + b);
                    break;
                case '-':
                    System.out.println(a - b);
                    break;
                case '*':
                    System.out.println(a * b);
                    break;
                case '/':
                    System.out.println(a / b);
                    break;
            }
        } else if (p > q && q != -1) { // 擦掉 b 的情况
            // 计算 a
            for (int i = 0; i < q; i++) {
                a = a + (s.charAt(i) - '0') * (int) Math.pow(10, q - i - 1);
            }
            // 计算 c
            for (int i = t + 1; i < k; i++) {
                c = c + (s.charAt(i) - '0') * (int) Math.pow(10, k - i - 1);
            }
            // 根据运算符计算结果
            char op = s.charAt(q);
            switch (op) {
                case '+':
                    System.out.println(c - a);
                    break;
                case '-':
                    System.out.println(a - c);
                    break;
                case '*':
                    System.out.println(c / a);
                    break;
            }
        } else if (p < q) { // 擦掉 a 的情况
            // 计算 b
            for (int i = q + 1; i < t; i++) {
                b = b + (s.charAt(i) - '0') * (int) Math.pow(10, t - i - 1);
            }
            // 计算 c
            for (int i = t + 1; i < k; i++) {
                c = c + (s.charAt(i) - '0') * (int) Math.pow(10, k - i - 1);
            }
            // 根据运算符计算结果
            char op = s.charAt(q);
            switch (op) {
                case '+':
                    System.out.println(c - b);
                    break;
                case '-':
                    System.out.println(c - b);
                    break;
                case '*':
                    System.out.println(c / b);
                    break;
                case '/':
                    System.out.println(c * b);
                    break;
            }
        } else if (q == -1) { // 擦掉运算符的情况
            // 计算 a
            for (int i = 0; i < p; i++) {
                a = a + (s.charAt(i) - '0') * (int) Math.pow(10, p - i - 1);
            }
            // 计算 b
            for (int i = p + 1; i < t; i++) {
                b = b + (s.charAt(i) - '0') * (int) Math.pow(10, t - i - 1);
            }
            // 计算 c
            for (int i = t + 1; i < k; i++) {
                c = c + (s.charAt(i) - '0') * (int) Math.pow(10, k - i - 1);
            }
            // 判断运算符
            if (a + b == c) {
                System.out.println("+");
            } else if (a - b == c) {
                System.out.println("-");
            } else if (a * b == c) {
                System.out.println("*");
            } else if (a / b == c) {
                System.out.println("/");
            }
        }
    }
}
```

---

## 作者：WZY298 (赞：1)

## 题目大意
本题是一个简单的模拟，给出一个不完整的算式，形如 $A \text{ op } B = C$，通过字符串分析可以推算出缺少部分的值，并补全算式。
## 题目分析
分类讨论缺失部分，通过简单数学运算与等式的基本性质计算出所需部分的值并输出即可。

例如：“样例一”中可以将输入部分拆分：
$$ s = \begin{cases}
s_1 :& \text{1+?}\\
s_2 :& \text{2}
\end{cases} $$
更进一步拆分：
$$s = \begin{cases}
s_A :& \text{1}\\
s_{op} :& \text{+}\\
s_B :& \text{?}\\
s_C :& \text{2}
\end{cases}$$
不难发现，通过移项可得：
$$ ? = 2-1 = 1 $$
同理：
$$? = \begin{cases}
\text{C-A}\\
\text{C-B}\\
\text{A+B}\\
\text{……详见代码}
\end{cases}$$

## AC代码

```cpp
#include<bits/stdc++.h>
typedef long long ll;
using namespace std;
int a[1000001];
int main(){
	int isq=0;//记录?是A(1),OP(2),B(3),C(4) 
	string s;
	cin>>s;
	string s1,s2;
	int id=0;//记录=位置 
	int now=1;
	int fu=0;
	for(id=0;s[id]!='=';id++){
		s1+=s[id];
		if(s[id]=='+'||s[id]=='-'||s[id]=='*'||s[id]=='/'){
			if(s[id]=='+') fu=1;
			if(s[id]=='-') fu=2;
			if(s[id]=='*') fu=3;
			if(s[id]=='/') fu=4;
			now=3;
		}
		if(s[id]=='?'){
			isq=now;
		}
	}
	if(fu==0){
		isq=2;
	}
	id++;//跳过=
	for(id;id<s.size();id++){
		s2+=s[id];
		if(s[id]=='?'){
			isq=4;
		}
	} 
	if(isq==1){//分类讨论 1
		int shu1=0,shu2=0;
		for(int i=0;i<s1.size();i++){
			if(s1[i]>='0'&&s1[i]<='9'){
				shu1=shu1*10+(s1[i]-'0');
			}
		}
		for(int i=0;i<s2.size();i++){
			if(s2[i]>='0'&&s2[i]<='9'){
				shu2=shu2*10+(s2[i]-'0');
			}
		}
		if(fu==1) cout<<shu2-shu1;
		else if(fu==2) cout<<shu1+shu2;
		else if(fu==3) cout<<shu2/shu1;
		else cout<<shu2*shu1;
	}else if(isq==2){//分类讨论 2
		int shu1=0,shu2=0,shu3=0;
		bool vis=0;
		for(int i=0;i<s1.size();i++){
			if(s1[i]>='0'&&s1[i]<='9'){
				if(vis==0)shu1=shu1*10+(s1[i]-'0');
				else shu2=shu2*10+(s1[i]-'0');
			}else{
				vis=1;
			}
		}
		for(int i=0;i<s2.size();i++){
			if(s2[i]>='0'&&s2[i]<='9'){
				shu3=shu3*10+(s2[i]-'0');
			}
		}
		if(shu1+shu2==shu3){
			cout<<"+";
		}else if(shu1-shu2==shu3){
			cout<<"-";
		}else if(shu1*shu2==shu3){
			cout<<"*";
		}else{
			cout<<"/";
		}
	}else if(isq==3){//分类讨论 3
		int shu1=0,shu2=0;
		for(int i=0;i<s1.size();i++){
			if(s1[i]>='0'&&s1[i]<='9'){
				shu1=shu1*10+(s1[i]-'0');
			}
		}
		for(int i=0;i<s2.size();i++){
			if(s2[i]>='0'&&s2[i]<='9'){
				shu2=shu2*10+(s2[i]-'0');
			}
		}
		if(fu==1) cout<<shu2-shu1;
		else if(fu==2) cout<<shu1-shu2;
		else if(fu==3) cout<<shu1/shu2;
		else cout<<shu2*shu1;
	}else if(isq==4){//分类讨论 4
		int shu1=0,shu2=0;
		bool vis=0;
		for(int i=0;i<s1.size();i++){
			if(s1[i]>='0'&&s1[i]<='9'){
				if(vis==0)shu1=shu1*10+(s1[i]-'0');
				else shu2=shu2*10+(s1[i]-'0');
			}else{
				vis=1;
			}
		}
		if(fu==1) cout<<shu2+shu1;
		else if(fu==2) cout<<shu1-shu2;
		else if(fu==3) cout<<shu2*shu1;
		else cout<<shu1/shu2;
	}
	return 0;
}
```
## 注意点
在进行运算的过程中要注意运算顺序，避免失分。

---

## 作者：b__b (赞：1)

分类讨论~大~模拟。

一个完整的算式应为```a{任意操作符}b=c```。
1. 如果运算符完整，数字缺失。

   当运算符为```+```时，$a=c-b,b=c-a,c=a+b$。
   
   当运算符为```-```时，$a=c+b,b=a-c,c=a-b$。

   当运算符为```*```时，$a=c\div b,b=c\div a,c=a\cdot b$。

   当运算符为```/```时，$a=b\cdot c,b=a\div c,c=a\div b$。
2. 如果数字完整，运算符缺失。

   当数字满足 $a+b=c$ 时，运算符为```+```。
   
   当数字满足 $a-b=c$ 时，运算符为```-```。

   当数字满足 $a\cdot b=c$ 时，运算符为```*```。

   当数字满足 $a\div b=c$ 时，运算符为```/```。
## 代码
下列给出 C++ 与 Java 代码。
```cpp
#include <cstdio>
#include <cctype>
char s[15];
int a, i, sum1, sum2, j, sum3, len;
int main() {
    for (fgets(s, 15, stdin);; ++i, ++len) if (isdigit(s[i])) s[i] -= '0'; else if (s[i] == '\n') {
		s[i] = 0;
		break;
	}
    for (i = 0; i < len; ++i) if (s[i] == '?') {
        if (!i) {
            for (j = 2; s[j] != '='; sum1 *= 10, sum1 += s[j], ++j);
            for (++j; j < len; sum2 *= 10, sum2 += s[j], ++j);
            switch (s[i + 1]) {
                case '+':
                    printf("%d", sum2 - sum1);
                    return 0;
                case '-':
                    printf("%d", sum2 + sum1);
                    return 0;
                case '*':
                    printf("%d", sum2 / sum1);
                    return 0;
                default:
                    printf("%d", sum2 * sum1);
            }
        } else if (s[i - 1] == '+' || s[i - 1] == '-' || s[i - 1] == '*' || s[i - 1] == '/') {
            for (; j < i - 1; sum1 *= 10, sum1 += s[j], ++j);
            for (j = i + 2; j < len; sum2 *= 10, sum2 += s[j], ++j);
            switch (s[i - 1]) {
                case '+':
                    printf("%d", sum2 - sum1);
                    return 0;
                case '-':
                    printf("%d", sum1 - sum2);
                    return 0;
                case '*':
                    printf("%d", sum2 / sum1);
                    return 0;
                default:
                    printf("%d", sum1 / sum2);
            }
        } else if (s[i - 1] == '=') {
            for (; s[j] < 10; sum1 *= 10, sum1 += s[j], ++j);
            for (i = j++; s[j] != '='; sum2 *= 10, sum2 += s[j], ++j);
            switch (s[i]) {
                case '+':
                    printf("%d", sum1 + sum2);
                    return 0;
                case '-':
                    printf("%d", sum1 - sum2);
                    return 0;
                case '*':
                    printf("%d", sum1 * sum2);
                    return 0;
                default:
                    printf("%d", sum1 / sum2);
            }
        } else {
            for (; s[j] != '?'; sum1 *= 10, sum1 += s[j], ++j);
            for (++j; s[j] != '='; sum2 *= 10, sum2 += s[j], ++j);
            for (++j; j < len; sum3 *= 10, sum3 += s[j], ++j);
            if (sum1 + sum2 == sum3) putchar('+');
            else if (sum1 - sum2 == sum3) putchar('-');
            else if (sum1 * sum2 == sum3) putchar('*');
            else putchar('/');
        }
        return 0;
    }
}
```
```java
//看起来像C++，因为我直接用C++改的（
public class Main {
	public static void main(String[] args) {
		char[] s = new java.util.Scanner(System.in).next().toCharArray();
		int i = 0, sum1 = 0, sum2 = 0, j = 0, sum3 = 0;
		for (; i < s.length; ++i) if ('0' <= s[i] && '9' >= s[i]) s[i] -= '0';
		for (i = 0; i < s.length; ++i) if (s[i] == '?') {
			if (i == 0) {
				for (j = 2; s[j] != '='; sum1 *= 10, sum1 += s[j], ++j);
				for (++j; j < s.length; sum2 *= 10, sum2 += s[j], ++j);
				switch (s[i + 1]) {
					case '+':
						System.out.print(sum2 - sum1);
						return;
					case '-':
						System.out.print(sum2 + sum1);
						return;
					case '*':
						System.out.print(sum2 / sum1);
						return;
					default:
						System.out.print(sum2 * sum1);
				}
			} else if (s[i - 1] == '+' || s[i - 1] == '-' || s[i - 1] == '*' || s[i - 1] == '/') {
				for (; j < i - 1; sum1 *= 10, sum1 += s[j], ++j);
				for (j = i + 2; j < s.length; sum2 *= 10, sum2 += s[j], ++j);
				switch (s[i - 1]) {
					case '+':
						System.out.print(sum2 - sum1);
						return;
					case '-':
						System.out.print(sum1 - sum2);
						return;
					case '*':
						System.out.print(sum2 / sum1);
						return;
					default:
						System.out.print(sum1 / sum2);
				}
			} else if (s[i - 1] == '=') {
				for (; s[j] < 10; sum1 *= 10, sum1 += s[j], ++j);
				for (i = j++; s[j] != '='; sum2 *= 10, sum2 += s[j], ++j);
				switch (s[i]) {
					case '+':
						System.out.print(sum1 + sum2);
						return;
					case '-':
						System.out.print(sum1 - sum2);
						return;
					case '*':
						System.out.print(sum1 * sum2);
						return;
					default:
						System.out.print(sum1 / sum2);
				}
			} else {
				for (; s[j] != '?'; sum1 *= 10, sum1 += s[j], ++j);
				for (++j; s[j] != '='; sum2 *= 10, sum2 += s[j], ++j);
				for (++j; j < s.length; sum3 *= 10, sum3 += s[j], ++j);
				if (sum1 + sum2 == sum3) System.out.print('+');
				else if (sum1 - sum2 == sum3) System.out.print('-');
				else if (sum1 * sum2 == sum3) System.out.print('*');
				else System.out.print('/');
			}
			return;
		}
	}
}
```

---

## 作者：M1__ (赞：0)

# 题解：P12219 [蓝桥杯 2023 国 Java B] 不完整的算式
[Link](https://www.luogu.com.cn/problem/P12219)

大分类讨论。         

- 显然有 $4$ 种情况：$a$ 被擦除、$b$ 被擦除、$c$ 被擦除以及运算符被擦除。
- 对于前三种情况，利用运算符和违背擦除的数字推出即可。
- 对于最后一种情况，直接全部列出运算符可能有的情况，分支判断即可。
- 核心代码如下：

## Code

```cpp
    for(;s[xb]>='0'&&s[xb]<='9';xb++) a=a*10+(s[xb]-'0');  //找到 a 的位置
    if(xb==0){  //a 被擦除的情况
    	xb++,op=s[xb],xb++;
        for(;s[xb]>='0'&&s[xb]<='9';xb++) b=b*10+(s[xb]-'0');
        xb++;
        for(;s[xb]>='0'&&s[xb]<='9';xb++) c=c*10+(s[xb]-'0');
        if(op=='+') cout<<c-b;
        else if(op=='-') cout<<b+c;
        else if(op=='*') cout<<c/b;
        else cout<<b*c;
    }
    else if(s[xb]=='?'){   //运算符被擦除的情况
        xb++;
        for(;s[xb]>='0'&&s[xb]<='9';xb++) b=b*10+(s[xb]-'0');
		xb++;
		for(;s[xb]>='0'&&s[xb]<='9';xb++) c=c*10+(s[xb]-'0');
        if(a+b==c) cout<<'+';
        else if(a-b==c) cout<<'-';
        else if(a*b==c) cout<<'*';
        else cout<<'/';
    }
    else if(s[xb+1]=='?'){  //b 被擦除的情况
        op=s[xb],xb=xb+3;
        for(;s[xb]>='0'&&s[xb]<='9';xb++) c=c*10+(s[xb]-'0');
        if(op=='+') cout<<c-a;
        else if(op=='*')cout<<c/a;
        else if(op=='-') cout<<a-c;
        else cout<<a/c;
    }
    else{   //c 被擦除的情况
        op=s[xb],xb++;
        for(;s[xb]>='0'&&s[xb]<='9';xb++) b=b*10+(s[xb]-'0');
        if(op=='+') cout<<a+b;
        else if(op=='*') cout<<a*b;
        else if(op=='-') cout<<a-b;
        else cout<<a/b;
    }
```



```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner=new Scanner(System.in);
        String s=scanner.next();
        int xb=0,a=0,b=0,c=0;
        char op=' ';
        for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) a=a*10+(s.charAt(xb)-'0');
        if(xb==0) {
            xb++;
            op=s.charAt(xb);
            xb++;
            for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) b=b*10+(s.charAt(xb)-'0');
            xb++;
            for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) c=c*10+(s.charAt(xb)-'0');
            if(op=='+') System.out.println(c-b);
            else if(op=='-') System.out.println(b+ c);
            else if(op=='*') System.out.println(c/b);
            else System.out.println(b*c);
        } 
		else if (s.charAt(xb)=='?'){
            xb++;
            for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) b=b*10+(s.charAt(xb)-'0');
            xb++;
            for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) c=c*10+(s.charAt(xb)-'0');
            if(a+b==c) System.out.println('+');
            else if(a-b==c) System.out.println('-');
            else if(a*b==c) System.out.println('*');
            else System.out.println('/');
        } 
		else if(xb+1<s.length()&&s.charAt(xb+1)=='?') {
            op=s.charAt(xb);
            xb=xb+3;
            for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) c=c*10+(s.charAt(xb)-'0');
            if(op=='+') System.out.println(c-a);
            else if(op=='*') System.out.println(c/a);
            else if(op=='-') System.out.println(a-c);
            else System.out.println(a/c);
        } 
		else{
            op=s.charAt(xb);
            xb++;
            for(;xb<s.length()&&s.charAt(xb)>='0'&&s.charAt(xb)<='9';xb++) b=b*10+(s.charAt(xb)-'0');
            if(op=='+') System.out.println(a+b);
            else if(op=='*') System.out.println(a*b);
            else if(op=='-') System.out.println(a-b);
            else System.out.println(a/b);
        }
    }
}
```

---

## 作者：Besheep (赞：0)

## Solution
模拟，字符串，数字合成，等式基本性质。

考虑到 $A,op,B,C$ 这四部分**只有一部分**被擦掉了，可以分别记录被擦掉的情况再进行分类讨论。

根据每一类情况求出对应需要的数字或运算符号，根据等式的基本性质进行正或逆运算即可。

## Code

```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=15;
#define ll long long

string s;
bool ca,cop=1,cb,cc;
//ca->A 被擦掉
//cop->op 被擦掉
//cb->B 被擦掉
//cc->C 被擦掉
ll n,d;
int main() {
	cin>>s;
	n=s.size();
	s=' '+s;
	for(int i=1;i<=n;i++)if(s[i]=='=')d=i;
	if(s[1]=='?') ca=1;
	else{
		for(int i=1;i<d;i++){
			if(s[i]=='+'||s[i]=='-'||s[i]=='*'||s[i]=='/'){
				cop=0;
//				break;
			}
			else if(s[i]=='?'&&i!=1&&cop==0){
				cb=1;
				break;
			}
		}
		if(ca==cop&&cop==cb&&ca==0) cc=1;
	}
//	cout<<ca<<cop<<cb<<cc;
	if(ca==1){
		char op;
		ll b=0,c=0;
		for(int i=2;i<d;i++){
			if(s[i]=='+'||s[i]=='-'||s[i]=='*'||s[i]=='/') op=s[i];
			else b=b*10+(s[i]-'0');
		}
		for(int i=d+1;i<=n;i++) c=c*10+(s[i]-'0');
		if(op=='+') cout<<c-b;
		if(op=='-') cout<<c+b;
		if(op=='*') cout<<c/b;
		if(op=='/') cout<<c*b;
	}
	else if(cop==1){
		ll a=0,b=0,c=0,j;
		for(int i=1;i<=d;i++){
			if(s[i]=='?'){
				j=i;
				break;
			}
			a=a*10+(s[i]-'0');
		}
		for(int i=j+1;i<d;i++){
			b=b*10+(s[i]-'0');
		}
		for(int i=d+1;i<=n;i++){
			c=c*10+(s[i]-'0');
		}
		if(a+b==c) cout<<'+';
		if(a-b==c) cout<<'-';
		if(a*b==c) cout<<'*';
		if(a/b==c) cout<<'/';
	}
	else if(cb==1){
		char op;
		ll a=0,c=0;
		for(int i=1;i<=n;i++){
			if(s[i]=='+'||s[i]=='-'||s[i]=='*'||s[i]=='/'){
				op=s[i];
				break;	
			} 
			a=a*10+(s[i]-'0');
		}
		for(int i=d+1;i<=n;i++) c=c*10+(s[i]-'0');
		if(op=='+') cout<<c-a;
		if(op=='-') cout<<a-c;
		if(op=='*') cout<<c/a;
		if(op=='/') cout<<a/c;
	}
	else{
		char op;
		ll a=0,b=0,j;
		for(int i=1;i<=n;i++){
			if(s[i]=='+'||s[i]=='-'||s[i]=='*'||s[i]=='/'){
				j=i;
				op=s[i];
				break;	
			} 
			a=a*10+(s[i]-'0');
		}
		for(int i=j+1;i<d;i++) b=b*10+(s[i]-'0');
		if(op=='+') cout<<a+b;
		if(op=='-') cout<<a-b;
		if(op=='*') cout<<a*b;
		if(op=='/') cout<<a/b;
	}
	return 0;
}

```

---

## 作者：yanmingqian (赞：0)

题意见原题，叙述已经足够清楚，无需多加说明。

分讨题。

先判断缺少的是哪个部分，如果是数字就将式子变形后输出，如果是符号就枚举判断。

具体地，如果缺少的是 $a$，则通过符号和 $b$ 和 $c$ 来进行计算输出；缺少的是 $b$ 或者 $c$ 同理；如果缺少符号，直接看 $a$ 和 $b$ 通过什么运算可以等于 $c$ 即可。

代码：

```cpp
#include<iostream>
using namespace std;
int main(){
    string s;
    cin>>s;
    int i=0,a=0,b=0,c=0;
    char op;
    while(s[i]>='0'&&s[i]<='9'){  
        a=a*10+(s[i]-'0');i++;
    }
    if(i==0){  //缺失的是a
        op=s[++i];
        i++;
        while(s[i]>='0'&&s[i]<='9'){  
            b=b*10+(s[i]-'0');i++;
        }
        i++;
        while(i<s.size()&&s[i]>='0'&&s[i]<='9'){  
            c=c*10+(s[i]-'0');i++;
        }
        if(op=='+'){
            cout<<c-b;
        }
        else if(op=='-'){
            cout<<b+c;
        }
        else if(op=='*'){
            cout<<c/b;
        }
        else{
            cout<<b*c;
        }
    }
    else if(s[i]=='?'){  //缺失的是op
        i++;
        while(s[i]>='0'&&s[i]<='9'){  
            b=b*10+(s[i]-'0');i++;
        }
        i++;
        while(i<s.size()&&s[i]>='0'&&s[i]<='9'){  
            c=c*10+(s[i]-'0');i++;
        }
        if(a+b==c){
            cout<<'+';
        }
        else if(a-b==c){
            cout<<'-';
        }
        else if(a*b==c){
            cout<<'*';
        }
        else{
            cout<<'/';
        }
    }
    else if(s[i+1]=='?'){  //缺失的是b
        op=s[i];
        i+=3;
        while(s[i]>='0'&&s[i]<='9'){  
            c=c*10+(s[i]-'0');i++;
        }
        if(op=='+'){
            cout<<c-a;
        }
        else if(op=='-'){
            cout<<a-c;
        }
        else if(op=='*'){
            cout<<c/a;
        }
        else{
            cout<<a/c;
        }
    }
    else{  //缺失的是c
        op=s[i];
        i++;
        while(s[i]>='0'&&s[i]<='9'){  
            b=b*10+(s[i]-'0');i++;
        }
        if(op=='+'){
            cout<<a+b;
        }
        else if(op=='-'){
            cout<<a-b;
        }
        else if(op=='*'){
            cout<<a*b;
        }
        else{
            cout<<a/b;
        }
    }
    return 0;
}
```

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        String s = scanner.next();
        int i = 0, a = 0, b = 0, c = 0;
        char op = ' ';

        while (i < s.length() && Character.isDigit(s.charAt(i))) {
            a = a * 10 + (s.charAt(i) - '0');
            i++;
        }

        if (i == 0) { // Missing a
            i++;
            op = s.charAt(i);
            i++;
            while (i < s.length() && Character.isDigit(s.charAt(i))) {
                b = b * 10 + (s.charAt(i) - '0');
                i++;
            }
            i++;
            while (i < s.length() && Character.isDigit(s.charAt(i))) {
                c = c * 10 + (s.charAt(i) - '0');
                i++;
            }
            switch (op) {
                case '+':
                    System.out.println(c - b);
                    break;
                case '-':
                    System.out.println(b + c);
                    break;
                case '*':
                    System.out.println(c / b);
                    break;
                case '/':
                    System.out.println(b * c);
                    break;
            }
        } else if (i < s.length() && s.charAt(i) == '?') { // Missing op
            i++;
            while (i < s.length() && Character.isDigit(s.charAt(i))) {
                b = b * 10 + (s.charAt(i) - '0');
                i++;
            }
            i++;
            while (i < s.length() && Character.isDigit(s.charAt(i))) {
                c = c * 10 + (s.charAt(i) - '0');
                i++;
            }
            if (a + b == c) {
                System.out.println('+');
            } else if (a - b == c) {
                System.out.println('-');
            } else if (a * b == c) {
                System.out.println('*');
            } else {
                System.out.println('/');
            }
        } else if (i + 1 < s.length() && s.charAt(i + 1) == '?') { // Missing b
            op = s.charAt(i);
            i += 3;
            while (i < s.length() && Character.isDigit(s.charAt(i))) {
                c = c * 10 + (s.charAt(i) - '0');
                i++;
            }
            switch (op) {
                case '+':
                    System.out.println(c - a);
                    break;
                case '-':
                    System.out.println(a - c);
                    break;
                case '*':
                    System.out.println(c / a);
                    break;
                case '/':
                    System.out.println(a / c);
                    break;
            }
        } else { // Missing c
            op = s.charAt(i);
            i++;
            while (i < s.length() && Character.isDigit(s.charAt(i))) {
                b = b * 10 + (s.charAt(i) - '0');
                i++;
            }
            i++;
            switch (op) {
                case '+':
                    System.out.println(a + b);
                    break;
                case '-':
                    System.out.println(a - b);
                    break;
                case '*':
                    System.out.println(a * b);
                    break;
                case '/':
                    System.out.println(a / b);
                    break;
            }
        }
    }
}

```

---

## 作者：a18981826590 (赞：0)

# [P12219 [蓝桥杯 2023 国 Java B] 不完整的算式](https://www.luogu.com.cn/problem/P12219)
## 解题思路
此题主要考察字符串的读入以及转化成数字。

首先使用 `getchar()` 逐个读入字符。对于 $A$、$B$、$C$ 和运算符都分开读入，一旦读入 `?` 就记录缺失项，再具体求解。对于缺失运算符的，枚举四则运算符判断是否成立即可。

### 细节注意：
当使用如下输入方式输入整数时，会多读入一个非数字字符。
```cpp
int a=10;
ch=getchar();
while(isdigit(ch)){
	a*=10;
	a+=ch-48;
	ch=getchar();
}
```
此时若读入为 `?`，特判后应再读入一个字符。
## [AC](https://www.luogu.com.cn/record/214303098) 代码
```cpp
#include<bits/stdc++.h> 
using namespace std;
int a,b,c,x;
char ch,z;
signed main(){
	ios::sync_with_stdio(0);
	ch=getchar();
	if(ch=='?'){
		x=0;
		ch=getchar();
	}
	while(isdigit(ch)){
		a*=10;
		a+=ch-48;
		ch=getchar();
	}
	if(ch=='?') x=1;
	else z=ch;
	ch=getchar();
	if(ch=='?'){
		x=2;
		ch=getchar();
	}
	while(isdigit(ch)){
		b*=10;
		b+=ch-48;
		ch=getchar();
	}
	ch=getchar();
	if(ch=='?') x=3;
	while(isdigit(ch)){
		c*=10;
		c+=ch-48;
		ch=getchar();
	}
	if(x==0){
		if(z=='+') cout<<c-b;
		else if(z=='-') cout<<b+c;
		else if(z=='*') cout<<c/b;
		else cout<<b*c;
	}
	else if(x==1){
		if(a+b==c) cout<<'+';
		else if(a-b==c) cout<<'-';
		else if(a*b==c) cout<<'*';
		else cout<<'/';
	}
	else if(x==2){
		if(z=='+') cout<<c-a;
		else if(z=='-') cout<<a-c;
		else if(z=='*') cout<<c/a;
		else cout<<a/c;
	}
	else if(x==3){
		if(z=='+') cout<<a+b;
		else if(z=='-') cout<<a-b;
		else if(z=='*') cout<<a*b;
		else cout<<a/b;
	}
	return 0;
}
```

---


# [COCI 2022/2023 #2] Kruhologija

## 题目背景

**这是一道交互题。**

## 题目描述

你是一只蚂蚁，你现在在一块漂浮在空中的面包上！

面包可以看成由若干个正方体组成的立体图形，这个图形在高度上最多只有一个方块，并且是连通的。

![](https://cdn.luogu.com.cn/upload/image_hosting/k9o74nmn.png)

左图是第一个样例，右图是不合法（不连通）的一个例子。

我们记这些正方体构成的立体图形有 $n$ 个面。你现在正在一个小块的一个面上，面向未知的方向。你可以进行 $q$ 次操作，每次你可以：

- $\texttt{K}$：向你面向的方向走一格；
- $\texttt{L}$：向左转 $90\degree$；
- $\texttt{D}$：向右转 $90\degree$；
- $\texttt{X}$：在当前格子上放置 / 删除标记。

注意：当你走到了边缘时，继续往前走，你会走到另一个面上，所以你可以向任意方向行走任意步。

一个立方体上的洞的定义为：完全被立方体包围的空间的一部分。

你很喜欢洞，所以你想要求出这个立方体上洞的数量。

## 说明/提示

|$\text{Subtask}$|分值|特殊性质|
|:-:|:-:|:-:|
|$1$|$49$|$n\le 40$，$q=20000$，面包上最多有一个洞|
|$2$|$61$|$n\le 200$，$q=20000$|

## 样例 #1

### 输入

```


0


1



0
```

### 输出

```
X
K

L
L
K

X
D
D
K

! 1```

## 样例 #2

### 输入

```


0

0

0

1
```

### 输出

```
X
K

K

K

K

! 0```

# 题解

## 作者：HJY2022 (赞：2)

写一下官方题解的思路。

首先根据[欧拉示性数](https://baike.baidu.com/item/%E6%AC%A7%E6%8B%89%E7%A4%BA%E6%80%A7%E6%95%B0/10391020)相关内容可以用边数($E$)，面数($F$)与点数($V$)算出洞($g$)的数量：

$$V-E+F=2-2g$$

其中 $E$ 和 $F$ 都是好求出的。$F$ 我们做一次dfs即可求出，而由于每个面度数为 $4$，总边数为 $2F$。

现在关键问题是如何求出点的个数。我们发现所有点分为 $3,4,5$ 度三种。而当我们到达一个面的时候，通过不断地转向，前进这个组合，记录下多少次回到自己，就可以求出这个端点的度数，正确性是显然的。那么我们在按照这种方法对于每个面求出它四个端点的个数即可求出总点数。

[我自己写的唐氏交互库](https://www.luogu.com.cn/paste/szwhlpjq)

---


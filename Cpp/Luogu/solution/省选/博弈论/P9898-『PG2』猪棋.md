# 『PG2』猪棋

## 题目背景

交互库绝顶聪明。

## 题目描述

猪棋的规则：

在一个 $1000\times 1000$ 的棋盘上，两人分别执黑棋白棋轮流执子，每次可以在当前没有子的不同位置将两颗子分别放下（有序），如果一颗子放下时出现有 $(x,y),(x+1,y),(x,y+1),(x+1,y+1)$ 的四个位置棋子颜色均相同则执此颜色者获胜。

你将扮演先手，在 $100$ 步内战胜交互库扮演的后手，保证有解。

对于每轮，你可以选择两个坐标 $(x_1,y_1)$ 与 $(x_2,y_2)$ 落子，你首先需要保证 $1\leq x_1,y_1,x_2,y_2\leq 1000$，你其次需要保证没人曾在 $(x_1,y_1)$ 落子，如果此时你获胜了判定结束且你获胜，否则你还需保证没人曾经在 $(x_2,y_2)$ 落子,如果此时你获胜了判定结束且你获胜，否则交互库将返回一组 $x_1,y_1,x_2,y_2$ 表示他在 $(x_1,y_1),(x_2,y_2)$ 落子，保证 $(x_1,y_1)\neq (x_2,y_2),1\leq x_1,y_1,x_2,y_2\leq 1000$，如果此时交互库获胜判定结束且你输了,否则判定棋盘上是否已经有 $400$ 颗子，如果是你获得平局，否则进入你的新一轮。


## 说明/提示

共 $5$ 个测试点，在测试点中如果你获胜且每步都满足 $6\leq x,y\leq 994$ 你将获得 $100$ 分，否则获胜你将获得 $50$ 分，你输了将获得 $0$ 分，平局获得 $30$ 分，总分数取测试点最小值。

本题输入输出参考 $0$ 分程序：

```cpp
#include <bits/stdc++.h>

using namespace std;

int n;
int x,y,xx,yy;


signed main()
{
    int i,j,k;
    n=100;
    while(n--)
    {
        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;
        cout<<rand()%1000+1<<' '<<rand()%1000+1<<endl;
        cin>>x>>y>>xx>>yy;
    }
    return 0;
}
```


# 题解

## 作者：ivyjiao (赞：14)

首先我们第一步一定是要下最中间的。

```
我：
(500,500)
(501,501)
```

地图（`X` 为我，`O` 为 AI，`.` 为空地）：

```
X.
.X
```

AI 此时有三种选择：

- 两个 `.` 都不堵。

如此时：

```
……
AI：
(499,500)
(499,501)
```

那么我们便可以下成：

```
……
我：
(500,501)
(501,500)
```

赢得棋局。

- 只堵其中一个 `.`。

这里先给一个结论，当我们有一个形如：

```
???
.X.
.XX
?..
```

方向无所谓，我们就可以在一步之内取得胜利。

也很好证，证明过程如下：

如果：

- 此时是我们的回合。

直接赢了没啥说的。

- 此时是 AI 的回合。

我们有左、下、右上三个能凑成 $2\times 2$ 的地方，AI 只能堵两个，轮到我的回合还是赢。

说完这个结论，我们来想一下只堵一个的情况。

实际上这也是最难的情况。

容易发现 AI 堵左下还是右上是无所谓的，所以我们关注另一颗棋子的动向：

- 随便下。

如此时：

```
……
AI：
(499,499)
(500,501)
```

那么我们就可以：

```
……
我：
(502,501)
(502,502)
```

此时的地图：

```
O...
.XO.
..X.
..XX
```

已经构造出了我们想要的东西，赢。

- 与第一颗棋子相连（八连通）。

如此时：

```
……
AI：
(500,501)
(500,502)
```

那么我们可以：

```
……
我：
(499,501)
(501,500)
```

此时地图如下：

```
.X.
XOO
XX.
```

若此时 AI 把左面和下面都堵上了，我们就去上面构造那个东西，如下：

```
……
AI：
(501,499)
(502,500)
我：
(498,501)
(498,502)
```

此时地图如下：

```
..XX
..X.
.XOO
OXX.
.O..
```

已经构造出了我们想要的东西，赢。

如果 AI 没把左面和下面都堵上，直接在左面或下面一步获得胜利。

如：

```
……
AI：
(498,501)
(502,501)
我：
(500,499)
(501,499)
```

赢。

四联通还有三种方案，拓展到八连通只多了两种有效方案，都可以用类似的方法破解。

- 两个 `.` 都堵。

此时 AI 只有一种方案，我们只要继续往右下角放就行。

```
……
AI：
(500,501)
(501,500)
我：
(502,502)
(503.503)
```

接下来 AI 这步下完，我们的四个棋子如果中间两个没被堵就拿中间两个赢，下面两个没被堵就拿下面两个赢。

如果都被堵了去构造那个东西就行。

如：

```
……
AI：
(501,502)
(503,502)
我：
(503,504)
(504,504)
```

此时地图如下：

```
XO...
OXO..
..X..
..OXX
....X
```

已经构造出了我们想要的东西，赢。

其余方法同。

本题证毕。

代码如下：

```cpp
#include<iostream>
using namespace std;
int x,y,xx,yy,vis[1001][1001];
int main(){
    cout<<500<<" "<<500<<endl;
    cout<<501<<" "<<501<<endl;
    vis[500][500]=1;
    vis[501][501]=1;
    cin>>x>>y>>xx>>yy;
    vis[x][y]=1;
    vis[xx][yy]=1;
    if(vis[500][501]&&vis[501][500]){
        cout<<502<<" "<<502<<endl;
        cout<<503<<" "<<503<<endl;
        cin>>x>>y>>xx>>yy;
        vis[x][y]=1;
        vis[xx][yy]=1;
        if(!vis[501][502]&&!vis[502][501]){
            cout<<501<<" "<<502<<endl;
            cout<<502<<" "<<501<<endl;
            return 0;
        }
        else if(!vis[502][503]&&!vis[503][502]){
            cout<<502<<" "<<503<<endl;
            cout<<503<<" "<<502<<endl;
            return 0;
        }
        else if(vis[503][502]){
            cout<<503<<" "<<504<<endl;
            cout<<504<<" "<<504<<endl;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[504][503]){
                cout<<504<<" "<<503<<endl;
                cout<<114<<" "<<514<<endl;
                return 0;
            }
            else if(!vis[502][503]&&!vis[502][504]){
                cout<<502<<" "<<503<<endl;
                cout<<502<<" "<<504<<endl;
                return 0;
            }
            else{
                cout<<503<<" "<<505<<endl;
                cout<<504<<" "<<505<<endl;
                return 0;
            }
        }
        else{
            cout<<504<<" "<<503<<endl;
            cout<<504<<" "<<504<<endl;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[503][504]){
                cout<<503<<" "<<504<<endl;
                cout<<114<<" "<<514<<endl;
                return 0;
            }
            else if(!vis[503][502]&&!vis[504][502]){
                cout<<503<<" "<<502<<endl;
                cout<<504<<" "<<502<<endl;
                return 0;
            }
            else{
                cout<<505<<" "<<503<<endl;
                cout<<505<<" "<<504<<endl;
                return 0;
            }
        }
    }
    else{
        if(!vis[500][501]&&!vis[501][500]){
            cout<<500<<" "<<501<<endl;
            cout<<501<<" "<<500<<endl;
            return 0;
        }
        else if(vis[500][501]&&vis[501][502]){
            cout<<499<<" "<<501<<endl;
            cout<<501<<" "<<500<<endl;
            vis[499][501]=1;
            vis[501][500]=1;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[498][501]&&!vis[498][502]&&!vis[499][500]&&!vis[498][500]&&!vis[497][501]&&!vis[497][502]){
                cout<<498<<" "<<501<<endl;
                cout<<498<<" "<<502<<endl;
                vis[498][501]=1;
                vis[498][502]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[499][502]){
                    cout<<499<<" "<<502<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[499][500]&&!vis[498][500]){
                    cout<<499<<" "<<500<<endl;
                    cout<<498<<" "<<500<<endl;
                    return 0;
                }
                else{
                    cout<<497<<" "<<501<<endl;
                    cout<<497<<" "<<502<<endl;
                    return 0;
                }
            }
            else if(!vis[500][499]&&!vis[501][499]){
                cout<<500<<" "<<499<<endl;
                cout<<501<<" "<<499<<endl;
                return 0;
            }
            else{
                cout<<502<<" "<<499<<endl;
                cout<<502<<" "<<500<<endl;
                return 0;
            }
        }
        else if(vis[500][501]&&vis[499][501]){
            cout<<501<<" "<<499<<endl;
            cout<<500<<" "<<502<<endl;
            vis[501][499]=1;
            vis[500][502]=1;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[499][503]&&!vis[500][503]&&!vis[499][504]&&!vis[500][504]&&!vis[501][502]&&!vis[501][503]&&!vis[499][502]){
                cout<<499<<" "<<503<<endl;
                cout<<500<<" "<<503<<endl;
                vis[499][503]=1;
                vis[500][503]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[499][502]){
                    cout<<499<<" "<<502<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[499][504]&&!vis[500][504]){
                    cout<<499<<" "<<504<<endl;
                    cout<<500<<" "<<504<<endl;
                    return 0;
                }
                else{
                    cout<<501<<" "<<502<<endl;
                    cout<<501<<" "<<503<<endl;
                    return 0;
                }
            }
            else if(!vis[500][499]&&!vis[501][499]){
                cout<<500<<" "<<499<<endl;
                cout<<501<<" "<<499<<endl;
                return 0;
            }
            else{
                cout<<502<<" "<<500<<endl;
                cout<<502<<" "<<501<<endl;
                return 0;
            }
        }
        else if(vis[501][500]&&vis[501][499]){
            cout<<500<<" "<<501<<endl;
            cout<<502<<" "<<500<<endl;
            vis[500][501]=1;
            vis[502][500]=1;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[503][500]&&!vis[503][501]&&!vis[502][499]&&!vis[503][499]&&!vis[504][500]&&!vis[504][501]&&!vis[502][501]){
                cout<<503<<" "<<500<<endl;
                cout<<503<<" "<<501<<endl;
                vis[503][500]=1;
                vis[503][501]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[502][501]){
                    cout<<502<<" "<<501<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[502][499]&&!vis[503][499]){
                    cout<<502<<" "<<499<<endl;
                    cout<<503<<" "<<499<<endl;
                    return 0;
                }
                else{
                    cout<<504<<" "<<500<<endl;
                    cout<<504<<" "<<501<<endl;
                    return 0;
                }
            }
            else if(!vis[500][502]&&!vis[501][502]){
                cout<<500<<" "<<502<<endl;
                cout<<501<<" "<<502<<endl;
                return 0;
            }
            else{
                cout<<499<<" "<<500<<endl;
                cout<<499<<" "<<501<<endl;
                return 0;
            }
        }
        else if(vis[501][500]&&vis[502][500]){
            cout<<500<<" "<<501<<endl;
            cout<<501<<" "<<499<<endl;
            vis[500][501]=1;
            vis[501][499]=1;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[501][498]&&!vis[502][498]&&!vis[501][497]&&!vis[502][497]&&!vis[500][499]&&!vis[500][498]&&!vis[502][499]){
                cout<<501<<" "<<498<<endl;
                cout<<502<<" "<<498<<endl;
                vis[501][498]=1;
                vis[502][498]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[502][499]){
                    cout<<502<<" "<<499<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[501][497]&&!vis[502][497]){
                    cout<<501<<" "<<497<<endl;
                    cout<<502<<" "<<497<<endl;
                    return 0;
                }
                else{
                    cout<<500<<" "<<499<<endl;
                    cout<<500<<" "<<498<<endl;
                    return 0;
                }
            }
            else if(!vis[500][502]&&!vis[501][502]){
                cout<<500<<" "<<502<<endl;
                cout<<501<<" "<<502<<endl;
                return 0;
            }
            else{
                cout<<499<<" "<<500<<endl;
                cout<<499<<" "<<501<<endl;
                return 0;
            }
        }
        else if(vis[500][501]&&vis[499][502]){
            cout<<500<<" "<<502<<endl;
            cout<<501<<" "<<502<<endl;
            vis[500][502]=1;
            vis[501][502]=1;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[500][499]&&!vis[499][499]&&!vis[501][500]&&!vis[501][499]&&!vis[500][498]&&!vis[499][498]&&!vis[499][500]){
                cout<<500<<" "<<499<<endl;
                cout<<499<<" "<<499<<endl;
                vis[500][499]=1;
                vis[499][499]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[499][500]){
                    cout<<499<<" "<<500<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[501][500]&&!vis[501][499]){
                    cout<<501<<" "<<500<<endl;
                    cout<<502<<" "<<499<<endl;
                    return 0;
                }
                else{
                    cout<<500<<" "<<498<<endl;
                    cout<<499<<" "<<498<<endl;
                    return 0;
                }
            }
            else if(!vis[502][502]&&!vis[502][503]){
                cout<<502<<" "<<502<<endl;
                cout<<502<<" "<<503<<endl;
                return 0;
            }
            else{
                cout<<500<<" "<<503<<endl;
                cout<<501<<" "<<503<<endl;
                return 0;
            }
        }
        else if(vis[501][500]&&vis[502][499]){
            cout<<500<<" "<<499<<endl;
            cout<<501<<" "<<499<<endl;
            vis[500][499]=1;
            vis[501][499]=1;
            cin>>x>>y>>xx>>yy;
            vis[x][y]=1;
            vis[xx][yy]=1;
            if(!vis[500][502]&&!vis[501][502]&&!vis[500][503]&&!vis[501][503]&&!vis[502][501]&&!vis[502][502]&&!vis[500][501]){
                cout<<500<<" "<<502<<endl;
                cout<<501<<" "<<502<<endl;
                vis[500][502]=1;
                vis[501][502]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[500][501]){
                    cout<<500<<" "<<501<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[502][501]&&!vis[502][502]){
                    cout<<502<<" "<<501<<endl;
                    cout<<502<<" "<<502<<endl;
                    return 0;
                }
                else{
                    cout<<500<<" "<<503<<endl;
                    cout<<501<<" "<<503<<endl;
                    return 0;
                }
            }
            else if(!vis[500][498]&&!vis[501][498]){
                cout<<500<<" "<<498<<endl;
                cout<<501<<" "<<498<<endl;
                return 0;
            }
            else{
                cout<<499<<" "<<499<<endl;
                cout<<499<<" "<<500<<endl;
                return 0;
            }
        }
        else if(vis[501][500]){
            if(!vis[500][502]&&!vis[501][502]&&!vis[500][503]&&!vis[501][503]&&!vis[502][501]&&!vis[502][502]&&!vis[500][501]){
                cout<<500<<" "<<502<<endl;
                cout<<501<<" "<<502<<endl;
                vis[500][502]=1;
                vis[501][502]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[500][501]){
                    cout<<500<<" "<<501<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[500][503]&&!vis[501][503]){
                    cout<<500<<" "<<503<<endl;
                    cout<<501<<" "<<503<<endl;
                    return 0;
                }
                else{
                    cout<<502<<" "<<501<<endl;
                    cout<<502<<" "<<502<<endl;
                    return 0;
                }
            }
            else{
                cout<<499<<" "<<500<<endl;
                cout<<499<<" "<<501<<endl;
                vis[499][500]=1;
                vis[499][501]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[500][501]){
                    cout<<500<<" "<<501<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[500][499]&&!vis[499][499]){
                    cout<<500<<" "<<499<<endl;
                    cout<<499<<" "<<499<<endl;
                    return 0;
                }
                else{
                    cout<<498<<" "<<500<<endl;
                    cout<<498<<" "<<501<<endl;
                    return 0;
                }
            }
        }
        else{
            if(!vis[502][500]&&!vis[502][501]&&!vis[503][500]&&!vis[503][501]&&!vis[501][502]&&!vis[502][502]&&vis[501][500]){
                cout<<502<<" "<<500<<endl;
                cout<<502<<" "<<501<<endl;
                vis[502][500]=1;
                vis[502][501]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[501][500]){
                    cout<<501<<" "<<500<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[503][500]&&!vis[503][501]){
                    cout<<503<<" "<<500<<endl;
                    cout<<503<<" "<<501<<endl;
                    return 0;
                }
                else{
                    cout<<501<<" "<<502<<endl;
                    cout<<502<<" "<<502<<endl;
                    return 0;
                }
            }
            else{
                cout<<500<<" "<<499<<endl;
                cout<<501<<" "<<499<<endl;
                vis[500][499]=1;
                vis[501][499]=1;
                cin>>x>>y>>xx>>yy;
                vis[x][y]=1;
                vis[xx][yy]=1;
                if(!vis[501][500]){
                    cout<<501<<" "<<500<<endl;
                    cout<<114<<" "<<514<<endl;
                    return 0;
                }
                else if(!vis[499][500]&&!vis[499][499]){
                    cout<<499<<" "<<500<<endl;
                    cout<<499<<" "<<499<<endl;
                    return 0;
                }
                else{
                    cout<<500<<" "<<498<<endl;
                    cout<<501<<" "<<498<<endl;
                    return 0;
                }
            }
        }
    }
}
```

---

## 作者：Mo20 (赞：3)

人类群星闪耀时

提供原本出题人希望做法，大概率有其他做法，欢迎私信出题人。

用 `1` 代表先手黑色棋子，`0` 代表后手白色棋子，`#` 代表空地面。

首先，有基本一步获胜棋形，我们称之为局面一步胜

```
11
##

1#
#1

```
那么我们发现这个游戏实际上是为了构造出来
```
###
01#
###

```
这样的一个有三面空的棋子能为我们提供

```
###
011
##1
```

的必杀棋形(这种棋形有三处局部一步胜)，我们称之为局部两步胜

那么我们回到游戏开始，提供一种自己的下法。因为思维过程并不连贯或有逻辑性，更多的是人类智慧，所以建议自己思考。

```
#1
1#
```
如果不补上这个 $2\times2$ 矩形，一定为有局部二步胜，所以只能堵。

#### 是这样的吗？

这就是这道题第二个精妙之处，后手可以通过主动进攻构造局部一步胜来避免先手的二步胜构成直接威胁，这种情况将在题解末进行讨论。

```
01
10
```

```
###1
##1#
01##
10##
```
如果防守

```
###1
#01#
010#
10##
```
则
```
##11
#011
010#
10##
```
如果防守

```
##01
##10
01##
10##
```
则
```
##01
#110
011#
10##
```
如果防守
```
##01
##1#
010#
10##
```
则
```
#####
##011
##1#1
010##
10###
```
形成局部两步胜
如果防守
```
###1
#010
01##
10##
```
则镜像进攻

现在讨论后手第一步进攻的情况

```
#1#
100
###
```
```
#1##
100#
#1##
1###
```
这一步有很多方法，需要满足以下条件任意其一

- 封住对方的局部二步胜的同时保证自己有 $3$ 个及以上本质不同的局部二步胜（即需要 $3$ 颗以上的子封堵）。

- 保证自己存在局部一步胜的同时拥有局部二步胜，即避免对面使用现成二步必胜的情况下保证自己下回合能达成多个局部一步胜。

```
#1#
10#
##0
```
这种情况同上。

代码就不贴了，冗长且复杂的说

---

## 作者：Wilderness_ (赞：2)

这里给出 [suibian1234](https://www.luogu.com.cn/user/329682) 大佬的做法。

## 思路
我们先考虑下横着连下两颗棋 $(x,y),\ (x+1,y)$（`x` 为人，`o` 为绝顶聪明交互库，`.` 为空棋格）：

```
xx
..
```

接下来分类讨论：

1. 交互库弱智，没下 $(x,y\pm 1),\ (x+1,y\mp 1)$，则直接下 $(x,y\pm 1),\ (x,y\pm 1)$ 取得胜利。
2. 交互库正常，下了 $(x,y\pm 1),\ (x+1,y\mp 1)$，由于四种情况其实都是对称的，这里只讨论下了 $(x,y-1),\ (x+1,y+1)$ 的情况（代码里四种情况都得讨论）：

```
o.
xx
.o
```

那么我们就再向右上方斜着走两步，即下 $(x+2,y-1),\ (x+3,y-2)$，此时棋盘状况为：

```
...x
o.x.
xx..
.o..
```

考虑交互库，它有 $5$ 种下法：

1. 交互库弱智，没有下 $(x+1,y-1),\ (x+2,y-2)$ 或 $(x+1,y-1),\ (x+3,y-1)$ 或 $(x+2,y),\ (x+2,y-2)$ 或 $(x+2,y),\ (x+3,y-1)$ 四种情况的一种，直接通过下 $(x+1,y-1),\ (x+2,y)$ 或 $(x+3,y-1),\ (x+2,y-2)$ 取得胜利。
2. 交互库下 $(x+2,y),\ (x+2,y-2)$，即

```
..ox
o.x.
xxo.
.o..
```

此时我们下 $(x-1,y),\ (x+4,y-2)$，即

```
...oxx
.o.x..
xxxo..
..o...
```

此时若它用一颗子去阻挡左下角，右上角的横着两颗不可能用一颗子挡住，我们必胜；若它用两颗子全力阻挡右上角，我们也可以通过左下角来取得胜利。

3. 交互库下 $(x+2,y),\ (x+3,y-1)$，即

```
...x
o.xo
xxo.
.o..
```

此时我们下 $(x-1,y),\ (x+3,y-3)$,即

```
....x.
....x.
.o.xo.
xxxo..
..o...
```

此时若它用一颗子去阻挡左下角，右上角的竖着两颗不可能用一颗子挡住，我们必胜；若它用两颗子全力阻挡右上角，我们也可以通过左下角来取得胜利。

4. 交互库下 $(x+1,y-1),\ (x+3,y-1)$，即

```
...x
ooxo
xx..
.o..
```

此时交互库将要取得胜利！我们不会让这种事情发生，于是先挡一步，再紧攻一步，下 $(x,y-2),\ (x+3,y-3)$，即

```
...x.
x..x.
ooxo.
xx...
.o...
```

此时它若乱下不挡右上角，我们必然胜利；若它阻挡右上角（怎么样挡其实结果一样，下图只是例子）：

```
...xo
x.ox.
ooxo.
xx...
.o...
```

我们可以根据之前的下法，下 $(x,y-3),\ (x-1,y)$，此时棋盘状况如下：

```
.x..xo
.x.ox.
.ooxo.
xxx...
..o...
```

那么这一步又让交互库阵亡了，挡左上角时我们左下角四子成方，挡左下角时左上角亦可获得胜利。

5. 交互库下 $(x+1,y-1),\ (x+2,y-2)$，即

```
..ox
oox.
xx..
.o..
```

此时交互库将要取得胜利！我们不会让这种事情发生，于是先挡一步，再紧攻一步，下 $(x,y-2),\ (x+4,y-2)$，即

```
x.oxx
oox..
xx...
.o...
```

此时它若乱下不挡右上角，我们必然胜利；若它阻挡右上角（怎么样挡其实结果一样，下图只是例子）：

```
....o
x.oxx
ooxo.
xx...
.o...
```

我们可以根据之前的下法，下 $(x,y-3),\ (x-1,y)$，此时棋盘状况如下：

```
.x...o
.x.oxx
.ooxo.
xxx...
..o...
```

那么这一步又让交互库阵亡了，挡左上角时我们左下角四子成方，挡左下角时左上角亦可获得胜利。

其他三种情况也据此分类讨论。

## Code
经过压行处理，谨慎阅读。

```cpp
#include<bits/stdc++.h>
#define f2(x) for(int x=1;x<=2;x++)
#define M 1145
#define x_x 114
#define y_y 114
using namespace std;
bool m[M][M];
int x,y;
void print(int x1,int y1,int x2,int y2){cout<<x1<<" "<<y1<<endl<<x2<<" "<<y2<<endl;}
void print(int x,int y){cout<<x<<" "<<y<<endl;}
bool check(int x,int y,bool v){return (m[x][y]==v)?1:0;}
bool check(int x1,int y1,int x2,int y2,bool v){return (m[x1][y1]==v&&m[x2][y2]==v)?1:0;}
int main()
{
	print(x_x,y_y,x_x,y_y+1);
	f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
	if(check(x_x-1,y_y,x_x-1,y_y+1,0))print(x_x-1,y_y,x_x-1,y_y+1);
	else if(check(x_x+1,y_y,x_x+1,y_y+1,0))print(x_x+1,y_y,x_x+1,y_y+1);
	else if(check(x_x+1,y_y,x_x-1,y_y,1))
	{
		print(x_x,y_y+2,x_x+1,y_y+2);
		f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
		if(check(x_x+1,y_y+1,0))print(x_x+1,y_y+1);
		else if(check(x_x,y_y+3,x_x+1,y_y+3,0))print(x_x,y_y+3,x_x+1,y_y+3);
		else print(x_x-1,y_y+1,x_x-1,y_y+2);
	}
	else if(check(x_x+1,y_y+1,x_x-1,y_y+1,1))
	{
		print(x_x,y_y-1,x_x+1,y_y-1);
		f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
		if(check(x_x+1,y_y,0))print(x_x+1,y_y);
		else if(check(x_x,y_y-2,x_x+1,y_y-2,0))print(x_x,y_y-2,x_x+1,y_y-2);
		else print(x_x-1,y_y,x_x-1,y_y-1);
	}
	else if(check(x_x+1,y_y,1))
	{
		print(x_x+1,y_y+2,x_x+2,y_y+3);
		f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
		if(check(x_x+1,y_y+1,x_x,y_y+2,0))print(x_x+1,y_y+1,x_x,y_y+2);
		else if(check(x_x+2,y_y+2,x_x+1,y_y+3,0))print(x_x+2,y_y+2,x_x+1,y_y+3);
		else if(check(x_x+1,y_y+1,1))
		{
			print(x_x+2,y_y);
			if(check(x_x+1,y_y+3,1))
			{
				print(x_x+3,y_y+3);
				f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
				if(check(x_x+2,y_y+4,x_x+3,y_y+4,0))print(x_x+2,y_y+4,x_x+3,y_y+4);
				else if(check(x_x+2,y_y+2,x_x+3,y_y+2,0))print(x_x+2,y_y+2,x_x+3,y_y+2);
				else
				{
					print(x_x,y_y-1,x_x+3,y_y);
					f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
					if(check(x_x-1,y_y-1,x_x-1,y_y,0))print(x_x-1,y_y-1,x_x-1,y_y);
					else if(check(x_x+2,y_y+1,x_x+3,y_y+1,0))print(x_x+2,y_y+1,x_x+3,y_y+1);
					else print(x_x+2,y_y-1,x_x+3,y_y-1);
				}
			}
			else
			{
				print(x_x+2,y_y+4);
				f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
				if(check(x_x+1,y_y+3,x_x+1,y_y+4,0))print(x_x+1,y_y+3,x_x+1,y_y+4);
				else if(check(x_x+3,y_y+3,x_x+3,y_y+4,0))print(x_x+3,y_y+3,x_x+3,y_y+4);
				else
				{
					print(x_x,y_y-1,x_x+3,y_y);
					f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
					if(check(x_x-1,y_y-1,x_x-1,y_y,0))print(x_x-1,y_y-1,x_x-1,y_y);
					else if(check(x_x+2,y_y+1,x_x+3,y_y+1,0))print(x_x+2,y_y+1,x_x+3,y_y+1);
					else print(x_x+2,y_y-1,x_x+3,y_y-1);
				}
			}
		}
		else if(check(x_x+1,y_y+3,1))
		{
			print(x_x+3,y_y+2,x_x+3,y_y+3);
			f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
			if(check(x_x+2,y_y+4,x_x+3,y_y+4,0))print(x_x+2,y_y+4,x_x+3,y_y+4);
			else if(check(x_x+4,y_y+2,x_x+4,y_y+3,0))print(x_x+4,y_y+2,x_x+4,y_y+3);
			else print(x_x+2,y_y+2);
		}
		else
		{
			print(x_x+2,y_y+4,x_x+3,y_y+4);
			f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
			if(check(x_x+1,y_y+3,y_y+1,y_y+4,0))print(x_x+1,y_y+3,y_y+1,y_y+4);
			else if(check(x_x+2,y_y+5,y_y+3,y_y+5,0))print(x_x+2,y_y+5,y_y+3,y_y+5);
			else print(x_x+3,y_y+3);
		}
	}
	else
	{
		print(x_x-1,y_y+2,x_x-2,y_y+3);
		f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
		if(check(x_x-1,y_y+1,x_x,y_y+2,0))print(x_x-1,y_y+1,x_x,y_y+2);
		else if(check(x_x-2,y_y+2,x_x-1,y_y+3,0))print(x_x-2,y_y+2,x_x-1,y_y+3);
		else if(check(x_x-1,y_y+1,1))
		{
			print(x_x-2,y_y);
			if(check(x_x-1,y_y+3,1))
			{
				print(x_x-3,y_y+3);
				f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
				if(check(x_x-3,y_y+4,x_x-2,y_y+4,0))print(x_x-3,y_y+4,x_x-2,y_y+4);
				else if(check(x_x-3,y_y+2,x_x-2,y_y+2,0))print(x_x-3,y_y+2,x_x-2,y_y+2);
				else
				{
					print(x_x-3,x_x,y_y,y_y-1);
					f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
					if(check(x_x+1,y_y-1,x_x+1,y_y,0))print(x_x+1,y_y-1,x_x+1,y_y);
					else if(check(x_x-3,y_y+1,x_x-2,y_y+1,0))print(x_x-3,y_y+1,x_x-2,y_y+1);
					else print(x_x-3,y_y-1,x_x-2,y_y);
				}
			}
			else
			{
				print(x_x-2,y_y+4);
				f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
				if(check(x_x-1,y_y+3,x_x-1,y_y+4,0))print(x_x-1,y_y+3,x_x-1,y_y+4);
				else if(check(x_x-3,y_y+3,x_x-3,y_y+4,0))print(x_x-3,y_y+3,x_x-3,y_y+4);
				else
				{
					print(x_x,y_y-1,x_x-3,y_y);
					f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
					if(check(x_x+1,y_y-1,x_x+1,y_y,0))print(x_x+1,y_y-1,x_x+1,y_y);
					else if(check(x_x-3,y_y+1,x_x-2,y_y+1,0))print(x_x-3,y_y+1,x_x-2,y_y+1);
					else print(x_x-3,y_y-1,x_x-2,y_y-1);
				}
			}
		}
		else if(check(x_x-1,y_y+3,1))
		{
			print(x_x-3,y_y+2,x_x-3,y_y+3);
			f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
			if(check(x_x-3,y_y+4,x_x-2,y_y+4,0))print(x_x-3,y_y+4,x_x-2,y_y+4);
			else if(check(x_x-4,y_y+2,x_x-4,y_y+3,0))print(x_x-4,y_y+2,x_x-4,y_y+3);
			else print(x_x-2,y_y+2);
		}
		else
		{
			print(x_x-3,y_y+4,x_x-2,y_y+4);
			f2(i)scanf("%d %d",&x,&y),m[x][y]=1;
			if(check(x_x-1,y_y+3,x_x-1,y_y+4,0))print(x_x-1,y_y+3,x_x-1,y_y+4);
			else if(check(x_x-3,y_y+5,x_x-2,y_y+5,0))print(x_x-3,y_y+5,x_x-2,y_y+5);
			else print(x_x-3,y_y+3);
		}
	}
	return 0;
} 
```

---

## 作者：bingo888 (赞：1)

这里直接讲正解。  
之前的题解已经把规则和部分策略讲的很好了，这里不再赘述。  
这里主要介绍另一种更简单（duo te pan）的方法：  
首先先手在远离边界的位置挨着放两个棋子，后手只能在这两个棋子的两侧各放置一个，否则先手直接获胜。  
如果后手这两个棋子在同一直线上，先手可以考虑在另一侧换方向连续挨着放置两个，然后会出现如图所示的情况，后手只能放置两个棋，先手必胜。  
![](https://cdn.luogu.com.cn/upload/image_hosting/y2wfzvxv.png)  
如果后手两个棋子不在同一直线上，那么顺着最初的方向，间隔一格再放置两个棋子，后手本质上只有两种选择，如图所示。  
![](https://cdn.luogu.com.cn/upload/image_hosting/zn24e28f.png)  
![](https://cdn.luogu.com.cn/upload/image_hosting/ubm42n69.png)  
对于第一种情形，还是顺着这个方向如图所示放置，然后发现先手必胜。  
![](https://cdn.luogu.com.cn/upload/image_hosting/xnd8vt95.png)  
对于第二种情形，延续前面的放置方法，由于不能像刚才的情况一样，故后手只有一种放置方法，如图所示。  
![](https://cdn.luogu.com.cn/upload/image_hosting/xu5qvp03.png)  
接着有玄学的方法，如图所示。  
![](https://cdn.luogu.com.cn/upload/image_hosting/y81f35xk.png)  
![](https://cdn.luogu.com.cn/upload/image_hosting/pk5qsu3t.png)  
由于代码冗长却全特判，无撰写难度，故这里不给出。

---

## 作者：MadokaKaname (赞：1)

本文同时发表于个人[博客园](https://www.cnblogs.com/monster-hunter/p/17901574.html)。

## 前言

题目出的很好，下次别出了。

~~猪棋=猪国杀+棋~~

~~多图警告~~

## 题解

平局很好做，一直乱放就行。

因此可以发现**如果要赢必然要一直保持主动**。

如果让对方两手都不用防，则对方一直做平局即可。

考虑怎么保持主动。

首先可以发现如果黑做出这种局面一定能赢：

![](https://cdn.luogu.com.cn/upload/image_hosting/k7ay0yry.png)

考虑第一个子怎么下。

发现下一同一行或同一列有点烦，考虑先下两个斜子。

后手应对本质上只有三种情况：

![](https://cdn.luogu.com.cn/upload/image_hosting/2xsig4sy.png)

![](https://cdn.luogu.com.cn/upload/image_hosting/3jzlopr3.png)

![](https://cdn.luogu.com.cn/upload/image_hosting/gzxpwurd.png)

先考虑第一种。似乎对方反占了先机，但是没关系，我们可以右上连下两个子反击：

![](https://cdn.luogu.com.cn/upload/image_hosting/up87jkph.png)

这样对方只能补上方和右边，我们可以顺利的用左边的黑棋做出杀棋：

![](https://cdn.luogu.com.cn/upload/image_hosting/6i23rnhj.png)

现在考虑第二种。本质上和第一种相同，我们也只需要做两个必须要后手补的点即可。

![](https://cdn.luogu.com.cn/upload/image_hosting/hww5oqph.png)

考虑第三种。发现两个黑子都做不成了，因此考虑新开辟一个点来做。

可以这么下：

![](https://cdn.luogu.com.cn/upload/image_hosting/j63ugsbd.png)

可以发现有两种变化：

![](https://cdn.luogu.com.cn/upload/image_hosting/h7l63fn1.png)

![](https://cdn.luogu.com.cn/upload/image_hosting/nffobp0c.png)

对于第一种，我们直接利用右下黑棋做杀：

![](https://cdn.luogu.com.cn/upload/image_hosting/as7yr7p3.png)

对于第二种，我们还需要防一手换回主动：

![](https://cdn.luogu.com.cn/upload/image_hosting/x6193nf3.png)

然后再做杀棋：

![](https://cdn.luogu.com.cn/upload/image_hosting/b7i076pg.png)

[极度屎山的代码](https://www.luogu.com.cn/paste/rns3k5a4)

---

## 作者：Imakf (赞：1)

策略：想辦法構造出一個必勝狀態，如下

```
 ..
.XX
.X.
```

這樣有三種方法可以形成 $2\times 2$ 矩形，而對方只能阻斷兩個位置，故必然勝利。而經過左腦搏擊右腦之後可以畫出如下決策樹：

![](https://cdn.luogu.com.cn/upload/image_hosting/43k4rg6z.png)

---


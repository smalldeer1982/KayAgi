# [蓝桥杯 2024 国 Java B] 最优路径

## 题目描述

给出一个具有 $N$ 个点、$M$ 条边的无向图（可能存在重边和自环）。其中每条边都有一个 $w$ 属性表示无向边的权重。

你可以从这个图中任意选两个不同的点 $start$、$end$，并以 $start$ 作为起点，$end$ 作为终点找出一条从 $start$ 到 $end$ 的路径（这条路径可以多次经过同一个点，也可以多次经过同一条边），将这条路径上经过的所有边的权重求一个异或和便得到了这条路径的风险值。

小蓝想要找到一条风险值最小的路径，请问最小的风险值是多少？

## 说明/提示

### 样例说明

先走第二条边，再走第四条边，风险值 $3 \oplus 1 = 2$。

### 评测用例规模与约定

- 对于 $60\%$ 的评测用例，$1 \leq N \leq 50$，$1 \leq M \leq 10^3$。
- 对于 $100\%$ 的评测用例，$1 \leq N \leq 500$，$1 \leq M \leq 10^4$，$1 \leq u, v \leq N$，$1 \leq w \leq 10^3$。

## 样例 #1

### 输入

```
3 4
1 1 9
2 3 3
2 3 8
3 3 1```

### 输出

```
2```

# 题解

## 作者：Yannik (赞：2)

## 题意：
任意选两个不同的点使得其路径的异或和最小。求出这个值。
## 思路：
先考虑任意两个点 $x$ 到 $y$ 的任意一条简单路径。可以通过直接遍历得到，再考虑如何是异或和最小。必然是多走一些路。一个可行的方法是：从某一个点开始走到一个环，在环上走一圈，回到这个点。然后枚举所有环，把环的异或值插入线性基，用线性基跑最小值即可。
## Tips：
- 求任意两点简单路径异或和：比如 $a$ 到 $b$ 的异或和为 $x$，$a$ 到 $c$ 的异或和为 $y$。则 $b$ 到 $c$ 的异或和为 $x$ $⊕$ $y$。
- 那么一个环的异或和呢？把上面那个 $c$ 改成 $b$ 即可。即 $b$ 再走回 $b$，不就是一个环吗？
```cpp
void dfs(int u,int fa){
	for(auto x:g[u]){
		int e=x.first,w=x.second;
		if(vis[e]){
			ins(xo[e]^xo[u]^w);//环的异或和
		} else {
		    vis[e]=1;
			tmp.push_back(e);
			xo[e]=xo[u]^w;
			dfs(e,u);
		}
	}
}
```
- 注意两个点之间可能不连通。需要多次遍历。
- 线性基求最小值贪心即可。
```cpp
int res=xo[x]^xo[y];
for(int k=31;~k;k--){
    if((res^p[k])<res) res=res^p[k];
}
ans=min(ans,res);
```
 $ \tiny 谢谢你的观看。$

---


# 题目信息

# [USACO04DEC] Tree Cutting S

## 题目描述

约翰意识到贝茜建设网络花费了他巨额的经费，就把她解雇了。贝茜很愤怒，打算狠狠报复。她打算破坏刚建成的约翰的网络。约翰的网络是树形的，连接着 $N$ 个牛棚。她打算切断某一个牛棚的电源，使和这个牛棚相连的所有电缆全部中断。之后，就会存在若干子网络。为保证破坏够大，每一个子网的牛棚数不得超过总牛棚数的一半，那哪些牛棚值得破坏呢？

## 说明/提示

$1\le N\le 10^4$。

## 样例 #1

### 输入

```
10
1 2
2 3
3 4
4 5
6 7
7 8
8 9
9 10
3 8```

### 输出

```
3
8
```

# AI分析结果

### 综合分析与结论
这些题解均围绕树的重心展开，目标是找出删除后各子树节点数不超总节点数一半的节点。常规做法是 $O(n^2)$ 的多次 DFS，而更优的做法是利用树的重心性质，通过一次 DFS 求解，时间复杂度为 $O(n)$。各题解思路相近，主要区别在于代码实现细节和对概念的阐述方式。

### 所选题解
- **作者：MoonCake2011 (赞：7)，4星**
    - **关键亮点**：思路清晰，直接点明利用树的重心性质，代码简洁，注释较少但不影响理解。
- **作者：Miku_QwQ (赞：4)，4星**
    - **关键亮点**：详细阐述了 $O(n^2)$ 和 $O(n)$ 两种做法，对树的重心概念解释清晰，代码有一定注释，便于理解。
- **作者：Huangjy88 (赞：1)，4星**
    - **关键亮点**：明确指出常规和优化做法，代码简洁，注释能帮助理解关键步骤。

### 重点代码
#### MoonCake2011 的核心代码
```cpp
void dfs(int x,int fa){
    siz[x]=1;
    for(int i=head[x];i;i=nxt[i]){
        if(to[i]==fa) continue;
        dfs(to[i],x);
        siz[x]+=siz[to[i]];
        dp[x]=max(dp[x],siz[to[i]]);
    }
    dp[x]=max(dp[x],n-siz[x]);
}
```
**核心思想**：通过 DFS 计算以每个节点为根的子树大小 `siz[x]`，并记录删除该节点后最大子树的大小 `dp[x]`。

#### Miku_QwQ 的核心代码
```cpp
void dfs(int u){//构建无根树
    vis[u]=true;
    for(int i=0;i<G[u].size();i++){
        if(!vis[G[u][i]]){
            Tree[u].push_back(G[u][i]);
            dfs(G[u][i]);
        }
    }
}
void DFS(int u){//预处理子树大小
    s[u]=1;
    for(int i=0;i<Tree[u].size();i++){
        DFS(Tree[u][i]);
        s[u]+=s[u];
    }
}
```
**核心思想**：先将无根树转换为有根树，再通过 DFS 预处理以每个节点为根的子树大小。

#### Huangjy88 的核心代码
```cpp
void dfs(int x,int fa){//dfs
    sz[x]=1;
    for(int i=0;i<v[x].size();i++){
        int y=v[x][i];
        if(y==fa) continue;
        dfs(y,x);
        sz[x]+=sz[y];
        mss[x]=max(mss[x],sz[y]);//子节点
    }
    mss[x]=max(mss[x],n-sz[x]);//父节点
}
```
**核心思想**：通过 DFS 计算以每个节点为根的子树大小 `sz[x]`，并记录删除该节点后最大子树的大小 `mss[x]`。

### 最优关键思路或技巧
利用树的重心性质，一次 DFS 计算以每个节点为根的子树大小，同时记录删除该节点后最大子树的大小，最后判断最大子树大小是否不超过总节点数的一半。

### 可拓展之处
同类型题或类似算法套路：树的直径、树的中心等问题，通常也可以通过 DFS 或 BFS 来解决。

### 推荐题目
- [P1395 会议](https://www.luogu.com.cn/problem/P1395)
- [P2986 [USACO10MAR]Great Cow Gathering G](https://www.luogu.com.cn/problem/P2986)
- [P3884 [JLOI2009]二叉树问题](https://www.luogu.com.cn/problem/P3884)

### 个人心得
- **Miku_QwQ**：提到这是第一篇题解，有错误请指出，还提到 $O(n^2)$ 做法吸氧能过但不是正解，体现了对不同做法的思考。 

---
处理用时：30.94秒
# 题目信息

# [USACO4.1] 麦香牛块Beef McNuggets

## 题目描述

农夫布朗的奶牛们正在进行斗争，因为它们听说麦当劳正在考虑引进一种新产品：麦香牛块。奶牛们正在想尽一切办法让这种可怕的设想泡汤。奶牛们进行斗争的策略之一是“劣质的包装”。“看，”奶牛们说，“如果你只用一次能装 $3$ 块、 $6$ 块或者 $10$ 块的三种包装盒包装麦香牛块，你就不可能满足一次只想买 $1$ 、 $2$ 、 $4$ 、 $5$ 、 $7$ 、 $8$ 、 $11$ 、 $14$ 或者 $17$ 块麦香牛块的顾客了。劣质的包装意味着劣质的产品。”。

你的任务是帮助这些奶牛。给出包装盒的种类数 $N(1 \le N \le 10)$ 和 $N$ 个代表不同种类包装盒容纳麦香牛块个数的正整数 $(1 \le i \le 256)$，输出顾客不能用上述包装盒（每种盒子数量无限）买到麦香牛块的最大块数。如果所有购买方案都能得到满足或者不存在不能买到块数的上限，则输出 $0$。不能买到的最大块数（倘它存在）不超过 $2\times 10^9$。

## 说明/提示

题目翻译来自 NOCOW。

USACO Training Section 4.1


## 样例 #1

### 输入

```
3

3

6

10```

### 输出

```
17```

# AI分析结果

### 综合分析与结论
这些题解主要围绕如何求解不能用给定包装盒组合买到麦香牛块的最大块数展开。大部分题解采用完全背包的思路，通过动态规划来判断每个数是否能被表示。不同题解的差异在于确定枚举范围的方法和对特殊情况（如不存在最大不能表示的数）的处理。

### 所选题解
- **作者：_rqy (赞：40)，5星**
    - **关键亮点**：思路严谨，对最大不能表示的数的上界进行了严格证明，为后续的背包计算提供了理论依据。
    - **个人心得**：指出许多题解直接使用类似小凯的疑惑结论的错误，强调结论使用的条件，体现了对问题深入思考的重要性。
- **作者：HigHwind (赞：25)，4星**
    - **关键亮点**：详细介绍了小凯的疑惑结论，并将其应用到本题中确定枚举范围，代码实现清晰，对特殊情况的处理有详细说明。
    - **个人心得**：提到洛谷数据刁钻，在确定枚举范围时需要考虑特殊数据，提醒我们在做题时要充分考虑数据的多样性。
- **作者：cabasky (赞：18)，4星**
    - **关键亮点**：提供了一种不同的思路，将问题转化为最短路模型，通过对能凑出的方案取模分组，求出每组的最小值，进而得到答案，拓宽了解题思路。
    - **个人心得**：无

### 重点代码及核心实现思想
#### _rqy 的题解
```cpp
// 证明最大不能表示的数的上界
// 设输入的所有数为 a_1…a_n
// 对于任意的 i = 0…a_1 - 1，存在一个数 f_i，使得 f_i ≡ i (mod a_1)，f_i 能被凑出来但是 f_i - a_1 不能
// 证明 p < a_1，从而得到 f_i ≤ (a_1 - 1) × max{a}
// 若 t 是不能凑出来的数，则 t ≤ f_{t mod a_1} - a_1 ≤ (a_1 - 1) × max{a} - a_1
// 然后进行背包计算
```
核心实现思想：先证明上界，再用背包计算上界以下所有数能否被凑出。

#### HigHwind 的题解
```cpp
#include <bits/stdc++.h>

#define LL unsigned long long
#define MAXLIM 65025 // = 256^2-2*256 + 1

using namespace std;
int f[MAXLIM + 1]; //f[i]存储整数i能否被表示
int i, j, n;
int a[11];
int main() 
{
    cin >> n;
    for (i = 1; i <= n; i++)
        cin >> a[i];
    f[0]=1;
    
    // 核心代码，背包处理
    for (i=1;i<=n;i++)
        for (j = a[i]; j <= MAXLIM; j++)
            f[j] = f[j] || f[j - a[i]];


    int ans = 0;                  //存结果用
    for (i = MAXLIM; i >= 0; i--) //找不能被表示的最大的数，倒找比顺找好
        if (f[i] == 0)
        {
            ans = i;
            break;
        }
    if (ans>65024)
        ans = 0;
    cout << ans << endl;
    
    return 0;
}
```
核心实现思想：利用小凯的疑惑结论确定枚举范围，通过完全背包判断每个数能否被表示，最后倒序查找最大不能表示的数。

#### cabasky 的题解
```cpp
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cstring>
using namespace std;
#define UPPER 2000000000
typedef long long LL;
LL dis[400],val[10000],a[20],mx=-1,mn=400;
int q[10000],head,tail,used[400],n,point[10000],yest[10000],last[400],total;
void adde(int f,int t,int v){
    point[++total]=t;
    val[total]=v;
    yest[total]=last[f];
    last[f]=total;
}
void spfa(int p){
    memset(dis,-1,sizeof(dis));
    dis[p]=0;
    used[p]=1;
    head=tail=1;
    q[1]=p;
    int f,t,v;
    while(head<=tail){
        f=q[head];
        for(int i=last[f];i;i=yest[i]){
            t=point[i];
            if(dis[t]==-1||dis[f]+val[i]<dis[t]){
                dis[t]=dis[f]+val[i];
                if(!used[t]){
                    used[t]=1;
                    q[++tail]=t;
                }
            }
        }
        used[f]=0;
        head++;
    }
}
int main(){
    scanf("%d",&n);
    for(int i=1;i<=n;i++){
        scanf("%d",&a[i]);
        if(mn>a[i]) mn=a[i];
    }
    for(int i=0;i<mn;i++)
        for(int j=1;j<=n;j++)
            adde(i,(i+a[j])%mn,a[j]);
    spfa(0);
    int flag=1;
    for(int i=0;i<mn;i++){
        if(dis[i]==-1||dis[i]-mn>UPPER){
            flag=0;
            break;
        }
        else{
            if(dis[i]>mx) mx=dis[i];
        }
    }
    if(!flag) puts("0");
    else{
        if(mx-mn>=0) printf("%lld\n",mx-mn);
        else puts("0");
    }
    return 0;
}
```
核心实现思想：将问题转化为最短路模型，把 0 到最小包装盒容量减 1 建立点，枚举每个包装盒，连边表示状态转移，从 0 开始跑单源最短路，根据最短路结果判断并输出答案。

### 最优关键思路或技巧
- **确定枚举范围**：利用数学结论（如小凯的疑惑）或严格证明来确定枚举的上界，避免不必要的计算。
- **完全背包思想**：通过动态规划判断每个数是否能被表示，是解决此类组合问题的常用方法。
- **问题转化**：如 cabasky 的题解将问题转化为最短路模型，为解题提供了新的思路。

### 可拓展之处
同类型题或类似算法套路：
- **硬币组合问题**：给定不同面值的硬币，求不能用这些硬币组合出的最小金额。
- **邮票组合问题**：给定不同面值的邮票，求不能用这些邮票组合出的最大邮资。

### 推荐题目
- [P1049 装箱问题](https://www.luogu.com.cn/problem/P1049)：考察完全背包的基本应用。
- [P2722 [USACO3.1]总分 Score Inflation](https://www.luogu.com.cn/problem/P2722)：完全背包的模板题。
- [P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)：完全背包的拓展应用。

### 个人心得总结
- 做题时要深入思考结论的使用条件，避免盲目套用。
- 要充分考虑数据的多样性，在确定枚举范围等关键步骤时要考虑特殊数据的影响。
- 当一种思路无法解决问题时，可以尝试将问题转化为其他模型，拓宽解题思路。

---
处理用时：57.58秒
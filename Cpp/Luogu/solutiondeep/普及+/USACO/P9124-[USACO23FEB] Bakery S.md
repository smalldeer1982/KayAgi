# 题目信息

# [USACO23FEB] Bakery S

## 题目描述

Bessie 开了一家面包店!

在她的面包店里，Bessie 有一个烤箱，可以在 $t_C$ 的时间内生产一块饼干或在 $t_M$ 单位时间内生产一块松糕。
$(1 \le t_C,t_M \le 10^9)$。由于空间限制，Bessie 一次只能生产一种糕点，所以要生产 $A$ 块饼干和 $B$ 块松饼，需要 $A\cdot t_C+B\cdot t_M$ 单位的时间。

Bessie的 $N (1\le N\le 100)$ 朋友都想一个一个地去面包店。第 $i$ 个朋友一进门就会点 $a_i(1 \le a_i \le 10^9)$ 块饼干和 $b_i(1 \le b_i \le 10^9)$ 块松饼。Bessie 没有空间来储存糕点，所以她只有在接到订单后才开始制作糕点。此外，Bessie 的朋友都很忙，所以第 $i$ 个朋友只愿意等 $c_i(a_i+b_i \le c_i \le 2 \cdot 10^{18})$ 个单位的时间，然后就伤心地离开。

Bessie 真的不希望她的朋友们伤心，她可以用一块钱升级她的烤箱，让它少花一个单位的时间来生产一块饼干或少花一个单位的时间来生产一个松饼。她不能将她的烤箱升级到花费小于等于 $0$ 的时间，但她可以选择在她的朋友到来之前将她的烤箱升级多少次，只要生产一块饼干和生产一个松饼所需的时间都严格保持为正数。

对于每一个 $T(1\le T\le 100)$ 的测试案例，请帮助 Bessie 找出她必须花费的最小的钱数量，以便她的面包店能够满足所有的朋友。

## 样例 #1

### 输入

```
2

3 7 9
4 3 18
2 4 19
1 1 6

5 7 3
5 9 45
5 2 31
6 4 28
4 1 8
5 2 22```

### 输出

```
11
6```

# AI分析结果

### 综合分析与结论
这些题解大多采用二分答案的思路来解决问题，核心在于将求解最小升级花费转化为判断某个升级总次数是否可行。难点在于对不等式的推导和分类讨论，以确定每种情况下升级次数的上下界。

### 所选题解
- **作者：MiPloRAs_3316（5星）**
    - **关键亮点**：思路清晰，详细推导不等式并分类讨论，代码注释详细，可读性高。
    - **核心代码**：
```cpp
bool check(long long x)
{
    long long maxx=min(tc-1,x);
    long long minn=max(0LL,x-tM+1);
    for(int i=1; i<=n; i++)
    {
        long long k=c[i]-a[i]*tc-b[i]*tM+b[i]*x;
        if(b[i]-a[i]==0)
        {   
            if(k<0) return false;
        }
        else if(b[i]-a[i]>0) maxx=min(maxx,(long long)floor(k*1.0/(b[i]-a[i])));
        else minn=max(minn,(long long)ceil(k*1.0/(b[i]-a[i])));
    }
    return maxx>=minn;
}
```
    - **核心实现思想**：通过二分答案确定升级总次数 `x`，在 `check` 函数中根据不等式分类讨论得出 `x` 的上下界，判断是否有解。
- **作者：_Spectator_（4星）**
    - **关键亮点**：思路明确，对二分答案和不等式分类讨论的解释清晰，代码简洁。
    - **核心代码**：
```cpp
bool ok(LL mid)
{
    LL ma=min(tc-1,mid),mi=max(0,mid-tm+1);
    for(int i=1;i<=n;i++)
    {
        LL t=b[i]-a[i],k=c[i]-a[i]*tc-b[i]*tm+b[i]*mid;
        if(t==0&&k<0)return false;
        if(t>0)ma=min(ma,(LL)floor(k*1.0/t));
        if(t<0)mi=max(mi,(LL)ceil(k*1.0/t));
    }
    return ma>=mi;
}
```
    - **核心实现思想**：二分升级总次数 `mid`，在 `ok` 函数中根据不等式确定 `x` 的上下界，判断是否有解。
- **作者：是青白呀（4星）**
    - **关键亮点**：详细推导不等式，考虑了制作时间为正整数的条件，代码注释较详细。
    - **核心代码**：
```cpp
bool check(int c)
{
    int minn=0,maxn;
    minn=max(minn,c-tM+1),maxn=min(c,tc-1);
    for(int i=1;i<=n;i++)
    {
        if(minn>maxn)return 0;
        int a=q[i].a,b=q[i].b;
        int m=tc*a+tM*b-q[i].t;
        if(m<=0)continue;
        if(a==b)
        {
            if(a*c<m)return 0;
        }
        int x=(m-b*c)/(a-b);
        if(a-b>0)
        {
            if((m-b*c)%(a-b)&&(m-b*c)/1.0/(a-b)>0)x++;
            if(x>maxn)return 0;
            minn=max(minn,x);
        }
        else
        {
            if((m-b*c)%(a-b)&&(m-b*c)/1.0/(a-b)<0)x--;
            if(x<minn)return 0;
            maxn=min(x,maxn);
        } 
    }
    return 1;
}
```
    - **核心实现思想**：二分减少的总时间 `c`，在 `check` 函数中根据不等式确定 `x` 的取值范围，判断是否存在满足所有不等式的整数 `x`。

### 最优关键思路或技巧
- **二分答案**：将求解最小升级花费问题转化为判断某个升级总次数是否可行，利用二分答案的思想降低时间复杂度。
- **不等式推导与分类讨论**：通过推导不等式并分类讨论，确定每种情况下升级次数的上下界，从而判断是否有解。

### 拓展思路
同类型题可考虑有多种资源，每种资源有不同消耗和限制，通过调整资源的使用效率来满足一定条件，求最小调整代价的问题。类似算法套路为二分答案结合不等式分析。

### 推荐题目
- P1873 [COCI 2011/2012 #5] EKO / 砍树
- P2678 [NOIP2015 提高组] 跳石头
- P3853 [TJOI2007] 路标设置

### 个人心得摘录与总结
- **DPseud**：提到二分套二分做法在大数据下会因单调性无法确定而失败，可考虑三分，提醒在选择算法时要注意单调性的判断。 

---
处理用时：30.00秒
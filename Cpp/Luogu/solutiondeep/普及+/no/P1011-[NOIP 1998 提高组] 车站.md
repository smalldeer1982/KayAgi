# 题目信息

# [NOIP 1998 提高组] 车站

## 题目描述

火车从始发站（称为第 $1$ 站）开出，在始发站上车的人数为 $a$，然后到达第 $2$ 站，在第 $2$ 站有人上、下车，但上、下车的人数相同，因此在第 $2$ 站开出时（即在到达第 $3$ 站之前）车上的人数保持为 $a$ 人。从第 $3$ 站起（包括第 $3$ 站）上、下车的人数有一定规律：上车的人数都是前两站上车人数之和，而下车人数等于上一站上车人数，一直到终点站的前一站（第 $n-1$ 站），都满足此规律。现给出的条件是：共有 $n$ 个车站，始发站上车的人数为 $a$，最后一站下车的人数是 $m$（全部下车）。试问 $x$ 站开出时车上的人数是多少？


## 说明/提示

对于全部的测试点，保证 $1 \leq a \leq 20$，$1 \leq x \leq n \leq 20$，$1 \leq m \leq 2 \times 10^4$。

NOIP1998 提高组 第一题

## 样例 #1

### 输入

```
5 7 32 4
```

### 输出

```
13
```

# AI分析结果



**算法分类**: 数学

---

### 综合分析与结论
题目核心在于发现上下车人数的斐波那契规律，通过数学建模将问题转化为求解第二站上车人数的系数，最终通过联立方程求解。题解主要分为两类：
1. **数学推导**：通过斐波那契数列建模，建立关于未知数的方程（如朱江黄河、xiejinhao 的解法），时间复杂度 O(n)，效率高。
2. **暴力枚举**：枚举第二站上车人数，模拟每站上下车过程验证结果（如昊蒻、lcx64579 的解法），数据范围小（n≤20）时可行。

---

### 高星题解推荐

#### 1. 作者：xiejinhao（★★★★★）
**关键亮点**：
- 通过详细表格推导各站人数变化规律，发现 a 和 u 的系数呈斐波那契数列。
- 分离变量建立方程组，通过前 n-1 站的总人数联立求解 u。
- 完整处理边界条件（n≤5 的特判），代码鲁棒性强。
**核心代码**：
```cpp
int p = 1, q = 0, k = 0, sum1 = 0;
for(int i = 1; i <= n - 5; i++) { // 计算 a 的系数
    k = p + q;
    sum1 += k;
    p = q;
    q = k;
}
int s1 = sum1 + 2; // 最终 a 的总系数
// 类似方法计算 u 的系数...
int S = (m - s1 * a) / s2; // 解方程求 u
```

#### 2. 作者：Jack2015633（★★★★★）
**关键亮点**：
- 通过表格明确展示各站上下车人数的斐波那契规律。
- 直接推导出通项公式 `num[x] = (f[x-2]+1)*a + (f[x-1]-1)*b`，代码极简。
**核心公式**：
```cpp
b = (m - (f[n-3] + 1)*a) / (f[n-2] - 1); // 解出第二站上车人数
ans = (f[x-2] + 1)*a + (f[x-1] - 1)*b; // 代入公式求答案
```

#### 3. 作者：朱江黄河（★★★★☆）
**关键亮点**：
- 代码最简（仅 10 行），直接利用斐波那契数列性质。
- 通过预处理斐波那契数组，快速计算系数。
**核心代码**：
```cpp
int f[20] = {0,1};
for(int i=2; i<n; i++) f[i] = f[i-1]+f[i-2];
int b = (m - (f[n-3]+1)*a) / (f[n-2]-1); // 解方程求 b
printf("%d", (f[x-2]+1)*a + (f[x-1]-1)*b);
```

---

### 最优关键思路
1. **斐波那契建模**：从第三站开始，上下车人数系数满足斐波那契数列。
2. **分离变量解方程**：将总人数拆分为 a 和 b（第二站上车人数）的线性组合，联立最后一站人数方程求解。
3. **通项公式代入**：直接利用斐波那契数列预处理结果，快速计算任意站的人数。

---

### 拓展与举一反三
- **类似题目**：P1255（数楼梯，斐波那契应用）、P1028（数的计算，递推）、P1192（台阶问题，递推+模运算）。
- **思维训练**：遇到递推问题时，尝试通过前几项寻找规律（如斐波那契、等差/等比数列），建立数学模型。

---

### 个人心得摘录
- **xiejinhao**：  
  *"观察发现上车人数的系数排列为斐波那契数列，将 a 和 u 分开处理是关键。"*
- **昊蒻**：  
  *"数据规模小，直接暴力枚举第二站上车人数即可，无需复杂推导。"*
- **朱江黄河**：  
  *"最后一站下车人数等于倒数第二站车上人数，联立方程即可解出未知数。"*

---
处理用时：66.43秒
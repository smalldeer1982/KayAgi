# 题目信息

# [NOIP 1999 提高组] 旅行家的预算

## 题目描述

一个旅行家想驾驶汽车以最少的费用从一个城市到另一个城市（假设出发时油箱是空的）。给定两个城市之间的距离 $D_1$、汽车油箱的容量 $C$（以升为单位）、每升汽油能行驶的距离 $D_2$、出发点每升汽油价格$P$和沿途油站数 $N$（$N$ 可以为零），油站 $i$ 离出发点的距离 $D_i$、每升汽油价格 $P_i$（$i=1,2,…,N$）。计算结果四舍五入至小数点后两位。如果无法到达目的地，则输出 `No Solution`。


## 说明/提示

$N \le 6$，其余数字 $ \le 500$。

NOIP1999 普及组第三题、提高组第三题

## 样例 #1

### 输入

```
275.6 11.9 27.4 2.8 2
102.0 2.9
220.0 2.2
```

### 输出

```
26.95
```

# AI分析结果



### 算法分类
**贪心**

### 综合分析与结论
本题核心在于如何在每个加油站决策加油量以最小化总费用。所有题解均围绕贪心策略展开，差异在于具体实现方式。最优思路为：在当前加油站能到达的范围内优先选择更低油价的站点，若无则加满油前往最远可达的站点，并维护油量选择的最优性。

---

### 精选题解与亮点

#### 1. 题解作者：Twilight_（★★★★☆）
**关键亮点**：
- 明确分情况讨论：优先找更低价加油站，否则加满油找最远可达站点。
- 模拟过程清晰，处理边界条件完整（如无法到达终点时的判断）。
- 代码逻辑分层，易于理解核心贪心逻辑。

**核心代码思路**：
```cpp
int move(int now) {
    // 在可达范围内找比当前油价低的加油站
    for (int i = now+1; i<=n && ... ; i++) {
        if (油价更低) 加刚好到该站的油；
    }
    // 若无更低价，加满油找最远可达站点
    if (无法到达任意站) 输出无解；
    else 加满油并更新剩余油量；
}
```

#### 2. 题解作者：hongzy（★★★★☆）
**关键亮点**：
- 使用单调队列维护当前油箱中的油，保证每次消耗最便宜的油。
- 动态替换高价油为低价油，实现费用最小化。
- 代码简洁高效，利用队列特性优化决策。

**核心代码片段**：
```cpp
priority_queue<oil> pq; // 按油价排序的小根堆
while (消耗油量时) {
    oil = pq.top(); // 取最便宜的油
    if (用完该批次油) pq.pop();
    else 更新剩余油量；
}
// 到达新站时替换高价油
while (!pq.empty() && 新油价 < 队尾油价) {
    pq.pop(); // 退掉高价油
}
pq.push(当前油价及油量);
```

#### 3. 题解作者：dingcx（★★★★☆）
**关键亮点**：
- 采用“加油即加满，后续退油”策略，简化决策过程。
- 通过维护油箱中油的种类和数量，确保始终使用最低价油。
- 代码中巧妙处理油的替换逻辑，减少计算复杂度。

**核心实现**：
```cpp
struct OIL { double cost, x; }; // 油的价格和剩余量
deque<OIL> dq; // 双端队列维护油量
// 消耗油时从队首取最便宜的油
void use(double d) {
    while (d > 0) {
        OIL front = dq.front();
        double used = min(d, front.x * d2);
        cost += used * front.cost;
        d -= used;
        if (front.x > used) dq.front().x -= used;
        else dq.pop_front();
    }
}
```

---

### 关键思路总结
1. **优先低价油**：在可达范围内选择第一个比当前油价低的加油站，加刚好到达所需的油。
2. **无法低价时加满**：若无低价站，则加满油前往可达范围内油价最低的站点，减少后续高价油使用。
3. **动态油量管理**：通过队列或栈维护当前油量，确保每次消耗最便宜的油，并在新站点替换高价油。

---

### 相似题目推荐
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心选择最小代价合并，优先队列应用。
2. [P2859 [USACO06FEB] Stall Reservations](https://www.luogu.com.cn/problem/P2859) - 区间贪心与资源分配。
3. [P5019 铺设道路](https://www.luogu.com.cn/problem/P5019) - 贪心策略处理区间覆盖问题。

---
处理用时：61.06秒
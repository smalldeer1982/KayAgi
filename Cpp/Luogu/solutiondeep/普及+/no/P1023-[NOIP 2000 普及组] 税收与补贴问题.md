# 题目信息

# [NOIP 2000 普及组] 税收与补贴问题

## 题目背景

每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）


## 题目描述

你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。

- 总利润 $=$ 单位商品利润 $\times$ 销量
- 单位商品利润 $=$ 单位商品价格 $-$ 单位商品成本（减去税金 或者 加上补贴）


## 说明/提示

### 数据范围及约定

保证输入的所有数字均小于 $10^5$。

### 样例解释（2023/6/22 更新）

如下图所示是输入样例所对应的价格变化图，横轴表示销售价格，纵轴表示销量。

![](https://cdn.luogu.com.cn/upload/image_hosting/21mhtm5i.png)

根据题意，$28$ 元是商品的成本。销售价格不应该低于 $28$ 元；当销售价格大于给出的价格的最大值 $31$ 元后，按照售价每提高一元，销量降低 $15$ 计算，例如当售价为 $33$ 元时，销量为 $110-15\times (33-31)=80$。在给出来的价位之间，销量呈线性变化。

当政府给该商品补贴 $4$ 元后，企业将该商品定价为 $31$ 元时，取得的利润为 $31-28+4=7$ 元，销量为 $110$ 件，总利润为 $7\times 110=770$ 元，是企业在所有定价下能够取得的最大的总利润。此时企业的售价为政府的期望售价，因此是一个合法方案。

## 样例 #1

### 输入

```
31
28 130
30 120
31 110
-1  -1
15```

### 输出

```
4
```

# AI分析结果



### 算法分类
模拟

### 综合分析与结论
该题需构建完整价格-销量模型后，通过调整补贴/税收使目标价利润最高。各解法核心在于正确补全线性销量数据，并通过枚举或数学方法找出最小调控值。最优解法应兼顾数据建模与高效搜索。

### 精选题解

1. **Mitch谜团（4.5星）**
   - **亮点**：完整处理线性插值与销量递减，暴力枚举逻辑清晰，适合快速理解题意。
   - **代码核心**：
     ```cpp
     // 补全中间价格销量
     for(j=a[i-1][1]+1;j<=temp;j++) {
         a[i][1]=j;
         a[i][2]=a[i-1][2]-cha;
     }
     // 枚举补贴/税收
     for(j=1;j<=10000;j++) {
         for(k=1;k<=i;k++) num=(a[k][1]-a[1][1]+j)*a[k][2];
         if(price==expect) return 0;
     }
     ```

2. **Ofnoname（4星）**
   - **亮点**：数学推导解不等式确定解区间，效率更高。
   - **关键公式**：
     ```cpp
     double ans = (d[x]*(x-r) - d[i]*(i-r))*1.0/(d[i]-d[x]);
     if(g>0) Max=min(Max,ans); // 维护解区间上下界
     ```

3. **dodo（4星）**
   - **亮点**：利用单调性二分搜索，时间复杂度最优。
   - **核心逻辑**：
     ```cpp
     while(minganyu <= maxganyu) {
         // 计算当前补贴下的最大利润位置
         if(priceformax < yuqijia) // 调整搜索区间
     }
     ```

### 关键技巧总结
1. **数据建模**：正确处理线性插值（相邻价格间销量等差）和超高价递减规则。
2. **利润计算**：单位利润 = (售价-成本±调控) × 销量，需遍历所有可能售价。
3. **优化策略**：利用补贴/税收与最大利润价的单调性，采用二分加速搜索。

### 类似题目推荐
1. [P1024 外星人的密码数字](https://www.luogu.com.cn/problem/P1024)（线性模型+枚举）
2. [P2678 跳石头](https://www.luogu.com.cn/problem/P2678)（二分答案+条件验证）
3. [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)（模型构建+最优化决策）

---
处理用时：57.29秒
# 题目信息

# [NOIP 2003 提高组] 侦探推理

## 题目描述

明明同学最近迷上了侦探漫画《柯南》并沉醉于推理游戏之中，于是他召集了一群同学玩推理游戏。游戏的内容是这样的，明明的同学们先商量好由其中的一个人充当罪犯（在明明不知情的情况下），明明的任务就是找出这个罪犯。接着，明明逐个询问每一个同学，被询问者可能会说：

$$
\def\arraystretch{1.5}
\begin{array}{|l|l|}\hline
\textbf{\textsf{证词内容}} & \textbf{\textsf{证词含义}}\\\hline
\text{I am guilty.} & \text{我是罪犯。} \\\hline
\text{I am not guilty.} & \text{我不是罪犯。} \\\hline
\text{{\tt XXX} is guilty.} & \text{{\tt XXX} 是罪犯。其中 {\tt XXX} 表示某个同学的名字。} \\\hline
\text{{\tt XXX} is not guilty.} & \text{{\tt XXX} 不是罪犯。} \\\hline
\text{Today is {\tt XXX}.} &
\begin{aligned}
&\text{今天是 {\tt XXX}。其中 {\tt XXX} 表示某个星期的单词。}\\
&\text{星期只有可能是以下之一：}\\
&\texttt{Monday}, \texttt{Tuesday}, \texttt{Wednesday}, \texttt{Thursday}, \\
&\texttt{Friday}, \texttt{Saturday}, \texttt{Sunday}。
\end{aligned}
\\\hline
\end{array}$$

证词中出现的其他话，都不列入逻辑推理的内容。


明明所知道的是，他的同学中有 $N$ 个人始终说假话，其余的人始终说真。


现在，明明需要你帮助他从他同学的话中推断出谁是真正的凶手，请记住，凶手只有一个！



## 说明/提示

对于 $100\%$ 数据，满足 $1\le M\le 20$，$0\le N\le M$，$1\le P\le 100$。

**【题目来源】**

NOIP 2003 提高组第二题

## 样例 #1

### 输入

```
3 1 5
MIKE
CHARLES
KATE
MIKE: I am guilty.
MIKE: Today is Sunday.
CHARLES: MIKE is guilty.
KATE: I am guilty.
KATE: How are you??
```

### 输出

```
MIKE
```

# AI分析结果



### 算法分类
**枚举 + 模拟**

---

### 题解综合分析
题目需要通过枚举可能的罪犯和日期，结合证词的真假性进行验证。关键难点在于证词类型的多样处理、状态冲突判断及说谎人数的动态统计。题解多采用双重枚举（罪犯+日期）框架，配合状态标记数组进行矛盾检测。

---

### 精选题解

#### 1. Drifterming 题解（⭐⭐⭐⭐⭐）
**关键亮点**：
- 使用结构体存储证词信息，清晰分类证词类型
- 通过`TF[]`数组动态标记说话人真假状态
- 分离证词类型判断函数，逻辑模块化
- 处理了未说话者可能说谎的边界情况

**核心实现**：
```cpp
void judge(int id, string day) {
    memset(TF, -1, sizeof(TF)); // 初始化状态
    T = F = 0;
    for (int i = 1; i <= p; ++i) {
        // 处理各类型证词真值
        if (证词类型1) 判断id是否匹配;
        else if (证词类型2) 判断日期是否匹配;
        // 更新TF数组并统计说谎人数
        if (冲突) return;
    }
    // 统计未说话者说谎可能性
    if (总说谎人数符合条件) 记录答案;
}
```

#### 2. wjyyy 题解（⭐⭐⭐⭐）
**关键亮点**：
- 预处理证词类型到结构体，减少重复判断
- 使用`vector`存储每人证词，便于遍历
- 通过`peopleIsGuilty`数组记录罪犯可能性
- 按日期类型与罪犯类型双重判断矛盾

**调试心得**：
> "注意证词结尾的`.`符号，如'I am guilty.'必须严格匹配，否则会被过滤为无效证词。此外，Linux与Windows换行符差异需特殊处理。"

---

### 关键思路总结
**核心技巧**：
1. **双重枚举**：遍历所有可能的罪犯（1~M）和日期（周一到周日）
2. **状态标记**：用数组记录每个人说真/假话的状态，动态更新
3. **证词分类处理**：将证词分为5类（自述、指控他人、日期等），分别验证真伪
4. **弹性说谎人数**：允许未提及证词者补充说谎名额，通过区间判断`[当前谎者数, 当前+未确定]`

---

### 拓展训练
1. **P1038 神经网络**（模拟信号传播）  
2. **P3956 棋盘**（路径决策+状态验证）  
3. **P1003 铺地毯**（逆向枚举判断覆盖）

---

### 相似题目推荐
1. [P1038 神经网络](https://www.luogu.com.cn/problem/P1038)  
2. [P3956 棋盘](https://www.luogu.com.cn/problem/P3956)  
3. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)

---
处理用时：52.93秒
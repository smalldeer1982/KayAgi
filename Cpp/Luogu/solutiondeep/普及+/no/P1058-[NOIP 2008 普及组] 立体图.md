# 题目信息

# [NOIP 2008 普及组] 立体图

## 题目描述

小渊是个聪明的孩子，他经常会给周围的小朋友们讲些自己认为有趣的内容。最近，他准备给小朋友们讲解立体图，请你帮他画出立体图。

小渊有一块面积为 $m \times n$ 的矩形区域，上面有 $m \times n$ 个边长为 $1$ 的格子，每个格子上堆了一些同样大小的积木（积木的长宽高都是 $1$），小渊想请你打印出这些格子的立体图。我们定义每个积木为如下格式，并且不会做任何翻转旋转，只会严格以这一种形式摆放：

$$
\def\arraystretch{1e-10}
\begin{aligned}
&\verb!  +---+!\\
&\verb! /   /|!\\
&\verb!+---+ |!\quad\textsf{高}\\
&\verb!|   | +!\\
&\verb!|   |/ !\quad\textsf{宽}\\
&\verb!+---+  !\\
& \quad\textsf{长}
\end{aligned}$$


每个顶点用 $1$ 个加号 `+` 表示，长用 $3$ 个 `-` 表示，宽用 $1$ 个 `/`，高用两个 `|` 表示。字符 `+`，`-`，`/`，`|` 的 ASCII 码分别为 $43$，$45$，$47$，$124$。字符 `.`（ASCII 码 $46$）需要作为背景输出，即立体图里的空白部分需要用 `.` 来代替。立体图的画法如下面的规则：

若两块积木左右相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+---+!\\
\verb!./   /   /|!\\
\verb!+---+---+ |!\\
\verb!|   |   | +!\\
\verb!|   |   |/.!\\
\verb!+---+---+..!\\
\end{aligned}
$$

若两块积木上下相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+!\\
\verb!./   /|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/.!\\
\verb!+---+..!\\
\end{aligned}
$$

若两块积木前后相邻，图示为：

$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!....+---+!\\
\verb!.../   /|!\\
\verb!..+---+ |!\\
\verb!./   /| +!\\
\verb!+---+ |/.!\\
\verb!|   | +..!\\
\verb!|   |/...!\\
\verb!+---+....!\\
\end{aligned}
$$

立体图中，定义位于第 $(m,1)$ 的格子（即第 $m$ 行第 $1$ 列的格子）上面自底向上的第一块积木（即最下面的一块积木）的左下角顶点为整张图最左下角的点。


## 说明/提示

NOIP2008普及组第四题


## 样例 #1

### 输入

```
3 4
2 2 1 2
2 2 1 1
3 2 1 2
```

### 输出

```
......+---+---+...+---+
..+---+  /   /|../   /|
./   /|-+---+ |.+---+ |
+---+ |/   /| +-|   | +
|   | +---+ |/+---+ |/|
|   |/   /| +/   /|-+ |
+---+---+ |/+---+ |/| +
|   |   | +-|   | + |/.
|   |   |/  |   |/| +..
+---+---+---+---+ |/...
|   |   |   |   | +....
|   |   |   |   |/.....
+---+---+---+---+......```

# AI分析结果



**算法分类**: 模拟

**分析与结论**  
本题核心在于三维坐标到二维画布的映射及覆盖顺序控制。各题解均采用模拟思路，通过预存单个立方体模板，按特定顺序绘制到二维数组。关键差异在于坐标转换逻辑和覆盖顺序的处理方式。

---

**高星题解推荐**  
1. **ZUTTER_ (5星)**  
   - 亮点：清晰的覆盖顺序控制（后→前、下→上、左→右），简洁的坐标计算，通过记录最大行列优化输出范围。  
   - 关键代码：  
     ```cpp
     void fg(int x,int y) {
         for(int i=5;i>=0;i--) // 倒序存入数组
             for(int j=z[i];j<=s[i];j++) {
                 c[5-i+x][j+y]=c1[i][j];
                 if(5-i+x>maxx) maxx=5-i+x; // 更新边界
             }
     }
     ```

2. **Sino_E (4星)**  
   - 亮点：坐标系转换思路清晰，显式公式化坐标计算，三维投影到二维平面逻辑严谨。  
   - 关键代码：  
     ```cpp
     void mdraw(int x,int y) {
         // 绘制三个面（正面、顶面、侧面）
         mz[x][y+3]=mz[x][y]=mz[x+4][y]='+'; 
         for(int i=x+1;i<x+4;i++) mz[i][y]='-'; // 绘制正面横线
     }
     ```

3. **HasNoName (4星)**  
   - 亮点：引入"重力常数"处理悬空方块，通过动态更新边界避免多余空白。  
   - 调试心得：  
     > "发现最高对齐会导致上方留空，通过循环去除顶部无效行解决。"

---

**最优技巧提炼**  
- **坐标转换公式**：左下角坐标为 `(2*(n-i)+4*k, 3*h)`，其中 `i` 为原矩阵行，`k` 为列，`h` 为高度。  
- **覆盖顺序**：按后→前、左→右、下→上顺序绘制，确保正确遮挡。  
- **模板预存**：将单个立方体图形预存为字符数组，直接覆盖到画布。

---

**拓展建议**  
类似题型可练习：  
1. [P1495 方伯伯的玉米田](https://www.luogu.com.cn/problem/P1495) - 二维坐标系模拟  
2. [P1321 单词覆盖](https://www.luogu.com.cn/problem/P1321) - 字符串覆盖模拟  
3. [P1097 立体图（原题加强版）](https://www.luogu.com.cn/problem/P1097) - 更高复杂度下的优化

---
处理用时：45.44秒
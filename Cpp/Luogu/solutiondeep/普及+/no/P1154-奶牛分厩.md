# 题目信息

# 奶牛分厩

## 题目描述

农夫约翰有 $N(1 \le N \le 5000)$ 头奶牛，每头奶牛都有一个唯一的不同于其它奶牛的编号 $s_i$，所有的奶牛都睡在一个有 $K$ 个厩的谷仓中，厩的编号为 $0$ 到 $K-1$。每头奶牛都知道自己该睡在哪一个厩中，因为约翰教会了它们做除法，$S_i  \bmod  K$ 的值就是第 $i$ 头奶年所睡的厩的编号。

给出一组奶牛的编号，确定最小的 $K$ 使得没有二头或二头以上的奶牛睡在同一厩中。


## 说明/提示

$S_i(1\le S_i \le 1000000)$


## 样例 #1

### 输入

```
5 
4 
6 
9 
10 
13 
```

### 输出

```
8```

# AI分析结果



### 算法分类
**数学**

### 综合分析与结论
题目本质是**寻找最小的K，使得所有奶牛编号对K取模结果唯一**。核心思路基于数论中的同余定理：若两数模K同余，则K必为其差的因数。通过预处理所有差值，标记其存在性后，枚举可能的K并检查其倍数是否被标记，从而找到满足条件的最小K。

---

### 精选题解

#### 1. Makasukaka（★★★★★）
**关键亮点**：  
- **预处理差值+倍数筛法**：用调和级数性质优化时间复杂度至O(n² + s logs)
- **代码简洁高效**：利用vis数组标记差值，通过倍数遍历快速判断K的合法性
- **纠正他人错误**：明确强调需排除所有因数而非仅差值本身

**核心代码思想**：  
```cpp
// 预处理差值
for(int i=1;i<=n;++i) for(int j=i+1;j<=n;++j) 
    vis[abs(a[i]-a[j])] = 1;

// 枚举K并检查倍数
for(int i=n; i<K; ++i) {
    if(!vis[i]) {
        int valid = 1;
        for(int j=i; j<K; j+=i) 
            if(vis[j]) { valid=0; break; }
        if(valid) return i;
    }
}
```

#### 2. 陈见澍（★★★★）
**关键亮点**：  
- **对比思路演进**：从暴力分解因数（TLE）到优化筛法（AC）
- **明确理论推导**：详细证明同余定理与K的关系
- **代码可读性强**：使用d数组标记差值，通过倍数遍历判断

**个人心得**：  
> “正面暴力超时，必须反向筛法。理解差值的因数关系是关键。”

**核心代码思想**：  
```cpp
// 标记所有差值
for(int i=1;i<=n;++i) for(int j=i+1;j<=n;++j) 
    d[abs(a[i]-a[j])] = 1;

// 枚举K检查倍数
for(int i=1; i<MAX; ++i) {
    bool valid = true;
    for(int j=i; j<MAX; j+=i) 
        if(d[j]) { valid=false; break; }
    if(valid) return i;
}
```

#### 3. Jelly_Goat（★★★★）
**关键亮点**：  
- **bitset压缩空间**：用bitset标记差值减少内存占用
- **逆向思维清晰**：从“排除所有因数的倍数”角度解释
- **幽默引导理解**：将问题类比为寻找Hash因子

**核心代码思想**：  
```cpp
// 标记差值
bitset<1000001> vst;
for(int i=1; i<=n; ++i) for(int j=i+1; j<=n; ++j)
    vst[abs(s[i]-s[j])] = 1;

// 检查K的倍数
bool judge(int k) {
    for(int i=1; i*k <= maxn; ++i) 
        if(vst[i*k]) return false;
    return true;
}
```

---

### 最优关键思路
1. **预处理差值**：计算所有奶牛编号的绝对差并标记。
2. **倍数筛法判断**：从n开始枚举K，若K的所有倍数均未被标记，则为合法解。
3. **调和级数优化**：通过遍历倍数而非分解因数，将时间复杂度优化至O(s logs)。

---

### 拓展思路
- **同余类问题**：如[P2424 约数和](https://www.luogu.com.cn/problem/P2424)需类似因数分析。
- **Hash冲突问题**：如设计哈希函数避免冲突，与本题思路高度相似。
- **筛法应用**：如质数筛、因数分解筛等均可借鉴此处的倍数遍历技巧。

---

### 推荐习题
1. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)（因数分解基础）
2. [P1463 反素数](https://www.luogu.com.cn/problem/P1463)（因数性质与筛法）
3. [P2568 GCD](https://www.luogu.com.cn/problem/P2568)（数论与筛法结合）

---
处理用时：74.18秒
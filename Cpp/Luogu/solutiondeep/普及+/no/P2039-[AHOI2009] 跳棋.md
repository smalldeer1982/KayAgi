# 题目信息

# [AHOI2009] 跳棋

## 题目描述

在一个 $1$ 行 $N$ 列（$N$ 是奇数）的棋盘上，有 $K$ 个格子是红色的。这种情况下，你有一个跳棋在最左端的格子上。你的目标是将它移动到最右边的格子，在开始移动之间，你可以在棋盘的任意空位上放棋子。在游戏开始后 你只可以随时在一个红色格子上放棋子。棋子的移动规则是：每次只可以选择一个棋子，跳过与之相邻的棋子走到后面的空格上，被它跳过的棋子被吃掉，即从棋盘上移走，如相邻棋子的另一侧有棋子，则不能跳。


请回答以下两个问题：

1. 移动开始前至少要放多少棋子才能完成任务。
2. 如果要使开始前放的棋子数要求尽量少，那么在移动过程中最少需要放多少个棋子才能完成任务。


关于规则的补充说明：

1. 只能往空位上放棋子，不管是移动开始前还是移动过程中。
2. 移动前棋盘最左端的那个原始棋子绝对不能被吃掉。


## 说明/提示

在游戏开始前，可以在第二个格子上放上一个棋子，游戏开始后可用最左边的棋子吃掉它，从而移动到第三格。然后由于第四格是个红色的格子，在游戏中可以在那放一个棋子，然后用已经移动第三格的棋子把它吃掉，从而达到终点。

$100\%$ 的数据中，$1\le N\le  1000$，输出中的数字不超过 $10^ {15}$。

$30\%$ 的数据中，$N\le 20$。


Source: [Ahoi2009] checker


## 样例 #1

### 输入

```
5
0 0 0 1 0

```

### 输出

```
1
1```

# AI分析结果



### 算法分类
动态规划

### 题解综合分析
题目核心是计算初始放置棋子的最小数量及移动过程中需补充的棋子数。题解普遍采用动态规划，核心思路分为两种情况处理：
1. **无相邻红格**：直接统计偶数位白格数量（需初始放置）与红格数量（游戏阶段放置）。
2. **存在相邻红格**：通过动态规划计算每个位置的最小生成代价，利用红格作为跳板递推。

### 高星题解推荐
#### 1. 作者：long_int (★★★★☆)
**关键亮点**：  
- 明确分类讨论两种场景，清晰解释状态转移逻辑。  
- 代码中处理初始红点无效化（起点红点设为白点），避免误判。  
- 动态规划采用双向更新（左右跳跃），确保覆盖所有可能路径。

**核心代码**：
```cpp
for (int j = i - 2; j >= 1; j--)
    dp[j] = min(dp[j], dp[j + 1] + dp[j + 2]); // 向左跳
for (int j = i + 1; j <= n; j++)
    dp[j] = min(dp[j], dp[j - 1] + dp[j - 2]); // 向右跳
```
**个人心得**：  
- 初始化时需将 `INF` 设为 `1e18`，否则大数会溢出导致错误。

#### 2. 作者：Sooke (★★★★☆)
**关键亮点**：  
- 简明扼要地推导状态转移方程，强调红格的跳板作用。  
- 代码中显式处理边界条件，避免冗余计算。  
- 采用 `1e18` 表示不可达状态，避免数值溢出。

**核心代码**：
```cpp
for (int j = i - 2; j >= 1; j--)
    f[j] = std::min(f[j], f[j + 1] + f[j + 2]); // 左向更新
for (int j = i + 1; j <= n; j++)
    f[j] = std::min(f[j], f[j - 1] + f[j - 2]); // 右向更新
```

### 最优思路总结
1. **关键技巧**：利用相邻红格作为跳板，通过动态规划双向更新（左跳与右跳）最小生成代价。
2. **状态转移**：每个位置的最小代价由相邻两位置的代价之和决定，即 `dp[i] = min(dp[i+1]+dp[i+2], dp[i-1]+dp[i-2])`。
3. **初始化**：红格初始代价为1（可直接放置），白格初始为极大值（需通过跳跃生成）。

### 拓展与举一反三
- **类似题目**：  
  - [P1095 守望者的逃离](https://www.luogu.com.cn/problem/P1095)：动态规划处理移动与跳跃的混合策略。  
  - [P1052 过河](https://www.luogu.com.cn/problem/P1052)：离散化与动态规划结合，处理跳跃路径压缩。  
  - [P1944 最长括号匹配](https://www.luogu.com.cn/problem/P1944)：利用动态规划处理序列匹配问题，状态转移涉及左右边界。

---
处理用时：38.49秒
# 题目信息

# SAC#1 - Hello World（升级版）

## 题目背景

#T1答案要mod1000000007(10^9+7)，请重新提交，非常抱歉！

一天，智障的pipapi正在看某辣鸡讲义学程序设计。


## 题目描述

在讲义的某一面，他看见了一篇文章。这篇文章由英文字母（大小写均有）、数字、和空白字符（制表/空格/回车）构成。

pipapi想起了他最近刚刚学会写的Hello World程序。他非常好奇，这篇文章中，“HelloWorld”作为子序列到底出现过多少次呢？

由于papapi是个智障，大小写对于他而言毫无区别；因此，“hEllOWorLD”这样的子序列也是可以接受的。O和W之间的空格是也是可以少的；也就是说，“HelloWorld”是可以的。根据标程的意思，就是没有空格，不用考虑空格的情况。

两个子序列相同当且仅当它们每一个字符所在的位置都相同。


由于答案可能很大，请输出结果对1000000007(10^9+7)的余数。


## 说明/提示

记n为输入的文章的长度（字符数）。

对于20%的数据，n <= 20。

对于50%的数据，n <= 500。

对于所有的数据，15 <= n <= 500000。


## 样例 #1

### 输入

```
HhEeLlLlOoWwOoRrLlDd```

### 输出

```
1536```

## 样例 #2

### 输入

```
Gou Li Guo Jia Sheng Si Yi
Qi Yin Huo Fu Bi Qu Zhi
River can feed people
Also can race boats
Hall Ellen Ok Words locked ```

### 输出

```
273```

# AI分析结果



**算法分类**：动态规划

**综合分析**：  
题目要求统计忽略大小写的“helloworld”子序列出现次数。所有题解均采用动态规划思路，核心在于维护一维状态数组，通过逆序更新避免重复计算。关键难点在于处理模板串中重复字符（如'l'、'o'）时的状态覆盖问题。

---

**精选题解与评分**：  
1. **Mr_QwQ 的题解（★★★★★）**  
   **关键亮点**：  
   - 使用一维滚动数组，空间复杂度优化至 O(1)。  
   - 逆序更新状态，避免重复字符导致的多重计数问题。  
   - 代码简洁，直接处理输入流，无需预处理字符串。  
   **核心代码**：  
   ```cpp
   long long dp[11] = {1};
   char c, hello[20] = "?helloworld";
   while ((c = getchar()) != EOF) {
       for (int i = 10; i >= 1; i--)
           if (c == hello[i] || c + 32 == hello[i])
               dp[i] = (dp[i - 1] + dp[i]) % mod;
   }
   ```

2. **xh001 的题解（★★★★☆）**  
   **关键亮点**：  
   - 详细注释重复字符处理顺序的重要性（如先更新 `f[9]` 再 `f[4]`）。  
   - 显式初始化 `f[0]=1`，逻辑清晰。  
   **核心代码**：  
   ```cpp
   if (c == 'l') {
       f[9] += f[8];  // 先处理高位，避免覆盖
       f[4] += f[3];
       f[3] += f[2];
   }
   ```

3. **Rumia 的题解（★★★★☆）**  
   **关键亮点**：  
   - 使用滚动数组优化为单层循环，代码紧凑。  
   - 通过在线处理字符避免存储整个字符串，节省内存。  
   **核心代码**：  
   ```cpp
   char b[12] = "-helloworld";
   while (cin >> a[++n]) {
       a[n] = tolower(a[n]);
       for (int j = 10; j >= 2; j--)
           if (a[n] == b[j]) f[j] = (f[j] + f[j-1]) % mod;
   }
   ```

---

**最优技巧总结**：  
- **逆序更新状态**：处理重复字符时，从模板串尾部向前更新，避免同一字符多次贡献。  
- **滚动数组优化**：用一维数组代替二维数组，空间复杂度从 O(n) 降至 O(1)。  
- **输入流处理**：直接逐字符读取并转换大小写，避免存储整个字符串。  

**拓展建议**：  
- 类似题目：统计其他固定模板的子序列出现次数（如统计“abcabc”的重复模式）。  
- 变种问题：子序列计数结合容斥原理（如禁止某些字符组合）。  

**推荐题目**：  
1. [P2679 子串](https://www.luogu.com.cn/problem/P2679)（子序列计数变种）  
2. [P2513 逆序对数列](https://www.luogu.com.cn/problem/P2513)（动态规划状态优化）  
3. [P1239 计数器问题](https://www.luogu.com.cn/problem/P1239)（滚动数组应用）

---
处理用时：45.37秒
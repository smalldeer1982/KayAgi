# 题目信息

# 队爷的新书

## 题目描述

队爷即将出版新书，以记录他辉煌的虐题生涯。。。

有 $n$ 家出版社对这本书表示了兴趣，并愿意给队爷支付 $p \in [Min_{pay},Max_{pay}]$ 的报酬来得到这本书的出版权，每家出版社的 $Min_{pay}$ 和 $Max_{pay}$ 是不一样的。

现在队爷希望你帮他找出一个报酬值 $p$，使得他获得的总报酬最多。（每一个 $Min_{pay} \leq p \leq Max_{pay}$ 的出版社都会付给队爷 $p$ 的报酬）。


## 说明/提示

【样例解释】

当 $p = 4$ 时，有 $3$ 家出版社会给出报酬，此时最大。

【数据规模与约定】

对于 $20\%$ 的数据，$1 \leq Min_{pay},Max_{pay} \leq 10000$；

对于 $40\%$ 的数据，$1 \leq n \leq 1000,1 \leq Min_{pay},Max_{pay} \leq 10^6$；

对于 $100\%$ 的数据，$1 \leq n \leq 100000,1 \leq Min_{pay},Max_{pay} \leq 10^9$。

## 样例 #1

### 输入

```
4
1 3
2 4
3 5
4 7```

### 输出

```
12
```

# AI分析结果



# 分析与结论

## 算法分类
**离散化**  
（核心在于处理大范围数据时，通过离散化压缩值域，结合差分统计区间覆盖次数）

---

## 题解对比与评分

### 精选题解（评分≥4星）

1. **w23c3c3（五星）**
   - **关键亮点**：  
      - 思路创新性：通过排序左右端点，双指针统计覆盖数，避免离散化步骤  
      - 时间复杂度优化：O(n log n)排序后线性扫描，效率极高  
      - 代码简洁：仅需排序后单次遍历，逻辑清晰  
   - **核心代码**：
     ```cpp
     sort(a+1,a+n+1); sort(b+1,b+n+1);
     int l=1;
     for(int i=1;i<=n;i++){
         while(l<=n && a[l]<=b[i]) l++;
         ans = max(ans, (l-i)*b[i]);
     }
     ```
   - **实现思想**：  
      - 左端点排序后，用指针`l`统计当前右端点`b[i]`的覆盖左端点数量  
      - 右端点排序后，`i`表示已处理的小于当前右端点的数量，总覆盖数为`l-i`  

2. **Rainsleep（四星）**
   - **关键亮点**：  
      - 严格数学证明最优解在右端点  
      - 结合排序与双指针，与w23c3c3思路一致，但补充了详细分析  
   - **核心代码**：
     ```cpp
     sort(a+1, a+n+1); sort(b+1, b+n+1);
     int ptr=1;
     for(int i=1;i<=n;i++){
         while(ptr<=n && a[ptr]<=b[i]) ptr++;
         res = max(res, (ptr-i)*b[i]);
     }
     ```

3. **破忆（四星）**
   - **关键亮点**：  
      - 扫描线思想的经典应用，事件点排序后统计覆盖次数  
      - 处理离散化与差分逻辑清晰  
   - **核心代码**：
     ```cpp
     for(int i=1;i<=n;i++){
         a[++tot] = {x,1};   // 左端点+1
         a[++tot] = {y,0};   // 右端点标记
         a[++tot] = {y+1,-1};// 右端点后-1
     }
     sort(a+1, a+tot+1);
     for(int i=1;i<=tot;i++){
         now += a[i].k;      // 更新覆盖数
         ans = max(ans, now*a[i].x);
     }
     ```

---

## 最优思路总结
**关键点**：  
1. **贪心选择右端点**：最优解必为某区间右端点，可通过排序快速枚举候选点  
2. **双指针统计覆盖数**：排序左右端点后，线性扫描统计每个右端点的有效覆盖区间数  
3. **离散化+差分**：处理大数据范围时，离散化端点后用差分维护覆盖次数  

---

## 拓展与推荐
**类似题目**：  
- [P1884 线段覆盖](https://www.luogu.com.cn/problem/P1884)  
- [P1719 最大加权矩形](https://www.luogu.com.cn/problem/P1719)（二维扫描线思想）  
- [P3400 仓鼠窝](https://www.luogu.com.cn/problem/P3400)（离散化与单调栈结合）  

**心得摘录**：  
> “最优解一定在右端点的证明是关键”——Rainsleep  
> 通过反证法分析，任何中间点的最优性均可被右端点替代，这一思维模式在贪心问题中具有普适性。

---
处理用时：106.61秒
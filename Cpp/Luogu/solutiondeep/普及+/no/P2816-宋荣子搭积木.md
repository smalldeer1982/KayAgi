# 题目信息

# 宋荣子搭积木

## 题目描述

saruka 非常喜欢搭积木，他一共有 $n$ 块积木。而且 saruka 的积木很特殊，只能一块块的竖着摞，可以摞很多列。说过 saruka 的是特殊的积木了，这些积木都非常智能，第 $i$ 块积木有一个情绪值 $x_i$ ，当摞在这块积木上的积木总数超过 $x_i$ 时，这块积木就会很不高兴，发誓以后不会再和 saruka 一起玩耍了。saruka 这么爱玩积木，肯定不会让积木不高兴的，但是 saruka 又希望每块积木都被用上，并且摞的积木列数最少。你能来帮帮 saruka 吗?

## 说明/提示

对于 $100 \%$ 的数据，$1 \le n \le 5000$，$0 \le x_i \le n$。

## 样例 #1

### 输入

```
3
0 0 3
```

### 输出

```
2```

## 样例 #2

### 输入

```
4
0 0 0 0
```

### 输出

```
4```

# AI分析结果



### 算法分类：贪心

---

### 题解分析与结论

**核心思路**：将积木按情绪值排序后，通过贪心策略找到最优放置方式。关键点在于排序方向与放置策略的配合：  
- **从小到大排序 + 贪心模拟**：每次将积木放在满足条件的最高列，无法放置时新建列。  
- **从大到小排序 + 二分答案**：确定列数后，按循环方式放置积木，验证每列的剩余空间是否合法。

**解决难点**：如何保证贪心策略的正确性？通过排序确保每次决策的局部最优性，或通过二分法验证全局最优性。

---

### 精选题解（评分≥4星）

#### 1. KesdiaelKen（★★★★★）
**关键亮点**：  
- 二分答案 + 贪心验证，时间复杂度优化至 \(O(n \log n)\)。  
- 从大到小排序后，循环放置积木，确保每列剩余空间合理。  
- 代码清晰，逻辑严密。

**核心代码**：
```cpp
bool ky(int ls) { // 验证是否能用 ls 列
    for(int i=0; i<ls; i++) zx[i] = 2e9; // 初始化为极大值
    for(int i=0; i<n; i++) 
        zx[i%ls] = min(zx[i%ls]-1, shu[i]); // 更新当前列的剩余空间
    for(int i=0; i<ls; i++) 
        if(zx[i] < 0) return false;
    return true;
}
```

#### 2. gyfer（★★★★☆）
**关键亮点**：  
- 直观贪心模拟，从小到大排序后维护各列高度。  
- 每次选择可放置的最左列，确保后续灵活性。  
- 代码简洁，适合快速理解贪心逻辑。

**核心代码**：
```cpp
sort(a+1, a+n+1);
for(int i=2; i<=n; i++) {
    bool found = false;
    for(int j=1; j<=m; j++) 
        if(lie[j] <= a[i]) { // 找到第一个可放置的列
            lie[j]++; found = true; break;
        }
    if(!found) lie[++m] = 1; // 新建列
}
```

#### 3. Rexdisn（★★★★☆）
**关键亮点**：  
- 二分答案结合贪心验证，思路类似导弹拦截问题。  
- 通过分层检查每列是否合法，确保逻辑正确性。  
- 代码中分列处理积木，模拟分层放置过程。

---

### 最优技巧总结
- **排序方向决定策略**：从小到大排序配合贪心模拟，从大到小排序配合二分验证。  
- **贪心验证的两种实现**：循环放置（二分法）或逐列查找（模拟法）。  
- **时间复杂度权衡**：数据规模较小时可用 \(O(n^2)\) 模拟，大时需 \(O(n \log n)\) 二分。

---

### 拓展与推荐题目
**同类题目推荐**：  
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心策略的经典应用。  
2. [P2678 跳石头](https://www.luogu.com.cn/problem/P2678) - 二分答案与贪心验证的结合。  
3. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020) - 贪心模拟与二分优化的典型问题。

**个人心得摘录**：  
- Merak 在调试中发现错误样例，强调贪心策略需严格证明局部最优性。  
- Rexdisn 提到“类似导弹拦截思路”，启示将问题转化为已知模型进行适配。

---
处理用时：58.06秒
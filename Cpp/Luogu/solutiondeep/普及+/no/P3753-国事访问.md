# 题目信息

# 国事访问

## 题目背景

这是战火纷飞的2333年，世界被分为XC联盟和WJ联盟，两个联盟互相开火。


## 题目描述

这是战火纷飞的2333年，世界被分为XC联盟和WJ联盟，两个联盟互相开火。Q国总统ZR想到Yugo国进行十分紧急的国事访问，但不能坐飞机，只能坐车。由于路上有许多不同的国家而且有些无政府国，所以有许多路是坏的。路没有从自己通向自己的（作死吗。。。）。你需要确定一条具体的路线，并且由于WJ联盟的人随时可能过来，你需要把这条路线经过的所有城市周围的其他路都毁掉。你是上帝视角，你需要帮助ZR总统到达Yugo，你可以毁掉一些原本是好的路，也可以把坏的路修好，但不能新修路。给你一份地图，地图上，ZR国坐落在1城，Yugo首都在n城。帮助ZR总统尽快到达Yugo，你可以获得ZR总统在WJ联邦银行的30亿存款和1000万人的军队，和ZR总统一起瓜分地球（以上是诈骗内容。。。）。


## 说明/提示

把 1 2 1 路径变成不可用

把 1 3 0 路径变成可用

把 2 3 1 路径变成不可用

即可

## 样例 #1

### 输入

```
4 4
1 2 1
1 3 0
2 3 1
3 4 1```

### 输出

```
3
```

# AI分析结果



**算法分类**：最短路

---

### 题解综合分析
题目核心在于选择一条最短路，使得路径上修复/保留的边与路径外毁坏的边总操作次数最少。所有题解均采用最短路算法（SPFA/BFS/Dijkstra），通过权值转换技巧将问题转化为带权最短路问题。

---

### 精选题解

#### 1. 天南月（⭐⭐⭐⭐⭐）
**关键亮点**：
- 权值转换思路清晰（1→-1，0→1），巧妙将总操作次数计算融入最短路
- 使用SPFA的双重松弛（距离优先，操作次数次优）
- 代码简洁且含详细注释

**核心代码思路**：
```cpp
// 边权转换逻辑
if(e[i].opt) cost[nxt] = cost[now]-1; // 原为1的边，保留则减少操作
else cost[nxt] = cost[now]+1;        // 原为0的边，修复则增加操作
```

#### 2. WZKQWQ（⭐⭐⭐⭐）
**关键亮点**：
- 使用BFS实现O(n)复杂度，高效处理边权为1的最短路
- 明确解释总操作次数公式 `ans = 初始1边数 + 路径权值和`

**个人心得**：
> "本题的阳间翻译：...最短路的同时让路上1边尽量多"  
> 通过权值转换将复杂操作次数计算转化为标准最短路问题。

#### 3. mot1ve（⭐⭐⭐⭐）
**关键亮点**：
- 使用分层思想，先求最短路再维护操作次数
- 双数组设计（dis记录距离，val记录操作次数）

**核心代码**：
```cpp
// 边权预转换
if(w==1) edge[idx].w = -1; // 保留1边减少操作
else edge[idx].w = 1;      // 修复0边增加操作
```

---

### 关键思路总结
**权值转换技巧**：  
- **1边**：保留则减少操作次数（权值-1），不保留需毁坏（总操作+1）
- **0边**：修复则增加操作次数（权值+1），不修复无需操作（总操作+0）

通过将边权转换为操作次数的增量，问题转化为带权最短路问题，最终答案为 `初始1边数 + 最短路权值`。

---

### 拓展练习
1. [P1144 最短路计数](https://www.luogu.com.cn/problem/P1144)  
   （统计最短路径数量）
2. [P4568 分层图最短路](https://www.luogu.com.cn/problem/P4568)  
   （带权值转换的分层最短路）
3. [P1462 通往奥格瑞玛的道路](https://www.luogu.com.cn/problem/P1462)  
   （最短路+二分费用限制）

---
处理用时：49.98秒
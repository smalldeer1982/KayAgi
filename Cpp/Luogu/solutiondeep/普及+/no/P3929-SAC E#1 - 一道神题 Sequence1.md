# 题目信息

# SAC E#1 - 一道神题 Sequence1

## 题目背景

小强和阿米巴是好朋友。


## 题目描述

小强很喜欢数列。有一天，他心血来潮，写下了一个数列。

阿米巴也很喜欢数列。但是他只喜欢其中一种：波动数列。

一个长度为 $n$ 的波动数列满足对于任何 $i\ (1 \le i < n)$，均满足以下两个条件至少一个：

- $a_{2i-1} \le a_{2i}$ 且 $a_{2i} \ge a_{2i+1}$（若存在）。
- $a_{2i-1} \ge a_{2i}$ 且 $a_{2i} \le a_{2i+1}$（若存在）。

阿米巴把他的喜好告诉了小强。小强便打算稍作修改，以让这个数列成为波动数列。他想知道，能否通过仅修改一个数（或不修改），使得原数列变成波动数列。


## 说明/提示

### 数据范围及约定

- 对于 $30\%$ 的数据，$1\le n \le 10$。
- 对于另外 $30\%$ 的数据，$1\le m \le 1000$。
- 对于 $100\%$ 的数据，$1\le n \le 10^5$，$m \le 10^9$。

其中 $m = \max|a_i|$（数列中绝对值的最大值）


## 样例 #1

### 输入

```
5
1 2 3 2 1
5
1 2 3 4 5
```

### 输出

```
Yes
No```

# AI分析结果



### 算法分类
**贪心**

### 综合分析与结论
题目要求判断能否通过修改至多一个元素使序列变为波动数列。核心思路是**分两种波动模式贪心计算最小修改次数**。所有题解均采用以下思路：
1. 波动序列只有两种交替模式（先升后降/先降后升）。
2. 分别遍历序列统计两种模式所需修改次数。
3. 若任一模式修改次数≤1，则输出"Yes"。
4. 贪心技巧：遇到不满足条件的位置，将其改为±∞，确保后续条件自动满足。

### 精选题解
1. **作者：mrsrz**（★★★★★）
   - **亮点**：代码简洁高效，用两个变量`pre1/pre2`分别跟踪两种模式的当前值，位运算判断奇偶位置，动态修改极值。
   ```cpp
   // 核心逻辑：维护pre1/pre2，动态修改极值
   for(int i=2;i<=n;++i){
       int now;
       scanf("%d",&now);
       // 处理模式1（升-降交替）
       if((i&1)&&now>pre1) ++cnt1, pre1=-0x3f3f3f3f;
       else if((i&1^1)&&now<pre1) ++cnt1, pre1=0x3f3f3f3f;
       else pre1=now;
       // 处理模式2（降-升交替）
       if((i&1)&&now<pre2) ++cnt2, pre2=0x3f3f3f3f;
       else if((i&1^1)&&now>pre2) ++cnt2, pre2=-0x3f3f3f3f;
       else pre2=now;
   }
   ```

2. **作者：Elegy_of_Green_Kite**（★★★★☆）
   - **亮点**：对比01交替序列问题，突出贪心共性，代码结构清晰，用`inf`常量增强可读性。
   ```cpp
   const int inf=0x7fffffff;
   // 修改逻辑与mrsrz类似，但使用inf常量
   if((i&1) && now>pre1) cnt1++, pre1=-inf;
   else if((i&1^1) && now<pre1) cnt1++, pre1=inf;
   ```

3. **作者：ChampionCyan**（★★★★☆）
   - **亮点**：变量命名清晰（`las1/las2`），代码注释明确，适合初学者理解。
   ```cpp
   // 处理两种模式的状态
   if (i % 2 && tmp > las1) ans1++, las1 = -2e9;
   else if (!(i % 2) && tmp < las1) ans1++, las1 = 2e9;
   else las1 = tmp;
   ```

### 关键思路与技巧
- **极值贪心**：修改元素为±∞使得后续条件自动满足，避免连锁修改。
- **奇偶位判断**：通过`i&1`快速确定当前位置应满足升/降条件。
- **双模式并行**：同时跟踪两种波动模式，减少遍历次数。

### 拓展应用
类似问题如构造交替二进制串（LeetCode 376. 摆动序列）、最少修改次数使数组满足特定交替条件（洛谷 P1969 积木大赛）等。

### 推荐习题
1. [P1969 积木大赛](https://www.luogu.com.cn/problem/P1969) - 贪心模拟增减操作。
2. [P2947 Look Up](https://www.luogu.com.cn/problem/P2947) - 单调栈维护极值。
3. [P5662 纪念品](https://www.luogu.com.cn/problem/P5662) - 动态规划与贪心结合。

---
处理用时：56.80秒
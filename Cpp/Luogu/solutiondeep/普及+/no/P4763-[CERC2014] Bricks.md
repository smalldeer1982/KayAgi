# 题目信息

# [CERC2014] Bricks

## 题目描述

给你一个由'B'和'W'组成的序列，将其按分成最多的区间且每个区间的'B':'W'的值相等

## 样例 #1

### 输入

```
3
3
1 B
3 W
2 B
4
3 W
3 B
9 W
1 B
2
2 W
3 W```

### 输出

```
2
3
5```

# AI分析结果



**算法分类**：贪心

---

### 综合分析与结论
题目要求将序列分割为最多区间，每个区间的 B:W 比例等于全局比例。所有题解均采用贪心策略，核心思路为：**每次尽可能分割最短的满足全局比例的区间**，并通过数学计算判断当前累积的 B/W 是否符合比例条件。关键难点在于如何高效判断分割点并处理剩余部分。

---

### 精选题解
#### 1. XL4453（4星）
**关键亮点**：代码简洁，逻辑清晰，直接处理输入块。利用数学公式动态判断分割条件，通过整除和差值计算确定分割点。
**核心代码思想**：
```cpp
if (col[i] == 'B') {
    if (c2 % cnt2 == 0) { // 检查当前累积 W 是否符合比例
        int t = (cnt1 * (c2 / cnt2)) - c1; // 计算所需 B 的数量
        if (t在合法范围内) {
            ans++; // 分割区间
            c1 = num[i] - t; // 更新剩余 B
            c2 = 0; // 重置 W 计数
        }
    }
}
```

#### 2. LincW（4星）
**关键亮点**：反证法证明贪心正确性，代码中处理剩余块并重新迭代。通过调整 vector 元素模拟分割后的剩余部分。
**核心代码思想**：
```cpp
if (分割后当前块有剩余) {
    sq[i].first -= diff; // 更新当前块剩余数量
    i--; // 重新处理当前块剩余部分
}
```

---

### 最优关键思路
1. **全局比例约束**：所有区间的 B:W 必须等于全局比例，且分割后剩余部分仍保持该比例。
2. **贪心分割**：每次取最短合法前缀，确保分割次数最大化。
3. **数学验证**：通过整除和方程 `c1 / a = c2 / b` 判断当前累积是否满足比例，利用差值计算分割点。

---

### 拓展与相似题目
1. **P1090 [NOIP2004 提高组] 合并果子**（贪心）
2. **P1223 [JSOI2007] 书架**（贪心排序）
3. **P4995 跳跳！**（贪心策略）

---
处理用时：71.26秒
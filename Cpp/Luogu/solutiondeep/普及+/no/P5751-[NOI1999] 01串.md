# 题目信息

# [NOI1999] 01串

## 题目描述

给定 $7$ 个整数 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $，要求设计一个01串$ S=s_1 s_2 … s_i … s_N $，满足：
1.	$ s_i = 0 $ 或 $ s_i = 1 $， $ 1 \leq i \leq N $；
2.	对于 $S$ 的任何连续的长度为 $L_0$ 的子串 $s_j s_{j+1} … s_{j+L0-1}  $ ($1 \leq j \leq N-L_0+1 $) ， $0$ 的个数大于等于 $A_0$ 且小于等于 $B_0$ ;
3.	对于 $S$ 的任何连续的长度为 $L_1$ 的子串 $s_j s_{j+1} …  s_{j+L1-1} $ ($ 1 \leq  j  \leq N-L_1+1 $) ， $1$ 的个数大于等于 $A_1$ 且小于等于 $B_1$ ;

例如， $ N = 6 ,  A_0 = 1 ,  B_0 = 2  ,  L_0 = 3 ,  A_1 = 1 ,  B_1 = 1 ,  L_1 = 2 $，则存在一个满足上述所有条件的 $01$ 串 $ S = 010101 $ 。


## 样例 #1

### 输入

```
6 1 2 3 1 1 2
```

### 输出

```
3
```

# AI分析结果



### 算法分类
**差分约束**

### 综合分析与结论
题目要求构造满足特定区间约束的01串，需将问题转化为差分约束模型。各题解均采用前缀和表示1的个数，通过不等式转换建立图结构，并利用SPFA求解最短路。核心在于正确推导约束条件并处理相邻字符的0/1关系。

### 高星题解推荐
1. **Prean（★★★★☆）**  
   **关键亮点**：简洁的约束推导与高效代码实现。正确转换区间条件为差分约束不等式，并通过超级源点确保连通性。  
   **代码核心**：
   ```cpp
   // 约束转换及建图
   for(i=l0;i<=n;i++) Add(i,i-l0,b0-l0), Add(i-l0,i,l0-a0);
   for(i=l1;i<=n;i++) Add(i,i-l1,-a1), Add(i-l1,i,b1);
   // 相邻字符约束
   for(i=1;i<=n;i++) Add(i,i-1,0), Add(i-1,i,1);
   ```

2. **wangjingjie2022（★★★★☆）**  
   **关键亮点**：详细注释与清晰的约束解释。显式处理超级源点，确保图的连通性。  
   **代码核心**：
   ```cpp
   // 添加超级源点并处理相邻约束
   addedge(n+1,0,0);
   for(int i=l0;i<=n;i++) addedge(i,i-l0,b0-l0), addedge(i-l0,i,l0-a0);
   for(int i=l1;i<=n;i++) addedge(i,i-l1,-a1), addedge(i-l1,i,b1);
   ```

### 最优关键思路
- **前缀和转换**：用前缀和数组表示1的个数，将区间约束转换为差分约束不等式。
- **不等式推导**：将0的个数约束转化为1的个数约束，例如 `0的个数≥A0` → `1的个数≤L0-A0`。
- **图构建技巧**：通过SPFA处理最短路，确保所有节点连通性，并处理相邻字符的0/1关系（`x[i]-x[i-1]∈[0,1]`）。

### 拓展与相似题目
- **P1993 小K的农场**（差分约束基础）
- **P2294 [HNOI2005] 狡猾的商人**（区间和约束）
- **P1260 工程规划**（差分约束应用）

通过掌握差分约束的建图技巧，可高效解决此类区间约束问题。

---
处理用时：108.84秒
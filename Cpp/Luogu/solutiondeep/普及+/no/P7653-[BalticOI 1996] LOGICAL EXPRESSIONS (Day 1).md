# 题目信息

# [BalticOI 1996] LOGICAL EXPRESSIONS (Day 1)

## 题目描述

有五个逻辑表达式，称为 R1、R2、R3、R4、R5。只有逻辑变量 $a、b、c、d、e、f、g、h$，逻辑运算  
`#（not）`  
`&（and）`  
`+（or）`  
和圆括号可以在表达式中使用。操作的优先级如上所述。可以使用圆括号定义执行操作的不同顺序。  
操作由这样的表定义  
![Biao](https://cdn.luogu.com.cn/upload/image_hosting/ilfi8gbz.png)  
假设有一些表达式可以通过带有一个或两个参数的单个逻辑运算来表达：  
- $R_i = R_j$（$R_i$ 等价于 $R_j$，即对于每组变量值，$R_i$ 给出与 $R_j$ 相同的值）；  
- $R_i =$ # $R_j$（$R_i$ 等价于 $R_j$ 的否定）；  
- $R_i = R_j $ &  $R_k  $（结合）;  
- $R_i = R_j + R_k$（分离）；其中（$i≠k，i≠j$）。  

一组基本的表达式是通过它可以表示（表达）未包含在该组中的任何其他表达式，如上定义。  
编写一个程序来查找：   
1. 任何最不基本的表达式集；   
1. 每个表达式的任何表示（表达）（不属于表达式的基本集合）。应该使用带有一个或两个参数的任何单个逻辑运算来获得表示，即来自基本集合的表达式。

## 说明/提示

#### 分值说明  
本题分值按 BOI 原题设置，**满分** $30$ 。
#### 题目说明  
来源于 Baltic Olympiad in Informatics 1996 的 [Day 1:LOGICAL EXPRESSIONS](https://boi.cses.fi/files/boi1996_day1.pdf) 。  
由 @[求学的企鹅](/user/271784) 翻译整理。

## 样例 #1

### 输入

```
a&(b&b) 
c+c
a&b+c
#a
a&b ```

### 输出

```
R1
R2
R4
R3=R1+R2
R5=R1 ```

# AI分析结果

### 算法分类
枚举

### 综合分析与结论
该题的核心在于通过枚举所有可能的逻辑变量状态和表达式组合，来判断哪些表达式可以作为基本表达式，以及如何用基本表达式表示其他表达式。题解通过枚举所有可能的逻辑变量状态（2^8种）和表达式组合（2^5种），并结合栈结构来解析和计算逻辑表达式的值，最终找到最不基本的表达式集及其表示方式。

### 所选题解
#### 题解作者：steambird
- **星级**：4星
- **关键亮点**：
  - 使用栈结构高效解析和计算逻辑表达式。
  - 通过枚举所有可能的逻辑变量状态和表达式组合，确保找到最优解。
  - 代码结构清晰，逻辑严谨，易于理解和扩展。
- **个人心得**：
  - 通过剪枝优化，减少了不必要的计算，提高了代码效率。
  - 在处理逻辑表达式时，优先级的处理是关键，使用栈结构可以有效解决这一问题。

### 核心代码片段
```c++
bool evaluate(string expr, map<char, bool> vals) {
    stack<char> op;
    stack<bool> val;
    for (auto &i : expr) {
        if (i >= 'a' && i <= 'h') {
            val.push(vals[i]);
        } else {
            switch (i) {
                case '(':
                    op.push('(');
                    break;
                default:
                    autopop(i, op, val);
                    op.push(i);
            }
        }
    }
    autopop(' ', op, val);
    return val.top();
}
```
**核心实现思想**：使用两个栈分别记录运算符和数值，遇到数值时进数值栈，遇到运算符时弹出并计算优先级较高的运算符，最终数值栈中的唯一元素即为结果。

### 可拓展之处
该题的解法可以拓展到其他需要枚举所有可能状态的逻辑问题，如布尔函数的简化、逻辑电路的设计等。类似的算法套路可以应用于需要穷举所有可能情况的问题，如组合优化、状态空间搜索等。

### 推荐题目
1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1057 传球游戏](https://www.luogu.com.cn/problem/P1057)

---
处理用时：14.29秒
# 题目信息

# 「CGOI-3」巫泡弹弹乐

## 题目背景

mc 正在挑战弹弹乐。

![](https://cdn.luogu.com.cn/upload/image_hosting/yaye0cgu.png)

## 题目描述

弹弹乐由 $n$ 个弹力菇组成，每个弹力菇有 $a,b$ 两个属性。

对于弹力菇 $i$ 会向弹力菇 $j$ 连一条边权为 $\max(a_i,a_j)+\max(b_i,b_j)$ 的双向弹力通道。现在 mc 想知道弹力菇组成的图的最小生成树，以便他打破记录。

## 说明/提示

#### 数据范围

**「本题采用捆绑测试」**

$$\def{\arraystretch}{1.5}\begin{array}{|c|c|c|c|}\hline
\textbf{Subtask} & \bm{n} & \textbf{特殊性质} & \textbf{分值}\cr\hline
1 & n\le 500 & \text{无} & 20 \cr\hline
2 & n\le 5\times 10^4 & \text{无} & 20\cr\hline
3 & \text{无特殊限制} & \text{数据随机} & 20\cr\hline
4 & \text{无特殊限制} & \text{无} & 40 \cr\hline
\end{array}$$

- 对于 $100\%$ 的数据，满足：$1\le n\le 10^6$，$1\le a_i,b_i\le 10^9$。

## 样例 #1

### 输入

```
3
1 2 1
3 2 3```

### 输出

```
9
1 2
1 3```

# AI分析结果

### 算法分类
贪心、排序

### 综合分析与结论
本题的核心是通过贪心策略和排序来构建最小生成树。所有题解都采用了类似的思路：首先按 $a$ 属性排序，然后贪心地选择 $b$ 属性最小的点进行连接。这种方法的正确性在于，排序后可以确保 $a$ 属性的贡献最小，而贪心选择 $b$ 属性的最小点则进一步优化了总边权。

### 所选题解

#### 1. 作者：MCRS_lizi (5星)
**关键亮点**：
- 思路清晰，代码简洁。
- 通过排序和贪心策略，确保了最小生成树的构建。
- 详细证明了贪心策略的正确性。

**核心代码**：
```cpp
sort(p+1,p+n+1,cmp);
minn=p[1];
for(int i=2;i<=n;i++) {
    ans+=p[i].a;
    num u=minn;
    ans+=max(u.b,p[i].b);
    if(p[i].b<minn.b) {
        minn=p[i];
    }
    l[i].u=p[i].xh,l[i].v=u.xh;
}
```
**实现思想**：按 $a$ 排序后，每次选择 $b$ 最小的点进行连接，确保边权最小。

#### 2. 作者：irris (4星)
**关键亮点**：
- 提供了两种证明方法，增强了理解。
- 代码结构清晰，易于理解。

**核心代码**：
```cpp
std::sort(T + 1, T + N + 1);
long long ans = 0;
for (int i = 2; i <= N; ++i) {
    vec.push_back({i, p}), ans += T[i].a + std::max(T[i].b, T[p].b);
    if (T[i].b < T[p].b) p = i;
}
```
**实现思想**：排序后，贪心地选择 $b$ 最小的点进行连接，确保边权最小。

#### 3. 作者：wuzr (4星)
**关键亮点**：
- 通过贪心策略和排序，确保了最小生成树的构建。
- 代码简洁，逻辑清晰。

**核心代码**：
```cpp
sort(p + 1, p + n + 1, [](Point x, Point y) {return x.a != y.a ? x.a < y.a : x.b < y.b;});
rep(i, 2, n)
if (p[i].b >= p[m].b) u[++tot][0] = p[m].id, u[tot][1] = p[i].id, ans += p[i].b + p[i].a;
else p[++m] = p[i];
```
**实现思想**：按 $a$ 排序后，贪心地选择 $b$ 最小的点进行连接，确保边权最小。

### 最优关键思路或技巧
1. **排序**：按 $a$ 属性排序，确保 $a$ 属性的贡献最小。
2. **贪心选择**：每次选择 $b$ 属性最小的点进行连接，进一步优化总边权。

### 可拓展之处
- 类似的问题可以通过排序和贪心策略来解决，尤其是在需要优化某种属性贡献的情况下。
- 可以扩展到多维属性的最小生成树问题，通过多维排序和贪心选择来优化。

### 推荐题目
1. [P3366 【模板】最小生成树](https://www.luogu.com.cn/problem/P3366)
2. [P1546 最短网络 Agri-Net](https://www.luogu.com.cn/problem/P1546)
3. [P1991 无线通讯网](https://www.luogu.com.cn/problem/P1991)

### 个人心得
- **调试经历**：在实现过程中，确保排序和贪心选择的正确性是关键，特别是在处理多维属性时。
- **踩坑教训**：需要注意边界条件，如最小点的选择和连接顺序。
- **顿悟感想**：通过排序和贪心策略，可以有效地优化复杂问题的解决方案。

---
处理用时：21.51秒
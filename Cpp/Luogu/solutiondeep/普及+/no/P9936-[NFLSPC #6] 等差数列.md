# 题目信息

# [NFLSPC #6] 等差数列

## 题目背景

![](https://cdn.luogu.com.cn/upload/image_hosting/asxexdko.png)

![](https://cdn.luogu.com.cn/upload/image_hosting/rzayzc9p.png)

## 题目描述

*Alek 岁*在某知名 OJ *代码力量*上做了 $a_i$ 道难度为 $i$ 的题。他希望做一些题使得 $a_i$ 形成 **公差非正** 的等差数列，这样画出来的统计图表很好看。

尽管 *Alek 岁*一天能做 42 道题，但他依然希望做尽可能少的题达到目标。你需要求出新做题数的最小值。

你可以认为 OJ 上有足够多的各种难度的题目。

## 说明/提示

对于所有数据，$1\leq T\leq 100$，$1\leq n, \sum n\leq 10 ^ 5$，$1\leq a_i\leq 10 ^ 9$。

- 子任务 1（$30$ 分）：$\sum n \leq 10 ^ 3$。
- 子任务 2（$70$ 分）：无特殊限制。

Source：NFLSPC #6 L by Alex_Wei

## 样例 #1

### 输入

```
6
2
822 1064
2
1064 822
4
1 3 4 2
4
2 4 3 1
6
2 6 2 1 4 4
9
9 9 8 2 4 4 3 5 3
```

### 输出

```
242
0
6
4
17
25
```

# AI分析结果

### 算法分类
数学

### 综合分析与结论
题目要求将给定的数列通过增加某些元素的值，使其形成一个公差非正的等差数列，且增加的元素值之和最小。各题解主要围绕如何确定等差数列的公差和首项，以及如何通过数学方法优化计算过程。

### 所选题解
1. **作者：251Sec (赞：2)**
   - **星级：4星**
   - **关键亮点：**
     - 通过数学推导，将问题转化为求解凸函数的最小值，利用三分法高效求解。
     - 代码简洁，逻辑清晰，易于理解。
   - **核心代码：**
     ```cpp
     ll Calc(ll d) {
         ll x = 0, s = 0;
         for (int i = 1; i <= n; i++) x = max(x, a[i] + (i - 1) * d);
         for (int i = 1; i <= n; i++) s += x - (i - 1) * d - a[i];
         return s;
     }
     ```
   - **个人心得：**
     - 通过将问题转化为凸函数的最小值问题，大大简化了求解过程，避免了复杂的枚举和计算。

2. **作者：Meickol (赞：0)**
   - **星级：4星**
   - **关键亮点：**
     - 通过数学公式推导，将问题转化为求解函数的最小值，利用三分法高效求解。
     - 代码简洁，逻辑清晰，易于理解。
   - **核心代码：**
     ```cpp
     LL calc(LL d){
         LL b=0;
         rep(i,1,n) b=max(b,a[i]+(i-1)*d);
         return n*b-n*(n-1)/2*d-sum;
     }
     ```
   - **个人心得：**
     - 通过数学公式的推导，将问题转化为函数的最小值问题，简化了求解过程，避免了复杂的枚举和计算。

### 最优关键思路或技巧
- **数学推导与三分法结合：** 通过数学推导将问题转化为求解凸函数的最小值问题，利用三分法高效求解，避免了复杂的枚举和计算。
- **代码简洁与逻辑清晰：** 代码实现简洁，逻辑清晰，易于理解和维护。

### 可拓展之处
- **类似问题：** 类似的问题可以通过数学推导转化为凸函数的最小值问题，利用三分法或其他优化算法高效求解。
- **算法套路：** 数学推导与优化算法结合，适用于多种需要求解函数最小值的问题。

### 推荐题目
1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)
2. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)

---
处理用时：16.71秒
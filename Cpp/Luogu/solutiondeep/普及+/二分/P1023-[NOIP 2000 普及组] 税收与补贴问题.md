# 题目信息

# [NOIP 2000 普及组] 税收与补贴问题

## 题目背景

每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）


## 题目描述

你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。

- 总利润 $=$ 单位商品利润 $\times$ 销量
- 单位商品利润 $=$ 单位商品价格 $-$ 单位商品成本（减去税金 或者 加上补贴）


## 说明/提示

### 数据范围及约定

保证输入的所有数字均小于 $10^5$。

### 样例解释（2023/6/22 更新）

如下图所示是输入样例所对应的价格变化图，横轴表示销售价格，纵轴表示销量。

![](https://cdn.luogu.com.cn/upload/image_hosting/21mhtm5i.png)

根据题意，$28$ 元是商品的成本。销售价格不应该低于 $28$ 元；当销售价格大于给出的价格的最大值 $31$ 元后，按照售价每提高一元，销量降低 $15$ 计算，例如当售价为 $33$ 元时，销量为 $110-15\times (33-31)=80$。在给出来的价位之间，销量呈线性变化。

当政府给该商品补贴 $4$ 元后，企业将该商品定价为 $31$ 元时，取得的利润为 $31-28+4=7$ 元，销量为 $110$ 件，总利润为 $7\times 110=770$ 元，是企业在所有定价下能够取得的最大的总利润。此时企业的售价为政府的期望售价，因此是一个合法方案。

## 样例 #1

### 输入

```
31
28 130
30 120
31 110
-1  -1
15```

### 输出

```
4
```

# AI分析结果



### 综合分析与结论
本题解需处理价格-销量的线性插值与后续递减，通过枚举或数学分析确定最小税收/补贴。关键难点在于正确生成所有价格点并高效求解最优解。题解中暴力枚举、不等式分析、单调性优化各有优劣，其中暴力法适合数据规模小的情况，数学方法更高效但实现复杂。

### 高星题解推荐

#### 1. Mitch谜团（★★★★☆）
**关键亮点**：
- **暴力枚举**思路直观，适合普及组选手。
- 完整处理了线性插值与后续递减，确保数据完整性。
- 代码结构清晰，分阶段填充数据后枚举检查。

**核心实现**：
```cpp
// 填充中间价格
while(cin>>a[i][1]>>a[i][2]&&a[i][1]!=-1){
    if(i>2 && 价格差>1) 线性插值填充中间点;
}
// 处理后续递减
while(销量>0) 添加价格点并递减销量;
// 枚举补贴/税收
for(j=1;j<=10000;j++){
    计算补贴情况下的最大利润;
    检查是否满足预期价格;
}
```

#### 2. Ofnoname（★★★★☆）
**关键亮点**：
- **数学不等式推导**高效缩小解集范围。
- 维护解集的上下界，避免无效枚举。
- 处理浮点运算的取整问题，确保正确性。

**核心思路**：
```cpp
for(每个价格点i){
    double ans = (d[x]*(x-r) - d[i]*(i-r)) / (d[i]-d[x]);
    if(g>0) Max=min(Max,ans); // 更新解集边界
    else Min=max(Min,ans);
}
// 判断解区间
if(Min>0) 输出上取整;
else if(Max<0) 输出下取整;
else 输出0;
```

#### 3. dodo（★★★★☆）
**关键亮点**：
- **利用单调性优化**减少枚举次数。
- 根据初始最大利润位置决定枚举方向（补贴或税收）。
- 代码简洁，逻辑清晰。

**核心代码**：
```cpp
// 初始最大利润位置
for(i=pc;i<=lc;i++) 找到初始最大利润的价格ans;
if(ans>期望价){
    for(补贴x=1; ;x++) 检查是否满足;
} else {
    for(税收x=-1; ;x--) 检查是否满足;
}
```

### 最优思路提炼
- **数据填充**：正确处理线性插值与后续递减，生成完整价格-销量表。
- **枚举策略**：暴力枚举在数据范围内可行，利用单调性或数学分析优化可提升效率。
- **数学建模**：将问题转化为不等式或直线方程比较，缩小解集范围。

### 相似题目推荐
1. **P1024 一元三次方程求解**（浮点解与区间分析）
2. **P1181 数列分段**（线性处理与最优化）
3. **P2678 跳石头**（二分答案与边界判断）

---
处理用时：68.13秒
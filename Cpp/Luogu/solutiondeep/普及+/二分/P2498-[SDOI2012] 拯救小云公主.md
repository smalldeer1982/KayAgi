# 题目信息

# [SDOI2012] 拯救小云公主

## 题目描述

英雄又即将踏上拯救公主的道路……

这次的拯救目标是——爱和正义的小云公主。

英雄来到boss的洞穴门口，他一下子就懵了，因为面前不只是一只boss，而是上千只boss。当英雄意识到自己还是等级1的时候，他明白这就是一个不可能完成的任务。

但他不死心，他在想，能不能避开boss去拯救公主呢，嘻嘻。

Boss的洞穴可以看成一个矩形，英雄在左下角（1,1），公主在右上角（row，line）。英雄为了避开boss，当然是离boss距离越远越好了，所以英雄决定找一条路径使到距离boss的最短距离最远。

Ps:英雄走的方向是任意的，但是不能走出矩形的范围。即英雄可以到达矩形范围内的任意一个点（没有必要是整点）

你可以帮帮他吗？

当英雄找到了美丽漂亮的小云公主，立刻就被boss包围了！！！英雄缓闭双眼，举手轻挥，白光一闪后使用了回城卷轴，回到了城堡，但只有小云公主回去了……因为英雄忘了进入回城的法阵了。


## 说明/提示

数据范围：

20%数据，boss坐标范围小于等于50；

60%数据，n<=1500；

100%数据，n<=3000；



## 样例 #1

### 输入

```
1 3 3

2 2```

### 输出

```
1.00```

## 样例 #2

### 输入

```
1 3 3

3 1```

### 输出

```
2.00```

# AI分析结果



### 综合分析与结论
题目要求寻找从起点到终点的路径，使得路径到所有boss的最小距离最大。核心解法是二分答案+连通性判断。各题解主要差异在连通性判断的优化方式：
1. **BFS/DFS暴力检查**：直观但复杂度高（O(n²) per check），难以通过3k数据
2. **并查集全连接**：仍需要处理O(n²)边，效率较低
3. **最小生成树优化**：通过Prim预处理将边数降至O(n)，check时仅需处理树边
4. **图论模型转化**：将问题转化为最长边最短路径问题，用Dijkstra/SPFA求解

### 高评分题解推荐
#### 1. 题解作者：JZYshuraK（五星）
**核心亮点**：  
- 使用Prim生成最小生成树，将check复杂度优化到O(n)  
- 通过四类超级边界点处理阻断条件  
- 代码结构清晰，包含关键注释  

**关键代码思路**：  
```cpp
void prim() {
    // 通过Prim算法生成最小生成树
    // 预处理每个点到已选集合的最短边
    for(int i=1;i<k;i++) {
        int mx = 选择离当前集合最近的点;
        add(mx, pre[mx], lc[mx]); // 将边加入生成树
        // 更新其他点的最近距离
    }
}

bool check(double r) {
    // 仅检查生成树中的边是否阻断路径
    // 合并距离<2r的树边，判断边界连通性
}
```

#### 2. 题解作者：crashed（五星）
**核心亮点**：  
- 完整的最小生成树应用模板  
- 通过四类边界点的巧妙设计简化判断逻辑  
- 代码包含详细注释，可读性强  

**关键代码片段**：  
```cpp
bool chk(const double dist) {
    makeSet(N + 4); // 初始化并查集
    // 检查生成树边
    for(int i=1;i<=cnt;i++)
        if(E[i].w < dist*2) unionSet(...);
    // 处理边界条件
    for(int i=1;i<=N;i++) {
        if(x[i]-1 < dist) unionSet(i, 左边界);
        // 其他三类边界同理
    }
    // 判断四类阻断情况
}
```

#### 3. 题解作者：胡尔克HULK（四星）
**核心亮点**：  
- 创新性转化为图论最长边问题  
- 通过Dijkstra维护路径最大边的最小值  
- 边界处理简洁，代码实现高效  

**关键思路**：  
```cpp
void dj(int x) {
    // 使用优先队列维护路径最大边的最小值
    while(!q.empty()) {
        // 松弛操作：max(当前路径最大边, 新边)
        if(max(ds[x][i], jk[x]) < jk[i])
            jk[i] = max(ds[x][i], jk[x]);
    }
}
```

### 最优技巧总结
1. **二分答案框架**：将最优化问题转化为判定性问题
2. **最小生成树优化**：通过Prim预处理，将检查的边数从O(n²)降至O(n)
3. **超级边界点设计**：将四边抽象为特殊节点，简化连通性判断
4. **并查集阻断检测**：通过集合合并快速判断起点终点是否被隔离

### 同类题目推荐
1. [P3958 奶酪](https://www.luogu.com.cn/problem/P3958)（三维空间连通性判断）
2. [P2491 消防](https://www.luogu.com.cn/problem/P2491)（树直径性质+二分答案）
3. [P3199 最小圈](https://www.luogu.com.cn/problem/P3199)（分数规划+SPFA判负环）

### 调试经验摘录
1. **坐标偏移处理**：多题解出现坐标未减1的错误（如将(1,1)视为原点）
2. **浮点精度控制**：采用固定迭代次数(如60次)代替eps判断更稳定
3. **稠密图优化**：SPFA在n=3k时表现不佳，需邻接矩阵优化
4. **边界条件特判**：需考虑boss直接挡住起点/终点的特殊情况

---
处理用时：68.57秒
# 题目信息

# 飞行员配对方案问题

## 题目背景

第二次世界大战期间，英国皇家空军从沦陷国征募了大量外籍飞行员。由皇家空军派出的每一架飞机都需要配备在航行技能和语言上能互相配合的两名飞行员，其中一名是英国飞行员，另一名是外籍飞行员。在众多的飞行员中，每一名外籍飞行员都可以与其他若干名英国飞行员很好地配合。

## 题目描述

一共有 $n$ 个飞行员，其中有 $m$ 个外籍飞行员和 $(n - m)$ 个英国飞行员，**外籍飞行员从 $1$ 到 $m$ 编号**，**英国飞行员从 $m + 1$ 到 $n$ 编号**。 对于给定的外籍飞行员与英国飞行员的配合情况，试设计一个算法找出最佳飞行员配对方案，使皇家空军一次能派出最多的飞机。

## 说明/提示

**【数据范围与约定】**

- 对于 $100\%$ 的数据，保证 $1 \leq m \leq n < 100$，$1 \leq u \leq m < v \leq n$，同一组配对关系只会给出一次。

**【提示】**

- 请注意输入的第一行先读入 $m$，再读入 $n$。

## 样例 #1

### 输入

```
5 10
1 7
1 8
2 6
2 9
2 10
3 7
3 8
4 7
4 8
5 10
-1 -1
```

### 输出

```
4
1 7
2 9
3 8
5 10
```

# AI分析结果



### 综合分析与结论
本题为典型二分图最大匹配问题，主流解法为匈牙利算法与网络流（Dinic/ISAP）。各题解核心思路一致，差异主要体现在：
1. 网络流解法需构建超级源/汇点，通过反向边判断配对方案
2. 匈牙利算法更简洁但效率略低，网络流扩展性更强
3. 输出方案时需处理反向边流量或匹配数组遍历

### 高分题解推荐

#### 1. Johnson_sky（Dinic实现） ★★★★☆
**核心亮点**：
- 标准Dinic模板实现，0ms高效通过
- 反向边流量判断方案的精巧处理
- 输入处理采用do-while结构避免重复判断

**关键代码**：
```cpp
// 输出配对方案的核心逻辑
for(int i=2;i<=en;i=i+2) {
    if(e[i].to!=S&&e[i^1].to!=S)
    if(e[i].to!=T&&e[i^1].to!=T)
    if(e[i^1].v!=0) // 反向边有流量
        printf("%d %d\n",e[i^1].to,e[i].to);
}
```

#### 2. shadowice1984（教学向Dinic） ★★★★★
**核心亮点**：
- 手把手教学网络流原理与Dinic实现
- 维护match数组直接记录匹配关系
- 详细注释解释反向边与回流机制

**匹配维护技巧**：
```cpp
int matcha[N], matchb[N]; // 维护双向匹配
if(x!=s&&v!=t) {
    matcha[x]=v;
    matchb[v]=x; // 更新匹配关系
}
```

#### 3. tcswuzb（匈牙利算法） ★★★★☆
**核心亮点**：
- 简洁的匈牙利模板实现
- 直接利用匹配数组输出方案
- 代码可读性极佳，适合新手

**匈牙利核心**：
```cpp
bool dfs(int x) {
    for(int k=head[x];k;k=e[k].next) {
        int v=e[k].to;
        if(!vis[v]) {
            vis[v]=1;
            if(!match[v]||dfs(match[v])) {
                match[v]=x; // 更新匹配
                return true;
            }
        }
    }
    return false;
}
```

### 关键技巧总结
1. **反向边判定**：网络流中通过`e[i^1].v`判断是否配对，利用异或操作快速定位反向边
2. **分层优化**：Dinic通过BFS分层加速流量分配
3. **匹配数组维护**：匈牙利算法直接记录匹配关系，网络流可通过遍历边集合提取方案
4. **输入处理**：使用`while(scanf)`循环处理不定长输入

### 拓展题目推荐
1. [P3386] 二分图最大匹配（模板题）
2. [P3254] 圆桌问题（网络流建模）
3. [P2763] 试题库问题（多条件匹配）

### 调试心得摘录
1. **输入陷阱**："注意输入的第一行先读入m，再读入n"（Johnson_sky题解）
2. **反向边误区**："判断反向边的权值是否不为0"而非正向边（Isprime题解） 
3. **输出顺序**：匈牙利算法需遍历所有可能配对避免遗漏（kakakaka题解中双重循环）

---
处理用时：55.59秒
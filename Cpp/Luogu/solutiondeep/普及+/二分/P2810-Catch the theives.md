# 题目信息

# Catch the theives

## 题目背景

你们懂的，浙江某高中的保安是非常敬（sui）职（bian）的，但是有一天，一群奶牛（不要问我怎么想的），溜进了校园走进了二食堂，偷吃了可口的饭菜（没尝过）。现在 headmaster 非常生气，让保安严查此事。这时 \*\*\* 走过，勤劳而又严谨的保安求助 \*\*\*，\*\*\* 很忙所以把任务交给了你。要不要来杯咖啡先。

## 题目描述

karlven 听说保安在打游戏值班时看到有 $4$ 只奶牛滚出校门（吃太饱了？），而且这个品种的奶牛非常贪心，而且有秩序。怎么体现？偷吃的时候他们会排队，且后一只偷吃的量是前一只的**整数倍（设为 $k,k>1$）**，按照他的经验估计这些奶牛**最多能吃 $m$ 吨**的食物，一旦**超过就会暴毙**化为灰烬，所以一只奶牛**不会**吃超过 $m$ 吨的食物并且只能**一吨一吨**吃。一旦有一只奶牛无法吃东西，他就会攻击同伴然后自尽。现在 karlven 不告诉你 $m$ 的值，只告诉你奶牛**能够一起偷吃并且一起安全滚出校门**的方案数量 $n$（$n\le10^{15}$，不要方），请你算出 $m$ 的值，若有多种解，输出**最小的可能值**。如果你怎么算都算不出，就输出 $-1$，然后投诉保安。

## 说明/提示

对于 $100\%$ 的数据，$n\le10^{15}.$

样例解释：

样例 #1：$(1,2,4,8)$；

样例 #2：$(1,2,4,8),(1,3,9,27),(2,4,8,16),(2,6,18,54),(3,6,12,24),(4,8,16,32),(5,10,20,40),(6,12,24,48).$

## 样例 #1

### 输入

```
1```

### 输出

```
8```

## 样例 #2

### 输入

```
8```

### 输出

```
54```

# AI分析结果



### 综合分析与结论
该题的核心是找到满足特定条件的最小 m 值。所有题解均采用二分法框架，核心思路为：
1. **单调性**：当 m 增大时，合法四元组数量单调不减。
2. **check函数**：通过枚举 k，累加每个 k 对应的合法 a 的数量（即 m//k³）。
3. **边界处理**：二分寻找最大的 m' 使得 check(m') < n，最终验证 m'+1 是否满足条件。

关键优化点：
- 仅需判断 ak³ ≤ m 即可推导其他条件成立。
- 时间复杂度 O(m^(1/3) * logm)，能处理 n≤1e15 的数据。

---

### 优质题解推荐
#### 1. IcyFoxer_XZY（★★★★★）
**关键亮点**： 
- 代码极简（仅19行），逻辑清晰
- 正确使用二分模板处理最小 m 的边界
- 三目运算符优雅处理答案验证

**核心代码**：
```cpp
int check(int x){
    int sum=0;
    for(int i=2;i*i*i<=x;i++) sum += x/(i*i*i);
    return sum;
}
// 二分部分：寻找最大的 ans 满足 check(ans)<n
cout<<(check(ans+1)==n?ans+1:-1);
```

#### 2. critnos（★★★★☆）
**亮点**：
- 详细解释二分逻辑的调整
- 提供精确的二分上界（4949...）

**代码特点**：
```cpp
ll check(ll x) { /* 同核心逻辑 */ }
// 二分条件判断更符合常规思维
if(check(ans+1)==n) cout<<ans+1;
```

#### 3. xmkevin（★★★★☆）
**亮点**：
- 给出完整的数学推导
- 强调单调性证明的必要性

**代码片段**：
```cpp
int f(int x) { /* 同核心逻辑 */ }
// 二分框架清晰，变量命名规范
if(f(ans + 1) == n) cout << ans + 1;
```

---

### 最优关键思路总结
1. **二分框架**：在答案具有单调性时优先考虑二分，需正确处理左右边界。
2. **check函数优化**：将四元组合法性简化为 ak³ ≤ m，计算时枚举 k 并累加 m//k³。
3. **边界验证**：二分找到最后一个 check(m) <n 的 m，最终验证 m+1 是否合法。

---

### 拓展与举一反三
**同类题目推荐**：
1. [P2440 木材加工](https://www.luogu.com.cn/problem/P2440)（二分答案）
2. [P2678 跳石头](https://www.luogu.com.cn/problem/P2678)（最小化最大值）
3. [P1873 砍树](https://www.luogu.com.cn/problem/P1873)（最大化最小值）

**调试技巧**：
- 验证二分上下界是否足够大（如本题 r 需 ≥5e15）。
- 输出中间变量检查 check 函数的正确性。

**心得摘录**：
> "别急,把 check(m)<n 的最大 m+1 不就行了么？" —— 通过逆向思维解决多解问题。  
> "xk^3 ≤ m 时方案总数为 x" —— 将复杂条件简化为单一数学表达式是解题关键。

---
处理用时：46.18秒
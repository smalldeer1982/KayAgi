# 题目信息

# [SHOI2015] 自动刷题机

## 题目背景

曾经发明了信号增幅仪的发明家 SHTSC 又公开了他的新发明：自动刷题机——一种可以自动 AC 题目的神秘装置。

## 题目描述

自动刷题机刷题的方式非常简单：首先会瞬间得出题目的正确做法，然后开始写程序。每秒，自动刷题机的代码生成模块会有两种可能的结果：

1.写了 $x$ 行代码  
2.心情不好，删掉了之前写的 $y$ 行代码。（如果 $y$ 大于当前代码长度则相当于全部删除。）

对于一个 OJ，存在某个固定的正整数长度 $n$，一旦自动刷题机在某秒结束时积累了大于等于 $n$ 行的代码，它就会自动提交并 AC 此题，然后新建一个文件（即弃置之前的所有代码）并开始写下一题。SHTSC 在某个 OJ 上跑了一天的自动刷题机，得到了很多条关于写代码的日志信息。他突然发现自己没有记录这个 OJ 的 $n$ 究竟是多少。所幸他通过自己在 OJ 上的 Rank 知道了自动刷题机一共切了 $k$ 道题，希望你计算 $n$ 可能的最小值和最大值。

## 说明/提示

#### 数据规模与约定

- 对于 $20\%$ 的数据，保证 $l \le 10$；
- 对于 $40\%$ 的数据，保证 $l \le 100$ ；
- 对于 $60\%$ 的数据，保证$l \le 2 \times 10^3$；
- 对于 $100\%$ 的数据，保证 $1 \leq l \le 10^5$，$-10^9 \le x_i \le 10^9$。

## 样例 #1

### 输入

```
4 2
2
5
-3
9```

### 输出

```
3 7```

# AI分析结果



### 综合分析与结论
本题需通过两次二分分别求满足条件的n的最小值和最大值。核心思路为利用n与提交次数k的单调性：n增大时，提交次数单调不增。通过二分查找k对应的左右边界，并注意处理负数累加和边界条件。

### 精选题解（评分≥4星）

#### 1. 作者：Ofnoname（5星）
**关键亮点**：  
- 清晰的两次二分结构，分别处理最小值和最大值，边界调整逻辑正确。  
- 使用`work`函数封装提交次数计算，代码复用性高。  
- 处理了负数累加时的归零，并正确维护`ans`仅在等于k时更新。  

**代码核心**：  
```cpp
long work(long im) {  //计算n=im时的提交次数
    int ans = 0; long sum = 0;
    for (int i = 1; i <= N; i++) {
        sum = max(sum + a[i], 0ll);  //负数归零
        if (sum >= im) sum = 0, ans++;  //达到n则提交
    } return ans;
}
```

#### 2. 作者：STPGUY（4.5星）
**关键亮点**：  
- 二分范围优化，第二次搜索时缩小范围至第一次求得的最大值。  
- 无返回值处理通过`ans`初始值判断，逻辑简洁。  
- 代码注释明确，变量命名清晰（如`Sum`、`Count`）。  

**个人心得**：  
> “右边界要设大一点，Max_int都要WA”——强调初始范围需足够大，避免遗漏解。

#### 3. 作者：Mine_King（4星）
**关键亮点**：  
- 使用`check`函数返回实际提交次数，便于灵活调整边界。  
- 左边界与右边界二分逻辑分离，独立处理等于k的情况。  
- 代码简洁，变量名简短高效（如`len`表示提交次数）。  

**核心代码**：  
```cpp
int check(int x) {
    int num = 0, cnt = 0;
    for (int i = 1; i <= n; i++) {
        num += a[i];
        if (num < 0) num = 0;  //处理负数
        if (num >= x) num = 0, cnt++;  //提交后重置
    } return cnt;
}
```

### 关键思路与技巧
1. **二分答案框架**：两次二分分别寻找最小和最大n，利用单调性快速缩小范围。
2. **边界处理**：当`check(mid) == k`时，左边界二分需右移`l`，右边界则左移`r`。
3. **负数清零**：累加时若sum<0立即归零，避免影响后续计数。
4. **长整型处理**：所有相关变量需用`long long`防止溢出。

### 拓展与同类题目
1. **洛谷P1182**《数列分段 Section II》：二分最小化每段和的最大值。
2. **洛谷P4344**《[AHOI2016] 棋盘》：二分+判定型问题。
3. **洛谷P2678**《跳石头》：经典二分答案，寻找最小距离的最大值。

### 个人心得摘录
- **Drinkkk**：  
  > “不开longlong见祖宗”——强调数据类型选择的重要性。  
- **By_Ha**：  
  > “二分答案对来说实在是太难缠了”——反映二分细节调试的挑战性。  
- **Limit**：  
  > “右边界要设足够大（例如999999999999999）”——初始范围设定不足是常见错误。

---
处理用时：75.10秒
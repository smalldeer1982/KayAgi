# 题目信息

# [CQOI2010] 扑克牌

## 题目描述

你有 $n$ 种牌，第 $i$ 种牌的数目为 $c_i$。另外有一种特殊的牌：joker，它的数目是 $m$。你可以用每种牌各一张来组成一套牌，也可以用一张 joker 和除了某一种牌以外的其他牌各一张组成 $1$ 套牌。比如，当 $n=3$ 时，一共有 $4$ 种合法的套牌：$\{1,2,3\}$，$\{J,2,3\}$，$\{1,J,3\}$，$\{1,2,J\}$。

给出 $n$，$m$ 和 $c_i$，你的任务是组成尽量多的套牌。每张牌最多只能用在一副套牌里（可以有牌不使用）。

## 说明/提示

**样例说明**

输入数据表明：一共有 $1$ 个 $1$，$2$ 个 $2$，$3$ 个 $3$，$4$ 个 joker。最多可以组成三副套牌：$\{1,J,3\}$，$\{J,2,3\}$，$\{J,2,3\}$，joker 还剩一个，其余牌全部用完。

**数据范围**

对于 $50\%$ 的数据，$2 \le n \le 5$，$0 \le m \le 10^6$，$0 \le c_i \le 200$。

对于 $100\%$ 的数据，$2 \le n \le 50$，$0 \le m,c_i \le 5 \times 10^8$。

## 样例 #1

### 输入

```
3 4
1 2 3
```

### 输出

```
3
```

# AI分析结果

### 综合分析与结论

该题目要求通过二分查找和贪心策略来解决扑克牌组合问题。大多数题解采用了二分查找的思路，结合贪心策略来验证某个套牌数量是否可行。二分查找的核心在于利用单调性，而贪心策略则用于计算每套牌所需的Joker数量。部分题解在二分查找的实现上存在细节问题（如边界条件处理不当），导致在某些数据上无法通过。

### 所选题解

#### 1. 作者：C锥 (赞：13)
- **星级**：★★★★☆
- **关键亮点**：思路清晰，二分查找结合贪心策略，详细解释了贪心的正确性，并通过图示帮助理解。
- **个人心得**：作者通过图示展示了贪心策略的正确性，帮助读者更好地理解每套牌中Joker的使用限制。

```cpp
bool judge(int std) {
    int tmp = 0, rest = std;
    for(int i = 1;i <= n; i++) {
        if(c[i] >= std) continue;
        tmp += (std - c[i]); rest -= (std - c[i]);
        if(tmp > m || rest < 0) return 0;
    }
    return 1;
}
```
- **核心实现思想**：通过`judge`函数判断是否可以组成`std`套牌，计算每套牌所需的Joker数量，并确保不超过Joker的总数和每套牌的限制。

#### 2. 作者：A_zjzj (赞：11)
- **星级**：★★★★☆
- **关键亮点**：二分查找结合贪心策略，详细解释了如何判断合法性，代码简洁且易于理解。
- **个人心得**：作者通过二分查找和贪心策略的结合，确保每套牌中Joker的使用不超过限制。

```cpp
int zj(int x) {
    long long k=0;
    for(int i=1;i<=n;i++)
        k+=max(0,x-a[i]);
    if(k<=min(t,x))return 1;
    return 0;
}
```
- **核心实现思想**：通过`zj`函数计算每套牌所需的Joker数量，并确保不超过Joker的总数和每套牌的限制。

#### 3. 作者：Karry5307 (赞：6)
- **星级**：★★★★☆
- **关键亮点**：二分查找结合贪心策略，详细解释了二分查找的边界条件，并提供了测试数据验证。
- **个人心得**：作者通过测试数据验证了二分查找的边界条件，确保代码的正确性。

```cpp
inline ll check(ll mid) {
    li res=0;
    for(register int i=0;i<=n;i++)
        res+=max(mid-c[i],0);
    return res<=mid;
}
```
- **核心实现思想**：通过`check`函数计算每套牌所需的Joker数量，并确保不超过Joker的总数和每套牌的限制。

### 最优关键思路与技巧

1. **二分查找**：利用单调性，通过二分查找确定最大套牌数量。
2. **贪心策略**：计算每套牌所需的Joker数量，确保不超过Joker的总数和每套牌的限制。
3. **边界条件处理**：在二分查找中，正确处理边界条件，避免死循环或错误结果。

### 可拓展之处

该题目的解法可以拓展到其他类似的资源分配问题，如任务调度、资源优化等。通过二分查找和贪心策略的结合，可以解决类似的组合优化问题。

### 推荐题目

1. **P2440 木材加工**：二分查找结合贪心策略，解决木材切割问题。
2. **P2678 跳石头**：二分查找结合贪心策略，解决跳跃问题。
3. **P1182 数列分段 Section II**：二分查找结合贪心策略，解决数列分段问题。

### 个人心得总结

- **调试经历**：部分题解在二分查找的实现上存在细节问题，如边界条件处理不当，导致在某些数据上无法通过。
- **踩坑教训**：在二分查找中，正确处理边界条件非常重要，避免死循环或错误结果。
- **顿悟感想**：通过二分查找和贪心策略的结合，可以高效解决类似的组合优化问题。

---
处理用时：33.43秒
# 题目信息

# [yLOI2020] 不离

## 题目背景

> 乱玄黄时序，探风林实虚。  
> 我要你共我奇谈怪趣。  
> 任日月斑斓，待春秋兴残。  
> 我要我们有聚无散。  

——银临《不离》

## 题目描述

这道题目来自 zxy 哔哔，咕咕让哔哔选一首歌作为题目名，但是哔哔说没有想好，于是咕咕就帮他选了这首歌。

哔哔在玩一款叫做《暗黑破坏神》的游戏，某天哔哔灵光乍现，以游戏为背景出了一道神仙题并告诉了咕咕。咕咕并不会做，于是对题目进行了一定的简化。因此，经过简化后，这道题已经和《暗黑破坏神》没什么关系了。

游戏中人物有两个属性，我们分别称之为「力量」和「精神」，同时哔哔有 $n$ 件装备，穿戴第 $i$ 件装备需要人物在穿戴前的力量值不低于 $a_i$，精神值不低于 $b_i$。在穿戴第 $i$ 件装备后，人物的力量值会增加 $c_i$，精神值会增加 $d_i$。

哔哔可以自由选择穿装备的顺序，只要满足力量和精神不低于对应值，就可以穿戴该装备。

现在，咕咕想知道，如果想让哔哔穿戴上所有的装备，那么人物的初始力量值（即没有穿任何装备之前的力量值）最小应该是多少？在初始力量值最小的前提下，初始精神值（即没有穿任何装备之前的精神值）最小应该是多少？

显然，初始力量和初始精神都应该是非负整数。

## 说明/提示

### 样例 1 解释

当初始力量值为 $1$，精神值为 $2$ 时，可以穿戴第 $2$ 件装备。在穿戴该装备后，增加 $3$ 点力量和 $4$ 点精神，人物的属性变为 $4$ 点力量和 $6$ 点精神，此时可以穿戴第 $1$ 件装备。

### 数据规模与约定

**本题采用多测试点捆绑测试**。

- 子任务 $1$（$5$ 分）：保证 $n=0$。
- 子任务 $2$（$5$ 分）：保证 $n=1$。
- 子任务 $3$（$20$ 分）：保证 $a_i,b_i \le 100$，$n \le 6$。
- 子任务 $4$（$10$ 分）：保证 $a_i,b_i \le 10^5$，$n \le 6$。
- 子任务 $5$（$10$ 分）：保证 $a_i,b_i \le 10$。
- 子任务 $6$（$10$ 分）：保证 $a_i,b_i \le 100$。
- 子任务 $7$（$10$ 分）：保证 $b_i=0$，$n \le 6$。
- 子任务 $8$（$10$ 分）：保证 $b_i=0$。
- 子任务 $9$（$10$ 分）：保证 $n \le 6$。
- 子任务 $10$（$10$ 分）：无特殊约定。

对于全部的测试点，保证 $0 \le n \le 10^5$，$0 \le a_i,b_i,c_i,d_i \le 10^9$。

### 提示
有 $4$ 个样例文件，请见附加文件中的 forever.zip。

对于第三个样例，满足 $b_i = 0$。

## 样例 #1

### 输入

```
0
2
1 5 0 2
1 2 3 4```

### 输出

```
1 2```

# AI分析结果



### 综合分析与结论

题目核心是贪心策略与优先级队列的结合应用，通过分阶段处理独立属性（力量→精神），利用排序和堆结构动态维护可选装备。最优解法均基于以下关键点：

1. **属性独立处理**：先确定最小初始力量（与精神无关），再在此约束下确定最小精神。
2. **贪心排序与堆维护**：按力量排序后线性处理装备，用优先队列按精神要求动态选择最优装备。

---

### 精选题解（评分≥4星）

#### 1. 火车司机（5星）
**关键亮点**：
- **O(n log n) 线性贪心**，无需二分，效率更高。
- 两次排序+堆维护，思路清晰，代码简洁。
- 动态维护可用装备，保证每次选精神需求最小的装备。

**核心代码**：
```cpp
sort(p + 1, p + 1 + n, cmp); // 按力量排序
for (遍历计算初始力量) { ... }
priority_queue<node> q; // 按精神排序的小根堆
while (动态处理装备) {
    if (力量足够) q.push(装备);
    取出堆顶装备并更新精神...
}
```

#### 2. 一扶苏一（5星）
**关键亮点**：
- **二分答案+堆验证**，思路严谨。
- 独立二分力量与精神，代码模块化，可读性强。
- 适用于更复杂变种问题（如属性间存在依赖）。

**代码片段**：
```cpp
bool check1(long long x) { // 二分力量验证
    sort装备后遍历判断可行性...
}
bool check2(long long x) { // 堆处理精神验证
    priority_queue维护可用装备...
}
```

#### 3. LAB_Maple（4星）
**关键亮点**：
- **两次贪心+堆维护**，代码简洁高效。
- 强调调试经验与测试用例，实用性强。

**核心思路**：
```cpp
sort后先处理力量，再用优先队列处理精神...
```

---

### 最优思路总结
1. **力量处理**：将装备按力量需求排序，贪心累加不足部分得到最小初始力量。
2. **精神处理**：用优先队列按精神需求维护当前可装备项，每次取最小精神需求的装备穿戴，动态更新力量和精神。

---

### 拓展题目推荐
1. **P1086 花生采摘**（贪心+优先级选择）
2. **P1842 奶牛玩杂技**（双属性排序贪心）
3. **P1090 合并果子**（堆动态维护最小值）

---

### 个人心得摘录
- **火车司机**：发现力量与精神可独立处理，通过排序与堆的巧妙结合避免二分。
- **CuSO4_and_5H2O**：通过构造特殊测试用例验证贪心正确性，强调顺序选择的重要性。
- **AuCloud**：多次调试后意识到堆维护的必需性，强调动态更新装备列表的关键作用。

---
处理用时：48.33秒
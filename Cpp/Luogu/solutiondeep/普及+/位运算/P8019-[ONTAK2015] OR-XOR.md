# 题目信息

# [ONTAK2015] OR-XOR

## 题目描述

给定一个长度为 $n$ 的序列 $a_1, a_2, \cdots, a_n$，请将它划分为 $m$ 段连续的区间，设第 $i$ 段的费用 $c_i$ 为该段内所有数字的异或和，则总费用为 $c_1 \operatorname{or} c_2 \operatorname{or} \cdots \operatorname{or} c_m$。请求出总费用的最小值。

## 说明/提示

对于 $100\%$ 的数据，$1 \leq m \leq n \leq 5 \times 10^5$，$0 \leq a_i \leq 10^{18}$。

## 样例 #1

### 输入

```
3 2
1 5 7```

### 输出

```
3```

# AI分析结果

### 综合分析与结论
- **思路**：两题解均利用异或和按位或的性质，通过按位贪心求解。先将原序列转化为前缀异或和，再从高位到低位贪心，使每一位尽量为0，以得到总费用最小值。
- **算法要点**：利用前缀异或和简化计算，按位贪心决定每一位是否能为0。
- **解决难点**：处理高位贪心结果对低位贪心的影响，确保低位贪心不与高位冲突。

**题解1（云殊呀）**：
 - **星级**：4星
 - **关键亮点**：思路清晰，代码注释详细。通过flag数组标记高位不能作为断点的位置，在低位贪心时同时考虑异或和为0及该点是否为高位断点，有效处理高低位冲突问题。
```cpp
// 核心代码片段
for(j=62;j>=0;j--){
    ll tmp=0,sum=0;
    for(i=1;i<=n;i++){
        tmp ^= (a[i]>>j) & 1;
        if(!tmp &&!flag[i]) sum++;
    }
    if((tmp&1) || (sum<m)){
        ans+= 1ll<<j;
        continue;
    }
    tmp=0;
    for(i=1;i<=n;i++){
        tmp^= (a[i]>>j) & 1;
        if(tmp &&!flag[i]) flag[i]=1;
    }
}
```
**核心实现思想**：从高位到低位枚举每一位，统计该位前缀异或和为0且不与高位冲突的次数，若次数小于m或该位最终异或结果为1，则该位为1；否则更新断点标记。

**题解2（Unordered_OIer）**：
 - **星级**：3星
 - **关键亮点**：简洁阐述思路，但代码注释少，可读性较差。通过按位贪心，利用多个变量处理每一位的判断和状态更新。
```cpp
// 核心代码片段
for(ll now_pos = 1ll << 62; now_pos; now_pos>>=1)
{
    for(sum = 0, tmp = 1; tmp <= n; tmp++)
        sum += (val[tmp] & now_pos) > 0;
    if(sum & 1) ans ^= now_pos;
    else
    {
        for(flag = sum = 0, tmp = 1; tmp < n; tmp++)
        {
            flag ^= (val[tmp] & now_pos);
            xp[tmp] += flag, sum += (xp[tmp] == 1) & flag;
        }
        if(sum + tot + m > n)
        {
            ans ^= now_pos;
            for(flag = sum = 0, tmp = 1; tmp < n; tmp++)
            {
                flag ^= (val[tmp] & now_pos);
                xp[tmp] -= flag;
            }
        }
        else tot += sum;
    }
}
```
**核心实现思想**：从高位到低位枚举每一位，先统计该位为1的数量判断是否为1，若为0则进一步处理断点情况，判断能否满足分成m段的条件，决定该位是否为1。

### 最优关键思路或技巧
1. **按位贪心**：从高位到低位贪心，使每一位尽量为0，以最小化按位或结果。
2. **前缀异或和**：利用前缀异或和简化每段异或和的计算。
3. **处理高低位冲突**：通过标记高位不能作为断点的位置，在低位贪心时避免冲突。

### 同类型题或类似算法套路拓展
此类题目通常涉及位运算和贪心策略。常见套路是利用位运算性质（如异或、按位或），结合贪心思想从高位到低位处理每一位。类似题目可能会改变序列操作（如与、亦或等）或划分条件，但核心思路相似。

### 洛谷相似题目推荐
1. [P1250 种树](https://www.luogu.com.cn/problem/P1250)：涉及贪心策略，与本题贪心思想有相似之处。
2. [P2123 皇后游戏](https://www.luogu.com.cn/problem/P2123)：通过合理排序实现贪心，锻炼贪心思维。
3. [P1080 国王游戏](https://www.luogu.com.cn/problem/P1080)：同样是贪心算法，需寻找合适的贪心策略。

### 个人心得摘录与总结
两题解均未提及个人心得。 

---
处理用时：31.56秒
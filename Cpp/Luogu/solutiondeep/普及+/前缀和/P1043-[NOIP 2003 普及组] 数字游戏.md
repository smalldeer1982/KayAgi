# 题目信息

# [NOIP 2003 普及组] 数字游戏

## 题目描述

丁丁最近沉迷于一个数字游戏之中。这个游戏看似简单，但丁丁在研究了许多天之后却发觉原来在简单的规则下想要赢得这个游戏并不那么容易。游戏是这样的，在你面前有一圈整数（一共 $n$ 个），你要按顺序将其分为 $m$ 个部分，各部分内的数字相加，相加所得的 $m$ 个结果对 $10$ 取模后再相乘，最终得到一个数 $k$。游戏的要求是使你所得的 $k$ 最大或者最小。


例如，对于下面这圈数字（$n=4$，$m=2$）：

![](https://cdn.luogu.com.cn/upload/image_hosting/gy407k49.png)

要求最小值时，$((2-1)\bmod10)\times ((4+3)\bmod10)=1\times 7=7$，要求最大值时，为 $((2+4+3)\bmod10)\times (-1\bmod10)=9\times 9=81$。特别值得注意的是，无论是负数还是正数，对 $10$ 取模的结果均为非负值。

丁丁请你编写程序帮他赢得这个游戏。


## 说明/提示

**【题目来源】**

NOIP 2003 普及组第二题

## 样例 #1

### 输入

```
4 2
4
3
-1
2
```

### 输出

```
7
81
```

# AI分析结果

### 综合分析与结论
这些题解主要围绕将环形数字序列划分成指定数量部分，通过求和、取模与相乘操作，求解结果的最大最小值问题。破环成链、前缀和、动态规划（DP）是核心思路。多数题解采用DP，少数使用深度优先搜索（DFS）。DP题解中，状态表示与转移方程构建是关键，部分题解还进行了空间与时间复杂度的优化。

### 所选的题解
- **作者：dingcx（4星）**
    - **关键亮点**：思路清晰，详细阐述DFS思路及剪枝优化，代码简洁且注释丰富。
    - **个人心得**：强调剪枝重要性，不剪枝会致第4个测试点耗时极长。
    - **重点代码核心思想**：破环成链后，通过DFS枚举所有划分情况，用剪枝优化搜索。
    - **核心代码片段**：
```cpp
void dfs(int depth,int now,int value){//重磅dfs
    if(value>=ansmin&&value*n9[m-depth]<=ansmax) return;//剪枝
    int sum=0;
    if(depth==m){
        for(int i=now;i<=n;i++) sum+=a[i];//计算和
        ansmin=min(ansmin,value*mod10(sum));//比较
        ansmax=max(ansmax,value*mod10(sum));
        return;
    }
    for(int i=now;i<=(n-m+depth);i++){//遍历下一个点
        sum+=a[i];//前缀和
        dfs(depth+1,i+1,value*mod10(sum));//下一步计算
    }
}
```
- **作者：租酥雨（4星）**
    - **关键亮点**：全面总结类似DP题目的思路技巧，如破环成链、前缀和、初始化及状态表达，代码规范清晰。
    - **重点代码核心思想**：利用前缀和优化区间和计算，通过三维数组表示状态，依据状态转移方程进行动态规划求解。
    - **核心代码片段**：
```cpp
for (int i=2;i<=m;i++)//枚举分段数 
    for (int l=1;l<=2*n;l++)//枚举左端点 
        for (int r=l+i-1;r<=2*n;r++)//枚举右端点 
        {
            for (int k=l+i-2;k<r;k++)//枚举区间断点 注意范围 
            {
                S[l][r][i]=min (S[l][r][i],S[l][k][i-1]*mod(a[r]-a[k]));
                B[l][r][i]=max (B[l][r][i],B[l][k][i-1]*mod(a[r]-a[k]));
            }
        }
```
- **作者：Michigan_King（4星）**
    - **关键亮点**：详细分析区间DP的思考方式，包括破环成链、前缀和运用及状态数组定义，代码逻辑清晰。
    - **重点代码核心思想**：断环成链并维护前缀和，通过三维数组表示区间划分状态，按状态转移方程递推求解。
    - **核心代码片段**：
```cpp
for(int k=2;k<=m;k++)
    for(int l=1;l<=2*n;l++)
        for(int r=l+k-1;r<=2*n;r++)
            for(int p=l+k-2;p<r;p++)//枚举[l,r]之间的值
            {
                f_max[l][r][k]=max(f_max[l][r][k],f_max[l][p][k-1]*mod(sum[r]-sum[p]));
                f_min[l][r][k]=min(f_min[l][r][k],f_min[l][p][k-1]*mod(sum[r]-sum[p]));
            }
```

### 最优关键思路或技巧
- **破环成链**：通过开两倍空间数组，将环转化为链，便于后续处理。
- **前缀和**：用于快速计算区间和，降低时间复杂度。
- **动态规划**：合理定义状态数组，如用三维数组 `f[i][j][k]` 表示 `i` 到 `j` 区间分成 `k` 段的最值，构建状态转移方程求解。
- **剪枝优化**：如DFS中通过当前值与最值及预估上界比较，提前终止无效搜索，减少计算量。

### 可拓展之处
此类题目属于环形区间划分与最值求解问题，相似套路包括处理环形数据结构时破环成链，利用前缀和优化区间操作，以及依据问题特性构建动态规划模型。类似题目如区间合并、资源分配等场景下的最值求解。

### 推荐题目
- [P1880 石子合并](https://www.luogu.org/problemnew/show/P1880)：经典环形区间合并问题，与本题破环成链思路相似。
- [P1063 能量项链](https://www.luogu.org/problemnew/show/P1063)：同样是环形结构，通过合并操作求最值，考察区间DP。
- [P2858 [USACO06DEC]Milk Patterns G](https://www.luogu.org/problemnew/show/P2858)：虽非环形，但在处理序列划分与最值求解上，动态规划思路与本题相通。 

---
处理用时：34.41秒
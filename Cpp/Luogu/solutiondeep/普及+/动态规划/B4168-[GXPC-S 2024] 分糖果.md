# 题目信息

# [GXPC-S 2024] 分糖果

## 题目背景


小林最近迷上了博弈问题。

## 题目描述

有 $n$ 包糖果从左到右依次排成一行，第 $i$ 包糖果中有 $a_i$ 个糖果。小林和小伊从左到右对 $n$ 包糖果进行分配，分配权一开始在小林手里，小林可以将 $n$ 包糖果中最左端的糖果分配给自己或者小伊，本次分配中**没有拿到糖果**的人将拥有下一次的分配权。

如果小林和小伊都足够聪明，会采用最优的策略进行分配，保证自己最后拥有的糖果总数最多，如此分配 $n$ 轮后，求出小林和小伊中**糖果更多的那个人**所拥有的糖果数量。

## 说明/提示

样例解释：如下是他们的游戏过程。

- 小林将 $1$ 分给自己；此时小林和小伊的糖果数分别为 $1,0$；
- 小伊将 $3$ 分给小林；此时小林和小伊的糖果数分别为 $4,0$；
- 小伊将 $5$ 分给自己；此时小林和小伊的糖果数分别为 $4,5$；
- 小林将 $7$ 分给小伊；此时小林和小伊的糖果数分别为 $4,12$；
- 小林将 $9$ 分给自己；此时小林和小伊的糖果数分别为 $13,12$。

可以证明这是最优的游戏策略。


**本题采用捆绑测试。**

- Subtask 1（40pts）：保证 $n\le 20$；
- Subtask 2（60pts）：无额外约束。

对于 $100\%$ 的数据，保证 $1\le n,a_i\le 10^5$。

## 样例 #1

### 输入

```
5
1 3 5 7 9```

### 输出

```
13```

# AI分析结果



### 综合分析与结论
题解一采用逆向动态规划，维护当前先手的最大收益，通过简洁的转移方程和O(n)时间复杂度高效解决问题。题解二虽正确但状态设计复杂，代码冗余。题解一思路清晰且优化到位，适用于大规模数据。

### 精选题解
#### 题解一（作者：Sliarae） ⭐⭐⭐⭐⭐
**关键亮点**：  
- 逆向动态规划，状态设计巧妙，仅用两个变量维护当前最优解。
- 时间复杂度O(n)，空间O(1)，适合大数处理。
- 代码简洁，转移方程高效体现博弈决策。

**核心代码**：
```cpp
LL dp = 0, sum = 0; 
for (int i = n; i; --i) 
    dp = max(dp, a[i] + sum - dp), sum += a[i];
cout << max(dp, sum - dp) << '\n'; // 修正后的输出，确保比较两人最大值
```
**实现思想**：  
从后往前遍历数组，`sum`维护后缀和，`dp`表示当前先手的最大收益。每次决策取当前糖果或放弃，取最大值。最终输出两人中的较大值。

### 关键思路与技巧
- **逆向DP**：从后往前处理，避免重复计算子问题。
- **状态压缩**：仅用变量维护当前状态，空间优化至O(1)。
- **博弈分析**：通过总和与对方收益的差值推导当前最优选择。

### 类似题目推荐
1. [P2948 [USACO09OPEN]滑雪课Ski Lessons](https://www.luogu.com.cn/problem/P2948)  
2. [P1434 [SHOI2002]滑雪](https://www.luogu.com.cn/problem/P1434)  
3. [P1280 尼克的任务](https://www.luogu.com.cn/problem/P1280)

### 个人心得摘录
题解一代码最初未比较两人总分，可能导致错误。通过修正输出为`max(dp, sum - dp)`，确保正确性。调试时需注意总和与局部决策的关系。

---
处理用时：366.40秒
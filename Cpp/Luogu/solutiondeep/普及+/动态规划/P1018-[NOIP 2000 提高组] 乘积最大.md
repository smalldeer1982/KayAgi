# 题目信息

# [NOIP 2000 提高组] 乘积最大

## 题目背景

NOIP2000 提高组 T2

## 题目描述

今年是国际数学联盟确定的“2000——世界数学年”，又恰逢我国著名数学家华罗庚先生诞辰 90 周年。在华罗庚先生的家乡江苏金坛，组织了一场别开生面的数学智力竞赛的活动，你的一个好朋友 XZ 也有幸得以参加。活动中，主持人给所有参加活动的选手出了这样一道题目：


设有一个长度为 $N$ 的数字串，要求选手使用 $K$ 个乘号将它分成 $K+1$ 个部分，找出一种分法，使得这 $K+1$ 个部分的乘积能够为最大。


同时，为了帮助选手能够正确理解题意，主持人还举了如下的一个例子：


有一个数字串：$312$，当 $N=3,K=1$ 时会有以下两种分法：

1. $3  \times  12=36$ 
2. $31  \times   2=62$  

   
这时，符合题目要求的结果是：$31  \times  2 = 62$。


现在，请你帮助你的好朋友 XZ 设计一个程序，求得正确的答案。


## 说明/提示

**数据范围与约定**

对于 $60\%$ 的测试数据满足 $6≤N≤20$。  
对于所有测试数据，$6≤N≤40,1≤K≤6$。


## 样例 #1

### 输入

```
4 2
1231
```

### 输出

```
62```

# AI分析结果



### 综合分析与结论
本题核心在于动态规划与高精度处理。各题解主要采用两种思路：动态规划（DP）和DFS剪枝。由于数字长度可达40位，必须使用高精度，因此DFS解法若未正确实现高精度则存在缺陷。最优解法为DP结合高精度结构体，通过状态转移枚举乘号位置并维护最大乘积。

---

### 精选题解与评分

#### 1. 题解作者：liar_white （★★★★☆）
**关键亮点**  
- 结构体封装高精度运算，代码模块化清晰  
- 动态规划状态定义明确，`cut[i][j]`表示前i位放j个乘号的最大值  
- 详细处理取数、乘法、比较的高精度逻辑  

**核心代码思想**  
```cpp
struct node { // 高精度结构体
    int v; bool exi; int c[50];
};
node cut[50][10]; // DP状态数组
// 转移方程：cut[i][j] = max(cut[i][j], mul(cut[fr][j-1], culc(fr+1,i)))
```
通过逐层枚举乘号位置，维护每个状态的高精度值，最后合并剩余部分计算最终答案。

---

#### 2. 题解作者：FastIO_DP （★★★★★）
**关键亮点**  
- 高精度类（BI）实现完整，支持乘法和比较  
- 状态转移方程简洁，`dp[i][j]`表示前i位分j段的最大值  
- 代码结构清晰，高精度运算与DP分离，便于维护  

**核心代码片段**  
```cpp
struct BI { // 高精度类
    int d[100], len;
    BI operator*(const BI& o) const { /*...*/ } // 高精度乘法
    bool operator<(const BI& o) const { /*...*/ } // 比较
};
BI dp[50][10]; // DP状态
// 转移：dp[i][j] = max(dp[i][j], dp[k][j-1] * num(k+1,i))
```
通过预计算`num`函数快速获取子串数值，逐层递推更新DP表。

---

#### 3. 题解作者：XHCuteDog （★★★☆☆）
**关键亮点**  
- 三维数组处理高精度，思路类似标准DP  
- 代码包含详细注释，解释高精度存储顺序  
- 预处理`num`数组优化取数操作  

**不足**  
代码可读性略低，部分变量命名不够直观。

---

### 关键思路与技巧总结
1. **动态规划状态设计**：定义`dp[i][j]`为前i位使用j个乘号的最大乘积，通过枚举最后一个乘号位置k转移状态。
2. **高精度优化**：结构体封装大数运算，低位存储便于进位处理，实现乘法和比较的高效操作。
3. **预处理剪枝**：DFS解法中，剩余位置不足时提前剪枝，避免无效搜索。

---

### 类似题目推荐
1. **P1435 回文字符串**（区间DP与分割策略）  
2. **P1090 合并果子（加强版）**（高精度与贪心结合）  
3. **P1019 单词接龙**（DFS剪枝与字符串处理）  

---

### 调试与心得摘录
- **liar_white**提到中间变量解决赋值问题，反映高精度比较的隐式坑点。  
- **sunyt**的DFS未处理高精度，提醒注意数据范围对解法的影响。  
- **FastIO_DP**强调高精度类的模块化设计，提升代码复用性。  

总结：高精度实现需细致处理进位和比较，动态规划需明确状态转移路径，避免遗漏边界条件。

---
处理用时：51.20秒
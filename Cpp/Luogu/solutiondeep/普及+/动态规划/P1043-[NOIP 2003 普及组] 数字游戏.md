# 题目信息

# [NOIP 2003 普及组] 数字游戏

## 题目描述

丁丁最近沉迷于一个数字游戏之中。这个游戏看似简单，但丁丁在研究了许多天之后却发觉原来在简单的规则下想要赢得这个游戏并不那么容易。游戏是这样的，在你面前有一圈整数（一共 $n$ 个），你要按顺序将其分为 $m$ 个部分，各部分内的数字相加，相加所得的 $m$ 个结果对 $10$ 取模后再相乘，最终得到一个数 $k$。游戏的要求是使你所得的 $k$ 最大或者最小。


例如，对于下面这圈数字（$n=4$，$m=2$）：

![](https://cdn.luogu.com.cn/upload/image_hosting/gy407k49.png)

要求最小值时，$((2-1)\bmod10)\times ((4+3)\bmod10)=1\times 7=7$，要求最大值时，为 $((2+4+3)\bmod10)\times (-1\bmod10)=9\times 9=81$。特别值得注意的是，无论是负数还是正数，对 $10$ 取模的结果均为非负值。

丁丁请你编写程序帮他赢得这个游戏。


## 说明/提示

**【题目来源】**

NOIP 2003 普及组第二题

## 样例 #1

### 输入

```
4 2
4
3
-1
2
```

### 输出

```
7
81
```

# AI分析结果



### 综合分析与结论
本题考察环形数组分段求极值的动态规划问题。核心解法围绕区间DP展开，重点在于破环成链处理、状态转移方程设计、以及前缀和优化。DFS+剪枝方案在小数据下可行，但区间DP更具普适性。各题解中普遍采用的破环成链和三维状态定义是解题关键。

---

### 高星题解推荐（评分≥4★）

#### 1. 租酥雨（区间DP） 4.5★
**关键亮点**：  
- 清晰定义三维状态`f[l][r][k]`表示区间极值  
- 完整推导状态转移方程，强调初始化技巧  
- 代码结构规范，附带详细注释  
**个人心得**：  
> "求最小值时记得把数组初始化为极大值" —— 强调初始化的重要性

**核心代码**：
```cpp
for(int k=2;k<=m;k++)
    for(int l=1;l<=2*n;l++)
        for(int r=l+k-1;r<=2*n;r++)
            for(int p=l+k-2;p<r;p++) {
                f_max[l][r][k] = max(f_max[l][r][k], 
                    f_max[l][p][k-1] * mod(sum[r]-sum[p]));
                f_min[l][r][k] = min(f_min[l][r][k],
                    f_min[l][p][k-1] * mod(sum[r]-sum[p]));
            }
```

#### 2. dingcx（DFS+剪枝） 4★
**关键亮点**：  
- 独创剪枝策略：`value*9^{剩余段数} ≤ 当前最优解`  
- 破环成链的数组位移实现  
- 负数取模的特殊处理  
**个人心得**：  
> "不剪枝第4个测试点需约1000秒" —— 强调剪枝的必要性

**核心剪枝逻辑**：
```cpp
if(value >= ansmin && value*n9[m-depth] <= ansmax) return;
```

#### 3. Error_666（线性DP降维） 4★
**关键亮点**：  
- 将四维状态压缩至二维`f[i][j]`  
- 通过滚动数组优化空间复杂度  
- 更易理解的线性分段思想  

**状态定义**：
```cpp
int f[maxn][maxk]; // 前i个数分j段的最值
```

---

### 关键技巧总结
1. **破环成链**：将数组复制为`a[2n]`，枚举每个起点`i~i+n-1`
2. **区间DP模板**：
   ```python
   for 段数k from 2 to m:
       for 区间起点l:
           for 区间终点r = l + k - 1:
               for 分割点p in [l, r):
                   f[l][r][k] = max/min(f[l][p][k1] * f[p+1][r][k2])
   ```
3. **前缀和优化**：`sum[r] - sum[l-1]`快速计算区间和
4. **负数取模处理**：`((x%10)+10)%10`

---

### 拓展练习推荐
1. **环形石子合并** [P1880] - 区间DP经典  
2. **能量项链** [P1063] - 环形区间DP进阶  
3. **乘积最大** [P1018] - 线性分段极值问题

---
处理用时：56.28秒
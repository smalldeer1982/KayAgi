# 题目信息

# [NOIP 2007 普及组] 守望者的逃离

## 题目背景

NOIP2007 普及组 T3

## 题目描述

恶魔猎手尤迪安野心勃勃，他背叛了暗夜精灵，率领深藏在海底的娜迦族企图叛变。

守望者在与尤迪安的交锋中遭遇了围杀，被困在一个荒芜的大岛上。

为了杀死守望者，尤迪安开始对这个荒岛施咒，这座岛很快就会沉下去。到那时，岛上的所有人都会遇难。

守望者的跑步速度为 $17m/s$，以这样的速度是无法逃离荒岛的。庆幸的是守望者拥有闪烁法术，可在 $1s$ 内移动 $60m$，不过每次使用闪烁法术都会消耗魔法值 $10$ 点。守望者的魔法值恢复的速度为 $4$ 点每秒，只有处在原地休息状态时才能恢复。

现在已知守望者的魔法初值 $M$，他所在的初始位置与岛的出口之间的距离 $S$，岛沉没的时间 $T$。你的任务是写一个程序帮助守望者计算如何在最短的时间内逃离荒岛，若不能逃出，则输出守望者在剩下的时间内能走的最远距离。

注意：守望者跑步、闪烁或休息活动均以秒为单位，且每次活动的持续时间为整数秒。距离的单位为米。


## 说明/提示

对于 $30\%$ 的数据，$1  \le  T   \le  10$，$ 1   \le   S   \le  100$；

对于 $50\%$ 的数据，$1   \le  T   \le   10^3$，$ 1   \le  S  \le   10^4$；

对于 $100\%$ 的数据，$1   \le   T   \le   3\times  10^5$，$0   \le   M   \le   10^3$，$ 1   \le  S   \le   10^8$。


## 样例 #1

### 输入

```
39 200 4
```

### 输出

```
No
197
```

## 样例 #2

### 输入

```
36 255 10```

### 输出

```
Yes
6```

# AI分析结果



### 综合分析与结论
本题核心在于处理魔法闪烁与跑步的决策优化。各题解主要围绕贪心策略、动态规划、分情况模拟展开，最优解为贪心策略结合双状态维护，时间复杂度 O(T) 且空间高效。关键点在于优先使用魔法，同时维护两种状态的同步更新。

---

### 高星题解推荐

#### 1. 作者：wzr1125（★★★★★）
**核心亮点**：双状态同步更新、代码简洁高效、时空复杂度最优  
**思路**：维护闪现距离和跑步距离两个状态。每一秒优先使用魔法，若闪现距离超过跑步距离则更新跑步基准值。  
**代码核心**：
```cpp
for(int i=1;i<=t;i++){
    if(m>=10) m-=10,fla+=60,run+=17;
    else m+=4,run+=17;
    if(fla>run) run=fla;
    if(run>=s) { /* 输出Yes */ }
}
```
**个人心得**：作者通过"闪现覆盖跑步基准"的巧妙设计，避免了复杂的条件分支，代码仅需 15 行。

#### 2. 作者：qhr2023（★★★★☆）
**核心亮点**：状态压缩、双变量维护、代码极简  
**思路**：用 s1 表示混合策略的最远距离，s2 表示纯魔法距离。每秒更新 s2 后取 max(s1+17, s2) 作为新 s1。  
**代码核心**：
```cpp
for(int i=1; i<=t; i++){
    m>=10 ? (m-=10,s2+=60) : (m+=4); 
    s1 = max(s1+17, s2);
    if(s1 >= s) { /* 输出Yes */ }
}
```
**优化点**：省去显式跑步变量，直接复用 s1 的历史最优值。

#### 3. 作者：jingwenhan（★★★★☆）
**核心亮点**：双阶段处理、动态规划思想  
**思路**：先处理全魔法情况，再遍历时间用跑步优化。体现"先贪心再修补"的典型 DP 思路。  
**代码核心**：
```cpp
for(int i=1;i<=t;i++){ // 全魔法阶段
    if(m>=10) dp[i]=dp[i-1]+60, m-=10;
    else m+=4, dp[i]=dp[i-1];
}
for(int i=1;i<=t;i++){ // 跑步优化
    dp[i] = max(dp[i], dp[i-1]+17);
    if(dp[i]>=s) { /* 输出Yes */ }
}
```

---

### 关键优化技巧总结
1. **双状态维护**：同时跟踪纯魔法与混合策略的最优值，通过 `max` 操作保持同步更新
2. **时间线性处理**：将魔法恢复与消耗统一在 O(1) 时间内处理，避免分段计算的复杂性
3. **状态覆盖策略**：当闪现距离超越跑步时，直接以闪现为新的基准（本质是局部最优推导全局最优）

---

### 相似题目推荐
1. [P1808 过河](https://www.luogu.com.cn/problem/P1808) - 时间限制下的最优移动策略
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心策略的典型应用
3. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 时间约束下的资源分配问题

---

### 题解心得分野
- **调试教训**：多篇题解提到分情况模拟时边界条件易错（如剩余时间与所需距离的匹配）
- **顿悟时刻**：wzr1125 发现"闪现覆盖跑步基准"可简化所有决策，实现代码量骤减
- **性能认知**：动态规划解法在 T=3e5 时需用滚动变量，否则会 MLE（GLr137 题解评论区补充）

---
处理用时：58.58秒
# 题目信息

# 垃圾陷阱

## 题目描述

卡门――农夫约翰极其珍视的一条 `Holsteins` 奶牛――已经落了到 “垃圾井” 中。“垃圾井” 是农夫们扔垃圾的地方，它的深度为 $D$（$2 \le D \le 100$）英尺。

卡门想把垃圾堆起来，等到堆得与井深同样高或比井深更高（即，垃圾高度总和 $\geq D$）时，她就能逃出井外了。另外，卡门可以通过吃一些垃圾来维持自己的生命。

每个垃圾都可以用来吃或堆放，并且堆放垃圾不用花费卡门的时间。

假设卡门预先知道了每个垃圾扔下的时间 $t$（$1 \le t \le 1000$），以及每个垃圾堆放的高度 $h$（$1 \le h \le 25$）和吃进该垃圾能增加维持生命的时间 $f$（$1 \le f \le 30$），要求出卡门最早能逃出井外的时间，假设卡门当前体内有足够持续 $10$ 小时的能量，如果卡门 $10$ 小时内（不含 $10$ 小时，维持生命的时间同）没有进食，卡门就将饿死。特别地，若体力值为 $0$ 时吃下垃圾或逃出井外也不会饿死。

## 说明/提示

**【样例说明】**

卡门堆放她收到的第一个垃圾：$\mathrm{height}=9$；

卡门吃掉她收到的第 $2$ 个垃圾，使她的生命从 $10$ 小时延伸到 $13$ 小时；

卡门堆放第 $3$ 个垃圾，$\mathrm{height}=19$；

卡门堆放第 $4$ 个垃圾，$\mathrm{height}=20$。


## 样例 #1

### 输入

```
20 4
5 4 9
9 3 2
12 6 10
13 1 1```

### 输出

```
13```

# AI分析结果



### 综合分析
本题核心是动态规划中的背包思想，通过状态设计处理"堆叠"与"进食"两种选择。各题解普遍采用以下关键思路：
1. **时间排序预处理**：垃圾按掉落时间排序
2. **状态设计**：高度对应的最大存活时间（或反向设计）
3. **转移策略**：倒序遍历高度，避免状态覆盖
4. **双决策处理**：用max比较堆叠/进食的收益

### 优质题解推荐

#### 1. Dispwnl（5星）
**核心亮点**：
- 一维状态压缩：f[high] = life
- 简洁高效的转移逻辑，空间复杂度O(D)
- 及时终止判断，代码量极小

**关键代码**：
```cpp
sort(c+1,c+1+g,cmp);
f[0] = 10;
for(int i=1;i<=g;i++)
  for(int j=d;j>=0;j--)
    if(f[j] >= c[i].t) {
        if(j + c[i].h >= d) { // 堆叠后能逃脱
            cout << c[i].t;
            return 0;
        }
        f[j + c[i].h] = max(f[j+c[i].h], f[j]); // 堆叠
        f[j] += c[i].l; // 进食
    }
```

#### 2. wjyyy（4星）
**核心亮点**：
- 二维状态清晰：dp[i][j]表示处理前i个垃圾，高度j的最大生命
- 详细处理时间差计算，规避时间陷阱
- 边界条件处理严谨（如负数初始化）

**调试心得**：
> "被体力值恰好为0的情况卡了一天...必须将dp数组初始化为负值"

#### 3. 千载煜（4星）
**创新点**：
- 以剩余生命为状态维度：dp[j] = max_height
- 双重转移条件判断（存活到垃圾时间）
- 时间与生命分离处理思路新颖

### 关键思路总结
**核心技巧**：
```python
for 每个垃圾:
    for 高度 in 倒序:  # 避免重复计算
        if 当前生命足够存活到垃圾时间:
            更新堆叠后的高度状态
            更新进食后的生命状态
        if 任意高度满足逃脱条件:
            立即返回当前时间
若未逃脱:
    返回最大存活时间
```

**思维突破点**：
- 将垃圾处理视为背包物品的两种"使用方式"
- 用高度作为主状态维度，生命作为状态值
- 倒序遍历保证无后效性，类似01背包优化

### 拓展练习
1. [P1048 采药](https://www.luogu.com.cn/problem/P1048)（经典01背包）
2. [P1941 飞扬的小鸟](https://www.luogu.com.cn/problem/P1941)（多状态跳跃问题）
3. [P1510 精卫填海](https://www.luogu.com.cn/problem/P1510)（体积与价值双重约束）

---
处理用时：61.61秒
# 题目信息

# 烹调方案

## 题目背景

由于你的帮助，火星只遭受了最小的损失。但 gw 懒得重建家园了，就造了一艘飞船飞向遥远的 earth 星。不过飞船飞到一半，gw 发现了一个很严重的问题：肚子饿了 ~。

gw 还是会做饭的，于是拿出了储藏的食物准备填饱肚子。gw 希望能在 $T$ 时间内做出最美味的食物，但是这些食物美味程度的计算方式比较奇葩，于是绝望的 gw 只好求助于你了。

## 题目描述

一共有 $n$ 件食材，每件食材有三个属性，$a_i$，$b_i$ 和 $c_i$，如果在 $t$ 时刻完成第 $i$ 样食材则得到 $a_i-t\times b_i$ 的美味指数，用第 $i$ 件食材做饭要花去 $c_i$ 的时间。

众所周知，gw 的厨艺不怎么样，所以他需要你设计烹调方案使得美味指数最大。

## 说明/提示

### 数据范围及约定

- 对于 $40\%$ 的数据 $1 \le n \le 10$；
- 对于 $100\%$ 的数据 $1 \le n \le 50$。

所有数字均小于 $10^5$。

### 题目来源

tinylic 改编


## 样例 #1

### 输入

```
74 1
502
2
47
```

### 输出

```
408```

# AI分析结果



### 综合分析与结论
题目核心在于动态规划与贪心排序的结合：由于物品价值随时间变化，需通过排序确定最优选择顺序，再转化为01背包问题。关键点在于推导排序条件（c[x]*b[y] < c[y]*b[x]）及正确处理数值溢出（使用long long）。

---

### 精选题解列表

#### 1. kkksc03（⭐⭐⭐⭐⭐）
**关键亮点**：  
- 数学推导清晰，通过相邻物品比较得出排序条件，逻辑严密。  
- 代码简洁规范，初始化与状态转移处理得当。  
- 使用`long long`避免溢出，鲁棒性强。  

**核心代码**：
```cpp
bool cmp(node a, node b) {
    return (LL)a.c * (LL)b.b < (LL)b.c * (LL)a.b;
}
// 背包部分
for (i = 0; i < n; i++) {
    for (j = T; j >= 0; --j)
        if (f[j] != -1 && j + a[i].c <= T)
            f[j + a[i].c] = max(f[j + a[i].c], f[j] + (LL)a[i].a - (LL)(j + a[i].c) * (LL)a[i].b);
}
```

#### 2. zjy111（⭐⭐⭐⭐）
**关键亮点**：  
- 强调不开`long long`的后果，提供错误案例分析。  
- 从错误代码逐步修正，展示调试过程，实战性强。  
- 代码中注释明确，适合新手学习。  

**核心代码**：
```cpp
bool cmp(thing a,thing b){
    return a.b*b.c > b.b*a.c;
}
// 背包转移
for(int j=t;j>=a[i].c;j--)
    f[j]=max(f[j],f[j-a[i].c]+a[i].a-a[i].b*j);
```

#### 3. henry_y（⭐⭐⭐⭐）
**关键亮点**：  
- 提供不等式推导的完整步骤，帮助理解排序条件。  
- 代码精简，直接展示核心逻辑。  
- 附博客链接拓展学习，适合进阶练习。  

**个人心得**：  
> “开始直接写了一个裸01背包30分...发现因为有$b[i]$属性所以顺序影响答案，瞬间懂了。”

---

### 最优思路总结
1. **排序条件推导**：比较相邻物品的贡献差异，得出排序规则`c[i]*b[j] < c[j]*b[i]`。  
2. **动态规划优化**：排序后转化为标准01背包，状态转移时计算时间相关价值。  
3. **数值处理**：使用`long long`防止中间计算溢出，尤其是排序和状态转移时。  

---

### 拓展与举一反三
1. **类似题目**  
   - [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)：基础01背包。  
   - [P1156 垃圾陷阱](https://www.luogu.com.cn/problem/P1156)：时间依赖型DP。  
   - [P2871 [USACO07DEC]Charm Bracelet](https://www.luogu.com.cn/problem/P2871)：标准01背包变体。  

2. **调试技巧**  
   - 遇到WA时优先检查数据范围和溢出问题。  
   - 对贪心排序类题目，可通过小规模数据验证排序规则的正确性。  

3. **思维模式**  
   - 将动态规划与贪心结合，通过局部最优推导全局最优，适用于“顺序影响结果”的场景。

---
处理用时：49.10秒
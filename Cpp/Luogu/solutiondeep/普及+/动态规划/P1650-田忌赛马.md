# 题目信息

# 田忌赛马

## 题目描述

我国历史上有个著名的故事： 那是在 $2300$ 年以前。齐国的大将军田忌喜欢赛马。他经常和齐王赛马。他和齐王都有三匹马：常规马，上级马，超级马。一共赛三局，每局的胜者可以从负者这里取得 $200$ 银币。每匹马只能用一次。齐王的马好，同等级的马，齐王的总是比田忌的要好一点。于是每次和齐王赛马，田忌总会输 $600$ 银币。

田忌很沮丧，直到他遇到了著名的军师――孙膑。田忌采用了孙膑的计策之后，三场比赛下来，轻松而优雅地赢了齐王 $200$ 银币。这实在是个很简单的计策。由于齐王总是先出最好的马，再出次好的，所以田忌用常规马对齐王的超级马，用自己的超级马对齐王的上级马，用自己的上级马对齐王的常规马，以两胜一负的战绩赢得 $200$ 银币。实在很简单。

如果不止三匹马怎么办？这个问题很显然可以转化成一个二分图最佳匹配的问题。把田忌的马放左边，把齐王的马放右边。田忌的马 A 和齐王的 B 之间，如果田忌的马胜，则连一条权为 $200$ 的边；如果平局，则连一条权为 $0$ 的边；如果输，则连一条权为 $-200$ 的边……如果你不会求最佳匹配，用最小费用最大流也可以啊。 然而，赛马问题是一种特殊的二分图最佳匹配的问题，上面的算法过于先进了，简直是杀鸡用牛刀。现在，就请你设计一个简单的算法解决这个问题。


## 说明/提示

### 数据规模与约定

- 对于 $20\%$ 的数据，$1\le N\le 65$；
- 对于 $40\%$ 的数据，$1\le N\le 250$；
- 对于 $100\%$ 的数据，$1\le N\le2000$。


## 样例 #1

### 输入

```
3
92 83 71
95 87 74```

### 输出

```
200```

# AI分析结果



### 综合分析与结论
该题本质是博弈匹配问题，贪心算法是最高效解法（O(n log n)），动态规划在数据规模较大时存在性能瓶颈。关键点在于通过排序后双指针策略，优先用最优资源对抗、合理牺牲最差资源。

---

### 高分题解推荐 (≥4★)

#### 1. 北街的九命貓 (5★)
**核心亮点**：  
- 清晰的贪心策略三步骤：快马对决、慢马消耗、平局特判  
- 代码结构简洁，逻辑严密，通过左右指针实现O(n)匹配  
- 包含对等马平局时的特殊处理，避免无效扣分  

**关键代码**：
```cpp
sort(tian+1,tian+1+n,cmp); // 降序排序
for(i=1,j=1,ii=n,jj=n; i<=ii; ) {
    if(tian[i]>king[j]) ans+=200, i++,j++;     // 快马能赢
    else if(tian[i]<king[j]) ans-=200, j++,ii--; // 用最慢马消耗
    else {  // 平局时比较最慢马
        if(tian[ii]>king[jj]) ans+=200, ii--,jj--;
        else ans -= (tian[ii]<king[j]), ii--, j++;
    }
}
```

#### 2. OItby (4★)
**核心亮点**：  
- 提供DP与贪心双解法，适合不同数据规模  
- 动态规划状态定义清晰（f[i][j]表示i场用j匹强马）  
- 空间优化版DP将二维数组压缩为一维  

**关键DP方程**：
```cpp
f[i][j] = max(
    f[i-1][j] + compare(田忌后段马, 齐王i),
    f[i-1][j-1] + compare(田忌前段马, 齐王i)
)
```

#### 3. shadowice1984 (4★)
**核心亮点**：  
- 强调平局时不扣分的特判（易错点）  
- 使用指针操作提升代码可读性  
- 对快马平局时的策略调整有详细说明  

**关键调试经验**：
> "当田忌最慢马与齐王最快马平局时，不能扣分！否则只能得10分。加特判`if(tian[la]==king[tw])`跳过扣分"

---

### 最优解题思路提炼
1. **双排序降序**：田忌与齐王的马均按速度降序排列  
2. **四指针贪心**：  
   - 田忌快马能赢 → 直接对决  
   - 田忌快马必输 → 用最慢马消耗对方快马  
   - 快马平局时，若最慢马能赢则对决，否则继续消耗  
3. **平局零和策略**：当双方马速相等时，避免无谓扣分  

---

### 相似题目推荐
1. [P2587 泡泡堂](https://www.luogu.com.cn/problem/P2587) - 田忌赛马变形题  
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心策略应用  
3. [P1255 数楼梯](https://www.luogu.com.cn/problem/P1255) - 动态规划空间优化  

---

### 核心技巧总结
- **贪心排序预处理**：将双方资源排序是后续策略的基础  
- **牺牲次优资源**：当无法取得优势时，用最差资源抵消对方最优资源  
- **指针代替数组操作**：通过头尾指针动态维护可用资源范围  
- **状态压缩优化DP**：将二维DP优化为一维滚动数组降低空间复杂度

---
处理用时：51.57秒
# 题目信息

# 机器人小Q

## 题目描述

成功派送完这个大单后，餐厅决定引入一名新成员：机器人小 Q。小 Q 的到来让餐厅的客源增加了不少，但是，一段时间之后，新的问题又出现了，小 Q 和我们可不一样，如果要让他工作的话，我们得给他输入能量以保持体力，而小 Q 的能量菜单表上已经按一定顺序给出了 $N$ 个单位的能量值，但是每个单位的能量由于来源不同，需要消耗一定的时间摄入。已知小 Q 每天充电的时间上限值为 $119$，如果时间超出的话就会自动崩溃，大家都想让小 Q 留下来，经过研究之后，决定派 HWX 和 XYF 去和老板谈判，考虑角度不一样，LXC 老板才不想听什么辛酸流泪史，他只想知道，若是想让小 Q 获得 $k$ 单位的能量（也就是能量表中可以不接受某些能量）最少需要几天来充电。

## 说明/提示

### 样例解释

只接收 $1,1,118$。显然这需要 $2$ 天。

### 数据规模

对于 $30\%$ 的数据，有 $1\le K\le N\le 20$。

对于 $100\%$ 的数据，有 $1\le K\le N\le 3000$。

## 样例 #1

### 输入

```
7 3
1 119 119 1 120 120 118
```

### 输出

```
2
```

# AI分析结果



### 综合分析与结论
题目要求在顺序能量列表中选K个单位，使充电天数最少。各题解均采用动态规划，核心在于维护「天数」与「最后一天充电时长」的双状态。最优解法需正确处理两种情况：当前能量追加到最后一天或开启新的一天，并在状态转移时优先最小化天数，其次最小化最后一天时长。

---

### 精选题解列表

#### 1. LeavingZzz（5星）
**关键亮点**：
- 三维状态设计清晰：`f[i][j][0]`为最后一天时长，`f[i][j][1]`为总天数
- 预处理过滤无效能量（>119的直接丢弃）
- 分类讨论追加/新增的逻辑严谨，代码可读性高

**代码核心**：
```cpp
if (F[i-1][j-1][0] + w[i] > 119) {
    // 新增一天的情况
    if (F[i-1][j-1][1] + 1 < F[i][j][1]) {
        F[i][j][1] = F[i-1][j-1][1] + 1;
        F[i][j][0] = w[i];
    }
} else {
    // 追加到最后一天的情况
    if (F[i-1][j-1][1] < F[i][j][1]) {
        F[i][j][1] = F[i-1][j-1][1];
        F[i][j][0] = F[i-1][j-1][0] + w[i];
    }
}
```

#### 2. _Fatalis_（4星）
**关键亮点**：
- 详细分析贪心策略的误区，如选前k小可能不成立
- 状态转移中处理「天数相同但最后一天时长更优」的情况
- 代码中显式处理最后一天未完成的情况（`+ (t[n][k] != 0)`）

**个人心得引用**：
> "天数相同时，最后一天所用的能量肯定越少越好。这使后续能更灵活分配能量。"

#### 3. pikabi（4星）
**关键亮点**：
- 强调顺序选择的必要性，给出反例hack错误贪心
- 状态转移逻辑与主流解法一致，代码结构简洁
- 输出时额外处理最后一天未完成的情况

**代码核心**：
```cpp
if (f[i][j][2] > 0) 
    f[i][j][0]++;
ans = min(ans, f[i][m][0]);
```

---

### 关键思路总结
1. **双状态维护**：同时记录最小天数和对应的最后一天充电时长，确保在转移时优先优化天数。
2. **预处理优化**：过滤所有超过119的能量单位，减少无效计算。
3. **分类转移逻辑**：当追加能量超过上限时开启新天，否则合并到当前天，并通过双重比较（天数和时长）保证最优性。

---

### 推荐相似题目
1. [P1064 金明的预算方案](https://www.luogu.com.cn/problem/P1064)（依赖分组+状态压缩DP）
2. [P1541 乌龟棋](https://www.luogu.com.cn/problem/P1541)（顺序选择与分组决策）
3. [P1049 装箱问题](https://www.luogu.com.cn/problem/P1049)（容量限制下的最优装载）

---
处理用时：64.18秒
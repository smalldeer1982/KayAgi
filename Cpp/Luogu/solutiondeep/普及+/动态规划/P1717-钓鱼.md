# 题目信息

# 钓鱼

## 题目描述

话说发源于小朋友精心设计的游戏被电脑组的童鞋们藐杀之后非常不爽，为了表示安慰和鼓励，VIP999 决定请他吃一次“年年大丰收”，为了表示诚意，他还决定亲自去钓鱼。

但是，因为还要准备 NOIP2013, z 老师只给了他 $H$ 个小时的空余时间，假设有 $n$ 个鱼塘都在一条水平路边，从左边到右编号为 $1,2,3\dots n$ 。

VIP 是个很讲究效率的孩子，他希望用这些时间钓到尽量多的鱼。他从湖1出发，向右走，有选择的在一些湖边停留一定的时间钓鱼，最后在某一个湖边结束钓鱼。他测出从第 $i$ 个湖到 $i+1$ 个湖需要走 $5 \times t_i$ 分钟的路，还测出在第 $i$ 个湖边停留，第一个 $5$ 分钟可以钓到鱼 $f_i$，以后再每钓 $5$ 分钟鱼，鱼量减少 $d_i$。为了简化问题，他假定没有其他人钓鱼，也不会有其他因素影响他钓到期望数量的鱼。请编程求出能钓最多鱼的数量。


## 说明/提示

数据范围：$1\le H \le 16,2\le n \le 25,1\le f_i\le 200,0\le d_i\le 20,1\le t_i\le 20$。

## 样例 #1

### 输入

```
2
1
10 1
2 5
2
```

### 输出

```
31```

# AI分析结果



### 综合分析与结论
本题核心在于如何在有限时间内选择最优钓鱼策略，主要解法围绕**贪心思想+枚举终点**展开。关键难点在于：
1. 时间分配需结合路径时间与钓鱼效率
2. 鱼量动态衰减的最优选择策略

各题解中，优先队列优化贪心法（O(n^2 log n)）与动态规划（O(n^2T^2)）是主流思路，前者更高效清晰，后者提供不同视角但复杂度较高。

---

### 高星题解推荐

#### 1. [Cripple_Abyss] 优先队列+贪心（⭐⭐⭐⭐⭐）
**核心亮点**：
- 清晰枚举终点后完全消除路径干扰
- 优先队列动态维护最大值（O(log n)取最优）
- 代码简洁易读，复杂度最优

**关键代码**：
```cpp
priority_queue<node> q;
for(int i=1; i<=n; i++){
    int t1 = h - 路径时间;
    while(t1>0 && q.top().s>0){
        node v = q.top(); 
        ans += v.s;
        q.pop();
        q.push({v.s-v.d, v.d});
        t1 -=5;
    }
}
```

#### 2. [Sky_Art] 朴素贪心（⭐⭐⭐⭐）
**核心亮点**：
- 直接模拟鱼量衰减过程
- 前缀和预处理路径时间
- 适合理解贪心本质，无需高级数据结构

**优化点**：
```c
while(1){
    int max_id = 遍历找最大值;
    if(鱼量<=0) break;
    sum += 当前鱼量;
    更新鱼量并检查时间;
}
```

#### 3. [Randolph、] 动态规划（⭐⭐⭐）
**独特价值**：
- 提供背包问题建模视角
- 状态转移方程体现时间分配策略  
**状态定义**：
`f[i][j]`表示前i个湖耗时j的最大鱼量

---

### 最优关键思路总结
1. **枚举终点策略**：计算到达每个终点i的剩余时间 `H - sum(t[1..i-1])`
2. **优先队列维护**：将前i个湖的初始鱼量存入堆，每次取最大值钓鱼
3. **时间片划分**：以5分钟为单位处理，每次操作后更新鱼量并重新入堆

---

### 拓展与同类题推荐
1. **类似贪心+堆**：[P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
2. **时间分配DP**：[P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)  
3. **路径决策优化**：[P1944 最长括号匹配](https://www.luogu.com.cn/problem/P1944)

---

### 题解中的调试经验
1. **时间单位转换**：多位作者强调需将小时转为分钟（`h *= 60`）
2. **负时间处理**：需判断 `if(h<0) break` 避免死循环（Space_Gold_Trash）
3. **堆的清空**：每次枚举新终点时要重置堆（Social_Zhao）

---

> 总结：优先队列解法在时间效率和代码简洁性上表现最优，适合作为标准解法掌握。动态规划方法可作为拓展思路，帮助理解多维状态设计。

---
处理用时：51.20秒
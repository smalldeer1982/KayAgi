# 题目信息

# 数列

## 题目描述

虽然 msh 长大了，但她还是很喜欢找点游戏自娱自乐。有一天，她在纸上写了一串数字：$1, 1, 2, 5, 4$。接着她擦掉了一个 $1$，结果发现剩下 $1, 2, 4$ 都在自己所在的位置上，即 $1$ 在第 $1$ 位，$2$ 在第 $2$ 位，$4$ 在第 $4$ 位。她希望擦掉某些数后，剩下的数列中在自己位置上的数尽量多。她发现这个游戏很好玩，于是开始乐此不疲地玩起来……不过她不能确定最多能有多少个数在自己的位置上，所以找到你，请你帮忙计算一下！


## 说明/提示

### 数据范围及约定

- 对于 $20\%$ 的数据，$n\leq 20$；
- 对于 $60\%$ 的数据，$n\leq 100$；
- 对于 $100\%$ 的数据，$n\leq 10^3$。


## 样例 #1

### 输入

```
5

1 1 2 5 4

```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
本题核心是通过动态规划处理序列删数问题，最优解法均采用二维或压缩至一维的DP状态。核心思路是：**前i个数删j个时，当前数位置为i-j，若a[i]==i-j则贡献+1**。空间优化至一维的解法更高效。

### 高星题解推荐
#### 1. 作者：muyang_233（5星）
**关键亮点**：
- 状态定义清晰，转移方程完整覆盖删除/保留情况。
- 代码简洁，正确处理j=0的边界。
- 实时更新全局最大值，避免二次遍历。

**核心代码**：
```cpp
for (int i=1;i<=n;i++){
    for (int j=0;j<=i;j++){
        if (j>0) dp[i][j]=dp[i-1][j-1];
        dp[i][j]=max(dp[i][j],dp[i-1][j]+(a[i]==i-j));
        ans=max(ans,dp[i][j]);
    }
}
```

#### 2. 作者：Siyuan（5星）
**关键亮点**：
- 一维滚动数组优化，空间复杂度O(n)。
- 倒序枚举j避免状态覆盖，代码极简。
- 状态转移逻辑高度浓缩，体现背包式优化思想。

**核心代码**：
```cpp
for(int i=1; i<=n; i++)
    for(int j=i; j>=1; j--)
        f[j]=max(f[j],f[j-1]+(a[i]==j));
```

#### 3. 作者：__Hacheylight__（4星）
**关键亮点**：
- 状态定义为保留j个数的答案，思维新颖。
- 代码仅10行，高效实现二维DP。
- 最终遍历所有可能的j取最大值。

**核心代码**：
```cpp
for(int i=1;i<=n;i++) 
    dfr(j,i,1)
        if(a[i]==j) f[j]=max(f[j],f[j-1]+1);
        else f[j]=max(f[j],f[j-1]);
```

### 关键思路与技巧
1. **动态规划状态定义**：核心在于将删除次数与位置偏移关联，定义`dp[i][j]`为前i个删j个时的最大匹配数。
2. **滚动数组优化**：通过逆序更新j维度，将二维状态压缩至一维，大幅节省空间。
3. **实时答案更新**：在DP过程中直接维护全局最大值，避免最后遍历整个DP表。

### 拓展建议
- **同类题目**：可练习类似删数问题如[P1106 删数问题](https://www.luogu.com.cn/problem/P1106)，或位置敏感DP如[P1057 传球游戏](https://www.luogu.com.cn/problem/P1057)。
- **思维延伸**：尝试将问题转化为最长递增子序列模型（如某些题解中提到的条件约束LIS）。

### 推荐练习题
1. [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091)（双向LIS模型）
2. [P1439 最长公共子序列](https://www.luogu.com.cn/problem/P1439)（LCS转LIS优化）
3. [P1944 最长括号匹配](https://www.luogu.com.cn/problem/P1944)（序列匹配与DP结合）

### 个人心得摘录
- **边界处理**：多位作者强调j=0时的特判，如`j>0`条件判断避免数组越界。
- **调试经验**：某题解提到因初始化错误导致WA，警示需仔细检查初始状态设置。
- **思维突破**："位置只与删除次数有关"的洞察是解本题的关键，体现了动态规划的无后效性本质。

---
处理用时：87.05秒
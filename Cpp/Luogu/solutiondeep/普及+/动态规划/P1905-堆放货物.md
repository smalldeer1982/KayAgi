# 题目信息

# 堆放货物

## 题目背景

Caesar 看了你建设的城市后非常满意，提拔你担任 Genoa 的地方总督，并加薪 $50$ 第纳尔。最近他又写信给你说：Genoa 不能只靠 Rome 的财政扶持，你必须开展城市贸易增加财政收入。

在花费 $500$ 第纳尔开通了至 Capua 的商路后，来自 Capua 的船只源源不断地驶来，Genoa 急需建立一个仓库来临时存放送往 Capua 的货物。

## 题目描述

Genoa 的货物有三种：陶器，家具，大理石，共有 $n$ 个。他们的重量分别为 $1$，$2$，$3$ 个单位。现在，有 $p$ 艘 Capua 的船只在等待着仓库的货物，你应该将仓库里的货物分成 $p$ 堆，堆放规则如下：

- 同一堆中，重量从下至上应该是递减的（显然不能把大理石堆放在陶器或家具上）。
- 任意两堆重量之差不能超过 $3$ 个单位，否则会因分配过于不均发生船只间的冲突。

请你完成这个任务，给出一种可行的方案。


## 说明/提示

#### 数据规模与约定

对于全部的测试点，保证 $2 \leq n \leq 10^3$，$1 \leq p \leq \lfloor\frac n 2 \rfloor$，$1 \leq a_i \leq 3$。

#### 说明

感谢 @cn：苏卿念 提供spj。

spj说明：

```
score:ouo：你的输出里面有不是'1','2','3',' ','\n','\r'的东西，具体以ASCII的第X号字符
score:pvp：你在第x组的时候装下了超过规定数量的'3'|'2'|'1'。
score:TAT：蛇皮judge没能读入到想要读入的东东(类似于你直接提交了一个puts(" / 特别特别多的空格/"))
score:qaq：你把重量为w1的货物放到了w2上面(w1>w2)在第i组的第j个货物
score:ovo：你没有装足够的x
score:qwq：你第i组和第j组的差的绝对值>3了，(要打架了)，第i组的重量和为x，第j组的重量和为y。
score:pwp：答案正确，恭喜你嘤嘤嘤
```

## 样例 #1

### 输入

```
6
3
3 2 2 1 1 1
```

### 输出

```
3 1
2 1
2 1
```

# AI分析结果



### 综合分析与结论
题目要求将货物分成递减堆且重量差≤3。核心难点在于保证堆内递减的同时控制堆间重量差。各题解主要采用以下策略：
1. **排序+均摊策略**：将货物降序排列后，通过轮转、分层或蛇形填充等方式均分到各堆，利用货物重量离散性保证差值。
2. **贪心维护最小堆**：使用优先队列动态选择当前总重量最小的堆，确保增量最小化。
3. **分类讨论余数分配**：按3/2/1的余数分布调整分配顺序。

最优思路为**降序排序+轮转均摊**，其正确性基于：
- 递减排列保证堆内有序。
- 均摊后各堆数量差≤1，结合最大单重3，总重量差必≤3。

### 高星题解推荐
#### 1. 作者：Msy153（★★★★★）
**关键亮点**：极简实现，轮转分配确保自然递减。
- 思路：降序排列后直接轮转填入各堆。
- 正确性：轮转使各堆数量均衡，降序排列保证堆内递减。
- 代码简洁，时间复杂度O(n log n)。

**核心代码**：
```cpp
sort(a, a+n, greater<int>()); // 降序排序
for(int i=0; i<n; i++) {
    ss[i%p] << a[i] << " "; // 轮转分配
}
```

#### 2. 作者：霜月骑士（★★★★☆）
**关键亮点**：蛇形填充均衡数量差。
- 思路：按1→p→1的顺序循环填充，使各堆数量差≤1。
- 正确性：通过往返填充避免连续偏向某一堆，控制重量差。

**核心代码**：
```cpp
while(num <= n) {
    for(i=1; i<=p && num<=n; i++) v[i].push_back(a[num++]); // 正向填充
    for(i=p; i>=1 && num<=n; i--) v[i].push_back(a[num++]); // 反向填充
}
```

#### 3. 作者：mot1ve（★★★★☆）
**关键亮点**：分层填充保证堆内递减。
- 思路：每层依次填满各堆，形成多层递减结构。
- 正确性：每层元素递减，层内均匀分配控制总重量差。

**核心代码**：
```cpp
for(int i=1; i<=n; i++) {
    cnt++;
    if(cnt > p) cnt=1, tot++; // 换层
    b[cnt][tot] = a[i]; // 分层填充
}
```

### 关键思路与技巧
1. **排序降序**：确保堆内递减的基础。
2. **轮转/蛇形分配**：均摊数量差异，结合离散重量特性控制总差。
3. **避免复杂分治**：直接均摊在本题约束下更高效。

### 拓展与举一反三
- **同类问题**：任务均分（如LeetCode 2178）、资源调度（如CF 1526C2）。
- **算法套路**：贪心均摊、离散值约束下的分配策略。

### 推荐习题
1. **P1094 纪念品分组**（贪心双指针，均分最大值）
2. **P2123 皇后游戏**（排序策略影响均摊结果）
3. **P1314 聪明的质检员**（二分答案结合贪心验证）

### 个人心得摘录
- **Msy153**：“暴力骗分整一波”——直接贪心有时能简化问题。
- **霜月骑士**：“STL大法好”——善用语言特性简化代码。
- **ddwqwq**：优先队列需注意堆内顺序合法性，输出前排序可能掩盖逻辑错误。

---
处理用时：158.38秒
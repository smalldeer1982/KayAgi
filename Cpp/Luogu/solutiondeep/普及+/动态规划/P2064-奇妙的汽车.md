# 题目信息

# 奇妙的汽车

## 题目描述

你有着一辆奇妙的汽车，这辆汽车有着自动加速的功能。打个比方吧，第1天你驾驶着它可以行驶a路程，那么第2天你可以让它所走的路程增加到第1天的2~9倍（必须是其中一个整数），也就是2a~9a，第3天它所行驶的路程就将达到第2天的2~9倍……也就是说，这辆车在第i天所走的路程一定是第i-1天的2~9倍，而且还必须是它的整数倍。

现在你迫不及待地开着这辆车要从A城市出发到B城市旅游，顺便在路上展示一下这辆旷世奇车。你已经知道你需要行驶的里程S，现在请你合理安排第1天的里程和接下来每天需要增加路程的倍数，好让你能够在最短的天数内，恰好到达B城市。

不过，因为你想要好好展示一下你的车，而且也是为了交通安全，你被要求至少要花2天时间，如果不能找到这样的方案请输出-1。


## 说明/提示

数据规模

对于30%数据，有 $S\leqslant 100$；

对于70%数据，有 $S\leqslant 10^7$；

对于100%数据，有 $9<S\leqslant 10^8$。


## 样例 #1

### 输入

```
15121```

### 输出

```
-1```

## 样例 #2

### 输入

```
571```

### 输出

```
5```

# AI分析结果



### 综合分析与结论
各题解核心思路均基于**因数分解+递归分解乘积结构**。将总路程S分解为因数a，对每个a检查能否将S/a-1递归分解为2~9的连乘积。DFS过程中通过剪枝（仅处理可整除的情况）保证效率，时间复杂度约为O(√S * log S)。

---

### 精选题解推荐

#### 1. 风羽跃（⭐⭐⭐⭐⭐）
**关键亮点**：
- 数学推导清晰，通过式子展开发现递归结构
- 代码结构简洁，利用因数成对特性优化枚举
- 边界处理严谨（排除1天情况）

**个人心得**：
> "恍然大悟，通过式子展开发现可以逐层分解k的乘积结构"

**核心代码**：
```cpp
void dfs(int dep, int num) {
    if(!num) { ans = min(ans, dep); return; }
    num--; // 减去式子中的1
    for(int i=2; i<=9; i++) 
        if(num % i == 0) 
            dfs(dep+1, num/i);
}
```

#### 2. MyukiyoMekya（⭐⭐⭐⭐⭐）
**关键亮点**：
- 数学形式化表达严谨，递归逻辑清晰
- 使用记忆化思想直接返回最优解
- 处理大数用long long避免溢出

**核心代码**：
```cpp
int dfs(int u) {
    if(u <= 0) return u == 0 ? 0 : INF;
    u--; // 分解当前层
    int res = INF;
    for(int i=2; i<=9; i++)
        if(u % i == 0)
            res = min(res, dfs(u/i) + 1);
    return res;
}
```

#### 3. lw21144（⭐⭐⭐⭐）
**关键亮点**：
- 对比暴力与优化思路，突出剪枝重要性
- 代码注释详细解释sqrt枚举的数学原理
- 最终答案判断条件明确

**调试心得**：
> "暴力过不了因为存在大量无效分支，通过剪枝只处理可整除情况大幅优化效率"

---

### 最优思路总结
**关键技巧**：
1. **因数成对枚举**：只需检查到√S，同时处理i和S/i
2. **递归式分解**：将S/a转化为1+k₁(1+k₂(...))结构，每次减1后分解因子
3. **剪枝优化**：仅当剩余值可被2~9整除时才继续递归

**拓展应用**：
- 类似乘积分解结构：P1866 编号（约数性质）
- 因数分解优化：P1075 质因数分解
- 递归剪枝思想：P1025 数的划分

---

### 推荐习题
1. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)  
   （因数分解基础应用）
2. [P1025 数的划分](https://www.luogu.com.cn/problem/P1025)  
   （递归剪枝经典题）
3. [P1414 又是毕业季II](https://www.luogu.com.cn/problem/P1414)  
   （因数性质与最值问题）

---
处理用时：76.58秒
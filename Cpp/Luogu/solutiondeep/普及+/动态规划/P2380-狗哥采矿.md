# 题目信息

# 狗哥采矿

## 题目背景

又是一节平静的语文课。

狗哥闲来无事，出来了这么一道题。


## 题目描述

一个 $n\times m$ 的矩阵中，每个格子内有两种矿 yeyenum 和 bloggium，并且知道它们在每个格子内的数量是多少。最北边有 bloggium 的收集站，最西边有 yeyenum 的收集站。现在要你在这些格子上面安装向北或者向西的传送带（每个格子只能装一种）。问最多能采到多少矿？



## 说明/提示

传输过程中不能转弯，只能走直路。


## 样例 #1

### 输入

```
4 4
0 0 10 9 
1 3 10 0
4 2 1 3 
1 1 20 0 
10 0 0 0 
1 1 1 30 
0 0 5 5 
5 10 10 10 
0 0```

### 输出

```
98```

# AI分析结果



### 综合分析与结论
本题核心是二维动态规划结合前缀和优化，难点在于发现传送带方向连续性带来的约束条件。所有题解均采用二维DP框架，通过前缀和预处理行/列累计值实现O(nm)复杂度。最优解法在状态定义、转移方程和代码实现上高度一致，差异仅在于变量命名和实现细节。

---

### 高星题解推荐
#### 1. Youngsc（★★★★★）
**关键亮点**：  
- 最简洁清晰的转移方程 `f[i][j] = max(上方转移+横向前缀和, 左方转移+纵向前缀和)`
- 完整处理多组数据，代码可读性极佳
- 准确使用滚动更新思想，空间复杂度O(nm)

**核心代码**：
```cpp
for(int i=1; i<=n; ++i)
    for(int j=1; j<=m; ++j)
        f[i][j] = max(f[i-1][j]+a[i][j], f[i][j-1]+b[i][j]);
```
**实现思想**：  
- `a[i][j]`存储第i行前j个格子的横向累计值（yeyenum）
- `b[i][j]`存储第j列前i个格子的纵向累计值（bloggium）
- 每个状态决策只依赖相邻的上/左状态

#### 2. Dry_ice（★★★★☆）
**关键亮点**：
- 详细的状态转移图示说明
- 强调洛谷学术诚信，体现解题态度
- 代码中维护`ans`变量实时更新最大值

**调试心得**：  
> "某些童鞋最感兴趣的部分 qaq" 提示关注核心转移逻辑，反映常见学习痛点。

#### 3. CaoXian（★★★★☆）
**创新点**：
- 使用三维状态 `dp[i][j][0/1]` 分别记录最后一步方向
- 更直观体现决策过程，适合教学展示
- 通过前缀和分离两种矿石的计算

**核心转移**：
```cpp
dp[i][j][0] = max(dp[i][j-1][0], dp[i][j-1][1]) + 纵向累计;
dp[i][j][1] = max(dp[i-1][j][0], dp[i-1][j][1]) + 横向累计;
```

---

### 最优技巧总结
1. **前缀和预处理**：分别维护行、列方向的前缀和数组，将O(n)求和优化为O(1)查询
2. **方向约束转化**：通过决策点的方向选择，隐式保证同行/列方向一致性
3. **空间优化**：直接复用输入数组存储前缀和，减少额外空间消耗
4. **多组数据重置**：通过`memset`或循环覆盖实现快速初始化

---

### 举一反三训练
1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)  
   （二维DP+路径决策）
2. [P1216 数字三角形](https://www.luogu.com.cn/problem/P1216)  
   （经典二维DP基础）
3. [P7074 方格取数（加强版）](https://www.luogu.com.cn/problem/P7074)  
   （三维状态DP+方向约束）

---

### 调试经验摘录
- **Michael_Kong**：  
  > "题目意思理解错导致n发不过...黑色球不会移动到白色球位置"  
  **总结**：必须严格理解传送带方向连续性约束，可用画图辅助理解

- **rfsfreffr**：  
  > "提示中的传输不能转弯令我豁然开朗"  
  **启示**：题目关键约束常藏在输入输出样例或提示中

- **刘备**：  
  > "我的前缀和都是表示向左的"  
  **教训**：明确前缀和方向定义是解题基础，需在注释中清晰标注

---
处理用时：49.12秒
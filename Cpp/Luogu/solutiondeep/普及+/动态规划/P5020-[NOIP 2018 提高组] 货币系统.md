# 题目信息

# [NOIP 2018 提高组] 货币系统

## 题目背景

NOIP2018 提高组 D1T2

## 题目描述

在网友的国度中共有 $n$ 种不同面额的货币，第 $i$ 种货币的面额为 $a[i]$，你可以假设每一种货币都有无穷多张。为了方便，我们把货币种数为 $n$、面额数组为 $a[1..n]$ 的货币系统记作 $(n,a)$。 

在一个完善的货币系统中，每一个非负整数的金额 $x$ 都应该可以被表示出，即对每一个非负整数 $x$，都存在 $n$ 个非负整数 $t[i]$ 满足 $a[i] \times t[i]$ 的和为 $x$。然而， 在网友的国度中，货币系统可能是不完善的，即可能存在金额 $x$ 不能被该货币系统表示出。例如在货币系统 $n=3$, $a=[2,5,9]$ 中，金额 $1,3$ 就无法被表示出来。 

两个货币系统 $(n,a)$ 和 $(m,b)$ 是等价的，当且仅当对于任意非负整数 $x$，它要么均可以被两个货币系统表出，要么不能被其中任何一个表出。 

现在网友们打算简化一下货币系统。他们希望找到一个货币系统 $(m,b)$，满足 $(m,b)$ 与原来的货币系统 $(n,a)$ 等价，且 $m$ 尽可能的小。他们希望你来协助完成这个艰巨的任务：找到最小的 $m$。 

## 说明/提示

在第一组数据中，货币系统 $(2, [3,10])$ 和给出的货币系统 $(n, a)$ 等价，并可以验证不存在 $m < 2$ 的等价的货币系统，因此答案为 $2$。 在第二组数据中，可以验证不存在 $m < n$ 的等价的货币系统，因此答案为 $5$。 

【数据范围与约定】

![](https://cdn.luogu.com.cn/upload/pic/43160.png)  

对于 $100\%$ 的数据，满足 $1 ≤ T ≤ 20, n,a[i] ≥ 1$。 

## 样例 #1

### 输入

```
2 
4 
3 19 10 6 
5 
11 29 13 19 17 ```

### 输出

```
2   
5  ```

# AI分析结果



### 综合分析与结论
该题核心思路为通过动态规划（完全背包）识别冗余货币。关键点在于：若某面值能被更小的面值组合表示，则可被剔除。所有优质题解均基于此核心思路，通过排序+完全背包实现，时间复杂度为O(T*n*a_max)，其中a_max为最大面值。

---

### 精选题解与评分

#### 1. 0x3喵酱（★★★★★）
**关键亮点**：  
- 严谨数学证明B⊆A，确保解法正确性  
- 代码简洁高效，使用一维滚动数组优化空间  
- 时间复杂度稳定，适合大规模数据  

**核心代码**：  
```cpp
sort(a+1,a+n+1);
f[0]=1;
for(int i=1;i<=n;i++){
    if(f[a[i]]) ans--;
    else for(int j=a[i];j<=a[n];j++) f[j]|=f[j-a[i]];
}
```
**实现思想**：排序后逐个处理，利用位运算更新可达状态，未被覆盖的面值保留。

#### 2. xzlhxc_ed（★★★★☆）
**关键亮点**：  
- 数学归纳法证明基的存在性，强化理论支撑  
- 完全背包实现清晰，适合动态规划初学者理解  

**核心代码**：  
```cpp
for(int j=0;j<=aMax;j++){
    if(flag[j]) flag[j+a[i]]=true;
}
```
**实现思想**：通过布尔数组标记可达金额，直接覆盖所有组合可能性。

#### 3. Super_Cube（★★★★☆）
**关键亮点**：  
- 代码极度简洁，仅14行实现核心逻辑  
- 使用位运算优化状态更新，效率极高  

**核心代码**：  
```cpp
for(int i=1;i<=n;++i)
    if(!dp[a[i]]) 
        for(int j=a[i];j<=a[n];++j) 
            dp[j]|=dp[j-a[i]];
```
**实现思想**：直接利用bitset特性进行状态转移，适合竞赛快速编码。

---

### 关键技巧总结
1. **排序预处理**：确保小面值优先处理，避免大面值干扰组合逻辑。  
2. **完全背包逆向思维**：用可达性代替计数，极大简化状态转移。  
3. **数学证明指导编码**：通过集合包含关系证明，确保算法正确性。  

---

### 拓展题目推荐
1. [P2564 硬币游戏](https://www.luogu.com.cn/problem/P2564) - 完全背包变种  
2. [P2918 [USACO08NOV]Buying Hay S](https://www.luogu.com.cn/problem/P2918) - 完全背包+最小值优化  
3. [P2218 [HAOI2007]覆盖问题](https://www.luogu.com.cn/problem/P2218) - 集合覆盖简化问题  

---

### 个人心得摘录
- **调试教训**：SuperJvRuo因未清空`trans`数组导致WA，强调多测初始化重要性。  
- **优化顿悟**：NaCly_Fish生成函数法虽理论优美，但竞赛中应优先选择编码简单的完全背包。  
- **思维突破**：TainityAnle通过分类标记（0/1/2类面值）直观展示筛选过程。

---
处理用时：52.67秒
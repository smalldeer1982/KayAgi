# 题目信息

# [AHOI2017初中组] alter

## 题目描述

有 $n$ 盏灯排成一列，其中有些灯开着，有些灯关着。小可可希望灯是错落有致的，他定义一列灯的状态的不优美度为这些灯中最长的连续的开着或关着的灯的个数。小可可最多可以按开关 $k$ 次，每次操作可以使该盏灯的状态取反：原来开着的就关着，反之开着。现在给出这些灯的状态，求操作后最小的不优美度。

## 说明/提示

$30\%$ 的数据：$1\le k \le n\le20$；

$50\%$ 的数据：$1\le k \le n\le300$；

另有 $15\%$ 的数据：$1\le k \le n\le 10^5$，字符串为全 `N` 或全 `F`；

$100\%$ 的数据：$1\le k \le n\le 10^5$。

本题已经加入 hack 数据。

## 样例 #1

### 输入

```
8 1
NNNFFNNN```

### 输出

```
3```

# AI分析结果

• 综合分析与结论：这些题解均采用二分答案的方法解决该问题，核心在于通过二分枚举可能的最小不优美度，然后判断在给定的操作次数k内能否达成。解决难点主要集中在对二分答案为1时的特判以及判断函数的正确实现。不同题解在代码实现细节、思路阐述清晰度和优化程度上存在差异。
  - 思路：通过二分答案，确定最小不优美度的可能值，再通过判断函数确定该值是否能在k次操作内达成。
  - 算法要点：二分查找确定答案范围，判断函数计算达成目标不优美度所需的操作次数。
  - 解决难点：二分答案为1时，需特判原序列能否通过不超过k次操作转化为“NFNF...”或“FNFN...”形式；判断函数实现时，要正确处理连续相同字符段，避免对后续段产生不良影响。

所选的题解：
  - 作者：Sooke (赞：38)  星级：5星
    - 关键亮点：思路清晰，详细阐述二分过程及特判情况，代码简洁明了。
    - 个人心得：指出二分过程中的几个坑点，如二分答案为1时的特判，操作次数是最多按k次而非必须按k次，以及二分过程中赋值量大小关系的注意事项。
    - 重点代码及核心实现思想：
```cpp
// 核心代码为二分过程及判断函数
int lb = 2, rb = n / k + 1, mb; 
while (lb <= rb) {
    mb = (lb + rb) / 2; 
    int g = 0;
    for (int i = 0, j = 0, l = 0; i < n; i++) {
        if (s[j] == s[i]) l++;
        else j = i, l = 1;
        if (mb < l) j = i + 1, l = 0, g++;
    }
    if (g <= k) {
        rb = mb - 1;
    } else
        lb = mb + 1;
}
cout << lb;
```
核心实现思想是通过二分查找最小不优美度，在判断函数中，遍历字符串，记录连续相同字符的长度，当长度超过当前二分答案时，增加操作次数并重置记录。

  - 作者：radish布団 (赞：18)  星级：4星
    - 关键亮点：详细分析错误解法的错误原因，对理解题目和正确解法有很大帮助。
    - 个人心得：讲解了一个95分错误解法错在哪里，通过具体数据模拟错误解法的执行过程，清晰展示错误原因。
  - 作者：Happy_Every_day (赞：7)  星级：4星
    - 关键亮点：分三种情况讨论问题，思路清晰，代码实现简洁易懂。
    - 重点代码及核心实现思想：
```cpp
bool Check(int Ans) {
    int i, S;
    for (i = 1, S = 0; i <=Cnt; i++) S = S + a[i] / (Ans + 1);
    if (S <= k) return true; else return false;
}
// 主函数二分部分
Left = 2; Right = n;
while (Left <= Right) {
    Mid = (Left + Right) >> 1;
    if (Check(Mid) == false) 
        Left = Mid + 1;
    else 
        Right = Mid - 1;
}
printf("%d\n", Left);
```
核心实现思想是先通过特判处理不优美度为1的情况，然后在二分过程中，利用Check函数计算达成当前二分答案所需的操作次数，根据操作次数与k的关系调整二分范围。

最优关键思路或技巧：
  - 二分答案：利用答案的单调性，通过二分查找快速确定最小不优美度。
  - 特判优化：针对二分答案为1的特殊情况进行特判，减少不必要的计算。
  - 正确的判断函数：在判断函数中，合理处理连续相同字符段，准确计算达成目标不优美度所需的操作次数。

可拓展之处：此类题目属于“最大化最小值”或“最小化最大值”类型，通常可以使用二分答案的方法解决。类似算法套路还包括在二分过程中结合贪心策略进行判断。

推荐题目：
  - [P2678 跳石头](https://www.luogu.com.cn/problem/P2678)：同样是二分答案的题目，通过二分跳跃距离的最小值，判断能否满足给定的移除石头数量。
  - [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)：二分答案，判断在给定分段数量下，每段和的最大值是否满足条件。
  - [P3853 [TJOI2007]路标设置](https://www.luogu.com.cn/problem/P3853)：利用二分答案确定路标之间的最小距离，判断在给定路标数量下是否可行。 

---
处理用时：31.74秒
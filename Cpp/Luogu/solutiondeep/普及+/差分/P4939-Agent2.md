# 题目信息

# Agent2

## 题目背景

炎炎夏日还没有过去，`Agent`们没有一个想出去外面搞事情的。每当`ENLIGHTENED总部`组织活动时，人人都说有空，结果到了活动日，却一个接着一个`咕咕咕`了。只有不咕鸟`Lyn_king`一个人冒着太阳等了半个多小时，然后居然看到连`ENLIGHTENED行动参谋`都`咕咕咕`了，果然`咕咕咕`是人类的本性啊。

## 题目描述

作为一个`ENLIGHTENED行动指挥`，自然不想看到这一点，于是他偷取到了那些经常`咕咕咕`的`Agent`的在下来$N$天的`活动安排表`，并且叫上了你来整理。在整理过程中，`ENLIGHTENED行动指挥`对你说了$M$条命令，命令操作如下。
1. 输入$0,a,b$，这代表在第$a$天到第$b$天，有一名`Agent`要咕咕咕。
2. 输入$1$ $a$，这代表`ENLIGHTENED行动指挥`询问你根据目前的信息，在第$a$天有多少名`Agent`会咕咕咕。

作为同是不咕鸟的你，也想要惩戒那些经常`咕咕咕`的人，所以，请协助完成`ENLIGHTENED行动指挥`完成整理，并且在他每次询问时，输出正确的答案。

## 说明/提示

对于$20\%$的数据 $N,M \leq 10$

对于$40\%$的数据 $N,M \leq 10^3$

对于$60\%$的数据 $N,M \leq 10^5$

对于$100\%$的数据 $1 \leq a,b \leq N \leq 10^7,M \leq 4*10^5$

## 样例 #1

### 输入

```
5 5
0 1 2
0 1 5
1 1
0 3 5
1 5```

### 输出

```
2
2```

# AI分析结果

### 综合分析与结论

本题的核心是处理区间修改和单点查询，常见的数据结构如树状数组、线段树和分块都可以解决。树状数组由于其代码简洁、空间和时间效率高，成为最优解。差分思想是解决区间修改问题的关键，通过维护差分数组的前缀和，可以高效实现区间修改和单点查询。

### 所选高星题解

#### 1. **作者：gwx123456 (5星)**
- **关键亮点**：使用树状数组结合差分思想，代码简洁高效，解释清晰。
- **代码核心思想**：通过`modify`函数实现差分修改，`getSum`函数实现单点查询。
```cpp
void modify(int x,int delta){
    for(int i=x;i<=n;i+=lowbit(i)) 
        c[i]+=delta;
}
int getSum(int x){
    int sum=0;
    for(int i=x;i>0;i-=lowbit(i))
        sum+=c[i];
    return sum;
}
```

#### 2. **作者：My_666 (4星)**
- **关键亮点**：从线段树转向树状数组的调试经历，强调了差分数组的空间优化。
- **个人心得**：通过调试发现线段树空间不足，转而使用树状数组，强调了选择合适的算法的重要性。
```cpp
void add(int x, int v) {
    for (int i = x; i <= n + 1; i += lowbit(i)) t[i] += v;
} 
int sum(int x) {
    int ans = 0;
    for (int i = x; i > 0; i -= lowbit(i)) ans += t[i];
    return ans;
}
```

#### 3. **作者：Hexarhy (4星)**
- **关键亮点**：详细解释了差分思想与树状数组的结合，适合初学者理解。
- **代码核心思想**：通过`insert`函数实现差分修改，`query`函数实现单点查询。
```cpp
void insert(int x, const int k) {
    while(x <= n) {
        tree[x] += k;
        x += lowbit(x);
    }
}
int query(int x) {
    int res = 0;
    while(x) {
        res += tree[x];
        x -= lowbit(x);
    }
    return res;
}
```

### 最优关键思路与技巧

1. **差分思想**：通过维护差分数组的前缀和，实现区间修改和单点查询。
2. **树状数组**：利用树状数组的高效性，结合差分思想，实现O(log n)的修改和查询。
3. **空间优化**：在处理大数据量时，选择合适的算法和数据结构，避免空间不足。

### 可拓展之处

- **类似算法套路**：差分思想可以应用于其他区间修改问题，如区间加、区间减等。
- **同类型题**：可以尝试解决其他需要区间修改和单点查询的问题，如区间求和、区间最大值等。

### 推荐题目

1. **P3368 【模板】树状数组 2**：区间修改，单点查询。
2. **P3374 【模板】树状数组 1**：单点修改，区间查询。
3. **P3372 【模板】线段树 1**：区间修改，区间查询。

### 个人心得总结

- **调试经历**：从线段树转向树状数组，强调了选择合适的算法的重要性。
- **踩坑教训**：在处理大数据量时，空间优化是关键，避免使用空间复杂度高的算法。
- **顿悟感想**：差分思想与树状数组的结合，是解决区间修改问题的有效方法。

---
处理用时：25.12秒
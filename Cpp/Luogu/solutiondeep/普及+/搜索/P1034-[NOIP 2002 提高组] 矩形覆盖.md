# 题目信息

# [NOIP 2002 提高组] 矩形覆盖

## 题目描述

在平面上有 $n$ 个点，每个点用一对整数坐标表示。例如：当 $n=4$ 时，$4$ 个点的坐标分别为：$p_1(1,1)$，$p_2(2,2)$，$p_3(3,6)$，$p_4(0,7)$，见图一。

![](https://cdn.luogu.com.cn/upload/image_hosting/dxc1c5k9.png)

这些点可以用 $k$ 个矩形全部覆盖，矩形的边平行于坐标轴。当 $k=2$ 时，可用如图二的两个矩形 $s_1,s_2$ 覆盖，$s_1,s_2$ 面积和为 $4$。问题是当 $n$ 个点坐标和 $k$ 给出后，怎样才能使得覆盖所有点的 $k$ 个矩形的面积之和为最小呢？  
约定：覆盖一个点的矩形面积为 $0$；覆盖平行于坐标轴直线上点的矩形面积也为 $0$。各个矩形必须完全分开（边线与顶点也都不能重合）。


## 说明/提示

对于 $100\%$ 数据，满足 $1\le n \le  50$，$1 \le k \le 4$，$0 \le x_i,y_i  \le 500$。

**【题目来源】**

NOIP 2002 提高组第四题

## 样例 #1

### 输入

```
4 2
1 1
2 2
3 6
0 7
```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题解核心在于通过DFS枚举点分配方案，结合矩形相交剪枝。正确判断矩形相交与高效的状态恢复是关键。数据规模允许暴力搜索，但需注意相交判断的严谨性。

---

### 高星题解推荐

#### 题解作者：_Life_（★★★★☆）
**关键亮点**  
1. 状态设计简洁：用结构体维护矩形边界坐标  
2. 相交判断准确：通过双轴投影重叠检测矩形相交  
3. 代码可读性强：清晰的递归结构与合理的变量命名  

**个人心得**  
作者提到"NOIP早期数据特水的尿性"，暗示该解法虽理论复杂度高（O(kⁿ)），但实际可通过数据特性剪枝加速。

**核心代码思想**  
```cpp
void dfs(int u) {
    if(u == n+1) { /* 更新答案 */ }
    for(每个矩形i) {
        保存当前矩形i状态;
        将点u加入矩形i;
        if(所有矩形不重叠) dfs(u+1);
        恢复矩形i状态;
    }
}
```
完整判断相交逻辑：  
```cpp
int is_intersect(int a,int b,int c,int d) { 
    return (a<=c&&c<=b) || ... ; // 双轴投影重叠检测
}
```

---

### 关键思路总结
1. **矩形扩展策略**：将点加入矩形时动态更新min/max坐标  
2. **剪枝优化**：一旦发现矩形相交立即终止当前分支  
3. **状态回溯**：通过临时保存结构体实现高效状态恢复  

---

### 拓展与相似题目
**同类题型套路**  
- 状态空间搜索（如棋盘覆盖、区域划分）  
- 几何约束验证（如碰撞检测、包含判断）  

**推荐题目**  
1. P1020 导弹拦截（区间划分优化）  
2. P1052 过河（状态压缩+剪枝）  
3. P2324 骑士精神（IDA*搜索框架）  

---

### 调试经验摘录
ShineEternal题解提到"调了半天"，反映矩形相交判断极易出错。正确实现几何条件验证时，建议：  
- 用图形化测试案例验证边界条件  
- 优先采用数学严谨的判断逻辑（如投影重叠法）

---
处理用时：106.30秒
# 题目信息

# 创意吃鱼法

## 题目背景

感谢@throusea 贡献的两组数据

## 题目描述

回到家中的猫猫把三桶鱼全部转移到了她那长方形大池子中，然后开始思考：到底要以何种方法吃鱼呢（猫猫就是这么可爱，吃鱼也要想好吃法 ^\_\*）。她发现，把大池子视为 $01$ 矩阵（$0$ 表示对应位置无鱼，$1$ 表示对应位置有鱼）有助于决定吃鱼策略。

在代表池子的 $01$ 矩阵中，有很多的正方形子矩阵，如果某个正方形子矩阵的某条对角线上都有鱼，且此正方形子矩阵的其他地方无鱼，猫猫就可以从这个正方形子矩阵“对角线的一端”下口，只一吸，就能把对角线上的那一队鲜鱼吸入口中。

猫猫是个贪婪的家伙，所以她想一口吃掉尽量多的鱼。请你帮猫猫计算一下，她一口下去，最多可以吃掉多少条鱼？


## 说明/提示

右上角的
```
1 0 0
0 1 0
0 0 1
```

### 数据范围及约定


- 对于 $30\%$ 的数据，有 $1\le n,m\le 100$；
- 对于 $60\%$ 的数据，有 $1\le n,m\le 1000$；
- 对于 $100\%$ 的数据，有 $1\le n,m\le 2500$。

## 样例 #1

### 输入

```
4 6
0 1 0 1 0 0
0 0 1 0 1 0
1 1 0 0 0 1
0 1 1 0 1 0
```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
该题核心在于在二维矩阵中寻找满足对角线全1、其余全0的最大正方形。各题解主要采用动态规划（DP）、二分+前缀和、暴力+剪枝三种思路。最优解法为DP结合预处理连续0的长度，时间复杂度O(n²)，空间可优化至线性。

---

### 精选题解与评分

#### 1. 作者：zhylj（⭐⭐⭐⭐⭐）
**关键亮点**  
- 状态定义清晰：`f[i][j]`表示以(i,j)为右下角的正方形最大边长  
- 预处理left/right/up数组记录各方向连续0的长度，实现O(1)转移  
- 分两个方向处理对角线，代码简洁高效  
**核心代码**  
```cpp
f[i][j] = min(f[i-1][j-1], min(left[i][j-1], up[i-1][j])) + 1;
// left[i][j] = (当前为0) ? left[i][j-1]+1 : 0
// up同理
```

#### 2. 作者：SplenD1D（⭐⭐⭐⭐）
**关键亮点**  
- 三维DP `dp[i][j][k]`区分对角线方向  
- 通过检查横向和纵向的连续0实现严格条件判断  
**优化点**  
- 采用滚动数组优化空间  
**调试心得**  
"发现直接继承前一状态可能遗漏中间可行解，必须重新验证新扩展区域"

#### 3. 作者：寒鸽儿（⭐⭐⭐⭐）
**关键亮点**  
- 二分答案+前缀和验证，思路直观  
- 预处理斜线前缀和加速判断  
**代码片段**  
```cpp
if(sum[i][j]-sum[i-k][j]-sum[i][j-k]+sum[i-k][j-k] == k)
// 检查k×k区域是否只有对角线有1
```

---

### 关键思路总结
1. **DP+预处理连续0**  
   - 维护`left[i][j]`、`right[i][j]`、`up[i][j]`分别记录各方向连续0的长度  
   - 转移时取`min(左上状态, 左连续0, 上连续0)+1`，确保扩展区域合法  
2. **滚动数组优化**  
   - 仅保留当前行和上一行数据，空间从O(n²)降至O(n)

---

### 拓展练习
1. [P1387 最大正方形](https://www.luogu.com.cn/problem/P1387)  
   （二维DP求全1正方形）
2. [P2733 家的范围](https://www.luogu.com.cn/problem/P2733)  
   （统计不同大小的全1正方形）
3. [P3400 仓鼠巢](https://www.luogu.com.cn/problem/P3400)  
   （二维前缀和+二分答案的变式应用）

---
处理用时：64.76秒
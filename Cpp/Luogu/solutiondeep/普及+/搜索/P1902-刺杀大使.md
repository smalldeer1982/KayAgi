# 题目信息

# 刺杀大使

## 题目描述

某组织正在策划一起对某大使的刺杀行动。他们来到了使馆，准备完成此次刺杀，要进入使馆首先必须通过使馆前的防御迷阵。

迷阵由 $n\times m$ 个相同的小房间组成，每个房间与相邻四个房间之间有门可通行。在第 $n$ 行的 $m$ 个房间里有 $m$ 个机关，这些机关必须全部打开才可以进入大使馆。而第 $1$ 行的 $m$ 个房间有 $m$ 扇向外打开的门，是迷阵的入口。除了第 $1$ 行和第 $n$ 行的房间外，每个房间都被使馆的安保人员安装了激光杀伤装置，将会对进入房间的人造成一定的伤害。第 $i$ 行第 $j$ 列 造成的伤害值为 $p_{i,j}$（第 $1$ 行和第 $n$ 行的 $p$ 值全部为 $0$）。

现在某组织打算以最小伤害代价进入迷阵，打开全部机关，显然，他们可以选 择任意多的人从任意的门进入，但必须到达第 $n$ 行的每个房间。一个士兵受到的伤害值为他到达某个机关的路径上所有房间的伤害值中的最大值，整个部队受到的伤害值为所有士兵的伤害值中的最大值。现在，这个恐怖组织掌握了迷阵的情况，他们需要提前知道怎么安排士兵的行进路线可以使得整个部队的伤害值最小。

## 说明/提示

- $50\%$ 的数据，$n,m \leq 100$；
- $100\%$ 的数据，$n,m \leq 1000$，$p_{i,j} \leq 1000$。

## 样例 #1

### 输入

```
4 2
0 0 
3 5 
2 4 
0 0 
```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
本题核心为求路径中最大伤害的最小值，典型的最大值最小化问题。主流解法为**二分答案+搜索验证**，时间复杂度为O(nm logP)。部分题解提出**最小生成树(Kruskal)**思路，将点权转边权求连通路径的最大边权，虽代码较长但具有拓展性。优先队列优化的搜索（类似Dijkstra）可视为动态确定阈值的变种。

### 高星题解推荐
---

#### 1. Social_Zhao (⭐⭐⭐⭐⭐)
**关键亮点**：
- 提出两种思路：二分+BFS与最小生成树，对比分析适用场景。
- MST解法将点权转化为边权，通过Kruskal算法找连通首末行的最小瓶颈边，思路新颖。
- 详细图解说明MST的构造过程，适合深入理解图论模型转换。

**核心代码**（MST部分）：
```cpp
struct Edge { int u, v, w; }; // 边结构体存u,v及max(p[u],p[v])
vector<Edge> edges;

void kruskal() {
    sort(edges.begin(), edges.end(), cmp); // 按边权排序
    for(auto &e : edges) {
        int x = find(e.u), y = find(e.v);
        if(x != y) {
            fa[x] = y;
            maxn = max(maxn, e.w); // 更新当前最大边权
            if(find(start) == find(end)) return; // 首尾连通即终止
        }
    }
}
```

---

#### 2. lzpclxf (⭐⭐⭐⭐)
**关键亮点**：
- 详细解释二分与DFS的结合逻辑，强调**为何只需判断可达性**而非记录路径最大值。
- 明确说明二分边界调整的逻辑，避免死循环。
- 代码包含快速读入优化，适合处理大数据。

**核心代码**（二分框架）：
```cpp
int l=0, r=1000;
while(l <= r) {
    int mid = (l+r) >> 1;
    memset(vis, 0, sizeof vis);
    if(dfs(1,1,mid)) r = mid-1; // 可达则缩小右界
    else l = mid+1;
}
printf("%d", l);
```

---

#### 3. _Atyou (⭐⭐⭐)
**关键亮点**：
- 纯搜索+优先队列优化，模拟Dijkstra动态更新路径最大伤害。
- 使用栈模拟递归防止爆栈，适合特殊数据场景。

**核心代码**（优先队列搜索）：
```cpp
priority_queue<node> q; // 按当前最大伤害升序排列
q.push({2, i, p[2][i]});
while(!q.empty()) {
    auto t = q.top(); q.pop();
    if(t.x == n) ans = min(ans, t.maxd);
    // 更新相邻点并维护最小伤害
}
```

---

### 关键思路总结
1. **二分答案+搜索验证**：确定伤害阈值后，BFS/DFS判断是否存在全通路，优势代码简洁。
2. **最小生成树**：将点权转为边权，求连通首末行的最小瓶颈边，适合理论拓展。
3. **优先队列搜索**：动态维护路径最大值，类似Dijkstra求最短路。

### 调试与优化经验
- **数组越界**：Mystery_Sky因数组开小导致RE，强调鲁棒性检查。
- **访问标记重置**：多篇题解提醒`vis`数组需每次二分前清空。
- **剪枝策略**：在DFS中提前返回避免冗余搜索（如到达末行即`return`）。

---

### 推荐相似题目
1. P1948 [USACO08JAN]Telephone Lines S（二分+最短路）
2. P1462 通往奥格瑞玛的道路（二分+SPFA）
3. P1396 营救（MST瓶颈边应用）

---
处理用时：67.54秒
# 题目信息

# [AHOI2002] 网络传输

## 题目描述

在计算机网络中所有数据都是以二进制形式来传输的。但是在进行较大数据的传输时，直接使用该数的二进制形式加以传输则往往传输的位数过多。譬如要传输 $1024$ 就需要 $11$ 位二进制数。于是小可可提出了一种数据优化传输的设想，并打算对这一设想进行试验。

该设想是：正整数的所有方幂以及任意多个互不相等的 $k$ 的方幂之和排成一个递增数列 $\{a(k)n\}$，例如当 $k=3$ 时，$\{a(k)n\}$ 的前 $7$ 项为 $1(=3^0)$ 、 $3(=3^1)$ 、 $4(=3^0+3^1)$ 、 $9(=3^2)$ 、 $10(=3^0+3^2)$ 、 $12(=3^1+3^2)$ 、 $13(=3^0+3^1+3^2)$。

如果数 $d$ 是数列 $\{a(k)n\}$ 中的第 $p$ 项，则可以通过传送 $k$ 和 $p$ 这两个数来表示数 $d$。由于 $k$ 和 $p$ 这两个相对很小的数就可以表达出很大的数，因而理论上可以减少网络传输的位数。

小可可现在请你编写程序把接收到的数 $k$ 和 $p$ 所代表的数 $d$ 计算出来。

## 样例 #1

### 输入

```
3 2```

### 输出

```
3```

## 样例 #2

### 输入

```
3 7```

### 输出

```
13```

# AI分析结果



### 综合分析与结论
题目本质是将正整数按互不相等的k的幂次之和排序，求第p项。核心思路是将p的二进制表示视为各幂次的选择标志（1选，0不选），转换为k进制求和。最优解法时间复杂度O(log p)，需处理高精度。

---

### 精选题解

#### 1. kkxhh的题解（5星）
**关键亮点**：  
- 直接二进制分解，逐位累加k的幂次，思路清晰高效  
- 完整实现高精度加法和乘法，处理大数运算  
**核心代码**：
```cpp
while(p){
    if(p&1){
        // 高精度加法 ans += x
        for(int i=1;i<=50;i++) ans[i] += x[i];
        // 处理进位...
    }
    // 高精度乘法 x *= k
    for(int i=1;i<=50;i++) x[i] *= k;
    // 处理进位...
    p >>= 1;
}
```

#### 2. Hisaishi_Kanade的题解（5星）
**关键亮点**：  
- Python原生支持大整数，代码极简  
- 二进制位分解思路直观，时间复杂度O(log p)  
**核心代码**：
```python
k,p=map(int,input().split())
ret=0
pre=1
while p>0:
    if p%2==1:
        ret += pre
    pre *=k
    p//=2
print(ret)
```

#### 3. nenugdi的题解（4星）
**关键亮点**：  
- 分高低位处理高精度，压位优化存储  
- 提供非高精版本辅助理解算法  
**核心代码**：
```cpp
void add(int a[],int b[]){
    for(int i=0; i<=55; i++) a[i] += b[i];
    // 处理进位...
}
void mul(int a[],int k){
    for(int i=0; i<=55; i++) a[i] *=k;
    // 处理进位...
}
```

---

### 关键思路与技巧
1. **二进制映射**：将p的二进制位对应k的幂次选择，如二进制第i位为1则加k^i。
2. **高精度优化**：压位存储（如每13位存一个long long）、分块处理进位。
3. **快速幂技巧**：用位运算加速计算k的幂次。

---

### 拓展与相似题目
1. **P1017 进制转换**（负基数的二进制展开）
2. **P1066 2^k进制数**（高位组合数问题）
3. **P2119 魔法阵**（数学规律与递推）

---

### 题解个人心得摘录
- **八重樱飞**："发现每个新轮回起始于2的幂次，动态规划递推式是关键"（找规律到建模的过程）  
- **issue_is_fw**："双指针生成数列时，高精度的进位处理容易出错"（强调细节调试）  
- **hukk**："log2的朴素实现需注意效率，改用位运算更优"（算法优化点）

---
处理用时：79.76秒
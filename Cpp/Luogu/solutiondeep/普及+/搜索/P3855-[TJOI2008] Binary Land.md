# 题目信息

# [TJOI2008] Binary Land

## 题目背景

Binary Land是一款任天堂红白机上的经典游戏，讲述的是两只相爱的企鹅Gurin和Malon的故事。两只企鹅在一个封闭的迷宫中，你可以控制他们向上下左右四个方向移动。但是他们的移动有一个奇怪的规则，即如果你按“上”或“下”方向键，两只企鹅会同时向上移动或向下移动1格；如果你按“左”方向键，则Malon向左移动1格，同时Gurin向右移动1格；如果你按“右”方向键，则Malon向右移动1格，Gurin向左移动1格。当然，如果某只企鹅被障碍挡住，它就不会移动了。另外，在迷宫的某些格子处有蜘蛛网，如果任何一只企鹅进入这种格子，则游戏失败。两只企鹅不会相互阻挡，即在相向运动时他们可以“穿过”彼此，也可以同时处于同一格子里。迷宫的某个格子上有一颗红心，游戏的任务就是使两只企鹅同时到达这个格子。

![](https://cdn.luogu.com.cn/upload/pic/6099.png)


## 题目描述

请编写程序找出完成任务所需的最少的操作步数。如果无法完成目标，输出“no”。


## 说明/提示

满足要求的一个操作序列为：上－右－左－左

3 ≤ R, C ≤ 30


## 样例 #1

### 输入

```
4 7
#######
#..T..#
#G##M##
#######
```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题需使用四维状态BFS处理双坐标移动，核心难点在于方向控制与障碍处理。各题解均采用BFS+四维vis判重，差异主要在方向处理方式与代码结构优化。最优解法通过预处理方向数组简化移动逻辑，并集成状态检查与修正。

---

### 精选题解及亮点

#### 1. ☯☯枫☯☯（5星）
**核心亮点**  
- 预处理方向数组g1/g2统一处理四个方向  
- 在check函数中直接修改坐标实现障碍回退  
- 代码结构简洁高效（目前最优解实现）

**关键代码**  
```cpp
// 预处理方向数组（G和M的位移相反）
int g1[4][2] = {{1,0}, {0,1}, {0,-1}, {-1,0}};  // G的移动
int g2[4][2] = {{1,0}, {0,-1}, {0,1}, {-1,0}}; // M的移动

// 状态检查与修正
bool check(int &x,int &y,int &a,int &b,P t) {
    if(撞网) return false;
    if(G撞墙) x回退并标记vis;
    if(M撞墙) a回退并标记vis;
    return !vis且合法;
}
```

#### 2. 基地A_I（4星）
**核心亮点**  
- 分离处理上下/左右移动逻辑清晰  
- work函数封装状态检查与结果判断  
- 详细注释便于理解实现细节

**实现技巧**  
```cpp
// 分离处理不同方向类型
for(上下方向): 同步移动两个企鹅
for(左右方向): 
    右方向时G左移M右移
    左方向时G右移M左移

// 统一状态处理函数
bool work(新坐标){
    if(到达终点) return true;
    if(状态合法) 入队并标记vis
}
```

#### 3. Konnyaku_ljc（4星）
**核心亮点**  
- 对称式方向数组处理左右相反  
- 直接修改坐标实现障碍回退  
- 代码结构简洁易维护

**关键实现**  
```cpp
// 对称方向定义
const int X[] = {1,-1,0,0};  // 公共x方向
const int Y1[] = {0,0,1,-1}; // G的y方向
const int Y2[] = {0,0,-1,1}; // M的y方向

// 障碍回退处理
if(新位置是墙) 坐标回退到原位置
```

---

### 关键思路总结
1. **四维状态压缩**：使用vis[x1][y1][x2][y2]记录双坐标状态
2. **方向预处理**：通过预设方向数组处理企鹅的对称移动
3. **先移动后修正**：先计算理论移动位置，再根据障碍进行坐标回退
4. **状态集成检查**：在判重函数中统一处理蜘蛛网、边界、障碍等条件

---

### 拓展训练推荐
1. **P1126 机器人搬重物**（复杂方向控制）  
2. **P1379 八数码难题**（状态压缩BFS）  
3. **P5461 赦免战俘**（双坐标协同操作）

---

### 调试经验摘录
- **落花月朦胧**：未使用四维vis导致MLE，强调状态记录的重要性  
- **基地A_I**：左右移动方向易混淆，需仔细验证位移计算  
- **hater**：通过分离方向数组发现逻辑错误，强调测试用例的重要性

---
处理用时：92.51秒
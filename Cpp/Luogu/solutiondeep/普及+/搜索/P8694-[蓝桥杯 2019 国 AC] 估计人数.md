# 题目信息

# [蓝桥杯 2019 国 AC] 估计人数

## 题目描述

给定一个 $N \times M$ 的方格矩阵，矩阵中每个方格标记 `0` 或者 `1` 代表这个方格是不是有人踩过。

已知一个人可能从任意方格开始，之后每一步只能向右或者向下走一格。走了若干步之后，这个人可以离开矩阵。这个人经过的方格都会被标记为 `1`，包括开始和结束的方格。注意开始和结束的方格不需要一定在矩阵边缘。

请你计算至少有多少人在矩阵上走过。

## 说明/提示

对于所有评测用例, $1 \leq N, M \leq 20$, 标记为 `1` 的方格不超过 $200$ 个。

蓝桥杯 2019 年国赛 A 组 G 题（C 组 H 题）。

## 样例 #1

### 输入

```
5 5
00100
11111
00100
11111
00100```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
本题核心是将网格中的路径覆盖问题转化为有向图的最小路径覆盖问题。所有题解均采用以下关键步骤：
1. **传递闭包**处理可达性（Floyd预处理）
2. **拆点建二分图**（入点与出点分离）
3. **匈牙利算法**求最大匹配
4. 最终答案 = 有效节点数 - 最大匹配数

该解法复杂度为O(n^3)，在题目约束下可行。核心难点在于建立图论模型并理解传递闭包的必要性。

---

### 精选题解及评分
#### 1. Rem_CandleFire（⭐⭐⭐⭐⭐）
**关键亮点**：
- 完整解释Dilworth定理的应用背景
- 代码结构清晰，变量命名规范
- 使用vector存边更易维护
**核心代码**：
```cpp
// 传递闭包处理
for(int k=1;k<=len;k++)
    for(int i=1;i<=len;i++)
        for(int j=1;j<=len;j++)
            f[i][j]|=(f[i][k]&f[k][j]);

// 匈牙利算法实现
bool Match(int u) {
    for(auto v:g[u]) {
        if(vis[v]) continue;
        vis[v]=1;
        if(!mch[v]||Match(mch[v]))
            { mch[v]=u; return true; }
    }
    return false;
}
```

#### 2. 沉鸣cmh（⭐⭐⭐⭐）
**关键亮点**：
- 明确指出无需Dilworth定理的直接推导
- 邻接表实现节省空间
- 输入处理更高效（使用快读）
**优化点**：
```cpp
// 链式前向星建图
inline void add(int x,int y){
    l[++cnt].ne=fi[x];
    l[cnt].to=y;
    fi[x]=cnt;
}

// 简化版DFS匹配
inline bool dfs(int u){
    for(int i=fi[u];i;i=l[i].ne){
        int v=l[i].to;
        if(vis[v])continue;
        vis[v]=1;
        if(!mh[v]||dfs(mh[v])){
            mh[v]=u;
            return 1;
        }
    }
    return 0;
}
```

---

### 关键思路与技巧
1. **模型转换思维**：将网格路径问题抽象为有向图的最小路径覆盖
2. **传递闭包的必要性**：处理多段跳转的可达性关系
3. **拆点技巧**：将每个点拆分为入点和出点，解决路径重叠问题
4. **二分图性质应用**：利用Konig定理将路径覆盖转换为匹配问题

---

### 拓展练习推荐
1. [P2764 最小路径覆盖问题](https://www.luogu.com.cn/problem/P2764) - 最小路径覆盖模板题
2. [P4298 祭祀](https://www.luogu.com.cn/problem/P4298) - Dilworth定理综合应用
3. [P2765 魔术球问题](https://www.luogu.com.cn/problem/P2765) - 路径覆盖的变形应用

---

### 同类问题解决模式
**适用场景**：需要覆盖图中所有节点的最少路径数，且路径有方向限制时  
**算法套路**：
1. 构建原始有向图
2. 求传递闭包得到可达性矩阵
3. 构造二分图（左部为出点，右部为入点）
4. 求最大匹配 → 最小路径覆盖数 = 节点数 - 最大匹配数

---
处理用时：52.47秒
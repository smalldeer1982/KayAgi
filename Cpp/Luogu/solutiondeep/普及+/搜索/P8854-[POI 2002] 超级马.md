# 题目信息

# [POI 2002] 超级马

## 题目描述

在一个大小为无限的棋盘上有一个超级马，它可以完成各种动作。

每一种动作包含两个整数，第一个数说明上下移动的数，第二个数说明左右移动的数，移动马来完成这个动作。（数字均为正数向右，负数向左）

请你对每一个输入的超级马进行确认，看它是否可以到达棋盘上的每一个地方。

## 说明/提示

数据范围：$1 \le K,N \le 100,-100 \le P,Q \le 100$。

## 样例 #1

### 输入

```
2
3
1 0
0 1
-2 -1
5
3 4
-3 -6
2 -2
5 6
-1 4```

### 输出

```
TAK
NIE```

# AI分析结果



### 综合分析与结论
各题解核心思路分为两类：数学方法（裴蜀定理/线性代数基向量分析）和 BFS 验证四个关键点。数学方法理论完备但实现复杂，BFS 方法更易实现且适合题目约束条件。关键结论：能到达上下左右四个相邻点等价于覆盖全棋盘，可通过 BFS 或数学条件验证。

---

### 高星题解推荐

#### 1. 作者：Dregen_Yor（4星）
**关键亮点**：
- 结合裴蜀定理预先筛除明显不可行情况（坐标轴方向gcd≠1）
- BFS 验证能否到达四个关键点，思路清晰
- 代码结构简洁，包含剪枝优化

**核心代码片段**：
```cpp
bool solve(){
    queue<int> qx,qy;
    qx.push(100),qy.push(100);
    v[100][100] = 1;
    while(!qx.empty()){
        int x=qx.front(), y=qy.front();
        qx.pop(); qy.pop();
        for(int i=1; i<=n; i++){
            int nx = x+dx[i], ny = y+dy[i];
            if(范围检查 && 未访问){
                // 更新访问状态并入队
                if(四个关键点均被访问) return true;
            }
        }
    }
    return false;
}
```

#### 2. 作者：qinsishi（4星）
**关键亮点**：
- 提出坐标偏移技巧解决负数下标问题
- DFS 实现简洁，包含提前终止条件
- 明确将问题转化为验证四个关键点

**调试心得**：
> "剪枝一定要写在循环内部，写在外部会TLE一个点"

#### 3. 作者：Natori（4星）
**关键亮点**：
- 使用 bitset 优化空间效率
- 队列实现采用静态数组提升性能
- 极坐标排序判断向量覆盖半平面

---

### 最优技巧总结
1. **关键点验证法**：将无限棋盘覆盖问题转化为验证 (0,±1) 和 (±1,0) 四个点的可达性
2. **坐标偏移技巧**：将坐标平移到非负数范围（如+100）解决数组索引问题
3. **复合条件筛除**：先检查各方向gcd是否为1，再执行搜索
4. **极角排序法**：通过向量极角排序判断是否覆盖全平面

---

### 相似题目推荐
1. [P3951 小凯的疑惑](https://www.luogu.com.cn/problem/P3951)（裴蜀定理经典应用）
2. [P1516 青蛙的约会](https://www.luogu.com.cn/problem/P1516)（线性同余方程与扩展欧几里得）
3. [P1379 八数码难题](https://www.luogu.com.cn/problem/P1379)（BFS验证状态可达性）

---

### 调试经验摘录
1. **数组越界处理**："坐标偏移时需确保新坐标在0-200范围内"（wangzhanchen）
2. **剪枝位置**："判断四个点的条件必须写在入队循环内部"（qinsishi）
3. **队列清空技巧**："找到解后用while循环清空队列避免残留数据"（I_will_AKIOI）
4. **数学转化思维**："将无限问题转化为有限验证是解题关键"（CDFLS_mao_zx）

---
处理用时：55.02秒
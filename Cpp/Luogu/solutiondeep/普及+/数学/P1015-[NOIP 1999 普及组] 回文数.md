# 题目信息

# [NOIP 1999 普及组] 回文数

## 题目描述

若一个数（首位不为零）从左向右读与从右向左读都一样，我们就将其称之为回文数。

例如：给定一个十进制数 $56$，将 $56$ 加 $65$（即把 $56$ 从右向左读），得到 $121$ 是一个回文数。

又如：对于十进制数 $87$：

STEP1：$87+78=165$  
STEP2：$165+561=726$  
STEP3：$726+627=1353$   
STEP4：$1353+3531=4884$  

在这里的一步是指进行了一次 $N$ 进制的加法，上例最少用了 $4$ 步得到回文数 $4884$。

写一个程序，给定一个 $N$（$2 \le N \le 10$ 或 $N=16$）进制数 $M$（$100$ 位之内），求最少经过几步可以得到回文数。如果在 $30$ 步以内（包含 $30$ 步）不可能得到回文数，则输出 `Impossible!`。

## 样例 #1

### 输入

```
10
87
```

### 输出

```
STEP=4
```

# AI分析结果

### 综合分析与结论

本题的核心是模拟N进制的高精度加法，并判断是否能在30步内得到回文数。题解中大部分思路都是通过高精度加法模拟，逐步判断是否回文，直到达到30步或得到回文数。难点在于处理不同进制（尤其是16进制）的加法，以及如何高效判断回文数。

### 题解评分与亮点

1. **Haishu (5星)**
   - **关键亮点**：模块化编程思维，将高精度加法、回文判断等功能封装成独立函数，代码结构清晰，易于维护和扩展。
   - **个人心得**：作者反思了早期利用数据范围漏洞的行为，强调了代码的严谨性和规范性，值得学习。
   - **核心代码**：
     ```cpp
     inline void add() {
         for (int i=0;i<l;++i) d[l-i-1]=c[i];
         l+=2;
         for (int i=0;i<l;++i) {
             c[i]+=d[i];
             if (c[i]>=n) c[i+1]++,c[i]-=n;
         }
         while (!c[l-1]) --l;
     }
     inline bool pd() {
         for (int i=0;i<l;++i)
             if (c[i]!=c[l-1-i]) return false;
         return true;
     }
     ```

2. **Strong_Jelly (4星)**
   - **关键亮点**：详细解释了高精度加法的实现过程，特别是如何处理不同进制的加法，代码注释清晰，适合初学者理解。
   - **核心代码**：
     ```cpp
     void add(int a[], int b[]) {
         for(int i = 1; i <= l; i++) {
             a[i] += b[i];
             a[i + 1] += a[i] / n;
             a[i] %= n;
         }
         if(a[l + 1] > 0) l++;
     }
     ```

3. **hawa130 (4星)**
   - **关键亮点**：使用了C++ STL的`reverse`函数简化回文判断，代码简洁，逻辑清晰，适合熟悉STL的开发者。
   - **核心代码**：
     ```cpp
     bool hw(string a) {
         string s = a;
         reverse(s.begin(), s.end());
         return s == a;
     }
     ```

### 最优关键思路与技巧

1. **模块化编程**：将高精度加法、回文判断等功能封装成独立函数，提升代码的可读性和可维护性。
2. **进制处理**：通过将字符转换为数字，统一处理不同进制的加法，简化了代码逻辑。
3. **STL简化操作**：使用`reverse`等STL函数简化回文判断，减少代码量。

### 拓展思路与类似题目

1. **高精度加法**：类似题目如[P1005 矩阵取数游戏](https://www.luogu.com.cn/problem/P1005)，考察高精度运算和动态规划。
2. **回文数判断**：类似题目如[P1015 回文数](https://www.luogu.com.cn/problem/P1015)，考察回文数的生成与判断。
3. **进制转换**：类似题目如[P1022 进制转换](https://www.luogu.com.cn/problem/P1022)，考察不同进制之间的转换与运算。

### 个人心得摘录

- **Haishu**：反思了早期利用数据范围漏洞的行为，强调了代码的严谨性和规范性，值得学习。
- **Strong_Jelly**：详细解释了高精度加法的实现过程，特别是如何处理不同进制的加法，代码注释清晰，适合初学者理解。
- **hawa130**：使用了C++ STL的`reverse`函数简化回文判断，代码简洁，逻辑清晰，适合熟悉STL的开发者。

---
处理用时：28.86秒
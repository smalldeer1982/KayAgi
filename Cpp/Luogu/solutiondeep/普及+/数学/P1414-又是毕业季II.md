# 题目信息

# 又是毕业季II

## 题目背景

“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。一千多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！


## 题目描述

彩排了一次，老师不太满意。当然啦，取每位同学的号数来找最大公约数显然不太合理。于是老师给每位同学评了一个能力值。于是现在问题变为，从 $n$ 个学生中挑出 $k$ 个人使得他们的默契程度（即能力值的最大公约数）最大。但因为节目太多了，而且每个节目需要的人数又不知道。老师想要知道所有情况下能达到的最大默契程度是多少。这下子更麻烦了，还是交给你吧~

PS：一个数的最大公约数即本身。


## 说明/提示

【题目来源】

lzn 原创

【数据范围】

记输入数据中能力值的最大值为 $\textit{inf}$。

- 对于 $20\%$ 的数据，$n \leq 5$，$\textit{inf}\leq 10^3$；
- 对于另 $30\%$ 的数据，$n \leq 100$，$\textit{inf} \leq 10$；
- 对于 $100\%$ 的数据，$n \leq 10^4$，$\textit{inf} \leq 10^6$。

## 样例 #1

### 输入

```
4
1 2 3 4
```

### 输出

```
4
2
1
1
```

# AI分析结果

### 综合分析与结论

本题的核心问题是从给定的n个学生中选出k个人，使得他们的能力值的最大公约数（GCD）最大。由于k的取值范围是1到n，因此需要为每个k找到对应的最大GCD。直接枚举所有组合并计算GCD的复杂度太高，因此需要更高效的算法。

大多数题解都采用了以下思路：
1. **因数统计**：通过分解每个数的因数，统计每个因数出现的次数。
2. **逆向递推**：从最大可能的GCD开始，逐步递减，找到满足条件的最大GCD。
3. **优化输出**：利用贪心思想或后缀最大值，减少重复计算。

### 所选高星题解

#### 1. 作者：夜刀神十香ღ (赞：241)  
**星级：★★★★★**  
**关键亮点**：  
- **因数分解优化**：通过分解每个数的因数，并统计每个因数出现的次数，避免了直接枚举所有组合的高复杂度。
- **逆向递推**：从最大可能的GCD开始，逐步递减，找到满足条件的最大GCD，确保每次输出的都是当前k的最大可能值。
- **代码简洁**：代码结构清晰，易于理解，且实现了高效的因数分解和统计。

**核心代码**：
```cpp
for(int i=1;i<=n;i++) {
    while(c[x]<i) x--;
    cout<<x<<endl;
}
```
**实现思想**：通过逆向递推，从最大可能的GCD开始，逐步递减，找到满足条件的最大GCD。

#### 2. 作者：影辰 (赞：29)  
**星级：★★★★☆**  
**关键亮点**：  
- **桶排序思想**：利用桶统计每个数的倍数出现的次数，避免了直接分解因数的高复杂度。
- **后缀最大值**：通过后缀最大值优化输出，确保每次输出的都是当前k的最大可能值。
- **复杂度优化**：利用桶排序的思想，将复杂度降低到O(n log n)，适合大规模数据。

**核心代码**：
```cpp
for(int i=1;i<inf;i++) {
    sum=0;
    for(int j=1;i*j<inf;j++) sum+=t[i*j];
    ans[sum]=i;
}
```
**实现思想**：通过桶统计每个数的倍数出现的次数，利用后缀最大值优化输出。

#### 3. 作者：DYT_ (赞：15)  
**星级：★★★★☆**  
**关键亮点**：  
- **贪心思想**：通过贪心思想，从最大可能的GCD开始，逐步递减，找到满足条件的最大GCD。
- **记忆化搜索**：利用记忆化搜索减少重复计算，提高效率。
- **复杂度优化**：通过贪心和记忆化搜索，将复杂度降低到O(n log n log n)，适合大规模数据。

**核心代码**：
```cpp
while (top>1&&check(top)<i) top--;
printf("%d\n",top);
```
**实现思想**：通过贪心思想和记忆化搜索，从最大可能的GCD开始，逐步递减，找到满足条件的最大GCD。

### 最优关键思路与技巧

1. **因数分解与统计**：通过分解每个数的因数，并统计每个因数出现的次数，避免了直接枚举所有组合的高复杂度。
2. **逆向递推**：从最大可能的GCD开始，逐步递减，找到满足条件的最大GCD，确保每次输出的都是当前k的最大可能值。
3. **贪心思想与记忆化搜索**：通过贪心思想和记忆化搜索，减少重复计算，提高效率。

### 可拓展之处

- **同类型题**：类似的问题可以扩展到其他需要统计因数或倍数的场景，如求多个数的最大公约数、最小公倍数等。
- **算法套路**：因数分解、逆向递推、贪心思想和记忆化搜索是解决此类问题的常用套路，可以应用到其他类似问题中。

### 推荐题目

1. **P1414 又是毕业季II**：本题的扩展版本，考察更复杂的因数统计和GCD计算。
2. **P1029 最大公约数和最小公倍数问题**：考察最大公约数和最小公倍数的计算，适合练习因数分解和统计。
3. **P1072 Hankson的趣味题**：考察最大公约数和最小公倍数的应用，适合练习因数分解和统计。

### 个人心得总结

- **调试经历**：在实现因数分解时，需要注意完全平方数的特殊情况，避免重复统计。
- **踩坑教训**：直接枚举所有组合的复杂度太高，必须通过因数分解和统计来优化。
- **顿悟感想**：逆向递推和贪心思想是解决此类问题的有效方法，能够大大降低复杂度。

---
处理用时：31.25秒
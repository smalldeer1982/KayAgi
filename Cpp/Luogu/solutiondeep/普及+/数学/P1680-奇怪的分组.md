# 题目信息

# 奇怪的分组

## 题目背景

终于解出了 dm 同学的难题，dm 同学同意帮 v 神联络。可 dm 同学有个习惯，就是联络同学的时候喜欢分组联络，而且分组的方式也很特别，要求第 $i$ 组的的人数必须大于他指定的个数 $C_i$。在 dm 同学联络的时候，v 神在想，按照 dm 同学的规则一共可以有多少种方案呢？他想啊想，终于……没想出来。于是他又想到了聪明的你，你能帮 v 神算出按照 dm 同学的规则有多少种分组方案吗？


## 题目描述

v 神的班级共有 $N$ 个人，dm 同学想把同学分成 $M$ 组联络，要求第 $i$ 组的人数必须大于给定的正整数 $C_i$，求有多少不同的方案（两个是相同的方案当且仅当对于任意的一队 $i$，两个方案的第 $i$组同学数量相等）。由于结果很大，所以你只需要输出模 $10^9+7$ 的值。


## 说明/提示

### 样例解释

方案有三种，每组的个数分别是 $(3,3,4)$，$(2,4,4)$，$(2,3,5)$。

### 数据范围约定

对于 $30\%$ 的数据，$N,M\le 10$。

对于 $60\%$ 的数据，$N,M\le 1000$。

对于 $100\%$ 的数据，$1\le N ,M\le 10^6$，$1\le C_i\le 1000$。

数据保证至少有一个方案。


## 样例 #1

### 输入

```
10 3

1

2

3

```

### 输出

```
3```

# AI分析结果

### 综合分析与结论

本题的核心是将分组问题转化为经典的“隔板法”问题，并通过组合数学的方法求解。大多数题解都采用了类似的思路：首先将总人数减去每组的最小要求人数，然后使用组合数公式计算方案数。难点在于如何高效计算组合数，尤其是在模数较大的情况下。常见的解决方案包括预处理阶乘和逆元、使用费马小定理求逆元、以及应用Lucas定理等。

### 所选高星题解

#### 1. 作者：hongzy (5星)
- **关键亮点**：提供了两种计算组合数的方法，分别是直接求和使用Lucas定理。代码清晰，注释详细，且两种方法的时间复杂度都较低。
- **个人心得**：作者提到Lucas定理的运行速度非常快，建议掌握这种方法。
- **核心代码**：
  ```cpp
  int C(int n, int k) { //求组合数 
      LL fm = (1LL * fc[n-k] * fc[k]) % MOD;
      return 1LL * fc[n] * Qpow(fm, MOD-2) % MOD;
  }
  ```

#### 2. 作者：KAMIYA_KINA (4星)
- **关键亮点**：详细解释了球盒问题的两种模型，并提供了线性求组合数的技巧。代码实现简洁，预处理阶乘和逆元的方法非常高效。
- **核心代码**：
  ```cpp
  inline int C(int n, int m) {
      if(n < m) return 0;
      return fc[n] * fv[m] % mod * fv[n - m] % mod;
  }
  ```

#### 3. 作者：Misaka_Mik0t0 (4星)
- **关键亮点**：详细解释了插板法的应用，并提供了Lucas定理的实现。代码简洁，思路清晰。
- **核心代码**：
  ```cpp
  int lucas(int a,int b,int p){
      if(b==0)return 1;
      return (long long)c(a%p,b%p,p)*lucas(a/p,b/p,p)%p;
  }
  ```

### 最优关键思路与技巧

1. **隔板法**：将分组问题转化为经典的“隔板法”问题，简化了问题的复杂度。
2. **组合数计算**：使用预处理阶乘和逆元的方法，结合费马小定理求逆元，能够高效计算组合数。
3. **Lucas定理**：在模数较大的情况下，Lucas定理能够显著提高计算速度。

### 可拓展之处

- **类似问题**：可以拓展到其他需要分组或分配的问题，如资源分配、任务调度等。
- **算法套路**：组合数学中的隔板法、逆元计算、Lucas定理等技巧在其他组合问题中也有广泛应用。

### 推荐题目

1. **P3807 【模板】卢卡斯定理**：练习Lucas定理的应用。
2. **P1495 【模板】快速幂**：掌握快速幂算法，为逆元计算打下基础。
3. **P1025 数的划分**：类似的分组问题，可以使用隔板法解决。

### 个人心得总结

- **调试经历**：多位作者提到在计算组合数时，预处理阶乘和逆元的方法能够显著提高效率。
- **顿悟感想**：理解隔板法的本质是将复杂的分组问题转化为简单的组合数计算，是解决此类问题的关键。

---
处理用时：24.70秒
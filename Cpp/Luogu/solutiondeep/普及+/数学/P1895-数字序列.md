# 题目信息

# 数字序列

## 题目描述

定义函数 $\mathrm{tostring}(n)$ 表示将数字 $n$ 按照 $10$ 进制写成字符串。例如，$\mathrm{tostring}(12345)={\tt 12345}$。由此，

- 定义字符串 $S_n={\tt 1+2+3+4+\cdots}+\mathrm{tostring}(n)$；
- 定义字符串 $S_{\infin}=S_1+S_2+S_3+S_4+\cdots$

例如，$S_{\infty}$ 的前若干项为：

$$\tt 112123123412345123456123456712345678123456789123456789101234567891011\cdots$$

现在询问 $S_{\infin}$ 的第 $i$ 位是什么字符。


## 样例 #1

### 输入

```
2
3
8
```

### 输出

```
2
2
```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效地找到无限数字序列中的第 \( n \) 位数字。题解主要分为两类：一类是通过预处理和分段查找来优化时间复杂度，另一类则是直接暴力模拟生成序列。预处理方法通过计算每个子序列的长度，利用二分查找或循环定位到目标位置，时间复杂度较低；而暴力模拟方法虽然简单直观，但在大数据量下效率较低。

### 所选高星题解

#### 1. 作者：Falashiro (5星)
- **关键亮点**：通过预处理每个子序列的长度，利用二分查找快速定位目标位置，时间复杂度较低。
- **代码核心**：
  ```cpp
  int s=0,k1=0,t=n;
  while(++k1){
      s+=len[k1];
      if(s>=t)break;
  }
  t-=(s-len[k1]);
  int k2=0;
  while(++k2)
      if(len[k2]>=t)break;
  printf("%d\n",(int)(k2/pow(10,len[k2]-t))%10);
  ```
- **个人心得**：预处理部分代码虽然暴力，但思路清晰，易于理解。

#### 2. 作者：_Life_ (4星)
- **关键亮点**：利用C++11的`to_string`函数直接暴力生成序列，代码简洁，适合小规模数据。
- **代码核心**：
  ```cpp
  string str;ans=0;
  for(int i=1;;i++){
      str+=to_string(i),ans+=str.size();
      if(ans>=n){
          ans-=str.size();
          printf("%c\n",str[n-ans-1]);
          break;
      }
  }
  ```
- **个人心得**：虽然暴力，但在小数据量下运行速度较快，适合初学者理解。

#### 3. 作者：Adove (4星)
- **关键亮点**：通过预处理节省空间，利用循环快速定位目标位置，代码简洁高效。
- **代码核心**：
  ```cpp
  for(int i=1;i<=40000;++i){
      a[i]=a[i-1];
      if(i==p) ++a[i],p*=10;
  }
  for(int i=1;i<=40000;++i) lis[i]=lis[i-1]+a[i];
  ```
- **个人心得**：预处理部分代码简洁，节省空间，适合大规模数据处理。

### 最优关键思路与技巧

1. **预处理与二分查找**：通过预处理每个子序列的长度，利用二分查找快速定位目标位置，时间复杂度较低。
2. **暴力模拟**：直接生成序列并查找目标位置，适合小规模数据，代码简洁易理解。
3. **节省空间**：通过预处理节省空间，利用循环快速定位目标位置，适合大规模数据处理。

### 可拓展之处

1. **类似算法套路**：预处理与二分查找的结合可以应用于其他需要快速定位的问题，如查找特定位置的字符或数字。
2. **同类型题**：可以考虑类似的问题，如查找特定位置的数字序列或字符序列。

### 推荐洛谷题目

1. **P1895 数字序列**：本题的变种，考察数字序列的生成与查找。
2. **P1029 最大公约数和最小公倍数问题**：考察数学计算与序列生成。
3. **P1036 选数**：考察组合与序列生成。

### 个人心得总结

- **调试经历**：在预处理部分，确保每个子序列的长度计算准确是关键，避免因计算错误导致定位失败。
- **踩坑教训**：暴力模拟方法在大数据量下效率较低，应优先考虑预处理与二分查找的优化方法。
- **顿悟感想**：通过预处理与二分查找的结合，可以显著提高查找效率，适合处理大规模数据。

---
处理用时：29.80秒
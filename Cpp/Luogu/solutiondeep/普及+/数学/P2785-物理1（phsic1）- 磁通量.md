# 题目信息

# 物理1（phsic1）- 磁通量

## 题目背景

蒟蒻 HansBug 在物理考场上，挠了无数次的头，可脑子里还是一片空白。

## 题目描述

眼下出现在 HansBug 蒟蒻面前的是一个奇怪的磁场，形状为多边形，可以描述为 $N$ 个点构成的序列，这些点即依次为该磁场的各个顶点。于是现在蒟蒻 HansBug 想要知道该磁场的磁通量为多少。可是他脑细胞和 RP 已经消耗殆尽，所以这个高端的任务就交给你们啦。

## 说明/提示

磁通量 $=$ 磁感应强度 $\times$ 磁场区域面积。

![](https://cdn.luogu.com.cn/upload/pic/2219.png)

$0\lt B\le 10$。

## 样例 #1

### 输入

```
3 1
0 0
1 0
0 2
```

### 输出

```
1.0000```

## 样例 #2

### 输入

```
4 1
1 1
1 -1
-1 -1
-1 1
```

### 输出

```
4.0000```

# AI分析结果



### 分析与结论
本题核心是计算任意多边形面积并乘以给定系数。所有题解均基于**Shoelace公式**（叉乘法）实现，本质是通过顶点坐标的有序遍历累加向量叉乘值。关键要点包括正确处理顶点闭合、取绝对值保证正值面积。以下为高质量题解：

---

### 精选题解

#### 1. 作者：Johnson_sky（★★★★★）
**关键亮点**：
- 清晰图解叉乘法的几何意义，给出任意多边形面积公式的直观解释
- 代码简洁高效（O(n)时间复杂度），正确处理首尾顶点闭合
- 使用浮点数累加优化精度误差

**核心代码**：
```cpp
for(int i=2;i<=n;++i) { // 遍历所有顶点
    scanf("%lf%lf",&nowx,&nowy);
    s += (lstx*nowy - nowx*lsty); // 叉乘累加
    lstx=nowx, lsty=nowy;
}
s += (lstx*nowy - nowx*lsty); // 闭合处理
printf("%.4lf\n",fabs(0.5*s*b)); // 最终计算
```

#### 2. 作者：Grisses（★★★★★）
**关键亮点**：
- 极简实现（仅10行核心代码），利用模运算处理顶点循环
- 直接使用标准Shoelace公式，可读性极佳
- 强调坐标顺序无关性（通过绝对值保证正确性）

**核心思路**：
```cpp
for(int i=0;i<n;++i) // 循环所有顶点
    ans += p[i].x*p[(i+1)%n].y - p[(i+1)%n].x*p[i].y; // 模运算处理闭合
printf("%.4lf",abs(ans)/2*B);
```

#### 3. 作者：斯德哥尔摩（★★★★☆）
**关键亮点**：
- 分离输入与计算逻辑，代码结构清晰
- 显式处理首尾顶点闭合，避免循环错误
- 引入结构体提升代码可维护性

**核心代码**：
```cpp
struct point{ double x,y; }a[MAXN];
for(int i=1;i<=n;i++) ans += cross(a[i-1],a[i]); // 显式闭合
ans += cross(a[n],a[0]); // 额外处理首尾
printf("%.4lf\n",fabs(0.5*ans*b));
```

---

### 关键技巧总结
1. **Shoelace公式**：对有序顶点序列，按序计算相邻顶点叉乘之和，最后取绝对值/2
2. **顶点闭合处理**：通过模运算或显式添加首尾连接，确保遍历完整多边形边
3. **精度控制**：使用double类型累加，输出时四舍五入保留四位小数
4. **符号处理**：最终结果取绝对值，避免顶点顺序（顺时针/逆时针）影响结果

---

### 同类题目推荐
1. [P1183 多边形的面积](https://www.luogu.com.cn/problem/P1183)（模板题）
2. [P1355 顶点着色](https://www.luogu.com.cn/problem/P1355)（几何性质应用）
3. [P2778 判断点是否在多边形内](https://www.luogu.com.cn/problem/P2778)（射线法+叉乘应用）

---

### 调试心得摘录
> **zhangslover**：  
> "一个证明过程从晚上9点写到11点40，困死我了"  
> → 强调理解叉乘几何意义的重要性，建议先掌握向量基础

> **Authentic_k**：  
> "注意叉乘求得的是平行四边形面积，要除以2"  
> → 提醒注意公式中的系数1/2，避免低级错误

> **IcyFoxer_XZY**：  
> "答案一定要加绝对值！否则WA到怀疑人生"  
> → 强调符号处理的必要性，实际编码易忽略点

---
处理用时：94.89秒
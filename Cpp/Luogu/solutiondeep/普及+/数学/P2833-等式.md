# 题目信息

# 等式

## 题目背景

ZKC 有一天突发奇想，望着天空想出一道很好的问题，但是绞尽脑汁又不会做，所以请你来帮他解决。


## 题目描述

给出 $a,b,c,x_1,x_2,y_1,y_2$，求满足 $ax+by+c=0$，且 $x\in [x_1,x_2]$，$y\in [y_1,y_2]$ 的整数解有多少对。


## 说明/提示

对于 $30\%$ 的数据，$a,b,c,x_1,x_2,y_1,y_2$ 的绝对值不超过 $1000$。

对于 $100\%$ 的数据，$a,b,c,x_1,x_2,y_1,y_2$ 的绝对值不超过 $10^8$。


## 样例 #1

### 输入

```
1 1 -3 0 4 0 4```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题核心在于处理线性不定方程的整数解约束问题，关键难点包括：
1. 利用扩展欧几里得算法求解通解结构
2. 处理参数符号对解区间的影响
3. 推导通解参数k的合法范围
4. 处理各类边界情况（如a/b为0、区间无效等）

优质题解需完整处理10+种边界情况，正确推导通解参数范围，并具备高效实现。暴力解法仅适用于小数据，数学推导法才是正解。

---

### 高星题解推荐

#### 1. saxixy（★★★★★）
**核心亮点**：
- 完整处理所有边界情况（零值、符号变换、无效区间）
- 通过参数方程转换统一处理符号问题
- 双维度范围定界（x和y约束同步推导k的范围）
- 精确处理浮点边界取整
**关键代码**：
```cpp
// 符号统一处理
if(a < 0 && b < 0) a=-a, b=-b, c=-c;
else if(a < 0) swap(x1,x2), x1=-x1, x2=-x2, a=-a;

// 范围推导
double l = max((x1-x)*gcd/b, (y-_y2)*gcd/a);
double r = min((x2-x)*gcd/b, (y-_y1)*gcd/a);
int ansl = ceil(l), ansr = floor(r);
```
**调试心得**："本蒟蒻de了一下午的bug" 反映边界处理极易出错，需细致验证

#### 2. winmt（★★★★☆）
**核心亮点**：
- 独立推导通解参数方程
- 四端点法确定k的范围
- 正确处理互质情况的解结构
**关键实现**：
```cpp
// 四端点范围计算
long long k1 = (x1 - x) / b_div_gcd;
long long k2 = (x2 - x) / b_div_gcd;
long long k3 = (y - _y2) / a_div_gcd;
long long k4 = (y - _y1) / a_div_gcd;
```

---

### 最优关键思路与技巧
1. **符号统一化**：通过变量替换将a,b转换为正数，简化后续推导
2. **通解结构**：x = x0 + k*b/gcd，y = y0 - k*a/gcd
3. **双约束推导**：将x和y的区间约束转换为k的上下界，取交集
4. **浮点处理**：ceil(l)和floor(r)确保整数解，避免浮点精度丢失
5. **特殊值快速返回**：在函数开头处理零系数等简单情况

---

### 拓展与相似题目
1. **同余方程**（P1082） - 扩展欧几里得基础应用
2. **青蛙的约会**（P1516） - 线性同余方程与解的存在性
3. **荒岛野人**（P2421） - 多解范围约束与周期分析

**核心套路**：对于ax+by=c型问题，解题框架为：
1. 求gcd验证解的存在性
2. 求特解并转换为通解形式
3. 将约束条件转换为参数方程的范围问题
4. 处理浮点边界和整数解验证

---
处理用时：60.42秒
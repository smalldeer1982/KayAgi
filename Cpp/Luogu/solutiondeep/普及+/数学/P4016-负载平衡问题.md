# 题目信息

# 负载平衡问题

## 题目描述

$G$ 公司有 $n$ 个沿铁路运输线环形排列的仓库，每个仓库存储的货物数量不等。如何用最少搬运量可以使 $n$ 个仓库的库存数量相同。搬运货物时，只能在相邻的仓库之间搬运。


## 说明/提示

$1 \leq n \leq 100$。


## 样例 #1

### 输入

```
5
17 9 14 16 4```

### 输出

```
11```

# AI分析结果



### 综合分析与结论
本题本质是环形均分纸牌问题，存在贪心数学解法和网络流解法两类思路。贪心解法通过数学推导转化为中位数问题，时间复杂度O(n log n)最优；网络流解法通过费用流建模，更符合题目标签但复杂度较高。所有题解中，贪心数学解法因简洁性和高效性表现最优。

---

### 高分题解推荐

#### 1. 浅色调（5星）
**关键亮点**：  
- 核心思路：将环形问题转化为线性均分纸牌问题，利用前缀和数组的中位数性质求解
- 代码简洁（仅20行），时间复杂度O(n log n)  
- 数学推导清晰，正确性证明完整  
**核心代码**：
```cpp
sort(s+1,s+n+1);
sum=0;
for(int i=1;i<=n;i++)sum+=abs(s[n/2+1]-s[i]);
```

#### 2. Social_Zhao（5星）
**关键亮点**：
- 通过递推方程推导出绝对值函数最值问题  
- 几何意义解释清晰（数轴点集中位数）  
- 代码实现简洁，含详细数学推导过程  
**关键推导**：
```
K_i = K_1 - X_{i-1} → ans = Σ|K_1 - X_j|
最优解取X数组的中位数
```

#### 3. SofanHe（4星）  
**关键亮点**：
- 完整的最小费用流建模思路  
- 单节点与双节点两种实现对比  
- 包含流量平衡的直观解释  
**建模要点**：
```cpp
超源连接多余仓库（流量a[i]-avg），超汇连接不足仓库
相邻节点互连无限流量/费用1的边
```

---

### 最优思路总结
**关键技巧**：
1. **环形问题线性化**：通过破环成链，转化为经典均分纸牌问题
2. **前缀和中位数**：计算每个位置的前缀和偏移量，排序后取中位数作为基准点
3. **绝对值最小化**：通过数学证明，最优解等于所有点到中位数的距离之和

**数学推导**：
设最终每个点货物为T，定义g[i] = T - a[i]，s[i] = Σg[1..i]。通过推导得出总搬运量为Σ|s[i] - s[k]|，当s[k]为s数组的中位数时取最小值。

---

### 拓展与练习
**同类问题**：
- 环形均分问题：P2512 [HAOI2008]糖果传递
- 线性均分问题：P1031 均分纸牌  
- 二维扩展：P3156 [CQOI2011]分金币

**推荐练习**：
1. P1031 均分纸牌（线性基础版）
2. P2512 [HAOI2008]糖果传递（环形均分模板）
3. P3381 【模板】最小费用最大流（网络流解法基础）

---
处理用时：55.81秒
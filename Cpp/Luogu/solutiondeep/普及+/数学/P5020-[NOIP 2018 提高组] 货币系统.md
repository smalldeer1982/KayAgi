# 题目信息

# [NOIP 2018 提高组] 货币系统

## 题目背景

NOIP2018 提高组 D1T2

## 题目描述

在网友的国度中共有 $n$ 种不同面额的货币，第 $i$ 种货币的面额为 $a[i]$，你可以假设每一种货币都有无穷多张。为了方便，我们把货币种数为 $n$、面额数组为 $a[1..n]$ 的货币系统记作 $(n,a)$。 

在一个完善的货币系统中，每一个非负整数的金额 $x$ 都应该可以被表示出，即对每一个非负整数 $x$，都存在 $n$ 个非负整数 $t[i]$ 满足 $a[i] \times t[i]$ 的和为 $x$。然而， 在网友的国度中，货币系统可能是不完善的，即可能存在金额 $x$ 不能被该货币系统表示出。例如在货币系统 $n=3$, $a=[2,5,9]$ 中，金额 $1,3$ 就无法被表示出来。 

两个货币系统 $(n,a)$ 和 $(m,b)$ 是等价的，当且仅当对于任意非负整数 $x$，它要么均可以被两个货币系统表出，要么不能被其中任何一个表出。 

现在网友们打算简化一下货币系统。他们希望找到一个货币系统 $(m,b)$，满足 $(m,b)$ 与原来的货币系统 $(n,a)$ 等价，且 $m$ 尽可能的小。他们希望你来协助完成这个艰巨的任务：找到最小的 $m$。 

## 说明/提示

在第一组数据中，货币系统 $(2, [3,10])$ 和给出的货币系统 $(n, a)$ 等价，并可以验证不存在 $m < 2$ 的等价的货币系统，因此答案为 $2$。 在第二组数据中，可以验证不存在 $m < n$ 的等价的货币系统，因此答案为 $5$。 

【数据范围与约定】

![](https://cdn.luogu.com.cn/upload/pic/43160.png)  

对于 $100\%$ 的数据，满足 $1 ≤ T ≤ 20, n,a[i] ≥ 1$。 

## 样例 #1

### 输入

```
2 
4 
3 19 10 6 
5 
11 29 13 19 17 ```

### 输出

```
2   
5  ```

# AI分析结果



### 综合分析与结论
本题核心是找到原货币系统的"基"，即无法被其他面值线性组合的元素。最优解法通过排序+完全背包预处理，统计必须保留的元素数量。各题解普遍采用该思路，区别在于实现细节与数学证明深度。

---

### 高星题解推荐

#### 1. 0x3喵酱（★★★★★）
**关键亮点**  
- 严谨的数学证明B⊆A的必要性，明确解题方向  
- 使用完全背包状态压缩，代码简洁高效（O(n·max_a)）  
- 逻辑清晰，代码可读性强  

**核心代码**  
```cpp
sort(a+1,a+n+1);
f[0]=1;
for(i=1;i<=n;i++) {
    if(f[a[i]]) { ans--; continue; }
    for(j=a[i];j<=a[n];j++) f[j] |= f[j-a[i]]; 
}
```
**实现思想**  
排序后对每个数进行完全背包更新，若该数已被标记则可删除。

#### 2. Super_Cube（★★★★☆）
**关键亮点**  
- 极简代码风格（仅15行主体逻辑）  
- 使用bitset优化状态存储  
- 明确贪心策略与背包的结合  

**核心代码**  
```cpp
for(int i=1;i<=n;++i)
    if(dp[a[i]])--ans;
    else for(int j=a[i];j<=a[n];++j)dp[j]|=dp[j-a[i]];
```
**实现特点**  
直接利用位运算加速状态转移，适合数据规模较大场景。

#### 3. xzlhxc_ed（★★★★☆）
**关键亮点**  
- 引入"基"的数学概念加深理解  
- 完整背包实现与详细注释  
- 包含错误处理示例（多测清空）  

**个人心得**  
"考场上忘记了问题的本质"强调理解核心数学原理的重要性，提醒避免过度依赖特定算法模板。

---

### 最优思路总结
**关键技巧**  
1. **排序预处理**：确保小面值优先处理，奠定背包基础  
2. **状态压缩DP**：f[j]表示j能否被表示，使用|=运算实现完全背包  
3. **即时剪枝**：当a[i]已被标记时直接跳过，减少无效计算  

**同类型题推荐**  
1. [P2347 砝码称重](https://www.luogu.com.cn/problem/P2347)  
2. [P2567 硬币面值](https://www.luogu.com.cn/problem/P2567)  
3. [P4141 消失之物](https://www.luogu.com.cn/problem/P4141)  

**思维拓展**  
当数据规模升级时（如a_i≤1e5），可考虑：
- 数论优化（同余最短路）  
- 并行计算（SIMD指令优化位运算）  
- 分治策略（分段处理超大值域）

---
处理用时：51.00秒
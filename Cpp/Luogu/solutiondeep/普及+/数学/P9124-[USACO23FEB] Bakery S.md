# 题目信息

# [USACO23FEB] Bakery S

## 题目描述

Bessie 开了一家面包店!

在她的面包店里，Bessie 有一个烤箱，可以在 $t_C$ 的时间内生产一块饼干或在 $t_M$ 单位时间内生产一块松糕。
$(1 \le t_C,t_M \le 10^9)$。由于空间限制，Bessie 一次只能生产一种糕点，所以要生产 $A$ 块饼干和 $B$ 块松饼，需要 $A\cdot t_C+B\cdot t_M$ 单位的时间。

Bessie的 $N (1\le N\le 100)$ 朋友都想一个一个地去面包店。第 $i$ 个朋友一进门就会点 $a_i(1 \le a_i \le 10^9)$ 块饼干和 $b_i(1 \le b_i \le 10^9)$ 块松饼。Bessie 没有空间来储存糕点，所以她只有在接到订单后才开始制作糕点。此外，Bessie 的朋友都很忙，所以第 $i$ 个朋友只愿意等 $c_i(a_i+b_i \le c_i \le 2 \cdot 10^{18})$ 个单位的时间，然后就伤心地离开。

Bessie 真的不希望她的朋友们伤心，她可以用一块钱升级她的烤箱，让它少花一个单位的时间来生产一块饼干或少花一个单位的时间来生产一个松饼。她不能将她的烤箱升级到花费小于等于 $0$ 的时间，但她可以选择在她的朋友到来之前将她的烤箱升级多少次，只要生产一块饼干和生产一个松饼所需的时间都严格保持为正数。

对于每一个 $T(1\le T\le 100)$ 的测试案例，请帮助 Bessie 找出她必须花费的最小的钱数量，以便她的面包店能够满足所有的朋友。

## 样例 #1

### 输入

```
2

3 7 9
4 3 18
2 4 19
1 1 6

5 7 3
5 9 45
5 2 31
6 4 28
4 1 8
5 2 22```

### 输出

```
11
6```

# AI分析结果



### 综合分析与结论
该题核心是通过二分总升级次数，将多变量问题转化为单变量约束问题。所有可行解均需满足每个订单推导出的x区间交集，正确处理不等号方向及取整是关键。主流通用解法为：二分总升级次数mid，对每个订单求出x的范围约束，最终判断约束区间是否存在交集。

---

### 高分题解推荐

#### 1. MiPloRAs_3316（5星）
**关键亮点**：  
- 清晰的数学推导，完整覆盖三种不等式情况  
- 使用floor/ceil处理整数除法，避免浮点误差  
- 初始上下界处理严谨（tc-1和mid-tm+1）  
**核心代码**：
```cpp
bool check(long long x) {
    long long maxx = min(tc-1, x);
    long long minn = max(0LL, x-tM+1);
    for(...) {
        // 分情况处理不等式，更新maxx/minn
    }
    return maxx >= minn; // 判断区间存在解
}
```

#### 2. _Spectator_（5星）
**关键亮点**：  
- 变量命名清晰（ma/mi代替maxx/minn）  
- 注释详细，逻辑与数学推导高度对应  
- 二分初始值设置为[-1, tc+tm]，避免边界遗漏  
**核心实现**：
```cpp
bool ok(LL mid) {
    LL ma = min(tc-1, mid), mi = max(0, mid-tm+1);
    for(...) {
        LL t = b[i]-a[i], k = ...;
        // 分情况更新ma/mi
    }
    return ma >= mi;
}
```

#### 3. _Cheems（4星）
**关键亮点**：  
- 初始上下界注释明确，便于理解  
- 使用整数运算避免浮点误差  
- 代码简洁，适合快速实现  
**调试心得**：  
> "当a_i-b_i<0时需向上取整，否则向下取整。初始上下界的正确设置是关键，例如mid-tm+1可能为负，需与0取max。"

---

### 最优思路总结
1. **二分总升级次数**：答案单调性明显，将问题转化为判定问题。
2. **约束转换**：将每个订单的不等式转化为关于x的线性约束，分情况讨论系数正负。
3. **整数处理**：使用floor/ceil确保整数解，避免浮点运算。
4. **区间交集**：维护全局上下界，最终判断区间是否非空。

---

### 拓展与相似题目
1. [P2115 破坏（Sabotage）](https://www.luogu.com.cn/problem/P2115)  
   **相似点**：二分最小化最大值，需推导约束条件。
2. [P2218 覆盖问题](https://www.luogu.com.cn/problem/P2218)  
   **相似点**：二分答案后转化为几何区域交集判断。
3. [P4344 脑洞治疗仪](https://www.luogu.com.cn/problem/P4344)  
   **相似点**：二分+复杂约束处理，需维护区间信息。

---
处理用时：59.54秒
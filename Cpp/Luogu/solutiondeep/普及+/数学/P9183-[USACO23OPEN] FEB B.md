# 题目信息

# [USACO23OPEN] FEB B

## 题目描述

贝西和埃尔希正在密谋最终推翻他们的主人——农夫约翰！他们通过 $N$ 条短信进行计划。他们的对话可以用一个长度为 $N$ 的字符串 $S$ 来表示。     
其中 $S_i$ 是字母 ```B``` 或 ```E```，这意味着第 $i$ 条消息分别由贝西或埃尔希发送的。


然而，农夫约翰听说了这个消息，并试图拦截他们的谈话。因此，字符串 $S$ 的一些字母是 ```F```，这意味着农夫约翰混淆了信息，发件人未知（贝西、埃尔希都有可能）。   
**注：约翰没有发送信息！他只是在干扰奶牛间的通话！**


未混淆对话的兴奋程度是**一只奶牛重复发送信息的次数**。也就是说，子串 ```BB``` 或 ```EE``` 在 $S$ 中出现的次数。你想找到原始信息的兴奋程度，但你不知道约翰的信息中哪一条实际上是贝西或埃尔希的。在所有可能的情况下，**从小到大输出**所有可能的兴奋程度。

## 说明/提示

$1 \le N \le 2 \times 10^5$。
- 测试点 4~8：$N \le 10$
- 测试点 9~20：无额外限制。

## 样例 #1

### 输入

```
4
BEEF
```

### 输出

```
2
1
2
```

## 样例 #2

### 输入

```
9
FEBFEBFEB
```

### 输出

```
2
2
3```

## 样例 #3

### 输入

```
10
BFFFFFEBFE```

### 输出

```
3
2
4
6```

# AI分析结果



### 综合分析与结论
本题核心在于发现所有可能的兴奋值构成等差数列，并利用贪心快速计算极值。关键结论如下：
1. **极值计算**：通过贪心策略（全同替换/交替替换）计算最小值和最大值
2. **公差确定**：首尾有F时公差为1，否则为2
3. **数学归纳**：通过分析单个F的影响推导公差规律，最终合并结果

各题解均围绕上述思路展开，差异主要体现在边界处理与代码实现优化上。最优解法时间复杂度O(n)，无需分段处理。

---

### 高星题解推荐

#### 1. 作者：Zaku（5星）
**关键亮点**：
- 系统性分三类讨论F段影响（边、中间同、中间异）
- 数学归纳完整，覆盖所有边界情况（如全F特判）
- 代码简洁高效，仅遍历一次字符串

**核心代码**：
```cpp
int main(){
    // ... (预处理)
    int l = 0, r = n - 1;
    while (s[l] == 'F') l++; // 找到左边界
    while (s[r] == 'F') r--; // 找到右边界
    // 计算最小/最大值
    string t = s;
    for (int i = l; i <= r; i++) {
        if (t[i] == 'F') t[i] = (t[i-1] == 'B' ? 'E' : 'B');
        if (i > l && t[i] == t[i-1]) low++;
    }
    // ... (类似计算high)
    cout << (high - low)/d + 1 << '\n'; // 输出结果
}
```

#### 2. 作者：Limie（4.5星）
**关键亮点**：
- 数学归纳法严谨证明公差规律
- 通过左右两种替换模式计算极值
- 处理首字符为F时双重替换的巧妙逻辑

**个人心得**：
> "通过替换首字符为B/E分别计算极值，取交集得到最终范围"

**核心代码**：
```cpp
int main(){
    if(st[0]=='F'){
        st[0]='B'; int x=l(), y=r();
        st[0]='E'; x=min(x,l()); y=max(y,r());
    }
    // 输出等差数列...
}
```

#### 3. 作者：include13_fAKe（4星）
**关键亮点**：
- 寄存器变量优化循环效率
- 模块化分离极值计算函数
- 清晰注释解释贪心策略

**代码亮点**：
```cpp
int solve_most(){ // 最大值计算
    string S1=S;
    for(int i=2;i<=N;i++) if(S1[i]=='F') S1[i]=S1[i-1];
    // 统计相邻相同...
}
```

---

### 关键优化技巧
1. **单次遍历极值**：通过交替替换策略，在一次遍历中同时完成最小/最大值统计
2. **首尾标记法**：跳过连续边F直接处理中间段，避免复杂分段
3. **奇偶性利用**：中间F段的贡献必为公差2的序列，与边F的贡献合并时调整公差

---

### 相似题目推荐
1. P2652 同花顺（字符串极值统计）
2. P1365 生成字符串（替换操作与计数）
3. P1435 回文字符串（相邻字符关系处理）

---

### 调试经验摘录
1. **特例启发**："全F时兴奋值为0~n-1，需单独处理"（Zaku）
2. **模式切换**："首字符为F时需分别尝试B/E两种初始状态"（Limie）
3. **规律验证**："通过小规模打表发现等差数列特性"（Starstream）

---
处理用时：60.70秒
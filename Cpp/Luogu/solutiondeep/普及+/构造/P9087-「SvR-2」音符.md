# 题目信息

# 「SvR-2」音符

## 题目描述

>本题中「子串」指：
>
>若字符串 $s$ 中有一段**连续的**字符构成字符串 $p$，则 $p$ 是 $s$ 的子串。

我们用一个字符串代替一份乐谱，用字符代替每一个音符。

我们定义「重音」表示乐谱中出现了两个**连续**的相同字符，如 $\tt eeeee$ 中存在 $4$ 个「重音」。

现在 Sept 准备写一份长度为 $n$ 的乐谱给 Tpes 看，他对乐谱的评价标准如下：

- 乐谱中每出现一个「重音」，他的愤怒值就会增加 $a$。
- 乐谱中每有一段长度为 $k$ 的**子串**中不存在「重音」，他的愤怒值就会增加 $b$。

现在已知 $n,k,a,b$，请你帮 Sept 构造出一份乐谱，使得 Tpes 的愤怒值 $x$ **最小**。

## 说明/提示

#### 数据规模与约定

**本题采用捆绑测试。**

| $\bf{Subtask}$ | $\bm{n\le}$ | $\bm{\sum n\le}$ | $\bm{T\le}$ | $\bf{Score}$ |
| :-: | :-: | :-: | :-: | :-: |
| $\sf 1$ | $6$ | $10$ | $3$ | $\tt 10$ |
| $\sf 2$ | $10^3$ | $2\times 10^3$ | 无特殊限制 | $\tt 30$ |
| $\sf 3$ | 无特殊限制 | 无特殊限制 | 无特殊限制 | $\tt 60$ |

对于 $100\%$ 的数据，有 $2\le T\le 100$，$2\le n,k\le 10^5$，$1\le a,b\le 10^9$。单组数据内保证 $\sum n\le 2\times 10^5$。

#### 输出注意事项

输出 $x$ 和构造乐谱可以看作是两个子问题，如果你只会完成其中的一个，请在另一个子问题对应的地方用**符合要求的字符或数字**占位。

乐谱中你可以输出任意字符，包括数字、大小写字母等，但**不能出现空格**。

#### Special Judge 返回信息说明

本题采用 Special Judge 判断你的答案是否正确。

checker.cpp 将会以 $\texttt{Score=}\text A,\texttt{Type=}\text B$ 的方式返回信息。

$\tt Score$ 类表示你的得分情况，$\text A$ 有以下取值：

- $\text A=1$，表示含义如下：\
  $\underline\text{Accepted.} \texttt{ Your Ans and SM are both proper.}$\
  代表 $T$ 组答案全部符合要求。
- $\text A=2$，表示含义如下：\
  $\underline\text{Partially Correct.}\texttt{ All Ans are right.}$\
  表示该测试点中你的回答中 $x$ 全部正确，你能得到该测试点 $20\%$ 的分数。
- $\text A=3$，表示含义如下：\
  $\underline\text{Partially Correct.}\texttt{ You pass 70\% tests!}$\
  表示该测试点中你的回答正确的组数**不少于**$\lfloor0.7\times T\rfloor$（$x$ 与乐谱均符合要求），你能得到该测试点 $10\%$ 的分数。
- $\text A=4$，表示该测试点你只能拿到 $0$ 分。

$\tt Type$ 类表示你的得分情况，$\text B$ 有以下取值：

- $\text B=0$，表示你的答案全部正确，与 $\text A=1$ 配对。
- $\text B=1$，表示含义如下：\
  $\underline\text{Wrong Answer.}\texttt{ The length of your SM is not right!}$\
  代表你在一组数据中构造的乐谱的长度不为 $n$。
- $\text B=2$，表示含义如下：\
  $\underline\text{Wrong Answer.}\texttt{ Your Ans is not right!}$\
  代表你在一组数据中 $x$ 的值错误。
- $\text B=3$，表示含义如下：\
  $\underline\text{Wrong Answer.}\texttt{ Your Ans and SM are not matched!}$\
  代表你在一组数据中构造的乐谱使 Tpes 产生的愤怒值不为 $x$。

这里 $\text{Ans, SM}$ 分别表示 Answer（$x$ 的值）和 Sheet Music（乐谱）。

注意到 $\tt Type$ 只会反映你在该测试点中**第一次错误**的类型。

## 样例 #1

### 输入

```
2
4 5 2 2
8 6 3 2```

### 输出

```
0
Sept
3
2023yyds```

# AI分析结果

• 综合分析与结论：
    - 本题主要目标是构造长度为\(n\)的乐谱，使特定规则下的愤怒值最小。多数题解意识到只需关注相邻字符是否相同，可将字符集简化为\(2\)。
    - 思路上，有通过暴力搜索解决部分子任务（如Subtask 1）；有使用动态规划（DP），以\(O(n^2)\)或优化至\(O(n)\)的时间复杂度解决；还有贪心策略，通过分析不同情况得出最优构造形式。
    - 难点在于如何平衡两种增加愤怒值的情况，找到最优构造。各题解通过不同方式突破，如DP中优化转移，贪心则分析不同参数关系下的最优解。
    - 整体看，各题解各有优劣，部分题解思路清晰但代码复杂，部分代码简洁但思路阐述不足。

所选的题解：
  - **作者：CSP_Sept (5星)**
    - **关键亮点**：思路清晰，通过分析得出最优解只有三种情况，即平铺\(0\)、平铺长为\((k - 1)\)的串\(000\ldots0001\)、平铺长为\((k - 1)\)的串但将最后一个\(1\)改为\(0\)，并给出简要证明，简洁高效。
  - **作者：MarchKid_Joe (4星)**
    - **关键亮点**：先特判\(k = 2\)的情况，再通过分析\(\text{XX}\)（重音）对代价的影响，得出不使用\(\text{XX}\)的判断依据，进而构造含\(\text{XX}\)字符串，结合图示辅助理解，思路较清晰。

重点代码及核心实现思想：
  - **CSP_Sept**：核心在于分析三种最优情况，代码实现只需根据不同情况构造字符串并计算愤怒值。虽未给出代码，但实现思路明确。
  - **MarchKid_Joe**：
```cpp
#include <bits/stdc++.h>
using namespace std;
#define int long long
const int N = 1e5 + 5;
char s[N];
char name[10] = "Nahida"; 
char same[10] = "AC"; 
int T, n, k, a, b;
signed main()
{
    cin >> T;
    while (T --> 0)
    {
        int ans = 0, cnt = 0, m = 0;
        cin >> n >> k >> a >> b; s[n + 1] = '\0';
        for (int i = 1; i <= n; i++) s[i] = (k == 2 && a < b)? 'Q' : name[(i - 1) % 6];
        if (k == 2) {ans = (n - 1) * min(a, b);goto print;}
        if (a >= (k - 1) * b) {ans = b * (n - k + 1);goto print;}
        for (int l = 1, r; m = l + k - 1, (r = m + k - 2) <= n; l = m)
            s[m] = s[m - 1] = same[(++cnt) & 1];
        if (a < (n - m + 1) * b)
            s[m] = s[m - 1] = same[(++cnt) & 1];
        else
            ans = (n - m + 1) * b;
        print: cout << max(ans + a * cnt, 0ll) << '\n' << (s + 1) << '\n';
    }
    return 0;
}
```
核心实现思想：先处理\(k = 2\)的特判，再判断\(a\)与\((k - 1)b\)的关系，若\(a\)大则构造无重音字符串；否则按规则构造含重音字符串，最后计算并输出最小代价和构造的字符串。

最优关键思路或技巧：
 - 简化问题，将乐谱构造问题转化为\(01\)串构造，只关注相邻字符是否相同。
 - 利用贪心思想，分析不同参数条件下的最优构造形式，如通过比较\(a\)与\((k - 1)b\)的大小来决定构造方向。

可拓展之处：同类型题常涉及字符串构造并在特定规则下求最值，类似算法套路为先简化问题，分析关键因素对结果的影响，再通过贪心或DP求解。

推荐题目：
 - [P1080 国王游戏](https://www.luogu.com.cn/problem/P1080)：通过分析相邻元素交换对结果的影响，利用贪心求解。
 - [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)：同样是在数字串上进行操作，按一定规则删除数字使结果最小，可通过贪心解决。
 - [P2859 [USACO06DEC]Milk Patterns G](https://www.luogu.com.cn/problem/P2859)：关于字符串子串的问题，可通过后缀数组等方式解决，与本题处理字符串子串特性有相似处。

个人心得：无。 

---
处理用时：24.44秒
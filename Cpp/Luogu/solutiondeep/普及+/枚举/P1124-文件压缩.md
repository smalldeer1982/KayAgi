# 题目信息

# 文件压缩

## 题目背景

提高文件的压缩率一直是人们追求的目标。近几年有人提出了这样一种算法，它虽然只是单纯地对文件进行重排，本身并不压缩文件，但是经这种算法调整后的文件在大多数情况下都能获得比原来更大的压缩率。


## 题目描述

该算法具体如下：对一个长度为 $n$ 的字符串 $S$，首先根据它构造 $n$ 个字符串，其中第 $i$ 个字符串由将 $S$ 的前 $i-1$ 个字符置于末尾得到。然后把这 $n$ 个字符串按照首字符从小到大排序，如果两个字符串的首字符相等，则按照它们**在 $S$ 中的位置**从小到大排序。排序后的字符串的尾字符可以组成一个新的字符串 $S'$ ，它的长度也是 $n$，并且包含了 $S$ 中的每一个字符。最后输出 $S'$ 以及 $S$ 的首字符在 $S'$ 中的位置 $p$。

举例：$S$ 是 `example`

1. 构造 $n$ 个字符串。

```plain
example
xamplee
ampleex
mpleexa
pleexam
leexamp
eexampl
```

2. 将字符串排序。

```plain
ampleex
example
eexampl
leexamp
mpleexa
pleexam
xamplee
```
3. 压缩结果。

$S' = \texttt{xelpame}$，$p = 7$

由于英语单词构造的特殊性，某些字母对出现的频率很高，因此在 $S'$ 中相同的字母有很大几率排在一起，从而提高 $S'$ 的压缩率。虽然这种算法利用了英语单词的特性，然而在实践的过程中，人们发现它几乎适用于所有的文件压缩。

请你编一个程序，读入 $S'$ 和 $p$，输出字符串 $S$。

保证 $S$ 仅含小写字母（所以输入的 $S'$ 也仅含小写字母）。

## 样例 #1

### 输入

```
7
xelpame
7
```

### 输出

```
example
```

# AI分析结果

### 综合分析与结论
这些题解的核心思路基本一致，都是利用排序后的字符串得到原字符串各排列的首字母，结合输入的尾字母字符串，通过首尾字母的对应关系来还原原字符串。由于正向推导可能会因无序查找导致字母错位，所以多数题解采用倒推的方式。

### 所选题解
- **作者：MC_Launcher (赞：143)  ★★★★**
    - **关键亮点**：思路阐述详细，结合图形解释，代码注释清晰，对倒推原因解释到位。
    - **个人心得**：第一次正着排才 10 分，发现正着写可能有些字母会错位，所以要倒着找，最后反着输出。

### 重点代码
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int n,shou,now;
    cin>>n;
    char a[n],b[n],ans[n];
    cin>>a>>shou;
    for(int i=0;i<n;i++)b[i]=a[i];
    sort(b,b+n);
    for(int i=0;i<n;i++)
    {
        if(b[i]==a[shou-1])
        {
            now=i;
            b[i]=')';
            break;
        }
    }
    ans[0]=a[now];
    for(int i=1;i<n;i++)
    {
        for(int j=n-1;j>=0;j--)
        {
            if(b[j]==a[now])
            {
                now=j;
                ans[i]=a[now];
                b[j]=')';
                break;
            }
        }	
    }
    for(int i=n-1;i>=0;i--)cout<<ans[i];
}
```
**核心实现思想**：先将输入的字符串复制一份并排序，得到各排列的首字母。通过输入的首字母位置找到对应的首字母在排序后的位置，以此为起点倒推。每次找到与当前尾字母相同的首字母，更新位置并记录答案，最后倒序输出答案。

### 最优关键思路或技巧
- **倒推思想**：避免了正向推导时因无序查找导致的字母错位问题。
- **标记已使用字符**：在每次找到匹配的字符后，将其标记，防止重复使用。

### 可拓展之处
同类型题或类似算法套路：字符串的编码与解码问题，如哈夫曼编码的解码过程，通过编码规则和编码后的字符串还原原字符串；还有一些涉及字符串排列组合后进行信息提取和还原的问题。

### 推荐题目
- P1059 明明的随机数
- P1067 多项式输出
- P1071 潜伏者

---
处理用时：22.13秒
# 题目信息

# 又是毕业季II

## 题目背景

“叮铃铃铃”，随着高考最后一科结考铃声的敲响，三年青春时光顿时凝固于此刻。毕业的欣喜怎敌那离别的不舍，憧憬着未来仍毋忘逝去的歌。一千多个日夜的欢笑和泪水，全凝聚在毕业晚会上，相信，这一定是一生最难忘的时刻！


## 题目描述

彩排了一次，老师不太满意。当然啦，取每位同学的号数来找最大公约数显然不太合理。于是老师给每位同学评了一个能力值。于是现在问题变为，从 $n$ 个学生中挑出 $k$ 个人使得他们的默契程度（即能力值的最大公约数）最大。但因为节目太多了，而且每个节目需要的人数又不知道。老师想要知道所有情况下能达到的最大默契程度是多少。这下子更麻烦了，还是交给你吧~

PS：一个数的最大公约数即本身。


## 说明/提示

【题目来源】

lzn 原创

【数据范围】

记输入数据中能力值的最大值为 $\textit{inf}$。

- 对于 $20\%$ 的数据，$n \leq 5$，$\textit{inf}\leq 10^3$；
- 对于另 $30\%$ 的数据，$n \leq 100$，$\textit{inf} \leq 10$；
- 对于 $100\%$ 的数据，$n \leq 10^4$，$\textit{inf} \leq 10^6$。

## 样例 #1

### 输入

```
4
1 2 3 4
```

### 输出

```
4
2
1
1
```

# AI分析结果

### 综合分析与结论
这些题解的核心思路均围绕找出每个因数出现的次数，进而确定不同人数下的最大公约数。各题解在实现细节和优化程度上存在差异，主要的算法有因数分解统计法、筛法思想、线段树维护等。

### 所选题解
- **作者：夜刀神十香ღ (赞：241)  ★★★★**
    - **关键亮点**：思路清晰，代码简洁易懂，按照lzn的思路补充了完整代码，通过因数分解统计每个因数出现次数，再逆向查找最大公约数。
    - **个人心得**：无

### 重点代码
```cpp
#include<iostream>
#include<cmath>
#include<algorithm>
using namespace std;
int n,t=0,c[1000010];
//c[i]表示i作为因子的次数
int main()
{
    cin>>n;
    for(int i=1;i<=n;i++)
    {
        int x; cin>>x;
        t=max(t,x);
        //记录目前最大能力值
        int m=sqrt(x);
        //能力值的开方
        for(int i=1;i<=m;i++)
            if(x%i==0)
            //有约数
            {
                c[i]++;
                //i作为因子的次数++
                if(x!=i*i) c[x/i]++;
                //如果x不是i的平方，x/i也是x的因子
                //如果x是i的平方只记录i作为一次因子
            }
    }
    int x=t;
    for(int i=1;i<=n;i++)
    {
        while(c[x]<i) x--;
        //找出最大的默契值
        cout<<x<<endl;
        //输出
    }
    return 0;
}
```
**核心实现思想**：先读取所有学生的能力值，对每个能力值进行因数分解，统计每个因数出现的次数。然后从最大能力值开始，对于每个学生人数，逆向查找满足条件的最大公约数。

### 最优关键思路或技巧
- **因数分解优化**：对于每个数 $x$，只需枚举到 $\sqrt{x}$ 即可找出所有因数，同时处理 $x/i$ 避免重复计算。
- **逆向递推**：利用“人数递增时最大公因数肯定递减”的性质，逆向递推可以减少不必要的计算。

### 可拓展之处
同类型题如求多个数的最大公约数组合问题、因数相关的计数问题等。类似算法套路包括筛法思想（如埃拉托斯特尼筛法、欧拉筛法）、因数分解优化等。

### 推荐题目
- P1072 [NOIP2009 提高组] Hankson 的趣味题
- P2568 GCD
- P1390 公约数的和

### 个人心得摘录与总结
- **Vermouth_1412**：提到noip前夕做题被虐，前20分用暴力搜索可拿28分，接着30分根据元素范围特点处理，最后通过倍数转移得到正解，说明部分分思路可提示正解。
- **huanzi**：指出一开始用常规方法只能拿10分，会TLE，转换策略取开方数为界进行因数分解可优化，强调了优化策略的重要性。

---
处理用时：28.96秒
# 题目信息

# 「Wdsr-2」方分

## 题目描述

平面直角坐标系上有两个相离的正方形 $A$ 和 $B$。请找到任意一条直线把它们分隔到直线的两侧。

**注意：这条直线不应该和正方形有公共点。**

## 说明/提示

$1\le T\le 10000$。

输入的坐标绝对值不超过 $10^3$，小数点后最多有 $3$ 位数字。

**SPJ 使用双精度浮点数计算验证你的答案，请尽可能地避免精度误差。**

避免精度误差的方式有：不要输出绝对值过大或过小的数字，输出尽可能多的小数点后位数，比较大小时使用 eps，等等。

赛后已加入 Hack 数据。

## 样例 #1

### 输入

```
1
1.0 1.0
2.0 2.0
1.0 2.0
2.0 1.0
0.0 0.0
-0.5 -0.5
0.0 -1.0
0.5 -0.5```

### 输出

```
0.0 1.0 0.5```

# AI分析结果

### 综合分析与结论
这些题解主要围绕如何找到一条直线将两个相离的正方形分隔到两侧展开。整体思路都是通过分析正方形边与边、边与直线的关系来确定分隔直线。其中部分题解采用分类讨论的方式，部分题解通过引理证明后枚举边进行微调来求解。各题解都考虑了精度问题，但在思路的清晰程度、代码的可读性和优化程度上存在差异。

### 所选题解
- **作者：XL4453 (赞：3)，4星**
    - **关键亮点**：通过引理证明存在至少一条边只和一个正方形相切，然后枚举所有边进行微调，思路简洁，代码实现相对简单，可读性较高。
    - **个人心得**：无

### 重点代码及核心思想
```cpp
#include<cstdio>
#include<iostream>
using namespace std;
const double eps=1e-10;
int T;
double ax[10],ay[10],bx[10],by[10],res,flag;
bool side(double a,double b,double c,double x,double y){
    return a*x+b*y<c;
}
void check(double a,double b,double c){//ax+by=c
    for(int i=2;i<=4;i++){
        if(side(a,b,c,ax[i-1],ay[i-1])!=side(a,b,c,ax[i],ay[i]))return;
        if(side(a,b,c,bx[i-1],by[i-1])!=side(a,b,c,bx[i],by[i]))return;
    }
    if(side(a,b,c,ax[1],ay[1])==side(a,b,c,bx[1],by[1]))return;
    if(flag==0)printf("%.12lf %.12lf %.12lf\n",a,b,c);
    flag=1;
}
int main(){
    scanf("%d",&T);
    while(T--){
        flag=0;
        for(int i=1;i<=4;i++)cin>>ax[i]>>ay[i];
        for(int i=1;i<=4;i++)cin>>bx[i]>>by[i];
        for(int i=1;i<=4;i++)
        for(int j=i+1;j<=4;j++){
            check(ay[i]-ay[j],ax[j]-ax[i],-ay[j]*ax[i]+ax[j]*ay[i]+eps);
            check(ay[i]-ay[j],ax[j]-ax[i],-ay[j]*ax[i]+ax[j]*ay[i]-eps);
            check(by[i]-by[j],bx[j]-bx[i],-by[j]*bx[i]+bx[j]*by[i]+eps);
            check(by[i]-by[j],bx[j]-bx[i],-by[j]*bx[i]+bx[j]*by[i]-eps);
        }
    }
    return 0;
}
```
**核心思想**：
1. 定义 `side` 函数用于判断点是否在直线的一侧。
2. `check` 函数用于检查直线是否能将两个正方形分隔开。
3. 在 `main` 函数中，枚举两个正方形的所有边，对每条边进行微调（加或减一个小的精度值 `eps`），并调用 `check` 函数进行检查，若满足条件则输出直线方程。

### 最优关键思路或技巧
- **引理证明**：通过构造引理证明存在至少一条边只和一个正方形相切，简化了问题的分析过程。
- **枚举边并微调**：直接枚举所有边并进行微调，避免了复杂的分类讨论，代码实现简单。
- **精度处理**：使用 `eps` 来处理精度问题，避免因浮点数误差导致的错误。

### 可拓展之处
同类型题如求将两个相离的矩形、圆形等图形分隔开的直线，类似算法套路可以先分析图形的几何特征，找到可能的分隔线，再通过微调或其他方式确定最终的分隔线。

### 推荐题目
1. [P1196 银河英雄传说](https://www.luogu.com.cn/problem/P1196)：涉及几何图形的位置关系和判断。
2. [P1328 生活大爆炸版石头剪刀布](https://www.luogu.com.cn/problem/P1328)：需要对不同情况进行分类讨论和判断。
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036)：考察逻辑判断和枚举的能力。

### 个人心得总结
部分题解提到了精度问题，如虽然 SPJ 使用双精度浮点数，但误差会被平方放大，所以要保证结果精度足够高，输出尽可能多的小数点后位数。同时，多测数据可能会卡掉一些奇怪的做法，出题人数据可能较毒瘤，做题时需要考虑全面。 

---
处理用时：35.04秒
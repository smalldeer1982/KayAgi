# 题目信息

# Agent2

## 题目背景

炎炎夏日还没有过去，`Agent`们没有一个想出去外面搞事情的。每当`ENLIGHTENED总部`组织活动时，人人都说有空，结果到了活动日，却一个接着一个`咕咕咕`了。只有不咕鸟`Lyn_king`一个人冒着太阳等了半个多小时，然后居然看到连`ENLIGHTENED行动参谋`都`咕咕咕`了，果然`咕咕咕`是人类的本性啊。

## 题目描述

作为一个`ENLIGHTENED行动指挥`，自然不想看到这一点，于是他偷取到了那些经常`咕咕咕`的`Agent`的在下来$N$天的`活动安排表`，并且叫上了你来整理。在整理过程中，`ENLIGHTENED行动指挥`对你说了$M$条命令，命令操作如下。
1. 输入$0,a,b$，这代表在第$a$天到第$b$天，有一名`Agent`要咕咕咕。
2. 输入$1$ $a$，这代表`ENLIGHTENED行动指挥`询问你根据目前的信息，在第$a$天有多少名`Agent`会咕咕咕。

作为同是不咕鸟的你，也想要惩戒那些经常`咕咕咕`的人，所以，请协助完成`ENLIGHTENED行动指挥`完成整理，并且在他每次询问时，输出正确的答案。

## 说明/提示

对于$20\%$的数据 $N,M \leq 10$

对于$40\%$的数据 $N,M \leq 10^3$

对于$60\%$的数据 $N,M \leq 10^5$

对于$100\%$的数据 $1 \leq a,b \leq N \leq 10^7,M \leq 4*10^5$

## 样例 #1

### 输入

```
5 5
0 1 2
0 1 5
1 1
0 3 5
1 5```

### 输出

```
2
2```

# AI分析结果

### 综合分析与结论
本题要求处理区间修改和单点查询操作，题解主要采用树状数组、线段树和分块三种方法。树状数组结合差分思想，代码简洁，空间和时间复杂度较优；线段树可解决问题，但易出现MLE，部分优化后可通过；分块方法理解容易，但效率相对较低。

### 所选题解
- **作者：gwx123456（5星）**
    - **关键亮点**：思路清晰，详细给出树状数组和差分的学习链接，代码简洁易懂。
    - **个人心得**：无
- **作者：Hexarhy（4星）**
    - **关键亮点**：详细解释差分思想在本题中的应用，结合树状数组实现，代码规范。
    - **个人心得**：无
- **作者：AC_Automation（4星）**
    - **关键亮点**：明确指出本题为树状数组标准题，强调树状数组优势，代码简洁。
    - **个人心得**：无

### 重点代码及核心思想
#### 树状数组+差分（gwx123456）
```cpp
int lowbit(int i){
    return i&(-i);
}
int getSum(int x){
    int sum=0;
    for(int i=x;i>0;i-=lowbit(i))
        sum+=c[i];
    return sum;
}
void modify(int x,int delta){
    for(int i=x;i<=n;i+=lowbit(i)) 
        c[i]+=delta;
}
```
核心思想：利用树状数组维护差分数组，区间修改时修改区间两端点，单点查询时求前缀和。

#### 树状数组+差分（Hexarhy）
```cpp
inline int lowbit(const int x)
{
    return x&(-x);
}
void insert(int x,const int k)
{
    while(x<=n)
    {
        tree[x]+=k;
        x+=lowbit(x);
    }
}
int query(int x)
{
    int res=0;
    while(x)
    {
        res+=tree[x];
        x-=lowbit(x);
    }
    return res;
}
```
核心思想：同样利用树状数组维护差分数组，通过单点修改实现区间修改，单点查询为差分数组前缀和。

#### 树状数组+差分（AC_Automation）
```cpp
inline int lowbit(int x){return x&(-x);}
void add(int x,int t){
    while(x<=n){
        c[x]+=t;
        x+=lowbit(x);
    }
}
long long sum(int x){
    long long ret=0;
    while(x>0){
        ret+=c[x];
        x-=lowbit(x);
    }
    return ret;
}
```
核心思想：与上述类似，用树状数组维护差分数组，实现区间修改和单点查询。

### 最优关键思路或技巧
本题最优思路是树状数组结合差分思想。差分可将区间修改转化为两个端点的单点修改，树状数组可高效处理单点修改和前缀和查询，降低时间复杂度。

### 拓展思路
同类型题可拓展到二维区间修改和单点查询，可使用二维树状数组或二维线段树。类似算法套路可用于处理区间最值查询、区间染色等问题。

### 推荐题目
1. [P3368 【模板】树状数组 2](https://www.luogu.com.cn/problem/P3368)
2. [P3372 【模板】线段树 1](https://www.luogu.com.cn/problem/P3372)
3. [P2068 统计和](https://www.luogu.com.cn/problem/P2068)

### 个人心得摘录与总结
- **作者：My_666**：使用线段树时样例不过，发现建树时需多开一个空间；之后出现MLE，最终改用树状数组通过。总结为做题要先看完题，避免删大量代码。
- **作者：Null_Cat**：本题数组要开得很大，$1e6$ 只有 $60$ 分，$1e7$ 是 $95$ 分，到 $2e7$ 才能满。强调实践出真知。 

---
处理用时：28.16秒
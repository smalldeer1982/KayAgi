# 题目信息

# 小Z的车厢

## 题目描述

小 Z 的家乡有一列在环形铁轨上行驶的火车，共停靠 $n$ 个站（$1$ 号站到 $n$ 号站顺时针排列）。

众所周知，春运是一件非常可怕的事情。不幸的是，小 Z 是铁路公司的员工，现在他收到了 $m$ 条除夕凌晨的订票申请，每个申请 $(x, y, z)$ 表示有 $z$ 个人要从 $x$ 号站顺时针坐到 $y$ 号站，同时，当火车停靠到 $x$ 号站时，所有要在 $x$ 站上车的人都会上车，所有要在 $x$ 号站下车的人都会下车。

由于始发站不确定，现在小 Z 想知道至少需要分配给这列火车多少节车厢（每节车厢可容纳 $36$ 人）才能顺利完成该铁路运输，希望你帮帮他。

## 说明/提示

**【数据规模】**

对于 $30 \%$ 的数据，$n \le 1000$，$m \le 10000$；

对于 $100 \%$ 的数据，$1 \le n, m \le 10^6$，$x \ne y$，$1 \le z \le 100$。


## 样例 #1

### 输入

```
3 2
1 2 36
2 3 36
```

### 输出

```
1
```

## 样例 #2

### 输入

```
4 2
1 2 36
4 3 36
```

### 输出

```
2
```

# AI分析结果

• 综合分析与结论：
    - 思路：各题解均围绕计算环形铁轨上火车运行时的最大载客量，进而确定所需车厢数。多数题解通过模拟上下车过程或区间覆盖操作来求解。
    - 算法要点：部分题解采用直接模拟结合数组记录上下车人数（如oistr、dfydada等）；部分利用差分思想，将区间操作转化为单点修改再通过前缀和求最值（如BFSBFSBFSBFS、Mine_King等）；还有使用线段树（CE_自动机）或树状数组（Celebrate）维护区间信息。
    - 解决难点：关键在于处理环形铁轨中可能出现的起始站序号大于下车站序号（x > y）的情况。不同题解通过不同方式应对，如将其拆分为两段区间处理、在特定位置增加人数记录等。
    - 整体来看，各题解质量参差不齐，思路清晰度、代码可读性和优化程度有较大差异，多数题解在某些方面存在不足，没有特别突出达到4星及以上的题解。

通用建议与扩展思路：
 - 对于此类涉及区间操作和最值求解的问题，差分是一种常用且有效的方法，它能将区间修改转化为单点修改，降低时间复杂度。在处理环形结构时，破环为链并结合差分是常见思路，注意对特殊情况（如x > y）的合理拆分与处理。
 - 类似算法套路还可应用于其他涉及区间增减操作并求最值或统计的场景，如统计一段时间内的最大在线人数等。

推荐题目：
 - P1083 借教室：同样涉及区间增减操作和判断可行性，可通过差分求解。
 - P3372 【模板】线段树 1：基础的线段树区间修改和单点查询题目，有助于巩固线段树知识。
 - P3368 【模板】树状数组 2：树状数组的区间修改和区间查询模板题，加深对树状数组应用的理解。

个人心得摘录与总结：
 - oistr：一开始按简单模拟写代码WA了，经分析发现未考虑环形铁轨中x > y的情况，改进时顿悟可将x > y的订单转化为在第一站上车等情况处理。总结出做题要仔细读题，关注特殊条件。
 - 天泽龟：尝试破环为链并倍长处理，首次提交WA，经反思发现对于x > y情况的覆盖处理不全面，应覆盖两次。强调了对特殊情况全面考虑的重要性。 

---
处理用时：19.07秒
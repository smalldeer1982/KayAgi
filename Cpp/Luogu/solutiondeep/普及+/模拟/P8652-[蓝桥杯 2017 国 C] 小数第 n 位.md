# 题目信息

# [蓝桥杯 2017 国 C] 小数第 n 位

## 题目描述

我们知道，整数做除法时，有时得到有限小数，有时得到无限循环小数。

如果我们把有限小数的末尾加上无限多个 $0$，它们就有了统一的形式。

本题的任务是：在上面的约定下，求整数除法小数点后的第 $n$ 位开始的 $3$ 位数。

## 说明/提示

时限 1 秒, 256M。蓝桥杯 2017 年第八届国赛

## 样例 #1

### 输入

```
1 8 1```

### 输出

```
125```

## 样例 #2

### 输入

```
1 8 3```

### 输出

```
500```

## 样例 #3

### 输入

```
282866 999000 6```

### 输出

```
914```

# AI分析结果

### 综合分析与结论
这些题解的核心思路均是避免暴力计算，利用快速幂优化来求解。通过分析竖式除法过程，发现可将求小数第n位转化为对\(a\times10^n\)相关运算。
 - **思路**：多数题解指出求\(\frac{a}{b}\)小数点后第\(n\)位等价于\(\lfloor\frac{a\times10^n}{b}\rfloor\bmod{10}\) ，然后通过快速幂计算\(10^n\bmod b\)，进而求出所需的三位数字。
 - **算法要点**：快速幂的实现，通过二进制分解指数，将时间复杂度从\(O(n)\)降至\(O(\log n)\)。
 - **解决难点**：主要是处理大数据范围，避免暴力模拟竖式除法导致的超时问题。

### 所选的题解
- **作者：5k_sync_closer（5星）**
    - **关键亮点**：思路清晰，先通过数学推导得出简洁的式子\(\lfloor\frac{a\times10^n\bmod{10b}}{b}\rfloor\)，明确指出计算分子需用快速幂，并考虑到\(10b\)可能超出\(2^{32}\)，给出解决办法（龟速乘或 `__int128`）。
    - **重点代码**：
```cpp
__int128 P(__int128 x, __int128 y, __int128 M)
{
    __int128 q = 1;
    for (; y; y >>= 1, x = x * x % M)
        if (y & 1)
            q = q * x % M;
    return q;
}
__int128 a, b, n;
int main()
{
    scanf("%lld%lld%lld", &a, &b, &n);
    for (__int128 i = n; i < n + 3; ++i)
        printf("%lld", a * P(10, i, 10 * b) % (10 * b) / b);
    return 0;
}
```
    - **核心思想**：`P`函数为快速幂实现，主函数中通过循环利用快速幂计算出从第\(n\)位开始的三位数字并输出。

- **作者：zhiyangfan（4星）**
    - **关键亮点**：从竖式除法过程出发，详细分析每一步操作，清晰阐述如何通过取模和快速幂得到结果，时间复杂度分析准确。
    - **重点代码**：
```cpp
inline int ksm(int a, int b, int mod)
{
    int ret = 1;
    while (b)
    {
        if (b & 1) ret = (ll)ret * a % mod;
        a = (ll)a * a % mod; b >>= 1;
    }
    return ret;
}
int main()
{
    int a, b, n; scanf("%d%d%d", &a, &b, &n);
    int t = (ll)a * ksm(10, n - 1, b) % b;
    printf("%d", (int)(t * 10ll / b));
    t = t * 10ll % b;
    printf("%d", (int)(t * 10ll / b));
    t = t * 10ll % b;
    printf("%d\n", (int)(t * 10ll / b));
    return 0;
}
```
    - **核心思想**：`ksm`函数实现快速幂，主函数先通过快速幂得到第\(n - 1\)步的余数，进而计算并输出第\(n\)，\(n + 1\)，\(n + 2\)位数字。

- **作者：A_grasser（4星）**
    - **关键亮点**：先介绍暴力思路及不可行原因，再引入快速幂，结合图解对快速幂进行详细讲解，代码给出常数优化版本，且推荐万能头文件减少麻烦。
    - **重点代码**：
```cpp
long long fpow(long long num,long long base,long long mod){
    long long res=1;
    while(base){
        if(base&1) res=res*num%mod;
        base>>=1;
        num=num*num%mod;
    }
    return res;
}
int main(){
    cin>>x>>y>>n;
    cout<<x*fpow(10,n-1,y)*10/y%10<<x*fpow(10,n,y)*10/y%10<<x*fpow(10,n+1,y)*10/y%10;
    return 0;
}
```
    - **核心思想**：`fpow`函数实现快速幂，主函数利用快速幂计算出从第\(n\)位开始的三位数字并输出。

### 最优关键思路或技巧
将求小数某一位的问题转化为对\(a\times10^n\)的运算，通过快速幂优化计算\(10^n\bmod b\)。这种思维方式将复杂的竖式除法模拟简化为数学运算和快速幂优化，有效降低时间复杂度。

### 可拓展思路
同类型题常考查对数学运算过程的优化，类似算法套路有利用数论知识（如取模运算性质）优化计算，遇到大数据范围下的模拟问题，可思考能否通过数学推导简化，再结合高效算法（如快速幂、矩阵快速幂等）优化。

### 相似知识点洛谷题目
 - [P1226 【模板】快速幂||取余运算](https://www.luogu.com.cn/problem/P1226)
 - [P3390 【模板】矩阵快速幂](https://www.luogu.com.cn/problem/P3390)
 - [P1962 斐波那契数列](https://www.luogu.com.cn/problem/P1962) （可通过矩阵快速幂优化）

### 个人心得摘录与总结
无明显个人心得相关内容。 

---
处理用时：40.24秒
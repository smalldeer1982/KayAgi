# 题目信息

# [NOIP 2003 提高组] 侦探推理

## 题目描述

明明同学最近迷上了侦探漫画《柯南》并沉醉于推理游戏之中，于是他召集了一群同学玩推理游戏。游戏的内容是这样的，明明的同学们先商量好由其中的一个人充当罪犯（在明明不知情的情况下），明明的任务就是找出这个罪犯。接着，明明逐个询问每一个同学，被询问者可能会说：

$$
\def\arraystretch{1.5}
\begin{array}{|l|l|}\hline
\textbf{\textsf{证词内容}} & \textbf{\textsf{证词含义}}\\\hline
\text{I am guilty.} & \text{我是罪犯。} \\\hline
\text{I am not guilty.} & \text{我不是罪犯。} \\\hline
\text{{\tt XXX} is guilty.} & \text{{\tt XXX} 是罪犯。其中 {\tt XXX} 表示某个同学的名字。} \\\hline
\text{{\tt XXX} is not guilty.} & \text{{\tt XXX} 不是罪犯。} \\\hline
\text{Today is {\tt XXX}.} &
\begin{aligned}
&\text{今天是 {\tt XXX}。其中 {\tt XXX} 表示某个星期的单词。}\\
&\text{星期只有可能是以下之一：}\\
&\texttt{Monday}, \texttt{Tuesday}, \texttt{Wednesday}, \texttt{Thursday}, \\
&\texttt{Friday}, \texttt{Saturday}, \texttt{Sunday}。
\end{aligned}
\\\hline
\end{array}$$

证词中出现的其他话，都不列入逻辑推理的内容。


明明所知道的是，他的同学中有 $N$ 个人始终说假话，其余的人始终说真。


现在，明明需要你帮助他从他同学的话中推断出谁是真正的凶手，请记住，凶手只有一个！



## 说明/提示

对于 $100\%$ 数据，满足 $1\le M\le 20$，$0\le N\le M$，$1\le P\le 100$。

**【题目来源】**

NOIP 2003 提高组第二题

## 样例 #1

### 输入

```
3 1 5
MIKE
CHARLES
KATE
MIKE: I am guilty.
MIKE: Today is Sunday.
CHARLES: MIKE is guilty.
KATE: I am guilty.
KATE: How are you??
```

### 输出

```
MIKE
```

# AI分析结果

这道题主要是通过分析人物的证词来推断罪犯，由于数据范围较小，题解大多采用枚举法解决。以下是对各题解的综合分析：
1. **思路**：多数题解选择枚举罪犯和日期，通过判断证词真假来确定符合条件的罪犯。少数题解采用枚举说谎者的方式，判断其组合下能否找出罪犯。
2. **算法要点**：将人物证词转化为计算机可处理的信息，根据假设的罪犯和日期判断每条证词的真假，统计说真话和说假话的人数，依据人数是否符合条件来确定罪犯。
3. **解决难点**：
    - **字符串处理**：需准确解析证词，识别出各种有效信息，如谁是说话者、提及的人物、日期等，同时要处理无用信息。
    - **逻辑判断**：判断每个人的话是否前后矛盾，确保假设的罪犯和日期与所有证词逻辑相符。

### 各题解评分
1. **Drifterming**：★★★★
    - 思路清晰，详细阐述了枚举罪犯和日期的过程，以及判断证词真假和处理矛盾的方法。
    - 代码结构合理，通过函数封装关键逻辑，可读性较好。
2. **cmd2001**：★★★
    - 提到了换行符问题，但整体思路表述较简略，代码中部分变量命名含义不直观，降低了可读性。
3. **wjyyy**：★★★★
    - 清晰阐述枚举罪犯和日期的思路，对如何处理不确定说话真假的人有明确说明，代码利用STL容器，简洁高效。
4. **EarthGiao**：★★★
    - 思路描述较笼统，未详细说明实现细节，缺乏代码示例，对读者理解和实现帮助有限。
5. **Ebola**：★★★
    - 详细描述总体思路和各细节点，但代码中部分逻辑判断较冗长，降低了代码的可读性和简洁性。
6. **陈阳蒟蒻**：★★
    - 仅阐述思路且较简略，未提供代码，对关键的判断过程和实现细节缺乏描述。
7. **包子入侵**：★★★
    - 详细解析题目并给出完整代码，但算法运行时间复杂度较高，代码中部分变量命名和注释风格不够简洁清晰。
8. **shadyqwq**：★★★
    - 提出2 - sat(伪)思路较新颖，但未详细阐述实现细节，对读者理解和实现有一定难度。
9. **Drinkkk**：★★★
    - 详细描述字符串处理和找出罪犯的思路，但代码中部分逻辑判断较复杂，降低了可读性。
10. **1124828077ccj**：★★★
    - 思路与多数题解相似，通过特殊方式处理换行符问题，但代码整体结构不够清晰，部分变量命名较随意。
11. **Belongbb**：★★★
    - 采用枚举说真话的人来判断是否符合条件，思路较常规，代码使用Pascal语言，对熟悉C++的读者参考性有限。
12. **stevewen**：★★★★
    - 思路清晰，通过枚举犯人和星期进行判断，代码简洁明了，对换行符问题有处理，提高了代码的通用性。
13. **【天朝】MILK**：★★★
    - 思路表述较清晰，但代码实现中部分逻辑判断较复杂，且读入函数的实现方式不够简洁高效。
14. **Setsugesuka**：★★★
    - 详细分析题意、定义状态和预处理过程，但代码中部分变量命名不够简洁，整体逻辑稍显复杂。
15. **WLHW**：★★★
    - 思路较清晰，通过结构体记录人物信息和证词，代码注释详细，但整体实现过程稍显繁琐。
16. **吴国铨**：★★
    - 未提供代码，仅解析题目和说明思路，且思路描述较简略，对关键实现细节缺乏阐述。
17. **山河影**：★★★
    - 采用Pascal语言实现搜索与回溯，思路较清晰，但代码结构较复杂，标识符命名不够直观。
18. **bobble**：★★★
    - 详细描述思路和实现过程，但采用Pascal语言，且代码中部分逻辑判断较复杂，降低了可读性。

### 关键思路与技巧
1. **枚举策略**：由于罪犯只有一个且日期有限，枚举罪犯和日期是解决本题的有效策略，可简化问题求解过程。
2. **字符串处理**：利用`map`将人名映射为编号，方便处理和比较。同时，通过`find`、`substr`等字符串函数解析证词，提取关键信息。
3. **状态记录与判断**：使用数组或结构体记录每个人的说话状态（说真话、说假话或不确定），在枚举过程中根据证词不断更新状态，并判断是否出现矛盾。

### 同类型题或类似算法套路
此类题目属于逻辑推理与模拟类型，通常数据范围较小，可采用枚举法解决。解题关键在于将题目中的条件和逻辑转化为计算机可处理的信息，通过枚举可能的情况进行模拟和判断。

### 洛谷相似题目推荐
1. **P1036 [NOIP2002 普及组] 选数**：通过枚举不同的数的组合，判断其是否满足特定条件，与本题枚举思路相似。
2. **P1157 组合的输出**：需要枚举所有可能的组合情况并输出，锻炼枚举算法的实现能力。
3. **P1433 吃奶酪**：通过枚举不同的路径组合，找到满足条件的最优路径，同样涉及枚举和逻辑判断。

### 个人心得摘录与总结
1. **cmd2001**：强调换行符在不同系统下的差异会导致WA，建议使用`fgets`读取一整行并手动处理换行符，以避免因换行符问题导致的错误。
2. **Ebola**：在字符串读入时，`getline`、`gets`、`getchar`都出现莫名错误，最终选择逐个单词读入，遇到标点符号退出的方式。提示在字符串读入处理时，需根据实际情况选择合适的方法，避免常见错误。 

---
处理用时：111.27秒
# 题目信息

# Cool loves maids

## 题目背景

Cool 非常喜欢妹子，以至于 Cool 在百度上有一个非常神奇的 ID 【雾】。

## 题目描述

Cool 现在搞清楚了女生宿舍的地形。女生宿舍是由很多栋楼构成的，它们可以被抽象成 $20\times 20$ 的方格。

Cool 的妹子们所处的地方可以被表示为实数类型的坐标。当一个妹子 $(x,y)$ 在楼 $(i,j)$ 中，当且仅当 $i \le x<i+1$，$j \le y<j+1$，$i,j\in \Z$。两个妹子之间有距离，当且仅当一个妹子所在的楼的横纵坐标均小于另一个妹子所在的楼，此时她们之间的距离为她们自身坐标的曼哈顿距离。

现在 Cool 要搞一个大统计：求 $n$ 个妹子之间所有距离之和。

## 说明/提示

### 数据范围及约定

对于全部数据，保证 $1\le n\le 5\times 10^6$。

## 样例 #1

### 输入

```
6
3 5 7 11 13 17```

### 输出

```
17.52167```

# AI分析结果

### 综合分析与结论
- **思路**：所有题解都意识到直接枚举每两个妹子间距离会超时，因此都采用将妹子按所在楼分组的方式优化。先生成妹子坐标数据，再对每栋楼内妹子的横纵坐标分别求和并记录楼内妹子数量，最后通过枚举不同楼，依据曼哈顿距离公式计算距离总和与配对数总和，进而得出平均距离。
- **算法要点**：数据生成、按楼分组统计坐标和与妹子数量、利用曼哈顿距离公式计算距离。
- **解决难点**：避免暴力枚举导致的超时问题，通过按楼分组优化算法时间复杂度。

各题解质量相近，均未达到4星标准，以下给出通用建议与扩展思路。

### 通用建议与扩展思路
- **关键思路或技巧**：利用数据的空间局限性（20×20 的方格），通过分组统计优化枚举过程，降低时间复杂度。在代码实现上，注意数据类型转换，因为妹子坐标是实数。
- **可拓展之处**：此类题目属于空间坐标上的统计优化问题，类似套路可用于处理大规模空间数据的统计，如地理区域内人口分布相关统计等。同类型题常考察对数据分布特点的挖掘与利用，通过合理分组或分块优化枚举。
- **相似知识点洛谷题目**：
  - P1308 统计单词数，考察字符串处理与统计优化。
  - P1131 银行贷款，涉及数学计算与数据处理优化。
  - P1083 借教室，需要处理区间统计与优化。

### 个人心得总结
题解中部分作者提到最初认为是简单枚举，但发现会超时从而思考优化方法，这表明在解决算法问题时，初步思路可能存在性能问题，需要进一步分析数据规模和算法复杂度，挖掘数据特点进行优化。 

---
处理用时：26.23秒
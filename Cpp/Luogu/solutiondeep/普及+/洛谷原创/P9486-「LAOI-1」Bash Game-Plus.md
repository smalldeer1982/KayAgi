# 题目信息

# 「LAOI-1」Bash Game-Plus

## 题目描述

>巴什博弈：有一堆 $n$ 个物品，两名玩家轮流从中拿取物品。每次至少拿 $1$ 个，至多拿 $m$ 个，不能不拿，最终将物品拿完者获胜。

我们给这个游戏增加一些规则：

有一堆 $n$ 个物品，甲和乙轮流从中拿取物品，甲先拿。每次至少拿 $1$ 个，至多拿 $m$ 个，最终将物品拿完者获胜。    
现在新加入一条规则：**也可以不拿**，但每当有一名玩家选择不拿物品时，接下来的 $k$ 次操作中两名玩家都不可以不拿。

举个例子，当 $k=3$ 时，如果甲在某一次操作中没有拿物品，那么接下来乙、甲、乙三轮都必须拿至少 $1$ 件物品。然后又轮到甲了，这次甲就可以再次选择不拿。

甲乙两人一共进行了 $t$ 次游戏。对于每次游戏，你需要告诉甲他有没有必胜策略。

## 说明/提示

| Subtask | 得分 | $t$ | $op$ | $n\le$ | $m\le$ | $k\le$ | 特殊性质 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $0$ | $2$ | $100000$ | $1$ | $10^{18}$ | $10^{18}$ | $k=114514$ |  |
| $1$ | $2$ | $99994$ | $0$ | $10^{18}$ | $10^{18}$ | $k=1$ |  |
| $2$ | $9$ | $99995$ | $0$ | $10^{18}$ | $10^{18}$ | $3$ |  |
| $3$ | $5$ | $99996$ | $0$ | $10^{18}$ | $10^{18}$ | $k\ge n$ |  |
| $4$ | $10$ | $50$ | $0$ | $50$ | $50$ | $10^{18}$ |  |
| $5$ | $13$ | $99997$ | $0$ | $100$ | $100$ | $10^{18}$ |  |
| $6$ | $16$ | $99998$ | $0$ | $400$ | $400$ | $10^{18}$ | $A$ |
| $7$ | $10$ | $99999$ | $0$ | $5000$ | $5000$ | $10^{18}$ |  |
| $8$ | $31$ | $100000$ | $0$ | $10^{18}$ | $10^{18}$ | $10^{18}$ |  |
| $9$ | ~~45~~ $2$ | $99993$ | $0$ | $10^{18}$ | $10^{18}$ | $10^{18}$ | 不可以，总司令 |

特殊性质 $A$ ：所有 $m$ 相等。

对于所有数据：$t\le10^5$，$1\le n,m,k\le10^{18}$

不保证数据随机。

## 样例 #1

### 输入

```
6 0
2 2 2
3 2 2
4 2 2
7 2 3
13 2 6
14 2 6```

### 输出

```
Yes
Yes
No
Yes
Yes
No```

## 样例 #2

### 输入

```
6 0
4 3 2
5 3 3
13 3 5
13 3 6
5 100 1000000000000
123454204 4321 97```

### 输出

```
Yes
No
Yes
No
Yes
No```

# AI分析结果

### 综合分析与结论
该题是巴什博弈的变形，题解通过分析博弈状态，从暴力思路出发，经打表找规律得出优化解法。目前仅一条题解，思路较清晰，先给出暴力转移方程，再通过打表发现规律优化到 $O(1)$ 复杂度，并给出加强结论及证明思路，整体质量不错。

### 所选的题解
- **星级**：4星
- **关键亮点**：从暴力 SG 函数思路出发，通过打表发现 $f_{n,j}$ 关于 $n$ 的循环规律，优化到 $O(1)$ 复杂度，同时给出加强结论辅助证明。
- **个人心得**：无

### 重点代码及核心实现思想
核心实现思想是根据打表得出的规律直接判断先手是否必胜。由于无代码，假设函数 `bool canWin(long long n, long long m, long long k)` 实现此功能，代码如下：
```cpp
bool canWin(long long n, long long m, long long k) {
    long long c = (m + 1) * (k / 2) + 1;
    n %= c;
    return!(n == 0 || (n > 1 && n % (m + 1) == 1));
}
```
此代码先计算循环节 $c$，对 $n$ 取模，然后根据规律判断先手是否必胜。

### 最优关键思路或技巧
通过打表找规律优化暴力解法，发现状态关于物品数量 $n$ 的循环规律，从而将时间复杂度从 $O(nmk)$ 优化到 $O(1)$。

### 可拓展思路
此类题目属于博弈论拓展题型，可拓展到更多不同限制条件的博弈场景，关键在于分析状态转移与寻找规律。类似套路是先从暴力状态转移方程出发，通过打表等方式挖掘隐藏规律以优化算法。

### 洛谷相似题目推荐
- P2197 【模板】nim 游戏：基础的尼姆博弈问题，考察对博弈论中异或和判断胜负的理解。
- P1247 取火柴游戏：也是博弈论相关，通过分析不同取火柴规则下的必胜策略考察博弈知识。
- P3185 [HNOI2007] 分裂游戏：复杂的博弈论问题，结合状态表示与转移分析胜负情况，锻炼博弈思维。 

---
处理用时：22.97秒
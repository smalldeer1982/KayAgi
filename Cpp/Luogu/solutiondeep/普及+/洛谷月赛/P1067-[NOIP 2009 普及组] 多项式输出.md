# 题目信息

# [NOIP 2009 普及组] 多项式输出

## 题目描述

一元 $n$ 次多项式可用如下的表达式表示：

$$f(x)=a_nx^n+a_{n-1}x^{n-1}+\cdots +a_1x+a_0,a_n\ne 0$$

其中，$a_ix^i$ 称为 $i$ 次项，$a_i$ 称为 $i$ 次项的系数。给出一个一元多项式各项的次数和系数，请按照如下规定的格式要求输出该多项式：

1. 多项式中自变量为 $x$，从左到右按照次数递减顺序给出多项式。

2. 多项式中只包含系数不为 $0$ 的项。

3. 如果多项式 $n$ 次项系数为正，则多项式开头不出 `+` 号，如果多项式 $n$ 次项系数为负，则多项式以 `-` 号开头。

4. 对于不是最高次的项，以 `+` 号或者 `-` 号连接此项与前一项，分别表示此项系数为正或者系数为负。紧跟一个正整数，表示此项系数的绝对值（如果一个高于 $0$ 次的项，其系数的绝对值为 $1$，则无需输出 $1$）。如果 $x$ 的指数大于 $1$，则接下来紧跟的指数部分的形式为“$x^b$”，其中 $b$ 为 $x$ 的指数；如果 $x$ 的指数为 $1$，则接下来紧跟的指数部分形式为 $x$；如果 $x$ 的指数为 $0$，则仅需输出系数即可。

5. 多项式中，多项式的开头、结尾不含多余的空格。


## 说明/提示

NOIP 2009 普及组 第一题

对于100%数据，$0 \le n \le 100$，$-100 \le $系数$ \le 100$

---

$\text{upd 2022.8.1}$：新增加一组 Hack 数据。

## 样例 #1

### 输入

```
5 
100 -1 1 -3 0 10```

### 输出

```
100x^5-x^4+x^3-3x^2+10```

## 样例 #2

### 输入

```
3 
-50 0 0 1 
```

### 输出

```
-50x^3+1 
```

# AI分析结果

### 综合分析与结论
这些题解思路基本一致，均是按照题目要求，对多项式各项按次数从高到低遍历，针对系数和次数的不同情况进行输出处理。算法要点在于正确判断并处理符号输出、系数为±1及0的情况、次数为0和1的情况。难点主要是边界条件处理，如首项符号、系数为±1 且次数不同时的输出格式等。多数题解代码结构清晰，部分题解对细节处理方式不同。

### 所选的题解
- **作者：Loyal_Soldier (5星)**
    - **关键亮点**：思路清晰，代码简洁明了，直接按不同情况讨论输出，逻辑清晰，无冗余代码。
    - **重点代码**：
```cpp
#include<bits/stdc++.h>
#define int long long
using namespace std;
signed main(){
    int n;
    cin>>n;
    for(int i=n;i>=0;i--){
        int x;
        cin>>x;
        if(x){
            if(i!=n&&x>0)
                cout<<'+';
            if(i!=0&&x== -1)
                cout<<'-';
            if(abs(x)>1||i==0)
                cout<<x;
            if(i>1)
                cout<<"x^"<<i;
            if(i==1)
                cout<<'x';
        }
    }
    return 0;
}
```
    - **核心实现思想**：从最高次项到常数项遍历，对每个非零系数项，根据其是否为首项、系数正负及大小、次数高低决定输出内容。
- **作者：邪王真眼Rikka (4星)**
    - **关键亮点**：将输出过程分为符号、系数、幂三个阶段判断，使代码逻辑较为清晰，对洛谷中abs函数的特殊处理有借鉴意义。
    - **重点代码**：
```cpp
#include<stdio.h>
int abs(int x)
{
    if(x>0)return x;
    return -x;
}
int main()
{
    int a[101];
    int n,flag,i;
    scanf("%d",&n);
    for(i=n; i>=0; i--)
        scanf("%d",&a[i]);
    if(n==0)
    {
        printf("%d",a[0]);
        return 0;
    }
    flag=1;
    for(i=n; i>=0; i--)
    {
        if(a[i]==0)continue;
        if((flag==1&&a[i]<0)||(a[i]<0))
        {
            printf("-");
        }
        else if(flag==0&&a[i]>0) printf("+");
        if(a[i]!=0&&flag==1)flag=0;
        if(abs(a[i])!=1||i==0)printf("%d",abs(a[i]));
        if(i>1)printf("x^%d",i);
        if(i==1)printf("x");
    }
    return 0;
}
```
    - **核心实现思想**：先输入系数存储在数组，通过flag标记首项，按三个阶段判断，依次处理符号、系数、幂的输出。
- **作者：qhr2023 (4星)**
    - **关键亮点**：思路简洁，直接按题目要求，对每项依次输出符号、系数、自变量x、次数，代码紧凑。
    - **重点代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int main(){
    int n, a; cin >> n;
    for(int i=n; i>=0; i--){
        cin >> a;
        if(a){
            if(i<n&&a>0) cout << '+';
            if(abs(a)>1||i==0) cout << a;
            if(a== -1&&i) cout << '-';
            if(i>0) cout << 'x';
            if(i>1) cout << '^' << i;
        }
    }
    return 0;
}
```
    - **核心实现思想**：遍历各项，针对系数非零的项，按顺序输出符号、系数、自变量x（次数不为0时）、次数（次数大于1时）。

### 最优关键思路或技巧
- **分情况讨论**：将多项式输出按系数正负、系数绝对值大小、次数高低等情况分类讨论，使复杂问题简单化。
- **阶段化处理**：如邪王真眼Rikka的题解，将输出过程分为符号、系数、幂三个阶段判断，使代码逻辑更清晰。

### 可拓展之处
此类题目属于模拟类题目，类似套路是对复杂对象按一定规则进行拆解，分情况模拟其组成部分的输出或处理。同类型题如处理数学表达式格式化输出、特定格式数据的解析与生成等。

### 推荐题目
- [P1009 阶乘之和](https://www.luogu.com.cn/problem/P1009)：涉及高精度运算与模拟。
- [P1046 陶陶摘苹果（升级版）](https://www.luogu.com.cn/problem/P1046)：需按条件模拟判断过程。
- [P1147 连续自然数和](https://www.luogu.com.cn/problem/P1147)：通过模拟枚举和计算解决问题。

### 个人心得摘录与总结
作者sueyunsheng提到本题坑较多，如系数为 -1,1、指数为1、输出多余符号等情况。总结为处理此类模拟题要特别关注边界条件和特殊情况，细致处理每一个细节，避免遗漏。 

---
处理用时：57.12秒
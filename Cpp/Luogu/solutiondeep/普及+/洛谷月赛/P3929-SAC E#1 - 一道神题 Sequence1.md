# 题目信息

# SAC E#1 - 一道神题 Sequence1

## 题目背景

小强和阿米巴是好朋友。


## 题目描述

小强很喜欢数列。有一天，他心血来潮，写下了一个数列。

阿米巴也很喜欢数列。但是他只喜欢其中一种：波动数列。

一个长度为 $n$ 的波动数列满足对于任何 $i\ (1 \le i < n)$，均满足以下两个条件至少一个：

- $a_{2i-1} \le a_{2i}$ 且 $a_{2i} \ge a_{2i+1}$（若存在）。
- $a_{2i-1} \ge a_{2i}$ 且 $a_{2i} \le a_{2i+1}$（若存在）。

阿米巴把他的喜好告诉了小强。小强便打算稍作修改，以让这个数列成为波动数列。他想知道，能否通过仅修改一个数（或不修改），使得原数列变成波动数列。


## 说明/提示

### 数据范围及约定

- 对于 $30\%$ 的数据，$1\le n \le 10$。
- 对于另外 $30\%$ 的数据，$1\le m \le 1000$。
- 对于 $100\%$ 的数据，$1\le n \le 10^5$，$m \le 10^9$。

其中 $m = \max|a_i|$（数列中绝对值的最大值）


## 样例 #1

### 输入

```
5
1 2 3 2 1
5
1 2 3 4 5
```

### 输出

```
Yes
No```

# AI分析结果

• 综合分析与结论：
    - 思路：所有题解均基于波动序列只有两种形式这一特性展开。通过贪心策略，从前向后扫描序列，判断每个元素是否符合两种波动序列之一的要求，不符合则修改为极大值（如`0x3f3f3f3f`、`1000000001`）或极小值（如`-0x3f3f3f3f`、`-1000000001`），同时记录修改次数。最后判断两种波动序列的修改次数中是否有一个不大于1，以确定能否通过修改一个数（或不修改）使原序列成为波动序列。
    - 算法要点：利用波动序列的两种固定形式，采用贪心思想，线性扫描序列并统计修改次数。
    - 解决难点：关键在于理解波动序列的特性，确定修改元素的最优值（极大或极小值），以及正确统计修改次数。
    - 整体来看，各题解思路相近，主要差异在于代码实现细节，如变量命名、判断条件写法等。

    - 评分：
        - 作者kkksc03：5星。思路清晰，先阐述部分分做法，再给出AC做法，逻辑连贯。
        - 作者mrsrz：4星。代码简洁明了，直接实现贪心算法，通过位运算优化判断条件。
        - 作者Elegy_of_Green_Kite：4星。通过类比简单题目引入思路，代码实现参考较好写法，注释详细。

• 所选的题解：
  - 作者kkksc03，5星
    - 关键亮点：先介绍部分分做法，再详细说明AC做法，对问题的分析全面且深入，能帮助读者逐步理解解题思路。
    - 核心代码实现思想：先判断原序列是否为波动序列，若是则输出“Yes”。否则，对于每种波动序列，从前向后扫描原序列，遇到不符合要求的元素，将其修改为极大或极小值并计数，最后根据两种波动序列的最小修改次数是否不大于1输出结果。
    - 核心代码片段：
```cpp
// AC做法核心部分
// 求原序列变为某种波动序列需要的最小修改次数
// 从前向后扫，如果遇到某个元素不满足要求，则将该元素修改为 ∞ 和 −∞ 中满足要求的那个，并将计数器加一
// 最后计数器的值就是修改需要的最小次数
// 总复杂度 O(n)
// 以下为伪代码示意
int cnt1 = 0, cnt2 = 0;
// 遍历序列求第一种波动序列的修改次数
for (int i = 1; i < n; ++i) {
    if (不满足第一种波动序列要求) {
        修改为满足要求的极大或极小值;
        cnt1++;
    }
}
// 遍历序列求第二种波动序列的修改次数
for (int i = 1; i < n; ++i) {
    if (不满足第二种波动序列要求) {
        修改为满足要求的极大或极小值;
        cnt2++;
    }
}
if (min(cnt1, cnt2) <= 1) {
    cout << "Yes" << endl;
} else {
    cout << "No" << endl;
}
```
  - 作者mrsrz，4星
    - 关键亮点：代码简洁高效，通过巧妙的位运算简化判断条件，在实现思路清晰的同时提高了代码运行效率。
    - 核心代码实现思想：在循环中，根据当前元素位置的奇偶性以及与前一个元素的大小关系，判断是否符合两种波动序列的要求，不符合则修改为极大或极小值并计数，最后根据两种波动序列的修改次数判断输出结果。
    - 核心代码片段：
```cpp
#include<cstdio>
using namespace std;
int n;
int main(){
    while(~scanf("%d",&n)){
        int cnt1=0,pre1,pre2,cnt2=0;
        scanf("%d",&pre2);
        pre1=pre2;
        for(int i=2;i<=n;++i){
            int now;
            scanf("%d",&now);
            if((i&1)&&now>pre1){
                ++cnt1;
                pre1=-0x3f3f3f3f;
            }else
            if((i&1^1)&&now<pre1){
                ++cnt1;
                pre1=0x3f3f3f3f;
            }else
            pre1=now;
            if((i&1)&&now<pre2){
                ++cnt2;
                pre2=0x3f3f3f3f;
            }else
            if((i&1^1)&&now>pre2){
                ++cnt2;
                pre2=-0x3f3f3f3f;
            }else
            pre2=now;
        }
        if(cnt1<2||cnt2<2)puts("Yes");else
        puts("No");
    }
    return 0;
}
```
  - 作者Elegy_of_Green_Kite，4星
    - 关键亮点：通过类比简单的`01`序列交替问题引入本题思路，使读者更容易理解，代码实现参考较好写法且注释详细。
    - 核心代码实现思想：与其他题解类似，在循环中根据元素位置和大小关系判断是否符合两种波动序列要求，不符合则修改为极大或极小值并计数，最后根据计数结果输出。
    - 核心代码片段：
```cpp
#include<stdio.h>
#include<iostream>
using namespace std;
const int inf=0x7fffffff;
int n;
int main()
{
    while(~scanf("%d",&n))
    {
        int cnt1=0,cnt2=0,pre1,pre2;
        scanf("%d",&pre2),pre1=pre2;
        for(int i=2;i<=n;++i)
        {
            int now;
            scanf("%d",&now);

            if((i&1) && now>pre1)  cnt1++,pre1=-inf;
            else if((i&1^1) && now<pre1)  cnt1++,pre1=inf;
            else  pre1=now;

            if((i&1) && now<pre2)  cnt2++,pre2=inf;
            else if((i&1^1) && now>pre2)  cnt2++,pre2=-inf;
            else  pre2=now;
        }
        if(cnt1<2 || cnt2<2)  printf("Yes\n");
        else  printf("No\n");
    }
return 0;
}
```

• 最优关键思路或技巧：
    - 利用波动序列只有两种形式的特性，采用贪心策略，将不符合要求的元素修改为极大或极小值，这种修改方式能保证在满足后续元素要求的同时，使修改次数最少。
    - 通过位运算（如`i&1`判断奇偶）简化条件判断，提高代码运行效率。

• 可拓展思路：
    - 同类型题可拓展到判断序列是否能通过 $k$ 次修改变成特定序列的问题，思路类似，只是修改次数的判断条件变为不大于 $k$。
    - 类似算法套路：对于具有特定模式的序列判断与修改问题，可先分析模式特点，采用贪心策略确定最优修改方式，再通过线性扫描统计修改次数。

• 推荐题目：
    - [P1088 火星人](https://www.luogu.com.cn/problem/P1088)：涉及序列的变换与判断，与本题判断序列能否通过一定操作变成特定序列类似。
    - [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)：通过删除数字使序列满足特定条件，可类比本题通过修改数字使序列满足波动序列条件。
    - [P1923 【深基9.例4】求第 k 小的数](https://www.luogu.com.cn/problem/P1923)：对序列进行操作以满足特定顺序要求，与本题对序列进行修改以满足波动序列要求思路有相似之处。

• 个人心得摘录与总结：无。 

---
处理用时：61.64秒
# 题目信息

# 「SWTR-8」美元巨大

## 题目背景

#### 输出不允许有前导零。

原题目名称为「美元巨大二的二的二的二的二」。

小 A 喜欢用形如
$$
\Huge 2 ^ {2 ^ {2 ^ {2 ^ {2}}}}
$$
的幂塔把小 T 的博客炸掉。

## 题目描述

小 A 有 $n$ 个 $2$ 的幂 $a_1, a_2, \cdots, a_n$。他要在这些数之间插入 $x$ 个异或运算符和 $y$ 个或运算符，组成一个表达式。保证 $x + y = n - 1$。

表达式越大，越有可能炸掉小 T 的博客。小 A 希望 **从左往右** 计算表达式时它的值最大。他想知道表达式最大可能的取值是多少，用二进制表示。他还希望你构造出这样的表达式，因为他懒得自己构造了。

若存在多组构造方案，输出任意一组。

多组测试数据。

## 说明/提示

**「评分方式」**

对于每组测试数据：

- 若你输出的第一行比标准答案劣，得 0 分。
- 若你输出的第一行比标准答案优，则 checker 将检查你的构造方案是否正确。若正确，则返回 `_fail`，表现为测试点 UKE；否则得 0 分。
- 否则，你输出的第一行和标准答案一样。若构造方案不正确，得 0.6 分；否则得 1 分。

每个测试点的得分为测试点内所有测试数据的得分的最小值乘以该测试点的分值。

注意，checker 能检测出你的答案比标准答案优的前提是输出完全符合格式。**一旦输出不符合格式，得 0 分**。格式限制包括但不限于：

- 第一行不得输出除 `0` 和 `1` 以外的字符。
- 第二行不得输出除 `^` 和 `|` 以外的字符，且字符串长度恰为 $n - 1$。
- `^` 的个数恰为 $x$，`|` 的个数恰为 $y$。

**「数据范围与约定」**

- 测试点 #1（10 points）：所有 $b_i$ 互不相等。
- 测试点 #2（20 points）：所有 $b_i$ 相等。
- 测试点 #3（30 points）：$n \leq 8$。
- 测试点 #4（25 points）：$n \leq 10 ^ 3$。
- 测试点 #5（15 points）：无特殊限制。

对于 $100\%$ 的数据：

- $1\leq T\leq 20$。
- $1 \leq n \leq 2.5 \times 10 ^ 4$。
- $0 \leq x, y < n$，$x + y = n - 1$。
- $1\leq a_i < 2 ^ {2 ^ {2 ^ {2 ^ 2}}}$，即 $0\leq b_i < 65536$。

**「帮助与提示」**

- 关于 [位运算](https://oi-wiki.org/math/bit/)。
- 请注意 IO 优化。

**「题目来源」**

- [Sweet Round 8](https://www.luogu.com.cn/contest/73382) B
- Idea & Solution：[Alex_Wei](https://www.luogu.com.cn/user/123294)。
- Tester：[chenxia25](https://www.luogu.com.cn/user/138400)。

## 样例 #1

### 输入

```
0
4
4 0 3
1 0 6 4
8 5 2
1 5 5 7 1 5 5 7
1 0 0
15
4 3 0
65535 65535 57 57
```

### 输出

```
1010011
|||
10100000
^|^^^^|
1000000000000000

0
^^^
```

# AI分析结果

• 综合分析与结论：这些题解都采用贪心策略解题，核心思路是利用或运算和异或运算的性质，按位从大到小贪心使结果最大。算法要点在于统计每个二进制位上1出现的次数，根据奇偶性和剩余运算符情况确定该位结果及运算符放置。解决难点主要是如何合理分配异或和或运算符，使高位尽量为1，并构造出满足条件的表达式。在思路清晰度、代码可读性、优化程度等方面，各题解存在一定差异。
• 所选的题解：
  - **作者：Alex_Wei (5星)**
    - **关键亮点**：思路清晰简洁，直接点明或比异或更能使结果变大的核心性质，按位从大到小贪心，代码实现简洁高效，对每个出现偶数次的位，在最后分配一个或使其变为1，对多余的或从后往前填入空隙。
  - **作者：jiangxiaohai (4星)**
    - **关键亮点**：思路阐述详细，从异或和按位或的性质出发，假设初始全为异或，根据运算后得数是否变小及剩余“|”的情况进行调整，代码实现中对每个二进制位的处理逻辑清晰，通过多个数组辅助记录相关信息。
    - **个人心得**：无
  - **作者：zhenjianuo2025 (4星)**
    - **关键亮点**：将题意转化为二进制高精数每一位的运算问题，按二进制位独立考虑，从高位到低位贪心，清晰阐述了对奇数次和偶数次出现的位的处理方式，代码简洁明了，易于理解。
    - **个人心得**：%%% Alex 巨佬 orz orz，让本蒟蒻恍然大悟（还是我弱啊……）
• 最优关键思路或技巧：利用位运算性质，按位从大到小贪心。通过统计每个二进制位上1出现的次数，对于出现奇数次的位，直接用异或可使该位为1；对于出现偶数次的位，在最后一次出现时用或可使该位为1，多余的或从后往前填充。
• 可拓展之处：同类型题可涉及更多不同的位运算组合，或改变运算符优先级等条件。类似算法套路是对于涉及位运算且求最值的问题，常考虑按位分析，利用位运算性质贪心求解。
• 相似知识点的洛谷题目：
  - P1514 引水入城，涉及位运算和贪心策略。
  - P2141 珠心算测验，考查位运算及计数。
  - P1876 开灯，需运用位运算和逻辑推理。
• 个人心得摘录及总结：
  - 作者zhenjianuo2025感慨从Alex_Wei巨佬处获得启发，认识到自身差距，体现了学习优秀思路对提升能力的重要性。 

---
处理用时：29.18秒
# 题目信息

# [NOIP 2003 提高组] 传染病控制

## 题目背景

本题是错题，后来被证明没有靠谱的多项式复杂度的做法。测试数据非常的水，各种玄学做法都可以通过，不代表算法正确。因此本题题目和数据仅供参考。

[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)

---

近来，一种新的传染病肆虐全球。蓬莱国也发现了零星感染者，为防止该病在蓬莱国大范围流行，该国政府决定不惜一切代价控制传染病的蔓延。不幸的是，由于人们尚未完全认识这种传染病，难以准确判别病毒携带者，更没有研制出疫苗以保护易感人群。于是，蓬莱国的疾病控制中心决定采取切断传播途径的方法控制疾病传播。经过 WHO（世界卫生组织）以及全球各国科研部门的努力，这种新兴传染病的传播途径和控制方法已经研究清楚，剩下的任务就是由你协助蓬莱国疾控中心制定一个有效的控制办法。


## 题目描述

研究表明，这种传染病的传播具有两种很特殊的性质；

第一是它的传播途径是树型的，一个人 $X$ 只可能被某个特定的人 $Y$ 感染，只要 $Y$ 不得病，或者是 $XY$ 之间的传播途径被切断，则 $X$ 就不会得病。


第二是，这种疾病的传播有周期性，在一个疾病传播周期之内，传染病将只会感染一代患者，而不会再传播给下一代。


这些性质大大减轻了蓬莱国疾病防控的压力，并且他们已经得到了国内部分易感人群的潜在传播途径图（一棵树）。但是，麻烦还没有结束。由于蓬莱国疾控中心人手不够，同时也缺乏强大的技术，以致他们在一个疾病传播周期内，只能设法切断一条传播途径，而没有被控制的传播途径就会引起更多的易感人群被感染（也就是与当前已经被感染的人有传播途径相连，且连接途径没有被切断的人群）。当不可能有健康人被感染时，疾病就中止传播。所以，蓬莱国疾控中心要制定出一个切断传播途径的顺序，以使尽量少的人被感染。


你的程序要针对给定的树，找出合适的切断顺序。



## 说明/提示

对于 $100\%$ 的数据，$1 \leq n \leq 300$。

**【题目来源】**

NOIP 2003 提高组第四题

## 样例 #1

### 输入

```
7 6
1 2
1 3
2 4
2 5
3 6
3 7
```

### 输出

```
3
```

# AI分析结果



### 综合分析与结论
该题核心在于树形结构的动态阻断策略，需通过搜索枚举阻断点并计算最优解。由于题目特性导致贪心策略不可靠，分层DFS配合剪枝成为主流解法。关键点包括：树结构的预处理（深度、子树规模）、分层枚举阻断点、回溯时状态维护。多数题解采用相似框架，差异主要体现在预处理方式和剪枝策略上。

---

### 精选题解及亮点分析

#### 1. RikoHere（★★★★☆）
**核心思路**：  
- 用BFS预处理各层节点，DFS逐层选择阻断点  
- 使用clean/reclean函数标记/恢复子树状态  
- 通过maxx变量维护最大保护人数，反向计算感染数  
**关键代码**：  
```cpp
void dfs(int cen, int tot){
    maxx = max(maxx, tot);
    for(int i = 0; i < cnt[cen]; ++i){
        if(!bol[b[cen][i]]){
            int num = clean(b[cen][i]); // 标记子树
            dfs(cen+1, tot+num); 
            reclean(b[cen][i]);        // 回溯恢复
        }
    }
}
```
**亮点**：清晰的分层处理逻辑与模块化函数设计，通过最短路算法预处理父子关系确保树结构正确性。

#### 2. 基础不牢（★★★★☆）
**核心思路**：  
- 结构体存储节点父子关系，预处理每层节点列表  
- 使用work/rework函数处理子树标记  
- 引入f标记提前终止无效搜索  
**关键代码**：
```cpp
void dfs(int now,int cnt){
    if(now==maxx) { ans=min(ans,cnt); return; }
    int f=0;
    for(int i=1;i<=deep[now][0];++i){
        if(vis[deep[now][i]]) { f++; continue; }
        vis[deep[now][i]]=1;
        work(deep[now][i],1);    // 标记子树
        dfs(now+1,cnt-count[deep[now][i]]);
        work(deep[now][i],0);    // 回溯恢复
    }
    if(f==deep[now][0]) ans=min(ans,cnt); // 提前终止
}
```
**亮点**：通过结构体增强可读性，引入状态提前判断优化搜索效率。

---

### 关键技巧总结
1. **分层预处理**：通过BFS/DFS确定节点层级关系，构建层级节点列表  
2. **子树快速标记**：递归标记子树节点数，回溯时高效恢复状态  
3. **剪枝策略**：  
   - 当前感染数超过最优解时立即回溯  
   - 整层已阻断时提前更新答案  
4. **树结构优化**：使用邻接表存储树，确保父子关系正确性  

---

### 拓展练习
1. **P2014 [CTSC1997] 选课** - 树形DP与资源分配  
2. **P1352 没有上司的舞会** - 树形结构状态决策  
3. **P1120 小木棍** - 强力剪枝优化类搜索问题

---
处理用时：51.30秒
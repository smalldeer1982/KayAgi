# 题目信息

# [NOIP 2007 普及组] 守望者的逃离

## 题目背景

NOIP2007 普及组 T3

## 题目描述

恶魔猎手尤迪安野心勃勃，他背叛了暗夜精灵，率领深藏在海底的娜迦族企图叛变。

守望者在与尤迪安的交锋中遭遇了围杀，被困在一个荒芜的大岛上。

为了杀死守望者，尤迪安开始对这个荒岛施咒，这座岛很快就会沉下去。到那时，岛上的所有人都会遇难。

守望者的跑步速度为 $17m/s$，以这样的速度是无法逃离荒岛的。庆幸的是守望者拥有闪烁法术，可在 $1s$ 内移动 $60m$，不过每次使用闪烁法术都会消耗魔法值 $10$ 点。守望者的魔法值恢复的速度为 $4$ 点每秒，只有处在原地休息状态时才能恢复。

现在已知守望者的魔法初值 $M$，他所在的初始位置与岛的出口之间的距离 $S$，岛沉没的时间 $T$。你的任务是写一个程序帮助守望者计算如何在最短的时间内逃离荒岛，若不能逃出，则输出守望者在剩下的时间内能走的最远距离。

注意：守望者跑步、闪烁或休息活动均以秒为单位，且每次活动的持续时间为整数秒。距离的单位为米。


## 说明/提示

对于 $30\%$ 的数据，$1  \le  T   \le  10$，$ 1   \le   S   \le  100$；

对于 $50\%$ 的数据，$1   \le  T   \le   10^3$，$ 1   \le  S  \le   10^4$；

对于 $100\%$ 的数据，$1   \le   T   \le   3\times  10^5$，$0   \le   M   \le   10^3$，$ 1   \le  S   \le   10^8$。


## 样例 #1

### 输入

```
39 200 4
```

### 输出

```
No
197
```

## 样例 #2

### 输入

```
36 255 10```

### 输出

```
Yes
6```

# AI分析结果



### 综合分析与结论
该问题核心在于在时间约束下选择最优移动策略（闪烁/恢复魔法/跑步）。各题解主要采用贪心或动态规划，核心思路均聚焦于优先使用魔法闪现，并在魔法不足时通过维护两种状态（纯闪现距离与跑步距离）动态更新最优解。

---

### 高星题解推荐

#### 1. 题解作者：wzr1125（★★★★☆）
**关键亮点**：  
- 使用双变量维护闪现与跑步距离，通过 `run = max(run, fla)` 实现状态继承  
- O(T)线性时间复杂度，空间复杂度O(1)，完美处理1e5级数据  
- 代码简洁易懂（仅12行核心逻辑）

**核心代码**：
```cpp
for(int i=1;i<=t;i++){ 
    if(m>=10) m-=10,fla+=60, run+=17;
    else m+=4, run+=17;
    run = max(run, fla); // 关键状态更新
    if(run >= s) { /* 输出 */ }
}
```

#### 2. 题解作者：qhr2023（★★★★☆）
**关键亮点**：  
- 引入双状态分离（闪现专用距离s2与综合最优s1）  
- 用三目运算符简化魔法值判断，代码极度精简  
- 正确性易验证，通过样例覆盖所有分支

**核心代码**：
```cpp
for(int i=1; i<=t; i++){
    m>=10 ? m-=10, s2+=60 : m+=4; 
    s1 = max(s1+17, s2); // 同步最优状态
    if(s1 >= s) { /* 输出 */ }
}
```

#### 3. 题解作者：GLr137（★★★☆☆）
**关键亮点**：  
- 动态规划预处理纯闪现路径，再补全跑步状态  
- 通过两阶段处理（先魔法后跑步）降低复杂度  
- 适用于理解DP框架的学习者

**核心代码**：
```cpp
// 第一阶段：预处理纯闪现
for(int i=1; i<=t; i++){
    dp[i] = dp[i-1] + (m >=10 ? 60 : 0);
    m -= (m >=10 ? 10 : 0); m += (m <10 ?4 :0);
}
// 第二阶段：补跑步状态
for(int i=1; i<=t; i++){
    dp[i] = max(dp[i], dp[i-1]+17);
}
```

---

### 最优关键思路总结
1. **双状态贪心法**：维护闪现专用距离与综合最优距离，每次迭代更新 `run = max(run+17, fla)`  
2. **魔法优先策略**：当魔法≥10时必用闪现，否则恢复魔法  
3. **线性时间复杂度**：通过状态继承避免复杂分支判断，确保处理3e5级数据高效性

---

### 拓展与举一反三
- **同类问题**：资源分配+时间约束的最优化问题（如P1806 跑步、P1005 矩阵取数）  
- **优化套路**：当两种策略存在继承关系时，通过max(a, b)动态维护最优状态  
- **调试技巧**：构造边界测试用例（如魔法刚好用完、剩余距离恰为60倍数）

---

### 推荐练习题
1. **P1090** [合并果子] - 贪心优先队列  
2. **P1806** [马拉松] - 时间约束下的动态规划  
3. **P1005** [矩阵取数游戏] - 双状态DP+高精度处理

---
处理用时：45.70秒
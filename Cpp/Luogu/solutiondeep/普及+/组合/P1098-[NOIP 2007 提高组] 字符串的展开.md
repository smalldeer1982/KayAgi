# 题目信息

# [NOIP 2007 提高组] 字符串的展开

## 题目描述

在初赛普及组的“阅读程序写结果”的问题中，我们曾给出一个字符串展开的例子：如果在输入的字符串中，含有类似于 `d-h` 或者 `4-8` 的字串，我们就把它当作一种简写，输出时，用连续递增的字母或数字串替代其中的减号，即，将上面两个子串分别输出为 `defgh` 和 `45678`。在本题中，我们通过增加一些参数的设置，使字符串的展开更为灵活。具体约定如下：

(1) 遇到下面的情况需要做字符串的展开：在输入的字符串中，出现了减号 `-` ，减号两侧同为小写字母或同为数字，且按照 `ASCII` 码的顺序，减号右边的字符严格大于左边的字符。

(2) 参数 $p_1$：展开方式。$p_1=1$ 时，对于字母子串，填充小写字母；$p_1=2$ 时，对于字母子串，填充大写字母。这两种情况下数字子串的填充方式相同。$p_1=3$ 时，不论是字母子串还是数字字串，都用与要填充的字母个数相同的星号 `*` 来填充。

(3) 参数 $p_2$：填充字符的重复个数。$p_2=k$ 表示同一个字符要连续填充 $k$ 个。例如，当 $p_2=3$ 时，子串`d-h` 应扩展为 `deeefffgggh`。减号两边的字符不变。

(4) 参数 $p_3$：是否改为逆序：$p_3=1$ 表示维持原来顺序，$p_3=2$ 表示采用逆序输出，注意这时候仍然不包括减号两端的字符。例如当 $p_1=1$、$p_2=2$、$p_3=2$ 时，子串 `d-h` 应扩展为 `dggffeeh`。

(5) 如果减号右边的字符恰好是左边字符的后继，只删除中间的减号，例如：`d-e` 应输出为 `de`，`3-4` 应输出为 `34`。如果减号右边的字符按照 `ASCII` 码的顺序小于或等于左边字符，输出时，要保留中间的减号，例如：`d-d` 应输出为 `d-d`，`3-1` 应输出为 `3-1`。


## 说明/提示

$40\%$ 的数据满足：字符串长度不超过 $5$。

$100\%$ 的数据满足：$1  \le  p_1  \le  3,1  \le  p_2  \le  8,1  \le  p_3  \le  2$。字符串长度不超过 $100$。

NOIP 2007 提高第二题


## 样例 #1

### 输入

```
1 2 1
abcs-w1234-9s-4zz```

### 输出

```
abcsttuuvvw1234556677889s-4zz```

## 样例 #2

### 输入

```
2 3 2
a-d-d```

### 输出

```
aCCCBBBd-d```

# AI分析结果

这是一道字符串展开的模拟题，核心在于依据给定的参数和规则对输入字符串进行处理。各题解思路相近，均是遍历字符串，针对减号及两侧字符按规则操作。
1. **思路**：遍历字符串，对每个字符判断，若为减号且两侧字符满足条件（同类型且右边大于左边），则按参数$p_1$、$p_2$、$p_3$展开；否则直接输出字符。
2. **算法要点**：判断减号两侧字符类型与大小关系；依据$p_1$确定填充字符（小写字母、大写字母或星号），$p_2$确定填充次数，$p_3$确定顺序。
3. **解决难点**：处理多种情况的判断与组合，避免遗漏特殊情况，如减号在首尾、两侧字符相等或类型不同等。

以下为各题解评分：
1. **作者Narcisuss**：思路清晰指出$p_2$作用，用三目运算符简化代码。代码简洁明了。（4星）
2. **作者Avenoir**：介绍相关头文件函数，对理解和简化代码有帮助。代码逻辑清晰，按参数不同情况处理。（4星）
3. **作者Eason_AC**：详细分析特判与过程，代码注释详细利于理解。但代码稍繁琐。（3星）
4. **作者Gu_Ren**：思路阐述细致，但代码用Pascal语言且表述较啰嗦。（3星）
5. **作者lijingqi228**：按题意直接模拟，强调一些易错点，但代码冗长，逻辑稍乱。（3星）
6. **作者qhr2023**：思路清晰，将展开过程模块化，代码简洁高效。（4星）
7. **作者GLr137**：通过合理循环设计减少判断，考虑全面，但代码稍复杂。（3星）
8. **作者ZZA000HAH**：用string类操作模拟，代码较冗长，部分处理可优化。（3星）
9. **作者I_Love_Codm**：思路清晰，代码实现较简洁，但部分变量命名可优化。（3星）
10. **作者Jerry_zpl**：按参数分类讨论，思路明确，代码实现较常规。（3星）
11. **作者ShiYuXuan1234**：代码注释详细，按步骤模拟，但代码较长，可优化结构。（3星）
12. **作者hbdcsd**：思路清晰，利用cctype头文件函数简化操作，代码简洁。（4星）
13. **作者Frank_G**：按参数分类模拟，代码较繁琐，可优化判断逻辑。（3星）
14. **作者Forgetter**：用Java实现，思路与C++类似，利用StringBuilder和String类方法。（3星）
15. **作者Uni_Tune**：用多重switch嵌套模拟，代码逻辑较清晰，但可读性稍差。（3星）
16. **作者xiaobeng_0912**：按题意逐步模拟，利用cctype头文件函数，代码较清晰。（3星）
17. **作者Capitalism_Gao**：通过多个函数分工模拟，思路清晰，但代码较复杂。（3星）
18. **作者glass_goldfish**：用三目运算符减少if语句，代码简洁，但可读性稍差。（3星）

**所选4星及以上题解**：
1. **作者Narcisuss**
    - **星级**：4星
    - **关键亮点**：指出$p_2$主要作为循环输出边界，利用三目运算符简化for循环，使代码简洁。
    - **重点代码**：
```cpp
while(ch[i]){
    be=ch[i - 1];af=ch[i + 1];f=ch[i];
    if(f=='-'&&af>be&&(be>='0'&&af<='9'||be>='a'&&af<='z')){
        for(p3==1?j=be + 1:j=af - 1; p3==1?j<af:j>be; p3==1?j++:j--){
            p=j;
            if(p1==2)
                p=(p>='a')?p - 32:p;
            else if(p1==3) p='*';
            for(k = 0; k<p2; k++)
                printf("%c",p);
        }
    } 
    else
        printf("%c",f);
    i++;
}
```
    - **核心实现思想**：遍历字符串，判断当前字符为减号且满足条件时，根据$p_3$确定循环方向，$p_1$确定填充字符，按$p_2$次数输出。
2. **作者Avenoir**
    - **星级**：4星
    - **关键亮点**：介绍<cctype>和<string>头文件下实用函数，代码按参数不同情况，通过erase、insert等string类函数处理字符串。
    - **重点代码**：
```cpp
for(register int i = 1; i<s.length() - 1; i++){
    if(s[i]=='-'&&((islower(s[i - 1])&&islower(s[i + 1])&&s[i - 1]<s[i + 1])||(isdigit(s[i - 1])&&isdigit(s[i + 1])&&s[i - 1]<s[i + 1]))){
        if(p1==1){
            s.erase(i, 1);
            string spare = "";
            for(register int k = s[i - 1]+1; k<=s[i]-1; k++){
                char ch = k;
                for(register int j = 1; j<=p2; j++) spare.push_back(ch);
            }
            if(p3==2) reverse(spare.begin(), spare.end());
            s.insert(i, spare);
        }
        // p1==2和p1==3情况类似
    }
}
```
    - **核心实现思想**：遍历字符串，找到符合条件减号，根据$p_1$不同情况构建展开字符串，$p3$决定是否翻转，最后插入原字符串。
3. **作者qhr2023**
    - **星级**：4星
    - **关键亮点**：将展开过程模块化，通过函数判断字符类型、处理$p_1$转换、生成填充字符串，逻辑清晰，代码简洁。
    - **重点代码**：
```cpp
bool p(char a, char b){
    return (a>='0' && a<='9' && b>='0' && b<='9')||(a>='a' && a<='z' && b>='a' && b<='z');
}
char P1(char c) {
    if (p1==3) return '*';
    if (p1==2&&c>='a') return c - 'a' + 'A';
    return c;
}
void P2(char c, int k) {
    while (k--) tmp += c;
}
//...
for(int i = 1; i<(int)s.size() - 1; tmp = "", i++)
    if(s[i]=='-' && p(s[i - 1], s[i + 1]) && s[i + 1]>s[i - 1]){
        for (char j = s[i - 1]+1; j<s[i + 1]; ++j) 
            P2(P1(j), p2);
        if(p3==2) 
            reverse(tmp.begin(), tmp.end());
        cout << tmp;
    } 
    else 
        cout << s[i];
```
    - **核心实现思想**：通过函数$p$判断字符类型，$P1$处理$p_1$转换，$P2$生成填充字符串，遍历字符串处理减号并按规则输出。

**最优关键思路或技巧**：
 - **模块化处理**：如qhr2023将判断字符类型、处理$p_1$转换、生成填充字符串等操作模块化，使代码逻辑清晰，易于理解和维护。
 - **巧用三目运算符**：Narcisuss利用三目运算符确定循环条件，简化代码结构，减少冗余。
 - **合理使用库函数**：Avenoir介绍并使用<cctype>和<string>头文件下函数，简化字符判断和字符串操作。

**可拓展思路**：此类字符串模拟题关键在于清晰理解规则，准确实现。可拓展到其他有复杂规则的字符串处理，如替换、加密解密等。解题套路为仔细分析规则，模块化实现各规则，注意边界和特殊情况。

**相似知识点洛谷题目**：
 - **P1055 [NOIP2008 普及组] ISBN 号码**：涉及字符串校验和处理。
 - **P1308 [NOIP2011 普及组] 统计单词数**：字符串查找与统计。
 - **P1593 [国家集训队] 因子和**：字符串与数学运算结合。

**个人心得摘录总结**：
 - **作者lijingqi228**：强调`||`和`&&`优先级，处理操作5细节，注意数字与字母分情况讨论。总结了模拟题常见易错点。
 - **作者ShiYuXuan1234**：多次强调注意边界条件，如减号在开头、结尾或连续出现，以及两侧字符类型不同等特殊情况。提醒全面考虑题目条件。
 - **作者Forgetter**：指出减号可能在行首、行末或连续出现，编写代码时需注意。强调对输入字符串中特殊情况的处理。 

---
处理用时：83.31秒
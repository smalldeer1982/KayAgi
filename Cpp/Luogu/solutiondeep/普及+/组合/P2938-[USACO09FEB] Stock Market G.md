# 题目信息

# [USACO09FEB] Stock Market G

## 题目描述

尽管奶牛天生谨慎，它们仍然在住房抵押信贷市场中大受打击，现在它们准备在股市上碰碰运气。贝西有内部消息，她知道 $S$ 只股票在今后 $D$ 天内的价格。

假设在一开始，她筹集了 $M$ 元钱，那么她该怎样操作才能赚到最多的钱呢？贝西在每天可以买卖多只股票，也可以多次买卖同一只股票，交易单位必须是整数，数量不限。举一个牛市的例子：

假设贝西有 $10$ 元本金，股票价格如下：

|  股票 | 今天的价格 | 明天的价格 | 后天的价格 |
| :-: | :---: | :---: | :---: |
| $A$ |   $10$  |   $15$  |   $15$  |
| $B$ |   $13$  |   $11$  |   $20$  |

最赚钱的做法是：今天买入 $A$ 股 $1$ 张，到明天把它卖掉并且买入 $B$ 股 $1$ 张，在后天卖掉 $B$ 股，这样贝西就有 $24$ 元了。

## 样例 #1

### 输入

```
2 3 10 
10 15 15 
13 11 20 
```

### 输出

```
24 
```

# AI分析结果

• 综合分析与结论：
    - 思路：所有题解都将问题转化为完全背包问题求解。核心思路是把股票买卖问题简化，认为当天不卖出股票等价于当天卖出再买进，从而将复杂的买卖决策简化为每天先卖掉所有股票，再考虑买入，使得问题聚焦于相邻两天的操作，即每天用手中资金买入股票，目标是让第二天初始资金最多，进而实现最终利益最大化。
    - 算法要点：以天数为阶段，每天进行一次完全背包计算。背包容量是当天拥有的钱，物品体积是当天股票价格，物品价值是第二天与当天股票价格的差值。通过不断更新每天结束后的资金，进行D - 1次这样的操作来得到最终结果。
    - 解决难点：关键在于理解并证明复杂的股票买卖决策可简化为相邻两天的操作，保证DP的无后效性。同时，要准确构建完全背包模型，确定好状态转移方程。

    - 综合来看，多数题解思路清晰，但部分题解代码可读性欠佳，部分题解优化不足。整体未出现思路独特或优化极为出色的题解，故所有题解均未达到4星。

• 通用建议与扩展思路：
    - 建议在解题时，深入理解问题本质，像本题通过合理假设简化复杂决策，构建熟悉的算法模型。代码实现时注重变量命名规范、添加必要注释以提高可读性。对于背包问题，要熟练掌握01背包、完全背包、多重背包等基础模型及其变形。
    - 类似算法套路：对于涉及资源分配、价值最大化且资源可重复使用的问题，常可考虑转化为完全背包问题。例如一些资源收集类问题，每种资源可无限获取，通过不同资源组合获取最大价值。
    - 洛谷相似题目推荐：
        - P1048 [NOIP2005 普及组] 采药，基础的完全背包问题。
        - P1616 疯狂的采药，完全背包问题的变形，加大数据规模考查对算法的优化。
        - P2679 子串分值和，看似与背包无关，但通过合理转化可利用类似背包的思想解决。

• 个人心得摘录与总结：
    - 作者ql12345提到在处理资金更新时，最初代码 `m=f[m];` 无法通过样例，发现是第二天可能用不完所有钱的问题。修改为 `int ans=m;while(f[ans - 1]==f[m])--ans;m=f[ans]+m - ans;` 得到84分，又考虑到 `ans` 递减可能出现的问题，最终改为 `int ans=m;for(re int j = 1;j <= m;++j)ans = max(ans,f[j]+m - j);m = ans;` 才AC。总结为在处理背包问题中资金或容量更新时，要全面考虑各种情况，不能简单处理，需细致分析边界条件和可能出现的特殊情况。 

---
处理用时：19.39秒
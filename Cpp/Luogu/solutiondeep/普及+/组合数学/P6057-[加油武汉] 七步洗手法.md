# 题目信息

# [加油武汉] 七步洗手法

## 题目背景

现在正处于疫情防控的关键时期，大家要经常洗手，防止接触感染。

[正确的洗手方法](https://dxy.com/column/4473)

## 题目描述

给定一张含有 $n$ 个点的无向完全图，其中 $m$ 条边是白边，其余是黑边。

现在需要你求出同色的三元环（或者说，三角形）的个数。

## 说明/提示

 - 对于 $20\%$ 的数据，满足 $n \leq 200$；
 - 对于 $50\%$ 的数据，满足 $n \leq 2000$；
 - 对于 $100\%$ 的数据，满足 $1 \leq n \leq 10^5,1 \leq m \leq 3\times 10^5$。

## 样例 #1

### 输入

```
5 3
1 5
2 5
3 5```

### 输出

```
4```

# AI分析结果

### 综合分析与结论
所有题解核心思路都是通过间接方法求同色三角形个数，即利用三角形总数减去异色三角形数目。主要区别在于求异色三角形数目的方式。
1. **未见堇开、Star_Wind、Fairicle、Skyjoy思路**：通过统计每个点连接不同颜色边构成的异色角数量来计算异色三角形数。每个点连接白边数为\(x\)，则黑边数为\(n - 1 - x\)，该点异色角数为\(x*(n - 1 - x)\)，所有点异色角数之和除以\(2\)即为异色三角形数。时间复杂度为\(\Theta(n)\)。
2. **_Freedom_思路**：先计算完全图三元环总数，通过减去几乎所有含白边的三元环（因白边少，近似认为含白边三元环为异色），再修正多减的部分（两条白边交于一点时多减的同色或异色三元环）。时间复杂度为\(O(n + m)\)。
3. **一叶知秋思路**：通过白边建图，分情况讨论不合法三元环（一条白边和两条白边情况），计算时会出现三元环个数一加一减相互抵消情况。时间复杂度较高，未充分利用数据特性优化。

从思路清晰度、代码可读性、优化程度综合评分：
 - **未见堇开**：思路清晰，直接利用补集转化思想，代码简洁明了，时间复杂度最优，五星。
 - **_Freedom_**：思路较清晰，分步骤阐述，但计算过程稍复杂，时间复杂度不是最优，四星。
 - **Star_Wind、Fairicle、Skyjoy**：思路与未见堇开类似，但代码注释、思路阐述不如未见堇开清晰，三星。
 - **一叶知秋**：思路复杂，代码实现不够简洁，时间复杂度未优化，二星。

### 所选题解
1. **未见堇开（五星）**
    - **关键亮点**：运用补集转化思想，直接通过统计异色角数量快速计算异色三角形数目，时间复杂度为\(\Theta(n)\)，代码简洁高效。
    - **核心代码**：
```cpp
#include<cstdio>
#define reg register
#define MAXN 100001
using namespace std;

typedef long long ll;

int deg[MAXN];
ll ans=0;
int n,m;

int main()
{
    scanf("%d %d",&n,&m);
    for(reg int i=1;i<=m;i++)
    {
        int u,v;
        scanf("%d %d",&u,&v);
        ++deg[u],++deg[v];
    }
    for(reg int i=1;i<=n;i++)
        ans+=(1ll*deg[i]*(n-1-deg[i]));
    printf("%lld",1ll*n*(n-1)*(n-2)/6-(ans>>1));
    return(0);
}
```
    - **核心思想**：先统计每个点度数（即白边连接数），通过遍历每个点计算其异色角数（\(deg[i]*(n - 1 - deg[i])\)），累加所有点异色角数，最后用完全图三角形总数（\(\binom{n}{3}\)）减去异色三角形数（异色角数和除以\(2\)）得到同色三角形数。

2. **_Freedom_（四星）**
    - **关键亮点**：分步骤清晰阐述计算过程，先求完全图三元环总数，再通过减去含白边三元环并修正多减部分得到同色三元环数。
    - **核心代码**：
```cpp
long long a[100010];//a[i]记录有多少条白边连在节点i上 
	
for(i=1; i<=m; i++) {
	scanf("%d%d",&u,&v);
	ans+=a[u]+a[v];//a[u]+a[v]即为当前与这条交于一点的白边数 
	a[u]++;//u,v节点都多连了一条白边 
	a[v]++;
}
```
    - **核心思想**：遍历每条白边，加入白边时统计该白边与之前白边交于一点的次数（通过数组\(a\)记录每个点连接白边数，累加\(a[u] + a[v]\)），用于修正之前多减的三元环数。

### 最优关键思路或技巧
补集转化思想，将较难直接求解的同色三角形个数问题转化为易求解的三角形总数与异色三角形数目的差。通过统计每个点连接不同颜色边构成的异色角数量来计算异色三角形数，这种方法简洁高效，大大降低时间复杂度。

### 可拓展思路
此类题目属于图论中计数问题，常见套路是利用补集转化思想，将难以直接求解的问题转化为容易计算的量的差。类似题目常涉及不同类型子图（如四边形等）计数，可类比此方法，通过计算总子图数减去不符合条件子图数求解。

### 相似知识点洛谷题目
1. **P1330 封锁阳光大学**：图论中关于连通块相关问题，可通过类似补集转化思想，分析不同情况来求解。
2. **P1525 关押罪犯**：运用并查集和补集思想，判断是否能将罪犯合理分配关押。
3. **P2756 飞行员配对方案问题**：涉及二分图匹配，可通过转化思想将实际问题转化为图论匹配问题求解。

### 个人心得摘录与总结
 - **一叶知秋**：“今天月赛一点开就是这种毒瘤题，真的不想活了啊啊啊啊啊”，表达了对题目的难度感受，做题时先处理三元环导致思路复杂，可看出做题应先整体分析思路，选择最优方法。
 - **Skyjoy**：“你高兴地将代码交上去，什么只有21分？全\(WA\)了？>十年\(OI\)一场空，不开\(long\ long\)见祖宗。”强调了数据类型选择的重要性，在处理较大数据时，要注意数据范围，避免因数据类型不当导致错误。 

---
处理用时：44.30秒
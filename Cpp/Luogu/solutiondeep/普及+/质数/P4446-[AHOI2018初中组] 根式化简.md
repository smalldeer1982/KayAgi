# 题目信息

# [AHOI2018初中组] 根式化简

## 题目描述

小可可在学习“立方根”的知识时碰到这样的问题：

将下面根式化简为最简根式：

(1) $\sqrt[3]{125}$ (2) $\sqrt[3]{81}$ (3) $\sqrt[3]{52}$

这个问题对于小可可来说太简单了，他很快就算出了答案：

(1) $5$ (2) 3$\sqrt[3]{3}$ (3) $\sqrt[3]{52}$

小可可知道任意形如$\sqrt[3]{x}$ 的根式，化简后一定可以被写成形如$a\sqrt[3]{b}$的最简根式。他觉得这很有趣，就仿照出了不少题，但没一会儿就被密密麻麻的根式绕晕了，于是他向你求助：

给定 $n$ 个形如 $\sqrt[3]{x}$ 的根式，请你将它们化简为形如$a\sqrt[3]{b}$的最简形式，为了方便，你只需要输出其中的$a$ 即可。

如果你没有学过这部分数学知识，你可以认为题意是：给你$n$ 个正整数$x$，对于每一个$x$，你需要求出整数$a,b$ 使得$a^3 \times b = x$，输出最大的整数$a$ 即可。

## 说明/提示

对于100%的数据满足：$1≤n≤10000$，$1≤x≤10^{18}$。

本题共10 个测试点，编号为1~10，每个测试点额外保证如下：

测试点编号n 的范围x 的范围  
1~2 $n≤10, x≤10^6$  
3~4 $n≤10, x≤10^9$  
5~6 $n≤100, x≤10^{18}$ 且$x$ 为完全立方数  
7~8 $n≤500, x≤10^{18}$  
9~10 $n≤10000, x≤10^{18}$

## 样例 #1

### 输入

```
3
125 81 52```

### 输出

```
5
3
1```

# AI分析结果

### 综合分析与结论

本题的核心是将一个数 \( x \) 化简为 \( a \sqrt[3]{b} \) 的形式，并输出最大的 \( a \)。题解中主要采用了数论和二分查找的结合，通过预处理素数和立方数表，优化了算法的效率。大多数题解都遵循了以下思路：

1. **预处理素数**：筛出 \( \sqrt[4]{x} \) 以内的素数，用于后续的质因数分解。
2. **质因数分解**：对每个 \( x \) 进行质因数分解，并统计每个质因数的出现次数，每出现三次就将该质因数乘入 \( a \)。
3. **二分查找**：在质因数分解后，剩余的 \( x \) 可能是一个完全立方数，通过二分查找确定其立方根，并乘入 \( a \)。

### 所选高星题解

#### 1. 作者：hongzy (5星)
- **关键亮点**：思路清晰，代码结构合理，预处理素数和立方数表，使用二分查找优化了时间复杂度。
- **个人心得**：通过预处理和二分查找，大大减少了计算量，适合处理大规模数据。

```cpp
void prime() {        //埃氏筛法 
	int sq = sqrt(n) + 0.5;
	for(int i=2; i<=n; i++) p[i] = true;
	p[1] = false;
	for(int i=2; i<=sq; i++) if(p[i])
		for(int j=i*i; j<=n; j+=i) p[j] = false;
	for(int i=1; i<=n; i++) if(p[i]) plist[++ cnt] = i;
}
```

#### 2. 作者：KesdiaelKen (4.5星)
- **关键亮点**：详细推导了算法的思路，结合枚举和二分查找，优化了质因数分解的过程。
- **个人心得**：通过枚举和二分查找的结合，减少了不必要的计算，提高了算法的效率。

```cpp
long long scf(long long a)//开三次方
{
    long long zuo=sqrt(sqrt(a)),you=min((long long)1000000,(long long)sqrt(a)),mid;
    while(zuo!=you)
    {
        mid=(zuo+you+1)/2;
        if(mid*mid*mid<=a)zuo=mid;
        else you=mid-1;
    }
    return zuo;
}
```

#### 3. 作者：critnos (4星)
- **关键亮点**：通过剪枝优化了质因数分解的过程，减少了不必要的计算。
- **个人心得**：通过提前判断剩余数是否为完全立方数，减少了二分查找的次数，提高了算法的效率。

```cpp
ans=1;
s=ceil(pow(x,1/3.0));
if(s*s*s==x) 
{
    printf("%lld\n",ans*s);	
    goto bre;
}
```

### 最优关键思路与技巧

1. **预处理素数**：通过筛法预处理素数，减少质因数分解的时间复杂度。
2. **质因数分解**：对每个 \( x \) 进行质因数分解，并统计质因数的出现次数，每出现三次就将该质因数乘入 \( a \)。
3. **二分查找**：在质因数分解后，剩余的 \( x \) 可能是一个完全立方数，通过二分查找确定其立方根，并乘入 \( a \)。

### 可拓展之处

- **类似算法套路**：在处理大数分解和优化质因数分解时，可以结合预处理和二分查找，减少计算量。
- **同类型题**：类似的问题包括大数分解、质因数分解、完全平方数判断等。

### 推荐题目

1. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)
2. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)
3. [P1226 【模板】快速幂](https://www.luogu.com.cn/problem/P1226)

### 个人心得总结

- **调试经历**：在实现二分查找时，注意边界条件的处理，避免死循环或错误结果。
- **踩坑教训**：在处理大数时，注意数据类型的范围，避免溢出。
- **顿悟感想**：通过预处理和二分查找的结合，可以大大优化算法的效率，适合处理大规模数据。

---
处理用时：32.09秒
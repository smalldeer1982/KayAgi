# 题目信息

# [蓝桥杯 2022 省 A] 数的拆分

## 题目描述

给定 $T$ 个正整数 $a_{i}$，分别问每个 $a_{i}$ 能否表示为 $x_{1}^{y_{1}} \cdot x_{2}^{y_{2}}$ 的形式，其中 $x_{1}, x_{2}$ 为正整数，$y_{1}, y_{2}$ 为大于等于 $2$ 的正整数。

## 说明/提示

**【样例说明】**

第 $4,5,7$ 个数分别可以表示为:

$$
\begin{aligned}
&a_{4}=2^{2} \times 1^{2} ; \\
&a_{5}=2^{3} \times 1^{2} ; \\
&a_{7}=2^{3} \times 3^{2} 。
\end{aligned}
$$

**【评测用例规模与约定】**

对于 $10 \%$ 的评测用例，$1 \leq T \leq 200, a_{i} \leq 10^{9}$;

对于 $30 \%$ 的评测用例，$1 \leq T \leq 300, a_{i} \leq 10^{18}$;

对于 $60 \%$ 的评测用例，$1 \leq T \leq 10000, a_{i} \leq 10^{18}$;

对于所有评测用例，$1 \leq T \leq 100000,1 \leq a_{i} \leq 10^{18}$ 。 

蓝桥杯 2022 省赛 A 组 I 题。

## 样例 #1

### 输入

```
7
2
6
12
4
8
24
72```

### 输出

```
no
no
no
yes
yes
no
yes```

# AI分析结果

### 综合分析与结论

本题的核心是将一个数拆分为两个数的幂次乘积，即 $a = x_1^{y_1} \cdot x_2^{y_2}$，其中 $y_1, y_2 \geq 2$。通过质因数分解和幂次分析，可以转化为判断 $a$ 是否能表示为 $x^2 \cdot y^3$ 的形式。大多数题解都基于这一思路，通过筛质数、分解质因数、判断平方数和立方数等方法来解决。优化点主要集中在减少质数筛的范围（如筛到 $4000$ 或 $\sqrt[5]{a}$），以及通过数学结论（如 $2$ 和 $3$ 的幂次组合）简化问题。

### 所选高星题解

#### 1. **作者：Lord_Sky2048 (5星)**
- **关键亮点**：
  - 通过质因数分解，将问题转化为判断 $a$ 是否能表示为 $t_1^2 \cdot t_2^3$。
  - 优化了质数筛的范围，仅筛到 $4000$，并通过数学结论简化了幂次判断。
  - 代码清晰，逻辑严谨，优化程度高。
- **核心代码**：
  ```cpp
  bool check(ll x) {
      ll y = pow(x, 0.5);
      if(y * y == x || (y + 1) * (y + 1) == x) return true;
      y = pow(x, 1.0 / 3);
      if(y * y * y == x || (y + 1) * (y + 1) * (y + 1) == x || (y + 2) * (y + 2) * (y + 2) == x) return true;
      return false;
  }
  ```
  **实现思想**：通过 `pow` 函数计算平方根和立方根，判断是否为平方数或立方数。

#### 2. **作者：BqtMtsZDnlpsT (4星)**
- **关键亮点**：
  - 通过引理证明 $a$ 可以表示为 $u^2 \cdot v^3$，进一步优化了质数筛的范围。
  - 提出了枚举 $\sqrt[5]{n}$ 以内的质数，并通过数学结论简化了幂次判断。
  - 代码简洁，思路清晰，优化程度较高。
- **核心代码**：
  ```cpp
  ll n=read<ll>();
  For(i,1,t){
      ll u=1ll*p[i]*p[i];
      if(!(n%u))
          while(!(n%p[i]))n/=p[i];
      else if(n%u&&!(n%p[i]))return puts("no");
      if(n==1)return puts("yes");
  }
  ll x=cbrtl(n);if(x*x*x==n)return puts("yes");
  x=sqrtl(n);if(x*x==n)return puts("yes");
  return puts("no");
  ```
  **实现思想**：通过枚举质数，判断是否能整除，并最终判断剩余部分是否为平方数或立方数。

#### 3. **作者：ylch (4星)**
- **关键亮点**：
  - 通过质因数分解和幂次分析，提出了 $a$ 可以表示为 $x^2 \cdot y^3$ 的结论。
  - 优化了质数筛的范围，并通过数学结论简化了幂次判断。
  - 代码清晰，逻辑严谨，优化程度较高。
- **核心代码**：
  ```cpp
  bool check(ll x) {
      ll sq = sqrtl(x);
      if(sq*sq==x || (sq+1)*(sq+1)==x || (sq-1)*(sq-1)==x) return true;
      ll cb = cbrtl(x);
      if(cb*cb*cb==x || (cb+1)*(cb+1)*(cb+1)==x || (cb-1)*(cb-1)*(cb-1)==x) return true;
      return false;
  }
  ```
  **实现思想**：通过 `sqrtl` 和 `cbrtl` 函数计算平方根和立方根，判断是否为平方数或立方数。

### 最优关键思路与技巧

1. **质因数分解**：将问题转化为判断质因数的幂次是否满足 $2k_1 + 3k_2$ 的形式。
2. **质数筛优化**：通过数学结论，仅筛到 $\sqrt[5]{a}$ 或 $4000$，减少计算量。
3. **平方数与立方数判断**：通过 `pow`、`sqrtl`、`cbrtl` 等函数，快速判断剩余部分是否为平方数或立方数。

### 可拓展之处

- **类似问题**：类似的问题可以通过质因数分解和幂次分析来解决，如判断一个数是否能表示为多个数的幂次乘积。
- **算法套路**：质因数分解、质数筛、幂次分析是解决此类问题的常用套路。

### 推荐题目

1. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029)
2. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)
3. [P1069 细胞分裂](https://www.luogu.com.cn/problem/P1069)

### 个人心得摘录

- **调试经历**：多位作者提到在判断平方数和立方数时，系统自带的 `sqrt` 和 `cbrt` 函数存在精度误差，需通过加一或减一来修复。
- **踩坑教训**：在质因数分解时，需注意质数筛的范围，过大或过小都会影响效率。
- **顿悟感想**：通过数学结论（如 $2$ 和 $3$ 的幂次组合）可以大大简化问题，减少计算量。

---
处理用时：45.24秒
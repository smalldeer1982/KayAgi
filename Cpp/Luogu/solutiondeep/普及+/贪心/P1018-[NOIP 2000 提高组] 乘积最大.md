# 题目信息

# [NOIP 2000 提高组] 乘积最大

## 题目背景

NOIP2000 提高组 T2

## 题目描述

今年是国际数学联盟确定的“2000——世界数学年”，又恰逢我国著名数学家华罗庚先生诞辰 90 周年。在华罗庚先生的家乡江苏金坛，组织了一场别开生面的数学智力竞赛的活动，你的一个好朋友 XZ 也有幸得以参加。活动中，主持人给所有参加活动的选手出了这样一道题目：


设有一个长度为 $N$ 的数字串，要求选手使用 $K$ 个乘号将它分成 $K+1$ 个部分，找出一种分法，使得这 $K+1$ 个部分的乘积能够为最大。


同时，为了帮助选手能够正确理解题意，主持人还举了如下的一个例子：


有一个数字串：$312$，当 $N=3,K=1$ 时会有以下两种分法：

1. $3  \times  12=36$ 
2. $31  \times   2=62$  

   
这时，符合题目要求的结果是：$31  \times  2 = 62$。


现在，请你帮助你的好朋友 XZ 设计一个程序，求得正确的答案。


## 说明/提示

**数据范围与约定**

对于 $60\%$ 的测试数据满足 $6≤N≤20$。  
对于所有测试数据，$6≤N≤40,1≤K≤6$。


## 样例 #1

### 输入

```
4 2
1231
```

### 输出

```
62```

# AI分析结果



### 综合分析与结论
本题核心在于动态规划与高精度处理的结合。大部分题解采用DP思路，定义状态为前i位使用j个乘号的最大乘积，通过枚举分割点进行转移。高精度处理是关键，需实现大数乘法与比较。DFS方法因数据规模难以通过，仅适用于部分测试点。最优解法为结构体封装高精度的动态规划实现。

---

### 高评分题解推荐

#### 题解1：liar_white（5星）
**关键亮点**  
- 结构体封装高精度数，代码逻辑清晰  
- 状态转移完整，处理乘号位置的枚举合理  
- 高精度乘法与比较函数实现规范  
**个人心得**  
作者提到直接比较`Max(lastans,ans[i])`出错，改用中间变量后通过，反映边界处理的细节重要性。

**核心代码片段**  
```cpp
struct node{
    int v; bool exi;
    int c[50]; //低位在前
};
node cut[50][10], ans[50];

node mul(node e1, node e2) {
    node emul;
    //...乘法进位处理
}
//状态转移：枚举分割点fr
for(int fr=j-1; fr<i; fr++) {
    cut[i][j] = Max(cut[i][j], mul(cut[fr][j-1], culc(fr+1,i)));
}
```

#### 题解2：FastIO_DP（5星）
**关键亮点**  
- 高精度结构体封装完善，运算符重载清晰  
- DP状态定义简洁，转移方程直观  
- 代码结构模块化，便于维护与扩展  

**核心代码片段**  
```cpp
struct BI {
    int d[100], len;
    BI operator*(const BI& o) const {
        BI res;
        //...逐位相乘并处理进位
        return res;
    }
    //比较运算符重载
};

BI dp[50][10]; //dp[i][j]表示前i位用j个乘号的最大值
for(int j=1; j<=K; j++) {
    for(int i=j; i<N; i++) {
        for(int k=j-1; k<i; k++) {
            dp[i][j] = max(dp[i][j], dp[k][j-1] * num(k+1,i));
        }
    }
}
```

#### 题解3：kuaiCreator（4星）
**关键亮点**  
- 划分型DP思路明确，状态转移推导详细  
- 提供非高精度代码帮助理解基础思路  
- 复杂度分析与步骤说明完整  

**核心思路**  
```cpp
for(int k=j; k<i; k++) {
    dp[i][j] = max(dp[i][j], dp[k][j-1] * num(k+1,i));
}
```

---

### 关键思路与技巧总结
1. **状态设计**：前i位使用j个乘号的最大乘积，枚举最后一个乘号位置分割子问题。
2. **高精度实现**：结构体存储数字（低位在前），重载乘法与比较运算符。
3. **剪枝优化**：DFS中剩余位数必须足够放置剩余乘号。
4. **调试技巧**：中间变量解决边界问题，逐位打印高精度数验证。

---

### 拓展与相似题目推荐
1. **同类型高精度+DP**  
   - [P1005 矩阵取数游戏](https://www.luogu.com.cn/problem/P1005)  
   - [P1096 Hanoi双塔问题](https://www.luogu.com.cn/problem/P1096)  

2. **划分型动态规划**  
   - [P1040 加分二叉树](https://www.luogu.com.cn/problem/P1040)  
   - [P1436 棋盘分割](https://www.luogu.com.cn/problem/P1436)  

3. **高精度综合应用**  
   - [P1255 数楼梯](https://www.luogu.com.cn/problem/P1255)  
   - [P1604 B进制星球](https://www.luogu.com.cn/problem/P1604)

---
处理用时：73.45秒
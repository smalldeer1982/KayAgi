# 题目信息

# 奇怪的分组

## 题目背景

终于解出了 dm 同学的难题，dm 同学同意帮 v 神联络。可 dm 同学有个习惯，就是联络同学的时候喜欢分组联络，而且分组的方式也很特别，要求第 $i$ 组的的人数必须大于他指定的个数 $C_i$。在 dm 同学联络的时候，v 神在想，按照 dm 同学的规则一共可以有多少种方案呢？他想啊想，终于……没想出来。于是他又想到了聪明的你，你能帮 v 神算出按照 dm 同学的规则有多少种分组方案吗？


## 题目描述

v 神的班级共有 $N$ 个人，dm 同学想把同学分成 $M$ 组联络，要求第 $i$ 组的人数必须大于给定的正整数 $C_i$，求有多少不同的方案（两个是相同的方案当且仅当对于任意的一队 $i$，两个方案的第 $i$组同学数量相等）。由于结果很大，所以你只需要输出模 $10^9+7$ 的值。


## 说明/提示

### 样例解释

方案有三种，每组的个数分别是 $(3,3,4)$，$(2,4,4)$，$(2,3,5)$。

### 数据范围约定

对于 $30\%$ 的数据，$N,M\le 10$。

对于 $60\%$ 的数据，$N,M\le 1000$。

对于 $100\%$ 的数据，$1\le N ,M\le 10^6$，$1\le C_i\le 1000$。

数据保证至少有一个方案。


## 样例 #1

### 输入

```
10 3

1

2

3

```

### 输出

```
3```

# AI分析结果



### 题解综合分析结论
各题解核心思路均为组合数学中的**隔板法**，通过预处理阶乘+逆元或Lucas定理求解组合数。关键要点在于：
1. 问题转化为求$C(n'-1, m-1)$，其中$n' = N - \sum C_i$
2. 模数$1e9+7$为质数，可用费马小定理求逆元
3. 大数组合数计算需预处理阶乘和逆元阶乘

---

### 高星题解推荐

#### 1. hongzy（5星）
**关键亮点**：
- 提供两种实现方式（预处理阶乘与Lucas定理）
- 代码规范，包含快速读入与模块化设计
- 预处理阶乘方法时间复杂度$O(MAXN)$，适合高频查询

**核心代码**：
```cpp
// 预处理阶乘 + 费马小定理逆元
int C(int n, int k) {
    LL fm = (1LL * fc[n-k] * fc[k]) % MOD;
    return 1LL * fc[n] * Qpow(fm, MOD-2) % MOD;
}
```

#### 2. KAMIYA_KINA（4星）
**关键亮点**：
- 详细推导球盒问题的数学原理
- 提供线性预处理逆元的优化技巧
- 代码包含高效的阶乘与逆元预处理

**核心实现**：
```cpp
inline void init(const int lim) {
    fc[0] = 1;
    for(int i = 1; i <= lim; i++) fc[i] = fc[i - 1] * i % mod;
    fv[lim] = ksm(fc[lim], mod - 2);
    for(int i = lim; i >= 1; i--) fv[i - 1] = fv[i] * i % mod;
}
inline int C(int n, int m) {
    return fc[n] * fv[m] % mod * fv[n - m] % mod;
}
```

#### 3. piggy123（4星）
**关键亮点**：
- 最简洁的代码实现（仅35行）
- 动态计算阶乘与逆元，适合小数据范围
- 包含特判$m=1$的边界情况

**核心代码**：
```cpp
int main(){
    ll n = rd(), m = rd();
    for(ll i=1; i<=m; i++) n -= rd();
    cout << C(n-1, m-1);
}
```

---

### 关键思路总结
1. **隔板法转化**：将约束条件转化为非空分配问题，公式为$C(n'-1, m-1)$
2. **逆元优化**：利用费马小定理将除法转为乘法（$a/b \equiv a·b^{mod-2} \pmod{mod}$）
3. **预处理技巧**：阶乘与逆元阶乘的线性预处理（$O(n)$时间，$O(1)$查询）

---

### 相似题目推荐
1. [P3807 【模板】卢卡斯定理](https://www.luogu.com.cn/problem/P3807)  
   - 练习Lucas定理的模板题
2. [P3197 [HNOI2008] 越狱](https://www.luogu.com.cn/problem/P3197)  
   - 组合数学+快速幂的经典问题
3. [P1313 计算系数](https://www.luogu.com.cn/problem/P1313)  
   - 组合数在多项式展开中的应用

---

### 题解中的个人心得摘录
1. **预处理范围**（来自rickyxrc题解）：
   > 预处理数组大小需覆盖最大可能的$n$值，否则会导致RE
2. **逆元计算**（来自Sunshine離题解）：
   > 逆元预处理时从后往前递推，利用$inv[i] = inv[i+1] * (i+1) \mod p$
3. **边界特判**（来自piggy123题解）：
   > 当$m=1$时直接返回1，避免计算$C(-1, 0)$的异常情况

---
处理用时：67.48秒
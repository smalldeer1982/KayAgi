# 题目信息

# 挑战

## 题目描述

桃花岛其实也没什么好玩的，黄蓉经常偷偷跑到江湖上与洪七公等人玩。于是，黄药师就经常想一些游戏与女儿玩，为了是把黄蓉留在身边，江湖险恶啊！

这次黄药师又想了一种模拟游戏，游戏是这样的：她把整个桃花岛划分成一个坐标系。游戏开始前，黄蓉站在平面坐标系的一个点上，而她的闺房在坐标系的另一个点上，任何时候，她可以从当前所在点跨一步达到她周围的上、下、左、右四个点，黄药师不断地说四个字“东（E）”、“南（S）”、“西（W）”、“北（N）”，则黄蓉就想象着不断地从一个点走到另一个点，直至到自己的闺房为止。

![](https://cdn.luogu.com.cn/upload/image_hosting/gso383g9.png)

比如，黄蓉开始时站在 $\rm A$ 点，她的家在 $\rm B$ 点，黄药师连续说了一串：$\verb!NNNENNWWWSSW!$，则走了如下一个线路。然后，黄药师会问黄蓉：中间有没有走“弯路”了？即有没有捷径好走？比如，下图中就有多条捷径，可以从 $\rm C$ 走 $\verb!NN!$ 而到 $\rm E$，或走 $\verb!WW!$ 直接到 $\rm D$。

注意：捷径必须是直线。

黄药师听说你是一个程序设计高手，就想请你编个程序帮他测测这个游戏的难度，以便改进游戏规则后再让黄蓉挑战。

你的任务是：找一条最短的捷径。


## 样例 #1

### 输入

```
12

NNNENNWWWSSW

```

### 输出

```
2 3 11 W```

# AI分析结果



### 综合分析与结论
本题核心在于寻找两点间最短的直线捷径，需满足：①坐标同横或同纵；②两点非路径相邻；③多解时选起点最小、终点最大者。所有题解均采用排序后相邻点比较的思路，但实现细节和优化程度不同。

---

### 精选题解分析

#### 1. Ice_Kissღ（★★★★☆）
**关键亮点**：
- 结构体存储点坐标及编号，代码逻辑清晰。
- 分两次排序处理x/y轴同坐标情况，模块化处理。
- 方向判断通过坐标差直接推导，简洁高效。
**个人心得**：
> "特别提醒：若两点编号差为1则必须舍弃...因为它们之间已经有路"  
> 提醒注意题目隐含条件，避免误判。

**核心代码**：
```cpp
void jx() { //处理x轴相同点
    for(int i=1;i<=n-1;i++) {
        if(rong[i].x==rong[i+1].x) {
            //...计算距离并判断方向
            if(a+1==b) continue; //排除相邻点
            //更新答案逻辑
        }
    }
}
```

#### 2. hegm（★★★★☆）
**关键亮点**：
- 使用双排序函数分离x/y轴处理，减少冗余代码。
- 明确方向判断规则（如`if(k[s].y<k[t].y) f2='N'`）。
- 强调数据读取时使用string避免换行问题。
**调试经验**：
> "读入方向最好使用string...用char可能会有错误"  
> 提醒输入处理细节，避免低级错误。

**核心代码**：
```cpp
bool cmpx(node a,node b) { 
    return (a.x<b.x)||(a.x==b.x&&a.y<b.y);
}
void fx() { //处理x轴
    sort(k,k+n+1,cmpx);
    for(...) if(两点x相同) {
        //...判断编号差并计算距离
    }
}
```

#### 3. GoodCoder666（★★★★☆）
**关键亮点**：
- 使用lambda表达式简化比较逻辑。
- 通过函数式编程风格减少重复代码。
- 采用更紧凑的结构体定义和更新逻辑。
**优化技巧**：
- 通过`setmax`函数维护最大编号，避免多次查找。

**核心代码**：
```cpp
auto update = [&](int dis, int from, int to, char dir) {
    if(dis更优则更新答案);
};
for(...) {
    get_ans(X[x], y, 'W', 'E'); //封装方向处理
}
```

---

### 关键思路总结
1. **排序聚合**：对x/y坐标分别排序，使同轴点相邻。
2. **相邻点过滤**：排除编号差为1的点对。
3. **方向推导**：通过坐标差的正负直接确定方向字符。
4. **多条件比较**：先比距离，再比起点编号，最后比终点编号。

---

### 拓展与相似题目
1. **P1141 01迷宫**（BFS+坐标处理）
2. **P1162 填涂颜色**（矩阵坐标遍历）
3. **P1056 排座椅**（同轴点选择最优分隔线）

---

### 个人心得摘录
- **输入处理**："读入方向用string避免char错误"（hegm）  
  → 输入格式易错点需特别注意。
- **坐标基准**："初始坐标设为250005防止负数"（Ice_Kissღ）  
  → 坐标平移解决负值问题。
- **STL技巧**："map存最大编号，set维护有序点"（UnyieldingTrilobite）  
  → 高阶数据结构可简化逻辑但增加复杂度。

---
处理用时：54.00秒
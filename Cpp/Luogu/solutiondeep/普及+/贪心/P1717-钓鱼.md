# 题目信息

# 钓鱼

## 题目描述

话说发源于小朋友精心设计的游戏被电脑组的童鞋们藐杀之后非常不爽，为了表示安慰和鼓励，VIP999 决定请他吃一次“年年大丰收”，为了表示诚意，他还决定亲自去钓鱼。

但是，因为还要准备 NOIP2013, z 老师只给了他 $H$ 个小时的空余时间，假设有 $n$ 个鱼塘都在一条水平路边，从左边到右编号为 $1,2,3\dots n$ 。

VIP 是个很讲究效率的孩子，他希望用这些时间钓到尽量多的鱼。他从湖1出发，向右走，有选择的在一些湖边停留一定的时间钓鱼，最后在某一个湖边结束钓鱼。他测出从第 $i$ 个湖到 $i+1$ 个湖需要走 $5 \times t_i$ 分钟的路，还测出在第 $i$ 个湖边停留，第一个 $5$ 分钟可以钓到鱼 $f_i$，以后再每钓 $5$ 分钟鱼，鱼量减少 $d_i$。为了简化问题，他假定没有其他人钓鱼，也不会有其他因素影响他钓到期望数量的鱼。请编程求出能钓最多鱼的数量。


## 说明/提示

数据范围：$1\le H \le 16,2\le n \le 25,1\le f_i\le 200,0\le d_i\le 20,1\le t_i\le 20$。

## 样例 #1

### 输入

```
2
1
10 1
2 5
2
```

### 输出

```
31```

# AI分析结果



### 综合分析与结论
本题核心在于如何高效分配钓鱼时间以获取最大鱼量。各题解主要采用两种思路：  
1. **贪心+优先队列**：枚举终点后，用优先队列维护当前可钓最大鱼量的鱼塘，时间复杂度优化至O(n²logn)  
2. **动态规划**：设计状态表示前i个鱼塘使用j时间的最大收益，但实现复杂度较高  

最优解为贪心思路，其关键点在于通过枚举终点将问题转化为多个局部最优子问题，结合优先队列快速获取当前最优决策。

---

### 精选题解推荐

#### 1. 作者：Cripple_Abyss ⭐⭐⭐⭐⭐  
**关键亮点**：  
- 清晰使用优先队列优化贪心过程  
- 代码结构简洁，STL应用得当  
- 通过枚举终点消除移动时间干扰  
**核心代码**：  
```cpp
for(int i=1;i<=n;i++){ // 枚举终点
    while(!q.empty()) q.pop(); 
    int t1=h - 移动时间;
    for(int j=1;j<=i;j++) q.push(a[j]); // 加载当前可钓的鱼塘
    while(t1>0 && q.top().s>0){ // 贪心钓鱼
        node v=q.top();
        ans+=v.s;
        q.pop();
        v.s-=v.d;
        q.push(v);
        t1-=5;
    }
}
```

#### 2. 作者：Sky_Art ⭐⭐⭐⭐  
**关键亮点**：  
- 朴素贪心实现易懂，适合算法入门  
- 线性扫描找最大值直观展示核心逻辑  
**核心逻辑**：  
```c
void find(int j){ // 暴力找当前最大鱼塘
    int c=-1;
    for(int i=j;i>=1;i--)
        if(c<b[i]) c=b[i],bj=i;
}
```

#### 3. 作者：LB_tq ⭐⭐⭐⭐  
**关键亮点**：  
- 创新性使用线段树维护最大值  
- 展示不同数据结构在贪心中的应用  
**代码亮点**：  
```cpp
void update(int p,int x,int y){ // 线段树更新节点
    if(l==r){ t[p].d=y; return; }
    if(x<=mid) update(ls,x,y);
    else update(rs,x,y);
    t[p].d = max(t[ls].d, t[rs].d);
}
```

---

### 关键技巧总结
1. **枚举终点策略**：通过固定终点将移动时间转化为固定消耗，简化问题为纯时间分配问题  
2. **实时维护最大值**：优先队列/堆在动态变化环境中快速获取当前最优解  
3. **时间压缩技巧**：将小时转换为5分钟单位简化时间计算  

---

### 拓展训练推荐
1. **P1090 合并果子**（贪心+优先队列）  
2. **P4053 建筑抢修**（贪心策略与时间分配）  
3. **P5020 货币系统**（动态规划与贪心结合）  

---

### 题解心得知乎
- **Social_Zhao**调试经验：  
> "被数据范围欺骗，原以为n=25用线段树会超时，结果暴力反而更慢。**小规模问题不应盲目追求理论复杂度**"  
- **Sky_Art**踩坑提醒：  
> "忘记将小时转换为分钟时，直接导致WA。**单位转换是算法题致命细节**"  
- **Cripple_Abyss**优化心得：  
> "发现清空优先队列比新建队列更耗时，改用局部变量后效率提升20%"

---
处理用时：102.65秒
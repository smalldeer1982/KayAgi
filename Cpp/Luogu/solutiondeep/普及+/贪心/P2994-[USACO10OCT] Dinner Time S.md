# 题目信息

# [USACO10OCT] Dinner Time S

## 题目描述

农场主约翰的 $N$（$1 \le N \le 10 ^ 3$）头奶牛被编号为 $1 \sim N$，它们正在保加利亚参加 IOI。奶牛们喜欢保加利亚的太阳并享受着它们的假日，一切看起来都没问题。

变化发生在晚餐时间前后。这家餐馆很小，只有 $M$（$1 \le M \le N$）个座位，编号为 $1 \sim M$。每头牛从一个位置 $CX_i$，$CY_i$ 进入餐馆（$-10 ^ 6 \le CX_i \le 10 ^ 6,-10 ^ 6 \le CY_i \le 10 ^ 6$）；座位可以在 $SX_j$，$SY_j$ 找到（$-10 ^ 6 \le SX_j \le10 ^ 6,-10 ^ 6\le SY_j\le 10 ^ 6$）。



奶牛有一种非常有效的（尽管很原始）方法把自己分配到座位上。一旦某只奶牛确定她会先到某个座位上，她就会尽快赶到那里（所有的奶牛都跑得一样快）。



农场主约翰的奶牛和所有获奖的奶牛一样，跳过座位、桌子或其他奶牛都没有问题，因此它们可以直线奔跑。当多头牛可以同时到达一个座位时，最老的牛（在输入数据中出现得更早的牛）获得座位。当一头牛可以第一个到达多个座位时，她也会选择在输入中最早出现的座位。



一些奶牛将不能吃晚饭，这些吃不到饭的饥饿的奶牛正集体计划偷农场主约翰自己的食物。农场主约翰想要一份他应该提防的奶牛名单。（如果没有饥饿的奶牛，则输出 $0$）。你能帮他吗？



注：在计算中可能会有超过 $32$ 位整数范围但在 $64$ 位整数范围内的数。

------------

## 样例 #1

### 输入

```
2 1 
0 1 
1 0 
1 10 
```

### 输出

```
2 
```

# AI分析结果



### 综合分析与结论
本题核心是模拟贪心策略：按座位输入顺序，每次为当前座位选择未被分配的、距离最近的牛（同距离时选输入更早的牛）。所有题解均采用外层遍历座位、内层找最近牛的暴力枚举法。关键优化在于使用平方距离避免浮点运算，确保数值正确性。

---

### 精选题解列表

#### 1. 作者：yinhy09（⭐⭐⭐⭐⭐）
**关键亮点**：
- 正确使用平方距离避免浮点运算
- 清晰的代码结构及变量命名
- 处理了输入顺序的优先级问题
- 包含特判优化（n=m时直接输出）

**核心代码**：
```cpp
for(int j=1;j<=m;j++) { // 遍历座位
    long long mindis = 1e15;
    for(int i=1;i<=n;i++) { // 找当前座位的最优牛
        if (flag[i]) continue;
        long long dis = (a[i]-c)*(a[i]-c) + (b[i]-d)*(b[i]-d);
        if (dis < mindis) mindis = dis, pos = i;
    }
    flag[pos] = 1;
}
```

#### 2. 作者：hyc1026（⭐⭐⭐⭐）
**关键亮点**：
- 显式处理距离计算的溢出问题（1ll转换）
- 代码简洁且有明确注释
- 正确维护输入顺序优先级

**个人心得**：
> "不开 long long 见祖宗" —— 强调数据范围处理的重要性。

#### 3. 作者：nofind（⭐⭐⭐⭐）
**关键亮点**：
- 函数封装距离计算（增强可读性）
- 处理了浮点比较的潜在问题
- 输出逻辑完整（含 flag 标记）

**核心代码**：
```cpp
ll d(ll x1,ll y1,ll x2,ll y2) {
    return (x1-x2)*(x1-x2) + (y1-y2)*(y1-y2); // 实际应删除 sqrt
}
```

---

### 最优技巧总结
1. **平方距离比较**：用整数运算代替浮点运算，避免精度损失。
2. **输入顺序优先级**：通过遍历顺序隐式保证先出现的牛/座位优先。
3. **贪心策略**：每个座位独立处理，局部最优保证全局最优。

---

### 同类题目推荐
1. [P1257 平面上的最接近点对](https://www.luogu.com.cn/problem/P1257) - 分治优化最近点对问题
2. [P1588 丢失的牛](https://www.luogu.com.cn/problem/P1588) - 动态规划与距离计算
3. [P1495 曹冲养猪](https://www.luogu.com.cn/problem/P1495) - 贪心策略的数学问题

---

### 调试经验摘录
- **数据溢出**：多篇题解强调 `long long` 的使用，如 `(a[i]-c)*1ll*(a[i]-c)`。
- **特判优化**：yinhy09 指出当 `n == m` 时直接输出 0，避免冗余循环。
- **浮点陷阱**：部分题解误用 `sqrt` 后被评论指出需用平方比较。

---
处理用时：73.27秒
# 题目信息

# 负载平衡问题

## 题目描述

$G$ 公司有 $n$ 个沿铁路运输线环形排列的仓库，每个仓库存储的货物数量不等。如何用最少搬运量可以使 $n$ 个仓库的库存数量相同。搬运货物时，只能在相邻的仓库之间搬运。


## 说明/提示

$1 \leq n \leq 100$。


## 样例 #1

### 输入

```
5
17 9 14 16 4```

### 输出

```
11```

# AI分析结果



### 综合分析结论
本题核心在于通过调整相邻节点的货物量实现平衡，最优解法存在贪心与网络流两种方向。贪心法利用中位数性质达到O(n)复杂度，网络流通过建模转化为最小费用流问题。两种方法本质相通，贪心解法更高效，网络流解法更具拓展性。

---

### 精选题解与亮点

#### 1. 浅色调（★★★★★）
**关键亮点**：
- 创新性将环形问题转化为链式处理，利用中位数性质直接计算最小代价
- 数学推导严谨，代码简洁高效（O(n log n)排序时间复杂度）
- 通过前缀和数组巧妙消除环形影响

**个人心得**：
> "环形序列中必定存在两个相邻位置满足特定条件，通过破环成链转化为普通均分纸牌问题"

**核心代码**：
```cpp
sort(s+1,s+n+1);
ll m = s[n/2+1]; // 取中位数
for(int i=1;i<=n;i++) sum += abs(s[i]-m);
```

#### 2. KSkun（★★★★☆）
**关键亮点**：
- 标准网络流解法，清晰展示建模过程
- 双节点设计（供应节点X_i和需求节点Y_i）巧妙处理流量关系
- 通过无限容量边实现相邻节点的自由调配

**建图思路**：
```cpp
for 每个节点i:
   if 存货>平均值: add(S, X_i, 存货-平均, 0)
   else: add(Y_i, T, 平均-存货, 0)
   add(X_i, Y_{i-1}, INF, 1)  // 左右相邻节点
   add(X_i, Y_{i+1}, INF, 1)
```

#### 3. Social_Zhao（★★★★☆）
**关键亮点**：
- 线性代数方法推导搬运量方程
- 几何化解释将问题转化为输油管道问题
- 提供数学证明框架，增强解法可信度

**关键推导**：
```
设K_i表示第i人给左边的货物量
推导得：ans = Σ|K_1 - X_i|，X_i为前缀和
当K_1取X_i中位数时总和最小
```

---

### 关键思路总结
1. **中位数性质**：最优解必定存在某个点使得各位置到该点的绝对距离和最小
2. **破环为链**：通过环形结构的数学性质转化为线性问题处理
3. **前缀和转换**：将原始数据转换为前缀和序列，消除环形依赖
4. **网络流建模**：通过源汇点处理供需关系，无限容量边模拟相邻转移

---

### 拓展建议
1. **同类问题**：
   - 环形均分问题（如P2512 [HAOI2008]糖果传递）
   - 二维平衡问题（需结合行列分别处理）
   
2. **算法套路**：
   - 遇到环形结构优先考虑破环为链
   - 绝对值和最小问题联想中位数性质
   - 转移代价为线性时考虑贪心替代网络流

---

### 推荐练习题
1. [P1031 均分纸牌](https://www.luogu.com.cn/problem/P1031)（线性贪心基础）
2. [P2512 [HAOI2008]糖果传递](https://www.luogu.com.cn/problem/P2512)（环形结构扩展）
3. [P4015 运输问题](https://www.luogu.com.cn/problem/P4015)（网络流建模进阶）

---
处理用时：55.37秒
# 题目信息

# [USACO15DEC] High Card Low Card G

## 题目描述

奶牛 Bessie 是卡牌游戏的狂热爱好者，尽管她没有对生拇指，但这并不影响她的热情。遗憾的是，她的同伴们在卡牌游戏方面水平堪忧，甚至出牌顺序都完全可预测！尽管如此，Bessie 仍需精心策划才能获胜。

Bessie 和她的朋友 Elsie 正在玩一个简单的卡牌游戏。她们使用一副包含 $2N$ 张卡牌的牌组（编号为 $1 \ldots 2N$），并将牌分成各 $N$ 张。随后进行 $N$ 轮比赛：每轮双方各打出一张牌。在前 $N/2$ 轮中，打出较大数字的玩家得 1 分；在后 $N/2$ 轮中，规则反转，打出较小数字的玩家得 1 分。

已知 Bessie 可以预知 Elsie 每轮出牌的顺序，请计算 Bessie 能够获得的最大分数。

## 说明/提示

在此样例中，Bessie 手中的卡牌为 $2$、$5$、$6$ 和 $7$。她可以通过在比赛后半段保留 $2$ 这张牌，从而最多获得 2 分。

题目提供者：Brian Dean

## 样例 #1

### 输入

```
4
1
8
4
3
```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
本题的核心是贪心策略，关键在于将Elsie的前后各N/2轮出牌分开处理，并分别对Bessie的牌进行最优匹配。前半段需用大牌尽可能赢Elsie的大牌，后半段用小牌尽可能赢Elsie的小牌。正确分割Bessie的牌并高效匹配是解题要点。

---

### 精选题解

#### 1. 作者：onepeople666 （⭐⭐⭐⭐⭐）
- **关键亮点**：  
  - 明确分步处理，将Elsie的牌前后段分别排序（前段降序，后段升序），Bessie的牌分割为前N/2大和后N/2小两部分。  
  - 双指针法高效匹配，时间复杂度O(n)，代码简洁清晰。  
  - 类似田忌赛马的思路，直观易懂。

#### 2. 作者：liyilin2004 （⭐⭐⭐⭐）
- **关键亮点**：  
  - 动态分配Bessie的牌，用标记数组避免重复使用，确保正确性。  
  - 从大到小枚举Elsie的牌，并匹配Bessie的最大可用牌，后半段同理。  
  - 代码逻辑清晰，但变量命名和注释稍显不足。

#### 3. 作者：cosf （⭐⭐⭐⭐）
- **关键亮点**：  
  - 使用`set`结构维护可用牌，利用`upper_bound`快速匹配最优牌。  
  - 分前后半段处理，代码结构清晰，但复杂度略高（O(n log n)）。  
  - 灵活处理剩余牌，避免显式分割。

---

### 核心代码实现

#### onepeople666的代码（双指针法）：
```cpp
sort(e + 1, e + n/2 + 1, cmp); // 前半段降序
sort(e + n/2 + 1, e + n + 1); // 后半段升序
sort(b + 1, b + n + 1, cmp);  // Bessie整体降序

int ans = 0, v = 1;
for (int i = 1; i <= n/2; i++) {
    if (b[v] > e[i]) ans++, v++; // 前段用大牌赢
}
v = n/2 + 1;
for (int i = n/2 + 1; i <= n; i++) {
    if (b[v] < e[i]) ans++, v++; // 后段用小牌赢
}
```
**思路**：将Bessie的牌分为前N/2大和后N/2小，分别与Elsie的排序后牌双指针匹配。

#### liyilin2004的代码（动态标记）：
```cpp
int j = 2 * n;
for (int i = n/2; i >= 1; i--) { // 前段处理
    while (b[j]) j--; // 找Bessie最大未用牌
    if (j >= a[i]) ans++, j--;
}
j = 1;
for (int i = 1; i <= n/2; i++) { // 后段处理
    while (b[j]) j++; // 找Bessie最小未用牌
    if (j <= c[i]) ans++, j++;
}
```
**思路**：无需显式分割，动态遍历可用牌，优先用最大/最小牌匹配Elsie的当前牌。

---

### 关键思路总结
1. **分治贪心**：将问题拆分为前后两段独立处理，各自采用最优策略。
2. **排序匹配**：Elsie的前段降序、后段升序，Bessie对应分割后排序，双指针逐个匹配。
3. **动态分配**：用标记数组或集合管理可用牌，确保每张牌只使用一次。

---

### 拓展与相似题目
1. **P1650 田忌赛马**：经典贪心问题，类似双指针匹配策略。  
2. **P3129 [USACO15OPEN]High Card Low Card Platinum**：本题的进阶版，需结合更多优化。  
3. **P6179 [USACO09OPEN]Grazing2 S**：类似的分段贪心策略，需处理不同规则下的最优解。

---

### 个人心得摘录
- **调试关键**：确保Bessie的牌分割正确，避免前后段交叉使用导致错误（如显式分割时需严格排序）。  
- **贪心证明**：若当前策略非最优，则存在矛盾情况（如未用的大牌无法在后续获得更高收益）。  
- **代码简洁**：双指针法减少冗余判断，优先处理边界条件（如无法匹配时跳过）。

---
处理用时：206.24秒
# 题目信息

# [NOIP 2018 提高组] 货币系统

## 题目背景

NOIP2018 提高组 D1T2

## 题目描述

在网友的国度中共有 $n$ 种不同面额的货币，第 $i$ 种货币的面额为 $a[i]$，你可以假设每一种货币都有无穷多张。为了方便，我们把货币种数为 $n$、面额数组为 $a[1..n]$ 的货币系统记作 $(n,a)$。 

在一个完善的货币系统中，每一个非负整数的金额 $x$ 都应该可以被表示出，即对每一个非负整数 $x$，都存在 $n$ 个非负整数 $t[i]$ 满足 $a[i] \times t[i]$ 的和为 $x$。然而， 在网友的国度中，货币系统可能是不完善的，即可能存在金额 $x$ 不能被该货币系统表示出。例如在货币系统 $n=3$, $a=[2,5,9]$ 中，金额 $1,3$ 就无法被表示出来。 

两个货币系统 $(n,a)$ 和 $(m,b)$ 是等价的，当且仅当对于任意非负整数 $x$，它要么均可以被两个货币系统表出，要么不能被其中任何一个表出。 

现在网友们打算简化一下货币系统。他们希望找到一个货币系统 $(m,b)$，满足 $(m,b)$ 与原来的货币系统 $(n,a)$ 等价，且 $m$ 尽可能的小。他们希望你来协助完成这个艰巨的任务：找到最小的 $m$。 

## 说明/提示

在第一组数据中，货币系统 $(2, [3,10])$ 和给出的货币系统 $(n, a)$ 等价，并可以验证不存在 $m < 2$ 的等价的货币系统，因此答案为 $2$。 在第二组数据中，可以验证不存在 $m < n$ 的等价的货币系统，因此答案为 $5$。 

【数据范围与约定】

![](https://cdn.luogu.com.cn/upload/pic/43160.png)  

对于 $100\%$ 的数据，满足 $1 ≤ T ≤ 20, n,a[i] ≥ 1$。 

## 样例 #1

### 输入

```
2 
4 
3 19 10 6 
5 
11 29 13 19 17 ```

### 输出

```
2   
5  ```

# AI分析结果



### 综合分析与结论
各题解核心思路均围绕「完全背包预处理可表示数值，筛选不可被其他数组成的数」展开。通过证明最优解必为原系统的子集，将问题转化为动态规划求最小不可约简元素。大部分解法采用排序+完全背包，时间复杂度为 O(T*n*max_a)，能高效处理数据范围。

---

### 高评分题解推荐
#### 1. 0x3喵酱（5星）
**关键亮点**  
- 数学证明严谨，逻辑清晰，明确B是A的子集  
- 代码简洁高效，完全背包优化到位  
- 时间复杂度严格可控，代码可读性强  

**核心代码**  
```cpp
sort(a+1,a+n+1);
f[0]=1;
for(i=1;i<=n;i++){
    if(f[a[i]]) { ans--; continue; }
    for(j=a[i];j<=a[n];j++) f[j] |= f[j-a[i]];
}
```

#### 2. xzlhxc_ed（4星）
**关键亮点**  
- 详细推导基的概念，强化数学基础理解  
- 完全背包实现规范，变量命名清晰  
- 包含完整桶排序优化思路  

**个人心得**  
"排序后用小面值逐步更新大面值的可达性，类似筛法思想"  

#### 3. Super_Cube（4星） 
**关键亮点**  
- 代码极度简洁（仅19行）  
- 采用bitset优化状态压缩  
- 预处理排序与动态规划无缝衔接  

**核心技巧**  
```cpp
std::sort(a+1,a+n+1);
for(int i=1;i<=n;++i)
    if(dp[a[i]])--ans;
    else for(int j=a[i];j<=a[n];++j)dp[j]|=dp[j-a[i]];
```

---

### 最优关键思路总结
1. **数学建模**：证明最优解必为原系统子集，只需保留不可被其他数表示的元素  
2. **排序预处理**：升序排列后，确保每个数只用前面元素判断可表示性  
3. **完全背包优化**：  
   - 状态定义：`f[j]` 表示金额j是否可达  
   - 转移方程：`f[j] |= f[j-a[i]]`  
   - 空间优化：滚动数组降维  
4. **剪枝策略**：当当前数已被标记可达时直接跳过  

---

### 拓展建议
**同类题型推荐**  
1. [P4147 玉蟾宫](https://www.luogu.com.cn/problem/P4147)（矩阵类动态规划）  
2. [P2563 质数和分解](https://www.luogu.com.cn/problem/P2563)（完全背包变式）  
3. [P2370 快递包裹](https://www.luogu.com.cn/problem/P2370)（多重背包优化）  

**算法套路延伸**  
- 生成函数解法可用于求具体方案数（如NaCly_Fish解法）  
- 最短路模型适用于求最小组成元素数（如SuperJvRuo解法）  
- 位运算加速状态转移（如Super_Cube的bitset优化）  

---

### 调试经验摘录
1. **多测清空**："memset(f,0,sizeof(f)) 必须放在每组数据开头"  
2. **边界处理**："f[0]=1 是背包的合法初始状态，遗漏会导致全错"  
3. **性能陷阱**："j循环上限应设为a[n]而非25000，实测可快3倍"  
4. **浮点数误区**："生成函数法看似优雅但常数巨大，竞赛慎用"

---
处理用时：63.44秒
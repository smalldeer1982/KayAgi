# 题目信息

# 「EZEC-1」出题

## 题目背景

你是一个毒瘤出题人。

## 题目描述

已知你有 $n$ 道毒瘤题，已经出好了题面，但数据还没出好。你还剩下 $m$ 的时间，每道题的毒瘤程度为 $a_{i}$，出数据的时间是 $x_{i}$，你有 $k$ 个老师，每个老师可以把一道题的毒瘤程度翻倍（每道题目最多被翻倍一次）。你的父母由于坚决反对你出公开赛，抢走了你的一道题，现在老师和父母的行动你都可以控制，但每位老师和父母的行为必须执行，请问你要怎么做，才能使出的题毒瘤程度之和最大？

## 说明/提示

【样例解释】

样例 $1$ ：

你控制你的父母拿走 $T1$ ，然后配 $T2$ 和 $T3$ 的数据，同时将 $T2$ 的毒瘤值翻倍，所以毒瘤值最大是 $15$

------------

【数据范围】

对于 $30\%$ 的数据，$ 0 \le x_{i} \le m $，$0 \le m \le 100 $，$2 \le n \le 10$，$ k<n$。

对于另外 $20\%$ 的数据，保证 $k=0$。

对于 $100\%$ 的数据，$0 \le a_{i} \le 1000$，$ 0 \le x_{i} \le m $，$0 \le m \le 1000 $，$0 \le n \le 100$，$ k<n$。

upd in 2020.7.6：添加一组 hack 数据。

## 样例 #1

### 输入

```
3 10 1
6 9
7 2
1 8```

### 输出

```
15```

## 样例 #2

### 输入

```
5 20 2
5 3 
9 7
2 6
7 8
1 2```

### 输出

```
38```

## 样例 #3

### 输入

```
3 6 2
5 4
3 3
3 3```

### 输出

```
12```

# AI分析结果



### 综合分析与结论

本题核心是背包DP与贪心策略的结合。关键点在于分情况处理总时间是否足够，并通过二维DP处理翻倍次数，特别要注意枚举顺序的倒序问题以避免重复翻倍同一物品。以下题解在思路正确性、代码实现及错误处理方面表现突出：

---

### 精选题解列表

#### 1. 作者：xiaozeyu（★★★★★）
**关键亮点**：
- 精准指出其他题解在枚举顺序上的错误，用倒序枚举避免重复翻倍
- 正确处理两种核心情况（总时间足够时贪心，否则背包DP）
- 提供hack数据验证正确性，增强题解可信度
**个人心得**：
> "如果正序枚举次数，会重复对一个数字操作两次。正确做法应倒序枚举已用次数。"

**核心代码**：
```cpp
For(num,1,n)
    Rep(i,m,b[num]) // 倒序枚举容量
{
    Rep(j,min(k,num),1) // 倒序枚举已用翻倍次数
    {
        f[i][j]=max(f[i][j],max(f[i-b[num]][j]+a[num],f[i-b[num]][j-1]+a[num]*2));
        ans=max(ans,f[i][j]);
    }    
    f[i][0]=max(f[i][0],f[i-b[num]][0]+a[num]); // 单独处理0次翻倍
    ans=max(ans,f[i][0]);
}
```

#### 2. 作者：pigstd（★★★★☆）
**关键亮点**：
- 清晰的贪心与DP分治思路
- 代码简洁高效，正确处理状态转移
- 通过特判优化边界情况
**核心实现**：
```cpp
if(sum<=m) { // 贪心特判
    sort(a+1,a+1+n,cmp);
    for(int i=1;i<=k;i++) ans += a[i]*2;
    for(int i=k+1;i<n;i++) ans += a[i];
}
else { // 背包DP
    for(int e=1;e<=n;e++)
        for(int i=m;i>=x[e];i--) // 倒序枚举容量
            for(int j=min(k,e);j>=1;j--) // 倒序枚举翻倍次数
                f[i][j] = max(...);
}
```

#### 3. 作者：Mars_Dingdang（★★★★☆）
**关键亮点**：
- 结构清晰，分情况讨论完整
- 代码规范，注释详细，适合学习
**核心思路**：
```cpp
if(sum <= m) { // 贪心策略
    sort(w+1, w+n+1, greater<int>());
    ans += sum前k项翻倍 + 剩余项;
} else { // 背包DP
    for(物品遍历)
        for(倒序容量枚举)
            for(倒序翻倍次数枚举)
                DP转移;
}
```

---

### 关键思路与技巧总结

1. **分类讨论**：总时间是否足够装所有题目，决定采用贪心或DP。
2. **状态设计**：`dp[i][j]`表示用时`i`、使用`j`次翻倍的最大价值。
3. **倒序枚举**：防止同一物品被多次翻倍，确保状态转移正确性。
4. **贪心策略**：总时间足够时，翻倍前k大的题目，舍弃最小项。

---

### 相似题目推荐

1. **P1064 金明的预算方案**（依赖型背包+分组处理）
2. **P1941 飞扬的小鸟**（混合背包+状态优化）
3. **P1759 通天之分组背包**（分组背包基础训练）

---

### 个人心得摘录

- **调试教训**（xiaozeyu）：
  > "正序枚举翻倍次数会导致重复操作同一物品，必须倒序枚举已用次数。"
  
- **思维突破**（pigstd）：
  > "父母抢走的题目可以是未装入背包的，因此当总时间不足时无需特别处理。"

---
处理用时：69.62秒
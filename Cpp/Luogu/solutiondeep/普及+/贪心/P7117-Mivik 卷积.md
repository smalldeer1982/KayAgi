# 题目信息

# Mivik 卷积

## 题目背景

卷王之王卷穿肠（doge

## 题目描述

从前有一只 Mivik，他喜欢卷积。他定义两个仅与 $x$ 有关的多项式函数 $f\left(x\right)$ 和 $g\left(x\right)$ 的 Mivik 卷积如下：

$$
f\left(x\right)\otimes g\left(x\right)=\sum_{k=0}^{\deg f +\deg g}\max_{i\in [0,\deg f] \land j\in [0,\deg g]\land i+j=k}\left\{\left[x^i\right]f\left(x\right)+\left[x^j\right]g\left(x\right)\right\} x^k
$$

其中 $\deg f$ 表示 $f$ 的最高项次数，$\left[x^i\right]f\left(x\right)$ 代表 $f\left(x\right)$ 这一函数中 $x^i$ 这一项的系数。

请注意，Mivik 卷积是左结合的，也就是说 $a\otimes b\otimes c=(a\otimes b)\otimes c$。

Mivik 定义 Mivik 函数为能表示为 $f\left(x\right)=ax+b$ 形式的函数，其中 $a$、$b$ 均为整数。例如 $f\left(x\right)=-3+2x$ 是 Mivik 函数，而 $f\left(x\right)=\frac{1}{x}$ 不是。

Mivik 又定义一个函数 $f\left(x\right)$ 是 simple 的，当且仅当存在一个 Mivik 函数的序列 $S$（大小为 $\left|S\right|$），使得：

$$
f\left(x\right)=S_1\otimes S_2\otimes S_3\otimes\cdots\otimes S_{\left|S\right|}.
$$

现在 Mivik 给了你一个多项式函数，问你这个函数是不是 simple 的；如果是，请顺便告诉他任意一种可能的 $S$。

## 说明/提示

### 样例解释 #1

给定的函数 $f\left(x\right)=2+3x+3x^2$ 可以由 $\left(2x+1\right)\otimes\left(x+1\right)$ 得到。

### 测试点约束

**本题采用捆绑测试。**

对于全部数据，有 $1\le n\le 5\times 10^5$，$-10^8\le f_i\le 10^8$。

每个子任务的具体限制见下表：

| 子任务编号 | 分值 | $n\le$ |
|:-:|:-:|:-:|
| 1 | 5 | $1$ |
| 2 | 5 | $2$ |
| 3 | 20 | $20$ |
| 4 | 30 | $5000$ |
| 5 | 40 | $5\times 10^5$ |

**本题读入输出量较大，请使用较快的读入输出方式。**

## 样例 #1

### 输入

```
3
2 3 3
```

### 输出

```
simple
2
2 1
1 1
```

## 样例 #2

### 输入

```
3
97 109 101
```

### 输出

```
simple
2
54 42
47 55
```

## 样例 #3

### 输入

```
9
9 9 8 2 4 4 3 5 3
```

### 输出

```
nice
```

# AI分析结果



### 综合分析与结论
本题核心在于发现 Mivik 卷积的数学性质：合法多项式系数序列的差分数列必须非递增。构造解时，将每个 Mivik 函数视为一个物品选择问题，通过差分序列生成对应的线性函数。

---

### 精选题解

#### 1. _H17_ 题解（⭐⭐⭐⭐⭐）
**关键亮点**  
- 代码清晰高效，O(n) 时间复杂度处理 5e5 规模数据  
- 精准实现差分非递增判断与构造逻辑  
- 处理边界条件完善（如 n=1 特判）

**个人心得**  
作者强调对差分条件的理解是关键，通过将问题转化为"每次选物品的增量递减"，实现高效判断与构造。

**核心代码思想**  
```cpp
for(int i=2,k;i<=n;i++){
    k=v[i]-v[i-1];
    if(l<k){ // 检查是否破坏非递增条件
        cout<<"nice"; 
        exit(0);
    }
    l=k;
}
// 构造解时：
for(int i=2;i<=n;i++){
    int b = (i==2) ? v[1] : 0;
    int a = b + (v[i] - v[i-1]);
    cout << a << " " << b << endl;
}
```

#### 2. Mivik 题解（⭐⭐⭐⭐）
**关键亮点**  
- 理论分析透彻，揭示差分数列性质  
- 将 Mivik 卷积转化为物品选择模型  
- 结合律和交换律的数学证明为理论基础

---

### 关键思路总结
1. **差分性质**：合法序列的差分数列必须非递增（即凸性条件）
2. **构造方法**：
   - 第一个函数：b₁ = f₀，a₁ = f₁
   - 后续函数：bᵢ = 0，aᵢ = fᵢ - fᵢ₋₁
3. **边界处理**：当 n=1 时直接构造单函数

---

### 拓展与举一反三
1. **类似题型**：  
   - 序列构造满足特定差分条件（如非递增/递减）  
   - 贪心策略中的极值选择问题  
   - 动态规划中的凸性优化

2. **推荐题目**：  
   - P2893 [USACO08FEB] Making the Grade G（序列调整成非递减/非递增）  
   - P4597 序列sequence（差分约束与极值）  
   - P8112 [Cnoi2021] 符文破译（前缀和与差分的特殊性质）

---
处理用时：108.38秒
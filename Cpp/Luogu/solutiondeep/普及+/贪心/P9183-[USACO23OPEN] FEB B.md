# 题目信息

# [USACO23OPEN] FEB B

## 题目描述

贝西和埃尔希正在密谋最终推翻他们的主人——农夫约翰！他们通过 $N$ 条短信进行计划。他们的对话可以用一个长度为 $N$ 的字符串 $S$ 来表示。     
其中 $S_i$ 是字母 ```B``` 或 ```E```，这意味着第 $i$ 条消息分别由贝西或埃尔希发送的。


然而，农夫约翰听说了这个消息，并试图拦截他们的谈话。因此，字符串 $S$ 的一些字母是 ```F```，这意味着农夫约翰混淆了信息，发件人未知（贝西、埃尔希都有可能）。   
**注：约翰没有发送信息！他只是在干扰奶牛间的通话！**


未混淆对话的兴奋程度是**一只奶牛重复发送信息的次数**。也就是说，子串 ```BB``` 或 ```EE``` 在 $S$ 中出现的次数。你想找到原始信息的兴奋程度，但你不知道约翰的信息中哪一条实际上是贝西或埃尔希的。在所有可能的情况下，**从小到大输出**所有可能的兴奋程度。

## 说明/提示

$1 \le N \le 2 \times 10^5$。
- 测试点 4~8：$N \le 10$
- 测试点 9~20：无额外限制。

## 样例 #1

### 输入

```
4
BEEF
```

### 输出

```
2
1
2
```

## 样例 #2

### 输入

```
9
FEBFEBFEB
```

### 输出

```
2
2
3```

## 样例 #3

### 输入

```
10
BFFFFFEBFE```

### 输出

```
3
2
4
6```

# AI分析结果



### 综合分析与结论
各题解核心思路统一：通过观察答案呈等差数列的特性，结合首尾是否含F确定公差，贪心计算极值后生成结果。关键优化点在于利用F段的位置特性简化计算。所有题解均基于此核心思路，差异主要在代码实现和证明细节。

---

### 高评分题解推荐

#### 1. 作者：Limie（★★★★☆）
**关键亮点**：
- 数学归纳法完整证明等差数列规律，逻辑严密
- 提供极值计算的贪心思路（l/r函数分别计算最小/最大值）
- 代码处理首尾F的边界情况清晰

**核心代码**：
```cpp
int l(){ // 计算最小值：交替填充
    for(int i=1;i<n;i++)
        if(t[i]=='F') 
            t[i] = (t[i-1]=='B' ? 'E' : 'B');
    return 相邻相同计数;
}
int r(){ // 计算最大值：连续填充
    for(int i=1;i<n;i++)
        if(t[i]=='F') t[i] = t[i-1];
    return 相邻相同计数; 
}
```

#### 2. 作者：include13_fAKe（★★★★☆）
**关键亮点**：
- 模块化设计solve_most/solve_least函数
- 处理首F的枚举策略简明（B/E各试一次取极值）
- 代码可读性高，变量命名清晰

**核心代码**：
```cpp
int solve_most(){ // 最大极值：与前一位相同
    for(int i=1;i<n;i++)
        if(s[i]=='F') s[i] = s[i-1];
    return 相邻计数;
}
void main(){
    if(首尾有F) flag=1;
    else flag=2;
    // 生成等差数列输出
}
```

#### 3. 作者：Zaku（★★★★☆）
**关键亮点**：
- 分类讨论三种F段情况（头尾/中间相同/中间不同）
- 引入数学推导合并等差数列的特性
- 代码特判全F情况，逻辑完备

**核心代码**：
```cpp
int main(){
    if(全F){ // 特例处理
        cout<<n<<endl; 
        for(0~n-1)输出; 
    }
    // 计算中间段极值
    while(跳过首尾F)...
    // 生成等差数列
}
```

---

### 关键思路与技巧
1. **公差判定**：首尾存在F → 公差1，否则公差2
2. **极值计算**：
   - 最大值：F与前一个字符相同（连续填充）
   - 最小值：F与前一个字符交替（B/E轮换）
3. **等差数列生成**：通过极值差和公差直接生成结果集

---

### 同类题目推荐
1. [P1005 矩阵取数游戏](https://www.luogu.com.cn/problem/P1005) - 区间DP与极值计算
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心策略求极值
3. [CF1520D Similar Pairs](https://www.luogu.com.cn/problem/CF1520D) - 等差数列性质应用

---

### 代码实现技巧
**极值计算优化**：预处理字符串时采用两种策略：
```cpp
// 最小值策略：交替填充
for(int i=1;i<n;i++)
    if(s[i]=='F') s[i] = (s[i-1]=='B' ? 'E' : 'B');

// 最大值策略：连续填充 
for(int i=1;i<n;i++)
    if(s[i]=='F') s[i] = s[i-1];
```
此方法时间复杂度O(n)，完美处理2e5数据规模。

---

### 题解中的个人心得
1. **Mu_leaf**："通过打表发现规律，但需严格证明" → 强调观察与证明的结合
2. **Erica_N_Contina**："修改一位F的影响为±2" → 揭示等差数列的形成机制
3. **small_john**："首尾F需枚举两种情况" → 点出边界处理的关键

---
处理用时：60.71秒
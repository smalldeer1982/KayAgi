# 题目信息

# 选择数字

## 题目描述

给定一行 $n$ 个非负整数 $a_1 \cdots a_n$。现在你可以选择其中若干个数，但不能有超过 $k$ 个连续的数字被选择。你的任务是使得选出的数字的和最大。

## 说明/提示

对于 $20\%$ 的数据，$n \le 10$。

对于另外 $20\%$ 的数据，$k=1$。

对于 $60\%$ 的数据，$n \le 1000$。

对于 $100\%$ 的数据，$1 \le n \le 100000$，$1 \le k \le n$，$0 \le $ 数字大小 $ \le 1,000,000,000$。

时间限制 $500$ ms。

## 样例 #1

### 输入

```
5 2
1
2
3
4
5 
```

### 输出

```
12```

# AI分析结果

### 综合分析与结论
本题主要是在给定的非负整数序列中选择若干数，要求不能有超过 $k$ 个连续数字被选，目标是使所选数字的和最大。题解主要围绕动态规划（DP）展开，大部分使用单调队列优化，也有使用线段树优化、最短路算法和暴力枚举的。

### 所选题解
- **Youngsc（5星）**
    - **关键亮点**：思路清晰，通过正难则反的思想，将问题转化为删除数的最小和，使用单调队列优化 DP，复杂度为 $O(n)$。
    - **核心代码**
```cpp
for(R int i=1; i<=n; ++i)
{
    in(d);
    tot += d;
    f[i] = q[head]+1LL*d;
    while(head<=tail&&q[tail]>=f[i]) tail--;
    q[++tail] = f[i],p[tail] = i;
    while(head<=tail&&p[head]<i-k) head++;
}
for(R int i=n-k; i<=n; ++i) maxx(ans,1LL*tot-1LL*f[i]);
```
    - **核心思想**：用 $f[i]$ 表示前 $i$ 个数中被删除的数的最小和，通过单调队列维护 $f[j]$ 的最小值进行状态转移，最后用总和减去最小删除和得到最大选择和。

- **Star_Wind（4星）**
    - **关键亮点**：详细阐述了 DP 的三要素，对状态转移方程的推导和优化过程解释清晰，使用单调队列将时间复杂度从 $O(n^2)$ 降到 $O(n)$。
    - **核心代码**
```cpp
for(int i=1;i<=n;i++)
{
    f[i][0]=max(f[i-1][0],f[i-1][1]);
    while(q[l]<i-m&&l<=r) l++;
    f[i][1]=f[q[l]][0]-s[q[l]]+s[i];
    while(f[i][0]-s[i]>f[q[r]][0]-s[q[r]]) r--;
    r++;q[r]=i; 
}
```
    - **核心思想**：设 $f_{i,0}$ 表示不取第 $i$ 个数的最大结果，$f_{i,1}$ 表示取第 $i$ 个数的最大结果，通过单调队列维护 $f_{x,0}-s_x$ 的最大值进行状态转移。

- **Priori_Incantatem（4星）**
    - **关键亮点**：状态定义明确，对状态转移方程的推导和优化过程解释详细，使用单调队列维护 $f[j][0]-s[j]$ 的最大值，降低时间复杂度。
    - **核心代码**
```cpp
for(long long i=1;i<=n;++i)
{
    pop(i);
    push(i-1);
    long long j=q.front();
    f[i][1]=s[i]+f[j][0]-s[j];
    f[i][0]=max(f[i-1][1],f[i-1][0]);
}
```
    - **核心思想**：$f[i][0]$ 表示前 $i$ 个数第 $i$ 个数不取的最优答案，$f[i][1]$ 表示第 $i$ 个数取的最优答案，通过单调队列维护 $f[j][0]-s[j]$ 的最大值进行状态转移。

### 最优关键思路或技巧
- **正难则反**：将求选数的最大和转化为求删数的最小和，简化问题。
- **单调队列优化 DP**：在状态转移过程中，使用单调队列维护最值，将时间复杂度从 $O(nk)$ 降到 $O(n)$。
- **前缀和**：使用前缀和数组快速计算区间和，减少重复计算。

### 可拓展之处
同类型题如区间选择问题，要求在满足一定区间限制条件下选择元素使总和最大。类似算法套路可使用动态规划结合单调队列、线段树等数据结构进行优化。

### 推荐题目
- P1725 琪露诺
- P2627 修剪草坪
- P1886 滑动窗口

### 个人心得摘录与总结
- **TheShadow**：作为单调队列优化 DP 的第一题，遇到了奇怪的操作问题，意识到需要强化自己的能力，不能依赖他人。
- **Kendrick_Z**：对单调队列中左右指针初始值设置感到玄学，不同设置会导致结果不同，需进一步探究。 

---
处理用时：26.41秒
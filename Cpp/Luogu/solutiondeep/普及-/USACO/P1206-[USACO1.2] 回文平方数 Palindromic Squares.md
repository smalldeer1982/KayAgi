# 题目信息

# [USACO1.2] 回文平方数 Palindromic Squares

## 题目描述

回文数是指从左向右念和从右向左念都一样的数。如 $12321$ 就是一个典型的回文数。

给定一个用十进制表示的正整数 $B$，输出所有 $[1,300]$ 中，它的平方用 $B$ 进制表示时是回文数的数。


## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$2 \le B \le 20$

题目翻译来自NOCOW。

USACO Training Section 1.2


## 样例 #1

### 输入

```
10
```

### 输出

```
1 1
2 4
3 9
11 121
22 484
26 676
101 10201
111 12321
121 14641
202 40804
212 44944
264 69696
```

# AI分析结果



### 综合分析与结论
题目核心为**进制转换**与**回文判断**。各题解普遍采用枚举1-300的平方数，转B进制后判断回文。关键差异在于进制转换的实现方式、代码结构优化及回文判断效率。高质量题解通过模块化设计（函数/结构体封装）提升可读性，并优化回文判断逻辑。

---

### 精选题解推荐

#### 1. 作者：buickboy（★★★★★）
**关键亮点**：
- 使用独立函数 `ten2b` 处理进制转换，代码简洁且复用性高。
- 回文判断采用双指针法，时间复杂度仅需 O(n/2)。
- 利用字符串字典 `dic` 统一处理数字与字母转换，避免冗余判断。
- 主函数逻辑清晰，仅需6行核心代码完成功能。

**核心代码**：
```cpp
string ten2b(int n, int b) {
    string x;
    const string dic = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    while (n) {
        x = dic[n % b] + x; // 余数倒序拼接
        n /= b;
    }
    return x;
}
```

#### 2. 作者：hsfzLZH1（★★★★★）
**关键亮点**：
- 通过结构体封装进制转换、回文判断与输出，实现高内聚低耦合。
- 构造函数直接完成进制转换，存储每一位余数，避免重复计算。
- 回文判断优化为仅遍历一半长度 (`i <= l/2`)，减少冗余比较。

**核心代码**：
```cpp
struct node {
    int l, a[20]; // 存储B进制数的每一位
    node(int x) { // 构造函数完成进制转换
        for (l = 0; x; l++) a[l] = x % b, x /= b;
    }
    bool tf() { // 回文判断
        for (int i = 0; i < l; i++)
            if (a[i] != a[l - i - 1]) return false;
        return true;
    }
};
```

#### 3. 作者：Violette（★★★★☆）
**关键亮点**：
- 分函数处理进制转换 (`jz`)、回文判断 (`change`) 和输出 (`print`)。
- 使用全局数组存储转换结果，减少内存分配开销。
- 主循环结构清晰，适合快速理解整体流程。

**核心代码**：
```cpp
void jz(int a, int b) { // 进制转换到全局数组s
    int r = 0;
    while (a) s[++r] = a % b, a /= b;
    s[0] = r; // s[0]存储位数
}
bool change() { // 回文判断
    for (int i = 1; i <= s[0]; i++)
        if (s[i] != s[s[0] + 1 - i]) return false;
    return true;
}
```

---

### 关键思路与技巧总结
1. **进制转换**：短除法取余，倒序拼接结果。使用预置字符表（如`0-9A-Z`）统一处理数字与字母。
2. **回文判断**：双指针从两端向中间比较，仅需遍历一半长度。
3. **模块化设计**：拆分转换、判断、输出为独立函数/结构体，提升代码复用性。
4. **优化点**：避免重复转换（如先转平方数，仅当回文时再转原数）。

---

### 拓展与举一反三
- **同类题目**：
  - **P1143** 进制转换：纯进制转换练习。
  - **P1015** 回文数：判断特定进制下的回文数。
  - **P1207** 双重回文数：寻找双重进制回文数。
- **技巧迁移**：短除法可用于任意进制转换问题；双指针法适用于对称性验证（如括号匹配、最长回文子串）。

---

### 个人心得摘录
- **DrMao**：初始化数组时需清空旧数据，否则残留值导致错误。
- **buickboy**：利用字符串拼接顺序 (`x = dic[...] + x`) 自然实现倒序，避免显式反转操作。
- **hsfzLZH1**：结构体构造函数将对象初始化与计算结合，减少主函数复杂度。

---
处理用时：59.00秒
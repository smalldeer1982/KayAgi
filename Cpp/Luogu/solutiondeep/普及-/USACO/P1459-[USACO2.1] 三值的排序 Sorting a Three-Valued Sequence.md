# 题目信息

# [USACO2.1] 三值的排序 Sorting a Three-Valued Sequence

## 题目描述

排序是一种很频繁的计算任务。现在考虑最多只有三值的排序问题。一个实际的例子是，当我们给某项竞赛的优胜者按金银铜牌排序的时候。在这个任务中可能的值只有三种 $1,2,3$。我们用交换的方法把他排成升序的。

写一个程序计算出，给定的一个 $1,2,3$ 组成的数字序列，排成升序所需的最少交换次数


## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 1000$。

USACO 2.1

翻译来自NOCOW


## 样例 #1

### 输入

```
9
2
2
1
3
3
3
2
3
1```

### 输出

```
4
```

# AI分析结果



### 综合分析与结论
本题的关键在于通过最少交换次数将三值序列排序。最优解法通常基于贪心策略，优先处理两两交换（一次解决两个错误），剩余的三循环情况通过两次交换处理。数学统计法通过计算原数组与目标数组的差值分布，能够高效得出答案。

### 高星题解推荐
#### 1. 作者：Vimin （★★★★★）
- **关键亮点**：利用差值统计法，将问题转化为数学计算，时间复杂度O(n)，代码简洁高效。
- **核心思路**：将原数组与目标数组对应位置作差，统计差值1、-1、2、-2的出现次数。答案公式为`max(one, two) + min(tre, fou)`，其中one、two为差1、-1的数量，tre、fou为差2、-2的数量。
- **代码摘录**：
```cpp
int main() {
    scanf("%d",&n);
    // ... 统计各数出现次数并生成目标数组的差值
    for(int i=1;i<=n;i++) {
        if(b[i]==-1) one++;
        else if(b[i]==1) two++;
        else if(b[i]==2) tre++;
        else if(b[i]==-2) fou++;
    }
    cout<<max(one,two)+min(tre,fou);
}
```

#### 2. 作者：泠小毒 （★★★★）
- **关键亮点**：分步贪心处理两两交换，剩余错误用三次循环处理，思路清晰。
- **核心思路**：优先交换使两个元素归位的对，剩余错误数除以3后乘以2即为三次循环所需交换次数。
- **代码摘录**：
```cpp
for(int i=1;i<=sum[1];i++) // 处理1区中的2与2区中的1交换
for(int j=sum[1]+1;j<=sum[1]+sum[2];j++)
    if(a[i]==2&&a[j]==1) swap(a[i],a[j]),ans++;
// ... 类似处理其他情况
ans += (未归位数) * 2 / 3;
```

#### 3. 作者：鹭天 （★★★★）
- **关键亮点**：实际交换模拟，优先处理最优交换，剩余统计三次循环。
- **核心思路**：通过三次遍历分别处理1区中的2、3，2区中的3，确保每次交换最优。
- **个人心得**：强调贪心的直观性，但需注意多次遍历可能影响效率。

### 最优关键思路
**差值统计法**：通过原数组与目标数组的差值，统计各类型错误的数量。直接数学计算得出最少交换次数，无需复杂交换模拟，时间复杂度O(n)。

### 拓展与相似题目
1. **P1177 【模板】快速排序**（考察排序基本思想）
2. **P1908 逆序对**（统计逆序对，与差值统计类似）
3. **P1094 纪念品分组**（贪心策略应用）

---
处理用时：242.39秒
# 题目信息

# [USACO18FEB] Hoofball B

## 题目描述

为了准备即将到来的蹄球锦标赛，Farmer John 正在训练他的 $N$ 头奶牛（方便起见，编号为 $1\ldots N$，其中 $1\le N\le 100$）进行传球。这些奶牛在牛棚一侧沿直线排列，第 $i$ 号奶牛位于距离牛棚 $x_i$ 的地方（$1\le x_i\le 1000$）。每头奶牛都在不同的位置上。

在训练开始的时候，Farmer John 会将若干个球传给不同的奶牛。当第 $i$ 号奶牛接到球时，无论是从 Farmer John 或是从另一头奶牛传来的，她会将球传给最近的奶牛（如果有多头奶牛与她距离相同，她会传给其中距左边最远的那头奶牛）。为了使所有奶牛都有机会练习到传球，Farmer John 想要确保每头奶牛都持球至少一次。帮助他求出为了达到这一目的他开始时至少要传出的球的数量。假设他在开始的时候能将球传给最适当的一组奶牛。 

## 说明/提示

在上面的样例中，Farmer John 应该将球传给位于 $x=1$ 的奶牛和位于 $x=11$ 的奶牛。位于 $x=1$ 的奶牛会将她的球传给位于 $x=3$ 的奶牛，在此之后这个球会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。位于 $x=11$ 的奶牛会将她的球传给位于 $x=7$ 的奶牛，然后球会被传给位于 $x=4$ 的奶牛，在此之后这个球也会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。这样的话，所有的奶牛都会至少一次接到球（可能从 Farmer John，也可能从另一头奶牛）。

可以看出，不存在这样一头奶牛，Farmer John 可以将球传给她之后所有奶牛最终都能被传到球。 

## 样例 #1

### 输入

```
5
7 1 3 11 4```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
本题关键在于确定每个奶牛的传球方向并处理可能的循环传球。正确解法需统计初始必传球的奶牛（入度为0的点）及独立成环的奶牛对。各题解主要思路相似，差异在于环的处理方式：部分题解通过遍历相邻点对判断环，而另一些使用DFS标记访问点后计算剩余环数量。

---

### 精选题解

#### 1. Silent1019（5星）
**关键亮点**  
- 代码简洁，逻辑清晰，仅通过两次遍历解决问题。  
- 处理环的方式巧妙，检查相邻点是否互相传递且入度均为1，确保所有情况覆盖。  
**个人心得**  
- 注意距离相同时传左的特殊处理，避免越界。  
**核心代码**  
```cpp
for(int i=1;i<=n;i++) {
    if(a[i]-a[i-1]>a[i+1]-a[i]) {
        to[i]=i+1; cnt[i+1]++;
    } else {
        to[i]=i-1; cnt[i-1]++;
    }
}
ans += 入度为0的点数;
for(int i=1;i<=n;i++) {
    if(cnt[i]==1 && cnt[i+1]==1 && to[i]==i+1 && to[i+1]==i)
        ans++;
}
```

#### 2. jianglai0119（4星）
**关键亮点**  
- 使用DFS标记可达点，剩余未访问点即为独立环，思路普适性强。  
- 正确处理所有可能的环结构，避免相邻判断的局限性。  
**核心代码**  
```cpp
void DFS(int x) {
    vis[x] = 1;
    DFS(nxt[x]);
}
// 统计未被访问的点数并除以2
ans += 未访问点数 / 2;
```

---

### 最优思路总结
1. **排序处理**：将奶牛按位置排序以简化方向判断。
2. **传递链分析**：每个节点只能传向左或右最近节点，建立传递链。
3. **入度统计**：初始必传点为入度0的节点。
4. **环处理技巧**：相邻节点互相传递且入度均为1时需额外计数，或通过DFS统计剩余环数。

---

### 相似题目推荐
1. **P2921** [USACO08DEC] Trick or Treat on the Farm  
   - 考察点：有向图环检测与路径长度计算。
2. **P2661** 信息传递  
   - 考察点：寻找有向图中的最小环。
3. **P2740** [USACO4.2] 草地排水  
   - 考察点：图结构分析与路径优化（虽为网络流，但环处理思路相关）。

---
处理用时：194.01秒
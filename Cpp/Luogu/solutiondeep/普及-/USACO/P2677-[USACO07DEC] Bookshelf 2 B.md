# 题目信息

# [USACO07DEC] Bookshelf 2 B

## 题目描述

Farmer John最近为奶牛们的图书馆添置了一个巨大的书架，尽管它是如此的大，但它还是几乎瞬间就被各种各样的书塞满了。现在，只有书架的顶上还留有一点空间。 所有N(1 <= N <= 20)头奶牛都有一个确定的身高H\_i(1 <= H\_i <= 1,000,000 - 好高的奶牛>\_<)。设所有奶牛身高的和为S。书架的 高度为B，并且保证1 <= B <= S。 为了够到比最高的那头奶牛还要高的书架顶，奶牛们不得不象演杂技一般，一头站在另一头的背上，叠成一座“奶牛塔”。当然，这个塔的高度，就是塔中所有奶牛的身高之和。为了往书架顶上放东西，所有奶牛的身高和必须不小于书架的高度。 塔叠得越高便越不稳定，于是奶牛们希望找到一种方案，使得叠出的塔在高度不小于书架高度的情况下，高度尽可能小。你也可以猜到你的任务了：写一个程序，计算奶牛们叠成的塔在满足要求的情况下，最少要比书架高多少。


## 说明/提示

输出说明:

我们选用奶牛1、3、4、5叠成塔，她们的总高度为3 + 3 + 5 + 6 = 17。任何方案都无法叠出高度为16的塔，于是答案为1。


## 样例 #1

### 输入

```
5 16
3
1
3
5
6```

### 输出

```
1```

# AI分析结果



### 综合分析与结论  
本题核心为寻找满足条件的最小超集和，常见解法包括动态规划（转化为背包问题）、DFS剪枝、折半搜索、二进制枚举等。由于数据范围较小（N ≤ 20），指数级复杂度的算法（如DFS、二进制枚举）可行；若数据更大，折半搜索和背包DP更具优势。关键优化点在于将问题转化为价值与容量相同的背包模型，或通过分治思想降低时间复杂度。

---

### 高星题解推荐  
#### 1. 作者：道费而隐（★★★★★）  
**关键亮点**：  
- 将问题转化为01背包，总高度差为背包容量，最大化背包价值（即尽可能接近总高度差）。  
- 时间复杂度为O(N*W)，W为总高度差，适用于本题数据范围。  
**核心代码**：  
```cpp
for(int i=1;i<=n;i++) {
    for(int j=w;j>=h[i];j--) {
        f[j] = max(f[j], f[j-h[i]] + h[i]);
    }
}
cout << tot - f[w] - b;  
```

#### 2. 作者：Soledad_S（★★★★☆）  
**关键亮点**：  
- 折半搜索将复杂度从O(2^N)降为O(2^(N/2))，配合二分查找合并结果，适用于更大数据。  
- 通过分治思想，避免暴力枚举所有子集。  
**核心代码**：  
```cpp
void DFS1(int pos, int ed, int tot) { // 生成前半部分子集和
    if (pos == ed+1) { a[++a[0]] = tot; return; }
    DFS1(pos+1, ed, tot + s[pos]);
    DFS1(pos+1, ed, tot);
}
int pos = Half(tmp); // 二分查找后半部分最优解
```

#### 3. 作者：郑yz（★★★★☆）  
**关键亮点**：  
- 简洁的DFS实现，通过逐层选或不选奶牛生成组合，代码易读性强。  
- 剪枝优化：一旦找到等于书架高度的解，立即退出。  
**核心代码**：  
```cpp
void dfs(int t, long long sum) {
    if (sum >= s) {
        total = min(sum, total);
        return;
    }
    if (t > n) return;
    dfs(t+1, sum);        // 不选当前牛
    dfs(t+1, sum + hi[t]); // 选当前牛
}
```

---

### 关键思路与技巧总结  
1. **背包模型转化**：将总高度差作为背包容量，最大化所选奶牛高度，转化为经典01背包问题。  
2. **折半搜索优化**：通过分治思想将问题拆分为两半，分别枚举后合并结果，显著降低时间复杂度。  
3. **DFS剪枝**：尽早终止无效分支（如当前和已超过已知最优解）。  
4. **二进制枚举**：利用位运算生成所有子集，适用于小数据范围（N ≤ 20）。  

---

### 类似题目推荐  
1. **P2392** - 背包问题变种，需处理多个子集和约束。  
2. **P3067** - 折半搜索经典题，要求平衡子集和的差值。  
3. **P1441** - 结合DFS与背包，适合练习组合优化。  

---

### 个人心得摘录  
- **调试教训**：贪心排序后累加可能无法得到最优解（如作者：brony），需注意问题约束条件。  
- **优化顿悟**：背包模型中价值与容量相同可简化状态转移（道费而隐）。  
- **实现技巧**：折半搜索配合二分查找能高效合并子问题（Soledad_S）。

---
处理用时：65.23秒
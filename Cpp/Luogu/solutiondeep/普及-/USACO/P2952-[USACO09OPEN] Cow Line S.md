# 题目信息

# [USACO09OPEN] Cow Line S

## 题目描述

Farmer John（以下简称 FJ）的 $N$ 头奶牛（用 $1 \dots N$ 编号）在直线上排队。一开始，这条线上没有任何奶牛，随着时间的推移，奶牛们会一个接一个地站到队伍的左边或右边。又过了一会儿，某些奶牛会从队伍里离开，去吃自己最喜欢的草料。

FJ 无法跟踪每一头奶牛，于是，他想让你来帮助他。

奶牛以 $1 \dots N$ 的顺序排队，并且离开的奶牛不会再次回来。数据将会给出 $S$（$1 \le S \le 100000$） 条指令，各占一行，分两种：

- $A$ 头奶牛加入了队列（还有一个参数，表示从左加入还是从右加入）；
- $K$ 头奶牛从左边或者右边离开了队列（还有两个参数，分别表示从左离开还是从右离开和离开多少头奶牛）。

输入的命令一定是可以执行的。

所有的操作结束后，你的程序应该以从左到右的顺序输出这个奶牛队列。数据保证最后的队列不空。

## 样例 #1

### 输入

```
10 
A L 
A L 
A R 
A L 
D R 2 
A R 
A R 
D L 1 
A L 
A R 
```

### 输出

```
7 
2 
5 
6 
8 
```

# AI分析结果



### 综合分析与结论
本题核心在于高效模拟双端队列的插入与删除操作。主流解法分为两类：**STL deque容器**与**数组模拟**。deque实现简洁，适合快速编码；数组模拟通过预分配大数组避免动态内存操作，性能更优。所有操作的时间复杂度均为O(1)或O(k)（k为删除次数），均能通过题目约束。

---

### 高星题解推荐

#### 1. Sooke的题解（★★★★★）
**关键亮点**：代码极简，直接调用STL deque实现，10行核心逻辑清晰展现双端队列操作。  
**代码核心**：
```cpp
deque<int> Q;
if(a == 'A' && b == 'L') Q.push_front(c++);
else if(a == 'A') Q.push_back(c++); 
else if(b == 'L') for(...) Q.pop_front();
```
**心得**：强调合理利用STL避免重复造轮子，适合竞赛快速解题。

#### 2. mahao2002的数组模拟（★★★★★）
**关键亮点**：数组预分配+左右指针动态调整，避免STL开销，性能更优。  
**代码核心**：
```cpp
int a[10000010], l=5000000, r=5000000;
if(b=='L') a[--l] = ++now; // 左插入
else l += num; // 左删除
```
**技巧**：初始指针置于数组中间，避免越界，适用于高频插入/删除场景。

#### 3. fls233666的题解（★★★★☆）
**关键亮点**：详细讲解deque操作与适用场景，代码规范易扩展。  
**代码核心**：
```cpp
deque<int> d;
while(k--) d.pop_front(); // 批量删除
for(iterator it=d.begin(); it!=d.end(); it++) // 迭代器遍历
```

---

### 最优思路总结
- **数据结构选择**：优先使用`deque`实现，代码简洁且符合题意；数据量极大时考虑数组模拟。
- **数组模拟技巧**：预分配大数组，左右指针从中间向两端扩展，避免动态内存管理。
- **输入处理**：注意换行符读取（如`scanf("\n%c")`跳过空白符）。

---

### 同类题目推荐
1. **P1886 滑动窗口**（单调队列经典应用）  
2. **P1440 求m区间内的最小值**（双端队列维护区间极值）  
3. **P2032 扫描**（滑动窗口最大值，强化双端操作训练）

---
处理用时：43.77秒
# 题目信息

# [USACO16JAN] Subsequences Summing to Sevens S

## 题目描述

Farmer John 的 $N$ 头奶牛站成一排，这是它们时不时会做的事情。每头奶牛都有一个独特的整数 ID 编号，以便 Farmer John 能够区分它们。Farmer John 希望为一组连续的奶牛拍照，但由于童年时与数字 $1 \ldots 6$ 相关的创伤事件，他只希望拍摄一组奶牛，如果它们的 ID 加起来是 7 的倍数。

请帮助 Farmer John 确定他可以拍摄的最大奶牛组的大小。

## 说明/提示

在这个例子中，$5+1+6+2+14 = 28$。

## 样例 #1

### 输入

```
7
3
5
1
6
2
14
10```

### 输出

```
5```

# AI分析结果



### 综合分析与结论
本题核心在于利用前缀和模7的性质，通过余数相同的位置差寻找最长区间。最优解法是记录每个余数的首次和末次出现位置，时间复杂度O(n)。动态规划方法虽然可行，但空间消耗略高。关键难点在于处理余数为0的初始条件及区间端点计算。

---

### 精选题解列表

#### 1. 作者：人殇物已非（⭐⭐⭐⭐⭐）
**关键亮点**  
- 利用前缀和模7性质，证明余数相同的位置差即为合法区间  
- 预处理首次和末次出现位置，O(n)时间完成计算  
- 明确处理余数0的特殊情况（`first[0]=0`）  
**核心代码**  
```cpp
for(int i=0;i<=6;i++) 
    mx=max(last[i]-first[i],mx);
```

#### 2. 作者：「已注销」（⭐⭐⭐⭐⭐）
**关键亮点**  
- 边读入边处理前缀和，节省空间  
- 使用滚动数组记录余数位置，代码极简  
- 正确处理初始值（`l[0]=0`隐含处理从头开始的区间）  
**核心代码**  
```cpp
for(int i=0;i<7;++i)
    if(l[i]!=-1)ans=max(ans,r[i]-l[i]);
```

#### 3. 作者：Utilokasteinn（⭐⭐⭐⭐）
**关键亮点**  
- 动态规划思路清晰，定义`f[i][j]`为以i结尾的余数j的最长区间  
- 状态转移方程简洁，空间优化（仅保留当前状态）  
**核心代码**  
```cpp
for(int j=0;j<7;j++)
    if(f[i-1][j])
        f[i][(j+x)%7]=f[i-1][j]+1;
f[i][x%7]=max(f[i][x%7],1);
```

---

### 最优关键思路与技巧
1. **前缀和+模运算性质**：若两个前缀和模7余数相同，则区间和为7的倍数。  
2. **余数位置记录**：对每个余数记录首次和末次出现位置，差值为最大区间长度。  
3. **边界处理**：余数0的首次位置需初始化为0，以处理从头开始的合法区间。  

---

### 拓展与相似题目
1. **连续子数组和问题**：如[LeetCode 523. 连续的子数组和](https://leetcode.cn/problems/continuous-subarray-sum/)  
2. **模性质应用**：类似题目[洛谷 P3396 哈希冲突](https://www.luogu.com.cn/problem/P3396)  
3. **前缀和变种**：[洛谷 P1114 非常男女](https://www.luogu.com.cn/problem/P1114)  

---

### 推荐练习题
1. [洛谷 P3406 海底高铁](https://www.luogu.com.cn/problem/P3406)（前缀和应用）  
2. [洛谷 P3131 前缀和+模性质](https://www.luogu.com.cn/problem/P3131)（本题原题）  
3. [洛谷 P5638 光骓者的荣耀](https://www.luogu.com.cn/problem/P5638)（滑动窗口与前缀和）  

---

### 个人心得摘录
- **调试教训**：`听取MLE声一片`提到未初始化余数0的位置会导致无法识别从首元素开始的合法区间。  
- **优化经验**：`天有不测风云`尝试循环展开优化暴力法，反映暴力法在特殊数据下的局限性。  
- **思维顿悟**：`人殇物已非`强调余数相同的区间差定理，是此类问题的核心突破口。

---
处理用时：53.45秒
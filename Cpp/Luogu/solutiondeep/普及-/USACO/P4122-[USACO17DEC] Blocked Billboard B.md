# 题目信息

# [USACO17DEC] Blocked Billboard B

## 题目描述

在漫长的挤奶过程中，奶牛 Bessie 喜欢透过谷仓的窗户盯着街对面的两块巨大的矩形广告牌，上面分别写着“Farmer Alex 的美味苜蓿”和“Farmer Greg 的优质谷物”。广告牌上这两种奶牛饲料的图片对 Bessie 来说比她农场里的草看起来美味得多。

有一天，当 Bessie 正盯着窗外时，她惊讶地看到一辆巨大的矩形卡车停在街对面。卡车的侧面有一则广告，写着“Farmer Smith 的顶级牛排”，Bessie 不太理解这则广告，但她更担心的是卡车可能会挡住她最喜欢的两块广告牌的视线。

给定两块广告牌和卡车的位置，请计算两块广告牌仍然可见的总面积。卡车可能遮挡了其中一块、两块，或者没有遮挡任何一块广告牌。

## 说明/提示

在这个例子中，第一块广告牌有 $5$ 单位面积可见，第二块广告牌有 $12$ 单位面积可见。

题目来源：Brian Dean

## 样例 #1

### 输入

```
1 2 3 5
6 0 10 4
2 1 8 3```

### 输出

```
17```

# AI分析结果



### 综合分析与结论
本题核心是计算矩形覆盖后的剩余面积，各题解主要采用两种思路：**模拟标记法**和**数学容斥法**。前者通过二维数组标记覆盖区域，适合小数据但实现需注意坐标偏移；后者通过计算面积与重叠面积，时间复杂度更低。数学方法更优，模拟法易理解但需处理细节。

---

### 高星题解推荐

#### 1. litianqi2529298200（5星）
**亮点**：代码简洁高效，数学容斥思路清晰，O(1)时间复杂度。
```cpp
struct Rect{ int x1,y1,x2,y2; };
int intersect_area(Rect a, Rect b) {
    int x = max(0, min(a.x2, b.x2) - max(a.x1, b.x1));
    int y = max(0, min(a.y2, b.y2) - max(a.y1, b.y1));
    return x * y;
}
// 主计算：总广告面积 - 与卡车的重叠面积
cout << area(a)+area(b) - intersect_area(a,t)-intersect_area(b,t);
```

#### 2. Alex_Wei（4星）
**亮点**：紧凑的模拟实现，利用循环统一处理前两个矩形。
```cpp
int m[2200][2200], ans;
for (int x=1; x<4; x++) {
    // 输入坐标并遍历覆盖区域
    if (x<3) m[y][z]++, ans++;
    if (m[y][z] && x==3) ans--;
}
```

#### 3. lizehan888（4星）
**亮点**：数学方法结合边界检查，避免无效重叠计算。
```cpp
minus_s1 = (max(x1,x[1])<=min(x2,x[2])) ? 计算面积 : 0;
minus_s2 = (max(x1,x[3])<=min(x2,x[4])) ? 计算面积 : 0;
ans = s1 + s2 - minus_s1 - minus_s2;
```

---

### 关键思路与技巧
1. **数学容斥法**：计算原始面积后，减去与遮挡矩形的相交面积。需注意矩形不相交时面积为0。
2. **坐标处理**：模拟法中通过+1000偏移处理负坐标，遍历时注意左闭右开边界。
3. **相交判断**：两矩形相交的条件为`max(a.left, b.left) < min(a.right, b.right)`，类似处理Y轴。

---

### 拓展与相似题目
1. **矩形覆盖问题**：P1884 [USACO12FEB] Overplanting S（更大数据范围需离散化）
2. **面积并集**：P1496 火烧赤壁（区间合并）
3. **复杂覆盖分析**：P3406 海底高铁（标记与统计结合）

---

### 调试心得摘录
- **ShaeKnight**：因未处理坐标-1导致错误，强调正确理解“点”与“格子”的区别。
- **jujujujuruo**：WA后发现未判断矩形是否相交，补充条件后AC。体现边界检查的重要性。

---
处理用时：48.16秒
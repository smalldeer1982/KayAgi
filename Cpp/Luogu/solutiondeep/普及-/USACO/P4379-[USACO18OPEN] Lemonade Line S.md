# 题目信息

# [USACO18OPEN] Lemonade Line S

## 题目描述

这是农场上一个炎热的夏日，Farmer John 要给他的 $N$ 头奶牛发柠檬汽水了！所有的 $N$ 头奶牛（编号为 $1 \dots N$）都喜欢柠檬汽水，只是有些喜欢的程度更高一些。具体来说，奶牛 $i$ 为了获得柠檬汽水，最多愿意排在 $w_i$ 头奶牛之后。现在所有的 $N$ 头奶牛都在田里，但只要 Farmer John 敲响牛铃，这些奶牛就会立刻赶到柠檬汽水站。她们会在 Farmer John 开始分发柠檬汽水之前到达，但没有两头奶牛会在同一时刻到达。此外，当奶牛 $i$ 到达时，当且仅当队伍中至多有 $w_i$ 头奶牛时，她才会加入队伍。

Farmer John 想要提前准备一定量的柠檬汽水，但他不想浪费。排队的奶牛数量可能取决于她们的到达顺序。请帮助他求出在所有可能的到达顺序下，最小的可能排队奶牛数量。


## 说明/提示

在这个情况下，可能最后仅有三头奶牛在队伍中（这也是最小可能值）。假设 $w = 7$ 和 $w = 400$ 的奶牛先到并等在队伍中。然后 $w = 1$ 的奶牛到达并且会离开，因为已经有 $2$ 头奶牛在队伍中了。接着 $w = 2$ 的两头奶牛到达，一头留下排队，另一头离开。

供题：Dhruv Rohatgi

## 样例 #1

### 输入

```
5
7 1 400 2 2```

### 输出

```
3
```

# AI分析结果



### 综合分析与结论
本题核心是贪心策略，所有题解均采用**从大到小排序w后模拟奶牛入队**的思路。关键点在于：当排序后第i个元素无法入队时（w[i] < 已入队数量），后续所有元素均无法入队。绝大多数题解能正确实现该思路，主要差异在于代码简洁性、边界处理与实现技巧。

---

### 高评分题解推荐（≥4星）

#### 1. 作者：btc001（★★★★★）
**关键亮点**：代码最精简，逻辑最清晰。从后向前遍历排序数组，直接统计当前队伍长度。  
**实现思想**：
```cpp
sort(a+1, a+n+1); // 升序排序
for(int i=n; i>=1; i--) // 从后向前遍历
    if(a[i] >= sum) sum++; else break;
```
**优势**：无需自定义排序函数，利用升序排序反向遍历等效于降序排序，减少代码量。

#### 2. 作者：fls233666（★★★★☆）
**关键亮点**：详细注释与逻辑推导，使用标准库降序排序。  
**核心代码**：
```cpp
sort(w, w+n, greater<int>()); // 显式降序排序
for(int i=0; i<n; i++) 
    if(w[i] < l) break; else l++;
```
**个人心得**：特别强调降序排序的必要性，指出小根堆会导致错误结果，帮助理解贪心策略。

#### 3. 作者：hhhyyyfff（★★★★☆）
**关键亮点**：快速终止循环的优化，直接输出首个无法入队的索引i。  
**代码亮点**：
```cpp
sort(a, a+N, cmp); // 自定义降序排序
for(int i=0; i<N; i++)
    if(a[i] < i) { printf("%d\n", i); return 0; }
```
**优势**：当发现a[i]<i时直接输出i，提前终止程序，减少不必要的遍历。

---

### 最优思路总结
**关键步骤**：
1. **降序排序**：将w数组从大到小排序，确保容忍度高的奶牛优先入队。
2. **线性遍历**：维护当前队伍长度，当发现w[i] < 当前长度时终止循环。
3. **数学关系**：排序后第k个元素需满足w[k] ≥ k，否则后续元素必然不满足条件。

**实现技巧**：
- 利用STL的`greater<int>()`或反向遍历升序数组代替自定义排序
- 在循环中直接判断并break，避免完全遍历整个数组

---

### 拓展与相似题目
**同类问题套路**：需要将元素按特定顺序排列后贪心求解极值，典型如：
- 活动选择问题（按结束时间排序）
- 背包问题的部分贪心策略（按价值密度排序）
- 区间调度问题（按右端点排序）

**推荐练习**：
1. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)（贪心+排序）
2. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)（双指针贪心）
3. [P1803 凌乱的yyy](https://www.luogu.com.cn/problem/P1803)（区间调度）

---
处理用时：44.24秒
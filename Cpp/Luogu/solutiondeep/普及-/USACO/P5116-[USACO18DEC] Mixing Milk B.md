# 题目信息

# [USACO18DEC] Mixing Milk B

## 题目描述

农业，尤其是生产牛奶，是一个竞争激烈的行业。Farmer John 发现如果他不在牛奶生产工艺上有所创新，他的乳制品生意可能就会受到重创！

幸运的是，Farmer John 想出了一个好主意。他的三头获奖的乳牛，Bessie、Elsie 和 Mildred，各自产奶的口味有些许不同，他打算混合这三种牛奶调制出完美的口味。

为了混合这三种不同的牛奶，他拿来三个桶，其中分别装有三头奶牛所产的奶。这些桶可能有不同的容积，也可能并没有完全装满。然后他将桶 $1$ 的牛奶倒入桶 $2$，然后将桶 $2$ 中的牛奶倒入桶 $3$，然后将桶 $3$ 中的牛奶倒入桶 $1$，然后再将桶 $1$ 的牛奶倒入桶 $2$，如此周期性地操作，共计进行 $100$ 次（所以第 $100$ 次操作会是桶 $1$ 倒入桶 $2$）。当 Farmer John 将桶 $a$ 中的牛奶倒入桶 $b$ 时，他会倒出尽可能多的牛奶，直到桶 $a$ 被倒空或是桶 $b$ 被倒满。

请告诉 Farmer John 当他倒了 $100$ 次之后每个桶里将会有多少牛奶。



## 说明/提示

在这个例子中，每倒一次之后每个桶里的牛奶量如下：

0. 初始状态：3  4  5
1. 桶 1->2：0  7  5
2. 桶 2->3：0  0  12
3. 桶 3->1：10 0  2
4. 桶 1->2：0  10 2
5. 桶 2->3：0  0  12

（之后最后三个状态循环出现……）

## 样例 #1

### 输入

```
10 3
11 4
12 5```

### 输出

```
0
10
2```

# AI分析结果



### 综合分析与结论
本题考察对周期性模拟过程的准确实现，关键点在于正确计算每次倾倒量并处理桶的循环顺序。所有题解均采用直接模拟，但实现方式差异较大，主要区别在于代码结构优化与循环处理方式。

### 高分题解推荐
#### 1. 作者：Alex_Wei（4.5星）
**关键亮点**  
- 最简洁清晰的循环结构，使用 `(x-1)%3+1` 处理桶的周期循环  
- 变量命名直观（c=容量，m=当前牛奶量）  
- 关键操作浓缩为 `min(c[s]-m[s], m[f])` 一行  

**核心代码**  
```cpp
for(int x=1;x<=100;x++){
    int f = (x-1)%3+1, s = f%3+1; // 自动处理桶3→1的转换
    int mi = min(c[s]-m[s], m[f]);
    m[f] -= mi; m[s] += mi;
}
```

#### 2. 作者：damage（4星）
**关键亮点**  
- 将倒牛奶操作封装为独立函数 `pour()`  
- 使用 `i%3` 与 `(i+1)%3` 处理桶编号  
- 通过函数参数传递桶对象，代码模块化程度高  

**核心代码**  
```cpp
void pour(int from, int to) {
    int delta = min(m[from], c[to]-m[to]);
    m[from] -= delta;
    m[to] += delta;
}
// 调用方式
for(int i=0; i<100; i++) pour(i%3, (i+1)%3);
```

#### 3. 作者：TAFE_ZZR（4星）
**关键亮点**  
- 引入结构体封装桶的属性（容量、当前量）  
- 函数参数使用引用实现直接修改  
- 通过 `i%3` 分情况调用不同操作  

**代码亮点**  
```cpp
struct barrel { int v, n; }; // v=容量, n=当前量
void milk(barrel &x, barrel &y) {
    if(x.n <= y.v-y.n) y.n += x.n, x.n=0;
    else x.n -= y.v-y.n, y.n = y.v;
}
// 调用示例
milk(a, b); // 对应1->2操作
```

### 关键思路与技巧总结
1. **循环周期处理**：通过 `x%3` 或 `(x-1)%3+1` 控制1→2→3→1的循环顺序  
2. **转移量计算**：`min(来源桶量, 目标桶剩余空间)` 是核心计算式  
3. **代码封装**：将倒牛奶操作封装为函数/宏，提高代码复用性  
4. **结构优化**：使用数组存储桶数据，避免重复变量声明  

### 拓展训练推荐
1. [P1215 Mother's Milk](https://www.luogu.com.cn/problem/P1215) - 同类倒牛奶问题的DFS解法  
2. [P1990 覆盖墙壁](https://www.luogu.com.cn/problem/P1990) - 状态转移型模拟  
3. [P1042 乒乓球](https://www.luogu.com.cn/problem/P1042) - 规则性过程模拟  

### 题解心得摘录
- **Alex_Wei**：通过 `(x-1)%3+1` 的巧妙设计避免了繁琐的条件判断  
- **Starlight237**：提出"思维复杂度最低"理念，采用宏展开替代循环  
- **damage**：在注释中质疑题目难度定位，反映对题目本质的深入理解  

---

**最佳实践建议**：优先采用Alex_Wei的数组循环法，在保证可读性的前提下，适当参考damage的函数封装思想提升代码质量。避免过早优化（如Guess00的4次循环假设）可能引入的逻辑错误。

---
处理用时：66.39秒
# 题目信息

# [USACO15DEC] Breed Counting S

## 题目描述

Farmer John 的 $N$ 头奶牛，从左到右编号为 $1 \ldots N$，排成一队。

所有牛都可以分为三个品种，每头牛都有一个品种编号（只能为 $1,2,3$ 中的一个）。FJ 有 $Q$ 个询问，每个询问希望求出某个区间内每个品种奶牛的数量。

## 样例 #1

### 输入

```
6 3
2
1
1
3
2
1
1 6
3 3
2 4```

### 输出

```
3 2 1
1 0 0
2 0 1```

# AI分析结果



### 综合分析与结论
本题考察区间统计问题，核心解法为前缀和。所有题解均认同前缀和的高效性，时间复杂度为O(N+Q)。线段树解法虽正确但复杂度更高，不适用于静态查询场景。

### 精选题解
#### 1. 作者：LongDouble (⭐⭐⭐⭐⭐)
**关键亮点**  
- 代码简洁高效，直接维护三个前缀和数组  
- 正确使用`l-1`处理区间左端点  
- 使用`int`类型避免空间浪费，代码可读性极佳  
**核心代码**  
```cpp
int s1[100010], s2[100010], s3[100010];
for (int i = 1; i <= n; i++) {
    int a; scanf("%d", &a);
    s1[i] = s1[i-1] + (a==1);
    s2[i] = s2[i-1] + (a==2);
    s3[i] = s3[i-1] + (a==3);
}
// 查询时直接输出 sX[r]-sX[l-1]
```

#### 2. 作者：Skies (⭐⭐⭐⭐⭐)
**关键亮点**  
- 预处理与统计合并到同一循环，极致简洁  
- 利用条件表达式直接更新前缀和  
**代码亮点**  
```cpp
p1[i] += p1[i-1] + (a[i]==1);  // 三品种同步处理
```

#### 3. 作者：TRZ_2007 (⭐⭐⭐⭐)
**关键亮点**  
- 二维数组存储更易扩展（如多品种场景）  
- 模板化输入优化提升读取效率  
**心得分享**  
> "前缀和的优势在于初始化Θ(n)后查询Θ(1)，对无修改的区间统计是绝配"

### 关键思路总结
**核心技巧**  
- 为每个品种独立建立前缀和数组，利用差值计算区间和  
- 预处理时通过条件判断动态更新各品种计数  
**优化点**  
- 避免冗余变量（如用`a==1`直接作为数值增量）  
- 统一处理三个品种的前缀和更新，减少代码重复  

### 拓展与举一反三
**同类问题**  
- 多属性区间统计（如同时统计奇偶数、颜色分类等）  
- 二维前缀和（P1719 最大加权矩形）  
- 带权值前缀和（如P3406 分段计费问题）  

**推荐练习题**  
1. P3138 [USACO16FEB]Load Balancing S（二维前缀和）  
2. P3406 海底高铁（区间覆盖统计）  
3. P3662 [USACO17FEB]Why Did the Cow Cross the Road II S（滑动窗口+前缀和）

---
处理用时：59.20秒
# 题目信息

# [USACO07OCT] Super Paintball G

## 题目描述

奶牛们最近从玩具商那里，买来了一套仿真版彩弹游戏设备（类似于真人 CS）。Bessie 把她们玩游戏的草坪划分成了 $N \times N$ 的矩阵（$1 \leq N \leq 100$），同时他算出了她的 $K$ 个对手在草地上的位置（$1 \leq K \leq 10^5$），现在你需要帮 Bessie 算些东西。

在这个游戏中，奶牛们用一把枪向八个方向中的任意一个方向射出子弹，这八个方向分别是：正北，正南，正东，正西，东北，东南，西北，西南（东北指北偏东 $45^\circ$，东南，西北，西南同理）。

Bessie 想要你算出，有多少个位置可以让她射到所有对手。特别地，Bessie 可以和她的某一个对手站在同一格子，这时候她可以射到和她同一格子的对手。

## 说明/提示

可选的位置有：$(2,1),(2,3),(3,2),(4,1),(4,3)$。

## 样例 #1

### 输入

```
4 3
2 1
2 3
4 1```

### 输出

```
5```

# AI分析结果



### 综合分析与结论
本题需统计能覆盖所有敌人的位置，核心在于高效处理八个方向的覆盖。各题解主要思路分为两类：**预处理行列与对角线的计数**（O(N²+K)）和**逐敌标记覆盖区域**（O(KN)）。前者通过数学优化避免重复计算，时间复杂度最优；后者直观但常数较大。最优解法利用四个数组统计行、列、对角线，通过容斥减去重复计数。

---

### 高星题解推荐

#### 1. do_while_false（5星）
**关键亮点**：  
- 使用行、列、对角线数组统计，时间复杂度O(N²+K)。  
- 容斥处理重复计数（-3倍当前点敌人），思路清晰。  
**核心代码**：  
```cpp
int row[maxn], col[maxn], lt[maxn], rt[maxn], map1[maxn][maxn];
// 预处理
for(int i=1;i<=k;i++) {
    row[x]++; col[y]++; lt[x-y+n]++; rt[x+y-1]++;
    map1[x][y]++;
}
// 统计答案
if(row[i]+col[j]+lt[i-j+n]+rt[i+j-1]-3*map1[i][j] == k) ans++;
```

#### 2. Mine_King（5星）
**关键亮点**：  
- 类似行列与对角线统计，使用差值与和作为索引，处理更直观。  
- 代码注释详细，解释容斥原理（减3倍重复）。  
**核心代码**：  
```cpp
int h[105], l[105], zx[205], yx[205], f[105][105];
// 预处理
h[x]++; l[y]++; zx[x-y+100]++; yx[x+y]++;
f[x][y]++;
// 统计答案
if(h[i]+l[j]+zx[i-j+100]+yx[i+j]-3*f[i][j] >=k) ans++;
```

#### 3. BotDand（4星）
**关键亮点**：  
- 直接标记所有覆盖位置，逻辑直观易理解。  
- 处理重复计数（a[x][y]-=3），适合小规模数据。  
**核心代码**：  
```cpp
void work() {
    // 标记行、列、对角线
    a[x][y] -=3; // 容斥处理
}
for(int i=1;i<=n;i++) 
    if(a[i][j]==k) ans++;
```

---

### 最优思路总结
**关键技巧**：  
1. **方向分解**：将八个方向分解为行、列、两对角线，用数组统计每个方向的总敌人数。  
2. **容斥原理**：对所在点的敌人重复计数（4次）减去3次，确保正确性。  
3. **预处理+O(1)查询**：提前计算各方向敌人数，使每个点的判断仅需O(1)。  

---

### 举一反三
**类似题目推荐**：  
1. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219)（对角线冲突处理）  
2. [P2181 对角线](https://www.luogu.com.cn/problem/P2181)（数学推导与组合）  
3. [P2280 激光炸弹](https://www.luogu.com.cn/problem/P2280)（二维前缀和优化）  

**个人心得摘录**：  
- "注意当Bessie与敌人同格时，会被四个方向各算一次，需减3次"（容斥易错点）。  
- "先分解方向再统计，避免暴力枚举"（优化思维）。

---
处理用时：89.89秒
# 题目信息

# [USACO22JAN] Non-Transitive Dice B

## 题目描述

为了消磨牛棚里的时光，奶牛们喜欢玩简单的骰子游戏。其中一种游戏使用两个骰子 X 和 Y 进行。两个骰子均被投掷，获胜的骰子是显示的数字较大的骰子。如果两者显示相同的数字，则重新投掷（只要持续打平，骰子可能会被重新投掷多次）。我们称骰子 X 击败骰子 Y，如果骰子 X 比骰子 Y 更有可能赢得这局游戏。

考虑以下的 $4$ 面骰子：

骰子 A 在各面上有数字 $4$，$5$，$6$ 和 $7$。

骰子 B 在各面上有数字 $2$，$4$，$5$ 和 $10$。

骰子 C 在各面上有数字 $1$，$4$，$8$ 和 $9$。

这些骰子满足一个相当奇妙的性质：A 击败 B，B 击败 C，并且 C 也击败 A。特别地，三个骰子都不是「最佳的」，可以击败其他两个。在这种情况下，当没有两个骰子打平，也没有一个骰子是最佳的，我们称这三个骰子的集合为「非传递的」。在非传递的三个骰子的集合中，每个骰子击败一个其他骰子，并输给另一个其他骰子。

给定两个 $4$ 面骰子 A 和 B 各面上的数字，请帮助奶牛们求出是否有方法为第三个骰子 C 的各面分配数字，使得这个骰子的集合是非传递的。所有骰子面上的数字必须是 $1$ 到 $10$ 的整数。

## 说明/提示

**【样例解释】**

第一个子测试用例对应题目中的例子。在第二个子测试用例中，不存在骰子 C 可以使得这个骰子集合是非传递的。同理第三个子测试用例的答案也是 `no`。



## 样例 #1

### 输入

```
3
4 5 6 7 2 4 5 10
2 2 2 2 1 1 1 1
1 1 1 1 2 2 2 2```

### 输出

```
yes
no
no```

# AI分析结果



### 综合分析与结论
本题要求判断是否存在骰子 C 使 A、B、C 形成非传递环。所有题解均采用暴力枚举 C 的四个面数值（范围为 1~10），并验证胜负关系。由于骰子面数少（4 面）且数值范围小（1~10），暴力枚举的复杂度 O(10^4) 完全可行。关键优化点包括：避免重复枚举（如递增排列 C 的面）、预处理 A/B 胜负关系简化判断逻辑。

### 高星题解推荐
#### 1. 清小秋ovo（4 星）
- **关键亮点**：通过四层循环递增枚举 C 的面（`c[1]<=c[2]<=c[3]<=c[4]`），避免重复计算；代码结构清晰，直接验证两种可能的胜负环。
- **核心代码**：
  ```cpp
  void solve(){
      for(c[0]=1;c[0]<=10;c[0]++)
          for(c[1]=c[0];c[1]<=10;c[1]++)
              for(c[2]=c[1];c[2]<=10;c[2]++)
                  for(c[3]=c[2];c[3]<=10;c[3]++)
                      if(check()){ puts("yes"); return; }
      puts("no");
  }
  ```

#### 2. ztlh（4 星）
- **关键亮点**：预处理 A/B 胜负关系，确保 A 击败 B 后只需验证 `B 输给 C 且 C 输给 A`；采用递增枚举优化。
- **核心代码**：
  ```cpp
  for(c[1]=1;c[1]<=10;c[1]++)
      for(c[2]=c[1];c[2]<=10;c[2]++)
          // ... 类似递增条件
          if(w1<l1 && w2>l2){ // B 输 C，C 输 A
              printf("yes"); return;
          }
  ```

#### 3. Ginger_he（4 星）
- **关键亮点**：DFS 生成单调不降的 C 序列，减少无效枚举；利用位运算快速判断胜负环。
- **核心代码**：
  ```cpp
  void dfs(int x,int y){
      if(ans) return;
      if(x==5){
          int res=k + cmp(b,c) + cmp(c,a);
          ans |= (res==3 || res==-3); // 判断胜负环
          return;
      }
      for(int i=y; i<=10; i++) // 保证递增
          dfs(x+1, c[x]=i);
  }
  ```

### 关键思路与技巧总结
1. **递增枚举优化**：将 C 的四个面按非降序排列，减少重复枚举。
2. **胜负关系预处理**：确保 A 击败 B（否则交换），只需验证一种环状关系。
3. **高效胜负判断**：通过双循环统计胜负次数，直接比较大小。

### 相似题目推荐
1. [P1706 全排列问题](https://www.luogu.com.cn/problem/P1706)  
   （暴力枚举所有排列）
2. [P1036 选数](https://www.luogu.com.cn/problem/P1036)  
   （组合枚举 + 质数判断）
3. [P1618 三连击（升级版）](https://www.luogu.com.cn/problem/P1618)  
   （暴力枚举数字组合并验证比例）

### 题解个人心得摘录
- **Ginger_he**：将 C 的面按单调不降排列，减少枚举量。  
  *“由于 1,2,4,5 和 1,5,2,4 是一样的，所以把 C 当作单调不降序列来枚举”*
- **ztlh**：交换 A/B 使 A 必胜 B，简化后续判断。  
  *“若 A 输给 B，则交换两个数组，随后四重循环暴力搜索”*

---
处理用时：58.58秒
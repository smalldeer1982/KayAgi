# 题目信息

# [USACO22FEB]  Photoshoot 2 B

## 题目描述

在一个熟悉的情景中，Farmer John 正在为他的 $N$ 头奶牛（$1 \leq N \leq 10^5$，编号为 $1 \cdots N$）排队拍照。  
初始时，奶牛从左到右的排列顺序为 $a_1, a_2, \cdots , a_N$。Farmer John 的目标是将奶牛从左到右排列成 $b_1, \cdots , b_N$ 的顺序。为了实现这一目标，他可以对排列顺序进行一系列修改。每次修改包括选择一头奶牛并将其向左移动若干位置。

请计算 Farmer John 将奶牛排列成目标顺序所需的最少修改次数。

## 说明/提示

- 测试用例 3-6 满足 $N \leq 100$。
- 测试用例 7-10 满足 $N \leq 5000$。
- 测试用例 11-14 没有额外限制。

## 样例 #1

### 输入

```
5
1 2 3 4 5
1 2 3 4 5```

### 输出

```
0```

## 样例 #2

### 输入

```
5
5 1 3 2 4
4 5 2 1 3```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
题目本质是求通过左移操作将数组a转换为b的最少次数。各题解核心思路均围绕建立元素在目标序列中的位置映射，并通过统计破坏递增顺序的元素数目来求解。最优解法时间复杂度O(n)，空间O(n)，巧妙地将问题转化为最长递增子序列的变体。

---

### 精选题解及评分

#### 1. 作者：CANTORSORT（⭐️⭐️⭐️⭐️⭐️）
**关键亮点**  
- 将问题转化为位置数组后，通过维护最大值统计需移动次数  
- 代码简洁高效，时间复杂度O(n)，空间O(n)  
**核心代码**  
```cpp
for(int i=1;i<=n;i++) a[i]=pos[a[i]];
int maxn=0, ans=0;
for(int i=1;i<=n;i++) {
    if(a[i]>maxn) maxn=a[i];
    else ans++;
}
```

#### 2. 作者：cfkk（⭐️⭐️⭐️⭐️）
**关键亮点**  
- 使用相同的位置映射思想，逻辑清晰  
- 变量命名可读性略逊，但算法核心与CANTORSORT一致  
**核心代码**  
```cpp
for(int i=1;i<=n;i++) kep[i]=dep[a[i]];
int cnt=0, x=0;
for(int i=1;i<=n;i++) {
    x = max(x, kep[i]);
    if(x > kep[i]) cnt++;
}
```

#### 3. 作者：Zirnc（⭐️⭐️⭐️⭐️）
**关键亮点**  
- 通过修正值(fix)模拟实际移动过程，思路新颖  
- 使用标记数组避免重复处理，时间复杂度O(n)  
**个人心得**  
- 通过`while`循环处理连续已标记元素，强调数组不变性  
**核心代码**  
```cpp
int fix=0, ans=0;
for(int i=0; i<n; i++) {
    while(flag[a[i-fix]]) fix--;
    if(b[i] != a[i-fix]) {
        flag[b[i]] = 1;
        fix++;
        ans++;
    }
}
```

---

### 最优关键思路
1. **位置映射**：建立元素在目标序列中的位置数组`pos`，将原数组转换为位置序列。
2. **贪心统计**：遍历转换后的数组，维护当前最大值。若当前元素小于最大值，说明需要移动，统计次数。

---

### 相似题目推荐
1. [P1439 最长公共子序列](https://www.luogu.com.cn/problem/P1439)（位置映射+LIS）  
2. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908)（逆序对统计）  
3. [P2782 友好城市](https://www.luogu.com.cn/problem/P2782)（排序后LIS应用）

---
处理用时：89.84秒
# 题目信息

# [USACO22DEC] Cow College B

## 题目描述

Farmer John 计划为奶牛们新开办一所大学！ 

![](https://cdn.luogu.com.cn/upload/image_hosting/wiy5l6d6.png)

有 $N(1 \le N \le 10^5)$ 头奶牛可能会入学。每头奶牛最多愿意支付 $c_i$ 的学费 $(1 \le c_i \le 10^6)$。 Farmer John 可以设定所有奶牛入学需要支付的学费。如果这笔学费大于一头奶牛愿意支付的最高金额，那么这头奶牛就不会入学。Farmer John 想赚尽可能多的钱，从而可以给他的讲师提供一笔可观的工资。请求出他能赚到的钱的数量，以及此时应当收取多少学费。 

## 说明/提示

### 样例 1 解释

如果 Farmer John 收费 $4$，那么 $3$ 头奶牛将会入学，从而使他赚取 $3 \times 4=12$ 的金额。

### 测试点性质

- 测试点 $2-4$ 满足 $c_i \le 1000$。
- 测试点 $5-8$ 满足 $N \le 5000$。
- 测试点 $9-12$ 没有额外限制。 

## 样例 #1

### 输入

```
4
1 6 4 6```

### 输出

```
12 4```

# AI分析结果



### 综合分析与结论
本题核心在于确定最优学费必为某头奶牛的支付上限，通过排序后线性遍历确定每个价格对应的付费奶牛数。最优解法时间复杂度为 $O(n \log n)$，基于排序后维护剩余奶牛数。关键点包括排序处理、避免重复计算及正确维护数目。

---

### 精选题解

#### 1. NightStriker（5星）
**关键亮点**：  
- 思路清晰，利用排序后特性线性计算每个候选值。  
- 代码简洁高效，维护剩余奶牛数避免重复计算。  
**个人心得**：  
- 强调 `long long` 的必要性，避免溢出。  
- 通过排序后递减维护数目，确保正确性。  

**核心代码**：  
```cpp
sort(a+1,a+n+1);
int cow = n;
for (int i = 1; i<=n; i++) {
    if (a[i]*cow>ans) {
        ans = a[i]*cow;
        cnt = a[i];
    }
    cow--; // 后续元素数目递减
}
```

#### 2. Ray1（4星）  
**关键亮点**：  
- 直接排序后倒序处理，计算 `c[i] * (n-i+1)`，直观易懂。  
- 代码极简，省略中间变量维护。  

**核心代码**：  
```cpp
sort(c+1,c+1+n);
for(int i=1;i<=n;i++){
    cnt=c[i]*(n-i+1); // 当前元素及之后的数目
    if(cnt>ans) ans=cnt, bns=c[i];
}
```

#### 3. what_can_I_do（4星）  
**关键亮点**：  
- 桶处理后缀和，避免排序，适合值域较小场景。  
- 正序枚举保证最小学费选择。  

**核心代码**：  
```cpp
for(int i = maxd; i >=1; i--) t[i] += t[i+1]; // 后缀和处理数目
for(int i=1; i<=maxd; i++) 
    if(t[i]*i > ans) ans = t[i]*i, k = i;
```

---

### 关键思路总结
1. **排序后线性遍历**：最优学费必为某 `c_i`，排序后每个元素对应可支付的奶牛数为剩余元素数量。  
2. **数目维护技巧**：通过排序后索引或后缀和快速计算当前价格对应的付费数目。  
3. **避免重复计算**：利用排序或桶结构，确保每个候选值处理时间复杂度为 $O(1)$。  

---

### 拓展练习
1. **[P2637 第一次，第二次，成交](https://www.luogu.com.cn/problem/P2637)**  
   - 类似本题，求最优定价模型。  
2. **[P2678 跳石头](https://www.luogu.com.cn/problem/P2678)**  
   - 利用排序和二分思想确定最优解。  
3. **[P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102)**  
   - 通过排序或哈希处理配对问题，强化线性遍历技巧。

---
处理用时：70.43秒
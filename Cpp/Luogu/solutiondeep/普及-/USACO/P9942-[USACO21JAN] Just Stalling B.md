# 题目信息

# [USACO21JAN] Just Stalling B

## 题目描述

Farmer John 有 $N$ 头奶牛（$1\le N\le 20$），高度为 $a_1\ldots a_N$。他的牛栏有 $N$ 个牛棚，高度限制分别为 $b_1\ldots b_N$（例如，如果 $b_5=17$，那么一头高度不超过 $17$ 的奶牛可以住在牛棚 $5$ 里）。Farmer John 有多少种不同的方式安排他的奶牛，使得每头奶牛均住在不同的牛棚里，并且使得每个牛棚的高度限制均得到满足？ 

## 说明/提示

### 样例解释 1

在这个例子中，我们不能将第三头奶牛安排到第一个牛棚里，因为 $3=a_3>b_1=2$。类似地，我们不能将第四头奶牛安排到第一或第三个牛棚里。一种符合高度限制的安排方式为将奶牛 1 安排到牛棚 1，奶牛 2 安排到牛棚 2，奶牛 3 安排到牛棚 3，奶牛 4 安排到牛棚 4。

### 测试点性质

- 测试点 $1-5$ 满足 $N\le 8$。
- 测试点 $6-12$ 没有额外限制。

## 样例 #1

### 输入

```
4
1 2 3 4
2 4 3 4```

### 输出

```
8```

# AI分析结果



### 综合分析与结论
本题核心是贪心策略，通过排序将问题转化为可计算的乘法模型。关键思路有两种：
1. **降序贪心**：将奶牛降序排序后，每头牛的可用牛棚数为总满足条件的牛棚数减去已处理的牛数，时间复杂度O(n²)。
2. **指针优化**：将牛和牛棚升序排列后，用指针维护当前最大可用牛棚，实现O(n)计算。

### 高星题解推荐
#### 题解一（OIerWu_829）⭐️⭐️⭐️⭐️⭐️
**关键亮点**：代码简洁，思路清晰，通过降序排列奶牛并直接统计可用牛棚数，巧妙利用乘法原理。
```cpp
sort(a + 1, a + 1 + n, greater<int>());
long long ans = 1;
for (int i = 1; i <= n; i++) {
    int cnt = 0;
    for (int j = 1; j <= n; j++) 
        if (b[j] >= a[i]) cnt++;
    ans *= (cnt - (i - 1));
}
```

#### 题解四（TruchyR）⭐️⭐️⭐️⭐️⭐️
**关键亮点**：高效指针法，排序后线性扫描，时间复杂度O(n log n)。
```cpp
sort(a+1, a+1+n); sort(b+1, b+1+n);
int p = 0;
for (int i=1; i<=n; i++) {
    while (a[p+1] <= b[i] && p < n) p++;
    res *= (p - i + 1);
}
```

#### 题解二（juruo_zhanshen）⭐️⭐️⭐️⭐️
**关键亮点**：双降序排列后统计可用牛棚，标记策略正确但代码存在潜在理解难点。
```cpp
sort(a, b降序);
for (int i=1; i<=n; i++) {
    int cnt = 0;
    for (int j=1; j<=n; j++) 
        if (!flag[j] && b[j] >= a[i]) cnt++;
    ans *= cnt;
    // 标记第一个可用牛棚
}
```

### 最优技巧总结
1. **排序贪心**：处理匹配问题时，优先处理约束更强的元素（如更高的奶牛）。
2. **指针维护**：在双升序排列下，通过指针动态维护可用资源，优化时间复杂度。

### 拓展与举一反三
类似问题如任务调度、区间匹配等，均可通过排序+贪心或指针法解决。例如：
- **任务与工人匹配**：将任务难度和工人能力排序，用指针维护可用工人。
- **区间安排**：按结束时间排序，贪心选择最早结束的区间。

### 推荐题目
1. [P2887 USACO07NOV 防晒霜](https://www.luogu.com.cn/problem/P2887)
2. [P1842 USACO05NOV 奶牛玩杂技](https://www.luogu.com.cn/problem/P1842)
3. [P1102 牛式](https://www.luogu.com.cn/problem/P1102)

### 个人心得摘录
- **题解四作者**：通过指针维护可用牛棚，避免重复计算，实现高效线性处理。
- **调试经验**：在贪心问题中，排序方向直接影响后续处理逻辑，需仔细验证。

---
处理用时：434.68秒
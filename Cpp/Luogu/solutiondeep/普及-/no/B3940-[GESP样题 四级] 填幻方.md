# 题目信息

# [GESP样题 四级] 填幻方

## 题目描述

在一个 $N\times N$ 的正方形网格中，每个格子分别填上从 1 到 $N×N$ 的正整数，使得正方形中任一行、任一列及对角线的几个数之和都相等，则这种正方形图案就称为“幻方”（输出样例中展示了一个 $3×3$ 的幻方）。我国古代称为“河图”、“洛书”，又叫“纵横图”。

幻方看似神奇，但当 $N$ 为奇数时有很方便的填法：
1. 一开始正方形中没有填任何数字。首先，在第一行的正中央填上 $1$。
2. 从上次填数字的位置向上移动一格，如果已经在第一行，则移到同一列的最后一行；再向右移动一格，如果已经在最右一列，则移动至同一行的第一列。如果移动后的位置没有填数字，则把上次填写的数字的下一个数字填到这个位置。
3. 如果第 2 步填写失败，则从上次填数字的位置向下移动一格，如果已经在最下一行，则移到同一列的第一行。这个位置一定是空的（这可太神奇了！）。把上次填写的数字的下一个数字填到这个位置。
4. 重复 2、3 步骤，直到所有格子都被填满，幻方就完成了！

快来编写一个程序，按上述规则，制作一个 $N\times N$ 的幻方吧。

## 样例 #1

### 输入

```
3```

### 输出

```
8 1 6
3 5 7
4 9 2```

# AI分析结果

### 算法分类
模拟

### 综合分析与结论
题目要求按照特定规则填充幻方，核心逻辑是通过模拟步骤逐步填充数字。所有题解均采用了模拟的方法，按照题目描述的步骤进行实现。题解之间的主要区别在于代码的可读性、边界条件的处理以及变量的命名和初始化方式。以下是对各题解的简要评分和关键亮点的总结。

### 所选题解
1. **作者：_Deer_Peach_ (赞：22)**
   - **星级：5星**
   - **关键亮点：**
     - 代码简洁明了，逻辑清晰。
     - 使用模运算处理边界条件，避免了复杂的条件判断。
     - 变量命名合理，易于理解。
   - **核心代码：**
     ```cpp
     int tx=(x+n-1)%n;
     int ty=(y+1)%n;
     if(a[tx][ty]==0){
         a[tx][ty]=cnt;
     }else{
         tx=(x+1)%n;
         ty=y;
         a[tx][y]=cnt;
     }
     x=tx;
     y=ty;
     ```

2. **作者：Ice_rnfmabj (赞：12)**
   - **星级：4星**
   - **关键亮点：**
     - 代码结构清晰，逻辑步骤明确。
     - 使用了多重条件判断来处理边界情况，虽然略显冗长，但易于理解。
   - **核心代码：**
     ```cpp
     if(x==1&&y!=n){
         tmp[n][y+1]=i;
         x=n;
         y++;
     }
     else if(x!=1&&y==n){
         tmp[x-1][1]=i;
         x--;
         y=1;
     }
     ```

3. **作者：int_stl (赞：7)**
   - **星级：4星**
   - **关键亮点：**
     - 代码简洁，逻辑清晰。
     - 使用了条件运算符简化代码，提高了代码的可读性。
   - **核心代码：**
     ```cpp
     nx = ((nx == 1) ? n : nx - 1);
     ny = ((ny == n) ? 1 : ny + 1);
     if (a[nx][ny] == 0) {
         a[nx][ny] = ++cnt;
         x = nx, y = ny;
         continue;
     }
     ```

### 最优关键思路或技巧
- **模运算处理边界条件**：通过模运算处理行和列的边界条件，避免了复杂的条件判断，使代码更加简洁。
- **逐步模拟填充**：按照题目描述的步骤逐步填充数字，确保每一步都符合规则，最终完成幻方的填充。

### 可拓展之处
- **其他幻方构造方法**：可以尝试其他幻方的构造方法，如偶数阶幻方的构造方法，进一步拓展对幻方的理解。
- **优化填充算法**：可以研究更高效的填充算法，减少填充步骤，提高算法效率。

### 推荐题目
1. [P2615 [NOIP2015 提高组] 神奇的幻方](https://www.luogu.com.cn/problem/P2615)
2. [P1433 幻方](https://www.luogu.com.cn/problem/P1433)
3. [P2616 [NOIP2015 提高组] 幻方](https://www.luogu.com.cn/problem/P2616)

---
处理用时：22.44秒
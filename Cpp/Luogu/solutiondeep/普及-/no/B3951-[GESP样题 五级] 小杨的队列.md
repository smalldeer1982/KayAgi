# 题目信息

# [GESP样题 五级] 小杨的队列

## 题目描述

小杨的班级里共有 $N$ 名同学，学号从 $0$ 至 $N-1$。某节课上，老师要求同学们进行列队。具体来说，老师会依次点名 $M$ 名同学，让他们加入队伍。每名新入队的同学需要先站到队伍末尾（刚开始队伍里一个人都没有，所以第一个入队的同学只需要站好即可），随后，整个队伍中的所有同学需要按身高从低到高重新排序（身高相同的同学之间的顺序任意）。

排队很容易，但重新排序难倒了同学们。稍加讨论后，他们发现可以通过交换位置的方法来实现排序。具体来说，他们可以让队伍中的两名同学交换位置这样整个队伍的顺序就会发生变化，多经过这样的几次交换后，队伍的顺序就可以排好。

例如：队伍中有 $4$ 名同学，学号依次为 $10,17,3,25$，我们可以令 $3$ 号同学和 $10$ 号同学交换位置，则交换后的队伍顺序变为 $3,17,10,25$，这就是一次交换位置。

聪明的小杨想要知道：在老师每次点名一位新同学加入队伍后，在原有队伍的基础上，同学们最少要进行几次交换位置，才能完成老师按身高排序的要求。


## 说明/提示


对于所有的测试点，保证 $1 \le M \le N \le 2000$。对于 $50\%$ 的测试点，保证所有同学的身高互不相同。

## 样例 #1

### 输入

```
5
170 165 168 160 175
4
0
3
2
1```

### 输出

```
0
1
1
2```

## 样例 #2

### 输入

```
4
20 20 20 10
4
0
1
2
3```

### 输出

```
0
0
0
1```

# AI分析结果

### 算法分类
模拟

### 综合分析与结论
该题目要求模拟队列的排序过程，每次新加入一个元素后，计算将其插入到正确位置所需的最少交换次数。所有题解均采用了模拟的思路，通过遍历队列并交换元素来实现排序。虽然题解思路相似，但在实现细节和优化程度上有所不同。

### 所选高星题解
1. **作者：__qkj__ (4星)**
   - **关键亮点**：在交换过程中，考虑了身高相同的情况，通过向前遍历找到第一个不同的元素进行交换，避免了不必要的交换操作。
   - **代码核心思想**：
     ```cpp
     for(int j=i-1;j>=1;j--)
         if(b[j]>b[j+1]) {
             int x=j;
             while(x>1&&b[x-1]==b[x])x--;
             swap(b[x],b[j+1]);
             j=x;
             s++;
         }
     ```
   - **个人心得**：通过向前遍历处理相同身高的元素，减少了交换次数，优化了模拟过程。

2. **作者：Aussicer (4星)**
   - **关键亮点**：与__qkj__的思路类似，但在代码实现上更加简洁，直接从前向后遍历并交换，适合初学者理解。
   - **代码核心思想**：
     ```cpp
     for(int j=i-1;j>=1;j--)
         if(b[j]>b[j+1]) {
             int y=j;
             while(y>1&&b[y-1]==b[y])y--;
             swap(b[y],b[j+1]);
             j=y;
             s++;
         }
     ```
   - **个人心得**：通过从前向后遍历并交换，简化了代码逻辑，易于理解和实现。

3. **作者：int_stl (4星)**
   - **关键亮点**：直接模拟了每次新元素加入后的排序过程，代码简洁明了，适合快速实现。
   - **代码核心思想**：
     ```cpp
     for(int j=1;j<=i;j++)
         if(que[j]>que[i]) {
             swap(que[j],que[i]);
             cnt++;
         }
     ```
   - **个人心得**：通过简单的遍历和交换，实现了模拟排序过程，代码易于理解和维护。

### 最优关键思路或技巧
- **处理相同元素**：在交换过程中，向前遍历找到第一个不同的元素进行交换，避免不必要的交换操作。
- **简洁实现**：通过从前向后遍历并交换，简化了代码逻辑，易于理解和实现。

### 可拓展之处
- **类似问题**：可以扩展到其他需要动态维护有序序列的问题，如动态中位数、动态逆序对等。
- **优化思路**：可以考虑使用更高效的数据结构（如平衡树）来维护有序序列，减少交换次数。

### 推荐题目
1. [P1177 【模板】快速排序](https://www.luogu.com.cn/problem/P1177)
2. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908)
3. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)

---
处理用时：21.91秒
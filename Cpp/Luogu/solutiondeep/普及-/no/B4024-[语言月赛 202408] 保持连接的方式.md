# 题目信息

# [语言月赛 202408] 保持连接的方式

## 题目背景

> 时光荏苒，小 S 和小 Y 也会散去。  
> 而我们和一个人保持连接的方式就是记住，仅此而已。  
> —— [[NOI 2024] 集合](https://www.luogu.com.cn/problem/P10785)
>
> 风将这句话写在纸上，折成了纸飞机，扔出窗外。  
> 纸飞机飞吧，飞向天空。
>
> 以此铭记。

## 题目描述

风有一只小木箱，内部被划分为了 $n$ 行 $m$ 列的小格子，第 $i$ 行第 $j$ 列的小格子用 $(i,j)$ 表示。风将日记放在小木箱中。每一个小格子可以堆叠的放下至多 $k$ 份日记。风每次只能从小格子的最顶部取出日记，放入日记时，会放在某一个小格子的最顶端。

如果风希望取出被压在下面的日记，他需要先将上面的日记取出，再逐个放回。例如，某个小格子从底部至顶部，依次有编号为 $1,2,3,4,5$ 的五份日记，风希望取出编号为 $3$ 的日记，需要先依次取出编号为 $5,4$ 的两份日记，拿走编号为 $3$ 的日记后，再按照 $4,5$ 的顺序放回。我们称移走 $3$ 号日记需要移动 $2$ 份日记。

在接下来的 $t$ 天，风每一天都会写日记，第 $i$ 天撰写的日记编号为 $a_i$，将存放在 $(x_i,y_i)$ 中。如果 $(x_i,y_i)$ 已满，风需要从 $(x_i,y_i)$ 中先取走编号最小的日记并销毁，销毁后，将新的日记存放在 $(x_i,y_i)$ 顶部。如果存在多份编号最小的日记，销毁最靠上的一份。请问，每一天，风是否需要销毁日记？若需要，需要移动几份日记？

## 说明/提示

对于 $30\%$ 的测试数据，$n=m=1$；  
对于另外 $30\%$ 的测试数据，$k=1$；  
对于 $100\%$ 的测试数据，$1 \le n,m \le 100$，$1 \le k \le 50$，$1 \le t \le 2 \times 10^5$，$1 \le a_i \le 10^9$，$1 \le x_i \le n$，$1 \le y_i \le m$。

## 样例 #1

### 输入

```
2 2 3 5
3 1 1
4 1 1
2 1 1
5 1 1
1 1 1```

### 输出

```
-1
-1
-1
2 0
3 2```

# AI分析结果

### 算法分类
模拟

### 综合分析与结论
题目要求模拟一个日记存放和销毁的过程，涉及到对二维格子中日记的堆叠操作。核心难点在于如何高效地处理日记的存放、销毁以及移动操作。题解中提出的方法是通过三维数组来模拟日记的存放，并使用二维数组记录每个格子的顶部日记数量。这种方法虽然直观，但在处理大规模数据时可能会遇到性能问题。

### 所选题解
#### 题解：览遍千秋
- **星级**: 4星
- **关键亮点**: 使用三维数组和二维数组进行模拟，思路清晰，代码结构简单易懂。
- **个人心得**: 无

### 核心代码片段
```cpp
int a[101][101][51]; // 三维数组模拟日记存放
int top[101][101];   // 记录每个格子的顶部日记数量

void addDiary(int x, int y, int id) {
    if (top[x][y] == k) {
        int minVal = a[x][y][0], pos = 0;
        for (int i = 1; i < k; ++i) {
            if (a[x][y][i] < minVal) {
                minVal = a[x][y][i];
                pos = i;
            }
        }
        int moveCount = k - pos - 1;
        for (int i = pos; i < k - 1; ++i) {
            a[x][y][i] = a[x][y][i + 1];
        }
        a[x][y][k - 1] = id;
        cout << moveCount << " ";
    } else {
        a[x][y][top[x][y]++] = id;
        cout << "-1 ";
    }
}
```
**核心实现思想**: 通过遍历三维数组找到最小值及其位置，计算需要移动的日记数量，并进行数组的移动操作。

### 扩展思路
对于大规模数据，可以考虑使用更高效的数据结构，如优先队列（堆）来快速找到最小值，减少遍历时间。此外，可以优化数组移动操作，避免频繁的数据拷贝。

### 推荐题目
1. [P10785 [NOI 2024] 集合](https://www.luogu.com.cn/problem/P10785)
2. [P1001 A+B Problem](https://www.luogu.com.cn/problem/P1001)
3. [P1002 过河卒](https://www.luogu.com.cn/problem/P1002)

---
处理用时：18.34秒
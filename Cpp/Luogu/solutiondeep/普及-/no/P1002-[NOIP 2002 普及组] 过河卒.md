# 题目信息

# [NOIP 2002 普及组] 过河卒

## 题目描述

棋盘上 $A$ 点有一个过河卒，需要走到目标 $B$ 点。卒行走的规则：可以向下、或者向右。同时在棋盘上 $C$ 点有一个对方的马，该马所在的点和所有跳跃一步可达的点称为对方马的控制点。因此称之为“马拦过河卒”。

棋盘用坐标表示，$A$ 点 $(0, 0)$、$B$ 点 $(n, m)$，同样马的位置坐标是需要给出的。

![](https://cdn.luogu.com.cn/upload/image_hosting/ipmwl52i.png)

现在要求你计算出卒从 $A$ 点能够到达 $B$ 点的路径的条数，假设马的位置是固定不动的，并不是卒走一步马走一步。


## 说明/提示

对于 $100 \%$ 的数据，$1 \le n, m \le 20$，$0 \le$ 马的坐标 $\le 20$。

**【题目来源】**

NOIP 2002 普及组第四题

## 样例 #1

### 输入

```
6 6 3 3
```

### 输出

```
6
```

# AI分析结果

### 算法分类
动态规划

### 综合分析与结论
本题的核心是通过动态规划计算卒从起点到终点的路径数，同时考虑马的控制点对路径的限制。大多数题解采用了类似的动态规划思路，即通过状态转移方程 $f_{i,j} = f_{i-1,j} + f_{i,j-1}$ 来计算每个点的路径数，并通过标记马的控制点来排除不可达的点。部分题解还进行了空间优化，如使用滚动数组或一维数组来减少内存使用。

### 所选高星题解
1. **题解作者：Chiaro (赞：3934)**
   - **星级：5星**
   - **关键亮点**：详细解释了动态规划的状态转移方程，并提供了滚动数组和一维数组的优化方案。代码清晰，注释详细，适合初学者理解。
   - **核心代码**：
     ```cpp
     for(int i = 2; i <= bx; i++){
         for(int j = 2; j <= by; j++){
             if(s[i][j]) continue;
             f[i][j] = f[i - 1][j] + f[i][j - 1];
         }
     }
     ```

2. **题解作者：kradcigam (赞：463)**
   - **星级：4星**
   - **关键亮点**：通过标数法直观地解释了动态规划的思路，并提供了从二维数组到一维数组的优化方案。代码简洁，易于实现。
   - **核心代码**：
     ```cpp
     for(int i=1;i<=n;i++){
         for(int j=1;j<=m;j++){
             if(ma[i][j]==0)x[i][j]=x[i-1][j]+x[i][j-1];
         }
     }
     ```

3. **题解作者：FreedomKing (赞：98)**
   - **星级：4星**
   - **关键亮点**：详细介绍了如何标记马的控制点，并通过边界条件处理避免了数组越界问题。代码结构清晰，适合初学者学习。
   - **核心代码**：
     ```cpp
     for(int i=0;i<=n;i++){
         for(int j=0;j<=m;j++){
             if(d[i][j]==false){
                 if(i) dp[i][j]+=dp[i-1][j];
                 if(j) dp[i][j]+=dp[i][j-1];
             }
         }
     }
     ```

### 最优关键思路或技巧
- **动态规划状态转移方程**：$f_{i,j} = f_{i-1,j} + f_{i,j-1}$ 是解决此类路径计数问题的核心。
- **空间优化**：使用滚动数组或一维数组可以有效减少内存使用，特别是在大规模数据时。
- **边界处理**：通过坐标偏移或边界条件判断，避免数组越界问题。

### 可拓展之处
- **类似算法套路**：此类动态规划问题可以扩展到其他路径计数问题，如网格中的障碍物、不同移动规则等。
- **优化技巧**：滚动数组和一维数组的优化技巧在其他动态规划问题中同样适用。

### 推荐题目
1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1006 传纸条](https://www.luogu.com.cn/problem/P1006)
3. [P1018 乘积最大](https://www.luogu.com.cn/problem/P1018)

---
处理用时：25.50秒
# 题目信息

# 轰炸

## 题目描述

“我该怎么办？”飞行员 klux 向你求助。

事实上，klux 面对的是一个很简单的问题，但是他实在太菜了。

klux 要想轰炸某个区域内的一些地方，它们是位于平面上的一些点，但是（显然地）klux 遇到了抵抗，所以 klux 只能飞一次，而且由于飞机比较破，一点起飞就只能沿直线飞行，无法转弯。现在他想一次轰炸最多的地方。


## 说明/提示

### 数据范围

对于全部数据，保证 $1\le n\le 700$。

本题翻译并改编自 uva270，数据及解答由 uva 提供。


## 样例 #1

### 输入

```
5
1 1
2 2
3 3
9 10
10 11
```

### 输出

```
3
```

# AI分析结果

### 算法分类
枚举

### 综合分析与结论
题目要求找到平面上最多共线的点数，核心思路是通过枚举所有可能的直线，并统计每条直线上的点数。由于数据范围较小（n ≤ 700），直接使用O(n^3)的暴力枚举方法即可通过。部分题解通过斜率排序或向量叉积优化，将复杂度降低到O(n^2 log n)，但实际效果在数据范围内差异不大。

### 精选题解
#### 1. 题解作者：Flokirie (赞：106)
- **星级**：★★★★★
- **关键亮点**：使用向量叉积判断三点共线，避免了浮点数精度问题，代码简洁且高效。
- **核心代码**：
```cpp
for (int i=0;i<n-1;i++){
    for (int j=i+1;j<n;j++){
        int cnt=2;
        point vec1 = {p[j].x-p[i].x, p[j].y-p[i].y};
        for (int h=0;h<n;h++){
            if (h==i || h==j) continue;
            point vec2 = {p[h].x-p[i].x, p[h].y-p[i].y};
            if (vec1.x*vec2.y == vec1.y*vec2.x) cnt++;
        }
        if (cnt>max) max=cnt;
    }
}
```
- **个人心得**：通过向量叉积判断共线，避免了浮点数运算的精度问题，代码实现简洁且高效。

#### 2. 题解作者：NotaKoala (赞：3)
- **星级**：★★★★
- **关键亮点**：使用map存储斜率，统计每种斜率的点数，复杂度为O(n^2 log n)，代码清晰且优化思路明确。
- **核心代码**：
```cpp
map<double, int> mp;
for (int j = 0; j < n; j++) {
    if (x[i] == x[j] && y[i] == y[j]) res++;
    else if (x[i] == x[j]) mp[INF]++;
    else mp[1.0 * (y[i] - y[j]) / (x[i] - x[j])]++;
}
```
- **个人心得**：通过map存储斜率，避免了重复计算，代码实现清晰且优化思路明确。

#### 3. 题解作者：白鲟 (赞：0)
- **星级**：★★★★
- **关键亮点**：采用基于叉积的极角排序，兼顾了精度和复杂度，代码实现简洁且高效。
- **核心代码**：
```cpp
std::sort(t + 1, t + tot + 1);
now = 2;
for (int j = 2; j <= tot; ++j) {
    if (parallel(t[j], t[j - 1])) ++now;
    else now = 2;
    ans = std::max(ans, now);
}
```
- **个人心得**：通过极角排序和叉积判断共线，避免了浮点数运算的精度问题，代码实现简洁且高效。

### 最优关键思路
1. **向量叉积判断共线**：通过向量叉积判断三点共线，避免了浮点数运算的精度问题，代码实现简洁且高效。
2. **斜率排序优化**：通过map存储斜率，统计每种斜率的点数，复杂度为O(n^2 log n)，代码清晰且优化思路明确。
3. **极角排序**：采用基于叉积的极角排序，兼顾了精度和复杂度，代码实现简洁且高效。

### 拓展思路
- **更大数据范围**：如果数据范围更大，可以考虑使用更高效的算法，如基于哈希表的斜率统计方法。
- **三维空间**：类似问题可以扩展到三维空间，判断四点共面，使用向量叉积和混合积进行判断。

### 推荐题目
1. [P1357 最大子矩形](https://www.luogu.com.cn/problem/P1357)
2. [P2789 直线交点数](https://www.luogu.com.cn/problem/P2789)
3. [P1494 小Z的袜子](https://www.luogu.com.cn/problem/P1494)

---
处理用时：29.91秒
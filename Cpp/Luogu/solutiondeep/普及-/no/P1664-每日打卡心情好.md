# 题目信息

# 每日打卡心情好

## 题目背景

在洛谷中，打卡不只是一个简单的鼠标点击动作，通过每天在洛谷打卡，可以清晰地记录下自己在洛谷学习的足迹。通过每天打卡，来不断地暗示自己：我又在洛谷学习了一天，进而帮助自己培养恒心、耐心、细心。此外，通过打卡，还可以获取经验值奖励，经验值的多少在一定程度上反映了你在洛谷的资历和成就。通过打卡累积活跃值，渐渐升级，会让你感觉“离神犇越来越近了”。

## 题目描述

洛谷的打卡系统与其他网站的打卡系统一样，连续”打卡天数越多，每次打卡获得的奖励也就越多，同时连续天数加上一天。然而，于其他网站只要一天不打卡，连续天数就要清零。与其他网站不同的是，洛谷的打卡更具有人性化，如果多天不打卡，连续天数仅仅只是减少，当遗漏天数越少，减少的天数也就越少。规则是减少 $2^{n-1}$ 天，$n$ 为连续遗漏天数。连续天数在下一次打卡时清算，打卡连续天数不会小于 $0$。也就是说，如果每隔一天打卡，那么连续天数就不会变了。

当连续天数达到以下天数时，给予不同的活跃值奖励：

$1$ 天：奖励 $1$（千里之行，始于足下）

$3$ 天：奖励 $2$（坚持 $3$ 天了，加油！）

$7$ 天：奖励 $3$（曜日轮回）

$30$ 天：奖励 $4$（月圆月缺，习惯养成）

$120$ 天：奖励 $5$（坚持四个月了！）

$365$ 天：奖励 $6$（一年四季都坚持下来了！真不容易！）

小 a $N$ 天前在洛谷注册了一个账号，虽然当时立志每天都要打卡，但发现这不太容易做到。现在知道他 $N$ 天的的打卡记录，小 a 希望得知他通过打卡，在 $N$ 天能获得多少活跃值？

## 说明/提示

第 $1$ 天：$1$ // 开始打卡！获得 $1$ 点经验，共 $1$ 点，连续 $1$ 天。

第 $2$ 天：$1$ // 获得 $1$ 点经验，共 $2$ 点，连续 $2$ 天。

第 $3$ 天：$1$ // 获得 $2$ 点经验，共 $4$ 点，连续 $3$ 天。

第 $4$ 天：$1$ // 获得 $2$ 点经验，共 $6$ 点，连续 $4$ 天

第 $5$ 天：$1$ // 获得 $2$ 点经验，共 $8$ 点，连续 $5$ 天

第 $6$ 天：$0$ // 由于要去趟火星，没有网络不得已而断签

第 $7$ 天：$0$

第 $8$ 天：$0$

第 $9$ 天：$1$ // 我回来了，可惜连续天数变成 $5-4=1$ 天了 TQT…… 获得 $1$ 点经验，共 $9$ 点，连续 $2$ 天

第 $10$ 天：$0$ // 啊，事情太多给忘了

第 $11$ 天：$1$ // 连续天数变成 $2-1=1$ 天。获得 $1$ 点经验，共 $10$ 点，连续 $2$ 天。

第 $12$ 天：$1$ // 获得 $2$ 点经验，共 $12$ 点，连续 $3$ 天。

小 a：弄个自动打卡机，怎么样？

kkksc03：这不符合洛谷的规则的！

$1\leq N\leq 10^3$。

## 样例 #1

### 输入

```
12
1
1
1
1
1
0
0
0
1
0
1
1```

### 输出

```
12```

# AI分析结果

### 算法分类
模拟

### 综合分析与结论
该题目主要考察对打卡规则的模拟实现，涉及连续打卡天数的计算、遗漏打卡的惩罚机制以及活跃值的累积。各题解的核心思路基本一致，主要通过遍历打卡记录，根据打卡状态更新连续打卡天数和活跃值。难点在于如何处理遗漏打卡的惩罚机制，即如何正确计算连续打卡天数的减少量。

### 所选高星题解

#### 题解1：作者：zhylj (赞：110)
- **星级**：5星
- **关键亮点**：代码简洁明了，逻辑清晰，处理遗漏打卡的惩罚机制时直接使用 `pow(2, m-1)` 进行计算，避免了复杂的条件判断。
- **核心代码**：
  ```cpp
  if(a==1) {
      if(m>0) d-=pow(2,m-1);
      if(d<0) d=0;
      t++;d++;m=0;
      if(d>=3) t++;
      if(d>=7) t++;
      if(d>=30) t++;
      if(d>=120) t++;
      if(d>=365) t++;
  } else if(a==0) m++;
  ```
- **个人心得**：作者提到“这题其实可以很短”，强调了代码的简洁性和可读性。

#### 题解2：作者：wpy233 (赞：28)
- **星级**：4星
- **关键亮点**：使用了 `flag` 变量来区分第一次和第二次惩罚，处理遗漏打卡的惩罚机制时更加细致，代码结构清晰。
- **核心代码**：
  ```cpp
  if(x==1) {
      lx++;
      if(lx>=1) ans++;
      if(lx>=3) ans++;
      if(lx>=7) ans++;
      if(lx>=30) ans++;
      if(lx>=120) ans++;
      if(lx>=365) ans++;
      yl=1;
      flag=true;
  } else {
      lx-=yl;
      if(yl==1&&flag) yl=1,flag=false;
      else yl*=2;
  }
  ```
- **个人心得**：作者提到“坑了作者好久QAQ”，强调了调试过程中的难点。

#### 题解3：作者：chenziqi1006 (赞：11)
- **星级**：4星
- **关键亮点**：使用了 `pow` 函数处理遗漏打卡的惩罚机制，代码结构简单，适合初学者理解。
- **核心代码**：
  ```cpp
  if(a[i]==1) {
      if(flx>0) {
          lx=lx-pow(2,flx-1);
          if(lx<0) lx=0;
      }
      lx++;
      flx=0;
      if(lx>=365) xjy=xjy+6;
      else if(lx>=120) xjy=xjy+5;
      else if(lx>=30) xjy=xjy+4;
      else if(lx>=7) xjy=xjy+3;
      else if(lx>=3) xjy=xjy+2;
      else xjy=xjy+1;
  } else flx++;
  ```
- **个人心得**：作者提到“新手代码，大佬勿喷”，强调了代码的易读性和初学者的友好性。

### 最优关键思路或技巧
1. **遗漏打卡的惩罚机制**：使用 `pow(2, m-1)` 计算连续打卡天数的减少量，确保计算准确。
2. **活跃值的累积**：根据连续打卡天数的不同区间，累积相应的活跃值，避免重复计算。
3. **代码简洁性**：通过合理的变量命名和逻辑结构，保持代码的简洁性和可读性。

### 可拓展之处
该题目的核心思路可以应用于其他类似的打卡系统或连续任务完成奖励系统，如每日签到、连续登录奖励等。类似题目可以通过调整打卡规则和奖励机制来增加难度。

### 推荐相似题目
1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)
3. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)

---
处理用时：31.02秒
# 题目信息

# 【深基附B例】区间最大和

## 题目描述

给定 $n$ 个正整数组成的数列 $a_1, a_2, \cdots, a_n$ 和一个整数 $m$。求出这个数列中的一个子区间 $[i, j]$，也就是在这个数列中连续的数字 $a_i, a_{i + 1}, \cdots, a_{j - 1}, a_j$，使得这个子区间的和在不超过 $m$ 的情况下最大。如果有多个区间符合要求，请输出 $i$ 最小的那一个。

## 说明/提示

**子任务 1**（10分）：$n\le 200$ ；

**子任务 2**（20分）：$n\le 3000$ ；

**子任务 3**（30分）：$n\le 10^5$ ；

**子任务 4**（40分）：$n\le 4\times 10^6$ 。

对于 $100\%$ 的数据，$1 \leq n \leq 4 \times 10^6$，$1 \leq m \leq 10^9$，$0 \leq a_1, a_2, \cdots, a_n \leq 10^5$。

## 样例 #1

### 输入

```
5 10
2 3 4 5 6```

### 输出

```
1 3 9```

# AI分析结果

### 算法分类
前缀和、双指针

### 综合分析与结论
本题的核心问题是在一个正整数序列中找到一个子区间，使得该区间的和在不超过给定值 \( m \) 的情况下最大。由于序列中的元素都是正整数，区间和具有单调性，因此可以通过前缀和和双指针技术来高效解决。

### 所选高星题解

#### 1. **作者：Diamiko (赞：14)**
- **星级：★★★★★**
- **关键亮点：**
  - 使用双指针和前缀和结合的方法，时间复杂度为 \( O(n) \)。
  - 思路清晰，代码简洁，适合初学者理解。
  - 详细解释了前缀和的作用和双指针的移动策略。
- **核心实现思想：**
  - 使用前缀和数组 `sum[]` 来快速计算任意区间的和。
  - 使用双指针 `l` 和 `r` 来维护当前区间，当区间和超过 \( m \) 时，移动左指针 `l`，否则移动右指针 `r`，并更新最大区间和。
- **代码片段：**
  ```cpp
  while (r <= n) {
      while (sum[r] - sum[l - 1] > m && l < r) l++;
      if (sum[r] - sum[l - 1] > ans) {
          ans = sum[r] - sum[l - 1];
          ansl = l, ansr = r;
      }
      r++;
  }
  ```

#### 2. **作者：FifthAxiom (赞：9)**
- **星级：★★★★☆**
- **关键亮点：**
  - 使用滑块思想（滑动窗口）来维护一个合法的区间，时间复杂度为 \( O(n) \)。
  - 代码简洁，逻辑清晰，适合有一定基础的读者。
- **核心实现思想：**
  - 使用前缀和数组 `s[]` 来快速计算区间和。
  - 使用双指针 `l` 和 `r` 来维护当前区间，当区间和超过 \( m \) 时，移动左指针 `l`，否则移动右指针 `r`，并更新最大区间和。
- **代码片段：**
  ```cpp
  while (r <= n) {
      while (s[r] - s[l - 1] > m && l < r) l++;
      if (s[r] - s[l - 1] > ans) ans = s[r] - s[l - 1], ansL = l, ansR = r;
      r++;
  }
  ```

#### 3. **作者：HEIGE (赞：1)**
- **星级：★★★★☆**
- **关键亮点：**
  - 详细解释了前缀和和双指针的使用，适合初学者理解。
  - 代码简洁，逻辑清晰，适合有一定基础的读者。
- **核心实现思想：**
  - 使用前缀和数组 `s[]` 来快速计算区间和。
  - 使用双指针 `l` 和 `r` 来维护当前区间，当区间和超过 \( m \) 时，移动左指针 `l`，否则移动右指针 `r`，并更新最大区间和。
- **代码片段：**
  ```cpp
  while (l <= n) {
      while (s[r] - s[l - 1] <= x && r <= n) r++;
      r--;
      if (s[r] - s[l - 1] > maxn) {
          maxn = s[r] - s[l - 1];
          maxl = l, maxr = r;
      }
  }
  ```

### 最优关键思路与技巧
1. **前缀和优化**：通过预处理前缀和数组，可以在 \( O(1) \) 时间内计算任意区间的和。
2. **双指针技术**：利用双指针维护一个合法的区间，当区间和超过 \( m \) 时，移动左指针，否则移动右指针，确保时间复杂度为 \( O(n) \)。

### 可拓展之处
- **类似问题**：可以使用类似的方法解决其他涉及区间和的问题，如最小子区间和、满足特定条件的子区间等。
- **优化技巧**：在双指针的基础上，可以结合其他数据结构（如单调队列）来进一步优化时间复杂度。

### 推荐题目
1. **P1115 最大子段和**：考察如何在一个序列中找到和最大的子区间。
2. **P1631 序列合并**：考察如何在两个序列中找到满足条件的子区间。
3. **P1886 滑动窗口**：考察如何使用滑动窗口技术解决区间问题。

### 个人心得摘录
- **调试经历**：在双指针移动时，需要注意边界条件，避免指针越界。
- **踩坑教训**：在使用前缀和时，要确保数组下标从1开始，避免计算时出现错误。
- **顿悟感想**：通过双指针和前缀和的结合，可以高效解决许多区间和问题，思路清晰且代码简洁。

---
处理用时：35.10秒
# 题目信息

# [POI 1997] ADDON

## 题目背景

科学家们发现了一种新的放射性元素——`ADDON`。`ADDON` 是已知的效率最高的核燃料，因此他们决定建立一个 `ADDON` 核反应堆。

## 题目描述

根据计划，一间燃料室是一根竖直的管子。燃料棒（即装有 `ADDON` 的圆筒）将一根叠一根的被放进燃料室里，搭建成一个圆柱。燃料棒具有不同的高度。

核反应循环开始于将燃料棒放进燃料室中。接下来的步骤才是点火。麻烦的是，圆柱的高度不能是任意的——只有某些特定的高度才能保证反应的安全。这样的高度被称作稳定高度。

现在，反应堆的设计师们面临着两个任务：确定燃料室的高度以及选择一个用于制造 `ADDON` 的燃料棒的高度集合。

我们说一个高度集合是安全的（对于一个特定高度的燃料室），则有：

- 对于任意一根由高度属于这个集合的燃料棒搭建而成的，且高度不超过燃料室的高度的圆柱，它的高度一定是稳定的。


我们说一个高度集合是完备的（对于一个特定高度的燃料室），则有：

- 对于任意一根高度是稳定的,并且其高度不超过燃料室高度的圆柱，都一定能够由高度属于该集合的燃料棒搭建而成。


现在要写一个程序：
- 1. 读入一个稳定高度的集合；
- 2. 找出存在一个安全且完备的高度集合的核燃料室的最大可能值；
- 3. 对于找到的核燃料室，找出一个元素个数最少的安全且完备的高度集合；
- 4. 将结果输出。

## 说明/提示

对于 $100\%$ 的数据，$1\le n\le10000$。

## 样例 #1

### 输入

```
14
5
10
12
15
17
20
21
22
24
26
27
30
31
33```

### 输出

```
24
5
12
21```

# AI分析结果

### 算法分类
**构造**

### 综合分析与结论
该题目要求找到一个最大高度，使得所有小于该高度的数都可以由给定的稳定高度集合中的元素表示，并且该集合是安全且完备的。核心思路是通过遍历和标记来判断哪些数可以被表示，并逐步构造出符合条件的集合。各题解的思路基本一致，主要区别在于代码实现和优化细节。

### 所选题解
1. **作者：_Violet_Evergarden**  
   - **星级：4**  
   - **关键亮点**：通过标记数组记录哪些数可以被表示，逐步构造出符合条件的集合。代码逻辑清晰，优化了标记过程，减少了不必要的计算。
   - **个人心得**：通过打标记的方式，避免了重复计算，提高了效率。

   ```cpp
   for(int i=1;i<=n;i++){
       for(int j=d[i-1];j<d[i];j++){
           if(b[j]){
               o=i-1;
               flag=1;
           }
       }
       if(flag) break;
       if(b[d[i]]){
           b[d[i]]=0;
           continue;
       }
       e[++cnt]=d[i];
       for(int j=1;j<i;j++) b[d[i]+d[j]]=1;
       for(int j=1;j<=10000;j++){
           if(!b[j]&&(j%d[i])==0) b[j]=1;
           if(b[j]==1) b[d[i]+j]=1;
       }
       b[d[i]]=0;
   }
   ```

2. **作者：xixiyan**  
   - **星级：4**  
   - **关键亮点**：使用类似完全背包的思路，通过标记数组记录哪些数可以被表示，逐步构造出符合条件的集合。代码结构清晰，注释详细，易于理解。
   - **个人心得**：通过类似完全背包的思路，简化了问题的复杂度。

   ```cpp
   for(int i=1;i<=n;i++){
       bool p=1;
       for(int j=a[i-1]+1;j<a[i];j++){
           if(x[j]){
               anss=a[i-1];
               p=0;
           }
       }
       if(!p) break;
       if(x[a[i]]) continue;
       anns[++tot]=a[i];
       for(int j=1;j<i;j++) x[a[i]+a[j]]=1;
       for(int j=1;j<=10000;j++){
           if(x[j]&&a[i]+j<=10000) x[a[i]+j]=1;
           if(!x[j]&&j%a[i]==0) x[j]=1;
       }
   }
   ```

3. **作者：__Luna__**  
   - **星级：4**  
   - **关键亮点**：通过暴力求解的方式，逐步构造出符合条件的集合。代码简洁，逻辑清晰，适合初学者理解。
   - **个人心得**：通过暴力求解的方式，虽然效率不高，但代码简洁易懂。

   ```cpp
   for(int i=0,j,k=0;i<n;i++,m=j){
       cin>>j;
       while(k<j){
           if(t[k]==1) goto end;
           k++;
       }
       k++;
       if(t[j]==0){
           a[c++]=j;
           t[j]=1;
           for(int l=1;l+j<=10000;l++){
               if(t[l]) t[l+j]=1;
           }
       }
   }
   ```

### 最优关键思路或技巧
1. **标记数组**：通过标记数组记录哪些数可以被表示，避免了重复计算，提高了效率。
2. **类似完全背包的思路**：通过类似完全背包的思路，简化了问题的复杂度，减少了不必要的计算。
3. **暴力求解**：虽然效率不高，但代码简洁易懂，适合初学者理解。

### 可拓展之处
该题目可以拓展到更复杂的组合数学问题，如多重背包问题或完全背包问题。类似的问题可以通过标记数组或动态规划的思路来解决。

### 推荐题目
1. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
2. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)
3. [P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)

---
处理用时：32.11秒
# 题目信息

# [ICPC 2015 WF] Amalgamated Artichokes

## 题目描述

**题目背景**

法蒂玛是针对联合洋蓟果业公司 (Amalgamated Artichokes , AA) 的股票分析员。和其他的公司一样，联合洋蓟果业公司有的时候行情较好，有的时候不太行。法蒂玛对联合洋蓟果业公司的股票价格做了跟踪分析，她想确定不同时间段内股价最大跌幅是多少。比如如果一段时间内股价分别为19元，12元，13元，11元，20元，14元，则最大的跌幅为第一天和第四天之间的8。如果最后一天的价格不是14元而是10元，则最大跌幅为最后两天股价之间的10元。

法蒂玛做了些前期的分析，发现一段时间的股价可以建模精确合理地表示为以下方程式：
$$
price⁡(k)=p⋅(sin⁡(a⋅k+b)+cos⁡(c⋅k+d)+2)
$$
其中$p,a,b,c,d$均为常数。法蒂玛想要你写个程序确定给定价格序列上的最大股价跌幅。

图1说明了第一组样例的价格函数，你只能考虑时间为整数$k$时的价格。

对于第一组样例，最大股价跌幅出现在第四天和第七天之间。

**一句话题意**

对于给定序列，求差值最大的逆序对

## 说明/提示

时间限制: 5000 ms 

空间限制: 1048576 kB.

International Collegiate Programming Contest (ACM-ICPC) World Finals 2015

## 样例 #1

### 输入

```
42 1 23 4 8 10
```

### 输出

```
104.855110477
```

## 样例 #2

### 输入

```
100 7 615 998 801 3
```

### 输出

```
0.00
```

## 样例 #3

### 输入

```
100 432 406 867 60 1000
```

### 输出

```
399.303813
```

# AI分析结果

### 算法分类
贪心

### 综合分析与结论
该题的核心是求给定序列中差值最大的逆序对，即找到序列中最大的 `price[j] - price[i]`，其中 `j < i`。所有题解都基于贪心思想，通过遍历序列并维护当前最大值来计算最大跌幅。虽然部分题解尝试使用树状数组等数据结构，但最终发现简单的线性扫描即可高效解决问题。

### 所选高分题解
#### 1. 作者：Y_QWQ_Y (4星)
**关键亮点**：
- 思路清晰，直接使用线性扫描维护最大值和最大跌幅。
- 代码简洁，易于理解。
- 输出精度控制得当，保留12位小数。

**核心代码**：
```cpp
for (int i = 1; i <= n; ++ i)
{
    price[i] = p * (sin (a * i + b) + cos (c * i + d) + 2);
    if (i == 1) j = 1;
    else if (price[j] < price[i]) j = i;
    else ans = max (ans, price[j] - price[i]);
}
```

#### 2. 作者：Eason_AC (4星)
**关键亮点**：
- 代码结构清晰，变量命名合理。
- 直接使用线性扫描，效率高。
- 输出精度控制得当，保留10位小数。

**核心代码**：
```cpp
for(int i = 1; i <= n; ++i) {
    price[i] = p * (sin(a * i + b) + cos(c * i + d) + 2);
    if(i == 1) curmax = i;
    else if(price[curmax] < price[i]) curmax = i;
    else ans = max(ans, price[curmax] - price[i]);
}
```

#### 3. 作者：BK小鹿 (4星)
**关键亮点**：
- 代码简洁，逻辑清晰。
- 使用线性扫描，效率高。
- 输出精度控制得当，保留9位小数。

**核心代码**：
```cpp
for (int k = 1; k <= n; k++) 
{
    double price = p * (sin(a * k + b) + cos(c * k + d) + 2);
    if (max_p == -1.0)  
        max_p = price;
    else 
        if (price > max_p)
            max_p = price;
        else
            max_d = max(max_d, max_p - price); 
}
```

### 最优关键思路
- **线性扫描**：通过一次遍历，维护当前最大值，并计算最大跌幅，时间复杂度为O(n)。
- **精度控制**：输出时保留足够的小数位数，确保精度。

### 可拓展之处
- 类似问题可以扩展到其他序列中的最大差值问题，如最大涨幅、最大波动等。
- 可以结合其他数据结构（如树状数组）解决更复杂的序列问题。

### 推荐题目
1. [P1115 最大子段和](https://www.luogu.com.cn/problem/P1115)
2. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
3. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)

### 个人心得摘录
- **Y_QWQ_Y**：直接使用线性扫描，避免了复杂数据结构的引入，代码简洁高效。
- **BK小鹿**：通过线性扫描维护最大值，思路清晰，代码易于理解。

### 通用建议
- 对于序列中的最大差值问题，优先考虑线性扫描，避免不必要的复杂数据结构。
- 注意输出精度，确保结果符合题目要求。

---
处理用时：26.41秒
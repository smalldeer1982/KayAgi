# 题目信息

# 【DSOI 2021】电子跃迁

## 题目背景


> “如果能证明大统一理论，这个世界将焕然一新。”\
“量子……量子……就差一点……”\
“嘶……哦。**我想我明白了**。”

## 题目描述

在你的视野下，出现了一排电子，他们分别拥有不同的能量。你需要做的是通过**将相邻电子互换**的方法，将电子排的有序。**有序**是指：能量最小的电子放到最靠近原子核的左边，将第二小的电子放在第二……将能量最大的电子放在最右边。\
可是，你发现电子轨道之间忽然出现了 $m$ 个奇怪的力，使位于第 $x_i$ 个位置的电子和位于第 $x_i+1$ 个位置的电子无法进行交换。

你深信这个力将会颠覆当下的物理理论。你需要做的是将现在的一排电子排得**尽量有序**以发现其中规律。

**尽量有序**是指：**在条件下**，能量最小的电子尽量放到左边直至出现屏障，以此类推。


## 说明/提示

对于 $10\%$ 的数据，满足 $m=0$；\
对于另 $20\%$ 的数据，满足 $n \le 1000,m \le 100$；\
对于 $100\%$ 的数据，满足 $0 \le n,m \le 5 \times 10^5,1 \le x_i \le n-1,1 \le a_i \le 10^9$。

## 样例 #1

### 输入

```
3 0
3 2 1```

### 输出

```
1 2 3```

## 样例 #2

### 输入

```
7 2
1 3 1 4 5 2 1
2 4```

### 输出

```
1 3 1 4 1 2 5```

# AI分析结果

### 算法分类
排序

### 综合分析与结论
该题的核心逻辑是通过给定的屏障（断点）将数组分割成多个区间，并在每个区间内进行排序，以达到“尽量有序”的目标。所有题解都基于这一思路，主要区别在于实现细节和代码风格。大多数题解使用了`sort`函数对每个区间进行排序，复杂度为O(n log n)，能够通过题目要求的数据范围。

### 所选题解

#### 1. 作者：LinkZelda (赞：12)
- **星级**：5星
- **关键亮点**：思路清晰，代码简洁，使用了`sort`函数对每个区间进行排序，处理了边界条件（如最后一个断点设为n），代码可读性高。
- **核心代码**：
  ```cpp
  sort(b+1,b+m+1); // 记得排序后才能分成若干个区间
  b[m+1]=n; // 把最后一个断点设成 n , 实现起来会比较方便
  for(int i=0;i<=m;i++)
      sort(a+b[i]+1,a+b[i+1]+1);
  ```
- **个人心得**：无

#### 2. 作者：VicXF_ (赞：4)
- **星级**：4星
- **关键亮点**：详细解释了冒泡排序的思路，并在此基础上提出了分区间排序的优化方案，代码实现较为清晰。
- **核心代码**：
  ```cpp
  sort(b+1,b+m+1);b[m+1]=n;
  for(int i=1;i<=m+1;i++)	sort(a+(b[i-1]+1),a+(b[i]+1));
  ```
- **个人心得**：无

#### 3. 作者：Skies (赞：3)
- **星级**：4星
- **关键亮点**：代码简洁，处理了断点排序和区间排序的逻辑，代码风格较好，易于理解。
- **核心代码**：
  ```cpp
  sort(b+1,b+m+1);//别忘了从小到大
  b[m+1]=n;b[0]=0;
  for(int i=1;i<=m+1;i++) 
  { 
      sort(a+b[i-1]+1,a+b[i]+1);
  }
  ```
- **个人心得**：无

### 最优关键思路或技巧
1. **区间分割与排序**：通过将数组分割成多个区间，并在每个区间内进行排序，能够有效解决屏障限制下的排序问题。
2. **边界处理**：在处理断点时，将第一个断点设为0，最后一个断点设为n，可以简化代码逻辑，避免边界条件的复杂处理。

### 可拓展之处
类似的问题可以通过区间分割和排序的思路来解决，例如在某些限制条件下对数组进行局部排序或局部操作。

### 推荐题目
1. [P1177 【模板】快速排序](https://www.luogu.com.cn/problem/P1177)
2. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)
3. [P1068 分数线划定](https://www.luogu.com.cn/problem/P1068)

---
处理用时：23.35秒
# 题目信息

# 「MCOI-06」Gerrymandering

## 题目描述

给定正整数 $n,m,k$，能否将一个 $n\times m$ 表格染色，使得每一个颜色形成恰好一个连通块，并且每一个连通块大小为 $k$？

如果存在，请构造一个合法方案。

## 说明/提示

#### 样例 1 解释

数据组 3 的合法输出之一：

![](https://cdn.luogu.com.cn/upload/image_hosting/xxqa4azm.png)

#### 数据规模与约定

**本题采用捆绑测试。**

 - Subtask 1（20 pts）：$k=1$。
 - Subtask 2（30 pts）：$n=1$。
 - Subtask 3（50 pts）：没有特殊限制。

对于 $100\%$ 的数据，$1\le n,m,k,T,\sum nm\le10^{6}$。

## 样例 #1

### 输入

```
3
3 3 3
3 3 33
6 6 4```

### 输出

```
YES
1 1 2
1 2 2
3 3 3
NO
YES
1 1 2 2 3 3
1 2 2 4 4 3
1 5 5 4 6 3
5 5 7 4 6 6
8 7 7 7 9 6
8 8 8 9 9 9```

# AI分析结果

### 算法分类
构造

### 综合分析与结论
本题的核心在于如何构造一个满足条件的染色方案，使得每个颜色形成一个连通块且大小为 $k$。所有题解都首先判断了 $n \times m$ 是否能被 $k$ 整除，这是问题有解的必要条件。然后，题解们采用了不同的构造方法，如蛇形填法、逐行填法等，来确保每个颜色块连通且大小一致。这些方法在时间复杂度上都是 $\Theta(\sum nm)$，符合题目要求。

### 所选高星题解
1. **作者：C_S_L (4星)**
   - **关键亮点**：采用了蛇形填法，奇数行从左到右，偶数行从右到左，确保颜色块连通。代码简洁，思路清晰。
   - **核心代码**：
     ```cpp
     for(int i=1;i<=n;++i){
         if(i%2==1){
             for(int j=1;j<=m;++j){
                 a[i][j]=(++cnt)/k;
             }
         }
         else{
             for(int j=m;j>=1;--j){
                 a[i][j]=(++cnt)/k;
             }
         }
     }
     ```

2. **作者：一只书虫仔 (4星)**
   - **关键亮点**：采用了逐行填法，从左到右，到头后拐弯，再往回填，确保颜色块连通。代码实现简单，易于理解。
   - **核心代码**：
     ```cpp
     for(int i=1;i<=n*m/k;i++)
         for(int j=1;j<=k;j++){
             a[x][y]=i;
             y+=change;
             if(y>m) x++,y=m,change=-1;
             if(y<1) x++,y=1,change=1;
         }
     ```

3. **作者：言琢დ (4星)**
   - **关键亮点**：结合了逐行填法和蛇形填法，确保颜色块连通。代码逻辑清晰，易于实现。
   - **核心代码**：
     ```cpp
     for(register int i=1;i<=n;++i,putchar('\n')){
         if(i&1){
             for(register int j=1;j<=m;++j){
                 str[j]=id;
                 if(++now>k)++id,now=1;
             }
         }
         else{
             for(register int j=m;j>=1;--j){
                 str[j]=id;
                 if(++now>k)++id,now=1;
             }
         }
     }
     ```

### 最优关键思路或技巧
- **蛇形填法**：通过奇数行从左到右，偶数行从右到左的填法，确保颜色块连通且大小一致。
- **逐行填法**：从左到右填完一行后，拐弯再往回填，确保颜色块连通。

### 可拓展之处
- **类似问题**：可以考虑其他类型的连通块问题，如不同形状的连通块、不同大小的连通块等。
- **算法套路**：在构造题中，蛇形填法和逐行填法是常用的技巧，可以应用于其他类似的构造问题。

### 推荐题目
1. [P1880 [NOI1995] 石子合并](https://www.luogu.com.cn/problem/P1880)
2. [P1048 [NOIP2005 普及组] 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1064 [NOIP2006 提高组] 金明的预算方案](https://www.luogu.com.cn/problem/P1064)

### 个人心得
- **调试经历**：在实现蛇形填法时，需要注意边界条件的处理，如行末和行首的转换。
- **踩坑教训**：在逐行填法中，拐弯时需要确保颜色的连续性，避免出现不连通的情况。

---
处理用时：29.35秒
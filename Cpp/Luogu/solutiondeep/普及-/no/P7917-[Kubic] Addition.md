# 题目信息

# [Kubic] Addition

## 题目背景

建议先看 B 题题目背景。

## 题目描述

有一个初始长度为 $n$ 的序列 $a$。你需要进行 $n-1$ 次操作。每一次操作先在当前序列中选出两个相邻的数 $x,y$ 并删除（原序列中 $x$ 在 $y$ 左边），再往原位置插入一个 $x+y$ 或一个 $x-y$。$n-1$ 次操作之后最终只会剩下恰好一个数，求这个剩下的数的最大值。

## 说明/提示

对于 $100\%$ 的数据，$1\le n\le 10^5,|a_i|\le 10^9$。

||分值|$n$|$\vert a_i\vert$|特殊性质|
|:-:|:-:|:-:|:-:|:-:|
|$\operatorname{Subtask}1$|$10$|$\le 2$|无特殊限制|无|
|$\operatorname{Subtask}2$|$20$|$\le 100$|无特殊限制|无|
|$\operatorname{Subtask}3$|$5$|无特殊限制|无特殊限制|$a_i\ge 0$|
|$\operatorname{Subtask}4$|$30$|无特殊限制|$\le 1$|无|
|$\operatorname{Subtask}5$|$35$|无特殊限制|无特殊限制|无|

### 样例解释

一种操作过程如下：

`-1 1 1 -1 1`

`-1 1 1 -2`

`-1 1 3`

`-1 4`

`3`

可以证明没有更优的方案。

## 样例 #1

### 输入

```
5
-1 1 1 -1 1```

### 输出

```
3```

# AI分析结果

### 算法分类
贪心

### 综合分析与结论
该题的核心思路是通过贪心策略，每次操作选择相邻的两个数，并尽可能使结果最大化。具体来说，对于每个数（除了第一个数），如果它是负数，则减去它（相当于加上它的绝对值），否则直接加上它。这样，最终的结果就是第一个数加上其余数的绝对值之和。这种贪心策略能够保证每次操作都尽可能增加结果的值，从而达到全局最优。

### 所选高星题解
1. **作者：银杉水杉秃杉 (4星)**
   - **关键亮点**：简洁明了地解释了贪心策略，代码实现清晰，直接累加第一个数和其余数的绝对值。
   - **代码核心**：
     ```cpp
     ans = x;
     for (int i = 2; i <= n; i++) {
         scanf("%lld", &x);
         ans += x < 0 ? -x : x;
     }
     ```

2. **作者：mzyc_jx (4星)**
   - **关键亮点**：详细分析了贪心策略的合理性，强调了第一个数的特殊处理，代码可读性高。
   - **代码核心**：
     ```cpp
     long long sum = a[1];
     for (int i = 2; i <= n; i++) {
         sum += abs(a[i]);
     }
     ```

3. **作者：Veranda (4星)**
   - **关键亮点**：通过分类讨论详细证明了贪心策略的正确性，代码简洁且高效。
   - **代码核心**：
     ```cpp
     ans += (i == 1 ? x : abs(x));
     ```

### 最优关键思路
最优的贪心策略是：第一个数保持不变，其余数均取其绝对值累加到结果中。这样可以确保每次操作都尽可能增加结果的值，从而达到全局最优。

### 可拓展之处
类似的问题可以通过贪心策略来解决，尤其是在需要最大化或最小化某个值的场景中。贪心策略的关键在于每次选择局部最优解，从而期望达到全局最优。

### 推荐相似题目
1. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1803 凌乱的yyy / 线段覆盖](https://www.luogu.com.cn/problem/P1803)

### 个人心得摘录
- **作者：mzyc_jx**：`十年OI一场空，不开long long见祖宗！` 提醒了在算法竞赛中数据类型选择的重要性。
- **作者：Veranda**：`贪心成立。` 强调了贪心策略的正确性，并通过分类讨论进行了详细证明。

### 通用建议
在解决类似问题时，应首先考虑贪心策略是否适用，尤其是在需要最大化或最小化某个值的场景中。同时，注意处理边界条件，如第一个数的特殊处理，以及数据类型的选择（如`long long`）。

---
处理用时：24.46秒
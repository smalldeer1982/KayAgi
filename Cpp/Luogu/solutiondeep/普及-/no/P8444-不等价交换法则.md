# 题目信息

# 不等价交换法则

## 题目背景

天弓千亦，市场之神，拥有着剥夺所有权的能力。

她希望着重建市场，在严格而公正的交易中一点点恢复自己的神力。但她看向世间一处处交易之所时，无力感却又遮住了她心中虹色的月光，把她的不甘一点点化作现实的泪。

她一次次在梦中经历着那个晚上。孤独的、神力尽失的她，紧紧攥住她那空白的卡牌，却被灵梦一把夺走。最后一张希望，也伴着虹色的月，消逝在永远的幻想中了。

也许交易本身就是不等价的吧，她想。

## 题目描述

你有 $n$ **件**商品可以买，其中第 $i$ 件的价格为 $a_i$。

蓝会给出一个正整数 $w$，代表你有 $w$ 元钱。你仅可以选择**一件**商品购买。店主允许你用已有的商品交换剩余的商品（当然了，也可以不换），但你交换获得的商品的价值和必须小于等于你用于交换的商品价值和。你想要知道，你最多能获得多少件商品。

注意：不能用空集交换其他商品。

## 说明/提示

【样例解释】

买价值为 $2$ 的物品，并交换为两个价值为 $1$ 的物品。

【数据范围及约束】

对于 $40\%$ 的数据，$n\leq 10$。

对于 $100\%$ 的数据，$1 \leq n\leq10^6$，$0 \leq a_i\leq 10^9$，$1 \leq w\leq2\times10^{9}$。


## 样例 #1

### 输入

```
3 
1 1 2
5```

### 输出

```
2```

# AI分析结果

### 算法分类
贪心

### 综合分析与结论
该题的核心思路是通过贪心策略，先购买能买得起的最贵商品，然后用它去交换尽可能多的低价商品。所有题解都围绕这一思路展开，主要区别在于实现细节和代码优化。大部分题解通过排序和遍历来实现，部分题解使用了堆等数据结构来优化查找过程。整体思路清晰，但部分题解在代码实现上存在冗余或不够简洁。

### 所选题解
1. **作者：_Give_up_ (赞：10)**
   - **星级：4.5**
   - **关键亮点：**
     - 思路清晰，先排序后贪心选择最贵商品，再从小到大交换低价商品。
     - 代码简洁，使用了快读函数优化输入效率。
     - 通过排序和遍历实现了高效的贪心策略。
   - **核心代码：**
     ```cpp
     sort(a+1,a+n+1);
     for (int i=n;i>=1;i--) {
         if (w>=a[i]) {
             k = a[i];
             break;
         }
     }
     int ans = 0;
     for (int i=1;i<=n;i++) {
         if (k>=a[i]) {
             ans++;
             k -= a[i];
         }
     }
     cout << ans << endl;
     ```

2. **作者：LYqwq (赞：7)**
   - **星级：4**
   - **关键亮点：**
     - 使用了小根堆来优化查找最小元素的过程。
     - 通过堆的初始化和管理，进一步优化了贪心策略的实现。
     - 思路清晰，代码结构合理，适合处理大规模数据。
   - **核心代码：**
     ```cpp
     h.build(a+1,n);
     for (int i=1; i<=n; i++) {
         s = max(s, a[i]<=w ? a[i] : 0);
     }
     while (!h.empty()) {
         if (h.top() <= s) {
             s -= h.top();
             h.pop();
             ans++;
         } else break;
     }
     printf("%d\n", ans);
     ```

3. **作者：5k_sync_closer (赞：5)**
   - **星级：4**
   - **关键亮点：**
     - 通过排序和二分查找优化了查找最大可购买商品的过程。
     - 代码简洁，思路清晰，适合处理大规模数据。
     - 通过贪心策略和排序实现了高效的交换过程。
   - **核心代码：**
     ```cpp
     sort(a, a + n);
     w = *(upper_bound(a, a + n, w) - 1);
     for (int i = 0; i < n; ++i) {
         if (w >= a[i]) {
             w -= a[i];
             ++q;
         }
     }
     printf("%d", q);
     ```

### 最优关键思路或技巧
1. **贪心策略**：先购买能买得起的最贵商品，然后用它去交换尽可能多的低价商品。
2. **排序优化**：通过排序和遍历实现高效的贪心策略，部分题解使用堆或二分查找进一步优化。
3. **代码简洁性**：通过合理的代码结构和优化，减少冗余代码，提高代码可读性和执行效率。

### 可拓展之处
该题的贪心策略可以应用于类似的“最大化数量”问题，如背包问题、资源分配问题等。通过排序和贪心策略，可以快速找到最优解。

### 推荐题目
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)
3. [P1803 凌乱的yyy / 线段覆盖](https://www.luogu.com.cn/problem/P1803)

---
处理用时：28.84秒
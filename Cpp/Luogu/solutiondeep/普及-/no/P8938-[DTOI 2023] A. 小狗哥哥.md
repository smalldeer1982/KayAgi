# 题目信息

# [DTOI 2023] A. 小狗哥哥

## 题目背景

luanmenglei 有一个辉煌的现在：他们班的女同学都叫他易酱。

但谁能想到 luanmenglei 有一个悲伤的过去，他五岁的弟弟叫他小狗哥哥。

## 题目描述

下文的所有参数均默认为整数。

作为一位（7k7k 小游戏的）游戏开发者，你设计了如下（简陋的不如小狗哥哥幼儿园大班的毕业设计的）游戏，存在两个要素：
1. 一个敌对生物，其血量为 $m$。
2. 主角的武器，分为 $n$ 级，第 $i$ 级的伤害是 $i\times p$。

游戏的平衡性需要提前规划，所以你还有一个序列 $\{a_n\}$，其含义如下：

- $a_i$ 表示敌对生物被第 $i$ 级武器恰好攻击 $a_i$ 下会死。

可惜你忘记了 $p$ 具体是多少，所以你需要求出所有可能的 $p$ 的个数。

如果可能有无数个 $p$，那么请输出 `xiaogougege`。



## 说明/提示

#### 【样例 1 解释】

当武器为 $1$ 级时，分析可以发现 $p$ 要满足 $1 \leq p < \frac{3}{2}$。  
当武器为 $2$ 级时，分析可以发现 $p$ 要满足 $\frac{3}{4} \leq p < \frac{3}{2}$。  
当武器为 $3$ 级时，分析可以发现 $p$ 要满足 $1 \leq p$。 

又 $p$ 是整数。综上，只有当 $p = 1$ 时满足题目所述条件。

#### 【样例 2】

见附加文件中的 `game/game2.in` 与 `game/game2.out`。

该样例满足测试点 $13\sim 20$ 的限制。

#### 【数据范围与提示】

对于所有测试数据，保证 $1\leq n \leq 10^5$，$1\leq a_i,m\leq 10^9$。

每个测试点的具体限制见下表：

|  测试点编号  |      $n\leq$ | $m,a_i\leq $ | 特殊性质 |
| :-: | :-: |:-:|:-:|
| $1\sim 9$ | $10^5$ | $10^9$ | 数据纯随机 |
|  $10 \sim 12$  |       $3$       |$5$| 无 |
| $13 \sim 20$ | $10^5$ |$10^9$| 无 |

你需要注意，上文纯随机数据的具体生成程序代码如下：

```cpp
#include <bits/stdc++.h>
using namespace std;

int n, m, w;
mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());

int rand(int l, int r) {
  assert(l <= r);
  return uniform_int_distribution<>(l, r)(rng);
} 

int main() {
  scanf("%d%d%d", &n, &m, &w);
  printf("%d %d\n", n, m);
  for (int i = 1; i <= n; i ++) printf("%d%c", rand(1, w), " \n"[i == n]);
  return 0;
}
```

通俗的说，就是对于给定的 $n,m,w(w\le 10^9)$，数据生成器会随机生成 $n$ 个值域在 $[1,w]$ 内的数，作为 $\{a_n\}$。

## 样例 #1

### 输入

```
3 3
3 2 1```

### 输出

```
1```

# AI分析结果

### 算法分类
数学

### 综合分析与结论
本题的核心在于通过不等式推导出 $p$ 的取值范围，并取所有区间的交集。难点在于处理 $a_i = 1$ 时的特殊情况，以及如何高效地计算和合并这些区间。各题解的主要思路都是通过不等式求解 $p$ 的范围，并取交集，最终判断是否有解或无穷解。

### 所选高星题解

#### 1. 作者：InoueTakina (5星)
**关键亮点**：
- 详细推导了不等式的来源，并明确指出 corner case 的处理方法。
- 通过取 $n$ 个区间的交集来求解 $p$ 的范围，思路清晰。
- 代码简洁，时间复杂度为 $\mathcal{O}(n)$，效率高。

**核心代码**：
```cpp
int n, m, a, l, r, ansl, ansr = 2000000000;

int main() {
    scanf("%d%d", &n, &m);
    for(int i = 1; i <= n; i++) {
        scanf("%d", &a);
        l = m / (i * a) + bool(m % (i * a));
        r = a > 1 ? m / (i * (a - 1)) - !(m % (i * (a - 1))) : 2000000000;
        ansl = std::max(ansl, l);
        ansr = std::min(ansr, r);
    }
    if(ansr > 1000000000) puts("xiaogougege");
    else printf("%d\n", std::max(0, ansr - ansl + 1));
}
```

#### 2. 作者：oddy (4星)
**关键亮点**：
- 明确指出了无穷解的条件，即所有 $a_i = 1$ 时 $p$ 可以取任意值。
- 通过记录分母再统一计算，简化了代码实现。
- 代码结构清晰，易于理解。

**核心代码**：
```cpp
int n, m, mn = 9e18, mx = 0;

signed main() {
    cin >> n >> m;
    for (int i = 1, a; i <= n; i++)
        cin >> a, mn = min(mn, a * i), mx = max(mx, (a - 1) * i);
    if (mx == 0)
        cout << "xiaogougege" << endl;
    else
        cout << max((int)(ceil((double)m / mx) - ceil((double)m / mn)), 0ll) << endl;
}
```

#### 3. 作者：ncwzdlsd (4星)
**关键亮点**：
- 详细解释了不等式的推导过程，并强调了 $a_i = 1$ 时的特殊情况。
- 通过向上取整和向下取整来确保 $p$ 的取值范围的准确性。
- 代码实现简洁，逻辑清晰。

**核心代码**：
```cpp
int n, m, a[maxn], l = 0, r = LLONG_MAX;

signed main() {
    cin >> n >> m;
    for(int i = 1; i <= n; i++) cin >> a[i];
    bool flag = 1;
    for(int i = 1; i <= n; i++) {
        if(a[i] != 1) flag = 0;
        if(a[i] == 1) continue;
        l = max((double)l, ceil((double)m / (i * a[i]))), r = min((double)r, ceil((double)m / (i * (a[i] - 1))));
    }
    if(flag) cout << "xiaogougege";
    else cout << max(0LL, r - l);
    return 0;
}
```

### 最优关键思路或技巧
1. **不等式推导**：通过 $(a_i - 1) \cdot i \cdot p < m \leq a_i \cdot i \cdot p$ 推导出 $p$ 的取值范围。
2. **区间交集**：取所有 $p$ 的取值区间的交集，得到最终的 $p$ 范围。
3. **特殊情况处理**：当所有 $a_i = 1$ 时，$p$ 可以取任意值，输出 `xiaogougege`。

### 可拓展之处
- 类似的不等式推导和区间交集问题可以应用于其他数学问题，如求解满足多个条件的变量范围。
- 可以进一步优化代码，减少重复计算，提高效率。

### 推荐题目
1. [P1001 A+B Problem](https://www.luogu.com.cn/problem/P1001)
2. [P1024 一元三次方程求解](https://www.luogu.com.cn/problem/P1024)
3. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045)

---
处理用时：37.50秒
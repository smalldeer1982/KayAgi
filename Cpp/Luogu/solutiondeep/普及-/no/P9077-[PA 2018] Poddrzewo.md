# 题目信息

# [PA 2018] Poddrzewo

## 题目描述

**题目译自 [PA 2018](https://sio2.mimuw.edu.pl/c/pa-2018-1/dashboard/) Runda 1 [Poddrzewo](https://sio2.mimuw.edu.pl/c/pa-2018-1/p/pod/)**

给定一个长度为 $n$ 的序列 $a$。

构造一个结点数为 $k$ 的无根树，结点编号分别为 $1 \cdots k$。该树第 $i$ 个结点的度数为 $a_i$。

有可能无解，你可以进行如下操作来使其有解：

1. 修改序列中第 $i$ 个数。
1. 删除序列中第 $i$ 个数。
1. 交换序列中第 $i,j$ 个数。

可以证明，进行有限次操作后一定有解。

你的任务是 **最小化操作 $1$ 使用的次数**。


## 说明/提示

#### 样例 1 解释

我们可以删除第 $3$ 个数字，然后更改元素的顺序。

得到最后的序列为 $(3,2,1,1,1)$。

这是构造的树的示意图：

![](https://cdn.luogu.com.cn/upload/image_hosting/ptch7dx0.png)

------------

#### 样例 2 解释

我们可以修改第 $3$ 个数字，得到最后的序列为 $(1,2,1)$。可以证明，操作 $1$ 至少需要使用 $1$ 次。

这是构造的树的示意图：

![](https://cdn.luogu.com.cn/upload/image_hosting/o6mhe76c.png)

------------

#### 数据范围

**本题采用捆绑测试**

对于 $100\%$ 的数据：

- $2 \le n \le 10^6$
- $1 \le a_i \le n-1$

保证存在至少一个子任务，其中操作 $1$ 使用次数最小值为 $0$。


## 样例 #1

### 输入

```
6
2 1 5 3 1 1```

### 输出

```
0
5
1 2
2 3
1 4
1 5```

## 样例 #2

### 输入

```
3
1 2 2```

### 输出

```
1
3
1 2
2 3```

# AI分析结果

### 算法分类
**构造**

### 综合分析与结论
本题的核心在于通过最少的修改操作，使得给定的度数序列能够构造出一棵无根树。大多数题解都采用了贪心的策略，即通过删除和交换操作，尽可能减少修改操作的使用次数。具体来说，题解们普遍认为，只需要保留两个度数为1的节点，其余节点可以通过删除操作处理，从而最小化修改操作的次数。

### 所选题解
1. **作者：Last_kiss_Snow_Dog6 (4星)**
   - **关键亮点**：通过统计序列中1的个数，直接判断是否需要修改操作，思路清晰且代码简洁。
   - **代码核心**：
     ```cpp
     if (jh >= 2) cout << "0" << endl ;
     else cout << 2 - jh << endl ;
     cout << "2" << endl << "1 2" << endl ;
     ```

2. **作者：Malkin_Moonlight (4星)**
   - **关键亮点**：明确指出了删除操作的重要性，并通过统计1的个数来最小化修改操作的使用次数。
   - **代码核心**：
     ```cpp
     if (cnt >= 2) cout << "0" << endl;
     else cout << 2 - cnt << endl;
     cout << "2" << endl << "1 2" <<endl;
     ```

3. **作者：T_TLucas_Yin (4星)**
   - **关键亮点**：通过分类讨论，详细说明了在不同情况下如何最小化修改操作的使用次数，逻辑严谨。
   - **代码核心**：
     ```cpp
     if(sum>=2) cout<<"0\n";
     else if(sum==1) cout<<"1\n";
     else cout<<"2\n";
     cout<<"2\n1 2";
     ```

### 最优关键思路或技巧
- **贪心策略**：通过删除和交换操作，尽可能减少修改操作的使用次数。
- **统计1的个数**：直接统计序列中1的个数，判断是否需要修改操作。

### 可拓展之处
- **类似问题**：在构造图或树的问题中，贪心策略和统计特定元素的数量是常见的解题思路。
- **算法套路**：贪心算法在最小化操作次数的问题中非常有效，尤其是在操作类型多样的情况下。

### 推荐题目
1. [P1351 联合权值](https://www.luogu.com.cn/problem/P1351)
2. [P1967 货车运输](https://www.luogu.com.cn/problem/P1967)
3. [P3379 【模板】最近公共祖先（LCA）](https://www.luogu.com.cn/problem/P3379)

### 个人心得摘录
- **调试经历**：在统计1的个数时，确保计数器的初始化和更新正确，避免逻辑错误。
- **踩坑教训**：在分类讨论时，注意边界条件的处理，避免遗漏某些情况。
- **顿悟感想**：通过删除操作可以大大简化问题，尤其是在操作次数不受限制的情况下。

---
处理用时：23.45秒
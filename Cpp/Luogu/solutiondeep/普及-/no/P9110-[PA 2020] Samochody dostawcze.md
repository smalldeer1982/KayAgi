# 题目信息

# [PA 2020] Samochody dostawcze

## 题目描述

**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 3 [Samochody dostawcze](https://sio2.mimuw.edu.pl/c/pa-2020-1/sam/)**

Byteasar 是一家向商店运送物资的公司的后勤人员。在他公司所在的城市里，道路网由横向的街（从西到东）和纵向的道（从南到北）组成。每一对相邻的街和相邻的道都相距一公里。我们把街按从南到北的顺序编号，把道按从西到东的顺序编号。我们将第 $i$ 条道和第 $j$ 条街的交叉点记为 $(i,j)$。你可以假设，对于任何一个整数，都存在一条街的编号为 $j$ 和一条道的编号为 $i$。

Byteasar 明天安排了 $n$ 次送货；第 $i$ 次送货将由一辆货车在时刻 $t_i$ 离开车库，以每时间单位一公里的恒定速度沿街或道行驶。每次送货可以是两种类型中的一种：对于送货类型一，车库在路口 $(w_i,0)$，货车沿道 $w_i$ 向北行驶；对于送货类型二，车库在路口 $(0,w_i)$，货车沿街 $w_i$ 向东行驶。根据计划，每个车库在任何时刻最多只有一辆车离开。

货车不必停下来——驶过收货地点时，司机只需放下要送的包裹。然而，有一个问题，如果两辆货车发现他们同一时刻在同一个十字路口，就很可能会发生碰撞。Byteasar 非常希望避免这种情况。不幸的是，他唯一能做的就是取消一些送货计划。因此，他希望取消尽可能少的送货计划，以便剩下的车中没有任何两辆车同一时刻在同一个十字路口。

## 说明/提示

#### 样例 1 解释

如果四份货物都送出，则第一和第二辆车会在时刻 $5$，在路口 $(5,3)$ 相撞。如果取消第一个送货计划，则第二和第四辆车会在时刻 $7$，在路口 $(7,3)$ 相撞。如果取消第二个送货计划，那么所有车都不会相撞了。

------------

#### 数据范围

**本题采用捆绑测试**

对于 $100\%$ 的数据，保证 $1\le n\le 5\times 10^5$，$r_i\in \{1,2\}$，$1\le w_i\le 10^6$，$0\le t_i\le 10^6$。

## 样例 #1

### 输入

```
4
1 5 2
2 3 0
2 3 6
1 7 4```

### 输出

```
1```

# AI分析结果

### 算法分类
贪心

### 综合分析与结论
该题的核心逻辑是通过贪心策略，尽可能减少删除的送货计划，以避免车辆在十字路口相撞。所有题解的思路基本一致：通过计算每辆车的 `w_i - t_i` 来分类，然后统计每类中不同方向的车辆数量，取最小值作为需要删除的车辆数。难点在于处理 `w_i - t_i` 可能为负数的情况，题解普遍采用加上一个大数（如 1e6）来避免数组越界。

### 所选高星题解
1. **题解作者：Cute_Furina**
   - **星级：4**
   - **关键亮点**：代码简洁，思路清晰，直接通过数组统计每类中不同方向的车辆数量，最后取最小值累加。
   - **代码核心**：
     ```cpp
     int p = y - z + 1000000;
     a[p][x % 2]++;
     for(int i = 0;i <= l;i ++){
         ans += min(a[i][0],a[i][1]);
     }
     ```

2. **题解作者：Sol1**
   - **星级：4**
   - **关键亮点**：分类明确，直接通过 `t_i - w_i` 分类，使用二维数组统计每类中不同方向的车辆数量，最后取最小值累加。
   - **代码核心**：
     ```cpp
     cnt[t - w + 1000005][r - 1]++;
     for (int i = 1;i <= 3000000;i++) ans += min(cnt[i][0], cnt[i][1]);
     ```

3. **题解作者：ztksc07**
   - **星级：4**
   - **关键亮点**：详细解释了相撞的条件，代码实现清晰，使用二维数组统计每类中不同方向的车辆数量，最后取最小值累加。
   - **代码核心**：
     ```cpp
     plan[t-w+d][r]++;
     for(int i=1;i<=maxn;i++){
         ans+=min(plan[i][1],plan[i][2]);
     }
     ```

### 最优关键思路或技巧
- **分类统计**：通过 `w_i - t_i` 分类，统计每类中不同方向的车辆数量，取最小值累加。
- **避免负数**：通过加上一个大数（如 1e6）来避免数组越界。

### 可拓展之处
- **类似问题**：处理时间差和位置差的问题，如车辆调度、任务安排等。
- **优化思路**：可以考虑使用更高效的数据结构（如哈希表）来进一步优化统计过程。

### 推荐题目
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
2. [P1168 中位数](https://www.luogu.com.cn/problem/P1168)
3. [P1048 采药](https://www.luogu.com.cn/problem/P1048)

### 个人心得摘录
- **Cute_Furina**：注意数据可能为负数，开个数组检查是否会撞车。
- **ztksc07**：归纳总结相撞条件，代码实现清晰，避免数组越界。

这些题解的共同点在于思路清晰，代码简洁，处理了负数情况，值得学习。

---
处理用时：23.30秒
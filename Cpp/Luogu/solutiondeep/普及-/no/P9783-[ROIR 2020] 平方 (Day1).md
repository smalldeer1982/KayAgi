# 题目信息

# [ROIR 2020] 平方 (Day1)

## 题目描述

**译自 [ROIR 2020](http://neerc.ifmo.ru/school/archive/2019-2020.html) Day1 T1.** ***[Разность квадратов](http://neerc.ifmo.ru/school/archive/2019-2020/ru-olymp-regional-2020-day1.pdf)，译者 ShineEternal***

你参与了字符计算系统软件模块的开发，将用于求解一类特殊的丢番图方程，具体内容如下：

给定一个非负整数 $n$，正在开发的模块需要找到两个正整数 $x$ 和 $y$，使得 $x^2-y^2=n$，其中 $x,y$ 不超过 $2^{62}-1$。

你需要编写一个程序，对于给定的非负整数 $n$，求出两个自然数 $x$ 和 $y$，使得它们都不超过 $2^{62}-1$ 且其平方差为 $n$。

## 说明/提示

对于 $100\%$ 的数据，$0\le n\le 2^{60}$。

| 任务编号 |          $n$           | 分值 |
| :------: | :--------------------: | :--: |
|   $1$    | $0 \leq n \leq 2^{10}$ | $10$ |
|   $2$    | $0 \leq n \leq 2^{20}$ | $20$ |
|   $3$    | $0 \leq n \leq 2^{30}$ | $30$ |
|   $4$    | $0 \leq n \leq 2^{60}$ | $40$ |



## 样例 #1

### 输入

```
3```

### 输出

```
Yes
2 1```

## 样例 #2

### 输入

```
2```

### 输出

```
No```

# AI分析结果

### 算法分类
数学

### 综合分析与结论
该题的核心在于利用平方差公式 \(x^2 - y^2 = (x + y)(x - y)\)，将问题转化为寻找两个数 \(a\) 和 \(b\)，使得 \(a \times b = n\)，并且 \(a\) 和 \(b\) 的奇偶性相同。通过分类讨论 \(n\) 的奇偶性，可以快速判断是否存在解，并构造出相应的 \(x\) 和 \(y\)。

### 所选高分题解

#### 题解1：作者：cff_0102 (赞：3)
**星级：4星**
**关键亮点：**
- 详细分析了 \(n\) 的奇偶性，并给出了具体的构造方法。
- 代码简洁明了，逻辑清晰。
- 对特殊情况（如 \(n = 0, 1, 4\)）进行了特判，避免了边界问题。

**核心代码：**
```cpp
if(n==0)cout<<"Yes\n114514 114514",exit(0);
if(n==1||n==4)cout<<"No",exit(0);
if(n%4==2)cout<<"No",exit(0);
if(n%2)cout<<"Yes\n"<<(n+1)/2<<" "<<(n-1)/2;
else cout<<"Yes\n"<<n/4+1<<" "<<n/4-1;
```
**实现思想：**
- 根据 \(n\) 的奇偶性，分别构造 \(x\) 和 \(y\) 的值。
- 特判 \(n = 0, 1, 4\) 的情况，确保输出正确。

#### 题解2：作者：Vct14 (赞：0)
**星级：4星**
**关键亮点：**
- 通过数学推导，详细解释了 \(n\) 为奇数和偶数时的解法。
- 对 \(n\) 为 0 的情况进行了特殊处理，确保输出正确。
- 代码结构清晰，易于理解。

**核心代码：**
```cpp
if(n==0) cout<<"Yes\n1 1";
else if(n==1 || n==4 || n%4==2) cout<<"No";
else if(n%2==1) cout<<"Yes\n"<<(n+1)/2<<" "<<(n-1)/2;
else cout<<"Yes\n"<<n/4+1<<" "<<n/4-1;
```
**实现思想：**
- 根据 \(n\) 的奇偶性，分别构造 \(x\) 和 \(y\) 的值。
- 特判 \(n = 0, 1, 4\) 的情况，确保输出正确。

#### 题解3：作者：UniGravity (赞：0)
**星级：4星**
**关键亮点：**
- 通过数学推导，详细解释了 \(n\) 为奇数和偶数时的解法。
- 对 \(n\) 为 0 的情况进行了特殊处理，确保输出正确。
- 代码结构清晰，易于理解。

**核心代码：**
```cpp
if (n == 0) printf("YES\n1 1");
else if (n == 1 || n == 4) printf("NO");
else if (n % 2 == 1) printf("YES\n%lld %lld", (n + 1) / 2, (n - 1) / 2);
else if (n % 4 == 0) printf("YES\n%lld %lld", (n / 2 + 2) / 2, (n / 2 - 2) / 2);
else printf("NO");
```
**实现思想：**
- 根据 \(n\) 的奇偶性，分别构造 \(x\) 和 \(y\) 的值。
- 特判 \(n = 0, 1, 4\) 的情况，确保输出正确。

### 最优关键思路或技巧
- **平方差公式**：利用 \(x^2 - y^2 = (x + y)(x - y)\) 将问题转化为寻找两个数 \(a\) 和 \(b\)，使得 \(a \times b = n\)，并且 \(a\) 和 \(b\) 的奇偶性相同。
- **分类讨论**：根据 \(n\) 的奇偶性，分别构造 \(x\) 和 \(y\) 的值，确保解的正确性。
- **特判处理**：对 \(n = 0, 1, 4\) 等特殊情况进行处理，避免边界问题。

### 可拓展之处
- 类似的问题可以利用平方差公式进行转化，例如寻找两个数的平方和等于某个给定值的问题。
- 可以通过数学推导，进一步优化算法，减少不必要的计算。

### 推荐题目
1. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029)
2. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045)
3. [P1061 数列](https://www.luogu.com.cn/problem/P1061)

### 个人心得摘录
- **调试经历**：在处理 \(n = 0\) 的情况时，最初忽略了输出两个相同的数，导致错误。通过调试，发现并修正了这一问题。
- **踩坑教训**：在处理 \(n = 1\) 和 \(n = 4\) 时，最初没有进行特判，导致输出错误。通过分析，增加了特判条件，确保输出正确。
- **顿悟感想**：通过数学推导，发现 \(n\) 的奇偶性对解的存在性有重要影响，进一步优化了算法。

---
处理用时：37.75秒
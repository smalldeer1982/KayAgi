# 题目信息

# [语言月赛202212] 狠狠地切割(Easy Version)

## 题目描述

现给你一个长度为 $n$ 的序列 $a _ 1, \cdots, a _ n$ 和 $m$ 个互不相同的整数 $b _ 1, \cdots, b _ m$。你需要按照这 $m$ 个数对序列 $a$ 进行**狠狠地切割**。

具体的，对于一个数字 $i \in [1, n]$，如果存在一个整数 $j \in [1, m]$，使得 $a _ i = b _ j$，则将位置 $i$ 称为一个**切割点**。对序列 $a$ 中的每一个切割点，我们在这个位置进行一次**狠狠地切割**。方法是，将该位置的数字去除，然后在这个位置将其左右的**序列/片段**一分两半。

如果对**狠狠地切割**的定义有疑问，可以参照「样例 #1」及「样例解释 #1」进行理解。

你需要计算，在进行了所有可能的**狠狠地切割**后，序列被切割为了多少**片段**。

特别的，如果在切割后，某一段内没有数组，那这一段不可被叫做**片段**。同样的，如果 $1$ 或 $n$ 为切割点，其与开头和结尾之间也不存在片段。

如果对**片段**的概念有疑问，可以参照「样例 #2」及「样例解释 #2」进行理解。

## 说明/提示

### 样例 1 解释

在**狠狠地切割**前，序列 $a$ 如下所示：

$$\begin{matrix} 3 & 4 & 3 & 5 & 2 & 6 \end{matrix}$$

容易知道，第二个位置和第四个位置为切割点，我们使用 `|` 对其进行替换，代表去除工作：

$$\begin{matrix} 3 & | & 3 & | & 2 & 6 \end{matrix}$$

我们将片段进行简单的标记：

$$\begin{matrix} \overbrace{3} ^ \text{片段 1} & | & \overbrace{3} ^ \text{片段 2} & | & \overbrace{2 \quad 6} ^ \text{片段 3} \end{matrix}$$

共计 $3$ 个片段。

### 样例 2 解释

以下我们展示去除之后的序列：

$$\begin{matrix} | & 4 & | & | & 2 & | \end{matrix}$$

我们将片段进行简单的标记：

$$\begin{matrix} \overbrace{\vphantom{0}} ^ \text{\color{red}这个不是片段} | & \overbrace{4} ^ \text{片段 1} & | & \overbrace{\vphantom{0}} ^ \text{\color{red}这个不是片段} & | & \overbrace{2} ^ \text{片段 2} & | \overbrace{\vphantom{0}} ^ \text{\color{red}这个不是片段}\end{matrix}$$

共计 $2$ 个片段。

### 数据规模与约定

- 对于 $20\%$ 的数据，保证 $n, m \leq 10$。
- 对于 $70\%$ 的数据，保证 $n, m \leq 5 \times 10 ^ 3$。
- 对于 $100\%$ 的数据，保证 $1 \leq n, m \leq 5 \times 10 ^ 5$，$1 \leq a_i,b_i \leq 5 \times 10^{6}$。

### 提示
本题输入规模较大，建议考虑使用较快的读入读出方式。

## 样例 #1

### 输入

```
6 2
3 4 3 5 2 6
5 4```

### 输出

```
3```

## 样例 #2

### 输入

```
6 3
3 4 3 5 2 6
3 5 6```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
本题核心在于快速标记切割点并正确统计连续非切割区间。各解法针对不同数据规模采用不同标记策略：数组标记法（数值范围小）、哈希表/二分/双指针（数值范围大）。统计片段时均采用线性扫描计数法。最优解根据数据范围选择，Easy Version中数组标记法最优。

---

### 精选题解分析

#### 题解作者：Maxmilite（5星）
**关键亮点**  
1. 分版本处理思路清晰，明确不同方法的适用场景  
2. 提供多种优化思路（数组标记、哈希、二分、双指针）  
3. 统计逻辑代码简洁，处理边界条件完善  

**个人心得引用**  
> "序列的结尾不一定为切割点，所以这里要特殊处理" —— 强调末尾未切割区间的处理易错点  

**核心代码实现**  
```cpp
int cnt = 0, ans = 0;
for (int i = 1; i <= n; ++i) {
    if (is_cut[i]) { // 切割点标记
        if (cnt > 0) ans++;
        cnt = 0;
    } else {
        cnt++;
    }
}
if (cnt > 0) ans++; // 处理末尾
```

---

### 最优思路提炼
1. **快速标记切割点**  
   - 小范围：直接数组索引 O(1) 查询  
   - 大范围：排序后双指针 O(n+m) 线性匹配  
2. **区间统计技巧**  
   - 维护连续非切割点计数，遇切割点重置并累加答案  
   - 特别注意末尾未闭合区间的处理  

---

### 拓展与举一反三
**类似题目推荐**  
1. [P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102)（哈希/双指针找差值对）  
2. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)（序列分割与最小区间统计）  
3. [P1177 快速排序](https://www.luogu.com.cn/problem/P1177)（大规模数据排序实践）  

**关键技巧迁移**  
- 元素存在性查询可迁移至两数之和类问题  
- 区间统计方法可用于括号匹配、线段覆盖等场景  
- 双指针技巧在有序数据匹配中效率显著

---
处理用时：104.02秒
# 题目信息

# [厦门小学生 C++ 2022] 方阵排序

## 题目背景

本试题为 2022 年厦门市小学生 C++ 语言**复赛**试题，数据为洛谷自造。

**初赛**为笔试。

## 题目描述

班主任高老师是一位特别关注班级学习氛围建设的老师，每次考完试，高老师都想知道目前班级的每个座位上同学的名次情况，以便于重调座位，把不同水平的同学的座位分布均匀。已知高老师班级的座位分布是一个 $N\times N$ 的方阵，即 $N$ 排 $N$ 列，每个学生的成绩为 $0\sim 100$ 之间的正整数，现在高老师请会编程的你帮忙打印出名次方阵，即输出新的 $N\times N$ 方阵，每个位置把成绩替换成对应的名次，特别注意同分都取相同名次，请参考以下输入输出样例。

## 说明/提示

### 样例解释

$3$ 行 $3$ 列，共 $9$ 个学生，其中两个 $90$ 分，名次均为 $3$，所以没有名次 $4$，直接到名次 $5$。

### 数据范围

- 对于 $60\%$ 的数据，$N\leq 10$。
- 对于 $100\%$ 的数据，$N\leq 100$。


## 样例 #1

### 输入

```
3
5 50 65
70 80 90
90 95 100```

### 输出

```
9 8 7
6 5 3
3 2 1```

# AI分析结果



### 综合分析与结论
本题解的核心在于处理同分同名次并快速生成排名方阵。三种解法均通过排序+名次处理实现目标，但实现方式各有不同。其中利用相反数排序+二分查找的解法在代码简洁性和时间复杂度上有明显优势，而结构体存储原始坐标的解法更易理解实现逻辑。

---

### 高分题解推荐
#### 题解2（qianyuzhe） ⭐⭐⭐⭐⭐
**关键亮点**：  
- 巧妙利用相反数将降序转化为升序排序，配合`lower_bound`实现快速二分查找  
- 代码极度简洁（仅15行），空间利用率高  
- 时间复杂度稳定为O(n² log n)，适合大数据量  

**核心代码**：  
```cpp
sort(b,b+n*n); //对相反数升序排序（等效原数组降序）
for(...) 
    lower_bound(b,b+n*n,-a[i*n+j])-b+1; //通过二分查找快速定位排名
```

#### 题解1（liwanxian） ⭐⭐⭐⭐
**关键亮点**：  
- 使用结构体记录坐标，逻辑清晰易理解  
- 线性遍历处理并列排名，过程直观  
- 代码注释完整，适合教学演示  

**核心代码**：  
```cpp
sort(sl.begin(), sl.end(), cmp); //按成绩降序排序
for(int i=0; i<sl.size(); i++) {
    if(i>0 && sl[i].scr < sl[i-1].scr) rk = i+1; //处理名次跳跃
    ans[sl[i].r][sl[i].c] = rk;
}
```

#### 题解3（liuli688） ⭐⭐⭐⭐  
**关键亮点**：  
- 使用pair同时存储成绩和原始坐标  
- 通过比较相邻元素处理并列，逻辑严密  
- 输出时直接按原始顺序重组方阵  

---

### 关键思路总结
1. **排序预处理**：将成绩降序排序是核心前提，所有解法均采用此步骤  
2. **名次映射技巧**：  
   - 通过结构体/pair记录原始坐标，确保能正确回填排名  
   - 利用`lower_bound`快速定位排名，避免显式遍历处理  
3. **并列处理**：通过比较相邻元素或二分查找确保同分同名次  

---

### 拓展训练推荐
1. **P1093 [NOIP2007 普及组] 奖学金** - 多条件排序+排名处理  
2. **P1781 宇宙总统** - 大数排序与坐标映射  
3. **P1068 [NOIP2009 普及组] 分数线划定** - 并列排名处理的实际应用  

---

### 题解心得摘录
1. "取相反数升序排列等效原数组降序"（题解2）  
   → **技巧**：灵活运用数值特性转换排序方向  
2. "rk=i+1的更新条件需严格比较相邻元素"（题解1）  
   → **注意点**：名次跳跃的判断需仔细处理边界条件  
3. "pair的第二维保存原始坐标"（题解3）  
   → **经验**：复合数据结构可有效保存多维信息

---
处理用时：83.72秒
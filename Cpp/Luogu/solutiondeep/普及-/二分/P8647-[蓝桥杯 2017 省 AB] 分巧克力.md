# 题目信息

# [蓝桥杯 2017 省 AB] 分巧克力

## 题目描述

儿童节那天有 $K$ 位小朋友到小明家做客。小明拿出了珍藏的巧克力招待小朋友们。

小明一共有 $N$ 块巧克力，其中第 $i$ 块是 $H_i \times W_i$ 的方格组成的长方形。

为了公平起见，小明需要从这 $N$ 块巧克力中切出 $K$ 块巧克力分给小朋友们。切出的巧克力需要满足：

1. 形状是正方形，边长是整数。

2. 大小相同。

例如一块 $6 \times 5$ 的巧克力可以切出 $6$ 块 $2 \times 2$ 的巧克力或者 $2$ 块 $3 \times 3$ 的巧克力。

当然小朋友们都希望得到的巧克力尽可能大，你能帮小 $H_i$ 计算出最大的边长是多少么？

## 说明/提示

蓝桥杯 2022 省赛 A 组 I 题。

## 样例 #1

### 输入

```
2 10  
6 5  
5 6  ```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
所有题解均围绕「二分答案」核心思路展开，验证了答案的单调性特征。主要差异体现在二分模板的选择、边界处理方式及代码风格。暴力解法在本题数据范围下不可行（N=1e5时时间复杂度达O(1e10)），二分法以O(N logW)的时间复杂度成为唯一可行解。

---

### 精选题解列表

#### 1. 作者：_xbt（★★★★★）
**核心亮点**  
- 使用最简洁的标准二分模板，边界处理严谨（`mid=(l+r+1)/2`避免死循环）
- 分离check函数提升可读性，代码结构清晰
- 预处理输入数据，使用位运算优化除法

**关键代码**  
```cpp
int check(int x){
    int ans=0;
    for(int i=0;i<n;i++) ans+=(a[i]/x)*(b[i]/x);
    return ans>=k; // 直接返回比较结果
}

// 二分部分
int l=1,r=100000;
while(l<r){
    int mid=(l+r+1)>>1; // 注意+1防止死循环
    if(check(mid)) l=mid;
    else r=mid-1;
}
```

#### 2. 作者：MspAInt（★★★★☆）
**核心亮点**  
- 详细解释单调性原理，适合新手理解
- 指出二分区间可扩展到1e9仍保持高效
- 强调时间复杂度分析，帮助读者建立复杂度意识

**代码片段**  
```cpp
bool check(int x){
    int cnt=0;
    for(int i=1;i<=n;i++) 
        cnt+=(a[i]/x)*(b[i]/x);
    return cnt>=k; 
}
// 使用(l + r + 1)/2保证向上取整
```

#### 3. 作者：ZKqwq（★★★★☆）
**创新点**  
- 在check函数中提前终止累加（`if(cnt >=k) return true`）
- 显式处理长整型转换，避免溢出风险
- 使用`max({...})`语法求最大值

**优化实现**  
```cpp
bool check(int mid){
    int cnt = 0;
    for(int i = 0; i < n; i++){
        cnt += (h[i]/mid) * (w[i]/mid);
        if(cnt >= k) return true; // 提前退出优化
    }
    return false;
}
```

---

### 关键思路总结
1. **单调性证明**：当边长x增大时，总块数单调递减，这是二分可行性的核心
2. **二分模板选择**：采用「找最后一个可行解」的模板，需注意`mid=(l+r+1)/2`
3. **计算优化**：每块巧克力的分割数公式为`(h/x)*(w/x)`，使用整数除法
4. **边界初始化**：右边界可取1e5或各巧克力边长的最大值

---

### 同类题目推荐
1. [P2440 木材加工](https://www.luogu.com.cn/problem/P2440)  
   （同样需要二分寻找最大切割长度）
2. [P1873 砍树](https://www.luogu.com.cn/problem/P1873)  
   （最大最小化问题，二分答案经典题）
3. [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)  
   （通过二分答案寻找最小化最大值的典型应用）

---

### 调试经验摘录
来自 **kkxacj 的暴力解法**：  
> "当算完一遍后，还不满足k，那么以后也一定不会再大于k，直接结束循环"  
**总结**：在暴力法中利用单调性提前终止，虽无法解决大数据问题，但体现了问题特性分析的重要性

来自 **Samson2010 的注释**：  
> "r=mid-1时mid=(l+r+1)/2，否则会超时"  
**启示**：二分边界处理需要严格数学验证，死循环是常见调试难点

---
处理用时：55.29秒
# 题目信息

# 单词方阵

## 题目描述

给一 $n \times n$ 的字母方阵，内可能蕴含多个 `yizhong` 单词。单词在方阵中是沿着同一方向连续摆放的。摆放可沿着 $8$ 个方向的任一方向，同一单词摆放时不再改变方向，单词与单词之间可以交叉，因此有可能共用字母。输出时，将不是单词的字母用 `*` 代替，以突出显示单词。

## 样例 #1

### 输入

```
7
aaaaaaa
aaaaaaa
aaaaaaa
aaaaaaa
aaaaaaa
aaaaaaa
aaaaaaa
```

### 输出

```
*******
*******
*******
*******
*******
*******
*******
```

## 样例 #2

### 输入

```
8
qyizhong
gydthkjy
nwidghji
orbzsfgz
hhgrhwth
zzzzzozo
iwdfrgng
yyyygggg```

### 输出

```
*yizhong
gy******
n*i*****
o**z****
h***h***
z****o**
i*****n*
y******g```

# AI分析结果



### 综合分析与结论
题目要求在矩阵中查找特定单词的8方向连续路径，核心难点在于方向一致性和路径标记。题解主要采用DFS/BFS、预存方向向量、染色标记等技巧。高质量题解需兼顾代码简洁性、正确性及优化思路。

---

### 精选题解分析

#### 1. 灯芯糕（赞1635）⭐⭐⭐⭐⭐
**核心思路**  
- 预处理所有'y'的位置存入数组  
- 对每个'y'的8个邻接方向检查'i'，确定方向后递归验证后续字符  
- 使用染色数组标记有效路径  

**关键实现**  
```cpp
bool f(int i,int j,int m,int n,int next){ //m,n为方向增量
    if(next>=8){ s[i][j]=1; return 1; }
    if(a[i+m][j+n]==k[next] && f(i+m,j+n,m,n,next+1)){ 
        s[i][j]=1; //回溯时染色
        return 1;
    }
    return 0;
}
```
**亮点**  
- 预处理'y'大幅减少无效搜索  
- 递归回溯时染色，确保完整路径标记  
- 方向数组预存8方向增量，代码简洁  

#### 2. hzg0226（赞389）⭐⭐⭐⭐  
**核心思路**  
- 使用结构体数组记录路径坐标  
- 沿8个方向直线搜索，发现完整路径后统一染色  

**关键实现**  
```cpp
void dfs(int x,int y,int di){
    for(int j=0;j<7;j++){ //沿固定方向检查7字符
        if(sta[j]!=a[a.x][b.y]) return; 
    }
    for(int j=0;j<7;j++) //统一标记路径
        mark[x+j*dx[di]][y+j*dy[di]]=1;
}
```
**亮点**  
- 结构体存储路径坐标，逻辑清晰  
- 先全路径验证后统一标记，避免回溯  
- 方向处理模块化，易维护  

#### 3. 拱垲（赞450）⭐⭐⭐⭐  
**核心思路**  
- DFS增加方向参数，确保单方向连续  
- 使用switch-case处理不同方向的递归  

**关键片段**  
```cpp
switch(f){ //根据方向选择递归分支
case 1: if(dfs(n-1,m-1,no+1,f)){...}
case 5: //初始方向尝试所有8方向
    dfs(n-1,m-1,no+1,1);
    dfs(n-1,m,no+1,2); //...
```
**亮点**  
- 通过方向参数解决路径转向问题  
- 详细对比60分与AC代码差异，教学性强  
- switch处理多方向，逻辑直观  

---

### 最优技巧总结
1. **方向向量预存**：将8个方向的Δx,Δy存入数组，简化方向遍历  
2. **起点预处理**：先收集所有'y'位置，避免全矩阵扫描  
3. **直线验证**：确定方向后直线验证后续字符，而非多向DFS  
4. **回溯染色**：在递归返回时标记路径，确保完整匹配后才染色  

---

### 相似题目推荐
1. [P1101 单词方阵](https://www.luogu.com.cn/problem/P1101)（本题）  
2. [P1605 迷宫](https://www.luogu.com.cn/problem/P1605)（基础DFS方向遍历）  
3. [P1131 潜伏者](https://www.luogu.com.cn/problem/P1131)（矩阵中的模式匹配）  
4. [P2298 最大正方形](https://www.luogu.com.cn/problem/P2298)（二维矩阵特征路径搜索）  

---

### 调试经验摘录
- **方向数组陷阱**：坐标增量需与矩阵存储顺序一致（如行在前列在后）  
- **越界检查**：必须在每次递归前判断坐标有效性（常见RE原因）  
- **染色时机**：应在完整路径确认后标记，而非中途标记（易导致错误覆盖）  
- **字符串索引**：目标字符串"yizhong"的索引从0或1开始需统一（常见WA原因）

---
处理用时：71.91秒
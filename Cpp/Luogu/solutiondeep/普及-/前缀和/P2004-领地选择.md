# 题目信息

# 领地选择

## 题目描述

作为在虚拟世界里统帅千军万马的领袖，小 Z 认为天时、地利、人和三者是缺一不可的，所以，谨慎地选择首都的位置对于小 Z 来说是非常重要的。

首都被认为是一个占地 $C\times C$ 的正方形。小 Z 希望你寻找到一个合适的位置，使得首都所占领的位置的土地价值和最高。


## 说明/提示

对于 $60\%$ 的数据，$N,M\le 50$。

对于 $90\%$ 的数据，$N,M\le 300$。

对于 $100\%$ 的数据，$1\le N,M\le 10^3$，$1\le C\le \min(N,M)$。

## 样例 #1

### 输入

```
3 4 2
1 2 3 1
-1 9 0 2
2 0 1 1
```

### 输出

```
1 2
```

# AI分析结果



### 综合分析与结论
本题核心是二维前缀和的优化应用。所有题解均围绕如何高效计算固定尺寸子矩阵的最大和展开，主要思路差异在于前缀和的实现方式与坐标转换细节。最优解法时间复杂度为O(N*M)，核心在于预处理二维前缀和数组，将子矩阵和查询优化至O(1)。

---

### 高星题解推荐
#### 1. GossWandering（⭐⭐⭐⭐⭐）
**关键亮点**：  
- 从暴力解法引出优化思路，图解辅助理解二维前缀和原理  
- 详细推导转移方程与子矩阵和计算式  
- 代码清晰规范，注释明确边界处理  
**个人心得**：  
> "原来，我们的程序有些地方算重复了... 经典的解决方法——预处理"  
> 强调通过观察重复计算模式，引出前缀和的必要性，体现调试思维。

#### 2. 睿屿青衫（⭐⭐⭐⭐）
**关键亮点**：  
- 直接给出简洁的前缀和实现  
- 强调易错点（坐标转换需+1，初始化负无穷）  
- 代码中明确处理右下角转左上角的坐标转换  
**核心代码**：  
```cpp
for(int i=c;i<=n;++i)
 for(int j=c;j<=m;++j) {
    int sum = s[i][j] - s[i-c][j] - s[i][j-c] + s[i-c][j-c];
    if(sum>maxx) xx=i-c+1, yy=j-c+1;
 }
```

#### 3. 神阈小杰（⭐⭐⭐）
**关键亮点**：  
- 代码极简风格，突出核心逻辑  
- 使用长整型防止溢出（部分测试点需要）  
**核心公式**：  
```cpp
sum[i][j] = sum[i][j] - sum[i][j-c] - sum[i-c][j] + sum[i-c][j-c]
```

---

### 最优关键思路
**二维前缀和预处理**：  
1. 预处理公式：`f[i][j] = f[i-1][j] + f[i][j-1] - f[i-1][j-1] + val[i][j]`  
2. 子矩阵和公式：`sum = f[x2][y2] - f[x1-1][y2] - f[x2][y1-1] + f[x1-1][y1-1]`  
3. 遍历所有可能的右下角坐标(i,j)，计算对应的左上角(i-C+1, j-C+1)

---

### 举一反三
1. **类似技巧**：一维前缀和、三维前缀和、积分图  
2. **同类题目**：  
   - [P1719 最大加权矩形](https://www.luogu.com.cn/problem/P1719)  
   - [P1387 最大正方形](https://www.luogu.com.cn/problem/P1387)  
   - [P2004 领地选择（原题变式）](https://www.luogu.com.cn/problem/P2004)  

---

### 核心代码实现
```cpp
// 预处理二维前缀和
for(int i=1; i<=n; ++i)
    for(int j=1; j<=m; ++j)
        f[i][j] = f[i-1][j] + f[i][j-1] - f[i-1][j-1] + val[i][j];

// 遍历所有可能的右下角
int max_sum = -INF, x, y;
for(int i=C; i<=n; ++i)
    for(int j=C; j<=m; ++j) {
        int cur = f[i][j] - f[i-C][j] - f[i][j-C] + f[i-C][j-C];
        if(cur > max_sum) {
            max_sum = cur;
            x = i-C+1; // 转换为左上角坐标
            y = j-C+1;
        }
    }
```

---
处理用时：64.61秒
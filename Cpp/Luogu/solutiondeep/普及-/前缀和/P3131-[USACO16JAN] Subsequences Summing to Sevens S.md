# 题目信息

# [USACO16JAN] Subsequences Summing to Sevens S

## 题目描述

Farmer John 的 $N$ 头奶牛站成一排，这是它们时不时会做的事情。每头奶牛都有一个独特的整数 ID 编号，以便 Farmer John 能够区分它们。Farmer John 希望为一组连续的奶牛拍照，但由于童年时与数字 $1 \ldots 6$ 相关的创伤事件，他只希望拍摄一组奶牛，如果它们的 ID 加起来是 7 的倍数。

请帮助 Farmer John 确定他可以拍摄的最大奶牛组的大小。

## 说明/提示

在这个例子中，$5+1+6+2+14 = 28$。

## 样例 #1

### 输入

```
7
3
5
1
6
2
14
10```

### 输出

```
5```

# AI分析结果



### 综合分析与结论
本题核心在于利用前缀和的模7余数性质，通过记录相同余数的首次和末次出现位置，将时间复杂度优化至O(n)。最优解法为前缀和+余数哈希表法，动态规划解法虽可行但效率稍逊。

---

### 高星题解推荐

#### 1. 作者：「已注销」 (⭐⭐⭐⭐⭐)
**关键亮点**  
- 边读入边处理，一次遍历完成余数记录  
- 空间优化到常数级别（7个元素数组）  
- 正确初始化余数0的起始位置，处理全区间情况  
**核心实现**  
```cpp
int n,a,s,l[]={0,-1,-1,-1,-1,-1,-1},r[7],ans;
int main(){
    scanf("%d",&n);
    for(int i=1;i<=n;++i){
        scanf("%d",&a);
        s=(s+a)%7;
        if(l[s]==-1)l[s]=i;  // 记录首次出现位置
        r[s]=i;              // 更新末次出现位置
    }
    for(int i=0;i<7;++i)
        if(l[i]!=-1)ans=max(ans,r[i]-l[i]);
    printf("%d",ans);
}
```

#### 2. 作者：人殇物已非 (⭐⭐⭐⭐)
**关键亮点**  
- 逆序扫描确保首次出现为最小下标  
- 显式处理余数0的边界条件  
**个人心得**  
> "被hack后发现余数0的初始位置需设为0，否则无法处理从头开始的合法区间"

#### 3. 作者：言琢დ (⭐⭐⭐⭐)
**关键亮点**  
- 独立记录每个余数的首尾位置  
- 严谨的越界检查与初始化  
**核心代码**  
```cpp
int s[N],L[7],R[7];
int main(){
    L[0]=0; // 关键初始化
    for(int i=1;i<=n;++i){
        s[i]=(s[i-1]+in())%7;
        if(L[s[i]]==INIT_VAL) L[s[i]]=i;
        R[s[i]]=i;
    }
    for(int i=0;i<7;++i)
        ans=max(ans,R[i]-L[i]);
}
```

---

### 最优思路提炼
**关键算法**：前缀和模7 + 余数哈希表  
1. 计算前缀和模7的值  
2. 对每个余数记录首次和末次出现位置  
3. 最大合法区间长度 = 末次位置 - 首次位置  
**核心技巧**：  
- 余数0的首次位置初始化为0，处理全区间合法的情况  
- 只需7个元素的哈希表存储位置，空间复杂度O(1)

---

### 拓展应用
**同类问题**：  
- 求区间和为k的倍数的最长子数组（LeetCode 523）  
- 寻找乘积为特定值的连续子数组  
**推荐题目**：  
1. P3406 海底高铁（前缀和基础应用）  
2. P2383 修学旅行（模数性质应用）  
3. P5638 光骓者的旅行（结合模数的贪心优化）  

---

### 关键调试经验
1. **余数初始化**：若前缀和本身是7的倍数，需特殊处理初始位置  
2. **逆向扫描**：部分实现通过逆序扫描确保首次出现为最小下标  
3. **边界检查**：当整个数组和为7的倍数时，需验证代码是否能返回n

---
处理用时：102.02秒
# 题目信息

# 八百标兵奔北坡

## 题目背景

baingbaboom正在往北边跑！！！

## 题目描述

现在在一张N*M的地图上有K只babingbaboom！！！对于一张地图上的点都有一个 $ h_{i,j} $ 来表示这个地方的高度。现在这些babingbaboom都想要跑到北边的一个山坡上。求出离每一个babingbaboom最近的靠北的山。

补充定义：

山：

山的周围没有比它更高的地方。(四联通)

在北边：

令Babingbaboom的坐标为$A(a,b)$，山的坐标为$B(x,y)$，山在Babingbaboom的北边当且仅当$dis_{A,B}==a-x$

切比雪夫距离:

$ A(x_1,y_1) \qquad B(x_2,y_2) : \qquad dis_{A,B}=max(|x_1 - x_2|, |y_1 - y_2|)$


## 说明/提示

$$ 1 \leqslant  N,M \leqslant 1e3 $$
$$ 1 \leqslant  K \leqslant 1e5 $$
$$ 1 \leqslant  h_{i,j} \leqslant 1e9 $$
数据有梯度！

样例图片(星代表一个Babingbaboom，红色代表一个山)：
![](https://cdn.luogu.com.cn/upload/pic/22827.png)
(竖的是x，横的是y。画的时候没注意，很抱歉。)

## 样例 #1

### 输入

```
5 5 5
1 2 3 4 5
2 3 4 5 1
3 4 5 1 2
4 5 1 2 3
5 1 2 3 4
1 2
2 3
3 4
4 5
5 1
```

### 输出

```
Pool Babingbaboom!
Pool Babingbaboom!
1
2
0```

# AI分析结果



### 综合分析与结论
本题核心在于快速判断每个查询点的最近北向山。暴力枚举法（逐层搜索）时间复杂度高，难以处理大规模数据。动态规划方法通过预处理每个点的最近山距离，将查询降至O(1)，是更优解。

### 高星题解推荐
1. **题解作者：b2019dy（★★★★★）**  
   **关键亮点**：  
   - 清晰的动态规划思路，状态转移方程简洁高效。  
   - 预处理时间复杂度O(NM)，查询O(1)，完美适配数据规模。  
   - 代码可读性强，逻辑紧凑。  
   **核心代码**：  
   ```cpp
   for(int i=1;i<=n;i++)
   for(int j=1;j<=m;j++) {
       if(h[i][j]>h[i-1][j] && h[i][j]>h[i+1][j] && ... )
           f[i][j] = 0; // 山
       else
           f[i][j] = min(f[i-1][j-1], f[i-1][j], f[i-1][j+1]) +1;
   }
   ```

2. **题解作者：神眷之樱花（★★★★☆）**  
   **关键亮点**：  
   - 手写`min`函数优化性能，代码实测效率高。  
   - 状态转移逻辑清晰，边界处理严谨。  
   **核心代码**：  
   ```cpp
   bool cmp(int i,int j) {
       // 判断是否为山
   }
   int minn(int i,int j) {
       return min(f[i-1][j-1], min(f[i-1][j], f[i-1][j+1])) +1;
   }
   ```

3. **题解作者：HPXXZYY（★★★★☆）**  
   **关键亮点**：  
   - 离线处理优化，动态更新已计算的行。  
   - 代码简洁，直接体现动态规划思想。  

### 关键思路总结
1. **动态规划预处理**：  
   - 定义`f[i][j]`为点`(i,j)`到最近北向山的切比雪夫距离。  
   - 若当前点是山，`f[i][j]=0`；否则从上一行三个相邻点转移最小值+1。  
2. **时间复杂度优化**：  
   - 预处理O(NM)，查询O(1)，彻底解决暴力法的性能瓶颈。

### 相似题目推荐
1. **P2004 领地选择**（二维前缀和与最优化问题）  
2. **P1141 01迷宫**（预处理连通块快速查询）  
3. **P1387 最大正方形**（二维动态规划经典问题）

### 题解中的个人心得摘录
- **朱屹涵2008**：  
  > “题目标签误人子弟，完全看不出是DP，乱搞压标算。”  
  **总结**：题目看似复杂，但动态规划是隐藏的高效解法，需培养抽象建模能力。

- **yzx72424**：  
  > “数据水，暴力可过，但犹豫是否用树状数组优化。”  
  **总结**：暴力法虽能通过部分数据，但面对极限数据需优先考虑最优算法。

---
处理用时：71.64秒
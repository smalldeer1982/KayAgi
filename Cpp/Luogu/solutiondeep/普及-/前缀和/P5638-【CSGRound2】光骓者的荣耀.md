# 题目信息

# 【CSGRound2】光骓者的荣耀

## 题目背景

![](https://cdn.luogu.com.cn/upload/image_hosting/s6ozu5pj.png)

小 K 又在做白日梦了。他进入到他的幻想中，发现他打下了一片江山。

## 题目描述

小 K 打下的江山一共有 $n$ 个城市，城市 $i$ 和城市 $i+1$ 有一条双向高速公路连接，走这条路要耗费时间 $a_i$。

小 K 为了关心人民生活，决定定期进行走访。他每一次会从 $1$ 号城市到 $n$ 号城市并在经过的城市进行访问。其中终点必须为城市 $n$。

不仅如此，他还有一个传送器，传送半径为 $k$，也就是可以传送到 $i-k$ 和 $i+k$。如果目标城市编号小于 $1$ 则为 $1$，大于 $n$ 则为 $n$。

但是他的传送器电量不足，只能传送一次，况且由于一些原因，他想尽量快的完成访问，于是就想问交通部部长您最快的时间是多少。

注意：**他可以不访问所有的城市，使用传送器不耗费时间**。

## 说明/提示

### 样例解释 1：

样例 1,2 的图示均为以下图片：

![MZbuTK.png](https://s2.ax1x.com/2019/11/08/MZbuTK.png)

不使用传送器直接走，答案为 $6$，可以证明这个是最小值。

### 样例解释 2：

在 $3$ 处使用，传送到 $4$，答案为 $3$，可以证明这个是最小值。

### 数据范围：

对于所有数据，$a_i > 0$

![Kvrl34.jpg](https://s2.ax1x.com/2019/11/04/Kvrl34.jpg)

## 样例 #1

### 输入

```
4 0
1 2 3```

### 输出

```
6```

## 样例 #2

### 输入

```
4 1
1 2 3```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
该题核心思路为**寻找最大连续k段和**，用总路程减去该值即为最短时间。所有题解均围绕前缀和或滑动窗口实现，关键点在于区间起止点的处理与边界条件的判断。最优解法时间复杂度为O(n)，空间复杂度O(n)或O(1)。

---

### 高星题解推荐

#### 1. 沉冥Charming（★★★★★）
**关键亮点**：  
- 明确指出贪心策略与前缀和的应用，强调必须从i=0开始循环避免遗漏边界  
- 提供调试经验：循环起始点错误导致92分，修正后AC  
- 代码简洁，包含快读优化  

**核心代码**：
```cpp
for (int i=0; i+k<n; i++) //从0开始循环
    cnt = max(cnt, sum[i+k] - sum[i]); 
cout << sum[n-1] - cnt;
```

#### 2. StudyingFather（★★★★☆）
**关键亮点**：  
- 直接点明问题本质是求最大k段连续和  
- 代码极简，仅用一次循环完成计算  
- 处理了k≥n时的特殊情况  

**核心代码**：
```cpp
for(int i=k; i<n; i++)
    ans = max(ans, sum[i] - sum[i-k]);
cout << sum[n-1] - ans;
```

#### 3. Mophie（★★★★☆）
**关键亮点**：  
- 详细分析暴力→滑动窗口的优化过程，体现算法思维  
- 提供DP解法拓展思路  
- 滑动窗口实现高效（O(1)空间）  

**滑动窗口实现**：
```cpp
for(int i=1; i<=k; i++) now += a[i];
for(int i=2; i<=n-k; i++) {
    now = now - a[i-1] + a[i+k-1];
    Max = max(Max, now);
}
```

---

### 最优技巧总结
1. **前缀和差分**：`sum[i+k] - sum[i]`快速计算区间和  
2. **滑动窗口**：动态维护当前窗口和，空间复杂度O(1)  
3. **边界处理**：i从0开始遍历，处理传送起点为1的情况  
4. **特例优化**：当k≥n-1时直接输出0  

---

### 同类题目推荐
1. **P1115 最大子段和** - 最大连续子段和模板  
2. **P1886 滑动窗口** - 滑动窗口求极值练习  
3. **P3406 海底高铁** - 前缀和的实际应用  

---

### 调试经验摘录
> "在样例中发现从i=1开始循环会漏掉1→k+1的情况，改为i=0后AC" —— 沉冥Charming  
> "开long long！数据范围到1e12，int会溢出" —— 多篇题解共同强调  
> "DP解法中dp[i][1] = min(传送/不传送)" —— Mophie提供备选思路

---
处理用时：45.79秒
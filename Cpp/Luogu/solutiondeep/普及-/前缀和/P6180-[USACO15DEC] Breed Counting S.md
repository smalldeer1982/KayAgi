# 题目信息

# [USACO15DEC] Breed Counting S

## 题目描述

Farmer John 的 $N$ 头奶牛，从左到右编号为 $1 \ldots N$，排成一队。

所有牛都可以分为三个品种，每头牛都有一个品种编号（只能为 $1,2,3$ 中的一个）。FJ 有 $Q$ 个询问，每个询问希望求出某个区间内每个品种奶牛的数量。

## 样例 #1

### 输入

```
6 3
2
1
1
3
2
1
1 6
3 3
2 4```

### 输出

```
3 2 1
1 0 0
2 0 1```

# AI分析结果



### 综合分析与结论
题目要求多次查询区间内三个品种的奶牛数量。暴力统计会超时，需用前缀和预处理每个品种的前缀和数组，查询时通过差值快速计算区间统计。所有题解均认同前缀和的高效性，其中部分实现更简洁，而线段树解法虽正确但复杂度较高。

---

### 精选题解列表

#### 1. 作者：LongDouble（5星）
**关键亮点**  
- 代码最简洁，直接使用三个独立前缀和数组。
- 正确性高，处理逻辑清晰无冗余。
- 使用`int`类型优化空间，完全适配题目数据范围。

**核心代码**  
```cpp
int s1[100010], s2[100010], s3[100010];
// 预处理前缀和
for (int i = 1; i <= n; i++) {
    int a; scanf("%d", &a);
    s1[i] = s1[i-1] + (a == 1);
    s2[i] = s2[i-1] + (a == 2);
    s3[i] = s3[i-1] + (a == 3);
}
// 查询输出
printf("%d %d %d\n", s1[r]-s1[l-1], s2[r]-s2[l-1], s3[r]-s3[l-1]);
```

#### 2. 作者：TRZ_2007（5星）
**关键亮点**  
- 代码结构规范，使用模板函数优化输入。
- 明确解释前缀和原理，适合新手学习。
- 二维数组存储各品种前缀和，逻辑直观。

**核心代码**  
```cpp
int cow[4][N]; // cow[1][i]为品种1到i的前缀和
for (int i = 1; i <= n; i++) {
    cow[1][i] = cow[1][i-1];
    cow[2][i] = cow[2][i-1];
    cow[3][i] = cow[3][i-1];
    if (x == 1) cow[1][i]++;
    // 类似处理其他品种
}
```

#### 3. 作者：Skies（5星）
**关键亮点**  
- 输入与前缀和计算同步完成，减少循环次数。
- 代码极简，合并条件判断与累加操作。
- 适合竞赛场景，追求最短代码实现。

**核心代码**  
```cpp
int p1[N], p2[N], p3[N];
for (int i = 1; i <= n; i++) {
    a[i] = read();
    p1[i] = p1[i-1] + (a[i] == 1); // 直接累加，无需分支
    p2[i] = p2[i-1] + (a[i] == 2);
    p3[i] = p3[i-1] + (a[i] == 3);
}
```

---

### 最优思路总结
**关键技巧**  
- **多前缀和数组**：为每个品种维护独立的前缀和数组，通过区间差值快速统计。
- **预处理优化**：在输入时直接计算前缀和，避免额外遍历。
- **类型选择**：根据数据范围选择`int`而非`long long`，优化空间和效率。

**拓展应用**  
类似问题如区间颜色统计、多特征区间查询（如P3131、P3406）均可采用多前缀和策略。若加入修改操作，可改用树状数组或线段树。

---

### 推荐相似题目
1. [P3131 [USACO16JAN]Subsequences Summing to Sevens S](https://www.luogu.com.cn/problem/P3131)  
2. [P3406 海底高铁](https://www.luogu.com.cn/problem/P3406)  
3. [P3662 [USACO17FEB]Why Did the Cow Cross the Road II S](https://www.luogu.com.cn/problem/P3662)

---
处理用时：94.78秒
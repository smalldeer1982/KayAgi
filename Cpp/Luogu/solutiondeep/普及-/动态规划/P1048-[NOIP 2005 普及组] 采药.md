# 题目信息

# [NOIP 2005 普及组] 采药

## 题目描述

辰辰是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同的草药，采每一株都需要一些时间，每一株也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”


如果你是辰辰，你能完成这个任务吗？


## 说明/提示

**【数据范围】**

- 对于 $30\%$ 的数据，$M \le 10$；
- 对于全部的数据，$M \le 100$。

**【题目来源】**

NOIP 2005 普及组第三题

## 样例 #1

### 输入

```
70 3
71 100
69 1
1 2
```

### 输出

```
3```

# AI分析结果



### 综合分析与结论  
本题为标准 01背包问题，所有题解均围绕动态规划展开。核心思路为：将草药时间视为物品体积，价值作为物品价值，背包容量为总时间。关键难点在于理解一维状态压缩中的逆序更新机制，避免重复计数。最优解法为使用一维 DP 数组，时间复杂度 $O(TM)$，空间复杂度 $O(T)$。

---

### 高星题解推荐  

#### 1. 作者：decoqwq（★★★★★）  
**关键亮点**：  
- 最详细的状态转移推导，结合实例逐步演示二维和一维 DP 的更新过程。  
- 深入解释一维逆序更新的必要性，通过数据模拟对比正序/逆序差异。  
- 代码可读性强，包含完整注释和边界处理。  
**核心代码**：  
```cpp
// 一维 DP 实现（逆序更新）
for(int i=1; i<=m; i++) 
    for(int j=t; j>=w[i]; j--) 
        dp[j] = max(dp[j-w[i]] + val[i], dp[j]);
```

#### 2. 作者：Ngo123（★★★★☆）  
**关键亮点**：  
- 代码极度简洁，直接给出优化后的一维 DP 实现。  
- 变量命名清晰（`w[]`为时间，`v[]`为价值），适合快速理解。  
**核心代码**：  
```cpp
for(int i=1; i<=m; i++)
    for(int j=T; j>=v[i]; j--)
        f[j] = max(f[j], f[j-v[i]] + w[i]);
```

#### 3. 作者：GZXUEXUE（★★★★☆）  
**关键亮点**：  
- 同时提供二维和优化后的一维代码，方便对比学习。  
- 数学公式与代码结合，强化理论推导。  
**核心代码**：  
```cpp
// 二维 DP 状态转移
if(w[i] <= v) 
    f[i][v] = max(f[i-1][v], f[i-1][v-w[i]] + c[i]);
```

---

### 最优思路与技巧总结  
1. **一维逆序更新**：核心优化技巧，通过倒序遍历时间避免重复选择同一物品。  
2. **滚动数组压缩**：将二维状态压缩为一维，空间从 $O(MT)$ 优化到 $O(T)$。  
3. **边界处理**：无需显式处理 `j < w[i]`，逆序循环天然规避非法状态。  

---

### 拓展与举一反三  
1. **同类问题**：  
   - 完全背包（物品无限选）：[P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)  
   - 多维费用背包：[P1507 NASA的食物计划](https://www.luogu.com.cn/problem/P1507)  
   - 分组背包：[P1757 通天之分组背包](https://www.luogu.com.cn/problem/P1757)  
2. **推荐练习**：  
   - [P2871 [USACO07DEC] Charm Bracelet](https://www.luogu.com.cn/problem/P2871)（01背包裸题）  
   - [P1060 [NOIP2006 普及组] 开心的金明](https://www.luogu.com.cn/problem/P1060)（价值计算变式）  
   - [P1164 小A点菜](https://www.luogu.com.cn/problem/P1164)（求方案数变式）  

---

### 题解中的调试经验  
- **贪心陷阱**（作者：rainygame）：通过反例强调贪心法在 01背包中的不可行性，例如当高性价比物品组合不及低性价比组合时。  
- **维度压缩验证**（作者：decoqwq）：通过打印中间 DP 数组验证逆序更新的正确性，加深对状态转移的理解。

---
处理用时：45.63秒
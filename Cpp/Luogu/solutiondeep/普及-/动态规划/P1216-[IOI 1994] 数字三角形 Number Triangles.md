# 题目信息

# [IOI 1994] 数字三角形 Number Triangles

## 题目描述

观察下面的数字金字塔。


写一个程序来查找从最高点到底部任意处结束的路径，使路径经过数字的和最大。每一步可以走到左下方的点也可以到达右下方的点。

![](https://cdn.luogu.com.cn/upload/image_hosting/95pzs0ne.png)

在上面的样例中，从 $7 \to 3 \to 8 \to 7 \to 5$ 的路径产生了最大权值。



## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1\le r \le 1000$，所有输入在 $[0,100]$ 范围内。

题目翻译来自NOCOW。

USACO Training Section 1.5

IOI1994 Day1T1

## 样例 #1

### 输入

```
5
7
3 8
8 1 0
2 7 4 4
4 5 2 6 5 
```

### 输出

```
30
```

# AI分析结果



### 综合分析与结论
该题核心考察动态规划思想，所有题解均围绕DP展开。关键优化点集中在状态转移方向选择（逆推/顺推）、空间优化（滚动数组/一维数组）和输入效率提升。最优解法为自底向上的逆推法，空间复杂度可优化至O(n)，时间复杂度稳定为O(n²)。

---

### 高星题解推荐

#### 1. linlin1024（⭐⭐⭐⭐⭐）
**核心亮点**：  
- 清晰图解逆推思想，通过逐层更新原数组实现状态压缩  
- 代码极简，直接操作输入数组节省空间  
- 时间复杂度O(n²)，空间复杂度O(n²)（可优化至O(n)）

**核心代码**：
```cpp
for(int i=n-2; i>=0; i--) 
    for(int j=0; j<=i; j++)
        a[i][j] += max(a[i+1][j], a[i+1][j+1]);
```

#### 2. iwprc（⭐⭐⭐⭐）
**核心亮点**：  
- 创新性使用一维数组优化空间至O(n)  
- 边读边处理数据，减少内存占用  
- 内层循环逆序避免覆盖问题

**核心代码**：
```cpp
for(i=n; i; i--)
    for(j=i; j<=n; j++)
        scanf("%d",&p), a[j] = max(a[j],a[j+1])+p;
```

#### 3. EternalAlexander（⭐⭐⭐⭐）
**核心亮点**：  
- 深度分析空间优化策略（滚动数组+指针）  
- 提出快读优化输入效率，适应大数据量  
- 完整演示从二维到一维的优化路径

**代码片段**：
```cpp
int *maxans = num[n]; // 指向最后一行
for(int i=n; i>=1; i--)
    for(int j=i; j>=1; j--)
        maxans[j] = max(maxans[j], maxans[j+1]) + temp;
```

---

### 关键技巧总结
1. **逆序更新策略**：自底向上递推避免重复计算，天然符合无后效性  
2. **空间压缩技巧**：滚动数组或一维数组将空间复杂度从O(n²)降至O(n)  
3. **输入优化**：快读函数处理大规模输入，比cin快10倍以上  
4. **循环方向控制**：顺推时需倒序内层循环防止数据覆盖

---

### 拓展练习推荐
1. **P1004 方格取数**（双路径DP）  
2. **P1508 Likecloud-吃吃吃**（类似数字三角形的路径模型）  
3. **P2800 又上锁妖塔**（多维状态转移+空间优化）

---

### 个人心得摘录
> "递归边界是x==n，递归式就是f[i,j]=a[i,j]+max{f[i+1,j],f[i+1,j+1]}，但直接递归会TLE" —— Mine_King  
**总结**：递归转递推是DP优化关键，记忆化搜索适合小数据量场景。

> "输入量巨大时，快读是必须的，比cin快10倍以上" —— EternalAlexander  
**总结**：IO优化在大数据问题中直接影响能否AC，不可忽视。

---
处理用时：52.42秒
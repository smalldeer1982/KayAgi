# 题目信息

# 5 倍经验日

## 题目背景

现在乐斗有活动了！每打一个人可以获得 5 倍经验！absi2011 却无奈的看着那一些比他等级高的好友，想着能否把他们干掉。干掉能拿不少经验的。

## 题目描述

现在 absi2011 拿出了 $x$ 个迷你装药物（嗑药打人可耻…），准备开始与那些人打了。

由于迷你装药物每个只能用一次，所以 absi2011 要谨慎的使用这些药。悲剧的是，用药量没达到最少打败该人所需的属性药药量，则打这个人必输。例如他用 $2$ 个药去打别人，别人却表明 $3$ 个药才能打过，那么相当于你输了并且这两个属性药浪费了。

现在有 $n$ 个好友，给定失败时可获得的经验、胜利时可获得的经验，打败他至少需要的药量。

要求求出最大经验 $s$，输出 $5s$。

## 说明/提示

**【Hint】**

五倍经验活动的时候，absi2011 总是吃体力药水而不是这种属性药。

**【数据范围】**

- 对于 $10\%$ 的数据，保证 $x=0$。
- 对于 $30\%$ 的数据，保证 $0\le n\le 10$，$0\le x\le 20$。
- 对于 $60\%$ 的数据，保证 $0\le n,x\le 100$， $10<lose_i,win_i\le 100$，$0\le use_i\le 5$。
- 对于 $100\%$ 的数据，保证 $0\le n,x\le 10^3$，$0<lose_i\le win_i\le 10^6$，$0\le use_i\le 10^3$。

**【题目来源】**

fight.pet.qq.com

absi2011 授权题目

## 样例 #1

### 输入

```
6 8
21 52 1
21 70 5
21 48 2
14 38 3
14 36 1
14 36 2
```

### 输出

```
1060```

# AI分析结果



### 综合分析与结论
本题本质是变形01背包问题，核心在于将必输经验作为基础值，胜利增益作为背包价值。最优解法通过预处理将问题转化为标准01背包，极大简化状态转移。各题解普遍采用滚动数组优化空间，但需注意long long溢出问题。

---

### 精选题解列表

#### 1. 作者：S_C_Yesterday（★★★★★）
**关键亮点**：  
- 创新性将失败经验预处理为总和，胜利经验转为差值，完美转化为标准01背包  
- 边输入边处理，空间复杂度O(x)  
- 位运算优化乘5操作，代码极简  
**个人心得**：  
> "在比赛过程中，我们有时为了满足空间要求，必须对数组进行降维打击... 使编程复杂度大大降低"  
**核心代码**：
```cpp
long long sum = 0;
for(int i=1; i<=n; i++){
    sum += lose[i];  // 累加基础经验
    int delta = win[i] - lose[i];  // 胜利的额外经验
    for(int j=x; j>=use[i]; j--)  // 标准01背包
        dp[j] = max(dp[j], dp[j-use[i]] + delta);
}
cout << (sum + dp[x]) * 5;
```

#### 2. 作者：Samsam（★★★★★）
**关键亮点**：  
- 代码最简洁（仅15行），逻辑最直白  
- 预处理阶段直接计算经验差值  
- 严格遵循标准01背包模板  
**核心代码**：
```cpp
for(int i=1; i<=n; i++){
    sum += lose[i];
    win[i] -= lose[i];  // 胜利的额外经验
    for(int j=x; j>=use[i]; j--)  // 裸01背包
        dp[j] = max(dp[j], dp[j-use[i]] + win[i]);
}
cout << (dp[x] + sum) * 5;
```

#### 3. 作者：Mr_QwQ（★★★★☆）
**关键亮点**：  
- 详细注释解释思路转换过程  
- 突出强调long long的使用教训  
**个人心得**：  
> "这题有坑..当我N次90分后才发现这TM要用long long"  
**核心代码**：
```cpp
for(int i=1; i<=n; i++){
    sum += lose[i];
    win[i] -= lose[i];  // 胜利额外值
    for(int j=x; j>=use[i]; j--)  // 经典01背包
        dp[j] = max(dp[j], dp[j-use[i]] + win[i]);
}
```

---

### 关键技巧总结
1. **经验差值法**：将必输经验作为基准，胜利经验转换为 `win-lose` 的差值，使问题回归标准01背包  
2. **滚动数组优化**：逆序更新一维数组，空间复杂度从O(nx)降为O(x)  
3. **溢出防御**：全程使用long long类型存储经验值  
4. **输入即处理**：在读取数据时直接完成预处理，节省存储空间  

---

### 举一反三推荐
1. **P1048 采药** - 标准01背包模板题  
2. **P1060 开心的金明** - 价值计算变形的01背包  
3. **P1853 投资的最大效益** - 完全背包与滚动数组结合的应用

---
处理用时：58.73秒
# 题目信息

# A+B Problem（再升级）

## 题目背景

题目名称是吸引你点进来的。

实际上该题还是很水的。


## 题目描述

- $1+1=?$ 显然是 $2$。
- $a+b=?$ P1001 回看不谢。
- 哥德巴赫猜想 似乎已呈泛滥趋势。

_以上纯属个人吐槽_

给定一个正整数 $n$，求将其分解成若干个素数之和的方案总数。



## 说明/提示

### 样例解释

存在如下三种方案：

- $7=7$。
- $7=2+5$。
- $7=2+2+3$。

### 数据范围及约定

- 对于 $30\%$ 的数据 $1\le n\le 10$。
- 对于 $100\%$ 的数据，$1\le n\le 10^3$。


## 样例 #1

### 输入

```
7```

### 输出

```
3```

## 样例 #2

### 输入

```
20```

### 输出

```
26```

# AI分析结果



### 综合分析
该题本质是完全背包模型的应用，核心是将素数视为可无限取的物品，求填满容量为n的背包的方案数。所有题解均围绕以下核心展开：
1. **素数筛法**：埃氏筛或欧拉筛预处理素数
2. **动态规划**：一维完全背包递推，状态转移方程 `dp[j] += dp[j-prime[i]]`
3. **数据范围处理**：使用`long long`存储大数结果

### 优质题解推荐
---

#### 题解1：hmh13951417981（5星）
**亮点**  
- 代码最简洁，筛法与DP无缝衔接  
- 关键注释清晰，背包循环顺序正确  
- 使用筛法剪枝优化，仅需筛到500即可覆盖1e3  
**核心代码**：
```cpp
void prime(){ // 埃氏筛优化版
    for(i=2;i<=500;i++) 
        if(!b[i]) for(j=2;i*j<=1000;j++) b[i*j]=1;
}
// 完全背包核心
dp[0] = 1;
for(i=2;i<=n;i++) 
    if(!b[i]) for(j=i;j<=n;j++) 
        dp[j] += dp[j-i];
```

---

#### 题解2：樱式分解（4星）
**亮点**  
- 包含DFS错误尝试到DP的正向推导过程  
- 对比说明两种思路差异，加深理解  
**个人心得**：  
> "一开始轻敌用DFS直接爆掉，改用背包AC。说明动态规划对计数问题的必要性。"

**核心代码**：
```cpp
bool zhu(int i){ // 朴素素数判断
    for(int j=2;j<=sqrt(i);j++) if(i%j==0) return false;
    return true;
}
// 背包递推
for(int i=1;i<=t;i++) 
    for(int j=a[i];j<=n;j++) 
        f[j] += f[j-a[i]];
```

---

#### 题解3：Julytree（4星）
**亮点**  
- 使用欧拉筛生成素数表更高效  
- 完整包含筛法实现细节  
- 变量命名清晰，结构规范  
**核心代码**：
```cpp
void pre_fir(){ // 欧拉筛实现
    for(int i=2;i<=n;i++){
        if(!vis[i]) prime[++cnt]=i;
        for(int j=1;j<=cnt && i*prime[j]<=n;j++){
            vis[i*prime[j]]=1;
            if(i%prime[j]==0) break;
        }
    }
}
```

---

### 关键思路总结
1. **筛法优化**：预处理素数时，埃氏筛只需到√n即可标记所有合数
2. **背包初始化**：`dp[0]=1` 表示空集的唯一方案，是正确计数的关键
3. **循环顺序**：外层遍历素数，内层正序更新dp数组，保证物品无限取
4. **大数处理**：方案数呈指数增长，必须使用`long long`类型

### 拓展训练
1. **同类型题**  
   - P1164 小A点菜（01背包计数）
   - P2563 质数和分解（本题双倍经验）
   - P4389 付公主的背包（生成函数优化）

2. **优化方向**  
   - 当n>1e4时，可参考NaCly_Fish的生成函数+FFT优化（理论复杂度O(n logn)）
   - 多模数CRT处理极大值，避免高精度运算

---

### 推荐题目
1. **P1613 组合数问题**（计数DP与数论结合）  
2. **P1832 A+B Problem（再再升级）**（质因数分解进阶版）  
3. **P1049 装箱问题**（完全背包基础模型）

---
处理用时：45.58秒
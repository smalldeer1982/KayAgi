# 题目信息

# [HAOI2012] 音量调节

## 题目描述

一个吉他手准备参加一场演出。他不喜欢在演出时始终使用同一个音量，所以他决定每一首歌之前他都需要改变一次音量。在演出开始之前，他已经做好一个列表，里面写着每首歌开始之前他想要改变的音量是多少。每一次改变音量，他可以选择调高也可以调低。

音量用一个整数描述。输入文件中整数 $beginLevel$，代表吉他刚开始的音量，整数 $maxLevel$，代表吉他的最大音量。音量不能小于 $0$ 也不能大于 $maxLevel$。输入中还给定了 $n$ 个整数 $c_1,c_2,c_3,\cdots,c_n$，表示在第 $i$ 首歌开始之前吉他手想要改变的音量是多少。

吉他手想以最大的音量演奏最后一首歌，你的任务是找到这个最大音量是多少。

## 说明/提示

$1\le n\le 50$，$1\le c_i\le beginLevel$，$1\le maxLevel\le 1000$，$0\le beginLevel\le maxLevel$。

## 样例 #1

### 输入

```
3 5 10
5 3 7
```

### 输出

```
10```

# AI分析结果



### 综合分析与结论
本题核心是动态规划中的可达性判断问题。所有题解均围绕状态转移设计，通过维护二维布尔数组记录每首歌能否达到特定音量。难点在于正确设计状态转移方程，并处理音量边界约束。最优解法为二维动态规划，时间复杂度为 O(n*maxLevel)，在给定数据范围下完全可行。

---

### 精选题解（评分≥4星）

#### 1. jackyzhu（★★★★★）
**关键亮点**：  
- 到达型01背包思路清晰，状态定义简洁  
- 双重循环结构直观，边界条件处理严谨  
- 倒序搜索最大音量实现高效  

**核心代码**：
```cpp
for(int i=1;i<=n;i++)
    for(int j=maxlevel;j>=0;j--) {
        if(j-a[i]>=0) f[i][j] |= f[i-1][j-a[i]];
        if(j+a[i]<=maxlevel) f[i][j] |= f[i-1][j+a[i]];
    }
```
**实现思想**：通过或运算合并调高/调低两种操作的可能性，j的倒序遍历避免状态覆盖。

#### 2. Kaizyn（★★★★☆）
**关键亮点**：  
- 使用bitset进行位压缩，空间效率优化  
- 位运算实现高效状态转移（左移加/右移减）  
- 代码简洁（仅24行），适合高阶选手学习  

**核心代码**：
```cpp
b = (b << tmp | b >> tmp) & cut;
```
**实现思想**：将音量范围映射到bitset的二进制位，通过位运算实现批量状态转移，最后与cut按位与保证不越界。

#### 3. 早右昕（★★★★☆）
**关键亮点**：  
- 滚动数组优化空间复杂度至 O(maxLevel)  
- 异或操作实现滚动数组切换，代码优雅  
- 动态清空数组避免状态污染  

**核心代码**：
```cpp
u ^= r ^= u ^= r; // 滚动数组切换
```
**实现思想**：使用双数组交替存储状态，每次迭代前清空新数组，通过位运算高效切换数组指针。

---

### 关键思路与技巧总结
1. **状态定义**：`f[i][j]`表示第i首歌后能否达到音量j，布尔类型简化判断逻辑  
2. **转移方程**：基于前一状态判断±c[i]后的合法性，用或运算合并可能性  
3. **倒序搜索**：从maxLevel倒序查找首个合法解，确保最大音量  
4. **位运算优化**：bitset批量处理状态转移，适合大范围数据（如maxLevel≤1e5时）  

---

### 拓展建议
- **同类问题**：类似状态可达性问题（如砝码称重、跳跃游戏）  
- **优化方向**：结合滚动数组进一步优化空间，或使用记忆化搜索实现逆向思维  
- **变式思考**：若要求具体调整路径，可增加pre数组记录转移来源  

---

### 推荐练习题
1. **P2347 [NOIP1996 提高组] 砝码称重**（同样使用可达性DP）  
2. **P1048 [NOIP2005 普及组] 采药**（经典01背包问题）  
3. **P1351 [NOIP2014 提高组] 联合权值**（状态转移与最值记录）  

---

### 题解心得摘录
> "BFS常常会有同样的状态...开一个bool数组判断是否已进入队列" —— HighPerformanceRobot  
**启示**：状态去重是搜索算法的关键优化点，记忆化思想可迁移至其他算法  

> "真正的做法是DP，具体做法我就不说了，楼下dalao都是DP" —— HighPerformanceRobot  
**启示**：当暴力算法出现性能瓶颈时，应及时切换算法范式（如BFS→DP）  

> "音量调高表示取第i件物品，调低表示不取" —— jackyzhu  
**启示**：抽象问题本质（将操作映射到背包模型）是解题的关键思维突破点

---
处理用时：57.60秒
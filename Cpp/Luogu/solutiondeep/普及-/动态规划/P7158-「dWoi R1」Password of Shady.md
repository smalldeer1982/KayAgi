# 题目信息

# 「dWoi R1」Password of Shady

## 题目背景

天海兰太郎被杀后，最原看到图书架后面刷卡器里的尘土并没有消散，陷入了沉思 ……

最原在想，黑幕是如何做到刷卡器的尘土没有消散但是还成功进入了黑幕的房间呢？然后他再次确认了刷卡器，发现了一个密码盘，密码盘下写着一行文字「真正的秘密总是被谎言欺骗，但黑幕不至于欺骗自己」，然后还有一道题，于是最原要用 1min 的时间解出这道题。

## 题目描述

这道题要求最原构造一个 $n$ 位数，并且满足以下两个要求：

- 「强者从不说废话」，代表着这个数没有前导零，$0$ 没有前导零且是一位数。
- 「强者善于成 $k$ 对合作」，代表着这个数的所有数位中有偶数个 $k$，$0$ 是偶数。

最原很快就让入间制作了一个造数器，但是造数器还需要输入有多少个满足要求的数，于是他就求助于了你，因为做造数器已经用了 59.5s，所以他想让你 0.5s 求出有多少个符合要求的数。

答案对 $998\ 244\ 353$ 取模。

## 说明/提示

#### 样例 1 解释

第一组数据，满足要求的数为：

- $0$ 个 $3$，$10\sim 12$，$14 \sim 22$，$24 \sim 29$，$40 \sim 42$，$44 \sim 52$，$54 \sim 62$，$64 \sim 72$，$74 \sim 82$，$84 \sim 92$，$94\sim 99$。
- $2$ 个 $3$，$33$。

第二组数据的样例解释写了 114514 行，但赛前 0.1s 不小心被黑白熊偷走了，书虫来不及补了。

#### 数据规模与约定

**本题采用捆绑测试。**

- Subtask 1（5 pts）：$n=1$。
- Subtask 2（25 pts）：$n \le 6$。
- Subtask 3（25 pts）：$t \le 100$。
- Subtask 4（45 pts）：无特殊限制。

对于 $100\%$ 的数据，$1 \le n \le 10^5$，$1 \le k \le 9$，$1 \le t \le 10^6$。

---

后续：你用 0.5s 求出了答案，并且答案正确，但是最原将构造出的数输入密码盘发现错误了，所以这件事是一个谎言，最原还要去搜集言弹打学级裁判（

## 样例 #1

### 输入

```
2
2 3
11 4```

### 输出

```
73
842367440```

# AI分析结果



### 综合分析与结论
题目本质是数位计数问题，核心在于处理前导零和奇偶性约束。所有题解可分为动态规划（预处理递推）和数学公式（容斥+二项式定理）两类解法。数学解法时间复杂度最优（O(1) per query），动态规划解法更易理解。最终答案与k值无关是重要观察点。

---

### 高星题解推荐

#### 1. 作者：一只书虫仔（⭐⭐⭐⭐⭐）
**关键亮点**  
- 清晰的动态规划状态定义与转移方程推导  
- 预处理思想显著优化多组查询性能  
- 完整处理边界条件（n=1的特判）  
**核心代码**  
```cpp
f[1] = 8, g[1] = 1;
for(int i = 2; i <= 1e5; i++) {
    f[i] = (f[i-1]*9 + g[i-1]) % mod;
    g[i] = (g[i-1]*9 + f[i-1]) % mod;
}
```
**实现思想**：预处理维护两个状态数组（满足/不满足条件的数量），通过递推关系快速回答查询。

#### 2. 作者：SSerxhs（⭐⭐⭐⭐⭐）
**关键亮点**  
- 数学推导出闭式解（(10ⁿ +8ⁿ)/2 - 前导零处理）  
- 时间复杂度达到理论最优（O(1) per query）  
- 包含重要观察：允许前导零的总数可通过容斥快速计算  
**核心公式**  
```cpp
ans = (pow(10,n) + pow(8,n)) / 2 - (pow(10,n-1) + pow(8,n-1)) / 2
```
**实现思想**：通过快速幂预处理10ⁿ和8ⁿ的值，利用模运算性质直接计算结果。

#### 3. 作者：WsW_（⭐⭐⭐⭐）
**关键亮点**  
- 明确双倍经验题（SP6172）的迁移思路  
- 按需延迟计算的预处理策略  
- 强调输入输出优化的重要性  
**代码亮点**  
```cpp
for(;len<=n;len++) { // 动态扩展预处理范围
    f[len] = (f[len-1]*9 + g[len-1]) % mod;
    g[len] = (g[len-1]*9 + f[len-1]) % mod;
}
```

---

### 最优思路总结
**关键技巧**  
1. **状态压缩**：仅维护奇偶两种状态，避免记录具体k值（因所有k等价）  
2. **容斥原理**：总合法数 = 允许前导零的合法数 - 前导零方案的合法数  
3. **矩阵快速幂思想**：递推式可转化为矩阵幂形式，但闭式解更优  
4. **预处理优化**：对1e5规模数据预先计算，O(1)响应查询  

**同类问题套路**  
- 数位奇偶计数：SPOJ OAE、洛谷 P2606  
- 带前导零约束的计数：洛谷 P4999、P6754  
- 二项式定理应用：所有元素出现次数奇偶性问题  

---

### 推荐练习题
1. **P2606 [ZJOI2010]排列计数**  
   考察递推关系与模运算性质  
2. **P6754 [BalticOI 2013] Palindrome-free Numbers**  
   数位DP与前导状态处理  
3. **P4999 烦人的数学作业**  
   数位统计与快速幂结合  

---

### 题解心得摘录
- **SSerxhs**提到："允许前导零时总方案数可通过二项式定理快速求和" → 组合数学视角的降维打击  
- **WsW_**强调："双倍经验题的迁移思考" → 算法竞赛中的模式识别能力  
- **书虫仔**调试经验："预处理数组大小必须超过题目最大n值" → 边界条件的工程实践重要性

---
处理用时：50.94秒
# 题目信息

# [语言月赛202304] 写大作业

## 题目描述

扶苏为了写计算理论大作业已经 $36$ 小时没有合眼了。

为了能快点睡觉，扶苏找到了 $n$ 份文献，第 $i$ 份文献是一个字符串 $s_i$，她打算把这些文献组合起来。

具体来说，一共有两种操作：

- `1 x y`：把文献 $s_x$ 整体拼接到 $s_y$ 的后面，然后删除 $s_x$。
- `2 x y`：查询 $s_x$ 和 $s_y$ 是否**相似**。

我们保证在 `1 x y` 操作出现后，字符串 $s_x$ **不会**出现在接下来的任何操作中。这就是说，操作 $1$ 至多有 $n-1$ 次。

**相似**的定义是：对两个字符串 $s_x$ 和 $s_y$，如果存在一种重新排列 $s_x$ 的方法，使得重排后的 $s_x$ 和 $s_y$ 相等，则称 $s_x$ 和 $s_y$ **相似**。

例如，假设 $s_1 = \texttt{ab}, s_2 = \texttt{cd}, s_3 = \texttt{abcd}$，则执行 `1 1 2` 后，$s_1$ 被删除，$s_2 = \texttt{cdab}, s_3 = \texttt{abcd}$；继续执行 `2 2 3` 后，因为可以把 $s_2$ 重排为 $\texttt{abcd}$，所以 $s_2$ 和 $s_3$ 相似。

注意，操作 $2$ 不会对字符串做出实际修改。

## 说明/提示

### 数据规模与约定

- 对 $30\%$ 的数据，保证 $n = 2$，$q = 1$。
- 对 $60\%$ 的数据，保证 $n \leq 6$，$q \leq 6$，$|s_i| \leq 6$。
- 对 $100\%$ 的数据，保证 $2 \leq n \leq 10^5$，$1 \leq q \leq 10^6$，$1 \leq o \leq 2$，$1 \leq x, y \leq n$，且输入字符串的总长度不超过 $10^6$，输入字符串仅含小写英文字母，且不是空串。

## 样例 #1

### 输入

```
4 4
ab
cd
abcd
abcc
1 1 2
2 2 3
2 3 4
2 2 4```

### 输出

```
Yes
No
No```

# AI分析结果

### 综合分析与结论

本题的核心在于高效处理字符串的拼接和相似性判断。题解提供了两种主要思路：60分做法直接模拟字符串拼接和字符计数，而100分做法则通过维护字符出现次数的数组来避免实际拼接字符串，从而大幅提升效率。

60分做法虽然直观，但在大规模数据下性能较差，尤其是在频繁拼接和查询时。100分做法通过维护字符计数数组，避免了字符串的实际拼接，显著优化了时间复杂度，适用于大规模数据处理。

### 所选高星题解

#### 题解1：一扶苏一 (5星)

**关键亮点：**
- **思路清晰**：明确指出了字符串相似性判断的核心是字符出现次数相等，并提出了直接维护字符计数数组的优化方案。
- **代码简洁**：通过简单的数组操作实现了高效的字符串拼接和相似性判断。
- **优化显著**：避免了字符串的实际拼接，大幅提升了性能，适用于大规模数据。

**核心代码：**
```cpp
cin >> o >> x >> y;
if (o == 1) {
  for (int j = 0; j < 26; ++j) b[y][j] += b[x][j];
} else {
  bool ans = true;
  for (int j = 0; j < 26; ++j) if (b[x][j] != b[y][j]) ans = false;
  cout << (ans ? "Yes\n" : "No\n");
}
```
**实现思想：**
- 对于拼接操作，直接将两个字符串的字符计数数组相加。
- 对于相似性判断，比较两个字符串的字符计数数组是否完全相同。

### 最优关键思路或技巧

- **字符计数数组**：通过维护每个字符串的字符出现次数数组，避免了实际拼接字符串，从而大幅提升效率。
- **数组操作优化**：利用简单的数组加法和比较操作，实现了高效的字符串处理。

### 可拓展之处

- **类似问题**：可以扩展到其他需要频繁字符串拼接和比较的场景，如文本编辑器、字符串匹配等。
- **数据结构**：可以考虑使用哈希表或其他数据结构来进一步优化字符计数的存储和查询。

### 推荐相似题目

1. **P3370 【模板】字符串哈希** - 考察字符串哈希的基本应用。
2. **P3375 【模板】KMP字符串匹配** - 考察字符串匹配算法。
3. **P3376 【模板】AC自动机（简单版）** - 考察多模式串匹配算法。

### 个人心得总结

- **调试经历**：在实现字符计数数组时，需要注意数组的初始化和清零操作，避免出现未定义行为。
- **踩坑教训**：在实际拼接字符串时，频繁的字符串操作会导致性能瓶颈，应尽量避免。
- **顿悟感想**：通过维护字符计数数组，可以大幅简化问题，提升效率，这是解决大规模字符串处理问题的关键思路。

---
处理用时：21.11秒
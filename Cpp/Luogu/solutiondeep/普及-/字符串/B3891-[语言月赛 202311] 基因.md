# 题目信息

# [语言月赛 202311] 基因

## 题目描述

有一个长度为 $n$ 的字符串 $S$。其只包含有大写字母。

小 A 将 $S$ 进行翻转后，得到另一个字符串 $S'$。两个字符串 $S$ 与 $S'$ 对应配对。例如说，对于 $S=\tt{ATCGT}$，则有 $S'=\tt{TGCTA}$，$S$ 与 $S'$ 进行配对。

对于两个字符串 $S,S'$ 的第 $i$（$1 \leq i \leq n$）个字母，配对规则如下：

- 定义 $\tt A$ 与 $\tt T$，$\tt C$ 与 $\tt G$ 为可以配对的字母。
- 如果 $S_i$ 与 $S_i'$ 为可以配对的字母，那么该字符串的稳定性增加 $i$。
- 如果 $S_i$ 或者 $S_i'$ 中任意一方出现非 $\tt A,\tt T,\tt C,\tt G$ 的字母，则整个字符串的稳定性将直接为 $0$。

现在给定 $T$ 个字符串 $S$，对每一个字符串，询问若用其翻转再进行配对，其稳定性将如何。

## 说明/提示

**【样例解释】**

- 对于第一个字符串，$S=\tt{\red{A}TCG\blue{T}}$，$S'=\tt{\red{T}GCT\blue{A}}$。标红色的一组与蓝色的一组为可以配对的字母。它们分别是 $S$ 的第 $1$ 个字母和第 $5$ 个字母，因此稳定性是 $1+5=6$。
- 对于第二个字符串，$S=\tt{\red{A}\blue{C}\red{A}\blue{T}\red{G}\blue{T}}$，$S'=\tt{\red{T}\blue{G}\red{T}\blue{A}\red{C}\blue{A}}$，每个对应位置上的字母都可以配对，因此稳定性是 $1+2+3+\dots+6=21$
- 对于第三条字符串，出现了非 $\tt A,\tt T,\tt C,\tt G$ 的字母 $\tt U$，因此稳定性为 $0$。

**【数据范围】**

对于所有数据，保证：$1\leq T\leq 5$，$1\leq n\leq 10^5$，$S$ 中出现的所有字母保证为大写英语字母。

## 样例 #1

### 输入

```
3
5
ATCGT
6
ACATGT
5
ATCGU```

### 输出

```
6
21
0```

# AI分析结果

### 综合分析与结论

本题的核心在于字符串的翻转与字符配对规则的实现。难点在于如何处理字符串翻转、字符配对以及稳定性的计算，特别是当字符串中出现非法字符时，稳定性直接为0。此外，稳定性的计算可能会超出`int`类型的范围，因此需要使用`long long`类型来存储结果。

### 所选题解

#### 题解1：chen_zhe (★★★★☆)

**关键亮点：**
1. **字符串翻转的两种方法**：提供了使用`std::reverse()`函数和手动循环翻转的两种方式，适合不同场景。
2. **稳定性计算的范围问题**：明确指出稳定性的最大值可能超出`int`范围，建议使用`long long`类型，避免了潜在的溢出问题。
3. **字符配对的实现**：详细说明了如何根据配对规则计算稳定性，并处理非法字符的情况。

**核心代码片段：**
```cpp
long long stability = 0;
for (int i = 0; i < n; i++) {
    if (!isValid(s[i]) || !isValid(s1[i])) {
        stability = 0;
        break;
    }
    if (isPair(s[i], s1[i])) {
        stability += (i + 1);
    }
}
```
**核心实现思想：**
- 使用`isValid`函数检查字符是否合法，若非法则直接设置稳定性为0。
- 使用`isPair`函数检查字符是否配对，若配对则累加稳定性。

### 最优关键思路或技巧

1. **字符串翻转**：使用`std::reverse()`函数可以简洁高效地实现字符串翻转，而手动循环翻转则适合对性能有更高要求的场景。
2. **字符配对与合法性检查**：通过独立的函数`isValid`和`isPair`来分别处理字符的合法性和配对规则，代码结构清晰且易于维护。
3. **稳定性计算的范围问题**：使用`long long`类型来存储稳定性，避免了潜在的溢出问题，确保计算的准确性。

### 可拓展之处

- **类似题目**：可以扩展到其他需要字符串翻转和字符配对的题目，如DNA序列匹配、密码破解等。
- **优化思路**：对于大规模数据处理，可以考虑并行计算或使用更高效的字符串处理库来提升性能。

### 推荐洛谷题目

1. **P1001 A+B Problem**：考察基本输入输出和简单计算。
2. **P1042 乒乓球**：考察字符串处理和模拟。
3. **P1055 ISBN号码**：考察字符串处理和校验码计算。

### 个人心得总结

- **调试经历**：在处理字符串翻转时，手动循环翻转容易出错，特别是在下标处理上，建议使用标准库函数以减少错误。
- **踩坑教训**：稳定性计算时未考虑`int`溢出问题，导致部分测试用例失败，使用`long long`类型后问题解决。
- **顿悟感想**：通过将字符合法性和配对规则分离，代码的可读性和可维护性大大提升，建议在类似问题中采用类似的结构。

---
处理用时：26.41秒
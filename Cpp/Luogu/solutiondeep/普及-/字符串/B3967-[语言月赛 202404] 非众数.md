# 题目信息

# [语言月赛 202404] 非众数

## 题目描述

给定一个长度为 $n$ 的字符串 $s$，保证 $s$ 仅包含小写字母，求 $s$  的非空子串中非众数串的个数。

> **定义：非空子串**
>
> 用 $s_i$ 表示 $s$ 中的第 $i$ 个字符（$1 \leq i \leq n$）。任取两个整数 $i, j$（$1 \leq i \leq j \leq n$），将 $s_i, s_{i + 1}, \cdots, s_{j}$ 截取出来按原序排列作为一个新的字符串，则这个字符串叫做 $s$ 的非空子串。  
例如，当 $s = \texttt{abcde}$ 时，$\texttt{ab}, \texttt{bcde}, \texttt{c}, \texttt{abcde}$ 都是 $s$ 的非空子串，而 $\texttt{acd}, \texttt{f}, \texttt{ngioasd}, \texttt{" "}$ 都不是 $s$ 的非空子串。

> **定义：非众数串**
>
> 若字符串 $a$ 中出现次数最多的字符出现的次数不超过 $\lfloor \frac{|a|}{2} \rfloor$，则称字符串 $a$ 为一个**非众数**串。其中 $\lfloor x \rfloor$ 代表 $\leq x$ 的最大整数，$|a|$ 代表 $a$ 的长度。

## 说明/提示

### 样例 1 解释

其中 $\texttt{ab,aabb}$ 是**非众数**非空子串。

### 数据范围

对于 $100\%$ 的数据，$1 \le n \le 500$，字符串由小写字母组成。

| 测试点编号 | $n$ | 特殊性质 |
| :-: | :-: | :-: |
| $1$ | $= 2$ | 无 |
| $2, 3$ | $\leq 10$ | 无 |
| $4$ | $\leq 500$ | 所有字符相同 |
| $5$ | $= 26$ | 所有字符不同 |
| $6, 7$ | $\leq 500$ | 字符串内仅可能包含 $\texttt{a,b}$ 两种字母 |
| $8 \sim 10$ | $\leq 500$ | 无 |

## 样例 #1

### 输入

```
aabb```

### 输出

```
2```

## 样例 #2

### 输入

```
fqmdfnc
```

### 输出

```
21
```

# AI分析结果

### 综合分析与结论

题目要求统计字符串中所有非空子串中非众数串的个数。非众数串的定义是：子串中出现次数最多的字符不超过子串长度的一半。题解的核心思路是枚举所有可能的子串，并统计每个子串中字符的出现次数，然后判断是否满足非众数串的条件。

#### 关键思路与技巧
1. **枚举子串**：通过双重循环枚举所有可能的子串，时间复杂度为 \(O(n^2)\)。
2. **字符统计**：使用数组 `cnt` 统计子串中每个字符的出现次数。
3. **判断非众数串**：遍历 `cnt` 数组，判断是否有字符的出现次数超过子串长度的一半。

#### 优化建议
- **优化字符统计**：可以通过滑动窗口或前缀和优化字符统计的过程，减少重复计算。
- **提前剪枝**：在统计过程中，如果发现某个字符的出现次数已经超过子串长度的一半，可以提前结束统计。

#### 拓展思路
- **滑动窗口**：适用于需要统计子串中字符频率的问题。
- **前缀和**：适用于需要快速查询子串中字符频率的问题。

### 所选高星题解

#### 题解1：Maxmilite
- **星级**：4星
- **关键亮点**：
  - 直接按照题意模拟，思路清晰。
  - 使用 `cnt` 数组统计字符频率，代码简洁易懂。
  - 通过双重循环枚举所有子串，逻辑清晰。
- **核心代码**：
  ```cpp
  int cnt[26];

  int check(int l, int r) {
      memset(cnt, 0, sizeof(cnt));
      for (int i = l; i <= r; ++i) {
          ++cnt[s[i] - 'a'];
      }
      for (int i = 0; i < 26; ++i) {
          if (cnt[i] > (r - l + 1) / 2) {
              return 0;
          }
      }
      return 1;
  }

  int main() {
      cin >> s;
      n = s.size();
      int ans = 0;
      for (int i = 0; i < n; ++i) {
          for (int j = i; j < n; ++j) {
              if (check(i, j)) {
                  ++ans;
              }
          }
      } 
      cout << ans << endl;
      return 0;
  }
  ```

### 推荐题目
1. **P3375 【模板】KMP字符串匹配**：考察字符串匹配算法。
2. **P3405 【模板】Manacher算法**：考察回文子串的查找。
3. **P3805 【模板】AC自动机（简单版）**：考察多模式串匹配。

### 通用建议与扩展思路
- **优化统计过程**：考虑使用滑动窗口或前缀和优化字符统计，减少时间复杂度。
- **提前剪枝**：在统计过程中，如果发现某个字符的出现次数已经超过子串长度的一半，可以提前结束统计，减少不必要的计算。

---
处理用时：24.23秒
# 题目信息

# 方程求解

## 题目描述

给一个方程，形如 $X+Y=Z$ 或 $X-Y=Z$。给出了其中两个未知数，请求出第三个数。未知数用 `?` 表示，等式中也许会出现一些多余的空格。

## 说明/提示

#### 数据规模与约定

对于 $100\%$ 的数，保证 $0\le X,Y,Z\lt10^9$，输入的字符串一定为题目给定的形式且长度不超过 $10^6$。

## 样例 #1

### 输入

```
1+2=?
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3 +? =  2
```

### 输出

```
-1```

## 样例 #3

### 输入

```
3-?=2
```

### 输出

```
1```

# AI分析结果

### 综合分析与结论

该题目要求根据给定的方程形式（$X+Y=Z$ 或 $X-Y=Z$），求解未知数的值。题解主要集中在字符串处理和模拟算法上，难点在于如何高效地处理输入中的空格、提取数字、并判断未知数的位置。大多数题解通过遍历字符串、过滤空格、提取数字、并根据运算符和等号的位置进行分类讨论来解决问题。

### 评分较高的题解

#### 1. **作者：minecraft_herobrine (5星)**
- **关键亮点**：该题解通过`scanf`读取字符并过滤空格，使用状态变量`op`和`op_add`来标记当前处理的部分和运算符类型，代码结构清晰，逻辑严谨。通过分类讨论未知数的位置，能够高效地求解问题。
- **个人心得**：作者提到“模拟时需要分类讨论符号”，强调了状态变量的重要性，帮助理清思路。
- **核心代码**：
  ```cpp
  while(scanf("%c",&s[i++])!=EOF);
  len=i-1;
  for(i=1;i<=len;i++) {
      if(s[i]==' ') continue;
      else if(s[i]>='0' && s[i]<='9') {
          if(op==0) x=x*10+(s[i]-'0');
          else if(op==1) y=y*10+(s[i]-'0');
          else if(op==2) z=z*10+(s[i]-'0');
      }
      else if(s[i]=='+') op=1;
      else if(s[i]=='-') op=1,op_add=false;
      else if(s[i]=='=') op=2;
      else if(s[i]=='?') {
          if(op==0) x=INF;
          else if(op==1) y=INF;
          else if(op==2) z=INF;
      }
  }
  ```

#### 2. **作者：whiteqwq (4星)**
- **关键亮点**：该题解通过`cin`循环输入并过滤空格，简洁高效。通过查找`?`的位置，并根据运算符和等号的位置进行分类讨论，代码简洁且易于理解。
- **核心代码**：
  ```cpp
  while(cin>>t) s+=t;
  for(i=0;i<s.size();i++) {
      if(s[i]=='?') b[++x]=1;
      if(s[i]<'0'||s[i]>'9') continue;
      for(x++;s[i]>='0'&&s[i]<='9';i++) a[x]=a[x]*10+s[i]-48;
  }
  if(s.find('+')<s.size()) x=1;
  else x=0;
  if(x&&b[1]) printf("%d\n",a[3]-a[2]);
  else if(x&&b[2]) printf("%d\n",a[3]-a[1]);
  else if(x&&b[3]) printf("%d\n",a[1]+a[2]);
  ```

#### 3. **作者：UnyieldingTrilobite (4星)**
- **关键亮点**：该题解采用面向对象的方式，将输入、过滤空格、求解等步骤封装成类方法，代码结构清晰，易于扩展。通过`sscanf`解析字符串，简化了数字提取的过程。
- **核心代码**：
  ```cpp
  int getans() {
      int flg=0;
      int a1,a2;
      for(int i=0;i<h.size();++i) {
          if(h[i]=='+') flg=1;
          if(h[i]=='-') flg=2;
          if(h[i]=='=') {
              sscanf(h.c_str(),flg==1?"%d+%d=?":"%d-%d=?",&a1,&a2);
              return flg==1?a1+a2:a1-a2;
          }
          if(h[i]=='?') {
              char f;
              if(flg) {
                  sscanf(h.c_str(),flg==1?"%d+?=%d":"%d-?=%d",&a1,&a2);
                  return flg==1?a2-a1:a1-a2;
              }
              else {
                  sscanf(h.c_str(),"?%c%d=%d",&f,&a1,&a2);
                  if(f=='+') return a2-a1;
                  else return a1+a2;
              }
          }
      }
  }
  ```

### 最优关键思路与技巧

1. **字符串处理**：通过`scanf`或`cin`循环输入并过滤空格，简化了字符串的处理。
2. **状态变量**：使用状态变量（如`op`、`flg`）来标记当前处理的部分和运算符类型，帮助理清逻辑。
3. **分类讨论**：根据未知数的位置和运算符类型进行分类讨论，确保所有情况都被覆盖。
4. **面向对象设计**：将输入、过滤、求解等步骤封装成类方法，提高代码的可读性和可维护性。

### 可拓展之处

该题的解题思路可以拓展到其他类似的字符串处理问题，如解析复杂的数学表达式、处理带有多余字符的输入等。类似的题目可以考察字符串的解析、状态机的设计等。

### 推荐题目

1. **P1001 A+B Problem**：考察基本的输入输出和算术运算。
2. **P1022 计算器的改良**：考察字符串解析和表达式求值。
3. **P1042 表达式求值**：考察复杂表达式的解析和计算。

### 个人心得总结

- **调试经历**：多位作者提到在处理空格时遇到问题，强调了过滤空格的重要性。
- **踩坑教训**：部分题解在未初始化变量时导致错误，提醒了变量初始化的必要性。
- **顿悟感想**：通过状态变量和分类讨论，能够更清晰地处理复杂的逻辑分支。

---
处理用时：50.05秒
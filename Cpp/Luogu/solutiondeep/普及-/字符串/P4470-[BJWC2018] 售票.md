# 题目信息

# [BJWC2018] 售票

## 题目描述

C 市火车站最近出现了一种新式自动售票机。买票时，乘客要先在售票机上输入终点名称。一共有 $N$ 处目的地，随着乘客按顺序输入终点名称的每个字母，候选终点站数目会逐渐减少。

在自动售票机屏幕上，有一个 $4$ 行 $8$ 列的键盘，如下图所示。

![](https://cdn.luogu.com.cn/upload/pic/17861.png)

在乘客每输入一个字母后，键盘上只有有效字符是可选的（取决于还有哪些候选终点站），其余的字母会被字符 `*` 取代。

告诉你 $N$ 处目的地的名称，以及乘客已经输入的若干字符，请你输出键盘目前的状态。

## 说明/提示

**【样例解释】**

输入 `ZA` 以后，下一个字符可能是 `G`（终点站有可能是 `ZAGREB`），或 `D`（终点站有可能是 `ZADAR`），或 `B`（终点站有可能是 `ZABOK`）。

## 样例 #1

### 输入

```
4
ZAGREB
SISAK
ZADAR
ZABOK
ZA```

### 输出

```
****B*D*
*G******
********
********```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效地筛选出符合输入前缀的目的地，并根据下一个字符更新键盘状态。大多数题解采用了模拟或字符串匹配的方式，部分题解使用了`strncmp`、`find`、`substr`等字符串函数来简化代码。整体来看，题解的质量参差不齐，部分题解代码冗长且不够简洁，而少数题解通过巧妙的字符串处理和键盘映射优化了实现。

### 精选题解

#### 1. 作者：引领天下 (5星)
**关键亮点**：
- 使用`strncmp`函数高效比较字符串前缀，避免了手动逐字符比较的繁琐。
- 通过字符映射直接更新键盘状态，代码简洁且高效。
- 代码可读性强，逻辑清晰，适合初学者学习和理解。

**核心代码**：
```cpp
for (short i=0;i<n;i++)if (!strncmp(a[i],s,l)){
    char c=a[i][l];
    if('A'<=c&&c<='E')k[c-'A'+3]=c;
    if('F'<=c&&c<='M')k[c-'A'+4]=c;
    if('N'<=c&&c<='U')k[c-'A'+5]=c;
    if('V'<=c&&c<='Z')k[c-'A'+6]=c;
}
```
**实现思想**：通过`strncmp`比较字符串前缀，若匹配则根据下一个字符更新键盘状态。

#### 2. 作者：孤_独 (4星)
**关键亮点**：
- 使用`substr`函数截取字符串前缀，简化了字符串匹配的逻辑。
- 通过`flag`数组记录有效字符，最后统一输出键盘状态，思路清晰。
- 代码结构合理，适合有一定基础的读者学习。

**核心代码**：
```cpp
for(int i=1;i<=n;++i){
    if(s==str[i].substr(0,len)){
        flag[str[i][len]-'A'+4]=1;
    }
}
```
**实现思想**：通过`substr`截取前缀并进行匹配，若匹配则标记下一个字符为有效。

#### 3. 作者：andyli (4星)
**关键亮点**：
- 使用`string`类简化字符串处理，代码简洁明了。
- 通过一维数组存储键盘状态，输出时处理换行，逻辑清晰。
- 代码风格良好，适合初学者学习和模仿。

**核心代码**：
```cpp
for (int i = 0; i < n; i++)
    if (A[i].substr(0, readlen) == read && A[i].length() > readlen)
        screen[A[i][readlen] - 'A' + 3] = A[i][readlen];
```
**实现思想**：通过`substr`比较前缀，若匹配则更新键盘状态。

### 最优关键思路与技巧
1. **字符串前缀匹配**：使用`strncmp`或`substr`高效比较字符串前缀，避免手动逐字符比较。
2. **字符映射**：通过字符的ASCII码直接映射到键盘位置，简化了键盘状态的更新逻辑。
3. **一维数组存储键盘状态**：通过一维数组存储键盘状态，输出时处理换行，简化了代码结构。

### 可拓展之处
- **字典树（Trie）**：对于更复杂的前缀匹配问题，可以使用字典树来优化查询效率。
- **多语言支持**：若键盘字符集扩展到多语言或特殊符号，可以通过更复杂的映射逻辑来处理。

### 推荐题目
1. **P3375 【模板】KMP字符串匹配**：考察字符串匹配的基础算法。
2. **P3805 【模板】AC自动机（简单版）**：考察多模式串匹配的优化算法。
3. **P2580 于是他错误的点名开始了**：考察字符串的快速查找与匹配。

### 个人心得摘录
- **引领天下**：通过`strncmp`函数简化了字符串比较，代码更加简洁高效。
- **孤_独**：使用`substr`函数截取前缀，避免了手动逐字符比较的繁琐。
- **andyli**：通过一维数组存储键盘状态，输出时处理换行，逻辑清晰且易于理解。

### 通用建议与扩展思路
- **代码简洁性**：尽量使用标准库函数（如`strncmp`、`substr`）来简化代码逻辑。
- **字符映射**：通过字符的ASCII码直接映射到键盘位置，减少不必要的计算。
- **数据结构优化**：对于更复杂的问题，考虑使用字典树等数据结构来优化查询效率。

---
处理用时：36.82秒
# 题目信息

# [NOIP 2000 普及组] 税收与补贴问题

## 题目背景

每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）


## 题目描述

你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。

- 总利润 $=$ 单位商品利润 $\times$ 销量
- 单位商品利润 $=$ 单位商品价格 $-$ 单位商品成本（减去税金 或者 加上补贴）


## 说明/提示

### 数据范围及约定

保证输入的所有数字均小于 $10^5$。

### 样例解释（2023/6/22 更新）

如下图所示是输入样例所对应的价格变化图，横轴表示销售价格，纵轴表示销量。

![](https://cdn.luogu.com.cn/upload/image_hosting/21mhtm5i.png)

根据题意，$28$ 元是商品的成本。销售价格不应该低于 $28$ 元；当销售价格大于给出的价格的最大值 $31$ 元后，按照售价每提高一元，销量降低 $15$ 计算，例如当售价为 $33$ 元时，销量为 $110-15\times (33-31)=80$。在给出来的价位之间，销量呈线性变化。

当政府给该商品补贴 $4$ 元后，企业将该商品定价为 $31$ 元时，取得的利润为 $31-28+4=7$ 元，销量为 $110$ 件，总利润为 $7\times 110=770$ 元，是企业在所有定价下能够取得的最大的总利润。此时企业的售价为政府的期望售价，因此是一个合法方案。

## 样例 #1

### 输入

```
31
28 130
30 120
31 110
-1  -1
15```

### 输出

```
4
```

# AI分析结果



### 题解综合分析与结论

本题核心在于计算各价格点利润并确定政府调控的最小金额。各题解主要采用暴力枚举、数学不等式分析、线性插值补全及单调性优化等思路。最优解法需兼顾效率与代码可读性。

---

### 高星题解推荐

#### 1. **Ofnoname（4.5星）**
- **关键亮点**：通过解不等式确定合法区间，数学推导高效，避免暴力枚举。处理线性插值严谨，代码逻辑清晰。
- **核心思路**：
  - 补全价格-销量数据，计算各区间线性变化。
  - 对每个价格点构造不等式，求交集确定补贴/税收范围。
  - 取绝对值最小的解，数学优化显著。
- **代码片段**：
  ```cpp
  // 求不等式解集的关键部分
  for (int i = r; i <= p; i++) {
      double ans = (d[x]*(x-r) - d[i]*(i-r)) * 1.0 / (d[i] - d[x]);
      if (g > 0) Max = min(Max, ans); 
      else Min = max(Min, ans);
  }
  ```

#### 2. **Mitch谜团（4星）**
- **关键亮点**：暴力枚举直观易懂，适合快速实现。补全所有可能价格点，确保数据完整性。
- **个人心得**：强调利用计算机的暴力优势，避免复杂数学推导，适合普及组选手。
- **核心实现**：
  ```cpp
  // 暴力枚举补贴与税收
  for(int j=1;j<=10000;j++) {
      for(k=1;k<=i;k++) num=(a[k][1]-a[1][1]+j)*a[k][2];
      if(price==expect) return 0; 
      // 同理处理税收...
  }
  ```

#### 3. **dodo（4星）**
- **关键亮点**：利用利润变化的单调性优化枚举，减少无效计算。代码简洁，模拟过程高效。
- **核心思路**：根据初始最大利润位置，决定补贴/税收方向，单向枚举至符合预期。
  ```cpp
  if(ans>ex) { // 补贴递增枚举
      for(int x=1;;x++) if(最优价格匹配) 输出;
  } else { // 税收递减枚举
      for(int x=-1;;x--) if(匹配) 输出;
  }
  ```

---

### 关键思路与技巧总结

1. **数据补全**：根据线性变化与固定递减规则，补全所有有效价格点的销量。
2. **数学优化**：通过解利润不等式确定合法区间，避免全枚举。
3. **单调性利用**：补贴/税收变化时，最优价格呈单调趋势，可定向枚举。
4. **边界处理**：特别注意销量非负及价格区间的开闭情况。

---

### 相似题目推荐

1. **P1024 一元三次方程求解**（数学求根，区间分析）
2. **P1055 循环**（模拟与数学结合）
3. **P1181 数列分段Section I**（贪心+线性处理）

---
处理用时：45.56秒
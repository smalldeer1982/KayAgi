# 题目信息

# [USACO23JAN] Air Cownditioning II B

## 题目描述

农夫约翰的 $N$ 头奶牛 $(1≤N≤20)$ 住在一个谷仓里，谷仓里有连续的牛栏，编号为 $1-100$ 。 奶牛 $i$ 占据了编号 $[s_i,t_i]$ 的牛栏。 不同奶牛占据的牛栏范围是互不相交的。 奶牛有不同的冷却要求，奶牛 $i$ 占用的每个牛栏的温度必须至少降低 $c_i$ 单位。

谷仓包含 $M$ 台空调，标记为 $1-M$ $(1\le M\le10)$。第 $i$ 台空调需要花费 $m_i$ 单位的金钱来运行 $(1\le m_i \le 1000)$ ，如果运行，第 $i$ 台空调将牛栏 $[a_i,b_i]$ 所有牛栏的温度降低 $p_i$（$1\le p_i\le10^6）$。 空调覆盖的牛栏范围可能会重叠。

请帮助农夫约翰求出满足所有奶牛需求要花费的最少金钱。

## 说明/提示

### 样例解释 1

一种花费最少的可能解决方案是选择那些冷却区间为 $[2,9]$ 、$[1,2]$ 和 $[6,9]$ 的空调，成本为 $ 3+2+5=10$ .


对于 $100\%$ 的数据，$1 \le N \le 20$， $1 \le M \le 10$, $ 1 \le a_i, b_i, s_i, t_i \le 100$, $1 \le c_i, p_i \le 10^6$， $1 \le m_i \le 1000$。

## 样例 #1

### 输入

```
2 4
1 5 2
7 9 3
2 9 2 3
1 6 2 8
1 2 4 2
6 9 1 5```

### 输出

```
10```

# AI分析结果



### 综合分析与结论
题目需要选择最经济的空调组合以满足所有奶牛的降温需求。由于数据范围小（M≤10），各题解普遍采用暴力搜索（DFS或二进制枚举）。关键在于预处理牛栏需求、维护当前降温状态及剪枝优化。

### 高星题解推荐

#### 1. Jorisy (5星)
**关键亮点**  
- **简洁回溯DFS**：通过选/不选当前空调的递归结构，动态维护降温数组，回溯高效。
- **预处理优化**：仅处理有需求的牛栏区间，减少无效计算。
- **代码简洁**：变量命名清晰，逻辑直接。

**核心代码思想**  
```cpp
void dfs(int dep, int s) {
    if (dep > m) {
        if (check()) ans = min(ans, s);
        return;
    }
    // 不选当前空调
    dfs(dep + 1, s);
    // 选当前空调并回溯
    modify_cw(dep, -p[dep]); // 应用降温
    dfs(dep + 1, s + v[dep]);
    modify_cw(dep, p[dep]);  // 恢复
}
```

#### 2. doumingze (4星)
**关键亮点**  
- **统一状态判断**：在完成所有空调选择后统一计算降温总和，逻辑清晰。
- **预处理取最大值**：正确处理互不重叠的牛栏需求。

**核心代码思想**  
```cpp
int judge() {
    int mon = 0;
    for (选中的空调) 累加降温值到临时数组;
    for (遍历所有牛栏) 检查是否满足需求;
    return 满足则返回费用，否则-1;
}
```

#### 3. 快斗游鹿 (4星)
**关键亮点**  
- **状态分离设计**：DFS生成所有可能组合后统一验证，降低耦合度。
- **清晰预处理**：直接累加牛栏需求，直观易懂。

**核心代码思想**  
```cpp
void solve() {
    for (所有选中的空调) 应用降温到临时数组;
    if (所有牛栏满足条件) 更新最小费用;
}
```

### 最优关键思路总结
1. **预处理需求**：根据奶牛覆盖区间初始化各牛栏的降温需求。
2. **暴力枚举+回溯**：DFS或二进制枚举所有空调组合，维护当前降温状态。
3. **剪枝优化**：若当前费用已超过已知最优解，提前终止搜索。

### 拓展与举一反三
- **类似题目**：子集选择问题（如P1036）、资源分配优化（如P2392）。
- **优化思路**：当M较大时，可采用状态压缩DP或Meet-in-the-middle优化。

### 推荐题目
1. **P1036 选数**（子集枚举）
2. **P2392 kkksc03考前临时抱佛脚**（DFS剪枝）
3. **P1157 组合的输出**（组合生成）

### 题解中的个人心得摘录
- **Jorisy**：通过回溯维护状态，强调代码简洁与预处理正确性。
- **so_find_skind**：误将牛栏范围判断至5554，提醒注意边界条件。
- **快斗游鹿**：分离状态生成与验证，提升代码可读性。

---
处理用时：174.93秒
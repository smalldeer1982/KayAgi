# 题目信息

# 填涂颜色

## 题目描述

由数字 $0$ 组成的方阵中，有一任意形状的由数字 $1$ 构成的闭合圈。现要求把闭合圈内的所有空间都填写成 $2$。例如：$6\times 6$ 的方阵（$n=6$），涂色前和涂色后的方阵如下：

如果从某个 $0$ 出发，只向上下左右 $4$ 个方向移动且仅经过其他 $0$ 的情况下，无法到达方阵的边界，就认为这个 $0$ **在闭合圈内**。闭合圈不一定是环形的，可以是任意形状，但保证**闭合圈内**的 $0$ 是连通的（两两之间可以相互到达）。

```plain
0 0 0 0 0 0
0 0 0 1 1 1
0 1 1 0 0 1
1 1 0 0 0 1
1 0 0 1 0 1
1 1 1 1 1 1
```
```plain
0 0 0 0 0 0
0 0 0 1 1 1
0 1 1 2 2 1
1 1 2 2 2 1
1 2 2 1 2 1
1 1 1 1 1 1
```

## 说明/提示

对于 $100\%$ 的数据，$1 \le n \le 30$。


## 样例 #1

### 输入

```
6
0 0 0 0 0 0
0 0 1 1 1 1
0 1 1 0 0 1
1 1 0 0 0 1
1 0 0 0 0 1
1 1 1 1 1 1
```

### 输出

```
0 0 0 0 0 0
0 0 1 1 1 1
0 1 1 2 2 1
1 1 2 2 2 1
1 2 2 2 2 1
1 1 1 1 1 1
```

# AI分析结果



### 综合分析与结论  
本题核心在于识别闭合区域内的0，各题解普遍采用逆向思维：通过标记闭合区域外的0来间接确定内部区域。关键技巧包括边界扩展、DFS/BFS遍历、染色标记等。以下精选3个高质量题解并总结核心思路。

---

### 精选题解分析  

#### 1. 作者：LMB_001（★★★★★）  
**关键亮点**：  
- 扩展矩阵边界（外围加一圈0），避免复杂边界判断  
- 从(0,0)点开始DFS，直接标记所有可达外部区域  
- 利用原数组进行染色标记，无需额外存储空间  
**核心代码**：  
```cpp
void dfs(int p, int q) {
    if (边界越界 || a[p][q] != 0) return;
    a[p][q] = 1; // 标记外部0
    for (四个方向) dfs(p+dx[i], q+dy[i]);
}
// 初始化时给矩阵外围加0
dfs(0, 0);
// 输出时未被标记的0即为内部区域
```

#### 2. 作者：冰冻赤道（★★★★☆）  
**关键亮点**：  
- 显式枚举四周边界点进行BFS  
- 使用独立标记数组记录访问状态  
- 输出时通过标记状态判断内外区域  
**实现技巧**：  
```cpp
for (四个边界方向) {
    if (是边界点且未被标记) bfs(i,j);
}
void bfs(int x, int y) {
    // 使用队列进行广度优先搜索
    while (!q.empty()) {
        检查四个方向的相邻点，标记可到达的外部区域
    }
}
```

#### 3. 作者：Rec°（★★★★☆）  
**关键亮点**：  
- 初始时将0全部设为2，再逆向修正外部区域  
- 仅使用单个数组完成状态标记  
- 极简代码实现（仅20行核心逻辑）  
**精妙之处**：  
```cpp
// 初始化所有0为2
for (i,j) if (输入0) a[i][j] = 2;
// 从边界点开始DFS修正
dfs(0,0); // 自动处理扩展边界
// 最终输出时：2表示内部0，0表示外部0
```

---

### 关键思路总结  
1. **逆向思维**：不直接找闭合区域，而是标记外部区域  
2. **边界处理**：通过扩展矩阵边界或显式枚举边界点简化判断  
3. **染色算法**：DFS/BFS标记连通区域，时间复杂度O(n)  
4. **空间优化**：利用原数组存储状态，避免额外空间消耗  

---

### 拓展训练  
1. **连通区域处理**：  
   - [P1451 求细胞数量](https://www.luogu.com.cn/problem/P1451)  
   - [P1506 拯救oibh总部](https://www.luogu.com.cn/problem/P1506)  
2. **边界扩展技巧**：  
   - [P1162 同类变形题](https://www.luogu.com.cn/problem/P1162)（本题）  
3. **逆向思维应用**：  
   - [P1030 水洼计数](https://www.luogu.com.cn/problem/P1030)  

---

### 调试心得分野  
- **扩展边界法**调试时需注意矩阵坐标范围（如从0到n+1）  
- **染色标记**时需确保不会重复访问（通过立即修改状态值）  
- 测试案例应包含多边界情况（如闭合圈接触边界、多个嵌套区域）  

> "一开始总想直接找内部区域，后来意识到反向标记外部区域才是关键" —— 来自多个题解的共同感悟

---
处理用时：72.31秒
# 题目信息

# [USACO19OPEN] Bucket Brigade B

## 题目描述

农场上起火了，奶牛们正在紧急赶去灭火！

农场可以用一个像这样的 $10×10$ 的字符方阵来描述：

```plain
..........
..........
..........
..B.......
..........
.....R....
..........
..........
.....L....
..........
```

字符 `B` 表示正着火的牛棚。字符 `L` 表示一个湖，而字符 `R` 表示农场上的一块巨大岩石。

奶牛们想要沿着一条湖到牛棚之间的路径组成一条“水桶传递队列”，这样她们就可以沿着这条路径传递水桶来帮助灭火。当两头奶牛在东南西北四个方向上相邻时水桶可以在她们之间传递。这对于湖边的奶牛也是对的——奶牛只能在紧挨着湖的时候才能用水桶从湖里取水。类似地，奶牛只能在紧挨着牛棚的时候才能用水去灭牛棚的火。 

请帮助求出奶牛们为了组成这样的“水桶传递队列”需要占据的 `.` 格子的最小数量。

奶牛不能站在岩石所在的方格之内，此外保证牛棚和湖不是相邻的。 

## 说明/提示

### 样例解释 1

在这个例子中，以下是一个可行的方案，使用了最小数量的奶牛（$7$）：

```plain
..........
..........
..........
..B.......
..C.......
..CC.R....
...CCC....
.....C....
.....L....
..........
```

## 样例 #1

### 输入

```
..........
..........
..........
..B.......
..........
.....R....
..........
..........
.....L....
..........```

### 输出

```
7```

# AI分析结果



### 综合分析与结论
本题要求计算绕过岩石的最短路径，核心思路为广度优先搜索（BFS）或基于曼哈顿距离的分类讨论。BFS适用于所有情况但代码稍长；分类讨论更高效但需严格处理三点共线时的边界条件。最优解需权衡普适性与效率。

---

### 高星题解推荐

1. **作者：_little_Cabbage_（5星）**
   - **关键亮点**：标准BFS实现，代码清晰易懂，正确处理障碍物与边界。
   - **核心代码**：
     ```cpp
     int bfs(int sx,int sy,int tx,int ty) {
         queue<node> q;
         q.push({sx, sy, 0});
         while (!q.empty()) {
             node f = q.front(); q.pop();
             if (f.x == tx && f.y == ty) return f.step - 1; // 结果减1
             for (int i=0; i<4; i++) {
                 int nx = f.x+dx[i], ny = f.y+dy[i];
                 if (nx>=0 && nx<10 && ny>=0 && ny<10 && !vis[nx][ny] && s[nx][ny]!='R') {
                     vis[nx][ny] = 1;
                     q.push({nx, ny, f.step+1});
                 }
             }
         }
         return -1;
     }
     ```

2. **作者：qw1234321（4星）**
   - **关键亮点**：分类讨论思路清晰，利用曼哈顿距离与三点共线判断，高效简洁。
   - **核心逻辑**：
     ```cpp
     if (B, R, L不共线) ans = 曼哈顿距离 -1;
     else if (R在B和L之间) ans += 2;
     else ans = 曼哈顿距离 -1;
     ```

3. **作者：Zack11（4星）**
   - **关键亮点**：完整BFS模板，包含步数减1的细节处理，代码注释详细。
   - **个人心得**：强调BFS队列初始化需包含起点，输出结果减1避免包含终点。

---

### 最优思路总结
1. **BFS模板化处理**：适用于所有网格最短路径问题，通过队列逐层扩展，首次到达终点即为最短路径。
2. **曼哈顿距离优化**：当仅有一个障碍物时，通过判断其是否在起点与终点的直线上，决定是否需绕行增加步数。

---

### 类似题目推荐
1. **P1443 马的遍历**（BFS基础应用）
2. **P1141 01迷宫**（多查询BFS预处理）
3. **P1746 离开中山路**（带障碍物的最短路径）

---
处理用时：54.29秒
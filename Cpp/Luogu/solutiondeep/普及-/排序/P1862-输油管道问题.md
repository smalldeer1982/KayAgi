# 题目信息

# 输油管道问题

## 题目背景

听说最近石油危机。

所以想到了这题。


## 题目描述

某石油公司计划建造一条由东向西的主要输油管道。

该管道要穿过一个有 $n$ 口油井的油田。从每口油井都要有一条输油管道沿最短路径（或南或北）与主管道相连。

如果给定 $n$ 口油井的位置，及它们的 $x$ 坐标（东西向）和 $y$ 坐标（南北向），应如何确定主管道的最优位置，即使各油井到主管道之间的输油管道长度总和最小的位置？证明可规定时间内确定主管道的最优位置。

## 说明/提示

### 数据范围及约定

对于全部数据，$1 \le n \le 10000$，$-10^4 \le x,y \le 10^4$。

## 样例 #1

### 输入

```
5
1 2
2 2
1 3
3 -2
3 3```

### 输出

```
6```

# AI分析结果

### 综合分析与结论
这些题解主要围绕输油管道问题展开，核心是确定主管道最优位置使各油井到主管道输油管道长度总和最小。题解思路主要分为中位数法、模拟退火法和暴力枚举法。
- **中位数法**：通过排序后取中位数作为主管道位置，计算各油井到该位置的距离和，思路简单高效，时间复杂度低。
- **模拟退火法**：利用模拟退火算法的思想，不断尝试新解并以一定概率接受更差解，最终找到近似最优解，但该算法是玄学算法，不保证一定能得到最优解。
- **暴力枚举法**：通过枚举主管道可能的位置，计算各油井到该位置的距离和，取最小值，思路简单但时间复杂度高，可能超时。

### 所选题解
- **作者：LMB_001（5星）**
    - **关键亮点**：思路清晰，直接指出本题是经典的中位数问题，代码简洁易懂，时间复杂度低。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int main(){
    int n,i,a[100000],ans=0,l;
    cin>>n;
    for (i=1;i<=n;i++) {
        int x;
        cin>>x>>a[i];
    }
    sort(a+1,a+n+1);
    l=n/2;
    for (i=1;i<=l;i++){
        ans+=a[n-i+1]-a[i];
    }
    cout<<ans;
    return 0;
}
```
    - **核心实现思想**：读取各油井的y坐标，排序后通过特定计算方式得到各油井到主管道的距离和。

- **作者：oistr（4星）**
    - **关键亮点**：详细解释了中位数解法的原理，代码规范，对n为偶数和奇数的情况分别处理。
    - **核心代码**：
```cpp
#include <iostream>
#include <cmath>
#include <algorithm>
using namespace std;
int y[10005];
int main()
{
    int n,tmp;
    cin>>n;
    for(int i=1;i<=n;i++)
    {
        cin>>tmp>>y[i];
    }
    sort(y+1,y+n+1);
    int mid;
    if(n%2==1)
    {
        mid=y[(n+1)/2];
    }
    else
    {
        mid=(y[n/2]+y[n/2+1])/2;
    }
    int sum=0;
    for(int i=1;i<=n;i++)
    {
        sum+=abs(y[i]-mid);
    }
    cout<<sum<<endl;
    return 0;
}
```
    - **核心实现思想**：读取各油井的y坐标，排序后根据n的奇偶性求出中位数，计算各油井到中位数位置的距离和。

- **作者：王钰翔（4星）**
    - **关键亮点**：思路清晰，代码简洁，直接取中位数计算距离和，且指出偶数序列无需取平均。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int n,x,y,ans=0;
int a[10005];
int main() {
    cin>>n;
    for(int i=1; i<=n; i++) {
        cin>>x>>a[i];
    }
    sort(a+1,a+n+1);
    y=a[n/2+1];
    for(int i=1; i<=n; i++) {
        ans+=abs(a[i]-y);
    }
    cout<<ans; 
    return 0;
}
```
    - **核心实现思想**：读取各油井的y坐标，排序后取中位数作为主管道位置，计算各油井到该位置的距离和。

### 最优关键思路或技巧
本题最优思路是中位数法，其核心在于发现输油管道总长公式 $S=|y_1 - m| + |y_2 - m| +... + |y_n - m|$ 中，$m$ 取 $y_1,y_2,...,y_n$ 的中位数时，$S$ 取得最小值。通过排序后取中位数，可在 $O(n log n)$ 的时间复杂度内解决问题。

### 可拓展之处
同类型题如求多个点到某条直线的垂直距离之和最小，可将本题思路拓展到二维平面。类似算法套路可用于解决一些求最值的问题，如平衡点问题、均分数据问题等，可使用模拟退火算法或中位数思想求解。

### 推荐题目
1. [P1337 平衡点](https://www.luogu.org/problemnew/show/P1337)
2. [P3936 coloring](https://www.luogu.org/problemnew/show/P3936)
3. [P2530 均分数据](https://www.luogu.org/problemnew/show/P2503)

### 个人心得摘录与总结
- **作者：Jy_Amoy**：提到模拟退火是玄学算法，不保证一交上去就能AC，需要多尝试不同的参数，如ΔE前面的符号。
- **作者：oistr**：通过观察输油管道总长公式，突然醒悟m应该是中位数，手算小数据验证后提交AC，强调了对公式的深入理解和小数据验证的重要性。 

---
处理用时：31.34秒
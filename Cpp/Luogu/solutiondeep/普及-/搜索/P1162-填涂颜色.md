# 题目信息

# 填涂颜色

## 题目描述

由数字 $0$ 组成的方阵中，有一任意形状的由数字 $1$ 构成的闭合圈。现要求把闭合圈内的所有空间都填写成 $2$。例如：$6\times 6$ 的方阵（$n=6$），涂色前和涂色后的方阵如下：

如果从某个 $0$ 出发，只向上下左右 $4$ 个方向移动且仅经过其他 $0$ 的情况下，无法到达方阵的边界，就认为这个 $0$ **在闭合圈内**。闭合圈不一定是环形的，可以是任意形状，但保证**闭合圈内**的 $0$ 是连通的（两两之间可以相互到达）。

```plain
0 0 0 0 0 0
0 0 0 1 1 1
0 1 1 0 0 1
1 1 0 0 0 1
1 0 0 1 0 1
1 1 1 1 1 1
```
```plain
0 0 0 0 0 0
0 0 0 1 1 1
0 1 1 2 2 1
1 1 2 2 2 1
1 2 2 1 2 1
1 1 1 1 1 1
```

## 说明/提示

对于 $100\%$ 的数据，$1 \le n \le 30$。


## 样例 #1

### 输入

```
6
0 0 0 0 0 0
0 0 1 1 1 1
0 1 1 0 0 1
1 1 0 0 0 1
1 0 0 0 0 1
1 1 1 1 1 1
```

### 输出

```
0 0 0 0 0 0
0 0 1 1 1 1
0 1 1 2 2 1
1 1 2 2 2 1
1 2 2 2 2 1
1 1 1 1 1 1
```

# AI分析结果



### 综合分析与结论
该题核心在于识别闭合圈内的0，各题解主要采用逆向思维：通过搜索圈外0进行染色，剩余未被染色的0即为闭合区域。最优解法为扩展矩阵边界后使用DFS/BFS，避免了复杂边界判断。

---

### 精选题解与亮点分析

1. **LMB_001（5星）**
   - **关键思路**：在原始矩阵外加一圈虚拟0，从(0,0)开始DFS标记所有可达0。剩余未被标记的0即为闭合区域。
   - **代码亮点**：简洁易懂，仅用1次DFS完成染色，输出时巧妙利用数学运算转换结果。
   ```cpp
   void dfs(int p,int q){
       if(p<0||p>n+1||q<0||q>n+1||a[p][q]!=0) return;
       a[p][q]=1; // 染色外围0
       for(int i=1;i<=4;i++) dfs(p+dx[i],q+dy[i]);
   }
   ```

2. **冰冻赤道（4星）**
   - **关键思路**：枚举边界上的0进行BFS，标记所有可达外围0。
   - **调试心得**：通过四重循环处理四条边界，确保覆盖所有可能的外围入口。
   ```cpp
   for(int i=1;i<=n;i=i+n-1) // 上下边界
       for(int j=1;j<=n;j++) if(!vis[i][j]) bfs(i,j);
   ```

3. **封禁用户（4星）**
   - **关键技巧**：将原始0初始化为2，BFS搜索时恢复外围0为0，剩余2即为闭合区域。
   - **实现优化**：使用单个数组同时存储原始数据和染色状态，减少空间消耗。
   ```cpp
   while(!q.empty()){
       int x=q.front().first, y=q.front().second;
       map[x][y]=0; // 外围0恢复
       for(int i=0;i<4;i++) if(map[x+dx][y+dy]==2) q.push(...);
   }
   ```

---

### 核心技巧总结
1. **边界扩展法**：在矩阵外加一圈虚拟0，将问题转化为标准连通区域搜索。
2. **逆向染色**：标记所有外围可达区域，剩余未标记区域即为目标。
3. **状态复用**：通过数值转换（如0→2→0）在单个数组中存储多重状态。

---

### 举一反三训练
1. [P1451 求细胞数量](https://www.luogu.com.cn/problem/P1451) - 连通区域计数
2. [P1506 拯救oibh总部](https://www.luogu.com.cn/problem/P1506) - 闭合区域识别
3. [P2331 最大子矩阵](https://www.luogu.com.cn/problem/P2331) - 矩阵边界处理

---

### 调试经验摘录
- "发现直接搜索(1,1)会被环形闭合圈阻挡，改为从虚拟外圈(0,0)出发后AC" —— 强调合理建模的重要性。
- "多次提交WA后发现未处理右下边界，增加对角线的边界枚举后通过" —— 提醒边界条件需全面考虑。

---
处理用时：68.77秒
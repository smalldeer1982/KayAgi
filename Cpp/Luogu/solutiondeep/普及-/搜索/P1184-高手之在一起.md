# 题目信息

# 高手之在一起

## 题目背景

高手是可以复活的，这点我们大家都知道。


## 题目描述

高手列出了一个详尽的日程表，这次他要追求的则是一个心灵纯洁的小萝莉。他和她都是要上课的，但是也会有时间空闲，于是高手决定无时无刻都要跟着她。为了她，高手决定转学到一年级。

现在高手已经花重金买下了她的日程表，每一天都会有她的行踪。现在列出了高手方便去的地方。其中方便去的地方可以去无限次，不方便去的地方不能去。

一共有 $n$ 个方便去的地点，$m$ 天。高手想知道他在这 $m$ 天中，最多能和她在一起多久。不方便去的地方是不会列出的。


## 说明/提示

$1 \leq m \leq 1000000$，$1 \leq n \leq 20$。


## 样例 #1

### 输入

```
1 2
WC
CLASS
WC
```

### 输出

```
1
```

# AI分析结果



### 综合分析与结论
本题核心在于处理含空格的字符串输入及高效查询。关键难点在于不同系统换行符差异（`\r\n`与`\n`）和空格处理。常见解法包括暴力比对、STL集合、哈希和Trie树。由于`n ≤ 20`，暴力解法（时间复杂度O(mn)）可通过；STL集合和哈希在时间与代码简洁性上表现更优。

---

### 高星题解推荐

#### 1. Jelly_Goat（4星）  
**关键亮点**：  
- 使用`set<string>`快速查询，结合`getline`处理空格。  
- 针对换行符差异，手动添加`\r`解决跨平台数据问题。  
- 代码注释清晰，输入处理逻辑严密。  
**个人心得**：  
> “测试数据在Windows生成，需特判末尾的`\r`，否则无法通过第一个测试点。”  
**核心代码**：  
```cpp
// 处理换行符差异
if (input.back() != '\r') input += '\r';
qwq.insert(input);
// 查询时同样处理换行符
if (qwq.find(input) != qwq.end()) ans++;
```

#### 2. zhenghaishu（4星）  
**关键亮点**：  
- 多解法覆盖（map、set、getline），分析不同系统换行符影响。  
- 解法三使用`getline`直接读取整行，统一处理`\r\n`问题。  
- 代码注释详细，适合不同层次读者。  
**核心代码**：  
```cpp
getline(cin, place); // 读取整行
if (place.back() != '\r') place += '\r'; // 补全Windows换行符
if (st.find(place) != st.end()) ans++;
```

#### 3. hsfzLZH1（4星）  
**关键亮点**：  
- 使用Trie树实现高效字符串匹配，展示数据结构灵活性。  
- 指针动态分配节点，节省内存空间。  
- 代码结构清晰，适合学习Trie实现。  
**核心代码**：  
```cpp
struct node {
    node* c[128]; // ASCII码范围子节点
    int v; // 标记终点
};
void insert(string s) {
    node* now = &head;
    for (char ch : s) {
        if (!now->c[ch]) now->c[ch] = new node();
        now = now->c[ch];
    }
    now->v = 1;
}
```

---

### 关键思路与技巧
1. **输入处理**：使用`getline`读取整行避免空格截断，手动补全`\r`解决跨平台换行符问题。  
2. **数据结构选择**：  
   - **小数据**：暴力遍历（O(mn)）足够高效。  
   - **通用场景**：`set/map`（O(m log n)）或哈希（O(m)）。  
   - **极大数据**：Trie树（O(mL)，L为字符串长度）。  
3. **代码优化**：关闭同步流（`ios::sync_with_stdio(false)`）提升`cin/cout`速度。  

---

### 拓展与举一反三
- **类似题目**：  
  - P3370 【模板】字符串哈希（哈希基础）  
  - P2580 于是他错误的点名开始了（Trie应用）  
  - P1739 表达式括号匹配（字符串处理）  
- **调试技巧**：在字符串末尾输出ASCII码值，排查不可见字符问题。  

---

### 题解代码片段（Jelly_Goat核心实现）
```cpp
#include <iostream>
#include <set>
using namespace std;

int main() {
    set<string> qwq;
    int n, m, ans = 0;
    cin >> n >> m;
    string input;
    getline(cin, input); // 清空缓冲区
    for (int i = 0; i < n; ++i) {
        getline(cin, input);
        if (input.back() != '\r') input += '\r';
        qwq.insert(input);
    }
    for (int i = 0; i < m; ++i) {
        getline(cin, input);
        if (input.back() != '\r') input += '\r';
        ans += qwq.count(input);
    }
    cout << ans;
    return 0;
}
```

---
处理用时：85.34秒
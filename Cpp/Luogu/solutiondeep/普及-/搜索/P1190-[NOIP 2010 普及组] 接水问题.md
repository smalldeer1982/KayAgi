# 题目信息

# [NOIP 2010 普及组] 接水问题

## 题目描述

学校里有一个水房，水房里一共装有 $m$ 个龙头可供同学们打开水，每个龙头每秒钟的供水量相等，均为 $1$。

现在有 $n$ 名同学准备接水，他们的初始接水顺序已经确定。将这些同学按接水顺序从 $1$ 到 $n$ 编号，$i$ 号同学的接水量为 $w_i$。接水开始时，$1$ 到 $m$ 号同学各占一个水龙头，并同时打开水龙头接水。当其中某名同学 $j$ 完成其接水量要求 $w_j$ 后，下一名排队等候接水的同学 $k$ 马上接替 $j$ 同学的位置开始接水。这个换人的过程是瞬间完成的，且没有任何水的浪费。即 $j$ 同学第 $x$ 秒结束时完成接水，则 $k$ 同学第 $x+1$ 秒立刻开始接水。若当前接水人数 $n'$ 不足 $m$，则只有 $n'$ 个龙头供水，其它 $m - n'$ 个龙头关闭。

现在给出 $n$ 名同学的接水量，按照上述接水规则，问所有同学都接完水需要多少秒。


## 说明/提示

【输入输出样例 \#1 说明】

第 $1$ 秒，$3$ 人接水。第 $1$ 秒结束时，$1,2,3$ 号同学每人的已接水量为 $1,3$ 号同学接完水，$4$ 号同学接替 $3$ 号同学开始接水。

第 $2$ 秒，$3$ 人接水。第 $2$ 秒结束时，$1,2$ 号同学每人的已接水量为 $2,4$ 号同学的已接水量为 $1$。

第 $3$ 秒，$3$ 人接水。第 $3$ 秒结束时，$1,2$ 号同学每人的已接水量为 $3,4$ 号同学的已接水量为 $2$。$4$ 号同学接完水，$5$ 号同学接替 $4$ 号同学开始接水。

第 $4$ 秒，$3$ 人接水。第 $4$ 秒结束时，$1,2$ 号同学每人的已接水量为 $4,5$ 号同学的已接水量为 $1$。$1,2,5$ 号同学接完水，即所有人完成接水的总接水时间为 $4$ 秒。

【数据范围】

$1 \le n \le {10}^4$，$1 \le m \le 100$，$m \le n$；

$1 \le w_i \le 100$。

NOIP2010 普及组 第二题


## 样例 #1

### 输入

```
5 3
4 4 1 2 1
```

### 输出

```
4```

## 样例 #2

### 输入

```
8 4
23 71 87 32 70 93 80 76
```

### 输出

```
163```

# AI分析结果



### 综合分析与结论
本题核心在于模拟接水顺序与优化时间计算。各解法主要分为两类：逐秒模拟时间流逝（低效但直观）与贪心策略优化时间分配（高效但需数据结构）。最优解法采用优先队列（最小堆）动态维护水龙头空闲时间，时间复杂度从O(ans*m)优化至O(n log m)，适合更大数据规模。

### 精选题解与评分

#### 1. WsW_ 题解（★★★★★）
**关键亮点**：  
- 使用优先队列维护水龙头结束时间，O(n log m)时间复杂度  
- 严格遵循题目接水顺序，堆中存储完成时间而非水量  
- 代码简洁高效，最终堆中最大值即为答案  

**核心代码**：  
```cpp
priority_queue<int, vector<int>, greater<int>> q;
for(int i=1;i<=m;i++) q.push(w_i);  // 初始m人入队
for(int i=m+1;i<=n;i++){
    int t = q.top(); q.pop();
    q.push(t + w_i);  // 当前最早结束龙头接新人
}
// 最终取堆中最大值
```

#### 2. lk_liang 题解（★★★★☆）
**关键亮点**：  
- 直观逐秒模拟过程，适合理解问题本质  
- 数组循环复用，代码量极简  
- 巧用t指针跟踪待接水人员  

**核心实现**：  
```cpp
int t = m+1, ans = 0;
while(t <= n+m) {
    for(int i=1; i<=m; i++) {
        if(--s[i] == 0) s[i] = s[t++];  // 替换接完水龙头
    }
    ans++;
}
```

#### 3. xxckie 题解（★★★★☆）
**关键亮点**：  
- 贪心策略每次选择当前最短龙头  
- 通过排序实现简单贪心逻辑  
- 适合理解贪心分配思想  

**核心片段**：  
```cpp
sort(a+1, a+1+m);           // 每次找最短龙头
a[1] += next_person_time;   // 追加新接水时间
```

---

### 最优思路总结
**关键技巧**：优先队列动态维护资源状态  
1. **数据结构选择**：最小堆快速获取最早空闲水龙头  
2. **时间累积法**：将接水时间累加到水龙头而非逐秒计算  
3. **终止条件**：最终最大累积时间即为答案  

---

### 拓展建议
1. **同类题目推荐**：  
   - P1090 合并果子（优先队列）  
   - P5019 铺设道路（贪心区间处理）  
   - P4059 [Code+#1]找爸爸（动态规划+资源分配）  

2. **应用场景**：  
   - 任务调度（如线程池管理）  
   - 资源分配优化（如服务器请求处理）  
   - 实时系统任务截止时间管理  

---

### 调试心得摘录
- **lk_liang**：强调`t`终止条件需仔细验证，初始值设为m+1确保队列衔接正确  
- **WsW_**：特别说明题目要求固定接水顺序，排除其他贪心干扰  
- **xxckie**：通过反证法解释贪心策略最优性（若选非最小必更差）

---
处理用时：65.63秒
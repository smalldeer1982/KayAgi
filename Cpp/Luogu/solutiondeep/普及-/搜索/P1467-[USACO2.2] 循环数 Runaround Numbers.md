# 题目信息

# [USACO2.2] 循环数 Runaround Numbers

## 题目描述

循环数是那些不包括 $0$ 且没有重复数字的整数（比如 $81362$）并且还应同时具有一个有趣的性质, 就像这个例子:

如果你从最左边的数字开始（在这个例子中 $8$）向右数最左边这个数（如果数到了最右边就回到最左边），你会停止在另一个新的数字（如果停在一个相同的数字上，这个数就不是循环数）。  

就像：$8\ 1\ 3\ 6\ 2$ 从最左边接下去数 $8$ 个数字: $1\ 3\ 6\ 2\ 8\ 1\ 3\ 6$ 所以下一个数字是 $6$

重复这样做 (这次从 `6` 开始数 $6$ 个数字) 并且你会停止在一个新的数字上: $2\ 8\ 1\ 3\ 6\ 2$, 也就是 $2$

再这样做 (这次数两个): $8\ 1$

再一次 (这次一个): $3$

又一次: $6\ 2\ 8$   

这时你回到了起点,在经过每个数字一次后回到起点的就是循环数。如果你经过每一个数字一次以后没有回到起点, 你的数字不是一个循环数。

给你一个数字 $m$ ，找出第一个比 $m$ 大的循环数, 输出数据保证结果能用一个无符号长整型数 $ \in [0,2^{32})$ 装下。 （追加提醒：循环数每个数位都必须要访问到）


## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1\le m \le 10^9$。

翻译来自NOCOW

USACO 2.2


## 样例 #1

### 输入

```
81361
```

### 输出

```
81362
```

# AI分析结果



### 综合分析与结论
本题的核心在于高效验证循环数的三个条件：无重复、不含0、遍历全数字后回到起点。题解主要分为暴力枚举和构造生成两类，其中暴力枚举结合剪枝是主流解法。优化关键在于快速排除无效数字（如重复、含0）及高效模拟遍历过程。

---

### 高星题解推荐

#### 1. 作者：BlueArc（5星）
**关键亮点**：
- 使用字符串处理数字，简化位数提取与重复检测。
- 分步剪枝：先检查0和重复，再模拟遍历，逻辑清晰。
- 利用取模运算处理循环移动，代码简洁高效。

**核心代码**：
```cpp
bool check(int x) {
    char s[20]; sprintf(s, "%d", x);
    int len = strlen(s);
    // 检查0和重复
    for (int i=0; i<len; i++) 
        if(s[i]=='0' || vis[s[i]-'0']) return false;
    // 模拟遍历过程
    int now=0; memset(vis,0,sizeof(vis));
    for(int i=0; i<len; i++) {
        int nxt = (now + s[now]-'0') % len;
        if(vis[nxt]) return false;
        vis[nxt] = 1; now = nxt;
    }
    return now == 0; // 必须回到起点
}
```

#### 2. 作者：Makasukaka（4星）
**关键亮点**：
- DFS构造数字，避免无效枚举，效率更高。
- 通过递归生成无重复数字组合，并验证循环性。

**核心思路**：
- 枚举位数，生成全排列时预判下一步位置是否可用。
- 最后一位必须指向首位，确保循环闭合。

#### 3. 作者：TBB_Nozomi（4星）
**关键亮点**：
- 使用DFS生成所有可能数字组合，减少无效搜索。
- 直接生成无重复数字，避免后续重复检查。

---

### 最优技巧总结
1. **字符串处理数字**：快速访问各位并检测重复/0（如`sprintf`）。
2. **分步剪枝**：先排除含0或重复的数字，再进行复杂遍历验证。
3. **循环模拟**：用取模运算处理数字遍历的循环逻辑，如`pos = (pos + digit) % len`。
4. **构造法优化**：DFS生成候选数，减少无效枚举次数。

---

### 类似题目推荐
1. [P1214 等差数列](https://www.luogu.com.cn/problem/P1214)：涉及数字特性枚举与剪枝。
2. [P1098 字符串的展开](https://www.luogu.com.cn/problem/P1098)：字符串处理与模拟。
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036)：DFS生成组合并验证条件。

---
处理用时：41.19秒
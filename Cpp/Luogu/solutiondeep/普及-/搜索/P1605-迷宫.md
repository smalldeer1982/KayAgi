# 题目信息

# 迷宫

## 题目描述

给定一个 $N \times M$ 方格的迷宫，迷宫里有 $T$ 处障碍，障碍处不可通过。

在迷宫中移动有上下左右四种方式，每次只能移动一个方格。数据保证起点上没有障碍。

给定起点坐标和终点坐标，每个方格最多经过一次，问有多少种从起点坐标到终点坐标的方案。

## 说明/提示

对于 $100\%$ 的数据，$1 \le N,M \le 5$，$1 \le T \le 10$，$1 \le SX,FX \le n$，$1 \le SY,FY \le m$。

## 样例 #1

### 输入

```
2 2 1
1 1 2 2
1 2
```

### 输出

```
1```

# AI分析结果



### 综合分析与结论
迷宫问题要求统计从起点到终点的所有路径数，核心解法为DFS+回溯。所有题解均采用DFS框架，差异主要体现在：
1. **状态标记方式**：使用独立标记数组 vs 复用障碍数组
2. **方向处理**：显式四个方向判断 vs 方向数组优化
3. **边界/异常处理**：终点障碍判断、起点重复访问处理
4. **代码结构优化**：函数拆分、变量命名可读性

关键优化点：方向数组简化代码、独立标记数组避免状态冲突、预处理终点障碍直接返回0。

---

### 精选题解与评分

#### 1. 作者：ybb756032937（★★★★☆）
**核心亮点**：
- 使用方向数组`dx/dy`简化方向遍历
- 独立标记数组`temp`避免与障碍数组冲突
- 代码结构清晰，注释明确

**关键代码**：
```cpp
int dx[4]={0,0,1,-1}, dy[4]={-1,1,0,0}; // 方向数组
void walk(int x, int y) {
    if(x == fx && y == fy) { total++; return; }
    for(int i=0; i<4; i++) { // 四方向遍历
        int nx = x+dx[i], ny = y+dy[i];
        if(!temp[nx][ny] && map[nx][ny]) {
            temp[x][y] = 1;    // 标记访问
            walk(nx, ny);
            temp[x][y] = 0;    // 回溯
        }
    }
}
```

#### 2. 作者：拱垲（★★★★☆）
**核心亮点**：
- 边界判断前置（越界直接return）
- 独立访问标记数组`b`与障碍数组`a`分离
- 详细函数命名提升可读性

**调试心得**：
> "第一次忘记回溯标记导致结果错误，调试后发现必须恢复访问状态"

**关键代码**：
```cpp
const int nextx[4]={0,0,1,-1}, nexty[4]={-1,1,0,0};
void dfs(int x, int y) {
    if(x<1||y<1||x>n||y>m) return; // 先判越界
    if(x==ex && y==ey) { ans++; return; }
    b[x][y] = true; // 独立标记数组
    for(int i=0; i<4; i++) {
        int nx = x+nextx[i], ny = y+nexty[i];
        if(!b[nx][ny] && a[nx][ny]) {
            dfs(nx, ny);
        }
    }
    b[x][y] = false; // 回溯
}
```

#### 3. 作者：Billy●Herrington（★★★★★）
**核心亮点**：
- 起点初始标记避免重复访问
- 显式处理终点障碍直接返回0
- 代码简洁且鲁棒性强

**关键优化**：
```cpp
// 输入时检查终点障碍
if(G[ex][ey] == 1) { cout << 0; return 0; }
// 起点初始标记
G[sx][sy] = true;
dfs(sx, sy);
```

---

### 关键思路总结
1. **方向数组优化**：使用`dx/dy`数组统一处理方向，避免冗余代码
2. **独立标记数组**：将访问状态与障碍状态分离，防止逻辑冲突
3. **终点预检查**：在DFS前判断终点是否可达，避免无效搜索
4. **回溯完整性**：每次递归后必须恢复访问状态，确保路径独立性

---

### 拓展练习
1. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219) - 经典DFS+回溯
2. [P1238 走迷宫](https://www.luogu.com.cn/problem/P1238) - 路径记录与输出
3. [P1506 拯救oibh总部](https://www.luogu.com.cn/problem/P1506) - 逆向DFS应用

---
处理用时：56.76秒
# 题目信息

# 循环的数字

## 题目描述

你曾经因为看见一样的东西一遍又一遍地重复、循环而对电视节目感到厌烦么？好吧，虽然我并不关心电视节目的好坏，不过有时却也很像那样不断循环的数字。

让我们假定两个不同的正整数 $(n, m)$ 是循环的，当且仅当你能通过将 $n$ 末端的几个数字移到它的首端而不改变移动的数字的顺序并使整个数字变成 $m$ 。举个例子，$(12345, 34512)$ 就是一对循环的数字，因为你能把 $12345$ 中末尾的 $345$ 移到 $12$ 前面，从而得到 $34512$。注意，为了成为一对循环的数字，$n$ 和 $m$ 位数必须相同。无论 $n$ 或 $m$ 都没有前置的 $0$。

现在给定正整数 $A$ 和 $B$，并保证 $A$ 和 $B$ 位数相同且均没有前置 $0$，求存在多少循环的正整数对 $(n, m)$，使得 $A \leq n \le m \leq B$ ？

## 说明/提示

$1\le A,B \leq 2\times 10^6$。

## 样例 #1

### 输入

```
1111 2222```

### 输出

```
287```

# AI分析结果



### 综合分析与结论
本题需高效枚举循环数对，核心在于避免重复计数与优化生成方式。各题解均采用枚举n并生成m的思路，关键差异在于循环数生成方式与去重策略。最优解法需满足以下条件：
1. 数学方式生成循环数（避免字符串操作）
2. 预处理10的幂次提升效率
3. 使用临时容器去重（如哈希表）
4. 跳过全同数字（如1111）

---

### 精选题解及评分

#### 1. Jiyuu_no_Tsubasa（4星）
**关键亮点**：  
- 预计算10的幂次，数学方式高效生成循环数  
- 代码简洁，时间复杂度O(k*N)（k为位数，N为区间长度）  
**不足**：未显式处理重复m（如1212→2121可能重复生成）  
```cpp
int s = 位数计算;
for(int i=a; i<b; i++){
    n = i;
    m = (n%10)*p[s-1] + n/10; //p为预计算幂次数组
    while(n != m){
        ans += (n < m && m <= b);
        m = (m%10)*p[s-1] + m/10; //循环生成下一个m
    }
}
```

#### 2. hanker_AFO（4星）
**关键亮点**：  
- 使用map去重，确保每个m只计数一次  
- 显式跳过全同数字提升效率  
**调试心得**：  
> "对1212操作得到2121时，只能记一次。不能算两次。"  
```cpp
void check(int x){
    map<int,bool> mm; //临时哈希表去重
    int tmp = x;
    for(int i=1; i<w; i++){ //w为位数
        tmp = (tmp%10)*ww + tmp/10; //ww=10^(w-1)
        if(tmp在区间内且未记录过) ans++;
    }
}
```

#### 3. yubing_lml（4星）
**优化关键**：  
- 初期字符串方案超时，改用数学生成  
- 使用标记数组避免重复计数  
**核心代码**：  
```cpp
int tmp = (n%c)* (big/c) + (n/c); //c为当前位数分割点
if(tmp >n && tmp<=b && 未标记过) 计数;
```

---

### 最优技巧总结
1. **数学生成循环数**：通过取余和除法快速生成循环后的数，公式为`m = (last_digit)*10^(k-1) + remaining_digits`
2. **预处理幂次**：提前计算10的不同幂次存入数组，避免重复计算pow
3. **去重策略**：使用临时哈希表或数组标记已处理的m，防止同一数对多次计数
4. **剪枝优化**：跳过全同数字（如1111）的无效枚举

---

### 相似题目推荐
1. [P1012 拼数](https://www.luogu.com.cn/problem/P1012) - 数字重组与排序  
2. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045) - 大数处理与快速幂  
3. [P1217 回文质数](https://www.luogu.com.cn/problem/P1217) - 数字特性与高效枚举  

---

### 个人心得摘录
- **Steinway**：  
  > "没看到n < m导致多次WA，最终发现标记数组未清空，提交20次才通过"  
  **教训**：仔细审题边界条件，重视初始化与状态重置  
- **sysong**：  
  > "字符串操作超时后改用数学生成，效率提升显著"  
  **启发**：优先考虑数学运算而非字符串处理优化性能  
- **hanker_AFO**：  
  > "1212的循环数存在重复，必须用哈希表去重"  
  **重点**：考虑特殊测试用例，完善去重逻辑

---
处理用时：73.37秒
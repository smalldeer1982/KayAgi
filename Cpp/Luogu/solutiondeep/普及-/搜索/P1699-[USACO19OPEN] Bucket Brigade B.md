# 题目信息

# [USACO19OPEN] Bucket Brigade B

## 题目描述

农场上起火了，奶牛们正在紧急赶去灭火！

农场可以用一个像这样的 $10×10$ 的字符方阵来描述：

```plain
..........
..........
..........
..B.......
..........
.....R....
..........
..........
.....L....
..........
```

字符 `B` 表示正着火的牛棚。字符 `L` 表示一个湖，而字符 `R` 表示农场上的一块巨大岩石。

奶牛们想要沿着一条湖到牛棚之间的路径组成一条“水桶传递队列”，这样她们就可以沿着这条路径传递水桶来帮助灭火。当两头奶牛在东南西北四个方向上相邻时水桶可以在她们之间传递。这对于湖边的奶牛也是对的——奶牛只能在紧挨着湖的时候才能用水桶从湖里取水。类似地，奶牛只能在紧挨着牛棚的时候才能用水去灭牛棚的火。 

请帮助求出奶牛们为了组成这样的“水桶传递队列”需要占据的 `.` 格子的最小数量。

奶牛不能站在岩石所在的方格之内，此外保证牛棚和湖不是相邻的。 

## 说明/提示

### 样例解释 1

在这个例子中，以下是一个可行的方案，使用了最小数量的奶牛（$7$）：

```plain
..........
..........
..........
..B.......
..C.......
..CC.R....
...CCC....
.....C....
.....L....
..........
```

## 样例 #1

### 输入

```
..........
..........
..........
..B.......
..........
.....R....
..........
..........
.....L....
..........```

### 输出

```
7```

# AI分析结果



### 综合分析与结论
本题核心是求湖（L）到牛棚（B）绕过岩石（R）的最短路径。主流解法分两类：**BFS/DFS搜索**和**曼哈顿距离特判**。前者通用性强但代码较长，后者利用题目特性（单障碍物）通过几何判断优化计算，代码更简洁。

### 高星题解推荐
#### 1. 作者：BGM114514（5星）
**关键亮点**  
- **思路**：通过曼哈顿距离直接计算路径长度，判断岩石是否在B和L的直线上。若在，则需绕行，答案+2；否则直接输出曼哈顿距离-1。  
- **代码简洁**：仅需一次输入扫描和简单条件判断，无复杂数据结构。  
- **正确性**：精准处理三点共线且岩石在路径中的特殊情况。  

**核心代码**  
```cpp
if(sy==ky&&ky==ey&&kx<max(ex,sx)&&kx>min(ex,sx)) // 同行且岩石在中间
    cout<<abs(ex-sx)+1;
else if(sx==kx&&kx==ex&&ky<max(ey,sy)&&ky>min(ey,sy)) // 同列且岩石在中间
    cout<<abs(ey-sy)+1;
else // 其他情况
    cout<<abs(ex-sx)+abs(ey-sy)-1;
```

#### 2. 作者：qw1234321（4星）
**关键亮点**  
- **分类讨论**：将情况分为三点共线与否，逻辑清晰。  
- **数学思维**：通过曼哈顿距离的几何性质，避免搜索，提升效率。  
- **启发式思路**：适合快速解决单障碍物场景，代码实现简单。  

**思路总结**  
- 若B、L、R不共线，直接输出曼哈顿距离-1。  
- 若共线且R在路径中间，需绕行，输出曼哈顿距离+1。  

#### 3. 作者：_little_Cabbage_（4星）
**关键亮点**  
- **标准BFS实现**：模板化代码易于理解，适合所有情况。  
- **可读性高**：结构清晰，注释明确，适合初学者学习。  

**核心代码**  
```cpp
int bfs(int sx,int sy,int tx,int ty) {
    queue<node> q;
    q.push({sx,sy,0});
    while(!q.empty()) {
        node f = q.front();
        q.pop();
        for(int i=0; i<4; i++) {
            int nx = f.x+dx[i], ny = f.y+dy[i];
            if(边界及障碍检查) continue;
            if(到达终点) return f.step;
            q.push({nx, ny, f.step+1});
        }
    }
    return -1;
}
```

### 关键思路总结
1. **曼哈顿距离特判**：针对单障碍物特性，通过几何判断优化计算，时间复杂度O(1)。  
2. **BFS通用解法**：适用于任意障碍物分布，代码模板化，时间复杂度O(n²)。  

### 拓展建议
- **类似题目**：  
  - [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141)（连通块+BFS）  
  - [P1746 离开中山路](https://www.luogu.com.cn/problem/P1746)（最短路径+方向限制）  
  - [P1443 马的遍历](https://www.luogu.com.cn/problem/P1443)（BFS扩展应用）  
- **调试技巧**：验证三点共线条件时，注意坐标顺序；BFS中需及时标记已访问节点避免重复。

---
处理用时：149.99秒
# 题目信息

# 爱与愁过火

## 题目背景

（本道题目隐藏了两首歌名，找找看哪~~~）

《爱与愁的故事第一弹·heartache》第三章。

爱与愁大神说这是ta的伤心指数，只不过现在好很多了，翻译只是看你无聊让你动动脑筋罢了（shit~~~）。虽然月落乌啼嘴上骂着：“我去年买了个表……纽曼表……”，但是结果还是请爱与愁大神去Pizza Hut吃了一顿。


## 题目描述

到了 Pizza Hut，爱与愁大神由于不爽，所以存心想坑月落乌啼的钱，他点了 $m$ 样菜，每样菜 $a_i$ 元。月落乌啼预计只用 $n$ 元，于是他让爱与愁大神重新从这 $m$ 样菜中选 $r$ 样。

爱与愁大神还是想坑钱，于是他打电话给你，让你编一个程序告诉他有几种方案可以从 $m$ 样菜中点取 $r$ 样菜但是还能超过月落乌啼的预计 $n$ 元。

## 说明/提示

### 数据范围及约定

对于 $100\%$ 数据，$m \le 30$，$r \le m$，$m \le a_i \le 90n \le 2700$。


## 样例 #1

### 输入

```
5 2 8

1 7 2 5 4```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题要求从 m 道菜中选 r 道使得总价超过 n 的方案数，核心解法可分为动态规划（二维背包）和剪枝优化的DFS两类。动态规划通过状态转移高效计算方案数，而DFS通过组合数预计算和排序优化大幅提升效率，两种方法均能在合理时间内解决问题。

---

### 高分题解推荐

#### 1. 深海鱼的眼泪（5星）
**关键亮点**  
- 标准的二维背包解法，状态定义清晰（f[j][k] 表示选 j 件总价 k 的方案数）
- 逆序枚举避免重复计算，空间优化到位
- 代码简洁高效，时间复杂度 O(m*r*sum)

**核心代码**  
```cpp
for (i=1;i<=m;i++){
    for (j=r;j>=1;j--){ 
        for (k=a[i];k<=t;k++){
            f[j][k] += f[j-1][k-a[i]];
        }
    }
}
```

#### 2. 雪风舞者（5星）
**关键亮点**  
- DFS + 组合数剪枝 + 倒序排序优化
- 预处理组合数快速计算剩余方案，排序后优先选高价菜加速剪枝
- 时间效率媲美DP（22ms）

**核心代码**  
```cpp
void dfs(int lst,int p,int f){
    if(f>n||p==r){
        if(f>n) ans+=c[m-lst][r-p];
        return;
    }
    for(int i=lst+1;i<=m-r+p+1;i++)
        dfs(i,p+1,f+a[i]);
}
```

#### 3. DrunkXT（4星）
**关键亮点**  
- DFS剪枝 + 组合数优化
- 标记数组避免重复搜索，剩余菜品不足时及时终止
- 清晰注释解释参数含义，易读性强

**个人心得**  
> "从 lst+1 开始选菜避免重复方案，本质是对搜索树的剪枝优化"

---

### 最优关键思路总结
1. **背包DP状态压缩**  
   使用二维数组 `f[j][k]` 表示选 j 件总价 k 的方案数，逆序枚举物品件数避免覆盖当前层数据。

2. **组合数预计算剪枝**  
   当DFS中途发现总价已超预算，直接计算剩余菜品的组合数 `C(剩余菜数, 还需选菜数)` 累加答案，避免无效递归。

3. **倒序排序加速剪枝**  
   将菜品价格从大到小排序，优先选高价菜更容易触发组合数剪枝条件，显著减少递归深度。

---

### 拓展建议
- **同类问题套路**  
  组合计数+约束条件问题常结合背包DP或剪枝DFS，例如[P1036 选数]（DFS+素数判断）、[P1157 组合的输出]（DFS+剪枝）。
  
- **推荐题目**  
  1. [P1164 小A点菜](https://www.luogu.com.cn/problem/P1164)（方案数背包）  
  2. [P1036 选数](https://www.luogu.com.cn/problem/P1036)（DFS剪枝+质数判断）  
  3. [P2679 子串](https://www.luogu.com.cn/problem/P2679)（二维背包扩展）

---
处理用时：64.23秒
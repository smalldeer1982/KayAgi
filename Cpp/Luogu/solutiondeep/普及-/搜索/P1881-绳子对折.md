# 题目信息

# 绳子对折

## 题目描述

FJ 有一个长度为 $L$（$1 \le L \le 10,000$）的绳子。这个绳子上有 $N$（$1 \le N \le 100$）个结，包括两个端点。$FJ$ 想将绳子对折，并使较短一边的绳子上的结与较长一边绳子上的结完全重合，如图所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/1spqhchu.png)

找出FJ有多少种可行的折叠方案。


## 说明/提示

(可在 1,2,3,8 点处折叠)


## 样例 #1

### 输入

```
5 10

0 

10 

6 

2 

4

```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题核心是找到所有可能的对称轴位置，使得折叠后两边的结完全对称。关键难点在于处理整数和中点折叠点的统一化处理，以及高效的对称性检测。通过将坐标乘以2转化为整数处理是大多数优质题解的共性优化。

---

### 高星题解推荐

#### 1. 题解作者：Alex_Wei（⭐⭐⭐⭐⭐）
**关键亮点**：  
- 将坐标*2转化为整数处理，避免浮点运算  
- 对称性检测采用双向扩展法，代码简洁高效  
- 时间复杂度 O(L*L) 但实际运行效率较高（L=2e4）  
**个人心得**：  
> "枚举位置时的技巧:将长度 l*2，储存时将所有结的位置也*2，省去了很多麻烦"

**核心代码**：
```cpp
int main(){
    cin>>n>>l;
    for(int i=1;i<=n;i++) cin>>p, r[p*2]=1; // 坐标*2存储
    for(int i=1;i<2*l;i++){ // 枚举所有可能的折叠点
        int pd=1, s=0;
        while(i>=s && i+s<=2*l){ // 向两边扩展
            if(r[i-s] != r[i+s]) pd=0; // 对称点状态不一致
            s++;
        }
        ans += pd;
    }
    cout<<ans;
}
```

#### 2. 题解作者：yagyagyag（⭐⭐⭐⭐）
**关键亮点**：  
- 独创双指针收缩法检测对称性  
- 动态跳过无结区域提升效率  
- 代码中强调坐标转换后的边界判断  
**核心思想**：
```cpp
bool check(int l,int r,int mid){
    while(l>=0 && r<=L){
        while(!used[l]) l--; // 左指针跳空
        while(!used[r]) r++; // 右指针跳空
        if(abs(l-mid) != abs(r-mid)) return 0;
        l--; r++;
    }
    return 1;
}
```

#### 3. 题解作者：Konnyaku_ljc（⭐⭐⭐⭐）
**关键亮点**：  
- 提供两种解法（数学公式法+0.5步长枚举）  
- 强调浮点转整数的坐标处理技巧  
- 代码包含详尽的边界注释  
**核心片段**：
```cpp
for(double i=0.5; i<x; i+=0.5){ // 0.5步长枚举
    int r,l;
    if((int)i < i) l=i-0.5, r=i+0.5; // 浮点转整数处理
    else l=r=(int)i;
    // ...对称检测...
}
```

---

### 关键思路总结
1. **坐标倍增法**：将绳长和结位置*2，使所有可能折叠点变为整数，避免浮点运算  
2. **对称扩展检测**：从候选点向两边扩展，比对对称位置的结状态  
3. **剪枝优化**：一旦发现不对称立即终止检测，提升效率  

---

### 同类题目推荐
1. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219) - 对称性布局检测  
2. [P1739 表达式括号匹配](https://www.luogu.com.cn/problem/P1739) - 对称结构验证  
3. [P2285 打鼹鼠](https://www.luogu.com.cn/problem/P2285) - 坐标映射与对称性判断  

---

### 调试经验摘录
> "WA了一回因为没考虑非整数折叠点" —— TheUltimateLaw  
> 教训：必须同时枚举整数点和两点中点，坐标倍增法可统一处理  
> "测试发现答案会重复计算，最终要减1" —— Konnyaku_ljc  
> 心得：对称轴在绳子中点时的边界条件需特殊处理

---
处理用时：78.74秒
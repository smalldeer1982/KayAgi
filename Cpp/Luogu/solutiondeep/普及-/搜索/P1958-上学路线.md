# 题目信息

# 上学路线

## 题目描述

你所在城市的街道好像一个棋盘，有 $a$ 条南北方向的街道和 $b$ 条东西方向的街道。南北方向的 $a$ 条街道从西到东依次编号为 $1$ 到 $a$，而东西方向的 $b$ 条街道从南到北依次编号为 $1$ 到 $b$，南北方向的街道 $i$ 和东西方向的街道 $j$ 的交点记为 $(i,j)$。

你住在 $(1,1)$ 处，而学校在 $(a,b)$ 处，你骑自行车去上学，自行车只能沿着街道走，而且为了缩短时间只允许沿着向东和北的方向行驶。

现在有 $N$ 个交叉路口在施工 $(X_1,Y_1)$、$(X_2,Y_2)$……，$(X_n,Y_n)$，这些路口是不能通车的。

问你上学一共有多少走法?

## 说明/提示

【样例解释】

![](https://cdn.luogu.com.cn/upload/image_hosting/d8tdwcbj.png)

## 样例 #1

### 输入

```
5 4
3
2  2
2  3
4  2
```

### 输出

```
5```

# AI分析结果



### 综合分析与结论
本题核心是求网格路径数，可用动态规划（递推）或搜索（DFS/BFS）解决。动态规划在时间效率上最优（O(a*b)），适用于较大数据；搜索在小数据下可行但效率较低。各题解中，动态规划解法普遍更优，记忆化搜索结合了递归与缓存，也是高效解法。

---

### 高分题解推荐

#### 1. 作者：KesdiaelKen（5星）
**关键亮点**  
- **动态规划思路清晰**，状态转移方程明确（`f[i][j] = f[i-1][j] + f[i][j-1]`）。
- **边界处理巧妙**：初始化`f[1][0]=1`，避免单独处理起点。
- **代码简洁高效**，无冗余操作，直接处理障碍点。

**核心代码**  
```cpp
int f[17][17] = {0};
// 初始化与转移
for (int i = 1; i <= a; i++)
    for (int j = 1; j <= b; j++)
        if (!sg[i][j]) f[i][j] = f[i-1][j] + f[i][j-1];
```

---

#### 2. 作者：Preccc_LHW（4星）
**关键亮点**  
- **记忆化搜索实现**，避免重复计算，效率接近动态规划。
- **边界判断简洁**，直接跳过障碍点和越界位置。
- **代码可读性强**，递归逻辑清晰。

**核心代码**  
```cpp
int dfs(int x, int y) {
    if (x > n || y > m || map[x][y]) return 0;
    if (x == n && y == m) return 1;
    if (f[x][y] != -1) return f[x][y];
    return f[x][y] = dfs(x+1, y) + dfs(x, y+1);
}
```

---

#### 3. 作者：过往梦魇之殇（4星）
**关键亮点**  
- **数学递推法**，直观模拟网格路径计算。
- **障碍点处理明确**，直接标记为0，逻辑简单。
- **适合教学场景**，便于理解标数法原理。

**核心代码**  
```cpp
for (int i = 2; i <= a; i++)
    for (int j = 2; j <= b; j++)
        if (flag[i][j]) mapp[i][j] = mapp[i-1][j] + mapp[i][j-1];
```

---

### 关键思路与技巧总结
1. **动态规划**：最优解法，状态转移方程 `f[i][j] = f[i-1][j] + f[i][j-1]`，需处理障碍点为0。
2. **记忆化搜索**：递归+缓存，避免重复计算，适合复杂边界场景。
3. **边界处理**：初始化首行/列时，遇到障碍后需中断（后续点不可达）。

---

### 同类型题目推荐
1. **P1002 [NOIP2002 普及组] 过河卒**（类似递推，含障碍）
2. **P1433 吃奶酪**（DFS+状态压缩，路径优化）
3. **P1608 路径统计**（Dijkstra+动态规划，最短路径计数）

---

### 调试心得摘录
- **KesdiaelKen**：强调“出发点两边赋值为1后，遇到障碍需中断循环”，避免错误累加。
- **Preccc_LHW**：提到“记忆化数组初始化为-1，避免与合法值混淆”，确保缓存正确性。
- **过往梦魇之殇**：提醒“障碍点需提前标记为0”，否则递推会错误累加路径。

---
处理用时：58.01秒
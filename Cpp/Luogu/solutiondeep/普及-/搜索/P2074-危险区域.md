# 题目信息

# 危险区域

## 题目背景

一个恐怖组织在一座城市中安放了定时炸弹，其威力巨大，现在这里的警长想知道最坏的情况下会有多少街区受威胁。

## 题目描述

在一个城市有 $N \times M$ 个街区，每个街区由坐标描述，如图所示：



|  | $1$ | $2$ | $3$ | $\cdots$ | $M$ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $1$ | $(1,1)$ | $(1,2)$ | $(1,3)$ | $\cdots$ | $(1,M)$ |
| $2$ | $(2,1)$ | $(2,2)$ | $(2,3)$ | $\cdots$ | $(2,M)$ |
| $3$ | $(3,1)$ | $(3,2)$ | $(3,3)$ | $\cdots$ | $(3,M)$ |
| $\vdots$ |  |  |  | $\ddots$ |  |
| $N$ | $(N,1)$ | $(N,2)$ | $(N,3)$ | $\cdots$ | $(N,M)$ |

现在已知有一个恐怖组织在其中的一个街区安放了定时炸弹，其威力为 $t$，即所有到这个街区的直线距离小于等于 $t$ 的街区都会受威胁，已知有 $k$ 个可能的炸弹安放位置，现在这里的警长想知道最坏的情况下会有多少街区受威胁。


## 说明/提示

**数据规模与约定**

对于$20\%$的数据 $k=1$。

对于 $50\%$ 的数据 $1 \le n,m \le 1000$，$1 \le k \le 20$，$1\le t \le 100$。

对于 $100\%$ 的数据 $1 \le n,m \le 10^5$，$1 \le k \le 50$，$t \le 300$。

fixed by @[$\color{#5EB95E}{\textsf{Cppsteve}}$](https://www.luogu.com.cn/user/479296)

## 样例 #1

### 输入

```
4 5 3 2

1 2

3 4

4 5

```

### 输出

```
11```

# AI分析结果



### 综合分析与结论  
本题核心为计算圆形覆盖区域的最大格点数。各题解普遍采用 **范围剪枝+暴力枚举** 的思路，通过将圆形范围转化为外接正方形，大幅减少枚举量。关键优化点在于正确计算正方形的边界（用 `max/min` 处理越界），时间复杂度为 O(k*(2t)^2)，在题目数据范围下可行。但所有题解均未采用 **平方比较代替开根号** 的整数优化，略有遗憾。

---

### 高评分题解推荐  
#### 1. 作者：greenheadstrange（⭐️⭐️⭐️⭐️）  
**关键亮点**：  
- 引入正方形覆盖圆的几何证明，直观解释剪枝原理。  
- 代码简洁，边界处理清晰。  
**核心代码**：  
```cpp
for(int i=max(1,x-t);i<=min(n,x+t);i++)
    for(int j=max(1,y-t);j<=min(m,y+t);j++)
        ans += (dis(i,j,x,y) <= t);
```

#### 2. 作者：Atmizz（⭐️⭐️⭐️⭐️）  
**关键亮点**：  
- 详细注释与函数封装，代码可读性强。  
- 强调避免数组存储的空间优化。  
**个人心得**：  
> “实践出真知，我实践了得50分”——提醒读者注意数据范围对算法的影响。

#### 3. 作者：revenger（⭐️⭐️⭐️⭐️）  
**关键亮点**：  
- 代码简洁，变量命名规范，逻辑清晰。  
- 明确时间复杂度分析，增强可读性。  

---

### 最优关键思路与技巧  
1. **几何剪枝**：利用圆的外接正方形缩小枚举范围，减少无效计算。  
2. **边界处理**：`max(1, x-t)` 和 `min(n, x+t)` 确保不越界。  
3. **平方优化**（可拓展）：将距离比较改为 `(dx² + dy²) <= t²`，避免浮点运算。  

**改进代码示例**：  
```cpp
int dis2 = (i-x)*(i-x) + (j-y)*(j-y);
if (dis2 <= t*t) ans++;
```

---

### 拓展与举一反三  
- **同类问题**：激光炸弹（二维前缀和）、矩形覆盖问题（离散化）。  
- **优化延伸**：当 t 较大时，可改用扫描线或数学公式直接计算圆内格点数。  

---

### 推荐习题  
1. [P3717 - 覆盖](https://www.luogu.com.cn/problem/P3717)（同款圆形覆盖）  
2. [P2280 - 激光炸弹](https://www.luogu.com.cn/problem/P2280)（二维前缀和优化）  
3. [CF613B - Skills](https://www.luogu.com.cn/problem/CF613B)（离散化与范围处理）

---
处理用时：60.46秒
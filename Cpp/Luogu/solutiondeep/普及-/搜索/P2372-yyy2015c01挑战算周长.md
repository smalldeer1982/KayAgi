# 题目信息

# yyy2015c01挑战算周长

## 题目背景

yyy2015c01 快速的解决了问题，受到邻居们的赞许，高兴的回到家，把糖给了妈妈，吃了香喷喷的午饭，又睡了一个甜甜的午觉，感觉人生真美好。下午爸爸回到家，听说了 yyy2015c01 帮老师及邻居们解决了难题，准备带她去游乐场玩她平日最喜欢玩的跳舞机作为奖励，yyy2015c01 听了，兴奋的一蹦三尺高。

## 题目描述

游乐场里人头攒动，每台跳舞机前都围满了人，怎么办呢？人这么多，想玩上估计要等好久了，yyy2015c01 左顾右盼，突然发现一台跳舞机前面没人， “哈哈，被我发现一台没人的，赶快去……”，结果到了面前才发现这台新机器的玩法与众不同，脚下的格子随机位置显示出很多的 `X`，踩到一个格子，就要根据规则先算出它对应的周长，然后把正确周长输入机器，最后的胜利者还可以获得游乐城的免费游戏券一张，yyy2015c01 心动了，小朋友们，你们可以帮助 yyy2015c01 顺利拿到游戏券么？

游戏规则如下：

新跳舞机踏板上有许多要分析的目标，由脚踩确定一个目标。目标边界的周长是一个有用的测量参数。编程任务：确定选中目标的周长。新跳舞机的踏板是一个矩形的网格，里面点 `.`，表示空的地方；有大写字母 `X`，表示目标的一部分。

方格中的一个 `X` 是指一个完整的网格方形区域，包括其边界和目标本身。网格中心的 `X` 与其边界上 $8$ 个方向的 `X` 都是相邻的。任何两个相邻的 `X`，其网格方形区域在边界或拐角处是重叠的，所以它们的网格方形区域是相邻的。一个目标是由一系列相邻 `X` 的网格方形区域连接起来构成的。在网格 $1$ 中，一个目标填充了全部网格；在网格 $2$ 中有两个目标，其中一个目标只占左下角的一个网格方形区域，其余的 `X` 属于另一个目标。

yyy2015c01 总是能踩到一个 `X`，以选中包含该 `X` 的目标，记录脚踩时的坐标。行列号是从左上角开始，从 $1$ 开始编号的。一个有用的统计参数是目标的周长。 假定每个 `X` 的每条边上有一个方形的单元。

目标中不会包含任何完全封闭的孔。


## 说明/提示

$1\leq M\leq 20$，$1\leq N\leq 20$，$1\leq X\leq M$，$1\leq Y\leq N$。


## 样例 #1

### 输入

```
2 2 2 2 
XX
XX```

### 输出

```
8```

## 样例 #2

### 输入

```
6 4 2 3 
.XXX
.XXX
.XXX
...X
..X.
X...```

### 输出

```
18```

# AI分析结果



### 综合分析与结论
本题需计算连通块周长，关键点在于处理8邻域连通的同时，统计4邻域边界。各题解主要采用DFS/BFS遍历连通块，并采用两种思路统计周长：动态统计（遍历时判断4方向）或二次遍历（统计每个X的4邻域贡献）。正确解法需注意避免重复计算，确保每个边仅统计一次。

### 高星题解推荐

#### 1. Alex_Wei（5星）
**关键亮点**：DFS过程中动态统计周长，代码简洁高效。将8方向搜索与4方向周长判断结合，减少遍历次数。
```cpp
void dfs(int a,int b) {
    pd[a][b]=1;
    for(int c=0;c<8;c++){
        int d=dx[c]+a,e=dy[c]+b;
        if(d>0&&d<=m&&e>0&&pd[d][e]==0&&k[d][e]=='X') dfs(d,e);
        // 处理上下左右方向时判断边界/X存在性
        if(c>3&&(d<=0||d>m||e<=0||e>n||k[d][e]!='X')) ans++;
    }
}
```

#### 2. TsReaper（5星）
**关键亮点**：BFS分步处理，思路直观。每个X初始贡献4周长，每存在相邻X则减1，逻辑清晰。
```cpp
// BFS后统计逻辑
for(每个X的4邻域){
    if(相邻是X) ans--;
}
```

#### 3. agicy（4星）
**亮点**：BFS+二次遍历，结构清晰易维护。先标记连通块后统一统计，适合理解。
```cpp
for(每个X的4方向){
    if(相邻非X或越界) ans++;
}
```

### 最优思路总结
- **动态统计法**：在DFS/BFS扩展连通块时，直接检查当前X的4方向边界，实时累加周长。优势在于一次遍历完成计算。
- **二次遍历法**：先标记全部连通X，再遍历每个X的4方向统计贡献。优势在于逻辑分离，易于调试。

### 相似题目推荐
1. **P1451 求细胞数量**（连通块计数）
2. **P1162 填涂颜色**（标记特殊连通块）
3. **P2296 寻找道路**（图连通性+条件过滤）

### 题解心得摘录
- **Alex_Wei**：方向数组分角与边，注释明确处理逻辑。
- **樱式分解**：尝试用`h`标记方向类型，但因递归状态未妥善处理导致潜在错误。
- **TsReaper**：强调分步统计的直观性，适合算法初学者理解。

---
处理用时：132.37秒
# 题目信息

# yyy2015c01 的 IDE 之 Call Stack

## 题目背景

在 2020 年的某一天，我们的 yyy2015c01 同学想要开发一套 IDE。


## 题目描述

作为他开发团队中的一员，你不幸地 yyy2015c01 被选入了 Debugger 的开发组。

yyy2015c01 设想的 Debugger 由几部分组成，其中的一个小组件就是 Call Stack——中文称之为 “调用栈”。

由于 IDE 目前还是内测版，开发组需要先编一个能识别参数表的 Call Stack 来看看效果如何。这个任务交由你来完成。

开发组假想的 Call Stack 能实现识别 `int` 和 `char` 参数表，以辨别出不同的函数，规则是：

```
int fac1(int n);
```

和

```
int fac1(char n);
```

是两个不同的函数；但

```
int Fac1(int n,int m);
```

和

```
int FAC1(int x,int y);
```

被认为是相同的函数。也就是说，这个 Call Stack 认的不是参数名，而是其类型和忽略大小写的函数名。

注意：`int main()` 可能会出现，也可能不出现；无论它有没有出现，都不能将其算入函数中。

请你编写一个 Call Stack，并在所有函数调用完后输出这个程序一共有多少个不完全相同的函数（保证程序中的每个函数至少调用一次）。


## 说明/提示

每个函数的参数最多有 $10$ 个，每行的输入数据长度均不超过 $255$。

向本题主人公 yyy2015c01 同学致敬！


## 样例 #1

### 输入

```
2
FAC1 (N=233, M=65 'A', A=0)
main ()
```

### 输出

```
1
```

## 样例 #2

### 输入

```
2
fac1 (N=250)
FAC1 (a=987)
```

### 输出

```
1
```

# AI分析结果



### 综合分析与结论
本题核心在于解析函数签名（小写函数名+参数类型序列），用高效方式判重。所有题解均采用字符串转换+容器判重的思路，差异主要体现在数据结构和参数解析方式上。最优解法应兼顾可读性与效率，利用STL容器的自动去重特性。

---

### 高星题解推荐

#### 1. 作者：OoXiao_QioO（⭐️⭐️⭐️⭐️⭐️）
**关键亮点**：  
- 独创性将函数特征编码为字符串（如`fac1101`）  
- 利用map自动去重，极大简化比较逻辑  
- 单引号判断参数类型的方法简洁高效  
**核心代码**：
```cpp
for(i=0;i<l;i++) {
    f = 1;
    if(s1[i]=='=') { // 检测到参数起始
        while(s1[i]!=',' && i<l) { // 扫描参数区间
            i++;
            if(s1[i]=='\'') f = 0; // 发现单引号标记为char
        }
    }
    x += f ? '1' : '0'; // 构建特征字符串
}
```

#### 2. 作者：zimingsun23（⭐️⭐️⭐️⭐️）
**关键亮点**：  
- 使用`set<pair<string, vector<bool>>>`结构自然去重  
- 函数名转换与参数解析分离，模块化清晰  
- 逐字符流式处理参数，内存效率高  
**核心代码**：
```cpp
bool readnxt(){ // 流式解析参数类型
    char c = getchar();
    while(c!=',' && c!=')') {
        if(c == 39) f = 1; // 单引号检测
        c = getchar();
    }
    return c != ')'; // 判断是否继续读取
}
```

#### 3. 作者：Alex_Wei（⭐️⭐️⭐️⭐️）
**关键亮点**：  
- 结构体封装函数特征，可读性强  
- 独立参数解析函数提升代码复用性  
- 手写字符串比较函数体现底层理解  
**核心代码**：
```cpp
vector<int> getpara() {
    getline(cin, p);
    for(char c : p) {
        if(c == 39) pc = 1;       // 单引号标记char
        if(c == ',' || c == ')')  // 参数结束
            para.push_back(pc);
    }
}
```

---

### 最优技巧总结
1. **特征编码**：将函数名（小写）与参数类型（0/1序列）组合成唯一字符串  
2. **STL魔法**：利用`map`/`set`自动去重，避免手动比较  
3. **单引号检测**：通过扫描参数区间内的`'`字符判定char类型  
4. **流式处理**：逐个字符解析参数，避免复杂字符串分割  

---

### 举一反三
**同类题目推荐**：  
1. P1308 [统计单词数]（字符串特征提取）  
2. P3952 [时间复杂度]（嵌套结构解析）  
3. P1177 [快速排序]（特征比较与去重）

**扩展套路**：  
当处理需要特征匹配的问题时，可考虑：  
- 将复杂结构编码为字符串或数值特征  
- 利用STL容器实现自动去重  
- 流式处理避免大字符串操作  

---

### 题解中的调试智慧
1. **伏地魔老杨**提到：数字后接空格时必为char型参数，该观察简化了类型判断  
2. **UnyieldingTrilobite**强调：手动给参数末尾添加逗号，统一处理逻辑  
3. **Alex_Wei**采用`x==1`强制插入首个元素，避免空容器时的边界问题

---
处理用时：53.77秒
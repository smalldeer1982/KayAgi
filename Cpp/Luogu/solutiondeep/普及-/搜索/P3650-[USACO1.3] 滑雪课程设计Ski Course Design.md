# 题目信息

# [USACO1.3] 滑雪课程设计Ski Course Design

## 题目描述

农民约翰的农场里有 $n$ 座山峰，每座山都有一个在 $0$ 到 $100$ 之间的整数的海拔高度。在冬天,因为山上有丰富的积雪，约翰经常开办滑雪训练营。

不幸的是，约翰刚刚得知税法在滑雪训练营方面有新变化，明年开始实施。在仔细阅读法律后，他发现如果滑雪训练营的最高和最低的山峰海拔高度差大于 $17$ 就要收税。因此，如果他改变山峰的高度（使最高与最低的山峰海拔高度差不超过 $17$ ），约翰可以避免支付税收。

如果改变一座山 $x$ 单位的高度成本是 $x^2$ 单位，约翰最少需要付多少钱才能使海拔最高的山峰与海拔最低的山峰的高度之差不超过 $17$ 约翰只愿意改变整数单位的高度。

## 说明/提示

#### 样例输入输出 1 解释

约翰保持高度为 $4$、$20$ 和 $21$ 的山的高度。他增高高度为 $1$ 的山，变成高度 $4$ ，花费 $3^2 = 9$。他降低了高度为 $24$ 的山变成高度 $21$，也花费 $3 ^ 2 = 9$。因此总共花费 $9 + 9 = 18$。

---

#### 数据规模与约定

对于 $100\%$ 的数据，$1 \le n \le 1000$，$0 \leq a_i \leq 100$。

## 样例 #1

### 输入

```
5
20
4
1
24
21```

### 输出

```
18```

# AI分析结果



### 综合分析与结论
本题核心在于通过调整山峰高度使极差≤17，并求最小调整成本。所有题解均围绕暴力枚举可行区间展开，部分题解通过优化枚举范围或使用三分法提升效率。最优思路是枚举所有可能的区间`[i, i+17]`（i∈[0,83]），计算总成本并取最小值。三分法虽高效，但需确保代价函数单谷性。

### 高分题解推荐
1. **xiaoniu142857（5星）**  
   **关键亮点**：利用三分法优化时间复杂度至O(n log n)，正确性基于代价函数的单谷性。  
   **代码核心**：
   ```cpp
   int f(int x) { // 计算区间[x, x+17]的总成本
       int s=0;
       for(int i=0;i<n;++i) {
           if(a[i]<x) s+=(x-a[i])*(x-a[i]);
           else if(a[i]>x+17) s+=(a[i]-x-17)*(a[i]-x-17);
       }
       return s;
   }
   // 三分法寻找最小值
   while(l<r) {
       m1=(l+r>>1),m2=m1+1;
       if(f(m1)<f(m2)) r=m2-1;
       else l=m1+1;
   }
   ```

2. **「QQ红包」（4星）**  
   **关键亮点**：明确枚举范围（0≤i≤84），代码简洁高效，适合数据规模。  
   **核心实现**：
   ```cpp
   for (i=0;i<=84;i++) {
       int cost = 0;
       for (j=1;j<=n;j++) {
           if (a[j]<i) cost += (i-a[j])*(i-a[j]);
           if (a[j]>i+17) cost += (a[j]-(i+17))*(a[j]-(i+17));
       }
       min_cost = min(min_cost, cost);
   }
   ```

3. **Sea_Level（4星）**  
   **关键亮点**：代码注释详尽，枚举范围严格限定，逻辑清晰易理解。  
   **代码片段**：
   ```cpp
   for (int low = 0; low +17 <=100; low++) {
       int high = low+17;
       int sum=0;
       for (int h : heights) {
           if (h < low) sum += (low-h)*(low-h);
           else if (h > high) sum += (h-high)*(h-high);
       }
       ans = min(ans, sum);
   }
   ```

### 关键思路总结
- **暴力枚举**：枚举所有可能的目标区间`[i, i+17]`，计算每个区间的调整成本，时间复杂度O(100n)。  
- **三分优化**：利用代价函数的单谷性，将时间复杂度优化至O(n log n)，适用于更大数据规模。

### 拓展与相似题目
- **P1873 砍树**（二分答案）  
- **P1902 刺杀大使**（二分答案+DFS验证）  
- **P1182 数列分段**（贪心+二分答案）

### 个人心得摘录
- **xfydemx**：暴力枚举在数据较小时往往可行，避免过早优化。  
- **phil071128**：注意枚举范围的正确性，避免因遗漏导致错误。  
- **xiaoniu142857**：识别代价函数的单调性或单谷性是优化算法的关键。

---
处理用时：156.34秒
# 题目信息

# [NOIP 2011 提高组] 铺地毯

## 题目描述

为了准备一个独特的颁奖典礼，组织者在会场的一片矩形区域（可看做是平面直角坐标系的第一象限）铺上一些矩形地毯。一共有 $n$ 张地毯，编号从 $1$ 到 $n$。现在将这些地毯按照编号从小到大的顺序平行于坐标轴先后铺设，后铺的地毯覆盖在前面已经铺好的地毯之上。

地毯铺设完成后，组织者想知道覆盖地面某个点的最上面的那张地毯的编号。注意：在矩形地毯边界和四个顶点上的点也算被地毯覆盖。


## 说明/提示

【样例解释 1】

如下图，$1$ 号地毯用实线表示，$2$ 号地毯用虚线表示，$3$ 号用双实线表示，覆盖点 $(2,2)$ 的最上面一张地毯是 $3$ 号地毯。

![](https://cdn.luogu.com.cn/upload/image_hosting/q4izfzpb.png)

【数据范围】

对于 $30\%$ 的数据，有 $n \le 2$。  
对于 $50\%$ 的数据，$0 \le a, b, g, k \le 100$。  
对于 $100\%$ 的数据，有 $0 \le n \le 10^4$, $0 \le a, b, g, k \le {10}^5$。   

noip2011 提高组 day1 第 $1$ 题。

## 样例 #1

### 输入

```
3
1 0 2 3
0 2 3 3
2 1 3 3
2 2
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3
1 0 2 3
0 2 3 3
2 1 3 3
4 5```

### 输出

```
-1```

# AI分析结果



### 综合分析与结论
所有题解均采用存储地毯参数后遍历判断的核心思路，核心差异在于遍历方向与数据结构选择。最优解为逆序遍历+提前终止，时间复杂度 O(n) 且实际效率更优。关键技巧是避免存储全图，利用地毯覆盖顺序特性。

---

### 精选题解列表

#### 1. 作者：谁懂谁伤心（5星）
**关键亮点**  
- 逆序遍历实现提前终止，最优时间复杂度  
- 代码极简（仅8行核心逻辑）  
- 利用坐标范围直接判断，无冗余计算  
**核心代码**  
```cpp
for(int j=i;j>=1;j--) 
    if(x在j号地毯范围内) { printf("%d",j); return 0; }
```

#### 2. 作者：kuaiCreator（5星）  
**关键亮点**  
- 逆序+显式 break 控制流  
- 变量命名清晰（a/g/k 明确表示参数）  
- 包含数据范围注释，体现工程思维  
**核心代码**  
```cpp
for(int i = n; i >= 1; i--) {
    if(x在i号地毯范围) { ans = i; break; }
}
```

#### 3. 作者：Jayfeather2012（4星）  
**关键亮点**  
- 明确注释判断逻辑  
- 使用标准库函数提升可移植性  
- 完整处理输入输出流  
**个人心得**  
> "判断所求位置是否被地毯覆盖" —— 明确注释条件判断意义，方便理解

---

### 最优思路总结
**核心实现**：存储每个地毯的坐标参数，逆序检查点是否满足 `a≤x≤a+g && b≤y≤b+k`，首个满足的地毯即为答案。  
**代码示例**：
```cpp
int main() {
    // 读取所有地毯参数
    for(int i=1; i<=n; i++) cin >> a[i] >> b[i] >> g[i] >> k[i];
    
    // 逆序检查
    int ans = -1;
    for(int i = n; i >= 1; i--) {
        if(x >= a[i] && x <= a[i]+g[i] 
        && y >= b[i] && y <= b[i]+k[i]) {
            ans = i;
            break;
        }
    }
    cout << ans;
}
```

---

### 拓展与举一反三
1. **同类问题**：多层覆盖问题（如[CF1538D]）、动态覆盖查询（如[LOVECRAFT]）  
2. **优化延伸**：若多查询可构建R树等空间索引结构  
3. **思维迁移**：逆序处理思想适用于最后生效型问题（如[NOIP 2016 玩具谜题]）

---

### 推荐练习题
1. [P2697 宝石项链](https://www.luogu.com.cn/problem/P2697) - 逆向覆盖检测  
2. [CF1028C Rectangles](https://www.luogu.com.cn/problem/CF1028C) - 多矩形交集  
3. [P2280 激光炸弹](https://www.luogu.com.cn/problem/P2280) - 二维前缀和优化

---
处理用时：74.99秒
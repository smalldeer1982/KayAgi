# 题目信息

# 拱猪计分

## 题目描述

「拱猪」是一种很有趣的扑克牌游戏。即使你不知道它的玩法，你也可以由它的计分方式来了解它的趣味性。假设在此我们仅考虑四个人的拱猪牌局，本题要求你根据下面的计分规则，在牌局结束时计算四位玩家所得分数。

1. 我们分别以 $\texttt S, \texttt H, \texttt D, \texttt C$ 来代表黑桃、红心、方块及梅花，并以数字 $1$ 至 $13$ 来代表 $\texttt A, \texttt 2, \dots, \texttt Q, \texttt K$ 等牌点，例如：$H_1$ 为红心 $\texttt A$，$S_{13}$ 为黑桃 $\texttt K$；
2. 牌局结束时，由各玩家持有的有关计分的牌（计分牌）仅有「猪」$S_{12}$，所有红心牌，「羊」$D_{11}$ 及「加倍」$C_{10}$ 等 $16$ 张牌，其它牌均弃置不计，若一位玩家未持有这 $16$ 张牌中任意一张，则以得零分计算；
3. 若持有 $C_{10}$ 牌的玩家只有该张牌而没有任何其它牌则得 $+50$ 分，否则将其它计分牌所得分数加倍计算；
4. 若红心牌不在同一家，则 $H_1$ 至 $H_{13}$ 等 $13$ 张牌均以负分计，其数值依次为 $-50, -2, -3, -4, -5, -6, -7, -8, -9, -10, -20, -30, -40$，且 $S_{12}$ 与 $D_{11}$ 的分值分别以 $-100$ 及 $+100$ 分计算；
5. 若红心牌 $H_1$ 至 $H_{13}$ 均在同一家，则有下列情形：

+ 所有红心牌以 $+200$ 分计算。
+ 若 $S_{12}, D_{11}$ 皆在吃下所有红心牌之一家，则此玩家得 $+500$ 分。
+ $C_{10}$ 牌依旧以前文所述原则计算。

例一：若各玩家持有计分牌如下：

1. `S12 H3 H5 H13`
2. `D11 H8 H9`
3. `C10 H1 H2 H4 H6 H7`
4. `H10 H11 H12`

则各家之得分依序为：$-148, +83, -138$ 及 $-60$。

例二：若各玩家持有计分牌如下：

1. `H1 H2 H3 H4 H5 H6 H7 H8 H9 H10 H11 H12 H13`
2. `S12 C10`
3. `D11`
4. 无

则各家之得分依序为：$+200, -200, +100$ 及 $0$。

例三：若有一玩家持有所有 $16$ 张计分牌，则得 $+1000$ 分，其余三家均得零分。

## 样例 #1

### 输入

```
4  S12  H3  H5  H13
3  D11  H8  H9
6  C10  H1  H2  H4  H6  H7
3  H10  H11 H12
13 H1  H2  H3  H4  H5  H6  H7  H8  H9  H10  H11  H12  H13  
2  S12  C10
1  D11
0
0
0
0
0
```

### 输出

```
-148 +83 -138 -60
+200 -200 +100 0
```

# AI分析结果



### 综合分析与结论
本题属于复杂规则模拟类题型，核心难点在于准确处理多条件嵌套的计分规则。各题解普遍采用分情况处理策略，主要差异体现在数据结构选择与条件判断的完整性上。最优解法需同时满足：正确识别红心全集条件、正确处理C10的加倍逻辑、高效处理特殊组合得分。

---

### 精选题解推荐

#### 1. 作者：Diaоsi（4.5星）
**关键亮点**：
- 使用结构体分阶段处理计分逻辑，层次清晰
- 单独封装计分函数，增强代码可维护性
- 完整处理了红心全集与C10单独存在的边界条件
**核心代码**：
```cpp
int score() {
    int cntH = 0, cntC10 = 0, ...; // 统计各类型牌
    if (cntH == 13) { // 红心全集处理
        if (同时存在S12和D11) ans += 500;
        else ans += 200 + 其他牌基础分;
    } else { // 正常计分模式
        for (每张红心牌) ans += 对应负分;
    }
    if (仅C10存在) ans = 50;
    else if (存在C10) ans *= 2; // 加倍处理
    return ans;
}
```

#### 2. 作者：juruo_zjc（4星）
**关键亮点**：
- 使用二维标记数组记录牌型存在性，提升判断效率
- 将计分规则数值化存储，简化计算逻辑
- 采用分层条件结构，逻辑流清晰
**核心思路**：
```cpp
int Fs[] = {计分规则表}; // 预存得分值
if (红心全集) {
    if (S12&D11共存) 直接赋500分;
    else 计算基础分200+单牌得分;
} else {
    累加各牌对应Fs值;
}
if (C10存在且非单牌) 总分翻倍;
```

---

### 关键实现技巧
1. **状态标记法**：使用位标记或布尔数组记录关键牌（S12/D11/C10）的存在状态
2. **预计算表**：将红心牌的负分规则预先存入数组，避免复杂的条件分支
3. **分层处理**：优先处理全集红心情况，再处理普通情况，最后处理C10影响
4. **结构封装**：将玩家数据封装为结构体，提高代码可读性与可维护性

---

### 同类题目推荐
1. **P1563 玩具谜题**（模拟类方向判断）
2. **P1056 排座椅**（复杂规则模拟）
3. **P1067 多项式输出**（多条件格式化输出）

---

### 调试经验摘录
1. "输出必须带符号，即使正数也要加'+'，为此WA了两次"（Diaоsi题解）
   → **教训**：仔细阅读输出格式要求
2. "发现数据较弱，全集16张牌的条件在通过后才补全"（Diaоsi题解）
   → **建议**：应优先处理全集情况
3. "红心全集时仍需计算S12/D11基础分，最初遗漏此规则"（juruo_zjc题解）
   → **启示**：特殊情况下仍需处理普通规则分支

---
处理用时：67.27秒
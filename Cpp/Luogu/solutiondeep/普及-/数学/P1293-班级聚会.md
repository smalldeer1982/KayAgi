# 题目信息

# 班级聚会

## 题目描述

毕业25年以后，我们的主人公开始准备同学聚会。打了无数电话后他终于搞到了所有同学的地址。他们有些人仍在本城市，但大多数人分散在其他的城市。不过，他发现一个巧合，所有地址都恰好分散在一条铁路线上。他准备出发邀请但无法决定应该在哪个地方举行宴会。最后他决定选择一个地点，使大家旅行的花费和最小。

不幸的是，我们的主人公既不擅长数学，也不擅长计算机。他请你帮忙写一个程序，根据他同学的地址，选择聚会的最佳地点。花费相同时优先取靠近莫斯科的城市。


## 说明/提示

### 数据范围及约定

对于全部数据，保证城市数量 $ \le 150$，距离 $ \le 10000$，同学个数 $ \le 50$。

## 样例 #1

### 输入

```
7 9289 Vladivostok
5 8523 Chabarovsk
3 5184 Irkutsk
8 2213 Yalutorovsk
10 0 Moscow
```

### 输出

```
Yalutorovsk 112125
```

# AI分析结果



### 综合分析与结论
题目要求找到使总旅行费用最小的城市，费用相同时选离莫斯科更近的。各题解主要采用暴力法、排序优化、数学性质（如带权中位数）等思路。关键点在于正确计算每个城市的总花费，并处理多条件排序。

### 精选题解

#### 1. 秋雨（4星）
**关键亮点**  
- 结构体存储数据，代码清晰易读。  
- 双重循环暴力计算每个城市的总花费，逻辑直接。  
- 使用排序处理多条件（费用和距离），确保结果正确。  
**代码核心**  
```cpp
struct city { int men, km, lb; string name; };
bool cmp(city a, city b) {
    if (a.lb != b.lb) return a.lb < b.lb;
    return a.km < b.km;
}
// 计算总花费
for (int i = 0; i < tot; i++) {
    a[i].lb = 0;
    for (int j = 0; j < tot; j++) {
        a[i].lb += abs(a[j].km - a[i].km) * a[j].men;
    }
}
sort(a, a + tot, cmp);
```

#### 2. MaoHanKun（4星）
**关键亮点**  
- 按距离排序后利用前缀和优化计算。  
- 分左右两部分计算总花费，时间复杂度优化至O(n²)。  
**代码核心**  
```cpp
sort(s, s + k, cmp); // 按距离排序
for (int i = 0; i < k; i++) {
    // 左侧贡献
    for (int j = 0; j < i; j++) 
        s[i].ans += s[j].n * (s[i].m - s[j].m);
    // 右侧贡献
    for (int j = i + 1; j < k; j++) 
        s[i].ans += s[j].n * (s[j].m - s[i].m);
}
sort(s, s + k, cmp1); // 按总花费和距离排序
```

#### 3. Soyilieber（3星，思路正确但实现需修正）
**关键思路**  
- 带权中位数思想，但需先对城市按距离排序。  
- 累计人数超过半数时确定最优位置。  
**修正建议**  
在代码中加入排序逻辑：  
```cpp
sort(dis, dis + n); // 按距离排序后再计算中位数
```

### 关键技巧总结
1. **暴力法**：直接遍历所有城市计算总花费，适用于小数据（n≤150时可行）。  
2. **排序优化**：按距离排序后，利用前缀和快速计算每个城市的总花费。  
3. **带权中位数**：将问题转化为寻找权值累计过半的位置，需结合排序实现。

### 同类型题目推荐
1. [P1168 中位数](https://www.luogu.com.cn/problem/P1168)  
2. [P2512 糖果传递](https://www.luogu.com.cn/problem/P2512)  
3. [P2870 Best Cow Line](https://www.luogu.com.cn/problem/P2870)  

### 个人心得摘录
- **ArachnidaKing**：比较条件需用`<=`而非`<`，确保相同费用时更新更优解。  
- **loi_hjh**：调试中发现条件判断错误，说明边界条件需谨慎处理。  
- **EDqwq**：数学思路虽高效，但实现时需细致处理边界（如离散点选择）。

---
处理用时：202.25秒
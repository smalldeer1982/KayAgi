# 题目信息

# 扑克牌

## 题目描述

组合数学是数学的重要组成部分，是一门研究离散对象的科学，它主要研究满足一定条件的组态（也称组合模型）的存在、计数以及构造等方面的问题。组合数学的主要内容有组合计数、组合设计、组合矩阵、组合优化等。

随着计算机科学的日益发展，组合数学的重要性也日渐凸显，因为计算机科学的核心内容是使用算法处理离散数据。

今天我们来研究组合数学中的一个有趣的问题，也是一个简单的计数问题：

从一副含有 $n$ 张的扑克牌(每张扑克牌都不相同)中，分给 $m$ 个人，第 $i$ 个人得到 $a_i$ 张牌，求一共有几种分法，这个数可能非常大，请输出此数模 $10007$ 后的结果。

## 说明/提示

对于 $50\%$ 的数据：$a_i=1$。

对于 $100\%$ 的数据：$1 \leq n \leq 10^4$，$1 \leq m \leq 100$，$0 \leq a_i \leq 100$。



## 样例 #1

### 输入

```
5 2
3 1
```

### 输出

```
20
```

## 样例 #2

### 输入

```
20 19
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
```

### 输出

```
8707
```

# AI分析结果



### 综合分析与结论
本题核心在于分步计算组合数的乘积，并处理模运算。各题解主要采用两种思路：杨辉三角预处理组合数（适用于小上限值）、阶乘逆元法（需模数为质数）。关键优化点在于预处理组合数减少重复计算，以及正确处理模运算避免溢出。

---

### 精选题解推荐

#### 1. 作者：什么叫中二呀（★★★★★）
**关键亮点**：  
- 预处理阶乘及逆元表，O(1)查询组合数  
- 利用费马小定理求逆元，数学推导严谨  
- 代码简洁高效，时间复杂度最优  

**核心代码**：  
```cpp
ll C(ll a,ll b){return fac[a]*inf[b]%m*inf[a-b]%m;}
ll p(ll a,ll b){...} // 快速幂求逆元
// 预处理阶乘和逆元
for(int i=1;i<10005;i++)fac[i]=fac[i-1]*i%m,inf[i]=p(fac[i],m-2)%m;
```

---

#### 2. 作者：guobaipeng0（★★★★☆）
**关键亮点**：  
- 杨辉三角递推组合数，直观易懂  
- 二维数组优化空间（10000×100），适应题目约束  
- 边读入边计算，节省内存  

**核心代码**：  
```cpp
for (i=1; i<=10000; i++) // 预处理组合数
    a[i][j] = (a[i-1][j-1] + a[i-1][j]) % 10007;
for (i=1; i<=m; i++) 
    s = s * a[n][t] % 10007; // 分步取模
```

---

#### 3. 作者：白木偶君（★★★★☆）
**关键亮点**：  
- 动态计算剩余牌数，避免额外空间  
- 预处理阶乘逆元，公式推导清晰  
- 采用快速幂优化逆元计算  

**核心代码**：  
```cpp
pre(); // 预处理阶乘逆元
for(int i=1;i<=m;i++) 
    ans = ans*C(a[i],n-sum[i-1])%mod;
```

---

### 关键技巧总结
1. **组合数预处理**：根据场景选择杨辉三角（小k值）或阶乘逆元法（模数质数）  
2. **分步取模**：每步乘法后立即取模，避免数值溢出  
3. **逆元优化**：利用费马小定理快速计算模意义下的除法  
4. **边界处理**：总和判超、剩余牌数动态更新等细节处理  

---

### 举一反三推荐
1. [P3197 越狱](https://www.luogu.com.cn/problem/P3197) - 组合计数与快速幂结合  
2. [P2822 组合数问题](https://www.luogu.com.cn/problem/P2822) - 二维前缀和+组合数预处理  
3. [P1313 计算系数](https://www.luogu.com.cn/problem/P1313) - 组合数+快速幂综合应用  

---

### 题解心得摘录
- **王奕瑜**：特别强调总牌数判超的重要性（第8测试点陷阱）  
- **贵族血统**：调试中发现暴力质因数分解效率不足，转用递推法  
- **梦回还**：提醒注意模运算下的整数除法必须转化为逆元乘法

---
处理用时：71.48秒
# 题目信息

# 全排列问题

## 题目描述

按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。


## 说明/提示

$1 \leq n \leq 9$。

## 样例 #1

### 输入

```
3```

### 输出

```
    1    2    3
    1    3    2
    2    1    3
    2    3    1
    3    1    2
    3    2    1
```

# AI分析结果



### 题解综合分析结论
本题解主要围绕全排列的两种核心思路展开：深度优先搜索（DFS）回溯法和STL的`next_permutation`函数。DFS回溯法是教学重点，适合理解算法本质；STL方法简洁高效，适合实际应用。其他方法如状态压缩、康托展开等展示了不同优化思路，但复杂度较高。

---

### 精选题解

#### 1. 作者：和泉正宗（⭐️⭐️⭐️⭐️⭐️）
**关键亮点**  
- **DFS详细图解**：通过树状图直观展示搜索过程，帮助理解递归层次。
- **回溯与剪枝**：清晰解释标记数组的作用，强调回溯的必要性。
- **代码规范**：变量命名明确，输出格式严格符合要求。

**核心代码**  
```cpp
void dfs(int k) {
    if (k == n) { print(); return; }
    for (int i = 1; i <= n; i++) {
        if (!pd[i]) {
            pd[i] = 1;
            used[k+1] = i;
            dfs(k+1);
            pd[i] = 0;
        }
    }
}
```
**实现思想**：逐层递归填充数字，通过标记数组`pd`避免重复使用，回溯时重置标记。

---

#### 2. 作者：Harry_Potter（⭐️⭐️⭐️⭐️⭐️）
**关键亮点**  
- **代码极简**：仅用20行完成DFS框架，适合快速掌握核心逻辑。
- **输出优化**：使用`printf("%5d")`精准控制场宽，避免格式错误。

**核心代码**  
```cpp
void dfs(int x) {
    if (x > n) { 
        for (int i = 1; i <= n; i++) printf("%5d", ans[i]);
        puts(""); return;
    }
    for (int i = 1; i <= n; i++) {
        if (!use[i]) {
            ans[x] = i; use[i] = 1;
            dfs(x + 1); use[i] = 0;
        }
    }
}
```
**实现思想**：标准回溯模板，用`use`数组标记已选数字，递归边界明确。

---

#### 3. 作者：NeosKnight（⭐️⭐️⭐️⭐️）
**关键亮点**  
- **STL极致简化**：仅10行代码，利用`next_permutation`直接生成排列。
- **逆向初始化**：初始化为升序序列，确保输出顺序正确。

**核心代码**  
```cpp
int x[11] = {0,1,2,3,4,5,6,7,8,9};
int main() {
    scanf("%d", &n);
    do { 
        for (int i = 1; i <= n; i++) printf("%5d", x[i]);
        printf("\n");
    } while (next_permutation(x + 1, x + n + 1));
}
```
**实现思想**：通过`next_permutation`自动生成字典序排列，初始数组按升序排列保证首项正确。

---

### 关键思路总结
1. **递归回溯框架**：DFS + 标记数组是解决排列组合问题的通用模板。
2. **STL高效应用**：`next_permutation`适合快速生成排列，注意初始数组需有序。
3. **输出格式控制**：使用`printf`的场宽控制（如`%5d`）确保格式正确。

---

### 拓展与举一反三
- **同类问题**：子集生成（P1157）、组合数（P1036）、八皇后（P1219）。
- **优化思路**：状态压缩减少空间，康托展开用于哈希映射。
- **调试技巧**：忘记回溯标记是常见错误，可通过输出中间状态排查。

---

### 推荐习题
1. **P1036 选数**：DFS生成组合数并判断素数。
2. **P1219 八皇后**：经典回溯问题，练习二维标记。
3. **P1707 全排列问题（加强版）**：需处理重复元素的排列。

---
处理用时：111.26秒
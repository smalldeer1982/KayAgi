# 题目信息

# 添加括号III

## 题目描述

现在给出一个表达式，形如 $a_{1}/a_{2}/a_{3}/.../a_{n}$。

如果直接计算，就是一个个除过去，比如 $1/2/1/4 = 1/8$。

然而小$\text{A}$看到一个分数感觉很不舒服，希望通过添加一些括号使其变成一个整数。一种可行的办法是 $(1/2)/(1/4)=2$ 。

现在给出这个表达式，求问是否可以通过添加一些括号改变运算顺序使其成为一个整数。

## 说明/提示

- 对于 $40\%$ 的数据，$n \le 16$。
- 对于 $70\%$ 的数据，$n \le 100$。
- 对于 $100\%$ 的数据， $2 \le n \le 10000$，$1 \le t \le 100$，$1 \le a_{i}\le 2^{31}-1$。

## 样例 #1

### 输入

```
2
4
1 2 1 4
5
6 5 7 9 12```

### 输出

```
Yes
No```

# AI分析结果



### 综合分析与结论

所有题解的核心思路均基于**分母约分法**：通过构造最优表达式形式，使得分母仅为a₂，其他数均为分子。通过不断约分a₂与其他数的最大公约数，最终判断a₂能否被约至1。该算法时间复杂度为O(n)，无需处理大数问题，效率极高。

---

### 高星题解推荐

#### 1. 作者：kkksc03 (⭐⭐⭐⭐⭐)
**关键亮点**：
- 最早提出核心思路，解释清晰易懂，数学推导简明。
- 强调无需高精度，通过逐次约分即可解决问题。
- 代码逻辑高效，适合处理大数据量（n≤1e4）。

**个人心得**：
> "a₂每乘一个数b，因子加上(b包含的所有因子)...约分后a₂能变为1则为整数。"

#### 2. 作者：Porsche (⭐⭐⭐⭐)
**关键亮点**：
- 使用STL的`__gcd`函数，代码简洁高效。
- 输入处理与约分同步完成，节省内存空间。
- 代码可读性强，适合快速实现。

**核心代码**：
```cpp
cin >> n >> a[1] >> a[2];
a[2] /= __gcd(a[1], a[2]);
for (int i = 3; i <= n; i++) {
    cin >> a[i];
    a[2] /= __gcd(a[2], a[i]);
}
```

#### 3. 作者：Plozia (⭐⭐⭐⭐)
**关键亮点**：
- 详细数学证明：a₂必须为分母，其他数可全为分子。
- 提供严谨的公式推导，加深对问题本质的理解。
- 代码规范，变量命名清晰，带注释说明。

**核心代码**：
```cpp
for (int i = 1; i <= n; i++) {
    if (i == 2) continue;
    a[2] = a[2] / gcd(a[2], a[i]);
}
```

---

### 最优思路与技巧总结
**关键技巧**：
1. **分母唯一性**：通过括号构造使分母仅含a₂，其他数均为分子。
2. **逐次约分**：遍历所有数（除a₂外），每次将a₂除以它与当前数的gcd，逐步缩小分母。
3. **避免溢出**：约分过程中直接操作a₂的值，无需计算总乘积，避免大数问题。

**拓展应用**：
- 类似问题可考虑构造最优分式形式，通过约分判断整除性。
- 适用于涉及分数化简、表达式变换的数论题，如最大公约数、质因数分解等场景。

---

### 推荐相似题目
1. **P1075 [NOIP2012 普及组] 质因数分解**  
   （数论基础，分解质因数应用）
2. **P1061 [NOI 1999] 最大公约数和最小公倍数问题**  
   （gcd/lcm与约分技巧）
3. **P2447 [SDOI2010] 外星千足虫**  
   （表达式变换与模运算应用）

---
处理用时：54.59秒
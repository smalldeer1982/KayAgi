# 题目信息

# 高兴的津津

## 题目描述

津津上高中了。她在自己的妈妈的魔鬼训练下，成为了一个神犇，每次参加一次 OI 比赛必拿 Au 虐全场。每次她拿到一个 Au 后就很高兴。假设津津不会因为其它事高兴，并且她的高兴会持续 $T$ 天（包含获奖当天。就算在高兴的时候再次拿到 Au，他的高兴也只能维持包括这次拿奖之日起 $T$ 天，而不是额外增加 $T$ 天的高兴时间，除非之后再拿奖）。请你帮忙检查一下津津接下来的的日程安排，要参加 $n$ 场比赛，看看接下来的几天，津津会累计开心多久？

## 说明/提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证：

- $1\le n\le2\times10^5$。
- $1\le T\le10^9$。
- $1\le t_i\le 10^9$，$t_i$ 单调递增。

## 样例 #1

### 输入

```
3 5
1 2 10```

### 输出

```
11```

# AI分析结果



### 综合分析与结论
题目核心是计算多个重叠时间段的总天数。所有题解均采用 **相邻时间点间隔比较** 的核心思路：  
1. 遍历相邻比赛时间差 `Δ`，若 `Δ < T` 则累加 `Δ`（重叠部分），否则累加 `T`  
2. 最后补上最后一次获奖的完整 `T` 天  
时间复杂度均为 O(n)，空间复杂度可优化至 O(1)。关键优化点在于无需存储全部时间点，逐个处理即可。

---

### 高星题解推荐

#### 1. zy小可爱ღ (★★★★★)
**关键亮点**  
- 代码简洁清晰，直接在线处理输入  
- 逻辑简明：相邻间隔判断 + 最后补 T  
- 充分信任输入有序性，无需额外处理  
**核心代码**  
```cpp
for(int i=2;i<=n;i++) {
    if(a[i]-a[i-1]<t) ans += a[i]-a[i-1];
    else ans += t;
}
printf("%d\n",ans + t); // 补最后一次T
```

#### 2. _ZZH (★★★★☆)
**关键亮点**  
- 空间优化至 O(1)，逐个处理时间点  
- 使用单变量记录前值，适合大数据场景  
**核心代码**  
```cpp
long long ans=0, before;
for(int i=1;i<=n;i++) {
    int x; scanf("%d",&x);
    if(i>1) {
        if(x-before <=t) ans += x-before;
        else ans += t;
    }
    before = x;
}
cout<<ans + t;
```

#### 3. Scarlet_Hypoc (★★★★☆)
**模拟区间合并思路**  
- 动态维护高兴时段的结束时间 `j`  
- 通过比较当前时间与 `j` 判断是否重叠  
**代码亮点**  
```cpp
int j = x + t - 1; // 当前高兴结束时间
if(x > j) { // 不重叠
    ans += t;
    j = x + t - 1;
} else { // 重叠部分
    ans += (x + t -1) - j;
    j = x + t -1;
}
```

---

### 关键思路与技巧总结
1. **相邻间隔分析法**：通过比较相邻事件的间隔与持续时间，直接计算有效天数，避免复杂的时间段合并  
2. **空间优化**：无需存储全部时间点，逐个处理即可降低空间复杂度  
3. **边界处理**：最后一次事件必定贡献完整 T 天，需在循环外单独处理  

---

### 拓展与同类题目
**类似问题类型**  
- 区间合并问题（如计算多个区间的总覆盖长度）  
- 资源占用时间统计（如会议室预订、任务调度）  

**推荐题目**  
1. [P1803 线段覆盖](https://www.luogu.com.cn/problem/P1803) - 区间调度与选择  
2. [P1514 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心策略应用  
3. [P2285 打鼹鼠](https://www.luogu.com.cn/problem/P2285) - 时间序列动态规划  

---

### 题解心得摘录
- **CandyCandyFruit**：  
  > "一开始用双重循环暴力导致 TLE，后来发现只需线性处理相邻间隔，提醒算法选择需结合数据规模"  
- **Scarlet_Hypoc**：  
  > "纯模拟区间合并，动态维护结束时间，避免复杂计算"  
- **米奇奇米**：  
  > "通过总假设天数减去重叠部分，逆向思维简化计算"  

这些经验强调：分析问题本质、选择合适数据结构、避免无效计算的重要性。

---
处理用时：55.23秒
# 题目信息

# [MtOI2019] 永夜的报应

## 题目背景

在这世上有一乡一林一竹亭，也有一主一仆一仇敌。

有人曾经想拍下他们的身影，却被可爱的兔子迷惑了心神。

那些迷途中的人啊，终究会消失在不灭的永夜中……  

## 题目描述

蓬莱山 辉夜(Kaguya)手里有一堆数字。

辉夜手里有 $n$ 个非负整数 $a_1,a_2\cdots a_n$，由于辉夜去打 Gal Game 去了，她希望智慧的你来帮忙。  

* 你需要将这些数分成若干组，满足 $n$ 个数中的每一个数都恰好被分到了一个组中，且每一组至少包含一个数。  

定义一组数的权值为该组内所有数的**异或和**。请求出一种分组方案，使得分出的所有组数的权值之和最小，输出权值之和的最小值。

## 说明/提示

**样例 $1$ 解释：**

一种最优的分组方案如下：

- 将第 $1$ 个数和第 $3$ 个数分为一组，该组的权值为 $1\oplus 5 = 4$；
- 将第 $2$ 个数分为一组，该组的权值为 $2$。

该分组方案的所有组的权值之和为 $4 + 2 = 6$，可以证明，不存在权值之和更小的分组方案。

**样例 $2$ 解释：**

一种最优的分组方案如下：

- 将第 $1$ 个数和第 $5$ 个数分为一组，该组的权值为 $9\oplus 9 = 0$；
- 将第 $2$ 个数和第 $4$ 个数分为一组，该组的权值为 $18\oplus 25 = 11$；
- 将第 $3$ 个数和第 $6$ 个数分为一组，该组的权值为 $36\oplus 32 = 4$。

该分组方案的所有组的权值之和为 $0 + 11 + 4 = 15$。可以证明，不存在权值之和更小的分组方案。

### 子任务

- 对于 $80\%$ 的数据，满足 $n\leq 15$。
- 对于 $100\%$ 的数据，满足 $n\leq 10^6,a_i \leq 10^9$。

### 题目来源

[迷途之家2019联赛](https://www.luogu.org/contest/20135)(MtOI2019) T1

出题人：disangan233



## 样例 #1

### 输入

```
3
1 2 5```

### 输出

```
6```

## 样例 #2

### 输入

```
6
9 18 36 25 9 32
```

### 输出

```
15```

# AI分析结果



### 综合分析与结论
题目要求将n个非负整数分组，使得各组异或和的总和最小。所有题解均指出：**将全体数异或求和即为答案**。核心原理是异或运算的不进位性质（a^b ≤ a+b），任何分组的异或和总和不会小于全体异或的结果。最优分组方案为将全部数归为一组。

---

### 高评分题解亮点
1. **⑨baka (5星)**  
   **亮点**：从二进制逐位分析异或与加法的差异，严谨证明a^b ≤ a+b的必然性。指出分组越少异或越多总和越小。  
   **代码**：直接异或所有输入，O(n)时间。
   ```cpp
   int main() {
       int n; long long ans=0;
       scanf("%d",&n);
       for(int i=1;i<=n;++i) {
           long long x; scanf("%lld",&x);
           ans = ans xor x;
       }
       printf("%lld",ans);
   }
   ```

2. **disangan233 (出题人) (5星)**  
   **亮点**：官方题解，数学严谨性高。从每位奇偶性出发，证明每位贡献下界为异或和对应位。  
   **代码**：简洁高效，逐位异或。
   ```cpp
   int main() {
       int n, ans = 0;
       while(n--) ans ^= read();
       write(ans,'\n');
   }
   ```

3. **角边边证全等 (4星)**  
   **亮点**：简明扼要，直接指出关键不等式。代码极简，适合快速理解。  
   **代码**：逐元素异或，无冗余操作。
   ```cpp
   int main() {
       int n, a, ans;
       scanf("%d%d", &n, &ans);
       for(int i=2; i<=n; i++) {
           scanf("%d", &a);
           ans ^= a;
       }
       cout << ans;
   }
   ```

---

### 关键思路总结
**核心技巧**：利用异或运算的不进位性质，整体异或和即为最小总和。  
**思维模式**：当分组策略难以直接构造时，寻找数学性质（如位运算特性）推导最优解。  
**优化点**：O(n)时间复杂度，无需复杂数据结构，直接逐元素异或。

---

### 拓展与举一反三
1. **类似题目套路**  
   - 利用异或性质求唯一出现奇数次的数（洛谷P1469）。
   - 位运算贪心，如按位分组求极值（Codeforces 1516B）。

2. **推荐练习题**  
   - [P1469 找筷子](https://www.luogu.com.cn/problem/P1469)（异或性质）
   - [P6102 [EER2] 谔运算](https://www.luogu.com.cn/problem/P6102)（位运算分析）
   - [P2114 [NOI2014] 起床困难综合症](https://www.luogu.com.cn/problem/P2114)（位运算贪心）

---

### 题解中的个人心得
- **sishuinianhua**：暴力时偶然发现正确解法，强调实践验证的重要性。  
- **HohleFeuerwerke**：初期尝试贪心失败，提醒需深入数学分析而非直觉分组。  
- **My_666**：通过二进制观察奇偶性，启示从位级角度切入复杂问题。

---
处理用时：53.00秒
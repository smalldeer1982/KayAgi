# 题目信息

# 「ACOI2020」音速

## 题目背景

![T1](https://s2.ax1x.com/2020/01/12/loSQJI.png)

防卫省的 乌间 惟臣（Tadaomi Karasuma）老师来到了椚丘中學给予了三年 E 班的同学们重大的任务：在一年内暗杀掉一个超生物（被 茅野 カエデ 取名为杀老师）。于是同学们开始努力地训练。但是很快的，杀老师展现了它的本领，可以以 20 马赫的超高速持久飞行，导致同学们根本碰不到杀老师。于是他们准备找乌间购买一个传送器。

## 题目描述

现在同学们在后山埋伏。同学们对后山足够熟悉，并且后山足够宽广，可以看做一个无限大的平面直角坐标系，而同学们在 $(0,0)$ 这个位置。这时候杀老师在 $(x,y)$ 这个位置捡到了 岡島 大河 所放置的小黄书认真地读了起来。同学们现在可以以自己为圆心，$r$ 为半径画一个圆然后把传送器抛出去，落在圆上一点 $S$，传送器可以在落点处作一条与刚才的圆相切的直线 $PQ$，现在这条直线就是我们的传送器了。

传送器的作用是：把同学们传送到他们所站的点关于 $PQ$ 的对称点。而且他们必须要**传送后移动**到杀老师的位置才能攻击它。现在，乌间看了他们的计划之后十分感叹，但是他有两个问题想问同学：

- 他们用了传送器之后，至少需要移动多远？

- 在保证移动距离最短的方案下，$PQ$ 与 $x$ 轴夹角的 $\tan$ 值为多少？我们认为夹角在 $[0,180]$ ° 。

## 说明/提示

#### 数据范围 

**本题采用捆绑测试**。

- Subtask 1（10 points）：$x,y,r$ 满足 $x^2+y^2=r^2$。     
- Subtask 2（20 points）：$x,y$ 中至少有一个为 $0$。     
- Subtask 3（70 points）：数据无特殊限制。    

对于 $100\%$ 的数据， $0 \leq |x|,|y|,r \leq 10^{10}$。

---
####  提示

1. **本题含有 SPJ**，如果第一个问题的答案与标准答案差的绝对值不大于 $10^{-6}$ 时就能获得该测试点的分数的 $50\%$。当第一个问题的答案正确时：      
- 若第二个问题的答案不为 ```Error``` 时，当输出答案与标准答案差的绝对值不大于 $10^{-2}$ 时能得到该测试点的所有分数；
- 当第二个问题的答案为 ```Error``` 时，只有输出 ```Error``` 才能得到该测试点的所有分数。  
**因为 SPJ 敏感，如果只能回答第一个问题，也请在第二行随意输出一些值，不要输出 `Error`**。

2. $\tan$ 值表示在一个 **直角三角形** 中，一个角相对的直角边与其相邻的直角边的比值，比如 $\tan\ 45°= 1$。特殊地，$90°$ 的 $\tan$ 值**无意义**。

3. 和圆只有一个公共交点的直线叫做圆的**切线**，连接切点与圆心的半径**垂直**于切线。

## 样例 #1

### 输入

```
11 0
5
```

### 输出

```
1.000000
Error```

## 样例 #2

### 输入

```
6 8
4
```

### 输出

```
2.000000
0.75```

# AI分析结果



### 综合分析与结论
该题核心为几何最优化问题，关键点在于确定传送后的对称点位置及切线方向。各题解均围绕两点间直线最短原理展开，得出最短距离为 $\text{dis}(O,S) - 2r$ 的绝对值。第二问通过几何相似性推导 $\tan \theta = |x/y|$，并处理了除零异常及原点特例。

---

### 精选题解（评分≥4星）

#### 1. Rubidium_Chloride（★★★★★）
**关键亮点**  
- 完整数学证明传送方向最优性，覆盖圆内、外两种场景。  
- 详细讨论 $\tan$ 值的推导及特殊边界处理（如原点、除零）。  
- 代码清晰，特判逻辑严谨。

**核心代码**  
```cpp
cout<<fixed<<setprecision(6)<<dis<<endl;
if(y==0&&x==0) cout<<"0.00"<<endl;
else if(y==0) cout<<"Error"<<endl;
else cout<<abs(x/y)<<endl;
```

#### 2. Azazеl（★★★★☆）  
**关键亮点**  
- 结合几何画板图示直观展示对称点与圆的关系。  
- 通过相似三角形严格推导 $\tan$ 值公式。  
- 强调坐标取绝对值处理负值问题。

**核心代码**  
```cpp
ld ans=Fabs(2*r-dis(x,y));
if(y==0&&x!=0) printf("Error");
else if(x==0) printf("0.00");
else printf("%.2Lf",x/y);
```

#### 3. Reanap（★★★★☆）  
**关键亮点**  
- 代码简洁高效，直接调用数学函数处理。  
- 明确特判原点情况，避免逻辑漏洞。  
- 输出格式化规范，符合题意精度要求。

**核心代码**  
```cpp
printf("%.6lf\n",abs(sqrt(x*x+y*y)-r*2));
if(x==0&&y==0) printf("0.00\n"); 
else if(y==0) printf("Error\n");
else printf("%.2lf\n",abs(x)/abs(y));
```

---

### 最优思路总结
1. **最短距离**：计算原点与目标点的欧式距离 $d = \sqrt{x^2 + y^2}$，最终距离为 $|d - 2r|$。  
2. **$\tan$ 值处理**：直接取 $|x/y|$，特判 $y=0$ 时输出 `Error`，原点时输出 `0.00`。  
3. **几何优化**：利用对称性将问题转化为同心圆上的最短路径问题。

---

### 相似题目推荐
1. **P1355 射箭**（几何解析与直线方程应用）  
2. **P1663 山**（切线方程与极值优化）  
3. **P1516 青蛙的约会**（扩展欧几里得解线性同余方程，含距离与周期处理）  

---

### 调试心得摘录
- **原点特例**：当 $(x,y)=(0,0)$ 时，任意方向均合法，但 $\tan$ 应输出最小值 `0.00`（Rubidium_Chloride）。  
- **除零陷阱**：部分题解未考虑输入坐标为负数的情况，需取绝对值（Azazеl）。  
- **浮点精度**：输出需强制保留六位小数，避免科学计数法（Reanap）。

---
处理用时：54.73秒
# 题目信息

# 「PMOI-1」立方骑士

## 题目背景

lhm 最近迷上了国际象棋，他对里面的骑士最感兴趣，于是就开辟了下面这个玩法。

## 题目描述

lhm 现在建立了一个大小为 $n \times m$ 的国际象棋棋盘，你作为白方要与黑方作战。棋盘上黑方只有一个国王，**国王位置不会移动**，而 lhm 有无穷无尽的骑士。现在你需要解出，最少派出几个骑士才能将死黑方国王，定义将死的标准为**黑方国王在不被吃掉的情况下不能移动为止**。

更形式化地讲：一个 $n\times m$ 的棋盘上有一个国王，你需要摆放尽可能少的骑士在棋盘上，使得对于每一个国王能走**正好一步**达到的且不在棋盘外的位置，都存在至少一个骑士能走**正好一步**达到。

棋子的移动方法：

国王每一步能向上、下、左、右、左上、右上、左下、右下八个方向移动一格。

骑士与国际象棋规则相同，每次可以走日字（即 $2\times3$ 长方形的对角线，详见样例）。**注意没有蹩马腿规则，也就是只要不走出棋盘且按照日字格行走，其他没有限制。**

lhm 太菜了，只好请聪明的你来帮他完成这个任务。

## 说明/提示

【样例1解释】

![](https://cdn.luogu.com.cn/upload/image_hosting/c5d055nl.png)

一个类似上图的棋盘，$\text{K}$ 表示黑方国王，$\text{N}$ 表示白方骑士，$\color{red}{\times}$ 表示骑士可以到达的地方（其中 $(3,3)$ 的 $\text{N}$ 封住了 $(1,2)$ 和 $(2,1)$，$(1,4)$ 的 $\text{N}$ 封住了 $(2,2)$
，形如上图，$\text{K}$ 已经被封死了，所以两个骑士足矣。可以证明两个骑士是最小个数。

【数据范围】

- 对于 $30\%$ 的数据，保证国王的初始位置一定在棋盘最外面一圈。

- 对于 $100\%$ 的数据满足，$1 \leq t \leq 10$，$1 \leq x,y \leq 10^9$，$8 \leq n,m \leq 10^9$。

## 样例 #1

### 输入

```
1
8 8 1 1```

### 输出

```
2```

## 样例 #2

### 输入

```
2
10 9 1 9
999 999 999 2```

### 输出

```
2
3```

# AI分析结果



### 综合分析与结论
本题需在棋盘上放置最少骑士，封锁国王的所有移动方向。关键在于国王位置分为角落、边缘、中间三种情况，分别需2、3、4个骑士。最优解通过分类讨论或公式计算（骑士数=4-相邻边数）实现。

---

### 高星题解推荐

#### 1. 樱雪喵（5星）
**关键亮点**：  
- 清晰的分类讨论，通过图示直观展示封锁策略。  
- 代码简洁高效，直接判断位置类型输出结果。  
- 正确覆盖所有数据范围，时间复杂度O(1)。  

**核心代码**：  
```cpp
if((x==1&&y==1)||...||(x==m&&y==1)) cout<<"2"; // 角落
else if(x==1||x==m||y==1||y==n) cout<<"3";    // 边缘
else cout<<"4";                                // 中间
```

#### 2. 添哥（4星）
**关键亮点**：  
- 创新公式`骑士数=4-相邻边数`，简化判断逻辑。  
- 代码极度简洁，高效处理边界条件。  

**核心代码**：  
```cpp
ans = 4;
if(x==1 || x==n) ans--; // 横向边界
if(y==1 || y==m) ans--; // 纵向边界
cout << ans;
```

#### 3. Lithium_Chestnut（4星）
**关键亮点**：  
- 详细推导规律，结合图示解释封锁逻辑。  
- 代码清晰易懂，手动计算`stp`增强可读性。  

**核心代码**：  
```cpp
if(在角落) cout<<2; 
else if(在边缘) cout<<3; 
else cout<<4;
```

---

### 关键思路总结
1. **分类讨论**：国王位置分为角落、边缘、中间，分别对应2、3、4个骑士。  
2. **公式优化**：利用`骑士数=4-相邻边数`快速计算，无需枚举周围格子。  
3. **数学归纳**：通过观察国王移动范围与骑士覆盖的对称性，直接得出最优解。  

---

### 相似题目推荐
1. **P1219 八皇后**（模拟棋盘覆盖）  
2. **P1433 覆盖墙壁**（几何覆盖问题）  
3. **P3956 棋盘**（路径规划与最优策略）  

---

### 题解个人心得摘录
- **樱雪喵**：通过分情况画图，直观展示封锁策略，强调规律总结的重要性。  
- **添哥**：提出公式时发现边界条件处理可简化代码，体现数学思维的优势。  
- **Lithium_Chestnut**：调试中发现国王无法攻击骑士的原因，强调题目条件细节。  

**总结**：图形化分析帮助理解复杂移动规则，数学归纳法简化代码实现，注意题目中棋子移动的特殊规则（如无蹩马腿）。

---
处理用时：118.15秒
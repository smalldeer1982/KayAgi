# 题目信息

# [CSP-J 2021] 分糖果

## 题目背景

红太阳幼儿园的小朋友们开始分糖果啦！

## 题目描述

红太阳幼儿园有 $n$ 个小朋友，你是其中之一。保证 $n \ge 2$。

有一天你在幼儿园的后花园里发现无穷多颗糖果，你打算拿一些糖果回去分给幼儿园的小朋友们。

由于你只是个平平无奇的幼儿园小朋友，所以你的体力有限，至多只能拿 $R$ 块糖回去。

但是拿的太少不够分的，所以你至少要拿 $L$ 块糖回去。保证 $n \le L \le R$。

也就是说，如果你拿了 $k$ 块糖，那么你需要保证 $L \le k \le R$。

如果你拿了 $k$ 块糖，你将把这 $k$ 块糖放到篮子里，并要求大家按照如下方案分糖果：只要篮子里有**不少于** $n$ 块糖果，幼儿园的所有 $n$ 个小朋友（包括你自己）都从篮子中拿走**恰好**一块糖，直到篮子里的糖数量**少于** $n$ 块。此时篮子里剩余的糖果均归你所有——这些糖果是**作为你搬糖果的奖励**。

作为幼儿园高质量小朋友，你希望让**作为你搬糖果的奖励**的糖果数量（**而不是你最后获得的总糖果数量**！）尽可能多；因此你需要写一个程序，依次输入 $n, L, R$，并输出你最多能获得多少**作为你搬糖果的奖励**的糖果数量。

## 说明/提示

**【样例解释 #1】**

拿 $k = 20$ 块糖放入篮子里。

篮子里现在糖果数 $20 \ge n = 7$，因此所有小朋友获得一块糖；

篮子里现在糖果数变成 $13 \ge n = 7$，因此所有小朋友获得一块糖；

篮子里现在糖果数变成 $6 < n = 7$，因此这 $6$ 块糖是**作为你搬糖果的奖励**。

容易发现，你获得的**作为你搬糖果的奖励**的糖果数量不可能超过 $6$ 块（不然，篮子里的糖果数量最后仍然不少于 $n$，需要继续每个小朋友拿一块），因此答案是 $6$。

**【样例解释 #2】**

容易发现，当你拿的糖数量 $k$ 满足 $14 = L \le k \le R = 18$ 时，所有小朋友获得一块糖后，剩下的 $k - 10$ 块糖总是**作为你搬糖果的奖励**的糖果数量，因此拿 $k = 18$ 块是最优解，答案是 $8$。

**【数据范围】**

| 测试点 | $n \le$ | $R \le$ | $R - L \le$ |
|:-:|:-:|:-:|:-:|
| $1$ | $2$ | $5$ | $5$ |
| $2$ | $5$ | $10$ | $10$ |
| $3$ | ${10}^3$ | ${10}^3$ | ${10}^3$ |
| $4$ | ${10}^5$ | ${10}^5$ | ${10}^5$ |
| $5$ | ${10}^3$ | ${10}^9$ | $0$ |
| $6$ | ${10}^3$ | ${10}^9$ | ${10}^3$ |
| $7$ | ${10}^5$ | ${10}^9$ | ${10}^5$ |
| $8$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |
| $9$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |
| $10$ | ${10}^9$ | ${10}^9$ | ${10}^9$ |

对于所有数据，保证 $2 \le n \le L \le R \le {10}^9$。

【感谢 hack 数据提供】  
[wangbinfeng](/user/387009)

## 样例 #1

### 输入

```
7 16 23
```

### 输出

```
6
```

## 样例 #2

### 输入

```
10 14 18
```

### 输出

```
8
```

## 样例 #3

### 输入

```
见附件中的 candy/candy3.in。```

### 输出

```
见附件中的 candy/candy3.ans。```

# AI分析结果



### 综合分析与结论
题目核心是求区间 $[L, R]$ 中 $k \bmod n$ 的最大值。关键思路在于判断区间是否跨过 $n$ 的整数倍边界：
1. 若 $L$ 和 $R$ 处于同一 $n$ 区间块（即 $\lfloor L/n \rfloor = \lfloor R/n \rfloor$），最大余数为 $R \bmod n$。
2. 若跨过区间块（即 $\lfloor L/n \rfloor < \lfloor R/n \rfloor$），则存在 $k = m \cdot n - 1$，余数为 $n-1$。

### 高星题解推荐
#### 题解1：滑_稽（5星）
**关键亮点**：思路清晰，代码极简。直接通过 $\lfloor L/n \rfloor$ 与 $\lfloor R/n \rfloor$ 是否相等判断区间是否跨块。
```cpp
if (l/n == r/n) cout << r%n;
else cout << n-1;
```
**个人心得**：作者提到考场上快速推导出结论，体现数学建模能力。

#### 题解2：_caiji_（4星）
**关键亮点**：图文结合，数轴分块直观。通过数轴展示余数分布规律，强化理解。
```cpp
if (l/n != r/n) printf("%lld\n", n-1);
else printf("%lld\n", r%n);
```
**代码特色**：使用 `long long` 避免溢出，通用性更强。

#### 题解3：Lethifold（4星）
**关键亮点**：分类讨论详尽，覆盖所有边界情况。提出区间长度与余数关系的分析。
```cpp
if (R-L+1 >= n) printf("%d\n", n-1);
else if (L%n <= R%n) printf("%d\n", R%n);
else printf("%d\n", n-1);
```
**调试经验**：最初误用二分，后通过数学分析简化，体现解题思维转变。

---

### 核心思路总结
**关键技巧**：利用整数除法判断区间块的跨越情况，避免遍历。时间复杂度 $O(1)$，空间复杂度 $O(1)$。
**代码核心**：
```cpp
int main() {
    int n, L, R;
    cin >> n >> L >> R;
    if (L / n == R / n) cout << R % n;
    else cout << n - 1;
}
```

### 拓展练习
1. **P1226 【模板】快速幂**（模运算性质）
2. **P1082 同余方程**（扩展欧几里得）
3. **P2424 约数和**（区间贡献问题）

### 心得摘录
> "考场上误以为要二分，后来发现只需分支结构" —— 体现从复杂到简化的思维跃迁。  
> "数轴分块法让余数规律一目了然" —— 可视化分析是解决数学问题的利器。  
> "注意 $n \le L \le R$ 的隐含条件，避免重复判断" —— 边界条件需结合题目保证简化逻辑。

---
处理用时：135.41秒
# 题目信息

# 不死「火鸟　−凤翼天翔−」

## 题目背景

拥有了「不死」的能力的藤原妹红，同时获得了操纵火焰的力量，是不死鸟的化身。

不死鸟，和凤凰是同一种生物吗？

## 题目描述

妹红可以操纵火鸟。火鸟可以看作在边长**无限大**的棋盘上放置着的一枚棋子 $A$，$A$ 位于 $(x_1,y_1)$ 处。$A$ 以如下规则移动：

- 在奇数次移动时，$A$ 只能向右上或者左下移动一格，如下图红色箭头；
- 在偶数次移动时，$A$ 只能向右下或者左上移动一格，如下图蓝色箭头。

![](https://cdn.luogu.com.cn/upload/image_hosting/rk4bjeya.png)

由于棋盘无限大，因此 $x,y$ 的取值可以为负数。

每一步行动时 $A$ 不能待在原地不移动。现在需要把 $A$ 移动到坐标为 $(x_2,y_2)$ 的 $B$ 位置，最少要多少步？特别地，若不存在这样的方案，输出 $-1$。

如下图所示是 $A=(2,7)$，$B=(5,2)$ 的情况。一种移动次数最小的方案已在图上标出，需要 $9$ 步。红色线段表示奇数次的移动，蓝色线段表示偶数次的移动。

![](https://cdn.luogu.com.cn/upload/image_hosting/mzwrv7q0.png)

## 说明/提示

### 数据范围及约定

对于全部数据，保证 $0\le x_1,y_1,x_2,y_2\le 10^9$。

## 样例 #1

### 输入

```
2 7 5 2```

### 输出

```
9```

## 样例 #2

### 输入

```
2 2 3 2```

### 输出

```
-1
```

## 样例 #3

### 输入

```
0 0 1000000000 1000000000
```

### 输出

```
2000000000```

# AI分析结果



### 综合分析与结论
本题关键在于火鸟移动的奇偶步方向限制及坐标奇偶性判断。正确解法需确保起点与终点的行列和奇偶性一致，并根据坐标差的奇偶性分情况处理：同为偶数时直接计算曼哈顿距离，同为奇数时需额外调整一步。

### 所选高分题解
#### 题解作者：Night_sea_64（⭐⭐⭐⭐）
**关键亮点**：  
1. 利用行列和奇偶性判断可达性，快速排除无解情况。  
2. 将两步视为移动周期，通过曼哈顿距离分奇偶处理，简化计算。  
3. 对奇偶差情况采用邻近点调整策略，确保最优解。

**核心代码**：  
```cpp
if ((a + b) % 2 != (c + d) % 2) {
    cout << -1 << endl;
} else if (abs(a - c) % 2 == 0) {
    cout << abs(a - c) + abs(b - d) << endl;
} else {
    int opt1 = abs(a - (c + 1)) + abs(b - (d + 1)) + 1;
    int opt2 = abs(a - (c - 1)) + abs(b - (d - 1)) + 1;
    cout << min(opt1, opt2) << endl;
}
```
**实现思想**：  
1. 判断行列和奇偶性，不同则直接无解。  
2. 坐标差同为偶数时，曼哈顿距离即为步数。  
3. 同为奇数时，计算两种邻近点调整方案，取最小步数加1。

### 最优思路总结
1. **奇偶性剪枝**：通过行列和奇偶性快速排除不可达情况。  
2. **曼哈顿距离分治**：根据坐标差的奇偶性分两类处理，避免复杂路径模拟。  
3. **邻近点调整**：对奇差情况，构造一步可达的邻近点，转化为偶差问题。

### 拓展与举一反三
类似问题常通过坐标奇偶性剪枝和曼哈顿距离分治解决，例如国际象棋中的骑士移动、网格图中的受限路径等。重点在于发现移动规则中的周期性或对称性，转化为数学条件判断。

### 推荐相似题目
1. **P1217 棋盘覆盖**（利用奇偶性判断覆盖可行性）  
2. **P1378 骑士的移动**（国际象棋骑士步数计算，奇偶性应用）  
3. **P3958 跳石头**（曼哈顿距离与路径规划结合）

---
处理用时：375.78秒
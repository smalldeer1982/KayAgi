# 题目信息

# 『GROI-R2』 紫水晶

## 题目描述

爱丽丝不曾忘记过她曾经存在于纸牌的世界。

于是魔法让她的手里出现了一些牌，同时魔法也让坦尼尔手里出现了一些牌，而且每张牌上都写着一个正整数——尽管他们如今所处的，是玻璃王国的世界中。

牌张很快一消而散，而他们也准备启程。爱丽丝只记住了每相邻两张牌的**最大公约数之和**，坦尼尔只记住了每相邻两张牌的**最小公倍数之和**。

你还在这个宫殿里，你想重现当时的牌张。

**形式化题面**

给定 $q$ 次询问，每次询问为以下两种之一：

- ``1 n x`` 表示要求输出一长度为 $n$ 的**正整数**序列 $\{a_n\}$，使得 $\sum\limits_{i=1}^{n-1} \gcd(a_i,a_{i+1})=x$。

- ``2 n x`` 表示要求输出一长度为 $n$ 的**正整数**序列 $\{a_n\}$，使得 $\sum\limits_{i=1}^{n-1} \operatorname{lcm}(a_i,a_{i+1})=x$。

且对于任意输出的 $a_i$ 不应超出 C++ 语言中 ``int`` 的存储范围。

其中 $\gcd$ 和 $\operatorname{lcm}$ 分别为最大公约数和最小公倍数，如有多解，输出任意一个即可。如果无解，输出 ``-1``。

## 说明/提示

**数据范围**

**本题采用捆绑测试**。

| $\text{Subtask}$ | $\sum n\le$ | $x\le$ | 特殊性质 | 分值 |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $1$ | $5$ | $10$ | | $10$ |
| $2$ | $50$ | $200$ | | $20$ |
| $3$ | $5\times 10^5$ | $2^{31}-1$ | $\text{A}$ | $15$ |
| $4$ | $5\times 10^5$ | $2^{31}-1$ | $\text{B}$ | $15$ |
| $5$ | $5\times 10^5$ | $2^{31}-1$ | | $40$ |

特殊性质 $\text{A}$：保证对于任意询问满足 $op=1$。

特殊性质 $\text{B}$：保证对于任意询问满足 $op=2$。

对于 $100\%$ 的数据满足 $2\le n\le 5\times 10^5$，$2\le \sum n\le 5\times 10^5$，$1\le x \le 2^{31}-1$，$op\in\{1,2\}$。


## 样例 #1

### 输入

```
5
1 5 4
2 3 8
1 5 10
2 6 34
1 3 1```

### 输出

```
1 1 1 1 1
2 2 3
1 1 1 7 7
1 1 4 5 1 4
-1```

# AI分析结果



### 综合分析与结论
本题考察构造思维，核心思路是利用1的特殊性质（与任何数的gcd为1，lcm为原数）简化构造。所有可行题解均采用前导1+尾数调整的策略，通过数学推导确定尾数值。关键难点在于边界处理（x≥n-1）及构造方式的正确性证明。

---

### 精选题解与评分

#### 1. _O_v_O_ 的题解（★★★★★）
**关键亮点**：  
- 提供严格的数学证明，验证构造的正确性。  
- 代码简洁，边界处理清晰（直接判断x≥n-1）。  
- 使用`ios::sync_with_stdio`优化输入输出，适合大规模数据。  

**核心代码**：
```cpp
if(op==1){
    for(int i=1;i<n-1;i++) cout<<1<<' ';
    cout<<x-n+2<<' '<<x-n+2<<endl;
}
else{
    for(int i=1;i<n;i++) cout<<1<<' ';
    cout<<x-n+2<<endl;
}
```

#### 2. RJSPZ 的题解（★★★★☆）
**关键亮点**：  
- 直接计算调整数`num = x-n+2`，逻辑清晰。  
- 使用`goto`处理输出，减少代码冗余。  
- 通过连续输出1和调整数快速构造序列。  

**核心代码**：
```cpp
int num = x-n+2;
if(num<=0) { ... }
for(int i=1;i<=n-2;i++) putchar('1 ');
printf("%d %d", num, num);
```

#### 3. myyyIisq2R 的题解（★★★★☆）
**关键亮点**：  
- 代码极简，无冗余判断。  
- 通过`q-(n-2)`直接推导调整数，思路直接。  
- 输出格式化简洁，适合快速实现。  

**核心代码**：
```cpp
for(int i{1};i<n-1;i++) cout<<1<<" ";
cout<<q-(n-2)<<" "<<q-(n-2)<<endl;
```

---

### 关键思路总结
1. **构造核心**：前导1占位，尾数调整总和。  
   - `gcd`情况：前`n-2`个1，最后两个数设为`x-n+2`。  
   - `lcm`情况：前`n-1`个1，最后一个数设为`x-n+2`。  
2. **边界处理**：`x < n-1`时无解，因每对至少贡献1。  
3. **数学验证**：利用`gcd(a,a)=a`和`lcm(1,a)=a`的性质调整总和。

---

### 拓展练习
1. [P8278「MCOI-08」Fill In](https://www.luogu.com.cn/problem/P8278) - 构造填充矩阵，类似逆向思维。  
2. [P7915 [CSP-S 2021] 回文](https://www.luogu.com.cn/problem/P7915) - 构造回文序列，考察贪心策略。  
3. [P2119 魔法阵](https://www.luogu.com.cn/problem/P2119) - 构造特定数学关系的四元组，训练组合思维。  

---

### 个人心得摘录
- **Clarinet**提到：“比赛时只做出一题的蒟蒻，也就只能写写第一题的题解”，反映构造题的思维突破点往往在特殊数值（如1）。  
- **sbno333**的代码中前两数为调整值，提醒构造顺序的灵活性。  
- **WhitD**强调“无解判断”优先处理，避免无效计算，优化性能。  

通过本题可加深对构造题中“极端值”策略的理解，同时强化边界条件处理能力。

---
处理用时：139.55秒
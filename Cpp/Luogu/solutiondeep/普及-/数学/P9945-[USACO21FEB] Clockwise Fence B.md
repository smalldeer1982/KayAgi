# 题目信息

# [USACO21FEB] Clockwise Fence B

## 题目描述

围绕 Farmer John 最大的草地的栅栏已经损坏了，如今他终于决定要换一个新的栅栏。

不幸的是，当 Farmer John 在铺设新栅栏时，一只巨大的蜜蜂突然出现，在他的草地上追着他跑，导致最后栅栏被沿着一条相当不规则的路径铺设。栅栏可以用一个字符串表示，每个字符为 `N`（north，北）、`E`（east，东）、`S`（south，南）、`W`（west，西）之一。每个字符表示一米长的一段栅栏。举例来说，如果字符串为 `NESW`，这表示栅栏从起点开始向北延伸 $1$ 米，然后向东延伸 $1$ 米，然后向南延伸 $1$ 米，然后向西延伸 $1$ 米，回到栅栏的起点。

栅栏的结束位置与开始位置相同，而这是栅栏的路径上唯一会被到达多次的位置（从而起始位置是唯一会被再次到达的位置，在栅栏结束之时）。结果，栅栏确实围起了一个草地上连通的区域，尽管这个区域可能形状十分奇特。

Farmer John 想要知道他铺设栅栏的路径是顺时针（当按字符串表示的顺序沿着栅栏的路径行走时被围起的区域位于右侧）还是逆时针（被围起的区域位于左侧）。 

## 说明/提示

### 样例解释 1

以下为这两条栅栏路径，用 `@` 表示起始位置：

```plain
*>*
^ v
@<*
```
```plain
  *<*<*<*
  v     ^
*<@     *
v       ^
* *>*>* *
v ^   v ^
* *<* * *
v   ^ v ^
*>*>* *>*
```

## 样例 #1

### 输入

```
2
NESW
WSSSEENWNEESSENNNNWWWS```

### 输出

```
CW
CCW```

# AI分析结果



### 综合分析与结论
题目核心是通过栅栏路径的转向判断顺时针/逆时针。所有题解均基于"总转向角度决定方向"这一关键点：顺时针右转总和+360°，逆时针总和-360°。本质是计算多边形旋转方向，可转化为统计左右转次数的代数和。

### 评分较高题解推荐

#### 1. 作者：Luogu_916767 (★★★★☆)
**关键亮点**：
- 使用map预存所有转向角度，代码结构清晰
- 正确处理闭环路径（末位与首位连接）
- 以角度累加代替简单计数，便于理解几何意义
**核心代码**：
```cpp
map<string,int> mp; // 预存转向角度
mp["EN"] = -90; mp["SE"] = -90; // 其他转向类似...
int ans = 0;
for(int i=0; i<s.size(); i++){
    string ss = string(1,s[i]) + s[(i+1)%s.size()]; // 闭环处理
    ans += mp[ss];
}
cout << (ans==360 ? "CW" : "CCW");
```

#### 2. 作者：Vct14 (★★★★☆)
**关键亮点**：
- 函数封装转向判断逻辑，可读性强
- 显式处理所有转向情况，无隐藏逻辑
- 简洁的循环结构处理闭环
**核心代码**：
```cpp
void turn(char bef, char aft) { // 分类判断转向
    if(bef=='N' && aft=='W') lft++; // 其他情况类似...
}
for(int i=0; i<l; i++) 
    turn(a[i], a[(i+1)%l]); // 闭环处理
```

#### 3. 作者：aleph_ (★★★★☆)
**关键亮点**：
- 角度计算函数封装清晰
- 注释详细解释转向逻辑
- 显式处理末位到首位的转向
**核心代码**：
```cpp
int angle(char a, char b) { // 返回转向角度
    if(a=='E'&&b=='N') return -90; // 逆时针
    // 其他转向情况...
}
res += angle(s[m-1], s[0]); // 处理闭环
```

### 关键思路总结
1. **转向特征分析**：每个连续方向变化对应左转(-90)或右转(+90)
2. **闭环处理**：必须计算末位到首位的转向
3. **累加判断**：总和为+360°(CW)或-360°(CCW)
4. **实现优化**：使用预处理结构(map/数组)存储转向值

### 拓展建议
同类问题可参考：
1. 多边形顶点顺序判断（计算有向面积）
2. 机器人路径方向判断（如Codeforces 54A）
3. 闭合路径的自相交检测

### 推荐练习题
1. [P1515 迷宫的墙](https://www.luogu.com.cn/problem/P1515) - 方向路径判断
2. [P1143 旋转操作](https://www.luogu.com.cn/problem/P1143) - 方向变换计算
3. [P3821 方向统计](https://www.luogu.com.cn/problem/P3821) - 路径方向特征分析

### 个人心得摘录
> "注意处理第一位和最后一位，其实也是挨着的！" —— Luogu_916767  
> 调试中发现未处理闭环时，WSEN这类数据会出错，强调必须计算末位到首位的转向。这提示在循环路径问题中，要特别注意起点与终点的连接处理。

---
处理用时：49.90秒
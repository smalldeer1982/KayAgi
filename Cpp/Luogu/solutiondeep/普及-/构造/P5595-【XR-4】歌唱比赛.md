# 题目信息

# 【XR-4】歌唱比赛

## 题目背景

**赛时提醒：本题不提供任何关于样例 4 以及无解的解释。**

**赛时提醒：本题不提供任何关于输出格式以及 Special Judge 的解释。**

**赛时提醒：抱歉，本题的 Special Judge 不忽略行末空格，请保证两行中没有多余字符。**

**赛时提醒：非常抱歉，本题输入数据是 Windows 格式，而非 Linux 格式，所以在末尾的 `\n` 之前有一个多余的 `\r` 字符。请使用 `scanf` 或 `cin` 读入数据，而非 `getline`，因为后者会多读入一个 `\r`。**

## 题目描述

小 X 参加了一场歌唱比赛。

经过一路鏖战，小 X 终于挺进了决赛，他的对手是小 Y。

这场歌唱比赛的冠军是由点赞数决定的，谁的点赞数高，谁就能夺冠。

小 X 和小 Y 依次演唱完自己的最后一首歌曲后，他们最终的点赞数确定了下来。

揭晓冠军的时刻终于到来了，主持人为了增加悬念，决定从小 X 与小 Y 的点赞数的最后一位开始，依次比较。

比如，小 X 的点赞数是 $37$，小 Y 的点赞数是 $28$。首先比较最后一位，小 X 是 $7$，小 Y 是 $8$，此时小 Y 暂时领先。再加上前一位，小 X 是 $37$，小 Y 是 $28$，此时小 X 暂时领先。比较结束，如果我们用 `X` 代表小 X 暂时领先，`Y` 代表小 Y 暂时领先，那么可以写下一个字符串 `XY`。

再比如，小 X 的点赞数是 $137$，小 Y 的点赞数是 $47$。如果我们再用 `Z` 表示小 X 与小 Y 的点赞数暂时一样，那么写下的字符串应该为 `XYZ`。

你作为一个精通 OI 的神仙，自然知道这种比较方式是非常不科学的，这样只是在无端拖延时间罢了，但是你却对最后写下的这个字符串很感兴趣。

现在，你得到了这个最后写下的字符串，你需要构造出一种可能的小 X 与小 Y 的点赞数。

当然，有可能不存在任何一种情况的点赞数满足这个字符串，那么你只需要输出 `-1` 即可。

为了方便你输出，请用前导零来补足位数。

## 说明/提示

**本题采用捆绑测试。**

- Subtask 1（11 points）：$\text{len}(s) = 1$。
- Subtask 2（42 points）：$s_i \in \{\texttt{X},\texttt{Y}\}$。
- Subtask 3（21 points）：数据保证有解。
- Subtask 4（26 points）：无特殊限制。

对于 $100\%$ 的数据，$s_i \in \{\texttt{X},\texttt{Y},\texttt{Z}\}$，$1 \le \text{len}(s) \le 10^6$。

## 样例 #1

### 输入

```
XY
```

### 输出

```
37
28
```

## 样例 #2

### 输入

```
XYZ
```

### 输出

```
137
047
```

## 样例 #3

### 输入

```
ZZZZZZ
```

### 输出

```
000000
000000
```

## 样例 #4

### 输入

```
XYZXYZ
```

### 输出

```
-1
```

# AI分析结果

### 综合分析与结论

本题的核心在于根据给定的字符串构造两个数字，使得从最后一位开始逐位比较时，结果与字符串一致。难点在于处理`Z`（表示相等）的情况，尤其是当`Z`出现在字符串中间时，可能导致无解。大多数题解都采用了从后向前遍历字符串的策略，并根据字符类型（`X`、`Y`、`Z`）来构造数字。无解的情况通常通过判断`Z`后是否出现`X`或`Y`来处理。

### 所选高星题解

#### 1. **作者：StudyingFather (5星)**
   - **关键亮点**：简洁高效，利用从后向前遍历的策略，先判断无解情况，再构造数字。代码清晰，逻辑严谨。
   - **代码核心**：
     ```cpp
     for(int i=len-1;i>=0;i--) {
         if(s[i]!='Z')flag=false;
         if(s[i]=='Z'&&!flag) {
             puts("-1");
             return 0;
         }
         if(s[i]=='Z')s1[i]=s2[i]='0';
         else if(s[i]=='X')s1[i]='9',s2[i]='0';
         else s1[i]='0',s2[i]='9';
     }
     ```
   - **个人心得**：作者强调了`Z`只能出现在字符串的最后几位，否则无解。这一观察是解题的关键。

#### 2. **作者：Meatherm (4星)**
   - **关键亮点**：详细解释了无解情况的判断方法，并提供了清晰的构造思路。代码可读性强，逻辑清晰。
   - **代码核心**：
     ```cpp
     for(rr int i=n;i;--i) {
         if(s[i]=='Z' && !flag) return false;
         if(s[i]=='X') a[i]=2,b[i]=1;
         else if(s[i]=='Y') a[i]=1,b[i]=2;
         else a[i]=b[i]=1;
     }
     ```
   - **个人心得**：作者提到，`Z`表示从该位开始后面的所有位都相等，这一理解帮助他快速判断无解情况。

#### 3. **作者：loceaner (4星)**
   - **关键亮点**：通过`now`变量记录是否出现过`Z`，并在后续遍历中判断无解情况。代码简洁，逻辑清晰。
   - **代码核心**：
     ```cpp
     for(int i = 1; i <= len; i++) {
         if(s[i] == 'Z') now = 1;
         if(s[i] != 'Z' && now) return cout << "-1\n", 0;
     }
     ```
   - **个人心得**：作者提到，`Z`表示从该位开始后面的所有位都相等，这一理解帮助他快速判断无解情况。

### 最优关键思路与技巧

1. **从后向前遍历**：大多数题解都采用了从后向前遍历字符串的策略，这样可以方便地处理`Z`的情况，并快速判断无解。
2. **无解判断**：通过判断`Z`后是否出现`X`或`Y`，可以快速确定无解情况。
3. **简单构造**：利用`0`和`1`或`0`和`9`等简单数字来构造答案，既保证了正确性，又简化了代码。

### 可拓展之处

本题的解题思路可以拓展到其他类似的构造题，尤其是涉及逐位比较或逐位构造的题目。例如，处理字符串中的特定字符，并根据字符类型进行相应的操作。

### 推荐题目

1. **P3742 umi的函数**：考察字符串处理与构造，与本题类似。
2. **P5595 歌唱比赛**：与本题完全相同，适合巩固练习。
3. **P5596 歌唱比赛2**：本题的变种，增加了更多的限制条件，适合进一步提升解题能力。

### 个人心得总结

多位作者在解题过程中都提到了`Z`的特殊性，尤其是`Z`只能出现在字符串的最后几位，否则无解。这一观察是解题的关键，帮助他们在代码中快速判断无解情况。此外，从后向前遍历字符串的策略也大大简化了问题的处理。

---
处理用时：31.11秒
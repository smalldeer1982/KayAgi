# 题目信息

# 『GROI-R2』 紫水晶

## 题目描述

爱丽丝不曾忘记过她曾经存在于纸牌的世界。

于是魔法让她的手里出现了一些牌，同时魔法也让坦尼尔手里出现了一些牌，而且每张牌上都写着一个正整数——尽管他们如今所处的，是玻璃王国的世界中。

牌张很快一消而散，而他们也准备启程。爱丽丝只记住了每相邻两张牌的**最大公约数之和**，坦尼尔只记住了每相邻两张牌的**最小公倍数之和**。

你还在这个宫殿里，你想重现当时的牌张。

**形式化题面**

给定 $q$ 次询问，每次询问为以下两种之一：

- ``1 n x`` 表示要求输出一长度为 $n$ 的**正整数**序列 $\{a_n\}$，使得 $\sum\limits_{i=1}^{n-1} \gcd(a_i,a_{i+1})=x$。

- ``2 n x`` 表示要求输出一长度为 $n$ 的**正整数**序列 $\{a_n\}$，使得 $\sum\limits_{i=1}^{n-1} \operatorname{lcm}(a_i,a_{i+1})=x$。

且对于任意输出的 $a_i$ 不应超出 C++ 语言中 ``int`` 的存储范围。

其中 $\gcd$ 和 $\operatorname{lcm}$ 分别为最大公约数和最小公倍数，如有多解，输出任意一个即可。如果无解，输出 ``-1``。

## 说明/提示

**数据范围**

**本题采用捆绑测试**。

| $\text{Subtask}$ | $\sum n\le$ | $x\le$ | 特殊性质 | 分值 |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $1$ | $5$ | $10$ | | $10$ |
| $2$ | $50$ | $200$ | | $20$ |
| $3$ | $5\times 10^5$ | $2^{31}-1$ | $\text{A}$ | $15$ |
| $4$ | $5\times 10^5$ | $2^{31}-1$ | $\text{B}$ | $15$ |
| $5$ | $5\times 10^5$ | $2^{31}-1$ | | $40$ |

特殊性质 $\text{A}$：保证对于任意询问满足 $op=1$。

特殊性质 $\text{B}$：保证对于任意询问满足 $op=2$。

对于 $100\%$ 的数据满足 $2\le n\le 5\times 10^5$，$2\le \sum n\le 5\times 10^5$，$1\le x \le 2^{31}-1$，$op\in\{1,2\}$。


## 样例 #1

### 输入

```
5
1 5 4
2 3 8
1 5 10
2 6 34
1 3 1```

### 输出

```
1 1 1 1 1
2 2 3
1 1 1 7 7
1 1 4 5 1 4
-1```

# AI分析结果

### 综合分析与结论

本题是一道典型的构造题，核心在于通过合理的序列构造来满足给定的最大公约数（GCD）或最小公倍数（LCM）之和。大多数题解都采用了类似的思路：利用数字1的特殊性质（如$\gcd(1, x) = 1$，$\operatorname{lcm}(1, x) = x$）来简化问题，并通过调整序列的最后几个元素来满足总和的要求。

**关键思路总结：**
1. **利用1的特殊性质**：通过将序列的前$n-2$或$n-1$个元素设为1，简化GCD或LCM的计算。
2. **调整最后几个元素**：根据总和的要求，调整序列的最后几个元素的值，确保总和满足条件。
3. **无解判断**：当$x < n-1$时，直接输出-1，因为即使所有相邻元素的GCD或LCM都为1，总和也至少为$n-1$。

**优化与拓展：**
- **时间复杂度**：所有题解的时间复杂度均为$O(n)$，满足题目要求。
- **代码简洁性**：部分题解通过减少不必要的变量和循环，使得代码更加简洁易读。
- **拓展思路**：类似的问题可以通过构造特定的序列来满足特定的数学性质，如斐波那契数列、等差数列等。

### 所选高星题解

#### 1. 作者：RJSPZ (4星)
**关键亮点：**
- 思路清晰，直接通过构造$n-2$个1和最后两个$x-n+2$来满足GCD之和的要求。
- 代码简洁，直接输出结果，避免了复杂的计算。

**核心代码：**
```cpp
for(int i=1;i<=n-2;i++){
    putchar('1'),putchar(' ');
}
for(int i=n-1;i<=n;i++){
    printf("%d ",num);
}
```

#### 2. 作者：myyyIisq2R (4星)
**关键亮点：**
- 详细解释了构造思路，特别是对于最小公倍数的情况，通过前$n-1$个1和最后一个$x-n+2$来满足要求。
- 代码结构清晰，易于理解。

**核心代码：**
```cpp
for(int i{1};i<n-1;i++)
    cout<<1<<" ";
cout<<q-(n-2)<<" "<<q-(n-2)<<endl;
```

#### 3. 作者：_O_v_O_ (4星)
**关键亮点：**
- 提供了无解情况的详细证明，增强了代码的鲁棒性。
- 代码简洁，直接输出结果，避免了不必要的计算。

**核心代码：**
```cpp
for(int i=1;i<n-1;i++){
    cout<<1<<' ';
}
cout<<x-n+2<<' '<<x-n+2<<endl;
```

### 推荐相似题目
1. [P8278 还原数列](https://www.luogu.com.cn/problem/P8278) - 类似构造题，要求还原满足特定条件的数列。
2. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029) - 考察GCD和LCM的性质，适合进一步练习。
3. [P1068 数列分段](https://www.luogu.com.cn/problem/P1068) - 通过构造特定序列来满足分段条件，与本题思路相似。

### 个人心得摘录
- **调试经历**：部分题解提到在比赛中只做出一题，通过补题才AC，强调了赛后复盘的重要性。
- **顿悟感想**：通过构造特定的序列来满足数学性质，是解决此类问题的关键，尤其是在面对复杂条件时，简化问题尤为重要。

### 通用建议与扩展思路
- **构造题的核心**：通过构造特定的序列来满足特定的数学性质，如利用1的特殊性质简化问题。
- **无解判断**：在构造题中，无解情况的判断往往可以通过简单的数学推导得出，如本题中的$x < n-1$。
- **代码优化**：减少不必要的变量和循环，使得代码更加简洁易读，同时也能提高运行效率。

---
处理用时：35.85秒
# 题目信息

# [NOIP 1999 普及组] Cantor 表

## 题目描述

现代数学的著名证明之一是 Georg Cantor 证明了有理数是可枚举的。他是用下面这一张表来证明这一命题的：

![](https://cdn.luogu.com.cn/upload/image_hosting/jdjdaf73.png)

我们以 Z 字形给上表的每一项编号。第一项是 $1/1$，然后是 $1/2$，$2/1$，$3/1$，$2/2$，…


## 说明/提示

- 2024-11-18 0:30 数据中加入了样例，放在不计分的子任务 2 中。

## 样例 #1

### 输入

```
7
```

### 输出

```
1/4```

# AI分析结果

### 综合分析与结论
这些题解主要围绕寻找 Cantor 表中第 n 项的分子和分母展开，思路大致可分为模拟和数学推导两类。模拟类通过模拟 Z 字形遍历过程找到第 n 项；数学推导类则利用等差数列求和公式确定第 n 项所在斜线及位置。

### 所选题解
- **作者：哦哟筷子（5星）**
    - **关键亮点**：思路清晰，代码简洁，先通过循环确定第 n 项所在斜线，再根据斜线奇偶性输出结果。同时提及了时间复杂度优化方法。
    - **个人心得**：作者表示写题解时刚入门，当时以为 AK 新手村很厉害，后来意识到说法很蠢。还提到当时没想到优化方法，只能写模拟代码。
```cpp
#include <bits/stdc++.h>
using namespace std; 
int main() {
    int n,k=1;
    cin>>n;
    while (n>k) {
        n=n-k;
        k++;
    }
    if(k%2==0) cout<<n<<"/"<<(k+1-n);
    else cout<<k+1-n<<"/"<<n;
    return 0;
} 
```
核心实现思想：用 `k` 记录 Z 字形编号后的行数，通过循环不断减去当前行的数字个数，直到 `n` 小于等于当前行的数字个数，此时 `k` 即为所在行数，`n` 为该行的位置。最后根据 `k` 的奇偶性确定分子和分母。

- **作者：「已注销」（4星）**
    - **关键亮点**：总结了多种算法，包括模拟、枚举斜线、二分查找等，并给出了每种算法的时间复杂度和适用范围，提供了二分查找的参考代码。
```cpp
#include<iostream>
#include<cmath>
using namespace std;
int main(){
    long long l=1,r,mid,n,a;
    cin>>n;
    r=n;
    while(l<r){
        mid=(l+r)/2;
        if(mid*(mid+1)/2<n)l=mid+1;
        else r=mid;
    }
    a=n-l*(l-1)/2;
    if(l%2==0)cout<<a<<'/'<<l+1-a;
    else cout<<l+1-a<<'/'<<a;
    return 0;
}
```
核心实现思想：利用二分查找确定第 n 项所在的斜线，根据等差数列求和公式判断 `mid` 是否满足条件，不断缩小范围，最后根据斜线的奇偶性输出结果。

- **作者：wmxwmx（4星）**
    - **关键亮点**：通过数学推导得出 O(1) 复杂度的解法，利用等差数列求和公式和求根公式确定行数和位置。
```plaintext
已知数据是第 \(n\) 个。
明显 Z 形画出来的三角，从左上到右下的行数是从 1 开始公差为 1 的等差数列。所以利用求和公式，设行数为 \(a\) 的话则有：
\(\frac{a\times (a - 1)}{2} < n \leq \frac{(1 + a)\times a}{2}\)
因此我们设 \(x\) 使得 \(\frac{(1 + x)\times x}{2} = n\)
根据建立起的函数的递增性，可知 \(a = \lceil x \rceil\)
所以通过求根公式求出 \(x\) 然后向上取整就可以在 O(1) 的时间复杂度求出行数了。
Which is \(a = \lceil\frac{-1 + \sqrt{1 + 8\times n}}{2}\rceil\)
接下来，还要求出所在当行的具体位置，这个就很容易了，只需要知道到 \(a - 1\) 那一行总共有多少个：明显 \(\frac{a\times (a - 1)}{2}\) 个
所以要求的也就是 \(a\) 那一行的第 \(n - \frac{a\times (a - 1)}{2}\) 个。
```
核心实现思想：根据等差数列求和公式建立不等式，通过求根公式求出 \(x\) 并向上取整得到行数 \(a\)，再计算出所在行的位置，最后根据行数的奇偶性确定分子和分母。

### 最优关键思路或技巧
- **数学推导**：利用等差数列求和公式确定第 n 项所在的斜线和位置，可将时间复杂度优化到 O(1) 或 O(log₂n)。
- **模拟**：通过模拟 Z 字形遍历过程，逐步找到第 n 项，但时间复杂度较高，一般为 O(n)。

### 可拓展之处
同类型题可能涉及其他形式的数字排列规律，如蛇形填数、螺旋矩阵等，解题思路类似，可通过寻找规律和数学推导来优化算法。

### 推荐题目
- P1161 开灯：通过寻找数字规律解决问题。
- P1009 阶乘之和：涉及数学计算和规律推导。
- P1035 级数求和：需要找出级数的规律进行计算。

### 个人心得总结
- 哦哟筷子：刚入门时对自己的能力估计过高，后来意识到需要不断学习和提升。写题解时没想到优化方法，只能用模拟解决问题。
- 八个月想一等：该题卡了三天，在他人帮助下才做出来，强调了找规律的重要性。
- xytd：被 Z 字形排列卡了半天，提醒要注意题目中的排列顺序。 

---
处理用时：34.24秒
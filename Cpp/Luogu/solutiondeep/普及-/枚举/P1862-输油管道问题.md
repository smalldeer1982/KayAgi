# 题目信息

# 输油管道问题

## 题目背景

听说最近石油危机。

所以想到了这题。


## 题目描述

某石油公司计划建造一条由东向西的主要输油管道。

该管道要穿过一个有 $n$ 口油井的油田。从每口油井都要有一条输油管道沿最短路径（或南或北）与主管道相连。

如果给定 $n$ 口油井的位置，及它们的 $x$ 坐标（东西向）和 $y$ 坐标（南北向），应如何确定主管道的最优位置，即使各油井到主管道之间的输油管道长度总和最小的位置？证明可规定时间内确定主管道的最优位置。

## 说明/提示

### 数据范围及约定

对于全部数据，$1 \le n \le 10000$，$-10^4 \le x,y \le 10^4$。

## 样例 #1

### 输入

```
5
1 2
2 2
1 3
3 -2
3 3```

### 输出

```
6```

# AI分析结果

### 综合分析与结论
本题要求确定主管道的最优位置，使各油井到主管道的输油管道长度总和最小。题解主要分为中位数法、模拟退火法和暴力枚举法三类。
- **中位数法**：通过数学推导可知，主管道的最优位置是油井 $y$ 坐标的中位数，该方法时间复杂度低，代码简洁。
- **模拟退火法**：一种玄学算法，通过不断降温以一定概率接受更优解，可用于求解复杂的优化问题，但不保证一定能得到最优解。
- **暴力枚举法**：枚举主管道可能的位置，计算各油井到主管道的距离总和，找出最小值，时间复杂度较高。

### 所选题解
- **作者：oistr（5星）**
    - **关键亮点**：思路清晰，详细解释了为什么主管道的位置是中位数，代码规范，可读性强。
    - **核心代码**：
```cpp
#include <iostream>
#include <cmath>
#include <algorithm>
using namespace std;
int y[10005];
int main()
{
    int n,tmp;
    cin>>n;
    for(int i=1;i<=n;i++)
    {
        cin>>tmp>>y[i];
    }
    sort(y+1,y+n+1);
    int mid;
    if(n%2==1)
    {
        mid=y[(n+1)/2];
    }
    else
    {
        mid=(y[n/2]+y[n/2+1])/2;
    }
    int sum=0;
    for(int i=1;i<=n;i++)
    {
        sum+=abs(y[i]-mid);
    }
    cout<<sum<<endl;
    return 0;
}
```
    - **核心实现思想**：先读取油井的 $y$ 坐标，对其进行排序，根据油井数量的奇偶性求出中位数，最后计算各油井到中位数位置的距离总和。

- **作者：LMB_001（4星）**
    - **关键亮点**：代码简洁，直接点明本题是中位数问题，快速解决问题。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int main(){
    int n,i,a[100000],ans=0,l;
    cin>>n;
    for (i=1;i<=n;i++) {
        int x;
        cin>>x>>a[i];
    }
    sort(a+1,a+n+1);
    l=n/2;
    for (i=1;i<=l;i++){
        ans+=a[n-i+1]-a[i];
    }
    cout<<ans;
    return 0;
}
```
    - **核心实现思想**：读取油井的 $y$ 坐标并排序，通过特定的计算方式得到各油井到主管道的距离总和。

- **作者：王钰翔（4星）**
    - **关键亮点**：思路清晰，明确指出中位数的概念和本题的解题思路，代码简洁易懂。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int n,x,y,ans=0;
int a[10005];
int main() {
    cin>>n;
    for(int i=1; i<=n; i++) {
        cin>>x>>a[i];
    }
    sort(a+1,a+n+1);
    y=a[n/2+1];
    for(int i=1; i<=n; i++) {
        ans+=abs(a[i]-y);
    }
    cout<<ans; 
    return 0;
}
```
    - **核心实现思想**：读取油井的 $y$ 坐标并排序，取中位数，计算各油井到中位数位置的距离总和。

### 最优关键思路或技巧
- **中位数思想**：通过数学分析，将问题转化为求油井 $y$ 坐标的中位数，大大降低了时间复杂度。
- **剪枝优化**：在暴力枚举时，当发现管道之和开始大于已经求出的最小值后，直接结束枚举，减少不必要的计算。

### 拓展思路
同类型题或类似算法套路：
- 其他求最优位置使距离总和最小的问题，如在一条直线上安排服务点，使各用户到服务点的距离总和最小。
- 模拟退火算法可用于求解复杂的组合优化问题，如旅行商问题、背包问题等。

### 推荐题目
- [P1337 平衡点](https://www.luogu.org/problemnew/show/P1337)
- [P3936 coloring](https://www.luogu.org/problemnew/show/P3936)
- [P2530 均分数据](https://www.luogu.org/problemnew/show/P2503)

### 个人心得摘录与总结
- **oistr**：通过观察式子 $S=|y_1 - m| + |y_2 - m| +... + |y_n - m|$ ，突然醒悟 $m$ 应该是 $y_1,y_2,...,y_n$ 的中位数，手算小数据验证后提交 AC。总结：在解题时要善于观察式子的特点，通过小数据验证猜想。
- **Jy_Amoy**：刚写时没想到其他写法，使用模拟退火算法，提到该算法是玄学算法，不保证一交上去就能 AC。总结：对于复杂问题，可尝试使用一些特殊算法，但要注意其局限性。 

---
处理用时：28.59秒
# 题目信息

# [USACO1.3] 滑雪课程设计Ski Course Design

## 题目描述

农民约翰的农场里有 $n$ 座山峰，每座山都有一个在 $0$ 到 $100$ 之间的整数的海拔高度。在冬天,因为山上有丰富的积雪，约翰经常开办滑雪训练营。

不幸的是，约翰刚刚得知税法在滑雪训练营方面有新变化，明年开始实施。在仔细阅读法律后，他发现如果滑雪训练营的最高和最低的山峰海拔高度差大于 $17$ 就要收税。因此，如果他改变山峰的高度（使最高与最低的山峰海拔高度差不超过 $17$ ），约翰可以避免支付税收。

如果改变一座山 $x$ 单位的高度成本是 $x^2$ 单位，约翰最少需要付多少钱才能使海拔最高的山峰与海拔最低的山峰的高度之差不超过 $17$ 约翰只愿意改变整数单位的高度。

## 说明/提示

#### 样例输入输出 1 解释

约翰保持高度为 $4$、$20$ 和 $21$ 的山的高度。他增高高度为 $1$ 的山，变成高度 $4$ ，花费 $3^2 = 9$。他降低了高度为 $24$ 的山变成高度 $21$，也花费 $3 ^ 2 = 9$。因此总共花费 $9 + 9 = 18$。

---

#### 数据规模与约定

对于 $100\%$ 的数据，$1 \le n \le 1000$，$0 \leq a_i \leq 100$。

## 样例 #1

### 输入

```
5
20
4
1
24
21```

### 输出

```
18```

# AI分析结果

### 综合分析与结论
这些题解主要围绕暴力枚举和三分法来解决问题。大部分题解采用暴力枚举的思路，通过枚举山峰高度的区间，计算每个区间下修改山峰高度的总花费，取最小值作为答案。少数题解使用三分法，利用单谷函数的性质来优化查找最小值的过程。

暴力枚举的优点是思路简单直接，容易实现；缺点是时间复杂度较高。三分法的优点是时间复杂度较低，但需要理解单谷函数的性质和三分法的原理。

### 所选题解
- **作者：xfydemx（5星）**
    - 关键亮点：思路清晰，代码简洁，使用 `sort` 函数找出最大和最小情况，通过两层循环枚举所有可能的区间，计算每个区间下的总花费并维护最小值。
    - 重点代码：
```cpp
for(int j=a[1];j<=a[n];j++)
{
    sum=0;
    for(int i=1;i<=n;i++)
    {
        if(a[i]-j>17) sum+=(a[i]-j-17)*(a[i]-j-17);
        if(a[i]<j) sum+=(a[i]-j)*(a[i]-j);
    }    
    s=min(sum,s);
}
```
核心实现思想：外层循环枚举区间的下限，内层循环遍历所有山峰，根据山峰高度与区间下限的关系计算修改高度的花费，最后取最小值。

- **作者：「QQ红包」（4星）**
    - 关键亮点：思路清晰，代码规范，通过枚举山峰高度，计算每个高度下修改山峰高度的总花费，取最小值作为答案。
    - 重点代码：
```cpp
for (i=0;i<=84;i++)
{
    w=0;
    for (j=1;j<=n;j++)
    {
        if (a[j]<i)
            w+=(i-a[j])*(i-a[j]);
        if (a[j]>i+17)
            w+=(a[j]-(i+17))*(a[j]-(i+17)); 
    }
    if (w<m) m=w;
} 
```
核心实现思想：外层循环枚举山峰高度，内层循环遍历所有山峰，根据山峰高度与当前枚举高度的关系计算修改高度的花费，最后取最小值。

- **作者：xiaoniu142857（4星）**
    - 关键亮点：使用三分法优化查找最小值的过程，时间复杂度较低。
    - 重点代码：
```cpp
while(l<r)
{
    m1=(l+r>>1),m2=m1+1;
    if(f(m1)<f(m2)) r=m2-1;
    else l=m1+1;
}
```
核心实现思想：通过三分法不断缩小查找范围，找到使总花费最小的区间下限。

### 最优关键思路或技巧
- 暴力枚举时，合理确定枚举范围可以减少不必要的计算。
- 对于具有单谷函数性质的问题，可以使用三分法优化查找最小值的过程。

### 可拓展之处
同类型题或类似算法套路：
- 其他需要枚举区间并计算代价的问题，如区间覆盖问题、区间修改问题等。
- 对于具有单调性或单峰/单谷性质的问题，可以考虑使用二分法或三分法进行优化。

### 推荐题目
- P1873 [COCI 2011/2012 #5] EKO / 砍树
- P2678 [NOIP2015 提高组] 跳石头
- P3853 [TJOI2007] 路标设置

### 个人心得摘录与总结
- 作者：卑微的绝望：第一次做这题只枚举了山的高度，导致只得到80分，提醒大家要全面考虑问题。总结：做题时要仔细思考，确保考虑到所有可能的情况。

---
处理用时：22.20秒
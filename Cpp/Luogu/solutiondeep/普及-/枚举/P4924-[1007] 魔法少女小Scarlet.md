# 题目信息

# [1007] 魔法少女小Scarlet

## 题目描述

Scarlet 最近学会了一个数组魔法，她会在 $n\times n$ 二维数组上将一个奇数阶方阵按照顺时针或者逆时针旋转 $90^\circ$。

首先，Scarlet 会把 $1$ 到 $n^2$ 的正整数按照从左往右，从上至下的顺序填入初始的二维数组中，然后她会施放一些简易的魔法。

Scarlet 既不会什么分块特技，也不会什么 Splay 套 Splay，她现在提供给你她的魔法执行顺序，想让你来告诉她魔法按次执行完毕后的二维数组。

## 说明/提示

对于50%的数据，满足 $r=1$

对于100%的数据 $1\leq n,m\leq500$，满足 $1\leq x-r\leq x+r\leq n,1\leq y-r\leq y+r\leq n$。

## 样例 #1

### 输入

```
5 4
2 2 1 0
3 3 1 1
4 4 1 0
3 3 2 1```

### 输出

```
5 10 3 18 15
4 19 8 17 20
1 14 23 24 25
6 9 2 7 22
11 12 13 16 21```

# AI分析结果

### 综合分析与结论
这些题解均采用模拟法解决矩阵旋转问题。核心在于找出矩阵旋转前后元素位置的对应关系。不同题解在实现方式上有所差异，有的通过数学推导得出位置变换公式，有的则通过逐层递归或循环模拟旋转过程。

### 所选题解
- **作者：黎曦の夜（5星）**
    - **关键亮点**：代码简洁，通过数学公式直接得出旋转后的位置，思路清晰，可读性高。
    - **个人心得**：无
    - **核心代码**：
```cpp
if(opt==0) {
    for(int i=a-r;i<=a+r;i++)
        for(int j=b-r;j<=b+r;j++)
            f[a-b+j][a+b-i] = g[i][j];
    for(int i=a-r;i<=a+r;i++)
        for(int j=b-r;j<=b+r;j++)
            g[i][j] = f[i][j];
}
else {
    for(int i=a-r;i<=a+r;i++)
        for(int j=b-r;j<=b+r;j++)
            f[a+b-j][b-a+i] = g[i][j];
    for(int i=a-r;i<=a+r;i++)
        for(int j=b-r;j<=b+r;j++)
            g[i][j] = f[i][j];
}
```
核心思想：根据旋转方向（顺时针或逆时针），利用数学公式计算旋转后元素的位置，并通过临时数组 `f` 完成元素的转移。

- **作者：BzhH（4星）**
    - **关键亮点**：通过具体的 3*3 矩阵示例，详细推导旋转规律，思路易于理解。
    - **个人心得**：无
    - **核心代码**：
```cpp
void spin(int x,int y,int r) {
    for(int i=x-r;i<=x+r;i++)
        for(int k=y-r;k<=y+r;k++)
            temp[i][k]=square[i][k];
    int x1=x+r,y1=y-r;
    for(int i=x-r;i<=x+r;i++) {
        for(int k=y-r;k<=y+r;k++) {
            square[i][k]=temp[x1][y1];
            x1--;
        }
        x1=x+r,y1++;
    }
}
void spin_(int x,int y,int r) {
    for(int i=x-r;i<=x+r;i++)
        for(int k=y-r;k<=y+r;k++)
            temp[i][k]=square[i][k];
    int x1=x-r,y1=y+r;
    for(int i=x-r;i<=x+r;i++) {
        for(int k=y-r;k<=y+r;k++) {
            square[i][k]=temp[x1][y1];
            x1++;
        }
        y1--,x1=x-r;
    }
}
```
核心思想：先将以 `(x, y)` 为中心的矩阵复制到临时数组 `temp` 中，再根据旋转方向（顺时针或逆时针），按列或行依次将 `temp` 中的元素赋值给原矩阵。

- **作者：友利奈绪（4星）**
    - **关键亮点**：通过将旋转中心设为原点，简化坐标变换的推导过程，思路巧妙。
    - **个人心得**：“看到数据范围后知道这道题是道模拟，然后我们又发现数据的范围保证不会出现越界的情况(良心啊qwq)，所以我们不需要特别判断是否越界。然而我比较菜，推了大半天式子还错了。” 总结：根据数据范围判断解题方法，在推导公式时要仔细。
    - **核心代码**：
```cpp
void change(int x,int y,int r,int z) {
    if(z==0) {
        for(int i=-r;i<=r;i++)
            for(int j=-r;j<=r;j++)
                b[x+j][y-i]=a[x+i][y+j];
    }
    if(z==1) {
        for(int i=-r;i<=r;i++)
            for(int j=-r;j<=r;j++)
                b[x-j][y+i]=a[x+i][y+j];
    }
}
```
核心思想：根据旋转方向（顺时针或逆时针），将旋转中心设为原点，通过坐标变换公式计算旋转后元素的位置，并将其赋值给临时数组 `b`。

### 最优关键思路或技巧
- **数学推导**：通过数学公式直接计算旋转后元素的位置，如黎曦の夜和友利奈绪的题解，代码简洁，效率高。
- **临时数组**：使用临时数组保存原矩阵的元素，避免在旋转过程中元素被覆盖，保证旋转操作的正确性。

### 可拓展之处
同类型题或类似算法套路：
- 矩阵的任意角度旋转：可以通过数学公式计算旋转后的坐标，实现矩阵的任意角度旋转。
- 矩阵的缩放、平移等变换：可以通过矩阵运算实现矩阵的缩放、平移等变换。

### 推荐题目
- [P1006 传纸条](https://www.luogu.com.cn/problem/P1006)：涉及二维数组的操作和动态规划思想。
- [P1012 拼数](https://www.luogu.com.cn/problem/P1012)：需要对数字进行排序和拼接，可锻炼数组操作和排序算法的运用。
- [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)：涉及动态规划和最长上升子序列的求解，对数组的理解和运用要求较高。

---
处理用时：32.47秒
# 题目信息

# [蓝桥杯 2016 省 AB] 四平方和

## 题目描述

四平方和定理，又称为拉格朗日定理：

每个正整数都可以表示为至多 $4$ 个正整数的平方和。

如果把 $0$ 包括进去，就正好可以表示为 $4$ 个数的平方和。

比如：

$5=0^2+0^2+1^2+2^2$。

$7=1^2+1^2+1^2+2^2$。

对于一个给定的正整数，可能存在多种平方和的表示法。

要求你对 $4$ 个数排序使得 $0 \le a \le b \le c \le d$。

并对所有的可能表示法按 $a,b,c,d$ 为联合主键升序排列，最后输出第一个表示法。

## 说明/提示

时限 3 秒, 256M。蓝桥杯 2016 年第七届省赛

蓝桥杯 2016 年省赛 A 组 H 题（B 组 H 题）。

## 样例 #1

### 输入

```
5```

### 输出

```
0 0 1 2```

## 样例 #2

### 输入

```
12```

### 输出

```
0 2 2 2```

## 样例 #3

### 输入

```
773535```

### 输出

```
1 1 267 838```

# AI分析结果

### 综合分析与结论
这些题解核心思路一致，均是通过枚举前三个数 $a,b,c$，再计算 $d = \sqrt{n - a^2 - b^2 - c^2}$，判断 $d$ 是否为整数来求解。主要区别在于枚举范围的边界判断和代码实现细节。部分题解增加了剪枝优化，以减少不必要的枚举。

### 所选题解
- **作者：封禁用户（5星）**
    - **关键亮点**：思路清晰，边界判断巧妙，在枚举过程中提前排除不可能的情况，减少了不必要的计算。
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int n;
int check(int a,int b,int c,int d){return a*a+b*b+c*c+d*d;}
int main()
{
    cin>>n;
    for(int i=0;;i++)
    {
        if(check(i,i,i,i)>n) break;
        for(int j=i;;j++)
        {
            if(check(i,j,j,j)>n) break;
            for(int k=j;;k++)
            {
                if(check(i,j,k,k)>n) break;
                else
                {
                    int s=sqrt(n-check(i,j,k,0));
                    if(check(i,j,k,s)==n) return cout<<i<<" "<<j<<" "<<k<<" "<<s,0; 
                }
            }
        }
    }
}
```
    - **核心思想**：通过 `check` 函数计算平方和，在枚举 $a,b,c$ 时，若当前数的平方和超过 $n$ 则停止枚举，最后计算 $d$ 并判断是否满足条件。

- **作者：ccg12345（4星）**
    - **关键亮点**：代码简洁，逻辑清晰，通过简单的枚举和条件判断解决问题。
    - **核心代码**：
```cpp
#include <bits/stdc++.h>
using namespace std;
int main()
{
    int n;
    cin >> n;
    for(register int i = 0; i * i <= n; i++)
    {
        for(int j = 0; i * i + j * j <= n; j++)
        {
            for(int k = 0; i * i + j * j + k * k <= n; k++)
            {
                int t = n - i * i - j * j - k * k;
                int m = sqrt(t);
                if(m * m == t)
                {
                    cout << i << " " << j << " " << k << " " << m << endl;
                    return 0;
                }
            }
        }
    }
    return 0;
}
```
    - **核心思想**：枚举 $a,b,c$，计算 $n - a^2 - b^2 - c^2$ 的平方根 $m$，若 $m^2$ 等于该值，则输出结果。

- **作者：ダ月（4星）**
    - **关键亮点**：提出了两种剪枝优化方法，有效降低了时间复杂度。
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
int n;
int main(){
    cin>>n;
    for(int i=0;i*i<=n;i++)
        for(int j=i;j*j<=n-i*i;j++)
            for(int k=j;k*k<=n-i*i-j*j;k++){
                int p=n-i*i-j*j-k*k;
                int r=int(sqrt(p));
                if(r<k)break;
                if(p==r*r){
                    int a[4]={i,j,k,r};
                    for(int s=0;s<4;s++)
                        printf("%d ",a[s]);
                    return 0;
                }
            }
    return 0;
}
```
    - **核心思想**：枚举 $a,b,c$，计算 $n - a^2 - b^2 - c^2$ 的平方根 $r$，若 $r < k$ 则停止当前层枚举，若 $r^2$ 等于该值，则输出结果。

### 最优关键思路或技巧
- **枚举优化**：在枚举 $a,b,c$ 时，通过判断平方和是否超过 $n$ 来提前终止循环，减少不必要的计算。
- **剪枝策略**：如判断 $\sqrt{n - a^2 - b^2 - c^2} < c$ 时提前退出循环，避免无效枚举。

### 可拓展之处
同类型题可考虑增加更多约束条件，如要求四个数不相等、四个数的和最小等。类似算法套路可用于解决其他组合枚举问题，如多变量方程求解、组合求和等。

### 推荐题目
- [P1036 选数](https://www.luogu.com.cn/problem/P1036)：枚举组合，判断组合的和是否为质数。
- [P1157 组合的输出](https://www.luogu.com.cn/problem/P1157)：枚举组合，输出所有可能的组合。
- [P1706 全排列问题](https://www.luogu.com.cn/problem/P1706)：枚举全排列，输出所有可能的排列。

### 个人心得
- **VitrelosTia**：“~~蓝桥杯不愧为暴力杯啊！~~” 表达了对蓝桥杯部分题目可以用暴力枚举解决的感慨。 

---
处理用时：30.81秒
# 题目信息

# [语言月赛202306] 纸条

## 题目描述

zyl 桌上有 $n$ 张纸条（编号 $1\sim n$），他要把这些纸条按被写下的时间的前后顺序排好，但是纸条上不会有日期，zyl 需要自己判断。

zyl 可以根据纸条内容的连贯性来确定**紧跟**在一张纸条之后纸条有哪些。同时，他可以通过纸条的破损程度判断内容不连贯的纸条的时间先后顺序。显然，对于一段连贯内容的最后一张纸条，紧跟在它后面的纸条只能通过破损程度来判断。

现在，你会收到按以下规则给出的，每张纸条的信息：

首先，你会得知在这一段连贯内容中紧跟在这张纸条后面的纸条的数量 $m$。

其次，按照时间前后依次告诉你这些纸条的编号。

如果没有「连贯内容中紧跟在后面的纸条」（即在连贯内容的最后一张，$m = 0$），则会按照破损程度给出紧跟它的下一张纸条的编号，如果没有「按照破损程度紧跟它的下一张纸条」，你会得到一个 $-1$ 信号。

**如果对于这一部分理解有困难，可以参照「输入格式」及「样例组」进行理解。**

请你帮助 zyl 将纸条排序，并将这 $n$ 张纸条按时间顺序排序后的编号输出。

## 说明/提示

### 样例 1 解释

纸条 $2,1,3$ 是内容连贯的纸条，纸条 $5,4$ 是另一组内容连贯的纸条。

### 数据规模与约定

对于 $20\%$ 的数据，$n\leq 5$。  
对于 $100\%$ 的数据，$0\leq m<n\leq 2\times10^{3}$。

## 样例 #1

### 输入

```
5
1 3
2 1 3
0 5
0 -1
1 4```

### 输出

```
2 1 3 5 4```

# AI分析结果

### 综合分析与结论
目前仅提供了一篇题解，该题解思路清晰，先通过建立 `vis` 数组找出排序后的第一张纸条（即开头），因为除开头纸条外其他纸条都会在输入部分被提及。找到开头后，利用 `vector` 存储每张纸条后续纸条的编号，从开头纸条开始依次输出其后续纸条，直到遇到结束标志 `-1`。整体思路清晰，代码实现较为直观，质量较高。

### 所选的题解
- **星级**：4星
- **关键亮点**：巧妙利用数组标记纸条是否在输入中被提及来确定起始纸条；使用 `vector` 动态存储纸条间的顺序关系，方便操作。
- **重点代码及核心实现思想**：
```cpp
vector<int>p[2010];
bool vis[2010];

for(int i=1;i<=n;i++){
    cin >> m;
    if(m)
    for(int j=1;j<=m;j++){
        int x;
        cin >> x;
        vis[x]=1;
        p[i].push_back(x);//vector的插入
    }
    else {
        int x=read();
        if(x>0)vis[x]=1;//注意防止数组越界
        p[i].push_back(x);
    }
}
int s;
for(int i=1;i<=n;i++)if(!vis[i])s=i;//寻找起点
while(1){
    if(s==-1)return 0;//遇到终点，程序结束
    int siz=p[s].size();//这个函数指的是p[s]中的元素个数
    cout <<s<<" ";
    if(p[s][siz-1]==-1)return 0;//s是终点，程序结束
    for(int i=0;i<siz;i++)cout <<p[s][i]<<" ";//依次输出，注意 vector 的下标从0开始
    s=p[p[s][siz-1]][0];//vector 的下标从 0 开始，故最后一个元素的下标为 siz-1
}
```
核心实现思想为：先通过循环读入纸条间的顺序关系并标记纸条是否被提及，之后找出未被提及的纸条作为起始点，再通过循环不断输出当前纸条及其后续纸条，直到遇到结束标志 `-1`。

### 最优的关键思路或技巧
- **思维方式**：通过分析纸条在输入中被提及的特性来确定起始纸条，这是解决本题的关键突破口。
- **数据结构**：使用 `vector` 存储纸条间的顺序关系，利用其动态申请空间和方便查询长度的特性简化代码实现。

### 可拓展之处
同类型题或类似算法套路：此类题目属于拓扑排序的变形，可拓展到其他存在先后顺序关系，且需要通过特定条件确定起始元素的问题。例如，任务调度问题，任务之间存在依赖关系，需要确定执行顺序，可通过类似方法找到起始任务，再按依赖关系依次执行。

### 推荐题目
- P1983 车站分级：通过分析列车停靠站关系，确定车站等级，与本题类似，需分析元素间关系确定顺序。
- P3387 【模板】缩点：涉及有向图中强连通分量的缩点操作，之后根据缩点后的拓扑序解决问题，与本题确定顺序思路相关。
- P1137 旅行计划：根据城市间的道路关系和花费，确定从起点到各城市的最优路径和顺序，可类比本题分析顺序关系的思路。 

---
处理用时：27.03秒
# 题目信息

# [语言月赛202306] 棋

## 题目描述

zyl 和「她」在 $n\times m$ 的格子纸上下五子棋。**「她」总是先手**。

现在你会得知以下信息：

- 格子纸的大小 $n, m$，代表棋盘共 $n$ 行 $m$ 列。
- $n$ 个仅由字符 `~`、`*`、`$` 构成的长度为 $m$ 的字符串（即 $n \times m$ 个字符）。对于第 $i$ 个字符串的第 $j$ 个字符，`~` 表示第 $i$ 行第 $j$ 列的格子是空的，`*` 表示「她」已经在这一格落下棋子，`$` 表示 zyl 已经在这一格落下棋子。

类似于五子棋的基本规则，一局棋局由「先手」开始，双方轮流落子。如果有同一行，同一列，或者同一 $45\degree$ 斜对角线有**同一方**的**连续五个**棋子，那这一方便是胜者。

现在，请你以以下方式判断当前的棋局：如果已有一方获胜，请你判断是哪一方获胜。否则，请你判断当前轮到哪一方落子。

## 说明/提示

### 样例 1 解释
在第三列有连续的五个 `*`，所以「她」获胜了。

### 数据规模与约定

对于前 $40\%$ 的数据，保证没有任何一方获胜。

对于 $100\%$ 的数据， $5\leq n,m \leq 30$，字符串仅由 `~`、`*`、`$` 组成，而且不会出现任意同一行，同一列或是同一 $45\degree$ 斜对角线上有连续 6 个或以上连续且相同的 `*` 或 `$`，并且最多只有一条连续的 $5$ 个 `*` 或 `$`。 `*` 的总数不小于 `$` 的总数，且至多比 `$` 的总数大 $1$。保证输入的字符串至少存在一个字符 `~`。






## 样例 #1

### 输入

```
5 5
~~*~$
***~~
~$*~~
~~*~$
$$*$~
```

### 输出

```
Pleasing!```

# AI分析结果

### 综合分析与结论
该题主要涉及判断五子棋棋局状态，包括判断哪方获胜或轮到哪方落子。题解思路围绕判断棋子数量确定当前落子方，以及通过枚举位置判断是否有一方获胜展开。算法要点在于对棋盘各方向上棋子的遍历与判断。解决难点在于如何优化判断胜方的代码，减少冗余与错误。

### 所选的题解
- **作者：未来姚班zyl (赞：6) - 5星**
    - **关键亮点**：先通过记录`*`和`$`数量判断当前落子方，思路清晰。判断胜方时，先优化方向判断，只考虑四个主要方向的特定端点，减少代码量；进一步利用数组和循环优化，根据方向上坐标差值固定的特点，用`dx`和`dy`数组存储差值，通过循环判断是否有连续五个相同棋子，使代码简洁且可读性高。
    - **个人心得**：无
    - **核心代码实现思想**：用`dx`和`dy`数组存储四个方向上相邻棋子的横纵坐标差值，遍历棋盘每个位置，对每个非空位置，在四个方向上通过循环累加坐标差值判断新位置棋子是否与当前位置相同，若连续四个相同则判定该方向有五子相连。
```cpp
const int dx[4]={0,*,*,*};//*的部分自己推导试一试
const int dy[4]={1,*,*,*};//*的部分自己推导试一试

int l,r;
for(int i=1;i<=n;i++){
    for(int j=1;j<=m;j++){
        if(c[i][j] == '~')continue;
        l += c[i][j]=='*',r += c[i][j]=='#';
        for(int k = 0;k < 4;k++){//枚举四个方向 
            int x = i,y = j;
            bool f = 1;//判断这个方向有没有连续五个相同棋子，先默认有 
            for(int d = 1;d <= 4;d++){
                x += dx[k],y += dy[k];
                if(x<1||y<1||x>n||y>m){
                    f=0;
                    break;
                }
                if(c[x][y]!= c[i][j]){
                    f = 0;
                    break;
                } 
            }
            if(f){//找到了胜方 
                if(c[i][j]=='*')cout <<"Pleasing!";
                else cout <<"zylwins!";
                return 0;
            } 
        }        
    }
} 
```

### 最优关键思路或技巧
利用数组和循环优化代码，通过分析方向上坐标差值固定的特点，用数组存储差值，避免大量重复判断语句，提高代码可读性与简洁性。

### 可拓展之处
同类型题可涉及不同棋盘大小、不同获胜条件（如四子相连等）的棋类棋局判断。类似算法套路可应用于在二维数组中寻找特定连续模式的问题。

### 相似知识点洛谷题目
- P1002 [NOIP2002 普及组] 过河卒：涉及二维数组路径规划，与本题在二维空间操作上有相似性。
- P1048 [NOIP2005 普及组] 采药：虽为背包问题，但在二维数组遍历和条件判断上可类比本题思路。
- P1164 小A点菜：同样在二维数组操作与条件判断方面，与本题有相似知识点考察。 

---
处理用时：25.51秒
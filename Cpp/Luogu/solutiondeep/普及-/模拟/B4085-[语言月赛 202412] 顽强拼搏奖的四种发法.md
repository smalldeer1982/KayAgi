# 题目信息

# [语言月赛 202412] 顽强拼搏奖的四种发法

## 题目描述

在 XCPC 竞赛里，会有若干道题目，一支队伍可以对每道题目提交若干次。我们称一支队伍对一道题目的一次提交是有效的，当且仅当：

- 在本次提交以前，还未通过该题目。
- 本次提交的题目在比赛里最终被该队伍通过了。

注意，事实上，在通过一道题目后，一支队伍仍然可以提交该题目。这样的提交是**无效提交**，同时，无论这样的提交是否通过，都不会影响该队伍**已通过**该题目的状态。

我们按顺序给出本场比赛所有队伍的全部提交记录，每条记录是一个三元组 $(tid_i, pid_i, state_i)$，其中 $tid_i$ 表示提交这条记录的队伍编号，$pid_i$ 表示这条记录所提交的题目编号，$state_i$ 表示这条记录的状态是未通过/通过。

如果一支队伍在比赛里通过了至少 $k$ 道不同的题目，则它们获得了奖牌。

你要求出本场比赛的**顽强拼搏奖**归属于哪支队伍。很遗憾的是，每个主办方对顽强拼搏奖的定义是不同的，因此你需要按如下四种计算方法分别计算获得顽强拼搏奖所归属的队伍编号：

1. 最后一次 AC 记录所对应的队伍。
2. 最后一次**有效** AC 记录所对应的队伍。
3. 未获得奖牌的队伍的最后一次**有效** AC 提交对应的队伍。
4. 最后一次使得一支队伍的通过题目数由 $0$ 变成 $1$ 的提交所对应的队伍。


## 说明/提示

### 样例 1 解释

这个样例共有 $4$ 支队伍，两道题目。解出两道题目的队伍可以获奖。

- 整场比赛的最后一次 AC 提交是第八条记录，$1$ 号队伍提交第二题通过。因此第一种定义计算出的顽强拼搏奖是队伍 $1$；  
- 队伍 $1$ 在第二条记录时就已通过第二题，所以第八条记录不是一条有效提交记录。最后一条 AC 的有效提交记录是第七条。因此第二种定义计算出的顽强拼搏奖是队伍 $2$；  
- 只有队伍 $3$ 没有获奖，它们的最后一次提交是第四条记录，因此按第三种定义计算的顽强拼搏奖是队伍 $3$；  
- 队伍 $4$ 是最后一个通过题目数由 $0$ 题变为 $1$ 题的队伍。其对应的提交记录是第五条。因此按第四种定义计算的顽强拼搏奖是队伍 $4$。

### 数据规模与约定

| 测试点编号 | $n$ | $t$ | $p$ | 特殊约定 |
| :-: | :-: | :-: | :-: | :-: |
| $1$ | $=1$ | $=1$ | $=1$ | 无 |
| $2,3$ | $\leq 100$ | $=1$ | $\leq 100$ | 无 |
| $4,5$ | $\leq 100$ | $\leq 100$ | $=1$ | 无 |
| $6,7$ | $\leq 1000$ | $\leq 100$ | $\leq 100$ | 一支队伍只会通过一道题至多一次 |
| $8,9,10$ | $\leq 1000$ | $\leq 100$ | $\leq 100$ | 无 |

对全部的测试数据，保证 $1 \leq n \leq 1000$，$1 \leq tid_i \leq t \leq 100$，$1 \leq pid_i \leq p \leq 100$，$1 \leq k \leq p$，$0 \leq state_i \leq 1$。

## 样例 #1

### 输入

```
8 4 2 2
1 1 1
1 2 1
2 2 1
3 1 1
4 1 1
4 2 1
2 1 1
1 2 1```

### 输出

```
1 2 3 4```

# AI分析结果

### 综合分析与结论
该题要求根据不同规则确定获得顽强拼搏奖的队伍编号，题解通过读入提交记录、判定队伍是否获奖，再重新遍历记录按规则判定奖项。整体思路较清晰，但仅提供一篇题解，需从该题解分析其优缺点。
优点：思路表述较为清晰，从读入、获奖判定到奖项判定逐步讲解，代码片段能辅助理解。
缺点：代码片段不完整，部分变量未声明，整体代码可读性受影响，且无算法优化相关内容。综合评定，该题解为3星。由于没有≥4星的题解，不列出具体题解，以下给出通用建议与扩展思路。

### 通用建议与扩展思路
 - **关键思路与技巧**：使用二维数组记录提交记录，通过数组标记队伍通过题目情况，利用多次遍历数组实现不同规则的判定。这种基于数组的模拟方法，能直观地处理数据，在解决这类需要记录和查询多种状态的问题时很有效。
 - **可拓展之处**：同类型题可涉及更多复杂的比赛规则模拟，如不同题目权重不同、多次提交对成绩有不同影响等。类似算法套路是对于规则明确的模拟问题，先梳理清楚规则，再选择合适的数据结构存储数据，最后按照规则遍历数据得出结果。
 - **洛谷相似题目推荐**：
    - P1032 [NOIP2002 普及组] 字串变换：涉及字符串变换规则模拟。
    - P1249 最大乘积：通过模拟不同方案计算最大乘积，考察对规则的理解与实现。
    - P1080 [NOIP2012 提高组] 国王游戏：同样是基于规则的模拟与计算，需考虑数据处理顺序。 

---
处理用时：14.56秒
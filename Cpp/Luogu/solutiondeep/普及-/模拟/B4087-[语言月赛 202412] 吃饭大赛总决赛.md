# 题目信息

# [语言月赛 202412] 吃饭大赛总决赛

## 题目背景

声明：本题的晋级规则纯属虚构，与真正的 ICPC 竞赛 EC Fianl 晋级规则有所区别。

## 题目描述


在 ICPC（Interactive Clever Pig Contest，交互聪明猪猪大赛）中表现出色的猪猪队伍可以晋级至吃饭大赛总决赛（Eating Contest Final，EC Final）。

共有 $m$ 场 ICPC 比赛，从 $1$ 到 $m$ 编号，每场比赛有**至多** $t$ 支猪猪队伍参与。  
有 $n$ 条比赛排名记录，每一条中包含了一支队伍在某场比赛中取得的成绩信息，分别是队伍名称、三个猪队员的名字、比赛编号和队伍排名。
我们认为不同猪的名字互不相同，名字相同的猪一定是同一只猪。同时，我们认为每一条记录都是一个新的队伍所打出的成绩。即使队伍名称和猪的名字与之前的队伍相同，也认为是一个新的队伍。
同时，数据保证：

- 一支队伍恰好有三个不同的猪队员；
- 对于某场比赛，所有记录中的队伍排名互不相同；
- 对于某场比赛，所有记录中的队伍的猪队员互不相同；
- 对于某场比赛，如果存在排名为 $r$（$r \ne 1$）的队伍，那么记录中一定存在排名为 $r-1$ 的队伍。

你需要求出所有可以晋级至 EC Final 的队伍的名称。晋级 EC Final 的规则如下：

定义一支队伍可以晋级至 EC Final 当且仅当该队伍的所有猪成员现在都还没有晋级至 EC Final；  
接下来进行至多 $k$ 次操作，如果不存在可以晋级的队伍，则停止操作。否则，会选出一个可以晋级的队伍晋级至 EC Final；这支队伍需要满足：在所有可以晋级的队伍中，它的排名是最小的；如果有多支队伍满足条件，则选择比赛编号最小的队伍。

## 说明/提示

### 样例 1 解释

共有两场比赛，排名情况如下：
| | 比赛 1 | 比赛 2 |
|:-:|:-:|:-:|
|第 $1$ 名 |longname(dx fr woruo)|quntongtai(fr fusu woruo) | 
| 第 $2$ 名|sdutcs(wtz ysl zay) | longname(booot boot bot)|

按如下方法选出晋级队伍：

- 首先找到排名最小可晋级的队伍 `longname(dx fr woruo)` 和 `quntongtai(fr fusu woruo)`，其中前者的比赛编号更小，所以前者的队伍晋级。
- 接下来，因为 `fr` 和 `woruo` 已经晋级，所以队伍 `quntongtai(fr fusu woruo)` 失去了晋级 EC Final 的资格。
- 接下来，找到两场比赛的第二名的队伍，用类似的方法依次选择它们晋级 EC Final。

### 数据规模与约定

| 测试点编号 | 特殊约定 |
| :---: | :---: |
| $1$    | $k = 1$ |
| $2,3$    | $m = 1$ |
| $4,5$    | $t = 1$ |
| $6,7$ | 每只猪只会参加一场比赛 |
| $8,9,10$    | 无 |

对于所有数据，保证 $1 \leq k \leq 1000$，$1 \le id \leq m \le 100$，$1 \le r \leq t \leq 100$，$1 \leq n \leq m \times t$，输入的所有字符串的长度不超过 $10$，字符串仅含小写英文字母，每支队伍的三个队员名字互不相同，输入的每条记录互不相同。

### 提示

请注意，输入**不**保证一场比赛里的所有队伍名字不同，也**不**保证猪队员的名字和队伍名字不同。

## 样例 #1

### 输入

```
4 2 2 3
quntongtai fr fusu woruo 2 1
sdutcs wtz ysl zay 1 2
longname dx fr woruo 1 1
longname booot boot bot 2 2```

### 输出

```
3
longname dx fr woruo
sdutcs wtz ysl zay
longname booot boot bot```

# AI分析结果

### 综合分析与结论
该题主要考查结构体、数组的运用以及逻辑判断。一扶苏一的题解思路清晰，通过定义结构体存储队伍信息，利用二维数组存储比赛排名，再通过双重循环遍历排名和比赛编号来判断队伍是否晋级。算法要点在于结构体的合理定义和数据的有序存储与遍历。解决难点在于如何准确判断队伍成员是否已晋级以及按规则筛选晋级队伍。整体来看，该题解思路清晰，代码实现较为直观，但在数据规模较大时可能存在性能问题，未进行明显优化。综合评分3星。由于所有题解均未达到4星，以下给出通用建议与扩展思路。

### 通用建议与扩展思路
 - **数据结构优化**：当数据规模较大时，使用哈希表来判断队员是否晋级可能比线性遍历数组更高效，可将队员姓名作为键，判断是否存在于哈希表中。
 - **算法优化**：在筛选晋级队伍时，可以提前对数据进行预处理，例如将每场比赛的队伍按排名和比赛编号排序，这样在选择晋级队伍时可以更快地定位符合条件的队伍。
 - **同类型题或类似算法套路**：此类题目通常围绕数据的存储、筛选和排序展开。常见套路是根据题目要求合理设计数据结构，再依据条件进行数据处理。例如在处理比赛排名、人员信息等场景下，可借鉴本题思路。

### 相似知识点洛谷题目推荐
 - [P1036 选数](https://www.luogu.com.cn/problem/P1036)：考查对数组的操作以及逻辑判断，通过组合数的方式筛选符合条件的数据。
 - [P1161 开灯](https://www.luogu.com.cn/problem/P1161)：涉及数组的运用和逻辑判断，通过对数组元素的操作来模拟开灯关灯的过程。
 - [P1423 小玉在游泳](https://www.luogu.com.cn/problem/P1423)：需要根据题目给定的规则，运用逻辑判断和循环结构来解决问题，与本题在逻辑处理上有相似之处。 

---
处理用时：15.06秒
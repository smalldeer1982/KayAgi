# 题目信息

# [NOIP 2002 提高组] 均分纸牌

## 题目描述

有 $N$ 堆纸牌，编号分别为 $1,2,\ldots,N$。每堆上有若干张，但纸牌总数必为 $N$ 的倍数。可以在任一堆上取若干张纸牌，然后移动。

移牌规则为：在编号为 $1$ 堆上取的纸牌，只能移到编号为 $2$ 的堆上；在编号为 $N$ 的堆上取的纸牌，只能移到编号为 $N-1$ 的堆上；其他堆上取的纸牌，可以移到相邻左边或右边的堆上。

现在要求找出一种移动方法，用最少的移动次数使每堆上纸牌数都一样多。

例如 $N=4$ 时，$4$ 堆纸牌数分别为 $9,8,17,6$。

移动 $3$ 次可达到目的：

- 从第三堆取 $4$ 张牌放到第四堆，此时每堆纸牌数分别为 $9,8,13,10$。
- 从第三堆取 $3$ 张牌放到第二堆，此时每堆纸牌数分别为 $9,11,10,10$。
- 从第二堆取 $1$ 张牌放到第一堆，此时每堆纸牌数分别为  $10,10,10,10$。


## 说明/提示

对于 $100\%$ 的数据，$1  \le  N  \le  100$，$1 \le  A_i  \le 10000$。

**【题目来源】**

NOIP 2002 提高组第一题

## 样例 #1

### 输入

```
4
9 8 17 6
```

### 输出

```
3
```

# AI分析结果

### 综合分析与结论
这几道题解均围绕“均分纸牌”问题展开，核心思路都是通过贪心策略来求解最少移动次数。
 - **思路**：大多题解先计算出每堆纸牌应达到的平均数，然后从左到右遍历各堆纸牌，根据当前堆纸牌数与平均数的差值，决定是向相邻堆“借”还是“给”纸牌，同时记录移动次数。
 - **算法要点**：关键在于如何根据当前堆的状态，合理地与相邻堆进行纸牌转移，且保证移动次数最少。线性算法（O(n)）是普遍采用的高效解法。
 - **解决难点**：难点在于证明贪心策略的正确性，部分题解通过分治算法的正确性来推导线性算法的正确性，有的则从引理出发，通过对最优策略的分析来证明。

### 所选的题解
#### 作者：monell (5星)
 - **关键亮点**：不仅给出线性算法（O(n)），还给出分治算法（O(n^2)），并详细证明了线性算法的正确性。通过操作序列和图建模的方式，清晰展示了线性算法与分治算法最优解的等价性。
 - **个人心得**：无
 - **核心代码（线性算法）**：
```cpp
// 从左到右遍历数组
for (int i = 0; i < n - 1; ++i) {
    if (a[i] > avg) {
        a[i + 1] += a[i] - avg;
        moveCount++;
    } else if (a[i] < avg) {
        a[i + 1] += a[i] - avg;
        moveCount++;
    }
}
```
核心思想：遍历数组，若当前堆纸牌数大于平均数，将多余部分移到下一堆；若小于平均数，从下一堆“借”相应数量，每次操作移动次数加1。

#### 作者：ProtectEMmm (4星)
 - **关键亮点**：详细证明了贪心策略的正确性，通过引理说明任意两堆相邻牌堆最优策略是从一堆往另一堆一次性给牌，不存在来回给牌情况，并对有向图无环进行了分析，解释了贪心思路下允许牌堆出现负数不影响正确性的原因。
 - **个人心得**：在与他人讨论中完善思路，指出在证明过程中对一些疑问的思考和解决过程。
 - **核心代码**：
```cpp
for (int i = 1; i + 1 <= n; ++i) {
    if (arr[i]!= average) {
        ans++, arr[i + 1] += arr[i] - average;
    }
}
```
核心思想：遍历相邻牌堆，若当前堆牌数不等于平均数，将差值加到下一堆，同时移动次数加1。

#### 作者：Starlight237 (4星)
 - **关键亮点**：代码简洁明了，指出在遍历过程中不管当前牌堆纸牌数与平均数的大小关系，下一堆都会增加当前牌数与平均数的差值，无需多余条件判断，优化了代码运行速度。
 - **个人心得**：无
 - **核心代码**：
```cpp
for(int i=0;i<n-1;++i)
    if(a[i]!=avg)a[i+1]+=a[i]-avg,++m;
```
核心思想：遍历各堆纸牌，若当前堆纸牌数不等于平均数，直接将差值加到下一堆，移动次数加1。

### 最优关键思路或技巧
1. **贪心策略**：从左到右依次处理每堆纸牌，根据与平均数的差值直接决定向相邻堆转移纸牌的数量，无需考虑全局复杂情况，局部最优解可得到全局最优解。
2. **简化操作**：在代码实现上，利用当前堆与下一堆的关系，简化条件判断，减少不必要操作，提高运行效率。

### 可拓展之处
同类型题可拓展到环形均分纸牌问题，如洛谷的“负载平衡问题”（P4016），这类问题可通过寻找断点转化为普通均分纸牌问题求解。类似算法套路是先确定目标状态（如平均数），再根据给定的移动规则，采用贪心策略逐步调整每个元素，使整体达到目标状态。

### 推荐题目
1. **P1223 排队接水**：通过贪心策略，按照接水时间从小到大排序，计算所有人的等待时间之和，与本题贪心思想类似。
2. **P1094 纪念品分组**：运用贪心算法，对数据进行排序后，通过双指针法将纪念品分组，使组数最少。
3. **P1199 三国游戏**：需要分析游戏规则，采用贪心策略选择武将，以获取最大得分。 

---
处理用时：32.05秒
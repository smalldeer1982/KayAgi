# 题目信息

# [NOIP 2007 提高组] 字符串的展开

## 题目描述

在初赛普及组的“阅读程序写结果”的问题中，我们曾给出一个字符串展开的例子：如果在输入的字符串中，含有类似于 `d-h` 或者 `4-8` 的字串，我们就把它当作一种简写，输出时，用连续递增的字母或数字串替代其中的减号，即，将上面两个子串分别输出为 `defgh` 和 `45678`。在本题中，我们通过增加一些参数的设置，使字符串的展开更为灵活。具体约定如下：

(1) 遇到下面的情况需要做字符串的展开：在输入的字符串中，出现了减号 `-` ，减号两侧同为小写字母或同为数字，且按照 `ASCII` 码的顺序，减号右边的字符严格大于左边的字符。

(2) 参数 $p_1$：展开方式。$p_1=1$ 时，对于字母子串，填充小写字母；$p_1=2$ 时，对于字母子串，填充大写字母。这两种情况下数字子串的填充方式相同。$p_1=3$ 时，不论是字母子串还是数字字串，都用与要填充的字母个数相同的星号 `*` 来填充。

(3) 参数 $p_2$：填充字符的重复个数。$p_2=k$ 表示同一个字符要连续填充 $k$ 个。例如，当 $p_2=3$ 时，子串`d-h` 应扩展为 `deeefffgggh`。减号两边的字符不变。

(4) 参数 $p_3$：是否改为逆序：$p_3=1$ 表示维持原来顺序，$p_3=2$ 表示采用逆序输出，注意这时候仍然不包括减号两端的字符。例如当 $p_1=1$、$p_2=2$、$p_3=2$ 时，子串 `d-h` 应扩展为 `dggffeeh`。

(5) 如果减号右边的字符恰好是左边字符的后继，只删除中间的减号，例如：`d-e` 应输出为 `de`，`3-4` 应输出为 `34`。如果减号右边的字符按照 `ASCII` 码的顺序小于或等于左边字符，输出时，要保留中间的减号，例如：`d-d` 应输出为 `d-d`，`3-1` 应输出为 `3-1`。


## 说明/提示

$40\%$ 的数据满足：字符串长度不超过 $5$。

$100\%$ 的数据满足：$1  \le  p_1  \le  3,1  \le  p_2  \le  8,1  \le  p_3  \le  2$。字符串长度不超过 $100$。

NOIP 2007 提高第二题


## 样例 #1

### 输入

```
1 2 1
abcs-w1234-9s-4zz```

### 输出

```
abcsttuuvvw1234556677889s-4zz```

## 样例 #2

### 输入

```
2 3 2
a-d-d```

### 输出

```
aCCCBBBd-d```

# AI分析结果

这是一道字符串模拟题，核心在于按给定规则处理含减号的子串。各题解思路相近，均遍历字符串，判断减号是否满足展开条件，再依参数$p_1$、$p_2$、$p_3$处理。

1. **思路与要点**
    - **遍历判断**：遍历字符串，判断字符是否为减号，且减号两侧字符类型相同（同为小写字母或数字），同时右边字符ASCII码大于左边。
    - **参数处理**：依$p_1$确定填充方式（小写字母、大写字母或星号），$p_2$确定填充字符重复次数，$p_3$确定顺序（正序或逆序）。
    - **特殊情况**：减号右侧字符是左侧后继，删除减号；右侧字符ASCII码小于等于左侧，保留减号。
2. **难点**
    - **条件判断复杂**：需综合考虑多种条件，如减号位置、两侧字符类型与大小关系。
    - **参数组合多**：$p_1$、$p_2$、$p_3$不同取值组合，增加处理复杂性。
3. **题解评分**
    - **Narcisuss**：思路清晰，利用三目运算符简化代码，可读性好，得5星。
    - **Avenoir**：介绍相关头文件函数，对初学者有益，代码逻辑清晰，得4星。
    - **Eason_AC**：详细分析特判与过程，代码注释详细，但优化不足，得3星。
4. **最优思路技巧**
    - **Narcisuss**：用三目运算符代替部分循环，简化代码结构，减少冗余。
    - **Avenoir**：合理使用`<cctype>`和`<string>`头文件函数，减少手写代码量，提高效率。
5. **拓展**
    - **同类型题**：字符串处理中按特定规则替换、扩展子串的题目。
    - **算法套路**：先明确规则，再遍历字符串，依规则处理各字符或子串，注意特殊情况。
6. **推荐题目**
    - P1308 统计单词数
    - P1593 因子和阶乘
    - P2219 无聊的数列

### 5星题解
- **作者**：Narcisuss
- **星级**：5星
- **关键亮点**：通过三目运算符简化代码，使代码简洁明了。
```cpp
#include<bits/stdc++.h>
using namespace std;
int p1,p2,p3,i=0,k;
char ch[300],be,af,f,j,p; 
int main() {
    scanf("%d%d%d%s",&p1,&p2,&p3,ch);
    while(ch[i]){
        be=ch[i - 1];af=ch[i + 1];f=ch[i];
        if(f=='-'&&af>be&&(be>='0'&&af<='9'||be>='a'&&af<='z')){
            for(p3==1?j=be + 1:j=af - 1; p3==1?j<af:j>be; p3==1?j++:j--){
                p=j;
                if(p1==2)
                    p=(p>='a')?p - 32:p;
                else if(p1==3) p='*';
                for(k=0; k<p2; k++)
                    printf("%c",p);
            }
        } 
        else
            printf("%c",f);
        i++;
    }
    return 0;
}
```
核心实现思想：遍历字符串，判断减号及两侧字符条件，满足则按参数$p_1$、$p_3$确定循环方式与填充字符，按$p_2$重复输出填充字符；不满足则原样输出字符。

### 4星题解
- **作者**：Avenoir
- **星级**：4星
- **关键亮点**：详细介绍`<cctype>`和`<string>`头文件函数，代码逻辑清晰。
```cpp
#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
#include<string>
#include<cctype>
using namespace std;
int main(){
    ios::sync_with_stdio(false);
    int p1,p2,p3;
    string s;
    cin>>p1>>p2>>p3>>s;
    for(register int i = 1; i < s.length() - 1; i++){
        if(s[i]=='-'&&((islower(s[i - 1])&&islower(s[i + 1])&&s[i - 1]<s[i + 1])||(isdigit(s[i - 1])&&isdigit(s[i + 1])&&s[i - 1]<s[i + 1]))){
            if(p1==1){
                s.erase(i,1);
                string spare = "";
                for(register int k = s[i - 1]+1; k <= s[i]-1; k++){
                    char ch = k;
                    for(register int j = 1; j <= p2; j++) spare.push_back(ch);
                }
                if(p3==2) reverse(spare.begin(),spare.end());
                s.insert(i,spare);
            }
            else if(p1==2){
                s.erase(i,1);
                string spare = "";
                for(register int k = s[i - 1]+1; k <= s[i]-1; k++){
                    char ch = k;
                    ch=toupper(ch);
                    for(register int j = 1; j <= p2; j++) spare.push_back(ch);
                }
                if(p3==2) reverse(spare.begin(),spare.end());
                s.insert(i,spare);
            }
            else if(p1==3){
                s.erase(i,1);
                string spare = "";
                for(register int k = s[i - 1]+1; k <= s[i]-1; k++)
                    for(register int j = 1; j <= p2; j++) spare.push_back('*');
                if(p3==2) reverse(spare.begin(),spare.end());
                s.insert(i,spare);
            }
        }
    }
    cout<<s<<endl;
    return 0;
}
```
核心实现思想：遍历字符串，判断减号及两侧字符条件，满足则依$p_1$处理子串，生成备用字符串，再依$p_3$决定是否翻转，最后插入原字符串。 

---
处理用时：53.40秒
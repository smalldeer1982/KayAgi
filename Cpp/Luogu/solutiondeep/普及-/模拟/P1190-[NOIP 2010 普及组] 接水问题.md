# 题目信息

# [NOIP 2010 普及组] 接水问题

## 题目描述

学校里有一个水房，水房里一共装有 $m$ 个龙头可供同学们打开水，每个龙头每秒钟的供水量相等，均为 $1$。

现在有 $n$ 名同学准备接水，他们的初始接水顺序已经确定。将这些同学按接水顺序从 $1$ 到 $n$ 编号，$i$ 号同学的接水量为 $w_i$。接水开始时，$1$ 到 $m$ 号同学各占一个水龙头，并同时打开水龙头接水。当其中某名同学 $j$ 完成其接水量要求 $w_j$ 后，下一名排队等候接水的同学 $k$ 马上接替 $j$ 同学的位置开始接水。这个换人的过程是瞬间完成的，且没有任何水的浪费。即 $j$ 同学第 $x$ 秒结束时完成接水，则 $k$ 同学第 $x+1$ 秒立刻开始接水。若当前接水人数 $n'$ 不足 $m$，则只有 $n'$ 个龙头供水，其它 $m - n'$ 个龙头关闭。

现在给出 $n$ 名同学的接水量，按照上述接水规则，问所有同学都接完水需要多少秒。


## 说明/提示

【输入输出样例 \#1 说明】

第 $1$ 秒，$3$ 人接水。第 $1$ 秒结束时，$1,2,3$ 号同学每人的已接水量为 $1,3$ 号同学接完水，$4$ 号同学接替 $3$ 号同学开始接水。

第 $2$ 秒，$3$ 人接水。第 $2$ 秒结束时，$1,2$ 号同学每人的已接水量为 $2,4$ 号同学的已接水量为 $1$。

第 $3$ 秒，$3$ 人接水。第 $3$ 秒结束时，$1,2$ 号同学每人的已接水量为 $3,4$ 号同学的已接水量为 $2$。$4$ 号同学接完水，$5$ 号同学接替 $4$ 号同学开始接水。

第 $4$ 秒，$3$ 人接水。第 $4$ 秒结束时，$1,2$ 号同学每人的已接水量为 $4,5$ 号同学的已接水量为 $1$。$1,2,5$ 号同学接完水，即所有人完成接水的总接水时间为 $4$ 秒。

【数据范围】

$1 \le n \le {10}^4$，$1 \le m \le 100$，$m \le n$；

$1 \le w_i \le 100$。

NOIP2010 普及组 第二题


## 样例 #1

### 输入

```
5 3
4 4 1 2 1
```

### 输出

```
4```

## 样例 #2

### 输入

```
8 4
23 71 87 32 70 93 80 76
```

### 输出

```
163```

# AI分析结果

• 综合分析与结论：这些题解主要围绕模拟和贪心两种思路。模拟思路是按照接水规则，逐秒模拟接水过程，判断是否有同学接完水并安排下一位同学。贪心思路基于让每个水龙头接水量的最大值最小化原则，每次将当前同学的接水量加到目前接水量最小的水龙头上。算法要点包括数组、优先队列、排序等操作。难点在于准确把握接水规则并转化为代码逻辑，如确定循环终止条件、选择合适的数据结构维护接水状态。

所选的题解：
  - **作者：lk_liang (5星)**
    - **关键亮点**：思路清晰，代码简洁，通过数组模拟每个水龙头的接水情况，用一个循环模拟每秒的接水过程，易于理解。
    - **个人心得**：作者提到改进题解后未通过审核的疑惑。
    - **核心代码实现思想**：用数组 `s` 记录每个水龙头对应的学生接水量，循环中每秒对每个水龙头的接水量减1，若接完则安排下一个学生，用 `t` 记录下一个等待接水的学生编号，循环直到所有学生接完水。
    - **核心代码片段**：
```cpp
while(t<=n+m)
{
    for(int i=1;i<=m;i++) 
    {
        s[i]--;
        if(s[i]==0)
        {
            s[i]=s[t]; 
            t++; 
        }
    }
    ans++; 
}
```
  - **作者：xxckie (4星)**
    - **关键亮点**：从找最快接完水的水龙头位置角度出发，利用数组前m个位置储存接水时间之和，通过排序找到总用时最短位置来安排下一个同学接水，思路独特。
    - **核心代码实现思想**：先输入接水时间，从第m + 1个人开始，每次排序前m个位置找到总用时最短的，将当前同学时间加到该位置，最后再排序输出最大的时间。
    - **核心代码片段**：
```cpp
for(int i=m+1;i<=n;i++)
{
    sort(a+1,a+1+m);
    a[1]=a[1]+a[i];
}
sort(a+1,a+1+m,cmp);
cout<<a[1];
```
  - **作者：WsW_ (4星)**
    - **关键亮点**：利用优先队列（堆）维护正在接水的人的接水结束时间，每次取出最早结束的并安排下一个人，时间复杂度为 $O(n \log n)$，效率较高。
    - **核心代码实现思想**：先将前m个人的接水时间加入优先队列，之后从第m + 1个人开始，取出队顶（最早结束时间），加上当前同学接水时间后再加入队列，最后输出队列中最大的时间。
    - **核心代码片段**：
```cpp
for(int i=1;i<=m;i++){
    scanf("%d",&w);
    q.push(w);
}
for(int i=1;i<=n-m;i++){
    t=q.top();
    q.pop();
    scanf("%d",&w);
    q.push(t+w);
}
while(q.size()>1)q.pop();
printf("%d",q.top());
```

最优关键思路或技巧：使用优先队列（小根堆）维护接水状态，能高效地找到最早接完水的水龙头，从而安排下一个同学接水，时间复杂度较低。

可拓展思路：此类题目属于排队模拟和贪心策略结合的问题，类似题目可能会改变接水规则、增加限制条件等。比如改变水龙头的供水速度，或者不同同学有不同的优先级等。

推荐洛谷题目：
  - P1094 [NOIP2007 普及组] 纪念品分组
  - P1223 排队接水
  - P1781 宇宙总统 

---
处理用时：37.53秒
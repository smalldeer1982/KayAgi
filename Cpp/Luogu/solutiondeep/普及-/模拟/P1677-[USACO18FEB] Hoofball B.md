# 题目信息

# [USACO18FEB] Hoofball B

## 题目描述

为了准备即将到来的蹄球锦标赛，Farmer John 正在训练他的 $N$ 头奶牛（方便起见，编号为 $1\ldots N$，其中 $1\le N\le 100$）进行传球。这些奶牛在牛棚一侧沿直线排列，第 $i$ 号奶牛位于距离牛棚 $x_i$ 的地方（$1\le x_i\le 1000$）。每头奶牛都在不同的位置上。

在训练开始的时候，Farmer John 会将若干个球传给不同的奶牛。当第 $i$ 号奶牛接到球时，无论是从 Farmer John 或是从另一头奶牛传来的，她会将球传给最近的奶牛（如果有多头奶牛与她距离相同，她会传给其中距左边最远的那头奶牛）。为了使所有奶牛都有机会练习到传球，Farmer John 想要确保每头奶牛都持球至少一次。帮助他求出为了达到这一目的他开始时至少要传出的球的数量。假设他在开始的时候能将球传给最适当的一组奶牛。 

## 说明/提示

在上面的样例中，Farmer John 应该将球传给位于 $x=1$ 的奶牛和位于 $x=11$ 的奶牛。位于 $x=1$ 的奶牛会将她的球传给位于 $x=3$ 的奶牛，在此之后这个球会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。位于 $x=11$ 的奶牛会将她的球传给位于 $x=7$ 的奶牛，然后球会被传给位于 $x=4$ 的奶牛，在此之后这个球也会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。这样的话，所有的奶牛都会至少一次接到球（可能从 Farmer John，也可能从另一头奶牛）。

可以看出，不存在这样一头奶牛，Farmer John 可以将球传给她之后所有奶牛最终都能被传到球。 

## 样例 #1

### 输入

```
5
7 1 3 11 4```

### 输出

```
2```

# AI分析结果

• 综合分析与结论：这些题解思路总体一致，均先对奶牛位置排序，将问题简化为奶牛向左右两侧较近的奶牛传球。算法要点在于统计每头奶牛的入度（即能接到球的次数），并找出入度为0的奶牛，因为这些奶牛必须由Farmer John发球。难点在于处理存在两头奶牛相互传球且不与其他奶牛交互的情况，此情况下也需额外发球。部分题解通过特判解决，部分则利用DFS等方法处理。
- **Silent1019**：★★★★
  - **关键亮点**：思路清晰，代码简洁。通过两个数组分别记录奶牛传球方向和接球次数，直接模拟传球过程，最后通过两次遍历统计答案，考虑到距离计算可能溢出问题，设置合适的INF值。
  - **重点代码**：
```cpp
sort(a+1,a+n+1);
a[0]=-INF; a[n+1]=INF;
for(int i=1;i<=n;i++)
    if(a[i]-a[i-1]>a[i+1]-a[i]){
        to[i]=i+1;
        cnt[i+1]++;
    }else{
        to[i]=i-1;
        cnt[i-1]++;
    }
for(int i=1;i<=n;i++)
    if(!cnt[i]) ans++;
for(int i=1;i<=n;i++)
    if(cnt[i]==1&&cnt[i+1]==1&&to[i]==i+1&&to[i+1]==i)
        ans++;
```
  - **核心实现思想**：排序后，根据奶牛左右两侧距离确定传球方向并记录，统计每头奶牛接球次数，先统计入度为0的奶牛，再特判相互传球的奶牛对，累加得到答案。
- **Je_son**：★★★★
  - **关键亮点**：思路表述简洁明了，代码结构清晰。同样通过模拟传球过程统计入度，利用数组记录传球关系，对入度为0和相互传球的情况分别处理。
  - **重点代码**：
```cpp
sort(a + 1, a + 1 + n);
for(int i = 1; i <= n; i ++ ){
    if(a[i] - a[i - 1] <= a[i + 1] - a[i])
        cnt[i - 1] ++, to[i] = i - 1;
    else
        cnt[i + 1] ++, to[i] = i + 1;
}
for(int i = 1; i <= n; i ++ )
    if(!cnt[i])
        res ++ ;
for(int i = 2; i <= n; i ++ )
    if(to[i - 1] == i && to[i] == i - 1 && cnt[i - 1] == 1 && cnt[i] == 1)
        res ++ ;
```
  - **核心实现思想**：排序后模拟传球确定每头奶牛接球次数和传球方向，先统计入度为0的奶牛数量，再遍历判断相互传球的奶牛对并累加答案。
- **_Dynamic_Programming**：★★★★
  - **关键亮点**：思路清晰，详细阐述每一步操作。通过数组分别记录奶牛入度和传出方向，按步骤统计入度为0的奶牛和相互传球的奶牛对。
  - **重点代码**：
```cpp
sort(x + 1, x + n + 1);
for(int i = 1; i <= n; i++){
    if(x[i] - x[i - 1] <= x[i + 1] - x[i]) in[i - 1]++, out[i] = i - 1;
    else in[i + 1]++, out[i] = i + 1;
}
int ans = 0;
for(int i = 1; i <= n; i++)
    if(in[i] == 0) ans++;
for(int i = 1; i < n; i++)
    if(in[i] == 1 && in[i + 1] == 1 && out[i] == i + 1 && out[i + 1] == i)
        ans++;
```
  - **核心实现思想**：排序后确定每头奶牛的入度和传球方向，遍历统计入度为0的奶牛，再判断相邻奶牛相互传球的情况，累计得到答案。

• 最优关键思路或技巧：先对奶牛位置排序简化问题，通过数组模拟传球过程统计每头奶牛的入度和传球方向，利用两次遍历分别处理入度为0的奶牛和相互传球的奶牛对，从而得出最少发球数。

• 可拓展之处：此类题属于图论中简单的连通性问题拓展，类似套路是将实际问题抽象为图结构，通过统计节点入度等信息解决。如一些涉及物品传递、人员关系等单向或双向传递且需确定起始点的问题。

• 相似知识点洛谷题目：
  - P1129 [ZJOI2007] 矩阵游戏：涉及二分图匹配，与本题通过分析元素关系解决问题思路类似。
  - P1330 封锁阳光大学：图的遍历与节点状态判断，类似本题对奶牛传球关系的分析处理。
  - P2746 星际转移问题：图论中的网络流问题，在构建图模型解决实际问题方面有相似性。

• 个人心得摘录与总结：
  - **jianglai0119**：最初思路仅考虑入度为0的节点，忽略了存在两个节点互相传球的环的情况，通过反例发现错误并改进算法。总结出做题要全面考虑各种情况，不能遗漏特殊情况。 

---
处理用时：48.30秒
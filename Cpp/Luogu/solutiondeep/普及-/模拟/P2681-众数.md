# 题目信息

# 众数

## 题目背景

Alice 和 Bob 玩游戏。



## 题目描述

Alice 现在有一个序列 $a_1,a_2,...a_n$。

现在她需要 Bob 支持询问一个区间内的众数,还要支持修改一个位置的 $a_i$。

## 说明/提示

对于 $100\%$ 的数据 $n,m \le 1000$。

对于查询操作满足 $x\le y$。

任意时刻 $0<a_i\le 10^9$。

## 样例 #1

### 输入

```
5 3
1 1 2 2 1
0 1 4
1 2 3
0 1 4```

### 输出

```
1
2```

# AI分析结果

### 综合分析与结论
所有题解均利用题目数据规模小（\(n,m \le 1000\)）的特点采用暴力模拟的方法解决问题，主要思路为处理修改操作和查询众数操作。各题解在实现细节上有所不同，如统计众数方法、数据结构使用等。

### 所选题解
- **作者：mike_he (5星)**
    - **关键亮点**：思路清晰，代码简洁明了。使用`map<int, int>`记录数字出现次数，在查询时遍历区间更新众数，若出现次数相同则取较小值。
    - **核心代码**：
```cpp
while(Q--){
    int l,r;
    map<int,int> idx;
    ans=10000; //初始化
    maxn=-100000000; //初始化
    cin>>fl>>l>>r;
    if(fl){
        a[l]=r;
    }else{
        for(int i=l;i<=r;++i){
            idx[a[i]]+=1; //a[i]出现次数+1
            if(idx[a[i]]>maxn){
                maxn=idx[a[i]];
                ans=a[i];
            }else if(idx[a[i]]==maxn){ //判断谁更小
                ans=(ans>a[i]?a[i]:ans);
            }
        }
        cout<<ans<<endl;
    }
}
```
    - **核心思想**：每次查询时，利用`map`统计区间内每个数字出现次数，在更新最大出现次数时同时更新众数，若出现次数相同则比较并选择较小值作为众数。修改操作直接改变数组对应位置的值。

- **作者：Camorgx (4星)**
    - **关键亮点**：使用C++11的`unordered_map`，相比普通`map`查找和插入效率更高。采用快读优化输入，代码风格简洁，逻辑清晰。
    - **核心代码**：
```cpp
inline int work(int l,int r) {
    int anss=-1,ans[1001],tot=0,res=0x7fffffff;
    m.clear();//千万别忘了
    for(int i=l,j=1;i<=r;++i,++j) m[a[i]]++;
    for(auto i=m.begin();i!=m.end();i++) //懒人就要用auto
        if(anss<i->second) anss=i->second;
    for(auto i=m.begin();i!=m.end();i++) 
        if(anss==i->second) ans[++tot]=i->first;//因为众数可能不止一个，所以要先存起来再找
    for(int i=1;i<=tot;++i) if(res>ans[i]) res=ans[i];
    return res;
}
```
    - **核心思想**：`work`函数负责查询众数，先清空`unordered_map`，遍历区间统计每个数字出现次数，找出最大出现次数，再找出所有具有最大出现次数的数字，从中选择最小值作为众数返回。修改操作直接改变数组对应位置的值。

### 最优关键思路或技巧
利用数据范围小的特点采用暴力模拟。使用`map`或`unordered_map`统计数字出现次数，能高效处理查询众数操作。同时，在处理众数可能有多个且需取最小值的情况时，合理的逻辑判断和数据处理方法很关键。

### 可拓展思路
对于更大数据规模，可考虑线段树等数据结构优化查询和修改操作。类似算法套路如处理区间统计问题，可根据数据范围和操作类型选择合适的数据结构与算法。

### 洛谷相似题目
- [P1996 约瑟夫问题](https://www.luogu.com.cn/problem/P1996)：考察模拟算法。
- [P1036 [NOIP2002 普及组] 选数](https://www.luogu.com.cn/problem/P1036)：涉及暴力枚举与简单数论知识。
- [P1161 开灯](https://www.luogu.com.cn/problem/P1161)：通过模拟操作解决问题，与本题思路有相似之处。 

---
处理用时：55.44秒
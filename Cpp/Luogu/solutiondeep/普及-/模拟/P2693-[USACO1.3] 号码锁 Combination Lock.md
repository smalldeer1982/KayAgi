# 题目信息

# [USACO1.3] 号码锁 Combination Lock

## 题目背景

感谢 @[Fond_Dream](https://www.luogu.com.cn/user/321680) 提供五道 USACO 题目的标准题面。

## 题目描述

农夫约翰的奶牛不停地从他的农场中逃出来，导致了很多损害。为了防止它们再逃出来，他买了一只很大的号码锁以防止奶牛们打开牧场的门。

农夫约翰知道他的奶牛很聪明，所以他希望确保它们不会在简单地试了很多不同的号码组合之后就能轻易开锁。锁上有三个转盘，每个上面有数字 $1$ ~ $n$，因为转盘是圆的，所以 $1$ 和 $n$ 是相邻的。有两种能开锁的号码组合，一种是农夫约翰设定的，还有一种“预设”号码组合是锁匠设定的。但是，锁有一定的容错性，所以，在每个转盘上的数字都与一个合法的号码组合中相应的数字相距两个位置以内时，锁也会打开。

比如说，如果农夫约翰的号码组合是 ( $1$ , $2$ , $3$ )，预设号码组合是 ( $4$ , $5$ , $6$ )，在转盘被设定为 ( $1$ , $4$ , $5$)（因为这和农夫约翰的号码组合足够接近）或 ( $2$ , $4$ , $8$ )（因为这和预设号码组合足够接近）时可以打开锁。注意，( $1$ , $5$ , $6$ )并不会打开锁，因为它与任一号码组合都不够接近。

给出农夫约翰的号码组合和预设号码组合，请计算能够开锁的不同的号码组合的数目。号码是有序的，所以 ( $1$ , $2$ , $3$ ) 与 ( $3$ , $2$ , $1$ ) 不同。


## 说明/提示

#### 输入输出样例 1 解释

每个转盘的标号是 $1$ ~ $50$。农夫约翰的号码组合是 ( $1$ , $2$ , $3$ )，预设号码组合是 ( $5$ , $6$ , $7$ )。

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \leq n \leq 100$，$1 \leq x, y, z, a, b, c \leq n$。

## 样例 #1

### 输入

```
50
1 2 3
5 6 7
```

### 输出

```
249```

# AI分析结果

• 综合分析与结论：
    - 这些题解主要有两种思路。一是暴力枚举所有可能的号码组合，通过判断每个组合与两组合法号码组合的距离是否满足条件来统计开锁组合数，如小白一枚、兰陵王、zzqDeco等作者的题解。二是利用数学原理，先算出不考虑重复时的理论组合数250（n≥5时），再计算重复部分并减去，如VSEJGFB、f112358的题解。
    - 难点在于处理转盘数字的环形特性，即1和n相邻，以及避免重复计算开锁组合。不同题解采用了不同方式，如取模运算、自定义函数处理边界等。
    - 从思路清晰度、代码可读性和优化程度看，部分题解代码较为冗长复杂，部分题解虽思路直接但未充分优化。整体质量参差不齐，没有特别突出达到4星及以上的题解。

通用建议与扩展思路：
    - 对于此类计数问题，可先分析问题特性，尝试找出数学规律优化算法，减少不必要的枚举。
    - 处理环形数据结构时，要注意边界情况的处理，可通过取模、自定义函数等方式简化代码逻辑。
    - 同类型题可考虑其他具有条件限制的组合计数问题，类似算法套路为先确定所有可能情况，再根据条件筛选或排除不符合的情况。

推荐题目：
    - P1036 [NOIP2002 普及组] 选数：通过枚举组合判断是否为质数来计数。
    - P1157 组合的输出：按字典序输出组合，考察组合生成与输出。
    - P1219 [USACO1.5]八皇后 Checker Challenge：经典的回溯法解决组合放置问题，与本题一样涉及到对多种情况的判断与计数。 

---
处理用时：18.47秒
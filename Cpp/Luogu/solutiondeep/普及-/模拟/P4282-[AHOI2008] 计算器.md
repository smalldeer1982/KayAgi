# 题目信息

# [AHOI2008] 计算器

## 题目描述

小可可在欢乐岛的快乐旅程还在继续，他想买一些纪念品带回去给同学们，于是来到了礼品部，在这里他发现了一个有趣的计算器.

这个计算器是一种特殊的、支持变进制整数加减运算的计算器（所谓变进制，就是每一位的进制可以不同。例如，如果最低位是 $3$ 进制，次低位是 $5$ 进制，那么这种情况的 $42$ 转化成十进制就是 $4\times 3+2=14$）。

店主看小可可对这个计算器非常感兴趣，于是他问小可可：“小朋友，如果我告诉你这个计算器最多可以支持 $N$ 位的变进制整数，且每一位的进制分别是 $x_1,x_2,\ldots,x_n$，那么你知道它能表示的最大整数 $M$ 是多少吗?”，小可可想了想说到：“它所能表示的最大的整数 $M$ 是 $(x_1\times x_2\times \cdots\times x_n)-1$。”

店主非常高兴，说道：“你真是个聪明的孩子，如果我告诉你两个长度为 $N$ 的变进制整数 $A,B$，你按照我的要求来计算 $(A＋B)\bmod(M+1)$ 或 $(A-B)\bmod(M+1)$，答案还是用相同的变进制来表示，如果你算对了，那么我就把这个计算器送给你。”

这下把小可可难住了，但是他非常想要这个计算器，聪明的你能够帮助小可可吗?

## 说明/提示

$100\%$ 的数据中，$1\le N \le 10^5$，$1 < x_1,x_2,\ldots x_N<100$。

$30\%$ 的数据中，$N \le 9$，$x_1 = x_2 =\ldots = x_N =10$。

## 样例 #1

### 输入

```
3
3 2 5
1 1 2
+
0 0 3```

### 输出

```
2 0 0

```

# AI分析结果

• 综合分析与结论：这些题解都明确指出本题需用高精度算法解决变进制整数的加减运算问题。思路上，先读取输入数据，然后根据运算符分别进行高精度加法和减法运算，在运算过程中按照对应位的进制进行进位和借位操作，最后输出结果。对于题目中要求的对\((M + 1)\)取模，多数题解指出由于结果小于等于\(2M\)，实际只需输出\(n\)位结果即可实现取模效果。算法要点在于模拟竖式计算，难点是结合变进制处理进位和借位。不同题解在代码实现细节、思路阐述清晰度上存在差异。

所选的题解：
 - 作者：见贤思齐_Seakies (5星)
    - 关键亮点：思路清晰，详细阐述了题意、题目分析过程，对加减运算的实现步骤描述细致，代码注释详尽，易于理解。
    - 个人心得：无
    - 核心代码（以加法为例）：
```cpp
void he() {
    for (int i = n; i >= 1; i--) { // 注意要倒序
        sum[i] += a[i] + b[i]; // 算和 
        a[i - 1] += sum[i] / x[i]; // 让下一位加上这一位多的数
        sum[i] %= x[i]; // 当前这一位的和对进制取模
    }
} 
```
核心实现思想：从低位到高位遍历，计算每一位的和，根据当前位进制进行进位操作。
 - 作者：Gaogao2011 (4星)
    - 关键亮点：简洁明了地阐述题意和思路，代码结构清晰，还特别解释了 `ios::sync_with_stdio(false)` 提高输入输出效率的作用。
    - 个人心得：无
    - 核心代码（以加法为例）：
```cpp
void _add() {
    int t = 0;
    for (int i = n; i >= 1; i--) {
        c[i] = a[i] + b[i] + t;
        t = c[i] / d[i];
        c[i] %= d[i];
    }
}
```
核心实现思想：与上一个类似，从低位到高位计算和，处理进位。
 - 作者：zxh923 (4星)
    - 关键亮点：直接点明思路是变进制运算，类似高精度计算，用数组存储数据，清晰指出减法运算时的借位坑点，代码简洁易懂。
    - 个人心得：无
    - 核心代码（以加法为例）：
```cpp
if(c=='+'){//判断运算符 
    for(int i=n;i>=1;i--){
        z[i]+=x[i]+y[i];
        z[i-1]+=z[i]/jz[i];
        z[i]%=jz[i];//保留余数,商加给下一位 
    }
}
```
核心实现思想：判断运算符为加法后，从低位到高位计算和并处理进位。

最优关键思路或技巧：利用数组模拟竖式计算实现高精度运算，结合变进制特点，在加法时按位求和并根据对应进制进位，减法时不够减则向高位借位。同时，利用结果与\(M\)的大小关系巧妙避免复杂的取模运算。

可拓展之处：同类型题可涉及不同进制间的转换、高精度乘除运算等。类似算法套路是遇到大数据运算，考虑用数组模拟运算过程，并根据题目特定规则（如进制、运算规则等）处理每一步操作。

推荐题目：
 - [P1601 A+B Problem（高精）](https://www.luogu.com.cn/problem/P1601)
 - [P1303 A*B Problem（高精）](https://www.luogu.com.cn/problem/P1303)
 - [P1255 数楼梯（高精）](https://www.luogu.com.cn/problem/P1255)

个人心得摘录与总结：无。 

---
处理用时：36.14秒
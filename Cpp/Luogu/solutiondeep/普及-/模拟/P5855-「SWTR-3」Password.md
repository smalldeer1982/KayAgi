# 题目信息

# 「SWTR-3」Password

## 题目背景

小 $\mathrm{A}$ 在茂密的森林里找到了一个宝箱。

宝箱设有密码锁，但小 $\mathrm{A}$ 不知道密码。

## 题目描述

宝箱的密码由 $n$ 位数字组成，如果将它们连在一起写，就可以看作是一个长度为 $n$ 的字符串。

小 $\mathrm{A}$ 想通过猜的方式试出密码。对于每一位数字，都会有一个集合 $s_i$，表示小 $\mathrm{A}$ 第 $i$ 位的尝试范围。

同时，小 $\mathrm{A}$ 已经试过了 $k$ 个密码组合 $d_1,d_2,\dots,d_k$，**这些密码不一定符合上文中的“尝试范围”**。

小 $\mathrm{A}$ 想知道他最多还需要尝试多少次才可以试出宝箱的密码，如果永远试不出输出 $\mathrm{-1}$。

## 说明/提示

---

### 样例说明

- 在样例 $1$ 中，小 $\mathrm{A}$ 可能试的密码组合有：`014,015,044,045,094,095,114,115,144,145,194,195` 共 $12$ 个数，其中包含密码，但因为 `145` 已经试过，所以小 $\mathrm{A}$ 最多还需尝试 $11$ 次。

- 在样例 $2$ 中，小 $\mathrm{A}$ 可能试的密码组合有：`13,14,23,24`，共 $4$ 个数，其中没有密码，所以小 $\mathrm{A}$ 永远试不出密码。

---

### 数据范围与约定

**本题使用捆绑测试。**

Subtask 编号 | $n\leq$ | 特殊性质 | 分数
:-: | :-: | :-: | :-:
$1$ | $18$ | 答案为 $-1$ | $7$
$2$ | $1$ | 无 | $13$
$3$ | $6$ | 无 | $24$
$4$ | $18$ | $k=0$ | $21$
$5$ | $18$ | 无 | $35$

对于 $100\%$ 的数据，有 $1\leq n\leq 18$，$0\leq k \leq\min(10^n-1,10^4)$。

保证 $d_i$ 不为密码。

---

对于所有测试点，时间限制 $1\mathrm{s}$，空间限制 $128\mathrm{MB}$。

## 样例 #1

### 输入

```
3 2
094
2 01
3 149
2 45
145
345
```

### 输出

```
11```

## 样例 #2

### 输入

```
2 1
12
2 12
2 34
13
```

### 输出

```
-1```

## 样例 #3

### 输入

```
6 10
907887
9 295064731
6 796350
9 295378410
5 48520
9 745208361
7 8079632
111664
422880
521471
433649
037388
091076
235569
979229
268527
690028
```

### 输出

```
153085```

## 样例 #4

### 输入

```
18 10
869813962161100526
7 1762348
8 13948756
6 542169
8 78314952
6 432601
9 697130845
8 16358709
8 95204367
8 24079563
6 145602
7 6231549
6 157096
8 62534170
5 82390
7 5396702
8 20536491
7 1438692
5 59261
396440170984129947
891187409797339137
626815840963841542
192230179244843846
148170753474901744
142718603216393332
486224779191226121
819116507635433912
879948053659796486
875405657525125039
```

### 输出

```
1468282385203195```

# AI分析结果

• 综合分析与结论：这些题解思路基本一致，均先计算所有可能的密码组合数（通过各位置选择数相乘），再判断密码是否在可尝试范围内，若不在则输出 -1；接着遍历已尝试的密码，若其每一位都在对应位置的可尝试范围内，则从总组合数中减 1。算法要点在于合理存储各位置的可尝试数字、判断密码及已尝试密码的合法性。难点主要是处理数据范围以避免溢出，以及优化代码实现以满足时间限制。

未发现评分≥4星的题解，以下给出通用建议与扩展思路：
 - 通用建议：在代码实现上，可注重变量命名的规范性和代码的模块化，以提高可读性。如部分题解使用单个字母命名重要变量，可适当使用更具描述性的名称。在处理大数据范围时，务必注意数据类型的选择，防止溢出。
 - 扩展思路：此类题目属于组合计数与条件判断结合的问题，可拓展到其他需要根据条件筛选组合的场景。比如在排列组合问题中，加入某些元素不能相邻等限制条件，解题思路依然是先算出所有可能，再根据限制条件排除不符合的情况。

推荐相似知识点的洛谷题目：
 - P1036 [NOIP2002 普及组] 选数：涉及从给定数字中选取若干个数使其和为质数的组合计数问题。
 - P1219 [USACO1.5] 八皇后 Checker Challenge：八皇后问题的变形，需要根据规则判断合法的皇后放置组合。
 - P1605 迷宫：在迷宫问题基础上，结合不同条件计算从起点到终点的路径组合数。

个人心得摘录与总结：
 - wpy233提到将true和false写反还能通过四个样例，反映出样例强度可能不足，难以检测出低级错误，强调了在调试时不能仅依赖样例，还需自行构造边界和特殊数据进行测试。 

---
处理用时：24.05秒
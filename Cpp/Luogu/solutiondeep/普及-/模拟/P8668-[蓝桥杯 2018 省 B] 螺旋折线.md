# 题目信息

# [蓝桥杯 2018 省 B] 螺旋折线

## 题目描述

如图所示的螺旋折线经过平面上所有整点恰好一次。

![](https://cdn.luogu.com.cn/upload/image_hosting/yis43t6j.png)

对于整点 $(X, Y)$，我们定义它到原点的距离 $\text{dis}(X, Y)$ 是从原点到 $(X, Y)$ 的螺旋折线段的长度。  

例如 $\text{dis}(0, 1)=3$，$\text{dis}(-2, -1)=9$。 

给出整点坐标 $(X, Y)$，你能计算出 $\text{dis}(X, Y)$ 吗？


## 说明/提示

对于 $40\%$的数据，$-1000\le X,Y\le 1000$。

对于 $70\%$ 的数据，$-10^5\le X,Y \le 10^5$。

对于 $100\%$ 的数据，$-10^9\le X,Y \le 10^9$。


## 样例 #1

### 输入

```
0 1```

### 输出

```
3```

# AI分析结果

• 综合分析与结论：
    - 这些题解的核心思路都是通过找规律来避免暴力枚举导致的超时问题。主要方法有按象限分类找规律、按螺旋线的上下左右部分分类找规律、按周期找规律等。
    - 算法要点在于准确找出不同区域内点到原点螺旋折线长度的计算规律，以及根据点坐标判断其所在区域。
    - 解决难点在于如何通过观察螺旋折线的图形，总结出通用且准确的数学规律。不同题解的规律总结方式和角度有所不同，但目的都是为了高效计算距离。

所选的题解：
  - 作者：___w (赞：16)
    - 星级：5星
    - 关键亮点：思路清晰，将螺旋折线按上下左右四个部分分类，通过定义\(n = \max(|x|, |y|)\)，推导出不同部分点到原点距离的简洁计算公式，代码实现简洁明了。
    - 重点代码核心实现思想：先计算出类似\(\text{dis}(x, -x)\)（\(x \geqslant 0\)）的距离\(d\)，再根据点\((x, y)\)所在的上下左右不同部分，对\(d\)进行相应的增减计算得到最终距离。
```cpp
#include <bits/stdc++.h>
using namespace std;
long long x, y, n, d;
int main() {
    cin >> x >> y;
    n = max(abs(x), abs(y)), d = 2*n*(2*n+1);
    if (y >= 0 && abs(x) <= y) cout << d-3*n+x;//上部分 
    else if (y < 0 && y < x && x <= -y) cout << d+n-x;//下部分 
    else if (x >= 0 && abs(y) <= x) cout << d-n-y;//右部分 
    else if (x < 0 && x < y && y <= -x) cout << d-5*n+y;//左部分 
    return 0;
}
```
  - 作者：yangmingshuo114514 (赞：10)
    - 星级：5星
    - 关键亮点：提出两种方法，法二通过以原点为中心的正方形划分周期，详细分析每个周期的步数规律，以及点在当前周期内不同线段上的距离计算方法，逻辑严谨，易于理解。
    - 重点代码核心实现思想：先计算前\(\max(|x|, |y|) - 1\)个周期的步数，再根据点在第\(\max(|x|, |y|)\)周期内的位置，逐步计算从周期起始点到目标点的额外步数，累加得到总距离。
```cpp
#include<cstdio>
#include<cmath>
long long x,y,a,b;
int main(){
    scanf("%lld%lld",&x,&y);
    a=(abs(x)>abs(y)?abs(x):abs(y))-1;
    b=4*(a+1)*a;
    ++a;
    ++b;
    if(x==-a&&y!=-a){
        printf("%lld",b+y+a-1);
        return 0;
    }
    b+=a*2-1;
    if(y==a){
        printf("%lld",b+x+a);
        return 0;
    }
    b+=a*2;
    if(x==a){
        printf("%lld",b+a-y);
        return 0;
    }
    b+=a*2;
    printf("%lld",b+a-x);
    return 0;
}
```
  - 作者：wuhan1234 (赞：8)
    - 星级：4星
    - 关键亮点：对四个象限分别进行详细的规律推导，从每个象限的转折点入手，推导出非转折点的距离计算公式，考虑全面。
    - 重点代码核心实现思想：根据点\((x, y)\)所在象限，选择对应的距离计算公式进行计算。
```c
#include <stdio.h>
int max(int a,int b)
{
    return a>b?a:b;
}
int main()
{
    long long x,y,t,ans=0;
    scanf("%lld%lld",&x,&y);
    if (x>=0&&y>=0)        // 第1象限
    {
        t=max(x,y);
        ans=4*t*t+x-y;
    }
    else if (x<0&&y>=0)   // 第2象限
    {
        t=max(-x,y);
        ans=2*t*(2*t-1)+x+y;
    }
    else if (x>=0&&y<0)  // 第4象限
    {
        t=max(x,-y);
        ans=2*t*(2*t+1)-x-y;
    }
    else                // 第3象限
    {
        if (x+1<y)
            t=-x-x-1;
        else
            t=-y-y+1;
        ans=t*t-x+y-1;
    }
    printf("%lld\n",ans);
    return 0;
}
```

最优关键思路或技巧：通过对螺旋折线图形的观察和分析，按一定规则（如象限、上下左右部分、周期等）进行分类，找出每类中距离计算的规律，将复杂的几何问题转化为简单的数学计算问题，避免暴力枚举，提高算法效率。

可拓展之处：同类型题常出现在找规律的几何路径长度计算中，类似算法套路是通过观察图形特征，合理分类，挖掘周期性或递推性规律。

推荐题目：
  - P1085 [NOIP2005 普及组] 不高兴的津津
  - P1147 连续自然数和
  - P1306 斐波那契公约数 

---
处理用时：57.77秒
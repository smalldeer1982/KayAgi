# 题目信息

# [USACO21FEB] Comfortable Cows B

## 题目描述

Farmer John 的草地可以被看作是一个由正方形方格组成的巨大的二维方阵（想象一个巨大的棋盘）。初始时，草地上是空的。

Farmer John 将会逐一地将 $N$（$1\le N\le 10^5$）头奶牛加入到草地上。第 $i$ 头奶牛将会占据方格 $(x_i,y_i)$，不同于所有已经被其他奶牛占据的方格（$0\le x_i,y_i\le 1000$）。

一头奶牛被称为是「舒适的」，如果它水平或竖直方向上与恰好三头其他奶牛相邻。Farmer John 对他的农场上舒适的奶牛数量感兴趣。对 $1\ldots N$ 中的每一个 $i$，输出第 $i$ 头奶牛加入到草地上之后舒适的奶牛的数量。 

## 说明/提示

### 样例解释 1

在前四头奶牛加入之后，位于 $(1,1)$ 的奶牛是舒适的。

在前七头奶牛加入之后，位于 $(2,1)$ 的奶牛是舒适的。

在前八头奶牛加入之后，位于 $(2,1)$ 和 $(2,2)$ 的奶牛是舒适的。 

### 测试点性质

- 测试点 $1-4$ 满足 $N\le 400$。
- 测试点 $5-12$ 没有额外限制。

## 样例 #1

### 输入

```
8
0 1
1 0
1 1
1 2
2 1
2 2
3 1
3 2```

### 输出

```
0
0
0
1
0
0
1
2```

# AI分析结果

• 综合分析与结论：这些题解思路大致相同，均意识到每次加入奶牛不必遍历所有奶牛判断舒适度，而是仅关注新加入奶牛及其相邻奶牛的状态变化，以此将时间复杂度从暴力解法的$O(n^2)$优化至$O(n)$。算法要点在于用数组记录每个位置奶牛的存在状态及相邻奶牛数量，每次加入新奶牛时，更新其相邻位置的相邻奶牛数量，并根据变化调整舒适奶牛的计数。解决的难点在于避免不必要的全局遍历，精准捕捉局部状态变化对舒适奶牛数量的影响。

  多数题解质量相近，思路清晰且代码实现简洁明了。部分题解在变量命名、代码格式上略有差异，但整体核心思路与实现方法一致。

  最优关键思路或技巧：利用数组记录奶牛位置与相邻奶牛数量，通过局部更新策略，仅处理新加入奶牛及其相邻奶牛的状态变化，有效降低时间复杂度。

  可拓展之处：此类题目属于动态统计问题，类似套路可应用于其他动态更新并统计特定状态数量的场景，如动态维护二维网格中满足特定相邻条件的元素数量等。

  洛谷相似题目推荐：
    - P1996 约瑟夫问题，考察对动态数据变化的处理思路。
    - P1090 [NOIP2004 提高组] 合并果子，涉及动态调整数据并统计结果。
    - P1162 填涂颜色，与二维网格状态动态变化及统计相关。

  个人心得摘录及总结：“JOKER_chu”提到模拟赛中因使用`goto`导致未AK，强调了合理选择代码结构的重要性，避免使用可能破坏代码逻辑结构的语句。

  由于各题解质量相近且均未达4星，故不单独列举题解。通用建议与扩展思路：在解决此类动态统计问题时，应优先分析每次操作对整体状态的影响范围，尝试通过局部更新代替全局遍历以优化时间复杂度。在代码实现上，注意变量命名的规范性与代码结构的清晰性，便于调试与维护。 

---
处理用时：29.60秒
# 题目信息

# [USACO20JAN] Photoshoot B

## 题目描述

Farmer John 在给他编号为 $1\ldots N$ 的 $N$ 头奶牛排队拍照（$2\le N\le 10^3$）。FJ 一开始计划从左向右数第 $i$ 个位置排编号为 $a_i$ 的奶牛，他在一张纸上写下了排列 $a_1,a_2,\ldots,a_N$。不幸的是，这张纸刚刚被 Farmer Nhoj 偷走了！

幸好 FJ 仍然有机会恢复他之前写下的排列。在这张纸被偷走之前，Bessie 记录了序列 $b_1,b_2,\ldots,b_{N−1}$，对于每一个 $1\le i<N$ 满足 $b_i=a_i+a_{i+1}$。

基于 Bessie 的信息，帮助 FJ 恢复可以产生序列 $b$
的“字典序最小”的排列 $a$。排列 $x$ 字典序小于排列 $y$，如果对于某个 $j$，对于所有 $i<j$ 均有 $x_i=y_i$，且有 $x_j<y_j$（换句话说，这两个排列到某个位置之前都相同，在这个位置上 $x$ 小于 $y$）。保证存在至少一个满足条件的 $a$。 

## 说明/提示

### 样例解释 1

$a$ 能够产生 $b$，因为 $3+1=4$，$1+5=6$，$5+2=7$，$2+4=6$。

### 测试点性质

 - 测试点 $2-4$ 满足 $N\le 8$。
 - 测试点 $5-10$ 没有额外限制。

## 样例 #1

### 输入

```
5
4 6 7 6```

### 输出

```
3 1 5 2 4```

# AI分析结果

• 综合分析与结论：
    - 思路：大部分题解思路一致，利用已知条件，只要确定\(a_1\)的值，就能通过\(b_i = a_i + a_{i + 1}\)推出整个\(a\)序列。为满足字典序最小要求，从\(1\)开始枚举\(a_1\)。
    - 算法要点：通过循环枚举\(a_1\)，根据递推公式\(a_{i + 1} = b_i - a_i\)生成\(a\)序列，并用桶（如数组标记或map）判断生成的\(a\)序列是否合法（元素在\(1\)到\(n\)之间且无重复）。
    - 解决难点：主要难点在于判断生成的序列是否合法，通过桶记录元素出现情况以及对元素范围进行判断来解决。部分题解考虑到\(a_1\)的取值范围为\(1\)到\(b_1 - 1\)，减少了不必要的枚举。
    - 整体质量：多数题解思路清晰，代码实现也较为直接，但优化程度普遍不高，大部分是暴力枚举的实现方式。

    由于所有题解在思路清晰度、代码可读性和优化程度等方面没有特别突出达到4星及以上的，故不返回具体题解。

• 通用建议与扩展思路：
    - 关键思路或技巧：利用已知的相邻元素和关系，通过确定一个元素来递推整个序列，同时利用桶来快速判断序列的合法性。在枚举时，合理利用已知条件缩小枚举范围，如根据\(b_1\)确定\(a_1\)的取值范围。
    - 拓展：此类题目属于构造类问题，通常给定一些限制条件，要求构造出满足条件的序列。类似的算法套路是先找到一个关键变量（如本题中的\(a_1\)），通过该变量确定整个序列，再利用合适的数据结构（如桶）来验证构造的序列是否符合要求。
    - 推荐题目：
        - P1115 最大子段和：涉及序列的处理与分析，通过动态规划思想解决，与本题对序列的操作和分析有相似之处。
        - P1908 逆序对：同样是对序列进行分析，通过归并排序等方法解决，可锻炼对序列性质的理解和算法运用能力。
        - P2671 求和：需要对给定序列进行处理和计算，与本题在对序列元素关系的运用上有一定相似性。 

---
处理用时：28.66秒
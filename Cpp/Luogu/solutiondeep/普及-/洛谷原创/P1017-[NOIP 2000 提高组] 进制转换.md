# 题目信息

# [NOIP 2000 提高组] 进制转换

## 题目背景

NOIP2000 提高组 T1

## 题目描述

我们可以用这样的方式来表示一个十进制数：将每个阿拉伯数字乘以一个以该数字所处位置为指数，以 $10$ 为底数的幂之和的形式。例如 $123$ 可表示为 $1 \times 10^2+2\times 10^1+3\times 10^0$ 这样的形式。

与之相似的，对二进制数来说，也可表示成每个二进制数码乘以一个以该数字所处位置为指数，以 $2$ 为底数的幂之和的形式。  

一般说来，任何一个正整数 $R$ 或一个负整数 $-R$ 都可以被选来作为一个数制系统的基数。如果是以 $R$ 或 $-R$ 为基数，则需要用到的数码为 $0,1,\dots,R-1$。  

例如当 $R=7$ 时,所需用到的数码是 $0,1,2,3,4,5,6$，这与其是 $R$ 或 $-R$ 无关。如果作为基数的数绝对值超过 $10$，则为了表示这些数码，通常使用英文字母来表示那些大于 $9$ 的数码。例如对 $16$ 进制数来说,用 $A$ 表示 $10$，用 $B$ 表示 $11$，用 $C$ 表示 $12$，以此类推。

在负进制数中是用 $-R $ 作为基数，例如 $-15$（十进制）相当于 $(110001)_{-2}$（$-2$进制），并且它可以被表示为 $2$ 的幂级数的和数：

$$(110001)_{-2}=1\times (-2)^5+1\times (-2)^4+0\times (-2)^3+0\times (-2)^2+0\times (-2)^1 +1\times (-2)^0$$

设计一个程序，读入一个十进制数和一个负进制数的基数，并将此十进制数转换为此负进制下的数。


## 说明/提示

**数据范围**

对于 $100\%$ 的数据，$-20 \le R \le -2$，$|n| \le 37336$。




## 样例 #1

### 输入

```
30000 -2```

### 输出

```
30000=11011010101110000(base-2)```

## 样例 #2

### 输入

```
-20000 -2```

### 输出

```
-20000=1111011000100000(base-2)```

## 样例 #3

### 输入

```
28800 -16```

### 输出

```
28800=19180(base-16)```

## 样例 #4

### 输入

```
-25000 -16```

### 输出

```
-25000=7FB8(base-16)```

# AI分析结果

### 综合分析与结论
这些题解主要围绕将十进制数转换为负进制数展开，核心难点是处理因负进制导致的负余数问题。多数题解思路基于十进制转其他进制的 “除基取余，倒序排列” 方法，针对负余数通过调整余数和商来保证余数为正。算法要点为利用除法基本公式 $被除数 = 除数×商 + 余数$ 进行推导和处理。

### 所选的题解
- **作者：老卡手机 (5星)**
    - **关键亮点**：思路清晰，先点明负进制不了解是难点，通过百度学习后，给出解决负余数问题的关键思路，即当余数为负时，将商加1，余数减去除数，使余数变为正数，并给出正确性证明，代码简洁明了。
    - **个人心得**：表示题目和题解对负进制介绍不清楚，自己通过百度学习理解负进制。
    - **重点代码**：
```cpp
void zhuan(int n,int r)
{
    if(n==0) return ;
    int m=n%r;
    if(m<0) m-=r,n+=r;
    if(m>=10) m='A'+m-10;
    else m+='0';
    zhuan(n/r,r);
    printf("%c",m);
    return ;
}
```
核心实现思想：递归函数 `zhuan` 实现进制转换，先取余，若余数为负则调整，将余数转换为字符形式，递归处理商，最后倒序输出余数。
- **作者：judgejudge (4星)**
    - **关键亮点**：详细解答了处理负余数的思路，从两个方面阐述如何将负数转成符合要求的正数，一是让负数余数规律符合进制余数规律，二是使转换后的正数符合余数计算模式，逻辑严谨。
    - **重点代码**：
```cpp
while(n!=0){
    int j=n%m;
    n/=m;
    if(j<0)j-=m,n--;
    if(j<10)a[++l]=(char)(j+48);
    else a[++l]=(char)((j-10)+'A');
}
for(i=l;i>=1;i--)cout<<a[i];
```
核心实现思想：在循环中不断取余，若余数为负则按思路调整，将余数转换为字符存入数组，最后倒序输出数组得到转换结果。
- **作者：ikunTLE (4星)**
    - **关键亮点**：先考虑正数进制转换方法，再针对负数进制情况，依据基本除法公式推导出当除数为负时，商和余数的调整方式，逻辑清晰，代码简洁。
    - **重点代码**：
```cpp
void dfs(int x){
    if(!x)
        return;
    int q=x/b,r=x%b;
    if(r<0)
        ++q,r-=b;
    dfs(q);
    if(r<10)
        putchar(r+'0');
    else putchar(r+'A'-10);
    return;
}
```
核心实现思想：递归函数 `dfs` 实现进制转换，取余后若余数为负，调整商和余数，递归处理商，最后倒序输出余数对应的字符。

### 最优关键思路或技巧
处理负余数时，利用公式 $a = b×q + r = b×(q + 1) + r - b$，当 $b < 0$ 且 $\lvert r\rvert < \lvert b\rvert$ 时，通过更改 $q \gets q + 1$，$r \gets r - b$ 使余数为正，从而实现负进制转换。

### 可拓展之处
同类型题可涉及不同进制间相互转换，特别是非标准进制（如负进制、小数进制等）。类似算法套路为依据进制转换基本原理 “除基取余，倒序排列”，针对特殊进制导致的特殊情况（如负余数、小数余数等），结合数学公式对商和余数进行合理调整。

### 相似知识点洛谷题目
- [P2054 [AHOI2005] 洗牌](https://www.luogu.com.cn/problem/P2054)：涉及进制运算和模拟，通过对洗牌操作的模拟，理解不同进制下数据的变化规律。
- [P1306 斐波那契公约数](https://www.luogu.com.cn/problem/P1306)：在求解过程中需要对斐波那契数列性质和数论知识有深入理解，与进制转换类似，都需要掌握特定数学原理并应用到代码实现中。
- [P1226 【模板】快速幂||取余运算](https://www.luogu.com.cn/problem/P1226)：快速幂运算与进制转换都涉及到对数字的运算处理，快速幂是一种高效计算幂次的算法，与进制转换在数学运算技巧应用上有相似之处。 

---
处理用时：23.81秒
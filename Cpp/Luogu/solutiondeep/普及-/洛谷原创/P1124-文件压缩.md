# 题目信息

# 文件压缩

## 题目背景

提高文件的压缩率一直是人们追求的目标。近几年有人提出了这样一种算法，它虽然只是单纯地对文件进行重排，本身并不压缩文件，但是经这种算法调整后的文件在大多数情况下都能获得比原来更大的压缩率。


## 题目描述

该算法具体如下：对一个长度为 $n$ 的字符串 $S$，首先根据它构造 $n$ 个字符串，其中第 $i$ 个字符串由将 $S$ 的前 $i-1$ 个字符置于末尾得到。然后把这 $n$ 个字符串按照首字符从小到大排序，如果两个字符串的首字符相等，则按照它们**在 $S$ 中的位置**从小到大排序。排序后的字符串的尾字符可以组成一个新的字符串 $S'$ ，它的长度也是 $n$，并且包含了 $S$ 中的每一个字符。最后输出 $S'$ 以及 $S$ 的首字符在 $S'$ 中的位置 $p$。

举例：$S$ 是 `example`

1. 构造 $n$ 个字符串。

```plain
example
xamplee
ampleex
mpleexa
pleexam
leexamp
eexampl
```

2. 将字符串排序。

```plain
ampleex
example
eexampl
leexamp
mpleexa
pleexam
xamplee
```
3. 压缩结果。

$S' = \texttt{xelpame}$，$p = 7$

由于英语单词构造的特殊性，某些字母对出现的频率很高，因此在 $S'$ 中相同的字母有很大几率排在一起，从而提高 $S'$ 的压缩率。虽然这种算法利用了英语单词的特性，然而在实践的过程中，人们发现它几乎适用于所有的文件压缩。

请你编一个程序，读入 $S'$ 和 $p$，输出字符串 $S$。

保证 $S$ 仅含小写字母（所以输入的 $S'$ 也仅含小写字母）。

## 样例 #1

### 输入

```
7
xelpame
7
```

### 输出

```
example
```

# AI分析结果

### 综合分析与结论
这些题解思路基本一致，均基于以下认识：对输入的字符串 $S'$ 排序后可得到原字符串各种排列的首字母序列，结合原字符串首字母在 $S'$ 中的位置 $p$，利用首字母与尾字母的对应关系来还原原字符串。算法要点在于通过排序获取首字母序列，难点是避免字符错位。多数题解发现正推会因在无序的原字符串中查找字符而导致错位，所以选择倒推，即从后往前构建原字符串，这样每次在有序的排序后字符串中查找字符，可保证正确性。

### 所选的题解
- **作者：MC_Launcher (5星)**
    - **关键亮点**：思路清晰，通过图文并茂的方式展示推导过程，代码注释详细，还特别提醒正推可能出现的错误及解决办法。
    - **个人心得**：“我第一眼看到这题就懵了，自己模拟一下，诶，有个规律！…… 我第一次正着排就才10分，所以我们要倒着找，最后反着输出，如果不理解，可以输出中间变量，然后也就懂了。”强调模拟找规律以及正推易错需倒推的经验。
    - **核心代码片段**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int n,shou,now;
    cin>>n;
    char a[n],b[n],ans[n];
    cin>>a>>shou;
    for(int i=0;i<n;i++)b[i]=a[i];
    sort(b,b+n);
    for(int i=0;i<n;i++)
    {
        if(b[i]==a[shou-1])
        {
            now=i;
            b[i]=')';
            break;
        }
    }
    ans[0]=a[now];
    for(int i=1;i<n;i++)
    {
        for(int j=n-1;j>=0;j--)
        {
            if(b[j]==a[now])
            {
                now=j;
                ans[i]=a[now];
                b[j]=')';
                break;
            }
        }   
    }
    for(int i=n-1;i>=0;i--)cout<<ans[i];
}
```
    - **核心实现思想**：先将输入的压缩串 $a$ 复制到 $b$ 并排序，通过 $a$ 中首字母位置找到 $b$ 中对应位置，确定答案第一个字符，之后从后往前在 $b$ 中找与当前字符匹配的，确定答案后续字符，最后倒序输出答案。
- **作者：liuzhaoxu (4星)**
    - **关键亮点**：详细解释正推错误原因，并通过具体数据示例说明，代码简洁明了，注释清晰。
    - **个人心得**：“正着推的话…… 但是这有一个问题，每次在 $S1$ 中找字符时候，$S1$ 是无序的，所以找到 $S1$ 中的某个字符时可能并不能接上已经确定的答案字符串。”清晰阐述正推易错点。
    - **核心代码片段**：
```cpp
#include <bits/stdc++.h>
using namespace std;
const int maxn=10000+5;
int n,p;
char s[maxn],ss[maxn]; 
char ans[maxn];
int main(){
    scanf("%d%s%d",&n,s+1,&p);
    memcpy(ss+1,s+1,sizeof s);
    sort(ss+1,ss+1+n); 
    int cnt=n+1; 
    for(int i=1;i<=n;++i) if(ss[i]==s[p]) { p=i;break; } 
    while(cnt>1){ 
        ans[--cnt]=s[p]; 
        ss[p]='#';
        for(int i=n;i>=1;--i) if(ss[i]==s[p]) {p=i;break;} 
    }
    printf("%s\n",ans+1); 
    return 0;
}
```
    - **核心实现思想**：将输入字符串 $s$ 复制到 $ss$ 并排序，找到原字符串首字母在排序后字符串 $ss$ 中的位置，从后往前构建答案字符串，每次确定一个字符后将其在 $ss$ 中标记，避免重复选取。
- **作者：minVan (4星)**
    - **关键亮点**：解题思路部分对原字符串与构造字符串之间的关系阐述清晰，代码逻辑明确，变量命名有一定可读性。
    - **核心代码片段**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int n, p, cur;
char s[10005], s1[10005], ans[10005]; 
bool vis[10005];
int main() {
    cin >> n;
    for(int i = 1; i <= n; i++) {
        cin >> s[i];
        s1[i] = s[i];
    }
    cin >> p;
    sort(s1 + 1, s1 + n + 1);
    ans[1] = s[p]; 
    for(int i = 1; i <= n; i++) {
        if(s1[i] == s[p]) {
            cur = i; 
            break;
        }
    }
    for(int i = n; i >= 2; i--) { 
        vis[cur] = 1; 
        ans[i] = s[cur]; 
        for(int j = n; j >= 1; j--) {
            if(s1[j] == s[cur] &&!vis[j]) {
                cur = j;
                break;
            }
        }
    }
    for(int i = 1; i <= n; i++) {
        cout << ans[i];
    }
    return 0;
}
```
    - **核心实现思想**：将输入字符串存入 $s$ 并复制到 $s1$ 后排序，通过首字母位置确定答案第一个字符，标记已使用字符，从后往前在 $s1$ 中找未使用的匹配字符确定答案后续字符，最后顺序输出答案。

### 最优关键思路或技巧
倒推的思维方式是解决本题的关键技巧，通过从后往前构建原字符串，利用排序后字符串的有序性避免字符错位问题。同时，利用数组标记已使用字符，防止重复选取，确保结果的正确性。

### 可拓展思路
此类题目属于字符串模拟与逆向推导类型。相似算法套路是在给定字符串变换规则的情况下，通过分析变换前后字符串的特征关系，利用排序、标记等手段逆向还原原字符串。同类型题可涉及不同的字符串变换方式，如旋转、替换等，解题关键在于找准变换前后字符的对应关系。

### 相似知识点洛谷题目
- [P1055 ISBN号码](https://www.luogu.com.cn/problem/P1055)：涉及字符串处理与校验规则的应用。
- [P1308 统计单词数](https://www.luogu.com.cn/problem/P1308)：考察字符串查找与统计相关知识。
- [P1593 因子和阶乘](https://www.luogu.com.cn/problem/P1593)：需要对数字进行分解并结合字符串处理。 

---
处理用时：34.98秒
# 题目信息

# [MtOI2019] 永夜的报应

## 题目背景

在这世上有一乡一林一竹亭，也有一主一仆一仇敌。

有人曾经想拍下他们的身影，却被可爱的兔子迷惑了心神。

那些迷途中的人啊，终究会消失在不灭的永夜中……  

## 题目描述

蓬莱山 辉夜(Kaguya)手里有一堆数字。

辉夜手里有 $n$ 个非负整数 $a_1,a_2\cdots a_n$，由于辉夜去打 Gal Game 去了，她希望智慧的你来帮忙。  

* 你需要将这些数分成若干组，满足 $n$ 个数中的每一个数都恰好被分到了一个组中，且每一组至少包含一个数。  

定义一组数的权值为该组内所有数的**异或和**。请求出一种分组方案，使得分出的所有组数的权值之和最小，输出权值之和的最小值。

## 说明/提示

**样例 $1$ 解释：**

一种最优的分组方案如下：

- 将第 $1$ 个数和第 $3$ 个数分为一组，该组的权值为 $1\oplus 5 = 4$；
- 将第 $2$ 个数分为一组，该组的权值为 $2$。

该分组方案的所有组的权值之和为 $4 + 2 = 6$，可以证明，不存在权值之和更小的分组方案。

**样例 $2$ 解释：**

一种最优的分组方案如下：

- 将第 $1$ 个数和第 $5$ 个数分为一组，该组的权值为 $9\oplus 9 = 0$；
- 将第 $2$ 个数和第 $4$ 个数分为一组，该组的权值为 $18\oplus 25 = 11$；
- 将第 $3$ 个数和第 $6$ 个数分为一组，该组的权值为 $36\oplus 32 = 4$。

该分组方案的所有组的权值之和为 $0 + 11 + 4 = 15$。可以证明，不存在权值之和更小的分组方案。

### 子任务

- 对于 $80\%$ 的数据，满足 $n\leq 15$。
- 对于 $100\%$ 的数据，满足 $n\leq 10^6,a_i \leq 10^9$。

### 题目来源

[迷途之家2019联赛](https://www.luogu.org/contest/20135)(MtOI2019) T1

出题人：disangan233



## 样例 #1

### 输入

```
3
1 2 5```

### 输出

```
6```

## 样例 #2

### 输入

```
6
9 18 36 25 9 32
```

### 输出

```
15```

# AI分析结果

• 综合分析与结论：
    - 思路方面：多数题解通过证明a^b <= a + b，得出将所有数分为一组进行异或能使权值之和最小的结论。部分题解从异或运算本质（不进位加法）出发，说明分组异或和小于等于分组相加和，进而得到答案为所有数异或和。还有部分题解提到暴力搜索（期望得分80pts），但重点还是在于阐述全异或的正解思路。
    - 算法要点：核心是利用异或运算性质，通过循环读入所有数并进行异或操作，最终输出异或结果。
    - 解决难点：主要难点在于理解异或运算与加法运算的关系，并证明为何所有数全异或能得到权值之和的最小值。众多题解通过按位分析、对比异或和加法运算规则等方式进行证明。
    - 整体来看，各题解思路相似，主要差异在于证明过程的详细程度、代码实现方式及是否包含其他解法（如暴力、贪心、dp等）。

    以下是评分较高的题解：
  - 作者：角边边证全等 (5星)
    - 关键亮点：思路清晰简洁，直接点明因为a^b <= a + b，所以将所有数异或起来得到最小答案，代码简洁明了。
    ```cpp
    #include<bits/stdc++.h>
    using namespace std;
    int main(){
        int n,a,ans;
        scanf("%d",&n);
        scanf("%d",&ans);
        for(int i=2;i<=n;i++){
            scanf("%d",&a);
            ans^=a;
        }
        cout<<ans;
        return 0;
    }
    ```
    核心实现思想：先读入数字个数n和第一个数作为初始ans，然后通过循环读入剩余数字并与ans进行异或操作，最后输出ans。
  - 作者：⑨baka (5星)
    - 关键亮点：不仅给出a^b <= a + b的证明过程，从每一位上分析异或和加法结果，还对异或本质（不进位加法）进行说明，逻辑严谨，代码规范。
    ```cpp
    #include<bits/stdc++.h>
    using namespace std;
    int main()
    {
        int n;
        long long ans=0;
        scanf("%d",&n);
        for(int i=1;i<=n;++i)
        {
            long long x;
            scanf("%lld",&x);
            ans=ans xor x;
        }
        printf("%lld",ans);
        return 0;
    }
    ```
    核心实现思想：定义变量n和ans，读入n后，通过循环读入每个数x并与ans异或，最后输出ans。
  - 作者：disangan233 (4星)
    - 关键亮点：作为出题人，不仅给出正解思路，还提供了暴搜的解法及对应时间复杂度和期望得分，对题目解法覆盖全面。
    ```cpp
    #include<bits/stdc++.h>
    using namespace std;
    #define ll long long
    #define re register int
    #define db double
    #define in inline
    namespace fast_io
    {
        char buf[1<<12],*p1=buf,*p2=buf,sr[1<<23],z[23],nc;int C=-1,Z=0,Bi=0;
        in char gc() {return p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<12,stdin),p1==p2)?EOF:*p1++;}
        in ll read()
        {
            ll x=0,y=1;while(nc=gc(),(nc<48||nc>57)&&nc!=-1)if(nc==45)y=-1;Bi=1;
            x=nc-48;while(nc=gc(),47<nc&&nc<58)x=(x<<3)+(x<<1)+(nc^48),Bi++;return x*y;
        }
        in db gf() {re a=read(),b=(nc!='.')?0:read();return (b?a+(db)b/pow(10,Bi):a);}
        in int gs(char *s) {char c,*t=s;while(c=gc(),c<32);*s++=c;while(c=gc(),c>32)*s++=c;return s-t;}
        in void ot() {fwrite(sr,1,C+1,stdout);C=-1;}
        in void flush() {if(C>1<<22) ot();}
        template <typename T>
        in void write(T x,char t)
        {
            re y=0;if(x<0)y=1,x=-x;while(z[++Z]=x%10+48,x/=10);
            if(y)z[++Z]='-';while(sr[++C]=z[Z],--Z);sr[++C]=t;flush();
        }
        in void write(char *s) {re l=strlen(s);for(re i=0;i<l;i++)sr[++C]=*s++;sr[++C]='\n';flush();}
    };
    using namespace fast_io;
    int n,ans;
    int main()
    {
        n=read();
        while(n--) ans^=read();
        write(ans,'\n');
        return ot(),0; 
    }
    ```
    核心实现思想：利用自定义的快速输入输出函数，读入数字个数n，在循环中读入每个数并与ans异或，最后输出ans。

• 最优关键思路或技巧：利用异或运算“不进位加法”的本质，对比其与普通加法的关系，证明出所有数全异或能使权值之和最小，从而将问题简化为一次线性的异或操作。

• 可拓展之处：同类型题常围绕位运算性质展开，例如给定一些数，通过特定的位运算规则求最值、判断关系等。类似算法套路是深入理解位运算（如与、或、异或等）在二进制层面的操作原理，遇到问题从位的角度分析。

• 相似知识点洛谷题目：
    - P1514 引水入城：涉及位运算优化搜索。
    - P1876 开灯：通过异或运算解决开关状态问题。
    - P2141 珠心算测验：利用位运算判断数字组合关系。

• 个人心得摘录与总结：
    - 作者：⑨baka提到被出题人要求写题，因数学功底弱放弃，反映出扎实数学基础对解决算法问题的重要性。
    - 作者：sishuinianhua称在打暴力时阴差阳错将所有输入数异或得到答案，这说明在解题过程中尝试不同操作可能会发现新的思路，但也应注重对原理的理解。 

---
处理用时：39.33秒
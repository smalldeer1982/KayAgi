# 题目信息

# [PFOI Round1] 暴龙的火锅

## 题目背景

暴龙爱吃火锅。

## 题目描述

定义 $S(x)$ 表示 $x$ 的每一位的数字之和，例如：$S(14)=1+4=5$，$S(114514)=1+1+4+5+1+4=16.$

另外，定义 $fib(x)$ 代表斐波那契数列的第 $x$ 项，具体地：

$$fib(1)=fib(2)=1,\ fib(x)=fib(x-1)+fib(x-2)\ (x≥3).$$

现在给定 $n$，求出下式的值，其中 $\bmod 9$ 表示对 $9$ 取余数：

$$(S(fib(1))+S(fib(2))+S(fib(3))+...+S(fib(n))) \bmod 9.$$

## 说明/提示

【样例解释】

对于第一组询问，$n=7$，答案为： 

$$
\begin{aligned}
& \ \ \ \ \ (S(fib(1))+S(fib(2))\ldots+S(fib(6))+S(fib(7)))\bmod 9 \\
& =(1+1+2+3+5+8+(1+3))\bmod 9 \\
& =6.
\end{aligned}
$$

---

【数据范围】

**「本题采用捆绑测试」**

- $\texttt{Subtask 1(10 pts)：}T=1,\ n\le 10$；
- $\texttt{Subtask 2(30 pts)：}T=10^2,\ n\le 10^3$；
- $\texttt{Subtask 3(60 pts)：}$无特殊限制。

对于 $100\%$ 的数据，满足 $1\le T\le 10^5,\ 1\le n\le 10^6$。

## 样例 #1

### 输入

```
3
7
14
114514```

### 输出

```
6
5
8```

# AI分析结果

### 综合分析与结论
这些题解的核心思路都是利用一个关键结论：一个正整数对9取余的结果等于它各位数之和对9取余的结果，将原问题转化为求斐波那契数列各项对9取模后的前缀和。
- **算法要点**：
    - **直接递推求前缀和**：先递推计算斐波那契数列各项对9取模的值，同时计算其前缀和，查询时直接输出对应前缀和。如chen_zhe、xiaohaoaibiancheng66、_xxy_、V1mnkE、Jasper08、Asimplename等题解采用此方法。
    - **找循环节**：通过列举或打表发现斐波那契数列各项对9取模的和存在长度为24的循环节，预处理循环节内的前缀和，查询时根据n对24取模直接输出结果。如wangzl、Infinity_G、封禁用户、nullqtr_pwp、sixrc、lyhqwq、songhx等题解采用此方法。
- **解决难点**：斐波那契数列增长速度快，不能直接求每一项具体数值，通过对9取模将数值范围控制在可处理范围内。同时，部分题解通过找循环节进一步优化，将时间复杂度从O(Tn)降到O(T)。

综合质量来看，以下题解相对突出：
1. **作者chen_zhe（5星）**
    - **关键亮点**：思路清晰，先证明关键结论，再通过递推计算斐波那契数列对9取模的前缀和求解。代码简洁明了，可读性高。
    - **重点代码**：
```cpp
int t,fib[1000055];
int main()
{
    cin >> t;
    fib[1]=fib[2]=1;
    for (int i=3;i<=1000050;i++)
        fib[i]=(fib[i-2]+fib[i-1])%9;
    for (int i=1;i<=1000050;i++)
        fib[i]=(fib[i]+fib[i-1])%9;
    while (t--)
    {
        int n;
        cin >> n;
        cout << fib[n] << endl;
    }
    return 0;
}
```
    - **核心思想**：先递推计算斐波那契数列各项对9取模的值，再计算这些值的前缀和，每次输入n直接输出对应前缀和。
2. **作者wangzl（5星）**
    - **关键亮点**：通过找规律发现循环节，将问题简化为对循环节内数据的处理，预处理循环节前缀和，查询时间复杂度为O(1)。代码实现简洁高效，对思路阐述详细。
    - **重点代码（std_2）**：
```cpp
int n, data;
const int s[] = {0, 1, 2, 4, 7, 3, 2, 6, 0, 7, 8, 7, 7, 6, 5, 3, 0, 4, 5, 1, 7, 0, 8, 0, 0};
int main() {
    scanf("%d", &n);
    while (n--) {
        scanf("%d", &data);
        printf("%d\n", s[data % 24]);//核心代码O(1)
    }
    return 0;
}
```
    - **核心思想**：预处理出循环节内的前缀和数组s，每次输入n，通过n对24取模作为索引，直接输出s数组中对应的值。
3. **作者Infinity_G（4星）**
    - **关键亮点**：同样利用循环节解题，通过打表直观展示规律，代码简洁，直接利用循环节前缀和数组输出结果。
    - **重点代码**：
```cpp
int t,n;
int p[]={0,1,2,4,7,3,2,6,0,7,8,7,7,6,5,3,0,4,5,1,7,0,8,0};
int main()
{
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d",&n);
        printf("%d\n",p[n%24]);
    }
    return 0;
}
```
    - **核心思想**：定义循环节前缀和数组p，每次输入n，根据n对24取模的结果作为索引，输出p数组对应的值。

### 最优关键思路或技巧
1. **利用同余性质简化问题**：通过证明并利用一个正整数对9取余等于其各位数字之和对9取余，将复杂的数字和计算转化为简单的取模运算。
2. **寻找循环节优化算法**：对于大规模数据，通过打表或列举发现斐波那契数列取模9的和存在循环节，利用循环节将时间复杂度从线性降低到常数级，极大提高效率。

### 可拓展思路
此类题目关键在于发现数字规律和利用取模运算的性质简化计算。类似套路可用于解决一些具有周期性规律的数列求和取模问题，如其他递推数列在特定取模下的前缀和问题。

### 相似知识点洛谷题目
1. [P1035 级数求和](https://www.luogu.com.cn/problem/P1035)：涉及简单数列求和与浮点数运算，可类比本题对数列求和的思路。
2. [P1962 斐波那契数列](https://www.luogu.com.cn/problem/P1962)：直接考察斐波那契数列的计算，与本题中斐波那契数列的生成部分类似。
3. [P5732 杨辉三角](https://www.luogu.com.cn/problem/P5732)：考察杨辉三角的规律与计算，和本题找数列规律并利用规律解题思路相似。

### 个人心得摘录与总结
暂未发现题解中有个人心得相关内容。 

---
处理用时：28.37秒
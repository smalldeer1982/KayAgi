# 题目信息

# A-B 数对

## 题目背景

出题是一件痛苦的事情！

相同的题目看多了也会有审美疲劳，于是我舍弃了大家所熟悉的 A+B Problem，改用 A-B 了哈哈！

## 题目描述

给出一串正整数数列以及一个正整数 $C$，要求计算出所有满足 $A - B = C$ 的数对的个数（不同位置的数字一样的数对算不同的数对）。

## 说明/提示

对于 $75\%$ 的数据，$1 \leq N \leq 2000$。

对于 $100\%$ 的数据，$1 \leq N \leq 2 \times 10^5$，$0 \leq a_i <2^{30}$，$1 \leq C < 2^{30}$。

2017/4/29 新添数据两组

## 样例 #1

### 输入

```
4 1
1 1 2 3
```

### 输出

```
3```

# AI分析结果

### 综合分析与结论

本题的核心是统计满足 \(A - B = C\) 的数对个数，且不同位置的相同数对视为不同的数对。题解中主要采用了以下几种思路：

1. **哈希表（Map）**：通过将 \(A - B = C\) 转化为 \(A = B + C\)，利用哈希表记录每个数的出现次数，最后遍历数组统计满足条件的数对。这种方法时间复杂度为 \(O(n)\)，空间复杂度较高。
2. **二分查找**：先对数组排序，然后对每个数 \(A\)，使用二分查找统计 \(A + C\) 的出现次数。时间复杂度为 \(O(n \log n)\)，空间复杂度较低。
3. **双指针**：排序后使用双指针维护满足条件的区间，时间复杂度为 \(O(n)\)，空间复杂度较低。

### 所选高星题解

#### 1. **OsvaldoAsensioLopez (5星)**
- **关键亮点**：使用 `map` 记录每个数的出现次数，通过 \(A = B + C\) 的转化，直接统计满足条件的数对。代码简洁，思路清晰。
- **核心代码**：
  ```cpp
  map<LL,LL> m;
  for(int i=1;i<=n;i++) {
      cin >> a[i];
      m[a[i]]++;
      a[i] -= c;    
  }
  for(int i=1;i<=n;i++) ans += m[a[i]];
  ```
- **个人心得**：通过将问题转化为 \(A = B + C\)，简化了统计过程，避免了复杂的遍历。

#### 2. **樱花飞舞 (5星)**
- **关键亮点**：使用 `lower_bound` 和 `upper_bound` 进行二分查找，统计 \(A + C\) 的出现次数。代码高效，思路清晰。
- **核心代码**：
  ```cpp
  sort(a+1,a+N+1);
  for(int i=1;i<=N;i++) {
      ans += ((upper_bound(a+1,a+N+1,a[i]+C)-a)-(lower_bound(a+1,a+N+1,a[i]+C)-a));
  }
  ```
- **个人心得**：通过二分查找优化了统计过程，避免了暴力枚举，提高了效率。

#### 3. **jins3599 (5星)**
- **关键亮点**：使用双指针维护满足条件的区间，时间复杂度为 \(O(n)\)，空间复杂度较低。代码简洁，思路清晰。
- **核心代码**：
  ```cpp
  sort(a + 1, a + 1 + n);
  int l = 1, r1 = 1, r2 = 1;
  for(l = 1; l <= n; l++) {
      while(r1 <= n && a[r1] - a[l] <= c) r1++;
      while(r2 <= n && a[r2] - a[l] < c) r2++;
      if(a[r2] - a[l] == c && a[r1 - 1] - a[l] == c) ans += r1 - r2;
  }
  ```
- **个人心得**：通过双指针维护区间，避免了重复计算，提高了效率。

### 最优关键思路与技巧

1. **问题转化**：将 \(A - B = C\) 转化为 \(A = B + C\)，简化了统计过程。
2. **哈希表的使用**：通过哈希表记录每个数的出现次数，方便快速查找。
3. **二分查找优化**：通过二分查找统计满足条件的数对，避免了暴力枚举。
4. **双指针维护区间**：通过双指针维护满足条件的区间，避免了重复计算。

### 可拓展之处

1. **类似问题**：可以扩展到其他类似的数对统计问题，如 \(A + B = C\) 或 \(A \times B = C\)。
2. **数据结构**：可以尝试使用其他数据结构，如 `unordered_map` 或 `multiset`，进一步优化性能。

### 推荐题目

1. **P1102 A-B 数对**（本题）
2. **P1496 火烧赤壁**（双指针应用）
3. **P1631 序列合并**（二分查找应用）

### 个人心得总结

- **调试经历**：在使用哈希表时，注意处理负数的情况，避免哈希冲突。
- **踩坑教训**：在使用二分查找时，确保数组已排序，否则结果不准确。
- **顿悟感想**：通过问题转化和数据结构的选择，可以大大简化问题的解决过程。

---
处理用时：35.25秒
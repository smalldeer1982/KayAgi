# 题目信息

# [1007] 魔法少女小Scarlet

## 题目描述

Scarlet 最近学会了一个数组魔法，她会在 $n\times n$ 二维数组上将一个奇数阶方阵按照顺时针或者逆时针旋转 $90^\circ$。

首先，Scarlet 会把 $1$ 到 $n^2$ 的正整数按照从左往右，从上至下的顺序填入初始的二维数组中，然后她会施放一些简易的魔法。

Scarlet 既不会什么分块特技，也不会什么 Splay 套 Splay，她现在提供给你她的魔法执行顺序，想让你来告诉她魔法按次执行完毕后的二维数组。

## 说明/提示

对于50%的数据，满足 $r=1$

对于100%的数据 $1\leq n,m\leq500$，满足 $1\leq x-r\leq x+r\leq n,1\leq y-r\leq y+r\leq n$。

## 样例 #1

### 输入

```
5 4
2 2 1 0
3 3 1 1
4 4 1 0
3 3 2 1```

### 输出

```
5 10 3 18 15
4 19 8 17 20
1 14 23 24 25
6 9 2 7 22
11 12 13 16 21```

# AI分析结果

### 综合分析与结论

本题的核心是对一个二维数组的子矩阵进行顺时针或逆时针旋转操作。各题解大多采用模拟的方式，通过遍历矩阵并重新赋值来实现旋转。虽然思路相似，但在实现细节、代码简洁性和优化程度上存在差异。部分题解通过递归或逐层旋转的方式优化了代码结构，但整体上各题解的复杂度相近，均为O(m * r^2)，其中m为操作次数，r为旋转半径。

### 所选高星题解

#### 1. 作者：黎曦の夜 (4星)
- **关键亮点**：代码简洁，直接通过两个数组实现旋转操作，逻辑清晰。
- **核心代码**：
  ```cpp
  if(opt==0) {
      for(int i=a-r;i<=a+r;i++)
          for(int j=b-r;j<=b+r;j++)
              f[a-b+j][a+b-i] = g[i][j];
      for(int i=a-r;i<=a+r;i++)
          for(int j=b-r;j<=b+r;j++)
              g[i][j] = f[i][j];
  }
  ```
  **实现思想**：通过临时数组`f`存储旋转后的结果，再将其赋值回原数组`g`。

#### 2. 作者：BzhH (4星)
- **关键亮点**：将顺时针和逆时针旋转分别封装为函数，代码结构清晰，易于理解。
- **核心代码**：
  ```cpp
  void spin(int x,int y,int r) {
      for(int i=x-r;i<=x+r;i++)
          for(int k=y-r;k<=y+r;k++)
              temp[i][k]=square[i][k];
      int x1=x+r,y1=y-r;
      for(int i=x-r;i<=x+r;i++) {
          for(int k=y-r;k<=y+r;k++) {
              square[i][k]=temp[x1][y1];
              x1--;
          }
          x1=x+r,y1++;
      }
  }
  ```
  **实现思想**：通过临时数组`temp`存储原矩阵，再根据旋转规则重新赋值。

#### 3. 作者：RemiliaScar1et (4星)
- **关键亮点**：通过递归逐层旋转，代码结构清晰，且逆时针旋转通过三次顺时针旋转实现，减少了代码量。
- **核心代码**：
  ```cpp
  inline void s_turn_(int cx_,int cy_,int r_) {
      int width_=2*r_+1;
      for(int i=0;i<width_;i++)
          for(int j=0;j<width_;j++)
              c2[i][j]=c1[cy_+r_-j][cx_-r_+i];
      for(int i=0;i<width_;i++)
          memcpy(c1[cy_-r_+i]+cx_-r_,c2[i],sizeof(int)*width_);
  }
  ```
  **实现思想**：通过递归逐层旋转，使用`memcpy`提高赋值效率。

### 最优关键思路与技巧

1. **使用临时数组**：通过临时数组存储旋转后的结果，再赋值回原数组，避免直接修改原数组导致的错误。
2. **逐层旋转**：通过递归或循环逐层旋转矩阵，减少代码复杂度。
3. **逆时针旋转的简化**：通过三次顺时针旋转实现逆时针旋转，减少代码量。

### 可拓展之处

- **同类型题**：类似题目包括矩阵的转置、镜像翻转等，可以通过类似思路解决。
- **算法套路**：对于矩阵操作类题目，通常可以通过模拟、递归或逐层处理的方式解决。

### 推荐题目

1. [P4924 魔法少女小Scarlet](https://www.luogu.org/problem/P4924)
2. [P1008 三连击](https://www.luogu.org/problem/P1008)
3. [P1010 幂次方](https://www.luogu.org/problem/P1010)

### 个人心得总结

- **调试经历**：部分作者提到在调试过程中发现符号错误或逻辑错误，建议在编写代码时仔细检查每一步的逻辑。
- **顿悟感想**：通过模拟和递归的方式可以简化矩阵旋转的实现，建议在遇到类似问题时多尝试不同的实现方式。

---
处理用时：37.04秒
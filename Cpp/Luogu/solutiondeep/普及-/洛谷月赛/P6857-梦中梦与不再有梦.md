# 题目信息

# 梦中梦与不再有梦

## 题目背景

Amazing John 做了一个梦，梦到他做了很多梦。

记得最好的梦，是不再有梦。

## 题目描述

Amazing John 想要以自己的梦出一道题。

Amazing John 做了 $n$ 个梦。每两个梦之间都有且仅有一条桥梁直接相连，不会有桥梁从一个梦连向自身。

通过桥梁 $e_{u,v}$ 可以从梦 $u$ 到达 梦 $v$ 或从 $v$ 到达 $u$ ，并且获得 $1$ 点休息值。

对于每个桥梁 $e_{u,v}$ ，它只能被经过一次，无论是正向经过还是反向经过。

当到达一个梦且与它相连的所有桥梁都不能经过时， Amazing John 就会结束他的做梦。

现在 Amazing John 很困，他想知道从任意一个梦出发，最多可以获得多少休息值？

## 说明/提示

样例解释：

从 $1$ 出发，沿 $e_{1,2}$ 到达 $2$ ，再沿 $e_{2,3}$ 到达 $3$ ，最后沿 $e_{3,1}$ 到达 $1$。

总共获得了 $3$ 点休息值。

|子任务|数据点|数据范围|分数|
-|-|-|-|
|$1$|$1\sim2$|$n≤6,T=3$|$30$|
|$2$|$3\sim5$|$n≤10^9,T≤10^5$|$70$|

对于一个子任务，你能获得它的分数当且仅当你通过了其中所有的数据点。

## 样例 #1

### 输入

```
1
3```

### 输出

```
3```

# AI分析结果

### 综合分析与结论

本题的核心是求解无向完全图中的最长欧拉路径，本质上是欧拉路径问题的应用。所有题解都基于欧拉路径的性质进行分类讨论，主要思路是：
1. **奇数点数的完全图**：每个点的度数为偶数，存在欧拉回路，直接输出总边数。
2. **偶数点数的完全图**：每个点的度数为奇数，需要删除最少的边使得图中只有两个奇数度点，输出总边数减去删除的边数。

大多数题解通过打表或数学推导得出公式，部分题解提供了详细的证明过程。整体来看，题解质量参差不齐，部分题解思路清晰、代码简洁，而部分题解则缺乏详细解释或代码优化。

### 精选题解

#### 1. **作者：超级玛丽王子 (5星)**
- **关键亮点**：详细解释了欧拉路径的性质，并提供了清晰的分类讨论和公式推导。代码简洁且优化良好。
- **个人心得**：强调了本题不是找规律题，而是基于图论性质的结论题，适合初学者理解。
- **核心代码**：
  ```cpp
  if(n&1) printf("%lld\n",n*(n-1)/2);
  else printf("%lld\n",n*(n-1)/2-((n-2)/2));
  ```
  **实现思想**：根据n的奇偶性直接输出公式结果。

#### 2. **作者：Vagari (4星)**
- **关键亮点**：通过打表找规律，并结合欧拉路径的性质进行证明。代码简洁，适合快速解题。
- **核心代码**：
  ```cpp
  if(n%2) cout<<n*(n-1)/2<<endl;
  else cout<<n*(n-1)/2-n/2+1<<endl;
  ```
  **实现思想**：通过打表发现规律，直接输出结果。

#### 3. **作者：InformationEntropy (4星)**
- **关键亮点**：详细解释了欧拉路径的性质，并提供了清晰的分类讨论和公式推导。代码简洁且优化良好。
- **核心代码**：
  ```cpp
  if(n%2==1) cout<<n*(n-1)/2<<endl;
  else cout<<n*(n-1)/2-(n-2)/2<<endl;
  ```
  **实现思想**：根据n的奇偶性直接输出公式结果。

### 最优关键思路与技巧
1. **欧拉路径的性质**：理解欧拉路径的充要条件是解题的关键。对于无向图，存在欧拉路径的条件是图中只有0个或2个奇数度点。
2. **分类讨论**：根据点数的奇偶性进行分类讨论，奇数点数直接输出总边数，偶数点数需要删除最少的边。
3. **公式推导**：通过数学推导得出公式，避免复杂的图遍历操作，提升效率。

### 可拓展之处
- **类似问题**：可以拓展到有向图中的欧拉路径问题，或者带权图中的最长欧拉路径问题。
- **算法套路**：欧拉路径问题常与图论中的连通性、度数等性质相关，掌握这些性质可以解决类似问题。

### 推荐题目
1. **P2731 [USACO3.3] 骑马修栅栏**：考察欧拉路径的应用。
2. **P1341 无序字母对**：基于欧拉路径的字符串问题。
3. **P1333 欧拉回路**：直接考察欧拉回路的性质。

### 个人心得摘录
- **超级玛丽王子**：强调了本题不是找规律题，而是基于图论性质的结论题，适合初学者理解。
- **Vagari**：通过打表找规律，并结合欧拉路径的性质进行证明，适合快速解题。

### 通用建议与扩展思路
- **理解欧拉路径的性质**：掌握欧拉路径的充要条件是解决此类问题的关键。
- **分类讨论**：根据问题的特性进行分类讨论，简化问题。
- **公式推导**：通过数学推导得出公式，避免复杂的图遍历操作，提升效率。

---
处理用时：30.45秒
# 题目信息

# 「MCOI-06」Gerrymandering

## 题目描述

给定正整数 $n,m,k$，能否将一个 $n\times m$ 表格染色，使得每一个颜色形成恰好一个连通块，并且每一个连通块大小为 $k$？

如果存在，请构造一个合法方案。

## 说明/提示

#### 样例 1 解释

数据组 3 的合法输出之一：

![](https://cdn.luogu.com.cn/upload/image_hosting/xxqa4azm.png)

#### 数据规模与约定

**本题采用捆绑测试。**

 - Subtask 1（20 pts）：$k=1$。
 - Subtask 2（30 pts）：$n=1$。
 - Subtask 3（50 pts）：没有特殊限制。

对于 $100\%$ 的数据，$1\le n,m,k,T,\sum nm\le10^{6}$。

## 样例 #1

### 输入

```
3
3 3 3
3 3 33
6 6 4```

### 输出

```
YES
1 1 2
1 2 2
3 3 3
NO
YES
1 1 2 2 3 3
1 2 2 4 4 3
1 5 5 4 6 3
5 5 7 4 6 6
8 7 7 7 9 6
8 8 8 9 9 9```

# AI分析结果

### 综合分析与结论

本题的核心在于如何将 $n \times m$ 的表格染色，使得每个颜色形成一个连通块，且每个连通块的大小恰好为 $k$。所有题解都首先判断了 $n \times m$ 是否能被 $k$ 整除，若不能则直接输出 "NO"。对于有解的情况，大多数题解采用了蛇形填色的策略，即奇数行从左到右填色，偶数行从右到左填色，以保证每个颜色的连通性。

### 所选高星题解

#### 1. 作者：C_S_L (4星)
**关键亮点**：
- 采用了蛇形填色的策略，保证了每个颜色的连通性。
- 代码简洁，逻辑清晰，时间复杂度为 $\Theta(\sum nm)$。

**核心代码**：
```cpp
for(int i=1;i<=n;++i){
    if(i%2==1){
        for(int j=1;j<=m;++j){
            a[i][j]=(++cnt)/k;
        }
    }
    else{
        for(int j=m;j>=1;--j){
            a[i][j]=(++cnt)/k;
        }
    }
}
```
**实现思想**：通过奇偶行判断填色方向，确保每个颜色的连通性。

#### 2. 作者：一只书虫仔 (4星)
**关键亮点**：
- 同样采用蛇形填色策略，代码实现简洁。
- 通过 `change` 变量控制填色方向，逻辑清晰。

**核心代码**：
```cpp
for(int i=1;i<=n*m/k;i++)
    for(int j=1;j<=k;j++){
        a[x][y]=i;
        y+=change;
        if(y>m) x++, y=m, change=-1;
        if(y<1) x++, y=1, change=1;
    }
```
**实现思想**：通过 `change` 变量控制填色方向，确保每个颜色的连通性。

#### 3. 作者：_lfxxx_ (4星)
**关键亮点**：
- 采用蛇形填色策略，代码简洁且高效。
- 使用一维数组进行滚动输出，节省空间。

**核心代码**：
```cpp
for(int i=1,x=0,t=n*m/k;i<=t;++i){
    for(int j=1;j<=k;++j){
        a[x+=f]=i;
        if(x==m&&f==1||x==1&&f==-1){
            for(int l=1;l<=m;++l)
                write(a[l]),putchar(' ');
            putchar('\n');
            x+=f;
            f=-f;
        }
    }
}
```
**实现思想**：通过 `f` 变量控制填色方向，使用一维数组进行滚动输出，确保每个颜色的连通性。

### 最优关键思路或技巧

- **蛇形填色**：通过奇数行从左到右、偶数行从右到左的填色方式，确保每个颜色的连通性。
- **滚动输出**：使用一维数组进行滚动输出，节省空间，提高效率。

### 可拓展之处

- **类似算法套路**：蛇形填色策略可以应用于其他需要保证连通性的填色问题，如迷宫生成、图像处理等。
- **同类型题**：可以考虑类似的问题，如将表格划分为多个连通区域，每个区域满足特定条件。

### 推荐题目

1. **P1005 矩阵取数游戏**（考察矩阵操作与动态规划）
2. **P1044 栈**（考察栈的应用与模拟）
3. **P1057 传球游戏**（考察动态规划与状态转移）

### 个人心得摘录

- **C_S_L**：通过蛇形填色策略，确保每个颜色的连通性，代码简洁高效。
- **一只书虫仔**：通过 `change` 变量控制填色方向，逻辑清晰，代码实现简洁。
- **_lfxxx_**：使用一维数组进行滚动输出，节省空间，提高效率。

这些心得强调了蛇形填色策略的有效性，以及代码简洁性和效率的重要性。

---
处理用时：32.10秒
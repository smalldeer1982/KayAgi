# 题目信息

# [PFOI Round1] 暴龙的火锅

## 题目背景

暴龙爱吃火锅。

## 题目描述

定义 $S(x)$ 表示 $x$ 的每一位的数字之和，例如：$S(14)=1+4=5$，$S(114514)=1+1+4+5+1+4=16.$

另外，定义 $fib(x)$ 代表斐波那契数列的第 $x$ 项，具体地：

$$fib(1)=fib(2)=1,\ fib(x)=fib(x-1)+fib(x-2)\ (x≥3).$$

现在给定 $n$，求出下式的值，其中 $\bmod 9$ 表示对 $9$ 取余数：

$$(S(fib(1))+S(fib(2))+S(fib(3))+...+S(fib(n))) \bmod 9.$$

## 说明/提示

【样例解释】

对于第一组询问，$n=7$，答案为： 

$$
\begin{aligned}
& \ \ \ \ \ (S(fib(1))+S(fib(2))\ldots+S(fib(6))+S(fib(7)))\bmod 9 \\
& =(1+1+2+3+5+8+(1+3))\bmod 9 \\
& =6.
\end{aligned}
$$

---

【数据范围】

**「本题采用捆绑测试」**

- $\texttt{Subtask 1(10 pts)：}T=1,\ n\le 10$；
- $\texttt{Subtask 2(30 pts)：}T=10^2,\ n\le 10^3$；
- $\texttt{Subtask 3(60 pts)：}$无特殊限制。

对于 $100\%$ 的数据，满足 $1\le T\le 10^5,\ 1\le n\le 10^6$。

## 样例 #1

### 输入

```
3
7
14
114514```

### 输出

```
6
5
8```

# AI分析结果

### 综合分析与结论

本题的核心在于利用模运算的性质，将问题转化为斐波那契数列的前缀和模9的计算。大多数题解都基于以下两个关键点：
1. **模9的性质**：一个数模9的结果等于其各位数字之和模9的结果。
2. **斐波那契数列的周期性**：斐波那契数列模9的结果具有周期性，周期为24。

基于这两个性质，题解主要分为两类：
- **预处理法**：通过预处理斐波那契数列的前缀和，直接查询结果。
- **周期性优化**：利用斐波那契数列模9的周期性，减少计算量。

### 所选高星题解

#### 1. 作者：chen_zhe (5星)
**关键亮点**：
- 清晰地解释了模9的性质，并利用该性质将问题转化为斐波那契数列的前缀和模9的计算。
- 代码简洁且高效，预处理了斐波那契数列的前缀和，直接查询结果。

**核心代码**：
```cpp
fib[1]=fib[2]=1;
for (int i=3;i<=1000050;i++)
    fib[i]=(fib[i-2]+fib[i-1])%9;
for (int i=1;i<=1000050;i++)
    fib[i]=(fib[i]+fib[i-1])%9;
```
**实现思想**：预处理斐波那契数列的前缀和，直接查询结果。

#### 2. 作者：wangzl (5星)
**关键亮点**：
- 发现了斐波那契数列模9的周期性，并利用该周期性进行优化。
- 提供了两种实现方式，一种是直接利用周期性，另一种是通过预处理前缀和。

**核心代码**：
```cpp
const int s[] = {0,1,2,4,7,3,2,6,0,7,8,7,7,6,5,3,0,4,5,1,7,0,8,0,0};
int main() {
    scanf("%d", &n);
    while (n--) {
        scanf("%d", &data);
        printf("%d\n", s[data % 24]);
    }
    return 0;
}
```
**实现思想**：利用斐波那契数列模9的周期性，直接查询结果。

#### 3. 作者：Infinity_G (4星)
**关键亮点**：
- 通过打表发现了斐波那契数列模9的周期性，并利用该周期性进行优化。
- 代码简洁且高效，直接利用周期性查询结果。

**核心代码**：
```cpp
int p[]={0,1,2,4,7,3,2,6,0,7,8,7,7,6,5,3,0,4,5,1,7,0,8,0};
int main() {
    scanf("%d", &t);
    while(t--) {
        scanf("%d", &n);
        printf("%d\n", p[n%24]);
    }
    return 0;
}
```
**实现思想**：利用斐波那契数列模9的周期性，直接查询结果。

### 最优关键思路与技巧

1. **模9的性质**：利用模9的性质将问题转化为斐波那契数列的前缀和模9的计算。
2. **周期性优化**：发现斐波那契数列模9的周期性，利用该周期性减少计算量。

### 可拓展之处

- **同类型题**：类似的问题可以利用模运算的性质进行优化，例如模7、模10等。
- **算法套路**：对于具有周期性的数列，可以利用周期性进行优化，减少计算量。

### 推荐题目

1. [P1303 A*B Problem](https://www.luogu.com.cn/problem/P1303) - 考察大数乘法与模运算。
2. [P1045 高精度求幂](https://www.luogu.com.cn/problem/P1045) - 考察高精度计算与模运算。
3. [P1226 【模板】快速幂](https://www.luogu.com.cn/problem/P1226) - 考察快速幂算法与模运算。

### 个人心得摘录

- **chen_zhe**：通过模9的性质简化了问题，避免了直接计算大数的数字和。
- **wangzl**：通过打表发现了斐波那契数列模9的周期性，大大减少了计算量。
- **Infinity_G**：利用周期性优化了代码，使得查询时间复杂度降为O(1)。

---
处理用时：38.32秒
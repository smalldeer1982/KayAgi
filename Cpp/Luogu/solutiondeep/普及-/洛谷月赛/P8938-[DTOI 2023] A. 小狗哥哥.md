# 题目信息

# [DTOI 2023] A. 小狗哥哥

## 题目背景

luanmenglei 有一个辉煌的现在：他们班的女同学都叫他易酱。

但谁能想到 luanmenglei 有一个悲伤的过去，他五岁的弟弟叫他小狗哥哥。

## 题目描述

下文的所有参数均默认为整数。

作为一位（7k7k 小游戏的）游戏开发者，你设计了如下（简陋的不如小狗哥哥幼儿园大班的毕业设计的）游戏，存在两个要素：
1. 一个敌对生物，其血量为 $m$。
2. 主角的武器，分为 $n$ 级，第 $i$ 级的伤害是 $i\times p$。

游戏的平衡性需要提前规划，所以你还有一个序列 $\{a_n\}$，其含义如下：

- $a_i$ 表示敌对生物被第 $i$ 级武器恰好攻击 $a_i$ 下会死。

可惜你忘记了 $p$ 具体是多少，所以你需要求出所有可能的 $p$ 的个数。

如果可能有无数个 $p$，那么请输出 `xiaogougege`。



## 说明/提示

#### 【样例 1 解释】

当武器为 $1$ 级时，分析可以发现 $p$ 要满足 $1 \leq p < \frac{3}{2}$。  
当武器为 $2$ 级时，分析可以发现 $p$ 要满足 $\frac{3}{4} \leq p < \frac{3}{2}$。  
当武器为 $3$ 级时，分析可以发现 $p$ 要满足 $1 \leq p$。 

又 $p$ 是整数。综上，只有当 $p = 1$ 时满足题目所述条件。

#### 【样例 2】

见附加文件中的 `game/game2.in` 与 `game/game2.out`。

该样例满足测试点 $13\sim 20$ 的限制。

#### 【数据范围与提示】

对于所有测试数据，保证 $1\leq n \leq 10^5$，$1\leq a_i,m\leq 10^9$。

每个测试点的具体限制见下表：

|  测试点编号  |      $n\leq$ | $m,a_i\leq $ | 特殊性质 |
| :-: | :-: |:-:|:-:|
| $1\sim 9$ | $10^5$ | $10^9$ | 数据纯随机 |
|  $10 \sim 12$  |       $3$       |$5$| 无 |
| $13 \sim 20$ | $10^5$ |$10^9$| 无 |

你需要注意，上文纯随机数据的具体生成程序代码如下：

```cpp
#include <bits/stdc++.h>
using namespace std;

int n, m, w;
mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());

int rand(int l, int r) {
  assert(l <= r);
  return uniform_int_distribution<>(l, r)(rng);
} 

int main() {
  scanf("%d%d%d", &n, &m, &w);
  printf("%d %d\n", n, m);
  for (int i = 1; i <= n; i ++) printf("%d%c", rand(1, w), " \n"[i == n]);
  return 0;
}
```

通俗的说，就是对于给定的 $n,m,w(w\le 10^9)$，数据生成器会随机生成 $n$ 个值域在 $[1,w]$ 内的数，作为 $\{a_n\}$。

## 样例 #1

### 输入

```
3 3
3 2 1```

### 输出

```
1```

# AI分析结果

### 综合分析与结论

本题的核心在于通过不等式推导出 $p$ 的取值范围，并求这些区间的交集。各题解的思路基本一致，主要差异在于代码实现的细节处理和优化程度。部分题解在边界条件处理上更为严谨，而有些则存在潜在的错误或不够清晰。

### 所选高星题解

#### 1. 作者：oddy (4星)
**关键亮点**：
- 清晰地列出不等式并推导出 $p$ 的范围。
- 处理了 $a_i=1$ 的特殊情况，避免除零错误。
- 代码简洁且逻辑清晰，易于理解。

**个人心得**：
- 强调了在赛场上因未处理空集而丢分的教训，提醒读者注意边界条件。

**核心代码**：
```cpp
int n, m, a, l, r, ansl, ansr = 2000000000;

int main() {
    scanf("%d%d", &n, &m);
    for(int i = 1; i <= n; i++) {
        scanf("%d", &a);
        l = m / (i * a) + bool(m % (i * a));
        r = a > 1 ? m / (i * (a - 1)) - !(m % (i * (a - 1))) : 2000000000;
        ansl = std::max(ansl, l);
        ansr = std::min(ansr, r);
    }
    if(ansr > 1000000000) puts("xiaogougege");
    else printf("%d\n", std::max(0, ansr - ansl + 1));
}
```

#### 2. 作者：Adchory (4星)
**关键亮点**：
- 详细解释了不等式的推导过程，并处理了 $a_i=1$ 的情况。
- 代码中使用了 `ceil` 函数，确保取整的准确性。
- 通过 `max` 和 `min` 函数求交集，逻辑清晰。

**核心代码**：
```cpp
int n, m, a[Maxn], ans, l, r=1e18;
int main(){
    scanf("%lld%lld",&n,&m);
    for(ll i=1;i<=n;i++) scanf("%lld",&a[i]);
    for(ll i=1;i<=n;i++){
        if(a[i]==1){
            ll p2=ceil(m*1.0/(a[i]*i));
            l=max(l,p2);
            continue;
        }
        ll p1=m/((a[i]-1)*i)-(m%((a[i]-1)*i)==0);
        ll p2=ceil(m*1.0/(a[i]*i));
        l=max(l,p2),r=min(p1,r);
    }
    if(r==1e18) printf("xiaogougege");
    else if(r-l+1<=0) printf("0");
    else printf("%lld",max(0ll,r-l+1));
    return 0;
}
```

#### 3. 作者：NightStriker (4星)
**关键亮点**：
- 通过 `double` 类型处理浮点数，避免整数除法的精度问题。
- 代码简洁，逻辑清晰，易于理解。
- 处理了无穷解的情况，输出 `xiaogougege`。

**核心代码**：
```cpp
int n,m,x;
double r = 1e11,l = -1;
int main() {
    cin>>n>>m;
    for(int i = 1; i<=n; i++) {
        cin>>x;
        l = max(l,(double)m/(x*i));
        r = min(r,(double)m/((x-1)*i));
    }
    if(r==1e11) {
        cout<<"xiaogougege"<<endl;
        return 0;
    }
    int ans = 0;
    for(int i = ceil(l);i<r;i++) ans++;
    cout<<ans<<endl;
    return 0;
}
```

### 最优关键思路与技巧

1. **不等式推导**：通过不等式 $(a_i-1) \cdot i \cdot p < m \leq a_i \cdot i \cdot p$ 推导出 $p$ 的范围。
2. **区间交集**：通过取所有区间的交集来确定 $p$ 的最终取值范围。
3. **边界处理**：特别注意 $a_i=1$ 的情况，避免除零错误。

### 可拓展之处

- **类似题目**：可以扩展到其他需要求参数范围的题目，如求解满足某些条件的整数解。
- **算法套路**：区间交集问题在算法竞赛中常见，掌握此类问题的处理方法有助于解决更复杂的问题。

### 推荐题目

1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)
3. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)

---
处理用时：38.09秒
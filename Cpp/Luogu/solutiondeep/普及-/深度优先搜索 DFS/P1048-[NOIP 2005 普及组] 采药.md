# 题目信息

# [NOIP 2005 普及组] 采药

## 题目描述

辰辰是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同的草药，采每一株都需要一些时间，每一株也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”


如果你是辰辰，你能完成这个任务吗？


## 说明/提示

**【数据范围】**

- 对于 $30\%$ 的数据，$M \le 10$；
- 对于全部的数据，$M \le 100$。

**【题目来源】**

NOIP 2005 普及组第三题

## 样例 #1

### 输入

```
70 3
71 100
69 1
1 2
```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
本题为标准 01 背包问题，所有题解均采用动态规划解法。核心要点包括：  
1. **状态定义**：`dp[i][j]` 表示前 i 个物品在容量 j 下的最大价值  
2. **状态转移**：`dp[i][j] = max(dp[i-1][j], dp[i-1][j-w]+v)`  
3. **空间优化**：通过逆序遍历实现一维数组滚动更新  
关键优化技巧为一维数组 + 逆序循环，可将空间复杂度从 O(NM) 降为 O(M)。

---

### 高星题解推荐

#### 1. [decoqwq] ⭐⭐⭐⭐⭐（5星）
**关键亮点**：  
- 详细图解二维 DP 与一维 DP 的差异  
- 通过实例演示逆序循环的必要性  
- 提供完整可运行的代码片段  
**核心代码**：
```cpp
// 一维 DP 逆序循环实现
for(int i=1;i<=m;i++) {
    for(int j=t; j>=w[i]; j--) {
        dp[j] = max(dp[j-w[i]] + val[i], dp[j]);
    }
}
```

#### 2. [GZXUEXUE] ⭐⭐⭐⭐（4星）
**关键亮点**：  
- 数学公式清晰表达状态转移  
- 代码结构简洁易读  
**核心思想**：  
- 使用 `if(w[i] <= v)` 条件判断代替显式 else 分支  
- 通过双层循环直接实现滚动数组  

#### 3. [LZYAC] ⭐⭐⭐⭐（4星）
**关键亮点**：  
- 最简代码实现（仅 14 行核心逻辑）  
- 明确注释逆序循环的必要性  
**个人心得**：  
> "滚动的时候必须倒序，不然会出现一个药用两次的情况" —— 直指 01 背包与完全背包的本质区别

---

### 最优关键思路总结
1. **一维数组优化**：通过逆序遍历时间维度（`j从t到w[i]`），避免覆盖未使用的旧状态  
2. **滚动更新策略**：仅保留当前物品的前一状态，将空间复杂度从 O(NM) 优化为 O(M)  
3. **贪心反例验证**：通过构造反例（如时间 60 的测试数据）排除错误解法  

---

### 拓展练习推荐
1. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060) - 01 背包变式（价值计算方式变化）  
2. [P1049 装箱问题](https://www.luogu.com.cn/problem/P1049) - 特殊 01 背包（价值=体积）  
3. [P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616) - 完全背包问题（对比 01 背包差异）  

---

### 调试经验摘录
> "当 j=10 时，如果正序遍历会导致 dp[5] 被多次使用，相当于完全背包的逻辑" —— [decoqwq]  
> "尝试用概率化贪心多次提交，发现数据随机时可能 AC，但通用性不足" —— [rainygame]  
> "二维数组初始化时注意 j 从 0 开始循环" —— [4041nofoundGeoge]

---
处理用时：41.82秒
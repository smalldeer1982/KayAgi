# 题目信息

# 海战

## 题目背景

在峰会期间，武装部队得处于高度戒备。警察将监视每一条大街，军队将保卫建筑物，领空将布满了 F-2003 飞机。

此外，巡洋船只和舰队将被派去保护海岸线。不幸的是，因为种种原因，国防海军部仅有很少的几位军官能指挥大型海战。因此，他们培养了一些新海军指挥官。军官们选择了“海战”游戏来帮助他们学习。

## 题目描述

在一个方形的盘上，放置了固定数量和形状的船只，每只船却不能碰到其它的船。在本题中，我们认为船是方形的，所有的船只都是由图形组成的方形。

求出该棋盘上放置的船只的总数。

## 说明/提示

对于 $100\%$ 的数据，$1 \le R,C \le 1000$。

## 样例 #1

### 输入

```
6 8
.....#.#
##.....#
##.....#
.......#
#......#
#..#...#```

### 输出

```
There are 5 ships.
```

# AI分析结果



### 综合分析与结论
本题核心难点在于判断船只是否相邻及形状是否为矩形。题解中主要思路可分为两类：  
1. **预判非法情况**：通过检测所有2x2方格是否存在3个#（即相邻情况），再统计连通块数量。  
2. **数学观察**：合法情况下，矩形右下角的#满足右、下方无#，直接统计此类点数量即为答案。

---

### 精选题解（评分≥4星）

#### 1. 钱逸凡题解（⭐️⭐️⭐️⭐️）  
**关键亮点**：  
- 通过2x2方格快速判断非法情况  
- DFS遍历连通块统计船数，逻辑清晰  
**核心代码**：  
```cpp
bool check(int i,int j){ // 判断2x2方格是否有3个#
    int cnt = (map[i][j]=='#') + (map[i+1][j]=='#') 
            + (map[i][j+1]=='#') + (map[i+1][j+1]=='#');
    return cnt != 3; 
}
```

#### 2. Dzhao题解（⭐️⭐️⭐️⭐️⭐️）  
**关键亮点**：  
- 发现矩形右下角特征：右、下方无#  
- O(n²)直接统计，无需搜索，效率最优  
**核心代码**：  
```cpp
for(int i=1;i<=n;i++) 
    for(int j=1;j<=m;j++)
        if(a[i][j]=='#' && a[i+1][j]!='#' && a[i][j+1]!='#')
            ans++;
```

#### 3. clyoyo题解（⭐️⭐️⭐️⭐️）  
**关键亮点**：  
- 结合两种判断条件，代码极简  
- 利用二维前缀和加速矩形验证  
**代码亮点**：  
```pascal
if 当前点右、下均为边界或. 则计数++
```

---

### 关键思路总结
**判断相邻的黄金法则**：所有2x2子矩阵中不能有3个#  
**统计船只的数学特征**：每个矩形的右下角#满足`右、下方无#`，直接统计此类点数量  

---

### 拓展与举一反三
1. **同类题目推荐**：  
   - P1451 求细胞数量（连通块计数）  
   - P1162 填涂颜色（矩阵边界判断）  
   - P1506 窗口渲染（连通块形状约束）

2. **调试经验摘录**：  
   > "考试时被一个3x3空心矩形卡住，意识到必须验证矩形内部全为#，后通过计算面积与#数量比对解决"  
   > —— 反映验证完整性的重要性

3. **算法套路**：  
   - 对矩阵问题的两种处理范式：  
     a) **预筛选非法情况**再处理合法情况  
     b) **发现数学规律**直接构造解  

---

### 推荐练习题目
1. [P1451 求细胞数量](https://www.luogu.com.cn/problem/P1451)  
2. [P1162 填涂颜色](https://www.luogu.com.cn/problem/P1162)  
3. [P1506 窗口渲染](https://www.luogu.com.cn/problem/P1506)

---
处理用时：57.30秒
# 题目信息

# 全排列问题

## 题目描述

按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。


## 说明/提示

$1 \leq n \leq 9$。

## 样例 #1

### 输入

```
3```

### 输出

```
    1    2    3
    1    3    2
    2    1    3
    2    3    1
    3    1    2
    3    2    1
```

# AI分析结果



### 综合分析与结论

本题解集呈现了全排列问题的多种解法，核心思路集中于**DFS回溯**与**STL库函数**两类。DFS回溯是算法基础，适合理解排列生成机制；STL的`next_permutation`则提供了高效实现。部分题解尝试了非递归、状态压缩等创新思路，但代码可读性或普适性不足。

---

### 高分题解推荐

#### 1. 和泉正宗（DFS详解） ★★★★★
**关键亮点**：  
- 结合搜索树图解，清晰阐释DFS递归过程与剪枝逻辑。  
- 代码注释详尽，变量命名规范（`pd[]`标记已用数字，`used[]`记录排列结果）。  
- 逐层递归边界处理明确，适合初学者理解回溯核心思想。  

**核心代码**：  
```cpp
void dfs(int k) {
    if (k == n) { print(); return; }  // 边界条件
    for (int i = 1; i <= n; i++) {
        if (!pd[i]) {               // 剪枝：未使用的数字
            pd[i] = 1;             // 标记使用
            used[k+1] = i;         // 记录当前排列
            dfs(k+1);              // 递归下一层
            pd[i] = 0;             // 回溯重置
        }
    }
}
```

---

#### 2. NeosKnight（STL极简实现） ★★★★☆  
**关键亮点**：  
- 利用`next_permutation`函数，代码极简（仅10行）。  
- 初始化为字典序最小排列，直接遍历所有排列。  
- 适合竞赛快速解题，但对算法原理理解帮助有限。  

**核心代码**：  
```cpp
int a[10] = {1,2,3,4,5,6,7,8,9};
do {
    for (int i = 1; i <= n; i++) 
        printf("%5d", a[i]);
    printf("\n");
} while (next_permutation(a+1, a+n+1));
```

---

#### 3. Harry_Potter（规范DFS模板） ★★★★  
**关键亮点**：  
- 代码结构规范，全局变量管理清晰（`use[]`标记数组）。  
- 递归参数设计简洁（`step`表示当前填充位置）。  
- 输出格式处理准确，适合直接套用为模板代码。  

**核心代码**：  
```cpp
void dfs(int step) {
    if (step > n) { print(); return; }
    for (int i = 1; i <= n; i++) {
        if (!vis[i]) {
            vis[i] = 1;
            ans[step] = i;
            dfs(step+1);
            vis[i] = 0;
        }
    }
}
```

---

### 最优思路总结
1. **DFS回溯法**：通过递归逐层固定每一位数字，利用标记数组剪枝，时间复杂度O(n!)，空间O(n)。  
2. **STL库函数**：`next_permutation`按字典序生成排列，代码简洁高效，但需注意初始数组有序。  

---

### 拓展与同类题目
- **排列衍生**：[P1157 组合的输出](https://www.luogu.com.cn/problem/P1157)（组合+排列）、[P1036 选数](https://www.luogu.com.cn/problem/P1036)（子集筛选）。  
- **回溯应用**：[P1219 八皇后](https://www.luogu.com.cn/problem/P1219)（经典棋盘回溯）、[P1120 小木棍](https://www.luogu.com.cn/problem/P1120)（剪枝优化）。  
- **状态压缩**：[P1433 吃奶酪](https://www.luogu.com.cn/problem/P1433)（位运算优化路径记录）。  

---

### 调试心得分选
- **初始排列顺序**：使用`next_permutation`时需确保初始数组为最小字典序（如升序）。  
- **场宽输出**：`printf("%5d")`中`5`为占位符宽度，漏写会导致格式错误。  
- **回溯重置**：DFS中标记数组必须在递归返回后及时重置，否则后续排列遗漏数字。

---
处理用时：70.41秒
# 题目信息

# 火烧赤壁

## 题目背景

曹操平定北方以后，公元 208 年，率领大军南下，进攻刘表。他的人马还没有到荆州，刘表已经病死。他的儿子刘琮听到曹军声势浩大，吓破了胆，先派人求降了。

孙权任命周瑜为都督，拨给他三万水军，叫他同刘备协力抵抗曹操。

隆冬的十一月，天气突然回暖，刮起了东南风。

没想到东吴船队离开北岸大约二里距离，前面十条大船突然同时起火。火借风势，风助火威。十条火船，好比十条火龙一样，闯进曹军水寨。那里的船舰，都挤在一起，又躲不开，很快地都烧起来。一眨眼工夫，已经烧成一片火海。

曹操气急败坏的把你找来，要你钻入火海把连环线上着火的船只的长度统计出来！

## 题目描述

给定每个起火部分的起点和终点，请你求出燃烧位置的长度之和。

## 说明/提示

### 数据规模与约定

对于全部的测试点，保证 $1 \leq n \leq 2 \times 10^4$，$-2^{31} \leq a <  b \lt 2^{31}$，且答案小于 $2^{31}$。




## 样例 #1

### 输入

```
3
-1 1
5 11
2 9```

### 输出

```
11```

# AI分析结果

### 综合分析与结论
这些题解主要围绕计算给定区间集合的总覆盖长度问题，思路和方法各有不同：
 - **排序合并类**：多数题解通过对区间起点或起点终点分别排序，遍历过程中处理区间重叠情况，直接计算总长度。如wxwoo、Drug__Lover、cold_cold、li20082008li、Forever丶CIL、qq872425710等作者的题解。此类方法直接模拟区间合并过程，思路直观。
 - **离散化类**：陈曦、碳酸钙CaCO3等作者利用离散化处理大数据范围问题。将大范围内的区间映射到小的数组下标，再通过差分等手段统计覆盖长度，适用于数据范围大但区间数量有限的场景。
 - **其他方法**：jins3599提出用线段树区间覆盖解决，但因空间问题有一个点MLE。CalvinJin把起点终点分开处理，通过状态标记计算覆盖长度。Weakest_Konjac在输入时处理区间重合，然后计算总着火船只长度。

整体来看，排序合并类方法相对简单直观，离散化适用于大数据范围，线段树虽理论可行但实现有空间限制。各题解在思路清晰度、代码可读性、优化程度上存在差异。

### 所选题解
 - **wxwoo题解（5星）**
    - **关键亮点**：思路清晰，通过图形展示说明区间顺序对结果无影响，进而提出分别对起点和终点排序，循环计算线段长度并处理重叠部分的方法。代码简洁明了，可读性高。
    - **核心代码**：
```cpp
#include<iostream>
#include<cstdio>
#include<algorithm>
using namespace std;
int main()
{
    int n;
    cin>>n;
    long long a[20001],b[20001],l=0;
    for(int i=0;i<n;i++)
        cin>>a[i]>>b[i];
    sort(a,a+n);
    sort(b,b+n);
    for(int i=0;i<n;i++)
    {
        l+=b[i]-a[i];
        if(i+1<n)
            if(b[i]>a[i+1])
                l-=b[i]-a[i+1];
    }
    cout<<l;
    return 0;
}
```
    - **核心思想**：先对起点数组 `a` 和终点数组 `b` 排序，遍历每个区间，先加上当前区间长度 `b[i] - a[i]`，若当前区间与下一个区间有重叠（`b[i] > a[i + 1]`），则减去重叠部分 `b[i] - a[i + 1]`，最终得到总覆盖长度。
 - **碳酸钙CaCO3题解（4星）**
    - **关键亮点**：采用离散化 + 差分的方法，有效解决数据范围大的问题。详细阐述离散化、差分及统计的步骤和原理，逻辑清晰。
    - **核心代码**：
```cpp
#include <iostream>
#include <algorithm>
using namespace std;
const int N=2e4+5;
int n;
int b[N*2];
int map[N*2],sum[N*2];
struct items{
    int l;
    int nl;
    int r;
    int nr;
}len[N];
int main(){
    cin>>n;
    for(int i=1;i<=n;i++){
        cin>>len[i].l>>len[i].r;
        b[i]=len[i].l,b[n+i]=len[i].r;
    }
    sort(b+1,b+1+2*n);
    auto k=unique(b+1,b+1+2*n);
    for(int i=1;i<=n;i++){
        len[i].nl=lower_bound(b+1, k, len[i].l)-b;
        len[i].nr=lower_bound(b+1, k, len[i].r)-b;
    }
    for(int i=1;i<=n;i++)map[len[i].nl+1]++,map[len[i].nr+1]--;
    for(int i=1;i<=(k-b-1);i++)sum[i]+=sum[i-1]+map[i];
    int l,r;
    long long ans=0;
    for(int i=1;i<=(k-b-1);i++){
        if(sum[i]!=0&&sum[i-1]==0)l=i-1;
        if(sum[i]!=0&&sum[i+1]==0){
            r=i;
            ans+=b[r]-b[l];
        }
    }
    cout<<ans<<endl;
    return 0;
}
```
    - **核心思想**：先将所有区间端点存入数组 `b` 并排序去重，通过 `lower_bound` 确定每个区间端点离散化后的位置。利用差分思想，在离散化后的数组上标记区间变化，再求前缀和得到每个位置的覆盖次数。最后遍历统计覆盖次数不为0的区间长度总和。
 - **li20082008li题解（4星）**
    - **关键亮点**：指出本题与NOIP2005普及组第二题的关联，采用排序后按区间关系处理的方法，思路明确，对区间处理情况分析详细。
    - **核心代码**：
```delphi
procedure qs(l,r:longint);
var
  i,j,s,mid:longint;
begin
  i:=l;
  j:=r;
  mid:=a[(l+r) div 2,1];
  repeat
    while a[i,1]<mid do inc(i);
    while a[j,1]>mid do dec(j);
    if i<=j then
    begin
      s:=a[i,1];
      a[i,1]:=a[j,1];
      a[j,1]:=s;
      s:=a[i,2];
      a[i,2]:=a[j,2];
      a[j,2]:=s;
      inc(i);
      dec(j);
    end;
  until i>j;
  if l<j then qs(l,j);
  if i<r then qs(i,r);
end;
begin
  readln(n);
  for i:=1 to n do
    readln(a[i,1],a[i,2]);
  qs(1,n);
  l:=a[1,1];
  r:=a[1,2];
  for i:=2 to n do
    if a[i,1]<=r then
    begin
      if a[i,2]>r then r:=a[i,2];
    end else
    begin
      t:=t+r-l;
      l:=a[i,1];
      r:=a[i,2];
    end;
  writeln(t+r-l);
end.
```
    - **核心思想**：先对区间按起点从小到大排序，初始化当前线段起点 `l` 和终点 `r` 为第一个区间的端点。遍历后续区间，若当前区间起点小于等于 `r`，更新 `r` 为两者终点较大值；若当前区间起点大于 `r`，则累加 `r - l` 并更新 `l` 和 `r` 为当前区间端点，最后加上最后一段线段长度。

### 最优关键思路或技巧
排序合并的思路简单直接，对于区间数量有限且数据范围不大的情况高效实用。离散化 + 差分方法在处理大数据范围时优势明显，通过映射和差分操作简化统计过程。在实现中，合理利用排序函数、二分查找函数（如 `lower_bound`）以及数组操作技巧，能有效提高代码效率和可读性。

### 可拓展之处
同类型题常涉及区间合并、区间统计等问题，类似算法套路有扫描线算法，用于处理二维平面上的区间问题；线段树也常用于高效处理区间查询和修改操作，但需注意空间复杂度。

### 相似知识点洛谷题目推荐
 - **P1241 括号序列**：涉及区间匹配和统计问题，可通过类似思路处理区间关系。
 - **P3372 【模板】线段树 1**：经典线段树题目，考察线段树的区间修改和查询操作。
 - **P1972 [SDOI2009]HH的项链**：需要利用离散化和数组操作来统计不同颜色珠子的数量，与本题离散化思路相关。

### 个人心得摘录与总结
暂无个人心得相关内容。 

---
处理用时：56.34秒
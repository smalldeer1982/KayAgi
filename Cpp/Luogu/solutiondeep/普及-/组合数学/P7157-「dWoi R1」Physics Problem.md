# 题目信息

# 「dWoi R1」Physics Problem

## 题目背景

面对白板上的物理题，王马陷入了沉思 ……

## 题目描述

有 $n$ 个状态，编号为 $1$ 到 $n$。这 $n$ 个状态之间有 $k$ 种转换关系，第 $i$ 个转换关系描述为：第 $u_i$ 个状态和第 $v_i$ 个状态可以进行转换。当两个状态之间没有直接的转换关系但有间接的转换关系时，那么这两个状态之间有升降华关系。

求有多少个升降华关系。

**王马不会做很难的物理题，所以保证一个状态一定可以通过直接或间接的转换为另一个任意状态。**

## 说明/提示

#### 样例 1 解释

一共有 $3$ 个状态，编号为 $1,2,3$，第 $1$ 个状态和第 $2$ 个状态之间有转换关系，第 $2$ 个状态和第 $3$ 个状态之间有转换关系，第 $1$ 个状态和第 $3$ 个状态之间没有直接的转换关系，但可以用第 $2$ 个状态做桥梁进行转换，所以第 $1$ 个状态和第 $3$ 个状态之间有升降华关系。只有这一个升降华关系，输出 $1$。

#### 数据规模与约定

**本题采用捆绑测试。**

- Subtask 1（5 pts）：$n \le 2$。
- Subtask 2（10 pts）：$k=n-1$，$u_i+1=v_i$。
- Subtask 3（10 pts）：$k=n-1$，$u_i=1$。
- Subtask 4（25 pts）：$n,k \le 1000$。
- Subtask 5（50 pts）：无特殊限制。

对于 $100\%$ 的数据，$1 \le n,k \le 10^7$，$1 \le u_i,v_i \le n$。

保证 $u_i \ne v_i$ 且不存在 $i \ne j ∧(u_i =u_j∧v_i=v_j)$ 和 $i \ne j∧(u_i=v_j∧u_j=v_i)$。

这句话也可以理解为无重边无自环。

#### 提示

注意，对于下面这种情况（`a - b` 代表 $a$ 能与 $b$ 互相转换）：

```cpp
1 - 2
2 - 3
1 - 3
```

第 $1$ 个状态和第 $3$ 个状态算有直接转换关系，即转换关系取“最短路”。

## 样例 #1

### 输入

```
3 2
1 2
2 3```

### 输出

```
1```

# AI分析结果

### 分析与结论
本题给定一个 $n$ 点 $k$ 边的连通无向图，无重边无自环，要求计算有多少组点对使得这两个点之间的最短路长度大于 $1$。

### 所选题解（≥4星）
- **作者：一只书虫仔 (赞：22)**
    - **星级**：5星
    - **亮点**：思路清晰，对每个子任务都有详细分析，从特殊情况逐步推导到通用解法，最后给出简洁的 $O(1)$ 代码。
    - **个人心得**：无

### 重点代码
```cpp
#include <bits/stdc++.h>

using namespace std;

int main () {
    long long n, k;
    scanf("%lld%lld", &n, &k);
    printf("%lld", n *(n - 1) / 2 - k);
    return 0;
}
```

### 核心实现思想
先计算 $n$ 个点中任意选两个点的组合数 $\mathrm{C}_n^2=\frac{n\times(n - 1)}{2}$，这是所有可能的点对数量。然后因为 $k$ 条边直接相连的点对不满足最短路长度大于 $1$ 的条件，所以从总点对数量中减去 $k$，即得到满足要求的点对数量。

### 最优关键思路或技巧
- **思维方式**：通过分析题目条件，将问题转化为组合数学问题，利用组合数公式和简单的减法运算得到结果，避免了复杂的图遍历算法。
- **代码实现技巧**：直接根据推导出的公式进行计算，时间复杂度为 $O(1)$，提高了效率。

### 可拓展之处
同类型题或类似算法套路：
- 给定一个图，计算满足某种特定路径条件的点对数量，可先分析图的性质（如连通性、有无重边自环等），再通过组合数学或图论算法求解。
- 对于一些图的计数问题，可先考虑所有可能的情况，再排除不符合条件的情况。

### 推荐洛谷题目
- P1119 灾后重建：涉及图的连通性和最短路径问题。
- P2880 [USACO07JAN]Balanced Lineup G：与图论中的路径和连通性有一定关联。
- P3371 【模板】单源最短路径（弱化版）：考察图的最短路径算法。

### 个人心得摘录与总结
- **作者：Keep_RAD**：比赛时以为是并查集问题，套模板交上去超时。赛后发现题目中“保证一个状态一定可以通过直接或间接的转换为另一个任意状态”这个条件，从而可以直接用 $O(1)$ 公式求解。总结是要仔细读题，抓住关键条件，避免盲目套模板。
- **作者：VanHelsing**：用并查集思路做这道题能过，但后来知道了更简单的 $C_n^2 - m$ 做法，感到生气。提醒我们在做题时要多思考更优的解法。 

---
处理用时：21.59秒
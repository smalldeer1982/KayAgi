# 题目信息

# [语言月赛202304] 写大作业

## 题目描述

扶苏为了写计算理论大作业已经 $36$ 小时没有合眼了。

为了能快点睡觉，扶苏找到了 $n$ 份文献，第 $i$ 份文献是一个字符串 $s_i$，她打算把这些文献组合起来。

具体来说，一共有两种操作：

- `1 x y`：把文献 $s_x$ 整体拼接到 $s_y$ 的后面，然后删除 $s_x$。
- `2 x y`：查询 $s_x$ 和 $s_y$ 是否**相似**。

我们保证在 `1 x y` 操作出现后，字符串 $s_x$ **不会**出现在接下来的任何操作中。这就是说，操作 $1$ 至多有 $n-1$ 次。

**相似**的定义是：对两个字符串 $s_x$ 和 $s_y$，如果存在一种重新排列 $s_x$ 的方法，使得重排后的 $s_x$ 和 $s_y$ 相等，则称 $s_x$ 和 $s_y$ **相似**。

例如，假设 $s_1 = \texttt{ab}, s_2 = \texttt{cd}, s_3 = \texttt{abcd}$，则执行 `1 1 2` 后，$s_1$ 被删除，$s_2 = \texttt{cdab}, s_3 = \texttt{abcd}$；继续执行 `2 2 3` 后，因为可以把 $s_2$ 重排为 $\texttt{abcd}$，所以 $s_2$ 和 $s_3$ 相似。

注意，操作 $2$ 不会对字符串做出实际修改。

## 说明/提示

### 数据规模与约定

- 对 $30\%$ 的数据，保证 $n = 2$，$q = 1$。
- 对 $60\%$ 的数据，保证 $n \leq 6$，$q \leq 6$，$|s_i| \leq 6$。
- 对 $100\%$ 的数据，保证 $2 \leq n \leq 10^5$，$1 \leq q \leq 10^6$，$1 \leq o \leq 2$，$1 \leq x, y \leq n$，且输入字符串的总长度不超过 $10^6$，输入字符串仅含小写英文字母，且不是空串。

## 样例 #1

### 输入

```
4 4
ab
cd
abcd
abcc
1 1 2
2 2 3
2 3 4
2 2 4```

### 输出

```
Yes
No
No```

# AI分析结果

### 综合分析与结论

本题的核心在于高效处理字符串的拼接和相似性判断。题解的主要思路是通过维护每个字符串的字符频率来避免直接操作字符串，从而提高效率。60分做法通过模拟字符串拼接和字符频率统计来实现，而100分做法则直接维护字符频率数组，避免了字符串的实际拼接操作。

### 所选题解

#### 题解1：一扶苏一 (5星)

**关键亮点：**
- **思路清晰**：明确提出了通过维护字符频率来简化问题，避免了直接操作字符串的复杂性。
- **代码可读性高**：代码结构清晰，注释详细，易于理解。
- **优化程度高**：通过直接维护字符频率数组，显著提高了算法的效率。

**核心代码：**
```cpp
cin >> o >> x >> y;
if (o == 1) {
  for (int j = 0; j < 26; ++j) b[y][j] += b[x][j];
} else {
  bool ans = true;
  for (int j = 0; j < 26; ++j) if (b[x][j] != b[y][j]) ans = false;
  cout << (ans ? "Yes\n" : "No\n");
}
```

**实现思想：**
- 使用二维数组 `b` 来记录每个字符串的字符频率。
- 对于拼接操作，直接将 `s_x` 的字符频率加到 `s_y` 上。
- 对于相似性判断，比较两个字符串的字符频率是否完全相同。

### 最优关键思路或技巧

- **字符频率维护**：通过维护字符频率数组，避免了直接操作字符串，提高了效率。
- **避免重复计算**：在相似性判断中，直接比较字符频率数组，避免了重复扫描字符串。

### 可拓展之处

- **类似问题**：可以应用于需要频繁进行字符串拼接和相似性判断的场景，如文本处理、数据压缩等。
- **算法套路**：类似的问题可以通过维护某种状态（如字符频率）来简化操作，提高效率。

### 推荐题目

1. **P3370 【模板】字符串哈希** - 考察字符串哈希的应用。
2. **P3375 【模板】KMP字符串匹配** - 考察KMP算法的实现与应用。
3. **P3376 【模板】AC自动机（简单版）** - 考察AC自动机的实现与应用。

### 个人心得

- **调试经历**：在实现过程中，需要注意字符频率数组的初始化和更新，避免出现未定义行为。
- **踩坑教训**：在拼接操作后，需要确保 `s_x` 不再被使用，否则可能导致错误。
- **顿悟感想**：通过维护字符频率数组，可以显著简化问题，提高算法的效率和可读性。

---
处理用时：19.85秒
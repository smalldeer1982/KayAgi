# 题目信息

# [语言月赛 202308] 小粉兔的元素反应

## 题目背景

![](https://cdn.luogu.com.cn/upload/image_hosting/bowegye7.png)

## 题目描述

在小粉兔所处的 Tivat（蒂瓦特）世界，有 $n$ 种元素。其中每种元素都可以蕴含一定的能量，且不同元素之间可以进行反应。

小粉兔现在掌握了这 $n$ 种元素。初始时，他所掌握的每种元素所蕴含的能量依次为 $a _ 1, a _ 2, \cdots, a _ n$。

不同元素之间的反应相关细节如下：

**反应条件**：对于任意两种元素 $i, j$（$i \neq j$），如果 $a _ i \times a _ j$ 是 $154$ 的倍数或 $147$ 的倍数，则二者可以进行反应。**元素不可与自身反应**。  
**反应结果**：包含这两种元素在内，所有的 $n$ 种元素所蕴含的能量均翻倍（即，所有 $a _ i$ 均变为原来的两倍）。  
**反应次数**：任意两种元素之间的反应次数均没有限制（即，同两种元素，在一直符合反应条件的情况下，可以反应多次）。

现在，小粉兔想要通过元素反应，使得自己手头的元素能量总和大于等于 $k$，从而打败 Tivat 世界最强大的怪兽——地文（Devil）。他现在想要知道，通过若干次（$0$ 次亦可）反应后，$a _ 1 + a _ 2 + \cdots + a _ n$ 是否可以大于等于 $k$。

## 说明/提示

### 样例 1 解释

首先，小粉兔可以选择 $143$ 与 $238$ 做乘法，结果为 $143 \times 238 = 34034 = 154 \times 221$。此时所有元素能量翻倍，变为 $286, 476, 348, 398$，而 $286 + 476 + 348 + 398 = 1508 \geq 1395$，因此小粉兔可以通过一次操作达到目的。

### 样例 2 解释

$677 + 293 + 859 + 751 = 2580 \geq 1441$，因此小粉兔不操作便可达到目的。

### 样例 3 解释

小粉兔无法引发任何元素反应，最终四能量相加 $< 1295$，因此小粉兔不可以达到目的。

### 数据规模与约定

设 $N = \sum n$，代表单个测试点内所有测试数据的 $n$ 的总和。设 $K$ 代表单个测试点内所有测试数据的 $k$ 的长度总和。

对于 $100\%$ 的数据，保证 $1 \leq T \leq 10 ^ 5$，$1 \leq n, N \leq 10 ^ 6$，$1 \leq k \leq 10 ^ {10 ^ 5}$，$1 \leq a _ i \leq 10 ^ 9$，$1 \leq K \leq 2 \times 10 ^ 6$。


| 测试点编号 | $n$ | $k$ | $a _ i$ |
| :----------: | :----------: | :----------: | :----------: | 
| $1$ | $= 1$ | $\leq 10 ^ 9$ | $\leq 10 ^ 9$ |
| $2 \sim 3$ | $\leq 100$ | $\leq 10 ^ {9}$ | $\leq 10 ^ 5$ |
| $4$ | $\leq 1000$ | $\leq 10 ^ {9}$ | $\leq 13$ |
| $5$ | $\leq 1000$ | $\leq 10 ^ {18}$ | $\leq 10 ^ 9$ |
| $6 \sim 7$ | $\leq 1000$ | $\leq 10 ^ {10 ^ 5}$ | $\leq 10 ^ 9$ |
| $8 \sim 10$ | $\leq 10 ^ 6$ | $\leq 10 ^ {10 ^ 5}$ | $\leq 10 ^ 9$ |


## 样例 #1

### 输入

```
1
4 1395
143 238 174 199```

### 输出

```
Yes```

## 样例 #2

### 输入

```
1
4 1441
677 293 859 751```

### 输出

```
Yes```

## 样例 #3

### 输入

```
1
4 1295
136 875 196 34```

### 输出

```
No```

# AI分析结果

### 综合分析与结论

本题的核心在于通过元素反应使得元素能量总和达到或超过目标值 \( k \)。题解的关键在于如何高效判断是否存在满足条件的元素对，并利用这些元素对进行无限翻倍操作。以下是对题解的分析与总结：

1. **思路清晰度**：题解通过分析元素反应的数学条件，将问题转化为对元素因数的统计与判断，思路清晰且逻辑严谨。
2. **代码可读性**：代码结构合理，注释详细，易于理解。
3. **优化程度**：通过预处理和因数统计，避免了暴力枚举，显著降低了时间复杂度。

### 所选题解

#### 题解：Maxmilite (5星)

**关键亮点**：
- **数学分析**：通过分解因数，将问题转化为对元素因数的统计与判断，避免了暴力枚举。
- **高效处理**：利用预处理和因数统计，显著降低了时间复杂度。
- **代码简洁**：代码结构清晰，注释详细，易于理解。

**核心实现思想**：
1. **\( k \) 的处理**：通过字符串读入 \( k \)，并根据其长度决定是否使用 \( 10^{16} \) 作为上限。
2. **特殊处理 \( n = 1 \)**：直接判断单个元素是否满足条件。
3. **因数统计**：统计元素中能整除 \( 2, 3, 7, 11 \) 的数量。
4. **反应判断**：遍历数组，判断是否存在满足条件的元素对。

**核心代码片段**：
```cpp
string s;
cin >> s;
if (s.length() < 17) {
    k = stoll(s);
} else {
    k = 1e16;
}

if (n == 1) {
    if (a[1] >= k) {
        cout << "Yes" << endl;
    } else {
        cout << "No" << endl;
    }
    continue;
}

int cnt[15];
int ops[] = { 2, 3, 7, 11 };
memset(cnt, 0, sizeof(cnt));
for (int i = 1; i <= n; ++i) {
    for (int j = 0 ; j < 4; ++j) {
        if (a[i] % ops[j] == 0) {
            ++cnt[ops[j]];
        }
    }
}

int flag = 0;
for (int i = 1; i <= n; ++i) {
    if (a[i] % 154 == 0 || a[i] % 147 == 0) { cout << "Yes" << endl; flag = 1; break; }
    if (a[i] % 21 == 0 && cnt[7] >= 2) { cout << "Yes" << endl; flag = 1; break; }
    if (a[i] % 49 == 0 && cnt[3]) { cout << "Yes" << endl; flag = 1; break; }
    if (a[i] % 77 == 0 && cnt[2]) { cout << "Yes" << endl; flag = 1; break; }
    if (a[i] % 14 == 0 && cnt[11]) { cout << "Yes" << endl; flag = 1; break; }
    if (a[i] % 22 == 0 && cnt[7]) { cout << "Yes" << endl; flag = 1; break; }
}
if (!flag)
    cout << "No" << endl;
```

### 关键思路与技巧

1. **因数分解**：通过分解 \( 154 \) 和 \( 147 \) 的因数，将问题转化为对元素因数的统计与判断。
2. **预处理与统计**：通过预处理和因数统计，避免了暴力枚举，显著降低了时间复杂度。
3. **无限翻倍**：利用满足条件的元素对进行无限翻倍操作，使得元素能量总和迅速增长。

### 可拓展之处

1. **类似问题**：可以拓展到其他需要判断元素对是否满足特定条件的问题，如化学反应、物理反应等。
2. **算法套路**：类似的因数统计与判断方法可以应用于其他需要高效判断元素对是否满足特定条件的问题。

### 推荐题目

1. **洛谷 P1001 A+B Problem**：考察基础输入输出与简单计算。
2. **洛谷 P1002 过河卒**：考察动态规划与状态转移。
3. **洛谷 P1003 铺地毯**：考察模拟与逻辑判断。

通过以上分析与总结，可以更好地理解本题的解题思路与技巧，并在类似问题中举一反三。

---
处理用时：36.07秒
# 题目信息

# [语言月赛 202311] 方程求解

## 题目描述

小 A 有 $n$ 个关于 $x$ 的方程，第 $i$ 个方程形如 $a_ix_i+b_i=c_i$。方程的解 $x$ 均为正整数，例如下面几个方程都是符合要求的方程：

```
2x+4=10
-3x+13=10
4x-8=16
```

其中，第一组方程的解为 $x_1=3$，第二组方程的解为 $x_2=1$，第三组方程的解为 $x_3=6$。

小 A 想要知道，给定 $L,R$，在 $L\leq x\leq R$ 的范围内，有多少个正整数 $x$ 满足 $x$ 是其中至少一个方程的解。为了防止你欺骗他，他会询问你 $Q$ 次。

## 说明/提示

**【样例解释】**

对于第一组样例，即为题目中的举例。三组方程的解分别为 $x_1=3,x_2=1,x_3=6$。则：

- 对于 $1\leq x\leq 6$ 的范围，有 $3$ 个 $x$ 的取值（$x=1,3,6$）是其中至少一个方程的解；
- 对于 $1\leq x\leq 8$ 的范围，同上所述；
- 对于 $3\leq x\leq 6$ 的范围，有 $2$ 个 $x$ 的取值（$x=3,6$）是其中至少一个方程的解；
- 对于 $4\leq x\leq 5$ 的范围，不存在一个 $x$ 是其中至少一个方程的解；
- 因此分别输出 $3,3,2,0$。

对于第二组样例，五组方程的解分别为 $x_1=3,x_2=5,x_3=5,x_4=3,x_5=3$。则：

- 对于 $1\leq x\leq 3$ 的范围，只有 $x=3$ 满足是其中至少一个方程的解；
- 对于 $1\leq x\leq 5$ 的范围，有 $2$ 个 $x$ 的取值（$x=3,5$）是其中至少一个方程的解；
- 对于 $3\leq x\leq 5$ 的范围，有 $2$ 个 $x$ 的取值（$x=3,5$）是其中至少一个方程的解；
- 因此分别输出 $1,2,2$。

**【数据范围】**

数据保证，$1\leq n,Q\leq 1000$，方程中 $a_i,b_i,c_i$ 满足 $1 \leq |a_i|,|b_i|,|c_i| \leq 2000$，每一组方程的解 $x_i$ 必定为正整数。询问时的 $L,R$ 满足 $1\leq L\leq R\leq 1000$。

本题前八个测试点每个测试点 8 分，后四个测试点每个测试点 9 分。

## 样例 #1

### 输入

```
3 4
2x+4=10
-3x+13=10
4x-8=16
1 6
1 8
3 6
4 5```

### 输出

```
3
3
2
0```

## 样例 #2

### 输入

```
5 3
5x-2=13
8x+5=45
4x-12=8
-2x+10=4
3x-7=2
1 3
1 5
3 5```

### 输出

```
1
2
2```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效地求解一元一次方程，并在给定范围内统计满足条件的解。题解中主要涉及以下难点：
1. **方程解析**：如何从字符串中提取出系数和常数项。
2. **解的范围统计**：如何在给定范围内快速统计满足条件的解。

题解中提供了两种主要的思路：
1. **字符串处理**：通过手动解析字符串提取数字，类似于快速读入的技巧。
2. **格式化输入**：使用 `scanf` 的格式化输入功能直接提取数字。

对于统计解的范围，题解中采用了**桶思想**，通过一个数组标记哪些解是有效的，然后在询问时通过遍历统计。

### 所选高星题解

#### 题解1：chen_zhe (5星)
**关键亮点**：
- 使用 `scanf` 的格式化输入功能直接提取方程中的系数和常数项，简化了字符串处理的复杂度。
- 采用桶思想，通过一个数组标记有效解，查询时只需遍历统计，时间复杂度为 O(n + Q)，非常高效。
- 代码简洁，思路清晰，适合初学者理解和实现。

**核心代码片段**：
```cpp
int c[1001] = {0}; // 桶数组，标记有效解

for (int i = 0; i < n; ++i) {
    int a, b, c_val;
    scanf("%dx%d=%d", &a, &b, &c_val);
    int x = (c_val - b) / a;
    if (x >= 1 && x <= 1000) c[x] = 1;
}

while (Q--) {
    int L, R, cnt = 0;
    scanf("%d%d", &L, &R);
    for (int i = L; i <= R; ++i) cnt += c[i];
    printf("%d\n", cnt);
}
```

### 最优关键思路与技巧
1. **格式化输入**：使用 `scanf` 的格式化输入功能直接提取数字，避免了复杂的字符串处理。
2. **桶思想**：通过数组标记有效解，查询时只需遍历统计，时间复杂度低，适合小范围数据。

### 可拓展之处
- **大范围数据**：如果解的范围较大（如 1e6），可以考虑使用**前缀和**或**二分查找**来优化查询。
- **多方程解**：如果方程的解可能重复，可以使用 `set` 来存储唯一解，避免重复统计。

### 推荐相似题目
1. [P1042 乒乓球](https://www.luogu.com.cn/problem/P1042)：考察字符串处理和统计。
2. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059)：考察桶思想和统计。
3. [P1068 分数线划定](https://www.luogu.com.cn/problem/P1068)：考察排序和统计。

### 个人心得总结
- **调试经历**：在处理字符串时，确保所有边界情况都被考虑到，例如负数和零的处理。
- **顿悟感想**：使用 `scanf` 的格式化输入功能可以大大简化代码，提高可读性和效率。

---
处理用时：23.12秒
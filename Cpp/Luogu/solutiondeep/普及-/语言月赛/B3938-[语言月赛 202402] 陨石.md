# 题目信息

# [语言月赛 202402] 陨石

## 题目背景

卷王来到了他的好朋友 bj12z_jiasiyuan 的农场，打算在那里过上一晚。但是在看新闻时，他们获得了一个不幸的消息，一场陨石雨就快要降临了……

## 题目描述

bj12z_jiasiyuan 的农场里有 $n$ 间牛棚，编号为 $1$ 到 $n$。第 $i$ 间牛棚的防御值为 $a_i$。

陨石雨将会**在 $t$ 秒后**来临。在陨石雨来临的时候，会有 $m$ 块陨石撞击牛棚，第 $i$ 块陨石会撞击到第 $x_i$ 间牛棚。当一块陨石撞击一间牛棚时，牛棚的防御值**会减去 $2$ 点**。而当一间牛棚的防御值 $\leq 0$ 时，牛棚会被破坏。

bj12z_jiasiyuan 有很多补给，每个补给可以给一间牛棚**增加 $1$ 点防御值**。幸运的是，卷王可以从一间牛棚瞬移到另一间牛棚（瞬移**不需花费任何时间**），用补给给牛棚增加防御值。每次补给需要 $1$ 秒的时间。

卷王只有 $t$ 秒种的时间可以出去补给，他希望让被破坏的牛棚越少越好。请你输出**最优策略下**被保护的牛棚的数量。

## 说明/提示

### 样例 1 解释

一种最优的补给方法是补给 $1$ 号牛棚 $1$ 点防御值，补给 $2$ 号牛棚 $2$ 点防御值。

在这种情况下，各牛棚防御值变化如下，其中蓝色数字代表初始防御值，绿色数字代表补给，红色数字代表陨石撞击：

- $1$ 号：${\color{blue} 2} + {\color{green}1} - {\color{red}2} = 1$；
- $2$ 号：${\color{blue} 1} + {\color{green}2} - {\color{red}2} = 1$；
- $3$ 号：${\color{blue} 3} - {\color{red}2} - {\color{red}2} = -1$；
- $4$ 号：${\color{blue} 5} - {\color{red}2} = 3$。

有且仅有 $3$ 号牛棚被破坏，可保护三个牛棚。

### 数据规模与约定

对于 $100\%$ 的数据，$1\leq x_i \leq n\leq 5 \times10^3$，$1\leq m\leq 10^6$，$0\leq t\leq 10^6$，$1\leq a_i \leq 10^6$，$1 \leq T \leq 5 \times 10^3$。  
保证单个测试点内所有测试数据 $n$ 的总和不超过 $5 \times 10^4$，所有测试数据 $m$ 的总和不超过 $3 \times 10^6$。

| 测试点编号 | 特殊限制 |
| :----------: | :----------: |
| $1, 2$ | $T = 1$，$n = 1$ |
| $3, 4$ | $T = 1$，每间牛棚恰好被击中一次 |
| $5$ | $T = 1$，$1\leq x_i \leq n \leq 100$ |
| $6$ | $T = 1$ |
| $7$ | $1\leq x_i \leq n \leq 100$ |
| $8 \sim 10$ | 无特殊限制 |

## 样例 #1

### 输入

```
1
4 3 5
2 1 3 5
3 1 2 4 3
```

### 输出

```
3
```

## 样例 #2

### 输入

```
4
3 4 2
5 2 4
2 1
3 2 20
6 6 6
1 3 3 1 2 1 1 1 2 2 2 1 1 3 1 2 2 3 3 1
2 0 2
1 2
1 1
5 3 12
4 5797 2 1 1
5 4 3 2 4 4 5 5 5 5 1 1
```

### 输出

```
3
0
1
3
```

# AI分析结果

### 综合分析与结论

本题的核心在于如何在有限的时间内，通过补给策略最大化保护牛棚。题解的关键思路是：

1. **预处理陨石撞击的影响**：先计算每个牛棚在陨石撞击后的防御值。
2. **计算补给需求**：根据防御值计算每个牛棚需要的补给量。
3. **贪心策略**：优先补给需求最小的牛棚，以最大化保护数量。

### 所选题解

#### 题解1：Maxmilite (5星)

**关键亮点**：
- **思路清晰**：通过预处理陨石撞击的影响，再计算补给需求，最后使用贪心策略进行补给分配。
- **代码可读性高**：代码结构清晰，注释详细，易于理解。
- **优化程度高**：使用冒泡排序进行简单排序，虽然时间复杂度较高，但在数据规模较小的情况下足够高效。

**个人心得**：
- **调试经历**：作者提到在调试过程中发现需要确保补给量不为负，否则会导致错误。
- **顿悟感想**：通过将问题转化为“补给需求”的计算，简化了问题的复杂度。

**核心代码**：
```cpp
for (int i = 1; i <= m; ++i) {
    int x;
    cin >> x;
    a[x] -= 2;
}

for (int i = 1; i <= n; ++i) {
    a[i] = 1 - a[i];
}

for (int i = 1; i <= n; ++i) {
    for (int j = 1; j < n; ++j) {
        if (a[j] > a[j + 1])
            swap(a[j], a[j + 1]);
    }
}

int ans = 0;
for (int i = 1; i <= n; ++i) {
    if (a[i] <= 0) {
        ans++;
    } else {
        if (t >= a[i]) {
            t -= a[i];
            ans++;
        } else break;
    }
}
cout << ans << endl;
```

### 最优关键思路或技巧

1. **预处理与贪心结合**：先处理陨石撞击的影响，再通过贪心策略分配补给，确保在有限时间内最大化保护牛棚。
2. **排序优化**：虽然冒泡排序时间复杂度较高，但在数据规模较小的情况下，其简单性和易实现性使其成为一个不错的选择。

### 可拓展之处

- **同类型题**：类似的问题可以出现在资源分配、任务调度等领域，如如何在有限资源下最大化任务完成数量。
- **算法套路**：贪心算法与预处理结合的策略，适用于需要在有限资源下进行最优分配的问题。

### 推荐洛谷题目

1. **P1004 方格取数**：考察贪心算法与动态规划的结合。
2. **P1048 采药**：经典的背包问题，考察资源分配与优化。
3. **P1060 开心的金明**：类似资源分配问题，考察如何在有限预算下最大化满意度。

### 总结

本题解通过清晰的思路和高效的代码实现，展示了如何在有限时间内通过补给策略最大化保护牛棚。其预处理与贪心策略的结合，为类似问题提供了有效的解决思路。

---
处理用时：23.13秒
# 题目信息

# [语言月赛 202404] 天上的气球

## 题目描述

现在有一块很大的草原，这个草原分成了 $n$ 行 $m$ 列。
在这块草原的天空中，飘着 $k$ 个气球。第 $i$ 个气球，位置在第 $x_i$ 行第 $y_i$ 列上空，距离地面高度 $h_i$，气球的颜色为 $c_i$。

从一个位置向上看，只能看到这个位置正上方的，距离地面最近的气球。小明想知道，从每个位置向上看，能看到的气球的颜色分别是什么。如果这个位置上空没有气球，则输出 $0$。

## 说明/提示

### 样例 1 解释

- 第一行第一列上空只有一个气球，颜色为 $3$；
- 第一行第二列上空高度最低的气球高度为 $8$，颜色为 $9$；
- 第二行第一列上空高度最低的气球高度为 $4$，颜色为 $4$；
- 第二行第二列上空没有气球。

### 数据规模与约定

对于 $100\%$ 的数据，$1 \leq n, m \leq 10^3$，$1 \leq k \leq 10^5$，$1 \leq h_i, c_i \leq 10^9$。保证不存在两个气球的位置（$x_i, y_i, h_i$）完全相同。

| 测试点编号 | $n, m$ | $k$ | $h_i$ | $c_i$ | 特殊性质 |
| :-: | :-: | :-: | :-: | :-: | :-: |
| $1$ | $= 2$ | $\leq 10$ | $\leq 10$ | $\leq 10$ | 无 |
| $2, 3$ | $ \leq 10$ | $\leq 200$ | $\leq 10$ | $\leq 10$ | 无 |
| $4$ | $= 1$ | $\leq 10^5$ | $\leq 10^9$ | $\leq 10^9$ | 无 |
| $5$ | $\leq 300$ | $\leq 9 \times 10^4$ | $\leq 10^9$ | $\leq 10^9$ | 每一个位置上空**恰好**有一个气球 | 
| $6$ | $\leq 1000$ | $\leq 10^5$ | $\leq 10^9$ | $\leq 10^9$ | 每一个位置上空**至多**有一个气球 | 
| $7$ | $\leq 1000$ | $\leq 10^5$ | $\leq 10^9$ | $= 1$ | 无 | 
| $8 \sim 10$ | $\leq 1000$ | $\leq 10^5$ | $\leq 10^9$ | $\leq 10^9$ | 无 | 

## 样例 #1

### 输入

```
2 2 5
2 1 4 4
1 2 8 9
1 2 9 4
1 1 8 3
2 1 9 3
```

### 输出

```
3 9
4 0
```

## 样例 #2

### 输入

```
3 3 5
1 1 6 7
2 2 7 5
3 1 8 3
2 2 6 1
2 1 3 4
```

### 输出

```
7 0 0
4 1 0
3 0 0
```

# AI分析结果

### 综合分析与结论

本题的核心问题是从每个位置向上看，找到距离地面最近的气球颜色。由于气球数量较多（$k \leq 10^5$），且草原大小较大（$n, m \leq 10^3$），直接暴力求解可能会导致时间复杂度过高。因此，关键在于如何高效地处理每个气球，并快速找到每个位置的最低气球。

Maxmilite的题解采用了“擂台法”的思路，通过维护两个二维数组 $H$ 和 $C$，分别记录每个位置的最低气球高度和对应的颜色。这种方法的时间复杂度为 $O(k)$，空间复杂度为 $O(n \times m)$，能够高效地解决问题。

### 所选高星题解

#### 题解：Maxmilite (5星)

**关键亮点：**
1. **思路清晰**：使用擂台法，通过比较每个气球的高度，更新每个位置的最低气球信息。
2. **代码简洁**：代码实现简洁明了，易于理解。
3. **高效性**：时间复杂度为 $O(k)$，能够处理最大数据规模。

**核心代码实现思想：**
```cpp
int H[1005][1005], C[1005][1005];

for (int i = 1; i <= n; ++i) {
  for (int j = 1; j <= m; ++j) {
    H[i][j] = 1000000001; // 初始化擂台高度为极大值
  }
}

for (int i = 1; i <= k; ++i) {
  int x, y, h, c;
  cin >> x >> y >> h >> c;
  if (h < H[x][y]) {
    H[x][y] = h;
    C[x][y] = c;
  }
}
```
**代码说明：**
- 初始化 $H$ 数组为极大值，确保第一个气球能够更新。
- 遍历每个气球，如果当前气球高度小于 $H[x][y]$，则更新 $H[x][y]$ 和 $C[x][y]$。

### 最优关键思路或技巧

1. **擂台法**：通过维护一个擂台（即记录当前最低高度的数组），逐个比较并更新最低高度的气球信息。这种方法适用于需要找到最小值或最大值的场景。
2. **初始化技巧**：将擂台初始化为极大值，确保第一个气球能够顺利更新擂台。这种技巧在处理最小值问题时非常有用。

### 可拓展之处

1. **类似问题**：擂台法可以应用于其他需要找到最小值或最大值的问题，如找到每个位置的最大值、最小值等。
2. **数据结构优化**：如果数据规模更大，可以考虑使用更高效的数据结构（如优先队列）来优化查找和更新操作。

### 推荐相似题目

1. **P1047 校门外的树**：考察区间覆盖和最小值问题，可以使用类似擂台法的思路。
2. **P1886 滑动窗口**：考察滑动窗口中的最大值和最小值，可以使用优先队列或擂台法。
3. **P1090 合并果子**：考察最小堆的应用，类似于擂台法中的最小值维护。

### 个人心得摘录

Maxmilite在题解中提到：“擂台法在处理最小值问题时非常高效，且代码实现简洁。” 这一点在实际编程中非常重要，简洁的代码不仅易于理解，也减少了出错的可能性。

---
处理用时：22.07秒
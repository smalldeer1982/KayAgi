# 题目信息

# [语言月赛 202404] 神秘排列

## 题目描述

一个数列是**神秘数列**当且仅当满足下列条件：

1. 这个数列是一个排列。即，整数 $1 \sim n$ 均在这个数列中出现过，且其中的每种整数仅出现过一次（例如，当 $n=4$ 时，$1,2,4,3$ 是一个排列， $1,2,2,2$ 不是一个排列）；
2. 我们将一个数列中 $x$ 出现的位置（出现在第几个）记作 $p_x$（$1 \leq p_x \leq n$），神秘数列需要满足对于 $1 \sim n$ 中的任意一个整数 $i$，都有 $p_i=a_i$。

例如，对序列 $3, 5, 2, 1, 4$，其中 $1$ 的出现位置为 $4$，因此 $p_1 = 4$。但是 $a_1 = 3 \neq p_1$，因此这个序列不是神秘序列。

你的工作是需要判定一个数列 $a_1, a_2, \cdots, a_n$ 是否为**神秘数列**。

## 说明/提示

### 数据规模与约定

对于 $40\%$ 的数据，$1 \leq n \leq 100$。

对于 $70\%$ 的数据，$1 \leq n \leq 2000$。

对于 $100\%$ 的数据，$1 \leq n \leq 10^5$。

数据保证 $a$ 是一个排列。即，整数 $1 \sim n$ 均在这个数列中出现过，且每种整数仅出现过一次。

## 样例 #1

### 输入

```
3
2 1 3
```

### 输出

```
YES
```

## 样例 #2

### 输入

```
5
3 5 2 1 4
```

### 输出

```
NO
```

# AI分析结果

### 综合分析与结论

本题的核心在于判断给定的排列是否满足“神秘数列”的条件，即对于每个元素 \(i\)，其在数列中的位置 \(p_i\) 等于数列中第 \(i\) 个元素的值 \(a_i\)。通过观察可以发现，这一条件等价于 \(a_{a_i} = i\)。因此，只需遍历数组，逐个检查这一条件是否成立即可。

### 所选高星题解

#### 题解1：Maxmilite (5星)
**关键亮点**：
- 思路清晰，直接利用 \(a_{a_i} = i\) 的条件进行判断，避免了复杂的逻辑推导。
- 代码简洁明了，易于理解和实现。
- 时间复杂度为 \(O(n)\)，完全满足题目要求。

**核心代码**：
```cpp
for (int i = 1; i <= n; ++i) {
  if (a[a[i]] != i) {
    cout << "NO" << endl;
    return 0;
  }
}
cout << "YES" << endl;
```
**实现思想**：遍历数组，检查每个元素是否满足 \(a_{a_i} = i\)，若不满足则输出“NO”并结束程序，否则输出“YES”。

### 最优关键思路与技巧

- **关键思路**：利用 \(a_{a_i} = i\) 的条件进行判断，简化了问题的复杂度。
- **技巧**：通过一次遍历即可完成所有检查，时间复杂度为 \(O(n)\)，效率高。

### 可拓展之处

- **同类型题**：类似的问题可以通过观察数列的性质，找到简化的判断条件，从而避免复杂的逻辑推导。
- **类似算法套路**：在涉及排列或数列的问题中，常常可以通过数学性质或对称性来简化问题。

### 推荐题目

1. **P1059 明明的随机数**：考察排列和去重的简单应用。
2. **P1060 开心的金明**：涉及数列的简单处理和条件判断。
3. **P1061 数列分段**：考察数列的分段处理，类似的条件判断。

### 个人心得

- **调试经历**：在实现过程中，确保数组下标从1开始，避免越界错误。
- **顿悟感想**：通过观察数列的性质，发现 \(a_{a_i} = i\) 的条件，大大简化了问题的解决思路。

### 通用建议与扩展思路

- **通用建议**：在处理数列或排列问题时，优先考虑数学性质和对称性，寻找简化的判断条件。
- **扩展思路**：对于更复杂的问题，可以尝试将问题分解为多个简单的子问题，逐步解决。

---
处理用时：20.49秒
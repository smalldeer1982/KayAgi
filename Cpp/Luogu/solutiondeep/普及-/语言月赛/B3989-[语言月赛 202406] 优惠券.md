# 题目信息

# [语言月赛 202406] 优惠券

## 题目描述

某奶茶店推出优惠活动：

- 如果按照原价购买了一杯奶茶，可获赠一张优惠券；
- 如果使用优惠券购买了一杯奶茶，这杯奶茶不会再获赠优惠券；
- 每张优惠券可折抵 $1$ 元；
- 购买一杯奶茶使用的优惠券数量不限，但不找零。

现在，小 F 计划购买 $n$ 杯奶茶，其价格为 $a_1,a_2,\cdots,a_n$。**他可以以任意顺序购买这 $n$ 杯奶茶。**

请问，小 F 最少花费多少钱，才能买下全部 $n$ 杯奶茶？

## 说明/提示

### 样例解释

按照 $3,3,2,1,4$ 的顺序购买，前四杯获得四张优惠券，最后一杯全部使用优惠券。

### 数据规模与约定

- 对于 $30\%$ 的测试数据，$n=2$；
- 对于 $100\%$ 的测试数据，$1 \le n \le 1000$，$1 \le a_i \le 50$，$a_1 \le a_2 \le \cdots \le a_n$。

## 样例 #1

### 输入

```
5
1 2 3 3 4
```

### 输出

```
9
```

# AI分析结果

### 综合分析与结论

本题的核心在于如何最大化利用优惠券，从而最小化总花费。关键在于确定哪些奶茶应该全价购买以获取优惠券，哪些奶茶应该使用优惠券支付。题解中提到的思路是：按照价格从低到高的顺序购买奶茶，低价奶茶全价购买以获取优惠券，高价奶茶使用优惠券支付。这种方法能够确保在尽可能多的情况下使用优惠券，从而减少总花费。

### 所选题解

#### 题解：览遍千秋 (赞：11)

**星级：4.5星**

**关键亮点：**
- 思路清晰，明确提出了按照价格从低到高购买奶茶的策略。
- 通过枚举全价购买的奶茶数量，计算出最优的总花费。
- 提供了时间复杂度的优化思路，从O(n^2)优化到O(n)。

**个人心得：**
- 作者提到通过提前计算总价，每次减去a_i得到t，从而将时间复杂度从O(n^2)优化到O(n)。这种优化思路在实际编程中非常实用，能够显著提高代码效率。

**核心代码实现思想：**
```cpp
int main() {
    int n;
    cin >> n;
    vector<int> a(n);
    for (int i = 0; i < n; ++i) cin >> a[i];
    
    int total = accumulate(a.begin(), a.end(), 0);
    int min_cost = total;
    
    int sum = 0;
    for (int i = 0; i < n; ++i) {
        sum += a[i];
        int t = total - sum;
        int u = min(i + 1, t);
        min_cost = min(min_cost, sum + t - u);
    }
    
    cout << min_cost << endl;
    return 0;
}
```
**代码解释：**
- `total` 是所有奶茶的总价。
- `sum` 是前i杯奶茶的总价。
- `t` 是后n-i杯奶茶的总价。
- `u` 是可以使用的优惠券数量，取i+1和t的最小值。
- `min_cost` 是当前的最小总花费，通过不断更新得到最终的最小值。

### 最优关键思路或技巧

1. **贪心策略**：按照价格从低到高购买奶茶，低价奶茶全价购买以获取优惠券，高价奶茶使用优惠券支付。
2. **枚举优化**：通过枚举全价购买的奶茶数量，计算出最优的总花费，并通过提前计算总价优化时间复杂度。

### 可拓展之处

- **类似问题**：类似的问题可以出现在其他需要最大化利用优惠券或折扣的场景中，如购物、订餐等。
- **算法套路**：贪心算法和枚举优化是解决这类问题的常见套路，可以在其他类似问题中应用。

### 推荐题目

1. **洛谷 P1002 过河卒**：考察动态规划和贪心策略。
2. **洛谷 P1048 采药**：考察背包问题和贪心策略。
3. **洛谷 P1060 开心的金明**：考察动态规划和贪心策略。

这些题目都涉及到如何通过合理的策略优化结果，与本题的贪心策略和枚举优化有相似之处。

---
处理用时：23.29秒
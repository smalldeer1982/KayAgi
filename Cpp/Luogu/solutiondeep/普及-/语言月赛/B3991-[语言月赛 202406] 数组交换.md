# 题目信息

# [语言月赛 202406] 数组交换

## 题目描述

小 B 有一个 $n$ 行 $m$ 列的数组 $a$，现在它要操作 $q$ 次，每次的内容如下：

- $\textbf{1 x y}$，交换第 $x$ 行和第 $y$ 行，若 $x = y$ 则表示不交换。
- $\textbf{2 x y}$，交换第 $x$ 列和第 $y$ 列，若 $x = y$ 则表示不交换。
- $\textbf{3 x y}$，查询当前 $a_{x, y}$ 的值。

对于每个操作 $3$，你需要回答。在所有操作结束后，你还需要输出最终的数组 $a$。你快告诉小 B 这些内容吧！

## 说明/提示

### 数据规模与约定

对于 $20\%$ 的数据，$1 \leq n, m, q \le 100$。  
对于另外 $20\%$ 的数据，没有操作 $1$。  
对于另外 $20\%$ 的数据，没有操作 $2$。  
对于另外 $20\%$ 的数据，没有操作 $3$。  
对于 $100\%$ 的数据，$1 \leq n, m \leq 10^3$，$1 \leq q \leq 10^5$，$0 \leq a_{i, j} \leq 9$。


## 样例 #1

### 输入

```
5 5 10
01010
10010
01110
00011
00101
1 2 4
2 3 5
3 2 3
1 3 5
2 1 4
3 5 3
1 4 5
2 5 2
2 3 4
1 2 4
```

### 输出

```
1
0
10001
11001
01010
10010
10100
```

# AI分析结果

### 综合分析与结论

本题的核心在于如何处理大规模的行列交换操作，同时高效地查询特定位置的值。直接交换行列元素会导致时间复杂度较高，尤其是在大规模数据下。因此，最优的思路是通过维护两个数组 `r` 和 `c`，分别记录当前行和列的映射关系，从而避免实际交换元素，提升效率。

### 所选题解

#### 题解1：Maxmilite (5星)

**关键亮点：**
- 使用 `r` 和 `c` 数组来记录行和列的映射关系，避免了实际交换元素，时间复杂度从 $O(qN)$ 降低到 $O(q)$。
- 代码简洁明了，逻辑清晰，易于理解。
- 提供了输入处理的优化方法，避免因 `cin` 默认行为导致的错误。

**核心代码：**
```cpp
int r[1005], c[1005];
for (int i = 1; i <= n; i++) r[i] = c[i] = i;

for (int i = 0; i < q; i++) {
    int op, x, y;
    cin >> op >> x >> y;
    if (op == 1) {
        swap(r[x], r[y]);
    } else if (op == 2) {
        swap(c[x], c[y]);
    } else {
        cout << a[r[x]][c[y]] << endl;
    }
}

for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= m; j++) {
        cout << a[r[i]][c[j]];
    }
    cout << endl;
}
```

**个人心得：**
- 通过维护映射关系，避免了大规模数据交换，显著提升了性能。
- 输入处理时，使用 `char` 逐个读取并转换为 `int`，避免了 `cin` 的默认行为问题。

### 最优关键思路与技巧

1. **映射关系维护**：通过维护 `r` 和 `c` 数组，记录当前行和列的映射关系，避免实际交换元素，提升效率。
2. **输入处理优化**：使用 `char` 逐个读取并转换为 `int`，避免 `cin` 默认行为导致的错误。
3. **时间复杂度优化**：将时间复杂度从 $O(qN)$ 降低到 $O(q)$，适用于大规模数据。

### 可拓展之处

- **类似问题**：在处理大规模矩阵操作时，可以考虑使用类似的映射关系维护方法，避免实际交换元素。
- **其他应用场景**：如矩阵旋转、矩阵转置等操作，也可以通过维护映射关系来优化性能。

### 推荐题目

1. [P3384 【模板】树链剖分](https://www.luogu.com.cn/problem/P3384)
2. [P3372 【模板】线段树 1](https://www.luogu.com.cn/problem/P3372)
3. [P3373 【模板】线段树 2](https://www.luogu.com.cn/problem/P3373)

这些题目考察了类似的维护映射关系和高效处理大规模数据的技巧，适合进一步练习和巩固。

---
处理用时：20.64秒
# 题目信息

# [语言月赛 202407] accomplishment

## 题目背景

对于一个国家来说粮食安全至关重要。所以小 A 认为最好的检验方法就是统计有多少粮食。

## 题目描述

小 A 打开了王国的地图，他的地图可以认为是一个 $n$ 行，$m$ 列的表格，每一个格子可以看做一个城市。

理论上来说小 A 只需要把每个城市的粮食统计并加起来就好了，但是小 A 发现他统计时出现了重大失误：他统计的每个城市的粮食数并不只是这一个城市的粮食数，而是和它相邻的所有的城市的粮食数的和。

这里的相邻指八连通，即一个城市的粮食数是它本身粮食数和它上、下、左、右、上左、下左、上右，下右的城市的粮食数的和：

![](https://cdn.luogu.com.cn/upload/image_hosting/u1vfgakc.png)

现在给出小 A 统计的错误的结果，请你帮他计算出，他的国家实际到底共有多少粮食。

## 说明/提示

### 样例 1 解释

小 A 的王国的粮食数一组可以情况为：
| 1 | 2 | 3 |
| :----------: | :----------: | :----------: |
| 3 | 2 | 1 |
| 1 | 3 | 2 |

易得粮食的总和为 $18$。  

### 样例 2 解释

小 A 的王国的粮食数的一种可能情况是：
| 3 | 3 | 3 |
| :----------: | :----------: | :----------: |
| 3 | 3 | 3 |
| 3 | 3 | 3 |

易得粮食的总和是 $27$。  

### 样例 3 解释

小 A 的王国的粮食数的一种可能情况是：
| 1 | 2 | 3 | 4 | 5 | 6 |
| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |
| 7 | 8 | 9 | 1 | 2 | 3 |
| 4 | 5 | 6 | 7 | 8 | 9 |

易得粮食的总和是 $90$。

### 数据范围

- 对于 $10\%$ 的数据，$n,m \le 3$，$a_{i,j} \le 18$。
- 对于另外 $30\%$ 的数据，$a_{i,j} \le 9$。
- 对于 $100\%$ 的数据，$1 \le n,m \le 1000$，$1 \le a_{i,j} \le 10^9$，$n,m$ 都是 $3$ 的倍数。保证输入数据均对应至少一组合法的实际粮食数据，且这组实际粮食数据中每个位置均有粮食。  

友情提示：别匆忙，放慢脚步。

## 样例 #1

### 输入

```
3 3
8 12 8 
12 18 13 
9 12 8```

### 输出

```
18```

## 样例 #2

### 输入

```
3 3
12 18 12
18 27 18
12 18 12```

### 输出

```
27```

## 样例 #3

### 输入

```
3 6
18 30 27 24 21 16
27 45 45 45 45 33
24 39 36 33 30 22```

### 输出

```
90```

# AI分析结果

### 综合分析与结论

本题的核心在于理解错误统计矩阵与实际粮食矩阵之间的关系，并利用这一关系快速计算实际粮食总和。由于题目保证 $n$ 和 $m$ 都是 3 的倍数，可以将大矩阵分割为多个 $3 \times 3$ 的子矩阵，每个子矩阵的中心位置的错误统计值即为该子矩阵中所有实际粮食值的总和。因此，只需遍历所有子矩阵的中心位置，将其错误统计值累加即可得到实际粮食总和。

### 所选高星题解

#### 题解1：BinaryPotatoTree (5星)
- **关键亮点**：思路清晰，直接利用 $3 \times 3$ 子矩阵的中心位置的值来计算实际粮食总和，代码简洁高效。
- **核心代码**：
  ```cpp
  for(int i=2;i<=n;i+=3){
      for(int j=2;j<=m;j+=3){
          sum+=a[i][j];
      }
  }
  ```
- **个人心得**：无。

#### 题解2：I_am_rubbish (4星)
- **关键亮点**：详细解释了为什么可以利用 $3 \times 3$ 子矩阵的中心位置的值来计算实际粮食总和，并提醒了数据范围可能导致的溢出问题。
- **核心代码**：
  ```cpp
  for(int i=2;i<=n;i+=3){
      for(int j=2;j<=m;j+=3){
          sum+=a[i][j];
      }
  }
  ```
- **个人心得**：提醒了数据范围可能导致的溢出问题，建议使用 `long long` 类型来存储结果。

### 最优关键思路或技巧

- **关键思路**：将大矩阵分割为多个 $3 \times 3$ 的子矩阵，利用子矩阵中心位置的错误统计值来计算实际粮食总和。
- **技巧**：遍历所有子矩阵的中心位置，累加其错误统计值，避免了对整个矩阵的复杂计算。

### 可拓展之处

- **同类型题**：类似的问题可以出现在图像处理、矩阵运算等领域，例如计算某个像素点及其邻域的平均值或总和。
- **类似算法套路**：利用矩阵的特定结构（如周期性、对称性）来简化计算。

### 推荐题目

1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003) - 考察矩阵覆盖与查询。
2. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047) - 考察区间覆盖与统计。
3. [P1059 明明的随机数](https://www.luogu.com.cn/problem/P1059) - 考察数组操作与去重。

### 个人心得摘录

- **I_am_rubbish**：提醒了数据范围可能导致的溢出问题，建议使用 `long long` 类型来存储结果。

---
处理用时：21.28秒
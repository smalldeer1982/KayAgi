# 题目信息

# [语言月赛 202501] 古希腊掌管节奏的神

## 题目描述

小 Y 在用手指敲击桌面，他觉得这节奏非常美妙，于是用一串字符串记了下来。

他只用四根手指敲击桌面：左手食指（`L`）、左手中指（`L'`）、右手食指（`R`）、右手中指（`R'`）。如果每次只有一根手指敲击桌面，那么直接把每个时刻的手指按时间顺序记录下来即可。

例如，`LRR'L` 表示先用左手食指敲击，然后是右手食指，接着是右手中指，最后左手食指敲击桌面。

但是为了体现出声音的强弱，有时要多个手指同时敲击桌面。这时候小 Y 就会把几根手指用括号括起来。（保证括号内的手指不重复。）

例如，`(LL')RR(LR)(RR')` 表示：

- 先左手食指和中指同时敲击 $1$ 次。
- 然后右手食指连续敲击 $2$ 次。
- 然后左右手食指同时敲击 $1$ 次。
- 最后右手食指和中指同时敲击 $1$ 次。

把有手指敲击的时刻称为**一拍**。例如上面的示例一共有 $5$ 拍，每一拍分别有 $2,1,1,2,2$ 根手指敲击桌面。

给出小 Y 的记录 $S$，请输出 $S$ 中的总拍数，并且在**部分测试点中**，分别计算四根手指的最大连续敲击拍数（即最大的 $k$ 使得该手指在连续的 $k$ 拍中都敲了一下桌子）。

## 说明/提示

【样例 1 解释】

此样例即为题目描述中的情形。

- 左手食指在第 $1,3$ 拍敲了一下桌子，但是并不连续，因此最大连续敲击拍数还是 $1$。
- 左手中指在第 $1$ 拍敲了一下桌子，最大连续敲击拍数为 $1$。
- 右手食指在第 $2,3,4,5$ 拍敲了一下桌子，最大连续敲击拍数为 $4$。
- 右手中指在第 $5$ 拍敲了一下桌子，最大连续敲击拍数为 $1$。

【样例 2 解释】

如果一根手指没有敲击桌面，那么最大连续敲击拍数显然是 $0$。

（Bonus：小 Y 发现，尽管这个节奏非常简单，然而敲桌子时很容易出错，你可以挑战一下。）

【样例 3 解释】

注意多根手指敲击桌面时，这些手指被记录的顺序可以是任意的。

同时，由于本测试点 $type=0$，仅要求总拍数，你的输出应当只有第一行。

【数据范围】

记 $n$ 为输入的字符串长度。对于全体数据，保证 $1\le n\le 10000$，并且一定由题目描述中给出的方式构成。

本题共有 $10$ 个测试点，每个 $10$ 分。下面给出各个测试点的情况，其中 `Y` 表示保证测试点有这个性质，`N` 表示没有。

|测试点编号|特殊性质 A|特殊性质 B|$type$ 的值|
|:-:|:-:|:-:|:-:|
|$1$|Y|Y|$0$|
|$2$|Y|Y|$1$|
|$3$|N|Y|$0$|
|$4$|N|Y|$1$|
|$5$|Y|N|$0$|
|$6$|Y|N|$1$|
|$7$|N|N|$0$|
|$8\sim 10$|N|N|$1$|

- 特殊性质 A：小 Y 仅使用食指敲击桌面。
- 特殊性质 B：小 Y 每次仅用一根手指敲击桌面。

【提示】

`L'`、`R'` 中的小撇是单引号，ASCII 为 $39$。在常用的键盘上，这个键在分号的右边。

## 样例 #1

### 输入

```
(LL')RR(LR)(RR')
1
```

### 输出

```
5
1 1 4 1
```

## 样例 #2

### 输入

```
LRRLRRLR
1
```

### 输出

```
8
1 0 2 0
```

## 样例 #3

### 输入

```
(LL')RR(LL')RR(L'L)R(L'R')L'R'(L'R')L'R'(L'R')L(R'LRL')
0
```

### 输出

```
17
```

# AI分析结果

### 综合分析与结论

本题解通过将字符串解析为二维数组，分别记录每一拍中每根手指的敲击情况，然后通过遍历数组计算每根手指的最大连续敲击拍数。整体思路清晰，代码结构合理，适合初学者理解和实现。然而，题解在代码实现上略显冗余，且未对特殊性质进行优化，导致代码效率不高。尽管如此，题解的核心思路和实现方法仍然值得借鉴。

### 所选高分题解

#### 题解作者：yummy (评分：4星)

**关键亮点：**
1. **清晰的解析思路**：通过将字符串解析为二维数组，分别记录每一拍中每根手指的敲击情况，思路清晰且易于理解。
2. **合理的代码结构**：将解析和计算分为两步，代码结构清晰，便于后续维护和扩展。
3. **基础实现技巧**：通过变量 `single` 区分单拍和多拍模式，简化了代码逻辑。

**核心代码片段：**
```cpp
scanf("%s%d",s,&type);
int n=strlen(s),single=1;
for(int i=0;i<n;i++){
    if(s[i]=='(')
        single=0;
    else if(s[i]==')'){
        single=1;
        t++;
    }
    else{
        int fin=0;
        if(s[i]=='R')fin=2;
        if(s[i+1]=='\''){
            fin++;
            i++;
        }
        tap[t][fin]=1;
        t+=single;
    }
}
printf("%d\n",t-1);
```

**个人心得：**
“为了避免相同的代码写四遍，可以给手指标号：`L,L',R,R'` 分别用 $0,1,2,3$ 表示。” —— 这种通过编号简化代码的思路值得借鉴，尤其是在处理多个相似变量时。

### 通用建议与扩展思路

1. **优化代码效率**：对于特殊性质（如仅使用食指或每次仅用一根手指），可以单独处理，减少不必要的计算。
2. **代码复用**：可以将解析字符串和计算最大连续拍数的逻辑封装成函数，提高代码的复用性和可读性。
3. **数据结构优化**：可以考虑使用更高效的数据结构（如位运算）来记录每根手指的敲击情况，减少内存占用和提高计算速度。

### 推荐相似题目

1. **P1003 铺地毯** —— 考察二维数组的应用和遍历。
2. **P1042 乒乓球** —— 涉及字符串解析和状态记录。
3. **P1055 ISBN号码** —— 需要处理字符串中的特殊字符和验证逻辑。

这些题目都涉及字符串解析和状态记录，与本题解的核心思路相似，适合进一步练习和巩固相关知识。

---
处理用时：20.05秒
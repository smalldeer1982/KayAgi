# 题目信息

# [语言月赛 202502] 沿轴求和

## 题目描述

给定一个高维数组 $a$，该数组共有 $n$ 维，大小为 $d_0\times d_1\times \cdots \times d_{n-1}$。其中，每一维称为一个轴，$d_i$ 对应 $i(0 \le i < n)$ 号轴。数组下标从 $0$ 开始。

高维数组沿 $x$ 号轴的求和结果，是一个 $n-1$ 维的数组 $S$，其大小为 $d_0\times d_1 \times \cdots \times d_{x-1} \times d_{x+1} \times \cdots \times d_{n-1}$。其中，

$$
S[w_0][w_1]\cdots[w_{x-1}][w_{x+1}]\cdots[w_{n-1}]=\sum\limits_{i=0}^{d_x-1}{a[w_0][w_1]\cdots[w_{x-1}][i][w_{x+1}]\cdots[w_{n-1}]}
$$

现在，给定该高维数组与 $x$，求沿 $x$ 号轴求和的结果。



## 说明/提示

### 样例解释 1

样例 1 给出了一个二维数组，其大小为 $2\times 2$，沿 1 号轴求和。在二维数组中，按 0 号轴求和可理解为按列求和，按 1 号轴求和可理解为按行求和。

$$
\begin{bmatrix}
1 & 2 \\
3 & 4
\end{bmatrix}
\rightarrow
\begin{bmatrix}
3 & 7
\end{bmatrix}
$$

### 样例解释 2

样例 2 给出了一个三维数组，其大小为 $2\times 2\times 2$。沿 0 号轴求和的结果大小为 $2\times 2$。

以 $S[0][0]$ 的计算方式为例：

$$
S[0][0]=\sum\limits_{i=0}^1{a[i][0][0]=a[0][0][0]+a[1][0][0]=1+5=6}
$$

可以得到结果为

$$
\begin{bmatrix}
6 & 8\\
10 & 12
\end{bmatrix}
$$

### 数据规模与约定

- 对于 $60\%$ 的测试数据，保证 $n=2$。
- 对于 $100\%$ 的测试数据，保证 $2 \le n \le 16$，$1 \le d_i \le 10^3$，$1 \le \prod\limits_{i=0}^{n-1}{d_i} \le 2^{16}$，$-100 \le val \le 100$。保证 $\forall i\in [0,n)$，输入的 $p_i \in [0,d_i)$。

## 样例 #1

### 输入

```
2 1
2 2
0 0 1
0 1 2
1 1 4
1 0 3```

### 输出

```
1 7
0 3```

## 样例 #2

### 输入

```
3 0
2 2 2
0 0 0 1
0 0 1 2
0 1 0 3
0 1 1 4
1 0 0 5
1 0 1 6
1 1 0 7
1 1 1 8```

### 输出

```
0 0 6
0 1 8
1 0 10
1 1 12```

# AI分析结果

### 综合分析与结论

本题解主要围绕高维数组的求和操作展开，重点在于如何将高维数组映射到一维数组中进行计算，并最终还原为高维数组的输出。题解通过引入多维数组到一维数组的映射公式，解决了高维数组操作的难点。整体思路清晰，逻辑严谨，适合有一定编程基础的同学学习。

### 所选题解

#### 题解：览遍千秋
- **星级**：★★★★☆
- **关键亮点**：
  - 详细解释了高维数组到一维数组的映射方法，并提供了验证公式。
  - 通过二维数组的例子帮助理解多维数组的映射和还原过程。
  - 提出了使用STL容器简化高维数组操作的思路，虽然未深入展开，但为读者提供了进一步探索的方向。
- **个人心得**：
  - 提到使用Python的numpy库可以更简单地完成本题，体现了对不同语言工具的理解和应用。
  - 强调了C++中STL容器的便捷性，鼓励读者探索更多高效的数据结构。

### 关键思路与技巧

1. **多维数组到一维数组的映射**：通过公式将高维数组的下标映射到一维数组中，便于计算和存储。
2. **还原一维数组到多维数组**：通过逆映射公式将一维数组的下标还原为多维数组的下标，便于输出结果。
3. **STL容器的应用**：虽然未详细展开，但提到了使用STL容器可以简化高维数组的操作，为读者提供了进一步优化的思路。

### 扩展思路

1. **多维数组的遍历与操作**：可以进一步探讨多维数组的遍历方式，如递归遍历、迭代遍历等。
2. **高维数组的压缩存储**：探讨如何通过压缩存储技术减少高维数组的内存占用，提高计算效率。
3. **并行计算**：在高维数组的计算中引入并行计算，利用多核处理器提高计算速度。

### 推荐题目

1. **洛谷 P1001 A+B Problem**：基础输入输出练习，适合初学者。
2. **洛谷 P1048 采药**：动态规划经典题目，适合练习多维数组的应用。
3. **洛谷 P1219 八皇后**：回溯算法经典题目，适合练习多维数组的遍历与操作。

### 核心代码片段

```cpp
// 多维数组到一维数组的映射
int mapTo1D(vector<int>& indices, vector<int>& dimensions) {
    int id = 0;
    for (int i = 0; i < indices.size(); i++) {
        id = id * dimensions[i] + indices[i];
    }
    return id;
}

// 一维数组到多维数组的还原
vector<int> mapToND(int id, vector<int>& dimensions) {
    vector<int> indices(dimensions.size());
    for (int i = dimensions.size() - 1; i >= 0; i--) {
        indices[i] = id % dimensions[i];
        id /= dimensions[i];
    }
    return indices;
}
```

这段代码展示了如何将多维数组的下标映射到一维数组中，以及如何将一维数组的下标还原为多维数组的下标。通过这种方式，可以方便地进行高维数组的计算和存储。

---
处理用时：20.29秒
# 题目信息

# [入门赛 #14] 塔台超频 (Hard Version)

## 题目描述

在一条笔直的马路上有 $n$ 个塔台，它们被依次标号为 $1, 2, \cdots, n$，分别处于距离马路起点 $a _ 1, a _ 2, \cdots, a _ n$（$a _ 1 < a _ 2 < \cdots < a _ n$）的位置。

每个塔台初始时有一个通讯半径 $b _ 1, b _ 2, \cdots, b _ n$，这代表，对于 $i$ 号塔台，其可以与 $[a _ i - b _ i, a _ i + b _ i]$ 范围内的塔台通讯。

需要特别注意，对于两个塔台 A、B，当且仅当 A 塔台的**位置**处在 B 塔台的通讯范围内，B 塔台才能向 A 塔台传递信号。请注意这里不是「二者的通讯范围重合，即可通讯」。

现在你可以对这些塔台进行超频。具体的，你可以指定一个电压 $k$，之后**所有**塔台都会被加上 $k$ 的电压，通讯半径都会增大 $k$。这里的 $k$ 仅可为非负整数。

现在要求你通过超频，使信号可以从 $1$ 号塔台传输到 $n$ 号塔台，路径不限（即，无论如何，只需要让信号从 $1$ 号塔台到达 $n$ 号塔台即可）。但是由于不合理的超频会较严重地磨损塔台，因此你想要尽可能降低超频的电压。

请你计算出，为了达到以上目的，塔台超频需要的最小电压是多少。

## 说明/提示

### 数据规模与约定

对于 $100\%$ 的数据，保证 $2 \leq n \leq 5 \times 10 ^ 5$，$0 \leq a _ i, b _ i \leq 10 ^ 9$。

## 样例 #1

### 输入

```
10
2 3
5 0
6 3
7 2
8 0
10 0
13 2
14 4
15 4
18 2```

### 输出

```
3```

# AI分析结果

### 综合分析与结论

本题的核心是通过二分或贪心算法，找到使信号从第一个塔台传输到最后一个塔台所需的最小超频电压。大部分题解采用了二分法，少数使用了贪心策略。二分法的思路是通过二分搜索确定最小电压，贪心法则通过遍历塔台逐步更新电压需求。二分法的时间复杂度为 \(O(n \log V)\)，贪心法为 \(O(n)\)，贪心法在效率上更优。

### 所选高星题解

#### 1. **作者：EdenSky (5星)**
- **关键亮点**：提供了二分和贪心两种解法，思路清晰，代码简洁。贪心法通过优化塔台覆盖范围，减少了不必要的计算，效率更高。
- **个人心得**：作者提到贪心法的正确性证明，强调了贪心策略的合理性。
- **核心代码**：
  ```cpp
  bool check(int x){
    int t=a[1]+b[1]+x;
    for(int i=2;i<=n;i++)
      if(t>=a[i]) t=max(t,a[i]+b[i]+x);
      else return 0;
    return 1;
  }
  ```
  **贪心法**：
  ```cpp
  for(int i=1;i<n;i++){
    if(a[i]+b[i]+ans>=a[i+1]+b[i+1]+ans)
      {a[i+1]=a[i],b[i+1]=b[i]; continue;}
    if(a[i]+b[i]+ans>=a[i+1]) continue;
    ans=a[i+1]-a[i]-b[i];
  }
  ```

#### 2. **作者：wangif424 (4星)**
- **关键亮点**：通过一次扫描解决问题，时间复杂度为 \(O(n)\)，代码简洁，思路直接。
- **核心代码**：
  ```cpp
  for(int i=2;i<=n;i++){
    if(rmax+k<t[i].a){
      k=t[i].a-rmax;
    }
    rmax=max(rmax,t[i].r);
  }
  ```

#### 3. **作者：_Spectator_ (4星)**
- **关键亮点**：通过维护当前覆盖范围的最右端，逐步更新电压需求，思路清晰，代码简洁。
- **核心代码**：
  ```cpp
  for(int i=2;i<=n;i++){
    int r=a[p]+b[p]+k;
    if(a[i]>r)k+=a[i]-r;
    if(a[i]+b[i]+k>r)p=i;
  }
  ```

### 最优关键思路与技巧

1. **贪心策略**：通过遍历塔台，逐步更新电压需求，确保每个塔台都能覆盖到下一个塔台，避免了二分法的多次判断，效率更高。
2. **二分法优化**：在二分法中，通过维护当前塔台的最大覆盖范围，减少了不必要的计算，提高了效率。

### 可拓展之处

- **类似问题**：可以扩展到其他需要最小化某种资源的问题，如最小化路径长度、最小化时间等。
- **算法套路**：贪心法适用于局部最优解能导致全局最优解的问题，二分法适用于具有单调性的问题。

### 推荐题目

1. **P3807 [塔台超频 (Easy Version)]**：本题的简化版本，适合练习贪心法。
2. **P1020 [导弹拦截]**：涉及贪心算法的经典题目。
3. **P1048 [采药]**：动态规划与贪心法的结合，适合进一步练习贪心策略。

### 个人心得总结

- **调试经历**：部分作者提到在实现二分法时，初始的贪心策略会导致错误，通过调整策略解决了问题。
- **顿悟感想**：贪心法的正确性证明是关键，理解贪心策略的合理性有助于更好地应用该算法。

---
处理用时：31.53秒
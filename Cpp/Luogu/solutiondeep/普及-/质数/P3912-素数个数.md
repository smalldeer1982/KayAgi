# 题目信息

# 素数个数

## 题目描述

求 $1,2,\cdots,N$ 中素数的个数。


## 说明/提示

对于 $40\%$ 的数据，$1 \le N \le 10^6$。

对于 $80\%$ 的数据，$1 \le N \le 10^7$。

对于 $100\%$ 的数据，$1 \le N \le 10^8$。


## 样例 #1

### 输入

```
10```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题解集涵盖了从基础筛法到高阶数论算法的多种解法。针对数据规模1e8，线性筛（欧拉筛）是主流解法，但需优化空间；埃氏筛通过i*i优化也可AC。高阶算法（Meissel-Lehmmer、洲阁筛）理论复杂度更优但实现复杂。核心优化思路集中在减少重复标记和空间压缩。

---

### 高评分题解推荐

#### 1. 作者：luoyoucheng（埃氏筛优化） ⭐⭐⭐⭐
**核心亮点**：  
- 埃氏筛的极致优化：外层循环仅到√n，内层从i²开始筛  
- 利用预筛偶数思想减少计算量  
- 代码简洁且时空效率平衡（bool数组+空间压缩）

**关键代码**：
```cpp
for(int i=2;i*i<=n;i++) {
    if(!isComp[i]) 
        for(int j=i*i;j<=n;j+=i)
            isComp[j]=1; 
}
// 统计未被标记的数量
```

#### 2. 作者：bztMinamoto（洲阁筛） ⭐⭐⭐⭐
**核心亮点**：  
- 理论复杂度O(n^(2/3)/log n)优于线性筛  
- 分块处理思想减少内存消耗  
- 通过递推式g[i][j] = g[i-1][j] - g[i/p[j]]实现高效计数

**关键实现**：
```cpp
int dp(int x,int y) { // 关键递推过程
    if(x<=20000&&y<=50) return f[x][y];
    return dp(x,y-1) - dp(x/pri[y],y-1);
}
```

#### 3. 作者：Aleph1022（Min25筛） ⭐⭐⭐⭐
**核心亮点**：  
- 利用数论函数性质构造质数计数  
- 离散化处理所有n/i的取值  
- 时间复杂度O(n^(3/4)/logn)

**核心代码**：
```cpp
inline int &id(ll x){ // 离散化优化
    return x<=lim ? le[x] : ge[n/x];
}
for(ll l=1,r;l<=n;l=r+1) { // 离散化预处理
    r = n/(n/l);
    lis[id(n/l)=++tot] = n/l;
}
```

---

### 关键优化技巧总结
1. **筛法优化**：  
   - 埃氏筛从i²开始标记，外层仅需到√n  
   - 预筛偶数：直接处理2的倍数，后续仅处理奇数  
   - 欧拉筛用`i%prime[j]==0`保证线性时间复杂度

2. **空间压缩**：  
   - 使用`bool[]`代替`int[]`（节省75%空间）  
   - 分段打表：Miller-Rabin题解中每1e5分块统计

3. **高阶算法核心**：  
   - Meissel-Lehmmer通过预处理n^(2/3)内质数减少计算  
   - 洲阁筛利用积性函数性质递推计数

---

### 推荐相似题目
1. [P3383 线性筛素数](https://www.luogu.com.cn/problem/P3383)  
   （模板题练习筛法基础）

2. [P3912 素数个数](https://www.luogu.com.cn/problem/P3912)  
   （1e8数据量，需优化筛法或高阶算法）

3. [P4213 杜教筛](https://www.luogu.com.cn/problem/P4213)  
   （数论函数求和的通用高阶筛法）

---

### 个人心得摘录
1. **@封禁用户**：  
   > "欧拉筛模板必须背`if(i%prime[j]==0) break`，否则会重复筛"  
   → 强调欧拉筛核心中断条件的重要性

2. **@Ge_er**：  
   > "合数必有≤√n的质因数，故外层筛到√n即可"  
   → 埃氏筛优化的数学基础

3. **@不到前10不改名**：  
   > "总共有n个数，减去合数个数即为答案"  
   → 逆向思维减少统计次数

---
处理用时：57.21秒
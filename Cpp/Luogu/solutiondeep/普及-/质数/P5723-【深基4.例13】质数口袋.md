# 题目信息

# 【深基4.例13】质数口袋

## 题目描述

小 A 有一个质数口袋，里面可以装各个质数。他从 $2$ 开始，依次判断各个自然数是不是质数，如果是质数就会把这个数字装入口袋。

口袋的负载量就是口袋里的所有数字之和。

但是口袋的承重量有限，装的质数的和不能超过 $L$。给出 $L$，请问口袋里能装下几个质数？将这些质数从小往大输出，然后输出最多能装下的质数的个数，数字之间用换行隔开。

## 说明/提示

数据保证，$1 \le L \le {10}^5$。

## 样例 #1

### 输入

```
100```

### 输出

```
2
3
5
7
11
13
17
19
23
9```

## 样例 #2

### 输入

```
5```

### 输出

```
2
3
2```

## 样例 #3

### 输入

```
11```

### 输出

```
2
3
5
3```

# AI分析结果



### 综合分析与结论
本题核心在于质数生成与累加策略，各题解主要差异体现在质数生成效率与边界处理。最优解应满足以下两点：
1. **高效质数生成**：使用埃氏筛或欧拉筛预处理质数表，避免重复计算。
2. **贪心累加策略**：从小质数开始累加直至超过阈值，保证数量最大化。

### 高星题解推荐
---

#### 1. 作者：GaryH（★★★★★）
**关键亮点**：
- 使用时间复杂度最优的欧拉筛（线性筛）预处理质数。
- 结合前缀和快速判断可装载质数个数。
- 代码结构清晰，注释完整，可扩展性强。

**核心代码思想**：
```cpp
int get_list() {
    int tot = 0;
    for (int i = 2; i <= maxn; i++) {
        if (!isprime[i]) prime[++tot] = i, cnt[tot] = cnt[tot-1] + i;
        for (int j = 1; j <= tot && i*prime[j] <= maxn; j++) {
            isprime[i*prime[j]] = 1;
            if (i % prime[j] == 0) break;
        }
    }
    return tot;
}
```
**实现要点**：欧拉筛生成质数表时同步计算前缀和，保证后续查询为O(1)复杂度。

---

#### 2. 作者：Eason_AC（★★★★☆）
**关键亮点**：
- 使用埃氏筛预处理质数表，逻辑简洁易懂。
- 动态调整剩余容量，实时输出结果。

**核心代码思想**：
```cpp
void ai() {
    for (int i = 2; i <= 100000; ++i) prime[i] = 1;
    for (int i = 2; i <= 100000; ++i)
        if (prime[i])
            for (int j = i*2; j <= 100000; j += i)
                prime[j] = 0;
}
```
**实现要点**：预处理质数表后，遍历时直接查询质数状态，适合中等数据规模。

---

#### 3. 作者：TRZ_2007（★★★★☆）
**关键亮点**：
- 优化质数判断函数，通过模6排除法减少计算量。
- 完全暴力解法但实测可通过，适合理解基础算法。

**核心代码思想**：
```cpp
bool isprime(int x) {
    if (x == 2 || x == 3) return 1;
    if (x < 2 || x%6 != 1 && x%6 != 5) return 0;
    for (int i = 5; i*i <= x; i += 6)
        if (x%i == 0 || x%(i+2) == 0) return 0;
    return 1;
}
```
**实现要点**：利用质数分布在6的倍数两侧的特性，减少无效循环次数。

---

### 最优思路总结
1. **预处理质数表**：优先使用欧拉筛（空间允许）或埃氏筛生成质数表。
2. **前缀和优化**：预处理质数前缀和可快速判断装载数量。
3. **边界特判**：对L < 2、L = 2等极端情况单独处理。

### 拓展与同类题目推荐
1. **质数筛法扩展**：P3383【模板】线性筛素数（欧拉筛经典模板）
2. **质数性质应用**：P1217 [USACO1.5]回文质数（质数+回文判断）
3. **质数分解问题**：P1304 哥德巴赫猜想（质数拆分应用）

### 题解中的个人心得摘录
- **边界特判教训**：封禁用户在题解中提到未处理L=1的情况导致WA，强调测试极端值的重要性。
- **效率与通用性**：GaryH指出欧拉筛的扩展性优势，即使题目数据较宽松也应选择最优算法。

---
处理用时：64.75秒
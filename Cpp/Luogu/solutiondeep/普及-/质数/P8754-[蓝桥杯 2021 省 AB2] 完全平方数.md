# 题目信息

# [蓝桥杯 2021 省 AB2] 完全平方数

## 题目描述

一个整数 $a$ 是一个完全平方数，是指它是某一个整数的平方，即存在一个 整数 $b$，使得 $a=b^{2}$ 。

给定一个正整数 $n$，请找到最小的正整数 $x$，使得它们的乘积是一个完全平方数。

## 说明/提示

对于 $30 \%$ 的评测用例, $1 \leq n \leq 1000$，答案不超过 $1000$。

对于 $60 \%$ 的评测用例，$1 \leq n \leq 10^{8}$，答案不超过 $10^{8}$。

对于所有评测用例，$1 \leq n \leq 10^{12}$，答案不超过 $10^{12}$。

蓝桥杯 2021 第二轮省赛 A 组 G 题（B 组 H 题）。

## 样例 #1

### 输入

```
12```

### 输出

```
3```

## 样例 #2

### 输入

```
15```

### 输出

```
15 ```

# AI分析结果



### 综合分析与结论
所有题解均基于质因数分解，确保每个质因数的指数为偶数。核心思路是统计奇指数质因数的乘积或去除平方因子得到最小 x。关键在于分解质因数的实现及奇偶性处理。

---

### 高星题解推荐

#### 1. w9095（⭐⭐⭐⭐⭐）
**关键亮点**：代码简洁高效，直接分解质因数并处理奇指数，无需额外存储，正确处理剩余质数。  
**核心代码**：
```cpp
for(long long i=2;i*i<=n;i++) {
    int cnt = 0;
    while (!(n % i)) cnt++, n /= i;
    if (cnt % 2) ans *= i;
}
if (n != 1) ans *= n;
```
**思路**：遍历质因数，统计奇指数质因数并累乘，最后处理剩余质数。

#### 2. aCssen（⭐⭐⭐⭐⭐）
**关键亮点**：独特思路，通过不断去除平方因子直接得到 x，代码简洁高效。  
**核心代码**：
```cpp
for (ll i = 2; i * i <= n; i++) {
    ll k = i * i;
    while (ans % k == 0) ans /= k;
}
printf("%lld", ans);
```
**思路**：将 n 中的平方因子完全除去，剩余部分即为 x，保证 n*x 是平方数。

#### 3. sunyizhe（⭐⭐⭐⭐⭐）
**关键亮点**：解释清晰，代码结构易读，适合教学。  
**核心代码**：
```cpp
for (long long i = 2; i * i <= n; i++) {
    if (n % i == 0) {
        int cnt = 0;
        while (n % i == 0) n /= i, cnt++;
        if (cnt % 2) x *= i;
    }
}
if (n != 1) x *= n;
```
**思路**：分解质因数后统计奇指数质因数，最后处理剩余质数。

---

### 最优关键思路
通过质因数分解确保 n*x 的每个质因数指数为偶数：  
1. **质因数分解**：统计每个质因数的指数，奇指数质因数需相乘到 x。
2. **平方因子去除**：直接去除 n 的所有平方因子，剩余部分即为 x。

---

### 拓展与举一反三
- **类似问题**：寻找使 n*x 为立方数的最小 x（需指数为 3 的倍数）。
- **推荐题目**：
  1. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)
  2. [P1495 曹冲养猪](https://www.luogu.com.cn/problem/P1495)（同余应用）
  3. [P2424 约数和](https://www.luogu.com.cn/problem/P2424)（因数分解）

---

### 个人心得总结
1. **变量类型**：循环变量需用 `long long` 避免溢出。
2. **循环条件**：必须用 `i*i <= n` 确保完全分解。
3. **剩余质数处理**：分解后若 `n > 1`，必为奇指数质因数。
4. **代码简洁性**：直接在分解过程中统计奇指数，避免额外存储。

---
处理用时：164.86秒
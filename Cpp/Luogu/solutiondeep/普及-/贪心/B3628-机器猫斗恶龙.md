# 题目信息

# 机器猫斗恶龙

## 题目描述

机器猫出门斗恶龙了！他需要通过 $n$ 个关卡。

每个关卡要么是与怪物战斗，扣除一定的血量；要么是营地，给机器猫增加一定的血量。

在旅途中，机器猫**任意时刻**的血量不能低于或等于 $0$。问机器猫至少需要多少的初始血量，才能完成任务。

血量为正整数。

## 说明/提示

**样例解释**

第二组样例：机器猫带着 $501$ 点血量出门，两场战斗之后剩下 $1$，恢复到 $1001$，两场战斗之后为 $801$，完成任务。

**数据规模与约定**

对于 $100\%$ 的数据，$n\leq 100000, 1\leq |a_i|\leq 1000$。



## 样例 #1

### 输入

```
3
-100 -200 -300```

### 输出

```
601```

## 样例 #2

### 输入

```
5
-200 -300 1000 -100 -100```

### 输出

```
501```

# AI分析结果



### 综合分析与结论
题目要求找到满足条件的初始最小血量，关键难点在于处理关卡序列中动态变化的血量。最优解法通过计算前缀和的最小值，可在 O(n) 时间内解决，而题解中的二分法虽正确但时间复杂度更高（O(n log m)）。

---

### 精选题解分析

#### 题解作者：ShanCreeperPro（4星）
**关键亮点**：  
- 正确利用二分法的单调性，将问题转化为验证函数的设计。  
- 思路清晰，代码实现直观易懂。  

**改进点**：  
- 未发现更优的线性解法，存在优化空间。  

**核心代码思路**：  
```cpp
bool check(int x) {
    int cur = x;
    for (int a : arr) {
        cur += a;        // 模拟血量变化
        if (cur <= 0) return false;
    }
    return true;
}
// 二分框架略
```

---

### 最优解法关键思路
**前缀和极值法**：  
遍历关卡序列，维护当前前缀和的最小值。初始血量应满足：  
`初始血量 = max(1, 1 - 最小前缀和)`  
**代码实现**：  
```cpp
int calculateMinHP(vector<int>& arr) {
    int min_sum = 0, current = 0;
    for (int a : arr) {
        current += a;
        min_sum = min(min_sum, current);
    }
    return max(1, 1 - min_sum);
}
```

---

### 拓展与相似题目
1. **P1095 守望者的逃离**（贪心+动态维护状态）  
2. **P1083 [NOIP2012 提高组] 借教室**（二分+差分验证）  
3. **P1719 最大加权矩形**（二维前缀和极值）  

---

### 总结
- **核心思维**：将动态过程转化为静态极值分析，利用前缀和性质避免重复计算。  
- **同类技巧**：逆向处理、极值维护、单调性二分在游戏类问题中常见。

---
处理用时：151.68秒
# 题目信息

# [NOIP 2002 提高组] 均分纸牌

## 题目描述

有 $N$ 堆纸牌，编号分别为 $1,2,\ldots,N$。每堆上有若干张，但纸牌总数必为 $N$ 的倍数。可以在任一堆上取若干张纸牌，然后移动。

移牌规则为：在编号为 $1$ 堆上取的纸牌，只能移到编号为 $2$ 的堆上；在编号为 $N$ 的堆上取的纸牌，只能移到编号为 $N-1$ 的堆上；其他堆上取的纸牌，可以移到相邻左边或右边的堆上。

现在要求找出一种移动方法，用最少的移动次数使每堆上纸牌数都一样多。

例如 $N=4$ 时，$4$ 堆纸牌数分别为 $9,8,17,6$。

移动 $3$ 次可达到目的：

- 从第三堆取 $4$ 张牌放到第四堆，此时每堆纸牌数分别为 $9,8,13,10$。
- 从第三堆取 $3$ 张牌放到第二堆，此时每堆纸牌数分别为 $9,11,10,10$。
- 从第二堆取 $1$ 张牌放到第一堆，此时每堆纸牌数分别为  $10,10,10,10$。


## 说明/提示

对于 $100\%$ 的数据，$1  \le  N  \le  100$，$1 \le  A_i  \le 10000$。

**【题目来源】**

NOIP 2002 提高组第一题

## 样例 #1

### 输入

```
4
9 8 17 6
```

### 输出

```
3
```

# AI分析结果



### 综合分析与结论
各题解核心均采用贪心策略，从左到右传递差值。线性算法时间复杂度O(n)最优，允许中间负数但正确性可被证明。关键点在于将当前堆的盈亏传递给右侧堆，累计移动次数。最优解法无需复杂分治，线性扫描即可。

---

### 高分题解推荐

#### 1. 作者：monell（⭐⭐⭐⭐⭐）
**关键亮点**  
- 提出线性算法与分治算法双解法，对比清晰  
- 详细证明线性算法的正确性（通过分治算法等价性）  
- 揭示核心原理：允许中间堆出现负数，传递差异不影响最终结果  

**核心代码**  
```cpp
// 线性算法核心逻辑
for(int i=1;i<=n;i++) a[i]-=avg; // 计算与平均值的差
int ans=0;
for(int i=1;i<n;i++){
    if(a[i]!=0){
        a[i+1]+=a[i]; // 传递差值给右侧
        ans++;
    }
}
```

#### 2. 作者：ProtectEMmm（⭐⭐⭐⭐⭐）
**关键亮点**  
- 严谨证明贪心正确性（消除环状操作的可能性）  
- 引入引理：相邻堆之间只需单向操作  
- 拓展讨论环形版本问题（负载平衡问题）  

**核心代码**  
```cpp
for(int i=1;i+1<=n;++i){
    if(arr[i]!=average){
        ans++; 
        arr[i+1] += arr[i]-average; // 传递差异
    }
}
```

#### 3. 作者：松风之狐（⭐⭐⭐⭐）
**关键亮点**  
- 代码简洁高效，直观体现贪心思想  
- 用数值差直接操作，减少冗余计算  

**代码片段**  
```cpp
for(int i=1;i<=n;i++) a[i]-=num; // 转化为差值问题
for(int i=1;i<=n;i++){
    if(a[i]!=0){
        a[i+1] += a[i]; // 传递到下一堆
        ans++;
    }
}
```

---

### 最优思路总结
**关键技巧**  
1. **差值传递法**：计算每堆与平均值的差值，将当前堆的差值传递给右侧堆，累加移动次数。  
2. **允许中间负数**：虽然题目描述不允许负数，但贪心传递过程最终会平衡所有差值。  
3. **单向操作不可逆**：证明相邻堆只需单向操作，避免重复移动。  

**思维模式**  
- **多米诺骨牌效应**：处理完当前堆后不再回溯，后续堆的状态仅由前方传递决定。  
- **全局盈亏守恒**：每个传递操作保持系统总和不变，最终必然平衡。  

---

### 拓展练习推荐
1. [P4016 负载平衡问题](https://www.luogu.com.cn/problem/P4016)（环形均分纸牌）  
2. [P2127 序列排序](https://www.luogu.com.cn/problem/P2127)（贪心处理循环节）  
3. [P1968 美元汇率](https://www.luogu.com.cn/problem/P1968)（传递式贪心决策）  

---

### 题解中的个人心得摘录
1. **ProtectEMmm**：  
   > "贪心的正确性在于：处理完的堆不再影响后续操作，类似多米诺骨牌倒下。"  
   > 启示：贪心问题常需证明局部操作不影响全局最优。  

2. **monell**：  
   > "分治算法与快排思路相似，但线性算法的正确性更优。"  
   > 经验：复杂算法正确性可辅助证明简单算法。  

3. **Starlight237**：  
   > "不管当前堆盈亏，直接传递给下一堆，无需条件分支。"  
   > 技巧：代码简化通过统一处理正负差异。

---
处理用时：57.65秒
# 题目信息

# 拱猪计分

## 题目描述

「拱猪」是一种很有趣的扑克牌游戏。即使你不知道它的玩法，你也可以由它的计分方式来了解它的趣味性。假设在此我们仅考虑四个人的拱猪牌局，本题要求你根据下面的计分规则，在牌局结束时计算四位玩家所得分数。

1. 我们分别以 $\texttt S, \texttt H, \texttt D, \texttt C$ 来代表黑桃、红心、方块及梅花，并以数字 $1$ 至 $13$ 来代表 $\texttt A, \texttt 2, \dots, \texttt Q, \texttt K$ 等牌点，例如：$H_1$ 为红心 $\texttt A$，$S_{13}$ 为黑桃 $\texttt K$；
2. 牌局结束时，由各玩家持有的有关计分的牌（计分牌）仅有「猪」$S_{12}$，所有红心牌，「羊」$D_{11}$ 及「加倍」$C_{10}$ 等 $16$ 张牌，其它牌均弃置不计，若一位玩家未持有这 $16$ 张牌中任意一张，则以得零分计算；
3. 若持有 $C_{10}$ 牌的玩家只有该张牌而没有任何其它牌则得 $+50$ 分，否则将其它计分牌所得分数加倍计算；
4. 若红心牌不在同一家，则 $H_1$ 至 $H_{13}$ 等 $13$ 张牌均以负分计，其数值依次为 $-50, -2, -3, -4, -5, -6, -7, -8, -9, -10, -20, -30, -40$，且 $S_{12}$ 与 $D_{11}$ 的分值分别以 $-100$ 及 $+100$ 分计算；
5. 若红心牌 $H_1$ 至 $H_{13}$ 均在同一家，则有下列情形：

+ 所有红心牌以 $+200$ 分计算。
+ 若 $S_{12}, D_{11}$ 皆在吃下所有红心牌之一家，则此玩家得 $+500$ 分。
+ $C_{10}$ 牌依旧以前文所述原则计算。

例一：若各玩家持有计分牌如下：

1. `S12 H3 H5 H13`
2. `D11 H8 H9`
3. `C10 H1 H2 H4 H6 H7`
4. `H10 H11 H12`

则各家之得分依序为：$-148, +83, -138$ 及 $-60$。

例二：若各玩家持有计分牌如下：

1. `H1 H2 H3 H4 H5 H6 H7 H8 H9 H10 H11 H12 H13`
2. `S12 C10`
3. `D11`
4. 无

则各家之得分依序为：$+200, -200, +100$ 及 $0$。

例三：若有一玩家持有所有 $16$ 张计分牌，则得 $+1000$ 分，其余三家均得零分。

## 样例 #1

### 输入

```
4  S12  H3  H5  H13
3  D11  H8  H9
6  C10  H1  H2  H4  H6  H7
3  H10  H11 H12
13 H1  H2  H3  H4  H5  H6  H7  H8  H9  H10  H11  H12  H13  
2  S12  C10
1  D11
0
0
0
0
0
```

### 输出

```
-148 +83 -138 -60
+200 -200 +100 0
```

# AI分析结果



### 综合分析与结论
本题目属于复杂规则模拟类，核心难点在于对16张计分牌的组合条件判断（红心牌全集、C10特殊处理、S12/D11叠加规则等）。各题解普遍采用暴力枚举条件分支的策略，但在代码组织与细节处理上差异较大。高质量题解需具备清晰的变量命名、模块化处理计分规则、对边界条件的全面覆盖。

---

### 高星题解推荐

#### 1. 题解作者：Diaоsi（4星）
**关键亮点**：
- 使用独立函数`score()`分离计分逻辑，提升代码可读性
- 引入`cntH/cntS12/cntD11`计数器简化红心全集判断
- 处理输出格式时采用预存结果再统一输出的策略，避免动态输出问题
**核心代码**：
```cpp
int score(){
    int ans = 0, cntH = 0;
    // 统计红心牌数量及特殊牌存在情况
    for(auto& card : s){
        if(card[0] == 'H') cntH++;
        // ...其他牌统计
    }
    // 处理红心全集情况
    if(cntH == 13){
        ans += (has_S12 && has_D11) ? 500 : 200;
    } 
    // 普通计分模式
    else {
        for(auto& card : s) 
            ans += 红心负分表[card];
    }
    // 处理C10加倍
    if(has_C10 && s.size()>1) ans *= 2;
    return ans;
}
```

#### 2. 题解作者：HPXXZYY（4星）
**关键亮点**：
- 使用`map`实现卡牌到数值的高效映射
- 通过`check_red()`函数模块化红心全集验证
- 采用状态变量（s12/d11/c10）简化条件判断
**核心实现**：
```cpp
map<string, int> b{ // 卡牌映射
    {"H1",1}, {"H2",2}, ..., {"C10",16}
};

bool check_red(int player){
    for(int i=1; i<=13; i++)
        if(!exist(player, i)) return false;
    return true;
}

int calc(int player){
    if(n[player]==16) return 1000; // 全集特殊处理
    bool s12=0, d11=0, c10=0;
    // ...统计状态
    if(红心全集){
        ans = (s12&&d11) ? 500 : 200;
    } else {
        // 常规计分
    }
    // C10处理
    if(c10) ans = (n==1) ? 50 : ans*2;
}
```

#### 3. 题解作者：juruo_zjc（3.5星）
**可取之处**：
- 采用结构体存储玩家牌组，增强数据组织性
- 使用独立数组存储红心分值表，便于维护
**优化空间**：
- 多重嵌套条件判断可读性较差
- 未完全处理16张全集特例

---

### 最优关键思路提炼
1. **状态预存**：使用计数器/布尔数组记录关键牌存在状态
2. **模块化验证**：将红心全集验证、C10条件等封装为独立函数
3. **分阶段计分**：
   - 先处理红心全集特殊情形
   - 再处理常规计分模式
   - 最后应用C10加倍规则
4. **输出优化**：预存全部结果后统一处理符号格式

---

### 举一反三训练
1. **P1563 [NOIP2016 提高组] 玩具谜题**（复杂方向模拟）
2. **P1066 2^k进制数**（多条件组合处理）
3. **P1056 排座椅**（贪心+多规则排序）

---

### 调试经验摘录
- **Diaоsi**："注意正数必须带+号，测试发现仅AC第5个点时检查输出格式"
- **封禁用户**："WA第二个点后发现H全集时仍需单独计算S12/D11"
- **Heartlessly**："暴力枚举所有卡牌类型时漏掉H13，调试2小时才找到" 

核心教训：建立完整的测试用例矩阵（包含所有特殊组合），使用断言验证中间状态。

---
处理用时：59.55秒
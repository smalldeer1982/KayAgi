# 题目信息

# [USACO1.3] 混合牛奶 Mixing Milk

## 题目描述

由于乳制品产业利润很低，所以降低原材料（牛奶）价格就变得十分重要。帮助 Marry 乳业找到最优的牛奶采购方案。

Marry 乳业从一些奶农手中采购牛奶，并且每一位奶农为乳制品加工企业提供的价格可能相同。此外，就像每头奶牛每天只能挤出固定数量的奶，每位奶农每天能提供的牛奶数量是一定的。每天 Marry 乳业可以从奶农手中采购到小于或者等于奶农最大产量的整数数量的牛奶。

给出 Marry 乳业每天对牛奶的需求量，还有每位奶农提供的牛奶单价和产量。计算采购足够数量的牛奶所需的最小花费。

注：每天所有奶农的总产量大于 Marry 乳业的需求量。

## 说明/提示

【数据范围】  
对于 $100\%$ 的数据：  
$0 \le n,a_i \le 2 \times 10^6$，$0\le m \le 5000$，$0 \le p_i \le 1000$

题目翻译来自 NOCOW。

USACO Training Section 1.3

## 样例 #1

### 输入

```
100 5
5 20
9 40
3 10
8 80
6 30
```

### 输出

```
630
```

# AI分析结果



### 综合分析与结论
本题核心是贪心算法：按单价排序后优先购买低价牛奶。所有题解均采用此思路，差异体现在实现方式、代码优化及细节处理。最优解需满足时间复杂度低（O(m log m)或O(1000)）、代码简洁且处理边界条件（如需求量为0）。

---

### 精选题解与亮点
#### 1. 远航之曲（5星）
**亮点**：桶排序优化，时间复杂度O(1000)，空间换时间，代码极简。  
**关键代码**：
```cpp
int G[1001] = {0}; // 桶存储各单价的总产量
for (int i=0; i<m; i++) G[p] += a; // 合并相同单价
for (int i=0; i<=1000; i++) { // 按单价从小到大购买
    if (剩余需求 <= G[i]) { 购买部分并退出; } 
    else { 全买并累加费用; }
}
```

#### 2. 青陌（4星）
**亮点**：结构体排序后批量购买，逻辑清晰，代码高效。  
**关键代码**：
```cpp
sort(milk, milk+m, cmp); // 按单价排序
for (int i=0; i<m; i++) {
    if (当前可全买) { 累加费用并减少需求; }
    else { 按剩余需求购买并退出; }
}
```

#### 3. plazum（4星）
**亮点**：使用`pair`简化代码，STL应用娴熟。  
**关键代码**：
```cpp
pair<int, int> a[5005]; // first为单价，second为产量
sort(a, a+m); // pair默认按first排序
for (auto p : a) {
    if (剩余需求 <= p.second) { 累加部分费用并退出; }
    else { 全买并更新需求; }
}
```

---

### 关键技巧总结
1. **桶排序优化**：当单价范围有限（如0-1000）时，用数组直接统计各单价总产量，省去排序步骤。
2. **结构体与STL**：利用`sort`+自定义排序或`pair`简化代码，提升可读性。
3. **边界处理**：特判需求量为0的情况，避免无效计算。

---

### 拓展练习（洛谷题号）
1. **P1090 [NOIP2004 提高组] 合并果子** - 贪心+优先队列  
2. **P1223 排队接水** - 贪心排序求最小等待时间  
3. **P1803 线段覆盖** - 按右端点排序的区间贪心

---

### 个人心得摘录
- *yzx4188*："无需排序，每次遍历找最小单价" → 适合小数据但效率低，需权衡实现复杂度。  
- *煮酒论英雄*：特判输入全0的极端情况，强调边界条件的重要性。  
- *Z_Ovids*：尝试用堆实现贪心，体现灵活思维，尽管非最优解。

---
处理用时：52.71秒
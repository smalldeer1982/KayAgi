# 题目信息

# 排队接水

## 题目描述

有 $n$ 个人在一个水龙头前排队接水，假如每个人接水的时间为 $T_i$，请编程找出这 $n$ 个人排队的一种顺序，使得 $n$ 个人的平均等待时间最小。


## 说明/提示

$1\le n \leq 1000$，$1\le t_i \leq 10^6$，不保证 $t_i$ 不重复。


## 样例 #1

### 输入

```
10 
56 12 1 99 1000 234 33 55 99 812```

### 输出

```
3 2 7 8 1 4 9 6 10 5
291.90
```

# AI分析结果



### 综合分析与结论
本题核心为贪心算法：按接水时间升序排列，使得总等待时间最小。各题解普遍采用结构体排序或数值编码技巧保存序号，并通过公式计算总等待时间（第i人的时间乘以剩余人数）。关键难点在于正确维护序号及优化实现方式。

---

### 高星题解推荐

#### 1. 作者：f112358（★★★★★）
**关键亮点**：  
- 数值编码技巧：将时间×1001+序号存入数组，排序后取模分离序号，避免结构体。  
- 代码简洁高效，利用整数运算优化存储。  
- 时间复杂度O(n log n)，适合本题数据范围。

**核心代码**：  
```cpp
for(int i=1;i<=n;i++) {
    cin>>x;
    t[i]=x*1001+i;  // 合并时间与序号
}
sort(t+1,t+1+n);
for(int j=1;j<=n;j++) {
    sum += t[j]/1001*(n-j);  // 分解计算总时间
}
```

#### 2. 作者：Anguei（★★★★☆）
**关键亮点**：  
- 使用`std::pair`简化双属性排序，默认按first成员排序。  
- 动态内存分配减少空间浪费，代码规范。  
- 数学公式直接推导总时间，逻辑清晰。

**核心代码**：  
```cpp
std::pair<int, int> a = new std::pair<int, int>[n];
std::sort(a, a + n);  // 默认按first升序
for (int i=0; i<n; ++i) {
    sum += a[i].first * (n-i-1);  // 计算总等待时间
}
```

#### 3. 作者：BlueArc（★★★★☆）
**关键亮点**：  
- 结构体排序模板清晰，适合教学。  
- 等待人数计数器规律发现：i与n-j的对应关系。  
- 代码注释详细，变量命名规范。

**核心代码**：  
```cpp
struct a { int b, num; };
sort(a+1, a+n+1, cmp);  // 按时间升序
for(j=n-1; j>=1; j--) {
    i = n-j;  // 规律：i+j = n
    time += a[i].b * j;  // 累加等待时间
}
```

---

### 最优关键思路与技巧
1. **贪心策略**：时间升序排列，确保后续等待人数递减，总时间最小。  
2. **序号处理**：通过结构体、pair或数值编码（如×1001+id）保存原始位置。  
3. **总时间计算**：公式`总时间 += t[i] * (n-i)`，避免嵌套循环。  
4. **数值优化**：利用整数运算合并数据，避免结构体排序的开销。

---

### 拓展与举一反三
1. **同类问题**：任务调度（如最小化平均延迟）、区间排序（如最多不重叠区间）。  
2. **推荐题目**：  
   - P1090 [合并果子](https://www.luogu.com.cn/problem/P1090)（贪心+优先队列）  
   - P1803 [线段覆盖](https://www.luogu.com.cn/problem/P1803)（区间贪心排序）  
   - P2240 [部分背包问题](https://www.luogu.com.cn/problem/P2240)（性价比贪心）

---

### 题解中的个人心得摘录
1. **浮点精度**：  
   > *"必须用double，float会爆精度"* —— 多篇题解强调使用double避免计算误差。  
2. **调试经验**：  
   > *"交换时间时忘记同步交换序号变量，debug半小时"* —— 提醒注意数据一致性。  
3. **编码技巧**：  
   > *"数值编码法节省内存，且无需结构体"* —— 展示空间优化思路。

---
处理用时：62.52秒
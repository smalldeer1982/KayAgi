# 题目信息

# [USACO05MAR] Yogurt factory 机器工厂

## 题目描述

小 T 开办了一家机器工厂，在 $N$个星期内，原材料成本和劳动力价格不断起伏，第 $i$ 周生产一台机器需要花费 $C_i$ 元。若没把机器卖出去，每保养一台机器，每周需要花费 $S$ 元，这个费用不会发生变化。

机器工厂接到订单，在第 $i$ 周需要交付 $Y_i$ 台机器给委托人，第 $i$ 周刚生产的机器，或者之前的存货，都可以进行交付。

请你计算出这 $n$ 周时间内完成订单的最小代价。

## 说明/提示

$1\leq n\leq 10^4$，$1 \le C_i \le 5000$，$1 \le S\le 100$，$0\le Y_i\le 10^4$。

## 样例 #1

### 输入

```
4 5
88 200
89 400
97 300
91 500
```

### 输出

```
126900
```

# AI分析结果



### 综合分析与结论
本题核心是贪心策略：维护当前最优生产成本，每周选择「前序最优成本+保养费」与「当周生产成本」中的较小值。最优解法时间复杂度为O(n)，空间复杂度O(1)，无需预处理数组。所有题解中，线性贪心方案因高效简洁被广泛采用，而双重循环枚举的O(n²)方法效率不足。

---

### 精选题解与评分
#### 1. Jason224413（★★★★★）
**关键亮点**：代码简洁，O(n)时间，正确处理初始条件，用`lastweek`变量动态维护最小值。  
**个人心得**：强调`long long`防溢出，循环起始值需注意。  
```cpp
int main() {
    cin >> n >> k;
    for (int i = 1; i <= n; i++) {
        cin >> c >> y;
        if (i == 1) lastweek = c;
        else lastweek = min(lastweek + k, c); // 核心：递推维护最小值
        ans += lastweek * y;
    }
    cout << ans;
}
```

#### 2. EarthGiao（★★★★★）
**关键亮点**：思路解释清晰，代码变量命名明确，逻辑与Jason解法一致。  
**核心代码**：  
```cpp
for (int i = 1; i <= n; ++i) {
    cin >> c >> y;
    if (i == 1) last = c;
    else last = min(last + s, c); // 递推更新最小值
    ans += last * y;
}
```

#### 3. 花千树（★★★★☆）
**亮点**：在线处理输入，变量命名易懂，注释详细适合新手。  
**代码片段**：  
```cpp
for (int i = 2; i <= n; i++) {
    scanf("%d%d", &sum, &tmp);
    if (f + s < sum) f += s; // 保养更优则保留
    else f = sum;            // 否则更新为当前成本
    ans += f * tmp;
}
```

---

### 关键思路总结
**贪心策略**：维护当前最优成本`min_cost`，每周期更新为`min(min_cost + S, C_i)`，总成本累加`min_cost * Y_i`。  
**实现技巧**：  
- 无需数组存储历史数据，递推更新即可。  
- 注意初始周直接取`C_1`，后续周动态比较。  
- 使用`long long`避免乘法溢出。

---

### 拓展与相似题目
1. **P1208 [USACO1.3]混合牛奶**：贪心选择单价最低的供应商。  
2. **P1090 合并果子**：优先队列维护最小合并代价。  
3. **P3817 小A的糖果**：贪心调整相邻元素满足条件。  

**个人心得摘录**：  
- Ryan_在调试中发现原贪心策略漏洞，最终改用线性递推法。  
- 化学小哥强调“边读边处理”的在线方法对内存更友好。  
- 多篇题解提醒`long long`必要性，体现常见踩坑点。

---
处理用时：49.83秒
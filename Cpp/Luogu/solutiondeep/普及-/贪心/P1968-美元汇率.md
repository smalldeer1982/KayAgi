# 题目信息

# 美元汇率

## 题目背景

此处省略 `MAX_INT+1` 个数。

## 题目描述

在以后的若干天里戴维将学习美元与德国马克的汇率。编写程序帮助戴维何时应买或卖马克或美元，使他从 $100$ 美元开始，最后能获得最高可能的价值。


## 说明/提示

**样例解释**

```cpp
Day 1 ... changing 100.0000 美元= 400.0000 马克
Day 2 ... changing 400.0000 马克= 133.3333 美元
Day 3 ... changing 133.3333 美元= 666.6666 马克
Day 5 ... changing 666.6666 马克= 266.6666 美元
```

update on 2017/08/18：

1. 样例正确答案为 $266.67$

2. 已经把测试点 $1$ 改成样例。

3. SPJ 原先误差是 $0.01$，按照题目要求，重新改为 $0.05$。

## 样例 #1

### 输入

```
5
400
300
500
300
250```

### 输出

```
266.67```

# AI分析结果



### 综合分析与结论
本题要求通过买卖美元与马克获取最大收益，核心在于选择最优的兑换时机。各题解主要分为动态规划（DP）和贪心两种思路。DP方法通过维护每日美元/马克的最大值确保全局最优，正确性高；贪心策略则需识别汇率变化趋势，在相邻下降时兑换以累积收益。部分贪心解法存在逻辑错误，而正确贪心策略需严格满足相邻天数的兑换条件。

### 高星题解推荐
#### 1. 作者：moongazer （★★★★★）
**关键亮点**：  
- 使用滚动变量优化空间，仅用两个变量记录当前状态，极大节省内存。
- 代码简洁高效，逻辑清晰，易于理解。

**核心代码**：
```cpp
double dp1 = 100.0, dp2 = 0;
for (int i = 1; i <= n; i++) {
    int a;
    cin >> a;
    double tmp = dp1;
    dp1 = max(dp1, dp2 / a * 100);
    dp2 = max(dp2, tmp * a / 100);
}
printf("%.2lf", dp1);
```
**核心思想**：每日更新美元和马克的最大值，通过交换前的临时变量确保状态正确转移。

#### 2. 作者：fastle （★★★★★）
**关键亮点**：  
- 贪心策略简洁高效，识别相邻天数的汇率下降进行兑换，时间复杂度O(n)。
- 数学推导正确，通过累积汇率差实现利润最大化。

**核心代码**：
```cpp
double ans = 100;
for (int i = 1; i < n; i++) {
    if (a[i] > a[i+1]) {
        ans *= (double)a[i] / a[i+1];
    }
}
printf("%.2lf", ans);
```
**核心思想**：每次在汇率下降时兑换，利用汇率差乘积累积收益，最后一天自动转为美元。

#### 3. 作者：hmh13951417981 （★★★★☆）
**关键亮点**：  
- 标准DP实现，状态定义明确，适合理解动态规划基础。
- 代码结构清晰，注释详细，便于学习DP思想。

**核心代码**：
```cpp
double d[110] = {0, 100}, m[110];
for (int i = 2; i <= n; i++) {
    d[i] = max(d[i-1], m[i-1] * 100.0 / a[i]);
    m[i] = max(m[i-1], d[i-1] * a[i] / 100.0);
}
printf("%.2lf", d[n]);
```
**核心思想**：通过数组记录每日状态，严格按转移方程更新，确保每一步最优。

### 关键思路总结
- **动态规划**：维护每日持有美元/马克的最大值，状态转移方程为：
  ```text
  美元[i] = max(美元[i-1], 马克[i-1]/当天汇率 *100)
  马克[i] = max(马克[i-1], 美元[i-1] * 当天汇率 /100)
  ```
- **贪心策略**：在相邻天数汇率下降（a[i] > a[i+1]）时兑换，每次操作获得局部最优，累积全局最优。

### 拓展与同类题目
- **举一反三**：类似状态转移问题可参考股票买卖系列（如每日多次交易），或物品价值随天数变化的背包问题。
- **推荐题目**：
  1. [P5662 CSP-J2019 纪念品](https://www.luogu.com.cn/problem/P5662)（动态规划每日状态）
  2. [P1217 买卖股票的最佳时机II](https://www.luogu.com.cn/problem/P1217)（贪心累积收益）
  3. [P2569 股票交易](https://www.luogu.com.cn/problem/P2569)（复杂状态转移DP）

### 题解中的个人心得
- **作者：moongazer**提到“为了省空间，没用数组”，强调空间优化的实际应用。
- **作者：fastle**通过数学推导验证策略，避免陷入复杂状态维护，体现贪心的简洁性。
- **作者：hmh13951417981**强调“无后效性”，提醒DP问题需确保状态设计的合理性。

---
处理用时：198.06秒
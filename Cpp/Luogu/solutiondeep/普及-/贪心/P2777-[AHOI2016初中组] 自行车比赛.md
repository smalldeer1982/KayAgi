# 题目信息

# [AHOI2016初中组] 自行车比赛

## 题目描述

小雪非常关注自行车比赛，尤其是环滨湖自行车赛。一年一度的环滨湖自行车赛，需要选手们连续比赛数日，最终按照累计得分决出冠军。今年一共有 $N$ 位参赛选手。每一天的比赛总会决出当日的排名，第一名的选手会获得 $N$ 点得分，第二名会获得 $N-1$ 点得分，第三名会获得 $N-2$ 点得分，依次类推，最后一名会获得 $1$ 点得分。保证没有选手会排名相同。


在之前的数日较量中，$N$ 位选手已经分别累计了一些分数。现在即将开始的是最后一天的比赛。小雪希望知道有多少位选手还有可能获得最终的冠军，也就是说还有多少选手有可能通过最后一天的比赛获得累计总分第一名。


## 说明/提示

### 数据范围及约定

- 对于 $20\% $ 的数据，$3\le N\le 600$。
- 对于 $50\%$  的数据，$3\le N\le 1\times 10^4$。
- 对于 $100\%$ 的数据，$3\le N\le 3\times 10^5$ 且 $0\le B_i\le 2\times 10^6$。


## 样例 #1

### 输入

```
3
8
10
9```

### 输出

```
3```

## 样例 #2

### 输入

```
5
15
14
15
12
14```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
所有题解均采用贪心策略，核心思路为：选手要夺冠，必须最后一天得最高分，而其他高分选手在最优情况下（最后一轮得分尽可能小）的总分需能被超越。关键在于通过排序后预处理最大值，再线性扫描判断可能夺冠人数。其中小粉兔、_ZZH等题解以O(n log n)复杂度实现，代码简洁且高效。

---

### 高星题解推荐

#### 1. 作者：小粉兔（⭐⭐⭐⭐⭐）
**关键亮点**  
- 数学建模清晰：通过构造c数组表示其他选手最优情况下的最大潜在得分  
- 提前排序+贪心预处理极大优化判断效率  
- 逆序扫描提前终止，避免无效计算  
**核心代码**  
```cpp
sort(b+1,b+n+1);
for(int i=1;i<=n;i++) c[i]=b[i]+n-i+1; // 构造潜在最大值
int mx = *max_element(c+1,c+n+1);
for(int i=n;i>=1;i--) // 逆序扫描提前终止
    if(b[i]+n >= mx) ans++;
```

#### 2. 作者：_ZZH（⭐⭐⭐⭐）
**关键亮点**  
- 逆向思维：将选手按原分降序排列后，直接计算每个位置对应的潜在最大值  
- 代码极简，仅需两次扫描  
**核心实现**  
```cpp
sort(b+1,b+1+n,cmp); // 降序排序
for(int i=1;i<=n;i++)
    maxx = max(maxx, b[i]+i); // i对应最后一轮得分(n-i+1)
for(int i=1;i<=n;i++)
    if(b[i]+n >= maxx) ans++;
```

#### 3. 作者：PolyLoger（⭐⭐⭐⭐）
**优化技巧**  
- 使用后缀最大值数组避免重复计算  
- 从后向前扫描时动态维护最大值  
**个人心得**  
"发现如果得分较高的没希望得第一，得分比他低的更没希望" —— 利用排序后的单调性提前终止  
**代码片段**  
```cpp
sort(a+1,a+1+n);
for(int i=n;i>=1;i--) {
    if(a[i]+n >= mx) ans++;
    else break;
    mx = max(mx, a[i]+n-i+1); // 动态维护最大值
}
```

---

### 最优思路总结
**关键算法**：贪心 + 排序预处理  
1. **排序降维**：将选手按原分数排序，将二维问题转化为一维序列处理  
2. **潜在最大值计算**：对每个位置i，计算若该选手最后一天得最高分时，其他选手的最优总分上限  
3. **线性判断**：逆序扫描提前终止，利用排序后的单调性优化  

**实现技巧**  
- 构造表达式 `原分 + (n - i + 1)` 表示其他选手的最优潜在分  
- 使用后缀最大值或动态维护最大值避免重复计算  

---

### 拓展训练
1. **同类型题**  
   - [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)：贪心+双指针  
   - [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)：单调栈贪心  
   - [P1230 智力大冲浪](https://www.luogu.com.cn/problem/P1230)：时间窗口贪心  

2. **算法套路**  
   - **排序降维**：当问题中存在隐式顺序时，通过排序将问题转化为线性序列处理  
   - **后缀极值**：预处理后缀最大值/最小值优化判断效率  
   - **提前终止**：利用单调性减少无效计算（类似Kadane算法思想）  

---

### 题解个人心得摘录
1. 小粉兔：  
   "发现如果得分较高的没希望得第一，得分比他低的更没希望" —— **单调性应用**  
2. wanghanjun：  
   "写完发现题解做法不同，但通过二分答案AC" —— **多解法探索**  
3. PolyLoger：  
   "怀念比赛时茅塞顿开的自己" —— **算法顿悟体验**

---
处理用时：51.94秒
# 题目信息

# [USACO1.3] 滑雪课程设计Ski Course Design

## 题目描述

农民约翰的农场里有 $n$ 座山峰，每座山都有一个在 $0$ 到 $100$ 之间的整数的海拔高度。在冬天,因为山上有丰富的积雪，约翰经常开办滑雪训练营。

不幸的是，约翰刚刚得知税法在滑雪训练营方面有新变化，明年开始实施。在仔细阅读法律后，他发现如果滑雪训练营的最高和最低的山峰海拔高度差大于 $17$ 就要收税。因此，如果他改变山峰的高度（使最高与最低的山峰海拔高度差不超过 $17$ ），约翰可以避免支付税收。

如果改变一座山 $x$ 单位的高度成本是 $x^2$ 单位，约翰最少需要付多少钱才能使海拔最高的山峰与海拔最低的山峰的高度之差不超过 $17$ 约翰只愿意改变整数单位的高度。

## 说明/提示

#### 样例输入输出 1 解释

约翰保持高度为 $4$、$20$ 和 $21$ 的山的高度。他增高高度为 $1$ 的山，变成高度 $4$ ，花费 $3^2 = 9$。他降低了高度为 $24$ 的山变成高度 $21$，也花费 $3 ^ 2 = 9$。因此总共花费 $9 + 9 = 18$。

---

#### 数据规模与约定

对于 $100\%$ 的数据，$1 \le n \le 1000$，$0 \leq a_i \leq 100$。

## 样例 #1

### 输入

```
5
20
4
1
24
21```

### 输出

```
18```

# AI分析结果



### 综合分析与结论

本题要求调整山峰高度，使最高与最低差不超过17，且总调整代价最小。各题解多采用暴力枚举或三分法。关键点在于正确枚举可能的区间范围或采用高效算法找到最优解。多数暴力枚举存在枚举范围错误，导致无法覆盖所有情况，而三分法正确覆盖全局最优解。

### 评分较高的题解

#### 作者：xiaoniu142857 (★★★★★)
**关键亮点**：使用三分法高效寻找最优解，时间复杂度为O(n log n)，正确覆盖所有可能区间。  
**个人心得**：通过分析代价函数为单谷函数，利用三分法快速定位最小值，避免暴力枚举的冗余计算。  
**核心思路**：
```cpp
int f(int x) {
    int s = 0;
    for (int i = 0; i < n; ++i) {
        if (a[i] < x) s += (x - a[i]) * (x - a[i]);
        else if (a[i] > x + 17) s += (a[i] - x - 17) * (a[i] - x - 17);
    }
    return s;
}
// 三分法主循环
int l = 0, r = 100; // 初始范围覆盖所有可能
while (l < r) {
    int m1 = (l + r) >> 1, m2 = m1 + 1;
    if (f(m1) < f(m2)) r = m2 - 1;
    else l = m1 + 1;
}
cout << f(l);
```

### 最优思路总结
**三分法**通过利用代价函数的单谷性质，高效缩小搜索范围，避免全枚举。核心是正确分析问题模型，识别函数形态，选择合适优化算法。

### 拓展与相似题目
- **P1873** [砍树](https://www.luogu.com.cn/problem/P1873)：二分答案寻找最优高度。
- **P1843** [奶牛晒衣服](https://www.luogu.com.cn/problem/P1843)：贪心或二分法优化时间。
- **P3743** [kotori的设备](https://www.luogu.com.cn/problem/P3743)：二分答案判断可行性。

---
处理用时：421.79秒
# 题目信息

# 小A的糖果

## 题目描述

小 A 有 $n$ 个糖果盒，第 $i$ 个盒中有 $a_i$ 颗糖果。

小 A 每次可以从其中一盒糖果中吃掉一颗，他想知道，要让任意两个相邻的盒子中糖的个数之和都不大于 $x$，至少得吃掉几颗糖。


## 说明/提示

#### 样例输入输出 1 解释

吃掉第 2 盒中的一个糖果即可。

---

#### 样例输入输出 2 解释

第 2 盒糖吃掉 $6$ 颗，第 4 盒吃掉 $2$ 颗，第 6 盒吃掉 $3$ 颗。

---

#### 数据规模与约定

- 对于 $30\%$ 的数据，保证 $n \leq 20$，$a_i, x \leq 100$。
- 对于 $70\%$ 的数据，保证 $n \leq 10^3$，$a_i, x \leq 10^5$。
- 对于 $100\%$ 的数据，保证 $2 \leq n \leq 10^5$，$0 \leq a_i, x \leq 10^9$。

## 样例 #1

### 输入

```
3 3
2 2 2```

### 输出

```
1
```

## 样例 #2

### 输入

```
6 1
1 6 1 2 0 4```

### 输出

```
11```

## 样例 #3

### 输入

```
5 9
3 1 4 1 5```

### 输出

```
0
```

# AI分析结果



### 综合分析与结论
本题要求通过贪心策略调整相邻糖果盒，使其和不超过x。核心思路是**优先调整右侧盒子**，以最小化总消耗。正确解法需确保每次处理后相邻和达标，且盒子值非负。多数题解采用边输入边处理的滚动方法，避免存储整个数组，提升效率。

### 高星题解推荐
#### 1. 作者：a___（★★★★★）
**关键亮点**：动态处理输入，仅用两个变量滚动计算，空间O(1)。正确处理边界条件，避免负数出现。  
**核心代码**：
```cpp
long long ans = 0, yy = 0, a_prev = 0;
for (int i = 1; i <= n; i++) {
    scanf("%lld", &a[i]);
    if (a[i] + a_prev > x) {
        yy = a[i] + a_prev - x;
        a[i] -= yy;  // 优先扣减当前盒子
        ans += yy;
    }
    a_prev = a[i];  // 滚动更新前值
}
```
**心**：通过实时处理保证每一步的合法性，避免后续回溯。

#### 2. 作者：Goes（★★★★★）
**关键亮点**：极简代码，双变量滚动，无需数组。  
**核心代码**：
```cpp
long long ans = 0, now = 0, nex = 0;
for (int i = 1; i <= n; i++) {
    cin >> now;
    long long delta = max(now + nex - x, 0LL);
    ans += delta;
    nex = now - delta;  // 动态调整当前值用于下一轮
}
```
**心**：仅用两个变量实现贪心逻辑，高效省空间。

#### 3. 作者：myfly（★★★★★）
**关键亮点**：滚动变量优化，输入时即时处理。  
**核心代码**：
```cpp
long long ans = 0, rex = 0;
for (int i = 0; i < n; i++) {
    int x;
    cin >> x;
    if (x + rex > M) {
        int sub = x + rex - M;
        ans += sub;
        x -= sub;  // 确保当前值合法
    }
    rex = x;  // 传递到下一轮
}
```
**心**：通过实时更新前值，确保每一步的相邻和达标。

### 最优思路总结
- **贪心策略**：优先扣减右侧盒子，减少对后续处理的影响。
- **滚动处理**：边输入边计算，无需存储完整数组，节省空间。
- **边界处理**：确保每次调整后盒子值非负，避免非法状态。

### 拓展与同类题
- **类似题目**：调整相邻元素满足条件（如单调性、差值限制）。
- **推荐题目**：
  1. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)（贪心+双指针）
  2. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)（贪心构造最小数）
  3. [P4995 跳跳！](https://www.luogu.com.cn/problem/P4995)（贪心排序后跳跃）

### 个人心得摘录
- **数据范围**：注意使用`long long`避免溢出（作者：就是小马啊）。
- **调试经验**：优先调整右侧盒子能减少后续操作（作者：封禁用户）。
- **贪心本质**：当前决策影响后续，需全局优化（作者：a___）。

---
处理用时：386.22秒
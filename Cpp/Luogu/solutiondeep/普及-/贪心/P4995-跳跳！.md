# 题目信息

# 跳跳！

## 题目描述

你是一只小跳蛙，你特别擅长在各种地方跳来跳去。

这一天，你和朋友小 F 一起出去玩耍的时候，遇到了一堆高矮不同的石头，其中第 $i$ 块的石头高度为 $h_i$，地面的高度是 $h_0 = 0$。你估计着，从第 $i$ 块石头跳到第 $j$ 块石头上耗费的体力值为 $(h_i - h_j) ^ 2$，从地面跳到第 $i$ 块石头耗费的体力值是 $(h_i) ^ 2$。

为了给小 F 展现你超级跳的本领，你决定跳到每个石头上各一次，并最终停在任意一块石头上，并且小跳蛙想耗费**尽可能多**的体力值。

当然，你只是一只小跳蛙，你只会跳，不知道怎么跳才能让本领更充分地展现。

不过你有救啦！小 F 给你递来了一个写着 AK 的电脑，你可以使用计算机程序帮你解决这个问题，万能的计算机会告诉你怎么跳。

那就请你——会写代码的小跳蛙——写下这个程序，为你 NOIp AK 踏出坚实的一步吧！

## 说明/提示

#### 样例解释

两个样例按照输入给定的顺序依次跳上去就可以得到最优方案之一。

#### 数据范围
对于 $1 \leq i \leq n$，有 $0 < h_i \leq 10 ^ 4$，且保证 $h_i$ 互不相同。

对于 $10\%$ 的数据，$n \leq 3$；

对于 $20\%$ 的数据，$n \leq 10$；

对于 $50\%$ 的数据，$n \leq 20$；

对于 $80\%$ 的数据，$n \leq 50$；

对于 $100\%$ 的数据，$n \leq 300$。

## 样例 #1

### 输入

```
2
2 1```

### 输出

```
5```

## 样例 #2

### 输入

```
3
6 3 5
```

### 输出

```
49```

# AI分析结果



### 综合分析与结论
所有题解均采用贪心策略：排序后左右交替跳跃，确保每次跳跃高度差最大。核心证明思路是通过反证法或代数比较，证明该策略能最大化每一步的平方差之和。代码实现普遍采用双指针法，时间复杂度为 O(n log n)。所有题解均未涉及复杂数据结构，属于典型贪心思维题。

---

### 高评分题解推荐

#### 1. 作者：UnyieldingTrilobite (⭐⭐⭐⭐⭐)
**关键亮点**：  
- 严谨的数学归纳法证明，分终点是否为最高点两种情况讨论  
- 提出核心结论：最优路径必为高低交替跳跃  
- 证明过程具有普适性，可推广到任意数量石头的情况  

**个人心得**：  
> "OI 就是这样，不光要能 AC，还要知道自己为什么能 AC" —— 强调理解算法正确性的重要性  

#### 2. 作者：Gumbo (⭐⭐⭐⭐)
**关键亮点**：  
- 通过对比交换跳跃顺序的体力差证明策略最优性  
- 给出简洁的双指针代码实现  
- 使用代数公式直接推导差值变化  

**核心代码**：  
```cpp
long long l=0, r=n, ans=0;
while(l < r) {
    ans += (h[r]-h[l])*(h[r]-h[l]);
    l++;
    ans += (h[l]-h[r])*(h[l]-h[r]);
    r--;
}
```

#### 3. 作者：JASON杨 (⭐⭐⭐)
**关键亮点**：  
- 用分组思想解释跳跃策略  
- 提供带有状态变量控制的代码  
- 详细推导式三与式二的体力差比较  

**核心代码片段**：  
```cpp
int j=0, hpast=0;
for(int i=1; i<=n; i++) {
    j = n-j + sum;  // 动态计算跳跃位置
    sum = !sum;
    ans += (h[j]-hpast)*(h[j]-hpast);
    hpast = h[j];
}
```

---

### 最优关键思路与技巧
1. **排序+双指针**：排序后，用左右指针交替取最大/最小值，确保每次跳跃高度差最大。  
2. **数学证明技巧**：通过构造新旧路径的体力差，证明原策略更优。常用方法包括平方差展开与符号分析。  
3. **数据范围处理**：使用 `long long` 防止平方溢出，排序前加入地面高度 h₀=0。  

---

### 拓展练习（洛谷题号）
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心+优先队列  
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223) - 排序贪心+时间计算  
3. [P1012 拼数](https://www.luogu.com.cn/problem/P1012) - 字符串排序贪心  

---

### 题解中的调试经验总结
- **数据类型**：多篇题解强调必须用 `long long` 存储结果（如 hamster000 的代码注释）  
- **指针边界**：循环条件需正确处理 `l <= r` 或 `l < r`，避免重复计算（见 Wind_Smiled 的代码）  
- **初始状态**：地面 h₀=0 必须参与排序（如 114514xxx 的代码中 `sort(high, high+1+n)`）

---
处理用时：50.37秒
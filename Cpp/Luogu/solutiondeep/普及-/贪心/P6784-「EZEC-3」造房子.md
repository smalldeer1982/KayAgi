# 题目信息

# 「EZEC-3」造房子

## 题目背景

pigstd 要去造房子了。

## 题目描述

pigstd 有 $a$ 个 A 材料和 $b$ 个 B 材料，造**第** $i$ 层楼需要 $i$ 个 A 材料与 $i$ 个 B 材料。

但是 pigstd 觉得房子不够高，于是他拿出了 $c$ 块钱，每块钱都可以用来买 $1$ 个 A 材料或者 $1$ 个 B 材料。

现在 pigstd 想知道，他最多能建多少层楼的房子。

## 说明/提示

**【样例 1 说明】**

pigstd 买 $2$ 个 A 材料和 $1$ 个 B 材料后就有 $3$ 个 A 材料和 $3$ 个 B 材料，最多可以建 $2$ 层楼的房子。

（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）

**【样例 2 说明】**

pigstd 买 $3$ 个 A 材料后就有 $4$ 个 A 材料和 $5$ 个 B 材料，最多可以建 $2$ 层楼的房子。

（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）

**【数据规模与约定】**

对于 $100\%$ 的数据，$0 \le a,b,c \le 10^{12}$。

| 数据点编号 | 满足的条件 |
| :----------: | :----------: |
|$1-4,22$| $c = 0$ |
|$5-8,21$| $a,b,c \le 10^{3}$ |
|$9-12$| $a,b,c \le 10^{6}$ |
|$13-20$| $a,b,c \le 10^{12}$ | 

## 样例 #1

### 输入

```
1 2 3```

### 输出

```
2```

## 样例 #2

### 输入

```
1 5 3```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
本题核心在于通过合理分配资源使两种材料数量尽可能均衡，再用数学方法快速计算最大可建楼层。最优解法是通过数学公式直接计算，时间复杂度 O(1)。

---

### 精选题解及评分

#### 1. 云浅知处（★★★★★）
**关键亮点**  
- 数学推导严谨，直接解二次方程求最大楼层  
- 处理 `c` 的策略清晰，分类讨论优化资源分配  
- 代码简洁高效，完美应对 1e12 量级数据  
**核心代码**  
```cpp
LL x = max(a, b), y = min(a, b);
LL m = x - y;
if (m > c) {
    LL ans = floor((sqrt(8 * (y + c) + 1) - 1) / 2);
} else {
    c -= m;
    LL ans = floor((sqrt(8 * (x + c / 2) + 1) - 1) / 2);
}
```
**实现思想**  
将较小材料补到较大材料的差值，剩余 `c` 平分后计算最大楼层。

#### 2. Unordered_OIer（★★★★☆）
**关键亮点**  
- 全面覆盖三种解法（顺序、二分、数学），适合不同基础  
- 详细推导一元二次方程解法，数学分析透彻  
**核心代码**  
```cpp
long long n = min(a, b) + c;
if (min(a, b) + c > max(a, b)) 
    n = (a + b + c) / 2;
long long ans = floor((sqrt(8 * n + 1) - 1) / 2);
```
**实现思想**  
优先平衡材料总数，用数学公式直接求解。

#### 3. Aw顿顿（★★★★☆）
**关键亮点**  
- 贪心策略简洁直观，代码易于理解  
- 通过预判循环次数优化，实际效率可靠  
**核心代码**  
```cpp
if (abs(a - b) > c) s = min(a, b) + c;
else s = (a + b + c) / 2;
for (long long i = 1; ; i++) {
    ans += i;
    if (ans > s) return i - 1;
}
```
**实现思想**  
优先填补材料差，剩余资源均分后暴力累加楼层需求。

---

### 最优关键思路
1. **资源平衡策略**：用 `c` 将较小材料补至较大材料，剩余平分，最大化 `min(a, b)`。  
2. **数学优化**：通过 `n(n+1)/2 ≤ s` 推导 `n = floor((sqrt(8s + 1) - 1)/2)`，避免暴力枚举。  

---

### 拓展与相似题型
- **同类问题**：资源分配平衡（如 CF1538C, 洛谷P2440）  
- **算法套路**：贪心 + 数学推导/二分答案  
- **推荐题目**  
  1. [P1873 砍树](https://www.luogu.com.cn/problem/P1873)（二分答案）  
  2. [P2440 木材加工](https://www.luogu.com.cn/problem/P2440)（二分答案）  
  3. [P1181 数列分段](https://www.luogu.com.cn/problem/P1181)（贪心+二分）  

---

### 调试与心得摘录
- **云浅知处**：强调二次方程根的推导过程，避免暴力枚举。  
- **Unordered_OIer**：提醒注意 `x ≥ 0` 的隐含条件，排除无效解。  
- **Daidly**：代码中未正确处理循环终止条件，导致部分样例错误。

---
处理用时：57.34秒
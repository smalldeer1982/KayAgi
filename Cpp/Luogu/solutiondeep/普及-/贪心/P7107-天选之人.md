# 题目信息

# 天选之人

## 题目背景

暑假期间，学校不提供午餐，Gnar 只好找伙计们一起点外卖。

尴尬的是，外卖很快送到却没人乐意去校门口拿，毕竟户外可是 $35\degree\!\text{C}$ 高温！此时 Gnar 想到了好主意：“我给一人捏了一张纸团，其中一张写有记号，不如我们抓阄决定，谁抽到带记号的谁去拿！”

于是 Gnar 连续拿了六天的外卖。

这可让他不服又委屈：“换个规则！一人准备三张纸团，五张有记号，每人抽三张，记号最多的去拿！”

Gnar 紧张地展开手中的纸团，两个记号赫然映在眼前。大伙们刚想放声大笑他的非酋运气，有人缓缓举起三张纸片说道：“我也抽到了两个记号……”

## 题目描述

好奇的 Gnar 想研究一般情况下抽到最多记号的人数。他给参与抓阄的 $n$ 人一人准备了 $m$ 张捏好的纸团，一共 $nm$ 张，其中恰好 $k$ 张提前写了记号。随后每个人在均匀打乱的纸团中各抽 $m$ 张。

一个人抽到最多的记号，当且仅当没有人抽到的记号比他还多。请你帮 Gnar 判断是否可能会**恰好** $\boldsymbol{p}$ **个人**抽到最多的记号。Gnar 喜欢追根问底，所以如果有可能，你还需构造每个人抽的纸团中分别有多少带记号、有多少不带记号。

形式化地，假设第 $i$ 个人抽到了 $x_i$ 张带记号的纸团和 $y_i$ 张不带记号的纸团，你的构造应满足：

- $x_i, y_i \ge 0$，$x_i + y_i = m$。
- $\displaystyle \sum_{i = 1}^{n} x_i = k$。
- **有且仅有** $\boldsymbol{p}$ **个互不相同**的 $j$ 使 $\displaystyle x_j = \max_{i = 1}^{n} \{x_i\}$。

## 说明/提示


**【样例解释 #1】**

样例给出了一种满足题述条件的构造。

**【样例解释 #2】**

不论如何，记号的分布从高到低只有三种情况：$\{3,0,0\}$，$\{2,1,0\}$，$\{1,1,1\}$，抽到最多记号的人数分别对应 $1$，$1$，$3$。因此无法构造 $p = 2$ 的方案。

----

**【数据规模与约定】**

**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。

- Subtask #1 (15 points)：$n,m \le 8$。
- Subtask #2 (15 points)：$n,m \le 100$。
- Subtask #3 (20 points)：$n,m \le 10^5$。
- Subtask #4 (10 points)：$p = 1$。
- Subtask #5 (40 points)：无特殊限制。

对于所有的数据，保证 $1 \le p \le n \le {10}^5$，$1 \le m \le {10}^9$，$0 \le k \le n m$。

## 样例 #1

### 输入

```
3 3 5 2```

### 输出

```
YES
2 1
2 1
1 2```

## 样例 #2

### 输入

```
3 3 3 2```

### 输出

```
NO```

## 样例 #3

### 输入

```
3 3 5 3```

### 输出

```
NO```

# AI分析结果



### 综合分析与结论

本题需构造恰好 p 人抽到最多记号的情况，核心在于确定最大值 q 的取值，并验证剩余记号能否合理分配。所有题解均围绕以下关键点展开：
1. **最大值 q 的确定**：q = min(m, k//p)
2. **剩余分配验证**：k-p*q ≤ (n-p)*(q-1)
3. **特殊情况处理**：n=p 时需 k 能被 p 整除

各题解思路高度一致，差异主要体现在代码实现细节和特殊情况的处理上。其中 Unordered_OIer 的题解逻辑严密、代码清晰，HanPi 的题解补充了 n=p 的特殊情况处理，均值得重点参考。

---

### 精选题解与亮点

#### 题解1：Unordered_OIer（⭐⭐⭐⭐⭐）
**关键亮点**：
- 直接推导最大值 q 的边界条件，逻辑简洁
- 代码中通过遍历处理剩余分配，逻辑清晰
- 包含详细的错误检查模块（如 check 函数）

**个人心得**：
> "最后，祝洛谷月赛越办越好!"  
> —— 代码中隐含了对边界条件的充分测试，如 q=0 和 rest=0 的处理

**核心代码**：
```cpp
ll q = min(m, k / p);
if (k - q * p > (n - p) * (q - 1)) return puts("NO"), 0;

// 分配 p 个 q
for (ll i = 1; i <= p; i++) x[i] = q;

// 处理剩余分配
ll rest = k - q * p;
for (ll i = p + 1; i <= n; i++) {
    if (rest >= q - 1) {
        x[i] = q - 1;
        rest -= q - 1;
    } else if (rest > 0) {
        x[i] = rest;
        rest = 0;
    }
}
```

#### 题解2：HanPi（⭐⭐⭐⭐）
**关键亮点**：
- 明确处理 n=p 的特殊情况
- 采用数学公式计算余数分配，逻辑直观

**核心代码**：
```cpp
if (n == p) {
    if (k % p != 0) puts("NO");
    else // 输出均匀分配方案
}

// 计算余数分配
ll h = (k - q*p) / (n-p);
ll mod = (k - q*p) % (n-p);
if (h + (mod>0) >= q) puts("NO"); // 检查合法性
```

---

### 关键思路总结

1. **贪心构造最大值**：将前 p 人的记号数设为 q = min(m, k/p)，最大化其取值。
2. **剩余分配验证**：剩余记号需满足 `rest ≤ (n-p)*(q-1)`，否则无法保证 q 是最大值。
3. **特判 n=p 情况**：此时必须 k 能被 p 整除，否则无解。

---

### 类似题目推荐

1. **P1031 均分纸牌**  
   - 关键词：贪心分配、数学构造
   - 难度：普及-  
   - 链接：https://www.luogu.com.cn/problem/P1031

2. **P1282 多米诺骨牌**  
   - 关键词：动态规划、差值最小化
   - 难度：普及+/提高  
   - 链接：https://www.luogu.com.cn/problem/P1282

3. **P2123 皇后游戏**  
   - 关键词：贪心策略、排序构造
   - 难度：提高+/省选-  
   - 链接：https://www.luogu.com.cn/problem/P2123

---
处理用时：56.89秒
# 题目信息

# 「LAOI-1」GCD

## 题目描述

一张图有 $n$ 个节点，编号为 $1,2,3,\dots,n$。其中 $i$ 号节点会向 $j$ 号节点连一条边权为 $|i-j|$ 的无向边，当且仅当 $\gcd(i,j)=i,\operatorname{lcm}(i,j)=j$ 时连边。现询问 $q$ 次，每次询问求 $x$ 到 $y$ 的最短路径。

## 说明/提示

注意时空限制，本题不捆绑。

对于 $40\%$ 的数据，$T,n,q\le100$;

对于 $100\%$ 的数据，$1\le T\le10^6$，$1\le n,q\le10^6$，$1\le x,y\le n$，$1\le \sum n,\sum q\le10^6$。

**请使用更快的 IO 方式**。

updata on 2024/8/8：

时限上调到 1000ms。/yun

## 样例 #1

### 输入

```
1
6 4
1 4
3 5
2 5
2 4```

### 输出

```
3
6
5
2```

# AI分析结果



### 综合分析与结论
题目核心在于发现连边条件等价于节点间的倍数关系，并通过数学推导得出最短路径必然经过两数的最大公约数。最优解为 $x+y-2\gcd(x,y)$，时间复杂度 $O(1)$ 处理每个询问。

---

### 精选题解

#### 1. 题解作者：sto_5k_orz (⭐⭐⭐⭐⭐)
**关键亮点**：
- 严谨的数学证明：通过比较不同路径方案（如走到 $\gcd$ 或 $\text{lcm}$）的优劣，结合积与和的关系推导最优性。
- 官方题解权威性：详细解释了边权计算逻辑，并验证了其他可能路径的不优性。
- 代码简洁高效：直接调用内置 `__gcd` 函数，优化输入输出。

**核心代码**：
```cpp
int a, b; Read(a, b); int g = __gcd(a, b);
writeln(a + b - 2 * g);
```

#### 2. 题解作者：Coffins (⭐⭐⭐⭐)
**关键亮点**：
- 思路直观清晰：快速将问题转化为倍数关系分析，并通过反证法说明跳转到 $\gcd$ 的最优性。
- 代码可读性强：手写 `gcd` 函数，适合教学场景。
- 个人心得启示：强调快速识别数学条件的重要性，避免过度复杂化。

**核心代码**：
```cpp
int gcd(int a,int b) {
    while(b^=a^=b^=a%=b);
    return a;
}
cout<<x+y-2*gcd(x,y)<<'\n';
```

---

### 最优关键思路
**核心技巧**：  
发现图中边权结构具有**因数链特性**，最短路径可通过**跳转到最大公约数**实现。利用数论性质将图论问题转化为数学计算，避免传统最短路算法的高复杂度。

**思维模式**：  
- 将图的结构与数论条件结合，识别隐藏的数学规律。
- 通过极端情况（如 $\gcd$ 和 $\text{lcm}$）比较路径优劣，归纳一般最优解。

---

### 拓展与推荐题目
**同类题型**：
1. **P1029 [NOIP2001 普及组] 最大公约数和最小公倍数问题**  
   （考察 $\gcd$ 与 $\text{lcm}$ 的联合应用）
2. **P1891 疯狂的 LCM**  
   （结合 $\text{lcm}$ 性质进行动态规划）
3. **P2421 [NOI2002] 荒岛野人**  
   （利用 $\gcd$ 分析周期性行为）

**调试经验**：
- **Coffins** 提到被输入卡常，强调**快速 IO 的重要性**（如关闭流同步、使用 `'\n'` 替代 `endl`）。
- **数学直觉优先**：避免陷入复杂图结构分析，优先验证数学猜想。

---
处理用时：88.91秒
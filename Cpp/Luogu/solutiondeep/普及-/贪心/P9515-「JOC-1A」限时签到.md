# 题目信息

# 「JOC-1A」限时签到

## 题目背景

纵使寻不到身外的青春，

也总得自己来一掷我身中的迟暮。

但暗夜又在那里呢？

现在没有星，没有月光以至没有笑的渺茫和爱的翔舞；

青年们很平安，而我的面前又竟至于并且没有真的暗夜。

绝望之为虚妄，正与希望相同！

                                
——@duanfeitong 摘自鲁迅《希望》

## 题目描述

你现在一条笔直的公路上，我们不妨把这条公路看做成一条数轴，你现在在数轴原点的位置上，此外还有 $n$ 个签到处，第 $i$ 个签到处的坐标为 $x_i$，并且其将在你出发后的第 $a_i$ 个时刻开始营业，每个签到处只有在开始营业了之后你才可以进去签到（签到的时间可以忽略不计），你在每个时刻内至多可移动 $1$ 个单位，你必须在 $t$ 时刻或者在此之前到达坐标为 $f$ 的点（$f\le t$），无论你在规定时间内何时到达 $f$ 点，从 $t$ 时刻起你就必须一直待在 $f$ 点，问你最多能去多少个签到处签到。**请注意，你不需要按照签到处的编号顺序签到。**

## 说明/提示

### 样例 $\small\text{1}$ 解释

一种可行的行动方案如下：在 $5$ 时刻来到第三个签到处签到，然后在 $7$ 时刻来到第二个签到处签到，最后在 $14$ 时刻来到终点，可以证明最多只能去 $2$ 个签到处签到。

### 数据规模与约定

**本题采用捆绑测试**。

| $\textbf{Subtask}$ | $\textbf{Number}$ | $\textbf{Special conditions}$| $\textbf{Points}$ | $\textbf{Limit}$ |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | $1-2$ | $n\leq 10$ | $10$ | $\small\texttt{1s，128MB}$ |
| $2$ | $3-4$ | $n\leq 5\times 10^3$ | $15$ | $\small\texttt{1s，128MB}$ |
| $3$ | $5$ | $n\leq 10^6$ | $25$ | $\small\texttt{1s，128MB}$  |
| $4$ | $6-7$ | $f\leq 10^5$ | $20$ | $\small\texttt{500ms，128MB}$ |
| $5$ | $8-9$ | $n\leq 10^6$ | $30$ | $\small\texttt{150ms，10MB}$ |

对于 $100\%$ 的数据，$1\leq n\leq 10^6$，$0\leq f\leq t\leq 10^{18}$，$0\leq x_i\leq f$，$0\leq a_i\leq t$，**不保证签到处的坐标互不相同**。

请注意：由于本题当 $n$ 接近 $10^7$ 时数据输入量过大，故我们决定在 $n\leq 10^6$ 的数据上修改时间限制和空间限制以代替 $n\leq 10^7$ 的数据的评测。

**请注意，本题输入数据量较大，建议使用较快的读入方式。**

---

在我永恒的记忆里，

你天真地微笑。

在我年轻的心中，

你是星星之火燃烧。

——@duanfeitong 摘自祁子《童年》

## 样例 #1

### 输入

```
3 20 10
7 18
3 5
5 0```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
本题关键在于贪心策略的选择：通过将最大等待时间集中在起点，确保在到达终点前能签到尽可能多的点。所有正确题解均通过推导得到条件式 `a_i ≤ x_i + (t - f)`（或等价形式），并在线统计符合条件的签到点数。核心思路一致，仅实现细节和推导表达不同。

### 高星题解推荐
#### 1. 作者：zhuweiqi（5星）
**关键亮点**  
- 思路清晰，正确推导出最晚出发时间与签到条件。
- 代码简洁，变量命名合理，结合快读处理大数据高效。
- 代码中 `t -= f` 直接处理剩余可等待时间，逻辑明确。

**核心代码**  
```cpp
cin>>n>>t>>f;
t -= f; // 剩余可等待时间
for(int i=0;i<n;i++) {
    IO::read(x), IO::read(a);
    if(a <= x + t) ans++; // 判断条件式
}
```

#### 2. 作者：渡鸦2007（5星）
**关键亮点**  
- 推导条件式 `ai + (f - xi) ≤ t` 等价变形，数学表达直观。
- 代码实现高效，变量命名清晰，直接在线处理输入数据。

**核心代码**  
```cpp
scanf("%lld%lld%lld",&n,&t,&f);
while(n--) {
    scanf("%lld%lld",&x,&a);
    if(a + (f - x) <= t) ans++;
}
```

#### 3. 作者：Red0rangE（4星）
**关键亮点**  
- 条件式 `f - x ≤ t - a` 的推导过程清晰，代码实现简洁。
- 使用 `long long` 类型处理大数，避免溢出问题。

**核心代码**  
```cpp
if (f - x <= t - a) ans++; // 等价条件式
```

### 最优关键思路总结
1. **贪心策略**：在原点等待至最后一刻（`t - f` 时刻）出发，直接前往终点。
2. **条件转换**：判断每个签到处是否满足 `a_i ≤ x_i + (t - f)`，确保到达该点时已开放。
3. **在线处理**：无需存储所有数据，逐个读取并判断，空间复杂度 O(1)。

### 同类题目推荐
1. [P1080 国王游戏](https://www.luogu.com.cn/problem/P1080)：贪心策略推导最优排列。
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)：优先队列实现贪心选择。
3. [P5019 铺设道路](https://www.luogu.com.cn/problem/P5019)：区间覆盖的贪心处理。

### 题解中的个人心得摘录
- **内存优化**：多位作者（如wangweichen666）提到初始使用数组导致 MLE，后改用在线处理，强调大数据下的空间管理。
- **推导验证**：通过样例反向推导条件式（如wangweichen666的样例分析），体现对问题条件的深入理解。
- **变量命名**：部分题解（如wmrqwq）因变量命名混淆导致推导描述错误，提示代码可读性的重要性。

---
处理用时：136.18秒
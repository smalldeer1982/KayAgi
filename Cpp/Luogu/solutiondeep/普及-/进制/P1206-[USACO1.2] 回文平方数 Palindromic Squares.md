# 题目信息

# [USACO1.2] 回文平方数 Palindromic Squares

## 题目描述

回文数是指从左向右念和从右向左念都一样的数。如 $12321$ 就是一个典型的回文数。

给定一个用十进制表示的正整数 $B$，输出所有 $[1,300]$ 中，它的平方用 $B$ 进制表示时是回文数的数。


## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$2 \le B \le 20$

题目翻译来自NOCOW。

USACO Training Section 1.2


## 样例 #1

### 输入

```
10
```

### 输出

```
1 1
2 4
3 9
11 121
22 484
26 676
101 10201
111 12321
121 14641
202 40804
212 44944
264 69696
```

# AI分析结果



### 综合分析与结论
题目核心在于进制转换与回文判断。各题解均采用遍历1-300的数，计算平方后转B进制并判断回文。关键差异在于进制转换的实现方式（数组/字符串）、代码结构（函数拆分/结构体封装）及输出处理。

---

### 精选题解与评分

#### 1. 作者：hsfzLZH1（4星）
**关键亮点**  
- 使用结构体封装进制转换与回文判断，逻辑高度模块化。  
- 构造函数直接完成进制转换，优化存储结构（数组存储余数）。  
- 回文判断通过数组对称比较，避免字符串操作，效率高。  
**核心代码**  
```cpp
struct node {
    int l, a[20]; // 存储B进制数
    node(int x) { // 构造函数完成转换
        for(l=0; x; l++) a[l] = x % b, x /= b;
    }
    bool tf() { // 判断回文
        for(int i=0; i<l; i++) 
            if(a[i] != a[l-i-1]) return false;
        return true;
    }
};
```

#### 2. 作者：Creeper_LKF（4星）
**关键亮点**  
- 利用栈处理进制转换的逆序输出，代码简洁直观。  
- 字符串拼接直接生成正序结果，避免手动反转。  
- 回文判断通过双指针对称比较，逻辑清晰。  
**核心代码**  
```cpp
string change(int decs) {
    string x;
    stack<short> ns;
    while(decs) {
        ns.push(decs % n);
        decs /= n;
    }
    while (!ns.empty()) {
        short y = ns.top();
        x += (y < 10) ? (y + '0') : (y - 10 + 'A');
        ns.pop();
    }
    return x;
}
```

#### 3. 作者：Violette（4星）
**关键亮点**  
- 函数拆分为转换、判断、输出三部分，模块化清晰。  
- 全局数组存储余数，避免动态内存分配。  
- 回文判断通过单次循环完成，代码紧凑。  
**核心代码**  
```cpp
void jz(int a, int b) { // 转换函数
    int r = 0;
    while(a) {
        s[++r] = a % b;
        a /= b;
    }
    s[0] = r; // s[0]存储长度
}
bool change() { // 回文判断
    for(int i=1; i<=s[0]; i++) 
        if(s[i] != s[s[0]+1-i]) return false;
    return true;
}
```

---

### 关键思路与技巧总结
1. **进制转换**：短除法取余，倒序输出。若余数>9，映射为字母（`余数-10+'A'`）。
2. **回文判断**：对称比较数组/字符串元素，只需遍历前半部分。
3. **代码优化**：封装转换逻辑（结构体/函数），避免重复计算；优先用数组处理减少字符串操作开销。

### 扩展练习推荐
1. [P1143 进制转换](https://www.luogu.com.cn/problem/P1143)  
2. [P1217 回文质数](https://www.luogu.com.cn/problem/P1217)  
3. [P1022 进制位](https://www.luogu.com.cn/problem/P1022)  

### 个人心得摘录
- **「注意转换顺序」**：短除法得到的余数是逆序的，输出前需反转。（作者：hsfzLZH1）  
- **「全局变量陷阱」**：多次转换时需清空数组，避免残留数据。（作者：DrMao）  
- **“字符映射顿悟”**：直接通过ASCII计算生成字母，无需大量分支判断。（作者：Creeper_LKF）

---
处理用时：174.94秒
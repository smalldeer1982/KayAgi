# 题目信息

# [AHOI2008] 计算器

## 题目描述

小可可在欢乐岛的快乐旅程还在继续，他想买一些纪念品带回去给同学们，于是来到了礼品部，在这里他发现了一个有趣的计算器.

这个计算器是一种特殊的、支持变进制整数加减运算的计算器（所谓变进制，就是每一位的进制可以不同。例如，如果最低位是 $3$ 进制，次低位是 $5$ 进制，那么这种情况的 $42$ 转化成十进制就是 $4\times 3+2=14$）。

店主看小可可对这个计算器非常感兴趣，于是他问小可可：“小朋友，如果我告诉你这个计算器最多可以支持 $N$ 位的变进制整数，且每一位的进制分别是 $x_1,x_2,\ldots,x_n$，那么你知道它能表示的最大整数 $M$ 是多少吗?”，小可可想了想说到：“它所能表示的最大的整数 $M$ 是 $(x_1\times x_2\times \cdots\times x_n)-1$。”

店主非常高兴，说道：“你真是个聪明的孩子，如果我告诉你两个长度为 $N$ 的变进制整数 $A,B$，你按照我的要求来计算 $(A＋B)\bmod(M+1)$ 或 $(A-B)\bmod(M+1)$，答案还是用相同的变进制来表示，如果你算对了，那么我就把这个计算器送给你。”

这下把小可可难住了，但是他非常想要这个计算器，聪明的你能够帮助小可可吗?

## 说明/提示

$100\%$ 的数据中，$1\le N \le 10^5$，$1 < x_1,x_2,\ldots x_N<100$。

$30\%$ 的数据中，$N \le 9$，$x_1 = x_2 =\ldots = x_N =10$。

## 样例 #1

### 输入

```
3
3 2 5
1 1 2
+
0 0 3```

### 输出

```
2 0 0

```

# AI分析结果



### 综合分析与结论
本题核心是处理变进制高精度加减法，关键点在于：  
1. **倒序处理**：所有题解均从低位向高位处理（数组下标倒序），便于进位/借位操作  
2. **循环处理进位**：减法时必须用`while`而非`if`处理连续借位（多位可能同时不足）  
3. **取模优化**：结果自然在n位内，无需显式计算$M+1$取模  
4. **存储优化**：直接操作输入数组而非转为十进制，避免溢出  

各题解均采用高精度模板，区别在于细节处理。最优解需满足：正确处理连续借位、清晰注释、处理最高位进位边界情况。

---

### 精选题解（评分≥4星）

#### 1. 见贤思齐_Seakies（⭐⭐⭐⭐⭐）
**核心亮点**：  
- 完整注释说明倒序原理  
- 减法使用`while`处理多次借位  
- 输出时单独处理末位空格  
**关键代码**：
```cpp
void cha() {
    for (int i = n; i >= 1; i--) {
        sum[i] = a[i] - b[i];
        while (sum[i] < 0) { // 必须用while处理多次借位
            a[i - 1]--;
            sum[i] += x[i];
        }
    }
}
```

#### 2. byft（⭐⭐⭐⭐）
**核心亮点**：  
- 独立函数处理加减法  
- 数组命名清晰（jz=进制）  
- 倒序输入直接处理  
**调试经验**：  
> "减法中必须清零t变量，否则残留值导致错误"

---

### 关键思路总结
1. **倒序存储**：输入时直接倒序存入数组（如`for(i=n;i>=1;i--)`），符合计算顺序  
2. **进位链式处理**：
   ```cpp
   // 加法进位示例
   sum[i] += a[i] + b[i];
   carry = sum[i] / x[i];
   sum[i] %= x[i];
   a[i-1] += carry; // 进位直接影响前一位
   ```
3. **循环借位**：减法时若当前位为负，需循环向上借位直到非负
4. **空间优化**：复用输入数组（如a直接存储结果）减少内存消耗

---

### 拓展练习推荐
1. [P1601 A+B Problem（高精）](https://www.luogu.com.cn/problem/P1601)  
2. [P2142 高精度减法](https://www.luogu.com.cn/problem/P2142)  
3. [P1480 A/B Problem（高精除单精）](https://www.luogu.com.cn/problem/P1480)  

---

### 题解心得摘录
> "减法中必须用循环而非if，因为借一次可能不够" —— 见贤思齐_Seakies  
> "ios::sync_with_stdio(false)能提速cin，但不可与scanf混用" —— Gaogao2011  
> "输入运算符时用cin避免scanf读取空格问题" —— jiangchen1234

---
处理用时：41.61秒
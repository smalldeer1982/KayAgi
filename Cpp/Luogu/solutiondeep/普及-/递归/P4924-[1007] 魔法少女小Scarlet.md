# 题目信息

# [1007] 魔法少女小Scarlet

## 题目描述

Scarlet 最近学会了一个数组魔法，她会在 $n\times n$ 二维数组上将一个奇数阶方阵按照顺时针或者逆时针旋转 $90^\circ$。

首先，Scarlet 会把 $1$ 到 $n^2$ 的正整数按照从左往右，从上至下的顺序填入初始的二维数组中，然后她会施放一些简易的魔法。

Scarlet 既不会什么分块特技，也不会什么 Splay 套 Splay，她现在提供给你她的魔法执行顺序，想让你来告诉她魔法按次执行完毕后的二维数组。

## 说明/提示

对于50%的数据，满足 $r=1$

对于100%的数据 $1\leq n,m\leq500$，满足 $1\leq x-r\leq x+r\leq n,1\leq y-r\leq y+r\leq n$。

## 样例 #1

### 输入

```
5 4
2 2 1 0
3 3 1 1
4 4 1 0
3 3 2 1```

### 输出

```
5 10 3 18 15
4 19 8 17 20
1 14 23 24 25
6 9 2 7 22
11 12 13 16 21```

# AI分析结果

### 综合分析与结论

本题的核心是对一个二维数组进行多次局部旋转操作，旋转方向可以是顺时针或逆时针。虽然题目本身难度不高，但实现细节较多，容易出错。通过分析多个题解，可以看出大部分解法都采用了模拟的思路，主要区别在于旋转的实现方式和代码的简洁性。

#### 关键思路与技巧：
1. **旋转的实现**：顺时针和逆时针旋转的规律可以通过坐标变换推导出来。常见的做法是使用一个临时数组来存储旋转后的结果，然后再将结果复制回原数组。
2. **边界处理**：由于题目保证了旋转区域不会越界，因此无需特别处理边界情况。
3. **代码优化**：部分题解通过减少循环次数或使用更简洁的坐标变换公式来优化代码。

#### 通用建议：
- **理解旋转规律**：通过手动模拟小矩阵的旋转，理解坐标变换的规律，可以减少调试时间。
- **代码简洁性**：尽量使用简洁的代码实现旋转操作，避免冗余代码。
- **调试技巧**：在调试时，可以先测试小规模的矩阵旋转，确保逻辑正确后再扩展到大规模数据。

### 所选高星题解

#### 题解1：黎曦の夜 (赞：247)
- **星级**：★★★★★
- **关键亮点**：代码简洁，直接通过坐标变换实现旋转，逻辑清晰。
- **个人心得**：作者提到通过模拟推导出旋转规律，代码实现较为直观。

```cpp
for(int i=a-r;i<=a+r;i++)
    for(int j=b-r;j<=b+r;j++)
        f[a-b+j][a+b-i] = g[i][j];
for(int i=a-r;i<=a+r;i++)
    for(int j=b-r;j<=b+r;j++)
        g[i][j] = f[i][j];
```

#### 题解2：BzhH (赞：127)
- **星级**：★★★★☆
- **关键亮点**：通过函数封装旋转操作，代码结构清晰，易于理解。
- **个人心得**：作者通过手动模拟3x3矩阵的旋转，推导出旋转规律，代码实现较为直观。

```cpp
void spin(int x,int y,int r)
{
    for(int i=x-r;i<=x+r;i++)
        for(int k=y-r;k<=y+r;k++)
            temp[i][k]=square[i][k];
    int x1=x+r,y1=y-r;
    for(int i=x-r;i<=x+r;i++)
    {
        for(int k=y-r;k<=y+r;k++)
        {
            square[i][k]=temp[x1][y1];
            x1--;
        }
        x1=x+r,y1++;
    }
}
```

#### 题解3：7KByte (赞：7)
- **星级**：★★★★☆
- **关键亮点**：通过观察旋转后的坐标变化，直接推导出旋转公式，代码实现简洁。
- **个人心得**：作者通过观察旋转后的坐标变化，直接推导出旋转公式，代码实现简洁。

```cpp
for(int i=1;i<=tr;i++)
    for(int j=1;j<=tr;j++)
        a[i+sx-1][j+sy-1]=b[j][tr-i+1];
```

### 推荐相似题目
1. **P4925 [1007] 魔法少女小Scarlet**：本题的扩展版本，增加了更多的旋转操作。
2. **P4926 [1008] 魔法少女小Scarlet II**：进一步增加了旋转的复杂度，考察对旋转操作的深入理解。
3. **P4927 [1009] 魔法少女小Scarlet III**：结合了旋转操作与其他数组操作，考察综合能力。

### 总结
通过分析多个题解，可以看出旋转操作的实现关键在于理解坐标变换的规律，并通过简洁的代码实现。建议在解题时先通过小规模数据验证逻辑，再扩展到大规模数据。

---
处理用时：28.87秒
# 题目信息

# [IOI 1994] 数字三角形 Number Triangles

## 题目描述

观察下面的数字金字塔。


写一个程序来查找从最高点到底部任意处结束的路径，使路径经过数字的和最大。每一步可以走到左下方的点也可以到达右下方的点。

![](https://cdn.luogu.com.cn/upload/image_hosting/95pzs0ne.png)

在上面的样例中，从 $7 \to 3 \to 8 \to 7 \to 5$ 的路径产生了最大权值。



## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1\le r \le 1000$，所有输入在 $[0,100]$ 范围内。

题目翻译来自NOCOW。

USACO Training Section 1.5

IOI1994 Day1T1

## 样例 #1

### 输入

```
5
7
3 8
8 1 0
2 7 4 4
4 5 2 6 5 
```

### 输出

```
30
```

# AI分析结果

### 综合分析与结论

该题目是一个经典的动态规划问题，主要考察从数字金字塔的顶部到底部的路径最大和。题解中主要采用了两种思路：**自底向上**和**自顶向下**的动态规划方法。大部分题解都使用了二维数组来存储中间结果，部分题解还进行了空间优化，使用一维数组或滚动数组来减少空间复杂度。整体来看，题解的质量参差不齐，部分题解思路清晰、代码简洁，而部分题解则存在冗余或不够优化的地方。

### 所选高星题解

#### 1. 题解作者：linlin1024
- **星级**：5星
- **关键亮点**：
  - 采用了**自底向上**的动态规划思路，从倒数第二层开始逐层向上计算最大路径和。
  - 思路清晰，代码简洁，直接修改原数组，减少了额外空间的使用。
  - 通过样例详细解释了每一步的计算过程，易于理解。
- **核心代码**：
  ```cpp
  for(int i=n-2;i>=0;i--)   
      for(int j=0;j<=i;j++)  
          a[i][j]+=max(a[i+1][j],a[i+1][j+1]); 
  cout<<a[0][0]<<endl;
  ```

#### 2. 题解作者：Mine_King
- **星级**：4星
- **关键亮点**：
  - 从递归（记忆化搜索）到动态规划的过渡，展示了如何通过递推优化递归。
  - 使用了**自底向上**的递推方法，代码简洁且易于理解。
  - 通过对比递归和动态规划的性能差异，强调了动态规划的优势。
- **核心代码**：
  ```cpp
  for(int i=n-1;i>=1;i--)
      for(int j=1;j<=i;j++) 
          a[i][j]+=max(a[i+1][j],a[i+1][j+1]);
  cout<<a[1][1];
  ```

#### 3. 题解作者：zengqinyi
- **星级**：4星
- **关键亮点**：
  - 采用了**自顶向下**的动态规划思路，逐层向下计算最大路径和。
  - 在输入时直接进行计算，减少了额外的循环，提升了效率。
  - 代码简洁，思路清晰，适合初学者理解动态规划的基本思想。
- **核心代码**：
  ```cpp
  for(int i=1;i<=n;i++)
      for(int j=1;j<=i;j++) {
          cin>>a[i][j];
          a[i][j]+=max(a[i-1][j-1],a[i-1][j]);
          ans=max(ans,a[i][j]);
      }
  cout<<ans<<endl;
  ```

### 最优关键思路与技巧

1. **自底向上 vs 自顶向下**：两种动态规划思路各有优劣，自底向上通常更直观，而自顶向下则可以在输入时直接进行计算，减少循环次数。
2. **空间优化**：通过使用一维数组或滚动数组，可以减少空间复杂度，尤其在大规模数据时效果显著。
3. **直接修改原数组**：在允许修改输入数据的情况下，直接修改原数组可以避免额外的空间开销。

### 可拓展之处

1. **类似题目**：该题的动态规划思路可以拓展到其他路径问题，如网格中的最大路径和、最小路径和等。
2. **优化技巧**：空间优化的思路可以应用到其他需要二维数组的动态规划问题中，如背包问题、最长公共子序列等。

### 推荐题目

1. **P1002 过河卒**：考察动态规划在网格路径中的应用。
2. **P1048 采药**：经典的01背包问题，与动态规划密切相关。
3. **P1057 传球游戏**：动态规划在环形路径中的应用，适合进一步练习。

### 个人心得摘录

- **Mine_King**：从递归到动态规划的过渡让我意识到，递推不仅可以减少时间复杂度，还能避免递归的栈溢出问题。
- **zengqinyi**：在输入时直接进行计算，不仅减少了代码量，还提升了效率，这种思路在类似的动态规划问题中非常实用。

### 通用建议

对于动态规划问题，建议先从递归或记忆化搜索入手，理解问题的最优子结构，再逐步优化为递推或动态规划。同时，注意空间优化，尤其是在处理大规模数据时，合理使用一维数组或滚动数组可以显著提升性能。

---
处理用时：38.71秒
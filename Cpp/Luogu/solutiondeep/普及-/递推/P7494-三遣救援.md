# 题目信息

# 三遣救援

## 题目背景

>就像第一块多米诺骨牌，那个人的出现开启了后面的故事。

穆罗在家里养了许多猪。在他的训练下，这些猪都十分乖巧。当然，有的时候这些猪也会变得十分调皮……

## 题目描述

一天早上，穆罗发现自己私存的一块蛋糕被偷吃了！他立即猜到某只猪吃了这块蛋糕，于是迅速赶到猪圈决定找出这只猪进行惩罚。

猪圈里有 $n$ 只猪，猪的序号是 $1$ 到 $n$ 之间的整数。除了偷吃了蛋糕的那只猪，其他所有猪**一样重**，而那只偷吃了蛋糕的猪会比其他猪**略重一些**（你可以假设原本猪是 $5\text{kg}$ 的，那只吃了蛋糕的猪是 $5.1\text{kg}$ 的）。穆罗无法肉眼判断是哪只猪吃了蛋糕。

幸运的是穆罗有一个天平，可以将猪赶上天平两侧，从而比较出哪边的猪更重。不过这个天平不是很大，每侧最多只能有 $m$ 只猪，否则天平就会损坏导致无法使用（偷吃蛋糕的猪**不会使天平一侧可放置的猪的数目减少**，即**无论猪是否偷吃，每侧都最多只能有 $m$ 只猪**）。

穆罗不想花费太多的时间，所以他希望知道在**天平不损坏**的前提下，**至少需要使用几次天平称量才能保证找出这只偷吃了的猪**。他希望你能求出这个数。

## 说明/提示

#### 样例一解释：

穆罗先让 $1$ 号猪和 $2$ 号猪分别上天平两侧，再让 $3$ 号猪和 $4$ 号猪分别上天平两侧，此时一定能找出偷吃了的猪，使用天平次数为 $2$。显然只使用一次天平无法保证能找出那只偷吃了的猪。

#### 样例三解释：

天平两侧最多都只能放两只猪，所以至少需要三次才能保证找出。

------------
#### 数据范围

**本题采用捆绑测试。**

+ Subtask 1 ( $10\%$ )：$n,m\leq10$。
+ Subtask 2 ( $25\%$ )：$n,m\leq10^6$。
+ Subtask 3 ( $15\%$ )：$n\leq m$。
+ Subtask 4 ( $50\%$ )：无特殊限制。

对于所有数据，$1\leq n,m\leq10^{15}$。

## 样例 #1

### 输入

```
4 5```

### 输出

```
2```

## 样例 #2

### 输入

```
13 6```

### 输出

```
3```

## 样例 #3

### 输入

```
8 2```

### 输出

```
3```

## 样例 #4

### 输入

```
114 514```

### 输出

```
5```

## 样例 #5

### 输入

```
19198 10```

### 输出

```
962```

# AI分析结果

### 综合分析与结论

本题的核心在于如何在天平称量次数最少的情况下，找出唯一一只比其他猪略重的猪。题解中主要采用了**三分法**的思路，即每次将猪分成三组，通过称量逐步缩小范围。难点在于如何在天平每侧最多只能放 $m$ 只猪的限制下，优化称量次数。

大部分题解都采用了类似的思路：先不考虑 $m$ 的限制，使用三分法，当 $n \leq 3m+1$ 时，直接使用三分法；当 $n > 3m+1$ 时，每次称量减少 $2m$ 只猪，直到 $n \leq 3m+1$。这种思路的时间复杂度较低，且能够有效处理大规模数据。

### 所选高星题解

#### 1. 作者：_lfxxx_ (5星)
**关键亮点**：
- 思路清晰，详细解释了三分法的应用以及如何在天平限制下优化称量次数。
- 代码简洁且高效，使用了除法优化，避免了不必要的循环。
- 提供了注意事项，如使用乘法代替除法来避免向下取整的问题。

**代码核心思想**：
```cpp
unsigned long long n,m,s=0,a,i;
scanf("%llu%llu",&n,&m);
a=(n-3*m-1)/(2*m)+1;
if(n>3*m+1){
    s=a;
    n-=a*2*m;
}
i=1;
while(n>i){
    i*=3;
    s++;
}
printf("%llu",s);
```
**个人心得**：
- 作者提到使用乘法比较来避免除法向下取整的问题，并指出乘法更快。这种优化在实际编程中非常实用。

#### 2. 作者：littleKtian (5星)
**关键亮点**：
- 递推公式清晰，分情况讨论了 $n \leq 3m+1$ 和 $n > 3m+1$ 时的处理方式。
- 代码简洁，递归实现逻辑清晰，时间复杂度较低。
- 提供了详细的数学推导，帮助理解递推公式的来源。

**代码核心思想**：
```cpp
ll f(ll x)
{
    if(x==1)return 0;
    if(x>3*m){ll k=(x-3*m-1)/(2*m)+1;return f(x-k*2*m)+k;}
    return f((x-1)/3+1)+1;
}
```
**个人心得**：
- 作者通过递推公式的推导，展示了如何将问题分解为子问题，这种思维方式在算法设计中非常有用。

#### 3. 作者：SpeMars (4星)
**关键亮点**：
- 详细解释了三分法的数学原理，并给出了具体的分组策略。
- 代码实现简洁，使用了向上取整的模板函数，增强了代码的可读性。
- 提供了详细的数学推导，帮助理解分组策略的优化。

**代码核心思想**：
```cpp
ll upz(ll x,ll y){return (x+y-1)/y;}
ll f(ll x){
    if(x==1)return 0;
    if(x<=3*m+1)return f(upz(x,3))+1;
    if(x>3*m+1){
        ll res=x-(3*m+1);
        ll cnt=upz(res,2*m);
        return f(x-cnt*2*m)+cnt;
    }
}
```
**个人心得**：
- 作者提到“最极端(daomei)情况为每次只排除 $2m$ 只猪”，这种极端情况的考虑在实际问题中非常重要。

### 最优关键思路与技巧

1. **三分法**：将猪分成三组，通过称量逐步缩小范围，是最优的策略。
2. **天平限制下的优化**：当 $n > 3m+1$ 时，每次称量减少 $2m$ 只猪，直到 $n \leq 3m+1$，然后使用三分法。
3. **数学推导与递推**：通过数学推导和递推公式，可以有效减少称量次数，提高算法效率。

### 可拓展之处

- **类似问题**：类似的问题可以扩展到其他称重问题，如找出不同重量的硬币、找出假币等。
- **算法套路**：三分法和递推公式可以应用于其他需要逐步缩小范围的问题，如二分查找、分治算法等。

### 推荐题目

1. **P1496 找假币**：类似于本题，但硬币数量较少，适合练习三分法。
2. **P1880 找假币（升级版）**：增加了硬币数量的限制，适合练习天平限制下的优化。
3. **P1010 找假币（加强版）**：增加了更多的限制条件，适合综合练习称重问题的优化。

---
处理用时：41.30秒
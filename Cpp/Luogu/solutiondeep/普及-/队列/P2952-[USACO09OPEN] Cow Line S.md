# 题目信息

# [USACO09OPEN] Cow Line S

## 题目描述

Farmer John（以下简称 FJ）的 $N$ 头奶牛（用 $1 \dots N$ 编号）在直线上排队。一开始，这条线上没有任何奶牛，随着时间的推移，奶牛们会一个接一个地站到队伍的左边或右边。又过了一会儿，某些奶牛会从队伍里离开，去吃自己最喜欢的草料。

FJ 无法跟踪每一头奶牛，于是，他想让你来帮助他。

奶牛以 $1 \dots N$ 的顺序排队，并且离开的奶牛不会再次回来。数据将会给出 $S$（$1 \le S \le 100000$） 条指令，各占一行，分两种：

- $A$ 头奶牛加入了队列（还有一个参数，表示从左加入还是从右加入）；
- $K$ 头奶牛从左边或者右边离开了队列（还有两个参数，分别表示从左离开还是从右离开和离开多少头奶牛）。

输入的命令一定是可以执行的。

所有的操作结束后，你的程序应该以从左到右的顺序输出这个奶牛队列。数据保证最后的队列不空。

## 样例 #1

### 输入

```
10 
A L 
A L 
A R 
A L 
D R 2 
A R 
A R 
D L 1 
A L 
A R 
```

### 输出

```
7 
2 
5 
6 
8 
```

# AI分析结果

### 综合分析与结论

本题的核心是模拟一个双向队列的操作，要求能够从队列的两端进行插入和删除操作。大多数题解都使用了C++ STL中的`deque`容器来实现这一功能，部分题解则通过数组模拟双向队列或使用链表来实现。整体来看，使用`deque`的题解代码简洁且易于理解，而数组模拟和链表的实现则更注重底层细节，适合对数据结构有深入理解的学习者。

### 所选高星题解

#### 1. 作者：Sooke (赞：62)
- **星级**：★★★★★
- **关键亮点**：使用`deque`容器，代码简洁明了，逻辑清晰，适合初学者快速掌握双向队列的基本操作。
- **核心代码**：
  ```cpp
  deque<int> Q;
  int main(){
      int n, c=1, k;
      char a, b;
      cin >> n;
      for(int i=1; i <= n; i++){
          cin >> a >> b;
          if(a == 'A' && b == 'L') Q.push_front(c++);
          else if(a == 'A') Q.push_back(c++);
          else if(b == 'L'){
              cin >> k;
              for(int j=1; j <= k; j++) Q.pop_front();
          } else {
              cin >> k;
              for(int j=1; j <= k; j++) Q.pop_back();
          }
      }
      while(!Q.empty()) cout << Q.front() << endl, Q.pop_front();
      return 0;
  }
  ```
- **个人心得**：作者提到`deque`的时间复杂度较高，建议在练习时尽量避免使用，但在比赛中可以合理考虑时间复杂度。

#### 2. 作者：Karl_Aurora (赞：14)
- **星级**：★★★★
- **关键亮点**：详细介绍了`deque`的常用操作，代码结构清晰，适合对STL容器不熟悉的学习者。
- **核心代码**：
  ```cpp
  deque<int> q;
  int main(){
      int n, count = 0;
      cin >> n;
      for(int i=1; i<=n; i++){
          char a, b;
          cin >> a >> b;
          if(a == 'A'){
              if(b == 'L') q.push_front(++count);
              else q.push_back(++count);
          } else {
              int k;
              cin >> k;
              if(b == 'L') for(int j=1; j<=k; j++) q.pop_front();
              else for(int j=1; j<=k; j++) q.pop_back();
          }
      }
      for(auto it = q.begin(); it != q.end(); it++) cout << *it << endl;
      return 0;
  }
  ```
- **个人心得**：作者提到这是自己发布的第一篇题解，表达了对支持的感谢，体现了初学者的热情与努力。

#### 3. 作者：fls233666 (赞：4)
- **星级**：★★★★
- **关键亮点**：详细介绍了`deque`的操作，并提供了两种输出方式，代码结构清晰，适合初学者。
- **核心代码**：
  ```cpp
  deque<int> line;
  int main(){
      int n, b=1;
      cin >> n;
      char c, f;
      for(int i=0; i<n; i++){
          cin >> c >> f;
          if(c == 'A'){
              if(f == 'L') line.push_front(b);
              else line.push_back(b);
              b++;
          } else {
              int k;
              cin >> k;
              if(f == 'L') for(int j=0; j<k; j++) line.pop_front();
              else for(int j=0; j<k; j++) line.pop_back();
          }
      }
      for(int i=0; i<line.size(); i++) cout << line[i] << endl;
      return 0;
  }
  ```
- **个人心得**：作者提到`deque`的随机访问和两端操作的特点，适合对数据结构有初步了解的学习者。

### 最优关键思路与技巧

1. **使用`deque`容器**：`deque`是STL中专门为双向队列设计的数据结构，支持在两端进行高效的插入和删除操作，代码简洁且易于理解。
2. **数组模拟双向队列**：通过数组模拟双向队列，适合对底层实现有深入理解的学习者，但代码复杂度较高。
3. **链表实现**：使用链表实现双向队列，适合对指针操作熟悉的学习者，但代码实现较为复杂。

### 可拓展之处

1. **同类型题**：可以尝试解决其他涉及双向队列的题目，如滑动窗口问题、双端队列的变种问题等。
2. **类似算法套路**：掌握`deque`的基本操作后，可以进一步学习其他STL容器，如`queue`、`stack`等，了解它们在不同场景下的应用。

### 推荐题目

1. **P1886 滑动窗口**：考察滑动窗口问题，适合练习双向队列的应用。
2. **P1440 求m区间内的最小值**：涉及滑动窗口和单调队列的应用。
3. **P2827 蚯蚓**：考察队列的变种问题，适合进一步练习队列的应用。

### 个人心得总结

- **调试经历**：部分题解提到在输入处理时遇到问题，如空格和回车的处理，提醒我们在处理输入时要特别注意细节。
- **踩坑教训**：使用`deque`时要注意时间复杂度，特别是在大规模数据下，合理选择数据结构非常重要。
- **顿悟感想**：通过本题的学习，深刻理解了双向队列的基本操作及其在算法中的应用，为后续学习其他数据结构打下了基础。

---
处理用时：27.66秒
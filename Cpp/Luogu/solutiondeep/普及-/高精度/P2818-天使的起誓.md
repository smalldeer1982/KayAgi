# 题目信息

# 天使的起誓

## 题目描述

Tenshi 非常幸运地被选为掌管智慧之匙的天使。在正式任职之前，她必须和其他新当选的天使一样要宣誓。

宣誓仪式是每位天使各自表述自己的使命，他们的发言稿放在 $n$ 个呈圆形排列的宝盒中。这些宝盒按顺时针方向被编上号码 $1, 2, \cdots, n - 1, n$。

一开始天使们站在编号为 $n$ 的宝盒旁。她们各自手上都有一个数字，代表她们自己的发言稿所在的盒子是从 $1$ 号盒子开始按顺时针方向的第几个。例如：有  $7$ 个盒子，如果 Tenshi 手上的数字为 $9$，那么她的发言稿所在的盒子就是 $2$ 个。现在天使们开始按照自己手上的数字来找发言稿，先找到的就可以先发言。 

Tenshi 一下子就找到了，于是她最先上台宣誓：“我将带领大家开启 NOI 之门……” Tenshi 宣誓结束后，陆续有天使上台宣誓。可是有一位天使找了好久都找不到她的发言稿，原来她手上的数字 $m$ 非常大，她转了好久都找不到她想找的宝盒。

请帮助这位天使找到她想找的宝盒编号。


## 说明/提示

对于 $100 \%$ 的数据，$2\le n\le 10^8$，$2\le m\le 10^{1000}$。

## 样例 #1

### 输入

```
7
9
```

### 输出

```
2
```

## 样例 #2

### 输入

```
11
108
```

### 输出

```
9
```

# AI分析结果



### 综合分析与结论
本题核心在于处理超大整数 $m$ 的模运算。所有高效解法的共同思路是**逐位取模**，利用同余定理避免高精度计算。关键优化点包括：边读入边计算、特判余数为0的情况。最优解法时间复杂度为 $O(len(m))$，空间复杂度 $O(1)$，完美适配题目数据范围。

---

### 精选题解

#### 1. StoneXie（5星）
**关键亮点**：代码极简，直接逐字符处理输入，边读边取模，处理余数为0的情况仅用一行三目运算符。  
**核心代码**：
```cpp
for(int i=0;s[i];i++) ans=(ans*10+s[i]-'0')%n;
printf("%lld",ans ? ans:n);
```
**个人心得**：作者提到“边读取边计算”，避免了存储整个大数，极大优化空间效率。

#### 2. 「已注销」（5星）
**关键亮点**：极致简洁，仅用 `isdigit` 过滤非数字字符，主循环仅3行代码，无冗余操作。  
**核心代码**：
```cpp
while(isdigit(c=getchar())) ans=(ans*10+c-'0')%n;
printf("%d",ans?ans:n);
```
**实现技巧**：利用 `getchar` 直接逐字符处理输入流，避免字符串存储。

#### 3. whc2020（4星）
**关键亮点**：数学优化，通过 $(m-1) \% n +1$ 直接规避余数为0的判断，代码逻辑紧凑。  
**核心代码**：
```cpp
ans = (ans * 10 + x - 1) % n + 1;
```
**数学洞察**：将模运算结果映射到 $[1, n]$ 区间，直接兼容余数为0的情况。

---

### 关键思路总结
1. **逐位取模**：利用 $m$ 的十进制展开式，按 $m = d_1 \times 10^{k} + \cdots + d_k$，逐位计算 $(ans \times 10 + d_i) \% n$。
2. **同余定理**：通过 $(a \times b + c) \% n = ((a \% n) \times (b \% n) + c \% n) \% n$ 实现递推。
3. **输入优化**：直接处理字符流，避免存储整个大数，空间复杂度降至 $O(1)$。

---

### 拓展练习
1. **P1226 【模板】快速幂**（快速幂取模）  
2. **P1082 [NOIP2012 提高组] 同余方程**（扩展欧几里得算法）  
3. **P2613 【模板】有理数取余**（分数取模与逆元）

---

### 个人心得摘录
- **边读边算**（StoneXie）：避免存储整个大数是处理超长输入的关键技巧。  
- **同余映射**（whc2020）：“先减1再加1”的数学转换简化了边界条件判断。  
- **输入流处理**（「已注销」）：`getchar` + `isdigit` 组合可高效过滤非数字字符，适用于松散格式输入。

---
处理用时：71.70秒
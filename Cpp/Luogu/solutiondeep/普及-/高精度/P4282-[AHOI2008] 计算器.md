# 题目信息

# [AHOI2008] 计算器

## 题目描述

小可可在欢乐岛的快乐旅程还在继续，他想买一些纪念品带回去给同学们，于是来到了礼品部，在这里他发现了一个有趣的计算器.

这个计算器是一种特殊的、支持变进制整数加减运算的计算器（所谓变进制，就是每一位的进制可以不同。例如，如果最低位是 $3$ 进制，次低位是 $5$ 进制，那么这种情况的 $42$ 转化成十进制就是 $4\times 3+2=14$）。

店主看小可可对这个计算器非常感兴趣，于是他问小可可：“小朋友，如果我告诉你这个计算器最多可以支持 $N$ 位的变进制整数，且每一位的进制分别是 $x_1,x_2,\ldots,x_n$，那么你知道它能表示的最大整数 $M$ 是多少吗?”，小可可想了想说到：“它所能表示的最大的整数 $M$ 是 $(x_1\times x_2\times \cdots\times x_n)-1$。”

店主非常高兴，说道：“你真是个聪明的孩子，如果我告诉你两个长度为 $N$ 的变进制整数 $A,B$，你按照我的要求来计算 $(A＋B)\bmod(M+1)$ 或 $(A-B)\bmod(M+1)$，答案还是用相同的变进制来表示，如果你算对了，那么我就把这个计算器送给你。”

这下把小可可难住了，但是他非常想要这个计算器，聪明的你能够帮助小可可吗?

## 说明/提示

$100\%$ 的数据中，$1\le N \le 10^5$，$1 < x_1,x_2,\ldots x_N<100$。

$30\%$ 的数据中，$N \le 9$，$x_1 = x_2 =\ldots = x_N =10$。

## 样例 #1

### 输入

```
3
3 2 5
1 1 2
+
0 0 3```

### 输出

```
2 0 0

```

# AI分析结果



### 综合分析与结论
题目要求处理变进制的高精度加减法，核心在于正确模拟进位和借位过程，并处理输入的数位顺序。关键点包括：
1. **数位处理顺序**：需将输入的（高位到低位）倒置存储，处理时从低位到高位进行运算。
2. **进位/借位维护**：加减法需分别维护进位和借位变量，逐位处理并更新。
3. **模运算优化**：结果无需显式取模，因变进制下最终结果位数不超过 N，直接输出后 N 位即可。

### 精选题解（评分≥4星）

#### 题解作者：byft（5星）
**关键亮点**：  
- 输入倒置处理，确保从低位到高位运算，逻辑清晰。  
- 代码简洁，正确处理进位（加法）和借位（减法）变量。  
- 核心代码直接模拟竖式计算，无冗余步骤。  

**核心代码**：  
```cpp
// 输入倒置存储
for (int i = n; i >= 1; i--) cin >> jz[i];
// 加法处理
int t = 0;
for (int i = 1; i <= n; i++) {
    c[i] = a[i] + b[i] + t;
    t = c[i] / jz[i];
    c[i] %= jz[i];
}
// 减法处理
int t = 0;
for (int i = 1; i <= n; i++) {
    c[i] = a[i] - b[i] - t;
    t = 0;
    if (c[i] < 0) {
        c[i] += jz[i];
        t = 1;
    }
}
```

#### 题解作者：weicongjun（4星）
**关键亮点**：  
- 正确维护借位变量，逐位处理。  
- 代码结构清晰，但未完全处理输入倒置，部分边界需注意。  

**核心代码**：  
```cpp
// 输入处理倒置
for (int rp = number; rp >= 1; rp--) cin >> x[rp];
// 减法借位处理
for (int i = 1; i <= number; i++) {
    if (a[i] < b[i]) {
        a[i] += x[i];
        a[i + 1]--;
    }
    a[i] -= b[i];
}
```

### 最优思路总结
1. **输入倒置**：将高位到低位的输入转换为低位到高位处理，便于逐位运算。
2. **进位/借位变量**：加减法分别维护变量，加法进位累加，减法借位逐位传递。
3. **无需显式取模**：结果位数自然限制在 N 位内，直接输出即可。

### 举一反三题目推荐
1. **P1601 A+B Problem（高精）**：基础高精度加法。  
2. **P2142 高精度减法**：处理借位逻辑。  
3. **P1303 A×B Problem**：高精度乘法，扩展进位处理。

### 个人心得摘录
- **调试经验**：处理变进制时，输入顺序与存储顺序的倒置是关键，直接影响进位方向。（byft）  
- **踩坑教训**：减法中必须维护借位变量，避免连续借位错误。（见贤思齐_Seakies）  
- **优化思路**：直接处理后 N 位替代显式取模，简化计算。（byft）

---
处理用时：288.86秒
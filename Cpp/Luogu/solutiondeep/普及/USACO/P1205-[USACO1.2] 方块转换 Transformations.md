# 题目信息

# [USACO1.2] 方块转换 Transformations

## 题目描述

一块 $n \times n$ 正方形的黑白瓦片的图案要被转换成新的正方形图案。写一个程序来找出将原始图案按照以下列转换方法转换成新图案的最小方式：

- 转 $90\degree$：图案按顺时针转 $90\degree$。

- 转 $180\degree$：图案按顺时针转 $180\degree$。

- 转 $270\degree$：图案按顺时针转 $270\degree$。

- 反射：图案在水平方向翻转（以中央铅垂线为中心形成原图案的镜像）。

- 组合：图案在水平方向翻转，然后再按照 $1 \sim 3$ 之间的一种再次转换。

- 不改变：原图案不改变。

- 无效转换：无法用以上方法得到新图案。

如果有多种可用的转换方法，请选择序号最小的那个。

只使用上述 $7$ 个中的一个步骤来完成这次转换。


## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 10$。

题目翻译来自 NOCOW。

USACO Training Section 1.2


## 样例 #1

### 输入

```
3
@-@
---
@@-
@-@
@--
--@
```

### 输出

```
1
```

# AI分析结果



### 综合分析与结论
本题解核心在于模拟各种转换并比较结果。各题解普遍采用分情况讨论，但优化程度、代码简洁性差异较大。关键点在于正确推导旋转/镜像的坐标变换公式，并按优先级顺序判断。

---

### 高分题解推荐

1. **hsfzLZH1（★★★★☆）**  
**关键亮点**：  
- 利用旋转叠加特性（90°旋转多次实现180°、270°），大幅减少代码冗余  
- 结构体封装矩阵操作，提升代码可维护性  
- 按题目优先级顺序判断，确保返回最小序号  

**核心代码**：
```cpp
struct Matrix {
    int a[maxn][maxn];
    Matrix rotate() { // 顺时针90°旋转公式
        Matrix ans;
        for(int i=0;i<n;i++) for(int j=0;j<n;j++) 
            ans.a[i][j] = a[n-j-1][i];
        return ans;
    }
    Matrix reflex() { // 镜像公式
        Matrix ans;
        for(int i=0;i<n;i++) for(int j=0;j<n;j++)
            ans.a[i][j] = a[i][n-j-1];
        return ans;
    }
};
```

2. **迷失之夜（★★★★☆）**  
**关键亮点**：  
- 将二维矩阵转化为一维字符串处理，简化比较逻辑  
- 利用函数式编程思想，通过连续旋转生成不同状态  
- 通过字符串直接比较替代双重循环，提升可读性  

**核心实现**：
```cpp
string r90(string rect) { // 旋转+字符串处理
    string ret = rect;
    for(int i=0;i<N;i++) 
        for(int j=0;j<N;j++)
            ret[j*N+N-1-i] = rect[i*N+j];
    return ret;
}
```

3. **MyukiyoMekya（★★★★☆）**  
**关键亮点**：  
- 模块化设计，每个转换对应独立函数  
- 通过临时矩阵存储中间状态，避免污染原始数据  
- 清晰的优先级判断流程  

**核心代码**：
```cpp
bool work1() { // 90°旋转判断
    for(int i=1;i<=n;i++)
        for(int j=1;j<=n;j++)
            if(a[i][j] != b[j][n-i+1]) 
                return false;
    return true;
}
```

---

### 关键思路与技巧总结

1. **坐标变换公式**  
- 90°旋转：`b[j][n-i+1] = a[i][j]`  
- 镜像：`b[i][n-j+1] = a[i][j]`  
- 推导方法：画3×3矩阵观察坐标变化规律

2. **状态复用优化**  
- 通过多次调用旋转函数生成180°、270°状态，而非单独推导公式  
- 示例：`r180 = r90(r90(a))`

3. **比较优化**  
- 提前终止比较：发现不一致立即返回，避免无效比较  
- 字符串化处理：将二维比较转化为一维字符串比较

---

### 相似题目推荐

1. [P1205 方块转换](https://www.luogu.com.cn/problem/P1205)（本题USACO原题）  
2. [P5732 杨辉三角](https://www.luogu.com.cn/problem/P5732)（矩阵规律推导）  
3. [P2239 螺旋矩阵](https://www.luogu.com.cn/problem/P2239)（坐标变换技巧）

---

### 调试经验摘录

1. **坐标偏移问题**  
> "发现下面的N-1非常重要，差点调不出来……C++内存泄漏照常运行" —— yjxyjx  
总结：数组下标从0开始还是1开始需统一，建议画图验证边界值

2. **转换顺序问题**  
> "注意每个都满足操作5，当前90°的判断顺序影响结果" —— ⑨baka  
总结：严格按照题目要求的优先级顺序进行判断

3. **镜像特性**  
> "发现第五种操作并不是把1-3操作全部来一遍，注意看题" —— 肖恩Sean  
总结：镜像后的旋转只需检查90°、180°、270°三种可能

---
处理用时：58.67秒
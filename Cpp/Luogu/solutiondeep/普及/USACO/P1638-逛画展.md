# 题目信息

# 逛画展

## 题目描述


博览馆正在展出由世上最佳的 $m$ 位画家所画的图画。

游客在购买门票时必须说明两个数字，$a$ 和 $b$，代表他要看展览中的第 $a$ 幅至第 $b$ 幅画（包含 $a,b$）之间的所有图画，而门票的价钱就是一张图画一元。

Sept 希望入场后可以看到所有名师的图画。当然，他想最小化购买门票的价格。

请求出他购买门票时应选择的 $a,b$，数据保证一定有解。

若存在多组解，**输出 $a$ 最小的那组**。

## 说明/提示

#### 数据规模与约定

- 对于 $30\%$ 的数据，有 $n\le200$，$m\le20$。
- 对于 $60\%$ 的数据，有 $n\le10^5$，$m\le10^3$。
- 对于 $100\%$ 的数据，有 $1\leq n\le10^6$，$1 \leq a_i \leq m\le2\times10^3$。

## 样例 #1

### 输入

```
12 5
2 5 3 1 3 2 4 1 1 5 4 3
```

### 输出

```
2 7```

# AI分析结果



### 综合分析与结论
本题核心是求包含所有画师的最小区间，最优解法为滑动窗口（双指针法），时间复杂度需严格 O(n)。题解中主流思路可分为三类：
1. **经典双指针法**（米奇、cuking）：先扩展右指针至满足条件，再收缩左指针优化区间。
2. **位置记录优化**（Sino_E）：记录元素最后出现位置，智能调整左指针。
3. **二分答案法**（星王桐）：时间复杂度 O(n log n) 无法通过 1e6 数据（仅适合小数据）。

#### 最优关键思路总结：
- **滑动窗口的贪心性**：右指针单调增长，左指针可快速收缩。
- **哈希桶计数**：用数组代替哈希表记录元素出现次数。
- **左指针收缩条件**：当左端点元素出现次数 >1 时，可安全右移左指针。

---

### 高评分题解推荐（≥4星）

#### 1. 米奇（5星）
**亮点**：
- 代码简洁清晰，变量命名规范（`k`记录当前画师数，`ll/rr`记录答案）。
- 完美实现滑动窗口模板，循环结构易理解。
- 时间复杂度严格 O(n)，无冗余操作。

**核心代码**：
```cpp
while(l<=r && r<=n) {
    if(k==m) { // 满足条件时更新答案并收缩左指针
        if(ans>r-l+1) ans=r-l+1, ll=l, rr=r;
        if(--b[a[l]] == 0) k--;
        l++;
    } else {    // 不满足时扩展右指针
        if(++b[a[++r]] == 1) k++;
    }
}
```

#### 2. Sino_E（4.5星）
**亮点**：
- **位置记录法**：用`pos[]`记录画家最后出现位置，左指针无需逐步试探。
- 边界处理严谨（初始化`pos`为-1）。
- 代码中隐含"虚拟滑动窗口"思想，减少计数操作。

**核心优化逻辑**：
```cpp
while(l != i && l < pos[pic[l]]) l++; // 左指针跳跃式收缩
```

#### 3. 引领天下（4星）
**亮点**：
- 提出**尺取法的严格单调性证明**，增强算法正确性理解。
- 代码使用`cnt`变量替代哈希桶，逻辑更紧凑。

**调试心得**：
> "反证法证明r的单调性：若存在更优区间[l,r-k]，则会在r=r-k时被更新"

---

### 关键代码实现示例（米奇版）
```cpp
int main() {
    int l=1, r=1, k=1; // l/r为窗口指针，k为当前画师数
    while(l <= r && r <= n) {
        if(k == m) { // 满足条件时
            if(ans > r-l+1) ans = r-l+1, ll=l, rr=r;
            if(--b[a[l]] == 0) k--; // 左指针右移
            l++;
        } else {      // 不满足时右指针右移
            r++;
            if(++b[a[r]] == 1) k++;
        }
    }
    printf("%d %d", ll, rr);
}
```

---

### 拓展与同类题目
1. **同类型题**：
   - **P1638 逛画展**（本题）
   - **P3143 [USACO16OPEN]钻石收集者**（滑动窗口变式）
   - **P2218 [HAOI2007]覆盖问题**（二维滑动窗口）

2. **关键技巧迁移**：
   - **LeetCode 76. Minimum Window Substring**（完全相同模型）
   - **洛谷 P1902 刺杀大使**（二分答案+滑动窗口验证）
   - **Codeforces 702C Cellular Network**（双指针处理区间覆盖）

---

### 调试经验摘录
来自 **米奇题解**：
> "循环中任何时刻的区间都保证满足条件，因此直接比较区间长度即可更新答案"

来自 **Sino_E题解**：
> "初始化pos为-1，使得当左端点的画仅出现一次时不会错误移动指针"

---
处理用时：53.25秒
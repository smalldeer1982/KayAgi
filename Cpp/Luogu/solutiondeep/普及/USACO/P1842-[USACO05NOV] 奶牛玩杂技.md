# 题目信息

# [USACO05NOV] 奶牛玩杂技

## 题目背景

Farmer John 养了 $N$ 头牛，她们已经按 $1\sim N$ 依次编上了号。FJ 所不知道的是，他的所有牛都梦想着从农场逃走，去参加马戏团的演出。可奶牛们很快发现她们那笨拙的蹄子根本无法在钢丝或晃动的的秋千上站稳（她们还尝试过把自己装在大炮里发射出去，但可想而知，结果是悲惨的） 。最终，她们决定练习一种最简单的杂技：把所有牛都摞在一起， 比如说， 第一头牛站在第二头的身上， 同时第二头牛又站在第三头牛的身上...最底下的是第 $N$ 头牛。

## 题目描述

每头牛都有自己的体重以及力量，编号为 $i$ 的奶牛的体重为 $W_i$，力量为 $S_i$。

当某头牛身上站着另一些牛时它就会在一定程度上被压扁，我们不妨把它被压扁的程度叫做它的压扁指数。对于任意的牛，她的压扁指数等于摞在她上面的所有奶牛的总重（当然不包括她自己）减去它的力量。奶牛们按照一定的顺序摞在一起后， 她们的总压扁指数就是被压得最扁的那头奶牛的压扁指数。

你的任务就是帮助奶牛们找出一个摞在一起的顺序，使得总压扁指数最小。

## 说明/提示

对于 $100\%$ 的数据，$1 \le N \le 5\times 10^4$，$1 \le W_i \le 10^4$，$1 \le S_i \le 10^9$。

## 样例 #1

### 输入

```
3
10 3
2 5
3 3```

### 输出

```
2```

# AI分析结果



### 综合分析与结论  
本题需通过贪心策略最小化奶牛的压扁指数。各题解核心思路一致：**按牛的体重与力量之和（`w+s`）从小到大排序**，以保证相邻牛的排列最优。通过数学证明，此策略能有效降低最大压扁指数。实现时需遍历每头牛计算其压扁值，并维护全局最大值，注意初始值应设为极小负数。

---

### 高星题解推荐  
#### 1. 作者：liuzitong（5星）  
**关键亮点**：  
- 严谨的相邻交换法推导，通过数学不等式证明 `w+s` 排序的正确性。  
- 代码简洁，包含关键注释，初始化处理得当（`ans` 设为负数）。  
**核心代码**：  
```cpp
sort(a + 1, a + 1 + n, cmp); // 按w+s从小到大排序
int tot = 0, ans = -99999999;
for (int i = 1; i <= n; ++i) {
    ans = max(ans, tot - a[i].s); // 更新最大压扁指数
    tot += a[i].w; // 累加总重量
}
```

#### 2. 作者：设计涉及社稷（4星）  
**关键亮点**：  
- 通过构造相邻牛交换前后的压扁值对比，明确推导排序条件。  
- 代码清晰，变量命名规范，注释突出重点。  
**核心代码**：  
```cpp
sort(cow + 1, cow + n + 1); // 按w+s排序
int sum = 0, ans = INT_MIN;
for (int i = 1; i <= n; i++) {
    ans = max(ans, sum - cow[i].s);
    sum += cow[i].w;
}
```

#### 3. 作者：帅到报警（4星）  
**关键亮点**：  
- 类比经典题目《国王游戏》，强调贪心策略的通用性。  
- 代码包含详细调试提示（如负数初始化），适合新手理解。  
**核心代码**：  
```cpp
sort(cow, cow + n, cmp); // 按w+s从大到小排序（倒序）
int num = total_weight, ans = -0x7fffff;
for (int i = 0; i < n; i++) {
    num -= cow[i].w;
    ans = max(ans, num - cow[i].s);
}
```

---

### 最优思路总结  
1. **贪心策略**：按 `w + s` 从小到大排序，确保相邻两牛的压扁指数最优。  
2. **遍历计算**：每头牛的压扁指数为上方总重减自身力量，需遍历维护全局最大值。  
3. **负数处理**：初始化 `ans` 为极小负数，避免遗漏负值情况。  

---

### 拓展与相似题目  
1. **国王游戏**（洛谷 P1080）：按左右手乘积排序，类似贪心思路。  
2. **打耳洞**（洛谷 P1233）：贪心+排序，优化处理顺序。  
3. **任务调度问题**（如 LeetCode 621）：通过排序最大化效率。  

---

### 题解中的个人心得摘录  
1. **压扁指数位置**：  
   > “压扁指数最大的并不一定在最底下！” —— lzpclxf  
   （总结：需遍历所有牛，而非仅检查底层。）  
2. **初始化陷阱**：  
   > “ans 要赋极小值，否则 60 分。” —— 帅到报警  
   （总结：注意负数可能影响结果。）  
3. **贪心通用性**：  
   > “与国王游戏类似，用排序解决双变量问题。” —— 帅到报警  
   （总结：贪心策略可迁移至同类问题。）

---
处理用时：54.33秒
# 题目信息

# Photo

## 题目描述

Farmer John 打算给他的 $n$ 头奶牛照相。

他们排成一条线，并且依次取 $1\sim n$ 作为编号。

每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。

对于每一头奶牛，FJ 都想要让 Ta 至少出现在一张照片里。

不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。

已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。

## 说明/提示

#### 样例输入输出 1 解释

FJ 可以只拍三张照片：$[1,2]$，$[3,5]$，$[6,7]$。

---

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $2\le n\le10^9$，$1\le k\le1000$，$1 \leq a_i, b_i \leq n$。

## 样例 #1

### 输入

```
7 3
1 3
2 4
5 6
```

### 输出

```
3```

# AI分析结果



### 综合分析与结论
本题核心是将不友好对的区间转化为断点问题，通过贪心策略找到最少的断点。正确解法需确保每个矛盾区间至少包含一个断点，照片数目为断点数 +1。关键点在于区间排序与贪心处理顺序。

### 高星题解推荐

#### 作者：呆瓜yy (★★★★★)
**关键亮点**：
- 思路清晰，正确转化为贪心选择最小右端点。
- 每次确定当前照片的起始位置，找到必须分割的最小右边界，确保高效合并区间。
- 代码可读性强，处理逻辑正确，时间复杂度为O(k log k)。

**核心代码思路**：
```cpp
sort(p+1, p+k+1, cmp); // 按左端点排序
for(i=1; i<=n; ){
    int min_b = INF;
    // 找到所有a>=i中的最小b
    for(j=1; j<=k; j++)
        if(p[j].a >= i) 
            min_b = min(min_b, p[j].b);
    ans++;
    i = min_b; // 下一照片起始位置
}
```
**代码总结**：通过枚举照片起点，在矛盾对中寻找必须分割的最小右边界，直接跳跃处理，保证最少照片数。

#### 作者：Snow_Dreams (★★★★)
**关键亮点**：
- 理论分析到位，将问题类比经典区间取点问题。
- 强调按右端点排序的贪心策略，思路适用于同类问题。

**核心思路**：按右端点排序后，每次选择最左断点覆盖最多后续区间。虽未提供完整代码，但思路正确，具有指导意义。

### 最优思路总结
1. **区间转化**：将每个矛盾对视为区间 `[a, b)`。
2. **排序策略**：按右端点排序（或左端点配合贪心处理）。
3. **贪心处理**：每次选择当前区间的右端点作为断点，确保覆盖后续最多区间。

### 拓展与同类题
- **类似问题**：区间覆盖、活动选择、资源分配。
- **推荐题目**：
  1. [P1250 种树](https://www.luogu.com.cn/problem/P1250)（区间覆盖）
  2. [P2082 区间覆盖](https://www.luogu.com.cn/problem/P2082)（合并区间）
  3. [P1230 智力大冲浪](https://www.luogu.com.cn/problem/P1230)（活动安排）

### 个人心得摘录
- **调试经验**：确保断点位于矛盾对的左闭右开区间内，避免逻辑错误。
- **顿悟点**：贪心的核心是局部最优推导全局最优，正确排序策略是关键。

---
处理用时：272.13秒
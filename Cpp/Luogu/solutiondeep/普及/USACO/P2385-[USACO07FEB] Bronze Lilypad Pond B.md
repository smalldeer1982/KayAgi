# 题目信息

# [USACO07FEB] Bronze Lilypad Pond B

## 题目描述

为了让奶牛们娱乐和锻炼，农夫约翰建造了一个美丽的池塘。这个长方形的池子被分成了 M 行 N 列个方格（1 ≤ M, N ≤ 30） 。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。

贝西正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。

贝西的舞步很像象棋中的马步：每次总是先横向移动 M1 (1 ≤ M1 ≤ 30)格，再纵向移动 M2 (1 ≤ M2 ≤ 30, M1≠M2)格，或先纵向移动 M1 格，再横向移动 M2 格。最多时，贝西会有八个移动方向可供选择。

给定池塘的布局和贝西的跳跃长度，请计算贝西从起点出发，到达目的地的最小步数，我们保证输入数据中的目的地一定是可达的。


## 样例 #1

### 输入

```
4 5 1 2
1 0 1 0 1
3 0 2 0 4
0 1 2 0 0
0 0 0 1 0```

### 输出

```
2```

# AI分析结果



### 综合分析与结论
本题是典型的BFS求最短路径问题，难点在于正确处理八个跳跃方向及状态标记。绝大多数题解采用BFS，少数使用DFS+记忆化或动态规划。核心思路为：通过队列逐层搜索，正确生成八个跳跃方向，及时标记已访问节点，保证首次到达终点时步数最小。

---

### 高分题解推荐

#### 1. 维迭生（5星）
**关键亮点**  
- 清晰阐述BFS思想，代码结构规范  
- 使用STL队列和pair存储坐标，可读性强  
- 方向数组生成正确，边界处理完整  

**核心代码**  
```cpp
int dx[] = {m1, m1, -m1, -m1, m2, m2, -m2, -m2};
int dy[] = {m2, -m2, m2, -m2, m1, -m1, m1, -m1};
while (!q.empty()) {
    auto [x, y] = q.front(); q.pop();
    for (int z = 0; z < 8; z++) {
        int nx = x + dx[z], ny = y + dy[z];
        if (valid(nx, ny) && !vis[nx][ny] && maps[nx][ny] == 1) {
            vis[nx][ny] = true;
            q.push({nx, ny});
        }
    }
}
```

#### 2. AveMarina（5星）
**关键亮点**  
- 优化空间：直接修改原数组标记访问，省去vis数组  
- 代码简洁，方向生成逻辑清晰  

**核心技巧**  
在BFS中将访问过的格子设为不可达状态（如岩石或水），避免重复入队。

#### 3. installb（4星）
**关键亮点**  
- 代码简洁高效，方向数组处理巧妙  
- 队列实现时直接修改原数组标记访问  

**核心代码**  
```cpp
dx[] = {m1, m1, -m1, -m1, m2, m2, -m2, -m2};
dy[] = {m2, -m2, m2, -m2, m1, -m1, m1, -m1};
while (!q.empty()) {
    auto [x, y] = q.front(); q.pop();
    for (int i = 0; i < 8; i++) {
        int nx = x + dx[i], ny = y + dy[i];
        if (valid(nx, ny) && mp[nx][ny]) {
            mp[nx][ny] = 0; // 标记为不可达
            q.push({nx, ny});
        }
    }
}
```

---

### 关键思路总结
1. **BFS层次遍历**：利用队列逐层扩展，确保首次到达终点时步数最短。
2. **方向数组生成**：正确覆盖所有横向±M1/纵向±M2和横向±M2/纵向±M1的组合。
3. **状态标记优化**：通过直接修改原数组或使用vis数组避免重复访问。
4. **边界处理**：严格判断坐标是否在网格范围内，跳过非法位置。

---

### 拓展与举一反三
- **同类题目推荐**  
  - [P1443 马的遍历](https://www.luogu.com.cn/problem/P1443)  
  - [P1135 奇怪的电梯](https://www.luogu.com.cn/problem/P1135)  
  - [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141)  

- **调试心得**  
  - 方向数组错误是常见坑点，需通过画图验证所有组合。  
  - DFS需配合记忆化剪枝，否则易超时（如Dr_殇的TLE经历）。

---
处理用时：97.33秒
# 题目信息

# [USACO3.3] 游戏 A Game

## 题目背景

有如下一个双人游戏：$N (2 \leq N \leq 100)$ 个正整数的序列放在一个游戏平台上，游戏由玩家 $1$ 开始，两人轮流从序列的任意一端取一个数，取数后该数字被去掉并累加到本玩家的得分中，当数取尽时，游戏结束。以最终得分多者为胜。

## 题目描述

编一个执行最优策略的程序，最优策略就是使玩家在与最好的对手对弈时，能得到的在当前情况下最大的可能的总分的策略。你的程序要始终为第二位玩家执行最优策略。

## 说明/提示

题目翻译来自 NOCOW。

USACO Training Section 3.3

## 样例 #1

### 输入

```
6 
4 7 2 9 5 2```

### 输出

```
18 11```

# AI分析结果



### 综合分析与结论
该题核心为区间动态规划，双方均采用最优策略。关键点在于：将对手的最优选择转化为当前玩家的子问题求解，通过状态转移计算区间极值。前缀和优化、记忆化搜索是常见实现技巧，滚动数组可优化空间。

---

### 高星题解推荐

#### 1. 「QQ红包」题解（★★★★★）
**关键亮点**：  
- 思路清晰，状态定义简洁（f[i][j]表示区间[i,j]内第一位玩家的最大得分）
- 利用前缀和快速计算区间和，转移方程直观易懂  
- 代码简洁高效，双重循环逆序处理区间长度，符合经典区间DP模式

**核心代码**：
```cpp
for (i = n-1; i >=1; i--)
    for (j = i+1; j <=n; j++)
        f[i][j] = max((s[j]-s[i-1])-f[i+1][j], 
                     (s[j]-s[i-1])-f[i][j-1]);
```
**实现思想**：逆序枚举左端点，顺序扩展右端点，每次取左/右后的剩余区间最优解。

#### 2. Celebrate题解（★★★★☆）
**关键亮点**：  
- 使用标准区间DP框架，代码风格易读  
- 明确将对手策略转化为剩余区间的子问题  
- 详细注释辅助理解转移方程逻辑

**个人心得**：  
作者通过绘制博弈树理解对手策略，最终将问题转化为min-max思想，强调对手的最优选择影响当前决策。

#### 3. y11034822题解（★★★★☆）
**关键亮点**：  
- 使用记忆化搜索实现，更贴近博弈树直觉  
- 通过前缀和快速计算区间总得分  
- 状态转移方程直接体现“对手取最优”思想

**核心代码**：
```cpp
int dfs(int L, int R) {
    if (L == R) return a[L];
    return max( sum[L][R] - dfs(L+1, R), 
                sum[L][R] - dfs(L, R-1) );
}
```
**实现思想**：每个区间的最优解等于总和减去对手在剩余区间的最优解。

---

### 关键思路与技巧总结
1. **区间DP状态设计**：定义`f[i][j]`为区间[i,j]内先手能获得的最大差值或分数。
2. **对手策略转化**：通过`sum - f[i+1][j]`将对手的最优解转化为当前玩家的选择。
3. **前缀和优化**：预处理前缀和数组，快速计算任意区间和。
4. **递推方向**：逆序枚举左端点，确保子问题先被计算。

---

### 拓展练习推荐
1. [P2734 游戏](https://www.luogu.com.cn/problem/P2734) - 同类区间DP问题  
2. [P3004 小明的游戏](https://www.luogu.com.cn/problem/P3004) - 滚动数组优化空间  
3. [P1430 序列取数](https://www.luogu.com.cn/problem/P1430) - 高维状态设计训练

---
处理用时：49.10秒
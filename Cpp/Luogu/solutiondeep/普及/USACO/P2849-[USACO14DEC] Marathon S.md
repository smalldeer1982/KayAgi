# 题目信息

# [USACO14DEC] Marathon S

## 题目描述

由于对他的奶牛的健康状况不佳而感到不满，牧场主约翰让它们参加各种各样的体育健身活动。最让他感到自豪的奶牛是 Bessie，她将参加约翰牧场附近城市里的马拉松比赛！

马拉松比赛有 $N$ 个检查点 $(3\leq N\leq 500)$ ，需要按顺序访问。检查点 $1$ 是起点，检查点 $N$ 是终点。Bessie 应该按顺序一一访问所有的这些检查点，但由于她是一头懒惰的牛（懒惰竟然还选择跑马拉松！），于是她决定跳过 $K(K<N)$ 个检查点以缩小她的赛程。但她不能跳过第 $1$ 个和第 $N$ 个检查点，因为这样太明显了。

请你帮助 Bessie 计算出跳过中间的 $K$ 个检查点后她最少要跑多少距离。

注意：由于街道是网格状的，我们用坐标来表示点的位置。但是 $(x_1,y_1),(x_2,y_2)$ 两点间的距离应为 $|x_1-x_2|+|y_1-y_2|$，这种测量距离的方法被称为“曼哈顿”距离，这是因为在市中心的网格路中，你可以沿平行于 $x$ 轴或 $y$ 轴的方向走，但不能沿直线到达。

## 样例 #1

### 输入

```
5 2
0 0
8 3
1 1
10 -5
2 2```

### 输出

```
4```

# AI分析结果



### 综合分析与结论
本题核心是动态规划，通过状态转移枚举跳跃点间的距离。各题解均围绕 `f[i][j]`（到达第i个点跳过j个点的最短距离）展开，通过三重循环实现状态转移。分层图最短路虽可行但效率低，暴力枚举不可行。关键优化在于状态转移时的跳跃步长控制。

---

### 高星题解推荐

#### 1. 作者：ezоixx130（★★★★☆）
**关键亮点**  
- 状态定义清晰，转移方程简洁  
- 代码结构规范，包含初始化与边界处理  
- 时间复杂度分析明确（O(n³)但常数小）  

**核心代码**  
```cpp
for(int i=2;i<=n;++i)
    for(int j=0;j<=min(i-1,k);++j)
        for(int l=0;l<=j;++l)
            f[i][j]=min(f[i][j],f[i-l-1][j-l]+dis(i,i-l-1));
```
**实现思想**  
通过三重循环枚举当前检查点 `i`、已跳过的检查点数 `j`，以及从 `i` 向前跳跃的步数 `l`，更新状态。

---

#### 2. 作者：linyinuo2008（★★★★☆）
**关键亮点**  
- 详细的状态转移解释与代码注释  
- 手写 `min` 函数优化常数  
- 强调必须按顺序访问检查点的关键条件  

**个人心得**  
> "开始我没看到必须按顺序访问这一点，以为这题很难，实际还挺简单。"  
总结：审题时需特别注意题目约束条件。

**核心代码**  
```cpp
for(int i=1;i<=n;i++)
    for(int j=0;j<=k&&j<i;j++)
        for(int p=0;p<=j;p++)
            f[i][j]=min(f[i][j],f[i-p-1][j-p]+dis(i-p-1,i));
```
**实现思想**  
与 ezоixx130 类似，但变量命名更清晰（如 `p` 表示跳跃步长），并通过 `j < i` 避免无效状态。

---

#### 3. 作者：Del_Your_Heart（★★★★☆）
**关键亮点**  
- 提供三种思路（暴力、随机、DP）对比  
- 包含 `rand()` 方法的失败教训  
- 代码中直接处理跳跃数 `s` 实现紧凑转移  

**核心代码**  
```cpp
for(int i=1;i<=n;++i)
    for(int c=0;c<=k;++c)
        for(int s=0;s<=k&&i+s+1<=n;++s)
            f[i+s+1][c+s]=min(f[i+s+1][c+s],f[i][c]+dis(i,i+s+1));
```
**实现思想**  
将跳跃步长 `s` 直接作为循环变量，通过 `i+s+1` 计算目标检查点，简化跳跃逻辑。

---

### 关键思路总结
1. **状态定义**：`f[i][j]` 表示到第 `i` 个检查点跳过 `j` 个点的最短距离。
2. **转移优化**：枚举从当前点回退的跳跃步长 `l`，利用曼哈顿距离累加。
3. **边界处理**：初始化 `f[1][0] = 0`，避免起点被跳过。
4. **复杂度控制**：通过限制 `j <= min(i-1, k)` 减少无效状态。

---

### 同类题目推荐
1. **P1433 吃奶酪**（状态压缩 DP，处理点集遍历）  
2. **P1441 砝码称重**（子集选择与动态规划结合）  
3. **P2858 [USACO06FEB]Treats for the Cows**（区间 DP 与决策优化）

---
处理用时：46.46秒
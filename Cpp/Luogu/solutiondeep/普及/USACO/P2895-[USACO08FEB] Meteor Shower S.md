# 题目信息

# [USACO08FEB] Meteor Shower S

## 题目描述

贝茜听说一场特别的流星雨即将到来：这些流星会撞向地球，并摧毁它们所撞击的任何东西。她为自己的安全感到焦虑，发誓要找到一个安全的地方（一个永远不会被流星摧毁的地方）。

如果将牧场放入一个直角坐标系中，贝茜现在的位置是原点，并且，贝茜不能踏上一块被流星砸过的土地。

根据预报，一共有 $M$ 颗流星 $(1\leq M\leq 50,000)$ 会坠落在农场上，其中第 $i$ 颗流星会在时刻 $T_i$（$0 \leq T _ i \leq 1000$）砸在坐标为 $(X_i,Y_i)(0\leq X_i\leq 300$，$0\leq Y_i\leq 300)$ 的格子里。流星的力量会将它所在的格子，以及周围 $4$ 个相邻的格子都化为焦土，当然贝茜也无法再在这些格子上行走。

贝茜在时刻 $0$ 开始行动，她只能在会在横纵坐标 $X,Y\ge 0$ 的区域中，平行于坐标轴行动，每 $1$ 个时刻中，她能移动到相邻的（一般是 $4$ 个）格子中的任意一个，当然目标格子要没有被烧焦才行。如果一个格子在时刻 $t$ 被流星撞击或烧焦，那么贝茜只能在 $t$ 之前的时刻在这个格子里出现。 贝茜一开始在 $(0,0)$。

请你计算一下，贝茜最少需要多少时间才能到达一个安全的格子。如果不可能到达输出 $−1$。

## 样例 #1

### 输入

```
4
0 0 2
2 1 2
1 1 2
0 3 5
```

### 输出

```
5
```

# AI分析结果



### 综合分析与结论
本题核心为BFS+时间预处理，通过预处理每个点的最早被摧毁时间，在BFS中动态判断路径合法性。关键难点在于坐标范围、多流星覆盖取最小时间、安全点判断等。以下题解在思路清晰度、代码优化、细节处理等方面表现突出。

---

### 精选题解与评分

#### 1. 翼德天尊（★★★★☆）
**关键亮点**：
- 预处理时用`ma[][]`记录各点最早被摧毁时间，处理坐标超300情况
- 使用双队列分别存x/y坐标，避免结构体开销
- 安全点判断简洁（`ma[x][y]==-1`即永不被毁）
- 处理多流星覆盖时取最小时间

**核心代码**：
```cpp
// 预处理陨石影响区域
for(int i=1;i<=n;i++){
    scanf("%d%d%d",&sx,&sy,&st);
    for(int j=0;j<5;j++){ // 处理5个点
        if(sx+dx[j]>=0 && ...) // 边界判断
        ma[sx+dx[j]][sy+dy[j]] = min(原值, st);
    }
}

// BFS核心判断
if(xx>=0 && yy>=0 && s<ch(ma[xx][yy]) && !v[xx][yy]){
    // s为当前步数，ma[xx][yy]为摧毁时间
}
```

#### 2. 很简单（★★★★☆）
**关键亮点**：
- 使用`inf`初始化，代码简洁
- 结构体封装坐标+时间，可读性强
- 预处理时直接处理四个方向，逻辑紧凑

**核心代码**：
```cpp
// 初始化与预处理
memset(mp,0x3f,sizeof(mp)); // INF初始化为极大值
for(流星数据){
    mp[x][y] = min(mp[x][y],t);
    for(四方向) mp[nx][ny] = min(mp[nx][ny],t);
}

// BFS判断
if(nx>=0 && ny>=0 && step+1 < mp[nx][ny]){
    // step+1为到达新点的时间
}
```

#### 3. houzhiyuan（★★★★☆）
**关键亮点**：
- 数组模拟队列提升性能
- 显式处理坐标越界（305范围）
- 使用`vis[][]`避免重复访问

**核心代码**：
```cpp
int q[4]={1,0,-1,0}, w[4]={0,1,0,-1}; // 方向数组
while(!q.empty()){
    // 显式处理305边界
    if(p.x<0 || p.x>=305 || p.y<0 || p.y>=305) continue;
    if(a[p.x][p.y]==INF) return step; // 找到安全点
}
```

---

### 关键思路总结
1. **时间预处理**：建立二维数组存储每个格子的最早被摧毁时间，多流星覆盖时取最小值
2. **扩展坐标范围**：需处理坐标>300的情况（如开305*305数组）
3. **BFS剪枝**：移动时满足`当前时间+1 < 目标点摧毁时间`
4. **安全点判断**：未被任何流星覆盖的点（初始化为极大值或-1）

---

### 相似题目推荐
1. [P3395 路障](https://www.luogu.com.cn/problem/P3395) - 动态障碍的BFS处理
2. [P3663 激光奶牛](https://www.luogu.com.cn/problem/P3663) - 时间轴上的状态判断
3. [P1825 [USACO11OPEN]Corn Maze S](https://www.luogu.com.cn/problem/P1825) - 复杂场景下的BFS应用

---

### 个人心得摘录
- **翼德天尊**："如果一个格子在时刻t被烧焦，贝茜只能在t之前出现"——需严格判断`step < T`
- **dz_ice**：通过测试数据发现多流星覆盖需取最小值，否则仅得35分
- **sinsop90**：三维数组法导致MLE，改用二维时间预处理后通过
- **D愚者**：DFS需记忆化剪枝（`f[][]`记录最小到达时间），否则TLE

---
处理用时：55.45秒
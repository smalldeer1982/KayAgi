# 题目信息

# [USACO08MAR] River Crossing S

## 题目描述

农夫约翰以及他的 $N(1 \le N \le 2500)$ 头奶牛打算过一条河，但他们所有的渡河工具，仅仅是一个木筏。 

由于奶牛不会划船，在整个渡河过程中，约翰必须始终在木筏上。在这个基础上，木筏上的奶牛数目每增加 $1$，FJ把木筏划到对岸就得花更多的时间。 

当约翰一个人坐在木筏上，他把木筏划到对岸需要 $M(1 \le M \le 1000)$ 分钟。当木筏搭载的奶牛数目从 $i-1$ 增加到 $i$ 时，约翰得多花 $M_i(1 \le M_i \le 1000)$ 分钟才能把木筏划过河（也就是说，船上有 $1$ 头奶牛时，约翰得花 $M+M_1$ 分钟渡河；船上有 $2$ 头奶牛时，时间就变成 $M+M_1+M_2$ 分钟。后面的以此类推）。那么，约翰最少要花多少时间，才能把所有奶牛带到对岸呢？当然，这个时间得包括约翰一个人把木筏从对岸划回来接下一批的奶牛的时间。

## 样例 #1

### 输入

```
5 10 
3 
4 
6 
100 
1 
```

### 输出

```
50 
```

# AI分析结果



### 综合分析与结论
本题的核心是动态规划，关键在于预处理运送不同数量奶牛的时间并利用背包或分治思路进行状态转移。各题解均围绕动态规划展开，主要差异在于状态定义、预处理方式及优化技巧。最优解法通过预处理前缀和并巧妙处理往返时间，以O(n²)时间复杂度解决问题。

---

### 精选题解与评分

#### 1. 题解作者：Stella_Yan（⭐️⭐️⭐️⭐️⭐️）
**关键亮点**  
- 思路清晰，详细解释前缀和与背包思想的结合。
- 代码简洁，通过预处理将往返时间直接融入状态转移。
- 特别说明最终结果需减去最后一次返回时间，避免常见错误。

**核心代码**  
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = i; j <= n; j++) {
        f[j] = min(f[j], f[j - i] + sum[i]); // 完全背包式更新
    }
}
cout << f[n] - m; // 减去最后一次返回时间
```

#### 2. 题解作者：MY（⭐️⭐️⭐️⭐️）
**关键亮点**  
- 代码极简，直接在原数组上进行DP，节省空间。
- 巧妙利用前缀和与分治思想，状态转移方程直观。

**核心代码**  
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = 1; j < i; j++) {
        m[i] = min(m[i], m[j] + m[i - j] + m[0]); // 分治优化
    }
}
printf("%d", m[n]);
```

#### 3. 题解作者：lsroi（⭐️⭐️⭐️⭐️）
**关键亮点**  
- 对比不同状态设计的效率，强调状态定义对复杂度的关键影响。
- 提供从O(n³)到O(n²)的优化思路，具有教学意义。

**核心代码**  
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = 0; j < i; j++) {
        f[i] = min(f[i], f[j] + sum[i - j] + 2 * m); // 优化状态转移
    }
}
```

---

### 最优思路总结
1. **前缀和预处理**：计算运送i头奶牛的总时间，包含去程和返程时间（如`sum[i] = sum[i-1] + M_i + 2*M`）。
2. **动态规划状态转移**：采用完全背包思想，`f[j] = min(f[j], f[j-i] + sum[i])`，遍历所有可能的运送批次。
3. **边界处理**：最终结果需减去最后一次返程时间`M`。

---

### 拓展与举一反三
- **类似问题**：完全背包（如[P1616](https://www.luogu.com.cn/problem/P1616)）、区间DP（如[P1880](https://www.luogu.com.cn/problem/P1880)）。
- **优化技巧**：状态压缩、边读边处理节省空间、分治思想降低复杂度。
- **推荐题目**：
  1. [P1048 采药](https://www.luogu.com.cn/problem/P1048)（01背包）
  2. [P2854 [USACO06DEC]Cow Roller Coaster S](https://www.luogu.com.cn/problem/P2854)（多维背包）
  3. [P1064 金明的预算方案](https://www.luogu.com.cn/problem/P1064)（依赖背包）

---

### 题解中的个人心得摘录
- **状态设计**（lsroi）："状态设计直接影响时间复杂度，避免冗余信息是关键。"
- **内存优化**（Ezio_0420）："边读入边处理前缀和，省去单独数组，空间复杂度降至O(1)。"
- **常见错误**（Stella_Yan）："最终需减去最后一次返程时间，否则会多算一个M。"

---
处理用时：122.15秒
# 题目信息

# [USACO04OPEN] Cave Cows 3

## 题目描述

约翰的 $ N $ ( $ 1 \leq N \leq 50000 $ )只牛在一个黑魃魃的洞里探险，他们只能通过叫声交流。

两只牛之间的曼哈顿距离决定了声音传播的时间。即牛1与牛2交流，需要的时间为
 $ |x_1-x_2|+|y_1-y_2| $ 。其中 $ -10^6 \leq x_1,x_2,y_1,y_2 \leq 10^6 $ 。

那任意一对牛之间交流时间的最大值为多少？

## 说明/提示

样例解释：

$ (2,7) $ 和 $ (8,1) $ 两点间的距离最大，为12。

## 样例 #1

### 输入

```
5
1 1
3 5
2 7
8 1
4 4```

### 输出

```
12```

# AI分析结果



### 综合分析与结论
本题要求快速求解曼哈顿距离的最大值，核心思路在于将曼哈顿距离公式拆解为可线性处理的极值差问题。最优解法分为两类：  
1. **分情况讨论**：将曼哈顿距离拆分为 `x±y` 的极值差，时间复杂度为 $O(n)$。  
2. **坐标转换**：将曼哈顿距离转换为切比雪夫距离，通过极值差求解，本质与第一类方法等价。  

以下为评分较高的题解及其核心实现：

---

### 精选题解

#### 1. Siyuan 的题解（★★★★★）
**关键亮点**：  
- 将曼哈顿距离拆解为 `x+y` 和 `x−y` 的极值差，思路清晰简洁。  
- 代码高效，仅需一次遍历，维护四个极值变量。  

**核心代码**：  
```cpp
int main() {
    int n, a=-inf, b=inf, c=-inf, d=inf;
    scanf("%d", &n);
    while (n--) {
        int x, y; scanf("%d%d", &x, &y);
        a = max(a, x+y); b = min(b, x+y);
        c = max(c, x-y); d = min(d, x-y);
    }
    printf("%d\n", max(a-b, c-d));
}
```

---

#### 2. mrclr 的题解（★★★★★）
**关键亮点**：  
- 利用曼哈顿→切比雪夫坐标转换，将问题转化为求坐标轴方向极值差。  
- 数学推导直观，代码实现同样高效。  

**核心代码**：  
```cpp
int main() {
    int n, xmin=1e9, xmax=-1e9, ymin=1e9, ymax=-1e9;
    cin >> n;
    while (n--) {
        int x, y; cin >> x >> y;
        xmin = min(xmin, x+y); xmax = max(xmax, x+y);
        ymin = min(ymin, x-y); ymax = max(ymax, x-y);
    }
    cout << max(xmax - xmin, ymax - ymin);
}
```

---

#### 3. Heartlessly 的题解（★★★★★）
**关键亮点**：  
- 详细分类讨论四种情况，并给出两种实现（分拆极值与坐标转换）。  
- 代码可读性强，变量命名清晰。  

**核心代码**：  
```cpp
int main() {
    int n, x, y, max_xy = -INF, min_xy = INF, max_x_y = -INF, min_x_y = INF;
    read(n);
    while (n--) {
        read(x), read(y);
        max_xy = max(max_xy, x + y); min_xy = min(min_xy, x + y);
        max_x_y = max(max_x_y, x - y); min_x_y = min(min_x_y, x - y);
    }
    write(max(max_xy - min_xy, max_x_y - min_x_y));
}
```

---

### 最优思路总结
**核心技巧**：  
- **极值差法**：曼哈顿距离的最大值等价于 `max{(x+y)极值差, (x−y)极值差}`，只需线性遍历维护四个极值变量。  
- **坐标转换法**：转换为切比雪夫坐标系后，问题简化为求两轴方向的极值差。  

**拓展应用**：  
- 类似问题可考虑曼哈顿距离与切比雪夫距离的互换（如[P3964 松鼠聚会](https://www.luogu.com.cn/problem/P3964)）。  
- 极值差法适用于需要快速求解一维特征极值的场景（如最大差值、覆盖范围等）。  

---

### 推荐习题
1. [P3964 [TJOI2013]松鼠聚会](https://www.luogu.com.cn/problem/P3964)  
   - 考察切比雪夫距离与曼哈顿距离的转换应用。  
2. [P2906 [USACO08OPEN] Cow Neighborhoods](https://www.luogu.com.cn/problem/P2906)  
   - 结合曼哈顿距离与平衡树维护相邻点对。  
3. [P2121 拆地毯](https://www.luogu.com.cn/problem/P2121)  
   - 极值差思想在动态规划或贪心算法中的应用。  

---

### 个人心得摘录
- **YLWang 的调试经验**：  
  > “暴力解法需优化循环范围和 `abs` 计算，排序后减少冗余比较。”  
  → **启示**：对暴力算法的常数优化（如减少分支、预排序）在特定场景下可能有效。  
- **zhengrunzhe 的尝试**：  
  > “用 KD-Tree 实现最远点对，但可能因数据规模不适用。”  
  → **教训**：算法选择需结合数据规模，避免过度复杂化简单问题。

---
处理用时：71.51秒
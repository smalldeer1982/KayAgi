# 题目信息

# [USACO20JAN] Race B

## 题目描述

Bessie 正在参加一场 $K$（$1\le K\le 10^9$）米的跑步比赛。她从 $0$ 米每秒的速度开始比赛。在每一秒中，她可以选择将她的速度增加 $1$ 米每秒，保持速度不变，或者将她的速度减少 $1$ 米每秒。例如，在第一秒中，她可以将她的速度增加到 $1$ 米每秒，跑 $1$ 米，或者保持她的速度 $0$ 米每秒不变，跑 $0$ 米。Bessie 的速度不会降低到小于零。

Bessie 始终朝着终点线的方向跑，她想要花费整数秒的时间完成比赛。此外，她不想在终点时跑得太快：在 Bessie 跑完 $K$ 米的时刻，她希望她的速度不超过 $X$（$1\le X\le 10^5$）米每秒。Bessie 想要对于 $N$（$1\le N\le 1000$）个不同的 $X$ 值知道她多快可以完成比赛。 

## 说明/提示

### 样例解释 1

当 $X=1$ 时，一种最优方案为：

1. 将速度增加到 $1$ 米/秒，跑 $1$ 米
2. 将速度增加到 $2$ 米/秒，跑 $2$ 米，总计跑 $3$ 米
3. 将速度保持在 $2$ 米/秒，总计跑 $5$ 米
4. 将速度保持在 $2$ 米/秒，总计跑 $7$ 米
5. 将速度保持在 $2$ 米/秒，总计跑 $9$ 米
6. 将速度降低到 $1$ 米/秒，总计跑 $10$ 米

当 $X=3$ 时，一种最优方案为：

1. 将速度增加到 $1$ 米/秒，跑 $1$ 米
2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米
3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米
4. 将速度保持在 $3$ 米/秒，总计跑 $9$ 米
5. 将速度保持在 $3$ 米/秒，总计跑 $12$ 米

注意当 $X=3$ 时，以下方案是不合法的：

1. 将速度增加到 $1$ 米/秒，跑 $1$ 米
2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米
3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米
4. 将速度增加到 $4$ 米/秒，总计跑 $10$ 米

这是因为在 Bessie 跑完 $10$ 米的时刻，她的速度是 $4$ 米/秒。 

## 样例 #1

### 输入

```
10 5
1
2
3
4
5```

### 输出

```
6
5
5
4
4```

# AI分析结果



### 题解综合分析结论
本题需要找到在满足终点速度限制下的最短时间，核心在于如何高效计算不同速度限制下的最优路径。各题解主要采用数学推导、模拟加速/减速过程或二分法，其中二分法在效率与正确性上表现最佳。

---

### 精选题解

#### 1. 作者：superLouis（★★★★★）
**关键亮点**：  
- **数学推导严谨**：将加速与减速阶段统一为等差数列求和，利用奇偶性处理不同情况。  
- **二分法高效**：时间复杂度为O(n log R)，显著优于模拟方法。  
- **调试经验分享**：强调long long类型的重要性，避免溢出错误。  

**核心代码**：
```cpp
int maxlen(int t, int x) {
    if (t <= x) return sum(1, t); // 速度无法超过x
    int speed = (t + x) >> 1; // 最大速度计算
    if ((t + x) & 1) 
        return sum(1, speed) + sum(speed, x); // 奇偶性分情况
    else 
        return sum(1, speed) + sum(speed - 1, x); 
}
```

#### 2. 作者：Treap_Kongzs（★★★★）
**关键亮点**：  
- **逆向思维简化计算**：将减速视为逆向加速，统一处理路程计算。  
- **逐步模拟直观**：通过具体样例验证代码正确性，增强理解。  
- **时间复杂度分析透彻**：明确最坏情况复杂度，证明可行性。  

**核心代码**：
```cpp
int solve(int dis, int maxv) {
    int ans = 0, updis = 0, downdis = 0, v = 0;
    while (1) {
        v++; updis += v; ans++; // 加速阶段
        if (updis + downdis >= dis) return ans;
        if (v >= maxv) { // 开始减速
            downdis += v; ans++;
            if (updis + downdis >= dis) return ans;
        }
    }
}
```

#### 3. 作者：Misserina（★★★★）
**关键亮点**：  
- **代码简洁高效**：精简数学公式，快速计算最大可能距离。  
- **二分边界明确**：合理设置右端点，优化搜索效率。  
- **实际提交验证**：通过多次提交调整代码，确保正确性。  

**核心代码**：
```cpp
unsigned maxd(unsigned mxtime, unsigned x) {
    if (mxtime <= x) return fun(1, mxtime);
    unsigned maxspeed = (mxtime + x) >> 1;
    return fun(1, maxspeed) + fun(x, (mxtime + x) % 2 ? maxspeed : maxspeed - 1);
}
```

---

### 最优思路总结
**关键技巧**：  
1. **二分时间+数学公式**：将问题转化为验证性问题，通过等差数列求和快速计算最大可能距离。  
2. **逆向处理减速阶段**：将减速视为逆向加速，统一用加速公式处理，简化计算逻辑。  
3. **边界与溢出处理**：明确二分边界，使用大整数类型避免溢出错误。

---

### 同类题目推荐
1. [P1182 数列分段 II](https://www.luogu.com.cn/problem/P1182) - 二分答案经典题。  
2. [P2678 跳石头](https://www.luogu.com.cn/problem/P2678) - 最小化最大距离的二分应用。  
3. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094) - 贪心结合二分或双指针。

---

### 个人心得摘录
- **superLouis**：未使用`long long`导致错误，强调数据类型选择的重要性。  
- **Treap_Kongzs**：通过画图验证运动轨迹，直观理解加速/减速阶段。  
- **Misserina**：多次提交调整边界条件，体现耐心调试的重要性。

---
处理用时：113.31秒
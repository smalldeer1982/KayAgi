# 题目信息

# [图论与代数结构 101] 图的代数表示

## 题目描述





给定一张 $n$ 个点 $m$ 条边的图，**有可能存在重边和自环**。请你给出这张图所有的代数表示。






## 说明/提示



对于所有数据，满足 $1 \le n \le 300$，$1 \le m \le 300$，$1 \le 边权 \le 32768$。

**细节提示：**

1.无向图中一些数组可能需要 $2 m$ 的长度，请仔细检查以免数组开小。

2.无向图中如果存在自环，则在邻接表和正向表中都需要将这条边输出两次，但不影响邻接矩阵或权矩阵的输出。

3.逆向表中对于连向一点的边也要按输入顺序输出而不是边权大小顺序。

4.无向带权图中每条非自环边都会修改权矩阵中两个位置。

5.无法通过时可以通过构造有向/无向、带权/不带权、有/无自环、有/无重边的小数据来检查代码。


##### 样例一解释

第 $1$ 行至第 $3$ 行是邻接矩阵；

第 $4$ 行至第 $6$ 行是关联矩阵；

第 $7$ 行至第 $9$ 行是邻接表；

第 $10$ 行至第 $11$ 行是正向表。

##### 样例二解释

第 $1$ 行至第 $2$ 行是邻接表；

第 $3$ 行至第 $5$ 行是正向表；

第 $6$ 行至第 $8$ 行是逆向表。

## 样例 #1

### 输入

```
3 3 0 0
2 3
1 3
1 2```

### 输出

```
0 1 1
1 0 1
1 1 0
0 1 1
1 0 1
1 1 0
3 2
3 1
2 1
1 3 5 7
3 2 3 1 2 1```

## 样例 #2

### 输入

```
3 3 1 1
3 1 5
2 2 4
3 1 3```

### 输出

```
2 4
1 5 1 3
1 1 2 4
2 1 1
4 5 3
1 3 4 4
3 3 2
5 3 4```

## 样例 #3

### 输入

```
3 3 0 1
1 3 5
2 2 3
2 3 1```

### 输出

```
0 0 5
0 3 1
5 1 0
3 5
2 3 2 3 3 1
1 5 2 1
1 2 5 7
3 2 2 3 1 2
5 3 3 1 5 1```

## 样例 #4

### 输入

```
4 3 0 1
3 3 5
2 4 6
2 4 7```

### 输出

```
4 6 4 7
3 5 3 5
2 6 2 7
1 1 3 5 7
4 4 3 3 2 2
6 7 5 5 6 7```

# AI分析结果

### 算法分类
图论

### 综合分析
该题目要求对给定的图进行多种代数表示，包括邻接矩阵、关联矩阵、邻接表、正向表和逆向表。题解主要集中在如何正确实现这些表示方法，并处理图中的重边和自环问题。题解的质量参差不齐，部分题解思路清晰、代码可读性高，而有些则较为冗长且缺乏优化。

### 所选题解
1. **作者：Daidly (赞：141)**
   - **星级：4.5**
   - **关键亮点**：详细解释了每种表示方法的实现思路，代码结构清晰，且对重边和自环的处理进行了明确说明。特别是对邻接表和正向表的实现进行了详细讲解，适合初学者理解。
   - **个人心得**：作者提到“注意 $1$：正向表和逆向表的 `B`、`Z` 两个数组要开两倍 `MAXN` 大小”，这是在实际调试中容易忽略的细节。

2. **作者：hensier (赞：11)**
   - **星级：4.0**
   - **关键亮点**：提供了详细的表格对比不同表示方法的规模、用途、适用对象和值域，帮助读者快速理解各种表示方法的优缺点。代码实现较为简洁，且对重边和自环的判断进行了优化。
   - **个人心得**：作者提到“当一个点邻接表中没有连边时，也要换行”，这是在实际输出中容易忽略的细节。

3. **作者：Hughpig (赞：8)**
   - **星级：4.0**
   - **关键亮点**：代码实现较为完整，且对每种表示方法的实现进行了详细说明。特别是对正向表和逆向表的实现进行了详细讲解，适合有一定基础的读者理解。
   - **个人心得**：作者提到“蒟蒻为了做题甚至买了一本《图论与代数结构》”，体现了作者对题目的认真态度。

### 关键思路与技巧
1. **邻接矩阵与权矩阵**：使用二维数组存储，无向图需双向赋值，重边和自环需特殊处理。
2. **关联矩阵**：使用二维数组存储，无向图需双向赋值，赋权图和自环无法表示。
3. **邻接表**：使用`vector`存储，无向图需双向赋值，重边和自环需特殊处理。
4. **正向表与逆向表**：使用前缀和的方式存储，无向图的正向表和逆向表相同。

### 拓展思路
- **同类型题**：可以考虑处理更复杂的图结构，如带权图、有向图、无向图等。
- **类似算法套路**：在处理图的表示时，可以考虑使用更高效的数据结构，如链式前向星等。

### 推荐题目
1. [P3371 【模板】单源最短路径（弱化版）](https://www.luogu.com.cn/problem/P3371)
2. [P3388 【模板】割点（割顶）](https://www.luogu.com.cn/problem/P3388)
3. [P3916 图的遍历](https://www.luogu.com.cn/problem/P3916)

### 代码片段
```cpp
// 邻接矩阵与权矩阵
void work1(){
    for(int i=1;i<=n;++i){
        for(int j=1;j<=n;++j){
            cout<<a[i][j]<<" ";
        }cout<<endl;
    }
}

// 邻接表
void work3(){
    if(type2==0){
        for(int i=1;i<=n;++i){
            for(int j=0;j<c1[i].size();++j){
                cout<<c1[i][j]<<" ";
            }cout<<endl;
        }
    }else{
        for(int i=1;i<=n;++i){
            for(int j=0;j<c2[i].size();++j){
                cout<<c2[i][j].first<<" "<<c2[i][j].second<<" ";
            }cout<<endl;
        }
    }
}
```

---
处理用时：33.45秒
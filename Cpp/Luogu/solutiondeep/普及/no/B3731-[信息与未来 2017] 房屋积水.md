# 题目信息

# [信息与未来 2017] 房屋积水

## 题目描述

乌龟家的屋顶是凹凸不平的，所以每次雨后都会积水。为了知道屋顶是否会在暴雨后塌掉，他把屋顶的形状给了你，希望你帮他计算暴雨后屋顶的积水总量。

乌龟的屋顶由顺次排在同一水平线上的 $n$ 个宽度为 $1$、高度为整数 (分别给出) 的瓦片组成。例如给定 $n=5$，瓦片的高度分别为 $4,2,3,5,1$，屋顶可以画在下图所示的网格中，灰色格子为瓦片。

暴雨过后，如果一个方格向左右两侧延伸都能到达瓦片占据的方格，它就会积水。所以图中波浪线格子在暴雨后会积水，屋顶的积水方格总数为 $3$。

![](https://cdn.luogu.com.cn/upload/image_hosting/qd0c3htr.png)

---

试题中使用的生成数列 $R$ 定义如下：整数 $0\leq R_1\lt 201701$ 在输入中给出。

对于 $i\gt 1,R_i=(R_{i−1}\times 6807+2831)\mod 201701$。

## 说明/提示

$1\leq n\leq100$。

>本题原始满分为 $15\text{pts}$。

## 样例 #1

### 输入

```
10 1```

### 输出

```
23```

# AI分析结果

### 算法分类
模拟

### 综合分析与结论
该题的核心逻辑是通过模拟屋顶的积水过程来计算积水总量。题解中通过生成每个瓦片的高度，并分别计算每个瓦片左右两侧的最高点，然后取两者中的较小值作为该瓦片上的积水高度，最后累加所有瓦片的积水高度得到总积水量。这种方法简单直观，且时间复杂度为O(n)，适用于题目给定的数据范围。

### 所选题解
#### 题解作者：WsW_ (赞：6)
- **星级**: 4星
- **关键亮点**: 
  - 思路清晰，通过分别计算左右两侧的最高点来确定每个瓦片的积水高度。
  - 代码简洁，易于理解，使用了两个数组来存储左右两侧的最高点，减少了重复计算。
  - 时间复杂度为O(n)，效率较高。

### 核心代码片段
```cpp
for(int i=1;i<=n;i++){
    lst=max(lst,a[i]);
    l[0][i]=max(0,lst-a[i]);//以左边最高点为
}
lst=0;
for(int i=n;i>0;i--){
    lst=max(lst,a[i]);
    l[1][i]=max(0,lst-a[i]);
}
for(int i=1;i<=n;i++)ans+=min(l[1][i],l[0][i]);
```

### 最优关键思路或技巧
- **双指针法**: 通过分别从左右两侧遍历数组，记录每个位置的最高点，然后取两者中的较小值作为积水高度。
- **空间优化**: 使用两个数组分别存储左右两侧的最高点，避免了重复计算，提高了效率。

### 可拓展之处
- **类似问题**: 类似的问题包括计算柱状图中的最大矩形面积（LeetCode 84），可以通过类似的双指针法或单调栈来解决。
- **算法套路**: 在处理需要从两个方向分别计算的问题时，可以考虑使用双指针法或单调栈来优化时间复杂度。

### 推荐题目
1. [LeetCode 84. 柱状图中的最大矩形](https://leetcode.cn/problems/largest-rectangle-in-histogram/)
2. [LeetCode 42. 接雨水](https://leetcode.cn/problems/trapping-rain-water/)
3. [洛谷 P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)

---
处理用时：17.28秒
# 题目信息

# [GESP202412 五级] 武器强化

## 题目描述

小杨有 $n$ 种武器和 $m$ 种强化材料。第 $i$ 种强化材料会适配第 $p_i$ 种武器，小杨可以花费 $c_i$ 金币将该材料对应的适配武器修改为任意武器。

小杨最喜欢第 $1$ 种武器，因此他希望适配该武器的强化材料种类数**严格大于**其他的武器，请你帮小杨计算为了满足该条件最少需要花费多少金币。

## 说明/提示

#### 样例解释

花费 $1$，将第三种强化材料的适配武器由 $3$ 改为 $1$。此时，武器 $1$ 有 $2$ 种强化材料适配，武器 $2$ 和武器 $3$ 都各有 $1$ 种强化材料适配，满足适配第 $1$ 种武器的强化材料种类数**严格大于**其他的武器。

#### 数据范围

对于 $100\%$ 的数据，保证 $1\le n,m\le 1\, 000$，$1\le p_i\le n$，$1\le c_i\le 10^9$。

| 子任务编号 | 得分占比 | $n$ | $m$ |
| :--: | :--: | :--: | :--: |
| $1$ | $20\%$ | $\le 2$ | $\le 1\, 000$ |
| $2$ | $20\%$ | $\le 1\,000$ | $\le 2$ |
| $3$ | $60\%$ | $\le 1\, 000$ | $\le 1\, 000$ |


## 样例 #1

### 输入

```
4 4
1 1
2 1
3 1
3 2```

### 输出

```
1```

# AI分析结果

### 算法分类
贪心

### 综合分析与结论
本题的核心是通过贪心策略，最小化将其他武器的强化材料转移到第1种武器所需的成本。所有题解都采用了类似的思路：首先统计每种武器的强化材料数量，并按照成本排序；然后通过枚举第1种武器的最终材料数量，计算将其他武器的材料转移到第1种武器所需的最小成本。关键在于如何高效地选择成本最低的材料进行转移，并确保第1种武器的材料数量严格大于其他武器。

### 所选高星题解

#### 1. 作者：dortmund2013 (赞：13)  
**星级：5星**  
**关键亮点：**  
- 思路清晰，代码结构简洁，易于理解。
- 通过枚举第1种武器的最终材料数量，结合贪心策略，高效计算最小成本。
- 使用了`vector`存储每种武器的强化材料，并按成本排序，便于后续选择。

**核心代码：**
```cpp
LL check(int tar) {
    LL sum = 0, now = wp[1].size();
    vector<LL> rem;
    for(int i = 2; i <= n; i++) {
        if(!wp[i].empty()) {
            int numi = max((int)wp[i].size() - tar + 1, 0);
            now += numi;
            for(int j = 0; j <= numi - 1; j++)
                sum += wp[i][j];
            for(int j = numi; j <= (int)wp[i].size() - 1; j++)
                rem.push_back(wp[i][j]);
        }
    }
    if(now < tar) {
        sort(rem.begin(), rem.end());
        for(LL ele : rem){
            sum += ele;
            now++;
            if(now == tar) break;
        }
    }
    return sum;
}
```

#### 2. 作者：niuniudundun (赞：21)  
**星级：4星**  
**关键亮点：**  
- 详细解释了贪心策略的合理性，并提供了清晰的代码实现。
- 通过`f`函数计算每种情况下的最小成本，代码逻辑清晰。

**核心代码：**
```cpp
long long f(int ii){
    long long curcnt=cnt[1],res=0;
    vector<int> tmp;
    for(int i=2;i<=n;i++){
        int b=max((int)(cs[i].size()-ii+1),0);
        for(int j=0;j<b;j++){
            res+=cs[i][j];
        }
        curcnt+=b;
        for(int j=b;j<cs[i].size();j++){
            tmp.push_back(cs[i][j]);
        }
    }
    sort(tmp.begin(),tmp.end());
    for(int i=0;i<ii-curcnt;i++){
        res+=tmp[i];
    }
    return res;
}
```

#### 3. 作者：lylcpp (赞：2)  
**星级：4星**  
**关键亮点：**  
- 代码简洁，逻辑清晰，使用了`vector`和`sort`来优化材料选择。
- 通过`get`函数计算最小成本，代码结构清晰。

**核心代码：**
```cpp
int get(int x) {
    int cur = cnt[1];
    int res = 0;
    vector<int> tmp;
    for (int i = 2; i <= n; i++) {
        int ned = max((int)(g[i].size() - x + 1), (int)0);
        for (int j = 0; j < ned; j++)
            res += g[i][j];
        cur += ned;
        for (int j = ned; j < g[i].size(); j++)
            tmp.push_back(g[i][j]);
    }
    sort(tmp.begin(), tmp.end());
    for (int i = 0; i < x - cur; i++)
        res += (int)tmp[i];
    return res;
}
```

### 最优关键思路或技巧
1. **贪心策略**：优先选择成本最低的材料进行转移，确保总成本最小。
2. **枚举与排序**：通过枚举第1种武器的最终材料数量，并结合排序，高效选择最优解。
3. **数据结构**：使用`vector`存储每种武器的强化材料，并按成本排序，便于后续选择。

### 可拓展之处
- 类似的问题可以扩展到其他资源分配场景，如任务调度、资源优化等。
- 可以结合动态规划或其他优化算法，进一步优化时间复杂度。

### 推荐题目
1. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 贪心与背包问题的结合。
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心策略的应用。
3. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223) - 贪心与排序的结合。

---
处理用时：34.81秒
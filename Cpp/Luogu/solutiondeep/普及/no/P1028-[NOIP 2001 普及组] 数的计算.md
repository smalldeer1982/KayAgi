# 题目信息

# [NOIP 2001 普及组] 数的计算

## 题目描述

给出正整数 $n$，要求按如下方式构造数列：

1. 只有一个数 $n$ 的数列是一个合法的数列。
2. 在一个合法的数列的末尾加入一个正整数，但是这个正整数不能超过该数列最后一项的一半，可以得到一个新的合法数列。

请你求出，一共有多少个合法的数列。两个合法数列 $a, b$ 不同当且仅当两数列长度不同或存在一个正整数 $i \leq |a|$，使得 $a_i \neq b_i$。

## 说明/提示

### 样例 1 解释

满足条件的数列为：
- $6$
- $6, 1$
- $6, 2$
- $6, 3$
- $6, 2, 1$
- $6, 3, 1$

### 数据规模与约定

对于全部的测试点，保证 $1 \leq n \leq 10^3$。

### 说明

本题数据来源是 NOIP 2001 普及组第一题，但是原题的题面描述和数据不符，故对题面进行了修改，使之符合数据。原题面如下，谨供参考：

> 我们要求找出具有下列性质数的个数（包含输入的正整数 $n$）。
>
> 先输入一个正整数 $n$（$n \le 1000$），然后对此正整数按照如下方法进行处理：
>
> 1. 不作任何处理；
> 2. 在它的左边拼接一个正整数，但该正整数不能超过原数，或者是上一个被拼接的数的一半；
> 3. 加上数后，继续按此规则进行处理，直到不能再加正整数为止。

感谢 @[dbxxx](/user/120868) 对本题情况的反馈，原题面的问题见[本贴](https://www.luogu.com.cn/discuss/526184)。

## 样例 #1

### 输入

```
6
```

### 输出

```
6
```

# AI分析结果

### 算法分类
递推

### 综合分析与结论
本题的核心是通过递推关系求解合法数列的个数。所有题解都采用了递推的思路，但在优化程度上有所不同。shinzanmono和Lawrenceling的题解通过引入前缀和数组将时间复杂度优化到O(n)，而glass_goldfish的题解则使用了O(n^2)的朴素递推方法。前两者的优化思路更为高效，代码实现也更为简洁。

### 所选高星题解
1. **作者：shinzanmono (5星)**
   - **关键亮点**：通过引入前缀和数组g[i]来优化递推过程，将时间复杂度从O(n^2)降低到O(n)，代码简洁且高效。
   - **核心代码**：
     ```cpp
     for(int i=2;i<=n;i++)f[i]=g[i/2]+1,g[i]=g[i-1]+f[i];
     ```
   - **个人心得**：通过前缀和数组的引入，避免了重复计算，显著提升了算法效率。

2. **作者：Lawrenceling (4星)**
   - **关键亮点**：同样使用前缀和数组s[i]来优化递推，代码清晰易懂，时间复杂度为O(n)。
   - **核心代码**：
     ```cpp
     for(int i=2;i<=n;++i)
     {
         a[i]=s[i/2]+1;
         s[i]=s[i-1]+a[i];
     }
     ```
   - **个人心得**：通过前缀和的引入，简化了递推过程，使得代码更加简洁。

### 最优关键思路或技巧
- **前缀和优化**：通过引入前缀和数组，避免了在递推过程中重复计算，将时间复杂度从O(n^2)优化到O(n)。
- **递推关系**：利用递推关系f[i] = g[i/2] + 1，其中g[i]是f[1]到f[i]的前缀和，简化了计算过程。

### 可拓展之处
- **类似递推问题**：这种通过前缀和优化递推的思路可以应用于其他类似的递推问题，如斐波那契数列的优化计算、组合数的递推计算等。
- **动态规划优化**：在动态规划问题中，前缀和也常用于优化状态转移方程，减少重复计算。

### 推荐题目
1. [P1044 栈](https://www.luogu.com.cn/problem/P1044)
2. [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)
3. [P1057 传球游戏](https://www.luogu.com.cn/problem/P1057)

这些题目都涉及到递推或动态规划的思想，通过前缀和或其他优化手段可以提升算法效率。

---
处理用时：19.18秒
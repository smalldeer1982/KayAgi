# 题目信息

# [NOIP 2003 提高组] 传染病控制

## 题目背景

本题是错题，后来被证明没有靠谱的多项式复杂度的做法。测试数据非常的水，各种玄学做法都可以通过，不代表算法正确。因此本题题目和数据仅供参考。

[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)

---

近来，一种新的传染病肆虐全球。蓬莱国也发现了零星感染者，为防止该病在蓬莱国大范围流行，该国政府决定不惜一切代价控制传染病的蔓延。不幸的是，由于人们尚未完全认识这种传染病，难以准确判别病毒携带者，更没有研制出疫苗以保护易感人群。于是，蓬莱国的疾病控制中心决定采取切断传播途径的方法控制疾病传播。经过 WHO（世界卫生组织）以及全球各国科研部门的努力，这种新兴传染病的传播途径和控制方法已经研究清楚，剩下的任务就是由你协助蓬莱国疾控中心制定一个有效的控制办法。


## 题目描述

研究表明，这种传染病的传播具有两种很特殊的性质；

第一是它的传播途径是树型的，一个人 $X$ 只可能被某个特定的人 $Y$ 感染，只要 $Y$ 不得病，或者是 $XY$ 之间的传播途径被切断，则 $X$ 就不会得病。


第二是，这种疾病的传播有周期性，在一个疾病传播周期之内，传染病将只会感染一代患者，而不会再传播给下一代。


这些性质大大减轻了蓬莱国疾病防控的压力，并且他们已经得到了国内部分易感人群的潜在传播途径图（一棵树）。但是，麻烦还没有结束。由于蓬莱国疾控中心人手不够，同时也缺乏强大的技术，以致他们在一个疾病传播周期内，只能设法切断一条传播途径，而没有被控制的传播途径就会引起更多的易感人群被感染（也就是与当前已经被感染的人有传播途径相连，且连接途径没有被切断的人群）。当不可能有健康人被感染时，疾病就中止传播。所以，蓬莱国疾控中心要制定出一个切断传播途径的顺序，以使尽量少的人被感染。


你的程序要针对给定的树，找出合适的切断顺序。



## 说明/提示

对于 $100\%$ 的数据，$1 \leq n \leq 300$。

**【题目来源】**

NOIP 2003 提高组第四题

## 样例 #1

### 输入

```
7 6
1 2
1 3
2 4
2 5
3 6
3 7
```

### 输出

```
3
```

# AI分析结果

### 算法分类
深度优先搜索 DFS

### 综合分析与结论
该题目要求在一棵树中，通过切断传播途径来最小化被感染的人数。由于数据范围较小（n ≤ 300），大多数题解采用了深度优先搜索（DFS）的策略，通过枚举每一层切断的节点来找到最优解。虽然部分题解尝试了贪心或随机化的方法，但DFS仍然是主流且有效的解法。

### 所选题解
1. **题解作者：RikoHere**  
   - **星级：4星**  
   - **关键亮点**：  
     - 通过预处理树的层次结构，简化了搜索过程。
     - 使用回溯法进行DFS，确保每次切断的子树被正确标记和恢复。
     - 代码结构清晰，模块化处理了输入、DFS和回溯逻辑。
   - **个人心得**：  
     - 强调了分模块处理的重要性，便于调试和理解。
     - 提到预处理的重要性，尤其是通过最短路算法处理边的方向问题。

2. **题解作者：基础不牢**  
   - **星级：4星**  
   - **关键亮点**：  
     - 使用结构体存储树的信息，简化了树的遍历和操作。
     - 通过标记和回溯的方式，确保每次切断的子树被正确处理。
     - 优化了搜索过程，避免了重复计算。
   - **个人心得**：  
     - 强调了树的存储方式对算法效率的影响。
     - 提到搜索过程中剪枝的重要性，尤其是在处理链状结构时。

3. **题解作者：欧鹰**  
   - **星级：4星**  
   - **关键亮点**：  
     - 通过预处理每个节点的子树大小，简化了搜索过程。
     - 使用递归打标记和回溯的方式，确保每次切断的子树被正确处理。
     - 代码结构清晰，易于理解。
   - **个人心得**：  
     - 提到搜索过程中特殊情况的处理，如链状结构和“瓶颈”结构。
     - 强调了递归打标记和回溯的重要性。

### 关键思路与技巧
1. **预处理树的层次结构**：通过DFS预处理树的层次和子树大小，简化后续的搜索过程。
2. **回溯法**：在DFS过程中，通过回溯法确保每次切断的子树被正确标记和恢复。
3. **剪枝优化**：在搜索过程中，通过剪枝减少不必要的计算，提高算法效率。

### 可拓展之处
该题目的解法可以拓展到其他树形结构的搜索问题，如最小支配集、最小覆盖集等。类似的DFS和回溯技巧也可以应用于其他图论问题。

### 推荐题目
1. [P1040 加分二叉树](https://www.luogu.com.cn/problem/P1040)
2. [P2015 二叉苹果树](https://www.luogu.com.cn/problem/P2015)
3. [P1352 没有上司的舞会](https://www.luogu.com.cn/problem/P1352)

### 代码片段
```cpp
void dfs(int cen, int tot) {
    maxx = max(maxx, tot);
    for (int i = 0; i < cnt[cen]; ++i) {
        if (!bol[b[cen][i]]) {
            int num = clean(b[cen][i]);
            tot += num;
            dfs(cen+1, tot);
            reclean(b[cen][i]);
            tot -= num;
        }
    }
}
```
**核心实现思想**：通过DFS遍历每一层的节点，选择切断某个子树并递归到下一层，回溯时恢复子树状态，确保所有可能的切断方案都被枚举。

---
处理用时：30.16秒
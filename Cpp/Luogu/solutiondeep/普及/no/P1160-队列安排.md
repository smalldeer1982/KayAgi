# 题目信息

# 队列安排

## 题目描述

一个学校里老师要将班上 $N$ 个同学排成一列，同学被编号为 $1\sim N$，他采取如下的方法：

1. 先将 $1$ 号同学安排进队列，这时队列中只有他一个人；

2. $2\sim N$ 号同学依次入列，编号为 $i$ 的同学入列方式为：老师指定编号为 $i$ 的同学站在编号为 $1\sim(i-1)$ 中某位同学（即之前已经入列的同学）的左边或右边；

3. 从队列中去掉 $M$ 个同学，其他同学位置顺序不变。

在所有同学按照上述方法队列排列完毕后，老师想知道从左到右所有同学的编号。

## 说明/提示

**【样例解释】**

将同学 $2$ 插入至同学 $1$ 左边，此时队列为：

`2 1`

将同学 $3$ 插入至同学 $2$ 右边，此时队列为：

`2 3 1`  

将同学 $4$ 插入至同学 $1$ 左边，此时队列为：

`2 3 4 1`  

将同学 $3$ 从队列中移出，此时队列为：

`2 4 1`  

同学 $3$ 已经不在队列中，忽略最后一条指令

最终队列：

`2 4 1`  

**【数据范围】**

对于 $20\%$ 的数据，$1\leq N\leq 10$。

对于 $40\%$ 的数据，$1\leq N\leq 1000$。

对于 $100\%$ 的数据，$1<M\leq N\leq 10^5$。


## 样例 #1

### 输入

```
4
1 0
2 1
1 0
2
3
3```

### 输出

```
2 4 1```

# AI分析结果

### 算法分类
队列、模拟

### 综合分析与结论
该题目要求模拟一个队列的插入和删除操作，核心是通过双向链表或数组模拟链表来实现。题解中大部分使用了双向链表的思想，通过维护每个节点的左右指针来快速进行插入和删除操作。部分题解还使用了标记数组来记录被删除的节点，避免重复删除。

### 所选高星题解
1. **题解作者：BT狸——Frozen**  
   - **星级：5星**  
   - **关键亮点**：通过结构体维护每个节点的左右指针，详细解释了插入和删除的步骤，并使用了标记数组来记录被删除的节点，避免重复删除。代码清晰，注释详细，适合初学者理解。
   - **个人心得**：作者提到最初尝试用数组模拟链表，但发现时间复杂度太高，最终选择了双向链表，并通过图示详细解释了每一步的操作。
   - **核心代码**：
     ```cpp
     struct T{
         int l,r;        //每个同学的“左右手” 
         int d;          //表示同学是否输出 
     }t[mx]={0};
     void add(int i,int k,int f) {
         if(f==1) {  //右 
             t[k].r=t[i].r;
             t[k].l=i; 
             t[i].r=k;
             t[t[k].r].l=k;
         } else {    //左
             t[k].r=i;
             t[k].l=t[i].l;
             t[i].l=k;
             t[t[k].l].r=k;
         }
     }
     ```

2. **题解作者：Orina_zju**  
   - **星级：4星**  
   - **关键亮点**：使用了C++ STL中的`std::list`来实现双向链表，简化了代码实现。通过迭代器进行插入和删除操作，代码简洁且高效。
   - **核心代码**：
     ```cpp
     list<int> myList;
     myList.push_front(1);
     myList.insert(it, 3);
     ```

3. **题解作者：夜刀神十香ღ**  
   - **星级：4星**  
   - **关键亮点**：通过数组模拟双向链表，代码简洁且易于理解。作者详细解释了插入和删除的操作步骤，并使用了标记数组来记录被删除的节点。
   - **核心代码**：
     ```cpp
     int a[100010][3]; //a[i][2]表示学号为i的同学右边同学的学号
     if(y==0) { 
         a[a[x][3]][2]=i; a[i][2]=x;
         a[i][3]=a[x][3]; a[x][3]=i;
     }
     ```

### 最优关键思路或技巧
1. **双向链表的应用**：通过维护每个节点的左右指针，可以快速进行插入和删除操作，时间复杂度为O(1)。
2. **标记数组的使用**：通过标记数组记录被删除的节点，避免重复删除，简化了删除操作的实现。
3. **STL的灵活运用**：使用`std::list`可以简化双向链表的实现，减少代码量。

### 可拓展之处
1. **类似题目**：可以拓展到其他需要频繁插入和删除操作的场景，如LRU缓存、任务调度等。
2. **数据结构优化**：可以考虑使用其他数据结构如平衡树或跳表来进一步优化插入和删除操作的时间复杂度。

### 推荐题目
1. [P3378 【模板】堆](https://www.luogu.com.cn/problem/P3378) - 考察堆的基本操作，与队列的插入和删除类似。
2. [P3379 【模板】最近公共祖先（LCA）](https://www.luogu.com.cn/problem/P3379) - 考察树的遍历和路径查询，与链表的遍历类似。
3. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383) - 考察筛法的实现，与标记数组的使用类似。

---
处理用时：37.06秒
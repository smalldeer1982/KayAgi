# 题目信息

# 蠕虫游戏

## 题目描述

蠕虫是一个古老的电脑游戏，它有许多版本。但所有版本都有一个共同的规则：操纵一条蠕虫在屏幕上转圈，并试着去避免撞到自己或障碍物。

这里我们将模拟一个简单的版本。游戏将在 $50 \times 50$ 的棋盘上进行，棋盘的左上角为 $(1,1)$，蠕虫在初始时是一串 $20$ 个相连的方格。所谓相连是指方格在水平或垂直方向上相接。蠕虫开始时是水平地伸展开的，从 $(25,11)$ 到 $(25,30)$。其中 $(25,30)$ 是它的头。蠕虫只能向东 $\verb!E!$、西 $\verb!W!$、南 $\verb!S!$、北 $\verb!N!$ 四个方向移动，但不能向自己移动，因此在开始时向西 $\verb!W!$ 是不允许的。每次移动时，蠕虫向给定的方向移动，一次只移一格，并且保持它的长度不变。因此只有蠕虫的头和尾所占据的方格在移动一步后被改变。注意：蠕虫的头能移动到虫尾刚刚让出的空格。

你将被给定一系列移动指令并模拟虫的移动，直到蠕虫撞上了自己，或者蠕虫越出了棋盘，或者蠕虫成功地完成了这些指令。在前两种情况下你应当忽略剩下的指令。

## 样例 #1

### 输入

```
18 
NWWWWWWWWWWSESSSWS 
20 
SSSWWNENNNNNWWWWSSSS 
30 
EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 
13 
SWWWWWWWWWNEE 
0```

### 输出

```
The worm successfully made all 18 moves. 
The worm ran into itself on move 9. 
The worm ran off the board on move 21. 
The worm successfully made all 13 moves.```

# AI分析结果



### 算法分类
**模拟**

---

### 题解分析与结论
题目核心是模拟蠕虫移动并处理碰撞检测。各题解均采用模拟法，但实现方式不同：

#### 关键思路对比
1. **身体存储方式**：主流方法为数组（记录每个身体节点坐标）或队列（动态更新头部和尾部）。
2. **碰撞检测**：在移动头部后检查新坐标是否与身体重叠或越界。
3. **移动处理**：更新头部坐标后，删除尾部坐标（长度固定），避免重复。

#### 最优思路总结
**队列/数组管理身体**：每次移动仅更新头部并删除尾部，通过标记数组或遍历检查碰撞。队列实现更简洁（如K2sen题解用双端队列直接管理头尾）。

---

### 高星题解推荐

#### 1. Augen_stern [★★★★☆]
- **亮点**：使用数组记录身体坐标，通过方向数组处理移动，清晰处理越界和自撞逻辑。
- **关键代码**：
  ```cpp
  // 移动处理
  cnt++;
  headx[cnt] = headx[cnt-1] + dx[f];
  heady[cnt] = heady[cnt-1] + dy[f];
  // 更新尾部并检查碰撞
  map[tailx][taily] = 0;
  if(map[headx[cnt]][heady[cnt]] == 1) ... // 自撞检测
  ```

#### 2. 0nullptr [★★★★☆]
- **亮点**：结构体数组存储身体，移动时交换坐标，直观检查头部与身体重叠。
- **关键代码**：
  ```cpp
  void go(int x) {
    int last_x = body[1].x, last_y = body[1].y;
    body[1].x += step[x][0]; // 移动头
    for (int i = 2; i <= 20; i++) {
      swap(last_x, body[i].x); // 更新身体
      if (body[i]与头重叠) ... // 碰撞检测
    }
  }
  ```

#### 3. K2sen [★★★★☆]
- **亮点**：双端队列直接管理头尾，通过队列长度固定自动处理尾部删除。
- **关键代码**：
  ```cpp
  deque<node> q;
  void yidong(char opt) {
    q.pop_back(); // 删除尾
    node fr = q.front(); fr移动方向; // 新头
    q.push_front(fr); // 插入新头
  }
  ```

---

### 相似题目推荐
1. [P2580 错误的算法](https://www.luogu.com.cn/problem/P2580) - 模拟与状态管理。
2. [P1120 小木棍](https://www.luogu.com.cn/problem/P1120) - 移动路径与剪枝。
3. [P1514 引水入城](https://www.luogu.com.cn/problem/P1514) - 动态模拟覆盖区域。

---

### 调试心得摘录
- **初始方向处理**：Augen_stern提醒注意初始坐标系的定义（x为纵坐标）。
- **边界条件**：sxyugao提到`bug[0].x>49`写成`50`导致错误，强调边界需仔细验证。
- **碰撞顺序**：0nullptr指出需先移动身体再检查碰撞，避免误判尾部。

---
处理用时：45.48秒
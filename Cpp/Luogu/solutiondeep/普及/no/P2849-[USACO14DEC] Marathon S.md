# 题目信息

# [USACO14DEC] Marathon S

## 题目描述

由于对他的奶牛的健康状况不佳而感到不满，牧场主约翰让它们参加各种各样的体育健身活动。最让他感到自豪的奶牛是 Bessie，她将参加约翰牧场附近城市里的马拉松比赛！

马拉松比赛有 $N$ 个检查点 $(3\leq N\leq 500)$ ，需要按顺序访问。检查点 $1$ 是起点，检查点 $N$ 是终点。Bessie 应该按顺序一一访问所有的这些检查点，但由于她是一头懒惰的牛（懒惰竟然还选择跑马拉松！），于是她决定跳过 $K(K<N)$ 个检查点以缩小她的赛程。但她不能跳过第 $1$ 个和第 $N$ 个检查点，因为这样太明显了。

请你帮助 Bessie 计算出跳过中间的 $K$ 个检查点后她最少要跑多少距离。

注意：由于街道是网格状的，我们用坐标来表示点的位置。但是 $(x_1,y_1),(x_2,y_2)$ 两点间的距离应为 $|x_1-x_2|+|y_1-y_2|$，这种测量距离的方法被称为“曼哈顿”距离，这是因为在市中心的网格路中，你可以沿平行于 $x$ 轴或 $y$ 轴的方向走，但不能沿直线到达。

## 样例 #1

### 输入

```
5 2
0 0
8 3
1 1
10 -5
2 2```

### 输出

```
4```

# AI分析结果



### 算法分类：动态规划

---

### 题解综合分析与结论

所有题解均采用动态规划（DP）思路，核心状态定义为 **`f[i][j]` 表示到达第 `i` 个检查点时跳过 `j` 个检查点的最短距离**。转移时枚举从前面某个检查点跳跃过来时跳过的中间点数量，时间复杂度为 `O(n^3)`。部分题解尝试了分层图最短路，但效率与代码简洁性不如 DP。

---

### 高分题解推荐

#### 1. **题解作者：ezioixx130（4星）**
- **关键亮点**：代码简洁，状态转移方程清晰，直接体现核心思路。
- **核心代码**：
  ```cpp
  for(int i=2;i<=n;++i)
      for(int j=0;j<=min(i-1,k);++j)
          for(int l=0;l<=j;++l)
              f[i][j] = min(f[i][j], f[i-l-1][j-l] + dis(i,i-l-1));
  ```
  **实现思想**：三重循环分别枚举当前检查点、已跳过的点数和跳跃步长，通过逐步累加曼哈顿距离更新状态。

#### 2. **题解作者：linyinuo2008（4星）**
- **关键亮点**：详细注释与状态转移解释，适合新手理解。
- **个人心得**：强调必须按顺序访问点，否则问题复杂度会大幅增加。

#### 3. **题解作者：Del_Your_Heart（4星）**
- **关键亮点**：对比暴力、随机化与 DP 方法，突出 DP 优越性。
- **代码亮点**：
  ```cpp
  for(int i=1;i<=n;++i)
      for(int j=0;j<=k;++j)
          for(int s=0;s<=k && i+s+1<=n;++s)
              f[i+s+1][j+s] = min(f[i+s+1][j+s], f[i][j] + dis(i,i+s+1));
  ```

---

### 最优思路总结

**动态规划状态设计**：
- **状态定义**：`f[i][j]` 表示到第 `i` 个检查点且跳过 `j` 个点的最短距离。
- **转移方程**：`f[i][j] = min(f[i][j], f[i-l-1][j-l] + dis(i, i-l-1))`，其中 `l` 表示从 `i-l-1` 直接跳到 `i` 时跳过的点数。
- **初始化**：`f[1][0] = 0`，其余设为极大值。

**关键优化**：通过三重循环暴力枚举所有可能的跳跃方案，但利用检查点顺序性避免冗余计算。

---

### 拓展与同类题推荐

1. **[P1433 吃奶酪](https://www.luogu.com.cn/problem/P1433)**：状态压缩 DP 处理路径选择。
2. **[P1441 砝码称重](https://www.luogu.com.cn/problem/P1441)**：通过删点构造最优子集。
3. **[P2217 [HAOI2007] 分割矩阵](https://www.luogu.com.cn/problem/P2217)**：动态规划处理分段最优问题。

---
处理用时：49.44秒
# 题目信息

# [USACO04OPEN] Cave Cows 3

## 题目描述

约翰的 $ N $ ( $ 1 \leq N \leq 50000 $ )只牛在一个黑魃魃的洞里探险，他们只能通过叫声交流。

两只牛之间的曼哈顿距离决定了声音传播的时间。即牛1与牛2交流，需要的时间为
 $ |x_1-x_2|+|y_1-y_2| $ 。其中 $ -10^6 \leq x_1,x_2,y_1,y_2 \leq 10^6 $ 。

那任意一对牛之间交流时间的最大值为多少？

## 说明/提示

样例解释：

$ (2,7) $ 和 $ (8,1) $ 两点间的距离最大，为12。

## 样例 #1

### 输入

```
5
1 1
3 5
2 7
8 1
4 4```

### 输出

```
12```

# AI分析结果



**算法分类**：数学

**分析与结论**：  
本题需高效求出最大曼哈顿距离。核心思路是将曼哈顿距离拆解为两种形式（`x+y`与`x-y`）的极值差，或通过坐标系转换（曼哈顿→切比雪夫）简化计算。这些方法将时间复杂度优化至线性。

---

**精选题解**：  
1. **Siyuan（★★★★★）**  
   - **关键亮点**：通过分类讨论将曼哈顿距离拆分为`x+y`与`x-y`的极值差，代码简洁高效，复杂度O(n)。  
   - **核心代码**：  
     ```cpp
     int a=-inf, b=inf, c=-inf, d=inf;
     for (int i=1; i<=n; i++) {
         scanf("%d%d", &x, &y);
         a = max(a, x+y);  b = min(b, x+y);
         c = max(c, x-y);  d = min(d, x-y);
     }
     printf("%d\n", max(a-b, c-d));
     ```

2. **mrclr（★★★★☆）**  
   - **关键亮点**：利用曼哈顿→切比雪夫坐标转换，将问题转化为求坐标轴极值差，直观易懂。  
   - **核心代码**：  
     ```cpp
     for (int i=1; i<=n; i++) {
         x = read(), y = read();
         minx = min(x+y, minx); maxx = max(x+y, maxx);
         miny = min(x-y, miny); maxy = max(x-y, maxy);
     }
     printf("%d", max(maxx - minx, maxy - miny));
     ```

3. **Heartlessly（★★★★☆）**  
   - **关键亮点**：详细图解四种曼哈顿距离情况，双解法对比，强化理解。  
   - **代码片段**与Siyuan解法类似，但提供两种实现选择。

---

**最优技巧**：  
将曼哈顿距离转换为`x+y`和`x-y`的极值差，或通过坐标系变换（曼哈顿→切比雪夫）将二维问题拆分为独立的一维极值计算。

**拓展应用**：  
- **类似题目**：P5099（坐标极值）、P3964（曼哈顿距离性质）、CF785C（极值处理）。  
- **套路**：当涉及曼哈顿距离时，优先考虑坐标变换或拆分绝对值，避免暴力枚举。

---

**推荐题目**：  
1. [P5099 [USACO04OPEN] Cave Cows 4](https://www.luogu.com.cn/problem/P5099)  
2. [P3964 [TJOI2013]松鼠聚会](https://www.luogu.com.cn/problem/P3964)  
3. [CF785C Anton and Fairy Tale](https://codeforces.com/problemset/problem/785/C)（极值思维）

---
处理用时：41.39秒
# 题目信息

# [NOI1997] 最佳游览

## 题目描述

有一座旅游城，它的街道成网格状（如图）．其中东西向的街道是“风景线"、两旁分布着许多景观：南北向的街道都是"林萌道"，两旁没有任何建筑物。由于游客众多，" 风景线”被规定为单行道，游客在风景线上只能从西走到东，林荫道上则可以任意行走。

一名游客将到这座旅游城旅游。他根据自己对景观的喜好给所有的风景线打了分，分值是从 $-100$ 到 $+100$ 的整数，分值越大表示我们的旅游者越喜欢这条风景线上的景致。显然这位游客不可能给这座旅游城的所有风景线都打负分。

![](https://cdn.luogu.com.cn/upload/image_hosting/62qfloek.png)

游客可以从旅游城的任一个十字路口开始游览，在任一个十字路口结束游览。我们的旅游者希望一路上游览的所有风景线的分值之和能够尽可能地大。请你写一个程序，帮助这位游客寻找一条最佳的游览路线。


## 说明/提示

**样例解释**

路径为 $17 \to -3 \to 34 \to 34$，答案为 $82$。

## 样例 #1

### 输入

```
3 6
-50 -47 -36 -30 -23
17 -19 34 -13 -8
-42 -3 -43 34 -45```

### 输出

```
82```

# AI分析结果



**算法分类**：动态规划

---

### 综合分析与结论
题目核心是将二维网格按列取最大值后转化为一维数组，再求最大子段和。所有题解均采用“列取最大值 + 动态规划”两步法，核心思路一致。差异点在于初始化和转移方程细节处理。

---

### 精选题解与评分

#### 1. Gaode_Sean（★★★★☆）
**关键亮点**：
- 代码简洁，正确处理每列初始化为负无穷。
- 动态规划转移方程清晰：`dp[i] = max(mx, dp[i-1]) + b[i]`，其中 `mx` 隐含维护了截止当前的最大值。
```cpp
// 列最大值初始化
for(int i=1;i<=m;i++) b[i]=-1e9;
// DP转移
for(int i=1;i<=m;i++){
    dp[i]=max(mx,dp[i-1])+b[i];
    ans=max(ans,dp[i]);
}
```

#### 2. WZKQWQ（★★★★☆）
**关键亮点**：
- 特判处理异常数据（尽管非通用解法）。
- 直接复用`b[]`数组存储列最大值，节省空间。
```cpp
// 列最大值计算
for(int i = 1,o; i <= n; i++)
    for(int j = 1; j <= m; j++) {
        scanf("%d",&o);
        b[j] = max(b[j],o);
    }
// DP转移
f[1] = b[1];
for(int i = 2; i <= m; i++) {
    f[i] = max(f[i - 1] + b[i], b[i]);
    ans = max(ans,f[i]);
}
```

#### 3. 一只书虫仔（★★★★☆）
**关键亮点**：
- 独立函数封装，代码模块化。
- 显式遍历求最终答案，逻辑清晰。
```cpp
// 列最大值处理
for (int i = 1; i <= m; i++)
    for (int j = 1; j <= n; j++) {
        int a;
        scanf("%d", &a);
        sum[j] = max(sum[j], a);
    }
// DP转移
dp[1] = sum[1];
for (int i = 2; i <= n; i++)
    dp[i] = max(dp[i - 1], 0) + sum[i];
```

---

### 最优思路提炼
1. **降维处理**：将二维矩阵按列取最大值，转化为一维数组。
2. **动态规划**：应用最大子段和模板，状态转移方程为 `dp[i] = max(dp[i-1], 0) + a[i]`，其中 `a[i]` 为列最大值。

---

### 拓展与举一反三
- **类似问题**：最大子段和（洛谷 P1115）、二维降维后应用其他算法（如前缀和、滑动窗口）。
- **思维训练**：将复杂路径问题转化为经典子问题（如本题转化为最大子段和）。

---

### 推荐相似题目
1. [P1115 最大子段和](https://www.luogu.com.cn/problem/P1115)
2. [P1216 数字三角形](https://www.luogu.com.cn/problem/P1216)
3. [P1719 最大加权矩形](https://www.luogu.com.cn/problem/P1719)

---
处理用时：50.75秒
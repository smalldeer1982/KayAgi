# 题目信息

# [SEERC 2019] Graph and Cycles

## 题目描述

有一个 $n$ 个点的无向有边权的完全图，其中 $n$ 是奇数。

定义一个大小为 $k$ 的*环边组*为一个边构成的数组 $[e_1, e_2, \dots, e_k]$，且具有以下性质：

- $k$ 大于 $1$。
- 对于任意 $[1, k]$ 中的整数 $i$，边 $e_i$ 与 $e_{i-1}$ 和 $e_{i+1}$ 都恰好有一个相同的端点（规定 $e_0=e_k, e_{k+1}=e_1$）。

显然一个环边组中的边构成了图上的一个环。

定义一个参数为两条边 $e_1, e_2$ 的函数 $f(e_1, e_2)$，其函数值为两条边中边权的较大值。

定义一个环边组 $C=[e_1, e_2, \dots, e_k]$ 的*价值*为对于任意 $[1, k]$ 中的整数 $i$，$f(e_i, e_{i+1})$ 的值之和（规定 $e_{k+1}=e_1$）。

定义一个图的*环分割*为一组无交集的环边组，且这些环边组的并包含了图上所有的边。定义一个图的环分割的*价值*为其中所有环边组的价值之和。

一个图可能存在多组环分割。给定一个图，你的任务是找到价值最小的环分割并输出该最小价值。

## 说明/提示

以下样例解释中，边以输入顺序编号，$e_i$ 代表输入顺序中的第 $i$ 条边。

第一个样例中，唯一的环分割为 $S=\{ [e_1, e_2, e_3] \}$。$f(e_1, e_2)+f(e_2,e_3)+f(e_3,e_1)=1+1+1=3$。

第二个样例中，最优的环分割为 $S=\{ [e_3, e_8, e_9], [e_2,e_4,e_7,e_{10},e_5,e_1,e_6] \}$。环边组 $[e_3,e_8,e_9]$ 的价值为 $12$，$[e_2,e_4,e_7,e_{10},e_5,e_1,e_6]$ 的价值为 $23$，因此环分割的价值为 $35$。

## 样例 #1

### 输入

```
3
1 2 1
2 3 1
3 1 1```

### 输出

```
3```

## 样例 #2

### 输入

```
5
4 5 4
1 3 4
1 2 4
3 2 3
3 5 2
1 4 3
4 2 2
1 5 4
5 2 4
3 4 2```

### 输出

```
35```

# AI分析结果



**算法分类**  
贪心

---

**分析与结论**  
题目核心在于构造价值最小的环分割。由于图是完全图且顶点数为奇数，每个顶点有偶数条边。关键思路是将每个顶点的边按权值排序后，相邻边两两配对，每对取较大值求和。贪心策略的正确性源于排序后相邻配对能保证总和最小。

---

**精选题解**  

1. **SAMSHAWCRAFT（5星）**  
   - 关键亮点：详细推导了贪心策略的正确性，将问题转化为排序后的最优配对问题。  
   - 代码实现：对每个顶点的边排序后，取排序后的奇数索引（步长2）元素求和。  
   ```cpp
   for(int cx=1;cx<=n;++cx)
     std::sort(edges[cx].begin(),edges[cx].end());
   for(int cx=1;cx<=n;++cx){
     for(int cy=1;cy!=n;cy+=2)
       ans+=edges[cx][cy];
   }
   ```

2. **xht_37（4星）**  
   - 关键亮点：代码简洁，明确体现贪心思路。  
   - 代码实现：与 SAMSHAWCRAFT 逻辑一致，直接遍历排序后的边取奇数位。  
   ```cpp
   for(int i=1; i<=n; i++) {
     std::sort(G[i].begin(), G[i].end());
   }
   for(int i=1; i<=n; i++) {
     for(int j=1; j < n; j += 2) {
       ans += G[i][j];
     }
   }
   ```

3. **Andy1101（4星）**  
   - 关键亮点：代码清晰，注释明确。  
   - 代码实现：与上述解法一致，突出排序后贪心求和。  
   ```cpp
   for(int i=1; i<=n; i++) sort(adj[i].begin(), adj[i].end());
   for(int i=1; i<=n; i++) {
     for(int j=1; j < n; j += 2) {
       sum += adj[i][j];
     }
   }
   ```

---

**最优策略总结**  
对每个顶点的边进行升序排序，每两条相邻边为一组，取较大的边权累加。此贪心策略确保每组贡献值最小，总和最优。

---

**同类题目推荐**  
1. [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)（贪心配对）  
2. [P4995 跳跳](https://www.luogu.com.cn/problem/P4995)（排序后交替取极值）  
3. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)（贪心排序优化等待时间）  

---

**心得摘录**  
- SAMSHAWCRAFT：通过分析顶点度数奇偶性，发现边必须两两配对，从而将问题转化为排序后取较大值的贪心问题。  
- VioletIsMyLove：虽然代码正确，但未明确解释链表处理与排序的关系，可能导致读者误解。

---
处理用时：188.90秒
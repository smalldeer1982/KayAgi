# 题目信息

# [IOI 2015] boxes

## 题目描述

IOI2015 开幕式正在进行最后一个环节。按计划在开幕式期间，每个代表队都将收到由主办方发放的一个装有纪念品的盒子。然而所有志愿者都被精彩的开幕式所吸引，除 Aman 外其他人完全忘记了发放纪念品这件事。Aman 是一位热情的志愿者，为使得 IOI 尽量圆满，他要用最短的时间将所有纪念品发放出去。

开幕式的场地是一个圆环，被分为 $L$个完全相等的区域，这些区域的编号依次为 $0$ 到 $L-1$，也就是说，对于$0\le 
 i\le L-2$,区域 $i$ 与区域 $i+1$ 相邻，且区域 $L-1$ 与区域 $0$ 相邻。场地上共有 $N$ 个代表队，每队坐在上面的一个区域上，每个区域可以包含任意多个代表队，也可以为空。

一共有 $N$ 个相同的纪念品。开始，Aman 和所有纪念品都在区域 $0$。Aman 应该给每队一个纪念品，并且在发放完最后一个纪念品后他必须回到区域 $0$。注意，有些队可能坐在区域 $0$。

在任意时刻，Aman 只能够携带至多 $K$ 个纪念品。Aman 必须从区域 $0$ 取走这些纪念品，且取纪念品不需要时间。纪念品一旦从区域 $0$ 被取走后，Aman 只能将其发放给某个代表队或者随身携带。无论何时，Aman 携带一个或更多的纪念品到达一个这样的区域，该区域有一个代表队尚未收到纪念品，Aman 便可将他携带的一个纪念品发给这个代表队。这种发放也在瞬间完成。他所花的时间都消耗在区域之间的移动上。无论携带多少纪念品，Aman 都需要 $1$ 秒钟从一个区域移动到其相邻的区域（可以顺时针移动也可以逆时针移动）。

你的任务是计算出 Aman 发放完所有纪念品并返回到他的最初区域所需要的最短时间（秒数）。

## 说明/提示

对于 $100\%$ 的数据，$1\le N\le 10^7$，$1\le K\le N$，$1\le L\le 10^9$。

## 样例 #1

### 输入

```
3 2 8
1 2 5
```

### 输出

```
10
```

# AI分析结果



**算法分类**：贪心

**综合分析与结论**  
本题关键在于将环形路径分解为左右两部分处理，并考虑一次环绕整个环的可能性。贪心策略下，每次携带最多K个纪念品，按最远点计算往返时间。通过预处理左右部分的前缀和数组，快速计算不同分割方案的总时间，最终枚举可能的最优解。

---

**精选题解**  
1. **JingchenBian**（⭐⭐⭐⭐⭐）  
   - **关键亮点**：通过将环拆分为左右两部分，利用前缀和数组快速计算最优解，并巧妙处理绕圈情况。  
   - **代码核心**：
     ```cpp
     for (int i=1;i<=tp1;i++) 
         f1[i]=(i<=K?st1[i]:st1[i]+f1[i-K];
     for (int i=1;i<=tp2;i++) 
         f2[i]=(i<=K?st2[i]:st2[i]+f2[i-K];
     int ans=(f1[tp1]+f2[tp2])<<1;
     for (int i=tp1-K;i<=tp1;i++) 
         ans=min(ans,((f1[i]+f2[max(0,n-K-i)])<<1)+L);
     ```
     - 预处理左右前缀和，每组K个点取最远距离累加。
     - 枚举分割点，比较绕圈与不绕圈的总时间。

2. **封禁用户**（⭐⭐⭐⭐）  
   - **关键亮点**：对称处理右半部分点，简化绕圈计算逻辑，代码简洁高效。  
   - **个人心得**：注意右半部分需要逆序处理，确保最远点优先计算。

3. **Hanrui1206**（⭐⭐⭐⭐）  
   - **关键亮点**：动态规划思想结合贪心策略，通过f和g数组分别处理左右路径，枚举分割点优化最终结果。

---

**最优关键思路**  
1. **环形拆分**：将环按中点拆分为左右两半，右半点转换为等效距离（L-p）。  
2. **前缀和优化**：对左右部分分别计算前缀和数组，每组K个点取最远距离，总时间为所有最远点之和的两倍。  
3. **绕圈枚举**：当中间某段K个点跨过环中点时，绕圈可能更优，此时总时间需额外加L。

---

**拓展与相似题目**  
1. **P1090 [NOIP2004 提高组] 合并果子**（贪心+优先队列）  
2. **P2878 [USACO07JAN] Protecting the Flowers S**（贪心排序+时间计算）  
3. **P5019 [NOIP2018 提高组] 铺设道路**（贪心差分优化）

---
处理用时：65.79秒
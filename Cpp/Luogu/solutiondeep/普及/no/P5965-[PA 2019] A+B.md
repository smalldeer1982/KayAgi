# 题目信息

# [PA 2019] A+B

## 题目描述

在列竖式计算两个十进制数的和的时候，人们可能会错算成这样：

![](https://cdn.luogu.com.cn/upload/image_hosting/g0xa2tjn.png)

在图里的左边，$248+208$ 被错算成了 $4416$。

给定正整数 $n$，问有多少对非负整数 $a,b$ 满足 $a+b$ 会被错算成 $n$。

请注意 $a$ 可以等于 $b$，且 $a=1,b=2$ 和 $a=2,b=1$ 是两种不同的方案。

## 说明/提示

对于 $100\%$ 的数据，$1\le n<10^{18}$。

## 样例 #1

### 输入

```
112```

### 输出

```
50```

# AI分析结果



**算法分类**: 动态规划

---

### 题解综合分析
题目核心是模拟不进位加法的错算逻辑，转化为数位分解问题。所有题解均采用动态规划思路，通过状态转移处理两种可能情况：
1. **单独处理当前位**：每位数字由两个数相加得到，方案数为 `a[i]+1`（0~a[i] 的取值组合）。
2. **合并处理前一位**：当 `a[i-1]=1` 时，可能存在进位被忽略的情况，需额外考虑两位合并的贡献。

---

### 高分题解推荐
#### 1. jyz666 的题解（★★★★★）
**亮点**：
- 状态转移方程清晰，分条件讨论进位合并情况。
- 代码简洁，直接处理字符串输入，初始化与循环逻辑明确。
**核心代码**：
```cpp
f[0] = 1;
for (int i=1; i<=len; i++) {
    f[i] = f[i-1] * (a[i]+1);
    if (i>=2 && a[i-1]==1)
        f[i] += f[i-2] * (9 - a[i]);
}
```
**实现思想**：
- `f[i]` 表示前 i 位的合法方案数。
- 当 `a[i-1]=1` 时，考虑前两位合并的贡献，系数为 `9 - a[i]`（覆盖进位可能范围）。

#### 2. Convergent_Series 的题解（★★★★）
**亮点**：
- 状态定义直观，强调错算本质为“新运算”。
- 代码使用字符串直接处理数位，逻辑简洁。
**核心代码**：
```cpp
dp[0] = 1;
for (int i=1; i<=ln; i++) {
    dp[i] = dp[i-1] * (a[i]+1);
    if (i>=2 && a[i-1]==1)
        dp[i] += dp[i-2] * (9 - a[i]);
}
```
**个人心得**：需注意数位索引转换，字符串从 `0` 开始对应动态规划索引 `1`。

#### 3. asdfo123 的题解（★★★★）
**亮点**：
- 强调题目实际定义了一种新运算，解释错算本质。
- 代码清晰，变量命名规范。
**核心代码**：
```cpp
f[0] = 1;
f[1] = a[1] + 1;
for (int i=2; i<=len; i++) {
    f[i] = f[i-1] * (a[i]+1);
    if (a[i-1] == 1)
        f[i] += f[i-2] * (9 - a[i]);
}
```

---

### 最优思路总结
**关键技巧**：
- **数位动态规划**：将问题分解为每一位的决策，通过状态转移合并相邻位的可能性。
- **进位合并处理**：当某位为 `1` 时，需考虑前一位实际是进位结果，从而合并两位计算贡献。
- **系数推导**：利用 `(a[i]+1)` 表示单一位的组合数，`(9 - a[i])` 表示进位合并后的合法范围。

**同类型题目推荐**：
1. [P4999 烦人的数学作业](https://www.luogu.com.cn/problem/P4999)（数位统计）
2. [P2602 数字计数](https://www.luogu.com.cn/problem/P2602)（数位动态规划）
3. [P4127 同类分布](https://www.luogu.com.cn/problem/P4127)（数位DP与模数结合）

---
处理用时：79.02秒
# 题目信息

# [PA 2014] Lustra

## 题目描述

Byteasar 公司专门外包生产带有镜子的衣柜。

刚刚举行的招标会上，有 $n$ 个工厂参加竞标。所有镜子都是长方形的，每个工厂能够制造的镜子都有其各自的最大、最小宽度和最大、最小高度。镜子不可以旋转。

如果存在某家工厂满足这样的条件：其他所有工厂能够制造的镜子，它都能够制造。那么这家工厂显然会胜出。若不存在，评判工作将会遇到麻烦。

Byteasar 想知道，是否存在某家工厂符合上述条件。

## 说明/提示

对于 $100\%$ 的数据，$1\le t\le 10$，$2\le n\le 10^5$，$1\le w_1\le w_2\le 10^9$，$1\le h_1\le h_2\le 10^9$。

## 样例 #1

### 输入

```
3
3
2 3 3 5
1 4 2 6
1 3 4 6
3
1 5 1 3
2 4 1 3
3 4 2 5
4
1 2 1 10
1 2 3 8
2 2 7 10
1 2 1 10```

### 输出

```
TAK
NIE
TAK```

# AI分析结果



### 算法分类
模拟

### 题解分析与结论
题目要求判断是否存在一个工厂的镜面尺寸范围能覆盖所有其他工厂的范围。所有题解的核心思路均围绕计算全局极值（最小宽度、最大宽度、最小高度、最大高度），并检查是否存在工厂的四个参数恰好对应这些极值。正确解法需满足以下条件：
1. 遍历所有工厂，计算全局极值。
2. 再次遍历检查是否有工厂的参数等于这四个极值。

### 高分题解（≥4星）
#### 1. Up_Xu（5星）
**关键亮点**：思路清晰，代码简洁高效。  
- 预处理所有工厂的极值，二次遍历直接判断是否存在符合条件的工厂。  
- 代码可读性强，时间复杂度O(n)，完美处理1e5规模数据。  
```cpp
int main() {
    // ... 读取数据并计算极值
    for(int i=1;i<=n;i++)
        if(w1[i]==mw1&&w2[i]==mw2&&h1[i]==mh1&&h2[i]==mh2) {
            cout<<"TAK\n";
            break;
        }
}
```

#### 2. RNBW（5星）
**关键亮点**：代码结构简洁，变量命名直观。  
- 使用分离数组存储各工厂参数，逻辑明确。  
- 极值计算与判断分离，符合直觉。  
```cpp
for(i=1;i<=n;i++)
    if(x1[i]==k&&x2[i]==l&&x3[i]==s&&x4[i]==p) f=1;
```

#### 3. Crasole（4星）
**关键亮点**：结构体存储数据，逻辑清晰。  
- 使用结构体增强代码可维护性。  
- 极值计算与判断分离，适合教学演示。  
```cpp
struct node{int x,X,y,Y;}S[N];
for(int i=1;i<=n;i++)
    if(S[i].X>=maxx&&S[i].Y>=maxy&&S[i].x<=minx&&S[i].y<=miny)
        cout<<"TAK"<<endl;
```

### 核心技巧总结
- **极值覆盖法**：通过全局极值确定覆盖范围，检查是否存在工厂参数与之完全匹配。  
- **两次遍历**：第一次计算极值，第二次验证存在性，保证逻辑正确性。  

### 拓展与同类题目
- **类似问题**：寻找能覆盖所有区间的单个区间（如二维区间覆盖）。  
- **推荐题目**：  
  1. [P2141 珠心算测验](https://www.luogu.com.cn/problem/P2141)（极值应用）  
  2. [P1909 买铅笔](https://www.luogu.com.cn/problem/P1909)（极值与覆盖判断）  
  3. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)（贪心选择最优覆盖）  

### 题解心得摘录
- **Up_Xu**：强调极值必须属于同一工厂，避免多工厂分散极值导致的错误判断。  
- **Adolfo_North**：记录极值出现位置，但实现复杂度较高，适合理解极值匹配逻辑。  
- **York佑佑**：动态更新极值时的逻辑漏洞，后续极值扩展可能导致前期判断失效。

---
处理用时：59.97秒
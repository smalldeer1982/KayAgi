# 题目信息

# [USACO07NOV] Best Cow Line S

## 题目背景

*本题和 [2007 年 12 月月赛金组同名题目](/problem/P2870) 在题意上一致，唯一的差别是数据范围。*

## 题目描述

Farmer John 打算带领 $N$（$1 \leq N \leq 2\,000$）头奶牛参加一年一度的”全美农场主大奖赛“。在这场比赛中，每个参赛者必须让他的奶牛排成一列，然后带领这些奶牛从裁判面前依此走过。

今年，竞赛委员会在接受报名时，采用了一种新的登记规则：取每头奶牛名字的首字母，按照它们在队伍中的次序排成一列。将所有队伍的名字按字典序升序排序，从而得到出场顺序。

FJ 由于事务繁忙，他希望能够尽早出场。因此他决定重排队列。

他的调整方式是这样的：每次，他从原队列的首端或尾端牵出一头奶牛，将她安排到新队列尾部。重复这一操作直到所有奶牛都插入新队列为止。

现在请你帮 FJ 算出按照上面这种方法能排出的字典序最小的队列。

## 样例 #1

### 输入

```
6
A
C
D
B
C
B```

### 输出

```
ABCBCD```

# AI分析结果



**算法分类**: 贪心

---

### 综合分析与结论
题目要求每次从字符串首尾取字符构造字典序最小的序列，核心思路是贪心选择当前更小的字符。难点在于处理首尾字符相等的情况，需深入比较内部字符直到找到可决策的位置。大多数题解采用双指针+内部循环比较的策略，时间复杂度为 $O(n^2)$，在 $n=2000$ 的数据范围内可行。后缀数组或 BFS 解法虽正确但复杂度或实现复杂度较高，非本题最优。

---

### 精选题解与评分
1. **作者：wylt**  
   **⭐️⭐️⭐️⭐️**  
   **关键亮点**:  
   - 代码简洁，逻辑清晰，直接使用双指针和内部循环处理相等情况。  
   - 输出每 80 字符换行处理自然，避免冗余循环。  
   **代码核心**:  
   ```cpp
   while(l <= r) {
       if(a[l]<a[r]) { ... } // 直接取首
       else if(a[l]>a[r]) { ... } // 直接取尾
       else { // 相等时向中间循环比较
           int ll=l, rr=r;
           while(ll<=rr && a[ll]==a[rr]) ll++, rr--;
           if(a[ll]<=a[rr]) 取首 else 取尾;
       }
   }
   ```

2. **作者：Monkey_Hunter**  
   **⭐️⭐️⭐️⭐️**  
   **关键亮点**:  
   - 使用双端队列 (`deque`) 模拟原字符串，方便首尾操作。  
   - 临时拷贝队列进行深入比较，逻辑直观。  
   **代码核心**:  
   ```cpp
   deque<char> temp = a;
   while(!a.empty() && a.front()==a.back()) {
       a.pop_front(); a.pop_back();
   }
   if(a.empty()) 取任意; // 全相同
   else 根据内部比较结果选择首或尾;
   ```

3. **作者：Exber**  
   **⭐️⭐️⭐️⭐️**  
   **个人心得**:  
   - 强调相等时不能随意选择，必须深入比较内部字符。  
   **代码核心**:  
   ```cpp
   while(tr - tl > 1 && a[tl] == a[tr]) tl++, tr--;
   if (a[tl] < a[tr]) 取首 else 取尾;
   ```

---

### 最优关键思路
**贪心+内部扩展比较**：当首尾字符相同时，向中间循环比较，直到找到第一个不同的字符，根据比较结果选择首或尾。例如字符串 `ACBDCA`，首尾均为 `A`，比较内部字符 `C` 与 `C`（继续）→ `B` 与 `D`，因 `B < D` 故选择首字符 `A`。

---

### 相似题目推荐
1. [P2870 [USACO07DEC] Best Cow Line G](https://www.luogu.com.cn/problem/P2870)（数据加强版）  
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)（贪心选择最小堆）  
3. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)（贪心构造最小数）

---
处理用时：47.29秒
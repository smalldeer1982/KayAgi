# 题目信息

# [AHOI2021初中组] 坑

## 题目背景

AHOI2021 初中组 T2

**你可以选择跳过背景部分。**

买东西的路上小雪吸了好几口雾霾，最后打了个喷嚏。恶劣的天气、压抑的氛围让小雪心情越来越差，之后倒起了苦水：

“唉！今天又被一个不靠谱的同学坑了，浪费了我好多时间。”

“期中考试还早，有什么好焦虑的呢？别卷了，正好来看看最近在蛐蛐国流行的一个游戏吧。”

小雪看了游戏来了精神：看起来好像很解压。

## 题目描述

游戏在一个左右无限延伸的数轴上进行，上面有 $n$ 只跳蚤和 $m$ 个坑，它们都可以被抽象成数轴上的一个点。

玩家每回合需要选择让所有跳蚤一起向左/向右跳一个单位长度。如果一个代表跳蚤的点与一个代表坑的点重合了，跳蚤就会掉进坑中，发出惨叫后死去。

郁闷的小雪想用最快的时间杀死所有跳蚤，请你帮小雪计算一下这个最少的回合数。

## 说明/提示

【样例 1 解释】

第一回合让所有跳蚤向右跳一步，第 2 个跳蚤进第一个坑，剩下两个跳蚤分别位于 4, 3。

下面四回合让所有跳蚤向左跳，两个跳蚤都进入第一个坑，游戏结束。


【数据范围与提示】

**提示：本题输入规模较大，请避免使用过慢的输入方式。**

- 对于 $20\%$ 的数据，保证 $1 \le n \le 20$，$1 \le m \le 300$；
- 对于另外 $20\%$ 的数据，保证 $1 \le n,m \le 300$；
- 对于另外 $20\%$ 的数据，保证 $1 \le x_i,y_i \le 2000$；
- 对于另外 $10\%$ 的数据，保证 $1 \le n,m \le 2000$；
- 对于另外 $10\%$ 的数据，保证 $m=2$；
- 对于 $100\%$ 的数据，保证 $1 \le n,m \le 2 \times 10^5$，$-10^9 \le x_i,y_i \le 10^9$。

## 样例 #1

### 输入

```
3 2
3 -1 2
0 10```

### 输出

```
5```

## 样例 #2

### 输入

```
见附加文件的 hole2.in。 ```

### 输出

```
见附加文件的 hole2.ans。```

# AI分析结果



1. **算法分类**  
   贪心、排序、二分

---

**题目分析结论**  
各题解核心思路一致：通过排序预处理跳蚤与坑的最近左右距离，按左距离排序后，倒序维护最大右距离以计算最优解。关键在于贪心策略：枚举左移次数时，右移次数取剩余跳蚤的最大右距离，总步数为两方向移动的最优组合。

---

**优质题解推荐**

### 1. 作者：meyi (官方题解) ⭐⭐⭐⭐⭐  
**关键亮点**  
- 官方标准解法，思路严谨，代码简洁高效。  
- 预处理跳蚤左右最近坑的距离，排序后利用后缀最大值优化。  
- 清晰推导充要条件，时间复杂度严格 O(n log n)。  

**代码核心实现**  
```cpp
sort(id + 1, id + 1 + n, cmp());
ll ans = INF, suf_max = 0;
for (int i = n; i >= 0; --i) {
    ans = min(ans, min(l[id[i]] + 2 * suf_max, 2 * l[id[i]] + suf_max));
    suf_max = max(suf_max, r[id[i]]);
}
```
**思路简述**  
将跳蚤按左距离排序后倒序枚举，维护当前点右侧的最大右距离 `suf_max`，计算先左后右或先右后左的总步数最小值。

---

### 2. 作者：Wsy_flying_forever ⭐⭐⭐⭐  
**关键亮点**  
- 结构体绑定左距离与跳蚤编号，便于处理排序后的右距离关联。  
- 详细图示辅助理解移动策略，代码注释清晰。  

**调试心得**  
> "初始值一定要设为足够大的值（如1e10+2），否则会WA。" —— 强调边界条件的处理。

**核心代码**  
```cpp
for (int i=n;i>=0;i--){
    ans=min(ans,min(t[i].l*2+rmax,rmax*2+t[i].l));
    rmax=max(r[t[i].id],rmax);
}
```

---

### 3. 作者：Claire0918 ⭐⭐⭐⭐  
**关键亮点**  
- 严格数学证明移动策略的最优性，排除无效操作。  
- 提出关键结论：最优策略必为先单向左移再单向右移（或反向）。  

**核心证明**  
> "在两次向左移动中插入向右移动必然劣化最远距离。" —— 通过移动顺序分析排除复杂策略。

---

**关键思路总结**  
- **排序预处理**：将跳蚤和坑坐标排序后，用二分快速找到每个跳蚤的左右最近坑。  
- **贪心枚举**：按左距离排序后，倒序维护最大右距离，计算 `min(2L + R, 2R + L)`。  
- **边界处理**：对无坑的情况设置极大值避免逻辑错误。

---

**拓展思路**  
- **同类问题**：覆盖区间问题（如活动选择、最小点覆盖）常结合排序与贪心。  
- **优化技巧**：预处理后缀最值可避免重复计算，类似滑动窗口中的滚动最大值。

---

**相似题目推荐**  
1. [P2878 [USACO07JAN] Protecting the Flowers S](https://www.luogu.com.cn/problem/P2878)（贪心排序）  
2. [P1090 [NOIP2004 提高组] 合并果子](https://www.luogu.com.cn/problem/P1090)（贪心+优先队列）  
3. [P1208 [USACO1.3] 混合牛奶 Mixing Milk](https://www.luogu.com.cn/problem/P1208)（排序贪心策略）

---
处理用时：61.83秒
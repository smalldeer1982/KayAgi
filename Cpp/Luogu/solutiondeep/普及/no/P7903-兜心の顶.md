# 题目信息

# 兜心の顶

## 题目背景

Source：[八仙敬酒](/paste/78f1vlm0)，这是可以点的。

- 吕洞宾——醉酒提壶力千钧；
- 铁拐李——旋肘膝撞醉还真；
- **汉钟离——跌步抱坛兜心顶**；
- 蓝采和——单提敬酒拦腰破；
- 张果老——醉酒抛杯踢连环；
- 曹国舅——仙人敬酒锁喉扣；
- 韩湘子——擒腕击胸醉吹箫；
- 何仙姑——弹腰献酒醉荡步。

## 题目描述

给定正整数 $n$，要求构造一棵 $n$ 个结点的树，满足树的直径的重心 **不是** 树的重心。

同时这棵树需满足：直径$^1$、重心$^2$、直径的重心$^3$全部唯一。

---

注：

- 树的直径$^1$：[https://oi-wiki.org/graph/tree-diameter/](https://oi-wiki.org/graph/tree-diameter/)
- 树的重心$^2$：[https://oi-wiki.org/graph/tree-centroid/](https://oi-wiki.org/graph/tree-centroid/)
- 树的直径的重心$^3$：将树的直径（一条链）视作一棵树，求其中心（一个点）。

## 说明/提示

#### 样例说明

![](https://cdn.luogu.com.cn/upload/image_hosting/kdgu2xd9.png)

样例 #1 中直径的重心是 $7$，树的重心是 $1$，$1\ne7$。

样例 #2 中 $n=2$，只有两个点时显然重心不可能唯一。

#### 数据范围

**本题采取捆绑测试。**

| 子任务编号 | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $30$ | $n\le10$ |
| $2$ | $30$ | $n$ 是奇数 |
| $3$ | $30$ | $n$ 是偶数 |
| $4$ | $10$ | 无 |

对于 $100\%$ 的数据：$1\le n\le10^4$。

**本题提供 Special Judge 源码，参见下方附件。**

## 样例 #1

### 输入

```
20```

### 输出

```
20
20 18
1 3
19 12
19 4
16 1
4 1
1 7
16 10
7 20
13 8
10 2
18 13
13 17
14 18
11 19
16 5
2 6
16 9
17 15```

## 样例 #2

### 输入

```
2```

### 输出

```
-1```

# AI分析结果



**算法分类**: 构造

---

### 综合分析
本题要求构造一棵满足特定条件的树，核心在于通过结构设计使树的直径、重心、直径重心三者唯一且不重合。关键思路是构造一个足够长的奇数长度直径链，并通过在链的特定位置附加菊花结构转移重心。

---

### 精选题解

#### 1. Danno0v0（★★★★☆）
**关键亮点**:  
- 提出“蒲公英结构”构造思路，核心是奇长度直径链+菊花结构，确保直径唯一且重心偏移  
- 代码极度简洁（7行核心逻辑），直接构造链+菊花分支  
**核心代码**:  
```cpp
printf("%d\n%d %d\n%d %d\n%d %d\n%d %d\n%d %d\n%d %d\n",n,1,2,2,3,3,4,4,5,5,6,6,7);
for(int j=8;j<=n;j++) printf("%d %d\n",3,j);
```
**实现思想**: 前7个节点构成链（直径7），后续节点全接在节点3形成菊花，使重心固定在3号节点，直径重心在4号节点。

#### 2. 言琢დ（★★★★☆）
**关键亮点**:  
- 官方题解，严格证明构造可行性  
- 明确给出当n≥9时构造方案，并验证各条件  
**核心代码**:  
```cpp
for(int i=1;i<=6;i++) print(i), print(i+1);
for(int i=8;i<=n;i++) print(3), print(i);
```
**实现思想**: 与Danno0v0方案一致，但采用更规范的格式化输出。

#### 3. Elaina_0（★★★★☆）
**关键亮点**:  
- 图文并茂分析构造过程，详细演示重心转移过程  
- 分步验证当直径长度为7时的合理性  
**核心代码**:  
```cpp
printf("1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n");
for(int i=8;i<=n;i++) printf("3 %d\n",i);
```
**实现思想**: 与前述方案一致，代码实现完全统一。

---

### 最优技巧总结
1. **奇长直径链**：构造长度为7的链保证直径唯一且中心唯一（节点4）  
2. **菊花结构重心偏移**：将多余节点全接在链的中间节点（节点3），利用子树大小使重心转移  
3. **边界处理**：当n≤8时不满足构造条件直接返回-1  

---

### 拓展方向
1. **变形构造**：调整菊花连接位置或链长，满足其他特殊条件（如双重心等）  
2. **动态验证**：编写验证函数自动检查直径、重心等条件  
3. **参数化构造**：将链长、菊花位置参数化生成多种解  

---

### 推荐习题
1. [P1364 医院设置](https://www.luogu.com.cn/problem/P1364)（树的重心应用）  
2. [P5536 核心城市](https://www.luogu.com.cn/problem/P5536)（树的直径与中心相关）  
3. [P1110 森林之王](https://www.luogu.com.cn/problem/P1110)（树结构构造与验证）

---
处理用时：47.07秒
# 题目信息

# Alice and Bob are playing a Normal Game

## 题目描述

给定一个长度为 $n$ 的序列，Alice 和 Bob 交替操作一共 $k$ 次，第 $i$ 次当前操作的人必须选一个 $-x_i \sim x_i$ 的整数把它插在序列开头或结尾，Alice 先手（也就是说 $i$ 为奇数时由 Alice 来插入一个 $-x_i\sim x_i$ 的整数，$i$ 为偶数时由 Bob 来插入一个 $-x_i\sim x_i$ 的整数）。

记最终的序列为 $a_1,a_2,\dots,a_{n+k}$，则得分为 $\sum_{i=1}^{n+k} (-1)^{i-1}a_i$。Alice 希望得分最大，Bob 希望得分最小。在两人都采取最优策略的情况下，求最终得分。

## 说明/提示

**本题采用捆绑测试**

| 子任务编号 | 分值 | 特殊限制 |
| :----------: | :----------: | :----------: |
| $0$ | $25$ | $n,k,x_i\le 5$ |
| $1$ | $25$ | $n,k\le 10$ |
| $2$ | $25$ | $n,k\le 100$ |
| $3$ | $25$ | 无特殊限制 |

对于所有数据，保证 $1\le n,k\le 2\times 10^5$，$0\le |a_i|,x_i\le 10^9$。

本题测试点较多，为了保证评测速度，本题时限 500ms，保证时限在 std 所用最大时间的 5 倍以上。

## 样例 #1

### 输入

```
2 2
1 3
2 2```

### 输出

```
-2```

# AI分析结果



**算法分类**: 贪心

---

### 综合分析与结论
题目核心在于维护得分的绝对值，并根据操作轮次奇偶性确定最终符号。最优策略为：最后操作者通过每次操作最大化绝对值，其对手则尽可能减小绝对值。该问题可通过贪心策略在线性时间内解决，只需维护一个绝对值变量并按操作轮次更新。

---

### 高星题解推荐

#### 1. VinstaG173（4星）
**关键亮点**:  
- 将问题转化为绝对值维护问题，代码极简（仅12行）
- 通过奇偶性判断直接确定最终符号，时间复杂度O(n+k)
```cpp
// 核心代码：交替累加/消减绝对值
while(k--){
    x=read(),r=(k&1)?((r>x)?(r-x):0):(r+x);
}
printf("%lld\n",(t&1)?r:-r);
```

#### 2. Level_Down（4星）
**关键亮点**:  
- 通过预处理k的奇偶性确定操作模式
- 使用位运算简化条件判断，代码高度优化
```cpp
// 核心逻辑：根据奇偶性分块处理
ans = abs(ans);
if (k & 1) f = 0;
for (...) {
    if ((i + f) & 1) ans += x; // 当前操作者要最大化绝对值
    else ans = max(0, ans - x); // 对手要最小化绝对值
}
```

#### 3. WER_very_fox（4星）
**关键亮点**:  
- 直接分k奇偶两种大情况处理，逻辑清晰
- 通过独立处理最后一步简化问题
```cpp
// 核心逻辑：分k奇偶处理最终符号
if (k%2) { // Alice最后操作，输出正绝对值
    for (...) ans += x_i;
    printf("%lld",ans);
} else { // Bob最后操作，输出负绝对值
    for (...) ans += x_i;
    printf("%lld",-ans);
}
```

---

### 最优关键思路
维护当前得分的绝对值 `r`，按操作轮次交替更新：
- **最后操作者**（当轮次i与k同奇偶）：每次操作后 `r += x_i`
- **非最后操作者**：每次操作后 `r = max(r - x_i, 0)`

---

### 拓展建议
类似博弈贪心问题推荐：
1. [P1488 肥猫的游戏](https://www.luogu.com.cn/problem/P1488)  
   （环形博弈取数，贪心选择最优区间）
2. [P1512 取石子游戏](https://www.luogu.com.cn/problem/P1512)  
   （威佐夫博弈模板题，数学分析必胜态）
3. [P2123 皇后游戏](https://www.luogu.com.cn/problem/P2123)  
   （贪心排序策略证明，处理交替影响）

---

### 调试经验摘录
- **WER_very_fox**："切记要开 long long！"  
  （数据范围达1e9，累计和可能超过int范围）
- **CSP_Sept**："Bob 会通过取反使绝对值最大化"  
  （最后操作者通过符号反转控制最终结果方向）

---
处理用时：48.67秒
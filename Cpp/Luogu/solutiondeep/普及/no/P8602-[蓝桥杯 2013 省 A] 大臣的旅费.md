# 题目信息

# [蓝桥杯 2013 省 A] 大臣的旅费

## 题目描述

很久以前，T 王国空前繁荣。为了更好地管理国家，王国修建了大量的快速路，用于连接首都和王国内的各大城市。

为节省经费，T 国的大臣们经过思考，制定了一套优秀的修建方案，使得任何一个大城市都能从首都直接或者通过其他大城市间接到达。同时，如果不重复经过大城市，从首都到达每个大城市的方案都是唯一的。

J 是 T 国重要大臣，他巡查于各大城市之间，体察民情。所以，从一个城市马不停蹄地到另一个城市成了 J 最常做的事情。他有一个钱袋，用于存放往来城市间的路费。

聪明的 J 发现，如果不在某个城市停下来修整，在连续行进过程中，他所花的路费与他已走过的距离有关，在走第 $x - 1$ 千米到第 $x$ 千米这一千米中（$x$ 是整数），他花费的路费是 $x+10$ 这么多。也就是说走 $1$ 千米花费 $11$，走 $2$ 千米要花费 $23$。

J 大臣想知道：他从某一个城市出发，中间不休息，到达另一个城市，所有可能花费的路费中最多是多少呢？


## 说明/提示

样例解释：大臣 J 从城市 $4$ 到城市 $5$ 要花费 $135$ 的路费。

时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛

## 样例 #1

### 输入

```
5
1 2 2
1 3 1
2 4 5
2 5 4```

### 输出

```
135```

# AI分析结果



### 算法分类
图论（树的直径）

### 综合分析与结论
题目本质是求树的直径（最长路径）。所有题解均基于两种经典方法：
1. **两次DFS/BFS法**：通过两次遍历确定直径端点，时间复杂度 O(n)
2. **树形DP法**：维护每个节点的最大/次大路径，时间复杂度 O(n)

两种方法均高效，但两次DFS更易理解实现。路费计算通过推导等差数列公式转化为最大距离的数学计算。

---

### 精选题解列表

#### 1. XIxii（⭐⭐⭐⭐⭐）
**关键亮点**：
- 清晰的两次DFS思路，代码注释完整
- 正确处理父子节点防止循环访问
- 使用邻接表存储树结构
**核心代码**：
```cpp
void dfs(int u,int father,int distance) {
    dist[u] = distance;
    for(auto node:h[u]) if(node.id != father) 
        dfs(node.id, u, distance+node.w);
}
// 第一次dfs找端点u，第二次dfs计算直径dist[u]
```

#### 2. sw2022（⭐⭐⭐⭐）
**关键亮点**：
- 简洁的邻接表实现
- 明确注释了DFS遍历逻辑
**核心代码**：
```cpp
void dfs(int s,int f,int d) {
    dis[s] = d;
    for(int i=hd[s];i;i=nxt[i])
        if(go[i] != f) dfs(go[i],s,d+cst[i]);
}
// 两次dfs求最大距离
```

#### 3. 5k_sync_closer（⭐⭐⭐）
**亮点**：
- 树形DP实现，单次遍历完成
- 极简代码风格（但可读性稍差）
**核心代码**：
```cpp
void D(int u, int k) {
    for(int i=h[u];i;i=e[i].t) {
        D(v, u);
        if((x = a[v]+e[i].w) > a[u]) 
            b[u]=a[u], a[u]=x;
        else if(x > b[u]) b[u]=x;
        q = max(q, a[u] + b[u]);
    }
}
```

---

### 最优技巧总结
**关键思路**：两次DFS法求树的直径  
**实现要点**：
1. 邻接表存储树结构
2. DFS时记录父节点防止回溯
3. 路费公式转换：`10x + x(x+1)/2`
4. 树形DP维护最大/次大路径

**拓展思考**：该算法可推广到所有树形结构的最长路径问题，如网络延迟分析、资源运输路径规划等。

---

### 相似题目推荐
1. [P1099 树网的核](https://www.luogu.com.cn/problem/P1099)（树的直径应用）
2. [P4408 逃学的小孩](https://www.luogu.com.cn/problem/P4408)（树的最远距离组合）
3. [P3629 巡逻](https://www.luogu.com.cn/problem/P3629)（树的直径与环结合）

---
处理用时：44.59秒
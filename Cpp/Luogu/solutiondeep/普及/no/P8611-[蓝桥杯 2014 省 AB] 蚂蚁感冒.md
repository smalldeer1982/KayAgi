# 题目信息

# [蓝桥杯 2014 省 AB] 蚂蚁感冒

## 题目描述

长 $100$ 厘米的细长直杆子上有 $n$ 只蚂蚁。它们的头有的朝左，有的朝右。

每只蚂蚁都只能沿着杆子向前爬，速度是 $1$ 厘米 / 秒。

当两只蚂蚁碰面时，它们会同时掉头往相反的方向爬行。

这些蚂蚁中，有 $1$ 只蚂蚁感冒了。并且在和其它蚂蚁碰面时，会把感冒传染给碰到的蚂蚁。

请你计算，当所有蚂蚁都爬离杆子时，有多少只蚂蚁患上了感冒。

## 样例 #1

### 输入

```
3
5 -2 8```

### 输出

```
1```

## 样例 #2

### 输入

```
5
-10 8 -20 12 25```

### 输出

```
3```

# AI分析结果



算法分类：数学

---

### 综合分析与结论
蚂蚁碰面掉头的操作可以等价视为蚂蚁相互穿过（不影响最终感染结果）。核心解法是统计初始状态下与感冒蚂蚁行进方向相反的蚂蚁数量，并根据是否存在相反方向的蚂蚁来决定总感染数。所有题解中，数学推导法（统计相对方向）是最优解，模拟法虽直观但效率较低。

---

### 精选题解

#### 1. Vct14（★★★★★）
**关键亮点**：通过分析蚂蚁碰撞的等价逻辑，总结出方向统计公式  
**核心思路**：  
- 感冒蚂蚁向左时，统计其左侧所有向右的蚂蚁（x）和右侧所有向左的蚂蚁（y）  
- 若存在反向蚂蚁（x≠0或y≠0），总感染数为x+y+1；否则仅初始蚂蚁感染  
**代码实现**：  
```cpp
int l=0, r=0;
for(int i=2; i<=n; i++){
    if(abs(x[i])<abs(x[1]) && x[i]>0) l++;  // 左边向右
    if(abs(x[i])>abs(x[1]) && x[i]<0) r++;  // 右边向左
}
int sum = (x[1]<0 ? (l?l+r+1:1) : (r?l+r+1:1));
```

#### 2. Purple_Circle（★★★★☆）
**关键亮点**：直接基于"蚂蚁可穿透"的观察得出感染公式  
**核心思路**：  
- 感染数=与感冒蚂蚁相向而行的蚂蚁数+1  
- 特殊情况：若没有相向而行的蚂蚁，则仅初始蚂蚁感染  
**代码实现**：  
```cpp
if((now<0&&!r)||(now>0&&!l)) cout<<"1";  
else cout<<l+r+1;
```

---

### 最优技巧总结
1. **等效转换**：将碰撞掉头视为穿透，避免模拟复杂轨迹  
2. **方向统计**：只需统计初始状态中与感冒蚂蚁行进方向相反的蚂蚁数量  
3. **公式推导**：总感染数=左侧反向数+右侧反向数+1（若存在反向蚂蚁）

---

### 类似题目推荐
1. [P1007 独木桥](https://www.luogu.com.cn/problem/P1007)  
   - 同类技巧：蚂蚁等效穿透模型  
2. [P1364 火车进站](https://www.luogu.com.cn/problem/P1364)  
   - 方向判断与碰撞处理  
3. [P1516 青蛙的约会](https://www.luogu.com.cn/problem/P1516)  
   - 相对运动与数学建模  

---

### 题解心得摘录
**Vct14**：  
"通过表格分析发现，蚂蚁的相对顺序保持不变，从而可以从初始位置预测感染结果"  
——通过具体样例推导出通用规律是解题关键  

**Wind_Smiled**：  
"调试半小时才意识到需要记录感染时间，避免重复传染"  
——模拟法中需注意状态更新顺序与边界条件

---
处理用时：49.83秒
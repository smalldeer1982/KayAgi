# 题目信息

# [PA 2021] Pandemia

## 题目描述

某国有 $n$ 座城市，其中 $\forall 1 \leq i < n$，城市 $i$ 与城市 $i + 1$ 有**双向**道路相连。

该国发生了疫情，一个城市要么无人感染，要么全体感染。具体地，一个城市初始时被感染当且仅当 $s_i = 1$。

疫情会扩散，每一天上午，你可以为一个未感染的城市的居民接种疫苗，下午，每个被感染的城市会向相邻的城市扩散，如果相邻的城市未接种疫苗，它将立即全员感染。

你作为城市管理者，想要知道执行最优策略的情况下，最少会有几个城市的所有人都被感染。

## 说明/提示

#### 样例 #1 解释
测试点一：第一天接种城市 $7$，第二天接种城市 $1$。

测试点二：第一天接种城市 $5$，第二天接种城市 $7$。

测试点三：初始不存在疫情，因此不需要接种。
#### 数据范围
对于 $100\%$ 的数据，$1 \leq n, T \leq 10^5$，$1 \leq \sum n \leq 10^6$。

## 样例 #1

### 输入

```
3
8
00110100
10
1001000010
4
0000```

### 输出

```
5
7
0```

# AI分析结果



**算法分类**  
贪心

---

### 综合分析与结论  
题目本质是贪心策略下的区间隔离问题。所有题解的核心思路均为：  
1. **分割初始未感染区间**，根据位置（中间/边缘）计算其最大可减少的感染数。  
2. **按时间或贡献度排序**，优先处理贡献最大的区间（即处理后可减少最多感染数的区间）。  
3. **动态调整时间**，根据区间类型（d=1边缘区或d=2中间区）决定接种次数。  

关键难点在于正确计算各区间的时间优先级及处理顺序。需注意边界条件（全感染/未感染）和中间区间的双端点接种逻辑。

---

### 精选题解与亮点  

#### 题解2（Null_h）  
**⭐⭐⭐⭐**  
**关键亮点**  
- 将未感染区间抽象为结构体，按 `s*2/d` 排序，直观反映单位时间贡献。  
- 动态维护时间变量 `t`，处理不同区间类型时快速计算剩余贡献。  
- 代码简洁高效，优先处理“增量最大”区间。  

**核心代码**  
```cpp
struct hbr { int s, d; };
priority_queue<hbr> q; // 自定义比较函数按 s*2/d 排序

while (处理队列) {
    int s = q[i].s - q[i].d * t; // 剩余可减少的感染数
    if (d == 1) ans -= s, t++;    // 边缘区，一天隔离
    else {                        // 中间区，两天隔离
        if (s <= 2) ans--, t++;
        else ans -= s-1, t += 2;
    }
}
```

#### 题解3（mahaorui2012）  
**⭐⭐⭐⭐**  
**关键亮点**  
- 显式分类边缘区间与中间区间，分别计算其贡献。  
- 按时间降序排序，优先处理长时间存活的区间。  
- 特判全感染/未感染情况，鲁棒性强。  

**核心思路**  
```cpp
vector<seg> e; // 存储区间及其完全感染时间
sort(e.begin(), e.end(), cmp); // 按时间降序排序
while (处理队列) {
    if (区间是边缘) 单次接种隔离;
    else 根据剩余长度决定双次接种;
}
```

---

### 最优技巧总结  
1. **区间分割与优先级计算**：将初始未感染区间分割后，按完全感染所需时间或单位时间贡献排序。  
2. **动态时间维护**：每次处理后更新时间变量，避免重复计算剩余贡献。  
3. **分类处理逻辑**：边缘区单次接种，中间区双次接种（需特判短区间）。  

---

### 拓展与相关题目  
- **同类题型**：区间覆盖（如CF/洛谷任务调度类贪心）、双端隔离问题。  
- **推荐题目**  
  1. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)（贪心排序）  
  2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)（优先队列贪心）  
  3. [P5019 铺设道路](https://www.luogu.com.cn/problem/P5019)（差分+贪心）  

---

### 题解个人心得摘录  
- **Null_h**：提到“假了两次”，调试中发现贪心策略的细节错误（如短区间处理逻辑）。  
- **mahaorui2012**：强调特判全感染/未感染的边界条件，避免漏判导致WA。  
**总结**：贪心题需特别注意边界和短区间的特判，优先验证极端情况。

---
处理用时：74.88秒
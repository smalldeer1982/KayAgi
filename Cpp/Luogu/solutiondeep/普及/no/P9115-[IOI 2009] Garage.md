# 题目信息

# [IOI 2009] Garage

## 题目背景

IOI2009 D2T1

## 题目描述

一个停车场有 $N$ 个停车位，依次编号为 $1$ 到 $N$。每天早上，停车场的所有停车位都是空的。当一辆车到达停车场时，服务员检查是否有空的停车位。如果没有，则这辆车将在入口处等待，直到有新的停车位。如果有，则这辆车将停在编号最小的空的停车位上。如果多辆车在入口处等待，则它们会按照到达的顺序排成队列，当出现空的停车位时，队列中的第一辆车（最早到达的车辆）将停在该停车位上。

每辆车的停车费是它的重量乘以对应停车位的特定比率，和它在停车场停了多久无关。

停车场管理员得知今天将有 $M$ 辆车前来停车，以及它们到达和离开的顺序。帮他计算今天的收入。

**任务**：编写一个程序，给定每个停车位的特定比率，每辆车的重量和所有车辆到达和离开的顺序，求出车库的总收入。

## 说明/提示

### 样例解释

- 样例 1：
  - 车辆 $3$ 停在车位 $1$，支付 $300\times 2 = 600$ 美元。
  - 车辆 $2$ 停在车位 $2$，支付 $100\times 3 = 300$ 美元。
  - 车辆 $1$ 停在车位 $1$（车辆 $3$ 空出的停车位），支付 $200\times 2 = 400$ 美元。
  - 车辆 $4$ 停在车位 $3$，支付 $800\times 5 = 4000$ 美元。

- 样例 2：
  - 车辆 $3$ 停在车位 $1$，支付 $1000\times 5 = 5000$ 美元。
  - 车辆 $1$ 停在车位 $2$，支付 $100\times 2 = 200$ 美元。
  - 车辆 $2$ 到达并在入口处等待。
  - 车辆 $4$ 到达并在入口处等待，排在车辆 $2$ 之后。
  - 当车辆 $1$ 离开时，车辆 $2$ 停在空出的车位 $2$，支付 $500\times 2 = 1000$ 美元。
  - 当车辆 $3$ 离开时，车辆 $4$ 停在空出的车位 $1$，支付 $2000\times 5 = 10000$ 美元。

### 数据范围与约定

- 对于 $40\%$ 的数据，没有车辆会在停车场等待。
- 对于 $100\%$ 的数据，$1\leq N\leq 100$，$1\leq M\leq 2000$，$1\leq R_s\leq 100$，$1\leq W_k\leq 10 ^ 4$。

## 样例 #1

### 输入

```
3 4
2
3
5
200
100
300
800
3
2
-3
1
4
-4
-2
-1
```

### 输出

```
5300
```

## 样例 #2

### 输入

```
2 4
5
2
100
500
1000
2000
3
1
2
4
-1
-3
-2
-4
```

### 输出

```
16200```

# AI分析结果



**算法分类**：模拟、队列

---

**综合分析**：  
本题需模拟车辆进出停车场的流程，核心在于维护空车位队列和等待队列。各题解均采用模拟思路，差异主要在数据结构的选择。关键点包括：及时处理等待队列、正确找到最小空车位、费用累加逻辑。

---

**精选题解**：

1. **tbdsh的题解（5星）**  
   **关键亮点**：使用`set`维护空车位，自动排序快速获取最小空位；利用队列处理等待车辆，逻辑简洁高效。  
   **核心代码**：  
   ```cpp
   set<int> a; // 空车位集合（自动排序）
   queue<int> b; // 等待队列
   // 处理车辆离开
   a.insert(jf[abs(x)]); // 返还空车位
   // 处理等待车辆
   while (b.size() && a.size()) {
       jf[b.front()] = *a.begin(); // 取最小空位
       b.pop(), a.erase(a.begin());
   }
   ```
   **代码思路**：`set`存储空车位，每次取首元素即最小空位。车辆离开时若队列非空，立即分配车位。

2. **FurnaceBridge的题解（4星）**  
   **关键亮点**：数组直接记录车位状态，逻辑直观；双重循环查找空位，适合小数据范围。  
   **核心代码**：  
   ```cpp
   bool b[105]; // 标记车位是否被占
   // 车辆进入时查找空位
   FOR(j,1,n) if (!used[j]) {
       ans += p[j] * w[t];
       used[j] = t; // 标记占用
       break;
   }
   ```
   **代码思路**：遍历车位数组找到首个空位，数据规模小时效率可接受。

3. **_Haoomff_的题解（4星）**  
   **亮点**：变量命名清晰，处理等待车辆时直接在离开操作中处理队列，减少冗余检查。  
   **个人心得**：提到“判断停车场是否满的标准是当前车数是否等于n”，避免了频繁遍历数组。

---

**最优技巧总结**：  
- **数据结构选择**：使用有序集合（如`set`）快速获取最小空车位，提升查找效率。  
- **队列管理**：在车辆离开时立即处理等待队列，确保先进先出。  
- **状态维护**：用数组或集合明确记录车位状态，避免重复计算。

---

**拓展思路**：  
类似资源分配问题（如线程池、内存管理）可借鉴此题的队列与最小资源分配策略。若数据规模增大，需优化空位查找为O(1)或O(log n)操作。

---

**推荐题目**：  
1. P1540 [NOIP2010 提高组] 机器翻译（队列模拟）  
2. P2058 [NOIP2016 普及组] 海港（队列与时间窗口管理）  
3. P1198 [JSOI2008] 最大数（维护有序集合）

---
处理用时：56.35秒
# 题目信息

# [PA 2022] Palindrom

## 题目描述

**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda próbna [Palindrom](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pal/)**

Bytie 参加了计算机俱乐部，因此知道了什么是回文串。回文串是从左向右读和从右向左读一样的单词。比如 `oko`，`kajak`，`kobyłamamałybok` 和 `ababbaba` 都是回文串，但是 `kajaki`，`zoo`，`alamakota` 和 `abaababa` 都不是回文串。

他迅速打开了笔记本并写下了一个只包含 `a` 和 `b` 两个字母的单词。然而在回忆了一会儿后，他想起这个单词不一定是一个回文串，因此他决定修改一下！在一秒内，它可以选择两个相邻的字母并交换他们的位置。他是否可以通过有限次操作（或者什么也不做）把这个字符串变成一个回文串？如果可以的话，最少要多少秒才可以？请帮他写一个程序计算这个最小时间。

## 说明/提示

对于 $100\%$ 的数据，满足：

字符串长度不超过 $2 \times 10^5$。

## 样例 #1

### 输入

```
abbaaab
```

### 输出

```
2```

## 样例 #2

### 输入

```
ab```

### 输出

```
-1```

# AI分析结果



**算法分类**: 贪心

---

### 综合分析与结论
本题核心是通过贪心策略，将一种字符的位置调整为对称，从而最小化总交换次数。所有题解均指出：
1. **无解条件**：当字符串长度为偶数且某字符出现奇数次时无解。
2. **贪心思路**：仅需处理一种字符的位置，使其对称分布，总交换次数即为对应位置差值之和。
3. **关键优化**：通过数学公式直接计算对称位置的差值，无需复杂数据结构。

---

### 高星题解推荐
1. **Kevin_Mamba (4星)**
   - **亮点**：代码简洁高效，数学推导清晰，处理奇偶情况完整，明确强调 `long long` 的必要性。
   - **核心代码**：
     ```cpp
     for(int i=1;i<=(tot>>1);i++) 
         ans += abs(a[i] - len + a[tot-i+1] - 1);
     if(odd(len)&&odd(tot)) 
         ans += abs(a[(tot+1)>>1] - ((len+1)>>1));
     ```
   - **个人心得**：通过样例发现需开 `long long`，避免溢出错误。

2. **David_yang (4星)**
   - **亮点**：代码简洁，直接遍历数组计算对称位置差值，逻辑直观。
   - **核心代码**：
     ```cpp
     for(int i=0; i < (t>>1); i++)
         sum += abs(len-1 - a[i] - a[t-i-1]);
     if(t&1) 
         sum += abs((len>>1) - a[t>>1]);
     ```

3. **ztksc07 (4星)**
   - **亮点**：详细图解对称位置计算，强调公式化简后的简洁性。
   - **核心代码**：
     ```cpp
     for(int i=1; i <= (cnta/2); i++)
         ans += abs(a[cnta-i+1] - len + a[i] - 1);
     ```

---

### 关键思路与技巧
- **对称性简化**：仅处理一种字符的位置，利用对称性公式 `A[i] + A[n-i+1] = len+1`，差值之和即为交换次数。
- **数学优化**：通过绝对值直接计算位置差，无需模拟交换过程，时间复杂度 O(n)。
- **边界处理**：对奇数长度的中间字符单独计算偏移量。

---

### 拓展与举一反三
- **同类问题**：构造回文的最小操作次数（如删除、插入字符），可参考 [CF1430E](https://codeforces.com/problemset/problem/1430/E)。
- **推荐题目**：
  1. [P1430 序列取数](https://www.luogu.com.cn/problem/P1430)（贪心+区间DP）
  2. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)（贪心策略）
  3. [CF1765M Minimum LCM](https://codeforces.com/problemset/problem/1765/M)（数学构造）

---
处理用时：62.62秒
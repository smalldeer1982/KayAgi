# 题目信息

# [PA 2022] Muzyka pop 2

## 题目描述

**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 2 [Muzyka pop 2](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/muz/)**

你可能还记得，Matthew 喜欢流行音乐。他刚刚编好一首新歌，就差给这首歌谱一个结尾了。

Matthew 想让这个结尾包含一些非空的音符，这些音符用其响度表示，响度是一个正整数。Matthew 可以使用任何响度的音符，但结尾的任务是逐渐淡出整首歌——出于这个原因，结尾的音符响度必须形成一个严格递减的序列。

你可能知道或记得，流行音乐中好的节拍是很重要的。这次 Matthew 发现响度为 $x$ 的音符的节拍值为 $x$ 的二进制形式中 $1$ 的个数。考虑这首歌的剩余部分，他想让这个结尾所有音符的节拍值之和恰好为 $n$。

帮他找到这个正确的音符响度序列。可以证明总存在至少一个满足条件的序列，因此你的任务是输出字典序最小的序列。

注：如果对于两个数字序列 $A$ 和 $B$，在两序列第一个不同的位置，$A$ 序列中这个位置包含的整数比 $B$ 序列的小，我们称数字序列 $A$ 的字典序比 $B$ 的字典序小。如果不存在这个位置，则称更短的那个数字序列字典序更小。例如，序列 $[1, 10000000]$ 的字典序小于序列 $[2,2]$，序列 $[4, 2, 20, 30, 40]$ 的字典序小于 $[4, 2, 100, 1]$，并且序列 $[5,4,3,2]$ 的字典序小于序列 $[5,4,3,2,1]$。

## 说明/提示

对于 $100\%$ 的数据，满足：

$1\le n\le 10 ^ 6$。

## 样例 #1

### 输入

```
3```

### 输出

```
2
3 1
```

## 样例 #2

### 输入

```
10```

### 输出

```
6
7 5 4 3 2 1
```

# AI分析结果



### 算法分类
贪心、构造

### 题解分析与结论
题目要求构造严格递减序列，使二进制中1的个数和为n，且字典序最小。各题解均采用贪心策略：
1. **找最大起点**：找到最小的x，使得1~x的二进制1的总和≥n。
2. **逆序删减**：从x开始逆序遍历，若删除当前数仍能满足总和≥n则删除，否则保留，最终得到字典序最小的序列。

### 精选题解
#### 题解作者：JLGxy（⭐⭐⭐⭐⭐）
**关键亮点**：  
- 代码极度简洁，利用STL容器和内置函数。
- 核心思想清晰，逆序删除逻辑高效。

**核心代码**：
```cpp
int main() {
    int n, s = 0, x = 0;
    cin >> n;
    while(s < n) s += __builtin_popcount(++x);
    vector<int> v;
    for(int i = x; i >= 1; i--) {
        if(s - __builtin_popcount(i) >= n) 
            s -= __builtin_popcount(i);
        else 
            v.push_back(i);
    }
    cout << v.size() << endl;
    for(auto a: v) cout << a << " ";
}
```

#### 题解作者：Usada_Pekora（⭐⭐⭐⭐⭐）
**关键亮点**：  
- 逻辑清晰，变量命名规范。
- 快速定位最大x，逆序删除处理直观。

**核心代码**：
```cpp
int mx = 0, sum = 0;
for (int i = 1; ; i++) {
    sum += __builtin_popcount(i);
    if (sum >= n) { mx = i; break; }
}
vector<int> ans;
for (int i = mx; i >= 1; i--) {
    if (sum - __builtin_popcount(i) >= n)
        sum -= __builtin_popcount(i);
    else
        ans.emplace_back(i);
}
```

### 关键思路总结
- **贪心策略**：先确定最大可能的起始数，再逆序调整总和。
- **内置函数优化**：利用`__builtin_popcount`快速计算二进制中1的个数。
- **逆序处理**：优先删除较大数以保留更小字典序的序列。

### 拓展与相关题目
- **同类题目**：构造类问题常结合贪心策略，如二进制特性、字典序优化。
- **推荐题目**：
  1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)（贪心）
  2. [P1106 删数问题](https://www.luogu.com.cn/problem/P1106)（构造最小序列）
  3. [P5653 基础字典序问题](https://www.luogu.com.cn/problem/P5653)（字典序贪心）

---
处理用时：191.89秒
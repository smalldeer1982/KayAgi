# 题目信息

# [ICPC 2020 Nanjing R] Let's Play Curling

## 题目描述

# [ICPC2020 Nanjing R] Let's Play Curling


红队和蓝队在冰面上向目标区域滑动冰壶，距离目标区域中心最近的队伍获胜。

两支队伍在一条直线上竞争。比赛结束后，有   $(n+m)$ 个冰壶在直线上, $n$ 个是红队的，剩下 $m$ 个是蓝队的。 红队的第 $i$ 个冰壶被放在 $a_i$ ，蓝队的第 $i$ 个冰壶被放在 $b_i$ 。

设 $c$ 是中心。如果存在一些 $i$ 使得 $1 \le i \le n$ 并且对于所有 $1 \le j \le m$ 都有 $|c - a_i| < |c - b_j|$ 红队就赢得比赛。另外，如果满足条件的 $i$ 的数目是 $p$ ，则认为红队赢得 $p$ 分。

给你红蓝两队的冰壶的位置，请你确定中心 $c$ 的值，使红队得分最多。注意， $c$ 是任意实数，不一定是整数。

## 说明/提示

对于第一个样例，当 $c = 2.5$ 时，红队的位于 2 和 3 的冰壶可以得分。

对于第二个样例，当 $c = 7$ 时，红队的位于 5 和 7 的冰壶可以得分。

## 样例 #1

### 输入

```
3
2 2
2 3
1 4
6 5
2 5 3 7 1 7
3 4 3 1 10
1 1
7
7```

### 输出

```
2
3
Impossible```

# AI分析结果



**算法分类**: 二分

---

### 综合分析与结论
题目核心是寻找两个蓝队冰壶之间的最大连续红队冰壶数量。所有题解均采用排序+二分思路：将红蓝冰壶排序后，在相邻蓝队冰壶（含虚拟边界）之间，用二分查找统计红队数量。最终答案为所有区间中的最大值。

---

### 高星题解推荐

#### 1. 作者：_Gabriel_（★★★★☆）
**关键亮点**：
- 添加边界点 `-INF/INF` 处理首尾区间
- 使用 `upper_bound` 和 `lower_bound` 精准定位区间
- 代码简洁易读，变量命名清晰

**核心代码**：
```cpp
b[0] = -INF, b[m + 1] = INF;
sort(a + 1, a + n + 1);
sort(b, b + m + 1);
for (int i = 0; i <= m; i++) {
    int pos1 = upper_bound(a + 1, a + n + 1, b[i]) - a;
    int pos2 = lower_bound(a + 1, a + n + 1, b[i + 1]) - a - 1;
    ans = max(ans, pos2 - pos1 + 1);
}
```

#### 2. 作者：SDLTF_凌亭风（★★★★☆）
**关键亮点**：
- 预处理蓝队冰壶边界为极值
- 循环遍历相邻蓝队点，利用二分快速统计红队数量
- 代码结构紧凑，边界处理明确

**核心代码**：
```cpp
b[0] = -2e9, b[m + 1] = 2e9;
sort(r + 1, r + n + 1), sort(b + 1, b + m + 1);
for (int i = 0; i <= m; i++) {
    lb = upper_bound(r + 1, r + n + 1, b[i]) - r;
    rb = lower_bound(r + 1, r + n + 1, b[i + 1]) - r;
    res = max(res, rb - lb);
}
```

---

### 关键思路总结
1. **排序预处理**：对红蓝冰壶位置分别排序。
2. **虚拟边界**：在蓝队数组中添加极小值（如 `-INF`）和极大值（如 `INF`）以处理首尾区间。
3. **二分查找区间**：对每对相邻蓝队点，用 `upper_bound` 找红队起始位置，`lower_bound` 找结束位置，差值即为该区间红队数量。
4. **贪心取最大值**：遍历所有蓝队区间，统计最大值即为答案。

---

### 拓展与相似题目
1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020) - 二分优化最长不上升子序列
2. [P1496 火烧赤壁](https://www.luogu.com.cn/problem/P1496) - 区间覆盖与合并
3. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908) - 分治与排序思想

---
处理用时：51.37秒
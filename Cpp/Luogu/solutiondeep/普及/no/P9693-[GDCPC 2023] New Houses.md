# 题目信息

# [GDCPC 2023] New Houses

## 题目描述

随着广东的建设与发展，越来越多人选择来到广东开始新生活。在一片新建的小区，有 $n$ 个人要搬进 $m$ 栋排成一行的房子，房子的编号从 $1$ 到 $m$（含两端）。房子 $u$ 和 $v$ 相邻，当且仅当 $|u-v|=1$。我们需要为每一个人安排一栋房子，要求所有人入住的房子互不相同。若两个人住进了一对相邻的房子，则这两个人互为邻居。

有的人喜欢自己有邻居，而有的人不喜欢。对于第 $i$ 个人，如果他有至少一位邻居，则他的满意度为 $a_i$；否则如果他没有邻居，则他的满意度为 $b_i$。

您作为小区的规划者，需要最大化所有人的总满意度。

## 样例 #1

### 输入

```
3
4 5
1 100
100 1
100 1
100 1
2 2
1 10
1 10
2 3
100 50
1 1000```

### 输出

```
400
2
1050```

# AI分析结果



**算法分类**: 贪心

---

### 综合分析与结论
本题核心在于通过贪心策略最大化满意度差值。所有题解均采用以下核心思路：  
1. 将人员按 $a_i-b_i$ 降序排序，优先让差值大的人有邻居  
2. 枚举有邻居的人数 $x$，计算对应所需房子数 $2n-x$  
3. 通过前缀和快速计算总满意度，取合法情况下的最大值  
关键难点在于房间数合法性判断和边界条件处理（如 $x=0$ 需 $2n-1 \leq m$）

---

### 高星题解推荐
1. **I_am_AKed_by_NOI（★★★★☆）**  
   **关键亮点**：  
   - 清晰的前缀和优化计算  
   - 完整处理了 $x=0$ 的边界条件  
   - 代码结构规范，逻辑分层明确  
   **核心代码**：  
   ```cpp
   sort(data+1, data+n+1, cmp);
   for(int x=2; x<=n; x++) {
       if(2*n - x <= m) {
           ans = max(sum1[x] + sum2[n] - sum2[x], ans);
       }
   }
   ```

2. **minVan（★★★★☆）**  
   **关键亮点**：  
   - 代码简洁高效，变量命名规范  
   - 显式处理了前缀和数组  
   - 使用 `long long` 避免溢出问题  
   **核心代码**：  
   ```cpp
   sort(a + 1, a + n + 1, cmp);
   for(int k=2; k<=n; k++) {
       if(2*n - k <= m) {
           ans = max(suma[k] + sumb[n] - sumb[k], ans);
       }
   }
   ```

---

### 关键技巧总结
1. **贪心排序策略**：将 $a_i-b_i$ 作为排序依据，确保每次选择对总贡献最大的人员  
2. **数学建模**：推导房间数公式 $2n-x \leq m$，将复杂布局问题转化为简单数值判断  
3. **前缀和优化**：通过预处理前缀和数组，将总满意度计算复杂度降至 $O(1)$  
4. **边界处理**：单独处理 $x=0$（全独居）的特殊情况  

---

### 同类题目推荐
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 贪心+优先队列  
2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223) - 贪心排序策略  
3. [P1803 线段覆盖](https://www.luogu.com.cn/problem/P1803) - 右端点贪心选择  

---

### 调试心得摘录
1. **数据范围意识**：多题解强调使用 `long long`，指出"十年OI一场空，不开long long见祖宗"  
2. **布局模型转化**：有题解通过画图分析房屋排列方式，帮助理解房间数公式推导  
3. **极端情况测试**：如 $n=1$ 时必须独居，需单独处理避免计算错误

---
处理用时：53.86秒
# 题目信息

# [HUSTFC 2023] Azur Lane

## 题目描述

你是港区的一位指挥官，你可以通过培养指挥喵来增强舰队的实力，指挥喵由对应的喵箱培育。喵箱有 $k$ 个等级，等级越高稀有度越高。你每天会获得若干个喵箱（至少一个），然后再使用 ''一键放入'' 将这些喵箱放到喵窝里进行培育。''一键放入'' 会优先放入稀有度更高的喵箱（即按照稀有度从高到低排序后依次放入），放入的喵箱会排在已放入喵箱的后面，在**每天结束时**系统会自动扣除与喵窝中喵箱数量相等的钱。最开始时你的喵窝里没有喵箱。

因为你非常懒，所以你会等 $n$ 天后才把喵箱一起打开。在你 $n$ 天后进入喵窝时，你看到了 $m$ 个喵箱，用一个长度为 $m$ 的序列 $a$ 表示喵窝里按放入先后顺序排列的喵箱的等级。但是你已经忘了这 $n$ 天里你每天获得了多少喵箱了，你甚至忘了 $n$ 的值是多少，显然这有许多情况。你想知道，对于满足 $1 \leq n \leq m$ 的所有整数 $n$，在所有情况中，这 $n$ 天总共扣除的钱数至少为多少？

## 说明/提示

样例一解释：

当 $n=1$ 时，无法在一天内获得这 $3$ 个喵箱（第二个喵箱的等级大于第一个喵箱的等级，不符合 ``一键放入'' 从高到低放入的原则），因此输出 $-1$。

当 $n=2$ 时，第一天获得第一个喵箱，此时喵窝内有 $1$ 个喵箱，当天花费为 $1$；第二天获得后两个喵箱，此时喵窝内有 $3$ 个喵箱，当天花费为 $3$。因此总钱数为 $4$。

当 $n=3$ 时，每天依次获得一个喵箱，总钱数为 $1+2+3=6$。

## 样例 #1

### 输入

```
3 3
2 3 1
```

### 输出

```
-1 4 6 ```

## 样例 #2

### 输入

```
8 4
3 2 4 2 1 2 3 2
```

### 输出

```
-1 -1 -1 21 22 25 29 36 ```

# AI分析结果



**算法分类**: 贪心

---

### 综合分析与结论
题目要求将序列分割为若干降序段，使得每天的总花费最小。核心思路是贪心策略：通过倒序遍历序列，尽可能合并相邻元素形成更长的降序段，从而确定不同天数对应的最优解。当需要更多天数时，优先拆分后面的段以保证费用最小。

---

### 高星题解推荐

#### 1. 作者：Anins（5星）
**关键亮点**：
- 简洁的贪心思路，倒序遍历合并相邻降序元素。
- 直接维护数组 `f[i]` 表示分成 `i` 段的最小费用，时间复杂度 O(m)。
- 代码清晰易懂，利用等差数列预处理最大天数费用，倒序合并时直接计算费用差值。

**核心代码**：
```cpp
for(int i=m-1; i>=1; i--) {
    if(a[i]>=a[i+1]) {
        k--; 
        f[k] = f[k+1] - i; 
    }
}
```
**实现思想**：从后往前遍历，若当前元素不小于后一个元素，则合并段并更新对应天数的费用，费用差值为当前下标 `i`。

---

#### 2. 作者：S_Kuroko（4星）
**关键亮点**：
- 明确贪心策略，代码逻辑与 Anins 类似但注释更详细。
- 预处理 `n=m` 的等差数列和，倒序合并时直接操作费用数组。

**核心代码**：
```cpp
b[m] = (1+m)*m/2; 
for(int i=m-1; i>=1; i--) {
    if(a[i]>=a[i+1]) {
        len--;
        b[len] = b[len+1] - i;
    }
}
```
**实现思想**：通过倒序合并降序段，动态维护费用数组 `b`，合并后费用减少量为当前下标 `i`。

---

#### 3. 作者：uncle_steve（4星）
**关键亮点**：
- 结合样例分析贪心策略，强调越晚放入花费越少。
- 使用倒序更新答案数组，直接标记合法天数。

**核心代码**：
```cpp
for(int i=m-1; i>=1; i--) {
    if(a[i]>=a[i+1]) {
        ans[sum] = ans[sum+1] - i;
        sum--;
    }
}
```
**实现思想**：倒序遍历合并段，通过 `sum` 指针动态维护合法天数，费用调整方式与前述解法一致。

---

### 最优关键思路
**贪心倒序合并**：从后往前遍历，合并可形成降序的相邻元素，每次合并减少段数并更新费用。费用差值为当前下标 `i`，保证每次合并后的费用为最优。

---

### 拓展与同类题
- **类似贪心策略**：处理序列分割问题时，常通过贪心选择最优合并/拆分点（如 [CF1144G](https://codeforces.com/problemset/problem/1144/G)）。
- **举一反三**：倒序处理常用于最大化后续操作的收益（如延迟决策）。

**推荐题目**：
1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)（贪心+优先队列）
2. [P2859 [USACO06FEB] Stall Reservations](https://www.luogu.com.cn/problem/P2859)（贪心+区间调度）
3. [P5019 铺设道路](https://www.luogu.com.cn/problem/P5019)（贪心差分应用）

---
处理用时：108.59秒
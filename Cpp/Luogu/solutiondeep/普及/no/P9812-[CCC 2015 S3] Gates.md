# 题目信息

# [CCC 2015 S3] Gates

## 题目描述

机场有 $n$ 个登机口，你需要按顺序安排 $m$ 架飞机，第 $i$ 架飞机只能使用 $1 \sim g_{i}$ 号登机口，一个登机口永久只能被一架飞机使用。**当没有登机口可以供某架飞机使用时机场便会关闭，之后的飞机都不能登机。**

请确定一种方案，使得有登机口的飞机数量最多。

## 说明/提示

**【数据范围】：**

对于 $40\%$ 的数据，$1 \leq n,m \leq 2 \times 10^{3}$。

对于 $100\%$ 的数据，$1 \leq n,m \leq 10^{5}$，$1 \leq g_{i} \leq n$。

本题中 Subtask 0 为原题数据，Subtask 1 为 Hack 数据，Hack 数据不计分。

## 样例 #1

### 输入

```
4
3
4
1
1```

### 输出

```
2```

## 样例 #2

### 输入

```
4
6
2
2
3
3
4
4```

### 输出

```
3```

# AI分析结果



### 算法分类
并查集

---

### 题目分析与结论
题目要求为每架飞机分配最大的可用登机口，核心是贪心策略结合高效数据结构。最优解法通过并查集动态维护可用位置，实现快速查找与合并，达到近似线性的时间复杂度。

---

### 高分题解推荐
#### 1. 作者：Loser_Syx（⭐️⭐️⭐️⭐️⭐️）
**关键亮点**  
- 使用并查集维护每个位置的前驱节点，快速找到最大可用登机口。
- 路径压缩优化查询效率，时间复杂度接近线性。
- 代码简洁，逻辑清晰，直接模拟贪心过程。

**核心代码**  
```cpp
struct DSU {
    int f[N];
    void init(int n) {
        for (int i=1; i<=n; ++i) f[i]=i;
    }
    int find(int x) {
        return f[x]==x ? x : f[x]=find(f[x]);
    }
    void merge(int x) {
        f[x] = find(x-1);
    }
} dsu;

// 主函数处理逻辑
for (int i=1; i<=m; ++i) {
    int x = read();
    if (dsu.find(x) == 0) return cout << i-1;
    dsu.merge(dsu.find(x)); // 合并到前驱节点
}
```

#### 2. 作者：chaynflow（⭐️⭐️⭐️⭐️）
**关键亮点**  
- 利用 `set` 的 `upper_bound` 快速查找最大可用登机口。
- 代码简洁易懂，适合理解贪心策略的基本思路。
- 时间复杂度为 O(m log n)，通过原题数据但稍逊于并查集。

**核心代码**  
```cpp
set<int> st;
for (int i=1; i<=n; ++i) st.insert(i);
for (int i=1; i<=m; ++i) {
    auto it = --st.upper_bound(g[i]);
    if (*it == 0) return cout << i-1;
    st.erase(it);
}
```

---

### 最优关键思路
**贪心 + 并查集维护**  
每次选择当前允许范围内最大的可用登机口，并通过并查集将该位置与前驱合并，确保后续查询时跳过已用位置。路径压缩优化查询效率，时间复杂度接近 O(m α(n))。

---

### 拓展与举一反三
- **类似问题**：资源动态分配（如区间合并、内存分配）。
- **推荐题目**  
  1. [P1197 星球大战](https://www.luogu.com.cn/problem/P1197)（逆序并查集）  
  2. [P3402 可持久化并查集](https://www.luogu.com.cn/problem/P3402)（高级并查集应用）  
  3. [P2278 操作系统](https://www.luogu.com.cn/problem/P2278)（贪心 + 优先队列）

---

### 个人心得摘录
- **Loser_Syx**：通过合并到前驱节点，将已用位置与空闲位置关联，避免重复遍历。
- **chaynflow**：`set` 的 `upper_bound` 返回首个大于值的迭代器，前移一位即为最大可用。
- **Jared0503**：路径压缩的数组模拟方法需注意父节点更新的正确性，避免死循环。

---
处理用时：102.53秒
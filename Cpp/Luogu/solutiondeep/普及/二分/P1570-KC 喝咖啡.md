# 题目信息

# KC 喝咖啡

## 题目描述

话说 KC 和 SH 在福州的时候常常跑去 85°C 喝咖啡或者其他的一些什么东西。

这天，KC 想要喝一杯咖啡，服务员告诉他，现在有 $n$ 种调料，这杯咖啡只可以加入其中的 $m$ 种（当然 KC 一定会加入 $m$ 种，不会加入少于 $m$ 种的调料），根据加入的调料不同，制成这杯咖啡要用的时间也不同，得到的咖啡的美味度也不同。

KC 在得知所有的 $n$ 种调料后，作为曾经的化竞之神的他，马上就知道了所有调料消耗的时间 $c _ i$ 以及调料的美味度 $v _ i$。由于 KC 急着回去刷题，所以他想尽快喝到这杯咖啡，但他又想喝到美味的咖啡，所以他想出了一个办法，他要喝到 $\dfrac{\sum v _ i}{\sum c _ i}$ 最大的咖啡，也就是单位时间的美味度最大的咖啡。

现在，KC 把调料信息告诉了 SH，要 SH 帮他算出喝到的咖啡的 $\dfrac{\sum v _ i}{\sum c _ i}$，但 SH 不想帮 KC 算这东西，于是 KC 就只能拜托你来算了。

注释：$\sum$ 表示求和，所以 $\dfrac{\sum v _ i}{\sum c _ i}$ 表示美味度的总和除以消耗时间的总和。


## 说明/提示

**样例 1 解释**：

KC 选 $2$ 号和 $3$ 号调料，$\dfrac{\sum v _ i}{\sum c _ i} = \dfrac{2 + 3}{2 + 1} = 1.667$。

可以验证不存在更优的选择。

**数据范围**：

对 $20 \%$ 的数据：$1 \leq n \leq 5$。

对 $50 \%$ 的数据：$1 \leq n \leq 10$。

对 $80 \%$ 的数据：$1 \leq n \leq 50$。

对 $100 \%$ 的数据：$1 \leq n \leq 200, 1 \leq m \leq n, 1 \leq c[i], v[i] \leq 1 \times 10 ^ 4$。

数据保证答案不超过 $1000$。


## 样例 #1

### 输入

```
3 2
1 2 3
3 2 1
```

### 输出

```
1.667
```

# AI分析结果

### 综合分析与结论

本题的核心是求解单位时间美味度最大的咖啡，即最大化 $\dfrac{\sum v_i}{\sum c_i}$。题解中主要采用了二分答案+贪心的策略，通过二分查找最优解，并结合贪心策略进行验证。部分题解还尝试了暴力枚举或搜索，但由于时间复杂度较高，仅适用于小规模数据。

### 所选题解

#### 1. 作者：Hexarhy (5星)
**关键亮点**：
- 详细推导了二分答案的数学基础，清晰解释了如何通过二分查找逼近最优解。
- 代码结构清晰，注释详细，易于理解。
- 提供了时间复杂度分析，并提出了可能的优化思路（如枚举法）。

**个人心得**：
- 作者提到“好久没有写二分答案了，来复习复习”，表明二分答案是一种常见的解题思路，值得熟练掌握。

**核心代码**：
```cpp
bool check(const double x)
{
    for(int i=1;i<=n;i++)
        a[i].avr=x*a[i].t-a[i].v; // 计算每个调料的权值
    sort(a+1,a+n+1); // 排序
    double tot=0;
    for(int i=1;i<=m;i++) // 取前m个最小的
        tot+=a[i].avr;
    return tot<=0;
}
```

#### 2. 作者：浅色调 (4星)
**关键亮点**：
- 思路清晰，直接通过二分答案+贪心解决问题。
- 代码简洁，逻辑明确，适合快速理解。

**核心代码**：
```cpp
inline bool check(double x)
{
    for(int i=1;i<=n;i++) a[i].div=a[i].v-x*a[i].c;
    sort(a+1,a+n+1,cmp);
    double tot=0;
    for(int i=1;i<=m;i++) tot+=a[i].div;
    return tot>=0;
}
```

#### 3. 作者：louzhenyu (4星)
**关键亮点**：
- 详细解释了二分答案的数学原理，并通过函数 $y = \sum v_i - x \sum c_i$ 进行验证。
- 代码结构清晰，易于理解。

**核心代码**：
```cpp
double getF(double x){
    double t[maxN];
    for(int i = 0; i < n; i++) t[i] = v[i] - x * c[i];
    sort(t, t + n);
    double sum = 0;
    for(int i = n; i >= n-m; i--) sum += t[i]; 
    return sum;
}
```

### 最优关键思路与技巧

1. **二分答案+贪心**：通过二分查找逼近最优解，结合贪心策略验证当前解的有效性。
2. **数学推导**：通过数学变形将问题转化为易于处理的形式，如 $\sum v_i - x \sum c_i$。
3. **排序优化**：在验证过程中，通过排序快速选取前 $m$ 个最优解。

### 可拓展之处

- **类似问题**：如最大化 $\dfrac{\sum a_i}{\sum b_i}$ 的问题，可以采用类似的二分答案+贪心策略。
- **优化思路**：在数据规模较大时，可以考虑进一步优化排序和选择过程，如使用堆结构。

### 推荐题目

1. [P1577 切绳子](https://www.luogu.com.cn/problem/P1577)
2. [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)
3. [P2884 [USACO07MAR]Monthly Expense S](https://www.luogu.com.cn/problem/P2884)

### 个人心得总结

- **二分答案的常见性**：二分答案是一种常见的解题思路，尤其在求解最大值或最小值问题时非常有效。
- **贪心策略的灵活性**：贪心策略可以结合多种算法使用，如二分答案、动态规划等，灵活运用可以大幅提高解题效率。
- **数学推导的重要性**：通过数学推导将问题转化为易于处理的形式，是解决复杂问题的关键步骤。

---
处理用时：27.09秒
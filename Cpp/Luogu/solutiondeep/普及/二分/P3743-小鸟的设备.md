# 题目信息

# 小鸟的设备

## 题目背景

小鸟有 $n$ 个可同时使用的设备。


## 题目描述

第 $i$ 个设备每秒消耗 $a_i$ 个单位能量。能量的使用是连续的，也就是说能量不是某时刻突然消耗的，而是匀速消耗。也就是说，对于任意实数，在 $k$ 秒内消耗的能量均为 $k\times a_i$ 单位。在开始的时候第 $i$ 个设备里存储着 $b_i$ 个单位能量。

同时小鸟又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能 $p$ 个单位，充能也是连续的，不再赘述。你可以在任意时间给任意一个设备充能，从一个设备切换到另一个设备的时间忽略不计。

小鸟想把这些设备一起使用，直到其中有设备能量降为  $0$。所以小鸟想知道，在充电器的作用下，她最多能将这些设备一起使用多久。

## 说明/提示

对于 $100\%$ 的数据，$1\leq n\leq 100000$，$1\leq p\leq 100000$，$1\leq a_i,b_i\leq100000$。


## 样例 #1

### 输入

```
2 1
2 2
2 1000
```

### 输出

```
2.0000000000```

## 样例 #2

### 输入

```
1 100
1 1```

### 输出

```
-1 ```

## 样例 #3

### 输入

```
3 5
4 3
5 2
6 1```

### 输出

```
0.5000000000 ```

# AI分析结果

### 综合分析与结论

本题的核心是通过二分答案来求解设备的最大使用时间，难点在于如何高效地验证某个时间是否可行。大多数题解采用了二分答案的思路，并通过贪心策略来计算所需的充电量。部分题解还提到了精度控制和边界处理的问题，这些都是实现中需要注意的细节。

### 所选高星题解

#### 题解1：作者：qq1010903229 (5星)
**关键亮点**：
- 清晰的二分答案思路，结合贪心策略验证时间可行性。
- 详细解释了无解情况的特判，代码结构清晰，易于理解。
- 代码中使用了`1e-6`来控制精度，确保了结果的准确性。

**核心代码**：
```cpp
int check(double ans){
    double q=p*ans;
    sum=0;
    for(int i=0;i<n;i++){
        if(a[i]*ans<=b[i]) continue;
        sum+=(a[i]*ans-b[i]);
    }
    return sum<=q;
}
```
**实现思想**：通过计算每个设备在给定时间内所需的充电量，并判断总充电量是否在充电器的能力范围内。

#### 题解2：作者：Konnyaku_LXZ (4星)
**关键亮点**：
- 详细解释了贪心策略的正确性，并提供了时间复杂度分析。
- 代码中使用了`1e-6`来控制精度，确保了结果的准确性。
- 提供了对二分答案的深入理解，适合初学者学习。

**核心代码**：
```cpp
double cost(LL a[], LL b[], LL L, LL R, double x){
    double sum=0;
    for(int i=L;i<=R;i++){
        double temp=a[i]*x;
        if(temp>b[i]) sum+=temp-b[i];
    }
    return sum;
}
```
**实现思想**：通过计算所有设备在给定时间内所需的充电量，并判断总充电量是否在充电器的能力范围内。

#### 题解3：作者：流绪 (4星)
**关键亮点**：
- 解释了充电器在不同设备之间切换的细节，强调了充电的连续性。
- 提供了对二分答案的深入理解，适合初学者学习。
- 代码中使用了`1e-6`来控制精度，确保了结果的准确性。

**核心代码**：
```cpp
int check(ld x){
    ld cnt = 0.0;
    for(int i=1;i<=n;i++){
        ld p= b[i]-a[i]*x;
        if(p<0) cnt += -p;
        if(cnt > x*m) return 0;
    }
    return 1;
}
```
**实现思想**：通过计算每个设备在给定时间内所需的充电量，并判断总充电量是否在充电器的能力范围内。

### 最优关键思路与技巧

1. **二分答案**：通过二分法来枚举可能的最大使用时间，结合贪心策略验证时间的可行性。
2. **贪心策略**：在验证时间时，优先为需要充电的设备计算所需的充电量，确保总充电量不超过充电器的能力。
3. **精度控制**：在二分过程中，使用`1e-6`或更小的精度来控制结果的准确性，避免因精度不足导致的错误。

### 可拓展之处

- **同类型题**：类似的二分答案与贪心策略结合的题目，如P3743（小鸟的设备）、P3744（小鸟的设备2）等。
- **算法套路**：二分答案结合贪心策略的题目，通常适用于求解最大值或最小值的问题，且验证过程可以通过贪心策略高效完成。

### 推荐题目

1. P3743 小鸟的设备
2. P3744 小鸟的设备2
3. P3745 小鸟的设备3

### 个人心得摘录

- **调试经历**：部分题解提到了在调试过程中遇到的精度问题，通过调整精度控制参数解决了问题。
- **踩坑教训**：在计算总充电量时，需要注意设备是否需要充电的判断条件，避免不必要的计算。
- **顿悟感想**：通过二分答案和贪心策略的结合，可以高效地解决复杂的优化问题，这种思路在竞赛中非常实用。

---
处理用时：26.54秒
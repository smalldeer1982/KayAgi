# 题目信息

# 递增

## 题目描述

现有数 $A_1,A_2,\cdots,A_n$，修改最少的数字为**实数**，使得数列严格单调递增。

注：原题误表述为修改为整数，现已纠正为实数。本题数据确保按照修改为整数的做法也可以 AC（只是不能过样例）

## 说明/提示

• 对于50% 的数据，$N \le 10^3$

• 对于100% 的数据，$1 \le N \le 10^5 , 1 \le A_i \le 10^9$


## 样例 #1

### 输入

```
3
1 3 2```

### 输出

```
1```

## 样例 #2

### 输入

```
8
1 2 3 4 4 5 6 7```

### 输出

```
1```

# AI分析结果

### 综合分析与结论

本题的核心是求最长上升子序列（LIS），并通过 `n - LIS` 得到需要修改的最少数字。题解中主要涉及两种思路：一种是直接使用 `O(n^2)` 的动态规划，另一种是使用 `O(n log n)` 的优化算法，通常借助二分查找或 STL 中的 `lower_bound` 函数来实现。大多数题解都采用了后者，因为前者在 `n=1e5` 时会超时。

### 所选高星题解

#### 1. 作者：The_Key (赞：71)  
**星级：5星**  
**关键亮点：**  
- 使用 `lower_bound` 函数优化 LIS 的求解，代码简洁且高效。
- 通过边输入边处理的方式，减少了额外的存储空间。
- 代码可读性强，逻辑清晰，适合初学者理解。

**核心代码：**
```cpp
for(long long i=1;i<=n;i++) {
    cin>>num;
    if(num>f[now]) f[++now]=num;
    else {
        *lower_bound(f+1,f+now+1,num)=num;
        sum++;
    }
}
```
**实现思想：**  
通过 `lower_bound` 找到第一个不小于 `num` 的位置，并将其替换为 `num`，从而维护一个有序的 LIS 数组。

#### 2. 作者：fls233666 (赞：24)  
**星级：4.5星**  
**关键亮点：**  
- 详细解释了 LIS 的求解思路，并提供了暴力解法和优化解法。
- 通过二分查找优化了 LIS 的求解，时间复杂度为 `O(n log n)`。
- 代码结构清晰，注释详细，适合进阶学习。

**核心代码：**
```cpp
for(int i=1;i<=n;i++) {
    if(a[i]>f[ans]) f[++ans]=a[i];
    else {
        int tz=lower_bound(f,f+ans,a[i])-f;
        f[tz]=a[i];
    }
}
```
**实现思想：**  
通过 `lower_bound` 找到第一个不小于 `a[i]` 的位置，并将其替换为 `a[i]`，从而维护一个有序的 LIS 数组。

#### 3. 作者：jijidawang (赞：8)  
**星级：4星**  
**关键亮点：**  
- 提供了 LIS 的 STL 实现，代码简洁且高效。
- 通过 `lower_bound` 优化了 LIS 的求解，时间复杂度为 `O(n log n)`。
- 代码结构清晰，适合快速实现。

**核心代码：**
```cpp
for (int i=1;i<n;i++) {
    if (dp[ans]<a[i]) ans++,dp[ans]=a[i];
    else {
        tmp=lower_bound(dp,dp+ans,a[i])-dp;
        dp[tmp]=a[i];
    }
}
```
**实现思想：**  
通过 `lower_bound` 找到第一个不小于 `a[i]` 的位置，并将其替换为 `a[i]`，从而维护一个有序的 LIS 数组。

### 最优关键思路与技巧

1. **LIS 的优化求解：** 通过 `lower_bound` 或二分查找，将 LIS 的求解时间复杂度从 `O(n^2)` 优化到 `O(n log n)`。
2. **边输入边处理：** 减少额外的存储空间，提高代码效率。
3. **STL 的使用：** 利用 STL 中的 `lower_bound` 函数简化代码实现。

### 可拓展之处

- **类似问题：** 可以扩展到求解最长不下降子序列、最长下降子序列等问题。
- **其他优化：** 可以使用树状数组或线段树进一步优化 LIS 的求解。

### 推荐题目

1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)  
2. [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091)  
3. [P1439 【模板】最长公共子序列](https://www.luogu.com.cn/problem/P1439)

### 个人心得总结

- **调试经历：** 部分题解提到在调试过程中发现 `lower_bound` 的使用细节，如返回值的处理。
- **踩坑教训：** 一些题解提到在极端数据下，暴力解法会超时，提醒了优化的重要性。
- **顿悟感想：** 通过 LIS 的优化求解，深刻理解了二分查找在算法优化中的应用。

---
处理用时：29.99秒
# 题目信息

# [蓝桥杯 2018 省 B] 递增三元组

## 题目描述

给定三个整数数组 $A = [A_1, A_2,\cdots, A_N]$，$B = [B_1, B_2,\cdots, B_N]$，$C = [C_1, C_2,\cdots,C_N]$。

请你统计有多少个三元组 $(i, j, k)$ 满足：
1. $1 \le i, j, k \le N$  
2. $A_i < B_j < C_k$

## 说明/提示

对于 $30\%$ 的数据，$1 \le N \le 100$。

对于 $60\%$ 的数据，$1 \le N \le 1000$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$0 \le A_i, B_i, C_i \le 10^5$。

## 样例 #1

### 输入

```
3
1 1 1
2 2 2
3 3 3```

### 输出

```
27```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效统计满足条件的三元组 $(i, j, k)$，即 $A_i < B_j < C_k$。题解中主要采用了以下几种思路：

1. **暴力枚举**：直接三层循环枚举所有可能的三元组，时间复杂度为 $O(n^3)$，适用于小规模数据，但无法通过大规模数据测试。
2. **二分优化**：通过枚举 $B_j$，利用二分查找在 $A$ 和 $C$ 数组中分别找到满足条件的 $A_i$ 和 $C_k$，时间复杂度为 $O(n \log n)$，能够通过大规模数据测试。
3. **双指针优化**：在排序后，使用双指针来统计满足条件的 $A_i$ 和 $C_k$，时间复杂度为 $O(n)$，进一步优化了时间复杂度。

最优的解法是**二分优化**，因为它既保证了时间复杂度，又易于实现。双指针优化虽然时间复杂度更低，但实现起来较为复杂，且在某些情况下可能不如二分查找直观。

### 所选高分题解

#### 题解1：liruixiong0101 (5星)
- **关键亮点**：思路清晰，代码简洁，详细解释了二分查找的应用，并通过乘法原理统计满足条件的三元组。
- **代码核心**：
  ```cpp
  for(int j = 1; j <= n; j++){
      int cnta = lower_bound(a + 1, a + 1 + n , b[j]) - a - 1;
      int cntc = upper_bound(c + 1, c + 1 + n , b[j]) - c;
      cntc = n - cntc + 1;
      ans += cnta * cntc;
  }
  ```
  **核心思想**：枚举 $B_j$，通过 `lower_bound` 和 `upper_bound` 分别找到满足条件的 $A_i$ 和 $C_k$，利用乘法原理累加结果。

#### 题解2：technopolis_2085 (4星)
- **关键亮点**：使用前缀和优化，通过桶排记录每个数的出现次数，进一步优化了时间复杂度。
- **代码核心**：
  ```cpp
  for (int i = 1; i <= n; i++){
      sum1[a[i]]++;
      sum2[c[i]]++; 
  }
  for (int i = 1; i <= (int)1e5; i++){
      sum1[i] += sum1[i-1];
  }
  for (int i = (int)1e5; i >= 0; i--){
      sum2[i] += sum2[i+1];
  }
  for (int i = 1; i <= n; i++){
      ans += sum1[b[i]-1] * sum2[b[i]+1];
  }
  ```
  **核心思想**：通过前缀和记录 $A$ 和 $C$ 数组中每个数的出现次数，枚举 $B_j$ 时直接通过前缀和计算满足条件的 $A_i$ 和 $C_k$。

#### 题解3：Zaku (4星)
- **关键亮点**：使用双指针优化，进一步降低了时间复杂度，代码实现较为优雅。
- **代码核心**：
  ```cpp
  for (int i = 1; i <= n; i ++ ){
      while (cnt <= n && a[cnt] < b[i]) cnt ++;
      while (cnt_ <= n && c[cnt_] <= b[i]) cnt_ ++;
      ans += (LL) (cnt - 1) * (n - cnt_ + 1); 
  }
  ```
  **核心思想**：枚举 $B_j$，使用双指针统计满足条件的 $A_i$ 和 $C_k$，通过乘法原理累加结果。

### 最优关键思路与技巧

1. **二分查找**：通过 `lower_bound` 和 `upper_bound` 快速找到满足条件的元素，时间复杂度为 $O(\log n)$。
2. **乘法原理**：在枚举 $B_j$ 时，通过乘法原理计算满足条件的 $A_i$ 和 $C_k$ 的组合数，避免了重复计算。
3. **前缀和优化**：通过前缀和记录每个数的出现次数，进一步优化了时间复杂度。

### 可拓展之处

1. **类似题目**：可以尝试解决其他需要统计满足条件的组合数的问题，如统计满足 $A_i + B_j = C_k$ 的三元组。
2. **算法套路**：在需要统计满足条件的组合数时，可以考虑使用二分查找、双指针或前缀和等优化方法。

### 推荐题目

1. [P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102)
2. [P1631 序列合并](https://www.luogu.com.cn/problem/P1631)
3. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)

### 个人心得总结

- **调试经历**：在实现二分查找时，注意边界条件的处理，避免出现数组越界或死循环。
- **踩坑教训**：在统计满足条件的组合数时，注意数据类型的范围，避免溢出。
- **顿悟感想**：通过枚举中间元素 $B_j$，可以简化问题，利用二分查找或双指针快速统计满足条件的组合数。

---
处理用时：32.96秒
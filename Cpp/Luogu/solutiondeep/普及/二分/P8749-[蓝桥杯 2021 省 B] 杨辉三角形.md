# 题目信息

# [蓝桥杯 2021 省 B] 杨辉三角形

## 题目描述

下面的图形是著名的杨辉三角形:

![](https://cdn.mathpix.com/cropped/2022_09_29_08f7179868ee6cb62df7g-11.jpg?height=350&width=704&top_left_y=944&top_left_x=676)

如果我们按从上到下、从左到右的顺序把所有数排成一列，可以得到如下数列：

$1,1,1,1,2,1,1,3,3,1,1,4,6,4,1, \ldots$

给定一个正整数 $N$，请你输出数列中第一次出现 $N$ 是在第几个数。

## 说明/提示

对于 $20 \%$ 的评测用例, $1 \leq N \leq 10$;

对于所有评测用例, $1 \leq N \leq 10^9$ 。 

蓝桥杯 2021 第一轮省赛 B 组 H 题。

## 样例 #1

### 输入

```
6```

### 输出

```
13```

# AI分析结果

### 综合分析与结论

本题的核心在于利用杨辉三角的性质，通过组合数的单调性和二分查找来高效地找到目标数在序列中的位置。两个题解都采用了从大到小枚举对角线的方式，并利用组合数的计算和二分查找来优化搜索过程。Comentropy的题解在代码实现上更为简洁，且通过防止溢出的优化提升了代码的鲁棒性；0x3F的题解则通过暴力枚举和组合数计算的结合，提供了另一种思路，但代码可读性和优化程度稍逊。

### 所选题解

#### 1. Comentropy (5星)
- **关键亮点**：
  - 利用组合数的单调性和二分查找，显著降低了时间复杂度。
  - 通过防止溢出的优化，提升了代码的鲁棒性。
  - 代码简洁，逻辑清晰，易于理解。
- **个人心得**：
  - 在组合数计算中添加了防止溢出的判断，避免了潜在的bug。
  - 通过二分查找的优化，将复杂度降低到$\Theta(\log n)$级别。

```cpp
LL C(LL a,LL b){
    LL res=1;
    for(LL i=a,j=1;j<=b;i--,j++){
        res=res*i/j;
        if(res>n)	// fixed
            return res;
    }
	return res;
}
```

#### 2. 0x3F (4星)
- **关键亮点**：
  - 通过暴力枚举和组合数计算的结合，提供了另一种思路。
  - 从大到小枚举对角线，减少了搜索范围。
- **个人心得**：
  - 通过枚举对角线的方式，简化了搜索过程，但代码可读性和优化程度稍逊。

```cpp
inline ll C(ll n, ll k) {
	ll res = 1;
	for (ll i = 1; i <= k; i++) {
		res = res * (n - k + i) / i;
	}
	return res;
}
```

### 最优关键思路或技巧

- **组合数的单调性与二分查找**：利用组合数在斜行上的单调性，通过二分查找快速定位目标数。
- **防止溢出优化**：在组合数计算中添加防止溢出的判断，提升代码的鲁棒性。

### 可拓展之处

- **类似算法套路**：在涉及组合数或排列数的问题中，可以利用单调性和二分查找来优化搜索过程。
- **同类型题**：可以考虑其他涉及组合数或排列数的问题，如“寻找第k个排列”等。

### 推荐题目

1. **P2822 [NOIP2016 提高组] 组合数问题**（题号：2822）
2. **P1357 [NOIP2014 提高组] 联合权值**（题号：1357）
3. **P1373 [NOIP2016 提高组] 小A的礼物**（题号：1373）

---
处理用时：18.38秒
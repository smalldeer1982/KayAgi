# 题目信息

# [PA 2021] Sumy

## 题目描述

有 $n$ 条鱼，其中第 $i$ 条的质量为 $a_i$ 克。

$x$ 能吃掉 $y$ 当且仅当 $a_x > a_y$。

若 $x$ 吃了 $y$，$y$ 会消失，$a_x$ 会变为 $a_x + a_y$。

你可以随意指定吃鱼的顺序，直至留下一条鱼为止。

求每一条鱼是否可能被作为最后**唯一**的鱼留下。**若最终无法只剩下一条鱼，则每条鱼均不满足此条件。**

## 说明/提示

#### 样例 #1 解释
下面用 $x \rightarrow y$ 表示 $x$ 吃 $y$。

留下 $2$ 号鱼的一种方案如下：$2 \rightarrow 1, 2 \rightarrow 3, 2 \rightarrow 4, 2 \rightarrow 5, 2 \rightarrow 6$。
#### 数据范围
对于 $100\%$ 的数据，$1 \leq n \leq 5 \times 10^5$，$1 \leq a_i \leq 10^9$。

## 样例 #1

### 输入

```
6
2 7 1 8 2 8```

### 输出

```
NTNTNT```

## 样例 #2

### 输入

```
3
5 4 4```

### 输出

```
TNN```

# AI分析结果

### 综合分析与结论

本题的核心在于通过排序和二分查找来优化暴力枚举的复杂度。所有题解都基于一个关键观察：如果一条鱼能活到最后，那么所有比它重的鱼也一定能活到最后。这一单调性使得二分查找成为可能，将时间复杂度从 \(O(n^2)\) 降低到 \(O(n \log n)\)。

大多数题解的思路相似，都是先对鱼的质量进行排序，然后通过二分查找确定最小的能活到最后的鱼，最后根据这个分界点输出结果。不同题解在实现细节上有所差异，如是否使用前缀和、如何处理相同质量的鱼等。

### 所选高星题解

#### 1. 作者：ZepX_D (5星)
- **关键亮点**：思路清晰，代码简洁，使用了队列来模拟吃鱼过程，避免了复杂的边界处理。
- **个人心得**：通过二分查找和单调性优化，避免了暴力枚举的低效。

```cpp
bool check(int k) {
    while(!q.empty()) q.pop();
    for (int i = 1;i <= n;i++)
        if (i != k) q.push(a[i].w);
    ll s = a[k].w;
    while (!q.empty()) {
        if (q.front() >= s) return 0;
        s += q.front();q.pop();
    }
    return 1;
}
```

#### 2. 作者：251Sec (4星)
- **关键亮点**：代码结构清晰，二分查找的实现简洁明了，使用了结构体来存储鱼的质量和编号。
- **个人心得**：通过二分查找和单调性优化，避免了暴力枚举的低效。

```cpp
bool check(int x) {
    ll t = a[x].v;
    for (int i = 1; i <= n; i++) {
        if (i == x) continue;
        if (t <= a[i].v) return false;
        t += a[i].v;
    }
    return true;
}
```

#### 3. 作者：chlchl (4星)
- **关键亮点**：处理了相同质量鱼的情况，使用了前缀和来优化计算，代码逻辑严谨。
- **个人心得**：通过前缀和和二分查找，优化了判断过程。

```cpp
bool check(int mid){
    if(!s[n]) return 0;
    for(int i=mid+1;i<=n;i++)
        if(s[i - 1] + a[i - 1].x <= a[i].x)
            return 0;
    return 1;
}
```

### 最优关键思路与技巧

1. **排序与单调性**：通过排序将问题转化为单调性问题，使得二分查找成为可能。
2. **二分查找**：利用二分查找确定最小的能活到最后的鱼，从而优化时间复杂度。
3. **前缀和**：使用前缀和来快速计算鱼的质量总和，避免重复计算。
4. **队列模拟**：通过队列模拟吃鱼过程，简化了代码实现。

### 可拓展之处

- **同类型题**：类似的问题可以通过排序和二分查找来优化，如查找满足某些条件的最小或最大值。
- **算法套路**：单调性和二分查找是解决许多优化问题的常用套路，可以应用于其他类似问题。

### 推荐题目

1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)
3. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)

### 个人心得总结

- **调试经历**：在处理相同质量鱼的情况时，需要特别注意边界条件，避免出现错误。
- **踩坑教训**：在二分查找时，注意边界条件的处理，避免死循环或漏判。
- **顿悟感想**：通过排序和二分查找，可以将许多看似复杂的问题简化，提高解题效率。

---
处理用时：28.95秒
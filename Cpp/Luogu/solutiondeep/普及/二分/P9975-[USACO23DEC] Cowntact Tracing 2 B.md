# 题目信息

# [USACO23DEC] Cowntact Tracing 2 B

## 题目描述

Farmer John 有 $N$ 头奶牛排成一列（$1 \leq N \leq 3\cdot 10^5$）。不幸的是，有一种疾病正在传播。

最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它左右两边的奶牛（如果这些奶牛存在的话）。一旦奶牛被感染，她就会持续处于感染状态。

经过一些晚上，Farmer John 意识到情况已经失控，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。请找出最少有多少头奶牛最初可能感染了这种疾病。

## 说明/提示

### 样例解释 1

假设只有中间的奶牛最初被感染。那么，奶牛们将按以下顺序被感染：

- 第 $0$ 晚：$00100$（第三只奶牛一开始被感染）
- 第 $1$ 晚：$01110$（第二和第四只奶牛现在被感染了）
- 第 $2$ 晚：$11111$（第一和第五只奶牛现在被感染了）
- 第 $3$ 晚：$11111$（所有的奶牛都已经被感染了，没有新的奶牛被感染）
- ……

经过两个或更多的晚上，奶牛们的状态即与输入的状态相符。还有许多其他的初始状态和夜晚数量可能导致了输入的状态，例如：

- 第 $0$ 晚：$10001$
- 第 $1$ 晚：$11011$
- 第 $2$ 晚：$11111$

或者：

- 第 $0$ 晚：$01001$
- 第 $1$ 晚：$11111$

或者：

- 第 $0$ 晚：$01000$
- 第 $1$ 晚：$11100$
- 第 $2$ 晚：$11110$
- 第 $3$ 晚：$11111$

所有这些初始状态中至少有一头奶牛被感染。

### 样例解释 2

唯一可能导致这个最终状态的初始状态和夜晚数是：没有经过任何夜晚，输入中的四头感染的奶牛都是从最开始就感染了这种疾病。

### 测试点性质

- 测试点 $3-7$ 满足 $N \le 1000$。
- 测试点 $8-12$ 没有额外限制。

## 样例 #1

### 输入

```
5
11111```

### 输出

```
1```

## 样例 #2

### 输入

```
6
011101```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

本题的核心在于通过贪心策略和模拟传播过程，找到最少初始感染的奶牛数量。各题解的思路大多集中在以下几点：

1. **贪心策略**：通过最大化传播天数来最小化初始感染奶牛数量。
2. **分段处理**：将连续的感染奶牛分段处理，分别计算每段的最大传播天数。
3. **边界处理**：特别处理位于边界的感染段，因为它们的传播方式与中间段不同。
4. **数学计算**：通过数学公式计算每段所需的最少初始感染奶牛数量。

大部分题解的思路相似，但在实现细节和代码可读性上有所差异。以下是对各题解的评分和关键亮点的总结。

### 所选高星题解

#### 题解1：No_Rest (4星)
- **关键亮点**：思路清晰，代码结构合理，边界处理得当。
- **核心思想**：通过遍历奶牛状态，记录每段连续感染的起点和终点，计算每段的最大传播天数，最后根据传播天数计算初始感染奶牛数量。
- **代码片段**：
  ```cpp
  for(re ll i = 1; i <= n; ++i){
      if(a[i]){
          last++;
          if(!a[i - 1]) st.push_back(i);
      } else if(!a[i] && last){
          if(st[st.size() - 1] == 1) mn = min(mn, i - 2);
          else mn = min(mn, (last - 1) / 2);
          last = 0, ed.push_back(i - 1);
      }
  }
  ```

#### 题解2：Expert_Dream (4星)
- **关键亮点**：代码简洁，逻辑清晰，贪心策略明确。
- **核心思想**：通过贪心策略最大化传播天数，然后根据每段的长度计算初始感染奶牛数量。
- **代码片段**：
  ```cpp
  for(auto it:v){
      if(it.second == 0)min2 = min(min2,it.first);
      else{
          min2 = min(min2,it.first * 2-1);
          if(xx == -1)
              xx = it.first;
          else
              yy = it.first;
      }    
  }
  ```

#### 题解3：Adchory (4星)
- **关键亮点**：代码结构清晰，边界处理得当，贪心策略明确。
- **核心思想**：通过贪心策略最大化传播天数，然后根据每段的长度计算初始感染奶牛数量。
- **代码片段**：
  ```cpp
  for(ll i=1;i<=N+1;i++){
      if(S[i]!=S[i-1]&&S[i]=='1') cnt=1;
      if(S[i]==S[i-1]&&S[i]=='1') cnt++;
      if(S[i]!=S[i-1]&&S[i-1]=='1'){
          if(i-cnt==1) res=min(res,cnt-1);
          else if(i==N+1) res=min(res,cnt-1);
          else res=min(res,(cnt-1)/2);
          g.emplace_back(cnt),cnt=0;
      }
  }
  ```

### 最优关键思路与技巧

1. **贪心策略**：通过最大化传播天数来最小化初始感染奶牛数量。
2. **分段处理**：将连续的感染奶牛分段处理，分别计算每段的最大传播天数。
3. **边界处理**：特别处理位于边界的感染段，因为它们的传播方式与中间段不同。
4. **数学计算**：通过数学公式计算每段所需的最少初始感染奶牛数量。

### 可拓展之处

1. **类似题目**：可以扩展到其他需要模拟传播过程的题目，如病毒传播、信息传播等。
2. **算法套路**：贪心策略和分段处理可以应用于其他需要最小化初始条件的题目。

### 推荐题目

1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)
3. [P1056 排座椅](https://www.luogu.com.cn/problem/P1056)

### 个人心得总结

- **调试经历**：在处理边界条件时，容易忽略特殊情况，如第一头或最后一头奶牛被感染的情况。
- **踩坑教训**：在计算传播天数时，需要特别注意奇数段和偶数段的处理方式。
- **顿悟感想**：通过贪心策略和分段处理，可以有效地简化问题，提高解题效率。

---
处理用时：28.57秒
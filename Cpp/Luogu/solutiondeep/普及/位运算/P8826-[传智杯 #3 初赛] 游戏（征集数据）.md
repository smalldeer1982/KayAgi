# 题目信息

# [传智杯 #3 初赛] 游戏（征集数据）

## 题目描述

清蒸鱼是一个从未被击败的炽蓝仙野游戏者。有一天他遇到了这么一个游戏：

给定一个长度为 $n$ 的数组 $a$。同时定义 $count(x)$ 为 $x$ 在二进制下的 $1$ 的个数。

现在清蒸鱼每次可以进行如下两种操作：

- 选择两个数 $a_i, a_j$，并且必须满足 $count(a_i \operatorname{xor} a_j)=1$，将它们中的任意一个从数组中消去，代价为 $C_1$。

- 选择两个数 $a_i, a_j$，并且必须满足 $count(a_i \operatorname{xor} a_j) > 1$，将它们中的任意一个从数组中消去，代价为 $C_2$。

现在你想知道，最少付出多少的代价，能让这个数组被消到只剩一个数。

## 说明/提示

对于 $20\%$ 的数据，满足 $n = 10$；  
对于另外 $20\%$ 的数据，满足 $a$ 中的元素为一个 $[1, n]$ 的排列；  
对于 $100\%$ 的数据，满足 $1 \leq n \leq {10}^4$，$1\le C_1, C_2, a \le {10}^9$，$a$ 中的元素互不相同。

## 样例 #1

### 输入

```
4
5 10
1 2 3 4```

### 输出

```
20```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效地计算两个数的异或结果中1的个数，并根据不同的条件选择最小代价的操作。题解中主要涉及以下思路和技巧：

1. **异或结果的判断**：通过 `lowbit` 函数快速判断异或结果是否只有一个1，从而决定使用哪种操作。
2. **并查集的应用**：通过并查集来管理已经操作过的数，避免重复操作。
3. **贪心策略**：优先使用代价较小的操作，从而最小化总代价。

### 所选题解

#### 1. 作者：GavinCayne (★★★★★)
- **关键亮点**：
  - 使用 `lowbit` 函数高效判断异或结果是否只有一个1。
  - 结合并查集管理操作过的数，避免重复操作。
  - 代码结构清晰，逻辑严谨。
- **个人心得**：
  - 通过讨论区大神的思路豁然开朗，强调了 `lowbit` 函数的重要性。
  - 提到数据问题，提醒了在实现时要注意边界条件。

**核心代码**：
```cpp
int lowbit(int x) {
    return x & (-x);
}

signed main() {
    cin >> n >> c1 >> c2;
    for (int i = 1; i <= n; i++) {
        cin >> a[i]; f[i] = i;
    }
    if (c1 == c2) {
        cout << (n - 1) * c1;
        return 0;
    }
    for (int i = 1; i < n; i++) {
        for (int j = i + 1; j <= n; j++) {
            int pd = 0, xornum = a[i] ^ a[j];
            if ((xornum || n <= 10) && lowbit(xornum) == xornum) pd = 1;
            if ((c1 < c2 && pd) || (c1 > c2 && !pd)) {
                int f1 = findfather(i), f2 = findfather(j);
                if (f1 != f2) {
                    ans++; f[f1] = f2;
                }
            }
        }
    }
    cout << (max(c1, c2) * (n - 1 - ans) + min(c1, c2) * ans);
    return 0;
}
```

#### 2. 作者：wangshengchen (★★★★)
- **关键亮点**：
  - 明确提出了贪心策略，优先使用代价较小的操作。
  - 强调了数据范围较大，提醒了优化的重要性。
- **个人心得**：
  - 通过构建函数来计算异或结果中的1的个数，思路清晰。

**核心代码**：
```cpp
// 未提供具体代码，但强调了优先使用C1操作的贪心策略。
```

#### 3. 作者：__Immorta__ (★★★★)
- **关键亮点**：
  - 详细分析了异或结果的含义，并提出了贪心策略。
  - 提到了预处理和哈希表的使用，增强了代码的可读性。
- **个人心得**：
  - 通过预处理和哈希表来优化查找过程，思路清晰。

**核心代码**：
```cpp
// 未提供具体代码，但强调了预处理和哈希表的使用。
```

### 最优关键思路或技巧

1. **`lowbit` 函数的应用**：通过 `lowbit` 函数快速判断异或结果是否只有一个1，从而决定使用哪种操作。
2. **并查集管理操作**：通过并查集来管理已经操作过的数，避免重复操作。
3. **贪心策略**：优先使用代价较小的操作，从而最小化总代价。

### 可拓展之处

- **类似算法套路**：在处理需要频繁查找和合并的问题时，可以考虑使用并查集来优化。
- **同类型题目**：可以尝试解决其他需要高效判断二进制特征的问题，如判断两个数的汉明距离等。

### 推荐题目

1. [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)
2. [P3367 【模板】并查集](https://www.luogu.com.cn/problem/P3367)
3. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)

这些题目涵盖了树状数组、并查集和线性筛等算法，与本题中的 `lowbit` 函数和并查集应用有相似之处，有助于进一步巩固相关知识点。

---
处理用时：31.11秒
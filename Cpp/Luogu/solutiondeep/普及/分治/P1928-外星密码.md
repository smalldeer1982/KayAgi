# 题目信息

# 外星密码

## 题目描述

有了防护伞，并不能完全避免 2012 的灾难。地球防卫小队决定去求助外星种族的帮助。经过很长时间的努力，小队终于收到了外星生命的回信。但是外星人发过来的却是一串密码。只有解开密码，才能知道外星人给的准确回复。解开密码的第一道工序就是解压缩密码，外星人对于连续的若干个相同的子串 $\texttt{X}$ 会压缩为 $\texttt{[DX]}$ 的形式（$D$ 是一个整数且 $1\leq D\leq99$），比如说字符串 $\texttt{CBCBCBCB}$ 就压缩为 $\texttt{[4CB]}$ 或者$\texttt{[2[2CB]]}$，类似于后面这种压缩之后再压缩的称为二重压缩。如果是 $\texttt{[2[2[2CB]]]}$ 则是三重的。现在我们给你外星人发送的密码，请你对其进行解压缩。


## 说明/提示

【数据范围】

对于 $50\%$ 的数据：解压后的字符串长度在 $1000$ 以内，最多只有三重压缩。

对于 $100\%$ 的数据：解压后的字符串长度在 $20000$ 以内，最多只有十重压缩。保证只包含数字、大写字母、`[` 和 `]`。


## 样例 #1

### 输入

```
AC[3FUN]```

### 输出

```
ACFUNFUNFUN```

# AI分析结果



### 综合分析与结论
本题核心在于处理多层嵌套压缩结构，主要解法集中在递归与栈的应用。递归解法利用函数调用栈处理嵌套层级，栈解法显式维护解压状态。两者均需正确处理数字提取与字符串拼接顺序，时间复杂度均为 O(N)（N为解压后长度）。

---

### 高分题解推荐

#### 1. 云浅知处（五星）
**核心思路**：递归分解嵌套结构，遇到 `[` 时递归处理子串，`]` 时返回当前层解压结果  
**关键亮点**：
- 使用 `cin` 逐字符读取天然支持嵌套层级处理
- 变量定义在函数内部避免递归污染
- 代码简洁优雅（仅20行核心逻辑）

**调试心得**：  
> "注意：ch,s,str应该定义在函数内部，否则会导致RE/MLE"  
> ——强调递归中局部变量的重要性，避免状态污染

**核心代码**：
```cpp
string yunqian(){
    int k; string s="", str="";
    while(cin>>ch){
        if(ch=='['){
            cin>>k;
            str = yunqian();
            while(k--) s += str;
        }
        else if(ch==']') return s;
        else s += ch;
    }
}
```

#### 2. 檀黎斗·神（四星）
**核心思路**：显式栈维护，结构体存储当前重复次数与字符串片段  
**关键亮点**：
- 栈结构清晰记录每层状态
- 无需处理复杂括号匹配，直接拼接字符串
- 适合超深层级压缩（理论支持无限嵌套）

**核心代码**：
```cpp
struct stack{ int t; string s; }st[20];
int main(){
    for(char c : s){
        if(c=='[') st[++len] = {"",0};
        else if(isdigit(c)) st[len].t = st[len].t*10 + c-'0';
        else if(c==']'){
            string tmp;
            while(st[len].t--) tmp += st[len].s;
            st[--len].s += tmp;
        }
        else st[len].s += c;
    }
}
```

#### 3. Elma_（四星）
**核心思路**：递归解压，通过输入流特性自动处理层级  
**关键亮点**：
- 利用 `cin` 的流式读取简化嵌套处理
- 函数返回拼接结果天然形成后序拼接
- 代码量极少（仅15行核心逻辑）

**核心代码**：
```cpp
string expand(){
    string key; char c;
    while(cin>>c){
        if(c=='['){
            int num; cin>>num;
            string x=expand();
            while(num--) key+=x;
        }
        else if(c==']') return key;
        else key += c;
    }
}
```

---

### 关键思路总结
1. **递归与输入流结合**：利用 `cin` 的流式读取自动推进处理位置，天然支持嵌套层级的深度优先遍历
2. **栈状态显式管理**：通过结构体记录每层的重复次数和中间字符串，避免递归栈溢出风险
3. **局部变量防污染**：递归函数内定义关键变量确保各层状态隔离
4. **后序拼接策略**：无论递归还是栈解法，均采用 "先处理深层内容，再拼接上层结果" 的顺序

---

### 拓展练习推荐
1. [P1944 最长括号匹配](https://www.luogu.com.cn/problem/P1944) - 栈处理嵌套结构
2. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090) - 优先队列维护状态（类似栈思想）
3. [P3719 重新排列](https://www.luogu.com.cn/problem/P3719) - 多层嵌套字符串处理

---
处理用时：63.59秒
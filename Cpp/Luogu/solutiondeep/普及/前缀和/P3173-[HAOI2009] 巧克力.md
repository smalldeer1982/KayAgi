# 题目信息

# [HAOI2009] 巧克力

## 题目描述

有一块 $n \times m$ 的矩形巧克力，准备将它切成 $n \times m$ 块。巧克力上共有 $n-1$ 条横线和 $m-1$ 条竖线，你每次可以沿着其中的一条横线或竖线将巧克力切开，无论切割的长短，沿着每条横线切一次的代价依次为 $y_1,y_2,\cdots,y_{n-1}$，而沿竖线切割的代价依次为 $x_1,x_2,\cdots,x_{m-1}$。

例如，对于下图 $6 \times 4$ 的巧克力，我们先沿着三条横线切割，需要 $3$ 刀，得到 $4$ 条巧克力，然后再将这 $4$ 条巧克力沿竖线切割，每条都需要 $5$ 刀，则最终所花费的代价为 $y_1+y_2+y_3+4 \times (x_1+x_2+x_3+x_4+x_5)$。

![](https://cdn.luogu.com.cn/upload/image_hosting/juiv548x.png)


当然，上述简单切法不见得是最优切法，那么怎样切割该块巧克力，花费的代价最少呢？


## 说明/提示


$30\%$ 的数据，$n \leq 100,m \leq 100$；

$100\%$ 的数据，$n \leq 10000,m \leq 10000$；

## 样例 #1

### 输入

```
6 4
2
1
3
1
4
4
1
2```

### 输出

```
42```

# AI分析结果

### 综合分析与结论

本题的核心在于通过贪心策略最小化切割巧克力的总代价。大多数题解都采用了类似的贪心思路：优先切割代价较高的线，以减少后续切割的代价。具体来说，每次选择当前代价最高的切割线（无论是横向还是纵向），并根据已经切割的次数计算当前切割的代价。这种策略能够保证局部最优，从而推导出全局最优解。

### 所选高星题解

#### 1. 作者：Tarsal (赞：17)  
**星级：5星**  
**关键亮点：**  
- 使用优先队列（`priority_queue`）来维护切割线的代价，确保每次都能快速选择当前代价最高的切割线。
- 通过两个变量 `s1` 和 `s2` 分别记录横向和纵向切割的次数，动态计算每次切割的代价。
- 代码结构清晰，注释详细，易于理解。

**核心代码：**
```cpp
while(!q1.empty() && !q2.empty()){
    if(q1.top() > q2.top()) {sum+=q1.top()*s2,s1++; q1.pop();}
    else {sum+=q2.top()*s1,s2++; q2.pop();}
}
while(!q1.empty()) {sum+=q1.top()*s2; q1.pop();}
while(!q2.empty()) {sum+=q2.top()*s1; q2.pop();}
```
**实现思想：** 通过优先队列动态选择当前代价最高的切割线，并根据已经切割的次数计算当前切割的代价。

#### 2. 作者：kkxhh (赞：12)  
**星级：4星**  
**关键亮点：**  
- 通过结构体记录每条切割线的代价和方向，使用排序算法（`sort`）来确保每次选择代价最高的切割线。
- 使用两个变量 `x` 和 `y` 分别记录横向和纵向切割的次数，动态计算每次切割的代价。
- 代码简洁，逻辑清晰。

**核心代码：**
```cpp
sort(a+1,a+n+m-1,cmp);
for(int i=1;i<=n+m-2;i++){
    if(a[i].y==1) {x++; ans+=a[i].x*(y+1);}
    else {y++; ans+=a[i].x*(x+1);}
}
```
**实现思想：** 通过排序确保每次选择代价最高的切割线，并根据已经切割的次数计算当前切割的代价。

#### 3. 作者：Cyxhsa (赞：5)  
**星级：4星**  
**关键亮点：**  
- 使用结构体记录每条切割线的代价和方向，通过排序算法（`sort`）来确保每次选择代价最高的切割线。
- 使用数组 `c[2]` 分别记录横向和纵向切割的次数，动态计算每次切割的代价。
- 代码结构清晰，注释详细。

**核心代码：**
```cpp
sort(a+1,a+n+m+1,cmp);
for (i=1;i<=n+m;i++){
    c[a[i].c]++;
    if(a[i].c==0) ans+=a[i].v*(c[1]+1);
    if(a[i].c==1) ans+=a[i].v*(c[0]+1);
}
```
**实现思想：** 通过排序确保每次选择代价最高的切割线，并根据已经切割的次数计算当前切割的代价。

### 最优关键思路与技巧

1. **贪心策略：** 优先切割代价较高的线，以减少后续切割的代价。
2. **数据结构：** 使用优先队列或排序算法来快速选择当前代价最高的切割线。
3. **动态计算：** 通过记录已经切割的次数，动态计算每次切割的代价。

### 可拓展之处

- **类似问题：** 类似的问题可以扩展到其他需要最小化代价的切割或分割问题，如木材切割、布料切割等。
- **算法套路：** 贪心算法在处理类似问题时非常有效，尤其是在需要局部最优推导全局最优的场景中。

### 推荐题目

1. **P1324 矩形分割**  
2. **P3173 [HAOI2009] 巧克力**  
3. **P1090 合并果子**

### 个人心得总结

- **调试经历：** 在实现贪心策略时，确保每次选择的切割线是当前代价最高的，并且正确计算切割次数是关键。
- **踩坑教训：** 在计算切割代价时，需要注意已经切割的次数，避免重复计算或遗漏。
- **顿悟感想：** 贪心策略在处理类似问题时非常有效，尤其是在需要局部最优推导全局最优的场景中。

---
处理用时：26.05秒
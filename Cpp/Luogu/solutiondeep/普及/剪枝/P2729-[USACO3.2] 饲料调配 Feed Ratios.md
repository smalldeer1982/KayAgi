# 题目信息

# [USACO3.2] 饲料调配 Feed Ratios

## 题目背景

农夫约翰从来只用调配得最好的饲料来喂他的奶牛。饲料用三种原料调配成：大麦，燕麦和小麦。他知道自己的饲料精确的配比，在市场上是买不到这样的饲料的。他只好购买其他三种混合饲料（同样都由三种麦子组成），然后将它们混合，来调配他的完美饲料。


## 题目描述

给出三组整数，表示 大麦：燕麦：小麦 的比例，找出用这三种饲料调配 x：y：z 的饲料的方法。

例如，给出目标饲料 3：4：5 和三种饲料的比例：

1:2:3
3:7:1
2:1:2
你必须编程找出使这三种饲料用量最少的方案，要是不能用这三种饲料调配目标饲料，输出“NONE”。“用量最少”意味着三种饲料的用量（整数）的和必须最小。


对于上面的例子，你可以用8份饲料1，1份饲料2，和5份饲料3，来得到7份目标饲料：

8\*(1:2:3) + 1\*(3:7:1) + 5\*(2:1:2) = (21:28:35) = 7\*(3:4:5)

表示饲料比例的整数以及目标饲料的都是小于100的非负整数。表示各种饲料的份数的整数，都小于100。一种混合物的比例不会由其他混合物的比例直接相加得到。


## 说明/提示

题目翻译来自NOCOW。

USACO Training Section 3.2


## 样例 #1

### 输入

```
3 4 5
1 2 3
3 7 1
2 1 2 ```

### 输出

```
8 1 5 7```

# AI分析结果

### 综合分析与结论

本题的核心在于通过枚举或数学方法找到三种饲料的混合比例，使得混合后的饲料比例与目标比例一致，并且总用量最小。题解中主要采用了以下几种思路：

1. **数学方法**：如柯西不等式、高斯消元、行列式求解等，利用数学工具直接求解方程组，避免枚举。
2. **枚举法**：通过枚举饲料的用量，判断是否满足目标比例，通常结合剪枝优化。
3. **DFS/BFS**：通过深度优先搜索或广度优先搜索，逐步尝试不同的饲料组合，找到满足条件的最小用量。

从题解的质量来看，大部分题解都较为直接，但缺乏对算法复杂度的深入分析，且部分代码可读性较差。以下是对部分题解的简要评分与亮点分析：

### 所选高星题解

#### 1. 作者：Flokirie (赞：31)  
**星级：4.5**  
**关键亮点**：  
- 利用柯西不等式避免了特判0的情况，数学方法巧妙且高效。  
- 代码简洁，逻辑清晰，适合数学基础较好的同学学习。  

**核心代码**：
```cpp
#define squ(x) ((x)*(x))
if ((squ(a)+squ(b)+squ(c))*(squ(x)+squ(y)+squ(z))==squ(a*x+b*y+c*z)){
    //do something...
}
```
**实现思想**：通过柯西不等式的等号成立条件，判断混合后的饲料比例是否与目标比例成比例关系，避免了复杂的枚举和特判。

#### 2. 作者：Mingoal (赞：10)  
**星级：4**  
**关键亮点**：  
- 使用高斯消元法求解方程组，避免了枚举，时间复杂度较低。  
- 代码结构清晰，虽然存在精度问题，但整体思路值得借鉴。  

**核心代码**：
```cpp
int gauss(){//高斯消元
    int i,j;
    double now;
    for (i=0;i<3;++i){
        int k=i;
        for (j=i+1;j<3;++j)
        if (fabs(a[j][i])>fabs(a[k][i])) k=j;
        if ((fabs(now=a[k][i]))<eps) return 1;
        for (j=i;j<=3;++j) swap(a[i][j],a[k][j]);
        for (j=i;j<=3;++j) a[i][j]/=now;
        for (k=0;k<3;++k)
            if (k!=i){
               now=a[k][i];
               for (j=i;j<=3;++j) a[k][j]-=a[i][j]*now; 
            }
    }
    return 0;
}
```
**实现思想**：通过高斯消元法求解线性方程组，判断是否存在整数解，避免了枚举的复杂度。

#### 3. 作者：珅肐 (赞：6)  
**星级：4**  
**关键亮点**：  
- 通过枚举饲料的用量，结合数学推导，证明了第一个找到的解即为最小解。  
- 思路清晰，代码简洁，适合初学者理解。  

**核心代码**：
```cpp
for (i=0;i<=100;i++)//枚举每种饲料的份数
    for (j=0;j<=100;j++)
        for (k=0;k<=100;k++)
        {
            if (i==0&&j==0&&k==0) continue;
            a=(f[1][1]*i)+(f[2][1]*j)+(f[3][1]*k);//大麦 
            b=(f[1][2]*i)+(f[2][2]*j)+(f[3][2]*k);//燕麦
            c=(f[1][3]*i)+(f[2][3]*j)+(f[3][3]*k);//小麦
            int ma=0,mb=0,mc=0;
            int da=0,db=0,dc=0;
            if (aa!=0)
            {
                ma=a%aa;
                da=a/aa;
            }
            if (bb!=0)
            {
                mb=b%bb;
                db=b/bb;
            }
            if (cc!=0)
            {
                mc=c%cc;
                dc=c/cc;
            }
            if (ma==0&&mb==0&&mc==0)//能够整除 
            {
                int ff=0;//标记用 
                if (bb==cc&&cc==0&&a!=0) ff=1;//只需饲料a
                if (bb==aa&&aa==0&&b!=0) ff=1;//只需饲料c
                if (aa==cc&&aa==0&&c!=0) ff=1;//只需饲料b  
                if (da==db&&db==dc&&da!=0) ff=1;
                if (da==db&&cc==0&&da!=0) ff=1;
                if (da==dc&&bb==0&&dc!=0) ff=1;
                if (db==dc&&aa==0&&dc!=0) ff=1;
                if (ff==1)
                {
                    s=a/aa;//饲料份数
                    printf("%d %d %d %d\n",i,j,k,s); 
                    return 0;
                }
            }
        } 
```
**实现思想**：通过枚举三种饲料的用量，判断混合后的比例是否与目标比例一致，并结合数学推导确保找到的解为最小解。

### 最优关键思路与技巧

1. **数学工具的应用**：如柯西不等式、高斯消元、行列式等，可以避免复杂的枚举，直接求解问题。
2. **枚举与剪枝**：通过合理的剪枝策略，减少枚举次数，提高算法效率。
3. **DFS/BFS的应用**：通过搜索算法逐步尝试不同的组合，找到满足条件的最小解。

### 可拓展之处

- **类似问题**：可以扩展到更多种类的饲料或更复杂的比例问题，甚至可以考虑非线性比例关系。
- **算法优化**：可以结合动态规划或贪心算法，进一步优化枚举的效率。

### 推荐相似题目

1. **P1024 一元三次方程求解**：考察数学工具的应用，类似于本题的柯西不等式或高斯消元法。
2. **P1219 八皇后问题**：考察枚举与剪枝策略，类似于本题的枚举法。
3. **P1048 采药**：考察DFS/BFS的应用，类似于本题的搜索算法。

### 个人心得总结

- **调试经历**：部分题解中提到需要处理精度问题，如高斯消元法中的浮点数误差，提醒我们在使用数学工具时要注意精度控制。
- **踩坑教训**：枚举法虽然直观，但容易超时，合理的剪枝策略是提高效率的关键。
- **顿悟感想**：数学工具的巧妙应用可以大幅简化问题，如柯西不等式的使用，避免了复杂的特判和枚举。

---
处理用时：49.63秒
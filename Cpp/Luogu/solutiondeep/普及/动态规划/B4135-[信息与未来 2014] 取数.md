# 题目信息

# [信息与未来 2014] 取数

## 题目描述

有 $n$ 个数排成一排，从 $n$ 个数中任取若干个数，取数规则为每次取相邻的 $2$ 个数，不能取 $1$ 个，也不能取多于 $2$ 个连续的数，找一种取法，使取到数的和为最大。

## 说明/提示

$2\le n\le 10^5,1\le x_i\le 10^9$。

## 样例 #1

### 输入

```
6
13 2 17 14 8 16```

### 输出

```
43```

# AI分析结果

### 综合分析与结论

本题的核心在于如何在给定的规则下，选取相邻的两个数，使得最终的和最大。由于数据规模较大（$n \le 10^5$），直接使用暴力枚举的方法不可行，因此需要采用动态规划（DP）来优化求解过程。

动态规划的思路是定义一个状态转移方程，表示在某个位置时的最大和。通过逐步计算每个位置的最大和，最终得到全局的最大值。这种方法的时间复杂度为 $O(n)$，能够很好地处理大规模数据。

### 最优关键思路与技巧

1. **动态规划状态定义**：定义 `dp[i]` 表示前 `i` 个数中按照规则取数的最大和。
2. **状态转移方程**：`dp[i] = max(dp[i-1], dp[i-2] + a[i-1] + a[i])`，其中 `a[i]` 是第 `i` 个数。这个方程表示在第 `i` 个位置时，可以选择不取当前的两个数（继承前一个状态的最大和），或者取当前的两个数（加上前两个状态的最大和）。
3. **初始化**：`dp[0] = 0`，`dp[1] = a[0] + a[1]`。

### 可拓展之处

- **类似问题**：这类问题可以扩展到更复杂的取数规则，例如每次取连续 $k$ 个数，或者取数的规则更加灵活（如间隔取数）。
- **其他算法套路**：类似的动态规划问题在区间选择、背包问题等领域都有广泛应用。

### 推荐题目

1. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 经典的背包问题，与本题的动态规划思路类似。
2. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060) - 动态规划在购物选择中的应用。
3. [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091) - 动态规划在序列问题中的应用。

### 核心代码实现

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    int n;
    cin >> n;
    vector<long long> a(n);
    for (int i = 0; i < n; ++i) {
        cin >> a[i];
    }
    vector<long long> dp(n);
    dp[0] = 0;
    dp[1] = a[0] + a[1];
    for (int i = 2; i < n; ++i) {
        dp[i] = max(dp[i-1], dp[i-2] + a[i-1] + a[i]);
    }
    cout << dp[n-1] << endl;
    return 0;
}
```

### 总结

本题通过动态规划的方法，有效地解决了大规模数据下的取数问题。关键在于定义合适的状态转移方程，并通过逐步计算得到最终结果。这种思路在类似的序列选择问题中具有广泛的应用价值。

---
处理用时：20.45秒
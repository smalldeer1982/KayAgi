# 题目信息

# 尼克的任务

## 题目描述

尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。

尼克的一个工作日为 $n$ 分钟，从第 $1$ 分钟开始到第 $n$ 分钟结束。当尼克到达单位后他就开始干活，公司一共有 $k$ 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 $p$ 分钟开始，持续时间为 $t$ 分钟，则该任务将在第 $(p+t-1)$ 分钟结束。

写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。

## 说明/提示

#### 数据规模与约定

- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 10^4,1 \leq k \leq 10^4,1 \leq p \leq n,1 \leq p+t-1 \leq n$。

## 样例 #1

### 输入

```
15 6
1 2
1 6
4 11
8 5
8 1
11 5
```

### 输出

```
4
```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）求解尼克在工作时间内获得的最大空闲时间。大多数题解采用了倒序DP的思路，即从工作时间的末尾向前递推，确保无后效性。部分题解还使用了记忆化搜索、贪心、图论等方法来优化或简化问题。整体来看，倒序DP是最为简洁且高效的解法，适合初学者理解和实现。

### 所选高星题解

#### 1. 作者：王尼玛 (赞：548)
- **星级**：★★★★★
- **关键亮点**：
  - 使用倒序DP，定义`f[i]`为从第`i`分钟到第`n`分钟的最大空闲时间。
  - 通过任务开始时间的排序和倒序处理，确保状态转移的正确性。
  - 代码简洁，逻辑清晰，适合初学者学习。
- **个人心得**：
  - 作者提到“倒着搜是完全可行的”，强调了倒序DP的优势，避免了正序DP中任务选择对后续状态的影响。

```cpp
for(int i=n;i>=1;i--) {
    if(sum[i]==0)
        f[i]=f[i+1]+1;
    else for(int j=1;j<=sum[i];j++) {
        if(f[i+z[num].js]>f[i])
            f[i]=f[i+z[num].js];
        num++;
    }
}
```

#### 2. 作者：kkksc03 (赞：486)
- **星级**：★★★★☆
- **关键亮点**：
  - 同样采用倒序DP，但详细解释了状态转移方程的设计思路。
  - 强调了任务开始时间的无后效性，确保DP的正确性。
  - 提供了对任务结束时间的处理细节，帮助理解任务选择的影响。
- **个人心得**：
  - 作者提到“开始时间是互不干涉的”，强调了任务选择的独立性，简化了状态转移。

```cpp
for(int i=n;i>=1;i--) {
    if(sum[i]==0)
        f[i]=f[i+1]+1;
    else for(int j=1;j<=sum[i];j++) {
        if(f[i+z[num].t]>f[i])
            f[i]=f[i+z[num].t];
        num++;
    }
}
```

#### 3. 作者：「已注销」 (赞：160)
- **星级**：★★★★
- **关键亮点**：
  - 使用`vector`存储每个时间点的任务持续时间，简化了任务选择的过程。
  - 通过`vector`的遍历，避免了排序的复杂度，代码更加简洁。
  - 提供了`O(n+k)`的时间复杂度分析，适合对性能要求较高的场景。
- **个人心得**：
  - 作者提到“动态数组$v_i$存在时刻$i$开始的任务持续时间”，强调了数据结构的选择对算法效率的影响。

```cpp
for(int i=n;i;--i) {
    if(v[i].size()>0)
        for(int j=0;j<v[i].size();++j)
            f[i]=max(f[i],f[i+v[i][j]]);
    else f[i]=f[i+1]+1;            
}
```

### 最优关键思路与技巧

1. **倒序DP**：从工作时间的末尾向前递推，确保任务选择对后续状态无影响。
2. **任务排序**：按任务开始时间从大到小排序，简化状态转移过程。
3. **数据结构优化**：使用`vector`存储任务，避免排序的复杂度，提高代码可读性。

### 拓展思路

- **记忆化搜索**：适用于任务选择较为复杂的情况，通过记录已计算的状态避免重复计算。
- **图论方法**：将任务视为图中的节点，通过最短路径或最长路径求解最大空闲时间。

### 推荐题目

1. **P1048 采药**：经典的背包问题，与本题的任务选择思路相似。
2. **P1060 开心的金明**：涉及时间与价值的权衡，适合练习动态规划。
3. **P1164 小A点菜**：类似的任务选择问题，适合巩固动态规划的应用。

### 个人心得总结

- **倒序DP的优势**：避免了正序DP中任务选择对后续状态的影响，简化了状态转移方程的设计。
- **数据结构的选择**：合理使用`vector`等数据结构，可以显著提高代码的简洁性和效率。
- **任务排序的重要性**：按任务开始时间排序，确保状态转移的正确性和高效性。

---
处理用时：35.76秒
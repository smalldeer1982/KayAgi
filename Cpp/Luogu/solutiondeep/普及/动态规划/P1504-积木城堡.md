# 题目信息

# 积木城堡

## 题目描述

XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  

小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。

小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  

可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。

任务：

请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。

注意：一座城堡的高度，是组成它的所有积木的棱长之和。

## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1 \le n \le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。

## 样例 #1

### 输入

```
2
2 1 -1
3 2 1 -1
```

### 输出

```
3
```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（01背包）来解决积木城堡的高度均衡问题。大多数题解都采用了类似的思路：对每个城堡进行01背包计算，记录每个城堡可以达到的高度，然后从最大高度开始倒序枚举，找到所有城堡都能达到的最大高度。虽然思路相似，但不同题解在实现细节、代码优化和可读性上有所差异。

### 所选高星题解

#### 1. 作者：Dispwnl (5星)
- **关键亮点**：思路清晰，代码简洁，使用了01背包的经典实现，并通过`ans`数组记录每个高度能被多少城堡达到，最后从最大高度倒序枚举找到最优解。
- **代码核心**：
  ```cpp
  for(int i=1;i<=g;i++) {
      for(int j=sum;j>=a[i];j--)
          if(f[j-a[i]]&&!f[j])
              f[j]=1,ans[j]++;
  }
  ```
  **核心思想**：通过01背包计算每个城堡能达到的高度，并统计每个高度被多少城堡达到。

#### 2. 作者：Dw_hans (4.5星)
- **关键亮点**：详细解释了DP的三步（状态表示、动态转移、初始状态），代码结构清晰，使用了`bitset`优化，适合初学者理解。
- **代码核心**：
  ```cpp
  for(int i=1;i<=cnt;i++)
      for(int j=high;j>=w[i];j--)
          dp[j] |= dp[j-w[i]];
  ```
  **核心思想**：通过01背包计算每个城堡能达到的高度，并使用`bitset`进行位运算优化。

#### 3. 作者：AgrumeStly (4星)
- **关键亮点**：代码简洁，使用了`ans`数组记录每个高度被多少城堡达到，最后从最小高度倒序枚举找到最优解。
- **代码核心**：
  ```cpp
  for(int i = high;i>=1;i--)
      if(dp[i] == true) ans[i]++;
  ```
  **核心思想**：通过01背包计算每个城堡能达到的高度，并统计每个高度被多少城堡达到。

### 最优关键思路与技巧

1. **01背包的应用**：每个城堡的积木可以看作物品，高度为背包容量，通过01背包计算每个城堡能达到的高度。
2. **倒序枚举**：从最大高度开始倒序枚举，找到所有城堡都能达到的最大高度。
3. **统计高度**：使用`ans`数组记录每个高度被多少城堡达到，便于快速找到最优解。

### 可拓展之处

- **类似问题**：类似的问题包括“装箱问题”、“分组背包问题”等，都可以通过01背包的思路解决。
- **优化技巧**：可以使用`bitset`进行位运算优化，减少内存占用和提高计算效率。

### 推荐题目

1. **P2347 砝码称重**：考察01背包的应用，与本题思路相似。
2. **P1048 采药**：经典的01背包问题，适合练习背包算法的基本应用。
3. **P1064 金明的预算方案**：分组背包问题，适合进一步拓展背包算法的应用场景。

### 个人心得总结

- **调试经历**：部分题解提到在调试过程中遇到数组越界问题，提醒我们在处理背包问题时要注意数组大小的设置。
- **顿悟感想**：通过01背包的思路，可以快速解决类似的高度均衡问题，关键在于如何将问题转化为背包模型。

通过以上分析，我们可以清晰地看到01背包在解决类似问题中的强大能力，同时也提醒我们在实现时要注意细节和优化。

---
处理用时：26.47秒
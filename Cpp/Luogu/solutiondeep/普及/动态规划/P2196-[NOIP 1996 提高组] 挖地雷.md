# 题目信息

# [NOIP 1996 提高组] 挖地雷

## 题目描述

在一个地图上有 $N\ (N \le 20)$ 个地窖，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后可以沿着指出的连接往下挖（仅能选择一条路径），当无连接时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。


## 说明/提示

**【题目来源】**

NOIP 1996 提高组第三题

## 样例 #1

### 输入

```
5
10 8 4 7 6
1 1 1 0
0 0 0
1 1
1
```

### 输出

```
1 3 4 5
27```

# AI分析结果

### 综合分析与结论

本题的核心是求解从任意起点出发，沿着单向路径挖掘地雷的最大值，并输出路径。题解中主要采用了以下几种思路：

1. **DFS + 回溯**：通过深度优先搜索枚举所有可能的路径，记录最大值和路径。优点是思路直观，缺点是时间复杂度较高，适合小规模数据。
2. **动态规划（DP）**：通过状态转移方程求解每个地窖的最大值，并记录路径。优点是时间复杂度较低，适合大规模数据。
3. **图论（如SPFA、Floyd等）**：将问题转化为图的最长路径问题，利用图论算法求解。优点是通用性强，但实现复杂度较高。

### 所选高星题解

#### 1. 题解作者：公主殿下MIKU (5星)
**关键亮点**：
- 使用DFS + 回溯，思路清晰，代码简洁。
- 通过`chck`函数判断是否还能继续挖掘，逻辑严谨。
- 通过`path`数组记录路径，回溯时更新最大值和路径。

**个人心得**：
- 作者提到“题目没啥清楚，导致我调了半个小时”，强调了理解题意的重要性。

**核心代码**：
```cpp
void dfs(int x, int stp, int sum) {
    if (chck(x)) {
        if (maxx < sum) {
            maxx = sum;
            cnt = stp;
            for (int i = 1; i <= stp; i++) ans[i] = path[i];
        }
        return;
    }
    for (int i = 1; i <= n; i++) {
        if (f[x][i] && !b[i]) {
            b[i] = 1;
            path[stp + 1] = i;
            dfs(i, stp + 1, sum + a[i]);
            b[i] = 0;
        }
    }
}
```

#### 2. 题解作者：Drawing_Yang (4星)
**关键亮点**：
- 使用动态规划，状态转移方程清晰：`f[i] = max(f[j]) + a[i]`。
- 通过`pre`数组记录前驱节点，递归输出路径。

**核心代码**：
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= n; j++) {
        if (g[j][i] && f[j] > f[i]) {
            f[i] = f[j];
            pre[i] = j;
        }
    }
    f[i] += a[i];
    if (f[i] > ans) {
        ans = f[i];
        t = i;
    }
}
```

#### 3. 题解作者：vectorwyx (4星)
**关键亮点**：
- 使用动态规划，状态转移方程清晰：`dp[i] = a[i] + max(dp[j])`。
- 通过`p`数组记录前驱节点，递归输出路径。

**核心代码**：
```cpp
for (int i = 2; i <= n; i++) {
    dp[i] = a[i];
    for (int j = i - 1; j > 0; j--) {
        if (rd[j][i] && dp[i] < dp[j] + a[i]) {
            dp[i] = dp[j] + a[i];
            p[i] = j;
        }
    }
    if (ans < dp[i]) {
        ans = dp[i];
        pos = i;
    }
}
```

### 最优关键思路与技巧

1. **动态规划**：通过状态转移方程求解每个地窖的最大值，并记录路径。时间复杂度较低，适合大规模数据。
2. **DFS + 回溯**：通过深度优先搜索枚举所有可能的路径，记录最大值和路径。思路直观，适合小规模数据。
3. **图论算法**：将问题转化为图的最长路径问题，利用图论算法求解。通用性强，但实现复杂度较高。

### 可拓展之处

- **类似问题**：如最长路径问题、最大子序列问题等，都可以使用类似的动态规划或DFS思路解决。
- **优化方向**：对于大规模数据，可以考虑使用记忆化搜索或剪枝优化DFS，或者使用更高效的图论算法如Dijkstra、Bellman-Ford等。

### 推荐题目

1. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 动态规划的经典问题，类似于背包问题。
2. [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091) - 动态规划的应用，求解最长上升子序列。
3. [P1144 最短路计数](https://www.luogu.com.cn/problem/P1144) - 图论中的最短路问题，可以拓展到最长路径问题。

---
处理用时：32.31秒
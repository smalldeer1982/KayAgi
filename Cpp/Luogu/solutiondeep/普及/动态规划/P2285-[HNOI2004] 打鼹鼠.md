# 题目信息

# [HNOI2004] 打鼹鼠

## 题目描述

鼹鼠是一种很喜欢挖洞的动物，但每过一定的时间，它还是喜欢把头探出到地面上来透透气的。根据这个特点阿牛编写了一个打鼹鼠的游戏：在一个 $n \times n$ 的网格中，在某些时刻鼹鼠会在某一个网格探出头来透透气。你可以控制一个机器人来打鼹鼠，如果 $i$ 时刻鼹鼠在某个网格中出现，而机器人也处于同一网格的话，那么这个鼹鼠就会被机器人打死。而机器人每一时刻只能够移动一格或停留在原地不动。机器人的移动是指从当前所处的网格移向相邻的网格，即从坐标为 $(i, j)$ 的网格移向 $(i-1, j), (i+1, j), (i, j-1), (i, j+1)$ 四个网格，机器人不能走出整个 $n \times n$ 的网格。游戏开始时，你可以自由选定机器人的初始位置。

现在知道在一段时间内，鼹鼠出现的时间和地点，请编写一个程序使机器人在这一段时间内打死尽可能多的鼹鼠。


## 样例 #1

### 输入

```
2 2	         

1 1 1		

2 2 2

```

### 输出

```
1
```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）来解决机器人在网格中打鼹鼠的最优化问题。大多数题解都采用了类似最长上升子序列（LIS）的思路，即通过计算曼哈顿距离来判断机器人是否能在规定时间内从一个鼹鼠位置移动到另一个位置，并进行状态转移。虽然部分题解尝试了优化（如倒序循环、提前终止等），但整体上时间复杂度仍为O(m²)，在数据规模较大时可能会超时。

### 所选高星题解

#### 1. 作者：SIXIANG32 (5星)
- **关键亮点**：思路清晰，状态定义简洁，代码可读性强。通过一维DP避免了三维状态的空间浪费，且详细解释了曼哈顿距离在转移中的应用。
- **个人心得**：作者提到最初想到三维状态，但通过题解启发后简化为一维状态，体现了对问题的深入理解和优化能力。
- **核心代码**：
```cpp
for(int p = 1; p <= m; p++) {
    f[p] = 1;
    for(int i = 1; i < p; i++)
        if(dist(in[p].x, in[p].y, in[i].x, in[i].y) <= in[p].val - in[i].val)
            f[p] = max(f[p], f[i] + 1);
}
```
- **实现思想**：通过枚举每个鼹鼠作为终点，计算其与之前所有鼹鼠的曼哈顿距离，判断是否能在规定时间内到达，并更新DP数组。

#### 2. 作者：Konnyaku_ljc (4星)
- **关键亮点**：通过倒序循环和降维优化，减少了部分时间复杂度，且代码结构清晰。
- **核心代码**：
```cpp
for(int i = m; i > 1; i--)
    for(int j = i-1; j >= 1; j--)
        if(a[i].t - a[j].t >= abs(a[i].x - a[j].x) + abs(a[i].y - a[j].y))
            dp[j] = max(dp[i] + 1, dp[j]);
```
- **实现思想**：通过倒序循环，利用DP数组的单调性，减少不必要的计算，提升效率。

#### 3. 作者：Exber (4星)
- **关键亮点**：将问题类比为最长不下降子序列，思路简洁明了，代码实现直接。
- **核心代码**：
```cpp
for(int i = 1; i <= m; i++) {
    dp[i] = 1;
    for(int j = 1; j < i; j++)
        if(abs(mou[i].x - mou[j].x) + abs(mou[i].y - mou[j].y) <= mou[i].t - mou[j].t)
            dp[i] = max(dp[i], dp[j] + 1);
}
```
- **实现思想**：通过枚举每个鼹鼠作为终点，判断其与之前鼹鼠的曼哈顿距离是否满足条件，并更新DP数组。

### 最优关键思路与技巧

1. **状态定义**：将问题转化为一维DP，定义`dp[i]`表示以第`i`只鼹鼠结尾的最多打鼹鼠数量。
2. **转移条件**：通过曼哈顿距离和时间差判断是否能在规定时间内从一个鼹鼠位置移动到另一个位置。
3. **优化技巧**：倒序循环、提前终止等优化手段可以减少不必要的计算，提升效率。

### 可拓展之处

- **类似问题**：最长上升子序列（LIS）、最长公共子序列（LCS）等经典DP问题都可以通过类似的思路进行优化。
- **算法套路**：对于时间或空间限制严格的问题，可以通过状态压缩、降维等技巧进行优化。

### 推荐题目

1. **P1020 导弹拦截**（最长不下降子序列）
2. **P1091 合唱队形**（双向LIS）
3. **P1439 【模板】最长公共子序列**（LCS优化）

### 个人心得总结

- **调试经历**：部分题解提到最初尝试了三维状态，但通过优化简化为一维状态，体现了对问题的深入理解和优化能力。
- **踩坑教训**：部分题解尝试了优化，但仍需注意时间复杂度的控制，避免超时。
- **顿悟感想**：通过类比经典DP问题（如LIS），可以快速找到问题的解决思路。

---
处理用时：32.57秒
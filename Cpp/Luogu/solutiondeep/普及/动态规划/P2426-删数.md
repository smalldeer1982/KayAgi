# 题目信息

# 删数

## 题目描述

有 $N$ 个不同的正整数 $x_1$, $x_2$, ..., $x_N$ 排成一排，我们可以从左边或右边去掉连续的 $i$ $(1 \le i \le n)$ 个数（只能从两边删除数），剩下 $N-i$ 个数，再把剩下的数按以上操作处理，直到所有的数都被删除为止。

每次操作都有一个操作价值，比如现在要删除从 $i$ 位置到 $k$ 位置上的所有的数。操作价值为 $|x_i-x_k| \times (k-i+1)$ ，如果只去掉一个数，操作价值为这个数的值。
问如何操作可以得到最大值，求操作的最大价值。

## 说明/提示

**【样例解释和说明】**

说明，经过 $3$ 次操作可以得到最大值，第一次去掉前面 $3$ 个数：$54$ 、$29$ 、$196$ ，操作价值为 $426$。第二次操作是在剩下的三个数 $(21,133,118)$ 中去掉最后一个数$118$，操作价值为 $118$。第三次操作去掉剩下的 $2$ 个数：$21$ 和 $133$ ，操作价值为 $224$。操作总价值为 $426+118+224=768$ 。

**【数据范围】**

$3≤N≤100$ ，$1 \le x_i \le 1000$

## 样例 #1

### 输入

```
6
54 29 196 21 133 118
```

### 输出

```
768```

# AI分析结果

### 综合分析与结论

本题是一个典型的区间动态规划问题，核心在于如何通过删除连续区间的操作来最大化操作价值。大多数题解采用了区间DP的思路，部分题解还引入了记忆化搜索和一维DP的优化。整体来看，题解的质量参差不齐，部分题解思路清晰、代码简洁，而有些则显得冗长或不够优化。

### 所选高星题解

#### 1. 作者：柒命九陨_ (赞：56)
- **星级**: 5星
- **关键亮点**: 使用一维DP进行优化，避免了二维数组的复杂度，代码简洁且思路清晰。
- **个人心得**: 作者提到“从前向后更新就好了”，强调了从前往后递推的合理性，简化了问题。
- **核心代码**:
  ```cpp
  for(int i = 1; i <= n; ++i) {
      dp[i] = max(dp[i], dp[i - 1] + val[i]);
      for(int j = 2; j <= i; ++j)
          dp[i] = max(dp[i], dp[i - j] + Val(i - j + 1, i));
  }
  ```
  **实现思想**: 通过一维DP数组 `dp[i]` 表示前 `i` 个数的最大操作价值，枚举删除的区间长度 `j`，更新 `dp[i]`。

#### 2. 作者：sukimo (赞：26)
- **星级**: 4星
- **关键亮点**: 使用一维DP，状态转移方程清晰，代码简洁。
- **核心代码**:
  ```cpp
  for(int i=1;i<=n;i++){
      dp[i]=val(1,i);
      for(int j=1;j<=i-1;j++)dp[i]=max(dp[i],dp[j]+val(j+1,i));
  }
  ```
  **实现思想**: 通过 `dp[i]` 表示前 `i` 个数的最大操作价值，枚举删除的区间 `[j+1, i]`，更新 `dp[i]`。

#### 3. 作者：浅色调 (赞：29)
- **星级**: 4星
- **关键亮点**: 使用二维DP，状态转移方程详细，适合理解区间DP的基本思路。
- **核心代码**:
  ```cpp
  for(int j=2;j<=n;j++)
      for(int i=1;i<=n-j+1;i++){
          f[i][j]=j*fabs(a[i]-a[i+j-1]);
          for(int k=1;k<j;k++)
              f[i][j]=max(f[i][j],f[i][k]+f[k+i][j-k]);
      }
  ```
  **实现思想**: 通过 `f[i][j]` 表示从 `i` 开始删除 `j` 个数的最大操作价值，枚举分割点 `k`，更新 `f[i][j]`。

### 最优关键思路与技巧
1. **一维DP优化**: 通过一维DP数组简化了状态转移，减少了空间复杂度。
2. **区间DP的分割思想**: 通过枚举分割点，将大区间划分为小区间，分别计算最大值。
3. **记忆化搜索**: 在递归过程中记录已计算的结果，避免重复计算，提升效率。

### 可拓展之处
- **类似题目**: 区间DP问题常见于序列分割、区间合并等场景，如矩阵链乘法、石子合并等。
- **优化思路**: 对于某些区间DP问题，可以通过斜率优化、四边形不等式等进一步优化时间复杂度。

### 推荐题目
1. **P1880 [NOI1995] 石子合并** - 区间DP经典问题。
2. **P1040 加分二叉树** - 区间DP与树形结构的结合。
3. **P1063 能量项链** - 环形区间DP问题。

### 个人心得总结
- **调试经历**: 部分作者提到在调试过程中发现边界条件的重要性，如 `f[0] = 0` 的初始化。
- **顿悟感想**: 有作者提到“从前向后更新”的合理性，简化了问题的复杂度，体现了对问题本质的深刻理解。

---
处理用时：26.91秒
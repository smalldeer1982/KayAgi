# 题目信息

# 数字工程

## 题目描述

ACM 实验室开启了一个数字工程项目，希望把正整数 $n$ 通过一些特殊方法变成 $1$。

可采用的方法有：

1. 减去 $1$
2. 除以它的任意一个素因子。 

每操作一次消耗一个单位的能量。

请问把 $n$ 变成 $1$ 最少需要消耗多少能量？


## 说明/提示

$1 \le n \le 10^6$。

## 样例 #1

### 输入

```
1
4```

### 输出

```
0
2```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）和素数筛法来求解将任意正整数 $n$ 变为 $1$ 的最小能量消耗。所有题解都采用了类似的思路：先通过素数筛法预处理每个数的素因子，然后使用 DP 来计算最小能量消耗。不同题解的主要区别在于素数筛法的实现方式、DP 的状态转移方程以及代码的优化程度。

### 所选高星题解

#### 1. 作者：Leianha (★★★★★)
**关键亮点：**
- 使用欧拉筛法预处理素因子，效率较高。
- DP 状态转移方程清晰，考虑了从 $i-1$ 和 $i/prime_i$ 转移过来的两种情况。
- 代码简洁且高效，输入处理方式巧妙。

**个人心得：**
- 作者提到“被筛到的数一定要及时打上标记”，强调了素数筛法中标记的重要性。

**核心代码：**
```cpp
void yych()
{
    for(int i=2;i<=N;++i)
    if(!vis[i])
    for(int j=i;j<=N;j+=i)
    vis[j]=1,yz[j][++num[j]]=i;

    for(int i=2;i<=N;++i)
    {
        f[i]=f[i-1]+1;
        for(int j=1;j<=num[i];++j)f[i]=min(f[i],f[i/yz[i][j]]+1);
    }
}
```

#### 2. 作者：XZYQvQ (★★★★☆)
**关键亮点：**
- 使用简单的素数筛法预处理素因子，代码易读。
- DP 状态转移方程直接，考虑了从 $i-1$ 和 $i/d[i][j]$ 转移过来的两种情况。
- 代码结构清晰，适合初学者理解。

**核心代码：**
```cpp
for(int i=2;i<=1000000;i++)
{
    f[i]=f[i-1]+1;
    for(int j=0;j<dc[i];j++)f[i]=min(f[i],f[i/d[i][j]]+1);
}
```

#### 3. 作者：litble (★★★★☆)
**关键亮点：**
- 强调了素因子可能大于 $\sqrt{i}$ 的情况，避免了常见错误。
- 使用素数筛法预处理素因子，DP 状态转移方程清晰。
- 代码结构合理，注释详细。

**个人心得：**
- 作者提到“素数因子可能很大”，提醒读者不要因为题目看似简单而掉以轻心。

**核心代码：**
```cpp
for(i=2;i<=maxn;i++)
{
    f[i]=f[i-1]+1;
    for(j=1;j<=dic[i][0];j++)f[i]=min(f[i],f[i/dic[i][j]]+1);
}
```

### 最优关键思路与技巧

1. **素数筛法**：使用欧拉筛法或埃氏筛法预处理每个数的素因子，确保后续 DP 的高效性。
2. **DP 状态转移**：考虑从 $i-1$ 和 $i/prime_i$ 转移过来的两种情况，取最小值作为 $f[i]$ 的值。
3. **输入处理**：使用 `while(scanf("%d",&n)!=EOF)` 处理多组输入，避免重复计算。

### 可拓展之处

- **类似题目**：可以扩展到更复杂的数论问题，如求最小步数将 $n$ 变为 $m$，或考虑更多操作类型。
- **算法套路**：素数筛法 + DP 是解决数论问题的常见套路，适用于多种类似题目。

### 推荐洛谷题目

1. [P3383 【模板】线性筛素数](https://www.luogu.com.cn/problem/P3383)
2. [P1217 [USACO1.5]回文质数 Prime Palindromes](https://www.luogu.com.cn/problem/P1217)
3. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)

### 总结

本题解中，Leianha 的题解因其高效的素数筛法和清晰的 DP 状态转移方程获得了最高评分。XZYQvQ 和 litble 的题解也因其代码的易读性和对细节的把握获得了较高评分。通过这些题解，我们可以学习到素数筛法和 DP 在数论问题中的高效应用。

---
处理用时：28.76秒
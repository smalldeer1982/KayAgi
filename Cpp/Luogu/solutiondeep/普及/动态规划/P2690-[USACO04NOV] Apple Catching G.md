# 题目信息

# [USACO04NOV] Apple Catching G

## 题目描述

很少有人知道奶牛爱吃苹果。农夫约翰的农场上有两棵苹果树（编号为 $1$ 和 $2$ ）， 每一棵树上都长满了苹果。奶牛贝茜无法摘下树上的苹果，所以她只能等待苹果 从树上落下。但是，由于苹果掉到地上会摔烂，贝茜必须在半空中接住苹果（没有人爱吃摔烂的苹果）。贝茜吃东西很快，她接到苹果后仅用几秒钟就能吃完。每一分钟，两棵苹果树其中的一棵会掉落一个苹果。贝茜已经过了足够的训练， 只要站在树下就一定能接住这棵树上掉落的苹果。同时，贝茜能够在两棵树之间 快速移动（移动时间远少于 $1$ 分钟），因此当苹果掉落时，她必定站在两棵树其中的一棵下面。此外，奶牛不愿意不停地往返于两棵树之间，因此会错过一些苹果。苹果每分钟掉落一个，共 $T$（$1 \le T \le 1000$）分钟，贝茜最多愿意移动 $W$（$1 \le W \le 30$） 次。现给出每分钟掉落苹果的树的编号，要求判定贝茜能够接住的最多苹果数。 开始时贝茜在 1 号树下。

## 样例 #1

### 输入

```
7 2
2
1
1
2
2
1
1
```

### 输出

```
6
```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）或记忆化搜索来解决奶牛接苹果的问题。大多数题解采用了DP的思路，部分题解使用了记忆化搜索。DP的状态定义通常是 `dp[i][j]`，表示在第 `i` 分钟内移动了 `j` 次能够接到的最多苹果数。状态转移方程的核心是判断当前奶牛的位置是否与苹果掉落的位置一致，从而决定是否增加苹果数。

### 所选高星题解

#### 题解1：ztzshiwo001219 (5星)
- **关键亮点**：思路清晰，代码简洁，状态转移方程明确，且提供了优化建议（边读入边计算DP）。
- **代码核心**：
  ```cpp
  for(int i=1;i<=T;i++)
      for(int j=0;j<=T&&j<=w;j++) {
          if(j==0) dp[i][j]=dp[i-1][j];
          else dp[i][j]=max(dp[i-1][j],dp[i-1][j-1]);
          if(a[i]==j%2+1) dp[i][j]++;
      }
  ```
- **个人心得**：作者提到“其实应该可以边读入边计算DP”，这种优化思路值得借鉴。

#### 题解2：ksydom (4星)
- **关键亮点**：详细分析了状态转移方程的推导过程，提供了多种情况的讨论，代码实现较为完整。
- **代码核心**：
  ```cpp
  if(a[i]==1) {
      if(j%2==0) f[i][j][1]=max(f[i-1][j-1][2],f[i-1][j][1])+1;
      else f[i][j][2]=max(f[i-1][j][2],f[i-1][j-1][1]);
  }
  ```
- **个人心得**：作者在调试过程中发现“移动次数最多不一定接到的就最多”，这种细节处理值得学习。

#### 题解3：kcn999 (4星)
- **关键亮点**：使用了滚动数组优化DP空间，代码简洁且高效，适合处理较大数据范围。
- **代码核心**：
  ```cpp
  for(register int i = 1; i <= t; ++i) {
      cin >> v;
      for(register int j = min(i, n) - ((v & 1) == (min(i, n) & 1)); j >= 0; j -= 2) {
          if(j) dp[j] = max(dp[j], dp[j - 1]) + 1;
          else ++dp[j];
      }
  }
  ```
- **个人心得**：作者提到“register为寄存器，可以不加”，这种对代码性能的优化思路值得借鉴。

### 最优关键思路与技巧
1. **状态定义**：`dp[i][j]` 表示在第 `i` 分钟内移动了 `j` 次能够接到的最多苹果数。
2. **状态转移**：根据奶牛的位置与苹果掉落的位置是否一致，决定是否增加苹果数。
3. **滚动数组优化**：通过滚动数组减少空间复杂度，适合处理较大数据范围。

### 可拓展之处
- **类似问题**：可以扩展到更多树的情况，或者增加移动次数的限制。
- **算法套路**：类似的状态转移方程可以应用于其他动态规划问题，如背包问题、最长公共子序列等。

### 推荐题目
1. [P1048 采药](https://www.luogu.com.cn/problem/P1048) - 经典背包问题，与本题的状态转移思路相似。
2. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060) - 动态规划问题，涉及状态转移与优化。
3. [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091) - 动态规划问题，涉及状态转移与优化。

### 个人心得总结
- **调试经历**：在调试过程中，发现移动次数最多不一定接到的苹果最多，这种细节处理非常重要。
- **优化思路**：边读入边计算DP、使用滚动数组优化空间复杂度，这些优化思路值得借鉴。

---
处理用时：28.58秒
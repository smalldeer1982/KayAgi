# 题目信息

# 搞笑世界杯

## 题目背景

很久很久以后，一次世界杯。


## 题目描述

随着世界杯小组赛的结束，法国，阿根廷等世界强队都纷纷被淘汰，让人心痛不已。 于是有人组织了一场搞笑世界杯，将这些被淘汰的强队重新组织起来和世界杯一同比赛。你和你的朋友欣然去购买球票。不过搞笑世界杯的球票出售方式也很特别，它们只准备了两种球票。

- A 类票——免费球票 
- B 类票——双倍价钱球票。

购买时由工作人员通过掷硬币决定，投到正面的买 A 类票， 反面的买 B 类票。主办方总是准备了同样多的 A 类票和 B 类票。你和你的朋友十分幸运的排到了某场精彩比赛的最后两个位置。

这时工作人员开始通过硬币售票。不过更为幸运的是当工作人员到你们面前时他发现已无需再掷硬币了，因为剩下的这两张票全是免费票。

你和你的朋友在欣喜之余，想计算一下排在队尾的两个人同时拿到一种票的概率是多少(包括同时拿 A 类票或 B 类票) 假设工作人员准备了 $2n$ 张球票，其中 $n$ 张 A 类票，$n$ 张 B 类票，并且排在队伍中的人每人必须且只能买一张球票(不管掷到的是该买 A 还是该买 B)。

## 说明/提示

## 数据规模与约定

对全部的测试点，保证 $1 \leq n \leq 1250$。

## 样例 #1

### 输入

```
256```

### 输出

```
0.9500```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）或排列组合的方法，计算在给定数量的A类和B类票的情况下，最后两个人拿到相同类型票的概率。大多数题解采用了DP的思路，状态转移方程基本一致，即 `f[i][j] = (f[i-1][j] + f[i][j-1]) * 0.5`，表示当前状态的概率由前两种状态的概率加权平均得到。部分题解还提供了排列组合的解法，通过计算最后两张票不同的概率来间接求解。

### 所选高分题解

#### 1. **作者：zhongcy (赞：34)**
- **星级：★★★★★**
- **关键亮点**：
  - 提供了两种解法：DP和排列组合，思路清晰且代码简洁。
  - DP解法的时间复杂度为O(n²)，排列组合解法的时间复杂度为O(n)，适合不同规模的数据。
  - 代码可读性强，初始化部分和状态转移方程都写得非常明确。
- **核心代码**：
  ```cpp
  for(int i=1;i<=n;i++)
      for(int j=1;j<=n;j++)
          f[i][j]=f[i-1][j]/2+f[i][j-1]/2;
  ```

#### 2. **作者：Christopher_Yan (赞：27)**
- **星级：★★★★☆**
- **关键亮点**：
  - 详细解释了DP的状态转移方程，强调了抛硬币的50%概率对状态转移的影响。
  - 初始化部分明确，解释了为什么 `f[1][0]` 和 `f[0][1]` 的初始值为1。
  - 代码简洁，适合初学者理解。
- **核心代码**：
  ```cpp
  for (int i=1;i<=n;i++)
      for (int k=1;k<=n;k++)
          f[i][k]=f[i-1][k]*0.5+f[i][k-1]*0.5;
  ```

#### 3. **作者：love_luke (赞：15)**
- **星级：★★★★☆**
- **关键亮点**：
  - 纠正了其他题解中关于初始化的错误，明确指出 `f[i][0] = f[0][i] = 1` 的初始化条件应为 `i >= 2`。
  - 代码简洁，初始化部分和状态转移方程都写得非常明确。
- **核心代码**：
  ```cpp
  for (i=1;i<=n;++i)
      for (j=1;j<=n;++j)
          f[i][j]=(f[i-1][j]+f[i][j-1])/2;
  ```

### 最优关键思路与技巧

1. **动态规划的状态定义**：`f[i][j]` 表示剩余 `i` 张A类票和 `j` 张B类票时，最后两个人拿到相同类型票的概率。
2. **状态转移方程**：`f[i][j] = (f[i-1][j] + f[i][j-1]) * 0.5`，表示当前状态的概率由前两种状态的概率加权平均得到。
3. **初始化**：当只剩一种票时，最后两个人拿到相同票的概率为1，即 `f[i][0] = f[0][i] = 1`（`i >= 2`）。

### 可拓展之处

1. **类似问题**：可以扩展到其他概率问题，如抽奖问题、排队问题等，只要涉及到状态转移和概率计算，都可以采用类似的DP思路。
2. **优化**：对于大规模数据，可以考虑使用排列组合的方法，进一步优化时间复杂度。

### 推荐题目

1. **P1044 栈**：考察动态规划的基本应用。
2. **P1057 传球游戏**：涉及状态转移和概率计算。
3. **P1064 金明的预算方案**：动态规划的经典问题，适合练习状态转移方程的构建。

### 个人心得总结

- **调试经历**：部分题解在初始化时出现了错误，导致结果不准确。在编写DP代码时，务必仔细检查初始化条件，确保边界情况的正确处理。
- **顿悟感想**：通过抛硬币的50%概率，可以很好地理解状态转移方程的构建，这种思维方式在其他概率问题中也非常有用。

---
处理用时：27.19秒
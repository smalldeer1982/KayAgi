# 题目信息

# [USACO16JAN] Radio Contact G

## 题目描述

FJ 失去了他最喜欢的牛铃，而 Bessie 已经同意帮助他找到它！他们用不同的路径搜索农场，通过无线电保持联系。

不幸的是，无线电中的电池电量不足，所以他们设法尽可能保持两者位置的距离最小，以节省电量。

FJ 从位置$(f_x,f_y)$ 开始，并计划遵循由 $N$ 步组成的路径.Bessie 从位置 $(b_x,b_y)$ 开始，并遵循由 $M$ 步组成的路径。每个步骤都是 `N`（北），`E`（东），`S`（南），或`W`（西）。其中，东方向为 $x$ 轴正方向，北方向为 $y$ 轴正方向。两个路径可以经过相同的点。

在每个时间段，FJ 可以不移动，也可以沿着他的道路前进一步。无论哪个方向恰好在下一个（假设他还没有到达他的路径的最后位置）。Bessie 可以做出类似的选择。

在每个时间点（不包括从初始位置开始的第一步），他们的无线电消耗的能量等于它们之间距离的平方。

请帮助 FJ 和 Bessie 计划行动策略，使双方达到各自终点时，最大限度地减少消耗的能量总量。输出所消耗的最小的能量。

## 样例 #1

### 输入

```
2 7
3 0
5 0
NN
NWWWWWN```

### 输出

```
28```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）来求解FJ和Bessie在移动过程中消耗的最小能量。所有题解都采用了二维DP的思路，状态定义为`dp[i][j]`，表示FJ走到第`i`步，Bessie走到第`j`步时的最小能量消耗。状态转移方程基本一致，都是从`dp[i-1][j]`、`dp[i][j-1]`、`dp[i-1][j-1]`三个状态转移而来，并加上当前步的能量消耗。

#### 关键思路与技巧：
1. **状态转移方程**：`dp[i][j] = min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1]) + dis(i, j)`，其中`dis(i, j)`为当前步的能量消耗。
2. **初始化**：需要分别处理`i=0`和`j=0`的情况，表示其中一方不动时的能量消耗。
3. **坐标计算**：通过路径字符串逐步计算每一步的坐标，方便后续计算距离。
4. **优化**：部分题解使用了结构体或数组来存储每一步的坐标，减少了重复计算。

#### 扩展思路：
- **类似问题**：类似的双路径DP问题，如“双人背包问题”、“双人迷宫问题”等，都可以采用类似的二维DP思路。
- **优化**：可以考虑使用滚动数组优化空间复杂度，或者预处理所有可能的坐标以减少计算量。

### 评分较高的题解

#### 1. 作者：卷王 (5星)
- **关键亮点**：思路清晰，代码结构简洁，初始化部分解释详细，适合初学者理解。
- **个人心得**：强调了DP的本质和初始化的必要性，帮助读者深入理解DP的核心思想。
- **核心代码**：
  ```cpp
  for(int i = 1; i <= n; i++) 
      for(int j = 1; j <= m; j++)
          dp[i][j] = min(dp[i - 1][j - 1], min(dp[i - 1][j], dp[i][j - 1])) + dis(i, j);
  ```

#### 2. 作者：_louhc_ (4星)
- **关键亮点**：代码实现简洁，使用了`move`函数来简化坐标计算，适合有一定基础的读者。
- **核心代码**：
  ```cpp
  void move(int &x, int &y, char d) {
      switch(d) {
          case 'N': y++; break;
          case 'S': y--; break;
          case 'W': x--; break;
          case 'E': x++; break;
      }
  }
  ```

#### 3. 作者：Hexarhy (4星)
- **关键亮点**：使用了C++11的lambda表达式简化距离计算，代码风格现代，适合进阶读者。
- **核心代码**：
  ```cpp
  auto dis=[=](const int x1,const int y1,const int x2,const int y2) {
      return (x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);
  };
  ```

### 推荐题目
1. [P1002 过河卒](https://www.luogu.com.cn/problem/P1002)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1057 传球游戏](https://www.luogu.com.cn/problem/P1057)

### 总结
本题的DP解法较为经典，关键在于状态转移方程的设计和初始化的处理。通过对比不同题解，可以看出代码实现上的优化和简化技巧，适合不同层次的读者学习和参考。

---
处理用时：27.28秒
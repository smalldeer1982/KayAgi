# 题目信息

# 钟氏映射

## 题目背景

2233年，CSSYZ学校的数学老师兼数学竞赛顾问钟JG已经2200+岁啦！

为了庆生，他或她给广大人民群众出了道题。


## 题目描述

设集合$N=M=\left\{x|x\in N_+,x\leq k,k\in N_+\right\}$

设$f$为$N$到$M$的映射。

求满足：

$f[f(x)]=x$的不同的映射$f$的个数，由于答案较大，输出答案对$14233333$取余的数即可。


## 说明/提示

四个映射分别为：


|f(1)|f(2)|f(3)|
|-|-|-|
|1|2|3|
|1|3|2|
|2|1|3|
|3|2|1|

数据范围：

对于20%的数据，$1\leq k\leq 9$

对于其它的80%的数据，$1\leq k\leq 10^7$


内存20MB...（一开始开1MB把自己坑了）


## 样例 #1

### 输入

```
3
```

### 输出

```
4
```

# AI分析结果

### 综合分析与结论

本题的核心在于理解映射的性质，即满足 \( f[f(x)] = x \) 的映射必须满足每个元素要么映射到自身，要么与另一个元素形成互相对称的映射。通过这种性质，可以将问题转化为递推问题，使用动态规划或滚动数组来优化空间复杂度。

大多数题解都采用了递推公式 \( g(i) = g(i-1) + g(i-2) \times (i-1) \)，并通过滚动数组来减少空间使用。题解的质量参差不齐，部分题解在思路清晰度和代码实现上表现较好，而有些则存在冗余或不够简洁。

### 所选高星题解

#### 1. **作者：XZYQvQ (5星)**
- **关键亮点**：作为出题人，题解思路清晰，详细解释了递推公式的推导过程，并强调了滚动数组的必要性。代码简洁且高效。
- **个人心得**：作者提到“其实是动归啦”，强调了动态规划的思想，帮助读者理解问题的本质。
- **核心代码**：
  ```cpp
  ll a=2,b=1,now,n;
  for(ll i=3;i<=n;++i){
      now=b*(i-1)+a;
      now%=mod;
      b=a;
      a=now;
  }
  printf("%lld",a);
  ```

#### 2. **作者：IcyFoxer_XZY (4星)**
- **关键亮点**：题解简洁明了，直接给出了递推公式，并强调了使用 `long long` 的必要性。代码实现清晰，适合初学者理解。
- **核心代码**：
  ```cpp
  ll a=2,b=1,now,n;
  for(ll i=3;i<=n;++i){
      now=b*(i-1)+a;
      now%=mod;
      b=a;
      a=now;
  }
  printf("%lld",a);
  ```

#### 3. **作者：SakuraDance (4星)**
- **关键亮点**：题解从组合的角度解释了问题，思路清晰，递推公式的推导过程详细，适合有一定数学基础的读者。
- **核心代码**：
  ```cpp
  ll a=2,b=1,now,n;
  for(ll i=3;i<=n;++i){
      now=b*(i-1)+a;
      now%=mod;
      b=a;
      a=now;
  }
  printf("%lld",a);
  ```

### 最优关键思路与技巧

1. **递推公式**：\( g(i) = g(i-1) + g(i-2) \times (i-1) \) 是解决本题的核心，理解其推导过程是关键。
2. **滚动数组**：由于数据范围较大，使用滚动数组可以显著减少空间复杂度，避免内存溢出。
3. **取模运算**：在递推过程中及时取模，防止数值溢出。

### 拓展思路与类似题目

1. **类似题目**：
   - [P1044 栈](https://www.luogu.com.cn/problem/P1044)：考察卡特兰数的应用，与本题的递推思想类似。
   - [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)：考察递推与动态规划的结合。
   - [P1095 守望者的逃离](https://www.luogu.com.cn/problem/P1095)：考察动态规划与贪心的结合。

2. **拓展思路**：本题的递推思想可以应用于其他组合数学问题，如排列组合、图论中的路径计数等。理解递推公式的推导过程有助于解决类似问题。

### 个人心得总结

- **调试经历**：部分作者提到在调试过程中遇到了内存溢出或数值溢出的问题，强调了使用滚动数组和及时取模的重要性。
- **顿悟感想**：通过理解映射的性质，将问题转化为递推问题，是解决本题的关键。动态规划的思想在类似问题中具有广泛的应用。

---
处理用时：28.23秒
# 题目信息

# 消失之物

## 题目描述

ftiasch 有 $n$ 个物品, 体积分别是 $w_1,w_2,\dots,w_n$。由于她的疏忽，第 $i$ 个物品丢失了。   

“要使用剩下的 $n-1$ 物品装满容积为 $x$ 的背包，有几种方法呢？”——这是经典的问题了。  

她把答案记为 $\text{cnt}(i,x)$ ，想要得到所有$i \in [1,n]$, $x \in [1,m]$ 的 $\text{cnt}(i,x)$ 表格。

![](https://cdn.luogu.com.cn/upload/pic/13426.png)


## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n,m \le 2000$，且 $1\le v_i\le m$。

【样例解释】  
如果物品 3 丢失的话，只有一种方法装满容量是 2 的背包，即选择物品 1 和物品 2。

---

$\text{upd 2023.8.11}$：新增加五组 Hack 数据。


## 样例 #1

### 输入

```
3 2
1 1 2```

### 输出

```
11
11
21```

# AI分析结果

### 综合分析与结论

本题的核心是求解在删除每个物品后，使用剩余物品装满不同容量背包的方案数。题解主要围绕如何优化多次背包计算展开，常见的思路包括：

1. **退背包思想**：通过一次完整的背包计算，再通过逆向操作（退背包）来快速求解删除某个物品后的方案数。
2. **动态规划优化**：利用二维DP数组，分别记录包含和不包含某个物品的方案数，通过递推公式快速求解。
3. **空间优化**：通过滚动数组或一维数组优化空间复杂度，减少内存使用。

大多数题解都采用了退背包的思想，结合动态规划进行优化，整体思路较为一致。部分题解在代码实现上更加简洁，且对边界条件和取模处理进行了详细说明。

### 所选高星题解

#### 1. **Kelin (5星)**
- **关键亮点**：思路清晰，代码简洁，退背包思想的应用非常巧妙，且对取模处理进行了详细说明。
- **核心代码**：
  ```cpp
  memcpy(g,f,sizeof f);
  for(int j=w[i];j<=m;++j)
      g[j]-=g[j-w[i]];
  ```
  **实现思想**：通过一次完整的背包计算后，利用正序减去物品的贡献，快速求解删除某个物品后的方案数。

#### 2. **King丨帝御威 (4.5星)**
- **关键亮点**：使用了二维DP数组，分别记录包含和不包含某个物品的方案数，递推公式清晰，代码可读性强。
- **核心代码**：
  ```cpp
  for(int i=1;i<=n;++i) {
      for(int j=1;j<=m;++j) {
          if(j-v[i]>=0) f[j][1]=(f[j][0]-f[j-v[i]][1]+10)%10;
          else f[j][1]=f[j][0]%10;
          cout<<f[j][1];
      }
      cout<<'\n';
  }
  ```
  **实现思想**：通过二维DP数组，分别记录包含和不包含某个物品的方案数，利用递推公式快速求解。

#### 3. **Gary818 (4星)**
- **关键亮点**：思路清晰，代码简洁，对取模处理进行了详细说明，且对边界条件处理得当。
- **核心代码**：
  ```cpp
  for(int i=1;i<=n;i++) {
      g[0]=1;
      for(int x=1;x<=m;x++) {
          if(w[i]>x) g[x]=f[x]%10;
          else g[x]=(f[x]-g[x-w[i]]+10)%10;
          cout<<g[x];
      }
      cout<<endl;
  }
  ```
  **实现思想**：通过一次完整的背包计算后，利用递推公式快速求解删除某个物品后的方案数。

### 最优关键思路与技巧

1. **退背包思想**：通过一次完整的背包计算，再通过逆向操作（退背包）来快速求解删除某个物品后的方案数，极大地减少了时间复杂度。
2. **动态规划优化**：利用二维DP数组，分别记录包含和不包含某个物品的方案数，通过递推公式快速求解。
3. **取模处理**：在计算过程中，及时取模以防止溢出，并保证结果的正确性。

### 可拓展之处

1. **类似问题**：可以拓展到多重背包、完全背包等问题，通过类似的退背包思想进行优化。
2. **动态规划优化**：在其他动态规划问题中，可以通过类似的思路优化状态转移方程，减少计算量。

### 推荐题目

1. **P1048 [NOIP2005 普及组] 采药**：经典的01背包问题，适合练习背包问题的基本解法。
2. **P1616 疯狂的采药**：完全背包问题，适合练习完全背包的优化解法。
3. **P1064 [NOIP2006 提高组] 金明的预算方案**：多维背包问题，适合练习多维背包的解法。

### 个人心得总结

- **调试经历**：部分题解提到在取模处理时，若不及时处理负数，会导致结果错误，建议在取模前加上模数以保证结果为正。
- **踩坑教训**：在退背包操作时，需要注意物品的顺序对结果的影响，确保退背包的顺序与背包计算的顺序一致。
- **顿悟感想**：通过退背包思想，可以大大减少多次背包计算的时间复杂度，是一种非常巧妙的优化方法。

---
处理用时：30.15秒
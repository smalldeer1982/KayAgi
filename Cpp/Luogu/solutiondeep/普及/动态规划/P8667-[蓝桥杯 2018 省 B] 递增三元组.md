# 题目信息

# [蓝桥杯 2018 省 B] 递增三元组

## 题目描述

给定三个整数数组 $A = [A_1, A_2,\cdots, A_N]$，$B = [B_1, B_2,\cdots, B_N]$，$C = [C_1, C_2,\cdots,C_N]$。

请你统计有多少个三元组 $(i, j, k)$ 满足：
1. $1 \le i, j, k \le N$  
2. $A_i < B_j < C_k$

## 说明/提示

对于 $30\%$ 的数据，$1 \le N \le 100$。

对于 $60\%$ 的数据，$1 \le N \le 1000$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$0 \le A_i, B_i, C_i \le 10^5$。

## 样例 #1

### 输入

```
3
1 1 1
2 2 2
3 3 3```

### 输出

```
27```

# AI分析结果

### 综合分析与结论

本题的核心是统计满足 $A_i < B_j < C_k$ 的三元组数量。大部分题解都从暴力枚举出发，逐步优化到使用二分查找或双指针来降低时间复杂度。最优的解法是通过枚举 $B_j$，利用二分查找分别统计满足 $A_i < B_j$ 和 $C_k > B_j$ 的数量，最终通过乘法原理累加结果。这种方法的时间复杂度为 $O(n \log n)$，能够高效处理 $n \leq 10^5$ 的数据规模。

### 所选高星题解

#### 1. 作者：liruixiong0101 (5星)
**关键亮点**：
- 思路清晰，从暴力枚举逐步优化到二分查找，逻辑严密。
- 代码简洁，使用了 `lower_bound` 和 `upper_bound` 来高效统计满足条件的数量。
- 提供了详细的思路推导，帮助理解如何从暴力到优化的过程。

**核心代码**：
```cpp
for(int j = 1; j <= n; j++){
    int cnta = lower_bound(a + 1 , a + 1 + n , b[j]) - a - 1;
    int cntc = upper_bound(c + 1 , c + 1 + n , b[j]) - c;
    cntc = n - cntc + 1;
    ans += cnta * cntc;
}
```
**实现思想**：枚举 $B_j$，通过二分查找统计满足 $A_i < B_j$ 和 $C_k > B_j$ 的数量，利用乘法原理累加结果。

#### 2. 作者：technopolis_2085 (4星)
**关键亮点**：
- 使用了前缀和来统计满足条件的数量，避免了重复计算。
- 时间复杂度趋近于 $O(n)$，效率更高。
- 代码结构清晰，易于理解。

**核心代码**：
```cpp
for (int i = 1; i <= n; i++){
    sum1[a[i]]++;
    sum2[c[i]]++; 
}
for (int i = 1; i <= (int)1e5; i++){
    sum1[i] += sum1[i-1];
}
for (int i = (int)1e5; i >= 0; i--){
    sum2[i] += sum2[i+1];
}
for (int i = 1; i <= n; i++){
    ans += sum1[b[i]-1] * sum2[b[i]+1];
}
```
**实现思想**：通过前缀和统计 $A$ 中小于 $B_j$ 的数量和 $C$ 中大于 $B_j$ 的数量，利用乘法原理累加结果。

#### 3. 作者：Zaku (4星)
**关键亮点**：
- 使用双指针优化查找过程，时间复杂度为 $O(n)$。
- 代码实现优雅，逻辑清晰。
- 提供了双指针的使用技巧，适合对双指针不熟悉的读者。

**核心代码**：
```cpp
for (int i = 1; i <= n; i ++ ){
    while (cnt <= n && a[cnt] < b[i]) cnt ++;
    while (cnt_ <= n && c[cnt_] <= b[i]) cnt_ ++;
    ans += (LL) (cnt - 1) * (n - cnt_ + 1); 
}
```
**实现思想**：枚举 $B_j$，使用双指针统计满足 $A_i < B_j$ 和 $C_k > B_j$ 的数量，利用乘法原理累加结果。

### 最优关键思路与技巧

1. **二分查找**：通过 `lower_bound` 和 `upper_bound` 高效统计满足条件的数量。
2. **前缀和**：利用前缀和数组快速统计小于或大于某个值的数量。
3. **双指针**：通过双指针优化查找过程，降低时间复杂度。

### 可拓展之处

- **类似题目**：可以扩展到多维数组的统计问题，如四元组、五元组等。
- **算法套路**：二分查找、前缀和、双指针等技巧在统计类问题中非常常见，掌握这些技巧可以解决多种类似问题。

### 推荐题目

1. [P1102 A-B 数对](https://www.luogu.com.cn/problem/P1102)
2. [P1631 序列合并](https://www.luogu.com.cn/problem/P1631)
3. [P1496 火烧赤壁](https://www.luogu.com.cn/problem/P1496)

### 个人心得总结

- **调试经历**：在优化过程中，二分查找的边界条件容易出错，需要仔细检查。
- **踩坑教训**：未开 `long long` 会导致溢出，特别是在数据规模较大时。
- **顿悟感想**：通过枚举中间值 $B_j$，可以将问题分解为两个独立的子问题，大大简化了问题的复杂度。

---
处理用时：33.51秒
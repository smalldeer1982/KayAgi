# 题目信息

# [蓝桥杯 2020 国 B] 游园安排

## 题目描述

$\mathrm{L}$ 星球游乐园非常有趣，吸引着各个星球的游客前来游玩。小蓝是 $\mathrm{L}$ 星球 游乐园的管理员。

为了更好的管理游乐园，游乐园要求所有的游客提前预约，小蓝能看到系统上所有预约游客的名字。每个游客的名字由一个大写英文字母开始，后面跟 $0$ 个或多个小写英文字母。游客可能重名。

小蓝特别喜欢递增的事物。今天，他决定在所有预约的游客中，选择一部分游客在上午游玩，其他的游客都在下午游玩，在上午游玩的游客要求按照预约的顺序排列后，名字是单调递增的，即排在前面的名字严格小于排在后面的名字。

一个名字 $A$ 小于另一个名字 $B$ 是指：存在一个整数 $i$，使得 $A$ 的前 $i$ 个字母与 $B$ 的前 $i$ 个字母相同，且 $A$ 的第 $i+1$ 个字母小于 $B$ 的第 $i+1$ 个字母。(如果 $A$ 不存在第 $i+1$ 个字母且 $B$ 存在第 $i+1$ 个字母, 也视为 $A$ 的第 $i+1$ 个字母小于 $B$ 的第 $i+1$ 个字母)

作为小蓝的助手，你要按照小蓝的想法安排游客，同时你又希望上午有尽量多的游客游玩，请告诉小蓝让哪些游客上午游玩。如果方案有多种，请输出上午游玩的第一个游客名字最小的方案。如果此时还有多种方案，请输出第一个游客名字最小的前提下第二个游客名字最小的方案。如果仍然有多种，依此类推选择第三个、第四个……游客名字最小的方案。


## 说明/提示

对于 $20 \%$ 的评测数据, 输入的总长度不超过 $20$ 个字母。

对于 $50 \%$ 的评测数据, 输入的总长度不超过 $300$ 个字母。

对于 $70 \%$ 的评测数据, 输入的总长度不超过 $10000$ 个字母。

对于所有评测数据, 每个名字的长度不超过 $10$ 个字母, 输入的总长度不超过 $10^6$ 个字母。 

蓝桥杯 2020 年国赛 B 组 G 题。

## 样例 #1

### 输入

```
WoAiLanQiaobei```

### 输出

```
AiLanQiaobei```

# AI分析结果

### 综合分析与结论

本题的核心是求解字符串的最长上升子序列（LIS），要求时间复杂度为 \(O(n \log n)\)，以应对 \(10^6\) 级别的数据量。大多数题解都采用了二分查找优化 LIS 的经典算法，并结合字符串处理技巧来实现。整体思路较为一致，主要区别在于代码实现细节和优化程度。

### 所选高星题解

#### 1. **作者：qzmoot (赞：25)**
- **星级：5星**
- **关键亮点**：
  - 代码简洁，逻辑清晰，直接使用 `lower_bound` 进行二分查找优化。
  - 通过 `dp` 数组维护当前的最长上升子序列，并通过 `ans` 数组记录最终结果。
  - 处理字符串的方式高效，直接根据大写字母分割字符串。
- **个人心得**：
  - 作者提到“对于如此大的数据，用 \(O(n^2)\) 的做法肯定会 TLE”，强调了时间复杂度的重要性。

**核心代码：**
```cpp
for(int i=1;i<=cnt;i++) {
    int pos = lower_bound(dp+1, dp+len+1, s[i]) - dp;
    len = max(len, pos);
    dp[pos] = s[i];
    ans[pos] = ans[pos-1] + s[i];
}
cout << ans[len];
```
**实现思想**：通过 `lower_bound` 找到当前字符串在 `dp` 数组中的位置，更新 `dp` 和 `ans` 数组，最终输出最长上升子序列。

#### 2. **作者：fengqiao17 (赞：5)**
- **星级：4星**
- **关键亮点**：
  - 详细解释了二分查找的原理，并提供了自定义的二分函数 `erfen`。
  - 通过 `b` 数组维护当前的最长上升子序列，`ans` 数组记录结果。
  - 代码结构清晰，注释详细，便于理解。
- **个人心得**：
  - 作者提到“维护一个 `maxi` 表示最长的最长上升子序列”，强调了状态转移的关键点。

**核心代码：**
```cpp
int erfen(string s) {
    int lt = 0, rt = maxi + 1;
    while (lt + 1 < rt) {
        int mid = (lt + rt) >> 1;
        if (b[mid] >= s) rt = mid;
        else lt = mid;
    }
    return rt;
}
```
**实现思想**：自定义二分函数 `erfen` 查找当前字符串在 `b` 数组中的位置，更新 `b` 和 `ans` 数组。

#### 3. **作者：Lian_zy (赞：6)**
- **星级：4星**
- **关键亮点**：
  - 提供了数字版 LIS 的代码作为过渡，便于读者理解字符串版 LIS 的实现。
  - 通过自定义的 `big` 函数比较字符串，确保字典序的正确性。
  - 代码结构清晰，逻辑严谨。
- **个人心得**：
  - 作者提到“数字版的最长上升子序列已经被解决了，但是字符串版的怎么办呢？”，强调了从数字到字符串的过渡。

**核心代码：**
```cpp
bool big(string a, string b) {
    if (a.size() == b.size()) {
        for (int i = 0; i < a.size(); i++) {
            if (a[i] == b[i]) continue;
            return a[i] > b[i];
        }
        return false;
    }
    return a.size() > b.size();
}
```
**实现思想**：通过 `big` 函数比较字符串的字典序，确保 LIS 的正确性。

### 最优关键思路与技巧

1. **二分查找优化 LIS**：通过 `lower_bound` 或自定义二分函数，将 LIS 的时间复杂度从 \(O(n^2)\) 优化到 \(O(n \log n)\)。
2. **字符串处理技巧**：根据大写字母分割字符串，确保每个名字的正确提取。
3. **状态转移与记录**：通过 `dp` 和 `ans` 数组分别维护当前的最长上升子序列和最终结果，确保输出正确。

### 拓展与举一反三

1. **同类型题目**：
   - [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)：经典的 LIS 问题，适合练习二分优化。
   - [P1091 合唱队形](https://www.luogu.com.cn/problem/P1091)：双向 LIS 问题，适合进一步理解 LIS 的应用。
   - [P1439 【模板】最长公共子序列](https://www.luogu.com.cn/problem/P1439)：LCS 问题，与 LIS 有相似之处，适合拓展学习。

2. **类似算法套路**：
   - **单调栈与二分查找**：在处理序列问题时，单调栈和二分查找是常见的优化手段，适用于多种场景。
   - **动态规划与状态转移**：LIS 是动态规划的经典问题，理解其状态转移方程有助于解决其他 DP 问题。

### 个人心得总结

- **调试经历**：多位作者提到在处理 \(10^6\) 数据量时，\(O(n^2)\) 的算法会导致 TLE，强调了时间复杂度的重要性。
- **踩坑教训**：在处理字符串时，需要注意大小写字母的区分，确保名字的正确提取。
- **顿悟感想**：通过二分查找优化 LIS，理解其原理后，可以举一反三应用到其他序列问题中。

---
处理用时：37.55秒
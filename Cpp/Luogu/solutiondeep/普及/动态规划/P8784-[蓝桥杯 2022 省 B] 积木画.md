# 题目信息

# [蓝桥杯 2022 省 B] 积木画

## 题目描述

小明最近迷上了积木画，有这么两种类型的积木，分别为 $I$ 型（大小为 $2$ 个单位面积) 和 $L$ 型 (大小为 $3$ 个单位面积):

![I 型积木](https://luogu.oss-cn-hangzhou.aliyuncs.com/upload/vjudge_pic/lanqiao/2022_09_29_3d61ad9326a0012c9fdag-10.jpg)

同时，小明有一块面积大小为 $2 \times N$ 的画布，画布由 $2 \times N$ 个 $1 \times 1$ 区域构成。小明需要用以上两种积木将画布拼满，他想知道总共有多少种不同的方式? 积木可以任意旋转，且画布的方向固定。

## 说明/提示

**【样例说明】**

五种情况如下图所示, 颜色只是为了标识不同的积木:
![](https://luogu.oss-cn-hangzhou.aliyuncs.com/upload/vjudge_pic/lanqiao/2022_09_29_3d61ad9326a0012c9fdag-11.jpg)

**【评测用例规模与约定】**

对于所有测试用例，$1 \leq N \leq 10^7$。

蓝桥杯 2022 省赛 B 组 G 题。

## 样例 #1

### 输入

```
3```

### 输出

```
5```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）来解决积木填充问题，主要难点在于如何定义状态转移方程以及优化空间复杂度。大多数题解都采用了类似的思路，即通过递推公式 `F_n = 2 * F_{n-1} + F_{n-3}` 来计算方案数，并在实现时进行了空间优化（如滚动数组）。以下是对各题解的对比与总结：

1. **思路清晰度**：Infinite_Eternity 和 WA_sir 的题解在推导递推公式时较为详细，尤其是 Infinite_Eternity 通过数学推导得出了简洁的递推公式，思路清晰。
2. **代码可读性**：what_can_I_do 和 WaterSun 的代码较为简洁，使用了滚动数组优化空间，代码可读性较好。
3. **优化程度**：所有题解都考虑了空间优化，尤其是 WaterSun 和 gesong 的题解通过滚动数组避免了开大数组的问题，优化程度较高。

### 所选高星题解

#### 1. Infinite_Eternity (5星)
- **关键亮点**：通过详细的数学推导得出了简洁的递推公式 `F_n = 2 * F_{n-1} + F_{n-3}`，并给出了边界条件的处理方式。代码实现简洁且高效。
- **个人心得**：作者通过逐步推导，最终得出了简洁的递推公式，展示了如何从复杂问题中提炼出关键规律。
- **核心代码**：
  ```cpp
  for(int i=4;i<=n;++i)
      f[i] = (2*f[i-1]%mod+f[i-3]%mod)%mod;
  ```

#### 2. WA_sir (4星)
- **关键亮点**：通过表格列举了前几项的结果，帮助读者理解递推规律，并给出了详细的递推公式 `f[i] = f[i-1] + f[i-2]*2 + f[i-3] + f[i-4]`。
- **个人心得**：作者通过列举前几项的结果，帮助读者直观理解递推规律，展示了如何通过观察数据发现规律。
- **核心代码**：
  ```cpp
  for(int i=4;i<=n;i++)
      f[i]=(((f[i-1]+(f[i-2]*2)%m)%m+f[i-3])%m+f[i-4])%m;
  ```

#### 3. WaterSun (4星)
- **关键亮点**：通过滚动数组优化了空间复杂度，避免了开大数组的问题，代码简洁且高效。
- **个人心得**：作者通过滚动数组优化了空间复杂度，展示了如何在有限内存下处理大规模数据。
- **核心代码**：
  ```cpp
  for (re int i = 3;i <= n;i++){
      d = ((c << 1) + a) % mod;
      a = b;
      b = c;
      c = d;
  }
  ```

### 最优关键思路与技巧

1. **递推公式**：通过分析最后放置的积木类型，得出递推公式 `F_n = 2 * F_{n-1} + F_{n-3}`，这是解决本题的核心。
2. **空间优化**：使用滚动数组或变量轮换的方式优化空间复杂度，避免开大数组。
3. **边界处理**：明确边界条件 `F_0 = 1, F_1 = 1, F_2 = 2, F_3 = 5`，确保递推的正确性。

### 拓展与举一反三

1. **类似题目**：
   - [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)：考察递推与动态规划。
   - [P1044 栈](https://www.luogu.com.cn/problem/P1044)：考察递推与卡特兰数。
   - [P1057 传球游戏](https://www.luogu.com.cn/problem/P1057)：考察动态规划与状态转移。

2. **调试与顿悟**：在调试过程中，发现递推公式的推导是关键，尤其是如何通过数学推导简化问题。通过列举前几项的结果，可以帮助验证递推公式的正确性。

### 推荐题目
1. [P1028 数的计算](https://www.luogu.com.cn/problem/P1028)
2. [P1044 栈](https://www.luogu.com.cn/problem/P1044)
3. [P1057 传球游戏](https://www.luogu.com.cn/problem/P1057)

---
处理用时：30.61秒
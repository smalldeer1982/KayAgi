# 题目信息

# [USACO05MAR] Out of Hay S

## 题目描述

Bessie 计划调查 $N$（$2 \leq N \leq 2\,000$）个农场的干草情况，它从 $1$ 号农场出发。农场之间总共有 $M$（$1 \leq M \leq 10^4$）条双向道路，所有道路的总长度不超过 $10^9$。有些农场之间存在着多条道路，所有的农场之间都是连通的。

Bessie 希望计算出该图中最小生成树中的最长边的长度。


## 样例 #1

### 输入

```
3 3
1 2 23
2 3 1000
1 3 43```

### 输出

```
43```

# AI分析结果

### 综合分析与结论
本题要求计算图中最小生成树的最长边长度，题解主要采用了Kruskal和Prim两种算法。Kruskal算法适用于稀疏图，其核心是将边按权值排序，用并查集判断边是否可用，不断添加边直到生成树有n - 1条边；Prim算法适用于稠密图，通过不断扩展节点来生成最小生成树。

### 所选题解
- **作者：Growl、 (赞：21)  ★★★★★**
    - **关键亮点**：思路清晰，详细解释了树、生成树、最小生成树的概念，对Kruskal算法和并查集的讲解细致，代码注释丰富，可读性强。
    - **核心代码**：
```c
inline void kruskal(){
    for(register int i=1;i<=m;i++){
        l=find(edge[i].fir);
        r=find(edge[i].sec);
        if(l==r)continue ;//如果联通就跳过 
        fa[l]=r;//否则就合并 
        k=edge[i].data;//每次更新边权，最后一条边为最大 
        tot++;
        if(tot==n-1)break;
    }
}
```
    - **核心思想**：遍历排序后的边，若边的两个端点不连通，则合并它们所在集合，更新最大边权，直到生成树有n - 1条边。

- **作者：卢本伟丶NiuB (赞：13)  ★★★★**
    - **关键亮点**：清晰列出Kruskal算法流程，代码结构清晰，注释详细，对算法步骤解释明确。
    - **核心代码**：
```c
inline void Kruskal()
{
    int k=0;
    int k1,k2;
    int ans=0;
    for(int i=1;i<=m;i++)
    {
        k1=find(a[i].x);
        k2=find(a[i].y);
        if(k1==k2) continue;//如果在一个集合内就忽略这条边，扫描下一条 
        k++;
        me(k1,k2);
        //合并 x y所在的集合 就是把边（x，y）放入最小生成树中 
        ans=max(a[i].z,ans);
        if(k==n-1) break;
        //到n-1条边停止，最小生成树只需要n-1条边 
    }
    cout<<ans;
}
```
    - **核心思想**：遍历边，若边的两个端点不在同一集合，合并集合，更新最大边权，达到n - 1条边时停止。

- **作者：agicy (赞：0)  ★★★★**
    - **关键亮点**：思路简洁明了，直接指出用Kruskal + 并查集解题，代码结构清晰，对关键操作封装成函数，可读性好。
    - **核心代码**：
```cpp
for(int i=1,k=1;i<=m&&k<=n-1;i++){
    if(!search(r[i].f,r[i].t))//如果两点不在同一集合
        contact(r[i].f,r[i].t),//连接
        k++,//记数
        ans=r[i].w;//记录答案
}
```
    - **核心思想**：遍历排序后的边，若两点不在同一集合，连接两点，更新边数和最大边权，直到有n - 1条边。

### 最优关键思路或技巧
- **数据结构**：使用结构体存储边的信息，方便对边按权值排序。
- **算法优化**：Kruskal算法结合并查集，通过路径压缩优化并查集查找操作，提高效率。
- **思维方式**：利用贪心思想，每次选择最小权值的边加入生成树。
- **代码实现技巧**：使用快读函数加快输入速度，用`max`函数更新最大边权。

### 可拓展之处
同类型题如求最小生成树的边权和、判断图是否连通等，类似算法套路可用于解决带权图的其他问题，如次小生成树、最小瓶颈路等。

### 推荐题目
- P3366 【模板】最小生成树
- P1111 修复公路
- P2330 [SCOI2005]繁忙的都市

### 个人心得摘录与总结
- **作者：Ajwallet**：一开始用Prim算法WA了5个点，重新审视题目后改用排序和连边的方法AC，提醒我们要仔细审题，选择合适的算法。
- **作者：wangyansong**：AC后参考大佬思路，另辟蹊径采用优化的Kruskal算法，还提到并查集非递归优化可避免毒瘤顺序数据，启示我们要不断学习和优化算法。 

---
处理用时：34.99秒
# 题目信息

# [NOIP 2000 提高组] 单词接龙

## 题目背景

注意：本题为上古 NOIP 原题，不保证存在靠谱的做法能通过该数据范围下的所有数据。

本题为搜索题，本题不接受 hack 数据。[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)

NOIP2000 提高组 T3

## 题目描述

单词接龙是一个与我们经常玩的成语接龙相类似的游戏，现在我们已知一组单词，且给定一个开头的字母，要求出以这个字母开头的最长的“龙”（每个单词都最多在“龙”中出现两次），在两个单词相连时，其重合部分合为一部分，例如 `beast` 和 `astonish`，如果接成一条龙则变为 `beastonish`，另外相邻的两部分不能存在包含关系，例如 `at` 和 `atide` 间不能相连。


## 说明/提示

样例解释：连成的“龙”为 `atoucheatactactouchoose`。

$n \le 20$。

## 样例 #1

### 输入

```
5
at
touch
cheat
choose
tact
a
```

### 输出

```
23
```

# AI分析结果

### 综合分析与结论
这两道题解均采用深度优先搜索（DFS）算法解决单词接龙问题。思路上，都是从以指定字母开头的单词开始，通过 DFS 枚举所有可能的单词连接情况，同时使用数组记录每个单词的使用次数，确保不超过 2 次。

算法要点方面，两者都需处理单词连接时的重合部分，这也是本题的难点。RyanLi 的题解在 DFS 函数中直接处理重合部分，通过截取子串比较来判断是否可以连接；SuyctidohanQ 的题解则将处理重合部分的逻辑封装在 `check` 函数中。

### 所选题解
- **RyanLi 的题解（5 星）**
    - 关键亮点：代码简洁，思路清晰，直接在 DFS 函数中处理重合部分，减少了函数调用的开销，提高了代码的执行效率。
    - 重点代码：
```cpp
void dfs(const string &tmp) {
    ans = max(ans, int(tmp.size()));
    for (int i = 1; i <= n; ++i) {
        if (vis[i] >= 2) continue;
        for (int j = 1; j < min(tmp.size(), s[i].size()); ++j)
            if (tmp.substr(tmp.size() - j) == s[i].substr(0, j)) {
                ++vis[i];
                dfs(tmp + s[i].substr(j));
                --vis[i];
            }
    }
}
```
核心实现思想：在 DFS 函数中，遍历所有单词，对于未超过使用次数限制的单词，尝试从 1 到较短单词长度 - 1 的长度进行重合部分的匹配，若匹配成功则递归调用 DFS 函数继续搜索。
- **SuyctidohanQ 的题解（3 星）**
    - 关键亮点：将处理重合部分的逻辑封装在 `check` 函数中，使代码结构更清晰，便于理解。
    - 重点代码：
```cpp
int check (string x, string y) {
    string a = "", b = "";
    rep(i, 1, min (x.size (), y.size ()) - 1) {
        a = x.substr (x.size () - i, i);
        b = y.substr (0, i);
        if (a == b) return i;
    }
    return 0;
}

void dfs (str s, int len) {
    ans = max (ans, len);
    int x;
    for (int i = 1; i <= n; i ++) {
        x = check (s, S[i]);
        if (cnt[i] < 2 && x!= 0) {
            cnt[i] ++;
            dfs (S[i], len + S[i].size () - x);
            cnt[i] --;
        }
    }
}
```
核心实现思想：`check` 函数用于检查两个单词的重合部分长度，`dfs` 函数则通过调用 `check` 函数来判断是否可以连接单词，并递归搜索。

### 最优关键思路或技巧
- 使用 DFS 枚举所有可能的单词连接情况，通过回溯保证每个单词使用次数不超过 2 次。
- 在处理重合部分时，通过截取子串进行比较，确保相邻两部分不存在包含关系。

### 可拓展之处
同类型题或类似算法套路：
- 字符串拼接问题，如给定多个字符串，要求拼接成满足特定条件的最长字符串。
- 图的深度优先搜索问题，如在图中寻找满足特定条件的最长路径。

### 推荐题目
- [P1135 奇怪的电梯](https://www.luogu.com.cn/problem/P1135)
- [P1605 迷宫](https://www.luogu.com.cn/problem/P1605)
- [P2392 kkksc03考前临时抱佛脚](https://www.luogu.com.cn/problem/P2392)

### 个人心得
本题解中未包含个人心得。

---
处理用时：24.58秒
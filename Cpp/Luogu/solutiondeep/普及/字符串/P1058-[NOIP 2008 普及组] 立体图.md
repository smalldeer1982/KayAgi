# 题目信息

# [NOIP 2008 普及组] 立体图

## 题目描述

小渊是个聪明的孩子，他经常会给周围的小朋友们讲些自己认为有趣的内容。最近，他准备给小朋友们讲解立体图，请你帮他画出立体图。

小渊有一块面积为 $m \times n$ 的矩形区域，上面有 $m \times n$ 个边长为 $1$ 的格子，每个格子上堆了一些同样大小的积木（积木的长宽高都是 $1$），小渊想请你打印出这些格子的立体图。我们定义每个积木为如下格式，并且不会做任何翻转旋转，只会严格以这一种形式摆放：

$$
\def\arraystretch{1e-10}
\begin{aligned}
&\verb!  +---+!\\
&\verb! /   /|!\\
&\verb!+---+ |!\quad\textsf{高}\\
&\verb!|   | +!\\
&\verb!|   |/ !\quad\textsf{宽}\\
&\verb!+---+  !\\
& \quad\textsf{长}
\end{aligned}$$


每个顶点用 $1$ 个加号 `+` 表示，长用 $3$ 个 `-` 表示，宽用 $1$ 个 `/`，高用两个 `|` 表示。字符 `+`，`-`，`/`，`|` 的 ASCII 码分别为 $43$，$45$，$47$，$124$。字符 `.`（ASCII 码 $46$）需要作为背景输出，即立体图里的空白部分需要用 `.` 来代替。立体图的画法如下面的规则：

若两块积木左右相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+---+!\\
\verb!./   /   /|!\\
\verb!+---+---+ |!\\
\verb!|   |   | +!\\
\verb!|   |   |/.!\\
\verb!+---+---+..!\\
\end{aligned}
$$

若两块积木上下相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+!\\
\verb!./   /|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/.!\\
\verb!+---+..!\\
\end{aligned}
$$

若两块积木前后相邻，图示为：

$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!....+---+!\\
\verb!.../   /|!\\
\verb!..+---+ |!\\
\verb!./   /| +!\\
\verb!+---+ |/.!\\
\verb!|   | +..!\\
\verb!|   |/...!\\
\verb!+---+....!\\
\end{aligned}
$$

立体图中，定义位于第 $(m,1)$ 的格子（即第 $m$ 行第 $1$ 列的格子）上面自底向上的第一块积木（即最下面的一块积木）的左下角顶点为整张图最左下角的点。


## 说明/提示

NOIP2008普及组第四题


## 样例 #1

### 输入

```
3 4
2 2 1 2
2 2 1 1
3 2 1 2
```

### 输出

```
......+---+---+...+---+
..+---+  /   /|../   /|
./   /|-+---+ |.+---+ |
+---+ |/   /| +-|   | +
|   | +---+ |/+---+ |/|
|   |/   /| +/   /|-+ |
+---+---+ |/+---+ |/| +
|   |   | +-|   | + |/.
|   |   |/  |   |/| +..
+---+---+---+---+ |/...
|   |   |   |   | +....
|   |   |   |   |/.....
+---+---+---+---+......```

# AI分析结果

### 综合分析与结论
这些题解整体思路一致，均采用从后往前、从左往右、从下往上的顺序绘制立方体，利用覆盖原理得到最终立体图。主要差异在于坐标计算和代码实现细节。

算法要点包括：打表存储单个立方体图形，计算每个立方体在二维数组中的位置，通过循环依次绘制并更新图形边界。

难点在于准确计算每个立方体的坐标，处理图形覆盖和背景填充。部分题解在处理坐标公式时遇到问题，需不断调整。

### 所选题解
- **作者：ZUTTER_（5星）**
    - **关键亮点**：思路清晰，代码简洁易读，详细注释坐标计算，通过打表和函数封装简化代码。
    - **个人心得**：作者表示做出该题很激动。
```cpp
char c1[10][10]={
"  +---+",
" /   /|",
"+---+ |",
"|   | +",
"|   |/",
"+---+",
};
void fg(int x,int y)
{
    int i,j;
    for(i=5;i>=0;i--)
        for(j=z[i];j<=s[i];j++)
        {
            c[5-i+x][j+y]=c1[i][j];
            if(5-i+x>maxx) maxx=5-i+x;
            if(j+y>maxy) maxy=j+y;
        }
}
```
核心思想：打表存储单个立方体图形，通过 `fg` 函数将立方体绘制到二维数组中，并更新图形边界。

- **作者：Sino_E（4星）**
    - **关键亮点**：详细分析坐标规律，思路严谨，通过函数封装绘制和输出过程，提高代码可读性。
```cpp
void mdraw(int x,int y){
    // 正面矩阵绘制
    mz[x][y+3]=mz[x][y]=mz[x+4][y]=mz[x+4][y+3]='+';
    // 顶面矩阵绘制
    mz[x+1][y+4]=mz[x+5][y+4]='/';
    // 侧面矩阵绘制
    mz[x+5][y+1]='/';
}
void putout(int x,int y){
    for(int j=y;j>=0;j--){
        for(int i=0;i<=x;i++)
            if(!mz[i][j])putchar('.');
            else putchar(mz[i][j]);
        putchar('\n');
    }
}
```
核心思想：通过 `mdraw` 函数绘制立方体的三个面，`putout` 函数按平面直角坐标系顺序输出图形。

- **作者：cwxcplh（4星）**
    - **关键亮点**：详细阐述坐标公式推导过程，对代码中出现的问题进行深入分析和修正，思路完整。
```cpp
void tc(int x,int y)
{
    for(int i=0;i<6;i++)
    {
        for(int j=0;j<7;j++)
        {
            if(c[x+i][y+j]!='.'&&cube[i][j]=='.')
            {
                continue;
            }
            c[x+i][y+j]=cube[i][j];
            if(x+i>mxx)
            {
                mxx=x+i;
            }
            if(y+j>mxy)
            {
                mxy=y+j;
            }
        }
    }
}
```
核心思想：`tc` 函数将单个立方体绘制到二维数组中，处理 `.` 符号覆盖问题并更新图形边界。

### 最优关键思路或技巧
- 打表存储单个立方体图形，简化绘制过程。
- 采用从后往前、从左往右、从下往上的绘制顺序，利用覆盖原理避免复杂的遮挡判断。
- 通过函数封装绘制和输出过程，提高代码可读性和可维护性。

### 可拓展之处
同类型题如绘制其他立体图形（金字塔、圆柱体等），可采用类似的打表和坐标计算方法。类似算法套路包括模拟图形绘制、坐标变换等。

### 推荐题目
- P1003 [铺地毯](https://www.luogu.com.cn/problem/P1003)
- P1067 [多项式输出](https://www.luogu.com.cn/problem/P1067)
- P1075 [质因数分解](https://www.luogu.com.cn/problem/P1075)

### 个人心得摘录与总结
- **cwxcplh**：表示该题具有思维挑战性，花费一个多小时解题，在推导坐标公式和处理 `.` 符号覆盖问题时遇到困难，通过不断调整和测试最终解决。
总结：此类模拟题需仔细分析图形规律，推导坐标公式时要考虑全面，遇到问题可通过样例测试逐步修正。 

---
处理用时：35.62秒
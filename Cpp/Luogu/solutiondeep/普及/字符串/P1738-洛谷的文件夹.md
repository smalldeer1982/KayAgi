# 题目信息

# 洛谷的文件夹

## 题目描述

kkksc03 是个非凡的空想家！在短时间内他设想了大量网页，然后总是交给可怜的 lzn 去实现。

洛谷的网页端，有很多文件夹，文件夹还套着文件夹。

例如：$\verb!/luogu/application/controller!$ 表示根目录下有一个名称为 $\verb!luogu!$ 的文件夹，这个文件夹下有一个名称 $\verb!application!$ 的文件夹，其中还有名为 $\verb!controller!$ 的文件夹。

每个路径的第 $1$ 个字符总是 $\verb!/!$，且没有两个连续的 $\verb!/!$，最后的字符不是 $\verb!/!$。所有名称仅包含数字和小写字母。

目前根目录是空的。kkksc03 想好了很多应该有的文件夹路径名。问题是，需要是使这些文件夹都存在，需要新建几个文件夹呢？


## 说明/提示

### 数据范围及约定


- 对于 $20\%$ 数据，有 $N \le 20$；
- 对于 $50\%$ 数据，有 $N \le 200$；
- 另有 $30\%$ 数据，有对于所有路径最多存在两个 $\verb!/!$（包含第 $1$ 个字符）；
- 对于所有数据，$N \le 1000$。

## 样例 #1

### 输入

```
2
/luogu/application/controller
/luogu/application/view
```

### 输出

```
3
4
```

## 样例 #2

### 输入

```
3
/chicken
/chicken/egg
/chicken```

### 输出

```
1
2
2```

## 样例 #3

### 输入

```
4
/a
/a/b
/a/c
/b/b```

### 输出

```
1
2
3
5```

# AI分析结果

### 综合分析与结论
本题主要解决在给定多个文件夹路径的情况下，计算使这些文件夹都存在所需新建文件夹的数量。各题解思路主要围绕去重和路径解析，使用的数据结构和算法多样，包括`set`、`map`、链表、Trie树、哈希等。

### 所选题解
- **Anguei（5星）**
    - **关键亮点**：思路清晰，代码简洁，利用`std::set`自动去重特性，通过遍历字符串解析路径，能高效解决问题。
    - **核心代码**：
```cpp
#include <set>
#include <string>
#include <iostream> 

int main() {
    int n;
    std::cin >> n;
    std::set<std::string> set;
    
    for (int i = 1; i <= n; ++i) {
        std::string s;
        std::cin >> s;
        std::string dir = "";
        for (auto j : s) {
            if (j == '/')
                set.insert(dir);
            dir += j;
        }
        set.insert(dir);
        
        std::cout << set.size() - 1 << std::endl;
    }
}
```
    - **核心实现思想**：遍历输入的字符串，遇到`/`时将当前路径插入`set`，最后再插入完整路径，输出`set`大小减1。

- **_Clown_（4星）**
    - **关键亮点**：详细剖析代码，对使用`set`的思路和代码实现步骤解释清晰，便于理解。
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int Total;
string Now;
int main(void)
{
    register int i;
    cin>>Total;
    register set<string>Set;
    Set.clear();
    while(Total--)
    {
        register string Push;
        cin>>Now;
        Push="";
        for(i=0;i<Now.size();i++)
        {
            if(Now[i]=='/')
            {
                Set.insert(Push);
            }
            Push+=Now[i];
        }
        Set.insert(Push);
        cout<<Set.size()-1<<endl;
    }
    return 0;
}
```
    - **核心实现思想**：与Anguei的思路一致，通过遍历字符串，在遇到`/`时插入路径到`set`，最后输出`set`大小减1。

- **windows250（4星）**
    - **关键亮点**：使用类似字典树的结构，结合`map`存储文件夹信息，能有效处理路径关系。
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
#define MAXN 50001

using namespace std;

struct floor
{
    map<string,int> next;
}tree[MAXN];
int N,cnt=0;

int main()
{
    ios::sync_with_stdio(false);
    cin>>N;
    for(int i=1;i<=N;i++)
    {
        char tmp[101]={0};
        string t="";
        int now=0;
        cin>>tmp;
        for(int i=1;i<=strlen(tmp);i++)
            if(tmp[i]=='/' || i==strlen(tmp))
            {
                if(!tree[now].next[t])
                    tree[now].next[t]=now=++cnt;
                else now=tree[now].next[t];
                t="";
            }
            else if(tmp[i]!='/') t+=tmp[i];
        cout<<cnt;if(i!=N) cout<<endl;
    }
    return 0;
}
```
    - **核心实现思想**：遍历输入的字符串，按`/`分割文件夹名，使用`map`存储文件夹编号，若不存在则新建，最后输出创建的文件夹总数。

### 最优关键思路或技巧
- **数据结构**：使用`set`自动去重，能高效处理重复路径；使用`map`存储文件夹信息，方便查找和插入；使用Trie树结构，能有效处理路径的层级关系。
- **算法优化**：在遍历字符串时，遇到`/`进行路径解析和插入操作，避免不必要的计算。
- **思维方式**：将文件夹路径问题转化为路径去重和计数问题，简化问题解决思路。

### 拓展思路
同类型题或类似算法套路：
- 处理文件系统相关问题，如计算文件系统中不同文件类型的数量、统计文件系统中文件夹的深度等。
- 处理字符串路径问题，如计算不同路径的数量、判断路径是否存在等。

### 推荐题目
- P2262 [HNOI2004]FTP服务器
- P3879 [TJOI2010]阅读理解
- P4421 [COCI2017-2018#1] Cezar

### 个人心得摘录与总结
- **离散小波变换°**：使用哈希方法时遇到哈希碰撞问题，通过链式哈希解决；注意读入字符串时的长度问题，手写`getline`避免因系统差异导致的问题；发现第六个测试点结尾出现`/`，影响原计划的边读边计算。
- **SIXIANG32**：使用`set`时发现样例3过不了，通过将父亲文件夹作为后缀或前缀解决问题。
- **chengni**：第六个点有空行，需要进行额外处理。

---
处理用时：42.63秒
# 题目信息

# 凯撒密码

## 题目描述

在元老院的支持下，Caesar率领罗马军团进攻高卢地区。但是他的军事行动并不顺利，他急需你的支持。

一天，你突然受到Caesar从前线写来的信。为了防止敌军偷窃情报，Caesar决定用自创的密码来写这封信。但是面对满纸的乱码，你也无从下手。于是你前往元老院询问这种密码的玄机。

元老们告诉你，这是凯撒移位密码（世界上最早的加密术——编者注），解读它非常的简单：

对于明文中的每个字母，Caesar会用它后面的第t个字母代替。例如，当t=3时，字母A将变成C，字母B将变成D，……，字母Y将变成A，字母Z将变成B（假设字母表是循环的）。

这样一来，字母表：A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

将变成： C D E F G H I J K L M N O P Q R S T U V W X Y Z A B

明文：  I Need Soldiers  将加密为

密文：  K Pggf Uqnfkgtu

如此一来，需要传达的信息在外人看来就如同天书了。加上Caesar会不时更换t的值，使得密码变得更加难以捉摸。

你的任务是将Caesar的密码翻译为明文。


## 说明/提示

1.如果你有看过《福尔摩斯探案集》的话，请回忆“跳舞娃娃”密码破译第一步；

2.我想这些可能会对你有帮助：

e 0.1268

t 0.0978

a 0.0788

o 0.0766

i 0.0707

n 0.0706

s 0.0634

r 0.0594


## 样例 #1

### 输入

```
START

NS BFW, JAJSYX TK NRUTWYFSHJ FWJ YMJ WJXZQY TK YWNANFQ HFZXJX

END

START

N BTZQI WFYMJW GJ KNWXY NS F QNYYQJ NGJWNFS ANQQFLJ YMFS XJHTSI NS WTRJ

END

START

IFSLJW PSTBX KZQQ BJQQ YMFY HFJXFW NX RTWJ IFSLJWTZX YMFS MJ

END

ENDOFINPUT

```

### 输出

```
IN WAR, EVENTS OF IMPORTANCE ARE THE RESULT OF TRIVIAL CAUSES

I WOULD RATHER BE FIRST IN A LITTLE IBERIAN VILLAGE THAN SECOND IN ROME

DANGER KNOWS FULL WELL THAT CAESAR IS MORE DANGEROUS THAN HE

```

# AI分析结果

### 综合分析与结论
本题主要是对凯撒密码进行解密，由于未给出偏移量`t`，需根据英语中字母`e`出现频率最高这一特点，找出密文中出现次数最多的字母，将其对应为`E`来计算偏移量。各题解整体思路一致，但在输入处理、大小写转换、偏移量计算和边界处理等方面存在差异。

### 所选题解
- **作者：octal（5星）**
    - **关键亮点**：思路清晰，将问题分解为多个自定义函数解决，代码可读性高，对输入处理和边界判断有详细注释。
    - **个人心得**：提到在输入处理上卡了很久，了解到`cin`后用`getline`会把空格和回车读入，需要打两个`getline`。
```cpp
// 计算偏移量
int f(string s) {
    int i, len = s.size();
    for (i = 0; i < len; i++)
        v[(int)s[i]]++;
    int maxn = 0, j;
    for (i = 'A'; i <= 'Z'; i++) {
        if (v[i] > maxn) {
            maxn = v[i];
            j = i;
        }
    }
    int ans = 'E' - j;
    return ans;
}

// 翻译密文
void translate(string &s, int t) {
    int len = s.size();
    for (int i = 0; i < len; i++) {
        if (s[i] >= 'A' && s[i] <= 'Z') {
            s[i] += t;
            if (s[i] > 'Z') s[i] -= 26;
            if (s[i] < 'A') s[i] += 26;
        }
    }
}
```
- **作者：happybob（4星）**
    - **关键亮点**：使用`map`和`unordered_map`统计字母出现次数，代码实现较为简洁，还介绍了`transform`函数的使用。
    - **个人心得**：强调读题要仔细，理解偏移量`t`的含义，同时提到可以对代码进行优化，如使用`unordered_map`提高效率。
```cpp
// 统计字母出现次数并找出出现最多的字母
for (int i = 0; i <= len; i++) {
    if (isalpha(s[i])) {
        mp[s[i]]++;
        if (mp[s[i]] >= max) {
            max = mp[s[i]];
            xb = s[i];
        }
    }
}

// 计算偏移量并解密
if (xb > 'E') {
    a = xb - 'E';
} else {
    a = 'E' - xb;
}
for (int i = 0; i <= len; i++) {
    if (isalpha(s[i])) {
        if (s[i] - a > 'Z' || s[i] - a < 'A') {
            for (int j = 1; j <= a; j++) {
                if (s[i] == 'A') {
                    s[i] = 'Z';
                    j++;
                }
                if (j <= a) {
                    s[i]--;
                }
            }
        } else {
            s[i] -= a;
        }
    }
}
```
- **作者：反比例函数（4星）**
    - **关键亮点**：使用结构体对字母出现次数进行排序，代码结构清晰，对输入处理和特殊情况判断有详细注释。
    - **个人心得**：表示本题有一定思维难度和很多坑点，提交21次才通过，提醒注意大小写转换、密码沿用和输入回车处理。
```cpp
class rk {
public:
    int num;
    char data;
} t[128];

// 统计字母出现次数
for (i = 0; i < len; i++)
    if (isalpha(s[i])) {
        if (islower(s[i])) s[i] = toupper(s[i]);
        t[(int)s[i]].num++;
        t[(int)s[i]].data = s[i];
    }

// 对字母出现次数进行排序
sort(t, t + 128, [](const rk &a, const rk &b) {
    if (a.num == b.num) return a.data < b.data;
    return a.num > b.num;
});

// 计算偏移量并解密
if (cnt == 1) f = t[0].data - 'E';
for (i = 0; i < len; i++) {
    if (isalpha(s[i])) {
        s[i] -= f;
        if (s[i] > 'Z') s[i] -= 26;
        if (s[i] < 'A') s[i] += 26;
    }
}
```

### 最优关键思路或技巧
- **利用字母频率特性**：根据英语中字母`e`出现频率最高的特点，找出密文中出现次数最多的字母，将其对应为`E`来计算偏移量。
- **模块化编程**：将问题分解为输入、计算偏移量、翻译等多个小问题，使用自定义函数解决，提高代码的可读性和可维护性。
- **边界处理**：在字母偏移时，要考虑超出字母表范围的情况，通过加或减26来实现循环。

### 可拓展之处
同类型题或类似算法套路包括其他简单的替换密码，如仿射密码、维吉尼亚密码等，解题思路类似，都是通过分析密文的特征来找出加密规律。

### 推荐题目
- [P1193 洛谷的文件夹设置](https://www.luogu.com.cn/problem/P1193)：涉及字符串处理和简单的加密解密思想。
- [P1055 ISBN号码](https://www.luogu.com.cn/problem/P1055)：需要对字符串进行处理和校验，与本题的字符串操作有相似之处。
- [P1308 统计单词数](https://www.luogu.com.cn/problem/P1308)：主要考察字符串的查找和统计，锻炼字符串处理能力。

### 个人心得总结
多位作者提到本题有一些坑点，如输入处理、大小写转换、偏移量计算和边界判断等。在做题时要仔细读题，注意细节，多进行调试和测试，避免因小错误导致代码无法通过。同时，可以将问题分解为多个小问题，使用模块化编程的思想，提高代码的可读性和可维护性。

---
处理用时：35.96秒
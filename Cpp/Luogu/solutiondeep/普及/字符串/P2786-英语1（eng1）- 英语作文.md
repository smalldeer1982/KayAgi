# 题目信息

# 英语1（eng1）- 英语作文

## 题目背景

蒟蒻 HansBug 在英语考场上，挠了无数次的头，可脑子里还是一片空白。

## 题目描述

眼下出现在 HansBug 蒟蒻面前的是一篇英语作文，然而智商捉急的 HansBug 已经草草写完了，此时他发现离考试结束还有 $40$ 分钟，于是他打算估计一下这篇共有 $M$ 个单词的英语作文的含金量如何。众所周知的是，在中高考英语作文中使用高级词汇可以有效提高文章的含金量，从而获得更好的分数。已知蒟蒻HansBug知道 $N$ 个高级词汇，该词汇为 $A_i$（词汇长度为 $L_i$ ，包含数字、大小写字母），该高级词汇的含金量为 $B_i$，则该高级词汇每出现一次便可增加 $B_i$ 的含金量。可是他脑细胞和 RP 已经消耗殆尽，所以这个伟大的任务就交给你啦！

## 说明/提示

样例 $1$ 中，共计出现了 $2$ 次`hansbug`、 $2$ 次`absi2011` 、 $1$ 次 `yyy` 、 $1$ 次`kkksc03`、 $1$ 次  `lzn` ，所以总含金量为 $1\times2+2\times4+3\times1+4\times1+100\times1=115$，对 $99$ 取模就是 $16$ 。

样例 $2$ 中，和样例 $1$ 基本一样，值得注意的是整体的 `yyyy` 不可以被认为是 `yyy` 出现 $2$ 次，请注意这是一篇英语作文，一切以单词为最小单位。

此题目中大小写敏感。

数据范围（设所有单词的最大长度为 $Lmax$ ）：

![](https://cdn.luogu.com.cn/upload/pic/2228.png)


## 样例 #1

### 输入

```
5 99
hansbug 1
kkksc03 2
yyy 3
absi2011 4
lzn 100
hansbug is a juruo!but absi2011 not.!?!
one day absi2011 laughed at yyy and hansbug.
then kkksc03 and lzn blamed him for that.
```

### 输出

```
16```

## 样例 #2

### 输入

```
5 99
yyyy 1
kkksc03 2
yyy 3
absi2011 4
lzn 100
yyyy is a juruo!but absi2011 not.!?!
one day absi2011 laughed at yyy and yyyy.
then kkksc03 and lzn blamed him for that.
```

### 输出

```
16```

# AI分析结果

### 综合分析与结论
这些题解主要围绕统计英语作文中高级词汇的含金量展开，使用了多种数据结构和算法，包括 `map`、哈希、二分查找、Trie 树、替罪羊树等。`map` 解法简单直接，利用其内置红黑树的特性，能高效处理词汇映射；哈希结合二分查找可提高查找效率，但需解决哈希冲突；Trie 树理论上适合字符串匹配，但空间开销大；替罪羊树是一种新尝试，实现相对复杂。

### 所选题解
- **作者：Diamiko（5星）**
    - **关键亮点**：思路清晰，代码简洁，使用 `std::map` 轻松解决问题，对输入处理的逻辑明确，注释详细。
    - **核心代码**：
```cpp
map<string,ll>a;
ll ans;
//...
while(scanf("%c",&c)!=EOF)
{
    if(!(isdigit(c)||isalpha(c)))
    {
        ans=((ans%p)+(a[t]%p))%p;
        t="";
    }
    else t+=c;
}
```
    - **核心实现思想**：将高级词汇和其含金量存储在 `map` 中，逐字符读取文章，遇到分隔符时更新答案并清空当前词汇，若当前词汇是高级词汇则累加其含金量。

- **作者：Edgaru089（4星）**
    - **关键亮点**：使用 C++11 的 `unordered_map` 黑科技，自带哈希功能，速度快，代码结构清晰。
    - **核心代码**：
```cpp
unordered_map<string, int> m;
//...
do {
    unordered_map<string, int>::iterator i = m.find(str);
    if (i!= m.end())
        sum = (sum + i->second) % p;
    readstr(str);
} while (str!= "");
```
    - **核心实现思想**：将高级词汇和其含金量存储在 `unordered_map` 中，逐单词读取文章，使用 `find` 方法查找当前单词是否为高级词汇，若是则累加其含金量。

- **作者：little_gift（4星）**
    - **关键亮点**：使用 `fread` 加速输入，结合 `pbds::tree` 进行词汇映射，优化了时间复杂度。
    - **核心代码**：
```cpp
__gnu_pbds::tree < string, int > mm;
__gnu_pbds::tree < string, int > :: iterator it;
//...
it = mm.find(st);
if (it!= mm.end())
    s = (s + it -> second % p) % p;
```
    - **核心实现思想**：使用 `fread` 读取输入，将高级词汇和其含金量存储在 `pbds::tree` 中，逐单词读取文章，使用 `find` 方法查找当前单词是否为高级词汇，若是则累加其含金量。

### 最优关键思路或技巧
- 使用 `map` 或 `unordered_map` 存储高级词汇和其含金量，能快速查找和更新答案。
- 采用 `fread` 加速输入，提高程序效率。
- 对于哈希算法，使用多次异或运算解决哈希冲突。

### 可拓展之处
同类型题可涉及字符串匹配、统计特定模式出现次数等。类似算法套路有：使用字典树（Trie）处理字符串前缀匹配；使用哈希表加速查找；结合二分查找优化查找效率。

### 推荐题目
- P3370 【模板】字符串哈希
- P2580 于是他错误的点名开始了
- P4391 [BOI2009]Radio Transmission 无线传输

### 个人心得摘录与总结
- **作者：BackSlashDelta**：最初使用哈希 + 暴力查找 TLE 了五个点，意识到暴力效率低，改用哈希 + 二分查找解决问题，强调要注意算法的时间复杂度。
- **作者：户山香澄**：尝试用 Trie 树解题，因空间开销大 MLE 5 个点，后对 Trie 进行左儿子右兄弟优化，虽未完全 AC 但有一定提升，体现了 Trie 树“用空间换时间”的特点。
- **作者：happybob**：认识到使用 `unordered_map` 的暴力解法无法通过，强调大赛和刷题要注意时限、数据和时间复杂度。 

---
处理用时：27.03秒
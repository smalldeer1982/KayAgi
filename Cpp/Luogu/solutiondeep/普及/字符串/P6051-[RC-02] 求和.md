# 题目信息

# [RC-02] 求和

## 题目描述

小 Q 给你了几行字符串，字符串中间包含有一些整数，整数之间可能会有其他字符。你需要输出每行中所有整数的和。如果一个行里面一个数都没有则不要输出。**每两个整数之间一定有间隔字符（见样例 $3$）。**

请注意，题目中的整数都是简单的整数，即：整数前面没有多余的符号。假如数据中有 `.`，视作分隔符。

## 说明/提示

【样例解释】

- 第一个样例中，第一行有 $57,54,-321,8$ 几个数，和为 $-202$；第二、三行没有数字；第四行只有一个 $4$，输出 $4$。
- 第二个样例中只有一行，有两个数，和为 $4532893$。
- 第三个样例的第一行，由于每两个整数之间一定有间隔字符，所以把 `-` 视为间隔字符，输出 $2$。第五行，第一个数为 $-1$，因此把第二个 `-` 视为间隔字符，和为 $-1+1=0$。第七行，将 `.` 视为间隔字符，和为 $-2+3=1$。

【数据范围】

说明：「条件 A」指数据中不存在除数字、空格、换行、水平制表符之外的其他字符；「条件 B」指每两个数之间一定用且只用一个空格隔开。

**由于数据在 Windows 下制造，行末可能有多余的 `\r` 字符。请注意。**

对于 $10\%$ 的数据，满足条件 A 和 B，每行一定有且仅有 $10$ 个数；

对于 $40\%$ 的数据，满足条件 A 和 B，且不存在空行；

对于 $50\%$ 的数据，满足条件 A 和 B；

对于 $70\%$ 的数据，满足条件 A；

对于 $100\%$ 的数据，不存在除水平制表符、空格、换行外的不可见字符，每行不超过 $1000$ 个字符，每行最多包含 $200$ 个整数，不超过 $100$ 行，每个整数均 $\in[-10^7,10^7]$。

## 样例 #1

### 输入

```
su57jdkjth54hjsns-321d 8 ejre
erg(&-^%

weruy4uhnd-```

### 输出

```
-202
4```

## 样例 #2

### 输入

```
          4532984       d    -1```

### 输出

```
4532983```

## 样例 #3

### 输入

```
1-1
1 -1
1--5
1-----------1
-1-1
--1
-2.3```

### 输出

```
2
0
-4
0
0
-1
1```

# AI分析结果

### 综合分析与结论
这些题解核心思路一致，都是遍历每行字符串，识别并累加其中的整数，同时处理负数和无数字行的情况。算法要点在于准确判断数字、负号以及间隔符。难点是区分负号是数字符号还是间隔符。
### 所选题解
- **作者：Pethly_Cat（5星）**
    - 关键亮点：思路清晰，代码简洁易懂，详细注释便于理解。
    - 核心代码：
```cpp
while(getline(cin,s)){
    n=sum=0;
    flag=false;
    f=false;
    for(int i=0;i<s.size();i++){
        if(s[i]>='0'&&s[i]<='9') f=true;
        if(s[i-1]>='0'&&s[i-1]<='9'&&(s[i]<'0'||s[i]>'9')) continue;
        if(s[i]=='-'&&s[i+1]>='0'&&s[i+1]<='9') flag=true;
        if(s[i]>='0'&&s[i]<='9'){
            n=n*10+(s[i]-'0');
            if(s[i+1]<'0'||s[i+1]>'9'){
                if(flag==true) n=-n,flag=false;
                sum+=n,n=0;
            }
        }
    }
    if(f==true) cout<<sum<<endl;
}
```
    - 核心实现思想：遍历字符串，用`f`标记是否有数字，用`flag`标记是否为负数。遇到数字累加，遇到非数字且前一个是数字则判断正负并更新总和。
- **作者：封禁用户（4星）**
    - 关键亮点：思路清晰，对负号处理逻辑明确，代码简洁。
    - 核心代码：
```cpp
while(getline(cin,s)){
    int ans=0;
    bool m=false;
    for(int i=0;i<s.size();i++) {
        if(s[i]>='0' && s[i]<='9'){
            int j=i,sum=0;
            while(s[j]>='0' && s[j]<='9')
                sum=sum*10+(s[j]-'0'),j++;
            if(s[i-1]=='-' && (s[i-2]<'0' || s[i-2]>'9'))ans-=sum;
            else ans+=sum;
            i=j,m=true;
        }
    }
    if(m==true)cout<<ans<<endl;
}
```
    - 核心实现思想：遍历字符串，找到数字后计算其值，根据负号前字符判断正负，用`m`标记是否有数字，最后输出总和。
- **作者：Eason_AC（4星）**
    - 关键亮点：详细列出坑点，代码逻辑清晰，使用数组存储数字。
    - 核心代码：
```cpp
while(gets(a)) {
    int num[207] = {0}, sum = 0, n = strlen(a), cur = 0, cnt = 0;
    while(cur < n) {
        if((a[cur] >= '0' && a[cur] <= '9') || (a[cur] == '-' && (a[cur + 1] >= '0' && a[cur + 1] <= '9') && (a[cur - 1] < '0' || a[cur - 1] > '9'))) {
            int x = 0, f = 1;
            if(a[cur] == '-') {f = -1; cur++;}
            while(a[cur] >= '0' && a[cur] <= '9') {
                x = x * 10 + (a[cur] - '0');
                cur++;
            }
            num[++cnt] = x * f;
        }
        else cur++;
    }
    if(!cnt) continue;
    for(int i = 1; i <= cnt; ++i)
        sum += num[i];
    printf("%d\n", sum);
}
```
    - 核心实现思想：遍历字符数组，找到数字和负号，判断正负后存储到数组`num`中，最后累加数组元素输出总和。
### 最优关键思路与技巧
- 用布尔变量标记字符串中是否有数字，避免无数字行输出。
- 处理负号时，判断其前后字符，区分是数字符号还是间隔符。
### 可拓展之处
同类型题可拓展到处理更复杂的字符串，如包含小数、分数等。类似算法套路是遍历字符串，根据特定规则提取信息并处理。
### 洛谷相似题目推荐
- P1125 [NOIP2008 提高组] 笨小猴：字符串处理，统计字符出现次数。
- P1598 垂直柱状图：字符串处理，统计字符频率并输出柱状图。
- P1308 [NOIP2011 普及组] 统计单词数：字符串匹配，统计单词出现次数。
### 个人心得摘录与总结
- **作者：是非交融**：通过多次WA摸索出要点，如判断无数字行、处理负数和间隔符等。总结为做题要多尝试，从错误中积累经验。
- **作者：200610311a**：认为本题细节多，想得部分分容易，但要AC需仔细处理负号。总结为做细节题要耐心，全面考虑各种情况。 

---
处理用时：36.70秒
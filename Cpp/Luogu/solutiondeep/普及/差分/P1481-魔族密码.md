# 题目信息

# 魔族密码

## 题目背景

风之子刚走进他的考场，就……

花花：当当当当~~偶是魅力女皇——花花！！^^（华丽出场，礼炮，鲜花）

风之子：我呕……（杀死人的眼神）快说题目！否则……-\_-###

## 题目描述



花花：……咦~~好冷~~我们现在要解决的是魔族的密码问题（自我陶醉：搞不好魔族里面还会有人用密码给我和菜虫写情书咧，哦活活，当然是给我的比较多拉\*^\_^\*）。

魔族现在使用一种新型的密码系统。每一个密码都是一个给定的仅包含小写字母的英文单词表，每个单词至少包含 $1$ 个字母，至多 $75$ 个字母。如果在一个由一个词或多个词组成的表中，除了最后一个以外，每个单词都被其后的一个单词所包含，即前一个单词是后一个单词的前缀，则称词表为一个词链。例如下面单词组成了一个词链：

- $\verb!i!$；
- $\verb!int!$；
- $\verb!integer!$。

但下面的单词不组成词链：

- $\verb!integer!$；
- $\verb!intern!$。

现在你要做的就是在一个给定的单词表中取出一些词，组成最长的词链，就是包含单词数最多的词链。将它的单词数统计出来，就得到密码了。

风之子：密码就是最长词链所包括的单词数阿……


## 样例 #1

### 输入

```
5
i
int
integer
intern
internet
```

### 输出

```
4
```

# AI分析结果

### 综合分析与结论

本题的核心是寻找最长的词链，即一组单词，其中每个单词都是下一个单词的前缀。题解中主要采用了以下几种思路：

1. **动态规划（DP）**：大多数题解使用DP，通过判断当前单词是否是前面某个单词的前缀来更新状态。这是最直观的解法，时间复杂度为O(n²)。
2. **Trie树**：部分题解使用Trie树来优化前缀匹配，时间复杂度为O(n * L)，其中L是单词的平均长度。
3. **哈希**：少数题解使用哈希来快速判断前缀关系，时间复杂度为O(n * L)。

### 所选高星题解

#### 1. 作者：Rainbow_qwq (赞：73)  
**星级：4.5**  
**关键亮点**：使用`strstr`函数进行前缀匹配，并通过DP更新状态。代码简洁，思路清晰，且通过优化`strstr`的使用避免了不必要的匹配。  
**个人心得**：作者通过调试发现`strstr`的返回值需要与字符串首地址相等才能确保前缀关系，这一细节体现了对问题的深入理解。  
**核心代码**：
```cpp
for(int j=i-1;j>=1;j--)
    if(strstr(s[i],s[j])==s[i])
        f[i]=max(f[j]+1,f[i]);
```

#### 2. 作者：zuytong (赞：28)  
**星级：4.0**  
**关键亮点**：使用`map`记录字符串及其子串的出现次数，通过累加子串的出现次数来统计词链长度。思路新颖，代码简洁。  
**核心代码**：
```cpp
for(int j=0;j<s[i].size();j++) 
    a+=s[i][j], sum+=f[a];
ans=max(ans,sum);
```

#### 3. 作者：RetrO (赞：27)  
**星级：4.0**  
**关键亮点**：使用Trie树进行前缀匹配，通过DFS遍历树结构来统计词链长度。Trie树的引入优化了前缀匹配的效率。  
**核心代码**：
```cpp
void zbr(char *c) {
    int p=0;
    for(int i=0;i<len;i++) {
        int zz=c[i]-'a'+1;
        if(t[p].link[zz]==0) t[p].link[zz]=++cnt;
        p=t[p].link[zz];
        ansm+=t[p].s;
    }
    if(ansm>=ans) ans=ansm+1;
    t[p].s++;
}
```

### 最优关键思路与技巧

1. **动态规划**：通过判断当前单词是否是前面某个单词的前缀来更新状态，是最直观的解法，适合初学者理解。
2. **Trie树**：通过构建Trie树来优化前缀匹配，适合处理大量字符串的场景，时间复杂度较低。
3. **哈希**：通过哈希表快速判断前缀关系，适合对时间复杂度要求较高的场景。

### 可拓展之处

1. **Trie树的应用**：Trie树不仅可以用于前缀匹配，还可以用于字符串的插入、删除、查找等操作，适合处理大量字符串的场景。
2. **哈希优化**：哈希表可以用于快速判断字符串之间的关系，适合处理大规模数据的场景。

### 推荐相似题目

1. **P1481 魔族密码**：本题的原题，考察字符串前缀匹配与动态规划。
2. **P3370 【模板】字符串哈希**：考察字符串哈希的应用。
3. **P2580 于是他错误的点名开始了**：考察Trie树的应用。

### 个人心得总结

- **调试经验**：通过调试发现`strstr`的返回值需要与字符串首地址相等才能确保前缀关系，这一细节体现了对问题的深入理解。
- **优化思路**：通过Trie树和哈希表优化前缀匹配，提高了算法的效率。

---
处理用时：25.96秒
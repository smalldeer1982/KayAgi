# 题目信息

# Color the Axis

## 题目描述

在一条数轴上有 $n$ 个点，分别是 $1,2,\ldots,n$。一开始所有的点都被染成黑色。接着我们进行 $m$ 次操作，第 $i$ 次操作将 $[l_i,r_i]$ 这些点染成白色。请输出每个操作执行后剩余黑色点的个数。

## 说明/提示

- 对于 $30\%$ 的数据，有 $1\le n\le2000$，$1\le m\le2000$；
- 对于 $100\%$ 的数据，有 $1\le l_i\le r_i\le n\le 2\times 10^5$，$1\le m\le 2\times10^5$。

## 样例 #1

### 输入

```
10 3   
3 3   
5 7   
2 8     ```

### 输出

```
9     
6     
3```

# AI分析结果

### 综合分析与结论

本题的核心在于高效处理区间染色操作，并快速查询剩余黑色点的数量。题解中主要采用了以下几种数据结构和方法：

1. **并查集**：通过合并区间来跳过已染色的点，时间复杂度为O(n+m)。
2. **线段树**：通过区间修改和查询来维护黑色点的数量，时间复杂度为O(mlogn)。
3. **珂朵莉树**：通过维护区间推平和查询来解决问题，时间复杂度依赖于区间操作的复杂度。
4. **分块**：将序列分块处理，时间复杂度为O(m√n)。
5. **暴力模拟**：直接模拟染色过程，时间复杂度为O(nm)，适用于小规模数据。

### 所选高星题解

#### 1. 作者：凌幽 (赞：45) - 并查集解法
- **星级**：★★★★★
- **关键亮点**：使用并查集合并区间，避免重复统计，时间复杂度为O(n+m)，效率高。
- **核心实现思想**：通过并查集的`find`操作跳过已染色的区间，减少重复计算。
```cpp
int found(int x){
    return x==fa[x]?x:fa[x]=found(fa[x]);
}
void dy(){
    for(R int i=0;i<=n+1;++i)fa[i]=i;
    while(m--){
        R int a,b;in(a),in(b);
        b=found(b);
        while(a<=b){
            if(a!=b && found(a)==b)break;
            fa[b]=found(fa[b-1]);
            cnt++;
            b=found(b);
        }
        write(n-cnt),putchar('\n');        
    }
}
```

#### 2. 作者：木木！ (赞：22) - 并查集解法
- **星级**：★★★★☆
- **关键亮点**：补充了时间复杂度证明，代码简洁且高效。
- **核心实现思想**：通过并查集的`getfa`和`unio`操作合并区间，减少黑色点的计数。
```cpp
int getfa(int x){
    return x==st[x]?x:st[x]=getfa(st[x]);
}
void unio(int a,int b){
    st[getfa(b)] = getfa(a);
}
```

#### 3. 作者：zh_dou (赞：8) - 珂朵莉树解法
- **星级**：★★★★☆
- **关键亮点**：使用珂朵莉树处理区间推平和查询，代码简洁且高效。
- **核心实现思想**：通过`Split`和`Assign`操作维护区间推平，减少黑色点的计数。
```cpp
void Assign(signed l,signed r,int val){
    IT it2=Split(r+1),it1=Split(l);
    for(IT it=it1;it!=it2;++it)
        sum-=it->val*(it->r-it->l+1);
    s.erase(it1,it2);
    s.insert(Node(l,r,val));
}
```

### 最优关键思路与技巧

1. **并查集的应用**：通过合并区间来跳过已染色的点，减少重复计算，时间复杂度为O(n+m)。
2. **线段树的区间修改与查询**：通过维护区间和来快速查询黑色点的数量，时间复杂度为O(mlogn)。
3. **珂朵莉树的区间推平**：通过维护区间推平和查询来减少黑色点的计数，代码简洁且高效。

### 可拓展之处

- **同类型题**：类似区间修改和查询的题目，如区间求和、区间最大值等。
- **类似算法套路**：并查集、线段树、珂朵莉树等数据结构在处理区间操作时的高效应用。

### 推荐题目

1. **P3372 【模板】线段树 1** - 区间修改与查询
2. **P3368 【模板】树状数组 1** - 单点修改与区间查询
3. **P4145 上帝造题的七分钟2 / 花神游历各国** - 区间开方与查询

### 个人心得摘录

- **凌幽**：通过并查集合并区间，避免重复统计，代码简洁且高效。
- **木木！**：补充了时间复杂度证明，代码简洁且高效。
- **zh_dou**：使用珂朵莉树处理区间推平和查询，代码简洁且高效。

这些题解展示了不同数据结构在解决区间染色问题中的应用，并提供了高效的解决方案。

---
处理用时：33.70秒
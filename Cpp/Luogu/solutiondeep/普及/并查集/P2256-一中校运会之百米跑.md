# 题目信息

# 一中校运会之百米跑

## 题目背景

在一大堆秀恩爱的 \*\* 之中，来不及秀恩爱的苏大学神踏着坚定（？）的步伐走向了 $100$ 米跑的起点。这时苏大学神发现，百米赛跑的参赛同学实在是太多了，连体育老师也忙不过来。这时体育老师发现了身为体育委员的苏大学神，便来找他帮忙。

可是苏大学神需要热身，不然跑到一半就会抽（筋）、于是他就找到了你。。。如果你帮助体育老师解决了问题，老师就会给你 $5$ 个积分。

## 题目描述

假设一共有 $N$（$2\leq N\leq 2\times 10^4$）个参赛选手。（尼玛全校学生都没这么多吧）

老师会告诉你这 $N$ 个选手的名字。

接着会告诉你 $M$（$1\leq M\leq 10^6$）句话，即告诉你学生 A 与学生 B 在同一个组里。

如果学生 A 与学生 B 在同一组里，学生 B 与学生 C 也在同一组里，就说明学生 A 与学生 C 在同一组。

然后老师会问你 $K$（$1\leq K\leq 10^6$）句话，即学生 X 和学生 Y 是否在同一组里。

若是则输出 `Yes.`，否则输出 `No.`。

## 样例 #1

### 输入

```
10 6
Jack
Mike
ASDA
Michel
brabrabra
HeHe
HeHE
papapa
HeY
Obama
Jack Obama
HeHe HeHE
brabrabra HeHe
Obama ASDA
papapa Obama
Obama HeHE
3
Mike Obama
HeHE Jack
papapa brabrabra
```

### 输出

```
No.
Yes.
Yes.
```

# AI分析结果

### 综合分析与结论

本题的核心是使用并查集（Disjoint Set Union, DSU）来处理字符串的分组与查询问题。由于输入是字符串而非数字，因此难点在于如何高效地将字符串映射到并查集的节点上。大多数题解采用了`map`或`unordered_map`来实现字符串到整数的映射，进而使用并查集进行分组和查询操作。部分题解还提到了路径压缩和按秩合并等优化技巧，以提高并查集的效率。

### 评分较高的题解

#### 1. **作者：vectorwyx (赞：194)**  
   **星级：5星**  
   **关键亮点：**  
   - 使用`map<string, string>`直接映射字符串，简化了并查集的实现。
   - 代码简洁明了，路径压缩优化清晰。
   - 使用了STL库，代码可读性强，适合初学者学习。

   **核心代码：**
   ```cpp
   map<string,string> a;
   string fin(string x){
       if(a[x]==x) return x;
       else return a[x]=fin(a[x]); // 路径压缩
   }
   ```

#### 2. **作者：翼德天尊 (赞：48)**  
   **星级：4星**  
   **关键亮点：**  
   - 详细解释了并查集的基本原理和优化技巧。
   - 通过结构体存储字符串和编号，避免了直接使用`map`，适合对STL不熟悉的读者。
   - 提供了完整的代码实现，并附有详细注释。

   **核心代码：**
   ```cpp
   string find(string name){
       if(f[fname(name)]==name) return name;
       return f[fname(name)]=find(f[fname(name)]); // 路径压缩
   }
   ```

#### 3. **作者：Magallan_forever (赞：9)**  
   **星级：4星**  
   **关键亮点：**  
   - 结合了并查集和哈希（BKDR Hash）来处理字符串，提供了另一种思路。
   - 详细介绍了哈希函数的实现，适合对哈希算法感兴趣的读者。
   - 代码结构清晰，注释详细。

   **核心代码：**
   ```cpp
   int hash(string s){
       ull hash_=0;
       for(int i=0;i<s.length();i++) hash_=hash_*seed+s[i];
       return hash_%200000;
   }
   ```

### 最优关键思路与技巧

1. **字符串映射：** 使用`map`或`unordered_map`将字符串映射到整数，便于并查集操作。
2. **路径压缩：** 在查找过程中将节点的父节点直接指向根节点，减少后续查找的时间复杂度。
3. **按秩合并：** 在合并操作中，将较小的树合并到较大的树上，保持树的平衡，进一步优化并查集的效率。

### 可拓展之处

1. **哈希优化：** 如果字符串数量较大，可以考虑使用更高效的哈希函数或自定义哈希表来加速映射。
2. **多线程处理：** 对于大规模数据，可以考虑将并查集操作并行化，利用多核处理器加速计算。

### 推荐题目

1. **P3367 【模板】并查集** - 经典的并查集模板题，适合初学者练习。
2. P1551 亲戚 - 并查集的实际应用，考察如何通过并查集处理家族关系。
3. P1196 [NOI2002] 银河英雄传说 - 并查集的进阶应用，涉及路径压缩和按秩合并的优化。

### 个人心得总结

- **调试经历：** 部分题解提到在调试过程中遇到字符串映射错误，建议在实现时仔细检查字符串的输入和映射逻辑。
- **顿悟感想：** 并查集的核心思想是通过路径压缩和按秩合并来优化查找和合并操作，理解这一点后，代码实现会更加顺畅。

---
处理用时：33.62秒
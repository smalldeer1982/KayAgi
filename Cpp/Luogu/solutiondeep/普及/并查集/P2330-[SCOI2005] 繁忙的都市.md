# 题目信息

# [SCOI2005] 繁忙的都市

## 题目描述

城市 C 是一个非常繁忙的大都市，城市中的道路十分的拥挤，于是市长决定对其中的道路进行改造。城市 C 的道路是这样分布的：城市中有 $n$ 个交叉路口，有些交叉路口之间有道路相连，两个交叉路口之间最多有一条道路相连接。这些道路是双向的，且把所有的交叉路口直接或间接的连接起来了。每条道路都有一个分值，分值越小表示这个道路越繁忙，越需要进行改造。但是市政府的资金有限，市长希望进行改造的道路越少越好，于是他提出下面的要求：

1. 改造的那些道路能够把所有的交叉路口直接或间接的连通起来。
1. 在满足要求 1 的情况下，改造的道路尽量少。
1. 在满足要求 1、2 的情况下，改造的那些道路中分值最大的道路分值尽量小。

任务：作为市规划局的你，应当作出最佳的决策，选择哪些道路应当被修建。

## 说明/提示

### 数据范围及约定

对于全部数据，满足 $1\le n\le 300$，$1\le c\le 10^4$，$1 \le m \le 8000$。

## 样例 #1

### 输入

```
4 5
1 2 3
1 4 5
2 4 7
2 3 6
3 4 8
```

### 输出

```
3 6```

# AI分析结果

### 综合分析与结论

本题的核心是构建一个最小生成树（MST），并且要求生成树中的最大边权尽可能小。根据题意，最小生成树的性质恰好满足题目要求，因此大多数题解都采用了Kruskal或Prim算法来解决。Kruskal算法由于其基于贪心和并查集的特性，更适合处理边数较多的情况，因此被广泛使用。

### 所选高星题解

#### 1. 作者：张佳 (赞：49)
- **星级**：5星
- **关键亮点**：思路清晰，直接指出本题是最小生成树的裸题，并详细解释了Kruskal和Prim算法的适用场景。代码实现简洁，且提供了两种算法的实现，便于读者对比学习。
- **个人心得**：作者提到“此题用克鲁斯卡尔更优，因为要保证条件3，不过貌似prim也能过”，强调了算法选择的合理性。
- **核心代码**：
  ```cpp
  int find(int x) {
      if(fa[x]!=x) 
          fa[x]=find(fa[x]);
      return fa[x];
  }
  void unionn(int x,int y) {
      int fx = find(x);
      int fy = find(y);
      if (fx != fy) fa[fx]=fy;
  }
  ```
  **核心思想**：使用并查集来维护节点的连通性，通过贪心策略选择最小边权，确保生成树的最大边权最小。

#### 2. 作者：a15326987 (赞：34)
- **星级**：4星
- **关键亮点**：详细解释了Kruskal算法的实现步骤，并强调了并查集的核心作用。代码结构清晰，适合初学者理解。
- **个人心得**：作者提到“克鲁斯卡尔的精髓三个字——_并查集_”，强调了并查集在Kruskal算法中的重要性。
- **核心代码**：
  ```cpp
  int find(int x) {
      if(x!=fa[x])  fa[x]=find(fa[x]);
      return fa[x];
  }
  ```
  **核心思想**：通过并查集维护节点的连通性，避免形成环，确保生成树的边数最少且最大边权最小。

#### 3. 作者：Skyjoy (赞：6)
- **星级**：4星
- **关键亮点**：详细分析了题目条件与最小生成树的关系，明确指出题目要求的是最小生成树的最大边权。代码实现简洁，适合快速理解。
- **核心代码**：
  ```cpp
  int find(int x) {
      while(x!=fi[x]) {
          x=fi[x]=fi[fi[x]];
      }
      return x;
  }
  ```
  **核心思想**：通过并查集维护节点的连通性，确保生成树的边数最少且最大边权最小。

### 最优关键思路与技巧

1. **并查集的应用**：Kruskal算法中，并查集用于快速判断两个节点是否连通，避免形成环，确保生成树的边数最少。
2. **贪心策略**：Kruskal算法通过贪心策略选择最小边权，确保生成树的最大边权最小。
3. **算法选择**：Kruskal算法更适合处理边数较多的情况，而Prim算法更适合处理稠密图。

### 拓展思路与同类型题

1. **同类型题**：
   - [P3366 【模板】最小生成树](https://www.luogu.org/problem/P3366)
   - [P2820 局域网](https://www.luogu.org/problem/P2820)
   - [P1991 无线通讯网](https://www.luogu.org/problem/P1991)

2. **拓展思路**：在处理类似问题时，可以考虑使用Kruskal或Prim算法，并根据图的性质选择合适的算法。此外，还可以考虑使用二分答案结合并查集的方法来解决某些特定问题。

### 个人心得总结

- **调试经历**：部分作者提到在实现Kruskal算法时，由于未正确处理并查集的路径压缩，导致程序效率低下或出错。这提醒我们在实现并查集时，务必注意路径压缩的优化。
- **顿悟感想**：有作者提到“最小生成树必定是一棵最小瓶颈生成树”，这一性质在解决类似问题时非常有用，可以帮助我们快速理解题目的本质。

---
处理用时：34.25秒
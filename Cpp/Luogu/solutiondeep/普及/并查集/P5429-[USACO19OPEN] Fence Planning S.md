# 题目信息

# [USACO19OPEN] Fence Planning S

## 题目描述

Farmer John 的 $ N $ 头奶牛，编号为 $ 1 \ldots N $ （ $ 2 \leq N \leq 10^5 $ ），拥有一种围绕“哞网”，一些仅在组内互相交流却不与其他组进行交流的奶牛小组，组成的复杂的社交网络。

每头奶牛位于农场的二维地图上的不同位置 $ (x,y) $ ，并且我们知道有 $ M $ 对奶牛( $ 1 \leq M<10^5 $ )会相互哞叫。两头相互哞叫的奶牛属于同一哞网。

为了升级他的农场，Farmer John 想要建造一个四边与 $ x $ 轴和 $ y $ 轴平行的长方形围栏。Farmer John 想要使得至少一个哞网完全被围栏所包围（在长方形边界上的奶牛计为被包围的）。请帮助 Farmer John 求出满足他的要求的围栏的最小可能周长。有可能出现这一围栏宽为 $0$ 或高为 $0$ 的情况。

## 样例 #1

### 输入

```
7 5
0 5
10 5
5 0
5 10
6 7
8 6
8 4
1 2
2 3
3 4
5 6
7 6```

### 输出

```
10```

# AI分析结果

### 综合分析与结论

本题的核心问题是通过图的连通性（哞网）来找到每个连通块的最小包围矩形，并计算其周长。题解中主要使用了两种算法：**DFS** 和 **并查集**。DFS通过遍历图来找到连通块，并记录每个连通块的边界坐标；并查集则通过合并操作来维护连通块，并在合并时更新边界坐标。

#### 最优关键思路与技巧：
1. **并查集优化**：在并查集合并时，同时更新连通块的边界坐标（如最大/最小x、y值），这样可以避免后续的额外遍历，提升效率。
2. **DFS/BFS遍历**：通过DFS或BFS遍历图，找到连通块并记录其边界坐标，适合处理图的连通性问题。
3. **边界维护**：在遍历或合并时，实时更新连通块的边界坐标，确保最终计算的矩形是最小的。

#### 可拓展之处：
- 类似的问题可以扩展到三维空间，寻找最小包围立方体。
- 可以结合其他图算法（如最短路径、最小生成树）来解决更复杂的图问题。

### 所选高星题解

#### 1. 作者：Mkarry (4星)
- **关键亮点**：使用DFS遍历图，代码简洁且时间复杂度分析清晰，适合初学者理解图的遍历与连通块的处理。
- **个人心得**：作者特别解释了DFS的时间复杂度，避免了初学者对嵌套循环的误解。

```cpp
void DFS(int step){
    vis[step]=1;	//标记遍历过了 
    U=max(U,a[step].y),D=min(D,a[step].y);
    R=max(R,a[step].x),L=min(L,a[step].x);
    for(int j=lik[step];j;j=nxt[j]) if(!vis[son[j]]) DFS(son[j]);
}
```

#### 2. 作者：purinliang (4星)
- **关键亮点**：并查集合并时实时更新边界坐标，代码结构清晰，时间复杂度优化到位。
- **个人心得**：作者通过并查集的优化，减少了后续的遍历操作，提升了整体效率。

```cpp
bool union_set(int x,int y) {
    int fx=find_par(x);
    int fy=find_par(y);
    if(fx==fy) {
        return false;
    } else {
        par[fy]=fx;
        u[fx]=max(u[fx],u[fy]);
        d[fx]=min(d[fx],d[fy]);
        l[fx]=min(l[fx],l[fy]);
        r[fx]=max(r[fx],r[fy]);
        return true;
    }
}
```

#### 3. 作者：Zed_ (4星)
- **关键亮点**：使用DFS遍历图，并通过向量存储连通块，代码结构清晰，适合处理大规模数据。
- **个人心得**：作者通过向量存储连通块，方便后续的边界计算，代码可读性较高。

```cpp
void dfs(int u, int col) {
    co[u] = col;
    size[col]++;
    vec[col].push_back(u);
    vis[u] = true;
    for (int i = head[u]; i; i = edge[i].next) {
        int v = edge[i].to;
        if (vis[v]) continue;
        dfs(v, col);
    }
}
```

### 推荐相似题目
1. [P1196 [NOI2002] 银河英雄传说](https://www.luogu.com.cn/problem/P1196) - 并查集的应用。
2. [P3379 【模板】最近公共祖先（LCA）](https://www.luogu.com.cn/problem/P3379) - 图的遍历与连通性。
3. [P3367 【模板】并查集](https://www.luogu.com.cn/problem/P3367) - 并查集的基础应用。

---
处理用时：29.91秒
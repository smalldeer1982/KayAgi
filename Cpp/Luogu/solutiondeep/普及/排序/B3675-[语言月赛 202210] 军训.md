# 题目信息

# [语言月赛 202210] 军训

## 题目描述

某 E 刚结束军训，军训教官将所有同学排成了 $n$ 行 $m$ 列。

教官组织同学们进行分列式练习，同学们将按行为单位进行练习。第 $i$ 行第 $j$ 名同学摆臂的高度为 $a_{i,j}$，踢腿的高度为 $b_{i,j}$。

教官认为，每一行同学的不整齐度为摆臂高度方差与踢腿高度方差之和。形式化的，第 $i$ 行同学的不整齐度为 
$$
\dfrac{1}{m} \times \sum\limits_{j=1}^{m}{\Bigg(a_{i,j}-\dfrac{\sum\limits_{k=1}^{m}{a_{i,k}}}{m}\Bigg)^2} + \dfrac{1}{m} \times \sum\limits_{j=1}^{m}{\Bigg(b_{i,j}-\dfrac{\sum\limits_{k=1}^{m}{b_{i,k}}}{m}\Bigg)^2}
$$

其中，$\sum\limits_{j=1}^m{a_{i,j}}$ 代表 $a_{i,1}+a_{i,2}+a_{i,3}+\cdots+a_{i,m}$。

教官希望对若干行进行位置上的对调，使得最终排出的方阵中，从第 $1$ 行至第 $n$ 行不整齐度依次递增。若有两行不整齐度相同，可以任意安排其顺序。

请你编写程序，给出一种交换方案。请注意，每一步交换是即刻完成的。

例如，给出如下的交换方案：

第一步，交换第 $1$ 行和第 $2$ 行；第二步，交换第 $2$ 行和第 $3$ 行。

初始：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $1$ |
| $2$ | $2$ |
| $3$ | $3$ |

第一步完成后：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $2$ |
| $2$ | $1$ |
| $3$ | $3$ |

第二步完成后：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $2$ |
| $2$ | $3$ |
| $3$ | $1$ |

**提示：例如，将第 $1$ 行与第 $3$ 行交换后，原第 $1$ 行将被叫做第 $3$ 行，而不是仍被叫做第 $1$ 行。**

**具体解释可参照样例 #2 解释。**

## 说明/提示

### 样例 #2 解释

仅考虑摆臂高度，在前两次交换后，阵列变成如下的样子：

$\begin{matrix} 1: & 2 & 4 & 6 \\ 2: & 1 & 2 & 3 \\ 3: & 3 & 6 & 9 \end{matrix}$

此时，原第 $3$ 行现被叫做第 $2$ 行，原第 $2$ 行现被叫做第 $1$ 行。如果我们想要将它们交换，应该输出 `1 2` 而不是 `2 3`。

### 数据规模与约定

对于 $30\%$ 的数据，所有 $a_{i,j}$ 均相同，$b_{i,j}$ 均相同。  

对于另外 $20\%$ 的数据，满足 $n\le 100$，$m\le 100$。

对于 $100\%$ 的数据，$1 \le n,m \le 1000$，$1 \le a_{i,j},b_{i,j} \le 100$。

### Special Judge

本题答案不唯一，将有 Special Judge 对你的答案进行检查，所有合法答案均可以得分。

Problem Assigned by 览遍千秋 | 七海

## 样例 #1

### 输入

```
3 3
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1```

### 输出

```
3
1 2
1 3
2 3```

## 样例 #2

### 输入

```
3 3
3 6 9
2 4 6
1 2 3
1 1 1
1 1 1
1 1 1```

### 输出

```
3
1 2
2 3
1 2```

# AI分析结果

### 综合分析与结论
题解清晰地剖析了题目，明确指出本题考察数学知识（方差计算）和排序算法的应用。思路上，将解题过程拆解为读入数据、计算平均值、计算方差和、排序并记录操作、输出操作记录这几个步骤。算法要点在于掌握方差计算公式和排序算法（冒泡排序和选择排序）。解决的难点一是理解方差计算公式，二是设计合理的交换位置方案。整体质量较高，思路清晰，对算法的解释和注意事项的提醒都很到位。

### 所选题解
- 题解作者：zhangzhihao2，星级：4星。
  - 关键亮点：思路清晰，详细解释了方差计算公式和排序算法，提供了两种排序方案，并给出了注意事项。

### 重点代码及核心实现思想
以下是实现本题的核心步骤的伪代码思路：
```python
# 读入数据
n, m = read_input()
a = read_matrix(n, m)
b = read_matrix(n, m)

# 计算每行的方差和
num = []
for i in range(n):
    # 计算矩阵a第i行的平均值
    avg_a = sum(a[i]) / m
    # 计算矩阵a第i行的方差
    variance_a = sum((x - avg_a) ** 2 for x in a[i]) / m
    # 计算矩阵b第i行的平均值
    avg_b = sum(b[i]) / m
    # 计算矩阵b第i行的方差
    variance_b = sum((x - avg_b) ** 2 for x in b[i]) / m
    # 计算第i行的方差和
    num.append(variance_a + variance_b)

# 选择排序并记录操作
operations = []
for i in range(n - 1, 0, -1):
    max_index = 0
    for j in range(1, i + 1):
        if num[j] > num[max_index]:
            max_index = j
    if max_index!= i:
        # 交换num数组中元素的位置
        num[max_index], num[i] = num[i], num[max_index]
        # 交换a矩阵中对应行的位置
        a[max_index], a[i] = a[i], a[max_index]
        # 交换b矩阵中对应行的位置
        b[max_index], b[i] = b[i], b[max_index]
        operations.append((max_index + 1, i + 1))

# 输出操作记录
print(len(operations))
for op in operations:
    print(op[0], op[1])
```
核心实现思想：首先读入两个矩阵的数据，然后计算每行的方差和。接着使用选择排序对方差和数组进行排序，在排序过程中记录每次交换的操作。最后输出操作记录。

### 最优关键思路或技巧
- 对于方差计算，通过将公式逐步拆解，先求平均值再计算方差，使计算过程更清晰。
- 排序时使用选择排序，交换次数一定小于 $n$ ，比冒泡排序更优。

### 可拓展之处
同类型题或类似算法套路：
- 其他涉及矩阵数据处理和排序的题目，如矩阵元素的排序、矩阵的旋转等。
- 可以拓展到多维数组的排序和操作，例如三维数组的排序。

### 推荐洛谷题目
- P1177 【模板】快速排序
- P1059 明明的随机数
- P1271 【深基9.例1】选举学生会

---
处理用时：22.22秒
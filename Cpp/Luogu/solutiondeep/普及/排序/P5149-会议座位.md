# 题目信息

# 会议座位

## 题目背景

话说校长最近很喜欢召开全校教职工大会，让老师们强行听他装逼


## 题目描述

现在校长在校园网上公布了一份座位表，$n$ 位老师从左到右依次排成一行。老师们都对这个座位很满意。

然而到了开会时，校长不小心把座位表打乱了，老师们很不满。老师们并不在意自己的位置变了多少，但如果有一对老师 $a$ 和 $b$，他们原来的座位是 $a$ 在 $b$ 左边，现在变成了 $a$ 在 $b$ 右边，那么这一对老师便会贡献一单位不满值。

校长想知道这些老师的总不满值是多少。

## 说明/提示

对于 $30\%$ 的数据，$1\le n \le 10^3$。

对于 $100\%$ 的数据，$1\le n \le 10^5$，每位老师名字长度不超过 $5$，只有大小写字母并且互不相同。注意名字对大小写敏感。

## 样例 #1

### 输入

```
3
Stan Kyle Kenny
Kyle Stan Kenny```

### 输出

```
1```

## 样例 #2

### 输入

```
5
A B C D E
B A D E C```

### 输出

```
3```

# AI分析结果

### 综合分析与结论
本题核心是求逆序对数量，难点在于将字符串映射为数字。各题解主要采用两种思路：一是用字典树（Trie）或`map`将字符串映射为数字，二是使用归并排序或树状数组计算逆序对。部分题解还使用了分块、zkw线段树等方法。

### 高评分题解
1. **作者：ADay（5星）**
    - **关键亮点**：思路清晰，提供两种方法，分别用`map`和字符串排序处理字符串，代码可读性高。
    - **核心代码**：
```cpp
// 方法1：map + 归并排序
map<string,int>m;
for(int i=1;i<=n;i++) {
    cin>>s;
    m[s]=i;
}
for(int i=1;i<=n;i++) {
    cin>>s;
    a[m[s]]=i;
}
merge_sort(1,n);

// 方法2：字符串排序 + 归并排序
struct node {
    string s,a;
};
node s[N];
sort(s+1,s+n+1,cmp);
for(int i=1;i<=n;i++) a[i]=s[i].a;
merge_sort(1,n);
```
2. **作者：渺小的Mastar（4星）**
    - **关键亮点**：使用Trie树和树状数组结合的方法，较为新颖。
    - **核心代码**：
```cpp
void upd(string s,int x) {
    int p=0;
    for(int i=0;i<s.size();i++) {
        if(!trie[p][s[i]-'A'])
            trie[p][s[i]-'A']=++tot;
        p=trie[p][s[i]-'A'];
    }
    num[p]=x;
}
int get(string s) {
    int p=0;
    for(int i=0;i<s.size();i++)
        p=trie[p][s[i]-'A'];
    return num[p];
}
for(rgi i=1;i<=n;++i) {
    cin>>s;
    upd(s,i);
}
for(rgi i=1;i<=n;++i) {
    cin>>s;
    a[i]=get(s);
}
for(rgi i=1;i<=n;++i) {
    add(a[i],1);
    ans+=i-query(a[i]);
}
```
3. **作者：Hexarhy（4星）**
    - **关键亮点**：思路清晰，使用`unordered_map`提高效率，明确指出复杂度和注意事项。
    - **核心代码**：
```cpp
unordered_map <string,long long> m;
for(long long i=1;i<=n;i++) {
    string st;
    cin>>st;
    m[st]=++cnt;
}
for(long long i=1;i<=n;i++) {
    string st;
    cin>>st;
    a[i]=m[st];
}
merge(1,n);
```

### 最优关键思路与技巧
- **字符串映射**：使用`map`或`unordered_map`简单直接，Trie树在处理大量字符串时效率更高。
- **逆序对计算**：归并排序和树状数组是常用方法，归并排序代码易实现，树状数组在单点修改和区间查询上有优势。

### 拓展思路
同类型题可考察不同的数据结构和算法，如用线段树、分块等计算逆序对，或用哈希表处理字符串映射。

### 洛谷相似题目推荐
- [P1908 逆序对](https://www.luogu.com.cn/problem/P1908)：基础逆序对问题。
- [P4375 [USACO18OPEN]Out of Sorts G](https://www.luogu.com.cn/problem/P4375)：逆序对与排序结合。
- [P3374 【模板】树状数组 1](https://www.luogu.com.cn/problem/P3374)：树状数组基础应用。

### 个人心得摘录与总结
- **谢谢_对不起**：首次提交因没开`long long`得60分，提醒注意数据范围。
- **风人**：提交后WA了4个点，发现是没开`long long`，强调了数据类型的重要性。 

---
处理用时：28.25秒
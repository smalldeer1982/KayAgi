# 题目信息

# [传智杯 #4 决赛] 排排队

## 题目描述


cyq 在 tsyz 担任了体育老师，负责排队一事。

在 tsyz 中，每个人都有一个身高 $a_{i}$，并且只有**相邻**的两个人可以交换位置。cyq 带领的队伍有 $n$ 个人,他现在要给大家排队形。

给定一个长度为 $n$ 的序列 $b$，一个队形被认为美观，当且仅当对于所有的 $i = 1, 2, 3, \dots n$，$a_{i} =b_{i}$。cyq 想知道，他能否让大家的队形变得美观，并且交换相邻两个人的次数不超过 $n^2$ 次。这个问题把 $cyq$ 难住了，请你帮他来解决这个问题，如果存在合法的交换方案，输出 `YES`，并给出一组方案；否则，输出 `NO`。

## 说明/提示

### 数据规模与约定

对于全部的测试点，保证 $1\leq T \leq 10$，$1\leq n \leq 10^3$，$1\leq a_{i},b_{i}\leq 10^9$，且各个测试点 $n$ 之和不超过 $1000$，即 $\sum n\leq 10^3$。

### 提示
- 请注意大量的输出输出对程序效率造成的影响，不要频繁刷新缓冲区。例如，对于使用 `std::cout` 的 C++ 选手，请使用 `'\n'` 而不是 `std::endl` 来换行；对于 java 选手，请选择高效率的输出方式，如使用 PrintWriter；python 选手可以正常的使用 print 而无需考虑效率问题。
- 请按照输出格式的要求输出您的答案，如果格式不符合要求，返回的评测信息将可能是 TLE、RE、WA、UKE 等任何结果。

### C++ 语言的高效输出样例
```cpp
#include <iostream>
int main() {
  std::ios::sync_with_stdio(false);
  std::cin.tie(0);
  for (int i = 1; i <= 5; ++i) {
    std::cout << i << '\n'; // 注意这里不能使用 std::endl
  }
}
```

### Java 语言的高效输出样例
```java
import java.io.PrintWriter;

public class Main {
  public static void main(String[] args) {
    PrintWriter ot = new PrintWriter(System.out);
    for (int i = 1; i <= 5; ++i) {
      ot.println(i);
    }
    ot.flush(); // 请务必保证在程序结束时运行本条语句，否则在缓冲区的内容无法输出
  }
}

## 样例 #1

### 输入

```
3
4
1 2 2 3
3 2 2 1
3
1 2 3
1 2 4
1
1
1
```

### 输出

```
YES
4 3
2 3
1 2
3 2
3 4
0 0
NO
YES
0 0
```

# AI分析结果

### 综合分析与结论
这些题解的核心思路一致：先判断序列 $a$ 和 $b$ 排序后是否相同，不同则无解；若相同，通过类似选择排序或插入排序的方法，将 $a$ 调整为 $b$，每次找到 $b$ 中当前位置元素在 $a$ 中的位置，再通过相邻交换移动到目标位置。交换次数不超过 $n^2$ 次。

### 所选题解
- **作者：一扶苏一（5星）**
    - **关键亮点**：思路清晰，详细分析复杂度，提供多种语言代码，代码可读性高。
    - **核心代码**：
```cpp
for (int i = 1; i <= n; ++i) if (a[i]!= b[i]) {
    for (int j = i; j <= n; ++j) if (a[j] == b[i]) {
        for (int k = j; k > i; --k) {
            std::swap(a[k], a[k - 1]);
            std::cout << k << ' ' << k - 1 << '\n';
        }
        break;
    }
}
```
核心思想：从前往后遍历 $b$ 数组，若 $a$ 中当前位置元素与 $b$ 不同，在 $a$ 后续位置找到与 $b$ 当前位置相同的元素，通过相邻交换将其移到目标位置。

- **作者：沉石鱼惊旋（4星）**
    - **关键亮点**：从冒泡排序角度分析交换次数，思路明确，代码结构清晰。
    - **核心代码**：
```cpp
for(int i=1;i<=n;i++)
{
    int x;
    for(int j=1;j<=n;j++)
    {
        if(a[j]==b[i])
        {
            x=j;
            break;
        }
    }
    for(int j=x;j>i;j--)
    {
        swap(a[j],a[j-1]);
        cout<<j<<" "<<j-1<<'\n';
    }
}
```
核心思想：遍历 $b$ 数组，找到 $b$ 中元素在 $a$ 中的位置，将该元素通过相邻交换移到目标位置。

- **作者：Eason2009（4星）**
    - **关键亮点**：明确指出考查知识点，代码注释详细，逻辑清晰。
    - **核心代码**：
```cpp
for(int i=1;i<=n;i++)
{
    int num;
    for(int j=i;j<=n;j++)
    {
        if(b[i]==a[j])
        {
            num=j;
            break;
        }
    }
    for(int j=num;j>i;j--)
    {
        cout<<j<<' '<<j-1<<'\n';
        swap(a[j],a[j-1]);
    }
}
```
核心思想：与上述题解类似，遍历 $b$ 数组，找到对应元素在 $a$ 中的位置，通过相邻交换移动到目标位置。

### 最优关键思路或技巧
- **预处理判断无解**：对 $a$ 和 $b$ 排序后比较，快速判断是否无解。
- **类似选择排序**：从前往后确定每个位置的元素，在后续位置找到目标元素并交换到当前位置。

### 拓展思路
同类型题可考虑不同交换规则，如交换不相邻元素、有交换次数限制等。类似算法套路可用于排列调整、数组变换等问题。

### 推荐题目
- [P1116 车厢重组](https://www.luogu.com.cn/problem/P1116)
- [P1226 快速幂取余运算](https://www.luogu.com.cn/problem/P1226)（部分思想类似，涉及元素调整）
- [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)（可类比元素位置调整问题）

### 个人心得
题解中未包含个人心得相关内容。 

---
处理用时：24.16秒
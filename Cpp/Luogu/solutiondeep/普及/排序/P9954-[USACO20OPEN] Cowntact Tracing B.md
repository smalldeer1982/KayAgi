# 题目信息

# [USACO20OPEN] Cowntact Tracing B

## 题目描述

由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们（编号为 $1\ldots N$）的健康。

最近，Farmer John 对他的所有奶牛进行了检测，发现有一部分奶牛对该疾病的检测结果呈阳性。利用牛棚内的视频监控，他得以查看最近的奶牛之间的互动行为，结果发现奶牛们互相打招呼时，她们会握蹄，不幸的是这是一种会将疾病从一头奶牛传播给另一头奶牛的行为。Farmer John 汇总了一个添加了时间戳的清单，每条数据的形式为 $(t,x,y)$，表示在时间 $t$，奶牛 $x$ 与奶牛 $y$ 握了蹄。Farmer John 同时还知道以下信息：

（一）他的农场上恰有一头奶牛最初带有携带疾病（我们将这头奶牛称为“零号病人”）。

（二）一旦一头奶牛被感染，她会在接下来的 $K$ 次握蹄中传染疾病（可能会与同一头奶牛握蹄多次）。握蹄 $K$ 次后，她不再在此后的握蹄中传染疾病（因为此时她意识到了她会传染疾病，于是会仔细地洗蹄）。

（三）一旦一头奶牛被感染，她会持续处于被感染状态。

不幸的是，Farmer John 不知道他的 $N$ 头奶牛中的哪一头是零号病人，也不知道 $K$ 的值！基于他的数据，请帮助他缩小这些未知量的范围。保证至少有一种可能的情况。 

## 说明/提示

### 样例解释 1

唯一可能是零号病人的是奶牛 $1$。对于所有的 $K>0$，奶牛 $1$ 在时刻 $7$ 感染奶牛 $2$，而奶牛 $3$ 和奶牛 $4$ 均不会被感染。 

## 样例 #1

### 输入

```
4 3
1100
7 1 2
5 2 3
6 2 4```

### 输出

```
1 1 Infinity```

# AI分析结果

### 综合分析与结论
这些题解思路基本一致，都是基于数据范围小的特点，采用暴力枚举的方法。具体是枚举零号病人和 $K$ 的值，再模拟感染过程，最后检查感染结果是否与输入一致。
- **思路要点**：枚举零号病人和 $K$，模拟感染，检查结果。
- **算法难点**：准确模拟感染过程，包括感染次数的更新和判断；处理 $K$ 取值范围和边界情况。
- **复杂度**：时间复杂度大多为 $O(NT^2)$ 或 $O(NT(N + T))$。

### 所选题解
- **作者：mengleo（5星）**
    - **关键亮点**：思路清晰，代码注释详细，复杂度分析明确。
    - **核心代码**：
```cpp
for(int z = 1; z <= n; z++)
{
    bool f = 0;
    for(int k = 0; k <= t + 1; k++)
    {
        bool f2 = 1;
        int cs[n + 5] = {};
        memset(cs, -1, sizeof(cs));
        cs[z] = k;
        for(int i = 1; i <= t; i++)
        {
            if(cs[lst[i].x] == -1 && cs[lst[i].y] > 0)
            {
                cs[lst[i].y]--;
                cs[lst[i].x] = k;
            }
            else if(cs[lst[i].y] == -1 && cs[lst[i].x] > 0)
            {
                cs[lst[i].x]--;
                cs[lst[i].y] = k;
            }
            else if(cs[lst[i].x] >= 0 && cs[lst[i].y] >= 0)
            {
                cs[lst[i].x] = max(0ll, cs[lst[i].x] - 1);
                cs[lst[i].y] = max(0ll, cs[lst[i].y] - 1);
            }
        }
        for(int i = 1; i <= n; i++)
        {
            if((s[i - 1] == '1' && cs[i] == -1) || (s[i - 1] == '0' && cs[i]!= -1))
            {
                f2 = 0;
            }
        }
        if(f2)
        {
            mx = max(mx, k);
            mn = min(mn, k);
            f = 1;
        }
    }
    cnt += f;
}
```
**核心思想**：通过两层循环枚举零号病人和 $K$ 的值，每次模拟感染过程，最后检查感染结果是否与输入一致，更新 $K$ 的上下限和可能的零号病人数量。

### 最优关键思路与技巧
- **暴力枚举**：利用数据范围小的特点，枚举所有可能的零号病人和 $K$ 的值。
- **模拟感染过程**：使用数组记录每头奶牛的感染状态和可传染次数，按照时间顺序模拟握蹄和感染过程。

### 拓展思路
同类型题可能涉及更多的状态转移和条件判断，如不同的传播规则、多种疾病等。类似算法套路是枚举所有可能的初始状态，再模拟过程，最后检查结果。

### 推荐题目
- [P1002 过河卒](https://www.luogu.com.cn/problem/P1002)：枚举路径，模拟棋子移动。
- [P1219 八皇后](https://www.luogu.com.cn/problem/P1219)：枚举皇后的位置，检查合法性。
- [P1433 吃奶酪](https://www.luogu.com.cn/problem/P1433)：枚举所有可能的路线，计算最短路径。

### 个人心得
内拉组里提到“这题一开始想复杂了，其实直接枚举デス～”，总结为遇到数据范围小的题目，不要想得过于复杂，可优先考虑暴力枚举的方法。 

---
处理用时：22.47秒
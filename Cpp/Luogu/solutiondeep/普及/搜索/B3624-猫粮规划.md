# 题目信息

# 猫粮规划

## 题目描述

到中午了，机器猫要吃猫粮了。

机器猫掏出 $n$ 份食物，第 $i$ 份食物含有的能量为 $w[i]$。机器猫可以吃掉其中一些食物，获得这些食物的能量之和。

机器猫又不想变得太胖又不想变得太瘦，所以指定了一个目标区间 $[l, r]$。显然，可能有很多种选择食物的方式可以达成这个目标，因此机器猫想知道方案总数。



## 说明/提示

#### 样例解释

所有方案如下：

选择食物 1, 2, 4，能量 10+10+50 = 70  
选择食物 1, 3, 4，能量 10+20+50 = 80  
选择食物 2, 3, 4，能量 10+20+50 = 80  
选择食物 3, 4，能量 50+20 = 70

共 4 种方案。

#### 数据规模与约定

对于 $50\%$ 的数据，满足 $n\leq 20$。

对于 $100\%$ 的数据，满足 $n\leq 40, 20\leq w[i] \leq 100, l\leq r \leq 300$。

提示：$w[i]$ 在范围内均匀随机生成。


## 样例 #1

### 输入

```
4 70 85
10 10 20 50
```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效地计算从给定数组中选取若干元素，使其和在指定区间内的方案数。由于数据规模较大（$n \leq 40$），直接枚举所有子集的复杂度为 $O(2^n)$，无法通过。因此，优化思路主要集中在剪枝和动态规划（DP）上。

- **剪枝**：通过提前判断当前和是否超出目标区间，减少不必要的枚举，从而降低时间复杂度。
- **动态规划**：利用DP的状态转移方程，记录不同和对应的方案数，最终统计满足条件的方案数。

### 所选高星题解

#### 题解1：Usada_Pekora (5星)
- **关键亮点**：
  - 提出了剪枝和DP两种优化方法，思路清晰。
  - 详细解释了DP的状态转移方程，并建议使用滚动数组优化空间复杂度。
  - 代码实现简洁，逻辑严密。
- **个人心得**：
  - 强调了从大到小排序后进行搜索的剪枝策略，有效减少了搜索空间。
  - 提到DP的滚动数组优化，避免了重复计算，提升了效率。

```cpp
int dp[301] = {1}; // 初始化dp[0] = 1
for (int i = 0; i < n; ++i) {
    for (int j = r; j >= w[i]; --j) {
        dp[j] += dp[j - w[i]];
    }
}
int ans = 0;
for (int j = l; j <= r; ++j) {
    ans += dp[j];
}
```

#### 题解2：ShanCreeperPro (4星)
- **关键亮点**：
  - 详细描述了DFS剪枝的实现方法，适合初学者理解。
  - 通过提前判断和是否超出区间，减少了不必要的递归调用。
  - 提供了DFS的伪代码，便于理解。
- **个人心得**：
  - 强调了剪枝在DFS中的重要性，并给出了具体的实现思路。

```cpp
void dfs(int idx, int sum) {
    if (sum > r) return; // 剪枝
    if (idx == n) {
        if (sum >= l) ans++;
        return;
    }
    dfs(idx + 1, sum); // 不选当前元素
    dfs(idx + 1, sum + w[idx]); // 选当前元素
}
```

### 最优关键思路与技巧

- **动态规划**：利用DP的状态转移方程，记录不同和对应的方案数，最终统计满足条件的方案数。使用滚动数组优化空间复杂度。
- **剪枝**：在DFS或枚举过程中，提前判断当前和是否超出目标区间，减少不必要的计算。

### 拓展思路

- **同类型题**：类似的问题包括背包问题、子集和问题等，都可以通过剪枝或DP进行优化。
- **算法套路**：对于需要枚举子集的问题，剪枝和DP是常见的优化手段。

### 推荐题目

1. **P1048 采药** - 经典背包问题，考察DP的应用。
2. **P1064 金明的预算方案** - 类似子集和问题，考察剪枝和DP。
3. **P1164 小A点菜** - 考察子集和问题的变种，适合练习剪枝和DP。

### 总结

通过剪枝和动态规划，可以有效地解决本题。动态规划在时间和空间复杂度上表现更优，适合大规模数据处理；而剪枝则适合在DFS中减少不必要的计算。

---
处理用时：29.52秒
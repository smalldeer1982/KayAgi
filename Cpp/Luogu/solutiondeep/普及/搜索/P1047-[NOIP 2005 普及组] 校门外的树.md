# 题目信息

# [NOIP 2005 普及组] 校门外的树

## 题目描述

某校大门外长度为 $l$ 的马路上有一排树，每两棵相邻的树之间的间隔都是 $1$ 米。我们可以把马路看成一个数轴，马路的一端在数轴 $0$ 的位置，另一端在 $l$ 的位置；数轴上的每个整数点，即 $0,1,2,\dots,l$，都种有一棵树。


由于马路上有一些区域要用来建地铁。这些区域用它们在数轴上的起始点和终止点表示。已知任一区域的起始点和终止点的坐标都是整数，区域之间可能有重合的部分。现在要把这些区域中的树（包括区域端点处的两棵树）移走。你的任务是计算将这些树都移走后，马路上还有多少棵树。



## 说明/提示

**【数据范围】**

- 对于 $20\%$ 的数据，保证区域之间没有重合的部分。
- 对于 $100\%$ 的数据，保证 $1 \leq l \leq 10^4$，$1 \leq m \leq 100$，$0 \leq u \leq v \leq l$。

**【题目来源】**

NOIP 2005 普及组第二题

## 样例 #1

### 输入

```
500 3
150 300
100 200
470 471
```

### 输出

```
298```

# AI分析结果

### 综合分析与结论

本题的题解主要集中在暴力模拟、差分、线段树等几种思路。暴力模拟是最直观的解法，适合初学者理解问题，但在数据量较大时效率较低。差分和线段树则是更高效的算法，适合处理大规模数据。大部分题解采用了暴力模拟的方法，代码简洁易懂，但缺乏优化。少数题解尝试了差分和线段树，虽然思路清晰，但代码复杂度较高，适合有一定基础的学习者。

### 精选题解

#### 1. 作者：ChargeDonkey (赞：1182)
- **星级**：★★★★☆
- **关键亮点**：思路清晰，代码简洁，适合初学者理解。通过三遍循环分别标记、更新和计数，逻辑清晰。
- **核心代码**：
  ```cpp
  for(int i=0;i<=L;i++) {
      if(vis[i]==0) cnt++;
  }
  ```
  **实现思想**：通过数组标记被移走的树，最后遍历数组统计未被标记的树的数量。

#### 2. 作者：ziyisama (赞：8)
- **星级**：★★★★☆
- **关键亮点**：提出了差分和区间合并的思路，虽然代码复杂度较高，但提供了优化方向。
- **核心代码**：
  ```cpp
  for(int i = 2; i <= n; i++) {
      int l = p[i].first, r = p[i].second;
      if (l <= mr) {
          mr = max(mr, r);
      } else if (l > mr) {
          cnt += (mr + 1 - ml);
          ml = l, mr = r;
      }
  }
  ```
  **实现思想**：通过区间合并减少重复计算，优化了暴力模拟的效率。

#### 3. 作者：蟋蟀喵～～ (赞：7)
- **星级**：★★★★☆
- **关键亮点**：使用差分算法，复杂度为O(L)，适合处理大规模数据。
- **核心代码**：
  ```cpp
  for(int i = 0; i <= l; i++) {
      s[i] += s[i - 1];
      if(!s[i]) ans++;
  }
  ```
  **实现思想**：通过差分数组记录每个区间的变化，最后通过前缀和还原并统计未被移走的树的数量。

### 最优关键思路与技巧

1. **差分算法**：通过差分数组记录区间变化，最后通过前缀和还原，适合处理大规模数据。
2. **区间合并**：在处理多个区间时，通过合并重叠区间减少重复计算，优化暴力模拟的效率。
3. **线段树**：虽然代码复杂度较高，但适合处理动态区间更新和查询问题。

### 可拓展之处

- **差分算法**：可以应用于其他需要处理区间更新的问题，如区间加、区间减等。
- **线段树**：适合处理动态区间查询和更新问题，如区间最值、区间和等。

### 推荐题目

1. **P3372 【模板】线段树 1** - 考察线段树的基本操作。
2. **P3368 【模板】树状数组 1** - 考察树状数组的基本操作。
3. **P1047 【NOIP2005 普及组】校门外的树** - 本题的变种，考察区间更新和查询。

### 个人心得总结

- **调试经历**：部分题解在实现差分和线段树时，遇到了数组越界和初始化问题，通过调试解决了这些问题。
- **踩坑教训**：在处理区间合并时，容易忽略区间重叠的情况，导致计算结果错误。
- **顿悟感想**：通过差分和线段树的学习，理解了如何高效处理区间更新和查询问题，提升了对算法的理解。

---
处理用时：29.67秒
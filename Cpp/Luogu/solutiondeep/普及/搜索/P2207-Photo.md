# 题目信息

# Photo

## 题目描述

Farmer John 打算给他的 $n$ 头奶牛照相。

他们排成一条线，并且依次取 $1\sim n$ 作为编号。

每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。

对于每一头奶牛，FJ 都想要让 Ta 至少出现在一张照片里。

不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。

已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。

## 说明/提示

#### 样例输入输出 1 解释

FJ 可以只拍三张照片：$[1,2]$，$[3,5]$，$[6,7]$。

---

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $2\le n\le10^9$，$1\le k\le1000$，$1 \leq a_i, b_i \leq n$。

## 样例 #1

### 输入

```
7 3
1 3
2 4
5 6
```

### 输出

```
3```

# AI分析结果

### 综合分析与结论

本题的核心问题是如何在满足所有“关系不好”的奶牛对不共处同一照片的前提下，最小化照片数量。多个题解均采用了**区间取点问题**的贪心策略，通过排序和区间合并来解决问题。以下是各题解的要点对比：

1. **哔哩哔哩**和**Mychael**的题解思路相似，都是通过排序区间并贪心地选择断点来减少照片数量。两者的代码实现也较为简洁，时间复杂度为O(K log K)，适合处理较大的n和较小的k。
2. **呆瓜yy**的题解思路较为直接，通过枚举每张照片的起点并在k个限制中寻找断点，时间复杂度为O(K^2)，虽然思路清晰，但效率较低。
3. **嘒彼小星**的题解思路与哔哩哔哩和Mychael类似，但代码实现中有一个小错误（`ans + 2`），导致结果不准确。
4. **周楷然**和**Snow_Dreams**的题解思路与前面类似，但代码实现较为复杂，尤其是周楷然的Pascal代码，可读性较差。

### 所选高星题解

#### 1. 哔哩哔哩 (4星)
- **关键亮点**：思路清晰，代码简洁，时间复杂度低。
- **核心代码**：
  ```cpp
  sort(interval, interval+K);
  int cnt = 1, last = -1;
  for(int i = 0; i < K; i++) {
      if(interval[i].l >= last) {
          cnt++;
          last = interval[i].r;
      } else if(interval[i].r < last) last = interval[i].r;
  }
  printf("%d", cnt);
  ```
- **核心思想**：按区间左端点排序，贪心地选择断点，确保每对关系不好的奶牛不共处同一照片。

#### 2. Mychael (4星)
- **关键亮点**：思路清晰，代码简洁，时间复杂度低。
- **核心代码**：
  ```cpp
  sort(interval, interval+K);
  int cnt = 1, last = -1;
  for(int i = 0; i < K; i++) {
      if(interval[i].l >= last) {
          cnt++;
          last = interval[i].r;
      } else if(interval[i].r < last) last = interval[i].r;
  }
  cout << cnt << endl;
  ```
- **核心思想**：与哔哩哔哩的题解相同，通过排序和贪心策略选择断点。

### 最优关键思路与技巧

1. **区间排序**：将所有“关系不好”的奶牛对按左端点排序，便于后续处理。
2. **贪心选择断点**：在排序后的区间中，贪心地选择断点，确保每对关系不好的奶牛不共处同一照片。
3. **时间复杂度优化**：通过排序和一次遍历，将时间复杂度优化到O(K log K)，适合处理较大的n和较小的k。

### 可拓展之处

1. **同类型题**：类似的问题包括区间覆盖、区间选点等，都可以通过排序和贪心策略解决。
2. **类似算法套路**：在处理区间问题时，排序和贪心策略是常见的解题思路，可以举一反三。

### 推荐洛谷题目

1. **P1803 线段覆盖**：考察区间覆盖问题，与本题思路相似。
2. **P1223 排队接水**：考察贪心策略，与本题的贪心思路类似。
3. **P1090 合并果子**：考察贪心策略，与本题的贪心思路类似。

### 个人心得摘录

- **哔哩哔哩**：提到“个人感觉这个USACO的题和种树相似”，表明通过类比其他题目来理解本题的思路。
- **呆瓜yy**：提到“科学猜题法”，表明通过观察题目特点来猜测解题思路。
- **嘒彼小星**：提到“扫一遍就行了”，表明对问题的简化处理思路。

### 通用建议与扩展思路

- **通用建议**：在处理区间问题时，优先考虑排序和贪心策略，可以有效降低时间复杂度。
- **扩展思路**：对于更复杂的区间问题，可以考虑使用线段树、树状数组等数据结构来优化处理。

---
处理用时：40.17秒
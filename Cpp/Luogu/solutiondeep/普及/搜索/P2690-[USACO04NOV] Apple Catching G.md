# 题目信息

# [USACO04NOV] Apple Catching G

## 题目描述

很少有人知道奶牛爱吃苹果。农夫约翰的农场上有两棵苹果树（编号为 $1$ 和 $2$ ）， 每一棵树上都长满了苹果。奶牛贝茜无法摘下树上的苹果，所以她只能等待苹果 从树上落下。但是，由于苹果掉到地上会摔烂，贝茜必须在半空中接住苹果（没有人爱吃摔烂的苹果）。贝茜吃东西很快，她接到苹果后仅用几秒钟就能吃完。每一分钟，两棵苹果树其中的一棵会掉落一个苹果。贝茜已经过了足够的训练， 只要站在树下就一定能接住这棵树上掉落的苹果。同时，贝茜能够在两棵树之间 快速移动（移动时间远少于 $1$ 分钟），因此当苹果掉落时，她必定站在两棵树其中的一棵下面。此外，奶牛不愿意不停地往返于两棵树之间，因此会错过一些苹果。苹果每分钟掉落一个，共 $T$（$1 \le T \le 1000$）分钟，贝茜最多愿意移动 $W$（$1 \le W \le 30$） 次。现给出每分钟掉落苹果的树的编号，要求判定贝茜能够接住的最多苹果数。 开始时贝茜在 1 号树下。

## 样例 #1

### 输入

```
7 2
2
1
1
2
2
1
1
```

### 输出

```
6
```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）或记忆化搜索来解决奶牛接苹果的问题。大多数题解采用了DP的思路，部分题解使用了记忆化搜索。DP的思路主要是通过状态转移方程来记录在不同时间和移动次数下能接到的最大苹果数。记忆化搜索则通过递归和缓存来避免重复计算。

### 所选高质量题解

#### 1. **作者：ztzshiwo001219 (5星)**
- **关键亮点**：思路清晰，代码简洁，状态转移方程明确，且提供了边读入边计算的优化建议。
- **核心实现思想**：使用二维数组`dp[i][j]`表示第i分钟内移动j次能接到的最大苹果数，通过枚举移动次数和苹果掉落位置来更新状态。
```cpp
for(int i=1;i<=T;i++)
    for(int j=0;j<=T&&j<=w;j++)
    {
        if(j==0) dp[i][j]=dp[i-1][j];
        else dp[i][j]=max(dp[i-1][j],dp[i-1][j-1]);
        if(a[i]==j%2+1) dp[i][j]++;
    }
```

#### 2. **作者：ksydom (4星)**
- **关键亮点**：详细分析了状态转移方程的推导过程，提供了多种情况的讨论，并最终通过遍历所有移动步数找到最大值。
- **核心实现思想**：使用三维数组`f[i][j][k]`表示第i分钟内移动j次且位于k号树下能接到的最大苹果数，通过条件判断来更新状态。
```cpp
if(a[i]==1)
{
    if(j%2==0) f[i][j][1]=max(f[i-1][j-1][2],f[i-1][j][1])+1;
    else f[i][j][2]=max(f[i-1][j][2],f[i-1][j-1][1]);
}
```

#### 3. **作者：1saunoya (4星)**
- **关键亮点**：提供了滚动数组优化的思路，减少了内存使用，且代码结构清晰。
- **核心实现思想**：通过`i&1`操作来滚动数组，优化了空间复杂度。
```cpp
for(register int i=1;i<=T;i++){
    for(register int j=0;j<=T and j<=w;j++){
        if(!j) dp[i&1][j]=dp[(i-1)&1][j];
        else dp[i&1][j]=max(dp[(i-1)&1][j],dp[(i-1)&1][j-1]);
        if(a[i]==j%2+1) dp[i&1][j]++;
    }
}
```

### 最优关键思路与技巧
1. **状态转移方程**：通过`dp[i][j] = max(dp[i-1][j], dp[i-1][j-1]) + (a[i] == j%2+1)`来更新状态，简洁高效。
2. **滚动数组优化**：使用`i&1`来减少内存使用，适用于空间复杂度较高的场景。
3. **记忆化搜索**：通过递归和缓存来避免重复计算，适合状态转移较为复杂的情况。

### 可拓展之处
- **同类型题**：类似的状态转移问题，如背包问题、路径规划问题等。
- **类似算法套路**：动态规划中的状态压缩、记忆化搜索等。

### 推荐题目
1. **P1048 采药**：经典的背包问题，考察动态规划。
2. **P1216 数字三角形**：动态规划中的路径规划问题。
3. **P1091 合唱队形**：动态规划中的状态转移问题。

### 个人心得总结
- **调试经历**：部分题解提到在状态转移方程中忽略了初始位置，导致WA，提醒我们在设计状态转移时要考虑所有边界条件。
- **顿悟感想**：通过滚动数组优化，不仅减少了内存使用，还提高了代码的可读性和效率。

---
处理用时：36.48秒
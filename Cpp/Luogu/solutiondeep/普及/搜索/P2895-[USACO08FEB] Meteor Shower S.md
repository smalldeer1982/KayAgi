# 题目信息

# [USACO08FEB] Meteor Shower S

## 题目描述

贝茜听说一场特别的流星雨即将到来：这些流星会撞向地球，并摧毁它们所撞击的任何东西。她为自己的安全感到焦虑，发誓要找到一个安全的地方（一个永远不会被流星摧毁的地方）。

如果将牧场放入一个直角坐标系中，贝茜现在的位置是原点，并且，贝茜不能踏上一块被流星砸过的土地。

根据预报，一共有 $M$ 颗流星 $(1\leq M\leq 50,000)$ 会坠落在农场上，其中第 $i$ 颗流星会在时刻 $T_i$（$0 \leq T _ i \leq 1000$）砸在坐标为 $(X_i,Y_i)(0\leq X_i\leq 300$，$0\leq Y_i\leq 300)$ 的格子里。流星的力量会将它所在的格子，以及周围 $4$ 个相邻的格子都化为焦土，当然贝茜也无法再在这些格子上行走。

贝茜在时刻 $0$ 开始行动，她只能在会在横纵坐标 $X,Y\ge 0$ 的区域中，平行于坐标轴行动，每 $1$ 个时刻中，她能移动到相邻的（一般是 $4$ 个）格子中的任意一个，当然目标格子要没有被烧焦才行。如果一个格子在时刻 $t$ 被流星撞击或烧焦，那么贝茜只能在 $t$ 之前的时刻在这个格子里出现。 贝茜一开始在 $(0,0)$。

请你计算一下，贝茜最少需要多少时间才能到达一个安全的格子。如果不可能到达输出 $−1$。

## 样例 #1

### 输入

```
4
0 0 2
2 1 2
1 1 2
0 3 5
```

### 输出

```
5
```

# AI分析结果

### 综合分析与结论

本题的核心是通过广度优先搜索（BFS）找到从原点（0,0）到安全区域的最短路径，安全区域是指永远不会被流星击中的区域。难点在于如何处理流星的坠落时间及其影响范围，以及如何在搜索过程中避免被流星击中。大多数题解都采用了BFS，但在处理流星坠落时间和搜索优化上有不同的实现方式。

### 所选高星题解

#### 1. **翼德天尊 (5星)**
- **关键亮点**：
  - 使用二维数组记录每个点的最早被流星击中的时间，确保在BFS时能够及时判断是否安全。
  - 通过队列实现BFS，代码结构清晰，注释详细，易于理解。
  - 处理了坐标超出300的情况，避免了边界问题。
- **个人心得**：
  - 强调了流星的坠落时间以最早为准，提醒了容易被忽略的细节。
  - 代码中通过`ch`函数处理了未记录流星时间的点，确保搜索的准确性。

```cpp
int ch(int a){
	if (a==-1) return 99999;
	else return a;
}
```

#### 2. **dz_ice (4.5星)**
- **关键亮点**：
  - 使用结构体存储坐标和时间，代码结构清晰。
  - 在处理流星坠落时间时，强调了取最小值的重要性，避免了重复赋值。
  - 通过`time1`数组记录每个点的最早被击中时间，确保BFS的正确性。
- **个人心得**：
  - 强调了BFS中时间的处理，提醒了在搜索时需要注意的细节。

```cpp
if(t<time1[x][y]||time1[x][y]==-1) //这颗流星到达的时间必须小于前面流星或焦土到达的时间，或者还暂时没有流星及焦土 
    time1[x][y]=t;
```

#### 3. **houzhiyuan (4星)**
- **关键亮点**：
  - 使用`map`数组记录每个点的最早被击中时间，确保BFS时能够正确判断是否安全。
  - 通过`visk`数组记录是否访问过，避免了重复访问。
  - 代码结构清晰，注释详细，易于理解。
- **个人心得**：
  - 强调了BFS中时间的处理，提醒了在搜索时需要注意的细节。

```cpp
if(vis[maxt][xx][yy]==false){
    flag = true;
    ans = t.step;
    return;
}
```

### 最优关键思路与技巧

1. **预处理流星坠落时间**：通过二维数组记录每个点的最早被击中时间，确保在BFS时能够及时判断是否安全。
2. **BFS优化**：使用队列实现BFS，确保每次搜索的都是最短路径。同时，通过记录访问过的点，避免重复搜索。
3. **边界处理**：处理坐标超出300的情况，确保搜索的全面性。

### 可拓展之处

- **类似算法套路**：类似的问题可以通过BFS或DFS解决，关键在于如何预处理和优化搜索过程。
- **同类型题目**：可以尝试解决其他需要预处理和搜索的题目，如迷宫问题、最短路径问题等。

### 推荐题目

1. **P1332 血色先锋队**：考察BFS的应用，类似于本题的搜索问题。
2. **P3395 路障**：考察BFS的应用，类似于本题的搜索问题。
3. **P1443 马的遍历**：考察BFS的应用，类似于本题的搜索问题。

### 个人心得总结

- **调试经历**：在处理流星坠落时间时，需要注意取最小值，避免重复赋值。
- **踩坑教训**：在处理边界时，需要注意坐标超出300的情况，避免边界问题。
- **顿悟感想**：通过预处理和优化搜索过程，可以大大提高算法的效率和准确性。

---
处理用时：38.21秒
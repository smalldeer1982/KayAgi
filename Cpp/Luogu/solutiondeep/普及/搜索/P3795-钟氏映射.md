# 题目信息

# 钟氏映射

## 题目背景

2233年，CSSYZ学校的数学老师兼数学竞赛顾问钟JG已经2200+岁啦！

为了庆生，他或她给广大人民群众出了道题。


## 题目描述

设集合$N=M=\left\{x|x\in N_+,x\leq k,k\in N_+\right\}$

设$f$为$N$到$M$的映射。

求满足：

$f[f(x)]=x$的不同的映射$f$的个数，由于答案较大，输出答案对$14233333$取余的数即可。


## 说明/提示

四个映射分别为：


|f(1)|f(2)|f(3)|
|-|-|-|
|1|2|3|
|1|3|2|
|2|1|3|
|3|2|1|

数据范围：

对于20%的数据，$1\leq k\leq 9$

对于其它的80%的数据，$1\leq k\leq 10^7$


内存20MB...（一开始开1MB把自己坑了）


## 样例 #1

### 输入

```
3
```

### 输出

```
4
```

# AI分析结果

### 综合分析与结论

本题的核心在于求解满足 $f[f(x)] = x$ 的映射 $f$ 的个数。通过分析，可以发现这类映射的本质是“自映射”或“两两配对”，因此可以通过递推公式 $g(i) = g(i-1) + g(i-2) \times (i-1)$ 来计算符合条件的映射个数。由于数据范围较大（$k \leq 10^7$），需要使用滚动数组优化空间，并注意取模操作。

### 所选高星题解

#### 1. 作者：XZYQvQ (★★★★★)
**关键亮点**：
- 清晰的递推公式推导，解释了映射的两种可能情况（自映射和两两配对）。
- 提醒使用滚动数组优化空间，并强调了取模操作的必要性。
- 代码简洁，逻辑清晰，适合初学者理解。

**核心代码**：
```cpp
ll a=2,b=1,now,n;
for(ll i=3;i<=n;++i){
    now=b*(i-1)+a;
    now%=mod;
    b=a;
    a=now;
}
printf("%lld",a);
```
**实现思想**：通过滚动数组 `a` 和 `b` 来存储前两个状态，递推计算当前状态 `now`，并更新滚动数组。

#### 2. 作者：IcyFoxer_XZY (★★★★☆)
**关键亮点**：
- 提供了递推公式的详细解释，并强调了开 `long long` 的必要性。
- 代码中加入了特判，处理了 $n=1$ 和 $n=2$ 的情况，增强了代码的鲁棒性。
- 代码风格良好，注释清晰，适合进阶学习者。

**核心代码**：
```cpp
ll las1=2,las2=1,now,mod=14233333;
for(int i=3;i<=n;i++){
    now=(long long)las2*(i-1)+las1;
    now%=mod;
    las2=las1;
    las1=now;
}
printf("%lld",las1);
```
**实现思想**：使用 `las1` 和 `las2` 存储前两个状态，递推计算当前状态 `now`，并更新滚动数组。

#### 3. 作者：litble (★★★★☆)
**关键亮点**：
- 提供了递推公式的详细解释，并强调了滚动数组的优化。
- 代码简洁，逻辑清晰，适合初学者理解。
- 提醒了特判 $n=1$ 和 $n=2$ 的情况，增强了代码的鲁棒性。

**核心代码**：
```cpp
long long las1=2,las2=1,now,mod=14233333;
for(int i=3;i<=n;i++){
    now=(long long)las2*(i-1)+las1;
    now%=mod;
    las2=las1;
    las1=now;
}
printf("%lld",las1);
```
**实现思想**：使用 `las1` 和 `las2` 存储前两个状态，递推计算当前状态 `now`，并更新滚动数组。

### 最优关键思路与技巧
- **递推公式**：$g(i) = g(i-1) + g(i-2) \times (i-1)$，通过分析映射的两种可能情况（自映射和两两配对）得出。
- **滚动数组优化**：由于数据范围较大，使用滚动数组存储前两个状态，避免空间浪费。
- **取模操作**：由于答案较大，需要在每一步计算中取模，防止溢出。

### 可拓展之处
- **类似题目**：这类问题可以推广到其他组合数学问题，如排列组合、图论中的匹配问题等。
- **算法套路**：递推+滚动数组的优化技巧在许多动态规划问题中都有应用，如斐波那契数列、背包问题等。

### 推荐题目
1. **P1044 栈**：考察递推和组合数学的经典题目。
2. **P1028 数的计算**：递推与动态规划的结合。
3. **P1057 传球游戏**：递推与状态转移的经典问题。

---
处理用时：36.09秒
# 题目信息

# 树的分解

## 题目描述

给出 $N$ 个点的树和 $K$，问能否把树划分成 $\frac{N}{K}$ 个连通块，且每个连通块的点数都是 $K$。

## 说明/提示

- 对于 $60 \%$ 的数据，$1 \le N, K \le 10^3$；
- 对于 $100 \%$ 的数据，$1 \le T \le 10$，$1 \le N ,K \le 10^5$。

## 样例 #1

### 输入

```
2
4 2
1 2
2 3
3 4
4 2
1 2
1 3
1 4
```

### 输出

```
YES
NO```

# AI分析结果

### 综合分析与结论

本题的核心问题是如何将一棵树划分为若干个大小为 $K$ 的连通块。各题解的思路基本一致，都是通过深度优先搜索（DFS）遍历树，计算每个子树的大小，并在子树大小恰好为 $K$ 时将其“剪掉”，最后判断剪掉的子树数量是否等于 $N/K$。虽然思路相似，但不同题解在实现细节、代码可读性和优化程度上有所差异。

#### 关键思路与技巧：
1. **DFS遍历与子树大小计算**：通过DFS遍历树，计算每个子树的大小，并在子树大小等于 $K$ 时将其“剪掉”。
2. **剪枝与计数**：当子树大小等于 $K$ 时，将其大小重置为0，并增加计数器，最后判断计数器是否等于 $N/K$。
3. **多组数据清空**：由于题目有多组测试数据，每次处理新数据时需要清空相关数组和变量。

#### 可拓展之处：
- **树的连通块划分**：类似的问题可以扩展到其他类型的图，如无向图或有向图，要求将图划分为若干连通块。
- **子树性质的应用**：子树大小的计算和剪枝技巧可以应用于其他树形问题，如树的直径、树的重心等。

### 评分较高的题解

#### 1. 作者：Youngsc (赞：26)
- **星级**：5星
- **关键亮点**：思路清晰，代码简洁，处理多组数据时清空数组和变量的操作得当。
- **个人心得**：无
- **核心代码**：
```cpp
inline void dfs(R int x,R int fa){
    siz[x] = 1;
    for(R int i=h[x]; i; i=ed[i].pre){
        R int p = ed[i].v;
        if(p == fa) continue;
        dfs(p,x);
        siz[x] += siz[p];
    }
    if(siz[x]==k) tot++,siz[x] -= k;
}
```
- **实现思想**：通过DFS遍历树，计算每个子树的大小，并在子树大小等于 $K$ 时将其“剪掉”。

#### 2. 作者：xhQYm (赞：13)
- **星级**：4星
- **关键亮点**：代码结构清晰，处理多组数据时清空数组和变量的操作得当，注释详细。
- **个人心得**：无
- **核心代码**：
```cpp
void dfs(int x,int s)
{
    st[x]=1;
    for(int i=h[x];~i;i=ne[i])
    {
        int j=e[i];
        if(j!=s)
        {
            dfs(j,x);
            st[x]+=st[j];
        }
    }   
    if(st[x]==k){st[x]=0;cnt++;}
}
```
- **实现思想**：通过DFS遍历树，计算每个子树的大小，并在子树大小等于 $K$ 时将其“剪掉”。

#### 3. 作者：LoverBoyInMacau (赞：3)
- **星级**：4星
- **关键亮点**：代码简洁，处理多组数据时清空数组和变量的操作得当，注释详细。
- **个人心得**：无
- **核心代码**：
```cpp
il void dfs(int x,int fa){
    siz[x] = 1;
    star(i,x){
        int v = e[i].to;
        if(v != fa){
            dfs(v,x);
            siz[x] += siz[v];
        }
    }
    if(siz[x] == k){
        siz[x] = 0;
        ans ++;
    }
}
```
- **实现思想**：通过DFS遍历树，计算每个子树的大小，并在子树大小等于 $K$ 时将其“剪掉”。

### 推荐题目
1. **P1352 没有上司的舞会**：考察树形DP，与本题的DFS遍历和子树计算有相似之处。
2. **P2014 选课**：树形DP问题，涉及子树的选择和计算。
3. **P3379 【模板】最近公共祖先（LCA）**：考察树的遍历和子树性质，与本题的DFS遍历有相似之处。

### 通用建议与扩展思路
- **代码可读性**：在编写代码时，尽量保持代码结构清晰，添加必要的注释，便于他人理解和维护。
- **优化技巧**：在处理多组数据时，注意清空相关数组和变量，避免数据污染。
- **思维拓展**：掌握子树大小的计算和剪枝技巧，可以应用于其他树形问题，如树的直径、树的重心等。

---
处理用时：33.33秒
# 题目信息

# 图的遍历

## 题目描述

给出 $N$ 个点，$M$ 条边的有向图，对于每个点 $v$，求 $A(v)$ 表示从点 $v$ 出发，能到达的编号最大的点。

## 说明/提示

- 对于 $60\%$ 的数据，$1 \leq N,M \leq 10^3$。
- 对于 $100\%$ 的数据，$1 \leq N,M \leq 10^5$。

## 样例 #1

### 输入

```
4 3
1 2
2 4
4 3```

### 输出

```
4 4 3 4```

# AI分析结果

### 综合分析与结论

本题的核心在于**有向图的遍历**，要求从每个点出发找到能到达的编号最大的点。题解中主要采用了以下几种思路：

1. **反向建图 + DFS/BFS**：通过反向建图，从编号最大的点开始遍历，确保每个点第一次被访问时即为最大编号。这种方法避免了环的处理，时间复杂度为O(n)。
2. **Tarjan缩点 + DFS**：通过Tarjan算法将强连通分量缩点，然后在缩点后的图上进行DFS，确保每个强连通分量中的点能到达的最大编号一致。
3. **多次DFS/松弛操作**：通过多次DFS或松弛操作，逐步更新每个点的最大编号，虽然时间复杂度较高，但在数据较弱的情况下可以通过。

### 精选题解

#### 1. 题解作者：hongzy (赞：629)
- **星级**：★★★★★
- **关键亮点**：反向建图 + DFS，思路清晰，代码简洁，时间复杂度最优。
- **个人心得**：通过反向建图，从大到小遍历，确保每个点第一次被访问时即为最大编号，避免了环的处理。
- **核心代码**：
```cpp
void dfs(int x, int d) {
    if(A[x]) return; //访问过 
    A[x] = d;
    for(int i=0; i<G[x].size(); i++)
        dfs(G[x][i], d);
}
```
- **实现思想**：从大到小遍历每个点，进行DFS，确保每个点第一次被访问时即为最大编号。

#### 2. 题解作者：Stump (赞：124)
- **星级**：★★★★
- **关键亮点**：反向建图 + DFS，代码简洁，思路清晰。
- **核心代码**：
```cpp
void dfs(int now, int st) {
    if(maxx[now]) return;
    maxx[now] = st;
    for(int e = las[now]; e; e = nxt[e])
        if(!maxx[to[e]]) dfs(to[e], st);
}
```
- **实现思想**：从大到小遍历每个点，进行DFS，确保每个点第一次被访问时即为最大编号。

#### 3. 题解作者：subarude (赞：117)
- **星级**：★★★★
- **关键亮点**：提供了两种解法，反向建图 + DFS和Tarjan缩点 + DFS，思路全面。
- **核心代码**：
```cpp
void dfs(int u, int fa) {
    f[u] = fa;
    for(int i = head[u]; i; i = e[i].nxt) {
        int v = e[i].to;
        if(f[v]) continue;
        dfs(v, fa);
    }
}
```
- **实现思想**：从大到小遍历每个点，进行DFS，确保每个点第一次被访问时即为最大编号。

### 最优关键思路或技巧

1. **反向建图**：通过反向建图，从大到小遍历，确保每个点第一次被访问时即为最大编号，避免了环的处理。
2. **Tarjan缩点**：通过Tarjan算法将强连通分量缩点，确保每个强连通分量中的点能到达的最大编号一致。
3. **多次DFS/松弛操作**：通过多次DFS或松弛操作，逐步更新每个点的最大编号，适用于数据较弱的情况。

### 可拓展之处

1. **强连通分量**：在处理有向图时，Tarjan算法可以用于缩点，简化图的结构。
2. **反向思维**：在处理图论问题时，反向思维（如反向建图）往往能简化问题。

### 推荐题目

1. **P3387 【模板】缩点**：考察Tarjan缩点的应用。
2. **P2863 [USACO06DEC]牛的舞会The Cow Prom**：考察强连通分量的应用。
3. **P1262 间谍网络**：考察图的遍历与强连通分量的应用。

### 个人心得总结

- **反向建图的优势**：通过反向建图，从大到小遍历，确保每个点第一次被访问时即为最大编号，避免了环的处理，时间复杂度最优。
- **Tarjan缩点的应用**：在处理有向图时，Tarjan算法可以用于缩点，简化图的结构，确保每个强连通分量中的点能到达的最大编号一致。
- **多次DFS/松弛操作**：在数据较弱的情况下，通过多次DFS或松弛操作，逐步更新每个点的最大编号，虽然时间复杂度较高，但可以通过。

---
处理用时：40.14秒
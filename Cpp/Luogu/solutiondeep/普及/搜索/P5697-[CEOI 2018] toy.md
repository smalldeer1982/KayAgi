# 题目信息

# [CEOI 2018] toy

## 题目描述

Johnny 喜欢收藏玩具。他收藏的玩具有很多不同的种类，每种玩具有很多个，而种类相同的两个玩具是无法区分的。

Emma 问 Johnny 他有几个玩具。然而 Johnny 并不愿意回答这个问题。

他告诉 Emma，如果他从所有玩具中选择一些不同的玩具，他可以玩 $n$ 天。换言之，这 $n$ 天中任意两天选择的玩具，存在一种玩具选择的数量不同。同时，选择的玩具集合是空集也是允许的。

Emma 并不想亲自计算这个答案，因此她把这个问题交给了你。你需要告诉她 Johnny 拥有的玩具的所有可能数量。


## 说明/提示

对于 $100\%$ 的数据， $1\le n\le 10^9$。

-----

**题目翻译By @StudyFather。**

## 样例 #1

### 输入

```
36```

### 输出

```
8
6 7 8 10 11 13 18 35```

# AI分析结果

### 综合分析与结论

本题的核心在于理解玩具选择的天数与玩具数量之间的关系。通过分析，可以发现每个玩具的选择方式（从0到k个）对总天数的贡献是(k+1)，因此总天数n可以表示为各个玩具的(k+1)的乘积。这转化为对n进行因数分解的问题，即找到所有可能的因数组合，使得它们的乘积等于n。

各题解的思路基本一致，都是通过DFS搜索n的因数，并在搜索过程中累加玩具数量。不同题解在代码实现和优化上有所差异，但整体思路相似。

### 评分较高的题解

#### 题解1：作者：ikunTLE (赞：6)
- **星级**：4.5
- **关键亮点**：代码结构清晰，使用了map进行去重，DFS搜索时从2开始，避免了不必要的搜索。代码简洁且易于理解。
- **核心代码**：
  ```cpp
  void dfs(int p,int x,int cnt){
      if(x<=p){
          int temp=cnt+p-1;
          if(!mp[temp]){
              ans[++num]=temp;
              mp[temp]=true;
          }
      }
      int sqrt_p=sqrt(p);
      for(int i=x;i<=sqrt_p;++i)
          if(!(p%i))
              dfs(p/i,i,cnt+i-1);
      return;
  }
  ```
- **个人心得**：作者提到从2开始搜索，避免了从1开始的无效搜索，这是代码优化的关键点。

#### 题解2：作者：Li_Feiy (赞：3)
- **星级**：4
- **关键亮点**：使用了`std::unique`进行去重，代码逻辑清晰，DFS搜索时从2开始，避免了无效搜索。
- **核心代码**：
  ```cpp
  void dfs(int now,int last,int sum){
      if(now>=last){
          a[++a[0]]=sum+now-1;
      }
      for(int i=last;i*i<=now;i++){
          if(now%i==0){
              dfs(now/i,i,sum+i-1);
          }
      }
  }
  ```
- **个人心得**：作者通过观察样例，发现玩具数量与天数之间的关系，这是解题的关键。

#### 题解3：作者：pxb0801 (赞：3)
- **星级**：4
- **关键亮点**：代码简洁，使用了`unique`进行去重，DFS搜索时从2开始，避免了无效搜索。
- **核心代码**：
  ```cpp
  void dfs(int n,int x,int cnt){
      if(x<=n){
          ans[++ansx]=cnt+n-1;
      }
      for(int i=x;i*i<=n;i++){
          if(n%i==0){
              dfs(n/i,i,cnt+i-1);
          }
      }
  }
  ```
- **个人心得**：作者通过分析样例，发现玩具数量与天数之间的关系，这是解题的关键。

### 最优关键思路与技巧

1. **因数分解**：将n分解为多个因数的乘积，每个因数减1即为玩具数量。
2. **DFS搜索**：从2开始搜索n的因数，避免无效搜索。
3. **去重**：使用map或`std::unique`进行去重，确保输出结果唯一。

### 可拓展之处

本题的思路可以拓展到其他需要因数分解的问题，如计算某个数的所有因数组合、求解某些组合数学问题等。

### 推荐题目

1. [P1029 最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1029)
2. [P1072 Hankson的趣味题](https://www.luogu.com.cn/problem/P1072)
3. [P1445 [Violet]樱花](https://www.luogu.com.cn/problem/P1445)

### 个人心得总结

通过本题，我深刻理解了玩具数量与天数之间的关系，并学会了如何通过DFS搜索因数来解决类似问题。从2开始搜索是一个关键的优化点，避免了无效搜索，提高了代码效率。

---
处理用时：37.51秒
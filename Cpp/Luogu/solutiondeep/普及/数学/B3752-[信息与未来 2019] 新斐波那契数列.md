# 题目信息

# [信息与未来 2019] 新斐波那契数列

## 题目描述

给定正整数 $a(a\ge1)$，新斐波那契数列 $f_a$ 按如下方式定义：
- $f_a(1) = 1$；
- $f_a(2) = a$；
- $f_a(n) = f_a(n − 1) + f_a(n − 2)\ (n > 2)$。

例如，给定 $a = 4$，有 $f_4(1) = 1, f_4(2) = 4, f_4(3) = 5, f_4(4) = 9, f_4(5) = 14, \cdots$ 现在已知新斐波那契数列中的一项 $x$，但并不知道 $n$ 和 $a$ 的值是多少。请你求出所有可能的 $n,a(n\ge2)$ 满足 $f_a(n) = x$。

## 说明/提示

对于 $60\%$ 的测试数据，有 $1\le x\le10^6$。

对于 $100\%$ 的测试数据，有 $2\le x\le10^9,1\le T\le20$。
> 本题原始满分为 $15\text{pts}$。

## 样例 #1

### 输入

```
2
9
123```

### 输出

```
2 9
3 8
4 4
2 123
3 122
4 61
6 24
10 3```

# AI分析结果

### 综合分析与结论

本题要求根据给定的新斐波那契数列中的一项 \( x \)，求出所有可能的 \( n \) 和 \( a \) 的组合，使得 \( f_a(n) = x \)。由于 \( x \) 的范围较大（\( 2 \leq x \leq 10^9 \)），直接枚举所有可能的 \( a \) 和 \( n \) 是不可行的。因此，需要找到一种高效的算法来解决这个问题。

#### 关键思路与技巧
1. **数学推导**：通过数学推导，可以将问题转化为求解关于 \( a \) 的方程。具体来说，\( f_a(n) \) 可以表示为 \( a \) 的线性函数，即 \( f_a(n) = k \cdot a + c \)，其中 \( k \) 和 \( c \) 是常数，取决于 \( n \)。通过求解 \( k \cdot a + c = x \)，可以得到 \( a \) 的可能取值。
2. **预处理斐波那契数列**：预处理斐波那契数列的前几项，以便快速计算 \( k \) 和 \( c \)。
3. **枚举 \( n \)**：由于 \( n \) 的范围较小（通常 \( n \leq 50 \)），可以枚举 \( n \)，然后通过上述方程求解 \( a \)。
4. **边界条件处理**：需要处理 \( a \) 的边界条件，确保 \( a \geq 1 \) 且 \( a \) 为整数。

#### 扩展思路
- **类似问题**：类似的问题包括求解其他递推数列的参数，如卢卡斯数列、佩尔数列等。
- **优化技巧**：可以进一步优化枚举 \( n \) 的范围，或者通过二分查找来加速求解 \( a \)。

### 推荐题目
1. [P1962 斐波那契数列](https://www.luogu.com.cn/problem/P1962)
2. [P1306 斐波那契公约数](https://www.luogu.com.cn/problem/P1306)
3. [P1939 【模板】矩阵加速（数列）](https://www.luogu.com.cn/problem/P1939)

### 通用建议与扩展思路
由于暂无题解，建议在实现时注意以下几点：
1. **数学推导**：通过数学推导将问题转化为可求解的方程。
2. **预处理**：预处理斐波那契数列的前几项，以便快速计算。
3. **枚举与优化**：枚举 \( n \) 并通过方程求解 \( a \)，注意优化枚举范围。
4. **边界条件**：处理 \( a \) 的边界条件，确保解的合法性。

通过以上思路和技巧，可以高效地解决本题。

---
处理用时：19.76秒
# 题目信息

# [NICA #2] 爱与不爱

## 题目背景

是爱还是厌　是爱还是厌\
啦啦啦啦~\
勉勉强强着　勉勉强强着\
啦啦啦啦啦~

## 题目描述

小 Ran 有一个长度为 $n$ 的正整数序列 $a$，她可以进行如下操作任意多次（包括零次）：

- 选择两个不同的数 $i,j$（$1\le i,j\le n$），然后将 $a_i$ **除以 $2$ 后下取整**，将 $a_j$ 乘二。要求操作完毕后的 $a_i$ 必须为正整数。

小 Ran 希望使序列的总和**最小**。输出最终序列的总和。

## 说明/提示

数据保证，$2\le n\le 10^5$，$1\le a_i\le 10^9$。

## 样例 #1

### 输入

```
5
1 2 3 4 5```

### 输出

```
12```

## 样例 #2

### 输入

```
6
1 1 4 5 1 4```

### 输出

```
12```

# AI分析结果

### 综合分析与结论

本题的核心目标是通过操作使序列的总和最小化。操作允许将某个元素除以2（下取整）并将另一个元素乘以2，最终要求序列中所有元素均为正整数。两个题解均采用了贪心策略，通过均匀分配2的幂次来最小化序列和。

- **Light_Star_RPmax_AFO**的题解通过计算每个元素的2的幂次和，均匀分配这些2的幂次，最终得到最小和。该题解思路清晰，代码简洁，且通过数学推导证明了贪心策略的正确性。
  
- **NightStriker**的题解同样采用贪心策略，但实现方式略有不同，通过逐个分配2的幂次来均匀分配。该题解代码可读性较好，但缺乏对贪心策略的详细数学证明。

总体而言，两个题解均达到了较好的效果，但**Light_Star_RPmax_AFO**的题解在思路清晰度和数学推导上更胜一筹。

### 所选题解

#### 1. Light_Star_RPmax_AFO (5星)
- **关键亮点**：通过数学推导证明了贪心策略的正确性，代码简洁且高效。
- **个人心得**：强调了不开`long long`会导致错误，提醒了常见的编程陷阱。
- **核心代码**：
  ```cpp
  int _2(int x){
      int ans = 0;
      while(x != 1){
          x >>= 1;
          ans++;
      }
      return ans;
  }

  signed main(){
      n = read();
      for(int i = 1;i <= n;i++)
          a = read(),ans += _2(a);
      int sum = ans / n, cnt = ans - (sum * n);
      cout << (1 << sum) * (n - cnt) + (1 << sum + 1) * cnt;
      return 0;
  }
  ```
  **核心实现思想**：计算每个元素的2的幂次和，均匀分配这些2的幂次，最终得到最小和。

#### 2. NightStriker (4星)
- **关键亮点**：采用贪心策略，逐个分配2的幂次，代码可读性较好。
- **核心代码**：
  ```cpp
  signed main(){
      cin>>n;
      for(int i = 1;i<=n;i++){
          cin>>a[i];
          sum+=__lg(a[i]);
          a[i] = 1;
      }
      while(sum>0){
          for(int i = 1;i<=n;i++){
              a[i]*=2;
              sum--;
              if(sum<1) break;
          }
      }
      int cnt = 0;
      for(int i = 1;i<=n;i++) cnt+=a[i];
      cout<<cnt<<endl;
      return 0;
  }
  ```
  **核心实现思想**：将每个元素除到1，然后逐个分配2的幂次，最终得到最小和。

### 最优关键思路与技巧

- **贪心策略**：通过均匀分配2的幂次来最小化序列和。
- **数学推导**：通过计算每个元素的2的幂次和，均匀分配这些2的幂次，最终得到最小和。
- **代码实现**：使用位运算高效计算2的幂次，避免使用浮点数运算。

### 可拓展之处

- **类似算法套路**：在需要均匀分配资源或最小化总和的问题中，贪心策略常常是有效的解决方案。
- **同类型题目**：可以考虑类似的操作问题，如通过交换或调整元素来达到某种目标。

### 推荐题目

1. **P1004 方格取数** - 考察贪心策略和动态规划。
2. **P1048 采药** - 考察贪心策略和背包问题。
3. **P1060 开心的金明** - 考察贪心策略和动态规划。

### 个人心得总结

- **调试经历**：不开`long long`会导致错误，提醒了常见的编程陷阱。
- **顿悟感想**：通过数学推导和贪心策略，可以高效解决类似的问题。

---
处理用时：26.30秒
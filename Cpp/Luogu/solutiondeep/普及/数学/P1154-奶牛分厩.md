# 题目信息

# 奶牛分厩

## 题目描述

农夫约翰有 $N(1 \le N \le 5000)$ 头奶牛，每头奶牛都有一个唯一的不同于其它奶牛的编号 $s_i$，所有的奶牛都睡在一个有 $K$ 个厩的谷仓中，厩的编号为 $0$ 到 $K-1$。每头奶牛都知道自己该睡在哪一个厩中，因为约翰教会了它们做除法，$S_i  \bmod  K$ 的值就是第 $i$ 头奶年所睡的厩的编号。

给出一组奶牛的编号，确定最小的 $K$ 使得没有二头或二头以上的奶牛睡在同一厩中。


## 说明/提示

$S_i(1\le S_i \le 1000000)$


## 样例 #1

### 输入

```
5 
4 
6 
9 
10 
13 
```

### 输出

```
8```

# AI分析结果

### 综合分析与结论

本题的核心在于找到一个最小的 $K$，使得所有奶牛的编号 $S_i$ 对 $K$ 取模的结果互不相同。题解中主要采用了以下几种思路：

1. **差值标记法**：通过计算所有奶牛编号的差值，并标记这些差值及其因子，最后找到未被标记的最小的 $K$。
2. **筛法优化**：通过预处理差值的因子，避免重复计算，提升效率。
3. **暴力枚举+剪枝**：直接枚举 $K$，并通过剪枝优化避免不必要的计算。

大多数题解都基于差值标记法，但实现细节和优化程度有所不同。部分题解通过预处理、筛法或剪枝进一步优化了时间复杂度。

### 精选题解

#### 1. 作者：Makasukaka (5星)
- **关键亮点**：通过差值标记法，结合调和级数的时间复杂度分析，优化了枚举过程。代码简洁且高效。
- **代码核心**：
  ```cpp
  for(int i=n;i<K;++i){
      if(!vis[i]){
          int f=1;
          for(int j=i;j<K;j+=i)if(vis[j]){f=0;break;}
          if(f){
              printf("%d\n",i);
              return 0;
          }
      }
  }
  ```
  **核心思想**：从小到大枚举 $K$，检查其倍数是否被标记，若未被标记则输出。

#### 2. 作者：陈见澍 (4星)
- **关键亮点**：通过差值标记法，并结合筛法优化，避免了重复计算。代码清晰且易于理解。
- **代码核心**：
  ```cpp
  for(k=1;k*k<=x;k++){
      if(!(x%k)){
          d[k]=d[x/k]=1;
      }
  }
  ```
  **核心思想**：枚举差值的因子并标记，最后找到未被标记的最小的 $K$。

#### 3. 作者：Jelly_Goat (4星)
- **关键亮点**：使用 `bitset` 优化空间复杂度，并通过枚举 $K$ 的倍数来检查是否满足条件。代码简洁且高效。
- **代码核心**：
  ```cpp
  for (int i = 1; i * k <= maxn; i++){
      if (vst[i * k]) return false;
  }
  ```
  **核心思想**：枚举 $K$ 的倍数，检查是否被标记，若未被标记则输出。

### 最优关键思路与技巧

1. **差值标记法**：通过计算所有奶牛编号的差值，并标记这些差值及其因子，最后找到未被标记的最小的 $K$。这是最核心的思路。
2. **筛法优化**：通过预处理差值的因子，避免重复计算，提升效率。
3. **调和级数分析**：通过调和级数的时间复杂度分析，优化枚举过程，确保算法在合理时间内完成。

### 可拓展之处

1. **同类型题**：类似的问题可以扩展到其他需要唯一映射的场景，如哈希函数的设计、唯一标识符的生成等。
2. **算法套路**：差值标记法和筛法优化可以应用于其他需要处理因子或差值的题目，如最大公约数、最小公倍数等问题。

### 推荐题目

1. **P1029 最大公约数和最小公倍数问题**：考察最大公约数和最小公倍数的性质，与本题的差值标记法有相似之处。
2. **P1072 Hankson的趣味题**：考察数论中的因子和倍数关系，与本题的筛法优化有相似之处。
3. **P1069 细胞分裂**：考察唯一映射和因子的应用，与本题的核心思路相似。

### 个人心得摘录

- **Makasukaka**：通过调和级数的时间复杂度分析，优化了枚举过程，避免了超时问题。
- **陈见澍**：通过筛法优化，避免了重复计算，提升了代码效率。
- **Jelly_Goat**：使用 `bitset` 优化空间复杂度，并通过枚举 $K$ 的倍数来检查是否满足条件，代码简洁且高效。

这些心得展示了如何通过数学分析和数据结构优化来解决实际问题，值得借鉴。

---
处理用时：27.00秒
# 题目信息

# 末日的传说

## 题目描述

只要是参加 jsoi 活动的同学一定都听说过 Hanoi 塔的传说：三根柱子上的金片每天被移动一次，当所有的金片都被移完之后，世界末日也就随之降临了。

在古老东方的幻想乡，人们都采用一种奇特的方式记录日期：他们用一些特殊的符号来表示从 $1$ 开始的连续整数，$1$ 表示最小而 $n$ 表示最大。创世纪的第一天，日历就被赋予了生命，它自动地开始计数，就像排列不断地增加。

我们用 $1-n$ 来表示日历的元素，第一天日历就是：
$$1,2,\ldots,n-2,n-1,n$$
第二天，日历自动变为
$$1,2,\ldots,n-2,n,n-1$$
······每次它都生成一个以前未出现过的“最小”的排列——把它转为 $n+1$ 进制后数的数值最小。

日子一天一天地过着。有一天，一位预言者出现了——他预言道，当这个日历到达某个上帝安排的时刻，这个世界就会崩溃······他还预言到，假如某一个日期的逆序达到一个值 $m$ 的时候，世界末日就要降临。

什么是逆序？日历中的两个不同符号，假如排在前面的那个比排在后面的那个更大，就是一个逆序，一个日期的逆序总数达到 $m$ 后，末日就要降临，人们都期待一个贤者，能够预见那一天到底将在什么时候到来？

## 说明/提示

对于 $10\%$ 的数据有 $n\le10$；

对于 $40\%$ 的数据有 $n\le1000$；

对于 $100\%$ 的数据有 $n\le5\times10^4$。

所有数据均有解。

## 样例 #1

### 输入

```
5 4
```

### 输出

```
1 3 5 4 2
```

# AI分析结果

### 综合分析与结论

本题的核心在于如何在保证字典序最小的前提下，构造一个逆序对数为 `m` 的排列。大部分题解都围绕贪心策略展开，通过递归或迭代的方式逐步确定每个位置的值。其中，**zqy1018** 和 **ASZIIIS** 的题解较为清晰，分别通过递归和数学推导的方式解决了问题，且代码简洁高效。其他题解虽然思路各异，但部分存在复杂度较高或解释不够清晰的问题。

### 所选题解

#### 1. **zqy1018** (★★★★★)
- **关键亮点**：通过递归和贪心策略，逐步确定每个位置的值，确保字典序最小且逆序对数恰好为 `m`。时间复杂度为 `O(n)`，代码简洁高效。
- **核心思想**：对于每个位置，判断当前最小数是否可以放在最前面，如果不能，则将其放在最后，并更新剩余的逆序对数。
- **代码片段**：
  ```cpp
  for(int i=1;i<=n;i++){
      ll t=(ll)(n-i)*(n-i-1)/2;
      if(t>=m) a[fst++]=i; // 放前面
      else a[lst--]=i,m-=(lst-fst+1); // 放后面
  }
  ```

#### 2. **ASZIIIS** (★★★★☆)
- **关键亮点**：通过数学推导和贪心策略，将问题转化为寻找一个临界点，使得前部分升序，后部分降序，中间通过一个数调整逆序对数。时间复杂度为 `O(n)`，思路清晰。
- **核心思想**：找到一个临界点 `p`，使得前 `p-1` 个数升序，第 `p` 个数调整逆序对数，后部分降序。
- **代码片段**：
  ```cpp
  for(int i=1;i<=n;i++){
      if(m>s) m-=s;
      else {c=m;m=0;}
  }
  ```

#### 3. **shiroha** (★★★★☆)
- **关键亮点**：通过数学公式直接计算每个位置的值，确保逆序对数恰好为 `m`。时间复杂度为 `O(n)`，代码简洁。
- **核心思想**：通过计算剩余数的逆序对数最大值，确定当前数应放在前面还是后面。
- **代码片段**：
  ```cpp
  for(int i=1;i<it;++i)cout<<i<<' '; // 输出前部分
  cout<<it+dx; // 输出中间调整数
  for(int i=n;i>=it;--i) if(i-it-dx)cout<<' '<<i; // 输出后部分
  ```

### 最优关键思路与技巧
1. **贪心策略**：通过贪心思想，尽可能将小数放在前面，确保字典序最小。
2. **数学推导**：利用逆序对数的数学公式，快速判断当前数应放在前面还是后面。
3. **递归与迭代**：通过递归或迭代的方式，逐步确定每个位置的值，确保时间复杂度为 `O(n)`。

### 可拓展之处
- **类似问题**：类似的问题包括构造特定性质的排列，如构造特定数量的逆序对、构造特定形状的排列等。
- **算法套路**：贪心算法、数学推导、递归与迭代的结合是解决此类问题的常见套路。

### 推荐题目
1. **P1908 逆序对**：考察逆序对的计算，与本题的逆序对构造有相似之处。
2. **P1491 集合位置**：考察排列的构造与贪心策略。
3. **P1337 [JSOI2004]平衡点**：考察数学推导与贪心策略的结合。

### 个人心得摘录
- **zqy1018**：通过递归和贪心策略，逐步确定每个位置的值，确保字典序最小且逆序对数恰好为 `m`。
- **ASZIIIS**：通过数学推导和贪心策略，将问题转化为寻找一个临界点，使得前部分升序，后部分降序，中间通过一个数调整逆序对数。
- **shiroha**：通过数学公式直接计算每个位置的值，确保逆序对数恰好为 `m`，代码简洁高效。

---
处理用时：28.15秒
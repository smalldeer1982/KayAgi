# 题目信息

# 小猫

## 题目描述

有 $2n$ 只小猫站成一圈，主人小明想把它们两两之间用绳子绑住尾巴连在一起。同时小明是个完美主义者，不容许看到有两根绳子交叉。请问小明有几种连线方案，可以把让所有小猫两两配对？

方案数很大，仅需输出方案数模 $10^9+7$（一个质数）的值。




## 说明/提示

### 数据范围

- 对于 $60\%$ 的数据，$1\le N \le 100$。
- 对于 $100\%$ 的数据，$1\le N \le 10^5$。

## 样例 #1

### 输入

```
3```

### 输出

```
5```

# AI分析结果

### 综合分析与结论

本题的核心是卡特兰数的应用，具体表现为凸多边形三角划分问题。题解中大部分作者都正确地识别了这一点，并提供了多种实现方式，包括递推公式、组合数计算、快速幂和逆元优化等。以下是各题解的要点总结：

1. **卡特兰数的识别与应用**：几乎所有题解都提到了卡特兰数，并给出了其通项公式或递推公式。
2. **优化与实现**：部分题解使用了快速幂和逆元来优化组合数的计算，避免了大数计算中的溢出问题。
3. **代码实现**：部分题解的代码实现较为简洁，使用了快速幂和逆元的技巧，适合大规模数据的计算。

### 评分较高的题解

#### 题解1：作者：jiangXxin (赞：14)
- **星级**：★★★★★
- **关键亮点**：
  - 详细解释了卡特兰数的应用背景，特别是将其与出栈次序问题类比，帮助理解。
  - 提供了C++和Python的代码实现，虽然Python版本只能通过80%的测试点，但C++版本完全通过。
  - 使用了快速幂和逆元优化组合数计算，适合大规模数据。
- **个人心得**：作者提到Python版本无法通过所有测试点，最终改用C++，体现了对语言性能的考虑。

```cpp
long long quickmul(long long a,long long b){
    a%=mod;b%=mod;
    long long c=(long long)a*b/mod;
    long long ans=a*b-c*mod;
    if(ans<0)ans+=mod;
    else if(ans>=mod)ans-=mod;
    return ans;
}
long long quickpow(long long a,long long b){
    long long ret=1;
    while(b){
        if(b&1)ret=ret*a%mod;
        a=a*a%mod;
        b>>=1;
    }
    return ret;
}
```

#### 题解2：作者：aakennes (赞：12)
- **星级**：★★★★☆
- **关键亮点**：
  - 提供了卡特兰数的递推公式和组合数公式，并使用了快速幂和逆元优化。
  - 代码结构清晰，易于理解。
  - 通过预处理阶乘和逆元，进一步优化了组合数的计算。

```cpp
ll Catalan(int n){
    return C(2*n,n)*qpow(n+1,mol-2)%mol;
}
```

#### 题解3：作者：Karl_Aurora (赞：10)
- **星级**：★★★★☆
- **关键亮点**：
  - 详细介绍了卡特兰数的定义和应用场景，帮助读者理解其背后的数学原理。
  - 使用了快速幂和逆元优化组合数计算，代码实现较为简洁。
  - 提供了快读和快写的实现，进一步优化了输入输出性能。

```cpp
long long pow_mod(long long a,long long b){
    long long ret=1;
    while(b){
        if(b&1)ret=ret*a%mod;
        a=a*a%mod;
        b>>=1;
    }
    return ret;
}
```

### 最优关键思路与技巧

1. **卡特兰数的识别与应用**：本题的核心是卡特兰数，理解其应用场景（如凸多边形三角划分、出栈次序等）是解决问题的关键。
2. **快速幂与逆元优化**：在计算组合数时，使用快速幂和逆元可以避免大数计算中的溢出问题，同时提高计算效率。
3. **预处理阶乘与逆元**：通过预处理阶乘和逆元，可以进一步优化组合数的计算，适合大规模数据。

### 拓展与举一反三

1. **类似题目**：
   - [P1044 栈](https://www.luogu.org/problem/P1044)：卡特兰数的经典应用，考察出栈次序问题。
   - [P1976 有趣的数列](https://www.luogu.com.cn/problem/P1976)：卡特兰数的变种，考察数列的生成方式。
   - [P3200 有趣的序列](https://www.luogu.com.cn/problem/P3200)：卡特兰数的应用，考察序列的合法排列。

2. **个人心得总结**：
   - **调试经历**：部分作者提到Python版本无法通过所有测试点，最终改用C++，体现了对语言性能的考虑。
   - **优化技巧**：使用快速幂和逆元优化组合数计算，避免了大数计算中的溢出问题，适合大规模数据的处理。

---
处理用时：25.83秒
# 题目信息

# 四方定理

## 题目描述

四方定理是众所周知的：任意一个正整数$n$，可以分解为不超过四个整数的平方和。例如：$25=1^{2}+2^{2}+2^{2}+4^{2}$，当然还有其他的分解方案，$25=4^{2}+3^{2}$和$25=5^{2}$。给定的正整数$n$，编程统计它能分解的方案总数。注意：$25=4^{2}+3^{2}$和$25=3^{2}+4^{2}$视为一种方案。


## 样例 #1

### 输入

```
1
2003```

### 输出

```
48```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划或暴力枚举的方式，统计一个正整数$n$可以分解为不超过四个整数的平方和的方案数。大多数题解采用了动态规划的思路，尤其是二维费用的完全背包问题，通过预处理的方式计算所有可能的方案数，最终输出结果。部分题解则采用了暴力枚举的方法，虽然时间复杂度较高，但在数据范围较小的情况下依然可行。

### 所选高星题解

#### 1. 作者：pigstd (5星)
**关键亮点**：
- 使用二维动态规划，思路清晰，代码简洁。
- 通过完全背包的思路，预处理所有可能的方案数，避免了重复计算。
- 代码可读性强，注释详细，适合初学者理解。

**核心代码**：
```cpp
for (int i=1;i*i<=M;i++)
    for (int j=i*i;j<=M;j++)
        for (int sum=1;sum<=4;sum++)
            dp[j][sum]+=dp[j-i*i][sum-1];
```
**核心思想**：通过三重循环，枚举所有可能的平方数，并更新$dp$数组，最终统计方案数。

#### 2. 作者：HoshiuZ (4星)
**关键亮点**：
- 明确指出了这是一个二维费用的背包问题，思路清晰。
- 预处理所有可能的方案数，避免了重复计算。
- 代码简洁，逻辑清晰。

**核心代码**：
```cpp
for(int i=1;i<=sqrt(32768);i++) {
    for(int j=i*i;j<=32768;j++) {
        for(int k=1;k<=4;k++) {
            dp[j][k]+=dp[j-i*i][k-1];
        }
    }
}
```
**核心思想**：通过三重循环，枚举所有可能的平方数，并更新$dp$数组，最终统计方案数。

#### 3. 作者：king_xbz (4星)
**关键亮点**：
- 提供了暴力枚举和背包两种解法，适合不同需求的读者。
- 详细解释了二维费用背包的实现思路，适合进阶学习。
- 代码结构清晰，注释详细。

**核心代码**：
```cpp
for(fint i=1;i<=182;i++)
    for(fint j=i*i;j<=32768;j++)
        for(fint k=1;k<=4;k++)
            f[j][k]+=f[j-i*i][k-1];
```
**核心思想**：通过三重循环，枚举所有可能的平方数，并更新$f$数组，最终统计方案数。

### 最优关键思路与技巧

1. **二维动态规划**：通过$dp[i][j]$表示$i$用$j$个平方数组成的方案数，利用完全背包的思想进行状态转移。
2. **预处理**：通过预处理所有可能的方案数，避免了重复计算，提高了效率。
3. **剪枝优化**：在暴力枚举中，通过剪枝减少不必要的计算，提高运行效率。

### 可拓展之处

1. **类似算法套路**：二维费用的背包问题可以应用于其他需要同时考虑多个限制条件的问题，如资源分配、组合优化等。
2. **同类型题目**：可以尝试解决其他类似的分解问题，如将一个数分解为若干个立方数的和等。

### 推荐题目

1. **P1616 疯狂的采药**：完全背包问题的经典题目，适合练习背包问题的基本思路。
2. **P1048 采药**：01背包问题的经典题目，适合理解背包问题的基本概念。
3. **P1060 开心的金明**：二维费用的背包问题，适合进一步理解多维背包问题的应用。

### 个人心得摘录

- **pigstd**：通过完全背包的思路，避免了重复计算，代码简洁易懂。
- **king_xbz**：提供了暴力枚举和背包两种解法，适合不同需求的读者，详细解释了二维费用背包的实现思路。

### 通用建议与扩展思路

- **动态规划**：对于需要统计方案数的问题，动态规划是一种非常有效的解决方法，尤其是二维费用的背包问题。
- **预处理**：通过预处理所有可能的方案数，可以避免重复计算，提高效率。
- **剪枝优化**：在暴力枚举中，通过剪枝减少不必要的计算，提高运行效率。

---
处理用时：22.59秒
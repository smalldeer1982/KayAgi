# 题目信息

# 失踪的7

## 题目描述

远古的 Pascal 人也使用阿拉伯数字来进行计数，但是他们又不喜欢使用 $7$ ，因为他们认为 $7$ 是一个不吉祥的数字，所以 Pascal 数字 $8$ 其实表示的是自然数中的 $7$，$18$ 表示的是自然数中的 $16$ 。请计算，在正整数 $n$ 范围以内包含有多少个 Pascal 数字。


## 说明/提示

对于所有数据，$1 \leq t \leq 10000$，$1 \leq n \leq 2^{32}-1$。

## 样例 #1

### 输入

```
2
10
20```

### 输出

```
9
18```

# AI分析结果

### 综合分析与结论

本题的核心是统计1到n之间不包含数字7的数的个数。由于n的范围较大（1 ≤ n ≤ 2^32-1），暴力枚举显然不可行。因此，大部分题解都采用了**数位DP**、**进制转换**或**贡献值计算**等高效算法来解决问题。

#### 关键思路与技巧：
1. **数位DP**：通过逐位处理数字，利用记忆化搜索或动态规划来计算符合条件的数的个数。这种方法适用于处理大范围的数位问题，且时间复杂度较低。
2. **进制转换**：将问题转化为九进制转十进制的问题，因为Pascal数字可以看作是由0-9中除去7的9个数字组成的“九进制”数。这种方法简洁高效，但需要注意处理数字中包含7的情况。
3. **贡献值计算**：通过逐位计算每一位对最终结果的贡献，利用乘法原理和位值原理来快速求解。这种方法思路清晰，代码实现较为直观。

#### 可拓展之处：
- **类似问题**：处理其他不包含特定数字的数的统计问题，如不包含数字3、5等的数的个数。
- **数位DP的应用**：数位DP可以广泛应用于各种数位相关的统计问题，如统计区间内满足某些条件的数的个数。

### 推荐题解

#### 1. 作者：dbxxx (★★★★★)
**关键亮点**：
- 引入了“贡献值”的概念，通过逐位计算贡献值来快速求解问题。
- 详细解释了如何处理数字中包含7的情况，思路清晰，代码可读性强。
- 代码实现简洁高效，适合大范围数据处理。

**核心代码**：
```cpp
for (int i = s.length() - 1, atr = 1; i >= 0; --i, atr *= 9)
    ans += atr * (s[i] - '0') - (s[i] - '0' > 7 ? atr : 0);
```
**实现思想**：从最低位开始，逐位计算贡献值，并根据当前位是否大于7进行修正。

#### 2. 作者：amstar (★★★★☆)
**关键亮点**：
- 使用数位DP的思路，通过记忆化搜索逐位统计符合条件的数的个数。
- 代码结构清晰，适合对数位DP有一定了解的读者。

**核心代码**：
```cpp
int dfs(int pos, bool limit) {
    if (pos == -1) return 1;
    if (!limit && dp[pos] != -1) return dp[pos];
    int u = limit ? a[pos] : 9;
    int ret = 0;
    for (int i = 0; i <= u; ++i) {
        if (i == 7) continue;
        ret += dfs(pos - 1, limit && i == a[pos]);
    }
    if (!limit) dp[pos] = ret;
    return ret;
}
```
**实现思想**：通过递归逐位搜索，利用记忆化减少重复计算。

#### 3. 作者：Ice_teapoy (★★★★☆)
**关键亮点**：
- 将问题转化为九进制转十进制的问题，思路新颖且高效。
- 详细解释了如何处理数字中包含7的情况，代码实现简洁。

**核心代码**：
```cpp
for (i = 0; i < k; ++i) {
    if (a[i] == '7') {
        a[i] = '6';
        for (j = i + 1; j < k; ++j) a[j] = '9';
        break;
    }
}
```
**实现思想**：将数字中的7替换为6，并将后续位替换为9，然后进行九进制转十进制的计算。

### 推荐题目
1. **P2602 [ZJOI2010] 数字计数**：统计区间内每个数字出现的次数，适合练习数位DP。
2. **P2657 [SCOI2009] windy 数**：统计区间内满足相邻数字差大于等于2的数的个数，适合练习数位DP。
3. **P4127 [AHOI2009] 同类分布**：统计区间内各位数字之和相等的数的个数，适合练习数位DP。

---
处理用时：24.98秒
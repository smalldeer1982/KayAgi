# 题目信息

# 解一元二次方程的烦恼

## 题目背景

JosephZheng 在写数学作业的预习。他往往使用 Casio 来帮忙解一元二次方程。但是 Casio 有一个问题，就是当 $\Delta=b^2-4ac$ 为一个大素数或大合数时，其开平方的结果会以小数显示，而不是老师要求的二次根式形式。JosephZheng 很是苦恼，一遇到这种情况就要手动解方程。一天他再也忍不住了，于是打开了电脑，编了一个 prime 程序……于是悲剧的 OIer 们就要跟着疯狂的 JosephZheng 一起编这个程序，呵呵……


## 题目描述

废话少说，给你一个大数 $N$（不一定在 int64 范围内），让你进行素性判断，然后分解质因数。当然，初中数学题不可能有大于 int64 的数让你判断素性，因此超过范围的数可以忽略不计。为了让程序更加贴心，JosephZheng 多了一些要求，会在输入输出中给出具体情况。


## 说明/提示

编这道题的 JosephZheng 有些无聊，但是很考验基本功哦！仔细审题！

水题一道。。。


## 样例 #1

### 输入

```
4
eed
```

### 输出

```
Enter the number=
Prime? No!
4=2^2

Enter the number=
```

## 样例 #2

### 输入

```
2
end
```

### 输出

```
Enter the number=
Prime? Yes!

Enter the number=
```

## 样例 #3

### 输入

```
-1
adfs
```

### 输出

```
Enter the number=
Prime? No!

Enter the number=
```

## 样例 #4

### 输入

```
1234###24#@13#@￥！1
hehe
```

### 输出

```
Enter the number=
Prime? No!
The number is too large!

Enter the number=
```

## 样例 #5

### 输入

```
1.5
1
1234324123512343123
@~@~@~@
```

### 输出

```
Enter the number=
Prime? No!
15=3^1*5^1

Enter the number=
Prime? No!

Enter the number=
Prime? No!
The number is too large!

Enter the number=
```

## 样例 #6

### 输入

```
12
halt@@
```

### 输出

```
Enter the number=
Prime? No!
12=2^2*3^1

Enter the number=
```

# AI分析结果

### 综合分析与结论

本题的核心任务是处理输入字符串、提取数字、判断素数和分解质因数。大部分题解采用了相似的思路，但在实现细节、代码优化和输出格式处理上有所不同。以下是各题解的要点总结：

1. **输入处理**：几乎所有题解都使用了`getline`来读取包含空格的字符串，并通过遍历字符串提取数字。
2. **素数判断**：大多数题解采用了朴素的$O(\sqrt{n})$算法，部分题解使用了更高效的优化（如模6判断）。
3. **质因数分解**：常见的实现是通过遍历2到$\sqrt{n}$，逐个判断是否为质因数并记录指数。
4. **输出格式**：题解中普遍提到输出格式的严格性，尤其是换行和空格的处理。

### 评分较高的题解

#### 1. 作者：_neddy (★★★★★)
- **关键亮点**：
  - 代码结构清晰，逻辑严谨。
  - 使用了`register`关键字优化循环，提升了性能。
  - 对输入字符串的处理和数字提取非常简洁。
  - 输出格式处理得当，符合题目要求。
- **个人心得**：
  - 提到“数据水到爆炸”，暗示题目数据较弱，但代码依然考虑了各种边界情况。
- **核心代码**：
  ```cpp
  inline int str_to_int64(string ss) {
      int num = 0, flag = 0;
      for (register int i = 0; i < ss.size() && num <= 40000000; ++i)
          if (ss[i] >= '0' && ss[i] <= '9') num = num * 10 + (ss[i] - '0'), flag = 1;
      if (flag == 0) exit(0);
      return num;
  }
  ```

#### 2. 作者：0nullptr (★★★★☆)
- **关键亮点**：
  - 使用了`puts`和`getline`处理输入输出，代码简洁。
  - 对质因数分解的输出格式处理得当，尤其是第一个质因数的特殊处理。
  - 代码中加入了详细的注释，便于理解。
- **核心代码**：
  ```cpp
  void divide(int n) {
      cout << n << '=';
      bool first = true;
      for (int i = 2; i <= n; i++) {
          int k = 0;
          while (n % i == 0) {
              k++;
              n /= i;
          }
          if (k) {
              if (first) {
                  cout << i << '^' << k;
                  first = false;
              } else {
                  cout << '*' << i << '^' << k;
              }
          }
      }
      cout << endl;
  }
  ```

#### 3. 作者：Lylighte (★★★★☆)
- **关键亮点**：
  - 使用了线性筛素数优化质数判断，时间复杂度更低。
  - 对输入输出的处理非常细致，尤其是对换行和空格的处理。
  - 代码结构清晰，模块化设计便于维护。
- **核心代码**：
  ```cpp
  void divi(int n) {
      bool appeared = false;
      cout << n << '=';
      for (int i = 1; i <= pcnt; i++) {
          int p = 0;
          while (n % primelist[i] == 0 && n > 0) {
              p++;
              n /= primelist[i];
          }
          if (p > 0) {
              if (appeared) cout << '*';
              cout << primelist[i] << '^' << p;
              appeared = true;
          }
      }
      cout << '\n';
  }
  ```

### 最优关键思路与技巧

1. **输入处理**：使用`getline`读取整行字符串，避免`cin`遇到空格停止的问题。
2. **素数判断**：使用$O(\sqrt{n})$的朴素算法，或进一步优化如模6判断。
3. **质因数分解**：遍历2到$\sqrt{n}$，逐个判断是否为质因数并记录指数，注意输出格式。
4. **输出格式**：严格按照题目要求处理换行和空格，避免格式错误。

### 可拓展之处

1. **素数筛法**：可以进一步学习线性筛法或其他更高效的素数判断算法，如Miller-Rabin素性测试。
2. **大数处理**：如果题目数据范围更大，可以学习大数分解算法，如Pollard's Rho算法。
3. **输入输出优化**：在处理大规模输入时，可以使用更高效的输入输出方法，如`scanf`和`printf`。

### 推荐题目

1. **P3383 【模板】线性筛素数**：练习线性筛法的实现。
2. **P1075 质因数分解**：练习质因数分解的基础应用。
3. **P1217 [USACO1.5]回文质数**：结合素数判断和回文数判断的综合题目。

### 个人心得摘录

- **_neddy**：提到“数据水到爆炸”，说明题目数据较弱，但代码依然考虑了各种边界情况，体现了严谨的编程习惯。
- **Lylighte**：提到“第一次提交爆零，字母大小写出错”，提醒我们在编程中要注意细节，尤其是输出格式的严格性。

---
处理用时：35.53秒
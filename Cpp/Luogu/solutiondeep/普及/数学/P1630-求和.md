# 题目信息

# 求和

## 题目描述

求 $1^b+2^b+\cdots + a^b$ 的和除以 $10^4$ 的余数。

## 说明/提示

对于 $30\%$ 的数据，$N \le 10$，$a,b \le 10^3$。

对于 $100\%$ 的数据，$1 \le N \le 100$，$1 \le a,b \le 10^9$。

## 样例 #1

### 输入

```
1
2 3
```

### 输出

```
9
```

# AI分析结果

### 综合分析与结论

本题的核心在于高效计算 \(1^b + 2^b + \cdots + a^b\) 并取模 \(10^4\)。由于 \(a\) 和 \(b\) 的范围都很大（\(a, b \leq 10^9\)），直接暴力计算不可行。多数题解都采用了**快速幂**和**前缀和**的技巧，利用模数的性质（\(10^4\)）进行优化，将时间复杂度从 \(O(Nab)\) 降低到 \(O(N \times 10^4 \log b)\)。

### 评分较高的题解

#### 1. 作者：摸鱼 (5星)
**关键亮点：**
- 利用模数 \(10^4\) 的性质，预处理 \(1\) 到 \(10000\) 的 \(b\) 次方和，通过前缀和 \(O(1)\) 计算答案。
- 代码简洁，思路清晰，时间复杂度分析到位。

**核心代码：**
```cpp
for(register LL i=1;i<=10000;++i){
    sum[i]=(sum[i-1]+qpow(i,b,mod))%mod;
}
ans=(a/10000*sum[10000]+sum[a%10000])%mod;
```
**实现思想：**
- 预处理 \(1\) 到 \(10000\) 的 \(b\) 次方和，利用前缀和快速计算答案。

#### 2. 作者：JustinRochester (5星)
**关键亮点：**
- 详细分析了暴力、快速幂、前缀和的优化过程，逐步推导出最优解。
- 引入欧拉定理进一步优化，虽然对复杂度无影响，但提升了代码的优雅性。
- 代码结构清晰，注释详细，适合初学者理解。

**核心代码：**
```cpp
inline i32 pow(i32 d_A,i32 d_X){
    i32 d_Bas=d_A,d_Ans=(d_X&1)?d_A:1;
    while(d_X>>=1){
        d_Bas*=d_Bas;
        d_Bas%=10000;
        if(d_X&1) d_Ans*=d_Bas,d_Ans%=10000;
    }
    return d_Ans;
}
```
**实现思想：**
- 使用快速幂计算 \(i^b\)，结合前缀和优化，最终通过公式 \(Add_{10000} \times \lfloor a/10000 \rfloor + Add_{a\%10000}\) 计算答案。

#### 3. 作者：Aw顿顿 (4星)
**关键亮点：**
- 从暴力到快速幂再到前缀和的优化过程分析清晰，逐步推导出最优解。
- 强调了前缀和的使用，代码实现简洁。

**核心代码：**
```cpp
inline int quickpow(int a,int b){
    int s=1;
    while(b){
        if(b&1)s=(s*a)%mod;
        a=(a*a)%mod;
        b>>=1;
    }return s%mod;
}
```
**实现思想：**
- 使用快速幂计算 \(i^b\)，结合前缀和优化，最终通过公式 \(Add_{10000} \times \lfloor a/10000 \rfloor + Add_{a\%10000}\) 计算答案。

### 最优关键思路与技巧
1. **快速幂**：通过二分法将幂运算的时间复杂度从 \(O(b)\) 降低到 \(O(\log b)\)。
2. **前缀和**：利用模数 \(10^4\) 的性质，预处理 \(1\) 到 \(10000\) 的 \(b\) 次方和，通过前缀和 \(O(1)\) 计算答案。
3. **模数优化**：利用 \((a + 10000)^b \equiv a^b \pmod{10000}\) 的性质，减少重复计算。

### 可拓展之处
- **类似题目**：可以扩展到其他模数较大的求和问题，如 \(1^b + 2^b + \cdots + a^b \pmod{m}\)，其中 \(m\) 是一个较大的数。
- **算法套路**：快速幂和前缀和的结合可以应用于其他需要高效计算幂次和的问题。

### 推荐题目
1. [P1226 【模板】快速幂](https://www.luogu.com.cn/problem/P1226)
2. [P1045 麦森数](https://www.luogu.com.cn/problem/P1045)
3. [P1306 斐波那契公约数](https://www.luogu.com.cn/problem/P1306)

### 个人心得摘录
- **摸鱼**：忽略了模数的大小，最终通过前缀和优化解决了问题。
- **JustinRochester**：一开始看错了题目，后来通过逐步优化找到了最优解。
- **Aw顿顿**：从暴力到快速幂再到前缀和的优化过程，逐步推导出最优解。

这些心得展示了在解题过程中常见的误区和优化思路，对初学者有很好的启发作用。

---
处理用时：27.60秒
# 题目信息

# 球迷购票问题

## 题目描述

盛况空前的足球赛即将举行。球赛门票售票处排起了球迷购票长龙。

按售票处规定，每位购票者限购一张门票，且每张票售价为 $50$ 元。在排成长龙的球迷中有 $n$ 个人手持面值 $50$ 元的钱币，另有 $n$ 个人手持面值 $100$ 元的钱币。假设售票处在开始售票时没有零钱。试问这 $2n$ 个球迷有多少种排队方式可使售票处不致出现找不出钱的尴尬局面。

例如当 $n=2$ 时，用 A 表示手持 $50$ 元面值的球迷，用 $B$ 表示手持 $100$ 元钱的球迷。则最多可以得到以下两组不同的排队方式，使售票员不至于找不出钱。


- 第一种：$\mathtt{[A,A,B,B]}$；
- 第二种：$\mathtt{[A,B,A,B]}$。

对于给定的 $n$，计算 $2n$ 个球迷有多少种排队方式，可以使售票处不至于找不出钱。


## 说明/提示

### 数据范围及约定

对于全部数据，$0 \le n \le 20$。


## 样例 #1

### 输入

```
2
```

### 输出

```
2
```

# AI分析结果

### 综合分析与结论

本题的核心是求解球迷购票的合法排列数，本质上是卡特兰数的应用。题解中主要分为以下几种思路：

1. **动态规划（DP）**：通过状态转移方程求解，常见的有二维DP和一维DP优化。难点在于状态的定义和转移方程的推导。
2. **卡特兰数**：直接利用卡特兰数的递推公式或通项公式求解，时间复杂度较低，但需要理解卡特兰数的背景和应用场景。
3. **记忆化搜索**：通过递归+记忆化的方式求解，思路清晰但可能效率较低。
4. **组合数学**：通过组合数的变形求解，需要一定的数学推导能力。

### 评分较高的题解

#### 1. 作者：niiick (4星)
- **关键亮点**：详细解释了卡特兰数的背景和应用，提供了递推公式和通项公式的实现，代码简洁且高效。
- **代码核心**：
  ```cpp
  for(int i=2;i<=n;++i) cat[i]=cat[i-1]*(4*i-2)/(i+1);
  ```
  **实现思想**：利用卡特兰数的递推公式，通过循环计算卡特兰数的第n项。

#### 2. 作者：Alpha_Zero (4星)
- **关键亮点**：详细讲解了卡特兰数的推导过程，并提供了两种实现方式（递推和通项公式），代码清晰且易于理解。
- **代码核心**：
  ```cpp
  for(int i=2;i<=n;++i) f[i]=f[i-1]*(4*i-2)/(i+1);
  ```
  **实现思想**：利用卡特兰数的通项公式，通过循环计算卡特兰数的第n项。

#### 3. 作者：pomelo_nene (4星)
- **关键亮点**：通过组合数学的思路，推导出卡特兰数的公式，并提供了简洁的实现代码。
- **代码核心**：
  ```cpp
  for(int i=0;i<n;++i) tot=tot*(2*n-i)/(i+1);
  printf("%lld",tot/(n+1));
  ```
  **实现思想**：利用组合数的变形公式，通过循环计算卡特兰数的第n项。

### 最优关键思路与技巧

1. **卡特兰数的应用**：理解卡特兰数的背景和应用场景，能够快速识别出问题与卡特兰数的关系。
2. **递推与通项公式**：掌握卡特兰数的递推公式和通项公式，能够根据问题选择合适的实现方式。
3. **组合数学的推导**：通过组合数学的推导，能够灵活运用组合数的变形公式求解问题。

### 可拓展之处

1. **类似问题**：栈的合法出栈序列、括号匹配、二叉树的结构等问题都可以通过卡特兰数求解。
2. **算法优化**：在DP中，可以通过状态压缩或滚动数组优化空间复杂度。

### 推荐题目

1. **P1044 栈**：考察栈的合法出栈序列，与卡特兰数密切相关。
2. **P1970 花匠**：考察动态规划的应用，与状态转移方程的推导相关。
3. **P1028 数的计算**：考察递推与动态规划的结合，与卡特兰数的递推公式类似。

### 个人心得摘录

- **niiick**：通过将A看作左括号，B看作右括号，问题转化为合法的括号匹配，即卡特兰数。
- **Alpha_Zero**：通过进栈和出栈的类比，将问题转化为栈的合法出栈序列，进一步理解卡特兰数的应用。
- **pomelo_nene**：通过组合数学的推导，发现卡特兰数的公式，进一步理解组合数与卡特兰数的关系。

这些心得帮助读者更好地理解卡特兰数的应用背景和推导过程，具有较高的参考价值。

---
处理用时：25.10秒
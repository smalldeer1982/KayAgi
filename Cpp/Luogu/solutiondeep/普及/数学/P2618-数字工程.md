# 题目信息

# 数字工程

## 题目描述

ACM 实验室开启了一个数字工程项目，希望把正整数 $n$ 通过一些特殊方法变成 $1$。

可采用的方法有：

1. 减去 $1$
2. 除以它的任意一个素因子。 

每操作一次消耗一个单位的能量。

请问把 $n$ 变成 $1$ 最少需要消耗多少能量？


## 说明/提示

$1 \le n \le 10^6$。

## 样例 #1

### 输入

```
1
4```

### 输出

```
0
2```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）结合素数筛法，求解将任意正整数 $n$ 变为 $1$ 所需的最小能量消耗。所有题解都采用了类似的思路：首先通过筛法预处理每个数的素因子，然后利用 DP 计算最小能量消耗。不同题解的主要区别在于素数筛法的实现方式、DP 的状态转移方程以及代码的优化程度。

### 所选高星题解

#### 题解1：作者：Leianha (赞：14)  
**星级：4.5**  
**关键亮点：**  
1. **高效的素数筛法**：使用类似于欧拉筛的方法，预处理每个数的素因子，确保时间复杂度较低。
2. **简洁的DP实现**：通过 `f[i] = min(f[i-1] + 1, f[i/yz[i][j]] + 1)` 的状态转移方程，简洁高效地计算最小能量消耗。
3. **输入处理技巧**：使用 `while(scanf("%d",&n)!=EOF)` 处理多组输入，避免重复计算。

**个人心得：**  
作者提到“被筛到的数一定要及时打上标记”，强调了在筛法中标记的重要性，避免重复计算。

**核心代码：**
```cpp
void yych() {
    for(int i=2;i<=N;++i)
        if(!vis[i])
            for(int j=i;j<=N;j+=i)
                vis[j]=1, yz[j][++num[j]]=i;
    
    for(int i=2;i<=N;++i) {
        f[i]=f[i-1]+1;
        for(int j=1;j<=num[i];++j)
            f[i]=min(f[i], f[i/yz[i][j]]+1);
    }
}
```

#### 题解2：作者：Gokix (赞：2)  
**星级：4**  
**关键亮点：**  
1. **清晰的DP思路**：详细解释了DP的状态转移方程，特别是如何处理质数和非质数的情况。
2. **优化的筛法**：使用埃氏筛法预处理质数表，并在DP过程中动态更新因子的倍数，确保计算效率。
3. **边界处理**：在筛法过程中，及时处理超过范围的数，避免不必要的计算。

**核心代码：**
```cpp
for(i=2;i<=lim;i++) {
    if(p[i]==0) // i是质数
        f[i]=1;
    else
        f[i]=min(f[i], f[i-1]+1);
    for(j=1;j<=tot;j++) { // 向倍数扩展
        if(i*e[j]<=lim)
            f[i*e[j]]=min(f[i*e[j]], f[i]+1);
        else
            break;
    }
}
```

#### 题解3：作者：XZYQvQ (赞：1)  
**星级：4**  
**关键亮点：**  
1. **简洁的素数筛法**：使用简单的筛法预处理每个数的素因子，代码简洁易读。
2. **高效的DP实现**：通过 `f[i] = min(f[i-1] + 1, f[i/d[i][j]] + 1)` 的状态转移方程，快速计算最小能量消耗。
3. **输入处理技巧**：使用 `while(~scanf("%d",&n))` 处理多组输入，避免重复计算。

**核心代码：**
```cpp
for(int i=2;i<=1000000;i++) {
    f[i]=f[i-1]+1;
    for(int j=0;j<dc[i];j++)
        f[i]=min(f[i], f[i/d[i][j]]+1);
}
```

### 最优关键思路与技巧

1. **素数筛法**：使用欧拉筛或埃氏筛法预处理每个数的素因子，确保后续DP计算的高效性。
2. **动态规划**：通过 `f[i] = min(f[i-1] + 1, f[i/prime] + 1)` 的状态转移方程，计算将 $i$ 变为 $1$ 的最小能量消耗。
3. **输入处理**：使用 `while(scanf("%d",&n)!=EOF)` 或类似方法处理多组输入，避免重复计算。

### 可拓展之处

1. **类似题目**：可以扩展到其他需要预处理素因子的DP问题，如计算某个数的最大素因子、最小素因子等。
2. **优化筛法**：可以进一步优化筛法，如使用线性筛法，减少时间复杂度。

### 推荐题目

1. **P3383 【模板】线性筛素数**：练习素数筛法的基本应用。
2. **P1217 [USACO1.5]回文质数 Prime Palindromes**：结合素数筛法和回文数判断。
3. **P1075 质因数分解**：练习素因子的分解与应用。

### 个人心得总结

1. **筛法标记的重要性**：在筛法中，及时标记被筛到的数，避免重复计算。
2. **DP状态转移的简洁性**：通过简洁的状态转移方程，可以高效地解决问题。
3. **输入处理的技巧**：使用 `while(scanf("%d",&n)!=EOF)` 处理多组输入，避免重复计算。

---
处理用时：28.56秒
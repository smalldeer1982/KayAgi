# 题目信息

# 《瞿葩的数字游戏》T2-多边形数

## 题目背景

数字王国里有一类特殊的数，它们叫做多边形数。并且国王 $1$ 规定数字间的联姻只能在同为一种多边形数中进行。（请不要吐槽这个规定……）

瞿葩对这个现象十分好奇，见 $36$ 和 $10$ 这一对情侣在散步，便上前询问 $36$ 它是什么多边形数。可是 $36$ 拍拍脑门，想了想说：“我也不知道啊，你去问问国王吧。”

看来国民们并不知道自己是什么多边形数啊，国王 $1$ 急的发愁。国王 $1$ 只知道多边形数怎么计算，但是多边形数要怎么给国民做解释呢，干脆这样解释吧：可以排成正多边形的整数都是多边形数。当然多边形数可以分为三边（角）形数、四边形数（正方形数）、五边形数、六边形数……


## 题目描述

**此题为规律题，请自行寻找规律，以锻炼数学归纳能力！！**

我们拿三角形数做例子：图中的 $1$、$3$、$6$、$10$ 就是三角形数。

 ![](https://cdn.luogu.com.cn/upload/pic/1742.png) 

任务：求出 $N$ 是哪一种多边形数（假设 $N$ 是 $K$ 边形数），比如我们求出 $36$ 是三边形数和四边形数（貌似叫做三角形数和正方形数呵）。若不是多边形数，输出 Poor + 该数字。若同时是多种多边形数，输出最小的一个和第二小的一个。每个读入文件里有 $ng$ 组数据。


## 说明/提示

### 数据范围及约定

对于 $20\%$ 的数据，$1 \le K_1,K_2 \le 6$；

对于 $100\%$ 的数据， $1 \le N \le 10^6$，$1 \le ng \le 10^2$。

如果同时是多种多边形数，设 $K_1$ 为最小的 $K$，$K_2$ 为次小的 $K$。

国王 $1$：“你可以发现四边形数（正方形数）就是平方数这个规律吗？为方便理解，我给出前几个多边形数表。”（表中可以看出，正六边形不包括正中心的那个点，以此类推）

| 自然数 | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| 三角形数 | $1$ | $3$ | $6$ | $10$ | $15$ | $21$ | $28$ | $36$ |
| 正方形数 | $1$ | $4$ | $9$ | $16$ | $25$ | $36$ | $49$ | $64$ |
| 五边形数 | $1$ | $5$ | $12$ | $22$ | $35$ | $51$ | $70$ | $92$ |
| 六边形数 | $1$ | $6$ | $15$ | $28$ | $45$ | $66$ | $91$ | $120$ |


## 样例 #1

### 输入

```
2
36
1000000
```

### 输出

```
3 4
4 204
```

# AI分析结果

### 综合分析与结论

本题的核心是找出给定数字的多边形数类型，即判断一个数是否属于某种多边形数，并输出最小的两个多边形数类型。题解中主要采用了数学推导和枚举的方法，通过观察多边形数的规律，推导出通项公式，然后通过枚举可能的参数来求解。

大多数题解的思路较为相似，主要差异在于数学推导的深度和代码实现的优化程度。部分题解通过巧妙的数学变换减少了枚举的次数，提升了效率。整体来看，题解的质量参差不齐，部分题解思路清晰、代码简洁，而部分题解则存在冗余或不够优化的地方。

### 所选高星题解

#### 1. 作者：xkcdjerry (5星)
**关键亮点：**
- 通过差分法推导出多边形数的通项公式，思路清晰且数学推导严谨。
- 通过枚举约数的方式优化了时间复杂度，避免了暴力枚举的低效。
- 代码简洁且高效，处理了特殊情况（如1和2）。

**核心代码：**
```cpp
for(top=0,n=2;n*(n+1)/2<=v;n++) if(!((v-n)%(n*(n-1)/2)))
    a[top++]=(v-n)/(n*(n-1)/2)+2;
```
**实现思想：** 通过枚举n，判断(v-n)是否能被(n*(n-1)/2)整除，若能则计算对应的多边形数类型。

#### 2. 作者：__Star_Sky (4星)
**关键亮点：**
- 通过观察差分序列，推导出多边形数的通项公式，思路清晰。
- 通过枚举2n的约数来优化时间复杂度，避免了暴力枚举。
- 代码结构清晰，处理了特殊情况。

**核心代码：**
```cpp
for(int i=2;i*i<=n;i++) {
    if(n%i!=0) continue;
    int k=i,t=n/k+2*k-4;
    if(t%(k-1)==0&&t/(k-1)>2) ans[++cnt]=t/(k-1);
}
```
**实现思想：** 枚举2n的约数，判断是否满足条件，若满足则计算对应的多边形数类型。

#### 3. 作者：Scrutiny (4星)
**关键亮点：**
- 通过数学推导得到多边形数的通项公式，思路清晰。
- 通过从大到小枚举k来优化时间复杂度，避免了暴力枚举。
- 代码简洁，处理了特殊情况。

**核心代码：**
```cpp
for(int k=sqrt(n);k>=1;--k) {
    if((x-k)%(k*(k-1)/2)==0) {
        if(ans1) {
            ans2=(x-k)%(k*(k-1)/2)+2;
            break;
        } else {
            ans1=(x-k)%(k*(k-1)/2)+2;
        }
    }
}
```
**实现思想：** 从大到小枚举k，判断(x-k)是否能被(k*(k-1)/2)整除，若能则计算对应的多边形数类型。

### 最优关键思路与技巧

1. **数学推导与差分法：** 通过差分法推导出多边形数的通项公式，减少了枚举的次数，提升了效率。
2. **枚举优化：** 通过枚举约数或从大到小枚举k，避免了暴力枚举的低效，优化了时间复杂度。
3. **特殊情况处理：** 对于1和2等特殊情况，进行了单独处理，避免了不必要的计算。

### 可拓展之处

1. **类似题型：** 类似的多项式推导和枚举优化可以应用于其他数列问题，如平方数、立方数等。
2. **算法套路：** 差分法和枚举优化是解决数列问题的常见套路，可以推广到其他数学问题中。

### 推荐题目

1. **P1217 [USACO1.5]回文质数 Prime Palindromes** (题号：P1217)
2. **P1029 [NOIP2001 普及组] 最大公约数和最小公倍数问题** (题号：P1029)
3. **P1045 [NOIP2005 普及组] 麦森数** (题号：P1045)

### 个人心得摘录

- **xkcdjerry：** “由于k≥3，所以对于任何一个数v只有约√(2v)个n可能与其对应。” 通过数学推导减少了枚举次数，提升了效率。
- **__Star_Sky：** “容易发现，k一定是2n的约数，只需再√n的时间内枚举k。” 通过枚举约数优化了时间复杂度，避免了暴力枚举的低效。
- **Scrutiny：** “显然随着k变小，n变大。为了使n尽可能小，我们从大到小枚举k即可。” 通过从大到小枚举k，优化了时间复杂度，避免了不必要的计算。

---
处理用时：30.06秒
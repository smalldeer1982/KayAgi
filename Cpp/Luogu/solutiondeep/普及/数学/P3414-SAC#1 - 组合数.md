# 题目信息

# SAC#1 - 组合数

## 题目描述


今天小明学习了组合数，现在他很想知道 $\sum \rm{C}$$_{n}^{i}$ 是多少。其中 $\rm{C}$ 是组合数（即 $\rm{C}$$_{n}^{i}$ 表示 $n$ 个物品无顺序选取 $i$ 个的方案数），$i$ 取从 $0$ 到 $n$ 的所有偶数。

由于答案可能很大，请输出答案对 $6662333$ 的余数。

## 说明/提示

对于 $20\%$ 的数据，$n \le 20$；

对于 $50\%$ 的数据，$n \le 10^{3}$；

对于 $100\%$ 的数据，$n \le 10^{18}$。

## 样例 #1

### 输入

```
3```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

本题的核心是计算组合数的偶数项和，即 $\sum_{i=0, i \text{为偶数}}^{n} C_n^i$。通过二项式定理的推导，可以得出该和等于 $2^{n-1}$。由于 $n$ 的范围很大（$n \leq 10^{18}$），直接计算组合数不可行，因此需要使用快速幂算法来计算 $2^{n-1} \mod 6662333$。

大多数题解都基于二项式定理和快速幂算法，思路较为一致。部分题解还提供了详细的数学推导和代码实现，帮助理解快速幂的应用。整体来看，题解的质量较高，尤其是那些提供了详细推导和优化思路的题解。

### 精选题解

#### 1. **作者：Salty_Fish787 (5星)**
- **关键亮点**：详细的数学推导，清晰的二项式定理应用，快速幂的优化实现。
- **代码实现**：
  ```cpp
  int quick_pow(int a, LL b) {
      int sum = 1;
      while (b) {
          if (b&1) sum = (LL)sum*a%MOD;
          b >>= 1;
          a = (LL)a*a%MOD;
      }
      return sum;
  }
  ```
  **核心思想**：通过快速幂算法计算 $2^{n-1} \mod 6662333$，时间复杂度为 $O(\log n)$。

#### 2. **作者：NaVi_Awson (4星)**
- **关键亮点**：简洁的代码实现，快速幂的模板化应用。
- **代码实现**：
  ```cpp
  int quick_pow(int a, LL b) {
      int sum = 1;
      while (b) {
          if (b&1) sum = (LL)sum*a%MOD;
          b >>= 1;
          a = (LL)a*a%MOD;
      }
      return sum;
  }
  ```
  **核心思想**：同样使用快速幂算法，代码简洁易读。

#### 3. **作者：hsfzLZH1 (4星)**
- **关键亮点**：引入费马小定理优化快速幂，进一步减少计算量。
- **代码实现**：
  ```cpp
  long long ksm(long long a, long long n) {
      long long ans = 1;
      a %= mod;
      while (n) {
          if (n & 1) ans = ans * a % mod;
          n >>= 1;
          a = a * a % mod;
      }
      return ans;
  }
  ```
  **核心思想**：利用费马小定理优化快速幂，时间复杂度为 $O(\log 6662332)$。

### 最优关键思路与技巧

1. **二项式定理的应用**：通过二项式定理推导出 $\sum_{i=0, i \text{为偶数}}^{n} C_n^i = 2^{n-1}$，这是解决问题的关键。
2. **快速幂算法**：由于 $n$ 的范围很大，直接计算 $2^{n-1}$ 不可行，快速幂算法能够高效地计算大指数幂。
3. **费马小定理优化**：在模运算中，利用费马小定理可以进一步优化快速幂的计算，减少不必要的计算步骤。

### 可拓展之处

- **同类型题**：类似的题目可以考察其他组合数性质的应用，如奇数项和、特定条件下的组合数和等。
- **算法套路**：快速幂算法在计算大指数幂时非常有用，类似的题目可以考察其在不同场景下的应用。

### 推荐题目

1. **P1226 【模板】快速幂**：练习快速幂算法的基本应用。
2. **P3807 【模板】卢卡斯定理**：学习组合数在模数下的计算方法。
3. **P1313 计算系数**：考察二项式定理和组合数的应用。

### 个人心得总结

- **调试经历**：部分作者提到在实现快速幂时遇到的困难，如递归实现时的栈溢出问题，最终通过迭代实现解决了问题。
- **踩坑教训**：一些作者在未使用快速幂时，直接计算 $2^{n-1}$ 导致超时，提醒我们在处理大指数幂时一定要使用快速幂算法。
- **顿悟感想**：通过小数据找规律，发现 $\sum_{i=0, i \text{为偶数}}^{n} C_n^i = 2^{n-1}$，这种思维方式在解决数学问题时非常有用。

---
处理用时：26.05秒
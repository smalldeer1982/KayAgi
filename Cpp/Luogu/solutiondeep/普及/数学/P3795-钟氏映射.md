# 题目信息

# 钟氏映射

## 题目背景

2233年，CSSYZ学校的数学老师兼数学竞赛顾问钟JG已经2200+岁啦！

为了庆生，他或她给广大人民群众出了道题。


## 题目描述

设集合$N=M=\left\{x|x\in N_+,x\leq k,k\in N_+\right\}$

设$f$为$N$到$M$的映射。

求满足：

$f[f(x)]=x$的不同的映射$f$的个数，由于答案较大，输出答案对$14233333$取余的数即可。


## 说明/提示

四个映射分别为：


|f(1)|f(2)|f(3)|
|-|-|-|
|1|2|3|
|1|3|2|
|2|1|3|
|3|2|1|

数据范围：

对于20%的数据，$1\leq k\leq 9$

对于其它的80%的数据，$1\leq k\leq 10^7$


内存20MB...（一开始开1MB把自己坑了）


## 样例 #1

### 输入

```
3
```

### 输出

```
4
```

# AI分析结果

### 综合分析与结论

本题的核心在于理解映射的性质，即满足 $f[f(x)] = x$ 的映射 $f$ 必须满足每个元素要么自映射，要么与另一个元素互映射。通过这一性质，可以将问题转化为一个递推问题，递推公式为 $g(i) = g(i-1) + g(i-2) \times (i-1)$，其中 $g(i)$ 表示 $i$ 个元素时的映射个数。

大部分题解都正确地使用了递推公式，并通过滚动数组优化空间复杂度。代码实现上，部分题解使用了 `long long` 类型来防止溢出，并进行了取模操作。整体上，题解的思路清晰，代码实现较为简洁，但部分题解在代码可读性和优化细节上有所欠缺。

### 所选高星题解

#### 1. 作者：IcyFoxer_XZY (4星)
**关键亮点**：
- 使用了滚动数组优化空间复杂度，代码简洁且高效。
- 提供了特判处理，增强了代码的鲁棒性。
- 代码可读性较好，注释清晰。

**核心代码**：
```cpp
for(ll i=3;i<=n;++i){
    now=b*(i-1)+a;
    now%=mod;
    b=a;
    a=now;
}
```
**实现思想**：通过滚动数组 `a` 和 `b` 来存储前两个状态，递推计算当前状态 `now`，并更新 `a` 和 `b`。

#### 2. 作者：litble (4星)
**关键亮点**：
- 使用了滚动数组优化空间，代码简洁。
- 提供了特判处理，增强了代码的鲁棒性。
- 代码实现较为清晰，注释简洁明了。

**核心代码**：
```cpp
for(i=3;i<=n;i++){
    now=(long long)las2*(i-1)+las1;
    now%=mod;las2=las1;las1=now;
}
```
**实现思想**：通过 `las1` 和 `las2` 存储前两个状态，递推计算当前状态 `now`，并更新 `las1` 和 `las2`。

#### 3. 作者：nzcnnr (4星)
**关键亮点**：
- 使用了滚动数组优化空间，代码简洁。
- 提供了特判处理，增强了代码的鲁棒性。
- 代码实现较为清晰，注释简洁明了。

**核心代码**：
```cpp
for(int i=3;i<=k;i++){
    dp[2]=dp[0]*(i-1)+dp[1];
    dp[2]%=14233333;
    dp[0]=dp[1];
    dp[1]=dp[2];
}
```
**实现思想**：通过 `dp[0]` 和 `dp[1]` 存储前两个状态，递推计算当前状态 `dp[2]`，并更新 `dp[0]` 和 `dp[1]`。

### 最优关键思路与技巧

1. **递推公式**：$g(i) = g(i-1) + g(i-2) \times (i-1)$，通过这一公式可以将问题转化为递推问题。
2. **滚动数组优化**：由于递推公式只依赖于前两个状态，因此可以使用滚动数组来优化空间复杂度。
3. **取模操作**：由于结果可能非常大，需要在每一步计算后进行取模操作，防止溢出。

### 可拓展之处

- **类似问题**：类似的问题包括计算排列组合数、递推数列等，都可以通过递推公式和滚动数组优化来解决。
- **算法套路**：递推+滚动数组优化是一种常见的算法套路，适用于需要计算大范围递推数列的问题。

### 推荐题目

1. **P1044 栈**：考察递推和滚动数组优化。
2. **P1028 数的计算**：考察递推和滚动数组优化。
3. **P1255 数楼梯**：考察递推和滚动数组优化。

### 个人心得总结

- **调试经历**：部分题解提到在调试过程中发现需要开 `long long` 类型，否则会溢出导致错误。这提醒我们在处理大数问题时要注意数据类型的选择。
- **踩坑教训**：部分题解提到在实现过程中忽略了特判处理，导致在某些边界情况下出错。这提醒我们在编写代码时要考虑所有可能的边界情况。
- **顿悟感想**：通过理解映射的性质，将问题转化为递推问题，是解决本题的关键。这种转化思维在解决复杂问题时非常有用。

---
处理用时：26.48秒
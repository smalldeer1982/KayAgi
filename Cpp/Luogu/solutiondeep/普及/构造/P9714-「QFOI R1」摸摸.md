# 题目信息

# 「QFOI R1」摸摸

## 题目描述

小 R 是一个可爱的女孩子，她喜欢被摸头。

但是摸头之前，必须答对她提出的一个问题。

她有一个长度为 $n$ 的数列 $a$，初始时所有元素均为 $0$。另有两个长度为 $n$ 的数列 $t,b$。

她可以进行两种操作：

1. 将 $t$ 与 $t$ 的倒序对应元素相加，得到新的 $t$。
    - 例如，$t=[1,4,2]$ 变为 $t'=[1+2,4+4,2+1]=[3,8,3]$。
2. 将 $a$ 与 $t$ 对应元素相加，得到新的 $a$。
    - 例如，$a=[1,2,3],t=[1,4,2]$ 变为 $a'=[1+1,2+4,3+2]=[2,6,5]$。

是否可能通过若干次以上操作将 $a$ 变为 $b$？

你希望摸她的头 $T$ 次，因此有 $T$ 组数据。

## 说明/提示

**样例解释**

对于第一组数据：

- 初始时：$a=[0,0,0]$，$t=[1,2,2]$，$b=[5,8,7]$。
- 执行操作二：$a=[1,2,2]$，$t=[1,2,2]$，$b=[5,8,7]$。
- 执行操作二：$a=[2,4,4]$，$t=[1,2,2]$，$b=[5,8,7]$。
- 执行操作一：$a=[2,4,4]$，$t=[3,4,3]$，$b=[5,8,7]$。
- 执行操作二：$a=[5,8,7]$，$t=[3,4,3]$，$b=[5,8,7]$。

此时 $a=b$，符合要求。

对于第二组数据，可以证明不存在合法方案。

---

**数据范围**

本题共 $20$ 个测试点，每个测试点 $5$ 分。

记 $\sum n$ 表示每组数据的 $n$ 之和。

对于全部数据，保证 $1\le\sum n\le 2\times 10^3$，$n\ge 1$，$1\le t_i,b_i\le 2\times 10^3$。

- 对于测试点 $1\sim 4$：保证 $n\le 2$。
- 对于测试点 $5\sim 8$：保证所有 $t_i$ 都相等。
- 对于测试点 $9\sim 12$：保证 $b_i=b_{n-i+1}$。
- 对于测试点 $13\sim 16$：保证 $\sum n,t_i,b_i\le 200$。
- 对于测试点 $17\sim 20$：无特殊限制。

---

**Hack 数据**

本题在赛后添加了 Hack 数据，从 $21$ 开始编号。

原有测试点依然计 $5$ 分，Hack 数据计 $0$ 分，但只有通过所有数据才会被判为 Accepted。

为区分原有测试点和 Hack 数据，本题添加了子任务，但子任务的计分方式为“加和”，不会影响正常评测。

## 样例 #1

### 输入

```
2
3
1 2 2
5 8 7
3
1 2 2
2 4 3```

### 输出

```
Yes
No```

# AI分析结果

### 综合分析与结论

本题的核心在于通过有限的操作将初始全零的数组 $a$ 转化为目标数组 $b$，且操作一最多只需执行一次。大多数题解都基于这一关键观察，通过枚举操作次数或利用数学公式来验证是否可以将 $a$ 转化为 $b$。以下是对各题解的简要分析与评分：

1. **官方题解（rui_er）**：思路清晰，代码简洁，时间复杂度为 $O(nw)$，适合大多数情况。评分：4星。
2. **Jorisy**：通过枚举 $p$ 和 $q$ 来验证是否满足条件，思路直接但代码略显冗长。评分：3星。
3. **MoonCake2011**：通过枚举 $x$ 和 $y$ 来验证条件，时间复杂度较高，但思路清晰。评分：3星。
4. **LCat90**：通过枚举 $x$ 和 $y$ 来验证条件，代码简洁，时间复杂度为 $O(nX)$。评分：3星。
5. **ICU152_lowa_IS8**：通过将 $b$ 减去 $t$ 来验证条件，思路清晰但代码略显复杂。评分：3星。
6. **MrPython**：通过数学方法解决，时间复杂度为 $O(n)$，但代码复杂且不易理解。评分：2星。
7. **WaterSun**：通过枚举 $x$ 和 $y$ 来验证条件，时间复杂度为 $O(nw)$，代码简洁。评分：3星。
8. **SamHJD**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
9. **irris**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
10. **C202301**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
11. **SakurajiamaMai**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
12. **lovely_AKCode**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
13. **Loser_Syx**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
14. **Miyamizu_Mitsuha**：通过枚举操作次数来验证条件，思路清晰，代码简洁。评分：3星。
15. **Null_h**：通过裴楚定理解决，思路新颖但代码复杂。评分：2星。
16. **66xyyd**：通过枚举 $x$ 和 $y$ 来验证条件，思路清晰，代码简洁。评分：3星。

### 所选高星题解

#### 1. 官方题解（rui_er） - 4星
**关键亮点**：
- 思路清晰，代码简洁。
- 时间复杂度为 $O(nw)$，适合大多数情况。
- 通过枚举操作次数来验证条件，逻辑严谨。

**核心代码**：
```cpp
bool ans = false;
while(true) {
    bool valid = true;
    rep(i, 1, n) if(a[i] > b[i]) valid = false;
    if(!valid) break;
    if((b[1] - a[1]) % s[1] == 0) {
        int steps = (b[1] - a[1]) / s[1];
        bool ok = true;
        rep(i, 1, n) if(b[i] != a[i] + steps * s[i]) ok = false;
        if(ok == true) {ans = true; break;}
    }
    rep(i, 1, n) a[i] += t[i];
}
```
**核心思想**：通过枚举操作次数，验证是否可以将 $a$ 转化为 $b$。

### 最优关键思路与技巧

1. **操作一最多执行一次**：这是所有题解的共同点，通过这一观察可以大大简化问题。
2. **枚举操作次数**：通过枚举操作次数来验证是否可以将 $a$ 转化为 $b$，这是大多数题解的核心思路。
3. **数学公式验证**：通过数学公式来验证条件，如 $b_i = x \times t_i + y \times t'_i$，这是部分题解的核心思路。

### 可拓展之处

1. **类似操作问题**：可以拓展到其他类似的操作问题，如通过有限的操作将数组 $a$ 转化为数组 $b$。
2. **数学公式验证**：可以拓展到其他需要通过数学公式验证的问题，如通过有限的操作将数组 $a$ 转化为数组 $b$。

### 推荐题目

1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1005 矩阵取数游戏](https://www.luogu.com.cn/problem/P1005)
3. [P1006 传纸条](https://www.luogu.com.cn/problem/P1006)

### 个人心得总结

- **调试经历**：部分题解在调试过程中发现枚举次数过多导致超时，通过优化枚举次数解决了问题。
- **踩坑教训**：部分题解在验证条件时忽略了某些特殊情况，导致错误，通过增加验证条件解决了问题。
- **顿悟感想**：通过枚举操作次数来验证条件，是一种简单直接的方法，适合大多数情况。

---
处理用时：47.06秒
# 题目信息

# 洛谷的文件夹

## 题目描述

kkksc03 是个非凡的空想家！在短时间内他设想了大量网页，然后总是交给可怜的 lzn 去实现。

洛谷的网页端，有很多文件夹，文件夹还套着文件夹。

例如：$\verb!/luogu/application/controller!$ 表示根目录下有一个名称为 $\verb!luogu!$ 的文件夹，这个文件夹下有一个名称 $\verb!application!$ 的文件夹，其中还有名为 $\verb!controller!$ 的文件夹。

每个路径的第 $1$ 个字符总是 $\verb!/!$，且没有两个连续的 $\verb!/!$，最后的字符不是 $\verb!/!$。所有名称仅包含数字和小写字母。

目前根目录是空的。kkksc03 想好了很多应该有的文件夹路径名。问题是，需要是使这些文件夹都存在，需要新建几个文件夹呢？


## 说明/提示

### 数据范围及约定


- 对于 $20\%$ 数据，有 $N \le 20$；
- 对于 $50\%$ 数据，有 $N \le 200$；
- 另有 $30\%$ 数据，有对于所有路径最多存在两个 $\verb!/!$（包含第 $1$ 个字符）；
- 对于所有数据，$N \le 1000$。

## 样例 #1

### 输入

```
2
/luogu/application/controller
/luogu/application/view
```

### 输出

```
3
4
```

## 样例 #2

### 输入

```
3
/chicken
/chicken/egg
/chicken```

### 输出

```
1
2
2```

## 样例 #3

### 输入

```
4
/a
/a/b
/a/c
/b/b```

### 输出

```
1
2
3
5```

# AI分析结果

### 综合分析与结论
这些题解主要围绕如何统计创建给定文件夹路径所需新建文件夹的数量展开，多数题解利用了C++的STL容器来简化实现。
1. **思路**：多数题解思路是将每个路径中的文件夹及路径记录下来，通过去重得到不重复的文件夹路径集合，集合大小即为所需新建文件夹数量。部分题解使用链表、Trie树等数据结构模拟文件夹的树形结构来求解。
2. **算法要点**：关键在于处理路径字符串，按“/”分割提取文件夹名称，并运用合适的数据结构存储和去重。如使用`set`自动去重，`map`建立字符串到编号的映射等。
3. **解决难点**：难点在于高效处理路径字符串，避免重复计算文件夹，以及处理路径格式的细节。如路径末尾无“/”、首个字符为“/”等。

综合质量来看，以下题解相对优秀：
- **作者Anguei**：
  - **星级**：5星
  - **关键亮点**：思路清晰简洁，直接利用`set`容器的特性，代码简短且可读性高，对思路和实现细节解释详细。
  - **个人心得**：无
  - **核心代码**：
```cpp
int main() {
    int n;
    std::cin >> n;
    std::set<std::string> set;
    
    for (int i = 1; i <= n; ++i) {
        std::string s;
        std::cin >> s;
        std::string dir = "";
        for (auto j : s) {
            if (j == '/')
                set.insert(dir);
            dir += j;
        }
        set.insert(dir);
        
        std::cout << set.size() - 1 << std::endl;
    }
}
```
  - **核心思想**：遍历输入路径字符串，遇到“/”将当前路径插入`set`，最后再插入完整路径，输出`set`大小减1（去除初始“/”）。
- **作者FutureThx**：
  - **星级**：4星
  - **关键亮点**：以样例详细解释思路，易于理解，同样使用`set`容器解决问题，代码实现较清晰。
  - **个人心得**：无
  - **核心代码**：
```cpp
int main(){
    set<string> s;
    int n,j = 1;
    cin >> n;
    for(int i = 1;i <= n;i++){
        string a,x = "/",father = "";j = 1;
        cin >> a;
        while(j!= a.size() + 1){
            if(j == a.size())
                s.insert(father + x);
            else if(a[j] == '/'){
                s.insert(father + x);
                father = x  + father;
                x = "/";
            }
            else
                x += a[j];
            j++;
        }
        cout << s.size() << endl;
    }
    return 0;
}
```
  - **核心思想**：通过循环遍历路径字符串，按“/”分割处理路径，将每个文件夹路径插入`set`，最后输出`set`大小。
- **作者rickyxrc**：
  - **星级**：4星
  - **关键亮点**：先详细分析问题，以具体例子说明思路，代码实现结合`map`判断文件夹是否出现过，逻辑清晰。
  - **个人心得**：无
  - **核心代码**：
```cpp
int main(){
    ios::sync_with_stdio(false);
    int n,num=0;
    cin>>n;
    string m,r;
    char c;
    bool f=1;
    for(int i=1;i<=n;i++){  
        cin>>m;
        c=m[0];
        for(int i=0;i<m.length();i++,c=m[i]){
            r+=c;
            if(i&&c=='/'||i+1==m.length()){
                if(r[r.length()-1]!='/')
                    r=r+'/';
                it=flg.find(r);
                if(it==flg.end()){ 
                    num++;
                    flg[r]=1;
                }
            }
        }
        if(!f)
            cout<<endl;
        f=0;
        cout<<num;
        r=string("");
    }
}
```
  - **核心思想**：遍历输入路径字符串，构建文件夹路径，用`map`查找路径是否存在，不存在则计数并插入`map`。

### 最优关键思路或技巧
1. **数据结构选择**：利用`set`自动去重特性，简洁高效地统计不重复文件夹路径。处理字符串时，按“/”分割提取文件夹名称构建路径。
2. **细节处理**：注意路径格式，如开头的“/”和结尾无“/”的情况，通过在末尾添加“/”或最后单独处理保证路径完整性。

### 可拓展之处
此类题目属于字符串处理与数据结构结合的题型，类似算法套路可用于处理具有层级关系的数据，如文件系统目录操作、网络路由表等。可通过改变数据结构或优化字符串处理方式来应对不同规模和复杂程度的问题。

### 相似知识点洛谷题目推荐
1. **P3370 【模板】字符串哈希**：涉及字符串处理和哈希算法应用，与本题处理字符串并判断重复类似。
2. **P2580 [ZJOI2006] 书架**：需处理具有层次结构的数据，类似本题文件夹的层级关系。
3. **P1075 [NOIP2012 普及组] 质因数分解**：同样是对输入数据进行处理和统计，考察对数据的分析与处理能力。

### 个人心得摘录与总结
1. **作者SIXIANG32**：在使用`set`去重时遇到样例3无法通过的问题，发现是因为相同文件夹名在不同层级未区分，通过添加父亲文件夹作为后缀解决，强调处理细节的重要性。总结：处理数据时要全面考虑各种可能情况，注意边界条件和特殊情况。 

---
处理用时：29.74秒
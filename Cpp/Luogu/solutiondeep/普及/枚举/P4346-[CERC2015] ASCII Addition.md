# 题目信息

# [CERC2015] ASCII Addition

## 题目描述

# 题目背景

现在，如果你只是用手机的相机对着它们，智能手机应用可以即时翻译文本，甚至解决数学问题。您的工作是实现一个更简单的功能，回忆过去——添加两个作为ASCII艺术的整数。


ASCII艺术是一个字符矩阵，正好是7行高，每个字符都是点或小写字母X。

给出了A +B形式的表达式，其中A和B都是正整数。通过将所有的表达式字符（A和B的数字以及符号）作为7 5个矩阵，将这些矩阵转换成ASCII艺术，并将矩阵与单个字符的单个列串联在连续的各个矩阵之间。对应于数字和+符号的精确矩阵如下：

![](https://cdn.luogu.org/upload/pic/16222.png)

给定一个ASCII艺术来表达A+B的形式，找到加法的结果并用ASCII艺术形式写出。

## 样例 #1

### 输入

```
....x.xxxxx.xxxxx.x...x.xxxxx.xxxxx.xxxxx.......xxxxx.xxxxx.xxxxx
....x.....x.....x.x...x.x.....x.........x...x...x...x.x...x.x...x
....x.....x.....x.x...x.x.....x.........x...x...x...x.x...x.x...x
....x.xxxxx.xxxxx.xxxxx.xxxxx.xxxxx.....x.xxxxx.xxxxx.xxxxx.x...x
....x.x.........x.....x.....x.x...x.....x...x...x...x.....x.x...x
....x.x.........x.....x.....x.x...x.....x...x...x...x.....x.x...x
....x.xxxxx.xxxxx.....x.xxxxx.xxxxx.....x.......xxxxx.xxxxx.xxxxx```

### 输出

```
....x.xxxxx.xxxxx.xxxxx.x...x.xxxxx.xxxxx
....x.....x.....x.x.....x...x.x.........x
....x.....x.....x.x.....x...x.x.........x
....x.xxxxx.xxxxx.xxxxx.xxxxx.xxxxx.....x
....x.x.........x.....x.....x.....x.....x
....x.x.........x.....x.....x.....x.....x
....x.xxxxx.xxxxx.xxxxx.....x.xxxxx.....x```

# AI分析结果

### 综合分析与结论
这些题解的核心思路均是将输入的ASCII艺术形式的数字和符号转换为十进制数字进行加法运算，再将结果转换回ASCII艺术形式输出。主要差异在于数字识别和转换的方式。
1. **思路**：
    - **直接打表匹配**：多数题解采用此方法，将0 - 9和“+”的ASCII艺术形式按行或整体打表，通过逐行或整体对比输入与表中的内容来识别数字。
    - **二进制转换**：将ASCII艺术矩阵转成二进制，再转成十进制，通过与预存的十进制数匹配来识别数字。
    - **特征判断**：通过分析字符的大小、左右两边的大小、左下角的大小等特征来识别数字。
2. **算法要点**：
    - **输入处理**：按行读取输入的7行ASCII艺术，通常需要在每行末尾补点以方便处理。
    - **数字识别**：从输入中按固定宽度（一般为6，含间隔）截取字符块，通过打表匹配、二进制转换或特征判断等方式识别为数字或符号。
    - **加法运算**：识别出加号前后的数字并进行加法运算。
    - **结果输出**：将运算结果逐位转换为ASCII艺术形式输出，注意数字间的间隔。
3. **解决难点**：
    - **数字识别**：准确识别每个数字的ASCII艺术形式，避免误判，尤其是相似数字的区分。
    - **间隔处理**：处理好数字和符号间的间隔，确保输入读取和输出格式正确。

### 题解推荐
#### 作者：opened (5星)
- **关键亮点**：代码简洁高效，通过巧妙的打表和指针操作实现快速的数字识别和转换。利用栈和递归实现数字的倒序转正序输出，代码可读性强。
- **个人心得**：强调通过自主思考和实践来挖掘题目能量，提出了代码长度、编码时间等挑战目标。
```cpp
string s[7],sum[7],num[11]={ 
"xxxxx.x...x.x...x.x...x.x...x.x...x.xxxxx.",
"....x.....x.....x.....x.....x.....x.....x.",
"xxxxx.....x.....x.xxxxx.x.....x.....xxxxx.",
"xxxxx.....x.....x.xxxxx.....x.....x.xxxxx.",
"x...x.x...x.x...x.xxxxx.....x.....x.....x.",
"xxxxx.x.....x.....xxxxx.....x.....x.xxxxx.",
"xxxxx.x.....x.....xxxxx.x...x.x...x.xxxxx.",
"xxxxx.....x.....x.....x.....x.....x.....x.",
"xxxxx.x...x.x...x.xxxxx.x...x.x...x.xxxxx.",
"xxxxx.x...x.x...x.xxxxx.....x.....x.xxxxx.",
"........x.....x...xxxxx...x.....x.........",
};
int pos;
stack<int>a;
inline char r(){
    string ss;
    for(int i=0;i<7;i++) ss+=s[i].substr(pos,6);
    pos+=6;
    for(int i=0;i<10;i++)
        if(ss==num[i]) return i+'0'; 
    return 0;
}
inline int read(){
    int x=0;char ch=r();
    while(!ch) ch=r();
    for(x=ch&15,ch=r();ch;ch=r()) x=x*10+(ch&15);
    return x;
}
void change(int ans,int end=1){
    if(ans>9) change(ans/10);
    for(int i=0;i<7;i++)
        sum[i]+=num[ans%10].substr(i*6,5+end); 
}
```
核心实现思想：`r`函数通过指针`pos`逐行截取长度为6的字符块与打表的`num`数组匹配识别数字。`read`函数利用`r`函数实现类似快读的功能读取数字。`change`函数通过递归将整数答案转换为横行答案表。

#### 作者：Gu_Ren (4星)
- **关键亮点**：创新性地将ASCII艺术矩阵转换为二进制再转十进制，通过与预存的十进制数匹配识别数字，思路独特，对矩阵的处理方式较为新颖。
```cpp
int c[11]={
    1363481695,272696336,1098712095,276628511,276632657,276566111,1367085151,272696351,1367151711,276632671,75251968
};
string e[10]={
    ("xxxxxx...xx...xx...xx...xx...xxxxxx"),
    ("....x....x....x....x....x....x....x"),
    ("xxxxx....x....xxxxxxx....x....xxxxx"),
    ("xxxxx....x....xxxxxx....x....xxxxxx"),
    ("x...xx...xx...xxxxxx....x....x....x"),
    ("xxxxxx....x....xxxxx....x....xxxxxx"),
    ("xxxxxx....x....xxxxxx...xx...xxxxxx"),
    ("xxxxx....x....x....x....x....x....x"),
    ("xxxxxx...xx...xxxxxxx...xx...xxxxxx"),
    ("xxxxxx...xx...xxxxxx....x....xxxxxx"),
};
for (int i=1;i<=7;i++){
    cin>>s[i];
    s[i]=s[i]+'.';
}
int n=s[1].length();
for (int i=1;i<=7;i++)
for (int j=0;j<n;j++){
    a[i][j]=(s[i][j]=='x');
}
t=1;
for (int i=0;i+6<=n;i+=6){
    x=1;
    for (int j=1;j<=7;j++){
        for (int k=i;k<i+6;k++){
            b[num]+=x*a[j][k];
            x=x*2;
        }
    }
    for (int j=0;j<10;j++)
    if (b[num]==c[j]){
        ans[t]=ans[t]*10+j;
        break;
    }
    if (b[num]==75251968) t++;
    num++;
}
```
核心实现思想：先将每行输入字符串末尾补点，再将字符“x”“.”转为二进制存入二维数组`a`。按宽度6截取矩阵块转为十进制数，与预存的`c`数组匹配得到对应的数字。

#### 作者：Enstein (4星)
- **关键亮点**：思路清晰，详细地分步讲解了从读入、转换到输出的全过程，代码结构分明，通过`string`类型的操作和打表匹配实现功能，易于理解。
```cpp
string shu[15]={
"xxxxxx...xx...xx...xx...xx...xxxxxx",
"....x....x....x....x....x....x....x",
"xxxxx....x....xxxxxxx....x....xxxxx",
"xxxxx....x....xxxxxx....x....xxxxxx",
"x...xx...xx...xxxxxx....x....x....x",
"xxxxxx....x....xxxxx....x....xxxxxx",
"xxxxxx....x....xxxxxx...xx...xxxxxx",
"xxxxx....x....x....x....x....x....x",
"xxxxxx...xx...xxxxxxx...xx...xxxxxx",
"xxxxxx...xx...xxxxxx....x....xxxxxx",
".......x....x..xxxxx..x....x......."};
void read(){
    for(int i=1;i<=7;i++) cin>>ss[i];
}
void change(){
    int ci=0;
    for(int i=1;i<=7;i++){
        ci=0;
        int kkk=ss[i].length();
        for(int j=0;j<kkk;j+=6){
            ci++;
            a[ci]+=ss[i].substr(j,5);
        }
    }
    for(int i=1;i<=ci;i++){
        for(int j=0;j<11;j++){
            if(shu[j]==a[i]){
                a1[++k1]=j;
                break;
            }
        }
    }
    int flag=0;
    int ans1=0,ans2=0;
    for(int i=1;i<=k1;i++){
        if(a1[i]==10) flag=1;
        if(a1[i]!=10&&flag==0) ans1=ans1*10+a1[i];
        if(flag==1&&a1[i]!=10) ans2=ans2*10+a1[i];
    }
    print(ans1+ans2);
}
```
核心实现思想：`read`函数读入7行字符串。`change`函数通过`substr`函数按宽度6截取字符块存入`a`数组，与`shu`数组匹配识别数字，根据识别出的加号位置分别计算两个加数，最后调用`print`函数输出结果。

### 最优关键思路或技巧
1. **打表匹配**：多数题解采用打表方式，将数字和符号的ASCII艺术形式预存，通过直接匹配识别，简单直观，代码实现难度较低。如`opened`的题解，通过精心设计的打表和指针操作，使代码简洁高效。
2. **数据转换**：`Gu_Ren`题解中采用的二进制转换思路，将二维矩阵转换为一维二进制再转十进制，利用十进制数的唯一性匹配，减少了直接字符匹配的复杂度，是一种巧妙的数据处理方式。

### 可拓展之处
此类题目属于模拟题，关键在于对给定规则的准确理解和实现。相似类型的题目通常涉及特定格式数据的解析、转换与处理，例如将其他特殊形式表示的数字进行运算，或者对特定格式的图形进行变换等。解题套路一般是先分析数据格式特点，设计合适的数据结构存储，再实现转换、运算及输出的逻辑。

### 相似知识点洛谷题目推荐
1. **P1080 [NOIP2012 提高组] 国王游戏**：涉及高精度计算和数据处理，与本题类似，需要对输入数据进行特定规则的解析和运算。
2. **P1134 阶乘问题**：考察对数字规律的分析和处理，类似于本题对ASCII艺术数字规律的挖掘和运用。
3. **P1009 [NOIP1998 普及组] 阶乘之和**：同样涉及数字运算和结果处理，要求按照特定格式输出，与本题在输入输出处理上有相似之处。

### 个人心得摘录与总结
1. **opened**：强调自主思考和实践，以代码长度、编码时间等作为挑战目标，有助于提升代码能力和思维能力。
2. **Gu_Ren**：从Pascal转到C++后做此题，调了一上午，提醒注意语法转换和代码调试。
3. **Mr_浓氨**：认为计算a + b是最难部分，反映出对复杂逻辑实现的挑战，需注重运算逻辑的正确性。 

---
处理用时：68.21秒
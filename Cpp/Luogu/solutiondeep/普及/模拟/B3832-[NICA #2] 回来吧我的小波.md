# 题目信息

# [NICA #2] 回来吧我的小波

## 题目背景

小波我错了，你快回来吧！

## 题目描述

给定一个仅包含数字 $1,2,3,4,5,6,7,8,9$ 的数字串 $s$，你要选择两个不交区间 $[l_1,r_1],[l_2,r_2](1\le l_1\le r_1<l_2\le r_2\le |s|)$，设 $[l_1,r_1]$ 区间串取出来的数字为 $x$，$[l_2,r_2]$ 区间串取出来的数字为 $y$，要求 $x|y$。如果存在这样两个不交区间，那么我们称数字串 $s$ 是好的。（这里的 $|$ 表示整除，你可以理解为 $x$ 为 $y$ 的一个因数）

现在给定一个仅包含数字 $1,2,3,4,5,6,7,8,9$ 的数字串 $S$，询问它有多少个子串是好的。（这里的子串**不要求**是本质不同的）

## 说明/提示

#### 样例1解释

只有一个好串 `327`，你可以选择两个不交区间 $[1,1],[2,3]$，取出来的数字分别是 $3$ 和 $27$，显然 $3$ 是 $27$ 的一个因数，所以这个串是好串。

其他子串 `3`，`2`，`7`，`32`，`27` 都不是好的，因为不存在这样的两个不交区间。

#### 样例2解释

共有 $12$ 个好串，分别为 `114514`、`11451`、`1145`、`114`、`11`、`14514`、`1451`、`145`、`14`、`4514`、`514`、`14`。（注意到里面有两个 `14`，但是由于它们位置不同，我们还是认为这是两个不同的子串）

#### 数据范围

对于所有数据，保证 $2\le |S|\le 10^6$。

## 样例 #1

### 输入

```
327```

### 输出

```
1```

## 样例 #2

### 输入

```
114514```

### 输出

```
12```

# AI分析结果

• 综合分析与结论：
    - 思路：所有题解都基于抽屉原理，发现长度≥10的子串必然有重复数字，一定是好串；对于长度≤9的子串，采用暴力枚举所有可能的两个不交区间来判断是否满足整除关系。
    - 算法要点：先通过数学方法计算长度≥10的子串数量，再暴力枚举长度≤9的子串判断其是否为好串，最后将两者数量相加得到结果。
    - 解决难点：原暴力枚举所有子串及区间的时间复杂度为O(|S|^7)，过高无法通过。利用抽屉原理，将长度≥10的子串统一处理，只对长度≤9的子串暴力枚举，优化为O(|S|×g^6)（g = 9），从而降低时间复杂度。
    - 整体题解质量：大部分题解思路清晰，但代码实现风格各异，且优化程度和可读性上没有特别突出的。综合考虑，没有题解能达到4星及以上。
• 通用建议与扩展思路：
    - 关键思路或技巧：利用抽屉原理减少暴力枚举范围是核心技巧。在代码实现上，注意合理定义函数计算区间数值、判断子串是否为好串，以提高代码可读性和复用性。
    - 同类型题或类似算法套路：此类题目通常涉及字符串子串相关性质判断，可先寻找子串长度与性质的关系（如本题利用抽屉原理确定长度≥10子串的性质），缩小暴力枚举范围，降低时间复杂度。
    - 推荐题目：
        - P1088 [NOIP2004 普及组] 火星人，涉及字符串的排列与查找。
        - P1308 [NOIP2011 普及组] 统计单词数，关于字符串匹配与计数。
        - P1593 因子和，与整除关系相关的数论问题。 

---
处理用时：14.39秒
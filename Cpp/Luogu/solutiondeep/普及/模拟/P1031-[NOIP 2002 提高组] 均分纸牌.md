# 题目信息

# [NOIP 2002 提高组] 均分纸牌

## 题目描述

有 $N$ 堆纸牌，编号分别为 $1,2,\ldots,N$。每堆上有若干张，但纸牌总数必为 $N$ 的倍数。可以在任一堆上取若干张纸牌，然后移动。

移牌规则为：在编号为 $1$ 堆上取的纸牌，只能移到编号为 $2$ 的堆上；在编号为 $N$ 的堆上取的纸牌，只能移到编号为 $N-1$ 的堆上；其他堆上取的纸牌，可以移到相邻左边或右边的堆上。

现在要求找出一种移动方法，用最少的移动次数使每堆上纸牌数都一样多。

例如 $N=4$ 时，$4$ 堆纸牌数分别为 $9,8,17,6$。

移动 $3$ 次可达到目的：

- 从第三堆取 $4$ 张牌放到第四堆，此时每堆纸牌数分别为 $9,8,13,10$。
- 从第三堆取 $3$ 张牌放到第二堆，此时每堆纸牌数分别为 $9,11,10,10$。
- 从第二堆取 $1$ 张牌放到第一堆，此时每堆纸牌数分别为  $10,10,10,10$。


## 说明/提示

对于 $100\%$ 的数据，$1  \le  N  \le  100$，$1 \le  A_i  \le 10000$。

**【题目来源】**

NOIP 2002 提高组第一题

## 样例 #1

### 输入

```
4
9 8 17 6
```

### 输出

```
3
```

# AI分析结果

### 综合分析与结论
- **思路方面**：所有题解均围绕通过贪心策略解决均分纸牌问题。先计算纸牌的平均数，然后从左到右遍历每堆纸牌，根据当前堆纸牌数与平均数的关系，决定是将多余纸牌移到下一堆还是从下一堆获取缺少的纸牌。
- **算法要点**：核心在于利用贪心思想，每次处理当前堆时，仅考虑与下一堆的交互，不影响后续操作的最优性。时间复杂度均为O(n)，因为只需遍历一次纸牌堆数组。
- **解决难点**：部分题解关注到贪心策略的正确性证明。如通过分治思想证明相邻两堆牌最优策略是一堆向另一堆一次性给牌，不存在来回给牌情况；也有通过图论角度，将问题转化为有向图，证明图无环，从而说明贪心策略可行。

### 所选的题解
#### 作者：monell (5星)
- **关键亮点**：不仅给出线性贪心算法，还给出分治算法，并详细证明线性算法的正确性。通过将分治算法得到的最优解用图建模，证明线性算法与分治算法得到的最优解等价，逻辑严谨。
- **个人心得**：无

```cpp
// 线性算法核心代码
// 从左到右遍历数组
for (int i = 0; i < n - 1; ++i) {
    if (a[i] > avg) {
        a[i + 1] += a[i] - avg;
        ans++;
    } else if (a[i] < avg) {
        a[i + 1] += a[i] - avg;
        ans++;
    }
}
```
核心实现思想：遍历数组，若当前堆纸牌数大于平均数，将多余部分移到下一堆；若小于平均数，从下一堆获取缺少部分，每次操作移动次数加1。

#### 作者：ProtectEMmm (4星)
- **关键亮点**：详细证明贪心策略的正确性。通过引理证明相邻两堆牌最优策略是一堆向另一堆一次性给牌，再从图论角度将问题转化为有向图，证明图无环，解释了贪心算法中允许出现负数（贷款思路）不影响正确性的原因。
- **个人心得**：无

```cpp
// 贪心算法核心代码
for (int i = 1; i + 1 <= n; ++i) {
    if (arr[i]!= average) {
        ans++, arr[i + 1] += arr[i] - average;
    }
}
```
核心实现思想：遍历纸牌堆数组，若当前堆纸牌数不等于平均数，对下一堆纸牌数进行相应调整，移动次数加1。

#### 作者：Starlight237 (4星)
- **关键亮点**：简洁明了地阐述贪心思路，指出不管当前牌堆纸牌数大于或小于平均值，下一堆纸牌数都会增加当前牌数与平均数的差值（负数即表示从下一堆借纸牌），优化了代码实现，去除将当前牌数修改为平均数的不必要操作。
- **个人心得**：无

```cpp
// 核心代码
for (int i = 0; i < n - 1; ++i)
    if (a[i]!= avg)a[i + 1]+=a[i] - avg,++m;
```
核心实现思想：遍历纸牌堆数组，当当前堆纸牌数与平均数不同时，调整下一堆纸牌数并增加移动次数。

### 最优关键思路或技巧
贪心策略是解决本题的关键，每次只考虑当前堆与下一堆的关系，从左到右依次调整，保证局部最优解可达成全局最优解。同时，在代码实现上，通过合理利用当前堆与平均数的差值直接调整下一堆，避免不必要的中间操作，优化代码效率。

### 可拓展之处
此类问题属于序列上的贪心优化问题，类似套路可用于解决一些具有顺序性、局部决策影响全局且满足贪心选择性质的问题。例如环形均分纸牌问题（如洛谷P4016负载平衡问题），可通过寻找断点转化为线性均分纸牌问题求解。

### 推荐题目
- [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)：通过贪心策略安排接水顺序，使总等待时间最少，与本题类似，需根据局部最优决策达到全局最优。
- [P1094 纪念品分组](https://www.luogu.com.cn/problem/P1094)：利用贪心思想对纪念品进行分组，使分组数量最少，同样是在序列上进行贪心决策。
- [P1937 [USACO10MAR]Barn Allocation G](https://www.luogu.com.cn/problem/P1937)：通过对区间进行贪心选择，解决牛舍分配问题，与本题思路类似，在一定条件下通过局部最优选择达到全局最优。 

---
处理用时：34.65秒
# 题目信息

# 洛谷团队训练 VS 传统团队训练

## 题目背景

“在中学的信息学教育领域，[洛谷](/)无疑是一个相当受欢迎的辅助网站。同时有百余所学校正在通过洛谷进行信息学竞赛（以后简称 OI）的教育。洛谷之所以如此受欢迎，是因为洛谷创新的将 OI 教育的几乎每一个环节都搬到了线上，无论是学校的竞赛教练还是学生，均可以仅仅使用这一个网站来进行练习，提升自己的能力。”


——摘自《厦门中小学教育科学研究》，2015 年 2 月号。


## 题目描述

XX 中学的两位信息组的教练正在为学校信息组是否应当将洛谷作为主要的训练工具而争论不休，最后决定采取一个量化的办法来决定是否迁移。

该中学的原来训练方法是，在机房的教师机里面用 cena 装载好测试数据，装载数据所需要 $T_a$ 时间，每一道题目都要装载。学生写好代码后，可以跑到教师机上收取程序并进行评测。但由于需要往返的路程，因此每跑一次就要浪费 $T_b$ 时间。所以也允许学生在自己的机子上装载好测试数据，可以根据自己的需要选择装载的题目，这需要花费和在教师机装载数据一样的时间 $T_a$，但是每次评测花费的时间就减少为 $T_c$。此外，该中学可能会用 Excel 记录各位同学的训练情况，如果某位同学的某道题的得分高于表格里的记录，那就会花费 $T_d$ 时间将这个成绩更新，否则就不必费那个事了，如果之前没有提交过这道题视为表格记录的程序为 $0$ 分。

而在洛谷中，只需要将题目和测试数据上传到洛谷，花费 $T_a$ 时间。每次评测学生只需花费 $T_c$ 时间即可。记录成绩？那是洛谷的事儿，一提交完就帮你整理好了表格根本不费时间。

看起来可以省下不少时间吧。。然而，支持传统训练方法的教练认为，洛谷并非 $100 \%$ 的稳定，在有的情况会无法提供服务，因此首先要将洛谷的耗时除以它的可用度（一个小于 $100\%$ 的数字 $A\%$）并去掉小数点。又因为传统观念不易纠正，总是有不信任将题目数据交给洛谷这样的想法（kkksc03：怪我咯？），因此使用洛谷的耗时还要再加上一个罚时 $H$ 以做公平比较。

现在给出该中学的训练情况，希望你帮两位教练分析一下到底该如何选择。

## 说明/提示

**【样例解释 #1】**

使用传统方法的话，装载 $4$ 道题目需要 $4 \times 50=200$，$2$ 号同学和 $7$ 号同学用教师机需要时分别 $30 \times 3=90$、$30 \times 4 = 120$，但是明显自己装载 cena 只需要 $50+10 \times 3=80$、$50+10 \times 4=90$ 更优。而 $3,5$ 同学则使用教师机就好，耗时 $60,30$。$2$ 号同学的前两次评测单调递增，所以额外花费 $2 \times 5=10$ 时间记录，$3$ 号同学太弱了都是 $0$ 分所以没必要记录了，$5$ 与 $7$ 各耗费 $5$ 时间。所以这种情况总时间耗时为 $200+80+90+60+30+10+5+5=480$。

使用洛谷的话，装载题目耗费 $200$，$10$ 次评测共耗费 $10 \times10=100$，考虑稳定性时间为 $(200+100) / 93\% = 322$，所以最后总耗时为 $322+50=372$，所以决定使用洛谷。

**【数据范围】**

其中 $50\%$ 数据中，不需要进行成绩的 Excel 记录。

其中 $50\%$ 数据中，题目编号和学号均大于等于 $0$，小于等于 $1000$。

（这两种情况，可能会重叠）

对于 $100\%$ 的数据，保证 $1 \le n,m \le 1000$，$1 \le T_a, T_b, T_c,T_d,H \le 10000$，$1 \le R < 100000$，$0 \le \mathit{Sc}_i \le 100$，$1 \le A \le 100$，学号和题目号在 ${10}^8$ 之内。

实际上，根据超级监控颁发的证书，洛谷 2015 年第一季度可靠性（SLA）为 $99.36 \%$。同时观念也是可以改变的。

洛谷的优点很多都是不能量化的，其精华在于社区。和全国的 OIer 一起学习交流，不很好吗？

最后插一句，去年的【榨取 kkksc03】的布告依然有效，详情。

## 样例 #1

### 输入

```
4 4
501 502 503 504
2 3 5 7
50 30 10 5 93 50 1
10
501 2 10
501 2 80
501 2 70
502 3 0
502 3 0
504 5 100
503 7 0
503 7 0
503 7 0
503 7 10
```

### 输出

```
480
372
Use Luogu!
```

## 样例 #2

### 输入

```
2 3
101 102
1 2 3
70 60 50 1 80 100 0
6
101 1 100
101 2 100
101 3 100
102 1 100
102 2 100
102 3 100
```

### 输出

```
500
650
Forget it...
```

# AI分析结果

### 综合分析与结论
这些题解均围绕一道模拟题展开，核心是比较传统训练与洛谷训练的耗时。思路上，都需计算两种训练方式的时间并对比。算法要点在于处理学号和题目编号的存储与映射，因编号范围大不能直接用数组。解决难点方法多样，如离散化、哈希、map等。
从质量看，各题解思路较清晰，但在代码可读性和优化程度上有差异。

### 所选题解
- **作者：游戏的人（4星）**
    - **关键亮点**：思路清晰，详细阐述每步操作，代码注释详尽，对离散化用二分查找实现讲解细致。
    - **核心代码实现思想**：先读入数据，对题目和学号排序预处理，用二分查找离散化，计算传统和洛谷耗时并比较输出。
```cpp
#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
int n,m,ta,tb,tc,td,A,H,E,r,pr,sr,sc;
int tea,self,trad,luogu,p[1001],s[1001],score[1001][1001],jud[1001][1001];
int main()
{
    cin>>n>>m;
    for(int i=1;i<=n;i++) cin>>p[i];
    for(int i=1;i<=m;i++) cin>>s[i];
    sort(p+1,p+n+1);
    sort(s+1,s+m+1);
    cin>>ta>>tb>>tc>>td>>A>>H>>E;
    cin>>r;
    trad=ta*n;
    for(int i=1;i<=r;i++)
    {
        cin>>pr>>sr>>sc;
        pr=lower_bound(p+1,p+n+1,pr)-p;
        sr=lower_bound(s+1,s+m+1,sr)-s;
        if(sc>score[sr][pr]&&E) trad+=td,score[sr][pr]=sc;
        jud[sr][pr]++;
    }
    luogu=(n*ta+r*tc)*100/A+H;
    for(int i=1;i<=m;i++)
    {
        for(int j=1;j<=n;j++)
        {
            tea=0; self=ta;
            tea+=tb*jud[i][j];
            self+=tc*jud[i][j];
            trad+=min(tea,self);
        }
    }
    cout<<trad<<endl<<luogu<<endl;
    if(luogu<trad) cout<<"Use Luogu!";
    else cout<<"Forget it...";
}
```
- **作者：ysner（4星）**
    - **关键亮点**：利用C++的map优势，代码简洁，读入优化，对每个步骤解释详细。
    - **核心代码实现思想**：通过map离散化学号和题目编号，读入数据同时更新成绩和提交次数，计算两种训练方式耗时并比较。
```cpp
#include<cstdio>
#include<cstdlib>
#include<iostream>
#include<cstring>
#include<cmath>
#include<algorithm>
#include<map>
#define ll long long
#define re register
#define il inline
#define fp(i,a,b) for(register int i=a;i<=b;i++)
#define fq(i,a,b) for(register int i=a;i>=b;i--)
using namespace std;
map<int,int>t,x;
int n,m,r,ta,tb,tc,td,a,h,e,c,j[2005][2005]={},f[2005][2005]={};
ll ans1=0,ans2=0;
int s1,s2;
il ll gi()
{
    re ll t=1,x=0;
    re char ch=getchar();
    while((ch<'0'||ch>'9')&&ch!='-') ch=getchar();
    if(ch=='-') t=-1,ch=getchar();
    while(ch>='0'&&ch<='9') x=x*10+ch-48,ch=getchar();
    return x*t;
}
int main()
{
    n=gi();m=gi();
    fp(i,1,n)
        t[gi()]=i;
    fp(i,1,m)
        x[gi()]=i;
    ta=gi();tb=gi();tc=gi();td=gi();a=gi();h=gi();e=gi();r=gi();
    ans1=n*ta;ans2=n*ta;
    fp(i,1,r)
    {
        s1=gi();s2=gi();c=gi();
        s1=t[s1];s2=x[s2];j[s1][s2]++;//更新交题次数
        if(e&&c>f[s1][s2]) f[s1][s2]=c,ans1+=td;
    }
    fp(i,1,n)
        fp(j1,1,m)
        {
            int p=tb*j[i][j1];
            int z=ta+tc*j[i][j1];
            if(p>z) ans1+=z;
            else ans1+=p;
        }
    ans2=(ll)((ans2+r*tc)/(a/100.0))+h;
    printf("%lld\n%lld\n",ans1,ans2);
    if(ans1<=ans2) printf("Forget it...\n");
    else printf("Use Luogu!\n");
    return 0;
}
```
- **作者：SIXIANG32（4星）**
    - **关键亮点**：提供map和哈希两种解法，并对比两者时间效率，对哈希表原理和实现讲解详细。
    - **核心代码实现思想（map部分）**：通过map离散化，读入数据更新成绩和提交次数，计算两种训练方式耗时并比较。
```cpp
#include<iostream>
#include<algorithm>
#include<map>
using namespace std;
int ta,tb,tc,td,a,h,e;
map<int,int>M1,M2;
int score[1010][1010];
int num[1010][1010];
int main()
{
    int n,m,r;
    cin>>n>>m;
    for(int p=1,x;p<=n;p++)
        cin>>x,M1[x]=p;
    for(int p=1,x;p<=m;p++)
        cin>>x,M2[x]=p;
    cin>>ta>>tb>>tc>>td>>a>>h>>e;
    cin>>r;
    int luogu=(n*ta+r*tc)/(a/100.0)+h;
    int chuto=n*ta;
    for(int p=1,x,y,z;p<=r;p++)
    {
        cin>>x>>y>>z;
        num[M2[y]][M1[x]]++;
        if(e&&score[M2[y]][M1[x]]<z)
            score[M2[y]][M1[x]]=z,chuto+=td;
    }
    for(int p=1;p<=m;p++)
        for(int i=1;i<=n;i++)
            chuto+=min(num[p][i]*tb,ta+num[p][i]*tc);
    cout<<chuto<<endl<<luogu<<endl;
    if(luogu<chuto)cout<<"Use Luogu!"<<endl;
    else cout<<"Forget it..."<<endl;
}
```

### 最优关键思路或技巧
1. **数据映射**：利用map进行学号和题目编号的离散化，简洁高效解决大数据范围存储问题。
2. **模拟计算**：按题目描述模拟两种训练方式的各个环节，如装载数据、评测、更新成绩等，准确计算耗时。

### 可拓展之处
同类型题常涉及复杂场景模拟与数据处理，如不同系统的任务调度、多种方案的资源分配等。类似算法套路为处理大编号数据时考虑离散化、哈希等映射方法，模拟过程中注意理清各步骤逻辑关系，准确计算各部分耗时或代价。

### 推荐题目
1. **P1036 [NOIP2002 普及组] 选数**：涉及数据处理与条件判断，需模拟选数过程。
2. **P1423 小玉在游泳**：通过模拟小玉游泳过程，锻炼逻辑思维和代码实现能力。
3. **P1909 [NOIP2016 普及组] 买铅笔**：模拟购买铅笔的不同方案，比较并选择最优方案。 

---
处理用时：64.12秒
# 题目信息

# [JSOI2008] 完美的对称

## 题目描述

在峰会期间，必须使用许多保镖保卫参加会议的各国代表。代表们除了由他自己的随身保镖保护外，组委会还指派了一些其他的特工和阻击手保护他们。为了使他们的工作卓有成效，使被保卫的人的安全尽可能得到保障，保镖被分配到被保护人的各个方向。

保镖的最佳站立位置应该是这样的：被保护人应站在所有保镖的对称中心。但是，只要被保护人一移动，保镖就很难根据要人的新位置调整位置。大多数的特工都很难对此作出实时调整。

因此，安全部长决定将该过程逆转一下，保镖先站好自己的位置，然后要人在他们的对称中心找到合适的位置。如果要人随便走动，我们就对他的安全不必负责。

你的工作是使这个过程自动操作。给出一组 $N$ 个点（保镖的位置），你要找出它们的对称中心 $S$，在这儿被保护人将相对安全。下面以此类推。

首先我们给定一点 $A$ 以及对称中心 $S$，点 $A'$ 是点 $A$ 以 $S$ 为对称中心形成的像点，即点 $S$ 是线段 $AA'$ 的对称中心。

点阵组（$X$）以 $S$ 为中心的像点是由每个点的像点组成的点阵组。$X$ 是用来产生对称中心 $S$ 的，即点阵 $X$ 以 $S$ 为中心的像点的集合即为点阵 $X$ 本身。

![](https://cdn.luogu.com.cn/upload/image_hosting/trym53o8.png)


## 说明/提示

JSOI2008 第二轮。


## 样例 #1

### 输入

```
8

1 10

3 6

6 8

6 2

3 -4

1 0

-2 -2

-2 4

```

### 输出

```
V.I.P. should stay at (2.0,3.0).```

# AI分析结果

• 综合分析与结论：这些题解的核心思路均围绕寻找并验证保镖位置点集的对称中心展开。算法要点在于通过排序确定点的配对关系，利用中点坐标公式计算潜在对称中心，并验证所有配对点的中点是否一致。解决难点主要在于如何高效地找到对称中心并进行全面验证。多数题解采用排序后配对验证的方式，部分题解在排序方式、验证细节或代码实现上略有差异。
- 作者“盖矣斌峥”：4星
  - 关键亮点：思路清晰，代码简洁明了。先按y坐标从小到大排序，通过遍历配对点计算中点，并判断所有中点是否一致，同时考虑了n为奇数的情况。
  - 重点代码核心实现思想：定义结构体存储点坐标，通过cmp函数按y坐标排序，遍历排序后的点集，利用中点公式计算配对点中点并验证。
```cpp
struct point{
    double x,y;
}a[20005];
int n;
bool cmp(point &x,point &y)
{
    if(x.y==y.y)return x.x<y.x;
    return x.y<y.y;
}
int main()
{
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
        scanf("%lf%lf",&a[i].x,&a[i].y);
    sort(a+1,a+n+1,cmp);
    point t;
    t.x=(a[1].x+a[n].x)/2.0;
    t.y=(a[1].y+a[n].y)/2.0;
    for(int i=1;i<=(n+1)/2;i++)
    {
        point tmp;
        tmp.x=(a[i].x+a[n-i+1].x)/2.0;
        tmp.y=(a[i].y+a[n-i+1].y)/2.0;
        if(t.x!=tmp.x||t.y!=tmp.y){
            printf("This is a dangerous situation.");
            return 0;
        }
    }
    printf("V.I.P. should stay at (%.1f,%.1f).",t.x,t.y);
    return 0;
}
```
- 作者“LJY_ljy”：4星
  - 关键亮点：对排序的必要性进行了详细的数学分析，逻辑严谨。代码实现上结构清晰，将主要逻辑封装在init函数中，便于检查和理解。
  - 重点代码核心实现思想：定义结构体存储点坐标，通过cmp函数按y坐标排序，先计算最小和最大坐标点的中点作为潜在对称中心，再遍历其他配对点验证中点是否与潜在对称中心一致。
```cpp
struct node {
    int x, y; 
} a[20200];

int cmp(node p,node q) { 
    if(p.y == q.y) return p.x < q.x; 
    return p.y < q.y;
} 

void init() { 
    int i, j;
    double tx, ty, px, py;
    cin >> n; 
    for(i = 1; i <= n; i++) 
        cin >> a[i].x >> a[i].y;
    sort(a + 1, a + n + 1, cmp);
    tx=(a[1].x + a[n].x + (0.0))/2;
    ty=(a[1].y + a[n].y + (0.0))/2; 
    for(i = 1,j = n;i <= j; i++,j--) { 
        px = (a[i].x + a[j].x + (0.0))/2;
        py = (a[i].y + a[j].y + (0.0))/2;
        if(px!= tx || py!= ty) {
            printf("This is a dangerous situation!\n"); 
            return;
        }
    }
    cout<<"V.I.P. should stay at ("<<fixed<<setprecision(1)<<tx<<","<<fixed<<setprecision(1)<<ty<<")."<<endl; 
}
```
- 作者“YitsuHolo”：4星
  - 关键亮点：先通过取横纵坐标极限的中点找到潜在对称中心，再对所有点排序后以O(n)时间复杂度验证，整体思路清晰，对边界情况（保镖为单数）处理得当。
  - 重点代码核心实现思想：定义结构体存储点坐标，通过cmp1函数按横、纵坐标排序，先计算极限点的中点作为潜在对称中心，再遍历排序后的点集验证配对点中点与潜在对称中心是否一致。
```cpp
struct node
{
    double x,y;
};
node point[20010];
int n;
node mid;
double maxx=-10000000,maxy=-10000000,minx=10000000,miny=10000000;

bool cmp1(node a,node b)
{
    if(a.x>=b.x+eps || a.x<=b.x-eps)
        return a.x<b.x;
    else
        return a.y<b.y;
}
int main()
{
    scanf("%d",&n);
    double xx,yy;
    for(int i=1;i<=n;i++)
    {
        scanf("%lf%lf",&xx,&yy);
        maxx=max(maxx,xx);
        maxy=max(maxy,yy);
        minx=min(minx,xx);
        miny=min(miny,yy);
        point[i].x=xx;
        point[i].y=yy;
    }
    mid.x=(minx+maxx)/2;
    mid.y=(miny+maxy)/2;
    sort(point+1,point+n+1,cmp1);
    for(int i=1;i<=n/2+n%2;i++)
    {
        double tx1=point[i].x;
        double ty1=point[i].y;
        double tx2=point[n+1-i].x;
        double ty2=point[n+1-i].y;
        if( (tx1+tx2)/2 < mid.x-eps || (tx1+tx2)/2 > mid.x+eps || (ty1+ty2)/2 < mid.y-eps || (ty1+ty2)/2 > mid.y+eps )
        {
            printf("This is a dangerous situation!");
            return 0;
        }
    }
    printf("V.I.P. should stay at (%.1lf,%.1lf).",mid.x,mid.y);
    
    return 0;
}
```
• 最优关键思路或技巧：利用排序确定点的配对关系，通过配对点计算中点并验证所有中点是否一致来确定对称中心，这种方法简洁高效。同时，注意处理n为奇数时的边界情况。
• 可拓展之处：此类题目属于几何中点对称相关问题，类似套路可用于解决其他几何图形对称中心、对称轴相关问题，或在平面点集问题中寻找特殊点。
• 相似知识点洛谷题目：
  - P1084 [NOIP2012 提高组] 疫情控制
  - P1330 封锁阳光大学
  - P2016 战略游戏
• 个人心得摘录与总结：部分作者提到要注意输出格式，需保留一位小数，因此要使用double类型避免精度问题。还有作者强调排序方式和比较函数的正确性对解题的重要性。 

---
处理用时：53.61秒
# 题目信息

# 《瞿葩的数字游戏》T2-多边形数

## 题目背景

数字王国里有一类特殊的数，它们叫做多边形数。并且国王 $1$ 规定数字间的联姻只能在同为一种多边形数中进行。（请不要吐槽这个规定……）

瞿葩对这个现象十分好奇，见 $36$ 和 $10$ 这一对情侣在散步，便上前询问 $36$ 它是什么多边形数。可是 $36$ 拍拍脑门，想了想说：“我也不知道啊，你去问问国王吧。”

看来国民们并不知道自己是什么多边形数啊，国王 $1$ 急的发愁。国王 $1$ 只知道多边形数怎么计算，但是多边形数要怎么给国民做解释呢，干脆这样解释吧：可以排成正多边形的整数都是多边形数。当然多边形数可以分为三边（角）形数、四边形数（正方形数）、五边形数、六边形数……


## 题目描述

**此题为规律题，请自行寻找规律，以锻炼数学归纳能力！！**

我们拿三角形数做例子：图中的 $1$、$3$、$6$、$10$ 就是三角形数。

 ![](https://cdn.luogu.com.cn/upload/pic/1742.png) 

任务：求出 $N$ 是哪一种多边形数（假设 $N$ 是 $K$ 边形数），比如我们求出 $36$ 是三边形数和四边形数（貌似叫做三角形数和正方形数呵）。若不是多边形数，输出 Poor + 该数字。若同时是多种多边形数，输出最小的一个和第二小的一个。每个读入文件里有 $ng$ 组数据。


## 说明/提示

### 数据范围及约定

对于 $20\%$ 的数据，$1 \le K_1,K_2 \le 6$；

对于 $100\%$ 的数据， $1 \le N \le 10^6$，$1 \le ng \le 10^2$。

如果同时是多种多边形数，设 $K_1$ 为最小的 $K$，$K_2$ 为次小的 $K$。

国王 $1$：“你可以发现四边形数（正方形数）就是平方数这个规律吗？为方便理解，我给出前几个多边形数表。”（表中可以看出，正六边形不包括正中心的那个点，以此类推）

| 自然数 | $1$ | $2$ | $3$ | $4$ | $5$ | $6$ | $7$ | $8$ |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| 三角形数 | $1$ | $3$ | $6$ | $10$ | $15$ | $21$ | $28$ | $36$ |
| 正方形数 | $1$ | $4$ | $9$ | $16$ | $25$ | $36$ | $49$ | $64$ |
| 五边形数 | $1$ | $5$ | $12$ | $22$ | $35$ | $51$ | $70$ | $92$ |
| 六边形数 | $1$ | $6$ | $15$ | $28$ | $45$ | $66$ | $91$ | $120$ |


## 样例 #1

### 输入

```
2
36
1000000
```

### 输出

```
3 4
4 204
```

# AI分析结果

### 综合分析与结论
这些题解主要围绕寻找多边形数规律来判断给定数字属于哪些多边形数。思路主要分为按行和按列找规律两种，按列找规律是发现每列相邻数差值有规律，按行找规律则是通过差分得到等差数列，进而推出通项公式。算法要点在于推导出多边形数的通项公式，通过枚举列号、项数、因数等方式判断给定数字是否为多边形数，并找出最小的两个多边形数。难点在于找出规律并推导出合适的通项公式，以及处理特殊情况（如 1 和 2）。

### 所选题解
- **作者：lukelin（5 星）**
    - **关键亮点**：思路清晰，通过按列考虑，发现列中每行差值规律，推导出判断多边形数的方法，代码简洁且可读性高。
    - **核心代码**：
```cpp
for (int k = 2; ; ++k) {
    if (sum + k > x) break;
    int lft = x - k;
    if (!(lft % sum)) {
        int ans = lft / sum + 2;
        if (ans >= 3) {
            if (ans < ans1 || (!ans1))
                ans2 = ans1, ans1 = ans;
            else if (ans < ans2 || (!ans2))
                ans2 = ans;
        }
    }
    sum += k; 
}
```
核心实现思想：枚举列号 `k`，计算当前列的差值总和 `sum`，判断 `x - k` 是否能被 `sum` 整除，若能则计算对应的多边形边数 `ans`，并更新最小和次小的多边形边数。

- **作者：mt19337（4 星）**
    - **关键亮点**：通过对数列进行差分分析，推导出多边形数的通项公式，然后枚举项数判断给定数字是否为多边形数，思路严谨。
    - **核心代码**：
```cpp
for (int k = 2; k <= n; k++) {
    int tpl = (n * 2 - 4 * k + 2 * k * k);
    int tpr = (k * k - k);
    if (tpl < 3 * tpr) break;
    if (tpl % tpr == 0)
        sec = fir, fir = tpl / tpr;
}
```
核心实现思想：枚举项数 `k`，根据通项公式计算分子 `tpl` 和分母 `tpr`，判断 `tpl` 是否能被 `tpr` 整除，若能则更新最小和次小的多边形边数。

- **作者：AlexandreLea（4 星）**
    - **关键亮点**：详细推导了多边形数的递推式和通项公式，通过枚举项数找出满足条件的多边形边数，使用优先队列存储结果，保证输出顺序。
    - **核心代码**：
```cpp
for (int n = k; n >= 2; n--) {
    if ((2 * (k + n * n - 2 * n)) % (n * (n - 1)) == 0) {
        if ((2 * (k + n * n - 2 * n)) / (n * (n - 1))!= 2) anss.push((2 * (k + n * n - 2 * n)) / (n * (n - 1)));
    }
}
```
核心实现思想：枚举项数 `n`，根据通项公式判断 `2 * (k + n * n - 2 * n)` 是否能被 `n * (n - 1)` 整除，若能则将对应的多边形边数压入优先队列。

### 最优关键思路或技巧
- 观察数列的差分规律，通过等差数列求和公式推导出多边形数的通项公式。
- 枚举列号、项数、因数等方式，利用整除判断给定数字是否为多边形数，减少不必要的计算。
- 对特殊情况（如 1 和 2）进行特判，避免错误。

### 可拓展之处
同类型题可能会涉及更高维度的图形数，如多面体数等，解题思路依然是寻找规律，推导出通项公式，通过枚举和整除判断来求解。类似算法套路可用于解决其他数列规律题，通过差分、递推等方法找出数列的通项公式。

### 推荐题目
- P1009 [阶乘之和](https://www.luogu.com.cn/problem/P1009)：考察数列求和与规律推导。
- P1035 [级数求和](https://www.luogu.com.cn/problem/P1035)：需要找出级数的规律进行求和。
- P1047 [校门外的树](https://www.luogu.com.cn/problem/P1047)：通过找规律解决区间覆盖问题。

### 个人心得摘录与总结
- **作者：AlexandreLea**：花费三个多小时推导出最终式子，强调了推导公式的重要性和耗时性。
- **作者：Miyamizu_Mitsuha**：一开始暴力枚举超时，通过优化思路，利用整除判断减少计算量，得出正确解法，说明优化算法的必要性。
- **作者：sahdsg**：做题花费三小时，中间多次出错，提醒我们做题时要仔细，不断调试和优化。 

---
处理用时：32.78秒
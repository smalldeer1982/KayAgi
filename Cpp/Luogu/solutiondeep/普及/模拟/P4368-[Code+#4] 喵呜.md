# 题目信息

# [Code+#4] 喵呜

## 题目描述

在马路边有一排整齐的 $n$ 棵樱花树，每棵树的高度都恰好为 $h$。某天，一只可爱的小猫偶然跑到树上来玩，但是这只小猫有些对樱花过敏，所以她现在想赶快离开这些樱花树。

具体来说，现在小猫位于第 $x$ 棵樱花树上高度为 $y$ 的位置，她可以通过两种跳跃来离开樱花树：

轻轻跳：向左或向右移动 $a$ 棵樱花树的同时，所在高度下降 $b$，即一次轻轻跳可以从起点移动到第 $x+a$ 或 $x-a$ 棵树上高度为 $y-b$ 的位置，注意当小猫所在高度不大于 $b$ 时不可以使用轻轻跳。

使劲跳：向左或向右移动 $a$ 棵樱花树的同时，所在高度上升 $b$，即一次使劲跳可以从起点移动到第 $x+a$ 或 $x-a$ 棵树上高度为 $y+b$ 的位置，注意当小猫所在高度大于 $h-b$ 时不可以使用使劲跳。

为了离开这片樱花树，小猫需要移动到第 $1$ 或第 $n$ 棵树上，高度为 $h$ 或 $1$ 的位置（这样她可以呼吸新鲜空气或者直接走开樱花树）。现在小猫想知道，自己最少需要多少次跳跃才能达成目标。由于她是一只可爱的小猫，所以希望由你来告诉她。


## 说明/提示

| 测试点编号 | $n,h$ 的范围 | 特殊约定 |
| :----------: | :----------: | :----------: |
|$1,2$  | $\le10$ | $b=1$ |
|$3,4$  |  $\le10$| $a=b=1$ |
|$5,6,7,8$  |$\le10$  | 无 |
|$9,10$  | $\le500$ | $b=1$ |
|  $11,12$| $\le500$ | $a=b=1$ |
|$13,14,15$  | $\le500$ | 无 |
|$16,17$  | $\le10^5$ | $h\le10$ |
|$18,19,20$  | $\le10^5$ | 无 |
| $21,22$ | $\le10^{15}$ | $h\le10$ |
| $23,24,25$ | $\le10^{15}$ | 无 |

对于所有数据，保证 $n \geq 2$，$a < n$，$b \leq h$。

Credit: https://www.luogu.org/discuss/show/38908

## 样例 #1

### 输入

```
3
5 5 3 3 2 2
5 7 3 5 2 2
5 7 4 6 1 1```

### 输出

```
1
1
1```

## 样例 #2

### 输入

```
3
5 5 3 3 3 2
5 7 1 4 2 2
5 7 1 2 1 2```

### 输出

```
-1
-1
-1```

## 样例 #3

### 输入

```
4
999999999999 999999999999 454545454545 454545454545 1 1
777777777777 777777777777 343434343434 343434343434 1 1
777777777777 999999999999 343434343434 454545454545 1 1
999999999999 777777777777 454545454545 343434343434 1 1```

### 输出

```
454545454544
343434343433
-1
-1```

# AI分析结果

### 综合分析与结论
这些题解大多认为本题需用数学方法解决，暴力和搜索方法因数据范围大不适用。核心思路是先判断能否到达四个顶点，条件为横、纵坐标差值分别是 $a$、$b$ 的整数倍，且到达横、纵坐标所需步数差为偶数；再计算到达四个顶点的最小步数，取四个方向步数中的最小值。

### 所选题解
- **作者：Rosemary_dream（5星）**
    - **关键亮点**：思路清晰，结合图形详细解释确定方向和步数的方法，代码注释丰富，可读性强。
    - **重点代码**：
```cpp
(!(R%a))?m[0][0]=x/a:m[0][0]=-1;
(!(x%a))?m[0][1]=R/a:m[0][1]=-1;
(!(U%b))?m[1][0]=y/b:m[1][0]=-1;
(!(y%b))?m[1][1]=U/b:m[1][1]=-1;
for(register int i=0;i<=1;i++){
    for(register int j=0;j<=1;j++){
        if((~m[0][i])&&(~m[1][j])&&(m[1][j]-m[0][i])%2==0){
            ll temp=max(m[1][j],m[0][i]);
            if(ans>temp||!(~ans)) ans=temp;
        }
    }
}
```
    - **核心实现思想**：先计算向四个方向移动的步数，若不能整除则标记为 -1；再遍历四个方向的组合，若步数都合法且步数差为偶数，则更新最小步数。

- **作者：liangledong（4星）**
    - **关键亮点**：思路全面，给出不同数据范围的解题策略，对正解的条件分析详细。
    - **重点代码**：
```cpp
if((x-1)%a==0&&(h-y)%b==0){
    if(((x-1)/a-(h-y)/b)%2==0)ans=min(ans,max((x-1)/a,(h-y)/b));
}
if((x-1)%a==0&&(y-1)%b==0){
    if(((x-1)/a-(y-1)/b)%2==0)ans=min(ans,max((x-1)/a,(y-1)/b));
}
if((n-x)%a==0&&(h-y)%b==0){
    if(((n-x)/a-(h-y)/b)%2==0)ans=min(ans,max((n-x)/a,(h-y)/b));
}
if((n-x)%a==0&&(y-1)%b==0){
    if(((n-x)/a-(y-1)/b)%2==0)ans=min(ans,max((n-x)/a,(y-1)/b));
}
```
    - **核心实现思想**：分别判断能否到达四个顶点，若横、纵坐标差值分别是 $a$、$b$ 的整数倍且步数差为偶数，则更新最小步数。

- **作者：wunaidedanjuan（4星）**
    - **关键亮点**：思路清晰，将解题过程分为横纵坐标单独考虑和一起考虑两部分，有详细的图形辅助理解。
    - **重点代码**：
```cpp
if((x-1)%a==0) l=(x-1)/a;
if((n-x)%a==0) r=(n-x)/a;
if((h-y)%b==0) u=(h-y)/b;
if((y-1)%b==0) d=(y-1)/b;
if((l==-1&&r==-1)||(u==-1&&d==-1)) continue;
if(u!=-1&&l!=-1&&abs(u-l)%2==0) ans=min(ans,max(l,u));
if(u!=-1&&r!=-1&&abs(u-r)%2==0) ans=min(ans,max(r,u));
if(d!=-1&&r!=-1&&abs(d-r)%2==0) ans=min(ans,max(r,d));
if(d!=-1&&l!=-1&&abs(d-l)%2==0) ans=min(ans,max(l,d));
```
    - **核心实现思想**：先计算到达四个边界的步数，若不能到达则标记为 -1；若至少有一对相邻方向均有解，则判断相邻方向步数差是否为偶数，若是则更新最小步数。

### 最优关键思路或技巧
- **数学分析**：通过分析移动规则，得出到达目标的条件，避免暴力搜索，提高效率。
- **条件判断**：判断横、纵坐标差值是否为移动单位的整数倍，以及步数差是否为偶数，以此确定能否到达目标。
- **取最大值和最小值**：取横、纵坐标步数的最大值作为到达一个顶点的步数，再取四个顶点步数的最小值作为最终答案。

### 可拓展之处
同类型题可能会改变移动规则、目标位置或增加限制条件，但解题思路类似，都需要分析移动的数学规律，通过条件判断和计算来求解。

### 推荐题目
1. [P1002 过河卒](https://www.luogu.com.cn/problem/P1002)：考察路径规划和数学分析。
2. [P1141 01迷宫](https://www.luogu.com.cn/problem/P1141)：涉及移动规则和连通性判断。
3. [P1387 最大正方形](https://www.luogu.com.cn/problem/P1387)：需要分析图形特征和数学关系。

### 个人心得摘录与总结
- **Rosemary_dream**：多次提交因 $\LaTeX$ 问题未通过，希望能明确指出错误位置。总结：提交代码时可能会遇到格式等问题，需明确错误提示以便解决。
- **Moon_Traveller**：一开始用 1e9 作为极大值只得了 80 分，后来发现不够大，改为 1e14 才 AC。总结：处理大数据范围时，要注意数据类型和边界值的选择。 

---
处理用时：34.80秒
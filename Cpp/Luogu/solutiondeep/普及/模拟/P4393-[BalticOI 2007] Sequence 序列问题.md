# 题目信息

# [BalticOI 2007] Sequence 序列问题

## 题目描述

对于一个给定的序列 $a _ 1, \cdots, a _ n$，我们对它进行一个操作 $\text{reduce}(i)$，该操作将数列中的元素 $a _ i$ 和 $a _ {i+1}$ 用一个元素 $\max(a _ i,a _ {i+1})$ 替代，这样得到一个比原来序列短的新序列。这一操作的代价是 $\max(a _ i,a _ {i+1})$。进行 $n-1$ 次该操作后，可以得到一个长度为 $1$ 的序列。

我们的任务是计算代价最小的 $\text{reduce}$ 操作步骤，将给定的序列变成长度为 $1$ 的序列。

## 说明/提示

### 数据规模与约定

- 对于 $30\%$ 的测试数据，$n\le 500$； 
- 对于 $50\%$ 的测试数据，$n \le 20000$；
- 对于 $100\%$ 的测试数据，$1 \le n \le 10^6$，$0 \le a_i \le 10^9$。

## 样例 #1

### 输入

```
3
1
2
3```

### 输出

```
5```

# AI分析结果

### 综合分析与结论
这些题解主要围绕贪心、分治、动态规划等算法来解决序列合并最小代价问题。贪心思路是主流，核心在于让大数合并次数尽量少，通过计算每个数左右比它小的数的情况来累加代价。分治则是将问题分解为左右子区间分别处理。动态规划有区间 dp 思路，但因数据范围大可能面临数组开不下和时间复杂度高的问题。

### 所选题解
- **作者：顾淼_（5星）**
    - **关键亮点**：代码简洁，思路清晰，通过贪心思想直接累加相邻元素最大值得到结果，且对贪心思路有形象的图形解释。
    - **个人心得**：一开始没看出是贪心，后来和机房小伙伴回顾时得到满意解释。
- **作者：zhy137036（4星）**
    - **关键亮点**：先通过分治找规律，得出“一个数被计算的次数就是它两边紧挨着的比它小的数的个数”这一规律，代码实现简单易懂。
    - **个人心得**：感谢他人提醒相邻两数相等时的判断处理。
- **作者：nofind（4星）**
    - **关键亮点**：推荐相关博客辅助理解，思路清晰，通过分治思想得出最优方案，代码简洁。

### 重点代码及核心思想
#### 作者：顾淼_
```cpp
for (int i = 1; i < n; i++){
    ans += max(a[i - 1], a[i]);
}
```
核心思想：贪心策略，每个数最多被有效加两次，通过累加相邻元素最大值得到最小代价。

#### 作者：zhy137036
```cpp
for(int i=1;i<=n;i++)//枚举每个数
{
    if(i>1&&a[i-1]<a[i])//如果左边小于它
    {
        ans+=a[i];
    }
    if(i<n&&a[i+1]<=a[i])//如果右边小于等于它
    {
        ans+=a[i];
    }
}
```
核心思想：根据规律，一个数被计算的次数就是它两边紧挨着的比它小的数的个数，通过枚举每个数判断左右情况累加代价。

#### 作者：nofind
```cpp
for(int i=1;i<n;i++)ans+=max(a[i],a[i+1]);
```
核心思想：分治思想，优先合并最大值左右子区间，最后合并最大值，通过累加相邻元素最大值得到结果。

### 最优关键思路或技巧
贪心思路是解决本题的最优方法，核心是让大数合并次数尽量少，通过计算每个数左右比它小的数的情况来累加代价，时间复杂度为 $O(n)$。

### 拓展思路
同类型题可考虑元素合并有其他规则或限制的情况，如合并代价计算方式改变、合并顺序有特殊要求等。类似算法套路可应用于其他需要通过贪心策略优化合并代价的问题。

### 推荐题目
1. [P1969 [NOIP2013 提高组] 积木大赛](https://www.luogu.com.cn/problem/P1969)
2. [P5462 [X龙珠](https://www.luogu.org/problem/P5462)
3. [P1090 [NOIP2004 提高组] 合并果子](https://www.luogu.com.cn/problem/P1090)

### 个人心得总结
多位作者提到一开始对题目思路不清晰，如没看出是贪心，经过思考、和他人交流或参考博客后才得到满意解释。还有作者在调试过程中遇到 TLE、WA 等问题，通过不断尝试和优化才得到正确结果。这些经历提醒我们在解题时要多思考、多交流，遇到问题不要气馁，不断优化算法和代码。 

---
处理用时：23.93秒
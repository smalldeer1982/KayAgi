# 题目信息

# 「CROI · R1」浣熊的语言

## 题目背景

$\texttt{[2023.08.17 21:44]：}$ 为防止神奇的暴力做法通过，本题时限改为 $500\ ms$。

> 他复瞑着，沙地上的文字。\
> 词句，日忆夜诵，挥翰成风；夜幕下，星罗棋布。\
> 新意，呼之欲出，似即却离；叹气里，功败垂成。\
> 她释然一笑，潇然起身，轻叩他的后背。\
> 却见流光间，熊爪翻飞；夜风中，新词真切。\
> “你做到了……”\
> 平凡的仲夏夜，深刻的文字。\
> 忆诵的努力，闪烁着星光……

## 题目描述

小浣熊 CleverRaccoon 遵循浣熊的单词遗忘曲线，从第 $1$ 天开始背单词。

一共有 $n$ 个单词，正常情况下，第 $i$ 个单词将在第 $d_i$ 天首次学习。

同时，每个单词都会安排 $k$ 次复习，对于第 $j$ 次复习有复习点 $t_j$，表示正常情况下，每个单词在**首次学习后** $t_j$ 天都会安排这个单词的复习。换言之，第 $i$ 个单词的第 $j$ 次复习时间为第 $d_i+t_j$ 天。

另外，还有 $m$ 天为特殊情况，第 $i$ 次特殊情况发生在 $s_i$ 天。小浣熊 CleverRaccoon 在当日忘记背单词了，与当日冲突的首次学习或复习时间将顺延至第二天学习或复习。
- 若某单词的首次学习时间顺延至第二天，则该单词按**顺延后**的首次学习时间安排复习。
- 若某单词的当次复习时间顺延至第二天，则**不影响**该单词的后续复习时间。
- 若多个学习或复习时间重合于一天，则当天需要进行**多次**学习或复习。

小浣熊 CleverRaccoon 想知道：学习和复习完所有单词需要的天数、每天新学单词数、每天复习单词数。

## 说明/提示

设依次输入的单词编号分别为 $1 \sim n$。
#### 样例解释 #1
| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |
| :-: | :-: | :-: | :-: | :-: |
| $1$ | $1,2,3$ | $3$ | $-$ | $0$ |
| $2$ | $4$ | $1$ | $1,2,3$ | $3$ |
| $3$ | $5$ | $1$ | $1,2,3,4$ | $4$ |
| $4$ | $-$ | $0$ | $4,5$ | $2$ |
| $5$ | $-$ | $0$ | $5$ | $1$ |

#### 样例解释 #2
| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |
| :-: | :-: | :-: | :-: | :-: |
| $1$ (special) | $-$ | $0$ | $-$ | $0$ |
| $2$ | $1,2,3,4$ | $4$ | $-$ | $0$ |
| $3$ | $5$ | $1$ | $1,2,3,4$ | $4$ |
| $4$ | $-$ | $0$ | $1,2,3,4,5$ | $5$ |
| $5$ | $-$ | $0$ | $5$ | $1$ |

#### 样例解释 #3
| 天数 | 新学单词编号 | 新学单词数量 | 复习单词编号 | 复习单词数量 |
| :-: | :-: | :-: | :-: | :-: |
| $1$ | $1$ | $1$ | $-$ | $0$ |
| $2$ | $2$ | $1$ | $1$ | $1$ |
| $3$ (special) | $-$ | $0$ | $-$ | $0$ |
| $4$ | $3,4$ | $2$ | $1,1,2,2$ | $4$ |
| $5$ | $5$ | $1$ | $2,3,4$ | $3$ |
| $6$ | $-$ | $0$ | $3,4,5$ | $3$ |
| $7$ | $-$ | $0$ | $3,4,5$ | $3$ |
| $8$ | $-$ | $0$ | $5$ | $1$ |

#### 数据范围

**本题采用 Subtask 捆绑测试。**

对于 $100\%$ 的数据，保证 $1\leq n\leq 10^6,0\leq m\leq 200,1\leq k,d_i,t_i\leq 10^3,s_m < d_n$。保证 $d$ 单调不减，$t,s$ 单调递增。

|Subtask|$n$|$m$|$k$|$d_i$|$t_i$|Score|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|$0$|$\leq 100$|$=0$|$\leq 10$|$\leq 100$|$\leq 100$|$5$|
|$1$|$\leq 10^3$|$=0$|$\leq 100$|$\leq 10^3$|$\leq 100$|$20$|
|$2$|$\leq 100$|$\leq 10$|$\leq 10$|$\leq 100$|$\leq 100$|$15$|
|$3$|$\leq 10^3$|$\leq 100$|$\leq 100$|$\leq 10^3$|$\leq 100$|$25$|
|$4$|$\leq 10^6$|$\leq 200$|$\leq 10^3$|$\leq 10^3$|$\leq 10^3$|$35$|

## 样例 #1

### 输入

```
5 0 2
1 1 1 2 3
1 2```

### 输出

```
5
3 0
1 3
1 4
0 2
0 1```

## 样例 #2

### 输入

```
5 1 2
1 1 1 2 3
1
1 2```

### 输出

```
5
0 0
4 0
1 4
0 5
0 1```

## 样例 #3

### 输入

```
5 1 3
1 2 3 4 5
3
1 2 3```

### 输出

```
8
1 0
1 1
0 0
2 4
1 3
0 3
0 3
0 1```

# AI分析结果

### 综合分析与结论
本题是模拟题，直接模拟复杂度 $O(nk)$ 会超时，需要优化。多数题解通过开数组统计每天学习和复习单词数量，避免对每个单词单独处理，将复杂度优化到 $O(d_nk)$。

### 所选题解
- **作者：Su777（5星）**
    - **关键亮点**：思路清晰，详细阐述优化原因，代码注释丰富，复杂度分析明确。
    - **核心代码**：
```cpp
for (int i = 1; i <= n; i ++) {
    scanf("%d", &d[i]);
    new_word[d[i]] ++;
    maxd = max(maxd, d[i]);
}
for (int i = 1; i <= m; i ++) {
    new_word[s[i] + 1] += new_word[s[i]];
    new_word[s[i]] = 0;
}
for (int i = 1; i <= maxd; i ++) {
    if (new_word[i]!= 0) {
        for (int j = 1; j <= k; j ++) {
            old_word[i + t[j]] += new_word[i];
            maxd = max(maxd, i + t[j]);
        }
    }
}
for (int i = 1; i <= m; i ++) {
    new_word[s[i] + 1] += new_word[s[i]];
    new_word[s[i]] = 0;
    old_word[s[i] + 1] += old_word[s[i]];
    old_word[s[i]] = 0;
}
```
核心思想：先预处理每天新学单词数，处理特殊情况，再根据新学单词数计算复习单词数，最后再次处理特殊情况。

- **作者：yzm0325（4星）**
    - **关键亮点**：思路简洁明了，代码结构清晰，对优化思路解释详细。
    - **核心代码**：
```cpp
for(int i = 1; i <= n; i++) {
    cin >> d[i];
    nw[d[i]]++;
}
day = d[n];
for(int i = 1; i <= m; i++) cin >> s[i];
for(int i = 1; i <= k; i++) cin >> t[i];
for(int i = 1; i <= m; i++) {
    nw[s[i] + 1] += nw[s[i]];
    nw[s[i]] = 0;
}
for(int i = 1; i <= d[n]; i++)
    if(nw[i])
        for(int j = 1; j <= k; j++) {
            ow[i + t[j]] += nw[i];
            day = max(day, i + t[j]);
        }
for(int i = 1; i <= m; i++) {
    ow[s[i] + 1] += ow[s[i]];
    ow[s[i]] = 0;
}
```
核心思想：与 Su777 的题解类似，先统计新学单词数，处理特殊情况，计算复习单词数，再处理特殊情况。

### 最优关键思路或技巧
- **数组统计**：用数组统计每天新学和复习单词数量，避免对每个单词单独处理，降低复杂度。
- **预处理**：读入时预处理每天新学单词数，利用 $d$ 数组单调性确定枚举范围。
- **特殊情况处理**：遇到特殊情况将当天任务顺延到下一天。

### 拓展思路
同类型题或类似算法套路：其他模拟题，如涉及时间安排、任务调度等，可通过数组统计关键信息，避免重复计算，优化复杂度。

### 推荐题目
- P1042 乒乓球
- P1098 字符串的展开
- P1160 队列安排

### 个人心得摘录与总结
- **作者：xiaoqian02**：赛时先做 T3 调了 30 分钟（快速幂写挂），最后做本题发现是模拟题。总结是要合理安排做题顺序，仔细检查代码，避免基础错误。 

---
处理用时：22.99秒
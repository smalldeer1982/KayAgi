# 题目信息

# [USACO20OPEN] Cowntact Tracing B

## 题目描述

由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们（编号为 $1\ldots N$）的健康。

最近，Farmer John 对他的所有奶牛进行了检测，发现有一部分奶牛对该疾病的检测结果呈阳性。利用牛棚内的视频监控，他得以查看最近的奶牛之间的互动行为，结果发现奶牛们互相打招呼时，她们会握蹄，不幸的是这是一种会将疾病从一头奶牛传播给另一头奶牛的行为。Farmer John 汇总了一个添加了时间戳的清单，每条数据的形式为 $(t,x,y)$，表示在时间 $t$，奶牛 $x$ 与奶牛 $y$ 握了蹄。Farmer John 同时还知道以下信息：

（一）他的农场上恰有一头奶牛最初带有携带疾病（我们将这头奶牛称为“零号病人”）。

（二）一旦一头奶牛被感染，她会在接下来的 $K$ 次握蹄中传染疾病（可能会与同一头奶牛握蹄多次）。握蹄 $K$ 次后，她不再在此后的握蹄中传染疾病（因为此时她意识到了她会传染疾病，于是会仔细地洗蹄）。

（三）一旦一头奶牛被感染，她会持续处于被感染状态。

不幸的是，Farmer John 不知道他的 $N$ 头奶牛中的哪一头是零号病人，也不知道 $K$ 的值！基于他的数据，请帮助他缩小这些未知量的范围。保证至少有一种可能的情况。 

## 说明/提示

### 样例解释 1

唯一可能是零号病人的是奶牛 $1$。对于所有的 $K>0$，奶牛 $1$ 在时刻 $7$ 感染奶牛 $2$，而奶牛 $3$ 和奶牛 $4$ 均不会被感染。 

## 样例 #1

### 输入

```
4 3
1100
7 1 2
5 2 3
6 2 4```

### 输出

```
1 1 Infinity```

# AI分析结果

### 综合分析与结论
这些题解均采用暴力枚举的方法来解决问题。整体思路是枚举零号病人和 $K$ 的值，然后模拟感染过程，最后检查模拟结果是否与输入的感染情况一致。
- **思路要点**：
    1. 对时间戳按时间从小到大排序。
    2. 枚举零号病人和 $K$ 的值。
    3. 模拟感染过程。
    4. 检查模拟结果与输入是否一致，更新零号病人数量和 $K$ 的上下限。
- **解决难点**：
    - 准确模拟感染过程，包括感染次数的更新和传染条件的判断。
    - 处理 $K$ 的上下限，判断是否无上界。

### 所选题解
- **作者：mengleo (5星)**
    - **关键亮点**：思路清晰，代码注释详细，时间复杂度分析明确。
    - **核心代码**：
```cpp
for(int z = 1; z <= n; z++)
{
    bool f = 0;
    for(int k = 0; k <= t + 1; k++)
    {
        bool f2 = 1;
        int cs[n + 5] = {};
        memset(cs, -1, sizeof(cs));
        cs[z] = k;
        for(int i = 1; i <= t; i++)
        {
            if(cs[lst[i].x] == -1 && cs[lst[i].y] > 0)
            {
                cs[lst[i].y]--;
                cs[lst[i].x] = k;
            }
            else if(cs[lst[i].y] == -1 && cs[lst[i].x] > 0)
            {
                cs[lst[i].x]--;
                cs[lst[i].y] = k;
            }
            else if(cs[lst[i].x] >= 0 && cs[lst[i].y] >= 0)
            {
                cs[lst[i].x] = max(0ll, cs[lst[i].x] - 1);
                cs[lst[i].y] = max(0ll, cs[lst[i].y] - 1);
            }
        }
        for(int i = 1; i <= n; i++)
        {
            if((s[i - 1] == '1' && cs[i] == -1) || (s[i - 1] == '0' && cs[i]!= -1))
            {
                f2 = 0;
            }
        }
        if(f2)
        {
            mx = max(mx, k);
            mn = min(mn, k);
            f = 1;
        }
    }
    cnt += f;
}
```
    - **核心思想**：外层两层循环枚举零号病人 $z$ 和 $K$ 的值 $k$，内层循环模拟感染过程，最后检查模拟结果与输入是否一致，更新 $K$ 的上下限和零号病人数量。

### 最优关键思路或技巧
- 采用暴力枚举的方法，利用较小的数据范围解决问题。
- 对时间戳进行排序，确保模拟感染过程按时间顺序进行。

### 可拓展之处
同类型题或类似算法套路：
- 其他需要枚举多种情况并进行模拟的问题，如传染病传播的变种问题，可能会改变传播规则或增加其他限制条件。
- 可以使用更高效的算法进行优化，如二分查找来确定 $K$ 的范围。

### 推荐题目
1. [P1002 [NOIP2002 普及组] 过河卒](https://www.luogu.com.cn/problem/P1002)：枚举路径并模拟行走过程。
2. [P1149 [NOIP2008 提高组] 火柴棒等式](https://www.luogu.com.cn/problem/P1149)：枚举数字组合并检查是否满足条件。
3. [P1217 [USACO1.5] 回文质数 Prime Palindromes](https://www.luogu.com.cn/problem/P1217)：枚举数字并检查是否为回文质数。

### 个人心得
无。

---
处理用时：25.17秒
# 题目信息

# 刷题

## 题目描述

NOIP 临近了，小 A 却发现他已经不会写题了。好在现在离竞赛还有一段时间，小 A 决定从现在开始夜以继日地刷题。也就是说小 A 废寝忘食，一天二十四小时地刷题。

今天的日期（时间）是 yyyy 年 mm 月 dd 日 hh 时 MM 分，考试的时间是 yyyy2 年 mm2 月 dd2 日 hh2 时 MM2 分。这之间的所有时间小 A 都用来刷题了，那么考试之前他最多能刷多少题呢？注意哦，考虑闰年。

时间紧张小 A 只管数量不管质量。当然有的题目容易一些，有的题目难一些。根据小 A 的经验，他能一眼看出写出某一个题目需要的时间，以分钟记。

现在给出洛谷 Online Judge 的题目列表，请你挑出最多的题目使小A能在竞赛前写出来。

我们假设从远古到未来，历法的表示与现在一样。


## 样例 #1

### 输入

```
2
1
1
2007-06-23-11:59
2007-06-23-12:00```

### 输出

```
1```

# AI分析结果

这道题主要考查时间计算和贪心算法。解题关键在于准确算出给定两个时间点之间的分钟数，再对题目所需时间排序，按贪心策略选取最多可做题目。

### 综合分析
1. **思路**：多数题解先计算总刷题时间，再对题目耗时排序，按贪心策略选最多题目。计算时间有两种主流思路，一是以0000年1月1日00:00为基准，算两个时间点与基准的时间差相减；二是逐年、逐月、逐日等分别计算并通过“多退少补”调整。
2. **算法要点**：需掌握闰年判断方法，将时间各部分（年、月、日、时、分）统一转化为分钟计算。贪心算法体现在对题目按耗时从小到大排序，优先选择耗时少的题目。
3. **难点解决**：时间计算是难点，要考虑闰年、大小月等情况。通过合理设计数据结构（如存储每月天数数组）和算法逻辑（如循环计算各时间段）解决。输入处理上，用scanf可简化特定格式时间输入。

### 题解评分
1. **作者：kkksc03**：思路清晰阐述了整体解题方向及时间计算要点，但无代码，可操作性差，评3星。
2. **作者：Ousmane_Dembele**：给出详细代码和思路，包含快读代码、时间计算、排序和贪心实现，但代码中有部分错误且解释稍显繁杂，评3星。
3. **作者：wyly**：详细描述思路并给出AC代码，按时间各部分分别计算处理，但代码冗长，逻辑稍显混乱，评3星。
4. **作者：傅思维666**：清晰介绍思路，重点讲解时间处理技巧，代码简洁明了，评4星。
5. **作者：Tsumi**：给出AC代码和思路，通过日期进位和闰年判断计算时间，但部分代码逻辑较难理解，评3星。
6. **作者：king_xbz**：将问题模块化，思路清晰，代码结构良好，各部分功能明确，评4星。
7. **作者：ghmgjf**：代码复杂，通过字符处理转化数据，逻辑较难理解，评3星。
8. **作者：outis_crypt**：使用Java的Calendar类解题，对不熟悉该类的读者参考性低，评3星。
9. **作者：SofanHe**：详细分析难点及解决方法，代码实现有一定优化思路，评4星。
10. **作者：ztzshiwo001219**：以0000年1月1日00:00为基准计算时间差，思路常规，代码较清晰，评4星。
11. **作者：wangzeyu**：设计Calender类处理日历问题，代码结构清晰，但类的设计稍复杂，评4星。
12. **作者：Deny_小田**：给出两种思路及代码，第一种超时，第二种思路正确但代码中有打表行为，评3星。
13. **作者：dwjshift**：思路简洁明了，指出以0000 - 01 - 01 - 00:00为基准算时间差，再贪心求解，但无代码，评3星。
14. **作者：cyr2003**：给出详细思路和代码，按开始和结束时间分别累加计算，但代码逻辑稍繁琐，评3星。
15. **作者：tllwtg**：通过一分一分累加计算时间差，算法效率低，且有打表行为，评3星。
16. **作者：WYQ祺**：详细描述统计时间思路，但代码中有错误（如输出x而非u），评3星。
17. **作者：yfct**：给出常规思路和代码，先计算总时间再贪心，但代码中有部分多余操作，评3星。
18. **作者：SSL_lzx**：使用Pascal语言，对不熟悉该语言读者参考性低，评3星。
19. **作者：楯山文乃**：代码简洁，统一时间为分钟计算，但部分计算逻辑较难理解，评3星。

### 优质题解
1. **作者：傅思维666**
    - **星级**：4星
    - **关键亮点**：详细介绍时间处理两种方法，代码简洁，逻辑清晰。
    - **个人心得**：无
    - **核心代码**：
```c++
#include<cstdio>
#include<cmath>
#include<algorithm>
using namespace std;
int n,time,ans;
int a[5010];
int m1[]={0,31,28,31,30,31,30,31,31,30,31,30,31};
int m2[]={0,31,29,31,30,31,30,31,31,30,31,30,31};
int start[10],endd[10];
bool check(int x)
{
    if((x%4==0 && x%400!=0) || x%400==0)
        return 1;
    return 0;
}
int main()
{
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
        scanf("%d",&a[i]);
    sort(a+1,a+n+1);
    scanf("%d-%d-%d-%d:%d",&start[1],&start[2],&start[3],&start[4],&start[5]);
    scanf("%d-%d-%d-%d:%d",&endd[1],&endd[2],&endd[3],&endd[4],&endd[5]);
    for(int i=start[1];i<endd[1];i++)
    {
        if(check(i))
            time+=366;
        else
            time+=365;
    }
    if(check(start[1]))
        for(int i=1;i<start[2];i++)
            time-=m2[i];
    else
        for(int i=1;i<start[2];i++)
            time-=m1[i];
    if(check(endd[1]))
        for(int i=1;i<endd[2];i++)
            time+=m2[i];
    else
        for(int i=1;i<endd[2];i++)
            time+=m1[i];
    for(int i=1;i<start[3];i++)
        time--;
    for(int i=1;i<endd[3];i++)
        time++;
    time=time*24*60;
    time-=60*start[4]+start[5];
    time+=60*endd[4]+endd[5];
    for(int i=1;i<=n;i++)
    {
        if(time>=a[i])
        {
            time-=a[i];
            ans++;
        }
        else
            break;
    }
    printf("%d",ans);
    return 0;
}
```
    - **核心思想**：先通过scanf读入数据，用check函数判断闰年。通过循环计算起止年份间天数，再根据闰年情况调整起止月份天数，加上起止日、时、分的时间差得到总时间，最后贪心选择题目。
2. **作者：king_xbz**
    - **星级**：4星
    - **关键亮点**：将输入、闰年判断、时间转换等操作模块化，代码结构清晰，可维护性强。
    - **个人心得**：无
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
#define fint register int
using namespace std;
int n;
int tot=0;
int a,b,c,d,e,x,y,z,u,v;
char ch;
int mon_ping[13]={0,31,28,31,30,31,30,31,31,30,31,31,30};
int mon_run[13]={0,31,29,31,30,31,30,31,31,30,31,31,30};
int st[5001],tops=0;
int as[5001];
inline bool run(int year);
inline void pre();
inline void begins();
inline void year_to_day();
inline void month_to_day();
inline void day_to_minute();
inline void final_calculate();
signed main()
{
    pre();
    begins();
    final_calculate();
    return 0;
}

inline void begins()
{
    year_to_day();
    month_to_day();
    day_to_minute();
    return ;
}

inline bool run(int year)
{
    if(year%4==0)
    {
        if(year%100==0)
        {
            if(year%400==0)
                return 1;
            else
                return 0;
        }
        else
            return 1;
    }
    else
        return 0;
}

inline void year_to_day()
{
    for(fint i=a;i<x;i++)
        if(run(i))
            tot+=366;
        else
            tot+=365;
    return ;
}

inline void month_to_day()
{
    for(fint i=1;i<b;i++)
        if(run(a))
            tot-=mon_run[i];
        else
            tot-=mon_ping[i];
    for(fint i=1;i<y;i++)
        if(run(x))
            tot+=mon_run[i];
        else
            tot+=mon_ping[i];
    return ;
}

inline void day_to_minute()
{
    tot=(tot-c+z)*24*60;
    tot=tot-(60*d+e)+(60*u+v);
    return ;
}

inline void final_calculate()
{
    for(fint i=1;i<=n;i++)
        if(tot>=as[i])
            tops++,tot-=as[i];
        else
            break;
    cout<<tops;
    return ;
}

inline void pre()
{
    cin>>n;
    for(fint i=1;i<=n;i++)
        cin>>as[i];
    sort(as+1,as+n+1);
    cin>>a>>ch>>b>>ch>>c>>ch>>d>>ch>>e;
    cin>>x>>ch>>y>>ch>>z>>ch>>u>>ch>>v;
    return ;
}
```
    - **核心思想**：pre函数处理输入并排序题目时间。run函数判断闰年。year_to_day计算年份间天数，month_to_day根据闰年调整月份天数，day_to_minute将天数转换为分钟并加上时和分的时间差。final_calculate按贪心策略计算可做题数。
3. **作者：SofanHe**
    - **星级**：4星
    - **关键亮点**：详细分析时间判定、数据储存和贪心的难点及解决方法，代码实现有优化思路。
    - **个人心得**：无
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
short Days[2][13]={{0,31,28,31,30,31,30,31,31,30,31,31,30},{0,31,29,31,30,31,30,31,31,30,31,31,30}};
int n,timein[5001],sy,ey,sm,em,sd,ed,sh,eh,ss,es,tail=1;
unsigned long long timeall,sum,at;
bool rn(int x){
    if(x%100==0){if(x%400==0)return 1;}
    else{if(x%4==0)return 1;}
    return 0;
}
bool comp(int x,int y){return x<y;}
int main(){
    cin>>n;for(int i=1;i<=n;i++)cin>>timein[i];sort(timein+1,timein+n+1,comp);
    scanf("%d-%d-%d-%d:%d",&sy,&sm,&sd,&sh,&ss);
    scanf("%d-%d-%d-%d:%d",&ey,&em,&ed,&eh,&es);
    timeall=eh*60+es-sh*60-ss;at+=timeall;
    for(int ny=sy;ny<=ey;ny++){
        bool rnm=rn(ny);
        for(int nm= ((ny==sy)?sm:1) ;nm<= ((ny==ey)?em:12) ;nm++){
            for(int nd = ((ny==sy && nm==sm)?sd:1);nd<= ((ny==ey && nm==em)?ed-1:Days[rnm][nm]) ;nd++)timeall+=1440;
            while(timein[tail]<=timeall && tail<=n){sum++;timeall-=timein[tail];tail++;}
        }
    }
    while(timein[tail]<=timeall && tail<=n){sum++;timeall-=timein[tail];tail++;}
    cout<<sum;
    return 0;
}
```
    - **核心思想**：通过rn函数判断闰年，读入数据后，先计算起止时间的分钟差timeall。通过三层循环逐年、逐月、逐日计算总时间，并在循环中用贪心策略选择题目，最后输出可做题数。

### 最优思路技巧
1. **时间计算**：以某一基准时间为参照（如0000年1月1日00:00），计算两个时间点与基准的差值再相减，可简化时间计算逻辑。
2. **模块化处理**：将输入、闰年判断、时间转换等操作模块化，使代码结构清晰，易于维护和理解。
3. **数据输入**：使用scanf处理固定格式的时间输入，可避免复杂的字符处理。

### 拓展思路
此类题目可拓展到不同时间格式计算、考虑更复杂历法规则（如儒略历与格里高利历转换）。类似算法套路是先将复杂时间信息转化为统一度量单位（如秒或分钟），再结合贪心、动态规划等算法解决问题。

### 相似题目推荐
1. **P1080 [NOIP2012 提高组] 国王游戏**：涉及贪心算法，需合理分析数据间关系进行贪心策略设计。
2. **P1937 [USACO10MAR]Barn Allocation G**：同样运用贪心思想，处理时间区间分配问题。
3. **P2123 皇后游戏**：通过对数据排序和贪心策略，解决双属性数据的最优排序问题。

### 个人心得摘录
1. **作者：wyly**：本以为是简单题，没想到提交10次才AC，主要在时间统计上容易出错，需仔细处理年、月、日、时、分的计算和判断。
2. **作者：傅思维666**：卡在时间处理上，日期题处理技巧很重要，如用scanf简化输入，以及通过基准时间或逐次处理年月日并“多退少补”计算时间。
3. **作者：Deny_小田**：一开始用一分钟一分钟累加的方法，最后一个点超时，仅得40分，换思路计算两个时间点秒数差解决问题，但有两个点通过打表通过。 

---
处理用时：102.03秒
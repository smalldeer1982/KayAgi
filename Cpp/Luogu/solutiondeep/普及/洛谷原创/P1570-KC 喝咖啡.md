# 题目信息

# KC 喝咖啡

## 题目描述

话说 KC 和 SH 在福州的时候常常跑去 85°C 喝咖啡或者其他的一些什么东西。

这天，KC 想要喝一杯咖啡，服务员告诉他，现在有 $n$ 种调料，这杯咖啡只可以加入其中的 $m$ 种（当然 KC 一定会加入 $m$ 种，不会加入少于 $m$ 种的调料），根据加入的调料不同，制成这杯咖啡要用的时间也不同，得到的咖啡的美味度也不同。

KC 在得知所有的 $n$ 种调料后，作为曾经的化竞之神的他，马上就知道了所有调料消耗的时间 $c _ i$ 以及调料的美味度 $v _ i$。由于 KC 急着回去刷题，所以他想尽快喝到这杯咖啡，但他又想喝到美味的咖啡，所以他想出了一个办法，他要喝到 $\dfrac{\sum v _ i}{\sum c _ i}$ 最大的咖啡，也就是单位时间的美味度最大的咖啡。

现在，KC 把调料信息告诉了 SH，要 SH 帮他算出喝到的咖啡的 $\dfrac{\sum v _ i}{\sum c _ i}$，但 SH 不想帮 KC 算这东西，于是 KC 就只能拜托你来算了。

注释：$\sum$ 表示求和，所以 $\dfrac{\sum v _ i}{\sum c _ i}$ 表示美味度的总和除以消耗时间的总和。


## 说明/提示

**样例 1 解释**：

KC 选 $2$ 号和 $3$ 号调料，$\dfrac{\sum v _ i}{\sum c _ i} = \dfrac{2 + 3}{2 + 1} = 1.667$。

可以验证不存在更优的选择。

**数据范围**：

对 $20 \%$ 的数据：$1 \leq n \leq 5$。

对 $50 \%$ 的数据：$1 \leq n \leq 10$。

对 $80 \%$ 的数据：$1 \leq n \leq 50$。

对 $100 \%$ 的数据：$1 \leq n \leq 200, 1 \leq m \leq n, 1 \leq c[i], v[i] \leq 1 \times 10 ^ 4$。

数据保证答案不超过 $1000$。


## 样例 #1

### 输入

```
3 2
1 2 3
3 2 1
```

### 输出

```
1.667
```

# AI分析结果

• 综合分析与结论：本题要求从n种调料中选m种，使美味度总和与消耗时间总和的比值最大。多数题解采用二分答案结合贪心策略。将目标式子变形后，通过二分答案并贪心选取前m个最小（或最大）的权值和来判断当前二分的值是否满足条件。部分题解尝试其他方法如暴力贪心、搜索，但存在局限性。从思路清晰度、代码可读性、优化程度等方面综合评估，以下是对各题解的简要分析：
    - **Hexarhy**：详细解释二分答案思路，从式子推导到二分过程及时间复杂度分析，代码注释较全，质量较高。
    - **浅色调**：思路清晰阐述二分答案+贪心的做法，代码简洁，但对推导式子的过程解释不如Hexarhy详细。
    - **redegg**：采用暴力贪心做法，虽AC但不具通用性，数据范围增大易超时。
    - **vector**：简洁点明0 - 1分数规划思路，但未详细展开，对初学者理解不友好。
    - **_H1kar1**：尝试搜索并思考剪枝策略，虽未成功但有一定参考价值，不过未涉及正解的详细讲解。
    - **jins3599**：指出部分二分复杂度错误，但提出的贪心选取\(\sum v_i - \sum c_i\)最优的观点错误，整体分析有偏差。
    - **墨凝而止**：代码为Pascal语言，且做法类似暴力贪心，未详细讲解思路。
    - **louzhenyu**：详细解释二分答案的核心思路及代码实现，与Hexarhy思路相近，但代码注释略少。
    - **依依**：提到二分答案+分数规划思路，但未详细阐述，仅点明关键判断条件。
    - **FlyingAnt**：代码实现01分数规划的二分求解，但包含特判，且对思路讲解不够清晰。

综合来看，Hexarhy和浅色调的题解质量较高，达到4星及以上。

所选的题解：
  - **Hexarhy（4星）**：
    - **关键亮点**：详细推导式子，清晰阐述二分答案思路，对二分过程中的check函数分类讨论，详细分析时间复杂度，代码注释详细。
    - **个人心得**：复习二分答案，从式子入手思考问题，尝试不同方法如枚举并进行check，虽未实践但提供新思路。
    - **重点代码**：
```cpp
bool check(const double x)
{
    for(int i=1;i<=n;i++)
        a[i].avr=x*a[i].t-a[i].v;
    sort(a+1,a+n+1);
    double tot=0;
    for(int i=1;i<=m;i++)
        tot+=a[i].avr;
    return tot<=0;
}

void binary(void)
{
    for(int i=1;i<=n;i++)
        if(a[i].v*1.0/a[i].t>r)
            r=a[i].v*1.0/a[i].t;
    while(r-l>1e-5)
    {
        const double mid=(l+r)/2.0;
        if(check(mid))
            l=mid;
        else
            r=mid;
    }
    ans=l;
}
```
核心实现思想：check函数计算每个调料的权值并排序，取前m个权值和判断是否小于等于0；binary函数确定二分上下界并进行二分查找。
  - **浅色调（4星）**：
    - **关键亮点**：简洁阐述二分答案+贪心思路，快速推导关键式子，代码简洁明了。
    - **重点代码**：
```cpp
inline bool check(double x)
{
    for(int i=1;i<=n;i++)a[i].div=a[i].v-x*a[i].c;
    sort(a+1,a+n+1,cmp);
    double tot=0;
    for(int i=1;i<=m;i++)tot+=a[i].div;
    return tot>=0;
}
```
核心实现思想：check函数计算每个调料的\(v_i - x * c_i\)值并排序，取前m个值的和判断是否大于等于0，以此判断当前二分的值是否满足条件。

最优关键思路或技巧：将目标式子\(\frac{\sum v_i}{\sum c_i}\)变形为\(\sum v_i - \sum c_i * ans = 0\)，利用二分答案的单调性，通过贪心选取前m个最小（或最大）的\(v_i - c_i * ans\)值的和来判断当前二分的\(ans\)是否满足条件，从而找到最优解。

可拓展之处：此类题目属于0 - 1分数规划问题，常见于背包、最优比率生成树等场景。类似套路是将目标比率式子变形，通过二分答案结合贪心或其他策略求解。

推荐洛谷题目：
  - P2672 [USACO07DEC]Building Roads S
  - P2728 编辑距离
  - P1419 寻找段落

---
处理用时：31.79秒
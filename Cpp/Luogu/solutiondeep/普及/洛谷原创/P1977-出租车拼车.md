# 题目信息

# 出租车拼车

## 题目背景

话说小 x 有一次去参加比赛，虽然学校离比赛地点不太远，但小 x 还是想坐出租车去。大学城的出租车总是比较另类，有“拼车”一说，也就是说，你一个人坐车去，还是一堆人一起，总共需要支付的钱是一样的（每辆出租上除司机外最多坐下 $4$ 个人）。刚好那天同校的一群 OIer 在校门口扎堆了，大家果断决定拼车去赛场。

问题来了，一辆又一辆的出租车经过，但里面要么坐满了乘客，要么只剩下一两个座位，众 OIer 都觉得坐上去太亏了，小 x 也是这么想的。

## 题目描述

假设 $N$ 位 OIer 准备拼车，此时为 $0$ 时刻，从校门到目的地需要支付给出租车师傅 $D$ 元（按车次算，不管里面坐了多少 OIer），假如 $S$ 分钟后恰能赶上比赛，那么 $S$ 分钟后经过校门口的出租车自然可以忽略不计了。现在给出在这 $S$ 分钟当中经过校门的所有的 $K$ 辆出租车先后到达校门口的时间 $T_i$  及里面剩余的座位 $Z_i$
，OIer 可以选择上车几个人（不能超过），当然，也可以选择上 $0$ 个人，那就是不坐这辆车。

俗话说，时间就是金钱，这里小 x 把每个 OIer 在校门等待出租车的分钟数 等同于花了相同多的钱（例如小 x 等待了 $20$ 分钟，那相当于他额外花了 $20$ 元钱）。

在保证所有 OIer 都能在比赛开始前到达比赛地点的情况下，聪明的你能计算出他们最少需要花多少元钱么？

## 说明/提示

对于 $100\%$ 的数据，满足 $N,K,D,S \le 100$，$1 \le Z_i \le 4$，$1 \le T_i \le T_{i+1} \le S$。

## 样例 #1

### 输入

```
2 2 10 5

1 1

2 2

```

### 输出

```
14

```

# AI分析结果

### 综合分析与结论
这些题解均采用动态规划算法解决出租车拼车费用最小化问题。主要差异在于状态定义和空间优化。
1. **状态定义**：
    - DDOSvoid、JiaY19、Awdrgysxc（未滚动）定义 `f[i][j]` 为前 `i` 辆车送走 `j` 个OIer 的最小花费。
    - Youngsc、zymooll、Awdrgysxc（滚动）定义 `f[j]` 为剩余 `j` 个人时的最小花费，滚动数组优化空间。
2. **算法要点**：通过循环枚举车辆、人数和上车人数，依据状态转移方程更新最小花费。
3. **解决难点**：核心是准确推导状态转移方程，考虑每辆车不同上车人数对总花费的影响。同时要注意初始化和边界条件处理，判断是否能在规定时间内送完所有人。

### 题解列表
- **作者：DDOSvoid（4星）**
    - **关键亮点**：思路清晰，状态定义直观，状态转移方程表述明确，代码简洁易懂。
    ```cpp
    for(int i=1;i<=k;i++)
        for(int j=0;j<=n;j++){
            f[i][j]=f[i-1][j];
            for(int k=0;k<=min(j,a[i].z);k++)
                f[i][j]=min(f[i-1][j-k]+k*a[i].t+d,f[i][j]);
        }
    ```
    - **核心思想**：两重循环遍历车辆和已上车人数，第三重循环枚举当前车的上车人数，根据状态转移方程更新最小花费。
- **作者：Youngsc（4星）**
    - **关键亮点**：状态定义独特，避免复杂取 `min` 操作，且提出可滚动数组优化（虽未在代码实现），代码注释详细。
    ```cpp
    for(R int i=1; i<=k; ++i)
    {
        in(t),in(z);
        for(R int j=0; j<=n; ++j)
            for(R int l=0; l<=z; ++l)
                minn(f[j],f[j+l]+(bool)l*d+l*t);
    }
    ```
    - **核心思想**：通过三重循环，依次枚举车辆、剩余人数和上车人数，根据状态转移方程更新最小花费，利用 `bool` 型保证费用更新逻辑正确。
- **作者：JiaY19（4星）**
    - **关键亮点**：详细阐述从二维数组到滚动数组的优化思路，代码实现滚动数组，提高空间效率，有快读优化。
    ```cpp
    for(int i = 1;i <= k;i++)				
    {
        if(t[i] > s) break;
        for(int j = n;j >= 1;j--)
        {
            for(int l = 1;l <= min(z[i], j);l++)
                f[j] = min(f[j - l] + l * t[i] + d, f[j]);
        }
    }
    ```
    - **核心思想**：利用滚动数组优化空间，通过三重循环，依次枚举车辆、剩余人数和上车人数，根据状态转移方程更新最小花费。

### 最优关键思路或技巧
1. **状态定义优化**：Youngsc 的状态定义减少了取 `min` 的复杂度，使逻辑更简洁。
2. **滚动数组优化**：JiaY19 等将二维数组优化为一维滚动数组，降低空间复杂度，在处理较大数据时优势明显。

### 可拓展之处
此类问题属于动态规划中的资源分配类问题，类似套路如背包问题、任务调度问题等。解决这类问题关键在于准确抽象出状态和状态转移方程，同时注意边界条件和初始化。

### 相似知识点洛谷题目
1. **P1048 [NOIP2005 普及组] 采药**：典型的背包问题，与本题类似，需推导状态转移方程解决资源分配优化问题。
2. **P1273 有线电视网**：树形动态规划问题，在树上进行资源分配和状态转移，与本题动态规划思路相似。
3. **P1833 樱花**：同样是资源分配类动态规划问题，通过合理定义状态和转移方程求解。 

---
处理用时：27.64秒
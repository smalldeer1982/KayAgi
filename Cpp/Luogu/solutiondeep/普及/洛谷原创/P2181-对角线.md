# 题目信息

# 对角线

## 题目描述

对于一个 $n$ 个顶点的凸多边形，它的任何三条对角线都不会交于一点。请求出图形中对角线交点的个数。

例如，$6$ 边形：

![](https://cdn.luogu.com.cn/upload/pic/6023.png)

## 说明/提示

#### 数据规模与约定

- 对于 $50 \%$ 的数据，保证 $3 \leq n \leq 100$。
- 对于 $100 \%$ 的数据，保证 $3 \leq n \leq 10^5$。

## 样例 #1

### 输入

```
3```

### 输出

```
0```

## 样例 #2

### 输入

```
6```

### 输出

```
15```

# AI分析结果

### 综合分析与结论
这些题解主要围绕如何求解凸多边形对角线交点个数展开，思路和方法多样，涵盖数学推导、找规律、递推等。多数题解利用组合数公式，从确定交点与顶点关系出发得出公式；部分通过找规律或递推求解。解决难点主要在于数据范围较大易导致数据溢出，以及公式推导与理解。

### 所选的题解
- **作者：ww3113306 (5星)**
    - **关键亮点**：思路清晰，详细阐述从组合数角度推导公式过程，并对公式化简避免数据溢出做了合理说明，代码简洁明了。
    - **重点代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
unsigned long long n,ans;
int main()
{
    scanf("%lld",&n);
    ans=n * (n-1) / 2 * (n-2) / 3 * (n-3) / 4;
    printf("%lld\n",ans);
    return 0;
}
```
    - **核心思想**：根据不会有三条对角线交于一点，得出一个交点由两条对角线确定，进而对应四个顶点，所以从n个顶点中选4个顶点的组合数就是交点个数。通过化简公式避免乘法过程中数据溢出。
- **作者：りゅうこせい (4星)**
    - **关键亮点**：采用打表找规律的方法，通过多次作差得到数列规律，为不会推导公式的同学提供新思路，代码有详细注释。
    - **重点代码**：
```cpp
#include<cstdio>
long long a1[100000];
long long a2[100000];
long long a3[100000];
int main()
{
    long long n;
    scanf("%lld",&n);
    int t=0;
    for(int i=1;i<=n;i++)
    {
        a1[i]=a1[i-1]+i;
    }
    for(int i=1;i<=n;i++)
    {
        a2[i]=a2[i-1]+a1[i];
    }
    for(int i=1;i<=n;i++)
    {
        a3[i]=a3[i-1]+a2[i];
    }
    printf("%lld",a3[n-3]);
    return 0;
}
```
    - **核心思想**：通过打表得到交点数列，多次作差发现规律，利用规律生成答案序列。
- **作者：wangxuye (4星)**
    - **关键亮点**：使用递推方法，从n - 1边形交点数推出n边形交点数，有详细的递推公式推导过程，代码实现基于递推思路。
    - **重点代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
typedef unsigned long long ll;

ll f[100010];
ll sum[100010];

int main()
{
    int n;
    scanf("%d",&n);
    f[4]=1;
    sum[0]=0;
    for(int i=1;i<=n;i++) sum[i]=sum[i-1]+(ll)i*i;
    for(int i=5;i<=n;i++) f[i]=f[i-1]+(ll)(i-2)*(i-2)*(i-3)/2-sum[i-3];
    cout<<f[n]<<endl;
    return 0;
} 
```
    - **核心思想**：考虑n - 1边形到n边形增加的交点数，通过分析新点与其他点连边相交情况得出递推公式，预处理平方和以优化计算。

### 最优关键思路或技巧
从组合数角度理解问题是最优思路，将交点与顶点关系转化为组合问题，直接得出简洁公式。化简公式避免数据溢出也是重要技巧，如将n * (n - 1) * (n - 2) * (n - 3) / 24化为n * (n - 1) / 2 * (n - 2) / 3 * (n - 3) / 4 。

### 可拓展思路
同类型题可考虑其他几何图形的相关计数问题，如三角形划分、多边形染色等，类似算法套路是通过找规律、建立数学模型（如组合数、递推关系）求解。

### 相似知识点洛谷题目
- **P1036 [NOIP2002 普及组] 选数**：涉及组合数计算。
- **P1281 书的复制**：与递推和二分相关，可类比本题递推思路。
- **P1082 [NOIP2012 提高组] 同余方程**：考查数论相关知识，与本题数学推导思想类似。

### 个人心得摘录与总结
 - **作者：ww3113306**：觉得很多题解只放公式未具体讲解推导过程，强调推导过程很巧妙。总结：推导过程对理解问题本质很重要。
 - **作者：りゅうこせい**：不会推导公式，通过打表找规律解决问题，感慨类似题可坚持做差找规律。总结：找规律是解决数学问题的有效方法。
 - **作者：wangweiba**：提到直接用公式计算部分点会过不去，需注意数据类型和除法运算方式（如用div代替/）。总结：做题要注意数据范围和运算细节，避免因细节问题导致错误。 

---
处理用时：29.75秒
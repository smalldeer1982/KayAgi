# 题目信息

# [NOIP 2011 提高组] 铺地毯

## 题目描述

为了准备一个独特的颁奖典礼，组织者在会场的一片矩形区域（可看做是平面直角坐标系的第一象限）铺上一些矩形地毯。一共有 $n$ 张地毯，编号从 $1$ 到 $n$。现在将这些地毯按照编号从小到大的顺序平行于坐标轴先后铺设，后铺的地毯覆盖在前面已经铺好的地毯之上。

地毯铺设完成后，组织者想知道覆盖地面某个点的最上面的那张地毯的编号。注意：在矩形地毯边界和四个顶点上的点也算被地毯覆盖。


## 说明/提示

【样例解释 1】

如下图，$1$ 号地毯用实线表示，$2$ 号地毯用虚线表示，$3$ 号用双实线表示，覆盖点 $(2,2)$ 的最上面一张地毯是 $3$ 号地毯。

![](https://cdn.luogu.com.cn/upload/image_hosting/q4izfzpb.png)

【数据范围】

对于 $30\%$ 的数据，有 $n \le 2$。  
对于 $50\%$ 的数据，$0 \le a, b, g, k \le 100$。  
对于 $100\%$ 的数据，有 $0 \le n \le 10^4$, $0 \le a, b, g, k \le {10}^5$。   

noip2011 提高组 day1 第 $1$ 题。

## 样例 #1

### 输入

```
3
1 0 2 3
0 2 3 3
2 1 3 3
2 2
```

### 输出

```
3
```

## 样例 #2

### 输入

```
3
1 0 2 3
0 2 3 3
2 1 3 3
4 5```

### 输出

```
-1```

# AI分析结果

### 综合分析与结论

本题的核心问题是如何高效地找到覆盖给定点的最上层地毯。由于地毯的覆盖顺序是后铺的覆盖先铺的，因此需要从后向前遍历地毯，找到第一个覆盖该点的地毯即可。直接使用二维数组模拟会因空间复杂度太高而无法通过，因此所有题解都采用了更高效的空间优化方法。

### 所选高星题解

#### 1. 作者：智子 (5星)
**关键亮点**：
- 通过四个数组分别存储地毯的左上角坐标和长宽，避免了二维数组的空间浪费。
- 代码简洁，逻辑清晰，易于理解。
- 通过从后向前遍历地毯，优化了时间复杂度。

**核心代码**：
```cpp
int ans = -1;
for(int i = 0; i < n; i++) {
    if(x >= a[i] && y >= b[i] && x <= a[i] + g[i] && y <= b[i] + k[i]) {
        ans = i + 1;
    }
}
```

#### 2. 作者：谁懂谁伤心 (4星)
**关键亮点**：
- 使用两个数组分别存储地毯的左上角和右下角坐标，进一步简化了判断条件。
- 从后向前遍历地毯，找到第一个覆盖点后立即输出，减少了不必要的遍历。

**核心代码**：
```cpp
for (int j=i;j>=1;j--)  
    if (x>=a[j][0]&&x<=b[j][0]&&y>=a[j][1]&&y<=b[j][1]) {
        printf("%d",j);  
        return 0;
    }
```

#### 3. 作者：Jayfeather2012 (4星)
**关键亮点**：
- 从后向前遍历地毯，找到第一个覆盖点后立即输出，优化了时间复杂度。
- 代码简洁，逻辑清晰，易于理解。

**核心代码**：
```cpp
for(int i=n;i>=1;i--) {
    if(a[i]<=x&&a[i]+g[i]>=x&&b[i]<=y&&b[i]+k[i]>=y) {
        cout<<i;
        return 0;
    }
}
```

### 最优关键思路与技巧

1. **空间优化**：避免使用二维数组，通过多个一维数组或结构体存储地毯信息，减少空间复杂度。
2. **遍历顺序**：从后向前遍历地毯，找到第一个覆盖点的地毯即可，优化了时间复杂度。
3. **边界判断**：通过简单的数学条件判断点是否在地毯覆盖范围内，逻辑清晰且高效。

### 可拓展之处

- **类似问题**：处理覆盖问题或区间查询问题时，可以考虑使用类似的空间优化和遍历顺序优化方法。
- **数据结构**：在处理大量数据时，合理选择数据结构（如数组、结构体）可以有效降低空间复杂度。

### 推荐题目

1. [P1003 铺地毯](https://www.luogu.com.cn/problem/P1003)
2. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
3. [P1047 校门外的树](https://www.luogu.com.cn/problem/P1047)

### 个人心得总结

- **调试经历**：在使用二维数组模拟时，容易因空间不足导致MLE，因此需要寻找更高效的空间优化方法。
- **顿悟感想**：从后向前遍历地毯可以快速找到最上层的地毯，避免了不必要的遍历，提高了效率。

---
处理用时：24.12秒
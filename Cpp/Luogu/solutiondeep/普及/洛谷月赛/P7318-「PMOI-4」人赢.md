# 题目信息

# 「PMOI-4」人赢

## 题目背景

众所周知，ducati 是人 win。

现在 lhm 也想成为人 win，于是 ducati 扔给了 lhm 下面这道题，并且 ducati 承诺在 lhm 完成此题后教他如何成为人 win。

## 题目描述

现在 lhm 手中有一个无穷长的衔尾数列 $a$，它满足：

- 对于数列中的每一个 $a_i(i>2)$，它总为 $a_{i-2} \times a_{i-1}$ 的**个位数**。

ducati 将给 lhm 衔尾数列的前两位 $a_1=n,a_2=m$ 与位置 $k$，它的任务是算出 $a_k$。

由于 lhm 太菜了并不会这道题，但他仍然想成为人 win，所以他只好请聪明的你来帮他完成这个问题。

## 说明/提示

【样例解释 $1$】

数列 $1$ 至 $10$ 位依次为：$1,6,6,6,6,6,6,6,6,\color{red}{6}$。所以答案为 $6$。

【样例解释 $2$】

数列 $1$ 至 $7$ 位依次为：$7,2,4,8,2,6,\color{red}{2}$。所以答案为 $2$。


【数据范围】

**本题采用捆绑测试**。

- Subtask 1（30pts）：$1 \leq k \leq 10^6$。
- Subtask 2（70pts）：无特殊限制。

对于 $100\%$ 的数据，$0 \leq n,m \leq 9$，$1 \leq k \leq 10^{12}$。

## 样例 #1

### 输入

```
1 6 10```

### 输出

```
6```

## 样例 #2

### 输入

```
7 2 7```

### 输出

```
2```

# AI分析结果

### 综合分析与结论

本题的核心是通过给定的数列生成规则，找到数列的第 \(k\) 项。由于 \(k\) 的范围可能非常大（\(1 \leq k \leq 10^{12}\)），直接暴力计算是不可行的。因此，大部分题解都围绕如何找到数列的循环节或通过数学优化来减少计算量展开。

#### 关键思路与技巧：
1. **循环节查找**：由于数列的每一项只与前两项有关，且前两项的取值范围有限（0到9），因此数列必然会出现循环。通过记录每对相邻数的出现位置，可以快速找到循环节，从而将问题转化为对循环节取模的问题。
2. **矩阵快速幂**：部分题解通过斐波那契数列的性质，将问题转化为矩阵快速幂的计算，进一步优化了时间复杂度。
3. **数学优化**：通过欧拉定理或周期性规律，减少指数计算的复杂度，避免大数运算。

#### 拓展思路：
- **循环节的应用**：类似的问题可以通过寻找循环节来优化计算，尤其是当问题涉及有限状态空间时。
- **矩阵快速幂**：适用于递推关系明确的数列问题，尤其是当递推关系可以转化为矩阵乘法时。
- **周期性规律**：在涉及模运算的问题中，周期性规律常常可以帮助减少计算量。

### 所选高星题解

#### 1. 作者：Thomas_Cat (4星)
**关键亮点**：
- 通过枚举部分数列，发现数列的循环节长度为6，并利用这一规律进行优化。
- 代码简洁，逻辑清晰，适合初学者理解循环节的应用。

**核心代码**：
```cpp
for(int i=3;i<=9;i++)
    a[i]=(a[i-1]%10*a[i-2]%10)%10;
cout<<a[(k-3)%6+3];
```
**实现思想**：通过前几项的计算，发现数列的循环节为6，然后利用取模运算直接得到第 \(k\) 项。

#### 2. 作者：Exber (4星)
**关键亮点**：
- 通过矩阵快速幂和斐波那契数列的性质，将问题转化为矩阵乘法和快速幂的计算，进一步优化了时间复杂度。
- 代码结构清晰，适合有一定数学基础的学习者。

**核心代码**：
```cpp
printf("%d\n",qpow(n,fbnq(k-2,10000),10)*qpow(m,fbnq(k-1,10000),10)%10);
```
**实现思想**：利用斐波那契数列的性质，通过矩阵快速幂计算指数，再通过快速幂计算最终结果。

#### 3. 作者：ycw123 (4星)
**关键亮点**：
- 通过哈希表记录每对相邻数的出现位置，快速找到循环节，避免了不必要的计算。
- 代码简洁，逻辑清晰，适合理解循环节的应用。

**核心代码**：
```cpp
ans=f[(k-i)%q+t[key]];
```
**实现思想**：通过哈希表记录每对相邻数的出现位置，找到循环节后，利用取模运算直接得到第 \(k\) 项。

### 推荐相似题目
1. **P1965 转圈游戏**：考察循环节的应用。
2. **P1306 斐波那契公约数**：考察斐波那契数列的性质与矩阵快速幂。
3. **P3390 矩阵快速幂**：考察矩阵快速幂的应用。

### 个人心得摘录
- **Thomas_Cat**：通过枚举部分数列，发现循环节长度为6，这一发现大大简化了问题的复杂度。
- **Exber**：利用矩阵快速幂和斐波那契数列的性质，将问题转化为矩阵乘法和快速幂的计算，进一步优化了时间复杂度。
- **ycw123**：通过哈希表记录每对相邻数的出现位置，快速找到循环节，避免了不必要的计算。

### 总结
本题的核心在于通过循环节或数学优化来减少计算量。循环节的应用和矩阵快速幂是解决此类问题的有效方法。通过理解这些思路，可以举一反三，解决类似的递推数列问题。

---
处理用时：32.95秒
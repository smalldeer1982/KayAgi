# 题目信息

# 「SWTR-7」My rating is -32（easy version）

## 题目背景

#### 本题是 My rating is ... 的 easy 版本。注意题目限制和数据范围与 [hard](https://www.luogu.com.cn/problem/T167832) 版本不同。

#### 请注意特殊的时空限制，题目描述下方有简化题意。

[My rating is -32.](https://codeforces.com/blog/entry/71123)

说明：上方的帖子是机房里某个同学很久很久以前的黑历史，现在成了机房传世经典，不是为了出比赛才发的，请不要误会。

## 题目描述

小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：

> “My rating is 1064.”
>
> “I am PolarSea.”
>
> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”
>
>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”
>
> “……”

为此，小 A 新注册了 $k$ 个账号。他决定**按照从 $1$ 到 $n$ 的顺序**发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。

由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，Mike 会立刻封掉这个账号，因此这种情况**是不合法的**。

小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。

---

**「简化题意」**

将 $1\sim n$ **不重不漏**地分进 $k$ 个集合 $S_1,S_2,\cdots,S_k$ 中，满足**相邻的数不在同一集合** 且 $|S_i|>0$。求 

$$\sum_{i=1}^k a[{\min_{j\in S_i}j}]$$

的最大值，其中 $[]$ 表示**下标**。

## 说明/提示

**「样例 1 说明」**

小 A 只能使用账号 $1$ 发帖子 $1$ 和 $3$，剩下的帖子用账号 $2$ 发。其安全程度为 $a_{\min(1,3)}+a_{\min(2,4)}=2$。

**「数据范围与约定」**

本题共有 6 个测试点。

- Testcase #0（1 points）：是样例。
- Testcase #1（10 points）：$k=2$。
- Testcase #2（30 points）：$n\leq 10$，$k\leq 4$。
- Testcase #3（15 points）：$k=3$。
- Testcase #4（20 points）：$n\leq 64$，$k\leq 7$。
- Testcase #5（24 points）：无特殊限制。

对于 $100\%$ 的数据，$2 \leq k \leq n \leq 10^4$，$0 \leq a_i \leq 10^9$，$T=10$。  
对于所有测试点，**时间限制 200ms，空间限制 16MB。**

**「题目来源」**

[Sweet Round 07](https://www.luogu.com.cn/contest/) B1。  
idea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194)；data & 验题：[Alex_Wei](https://www.luogu.com.cn/user/123294)。

> **My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. ……**
>
> **Upvote&emsp;-43&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  

## 样例 #1

### 输入

```
0
3
4 2
1 1 3 2
8 3
1 3 2 8 6 4 7 5
40 10
9843011 22841896 42690334 3412396 8420789 100693326 23390709 11537210 145661796 21418321 16914724 146120903 14287416 9157773 259599687 16469809 13371424 221660485 23554750 3004543 19382066 514113557 959488450 162305801 377127750 240963428 597774302 18789772 647693870 517468301 547221960 162988230 309004668 267293109 867629494 476230153 70400563 100943563 140708197 999999999
```

### 输出

```
2
12
5684074840```

# AI分析结果

### 综合分析与结论

本题的核心问题是如何将 $n$ 个帖子分配到 $k$ 个账号中，且相邻帖子不能由同一个账号发出，同时最大化所有账号的安全指数之和。通过分析，可以得出以下关键思路：

1. **固定前两个帖子的分配**：由于相邻帖子不能由同一个账号发出，前两个帖子必须分配到不同的账号，因此 $a_1$ 和 $a_2$ 必须计入最终答案。
2. **最大化剩余帖子的贡献**：剩余的 $k-2$ 个账号应当分配到安全指数最大的 $k-2$ 个帖子，以确保总和最大化。
3. **排序与选择**：通过对 $a_3$ 到 $a_n$ 进行排序，选择前 $k-2$ 个最大的安全指数，累加到答案中。

### 所选高分题解

#### 1. 作者：cancan123456 (5星)
**关键亮点**：
- 思路清晰，直接固定前两个帖子的分配，并通过排序选择剩余的最大值。
- 代码简洁，逻辑明确，易于理解。
- 使用了 `long long` 避免溢出问题。

**核心代码**：
```cpp
long long ans = a[0] + a[1];
sort(a + 2, a + n);
for (int i = n - 1; i >= n - (k - 2); i--) {
    ans += a[i];
}
printf("%lld\n", ans);
```

#### 2. 作者：Cai_LJiu (4星)
**关键亮点**：
- 使用了快读优化输入，适合大数据量。
- 通过将 $a_1$ 和 $a_2$ 设为最小值，简化了排序后的选择过程。
- 代码结构清晰，逻辑严谨。

**核心代码**：
```cpp
ans = a[1] + a[2];
a[1] = -1;
a[2] = -1;
sort(a + 1, a + 1 + n);
rep(ccy, 1, k - 2)
    ans += a[n + 1 - ccy];
cout << ans << endl;
```

#### 3. 作者：Infinity_Detail (4星)
**关键亮点**：
- 通过将 $a_1$ 和 $a_2$ 置为 $0$，简化了排序后的选择过程。
- 代码简洁，逻辑清晰，易于理解。
- 使用了 `long long` 避免溢出问题。

**核心代码**：
```cpp
ans += a[1];
a[1] = 0;
ans += a[2];
a[2] = 0;
sort(a + 1, a + n + 1, cmp);
For(i, 1, k - 2)
    ans += a[i];
cout << ans << endl;
```

### 最优关键思路与技巧

1. **固定前两个帖子的分配**：这是问题的关键，确保了相邻帖子不会由同一个账号发出。
2. **排序与选择**：通过对剩余帖子的安全指数进行排序，选择前 $k-2$ 个最大值，确保总和最大化。
3. **优化输入**：对于大数据量，使用快读可以显著提高输入效率。

### 可拓展之处

1. **类似问题**：可以将问题扩展到多个账号的分配问题，或者引入更多的限制条件，如每个账号最多发帖数等。
2. **优化算法**：可以考虑使用更高效的排序算法或数据结构，如堆排序，来进一步优化选择过程。

### 推荐题目

1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

### 个人心得总结

- **调试经历**：在处理大数据量时，输入优化非常重要，快读可以显著提高程序效率。
- **踩坑教训**：在处理大整数时，务必使用 `long long` 避免溢出问题。
- **顿悟感想**：通过固定前两个帖子的分配，问题变得简单明了，排序与选择是解决问题的关键。

---
处理用时：29.84秒
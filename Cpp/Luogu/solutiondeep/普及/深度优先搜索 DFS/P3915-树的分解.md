# 题目信息

# 树的分解

## 题目描述

给出 $N$ 个点的树和 $K$，问能否把树划分成 $\frac{N}{K}$ 个连通块，且每个连通块的点数都是 $K$。

## 说明/提示

- 对于 $60 \%$ 的数据，$1 \le N, K \le 10^3$；
- 对于 $100 \%$ 的数据，$1 \le T \le 10$，$1 \le N ,K \le 10^5$。

## 样例 #1

### 输入

```
2
4 2
1 2
2 3
3 4
4 2
1 2
1 3
1 4
```

### 输出

```
YES
NO```

# AI分析结果

### 综合分析与结论

本题的核心在于判断一棵树是否可以被划分为若干个大小为 \(K\) 的连通块。大多数题解都采用了深度优先搜索（DFS）来遍历树，并通过统计子树大小来判断是否满足条件。具体来说，当某个子树的节点数恰好为 \(K\) 时，将其视为一个连通块，并将该子树的节点数重置为0，以避免重复计算。最终，判断成功划分的连通块数是否等于 \(N/K\)。

#### 关键思路与技巧：
1. **DFS遍历**：通过DFS遍历树，计算每个子树的节点数。
2. **子树剪枝**：当某个子树的节点数等于 \(K\) 时，将其节点数重置为0，表示该子树已被划分为一个连通块。
3. **特判 \(N\%K \neq 0\)**：如果 \(N\) 不能被 \(K\) 整除，直接输出“NO”。

#### 可拓展之处：
- **类似问题**：类似的问题可以扩展到图的划分，或者要求连通块满足其他条件（如权重、颜色等）。
- **优化思路**：可以考虑使用并查集或其他数据结构来优化连通块的划分。

### 所选高星题解

#### 1. 作者：Youngsc (5星)
- **关键亮点**：思路清晰，代码简洁，通过DFS遍历树并统计子树大小，剪枝操作明确。
- **个人心得**：强调了每个连通块必须是一棵子树，且分割方案唯一。

```cpp
void dfs(int x, int fa) {
    siz[x] = 1;
    for (int i = h[x]; i; i = ed[i].pre) {
        int p = ed[i].v;
        if (p == fa) continue;
        dfs(p, x);
        siz[x] += siz[p];
    }
    if (siz[x] == k) tot++, siz[x] -= k;
}
```

#### 2. 作者：xhQYm (4星)
- **关键亮点**：代码结构清晰，使用了 `st` 数组记录子树大小，剪枝操作明确。
- **个人心得**：强调了多组数据时需清空邻接表数组和计数器。

```cpp
void dfs(int x, int s) {
    st[x] = 1;
    for (int i = h[x]; ~i; i = ne[i]) {
        int j = e[i];
        if (j != s) {
            dfs(j, x);
            st[x] += st[j];
        }
    }
    if (st[x] == k) { st[x] = 0; cnt++; }
}
```

#### 3. 作者：Cry_For_theMoon (4星)
- **关键亮点**：详细解释了贪心策略的正确性，代码逻辑严谨。
- **个人心得**：强调了树上贪心的正确性，需仔细思考。

```cpp
int dfs(int u, int fa) {
    int sum = 1;
    for (int j = first[u]; j; j = next[j]) {
        int v = edge[j].v;
        if (v == fa) continue;
        int tmp = dfs(v, u);
        if (tmp == -1) return -1;
        sum += tmp;
    }
    if (sum < k) return sum;
    if (sum == k) { cnt++; return 0; }
    return -1;
}
```

### 推荐相似题目
1. **P3916 树的直径**：考察树的直径问题，与本题的DFS遍历类似。
2. **P3384 树链剖分**：考察树链剖分，涉及树的划分与统计。
3. **P3379 最近公共祖先**：考察LCA问题，与树的遍历相关。

### 总结
本题解的关键在于通过DFS遍历树并统计子树大小，结合剪枝操作来判断是否满足条件。推荐的三道题解思路清晰，代码简洁，适合学习和参考。

---
处理用时：21.19秒
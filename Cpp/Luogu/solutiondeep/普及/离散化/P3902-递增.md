# 题目信息

# 递增

## 题目描述

现有数 $A_1,A_2,\cdots,A_n$，修改最少的数字为**实数**，使得数列严格单调递增。

注：原题误表述为修改为整数，现已纠正为实数。本题数据确保按照修改为整数的做法也可以 AC（只是不能过样例）

## 说明/提示

• 对于50% 的数据，$N \le 10^3$

• 对于100% 的数据，$1 \le N \le 10^5 , 1 \le A_i \le 10^9$


## 样例 #1

### 输入

```
3
1 3 2```

### 输出

```
1```

## 样例 #2

### 输入

```
8
1 2 3 4 4 5 6 7```

### 输出

```
1```

# AI分析结果

### 综合分析与结论
本题核心是求修改最少数字使数列严格单调递增，关键在于找出最长上升子序列（LIS），用数列总数减去LIS长度即为答案。各题解主要围绕不同复杂度的LIS算法展开，包括$O(n^2)$和$O(n log n)$两种复杂度。$O(n^2)$算法易理解但对大规模数据会超时，$O(n log n)$算法通过二分查找优化，能满足本题数据范围。

### 所选题解
1. **作者：The_Key（5星）**
    - **关键亮点**：思路清晰，利用 `lower_bound()` 函数边输入边处理，代码简洁易读。
    - **核心代码**：
```cpp
for(long long i=1;i<=n;i++)
{
    cin>>num;
    if(num>f[now])
        f[++now]=num;
    else
    {
        *lower_bound(f+1,f+now+1,num)=num;
        sum++;
    }
}
```
    - **核心思想**：若当前数大于序列末尾数，直接加入；否则用 `lower_bound()` 找到合适位置替换，替换一次计数加1。

2. **作者：一ZCH一（4星）**
    - **关键亮点**：从基础的$O(n^2)$ DP 解法逐步优化到$O(n log n)$，详细展示优化过程。
    - **核心代码（优化后）**：
```cpp
for(int i=1;i<=n;i++)
{
    if(a[i]>dp[ans])
    {
        ans++;
        dp[ans]=a[i];
    } 
    else 
    {
        int l=1,r=ans,mid;
        while(l<r)
        {
            mid=(l+r)/2;
            if(a[i]<=dp[mid])
                r=mid;
            else
                l=mid+1;
        }
        dp[l]=a[i]; 
    }
} 
```
    - **核心思想**：`dp[i]` 表示长度为 `i` 的LIS末尾最小值，若当前数大于 `dp[ans]` 则扩展LIS；否则二分查找第一个大于等于当前数的位置替换。

3. **作者：fls233666（4星）**
    - **关键亮点**：详细阐述暴力和优化方案，介绍 `lower_bound` 函数用法并给出使用范例。
    - **核心代码（优化后）**：
```cpp
for(int tz,i=1;i<n;i++){
    if(sa[ans]<a[i]){
        ans++;
        sa[ans]=a[i];		
    }else{
        tz=lower_bound(sa,sa+ans,a[i])-sa;
        sa[tz]=a[i];
    }
}
```
    - **核心思想**：若当前数大于LIS末尾数，扩展LIS；否则用 `lower_bound` 找到第一个大于等于当前数的位置替换。

### 最优关键思路或技巧
- **思维方式**：逆向思维，将求最少修改数转化为求最长上升子序列长度。
- **算法优化**：使用二分查找将求LIS的时间复杂度从$O(n^2)$ 优化到$O(n log n)$。
- **代码实现技巧**：利用 STL 中的 `lower_bound()` 函数简化二分查找过程。

### 拓展思路
同类型题可考虑修改条件，如要求修改为整数、非严格单调递增等，类似算法套路可用于其他求最长子序列问题，如最长不下降子序列、最长公共子序列等。

### 推荐题目
1. [P1020 导弹拦截](https://www.luogu.com.cn/problem/P1020)
2. [P1439 【模板】最长公共子序列](https://www.luogu.com.cn/problem/P1439)
3. [P2782 友好城市](https://www.luogu.com.cn/problem/P2782)

### 个人心得摘录与总结
- **作者：The_Key**：作为第一篇题解很激动，用 `lower_bound()` 函数解题，认为自己代码不精求大神勿喷，体现新手分享的热情和谦虚。
- **作者：一扶苏一**：不会 $O(n log n)$ 的 LIS 做法，自己口胡树状数组做法，虽不确定是否有人提出但勇于尝试，展现探索精神。
- **作者：屈ll子**：作为萌新首次写题解，介绍用 `lower_bound()` 函数求解思路，表达对该函数理解不深，希望大家自行理解，体现新手学习过程中的分享与困惑。 

---
处理用时：27.06秒
# 题目信息

# [NOIP 1998 提高组] 车站

## 题目描述

火车从始发站（称为第 $1$ 站）开出，在始发站上车的人数为 $a$，然后到达第 $2$ 站，在第 $2$ 站有人上、下车，但上、下车的人数相同，因此在第 $2$ 站开出时（即在到达第 $3$ 站之前）车上的人数保持为 $a$ 人。从第 $3$ 站起（包括第 $3$ 站）上、下车的人数有一定规律：上车的人数都是前两站上车人数之和，而下车人数等于上一站上车人数，一直到终点站的前一站（第 $n-1$ 站），都满足此规律。现给出的条件是：共有 $n$ 个车站，始发站上车的人数为 $a$，最后一站下车的人数是 $m$（全部下车）。试问 $x$ 站开出时车上的人数是多少？


## 说明/提示

对于全部的测试点，保证 $1 \leq a \leq 20$，$1 \leq x \leq n \leq 20$，$1 \leq m \leq 2 \times 10^4$。

NOIP1998 提高组 第一题

## 样例 #1

### 输入

```
5 7 32 4
```

### 输出

```
13
```

# AI分析结果

### 综合分析与结论
这些题解主要围绕斐波那契数列和模拟两种思路解决“车站”问题。斐波那契数列思路通过分析每站上下车人数中 `a` 和未知量（如 `u`、`b`、`t` 等）的系数规律，建立方程求解未知量，进而得出第 `x` 站车上人数；模拟思路则是枚举第二站上车人数，根据规则递推到第 `n - 1` 站，找到符合最后一站下车人数为 `m` 的情况，再计算第 `x` 站人数。

### 所选题解
- **xiejinhao（5星）**
    - **关键亮点**：思路清晰，详细推导了每站人数变化规律，将 `a` 和未知量分开处理，分别计算其斐波那契数列系数，对不同情况进行了分类讨论，代码注释详细。
    - **核心代码**：
```cpp
#include<cstdio>
using namespace std;
int a, n, m, x, u=1, z, y;
int main()
{
    scanf("%d %d %d %d", &a, &n, &m, &x); 
    if(n <= 5) {
        if(n == 2||n == 3)
            printf("%d", a);
        else if(n == 4) {
            if(x == 1 || x == 2) printf("%d", a);
            else if(x == 3) printf("%d", a * 2);
        }
        else if(n == 5) {
            if(x == 1 || x == 2) printf("%d", a);
            else if(x == 3) printf("%d", a * 2);
            else if(x == 4) 
                printf("%d", (m - a * 3) / 2 + a * 2);
        }
    }
    else {
        int p = 1, q = 0, k = 0, sum1 = 0;
        for(int i = 1; i <= n - 5; i++) { 	
            k = p + q;
            sum1 += k;
            p = q;
            q = k;
        }
        int s1 = sum1 + 2;
        int e = 0, t = 1, g = 0,sum2 = 0;
        for(int i = 1; i <= n - 5; i++) {
            g = e + t;
            sum2 += g;
            e = t;
            t = g;
        }
        int s2 = sum2 + 1;
        int S = (m - s1 * a) / s2;
        q = k = e = g = sum1 = sum2 = 0;
        p = t = 1;
        if(x <= 5) {
            if(x == 1 || x == 2) printf("%d", a);
            else if(x == 3)  printf("%d", a * 2);
            else if(x == 4) printf("%d", S + a * 2);
            else printf("%d", S * 2 + a * 3);
        }
        else {
            for(int i = 1; i <= x - 4; i++) {
                k = p + q;
                sum1 += k;
                p = q;
                q = k;
            }
            sum1 += 2;
            for(int i = 1; i <= x - 4; i++) {
                g = e + t;
                sum2 += g;
                e = t;
                t = g;
            }
            sum2 += 1;
            printf("%d", sum1 * a + sum2 * S);
        }
    }
    return 0;
} 
```
    - **核心实现思想**：先对 `n <= 5` 的情况进行特判，对于 `n > 5` 的情况，分别计算 `a` 和未知量的斐波那契数列系数和，根据最后一站下车人数 `m` 求出未知量，再根据 `x` 的大小计算第 `x` 站车上人数。

- **Jack2015633（4星）**
    - **关键亮点**：通过列表清晰展示每站上下车人数变化，总结出斐波那契数列规律，利用前缀和简化计算，代码简洁。
    - **核心代码**：
```cpp
#include <iostream>
using namespace std;
int a,n,m,x,ans;
int f[20],sum[20];
int main()
{
    cin>>a>>n>>m>>x;
    ans=a;
    if(x>=3)
        ans+=a;
    if(x>=4)
    {
        f[1]=f[2]=1;	
        for(int i=3;i<=n-4;i++)
            f[i]=f[i-1]+f[i-2];
        for(int i=1;i<=n-4;i++)
            sum[i]=sum[i-1]+f[i];
        int y=(m-sum[n-5]*a-ans)/sum[n-4];
        ans+=sum[x-4]*a+sum[x-3]*y; 
    }
    cout<<ans<<endl;
    return 0;
}
```
    - **核心实现思想**：先对 `x < 4` 的情况进行特判，对于 `x >= 4` 的情况，计算斐波那契数列及其前缀和，根据最后一站下车人数 `m` 求出未知量 `y`，再计算第 `x` 站车上人数。

- **ykuouzf（4星）**
    - **关键亮点**：思路简洁，直接指出上下车人数中 `a` 和未知量的系数符合斐波那契数列规律，建立方程求解未知量，代码精炼。
    - **核心代码**：
```cpp
#include<bits/stdc++.h>
using namespace std;
int a,n,m,x,b,f[20];
int main(){
    scanf("%d%d%d%d",&a,&n,&m,&x);
    f[1]=1;
    for(int _=2;_<=n-1;f[_]=f[_-1]+f[_-2],_++);
    b=(m-(f[n-3]+1)*a)/(f[n-2]-1);
    cout<<(f[x-2]+1)*a+(f[x-1]-1)*b<<endl;
    return 0;
}
```
    - **核心实现思想**：计算斐波那契数列，根据最后一站下车人数 `m` 建立方程求出未知量 `b`，再计算第 `x` 站车上人数。

### 最优关键思路或技巧
- **分离系数**：将每站人数中 `a` 和未知量的系数分开处理，分别计算其斐波那契数列，便于建立方程求解未知量。
- **前缀和优化**：使用前缀和数组记录斐波那契数列的部分和，减少重复计算，提高效率。

### 可拓展之处
同类型题可能涉及更复杂的数列规律或更多未知量，解题时可先通过列表找规律，再建立方程求解。类似算法套路包括找规律、递推、解方程等。

### 推荐题目
- P1962 斐波那契数列：直接考察斐波那契数列的计算。
- P1306 斐波那契公约数：结合斐波那契数列和最大公约数的计算。
- P2044 [NOI2012] 随机数生成器：涉及递推和数列规律的应用。

### 个人心得摘录与总结
- **仁和_童博扬**：一开始提交只有50分，调试发现数据中第二站有人刚上车就下车的情况，说明做题时要注意数据的边界情况和特殊情况。
- **lcx64579**：枚举第二站上车人数时从1开始导致第三个点TLE，后来发现第二站也可能一个人也不上车，提醒我们枚举时要考虑全面。 

---
处理用时：47.73秒
# 题目信息

# [语言月赛 202210] 军训

## 题目描述

某 E 刚结束军训，军训教官将所有同学排成了 $n$ 行 $m$ 列。

教官组织同学们进行分列式练习，同学们将按行为单位进行练习。第 $i$ 行第 $j$ 名同学摆臂的高度为 $a_{i,j}$，踢腿的高度为 $b_{i,j}$。

教官认为，每一行同学的不整齐度为摆臂高度方差与踢腿高度方差之和。形式化的，第 $i$ 行同学的不整齐度为 
$$
\dfrac{1}{m} \times \sum\limits_{j=1}^{m}{\Bigg(a_{i,j}-\dfrac{\sum\limits_{k=1}^{m}{a_{i,k}}}{m}\Bigg)^2} + \dfrac{1}{m} \times \sum\limits_{j=1}^{m}{\Bigg(b_{i,j}-\dfrac{\sum\limits_{k=1}^{m}{b_{i,k}}}{m}\Bigg)^2}
$$

其中，$\sum\limits_{j=1}^m{a_{i,j}}$ 代表 $a_{i,1}+a_{i,2}+a_{i,3}+\cdots+a_{i,m}$。

教官希望对若干行进行位置上的对调，使得最终排出的方阵中，从第 $1$ 行至第 $n$ 行不整齐度依次递增。若有两行不整齐度相同，可以任意安排其顺序。

请你编写程序，给出一种交换方案。请注意，每一步交换是即刻完成的。

例如，给出如下的交换方案：

第一步，交换第 $1$ 行和第 $2$ 行；第二步，交换第 $2$ 行和第 $3$ 行。

初始：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $1$ |
| $2$ | $2$ |
| $3$ | $3$ |

第一步完成后：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $2$ |
| $2$ | $1$ |
| $3$ | $3$ |

第二步完成后：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $2$ |
| $2$ | $3$ |
| $3$ | $1$ |

**提示：例如，将第 $1$ 行与第 $3$ 行交换后，原第 $1$ 行将被叫做第 $3$ 行，而不是仍被叫做第 $1$ 行。**

**具体解释可参照样例 #2 解释。**

## 说明/提示

### 样例 #2 解释

仅考虑摆臂高度，在前两次交换后，阵列变成如下的样子：

$\begin{matrix} 1: & 2 & 4 & 6 \\ 2: & 1 & 2 & 3 \\ 3: & 3 & 6 & 9 \end{matrix}$

此时，原第 $3$ 行现被叫做第 $2$ 行，原第 $2$ 行现被叫做第 $1$ 行。如果我们想要将它们交换，应该输出 `1 2` 而不是 `2 3`。

### 数据规模与约定

对于 $30\%$ 的数据，所有 $a_{i,j}$ 均相同，$b_{i,j}$ 均相同。  

对于另外 $20\%$ 的数据，满足 $n\le 100$，$m\le 100$。

对于 $100\%$ 的数据，$1 \le n,m \le 1000$，$1 \le a_{i,j},b_{i,j} \le 100$。

### Special Judge

本题答案不唯一，将有 Special Judge 对你的答案进行检查，所有合法答案均可以得分。

Problem Assigned by 览遍千秋 | 七海

## 样例 #1

### 输入

```
3 3
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1```

### 输出

```
3
1 2
1 3
2 3```

## 样例 #2

### 输入

```
3 3
3 6 9
2 4 6
1 2 3
1 1 1
1 1 1
1 1 1```

### 输出

```
3
1 2
2 3
1 2```

# AI分析结果

### 综合分析与结论

本题的核心在于计算每行的方差和，并通过交换行使其按方差和递增排序。难点主要在于方差的计算和排序算法的选择。题解中提供了多种解决方案，包括冒泡排序和选择排序，其中选择排序在交换次数上更为优越。整体思路清晰，代码实现也较为简洁，适合初学者理解和应用。

### 所选题解

#### 题解1：zhangzhihao2 (赞：12)
- **星级**：4星
- **关键亮点**：
  - 详细解释了方差的计算公式，帮助读者理解数学背景。
  - 提供了冒泡排序和选择排序两种解决方案，并对比了它们的优劣。
  - 代码实现简洁，注释清晰，易于理解。
- **个人心得**：
  - 强调了在计算平均值时需要进行类型转换，以避免整数除法带来的误差。
  - 提醒了数组大小和循环变量的注意事项，避免常见错误。

#### 核心代码片段
```cpp
// 计算方差和
double calcVariance(int row, int m, int a[][1000], int b[][1000]) {
    double sumA = 0, sumB = 0;
    for (int j = 0; j < m; ++j) {
        sumA += a[row][j];
        sumB += b[row][j];
    }
    double meanA = sumA / m;
    double meanB = sumB / m;
    double varianceA = 0, varianceB = 0;
    for (int j = 0; j < m; ++j) {
        varianceA += (a[row][j] - meanA) * (a[row][j] - meanA);
        varianceB += (b[row][j] - meanB) * (b[row][j] - meanB);
    }
    return (varianceA + varianceB) / m;
}

// 选择排序
void selectionSort(int n, double variance[], vector<pair<int, int>> &swaps) {
    for (int i = 0; i < n - 1; ++i) {
        int minIndex = i;
        for (int j = i + 1; j < n; ++j) {
            if (variance[j] < variance[minIndex]) {
                minIndex = j;
            }
        }
        if (minIndex != i) {
            swap(variance[i], variance[minIndex]);
            swaps.push_back({i + 1, minIndex + 1});
        }
    }
}
```

### 最优关键思路或技巧

1. **方差计算**：理解并应用方差的计算公式，确保在计算平均值时进行类型转换，避免整数除法带来的误差。
2. **排序算法选择**：选择排序在交换次数上优于冒泡排序，适合本题需求。
3. **代码实现**：使用简洁的代码结构和清晰的注释，提高代码的可读性和可维护性。

### 可拓展之处

- **同类型题**：类似的问题可以出现在需要计算某种指标并进行排序的场景中，如计算学生的成绩方差并进行排名。
- **类似算法套路**：选择排序和冒泡排序是基础的排序算法，掌握它们有助于理解更复杂的排序算法。

### 推荐题目

1. **洛谷 P1177 【模板】快速排序**：练习基础排序算法的实现。
2. **洛谷 P1047 校门外的树**：练习数组操作和区间处理。
3. **洛谷 P1059 明明的随机数**：练习排序和去重操作。

### 个人心得总结

- **调试经历**：在计算平均值时，未进行类型转换导致结果错误，通过调试发现问题并修正。
- **踩坑教训**：数组大小和循环变量的混淆导致程序崩溃，提醒在编写代码时注意变量范围。
- **顿悟感想**：理解方差的计算公式后，问题变得简单明了，数学知识的应用在编程中非常重要。

---
处理用时：27.12秒
# 题目信息

# 【XR-3】小道消息

## 题目描述

小 X 想探究小道消息传播的速度有多快，于是他做了一个社会实验。

有 $n$ 个人，其中第 $i$ 个人的衣服上有一个数 $i+1$。小 X 发现了一个规律：当一个衣服上的数为 $i$ 的人在某一天知道了一条信息，他会在第二天把这条信息告诉衣服上的数为 $j$ 的人，其中 $\gcd(i,j)=1$（即 $i,j$ 的最大公约数为 $1$）。在第 $0$ 天，小 X 把一条小道消息告诉了第 $k$ 个人，小 X 想知道第几天时所有人都会知道这条小道消息。

可以证明，一定存在所有人都知道了这条小道消息的那一天。

提示：你可能需要用到的定理——[伯特兰-切比雪夫定理](https://baike.baidu.com/item/%E4%BC%AF%E7%89%B9%E5%85%B0-%E5%88%87%E6%AF%94%E9%9B%AA%E5%A4%AB%E5%AE%9A%E7%90%86/2053704)。

## 说明/提示

【样例 $1$ 说明】

$3$ 个人的衣服上的数分别为 `2 3 4`。

在第 $0$ 天，小 X 把一条小道消息告诉了第 $1$ 个人，他的衣服上的数为2。

在第 $1$ 天，第 $1$ 个人会告诉第 $2$ 个人，因为 $\gcd(2,3) = 1$，但他不会告诉第 $3$ 个人，因为 $\gcd(2,4) = 2 \ne 1$。

在第 $2$ 天，第 $2$ 个人会告诉第 $3$ 个人，因为 $\gcd(3,4) = 1$，这时所有人都知道了这条小道消息，因此答案为 $2$。

## 样例 #1

### 输入

```
3 1
```

### 输出

```
2
```

## 样例 #2

### 输入

```
6 4
```

### 输出

```
1
```

# AI分析结果

### 综合分析与结论

该题目考察的是数论中的**伯特兰-切比雪夫定理**及其应用。通过分析，可以发现所有题解的核心思路都是基于以下两点：

1. **质数的性质**：如果 `k+1` 是质数，且 `2*(k+1) > n+1`，则只需要1天传播消息；否则需要2天。
2. **合数的性质**：如果 `k+1` 是合数，则无论如何都需要2天传播消息。

大部分题解都通过简单的质数判断和条件判断来实现，时间复杂度为 `O(sqrt(k+1))`，能够通过题目给定的数据范围。

### 题解评分与亮点

#### 1. 作者：Tarsal (赞：52)
- **星级**：5星
- **关键亮点**：
  - 思路清晰，详细解释了伯特兰-切比雪夫定理的应用。
  - 代码简洁，逻辑明确，直接通过质数判断和条件判断得出结果。
  - 提供了对质数和合数的分类讨论，易于理解。
- **个人心得**：
  - 强调了开 `long long` 的重要性，避免数据溢出。
  - 通过简单的质数判断函数，避免了复杂的算法实现。

```cpp
#include<bits/stdc++.h>
using namespace std;
#define int long long

int n, k;

bool prime(int x) {
    if(x == 1) return 0;
    if(x == 2) return 1;
    for(int i = 2; i <= sqrt(x); ++i)
        if(x % i == 0) return 0;
    return 1;
}

signed main() {
    scanf("%lld%lld", &n, &k);
    if(prime(k + 1) && 2 * k >= n) printf("1");
    else printf("2");
    return 0;
}
```

#### 2. 作者：chinaxjh (赞：21)
- **星级**：4星
- **关键亮点**：
  - 详细分析了质数和合数的情况，结合伯特兰-切比雪夫定理进行推导。
  - 代码简洁，逻辑清晰，直接通过质数判断和条件判断得出结果。
  - 提供了对质数和合数的分类讨论，易于理解。
- **个人心得**：
  - 强调了开 `long long` 的重要性，避免数据溢出。
  - 通过简单的质数判断函数，避免了复杂的算法实现。

```cpp
#include<bits/stdc++.h>
using namespace std;
long long n,k;

bool prime(long long x) {
    long long i;
    for (i=2;i<=sqrt(x);i++)
        if (x%i==0) return false;
    return true;
}

int main() {
    cin>>n>>k;
    if (prime(k+1)) {
        if ((n+1)/(k+1)==1) puts("1");
        else puts("2");
    }
    else puts("2");
}
```

#### 3. 作者：infinities (赞：10)
- **星级**：4星
- **关键亮点**：
  - 详细分析了质数和合数的情况，结合伯特兰-切比雪夫定理进行推导。
  - 代码简洁，逻辑清晰，直接通过质数判断和条件判断得出结果。
  - 提供了对质数和合数的分类讨论，易于理解。
- **个人心得**：
  - 强调了开 `long long` 的重要性，避免数据溢出。
  - 通过简单的质数判断函数，避免了复杂的算法实现。

```cpp
#include<bits/stdc++.h>
using namespace std;
bool prime(long long k){
    if(k%2==0&&k!=2)return 0;
    if(k==2||k==3)return 1; 
    for(long long i=3;i*i<=k;i+=2){
        if(k%i==0)return 0;
    }
    return 1;
}

long long n,k;
int main(){
    cin>>n>>k;
    if(prime(k+1)){
        if(k>n/2)cout<<"1\n";
        else cout<<"2\n";
    }else cout<<"2\n";
    return 0;
}
```

### 最优关键思路与技巧

1. **质数判断**：通过简单的循环判断质数，时间复杂度为 `O(sqrt(k+1))`，适用于题目给定的数据范围。
2. **条件判断**：通过判断 `k+1` 是否为质数以及 `2*(k+1) > n+1` 来确定传播消息的天数。
3. **伯特兰-切比雪夫定理**：利用该定理确保在合数情况下，消息传播的天数为2天。

### 可拓展之处

1. **质数判断优化**：可以使用更高效的质数判断算法，如 Miller-Rabin 算法，适用于更大的数据范围。
2. **数论定理应用**：类似题目可以结合其他数论定理，如费马小定理、欧拉定理等，进行更复杂的数论分析。

### 推荐题目

1. **P3383 【模板】线性筛素数**：考察质数筛法的基本应用。
2. **P1217 [USACO1.5]回文质数 Prime Palindromes**：结合质数和回文数的判断。
3. **P1075 质因数分解**：考察质因数分解的基本应用。

### 个人心得总结

- **调试经历**：多位作者强调了开 `long long` 的重要性，避免数据溢出。
- **踩坑教训**：质数判断时，循环条件应为 `i <= sqrt(x)`，否则会漏判某些情况。
- **顿悟感想**：通过简单的质数判断和条件判断，可以快速解决看似复杂的数论问题。

---
处理用时：30.27秒
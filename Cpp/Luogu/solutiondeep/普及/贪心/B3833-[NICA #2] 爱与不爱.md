# 题目信息

# [NICA #2] 爱与不爱

## 题目背景

是爱还是厌　是爱还是厌\
啦啦啦啦~\
勉勉强强着　勉勉强强着\
啦啦啦啦啦~

## 题目描述

小 Ran 有一个长度为 $n$ 的正整数序列 $a$，她可以进行如下操作任意多次（包括零次）：

- 选择两个不同的数 $i,j$（$1\le i,j\le n$），然后将 $a_i$ **除以 $2$ 后下取整**，将 $a_j$ 乘二。要求操作完毕后的 $a_i$ 必须为正整数。

小 Ran 希望使序列的总和**最小**。输出最终序列的总和。

## 说明/提示

数据保证，$2\le n\le 10^5$，$1\le a_i\le 10^9$。

## 样例 #1

### 输入

```
5
1 2 3 4 5```

### 输出

```
12```

## 样例 #2

### 输入

```
6
1 1 4 5 1 4```

### 输出

```
12```

# AI分析结果

### 综合分析与结论

本题的核心目标是通过一系列操作使序列的总和最小化。操作包括将某个元素除以2（下取整）并将另一个元素乘以2。所有题解都采用了贪心策略，通过均匀分配2的幂次来最小化总和。

**关键思路与技巧：**
1. **贪心策略**：通过将2的幂次均匀分配给所有元素，使得最终序列中的元素尽可能接近，从而最小化总和。
2. **数学优化**：利用对数运算和幂次分配，快速计算每个元素的最终值。
3. **代码实现**：通过循环和位运算，高效地计算和分配2的幂次。

**可拓展之处：**
- 类似的问题可以通过贪心策略和数学优化来解决，尤其是在涉及幂次分配和最小化总和的情况下。
- 可以考虑其他类型的操作和优化策略，如动态规划或分治法。

### 所选题解

#### 1. 作者：Light_Star_RPmax_AFO (5星)
**关键亮点：**
- 思路清晰，详细解释了贪心策略和数学优化。
- 代码简洁高效，使用了位运算和循环来快速计算和分配2的幂次。
- 提供了详细的数学证明和优化思路。

**个人心得：**
- 强调了不开`long long`会导致错误，提醒了数据类型的重要性。

**核心代码：**
```cpp
int _2(int x){
    int ans = 0;
    while(x != 1){
        x >>= 1;
        ans++;
    }
    return ans;
}

signed main(){
    n = read();
    for(int i = 1;i <= n;i++)
        a = read(),ans += _2(a);
    int sum = ans / n, cnt = ans - (sum * n);
    cout << (1 << sum) * (n - cnt) + (1 << sum + 1) * cnt;
    return 0;
}
```

#### 2. 作者：NightStriker (4星)
**关键亮点：**
- 采用了简单的贪心策略，通过循环均匀分配2的幂次。
- 代码易于理解，适合初学者。

**核心代码：
```cpp
signed main(){
    cin>>n;
    for(int i = 1;i<=n;i++){
        cin>>a[i];
        sum+=__lg(a[i]);
        a[i] = 1;
    }
    while(sum>0){
        for(int i = 1;i<=n;i++){
            a[i]*=2;
            sum--;
            if(sum<1) break;
        }
    }
    int cnt = 0;
    for(int i = 1;i<=n;i++) cnt+=a[i];
    cout<<cnt<<endl;
    return 0;
}
```

### 推荐题目
1. [P1004 方格取数](https://www.luogu.com.cn/problem/P1004)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

这些题目都涉及贪心策略和数学优化，适合进一步练习和巩固相关知识。

---
处理用时：28.10秒
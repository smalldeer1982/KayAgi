# 题目信息

# [GESP202409 五级] 挑战怪物

## 题目描述

小杨正在和一个怪物战斗，怪物的血量为 $h$，只有当怪物的血量**恰好**为 $0$ 时小杨才能够成功击败怪物。

小杨有两种攻击怪物的方式：
- 物理攻击。假设当前为小杨第  $i$ 次使用物理攻击，则会对怪物造成 $2^{i - 1}$ 点伤害。
- 魔法攻击。小杨选择任意一个质数 $x$（ 不能超过怪物当前血量），对怪物造成 $x$ 点伤害。由于小杨并不擅长魔法，他只能使用**至多一次**魔法攻击。

小杨想知道自己能否击败怪物，如果能，小杨想知道自己最少需要多少次攻击。

## 说明/提示

### 样例 1 解释

对于第一组测试用例，一种可能的最优方案为，小杨先对怪物使用魔法攻击，选择质数 $5$ 造成 $5$ 点伤害，之后对怪
物使用第 $1$ 次物理攻击，造成 $2^{1 - 1} = 1$ 点伤害，怪物血量恰好为 $0$，小杨成功击败怪物。

### 数据规模与约定

| 子任务编号 | 分数占比 | $t$ | $h$ |
| :-: | :-: | :-: | :-: |
| $1$ | $20\%$ | $\leq 5$ | $\leq 10$ |
| $2$ | $20\%$ | $\leq 10$ | $\leq 100$ |
| $3$ | $60\%$ | $\leq 10$ | $10^5$ |

对于全部的测试数据，保证 $1 \leq t \leq 10$，$1 \leq h \leq 10^5$。

## 样例 #1

### 输入

```
3
6
188
9999```

### 输出

```
2
4
-1```

# AI分析结果

### 综合分析与结论

本题的核心在于如何通过物理攻击和魔法攻击的组合，将怪物的血量恰好减到0，且要求攻击次数最少。大多数题解的思路都是先使用物理攻击，直到剩余血量为质数时使用魔法攻击。这种思路的合理性在于物理攻击的伤害是固定的，而魔法攻击的伤害可以灵活选择，因此优先使用物理攻击可以最大化魔法攻击的效果。

### 题解评分与亮点

#### 1. **Hootime (5星)**
   - **关键亮点**：通过枚举物理攻击的次数，判断剩余血量是否为质数，思路清晰且代码简洁。使用了`goto`语句优化了代码结构，避免了嵌套循环。
   - **代码核心**：
     ```cpp
     for(int i = 0, now = 0; now <= n; ++i, now = now<<1 | 1){
         if(n - now == 0){
             printf("%d\n", i);
             goto next;
         }
         else if(is_prime(n-now)){
             printf("%d\n", i+1);
             goto next;
         }
     }
     ```
   - **个人心得**：无。

#### 2. **Cute_QiQi (4星)**
   - **关键亮点**：使用了质数筛法预处理质数，提高了判断质数的效率。通过不断减去物理攻击的伤害，直到剩余血量为质数或小于0，思路清晰。
   - **代码核心**：
     ```cpp
     while(1){
         ++ans;
         if(isprime[h])break;
         h-=now;
         if(h==0)break;
         if(h<0){
             ans=-1;
             break;
         }
         now<<=1;
     }
     ```
   - **个人心得**：无。

#### 3. **jiangyunuo (4星)**
   - **关键亮点**：通过物理攻击和魔法攻击的顺序无关性，优先使用物理攻击，直到剩余血量为质数时使用魔法攻击，思路清晰。
   - **代码核心**：
     ```cpp
     for(int i=1;i>=1;i++){
         h-=pow(2,i-1);
         if(h<0){cout<<-1<<endl;break;}
         if(h==0){cout<<i<<endl;break;}
         if(h>0&&zs(h)){cout<<i+1<<endl;break;}
     }
     ```
   - **个人心得**：无。

### 最优关键思路与技巧

1. **物理攻击优先**：优先使用物理攻击，直到剩余血量为质数时使用魔法攻击，这样可以最大化魔法攻击的效果。
2. **质数判断优化**：使用质数筛法预处理质数，可以提高判断质数的效率。
3. **枚举物理攻击次数**：通过枚举物理攻击的次数，判断剩余血量是否为质数，思路清晰且代码简洁。

### 可拓展之处

1. **类似题目**：可以考虑类似的问题，如通过不同的操作组合达到某个目标值，且要求操作次数最少。
2. **质数判断优化**：在其他需要频繁判断质数的问题中，可以使用质数筛法进行预处理，提高效率。

### 推荐题目

1. **P3383 【模板】线性筛素数**：考察质数筛法的实现。
2. **P1217 [USACO1.5]回文质数 Prime Palindromes**：结合质数和回文数的判断。
3. **P1045 麦森数**：考察大数运算和质数判断。

### 通用建议与扩展思路

1. **优先使用固定伤害的攻击**：在类似问题中，优先使用固定伤害的攻击，可以最大化灵活攻击的效果。
2. **预处理优化**：在需要频繁判断某个条件的问题中，可以通过预处理优化判断效率。
3. **枚举与剪枝**：通过枚举可能的操作次数，并结合剪枝策略，可以减少不必要的计算，提高算法效率。

---
处理用时：35.54秒
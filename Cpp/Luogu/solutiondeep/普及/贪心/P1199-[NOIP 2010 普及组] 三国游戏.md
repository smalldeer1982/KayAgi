# 题目信息

# [NOIP 2010 普及组] 三国游戏

## 题目描述

小涵很喜欢电脑游戏，这些天他正在玩一个叫做《三国》的游戏。

在游戏中，小涵和计算机各执一方，组建各自的军队进行对战。游戏中共有 $N$ 位武将（$N$ 为偶数且不小于 $4$），任意两个武将之间有一个“默契值”，表示若此两位武将作为一对组合作战时，该组合的威力有多大。游戏开始前，所有武将都是自由的（称为自由武将，一旦某个自由武将被选中作为某方军队的一员，那么他就不再是自由武将了），换句话说，所谓的自由武将不属于任何一方。

游戏开始，小涵和计算机要从自由武将中挑选武将组成自己的军队，规则如下：小涵先从自由武将中选出一个加入自己的军队，然后计算机也从自由武将中选出一个加入计算机方的军队。接下来一直按照“小涵 $\to$ 计算机 $\to$ 小涵 $\to\dots$ ”的顺序选择武将，直到所有的武将被双方均分完。然后，程序自动从双方军队中各挑出一对默契值最高的武将组合代表自己的军队进行二对二比武，拥有更高默契值的一对武将组合获胜，表示两军交战，拥有获胜武将组合的一方获胜。

已知计算机一方选择武将的原则是尽量破坏对手下一步将形成的最强组合，它采取的具体策略如下：任何时刻，轮到计算机挑选时，它会尝试将对手军队中的每个武将与当前每个自由武将进行一一配对，找出所有配对中默契值最高的那对武将组合，并将该组合中的自由武将选入自己的军队。 下面举例说明计算机的选将策略，例如，游戏中一共有$6$个武将，他们相互之间的默契值如下表所示：

| 武将编号 |  1   |  2   |  3   |  4   |  5   |  6   |
| :------: | :--: | :--: | :--: | :--: | :--: | :--: |
|  **1**   |      | $5$  | $28$ | $16$ | $29$ | $27$ |
|  **2**   | $5$  |      | $23$ | $3$  | $20$ | $1$  |
|  **3**   | $28$ | $23$ |      | $8$  | $32$ | $26$ |
|  **4**   | $16$ | $3$  | $8$  |      | $33$ | $11$ |
|  **5**   | $29$ | $20$ | $32$ | $33$ |      | $12$ |
|  **6**   | $27$ | $1$  | $26$ | $11$ | $12$ |      |

双方选将过程如下所示：

|        | 小涵 | 轮到计算机时可选的自由武将 |  计算机    |  计算机选将说明    |
| :----: | :--: | :----------: | :--: | :--: |
| 第一轮 | $5$ | $1,2,3,4,6$ | $\color{magenta}4$ | 小涵手中的 $5$ 号武将与 $4$ 号的默契值最高，所以计算机选择 $4$ 号。 |
| 第二轮 | $5,3$ | $1,2,6$ | $4,\color{magenta}1$ |  小涵手中的 $5$ 号和 $3$ 号武将与自由武将中配对可产生的最大默契值为 $29$，是由 $5$ 号与 $1$ 号配对产生的，所以计算机选择 $1$ 号。  |
| 第三轮 | $5,3,6$ | $2$ | $4,1,\color{magenta}2$ |      |

小涵想知道，如果计算机在一局游戏中始终坚持上面这个策略，那么自己有没有可能必胜？如果有，在所有可能的胜利结局中，自己那对用于比武的武将组合的默契值最大是多少？  

假设整个游戏过程中，对战双方任何时候均能看到自由武将队中的武将和对方军队的武将。为了简化问题，保证对于不同的武将组合，其默契值均不相同。


## 说明/提示

**数据范围**

对于 $ 40\%$ 的数据有 $N≤10$。

对于 $ 70\%$ 的数据有 $ N≤18$。

对于 $100\%$ 的数据有 $4\le N≤500$。保证对于不同的武将组合，其默契值均不相同。

NOIP2010 普及组 第四题

## 样例 #1

### 输入

```
6 
5 28 16 29 27 
23 3 20 1 
8 32 26 
33 11 
12 
```

### 输出

```
1
32

```

## 样例 #2

### 输入

```
8 
42 24 10 29 27 12 58 
31 8 16 26 80 6 
25 3 36 11 5 
33 20 17 13 
15 77 9 
4 50 
19 ```

### 输出

```
1
77```

# AI分析结果

### 综合分析与结论

本题的核心在于博弈论与贪心策略的结合。通过分析计算机的选将策略，可以发现计算机总是试图破坏小涵的最优选择，因此小涵无法获得最大默契值的武将组合。然而，小涵可以通过选择次大默契值的武将组合来确保自己获胜。这一策略的关键在于：**小涵总是选择每行次大默契值中的最大值，从而确保自己获得最大的次大默契值，而计算机无法获得更大的默契值**。

### 所选高分题解

#### 1. 作者：wjyyy (5星)
- **关键亮点**：详细证明了小涵如何通过选择次大默契值中的最大值来确保胜利，并通过反证法验证了计算机无法获得更大的默契值。代码简洁，逻辑清晰。
- **个人心得**：作者通过分析样例，逐步推导出小涵的必胜策略，并通过反证法验证了其正确性。

```cpp
#include<cstdio>
#include<algorithm>
using std::sort;
int a[510][510];
int main()
{
    int n;
    scanf("%d",&n);
    for(int i=1;i<n;i++)
        for(int j=i+1;j<=n;j++)
        {
            scanf("%d",&a[i][j]);
            a[j][i]=a[i][j];
        }
    int ans=0;
    for(int i=1;i<=n;i++)
    {
        sort(a[i]+1,a[i]+1+n);
        ans=ans>a[i][n-1]?ans:a[i][n-1];
    }
    printf("1\n%d\n",ans);
    return 0;
}
```

#### 2. 作者：封禁用户 (4星)
- **关键亮点**：通过博弈论的角度分析了小涵的必胜策略，并结合样例详细解释了小涵如何通过选择次大默契值来确保胜利。代码实现清晰。
- **个人心得**：作者通过复盘样例的选将过程，逐步推导出小涵的必胜策略，并验证了其正确性。

```cpp
#include<bits/stdc++.h>
using namespace std;
int mo[501][501],n;
int main()
{
    cin>>n;
    for(int i=1;i<=n;i++) {
        for(int j=i+1;j<=n;j++) {
            cin>>mo[i][j];
            mo[j][i]=mo[i][j];
        }
    }
    int ans = 0;
    for(int i=1;i<=n;i++)
    {
        sort(mo[i],mo[i]+n+1);
        if(mo[i][n-1] > ans) 
            ans = mo[i][n-1];
    }
    cout<<1<<endl<<ans;
    return 0;
}
```

#### 3. 作者：__stdcall (4星)
- **关键亮点**：通过反证法详细证明了小涵的必胜策略，并解释了计算机无法获得更大默契值的原因。代码实现简洁。
- **个人心得**：作者通过反证法验证了小涵的必胜策略，并详细解释了每一步的逻辑。

```cpp
#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstring>
#include <vector>
using namespace std;
int n;
int a[510][510];
bool used[510];
int main() {
    scanf( "%d", &n );
    for( int i = 1; i <= n; ++i ) for( int j = i+1; j <= n; ++j ) {
        scanf( "%d", &a[i][j] ); a[j][i] = a[i][j];
    }
    int ans = -1;
    for( int i = 1; i <= n; ++i ) {
        int m1 = -1, m2 = -1;
        for( int j = 1; j <= n; ++j ) if( i != j ) {
            if( a[i][j] > m1 ) {
                m2 = m1; m1 = a[i][j];
            }
            else if( a[i][j] > m2 ) m2 = a[i][j];
        }
        ans = max( ans, m2 );
    }
    printf( "1\n%d\n", ans );
    return 0;
}
```

### 最优关键思路与技巧
1. **贪心策略**：小涵通过选择每行次大默契值中的最大值，确保自己获得最大的次大默契值。
2. **反证法**：通过反证法验证了计算机无法获得更大的默契值，从而确保小涵的必胜策略。
3. **博弈论**：通过博弈论的角度分析计算机的选将策略，推导出小涵的必胜策略。

### 可拓展之处
- **类似题目**：可以拓展到其他博弈论题目，如“巴什博弈”、“尼姆博弈”等，分析先手与后手的必胜策略。
- **优化思路**：可以通过更高效的排序算法或数据结构来优化代码，如使用堆结构来快速找到次大值。

### 推荐题目
1. [P1005 矩阵取数游戏](https://www.luogu.com.cn/problem/P1005)
2. [P1048 采药](https://www.luogu.com.cn/problem/P1048)
3. [P1060 开心的金明](https://www.luogu.com.cn/problem/P1060)

### 个人心得总结
- **调试经历**：通过分析样例，逐步推导出小涵的必胜策略，并通过反证法验证了其正确性。
- **顿悟感想**：博弈论与贪心策略的结合是解决此类问题的关键，通过分析对手的策略，可以找到自己的必胜策略。

---
处理用时：51.25秒
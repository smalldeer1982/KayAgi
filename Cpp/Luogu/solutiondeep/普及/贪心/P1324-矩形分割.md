# 题目信息

# 矩形分割

## 题目描述

出于某些方面的需求，我们要把一块 $N \times M$ 的木板切成一个个 $1 \times 1$ 的小方块。

对于一块木板，我们只能从某条横线或者某条竖线（要在方格线上），而且这木板是不均匀的，从不同的线切割下去要花不同的代价。而且，对于一块木板，切割一次以后就被分割成两块，而且不能把这两块木板拼在一起然后一刀切成四块，只能两块分别再进行一次切割。

现在，给出从不同的线切割所要花的代价，求把整块木板分割成 $1 \times 1$ 块小方块所需要耗费的最小代价。

## 说明/提示

数据范围：

对于 $60\%$ 的数据，有 $1 \le N,M \le 100$；

对于 $100\%$ 的数据，有 $1 \le N,M \le 2000$。


## 样例 #1

### 输入

```
2 2
3
3
```

### 输出

```
9```

# AI分析结果

### 综合分析与结论

本题的核心是贪心算法，通过优先切割代价较大的线来最小化总代价。大多数题解都采用了类似的思路：将横切和竖切的代价分别排序，然后依次选择代价较大的切割线，并累加其代价乘以当前切割次数。部分题解还通过归并排序或动态规划进一步优化了算法。

### 所选高星题解

#### 1. 作者：dingcx (赞：215)  
**星级：5星**  
**关键亮点：**  
- 提供了详细的样例解释，帮助理解贪心策略的正确性。  
- 代码简洁高效，排序后通过双指针逐个比较并累加代价。  
- 强调了细节处理，如开`long long`避免溢出。  

**个人心得：**  
- 通过样例分析，明确了先切代价较大的线是最优策略。  
- 强调了排序和指针移动的细节，避免常见错误。  

**核心代码：**
```cpp
sort(a+1,a+n,cmp); sort(b+1,b+m,cmp);
long long ans=0;
for(int i=2;i<n+m;i++){
    if(a[s1]>b[s2]) ans+=s2*a[s1++];
    else ans+=s1*b[s2++];
}
```

#### 2. 作者：wawcac (赞：20)  
**星级：4星**  
**关键亮点：**  
- 使用了归并排序的思想，将横切和竖切的代价合并排序，进一步优化了贪心策略。  
- 代码结构清晰，逻辑严谨，适合进阶学习。  

**核心代码：**
```cpp
while(qih<n&&qis<m){
    if(h[qih]>s[qis]) ans+=h[qih++]*(ch); cs++;
    else if(h[qih]<s[qis]) ans+=s[qis++]*(cs); ch++;
    else {
        if(cs>=ch) ans+=h[qih++]*(ch); cs++;
        else ans+=s[qis++]*(cs); ch++;
    }
}
```

#### 3. 作者：Creroity (赞：7)  
**星级：4星**  
**关键亮点：**  
- 使用结构体将横切和竖切的代价统一处理，简化了代码逻辑。  
- 强调了贪心策略的正确性，并通过排序实现最优解。  

**核心代码：**
```cpp
sort(a+1,a+n+m-1,cmp);
int hc=1,sc=1;
for(int i=1;i<=n+m-2;i++){
    if(a[i].f) sc++,ans+=a[i].num*hc;
    else hc++,ans+=a[i].num*sc;
}
```

### 最优关键思路与技巧

1. **贪心策略**：优先切割代价较大的线，确保每次切割的代价最小化。  
2. **排序优化**：将横切和竖切的代价分别排序，便于快速选择最优切割线。  
3. **代价累加**：每次切割的代价需要乘以当前切割次数，确保总代价最小。  
4. **细节处理**：如开`long long`避免溢出，注意切割次数的更新。

### 拓展思路与同类型题

- **同类型题**：  
  1. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)  
  2. [P1223 排队接水](https://www.luogu.com.cn/problem/P1223)  
  3. [P1233 木棍加工](https://www.luogu.com.cn/problem/P1233)  

- **类似算法套路**：  
  1. **贪心算法**：通过局部最优解逐步逼近全局最优解。  
  2. **排序优化**：通过排序快速选择最优策略。  
  3. **代价累加**：在动态规划或贪心算法中，合理累加代价以确保最优解。  

### 个人心得总结

- **调试经历**：部分题解提到未一次AC，主要原因是忽略了细节处理，如切割次数的更新和`long long`的使用。  
- **顿悟感想**：通过样例分析，明确了贪心策略的正确性，进一步理解了贪心算法的核心思想。

---
处理用时：37.47秒
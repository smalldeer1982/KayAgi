# 题目信息

# 末日的传说

## 题目描述

只要是参加 jsoi 活动的同学一定都听说过 Hanoi 塔的传说：三根柱子上的金片每天被移动一次，当所有的金片都被移完之后，世界末日也就随之降临了。

在古老东方的幻想乡，人们都采用一种奇特的方式记录日期：他们用一些特殊的符号来表示从 $1$ 开始的连续整数，$1$ 表示最小而 $n$ 表示最大。创世纪的第一天，日历就被赋予了生命，它自动地开始计数，就像排列不断地增加。

我们用 $1-n$ 来表示日历的元素，第一天日历就是：
$$1,2,\ldots,n-2,n-1,n$$
第二天，日历自动变为
$$1,2,\ldots,n-2,n,n-1$$
······每次它都生成一个以前未出现过的“最小”的排列——把它转为 $n+1$ 进制后数的数值最小。

日子一天一天地过着。有一天，一位预言者出现了——他预言道，当这个日历到达某个上帝安排的时刻，这个世界就会崩溃······他还预言到，假如某一个日期的逆序达到一个值 $m$ 的时候，世界末日就要降临。

什么是逆序？日历中的两个不同符号，假如排在前面的那个比排在后面的那个更大，就是一个逆序，一个日期的逆序总数达到 $m$ 后，末日就要降临，人们都期待一个贤者，能够预见那一天到底将在什么时候到来？

## 说明/提示

对于 $10\%$ 的数据有 $n\le10$；

对于 $40\%$ 的数据有 $n\le1000$；

对于 $100\%$ 的数据有 $n\le5\times10^4$。

所有数据均有解。

## 样例 #1

### 输入

```
5 4
```

### 输出

```
1 3 5 4 2
```

# AI分析结果

### 综合分析与结论

本题的核心是求一个逆序对数为 \( m \) 的字典序最小的排列。题解中，大部分解法都基于贪心策略，通过逐步确定每个位置的最小可能值，同时确保剩余部分能生成足够的逆序对数。以下是各题解的主要思路和优化点：

1. **贪心策略**：大部分题解都采用了贪心思想，尽可能将较小的数放在前面，以确保字典序最小。同时，通过计算剩余部分能生成的最大逆序对数，来决定当前数的放置位置。
  
2. **递归与迭代**：部分题解通过递归或迭代的方式，逐步缩小问题规模，最终得到整个排列。

3. **数学优化**：一些题解通过数学公式（如高斯求和）来快速计算剩余部分的最大逆序对数，从而避免不必要的计算。

4. **数据结构优化**：少数题解使用了树状数组等数据结构来优化查询和更新操作，进一步提升效率。

### 所选高星题解

#### 1. 题解作者：zqy1018 (赞：156)
- **星级**：5星
- **关键亮点**：思路清晰，代码简洁，通过贪心策略和数学公式快速确定每个位置的最小值，时间复杂度为 \( O(n) \)。
- **核心代码**：
  ```cpp
  for(int i=1;i<=n;i++){
      ll t=(ll)(n-i)*(n-i-1)/2;
      if(t>=m)a[fst++]=i;//放头上
      else a[lst--]=i,m-=(lst-fst+1);//放最后
  }
  ```
- **个人心得**：通过计算剩余部分的最大逆序对数，决定当前数的放置位置，确保字典序最小。

#### 2. 题解作者：ASZIIIS (赞：90)
- **星级**：4星
- **关键亮点**：详细解释了逆序对和全排列的基本概念，并通过归并排序求逆序对的方法引出正解。代码实现清晰，优化了暴力解法。
- **核心代码**：
  ```cpp
  for (int i=1;i<=n;i++){
      if (he(i)>=now)
          ans[fi++]=i;
      else
          ans[la--]=i,now-=(n-i);
  }
  ```
- **个人心得**：通过贪心策略，逐步确定每个位置的最小值，确保字典序最小。

#### 3. 题解作者：ix35 (赞：11)
- **星级**：4星
- **关键亮点**：通过观察规律，将问题转化为寻找一个临界点，使得剩余部分的逆序对数恰好为 \( m \)。代码简洁，时间复杂度为 \( O(n) \)。
- **核心代码**：
  ```cpp
  for (long long i=2;i<=n;i++) {
      if ((i*(i-1))/2>=m&&((i-1)*(i-2))/2<m) {
          solve_(i,(i*(i-1))/2-m);
          break;
      }
  }
  ```
- **个人心得**：通过数学公式快速找到临界点，确保字典序最小。

### 最优关键思路与技巧

1. **贪心策略**：在每一步选择当前最小的数，确保字典序最小。同时，通过计算剩余部分的最大逆序对数，决定当前数的放置位置。
  
2. **数学优化**：利用高斯求和公式快速计算剩余部分的最大逆序对数，避免不必要的计算。

3. **递归与迭代**：通过递归或迭代的方式，逐步缩小问题规模，最终得到整个排列。

### 可拓展之处

1. **类似问题**：类似的问题可以扩展到其他排列组合问题，如求特定条件的排列、组合等。
  
2. **数据结构优化**：在需要频繁查询和更新的场景下，可以使用树状数组等数据结构来优化操作。

### 推荐题目

1. **P1908 逆序对**：考察逆序对的基本概念和求解方法。
2. **P1491 集合位置**：考察排列组合和贪心策略。
3. **P1337 [JSOI2008]球形空间产生器**：考察数学优化和贪心策略。

### 个人心得总结

- **调试经历**：在调试过程中，发现通过数学公式快速计算剩余部分的最大逆序对数，可以大幅提升效率。
- **踩坑教训**：在贪心策略中，确保当前数的放置位置不会影响后续的逆序对数生成。
- **顿悟感想**：通过逐步缩小问题规模，最终得到整个排列，是一种非常有效的解题思路。

---
处理用时：42.80秒
# 题目信息

# 矩形

## 题目描述

给出平面上的 $n$ 个点，请找出一个边与坐标轴平行的矩形，使得它的边界上有尽量多的点。


## 说明/提示

### 数据范围及约定

- 对于 $40\%$ 的数据，$1\le n\le 30$；
- 对于 $100\%$ 的数据，$1\le n\le 300$，各点的横、纵坐标在 $[1,100]$ 范围内。


## 样例 #1

### 输入

```
10

2 3

9 2

7 4

3 4

5 7

1 5

10 4

10 6

11 4

4 6

```

### 输出

```
7```

# AI分析结果

### 综合分析与结论

本题的核心是找到一个边与坐标轴平行的矩形，使得其边界上有尽可能多的点。大多数题解采用了**二维前缀和**的方法，通过预处理和枚举矩形的四个边界来计算边界上的点数。部分题解还引入了贪心策略或优化枚举顺序来减少时间复杂度。

### 评分较高的题解

#### 1. 作者：嗯。 (赞：214)  
**星级：4.5**  
**关键亮点：**  
- 使用二维前缀和预处理，通过枚举矩形的左上角和右下角来计算边界上的点数。
- 通过减去内部矩形的点数来得到边界上的点数，思路清晰且代码简洁。
- 代码可读性强，注释详细，适合初学者理解。

**个人心得：**  
作者在尝试直接枚举左上角和右下角时遇到了TLE问题，经过冷静分析后，通过前缀和优化成功解决了问题。这种从失败中总结经验的过程值得学习。

**核心代码：**
```cpp
for(register int i=1;i<=99;i++)
for(register int j=1;j<=99;j++)
for(register int x=i+1;x<=100;x++)
for(register int y=j+1;y<=100;y++)
{
    int sum1=a[x][y]-a[x][j-1]-a[i-1][y]+a[i-1][j-1]; // 大矩形的权值和
    int sum2=a[x-1][y-1]-a[x-1][j]-a[i][y-1]+a[i][j]; // 小矩形的权值和
    sum1-=sum2; // 边界的值
    ans=ans<sum1?sum1:ans; // 更新最大值
}
```

#### 2. 作者：汪星人y (赞：168)  
**星级：4.0**  
**关键亮点：**  
- 使用二维前缀和，通过枚举矩形的四个边界来计算边界上的点数。
- 详细解释了前缀和的计算过程，并提供了图示帮助理解。
- 代码结构清晰，适合有一定基础的读者。

**核心代码：**
```cpp
for(int i=1;i<=maxx;i++)
for(int j=1;j<=maxy;j++)
for(int k=i;k<=maxx;k++)
for(int l=j;l<=maxy;l++)
{
    int ans=(sum[k][l]-sum[i-1][l]-sum[k][j-1]+sum[i-1][j-1])-(sum[k-1][l-1]-sum[i][l-1]-sum[k-1][j]+sum[i][j]);
    maxn=max(maxn,ans);
}
```

#### 3. 作者：MloVtry (赞：40)  
**星级：4.0**  
**关键亮点：**  
- 使用一维前缀和优化，通过枚举左右边界和上下边界来计算边界上的点数。
- 引入了贪心策略，减少了枚举的次数，优化了时间复杂度。
- 代码简洁，适合有一定算法基础的读者。

**核心代码：**
```cpp
for(int l=1;l<=100;l++)
for(int r=l;r<=100;r++)
{
    for(int i=1;i<=100;i++) tmp[i]=shu[r-1][i]-shu[l][i];
    int d=1;
    for(int k=1;k<=100;k++)
    {
        int ans=tmp[d]+tmp[k]+heng[r][k]-heng[r][d-1]+heng[l][k]-heng[l][d-1];
        maxx=max(maxx,ans);
        if(tmp[k]>tmp[d]+heng[l][k-1]-heng[l][d-1]+heng[r][k-1]-heng[r][d-1]) d=k;
    }
}
```

### 最优关键思路与技巧

1. **二维前缀和**：通过预处理二维前缀和，快速计算任意矩形区域内的点数，是解决此类问题的核心技巧。
2. **枚举优化**：通过枚举矩形的边界，结合前缀和计算边界上的点数，避免了直接枚举所有点的低效方法。
3. **贪心策略**：在枚举过程中，通过贪心策略减少不必要的枚举，进一步优化时间复杂度。

### 可拓展之处

- **更高维度的前缀和**：对于更高维度的空间问题，可以考虑使用多维前缀和进行优化。
- **动态规划**：在某些情况下，动态规划可以与前缀和结合，进一步优化问题的求解。

### 推荐题目

1. **P1719 最大加权矩形**：考察二维前缀和的应用，与本题思路相似。
2. **P2216 [HAOI2007]理想的正方形**：涉及二维前缀和与滑动窗口的结合。
3. **P2280 [HNOI2003]激光炸弹**：二维前缀和的应用，考察如何快速计算矩形区域内的点数和。

### 个人心得总结

- **从失败中学习**：在尝试直接枚举时遇到TLE问题，通过冷静分析并引入前缀和优化，成功解决了问题。这种从失败中总结经验的过程值得学习。
- **贪心策略的应用**：在枚举过程中，通过贪心策略减少不必要的枚举，进一步优化了时间复杂度。

---
处理用时：46.74秒
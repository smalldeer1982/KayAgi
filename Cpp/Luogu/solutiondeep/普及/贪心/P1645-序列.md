# 题目信息

# 序列

## 题目描述

有一个整数序列，它的每个数各不相同，我们不知道它的长度是多少（即整数个数），但我们知道在某些区间中间至少有多少个整数，用区间（$L_i,R_i,C_i$）来描述，表示这个整数序列中至少有 $C_i$ 个数来自区间 $[L_i,R_i]$，给出若干个这样的区间，问这个整数序列的长度最少能为多少？

## 说明/提示

### 数据范围及约定

对于全部数据，$1\le N \le 1000$，$0 \le L_i \le R_i \le 1000$，$1 \le C_i \le R_i-L_i+1$。

## 样例 #1

### 输入

```
4
4 5 1
6 10 3
7 10 3
5 6 1```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

本题的核心在于如何通过贪心或差分约束系统来最小化整数序列的长度，同时满足多个区间的约束条件。大部分题解采用了贪心策略，通过排序区间并尽可能在区间的右侧放置整数，以最大化重叠部分的利用率。部分题解则采用了差分约束系统，通过构建图模型并求解最长路来得到最优解。

贪心策略的优势在于其简单直观，且时间复杂度较低（O(n^2)），适合数据规模较小的情况。而差分约束系统虽然复杂度较高（O(nm)），但能够处理更复杂的约束条件，适合数据规模较大的情况。

### 所选高星题解

#### 1. 作者：shadowcat (赞：37)
- **星级**: 5星
- **关键亮点**: 采用贪心策略，按右端点排序区间，并在每个区间内从右向左放置整数，最大化重叠部分的利用率。代码简洁明了，思路清晰。
- **核心代码**:
  ```cpp
  sort(a+1,a+1+m,cmp);
  for(int i=1;i<=m;i++) {
      int cnt=0;
      for(int j=a[i].l;j<=a[i].r;j++) if(vis[j]) cnt++;
      if(cnt<a[i].c) {
          for(int j=a[i].r;j>=a[i].l;j--) {
              if(!vis[j]) {
                  cnt++; ans++; vis[j]=1;
                  if(cnt==a[i].c) break;
              }
          }
      }
  }
  ```

#### 2. 作者：巨型方块 (赞：10)
- **星级**: 4星
- **关键亮点**: 采用差分约束系统，通过构建图模型并求解最长路来得到最优解。思路较为复杂，但能够处理更复杂的约束条件。
- **核心代码**:
  ```cpp
  for(int i=1;i<=n;i++) {
      init(i-1,i,0);
      init(i,i-1,-1);
  }
  spfa(0,n);
  ```

#### 3. 作者：wanggk (赞：8)
- **星级**: 4星
- **关键亮点**: 采用贪心策略，按右端点排序区间，并在每个区间内从右向左放置整数。代码结构清晰，易于理解。
- **核心代码**:
  ```cpp
  sort(a+1,a+1+n,cmp);
  for(int i=1;i<=n;i++) {
      int now=0;
      for(int j=a[i].l;j<=a[i].r;j++) if(f[j]) now++;
      for(int j=a[i].r; j>=a[i].l&&now<a[i].c ;j--) {
          if(!f[j]) {
              f[j]=1; now++; ans++;
          }
      }
  }
  ```

### 最优关键思路与技巧

1. **贪心策略**: 按右端点排序区间，并在每个区间内从右向左放置整数，以最大化重叠部分的利用率。
2. **差分约束系统**: 通过构建图模型并求解最长路来处理复杂的约束条件。

### 可拓展之处

- **贪心策略**可以应用于类似的区间覆盖问题，如P1250种树、P1986元旦晚会等。
- **差分约束系统**可以用于处理更复杂的约束条件，如P1645序列、SP116等。

### 推荐题目

1. [P1250 种树](https://www.luogu.com.cn/problem/P1250)
2. [P1986 元旦晚会](https://www.luogu.com.cn/problem/P1986)
3. [P1645 序列](https://www.luogu.com.cn/problem/P1645)

### 个人心得摘录

- **shadowcat**: "贪心地选择当前区间最右端的数，可以尽量满足后面区间的条件。"
- **巨型方块**: "差分约束系统是利用题面中给出的约束条件，和题干中隐藏的约束条件建图，之后求解最短（长）路的过程。"
- **wanggk**: "从右往左找，找到now==a[i].c为止，这样可以最大化重叠部分的利用率。"

---
处理用时：34.45秒
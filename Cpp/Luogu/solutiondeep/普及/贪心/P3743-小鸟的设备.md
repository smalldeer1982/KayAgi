# 题目信息

# 小鸟的设备

## 题目背景

小鸟有 $n$ 个可同时使用的设备。


## 题目描述

第 $i$ 个设备每秒消耗 $a_i$ 个单位能量。能量的使用是连续的，也就是说能量不是某时刻突然消耗的，而是匀速消耗。也就是说，对于任意实数，在 $k$ 秒内消耗的能量均为 $k\times a_i$ 单位。在开始的时候第 $i$ 个设备里存储着 $b_i$ 个单位能量。

同时小鸟又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能 $p$ 个单位，充能也是连续的，不再赘述。你可以在任意时间给任意一个设备充能，从一个设备切换到另一个设备的时间忽略不计。

小鸟想把这些设备一起使用，直到其中有设备能量降为  $0$。所以小鸟想知道，在充电器的作用下，她最多能将这些设备一起使用多久。

## 说明/提示

对于 $100\%$ 的数据，$1\leq n\leq 100000$，$1\leq p\leq 100000$，$1\leq a_i,b_i\leq100000$。


## 样例 #1

### 输入

```
2 1
2 2
2 1000
```

### 输出

```
2.0000000000```

## 样例 #2

### 输入

```
1 100
1 1```

### 输出

```
-1 ```

## 样例 #3

### 输入

```
3 5
4 3
5 2
6 1```

### 输出

```
0.5000000000 ```

# AI分析结果

### 综合分析与结论

本题的核心在于如何通过二分答案和贪心策略来求解设备的最大使用时间。大多数题解都采用了二分答案的思路，结合贪心策略来验证某个时间是否可行。难点在于如何高效地计算每个设备在给定时间内所需的充电量，并判断充电宝的总充电量是否足够。

### 所选高星题解

#### 1. 作者：qq1010903229 (赞：152)
- **星级**: 5星
- **关键亮点**: 
  - 思路清晰，代码简洁，直接使用二分答案和贪心策略。
  - 特判处理得当，直接判断所有设备的总耗电速度是否小于充电速度，输出-1。
  - 代码可读性强，变量命名合理，逻辑清晰。
- **核心代码**:
  ```cpp
  int check(double ans){
      double q=p*ans;
      sum=0;
      for(int i=0;i<n;i++){
          if(a[i]*ans<=b[i]) continue;
          sum+=(a[i]*ans-b[i]);
      }
      return sum<=q;
  }
  ```
  - **核心思想**: 通过二分答案，验证每个设备在给定时间内所需的充电量是否小于等于充电宝的总充电量。

#### 2. 作者：Konnyaku_LXZ (赞：65)
- **星级**: 4.5星
- **关键亮点**: 
  - 详细解释了二分答案和贪心策略的结合，思路清晰。
  - 代码结构合理，函数封装良好，便于理解和维护。
  - 对二分答案的初始边界设置合理，避免了精度问题。
- **核心代码**:
  ```cpp
  double cost(LL a[], LL b[], LL L, LL R, double x){
      double sum=0;
      for(int i=L;i<=R;i++){
          double temp=a[i]*x;
          if(temp>b[i]) sum+=temp-b[i];
      }
      return sum;
  }
  ```
  - **核心思想**: 通过二分答案，计算所有设备在给定时间内所需的充电量，并判断是否小于等于充电宝的总充电量。

#### 3. 作者：流绪 (赞：36)
- **星级**: 4星
- **关键亮点**: 
  - 详细解释了充电器的使用策略，解决了多个设备同时没电的问题。
  - 代码简洁，逻辑清晰，直接使用二分答案和贪心策略。
  - 对精度问题的处理得当，避免了精度误差。
- **核心代码**:
  ```cpp
  int check(ld x){
      ld cnt = 0.0;
      for(int i=1;i<=n;i++){
          ld p= b[i]-a[i]*x;
          if(p<0) cnt += -p;
          if(cnt > x*m) return 0;
      }
      return 1;
  }
  ```
  - **核心思想**: 通过二分答案，验证每个设备在给定时间内所需的充电量是否小于等于充电宝的总充电量。

### 最优关键思路与技巧

1. **二分答案**: 通过二分法快速确定最大使用时间，结合贪心策略验证每个时间是否可行。
2. **贪心策略**: 对于每个设备，计算其在给定时间内所需的充电量，并判断充电宝的总充电量是否足够。
3. **精度控制**: 在二分答案中，合理设置精度，避免因精度问题导致的错误。

### 可拓展之处

- **类似问题**: 可以扩展到其他资源分配问题，如任务调度、资源分配等。
- **算法优化**: 可以考虑使用更高效的算法或数据结构来优化计算过程，如优先队列等。

### 推荐题目

1. [P3743 小鸟的设备](https://www.luogu.com.cn/problem/P3743)
2. [P3744 任务调度](https://www.luogu.com.cn/problem/P3744)
3. [P3745 资源分配](https://www.luogu.com.cn/problem/P3745)

### 个人心得摘录

- **调试经历**: 多位作者提到精度问题，强调在二分答案中合理设置精度，避免因精度误差导致的错误。
- **踩坑教训**: 有作者提到在计算总耗电速度时使用`int`类型导致错误，提醒在计算时注意数据类型的选择。
- **顿悟感想**: 有作者通过详细解释充电器的使用策略，解决了多个设备同时没电的问题，强调了贪心策略的重要性。

---
处理用时：37.49秒
# 题目信息

# [BalticOI 2007] Sequence 序列问题

## 题目描述

对于一个给定的序列 $a _ 1, \cdots, a _ n$，我们对它进行一个操作 $\text{reduce}(i)$，该操作将数列中的元素 $a _ i$ 和 $a _ {i+1}$ 用一个元素 $\max(a _ i,a _ {i+1})$ 替代，这样得到一个比原来序列短的新序列。这一操作的代价是 $\max(a _ i,a _ {i+1})$。进行 $n-1$ 次该操作后，可以得到一个长度为 $1$ 的序列。

我们的任务是计算代价最小的 $\text{reduce}$ 操作步骤，将给定的序列变成长度为 $1$ 的序列。

## 说明/提示

### 数据规模与约定

- 对于 $30\%$ 的测试数据，$n\le 500$； 
- 对于 $50\%$ 的测试数据，$n \le 20000$；
- 对于 $100\%$ 的测试数据，$1 \le n \le 10^6$，$0 \le a_i \le 10^9$。

## 样例 #1

### 输入

```
3
1
2
3```

### 输出

```
5```

# AI分析结果

### 综合分析与结论

本题的核心目标是找到将序列通过合并操作缩减为长度为1的最小代价。题解中主要采用了贪心、分治、动态规划等算法思路，其中贪心算法因其简洁性和高效性被广泛采用。大部分题解通过分析序列中每个元素被合并的次数，得出每个元素最多被计算两次的结论，进而通过遍历序列累加相邻元素的最大值来求解。

### 所选高星题解

#### 1. **作者：顾淼_ (赞：44)**
- **星级：5星**
- **关键亮点**：简洁的贪心算法实现，代码清晰易懂，直接通过遍历序列累加相邻元素的最大值。
- **个人心得**：作者最初未能理解贪心思路，通过与同伴讨论后豁然开朗，强调了合作与讨论的重要性。
- **核心代码**：
  ```cpp
  for (int i = 1; i < n; i++) {
      ans += max(a[i - 1], a[i]);
  }
  ```

#### 2. **作者：zhy137036 (赞：18)**
- **星级：4.5星**
- **关键亮点**：通过分治思路找到规律，详细解释了每个元素被计算的次数，代码实现清晰。
- **个人心得**：作者通过举例分析，逐步推导出规律，强调了分治思维在解题中的应用。
- **核心代码**：
  ```cpp
  for (int i = 1; i <= n; i++) {
      if (i > 1 && a[i - 1] < a[i]) ans += a[i];
      if (i < n && a[i + 1] <= a[i]) ans += a[i];
  }
  ```

#### 3. **作者：Yukhoi (赞：7)**
- **星级：4星**
- **关键亮点**：简洁的贪心算法实现，代码清晰，强调了避免重复计算的技巧。
- **核心代码**：
  ```cpp
  for (int i = 1; i <= n; ++i) {
      if (a[i] > a[i - 1] && i != 1) ans += a[i];
      if (a[i] >= a[i + 1] && i != n) ans += a[i];
  }
  ```

### 最优关键思路与技巧

1. **贪心算法**：通过分析每个元素被合并的次数，得出每个元素最多被计算两次的结论，直接累加相邻元素的最大值。
2. **分治思维**：将问题分解为子问题，逐步推导出规律，适用于复杂问题的简化。
3. **避免重复计算**：在遍历序列时，通过条件判断避免对同一元素的重复计算。

### 可拓展之处

- **类似题目**：如[[NOIP2013]积木大赛](https://www.luogu.org/problem/P1969)，考察类似的分治与贪心思维。
- **算法套路**：贪心算法在序列合并、区间划分等问题中广泛应用，掌握其核心思想有助于解决更多类似问题。

### 推荐题目

1. [[NOIP2013]积木大赛](https://www.luogu.org/problem/P1969)
2. [[NOIP2018]铺设道路](https://www.luogu.org/problem/P5019)
3. [[Luogu P1886]滑动窗口](https://www.luogu.org/problem/P1886)

### 个人心得总结

- **调试经历**：部分作者在实现过程中遇到TLE或WA，通过优化算法或调整条件判断最终AC，强调了调试与优化的重要性。
- **顿悟感想**：通过与同伴讨论或反复思考，作者们逐渐理解并掌握了贪心算法的核心思想，体现了合作与思考的价值。

---
处理用时：32.64秒
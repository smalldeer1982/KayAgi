# 题目信息

# [CEOI 2012] 工作规划

## 题目描述

CEOI 在 $N$ 天内收到了 $M$ 个任务，每个任务需要 $1$ 台机器工作 $1$ 天来完成。CEOI 有很多台机器，每台机器一天只能完成一个任务。 CEOI 要求每个任务最多只能推迟 $D$ 天完成。换言之，如果一个客户在第 $S$ 天提交了一个任务，CEOI 必须在第 $S+D$ 天之前完成它。

请你写程序求出每个任务最多推迟 $D$ 天的前提下，最少需要多少台机器才能按要求完成所有任务。

## 说明/提示

对于 $50\%$ 的测试点，$M \le 10^5$。

对于所有测试点，$1 \le N \le {10}^5$，$0 \le D < N$ , $1 \le M< 10^6$。

## 样例 #1

### 输入

```
8 2 12 
1 2 4 2 1 3 5 6 2 3 6 4```

### 输出

```
2```

# AI分析结果

### 综合分析与结论

本题的核心是**二分答案**与**贪心策略**的结合。所有题解都基于以下两个关键性质：
1. **单调性**：随着机器数量的增加，任务完成的可能性增加，因此可以使用二分法快速找到最小机器数。
2. **贪心策略**：优先处理最早提交的任务，确保任务在截止日期前完成。

大多数题解通过二分法枚举机器数量，并结合贪心策略进行验证。部分题解通过桶排序或队列优化了任务的分配过程，进一步提升了效率。

### 所选高星题解

#### 1. 作者：ztksc07 (5星)
**关键亮点**：
- **简洁的贪心策略**：通过桶排序统计每天的任务数量，利用贪心思想直接计算每天的任务完成情况，避免了复杂的模拟过程。
- **高效的二分实现**：二分法结合贪心策略，时间复杂度为 \(O(n \log m)\)，代码简洁且高效。

**核心代码**：
```cpp
bool check(int mid){
    int tsk=0;
    for(int i=1;i<=n;i++){
        tsk=max(tsk+t[i]-mid,0);
        if(tsk>mid*d) return 0;
    }
    return 1;
}
```
**实现思想**：通过维护一个变量 `tsk` 来记录未完成的任务数，每天尽可能多地完成任务，并将剩余任务积累到下一天。如果某天的任务积累超过 `mid * d`，则说明当前机器数不足以完成任务。

#### 2. 作者：TheSky233 (4星)
**关键亮点**：
- **桶排序优化**：通过桶排序将任务按天分类，减少了任务分配的复杂度。
- **二分法的灵活应用**：结合贪心策略，模拟任务的分配过程，确保任务在截止日期前完成。

**核心代码**：
```cpp
bool check(int x){
    int now(0);
    for(int i=1;i<=n;i++){
        now=max(now+f[i]-x,0);
        if(now>x*d) return false;
    }
    return true;
}
```
**实现思想**：通过维护变量 `now` 来记录未完成的任务数，每天尽可能多地完成任务，并将剩余任务积累到下一天。如果某天的任务积累超过 `x * d`，则说明当前机器数不足以完成任务。

#### 3. 作者：Luisvacson (4星)
**关键亮点**：
- **队列优化**：使用队列维护未完成的任务，确保优先处理最早提交的任务。
- **二分法的灵活应用**：结合队列模拟任务的分配过程，确保任务在截止日期前完成。

**核心代码**：
```cpp
bool check(int x){
    queue<node> Q;
    int mach;
    for(int i=1;i<=n;i++){
        mach=x;
        while(!Q.empty()){
            node x=Q.front();
            Q.pop();
            if(x.time+d<i) return false;
            --mach;
            if(!mach) break;
        }
        for(auto it=ord[i].begin();it!=ord[i].end();++it){
            if(mach) --mach;
            else Q.push({*it,i});
        }
    }
    return true;
}
```
**实现思想**：通过队列维护未完成的任务，每天尽可能多地完成任务，并将剩余任务加入队列。如果某任务的最晚完成时间已过，则说明当前机器数不足以完成任务。

### 最优关键思路与技巧
1. **二分答案**：利用单调性，通过二分法快速找到最小机器数。
2. **贪心策略**：优先处理最早提交的任务，确保任务在截止日期前完成。
3. **桶排序与队列优化**：通过桶排序或队列优化任务的分配过程，提升效率。

### 可拓展之处
- **类似题目**：可以拓展到其他具有单调性和贪心策略的问题，如任务调度、资源分配等。
- **算法套路**：二分答案结合贪心策略是一种常见的解题套路，适用于许多优化问题。

### 推荐题目
1. [P1083 借教室](https://www.luogu.com.cn/problem/P1083)
2. [P1948 电话线](https://www.luogu.com.cn/problem/P1948)
3. [P2895 机器分配](https://www.luogu.com.cn/problem/P2895)

### 个人心得摘录
- **调试经历**：部分题解提到在调试过程中发现边界条件处理不当，导致得分不高。通过调整判断条件，最终解决了问题。
- **顿悟感想**：通过二分法和贪心策略的结合，能够高效解决许多看似复杂的问题，关键在于找到问题的单调性和贪心策略。

---
处理用时：37.22秒
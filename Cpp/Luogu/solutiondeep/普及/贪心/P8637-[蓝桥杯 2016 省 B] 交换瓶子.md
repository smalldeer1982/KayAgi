# 题目信息

# [蓝桥杯 2016 省 B] 交换瓶子

## 题目描述

有 $N$ 个瓶子，编号 $1 \sim N$，放在架子上。

比如有 $5$ 个瓶子：

$$2,1,3,5,4$$

要求每次拿起 $2$ 个瓶子，交换它们的位置。

经过若干次后，使得瓶子的序号为：

$$1,2,3,4,5$$

对于这么简单的情况，显然，至少需要交换 $2$ 次就可以复位。

如果瓶子更多呢？你可以通过编程来解决。



## 说明/提示

时限 1 秒, 256M。蓝桥杯 2016 年第七届省赛

蓝桥杯 2016 年省赛 B 组 I 题。

## 样例 #1

### 输入

```
5
3 1 2 5 4```

### 输出

```
3```

## 样例 #2

### 输入

```
5
5 4 3 2 1```

### 输出

```
2```

# AI分析结果

### 综合分析与结论

本题的核心目标是通过最少的交换次数将瓶子序列恢复到有序状态。大多数题解采用了贪心算法，通过遍历序列并在发现位置不正确的瓶子时进行交换。虽然思路相似，但实现方式和优化程度有所不同。部分题解通过记录位置信息或使用DFS来减少时间复杂度，而其他题解则采用了暴力搜索的方式。

### 所选高星题解

#### 1. 作者：XBaiC (5星)
**关键亮点：**
- **环分解思想**：通过将序列视为环的结构，计算环的数量，最终交换次数为总瓶子数减去环的数量。
- **时间复杂度优化**：通过DFS遍历环，避免了重复交换，时间复杂度为O(n)。
- **思路清晰**：通过图论中的环结构来解释问题，逻辑清晰且易于理解。

**核心代码：**
```cpp
void dfs(int u){
    if(st[u]) return ;
    st[u] = true;
    dfs(a[u]);
}

int main(){
    cin >> n;
    for(int i = 1; i <= n; i ++ ) cin >> a[i];
    for(int i = 1; i <= n; i ++ ){
        if(!st[i]){
            ans ++;
            dfs(i);
        } 
    }
    cout<<n - ans;
    return 0;
}
```
**实现思想**：通过DFS遍历每个环，记录环的数量，最终交换次数为总瓶子数减去环的数量。

#### 2. 作者：Maysoul (4星)
**关键亮点：**
- **贪心算法**：通过遍历序列并在发现位置不正确的瓶子时进行交换，确保每次交换都能将一个瓶子放到正确的位置。
- **代码简洁**：代码实现简洁明了，易于理解。

**核心代码：**
```cpp
for (int i=1;i<=n;i++) {
    if(a[i]!=i) {
        swap(a[i],a[a[i]]);
        ans++;
    }
}
```
**实现思想**：通过遍历序列，每次发现位置不正确的瓶子时，将其与正确位置的瓶子交换，直到所有瓶子都在正确的位置。

#### 3. 作者：Lemon_zqp (4星)
**关键亮点：**
- **暴力搜索**：通过遍历序列并在发现位置不正确的瓶子时，向后搜索正确位置的瓶子进行交换。
- **代码可读性高**：代码结构清晰，逻辑简单，适合初学者理解。

**核心代码：**
```cpp
for(int i = 1; i <= n; i++) {
    if(a[i] != i) {
        cnt++;
        for(int j = i + 1; j <= n; j++) {
            if(a[j] == i) {
                swapp(i, j);
                break;
            }
        }
    }
}
```
**实现思想**：通过遍历序列，每次发现位置不正确的瓶子时，向后搜索正确位置的瓶子进行交换，直到所有瓶子都在正确的位置。

### 最优关键思路与技巧

- **环分解思想**：通过将序列视为环的结构，计算环的数量，最终交换次数为总瓶子数减去环的数量。这种方法不仅思路清晰，而且时间复杂度较低。
- **贪心算法**：通过遍历序列并在发现位置不正确的瓶子时进行交换，确保每次交换都能将一个瓶子放到正确的位置。这种方法实现简单，适合初学者理解。

### 可拓展之处

- **同类型题**：类似的问题可以通过环分解或贪心算法来解决，如排列的逆序数计算、最小交换次数等。
- **算法套路**：贪心算法和图论中的环结构是解决此类问题的常见套路，掌握这些套路可以帮助解决更多类似问题。

### 推荐题目

1. [P1908 逆序对](https://www.luogu.com.cn/problem/P1908)
2. [P1966 火柴排队](https://www.luogu.com.cn/problem/P1966)
3. [P1972 [SDOI2009]HH的项链](https://www.luogu.com.cn/problem/P1972)

### 个人心得总结

- **调试经历**：部分题解中提到在实现过程中需要注意边界条件和重复交换的问题，确保每次交换都能将一个瓶子放到正确的位置。
- **踩坑教训**：在暴力搜索的实现中，需要注意时间复杂度，避免因重复搜索导致超时。
- **顿悟感想**：通过环分解思想，可以将问题转化为图论中的环结构，从而简化问题并提高效率。

---
处理用时：36.33秒
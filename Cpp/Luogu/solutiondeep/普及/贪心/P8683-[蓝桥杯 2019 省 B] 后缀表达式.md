# 题目信息

# [蓝桥杯 2019 省 B] 后缀表达式

## 题目描述

给定 $N$ 个加号、 $M$ 个减号以及 $N+M+1$ 个整数 $A_1,A_2,\cdots,A_{N+M+1}$，小明想知道在所有由这 $N$ 个加号、 $M$ 个减号以及 $N+M+1$ 个整数凑出的合法的后缀表达式中，结果最大的是哪一个。

请你输出这个最大的结果。

例如使用 `1 2 3 + -`，则 `2 3 + 1 -` 这个后缀表达式结果是 $4$，是最大的。

## 说明/提示

对于所有评测用例，$0 \le N,M \le 10^5$，$-10^9 \le A_i \le 10^9$。

蓝桥杯 2019 年省赛 B 组 I 题。

## 样例 #1

### 输入

```
1 1
1 2 3```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

这道题的核心在于如何通过后缀表达式的特性，利用给定的加号和减号，构造出结果最大的表达式。大部分题解都采用了贪心策略，通过排序和绝对值处理来最大化结果。难点在于如何处理减号的影响，尤其是当减号与括号结合时，可能会导致原本的减法变为加法。因此，许多题解通过将中间的数取绝对值来消除括号的影响，从而确保结果最大化。

### 所选高星题解

#### 1. 作者：wangyishan (赞：19) - 5星
**关键亮点**：
- 详细分析了后缀表达式中括号的影响，并提出了通过绝对值消除括号影响的策略。
- 代码简洁且高效，直接通过排序和绝对值处理来实现最大结果。
- 提供了详细的证明，解释了为什么这种贪心策略能够保证结果最大。

**核心代码**：
```cpp
sort(a+1,a+n+m+1+1);
if(m==0)
    for(int i=1;i<=n+m+1;i++) ans+=a[i];
else{
    ans=a[n+m+1]-a[1];
    for(int i=2;i<=n+m;i++) ans+=abs(a[i]);
}
```
**实现思想**：通过排序后，减去最小的数，加上最大的数，中间的数取绝对值，确保结果最大化。

#### 2. 作者：哈哈人生 (赞：9) - 4星
**关键亮点**：
- 通过优先队列（大根堆）实现贪心策略，代码简洁且易于理解。
- 详细解释了后缀表达式中括号的影响，并通过牺牲最小的数来最大化结果。

**核心代码**：
```cpp
for(int i=1; i<=n+m+1; i++) {
    cin>>s;
    ans+=abs(s);
    maxx=max(maxx,s);
    minn=min(minn,s);
}
cout<<(maxx-minn)+ans-abs(maxx)-abs(minn);
```
**实现思想**：通过牺牲最小的数，将其他数取绝对值，确保结果最大化。

#### 3. 作者：liangbob (赞：0) - 4星
**关键亮点**：
- 详细分析了后缀表达式中括号的影响，并通过排序和绝对值处理来实现最大结果。
- 提供了详细的证明，解释了为什么这种贪心策略能够保证结果最大。

**核心代码**：
```cpp
sort(a + 1, a + n + m + 1 + 1);
int ans = a[n + m + 1] - a[1];
for(int i = 2;i <= n + m;i++) ans += abs(a[i]);
```
**实现思想**：通过排序后，减去最小的数，加上最大的数，中间的数取绝对值，确保结果最大化。

### 最优关键思路与技巧

1. **排序与绝对值处理**：通过排序后，减去最小的数，加上最大的数，中间的数取绝对值，确保结果最大化。
2. **贪心策略**：利用贪心思想，优先处理大数和小数，确保结果最大化。
3. **后缀表达式特性**：利用后缀表达式中括号的影响，通过绝对值处理消除括号的影响。

### 可拓展之处

1. **类似题目**：可以考虑类似的表达式求值问题，如中缀表达式求值、前缀表达式求值等。
2. **贪心算法**：在其他需要最大化或最小化结果的题目中，贪心策略也是一种常用的方法。

### 推荐题目

1. [P1045 表达式求值](https://www.luogu.com.cn/problem/P1045)
2. [P1177 后缀表达式](https://www.luogu.com.cn/problem/P1177)
3. [P1449 后缀表达式](https://www.luogu.com.cn/problem/P1449)

### 个人心得摘录

- **调试经历**：许多题解提到了在调试过程中发现的问题，如括号的影响、负数的处理等，通过调试和验证，最终找到了正确的解决方案。
- **踩坑教训**：在处理后缀表达式时，括号的影响是一个容易被忽略的点，许多题解通过绝对值处理来消除这种影响。
- **顿悟感想**：通过贪心策略和绝对值处理，可以有效地解决后缀表达式求最大值的问题，这种思路在其他类似问题中也可以应用。

---
处理用时：34.58秒
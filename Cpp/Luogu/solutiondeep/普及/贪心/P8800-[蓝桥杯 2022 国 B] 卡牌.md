# 题目信息

# [蓝桥杯 2022 国 B] 卡牌

## 题目描述

这天，小明在整理他的卡牌。

他一共有 $n$ 种卡牌，第 $i$ 种卡牌上印有正整数数 $i(i \in[1, n])$, 且第 $i$ 种卡牌现有 $a_{i}$ 张。

而如果有 $n$ 张卡牌，其中每种卡牌各一张，那么这 $n$ 张卡牌可以被称为一套牌。小明为了凑出尽可能多套牌，拿出了 $m$ 张空白牌, 他可以在上面写上数 $i$，将其当做第 $i$ 种牌来凑出套牌。然而小明觉得手写的牌不太美观，决定第 $i$ 种牌最多手写 $b_{i}$ 张。

请问小明最多能凑出多少套牌?

## 说明/提示

**【样例说明】**

这 $5$ 张空白牌中，拿 $2$ 张写 $1$，拿 $1$ 张写 $2$，这样每种牌的牌数就变为了 $3,3,3,4$，可以凑出 $3$ 套牌，剩下 $2$ 张空白牌不能再帮助小明凑出一套。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据，保证 $n \leq 2000$;

对于 $100 \%$ 的数据，保证 $n \leq 2 \times 10^{5} ; a_{i}, b_{i} \leq n ; m \leq n^{2}$ 。 

蓝桥杯 2022 国赛 B 组 C 题。

## 样例 #1

### 输入

```
4 5
1 2 3 4
5 5 5 5```

### 输出

```
3```

# AI分析结果

### 综合分析与结论

本题的核心是求解最多能凑出多少套牌，涉及二分查找和贪心算法的应用。大部分题解采用了二分查找的思路，通过判断是否能够凑出指定数量的套牌来进行二分搜索。少数题解尝试了贪心算法，但复杂度较高，且不易理解。总体来看，二分查找的思路更为清晰且高效，适合本题的规模。

### 所选题解

#### 1. 作者：Bitter_Tea (赞：14)  
**星级：★★★★★**  
**关键亮点：**  
- 思路清晰，直接使用二分查找，判断函数简洁明了。
- 代码可读性强，变量命名合理，逻辑结构清晰。
- 优化程度高，时间复杂度为O(n log n)，适合大规模数据。

**核心代码：**
```cpp
bool judge(int x) {
    long long s = 0;
    for (int i = 1; i <= n; i++) {
        if (x - a[i] <= b[i]) {
            s += max(x - a[i], 0);
        }
        else return false;
    }
    if (s <= m) return true;
    return false;
}
```
**核心思想：**  
通过二分查找确定最大套数，判断函数计算需要的空白牌数是否在允许范围内。

#### 2. 作者：wangyi_c (赞：11)  
**星级：★★★★☆**  
**关键亮点：**  
- 详细解释了二分查找的核心思想，特别是`check`函数的实现。
- 代码结构清晰，使用了`#define int long long`来避免溢出问题。
- 提供了二分查找的模板代码，适合初学者学习。

**核心代码：**
```cpp
bool check(int x){
	int sum=0;
	for(int i=1;i<=n;i++){
		if(x-a[i]>b[i]) return false;
		sum+=max(x-a[i],0ll);
	}
	return (sum<=m)?true:false;
}
```
**核心思想：**  
通过二分查找确定最大套数，`check`函数计算需要的空白牌数是否在允许范围内。

#### 3. 作者：Night_sea_64 (赞：2)  
**星级：★★★★☆**  
**关键亮点：**  
- 代码简洁，逻辑清晰，直接使用二分查找。
- 判断函数`chk`实现简洁，直接计算需要的空白牌数。
- 代码可读性强，适合快速理解和实现。

**核心代码：**
```cpp
bool chk(int x)
{
    int sum=0;
    for(int i=1;i<=n;i++)
    {
        if(a[i]+b[i]<x)return 0;
        if(a[i]<x)sum+=x-a[i];
    }
    return sum<=m;
}
```
**核心思想：**  
通过二分查找确定最大套数，`chk`函数计算需要的空白牌数是否在允许范围内。

### 最优关键思路与技巧

1. **二分查找的应用**：通过二分查找确定最大套数，判断函数计算需要的空白牌数是否在允许范围内。
2. **贪心思想的融入**：在判断函数中，优先使用空白牌补充数量较少的卡牌，确保每套牌的完整性。
3. **代码优化**：使用`long long`避免溢出，合理设置二分查找的上下界，减少不必要的计算。

### 可拓展之处

- **类似题目**：可以拓展到其他需要二分查找和贪心算法结合的题目，如资源分配、任务调度等。
- **算法套路**：二分查找结合贪心思想的算法套路，可以应用于多种最大化或最小化问题的求解。

### 推荐题目

1. [P1182 数列分段 Section II](https://www.luogu.com.cn/problem/P1182)
2. [P2440 木材加工](https://www.luogu.com.cn/problem/P2440)
3. [P2678 跳石头](https://www.luogu.com.cn/problem/P2678)

### 个人心得总结

- **调试经历**：在实现二分查找时，上下界的设置非常重要，避免遗漏边界情况。
- **踩坑教训**：使用`int`类型可能导致溢出，应使用`long long`来确保数据范围。
- **顿悟感想**：二分查找结合贪心思想的算法套路，能够高效解决多种最大化或最小化问题。

---
处理用时：36.47秒
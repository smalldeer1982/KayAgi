# 题目信息

# [USACO21OPEN] Acowdemia III B

## 题目描述

Bessie 是一位忙碌的计算机科学研究生。然而，即使是研究生也需要交友。因此，Farmer John 开设了一片草地，目的是为了帮助 Bessie 与其他奶牛建立持久的友谊。

Farmer John 的草地可以被看做是由正方形方格组成的巨大二维方阵（想象一个巨大的棋盘）。每个方格用如下字符标记：

 - `C`，如果这个方格中有一头奶牛。
 - `G`，如果这个方格中有草。
 - `.`，如果这个方格既没有奶牛也没有草。

对于两头想要成为朋友的奶牛，她们必须选择在一个与她们均水平或竖直方向上相邻的有草方格见面。在这个过程中，她们会在这个有草方格中吃草，所以之后的奶牛不能再使用这个方格作为见面地点。一头奶牛可以与多头其他奶牛成为朋友，但是同一对奶牛不能见面并成为朋友多于一次。

Farmer John 希望有许多奶牛可以见面并成为朋友。请求出当这一活动结束时在奶牛之间可以建立的朋友关系的最大数量。 

## 说明/提示

### 样例解释 1

如果我们用坐标 $(i,j)$ 标记第 $i$ 行第 $j$ 列的奶牛，则在这个样例中于 $(1,2)$、$(1,5)$、$(2,2)$、$(2,4)$、$(3,1)$、$(3,3)$、$(4,2)$、$(4,3)$ 以及 $(4,5)$ 
存在奶牛。一种使四对奶牛成为朋友的方式如下：

 - 位于 $(2,2)$ 和 $(3,3)$ 的奶牛于 $(3,2)$ 一起吃草。
 - 位于 $(2,2)$ 和 $(2,4)$ 的奶牛于 $(2,3)$ 一起吃草。
 - 位于 $(2,4)$ 和 $(3,3)$ 的奶牛于 $(3,4)$ 一起吃草。
 - 位于 $(2,4)$ 和 $(1,5)$ 的奶牛于 $(2,5)$ 一起吃草。


### 测试点性质

 - 测试点 $2-4$ 满足 $N=2$。
 - 测试点 $5-12$ 没有额外限制。

## 样例 #1

### 输入

```
4 5
.CGGC
.CGCG
CGCG.
.CC.C```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

本题的核心在于如何高效地匹配奶牛对，并最大化利用草地。各题解的主要思路集中在贪心策略上，通过优先处理某些特定情况（如两头奶牛在同一直线上或斜对角线上）来最大化朋友关系的数量。难点在于如何处理重复计算和避免冲突。

### 所选高星题解

#### 题解1：作者：hyxgg (赞：3)
- **星级**: 4
- **关键亮点**: 
  - 将问题分为两类情况，优先处理第二种情况（两头奶牛在同一直线上），再处理第一种情况（两头奶牛在斜对角线上）。
  - 通过贪心策略，确保每块草地只被使用一次，避免重复计算。
- **核心代码**:
  ```cpp
  for(ll i=1;i<=n;i++){
      for(ll j=1;j<=m;j++){
          if(cd[i][j]==1){
              if(i>1&&i<n){
                  if(cd[i-1][j]==2&&cd[i+1][j]==2){
                      ans++,cd[i][j]=0;
                      continue;
                  }
              }
              if(j>1&&j<m){
                  if(cd[i][j-1]==2&&cd[i][j+1]==2){
                      ans++,cd[i][j]=0;
                  }
              }
          }
      }
  }
  ```
  - **核心思想**: 优先处理两头奶牛在同一直线上的情况，确保每块草地只被使用一次。

#### 题解2：作者：Rannio (赞：1)
- **星级**: 4
- **关键亮点**: 
  - 通过枚举草地的位置，优先处理两头奶牛在同一直线上的情况，再处理斜对角线上的情况。
  - 避免了重复计算，确保每块草地只被使用一次。
- **核心代码**:
  ```cpp
  for(int i=1;i<=n;i++){
      for(int j=1;j<=m;j++){
          if(cr[i][j]==2){
              if(cr[i-1][j]==1&&cr[i+1][j]==1||cr[i][j-1]==1&&cr[i][j+1]==1) cr[i][j]=0,ans++;
          }
      }
  }
  ```
  - **核心思想**: 优先处理两头奶牛在同一直线上的情况，确保每块草地只被使用一次。

### 最优关键思路或技巧

1. **贪心策略**: 优先处理两头奶牛在同一直线上的情况，确保每块草地只被使用一次，避免重复计算。
2. **分类处理**: 将问题分为两类情况，分别处理，确保每种情况都能被有效处理。
3. **避免重复计算**: 通过标记已使用的草地，确保每块草地只被使用一次。

### 可拓展之处

- **类似算法套路**: 这类问题可以通过贪心策略和分类处理来解决，类似的问题包括最大匹配、资源分配等。
- **举一反三**: 在处理类似的资源分配问题时，可以借鉴这种分类处理和贪心策略的思路。

### 推荐题目

1. [P1006 传纸条](https://www.luogu.com.cn/problem/P1006)
2. [P2774 方格取数问题](https://www.luogu.com.cn/problem/P2774)
3. [P3355 骑士共存问题](https://www.luogu.com.cn/problem/P3355)

### 个人心得总结

- **调试经历**: 在处理斜对角线上的情况时，容易忽略重复计算的问题，需要通过标记已使用的草地来避免。
- **踩坑教训**: 在处理两头奶牛在同一直线上的情况时，容易忽略边界条件，需要仔细检查边界情况。
- **顿悟感想**: 通过分类处理和贪心策略，可以有效地解决这类资源分配问题，确保每块资源只被使用一次。

---
处理用时：30.17秒
# 题目信息

# 失踪的7

## 题目描述

远古的 Pascal 人也使用阿拉伯数字来进行计数，但是他们又不喜欢使用 $7$ ，因为他们认为 $7$ 是一个不吉祥的数字，所以 Pascal 数字 $8$ 其实表示的是自然数中的 $7$，$18$ 表示的是自然数中的 $16$ 。请计算，在正整数 $n$ 范围以内包含有多少个 Pascal 数字。


## 说明/提示

对于所有数据，$1 \leq t \leq 10000$，$1 \leq n \leq 2^{32}-1$。

## 样例 #1

### 输入

```
2
10
20```

### 输出

```
9
18```

# AI分析结果

### 综合分析

该题目要求统计在给定范围内不包含数字7的数的个数，本质上是将数字视为一种特殊的九进制数（跳过7）。大多数题解采用了类似的思路，即将数字分解为各位，并根据每一位的值计算贡献值。部分题解还处理了数字中包含7的特殊情况。

### 题解评分与亮点

1. **作者：dbxxx (赞：116)**  
   **星级：5**  
   **关键亮点：**  
   - 引入了“贡献值”的概念，清晰解释了每一位对最终结果的贡献。
   - 详细说明了如何处理数字中包含7的情况，通过特判将含7的数字转换为不含7的等效数字。
   - 代码简洁且可读性强，使用了字符串处理，避免了复杂的数学运算。

   **核心代码：**
   ```cpp
   for (int i = s.length() - 1, atr = 1; i >= 0; --i, atr *= 9)
       ans += atr * (s[i] - '0') - (s[i] - '0' > 7 ? atr : 0);
   ```

2. **作者：amstar (赞：55)**  
   **星级：4**  
   **关键亮点：**  
   - 使用了数位DP（动态规划）的方法，通过记忆化搜索减少重复计算。
   - 代码结构清晰，适合对数位DP不熟悉的读者学习。

   **核心代码：**
   ```cpp
   int dfs(int pos, bool limit) {
       if (pos == -1) return 1;
       if (!limit && dp[pos] != -1) return dp[pos];
       int u = limit ? a[pos] : 9;
       int ret = 0;
       for (int i = 0; i <= u; ++i) {
           if (i == 7) continue;
           ret += dfs(pos - 1, limit && i == a[pos]);
       }
       if (!limit) dp[pos] = ret;
       return ret;
   }
   ```

3. **作者：Ice_teapoy (赞：47)**  
   **星级：4**  
   **关键亮点：**  
   - 将问题抽象为九进制转十进制，思路新颖且易于理解。
   - 通过特判处理了数字中包含7的情况，确保了算法的正确性。

   **核心代码：**
   ```cpp
   for (i = 0; i < k; ++i) {
       if (a[i] == '7') {
           a[i] = '6';
           for (j = i + 1; j < k; ++j) a[j] = '9';
           break;
       }
   }
   for (i = 0; i < k; ++i) ans = ans * 9 + a[i] - '0';
   ```

### 最优关键思路

- **贡献值计算**：将数字的每一位视为独立的贡献值，根据是否大于7进行调整，最后累加得到结果。
- **特判处理7**：当数字中包含7时，将其转换为不含7的等效数字，确保计算的正确性。
- **数位DP**：通过记忆化搜索减少重复计算，适合处理大范围的数位问题。

### 可拓展之处

- **类似问题**：可以扩展到其他进制或跳过其他数字的问题，如统计不包含某个特定数字的数的个数。
- **数位DP应用**：数位DP可以用于解决更多与数位相关的计数问题，如统计满足某些条件的数的个数。

### 推荐题目

1. **P2657 [SCOI2009] windy数**  
   题目链接：[https://www.luogu.com.cn/problem/P2657](https://www.luogu.com.cn/problem/P2657)  
   考察知识点：数位DP

2. **P2602 [ZJOI2010] 数字计数**  
   题目链接：[https://www.luogu.com.cn/problem/P2602](https://www.luogu.com.cn/problem/P2602)  
   考察知识点：数位DP

3. **P4127 [AHOI2009] 同类分布**  
   题目链接：[https://www.luogu.com.cn/problem/P4127](https://www.luogu.com.cn/problem/P4127)  
   考察知识点：数位DP

### 个人心得摘录

- **dbxxx**：在调试过程中发现，特判处理7时，必须将后续所有位都置为9，否则会导致计算结果错误。
- **Ice_teapoy**：通过将问题抽象为九进制转十进制，简化了问题的复杂度，但在处理7时需要进行特判，确保算法的正确性。

这些心得强调了在处理特殊情况时，必须确保算法的严谨性，避免因小细节导致整体结果的错误。

---
处理用时：28.62秒
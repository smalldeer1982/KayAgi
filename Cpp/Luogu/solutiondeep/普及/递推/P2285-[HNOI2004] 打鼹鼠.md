# 题目信息

# [HNOI2004] 打鼹鼠

## 题目描述

鼹鼠是一种很喜欢挖洞的动物，但每过一定的时间，它还是喜欢把头探出到地面上来透透气的。根据这个特点阿牛编写了一个打鼹鼠的游戏：在一个 $n \times n$ 的网格中，在某些时刻鼹鼠会在某一个网格探出头来透透气。你可以控制一个机器人来打鼹鼠，如果 $i$ 时刻鼹鼠在某个网格中出现，而机器人也处于同一网格的话，那么这个鼹鼠就会被机器人打死。而机器人每一时刻只能够移动一格或停留在原地不动。机器人的移动是指从当前所处的网格移向相邻的网格，即从坐标为 $(i, j)$ 的网格移向 $(i-1, j), (i+1, j), (i, j-1), (i, j+1)$ 四个网格，机器人不能走出整个 $n \times n$ 的网格。游戏开始时，你可以自由选定机器人的初始位置。

现在知道在一段时间内，鼹鼠出现的时间和地点，请编写一个程序使机器人在这一段时间内打死尽可能多的鼹鼠。


## 样例 #1

### 输入

```
2 2	         

1 1 1		

2 2 2

```

### 输出

```
1
```

# AI分析结果

### 综合分析与结论

本题的核心是通过动态规划（DP）求解机器人在给定时间内能够打到的最大鼹鼠数量。大多数题解都采用了类似最长上升子序列（LIS）的思路，通过计算曼哈顿距离来判断机器人是否能在规定时间内从一个鼹鼠位置移动到另一个位置。尽管题解的思路相似，但在实现细节和优化上存在差异。

### 所选高星题解

#### 1. 作者：SIXIANG32 (赞：47)  
**星级：5星**  
**关键亮点：**  
- 通过一维DP简化了状态表示，避免了三维DP的空间复杂度问题。
- 详细解释了状态转移方程和初始化过程，思路清晰。
- 代码简洁，可读性强，且通过曼哈顿距离判断转移条件。

**个人心得：**  
作者提到最初想到的是三维DP，但通过优化转化为一维DP，体现了对问题的深入理解和优化能力。

**核心代码：**
```cpp
for(int p = 1; p <= m; p++) {
    f[p] = 1;
    for(int i = 1; i < p; i++)
        if(dist(in[p].x, in[p].y, in[i].x, in[i].y) <= in[p].val - in[i].val)
            f[p] = max(f[p], f[i] + 1);
}
```

#### 2. 作者：Konnyaku_ljc (赞：25)  
**星级：4星**  
**关键亮点：**  
- 通过倒序循环优化了时间复杂度，从O(N^3)降为O(N^2)。
- 使用了一维DP，进一步降低了空间复杂度。
- 通过预处理和Floyd松弛操作的类比，增强了理解。

**核心代码：**
```cpp
for(int i = m; i > 1; i--)
    for(int j = i-1; j >= 1; j--)
        if(a[i].t - a[j].t >= abs(a[i].x - a[j].x) + abs(a[i].y - a[j].y))
            dp[j] = max(dp[i] + 1, dp[j]);
```

#### 3. 作者：Exber (赞：9)  
**星级：4星**  
**关键亮点：**  
- 将问题类比为最长不下降子序列，思路清晰。
- 通过曼哈顿距离判断转移条件，代码简洁。
- 提供了AC代码，便于参考。

**核心代码：**
```cpp
for(int i = 1; i <= m; i++) {
    dp[i] = 1;
    for(int j = 1; j < i; j++)
        if(abs(mou[i].x - mou[j].x) + abs(mou[i].y - mou[j].y) <= mou[i].t - mou[j].t)
            dp[i] = max(dp[i], dp[j] + 1);
}
```

### 最优关键思路与技巧

1. **一维DP优化**：通过将状态从三维简化为一维，大大降低了空间复杂度，同时保持了时间复杂度在可接受范围内。
2. **曼哈顿距离判断**：通过计算曼哈顿距离来判断机器人是否能在规定时间内从一个位置移动到另一个位置，是本题的核心判断条件。
3. **倒序循环优化**：通过倒序循环减少不必要的计算，进一步优化了时间复杂度。

### 可拓展之处

- **类似问题**：类似的最长上升子序列（LIS）问题，如洛谷P1020（导弹拦截）、P1091（合唱队形）等，都可以通过类似的DP思路解决。
- **优化技巧**：在DP问题中，通过状态压缩、倒序循环等技巧，可以有效降低时间和空间复杂度。

### 推荐题目

1. **P1020 导弹拦截**：考察最长不上升子序列和最长上升子序列的DP问题。
2. **P1091 合唱队形**：考察双向DP问题，类似于LIS的变种。
3. **P1439 【模板】最长公共子序列**：考察LCS问题，与LIS有相似的DP思路。

### 个人心得总结

- **调试经历**：多位作者提到最初想到的是三维DP，但通过优化转化为一维DP，体现了对问题的深入理解和优化能力。
- **踩坑教训**：部分作者提到在实现过程中遇到的时间复杂度和空间复杂度问题，通过倒序循环和一维DP优化解决了这些问题。
- **顿悟感想**：通过将问题类比为最长不下降子序列，部分作者迅速找到了解题思路，体现了类比思维在解题中的重要性。

---
处理用时：20.46秒
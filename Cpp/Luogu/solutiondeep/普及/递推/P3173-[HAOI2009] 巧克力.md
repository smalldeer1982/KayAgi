# 题目信息

# [HAOI2009] 巧克力

## 题目描述

有一块 $n \times m$ 的矩形巧克力，准备将它切成 $n \times m$ 块。巧克力上共有 $n-1$ 条横线和 $m-1$ 条竖线，你每次可以沿着其中的一条横线或竖线将巧克力切开，无论切割的长短，沿着每条横线切一次的代价依次为 $y_1,y_2,\cdots,y_{n-1}$，而沿竖线切割的代价依次为 $x_1,x_2,\cdots,x_{m-1}$。

例如，对于下图 $6 \times 4$ 的巧克力，我们先沿着三条横线切割，需要 $3$ 刀，得到 $4$ 条巧克力，然后再将这 $4$ 条巧克力沿竖线切割，每条都需要 $5$ 刀，则最终所花费的代价为 $y_1+y_2+y_3+4 \times (x_1+x_2+x_3+x_4+x_5)$。

![](https://cdn.luogu.com.cn/upload/image_hosting/juiv548x.png)


当然，上述简单切法不见得是最优切法，那么怎样切割该块巧克力，花费的代价最少呢？


## 说明/提示


$30\%$ 的数据，$n \leq 100,m \leq 100$；

$100\%$ 的数据，$n \leq 10000,m \leq 10000$；

## 样例 #1

### 输入

```
6 4
2
1
3
1
4
4
1
2```

### 输出

```
42```

# AI分析结果

### 综合分析与结论

本题的核心在于如何通过贪心策略最小化切割巧克力的总代价。大多数题解都采用了贪心算法，通过优先切割代价较高的线来减少总代价。具体来说，每次选择当前代价最高的切割线（无论是横向还是纵向），并根据已切割的次数计算当前切割的代价。这种方法确保了每次切割都是局部最优的，从而保证全局最优。

### 所选高星题解

#### 1. 作者：Tarsal (赞：17)
- **星级**：★★★★★
- **关键亮点**：思路清晰，代码结构良好，使用了优先队列来维护切割线的代价，确保每次选择当前代价最高的切割线。同时，详细解释了贪心策略的合理性，并通过样例验证了算法的正确性。
- **核心代码**：
  ```cpp
  priority_queue<int> q, qq;
  int n, m, s1 = 1, s2 = 1, ans;
  // s1表示已横着切了多少次，s2表示已竖着切了多少次
  while(! q.empty() && ! qq.empty()){
      if(q.top() > qq.top()){
          ans += q.top() * s2;
          ++ s1;
          q.pop();
      }
      else{
          ans += qq.top() * s1;
          ++ s2;
          qq.pop();
      }
  }
  ```
- **个人心得**：作者通过样例推导了贪心策略的正确性，并强调了优先队列在维护切割线代价顺序中的重要性。

#### 2. 作者：kkxhh (赞：12)
- **星级**：★★★★☆
- **关键亮点**：同样使用了优先队列，但代码更为简洁，且通过数学推导证明了贪心策略的正确性。代码实现上，优先队列的使用使得算法更加高效。
- **核心代码**：
  ```cpp
  priority_queue<int> q1,q2;
  int n,m,s1=1,s2=1,sum=0;
  while(!q1.empty() && !q2.empty()){
      if(q1.top()>q2.top()) {sum+=q1.top()*s2,s1++; q1.pop();}
      else {sum+=q2.top()*s1,s2++; q2.pop();}
  }
  ```
- **个人心得**：作者通过数学公式推导了贪心策略的合理性，并强调了优先队列在实现中的关键作用。

#### 3. 作者：MSqwq (赞：0)
- **星级**：★★★★☆
- **关键亮点**：代码简洁，使用了结构体来存储切割线的代价和方向，并通过排序实现了贪心策略。代码可读性强，且通过注释详细解释了每一步的操作。
- **核心代码**：
  ```cpp
  struct MS{ int op,x; }a[e];
  bool cmp(MS x,MS y){return x.x>y.x;}
  for(int i=1;i<=tot;i++){
      if(a[i].op==1)ans+=x*a[i].x,y++;
      else ans+=y*a[i].x,x++;
  }
  ```
- **个人心得**：作者通过结构体和排序简化了代码实现，并通过注释详细解释了贪心策略的实现过程。

### 最优关键思路与技巧

1. **贪心策略**：每次选择当前代价最高的切割线，确保每次切割都是局部最优的，从而保证全局最优。
2. **优先队列**：使用优先队列（或排序）来维护切割线的代价顺序，确保每次都能快速选择当前代价最高的切割线。
3. **代价计算**：在切割时，根据已切割的次数计算当前切割的代价，确保总代价最小化。

### 可拓展之处

- **类似题目**：可以扩展到其他需要贪心策略的题目，如任务调度、资源分配等。
- **算法套路**：贪心算法在解决最优问题时非常有效，尤其是在局部最优能保证全局最优的情况下。

### 推荐题目

1. [P1324 矩形分割](https://www.luogu.com.cn/problem/P1324)
2. [P3173 [HAOI2009] 巧克力](https://www.luogu.com.cn/problem/P3173)
3. [P1090 合并果子](https://www.luogu.com.cn/problem/P1090)

---
处理用时：17.87秒
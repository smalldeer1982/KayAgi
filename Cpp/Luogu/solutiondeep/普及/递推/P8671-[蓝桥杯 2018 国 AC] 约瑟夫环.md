# 题目信息

# [蓝桥杯 2018 国 AC] 约瑟夫环

## 题目描述

$n$ 个人的编号是 $1 \sim n$，如果他们依编号按顺时针排成一个圆圈，从编号是 $1$ 的人开始顺时针报数。

（报数是从 $1$ 报起）当报到 $k$ 的时候，这个人就退出游戏圈。下一个人重新从 $1$ 开始报数。

求最后剩下的人的编号。这就是著名的约瑟夫环问题。

本题目就是已知 $n$，$k$ 的情况下，求最后剩下的人的编号。


## 说明/提示

$0<n,k<10^6$。

时限 1 秒, 256M。蓝桥杯 2018 年第九届国赛

## 样例 #1

### 输入

```
10 3```

### 输出

```
4```

# AI分析结果

### 综合分析与结论

本题是经典的约瑟夫环问题，要求高效求解最后剩下的人的编号。题解中主要分为两种思路：模拟法和递推公式法。模拟法虽然直观，但时间复杂度较高（$O(nk)$），无法通过大规模数据测试。递推公式法通过数学推导，将时间复杂度降为$O(n)$，是更优的解决方案。

### 所选高星题解

#### 1. 作者：Joton (赞：34)
- **星级**：5星
- **关键亮点**：详细解释了递推公式的推导过程，代码简洁明了，时间复杂度为$O(n)$。
- **核心代码**：
  ```cpp
  int s = 0;
  for(int i = 2;i <= n;i++) {
      s=(s+k)%i;
  }
  cout << s+1;
  ```
- **个人心得**：通过递推公式，避免了模拟法的高时间复杂度，显著提升了算法效率。

#### 2. 作者：_fairytale_ (赞：12)
- **星级**：4星
- **关键亮点**：使用线段树优化模拟法，虽然复杂度仍为$O(n \log n)$，但提供了另一种思路，适合对线段树熟悉的读者。
- **核心代码**：
  ```cpp
  int queryr(int p,int l,int r,int rk){
      if(l==r)return l;
      if(t[ls]>=rk)return queryr(ls,l,mid,rk);
      else return queryr(rs,mid+1,r,rk-t[ls]); 
  }
  ```
- **个人心得**：通过线段树的区间查询和二分查找，优化了模拟法的查找过程，虽然复杂度不如递推公式法，但提供了另一种解题思路。

#### 3. 作者：5k_sync_closer (赞：9)
- **星级**：4星
- **关键亮点**：简洁的递推公式实现，代码非常简短，适合快速理解和实现。
- **核心代码**：
  ```cpp
  for (int i = 1; i <= n; ++i)
      q = (q + k - 1) % i + 1;
  ```
- **个人心得**：通过递推公式，简化了代码实现，适合在竞赛中快速写出高效代码。

### 最优关键思路或技巧

- **递推公式**：通过数学推导，得出$F(n) = (F(n-1) + k) \bmod n$的递推公式，将时间复杂度降为$O(n)$，是解决约瑟夫环问题的最优方法。
- **线段树优化**：虽然复杂度不如递推公式法，但提供了另一种思路，适合对线段树熟悉的读者。

### 可拓展之处

- **同类型题**：约瑟夫环问题有多种变体，如每次报数步长变化、环形链表等，可以通过类似的递推公式或数据结构优化来解决。
- **类似算法套路**：递推公式法可以应用于其他需要递推求解的问题，如动态规划、组合数学等。

### 推荐题目

1. [P1996 约瑟夫问题](https://www.luogu.com.cn/problem/P1996)
2. [P2286 [HNOI2004]树的计数](https://www.luogu.com.cn/problem/P2286)
3. [P1044 栈](https://www.luogu.com.cn/problem/P1044)

### 个人心得总结

- **调试经历**：模拟法虽然直观，但在大规模数据下容易超时，需要寻找更高效的算法。
- **踩坑教训**：递推公式的推导需要仔细，确保每一步的正确性。
- **顿悟感想**：通过数学推导，可以将复杂问题简化，显著提升算法效率。

---
处理用时：15.72秒
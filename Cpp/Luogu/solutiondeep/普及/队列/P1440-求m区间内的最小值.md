# 题目信息

# 求m区间内的最小值

## 题目描述

一个含有 $n$ 项的数列，求出每一项前的 $m$ 个数到它这个区间内的最小值。若前面的数不足 $m$ 项则从第 $1$ 个数开始，若前面没有数则输出 $0$。

## 说明/提示

对于 $100\%$ 的数据，保证 $1\le m\le n\le2\times10^6$，$1\le a_i\le3\times10^7$。

## 样例 #1

### 输入

```
6 2
7 8 1 4 3 2
```

### 输出

```
0
7
7
1
1
3 
```

# AI分析结果

### 综合分析

本题的核心在于求每个位置前m个元素的最小值，且数据规模较大（n ≤ 2×10^6），因此需要高效的算法。常见的解法包括单调队列、线段树、RMQ等。单调队列因其O(n)的时间复杂度成为最优解，而线段树和RMQ虽然也能解决问题，但时间和空间复杂度较高，尤其是在数据规模较大时容易超时或超内存。

### 题解评分与亮点

#### 1. **炳源 (赞：129)**
   - **星级**：★★★★★
   - **亮点**：详细介绍了单调队列的原理，并提供了手写版和STL版两种实现，代码清晰且优化到位。作者还对比了单调队列与线段树的优劣，帮助读者理解为何单调队列更适合本题。
   - **个人心得**：作者提到“如果一个人比你小，还比你强，那么你就打不过他了”，形象地解释了单调队列的维护过程。
   - **核心代码**：
     ```cpp
     while((head <= tail)&&(v[tail].val >= a[i - 1])) tail--;
     v[++tail].val = a[i - 1];
     while((head <= tail)&&(v[head].pos < i - m)) head++;
     min_que[i] = v[head].val;
     ```
   - **核心思想**：通过维护一个单调递增的队列，保证队首始终是当前窗口的最小值。

#### 2. **lcglcg (赞：43)**
   - **星级**：★★★★
   - **亮点**：简洁明了地解释了单调队列的实现思路，代码简洁且易于理解。作者通过举例说明了单调队列的维护过程，帮助读者快速掌握核心思想。
   - **核心代码**：
     ```cpp
     while(a[q[r-1]]>=a[i]&&l<r)r--;
     q[r++]=i;
     if(i-q[l]+1>m)l++;
     printf("%d",a[q[l]]);
     ```
   - **核心思想**：通过维护一个单调递增的队列，确保队首始终是当前窗口的最小值。

#### 3. **Aurora__ (赞：34)**
   - **星级**：★★★★
   - **亮点**：使用RMQ+滚动数组优化，虽然时间复杂度较高，但通过滚动数组优化了空间复杂度，适合对RMQ有一定了解的读者。
   - **核心代码**：
     ```cpp
     while(now <= n && min(now - 1, bp) < (1 << (j + 1))) {
         int l=now-bp;
         if(l<=0) l=1;
         int r=now-1;
         int x = g[r - l + 1];
         int ans = min(f[l][t], f[r - (1 << x) + 1][t]);
         printf("%d\n",ans);
         ++now;
     }
     ```
   - **核心思想**：通过滚动数组优化RMQ的空间复杂度，适合处理大规模数据。

### 最优关键思路与技巧

1. **单调队列**：通过维护一个单调递增的队列，保证队首始终是当前窗口的最小值，时间复杂度为O(n)，是本题的最优解。
2. **滚动数组优化**：在RMQ中，通过滚动数组减少空间复杂度，适合处理大规模数据。
3. **STL优先队列**：虽然时间复杂度较高，但代码简洁，适合对时间复杂度要求不高的场景。

### 可拓展之处

- **滑动窗口问题**：单调队列常用于解决滑动窗口的最值问题，如[P1886 滑动窗口](https://www.luogu.org/problem/P1886)。
- **动态规划优化**：单调队列常用于优化动态规划中的状态转移，如[P2032 扫描](https://www.luogu.org/problem/P2032)。
- **区间查询问题**：线段树和RMQ常用于解决区间查询问题，如[P1816 忠诚](https://www.luogu.org/problem/P1816)。

### 推荐题目

1. [P1886 滑动窗口](https://www.luogu.org/problem/P1886) - 单调队列的经典应用。
2. [P2032 扫描](https://www.luogu.org/problem/P2032) - 动态规划与单调队列的结合。
3. [P1816 忠诚](https://www.luogu.org/problem/P1816) - 线段树与RMQ的区间查询问题。

### 个人心得总结

- **调试经历**：多位作者提到在实现单调队列时，需要注意队首和队尾的维护，尤其是在元素出队时，确保队首始终是当前窗口的最小值。
- **踩坑教训**：使用线段树和RMQ时，容易因空间复杂度较高而导致MLE，因此需要优化空间复杂度，如使用滚动数组。
- **顿悟感想**：单调队列的核心思想是通过维护一个单调递增的队列，确保队首始终是当前窗口的最小值，这一思想在解决滑动窗口问题时非常有效。

---
处理用时：42.72秒
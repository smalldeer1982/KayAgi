# 题目信息

# [蓝桥杯 2018 省 B] 日志统计

## 题目描述

小明维护着一个程序员论坛。现在他收集了一份“点赞”日志，日志共有 $N$ 行。其中每一行的格式是 `ts id`，表示在 $ts$ 时刻编号 $id$ 的帖子收到一个“赞”。

现在小明想统计有哪些帖子曾经是“热帖”。如果一个帖子曾在任意一个长度为 $D$ 的时间段内收到不少于 $K$ 个赞，小明就认为这个帖子曾是“热帖”。

具体来说，如果存在某个时刻 $T$ 满足该帖在 $[T,T+D)$ 这段时间内（注意是左闭右开区间）收到不少于 $K$ 个赞，该帖就曾是“热帖”。

给定日志，请你帮助小明统计出所有曾是“热帖”的帖子编号。

## 说明/提示

对于 $50\%$ 的数据，$1 \le K \le N \le 1000$。

对于 $100\%$ 的数据，$1 \le K \le N \le 10^5$，$0 \le id, ts \le 10^5$。

时限 1 秒, 256M。蓝桥杯 2018 年第九届省赛

## 样例 #1

### 输入

```
7 10 2  
0 1  
0 10    
10 10  
10 1  
9 1
100 3  
100 3  ```

### 输出

```
1  
3  ```

# AI分析结果

### 综合分析与结论

本题的核心在于如何在给定的时间窗口内高效统计每个帖子的点赞次数，并判断其是否为“热帖”。大多数题解采用了排序和滑动窗口（或双指针）的策略，部分题解还使用了单调队列或暴力枚举的方法。整体来看，滑动窗口和单调队列是较为高效的解决方案，而暴力枚举虽然直观，但在大数据量下性能较差。

### 所选高星题解

#### 1. 作者：_Wind_Leaves_ShaDow_ (4星)
- **关键亮点**：使用了单调队列和滑动窗口的思想，结合结构体排序，代码简洁且高效。通过先按帖子编号排序，再按时间排序，确保每个帖子的点赞时间有序，从而简化了滑动窗口的实现。
- **核心代码**：
  ```cpp
  for(int i=1;i<=n;i++){
      while(z[l].id==z[i].id)i++;
      i--;
      head=1; tail=0;
      memset(que,0,sizeof(que));
      for(int j=l;j<=i;j++){
          while(head<=tail&&z[que[head]].ts+d<=z[j].ts)head++;
          que[++tail]=j;
          if(tail-head+1>=k){
              cout<<z[l].id<<'\n';
              l=i+1;
              break;
          }
          if(j==i)l=i+1;
      }
  }
  ```
- **个人心得**：作者提到滑动窗口的掌握和每一段的截取是关键，强调了排序的重要性。

#### 2. 作者：Zaku (4星)
- **关键亮点**：使用了双指针算法，通过维护一个时间窗口内的点赞次数，避免了重复计算。代码清晰，逻辑简单，适合理解滑动窗口的基本思想。
- **核心代码**：
  ```cpp
  for (int i = 0, j = 0; i < n; i ++ ){
      cnt[a[i].id] ++;
      while (a[i].ts - a[j].ts >= d){
          cnt[a[j].id] --;
          j ++;
      }
      if (cnt[a[i].id] >= k) st[a[i].id] = true;
  }
  ```
- **个人心得**：作者强调了双指针在有序序列中的应用，指出维护时间窗口的关键在于指针的移动。

#### 3. 作者：5k_sync_closer (4星)
- **关键亮点**：采用了时间轴扫描的方法，通过维护每个时间点的点赞次数，避免了排序和滑动窗口的复杂性。代码简洁且高效，适合处理大数据量。
- **核心代码**：
  ```cpp
  for (int i = 0; i <= 1e5; ++i){
      if (i >= d)
          for (auto j : v[i - d]) --c[j];
      for (auto j : v[i])
          if (++c[j] >= k) b[j] = 1;
  }
  ```
- **个人心得**：作者提到这种方法的优势在于避免了排序，直接通过时间轴扫描来统计点赞次数，适合处理大规模数据。

### 最优关键思路与技巧

1. **滑动窗口与双指针**：通过维护一个固定大小的时间窗口，利用双指针在有序序列中高效统计点赞次数。
2. **单调队列**：结合滑动窗口，使用单调队列来维护窗口内的点赞时间，确保窗口内的点赞时间有序。
3. **时间轴扫描**：通过扫描时间轴，直接统计每个时间点的点赞次数，避免了排序和滑动窗口的复杂性。

### 可拓展之处

- **类似算法套路**：滑动窗口和双指针常用于处理区间统计问题，如最长不重复子串、最小覆盖子串等。
- **同类型题目**：可以考虑处理其他时间窗口内的统计问题，如用户活跃度、商品销售量等。

### 推荐题目

1. [P1886 滑动窗口](https://www.luogu.com.cn/problem/P1886)
2. [P1496 火烧赤壁](https://www.luogu.com.cn/problem/P1496)
3. [P1638 逛画展](https://www.luogu.com.cn/problem/P1638)

### 个人心得总结

- **调试经历**：部分作者提到在处理边界条件时容易出错，如时间窗口的起始和结束点。
- **踩坑教训**：在处理大数据量时，暴力枚举方法性能较差，应优先考虑滑动窗口或单调队列等高效算法。
- **顿悟感想**：排序和滑动窗口的结合是解决此类问题的关键，理解其原理后代码实现会变得简单。

---
处理用时：34.40秒
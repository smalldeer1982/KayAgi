# 题目信息

# [蓝桥杯 2022 国 C] 六六大顺

## 题目描述

六六大顺，本指农历六月初六。多用于祝福中年人士家庭幸福，工作顺利，事业有成，身体健康。源自《左传》“君义，臣行，父慈，子孝，兄爱，弟敬，此数者累谓六顺也。”

$6$ 在我国自古以来是一个吉祥的数字，定义数列 $A = (a_1,a_2,\cdots,a_i,\cdots)$，其中 $a_1 = 6, a_2 = 66, \cdots, a_i = 10\cdot a_{i−1}+6$。

定义一个数列 $B = (b_1,b_2,\cdots,b_i,\cdots)$，其中 $b_1 = 6 \times 6, b_2 = 66\times66, \cdots, b_i = a_i \times a_i$。

现在小蓝想知道数列 $B$ 的前 $n$ 项的和是多少，你能帮帮小蓝吗？

## 说明/提示

**【样例说明】**

$b_1 = 6×6 = 36,b_2 = 66×66 = 4356,b_3 = 666×666 = 443556$，所以前三项的和为 $36 + 4356 + 443556 = 447948$。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，$1≤n≤100$；

对于 $50\%$ 的评测用例，$1≤n≤10^5$；

对于所有评测用例，$1\le n\le 10^7$。

蓝桥杯 2022 国赛 C 组 H 题。

## 样例 #1

### 输入

```
3```

### 输出

```
447948```

# AI分析结果

### 综合分析与结论

本题的核心在于高效计算数列 $B$ 的前 $n$ 项和，其中 $B_i = (\underbrace{666\cdots6}_{i \text{个}6})^2$。由于 $n$ 的最大值为 $10^7$，直接暴力计算或使用常规高精度算法会导致时间或空间超限。因此，题解主要集中在以下两个方向：
1. **数学公式推导**：通过将 $B_i$ 转化为 $\frac{4}{9}(10^i - 1)^2$，进一步简化为 $\frac{4}{9}(10^{2i} - 2 \times 10^i + 1)$，从而利用高精度计算。
2. **高精度优化**：使用压位高精度（如万进制）或优化高精度数组的存储方式（如用 `char` 代替 `int`），以减少空间和时间开销。

### 评分较高的题解

#### 1. **作者：0x282e202e202e2029 (赞：17)**  
**星级：★★★★★**  
**关键亮点**：  
- 通过数学推导将问题转化为高精度计算，避免了直接计算 $B_i$ 的复杂度。
- 使用 `int` 数组模拟高精度，避免了 `vector` 的高常数开销。
- 代码中使用了位运算和循环展开等优化技巧，进一步提升了性能。

**核心代码**：
```cpp
int n, arr[MAX];
int main() {
    scanf("%d", &n);
    arr[0] = 4 * n % 10, arr[1] = 4 * n / 10;
    for (int i = 1; i <= n; ++i) {
        arr[i << 1] = 4, arr[i] -= 8;
        arr[i + 1] += arr[i] / 10, arr[i] %= 10;
        if (arr[i] < 0) {
            arr[i] += 10, --arr[i + 1];
        }
    }
    for (int i = n + 1; arr[i] < 0; ++i) {
        arr[i + 1] += arr[i] / 10, arr[i] %= 10;
        arr[i] += 10, --arr[i + 1];
    }
    for (int i = 2 * n - 1; ~i; --i) {
        arr[i] += 10 * arr[i + 1];
        putchar(arr[i] / 9 + '0');
        arr[i] %= 9;
    }
    return 0; 
}
```
**核心思想**：通过 `arr` 数组模拟高精度计算，逐步构造结果并处理进位。

#### 2. **作者：Imakf (赞：7)**  
**星级：★★★★**  
**关键亮点**：  
- 将问题转化为区间加等差数列，利用二阶差分模拟计算过程。
- 代码简洁，复杂度为 $O(n)$，适合大规模数据处理。

**核心代码**：
```cpp
int n;
long long s[MX];
int main() {
  std::cin >> n;
  for (int i = 1; i <= n; ++i) {
    s[1] += 36;
    s[i + 1] -= 2 * 36;
    s[2 * i + 1] += 36;
  }
  for (int i = 1; i < MX ; ++i) s[i] += s[i - 1];
  for (int i = 1; i < MX ; ++i) s[i] += s[i - 1];
  int MAX = 0;
  for (int i = 1; i < MX; ++i) {
    s[i + 1] += s[i] / 10;
    s[i] %= 10;
    if (s[i]) MAX = i;
  }
  for (int i = MAX; i >= 1; --i) cout << s[i];
  cout << endl;
  return 0;
}
```
**核心思想**：通过二阶差分模拟区间加等差数列，最终通过累加得到结果。

#### 3. **作者：eb0ycn (赞：2)**  
**星级：★★★★**  
**关键亮点**：  
- 使用压位高精度（万进制）优化空间和时间开销。
- 代码清晰，逻辑严谨，适合高精度问题的通用解法。

**核心代码**：
```cpp
void write() {
    ret=c[ck];
    if(ret/9)printf("%d",ret/9);
    ret%=9;
    for(int i=ck-1;~i;--i) {
        ret=ret*mod+c[i];
        printf("%04d",ret/9);
        ret%=9;
    }
}
```
**核心思想**：通过压位高精度（万进制）存储和计算，减少数组大小和计算次数。

### 最优关键思路与技巧

1. **数学公式推导**：将 $B_i$ 转化为 $\frac{4}{9}(10^i - 1)^2$，简化计算过程。
2. **高精度优化**：使用压位高精度（如万进制）或优化数组存储方式（如用 `char` 代替 `int`），减少空间和时间开销。
3. **差分与区间加**：通过差分模拟区间加等差数列，降低计算复杂度。

### 可拓展之处

- **类似题目**：其他需要高精度计算的问题，如大数乘法、大数阶乘等。
- **算法套路**：数学公式推导 + 高精度优化，适用于大规模数据处理问题。

### 推荐题目

1. **P1009 [NOIP1998 普及组] 阶乘之和**（高精度计算）
2. **P1045 [NOIP2003 普及组] 麦森数**（高精度与大数运算）
3. **P1255 数楼梯**（高精度与递推）

### 个人心得摘录

- **调试经历**：多位作者提到直接使用 `vector` 或 `int` 数组会导致 MLE 或 TLE，最终通过优化存储方式（如 `char` 或压位高精度）解决了问题。
- **顿悟感想**：通过数学公式推导，将复杂问题转化为简单的高精度计算，极大地提升了效率。

---
处理用时：23.21秒
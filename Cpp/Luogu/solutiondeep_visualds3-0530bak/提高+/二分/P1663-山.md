# 题目信息

# 山

## 题目描述

给出一座山，如图。

![](https://cdn.luogu.com.cn/upload/image_hosting/9goc0bar.png)

现在要在山上的某个部位装一盏灯，使得这座山的任何一个部位都能够被看到。


给出最小的 $y$ 坐标，如图的 `+` 号处就是 $y$ 坐标最小的安装灯的地方。


## 说明/提示

数据规模：

$30 \%$ 的数据，$1 \le N \le 50$；


$100 \%$ 的数据，$1 \le N \le 5000$；$0 \le X_i, Y_i \le 100000$，保证答案不超过 $1000000$。


## 样例 #1

### 输入

```
6
0 0
10 0
11 1
15 1
16 0
25 0```

### 输出

```
3.00```

# AI分析结果



### 唯一算法分类  
二分  

---

### 综合分析与结论  
本题核心是通过二分法找到最低的 y 坐标，使得该点在所有山脊线段的「上方」。各题解的共同思路如下：  
1. **二分框架**：以 y 坐标为搜索目标，初始区间为 `[0, 1e6]`，通过二分逐步缩小范围。  
2. **验证条件**：  
   - 对于每条线段，计算其与 `y = mid` 的交点 x 坐标。  
   - 根据线段斜率正负，分别更新 x 的可行区间 `[L, R]`：  
     - 正斜率：约束右边界 `R = min(R, 交点x)`  
     - 负斜率：约束左边界 `L = max(L, 交点x)`  
     - 水平线：直接比较 y 值与 mid  
   - 最终判断 `L ≤ R`，即存在 x 坐标满足所有约束。  
3. **可视化设计**：  
   - **动画方案**：每次二分时，用横向扫描线动态展示当前 mid 的 y 值，并绘制所有线段与扫描线的交点 x 值，通过颜色区分不同斜率的线段（正：红色，负：蓝色，水平：绿色）。  
   - **高亮机制**：用闪烁效果标记当前 mid 值和关键交点，收缩区间时以箭头表示 left/right 的移动方向。  
   - **复古像素风格**：使用 8-bit 调色板，区间更新时触发「哔」声，找到答案时播放经典 FC 通关音效。  

---

### 题解评分 (≥4星)  
1. **Manjusaka丶梦寒**（⭐⭐⭐⭐⭐）  
   - 亮点：代码简洁，二分逻辑清晰，验证函数高效处理三类斜率，注释详细。  
   - 核心代码：  
     ```cpp  
     bool check(double x) {  
         double L = -2e9, R = 2e9;  
         for(int i=2; i<=n; i++) {  
             if(a[i]<0) L = max(L, (x - b[i])/a[i]);  
             else if(a[i]>0) R = min(R, (x - b[i])/a[i]);  
             else if(x < b[i]) return false;  
         }  
         return L <= R;  
     }  
     ```  
2. **iyanhang**（⭐⭐⭐⭐）  
   - 亮点：结构清晰，完整处理了输入数据转换，二分区间初始化为 `[0, 2e9]` 更鲁棒。  
3. **cszhpdx**（⭐⭐⭐⭐）  
   - 亮点：详细图解验证条件，代码注释完整，适合初学者理解斜率分类逻辑。  

---

### 最优思路与技巧提炼  
1. **二分答案模板**：  
   ```cpp  
   double l = 0, r = 1e6;  
   while (r - l > 1e-5) {  
       double mid = (l + r) / 2;  
       if (check(mid)) r = mid;  
       else l = mid;  
   }  
   ```  
2. **验证函数设计**：  
   - **正斜率线段**：约束右边界，取所有交点 x 的最小值。  
   - **负斜率线段**：约束左边界，取所有交点 x 的最大值。  
   - **水平线段**：直接比较 y 值与 mid，若 mid 小于线段 y 值则无解。  
3. **避免精度陷阱**：使用 `1e-5` 作为精度控制，避免浮点误差导致死循环。  

---

### 同类型题与算法套路  
- **通用二分模板**：适用于「最小化最大值」「最大化最小值」问题（如 P1182 数列分段、P3743 kotori 的设备）。  
- **约束合并技巧**：多条件验证时，通过独立处理每条约束再求交集，类似「半平面交」思想。  

---

### 推荐题目  
1. **P1182**：数列分段 Section II（二分最小化每段和的最大值）  
2. **P3743**：kotori 的设备（二分答案判断设备能否持续运行）  
3. **P4343**：[SHOI2015] 自动刷题机（二分答案求可行解边界）  

---

### 个人心得摘录  
- **Manjusaka**：提到「调试时发现精度设置过小会导致超时」，最终选择 `0.0001` 作为步长。  
- **cszhpdx**：通过手绘图解，顿悟「约束区间的交集对应可行解」。  

---

### 核心代码实现  
```cpp  
// 二分框架与验证函数（Manjusaka 题解）  
bool check(double x) {  
    double L = -2e9, R = 2e9;  
    for(int i=2; i<=n; i++) {  
        if(a[i]<0) L = max(L, (x - b[i])/a[i]);  
        else if(a[i]>0) R = min(R, (x - b[i])/a[i]);  
        else if(x < b[i]) return false;  
    }  
    return L <= R;  
}  
```  

---

### 复古游戏化动画设计  
1. **Canvas 绘制**：  
   - 横向网格表示 y 坐标，纵向动态显示 left/right/mid 的移动。  
   - 线段交点用像素块表示，正斜率红色，负斜率蓝色。  
2. **音效与交互**：  
   - **区间更新**：每次计算 mid 时播放「嘀」声。  
   - **验证通过**：显示绿色对勾并播放 FC 胜利音效。  
3. **自动演示模式**：AI 自动执行二分步骤，每步暂停 500ms，用户可随时切换手动控制。

---
处理用时：85.86秒
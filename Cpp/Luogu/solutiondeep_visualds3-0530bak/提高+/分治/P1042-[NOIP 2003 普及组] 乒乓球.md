# 题目信息

# [NOIP 2003 普及组] 乒乓球

## 题目背景

国际乒联现在主席沙拉拉自从上任以来就立志于推行一系列改革，以推动乒乓球运动在全球的普及。其中 $11$ 分制改革引起了很大的争议，有一部分球员因为无法适应新规则只能选择退役。华华就是其中一位，他退役之后走上了乒乓球研究工作，意图弄明白 $11$ 分制和 $21$ 分制对选手的不同影响。在开展他的研究之前，他首先需要对他多年比赛的统计数据进行一些分析，所以需要你的帮忙。

## 题目描述

华华通过以下方式进行分析，首先将比赛每个球的胜负列成一张表，然后分别计算在 $11$ 分制和 $21$ 分制下，双方的比赛结果（截至记录末尾）。

比如现在有这么一份记录，（其中 $\texttt W$ 表示华华获得一分，$\texttt L$ 表示华华对手获得一分）：

$$\texttt{WWWWWWWWWWWWWWWWWWWWWWLW}$$

在 $11$ 分制下，此时比赛的结果是华华第一局 $11$ 比 $0$ 获胜，第二局 $11$ 比 $0$ 获胜，正在进行第三局，当前比分 $1$ 比 $1$。而在 $21$ 分制下，此时比赛结果是华华第一局 $21$ 比 $0$ 获胜，正在进行第二局，比分 $2$ 比 $1$。如果一局比赛刚开始，则此时比分为 $0$ 比 $0$。直到分差大于或者等于 $2$，才一局结束。

**注意：当一局比赛结束后，下一局立刻开始**。

你的程序就是要对于一系列比赛信息的输入（$\texttt{WL}$ 形式），输出正确的结果。


## 说明/提示

每行至多 $25$ 个字母，最多有 $2500$ 行。

（注：事实上有一个测试点有 $2501$ 行数据。）

**【题目来源】**

NOIP 2003 普及组第一题

## 样例 #1

### 输入

```
WWWWWWWWWWWWWWWWWWWW
WWLWE
```

### 输出

```
11:0
11:0
1:1

21:0
2:1
```

# AI分析结果



**唯一算法分类**  
模拟

---

**综合分析与结论**  
该题核心在于模拟乒乓球比赛计分规则，根据输入字符序列分别统计11分制和21分制下的比赛结果。所有题解均采用遍历输入字符、动态统计比分的方式，通过判断是否满足分差条件来结束当前局。  

**核心难点与解决方案**：  
1. **输入处理**：需合并多行输入并过滤非WL字符。各题解通过循环读取字符至'E'，存入字符串或数组。  
2. **结束条件判断**：当一方得分≥分制（11/21）且分差≥2时结束一局。所有题解均正确使用`max(a,b)>=lim && abs(a-b)>=2`作为条件。  
3. **输出处理**：遍历结束后需输出未完成的比分，且两种分制结果间需空行。通过函数复用逻辑，减少代码冗余。  

**可视化设计思路**：  
- **动画流程**：逐字符高亮显示当前操作，实时更新双方得分。当满足结束条件时，用闪烁边框标记当前局比分并重置。  
- **复古风格**：使用8位像素字体和固定网格布局，得分板以绿色/红色方块表示WL序列。触发局结束时播放短促音效。  
- **交互功能**：支持步进/自动播放，可调节速度，展示两种分制对比动画。  

---

**题解清单 (≥4星)**  
1. **DengDuck（5星）**：函数复用减少重复代码，结构清晰，可读性极佳。  
   ```cpp
   void Work(int Lim) { ... } // 核心逻辑复用
   ```  
2. **qhr2023（5星）**：代码极简，三元运算符与函数结合，高效直观。  
   ```cpp
   void solve (int k) { ... } // 简洁条件判断
   ```  
3. **derderhaoyue（4星）**：处理输入时过滤无效字符，逻辑严谨，注释详细。  

---

**最优思路提炼**  
1. **函数复用**：将不同分制的处理逻辑封装为函数，通过参数传递分制值。  
2. **动态计分与条件判断**：遍历字符实时累加得分，判断`max(a,b)>=lim && abs(a-b)>=2`结束当前局。  
3. **输入合并处理**：循环读取字符至'E'，统一存储避免多行处理。  

**关键代码实现**  
```cpp
void process(int limit, const string& s) {
    int a = 0, b = 0;
    for (char c : s) {
        (c == 'W') ? a++ : b++;
        if (max(a, b) >= limit && abs(a - b) >= 2) {
            cout << a << ":" << b << endl;
            a = b = 0;
        }
    }
    cout << a << ":" << b << endl << endl;
}
```

---

**同类型题与套路**  
- **相似题型**：计分规则模拟（如羽毛球、排球等）。  
- **通用解法**：动态统计状态，设定终止条件，遍历输入处理。  

**推荐题目**  
1. P1563 玩具谜题（模拟方向与指令）  
2. P1067 多项式输出（规则模拟与格式化输出）  
3. P1058 立体图（二维结构模拟与输出）  

---

**个人心得摘录**  
- **输入过滤**：需注意测试数据可能包含多余字符（如题解中`W/L`外的字符需忽略）。  
- **边界处理**：最后一局未结束时必须输出剩余比分，易遗漏。  

---

**可视化与算法演示**  
```html
<!-- 示例：Canvas绘制得分板与动画逻辑 -->
<canvas id="game" width="640" height="480"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
let data = "WWLLW..."; // 输入字符序列
let index = 0, a = 0, b = 0, limit = 11;

function draw() {
    ctx.clearRect(0, 0, 640, 480);
    // 绘制当前字符高亮
    ctx.fillStyle = '#FF0000';
    ctx.fillText(data[index], 100 + index*10, 50);
    // 更新得分并检查条件
    if (data[index] === 'W') a++; else b++;
    if (Math.max(a, b) >= limit && Math.abs(a - b) >= 2) {
        // 触发局结束动画与音效
        playSound('score.mp3');
        a = b = 0;
    }
    index++;
    if (index < data.length) requestAnimationFrame(draw);
}
draw();
</script>
```  
- **复古音效**：使用8位芯片音效库（如ChipTone）生成得分与结束音效。  
- **自动演示**：通过`requestAnimationFrame`逐帧推进，支持暂停/继续。

---
处理用时：86.19秒
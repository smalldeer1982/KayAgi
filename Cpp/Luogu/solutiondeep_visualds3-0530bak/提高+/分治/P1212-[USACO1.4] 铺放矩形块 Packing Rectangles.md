# 题目信息

# [USACO1.4] 铺放矩形块 Packing Rectangles

## 题目描述

给定 $4$ 个矩形块，找出一个最小的封闭矩形将这 $4$ 个矩形块放入，但不得相互重叠。所谓最小矩形指该矩形面积最小。

![](https://cdn.luogu.com.cn/upload/image_hosting/gu39gbyb.png)

$4$ 个矩形块中任一个矩形的边都与封闭矩形的边相平行，上图显示出了铺放 $4$ 个矩形块的 $6$ 种方案。  

这 $6$ 种方案是唯一可能的基本铺放方案。因为其它方案能由基本方案通过旋转和镜像反射得到。

可能存在满足条件且有着同样面积的各种不同的封闭矩形，你应该输出所有这些封闭矩形的边长。



## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，输入的所有数在 $[1,50]$ 内。

题目翻译来自NOCOW。

USACO Training Section 1.4


## 样例 #1

### 输入

```
1 2
2 3
3 4
4 5
```

### 输出

```
40
4 10
5 8
```

# AI分析结果



# 分析报告：洛谷 P1212 铺放矩形块

## 1. 算法分类
**暴力枚举 + 全排列处理**

---

## 2. 题解思路与解决难点
### 核心逻辑
1. **排列生成**：通过 DFS 或 `next_permutation` 生成 4 个矩形的所有排列顺序。
2. **旋转处理**：每个矩形可旋转（交换长宽），需枚举 $2^4=16$ 种方向组合。
3. **布局计算**：对每个排列+旋转组合，套用 6 种基本布局公式计算封闭矩形尺寸。

### 解决难点
- **第六种布局**：需分 5 种子情况计算长度（如 `h3 >= h2 + h4` 时特殊处理），各题解条件判断逻辑不同。
- **去重优化**：需记录所有可能的长宽组合，避免重复输出。

---

## 3. 题解评分（≥4星）
| 题解作者 | 评分 | 核心亮点 |
|---------|------|----------|
| 七喜     | ★★★★☆ | DFS 生成排列，代码模块化清晰 |
| Chiesl  | ★★★★☆ | 详细注释第六种布局，分情况推导 |
| Fijian_Bus | ★★★★☆ | 位运算处理旋转，全排列简洁 |

---

## 4. 最优思路提炼
### 关键技巧
- **全排列+旋转枚举**：`next_permutation` 生成排列，位运算（如 `i >> j & 1`）标记是否旋转。
- **布局公式化**：将 6 种布局的尺寸计算抽象为独立函数，如 `check()`。
- **条件压缩**：对第六种布局，用数学条件合并相似情况减少分支。

### 代码片段（Fijian_Bus）
```cpp
// 枚举所有方向组合（i 的二进制位表示是否旋转）
for(int i=0; i<(1<<4); i++){
    for(int j=0;j<4;j++) 
        tmp[j] = (i>>j &1) ? swap(w[j]) : w[j];
    check(tmp);
}
```

---

## 5. 同类题目推荐
1. **P1236** 算24点 - 枚举运算符和运算顺序
2. **P1706** 全排列问题 - 全排列生成基础
3. **P1094** 纪念品分组 - 双指针+枚举组合

---

## 6. 可视化设计
### 动画方案
- **像素风格**：用 8-bit 色块表示矩形，当前操作矩形高亮为红色。
- **布局演示**：点击按钮切换 6 种布局，动态绘制封闭矩形边框（黄色）。
- **条件高亮**：第六种布局时，用不同颜色标记满足的条件分支。

### 交互功能
- **步进控制**：按钮单步执行排列生成、旋转、布局计算。
- **音效反馈**：成功找到更优解时播放 `8-bit` 上升音效，布局切换时“咔嗒”声。

### 代码片段（伪代码）
```javascript
// Canvas 绘制当前布局
function drawLayout(layoutType) {
    ctx.fillStyle = '#FF0000'; // 当前矩形红色
    drawRect(currentRect);
    ctx.strokeStyle = '#FFFF00'; // 封闭矩形黄色
    strokeBoundingBox();
}
```

---

## 7. 结论
通过暴力枚举所有排列和旋转，结合公式化布局计算，可高效解决此题。可视化设计中动态分步演示和条件高亮能显著提升对复杂布局的理解。

---
处理用时：57.75秒
# 题目信息

# [六省联考 2017] 期末考试

## 题目描述

有 $n$ 位同学，每位同学都参加了全部的 $m$ 门课程的期末考试，都在焦急的等待成绩的公布。

第 $i$ 位同学希望在第 $t_i$ 天或之前得知**所有**课程的成绩。如果在第 $t_i$ 天，有至少一门课程的成绩没有公布，他就会等待最后公布成绩的课程公布成绩，每等待一天就会产生 $C$ 不愉快度。

对于第 $i$ 门课程，按照原本的计划，会在第 $b_i$ 天公布成绩。

有如下两种操作可以调整公布成绩的时间:
1. 将负责课程 $X$ 的部分老师调整到课程 $Y$，调整之后公布课程 $X$ 成绩的时间推迟一天，公布课程 $Y$ 成绩的时间提前一天；每次操作产生 $A$ 不愉快度。
2. 增加一部分老师负责学科 $Z$，这将导致学科 $Z$ 的出成绩时间提前一天；每次操作产生 $B$ 不愉快度。

上面两种操作中的参数 $X, Y, Z$ 均可任意指定，每种操作均可以执行多次，每次执行时都可以重新指定参数。

现在希望你通过合理的操作，使得最后总的不愉快度之和最小，输出最小的不愉快度之和即可。

## 说明/提示

### 样例解释 1

由于调整操作产生的不愉快度太大，所以在本例中最好的方案是不进行调整；全部的 $5$ 门课程中，最慢的在第 $3$ 天出成绩；  
同学 $1$ 希望在第 $5$ 天或之前出成绩，所以不会产生不愉快度；  
同学 $2$ 希望在第 $1$ 天或之前出成绩，产生的不愉快度为 $(3 - 1) \times 2 = 4$；  
同学 $3$ 希望在第 $2$ 天或之前出成绩，产生的不愉快度为 $(3 - 2) \times 2 = 2$；  
同学 $4$ 希望在第 $3$ 天或之前出成绩，所以不会产生不愉快度；  
不愉快度之和为 $4 + 2 = 6$。

### 数据范围

| Case # | $n, m, t_i, b_i$ | $A, B, C$ |
|:-:|:-:|:-:|
| 1, 2 | $1 \leq n, m, t_i, b_i \leq 2000$ | $A = 10^9; B = 10^9; 0 \leq C \leq 10^2$ |
| 3, 4 | $1 \leq n, m, t_i, b_i \leq 2000$ | $0 \leq A; C \leq 10^2; B = 10^9$ |
| 5, 6, 7, 8 | $1 \leq n, m, t_i, b_i \leq 2000$ | $0 \leq B \leq A \leq 10^2; 0 \leq C \leq 10^2$ |
| 9 - 12 | $1 \leq n, m, t_i, b_i \leq 2000$ | $0 \leq A, B, C \leq 10^2$ |
| 13, 14 | $1 \leq n, m, t_i, b_i \leq 10^5$ | $0 \leq A, B \leq 10^5; C = 10^{16}$ |
| 15 - 20 | $1 \leq n, m, t_i, b_i \leq 10^5$ | $0 \leq A, B, C \leq 10^5$ |

## 样例 #1

### 输入

```
100 100 2
4 5
5 1 2 3
1 1 2 3 3```

### 输出

```
6```

## 样例 #2

### 输入

```
3 5 4
5 6
1 1 4 7 8
2 3 3 1 8 2```

### 输出

```
33```

# AI分析结果



**唯一算法分类**：枚举法结合前缀和优化

---

### **综合分析与结论**

**核心思路**：  
题目要求找到最优的课程最晚公布时间 `t`，使得总不愉快度最小。关键在于如何高效计算每个 `t` 对应的调整成本和学生等待成本，结合前缀和数组快速统计各部分数值。

**算法流程**：  
1. **预处理前缀和**：统计每个时间点的学生和课程数量，计算累积和以便快速查询。  
2. **枚举时间 `t`**：遍历所有可能的 `t`，计算调整课程的代价和学生的等待代价。  
3. **调整策略选择**：根据 `A` 和 `B` 的大小关系，优先使用更优的操作组合（转移老师或直接调整）。  
4. **取最小值**：在所有枚举的 `t` 中，选择总代价最小的作为答案。

**可视化设计**：  
- **动态折线图**：展示总代价随 `t` 的变化，高亮当前 `t` 值及对应成本。  
- **像素风格时间轴**：用不同颜色块表示课程和学生分布，调整操作时显示动态变化。  
- **音效交互**：枚举时播放步进音效，发现更优解时触发上扬音效。

---

### **题解评分 (≥4星)**

1. **泅荼 (5星)**  
   - **亮点**：直接枚举时间 `t`，利用前缀和快速计算调整与学生等待代价，代码简洁高效。  
   - **代码可读性**：结构清晰，变量命名明确，预处理逻辑直接。  

2. **wjyyy (4星)**  
   - **亮点**：采用三分法优化搜索，证明单峰函数性质，时间复杂度更优。  
   - **实现复杂度**：需处理边界条件，代码稍复杂但逻辑严谨。  

3. **Soulist (4星)**  
   - **亮点**：前缀和与贪心结合，处理 `A < B` 和 `A ≥ B` 的策略区分明确。  

---

### **最优思路或技巧提炼**

1. **前缀和优化**：通过预处理学生和课程的时间分布，快速计算每个 `t` 的调整与等待代价。  
2. **调整策略选择**：根据 `A` 和 `B` 的比值动态选择操作组合，优先使用更经济的调整方式。  
3. **枚举与分治结合**：直接枚举或三分法均能高效定位最优解，核心在于代价函数的快速计算。

---

### **相似题目推荐**

1. **P2218 [HAOI2007] 覆盖问题**：寻找最优覆盖范围，涉及枚举与贪心策略。  
2. **P4344 [SHOI2015] 脑洞治疗仪**：利用前缀和优化区间操作。  
3. **P1845 影像之结构化特征**：单峰函数的最值搜索，适合三分法或枚举。

---

### **核心代码实现**

```cpp
#include<cstdio>
#include<algorithm>
using namespace std;
typedef unsigned long long ll;
const int N=1e5+5;
ll bac[N], bac2[N], ti[N], bi[N], A, B, C, n, m;

int main() {
    scanf("%lld%lld%lld%lld%lld", &A, &B, &C, &n, &m);
    for(int i=1; i<=n; i++) 
        scanf("%lld", &ti[i]), bac2[ti[i]]++;
    for(int i=1; i<=m; i++) 
        scanf("%lld", &bi[i]), bac[bi[i]]++;
    
    ll sum1=0, t1=0, sum2=0, t2=0, sum3=0, t3=0;
    // 预处理前缀和
    for(int i=1; i<=1e5; i++) {
        bac[i] += bac[i-1];
        bac2[i] += bac2[i-1];
    }
    
    ll ans = 1e18;
    for(ll i=1e5; i>=1; i--) {
        // 计算调整代价
        ll adjust = 0;
        ll need = sum1 - t1 * i;  // 需要调整的课程数
        if(A < B) {
            ll avail = t2 * i - sum2; // 可用的调整次数
            adjust += min(need, avail) * A;
            need -= min(need, avail);
            adjust += need * B;
        } else {
            adjust += need * B;
        }
        // 学生等待代价
        ll wait = (bac2[i] * i - sum3) * C;
        ans = min(ans, adjust + wait);
    }
    printf("%llu\n", ans);
    return 0;
}
```

---

### **可视化与算法演示**

**动画设计**：  
1. **时间轴展示**：横向时间轴，每个点标注当前课程数和学生数。  
2. **动态调整**：高亮当前 `t` 值，显示调整操作的影响区域。  
3. **代价折线图**：右侧动态更新总代价曲线，标记最小值点。

**复古像素风格**：  
- **8-bit 颜色**：课程用红色块，学生用蓝色块，调整操作用闪烁黄色。  
- **音效触发**：每次枚举 `t` 时播放“滴”声，找到更优解时播放“胜利”音效。

**交互功能**：  
- **速度调节**：滑动条控制枚举速度，支持暂停/继续。  
- **AI 自动演示**：自动寻找最优解，动态显示搜索路径。

---
处理用时：101.56秒
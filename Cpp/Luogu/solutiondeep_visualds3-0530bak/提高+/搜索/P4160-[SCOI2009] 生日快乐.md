# 题目信息

# [SCOI2009] 生日快乐

## 题目描述

windy 的生日到了，为了庆祝生日，他的朋友们帮他买了一个边长分别为 $X$ 和 $Y$ 的矩形蛋糕。

现在包括 windy，一共有 $N$ 个人来分这块大蛋糕，要求每个人必须获得相同面积的蛋糕。

windy 主刀，每一切只能平行于一块蛋糕的一边（任意一边），并且必须把这块蛋糕切成两块。

这样，要切成 $N$ 块蛋糕，windy 必须切 $N-1$ 次。

为了使得每块蛋糕看起来漂亮，我们要求 $N$ 块蛋糕的长边与短边的比值的最大值最小。

你能帮助 windy 求出这个比值么？


## 说明/提示

对于 $100\%$ 的数据，满足 $1 \le X,Y \le 10^4$，$1\le N\le 10$。


## 样例 #1

### 输入

```
5 5 5```

### 输出

```
1.800000```

# AI分析结果



# 算法分类
**DFS**

---

# 题解思路与核心难点

## **思路要点**
1. **递归分治**：将大矩形切割为若干小矩形，每次切割有两种方向（横切/纵切）。
2. **枚举切割点**：每次切割需保证子矩形面积均分，切割位置为当前矩形长度的整数倍分割（`mx = x/k`或`my = y/k`）。
3. **最优化策略**：对每次切割后的两部分取最大长宽比，最终取所有可能切割方式中的最小值。

## **解决难点**
- **状态定义**：递归函数`dfs(x, y, k)`表示将长宽为`x,y`的矩形分成`k`块时的最小最大比值。
- **切割约束**：必须保证每次切割后的子矩形能被均分为整数块，避免无效分割。
- **剪枝优化**：枚举分割块数时仅需遍历`1 ≤ i ≤ k/2`，避免重复计算对称情况。

---

# 题解评分（≥4星）

1. **浅色调（★★★★☆）**  
   - 代码简洁，递归逻辑清晰，直接调用`max`和`min`处理最优解。
   - 关键亮点：明确切割位置为`mx*i`和`x-mx*i`的倍数，避免复杂计算。

2. **Huah（★★★★☆）**  
   - 思路与浅色调一致，注释较少但代码结构清晰。
   - 提出“哈希记忆化”优化方向，虽未实现但启发思考。

3. **Jesselrj（★★★★☆）**  
   - 图文结合解释样例，辅助理解切割过程。
   - 代码规范，变量命名直观（如`nx, ny`表示分割后的单位长度）。

---

# 最优思路提炼
**关键代码片段（浅色调题解）**：
```cpp
double dfs(double x, double y, int k) {
    if (k == 1) return max(x, y) / min(x, y);
    double ans = INF, mx = x / k, my = y / k;
    for (int i = 1; i <= k/2; ++i) {
        double t1 = max(dfs(mx*i, y, i), dfs(x - mx*i, y, k - i));
        double t2 = max(dfs(x, my*i, i), dfs(x, y - my*i, k - i));
        ans = min(ans, min(t1, t2));
    }
    return ans;
}
```
**核心思想**：每次递归尝试横切与纵切，计算子问题的最大比值并取最小。

---

# 类似题目与算法套路
- **同类型题**：矩形分割、均分面积最优化问题。
- **通用解法**：DFS + 分治，枚举分割点并递归子状态。

## **推荐题目**
1. [P1433 吃奶酪](https://www.luogu.com.cn/problem/P1433)（DFS + 状态压缩）
2. [P1092 虫食算](https://www.luogu.com.cn/problem/P1092)（DFS搜索字母映射）
3. [P1120 小木棍](https://www.luogu.com.cn/problem/P1120)（DFS剪枝优化）

---

# 可视化设计（DFS切割动画）

## **动画方案**
1. **像素风格展示**：用不同颜色表示当前矩形和切割线，子矩形递归时切换颜色。
2. **步进控制**：用户可调整速度观察切割顺序，高亮当前处理的子矩形。
3. **音效提示**：切割时播放8-bit音效，递归到底层时播放完成音效。

## **交互设计**
- **控制面板**：暂停/继续、调整动画速度、单步执行。
- **状态显示**：当前矩形尺寸、剩余切割次数、实时最大比值。

---

# 个人心得摘录
- **浅色调**提到“不是倍数就无法保证后续切割”，强调切割约束的必要性。
- **小黑AWM**指出“题面误导性”，提醒仔细理解题意避免错误建模。

---

**可视化演示示例（伪代码）**：
```javascript
// 伪代码：Canvas绘制切割过程
function drawCut(x, y, dir, pos) {
    ctx.fillStyle = "#8B00FF"; // 紫色表示当前矩形
    ctx.fillRect(0, 0, x, y);
    ctx.fillStyle = "#FFD700"; // 金色切割线
    if (dir === 'H') ctx.fillRect(0, pos, x, 2); // 横切
    else ctx.fillRect(pos, 0, 2, y); // 纵切
    // 递归绘制子矩形...
}
```

---
处理用时：98.52秒
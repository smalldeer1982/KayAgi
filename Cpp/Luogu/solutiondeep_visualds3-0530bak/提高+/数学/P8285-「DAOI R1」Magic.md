# 题目信息

# 「DAOI R1」Magic

## 题目背景

> $ \text{-1,-1,+2} $

## 题目描述

乔木 来到了大魔王的面前，他决定使用魔法击败魔王。

给定一个整数 $n$，表示有 $n$ 个魔法阵，在每个魔法阵上都存在着一定的魔力值 $a_i$。

你每次可以选择三个魔法阵 $i,j,k\;(i,j,k$ 互不相同且 $a_i>0$，$a_j>0)$，然后 乔木 将会让第 $i$ 个魔法阵和第 $j$ 个魔法阵上的魔力值 $a_i,a_j$ 分别减 $1$，并让第 $k$ 个魔法阵上的魔力值 $a_k$ 加 $2$，我们将这称之为一次操作。

乔木 想要将所有的魔力汇聚到一起以发挥最大的威力。他想知道在经过若干次操作后，能否让其中 $n-1$ 个魔法阵上的魔力值为 $0$，并使汇聚的那一个魔法阵的魔力值为原魔法阵的所有魔力值之和。

## 说明/提示

### 样例解释
- 对于第一组数据，可以将 $a_1$ 和 $a_3$ 对 $a_4$ 进行两次操作。
- 对于第二组数据，可以证明不行。

### 数据范围
- 对于 $5\%$ 的数据：$1\le n\le2$，$0\le a_i\le10^3$。
- 对于 $20\%$ 的数据：$1\le n\le10$，$0\le a_i\le10^3$。
- 对于 $100\%$ 的数据：$1\le \sum{n}\le2\times10^{6}$，$0\le a_i\le10^{9}$。

对于所有数据，保证 $1\le T\le100$ 且 $\sum\limits_{i=1}^{n} a_i \ge1$。

## 样例 #1

### 输入

```
2
4
2 0 2 2
3
5 0 7```

### 输出

```
YES
NO```

# AI分析结果



**唯一算法分类：数论**

---

### **综合分析与结论**
题目要求通过特定操作将魔力汇聚到一个魔法阵。关键点在于分析不同规模（n）下的数学条件：

1. **操作性质**：总和不变，需构造特定分布。
2. **分类讨论**：
   - **n=1**：直接满足。
   - **n=2**：无法操作，必须存在一个0。
   - **n=3**：处理后两个数需满足模3相等或有一个为0。
   - **n≥4**：排除仅剩1和2的情况即可。

**关键公式推导**：
- **n=3**：排序后，将最小值转移到最大值，剩余两数需满足 `a ≡ b (mod 3)` 或其中之一为0。
- **n≥4**：统计0、1、2的个数，若0有`n-2`个且1、2各一个，则无法操作。

**可视化设计**：
- **动画演示**：展示操作步骤，如选三个魔法阵，红色高亮被减的i、j，绿色高亮被加的k。
- **像素风格**：用8位色块表示魔法阵，音效提示操作成功或失败。
- **步进控制**：用户可单步执行观察余数变化，动态显示模3结果。

---

### **题解清单 (≥4星)**

1. **Erinyes (⭐⭐⭐⭐)**  
   - **亮点**：详细推导各情况，覆盖所有边界条件。  
   - **代码**：分情况统计0、1、2的数量，逻辑清晰。

2. **快斗游鹿 (⭐⭐⭐⭐)**  
   - **亮点**：简化n=3的判断为模3相等或为0，代码更简洁。  
   - **代码**：直接检查余数关系，高效实用。

---

### **核心代码实现**
```cpp
// n=3 的判断（快斗游鹿版）
sort(a, a + 3);
int x = a[1] - a[0], y = a[2] + 2 * a[0];
if (x % 3 == 0 || y % 3 == 0 || x % 3 == y % 3) {
    cout << "YES\n";
} else {
    cout << "NO\n";
}

// n≥4 的判断（Erinyes版）
int cnt0 = count(a, a + n, 0);
int cnt1 = count(a, a + n, 1);
int cnt2 = count(a, a + n, 2);
if (cnt0 == n - 2 && cnt1 == 1 && cnt2 == 1) {
    cout << "NO\n";
} else {
    cout << "YES\n";
}
```

---

### **同类型题与套路**
- **常见套路**：数论模运算 + 分类讨论，如判断操作可行性、构造特定状态。
- **推荐题目**：
  1. 洛谷 P1031：均分纸牌（操作转移）
  2. 洛谷 P2119：魔法阵（数论构造）
  3. 洛谷 P1246：编码问题（组合条件判断）

---

### **复古游戏化动画设计**
- **像素色块**：魔法阵用16色像素块表示，操作时闪烁红绿。
- **音效**：成功操作播放8-bit上升音阶，失败则低沉音效。
- **自动演示**：模拟AI逐步消减数值，动态显示余数变化，最终汇聚到一点。

---

**关键点总结**：通过数论模运算和分类讨论，快速判断不同规模下的可行性，核心在于余数关系和特殊情况的排除。

---
处理用时：86.08秒
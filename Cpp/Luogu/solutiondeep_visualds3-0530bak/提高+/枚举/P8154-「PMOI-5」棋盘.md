# 题目信息

# 「PMOI-5」棋盘

## 题目描述

给定一个无限大的棋盘（可以看做平面直角坐标系）和黑白子各 $n$ 颗，要求将黑白子不重叠地摆在棋盘的整点上，使得**恰好**存在 $n$ 条直线使得：

- 其穿过且**仅**穿过黑白子**共** 4 颗。

- 其按顺序穿过黑，白，白，黑子。

给出任意一种方案即可。

## 说明/提示

【样例解释】

样例 2 解释：（输出按顺序为点 $A\sim N$（点 $A\sim G$ 为白子，点 $H\sim N$ 为黑子），直线如图所示）。

![](https://cdn.luogu.com.cn/upload/image_hosting/zyo823p8.png)

【数据范围】

**本题采用捆绑测试。**

- Subtask 1（10 pts）：$n\equiv 0 \pmod{7}$；
- Subtask 2（20 pts）：$40\le n\le 400$；
- Subtask 3（30 pts）：$1\le n\le 9$；
- Subtask 4（40 pts）：无特殊限制。

对于 $100\%$ 的数据，$1\le n\le 10^3$。

[SPJ地址](https://www.luogu.com.cn/paste/eamtmrw5)

使用方法：编译为 `checker.exe` 后命令行同一目录下输入 ```checker.exe chessboard.in chessboard.out chessboard.ans```

需要搭配 `testlib.h` 一起使用，[testlib下载地址](https://github.com/MikeMirzayanov/testlib)。

如果发现 SPJ 出锅了请找出题人。

## 样例 #1

### 输入

```
1```

### 输出

```
NO```

## 样例 #2

### 输入

```
7```

### 输出

```
YES
2 4
2 6
4 6
5 4
6 4
6 2
4 2
0 6
2 8
6 6
8 2
6 0
3 0
2 2
```

# AI分析结果



## 算法分类
构造

---

## 题解分析与结论

### 核心思路与难点
1. **基础构造**：所有解法均以样例 n=7 的构造为基础，通过拆分大n为若干小结构（如n=6/7的模块），每个模块内部满足恰好一条直线的条件。
2. **坐标隔离**：通过随机大位移或预定义偏移，确保不同模块之间无法形成符合条件的直线。
3. **余数处理**：对无法整除的部分（如n%6=5），单独构造特殊形状（如五角星）。

### 关键算法流程
1. **模块拆分**：将n拆分为多个基础模块（如6或7）和余数部分。
2. **坐标生成**：对每个模块生成特定坐标模式（如六边形、五角星）。
3. **位移隔离**：为每个模块添加足够大的随机位移，避免跨模块直线干扰。

---

## 题解评分（≥4星）

### Loser_King（5星）
- **亮点**：官方解法，系统性强，明确模块拆分策略与位移隔离逻辑。
- **代码**：使用n=7样例结构为基础，分层处理各Subtask。
- **可视化重点**：模块化构造与位移动画，不同模块用不同颜色区分。

### int08（4星）
- **亮点**：提出随机位移思想，代码实现简洁高效。
- **代码片段**：通过`ran1`和`ran2`数组生成混乱偏移，避免冲突。
```cpp
int ran1[5000], ran2[5000];
for (i=1; i<=2000; i++) 
    ran1[i] = rand()%256 + 1063 + ran1[i-1];
```

### 欧买歌（4星）
- **亮点**：预存小n坐标数组，快速生成基础形状。
- **代码片段**：坐标数组直接存储各n值的构造。
```cpp
int crd[5][18][2] = { /* 预定义坐标数据 */ };
```

---

## 最优技巧提炼
1. **模块化构造**：将大问题分解为已验证的小模块（如n=6/7）。
2. **随机大位移**：通过质数级偏移隔离模块，避免产生新直线。
3. **特殊形状处理**：对n=5等特殊值采用五角星等几何对称结构。

---

## 同类型题推荐
1. [P3723 - 礼物](https://www.luogu.com.cn/problem/P3723)（构造+坐标变换）
2. [CF1358D - The Best Vacation](https://codeforces.com/problemset/problem/1358/D)（周期分解）
3. [P1498 - 南蛮图腾](https://www.luogu.com.cn/problem/P1498)（分形构造）

---

## 可视化设计（复古像素风格）
### 动画流程
1. **网格绘制**：Canvas绘制棋盘坐标系，背景为深蓝色（#1A1C2C）。
2. **模块生成**：
   - 初始模块以绿色（#A3F7B5）绘制，按六边形排列棋子。
   - 每次新模块向右上位移，使用橙色（#FFA647）标记。
3. **直线高亮**：当模块生成后，红色（#FF3D3D）闪烁显示其内部符合条件的直线。
4. **音效设计**：
   - 放置棋子：8-bit "哔"声（Square波形，频率500Hz）。
   - 生成模块：上升音阶（C4-E4-G4）。

### 交互控制
- **方向键**：手动调整新模块位移方向。
- **空格键**：暂停/继续自动生成模式。
- **数字显示**：右上角显示已生成直线数/总n值。

---

## 个人心得摘录
> "本题的核心不是算法优化，而是如何通过几何直觉构造出满足条件的形状。调试时发现，哪怕偏移量差1，也可能产生意外直线，最终采用随机大质数位移才稳定通过。" —— int08

---

## 核心代码实现（Loser_King思路）
```cpp
// 基础六边形模块生成
void generate_module(int base_x, int base_y) {
    vector<pair<int, int>> white = {
        {base_x+2, base_y+4}, {base_x+2,6}, ..., // 白子坐标
    };
    vector<pair<int, int>> black = {
        {base_x+0,6}, {base_x+2,8}, ..., // 黑子坐标
    };
    // 输出坐标并添加偏移
    for (auto p : white) cout << p.first << " " << p.second << endl;
    for (auto p : black) cout << p.first << " " << p.second << endl;
}

// 主逻辑：拆分n为多个模块
int offset = 10007; // 大质数偏移
for (int i=0; i<n/7; i++) {
    generate_module(i*offset, i*offset);
    offset += 20011; // 每次增加不同质数
}
```

---
处理用时：83.66秒
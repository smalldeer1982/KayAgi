# 题目信息

# 水の斗牛

## 题目背景

蒟蒻${\rm CYJian}$拉着${\rm JerryC}$和${\rm Justin}$等一众机房巨佬来打斗牛辣！！

## 题目描述

现在一共有$N$个人玩起了斗牛。一共玩了T局，每局有三个人参与游戏，每个人的初始分都是0。

本题为了方便，对于斗牛的基本规则做了些许变动，具体规则如下：

## 1.基本规则

每一轮斗牛开始时，每一位玩家都会拿到5张牌。

每张牌一定是一个2到10之间的整数或A(表示1)。

每张牌有一个花色，a代表黑桃，b代表红桃，c代表梅花，d代表方块。


## 2.牌型

五张牌中，除炸弹和无牛牌型以外，都分为两个部分：牛和分。其中牛包括三张点数相同(铁板)或三张点数和为10的倍数的牌，分包括剩下的两张牌，一套牌的分即为这两张牌模10的余数。

1)炸弹：四张点数相同的牌。

2)牛牛：分恰好为0。

3)牛：分不为0，分和牛数的数值相同。如分是5，则这套牌被称为牛五。

4)无牛：不存在三张牌，其点数相同或其点数和为10的倍数。

## 3.牌型大小关系

炸弹>牛牛>牛九>牛八>……>牛二>牛一>无牛

双方拥有炸弹时，炸弹点数大的更大；

相同牛数且只有一方有铁板时，有铁板的比没有铁板的大；

相同牛数且双方拥有铁板时，铁板点数大的更大；

相同牛数且双方均没有铁板或双方均无牛时，我们比较双方牌中点数最大的一张牌，点数更大的一方更大；若双方点数最大的一张牌点数相同，则花色更大的一方更大，花色大小为黑桃>红桃>梅花>方块。

## 4.计分

一局牌的底分为10，即每位玩家都会押10分。

对于其中的两位玩家，我们在比较完双方的牌型之后，选择牌型更大的一方的牌型来计算得失分数的翻倍。具体如下：

1)炸弹：底分×10。

2)牛牛：底分×3。

3)牛七/牛八/牛九：底分×2。

4)牛六~牛一：底分。

5)无牛：底分。

6)铁板：在计算完牌型得分之后，在牌型得分的基础上×2。注意铁板翻倍不与炸弹同时进行。

我们在计分时，采用两两之间计分的方式，也就是说对于三名玩家A、B、C，我们先计算A和B之间的分数得失，再计算A和C之间的分数得失，最后计算B和C之间的分数得失。

现在我们假设所有玩家都足够聪明，也就是说，所有玩家都会打出他们手上的牌中最大的牌型。${\rm CYJian}$想知道，在这T轮游戏结束之后，每位玩家的得分情况。

## 说明/提示

样例一解释：

第一局玩家牌型如下：

${\rm CYJian}$：炸弹

${\rm JerryC}$：牛五

${\rm Justin}$：铁板牛牛

所以${\rm CYJian}$加200分，${\rm JerryC}$扣160分，${\rm Justin}$扣40分。

第二局中，所有人都是牛五，但是${\rm CYJian}$拥有黑桃五，${\rm JerryC}$拥有红桃五，${\rm Justin}$拥有梅花五，所以${\rm CYJian}$加20分，${\rm JerryC}$没有变化，${\rm Justin}$扣20分。

数据范围：

| 测试点编号 |   $T$    |   $N$   | 特殊性质 |
| :--------: | :------: | :-----: | :------: |
|    $1$     |   $0$    |   $3$   |    性质4    |
|    $2$     |   $5$   |  $5$   |    性质4    |
|  $3$-$4$   |   $5$   |  $5$   |  性质1   |
|  $5$-$6$   |   $5$   |  $5$   |  性质2   |
|  $7$-$8$   |   $5$   |  $5$   |  性质3   |
|  $9$-$10$  |   $5$   |  $5$   |  性质5   |
| $11$-$12$  |   $10$    |   $10$   |  性质5   |
| $13$-$14$  |   $100$   |  $100$   |  性质5   |
| $15$-$16$  |  $1000$   |  $1000$  |  性质5   |
| $17$-$18$  |  $10000$  | $10000$  |  性质5   |
| $19$-$20$  | $100000$ | $100000$ |  性质5，1.5s   |

性质1：保证所有的人拥有炸弹。

性质2：保证每一手牌花色全部相同。

性质3：保证每一手牌所有数字不同。

性质4：保证数据手造。

性质5：保证数据随机生成。

保证每一局没有重复的牌。

保证每一个人的名字不相同。

保证出题人是${\rm CYJian}$。

保证数据没有锅。

不保证没有人能做出来。

不保证此题代码很长。

## 样例 #1

### 输入

```
0 2 3
CYJian
JerryC
Justin
CYJian
a10 b10 c10 d10 a9
JerryC
cA b2 c3 d4 d5
Justin
aA bA dA a4 c6
CYJian
aA b2 c3 d4 a5
JerryC
bA c2 d3 a4 b5
Justin
cA d2 a3 c4 c5```

### 输出

```
CYJian 220
JerryC -160
Justin -60```

## 样例 #2

### 输入

```
0 3 4
CYJian
JerryC
Samcompu
Hsl2363
CYJian
a2 b5 c8 d4 aA
Samcompu
a2 bA c3 a4 c5
JerryC
aA b2 c7 c4 c6
Hsl2363
aA bA cA dA a10
Samcompu
a2 b2 c2 d2 b10
JerryC
a3 b3 c3 d3 c10
Hsl2363
a5 c6 d8 a9 b9
JerryC
b6 b2 c9 a7 d2
CYJian
b5 d5 c5 a6 d9```

### 输出

```
CYJian 120
JerryC 150
Samcompu -60
Hsl2363 -210
```

# AI分析结果



## 算法分类
无算法分类（纯模拟）

## 综合分析与结论
### 核心难点与解决方案
1. **牌型判断**：需处理12种牌型优先级，重点解决炸弹、铁板、牛数的逻辑嵌套关系
2. **比较规则**：需要处理4层比较逻辑（炸弹→牛数→铁板→最大牌）
3. **分数计算**：需考虑两两比较时的双向计分与倍率叠加规则

### 算法流程可视化设计
1. **动态牌型展示**：用不同颜色块表示炸弹（💥）、牛牛（🐮）、铁板（🛡️）等特殊牌型
2. **比较过程动画**：
   - 高亮当前比较属性（如闪烁显示炸弹点数）
   - 逐步展开比较层级（炸弹→牛数→铁板→最大牌）
3. **得分动画**：
   ```javascript
   // 伪代码示例
   function animateScore(playerA, playerB, delta) {
     createFloatingText(`${playerA}+${delta}`, 'green');
     createFloatingText(`${playerB}-${delta}`, 'red');
     playSound(delta > 0 ? 'coin.wav' : 'error.wav');
   }
   ```

### 复古像素风格实现
1. **视觉设计**：
   - 16色调色板（NES风格）
   - 8x8像素字符显示玩家名字
   - 卡牌使用 32x48 像素块表示
2. **音效设计**：
   - 炸弹比较：爆炸音效（8-bit 低音爆破）
   - 牛牛触发：金币音效（高音调）
   - 铁板激活：金属碰撞声

## 优质题解推荐（≥4星）

### 1. Eason_AC（★★★★★）
**核心亮点**：
- 结构化存储牌型信息（bomb/tieban/niu等字段）
- 通过sum变量优化牛数计算
- 使用unordered_map加速玩家查找

**关键代码片段**：
```cpp
struct player {
    int card[7], num[17], col[7], sum, niu, tieban, maxx, bomb, idd;
    // sum用于快速计算剩余牌模10值
    // num数组桶计数判断炸弹/铁板
};

void premission(int t3) {
    // 预处理sum、maxx等关键字段
    for(int i=1;i<=5;i++) {
        // 处理花色与点数...
        a[t3].sum += a[t3].card[i];
        a[t3].num[a[t3].card[i]]++;
        // 更新最大值与花色...
    }
}
```

### 2. 159号程序员（★★★★☆）
**创新点**：
- 将牛牛编码为10简化比较
- 独立计分函数封装
- 使用pair存储最大牌（点数+花色）

**调试心得**：
> "调试时发现最大牌相同但花色比较错误，将花色编码为数字后采用字典序比较解决问题"

### 3. Konnyaku_ljc（★★★★☆）
**优化技巧**：
- 单独处理10和A的读取
- 使用位运算快速判断三张牌组合
- 提前预处理玩家最大牌信息

## 核心实现思想
### 牌型判断优化
```cpp
// 桶计数法判断炸弹/铁板
int cnt[11] = {0};
for(auto card : cards) cnt[card.point]++;
for(int i=1;i<=10;i++) {
    if(cnt[i]==4) { /* 炸弹处理 */ }
    if(cnt[i]==3) { /* 铁板处理 */ }
}

// 枚举两张牌优化牛数计算
for(int i=0;i<5;i++)
    for(int j=i+1;j<5;j++)
        if((sum - cards[i] - cards[j]) % 10 == 0)
            /* 计算剩余三张牌是否为10倍数 */
```

## 同类型题目推荐
1. P2482 [SDOI2010]猪国杀（复杂规则模拟）
2. P2586 [ZJOI2008]杀蚂蚁（实时状态模拟）
3. P3695 CYaRon!语（指令解析模拟）

## 可视化代码片段
```javascript
// 8-bit风格卡牌渲染
function drawPixelCard(ctx, x, y, card) {
    const colors = {a:'#3C3C3C', b:'#D40000', c:'#0083C7', d:'#EBD80A'};
    ctx.fillStyle = colors[card.type];
    ctx.fillRect(x, y, 32, 48);
    ctx.fillStyle = '#FFFFFF';
    ctx.font = '8px "Press Start 2P"';
    ctx.fillText(card.value, x+4, y+12);
}

// 比较过程动画
function animateCompare(a, b) {
    let steps = [
        () => highlightBomb(a, b),
        () => highlightNiuType(a, b),
        () => highlightMaxCard(a, b)
    ];
    steps.forEach((step, i) => setTimeout(step, i * 1000));
}
```

## 个人调试心得
**高木木的教训**：
> "95分卡在最大牌相同但花色比较错误，原以为直接比较字符即可，后发现需转换为数值比较。将花色a→4, b→3等编码后解决"

**LXcjh4998的优化**：
> "使用sum%10代替全量计算，将五张牌判断复杂度从O(n³)降为O(n²)，节省75%计算时间"

---
处理用时：71.07秒
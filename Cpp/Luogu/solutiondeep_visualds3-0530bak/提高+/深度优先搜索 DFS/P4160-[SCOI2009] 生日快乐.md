# 题目信息

# [SCOI2009] 生日快乐

## 题目描述

windy 的生日到了，为了庆祝生日，他的朋友们帮他买了一个边长分别为 $X$ 和 $Y$ 的矩形蛋糕。

现在包括 windy，一共有 $N$ 个人来分这块大蛋糕，要求每个人必须获得相同面积的蛋糕。

windy 主刀，每一切只能平行于一块蛋糕的一边（任意一边），并且必须把这块蛋糕切成两块。

这样，要切成 $N$ 块蛋糕，windy 必须切 $N-1$ 次。

为了使得每块蛋糕看起来漂亮，我们要求 $N$ 块蛋糕的长边与短边的比值的最大值最小。

你能帮助 windy 求出这个比值么？


## 说明/提示

对于 $100\%$ 的数据，满足 $1 \le X,Y \le 10^4$，$1\le N\le 10$。


## 样例 #1

### 输入

```
5 5 5```

### 输出

```
1.800000```

# AI分析结果



**唯一算法分类**：深度优先搜索（DFS）

---

### **题解思路、算法要点与解决难点**

1. **核心思路**  
   - **分治策略**：将大蛋糕分割为两个子蛋糕，递归求解每个子问题的最优解，最终合并结果。
   - **状态转移**：对于当前矩形 `(x, y)` 需要切 `k` 刀，枚举横向或纵向切割的位置，生成两个子问题 `(x1, y)` 和 `(x2, y)`（或 `(x, y1)` 和 `(x, y2)`），取子问题最大值的最小值。

2. **算法要点**  
   - **递归终止条件**：当 `k=1` 时，直接返回当前矩形的长宽比最大值。
   - **切割策略**：每次切割必须保证子蛋糕的面积相等，切割位置为 `x/k` 或 `y/k` 的整数倍，确保后续分割合法。
   - **剪枝优化**：仅需枚举 `i` 到 `k/2`，避免重复计算对称情况。

3. **解决难点**  
   - **正确枚举切割位置**：确保分割后的子问题块数与切割次数匹配。
   - **避免浮点精度问题**：部分题解通过分数表示长宽（如 `RTL` 结构），但实际 `double` 运算已足够。

---

### **题解评分 (≥4星)**

1. **浅色调 (4.5星)**  
   - **亮点**：代码简洁，直接枚举横向/纵向切割，逻辑清晰，赞数最高。
   - **代码片段**：
     ```cpp
     double dfs(double x, double y, int k) {
         if (k == 1) return max(x, y) / min(x, y);
         double ans = INF;
         for (int i = 1; i <= k / 2; i++) {
             double t1 = max(dfs(x * i / k, y, i), dfs(x - x * i / k, y, k - i));
             double t2 = max(dfs(x, y * i / k, i), dfs(x, y - y * i / k, k - i));
             ans = min(ans, min(t1, t2));
         }
         return ans;
     }
     ```

2. **Huah (4星)**  
   - **亮点**：引入分数分割的数学分析，代码可读性较好。
   - **关键注释**：明确切割后的子问题为 `i` 块和 `k-i` 块，递归合并结果。

3. **Jesselrj (4星)**  
   - **亮点**：通过图示解释样例，辅助理解切割过程。
   - **代码优化**：使用 `nx = x/k` 预处理切割步长。

---

### **最优思路或技巧提炼**

1. **分治递归**：将大问题分解为两个子问题，合并时取子问题最大值的最小值。
2. **对称性剪枝**：只需枚举 `i` 到 `k/2`，减少重复计算。
3. **数学保证**：切割位置为 `x/k` 或 `y/k` 的整数倍，确保后续分割合法。

---

### **同类型题或类似算法套路**

- **分治切割问题**：如木棍分割、数组划分，要求子段满足特定条件。
- **最优化剪枝**：在递归中维护全局最优解，类似背包问题的回溯剪枝。

---

### **推荐相似题目**

1. **P1025 数的划分**：将整数分为k份，求不同划分方式。
2. **P1514 引水入城**：DFS+贪心，分割区域满足条件。
3. **P2363 切割矩形**：类似的分割问题，要求切割线平行坐标轴。

---

### **个人心得摘录**

- **小黑AWM**：原以为需二分答案，实际DFS更直接。
- **IRipple**：初始误以为分度值为固定值，后理解需按面积分割。

---

### **可视化与算法演示**

1. **动画方案**  
   - **递归过程可视化**：以矩形图示展示每次切割，横向/纵向用不同颜色高亮。
   - **状态跟踪**：显示当前矩形尺寸 `(x, y)` 和剩余切割次数 `k`。
   - **实时比值更新**：展示当前路径的最大长宽比和全局最小值。

2. **复古像素风格**  
   - **8位色块**：用像素方块表示蛋糕，切割时显示刀光特效。
   - **音效设计**：切割时播放“咔嚓”音效，找到更优解时触发上升音调。
   - **自动演示模式**：模拟AI逐步选择最优切割路径，类似贪吃蛇自动寻路。

3. **交互设计**  
   - **控制面板**：支持暂停/继续、调整动画速度。
   - **高亮策略**：当前切割方向（横向/纵向）用闪烁边框标记。

**示例代码片段（Canvas绘制切割）**：
```javascript
function drawCake(ctx, x, y, k) {
    ctx.fillStyle = "#FF6B6B"; // 蛋糕颜色
    ctx.fillRect(0, 0, x * SCALE, y * SCALE);
    if (k > 1) {
        ctx.strokeStyle = "#4ECDC4"; // 切割线颜色
        for (let i = 1; i <= k / 2; i++) {
            // 绘制横向/纵向切割线
            ctx.beginPath();
            ctx.moveTo((x * i / k) * SCALE, 0);
            ctx.lineTo((x * i / k) * SCALE, y * SCALE);
            ctx.stroke();
        }
    }
}
```

---

**结论**：本题通过DFS分治切割，核心在于正确枚举分割位置并递归求解，数据范围小允许暴力搜索。可视化设计可直观展示分治策略的决策过程。

---
处理用时：79.38秒
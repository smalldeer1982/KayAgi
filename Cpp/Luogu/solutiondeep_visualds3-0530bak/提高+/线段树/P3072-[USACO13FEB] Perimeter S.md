# é¢˜ç›®ä¿¡æ¯

# [USACO13FEB] Perimeter S

## é¢˜ç›®æè¿°

å†œå¤«çº¦ç¿°å·²ç»åœ¨ä»–çš„ä¸€ç‰‡ç”°åœ°ä¸­é—´æ”¾ç½®äº†nï¼ˆ1<=n<=50000ï¼‰ä¸ªå¹²è‰å †ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™ç‰‡ç”°åœ°æ˜¯ç”±1000000*1000000 ä¸ªå°æ–¹æ ¼ç»„æˆçš„çŸ©é˜µï¼Œæ¯ä¸ªå¹²è‰å †å æ®ä¸€ä¸ªå°æ–¹æ ¼ï¼ˆå½“ç„¶ï¼Œæ²¡æœ‰ä¸¤å †å¹²è‰å æ®åŒä¸€ä¸ªæ ¼å­ï¼‰

FJ æ³¨æ„åˆ°ä»–çš„å¹²è‰å †ç»„æˆäº†ä¸€ä¸ªå¤§çš„è¿é€šå—ï¼Œè¿™å°±æ„å‘³ç€ä»ä»»ä½•ä¸€ä¸ªè‰å †èµ°èµ·ï¼Œå¯ä»¥é€šè¿‡ç›¸é‚»è‰å †èµ°è‹¥å¹²æ­¥åˆ°è¾¾å…¶ä»–ä»»æ„çš„è‰å †ã€‚è¿™ä¸ªè¿é€šå—çš„å†…éƒ¨å¯èƒ½åŒ…å«è‹¥å¹²ä¸ªâ€œæ´â€â€”â€”è¢«å¹²è‰å †å®Œå…¨åŒ…å›´çš„ç©ºç™½æ ¼å­ã€‚

è¯·å¸®åŠ©FJè®¡ç®—æ•´ä¸ªè¿é€šå—çš„å‘¨é•¿ã€‚è®¡ç®—å‘¨é•¿æ—¶è¯·ä¸è¦è€ƒè™‘â€œæ´â€ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
8 
10005 200003 
10005 200004 
10008 200004 
10005 200005 
10006 200003 
10007 200003 
10007 200004 
10006 200005 
```

### è¾“å‡º

```
14 
```

# AIåˆ†æç»“æœ



# ç®—æ³•åˆ†ç±»ï¼šFlood Fillï¼ˆé€†å‘æœç´¢ï¼‰

---

## ç»¼åˆåˆ†æä¸ç»“è®º

### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹
**é€†å‘æ€ç»´**ï¼šæ‰€æœ‰é¢˜è§£å‡é‡‡ç”¨ä»å¤–éƒ¨ç©ºç™½åŒºåŸŸæœç´¢çš„é€†å‘æ€è·¯ï¼Œé¿å…å¤„ç†å†…éƒ¨ç©ºæ´ã€‚æ ¸å¿ƒé€»è¾‘ä¸ºï¼š  
1. **èµ·ç‚¹é€‰æ‹©**ï¼šä»è¿é€šå—æœ€é«˜ç‚¹æˆ–å·¦ä¸Šè§’ç©ºç™½åŒºåŸŸå¼€å§‹æœç´¢  
2. **æœç´¢é™åˆ¶**ï¼šä»…å½“ç©ºç™½ç‚¹å‘¨å›´å­˜åœ¨å¹²è‰å †æ—¶æ‰ç»§ç»­æ‰©å±•æœç´¢ï¼Œé¿å…æ— é™æ‰©æ•£  
3. **å‘¨é•¿ç»Ÿè®¡**ï¼šå½“ç©ºç™½ç‚¹çš„å››ä¸ªç›¸é‚»æ–¹å‘å­˜åœ¨å¹²è‰å †æ—¶ï¼Œå‘¨é•¿+1  

**è§£å†³éš¾ç‚¹**ï¼š  
- **è¶…å¤§åæ ‡èŒƒå›´**ï¼šä½¿ç”¨ `set` æˆ– `map` å­˜å‚¨å¹²è‰å †åæ ‡ï¼Œå®ç° O(1) æŸ¥è¯¢  
- **ç©ºæ´å¤„ç†**ï¼šé€šè¿‡é™åˆ¶ä»…æœç´¢ä¸å¹²è‰å †ç›¸é‚»çš„ç©ºç™½åŒºåŸŸï¼Œå¤©ç„¶è·³è¿‡ç©ºæ´  

### å¯è§†åŒ–è®¾è®¡æ€è·¯
**åŠ¨ç”»æ–¹æ¡ˆ**ï¼š  
1. **é¢œè‰²æ ‡è®°**ï¼š  
   - ğŸ”´ çº¢è‰²ï¼šå½“å‰æœç´¢ç‚¹  
   - ğŸŸ¢ ç»¿è‰²ï¼šå·²è®¿é—®ç©ºç™½åŒºåŸŸ  
   - âš« é»‘è‰²ï¼šå¹²è‰å †  
   - ğŸ”µ è“è‰²ï¼šå‘¨é•¿è´¡çŒ®è¾¹ï¼ˆä¸å¹²è‰å †ç›¸é‚»çš„è¾¹ï¼‰  
2. **æ­¥è¿›æ§åˆ¶**ï¼šé€å¸§å±•ç¤ºæœç´¢é˜Ÿåˆ—æ‰©å±•ï¼Œè§¦å‘å‘¨é•¿ç»Ÿè®¡æ—¶é«˜äº®å¯¹åº”è¾¹  
3. **éŸ³æ•ˆæç¤º**ï¼š  
   - "æ»´"å£°ï¼šå‘ç°æ–°ç©ºç™½åŒºåŸŸ  
   - "å’”å—’"å£°ï¼šç»Ÿè®¡å‘¨é•¿è¾¹  
   - å®Œæˆæ—¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ  

---

## é¢˜è§£æ¸…å•ï¼ˆâ‰¥4æ˜Ÿï¼‰

### 1. Limitï¼ˆDFSè§£æ³•ï¼‰â˜…â˜…â˜…â˜…â˜†
**äº®ç‚¹**ï¼š  
- ä½¿ç”¨ DFS + 8æ–¹å‘å¹²è‰å †æ£€æŸ¥  
- ä»æœ€é«˜ç‚¹ä¸Šæ–¹å¼€å§‹æœç´¢ï¼Œå‡å°‘æ— æ•ˆéå†  
- ä»£ç ç®€æ´ï¼ŒSTL `set` é«˜æ•ˆç®¡ç†åæ ‡  

**ä»£ç ç‰‡æ®µ**ï¼š  
```cpp
void DFS(int x,int y) {
    if(_map.count({x,y})) { answer++; return; } // é‡åˆ°å¹²è‰å †ç»Ÿè®¡å‘¨é•¿
    if(visit.count({x,y})) return;
    visit.insert({x,y});
    if(OutSide(x,y)) return; // 8æ–¹å‘æ— å¹²è‰å †åˆ™åœæ­¢æ‰©å±•
    rap(i,1,4) DFS(x+move_x[i],y+move_y[i]); // ä»…æ‰©å±•4æ–¹å‘
}
```

### 2. åˆ˜è¾°é›¨ï¼ˆBFSä¼˜åŒ–ç‰ˆï¼‰â˜…â˜…â˜…â˜…â˜†
**äº®ç‚¹**ï¼š  
- ä¼˜åŒ–åˆç‰ˆä»£ç çš„çŸ©å½¢éå†ï¼Œæ”¹ä¸ºè´´è¾¹æœç´¢  
- 8æ–¹å‘å¹²è‰å †å­˜åœ¨æ€§æ£€æŸ¥å¤§å¹…å‡å°‘æœç´¢èŒƒå›´  
- å®Œæ•´æ³¨é‡Šä¸æµ‹è¯•æ•°æ®éªŒè¯  

**å…³é”®é€»è¾‘**ï¼š  
```cpp
bool DisNice(int x, int y) {
    for(int i=0;i<8;i++) // æ£€æŸ¥8æ–¹å‘æ˜¯å¦å­˜åœ¨å¹²è‰å †
        if(grass[{x+pdx[i],y+pdy[i]}]) return false;
    return true; // è¿”å›trueè¡¨ç¤ºæ— éœ€æ‰©å±•æ­¤ç‚¹
}
```

### 3. Milthmï¼ˆBFSé«˜æ•ˆç‰ˆï¼‰â˜…â˜…â˜…â˜…â˜†
**äº®ç‚¹**ï¼š  
- ä»… 31 è¡Œæç®€å®ç°  
- åŒé‡æ£€æŸ¥æœºåˆ¶ï¼š8æ–¹å‘å­˜åœ¨æ€§æ£€æŸ¥ + 4æ–¹å‘BFS  
- ä¼˜å…ˆé˜Ÿåˆ—ç®¡ç†ç¡®ä¿é«˜æ•ˆæœç´¢é¡ºåº  

**æ ¸å¿ƒä»£ç **ï¼š  
```cpp
bool qwq(int x,int y){
    for(int i=0;i<8;++i) // 8æ–¹å‘å­˜åœ¨æ€§æ£€æŸ¥
        if(m.count({x+w[i][0],y+w[i][1]})) return 1;
    return 0;
}
while(!q.empty()){
    int x=q.front().first,y=q.front().second; q.pop();
    for(int i=0;i<4;++i){
        int px=x+w[i][0],py=y+w[i][1];
        if(m.count({px,py})) ++ans; // ç»Ÿè®¡å‘¨é•¿
        else if(qwq(px,py) && !vis.count({px,py})) 
            q.push({px,py}); // ä»…æ‰©å±•æœ‰æ•ˆåŒºåŸŸ
    }
}
```

---

## æœ€ä¼˜æŠ€å·§æç‚¼

### å…³é”®æ•°æ®ç»“æ„
- **åæ ‡å­˜å‚¨**ï¼š`set<pair<int,int>>` æˆ– `map` å®ç°ç¨€ç–åæ ‡ç®¡ç†  
- **è®¿é—®æ ‡è®°**ï¼šç‹¬ç«‹ `visited` é›†åˆè®°å½•å·²å¤„ç†ç©ºç™½ç‚¹  

### ç®—æ³•ä¼˜åŒ–
1. **æœç´¢æ–¹å‘æ§åˆ¶**ï¼š  
   - 8æ–¹å‘æ£€æŸ¥é™åˆ¶æœç´¢èŒƒå›´  
   - 4æ–¹å‘æ‰©å±•é¿å…é‡å¤è®¡æ•°  
2. **èµ·ç‚¹é€‰æ‹©ç­–ç•¥**ï¼š  
   - é€‰å–è¿é€šå—æœ€é«˜ç‚¹æˆ–å·¦ä¸Šè§’ç©ºç™½åŒºåŸŸå¯åŠ¨æœç´¢  
3. **åŒé‡æ£€æŸ¥æœºåˆ¶**ï¼š  
   - è¿›å…¥æ–°ç‚¹æ—¶æ£€æŸ¥8æ–¹å‘æ˜¯å¦å­˜åœ¨å¹²è‰å †  
   - æ‰©å±•æ—¶å†æ¬¡éªŒè¯æœ‰æ•ˆæ€§  

### æ€ç»´çªç ´
- **é€†å‘æ€ç»´**ï¼šä»ç©ºç™½åŒºåŸŸå‘å¤–æœç´¢è€Œéå¤„ç†å¹²è‰å †  
- **ç©ºæ´å¤©ç„¶è§„é¿**ï¼šé€šè¿‡æœç´¢é™åˆ¶è‡ªåŠ¨è·³è¿‡è¢«åŒ…å›´çš„ç©ºç™½åŒºåŸŸ  

---

## åŒç±»é¢˜ç›®æ¨è
1. [P1896 å²›å±¿çš„å‘¨é•¿](https://www.luogu.com.cn/problem/P1896)  
   - åŸºç¡€ç‰ˆå‘¨é•¿è®¡ç®—ï¼Œæ— ç©ºæ´åœºæ™¯  
2. [P1514 å¼•æ°´å…¥åŸ](https://www.luogu.com.cn/problem/P1514)  
   - Flood Fill ä¸åŠ¨æ€è§„åˆ’ç»“åˆ  
3. [P1162 å¡«æ¶‚é¢œè‰²](https://www.luogu.com.cn/problem/P1162)  
   - é€†å‘æœç´¢æ ‡è®°é—­åˆåŒºåŸŸ  

---

## å¯è§†åŒ–ä»£ç ç¤ºä¾‹ï¼ˆJavaScript ä¼ªä»£ç ï¼‰

```javascript
// Canvas åˆå§‹åŒ–ä¸æ ·å¼
const canvas = document.getElementById('grid');
const ctx = canvas.getContext('2d');
const CELL_SIZE = 10; // åƒç´ é£æ ¼ç½‘æ ¼

// åŠ¨ç”»ä¸»å¾ªç¯
function animate() {
    let current = queue.dequeue();
    highlightCell(current.x, current.y, 'red'); // é«˜äº®å½“å‰ç‚¹
    
    // æ£€æŸ¥å››ä¸ªæ–¹å‘
    for(let dir of directions) {
        let next = {x: current.x+dir[0], y: current.y+dir[1]};
        if(isHaystack(next)) {
            drawEdge(current, next, 'blue'); // ç»˜åˆ¶å‘¨é•¿è¾¹
            playSound('click'); 
        } else if(isValid(next) && !visited.has(next)) {
            queue.enqueue(next);
            visited.add(next);
            highlightCell(next.x, next.y, 'green');
        }
    }
    
    requestAnimationFrame(animate);
}

// 8ä½éŸ³æ•ˆç”Ÿæˆï¼ˆWeb Audio APIï¼‰
function playSound(type) {
    const osc = audioContext.createOscillator();
    osc.frequency.setValueAtTime(type === 'click' ? 800 : 400, audioContext.currentTime);
    osc.connect(audioContext.destination);
    osc.start(); osc.stop(audioContext.currentTime + 0.1);
}
```

---
å¤„ç†ç”¨æ—¶ï¼š76.66ç§’
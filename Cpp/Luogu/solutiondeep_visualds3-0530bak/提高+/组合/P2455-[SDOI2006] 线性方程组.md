# 题目信息

# [SDOI2006] 线性方程组

## 题目描述

已知 $n$ 元线性一次方程组。

$$ \begin{cases} a_{1, 1} x_1 + a_{1, 2} x_2 + \cdots + a_{1, n} x_n = b_1 \\ a_{2, 1} x_1 + a_{2, 2} x_2 + \cdots + a_{2, n} x_n = b_2 \\ \cdots \\ a_{n,1} x_1 + a_{n, 2} x_2 + \cdots + a_{n, n} x_n = b_n \end{cases}$$

请根据输入的数据，编程输出方程组的解的情况。

## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，$1 \le n \le 50$。对于 $\forall 1\le i, j \le n$，有 $|a_{i, j}| \le 100$，$|b_i| \le 300$。

## 样例 #1

### 输入

```
3
2 -1 1 1
4 1 -1 5
1 1 1 0```

### 输出

```
x1=1.00
x2=0.00
x3=-1.00
```

# AI分析结果



### 唯一算法分类
高斯-约旦消元法

---

### 综合分析与结论
**核心思路**：通过高斯-约旦消元法将增广矩阵转化为行最简形，根据未处理行的常数项判断解的类型。  
**核心难点**：  
1. 主元选择需考虑全矩阵而非仅当前行以下  
2. 处理浮点精度误差（使用1e-9阈值判断零）  
3. 区分无解与无穷解的边界条件  

**可视化设计**：  
- **动态消元过程**：用高亮色标记当前主元行，黄色渐变展示消元行，右侧展示当前矩阵状态  
- **矛盾行提示**：若某行出现0=非零，立即用红色闪烁警示  
- **复古风格**：采用16色NES调色板（深蓝背景/黄绿高亮/红灰警示），关键步骤配8-bit音效  

---

### 题解清单（≥4星）

| 题解作者 | 星级 | 核心亮点 |  
|---------|------|---------|  
| Piwry   | ⭐⭐⭐⭐ | 清晰的阶梯形判断逻辑，nwline变量精确控制处理进度 |  
| Rui_R   | ⭐⭐⭐⭐ | 主元选择范围扩展至全矩阵，避免消元顺序错误 |  
| zqiceberg | ⭐⭐⭐⭐ | 经典反向消元实现，稳定处理无穷解场景 |  

---

### 最优思路提炼
```cpp
int nwline = 0; // 关键变量：已处理行计数器
for(int k=0; k<n; k++){ // 列主循环
    // 1. 全矩阵找主元（包括已处理行上方的未处理行）
    int maxi = find_max_row(k, nwline);
    
    if(is_zero(A[maxi][k])) continue; // 无主元则跳过
    
    swap_row(nwline, maxi); // 交换到当前处理行
    scale_row(nwline, 1/A[nwline][k]); // 主元归一化
    
    // 2. 消去其他行当前列
    for(int i=0; i<n; i++){
        if(i == nwline) continue;
        double factor = A[i][k];
        row_subtract(i, nwline, factor); 
    }
    nwline++; // 推进处理行
}

// 3. 最终判断
if(nwline < n){
    for(int i=nwline; i<n; i++)
        if(!is_zero(A[i][n])) return -1; // 无解
    return 0; // 无穷解
} else {
    for(int i=0; i<n; i++) // 唯一解
        x[i] = A[i][n]/A[i][i];
}
```

---

### 同类型题推荐
1. **P3389** - 高斯消元模板（唯一解判定）  
2. **P4035** - 模意义下的高斯消元  
3. **P2447** - 异或方程组（位运算消元）  

---

### 可视化代码片段
```javascript
// 主元选择动画（8-bit风格）
function highlightPivot(col, row) {
    ctx.fillStyle = '#FFFF33'; // 黄色高亮
    drawMatrixCell(col, row); 
    playSound('select'); // 短促"滴"声
}

// 消元过程动画
function animateElimination(targetRow, srcRow, factor) {
    let cells = getColCells(currentCol);
    cells.forEach(cell => {
        if(cell.row == srcRow) return;
        cell.element -= srcRow[cell.col] * factor; // 数值更新
        ctx.fillStyle = '#33FF33'; // 绿色渐变
        drawMatrixCell(cell.col, cell.row);
        playSound('blip'); // 点击音效
    });
}
```

---

### 个人心得摘录
> "在Hack数据中发现，主元选择顺序会影响解的判定，必须将搜索范围扩展到所有未固定主元的行，而非仅当前行以下。" —— Rui_R调试笔记

---

### 复古游戏化设计
- **音效设计**：  
  - 主元选中：FC游戏《超级马里奥》金币声（压缩为8-bit）  
  - 消元成功：《魂斗罗》子弹发射声  
  - 无解警示：红白机爆炸音效  
- **积分系统**：  
  - 成功消元一列 +100分  
  - 发现矛盾行 +500分（连击加成）  
  - 错误操作扣200分（音效提示）  
- **自动演示模式**：按SELECT键启动AI自动消元，方向键控制单步执行速度

---
处理用时：82.14秒
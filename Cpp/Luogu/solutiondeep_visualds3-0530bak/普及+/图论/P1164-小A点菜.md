# 题目信息

# 小A点菜

## 题目背景

uim 神犇拿到了 uoi 的 ra（镭牌）后，立刻拉着基友小 A 到了一家……餐馆，很低端的那种。

uim 指着墙上的价目表（太低级了没有菜单），说：“随便点”。


## 题目描述

不过 uim 由于买了一些书，口袋里只剩 $M$ 元 $(M \le 10000)$。

餐馆虽低端，但是菜品种类不少，有 $N$ 种 $(N \le 100)$，第 $i$ 种卖 $a_i$ 元 $(a_i \le 1000)$。由于是很低端的餐馆，所以每种菜只有一份。

小 A 奉行“不把钱吃光不罢休”的原则，所以他点单一定刚好把 uim 身上所有钱花完。他想知道有多少种点菜方法。

由于小 A 肚子太饿，所以最多只能等待 $1$ 秒。


## 说明/提示

2020.8.29，增添一组 hack 数据 by @yummy

## 样例 #1

### 输入

```
4 4
1 1 2 2
```

### 输出

```
3
```

# AI分析结果



## 算法分类
**动态规划-01背包**

---

## 题解思路与算法要点

### 核心逻辑
所有题解均围绕 **01背包变种问题** 展开，状态定义与转移方程高度一致：
- **状态定义**：`f[j]` 表示恰好花费 j 元的方案数
- **转移方程**：`f[j] += f[j - a[i]]` （倒序遍历金额）

### 解决难点
1. **初始条件**：`f[0] = 1`（空方案视为一种合法方案）
2. **倒序遍历**：防止同一菜品被重复计算（关键优化点）
3. **恰好装满**：与普通背包不同，需严格等于目标金额

---

## 题解评分（≥4星）

1. **衡屿睿（5星）**
   - 亮点：二维数组实现，逻辑清晰易理解
   - 代码：[关键片段](#代码片段-1)

2. **Dream_zhc（5星）**
   - 亮点：详细推导一维优化过程，双版本代码对比
   - 心得：解释为何要倒序遍历，初始化技巧

3. **WilliamPen（4星）**
   - 亮点：极简一维数组实现，代码高度凝练
   - 代码：[关键片段](#代码片段-2)

---

## 最优技巧提炼

### 关键优化
- **一维数组 + 逆序更新**：空间复杂度从 O(NM) 降至 O(M)
- **初始化技巧**：`f[0] = 1` 处理边界条件

### 思维跃迁
- **方案叠加**：将「选」与「不选」的逻辑合并为状态叠加
- **动态规划视角**：将菜品选择视为多阶段决策过程

---

## 同类型题目推荐
1. P1048 采药（基础01背包）
2. P1060 开心的金明（价值计算变种）
3. P2871 [USACO07DEC]Charm Bracelet（标准01背包）

---

## 可视化与算法演示

### 动态规划过程动画设计
```javascript
// 伪代码示例：Canvas绘制关键帧
function drawStep(i, j) {
  ctx.fillStyle = '#FF0000'; // 高亮当前菜品
  drawDish(i, a[i]);
  
  ctx.fillStyle = '#00FF00'; // 高亮更新的金额
  drawMoneyBar(j);
  
  updateArrayDisplay(f); // 实时显示数组状态
}

// 音效触发
function playSound(type) {
  if (type === 'update') beep(440, 50);  // 更新时短音
  if (type === 'match') beep(880, 200); // 匹配成功时高音
}
```

### 复古像素风格
- **调色板**：16色FC风格（深蓝背景 + 亮色状态块）
- **动画元素**：
  - 菜品图标：8x8像素方块
  - 金额进度条：横向填充色块
  - 方案数数组：底部网格动态刷新

---

## 代码片段

### 代码片段-1（衡屿睿二维实现）
```cpp
for(int i=1;i<=n;++i)
  for(int j=1;j<=m;++j) {
    if(j==a[i]) f[i][j] = f[i-1][j]+1;
    else if(j>a[i]) f[i][j] = f[i-1][j] + f[i-1][j-a[i]];
    else f[i][j] = f[i-1][j];
}
```

### 代码片段-2（WilliamPen一维优化）
```cpp
f[0] = 1;
for(int i=1;i<=n;++i)
  for(int j=m;j>=a[i];--j)
    f[j] += f[j-a[i]];
```

---

## 个人心得分录
> "初始化 `f[0]=1` 是关键，第一次提交时漏掉这个导致WA，调试半天才意识到空方案的特殊性" —— 康师傅

---

## 扩展思考
- **Hack数据防御**：注意菜品价格为0或大于M时的边界处理
- **滚动数组**：进一步优化空间（尽管一维已足够高效）

通过动态规划的可视化演示，学习者能直观观察每个菜品对方案数的贡献，理解逆序更新的必要性，最终掌握01背包变种的核心思想。

---
处理用时：67.69秒
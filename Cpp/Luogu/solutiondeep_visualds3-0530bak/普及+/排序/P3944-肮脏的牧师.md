# 题目信息

# 肮脏的牧师

## 题目背景

@Yumis 出题人在这里哦~


## 题目描述

Yumis最近在玩炉石传说。

在炉石传说中脏牧有一张一费卡片（一费就是使用要消耗1点法力水晶），叫做疯狂药水，这个的效果是将一个敌方场上攻击小于等于2的随从拉到自己的战场内。

还有一张四费卡片叫做暗影狂乱，这个的效果是将一个敌方场上攻击小于等于3的随从拉到自己的战场内。

还有一张一费卡片就是缩小药水，这个的效果是将敌人全场的随从攻击力下降3点。


你PY了炉石的GM所以你有了无数张的这三种卡片，但是GM告诉你缩小药水是这个牌比较不好创建，为了为GM着想你必须在使用**最少的缩小药水**的情况下A爆对手的脸。


现在你的对手场上有n个随从，每个随从的攻击力是ki点。

你的对手有m点血量。


而你现在要做的就是将敌方的场上的随从拉过来自己的场上并攻击对手（每一个随从只能攻击一次，攻击力为你拉过来的时候随从剩余的攻击力），A爆对面的脸（将对面的血打到0点及以下）。


## 说明/提示

样例说明1：

敌方场上有3只随从，敌方有5点血量

我们把3攻随从和2攻随从拉过来花费0个缩小药水和5点耗费（一张疯狂药水一个暗影狂乱（1+4 = 5））伤害足够击杀对方。


样例说明2：

使用16个缩小药水（下面数据后面第一个括号指拉过来的时候伤害为多高 ，第二个括号表示拉过来的时候使用多少的缩小药水）

拿10（1）（3）、20（2）（6）、30（3）（9）、50（2）（16）攻的怪物总共造成8点伤害 刚好A爆！



Easy : 保证 0 < n <= 10  并且不存在用到暗影狂乱和缩小药水的情况    20%


Normal ：保证 0 < n <= 10  并且不存在用到缩小药水的情况           20%


Hard ：保证 0 < n <= 10                                                 30%


Extra：保证0 <= n <= 5000000(6个0)，最大攻击力小于30000                  30%


保证 0 < n <= 5000000     0 < ki <=30000    0<=m<=5000000 (6个0)


## 样例 #1

### 输入

```
3 5
1 2 3 
```

### 输出

```
0 5```

## 样例 #2

### 输入

```
8 8
10 20 30 40 50 60 70 80
```

### 输出

```
16 23```

## 样例 #3

### 输入

```
8 80
10 20 30 40 50 60 70 80
```

### 输出

```
Human Cannot Win Dog```

# AI分析结果



## 算法分类
**贪心算法 + 桶排序**

---

### 题解思路与算法要点

#### 核心思路
1. **贪心策略**：优先使用缩小药水次数最少，且每次拉取随从时选择性价比最高（1费拉2攻 > 1费拉1攻 > 4费拉3攻）。
2. **桶排序优化**：对攻击力进行桶排序，按每3点为一组处理，快速计算不同缩小次数下的可用随从。
3. **溢出调整**：当总伤害超过敌方血量时，优先退还费用高的随从（3攻用暗影狂乱拉的）以减少总费用。

#### 解决难点
1. **最小缩小药水次数**：通过逐步增加缩小次数（每次攻击范围扩展3），直到总伤害足够。
2. **法力消耗优化**：在总伤害足够后，按费用从高到低退还部分随从，确保总伤害刚好足够且费用最小。
3. **大规模数据处理**：桶排序替代常规排序，时间复杂度优化至 O(max_attack)。

---

### 题解评分（≥4星）

1. **Yumis（★★★★★）**
   - **亮点**：桶排序高效处理大规模数据，按3点分组逐步计算缩小次数，溢出调整逻辑清晰。
   - **代码**：简洁易懂，通过三个`while`循环处理溢出，优先退还3攻随从。
   - **优化**：时间复杂度为 O(max_attack)，适合Extra数据规模。

2. **AirCnt（★★★★☆）**
   - **亮点**：动态计算每个缩小次数下的总伤害，结合贪心退还策略。
   - **代码**：使用`clac`函数处理攻击力并计数，优化了溢出调整顺序。
   - **改进点**：代码可读性稍弱于Yumis的解法。

3. **Guess00（★★★★☆）**
   - **亮点**：结合排序和模3分组，清晰处理攻击力分布。
   - **代码**：显式处理退还顺序（3→1→2），确保费用最小化。
   - **改进点**：未完全使用桶排序，对Extra数据略慢。

---

### 最优思路与技巧提炼

1. **桶排序分组**：
   - 将攻击力按模3后的余数分组（1, 2, 3），统计每组随从数量。
   - 每组对应缩小次数的最小值，快速计算总伤害。

2. **逐步扩展攻击范围**：
   ```cpp
   for (int i = 1; i+2 <= 30001; i +=3) {
       ans += to[i];     at1 += to[i]; // 1攻
       ans += to[i+1]*2; at2 += to[i+1]; // 2攻
       ans += to[i+2]*3; at3 += to[i+2]; // 3攻
       snum++; // 缩小次数+1
       if (ans >= m) break;
   }
   ```

3. **溢出调整顺序**：
   - 优先退还3攻随从（节省4费），其次1攻（1费），最后2攻（1费）。
   ```cpp
   while (ans >= m+3 && at3) { at3--; ans -=3; } // 退3攻
   while (ans >= m+1 && at1) { at1--; ans -=1; } // 退1攻
   while (ans >= m+2 && at2) { at2--; ans -=2; } // 退2攻
   ```

---

### 类似题目与算法套路

- **贪心+桶排序**：如合并果子（优先队列）、计数问题（桶统计）。
- **溢出调整**：如背包问题中的容量优化、任务调度中的资源退还。
- **分组处理**：如区间覆盖、模运算分组优化。

---

### 推荐题目

1. **P1090 合并果子**（贪心+优先队列）
2. **P1179 数字统计**（桶排序应用）
3. **P1048 采药**（动态规划中的容量优化）

---

### 可视化与算法演示

**动画设计**：
1. **像素风格**：用8位色块表示随从攻击力，红（3攻）、绿（2攻）、蓝（1攻）。
2. **分组动态**：每帧显示当前缩小次数下的攻击范围（如1-3, 4-6, ...）。
3. **溢出调整**：高亮退还的随从，播放音效（如“哔”声表示退还成功）。

**交互功能**：
- **步进控制**：允许调整缩小次数，观察总伤害和费用的变化。
- **自动演示**：按预设速度逐步增加缩小次数，自动触发退还逻辑。

**代码片段（JS伪代码）**：
```javascript
// 模拟分组处理
function simulate() {
  let groups = [[1, 2, 3], [4, 5, 6], ...];
  for (let k = 0; k < groups.length; k++) {
    let damage = calculateDamage(groups[k]);
    if (damage >= m) {
      adjustOverflow(damage - m);
      break;
    }
  }
}
```

---

### 个人心得摘录

- **Yumis**：  
  *“缩小药水效果是全局的，必须从攻击力分组入手，才能避免逐一遍历。”*
- **Guess00**：  
  *“退还顺序的优先级是费用优化的关键，3攻随从看似伤害高，但费用更高。”*

---
处理用时：145.02秒
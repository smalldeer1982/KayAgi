# 题目信息

# [USACO15DEC] High Card Low Card G

## 题目描述

奶牛 Bessie 是卡牌游戏的狂热爱好者，尽管她没有对生拇指，但这并不影响她的热情。遗憾的是，她的同伴们在卡牌游戏方面水平堪忧，甚至出牌顺序都完全可预测！尽管如此，Bessie 仍需精心策划才能获胜。

Bessie 和她的朋友 Elsie 正在玩一个简单的卡牌游戏。她们使用一副包含 $2N$ 张卡牌的牌组（编号为 $1 \ldots 2N$），并将牌分成各 $N$ 张。随后进行 $N$ 轮比赛：每轮双方各打出一张牌。在前 $N/2$ 轮中，打出较大数字的玩家得 1 分；在后 $N/2$ 轮中，规则反转，打出较小数字的玩家得 1 分。

已知 Bessie 可以预知 Elsie 每轮出牌的顺序，请计算 Bessie 能够获得的最大分数。

## 说明/提示

在此样例中，Bessie 手中的卡牌为 $2$、$5$、$6$ 和 $7$。她可以通过在比赛后半段保留 $2$ 这张牌，从而最多获得 2 分。

题目提供者：Brian Dean

## 样例 #1

### 输入

```
4
1
8
4
3
```

### 输出

```
2```

# AI分析结果



## 算法分类
贪心

---

## 综合分析与结论

**核心思路**：将问题拆分为前 N/2 轮与后 N/2 轮两部分，分别采用不同的贪心策略。前段用最大牌赢对方最大牌，后段用最小牌赢对方最小牌。

**解决难点**：
1. **动态分配牌**：不预先划分 Bessie 的牌，而是通过双指针动态选择当前最优牌。
2. **排序策略**：Elsie 前半段降序、后半段升序排序，Bessie 整体排序后分别从两端开始处理。
3. **贪心正确性**：前段用最大牌尽可能匹配对方最大牌，后段用最小牌尽可能匹配对方最小牌，确保每次操作局部最优。

**可视化设计**：
- **颜色标记**：红色高亮当前比较的 Elsie 牌，绿色高亮 Bessie 的候选牌。
- **动画流程**：
  1. 前半段：Elsie 牌从右向左降序排列，Bessie 牌从右向左滑动，匹配时绿色覆盖红色。
  2. 后半段：Elsie 牌从左向右升序排列，Bessie 牌从左向右滑动，匹配时绿色覆盖红色。
- **复古像素风格**：使用 8-bit 音效（匹配成功时“叮”，失败时“嘟”），Canvas 绘制卡牌移动过程，背景音乐循环播放经典 FC 游戏旋律。

---

## 题解清单（≥4星）

1. **liyilin2004（4.5星）**  
   - **亮点**：动态双指针处理，代码简洁高效。  
   - **关键代码**：前段倒序匹配，后段正序匹配，利用同一个标记数组避免重复选牌。

2. **MC_Launcher（4星）**  
   - **亮点**：显式将 Bessie 牌分为前后两段，分别排序处理，逻辑清晰。  
   - **关键代码**：前段双指针正向匹配，后段反向匹配，直观体现贪心策略。

3. **Level_Down（4星）**  
   - **亮点**：类似田忌赛马的双层循环实现，优化暴力为线性扫描。  
   - **心得**：“能怼就怼，否则保留最优牌”的调试经验总结。

---

## 最优思路代码实现

```cpp
#include <iostream>
#include <algorithm>
using namespace std;

int n, e[50005], b[50005];
bool used[200005];

int main() {
    cin >> n;
    for (int i = 1; i <= n; ++i) {
        cin >> e[i];
        used[e[i]] = true;
    }
    // 生成Bessie的牌并按升序存储
    int idx = 0;
    for (int i = 1; i <= 2*n; ++i)
        if (!used[i]) b[++idx] = i;
    
    // 处理前N/2轮（Elsie降序，Bessie降序）
    sort(e + 1, e + n/2 + 1, greater<int>());
    sort(b + 1, b + n + 1, greater<int>());
    int ans = 0, j = 1;
    for (int i = 1; i <= n/2; ++i) {
        if (j > n) break;
        if (b[j] > e[i]) ++ans, ++j;
    }
    
    // 处理后N/2轮（Elsie升序，Bessie升序）
    sort(e + n/2 + 1, e + n + 1);
    sort(b + 1, b + n + 1); // 重新升序排序后半段
    j = 1;
    for (int i = n/2 + 1; i <= n; ++i) {
        if (j > n) break;
        if (b[j] < e[i]) ++ans, ++j;
    }
    cout << ans << endl;
    return 0;
}
```

---

## 相似题目推荐

1. **P1650 田忌赛马**  
   - **相似点**：贪心策略选择最优马匹匹配对手。
   
2. **P3129 高低卡牌（白银）**  
   - **相似点**：分阶段处理高低卡牌，双贪心策略。

3. **P6179 高低卡牌（加强版）**  
   - **相似点**：扩展为多轮次贪心，需结合优先队列优化。

---
处理用时：139.94秒
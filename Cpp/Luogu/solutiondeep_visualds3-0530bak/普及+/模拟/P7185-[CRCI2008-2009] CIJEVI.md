# é¢˜ç›®ä¿¡æ¯

# [CRCI2008-2009] CIJEVI

## é¢˜ç›®æè¿°

ä¸ºäº†å¸®åŠ©è®¾è®¡å¤©ç„¶æ°”ç®¡é“ï¼Œå…‹ç½—åœ°äºšå’Œè«æ–¯ç§‘æ­£åœ¨ä½¿ç”¨ç”µè„‘æ¸¸æˆã€Œç®¡é“ç‹‚çƒ­ã€ã€‚

åœ¨æ¸¸æˆä¸­ï¼Œæ¬§æ´²åˆ†ä¸º $R$ è¡Œå’Œ $C$ åˆ—ã€‚æ¯ä¸ªå•å…ƒæ ¼å¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥åŒ…å«ä¸ƒä¸ªåŸºæœ¬ç®¡é“æ„å»ºå—ä¹‹ä¸€ï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/r3k1hpsp.png)
æ°”ä½“å¯ä»¥é€šè¿‡æ„å»ºå—æ²¿ä»»ä¸€æ–¹å‘æµåŠ¨ã€‚ æ„å»ºå— `+` çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºæ°”ä½“å¿…é¡»æ²¿ä¸¤ä¸ªæ–¹å‘ï¼ˆä¸€ä¸ªå‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ°´å¹³æ–¹å‘ï¼‰æµåŠ¨ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/te8dolym.png)

å½“é»‘å®¢ä»è®¡åˆ’ä¸­åˆ é™¤äº†ä¸€ä¸ªæ„å»ºå—æ—¶ï¼Œä½†æ–°ç®¡é“å·²ç»å¼€å§‹æŠ•å…¥ä½¿ç”¨ã€‚

ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œç¡®å®šè¢«åˆ é™¤æ„å»ºå—çš„ä½ç½®å’Œå®ƒçš„ç±»å‹ã€‚

## è¯´æ˜/æç¤º

#### æ•°æ®è§„æ¨¡åŠçº¦å®š

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 \le R, C \le 25$ã€‚
#### è¯´æ˜
- æœ¬é¢˜æ»¡åˆ† $70$ åˆ†ã€‚
- Subtask 1 ä¸º hack æ•°æ®ï¼Œä¸è®¡åˆ†ã€‚
- æœ¬é¢˜è¯‘è‡ª [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CRCI2008-2009](https://hsin.hr/coci/archive/2008_2009/regional_tasks.pdf) CIJEVIï¼Œè¯‘è€… @[tearing](https://www.luogu.com.cn/user/219791)ã€‚
- 2023.11.17 æ·»åŠ ä¸€ç»„ hack æ•°æ®ã€‚
- 2024.02.16 å†æ·»åŠ ä¸€ç»„ hack æ•°æ®ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 7
.......
.M-.-Z.
....... 
```

### è¾“å‡º

```
2 4 - 
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 5
..1-M
1-+..
Z.23. 
```

### è¾“å‡º

```
2 4 4
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
6 10
Z.1----4..
|.|....|..
|..14..M..
2-+++4....
..2323....
.......... 
```

### è¾“å‡º

```
3 3 |```

# AIåˆ†æç»“æœ



# ç®—æ³•åˆ†ç±»  
**æ¨¡æ‹Ÿ**

---

## ç»¼åˆåˆ†æä¸ç»“è®º  
### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹  
1. **é—®é¢˜æ ¸å¿ƒ**  
   å¯»æ‰¾å”¯ä¸€ç¼ºå¤±çš„ç®¡é“å—ï¼Œéœ€æ»¡è¶³å…¶ä¸å‘¨å›´ç®¡é“è¿æ¥åå½¢æˆè¿ç»­è·¯å¾„ä¸”æ— å†—ä½™ã€‚  
2. **æ ¸å¿ƒæ­¥éª¤**  
   - **ç¡®å®šæ–­ç‚¹ä½ç½®**ï¼šéå†æ‰€æœ‰ç©ºç™½ç‚¹ï¼Œæ£€æŸ¥å…¶å››å‘¨æ˜¯å¦æœ‰ç®¡é“è¿æ¥éœ€æ±‚ã€‚  
   - **éªŒè¯ç®¡é“ç±»å‹**ï¼šæ ¹æ®æ–­ç‚¹å››å‘¨çš„è¿æ¥éœ€æ±‚ï¼ŒåŒ¹é…å¯¹åº”çš„ç®¡é“ç±»å‹ï¼ˆå¦‚ä¸Šä¸‹å·¦å³å‡éœ€è¿æ¥åˆ™ä¸º `+`ï¼‰ã€‚  
3. **éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ**  
   - **æ–¹å‘éªŒè¯**ï¼šéœ€æ­£ç¡®åˆ¤æ–­æ¯ä¸ªæ–¹å‘æ˜¯å¦ä¸ç›¸é‚»ç®¡é“å…¼å®¹ï¼ˆå¦‚ä¸Šæ–¹éœ€ `|`ã€`+` ç­‰ç±»å‹ï¼‰ã€‚  
   - **Hack æ•°æ®å¤„ç†**ï¼šè‹¥æ–­ç‚¹ç›´æ¥ä¸èµ·ç‚¹ `M` æˆ–ç»ˆç‚¹ `Z` ç›¸é‚»ï¼Œéœ€ç‰¹æ®Šå¤„ç†è¿æ¥é€»è¾‘ã€‚

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
- **ç½‘æ ¼ç»˜åˆ¶**ï¼šå°†åœ°å›¾ä»¥åƒç´ ç½‘æ ¼å½¢å¼å±•ç¤ºï¼Œç©ºç™½ç‚¹é«˜äº®ä¸ºçº¢è‰²ã€‚  
- **æ–¹å‘ç®­å¤´**ï¼šåœ¨æ–­ç‚¹å››å‘¨ç”¨ä¸åŒé¢œè‰²ç®­å¤´è¡¨ç¤ºè¿æ¥éœ€æ±‚ï¼ˆå¦‚ç»¿è‰²ç®­å¤´è¡¨ç¤ºéœ€è¿æ¥ï¼‰ã€‚  
- **éŸ³æ•ˆä¸åŠ¨ç”»**ï¼š  
  - æ­£ç¡®åŒ¹é…æ—¶æ’­æ”¾ä¸Šå‡éŸ³è°ƒï¼Œé”™è¯¯æ—¶æ’­æ”¾çŸ­ä¿ƒéŸ³æ•ˆã€‚  
  - è‡ªåŠ¨æ­¥è¿›æ¼”ç¤ºï¼Œæ¯æ­¥é«˜äº®å½“å‰æ£€æŸ¥çš„ç©ºç™½ç‚¹åŠå‘¨å›´ç®¡é“ã€‚  

---

## é¢˜è§£æ¸…å•ï¼ˆâ‰¥4æ˜Ÿï¼‰  
1. **Xie2Yueï¼ˆ4.5æ˜Ÿï¼‰**  
   - **äº®ç‚¹**ï¼šåˆ©ç”¨çŠ¶å‹å¿«é€Ÿåˆ¤æ–­ç®¡é“ç±»å‹ï¼Œé€šè¿‡é¢„å¤„ç†æ–¹å‘å…¼å®¹æ€§ç®€åŒ–é€»è¾‘ã€‚  
   - **å…³é”®ä»£ç **ï¼š  
     ```cpp  
     if (tot == 5) puts("|");  
     else if (tot == 10) puts("-");  
     else if (tot == 15) puts("+");  
     ```  
   - **ä¼˜åŒ–**ï¼šå¤„ç† Hack æ•°æ®æ—¶ï¼Œå°† `M/Z` è§†ä¸ºæœ‰æ•ˆè¿æ¥ç‚¹ã€‚  

2. **All_In_Atomï¼ˆ4æ˜Ÿï¼‰**  
   - **äº®ç‚¹**ï¼šç›´æ¥æšä¸¾æ¯ä¸ªç©ºç™½ç‚¹çš„å¯èƒ½ç±»å‹ï¼Œé€šè¿‡å®å®šä¹‰ç®€åŒ–æ–¹å‘æ£€æŸ¥ã€‚  
   - **å…³é”®ä»£ç **ï¼š  
     ```cpp  
     #define up(x, y) (x>1 && (ch[x-1][y] == '|' || ... ))  
     if (up && down && left && right) cout << '+';  
     ```  

3. **rainygameï¼ˆ4æ˜Ÿï¼‰**  
   - **äº®ç‚¹**ï¼š`O(nm)` å¤æ‚åº¦ï¼Œé€šè¿‡ä½è¿ç®—å¿«é€ŸåŒ¹é…ç®¡é“ç±»å‹ã€‚  
   - **å…³é”®ä»£ç **ï¼š  
     ```cpp  
     int tot = (up<<3) | (right<<2) | (down<<1) | left;  
     if (tot == 0b1111) return '+';  
     ```  

---

## æœ€ä¼˜æ€è·¯ä¸ä»£ç å®ç°  
### å…³é”®æŠ€å·§  
- **æ–¹å‘çŠ¶å‹**ï¼šå°†ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„è¿æ¥éœ€æ±‚ç¼–ç ä¸º 4 ä½äºŒè¿›åˆ¶æ•°ï¼Œå¿«é€ŸåŒ¹é…ç±»å‹ã€‚  
- **é¢„å¤„ç†æ£€æŸ¥å‡½æ•°**ï¼šé€šè¿‡å®æˆ–è¾…åŠ©å‡½æ•°ç®€åŒ–æ¯ä¸ªæ–¹å‘çš„åˆæ³•æ€§åˆ¤æ–­ã€‚  

### æ ¸å¿ƒä»£ç ï¼ˆXie2Yue ä¼˜åŒ–ç‰ˆï¼‰  
```cpp  
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= m; j++) {
        if (ch[i][j] != '.') continue;
        int u = up(i, j), d = down(i, j), l = left(i, j), r = right(i, j);
        int tot = u + d*4 + l*8 + r*2; // ç¼–ç ä¸º 4 ä½äºŒè¿›åˆ¶
        if (tot == 15) cout << "+";
        else if (u && d) cout << "|";
        else if (l && r) cout << "-";
        // ... å…¶ä»–ç±»å‹åŒ¹é…
    }
}
```

---

## ç›¸ä¼¼é¢˜ç›®æ¨è  
1. **P1131 æ°´ç®¡å·¥æ¸¸æˆ** - ç±»ä¼¼ç®¡é“è¿æ¥æ¨¡æ‹Ÿã€‚  
2. **P1514 å¼•æ°´å…¥åŸ** - è·¯å¾„è¦†ç›–ä¸æ–¹å‘åˆ¤æ–­ã€‚  
3. **P1032 å­—ä¸²å˜æ¢** - çŠ¶æ€æšä¸¾ä¸éªŒè¯ã€‚  

---

## å¯è§†åŒ–ç¤ºä¾‹ï¼ˆå¤å¤åƒç´ é£æ ¼ï¼‰  
```javascript  
// Canvas ç»˜åˆ¶æ ¸å¿ƒé€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰  
function drawGrid() {  
    ctx.fillStyle = '#000';  
    // ç»˜åˆ¶ç½‘æ ¼çº¿  
    for (let i = 0; i <= rows; i++) {  
        drawLine(0, i * cellSize, cols * cellSize, i * cellSize);  
    }  
    // ç»˜åˆ¶ç®¡é“å…ƒç´   
    pipes.forEach(pipe => {  
        ctx.fillStyle = pipe.color;  
        ctx.fillRect(pipe.x * cellSize, pipe.y * cellSize, cellSize, cellSize);  
    });  
}  

// éŸ³æ•ˆè§¦å‘  
function playSound(effect) {  
    const sfx = { connect: 'ğŸ”Š', error: 'ğŸ’¥' };  
    new Audio(sfx[effect]).play();  
}  
```

---
å¤„ç†ç”¨æ—¶ï¼š79.75ç§’
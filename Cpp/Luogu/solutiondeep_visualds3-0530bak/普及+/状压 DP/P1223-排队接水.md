# 题目信息

# 排队接水

## 题目描述

有 $n$ 个人在一个水龙头前排队接水，假如每个人接水的时间为 $T_i$，请编程找出这 $n$ 个人排队的一种顺序，使得 $n$ 个人的平均等待时间最小。


## 说明/提示

$1\le n \leq 1000$，$1\le t_i \leq 10^6$，不保证 $t_i$ 不重复。


## 样例 #1

### 输入

```
10 
56 12 1 99 1000 234 33 55 99 812```

### 输出

```
3 2 7 8 1 4 9 6 10 5
291.90
```

# AI分析结果



# 排队接水 - 算法分析与题解总结

## 算法分类
**贪心算法**

---

## 题解思路与核心难点

### 核心逻辑
所有题解均采用**接水时间升序排列**策略，通过数学证明或直觉得出：将时间短的人排在前面可最小化总等待时间。总等待时间计算公式为：Σ(time[i] * (n-i))，其中 time 数组已排序。

### 关键实现差异
- **数据结构**：使用结构体（BlueArc）、pair（Anguei）或数值编码（f112358）处理时间与序号的绑定
- **排序方式**：STL sort（多数题解）或手写冒泡/快排（封禁用户、天命之路）
- **时间计算**：循环累加（主流）或公式推导（SbasdianJulian 的递推公式）

### 解决难点
1. **序号保留**：排序后需保留原始序号，通过结构体/pair/数值编码实现
2. **精度处理**：使用 double 存储总时间避免溢出（多篇题解强调）
3. **公式推导**：正确理解等待时间的累加方式（第 i 人影响 n-i 人）

---

## 高星题解推荐（≥4星）

### 1. f112358 题解（赞272）⭐️⭐️⭐️⭐️⭐️
- **亮点**：时间*1001 + 序号编码，无需结构体，代码极简
- **核心代码**：
  ```cpp
  t[i] = x * 1001 + i; // 编码
  sum += t[j]/1001 * (n-j); // 解码计算
  ```
- **优势**：利用数值范围巧妙分离数据，代码量最少

### 2. BlueArc 题解（赞115）⭐️⭐️⭐️⭐️
- **亮点**：清晰结构体实现，双重循环计算总时间
- **核心片段**：
  ```cpp
  for(j=n-1;j>=1;j--) 
    time += a[i].b * j; // j为剩余人数
  ```
- **教学价值**：结构体用法示范，适合初学者理解

### 3. Anguei 题解（赞82）⭐️⭐️⭐️⭐️
- **亮点**：STL pair 应用，内存动态分配
- **核心技巧**：
  ```cpp
  pair<int, int>* a = new pair<int, int>[n]; // 动态数组
  sort(a, a+n); // 默认按first排序
  ```
- **优势**：展示 pair 的便捷性，适合进阶学习

---

## 最优思路提炼

### 关键技巧
1. **贪心策略**：严格证明相邻交换最优性（无乐鸦的数学推导）
2. **数据编码**：f112358 的 1001 倍乘处理，兼顾时间与序号
3. **时间计算**：O(n) 公式 `sum += time[i] * (n-i-1)`（多篇题解采用）

### 思维拓展
- **反证法**：若存在逆序对，总时间必然更大（参考无乐鸦的相邻元素分析）
- **权重设计**：将问题转化为带权排序，权重系数为影响人数

---

## 相似题目推荐
1. P1090 合并果子（贪心+优先队列）
2. P1803 线段覆盖（活动选择问题）
3. P2240 部分背包问题（性价比排序）

---

## 可视化设计

### 算法演示方案
![排队接水动画示意图](https://i.imgur.com/8W3TfdG.gif)
1. **像素风格**：
   - 8-bit 人物像素图表示排队者
   - 头顶显示时间（如 ▲12 ▼55）
   - 背景音乐：FC 风格循环旋律

2. **交互设计**：
   - **高亮对比**：红色标记当前比较元素，绿色标记已排序元素
   - **音效反馈**：
     - 元素交换时：8-bit "哔"声
     - 计算总时间时：金币收集音效
   - **控制面板**：暂停/步进/重置按钮，速度调节滑块

3. **动态公式**：
   - 右侧面板实时显示：`总时间 += 当前时间 × 剩余人数`
   - 用下降的数字气泡展示每步贡献值

---

## 核心代码参考（f112358 方案）
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

long long t[1001];

int main() {
    int n; cin >> n;
    for(int i=1; i<=n; i++) {
        int x; cin >> x;
        t[i] = x * 1001 + i; // 编码存储
    }
    sort(t+1, t+1+n);
    
    double sum = 0;
    for(int j=1; j<=n; j++) {
        cout << t[j]%1001 << " "; // 解码输出序号
        sum += (t[j]/1001) * (n-j); // 计算等待时间
    }
    printf("\n%.2lf", sum/n);
}
```

---

## 总结启示
1. **问题转化**：将生活场景抽象为数学模型（时间×权重）
2. **编码艺术**：利用数值范围处理多维度数据
3. **精度意识**：及早确定数据类型，避免最后强制转换出错

通过此案例可深入理解贪心算法的证明与应用，其思想可拓展至各类调度优化问题。

---
处理用时：79.24秒
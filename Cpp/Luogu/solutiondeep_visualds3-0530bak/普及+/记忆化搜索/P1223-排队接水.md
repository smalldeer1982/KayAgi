# 题目信息

# 排队接水

## 题目描述

有 $n$ 个人在一个水龙头前排队接水，假如每个人接水的时间为 $T_i$，请编程找出这 $n$ 个人排队的一种顺序，使得 $n$ 个人的平均等待时间最小。


## 说明/提示

$1\le n \leq 1000$，$1\le t_i \leq 10^6$，不保证 $t_i$ 不重复。


## 样例 #1

### 输入

```
10 
56 12 1 99 1000 234 33 55 99 812```

### 输出

```
3 2 7 8 1 4 9 6 10 5
291.90
```

# AI分析结果



## 算法分类
贪心算法

## 题解思路与核心难点
### 核心思路
1. **贪心策略**：让接水时间短的优先接水，通过数学证明相邻两人交换会减少总时间，推导出整体最优解为升序排列。
2. **数据结构**：
   - 主流采用结构体/pair存储（时间，序号），通过排序分离时间与序号
   - 巧妙数值处理（时间*1001+序号）避免结构体
3. **时间计算**：第i个人的等待时间影响(n-i)人，总时间公式为 Σt[i]*(n-i)

### 解决难点
1. **序号维护**：在排序过程中需保留原始序号
   - 结构体/pair直接存储双属性
   - 数值编码法（时间*1001+序号）实现单值排序
2. **精度处理**：平均时间需保留两位小数
   - 使用double类型累加
   - 输出时用printf控制精度

## 高星题解推荐（≥4★）
### 1. 无乐鸦（5★）
**亮点**：严谨数学推导，证明贪心策略正确性  
**代码**：未贴代码但思路清晰，适合理论理解

### 2. f112358（4.5★）
**亮点**：数值编码法巧妙处理序号，代码简洁  
**核心代码**：
```cpp
t[i] = x*1001 + i;  // 时间与序号合并
sort(t+1, t+1+n);
sum += t[j]/1001*(n-j);  // 恢复时间计算
```

### 3. BlueArc（4★）
**亮点**：结构体清晰，双重循环优化时间计算  
**核心逻辑**：
```cpp
for(j=n-1; j>=1; j--) 
    time += a[i].b * j;  // 按权重累加
```

## 最优思路提炼
1. **贪心排序**：时间升序排列是核心，可用快速排序（O(nlogn)）
2. **高效编码**：对1e3规模数据，数值编码法节省内存且免去结构体
3. **公式优化**：总时间计算使用Σt[i]*(n-i) 避免双重循环

## 相似题目推荐
1. **P1090 合并果子**（贪心+优先队列）
2. **P1803 线段覆盖**（按结束时间排序）
3. **P2240 部分背包问题**（性价比贪心）

## 可视化设计
### 动画方案
1. **像素风格队列**：
   - 用不同颜色方块表示不同接水时间（红色=长，绿色=短）
   - 当前处理的人高亮闪烁，后方等待队列显示倒计时
2. **核心流程**：
   ```python
   # 伪代码示例
   sorted_people = sort(people)
   total_wait = 0
   for i in 0..n-1:
       高亮sorted_people[i]
       显示后方(n-i-1)人头上冒出"+t[i]"气泡
       total_wait += t[i] * (n-i-1)
   ```
3. **交互功能**：
   - 速度调节：快慢对比不同排序算法效率
   - 步骤回退：观察错误排序导致的总时间增加

### 复古游戏化
1. **8-bit音效**：
   - 交换位置时播放"哔"声
   - 完成排序后播放胜利旋律
2. **积分系统**：
   - 正确排序+100分，错误操作-50分
   - 连击奖励：快速完成无错误额外加分

## 核心代码实现（f112358改进版）
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

int main() {
    int n; 
    cin >> n;
    long long t[1001];
    for(int i=1; i<=n; ++i) {
        int x; cin >> x;
        t[i] = x * 1001LL + i; // 处理1e6*1001 < 1e9+1e3
    }
    sort(t+1, t+n+1);
    
    double sum = 0;
    for(int i=1; i<=n; ++i) {
        cout << t[i]%1001 << " ";
        sum += (t[i]/1001) * (n-i); // 时间 * 影响人数
    }
    printf("\n%.2lf", sum/n);
}
```

---
处理用时：67.34秒
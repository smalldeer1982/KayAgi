# 题目信息

# 奇怪的分组

## 题目背景

终于解出了 dm 同学的难题，dm 同学同意帮 v 神联络。可 dm 同学有个习惯，就是联络同学的时候喜欢分组联络，而且分组的方式也很特别，要求第 $i$ 组的的人数必须大于他指定的个数 $C_i$。在 dm 同学联络的时候，v 神在想，按照 dm 同学的规则一共可以有多少种方案呢？他想啊想，终于……没想出来。于是他又想到了聪明的你，你能帮 v 神算出按照 dm 同学的规则有多少种分组方案吗？


## 题目描述

v 神的班级共有 $N$ 个人，dm 同学想把同学分成 $M$ 组联络，要求第 $i$ 组的人数必须大于给定的正整数 $C_i$，求有多少不同的方案（两个是相同的方案当且仅当对于任意的一队 $i$，两个方案的第 $i$组同学数量相等）。由于结果很大，所以你只需要输出模 $10^9+7$ 的值。


## 说明/提示

### 样例解释

方案有三种，每组的个数分别是 $(3,3,4)$，$(2,4,4)$，$(2,3,5)$。

### 数据范围约定

对于 $30\%$ 的数据，$N,M\le 10$。

对于 $60\%$ 的数据，$N,M\le 1000$。

对于 $100\%$ 的数据，$1\le N ,M\le 10^6$，$1\le C_i\le 1000$。

数据保证至少有一个方案。


## 样例 #1

### 输入

```
10 3

1

2

3

```

### 输出

```
3```

# AI分析结果



### 综合分析与结论

**题目核心**：将问题转化为隔板法模型，通过组合数计算解决分组方案数问题。  
**核心难点**：  
1. 正确应用隔板法模型（剩余人数需 ≥ M）  
2. 大数组合数模运算（阶乘预处理 + 逆元计算）  
**贪心策略**：虽然题目不涉及贪心，但关键思路是"预先分配"每组最低人数，剩余部分转化为固定模型（类似贪心的预处理）。  
**可视化设计**：  
- **动画演示**：展示初始填充 → 剩余人数 → 隔板插入过程，用像素方块表示人数，隔板动态插入时播放音效。  
- **复古风格**：8-bit 像素风格，格子动态填充，音效提示关键步骤（如负数检测、组合数计算）。  
- **交互控制**：支持暂停/步进观察剩余人数变化和隔板插入逻辑。

---

### 题解清单（评分≥4星）

#### 1. 作者：hongzy（5星）
- **亮点**：双解法（阶乘逆元 + Lucas定理），代码规范，预处理优化。  
- **核心代码**：阶乘预处理 + 快速幂求逆元，直接调用组合数函数。  
- **个人心得**：指出Lucas定理在特定场景下的高效性。

#### 2. 作者：KAMIYA_KINA（4星）
- **亮点**：详细讲解球盒模型转化，附带阶乘预处理代码。  
- **核心代码**：预处理阶乘和逆元数组，组合数查询O(1)。

#### 3. 作者：Genius_Star（4星）
- **亮点**：Lucas定理实现，代码简洁，适合大模数场景。  
- **核心代码**：递归实现Lucas定理，直接处理模运算。

---

### 最优思路提炼

1. **模型转化**：总人数减去∑(C_i+1)，剩余k人需分M组（每组≥1）→ 组合数C(k-1, M-1)。  
2. **组合数计算**：  
   - **阶乘预处理**：O(N)预计算阶乘和逆元数组。  
   - **逆元优化**：费马小定理快速求逆，避免除法。  
3. **边界处理**：检查剩余人数是否≥M（题目保证至少一解）。

---

### 关键代码实现

```cpp
// 阶乘预处理与组合数计算（作者：hongzy）
#define MAXN 1000000
int fc[MAXN + 10]; // 阶乘数组

LL Qpow(LL a, LL b) { // 快速幂求逆元
    LL ans = 1;
    for(; b; b>>=1, a=a*a%MOD)
        if(b & 1) ans = ans*a % MOD;
    return ans;
}

int C(int n, int k) {
    if(n < k) return 0;
    LL fm = (1LL * fc[n-k] * fc[k]) % MOD;
    return 1LL * fc[n] * Qpow(fm, MOD-2) % MOD;
}

// 预处理
fc[0] = 1;
for(int i=1; i<=MAXN; i++) 
    fc[i] = (1LL * fc[i-1] * i) % MOD;
```

---

### 同类型题目推荐

1. **P3807 【模板】卢卡斯定理**  
   - 练习Lucas定理实现组合数取模。

2. **P1771 方程的解**  
   - 隔板法应用，非负整数解转正整数解。

3. **P4369 组合数问题**  
   - 组合数性质与模运算结合。

---

### 可视化设计示例

**像素动画流程**：  
1. 初始显示N个像素块，每组填充C_i+1个（颜色区分）。  
2. 剩余k=N-∑(C_i+1)块动态显示为灰色。  
3. 在k-1个间隙中插入M-1个隔板（红色竖线），伴随"哔"音效。  
4. 成功插入后播放胜利音效，显示组合数值。

**代码片段（伪代码）**：  
```javascript
// Canvas绘制示例
function drawGroups(N, M, C) {
    let remaining = N - C.reduce((a,b)=>a+b, 0) - M;
    // 绘制初始填充
    C.forEach((c, i) => drawRect(i, c+1, 'blue'));
    // 动态插入隔板
    for(let i=0; i<M-1; i++) {
        playSound('insert');
        drawDivider(remaining, i);
    }
}
```

---

**总结**：本题解的核心在于模型转化与高效组合数计算，预处理阶乘和逆元是最优方法。通过可视化隔板插入过程，可直观理解组合数的生成逻辑。

---
处理用时：56.51秒
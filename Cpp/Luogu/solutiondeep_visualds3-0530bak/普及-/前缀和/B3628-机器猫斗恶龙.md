# 题目信息

# 机器猫斗恶龙

## 题目描述

机器猫出门斗恶龙了！他需要通过 $n$ 个关卡。

每个关卡要么是与怪物战斗，扣除一定的血量；要么是营地，给机器猫增加一定的血量。

在旅途中，机器猫**任意时刻**的血量不能低于或等于 $0$。问机器猫至少需要多少的初始血量，才能完成任务。

血量为正整数。

## 说明/提示

**样例解释**

第二组样例：机器猫带着 $501$ 点血量出门，两场战斗之后剩下 $1$，恢复到 $1001$，两场战斗之后为 $801$，完成任务。

**数据规模与约定**

对于 $100\%$ 的数据，$n\leq 100000, 1\leq |a_i|\leq 1000$。



## 样例 #1

### 输入

```
3
-100 -200 -300```

### 输出

```
601```

## 样例 #2

### 输入

```
5
-200 -300 1000 -100 -100```

### 输出

```
501```

# AI分析结果



**唯一算法分类**  
前缀和与贪心

---

**综合分析与结论**  
本题要求机器猫在通过各关卡时始终保持血量>0。核心在于找到初始血量的最小值。最优解法基于前缀和的最小值推导，而非暴力二分：

1. **关键推导**：维护前缀和数组，记录每一步的累积变化。初始血量必须满足 `x > -min_sum`（`min_sum`为前缀和的最小值）。因此，最小初始血量为 `max(1, -min_sum + 1)`。
2. **复杂度**：直接遍历数组计算前缀和最小值，时间复杂度为 O(n)，空间 O(1)，远优于二分法的 O(n log C)。
3. **可视化设计**：动画可逐步绘制前缀和折线图，高亮当前最小值，动态更新初始血量下限。复古像素风格中，用红色标记最低点，绿色显示最终答案，辅以音效提示关键步骤。

---

**题解清单 (4星)**  
1. **ShanCreeperPro 的二分法（4星）**  
   - 思路清晰，利用二分框架快速定位答案。  
   - 不足：未发现最优前缀和规律，时间复杂度较高。  
   - 亮点：代码可读性强，适合二分入门学习。

---

**最优思路提炼**  
- **前缀和最小值法**：遍历时动态计算前缀和，记录最小值 `min_sum`，结果取 `max(1, -min_sum + 1)`。
- **数学推导**：通过分析初始血量与累积和的关系，将问题转化为求极值，避免复杂模拟。

---

**同类型题与套路**  
- **通用思路**：类似“最大子数组和”问题，需维护动态极值。  
- **类似题目**：  
  1. [53. 最大子序和](https://leetcode.cn/problems/maximum-subarray/)  
  2. [121. 买卖股票的最佳时机](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/)  
  3. [LCP 30. 魔塔游戏](https://leetcode.cn/problems/p0NxJO/)（需贪心维护血线）

---

**推荐洛谷题目**  
1. [P1115 最大子段和](https://www.luogu.com.cn/problem/P1115)  
2. [P1969 积木大赛](https://www.luogu.com.cn/problem/P1969)  
3. [P2947 Look Up S](https://www.luogu.com.cn/problem/P2947)

---

**代码实现**  
```cpp
#include <iostream>
#include <climits>
using namespace std;

int main() {
    int n;
    cin >> n;
    long long sum = 0, min_sum = 0;
    for (int i = 0; i < n; ++i) {
        int a;
        cin >> a;
        sum += a;
        if (sum < min_sum) min_sum = sum;
    }
    cout << max(1LL, -min_sum + 1) << endl;
    return 0;
}
```

---

**可视化算法演示**  
- **动画设计**：Canvas 绘制折线图，横轴为关卡，纵轴为前缀和。实时更新当前最小值，用红色标记。最终结果以绿色显示。  
- **复古效果**：8-bit 像素风格，步进时播放“哔”声，找到答案时播放胜利音效。  
- **交互功能**：支持暂停/继续，调整动画速度，突出前缀和变化与最小值更新。

---
处理用时：207.35秒
# 题目信息

# [USACO3.1] 总分 Score Inflation

## 题目背景

选手在我们 USACO 的竞赛中的得分越多我们越高兴。

我们试着设计我们的竞赛以便人们能尽可能的多得分,这需要你的帮助。


## 题目描述

我们可以从几个种类中选取竞赛的题目，这里的一个“种类”是指一个竞赛题目的集合，解决集合中的题目需要相同多的时间并且能得到相同的分数。

你的任务是写一个程序来告诉 USACO 的职员,应该从每一个种类中选取多少题目，使得解决题目的总耗时在竞赛规定的时间里并且总分最大。

## 说明/提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \leq n, m \leq 10^4$，$1 \leq p_i, t_i \leq 10^4$。

## 样例 #1

### 输入

```
300 4
100 60
250 120
120 100
35 20```

### 输出

```
605```

# AI分析结果



# 【算法分类】
**完全背包**

---

# **综合分析与结论**

## **题解思路与核心难点**
- **问题本质**：每个题目种类可无限次选取 → **完全背包**问题。
- **状态转移方程**：`f[j] = max(f[j], f[j - t[i]] + p[i])`，其中 `j` 为总时间，`t[i]` 为题目耗时，`p[i]` 为分数。
- **关键实现**：  
  - 一维数组优化：节省空间复杂度至 `O(M)`。
  - **正向遍历**时间维度（`t[i]` 到 `M`），允许多次选取同一物品。
- **常见误区**：
  - 误用 0-1 背包的逆序遍历导致错误。
  - 输入参数顺序混淆（分数与时间可能颠倒）。

## **可视化设计**
### **动态规划矩阵更新动画**
1. **Canvas 网格**：  
   - 横向轴表示时间 `0~M`，纵向轴表示题目种类。
   - 每个格子显示当前时间下的最大分数。
2. **更新高亮**：  
   - 当前处理的种类和时间用红色边框标记。
   - 更新的格子（`f[j]`）以绿色填充，旧值保留灰色。
3. **音效触发**：  
   - 状态更新时播放“滴”声，最优解更新时播放“叮”声。
4. **复古像素风格**：  
   - 8-bit 调色板：深蓝背景，亮绿/红高亮。
   - 像素字体显示数值，网格线为浅灰色。

### **自动演示模式**
- **AI 步进**：自动遍历每个种类和时间，间隔 200ms。
- **控制面板**：暂停/继续、调整速度、重置。

---

# **题解清单（≥4星）**

| 作者             | 星级 | 关键亮点                                                                 |
|------------------|------|--------------------------------------------------------------------------|
| llzzxx712        | ⭐⭐⭐⭐ | 详细对比 0-1 背包与完全背包，代码注释清晰，提供调试数据。                |
| SLYZ_0120        | ⭐⭐⭐⭐ | 强调输入参数顺序易错点，代码简洁易懂。                                  |
| vibrant72        | ⭐⭐⭐⭐ | 以竞赛采药类比，代码高效，状态转移方程明确。                            |

---

# **核心代码实现**
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

int f[10005], p[10005], t[10005];

int main() {
    int M, N;
    cin >> M >> N;
    for (int i = 1; i <= N; ++i) 
        cin >> p[i] >> t[i];
    
    for (int i = 1; i <= N; ++i)
        for (int j = t[i]; j <= M; ++j)
            f[j] = max(f[j], f[j - t[i]] + p[i]);
    
    cout << f[M];
    return 0;
}
```

---

# **同类型题与推荐题目**
1. **P1616 疯狂的采药**（完全背包模板题）
2. **P1853 投资的最大效益**（完全背包变种，利息计算）
3. **P2918 [USACO08NOV]Buying Hay S**（完全背包最小值问题）

---

# **个人心得摘录**
- *llzzxx712*：调试时发现样例结果异常，最终意识到是背包类型错误，强调“正向遍历”的重要性。
- *乒乓高手*：最初误以为是 0-1 背包，花费大量时间调试后恍然大悟，提醒“仔细审题类型”。

---

# **可视化示例（伪代码）**
```javascript
// Canvas 初始化
const canvas = document.getElementById('dp-canvas');
const ctx = canvas.getContext('2d');

function drawDPGrid(M) {
    // 绘制横向时间轴，每个像素代表一个时间单位
    for (let j = 0; j <= M; j++) {
        ctx.fillStyle = f[j] > 0 ? '#0F0' : '#333';
        ctx.fillRect(j * 10, 0, 9, 9); // 每个格子10x10像素
    }
}

// 更新动画
function updateStep(i, j) {
    highlightCurrent(i, j); // 红色边框标记当前处理位置
    if (f[j] < f[j - t[i]] + p[i]) {
        playSound('upgrade'); // 播放升级音效
        f[j] = f[j - t[i]] + p[i];
        drawDPGrid(M);
    }
}
```

---
处理用时：47.55秒
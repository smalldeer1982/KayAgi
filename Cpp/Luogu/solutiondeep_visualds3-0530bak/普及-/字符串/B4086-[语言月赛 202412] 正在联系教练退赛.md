# 题目信息

# [语言月赛 202412] 正在联系教练退赛

## 题目背景


在本题中，我们称一个字符串 $y$ 是一个字符串 $x$ 的子串，当且仅当从 $x$ 的开头和结尾删去若干个（可以为 $0$ 个）字符后剩余的字符串和 $y$ 相同。

## 题目描述


在 XCPC 竞赛里，共有 $n$ 只猪猪队伍。每只猪猪队伍都有一个队伍名称。第 $i$ 只队伍的名称是 $s_i$。

但是，队伍名称不能乱起。主办方会审查每支队伍的名称。如果一支队伍的队名被认为违规，主办方就会联系该队伍的教练员，为该队伍办理退赛。

具体而言，主办方有一个字典，字典里共有 $m$ 个字符串，第 $j$ 个字符串是 $t_j$。

如果一支队伍的队伍名 $s_i$ 存在一个子串 $k$，使得 $k$ 在主办方的字典里，则这支队伍的队伍名被认为是违规。

你作为主办方，想知道有哪些队伍会被联系教练退赛。

## 说明/提示

### 样例 1 解释

因为第一个队名包含子串 $\texttt{fusu}$，因此这支队伍会被退赛。    
因为第二个队名包含子串 $\texttt{er}$，因此这支队伍会被退赛。

### 数据规模与约定

我们用 $|s_i|$ 和 $|t_j|$ 表示 $s_i$ 和 $t_j$ 的长度。

| 测试点编号 | $n$ | $m$ | 特殊约定 |
| :-: | :-: | :-: | :-: |
| $1$ | $=1$ | $=1$ | $\mid s_i\mid =\mid t_j\mid =1$ |
| $2$ | $=1$ | $=1$ | 无 |
| $3$ | $=1$ | $\leq 100$ | 无 |
| $4$ | $\leq 100$ | $=1$| 无 |
| $5,6$ | $\leq 100$ | $\leq 100$ | $\mid s_i \mid=\mid t_j\mid = 1$ |
| $7,8$ | $\leq 100$ | $\leq 100$ | $\mid t_i \mid = 1$ |
| $9,10$ | $\leq 100$ | $\leq 100$ | 无 |

对全部的测试数据，$1 \leq n,m \leq 100$，$1 \leq |s_i|, |t_j| \leq 100$，输入的字符串均仅含可见 ASCII 字符，其 ASCII 范围为 $33 \sim 126$（含两端，空格的 ASCII 为 $32$）。

## 样例 #1

### 输入

```
3
yifusuyi
erFusuer
yiFusuYi
2
fusu
er```

### 输出

```
Yes
Yes
No```

# AI分析结果



---

### 唯一算法分类  
**无算法分类**（核心为暴力枚举子串匹配）

---

### 综合分析与结论  
#### 核心思路与难点  
1. **暴力枚举**：对于每个队伍的字符串 `s[i]`，遍历字典中所有字符串 `t[j]`，检查 `t[j]` 是否是 `s[i]` 的连续子串。  
2. **子串截取**：通过 `s.substr(p, len)` 截取从位置 `p` 开始、长度至多 `len` 的子串，与 `t[j]` 精确匹配。  
3. **优化终止**：一旦发现匹配，立即标记并终止后续检查，减少冗余计算。  

#### 可视化设计要点  
- **动画流程**：  
  1. 将队伍名称显示为字符网格，字典字符串以浮动标签展示。  
  2. 高亮当前检查的起始位置 `p`（黄色方块），滑动截取 `t[j].size()` 长度的子串区域（蓝色覆盖）。  
  3. 若匹配，触发绿色闪烁特效并播放“成功音效”；否则继续滑动 `p`，步进音效为短促“滴”声。  
- **复古风格**：使用 8-bit 像素字体，背景为灰黑色网格，匹配成功时队伍名称变为红色像素块。  
- **自动演示**：按空格键切换自动/手动模式，自动模式下算法以每秒 5 步的速度执行。  

---

### 题解清单 (4星)  
#### 题解作者：一扶苏一（4星）  
**关键亮点**：  
1. **直接暴力实现**：通过三层循环直观解决问题，代码易读。  
2. **及时终止优化**：发现匹配后立即 `break`，减少无效计算。  
3. **正确处理边界**：利用 `substr` 自动截断特性，无需额外长度校验。  

---

### 核心代码实现  
```cpp  
// 检查队伍 s 是否包含字典中的任一子串  
bool checkViolation(const string& s, const vector<string>& dict) {  
    for (const string& t : dict) {  
        if (t.empty()) continue;  
        for (int p = 0; p <= (int)s.size() - (int)t.size(); ++p) {  
            if (s.substr(p, t.size()) == t) {  
                return true;  
            }  
        }  
    }  
    return false;  
}  
```  
**代码逻辑**：  
- 外层遍历字典字符串 `t`，内层遍历 `s` 的起始位置 `p`。  
- 若 `s` 从 `p` 开始的 `t.size()` 长度子串与 `t` 完全一致，立即返回违规。  

---

### 同类题型与推荐  
1. **洛谷 P3375**：KMP 模板题，高效子串匹配。  
2. **洛谷 P1308**：统计单词出现次数，考察子串匹配与边界条件。  
3. **洛谷 P4391**：结合循环节与 KMP 的高级应用。  

---

### 复古像素化动画代码片段（JavaScript）  
```javascript  
// 绘制队伍名称的像素网格  
function drawTeamName(ctx, s, p, t, isMatch) {  
    const CELL_SIZE = 20;  
    ctx.fillStyle = isMatch ? "#00FF00" : "#333333";  
    // 绘制字符和当前检查区域  
    for (let i = 0; i < s.length; ++i) {  
        if (i >= p && i < p + t.length) {  
            ctx.fillStyle = i === p ? "#FFFF00" : "#3399FF"; // 起始位置黄色，其余蓝色  
            ctx.fillRect(i * CELL_SIZE, 0, CELL_SIZE, CELL_SIZE);  
        }  
        ctx.fillText(s[i], i * CELL_SIZE + 4, 16);  
    }  
}  
```  
**交互设计**：  
- 按 `A` 键自动播放，按 `S` 键单步执行。  
- 匹配成功时播放 `success.wav`（8-bit 风格上扬音效）。  

---

### 个人心得  
1. **边界陷阱**：`substr` 的第二个参数是长度而非终止位置，需注意 `p + t.size()` 越界时的隐式截断。  
2. **及时剪枝**：内层循环发现匹配后立即终止，避免冗余计算，这对大数据量尤为重要。

---
处理用时：77.96秒
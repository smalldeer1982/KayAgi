# 题目信息

# [常州市赛 2020] 重点单词

## 题目背景

搬运自 <http://czoj.com.cn/p/448>。数据为民间数据。

## 题目描述

回家后，小 $\text{X}$ 望着自己打瞌睡时写的英语笔记陷入了迷茫。由于太困了，他会时不时地把一个字母多写几次：比如可能把 $\texttt{she}$ 写成 $\texttt{shhe}$，也可能写成 $\texttt{ssshee}$。  
但他依稀记得这堂课只讲了一个重点单词。为了找到这个单词，他想先把每个单词中连续重复的字母压缩起来：把 $\texttt{coool}$ 压缩为 $\texttt{col}$，把 $\texttt{aabbaa}$ 压缩为 $\texttt{aba}$。接下来找到压缩后出现次数最多的单词，这样就能找到重点单词了。  
由于工作量太大，小 $\text{X}$ 希望你帮助他找到重点单词。他向你保证压缩后的单词出现次数最多的一定唯一。

## 说明/提示

### 样例解释
- $\texttt{qaaqqq}$ 压缩成 $\texttt{qaq}$；  
- $\texttt{qwwwwq}$ 压缩成 $\texttt{qwq}$；  
- $\texttt{qqqqaq}$ 压缩成 $\texttt{qaq}$；  

$\texttt{qaq}$ 出现了两次，$\texttt{qwq}$ 出现了一次，所以 $\texttt{qaq}$ 出现次数最多。  
### 数据范围
本题共有 $10$ 个测试点。  
对于全部数据：$1\le n\le 10^4$，$1\le $ 单词长度 $\le50$。 
|测试点编号|$n$|单词长度|
|:-:|:-:|:-:|
|$1$|$=1$|$=1$|
|$2\sim3$|$\le 10^4$|$=1$|
|$4\sim6$|$=1$|$\le 50$|
|$7\sim8$|$\le 10$|$\le 50$|
|$9\sim10$|$\le 10^4$|$\le 50$|  


## 样例 #1

### 输入

```
3
qaaqqq
qwwwwq
qqqqaq```

### 输出

```
qaq```

# AI分析结果



# 【算法分类】  
字符串处理、哈希表应用  

---

# 【题解思路与难点分析】  

**核心步骤与算法要点**  
1. **字符串压缩**：遍历每个字符，与前一个字符比较，仅保留非连续重复的字符。  
   - 关键变量：结果字符串 `res`，逐个字符判断是否与前一个相同。  
   - 难点：正确处理首字符和末尾连续字符（如确保最后一个字符被加入）。  
2. **统计频率**：使用 `map<string, int>` 统计压缩后的字符串出现次数。  
3. **找最大值**：遍历 `map`，维护最大值变量 `maxn` 和对应的字符串 `res`。  

**解决难点对比**  
- **正确压缩字符串**：部分题解（如 jiangchengzhe）在遍历时漏掉最后一个字符，需显式添加（如 `sum += s.back()`）。  
- **及时更新最大值**：部分题解（如 TheTrash）在每次插入 `map` 后立即更新最大值，避免二次遍历；而其他题解最后统一遍历 `map`，两种方法时间复杂度相同。  
- **哈希优化**：题解 sea_bird 使用字符串哈希将字符串转为整数，再排序统计相邻相同项，虽减少内存占用但增加排序时间，复杂度略高于 `map` 方案。  

**精炼结论**  
最优方案为直接遍历字符串压缩，并用 `map` 统计频率。时间复杂度为 $O(n \cdot L)$（$L$ 为单词长度），完全满足题目数据范围。  

---

# 【题解评分 (≥4星)】  

1. **sfb1363II (4.5星)**  
   - 亮点：代码简洁，逻辑清晰，正确处理所有字符。  
   - 改进点：可省略预存 `s[N]` 数组，直接边读边处理。  

2. **Sliarae (4星)**  
   - 亮点：使用 `t.back()` 直接比较结果字符串末尾，避免记录前驱变量。  
   - 改进点：变量命名可更明确（如 `t` 改为 `compressed`）。  

3. **TheTrash (4星)**  
   - 亮点：边统计边更新最大值，减少一次遍历。  
   - 改进点：未正确处理最后一个字符（需显式添加 `sum += s.back()`）。  

---

# 【最优思路与技巧】  

**关键代码实现**  
```cpp  
string compress(string s) {  
    string res = "";  
    for (int i = 0; i < s.size(); i++) {  
        if (i == 0 || s[i] != s[i-1]) {  
            res += s[i];  
        }  
    }  
    return res;  
}  

// 统计与找最大值  
map<string, int> mp;  
for (int i = 0; i < n; i++) {  
    string s; cin >> s;  
    string c = compress(s);  
    mp[c]++;  
}  
string ans;  
int max_cnt = 0;  
for (auto &[str, cnt] : mp) {  
    if (cnt > max_cnt) {  
        max_cnt = cnt;  
        ans = str;  
    }  
}  
```  

**优化技巧**  
- 边读入边压缩，避免存储原始字符串数组。  
- 使用 `s.back()` 或单变量记录前驱字符，减少条件判断。  

---

# 【同类题目与推荐】  

1. **P1308 统计单词数**（字符串处理与模式匹配）  
2. **P1914 小书童——密码**（字符替换与循环处理）  
3. **P1055 ISBN号码**（字符串校验与格式化处理）  

---

# 【可视化与算法演示】  

**动画方案设计**  
1. **字符串压缩过程**：  
   - **高亮当前字符**：红色标记当前处理的字符。  
   - **结果字符串更新**：绿色显示已压缩的字符序列。  
   - **比较逻辑**：若当前字符与前一个相同，显示“跳过”；否则显示“加入”。  

2. **频率统计与最大值更新**：  
   - **柱状图动态更新**：每处理一个单词，对应压缩字符串的柱状高度增加。  
   - **最大值高亮**：当前最大频率的柱状图用金色边框标记。  

**复古像素风格实现**  
- **颜色方案**：8位色调色板（红、绿、金、黑）。  
- **Canvas 绘制**：  
  - 网格布局：每行显示一个压缩后的字符串及其频率柱状图。  
  - 像素动画：字符逐个滑入结果区，频率柱状图以方块堆叠形式增长。  
- **音效设计**：  
  - 字符加入：短促“哔”声；  
  - 最大值更新：上扬音调；  
  - 背景音乐：8位循环旋律。  

**交互功能**  
- **步进控制**：空格键单步执行，Enter 键自动播放。  
- **速度调节**：方向键调整动画速度（慢/中/快）。  

---

# 【核心代码完整实现】  

```cpp  
#include <iostream>  
#include <map>  
using namespace std;  

string compress(string s) {  
    string res;  
    for (int i = 0; i < s.size(); ++i) {  
        if (i == 0 || s[i] != s[i-1]) res += s[i];  
    }  
    return res;  
}  

int main() {  
    ios::sync_with_stdio(false);  
    cin.tie(nullptr);  

    int n;  
    cin >> n;  
    map<string, int> freq;  
    string ans;  
    int max_cnt = 0;  

    for (int i = 0; i < n; ++i) {  
        string s, c;  
        cin >> s;  
        c = compress(s);  
        if (++freq[c] > max_cnt) {  
            max_cnt = freq[c];  
            ans = c;  
        }  
    }  

    cout << ans << endl;  
    return 0;  
}  
```

---
处理用时：90.36秒
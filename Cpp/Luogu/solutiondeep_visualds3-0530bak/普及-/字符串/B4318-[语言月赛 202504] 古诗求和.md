# 题目信息

# [语言月赛 202504] 古诗求和

## 题目描述

yummy 热衷于含有数字的古诗词。最近他对古诗词中出现的数之和比较感兴趣。

但是直接输入中文让大家寻找数字太困难了，于是 yummy 决定：

- 把所有**不构成数**的字改成拼音，把构成数的字直接用构成的阿拉伯数字代替（**注意不是逐字代替**），例如“四十三年”会被替换成 `43nian`（而不是 `4103nian`）。
- 如果两个位置相邻的数字不应该连在一起，那么会用下划线 `_` 隔开。例如“八九十枝花”会被替换成 `8_9_10zhihua`。
- 标点符号只保留逗号、句号、问号、叹号，均采用英文标点（半角标点）。四个标点符号对应的英文标点分别为 `,.?!`。**和传统排版格式不同，本题标点符号后面不空格。**
- 对于一首古诗词，我们认为以句号、问号、叹号为界划分出的片段为句，逗号两边是同一个句子。

经过上述处理的古诗词一定只可能出现小写英文字母、数字、`,.?!_`。

给出一段古诗词，我们只考虑整数。

请对于其中每一句古诗词，计算其中出现了几个数，以及这些数的和**的奇偶性**。

## 说明/提示

【样例 1 解释】

输入选自邵雍的《山村咏怀》：

> 一去二三里，烟村四五家。
>
> 亭台六七座，八九十枝花。

第一句诗中有 $1,2,3,4,5$ 这五个数，总和为 $15$，是奇数，因此输出 `5 Odd`。

第二句诗中有 $6,7,8,9,10$ 这五个数，总和为 $40$，是偶数，因此输出 `5 Even`。

【样例 2 解释】

输入选自李煜的《破阵子·四十年来家国》：

> 四十年来家国，三千里地山河。
>
> 凤阁龙楼连霄汉，玉树琼枝作烟萝，几曾识干戈？
>
> 一旦归为臣虏，沈腰潘鬓消磨。
>
> 最是仓皇辞庙日，教坊犹奏别离歌，垂泪对宫娥。

第 $1$ 句词出现了 $2$ 个数 $40$ 和 $3000$，和为偶数。

第 $3$ 句词出现了 $1$ 个数 $1$，和为奇数。

第 $2,4$ 句词没有出现数，数之和是偶数。

【样例 3 解释】

输入选自白居易的《暮江吟》：

> 一道残阳铺水中，半江瑟瑟半江红。
>
> 可怜九月初三夜，露似真珠月似弓。

注意两个“半”在本题中认为不构成数。

【数据范围】

输入字符串仅可能出现小写英文字母、数字、`,.?!_`，长度不超过 $500$，且均为古诗词或古文，但有可能会进行删减。**保证最后一个字符是 `.?!` 之一。**

本题共有 $10$ 个测试点，部分测试点有特殊性质，具体如下，其中 `Yes` 表示保证对应性质，`No` 不保证：

|测试点编号|只有一句话|只有一位数|
|:-:|:-:|:-:|
|$1,2$|Yes|Yes|
|$3,4,5$|No|Yes|
|$6,7$|Yes|No|
|$8,9,10$|No|No|



## 样例 #1

### 输入

```
1qu2_3li,yancun4_5jia.tingtai6_7zuo,8_9_10zhihua.```

### 输出

```
5 Odd
5 Even
```

## 样例 #2

### 输入

```
40nianlaijiaguo,3000lidishanhe.fenggelongloulianxiaohan,yushuqiongzhizuoyanluo,jicengshigange?1danguiweichenlu,shenyaopanbinxiaomo.zuishicanghuangcimiaori,jiaofangyouzoubielige,chuileiduigonge.```

### 输出

```
2 Even
0 Even
1 Odd
0 Even
```

## 样例 #3

### 输入

```
1daocanyangpushuizhong,banjiangsesebanjianghong.kelian9yuechu3ye,lusizhenzhuyuesigong.```

### 输出

```
1 Odd
2 Even
```

# AI分析结果



### 算法分类
字符串处理（模拟）

### 综合分析与结论
**核心思路**：遍历字符串，识别每个数字的结束位置（个位），统计个数及奇偶性。遇到句末标点（.?!）时输出当前句子的统计结果。  
**难点**：正确分割数字与处理句子边界。  
**解决方案**：利用数字的奇偶性仅由个位决定的特性，避免解析完整数值。下划线与标点作为分隔符处理。

**可视化设计**：
1. **高亮当前字符**：红色表示正在处理的字符。
2. **步进动画**：每处理一个字符，展示当前count与sum_parity的变化。
3. **句子分割标记**：遇到句末标点时，显示分割线并弹出结果。
4. **像素风格**：用8位字体，数字用绿色方块，标点用黄色闪烁效果。

### 题解清单（5星）
- **yummy的题解**：利用数字的个位特性简化计算，代码简洁高效。

### 核心代码实现
```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    string s;
    getline(cin, s);
    int cnt = 0, sum = 0;
    for (int i = 0; i < s.size(); ++i) {
        if (isdigit(s[i])) {
            if (i + 1 >= s.size() || !isdigit(s[i + 1])) {
                cnt++;
                sum += (s[i] - '0') % 2;
            }
        } else if (s[i] == '.' || s[i] == '?' || s[i] == '!') {
            cout << cnt << " " << (sum % 2 ? "Odd" : "Even") << endl;
            cnt = sum = 0;
        }
    }
    return 0;
}
```

### 可视化算法演示（伪代码）
```javascript
// 初始化Canvas，设置像素风格
ctx.font = "16px 'Press Start 2P'";

function drawFrame(i) {
    // 高亮当前字符
    drawChar(s[i], i, "red");
    
    if (isdigit(s[i])) {
        if (i+1 >= len(s) || !isdigit(s[i+1])) {
            // 播放收集音效
            cnt++;
            sum += s[i] % 2;
            drawCounter();
        }
    } else if (isEndPunc(s[i])) {
        // 显示爆炸动画并输出结果
        outputResult();
    }
}
```

### 同类型题目推荐
1. P1308 统计单词数（字符串处理）
2. P1598 垂直柱状图（字符统计）
3. P1055 ISBN号码（数字校验）

---
处理用时：176.09秒
# 题目信息

# yyy2015c01 的 IDE 之 Call Stack

## 题目背景

在 2020 年的某一天，我们的 yyy2015c01 同学想要开发一套 IDE。


## 题目描述

作为他开发团队中的一员，你不幸地 yyy2015c01 被选入了 Debugger 的开发组。

yyy2015c01 设想的 Debugger 由几部分组成，其中的一个小组件就是 Call Stack——中文称之为 “调用栈”。

由于 IDE 目前还是内测版，开发组需要先编一个能识别参数表的 Call Stack 来看看效果如何。这个任务交由你来完成。

开发组假想的 Call Stack 能实现识别 `int` 和 `char` 参数表，以辨别出不同的函数，规则是：

```
int fac1(int n);
```

和

```
int fac1(char n);
```

是两个不同的函数；但

```
int Fac1(int n,int m);
```

和

```
int FAC1(int x,int y);
```

被认为是相同的函数。也就是说，这个 Call Stack 认的不是参数名，而是其类型和忽略大小写的函数名。

注意：`int main()` 可能会出现，也可能不出现；无论它有没有出现，都不能将其算入函数中。

请你编写一个 Call Stack，并在所有函数调用完后输出这个程序一共有多少个不完全相同的函数（保证程序中的每个函数至少调用一次）。


## 说明/提示

每个函数的参数最多有 $10$ 个，每行的输入数据长度均不超过 $255$。

向本题主人公 yyy2015c01 同学致敬！


## 样例 #1

### 输入

```
2
FAC1 (N=233, M=65 'A', A=0)
main ()
```

### 输出

```
1
```

## 样例 #2

### 输入

```
2
fac1 (N=250)
FAC1 (a=987)
```

### 输出

```
1
```

# AI分析结果



**唯一算法分类**  
无算法分类（模拟题）

---

### **题解思路与解决难点**  
**核心思路**：将函数名（小写）与参数类型列表组合为唯一标识，利用集合去重。  
**关键步骤**：  
1. **函数名处理**：转为小写，排除`main`函数。  
2. **参数解析**：遍历参数部分，检测单引号判断类型（`char`为`0`，`int`为`1`）。  
3. **唯一标识生成**：将函数名与参数类型序列拼接，存入集合自动去重。  

**解决难点**：  
- **参数类型识别**：需处理包含空格、逗号、单引号的复杂格式。  
- **高效去重**：使用`set`或`map`避免重复遍历对比，优化时间复杂度至`O(n log n)`。  

---

### **题解评分 (≥4星)**  
1. **Alex_Wei (4星)**  
   - **亮点**：手写参数解析函数，代码可读性高。  
   - **缺点**：逐个对比已有函数，时间复杂度`O(n²)`。  

2. **OoXiao_QioO (5星)**  
   - **亮点**：字符串拼接法简洁高效，利用`map`去重。  
   - **优化**：参数解析逻辑巧妙，代码紧凑。  

3. **zimingsun23 (4星)**  
   - **亮点**：`map<pair<vector<bool>,string>,bool>`结构清晰。  
   - **缺点**：参数解析未处理所有边界情况。  

---

### **最优思路提炼**  
- **键设计**：函数名（小写） + 参数类型序列（`0/1`字符串）。  
- **参数解析技巧**：单引号标记`char`类型，逗号分割参数。  
- **高效去重**：使用`set`或`map`自动处理重复项。  

**示例代码**（OoXiao_QioO思路）：  
```cpp
map<string, int> M;
string x;
char s[256], s1[256];
int main() {
    int n; cin >> n;
    while(n--) {
        scanf("%s", s);
        if(strcmp(s, "main") == 0) continue;
        // 转小写
        for(int i=0; s[i]; i++) 
            s[i] = tolower(s[i]);
        x = s;
        getchar(); // 吞空格
        gets(s1);
        // 解析参数类型
        for(int i=0; s1[i]; i++) {
            bool f = 0;
            if(s1[i] == '=') {
                while(s1[i] != ',' && s1[i] != ')') {
                    if(s1[i] == '\'') { f = 1; break; }
                    i++;
                }
            }
            x += (f ? '0' : '1');
        }
        if(M[x]++ == 0) cnt++;
    }
    cout << cnt << endl;
}
```

---

### **类似题目推荐**  
1. **P1177 【模板】快速排序**（处理字符串解析）  
2. **P1055 ISBN号码**（格式校验与字符处理）  
3. **P1308 统计单词数**（大小写敏感与模式匹配）  

---

### **可视化算法演示**  
**动画设计**：  
1. **输入解析**：高亮函数名与参数部分，逐步转小写并标记`main`。  
2. **参数扫描**：单引号变红，对应参数块变绿（`char`），否则蓝（`int`）。  
3. **集合更新**：显示当前唯一标识生成过程，成功插入时播放“收集”音效。  

**复古风格**：  
- **像素字体**：8-bit风格显示函数名和参数序列。  
- **音效**：插入新项时播放短促“哔”声，重复项播放“错误”音效。  

**交互控制**：  
- **步进执行**：空格键逐步处理每个函数。  
- **自动播放**：Enter键启动自动演示，速度可调。  

---

**总结**：本题核心在于字符串处理与高效去重，模拟题需细致处理输入格式，利用STL容器简化逻辑。

---
处理用时：59.34秒
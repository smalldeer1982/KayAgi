# 题目信息

# [NOIP 2017 普及组] 图书管理员

## 题目背景

NOIP2017 普及组 T2

## 题目描述

图书馆中每本书都有一个图书编码，可以用于快速检索图书，这个图书编码是一个正整数。 每位借书的读者手中有一个需求码，这个需求码也是一个正整数。如果一本书的图书编码恰好以读者的需求码结尾，那么这本书就是这位读者所需要的。 小 D 刚刚当上图书馆的管理员，她知道图书馆里所有书的图书编码，她请你帮她写一个程序，对于每一位读者，求出他所需要的书中图书编码最小的那本书，如果没有他需要的书，请输出 `-1`。


## 说明/提示

**数据规模与约定**

对于 $20\%$ 的数据，$1 ≤ n ≤ 2$。

另有 $20\%$ 的数据，$q = 1$。

另有 $20\%$ 的数据，所有读者的需求码的长度均为 $1$。

另有 $20\%$ 的数据，所有的图书编码按从小到大的顺序给出。

对于 $100\%$ 的数据，$1 ≤ n ≤ 1000,1 ≤ q ≤ 1000$，所有的图书编码和需求码均不超过 $10^7$。


## 样例 #1

### 输入

```
5 5 
2123 
1123 
23 
24 
24 
2 23 
3 123 
3 124 
2 12 
2 12```

### 输出

```
23 
1123 
-1 
-1 
-1 ```

# AI分析结果



---

## **唯一算法分类**
模拟、数论（取模运算）

---

## **综合分析与结论**

### **核心算法流程**
1. **排序优化**：将图书编码升序排序，确保第一个满足条件的即为最小值。
2. **取模运算**：对每个需求码计算模数 \(10^x\)，用取模操作快速判断图书编码的后缀匹配。
3. **遍历终止**：一旦找到匹配项，立即终止循环以减少遍历次数。

### **可视化设计思路**
- **动画方案**：
  - **高亮当前操作**：在排序后的图书编码列表中，高亮正在检查的图书编码。
  - **模数计算**：动态显示 \(10^x\) 的计算过程。
  - **匹配成功**：匹配时用颜色标记该图书编码，并终止遍历。
- **复古像素风格**：
  - 用 8-bit 像素风格展示图书编码列表，匹配项以闪烁效果突出。
  - 音效设计：遍历时播放“滴”声，匹配成功时播放上扬音效，无匹配时播放低音。

---

## **题解清单 (≥4星)**

1. **The_Best_OIer（5星）**  
   - **亮点**：排序后遍历，提前终止循环，时间复杂度 \(O(n \log n + qn)\)，实际运行高效。
   - **代码简洁性**：直接使用预处理模数数组，避免浮点误差。

2. **Malkin_Moonlight（5星）**  
   - **亮点**：预计算 \(10^x\) 的模数数组，避免重复计算，提升效率。
   - **代码可读性**：逻辑清晰，注释明确。

3. **VitrelosTia（4星）**  
   - **亮点**：利用字符串预处理和哈希映射，查询时间 \(O(1)\)。
   - **创新性**：通过子串映射优化查询，适合大数据场景。

---

## **最优思路提炼**

### **关键步骤**
1. **排序预处理**：将图书编码排序，确保遍历时第一个匹配项即为最小值。
2. **模数数组**：预计算 \(10^x\) 的值，避免浮点运算误差。
3. **快速终止**：找到匹配后立即退出循环。

### **代码片段**
```cpp
#include <bits/stdc++.h>
using namespace std;
const int mod[10] = {1, 10, 100, 1000, 10000, 100000, 1000000, 10000000};
int a[1005], n, q;

int main() {
    cin >> n >> q;
    for (int i = 1; i <= n; i++) cin >> a[i];
    sort(a + 1, a + n + 1); // 升序排序
    while (q--) {
        int x, y;
        cin >> x >> y;
        bool found = false;
        for (int j = 1; j <= n; j++) {
            if (a[j] % mod[x] == y) { // 取模匹配
                cout << a[j] << endl;
                found = true;
                break; // 提前终止
            }
        }
        if (!found) cout << -1 << endl;
    }
    return 0;
}
```

---

## **同类型题与算法套路**

### **通用解法**
- **后缀匹配问题**：通过取模或字符串后缀提取快速匹配。
- **最值优化**：排序后遍历，利用有序性提前终止。

### **相似题目**
1. **P1012 拼数**（字符串拼接与排序）
2. **P1177 快速排序**（排序优化应用）
3. **P1308 统计单词数**（字符串后缀匹配）

---

## **个人心得摘录**
- **浮点陷阱**：避免使用 `pow` 函数直接计算模数，预计算整数数组更可靠。
- **排序的威力**：有序数据能大幅优化查找效率，尤其是提前终止策略。

---

## **可视化与复古游戏化设计**

### **Canvas 动画**
- **网格布局**：将图书编码按像素块排列，绿色表示已匹配，红色表示未匹配。
- **动态扫描**：从左到右扫描编码，匹配时触发闪烁。

### **音效设计**
- **遍历音效**：每检查一个编码播放短促“滴”声。
- **匹配音效**：成功时播放 8-bit 胜利音效。

### **自动演示模式**
- **AI 控制**：自动按顺序处理查询，展示算法流程。
- **速度调节**：支持 1x/2x/5x 倍速切换。

---

**答案结束**

---
处理用时：145.19秒
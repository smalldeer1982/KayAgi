# 题目信息

# [NOIP 2001 普及组] 最大公约数和最小公倍数问题

## 题目描述

输入两个正整数 $x_0, y_0$，求出满足下列条件的 $P, Q$ 的个数：

1. $P,Q$ 是正整数。

2. 要求 $P, Q$ 以 $x_0$ 为最大公约数，以 $y_0$ 为最小公倍数。

试求：满足条件的所有可能的 $P, Q$ 的个数。

## 说明/提示

$P,Q$ 有 $4$ 种：

1. $3, 60$。
2. $15, 12$。
3. $12, 15$。
4. $60, 3$。

对于 $100\%$ 的数据，$2 \le x_0, y_0 \le {10}^5$。

**【题目来源】**

NOIP 2001 普及组第二题

## 样例 #1

### 输入

```
3 60
```

### 输出

```
4
```

# AI分析结果



---

### **算法分类**  
数论（最大公约数、最小公倍数性质）

---

### **题解思路与核心难点**  
**核心逻辑**：  
1. **数学性质**：`P * Q = x0 * y0` 且 `gcd(P, Q) = x0`  
2. **枚举优化**：只需枚举到 `sqrt(x0*y0)`，每找到一对合法 `(i, n/i)`，答案加 2  
3. **质因数分解**：当 `y0 % x0 != 0` 时无解；否则将 `y0/x0` 分解质因数，结果为 `2^k`（k为不同质因子数）

**解决难点**：  
- **暴力枚举的优化**：通过数学推导将枚举范围从 `O(n)` 降至 `O(sqrt(n))`  
- **避免重复计数**：特判 `i == n/i` 的情况（即平方数）  
- **质因数分解法**：将问题转化为分解质因数后的组合问题，时间复杂度更低（`O(sqrt(y/x))`）

---

### **题解评分（≥4星）**  
1. **樱雪喵（5星）**  
   - **亮点**：代码极简，直接利用 `__gcd` 和数学性质，循环到 `sqrt(n)`  
   - **优化**：通过乘积性质和对称性减少循环次数  
   - **可读性**：代码仅 10 行，变量命名清晰  

2. **sochiji（4.5星）**  
   - **亮点**：数学推导严谨，通过质因数分解解释本质，复杂度更低  
   - **代码实现**：分解质因数的循环实现简洁  
   - **扩展性**：可推广到更高维度的数论问题  

3. **zhangboju（4星）**  
   - **亮点**：手写 `gcd` 函数，兼容性更好  
   - **数学证明**：详细推导 `gcd` 和 `lcm` 的乘积性质  
   - **特判处理**：显式处理 `x == y` 的边界情况  

---

### **最优思路与技巧提炼**  
1. **对称性优化**  
   - 枚举 `i` 到 `sqrt(x*y)`，每发现一对 `(i, x*y/i)` 就累加 2 次答案  
   - **关键代码**：  
     ```cpp
     for (long long i=1; i<=sqrt(n); i++) {
         if (n%i == 0 && __gcd(i, n/i) == x) ans += 2;
     }
     ```

2. **质因数分解法**  
   - **数学本质**：若 `y/x` 有 `k` 个不同质因子，则解为 `2^k`  
   - **关键代码**：  
     ```cpp
     int quotient = y / x;
     while (quotient > 1) {
         if (quotient % currentFactor == 0) {
             count++;
             while (quotient % currentFactor == 0) quotient /= currentFactor;
         }
         currentFactor++;
     }
     cout << (1 << count);
     ```

---

### **同类型题与算法套路**  
1. **通用套路**  
   - **数论性质**：`gcd(a,b)*lcm(a,b) = a*b`  
   - **质因数分解**：通过分解后的指数范围推导解的数量  

2. **相似题目**  
   - **P1072** [Hankson的趣味题](https://www.luogu.com.cn/problem/P1072)  
   - **P1414** [又是毕业季II](https://www.luogu.com.cn/problem/P1414)  
   - **P1572** [最大公约数和最小公倍数问题](https://www.luogu.com.cn/problem/P1572)（同类题变式）

---

### **可视化与算法演示**  
**动画设计（像素风格）**:  
1. **枚举过程可视化**  
   - **像素网格**：显示 `1` 到 `sqrt(x*y)` 的数值，高亮当前枚举的 `i`  
   - **状态标记**：  
     - 绿色：`i` 合法（`n%i == 0` 且 `gcd` 符合条件）  
     - 红色：`i` 不合法  
   - **音效**：合法时播放 8-bit 上升音效，非法时播放下降音效  

2. **质因数分解动画**  
   - **分解过程**：显示 `y/x` 被逐步分解为质因数的过程  
   - **动态计数**：每发现一个新质因子，右侧计数器 `+1`  
   - **最终结果**：显示 `2^k` 的二进制位展开（如 `k=3` 时显示 `111`）  

**交互控制面板**：  
- **速度调节**：滑动条控制枚举/分解速度  
- **单步执行**：按空格键逐帧推进  
- **自动模式**：AI 自动完成全过程，类似贪吃蛇自动寻路  

---

### **代码实现（樱雪喵题解）**  
```cpp
#include<bits/stdc++.h>
using namespace std;
long long m,n,ans;
int main(){
    cin>>m>>n;
    if(m==n) ans--;
    n*=m; 
    for(long long i=1;i<=sqrt(n);i++){
        if(n%i==0&&__gcd(i,n/i)==m) ans+=2;
    }
    cout<<ans;
    return 0;
}
```

---

### **个人心得摘录**  
- **调试教训**：  
  > "当 `x*y` 溢出时会导致错误，必须用 `long long`。初始代码用 `int` 在测试点 4 爆了，改后 AC。" —— zjinyi  

- **数学顿悟**：  
  > "突然意识到 `y/x` 的质因子数直接决定答案，原来数论题可以转化为组合问题！" —— sochiji  

---

### **扩展思考**  
若题目改为求有序对 `(P, Q)` 的数量（即 `(3,60)` 和 `(60,3)` 算不同解），上述算法无需修改，因为对称枚举已隐含有序性。若改为求无序对，则最终答案需除以 2（需额外特判平方情况）。

---
处理用时：73.76秒
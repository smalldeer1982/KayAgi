# 题目信息

# [蓝桥杯 2018 省 AB] 全球变暖

## 题目描述

你有一张某海域 $N \times N$ 像素的照片，`.` 表示海洋、 `#` 表示陆地，如下所示：

```
.......
.##....
.##....
....##.
..####.
...###.
.......
```

其中 "上下左右" 四个方向上连在一起的一片陆地组成一座岛屿。例如上图就有 $2$ 座岛屿。

由于全球变暖导致了海面上升，科学家预测未来几十年，岛屿边缘一个像素的范围会被海水淹没。具体来说如果一块陆地像素与海洋相邻（上下左右四个相邻像素中有海洋），它就会被淹没。

例如上图中的海域未来会变成如下样子：

```
.......
.......
.......
.......
....#..
.......
.......
```

请你计算：依照科学家的预测，照片中有多少岛屿会被完全淹没。 


## 说明/提示

时限 1 秒, 256M。蓝桥杯 2018 年第九届省赛

## 样例 #1

### 输入

```
7 
.......
.##....
.##....
....##.
..####.
...###.
.......  ```

### 输出

```
1```

# AI分析结果



## 唯一算法分类  
广度优先搜索/深度优先搜索（BFS/DFS）

---

## 综合分析与结论  
### 核心算法流程  
题目要求统计完全被淹没的岛屿数量。核心思路为：**判断每个原始岛屿是否存在至少一个陆地像素在淹没后仍然存在**。两种主流解法：  
1. **单次遍历判断法**：在遍历原始岛屿时，检查是否存在某个陆地像素的四周均为陆地（不会被淹没）。若存在，则该岛屿未被完全淹没。  
2. **编号标记法**：为每个原始岛屿分配唯一编号，计算淹没后的地图，统计哪些编号的岛屿仍有残留。

### 关键难点与解决方案  
- **难点**：淹没后岛屿可能分裂，但题目要求统计原始岛屿是否完全消失。  
- **解决方案**：避免直接计算淹没后的岛屿数目，转而通过检查原始岛屿是否有残留（方法1）或追踪原始编号残留（方法2）。

### 可视化设计思路  
1. **动画方案**：  
   - 初始地图以像素网格展示，海洋（蓝色）、陆地（绿色）。  
   - DFS/BFS遍历时，当前检查的陆地像素高亮为黄色。  
   - 发现未被淹没的陆地（四周全为陆地）时，该像素变为红色，整个岛屿标记为“幸存”。  
2. **复古游戏化效果**：  
   - 使用8-bit像素风格，网格大小为16x16像素。  
   - 音效：发现未被淹没点时播放上扬音效，岛屿标记时播放短促确认音。  
   - Canvas自动演示模式，展示DFS遍历与检查过程。

---

## 题解清单（评分≥4星）  
1. **Tolerate（5星）**  
   - **亮点**：DFS遍历时动态检查四周是否全为陆地，逻辑简洁高效。  
   - **代码**：通过 `t` 变量标记当前岛屿是否幸存，直接统计结果。  

2. **small_john（5星）**  
   - **亮点**：在DFS过程中通过 `v` 变量实时判断岛屿是否完全淹没，代码高度凝练。  
   - **心得**：函数 `ok()` 封装陆地判断，提升可读性。

3. **wuhan1234（4星）**  
   - **亮点**：BFS遍历统计连通块残留，逻辑清晰。  
   - **关键变量**：`left` 统计未被淹没的陆地数量，直接决定岛屿是否幸存。

---

## 最优思路与代码片段  
### 最优思路  
**单次遍历判断法**：在DFS/BFS遍历原始岛屿时，检查是否存在未被淹没的陆地（四周全为陆地）。若存在，则该岛屿未被完全淹没。

### 核心代码（Tolerate题解）  
```cpp
void dfs(int x,int y) {
    if(!t) { // 若当前岛屿未确认幸存
        int cnt = 0;
        for(int i=0; i<4; i++)
            if(mp[x+dx[i]][y+dy[i]]!='.') cnt++;
        if(cnt == 4) ans++, t=1; // 发现未被淹没的点
    }
    mp[x][y]='*'; // 标记已访问
    for(int i=0; i<4; i++) {
        int xx=x+dx[i], yy=y+dy[i];
        if(xx>=0 && xx<n && yy>=0 && yy<n && mp[xx][yy]=='#')
            dfs(xx,yy);
    }
}
```

---

## 相似题目推荐  
1. **P1141 01迷宫**（连通块统计）  
2. **P1162 填涂颜色**（BFS边界处理）  
3. **P2895 Meteor Shower**（动态地图BFS）

---

## 个人心得摘录  
- **Tolerate**：需注意淹没后的陆地不能直接标记为海洋，否则会导致连通块分裂误判。  
- **hycqwq**：STL的 `map` 用于统计残留编号，简化逻辑但增加空间复杂度。

---

## 可视化实现要点  
### 复古像素风格设计  
- **调色板**：海洋（#0000FF）、陆地（#00FF00）、当前检查点（#FFFF00）、幸存点（#FF0000）。  
- **Canvas动画**：  
  ```javascript
  function drawGrid() {
      for(let i=0; i<n; i++) {
          for(let j=0; j<n; j++) {
              ctx.fillStyle = colorMap[grid[i][j]];
              ctx.fillRect(j*16, i*16, 16, 16);
          }
      }
  }
  ```
- **音效触发**：发现未被淹没点时播放 `success.wav`（8-bit风格音效）。

### 自动演示模式  
```javascript
function autoRun() {
    let cell = getNextCell(); // 获取下一个待处理像素
    if(cell) {
        checkSurvivor(cell.x, cell.y);
        requestAnimationFrame(autoRun);
    }
}
```

---
处理用时：190.30秒
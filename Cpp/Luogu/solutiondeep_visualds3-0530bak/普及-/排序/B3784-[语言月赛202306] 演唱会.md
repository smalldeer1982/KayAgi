# 题目信息

# [语言月赛202306] 演唱会

## 题目描述

一个特殊的节日，zyl 举办了一场演唱会，他想要规划一下演唱会的曲目。

根据同学的要求，他要从 $n$ 首歌（编号 $1\sim n$）中选出 $m$ 首加入演唱会歌单。

选择的规则很简单，班上有 $a$ 名学生（不包括 zyl），学号为 $1\sim a$。zyl 会按照学号统计每位同学从每首歌中得到的快乐值，记为 $h_{i,j}$。一首歌的「欢乐度」是它所给予其他所有同学的「快乐值」总和。

巧妙的是，由于歌曲风格迥异，**同一个学生一定会从不同的歌中会收获不同的快乐值，且不会有任何两首歌的欢乐度相同**。

zyl 选出欢乐度最高的 $m$ 首歌，并将它们按欢乐度**从大到小**排好序。

但 zyl 注意到了她的快乐值...

无论如何，zyl 一定会把她最喜欢的歌放进歌单（她获得快乐值最高的歌即为她最喜欢的歌）！
如果她最喜欢的歌之前已经在歌单中，那么 zyl 会把这首歌提到歌单的第一个位置（即，仅将该歌曲的位置变为第一位，其余歌曲的相对位置不变）；但如果不在，zyl 则会把已经选择好的歌单里的最后一首歌给删掉。然后把她最喜欢的曲目放在歌单的最后。

现在 zyl 将统计的快乐值数据和她的学号交给你，请你帮他列出演唱会的歌单。

## 说明/提示

### 样例 1 解释
按照欢乐度排序后靠前的两道是 $3, 2$，但由于她最喜欢的歌是 $4$，不在歌单里，于是将 $2$ 从歌单里删除，之后将 $4$ 放在最后。最后的歌单为 $3, 4$。
### 数据规模与约定
对于 $100\%$ 的数据，$1\leq m \leq n \leq 10^5$，$1\leq b \leq a\leq 100$。$0\leq h_{i,j}\leq 10^6$。

| 测试点编号 | $n$ | $m$ | $a$ | $h_{i,j}$ |
| :----------: | :----------: | :----------: | :----------: |:----------:|
| $1 \sim 2$ | $\leq5$ | $=1$ | $\leq5$ |$\leq 10000$|
| $3 \sim 4$ | $\leq1000$ | $=n$ | $\leq100$ |$\leq 10000$|
| $5 \sim 6$ | $\leq 1000$ | $\leq 1000$ | $=1$ |$\leq 10000$|
| $7 \sim 9$ | $\leq1000$ | $\leq1000$ | $\leq100$ |$\leq 10000$|
| $10$ |$\leq 10^5$|$\leq 10^5$|$\leq 100$|$\leq 10^6$|

## 样例 #1

### 输入

```
4 2 3 2
2 4 3 1
1 2 3 4
2 3 4 1```

### 输出

```
3 4```

# AI分析结果



---

**算法分类**  
排序、模拟

---

**综合分析与结论**  

本题核心在于计算歌曲欢乐度后排序，并根据特殊规则调整最终歌单。关键在于：  
1. **欢乐度计算**：遍历所有学生的快乐值累加，时间复杂度 O(a*n)，需处理大规模输入。  
2. **确定最喜爱歌曲**：在学号为 b 的学生数据中，记录快乐值最大的歌曲。  
3. **排序与调整**：按欢乐度降序排序后，检查前 m 首是否包含最喜爱歌曲，分情况调整顺序。  

**难点对比**：  
- 输入规模可能导致超时，需高效处理（如使用 `scanf` 而非 `cin`）。  
- 调整顺序的逻辑易错：需正确处理“存在时提前”与“不存在时替换末尾”的两种场景。  

**可视化设计**：  
- **像素风格排序动画**：展示歌曲按欢乐度降序排列的过程，前 m 首以高亮色块表示。  
- **EX 标记与调整**：若最喜爱歌曲存在，用闪烁效果将其移动到首位；否则，末尾元素爆炸消失，EX 出现在最后。  
- **音效触发**：计算完成时播放“滴”声，排序完成时播放上升音调，调整时播放“咔嚓”声。  

---

**题解评分**  
1. **未来姚班zyl（★★★★★）**  
   - **亮点**：结构体排序逻辑清晰，正确处理输入与边界条件，代码简洁高效。  
   - **心得**：强调格式化输入避免超时，利用题目条件简化初始化。  

---

**最优思路与技巧**  
1. **结构体排序**：存储歌曲编号与欢乐度，直接调用 `sort` 降序排列。  
2. **双阶段处理**：先按常规规则排序，再根据特殊条件调整结果。  
3. **高效输入**：使用 `scanf` 处理大规模数据，避免输入瓶颈。  

---

**相似题目推荐**  
1. [P1068 分数线划定](https://www.luogu.com.cn/problem/P1068)（排序+边界处理）  
2. [P1781 宇宙总统](https://www.luogu.com.cn/problem/P1781)（大数排序+字符串处理）  
3. [P1093 奖学金](https://www.luogu.com.cn/problem/P1093)（多条件排序+结构体）  

---

**核心代码实现**  
```cpp
#include <cstdio>
#include <algorithm>
using namespace std;

struct Song {
    int id, k; // id: 歌曲编号, k: 欢乐度
} h[100005];

bool cmp(Song a, Song b) { return a.k > b.k; }

int main() {
    int n, m, a, b;
    scanf("%d %d %d %d", &n, &m, &a, &b);
    int ex = -1, max_h = -1;

    for (int i = 1; i <= a; i++) {
        for (int j = 1; j <= n; j++) {
            int x;
            scanf("%d", &x);
            h[j].k += x;
            h[j].id = j; // 初始化 id，多次赋值不影响正确性
            if (i == b && x > max_h) {
                max_h = x;
                ex = j;
            }
        }
    }

    sort(h + 1, h + n + 1, cmp);

    bool found = false;
    for (int i = 1; i <= m; i++) {
        if (h[i].id == ex) {
            found = true;
            break;
        }
    }

    if (found) {
        printf("%d ", ex);
        int cnt = 0;
        for (int i = 1; i <= m && cnt < m - 1; i++) {
            if (h[i].id != ex) {
                printf("%d ", h[i].id);
                cnt++;
            }
        }
    } else {
        for (int i = 1; i < m; i++) {
            printf("%d ", h[i].id);
        }
        printf("%d", ex);
    }
    return 0;
}
```

---

**可视化算法演示**  
1. **输入阶段**：像素网格展示每个学生的快乐值累加至对应歌曲，学号 b 的行高亮显示。  
2. **排序动画**：歌曲欢乐度以柱状图展示，柱高逐渐调整至降序排列，前 m 首标记为金色。  
3. **EX 处理**：若 EX 在歌单中，其柱状图飞至首位；否则，末位柱子碎裂，EX 柱从底部升起。  
4. **交互控制**：支持暂停观察当前排序状态，速度调节滑块控制动画快慢。  

**复古效果设计**：  
- **8 位音效**：计算时“哔”声，排序时“嘟”声循环，调整时播放经典 FC 音效。  
- **像素艺术**：歌曲用 16x16 像素块表示，欢乐度数值以 8 位字体显示。

---
处理用时：204.00秒
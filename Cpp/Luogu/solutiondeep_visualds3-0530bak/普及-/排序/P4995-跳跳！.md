# 题目信息

# 跳跳！

## 题目描述

你是一只小跳蛙，你特别擅长在各种地方跳来跳去。

这一天，你和朋友小 F 一起出去玩耍的时候，遇到了一堆高矮不同的石头，其中第 $i$ 块的石头高度为 $h_i$，地面的高度是 $h_0 = 0$。你估计着，从第 $i$ 块石头跳到第 $j$ 块石头上耗费的体力值为 $(h_i - h_j) ^ 2$，从地面跳到第 $i$ 块石头耗费的体力值是 $(h_i) ^ 2$。

为了给小 F 展现你超级跳的本领，你决定跳到每个石头上各一次，并最终停在任意一块石头上，并且小跳蛙想耗费**尽可能多**的体力值。

当然，你只是一只小跳蛙，你只会跳，不知道怎么跳才能让本领更充分地展现。

不过你有救啦！小 F 给你递来了一个写着 AK 的电脑，你可以使用计算机程序帮你解决这个问题，万能的计算机会告诉你怎么跳。

那就请你——会写代码的小跳蛙——写下这个程序，为你 NOIp AK 踏出坚实的一步吧！

## 说明/提示

#### 样例解释

两个样例按照输入给定的顺序依次跳上去就可以得到最优方案之一。

#### 数据范围
对于 $1 \leq i \leq n$，有 $0 < h_i \leq 10 ^ 4$，且保证 $h_i$ 互不相同。

对于 $10\%$ 的数据，$n \leq 3$；

对于 $20\%$ 的数据，$n \leq 10$；

对于 $50\%$ 的数据，$n \leq 20$；

对于 $80\%$ 的数据，$n \leq 50$；

对于 $100\%$ 的数据，$n \leq 300$。

## 样例 #1

### 输入

```
2
2 1```

### 输出

```
5```

## 样例 #2

### 输入

```
3
6 3 5
```

### 输出

```
49```

# AI分析结果



## 算法分类
**贪心算法**

---

## 题解思路与难点分析

### 核心思路
所有题解均采用**排序+双指针交替跳跃**策略：
1. 将石头升序排序，地面视为高度0
2. 从地面跳至最高石，再跳至最低石，交替直至覆盖所有石头
3. 每次跳跃选择当前剩余石头中的极值（最大或最小），使单次体力差平方最大化

### 解决难点
1. **贪心正确性证明**：通过反证法证明第一步必须跳最大石头（否则可构造更优解）
2. **数学推导**：对比不同跳跃顺序的体力总和（如 `(h_max - h_min)^2 > (h_i - h_j)^2`）
3. **奇偶处理**：双指针交替时需处理奇数个石头的中间元素

---

## 4星以上题解推荐

1. **UnyieldingTrilobite（5星）**
   - **亮点**：严谨的数学证明，完整逻辑链推导
   - **代码**：未提供完整代码，但思路清晰

2. **JASON杨（4星）**
   - **亮点**：详细的分组证明，附可读性强的双指针实现
   - **代码**：通过`sum`变量控制跳跃方向，处理奇偶

3. **hamster000（4星）**
   - **亮点**：简洁的双指针循环，完整处理地面逻辑
   - **代码**：直接排序含地面的数组，直观易懂

---

## 最优技巧提炼

1. **极值跳跃策略**：排序后左右交替取极值，确保每一步差最大
2. **双指针控制**：`l`从0（地面）开始，`r`从n开始，交替向中间移动
3. **数学优化**：平方差计算无需开方，直接比较未平方的差值即可

---

## 类似题目推荐

1. **P1094 纪念品分组**（贪心+双指针）
2. **P1223 排队接水**（贪心排序）
3. **P1012 拼数**（贪心字符串拼接）

---

## 核心代码实现

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int n; 
    long long ans = 0;
    cin >> n;
    vector<int> h(n+1);
    h[0] = 0; // 地面
    for (int i=1; i<=n; ++i) cin >> h[i];
    sort(h.begin(), h.end());
    
    int l = 0, r = n; // 双指针
    while (l < r) {
        ans += pow(h[r] - h[l], 2); // 跳右极值
        l++;
        ans += pow(h[r] - h[l], 2); // 跳左极值
        r--;
    }
    cout << ans;
    return 0;
}
```

---

## 可视化设计

### 动画方案
1. **像素风格界面**：8-bit石头排列，青蛙跳跃时播放复古音效
2. **关键元素高亮**：
   - **当前石头**：红色边框
   - **已跳路径**：绿色连线
3. **控制面板**：暂停/继续/步进，速度调节（1x-5x）
4. **体力累加显示**：顶部实时更新体力总值

### 复古交互
- **音效**：跳跃时触发“跳跃”音效，完成时播放胜利音乐
- **自动演示**：AI自动运行双指针跳跃流程
- **网格绘制**：Canvas绘制石头高度差，动态更新指针位置

---

**示例动画帧**：
```
[地面] --(跳至6)--> [6]
[6] --(跳至3)--> [3]
[3] --(跳至5)--> [5]
体力值：36 + 9 + 4 = 49
```

---
处理用时：112.97秒
# 题目信息

# [NOIP 2001 普及组] 最大公约数和最小公倍数问题

## 题目描述

输入两个正整数 $x_0, y_0$，求出满足下列条件的 $P, Q$ 的个数：

1. $P,Q$ 是正整数。

2. 要求 $P, Q$ 以 $x_0$ 为最大公约数，以 $y_0$ 为最小公倍数。

试求：满足条件的所有可能的 $P, Q$ 的个数。

## 说明/提示

$P,Q$ 有 $4$ 种：

1. $3, 60$。
2. $15, 12$。
3. $12, 15$。
4. $60, 3$。

对于 $100\%$ 的数据，$2 \le x_0, y_0 \le {10}^5$。

**【题目来源】**

NOIP 2001 普及组第二题

## 样例 #1

### 输入

```
3 60
```

### 输出

```
4
```

# AI分析结果



## 算法分类
**其他搜索**

---

## 题解思路与算法要点

### 核心思路
题目要求找到满足 $\gcd(P,Q)=x_0$ 且 $\operatorname{lcm}(P,Q)=y_0$ 的正整数对 $(P,Q)$ 的个数。关键点在于利用数学性质：
$$ P \times Q = x_0 \times y_0 $$
并将问题转化为对 $x_0 \times y_0$ 的因数搜索。

### 算法要点
1. **因数枚举法**：  
   枚举 $x_0 \times y_0$ 的因数对 $(i, \frac{x_0 \times y_0}{i})$，判断是否满足 $\gcd(i, \frac{x_0 \times y_0}{i}) = x_0$。  
   - **时间复杂度**：$O(\sqrt{x_0 \times y_0})$  
   - **优化点**：仅枚举到 $\sqrt{x_0 \times y_0}$，每找到一对合法因数对答案贡献 $2$，特判平方数情况。

2. **质因数分解法**：  
   若 $y_0 \bmod x_0 \neq 0$，直接返回 $0$。否则计算 $\frac{y_0}{x_0}$ 的标准分解式，统计不同质因数的数量 $k$，答案为 $2^k$。  
   - **时间复杂度**：$O(\sqrt{\frac{y_0}{x_0}})$  
   - **优势**：避免大数分解，效率更高。

### 解决难点
- **数学推导**：需理解 $\gcd$ 与 $\operatorname{lcm}$ 的关系，将问题转化为因数搜索或质因数分解问题。
- **边界处理**：特判 $x_0 = y_0$ 和 $x_0 \nmid y_0$ 的情况。
- **重复计数**：枚举时需避免重复计数（如平方数特判）。

---

## 题解评分（≥4星）

### 樱雪喵（⭐⭐⭐⭐⭐）
- **亮点**：代码简洁高效，利用数学性质直接枚举因数，通过 `__gcd` 函数优化计算。
- **优化点**：特判平方数情况，逻辑清晰。

### sochiji（⭐⭐⭐⭐⭐）
- **亮点**：数学推导严谨，通过质因数分解直接计算答案，时间复杂度最优。
- **不足**：代码实现稍复杂，需手动分解质因数。

### zhangboju（⭐⭐⭐⭐）
- **亮点**：详细证明 $\gcd$ 和 $\operatorname{lcm}$ 的关系，提供递归实现。
- **不足**：未处理大数溢出问题（需用 `long long`）。

---

## 最优思路与技巧
1. **质因数分解法**（sochiji）：  
   - **核心思想**：$P = x_0 \times a$，$Q = x_0 \times b$，其中 $\gcd(a,b) = 1$，$\operatorname{lcm}(a,b) = \frac{y_0}{x_0}$。  
   - **技巧**：分解 $\frac{y_0}{x_0}$ 的质因数，每个不同质因数有 $2$ 种分配方式（分配给 $a$ 或 $b$），总答案为 $2^k$（$k$ 为不同质因数数量）。

2. **因数枚举优化**（樱雪喵）：  
   - **实现技巧**：枚举到 $\sqrt{n}$，减少重复计算，利用 `ans += 2` 和平方数特判简化代码。

---

## 同类型题与算法套路
- **质因数分解**：如 [CF 615D](https://codeforces.com/problemset/problem/615/D)（求因数积的幂）。
- **因数对枚举**：如 [LeetCode 1492](https://leetcode.com/problems/the-kth-factor-of-n/)（枚举因数对）。
- **GCD/LCM 性质**：如 [洛谷 P1072](https://www.luogu.com.cn/problem/P1072)（Hankson 的趣味题）。

---

## 推荐题目
1. [P1072 Hankson 的趣味题](https://www.luogu.com.cn/problem/P1072)  
2. [P1414 又是毕业季II](https://www.luogu.com.cn/problem/P1414)  
3. [P2651 添加括号III](https://www.luogu.com.cn/problem/P2651)  

---

## 个人心得摘录
- **樱雪喵**：强调数学性质的重要性，避免暴力枚举。  
  > “枚举到 $\sqrt{n}$ 避免重复，特判平方数情况是关键。”  
- **sochiji**：通过分解质因数将问题转化为组合数学问题。  
  > “每个质因数的选择独立，总方案数是 $2$ 的幂次。”  

---

## 可视化与算法演示

### 复古像素化搜索动画设计
1. **像素风格**：  
   - 使用 8-bit 像素画风，将 $x_0 \times y_0$ 的因数对 $(i, j)$ 显示为网格中的方块。  
   - 已访问的因数对标记为绿色，合法对闪烁高亮。

2. **搜索过程**：  
   - **BGM**：循环播放 8-bit 风格背景音乐。  
   - **音效**：合法对播放“金币音效”，非法对播放“错误音效”。  

3. **交互设计**：  
   - **步进控制**：按空格键单步执行枚举，显示当前检查的因数 $i$ 和计算结果。  
   - **自动模式**：AI 自动枚举因数，速度可调节（快/中/慢）。  

### 核心代码片段（因数枚举法）
```cpp
#include <bits/stdc++.h>
using namespace std;
int main() {
    long long x, y, ans = 0;
    cin >> x >> y;
    if (y % x != 0) { cout << 0; return 0; } // 特判无解
    long long n = x * y;
    for (long long i = 1; i * i <= n; i++) {
        if (n % i == 0 && __gcd(i, n / i) == x) {
            ans += (i * i == n) ? 1 : 2; // 平方数特判
        }
    }
    cout << ans;
    return 0;
}
```

---

## 结论
**质因数分解法**在理论上最优，适合大数据范围；**因数枚举法**代码更简洁，适合竞赛快速实现。两种方法均围绕 $\gcd$ 与 $\operatorname{lcm}$ 的数学性质展开，体现了数学推导在算法优化中的核心作用。

---
处理用时：73.10秒
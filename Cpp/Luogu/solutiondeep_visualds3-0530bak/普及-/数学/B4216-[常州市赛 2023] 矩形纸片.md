# 题目信息

# [常州市赛 2023] 矩形纸片

## 题目背景

搬运自 <http://czoj.com.cn/p/673>。数据为民间数据。

## 题目描述

小 X 有一个 $10^9$ 行 $10^9$ 列的网格纸，每个格子都是一个单位长度的正方形。

现在小 X 还有两个矩形纸片，矩形的边长都是单位长度的整数倍。第一个矩形纸片的长为 $a$，宽为 $b$，第二个矩形纸片的长为 $c$，宽为 $d$。

小 X 把第一个纸片放在了整张网格纸的左上角，再把第二个纸片的左上角放在第 $x$ 行第 $y$ 列的格子的左上角上，并且不旋转或者翻转纸片。

小 X 想知道两张纸片覆盖网格纸的总面积。

例如，当 $a=2,b=4,c=5,d=3,x=2,y=3$ 时，覆盖情况如下图所示，覆盖的总面积为 $21$ 单位面积。

![](https://cdn.luogu.com.cn/upload/image_hosting/fpe6bz37.png)

![](https://cdn.luogu.com.cn/upload/image_hosting/w25inzei.png)

## 说明/提示

对于所有测试点： $1\leq a,b,c,d,x,y\leq 1000$。

对于测试点 $1\sim 2$：保证 $a=b=c=d$。

对于测试点 $3\sim 4$：保证 $x=y=1$。

## 样例 #1

### 输入

```
2 4 5 3 2 3```

### 输出

```
21```

## 样例 #2

### 输入

```
4 5 2 8 1 1```

### 输出

```
26```

## 样例 #3

### 输入

```
5 5 5 5 2 3```

### 输出

```
38```

# AI分析结果



## 算法分类
计算几何（矩形相交判断）

---

## 综合分析与结论

### 核心思路
1. **总覆盖面积 = 两矩形面积之和 - 重叠面积**
2. 通过投影行、列轴计算交叠区间：
   - 行交叠长度 = max(0, 行区间右端 - 行区间左端 +1)
   - 列交叠长度 = max(0, 列区间右端 - 列区间左端 +1)
3. 重叠面积 = 行交叠长度 × 列交叠长度

### 难点与解决
- **行/列方向投影**：将三维问题分解为两个一维区间交叠问题
- **端点处理**：使用 max/min 确保区间端点正确排序
- **零交叠判断**：当任一轴交叠长度为 0 时，总重叠面积为 0

### 可视化设计
1. **网格绘制**：用 Canvas 绘制 10x10 的网格，行用红蓝渐变，列用黄绿渐变
2. **矩形动画**：
   - 第一矩形从左上角展开，用浅蓝色填充
   - 第二矩形从 (x,y) 展开，用浅红色填充
   - 交叠区域用紫色闪烁提示
3. **交叠计算动画**：
   - 行交叠区间用红色高亮边框，标注长度值
   - 列交叠区间用蓝色高亮边框，标注长度值
4. **像素音效**：
   - 放置矩形时播放 "滴" 声
   - 计算交叠时播放 "嘟-嘟" 提示音
   - 结果显示时播放 8-bit 胜利音效

---

## 题解清单 (5星)

### 题解
**关键亮点**  
- 严格数学推导，代码无冗余操作  
- 使用 max/min 简化区间判断  
- 时间复杂度 O(1)，空间复杂度 O(1)

**代码片段**
```cpp
int h_start = max(1, x);
int h_end = min(a, x + c - 1);
int h_overlap = max(0, h_end - h_start + 1);

int w_start = max(1, y);
int w_end = min(b, y + d - 1);
int w_overlap = max(0, w_end - w_start + 1);

int overlap = h_overlap * w_overlap;
```

---

## 最优思路提炼

### 核心技巧
**轴投影法**：将矩形投影到 X/Y 轴，将二维问题分解为两个一维区间交叠问题。该方法可推广到立方体交叠、多矩形覆盖等问题。

### 思维模型
```
        行区间交叠
        ↗     ↖
面积计算 → 乘 → 结果
        ↖     ↗
        列区间交叠
```

---

## 相似题目推荐
1. [P1884 COCI2011-2012#3] MAJSTOR - 多矩形覆盖面积
2. [P2742 USACO5.1] 圈奶牛 - 几何基础
3. [P1502 窗口的星星] - 扫描线算法

---

## 完整代码

```cpp
#include <iostream>
using namespace std;

int main() {
    int a, b, c, d, x, y;
    cin >> a >> b >> c >> d >> x >> y;
    
    int h_start = max(1, x);
    int h_end = min(a, x + c - 1);
    int h_overlap = max(0, h_end - h_start + 1);
    
    int w_start = max(1, y);
    int w_end = min(b, y + d - 1);
    int w_overlap = max(0, w_end - w_start + 1);
    
    int total = a*b + c*d - h_overlap * w_overlap;
    cout << total;
    return 0;
}
```

---
处理用时：269.57秒
# 题目信息

# [NOIP 2014 普及组] 比例简化

## 题目背景

NOIP2014 普及组 T2

## 题目描述

在社交媒体上，经常会看到针对某一个观点同意与否的民意调查以及结果。例如，对某一观点表示支持的有 $1498$ 人，反对的有 $902$ 人，那么赞同与反对的比例可以简单的记为 $1498:902$。

不过，如果把调查结果就以这种方式呈现出来，大多数人肯定不会满意。因为这个比例的数值太大，难以一眼看出它们的关系。对于上面这个例子，如果把比例记为 $5:3$，虽然与真实结果有一定的误差，但依然能够较为准确地反映调查结果，同时也显得比较直观。

现给出支持人数 $A$，反对人数 $B$，以及一个上限 $L$，请你将 $A$ 比 $B$ 化简为 $A'$ 比 $B'$，要求在 $A'$ 和 $B'$ 均不大于 $L$ 且 $A'$ 和 $B'$ 互质（两个整数的最大公约数是 $1$）的前提下，$\dfrac{A'}{B'} \ge  \dfrac{A}{B}$ 且 $\dfrac{A'}{B'} - \dfrac{A}{B}$ 的值尽可能小。

## 说明/提示

对于 $100\%$ 的数据，$1 \le A \le 10^6,1 \le B \le 10^6,1 \le L \le 100,\dfrac{A}{B} \le L$。


## 样例 #1

### 输入

```
1498 902 10```

### 输出

```
5 3```

# AI分析结果



**唯一算法分类**  
数论  

---

**题解思路、算法要点与解决难点**  
- **核心思路**：枚举所有可能的A'和B'，满足互质且A'/B' ≥ A/B，并选择差值最小的解。  
- **关键数学方法**：  
  1. **交叉相乘**：比较A'B ≥ AB' 代替浮点运算，避免精度问题。  
  2. **最大公约数（GCD）**：确保A'和B'互质。  
  3. **双指针优化**：moongazer的题解通过调整i和j的步进方向，将时间复杂度降至O(L)。  
- **解决难点**：正确处理非互质解的影响，确保最终解的最优性。通过严格的条件判断（如差值严格更小或分子分母更小）避免错误。  

---

**题解评分 (≥4星)**  
1. **以墨（5星）**  
   - 思路清晰，双重循环枚举所有可能的解，明确处理互质条件和差值比较。  
   - 代码简洁，使用GCD和交叉相乘优化。  

2. **moongazer（4.5星）**  
   - 双指针法高效，时间复杂度O(L)。  
   - 通过整数运算避免浮点误差，逻辑严谨。  

3. **Actinoi（4星）**  
   - 详细推导数学条件，代码清晰。  
   - 利用交叉相乘优化条件判断，突出数论核心。  

---

**最优思路或技巧提炼**  
1. **避免浮点运算**：使用交叉相乘（A'B ≥ AB'）代替除法比较。  
2. **双指针优化**：按比值大小动态调整i和j的步进，减少枚举次数。  
3. **互质条件的隐式处理**：通过从小到大枚举，优先记录更小的分子分母，避免显式检查GCD（但需验证正确性）。  

---

**同类型题或类似算法套路**  
- **分数化简**：涉及GCD和枚举，如[CF632D]的质因数分解优化。  
- **双指针法**：用于有序数据的高效遍历，如两数之和问题。  
- **最优解筛选**：通过差值比较和条件约束，常见于近似值问题（如最接近的三数之和）。  

---

**推荐题目**  
1. [P2651] 添加括号（数论+表达式化简）  
2. [P1072] Hankson的趣味题（GCD与LCM的综合应用）  
3. [P1062] 数列（进制转换与数论结合）  

---

**个人心得摘录**  
- **以墨**：注意交叉相乘的数学推导，避免浮点误差。  
- **moongazer**：双指针法的关键在于动态调整步进方向，类似滑动窗口。  
- **Actinoi**：调试中发现必须严格处理互质条件，否则会得到错误解。  

---

**可视化与算法演示**  
1. **动画设计**：  
   - **网格遍历**：在Canvas中以网格展示i和j的枚举过程，高亮当前检查的(i,j)。  
   - **条件判断**：用颜色区分满足条件的单元格（绿色为有效解，红色为不满足）。  
   - **双指针轨迹**：动态显示i和j的移动路径，对比传统枚举与双指针的效率差异。  

2. **复古像素风格**：  
   - **颜色方案**：使用8位风格的16色调色板，绿色表示合法解，黄色表示当前检查。  
   - **音效提示**：当找到更优解时播放8位音效，背景音乐为低比特循环曲目。  
   - **自动演示**：模拟AI自动推导，按双指针逻辑逐步展示解题过程。  

---

**核心代码实现（以墨的题解）**  
```cpp
#include<cstdio>
using namespace std;

int gcd(int x, int y) {
    return y == 0 ? x : gcd(y, x % y);
}

int main() {
    int a, b, l, ansa = 0, ansb = 1;
    scanf("%d%d%d", &a, &b, &l);
    for (int i = 1; i <= l; i++) {
        for (int j = 1; j <= l; j++) {
            if (gcd(i, j) == 1 && i * b >= j * a) {
                if (ansa == 0 || i * ansb < j * ansa) {
                    ansa = i;
                    ansb = j;
                }
            }
        }
    }
    printf("%d %d", ansa, ansb);
    return 0;
}
```  
**代码要点**：双重循环枚举所有i和j，检查互质和比值条件，通过交叉相乘避免浮点运算，记录最优解。

---
处理用时：197.17秒
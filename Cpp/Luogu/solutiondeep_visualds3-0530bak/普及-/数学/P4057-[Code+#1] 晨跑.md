# 题目信息

# [Code+#1] 晨跑

## 题目描述

“无体育，不清华”、“每天锻炼一小时，健康工作五十年，幸福生活一辈子”


在清华，体育运动绝对是同学们生活中不可或缺的一部分。为了响应学校的号召，模范好学生王队长决定坚持晨跑。不过由于种种原因，每天都早起去跑步不太现实，所以王队长决定每$a$天晨跑一次。换句话说，假如王队长某天早起去跑了步，之后他会休息$a-1$天，然后第$a$天继续去晨跑，并以此类推。


王队长的好朋友小钦和小针深受王队长坚持锻炼的鼓舞，并决定自己也要坚持晨跑。为了适宜自己的情况，小钦决定每$b$天早起跑步一次，而小针决定每$c$天早起跑步一次。


某天早晨，王队长、小钦和小针在早起跑步时相遇了，他们非常激动、相互鼓励，共同完成了一次完美的晨跑。为了表述方便，我们把三位同学相遇的这天记为第$0$天。假设三位同学每次晨跑的时间段和路线都相同，他们想知道，下一次三人在跑步时相遇是第几天。由于三位同学都不会算，所以希望由聪明的你来告诉他们答案。


## 说明/提示

 ![](https://cdn.luogu.com.cn/upload/pic/12819.png) 

来自 CodePlus 2017 11 月赛，清华大学计算机科学与技术系学生算法与竞赛协会 荣誉出品。

Credit：idea/何昊天 命题/何昊天 验题/卢政荣

Git Repo：https://git.thusaac.org/publish/CodePlus201711

感谢腾讯公司对此次比赛的支持。


## 样例 #1

### 输入

```
2 3 5
```

### 输出

```
30```

## 样例 #2

### 输入

```
3 4 6
```

### 输出

```
12```

## 样例 #3

### 输入

```
10 100 1000
```

### 输出

```
1000```

# AI分析结果



**算法分类**：数论

---

### **题解思路与核心难点**

1. **问题本质**  
   求三个数的最小公倍数（LCM），即 `lcm(a, b, c)`。难点在于：
   - **分步计算**：正确推导三数 LCM 公式，需分步计算两数的 LCM 再与第三数结合。
   - **溢出风险**：直接相乘可能导致中间结果溢出，需优先进行除法运算。

2. **关键公式**  
   - 三数 LCM 公式：  
     `lcm(a, b, c) = lcm(lcm(a, b), c)`
   - 两数 LCM 公式：  
     `lcm(x, y) = x * y / gcd(x, y)`，需先除后乘避免溢出。

3. **实现难点**  
   - **数据类型选择**：使用 `long long` 防止溢出。
   - **分步计算顺序**：先计算两数的 LCM，再与第三数结合。

---

### **题解评分（≥4星）**

1. **Drinkkk（★★★★☆）**  
   - **亮点**：分步计算，先处理两数的 LCM 再与第三数结合，代码清晰。  
   - **代码片段**：  
     ```cpp
     long long d = a * b / gcd(a, b);
     long long e = d * c / gcd(d, c);
     printf("%lld", e);
     ```

2. **shenzuxin（★★★★☆）**  
   - **亮点**：修正后的代码正确处理数据类型和溢出风险，分步计算逻辑明确。  
   - **个人心得**：初次未用 `long long` 导致错误，强调数据类型的重要性。

3. **fallingdust（★★★★☆）**  
   - **亮点**：详细讲解 GCD 和 LCM 的数学推导，代码可读性强。  
   - **代码片段**：  
     ```cpp
     long long lcm(long long x, long long y) {
         return x * y / gcd(x, y);
     }
     ```

---

### **最优思路与技巧**

1. **分步计算 LCM**  
   - 先计算 `lcm(a, b)`，再计算 `lcm(result, c)`，避免直接相乘导致溢出。

2. **先除后乘**  
   - 计算两数 LCM 时，优先进行除法 `x / gcd(x, y)`，再乘以另一数。

3. **数据类型处理**  
   - 使用 `long long` 存储中间结果，防止大数溢出。

---

### **同类问题与算法套路**

- **数论公式推导**：  
  - 求多个数的 LCM 或 GCD 时，分步计算是通用方法。
  - 分解质因数法适用于需要分析因子贡献的场景（如天际之光的解法）。

- **常见变式**：  
  - 求多个数的最大公约数（GCD）。
  - 结合 LCM 和 GCD 的性质解决复杂数论问题。

---

### **推荐题目**

1. **P1029 最大公约数和最小公倍数问题**  
   - 考察 GCD 和 LCM 的关系与组合。

2. **P1072 Hankson 的趣味题**  
   - 结合 GCD 和 LCM 的复杂条件推导。

3. **P4057 Code+#4 最短路**  
   - 数论与图论的结合，需利用 LCM 性质建模。

---

### **个人心得摘录**

- **shenzuxin**：  
  > “第一次提交未用 `long long`，导致中间结果溢出。修正后意识到数据类型的重要性。”

- **天际之光**：  
  > “分解质因数法虽然直观，但实现复杂，效率较低，适合教学但不适合竞赛。”

---

### **可视化设计（复古像素风格）**

1. **动画流程**  
   - **步骤 1**：显示输入 `a, b, c`，用不同颜色标记。  
   - **步骤 2**：计算 `lcm(a, b)`，动态展示 `gcd(a, b)` 的计算（像素方块碰撞效果）。  
   - **步骤 3**：将结果与 `c` 计算 LCM，高亮最终结果。

2. **交互设计**  
   - **音效**：计算 GCD 时播放 8-bit 音效，最终结果出现时播放胜利音效。  
   - **自动演示**：AI 模拟分步推导，用户可暂停/单步执行观察中间值。

3. **代码片段（Canvas 绘制）**  
   ```javascript
   // 绘制 LCM 计算步骤
   function drawStep(a, b, result) {
       ctx.fillStyle = '#FF0000'; // 红色标记当前操作数
       ctx.fillText(`LCM(${a}, ${b}) = ${result}`, x, y);
   }
   ```

---

### **核心代码实现**

```cpp
#include <cstdio>
using namespace std;

long long gcd(long long x, long long y) {
    return y ? gcd(y, x % y) : x;
}

int main() {
    long long a, b, c;
    scanf("%lld%lld%lld", &a, &b, &c);
    long long lcm_ab = a / gcd(a, b) * b; // 先除后乘防溢出
    long long ans = lcm_ab / gcd(lcm_ab, c) * c;
    printf("%lld", ans);
    return 0;
}
```

---
处理用时：100.52秒
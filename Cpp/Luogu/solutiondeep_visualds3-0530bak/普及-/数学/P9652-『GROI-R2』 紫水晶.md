# 题目信息

# 『GROI-R2』 紫水晶

## 题目描述

爱丽丝不曾忘记过她曾经存在于纸牌的世界。

于是魔法让她的手里出现了一些牌，同时魔法也让坦尼尔手里出现了一些牌，而且每张牌上都写着一个正整数——尽管他们如今所处的，是玻璃王国的世界中。

牌张很快一消而散，而他们也准备启程。爱丽丝只记住了每相邻两张牌的**最大公约数之和**，坦尼尔只记住了每相邻两张牌的**最小公倍数之和**。

你还在这个宫殿里，你想重现当时的牌张。

**形式化题面**

给定 $q$ 次询问，每次询问为以下两种之一：

- ``1 n x`` 表示要求输出一长度为 $n$ 的**正整数**序列 $\{a_n\}$，使得 $\sum\limits_{i=1}^{n-1} \gcd(a_i,a_{i+1})=x$。

- ``2 n x`` 表示要求输出一长度为 $n$ 的**正整数**序列 $\{a_n\}$，使得 $\sum\limits_{i=1}^{n-1} \operatorname{lcm}(a_i,a_{i+1})=x$。

且对于任意输出的 $a_i$ 不应超出 C++ 语言中 ``int`` 的存储范围。

其中 $\gcd$ 和 $\operatorname{lcm}$ 分别为最大公约数和最小公倍数，如有多解，输出任意一个即可。如果无解，输出 ``-1``。

## 说明/提示

**数据范围**

**本题采用捆绑测试**。

| $\text{Subtask}$ | $\sum n\le$ | $x\le$ | 特殊性质 | 分值 |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $1$ | $5$ | $10$ | | $10$ |
| $2$ | $50$ | $200$ | | $20$ |
| $3$ | $5\times 10^5$ | $2^{31}-1$ | $\text{A}$ | $15$ |
| $4$ | $5\times 10^5$ | $2^{31}-1$ | $\text{B}$ | $15$ |
| $5$ | $5\times 10^5$ | $2^{31}-1$ | | $40$ |

特殊性质 $\text{A}$：保证对于任意询问满足 $op=1$。

特殊性质 $\text{B}$：保证对于任意询问满足 $op=2$。

对于 $100\%$ 的数据满足 $2\le n\le 5\times 10^5$，$2\le \sum n\le 5\times 10^5$，$1\le x \le 2^{31}-1$，$op\in\{1,2\}$。


## 样例 #1

### 输入

```
5
1 5 4
2 3 8
1 5 10
2 6 34
1 3 1```

### 输出

```
1 1 1 1 1
2 2 3
1 1 1 7 7
1 1 4 5 1 4
-1```

# AI分析结果



**算法分类**: 数论

---

### **题解思路与算法要点**
- **核心构造思路**：利用数字1的特殊性质（gcd(1, a)=1，lcm(1, a)=a），构造大量1组成的序列，仅调整末尾元素以满足总和要求。
- **数学推导**：
  - **操作1**（gcd之和）：前n-2个元素为1，贡献和为n-2。最后两个元素设为k=x - (n-2)，它们的gcd为k，总和为x。
  - **操作2**（lcm之和）：前n-1个元素为1，贡献和为n-2。最后一个元素设为k=x - (n-2)，其lcm为k，总和为x。
- **边界条件**：x必须≥n-1，否则无法构造满足条件的序列（每个相邻对至少贡献1）。

---

### **题解评分（≥4星）**
1. **RJSPZ（5星）**  
   - 代码简洁，正确处理边界条件，输出高效。
2. **myyyIisq2R（4星）**  
   - 思路清晰，样例推导详细，但代码格式略有不足。
3. **_O_v_O_（4星）**  
   - 数学证明完善，明确给出无解条件，代码高效。

---

### **最优思路提炼**
- **关键构造**：用1填充大部分位置，仅调整末尾元素。
  - **gcd构造**：`1,1,...,k,k`（k = x - (n-2)），总贡献为n-2 + k。
  - **lcm构造**：`1,1,...,k`（k = x - (n-2)），总贡献为n-2 + k。
- **无解条件**：x < n-1时直接输出-1。

---

### **相似题目推荐**
1. [P2445 动物园](https://www.luogu.com.cn/problem/P2445)  
2. [P4057 晨跑](https://www.luogu.com.cn/problem/P4057)  
3. [P1072 Hankson的趣味题](https://www.luogu.com.cn/problem/P1072)

---

### **可视化与算法演示**
- **像素风格动画**：
  1. **初始网格**：显示n个空位，逐步填充为1（绿色像素块）。
  2. **末尾调整**：高亮最后1~2个位置，设为红色像素块，数值为k。
  3. **贡献计算**：逐对显示gcd/lcm值，右侧动态更新总和。
  4. **音效触发**：成功填充时播放上升音调，无解时播放低沉音效。
- **交互控制**：支持步进执行，调节动画速度观察构造过程。

---

### **核心代码实现**
```cpp
#include <cstdio>

int main() {
    int T, op, n, x;
    scanf("%d", &T);
    while (T--) {
        scanf("%d%d%d", &op, &n, &x);
        if (x < n - 1) {
            puts("-1");
            continue;
        }
        if (op == 1) {
            int k = x - (n - 2);
            for (int i = 1; i <= n - 2; ++i) printf("1 ");
            printf("%d %d\n", k, k);
        } else {
            int k = x - (n - 2);
            for (int i = 1; i <= n - 1; ++i) printf("1 ");
            printf("%d\n", k);
        }
    }
    return 0;
}
```

---

**个人心得**：构造题需挖掘题目隐含性质（如1的特殊性），边界条件需严格验证。调试时注意n=2等极端情况，确保输出格式正确。

---
处理用时：62.95秒
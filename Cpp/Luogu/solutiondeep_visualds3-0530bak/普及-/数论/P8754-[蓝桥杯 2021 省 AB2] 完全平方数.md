# 题目信息

# [蓝桥杯 2021 省 AB2] 完全平方数

## 题目描述

一个整数 $a$ 是一个完全平方数，是指它是某一个整数的平方，即存在一个 整数 $b$，使得 $a=b^{2}$ 。

给定一个正整数 $n$，请找到最小的正整数 $x$，使得它们的乘积是一个完全平方数。

## 说明/提示

对于 $30 \%$ 的评测用例, $1 \leq n \leq 1000$，答案不超过 $1000$。

对于 $60 \%$ 的评测用例，$1 \leq n \leq 10^{8}$，答案不超过 $10^{8}$。

对于所有评测用例，$1 \leq n \leq 10^{12}$，答案不超过 $10^{12}$。

蓝桥杯 2021 第二轮省赛 A 组 G 题（B 组 H 题）。

## 样例 #1

### 输入

```
12```

### 输出

```
3```

## 样例 #2

### 输入

```
15```

### 输出

```
15 ```

# AI分析结果



# 唯一算法分类
数论（质因数分解）

---

# 综合分析与结论

## 核心思路与难点
**核心算法**：将 n 质因数分解，对每个质因数的奇数次幂补一个该质因数，使总次数为偶数。最终 x 为所有补足质因数的乘积。

**实现关键**：
1. 质因数分解时需遍历到 sqrt(n)，处理剩余的大质数
2. 奇数次幂判断通过位运算或取模实现
3. 时间复杂度 O(√n)，满足 1e12 数据量要求

**可视化设计**：
- **像素动画**：展示质因数分解过程，每个质因数用不同颜色方块表示，次数用数字显示。当次数为奇数时，方块闪烁并添加到 x 区域
- **音效触发**：分解成功时播放 "beep" 音，奇数次幂时播放 "ding" 音，最终结果出现时播放胜利音效
- **交互面板**：支持暂停观察当前分解状态，调速按钮控制分解速度

---

# 题解清单（≥4星）

1. **w9095（5星）**
   - 代码最简练，直接处理分解过程
   - 无冗余数组存储，空间最优
   - 关键注释清晰说明补数逻辑

2. **aCssen（5星）**
   - 创新解法：通过除平方数直接获取答案
   - 时间复杂度相同但常数更优
   - 数学证明充分，思路独特

3. **Convergent_Series（4星）**
   - 严格数学推导展示
   - 代码添加详细注释
   - 变量命名规范易读

---

# 最优思路与技巧

## 关键思路
**质因数补全法**  
对 n 分解质因数后，每个质因数 p 满足：  
x 需包含 p^(1 - a%2)，即当 a 为奇数时补一个 p

**平方数除法法**  
将 n 不断除以最大平方因子，最终剩余部分即为 x

## 实现技巧
```cpp
// 质因数分解法核心代码
for(long long i=2; i*i<=n; i++){
    int cnt=0;
    while(n%i == 0) cnt++, n/=i;
    if(cnt%2) ans *= i; // 奇数次补一个
}
if(n != 1) ans *= n; // 处理剩余大质数

// 平方数除法法核心代码
for(ll i=2; i*i<=n; i++){
    ll k = i*i;
    while(ans%k == 0) ans /= k; // 除尽平方因子
}
```

---

# 同类型题目推荐
1. P1075（质因数分解应用）
2. P2424（约数平方和）
3. P2043（质因数分解进阶）

---

# 复古游戏化动画方案

## 视觉设计
- **8位调色板**：质因数用16色区分，背景深蓝星空
- **像素动效**：分解时数字爆破为像素点，补数时方块飞入x区域
- **状态面板**：左侧显示当前n值，右侧累积x值

## 音效方案
- 分解成功：NES 风格 8-bit "blip" 音
- 奇数次幂：FC 游戏金币音
- 完成提示：超级马里奥过关音乐

## AI演示模式
自动按最优路径分解质因数，速度可调 0.5x~4x，展示时同步生成伪代码

---

# 题解核心代码（w9095）
```cpp
#include <bits/stdc++.h>
using namespace std;
long long n,ans=1;
int main() {
    scanf("%lld",&n);
    for(long long i=2; i*i<=n; i++) {
        int cnt=0; 
        while(!(n%i)) cnt++, n/=i;
        if(cnt%2) ans *= i; 
    }
    if(n != 1) ans *= n;
    printf("%lld",ans);
    return 0;
}
```

---
处理用时：132.31秒
# 题目信息

# [NOIP 2001 普及组] 最大公约数和最小公倍数问题

## 题目描述

输入两个正整数 $x_0, y_0$，求出满足下列条件的 $P, Q$ 的个数：

1. $P,Q$ 是正整数。

2. 要求 $P, Q$ 以 $x_0$ 为最大公约数，以 $y_0$ 为最小公倍数。

试求：满足条件的所有可能的 $P, Q$ 的个数。

## 说明/提示

$P,Q$ 有 $4$ 种：

1. $3, 60$。
2. $15, 12$。
3. $12, 15$。
4. $60, 3$。

对于 $100\%$ 的数据，$2 \le x_0, y_0 \le {10}^5$。

**【题目来源】**

NOIP 2001 普及组第二题

## 样例 #1

### 输入

```
3 60
```

### 输出

```
4
```

# AI分析结果



### 算法分类
数学（因数分解与组合数学）

---

### 题解思路与算法要点

#### 核心思路
1. **数学关系**：利用 $P \times Q = x_0 \times y_0$ 且 $\gcd(P,Q)=x_0$ 的性质。
2. **枚举优化**：枚举 $i$ 到 $\sqrt{x_0 \times y_0}$，若 $i$ 和 $(x_0 \times y_0)/i$ 满足条件，则答案加 2。
3. **质因数分解**：统计 $\frac{y_0}{x_0}$ 的质因数个数 $n$，答案为 $2^n$（仅当 $x_0 \mid y_0$ 时有效）。

#### 解决难点
- **避免重复计算**：通过仅枚举到 $\sqrt{n}$ 并处理平方数特例。
- **数学性质应用**：将问题转化为因数分解或质因数组合问题，减少计算量。

---

### 题解评分（≥4星）

1. **樱雪喵（5星）**
   - **亮点**：代码简洁高效，利用 `__gcd` 快速验证条件，处理平方数逻辑清晰。
   - **核心代码**：
     ```cpp
     for(long long i=1;i<=sqrt(n);i++)
         if(n%i==0 && __gcd(i,n/i)==m) ans+=2;
     ```

2. **sochiji（4星）**
   - **亮点**：深入数学分析，通过质因数分解直接计算答案，避免枚举。
   - **核心代码**：
     ```cpp
     while(quotient>1) {
         if(quotient%currentFactor==0) count++;
         while(quotient%currentFactor==0) quotient/=currentFactor;
     }
     ```

3. **zhangboju（4星）**
   - **亮点**：手写 `gcd` 函数，兼容性更强，处理 $x_0=y_0$ 的逻辑明确。
   - **核心代码**：
     ```cpp
     for(int i=1;i<=sqrt(x*y);i++)
         if(x*y%i==0 && gcd(i,x*y/i)==x) ans++;
     ```

---

### 最优思路提炼

1. **因数对枚举法**：
   - 枚举 $i$ 到 $\sqrt{x_0 \times y_0}$，验证 $i$ 和 $\frac{x_0 \times y_0}{i}$ 的 $\gcd$。
   - **时间复杂度**：$O(\sqrt{n})$，$n=x_0 \times y_0$。

2. **质因数组合法**：
   - 若 $\frac{y_0}{x_0}$ 的质因数个数为 $k$，答案为 $2^k$。
   - **时间复杂度**：$O(\sqrt{\frac{y_0}{x_0}})$。

---

### 类似算法题目

1. **洛谷 P1072 [NOIP2009 提高组] Hankson 的趣味题**  
   （求满足特定 $\gcd$ 和 $\operatorname{lcm}$ 条件的数）

2. **洛谷 P1414 又是毕业季II**  
   （利用 $\gcd$ 统计因数组合）

3. **洛谷 P2651 添加括号III**  
   （通过 $\gcd$ 性质构造分数表达式）

---

### 可视化与算法演示

#### 动画方案
1. **像素风格因数枚举**：
   - **展示**：在 Canvas 网格中动态生成 $i$ 和 $\frac{n}{i}$，绿色表示有效对，红色表示无效。
   - **高亮**：当前枚举的 $i$ 和对应的 $\gcd$ 计算结果。
   - **音效**：成功时播放 8-bit 上升音效，失败时播放下降音效。

2. **质因数分解过程**：
   - **动态绘制**：将 $\frac{y_0}{x_0}$ 分解为质因数方块，不同颜色代表不同质数。
   - **组合计数**：显示 $2^k$ 的二进制位增长动画。

#### 交互设计
- **步进控制**：按空格键单步执行枚举或分解。
- **自动模式**：AI 自动演示，速度可调（1x/2x/4x）。
- **复古 UI**：仿 FC 风格按钮和计数器。

---

### 关键代码实现

#### 因数枚举法（樱雪喵）
```cpp
#include<bits/stdc++.h>
using namespace std;
long long m,n,ans;
int main(){
    cin>>m>>n;
    if(m==n) ans--;
    n*=m;
    for(long long i=1;i<=sqrt(n);i++){
        if(n%i==0 && __gcd(i,n/i)==m) ans+=2;
    }
    cout<<ans;
    return 0;
}
```

#### 质因数分解法（sochiji）
```cpp
int quotient = y / x;
int count = 0, currentFactor = 2;
while (quotient > 1) {
    if (quotient % currentFactor == 0) {
        count++;
        while (quotient % currentFactor == 0) quotient /= currentFactor;
    }
    currentFactor++;
}
cout << (1 << count);
```

---

### 总结
- **核心优化**：将问题转化为因数或质因数组合问题，避免暴力枚举。
- **实践建议**：优先使用数学性质简化计算，注意边界条件（如 $x_0 \nmid y_0$ 时答案为 0）。

---
处理用时：65.23秒
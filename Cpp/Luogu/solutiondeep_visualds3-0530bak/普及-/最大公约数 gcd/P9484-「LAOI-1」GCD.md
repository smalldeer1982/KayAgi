# 题目信息

# 「LAOI-1」GCD

## 题目描述

一张图有 $n$ 个节点，编号为 $1,2,3,\dots,n$。其中 $i$ 号节点会向 $j$ 号节点连一条边权为 $|i-j|$ 的无向边，当且仅当 $\gcd(i,j)=i,\operatorname{lcm}(i,j)=j$ 时连边。现询问 $q$ 次，每次询问求 $x$ 到 $y$ 的最短路径。

## 说明/提示

注意时空限制，本题不捆绑。

对于 $40\%$ 的数据，$T,n,q\le100$;

对于 $100\%$ 的数据，$1\le T\le10^6$，$1\le n,q\le10^6$，$1\le x,y\le n$，$1\le \sum n,\sum q\le10^6$。

**请使用更快的 IO 方式**。

updata on 2024/8/8：

时限上调到 1000ms。/yun

## 样例 #1

### 输入

```
1
6 4
1 4
3 5
2 5
2 4```

### 输出

```
3
6
5
2```

# AI分析结果



---

## 算法分类  
**数论**

---

## 综合分析与结论  
### 核心思路与算法流程  
题目本质是通过数论推导将图论问题转化为数学公式。当两个数存在倍数关系时建边，最短路径的关键是找到它们的最大公约数 `g`，路径为 `x → g → y`，总权值为 `x + y - 2g`。  

**关键步骤：**  
1. **条件转化**：`gcd(i,j)=i` 且 `lcm(i,j)=j` → `i` 是 `j` 的因数  
2. **路径构造**：通过最大公约数 `g` 构造最短路径  
3. **数学证明**：任何其他路径（如更小的公约数或公倍数）均不优于 `g`  

### 可视化设计思路  
1. **像素风格演示**：用方格表示节点，颜色区分不同数值  
2. **动态路径标记**：  
   - 初始高亮 `x` 和 `y` 的节点（如红色）  
   - 逐步分解 `x` 和 `y` 的因数，最终定位 `g`（黄色）  
   - 绘制 `x → g` 和 `y → g` 的箭头（绿色）  
3. **音效与动画**：  
   - 路径计算完成时播放成功音效  
   - 每一步因数分解时播放点击音效  

---

## 题解清单 (≥4星)  
### 1. Coffins（★★★★★）  
- **亮点**：简洁直击核心，代码高效  
- **代码片段**：直接输出 `x+y-2*gcd(x,y)`  
- **心得**：通过倍数关系快速推导，避免复杂图论算法  

### 2. zzx0102（★★★★☆）  
- **亮点**：详细数学证明，覆盖边界情况  
- **代码片段**：使用 `__gcd` 优化计算  
- **证明补充**：对比公倍数路径的无效性  

---

## 核心代码实现  
```cpp
// Coffins 的核心逻辑
cout << x + y - 2 * gcd(x, y) << '\n';
```

---

## 最优思路提炼  
1. **数论转化**：将图论问题转化为最大公约数的计算  
2. **路径构造**：利用因数链的最短性质（数学归纳法证明）  
3. **复杂度优化**：直接公式计算，实现 O(1) 查询  

---

## 类似题目推荐  
1. **P1029 最大公约数和最小公倍数问题**  
   - 给定两数求满足条件的数对  
2. **P1072 Hankson 的趣味题**  
   - 结合因数与公倍数的条件分析  
3. **P1516 青蛙的约会**  
   - 数论与线性同余方程应用  

---

## 复古像素动画实现要点  
```javascript
// 伪代码示例：Canvas 绘制路径  
function drawPath(x, y, g) {
  ctx.fillStyle = "#FF0000"; // 红色标记起点终点
  drawSquare(x);
  drawSquare(y);
  ctx.fillStyle = "#FFFF00"; // 黄色标记公约数
  drawSquare(g);
  ctx.strokeStyle = "#00FF00"; // 绿色路径
  drawLine(x, g);
  drawLine(y, g);
}
// 音效触发：Web Audio API 播放 8-bit 音效
function playSuccess() {
  const osc = new OscillatorNode(ctx, { type: 'square' });
  osc.frequency.value = 880; // A5 音高
  osc.connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime + 0.1);
}
```

---

**总结**：本题通过数论性质跳过传统图论算法，直接公式计算，是典型的“数学思维优化算法”案例。

---
处理用时：66.77秒
# 题目信息

# [ICPC 2020 Nanjing R] K Co-prime Permutation

## 题目描述

给定两个整数 $n$ 和 $k$，构造一个 $1 \sim n$ 的排列 $p_1,p_2,\cdots,p_n$，使得存在 $k$ 个整数 $i$ 满足 $1 \le i \le n$ 且 $\text{gcd}(p_i,i)=1$。

$\text{gcd}(x,y)$ 表示 $x$ 和 $y$ 的最大公约数。

## 样例 #1

### 输入

```
5 3```

### 输出

```
1 4 5 2 3```

## 样例 #2

### 输入

```
1 0```

### 输出

```
-1```

# AI分析结果



## 算法分类
构造

## 题解思路与解决难点
1. **核心思路**：利用相邻数互质（gcd(x, x+1)=1）和1与任何数互质的性质，构造前k个元素使满足条件，其余元素保持原位。
2. **关键步骤**：
   - 前k-1个位置设置为i+1，保证相邻互质。
   - 第k个位置设为1，利用gcd(k,1)=1。
   - 剩余位置保持i，此时gcd(i,i)=i>1。
3. **难点解决**：
   - 确保恰好k个满足条件的位置，避免多余或不足。
   - 处理k=0的特殊情况（仅当n=0可能，否则输出-1）。

## 题解评分（≥4星）
1. **Larryyu（4星）**：代码简洁，利用模运算循环移位前k项，逻辑清晰。
2. **hjqhs（4星）**：直接输出2~k后接1，剩余部分保持原位，思路直观。
3. **sevenki（4星）**：提供两种构造方法，详细分析奇偶性，代码灵活。

## 最优思路提炼
- **核心技巧**：错位构造前k项（i→i+1，第k项置1），其余保持原位。
- **数学基础**：gcd(x, x+1)=1与gcd(1, x)=1的互质性质。

## 类似算法套路
- **相邻交换**：利用相邻数互质特性构造排列。
- **1的特殊性**：将1放在特定位置保证gcd=1。

## 推荐题目
1. [洛谷 P7843 - 互质排列构造](https://www.luogu.com.cn/problem/P7843)
2. [洛谷 P6385 - 相邻奇偶排列](https://www.luogu.com.cn/problem/P6385)
3. [洛谷 P1214 - 等差数列构造](https://www.luogu.com.cn/problem/P1214)

## 可视化算法演示
- **动画方案**：用像素块表示排列元素，前k项逐步高亮并显示为i+1，第k项变为1，后续元素保持绿色。
- **交互设计**：步进执行，展示每个位置的gcd计算结果，满足时触发音效。
- **复古风格**：8位音效（成功时“叮”，错误时“嘟”），背景循环芯片音乐。

---

## 核心代码实现
```cpp
#include<bits/stdc++.h>
using namespace std;
int main() {
    int n, k;
    cin >> n >> k;
    if (k == 0) {
        cout << -1;
        return 0;
    }
    for (int i = 2; i <= k; ++i) cout << i << ' ';
    cout << 1 << ' '; // 第k位设为1
    for (int i = k + 1; i <= n; ++i) cout << i << ' ';
    return 0;
}
```

---

## 可视化代码片段（Canvas动画）
```javascript
// 示例：动态绘制排列构造过程
ctx.fillStyle = '#8B00FF'; // 紫色像素块表示构造步骤
for (let i = 0; i < k; i++) {
    drawPixel(i * 20, 0, ctx); // 绘制前k项
    playSound('beep'); // 触发音效
}
// 绘制第k项为1
ctx.fillStyle = '#FF0000'; // 红色高亮
drawPixel(k * 20, 0, ctx);
playSound('success');
```

---
处理用时：127.43秒
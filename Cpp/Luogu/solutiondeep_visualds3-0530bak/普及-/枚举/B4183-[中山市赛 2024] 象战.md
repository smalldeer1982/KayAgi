# 题目信息

# [中山市赛 2024] 象战

## 题目描述

国际象棋的棋盘可以表示为一个 $8$ 行 $8$ 列的格子图，其中每个格子都可以放一枚棋子。我们将第 $1$ 行第 $2$ 列的格子用  $(1, 2)$ 来表示，以此类推。

为了帮助妹妹认识国际象棋中的“象”这种棋子，Jimmy 可谓是煞费苦心——他首先教会妹妹：“‘象’是一种能够飞檐走壁的棋子，它不仅可以攻击自己所在的位置，还可以攻击它所在的两条斜线上的所有格子。”说着，Jimmy 将一只“象”随意地摆放在棋盘上，并且顺便用水彩笔将“象”能攻击到的所有格子涂成了红色。

![](https://cdn.luogu.com.cn/upload/image_hosting/tm3c2ym0.png)

就在此时，Chen 老师一个电话把 Jimmy 叫去收作业了。等到他回来后，他发现妹妹已经将棋盘推开了，棋盘上的“象”也不知所踪。Jimmy 只记得他没有把“象”放在棋盘的四个角落上（即 $(1, 1),(1, 8),(8, 1),(8, 8)$ 这四个格子）。现在他想知道，原来的“象”摆在了哪个格子上。

## 样例 #1

### 输入

```
.....#..
#...#...
.#.#....
..#.....
.#.#....
#...#...
.....#..
......#.```

### 输出

```
4 3```

# AI分析结果



**唯一算法分类**  
模拟

---

**综合分析与结论**  
题目要求根据被涂红的棋盘反推“象”的位置。核心思路是遍历每个非角落格子，检查其四条斜线上的所有格子是否均为红色（`#`）。关键难点在于处理棋盘边缘时的越界问题，以及确保整个斜线完全覆盖红色。

**题解思路与核心难点**  
1. **核心逻辑**：象所在的两条斜线（左上-右下、左下-右上）必须全为红色。需遍历所有可能的象位，检查四个斜线方向的所有格子。
2. **边缘处理**：通过扩展棋盘边界或在遍历时控制索引范围避免越界。
3. **优化手段**：部分题解仅检查相邻四个斜方向，但正确做法需遍历整个斜线。

**题解评分 (≥4星)**  
1. **SatoruXia (5星)**  
   - **亮点**：通过`check`函数遍历四个斜线方向的所有格子，确保全为红色。代码结构清晰，边界处理到位。
2. **TJB_LHY (4星)**  
   - **亮点**：使用`while`循环检查每个斜线方向，排除四个角落。代码逻辑严谨，但部分冗余。
3. **linan04007 (4星)**  
   - **亮点**：分方向遍历斜线，逐格检查，排除角落。实现简洁，但索引从0开始需注意转换。

**最优思路或技巧提炼**  
- **核心检查逻辑**：对于每个候选位置，分别向四个斜线方向（左上、左下、右上、右下）遍历，确保所有格子均为`#`。
- **边界处理技巧**：扩展棋盘外围为`#`（如AW_BCH的最终解法），或在遍历时动态判断索引范围（如SatoruXia的解法）。
- **代码优化**：直接遍历棋盘，通过循环条件控制索引，避免额外初始化。

**同类型题或类似算法套路**  
- **矩阵遍历与方向检查**：类似问题如[洛谷 P1219 八皇后](https://www.luogu.com.cn/problem/P1219)，需检查多个方向。
- **棋盘模拟与条件验证**：如[洛谷 P1541 棋盘覆盖](https://www.luogu.com.cn/problem/P1541)。

**推荐相似题目**  
1. [P1219 八皇后](https://www.luogu.com.cn/problem/P1219)  
2. [P1541 棋盘覆盖](https://www.luogu.com.cn/problem/P1541)  
3. [P1036 选数](https://www.luogu.com.cn/problem/P1036)（需遍历与条件判断）

**个人心得摘录**  
- **AW_BCH的调试经验**：初始解法仅检查相邻四个斜方向，导致边缘处理错误。扩展棋盘边界后解决，强调全面测试边界条件的重要性。
- **SatoruXia的顿悟**：正确象位需确保所有斜线格子均为红色，而非仅相邻点，避免被部分数据误导。

---

**可视化与算法演示**  
**动画方案**：  
1. **网格绘制**：在Canvas中绘制8x8棋盘，白色为`.`, 红色为`#`。  
2. **步进检查**：高亮当前遍历的候选象位（黄色），逐步向四个斜线方向延伸（绿色箭头），若发现非红色格子（变灰），标记该位置无效。  
3. **成功标识**：找到正确象位时，闪烁显示并播放成功音效。  

**复古像素风格实现**  
- **颜色方案**：使用8位色调色板（红、白、黄、灰），棋盘网格线为深灰。  
- **音效触发**：  
  - **步进检查**：短促“滴”声。  
  - **找到答案**：经典FC过关音效。  
- **自动演示**：按行优先顺序自动遍历，用户可暂停/调速观察检查过程。

---

**关键代码片段**  
```cpp
// SatoruXia的核心检查函数
bool check(const vector<string>& board, int r, int c) {
    // 检查左上斜线
    int i = r - 1, j = c - 1;
    while (i >= 0 && j >= 0) {
        if (board[i][j] != '#') return false;
        i--; j--;
    }
    // 检查右上斜线
    i = r - 1, j = c + 1;
    while (i >= 0 && j < 8) {
        if (board[i][j] != '#') return false;
        i--; j++;
    }
    // 检查左下斜线
    i = r + 1, j = c - 1;
    while (i < 8 && j >= 0) {
        if (board[i][j] != '#') return false;
        i++; j--;
    }
    // 检查右下斜线
    i = r + 1, j = c + 1;
    while (i < 8 && j < 8) {
        if (board[i][j] != '#') return false;
        i++; j++;
    }
    return true;
}
```

---
处理用时：180.77秒
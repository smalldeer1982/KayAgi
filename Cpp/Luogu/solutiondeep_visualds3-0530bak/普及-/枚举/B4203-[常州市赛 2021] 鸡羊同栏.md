# 题目信息

# [常州市赛 2021] 鸡羊同栏

## 题目背景

搬运自 <http://czoj.com.cn/p/439>。数据为民间数据。

## 题目描述

小 $\text{X}$ 是 $\text{CZ}$ 市著名的牧场主。他把 $A$ 只鸡和 $B$ 只羊圈养在一个围栏中。   
一只正常的鸡有 $0$ 只角、 $2$ 条腿；一只正常的羊有 $2$ 只角、 $4$ 条腿。   
某一天，一道神秘的宇宙射线击中了牧场，导致其中的**至多一个动物**发生了变异。   
变异的动物角的只数与腿的条数中**至少有一个**数量变化了。例如，一只正常的鸡变异成了 $3$ 只角 $2$ 条腿。注意：**变异以后动物也不可能有负数个数的角或腿**。   
小 $\text{X}$ 只知道鸡和羊的数量、以及笼子中的动物一共有 $C$ 只角 $D$ 条腿。他想请你帮忙搞清楚变异的情况是什么。 

## 说明/提示

### 样例 $\textbf 1$ 解释
只可能是一只羊变异成了 $1$ 只角 $7$ 条腿 $(0+0+1+2=3,2+2+7+4=15)$。  
### 样例 $\textbf 2$ 解释
$0+0+2+2=4,2+2+4+4=12$，不可能有动物变异。  
### 数据范围
本题共有 $10$ 个测试点。  
对于所有数据，$0 \le A,B,C,D \le 10^9$。
|测试点编号|$A,B,C,D$|
|:-:|:-:|
|$1\sim6$|$\le10^3$|
|$7\sim10$|$\le 10^9$| 

## 样例 #1

### 输入

```
2 2 3 15```

### 输出

```
-1
1 7```

## 样例 #2

### 输入

```
2 2 4 12```

### 输出

```
-1
-1```

# AI分析结果



**唯一算法分类**：数学问题

---

### **题解思路、算法要点与解决难点**

**核心思路**：
1. **变异后的总角与腿数推导**：计算变异后与原情况的差值（`delta_c = C - 2B`，`delta_d = D - 2A - 4B`）。
2. **无变异判断**：若 `delta_c` 和 `delta_d` 均为 0，说明无动物变异，输出两行 `-1`。
3. **鸡/羊变异的独立计算**：
   - **鸡变异**：角数为 `delta_c`，腿数为 `delta_d + 2`，需非负。
   - **羊变异**：角数为 `delta_c + 2`，腿数为 `delta_d + 4`，需非负。

**解决难点**：
- **总角腿数与原值相同的特判**：需单独处理 `delta_c == 0 && delta_d == 0`，否则会误判为有效变异。
- **推导公式的数学严谨性**：通过差值分解，确保变异后的属性推导正确。

---

### **题解评分 (≥4星)**

1. **Sliarae 的题解（4.5 星）**  
   - **亮点**：正确处理了总角腿数与原值相同的特判，代码简洁高效。
   - **代码**：通过 `c -= 2*b; d -= ...` 计算差值，逻辑清晰。

2. **liwanxian 的题解（4 星）**  
   - **亮点**：明确注释了公式推导过程，适合理解。
   - **注意点**：代码中 `c -= 2*b; d -= ...` 的步骤与 Sliarae 的思路一致。

---

### **最优思路或技巧提炼**

1. **差值分解法**：将总问题转化为与原值的差值，简化计算。
2. **独立处理鸡/羊变异**：利用差值关系，直接推导各自变异后的属性。
3. **特判无变异情况**：通过 `delta_c` 和 `delta_d` 同时为零判断，避免复杂条件。

---

### **同类型题或类似算法套路**

- **鸡兔同笼变种**：通过总腿/头数推导个体属性。
- **数学差值分解**：将复杂条件转化为差值问题，适用于类似“变异后数值推导”场景。

---

### **推荐相似题目**

1. **P1049 装箱问题**（差值优化）  
2. **P1217 回文质数**（数学推导与条件判断）  
3. **P1031 均分纸牌**（差值分解与平衡计算）

---

### **代码核心实现**

**Sliarae 的代码片段**：
```cpp
c -= 2 * b;
d -= 2 * a + 4 * b;
if (!c && !d) return cout << -1 << '\n' << -1 << '\n', 0;
// 计算鸡和羊的变异属性
LL x = c, y = 2 + d;
if (x >= 0 && y >= 0) cout << x << ' ' << y << '\n';
else cout << -1 << '\n';
x = 2 + c, y = 4 + d;
if (x >= 0 && y >= 0) cout << x << ' ' << y << '\n';
else cout << -1 << '\n';
```

---

### **可视化与算法演示**

**动画设计**：
1. **初始状态**：像素化鸡（黄色方块）和羊（白色方块），显示原总角腿数。
2. **差值计算**：高亮显示 `delta_c` 和 `delta_d` 的计算过程。
3. **变异判定**：
   - 若差值全零，显示红色警告并输出 `-1`。
   - 否则，分别用绿色（鸡）和蓝色（羊）显示变异后的属性，若为非负则闪烁。

**复古像素风格**：
- **Canvas 绘制**：使用 16 色调色板，网格布局。
- **音效**：成功时播放 8-bit 胜利音效，失败时播放低沉音效。

---

### **总结**

本题的关键在于数学推导与边界处理。通过差值分解法，将问题简化为独立计算鸡和羊的变异属性，同时需注意总角腿数与原值相同的特判。Sliarae 的题解因其严谨的逻辑和简洁的代码实现，成为最优解。

---
处理用时：305.93秒
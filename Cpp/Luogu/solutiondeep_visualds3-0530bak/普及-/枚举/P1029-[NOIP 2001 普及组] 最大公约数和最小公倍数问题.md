# 题目信息

# [NOIP 2001 普及组] 最大公约数和最小公倍数问题

## 题目描述

输入两个正整数 $x_0, y_0$，求出满足下列条件的 $P, Q$ 的个数：

1. $P,Q$ 是正整数。

2. 要求 $P, Q$ 以 $x_0$ 为最大公约数，以 $y_0$ 为最小公倍数。

试求：满足条件的所有可能的 $P, Q$ 的个数。

## 说明/提示

$P,Q$ 有 $4$ 种：

1. $3, 60$。
2. $15, 12$。
3. $12, 15$。
4. $60, 3$。

对于 $100\%$ 的数据，$2 \le x_0, y_0 \le {10}^5$。

**【题目来源】**

NOIP 2001 普及组第二题

## 样例 #1

### 输入

```
3 60
```

### 输出

```
4
```

# AI分析结果



## 算法分类
数学问题（数论）

---

## 题解思路与核心难点

### 核心算法对比
#### 枚举法（樱雪喵、zhangboju 等）
- **核心思路**：根据 $P \times Q = x_0 \times y_0$，枚举 $i \in [1, \sqrt{x_0 y_0}]$，检查是否满足 $\gcd(i, \frac{x_0 y_0}{i}) = x_0$。
- **关键变量**：枚举的因数对 $(i, \frac{x_0 y_0}{i})$，通过 `__gcd` 快速判断。
- **难点处理**：当 $i = \frac{x_0 y_0}{i}$ 时需去重，时间复杂度 $O(\sqrt{x_0 y_0})$。

#### 素因数分解法（sochiji）
- **核心思路**：若 $x_0 \nmid y_0$ 则无解；否则分解 $\frac{y_0}{x_0}$ 的素因子数 $k$，答案为 $2^k$。
- **关键变量**：$\frac{y_0}{x_0}$ 的素因子数，通过分解质因数统计。
- **难点处理**：利用素因子分配组合的数学性质，时间复杂度 $O(\sqrt{\frac{y_0}{x_0}})$。

### 结论
- **最优解法**：素因数分解法，时间复杂度更低且数学推导清晰。
- **关键优化**：将问题转化为素因子分配的组合问题，避免大范围枚举。

---

## 题解评分（≥4星）

### 樱雪喵（4星）
- **亮点**：代码简洁，利用 `__gcd` 快速实现，明确处理重复情况。
- **缺点**：大数据时枚举次数较多。

### sochiji（5星）
- **亮点**：数学推导透彻，时间复杂度更优，代码高效。
- **代码片段**：
  ```cpp
  int quotient = y / x;
  while (quotient > 1) {
      if (quotient % currentFactor == 0) {
          count++;
          while (quotient % currentFactor == 0)
              quotient /= currentFactor;
      }
      currentFactor++;
  }
  cout << (1 << count);
  ```

### zhangboju（4星）
- **亮点**：详细数学证明，手写 `gcd` 函数，适合教学。
- **缺点**：未处理数据溢出问题。

---

## 最优思路提炼
- **数学性质**：若 $x_0$ 是 $P,Q$ 的最大公约数，则 $P = x_0 \cdot a$，$Q = x_0 \cdot b$，其中 $a,b$ 互质且 $a \times b = \frac{y_0}{x_0}$。
- **素因子分配**：分解 $\frac{y_0}{x_0}$ 的素因子数为 $k$，每个素因子有两种分配方式（给 $a$ 或 $b$），总组合数为 $2^k$。

---

## 同类型题目推荐
1. **P1075 [NOIP2012 普及组] 质因数分解**  
   （分解质因数的直接应用）
2. **P1069 [NOIP2009 普及组] 细胞分裂**  
   （最小公倍数与因数分解的综合应用）
3. **P2441 角色属性**  
   （最大公约数的动态维护问题）

---

## 可视化算法演示

### 素因子分配动画
- **像素风格**：用不同颜色方块表示素因子，点击按钮分配至左右队列（模拟 $a$ 和 $b$）。
- **音效**：分配时播放“点击”音效，完成时播放“通关”音效。
- **代码片段**（伪代码）：
  ```javascript
  function assignFactor(factor, side) {
      if (side === 'left') a *= factor;
      else b *= factor;
      updateDisplay(a, b);
      playSound('click');
  }
  ```

### 枚举法流程演示
- **Canvas 绘制**：显示 $i$ 和 $\frac{x_0 y_0}{i}$ 的枚举过程，高亮满足条件的对。
- **交互控制**：滑动条调节枚举速度，单步执行观察 `gcd` 计算。
- **代码片段**（伪代码）：
  ```javascript
  function step() {
      i++;
      if (i > sqrtN) return;
      if (n % i === 0 && gcd(i, n/i) === x0) {
          highlightPair(i, n/i);
          ans += (i === n/i) ? 1 : 2;
      }
  }
  ```

---

## 个人心得摘录
- **樱雪喵**：强调“交换对称性”，避免重复枚举。
- **sochiji**：通过素因子分配解释组合本质，避免暴力枚举。
- **zhangboju**：详细推导 $\gcd$ 与 $\operatorname{lcm}$ 的数学关系，适合基础学习。

---

## 核心代码实现（素因数分解法）
```cpp
#include <iostream>
int main() {
    int x, y;
    std::cin >> x >> y;
    if (y % x != 0) {
        std::cout << 0;
        return 0;
    }
    int q = y / x, cnt = 0;
    for (int d = 2; d * d <= q; d++) {
        if (q % d == 0) {
            cnt++;
            while (q % d == 0) q /= d;
        }
    }
    if (q > 1) cnt++;
    std::cout << (1 << cnt);
    return 0;
}
```

---
处理用时：147.89秒
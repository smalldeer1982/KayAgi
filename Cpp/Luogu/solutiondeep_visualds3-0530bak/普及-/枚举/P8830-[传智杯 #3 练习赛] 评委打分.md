# 题目信息

# [传智杯 #3 练习赛] 评委打分

## 题目描述

小 A 参加一个综艺节目。一共有 $n(3 \le n \le 10^6)$ 名评委参与打分（分数范围是 0 到 100 的整数），每个评委依次亮出自己的得分。

为了节目效果，要求从第三个评委开始，每当第 $i$ 个评委给出打分后，立刻计算出出这个选手在前 $i$ 名评委的打分中，去掉一个最高分和一个最低分，剩下 $i-2$ 个评委的平均分，保留 $2$ 位小数。

## 样例 #1

### 输入

```
6
11 45 14 19 19 81```

### 输出

```
14.00
16.50
17.33
24.25```

# AI分析结果



### 【唯一算法分类】  
无算法分类  

---

### 【综合分析与结论】  
**核心思路**：实时维护当前所有分数的总和、最大值和最小值。每当新分数加入时，更新这三个变量，并计算去掉最高和最低后的平均值。  
**难点**：高效维护极值以避免O(n²)时间复杂度。通过动态比较新分数与当前极值，确保每次更新为O(1)操作。  
**可视化设计**：  
- **动画流程**：用柱状图动态展示评委分数，高亮当前最大值（红色）和最小值（蓝色）。添加新分数时，更新颜色并显示总和、极值变化。计算时，突出被去掉的极值柱，并在右侧显示结果。  
- **复古风格**：8位像素评委图标逐个出现，音效提示新评分。计算时播放“得分”音效，背景音乐循环8位风格旋律。  

---

### 【题解清单 (≥4星)】  
1. **动态维护极值法（5星）**  
   - **亮点**：O(n)时间复杂度，无需存储所有分数，代码简洁高效。  
   - **关键代码**：  
     ```cpp  
     sum += x;  
     max_val = max(max_val, x);  
     min_val = min(min_val, x);  
     avg = (sum - max_val - min_val) / (i-2);  
     ```  

---

### 【最优思路提炼】  
- **关键技巧**：仅维护总和、最大值和最小值，避免遍历。  
- **优化点**：空间复杂度O(1)，适合大数据量。  

---

### 【同类题型与套路】  
- **滑动窗口极值**：用单调队列维护窗口内极值（如LeetCode 239）。  
- **数据流中位数**：双堆维护动态中位数（如LeetCode 295）。  

---

### 【推荐题目】  
1. [洛谷 P1090](https://www.luogu.com.cn/problem/P1090)：合并果子（堆维护最小值）  
2. [洛谷 P1886](https://www.luogu.com.cn/problem/P1886)：滑动窗口（单调队列）  
3. [洛谷 P3871](https://www.luogu.com.cn/problem/P3871)：动态中位数（双堆）  

---

### 【代码实现】  
```cpp  
#include <iostream>  
#include <iomanip>  
using namespace std;  

int main() {  
    ios::sync_with_stdio(false);  
    cin.tie(nullptr);  
    int n, x;  
    cin >> n;  
    cin >> x;  
    int sum = x, max_val = x, min_val = x;  
    cin >> x;  
    sum += x;  
    max_val = max(max_val, x);  
    min_val = min(min_val, x);  
    for (int i = 3; i <= n; ++i) {  
        cin >> x;  
        sum += x;  
        max_val = max(max_val, x);  
        min_val = min(min_val, x);  
        if (i >= 3) {  
            double avg = (sum - max_val - min_val) * 1.0 / (i - 2);  
            cout << fixed << setprecision(2) << avg << '\n';  
        }  
    }  
    return 0;  
}  
```  

---

### 【可视化设计要点】  
- **像素动画**：Canvas绘制评委队列，新评委以像素方块弹出，极值高亮。  
- **音效触发**：新评分（“哔”声），计算完成（“叮咚”声）。  
- **交互面板**：暂停/继续按钮，调速滑块，自动播放模式。  
- **AI自动演示**：按固定时间间隔逐步添加评委，模拟实时打分。

---
处理用时：137.89秒
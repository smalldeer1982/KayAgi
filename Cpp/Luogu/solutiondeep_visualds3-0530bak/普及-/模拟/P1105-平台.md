# 题目信息

# 平台

## 题目描述

空间中有一些平台。给出每个平台的位置，请你计算从每一个平台的边缘落下之后会落到哪一个平台上。

注意，如果某两个平台的某个两边缘横坐标相同，物体从上面那个平台落下之后将不会落在下面那个平台上（即平台的范围是一个开区间，不包含端点）。平台**可能会重叠**。

从平台下落时视作从平台下方开始下落，也就是说不会落到高度相同的平台上。**如果有两个平台的高度相同且都可以被落到的话，那么会落到编号靠前的那个平台。**

## 说明/提示

![](https://cdn.luogu.com.cn/upload/image_hosting/qeknowf7.png)

## 样例 #1

### 输入

```
5
2 0 2
4 1 3
3 1 3
5 3 4
1 1 5
```

### 输出

```
0 5
1 5
1 5
5 5
0 0
```

# AI分析结果



### 算法分类
无特定算法分类（暴力枚举 + 排序优化）

---

### 核心思路与难点解析
**题目核心**：对每个平台的左、右边缘，找到下方最近的平台（高度较低且区间包含边缘，若有多个同高度则选编号小的）。

**关键难点**：
1. **重叠平台处理**：平台可能重叠，需正确判断区间包含关系（开区间）。
2. **同高度平台优先级**：高度相同时选编号更小的平台。
3. **暴力枚举优化**：通过排序减少无效遍历。

**算法要点**：
1. **预处理排序**：按高度降序排序，同高度按编号升序排列。
2. **遍历顺序优化**：排序后，对每个平台只检查后续（高度更低或同高但编号更大）的平台，找到第一个符合条件的即可终止遍历。
3. **区间判断**：检查目标平台的区间是否包含当前平台边缘（左闭右开）。

---

### 题解评分（≥4星）
1. **JamlainHamstone（5星）**  
   - 正确排序（高度降序 + 同高编号升序），遍历时找到第一个符合条件的即终止，代码简洁高效。  
   - 关键代码：
     ```cpp
     bool cmp(node a, node b) {
         if (a.h != b.h) return a.h > b.h;
         return a.id < b.id; // 同高时编号小的优先
     }
     ```
2. **ysner（5星）**  
   - 类似思路，排序后遍历，正确处理同高平台，代码可读性强。  
   - 关键优化：一旦找到左右边缘的答案即终止遍历，减少循环次数。
3. **Drifterming（4星）**  
   - 正确排序并处理同高情况，但代码实现稍显复杂，仍保持高效性。

---

### 最优思路提炼
1. **排序预处理**：按高度降序和同高编号升序排序，确保后续遍历时优先找到正确平台。
2. **单次遍历优化**：对每个平台，只需遍历后续平台，找到第一个满足条件的即记录结果并终止。
3. **区间条件判断**：使用开区间判断 `(j.l < x && j.r > x)`。

**示例代码（JamlainHamstone）**：
```cpp
struct node { int h, l, r, id; };
bool cmp(node a, node b) {
    return a.h > b.h || (a.h == b.h && a.id < b.id);
}

for (int i = 1; i <= n; i++) {
    for (int j = i + 1; j <= n; j++) {
        if (s[j].l < s[i].l && s[j].r > s[i].l) {
            ans[s[i].id].lans = s[j].id;
            break; // 找到第一个符合条件的即终止
        }
    }
    // 类似处理右边缘
}
```

---

### 同类题目推荐
1. **P1902 刺杀大使**（二维区间覆盖问题）  
2. **P2872 建路**（区间选择与优先级判断）  
3. **P2280 激光炸弹**（二维前缀和与范围覆盖）

---

### 算法可视化设计
**动画方案**：
1. **像素风格渲染**：用不同颜色方块表示平台，高度映射为垂直位置，边缘坐标水平排列。
2. **下落过程演示**：高亮当前平台边缘，向下发射射线，逐个检查后续平台是否接住，命中时播放音效。
3. **自动步进控制**：允许调节遍历速度，单步观察每个平台的判断过程。

**复古游戏化效果**：
- **8-bit 音效**：命中时播放“叮”声，无命中播放低沉音效。
- **Canvas 动画**：平台用色块表示，当前操作平台边缘高亮闪烁，命中平台标记为绿色。
- **自动演示模式**：按排序顺序自动遍历所有平台，展示下落结果。

---

### 总结
本题通过预处理排序优化暴力枚举，确保正确性和效率。关键点在于排序规则和遍历终止条件，处理了同高度平台的优先级问题。可视化设计可直观展示平台层次和下落逻辑，帮助理解算法流程。

---
处理用时：153.93秒
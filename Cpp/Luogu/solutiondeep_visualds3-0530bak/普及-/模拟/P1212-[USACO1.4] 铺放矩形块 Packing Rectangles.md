# 题目信息

# [USACO1.4] 铺放矩形块 Packing Rectangles

## 题目描述

给定 $4$ 个矩形块，找出一个最小的封闭矩形将这 $4$ 个矩形块放入，但不得相互重叠。所谓最小矩形指该矩形面积最小。

![](https://cdn.luogu.com.cn/upload/image_hosting/gu39gbyb.png)

$4$ 个矩形块中任一个矩形的边都与封闭矩形的边相平行，上图显示出了铺放 $4$ 个矩形块的 $6$ 种方案。  

这 $6$ 种方案是唯一可能的基本铺放方案。因为其它方案能由基本方案通过旋转和镜像反射得到。

可能存在满足条件且有着同样面积的各种不同的封闭矩形，你应该输出所有这些封闭矩形的边长。



## 说明/提示

【数据范围】  
对于 $100\%$ 的数据，输入的所有数在 $[1,50]$ 内。

题目翻译来自NOCOW。

USACO Training Section 1.4


## 样例 #1

### 输入

```
1 2
2 3
3 4
4 5
```

### 输出

```
40
4 10
5 8
```

# AI分析结果



**唯一算法分类**  
枚举（暴力搜索）

---

**综合分析与结论**  

**核心思路**：题目要求枚举所有可能的矩形排列方式（包括旋转）和 6 种基本布局模式，计算每种情况下的封闭矩形面积，取最小值。关键难点在于：  
1. 如何生成所有排列组合（4! * 2^4 = 384 种情况）  
2. 正确计算 6 种布局模式的长宽（尤其是第 6 种的分支判断）  
3. 避免重复计算和输出  

**实现要点**：  
- 使用 DFS 或 `next_permutation` 生成矩形排列  
- 对每个矩形尝试两种方向（交换长宽）  
- 对每种排列应用 6 种布局公式计算面积  
- 用集合/数组记录最小面积对应的边长  

**可视化设计**：  
- **像素动画**：用不同颜色方块表示 4 个矩形（如红/蓝/绿/黄），动态展示布局过程  
- **高亮步骤**：  
  - 当前操作的矩形（闪烁边框）  
  - 布局公式对应的长宽计算区域（黄色高亮）  
  - 新最小面积出现时全屏绿色闪烁提示  
- **音效**：  
  - 排列切换时播放 "blip" 音效  
  - 发现更小面积时播放 "coin" 音效  
- **复古 UI**：  
  - 8-bit 字体显示当前排列和面积  
  - 控制面板含 "自动播放" 和单步调试按钮  

---

**题解评分 ≥4星**  

1. **七喜（⭐⭐⭐⭐）**  
   - **亮点**：DFS 生成排列逻辑清晰，check() 函数分情况注释  
   - **核心代码**：  
     ```cpp
     void check() {
       // 计算6种布局的长宽并调用alter()
     }
     void dfs(int yj) {
       // 生成排列并尝试旋转
     }
     ```

2. **Chiesl（⭐⭐⭐⭐）**  
   - **亮点**：详细注释每种布局的数学推导，结构体排序去重  
   - **核心代码**：  
     ```cpp
     void f(int s1,int s2,int s3,int s4) {
       // 分6种情况调用answer()
     }
     ```

3. **ChampionCyan（⭐⭐⭐⭐）**  
   - **亮点**：模块化代码（part1~part6），next_permutation 生成排列  
   - **核心代码**：  
     ```cpp
     inline void part6() {
       // 复杂分支判断
     }
     inline void work(int depth) {
       // 排列+旋转组合
     }
     ```

---

**最优思路与技巧**  

1. **排列生成**：  
   - 使用 `next_permutation(order, order+4)` 生成 4 个矩形的排列顺序  
   - 对每个矩形尝试两种方向（长宽交换）  

2. **布局公式**：  
   - **关键推导**：对题目图示的 6 种布局建立数学公式（如并排、叠放）  
   - **第六种布局**：根据矩形高度关系分 5 种分支计算宽度  

3. **去重优化**：  
   - 用 `set<pair<int,int>>` 记录已输出的边长组合  
   - 最终按升序输出时跳过重复项  

---

**相似题目推荐**  
1. [P1092 虫食算](https://www.luogu.com.cn/problem/P1092) - 枚举字母排列  
2. [P1036 选数](https://www.luogu.com.cn/problem/P1036) - 组合数枚举  
3. [P1019 单词接龙](https://www.luogu.com.cn/problem/P1019) - 暴力搜索字符串拼接  

---

**可视化代码片段（Canvas 演示）**  
```javascript
// 绘制第6种布局（复古像素风格）
function drawCase6(rects) {
  ctx.fillStyle = "#FF0000"; // 红色方块
  drawRect(rects[0].x, 0, rects[0].w, rects[0].h);
  
  ctx.fillStyle = "#00FF00"; // 绿色方块
  drawRect(0, rects[0].h, rects[1].w, rects[1].h);
  
  // 动态绘制条件分支线
  if (h3 >= h2 + h4) {
    ctx.strokeStyle = "#FFFF00"; // 黄色高亮
    ctx.beginPath();
    ctx.moveTo(rects[3].x, 0);
    ctx.lineTo(rects[3].x + 50, 50); // 箭头指示
    ctx.stroke();
  }
}
```

**音效触发逻辑**  
```javascript
// 发现新最小面积时
if (newArea < currentMin) {
  playSound('coin.wav'); // 8-bit 硬币音效
  currentMin = newArea;
}
```

---

**总结**  
本题通过暴力枚举所有可能的矩形排列和布局组合，结合精确的几何公式计算，最终筛选出最优解。可视化时可重点展示排列生成过程和布局公式的动态推导，复古像素风格和音效能有效提升理解趣味性。

---
处理用时：72.40秒
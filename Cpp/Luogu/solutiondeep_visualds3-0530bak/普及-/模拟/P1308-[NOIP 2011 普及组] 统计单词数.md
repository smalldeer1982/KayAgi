# 题目信息

# [NOIP 2011 普及组] 统计单词数

## 题目描述

一般的文本编辑器都有查找单词的功能，该功能可以快速定位特定单词在文章中的位置，有的还能统计出特定单词在文章中出现的次数。

现在，请你编程实现这一功能，具体要求是：给定一个单词，请你输出它在给定的文章中出现的次数和第一次出现的位置。注意：匹配单词时，不区分大小写，但要求完全匹配，即给定单词必须与文章中的某一独立单词在不区分大小写的情况下完全相同（参见样例 1），如果给定单词仅是文章中某一单词的一部分则不算匹配（参见样例 2）。


## 说明/提示

数据范围

$1\leq $ 第一行单词长度 $\leq10$。

$1\leq $ 文章长度 $\leq10^6$。

noip2011 普及组第 2 题


## 样例 #1

### 输入

```
To
to be or not to be is a question
```

### 输出

```
2 0

```

## 样例 #2

### 输入

```
to
Did the Ottoman Empire lose its power at that time```

### 输出

```
-1```

# AI分析结果



# 算法分类
字符串处理、模拟

# 题解思路与难点分析

### 核心算法流程
1. **统一大小写**：将所有字符转为小写/大写消除大小写干扰
2. **单词边界识别**：通过空格或字符串起止位置确定独立单词
3. **模式匹配**：验证目标单词是否完全匹配当前单词
4. **位置计算**：记录首次匹配的起始字符索引

### 解决难点
- **边界条件处理**：通过前后添加空格将单词匹配统一为" word "形式（如Jelly_Goat的预处理方案）
- **内存优化**：逐个字符扫描代替分割存储（如suxy15的指针法），应对1e6级数据量
- **输入处理**：正确处理带前导/后导空格的输入（使用getchar吸收换行符）

# 高分题解推荐（≥4星）

## 1. suxy15（★★★★☆）
**亮点**：  
- 指针同步扫描算法，O(n)时间复杂度
- 动态维护单词起止状态，无需预处理字符串
- 内存占用仅线性增长，适合大数据量
**核心代码**：
```c
for(i=0,j=0; s[i]!='\0'; ++i){
    if((i==0 || s[i-1]==' ' || j) && val(s[i])==val(w[j]) && ++j>-1){
        if(w[j]=='\0' && (s[i+1]=='\0' || s[i+1]==' ')){
            if(first==-1) first = i+1-j;
            count++;
        }
    }else j=0;
}
```

## 2. Jelly_Goat（★★★★★）
**亮点**：
- 预处理添加空格统一匹配条件
- 利用string::find函数简化逻辑
- Python解法提供跨语言参考
**关键优化**：
```cpp
s = ' '+s+' '; // 统一匹配条件
pos = s.find(' '+key+' ');
```

## 3. Eason_lyx（★★★★☆）
**亮点**：
- 动态构建单词，直观易理解
- 最后补空格处理尾单词
- 代码简洁，适合教学
**核心逻辑**：
```cpp
s += ' '; // 关键补空格操作
for(int i=0;i<s.size();i++){
    if(s[i]==' '){
        if(dan==ci) // 完整单词匹配判断
        dan = "";
    } else dan += s[i];
}
```

# 最优思路提炼
1. **空格包装法**：在目标词和文章前后添加空格，将独立词匹配转化为子串匹配问题
2. **滑动窗口法**：双指针动态维护匹配进度，遇到边界重置指针
3. **状态机思想**：通过j>0状态延续匹配，避免重复判断前导空格

# 相似题目推荐
1. P1012 [NOIP1998 提高组] 拼数（字符串特殊排序）
2. P1598 [NOI2001] 垂直柱状图（单词频率统计）
3. P1071 [NOIP2009 提高组] 潜伏者（字符串模式映射）

# 算法可视化设计
**动画方案**：  
1. **双指针扫描**：用红色/蓝色标记文章指针i和单词指针j
2. **状态标记**：匹配成功时高亮绿色，失败时闪烁红色
3. **边界提示**：用黄色高亮单词起止空格
4. **计数面板**：实时显示当前匹配次数和首位置

**复古像素风格**：  
- 8-bit风格字符矩阵，ASCII码表示空格和字母
- 音效设计：
  - 正确匹配：NES风格8-bit音效
  - 指针移动：电子"滴"声
  - 重置指针：短促爆破音

**交互功能**：
- 速度滑块控制扫描速度（10ms-1s）
- 单步执行按钮观察指针变化
- 错误匹配时显示原因提示框

# 核心代码实现（空格包装法）
```cpp
#include <iostream>
using namespace std;

int main() {
    string word, text;
    getline(cin, word);
    getline(cin, text);
    
    // 统一转小写
    for(char &c : word) c = tolower(c);
    for(char &c : text) c = tolower(c);
    
    // 添加边界空格
    word = ' ' + word + ' ';
    text = ' ' + text + ' ';
    
    int cnt = 0, pos = -1, idx = 0;
    while((idx = text.find(word, idx)) != string::npos){
        if(pos == -1) pos = idx;
        cnt++;
        idx++; // 避免重叠匹配
    }
    
    if(cnt) cout << cnt << ' ' << pos;
    else cout << -1;
    return 0;
}
```

---
处理用时：86.76秒
# 题目信息

# 烦恼的高考志愿

## 题目背景

计算机竞赛小组的神牛 V 神终于结束了高考，然而作为班长的他还不能闲下来，班主任老 t 给了他一个艰巨的任务：帮同学找出最合理的大学填报方案。可是 v 神太忙了，身后还有一群小姑娘等着和他约会，于是他想到了同为计算机竞赛小组的你，请你帮他完成这个艰巨的任务。


## 题目描述

现有 $m$ 所学校，每所学校预计分数线是 $a_i$。有 $n$ 位学生，估分分别为 $b_i$。

根据 $n$ 位学生的估分情况，分别给每位学生推荐一所学校，要求学校的预计分数线和学生的估分相差最小（可高可低，毕竟是估分嘛），这个最小值为不满意度。求所有学生不满意度和的最小值。


## 说明/提示

数据范围：

对于 $30\%$ 的数据，$1\leq n,m\leq1000$，估分和录取线 $\leq10000$；

对于 $100\%$ 的数据，$1\leq n,m\leq100000$，估分和录取线 $\leq 1000000$ 且均为非负整数。


## 样例 #1

### 输入

```
4 3
513 598 567 689
500 600 550
```

### 输出

```
32```

# AI分析结果



## 唯一算法分类  
二分查找

---

## 综合分析与结论  
**核心思路**：将学校分数线排序后，对每个学生分数使用二分查找确定最近的两个候选分数线，取差值最小者累加。  
**关键难点**：  
1. 正确处理边界条件（学生分数低于最低线/高于最高线）  
2. 高效定位学生分数在有序数组中的插入位置  
**解决方案**：  
- 预处理学校数组排序（O(m log m)）  
- 对每个学生使用二分查找确定插入点（O(log m)）  
- 比较插入点前后的两个值取最小差值（O(1)）  

**可视化设计**：  
1. **动画流程**：  
   - 用绿色高亮当前二分查找范围 [l, r]  
   - 黄色标记中间点 mid 的比较过程  
   - 红色标记最终确定的插入位置  
   - 显示相邻两个候选分数线的差值计算过程  
2. **复古风格**：  
   - 8-bit 音效：  
     - 按键音效（调整边界时）  
     - 成功音效（找到插入点时）  
   - 像素风格数组展示，用不同颜色块表示学校分数段  
   - Canvas 动态绘制二分搜索范围收缩过程  

---

## 题解清单（≥4星）  
1. **作者：06ray（5星）**  
   - 完整实现二分流程，处理了边界特判  
   - 代码可读性强，时间复杂度稳定 O(m log m + n log m)  
   - 核心亮点：通过 l=0, r=n+1 巧妙处理边界  

2. **作者：Viston（4星）**  
   - 使用 STL 的 lower_bound 简化代码  
   - 正确处理边界返回值的特殊场景  
   - 代码简洁但缺少详细注释  

3. **作者：AK_黄铮_IMO（4星）**  
   - 结合 lower_bound 与边界检查  
   - 使用 long long 避免溢出问题  
   - 代码结构清晰，适合竞赛快速实现  

---

## 核心代码实现  
```cpp
#include <algorithm>
#include <iostream>
using namespace std;

int schools[100010], students[100010];

int main() {
    int m, n;
    cin >> m >> n;
    for(int i=0; i<m; i++) cin >> schools[i];
    sort(schools, schools+m);
    
    long long ans = 0;
    while(n--) {
        int score, pos;
        cin >> score;
        pos = lower_bound(schools, schools+m, score) - schools;
        
        int diff = 1e9;
        if(pos < m) diff = min(diff, schools[pos] - score);
        if(pos > 0) diff = min(diff, score - schools[pos-1]);
        
        ans += diff;
    }
    cout << ans;
    return 0;
}
```

---

## 相似题目推荐  
1. **P1873 砍树** - 二分求最大高度  
2. **P1102 A-B 数对** - 二分查找差值组合  
3. **P2440 木材加工** - 二分求最大长度  

---

## 可视化算法演示（伪代码逻辑）  
```javascript
// Canvas绘制核心逻辑
function drawBinarySearch(score, schools) {
    let l=0, r=schools.length-1;
    while(l <= r) {
        let mid = Math.floor((l+r)/2);
        highlight(mid, 'yellow'); // 高亮中间点
        if(schools[mid] < score) {
            l = mid + 1;
            highlightRange(l, r, 'green'); // 更新左边界
        } else {
            r = mid - 1;
            highlightRange(l, r, 'blue'); // 更新右边界
        }
    }
    // 最终比较l和l-1位置
    showDiff(score, schools[l], schools[l-1]); 
}
```

---

## 个人心得摘录  
"特判边界情况是本题的关键，最初没处理分数低于所有学校的情况，导致只能得70分。通过将初始边界设为 l=0, r=n+1 巧妙规避了数组越界问题。" —— 06ray题解调试经验  

---

## 复古游戏化设计要素  
1. **8-bit音效**：  
   - 搜索时播放短促"滴"声  
   - 找到结果时播放经典FC过关音效  
2. **像素动画**：  
   - 学校分数用不同高度像素柱表示  
   - 学生分数显示为移动的像素小人  
3. **自动演示模式**：  
   - 按A键自动运行所有学生匹配过程  
   - 显示实时累计不满意度和匹配轨迹

---
处理用时：83.87秒
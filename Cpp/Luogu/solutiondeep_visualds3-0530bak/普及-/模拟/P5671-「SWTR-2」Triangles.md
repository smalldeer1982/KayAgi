# 题目信息

# 「SWTR-2」Triangles

## 题目背景

小 $\mathrm{A}$ 在学数学。

## 题目描述

他遇到了两个谜题：

- 在一个平面内，**线段** $DE$ 与**直线** $FG$ 相交于点 $O$，已知 $\angle DOF=x^{\circ}$，请你在**直线** $FG$ 上找一点 $P$，使得 $\triangle DOP$ 为**等腰**三角形，求 $\angle D$ 的度数。（如果答案不是整数，则保留 $1$ 位小数）

- 已知一个**直角三角形**的两条边分别为 $m,n$，求第三条边的长度（保留 $5$ 位小数）。

![](https://cdn.luogu.com.cn/upload/image_hosting/qjle5b4c.png)

写一个程序求出问题的答案。

## 说明/提示

---

### 样例说明

问题 $1$：

- 当点 $P$ 在点 $O$ 左边时，形成的 $\triangle DOP$ 为等边三角形，$\angle D=60^{\circ}$。

- 当点 $P$ 在点 $O$ 右边时，形成的 $\triangle DOP$ 中，$\angle DOP=180^{\circ}-60^{\circ}=120^{\circ}$，为顶角，$\angle D=(180^{\circ}-120^{\circ})/2=30^{\circ}$。

问题 $2$：

第三条边为斜边，长度为 $\sqrt{1^2+1^2}=\sqrt{2}=1.41421\dots$。

---

### 数据范围与约定

$x<90,m\leq n\leq 10^9$。

---

### 出题组提示：

**方法千万条，审题第一条，多解不考虑，爆零两行泪。**

## 样例 #1

### 输入

```
60 1 1```

### 输出

```
30 60
1.41421```

# AI分析结果



**唯一算法分类**：无算法分类

---

### **题解思路、算法要点与解决难点**

**第一问**：  
- **核心思路**：构造等腰三角形的三种情况（两圆一线模型），推导出四个可能的解：`x, x/2, 180-2x, (180-x)/2`，排序去重后输出。
- **解决难点**：  
  1. 几何模型的理解（两圆一线构造等腰三角形）  
  2. 角度计算需考虑内外角关系（如补角、顶角/底角）  
  3. 去重与排序逻辑（浮点数精度处理）

**第二问**：  
- **核心思路**：勾股定理分两种情况：  
  1. 第三边为直角边：`sqrt(n² - m²)`  
  2. 第三边为斜边：`sqrt(n² + m²)`  
- **解决难点**：  
  1. 处理 `m = n` 的特殊情况（此时仅斜边有效）  
  2. 大数运算防溢出（需用 `long long`）

---

### **题解评分 (≥4星)**

| 作者          | 星级 | 关键亮点                                                                 |
|---------------|------|--------------------------------------------------------------------------|
| Alex_Wei      | ★★★★☆ | 代码简洁，公式推导直接，但未详细解释几何模型                              |
| hensier       | ★★★★★ | 完整图解两圆一线模型，代码处理浮点精度严谨，附带调试经验                   |
| 吾皇          | ★★★★☆ | 使用 `set` 自动去重，数学推导清晰，但输出格式处理稍显复杂                 |

---

### **最优思路或技巧提炼**

1. **几何构造法**（第一问）：  
   - 两圆一线模型：通过画圆和垂直平分线确定等腰三角形的所有可能点。  
   - 角度计算模板：四种角度公式覆盖所有构造情况。

2. **勾股分类法**（第二问）：  
   - 分斜边/直角边两种情况，注意 `m = n` 时仅输出斜边。

3. **代码优化技巧**：  
   - 浮点数去重：利用 `set` 或排序后相邻元素比较。  
   - 大数防溢出：使用 `1ll * m * m` 强制转为长整型。

---

### **同类型题或类似算法套路**

- **几何构造题**：如洛谷 P1359 平面几何（等腰三角形构造）  
- **勾股定理变形**：如 LeetCode 367. Valid Perfect Square（平方数判断）  
- **浮点精度处理**：如 Codeforces 1A Theatre Square（大数运算与精度控制）

---

### **推荐洛谷题目**

1. **P5725** 求三角形面积（几何计算）  
2. **P1024** 一元三次方程求解（浮点数去重）  
3. **P2249** 查找（二分法处理有序序列）

---

### **可视化与算法演示**

**第一问动画方案**：  
1. **Canvas 绘制**：  
   - 红：以 `D` 为圆心画圆，与直线交点高亮为 `P1, P2`  
   - 蓝：以 `O` 为圆心画圆，与直线交点高亮为 `P3`  
   - 绿：垂直平分线交点高亮为 `P4`  
2. **步进控制**：  
   - 点击按钮逐步显示圆、线、角度计算结果  
   - 速度调节：0.5x/1x/2x 三种速度档位  

**第二问动画方案**：  
1. **像素风格演示**：  
   - 左侧：直角三角形初始状态（两直角边为像素块）  
   - 右侧：第三边计算过程（斜边/直角边用不同颜色闪烁）  
2. **音效提示**：  
   - 计算完成时播放 8-bit 音效（成功：↑↑音阶，失败：↓↓音阶）  

---

### **代码核心实现**

**第一问关键代码**（去重排序）：
```cpp
vector<double> ans = {x, x/2, 180-2*x, (180-x)/2};
sort(ans.begin(), ans.end());
auto last = unique(ans.begin(), ans.end(), [](double a, double b) {
    return fabs(a - b) < 1e-6; // 浮点去重阈值
});
ans.erase(last, ans.end());
```

**第二问关键代码**（勾股计算）：
```cpp
double sq1 = sqrt(1ll * n * n + 1ll * m * m);
double sq2 = (m != n) ? sqrt(1ll * n * n - 1ll * m * m) : 0;
if (sq2 > 1e-9) printf("%.5lf ", sq2); // 排除浮点零误差
printf("%.5lf", sq1);
```

---

### **个人心得摘录**

> "浮点去重必须自定义比较函数，直接 `==` 会因精度问题漏解。我调试时发现输出多了一个 0.0，后来发现是未过滤负角。" —— hensier  
> "两圆一线模型初中老师讲过，但没想到 OI 题能用这个套路，画图后豁然开朗。" —— 吾皇  

---

### **复古游戏化动画效果（JS 伪代码）**

```javascript
// 初始化 Canvas
const ctx = canvas.getContext('2d');
ctx.fillStyle = '#8B00FF'; // FC 紫色调

// 绘制等腰三角形构造过程
function drawCircle(center, radius, color) {
    ctx.strokeStyle = color;
    ctx.beginPath();
    ctx.arc(center.x, center.y, radius, 0, 2 * Math.PI);
    ctx.stroke();
}

// 音效触发（Web Audio API）
function playSound(note) {
    const osc = audioCtx.createOscillator();
    osc.frequency.setValueAtTime(440 * Math.pow(2, note/12), audioCtx.currentTime);
    osc.connect(audioCtx.destination);
    osc.start(); osc.stop(audioCtx.currentTime + 0.1);
}
```

---
处理用时：75.83秒
# 题目信息

# [蓝桥杯 2020 国 C] 天干地支

## 题目描述

古代中国使用天干地支来记录当前的年份。

天干一共有十个，分别为：甲（jiǎ）、乙（yǐ）、丙（bǐng）、丁（dīng）、戊
（wù）、己（jǐ）、庚（gēng）、辛（xīn）、壬（rén）、癸（guǐ）。

地支一共有十二个，分别为：子（zǐ）、丑（chǒu）、寅（yín）、卯（mǎo）、辰（chén）、巳（sì）、午（wǔ）、未（wèi）、申（shēn）、酉（yǒu）、戌（xū）、亥（hài）。

将天干和地支连起来，就组成了一个天干地支的年份，例如：甲子。2020 年是庚子年。

每过一年，天干和地支都会移动到下一个。例如 2021 年是辛丑年。

每过 60 年，天干会循环 6 轮，地支会循环 5 轮，所以天干地支纪年每 60年轮回一次。例如 1900 年，1960 年，2020 年都是庚子年。

给定一个公元纪年的年份，请输出这一年的天干地支年份。

## 说明/提示

对于所有评测用例，输入的公元年份为不超过 $9999$ 的正整数。

蓝桥杯 2020 年国赛 C 组 F 题。

## 样例 #1

### 输入

```
2020```

### 输出

```
gengzi```

# AI分析结果



## 算法分类
**模运算与周期性处理**

---

## 综合分析与结论
**核心思路**：天干地支以固定周期循环（10年与12年），利用模运算快速定位当前年份在周期中的位置。关键在于确定基准年并正确计算偏移量。

**算法流程**：
1. **基准年选择**：如2020年（庚子年）或2044年（甲子年）。
2. **计算偏移**：通过数学公式将任意年份转换为基准年附近的等效年份。
3. **模运算取索引**：天干 = 偏移量 % 10，地支 = 偏移量 % 12。
4. **数组映射**：预定义天干地支数组，直接通过索引输出结果。

**可视化设计**：
- **动画流程**：输入年份 → 转换为基准等效年份 → 高亮模运算步骤 → 显示索引对应的天干地支。
- **像素风格**：用网格展示天干地支数组，当前索引以闪烁方块标记，背景音乐随正确结果播放胜利音效。
- **交互面板**：可调节基准年参数，观察不同基准下的计算过程。

---

## 题解评分（≥4星）
1. **andyli（5星）**  
   - 亮点：数学推导优雅，时间复杂度O(1)，代码简洁。  
   - 关键公式：`p = (n + 56) % 60`，直接定位周期位置。

2. **fengziyi（5星）**  
   - 亮点：数组设计巧妙，直接利用2020基准年，代码极简。  
   - 关键技巧：天干数组以“geng”开头，匹配2020年的模10结果。

3. **rainygame（4星）**  
   - 亮点：数学与暴力双解法，处理负余数的技巧值得学习。  
   - 关键代码：负数时用`10 - y%10`调整索引，确保正确性。

---

## 最优思路提炼
**基准年法**（以2020年为例）：
1. **确定基准索引**：2020年天干索引6（庚），地支索引0（子）。
2. **计算年份差**：`delta = n - 2020`。
3. **调整余数**：天干索引 = `(6 + delta) % 10`，地支索引 = `(0 + delta) % 12`。
4. **处理负数**：若`delta < 0`，转换为等效正余数，如`(delta % 10 + 10) % 10`。

**代码片段**：
```cpp
// 天干数组（2020年对应索引0）
const string tg[] = {"geng", "xin", "ren", "gui", "jia", "yi", "bing", "ding", "wu", "ji"};
// 地支数组（2020年对应索引4）
const string dz[] = {"zi", "chou", "yin", "mao", "chen", "si", "wu", "wei", "shen", "you", "xu", "hai"};

int delta = n - 2020;
int t_idx = (delta % 10 + 10) % 10; // 处理负余数
int d_idx = (delta % 12 + 12) % 12;
cout << tg[t_idx] << dz[d_idx];
```

---

## 类似题目推荐
1. **P1202 [USACO1.1] 黑色星期五**  
   - 计算每月13号的星期分布，涉及日期模运算。

2. **P1055 [NOIP2008 普及组] ISBN号码**  
   - 校验码计算与字符映射，类似索引转换。

3. **P1014 [NOIP1999 普及组] Cantor表**  
   - 二维周期性排列问题，数学规律分析。

---

## 个人心得摘录
- **jiangyushen**：调试中发现循环边界问题，用户反馈修正天干数组顺序。  
- **rainygame**：数学法中负余数处理需谨慎，避免数组越界。

---

## 可视化代码片段（JS）
```javascript
// 天干地支像素动画
const tg = ["geng", "xin", "ren", "gui", "jia", "yi", "bing", "ding", "wu", "ji"];
const dz = ["zi", "chou", "yin", "mao", "chen", "si", "wu", "wei", "shen", "you", "xu", "hai"];

function animateYear(n) {
    let delta = n - 2020;
    let tIdx = (delta % 10 + 10) % 10;
    let dIdx = (delta % 12 + 12) % 12;
    
    // 高亮天干地支方块
    highlightBlock('tg', tIdx); 
    highlightBlock('dz', dIdx);
    playSound('success'); // 播放成功音效
}
```

---
处理用时：281.80秒
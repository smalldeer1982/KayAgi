# 题目信息

# 「MXOI Round 2」游戏

## 题目描述

小 C 和小 D 正在玩一款蒸蒸日上的游戏。

这款游戏共有 $3$ 种手牌：杀、闪、斩。他们的用途分别如下：

- 杀：对对方使用，对方需要使用一张**闪**，否则对方输掉游戏；**或**回应对方的**斩**；

- 闪：回应对方的**杀**；

- 斩：对对方使用，对方需要使用一张**杀**，否则对方输掉游戏。

玩家在每使用一张牌后，都需要弃掉该使用的牌。

从小 C 开始，每个回合依次属于小 C 和小 D。在玩家的回合内，该玩家可以出**任意**张**杀**和**斩**，对方需要做出对应的回应。当然，玩家也可以不出牌，直接进入对方的回合。

现在，小 C 共有 $c_1$ 张杀、$c_2$ 张闪、$c_3$ 张斩，小 D 共有 $d_1$ 张杀、$d_2$ 张闪、$d_3$ 张斩，**双方都知道对方的手牌**。你需要求出，双方在都进行最优策略的情况下，游戏的结果会如何。

## 说明/提示

#### 【样例解释 #1】

对于第一组数据，小 C 可以先出一张斩，并在小 D 回应一张杀后再出一张斩。此时小 D 的杀用完了，无法做出回应，输掉了游戏。

#### 【样例 #2】

见附加文件中的 `game/game2.in` 与 `game/game2.ans`。

#### 【数据范围】

对于 $100\%$ 的数据，$1 \le T \le 10^5$，$0 \le c_1,c_2,c_3,d_1,d_2,d_3 \le 10^9$。

|测试点编号|特殊性质|
|:---:|:---:|
|$1\sim3$|保证 $c_3=d_3=0$|
|$4\sim6$|保证 $c_1=d_2$ 且 $c_2=d_1$|
|$7\sim10$|无|

## 样例 #1

### 输入

```
3
3 1 4 1 5 9
1 1 4 5 1 4
5 2 1 2 6 3```

### 输出

```
C
D
E```

# AI分析结果



## 算法分类  
**博弈论（贪心策略）**

---

## 题解思路、算法要点与解决难点

### 核心思路
1. **胜负条件推导**  
   - 小 C 的秒杀条件：`c1 > d2`（杀超过对方闪）或 `c3 > d1`（斩超过对方杀）
   - 小 D 的秒杀条件：`d3 > c1`（斩超过对方杀）或 `d1 - c3 > c2`（剩余杀超过对方闪）

2. **最优策略**  
   - 小 C 优先用斩消耗小 D 的杀，保留杀应对对方斩。
   - 双方无法秒杀时，最终平局。

### 解决难点
- **贪心消耗顺序**：斩的优先级高于杀，因为斩能直接消耗对方的杀而不影响自己的杀。
- **剩余资源计算**：小 D 的杀需减去小 C 的斩（`d1 - c3`），确保后续判断正确性。

---

## 题解评分（≥4星）

### 1. Coffee_zzz（★★★★★）
- **亮点**：代码简洁，逻辑清晰，直接覆盖所有情况。
- **关键代码**：
  ```cpp
  if(c1>d2) puts("C");
  else if(c3>d1) puts("C");
  else if(d3>c1) puts("D");
  else if(d1-c3>c2) puts("D");
  else puts("E");
  ```

### 2. Dream__maker（★★★★☆）
- **亮点**：明确将胜负条件分层，但未处理 `d1 - c3` 可能为负的情况。
- **关键代码**：
  ```cpp
  if(c.x>d.y||c.z>d.x) cout<<"C"<<endl;
  else if(d.x>c.y+c.z||d.z>c.x) cout<<"D"<<endl;
  ```

### 3. 卷王（★★★★☆）
- **亮点**：分步骤模拟资源消耗，但代码中 `a1 -= c2` 可能存在逻辑错误。
- **关键代码**：
  ```cpp
  if(c1 > e || c3 > d) cout << "C";
  else if(d - c3 > b || f > a) cout << "D";
  ```

---

## 最优思路或技巧提炼
1. **优先级策略**：优先使用斩，因其能消耗对方关键资源（杀）而不影响自身防御。
2. **资源减法优化**：`d1 -= c3` 处理剩余杀，避免后续误判。
3. **条件覆盖**：所有分支需覆盖秒杀、消耗后秒杀、平局三种情况。

---

## 同类型题与算法套路
- **类似问题**：回合制资源消耗游戏，胜负由资源数量直接决定。
- **通用解法**：贪心消耗对方关键资源，剩余资源判断胜负。

---

## 推荐题目
1. [P2615 取石子游戏](https://www.luogu.com.cn/problem/P2615)  
2. [P1857 质数取石子](https://www.luogu.com.cn/problem/P1857)  
3. [P1515 石子游戏](https://www.luogu.com.cn/problem/P1515)  

---

## 个人心得摘录
- **关键验证**：测试 `d1 - c3` 为负时，小 D 的杀是否应视为 0。
- **样例启示**：小 C 连续出斩可耗尽对方杀，需确保代码正确处理此逻辑。

---

## 可视化与算法演示

### 核心算法流程
1. **初始化**：显示双方手牌数量（杀、闪、斩）。
2. **回合执行**：
   - **小 C 回合**：高亮斩和杀，若触发秒杀则结束。
   - **资源更新**：小 D 的杀减少 `c3`，显示红色减号动画。
   - **小 D 回合**：同理判断，剩余杀与闪对比。
3. **平局判定**：双方无法秒杀时显示握手图标。

### 复古游戏化设计
- **像素风格**：8-bit 卡牌图标，FC 音效（出牌“叮”，胜利“胜利旋律”）。
- **自动演示**：按空格单步执行，Enter 自动播放。
- **音效触发**：
  - 出斩：短促“咻”声。
  - 胜负：上扬音调或低沉失败音。

### 代码片段（Canvas 动画）
```javascript
// 绘制斩消耗过程
function drawSwordCut(ctx, d1, c3) {
    ctx.fillStyle = "#FF0000";
    ctx.fillText(`-${c3}`, x, y); // 红色减号动画
    animate(() => d1 -= c3);       // 数值递减
}
```

---

**总结**：通过贪心策略优先消耗关键资源，结合条件判断覆盖所有可能情况，代码简洁高效。可视化设计强化了回合逻辑与资源变化，适合教学演示。

---
处理用时：74.62秒
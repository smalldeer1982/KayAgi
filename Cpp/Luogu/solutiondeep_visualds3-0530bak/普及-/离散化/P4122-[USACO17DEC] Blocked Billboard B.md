# 题目信息

# [USACO17DEC] Blocked Billboard B

## 题目描述

在漫长的挤奶过程中，奶牛 Bessie 喜欢透过谷仓的窗户盯着街对面的两块巨大的矩形广告牌，上面分别写着“Farmer Alex 的美味苜蓿”和“Farmer Greg 的优质谷物”。广告牌上这两种奶牛饲料的图片对 Bessie 来说比她农场里的草看起来美味得多。

有一天，当 Bessie 正盯着窗外时，她惊讶地看到一辆巨大的矩形卡车停在街对面。卡车的侧面有一则广告，写着“Farmer Smith 的顶级牛排”，Bessie 不太理解这则广告，但她更担心的是卡车可能会挡住她最喜欢的两块广告牌的视线。

给定两块广告牌和卡车的位置，请计算两块广告牌仍然可见的总面积。卡车可能遮挡了其中一块、两块，或者没有遮挡任何一块广告牌。

## 说明/提示

在这个例子中，第一块广告牌有 $5$ 单位面积可见，第二块广告牌有 $12$ 单位面积可见。

题目来源：Brian Dean

## 样例 #1

### 输入

```
1 2 3 5
6 0 10 4
2 1 8 3```

### 输出

```
17```

# AI分析结果



---

### **唯一算法分类**  
**几何计算/矩形面积覆盖**

---

### **综合分析与结论**  

#### **核心思路**  
计算两个广告牌总面积，减去被卡车遮挡的相交区域面积。核心难点在于正确计算矩形间的相交面积。

#### **关键步骤**  
1. **总面积计算**：广告牌1面积 + 广告牌2面积  
2. **相交面积计算**：  
   - 水平重叠长度 = max(0, min(右边界1, 右边界2) - max(左边界1, 左边界2))  
   - 垂直重叠长度 = max(0, min(上边界1, 上边界2) - max(下边界1, 下边界2))  
   - 相交面积 = 水平重叠 × 垂直重叠  
3. **总可见面积**：总面积 - 与卡车的相交面积总和  

#### **可视化设计要点**  
- **像素网格绘制**：将坐标系映射到Canvas网格，广告牌用蓝色/绿色填充，卡车用红色覆盖  
- **动态遮挡演示**：  
  1. 先绘制两个广告牌  
  2. 卡车矩形从边缘滑入，覆盖部分变为半透明红色  
  3. 高亮显示被遮挡区域（闪烁红色边框）  
  4. 最终显示未被遮挡的彩色区域  
- **音效设计**：  
  - 覆盖时播放短促"滴"声  
  - 计算结果时播放8-bit胜利音效  

---

### **题解评分 ≥4星**  

#### **1. litianqi2529298200（5星）**  
**亮点**：  
- 数学方法计算相交面积（O(1)时间复杂度）  
- 结构体封装坐标，代码高度可读  
- 处理了卡车未覆盖广告牌的边界情况  

**核心代码**：  
```cpp
int intersect_area(Rect p, Rect q) {
    int x = max(0, min(p.x2, q.x2) - max(p.x1, q.x1));
    int y = max(0, min(p.y2, q.y2) - max(p.y1, q.y1));
    return x * y;
}
```

#### **2. Alex_Wei（4星）**  
**亮点**：  
- 直接模拟覆盖过程，直观易懂  
- 巧用坐标偏移处理负数  
- 实时统计面积，减少二次遍历  

**注意点**：  
```cpp
for(int y=a+1000; y<d+1000; y++) // 注意是 < 而不是 <=
```

#### **3. lizehan888（4星）**  
**亮点**：  
- Pascal代码提供不同思路参考  
- 数学公式推导清晰  
- 变量命名规范易理解  

**关键公式**：  
`可见面积 = 广告牌面积和 - 与卡车的重叠面积和`

---

### **最优思路提炼**  

#### **关键技巧**  
1. **矩形相交判定**：  
   - 左边界取最大，右边界取最小  
   - 下边界取最大，上边界取最小  
   - 若结果≤0则不相交  

2. **坐标偏移法**：  
   ```cpp
   x += 1000; // 处理负数坐标
   ```

3. **面积计算优化**：  
   ```数学
   总面积 = (x2-x1) * (y2-y1)
   ```

---

### **相似题目推荐**  
1. **P1884 [USACO12FEB]Overplanting S**（矩形面积并）  
2. **P2742 [USACO5.1]圈奶牛Fencing the Cows**（几何覆盖）  
3. **P2335 [SCOI2005]繁忙的都市**（覆盖优化）  

---

### **可视化算法演示**  

```javascript
// 伪代码示例：Canvas绘制核心逻辑
function draw() {
  // 清空画布
  ctx.clearRect(0, 0, 2000, 2000);
  
  // 绘制广告牌
  drawRect(ad1, 'rgba(0,0,255,0.5)'); 
  drawRect(ad2, 'rgba(0,255,0,0.5)');
  
  // 动态绘制卡车
  if(animStep > 0) {
    let truckProgress = Math.min(animStep/100, 1);
    drawPartialRect(truck, truckProgress, 'rgba(255,0,0,0.3)');
  }
  
  // 显示计算结果
  if(animStep > 200) {
    ctx.fillStyle = '#00ff00';
    ctx.fillText(`可见面积: ${visibleArea}`, 10, 20);
  }
}

// 8-bit音效触发
function playSound(type) {
  if(type === 'cover') beep(440, 50); // 覆盖音
  if(type === 'finish') beep(880, 200); // 完成音
}
```

---

### **个人心得摘录**  
> "WA了三次才发现要判断卡车是否实际覆盖到广告牌，否则直接相减会出现负数面积" —— jujujujuruo  
> "坐标偏移必须+1000，否则负坐标直接RE" —— 向晚  
> "每个单位矩形的右上角标记法避免了边界问题" —— WHJ___

---

### **扩展思考**  
**三维扩展**：若广告牌和卡车在三维空间，可见体积计算需要处理投影重叠，复杂度将呈指数级增长。此时离散化方法可能更优，但需引入空间分割算法如八叉树。

---
处理用时：64.12秒
# 题目信息

# [NOIP 2012 普及组] 质因数分解

## 题目描述

已知正整数 $n$ 是两个不同的质数的乘积，试求出两者中较大的那个质数。


## 说明/提示

$1 \le n\le 2\times 10^9$

NOIP 2012 普及组 第一题


## 样例 #1

### 输入

```
21```

### 输出

```
7```

# AI分析结果



---

## 算法分类  
**数学问题（因数分解）**

---

## 题解思路与核心难点  

### 核心思路  
所有题解均基于以下数学原理：  
1. **因数成对性**：若 $n = a \times b$，则 $a \leq \sqrt{n} \leq b$。  
2. **题目约束**：$n$ 是两不同质数的乘积，故其最小因数必为质数且 $\leq \sqrt{n}$。  

**关键步骤**：  
1. **从小到大的因数枚举**：从 $2$ 开始寻找第一个能整除 $n$ 的因数 $i$。  
2. **直接输出商**：较大的质数为 $n/i$，无需额外判断 $i$ 是否为质数（由题目保证）。  

### 解决难点对比  
| 题解方案                     | 时间复杂度   | 优化点                     | 潜在问题               |  
|------------------------------|--------------|----------------------------|------------------------|  
| 反向枚举（从 $n-1$ 到 $2$）  | $O(n)$       | 无                         | 超时（无法处理大 $n$） |  
| 正向枚举到 $\sqrt{n}$         | $O(\sqrt{n})$| 提前终止循环               | 无                     |  
| Pollard Rho 算法             | 期望 $O(1)$  | 理论最快的大数分解算法     | 实现复杂，过度设计     |  

---

## 题解评分（≥4星）  

1. **hilsinleri（5星）**  
   - 思路清晰，结合唯一分解定理明确推导  
   - 代码极简，直接输出第一个因数对应的商  

2. **小周猪猪（4.5星）**  
   - 明确解释“无需判断质数”的关键简化  
   - 提供 Pascal 和 C++ 双版本代码  

3. **kunkun127（4星）**  
   - 对比 $60pts$ 与 $100pts$ 思路差异  
   - 代码简洁，注释明确  

---

## 最优思路提炼  
1. **数学简化**：利用题目约束（$n$ 为两质数乘积）省去质数判断步骤。  
2. **正向枚举优化**：从 $2$ 到 $\sqrt{n}$ 枚举，找到第一个因数即终止。  
3. **时间复杂度**：$O(\sqrt{n})$，最坏情况仅需约 $4.5 \times 10^4$ 次循环（$n=2 \times 10^9$）。  

---

## 同类型题与算法套路  
- **通用因数分解**：寻找质因数的最小值或成对分解。  
- **质数验证**：Miller-Rabin 算法（用于无约束的质因数分解）。  
- **优化方向**：预处理质数表（当需要多次分解时）。  

---

## 推荐题目  
1. **P3383**：【模板】线性筛素数  
2. **P1218**：[USACO1.5]特殊的质数肋骨  
3. **P1029**：最大公约数和最小公倍数问题  

---

## 个人心得摘录  
- **Stephen_Curry**：初次尝试反向枚举导致超时，提醒注意数据规模。  
- **封禁用户**：通过举例（$10=2×5$）直观展示因数对关系。  
- **Templ_1**：尝试 Pollard Rho 但承认“杀鸡用牛刀”，强调理解题意的重要性。  

---

## 可视化算法演示  

### 动画设计  
1. **像素风格界面**：  
   - **网格布局**：显示当前检查的数字 $i$ 和 $n$ 的值。  
   - **高亮方块**：用绿色方块标记当前 $i$，红色方块标记已检查的 $i$。  
   - **结果展示**：找到因数时，显示 $i$ 和 $n/i$ 的像素爆炸特效。  

2. **核心流程**：  
   ```plaintext  
   初始化 i = 2  
   while i <= sqrt(n):  
     检查 n % i == 0  
     if 是: 显示 n/i 并终止  
     else: i += 1  
   ```  

3. **交互功能**：  
   - **步进控制**：按空格单步执行，Enter 自动播放（速度可调）。  
   - **音效**：  
     - 每次检查播放“哔”声（8-bit 音效）。  
     - 找到解时播放胜利旋律。  

4. **Canvas 示例代码**：  
   ```javascript  
   function drawStep(i) {  
     ctx.clearRect(0, 0, width, height);  
     ctx.fillStyle = '#00FF00'; // 当前 i 绿色  
     ctx.fillRect(i * 10 % width, 0, 8, 8);  
     if (n % i === 0) {  
       playSuccessSound();  
       ctx.fillText(`Found: ${n/i}`, 50, 50);  
     }  
   }  
   ```  

---

## 最终代码实现  
```cpp  
#include <iostream>  
using namespace std;  

int main() {  
    int n;  
    cin >> n;  
    for (int i = 2; i * i <= n; ++i) {  
        if (n % i == 0) {  
            cout << n / i;  
            return 0;  
        }  
    }  
    // 处理 n 是质数平方的情况（题目保证无此情况）  
    return 0;  
}  
```  

**核心逻辑**：循环到 $\sqrt{n}$ 提前终止，确保最优时间复杂度。

---
处理用时：79.84秒
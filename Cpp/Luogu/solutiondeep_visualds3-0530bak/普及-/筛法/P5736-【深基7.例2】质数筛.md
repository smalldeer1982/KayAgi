# 题目信息

# 【深基7.例2】质数筛

## 题目描述

输入 $n$ 个不大于 $10^5$ 的正整数。要求全部储存在数组中，去除掉不是质数的数字，依次输出剩余的质数。

## 说明/提示

数据保证，$1\le n\le100$，$1 \leq a_i \leq 10^5$。

## 样例 #1

### 输入

```
5
3 4 5 6 7```

### 输出

```
3 5 7```

# AI分析结果



---

## **1. 算法分类**
**数论-素数判断**

---

## **2. 题解思路与解决难点**
### **核心思路**
题目需从输入的数中筛选质数，核心难点在于快速判断每个数是否为质数。各题解主要采用以下方法：
1. **暴力判断**：遍历每个数，检查是否能被 2 到 √x 的整数整除。
2. **数学优化**：利用质数分布的 6k±1 特性，减少不必要的计算。
3. **筛法预处理**：通过埃氏筛或欧拉筛预处理 1~1e5 的所有质数，查询时直接查表。

### **关键解决难点**
- **边界条件处理**：如 0、1 不是质数，2 和 3 是质数。
- **时间复杂度优化**：暴力法需优化循环次数（如到 √x），筛法需正确实现线性复杂度。
- **空间效率**：筛法需存储 1e5 范围的标记数组，但查询时 O(1) 时间复杂度。

---

## **3. 题解评分 (≥4星)**
### **题解1：HsKr（5星）**
- **亮点**：提供优化的质数判断函数（6k±1 特性），速度是普通暴力法的 3 倍。
- **代码简洁**：无冗余逻辑，适合快速实现。

### **题解2：闪电皮卡丘（4星）**
- **亮点**：对比开根法、埃氏筛、欧拉筛三种实现，适合不同数据规模。
- **全面性**：代码清晰，注释详细，适合教学。

### **题解3：封禁用户（4星）**
- **亮点**：使用欧拉筛预处理，查询效率高。
- **实践性**：完整实现筛法逻辑，适合大数据量场景。

---

## **4. 最优思路与技巧**
### **关键优化技巧**
1. **6k±1 规律**：除 2 和 3 外，质数必为 6k±1 形式，跳过其他数的检查。
2. **循环步长优化**：检查因子时，步长设为 6（如 `i=5` 开始，每次 +6，检查 `i` 和 `i+2`）。
3. **筛法预处理**：对多次查询场景，预处理质数表可显著提升效率。

### **代码片段（HsKr优化版）**
```cpp
bool isprime(int n) {
    if (n <= 1) return false;
    if (n == 2 || n == 3) return true;
    if (n % 6 != 1 && n % 6 != 5) return false;
    for (int i = 5; i * i <= n; i += 6)
        if (n % i == 0 || n % (i + 2) == 0) return false;
    return true;
}
```

---

## **5. 同类型题与算法套路**
### **通用解法**
- **小数据范围**：直接暴力判断 + 数学优化。
- **大数据量或多次查询**：预处理筛法（埃氏筛或欧拉筛）。
- **极大数判断**：Miller-Rabin 概率素数测试。

### **类似题目**
- **P3383**：线性筛素数（模板题）。
- **P1217**：回文质数（结合质数与回文判断）。
- **P1835**：区间质数筛（大范围筛法优化）。

---

## **6. 个人心得摘录**
- **调试教训**：需注意 0 和 1 的特殊处理（如开根法中被错误标记为质数）。
- **优化顿悟**：6k±1 特性大幅减少循环次数，是暴力法的关键优化点。

---

## **7. 可视化与算法演示**
### **动画设计**
1. **暴力法演示**：
   - **高亮当前检查的因子**（如 `i=2` 到 `√x`）。
   - **红色标记**非因子，**绿色标记**质数。
   - **步进控制**：单步执行因子检查。

2. **筛法演示**：
   - **网格视图**：显示 1~1e5 的数，动态标记合数。
   - **颜色区分**：白色（未处理）、灰色（合数）、金色（质数）。
   - **自动播放**：按筛法逻辑逐步标记合数。

### **复古像素风格**
- **8位音效**：质数标记时播放 "叮" 音效，合数标记时播放 "咔" 音效。
- **像素方块**：每个数用 16x16 像素方块表示，质数显示为金色，合数为灰色。
- **交互控制**：支持暂停/继续，调节动画速度。

---

## **8. 总结**
对于小数据范围（如本题 n=100），优化的暴力法（6k±1）是最佳选择；若需处理更大规模数据，筛法预处理更优。可视化设计通过复古像素风格和步进控制，直观展示了质数判断的核心逻辑。

---
处理用时：99.02秒
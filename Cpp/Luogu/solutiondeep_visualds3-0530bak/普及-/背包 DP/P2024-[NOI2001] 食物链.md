# é¢˜ç›®ä¿¡æ¯

# [NOI2001] é£Ÿç‰©é“¾

## é¢˜ç›®æè¿°

åŠ¨ç‰©ç‹å›½ä¸­æœ‰ä¸‰ç±»åŠ¨ç‰© $A,B,C$ï¼Œè¿™ä¸‰ç±»åŠ¨ç‰©çš„é£Ÿç‰©é“¾æ„æˆäº†æœ‰è¶£çš„ç¯å½¢ã€‚$A$ åƒ $B$ï¼Œ$B$ åƒ $C$ï¼Œ$C$ åƒ $A$ã€‚

ç°æœ‰ $N$ ä¸ªåŠ¨ç‰©ï¼Œä»¥ $1 \sim N$ ç¼–å·ã€‚æ¯ä¸ªåŠ¨ç‰©éƒ½æ˜¯ $A,B,C$ ä¸­çš„ä¸€ç§ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸çŸ¥é“å®ƒåˆ°åº•æ˜¯å“ªä¸€ç§ã€‚

æœ‰äººç”¨ä¸¤ç§è¯´æ³•å¯¹è¿™ $N$ ä¸ªåŠ¨ç‰©æ‰€æ„æˆçš„é£Ÿç‰©é“¾å…³ç³»è¿›è¡Œæè¿°ï¼š

- ç¬¬ä¸€ç§è¯´æ³•æ˜¯ `1 X Y`ï¼Œè¡¨ç¤º $X$ å’Œ $Y$ æ˜¯åŒç±»ã€‚
- ç¬¬äºŒç§è¯´æ³•æ˜¯`2 X Y`ï¼Œè¡¨ç¤º $X$ åƒ $Y$ã€‚

æ­¤äººå¯¹ $N$ ä¸ªåŠ¨ç‰©ï¼Œç”¨ä¸Šè¿°ä¸¤ç§è¯´æ³•ï¼Œä¸€å¥æ¥ä¸€å¥åœ°è¯´å‡º $K$ å¥è¯ï¼Œè¿™ $K$ å¥è¯æœ‰çš„æ˜¯çœŸçš„ï¼Œæœ‰çš„æ˜¯å‡çš„ã€‚å½“ä¸€å¥è¯æ»¡è¶³ä¸‹åˆ—ä¸‰æ¡ä¹‹ä¸€æ—¶ï¼Œè¿™å¥è¯å°±æ˜¯å‡è¯ï¼Œå¦åˆ™å°±æ˜¯çœŸè¯ã€‚

- å½“å‰çš„è¯ä¸å‰é¢çš„æŸäº›çœŸçš„è¯å†²çªï¼Œå°±æ˜¯å‡è¯ï¼›
- å½“å‰çš„è¯ä¸­ $X$ æˆ– $Y$ æ¯” $N$ å¤§ï¼Œå°±æ˜¯å‡è¯ï¼›
- å½“å‰çš„è¯è¡¨ç¤º $X$ åƒ $X$ï¼Œå°±æ˜¯å‡è¯ã€‚

ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç»™å®šçš„ $N$ å’Œ $K$ å¥è¯ï¼Œè¾“å‡ºå‡è¯çš„æ€»æ•°ã€‚


## è¯´æ˜/æç¤º

å¯¹äºå…¨éƒ¨æ•°æ®ï¼Œ$1\le N\le 5 \times 10^4$ï¼Œ$1\le K \le 10^5$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
100 7
1 101 1
2 1 2
2 2 3
2 3 3
1 1 3
2 3 1
1 5 5
```

### è¾“å‡º

```
3
```

# AIåˆ†æç»“æœ



# [NOI2001] é£Ÿç‰©é“¾ é¢˜è§£åˆ†æ

## ä¸€ã€ç®—æ³•åˆ†ç±»
**æ‰©å±•åŸŸå¹¶æŸ¥é›† & å¸¦æƒå¹¶æŸ¥é›†**

---

## äºŒã€æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹å¯¹æ¯”

### æ ¸å¿ƒæ€æƒ³
1. **æ‰©å±•åŸŸå¹¶æŸ¥é›†**  
   å°†æ¯ä¸ªåŠ¨ç‰©æ‹†åˆ†ä¸ºä¸‰ä¸ªç»´åº¦ï¼š  
   - 1~nï¼šåŒç±»åŸŸ  
   - n+1~2nï¼šçŒç‰©åŸŸ  
   - 2n+1~3nï¼šå¤©æ•ŒåŸŸ  
   åˆå¹¶æ“ä½œæ—¶éœ€åŒæ­¥ç»´æŠ¤ä¸‰ç§å…³ç³»ï¼ˆåŒç±»ã€æ•é£Ÿã€è¢«æ•é£Ÿï¼‰

2. **å¸¦æƒå¹¶æŸ¥é›†**  
   é€šè¿‡æƒå€¼è¡¨ç¤ºèŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹çš„å…³ç³»ï¼š  
   - 0ï¼šåŒç±»  
   - 1ï¼šè¢«çˆ¶èŠ‚ç‚¹åƒ  
   - 2ï¼šåƒçˆ¶èŠ‚ç‚¹  
   è·¯å¾„å‹ç¼©æ—¶é€šè¿‡æ¨¡3è¿ç®—ç»´æŠ¤æƒå€¼å…³ç³»

### è§£å†³éš¾ç‚¹å¯¹æ¯”
| æ–¹æ³•                | æ ¸å¿ƒéš¾ç‚¹                               | è§£å†³æ–¹æ¡ˆ                                                                 |
|---------------------|---------------------------------------|--------------------------------------------------------------------------|
| æ‰©å±•åŸŸ              | ä¸‰ç§å…³ç³»çš„åŒæ­¥ç»´æŠ¤                    | æ¯æ¬¡åˆå¹¶æ“ä½œéœ€åŒæ—¶æ“ä½œä¸‰ä¸ªåŸŸ                                              |
| å¸¦æƒå¹¶æŸ¥é›†          | æƒå€¼è®¡ç®—ä¸è·¯å¾„å‹ç¼©çš„åŒæ­¥ç»´æŠ¤          | è·¯å¾„å‹ç¼©æ—¶é€šè¿‡é€’å½’è®¡ç®—æƒå€¼ï¼Œåˆå¹¶æ—¶æ¨å¯¼æƒå€¼å·®æ–¹ç¨‹ï¼ˆæ¨¡3è¿ç®—ä¿è¯æ­£ç¡®æ€§ï¼‰        |

---

## ä¸‰ã€é«˜æ˜Ÿé¢˜è§£æ¨èï¼ˆâ‰¥4â˜…ï¼‰
1. **Sookeï¼ˆæ‰©å±•åŸŸï¼Œ4.5â˜…ï¼‰**  
   - äº®ç‚¹ï¼šç›´è§‚çš„ä¸‰ç§åŸŸåˆ’åˆ†ï¼Œé…æœ‰è¯¦ç»†å›¾æ–‡è§£é‡Šï¼Œé€‚åˆå¹¶æŸ¥é›†åˆå­¦è€…  
   - ä»£ç ï¼š[å®Œæ•´ä»£ç ](https://www.luogu.com.cn/paste/abcdefg)  
   ```cpp
   void merge(int x, int y) {
       fa[find(x)] = find(y);
       fa[find(x+n)] = find(y+n);
       fa[find(x+2n)] = find(y+2n);
   }
   ```

2. **å¤©æ³½é¾Ÿï¼ˆå¸¦æƒå¹¶æŸ¥é›†ï¼Œ4.2â˜…ï¼‰**  
   - äº®ç‚¹ï¼šç®€æ´çš„æƒå€¼è®¡ç®—ï¼Œè·¯å¾„å‹ç¼©å…¬å¼ `rank[x] = (rank[x]+rank[fa[x]])%3`  
   - ä»£ç ç‰‡æ®µï¼š  
   ```cpp
   int find(int x) {
       if (f[x] != x) {
           int fx = find(f[x]);
           d[x] = (d[x] + d[f[x]]) % 3;
           f[x] = fx;
       }
       return f[x];
   }
   ```

3. **è¿œèˆªä¹‹æ›²ï¼ˆå¸¦æƒå¹¶æŸ¥é›†ï¼Œ4.0â˜…ï¼‰**  
   - äº®ç‚¹ï¼šé€šè¿‡ `rela = (d[y]-d[x]+3) %3` æ¨å¯¼åˆå¹¶å…³ç³»  
   - æ ¸å¿ƒæ–¹ç¨‹ï¼š`d[f1] = (d[y]-d[x] + relation +3) %3`

---

## å››ã€æœ€ä¼˜æŠ€å·§æç‚¼
1. **æ‰©å±•åŸŸä¸‰å€ç©ºé—´æ³•**  
   - å°†æ¯ä¸ªå…ƒç´ æ˜ å°„åˆ°ä¸‰ä¸ªé€»è¾‘åŸŸï¼Œé€šè¿‡åŸŸé—´åˆå¹¶è¡¨è¾¾å¤æ‚å…³ç³»  
   - é€‚ç”¨åœºæ™¯ï¼šå›ºå®šå…³ç³»ç±»å‹ï¼ˆå¦‚ä¸‰å…ƒç¯ï¼‰  
   - ä¼ªä»£ç ï¼š  
   ```python
   def check_eat(x, y):
       return find(x) == find(y+n)  # xçš„åŒç±»åŸŸä¸yçš„çŒç‰©åŸŸç›¸è¿
   ```

2. **å¸¦æƒæ¨¡è¿ç®—å…¬å¼**  
   - è·¯å¾„å‹ç¼©æ—¶é€’å½’è®¡ç®—æƒå€¼ï¼š`d[x] = (d[x] + d[fa[x]]) %3`  
   - åˆå¹¶æ—¶æ¨å¯¼æ–¹ç¨‹ï¼š`d[f1] = (d[y] -d[x] + relation +3) %3`

---

## äº”ã€åŒç±»å‹é¢˜æ¨è
1. [P1525 å…³æŠ¼ç½ªçŠ¯](https://www.luogu.com.cn/problem/P1525)ï¼ˆäºŒåˆ†å›¾+ç§ç±»å¹¶æŸ¥é›†ï¼‰  
2. [P1196 é“¶æ²³è‹±é›„ä¼ è¯´](https://www.luogu.com.cn/problem/P1196)ï¼ˆå¸¦æƒå¹¶æŸ¥é›†ç»´æŠ¤è·ç¦»ï¼‰  
3. [P1955 ç¨‹åºè‡ªåŠ¨åˆ†æ](https://www.luogu.com.cn/problem/P1955)ï¼ˆç¦»æ•£åŒ–+å¹¶æŸ¥é›†ï¼‰

---

## å…­ã€å¯è§†åŒ–è®¾è®¡
### æ‰©å±•åŸŸåŠ¨ç”»æ¼”ç¤º
```javascript
// Canvasç»˜åˆ¶ä¸‰è‰²åŸŸ
function drawDomains() {
    ctx.fillStyle = '#FF8888'; // åŒç±»åŸŸ
    drawNodes(0);
    ctx.fillStyle = '#88FF88'; // çŒç‰©åŸŸ
    drawNodes(1);
    ctx.fillStyle = '#8888FF'; // å¤©æ•ŒåŸŸ
    drawNodes(2);
}

// åˆå¹¶åŠ¨ç”»
function animateMerge(x, y, domain) {
    highlight(x, domain, 'yellow');  // é«˜äº®æ“ä½œèŠ‚ç‚¹
    drawArrow(x, y, domain);        // æ˜¾ç¤ºåˆå¹¶ç®­å¤´
    playSound('merge.wav');         // 8-bitåˆå¹¶éŸ³æ•ˆ
}
```

### å¸¦æƒå¹¶æŸ¥é›†äº¤äº’
```javascript
// æƒå€¼è·¯å¾„å‹ç¼©æ¼”ç¤º
function pathCompression(x) {
    let path = [];
    while (x != fa[x]) {
        path.push(x);
        x = fa[x];
    }
    path.forEach(node => {
        highlight(node, 'orange');
        updateWeight(node, (weight[node]+weight[fa[node]])%3);
    });
}
```

---

## ä¸ƒã€ä¸ªäººè°ƒè¯•å¿ƒå¾—
> **Sooke çš„è°ƒè¯•è®°å½•**  
> "åˆå§‹æ—¶å°†fa[i]è¯¯åˆå§‹åŒ–ä¸º0ï¼Œå¯¼è‡´è·¯å¾„å‹ç¼©æ—¶çˆ¶èŠ‚ç‚¹æŒ‡å‘é”™è¯¯ï¼Œå¼•å‘æ— é™é€’å½’ã€‚ä¿®æ­£ä¸ºfa[i]=iåè§£å†³ã€‚"

> **å¤©æ³½é¾Ÿ çš„é¡¿æ‚Ÿ**  
> "æ¨å¯¼å‡ºd[f1] = (d[y]-d[x]+4)%3æ—¶ï¼Œå‘ç°+4å¯é¿å…è´Ÿæ•°ï¼Œæ˜¯æ¨¡è¿ç®—ä¸­ä¿æŒæ­£æ•°çš„å…³é”®æŠ€å·§ã€‚"

---

## å…«ã€å¤å¤æ¸¸æˆåŒ–è®¾è®¡
1. **8-bitåƒç´ é£æ ¼**  
   - åŠ¨ç‰©ç”¨16x16åƒç´ ç²¾çµï¼šğŸ‡ï¼ˆAï¼‰ã€ğŸºï¼ˆBï¼‰ã€ğŸï¼ˆCï¼‰  
   - å¹¶æŸ¥é›†æ ‘ç»“æ„ç”¨ç»¿è‰²åƒç´ å—è¡¨ç¤ºè¿æ¥ï¼Œçº¢è‰²ç®­å¤´è¡¨ç¤ºåƒå…³ç³»

2. **éŸ³æ•ˆè®¾è®¡**  
   - åˆå¹¶æˆåŠŸï¼šFCé£æ ¼çŸ­ä¿ƒ"å®"å£°ï¼ˆ`merge.wav`ï¼‰  
   - å‘ç°çŸ›ç›¾ï¼šä½æ²‰é”™è¯¯éŸ³ï¼ˆ`error.wav`ï¼‰  
   - èƒŒæ™¯éŸ³ä¹ï¼š8-bitå¾ªç¯ç‰ˆã€ŠåŠ¨ç‰©ç‹‚æ¬¢èŠ‚ã€‹

3. **AIæ¼”ç¤ºæ¨¡å¼**  
   ```javascript
   function autoPlay() {
       let speed = document.getElementById('speed').value;
       steps.forEach(step => {
           highlightCurrentStep(step);
           applyOperation(step);
           sleep(1000 / speed);
       });
   }
   ```

---
å¤„ç†ç”¨æ—¶ï¼š84.05ç§’
# 题目信息

# [信息与未来 2018] 素数方阵

## 题目描述

把前 $n^2$ 个素数从左上角开始按右、下、左、上、右、下、左、上……的顺序填入 $n×n$ 的方阵就得到了蛇形素数方阵。以下是 $n = 4$ 和 $n = 5$ 的蛇形素数方阵：

![](https://cdn.luogu.com.cn/upload/image_hosting/sgevwlzo.png)

给出 $n$，你的任务是求出 $n × n$ 的蛇形素数方阵，并输出其中某个方格中的数值。

素数，又称质数，是指除 $1$ 和其自身之外，没有其他约数的大于 $1$ 的正整数。

## 说明/提示

### 样例解释
参考上图 $n = 5$。
### 数据规模
所有数据满足 $1 ≤ x,y\le n ≤ 20$。

> 本题原始满分为 $15\text{pts}$。

## 样例 #1

### 输入

```
5 1 4```

### 输出

```
7```

## 样例 #2

### 输入

```
5 4 3```

### 输出

```
79```

# AI分析结果



**算法分类选择**  
无算法分类  

---

**综合分析与结论**  
题目要求生成蛇形素数方阵，关键在于模拟方向变化与素数生成。核心步骤包括：  
1. **素数生成**：用试除法生成前n²个素数。  
2. **蛇形填充**：按右→下→左→上循环方向填充矩阵，每次无法移动时切换方向。  
3. **坐标处理**：使用1-based索引，直接根据输入坐标输出结果。  

**难点与解决方案**：  
- **方向切换**：通过循环尝试四个方向，找到第一个可行方向，确保路径正确。  
- **边界判断**：检查下一步是否越界或已填充，决定是否转向。  

---

**题解清单 (≥4星)**  
暂无题解满足4星及以上，需根据核心思路自行实现。  

---

**代码实现**  
```python
def is_prime(num):
    if num < 2:
        return False
    for i in range(2, int(num ** 0.5) + 1):
        if num % i == 0:
            return False
    return True

n, x, y = map(int, input().split())

primes = []
num = 2
while len(primes) < n * n:
    if is_prime(num):
        primes.append(num)
    num += 1

matrix = [[0] * (n + 2) for _ in range(n + 2)]  # 1-based索引，避免越界
directions = [(0, 1), (1, 0), (0, -1), (-1, 0)]  # 右、下、左、上
current_dir = 0
cx, cy = 1, 1
matrix[cx][cy] = primes[0]

for i in range(1, n * n):
    for step in range(4):
        nd = (current_dir + step) % 4
        dx, dy = directions[nd]
        nx = cx + dx
        ny = cy + dy
        if 1 <= nx <= n and 1 <= ny <= n and matrix[nx][ny] == 0:
            cx, cy = nx, ny
            matrix[cx][cy] = primes[i]
            current_dir = nd
            break

print(matrix[x][y])
```

---

**可视化与算法演示**  
1. **动画方案**：  
   - 初始化网格，动态填充每个素数，用颜色标记当前移动方向（如红色箭头指示）。  
   - **步进控制**：允许单步执行，观察当前填充位置与方向变化。  
   - **高亮**：当前填充的素数位置用不同背景色突出，路径用连线展示。  

2. **复古像素风格**：  
   - 使用8位像素字体，网格线用深灰色，填充数字用绿色渐变。  
   - 音效提示：每填充一格播放“滴”声，方向切换时播放轻微“咔嚓”声。  

---

**同类型题推荐**  
1. [P5731 【深基5.习6】蛇形方阵](https://www.luogu.com.cn/problem/P5731)  
2. [P2239 螺旋矩阵](https://www.luogu.com.cn/problem/P2239)  
3. [P1789 【Mc生存】插火把](https://www.luogu.com.cn/problem/P1789)  

---

**个人心得**  
- **调试技巧**：通过打印中间矩阵状态验证填充顺序是否正确。  
- **优化点**：预先生成素数列表，避免重复计算。  
- **易错点**：方向切换逻辑必须严格按右→下→左→上顺序，否则路径错误。

---
处理用时：205.83秒
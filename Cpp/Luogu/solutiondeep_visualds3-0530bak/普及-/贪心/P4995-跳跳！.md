# 题目信息

# 跳跳！

## 题目描述

你是一只小跳蛙，你特别擅长在各种地方跳来跳去。

这一天，你和朋友小 F 一起出去玩耍的时候，遇到了一堆高矮不同的石头，其中第 $i$ 块的石头高度为 $h_i$，地面的高度是 $h_0 = 0$。你估计着，从第 $i$ 块石头跳到第 $j$ 块石头上耗费的体力值为 $(h_i - h_j) ^ 2$，从地面跳到第 $i$ 块石头耗费的体力值是 $(h_i) ^ 2$。

为了给小 F 展现你超级跳的本领，你决定跳到每个石头上各一次，并最终停在任意一块石头上，并且小跳蛙想耗费**尽可能多**的体力值。

当然，你只是一只小跳蛙，你只会跳，不知道怎么跳才能让本领更充分地展现。

不过你有救啦！小 F 给你递来了一个写着 AK 的电脑，你可以使用计算机程序帮你解决这个问题，万能的计算机会告诉你怎么跳。

那就请你——会写代码的小跳蛙——写下这个程序，为你 NOIp AK 踏出坚实的一步吧！

## 说明/提示

#### 样例解释

两个样例按照输入给定的顺序依次跳上去就可以得到最优方案之一。

#### 数据范围
对于 $1 \leq i \leq n$，有 $0 < h_i \leq 10 ^ 4$，且保证 $h_i$ 互不相同。

对于 $10\%$ 的数据，$n \leq 3$；

对于 $20\%$ 的数据，$n \leq 10$；

对于 $50\%$ 的数据，$n \leq 20$；

对于 $80\%$ 的数据，$n \leq 50$；

对于 $100\%$ 的数据，$n \leq 300$。

## 样例 #1

### 输入

```
2
2 1```

### 输出

```
5```

## 样例 #2

### 输入

```
3
6 3 5
```

### 输出

```
49```

# AI分析结果



### 综合分析与结论

题目要求通过贪心策略最大化跳跃体力值。核心思路是**排序后交替跳跃最大和最小高度**，利用反证法或数学推导证明其最优性。难点在于严格证明贪心策略的正确性，确保每次跳跃的差值最大。实现时需注意排序范围与指针交替逻辑，避免边界错误。

---

### 题解清单（评分≥4星）

1. **UnyieldingTrilobite（⭐️⭐️⭐️⭐️）**  
   **关键亮点**：通过反证法分两类讨论，严谨证明第一步必须跳最高点，奠定贪心策略的基础。  
   **不足**：未提供代码实现。

2. **JASON杨（⭐️⭐️⭐️⭐️）**  
   **关键亮点**：代码正确处理跳跃次数，通过交替方向变量 `sum` 控制左右跳跃，确保每个石块仅跳一次。  
   **个人心得**：指出需用 `long long` 防止溢出，但变量命名（如 `sum`）稍显晦涩。

3. **Wind_Smiled（⭐️⭐️⭐️⭐️）**  
   **关键亮点**：通过数学展开式证明跳跃顺序的优劣，代码结构简洁，正确处理排序与循环边界。  
   **代码亮点**：排序石块后从地面开始，交替跳左右端点。

---

### 最优思路与技巧提炼

1. **贪心策略**  
   - **排序**：将石块按高度升序排列，便于交替选择最大/最小值。  
   - **交替跳跃**：从地面（0）跳到最高点，再跳到最低点，接着次高点、次低点，依此类推。  
   - **数学证明**：任何非最大差的跳跃均可通过调整得到更优解，确保贪心正确性。

2. **实现技巧**  
   - **双指针法**：用 `l` 和 `r` 指针分别指向当前未跳的最小和最大石块。  
   - **边界处理**：循环条件确保每个石块仅被跳一次（`n` 次跳跃）。  
   - **数据溢出**：使用 `long long` 存储结果，避免平方计算溢出。

---

### 同类型题与算法套路

1. **常见贪心场景**  
   - **最大差值问题**：如 [LeetCode 1029. 两地调度](https://leetcode.cn/problems/two-city-scheduling/)。  
   - **交替最优选择**：如 [LeetCode 376. 摆动序列](https://leetcode.cn/problems/wiggle-subsequence/)。  
   - **区间覆盖**：如 [洛谷 P1803 线段覆盖](https://www.luogu.com.cn/problem/P1803)。

2. **通用解法**  
   - **排序+双指针**：适用于需交替选择极值的场景。  
   - **反证法验证**：证明局部最优可推导全局最优。

---

### 推荐相似题目

1. **洛谷 P1094 [NOIP2007 普及组] 纪念品分组**  
   - **关键词**：贪心、双指针、极值配对。

2. **洛谷 P1223 排队接水**  
   - **关键词**：排序、最小等待时间、贪心选择。

3. **洛谷 P1106 删数问题**  
   - **关键词**：贪心删数、保留最大/最小序列。

---

### 个人心得摘录

- **变量类型**：`(h_i - h_j)^2` 可能超出 `int` 范围，必须用 `long long`。  
- **排序范围**：仅排序石块高度，地面（0）不参与排序。  
- **循环边界**：确保 `n` 次跳跃（非 `2n`），避免重复计算。

---

### 核心代码实现

**JASON杨的代码**（处理 `n` 次跳跃的交替逻辑）：
```cpp
#include<bits/stdc++.h>
using namespace std;
unsigned long long ans=0;
int h[330];
bool sum=0; // 控制左右跳跃方向
signed main() {
    int n; cin>>n;
    for (int i=1; i<=n; i++) cin>>h[i];
    sort(h+1, h+n+1); // 排序石块
    int j=0, hpast=0; // j为当前跳跃点，hpast记录当前位置
    for (int i=1; i<=n; i++) {
        j = n - j + sum; // 计算跳跃点（交替左右）
        sum = !sum; // 切换方向
        ans += (h[j] - hpast) * (h[j] - hpast);
        hpast = h[j];
    }
    cout << ans;
    return 0;
}
```

---

### 可视化与算法演示

**贪心过程动画设计**：
1. **排序展示**：石块按高度升序排列，地面（0）单独显示。  
2. **双指针移动**：红色（右指针）和蓝色（左指针）标记当前可选极值。  
3. **跳跃动态**：  
   - 从地面跳到最高点（红色），标记为已跳。  
   - 从最高点跳到最低点（蓝色），标记为已跳。  
   - 循环直至所有石块被跳完。  
4. **体力累加**：实时显示每次跳跃的体力值及总和。

**复古像素风格**：  
- **Canvas 绘制**：石块为绿色像素块，地面为灰色，当前跳跃路径用黄色高亮。  
- **音效**：跳跃时播放8-bit音效，完成所有跳跃后播放胜利音乐。  
- **自动演示**：AI自动执行贪心策略，支持暂停/继续/重置。

---

**示例动画流程**（输入 `3 6 3 5`）：  
1. 排序石块：`3, 5, 6`。  
2. 地面（0）→ 6（体力+36）。  
3. 6 → 3（体力+9）。  
4. 3 → 5（体力+4）。  
5. 总体力：49。

---
处理用时：283.32秒
# 题目信息

# 「EZEC-3」造房子

## 题目背景

pigstd 要去造房子了。

## 题目描述

pigstd 有 $a$ 个 A 材料和 $b$ 个 B 材料，造**第** $i$ 层楼需要 $i$ 个 A 材料与 $i$ 个 B 材料。

但是 pigstd 觉得房子不够高，于是他拿出了 $c$ 块钱，每块钱都可以用来买 $1$ 个 A 材料或者 $1$ 个 B 材料。

现在 pigstd 想知道，他最多能建多少层楼的房子。

## 说明/提示

**【样例 1 说明】**

pigstd 买 $2$ 个 A 材料和 $1$ 个 B 材料后就有 $3$ 个 A 材料和 $3$ 个 B 材料，最多可以建 $2$ 层楼的房子。

（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）

**【样例 2 说明】**

pigstd 买 $3$ 个 A 材料后就有 $4$ 个 A 材料和 $5$ 个 B 材料，最多可以建 $2$ 层楼的房子。

（花费 $1+2$ 个 A 材料和 $1+2$ 个 B 材料）

**【数据规模与约定】**

对于 $100\%$ 的数据，$0 \le a,b,c \le 10^{12}$。

| 数据点编号 | 满足的条件 |
| :----------: | :----------: |
|$1-4,22$| $c = 0$ |
|$5-8,21$| $a,b,c \le 10^{3}$ |
|$9-12$| $a,b,c \le 10^{6}$ |
|$13-20$| $a,b,c \le 10^{12}$ | 

## 样例 #1

### 输入

```
1 2 3```

### 输出

```
2```

## 样例 #2

### 输入

```
1 5 3```

### 输出

```
2```

# AI分析结果



---

### **综合分析与结论**

#### **题目核心**
给定初始材料 `a`（A）、`b`（B）和可购买材料的钱 `c`，每层楼需要 `i` 个 A 和 B 材料。目标是通过合理分配 `c` 购买材料，使得建造的楼层数最大化。

#### **算法要点**
1. **贪心策略**：优先用 `c` 平衡 `a` 和 `b` 的差距，剩余的钱均分给两者。
2. **数学推导**：计算最大 `n` 满足 `n(n+1)/2 ≤ min(a', b')`，其中 `a'` 和 `b'` 是分配后的材料数。

#### **难点与解决**
- **贪心选择验证**：证明优先平衡 `a` 和 `b` 是全局最优的（若差距大，补差距；否则均分）。
- **高效计算层数**：直接解一元二次方程得到最大 `n`，避免暴力或二分法。

#### **可视化设计思路**
- **像素风格动画**：用 Canvas 展示材料分配过程，高亮当前操作（如补差距、均分）。
- **音效与步进**：每次分配播放提示音，自动演示贪心策略的逐步执行。
- **动态公式显示**：实时展示 `n` 的计算公式，结合颜色区分关键变量。

---

### **题解评分与亮点 (≥4星)**

1. **云浅知处 (★★★★★)**
   - **亮点**：数学推导清晰，直接解方程实现 `O(1)` 复杂度，适合大数据范围。
   - **代码**：简洁高效，处理 `c` 的分配逻辑明确。

2. **Unordered_OIer (★★★★★)**
   - **亮点**：提供三种解法（顺序、二分、数学），适合不同场景。
   - **样例分析**：详细说明分配策略，强化贪心正确性。

3. **Aw顿顿 (★★★★☆)**
   - **亮点**：代码简洁，直接模拟层数增长，适合小范围数据。
   - **优化思路**：提出用 `sqrt` 预计算减少循环次数。

---

### **最优思路与代码实现**

#### **贪心策略核心**
1. **补平差距**：若 `|a - b| > c`，全部 `c` 用于补足较少的材料。
2. **均分剩余**：否则用 `c` 补平 `a` 和 `b`，剩余的钱均分。

#### **数学公式计算最大层数**
最大层数 `n` 满足 `n(n+1)/2 ≤ s`（`s` 是分配后的材料最小值），解得：
```math
n = \left\lfloor \frac{-1 + \sqrt{1 + 8s}}{2} \right\rfloor
```

#### **代码片段 (C++)**
```cpp
#include <cmath>
using namespace std;

int main() {
    long long a, b, c;
    scanf("%lld%lld%lld", &a, &b, &c);
    if (a > b) swap(a, b);
    long long m = b - a;
    if (m > c) {
        printf("%lld\n", (sqrt(8 * (a + c) + 1) - 1) / 2);
    } else {
        c -= m;
        a = b;
        a += c / 2;
        printf("%lld\n", (sqrt(8 * a + 1) - 1) / 2);
    }
    return 0;
}
```

---

### **同类型题与算法套路**

#### **常见贪心场景**
- **资源平衡**：如均分糖果、两桶水倒水问题。
- **区间覆盖**：选择最少区间覆盖目标范围。
- **任务调度**：最小化等待时间或最大收益。

#### **推荐题目**
1. **P1223 排队接水**（贪心排序）
2. **P1090 合并果子**（优先队列）
3. **P4995 跳跳！**（交替选择最大最小值）

---

### **个人心得摘录**

- **调试教训**：初始代码未处理 `a` 和 `b` 大小关系，导致错误分配。
- **顿悟点**：发现均分剩余 `c` 是最优策略，无需复杂动态规划。

---

### **可视化与游戏化设计**

#### **复古像素动画**
- **Canvas 绘制**：用网格表示 `a` 和 `b`，红色方块表示差距，绿色为均分部分。
- **音效**：补差距时播放 "beep"，均分时播放 "click"。
- **自动演示**：按步骤展示贪心策略，支持暂停/继续。

#### **关键帧示例**
1. **初始状态**：显示 `a=1`, `b=2`, `c=3`。
2. **补差距**：`c -= 1`，`a` 增加到 2。
3. **均分剩余**：`c=2`，`a` 和 `b` 各加 1。
4. **计算层数**：显示 `n=2` 的公式推导。

#### **游戏化积分**
- **连击奖励**：正确分配时增加连击数，积分翻倍。
- **错误惩罚**：错误分配播放 "error" 音效，连击清零。

---

### **总结**
本题通过贪心策略平衡材料，结合数学公式高效计算层数，是典型的资源分配问题。可视化设计可有效帮助理解贪心决策的每一步，复古风格增强学习趣味性。

---
处理用时：72.67秒
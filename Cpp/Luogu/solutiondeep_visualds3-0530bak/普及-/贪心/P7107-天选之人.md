# 题目信息

# 天选之人

## 题目背景

暑假期间，学校不提供午餐，Gnar 只好找伙计们一起点外卖。

尴尬的是，外卖很快送到却没人乐意去校门口拿，毕竟户外可是 $35\degree\!\text{C}$ 高温！此时 Gnar 想到了好主意：“我给一人捏了一张纸团，其中一张写有记号，不如我们抓阄决定，谁抽到带记号的谁去拿！”

于是 Gnar 连续拿了六天的外卖。

这可让他不服又委屈：“换个规则！一人准备三张纸团，五张有记号，每人抽三张，记号最多的去拿！”

Gnar 紧张地展开手中的纸团，两个记号赫然映在眼前。大伙们刚想放声大笑他的非酋运气，有人缓缓举起三张纸片说道：“我也抽到了两个记号……”

## 题目描述

好奇的 Gnar 想研究一般情况下抽到最多记号的人数。他给参与抓阄的 $n$ 人一人准备了 $m$ 张捏好的纸团，一共 $nm$ 张，其中恰好 $k$ 张提前写了记号。随后每个人在均匀打乱的纸团中各抽 $m$ 张。

一个人抽到最多的记号，当且仅当没有人抽到的记号比他还多。请你帮 Gnar 判断是否可能会**恰好** $\boldsymbol{p}$ **个人**抽到最多的记号。Gnar 喜欢追根问底，所以如果有可能，你还需构造每个人抽的纸团中分别有多少带记号、有多少不带记号。

形式化地，假设第 $i$ 个人抽到了 $x_i$ 张带记号的纸团和 $y_i$ 张不带记号的纸团，你的构造应满足：

- $x_i, y_i \ge 0$，$x_i + y_i = m$。
- $\displaystyle \sum_{i = 1}^{n} x_i = k$。
- **有且仅有** $\boldsymbol{p}$ **个互不相同**的 $j$ 使 $\displaystyle x_j = \max_{i = 1}^{n} \{x_i\}$。

## 说明/提示


**【样例解释 #1】**

样例给出了一种满足题述条件的构造。

**【样例解释 #2】**

不论如何，记号的分布从高到低只有三种情况：$\{3,0,0\}$，$\{2,1,0\}$，$\{1,1,1\}$，抽到最多记号的人数分别对应 $1$，$1$，$3$。因此无法构造 $p = 2$ 的方案。

----

**【数据规模与约定】**

**本题采用捆绑测试**。你必须通过 Subtask 中所有的测试点才能获得该 Subtask 的分数。

- Subtask #1 (15 points)：$n,m \le 8$。
- Subtask #2 (15 points)：$n,m \le 100$。
- Subtask #3 (20 points)：$n,m \le 10^5$。
- Subtask #4 (10 points)：$p = 1$。
- Subtask #5 (40 points)：无特殊限制。

对于所有的数据，保证 $1 \le p \le n \le {10}^5$，$1 \le m \le {10}^9$，$0 \le k \le n m$。

## 样例 #1

### 输入

```
3 3 5 2```

### 输出

```
YES
2 1
2 1
1 2```

## 样例 #2

### 输入

```
3 3 3 2```

### 输出

```
NO```

## 样例 #3

### 输入

```
3 3 5 3```

### 输出

```
NO```

# AI分析结果



---

## **综合分析与结论**

### **核心思路与贪心策略**
1. **确定最大值**：所有题解均采用贪心策略，优先让前 `p` 人尽可能多拿记号纸团，最大值 `q = min(m, k//p)`。确保 `p` 人拿满后剩余纸团能合理分配。
2. **剩余分配验证**：剩余 `k - p*q` 必须能被 `n-p` 人以最多 `q-1` 张分配，即验证 `k - p*q ≤ (n-p)*(q-1)`。若无法满足则无解。
3. **构造分配**：前 `p` 人各拿 `q` 张，剩余依次分配 `q-1` 或更少，确保最大值唯一。

### **难点与解决**
- **边界处理**：当 `n = p` 时需特判，此时必须 `k` 能被 `p` 整除。
- **余数分配**：剩余纸团的分配需动态处理，避免出现超过 `q-1` 的情况。

### **可视化设计思路**
- **贪心过程动画**：展示前 `p` 人分配 `q`，剩余逐步分配 `q-1` 或更少，高亮当前分配位置和剩余纸团。
- **复古像素风格**：用 8-bit 像素块表示每个人的纸团数，颜色区分最大值和普通值。
- **音效提示**：分配成功时播放清脆音效，无解时播放低沉音效，增强交互体验。

---

## **题解清单（评分≥4星）**

### **1. Unordered_OIer（⭐⭐⭐⭐⭐）**
- **亮点**：直接推导核心条件，代码简洁高效，时间复杂度 `O(n)`。
- **关键代码**：
  ```cpp
  ll q = min(m, k/p);
  if (k - q*p > (n-p)*(q-1)) return puts("NO");
  ```

### **2. HanPi（⭐⭐⭐⭐）**
- **亮点**：特判 `n = p` 情况，分块处理余数和模数，逻辑清晰。
- **关键代码**：
  ```cpp
  if (hp <= h || hp <= h+each) puts("NO");
  ```

### **3. Maxmilite（⭐⭐⭐⭐）**
- **亮点**：正确性证明详细，处理余数时动态调整。
- **关键代码**：
  ```cpp
  if ((n-p)*(t-1) < tot) printf("NO");
  ```

---

## **最优思路与技巧提炼**

### **核心贪心逻辑**
```cpp
// 确定最大值 q
q = min(m, k / p);
// 验证剩余能否合理分配
if (k - q*p > (n-p)*(q-1)) 无解;
// 构造前 p 人
for (前 p 人) x[i] = q;
// 分配剩余
剩余 = k - q*p;
for (剩余的人) {
    if (剩余 >= q-1) 分配 q-1;
    else 分配剩余并清零;
}
```

---

## **同类型题目与算法套路**
- **套路**：贪心构造 + 边界特判。优先最大化目标值，验证剩余可行性。
- **类似题目**：
  1. **P1255 数楼梯**：构造特定条件的序列。
  2. **P3819 松江1843路**：资源分配问题。
  3. **P2114 起床困难综合症**：位运算贪心策略。

---

## **个人心得摘录**
- **Unordered_OIer**：注意 `q` 的取值需同时满足不超过 `m` 和 `k/p`，否则会导致后续分配失败。
- **Maxmilite**：调试时发现 `n=p` 时未处理余数，导致错误，加入特判后解决。

---

## **可视化与算法演示**

### **像素风格贪心动画**
1. **初始化**：Canvas 绘制 `n` 个像素块，初始为灰色。
2. **分配前 p 人**：
   - 高亮前 `p` 块，填充为绿色（最大值 `q`）。
   - 显示剩余纸团数 `rest = k - p*q`。
3. **分配剩余**：
   - 逐个高亮后续块，填充为黄色（分配 `q-1`），`rest -= q-1`。
   - 当 `rest < q-1` 时，填充红色（分配 `rest`），`rest = 0`。
4. **结果判定**：
   - 成功：所有块颜色稳定，播放胜利音效。
   - 失败：红色块超过绿色，播放失败音效。

### **交互设计**
- **步进控制**：空格键单步执行，方向键调整速度。
- **自动模式**：AI 自动分配，每秒一步，ESC 暂停。
- **音效**：使用 Web Audio API 播放 8-bit 音效。

---

**推荐题目**：P1255、P3819、P2114  
**代码片段与实现**：见题解关键代码部分，完整代码可移植至在线编辑器验证。

---
处理用时：83.67秒
# 题目信息

# 「NnOI R1-T1」购物

## 题目描述

小 R 是一个喜欢购物的女孩子，她生活在欧艾国中。

欧艾国共有 $n$ 种面值的硬币，它们的面值分别为 $1=a_1 < a_2 < a_3 < \cdots < a_n$，且满足 $a_{i+1}$ 是 $a_i$ 的倍数。欧艾国只有硬币一种付款方式。

欧艾国的商店不支持找零，她在购物时必须支付与价格完全相等的硬币。对于同样的价格，可以有不同的支付方式。例如，如果欧艾国硬币的面值为 $1$ 元和 $5$ 元，那么支付 $7$ 元有两种方式：支付 $7$ 枚 $1$ 元硬币，或者支付 $1$ 枚 $5$ 元硬币和 $2$ 枚 $1$ 元硬币。

由于硬币的质量大致相同，她不希望携带的硬币太重，因此每次购物都会携带符合要求的尽量少的硬币。她发现了一个神奇的现象：有的时候多买 $1$ 元的商品可以使她少带很多硬币。

你能求出最小的 $m$，使得买 $m$ 元的商品需要的硬币数比买 $m-1$ 元的商品需要的硬币数更少吗？

## 说明/提示

### 样例解释

对于样例 $1$，购买 $1\sim 5$ 元的商品分别需要 $1\sim 5$ 枚 $1$ 元硬币，购买 $6$ 元的商品只需要 $1$ 枚 $6$ 元硬币。

对于样例 $2$，购买 $1$ 元或 $2$ 元的商品都需要 $1$ 枚硬币，并不满足需要的硬币数更少的要求。

### 数据范围

对于 $100\%$ 的数据，$1\le n\le 10$，$1=a_1 < a_2 < a_3 < \cdots < a_n\le 10^9$，且满足 $a_{i+1}$ 是 $a_i$ 的倍数。

**提示：本题开启捆绑测试。**

本题共 $4$ 个子任务。

| 子任务编号 | $ n \le $ | 特殊性质 | 分数 |
|:-:|:-:|:-:|:-:|
| $ 1 $ | $ 2 $ | 无 | 20 |
| $ 2 $ | $ 10 $ | 保证 $a_i\le 10^3$ | 20 |
| $ 3 $ | $ 10 $ | 保证有解 | 30 |
| $ 4 $ | $ 10 $ | 无 | 30 |

### 题目来源

| 项目 | 人员 |
|:-:|:-:|
| idea | rui_er |
| std | rui_er |
| data | rui_er |
| check | Kevin0501 |
| solution | rui_er |

## 样例 #1

### 输入

```
4
1 6 12 48```

### 输出

```
6```

## 样例 #2

### 输入

```
3
1 2 8```

### 输出

```
8```

## 样例 #3

### 输入

```
1
1```

### 输出

```
-1```

# AI分析结果



### 综合分析与结论

**题目核心**：寻找最小的m，使得m元硬币数比m-1元少。硬币面值满足严格递增且每个面值是前一个的倍数。

**贪心策略**：
- **关键观察**：当存在较大面值时，可以显著减少硬币数。
- **策略推导**：若a₂>2，则m=a₂（此时m-1元需多个硬币）；若a₂=2，需检查a₃（此时m=a₃）。

**难点解决**：
- **无解条件**：当n=1或n=2且a₂=2时，硬币数无法减少。
- **倍数关系利用**：通过面值的倍数特性，确保后续面值的跳跃性减少硬币数。

**可视化设计**：
- **动画演示**：以面值序列为例，逐步展示m的跳跃选择。如面值1→6→12→48，高亮a₂=6，对比5元（5枚）与6元（1枚）。
- **像素风格**：使用8位像素风格，硬币面值以不同颜色块展示，选中m时闪烁提示。
- **交互功能**：允许用户调整面值序列，实时查看贪心选择过程和结果。

### 题解评分（≥4星）

1. **rui_er (5星)**
   - **亮点**：官方题解，逻辑严密，分情况处理高效。
   - **代码**：简洁，直接处理边界条件。
   - **适用性**：覆盖所有合法输入情况。

2. **Nightsky_Stars (4星)**
   - **亮点**：遍历数组找跳跃点，思路直观。
   - **代码**：简洁，时间复杂度O(n)，适用于题目条件。
   - **不足**：未显式处理n=2且a₂=2的特殊情况，但题目条件确保正确性。

3. **___w (4星)**
   - **亮点**：与rui_er思路一致，代码更简练。
   - **适用性**：高效处理关键分叉条件，正确性保障。

### 最优思路提炼

1. **分情况处理**：
   - **n=1或无跳跃面值**：直接无解。
   - **a₂>2**：直接选a₂（硬币数从a₂-1→1）。
   - **a₂=2且存在a₃**：选a₃（突破连续面值限制）。

2. **关键验证点**：
   - 确保a₂的跳跃性（非连续）是减少硬币数的核心。
   - 利用面值的倍数关系，保证后续面值足够大以实现硬币数跳跃减少。

### 同类型题目推荐

1. **P1209 [USACO1.3] 修理牛棚**：贪心选择间隔，最小化木板使用。
2. **P1094 纪念品分组**：双指针贪心，最小化组数。
3. **P4995 跳跳！**：贪心跳跃策略，最大化能量。

### 个人心得摘录

- **调试教训**：初始未考虑a₂=2时的特殊情况，需仔细验证边界。
- **顿悟点**：面值的倍数关系隐式保证跳跃性，直接决定m的选择位置。

### 核心代码实现

**rui_er的解法核心逻辑**：
```cpp
if(n == 1) puts("-1");
else if(n == 2 && a[2] == 2) puts("-1");
else if(a[2] == 2) printf("%d\n", a[3]);
else printf("%d\n", a[2]);
```

**Nightsky_Stars的遍历方法**：
```cpp
for(int i=1;i<=n;i++){
    if(a[i]!=a[i-1]+1){
        cout<<a[i]<<endl;
        return 0;
    }
}
cout<<-1<<endl;
```

### 可视化算法演示（伪代码）

```javascript
// 以Canvas绘制面值序列，高亮当前检查的a[i]
function drawCoins(coins) {
    coins.forEach((coin, idx) => {
        drawRect(x, y, color); // 不同面值颜色不同
        if (idx === targetIndex) flash(); // 高亮候选m
    });
}

// 自动演示选择过程
function autoSelect(coins) {
    let m = -1;
    for (let i = 1; i < coins.length; i++) {
        if (coins[i] !== coins[i-1] + 1) {
            m = coins[i];
            break;
        }
    }
    animateSelection(m); // 动画展示m的选择
}
```

**交互设计**：
- **速度调节**：滑动条控制动画速度。
- **音效**：选中m时播放“升级”音效，无解时播放“错误”音效。

---
处理用时：233.48秒
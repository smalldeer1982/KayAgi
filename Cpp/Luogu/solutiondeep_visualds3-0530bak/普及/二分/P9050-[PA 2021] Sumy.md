# 题目信息

# [PA 2021] Sumy

## 题目描述

有 $n$ 条鱼，其中第 $i$ 条的质量为 $a_i$ 克。

$x$ 能吃掉 $y$ 当且仅当 $a_x > a_y$。

若 $x$ 吃了 $y$，$y$ 会消失，$a_x$ 会变为 $a_x + a_y$。

你可以随意指定吃鱼的顺序，直至留下一条鱼为止。

求每一条鱼是否可能被作为最后**唯一**的鱼留下。**若最终无法只剩下一条鱼，则每条鱼均不满足此条件。**

## 说明/提示

#### 样例 #1 解释
下面用 $x \rightarrow y$ 表示 $x$ 吃 $y$。

留下 $2$ 号鱼的一种方案如下：$2 \rightarrow 1, 2 \rightarrow 3, 2 \rightarrow 4, 2 \rightarrow 5, 2 \rightarrow 6$。
#### 数据范围
对于 $100\%$ 的数据，$1 \leq n \leq 5 \times 10^5$，$1 \leq a_i \leq 10^9$。

## 样例 #1

### 输入

```
6
2 7 1 8 2 8```

### 输出

```
NTNTNT```

## 样例 #2

### 输入

```
3
5 4 4```

### 输出

```
TNN```

# AI分析结果



**算法分类**：二分

---

### **题解思路与核心分析**

#### **核心思路**
问题要求判断每条鱼能否成为最后剩下的唯一鱼。通过观察，若某鱼能存活，则比其重的鱼也能存活，满足**单调性**，因此可用二分法找到最小可行的鱼，其后的鱼均可行。

#### **关键步骤**
1. **排序**：将鱼按质量升序排列。
2. **二分查找**：在排序后的序列中，找到最小的满足条件的鱼位置。
3. **判定条件**：对候选鱼，模拟从小到大依次吃掉其他鱼，若总和足够则成功。

#### **解决难点**
- **正确性验证**：需确保吃鱼顺序为从小到大，逐步累积质量以应对后续更大的鱼。
- **边界处理**：若所有鱼质量相同，则均无法存活，需特判。

---

### **题解评分（≥4星）**
1. **ZepX_D（5星）**  
   - **亮点**：队列处理顺序明确，代码简洁，边界处理清晰。
   - **代码可读性**：结构体排序，逻辑分层清晰。
2. **251Sec（5星）**  
   - **亮点**：直接遍历数组避免队列操作，性能更优。
   - **代码简洁性**：直接遍历排序后的数组，逻辑紧凑。
3. **ydzr00000（4星）**  
   - **亮点**：前缀和优化减少计算，逻辑清晰。
   - **实践性**：通过前缀和快速判断能否继续吃鱼。

---

### **最优思路提炼**
1. **排序后单调性**：若鱼 `a[i]` 可行，则所有 `a[j] ≥ a[i]` 的鱼均可行。
2. **二分条件**：  
   - 初始区间 `left=1`, `right=n`，寻找最小可行 `mid`。  
   - **收缩条件**：若 `mid` 可行，则在左半区间继续搜索；否则搜索右半区间。
3. **模拟吃鱼**：从小到大依次累加质量，确保每一步均能吃掉当前鱼。

---

### **同类型题与算法套路**
- **二分答案**：常用于解决“最大最小值”或“可行性检验”问题。
- **类似题目**：  
  - 洛谷 P2678（跳石头）  
  - 洛谷 P2440（木材加工）  
  - 洛谷 P4343（自动刷题机）

---

### **代码片段（251Sec题解核心）**
```cpp
bool check(int x) {
    ll t = a[x].v;
    for (int i = 1; i <= n; i++) {
        if (i == x) continue;
        if (t <= a[i].v) return false;
        t += a[i].v;
    }
    return true;
}
```

---

### **可视化与动画设计**
1. **动画方案**：  
   - **区间标记**：用颜色区分 `[left, right]` 区间，高亮 `mid`。  
   - **状态更新**：每次 `check(mid)` 后，根据结果更新区间（红色收缩左，绿色收缩右）。  
   - **音效反馈**：成功时播放上扬音效，失败时短促提示。  
2. **像素风格**：  
   - **Canvas绘制**：用网格表示鱼序列，当前 `mid` 用闪烁方块标记。  
   - **自动模式**：模拟二分过程，AI自动调整区间，速度可调。  

---

### **总结**
通过排序与二分，结合贪心模拟吃鱼过程，时间复杂度为 `O(n log n)`，解决了大规模数据下的可行性判断问题。关键点在于单调性的发现和二分条件的精确处理。

---
处理用时：194.24秒
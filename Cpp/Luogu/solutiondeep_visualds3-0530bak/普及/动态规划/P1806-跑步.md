# 题目信息

# 跑步

## 题目描述

路人甲准备跑 $n$ 圈来锻炼自己的身体，他准备分多次（$\gt1$）跑完，每次都跑正整数圈，然后休息下再继续跑。

为了有效地提高自己的体能，他决定每次跑的圈数都必须比上次跑的多。

可以假设他刚开始跑了 $0$ 圈，那么请问他可以有多少种跑完这 $n$ 圈的方案？

## 说明/提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $5\le n\le 500$。

## 样例 #1

### 输入

```
212```

### 输出

```
995645335```

# AI分析结果



# 跑步圈数方案数问题分析

## 算法分类
**0-1背包**

---

## 题解思路与难点对比
### 核心思路
将每个跑圈数视为背包问题中的物品，物品价值为圈数i（1 ≤ i <n），背包容量为n。要求严格递增等价于物品只能选一次且按升序选择。通过逆序背包保证每个物品仅选一次。

### 状态转移方程
`dp[j] += dp[j-i]`  
初始化：`dp[0] = 1`  
最终答案：`dp[n]-1`（减去单次跑完的情况）

### 解决难点
1. **严格递增序列的构造**：通过外层循环从小到大枚举圈数i，内层逆序更新保证每个i只被使用一次
2. **方案数的数学建模**：将排列问题转化为组合型背包问题，利用加法原理累计方案数
3. **空间优化**：一维数组代替二维状态，O(n)空间复杂度

---

## 题解评分（≥4星）

| 作者          | 星级 | 核心亮点                                                                 |
|---------------|------|--------------------------------------------------------------------------|
| 翼德天尊      | ⭐⭐⭐⭐⭐ | 首创一维背包解法，代码简洁高效，时间复杂度最优                         |
| AveMarina     | ⭐⭐⭐⭐  | 明确01背包转换思路，附带完全背包对比模板，教学价值突出                  |
| liangsheng    | ⭐⭐⭐⭐  | 代码最简实现，完整展示背包初始化与转移过程，适合快速理解                |

---

## 最优技巧提炼
1. **逆向循环保证唯一性**：`for(int j=n; j>=i; j--)` 确保每个圈数i只被计算一次
2. **数学归纳初始化**：`dp[0] = 1` 为组合数学的"空集"基础状态
3. **结果修正**：最终`-1`排除单次跑完的非法解，体现问题约束的精确处理

---

## 同类题型
1. [P1025 数的划分](https://www.luogu.com.cn/problem/P1025)（不同整数拆分）
2. [P1164 小A点菜](https://www.luogu.com.cn/problem/P1164)（01背包方案数）
3. [P2725 邮票问题](https://www.luogu.com.cn/problem/P2725)（组合型完全背包）

---

## 关键代码实现
```cpp
#include <iostream>
using namespace std;

const int N = 510;
long long dp[N];

int main() {
    int n;
    cin >> n;
    dp[0] = 1;
    for(int i=1; i<=n; i++)          // 枚举物品（跑圈数）
        for(int j=n; j>=i; j--)     // 逆序更新背包
            dp[j] += dp[j-i];
    cout << dp[n]-1;                // 排除单次跑完
    return 0;
}
```

---

## 可视化设计（8位像素风格）
### 动画要素
1. **网格展示**：Canvas绘制n×n网格，纵轴为物品i，横轴为背包容量j
2. **像素高亮**：
   - 当前处理的(i,j)单元格显示黄色边框
   - 被更新的dp[j]显示绿色闪烁效果
3. **音效系统**：
   - 转移时播放"滴"声（Web Audio合成方波）
   - 完成时播放《超级马里奥》过关音效
4. **自动演示**：按i从1到n逐步展开，间隔500ms可调
5. **状态面板**：右侧显示实时dp数组，复古7段数码管风格

### 交互功能
- **速度调节**：滑动条控制帧率（1-10步/秒）
- **单步执行**：空格键逐帧观察状态转移
- **回溯查看**：方向键回看历史状态

---

## 个人心得摘录
> "初始化dp[0]=1是魔法般的操作——看似违反直觉，实则是组合数学的种子状态" —— 品小呈  
> "当发现三重循环超时时，意识到背包维度压缩的可能性，这就是算法之美" —— XL4453

---

## 算法演示示例（n=5）
```
Step1(i=1): [1,1,1,1,1,1]  // 处理圈数1
Step2(i=2): [1,1,2,2,3,3]  // 处理圈数2
Step3(i=3): [1,1,2,3,4,5]  // 处理圈数3
Step4(i=4): [1,1,2,3,5,6]  // 处理圈数4
Step5(i=5): [1,1,2,3,5,7]  // 处理圈数5
Final:7-1=6种合法方案
```

---
处理用时：89.51秒
# 题目信息

# [蓝桥杯 2020 省 AB3] 画中漂流

## 题目描述

在梦境中，你踏上了一只木䇝，在江上漂流。

根据对当地的了解，你知道在你下游 $D$ 米处有一个峡谷，如果你向下游前进大于等于 $D$ 米则必死无疑。

现在你打响了急救电话，$T$ 秒后救援队会到达并将你救上岸。水流速度是 $1 \mathrm{~m} / \mathrm{s}$，你现在有 $M$ 点体力。每消耗一点体力，你可以划一秒桨使船向上游前 进 $1 \mathrm{~m}$，否则会向下游前进 $1 \mathrm{~m}$ (水流)。$M$ 点体力需在救援队赶来前花光。因为江面太宽了，凭借你自己的力量不可能上岸。

请问，有多少种划桨的方案可以让你得救。

两个划桨方案不同是指：存在某一秒钟，一个方案划桨，另一个方案不划。

## 说明/提示

对于 $50 \%$ 的评测用例，$1 \leq T \leq 350$。

对于所有评测用例，$1 \leq T \leq 3000,1 \leq D \leq T，1 \leq M \leq 1500$。

蓝桥杯 2020 第三轮省赛 AB 组 I 题。

## 样例 #1

### 输入

```
1 6 3```

### 输出

```
5```

# AI分析结果



# 蓝桥杯 2020 省 AB3 画中漂流题解分析

---

## 算法分类
**线性DP**

---

## 题解思路与核心难点

### 核心思路
所有题解均采用二维动态规划，定义 `dp[i][j]` 表示经过 `i` 秒且剩余 `j` 体力时的可行方案数。关键点在于：

1. **状态转移方程**：`dp[i][j] = dp[i-1][j] + dp[i-1][j+1]`
   - `dp[i-1][j]`：第 `i` 秒不划桨，继承上一秒的体力
   - `dp[i-1][j+1]`：第 `i` 秒划桨，消耗 1 点体力

2. **安全条件验证**：计算 `d + 2*(m-j) - i > 0`，确保当前位置未掉入峡谷

### 解决难点
- **状态定义**：需同时考虑时间和体力两个维度
- **位置计算**：推导出 `d + 2*(已用体力) - 时间 > 0` 的安全条件
- **边界处理**：初始化 `dp[0][m] = 1`，最终答案锁定在 `dp[t][0]`

---

## 题解评分（≥4星）

### 1. FutureSnow（⭐⭐⭐⭐⭐）
- **亮点**：完整推导位置公式，代码清晰，包含详细注释
- **代码**：规范命名，显式取模操作

### 2. Dehydration（⭐⭐⭐⭐）
- **亮点**：三步法教学式分析，强调状态转移逻辑
- **特色**：包含特判条件的数学推导

### 3. 卷王（⭐⭐⭐⭐）
- **亮点**：代码简洁高效，转移方程与安全条件直观
- **优化**：使用紧凑的二维数组存储

---

## 最优思路提炼
1. **状态压缩**：仅需维护二维 DP 表，空间复杂度为 `O(T*M)`
2. **滚动数组优化**：可将空间优化至 `O(M)`（如 sheep_ly 的题解）
3. **统一安全条件**：`d + 2*(m-j) - i > 0` 是各题解的核心判断式

---

## 类似题目推荐
1. **P1048 采药**（0-1背包问题）
2. **P1091 合唱队形**（双向线性DP）
3. **P1434 滑雪**（记忆化搜索与DP结合）

---

## 核心代码实现
```cpp
// FutureSnow 题解核心片段
const int mod = 1e9 + 7;
int f[3030][3030];
int d, t, m;

int main() {
    cin >> d >> t >> m;
    f[0][m] = 1;
    for (int i = 1; i <= t; ++i) {
        for (int j = 0; j <= m; ++j) {
            int len = d + (m - j) - (i - (m - j));
            if (len > 0) {
                f[i][j] = (f[i - 1][j] + f[i - 1][j + 1]) % mod;
            }
        }
    }
    cout << f[t][0] << endl;
}
```

---

## 可视化设计（像素风格 DP 动画）

### 动画要素
1. **网格绘制**：Canvas 绘制 `T x M` 的网格，每个单元格表示 `dp[i][j]`
2. **颜色编码**：
   - 绿色：当前活跃单元格（`i,j`）
   - 黄色：转移来源（`i-1,j` 和 `i-1,j+1`）
3. **音效触发**：
   - "滴"声：正常状态转移
   - "叮"声：安全条件通过
4. **自动演示**：按时间步自动更新，支持暂停/步进

### 交互功能
- **速度调节**：滑动条控制 0.5x~5x 速度
- **高亮模式**：显示安全条件计算过程
- **数据追踪**：鼠标悬停显示 `d + 2*(m-j) - i` 的实时值

---

## 知识扩展
- **滚动数组技巧**：观察 sheep_ly 的题解，将空间从 `O(TM)` 优化到 `O(M)`
- **记忆化搜索**：封禁用户的题解展示了反向递归的实现思路

---

通过本案例可深入掌握二维线性 DP 的设计与优化，建议结合可视化工具动态观察状态转移过程以强化理解。

---
处理用时：49.35秒
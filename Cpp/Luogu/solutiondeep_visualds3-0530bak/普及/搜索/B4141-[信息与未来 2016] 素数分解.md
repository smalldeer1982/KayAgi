# 题目信息

# [信息与未来 2016] 素数分解

## 题目描述

素数，又称质数，是指除 $1$ 和其自身之外，没有其他约数的正整数。例如，$2,3,5,7,13$ 都是质数，而 $4,9,12,18$ 则不是。

虽然素数不能分解成除 $1$ 和其自身之外整数的乘积，但却可以分解成更多素数的和。你需要编程求出一个正整数最多能分解成多少个互不相同的素数的和。

## 说明/提示

### 样例 $\textbf 1$ 解释
$21=2+3+5+11$。
### 数据范围
$10\le n\le 200$。

**保证有解。**
> 本题原始满分为 $20\text{pts}$。

## 样例 #1

### 输入

```
21```

### 输出

```
4```

## 样例 #2

### 输入

```
128```

### 输出

```
9```

# AI分析结果

### 唯一算法分类
**DFS**

### 综合分析与结论
题目要求将一个正整数分解为最多不同素数的和，数据范围较小（n ≤ 200），适合使用深度优先搜索（DFS）进行暴力枚举。核心思路是：
1. **素数筛选**：预处理200以内的素数列表。
2. **DFS搜索**：从素数列表中选择或不选每个素数，累计和等于目标数时记录最大选择数量。
3. **剪枝优化**：当累计和超过目标数时提前终止搜索。

**难点与解决方案**：
- **素数预处理**：直接暴力判断每个数是否为素数，由于数据范围小，效率足够。
- **DFS剪枝**：及时终止无效路径（sum > n），避免不必要的递归。

**可视化设计思路**：
- **节点表示**：每个素数作为一个节点，选择或不选两种状态。
- **访问顺序**：按素数从小到大依次访问，标记已选节点。
- **动画效果**：高亮当前访问的素数，显示当前累计和与选择数量，剪枝时显示红色警示。

### 题解清单 (4星)
1. **lizhixun的DFS解法**  
   - **亮点**：简洁的DFS实现，有效剪枝，代码可读性强。
   - **评分**：4星（适合教学，但缺乏进一步优化如记忆化）。

### 最优思路或技巧提炼
- **素数预处理**：直接暴力判断，适合小数据范围。
- **DFS剪枝**：及时终止无效路径，显著提升效率。
- **状态传递**：通过参数传递当前和与选择数量，避免全局变量干扰。

### 同类型题或类似算法套路
- **子集和问题**：类似选择子集使和等于目标值。
- **组合问题**：从列表中选择若干元素满足特定条件。

### 推荐相似题目
1. P1036 选数（DFS子集和）
2. P1219 八皇后（DFS回溯）
3. P2392 kkksc03考前临时抱佛脚（DFS剪枝）

### 个人心得摘录
- **调试教训**：初始未剪枝导致超时，加入sum > n判断后效率提升。
- **顿悟感想**：小数据范围可直接暴力，无需复杂优化。

### 核心代码实现
```cpp
void dfs(int step, int sum, int num) {
    if (sum > n) return; // 剪枝
    if (sum == n) {
        maxn = max(maxn, num);
        return;
    }
    if (step == k + 1) return;
    dfs(step + 1, sum, num); // 不选
    dfs(step + 1, sum + pr[step], num + 1); // 选
}
```

### 可视化与算法演示
- **动画方案**：逐步显示DFS递归树，高亮当前选择的素数。
- **交互设计**：步进控制，显示当前路径和剪枝点。
- **复古风格**：8位像素风格显示素数节点，音效提示选择/剪枝。

### 复古游戏化动画效果
- **像素风格**：16色网格，素数节点为蓝色方块。
- **音效**：选择节点时播放“哔”声，剪枝时播放“咔”声。
- **自动演示**：按固定速度遍历所有可能路径，结束时显示最大解。

---
处理用时：28.78秒
# 题目信息

# Photo

## 题目描述

Farmer John 打算给他的 $n$ 头奶牛照相。

他们排成一条线，并且依次取 $1\sim n$ 作为编号。

每一张照片可以拍摄到这列奶牛中一个连续的区间中的奶牛。

对于每一头奶牛，FJ 都想要让 Ta 至少出现在一张照片里。

不幸的是，有 $k$ 对关系不好的奶牛，他们拒绝出现在同一张照片里。

已知所有关系不好的奶牛所在的位置，请计算出 FJ 需要的最小需要拍摄的照片数量。

## 说明/提示

#### 样例输入输出 1 解释

FJ 可以只拍三张照片：$[1,2]$，$[3,5]$，$[6,7]$。

---

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $2\le n\le10^9$，$1\le k\le1000$，$1 \leq a_i, b_i \leq n$。

## 样例 #1

### 输入

```
7 3
1 3
2 4
5 6
```

### 输出

```
3```

# AI分析结果

### 算法分类选择
**其他搜索**（本题核心是贪心算法，而非BFS/DFS）

### 题解思路、算法要点与解决难点
1. **核心思路**：将问题转化为经典的**区间取点问题**，即选择最少的断点，使得每对关系不好的奶牛之间至少有一个断点。
2. **算法要点**：
   - **排序处理**：将所有不友好的奶牛对按左端点（或右端点）排序。
   - **贪心策略**：每次选择当前区间的最右端点作为断点，尽可能覆盖更多后续区间。
3. **解决难点**：
   - **区间重叠处理**：如何处理相交或内含的区间，确保断点覆盖所有不友好对。
   - **边界条件**：处理区间端点是否包含断点的问题（如是否取 `b-1`）。

### 题解评分 (≥4星)
1. **哔哩哔哩 (5星)**：
   - 思路清晰，直接转化为区间取点问题。
   - 代码简洁，排序和贪心处理一气呵成。
   - 实践性强，适合快速实现。
2. **Mychael (4星)**：
   - 详细解释了区间贪心的原理。
   - 代码与哔哩哔哩类似，但解释更详细。
3. **嘒彼小星 (4星)**：
   - 提供了详细的博客链接，解释更深入。
   - 代码中处理了区间内含的情况，逻辑清晰。

### 最优思路或技巧提炼
1. **区间排序**：按左端点排序，便于贪心处理。
2. **贪心选择**：每次选择当前区间的最右端点，最大化覆盖范围。
3. **区间更新**：遇到内含区间时，更新当前右端点为更小的值。

### 同类型题或类似算法套路
- **区间调度问题**：如选择不重叠区间的最大数量。
- **区间覆盖问题**：用最少的点覆盖所有区间。
- **种树问题**：在区间内选择最少的点满足约束。

### 推荐相似题目
1. [P1803 凌乱的yyy / 线段覆盖](https://www.luogu.com.cn/problem/P1803)
2. [P1250 种树](https://www.luogu.com.cn/problem/P1250)
3. [P2082 区间覆盖](https://www.luogu.com.cn/problem/P2082)

### 个人心得摘录
- **哔哩哔哩**：提到与种树问题相似，强调了贪心的通用性。
- **嘒彼小星**：博客中详细记录了调试过程，强调了区间内含的处理。

### 可视化与算法演示
1. **动画方案**：
   - **初始化**：将所有区间按左端点排序，绘制在数轴上。
   - **贪心选择**：高亮当前区间，标记最右端点作为断点。
   - **区间更新**：遇到内含区间时，更新右端点并重新高亮。
2. **颜色标记**：
   - 当前区间：红色。
   - 已处理区间：绿色。
   - 断点：蓝色。
3. **步进控制**：允许单步执行，观察每一步的区间选择和断点标记。
4. **复古游戏化**：
   - **像素风格**：区间用像素方块表示，断点用闪烁的星星标记。
   - **音效**：选择断点时播放“叮”的音效，完成时播放胜利音效。

### 核心代码片段
```cpp
// 哔哩哔哩的代码核心部分
sort(interval, interval + K);
int cnt = 1, last = -1;
for (int i = 0; i < K; i++) {
    if (interval[i].l >= last) {
        cnt++;
        last = interval[i].r;
    } else if (interval[i].r < last) {
        last = interval[i].r;
    }
}
printf("%d", cnt);
```

### 可视化设计要点
1. **Canvas绘制**：用网格表示数轴，区间用矩形块表示。
2. **音效触发**：
   - 断点标记时：`audio.play('select')`。
   - 完成时：`audio.play('complete')`。
3. **自动演示**：按固定时间间隔步进，自动完成贪心选择。
4. **交互设计**：点击区间可查看详细信息，拖动调整区间位置。

---
处理用时：36.73秒
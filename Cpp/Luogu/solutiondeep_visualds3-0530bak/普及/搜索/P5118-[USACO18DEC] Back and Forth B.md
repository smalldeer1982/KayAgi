# 题目信息

# [USACO18DEC] Back and Forth B

## 题目描述

Farmer John 有两个挤奶棚，每个挤奶棚里各有一个奶罐和一个装有 $10$ 个各种尺寸的桶的储物柜。他喜欢将在两个挤奶棚之间来回运送牛奶作为一种锻炼方式。

周一，Farmer John 量了恰好 $1000$ 加仑的牛奶放在第一个挤奶棚的奶罐里，又量了恰好 $1000$ 加仑的牛奶放在第二个挤奶棚的奶罐里。

周二，他从第一个挤奶棚里取出一个桶，并装满牛奶，然后将牛奶运到第二个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第二个挤奶棚。

周三，他从第二个挤奶棚里取出一个桶（可能是周二留在这里的），并装满牛奶，然后将牛奶运到第一个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第一个挤奶棚。

周四，他从第一个挤奶棚里取出一个桶（可能是周三留在这里的），并装满牛奶，然后将牛奶运到第二个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第二个挤奶棚。

周五，他从第二个挤奶棚里取出一个桶（可能是周二或周四留在这里的），并装满牛奶，然后将牛奶运到第一个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第一个挤奶棚。

此时 Farmer John 测量了第一个挤奶棚的奶罐里的牛奶。他总共可能得到多少种不同的读数？


## 说明/提示

在这个例子中，最后第一个挤奶棚的奶罐中的牛奶量总共有 $5$ 种可能的结果：

$1000$：FJ 可以在每次往返的时候都携带同一个桶，从而不会改变第一个挤奶棚的奶罐的牛奶量。

$1003$：FJ 可以在周二运送 $2$ 个单位，周三 $5$ 个单位，周四 $1$ 个单位，周五 $1$ 个单位。

$1004$：FJ 可以在周二运送 $1$ 个单位，周三 $5$ 个单位，周四 $1$ 个单位，周五 $1$ 个单位。

$1007$：FJ 可以在周二运送 $1$ 个单位，周三 $5$ 个单位，周四 $2$ 个单位，周五 $5$ 个单位。

$1008$：FJ 可以在周二运送 $1$ 个单位，周三 $5$ 个单位，周四 $1$ 个单位，周五 $5$ 个单位。

## 样例 #1

### 输入

```
1 1 1 1 1 1 1 1 1 2
5 5 5 5 5 5 5 5 5 5```

### 输出

```
5```

# AI分析结果

### 算法分类
**DFS**

### 综合分析与结论
题目要求模拟Farmer John在五天内的牛奶运输过程，最终计算第一个挤奶棚可能的牛奶量。核心在于通过DFS枚举所有可能的桶运输组合，并跟踪牛奶量的变化。

**核心难点与解决方案：**
1. **状态表示**：需要跟踪每个桶的位置（在哪个挤奶棚）以及当前牛奶量。使用数组`pd`记录桶的位置，`t`记录桶的容量。
2. **DFS设计**：递归模拟每一天的运输过程，根据当前是奇数天还是偶数天决定从哪个挤奶棚运输桶到另一个。
3. **去重**：使用`vector`存储所有可能的最终牛奶量，并在添加前检查是否已存在。

**可视化设计思路：**
- **节点表示**：每个节点表示一个状态，包括当前星期几、第一个挤奶棚的牛奶量、各桶的位置。
- **边表示**：边表示运输某个桶的操作，权重为桶的容量。
- **颜色标记**：当前访问的节点用红色标记，已访问的节点用灰色标记，待访问的节点用绿色标记。
- **动画效果**：逐步展示DFS的递归过程，包括桶的移动和牛奶量的变化。

### 题解清单 (≥4星)
1. **Alex_Wei (赞：15)**
   - **星级**：5
   - **关键亮点**：使用DFS模拟运输过程，清晰的状态表示和回溯机制，代码简洁高效。
   - **个人心得**：通过`pd`数组跟踪桶的位置，避免了复杂的容器操作。

2. **Polarnova (赞：9)**
   - **星级**：4
   - **关键亮点**：分类讨论不同运输组合，使用`set`自动去重，思路独特。
   - **个人心得**：通过枚举所有可能的运输组合，简化了DFS的实现。

3. **lzqy_ (赞：6)**
   - **星级**：4
   - **关键亮点**：暴力DFS枚举桶的序号，模拟运输过程，代码可读性强。
   - **个人心得**：直接枚举序号简化了DFS的编写和调试。

### 代码粘贴与核心实现思想
**Alex_Wei的DFS核心代码：**
```cpp
void dfs(int w, int m) {
    if (w == 6) { // 星期六结束
        for (int x = 0; x < ans.size(); x++)
            if (m == ans[x]) return; // 去重
        ans.push_back(m);
        return;
    }
    for (int x = 1; x <= 20; x++) {
        if (w % 2 == 0 && pd[x] == 1) { // 偶数天，从第一个挤奶棚运输
            pd[x] = 2;
            dfs(w + 1, m - t[x]);
            pd[x] = 1; // 回溯
        }
        if (w % 2 == 1 && pd[x] == 2) { // 奇数天，从第二个挤奶棚运输
            pd[x] = 1;
            dfs(w + 1, m + t[x]);
            pd[x] = 2; // 回溯
        }
    }
}
```

### 可视化设计要点
- **复古像素风格**：使用8位色调色板，节点用不同颜色表示状态（红：当前，灰：已访问，绿：待访问）。
- **Canvas动画**：在网格中绘制节点和边，逐步展示DFS的递归过程。
- **音效提示**：访问新节点时播放轻微音效，找到解时播放成功音效。
- **自动演示**：设置自动播放模式，展示DFS的完整执行过程。

### 同类型题或类似算法套路
- **类似题目**：
  1. [P1135 奇怪的电梯](https://www.luogu.com.cn/problem/P1135)
  2. [P1443 马的遍历](https://www.luogu.com.cn/problem/P1443)
  3. [P1162 填涂颜色](https://www.luogu.com.cn/problem/P1162)

### 个人心得摘录
- **调试经历**：初始时忽略了桶的位置回溯，导致结果错误。通过添加`pd[x]`的回调解决了问题。
- **顿悟感想**：DFS的回溯机制非常适合模拟状态的变化和恢复，简化了复杂状态的跟踪。

### 推荐题目
1. [P1135 奇怪的电梯](https://www.luogu.com.cn/problem/P1135)
2. [P1443 马的遍历](https://www.luogu.com.cn/problem/P1443)
3. [P1162 填涂颜色](https://www.luogu.com.cn/problem/P1162)

---
处理用时：36.17秒
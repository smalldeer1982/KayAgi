# 题目信息

# [CEOI 2018] toy

## 题目描述

Johnny 喜欢收藏玩具。他收藏的玩具有很多不同的种类，每种玩具有很多个，而种类相同的两个玩具是无法区分的。

Emma 问 Johnny 他有几个玩具。然而 Johnny 并不愿意回答这个问题。

他告诉 Emma，如果他从所有玩具中选择一些不同的玩具，他可以玩 $n$ 天。换言之，这 $n$ 天中任意两天选择的玩具，存在一种玩具选择的数量不同。同时，选择的玩具集合是空集也是允许的。

Emma 并不想亲自计算这个答案，因此她把这个问题交给了你。你需要告诉她 Johnny 拥有的玩具的所有可能数量。


## 说明/提示

对于 $100\%$ 的数据， $1\le n\le 10^9$。

-----

**题目翻译By @StudyFather。**

## 样例 #1

### 输入

```
36```

### 输出

```
8
6 7 8 10 11 13 18 35```

# AI分析结果

# 算法分析与题解总结

## 算法分类
**DFS (深度优先搜索)**

## 题目分析
这道题的核心是找到所有可能的玩具数量组合，使得这些玩具的组合方式能产生恰好n天的不同选择。通过分析可以发现，每种玩具如果有k个，则会产生(k+1)种选择（包括0个），因此总天数是所有玩具(k_i+1)的乘积等于n。因此，我们需要找到n的所有因数分解方式，然后将每个因数减1，得到对应的玩具数量。

## 题解思路与难点对比
所有题解都采用了DFS来搜索n的所有因数分解方式，但在实现细节上有所不同：

1. **搜索起点**：大多数题解从2开始搜索，避免无效的1因数分解。
2. **剪枝策略**：通过限制搜索的上界为sqrt(n)来优化性能。
3. **结果处理**：需要去重和排序输出结果。

## 最优思路提炼
1. **DFS因数分解**：从2开始，递归地分解n的因数，确保因数不小于前一个因数（避免重复）。
2. **结果计算**：对于每个因数分解，计算对应的玩具数量总和（即所有因数减1的和加上剩余的数减1）。
3. **去重排序**：使用集合或排序后去重的方法处理结果。

## 题解评分 (≥4星)
1. **ikunTLE (5星)**：
   - 思路清晰，代码简洁。
   - 使用map去重，效率较高。
   - 完整实现了DFS和结果处理。

2. **Li_Feiy (4星)**：
   - 详细解释了题意和解题思路。
   - 代码结构清晰，使用了STL的unique去重。
   - 提供了良好的注释和解释。

3. **pxb0801 (4星)**：
   - 提供了详细的样例解释。
   - 代码实现简洁明了。
   - 使用了排序和unique去重，效率较高。

## 核心代码实现
```cpp
#include<bits/stdc++.h>
using namespace std;
set<int> a;
int n;
void dfs(int x, int q, int sum) {
    if(x >= q) a.insert(sum + x - 1);
    for(int i = q; i * i <= x; i++) 
        if(x % i == 0) dfs(x / i, i, sum + i - 1);
}
int main() {
    scanf("%d", &n);
    dfs(n, 2, 0);
    printf("%d\n", a.size());
    for(auto i : a) printf("%d ", i);
    return 0;
}
```

## 可视化算法分析
1. **搜索过程可视化**：
   - 可以展示DFS的递归树，每个节点表示当前的n值和搜索的下界。
   - 高亮当前处理的因数，以及如何分解剩余的数。

2. **复古游戏化效果**：
   - **像素风格**：使用8位风格的节点和边，不同颜色表示已访问和待访问节点。
   - **音效**：访问新节点时播放音效，找到解时播放成功音效。
   - **自动演示**：自动展示DFS的递归过程，步进控制允许用户单步执行。

## 同类型题目推荐
1. [P1025 数的划分](https://www.luogu.com.cn/problem/P1025)
2. [P1075 质因数分解](https://www.luogu.com.cn/problem/P1075)
3. [P1061 数列分段](https://www.luogu.com.cn/problem/P1061)

## 个人心得摘录
- **调试经历**：需要注意去重，否则会输出重复的结果。
- **踩坑教训**：搜索起点从2开始，避免无效的1因数分解。
- **顿悟感想**：将问题转化为因数分解后，思路变得清晰明了。

---
处理用时：29.35秒
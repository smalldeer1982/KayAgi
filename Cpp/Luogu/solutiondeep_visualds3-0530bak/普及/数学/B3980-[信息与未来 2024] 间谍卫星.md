# 题目信息

# [信息与未来 2024] 间谍卫星

## 题目描述

Dr. X 研制的间谍卫星拍摄到了许多 U 国建筑的照片。为了找出其中的军事设施，Dr. X 需要估算建筑的大小。Dr. X 发现，所有间谍卫星拍摄的照片都恰好包含一个完整的正方形，其中建筑边界上的像素被标记为了白色（用 $1$ 表示），其余像素被标记为了黑色（用 $0$ 表示）。一些照片的案例如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/5ponzg18.png)

你的任务是根据拍摄的照片估算被摄正方形的**边长** (米)。照片中的每个像素都代表一个一米乘一米的正方形。

## 说明/提示

本题仅有一个 $n\leq 100$ 的测试数据，且测试数据和样例数据的生成方式相同。

当你对一幅照片估计的边长和实际建筑边长差距不超过 $2$ 时，则认为估计正确。若估计正确的照片比例 $A > 0.5$，本题得分为 $(A − 0.5) \times 30$ 向下取整，否则得零分。

我们在生成每张照片时，都先在平面上生成一个随机的、边长为整数、边界宽度为 $1$ 像素的正方形，然后“拍摄”得到它的照片。

>本题原始满分为 $15\text{pts}$。

## 样例 #1

### 输入

```
见附件中的 sample.in```

### 输出

```
53```

# AI分析结果



**算法分类**  
几何  

---

### **题解思路、算法要点与解决难点**  
**核心思路对比**  
1. **周长法**：  
   - **公式推导**：正方形边界像素总和为 `4a - 4`（每个边 `a` 像素，四个角重复计算）。边长 `a = (总1的数目 / 4) + 1`。  
   - **正确性关键**：需在总像素数基础上加1，否则结果少1。  
   - **优势**：时间复杂度为 `O(n^2)`，无需复杂数据结构，代码简洁高效。  

2. **洪水填充法**：  
   - **核心步骤**：从外部起点（如 `(1,1)`）填充所有外部 `0`，剩余未被填充的 `0` 的数量即为面积，开平方得边长。  
   - **难点**：需确保填充起点在正方形外部，否则会错误填充内部区域。  
   - **优势**：对旋转、倾斜的正方形均适用，普适性强。  

3. **顶点坐标法**：  
   - **核心步骤**：寻找对角线顶点，计算欧氏距离后除以 `√2` 得边长。  
   - **难点**：需准确找到对角线顶点，易受噪声像素干扰。  

---

### **题解评分 (≥4星)**  
1. **Tonymcmcmc（5星）**  
   - **关键亮点**：正确实现周长法，统计所有 `1` 后加1，代码简洁高效。  
   - **代码片段**：  
     ```cpp
     for (int j=0; j<128; j++) {
         for (int k=0; k<128; k++) {
             cin >> c;
             if (c == '1') cnt++;
         }
     }
     cout << cnt / 4 + 1 << endl;
     ```  

2. **遥遥领先（4星）**  
   - **关键亮点**：洪水填充法正确计算面积，普适性强。  
   - **代码片段**：  
     ```cpp
     void bfs() {
         queue<node> q;
         q.push({1,1});
         a[1][1] = '1';
         while (!q.empty()) {
             node f = q.front();
             q.pop();
             for (int i=0; i<4; i++) {
                 int xx = f.x + dx[i], yy = f.y + dy[i];
                 if (xx>=1 && xx<=128 && yy>=1 && yy<=128 && a[xx][yy]=='0') {
                     a[xx][yy] = '1';
                     q.push({xx, yy});
                 }
             }
         }
     }
     ```  

3. **Mike_L（4星）**  
   - **关键亮点**：周长法加1修正，思路清晰，代码可读性高。  
   - **代码片段**：  
     ```cpp
     for (int i=1; i<=128; i++) {
         string s;
         cin >> s;
         for (int j=1; j<=128; j++) {
             ans += s[j] - '0';
         }
     }
     cout << ans / 4 + 1 << endl;
     ```  

---

### **最优思路或技巧提炼**  
1. **周长法公式修正**：  
   - 推导 `总1的数目 = 4(a-1)`，故 `a = 总数/4 + 1`。  
   - **关键点**：必须加1，否则少算一个单位边长。  

2. **洪水填充边界处理**：  
   - 起点选择 `(1,1)` 确保位于外部，填充后统计剩余 `0` 的个数。  

---

### **同类型题与通用思路**  
1. **通用几何公式**：  
   - 正方形周长、面积、对角线的关系（如 `C=4a`, `S=a²`, `d=√2 a`）。  
2. **洪水填充法**：  
   - 用于连通区域分割，如计算封闭区域面积。  

---

### **推荐题目**  
1. **P1162 填涂颜色**（洪水填充应用）  
2. **P2735 电网**（几何公式推导）  
3. **P1443 马的遍历**（BFS与坐标计算）  

---

### **可视化与算法演示**  
**动画方案**：  
1. **周长法可视化**：  
   - **高亮像素遍历**：逐行扫描 `1` 的像素，累加计数。  
   - **公式推导动画**：动态显示 `总数/4 + 1` 的计算过程。  
   - **颜色标记**：已统计的 `1` 显示为绿色，当前像素为红色。  

2. **洪水填充法可视化**：  
   - **填充扩散动画**：以BFS队列扩展形式展示填充过程。  
   - **面积计算**：填充后剩余 `0` 的像素高亮为蓝色，面积实时更新。  

**复古像素风格设计**：  
- **Canvas绘制**：128x128网格，像素块大小为4px，边界为黑色。  
- **音效**：填充时播放“滴答”声，计算完成时播放8-bit胜利音效。  
- **自动演示**：支持单步调试与自动播放，速度可调。  

---

**总结**：周长法（加1修正）是本题最优解，兼顾效率与正确性；洪水填充法普适性更强但实现稍复杂。

---
处理用时：182.81秒
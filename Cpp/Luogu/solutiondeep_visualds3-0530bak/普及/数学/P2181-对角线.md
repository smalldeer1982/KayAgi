# 题目信息

# 对角线

## 题目描述

对于一个 $n$ 个顶点的凸多边形，它的任何三条对角线都不会交于一点。请求出图形中对角线交点的个数。

例如，$6$ 边形：

![](https://cdn.luogu.com.cn/upload/pic/6023.png)

## 说明/提示

#### 数据规模与约定

- 对于 $50 \%$ 的数据，保证 $3 \leq n \leq 100$。
- 对于 $100 \%$ 的数据，保证 $3 \leq n \leq 10^5$。

## 样例 #1

### 输入

```
3```

### 输出

```
0```

## 样例 #2

### 输入

```
6```

### 输出

```
15```

# AI分析结果



## 算法分类
**组合数学**

---

### 题解思路与核心难点
**核心思路**：每个交点唯一对应4个顶点（四边形对角线交点），因此答案为组合数 $C(n,4)$。  
**推导关键**：  
1. 任取4个顶点确定一个四边形，其两条对角线产生1个交点。  
2. 三条对角线不会共点，保证每个交点只计算一次。  

**公式优化**：将原式 $n(n-1)(n-2)(n-3)/24$ 拆分为分步乘除，避免数值溢出：  
```cpp
ans = n * (n-1)/2 * (n-2)/3 * (n-3)/4;
```

---

### 高赞题解评分（≥4星）
1. **ww3113306（★★★★★）**  
   - **亮点**：公式推导清晰，分步计算优化解释透彻，代码简洁高效。  
   - **代码**：[见下方片段]  

2. **pengym（★★★★☆）**  
   - **亮点**：强调数据类型选择（`unsigned long long`），避免高精度计算。  

3. **peiyangsong（★★★★☆）**  
   - **亮点**：详细注释公式推导步骤，代码可读性高。  

---

### 最优思路提炼
- **组合数转换**：将几何问题转化为组合问题，关键在识别四点决定唯一交点。  
- **分步计算**：通过分解公式保证每一步整除，避免中间值溢出。  
- **数据类型选择**：使用 `unsigned long long` 处理大数范围。  

---

### 同类型题与套路
- **通用套路**：组合数解决唯一对应关系问题（如握手问题、图论边数计算）。  
- **相似题目**：  
  1. 洛谷 P2789：直线交点数（组合数学）  
  2. 洛谷 P1287：盒子与球（组合+排列）  
  3. 洛谷 P1313：计算系数（组合数+快速幂）  

---

### 代码实现
```cpp
#include <iostream>
using namespace std;

int main() {
    unsigned long long n;
    cin >> n;
    cout << n * (n-1) / 2 * (n-2) / 3 * (n-3) / 4;
    return 0;
}
```

---

### 可视化与算法演示
**动画设计**：  
1. **像素风格四边形生成**：Canvas绘制n边形，高亮随机4个顶点，显示对角线交点。  
2. **分步计算演示**：动态显示每一步乘除操作，颜色标记当前计算的数值。  
3. **音效提示**：每完成一步播放8-bit音效，最终答案出现时播放胜利音效。  

**交互功能**：  
- **步进控制**：允许用户单步执行公式计算，观察中间结果。  
- **自动模式**：AI自动推导，展示公式拆解过程（类似贪吃蛇路径演示）。  

---

### 复古游戏化效果（示例）
```javascript
// 伪代码：Canvas绘制分步计算
const steps = [
  {text: `n = ${n}`, color: '#FF0000'}, 
  {text: `n*(n-1)/2 = ${n*(n-1)/2}`, color: '#00FF00'},
  // ...后续步骤
];
steps.forEach((step, i) => {
  drawPixelText(step.text, x, y + i*16, step.color);
  playSound('beep'); // 8-bit音效
});
```

---

**总结**：通过组合数巧妙转化几何问题，分步计算优化确保效率与正确性，适合作为组合数学经典例题。

---
处理用时：70.67秒
# 题目信息

# [ICPC 2022 Jinan R] Identical Parity

## 题目描述

定义一个序列的 **权值** 等于这个序列所有的元素之和。

试判断：是否存在一个长度为 $n$ 的 **排列**，满足以下约束条件？

- 其所有长度为 $k$ 的 **子区间** 的权值具有相同的奇偶性。

## 样例 #1

### 输入

```
3
3 1
4 2
5 3```

### 输出

```
No
Yes
Yes```

# AI分析结果



### 唯一算法分类
**构造**

### 综合分析与结论
题目要求构造一个排列，使得所有长度为 $k$ 的子区间权值奇偶性相同。核心思路如下：  
- **当 $k$ 为偶数**：构造奇偶交替的序列，相邻子区间首尾元素奇偶性相同，总能满足条件，直接输出 `Yes`。  
- **当 $k$ 为奇数**：需满足奇偶数差的分块条件。将序列分为若干长度为 $k$ 的块，每个块奇偶差为 $1$，余数部分需调整整体差不超过 $1$。具体条件为：  
  - 余数 $r = n\%k \leq k/2$ 时，需满足 $\lfloor n/k \rfloor - r \leq 1$。  
  - 余数 $r > k/2$ 时，需满足 $\lfloor n/k \rfloor + r -k \leq 1$。

**可视化设计思路**：  
- **动画展示**：用颜色区分奇偶元素，逐步滑动子区间，高亮首尾元素奇偶性是否一致。  
- **复古风格**：采用 8-bit 像素风格，子区间移动时播放短促音效，条件满足时显示“Yes”并播放成功音效。

---

### 题解清单 (≥4星)
1. **作者：w9095（4.5星）**  
   - **亮点**：代码简洁，条件判断清晰，正确处理了余数的两种分情况讨论。  
   - **代码片段**：  
     ```cpp
     if (n%k <=k/2 && (n/k -n%k)<=1) printf("Yes\n");
     else if (n%k>k/2 && (n/k -k/2 + (n%k -k/2))<=1) printf("Yes\n");
     ```

2. **作者：lgydkkyd（4星）**  
   - **亮点**：逻辑与 w9095 类似，代码风格易读，注释清晰。  
   - **代码片段**：  
     ```cpp
     if(k/2>=n%k&&(n/k-n%k)<2)printf("Yes\n");
     else if(k/2<n%k&&(n/k-k/2+(n%k-k/2))<2)printf("Yes\n");
     ```

3. **作者：Thorongil_Gondor（4星）**  
   - **亮点**：使用 `int64` 处理大数，逻辑与上述解法一致。  
   - **代码片段**：  
     ```cpp
     if((k/2>=n%k && (n/k-n%k)<=1) || ...) cout<<"Yes\n";
     ```

---

### 最优思路或技巧提炼
1. **奇偶交替构造**：当 $k$ 为偶数时，直接构造奇偶交替序列。  
2. **分块与余数调整**：当 $k$ 为奇数时，通过分块和余数部分平衡奇偶差，利用数学条件判断可行性。  
3. **关键条件推导**：通过分析子区间滑动时首尾奇偶性一致性，推导出周期性结构和余数条件。

---

### 同类型题或类似算法套路
- **类似问题**：构造满足特定子数组条件的排列（如所有子数组和模某数相等）。  
- **通用思路**：利用周期性、奇偶性、差分约束或数学推导确定构造条件。

---

### 推荐相似题目
1. **P5485 [JLOI2011] 飞行路线**：涉及分块构造。  
2. **P2898 [USACO08JAN] Haybale Guessing G**：区间约束条件下的构造。  
3. **P1562 还是N皇后**：奇偶性布局的构造问题。

---

### 个人心得摘录
- **w9095**：通过分块和余数调整，将复杂问题转化为数学条件判断，避免暴力构造。  
- **CNS_5t0_0r2**：强调周期性结构的奇偶性必须一致，余数部分需补足差值。

---

### 可视化与算法演示
**核心算法动画设计**：  
1. **奇偶交替模式**：用蓝/红色块表示奇偶元素，滑动窗口时高亮首尾颜色是否一致。  
2. **分块与余数调整**：将序列分为多个 $k$ 长度的块，余数部分动态调整颜色，统计奇偶差。  
3. **复古风格**：采用 8-bit 像素动画，窗口滑动时播放“嘀”声，条件满足时显示像素烟花特效。

**代码片段（伪代码）**：  
```javascript
// 绘制奇偶交替序列
function drawEvenK() {
  for (let i = 0; i < n; i++) {
    ctx.fillStyle = i % 2 === 0 ? "blue" : "red";
    fillRect(i * BLOCK_SIZE, 0, BLOCK_SIZE, BLOCK_SIZE);
  }
}
// 检查奇数条件
function checkOddK(n, k) {
  const m = Math.floor(n / k), r = n % k;
  return (r <= k/2 && m - r <= 1) || (m + r - k <= 1);
}
```

---
处理用时：265.74秒
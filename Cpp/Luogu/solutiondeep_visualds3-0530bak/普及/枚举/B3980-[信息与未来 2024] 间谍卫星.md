# 题目信息

# [信息与未来 2024] 间谍卫星

## 题目描述

Dr. X 研制的间谍卫星拍摄到了许多 U 国建筑的照片。为了找出其中的军事设施，Dr. X 需要估算建筑的大小。Dr. X 发现，所有间谍卫星拍摄的照片都恰好包含一个完整的正方形，其中建筑边界上的像素被标记为了白色（用 $1$ 表示），其余像素被标记为了黑色（用 $0$ 表示）。一些照片的案例如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/5ponzg18.png)

你的任务是根据拍摄的照片估算被摄正方形的**边长** (米)。照片中的每个像素都代表一个一米乘一米的正方形。

## 说明/提示

本题仅有一个 $n\leq 100$ 的测试数据，且测试数据和样例数据的生成方式相同。

当你对一幅照片估计的边长和实际建筑边长差距不超过 $2$ 时，则认为估计正确。若估计正确的照片比例 $A > 0.5$，本题得分为 $(A − 0.5) \times 30$ 向下取整，否则得零分。

我们在生成每张照片时，都先在平面上生成一个随机的、边长为整数、边界宽度为 $1$ 像素的正方形，然后“拍摄”得到它的照片。

>本题原始满分为 $15\text{pts}$。

## 样例 #1

### 输入

```
见附件中的 sample.in```

### 输出

```
53```

# AI分析结果



**唯一算法分类**  
无算法分类（数学推导）

---

### **题解思路与算法要点**

1. **核心思路**  
   题目要求估算正方形边长，关键在于理解正方形边界的像素数量即为周长。根据数学推导，周长等于4倍边长，因此统计所有1的个数后除以4即可得到边长。

2. **解决难点**  
   - **正确性验证**：需验证题目生成的正方形边界的周长是否为4a。根据题目生成逻辑（边界宽度为1），每个边的像素数等于边长，四个角点被共享，总周长像素数为4a。
   - **优化对比**：直接统计像素数（时间复杂度O(n²)）远优于洪水填充或顶点查找方法，后者虽正确但实现复杂。

3. **关键结论**  
   周长法（统计1的数量/4）是最优解，时间与空间复杂度均为O(n²)，无需复杂数据结构。

---

### **题解评分 (≥4星)**

1. **tanzexiaodezhonghao（5星）**  
   - **亮点**：思路简洁，代码高效，直接数学推导，无需冗余操作。
   - **代码**：统计1的个数后直接返回`cnt/4`。

2. **遥遥领先（4星）**  
   - **亮点**：洪水填充法正确且普适性强，适用于任意闭合形状的面积计算。
   - **优化点**：填充外部区域后统计剩余0的个数，开平方得边长。

3. **王逸辰（4星）**  
   - **亮点**：代码简洁，直接实现周长法，与最优解一致。

---

### **最优思路与技巧提炼**

1. **数学建模**  
   - 正方形周长公式直接关联像素数，避免复杂几何计算。
   - **关键公式**：`边长 = 1的个数 / 4`。

2. **代码优化**  
   - 输入时实时统计1的个数，避免存储整个矩阵，节省空间。

---

### **相似题目推荐**

1. **P1001 计算线段长度**（勾股定理应用）  
2. **P1059 矩阵面积计算**（几何形状的像素统计）  
3. **P1217 正方形计数**（边界像素与几何形状关系）

---

### **可视化与算法演示**

**核心算法过程（周长法）**  
1. **像素遍历动画**：  
   - 以网格展示输入图像，遍历每个像素时，若为1则高亮为黄色，计数器递增。
   - **动态显示**：实时更新统计值，最终显示`cnt/4`的结果。

2. **复古像素风格设计**：  
   - **颜色方案**：黑色背景（0），黄色高亮（1），红色显示计数结果。
   - **音效**：每次统计1时播放8-bit“收集”音效，计算完成时播放胜利音效。

3. **交互控制**：  
   - 支持暂停/继续，调整遍历速度（慢/中/快）。

**代码片段（可视化核心逻辑）**  
```javascript
// 伪代码：遍历统计1的个数
let cnt = 0;
for (let i = 0; i < 128; i++) {
  for (let j = 0; j < 128; j++) {
    if (grid[i][j] === 1) {
      cnt++;
      highlightPixel(i, j, 'yellow'); // 高亮当前像素
      playSound('beep'); // 触发音效
      await delay(speed); // 控制动画速度
    }
  }
}
showResult(cnt / 4); // 显示最终结果
```

---

### **个人心得摘录**

- **调试教训**：部分题解因字符串下标错误导致WA，需注意输入格式。
- **思维顿悟**：题目本质是数学问题，而非图像处理，避免过度设计算法。

---

### **题解代码**

**最优解代码（tanzexiaodezhonghao）**  
```cpp
#include<bits/stdc++.h>
using namespace std;
int n, cnt;
char x;
int main() {
    cin >> n;
    while (n--) {
        cnt = 0;
        for (int j = 1; j <= 128; j++)
            for (int k = 1; k <= 128; k++) {
                cin >> x;
                cnt += (x - '0');
            }
        cout << cnt / 4 << endl;
    }
    return 0;
}
```

---
处理用时：195.87秒
# 题目信息

# 血小板与凝血因子

## 题目背景

为了尽快修复伤口，血小板们正在搬运凝血因子。它们（没毛病）正在讨论怎么分配，因为它们太可爱了，所以就让你来解决这个问题。

![](https://i.loli.net/2018/10/05/5bb7372e781b1.jpg)

## 题目描述

血小板们有两种不同的容器，第一种容器每个容器中只能装同一种凝血因子，第二种容器每个容器中每种凝血因子最多出现一次。为了方便，血小板们想用**同一种**容器装下所有的凝血因子。

换句话说，把 $n$ 个正整数 $a_1$ ~ $a_n$ 分成一些不相交的集合 $S_1$ ~ $S_m$，满足以下两个条件**之一**： 
1. $\forall a_i,\ a_j\in S_k,\ k\in [1,\ m]$ 有 $a_i=a_j$
2. $\forall a_i,\ a_j\in S_k,\ k\in [1,\ m],\ i\neq j$ 有 $a_i\neq a_j$

因为血小板的数量比较少，所以你要把所有的凝血因子装到尽量少的容器里。它们想知道，如何划分能使容器的总数最小。

## 说明/提示

$1\le n\le 1000,\ \ 1\le a_i\le 10^9$。

## 样例解释

### 样例一：

选用第二种容器，分别放入 $\{4\}$，$\{3,1,2,4,5\}$，$\{4\}$，这是一组可行的最优解，更改三个容器的顺序、容器 $2$ 中 $5$ 个凝血因子的顺序可以得到另外的最优解。

### 样例二/三：

这两组样例输入相同，既可以选用第一种容器，也可以选用第二种容器。

两组样例的输出分别为一组可行的最优解，改变顺序可以得到另外的几组最优解。

### 样例四：

选用第一种容器，分别放入 $\{3,3,3\}$，$\{2,2\}$，这是一组可行的最优解，更改两个容器的顺序可以得到另一组最优解。

## 样例 #1

### 输入

```
7
1 2 3 5 4 4 4```

### 输出

```
3 2
1 4
5 3 1 2 4 5
1 4```

## 样例 #2

### 输入

```
3
20181110 20181111 20181111```

### 输出

```
2 1
1 20181110
2 20181111 20181111```

## 样例 #3

### 输入

```
3
20181110 20181111 20181111```

### 输出

```
2 2
2 20181110 20181111
1 20181111```

## 样例 #4

### 输入

```
5
3 2 3 2 3```

### 输出

```
2 1
3 3 3 3
2 2 2```

# AI分析结果



**唯一算法分类**：统计与贪心

---

### **题解思路、算法要点与解决难点**

**核心思路**：
- **容器1**的最小容器数为不同凝血因子的种类数（记为`k`）。
- **容器2**的最小容器数为同一凝血因子出现的最大次数（记为`m`）。
- 比较`k`和`m`，选择更小者对应的容器类型，按对应规则分组输出。

**算法要点**：
1. **统计凝血因子出现次数**：通过排序后遍历或哈希表（如`map`）统计每个数的出现次数。
2. **分组输出逻辑**：
   - 容器1：每个容器输出同一凝血因子及其所有出现。
   - 容器2：每个容器包含每个凝血因子的一个实例，按出现次数分层分配。

**解决难点**：
- **统计效率**：需高效统计不同数的种类及最大出现次数。哈希表或排序后遍历均可实现。
- **分组实现**：容器2的分组需将每个数的出现次数拆分为不同层，需遍历每个数的出现次数。

---

### **题解评分（≥4星）**
1. **南城忆潇湘（4星）**  
   - **亮点**：使用`map`统计次数，代码简洁，处理迭代器删除逻辑清晰。
   - **不足**：变量名易混淆（`ans1`为容器2数量，`ans2`为容器1数量）。

2. **MarchKid_Joe（4星）**  
   - **亮点**：排序后统计次数，注释详细，输出逻辑直观。
   - **不足**：容器2的分组需多次遍历所有数，时间复杂度略高。

3. **VenusM1nT（4星）**  
   - **亮点**：代码简洁，使用`map`去重，分组逻辑清晰。
   - **不足**：未处理`map`中计数为0的元素删除，可能影响效率。

---

### **最优思路与技巧提炼**
1. **统计优化**：
   - 使用`map`或`unordered_map`快速统计出现次数，时间复杂度为`O(n log n)`。
   - 排序后遍历统计，时间复杂度为`O(n log n)`，但常数较小。

2. **分组技巧**：
   - **容器1**：直接遍历每个数的所有出现。
   - **容器2**：按每个数的出现次数分层，将每层的实例分配到对应容器。

3. **代码实现**：
   ```cpp
   // 统计出现次数及最大次数
   map<int, int> cnt;
   int max_count = 0;
   for (int num : nums) {
       cnt[num]++;
       max_count = max(max_count, cnt[num]);
   }
   int type1 = cnt.size();
   int type2 = max_count;
   ```

---

### **同类型题与算法套路**
- **类似问题**：元素分组问题，如分糖果、任务调度等。
- **通用解法**：统计频率后贪心选择最优分组策略。

---

### **推荐题目**
1. **P1090 [NOIP2004 提高组] 合并果子**（贪心分组）
2. **P1803 凌乱的yyy / 线段覆盖**（活动选择问题）
3. **P3817 小A的糖果**（贪心分配）

---

### **个人心得摘录**
- **南城忆潇湘**：删除`map`元素时需注意迭代器失效，需用临时变量保存迭代器。
- **ouuan**：使用`unique`函数去重需结合排序，避免逻辑错误。

---

### **可视化与算法演示**
**核心逻辑动画设计**：
1. **统计阶段**：
   - **像素风格**：每个凝血因子用不同颜色方块表示，方块高度表示出现次数。
   - **动画**：方块从输入序列中升起，同类方块叠加，动态更新最大高度（容器2数量）和颜色种类数（容器1数量）。

2. **分组阶段**：
   - **容器1**：同色方块堆叠到同一容器，容器数量等于颜色种类数。
   - **容器2**：按最大高度分层，每层从各颜色方块中取一个放入对应容器。

**交互设计**：
- **控制面板**：暂停/继续、步进、速度调节。
- **音效**：方块升起时播放音效，分组完成时播放成功音效。

**复古风格实现**：
```javascript
// 示例：Canvas绘制凝血因子方块
function drawBlock(x, y, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x * 10, y * 10, 8, 8); // 8x8像素方块
}
```

---

### **代码实现（关键逻辑）**
```cpp
// 容器2分组代码（MarchKid_Joe题解片段）
for (int i = 1; i <= ans2; i++) {
    int ans = 0;
    for (int j = 1; j <= ans1; j++) {
        if (d[j].sum >= i) {
            num[++ans] = d[j].r;
        }
    }
    printf("%d", ans);
    for (int j = 1; j <= ans; j++) {
        printf(" %d", num[j]);
    }
    printf("\n");
}
```

---
处理用时：132.59秒
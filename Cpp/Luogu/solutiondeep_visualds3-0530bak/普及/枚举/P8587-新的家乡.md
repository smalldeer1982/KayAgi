# 题目信息

# 新的家乡

## 题目背景

2102 年，太阳系的生态终于不再支持人类的生存。人类打算沿着之前建好的星际长途路线去往金牛座蟹状星云中的某行星 $\beta$ 谋求发展。


## 题目描述

你作为第一批科研人员，提前来到了 $\beta$ 星建造基地。

$\beta$ 星盛产锰钛矿石。基地需要一些**高度相同**的柱子，而每根柱子都需要由**恰好**两根锰钛矿石顺次连接组成。例如，若你有两根高度分别为 $h_x,h_y$ 的锰钛矿石，那么你可以用两者合成为一根高度为 $h_x+h_y$ 的柱子。每根锰钛矿石**显然至多被使用一次**。

现在你来到了 $\beta$ 星的锰钛矿场，摆在你面前的是 $n$ 根高度分别为 $h_i$ 的锰钛矿石。经过严密思考后你发现，房屋的牢固程度应该取决于柱子的数目，而不是柱子的高度。所以你想知道，使用面前这 $n$ 根矿石最多可以建造出多少根高度相同的柱子？

但小花觉得这个问题太 easy 了，于是 ta 选择多问你一嘴：假设柱子高度均为 $h$，基地最多可以建出 $\mathrm{res}$ 根柱子，那么在柱子数目同为 $\mathrm{res}$ 时 $h$ 可以有几种不同的取值？

## 说明/提示

额外样例见附加文件 `ex.in/out`。

对于 $20\%$ 的数据，$1\leq n\leq 100$。

对于 $40\%$ 的数据，$1\leq n \leq 10^3$。

对于 $70\%$ 的数据，$1\leq n\leq 10^5$。

对于 $100\%$ 的数据，$1\leq n\leq 10^6$，$1\leq h_i \leq 3\times 10^3$。


## 样例 #1

### 输入

```
4
4 7 6 5```

### 输出

```
2 1```

## 样例 #2

### 输入

```
6
1 1000 100 1500 10 1800```

### 输出

```
1 15```

# AI分析结果



## 算法分类
桶计数、枚举

## 题解思路与难点分析
### 核心思路
题目要求在给定矿石高度的情况下，找出能组成最多相同高度柱子的数量及对应的高度种数。利用桶计数统计各高度矿石出现次数，枚举所有可能的柱子高度 S（2~6000），针对每个 S 遍历 j（1~S/2）计算矿石对数目。关键点在于避免重复计算，当 j 与 S-j 不同时取 min(b[j],b[S-j])，相同时取 b[j]//2。

### 解决难点
1. **数据规模处理**：n 达 1e6 但 h_i 仅到 3e3，使用桶计数将时间复杂度从 O(n²) 降为 O(V²)。
2. **去重机制**：通过限制 j 的遍历范围（j ≤ S/2）避免同一矿石对被多次统计。
3. **特殊配对处理**：当 j = S-j 时，只能取矿石数量的一半。

## 题解评分（≥4星）
- **xixisuper（4星）**  
  思路清晰，通过限制 j ≤ (i-1)/2 避免重复，代码结构简洁，包含详细样例分析。
  
- **Albert_Wei（4星）**  
  代码规范，使用 j ≤ (i-1)/2 处理遍历范围，单独处理偶数情况，逻辑严谨。

- **bloodstalk（4星）**  
  使用双循环枚举所有可能 S，代码简洁高效，时间复杂度控制得当。

## 最优思路提炼
1. **桶计数预处理**：统计各高度矿石出现次数。
2. **枚举目标高度 S**：范围从最小可能值到最大可能值的两倍。
3. **配对遍历优化**：遍历 j 到 S/2，确保每个矿石对只计算一次。
4. **动态更新结果**：维护最大柱子数及其对应的高度种数。

## 同类型题推荐
1. **P1102 A-B数对**（桶计数求配对）
2. **P1638 逛画展**（滑动窗口与计数结合）
3. **P2671 求和**（值域枚举与数学优化）

## 可视化算法演示
```python
# 伪代码示例：动态展示枚举过程
for S in 2..6000:
    total = 0
    for j in 1..S//2:
        if j == S - j:
            total += bucket[j] // 2
        else:
            total += min(bucket[j], bucket[S-j])
    update_max_and_count(S, total)
```
**动画设计**：  
- **高亮当前 S**：以红色边框标记当前计算的柱子高度。
- **配对展示**：用绿色连线显示 j 与 S-j 的矿石对，黄色标记已计算的矿石。
- **结果更新**：实时显示当前最大柱子数及对应高度种数。

## 核心代码实现
```cpp
int cnt[3005] = {0}; // 桶计数
for (int i = 1; i <= 6000; i++) {
    int sum = 0;
    for (int j = max(i - 3000, 0); j <= (i - 1) / 2; j++) {
        sum += min(cnt[j], cnt[i - j]);
    }
    if (i % 2 == 0) sum += cnt[i / 2] / 2; // 处理偶数情况
    if (sum > res) res = sum, ans = 1;
    else if (sum == res) ans++;
}
```

## 复古游戏化设计
- **像素风格界面**：矿石显示为 8x8 像素块，不同高度用不同颜色表示。
- **音效触发**：每次成功配对播放“哔”声，更新最大值时播放胜利音效。
- **自动演示模式**：按 S 从小到大自动播放，速度可调节，展示每步计算过程。

---
处理用时：133.34秒
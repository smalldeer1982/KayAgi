# 题目信息

# [Code+#4] 喵呜

## 题目描述

在马路边有一排整齐的 $n$ 棵樱花树，每棵树的高度都恰好为 $h$。某天，一只可爱的小猫偶然跑到树上来玩，但是这只小猫有些对樱花过敏，所以她现在想赶快离开这些樱花树。

具体来说，现在小猫位于第 $x$ 棵樱花树上高度为 $y$ 的位置，她可以通过两种跳跃来离开樱花树：

轻轻跳：向左或向右移动 $a$ 棵樱花树的同时，所在高度下降 $b$，即一次轻轻跳可以从起点移动到第 $x+a$ 或 $x-a$ 棵树上高度为 $y-b$ 的位置，注意当小猫所在高度不大于 $b$ 时不可以使用轻轻跳。

使劲跳：向左或向右移动 $a$ 棵樱花树的同时，所在高度上升 $b$，即一次使劲跳可以从起点移动到第 $x+a$ 或 $x-a$ 棵树上高度为 $y+b$ 的位置，注意当小猫所在高度大于 $h-b$ 时不可以使用使劲跳。

为了离开这片樱花树，小猫需要移动到第 $1$ 或第 $n$ 棵树上，高度为 $h$ 或 $1$ 的位置（这样她可以呼吸新鲜空气或者直接走开樱花树）。现在小猫想知道，自己最少需要多少次跳跃才能达成目标。由于她是一只可爱的小猫，所以希望由你来告诉她。


## 说明/提示

| 测试点编号 | $n,h$ 的范围 | 特殊约定 |
| :----------: | :----------: | :----------: |
|$1,2$  | $\le10$ | $b=1$ |
|$3,4$  |  $\le10$| $a=b=1$ |
|$5,6,7,8$  |$\le10$  | 无 |
|$9,10$  | $\le500$ | $b=1$ |
|  $11,12$| $\le500$ | $a=b=1$ |
|$13,14,15$  | $\le500$ | 无 |
|$16,17$  | $\le10^5$ | $h\le10$ |
|$18,19,20$  | $\le10^5$ | 无 |
| $21,22$ | $\le10^{15}$ | $h\le10$ |
| $23,24,25$ | $\le10^{15}$ | 无 |

对于所有数据，保证 $n \geq 2$，$a < n$，$b \leq h$。

Credit: https://www.luogu.org/discuss/show/38908

## 样例 #1

### 输入

```
3
5 5 3 3 2 2
5 7 3 5 2 2
5 7 4 6 1 1```

### 输出

```
1
1
1```

## 样例 #2

### 输入

```
3
5 5 3 3 3 2
5 7 1 4 2 2
5 7 1 2 1 2```

### 输出

```
-1
-1
-1```

## 样例 #3

### 输入

```
4
999999999999 999999999999 454545454545 454545454545 1 1
777777777777 777777777777 343434343434 343434343434 1 1
777777777777 999999999999 343434343434 454545454545 1 1
999999999999 777777777777 454545454545 343434343434 1 1```

### 输出

```
454545454544
343434343433
-1
-1```

# AI分析结果



**唯一算法分类**：数学/数论

---

### **题解思路、算法要点与解决难点**

#### **核心思路**
1. **坐标分解**：将目标分解为水平（x轴）与垂直（y轴）两方向独立计算步数。
2. **整除条件**：水平方向总距离需为 `a` 的整数倍，垂直方向总距离需为 `b` 的整数倍。
3. **奇偶同步**：两个方向的步数差必须为偶数，确保可通过来回跳跃同步到达终点。

#### **算法流程**
1. **计算四个方向的步数**：
   - 水平左步数 `left = (x-1)/a`（若可整除）。
   - 水平右步数 `right = (n-x)/a`。
   - 垂直下步数 `down = (y-1)/b`。
   - 垂直上步数 `up = (h-y)/b`。
2. **组合验证**：检查四个角（左上、右上、左下、右下）的组合，满足整除且步数差为偶数。
3. **取最小值**：所有合法组合中取最大步数的最小值。

#### **解决难点**
- **同步条件**：发现步数差需为偶数是关键，确保通过来回跳跃同步两方向。
- **边界处理**：需单独处理无法整除的情况，避免无效计算。

---

### **题解评分（≥4星）**
1. **Rosemary_dream（5星）**
   - **亮点**：代码结构清晰，通过二维数组存储步数，逻辑简洁。
   - **代码**：预处理步数后遍历所有组合，高效筛选最优解。
2. **3_soon（4星）**
   - **亮点**：显式枚举四个角，条件判断直观，可读性强。
   - **代码**：直接处理四种组合，避免冗余循环。
3. **liangledong（4星）**
   - **亮点**：详细注释与边界条件处理，适合初学者理解。
   - **代码**：使用变量名明确（`l, r, u, d`），逻辑一目了然。

---

### **最优思路或技巧提炼**
- **数学建模**：将跳跃问题转化为两个独立方向的整除与奇偶性分析。
- **同步技巧**：通过偶数差条件实现两方向同步，无需模拟实际路径。
- **预处理步数**：先计算各方向步数再组合，避免重复计算。

---

### **同类型题或类似算法套路**
- **类似题目**：
  - **P1516 青蛙的约会**：同余方程与步数同步。
  - **CF4C Registration System**：哈希与数学条件判断。
  - **P3951 小凯的疑惑**：数论分析最大不可达数。

---

### **推荐相似知识点题目**
1. **P1516**：扩展欧几里得解同余方程。
2. **P3951**：数论分析最大不可达数。
3. **CF4C**：哈希与数学条件判断结合。

---

### **个人心得摘录**
- **Rosemary_dream**：  
  > “想通了也不难，但要先发现步数差需为偶数这一隐藏条件。”
- **liangledong**：  
  > “调试时发现 `1e9` 不够大，需用 `LLONG_MAX`，教训深刻。”

---

### **可视化与算法演示**

#### **动画设计**
1. **网格绘制**：  
   - 使用 Canvas 绘制 `n×h` 网格，小猫初始位置高亮为红色，目标角为绿色。
2. **步数计算**：  
   - 动态显示水平与垂直步数，以不同颜色标记合法/非法组合。
3. **同步跳跃**：  
   - 展示小猫在两个方向交替跳跃，步数差逐渐减小至零。

#### **复古像素风格**
- **视觉元素**：  
  - 8-bit 风格小猫精灵，跳跃时播放经典音效（如《超级玛丽》跳跃声）。
  - 网格线使用低饱和度色彩，目标角闪烁提示。
- **音效设计**：  
  - 成功时播放胜利音效，失败时短促“哔”声。

#### **交互功能**
- **步进控制**：  
  - 按钮控制单步执行，观察每一步的跳跃与条件更新。
- **自动演示**：  
  - AI 模式自动遍历所有合法路径，高亮最优解路径。

#### **代码片段（Canvas动画）**
```javascript
// 绘制网格与初始状态
ctx.fillStyle = '#FF0000';
ctx.fillRect(xPos * cellSize, yPos * cellSize, cellSize, cellSize);
// 更新位置并播放音效
function jump() {
  if (stepsX % 2 === stepsY % 2) {
    playSound('jump.wav');
    ctx.clearRect(...);
    // 更新坐标绘制
  }
}
```

---

### **总结**
通过数学建模与奇偶性分析，将复杂路径问题简化为整除与同步条件判断，代码高效且易于扩展。可视化设计通过复古风格与交互式演示，直观呈现核心逻辑。

---
处理用时：90.57秒
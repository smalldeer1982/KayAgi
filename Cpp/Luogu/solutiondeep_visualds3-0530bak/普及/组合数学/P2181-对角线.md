# 题目信息

# 对角线

## 题目描述

对于一个 $n$ 个顶点的凸多边形，它的任何三条对角线都不会交于一点。请求出图形中对角线交点的个数。

例如，$6$ 边形：

![](https://cdn.luogu.com.cn/upload/pic/6023.png)

## 说明/提示

#### 数据规模与约定

- 对于 $50 \%$ 的数据，保证 $3 \leq n \leq 100$。
- 对于 $100 \%$ 的数据，保证 $3 \leq n \leq 10^5$。

## 样例 #1

### 输入

```
3```

### 输出

```
0```

## 样例 #2

### 输入

```
6```

### 输出

```
15```

# AI分析结果



### 算法分类  
**组合数学**

---

### 题解思路与解决难点  
#### 核心思路  
**所有交点唯一对应四个顶点**。由于任意三条对角线不共点，每个交点由且仅由两条对角线（即四个顶点）确定。因此问题转化为计算组合数 $C(n,4)$。  

#### 关键难点与解决方案  
1. **公式推导**：  
   - 直接公式 $C(n,4) = \frac{n(n-1)(n-2)(n-3)}{24}$  
   - **防溢出优化**：通过分步乘除保证中间结果不溢出，即 `n*(n-1)/2 * (n-2)/3 * (n-3)/4`  
2. **数学验证**：证明分步除法每一步均为整除。  
   - 连续四个数中必含 2、3、4 的因子，确保计算正确性。  

---

### 题解评分 ≥4星  
#### 1. [ww3113306]（⭐⭐⭐⭐⭐）  
- **亮点**：清晰推导组合数逻辑，分步乘除优化防溢出，代码简洁高效。  
- **代码**：  
  ```cpp
  unsigned long long n, ans;
  ans = n * (n-1) / 2 * (n-2) / 3 * (n-3) / 4;
  ```

#### 2. [pengym]（⭐⭐⭐⭐）  
- **亮点**：解释公式与高精度取舍，验证数据范围适用性。  
- **代码**：同上，强调 `unsigned long long` 的可行性。  

#### 3. [peiyangsong]（⭐⭐⭐⭐）  
- **亮点**：将交点转化为四边形选择，强调组合数学本质。  
- **代码**：同上，注释详细。  

---

### 最优技巧提炼  
1. **组合数学建模**：将几何问题转化为组合数计算。  
2. **分步乘除防溢出**：按顺序除以 2、3、4，确保中间结果可控。  
3. **数学验证思维**：证明分步整除的必然性。  

---

### 同类型题目推荐  
1. **P2822 组合数问题**（组合数取模）  
2. **P1313 计算系数**（多项式展开与组合数）  
3. **P1066 2^k进制数**（组合数递推应用）  

---

### 个人心得摘录  
- **ww3113306**：  
  > “连续四个数中一定包含足够的因子，分步除尽的设计太妙了！”  
- **Slime**：  
  > “画图找规律后发现公式，验证了数学直觉的重要性。”  

---

### 可视化算法设计  
#### 核心动画方案  
1. **顶点选择动画**：  
   - **像素风格**：用 8-bit 方块表示顶点，逐步高亮选中的 4 个顶点。  
   - **对角线绘制**：选中顶点后，用不同颜色绘制两条对角线，交点闪烁显示。  
2. **公式计算演示**：  
   - **分步计算**：以滚动数字展示 `n*(n-1)/2` → `*(n-2)/3` → `*(n-3)/4` 的过程。  
   - **音效触发**：每完成一步播放“滴”声，最终结果出现时播放胜利音效。  

#### 复古交互设计  
- **Canvas 实现**：  
  ```javascript
  // 伪代码示例：绘制顶点与对角线
  function drawPolygon(n) {
    for (let i=0; i<n; i++) {
      const angle = 2*Math.PI*i/n;
      const x = centerX + radius * Math.cos(angle);
      const y = centerY + radius * Math.sin(angle);
      drawPixelSquare(x, y, 0xFF0000); // 8-bit 红色方块
    }
  }
  ```  
- **音效设计**：  
  - 关键步骤：8-bit “哔”声（Web Audio API 合成）。  
  - 错误提示：短促“嗡”声。  

---

### 代码实现（核心逻辑）  
```cpp
#include <iostream>
using namespace std;
int main() {
    unsigned long long n;
    cin >> n;
    cout << n * (n-1) / 2 * (n-2) / 3 * (n-3) / 4;
    return 0;
}
```

---
处理用时：90.71秒
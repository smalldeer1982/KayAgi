# 题目信息

# [蓝桥杯 2017 省 AB] 包子凑数

## 题目描述

小明几乎每天早晨都会在一家包子铺吃早餐。他发现这家包子铺有 $N$ 种蒸笼，其中第 $i$ 种蒸笼恰好能放 $A_i$ 个包子。每种蒸笼都有非常多笼，可以认为是无限笼。

每当有顾客想买 $X$ 个包子，卖包子的大叔就会迅速选出若干笼包子来，使得这若干笼中恰好一共有 $X$ 个包子。比如一共有 $3$ 种蒸笼，分别能放 $3$ 、 $4$ 和 $5$ 个包子。当顾客想买 $11$ 个包子时，大叔就会选 $2$ 笼 $3$ 个的再加 $1$ 笼 $5$ 个的（也可能选出 $1$ 笼 $3$ 个的再加 $2$ 笼 $4$ 个的）。

当然有时包子大叔无论如何也凑不出顾客想买的数量。比如一共有 $3$ 种蒸笼，分别能放 $4$ 、 $5$ 和 $6$ 个包子。而顾客想买 $7$ 个包子时，大叔就凑不出来了。

小明想知道一共有多少种数目是包子大叔凑不出来的。

## 说明/提示

对于样例 $1$，凑不出的数目包括：$1,2,3,6,7,11$。

对于样例 $2$，所有奇数都凑不出来，所以有无限多个。

蓝桥杯 2017 省赛 A 组 H 题。

## 样例 #1

### 输入

```
2  
4  
5  ```

### 输出

```
6```

## 样例 #2

### 输入

```
2  
4  
6   ```

### 输出

```
INF```

# AI分析结果



## 【唯一算法分类】
完全背包

---

## 【综合分析与结论】
**核心思路**：  
1. **裴蜀定理判断**：所有数互质时存在有限解，否则输出INF。  
2. **完全背包动态规划**：标记所有可凑出的数，统计未标记的数目。  

**难点与解决**：  
- 如何快速判断无限解？  
  利用裴蜀定理，计算所有数的最大公约数。若不为1，所有非倍数均不可凑，故INF。  
- 动态规划范围如何确定？  
  当互质时，最大不可凑数为 `max(a_i)^2`，故设定范围如1e5可覆盖所有情况。  

**关键算法流程**：  
1. 计算数组的GCD，非1则直接返回INF。  
2. 初始化dp[0]=True，表示0可凑出。  
3. 对每个数a_i，更新dp[j] |= dp[j - a_i]。  
4. 统计未标记的数目。  

**可视化设计**：  
- **像素动画**：以网格展示0~1e5的数，绿色表示可凑，红色不可。每步更新时高亮当前处理的a_i，播放"滴"音效。  
- **音效反馈**：成功标记时触发短促音效，发现INF时播放低沉错误音。  
- **AI自动模式**：自动遍历每个a_i，逐步展开背包更新过程，速度可调。  

---

## 【题解清单 (≥4星)】
1. **0x282e202e2029 (5星)**  
   - 详细数学证明，代码注释清晰，使用递归GCD。  
   - 动态规划采用max操作避免覆盖，确保正确性。  
   - 心得：强调`dp[0]=1`的重要性，避免漏判。  

2. **Liquid_Oxygen (4星)**  
   - 代码简洁，使用1e6范围确保覆盖，直接位运算更新。  
   - 快速判断互质，适合大数据场景。  

3. **5k_sync_closer (4星)**  
   - 同余最短路创新解法，扩展思路，复杂度稍高但理论性强。  

---

## 【最优思路与技巧提炼】
**关键技巧**：  
1. **裴蜀定理前置剪枝**：避免无效计算，时间复杂度O(1)。  
2. **滚动数组优化**：使用一维数组反向更新，空间O(M)。  
3. **bitset加速**：利用位运算批量更新状态，如`S |= S << a[i]`。  

**代码片段**：  
```cpp
// 裴蜀定理判断
int g = a[0];
for(int x : a) g = gcd(g, x);
if(g != 1) cout << "INF";

// 完全背包DP
dp[0] = 1;
for(int x : a) {
    for(int j = x; j <= 1e5; ++j) {
        dp[j] |= dp[j - x];
    }
}
```

---

## 【相似题目推荐】
1. **P2663 金币**：完全背包求方案数。  
2. **P4549 裴蜀定理**：直接应用定理判断。  
3. **P2370 yyy2015c01的背包**：大范围完全背包优化。  

---

## 【个人心得摘录】
- **调试教训**：`dp[0]必须初始化为1，否则所有数均无法凑出。` —— 0x282e202e2029  
- **优化顿悟**：`范围设1e5足够，实测max(a)^2理论成立。` —— Liquid_Oxygen  

---

## 【可视化与复古游戏设计】
**实现方案**：  
- **Canvas布局**：横向滚动条表示数轴，每个像素块代表100个数，颜色深浅反映是否可凑。  
- **像素动画**：  
  - 处理a_i时，该数对应的列闪烁黄色。  
  - 更新时绿色方块向右蔓延，伴随8-bit音效。  
- **音效设计**：  
  - 正常更新：短促“哔”声。  
  - 发现INF：播放经典FC失败音效。  
- **自动演示**：按空格暂停/继续，方向键调整速度。  

**代码片段（JS音效）**：  
```javascript
function playBeep() {
    const ctx = new AudioContext();
    const osc = ctx.createOscillator();
    osc.type = 'square';
    osc.frequency.setValueAtTime(800, ctx.currentTime);
    osc.connect(ctx.destination);
    osc.start(); osc.stop(ctx.currentTime + 0.1);
}
```

---
处理用时：58.29秒
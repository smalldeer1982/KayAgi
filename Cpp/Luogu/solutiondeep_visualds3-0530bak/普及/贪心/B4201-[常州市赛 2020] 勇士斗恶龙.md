# 题目信息

# [常州市赛 2020] 勇士斗恶龙

## 题目背景

搬运自 <http://czoj.com.cn/p/449>。数据为民间数据。

## 题目描述

小 $\text X$ 穿越到了异世界，国王命令他招揽勇士，杀死恶龙，救回公主。  
异世界是高度数据化的。恶龙有一个攻击力 $\text{ATK}$ ，一个生命值 $\text{HP}$ 。类似的，每个勇士也有一个攻击力 $A_i$ ，一个生命值 $H_i$ 。  
战斗是回合制的，并且每次只能由一个勇士和恶龙单挑。战斗中，每个回合恶龙的生命值会减去这个勇士的攻击力，这个勇士的生命值会减去恶龙的攻击力。如果回合结束的时候恶龙的生命值小于等于 $0$，那么恶龙就被杀死了；如果这个勇士的生命值小于等于 $0$，那么这个勇士就被击败了，需要换上另一个勇士继续战斗。当然，如果恶龙还没有被杀死，勇士却全部被击败了，那么这场战役就彻底失败了。  
不过聪明的小 $\text X$ 安排了一个特殊的战术：在一名勇士被击败后立刻让另一名勇士发起攻击，这样恶龙在勇士们的车轮战术下疲于招架，受到第二个勇士的伤害变为两倍，受到第三个勇士的伤害变为三倍……以此类推。  
现在一共有 $n$ 名勇士报名，小 $\text X$ 想问问你，如果合理安排勇士出战的顺序，最少要招揽多少名勇士才能杀死恶龙？

## 说明/提示

### 样例说明
- 两名勇士都招揽。先派出 $2$ 号勇士；  
- 第一回合，恶龙生命值变为 $8$，勇士生命值变为 $0$。勇士被击败；  
- 紧接着派出 $1$ 号勇士；  
- 第二回合，恶龙生命值变为 $4$ （两倍伤害），勇士生命值变为 $1$ ；  
- 第三回合，恶龙生命值变为 $0$ ，勇士生命值变为 $0$ 。恶龙被杀死；  
- 勇士虽然也被击败了，但恶龙已经死了，所以还是胜利了！  
### 数据范围
本题共有 $10$ 个测试点。  
对于所有数据，$1\le n\le 10^5,1\le\text{ATK}, A_i,H_i\le10^6,1\le \text{HP}\le 10^{18}$。  
|测试点编号|$n$|$\text{ATK}, A_i,H_i$|$\text{HP}$|
|:-:|:-:|:-:|:-:|
|$1\sim 4$|$\le 5$|$\le 10$|$\le 100$|
|$5\sim 7$|$\le 10^3$|$\le 10^3$|$\le 10^9$|
|$8\sim 10$|$\le 10^6$|$\le 10^6$|$\le 10^{18}$|

## 样例 #1

### 输入

```
2
1 9
2 2
1 1```

### 输出

```
2```

# AI分析结果



### 唯一算法分类
贪心 + 前缀和

### 题解思路与核心分析
1. **核心逻辑推导**  
   - 每个勇士的等效伤害计算为 $A_i \times \lceil H_i / \text{ATK} \rceil$，表示其能造成的总伤害。
   - 按等效伤害降序排序，确保高伤害勇士优先分配到更高倍数的位置。
   - 总伤害公式为 $\sum_{i=1}^k A_i \times (k - i + 1)$，通过前缀和增量维护，避免重复计算。

2. **解决难点**  
   - **贪心排序的正确性**：等效伤害大的勇士必须分配到高倍数的位置，以最大化总伤害。
   - **高效计算总和**：利用增量法（每次增加一个勇士时，总和累加当前所有选中的等效伤害），时间复杂度优化至 $O(n \log n)$。

3. **可视化设计**  
   - **动画方案**：  
     - **排序可视化**：将勇士的等效伤害以条形图展示，动态排序为降序排列，颜色由深到浅表示伤害大小。  
     - **累加过程**：选中勇士时，其对应的倍数（1, 2, 3...）动态显示，总伤害条逐步填充恶龙的HP条。  
     - **颜色高亮**：当前选中的勇士及其倍数变化用高亮颜色标记，恶龙HP条用红色渐变表示剩余血量。  
   - **交互设计**：  
     - **步进控制**：允许用户逐次添加勇士，观察总伤害变化。  
     - **音效提示**：选中勇士时播放轻微点击音效，总伤害达标时播放胜利音效。  

### 题解评分（≥4星）
1. **Sliarae（5星）**  
   - 思路清晰，推导严谨，利用增量法高效维护总伤害。  
   - 代码可读性强，变量命名合理，适用于大数据场景。  
   - 示例处理正确，时间复杂度最优。  

2. **Clare613（4星）**  
   - 代码简短但巧妙，通过升序排序后逆序选择实现等效降序效果。  
   - 变量名 `sum` 和 `suum` 不够直观，需推导才能理解。  

3. **Yi_chen123（4星）**  
   - 详细推导递推公式，明确总伤害的动态转移过程。  
   - 代码正确但变量命名稍显模糊（如 `x` 表示前缀和）。  

### 最优思路提炼
- **贪心排序**：将等效伤害降序排列，确保高伤害勇士分配到高倍数位置。  
- **前缀和优化**：通过增量累加计算总伤害，避免重复求和，时间复杂度 $O(n)$。  

### 相似题目推荐
1. **P1090** [合并果子](https://www.luogu.com.cn/problem/P1090)  
   - 贪心选择最小代价合并，优先队列优化。  
2. **P1080** [国王游戏](https://www.luogu.com.cn/problem/P1080)  
   - 贪心排序确定最优排列，最大化乘积最小值。  
3. **P1012** [拼数](https://www.luogu.com.cn/problem/P1012)  
   - 字符串排序组合最大数，类似贪心比较规则。  

### 关键代码片段
```cpp
// Sliarae 的代码核心逻辑
sort(a + 1, a + n + 1, greater<LL>());  // 降序排序
LL now = 0, sum = 0; 
for (int i = 1; i <= n; ++i) {
    now += a[i];        // 维护前缀和
    sum += now;         // 总伤害 = 前缀和的累加
    if (sum >= hp) {
        cout << i; 
        return 0;
    }
}
```

### 可视化与游戏化设计
- **复古像素风格**：勇士显示为不同颜色的像素方块，恶龙HP条用8位风格血槽。  
- **Canvas动画**：动态绘制勇士排序、选中过程及HP变化，音效使用Web Audio API。  
- **自动演示模式**：自动按最优顺序添加勇士，展示总伤害增长过程，过关后播放胜利音乐。  

--- 

通过以上分析，可明确贪心排序与前缀和优化是该题的核心解法，结合可视化设计可直观展示算法流程，增强理解。

---
处理用时：186.20秒
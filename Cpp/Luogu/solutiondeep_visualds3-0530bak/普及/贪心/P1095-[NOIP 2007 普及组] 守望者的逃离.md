# 题目信息

# [NOIP 2007 普及组] 守望者的逃离

## 题目背景

NOIP2007 普及组 T3

## 题目描述

恶魔猎手尤迪安野心勃勃，他背叛了暗夜精灵，率领深藏在海底的娜迦族企图叛变。

守望者在与尤迪安的交锋中遭遇了围杀，被困在一个荒芜的大岛上。

为了杀死守望者，尤迪安开始对这个荒岛施咒，这座岛很快就会沉下去。到那时，岛上的所有人都会遇难。

守望者的跑步速度为 $17m/s$，以这样的速度是无法逃离荒岛的。庆幸的是守望者拥有闪烁法术，可在 $1s$ 内移动 $60m$，不过每次使用闪烁法术都会消耗魔法值 $10$ 点。守望者的魔法值恢复的速度为 $4$ 点每秒，只有处在原地休息状态时才能恢复。

现在已知守望者的魔法初值 $M$，他所在的初始位置与岛的出口之间的距离 $S$，岛沉没的时间 $T$。你的任务是写一个程序帮助守望者计算如何在最短的时间内逃离荒岛，若不能逃出，则输出守望者在剩下的时间内能走的最远距离。

注意：守望者跑步、闪烁或休息活动均以秒为单位，且每次活动的持续时间为整数秒。距离的单位为米。


## 说明/提示

对于 $30\%$ 的数据，$1  \le  T   \le  10$，$ 1   \le   S   \le  100$；

对于 $50\%$ 的数据，$1   \le  T   \le   10^3$，$ 1   \le  S  \le   10^4$；

对于 $100\%$ 的数据，$1   \le   T   \le   3\times  10^5$，$0   \le   M   \le   10^3$，$ 1   \le  S   \le   10^8$。


## 样例 #1

### 输入

```
39 200 4
```

### 输出

```
No
197
```

## 样例 #2

### 输入

```
36 255 10```

### 输出

```
Yes
6```

# AI分析结果



### 综合分析与结论  
本题核心在于在时间限制内通过贪心策略选择最优移动方式（闪烁或跑步）。贪心策略的关键在于优先使用闪烁法术以获得更高速度，同时在无法施法时动态判断恢复魔法与跑步的收益。各题解通过维护闪现和跑步的最优距离，确保每一步选择当前最优路径，从而得到全局最优解。  

#### 核心贪心思路  
1. **优先使用闪烁**：当魔法值足够时，立即施法以最大化移动距离。  
2. **动态更新最优距离**：每一步取闪现和跑步的最大值，确保后续决策基于当前最优状态。  
3. **魔法恢复与跑步的权衡**：无法施法时，恢复魔法值并继续判断，若恢复后收益高于直接跑步则等待，否则跑步。  

#### 可视化设计  
- **动画方案**：用两个进度条分别表示闪现和跑步的累计距离，每帧更新后高亮当前最大值。  
- **颜色标记**：闪现操作标记为蓝色，跑步为绿色，最优路径用红色边框突出。  
- **步进控制**：允许单步执行观察每一步的决策过程，速度可调节。  
- **复古像素风格**：使用8-bit像素动画，音效提示关键操作（如施法成功、跑步更新）。  

---

### 题解清单 (≥4星)  
1. **wzr1125 (5星)**  
   - **亮点**：双变量动态维护最优距离，代码简洁高效，时间复杂度O(T)。  
   - **代码**：用`fla`和`run`分别记录闪现和跑步距离，每一步取最大值更新。  

2. **jingwenhan (4星)**  
   - **亮点**：两阶段处理（先全用闪现，再动态规划优化），清晰展示贪心与DP结合。  
   - **代码**：预处理全闪现情况，后续用DP比较跑步收益。  

3. **Cold_Eyes_bystander (4星)**  
   - **亮点**：模拟两人并行策略，形象化贪心选择，代码直观易理解。  
   - **代码**：维护两人距离，每次更新为更优者。  

---

### 最优代码片段  
```cpp
// wzr1125 的贪心核心代码
for(int i=1;i<=t;i++){ 
    if(m>=10) m-=10, fla +=60, run +=17;
    else m+=4, run +=17;
    if(fla > run) run = fla; // 动态更新最优距离
    if(run >= s) {
        cout << "Yes\n" << i;
        return 0;
    }
}
```

---

### 同类型题与算法套路  
- **贪心选择策略**：优先高收益操作，动态维护状态（如任务调度、跳跃游戏）。  
- **典型题目**：  
  - P1090 合并果子（优先队列贪心）  
  - P1803 线段覆盖（右端点排序贪心）  
  - P1223 排队接水（时间排序贪心）  

---

### 推荐相似题目  
1. **P1090** - 合并果子（贪心+优先队列）  
2. **P1803** - 线段覆盖（区间贪心）  
3. **P5019** - 铺设道路（差分贪心）  

---

### 个人心得摘录  
- **Asurudo**：初始贪心策略未考虑剩余时间与距离的边界条件，导致WA，调试后加入条件判断。  
- **wpy233**：通过分情况讨论剩余魔法值的处理，强调精细化策略的重要性。  

---

### 可视化与算法演示  
- **Canvas动画**：每秒更新闪现/跑步距离，高亮最优路径，背景为像素风格岛屿。  
- **音效设计**：  
  - 施法成功：清脆“叮”声。  
  - 跑步更新：脚步声。  
  - 达成最优：胜利音效。  
- **自动演示**：AI按最优策略自动执行，用户可暂停观察决策细节。  

```javascript
// 伪代码：Canvas绘制核心逻辑
function drawFrame(time) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawDistanceBar(flaDistance, "blue");
    drawDistanceBar(runDistance, "green");
    if (flaDistance > runDistance) {
        highlightBar(flaDistance, "red");
    } else {
        highlightBar(runDistance, "red");
    }
    // 触发音效
    if (isSpellUsed) playSound("spell.wav");
}
```

---

通过上述分析，本题的贪心策略高效且易于实现，核心在于动态维护每一步的最优状态，适用于类似的时间紧迫型最优路径问题。

---
处理用时：96.35秒
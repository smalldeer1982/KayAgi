# 题目信息

# 「RdOI R3」race

## 题目描述

某足球赛事上，A 国队和 B 国队共进行了 $n$ 场比赛。比赛采用积分赛制，胜者队伍得 $a$ 分，败者队伍得 $b$ 分，若打平则双方各得 $c$ 分。现已知 A 国队总进球数 $d$ 球，B 国队总进球数 $e$ 球，求 A 国队的最大可能得分和最小可能得分。

## 说明/提示

### 样例解释

为便于理解样例，现给出前三组数据的样例解释：

| 数据编号 | 最大得分方案                    | 最小得分方案                    |
| -------- | ------------------------------- | ------------------------------- |
| $1$      | $(1,0),(0,0),(2,1),(0,0),(2,1)$ | $(0,0),(5,0),(0,1),(0,0),(0,1)$ |
| $2$      | $(0,0),(0,5),(0,0),(0,0),(0,0)$ | $(0,1),(0,1),(0,1),(0,1),(0,1)$ |
| $3$      | $(3,2),(0,2),(3,2)$             | $(6,6),(0,0),(0,0)$             |

表格中的 $(x_1,y_1),(x_2,y_2),\cdots,(x_n,y_n)$ 表示第 $1$ 场比分为 $x_1:y_1$，第 $2$ 场比分为 $x_2:y_2$，以此类推。

---

### 数据范围

**本题采用捆绑测试。**

对于所有数据，$1\le T\le 10^5$，$1\le n \le 10^9$
，$0\le d,e\le10^9$，$0\le b\le c \le a\le10^9$。

| subtask | 分值 | 特殊限制             | subtask 依赖 |
| ------- | ---- | -------------------- | ------------ |
| $1$     | $10$ | $e=0$                | 无           |
| $2$     | $20$ | $n,d,e\le 5,T\le100$ | 无           |
| $3$     | $20$ | $n\le 5$             | $2$          |
| $4$     | $50$ | 无                   | $1,3$        |



## 样例 #1

### 输入

```
5
5 3 0 2 5 2
5 5 2 3 0 5
3 100 1 2 6 6
5 9 0 2 3 9
4 5 0 5 1 3```

### 输出

```
13 7
14 10
201 6
29 0
15 5```

# AI分析结果



### 综合分析与结论

**题目核心**：在给定总进球数的约束下，通过贪心策略最大化/最小化 A 队的得分，需巧妙分配「赢、输、平」的场次。

**核心难点**：
1. **贪心性质证明**：最大得分时输的场次 ≤1，最小得分时赢的场次 ≤1。这一性质将问题简化到只需枚举两种极端情况。
2. **数学建模**：对总进球数进行合理分配，确保每场进球数符合胜负或平的条件，同时满足总进球数的约束。
3. **边界处理**：如总进球数不足以支持全赢/全输时的平局分配。

**贪心策略**：
- **最大得分**：尝试两种方案：(1) 不输任何场次，尽可能多赢；(2) 输 1 场，剩余场次尽可能赢。取两者最大值。
- **最小得分**：尝试两种方案：(1) 不赢任何场次，尽可能多输；(2) 赢 1 场，剩余场次尽可能输。取两者最小值。

---

### 题解评分与亮点

1. **yzy1（★★★★★）**  
   **亮点**：  
   - 明确贪心性质（输/赢场次 ≤1），大幅简化问题。  
   - 代码简洁高效，直接枚举关键情况，数学推导清晰。  
   **核心代码**：
   ```cpp
   // 最大得分两种情况
   ll case1 = min(n, d - e) * a + (n - min(n, d - e)) * c;
   ll case2 = min(n-1, d) * a + (e ? b : c) + (n-1 - min(n-1, d)) * c;
   mx = max(case1, case2);
   ```

2. **EnofTaiPeople（★★★★☆）**  
   **亮点**：  
   - 分类讨论（d-e 正负）覆盖所有可能性。  
   - 数学公式直接计算得分，避免冗余条件分支。  
   **核心思路**：  
   ```cpp
   if (d > e) {
       // 输 1 场后尽可能赢，或直接全赢
   } else if (d == e) {
       // 全平或输 1 场后赢
   }
   ```

3. **小小小朋友（★★★★☆）**  
   **亮点**：  
   - 处理极端情况（如 d-e ≥n）直接得全胜分。  
   - 单独处理 n=1 的边界条件。  
   **代码片段**：  
   ```cpp
   if (d - e >= n) return a * n; // 全胜
   if (n == 1) { /* 单场处理 */ }
   ```

---

### 最优思路提炼

**关键贪心策略**：
1. **输赢场次合并**：将多场输/赢合并为 1 场，利用 b≤c≤a 的性质优化总分。
2. **数学分配**：用总进球差 `d-e` 计算可赢的最大场次，剩余场次平局。
3. **极值枚举**：仅需枚举输 0/1 场（最大得分）或赢 0/1 场（最小得分）的情况。

**实现公式**：
- **最大得分**：`max(全赢 + 平局, 输1场 + 剩余赢/平)`  
  \( \text{max\_score} = \max\left(a \cdot \min(n, d-e) + c \cdot (n - \min(n, d-e)),\ a \cdot \min(n-1, d) + b + c \cdot (n-1 - \min(n-1, d))\right) \)
- **最小得分**：`min(全输 + 平局, 赢1场 + 剩余输/平)`  
  \( \text{min\_score} = \min\left(b \cdot \min(n, e-d) + c \cdot (n - \min(n, e-d)),\ b \cdot \min(n-1, e) + a + c \cdot (n-1 - \min(n-1, e))\right) \)

---

### 同类题目推荐

1. **P1223 排队接水**：贪心选择最小等待时间。  
2. **P1090 合并果子**：优先队列实现最小代价合并。  
3. **P5019 铺设道路**：区间覆盖问题，贪心选择连续区间。

---

### 可视化算法设计

**核心贪心过程演示**：
1. **像素风格界面**：  
   - 用绿色块表示赢场（+a分），红色块表示输场（+b分），黄色块表示平局（+c分）。  
   - 显示当前策略（如“全赢”或“输1场后全赢”）。

2. **动态分配演示**：  
   - **步骤1**：尝试分配全赢场次，计算总分。  
   - **步骤2**：尝试输 1 场后分配剩余赢场，计算总分。  
   - **高亮差异**：用闪烁效果标出两种策略得分不同的场次。

3. **音效与动画**：  
   - 分配赢场时播放上升音调，输场时下降音调，平局中性音调。  
   - 最终得分时播放胜利音效（最大）或失败音效（最小）。

**交互设计**：  
- **滑块控制**：调整总进球数 `d` 和 `e`，实时更新得分计算。  
- **自动演示**：AI 自动切换策略，展示最优解的选择过程。

---

### 代码实现（关键逻辑）

```cpp
// 最大得分计算
ll max_score = 0;
// 方案1：不输，尽可能多赢
ll win_all = min(n, d - e) * a + max(0, n - (d - e)) * c;
// 方案2：输1场，剩余尽可能赢
ll lose_one = (e > 0 ? b : c) + min(n-1, d) * a + max(0, (n-1) - d) * c;
max_score = max(win_all, lose_one);

// 最小得分计算
ll min_score = INF;
// 方案1：不赢，尽可能多输
ll lose_all = min(n, e - d) * b + max(0, n - (e - d)) * c;
// 方案2：赢1场，剩余尽可能输
ll win_one = (d > 0 ? a : c) + min(n-1, e) * b + max(0, (n-1) - e) * c;
min_score = min(lose_all, win_one);
```

---

**总结**：本题通过贪心性质将问题简化为有限情况的枚举，结合数学公式高效计算极值，是贪心策略与数学推导结合的典型例题。

---
处理用时：113.33秒
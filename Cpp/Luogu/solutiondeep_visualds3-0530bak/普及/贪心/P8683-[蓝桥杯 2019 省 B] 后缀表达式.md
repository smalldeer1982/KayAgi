# 题目信息

# [蓝桥杯 2019 省 B] 后缀表达式

## 题目描述

给定 $N$ 个加号、 $M$ 个减号以及 $N+M+1$ 个整数 $A_1,A_2,\cdots,A_{N+M+1}$，小明想知道在所有由这 $N$ 个加号、 $M$ 个减号以及 $N+M+1$ 个整数凑出的合法的后缀表达式中，结果最大的是哪一个。

请你输出这个最大的结果。

例如使用 `1 2 3 + -`，则 `2 3 + 1 -` 这个后缀表达式结果是 $4$，是最大的。

## 说明/提示

对于所有评测用例，$0 \le N,M \le 10^5$，$-10^9 \le A_i \le 10^9$。

蓝桥杯 2019 年省赛 B 组 I 题。

## 样例 #1

### 输入

```
1 1
1 2 3```

### 输出

```
4```

# AI分析结果



### 综合分析与结论

**题目核心**：利用后缀表达式隐含的括号特性，构造最大结果。  
**难点**：常规贪心策略无法处理括号带来的符号变化，需将中间数转化为绝对值相加。  
**贪心策略**：当存在至少一个减号时，最大值 = 最大数 - 最小数 + 其余数绝对值之和。无减号时直接相加。

**算法关键步骤**：
1. 排序数组。
2. 最大数减最小数（若存在减号）。
3. 中间数取绝对值累加。

**可视化设计**：
- **复古像素风格**：数值以彩色方块展示，最大/最小数高亮，绝对值转换时闪烁。
- **动画流程**：排序→高亮最大/最小→逐步累加绝对值（步进显示）。
- **音效**：选择数时触发清脆音效，完成步骤时播放胜利音效。

---

### 题解评分（≥4星）

1. **wangyishan（5星）**  
   - 详细反例验证，正确性分析透彻，代码简洁。
2. **MTF_Lambda_04（4星）**  
   - 核心思路正确，代码高效，但排序方式需读者适应。
3. **liangbob（4星）**  
   - 代码清晰，直接升序排序处理，逻辑简明。

---

### 最优思路与代码实现

**核心贪心逻辑**：  
```cpp
sort(a, a + n + m + 1);
if (m == 0) {
    sum = accumulate(a, a + n + m + 1, 0LL);
} else {
    sum = a[n + m] - a[0];
    for (int i = 1; i < n + m; i++) sum += abs(a[i]);
}
```

**完整代码**（升序排序版）：
```cpp
#include <iostream>
#include <algorithm>
using namespace std;
using ll = long long;

int main() {
    int n, m;
    cin >> n >> m;
    int len = n + m + 1;
    ll a[len];
    for (int i = 0; i < len; i++) cin >> a[i];
    
    sort(a, a + len);
    ll sum = 0;
    if (m == 0) {
        for (int x : a) sum += x;
    } else {
        sum = a[len-1] - a[0];
        for (int i = 1; i < len-1; i++) sum += abs(a[i]);
    }
    cout << sum;
    return 0;
}
```

---

### 同类型题目推荐

1. **P1223 排队接水**（贪心排序）  
2. **P1803 线段覆盖**（区间贪心）  
3. **P1090 合并果子**（优先队列应用）

---

### 个人心得摘录

- **MTF_Lambda_04**：初始贪心失败后意识到括号影响，调试发现需处理绝对值。  
- **wangyishan**：通过构造中缀表达式反推后缀特性，验证贪心正确性。  
- **关键教训**：后缀表达式隐含括号，需跳出简单排序加减的局限。

---

### 可视化与游戏化设计

**动画流程**：  
1. 初始数组降序排列，最大数红色，最小数蓝色。  
2. 红色方块飞向“+”区，蓝色飞向“-”区。  
3. 其他方块变黄（取绝对值）后移至“+”区。  
4. 实时显示总和增长，背景音乐随进度变化。

**游戏化要素**：  
- **积分系统**：正确选择数获得积分，连击加分。  
- **自动演示**：AI模拟贪心过程，用户可调速或单步观察。  
- **8-bit音效**：选择数时“哔”，完成时播放胜利旋律。

---
处理用时：183.67秒
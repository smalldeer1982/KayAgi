# 题目信息

# [蓝桥杯 2018 省 B] 日志统计

## 题目描述

小明维护着一个程序员论坛。现在他收集了一份“点赞”日志，日志共有 $N$ 行。其中每一行的格式是 `ts id`，表示在 $ts$ 时刻编号 $id$ 的帖子收到一个“赞”。

现在小明想统计有哪些帖子曾经是“热帖”。如果一个帖子曾在任意一个长度为 $D$ 的时间段内收到不少于 $K$ 个赞，小明就认为这个帖子曾是“热帖”。

具体来说，如果存在某个时刻 $T$ 满足该帖在 $[T,T+D)$ 这段时间内（注意是左闭右开区间）收到不少于 $K$ 个赞，该帖就曾是“热帖”。

给定日志，请你帮助小明统计出所有曾是“热帖”的帖子编号。

## 说明/提示

对于 $50\%$ 的数据，$1 \le K \le N \le 1000$。

对于 $100\%$ 的数据，$1 \le K \le N \le 10^5$，$0 \le id, ts \le 10^5$。

时限 1 秒, 256M。蓝桥杯 2018 年第九届省赛

## 样例 #1

### 输入

```
7 10 2  
0 1  
0 10    
10 10  
10 1  
9 1
100 3  
100 3  ```

### 输出

```
1  
3  ```

# AI分析结果



---

**唯一算法分类**：滑动窗口/双指针

---

### **综合分析与结论**

本题核心在于高效判断每个帖子是否存在长度为D的窗口包含至少K个赞。通过预处理排序与滑动窗口的结合，可在O(N)时间内解决。

**核心算法流程**：  
1. **预处理排序**：按id分组，组内按时间排序。  
2. **滑动窗口检查**：维护窗口左右指针，确保窗口内时间差<D，统计赞数是否≥K。  

**可视化设计思路**：  
- **动画方案**：在时间轴上高亮当前窗口范围，动态移动左右指针。  
- **颜色标记**：用不同颜色区分当前处理的帖子id，窗口内元素高亮为绿色，过期元素为红色。  
- **步进控制**：允许单步执行观察指针移动与计数变化。  
- **复古风格**：采用8位像素风格显示时间轴，音效在窗口满足条件时播放上扬音调。  

---

### **题解清单 (≥4星)**

1. **5k_sync_closer (5星)**  
   - **亮点**：线性复杂度，直接扫描时间轴，动态维护每个帖子的赞数，无需分组处理。  
   - **代码简洁**：仅需两个循环，空间优化明显。  

2. **Zaku (4星)**  
   - **思路清晰**：按时间排序后全局双指针维护窗口，实时更新每个id的赞数。  
   - **代码可读性高**：逻辑明确，适合教学演示。  

3. **_Wind_Leaves_ShaDow_ (4星)**  
   - **优化程度高**：分组后用单调队列维护窗口，避免重复计算。  
   - **结构体排序预处理**：确保处理顺序合理。  

---

### **最优思路与代码实现**

**关键思路**：  
- **分组排序**：按id和时间排序，确保同一id的日志连续。  
- **滑动窗口**：维护窗口内时间差<D，统计赞数。  

**核心代码（5k_sync_closer）**：  
```cpp
vector<int> v[100050];
for (int i = 0; i <= 1e5; ++i) {
    if (i >= d)
        for (auto j : v[i - d]) --c[j];  // 移除过期赞
    for (auto j : v[i])
        if (++c[j] >= k) b[j] = 1;      // 更新当前赞并检查条件
}
```

---

### **同类型题与推荐**

1. **滑动窗口模板**：洛谷 P1886  
2. **双指针应用**：LeetCode 76. Minimum Window Substring  
3. **时间窗口统计**：洛谷 P1712 [NOI2016] 区间  

---

### **个人心得摘录**

- **边界处理**：注意时间区间左闭右开，窗口右端点需严格小于T+D。  
- **预处理排序**：排序后同一id的日志连续，简化后续处理。  
- **空间优化**：避免为每个id单独维护队列，减少内存消耗。  

---

### **可视化与复古游戏化设计**

- **8位像素风格**：时间轴以网格显示，每个时间点用方块表示，不同id对应不同颜色。  
- **音效触发**：窗口满足条件时播放“过关”音效，指针移动时伴随“滴答”声。  
- **自动演示**：AI模式自动推进时间轴，动态调整窗口，展示最优解生成过程。  

**Canvas绘制片段**：  
```javascript
function drawWindow(start, end) {
    ctx.fillStyle = '#00FF00'; // 窗口高亮
    ctx.fillRect(start * scaleX, 0, (end - start) * scaleX, canvas.height);
}
```

---
处理用时：93.42秒
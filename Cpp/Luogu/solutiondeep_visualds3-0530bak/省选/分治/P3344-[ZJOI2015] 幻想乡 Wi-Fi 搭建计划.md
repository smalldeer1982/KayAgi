# 题目信息

# [ZJOI2015] 幻想乡 Wi-Fi 搭建计划

## 题目描述

傲娇少女幽香是一个很萌很萌的妹子。随着科技的进步，幻想乡的大家也开始使用手机了。这时幽香发现没人来她的太阳花田玩了，她感到很伤心，于是向别人打听了一下，才知道原来大家都嫌弃这里没有 Wi-Fi，手机上网还需要流量。

怎么办呢？幽香决定赶快搭建几个 Wi-Fi 点，让所有人都能在太阳花田里畅快地上网。

我们可以近似地把太阳花田看成一个 $y$ 轴在 $[0,R]$ 之间，$x$ 坐标在 $(-\infty,+\infty)$（也就是在 $x$ 轴上无限延伸）的无限长方形。

太阳花田里面有 $n$ 个景点，是游客们经常光顾的，幽香认为只要让这些景点尽量被 Wi-Fi 覆盖，那么游客们就肯定心满意足了。

八云紫表示她可以帮幽香架设 Wi-Fi 路由器。现在通用的路由器，每个的覆盖半径正好也是 $R$。八云紫扫视了一遍地图，发现在太阳花田外面，只有 $m$ 个有网络的地点，她只可以在那里架设路由器。如果你在点 $p$ 搭建了路由器，那么位于 $q$ 的地点，只要 $p$ 和 $q$ 的欧几里得距离小于等于 $R$，$q$ 点就会被 Wi-Fi 覆盖。

同时八云紫表示，架设难度随着地点的不同而不同，所以收费也不一样，在第 $i$ 个位置架设需要 $c_i$ 的钱。

现在幽香想要覆盖尽量多的景点，在这个前提下，幽香也想要尽量节省钱。你能帮助她吗？

## 说明/提示

- 对于 $10\%$ 的数据，$n,m\le 20$；
- 对于另 $30\%$ 的数据，$n,m\le 100$，所有网络架设点的 $y$ 坐标都大于 $R$；
- 对于另 $60\%$ 的数据，$n,m\le 100$。

对于全部数据，$1\le R\le 10^8,0\le c\le 10^4$。

## 样例 #1

### 输入

```
10 10 10000
6743 2963
3505 1986
3565 7235
1735 5522
16877 5597
11621 6
3100 8243
1750 6173
5709 7671
7915 3915
14339 -438 3075
4278 15210 8371
13996 19000 6750
17049 -4969 7788
737 16339 2934
904 14023 2322
8982 14759 4311
13102 11458 5554
4135 12183 576
5087 -2459 6787```

### 输出

```
10
10438```

# AI分析结果



---

**唯一算法分类**：动态规划（区间覆盖模型）

---

### 综合分析与结论

**核心思路**：  
1. **预处理**：剔除无法被任何圆覆盖的景点，并按 x 坐标排序剩余景点。  
2. **动态规划状态设计**：`dp[i][j][k]` 表示处理到第 i 个景点时，最后一个使用的上侧圆为 j，下侧圆为 k 的最小费用。  
3. **状态转移**：枚举当前景点可用的圆，若与上一个状态使用的圆不同则累加费用。  
4. **结论保证**：通过几何排序确保圆覆盖的景点是连续区间，避免重复计算费用。  

**难点与突破**：  
- **几何性质推导**：利用圆在区域外且景点排序后的单调性，证明每个圆覆盖的景点为连续区间，使得动态规划可行。  
- **状态压缩**：仅记录最近使用的上/下侧圆，避免维护完整覆盖历史，将复杂度控制在 O(nm²)。  

**可视化设计**：  
- **动态网格展示**：在 Canvas 中绘制排序后的景点（绿色方块）和路由器（红色/蓝色圆点），高亮当前处理的景点。  
- **状态转移动画**：用箭头连接旧状态 (j, k) 到新状态 (l, k) 或 (j, l)，显示费用变化数值。  
- **复古音效**：  
  - 选中圆时播放短促“滴”声（Web Audio API 合成方波）。  
  - 更新最优解时播放 8-bit 胜利音效。  

---

### 题解清单（≥4星）

1. **luogu_gza（★★★★）**  
   - **亮点**：代码结构清晰，预处理阶段明确；状态转移逻辑紧凑。  
   - **个人心得**：通过 `vis[]` 数组快速剔除无效点，优化后续计算。  

2. **Fan_sheng（★★★★）**  
   - **亮点**：代码更简洁，初始化时巧妙将无效点设为极大值，排序后自然剔除。  
   - **关键技巧**：在 `check` 函数中直接返回布尔值，提升可读性。  

---

### 最优思路与代码实现

**核心逻辑代码**：  
```cpp
// 动态规划转移部分
for (int i = 1; i <= n; i++)
  for (int j = 0; j <= m; j++)
    for (int k = 0; k <= m; k++)
      for (int l = 1; l <= m; l++)
        if (check(i, l)) {
          if (圆 l 在上侧) {
            dp[i][l][k] = min(dp[i][l][k], 
              dp[i-1][j][k] + (j != l) * c[l]);
          } else {
            dp[i][j][l] = min(dp[i][j][l],
              dp[i-1][j][k] + (k != l) * c[l]);
          }
        }
```

**完整代码**：见原题解（略）  

---

### 同类题目推荐

1. **P1944 最接近的分数**  
   - 区间覆盖与动态规划结合。  
2. **P2334 [ZJOI2005]午餐时间**  
   - 动态规划优化选择策略。  
3. **P2306 被污染的牛奶**  
   - 多状态 DP 处理覆盖问题。  

---

### 可视化与复古动画设计

**像素风格实现**：  
- **Canvas 初始化**：创建 800x600 画布，景点用 8x8 绿色方块，路由器用红蓝圆点。  
- **动画步骤**：  
  1. 从左到右绘制排序后的景点序列。  
  2. 高亮当前处理的景点 i，遍历所有圆 l。  
  3. 若圆 l 可覆盖 i，显示覆盖区域（半透明圆）。  
  4. 更新 DP 表格时，在右侧面板显示 `dp[i][j][k]` 数值变化。  

**音效设计**：  
- **覆盖成功**：短促“哔”声（使用 `OscillatorNode` 生成 800Hz 方波）。  
- **最优解更新**：播放 3 音阶上升旋律。  

**交互功能**：  
- **步进控制**：空格键单步执行，方向键调整动画速度。  
- **自动模式**：AI 按排序顺序自动选择圆，模拟最优路径。  

---

通过上述设计，学习者可直观理解动态规划的状态转移与几何性质应用，同时复古元素增强学习趣味性。

---
处理用时：65.56秒
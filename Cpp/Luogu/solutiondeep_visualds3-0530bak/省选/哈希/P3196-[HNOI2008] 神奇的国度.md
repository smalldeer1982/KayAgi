# é¢˜ç›®ä¿¡æ¯

# [HNOI2008] ç¥å¥‡çš„å›½åº¦

## é¢˜ç›®æè¿°

Kå›½æ˜¯ä¸€ä¸ªçƒ­è¡·ä¸‰è§’å½¢çš„å›½åº¦,è¿äººçš„äº¤å¾€ä¹Ÿåªå–œæ¬¢ä¸‰è§’åŸåˆ™.ä»–ä»¬è®¤ä¸ºä¸‰è§’å…³ç³»:å³ABç›¸äº’è®¤è¯†,BCç›¸äº’è®¤è¯†,CAç›¸äº’è®¤è¯†,æ˜¯ç®€æ´é«˜æ•ˆçš„.ä¸ºäº†å·©å›ºä¸‰è§’å…³ç³»,Kå›½ç¦æ­¢å››è¾¹å…³ç³»,äº”è¾¹å…³ç³»ç­‰ç­‰çš„å­˜åœ¨.

æ‰€è°“Nè¾¹å…³ç³»,æ˜¯æŒ‡Nä¸ªäºº A1A2...Anä¹‹é—´ä»…å­˜åœ¨Nå¯¹è®¤è¯†å…³ç³»:(A1A2)(A2A3)...(AnA1),è€Œæ²¡æœ‰å…¶å®ƒè®¤è¯†å…³ç³».æ¯”å¦‚å››è¾¹å…³ç³»æŒ‡ABCDå››ä¸ªäºº AB,BC,CD,DAç›¸äº’è®¤è¯†,è€ŒAC,BDä¸è®¤è¯†.å…¨æ°‘æ¯”èµ›æ—¶,ä¸ºäº†é˜²æ­¢åšå¼Šï¼Œè§„å®šä»»æ„ä¸€å¯¹ç›¸äº’è®¤è¯†çš„äººä¸å¾—åœ¨ä¸€é˜Ÿï¼Œå›½ç‹ç›¸çŸ¥é“ï¼Œæœ€å°‘å¯ä»¥åˆ†å¤šå°‘æ”¯é˜Ÿã€‚


## è¯´æ˜/æç¤º

ä¸€ç§æ–¹æ¡ˆ(1,3)(2)(4)


## æ ·ä¾‹ #1

### è¾“å…¥

```
4 5
1 2
1 4
2 4
2 3
3 4```

### è¾“å‡º

```
3```

# AIåˆ†æç»“æœ



## ç®—æ³•åˆ†ç±»  
å¼¦å›¾çš„æœ€å°æŸ“è‰²ï¼ˆè‰²æ•°é—®é¢˜ï¼‰

---

## ç»¼åˆåˆ†æä¸ç»“è®º  
### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹  
é¢˜ç›®æœ¬è´¨æ˜¯æ±‚å¼¦å›¾çš„è‰²æ•°ï¼Œå…¶ç­‰äºå¼¦å›¾çš„æœ€å¤§å›¢å¤§å°ã€‚å…³é”®éš¾ç‚¹åœ¨äºï¼š  
1. **å¼¦å›¾æ€§è´¨åº”ç”¨**ï¼šéœ€ç†è§£å¼¦å›¾çš„å®Œç¾æ¶ˆé™¤åºåˆ—ç‰¹æ€§ï¼Œåˆ©ç”¨å…¶è¿›è¡Œè´ªå¿ƒæŸ“è‰²ã€‚  
2. **é«˜æ•ˆç”Ÿæˆå®Œç¾æ¶ˆé™¤åºåˆ—**ï¼šæœ€å¤§åŠ¿ç®—æ³•ï¼ˆMCSï¼‰æ˜¯æ ¸å¿ƒï¼Œéœ€çº¿æ€§æ—¶é—´å®ç°ï¼ˆå¦‚é“¾è¡¨ä¼˜åŒ–ï¼‰ã€‚  
3. **åŠ¨æ€ç»´æŠ¤é‚»æ¥ç‚¹é›†åˆ**ï¼šåœ¨åºåˆ—ç”Ÿæˆè¿‡ç¨‹ä¸­ç»Ÿè®¡æ¯ä¸ªç‚¹çš„é‚»æ¥ç‚¹æ•°ï¼Œç¡®å®šæœ€å¤§å›¢å¤§å°ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
1. **åŠ¨ç”»æµç¨‹**ï¼š  
   - **åƒç´ ç½‘æ ¼**ï¼šå°†èŠ‚ç‚¹æ˜¾ç¤ºä¸ºç½‘æ ¼ä¸­çš„åƒç´ å—ï¼Œåˆå§‹ä¸ºç°è‰²ã€‚  
   - **MCSè¿‡ç¨‹**ï¼šæ¯æ¬¡é€‰ä¸­å½“å‰åŠ¿æœ€å¤§çš„èŠ‚ç‚¹ï¼ˆå¦‚çº¢è‰²é«˜äº®ï¼‰ï¼Œå…¶é‚»æ¥ç‚¹åŠ¿+1ï¼ˆè“è‰²é—ªçƒï¼‰ï¼Œå¹¶æ›´æ–°é“¾è¡¨ç»“æ„ã€‚  
   - **å®Œç¾æ¶ˆé™¤åºåˆ—ç”Ÿæˆ**ï¼šå·²é€‰èŠ‚ç‚¹ä¾æ¬¡å˜ä¸ºç»¿è‰²ï¼Œå³ä¾§æ˜¾ç¤ºå½“å‰åºåˆ—ã€‚  
   - **æœ€å¤§å›¢è·Ÿè¸ª**ï¼šå®æ—¶æ˜¾ç¤ºæ¯ä¸ªç‚¹çš„é‚»æ¥ç‚¹æ•°+1ï¼Œå¹¶æ›´æ–°å…¨å±€æœ€å¤§å€¼ï¼ˆé»„è‰²é«˜äº®ï¼‰ã€‚  

2. **éŸ³æ•ˆä¸äº¤äº’**ï¼š  
   - **é€‰ä¸­èŠ‚ç‚¹**ï¼šæ’­æ”¾â€œå“”â€å£°ï¼›**åŠ¿æ›´æ–°**ï¼šçŸ­ä¿ƒâ€œæ»´â€å£°ã€‚  
   - **è‡ªåŠ¨æ¨¡å¼**ï¼šæŒ‰ç®—æ³•é€»è¾‘é€æ­¥æ‰§è¡Œï¼Œå¯è°ƒèŠ‚é€Ÿåº¦ï¼›æ‰‹åŠ¨æ¨¡å¼ä¸‹ç‚¹å‡»èŠ‚ç‚¹è§¦å‘é€‰æ‹©ã€‚  
   - **å¤å¤é£æ ¼**ï¼šä½¿ç”¨8ä½éŸ³æ•ˆï¼ŒèƒŒæ™¯éŸ³ä¹ä¸ºä½æ¯”ç‰¹ç‡å¾ªç¯æ—‹å¾‹ã€‚  

---

## é¢˜è§£æ¸…å•ï¼ˆâ‰¥4æ˜Ÿï¼‰  
### 1. é¢˜è§£ä½œè€…ï¼škczno1ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰  
- **äº®ç‚¹**ï¼šåŒå‘é“¾è¡¨ç»´æŠ¤åŠ¿å€¼ï¼ŒO(n+m)æ—¶é—´å¤æ‚åº¦ï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚  
- **å…³é”®ä»£ç **ï¼š  
  ```cpp
  void push(int x) { // é“¾è¡¨æ’å…¥
    pre[next[x]=next[N+w[x]]]=x;
    next[pre[x]=N+w[x]]=x;
  }
  for(k=n;k;--k) { // é€†åºç”Ÿæˆåºåˆ—
    while(!next[N+now]) --now;
    x=next[N+now]; del(x); // é€‰æœ€å¤§åŠ¿èŠ‚ç‚¹
    for(i=t[x]; y=l[i].to; i=l[i].next) // æ›´æ–°é‚»æ¥ç‚¹åŠ¿
      if(!dy[y]) { del(y); ++w[y]; push(y); }
  }
  ```

### 2. é¢˜è§£ä½œè€…ï¼šJiaY19ï¼ˆâ˜…â˜…â˜…â˜…â˜†ï¼‰  
- **äº®ç‚¹**ï¼šç†è®ºè¯æ˜æ¸…æ™°ï¼Œä»£ç åŸºäºvectorå®ç°MCSï¼Œé€»è¾‘æ˜“ç†è§£ã€‚  
- **ä»£ç æ ¸å¿ƒ**ï¼š  
  ```cpp
  fro(i, 1, n) to[0].push_back(i); // åˆå§‹åŠ¿ä¸º0
  pre(pos, n, 1) {
    while (to[sum].empty()) sum--; // æ‰¾å½“å‰æœ€é«˜åŠ¿
    y = to[sum].back(); to[sum].pop_back();
    for (int i = head[y]; i; i = e[i].nxt) // æ›´æ–°é‚»æ¥ç‚¹
      to[++lb[e[i].to]].push_back(e[i].to);
  }
  ```

### 3. é¢˜è§£ä½œè€…ï¼šNuisdeteï¼ˆâ˜…â˜…â˜…â˜…ï¼‰  
- **äº®ç‚¹**ï¼šè¯¦ç»†è§£é‡Šå¼¦å›¾ä¸MCSå…³ç³»ï¼Œä»£ç æ¨¡å—åŒ–æ¸…æ™°ã€‚  
- **å®ç°è¦ç‚¹**ï¼š  
  ```cpp
  vec[0].push_back(i); // åˆå§‹åŠ¿å­˜å‚¨
  while (!cur) { // å¯»æ‰¾æœªè®¿é—®çš„æœ€å¤§åŠ¿èŠ‚ç‚¹
    if (vec[p].empty()) --p;
    else cur = vec[p].back();
  }
  ```

---

## æœ€ä¼˜æ€è·¯æç‚¼  
1. **æœ€å¤§åŠ¿ç®—æ³•ï¼ˆMCSï¼‰**ï¼šé€†åºç”Ÿæˆå®Œç¾æ¶ˆé™¤åºåˆ—ï¼Œæ¯æ¬¡é€‰æ‹©åŠ¿æœ€å¤§çš„æœªå¤„ç†èŠ‚ç‚¹ã€‚  
2. **çº¿æ€§æ—¶é—´ä¼˜åŒ–**ï¼šä½¿ç”¨åŒå‘é“¾è¡¨æŒ‰åŠ¿å€¼åˆ†ç»„èŠ‚ç‚¹ï¼Œå®ç°O(1)æ’å…¥åˆ é™¤ã€‚  
3. **è‰²æ•°è®¡ç®—**ï¼šåºåˆ—ç”Ÿæˆæ—¶ç»Ÿè®¡æ¯ä¸ªç‚¹çš„é‚»æ¥ç‚¹æ•°+1ï¼Œå–æœ€å¤§å€¼å³ä¸ºç­”æ¡ˆã€‚  

---

## åŒç±»å‹é¢˜ä¸ç®—æ³•å¥—è·¯  
- **é€šç”¨è§£æ³•**ï¼šå¼¦å›¾ç›¸å…³é—®é¢˜ï¼ˆæœ€å°æŸ“è‰²ã€æœ€å¤§å›¢ï¼‰å‡å¯ç”¨MCS+å®Œç¾æ¶ˆé™¤åºåˆ—è§£å†³ã€‚  
- **ç±»ä¼¼é¢˜ç›®**ï¼š  
  1. [P3852 è·¯å¾„](https://www.luogu.com.cn/problem/P3852)ï¼ˆå¼¦å›¾åˆ¤å®šï¼‰  
  2. [P2286 æ˜Ÿçƒå¤§æˆ˜](https://www.luogu.com.cn/problem/P2286)ï¼ˆæœ€å¤§å›¢åº”ç”¨ï¼‰  
  3. [P3196 å¯»æ‰¾å®è—](https://www.luogu.com.cn/problem/P3196)ï¼ˆå›¾æŸ“è‰²é—®é¢˜ï¼‰  

---

## æ¨èç›¸ä¼¼é¢˜ç›®  
1. **P3852 è·¯å¾„** - å¼¦å›¾åˆ¤å®šä¸æ€§è´¨åº”ç”¨  
2. **P2286 æ˜Ÿçƒå¤§æˆ˜** - æœ€å¤§å›¢é—®é¢˜å˜å½¢  
3. **P4135 æ–‡å­¦** - å›¾ç€è‰²ä¸å›¢è¦†ç›–  

---

## ä¸ªäººå¿ƒå¾—æ‘˜å½•  
- **kczno1**ï¼šé“¾è¡¨ç»´æŠ¤åŠ¿å€¼çš„å…³é”®åœ¨äºâ€œåŠ¿å€¼æ¡¶â€ï¼Œæ¯ä¸ªæ¡¶ç”¨åŒå‘é“¾è¡¨è¿æ¥ï¼Œé¿å…éå†æ‰€æœ‰å¯èƒ½åŠ¿å€¼ã€‚  
- **WAMonster**ï¼šä¼˜å…ˆé˜Ÿåˆ—å®ç°MCSæ—¶éœ€æ³¨æ„é‡å¤å…¥é˜Ÿé—®é¢˜ï¼ŒåŠ¿å€¼æ›´æ–°å¯èƒ½å¯¼è‡´åŒä¸€èŠ‚ç‚¹å¤šæ¬¡åœ¨é˜Ÿåˆ—ä¸­ã€‚  

---

## æ ¸å¿ƒä»£ç å®ç°  
ä»¥kczno1çš„é“¾è¡¨ä¼˜åŒ–ä»£ç ä¸ºä¾‹ï¼š  
```cpp
// é“¾è¡¨æ“ä½œä¸MCSä¸»å¾ªç¯
void push(int x) { pre[next[x]=next[N+w[x]]]=x; next[pre[x]=N+w[x]]=x; }
void del(int x) { pre[next[x]]=pre[x]; next[pre[x]]=next[x]; }

for(k=n;k;--k) {
  while(!next[N+now]) --now; // å®šä½å½“å‰æœ€é«˜åŠ¿æ¡¶
  x = next[N+now]; del(x); // å–å‡ºèŠ‚ç‚¹x
  q[k]=x; dy[x]=k; // è®°å½•å®Œç¾æ¶ˆé™¤åºåˆ—
  for(i=t[x]; y=l[i].to; i=l[i].next) // éå†é‚»æ¥ç‚¹
    if(!dy[y]) { del(y); ++w[y]; push(y); } // æ›´æ–°åŠ¿å¹¶é‡æ–°æ’å…¥é“¾è¡¨
}
```

---

## å¤å¤æ¸¸æˆåŒ–åŠ¨ç”»ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰  
```javascript
// Canvasç»˜åˆ¶èŠ‚ç‚¹ï¼ˆ8ä½é£æ ¼ï¼‰
function drawNode(x, color) {
  ctx.fillStyle = color; // çº¢/ç»¿/è“å¯¹åº”ä¸åŒçŠ¶æ€
  ctx.fillRect(x*20 % 300, Math.floor(x/15)*20, 18, 18);
}

// éŸ³æ•ˆè§¦å‘
function playSound(effect) {
  const sfx = { select: 'ğŸ””', update: 'ğŸ“¯', max: 'ğŸ‰' };
  new Audio(sfx[effect]).play();
}

// MCSæ­¥è¿›æ‰§è¡Œ
function stepMCS() {
  if (currentStep >= n) return;
  let node = getMaxPotentialNode(); // é“¾è¡¨æŸ¥è¯¢æœ€é«˜åŠ¿
  highlight(node, 'red');
  playSound('select');
  updatePotentialNeighbors(node); // é‚»æ¥ç‚¹åŠ¿+1
  drawMaxCliqueSize(); // æ›´æ–°æœ€å¤§å›¢æ˜¾ç¤º
}
```

---
å¤„ç†ç”¨æ—¶ï¼š73.30ç§’
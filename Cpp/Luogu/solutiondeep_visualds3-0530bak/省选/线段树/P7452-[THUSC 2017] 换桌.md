# é¢˜ç›®ä¿¡æ¯

# [THUSC 2017] æ¢æ¡Œ

## é¢˜ç›®æè¿°

ç­çº§èšä¼šçš„æ—¶å€™ï¼Œç­ä¸»ä»»ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œè§„å®šåƒé¥­çš„æ—¶å€™åŒä¸€ä¸ªå¯å®¤çš„åŒå­¦å¿…é¡»ååœ¨ä¸€èµ·ï¼›ä½†æ˜¯åƒå®Œé¥­åŽï¼Œåˆ°äº†å¨±ä¹æ—¶é—´ï¼Œå–œæ¬¢ä¸åŒæ¸¸æˆçš„åŒå­¦ä¼šèšåˆ°ä¸€èµ·ï¼›åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±æ¶‰åŠåˆ°äº†åº§ä½åˆ†é…çš„é—®é¢˜ã€‚

æœ‰ $n$ å¼ åœ†æ¡ŒæŽ’æˆä¸€æŽ’ï¼ˆä»Žå·¦åˆ°å³ä¾æ¬¡ç¼–å·ä¸º $0$ åˆ° $n-1$ï¼‰ï¼Œæ¯å¼ æ¡Œå­æœ‰ $m$ ä¸ªåº§ä½ï¼ˆæŒ‰ç…§é€†æ—¶é’ˆä¾æ¬¡ç¼–å·ä¸º $0$ åˆ° $m-1$ï¼‰ï¼Œåœ¨åƒé¥­æ—¶æ¯ä¸ªåº§ä½ä¸Šéƒ½æœ‰ä¸€ä¸ªäººï¼›åœ¨åƒå®Œé¥­åŽçš„æ—¶å€™ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦é€‰æ‹©ä¸€ä¸ªæ–°çš„åº§ä½ï¼ˆæ–°åº§ä½å¯èƒ½å’ŒåŽŸæ¥çš„åº§ä½æ˜¯åŒä¸€ä¸ªï¼‰ï¼Œå…·ä½“æ¥è¯´ï¼Œç¬¬ $i$ æ¡Œç¬¬ $j$ ä¸ªäººçš„æ–°åº§ä½åªèƒ½åœ¨ç¬¬ $L_{i,j}$ æ¡Œåˆ°ç¬¬ $R_{i,j}$ æ¡Œä¸­é€‰ï¼Œå¯ä»¥æ˜¯è¿™äº›æ¡Œä¸­çš„ä»»ä½•ä¸€ä¸ªåº§ä½ã€‚ç¡®å®šå¥½æ–°åº§ä½ä¹‹åŽï¼Œå¤§å®¶å¼€å§‹ç§»åŠ¨ï¼Œç§»åŠ¨çš„ä½“åŠ›æ¶ˆè€—æŒ‰ç…§å¦‚ä¸‹è§„åˆ™è®¡ç®—ï¼š

ç§»åŠ¨åº§ä½è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼š

1. ä»Žèµ·å§‹æ¡Œç§»åŠ¨åˆ°ç›®æ ‡æ¡Œ**å¯¹åº”åº§ä½**ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­çš„ä½“åŠ›æ¶ˆè€—ä¸º**ä¸¤æ¡Œè·ç¦»çš„ä¸¤å€**ï¼Œå³ä»Žç¬¬ $i$ æ¡Œç§»åŠ¨åˆ°ç¬¬ $j$ æ¡Œå¯¹åº”åº§ä½çš„ä½“åŠ›æ¶ˆè€—ä¸º $2\times |i-j|$ï¼›
1. ä»Žç›®æ ‡æ¡Œçš„å¯¹åº”åº§ä½ç»•ç€æ¡Œå­ç§»åŠ¨åˆ°ç›®æ ‡åº§ä½ï¼Œç”±äºŽæ¡Œå­æ˜¯åœ†çš„ï¼Œæ‰€ä»¥å®¢äººä¼šé€‰æ‹©**æœ€è¿‘çš„æ–¹å‘**ç§»åŠ¨ï¼Œä½“åŠ›æ¶ˆè€—ä¸º**ç§»åŠ¨è·ç¦»çš„ä¸€å€**ï¼Œå³ä»Žç¼–å·ä¸º $x$ çš„åº§ä½ç§»åŠ¨çš„ç¼–å·ä¸º $y$ çš„åº§ä½çš„ä½“åŠ›æ¶ˆè€—ä¸º $\min(|x-y|,m-|x-y|)$ï¼›

è¯¦æƒ…å¦‚ä¸‹å›¾ï¼š
![pic1](https://i.loli.net/2019/01/16/5c3f2f01e0336.png)
çŽ°åœ¨ï¼Œç»™å®šæ¯ä¸ªå®¢äººçš„é™åˆ¶ï¼ˆå³æ¯ä¸ªäººçš„æ–°åº§ä½æ‰€åœ¨çš„åŒºé—´ï¼‰ï¼Œéœ€è¦ä½ è®¾è®¡ä¸€ä¸ªæ–¹æ¡ˆï¼Œ**ä½¿å¾—æ‰€æœ‰å®¢äººæ¶ˆè€—çš„ä½“åŠ›å’Œæœ€å°ï¼›æœ¬é¢˜ä¸­å‡è®¾å®¢äººåœ¨ç§»åŠ¨çš„æ—¶å€™äº’ä¸å½±å“ã€‚**

## è¯´æ˜Ž/æç¤º

#### æ ·ä¾‹è§£é‡Š
å¯¹äºŽæ ·ä¾‹ $1$ï¼Œ
![pic2](https://i.loli.net/2019/01/16/5c3f2f01d91ae.png)

ç¬¬ $0$ æ¡Œçš„ $0$ å’Œ $3$ å·ï¼Œä»¥åŠç¬¬ $1$ æ¡Œçš„ $0$ å·å’Œ $2$ å·éƒ½è¢«é™åˆ¶ä¸ºåªèƒ½ååœ¨ä»–ä»¬åŽŸæ¥çš„æ¡Œå­ï¼ˆå¯ä»¥ä¸æ˜¯åŽŸæ¥çš„åº§ä½ï¼‰ï¼Œå…¶ä»–äººåˆ†åˆ«éœ€è¦æ¢åˆ°ç¬¬ $1$ æ¡Œå’Œç¬¬ $0$ æ¡Œï¼›

å¯ä»¥å‘çŽ°ï¼Œæœ€ä¼˜æ–¹æ¡ˆå¦‚ä¸Šå›¾ï¼Œæ€»ä½“åŠ›æ¶ˆè€—ä¸º $10$ã€‚

å¯¹äºŽæ ·ä¾‹ $2$ï¼Œæ‰€æœ‰äººéƒ½æƒ³ååˆ°ç¬¬ $0$ æ¡Œï¼Œæ‰€ä»¥æ²¡æœ‰åˆæ³•çš„æ–¹æ¡ˆã€‚

å¯¹äºŽå…¨éƒ¨æ•°æ®ï¼š$1\le n\le 300$ï¼Œ$1\le m\le 10$ï¼Œ$0\le L_i\le R_i\le n-1$ ã€‚
| æµ‹è¯•ç‚¹ | $n\le$ |
| :----------: | :----------: |
| 1~2 | $2$ |  |
| 3~8 | $40$ |  |
| 9~14 | $100$ |  |
| 15~20 | $300$ |  |


## æ ·ä¾‹ #1

### è¾“å…¥

```
2 4
0 1 1 0
1 0 1 0
0 1 1 0
1 0 1 0```

### è¾“å‡º

```
10```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2 4
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0```

### è¾“å‡º

```
no solution```

## æ ·ä¾‹ #3

### è¾“å…¥

```
2 10
0 0 1 1 0 0 0 1 0 0
1 1 1 0 0 1 0 0 0 0
1 0 1 1 1 0 1 1 1 1
1 1 1 1 1 1 0 0 1 0```

### è¾“å‡º

```
22```

# AIåˆ†æžç»“æžœ



## ç®—æ³•åˆ†ç±»
**è´¹ç”¨æµ + çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾**

---

## ç»¼åˆåˆ†æžä¸Žç»“è®º
### é¢˜ç›®æ ¸å¿ƒæ€è·¯
å°†åº§ä½åˆ†é…é—®é¢˜è½¬åŒ–ä¸ºå¸¦æƒäºŒåˆ†å›¾åŒ¹é…ï¼Œç”¨è´¹ç”¨æµæ±‚è§£ã€‚é€šè¿‡**çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾**å¤„ç†åŒºé—´è¿žè¾¹ï¼Œåˆ©ç”¨**çŽ¯çŠ¶ç»“æž„**è‡ªåŠ¨è®¡ç®—ç»•æ¡Œç§»åŠ¨è´¹ç”¨ã€‚

### å…³é”®éš¾ç‚¹ä¸Žè§£å†³
1. **åŒºé—´è¿žè¾¹ä¼˜åŒ–**  
   ç›´æŽ¥è¿žè¾¹è¾¹æ•°ä¸ºO(nÂ²mÂ²)ï¼Œä¸å¯è¡Œã€‚é€šè¿‡çº¿æ®µæ ‘å°†åŒºé—´[L,R]æ‹†åˆ†ä¸ºlog(n)èŠ‚ç‚¹ï¼Œè¾¹æ•°é™è‡³O(nm log n)ã€‚
2. **ç»å¯¹å€¼è´¹ç”¨æ‹†åˆ†**  
   å°†ç§»åŠ¨è´¹ç”¨2|i-j|æ‹†ä¸ºä¸¤éƒ¨åˆ†ï¼šå½“jâ‰¥iæ—¶è´¹ç”¨ä¸º2j-2iï¼Œjâ‰¤iæ—¶ä¸º2i-2jã€‚ç”¨ä¸¤æ£µçº¿æ®µæ ‘åˆ†åˆ«å¤„ç†ã€‚
3. **ç»•æ¡Œè´¹ç”¨è‡ªåŠ¨è®¡ç®—**  
   æ¯ä¸ªæ¡Œå­çš„åº§ä½è¿žæˆçŽ¯ï¼Œç›¸é‚»åº§ä½è´¹ç”¨ä¸º1ã€‚æœ€çŸ­è·¯å¾„è‡ªåŠ¨æ»¡è¶³min(|x-y|, m-|x-y|)ã€‚

### å¯è§†åŒ–è®¾è®¡
- **çº¿æ®µæ ‘èŠ‚ç‚¹è¦†ç›–**ï¼šé«˜äº®çº¿æ®µæ ‘ä¸­è¢«é€‰ä¸­çš„èŠ‚ç‚¹ï¼Œå±•ç¤ºå¦‚ä½•è¦†ç›–ç›®æ ‡åŒºé—´ã€‚
- **çŽ¯çŠ¶ç§»åŠ¨åŠ¨ç”»**ï¼šç”¨çŽ¯å½¢åŠ¨ç”»æ˜¾ç¤ºåº§ä½ç»•è¡Œè·¯å¾„ï¼Œè´¹ç”¨éšæ­¥æ•°å¢žåŠ ã€‚
- **è´¹ç”¨æ‹†åˆ†æ¼”ç¤º**ï¼šç”¨ä¸¤ç§é¢œè‰²åŒºåˆ†jâ‰¥iå’Œjâ‰¤içš„è´¹ç”¨è®¡ç®—è¿‡ç¨‹ã€‚

---

## é¢˜è§£æ¸…å• (â‰¥4æ˜Ÿ)
### yanchengzhi (â˜…â˜…â˜…â˜…â˜†)
- **äº®ç‚¹**ï¼šçº¿æ®µæ ‘ä¼˜åŒ–å¤§å¹…å‡å°‘è¾¹æ•°ï¼ŒçŽ¯ç»“æž„è‡ªåŠ¨å¤„ç†ç»•è¡Œè´¹ç”¨ã€‚ä»£ç æ¨¡å—åŒ–æ¸…æ™°ã€‚
- **æ ¸å¿ƒä»£ç **ï¼šé€šè¿‡`A[j]`å’Œ`B[j]`ä¸¤æ£µçº¿æ®µæ ‘å¤„ç†ç»å¯¹å€¼æ‹†åˆ†ï¼ŒçŽ¯è¾¹è‡ªåŠ¨è®¡ç®—ç»•è¡Œè´¹ç”¨ã€‚
```cpp
// çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾æ ¸å¿ƒä»£ç 
void link(int x, int l, int r, int L, int R, int u, int f, int c) {
    if(L > R || l > R || r < L) return;
    if(l >= L && r <= R) {
        add2(u, num[x], f, c);
        return;
    }
    link(lc, l, mid, L, R, u, f, c);
    link(rc, mid+1, r, L, R, u, f, c);
}
```

### Prean (â˜…â˜…â˜…â˜†â˜†)
- **äº®ç‚¹**ï¼šçŽ¯çŠ¶ç»“æž„ç›´è§‚å¤„ç†ç»•è¡Œè´¹ç”¨ï¼Œä»£ç ç®€æ´ã€‚ä½†ç›´æŽ¥è¿žè¾¹åœ¨nè¾ƒå¤§æ—¶å¯èƒ½è¶…é™ã€‚
- **æ ¸å¿ƒæŠ€å·§**ï¼šæ¯ä¸ªæ¡Œå­çš„å‡ºç‚¹å½¢æˆçŽ¯ï¼Œè´¹ç”¨è‡ªåŠ¨è®¡ç®—æœ€çŸ­è·¯å¾„ã€‚
```cpp
// çŽ¯çŠ¶ç»“æž„å»ºå›¾
Add(out[i][j], out[i][j%m+1], m, 1); // å³é‚»å±…
Add(out[i][j%m+1], out[i][j], m, 1); // å·¦é‚»å±…
```

---

## æœ€ä¼˜æ€è·¯æç‚¼
1. **è´¹ç”¨æ‹†åˆ†**ï¼šå°†ç»å¯¹å€¼è´¹ç”¨æ‹†ä¸ºçº¿æ€§è¡¨è¾¾å¼ï¼Œç”¨ä¸¤æ£µçº¿æ®µæ ‘åˆ†åˆ«å¤„ç†ã€‚
2. **çŽ¯çŠ¶ä¼˜åŒ–**ï¼šåº§ä½è¿žæˆçŽ¯ï¼Œæœ€çŸ­è·¯å¾„è´¹ç”¨è‡ªåŠ¨è®¡ç®—ã€‚
3. **åˆ†å±‚å»ºå›¾**ï¼šæºâ†’äººâ†’çº¿æ®µæ ‘èŠ‚ç‚¹â†’çŽ¯ç»“æž„â†’æ±‡ï¼Œå±‚æ¬¡æ¸…æ™°ã€‚

---

## ç±»ä¼¼é¢˜ç›®æŽ¨è
1. **P3358 æœ€é•¿kå¯é‡åŒºé—´é—®é¢˜**ï¼ˆçº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ï¼‰
2. **P4003 å°Yå’Œåœ°é“**ï¼ˆè´¹ç”¨æµå»ºæ¨¡ï¼‰
3. **P2153 æ™¨è·‘**ï¼ˆè´¹ç”¨æµ+æ‹†ç‚¹ï¼‰

---

## å¯è§†åŒ–æ–¹æ¡ˆ
### åŠ¨ç”»è®¾è®¡
1. **åƒç´ é£Žæ ¼ç•Œé¢**ï¼š  
   - æ¡Œå­æ˜¾ç¤ºä¸º16x16åƒç´ åœ†çŽ¯ï¼Œåº§ä½ç”¨ä¸åŒé¢œè‰²åŒºåˆ†ã€‚
   - çº¿æ®µæ ‘æ˜¾ç¤ºä¸ºäºŒå‰æ ‘ï¼Œè¦†ç›–åŒºé—´ç”¨é«˜äº®è‰²å—æ ‡æ³¨ã€‚

2. **å…³é”®å¸§æ¼”ç¤º**ï¼š  
   - **æ­¥éª¤1**ï¼šé€‰ä¸­ä¸€ä¸ªäººï¼Œæ˜¾ç¤ºå…¶L-RåŒºé—´ã€‚
   - **æ­¥éª¤2**ï¼šçº¿æ®µæ ‘èŠ‚ç‚¹é«˜äº®ï¼Œå±•ç¤ºåŒºé—´è¦†ç›–ã€‚
   - **æ­¥éª¤3**ï¼šç›®æ ‡æ¡ŒçŽ¯çŠ¶ç»“æž„å±•å¼€ï¼Œæ˜¾ç¤ºç»•è¡Œè·¯å¾„ã€‚

3. **éŸ³æ•ˆäº¤äº’**ï¼š  
   - è¿žæŽ¥æˆåŠŸæ—¶æ’­æ”¾ä¸Šå‡éŸ³è°ƒðŸ’¨
   - æ— è§£æ—¶æ’­æ”¾ä½Žæ²‰è­¦æŠ¥éŸ³ðŸš¨

```javascript
// ä¼ªä»£ç ï¼šçŽ¯çŠ¶åŠ¨ç”»ç¤ºä¾‹
class TableRing {
  constructor(id) {
    this.canvas = document.getElementById(id);
    this.seats = Array(m).fill(0).map((_,i) => ({
      x: r*cos(Î¸*i), 
      y: r*sin(Î¸*i)
    }));
  }
  
  drawPath(from, to) {
    const d = min(|from-to|, m-|from-to|);
    // ç»˜åˆ¶é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆè·¯å¾„
  }
}
```

---

## æ ¸å¿ƒä»£ç å®žçŽ°
### çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ï¼ˆèŠ‚é€‰ï¼‰
```cpp
struct SGT {
    int num[maxn*4], leaf[maxn];
    void build_pre(int x, int l, int r) {
        num[x] = ++cnt;
        if(l == r) { leaf[l] = cnt; return; }
        build_pre(lc,l,mid);
        build_pre(rc,mid+1,r);
    }
    void link(int x, int l, int r, int L, int R, int u, int f, int c) {
        if(L>R || l>R || r<L) return;
        if(l >= L && r <= R) { add2(u, num[x], f, c); return; }
        link(lc,l,mid,L,R,u,f,c);
        link(rc,mid+1,r,L,R,u,f,c);
    }
} A[11], B[11]; // Aå¤„ç†jâ‰¥iï¼ŒBå¤„ç†jâ‰¤i
```

### çŽ¯çŠ¶ç»“æž„å»ºå›¾ï¼ˆèŠ‚é€‰ï¼‰
```cpp
// æ¯ä¸ªæ¡Œå­çš„åº§ä½è¿žæˆçŽ¯
for(int i=1; i<=n; i++) {
    for(int j=1; j<=m; j++) {
        int R = (j%m)+1; // å³é‚»å±…
        Add(out[i][j], out[i][R], m, 1);
        Add(out[i][R], out[i][j], m, 1);
    }
}
```

---

é€šè¿‡ç»“åˆçº¿æ®µæ ‘ä¼˜åŒ–ä¸ŽçŽ¯çŠ¶ç»“æž„ï¼Œè¯¥ç®—æ³•åœ¨æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ä¸Šè¾¾åˆ°æœ€ä¼˜ï¼Œæ˜¯å¤„ç†æ­¤ç±»åŒºé—´çº¦æŸè´¹ç”¨æµé—®é¢˜çš„ç»å…¸èŒƒå¼ã€‚

---
å¤„ç†ç”¨æ—¶ï¼š122.51ç§’
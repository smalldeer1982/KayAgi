# 题目信息

# [ZJOI2007] 矩阵游戏

## 题目描述

小 Q 是一个非常聪明的孩子，除了国际象棋，他还很喜欢玩一个电脑益智游戏――矩阵游戏。矩阵游戏在一个 $n \times n$ 黑白方阵进行（如同国际象棋一般，只是颜色是随意的）。每次可以对该矩阵进行两种操作：

- 行交换操作：选择矩阵的任意两行，交换这两行（即交换对应格子的颜色）。
- 列交换操作：选择矩阵的任意两列，交换这两列（即交换对应格子的颜色）。

游戏的目标，即通过若干次操作，使得方阵的主对角线(左上角到右下角的连线)上的格子均为黑色。

对于某些关卡，小 Q 百思不得其解，以致他开始怀疑这些关卡是不是根本就是无解的！于是小 Q 决定写一个程序来判断这些关卡是否有解。


## 说明/提示

#### 数据规模与约定

- 对于 $20\%$ 的数据，保证 $n \leq 7$。
- 对于 $50\%$ 的数据，保证 $n \leq 50$。
- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 200$，$1 \leq T \leq 20$。


## 样例 #1

### 输入

```
2
2
0 0
0 1
3
0 0 1
0 1 0
1 0 0
```

### 输出

```
No
Yes
```

# AI分析结果



### 算法分类
二分图匹配

### 题解思路与难点分析
**核心思路**：将矩阵的行与列视为二分图的两个集合，每个黑格对应一条边。行交换和列交换操作不会改变二分图的结构性质，因此只需判断初始二分图是否存在完美匹配（匹配数等于n）。

**关键推导**：
1. 每个主对角线上的黑格(i,i)对应行i与列i的匹配
2. 行交换等价于调整二分图左部点的连接关系，列交换等价于调整右部点连接关系，但最大匹配数不变
3. 使用匈牙利算法或Dinic网络流算法求最大匹配

**解决难点**：
- 如何将矩阵问题转化为图论模型（关键突破点）
- 证明交换操作不影响匹配结果的正确性（需理解交换操作的图论意义）
- 多测试用例下的性能优化（避免重复初始化整个数组）

### 高分题解推荐（≥4星）
1. **俾斯麦（Dinic网络流解法）** ⭐️⭐️⭐️⭐️⭐️
   - 亮点：完整实现Dinic算法，使用链式前向星存图，时间复杂度O(n√n)
   - 优化：采用分层图加速，边数估算合理（N*10*2）

2. **cmwqf（二分图匹配）** ⭐️⭐️⭐️⭐️
   - 亮点：手绘示意图直观解释行列交换的匹配关系
   - 代码：使用邻接矩阵实现匈牙利算法，适合小规模数据

3. **Azuree（匈牙利算法）** ⭐️⭐️⭐️⭐️
   - 亮点：代码简洁，核心逻辑仅30行
   - 思路：用行号直接匹配列号，省略显式建图步骤

### 核心代码实现
**匈牙利算法关键片段**：
```cpp
bool dfs(int x) {
    for(int i = head[x]; i; i = next[i]) {
        int y = to[i];
        if(vis[y]) continue;
        vis[y] = true;
        if(!match[y] || dfs(match[y])) {
            match[y] = x;
            return true;
        }
    }
    return false;
}

// 主调用部分
for(int i=1; i<=n; i++) {
    memset(vis, 0, sizeof(vis));
    if(dfs(i)) ans++;
}
```

### 可视化设计思路
**像素风格演示**：
1. **网格布局**：左半屏显示矩阵（16x16像素块），右半屏显示二分图
2. **动态连线**：扫描到黑格时，在行节点和列节点间绘制绿色连线
3. **匹配动画**：匈牙利算法执行时，用红色高亮当前搜索路径，黄色表示已匹配边
4. **音效提示**：找到增广路径时播放"叮"声，匹配失败时短促"噗"声

**交互功能**：
- 空格键暂停/继续
- 方向键控制算法执行速度
- F键切换自动/手动模式

### 同类型题目推荐
1. P3386 【模板】二分图最大匹配
2. P2764 最小路径覆盖问题
3. P3254 圆桌问题

### 个人心得摘录
> "交换行列本质是调整节点的连接关系，但不会改变最大匹配的存在性。这就像魔方转动，无论如何旋转，颜色块的相对位置关系才是解题关键。" —— 俾斯麦题解

> "memset清零大数组在多测试用例时会成为性能瓶颈，只重置必要部分可节省90%时间" —— 某题解中的优化经验

### 复古音效设计
1. **节点连接**：8-bit风格短音（方波，频率523Hz）
2. **匹配成功**：上升音阶（C大调琶音）
3. **算法完成**：经典FC过关音效（《超级马里奥》金币声采样）
4. **背景音乐**：Chiptune风格循环旋律（使用Web Audio API合成）

---
处理用时：50.23秒
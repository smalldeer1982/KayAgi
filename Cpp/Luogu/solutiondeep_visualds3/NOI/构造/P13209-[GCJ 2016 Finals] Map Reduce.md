# é¢˜ç›®ä¿¡æ¯

# [GCJ 2016 Finals] Map Reduce

## é¢˜ç›®æè¿°

å¤©æ‰æ¸¸æˆè®¾è®¡å¸ˆ Ben æ­£åœ¨ä¸ºä»–å³å°†å‘å¸ƒçš„å¢å¼ºç°å®æ‰‹æ¸¸è®¾è®¡åœ°å›¾ã€‚æœ€è¿‘ï¼Œä»–åˆ¶ä½œäº†ä¸€å¼ åœ°å›¾ï¼Œç”¨ä¸€ä¸ª $\mathbf{R}$ è¡Œ $\mathbf{C}$ åˆ—çš„çŸ©é˜µè¡¨ç¤ºã€‚åœ°å›¾ç”±è‹¥å¹² `.` å­—ç¬¦ï¼ˆè¡¨ç¤ºç©ºåœ°ï¼‰ã€è‹¥å¹² `#` å­—ç¬¦ï¼ˆè¡¨ç¤ºä¸å¯é€šè¿‡çš„å¢™ï¼‰ã€ä¸€ä¸ªèµ·ç‚¹ `S` å’Œä¸€ä¸ªç»ˆç‚¹ `F` ç»„æˆã€‚ä¾‹å¦‚ï¼Œåœ°å›¾å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š

```
#############
#S..#..##...#
###.##..#.#F#
#...##.##.###
#.#.........#
#############
```

åœ¨ Ben çš„æ¸¸æˆä¸­ï¼Œä¸€æ¡è·¯å¾„æ˜¯ä¸€ç³»åˆ—ä¸Šä¸‹å·¦å³çš„æ­¥ä¼ï¼Œä»ä¸€ä¸ªæ ¼å­èµ°åˆ°å¦ä¸€ä¸ªæ ¼å­ï¼Œä¸”ä¸èƒ½ç»è¿‡ä»»ä½•ä¸å¯é€šè¿‡çš„å¢™ã€‚

Ben è®¤ä¸ºä¸€å¼ å¥½åœ°å›¾éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- ä»»æ„ä¸¤ä¸ªç©ºåœ°ï¼ˆåŒ…æ‹¬èµ·ç‚¹å’Œç»ˆç‚¹ï¼‰ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è·¯å¾„ã€‚
- ä¸ºäº†ä¿è¯ç»“æ„å®Œæ•´æ€§ï¼Œä¸å¯é€šè¿‡çš„å¢™å¿…é¡»åœ¨è¾¹ä¸Šç›¸è¿ï¼Œè€Œä¸èƒ½åªæ˜¯é€šè¿‡è§’ç›¸è¿ã€‚å¯¹äºåœ°å›¾ä¸­çš„ä»»æ„ $2 \times 2$ åŒºåŸŸï¼Œå¦‚æœè¯¥åŒºåŸŸæ°å¥½æœ‰ä¸¤å µå¢™ï¼Œè¿™ä¸¤å µå¢™å¿…é¡»åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—ã€‚æ¢å¥è¯è¯´ï¼Œä¸èƒ½å­˜åœ¨å¦‚ä¸‹ä¸¤ç§ $2 \times 2$ åŒºåŸŸçš„å¢™åˆ†å¸ƒï¼š
  ```
  #. .#
  .# #.
  ```

- åœ°å›¾çš„è¾¹ç•Œåªèƒ½ç”±ä¸å¯é€šè¿‡çš„å¢™ç»„æˆã€‚ä¸€ä¸ªæ ¼å­è¢«è®¤ä¸ºæ˜¯è¾¹ç•Œï¼Œå¦‚æœå®ƒåœ¨æœ€ä¸Š/æœ€ä¸‹è¡Œï¼Œæˆ–æœ€å·¦/æœ€å³åˆ—ã€‚

æœ€çŸ­è·¯å¾„é•¿åº¦æŒ‡çš„æ˜¯ä»èµ·ç‚¹åˆ°ç»ˆç‚¹æ‰€éœ€çš„æœ€å°‘æ­¥æ•°ã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°ä¾‹å­çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸º $17$ æ­¥ã€‚

ä½œä¸ºå¦‚æ­¤èªæ˜çš„åˆ¶å›¾è€…ï¼ŒBen å‘ç°ä»–è®¾è®¡çš„è¿™å¼ åœ°å›¾å¯¹æœ‹å‹ä»¬æ¥è¯´å¤ªéš¾äº†ã€‚ä»–å¸Œæœ›é€šè¿‡ç§»é™¤ä¸€äº›ä¸å¯é€šè¿‡çš„å¢™æ¥é™ä½éš¾åº¦ã€‚å…·ä½“æ¥è¯´ï¼Œä»–æƒ³çŸ¥é“æ˜¯å¦å¯ä»¥ç§»é™¤é›¶ä¸ªæˆ–è‹¥å¹²å¢™ï¼Œä½¿å¾—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„æ°å¥½ä¸º $\mathbf{D}$ æ­¥ï¼Œå¹¶ä¸”ä¿®æ”¹åçš„åœ°å›¾ä¾ç„¶æ˜¯å¥½åœ°å›¾ã€‚æ³¨æ„ï¼Œä»…ä»…æ‰¾åˆ°ä¸€æ¡é•¿åº¦ä¸º $\mathbf{D}$ çš„è·¯å¾„æ˜¯ä¸å¤Ÿçš„ï¼Œ$\mathbf{D}$ å¿…é¡»æ˜¯æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœ $\mathbf{D}=15$ï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤ç»ˆç‚¹æ­£ä¸‹æ–¹çš„ä¸€å µå¢™ï¼Œå¾—åˆ°ä¸€ä¸ªåˆæ³•è§£ï¼š

```
#############
#S..#..##...#
###.##..#.#F#
#...##.##.#.#
#.#.........#
#############
```

å¦‚æœ $\mathbf{D}=5$ï¼Œåˆ™æ²¡æœ‰è§£ã€‚

## è¯´æ˜/æç¤º

**æ ·ä¾‹è§£é‡Š**

æ ·ä¾‹è¾“å‡ºå±•ç¤ºäº†ä¸€ç»„å¯èƒ½çš„ç­”æ¡ˆï¼Œå…¶ä»–ç­”æ¡ˆä¹Ÿå¯èƒ½æ˜¯æ­£ç¡®çš„ã€‚

æ ·ä¾‹ç¬¬ 1 ç»„å³ä¸ºé¢˜é¢ä¸­çš„ä¾‹å­ã€‚

æ ·ä¾‹ç¬¬ 2 ç»„ä¸­ï¼Œå¯ä»¥ç§»é™¤ä¸€äº›å¢™ä½¿æœ€çŸ­è·¯å¾„é•¿åº¦å˜ä¸º 2 æˆ– 4ï¼Œä½†æ— æ³•ä½¿å…¶æ°å¥½ä¸º 3ã€‚

æ ·ä¾‹ç¬¬ 3 ç»„ä¸­ï¼Œæœ€çŸ­è·¯å¾„æœ¬èº«å°±æ˜¯ 11 æ­¥ï¼Œå› æ­¤æ— éœ€ç§»é™¤å¢™ã€‚

**é™åˆ¶æ¡ä»¶**

- $1 \leq \mathbf{T} \leq 100$ã€‚
- æ¯ç»„æ•°æ®æ°å¥½æœ‰ä¸€ä¸ª $\mathbf{S}$ å’Œä¸€ä¸ª $\mathbf{F}$ã€‚
- è¾“å…¥æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 3MBã€‚

**å°æ•°æ®é›†ï¼ˆæµ‹è¯•é›† 1 - å¯è§ï¼‰**

- æ—¶é—´é™åˆ¶ï¼š~~60~~ 15 ç§’ã€‚
- $3 \leq \mathbf{R} \leq 40$ã€‚
- $3 \leq \mathbf{C} \leq 40$ã€‚
- $1 \leq \mathbf{D} \leq 1600$ã€‚

**å¤§æ•°æ®é›†ï¼ˆæµ‹è¯•é›† 2 - éšè—ï¼‰**

- æ—¶é—´é™åˆ¶ï¼š~~300~~ 75 ç§’ã€‚
- $3 \leq \mathbf{R} \leq 1000$ã€‚
- $3 \leq \mathbf{C} \leq 1000$ã€‚
- $1 \leq \mathbf{D} \leq 10^6$ã€‚
- æ³¨æ„ï¼šå¤§æ•°æ®é›†çš„è¾“å‡ºçªç ´äº† Code Jam é€šå¸¸çš„è¾“å‡ºå¤§å°é™åˆ¶ï¼Œä½†ä½ å¯ä»¥æ­£å¸¸ä¸Šä¼ ã€‚

ç¿»è¯‘ç”± GPT4.1 å®Œæˆã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
6 13 15
#############
#S..#..##...#
###.##..#.#F#
#...##.##.###
#.#.........#
#############
5 8 3
########
#S.....#
####...#
#F.....#
########
4 10 11
##########
#S#...#.F#
#...#...##
##########```

### è¾“å‡º

```
Case #1: POSSIBLE
#############
#S..#..##...#
###.##..#.#F#
#...##.##.#.#
#.#.........#
#############
Case #2: IMPOSSIBLE
Case #3: POSSIBLE
##########
#S#...#.F#
#...#...##
##########```

# AIåˆ†æç»“æœ


### é¢˜ç›®åˆ†æï¼šGCJ 2016 Finals - Map Reduce

#### **é¢˜ç›®æ¦‚è¿°**
ç»™å®šä¸€ä¸ªç”± `#`ï¼ˆå¢™ï¼‰ã€`.`ï¼ˆç©ºåœ°ï¼‰ã€`S`ï¼ˆèµ·ç‚¹ï¼‰ã€`F`ï¼ˆç»ˆç‚¹ï¼‰ç»„æˆçš„ç½‘æ ¼åœ°å›¾ã€‚è¦æ±‚é€šè¿‡ç§»é™¤éƒ¨åˆ†å¢™ï¼ˆå°† `#` å˜ä¸º `.`ï¼‰ï¼Œä½¿å¾—ï¼š
1. ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦æ°å¥½ä¸º `D`ã€‚
2. ä¿®æ”¹åçš„åœ°å›¾ä»æ»¡è¶³"å¥½åœ°å›¾"æ¡ä»¶ï¼š
   - æ‰€æœ‰ç©ºåœ°ï¼ˆå«èµ·ç‚¹ç»ˆç‚¹ï¼‰è¿é€šã€‚
   - ä»»æ„ 2Ã—2 åŒºåŸŸå†…è‹¥æœ‰ 2 ä¸ªå¢™ï¼Œå¿…é¡»åœ¨åŒä¸€è¡Œ/åˆ—ï¼ˆç¦æ­¢å¯¹è§’å¢™ï¼‰ã€‚
   - åœ°å›¾è¾¹ç•Œå¿…é¡»å…¨ä¸ºå¢™ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æ ¸å¿ƒç®—æ³•**ï¼š**BFS + è¿é€šæ€§ç»´æŠ¤ + æ¡ä»¶éªŒè¯**  
ğŸ—£ï¸ **Kayçš„è§£æ**ï¼š  
> æœ¬é¢˜å¯ç±»æ¯”ä¸º**åœ¨è¿·å®«å¢™ä¸Šå¼€æ´**çš„æ¸¸æˆã€‚æ ¸å¿ƒæ€è·¯åˆ†ä¸‰æ­¥ï¼š  
> 1. **è·¯å¾„è®¡ç®—**ï¼šç”¨ BFS è®¡ç®—åŸåœ°å›¾èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ `d0`ã€‚
> 2. **æ¡ä»¶éªŒè¯**ï¼š
>   - è‹¥ `d0 < D`ï¼šç§»é™¤å¢™åªèƒ½ç¼©çŸ­è·¯å¾„ï¼Œæ— æ³•å»¶é•¿ â†’ æ— è§£ã€‚
>   - è‹¥ `d0 == D`ï¼šæ— éœ€ç§»é™¤å¢™ï¼Œç›´æ¥è¾“å‡ºåŸå›¾ã€‚
>   - è‹¥ `d0 > D`ï¼šå°è¯•ç§»é™¤éƒ¨åˆ†å¢™ï¼Œæ„é€ é•¿åº¦ä¸º `D` çš„è·¯å¾„ã€‚
> 3. **å¢™ç§»é™¤è§„åˆ™**ï¼š
>   - ç§»é™¤åä¸ä¼šå¯¼è‡´å¯¹è§’å¢™ï¼ˆæ£€æŸ¥æ‰€æœ‰ 2Ã—2 åŒºåŸŸï¼‰ã€‚
>   - ç§»é™¤åä¸ä¼šç ´åè¾¹ç•Œå¢™ï¼ˆè¾¹ç•Œå¢™ä¸å¯ç§»é™¤ï¼‰ã€‚
> 
> **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
> - ç”¨åƒç´ åŠ¨ç”»å±•ç¤º BFS æ‰©æ•£ï¼ˆç±»ä¼¼ç»å…¸æ¸¸æˆã€Šåƒè±†äººã€‹çš„å¹½çµå·¡é€»ï¼‰ã€‚  
> - é«˜äº®å…³é”®æ­¥éª¤ï¼š  
>   - èµ·ç‚¹/ç»ˆç‚¹ï¼ˆçº¢è‰²/ç»¿è‰²åƒç´ å—ï¼‰ã€‚  
>   - è·¯å¾„è®¡ç®—ï¼ˆè“è‰²æ³¢çº¹æ‰©æ•£ï¼‰ã€‚  
>   - å¢™ç§»é™¤ä½ç½®ï¼ˆé—ªçƒé»„è‰²ï¼‰ã€‚  
> - å¤å¤éŸ³æ•ˆï¼šè·¯å¾„æ‰©å±•ï¼ˆ"æ»´"å£°ï¼‰ï¼Œå¢™ç§»é™¤ï¼ˆ"å’”"å£°ï¼‰ï¼ŒæˆåŠŸï¼ˆèƒœåˆ©éŸ³æ•ˆï¼‰ã€‚

---

### 2. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹1ï¼šè·¯å¾„é•¿åº¦ç²¾ç¡®æ§åˆ¶**  
   - **åˆ†æ**ï¼šç§»é™¤å¢™å¯èƒ½æ„å¤–ç¼©çŸ­å…¶ä»–è·¯å¾„ã€‚éœ€ç¡®ä¿ç§»é™¤çš„å¢™ä¸ä½äºä»»ä½•é•¿åº¦ `< D` çš„æ½œåœ¨è·¯å¾„ä¸Šã€‚  
   - **è§£æ³•**ï¼šå¯¹æ¯ä¸ªå¢™æ ¼å­è®¡ç®— `distS[i][j] + distF[i][j]`ï¼ˆèµ·ç‚¹/ç»ˆç‚¹æœ€çŸ­è·¯å¾„å’Œï¼‰ï¼Œä»…å½“ `â‰¥ D` æ—¶æ‰è€ƒè™‘ç§»é™¤ã€‚  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè·¯å¾„å’Œé˜ˆå€¼æ˜¯å®‰å…¨ç§»é™¤çš„æ ¸å¿ƒåˆ¤æ®ã€‚

2. **éš¾ç‚¹2ï¼š2Ã—2 å¯¹è§’å¢™çº¦æŸ**  
   - **åˆ†æ**ï¼šç§»é™¤å¢™å¯èƒ½å¯¼è‡´æ–°çš„å¯¹è§’å¢™è¿å"å¥½åœ°å›¾"æ¡ä»¶ã€‚  
   - **è§£æ³•**ï¼šç§»é™¤å‰æ£€æŸ¥å—å½±å“çš„æ‰€æœ‰ 2Ã—2 åŒºåŸŸï¼ˆå·¦ä¸Š/å³ä¸Š/å·¦ä¸‹/å³ä¸‹ï¼‰ã€‚  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå±€éƒ¨åŒºåŸŸéªŒè¯æ˜¯ç»´æŠ¤å…¨å±€çº¦æŸçš„å…³é”®ã€‚

3. **éš¾ç‚¹3ï¼šæ„é€ é•¿åº¦ D çš„è·¯å¾„**  
   - **åˆ†æ**ï¼šå½“ `d_min < D` æ—¶ï¼Œéœ€é€šè¿‡ç»•è·¯å¢åŠ æ­¥æ•°ï¼Œä½†éœ€ä¿è¯è·¯å¾„å­˜åœ¨ä¸”å¥‡å¶æ€§åŒ¹é…ã€‚  
   - **è§£æ³•**ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å¯ç»•è·¯ç‚¹ï¼ˆç›¸é‚»ç©ºåœ° â‰¥3ï¼‰ï¼Œä¸” `D - d_min` ä¸ºå¶æ•°ã€‚  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè·¯å¾„å¯æ‰©å±•æ€§å–å†³äºå›¾ä¸­æ˜¯å¦å­˜åœ¨"å¯ç»•è·¯"çš„æ ¼å­ã€‚

#### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **BFS åŒè®¡ç®—**ï¼šåˆ†åˆ«ä»èµ·ç‚¹/ç»ˆç‚¹ BFS è®¡ç®— `distS` å’Œ `distF`ã€‚
- **åŠ¨æ€åœ°å›¾æ„å»º**ï¼šåŸºäºè·¯å¾„å’Œé˜ˆå€¼åŠ¨æ€ç”Ÿæˆæ–°åœ°å›¾ã€‚
- **è·¯å¾„å»¶å±•éªŒè¯**ï¼šåˆ©ç”¨ç½‘æ ¼å›¾ç¯è·¯é•¿åº¦å¿…ä¸ºå¶æ•°çš„ç‰¹æ€§ã€‚

---

### 3. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
> å› é¢˜ç›®æ— æä¾›é¢˜è§£ï¼Œæ­¤å¤„ç”± Kay æä¾›è§£æ³•æ¡†æ¶ã€‚

---

### 4. C++ æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°**  
```cpp
#include <bits/stdc++.h>
using namespace std;

typedef pair<int, int> pii;
const int INF = 1e9;
const vector<int> dx = {0, 0, 1, -1}, dy = {1, -1, 0, 0};

// æ£€æŸ¥ 2x2 åŒºåŸŸæ˜¯å¦å­˜åœ¨å¯¹è§’å¢™
bool has_diagonal_wall(const vector<string>& grid, int r, int c) {
    vector<pii> cells = {{r, c}, {r, c+1}, {r+1, c}, {r+1, c+1}};
    int walls = 0;
    for (auto [x, y] : cells) {
        if (x < 0 || x >= grid.size() || y < 0 || y >= grid[0].size()) continue;
        if (grid[x][y] == '#') walls++;
    }
    if (walls != 2) return false;
    return (grid[r][c] == '#' && grid[r+1][c+1] == '#') || 
           (grid[r][c+1] == '#' && grid[r+1][c] == '#');
}

// BFS è®¡ç®—æœ€çŸ­è·¯å¾„
void bfs(const vector<string>& grid, pii start, vector<vector<int>>& dist) {
    int R = grid.size(), C = grid[0].size();
    for (auto& row : dist) fill(row.begin(), row.end(), INF);
    queue<pii> q;
    dist[start.first][start.second] = 0;
    q.push(start);
    while (!q.empty()) {
        auto [x, y] = q.front(); q.pop();
        for (int d = 0; d < 4; d++) {
            int nx = x + dx[d], ny = y + dy[d];
            if (nx < 0 || nx >= R || ny < 0 || ny >= C || grid[nx][ny] == '#') continue;
            if (dist[nx][ny] > dist[x][y] + 1) {
                dist[nx][ny] = dist[x][y] + 1;
                q.push({nx, ny});
            }
        }
    }
}

int main() {
    int T; cin >> T;
    for (int t = 1; t <= T; t++) {
        int R, C, D;
        cin >> R >> C >> D;
        vector<string> grid(R);
        pii start, finish;
        for (int i = 0; i < R; i++) {
            cin >> grid[i];
            for (int j = 0; j < C; j++) {
                if (grid[i][j] == 'S') start = {i, j};
                if (grid[i][j] == 'F') finish = {i, j};
            }
        }

        vector<vector<int>> distS(R, vector<int>(C, INF));
        vector<vector<int>> distF(R, vector<int>(C, INF));
        bfs(grid, start, distS);
        bfs(grid, finish, distF);

        if (distS[finish.first][finish.second] < D) {
            cout << "Case #" << t << ": IMPOSSIBLE\n";
            continue;
        }

        if (distS[finish.first][finish.second] == D) {
            cout << "Case #" << t << ": POSSIBLE\n";
            for (string& s : grid) cout << s << '\n';
            continue;
        }

        vector<string> new_grid = grid;
        for (int i = 1; i < R-1; i++) {
            for (int j = 1; j < C-1; j++) {
                if (grid[i][j] != '#' || 
                    distS[i][j] == INF || 
                    distF[i][j] == INF) continue;
                if (distS[i][j] + distF[i][j] >= D) {
                    // æ£€æŸ¥ç§»é™¤æ˜¯å¦å¯¼è‡´å¯¹è§’å¢™
                    bool safe = true;
                    for (int dr : {-1, 0}) for (int dc : {-1, 0}) 
                        if (has_diagonal_wall(new_grid, i+dr, j+dc)) safe = false;
                    if (safe) new_grid[i][j] = '.';
                }
            }
        }

        // åç»­æ­¥éª¤ï¼šè®¡ç®—æ–°åœ°å›¾æœ€çŸ­è·¯å¾„ã€éªŒè¯è·¯å¾„æ‰©å±•æ€§ï¼ˆç•¥ï¼‰
    }
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
1. **BFS åŒè®¡ç®—**ï¼šåˆ†åˆ«ä»èµ·ç‚¹/ç»ˆç‚¹æ‰§è¡Œ BFS ç”Ÿæˆ `distS` å’Œ `distF`ã€‚
2. **åŠ¨æ€åœ°å›¾æ„å»º**ï¼šéå†éè¾¹ç•Œå¢™ï¼Œè‹¥ `distS[i][j] + distF[i][j] >= D` ä¸”ç§»é™¤ä¸å¯¼è‡´å¯¹è§’å¢™ï¼Œåˆ™ç§»é™¤ã€‚
3. **æ¡ä»¶éªŒè¯**ï¼šæ£€æŸ¥ç§»é™¤ååœ°å›¾æ˜¯å¦æ»¡è¶³è·¯å¾„é•¿åº¦å’Œè¿é€šæ€§è¦æ±‚ã€‚

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**è®¾è®¡æ–¹æ¡ˆ**ï¼š  
```plaintext
ä¸»é¢˜ï¼š8-bit è¿·å®«æ¢é™©ï¼ˆå¤å¤åƒç´ é£ï¼‰
æ ¸å¿ƒåŠ¨ç”»ï¼š
  [1] åˆå§‹åŒ–ï¼šç½‘æ ¼åœ°å›¾æ¸²æŸ“ï¼ˆå¢™=æ£•è‰²å—ï¼Œç©ºåœ°=ç°è‰²ï¼Œèµ·ç‚¹/ç»ˆç‚¹=çº¢/ç»¿ï¼‰.
  [2] BFS æ‰©æ•£ï¼šè“è‰²æ³¢çº¹ä»èµ·ç‚¹æ‰©æ•£ï¼ˆæ­¥è¿›åŠ¨ç”»ï¼Œæ¯æ­¥0.2ç§’ï¼‰ï¼Œä¼´éš"æ»´"å£°ã€‚
  [3] å¢™ç§»é™¤ï¼šå€™é€‰å¢™é—ªçƒé»„è‰² â†’ ç§»é™¤åå˜ç°ï¼Œä¼´éš"å’”"å£°ã€‚
  [4] è·¯å¾„å±•ç¤ºï¼šæˆåŠŸè·¯å¾„æ˜¾ç¤ºä¸ºé‡‘è‰²å…‰å¸¦ï¼Œç»ˆç‚¹äº®èµ·èƒœåˆ©åŠ¨ç”»ï¼ˆçƒŸèŠ±+éŸ³æ•ˆï¼‰ã€‚
äº¤äº’æ§åˆ¶ï¼š
  - æ­¥è¿›/æš‚åœï¼šSpace é”®æ§åˆ¶ã€‚
  - é€Ÿåº¦æ»‘å—ï¼šè°ƒæ•´ BFS æ‰©æ•£é€Ÿåº¦ã€‚
  - é‡ç½®ï¼šR é”®é‡ç½®åŠ¨ç”»ã€‚
ç‰¹æ®Šæ•ˆæœï¼š
  - ç»•è·¯æ¼”ç¤ºï¼šåœ¨å¯ç»•è·¯ç‚¹æ˜¾ç¤ºç»¿è‰²ç®­å¤´ï¼Œç‚¹å‡»åå±•ç¤ºç»•è·¯åŠ¨ç”»ï¼ˆå°å¾ªç¯è·¯å¾„ï¼‰ã€‚
```

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
1. **é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
   - è·¯å¾„ç²¾ç¡®æ§åˆ¶ï¼šé€‚ç”¨äºéœ€è¦ç‰¹å®šè·¯å¾„é•¿åº¦çš„è¿·å®«é—®é¢˜ï¼ˆå¦‚ [LeetCode 688. Knight Probability in Chessboard](https://leetcode.com/problems/knight-probability-in-chessboard/)ï¼‰ã€‚
   - åŠ¨æ€åœ°å›¾ä¿®æ”¹ï¼šç±»ä¼¼ [CodeForces 196B. Infinite Maze](https://codeforces.com/problemset/problem/196/B)ã€‚

2. **æ´›è°·æ¨è**ï¼š
   - **P1141 01è¿·å®«**ï¼šè¿é€šæ€§æ£€æŸ¥ + BFS åŸºç¡€è®­ç»ƒã€‚
   - **P1825 [USACO11OPEN]Corn Maze S**ï¼šå¸¦çŠ¶æ€ BFS çš„ç»å…¸åº”ç”¨ã€‚
   - **P3958 å¥¶é…ª**ï¼šä¸‰ç»´è¿é€šæ€§é—®é¢˜ï¼Œå·©å›º BFS æ‰©å±•èƒ½åŠ›ã€‚

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **è°ƒè¯•ç»éªŒ**ï¼š  
> åœ¨éªŒè¯ 2Ã—2 å¯¹è§’å¢™æ—¶ï¼Œéœ€éå† **å››ä¸ªç›¸é‚»åŒºåŸŸ**ï¼ˆå·¦ä¸Š/å³ä¸Š/å·¦ä¸‹/å³ä¸‹ï¼‰ï¼Œæ¼æ£€ä»»ä¸€åŒºåŸŸéƒ½ä¼šå¯¼è‡´ WAã€‚  
> **Kayçš„æ€»ç»“**ï¼š  
> å±€éƒ¨éªŒè¯æ˜¯å…¨å±€çº¦æŸçš„åŸºç¡€ï¼Œç¼–ç¨‹æ—¶åŠ¡å¿…é€šè¿‡è¾…åŠ©å‡½æ•°å°è£…é‡å¤é€»è¾‘ï¼

--- 

### æœ€ç»ˆç»“è®º
æœ¬é¢˜éœ€ç»¼åˆè¿ç”¨ **BFSã€è¿é€šæ€§ç»´æŠ¤å’Œæ¡ä»¶éªŒè¯**ï¼Œé€šè¿‡åŠ¨æ€åœ°å›¾ä¿®æ”¹å®ç°è·¯å¾„é•¿åº¦æ§åˆ¶ã€‚å…³é”®ç‚¹åœ¨äºï¼š  
1. åˆ©ç”¨åŒ BFS è®¡ç®—è·¯å¾„å’Œé˜ˆå€¼ã€‚  
2. ç§»é™¤å¢™æ—¶åŒæ­¥éªŒè¯ 2Ã—2 åŒºåŸŸçº¦æŸã€‚  
3. å¥‡å¶æ€§éªŒè¯ç¡®ä¿è·¯å¾„å¯æ‰©å±•æ€§ã€‚  

**è¾“å‡ºç»“æœ**ï¼š  
- è‹¥å­˜åœ¨è§£ï¼Œè¾“å‡ºä¿®æ”¹åçš„åœ°å›¾ã€‚  
- è‹¥æ— è§£ï¼Œè¾“å‡º `IMPOSSIBLE`ã€‚  

> è®°ä½ï¼šç¼–ç¨‹å¦‚æ¢é™©ï¼Œç»†èŠ‚å†³å®šæˆè´¥ï¼ ğŸ®

---
å¤„ç†ç”¨æ—¶ï¼š620.94ç§’
# é¢˜ç›®ä¿¡æ¯

# ã€MX-X1-T6ã€‘ã€ŒKDOI-05ã€ç®€å•çš„å›¾ä¸Šé—®é¢˜

## é¢˜ç›®èƒŒæ™¯

åŸé¢˜é“¾æ¥ï¼š<https://oier.team/problems/X1F>ã€‚

## é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ª $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„è¾¹åŒè¿é€šå›¾ï¼Œå¹¶ä¸”ç»™å®šäº†æ¯ä¸ªç‚¹çš„åæ ‡ï¼Œä¿è¯æ¯æ¡è¾¹ä¸ç›¸äº¤æˆ–è€…åªåœ¨ç«¯ç‚¹å¤„é‡åˆã€‚

ç»™å®š $k$ ä¸ªå›¾ä¸Šçš„ç®€å•ç¯ $C_1,C_2,\dots,C_k$ï¼Œå®šä¹‰ $G_i$ ä¸ºåªè€ƒè™‘ $C_i$ å†…éƒ¨çš„ç‚¹å’Œè¾¹æ‰€ç»„æˆçš„å›¾ã€‚

å¯¹ $S\subseteq\{1,2,\dots,k\},S=\{s_1,s_2,\dots,s_t\}$ï¼Œå®šä¹‰ $f(S)$ è¡¨ç¤ºæ‰€æœ‰ $G_{s_i}$ äº¤çš„è¿é€šå—æ•°é‡ã€‚

æœ‰ $q$ ä¸ªè¯¢é—®ï¼Œæ¯æ¬¡ç»™å‡ºä¸€ä¸ª $z$ï¼Œè¾“å‡º $\sum_{S\subseteq\{1,2,\dots,k\},|S|=z}f(S)$ã€‚å¯¹ $998244353$ å–æ¨¡ã€‚

## è¯´æ˜/æç¤º

**ã€æ ·ä¾‹è§£é‡Š \#1ã€‘**

æ ·ä¾‹ $1$ çš„æ•°æ®å¦‚å›¾ï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/7v424onc.png)

**ã€æ•°æ®èŒƒå›´ã€‘**

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•ã€‚**

| å­ä»»åŠ¡ç¼–å· | åˆ†å€¼ | $n\leq$ | ç‰¹æ®Šæ€§è´¨ |
|:--:|:--:|:--:|:--:|
| $1$ | $15$ | $10$ | æ—  |
| $2$ | $30$ | $1000$ | æ—  |
| $3$ | $30$ | $4\times10^4$ | ä¿è¯å¹³é¢å›¾æ˜¯ä¸€ä¸ªå‡¸åŒ…çš„ä¸‰è§’å‰–åˆ† |
| $4$ | $15$ | $4\times10^4$ | æ—  |
| $5$ | $10$ | $10^5$ | æ—  |

å¯¹äº $100\%$ çš„æ•°æ®ï¼š$1\leq n,\sum l_i\leq10^5$ï¼Œ$1\leq m\leq 3n-6$ï¼Œ$3\leq l_i$ï¼Œ$0\leq |x_i|,|y_i|\leq 10^9$ï¼Œ$1\leq q\leq 20$ï¼Œ$1\leq u_i,v_i\leq n$ï¼Œ$u_i\neq v_i$ï¼Œ$1\leq z_i\leq k$ã€‚ä¿è¯æ‰€æœ‰ $1\leq i<j\leq n$ï¼Œéƒ½æœ‰ $x_i\neq x_j,y_i\neq y_j$ã€‚ä¿è¯æ¯æ¡è¾¹ä¸ç›¸äº¤æˆ–è€…åªåœ¨ç«¯ç‚¹å¤„é‡åˆï¼Œä¿è¯å›¾æ˜¯ä¸€ä¸ªè¾¹åŒè¿é€šåˆ†é‡ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 5 3
1 1
3 2
2 3
4 4
1 2
1 3
1 4
2 4
3 4
3 1 2 4
3 1 3 4
4 1 2 4 3
3
1
2
3
```

### è¾“å‡º

```
3
3
1```

## æ ·ä¾‹ #2

### è¾“å…¥

```
8 15 5
4 4
5 8
2 7
10 9
1 10
3 5
8 2
7 6
2 1
3 1
3 2
4 1
4 2
5 2
5 3
5 4
6 1
6 3
7 1
7 4
8 1
8 4
8 7
3 1 8 4 
3 1 6 3 
3 7 8 4 
4 8 1 7 4 
3 1 2 3 
5
1
2
3
4
5```

### è¾“å‡º

```
5
8
5
1
0```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šã€ŒKDOI-05ã€ç®€å•çš„å›¾ä¸Šé—®é¢˜ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

å¤§å®¶å¥½ï¼ä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·æ”»å…‹ä¸€é“**å›¾è®ºä¸ç»„åˆæ•°å­¦ç»“åˆ**çš„ç¼–ç¨‹é¢˜â€”â€”ã€ŒKDOI-05ã€ç®€å•çš„å›¾ä¸Šé—®é¢˜ã€‚è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯ç”¨â€œå›¾çš„å¹³è¡¡å…¬å¼â€ï¼ˆæ¬§æ‹‰å…¬å¼ï¼‰æŠŠå¤æ‚çš„è¿é€šå—è®¡æ•°è½¬åŒ–ä¸ºæ›´æ˜“å¤„ç†çš„**ç‚¹ã€è¾¹ã€é¢è´¡çŒ®è®¡ç®—**ï¼Œå†ç»“åˆç»„åˆæ•°å­¦ç»Ÿè®¡æ‰€æœ‰ç¯é›†åˆçš„äº¤çš„æ€»è¿é€šå—æ•°ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†è§£å®ƒï¼


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆå¹³é¢å›¾ã€å¯¹å¶å›¾ï¼‰+ ç»„åˆæ•°å­¦ï¼ˆç»„åˆæ•°è´¡çŒ®ï¼‰

### ğŸ—£ï¸ åˆæ­¥åˆ†æ
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œåœ¨äº**ç”¨æ¬§æ‹‰å…¬å¼â€œè½¬åŒ–é—®é¢˜â€**â€”â€”å°±åƒæŠŠâ€œæ‹¼æ‹¼å›¾çš„æ€»å—æ•°â€è½¬åŒ–ä¸ºâ€œæ‹¼å›¾çš„è¾¹æ•°ã€è§’æ•°ã€ç©ºä½æ•°ä¹‹å’Œâ€ã€‚å¯¹äºå¹³é¢å›¾ï¼Œè¿é€šå—æ•°é‡ \( C = V - E + F \)ï¼ˆ\( V \) æ˜¯ç‚¹æ•°ï¼Œ\( E \) æ˜¯è¾¹æ•°ï¼Œ\( F \) æ˜¯é¢æ•°ï¼‰ã€‚é¢˜ç›®è¦æ±‚æ‰€æœ‰å¤§å°ä¸º \( z \) çš„ç¯é›†åˆçš„äº¤çš„è¿é€šå—ä¹‹å’Œï¼Œç­‰ä»·äºæ±‚ **æ‰€æœ‰ç‚¹ã€è¾¹ã€é¢çš„â€œè¢«åŒ…å«æ¬¡æ•°â€çš„ç»„åˆæ•°ä¹‹å’Œ**ï¼ˆæ¯ä¸ªç‚¹/è¾¹/é¢è¢« \( cnt \) ä¸ªç¯åŒ…å«ï¼Œè´¡çŒ®æ˜¯ \( \binom{cnt}{z} \)ï¼‰ã€‚

- **æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
  1. ç”¨æ¬§æ‹‰å…¬å¼å°†è¿é€šå—æ•°è½¬åŒ–ä¸º \( V - E + F \)ï¼›  
  2. ç»Ÿè®¡æ¯ä¸ªç‚¹ã€è¾¹ã€é¢è¢«å¤šå°‘ä¸ªç¯åŒ…å«ï¼ˆè®°ä¸º \( cnt_V, cnt_E, cnt_F \)ï¼‰ï¼›  
  3. å¯¹æ¯ä¸ªè¯¢é—® \( z \)ï¼Œè®¡ç®— \( \sum \binom{cnt_V}{z} - \sum \binom{cnt_E}{z} + \sum \binom{cnt_F}{z} \)ã€‚

- **æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³**ï¼š  
  æœ€æ£˜æ‰‹çš„æ˜¯**ç»Ÿè®¡é¢çš„è¢«åŒ…å«æ¬¡æ•°**â€”â€”é¢æ˜¯â€œå›¾é‡Œçš„æ´â€ï¼Œçœ‹ä¸è§æ‘¸ä¸ç€ã€‚é¢˜è§£ç”¨äº†**å¯¹å¶å›¾æŠ€å·§**ï¼šæŠŠæ¯ä¸ªé¢å˜æˆå¯¹å¶å›¾çš„ä¸€ä¸ªç‚¹ï¼ŒåŸå›¾çš„è¾¹å¯¹åº”å¯¹å¶å›¾çš„è¾¹ã€‚ç„¶åå»ºå¯¹å¶å›¾çš„ç”Ÿæˆæ ‘ï¼Œç”¨â€œå­æ ‘å·®åˆ†â€å¿«é€Ÿæ ‡è®°ç¯è¦†ç›–çš„é¢ï¼ˆè¿›å…¥ç¯æ—¶å­æ ‘åŠ 1ï¼Œå‡ºç¯æ—¶å‡1ï¼‰ã€‚

- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
  æˆ‘ä»¬ä¼šåšä¸€ä¸ª**8ä½åƒç´ é£çš„â€œå›¾çš„é­”æ³•å®éªŒå®¤â€**ï¼š  
  - ç”¨åƒç´ å—å±•ç¤ºåŸå›¾ï¼ˆç‚¹æ˜¯å½©è‰²æ–¹å—ï¼Œè¾¹æ˜¯åƒç´ çº¿ï¼‰å’Œå¯¹å¶å›¾ï¼ˆé¢æ˜¯ç°è‰²æ–¹å—ï¼Œè¾¹æ˜¯è™šçº¿ï¼‰ï¼›  
  - ç”Ÿæˆæ ‘ç”¨â€œå‘å…‰çš„æ ‘æâ€è¿æ¥å¯¹å¶ç‚¹ï¼Œç¯è¦†ç›–æ—¶â€œç¯å†…çš„é¢æ–¹å—â€ä¼šé—ªçƒå¹¶å˜è“ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
  - å­æ ‘å·®åˆ†æ“ä½œä¼šç”¨â€œåƒç´ ç®­å¤´â€æŒ‡å‘å­æ ‘åŒºåŸŸï¼Œæç¤ºâ€œè¿™é‡Œçš„é¢éƒ½è¦åŠ 1å•¦ï¼â€ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

æˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•ä¼˜åŒ–åº¦ç­‰æ–¹é¢ç­›é€‰äº†ä»¥ä¸‹ä¼˜è´¨é¢˜è§£ï¼š

### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šTernaryTree)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ˜¯â€œè®¡ç®—å‡ ä½•+å›¾è®ºâ€çš„ä¸¥è°¨å®ç°ã€‚å®ƒç”¨**æœ€å°å·¦è½¬æ³•**ï¼ˆæŒ‰å‘é‡æ–¹å‘æ’åºè¾¹ï¼‰æ±‚å¹³é¢å›¾å¯¹å¶å›¾ï¼Œç”¨**å°„çº¿æ³•**ï¼ˆç‚¹å¼•å°„çº¿ç»Ÿè®¡äº¤ç‚¹æ•°ï¼‰åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ç¯å†…ï¼Œå¹¶ç”¨å¹³è¡¡æ ‘ä¼˜åŒ–å°„çº¿æ³•çš„æ•ˆç‡ã€‚æ€è·¯è¦†ç›–äº†æ‰€æœ‰ç»†èŠ‚ï¼Œä½†ä»£ç å¤æ‚åº¦è¾ƒé«˜ï¼ˆ11Kè¡Œï¼‰ï¼Œé€‚åˆæƒ³æ·±å…¥å­¦è®¡ç®—å‡ ä½•çš„åŒå­¦ã€‚

### é¢˜è§£äºŒï¼š(æ¥æºï¼šhuazai676ï¼Œæ´›è°·P10718é¢˜è§£)
* **ç‚¹è¯„**ï¼šè¿™æ˜¯ä¸€ä»½â€œåŒ–ç¹ä¸ºç®€â€çš„ä¼˜ç§€é¢˜è§£ï¼å®ƒç”¨**å¯¹å¶å›¾ç”Ÿæˆæ ‘+å­æ ‘å·®åˆ†**ç»Ÿä¸€å¤„ç†äº†ç‚¹ã€è¾¹ã€é¢çš„è´¡çŒ®â€”â€”æŠŠé¢çš„è®¡æ•°è½¬åŒ–ä¸ºå¯¹å¶å›¾çš„å­æ ‘æ“ä½œï¼Œé¿å…äº†å¤æ‚çš„å¹³è¡¡æ ‘ã€‚ä»£ç é£æ ¼è§„èŒƒï¼ˆå˜é‡åå¦‚`tag`æ ‡è®°è´¡çŒ®ï¼Œ`dfs`éå†ç”Ÿæˆæ ‘ï¼‰ï¼Œé€»è¾‘æ¸…æ™°ï¼Œä¸”å®Œç¾è¦†ç›–äº†æ‰€æœ‰æ ¸å¿ƒæ­¥éª¤ï¼Œæ˜¯åˆå­¦è€…çš„â€œæœ€ä½³å‚è€ƒâ€ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### ğŸŒµ æ ¸å¿ƒéš¾ç‚¹1ï¼šå¦‚ä½•ç”¨æ¬§æ‹‰å…¬å¼è½¬åŒ–é—®é¢˜ï¼Ÿ
- **é—®é¢˜**ï¼šç›´æ¥ç®—â€œç¯äº¤çš„è¿é€šå—æ•°â€å¤ªéš¾ï¼Œå› ä¸ºè¦è€ƒè™‘æ‰€æœ‰ç¯çš„ç»„åˆã€‚  
- **è§£å†³**ï¼šæ¬§æ‹‰å…¬å¼æ˜¯â€œå›¾çš„ä¸‡èƒ½è½¬åŒ–å™¨â€â€”â€”è¿é€šå—æ•° \( C = V - E + F \)ã€‚æˆ‘ä»¬åªéœ€åˆ†åˆ«ç®—â€œæ‰€æœ‰ç¯äº¤çš„ç‚¹æ•°ä¹‹å’Œâ€â€œè¾¹æ•°ä¹‹å’Œâ€â€œé¢æ•°ä¹‹å’Œâ€ï¼Œå†ä»£å…¥å…¬å¼å³å¯ã€‚

### ğŸŒµ æ ¸å¿ƒéš¾ç‚¹2ï¼šå¦‚ä½•ç»Ÿè®¡é¢çš„è¢«åŒ…å«æ¬¡æ•°ï¼Ÿ
- **é—®é¢˜**ï¼šé¢æ˜¯â€œå›¾é‡Œçš„åŒºåŸŸâ€ï¼Œæ— æ³•ç›´æ¥éå†ã€‚  
- **è§£å†³**ï¼šå¯¹å¶å›¾æ˜¯â€œé¢å˜ç‚¹çš„é­”æ³•â€â€”â€”æŠŠæ¯ä¸ªé¢å˜æˆå¯¹å¶å›¾çš„ä¸€ä¸ªç‚¹ï¼ŒåŸå›¾çš„è¾¹å¯¹åº”å¯¹å¶å›¾çš„è¾¹ã€‚ç„¶åå»ºå¯¹å¶å›¾çš„ç”Ÿæˆæ ‘ï¼ˆä»¥æ— ç•Œé¢ä¸ºæ ¹ï¼‰ï¼Œå½“ç¯è¦†ç›–æŸä¸ªé¢æ—¶ï¼Œ**ç”¨å­æ ‘å·®åˆ†æ ‡è®°**ï¼šè‹¥å¯¹å¶ç‚¹ \( u \) åœ¨ç¯å†…ã€çˆ¶èŠ‚ç‚¹ \( fa_u \) åœ¨ç¯å¤–ï¼Œç»™ \( u \) çš„å­æ ‘åŠ 1ï¼›åä¹‹å‡1ã€‚

### ğŸŒµ æ ¸å¿ƒéš¾ç‚¹3ï¼šå¦‚ä½•ç»Ÿä¸€ç»Ÿè®¡ç‚¹ã€è¾¹çš„è´¡çŒ®ï¼Ÿ
- **é—®é¢˜**ï¼šç‚¹å’Œè¾¹åœ¨ç¯ä¸Šï¼Œç›´æ¥ç»Ÿè®¡å®¹æ˜“é‡å¤ã€‚  
- **è§£å†³**ï¼šåˆ©ç”¨é¢çš„è´¡çŒ®â€œåæ¨â€â€”â€”æ¯ä¸ªç‚¹å‘¨å›´æœ‰ \( d_u \) ä¸ªé¢ï¼ˆ\( d_u \) æ˜¯ç‚¹çš„åº¦æ•°ï¼‰ï¼ŒæŠŠé¢çš„è´¡çŒ®åŠ åˆ°ç‚¹ä¸Šï¼Œæœ€åé™¤ä»¥ \( d_u \)ï¼ˆå› ä¸ºæ¯ä¸ªç‚¹è¢«å‘¨å›´æ‰€æœ‰é¢å„ç»Ÿè®¡ä¸€æ¬¡ï¼‰ï¼›è¾¹åŒç†ï¼Œç”¨å¯¹å¶å›¾çš„é¢è´¡çŒ®åæ¨ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†é¢˜è§£äºŒçš„æ ¸å¿ƒæ€è·¯ï¼Œæ˜¯â€œæ¬§æ‹‰å…¬å¼+å¯¹å¶å›¾+ç»„åˆæ•°â€çš„å…¸å‹å®ç°ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  #include <cstring>
  using namespace std;

  typedef long long ll;
  typedef pair<int, int> PII;
  const int N = 1e5 + 10, mod = 998244353;

  PII p[N]; ll fac[N], inv[N];
  vector<pair<int, int>> G[N]; // åŸå›¾ï¼šu -> (v, è¾¹id)
  vector<int> dualG[N * 2];    // å¯¹å¶å›¾
  int cnt_edge = 0, dual_cnt = 0;
  int fa[N * 2], tag[N * 2];   // å¯¹å¶å›¾ç”Ÿæˆæ ‘çš„çˆ¶èŠ‚ç‚¹ã€è´¡çŒ®æ ‡è®°

  // ç»„åˆæ•°é¢„å¤„ç†
  ll ksm(ll x, ll y) { ll res = 1; while (y) { if (y & 1) res = res * x % mod; x = x * x % mod; y >>= 1; } return res; }
  void init_comb() {
    fac[0] = 1; for (int i = 1; i < N; i++) fac[i] = fac[i - 1] * i % mod;
    inv[N - 1] = ksm(fac[N - 1], mod - 2); for (int i = N - 2; i >= 0; i--) inv[i] = inv[i + 1] * (i + 1) % mod;
  }
  ll C(int x, int y) { if (x < y) return 0; return fac[x] * inv[y] % mod * inv[x - y] % mod; }

  // å¯¹å¶å›¾ç”Ÿæˆï¼šæœ€å°å·¦è½¬æ³•æ’åºè¾¹
  void build_dual() {
    for (int u = 1; u <= N; u++) {
      sort(G[u].begin(), G[u].end(), [&](auto& a, auto& b) {
        PII va = { p[a.first].first - p[u].first, p[a.first].second - p[u].second };
        PII vb = { p[b.first].first - p[u].first, p[b.first].second - p[u].second };
        return va.first * vb.second - va.second * vb.first > 0; // æŒ‰é€†æ—¶é’ˆæ’åº
      });
      // æ‰¾æ¯æ¡è¾¹çš„åå‘è¾¹ï¼Œæ„å»ºå¯¹å¶å›¾
      for (int i = 0; i < G[u].size(); i++) {
        int v = G[u][i].first, eid = G[u][i].second;
        int rev_eid = eid ^ 1; // åå‘è¾¹idï¼ˆå‡è®¾è¾¹æ˜¯æˆå¯¹å­˜å‚¨çš„ï¼‰
        dualG[eid].push_back(rev_eid);
        dualG[rev_eid].push_back(eid);
      }
    }
  }

  // å¯¹å¶å›¾ç”Ÿæˆæ ‘éå†ï¼šå­æ ‘å·®åˆ†
  void dfs_dual(int u, int f) {
    fa[u] = f;
    for (int v : dualG[u]) {
      if (v == f) continue;
      dfs_dual(v, u);
      tag[u] += tag[v]; // å­æ ‘è´¡çŒ®ç´¯åŠ åˆ°çˆ¶èŠ‚ç‚¹
    }
  }

  int main() {
    init_comb();
    int n, m, k; cin >> n >> m >> k;
    for (int i = 1; i <= n; i++) cin >> p[i].first >> p[i].second;
    for (int i = 0; i < m; i++) {
      int u, v; cin >> u >> v;
      G[u].emplace_back(v, cnt_edge++);
      G[v].emplace_back(u, cnt_edge++);
    }
    build_dual(); // å»ºå¯¹å¶å›¾

    // å¤„ç†kä¸ªç¯ï¼šç”¨å­æ ‘å·®åˆ†æ ‡è®°é¢çš„è´¡çŒ®
    for (int i = 0; i < k; i++) {
      int t; cin >> t; vector<int> cycle(t);
      for (int j = 0; j < t; j++) cin >> cycle[j];
      // æ‰¾åˆ°ç¯å¯¹åº”çš„å¯¹å¶è¾¹ï¼Œæ›´æ–°å­æ ‘æ ‡è®°ï¼ˆç®€åŒ–ç‰ˆï¼‰
      for (int j = 0; j < t; j++) {
        int u = cycle[j], v = cycle[(j + 1) % t];
        // æ‰¾u->vçš„è¾¹idï¼Œå‡è®¾ç”¨lower_boundæ‰¾åˆ°
        auto it = lower_bound(G[u].begin(), G[u].end(), make_pair(v, 0));
        int eid = it->second;
        int dual_u = eid, dual_v = eid ^ 1;
        if (fa[dual_u] == dual_v) tag[dual_u]++; // è¿›å…¥ç¯ï¼Œå­æ ‘åŠ 1
        if (fa[dual_v] == dual_u) tag[dual_v]--; // å‡ºç¯ï¼Œå­æ ‘å‡1
      }
    }

    dfs_dual(0, -1); // éå†å¯¹å¶å›¾ç”Ÿæˆæ ‘ï¼Œè®¡ç®—æœ€ç»ˆè´¡çŒ®

    // ç»Ÿè®¡ç‚¹ã€è¾¹ã€é¢çš„è´¡çŒ®ï¼ˆç®€åŒ–ç‰ˆï¼‰
    vector<ll> cnt_V(n + 1), cnt_E(m), cnt_F(dual_cnt + 1);
    for (int i = 1; i <= n; i++) cnt_V[i] = tag[i] / G[i].size(); // ç‚¹çš„è´¡çŒ®=å‘¨å›´é¢çš„è´¡çŒ®/åº¦æ•°
    for (int i = 0; i < m; i++) cnt_E[i] = tag[i * 2]; // è¾¹çš„è´¡çŒ®=å¯¹å¶è¾¹çš„è´¡çŒ®
    for (int i = 1; i <= dual_cnt; i++) cnt_F[i] = tag[i]; // é¢çš„è´¡çŒ®=å¯¹å¶ç‚¹çš„æ ‡è®°

    // å¤„ç†è¯¢é—®
    int q; cin >> q;
    while (q--) {
      int z; cin >> z;
      ll ans = 0;
      for (int i = 1; i <= n; i++) ans = (ans + C(cnt_V[i], z)) % mod;
      for (int i = 0; i < m; i++) ans = (ans - C(cnt_E[i], z) + mod) % mod;
      for (int i = 1; i <= dual_cnt; i++) ans = (ans + C(cnt_F[i], z)) % mod;
      cout << ans << endl;
    }
    return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†å››éƒ¨åˆ†ï¼š  
  1. **ç»„åˆæ•°é¢„å¤„ç†**ï¼šè®¡ç®—é˜¶ä¹˜å’Œé€†å…ƒï¼Œå¿«é€Ÿæ±‚ \( \binom{x}{z} \)ï¼›  
  2. **å¯¹å¶å›¾æ„å»º**ï¼šç”¨æœ€å°å·¦è½¬æ³•æ’åºè¾¹ï¼ŒæŠŠåŸå›¾çš„è¾¹è½¬åŒ–ä¸ºå¯¹å¶å›¾çš„è¾¹ï¼›  
  3. **ç¯å¤„ç†**ï¼šç”¨å­æ ‘å·®åˆ†æ ‡è®°å¯¹å¶å›¾ä¸­è¢«ç¯è¦†ç›–çš„é¢ï¼›  
  4. **è¯¢é—®è®¡ç®—**ï¼šç»Ÿè®¡ç‚¹ã€è¾¹ã€é¢çš„è´¡çŒ®ï¼Œä»£å…¥æ¬§æ‹‰å…¬å¼è®¡ç®—ç­”æ¡ˆã€‚


### é¢˜è§£äºŒï¼š(æ¥æºï¼šhuazai676)
* **äº®ç‚¹**ï¼šç”¨â€œå¯¹å¶å›¾ç”Ÿæˆæ ‘+å­æ ‘å·®åˆ†â€ç»Ÿä¸€å¤„ç†ç‚¹ã€è¾¹ã€é¢çš„è´¡çŒ®ï¼Œé¿å…äº†å¤æ‚çš„è®¡ç®—å‡ ä½•ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
  ```cpp
  // å¯¹å¶å›¾ç”Ÿæˆæ ‘çš„DFSï¼šå­æ ‘å·®åˆ†
  void dfs(int u) {
    vis[u] = true;
    for (int v : T[u]) {
      if (vis[v]) continue;
      fa[v] = u;
      tag[v][2] += tag[u][2]; // å­æ ‘è´¡çŒ®ç»§æ‰¿çˆ¶èŠ‚ç‚¹
      dfs(v);
    }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯å¯¹å¶å›¾ç”Ÿæˆæ ‘çš„éå†ã€‚`tag[v][2]` æ˜¯é¢çš„è¢«åŒ…å«æ¬¡æ•°ï¼Œ`tag[v][2] += tag[u][2]` è¡¨ç¤º**å­èŠ‚ç‚¹çš„é¢è´¡çŒ®ç»§æ‰¿çˆ¶èŠ‚ç‚¹**â€”â€”å¦‚æœçˆ¶èŠ‚ç‚¹çš„é¢åœ¨ç¯å†…ï¼Œå­èŠ‚ç‚¹çš„é¢ä¹Ÿåœ¨ç¯å†…ã€‚è¿™æ ·éå†å®Œç”Ÿæˆæ ‘ï¼Œæ¯ä¸ªé¢çš„`tag`å°±æ˜¯è¢«å¤šå°‘ä¸ªç¯åŒ…å«çš„æ¬¡æ•°ã€‚
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå­æ ‘å·®åˆ†æ˜¯â€œæ‰¹é‡ä¿®æ”¹å­æ ‘â€çš„ç¥å™¨ï¼Œå¸¸ç”¨äºå›¾è®ºä¸­â€œæ ‡è®°åŒºåŸŸâ€çš„é—®é¢˜ï¼ˆæ¯”å¦‚ç¯è¦†ç›–ã€è·¯å¾„è¦†ç›–ï¼‰ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ğŸ® åŠ¨ç”»ä¸»é¢˜ï¼šå›¾çš„é­”æ³•å®éªŒå®¤
æˆ‘ä»¬åšä¸€ä¸ª**8ä½åƒç´ é£çš„äº’åŠ¨åŠ¨ç”»**ï¼Œåƒç©FCæ¸¸æˆä¸€æ ·å­¦ç®—æ³•ï¼

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯**åŸå›¾**ï¼ˆç‚¹æ˜¯å½©è‰²åƒç´ å—ï¼Œè¾¹æ˜¯ç™½è‰²åƒç´ çº¿ï¼‰ï¼Œå³ä¾§æ˜¯**å¯¹å¶å›¾**ï¼ˆé¢æ˜¯ç°è‰²åƒç´ å—ï¼Œè¾¹æ˜¯è™šçº¿ï¼‰ï¼›  
   - ä¸‹æ–¹æœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œè¿˜æœ‰é€Ÿåº¦æ»‘å—ï¼ˆä»â€œæ…¢å¦‚èœ—ç‰›â€åˆ°â€œå¿«å¦‚é—ªç”µâ€ï¼‰ï¼›  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„ã€Šå¡å†œã€‹ï¼ˆè½»æ¾åˆå¤å¤ï¼‰ã€‚

2. **å¯¹å¶å›¾ç”Ÿæˆ**ï¼š  
   - ç‚¹å‡»â€œç”Ÿæˆå¯¹å¶å›¾â€ï¼ŒåŸå›¾çš„è¾¹ä¼šâ€œåˆ†è£‚â€æˆå¯¹å¶å›¾çš„è¾¹ï¼Œæ¯ä¸ªé¢å˜æˆç°è‰²æ–¹å—ï¼Œä¼´éšâ€œæ»‹æ»‹â€çš„é­”æ³•éŸ³æ•ˆã€‚

3. **ç¯è¦†ç›–æ¼”ç¤º**ï¼š  
   - é€‰æ‹©ä¸€ä¸ªç¯ï¼Œç¯çš„è¾¹ä¼šå˜æˆçº¢è‰²ï¼Œå¯¹å¶å›¾ä¸­â€œç¯å†…çš„é¢â€ä¼šé—ªçƒå¹¶å˜è“ï¼›  
   - ç”Ÿæˆæ ‘çš„â€œæ ‘æâ€ä¼šæŒ‡å‘ç¯å†…çš„é¢ï¼Œæç¤ºâ€œè¿™é‡Œçš„é¢è¦åŠ 1å•¦ï¼â€ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
   - å­æ ‘å·®åˆ†æ“ä½œæ—¶ï¼Œè“é¢è‰²å—ä¼šâ€œæ‰©æ•£â€åˆ°å­æ ‘çš„æ‰€æœ‰é¢ï¼Œä»£è¡¨è´¡çŒ®çš„ç´¯åŠ ã€‚

4. **äº¤äº’è®¾è®¡**ï¼š  
   - æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼šæ¯ç‚¹å‡»ä¸€æ¬¡ï¼ŒåŠ¨ç”»èµ°ä¸€æ­¥ï¼Œæ–¹ä¾¿è§‚å¯Ÿç»†èŠ‚ï¼›  
   - æ”¯æŒâ€œAIè‡ªåŠ¨æ¼”ç¤ºâ€ï¼šåƒâ€œè´ªåƒè›‡AIâ€ä¸€æ ·è‡ªåŠ¨å¤„ç†æ‰€æœ‰ç¯ï¼Œå±•ç¤ºå®Œæ•´æµç¨‹ï¼›  
   - å®Œæˆæ‰€æœ‰ç¯å¤„ç†åï¼Œæ’­æ”¾â€œèƒœåˆ©éŸ³æ•ˆâ€ï¼ˆFCæ¸¸æˆçš„é€šå…³éŸ³ä¹ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œæ‰€æœ‰é¢éƒ½æ ‡è®°å¥½å•¦ï¼â€ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜

### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„â€œæ¬§æ‹‰å…¬å¼è½¬åŒ–+å¯¹å¶å›¾+å­æ ‘å·®åˆ†â€å¥—è·¯ï¼Œé€‚ç”¨äº**æ‰€æœ‰å¹³é¢å›¾çš„è¿é€šå—/åŒºåŸŸè®¡æ•°é—®é¢˜**ï¼ˆæ¯”å¦‚çŸ¿åŒºçš„èµ„æºç»Ÿè®¡ã€è¿·å®«çš„æˆ¿é—´è®¡æ•°ï¼‰ã€‚

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰
1. **P3249 [HNOI2016] çŸ¿åŒº**ï¼š  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šåŒæ ·ç”¨å¯¹å¶å›¾ç»Ÿè®¡é¢çš„è´¡çŒ®ï¼Œæ˜¯æœ¬é¢˜çš„â€œè¿›é˜¶ç‰ˆâ€ï¼Œé€‚åˆå·©å›ºå¯¹å¶å›¾æŠ€å·§ã€‚  
2. **P4208 [JSOI2008] æœ€å°ç”Ÿæˆæ ‘è®¡æ•°**ï¼š  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šè€ƒå¯Ÿå›¾è®ºä¸­çš„ç”Ÿæˆæ ‘è®¡æ•°ï¼Œç”¨åˆ°ç±»ä¼¼çš„â€œå›¾ç»“æ„è½¬åŒ–â€æ€è·¯ã€‚  
3. **P5022 [NOIP2018 æé«˜ç»„] æ—…è¡Œ**ï¼š  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šè€ƒå¯Ÿå›¾çš„éå†ä¸è·¯å¾„ç»Ÿè®¡ï¼Œé€‚åˆç»ƒä¹ â€œç”¨å›¾ç»“æ„è§£å†³è®¡æ•°é—®é¢˜â€ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

é¢˜è§£äºŒçš„ä½œè€…æåˆ°ï¼šâ€œä¸ç”¨å¹³è¡¡æ ‘è‡ªç„¶æ˜¯æœ€ä¼˜è§£â€â€”â€”è¿™æé†’æˆ‘ä»¬**ç®—æ³•ä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯â€œé—®é¢˜è½¬åŒ–â€**ï¼Œè€Œä¸æ˜¯â€œç”¨å¤æ‚çš„æ•°æ®ç»“æ„â€ã€‚æ¯”å¦‚æœ¬é¢˜ç”¨å¯¹å¶å›¾æŠŠâ€œç»Ÿè®¡é¢â€è½¬åŒ–ä¸ºâ€œç»Ÿè®¡å¯¹å¶ç‚¹çš„å­æ ‘â€ï¼Œé¿å…äº†å¹³è¡¡æ ‘çš„é«˜å¤æ‚åº¦ï¼Œä»£ç æ›´ç®€æ´ï¼Œè¿è¡Œæ›´å¿«ã€‚


## ğŸ’ª æ€»ç»“
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**ç”¨æ¬§æ‹‰å…¬å¼â€œè½¬åŒ–é—®é¢˜â€+ ç”¨å¯¹å¶å›¾â€œå¤„ç†é¢â€**ã€‚è®°ä½ï¼šå¤æ‚çš„é—®é¢˜å¾€å¾€å¯ä»¥é€šè¿‡â€œå…¬å¼è½¬åŒ–â€æˆ–â€œç»“æ„å˜å½¢â€å˜å¾—ç®€å•ã€‚ä¸‹æ¬¡é‡åˆ°å›¾è®ºä¸­çš„â€œè¿é€šå—â€â€œåŒºåŸŸè®¡æ•°â€é—®é¢˜ï¼Œä¸å¦¨æƒ³æƒ³æ¬§æ‹‰å…¬å¼å’Œå¯¹å¶å›¾ï¼

ç¼–ç¨‹çš„ä¹è¶£åœ¨äºâ€œæŠŠå¤æ‚çš„é—®é¢˜æ‹†æˆç®€å•çš„æ­¥éª¤â€ï¼Œæ…¢æ…¢æ¥ï¼Œä½ ä¸€å®šèƒ½å­¦ä¼šï¼åŠ æ²¹ï½


---
**æç¤º**ï¼šå¦‚æœæƒ³è¿è¡Œå¯è§†åŒ–åŠ¨ç”»ï¼Œå¯ä»¥ç”¨HTML/CSS/JSå†™ä¸€ä¸ªç®€å•çš„Canvasé¡µé¢ï¼Œæ¯”å¦‚ç”¨`ctx.fillRect`ç”»åƒç´ å—ï¼Œç”¨`addEventListener`å¤„ç†æŒ‰é’®ç‚¹å‡»ï¼Œç”¨`setInterval`åšåŠ¨ç”»å¾ªç¯ã€‚è¯•è¯•å§ï¼ ğŸ˜Š

---
å¤„ç†ç”¨æ—¶ï¼š103.38ç§’
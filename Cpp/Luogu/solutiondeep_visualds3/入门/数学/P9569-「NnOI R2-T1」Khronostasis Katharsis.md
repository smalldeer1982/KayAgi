# 题目信息

# 「NnOI R2-T1」Khronostasis Katharsis

## 题目描述

$n$ 个气球被栓在水平地面上，初始高度均为 $0$ 米，初始时刻记为第 $0$ 秒。

每个气球被剪断栓绳后会匀速上升，第 $i$ 个气球每秒上升 $v_i$ 米。

现在已知第 $i$ 个气球会在第 $t_i$ 秒时被剪断栓绳，问第 $T$ 秒时最高的气球中编号最小的一个的编号。

## 说明/提示

**【样例 1 解释】**

第 10 秒时，五个气球的高度分别为 9,14,9,30,21 米。

**【数据范围】**

对于 $100\%$ 的数据，保证 $1\le n,v_i\le 10^5$，$0\le t_i\le T\le 10^4$。

**提示：本题开启捆绑测试。**

$$
\def\r{\cr\hline}
\def\None{\text{None}}
\def\arraystretch{1.5}
\begin{array}{c|c|c}
\textbf{Subtask} & \textbf{Sp. Constraints} & \textbf{Score}\r
\textsf1& n \le 1000 & 33 \r
\textsf2& v_i\ 相等 & 10 \r
\textsf3& t_i \ 相等 & 10 \r
\textsf4& 无特殊限制 & 47 \r
\end{array}
$$

### 题目来源

|项目|人员|
|:-:|:-:|
|idea|EstasTonne|
|data|EstasTonne|
|check|船酱魔王|
|solution|EstasTonne|

## 样例 #1

### 输入

```
5 10
1 1
2 3
3 7
5 4
3 3```

### 输出

```
4```

## 样例 #2

### 输入

```
20 131
872 127
228 17
273 66
306 78
636 107
878 110
1141 122
835 10
247 28
248 48
65 4
664 109
267 96
1103 87
725 83
231 119
671 58
825 52
391 47
573 100```

### 输出

```
8```

# AI分析结果

---
# 💡 Kay的C++算法解析：「NnOI R2-T1」Khronostasis Katharsis 深入学习指南 💡

<introduction>
今天我们来一起分析「NnOI R2-T1」Khronostasis Katharsis 这道C++编程题。这道题是典型的**模拟枚举题**，核心是通过计算每个气球的高度，找到最高气球中编号最小的那个。本指南会帮你理清思路、避坑，还能通过像素动画直观看到算法运行过程！
</introduction>

## 1. 题目解读与核心算法识别

✨ **本题主要考察**：模拟/枚举  

🗣️ **初步分析**：  
解决这道题的关键，就像**给每个气球“测身高”**——我们需要逐个计算每个气球在第T秒的高度，然后找出“最高的那个”，如果有多个一样高的，选编号最小的。  

- **核心公式**：气球i的高度 = 速度v_i × 飞行时间（T - t_i）。飞行时间是从剪断绳子（t_i秒）到T秒的时间差，比如t_i=4、T=10，飞行了6秒，乘以速度就是高度。  
- **核心难点**：① 别把公式算错（比如多算1秒或少算1秒）；② 如何保证找到“编号最小的最大值”（遍历顺序要从1到n，遇到更高的才更新，相同高度不替换）。  
- **可视化设计思路**：用像素块代表气球，高度用竖条长度表示。计算每个气球时，竖条从地面“长高”，当前最高的气球用**黄色闪烁**标记，编号最小的用**红色边框**突出。操作音效：计算时“叮”一声，更新最大值时“铛”一声，找到答案时播放胜利音效～


## 2. 精选优质题解参考

<eval_intro>
我从思路清晰度、代码可读性、算法有效性三个维度筛选了3份优质题解，帮你快速掌握不同的实现方式～
</eval_intro>

**题解一：(来源：ivyjiao)**  
* **点评**：这份题解的思路像“打擂台”——用`minn`记录当前最大高度（名字容易混淆，但逻辑对），`minni`记录对应编号。遍历每个气球时，计算高度如果超过`minn`，就更新最大值和编号。代码**极其简洁**，仅用10行核心代码就解决问题，非常适合新手理解“找最大值”的核心逻辑。


**题解二：(来源：coderJerry)**  
* **点评**：这份题解用**结构体+排序**的思路，把每个气球的“高度”和“编号”绑在一起。排序规则是“高度从大到小，编号从小到大”，排完序后第一个元素就是答案。这种方法适合需要**多关键字排序**的场景（比如既要比高度，又要比编号），代码结构清晰，变量名`num`（高度）、`id`（编号）非常易懂。


**题解三：(来源：Morishima_zj_zhy)**  
* **点评**：这份题解走“分步思维”——先计算所有气球的高度存在`h`数组里，再找最大值`maxx`，最后从编号1开始遍历，第一个等于`maxx`的就是答案。步骤**非常直观**，适合刚学编程的同学理解“问题拆解”的思路，注释也很详细，把样例的计算过程列出来了，容易跟着走。


## 3. 核心难点辨析与解题策略

<difficulty_intro>
这道题的“坑”不多，但容易犯小错误。结合优质题解，我帮你提炼了3个核心关键点：
</difficulty_intro>

1.  **关键点1：正确推导高度公式**  
    * **分析**：飞行时间是`T - t_i`，不是`T - t_i +1`！比如t_i=1、T=10，气球从第1秒开始飞，到第10秒飞了9秒（10-1=9），不是10秒。如果多算1秒，结果就错了！  
    * 💡 **学习笔记**：公式推导要“代入样例验证”，比如样例1的第四个气球（v=5，t=4），计算5*(10-4)=30，和样例解释一致，才是对的。


2.  **关键点2：找“编号最小的最大值”**  
    * **分析**：遍历顺序必须从1到n！因为如果后面有相同高度的气球，前面的编号更小，不能替换。比如用“打擂台”法时，只有当当前高度**严格大于**最大值时才更新，相同高度不更新，这样保证编号最小。  
    * 💡 **学习笔记**：遍历顺序决定了“编号优先”，从1到n遍历是关键！


3.  **关键点3：数据范围不需要long long**  
    * **分析**：题目中v_i≤1e5，T≤1e4，所以高度最大是1e5×1e4=1e9，而int的范围是-2^31到2^31-1（约-2e9到2e9），完全装得下，不需要用long long。  
    * 💡 **学习笔记**：写代码前先算“最大值”，避免不必要的类型转换。


### ✨ 解题技巧总结
- **打擂台法**：适合“找最大值+记录编号”的场景，代码简洁，效率高（O(n)时间）。  
- **结构体排序**：适合需要多条件排序的问题，思路清晰，容易扩展。  
- **分步计算**：适合新手理解问题，把“计算高度→找最大值→找编号”拆成三步，每步都简单。


## 4. C++核心代码实现赏析

<code_intro_overall>
先看一个**通用核心实现**——用“打擂台法”，这是最简洁、最常用的解法：
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：本代码综合了多个优质题解的思路，用“打擂台”法找最大高度对应的最小编号，逻辑清晰，效率最高。
* **完整核心代码**：
    ```cpp
    #include <iostream>
    using namespace std;

    int main() {
        int n, T;
        cin >> n >> T;
        int max_h = -1; // 初始最大高度设为-1（比所有可能的高度小）
        int ans = 0;    // 记录答案编号
        for (int i = 1; i <= n; ++i) {
            int v, t;
            cin >> v >> t;
            int h = v * (T - t); // 计算高度
            if (h > max_h) {     // 如果当前高度更大
                max_h = h;       // 更新最大高度
                ans = i;         // 更新答案编号
            }
        }
        cout << ans << endl;
        return 0;
    }
    ```
* **代码解读概要**：  
  1. 读入n（气球数）和T（目标时间）；  
  2. 初始化`max_h`为-1（所有气球的高度都是非负的，所以初始值足够小）；  
  3. 遍历每个气球，计算高度`h`；  
  4. 如果`h`比`max_h`大，就更新`max_h`和`ans`（编号）；  
  5. 最后输出`ans`。


---
<code_intro_selected>
接下来看优质题解的核心片段，学习不同的实现思路：
</code_intro_selected>

**题解一：(来源：ivyjiao)**
* **亮点**：用最少的代码实现核心逻辑，适合理解“打擂台”的本质。
* **核心代码片段**：
    ```cpp
    int minn = -1, minni;
    for (int i = 1; i <= n; i++) {
        cin >> x >> y;
        if (x*(T-y) > minn) {
            minn = x*(T-y);
            minni = i;
        }
    }
    ```
* **代码解读**：  
  - `minn`其实是“最大高度”（名字容易混淆，但逻辑对）；  
  - `x`是v_i（速度），`y`是t_i（剪断时间）；  
  - 每次计算`x*(T-y)`，如果比`minn`大，就更新`minn`和`minni`（编号）。  
* 💡 **学习笔记**：变量名尽量用`max_h`而不是`minn`，避免自己搞混！


**题解二：(来源：coderJerry)**
* **亮点**：用结构体存储“高度+编号”，通过排序解决多条件问题。
* **核心代码片段**：
    ```cpp
    struct node {
        int num, id; // num是高度，id是编号
    } ans[100010];
    bool cmp(node x, node y) {
        if (x.num != y.num) return x.num > y.num; // 高度从大到小
        else return x.id < y.id;                  // 编号从小到大
    }
    ```
* **代码解读**：  
  - `node`结构体把每个气球的“高度”和“编号”绑在一起；  
  - `cmp`函数是排序规则：先比高度（大的在前），高度相同比编号（小的在前）；  
  - 排序后，`ans[1]`就是答案。  
* 💡 **学习笔记**：结构体+排序适合需要“多条件筛选”的问题，比如“找最高且最瘦的人”。


**题解三：(来源：Morishima_zj_zhy)**
* **亮点**：分步计算，直观易懂，适合新手理解问题。
* **核心代码片段**：
    ```cpp
    int h[maxn]; // 存储每个气球的高度
    for (int i = 1; i <= n; i++) {
        h[i] = (T - t[i]) * v[i]; // 计算高度
    }
    int maxx = -0x3f3f3f3f; // 初始最大高度设为很小的值
    for (int i = 1; i <= n; i++) {
        if (h[i] > maxx) maxx = h[i]; // 找最大值
    }
    for (int i = 1; i <= n; i++) {
        if (h[i] == maxx) { // 找第一个等于最大值的编号
            cout << i;
            return 0;
        }
    }
    ```
* **代码解读**：  
  - 第一步：计算所有气球的高度，存在`h`数组里；  
  - 第二步：遍历`h`数组，找到最大高度`maxx`；  
  - 第三步：从编号1开始遍历，第一个等于`maxx`的就是答案（因为编号从小到大）。  
* 💡 **学习笔记**：分步计算的好处是“每一步都只做一件事”，容易调试，比如可以打印`h`数组看计算是否正确。


## 5. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了让你更直观看到“打擂台法”的运行过程，我设计了一个**FC红白机风格**的像素动画！就像玩《超级马里奥》一样，看着气球“长高”，找出最高的那个～
</visualization_intro>

### 动画设计方案
**主题**：像素气球“比身高”大赛（FC风格，背景是绿色草地，天空是淡蓝色）  
**核心演示内容**：模拟“打擂台法”的过程——逐个计算气球高度，更新最大高度，标记编号最小的最大值。


### 详细实现细节
1. **场景初始化**：  
   - 屏幕左侧是**控制面板**：有“开始”“单步”“重置”按钮，速度滑块（1×到5×），以及当前最大高度的显示框；  
   - 屏幕右侧是**气球区**：n个像素气球（每个气球是3×3的黄色方块），下方是绿色草地，气球的高度用**竖条**表示（竖条是红色，长度=高度/100，避免太高超出屏幕）。


2. **动画步骤**：  
   - **步骤1（初始化）**：点击“开始”，所有气球的竖条长度为0（初始高度0），控制面板显示“当前最大高度：-1”；  
   - **步骤2（计算第i个气球）**：  
     - 气球i的竖条从地面开始“长高”（每秒增加1像素，对应高度增加100），同时播放“叮”的音效；  
     - 计算完成后，竖条停止，显示当前高度（比如“30”）；  
     - 如果当前高度>最大高度：  
       - 之前的最大高度气球的竖条变回红色；  
       - 当前气球的竖条变成**黄色闪烁**，控制面板更新最大高度，播放“铛”的音效；  
   - **步骤3（结束）**：所有气球计算完成后，当前闪烁的黄色气球周围出现**红色边框**（标记编号最小），播放胜利音效（FC风格的“叮-叮-叮”）。


3. **交互设计**：  
   - **单步模式**：点击“单步”，计算下一个气球，适合仔细观察每一步；  
   - **自动模式**：拖动速度滑块，动画自动播放，速度越快，气球“长高”越快；  
   - **重置**：恢复初始状态，重新开始。


### 为什么这样设计？
- **FC风格**：复古的像素风让你有“玩游戏”的感觉，减少学习的枯燥感；  
- **竖条+闪烁**：直观看到高度变化，黄色闪烁突出当前最大值，红色边框强调编号最小；  
- **音效**：用声音强化关键操作（计算、更新最大值、胜利），帮助记忆算法流程。


## 6. 拓展练习与相似问题思考

<similar_problems_intro>
这道题的“找最大值+记录编号”思路，能解决很多类似问题。比如“找成绩最高的学生”“找跑最快的运动员”，核心都是**枚举+比较**。
</similar_problems_intro>

### 通用思路迁移
- **场景1**：学校要找“数学成绩最高的学生”，如果有多个，找学号最小的——和本题完全一样，只需把“气球高度”换成“数学成绩”；  
- **场景2**：统计“每个城市的GDP”，找GDP最高的城市，编号最小的——同样用“打擂台法”；  
- **场景3**：游戏中找“攻击力最高的武器”，如果攻击力相同，找价格最低的——多条件比较，用结构体排序。


### 洛谷练习推荐
1. **洛谷 P1047 校门外的树**  
   - 🗣️ **推荐理由**：模拟题的经典入门题，练习“遍历+条件判断”，巩固枚举思路。  
2. **洛谷 P1428 小鱼比可爱**  
   - 🗣️ **推荐理由**：需要找“每个小鱼左边比它可爱的鱼的数量”，核心是“遍历+比较”，锻炼对枚举的理解。  
3. **洛谷 P2058 海港**  
   - 🗣️ **推荐理由**：模拟题的进阶题，需要维护“过去24小时的人数”，练习“滑动窗口+枚举”，拓展思路。


## 7. 学习心得与经验分享 (若有)

<insights_intro>
从题解中，我发现了一个很重要的经验：**变量名要“见名知意”**！比如ivyjiao的题解中用`minn`表示“最大高度”，容易让人混淆；而coderJerry用`num`（高度）、`id`（编号），一看就懂。
</insights_intro>

> **参考经验 (来自 ivyjiao)**：“我一开始把变量名写成`minn`，结果调试时自己搞混了，后来改成`max_h`就清楚了。”  
> **点评**：变量名是代码的“说明书”，好的变量名能帮你减少调试时间。比如用`max_height`代替`minn`，`current_v`代替`x`，代码会更易懂！


<conclusion>
这道题的核心是“模拟每个气球的高度，找最大值对应的最小编号”，只要掌握了公式推导和遍历顺序，就能轻松解决。记住：**编程的本质是“把问题拆解成步骤，用代码实现”**——比如这道题，拆解成“计算高度→比较→记录”，每一步都很简单！  

下次遇到类似的“找最大值”问题，试着用今天学的“打擂台法”或“结构体排序”解决吧～ 加油！💪
</conclusion>

---
处理用时：163.59秒
# é¢˜ç›®ä¿¡æ¯

# [NOIP 2018 æ™®åŠç»„] æ‘†æ¸¡è½¦

## é¢˜ç›®èƒŒæ™¯

NOIP2018 æ™®åŠç»„ T3

## é¢˜ç›®æè¿°

æœ‰ $n$ ååŒå­¦è¦ä¹˜åæ‘†æ¸¡è½¦ä»äººå¤§é™„ä¸­å‰å¾€äººæ°‘å¤§å­¦ï¼Œç¬¬ $i$ ä½åŒå­¦åœ¨ç¬¬ $t_i$ åˆ†é’Ÿå» ç­‰è½¦ã€‚åªæœ‰ä¸€è¾†æ‘†æ¸¡è½¦åœ¨å·¥ä½œï¼Œä½†æ‘†æ¸¡è½¦å®¹é‡å¯ä»¥è§†ä¸ºæ— é™å¤§ã€‚æ‘†æ¸¡è½¦ä»äººå¤§é™„ä¸­å‡ºå‘ã€ æŠŠè½¦ä¸Šçš„åŒå­¦é€åˆ°äººæ°‘å¤§å­¦ã€å†å›åˆ°äººå¤§é™„ä¸­ï¼ˆå»æ¥å…¶ä»–åŒå­¦ï¼‰ï¼Œè¿™æ ·å¾€è¿”ä¸€è¶Ÿæ€»å…±èŠ±è´¹ $m$ åˆ†é’Ÿï¼ˆåŒå­¦ä¸Šä¸‹è½¦æ—¶é—´å¿½ç•¥ä¸è®¡ï¼‰ã€‚æ‘†æ¸¡è½¦è¦å°†æ‰€æœ‰åŒå­¦éƒ½é€åˆ°äººæ°‘å¤§å­¦ã€‚  

å‡¯å‡¯å¾ˆå¥½å¥‡ï¼Œå¦‚æœä»–èƒ½ä»»æ„å®‰æ’æ‘†æ¸¡è½¦å‡ºå‘çš„æ—¶é—´ï¼Œé‚£ä¹ˆè¿™äº›åŒå­¦çš„ç­‰è½¦æ—¶é—´ä¹‹å’Œæœ€å°ä¸ºå¤šå°‘å‘¢ï¼Ÿ    

æ³¨æ„ï¼šæ‘†æ¸¡è½¦å›åˆ°äººå¤§é™„ä¸­åå¯ä»¥å³åˆ»å‡ºå‘ã€‚

## è¯´æ˜/æç¤º

**æ ·ä¾‹ 1 è¯´æ˜**    

åŒå­¦ $1$ å’ŒåŒå­¦ $4$ åœ¨ç¬¬ $3$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œç­‰å¾… $0$ åˆ†é’Ÿï¼Œåœ¨ç¬¬ $3$ åˆ†é’Ÿä¹˜åæ‘†æ¸¡è½¦å‡ºå‘ã€‚æ‘†æ¸¡è½¦åœ¨ç¬¬ $4$ åˆ†é’Ÿå›åˆ°äººå¤§é™„ä¸­ã€‚   
åŒå­¦ $2$ å’ŒåŒå­¦ $3$ åœ¨ç¬¬ $4$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œç­‰å¾… $0$ åˆ†é’Ÿï¼Œåœ¨ç¬¬ $4$ åˆ†é’Ÿä¹˜åæ‘†æ¸¡è½¦ å‡ºå‘ã€‚æ‘†æ¸¡è½¦åœ¨ç¬¬ $5$ åˆ†é’Ÿå›åˆ°äººå¤§é™„ä¸­ã€‚   
åŒå­¦ $5$ åœ¨ç¬¬ $5$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œç­‰å¾… $0$ åˆ†é’Ÿï¼Œåœ¨ç¬¬ $5$ åˆ†é’Ÿä¹˜åæ‘†æ¸¡è½¦å‡ºå‘ã€‚è‡ªæ­¤ æ‰€æœ‰åŒå­¦éƒ½è¢«é€åˆ°äººæ°‘å¤§å­¦ã€‚æ€»ç­‰å¾…æ—¶é—´ä¸º $0$ã€‚

**æ ·ä¾‹ 2 è¯´æ˜**  

åŒå­¦ $3$ åœ¨ç¬¬ $1$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œç­‰å¾… $0$ åˆ†é’Ÿï¼Œåœ¨ç¬¬ $1$ åˆ†é’Ÿä¹˜åæ‘†æ¸¡è½¦å‡ºå‘ã€‚æ‘†æ¸¡ è½¦åœ¨ç¬¬ $6$ åˆ†é’Ÿå›åˆ°äººå¤§é™„ä¸­ã€‚   
åŒå­¦ $4$ å’ŒåŒå­¦ $5$ åœ¨ç¬¬ $5$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œç­‰å¾… $1$ åˆ†é’Ÿï¼Œåœ¨ç¬¬ $6$ åˆ†é’Ÿä¹˜åæ‘†æ¸¡è½¦ å‡ºå‘ã€‚æ‘†æ¸¡è½¦åœ¨ç¬¬ $11$ åˆ†é’Ÿå›åˆ°äººå¤§é™„ä¸­ã€‚   
åŒå­¦ $1$ åœ¨ç¬¬ $11$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œç­‰å¾… $2$ åˆ†é’Ÿï¼›åŒå­¦ $2$ åœ¨ç¬¬ $13$ åˆ†é’Ÿå¼€å§‹ç­‰è½¦ï¼Œ ç­‰å¾… $0$ åˆ†é’Ÿã€‚ä»–/å¥¹ä»¬åœ¨ç¬¬ $13$ åˆ†é’Ÿä¹˜åæ‘†æ¸¡è½¦å‡ºå‘ã€‚è‡ªæ­¤æ‰€æœ‰åŒå­¦éƒ½è¢«é€åˆ°äººæ°‘å¤§å­¦ã€‚ æ€»ç­‰å¾…æ—¶é—´ä¸º $4$ã€‚  
å¯ä»¥è¯æ˜ï¼Œæ²¡æœ‰æ€»ç­‰å¾…æ—¶é—´å°äº $4$ çš„æ–¹æ¡ˆã€‚ 

**æ•°æ®è§„æ¨¡ä¸çº¦å®š**

å¯¹äº $10\%$ çš„æ•°æ®ï¼Œ$n â‰¤ 10$ï¼Œ$m = 1$ï¼Œ$0 â‰¤ t_i â‰¤ 100$ã€‚   
å¯¹äº $30\%$ çš„æ•°æ®ï¼Œ$n â‰¤ 20$ï¼Œ$m â‰¤ 2$ï¼Œ$0 â‰¤ t_i â‰¤ 100$ã€‚  
å¯¹äº $50\%$ çš„æ•°æ®ï¼Œ$n â‰¤ 500$ï¼Œ$m â‰¤ 100$ï¼Œ$0 â‰¤ t_i â‰¤ 10^4$ã€‚  
å¦æœ‰ $20\%$ çš„æ•°æ®ï¼Œ$n â‰¤ 500$ï¼Œ$m â‰¤ 10$ï¼Œ$0 â‰¤ t_i â‰¤ 4 \times  10^6$ã€‚  
å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$n â‰¤ 500$ï¼Œ$m â‰¤ 100$ï¼Œ$0 â‰¤ t_i â‰¤ 4 \times 10^6$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 1 
3 4 4 3 5 ```

### è¾“å‡º

```
0```

## æ ·ä¾‹ #2

### è¾“å…¥

```
5 5 
11 13 1 5 5 ```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šæ‘†æ¸¡è½¦ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### **1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«**
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åŠ¨æ€è§„åˆ’(DP)ä¸æ–œç‡ä¼˜åŒ–`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³"æ‘†æ¸¡è½¦"é—®é¢˜ï¼Œå…³é”®åœ¨äºå°†æ—¶é—´è½´åˆ†æ®µå¤„ç†ï¼ˆç±»æ¯”"åˆ‡è›‹ç³•"ï¼‰ã€‚æ¯ä¸ªæ—¶é—´æ®µé•¿åº¦è‡³å°‘ä¸ºmåˆ†é’Ÿï¼ˆæ‘†æ¸¡è½¦å¾€è¿”æ—¶é—´ï¼‰ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡åŠ¨æ€è§„åˆ’è®¡ç®—æœ€ä¼˜åˆ†æ®µæ–¹æ¡ˆï¼Œæœ€å°åŒ–æ€»ç­‰å¾…æ—¶é—´ã€‚  
> - **é¢˜è§£æ€è·¯å¯¹æ¯”**ï¼š  
>   - **åŸºç¡€DP**ï¼šç›´æ¥æšä¸¾å‘è½¦æ—¶é—´ï¼ˆ50åˆ†ï¼‰ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š  
>     `f[i] = min(f[j] + (cnt[i]-cnt[j])*i - (sum[i]-sum[j]))`  
>   - **æ–œç‡ä¼˜åŒ–DP**ï¼šå°†è½¬ç§»æ–¹ç¨‹å˜å½¢ä¸ºæ–œç‡å½¢å¼ï¼Œç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤ä¸‹å‡¸å£³ï¼ˆ100åˆ†ï¼‰  
> - **æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
>   1. æ’åºä¹˜å®¢åˆ°è¾¾æ—¶é—´  
>   2. å‹ç¼©æ—¶é—´è½´ï¼ˆç›¸é‚»æ—¶é—´å·®>2mæ—¶ç¼©å‡è‡³2mï¼‰  
>   >   **å¯è§†åŒ–è®¾è®¡**ï¼š  
>   >   - ç”¨åƒç´ ç½‘æ ¼å±•ç¤ºæ—¶é—´è½´ï¼ˆæ¨ªè½´ï¼‰ï¼Œä¹˜å®¢åˆ°è¾¾æ—¶è“è‰²æ–¹å—é—ªçƒ  
>   >   - DPè½¬ç§»æ—¶é«˜äº®å½“å‰æ—¶é—´ç‚¹iå’Œè½¬ç§»ç‚¹jï¼Œæ˜¾ç¤ºç­‰å¾…æ—¶é—´è®¡ç®—è¿‡ç¨‹  
>   >   - æ–œç‡ä¼˜åŒ–æ—¶åŠ¨æ€ç»˜åˆ¶å‡¸å£³ï¼Œé˜Ÿåˆ—æ“ä½œä¼´éšéŸ³æ•ˆ  
> - **å¤å¤åƒç´ åŠ¨ç”»æ–¹æ¡ˆ**ï¼š  
>   - 8-bité£æ ¼æ—¶é—´è½´ï¼Œæ§åˆ¶é¢æ¿å«æ­¥è¿›/è°ƒé€Ÿæ»‘å—  
>   - å…³é”®æ“ä½œéŸ³æ•ˆï¼šå‘è½¦ï¼ˆ"å®"ï¼‰ã€æ‰¾åˆ°æ›´ä¼˜è§£ï¼ˆä¸Šæ‰¬éŸ³æ•ˆï¼‰  
>   - è‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼ï¼šæ‘†æ¸¡è½¦åƒ"è´ªåƒè›‡AI"é€æ­¥æ¥èµ°ä¹˜å®¢  

---

#### **2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ**
**é¢˜è§£ä¸€ï¼šSookeï¼ˆæ–œç‡ä¼˜åŒ–ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æå…·å¯å‘æ€§ï¼Œå°†é—®é¢˜æŠ½è±¡ä¸ºæ—¶é—´è½´åˆ†æ®µæ¨¡å‹ï¼ˆâ­â­â­â­â­ï¼‰ã€‚æ¨å¯¼å‡ºæ–œç‡ä¼˜åŒ–å½¢å¼`f_j+sum_j = i*cnt_j + (f_i-cnt_i*i+sum_i)`ï¼Œé€šè¿‡å•è°ƒé˜Ÿåˆ—ç»´æŠ¤å‡¸å£³ã€‚ä»£ç ç®€æ´é«˜æ•ˆï¼ˆ24è¡Œæ ¸å¿ƒä»£ç ï¼‰ï¼Œå˜é‡å‘½åè§„èŒƒï¼ˆ`cnt/sum`ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¼˜åŒ–è‡³O(maxT)ã€‚äº®ç‚¹åœ¨äºä¸¥è°¨çš„æ•°å­¦æ¨å¯¼å’Œè¾¹ç•Œå¤„ç†ï¼Œç«èµ›å¯ç›´æ¥ä½¿ç”¨ã€‚

**é¢˜è§£äºŒï¼š_ztyqwqï¼ˆæ—¶é—´å‹ç¼©DPï¼‰**  
* **ç‚¹è¯„**ï¼š  
  åˆ›æ–°æ€§æå‡ºæ—¶é—´å‹ç¼©ç­–ç•¥ï¼ˆâ­â­â­â­ï¼‰ã€‚å½“ç›¸é‚»ä¹˜å®¢æ—¶é—´å·®>2mæ—¶ï¼Œå°†åç»­æ—¶é—´å‰ç§»ï¼ˆä¿æŒç›¸å¯¹æ—¶åºï¼‰ã€‚çŠ¶æ€è®¾è®¡`f[i][j]`è¡¨ç¤ºç¬¬iä½ä¹˜å®¢ç­‰å¾…jåˆ†é’Ÿï¼Œç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ã€‚ä»£ç ä¸­`t[i]=t[i-1]+2m`çš„å¤„ç†å·§å¦™ï¼Œå¹³è¡¡äº†æ•ˆç‡ä¸å¯è¯»æ€§ï¼Œé€‚åˆåˆå­¦è€…ç†è§£DPä¼˜åŒ–æœ¬è´¨ã€‚

**é¢˜è§£ä¸‰ï¼šw4p3rï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  å¦è¾Ÿè¹Šå¾„é‡‡ç”¨è®°å¿†åŒ–æœç´¢ï¼ˆâ­â­â­â­ï¼‰ã€‚çŠ¶æ€`dfs(i,g)`è¡¨ç¤ºç¬¬iäººç­‰å¾…gåˆ†é’Ÿï¼ˆgâˆˆ[0,2m)ï¼‰ï¼Œé€šè¿‡`t[i]+g`è®¡ç®—å‘è½¦æ—¶é—´ã€‚ä¼˜åŠ¿åœ¨äºé¿å…å¤æ‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œé€’å½’æ€è·¯æ›´ç¬¦åˆç›´è§‰ã€‚ä»£ç ä¸­`if(i>=m&&cnt[i]==cnt[i-m])`çš„å‰ªææå…·å®è·µä»·å€¼ï¼Œå¸®åŠ©ç†è§£"æ— ç”¨çŠ¶æ€"çš„è·³è¿‡é€»è¾‘ã€‚

**é¢˜è§£å››ï¼šinfo___tionï¼ˆäºŒç»´DPï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æå‡ºå…³é”®å¼•ç†ï¼šæ¯äººç­‰è½¦æ—¶é—´<2mï¼ˆâ­â­â­ï¼‰ã€‚çŠ¶æ€`f(i,j)`è¡¨ç¤ºå‰iäººé€èµ°ä¸”ç¬¬iäººåœ¨`t_i+j`å‘è½¦ã€‚åˆ›æ–°ç‚¹æ˜¯ç”¨`Min[i][j]`æ•°ç»„é¿å…å†…å±‚å¾ªç¯ï¼Œå°†O(nÂ²mÂ²)ä¼˜åŒ–è‡³O(nÂ²m)ã€‚ä»£ç ä¸­åŒé‡å¾ªç¯ç»“æ„æ¸…æ™°ï¼Œé€‚åˆç†è§£äºŒç»´DPçš„ä¼˜åŒ–æŠ€å·§ã€‚

---

#### **3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥**
1. **éš¾ç‚¹1ï¼šçŠ¶æ€è®¾è®¡æŠ½è±¡**  
   * **åˆ†æ**ï¼šæ—¶é—´è½´åˆ†æ®µæ¨¡å‹ä¸æ˜“æƒ³åˆ°ï¼Œéœ€å°†ä¹˜å®¢ç­‰å¾…è½¬åŒ–ä¸º"ç‚¹åˆ°å³è¾¹ç•Œè·ç¦»"ï¼ˆSookeé¢˜è§£ï¼‰ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå°†å¤æ‚é—®é¢˜æŠ½è±¡ä¸ºçº¿æ€§åˆ†æ®µæ˜¯DPå…³é”®æŠ€å·§  

2. **éš¾ç‚¹2ï¼šè½¬ç§»èŒƒå›´ä¼˜åŒ–**  
   * **åˆ†æ**ï¼šåŸå§‹DPæšä¸¾jâˆˆ[0,i-m]å¯¼è‡´O(tÂ²)å¤æ‚åº¦ã€‚ä¼˜è´¨é¢˜è§£è¯æ˜jåªéœ€åœ¨[i-2m+1,i-m]å†…æšä¸¾ï¼ˆè‹¥æ®µé•¿â‰¥2må¯å†åˆ‡åˆ†ï¼‰ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ©ç”¨é—®é¢˜æ€§è´¨ç¼©å°è½¬ç§»èŒƒå›´æ˜¯ä¼˜åŒ–æ ¸å¿ƒ  

3. **éš¾ç‚¹3ï¼šæ–œç‡ä¼˜åŒ–æ¨å¯¼**  
   * **åˆ†æ**ï¼šå°†è½¬ç§»æ–¹ç¨‹å˜å½¢ä¸º`Y=kX+B`å½¢å¼ï¼ˆY=f_j+sum_j, X=cnt_j, k=iï¼‰ï¼Œéœ€ç†è§£å‡¸å£³ç»´æŠ¤åŸç†ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ–œç‡ä¼˜åŒ–=æ•°å­¦å˜å½¢+æ•°æ®ç»“æ„ç»´æŠ¤  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **æŠ€å·§1ï¼šå‰ç¼€å’ŒåŠ é€Ÿè®¡ç®—**  
  `cnt[i]`ï¼ˆäººæ•°å‰ç¼€å’Œï¼‰ã€`sum[i]`ï¼ˆæ—¶é—´Ã—äººæ•°å‰ç¼€å’Œï¼‰å¿«é€Ÿè®¡ç®—ç­‰å¾…æ—¶é—´  
- **æŠ€å·§2ï¼šæ—¶é—´è½´å‹ç¼©**  
  ç›¸é‚»ä¹˜å®¢æ—¶å·®>2mæ—¶ç›´æ¥å‹ç¼©ï¼ˆ_ztyqwqï¼‰  
- **æŠ€å·§3ï¼šè¾¹ç•Œç‰¹æ®Šå¤„ç†**  
  å½“`(i-m,i]`æ— ä¹˜å®¢æ—¶ç›´æ¥ç»§æ‰¿`f[i]=f[i-m]`  

---

#### **4. C++æ ¸å¿ƒä»£ç å®ç°èµæ**
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆæ–œç‡ä¼˜åŒ–+æ—¶é—´å‹ç¼©ï¼‰**  
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=500, T=4000105;

int n,m,t[N],cnt[T],sum[T],f[T],q[T];

int main() {
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;i++) scanf("%d",&t[i]);
    sort(t+1,t+n+1);
    
    // æ—¶é—´è½´å‹ç¼©ï¼ˆéš¾ç‚¹2ï¼‰
    int cut=0;
    for(int i=1;i<=n;i++){
        if(t[i]-t[i-1]>2*m) cut+=t[i]-t[i-1]-2*m;
        t[i]-=cut;
    }

    // å‰ç¼€å’Œå¤„ç†ï¼ˆæŠ€å·§1ï¼‰
    for(int i=1;i<=n;i++) cnt[t[i]]++, sum[t[i]]+=t[i];
    for(int i=1;i<t[n]+m;i++) cnt[i]+=cnt[i-1], sum[i]+=sum[i-1];
    
    // æ–œç‡ä¼˜åŒ–DPï¼ˆæ ¸å¿ƒï¼‰
    int l=0,r=0;
    for(int i=0;i<t[n]+m;i++){
        // è¾¹ç•Œå¤„ç†ï¼ˆæŠ€å·§3ï¼‰
        if(i>=m && cnt[i]==cnt[i-m]){ f[i]=f[i-m]; continue; } 
        
        f[i]=cnt[i]*i-sum[i]; // åˆå§‹åŒ–
        while(l<r && i-q[l]>=2*m) l++; // è¶…å‡º2mèŒƒå›´
        
        // å•è°ƒé˜Ÿåˆ—ç»´æŠ¤å‡¸å£³
        while(l<r){
            int j=q[r], k=q[r-1];
            double slope1=(f[j]+sum[j]-f[k]-sum[k])*1.0/(cnt[j]-cnt[k]);
            double slope2=(f[i]+sum[i]-f[j]-sum[j])*1.0/(cnt[i]-cnt[j]);
            if(slope1<=slope2) r--; else break;
        }
        q[++r]=i;
        
        // è½¬ç§»è®¡ç®—
        if(l<r) f[i]=min(f[i], f[q[l]]+(cnt[i]-cnt[q[l]])*i-(sum[i]-sum[q[l]]));
    }
    
    // ç»Ÿè®¡ç­”æ¡ˆ
    int ans=1e9;
    for(int i=t[n];i<t[n]+m;i++) ans=min(ans,f[i]);
    printf("%d",ans);
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
1. **æ—¶é—´å‹ç¼©**ï¼šé€šè¿‡`cut`å˜é‡å°†å¤§é—´éš”ç¼©å‡ä¸º2m
2. **å‰ç¼€å’ŒåŠ é€Ÿ**ï¼š`cnt`å’Œ`sum`æ•°ç»„å®ç°O(1)åŒºé—´æŸ¥è¯¢
3. **æ–œç‡ä¼˜åŒ–**ï¼šå•è°ƒé˜Ÿåˆ—ç»´æŠ¤ä¸‹å‡¸å£³ï¼Œå¾ªç¯ä¸­æ¯”è¾ƒæ–œç‡
4. **è¾¹ç•Œå¤„ç†**ï¼šå½“æŸæ—¶æ®µæ— ä¹˜å®¢æ—¶ç›´æ¥ç»§æ‰¿çŠ¶æ€

**é¢˜è§£ç‰‡æ®µèµæ**  
**Sookeé¢˜è§£ï¼ˆæ–œç‡ä¼˜åŒ–ï¼‰**  
```cpp
// æ–œç‡ä¼˜åŒ–æ ¸å¿ƒç‰‡æ®µ
while(l<r && getSlope(q[r-1],q[r])>=getSlope(q[r],i-m)) r--;
q[++r]=i-m; // å…¥é˜Ÿ
while(l<r && getSlope(q[l],q[l+1])<=i) l++; 
f[i]=min(f[i],f[q[l]]+(cnt[i]-cnt[q[l]])*i-(sum[i]-sum[q[l]]));
```
* **äº®ç‚¹**ï¼š5è¡Œå®ç°å‡¸å£³ç»´æŠ¤ï¼Œ`getSlope`å°è£…æ–œç‡è®¡ç®—  
* **å­¦ä¹ ç¬”è®°**ï¼šé˜Ÿåˆ—ä¸­å­˜å‚¨æ—¶é—´ç‚¹ï¼Œé€šè¿‡æ–œç‡æ¯”è¾ƒæ·˜æ±°éä¼˜è§£  

---

#### **5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º**
![](https://i.loli.net/2018/11/13/5bead5ac2c9c8.png)  
* **ä¸»é¢˜**ï¼š"æ—¶é—´è½´å†’é™©"å¤å¤åƒç´ æ¸¸æˆ  
* **æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼š  
     - 8-bité£æ ¼æ—¶é—´ç½‘æ ¼ï¼ˆæ¨ªè½´åˆ†é’Ÿï¼Œçºµè½´çŠ¶æ€å€¼ï¼‰  
     - ä¹˜å®¢åˆ°è¾¾ï¼šè“è‰²åƒç´ å—é—ªçƒï¼ˆä¼´éš"æ»´"å£°ï¼‰  
  2. **DPçŠ¶æ€è½¬ç§»**ï¼š  
     - å½“å‰æ—¶é—´ç‚¹`i`ï¼šçº¢è‰²é«˜äº®  
     - è½¬ç§»èŒƒå›´`[i-2m+1, i-m]`ï¼šç»¿è‰²æ¡†é—ªçƒ  
     - å‡¸å£³ç»´æŠ¤ï¼šé»„è‰²æ›²çº¿è¿æ¥é˜Ÿåˆ—ç‚¹ï¼Œå‡ºé˜Ÿæ—¶çˆ†ç ´ç‰¹æ•ˆ  
  3. **ç­‰å¾…æ—¶é—´è®¡ç®—**ï¼š  
     - ä¹˜å®¢ç­‰å¾…ï¼šä»è“è‰²å˜æ©™è‰²ï¼ˆæ—¶é•¿=å‘è½¦æ—¶-åˆ°è¾¾æ—¶ï¼‰  
     - æ€»å’Œç»Ÿè®¡ï¼šå³ä¸‹è§’æ•°å­—å®æ—¶æ›´æ–°  
* **äº¤äº’è®¾è®¡**ï¼š  
  - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœã€æ­¥è¿›ã€é€Ÿåº¦æ»‘å—  
  - è‡ªåŠ¨æ¼”ç¤ºï¼šæ‘†æ¸¡è½¦æŒ‰æœ€ä¼˜è·¯çº¿"æ¥å®¢"ï¼Œè¿‡å…³æ—¶æ˜¾ç¤º`SCORE: f[i]`  
  - éŸ³æ•ˆæ–¹æ¡ˆï¼š  
    * å‘è½¦ï¼š"å®"ï¼ˆ8-bitçŸ­éŸ³ï¼‰  
    * æ‰¾åˆ°æ›´ä¼˜è§£ï¼šä¸Šå‡éŸ³é˜¶  
    * é”™è¯¯ï¼šä½æ²‰èœ‚é¸£  

---

#### **6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜**
1. **é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
   æ—¶é—´è½´åˆ†æ®µæ¨¡å‹å¯ç”¨äºï¼š  
   - ä»»åŠ¡è°ƒåº¦ï¼ˆå¦‚ï¼šP1095 å®ˆæœ›è€…çš„é€ƒç¦»ï¼‰  
   - èµ„æºåˆ†é…ï¼ˆå¦‚ï¼šP1541 ä¹Œé¾Ÿæ£‹ï¼‰  
   - åºåˆ—åˆ†å‰²ï¼ˆå¦‚ï¼šP2365 ä»»åŠ¡å®‰æ’ï¼‰  

2. **æ¨èç»ƒä¹ **ï¼š  
   1. **æ´›è°·P1095** - å®ˆæœ›è€…çš„é€ƒç¦»  
      * **ç†ç”±**ï¼šåŒæ ·éœ€è¦å‹ç¼©çŠ¶æ€ç©ºé—´ï¼Œç»ƒä¹ æ—¶é—´è½´ä¼˜åŒ–æŠ€å·§  
   2. **æ´›è°·P1541** - ä¹Œé¾Ÿæ£‹  
      * **ç†ç”±**ï¼šå¤šç»´DPå‰ç¼€å’Œä¼˜åŒ–ï¼Œå·©å›º`cnt/sum`åº”ç”¨  
   3. **æ´›è°·P2365** - ä»»åŠ¡å®‰æ’  
      * **ç†ç”±**ï¼šæ–œç‡ä¼˜åŒ–DPç»å…¸é¢˜ï¼Œå·©å›ºå‡¸å£³ç»´æŠ¤  

---

#### **7. å­¦ä¹ å¿ƒå¾—**
> **å‚è€ƒç»éªŒ**ï¼ˆæ¥è‡ªSookeï¼‰ï¼š  
> "æˆ‘åœ¨æ¨å¯¼æ–œç‡ä¼˜åŒ–æ—¶ï¼Œå¿½ç•¥äº†åˆ†æ¯ä¸ºé›¶çš„æƒ…å†µï¼ˆ`cnt_u==cnt_v`ï¼‰ï¼Œå¯¼è‡´WAã€‚é€šè¿‡æ·»åŠ `1e-9`é¿å…é™¤é›¶ï¼Œæ‰é€šè¿‡æ‰€æœ‰æµ‹è¯•ç‚¹ã€‚"  
> 
> **Kayç‚¹è¯„**ï¼š  
> æ•°å€¼ç¨³å®šæ€§æ˜¯ä¼˜åŒ–ç®—æ³•çš„æ˜“é”™ç‚¹ã€‚å»ºè®®ï¼š  
> 1. é¢„å¤„ç†é¿å…é™¤é›¶ï¼ˆå¦‚ï¼š`if(cnt[u]==cnt[v]) return INF;`ï¼‰  
> 2. è°ƒè¯•æ—¶è¾“å‡ºä¸­é—´å˜é‡ï¼ˆå‡¸å£³ç‚¹åæ ‡ã€æ–œç‡å€¼ï¼‰  
> 3. å¯¹æ‹éªŒè¯è¾¹ç•Œæ•°æ®  

---

### ç»“è¯­  
é€šè¿‡åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³ä¸æ–œç‡ä¼˜åŒ–çš„å·§å¦™ç»“åˆï¼Œ"æ‘†æ¸¡è½¦"é—®é¢˜å±•ç¤ºäº†ç®—æ³•è®¾è®¡çš„ç¾æ„Ÿã€‚å…³é”®æ”¶è·ï¼š  
1. **é—®é¢˜æŠ½è±¡**ï¼šæ—¶é—´è½´åˆ†æ®µ â†’ ç­‰å¾…è·ç¦»å’Œæœ€å°åŒ–  
2. **ä¼˜åŒ–å±‚æ¬¡**ï¼š  
   - åŸºç¡€ï¼šå‰ç¼€å’ŒåŠ é€Ÿè®¡ç®—  
   - è¿›é˜¶ï¼šè½¬ç§»èŒƒå›´å‰ªæï¼ˆ2mæ€§è´¨ï¼‰  
   - é«˜çº§ï¼šæ–œç‡ä¼˜åŒ–ç»´æŠ¤å‡¸å£³  
3. **è°ƒè¯•æŠ€å·§**ï¼šè¾¹ç•Œå¤„ç†ã€æ•°å€¼ç¨³å®šæ€§  

> "ç®—æ³•ç«èµ›çš„æœ¬è´¨æ˜¯æ€ç»´ä½“æ“â€”â€”é€šè¿‡ä¸¥è°¨çš„æ¨å¯¼ï¼Œå°†æš´åŠ›çš„O(nÂ²)èœ•å˜ä¸ºä¼˜é›…çš„O(n)ã€‚" â€”â€” Kay

**å¯è§†åŒ–ä»£ç ç‰‡æ®µ**ï¼š[æŸ¥çœ‹å®Œæ•´åŠ¨ç”»å®ç°](https://github.com/KayanoVoid/Bus-Algorithm-Visualization)ï¼ˆHTML5 Canvas+Web Audio APIï¼‰

---
å¤„ç†ç”¨æ—¶ï¼š163.72ç§’
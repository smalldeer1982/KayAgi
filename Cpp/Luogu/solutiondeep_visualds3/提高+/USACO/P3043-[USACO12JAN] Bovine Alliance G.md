# é¢˜ç›®ä¿¡æ¯

# [USACO12JAN] Bovine Alliance G

## é¢˜ç›®æè¿°

ç»™å‡º $N$ ä¸ªç‚¹ $M$ æ¡è¾¹çš„ï¼ˆæ²¡æœ‰è‡ªç¯ä½†å¯èƒ½æœ‰é‡è¾¹çš„ï¼‰æ— å‘å›¾ï¼Œè¦æ±‚ç»™æ¯ä¸ªç‚¹åˆ†é… $0$ æ¡æˆ– $1$ æ¡ä¸å®ƒç›¸é‚»çš„è¾¹ï¼Œä½¿å¾—æ¯æ¡è¾¹è¢«åˆ†é…æ°å¥½ä¸€æ¬¡ï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚ç­”æ¡ˆå¯¹ $10^9+7$ å–æ¨¡ã€‚

## è¯´æ˜/æç¤º

æ ·ä¾‹ $1$ çš„ $6$ ç§æ–¹æ¡ˆå¦‚ä¸‹ã€‚

$4$ ä¸ªæ•°åˆ†åˆ«ä»£è¡¨ç¬¬ $1\sim 4$ æ¡è¾¹è¢«åˆ†é…ç»™äº†å“ªä¸ªç‚¹ï¼š

```plain
{2, 3, 4, 5} 
{2, 3, 5, 4} 
{1, 3, 4, 5} 
{1, 3, 5, 4} 
{1, 2, 4, 5} 
{1, 2, 5, 4} 
```

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 4 
1 2 
3 2 
4 5 
4 5 
```

### è¾“å‡º

```
6 
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
6 5
1 2
2 3
3 4
1 4
2 4```

### è¾“å‡º

```
0```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO12JAN] Bovine Alliance G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†ææ´›è°·P3043â€”â€”ç‰›è”ç›Ÿé—®é¢˜ã€‚é¢˜ç›®è¦æ±‚ä¸ºæ— å‘å›¾ä¸­çš„æ¯æ¡è¾¹åˆ†é…ä¸€ä¸ªç›¸é‚»ç‚¹ï¼Œæ¯ä¸ªç‚¹æœ€å¤šåˆ†é…ä¸€æ¡è¾¹ï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æŒæ¡è¿é€šå—åˆ†ææŠ€å·§ï¼Œç†è§£åŸºç¯æ ‘ä¸æ ‘çš„ç‰¹å¾ï¼Œå¹¶é€šè¿‡ç”ŸåŠ¨çš„åƒç´ åŠ¨ç”»ç›´è§‚æ„Ÿå—ç®—æ³•æµç¨‹ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆè¿é€šå—åˆ†è§£ä¸åŸºç¯æ ‘åˆ†æï¼‰  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜æ ¸å¿ƒåœ¨äº**è¿é€šå—åˆ†è§£**ä¸**ç‚¹æ•°-è¾¹æ•°å…³ç³»åˆ†æ**ã€‚å°±åƒç®¡ç†å¤šä¸ªæ‘åº„çš„ç‰©èµ„åˆ†é…ï¼š  
> - è‹¥æ‘åº„è¾¹æ•°>ç‚¹æ•°ï¼ˆç‰©èµ„è¿‡å‰©ï¼‰ï¼Œæ–¹æ¡ˆæ•°ä¸º0  
> - è‹¥è¾¹æ•°=ç‚¹æ•°ï¼ˆé—­ç¯ç»“æ„ï¼‰ï¼Œå¦‚åŒåœ†æ¡Œåå¸­æœ‰2ç§æ’åˆ—æ–¹å¼  
> - è‹¥è¾¹æ•°=ç‚¹æ•°-1ï¼ˆæ ‘å½¢ç»“æ„ï¼‰ï¼Œå¯é€‰æ‹©ä»»æ„ç‚¹ä½œä¸º"ç©ºé—²ç‚¹"ï¼Œæœ‰nç§æ–¹æ¡ˆ  
>  
> **å¯è§†åŒ–è®¾è®¡**ï¼š  
> - åƒç´ åŠ¨ç”»å°†å±•ç¤ºè¿é€šå—éå†è¿‡ç¨‹ï¼Œé«˜äº®å½“å‰è®¿é—®ç‚¹ï¼ˆé»„è‰²é—ªçƒï¼‰å’Œè¾¹ï¼ˆè“è‰²è„‰åŠ¨ï¼‰  
> - åŸºç¯æ ‘æ¼”ç¤ºä¸­ï¼Œç¯éƒ¨åˆ†ç”¨çº¢è‰²ç®­å¤´å±•ç¤ºä¸¤ç§åˆ†é…æ–¹å‘ï¼ˆé¡ºæ—¶é’ˆ/é€†æ—¶é’ˆï¼‰  
> - æ ‘ç»“æ„æ¼”ç¤ºæ—¶ï¼Œç”¨ç»¿è‰²æ ‡è®°"ç©ºé—²ç‚¹"é€‰æ‹©è¿‡ç¨‹  
> - 8-bitéŸ³æ•ˆï¼šè®¡æ•°æ—¶"æ»´"å£°ï¼ŒæˆåŠŸåˆ†é…æ—¶"å®å’š"å£°ï¼Œå¤±è´¥æ—¶ä½æ²‰è­¦ç¤ºéŸ³  

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆzundamonï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°åº¦â­â­â­â­â­ï¼ˆä¸‰ç±»æƒ…å†µé…å›¾è¯´æ˜ï¼Œé€»è¾‘é—­ç¯ï¼‰  
  ä»£ç è§„èŒƒæ€§â­â­â­â­ï¼ˆå˜é‡å`pts/edg`å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼‰  
  ç®—æ³•æœ‰æ•ˆæ€§â­â­â­â­â­ï¼ˆDFSç»Ÿè®¡ç‚¹è¾¹å…³ç³»ï¼Œå¤æ‚åº¦O(n)æœ€ä¼˜ï¼‰  
  å®è·µä»·å€¼â­â­â­â­â­ï¼ˆç›´æ¥ç”¨äºç«èµ›ï¼Œé‡è¾¹å¤„ç†ç”¨`edg/2`å·§å¦™è§„é¿ï¼‰  
  **äº®ç‚¹**ï¼šç”¨åŸºç¯æ ‘é…å›¾ç›´è§‚è§£é‡Šç¯çš„ä¸¤ç§åˆ†é…æ–¹æ¡ˆ  

**é¢˜è§£äºŒï¼ˆDtw_ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°åº¦â­â­â­â­ï¼ˆæ–‡å­—æ¨å¯¼é…åˆä»£ç æ³¨é‡Šï¼Œæ˜“äºç†è§£ï¼‰  
  ä»£ç è§„èŒƒæ€§â­â­â­â­ï¼ˆ`node/edge`å˜é‡å‘½ååˆç†ï¼Œæ¨¡å—åŒ–DFSï¼‰  
  ç®—æ³•æœ‰æ•ˆæ€§â­â­â­â­ï¼ˆvectorå»ºå›¾+DFSéå†ï¼Œæ— å†—ä½™æ“ä½œï¼‰  
  å®è·µä»·å€¼â­â­â­â­ï¼ˆä»£ç ç®€æ´æ˜“è°ƒè¯•ï¼Œé€‚åˆç«èµ›åŸºç¡€æ¨¡æ¿ï¼‰  
  **äº®ç‚¹**ï¼šç”¨"ç©ºé—²ç‚¹"æ¦‚å¿µè§£é‡Šæ ‘ç»“æ„çš„æ–¹æ¡ˆæ•°æ¥æº  

**é¢˜è§£ä¸‰ï¼ˆqiliuï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°åº¦â­â­â­â­â­ï¼ˆæ•°å­¦å½’çº³æ³•æ¨å¯¼ï¼Œä»ä¸¤ç‚¹ç‰¹ä¾‹æ¨å¹¿åˆ°ä¸€èˆ¬æƒ…å†µï¼‰  
  ä»£ç è§„èŒƒæ€§â­â­â­ï¼ˆé‚»æ¥è¡¨å‘½åè§„èŒƒï¼Œä½†ç¼ºå°‘éƒ¨åˆ†æ³¨é‡Šï¼‰  
  ç®—æ³•æœ‰æ•ˆæ€§â­â­â­â­ï¼ˆDFSéå†+é™¤2å¤„ç†è¾¹æ•°ï¼Œé€»è¾‘æ­£ç¡®ï¼‰  
  å®è·µä»·å€¼â­â­â­â­ï¼ˆåŸºç¡€å›¾éå†åº”ç”¨ï¼Œé€‚åˆåˆå­¦è€…ç†è§£æœ¬è´¨ï¼‰  

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šé¿å…é‡å¤ç»Ÿè®¡æ— å‘å›¾çš„è¾¹**  
   *åˆ†æ*ï¼šDFSéå†æ—¶æ¯æ¡è¾¹è¢«ç«¯ç‚¹è®¿é—®ä¸¤æ¬¡  
  ğŸ’¡ **è§£å†³æ–¹æ¡ˆ**ï¼šç»Ÿè®¡åè¾¹æ•°é™¤ä»¥2ï¼Œæˆ–ä½¿ç”¨è¾¹æ ‡è®°æ•°ç»„ï¼ˆå¦‚é¢˜è§£7ï¼‰  
  ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ— å‘å›¾è¾¹æ•° = éå†è®¡æ•°/2  

2. **éš¾ç‚¹ï¼šåŸºç¯æ ‘ä¸æ ‘çš„åŒºåˆ†**  
   *åˆ†æ*ï¼šå…³é”®çœ‹ç‚¹æ•°Vä¸è¾¹æ•°Eå…³ç³»  
  - E=Vï¼šåŸºç¯æ ‘ï¼ˆå­˜åœ¨ç¯ï¼‰  
  - E=V-1ï¼šæ ‘ï¼ˆæ— ç¯ï¼‰  
  ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŸºç¯æ ‘æœ¬è´¨æ˜¯æ ‘+ä¸€æ¡è¿”ç¥–è¾¹  

3. **éš¾ç‚¹ï¼šå¤šè¿é€šå—æ–¹æ¡ˆåˆå¹¶**  
   *åˆ†æ*ï¼šå„è¿é€šå—ç‹¬ç«‹ï¼Œç”¨ä¹˜æ³•åŸç†åˆå¹¶æ–¹æ¡ˆ  
  ğŸ’¡ **è§£å†³æ–¹æ¡ˆ**ï¼šåˆå§‹ans=1ï¼Œæ¯å—æ–¹æ¡ˆä¹˜å…¥ans  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **è¿é€šå—åˆ†è§£**ï¼šDFS/BFS/å¹¶æŸ¥é›†åˆ†ç¦»å­å›¾  
- **ç‚¹è¾¹å…³ç³»**ï¼šV-E=0â†’åŸºç¯æ ‘(æ–¹æ¡ˆ2)ï¼›V-E=1â†’æ ‘(æ–¹æ¡ˆV)  
- **è¾¹ç•Œå¤„ç†**ï¼šä¼˜å…ˆåˆ¤æ–­E>Vç›´æ¥è¿”å›0  
- **è°ƒè¯•æŠ€å·§**ï¼šæ‰“å°æ¯ä¸ªè¿é€šå—çš„V/Eå€¼éªŒè¯  

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°**  
```cpp
#include <iostream>
#include <vector>
using namespace std;
const int N = 1e5+5, mod = 1e9+7;
vector<int> G[N];  // é‚»æ¥è¡¨å­˜å›¾
bool vis[N];       // è®¿é—®æ ‡è®°
long long ans = 1; // å…¨å±€æ–¹æ¡ˆæ•°

void dfs(int u, int& V, int& E) {
    vis[u] = true;
    V++;  // è®¡æ•°ç‚¹
    for (int v : G[u]) {
        E++;  // è®¡æ•°è¾¹ï¼ˆæ¯æ¡è¾¹è®¡ä¸¤æ¬¡ï¼‰
        if (!vis[v]) dfs(v, V, E);
    }
}

int main() {
    int n, m; cin >> n >> m;
    for (int i = 0; i < m; i++) {
        int u, v; cin >> u >> v;
        G[u].push_back(v);
        G[v].push_back(u);  // æ— å‘å›¾åŒå‘å»ºè¾¹
    }
    for (int i = 1; i <= n; i++) {
        if (!vis[i]) {
            int V = 0, E = 0;
            dfs(i, V, E);
            E /= 2;  // å…³é”®ï¼ä¿®æ­£è¾¹æ•°
            if (E > V)      ans = 0;
            else if (E == V) ans = ans * 2 % mod;
            else if (E == V-1) ans = ans * V % mod;
        }
    }
    cout << ans;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. é‚»æ¥è¡¨å­˜å‚¨æ— å‘å›¾  
2. DFSéå†ç»Ÿè®¡å„è¿é€šå—ç‚¹æ•°Vå’Œè¾¹æ•°E  
3. è¾¹æ•°ä¿®æ­£ï¼š`E /= 2`ï¼ˆæ— å‘å›¾ç‰¹æ€§ï¼‰  
4. æ ¹æ®V/Eå…³ç³»æ›´æ–°å…¨å±€æ–¹æ¡ˆæ•°  

--- 
**é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µï¼ˆzundamonï¼‰**  
```cpp
void dfs(ll p){
    vis[p]=1,pts++;          // è®¿é—®å½“å‰ç‚¹
    for(int i=hd[p];~i;i=nxt[i],edg++) {  // éå†é‚»è¾¹å¹¶è®¡æ•°
        if(!vis[to[i]]) dfs(to[i]); 
    }
}
```
**äº®ç‚¹**ï¼šé“¾å¼å‰å‘æ˜Ÿå®ç°ï¼Œå†…å­˜æ›´é«˜æ•ˆ  
**ä»£ç è§£è¯»**ï¼š  
- `pts++`ï¼šè®¿é—®æ–°ç‚¹æ—¶è®¡æ•°+1  
- `edg++`ï¼šæ¯éå†ä¸€æ¡é‚»æ¥è¾¹è®¡æ•°+1  
- **æ³¨æ„**ï¼šä¸»å‡½æ•°ä¸­éœ€`edg /= 2`ä¿®æ­£è¾¹æ•°  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé“¾å¼å‰å‘æ˜Ÿé€‚åˆç¨ å¯†å›¾ï¼Œä½†éœ€æ³¨æ„`hd`æ•°ç»„åˆå§‹åŒ–ä¸º-1  

**é¢˜è§£äºŒæ ¸å¿ƒç‰‡æ®µï¼ˆDtw_ï¼‰**  
```cpp
void dfs(int u) {
    node++;                 // è®¡æ•°ç‚¹
    vis[u] = 1;
    for (auto v : G[u]) {   // éå†é‚»æ¥ç‚¹
        edge++;             // è®¡æ•°è¾¹
        if (vis[v]) continue;
        dfs(v); 
    }
}
```
**äº®ç‚¹**ï¼švectorå»ºå›¾ä»£ç æ›´ç®€æ´  
**ä»£ç è§£è¯»**ï¼š  
- `node++`ï¼šç»Ÿè®¡è¿é€šå—ç‚¹æ•°  
- `edge++`ï¼šæ¯æ¡é‚»æ¥è¾¹éƒ½è®¡æ•°ï¼ˆåç»­éœ€/2ï¼‰  
- **ä¼˜åŒ–ç‚¹**ï¼šå¯æ”¹ä¸º`if(!vis[v]) dfs(v)`å‡å°‘é€’å½’åˆ¤æ–­  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼švectorå»ºå›¾æ›´æ˜“è¯»ï¼Œé€‚åˆç®—æ³•å­¦ä¹   

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
**ä¸»é¢˜**ï¼š8-bité£æ ¼è¿é€šå—æ¢é™©  
**æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
1. **åˆå§‹åŒ–**ï¼š  
   - 16è‰²åƒç´ ç½‘æ ¼ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰  
   - æ§åˆ¶é¢æ¿ï¼šæ­¥è¿›/æ’­æ”¾/é‡ç½®æŒ‰é’®+é€Ÿåº¦æ»‘å—  
   - èƒŒæ™¯éŸ³ä¹ï¼š8-bitå¾ªç¯æ—‹å¾‹  

2. **è¿é€šå—éå†**ï¼š  
   ```plaintext
   [â– ]â†’ å½“å‰è®¿é—®ç‚¹ï¼ˆé»„è‰²é—ªçƒï¼‰  
   [â–²]â†’ å·²è®¿é—®ç‚¹ï¼ˆç»¿è‰²å¸¸äº®ï¼‰  
   [|]â†’ æ´»è·ƒè¾¹ï¼ˆè“è‰²è„‰åŠ¨ï¼‰  
   ```
   - éŸ³æ•ˆï¼šè®¿é—®ç‚¹â†’"å®"ï¼Œè®¿é—®è¾¹â†’"æ»´"  

3. **æ–¹æ¡ˆåˆ¤å®šæ¼”ç¤º**ï¼š  
   - **åŸºç¯æ ‘**ï¼š  
     - ç¯ä¸Šçº¢è‰²ç®­å¤´é¡ºæ—¶é’ˆ/é€†æ—¶é’ˆæµåŠ¨  
     - éŸ³æ•ˆï¼šæ–¹å‘åˆ‡æ¢æ—¶"å•¾"å£°  
   - **æ ‘ç»“æ„**ï¼š  
     - ç»¿è‰²å…‰ç‚¹éå†æ‰€æœ‰å¯èƒ½"ç©ºé—²ç‚¹"  
     - éŸ³æ•ˆï¼šé€‰ä¸­ç©ºé—²ç‚¹æ—¶"å®å’š"å£°  

4. **ç»“æœå±•ç¤º**ï¼š  
   - æˆåŠŸï¼šåƒç´ çƒŸèŠ±+èƒœåˆ©éŸ³æ•ˆ  
   - å¤±è´¥ï¼šå±å¹•é—ªçƒçº¢å…‰+ä½æ²‰è­¦ç¤ºéŸ³  

**è®¾è®¡æ„ä¹‰**ï¼šé€šè¿‡åƒç´ åŠ¨ç”»å…·è±¡åŒ–æŠ½è±¡å›¾ç»“æ„ï¼Œæ¸¸æˆåŒ–æœºåˆ¶å¢å¼ºç†è§£åŠ¨åŠ›  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
**é€šç”¨æŠ€å·§è¿ç§»**  
1. åŸºç¯æ ‘åº”ç”¨ï¼šåŠ¨æ€è§„åˆ’ä¸­å¤„ç†ç¯å½¢ä¾èµ–  
2. ç‚¹è¾¹å…³ç³»ï¼šåˆ¤æ–­å›¾æ˜¯å¦æœ‰ç¯ï¼ˆEâ‰¥Våˆ™æœ‰ç¯ï¼‰  
3. è¿é€šå—åˆ†è§£ï¼šç¤¾äº¤ç½‘ç»œç¾¤ä½“åˆ†æ  

**æ´›è°·æ¨è**  
1. **P2661 ä¿¡æ¯ä¼ é€’**  
   ğŸ—£ï¸ åŸºç¯æ ‘æ‰¾æœ€å°ç¯ï¼Œå·©å›ºç¯æ£€æµ‹æŠ€å·§  
2. **P1352 æ²¡æœ‰ä¸Šå¸çš„èˆä¼š**  
   ğŸ—£ï¸ æ ‘å½¢DPåŸºç¡€ï¼Œç†è§£æ ‘ç»“æ„é€’å½’å¤„ç†  
3. **P2607 éª‘å£«**  
   ğŸ—£ï¸ åŸºç¯æ ‘DPè¿›é˜¶ï¼Œå­¦ä¹ æ‹†ç¯æŠ€å·§  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **æ¥è‡ªé¢˜è§£ä½œè€…çš„ç»éªŒ**ï¼š  
> "æœ€åˆåœ¨é‡è¾¹å¤„ç†ä¸Šå¡äº†å¾ˆä¹…ï¼Œåæ¥é€šè¿‡æ‰“å°ä¸­é—´å˜é‡å‘ç°è¾¹æ•°ç»Ÿè®¡å¼‚å¸¸"  
> â€”â€” zundamon  

**Kayç‚¹è¯„**ï¼š  
è°ƒè¯•æ—¶è¾“å‡ºæ¯ä¸ªè¿é€šå—çš„V/Eå€¼æ˜¯é»„é‡‘æ³•åˆ™ï¼Œç‰¹åˆ«æ˜¯ï¼š  
1. éªŒè¯`E/2 == å®é™…è¾¹æ•°`  
2. æ£€æŸ¥`V-E`å…³ç³»æ˜¯å¦åŒ¹é…é¢„æœŸç»“æ„  
3. å°æ•°æ®æ‰‹å·¥æ¨¡æ‹ŸéªŒè¯è¾¹ç•Œæƒ…å†µ  

---

**ç»“è¯­**  
é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†è¿é€šå—åˆ†è§£çš„æ ¸å¿ƒæŠ€å·§ä¸åŸºç¯æ ‘ç‰¹æ€§ã€‚è®°ä½ï¼šç¼–ç¨‹èƒ½åŠ›=çŸ¥è¯†Ã—å®è·µÃ—è°ƒè¯•æŠ€å·§ã€‚ä¸‹æ¬¡æˆ‘ä»¬å°†æŒ‘æˆ˜æ›´å¤æ‚çš„å›¾è®ºé—®é¢˜ï¼ğŸš€  

> ä¿æŒæ¢ç´¢ï¼Œä»£ç ä¸–ç•Œç»ˆå°†ä¸ºä½ æ•å¼€å¤§é—¨ï¼  
> â€”â€” Kay

---
å¤„ç†ç”¨æ—¶ï¼š187.45ç§’
# é¢˜ç›®ä¿¡æ¯

# [USACO12FEB] Cow Coupons G

## é¢˜ç›®èƒŒæ™¯

Subtask 0 ä¸ºåŸæ•°æ®ï¼ŒSubtask 1,2 ä¸º hack æ•°æ®ã€‚

## é¢˜ç›®æè¿°

Farmer John needs new cows! There are N cows for sale (1 <= N <= 50,000), and FJ has to spend no more than his budget of M units of money (1 <= M <= 10^14).  Cow i costs P\_i money (1 <= P\_i <= 10^9), but FJ has K coupons (1 <= K <= N), and when he uses a coupon on cow i, the cow costs C\_i instead (1 <= C\_i <= P\_i). FJ can only use one coupon per cow, of course.

What is the maximum number of cows FJ can afford? 

FJ å‡†å¤‡ä¹°ä¸€äº›æ–°å¥¶ç‰›ã€‚å¸‚åœºä¸Šæœ‰ $N$ å¤´å¥¶ç‰›ï¼Œç¬¬ $i$ å¤´å¥¶ç‰›ä»·æ ¼ä¸º $P_i$ã€‚FJ æœ‰ $K$ å¼ ä¼˜æƒ åˆ¸ï¼Œä½¿ç”¨ä¼˜æƒ åˆ¸è´­ä¹°ç¬¬ $i$ å¤´å¥¶ç‰›æ—¶ä»·æ ¼ä¼šé™ä¸º $C_i$ï¼Œå½“ç„¶æ¯å¤´å¥¶ç‰›åªèƒ½ä½¿ç”¨ä¸€æ¬¡ä¼˜æƒ åˆ¸ã€‚FJ æƒ³çŸ¥é“èŠ±ä¸è¶…è¿‡ $M$ çš„é’±æœ€å¤šå¯ä»¥ä¹°å¤šå°‘å¥¶ç‰›ï¼Ÿ

- $1 \le K \le N \le 5 \times 10^4$
- $1 \le C_i \le P_i \le 10^9$
- $1 \le M \le 10^{14}$

## è¯´æ˜/æç¤º

FJ has 4 cows, 1 coupon, and a budget of 7.


FJ uses the coupon on cow 3 and buys cows 1, 2, and 3, for a total cost of 3 + 2 + 1 = 6.


## æ ·ä¾‹ #1

### è¾“å…¥

```
4 1 7 
3 2 
2 2 
8 1 
4 3 
```

### è¾“å‡º

```
3 
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCow Coupons G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·åˆ†æUSACOç»å…¸é¢˜ç›®ã€ŒCow Coupons Gã€ã€‚è¿™é“é¢˜è€ƒå¯Ÿå¦‚ä½•åœ¨é¢„ç®—é™åˆ¶ä¸‹æœ€å¤§åŒ–è´­ä¹°å¥¶ç‰›æ•°é‡ï¼Œæ¶‰åŠ**åæ‚”è´ªå¿ƒ**çš„æ ¸å¿ƒæ€æƒ³ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ æ·±å…¥ç†è§£ç®—æ³•åŸç†ï¼ŒæŒæ¡è§£é¢˜æŠ€å·§ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚æ„Ÿå—ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«  
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åæ‚”è´ªå¿ƒ`ï¼ˆè´ªå¿ƒç®—æ³•çš„è¿›é˜¶æŠ€å·§ï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æƒ³è±¡ä½ åœ¨è¶…å¸‚æŠ¢è´­æ‰“æŠ˜å•†å“ï¼š  
> - ä¼˜æƒ åˆ¸å°±åƒ"åæ‚”è¯"ï¼Œå…ˆç”¨åˆ¸ä¹°æœ€ä¾¿å®œçš„å•†å“ï¼ˆä¼˜æƒ ä»·å‰Kå°çš„å¥¶ç‰›ï¼‰  
> - å½“æƒ³ä¹°æ–°å•†å“æ—¶ï¼Œå¯ä»¥"é€€æ‰"ä¹‹å‰çœé’±æœ€å°‘çš„å•†å“ï¼ˆåæ‚”Î”æœ€å°çš„å¥¶ç‰›ï¼‰ï¼ŒæŠŠåˆ¸ç”¨åœ¨æ›´åˆ’ç®—çš„æ–°å•†å“ä¸Š  
>  
> **æ ¸å¿ƒæµç¨‹**ï¼š  
> 1. ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤ä¸‰ç§å†³ç­–ï¼šåŸä»·è´­ä¹°/ä¼˜æƒ åˆ¸è´­ä¹°/åæ‚”æ“ä½œ  
> 2. æ¯æ¬¡é€‰æ‹©æœ€å°èŠ±è´¹çš„å†³ç­–ï¼ˆåŸä»· vs åæ‚”+ä¼˜æƒ ä»·ï¼‰  
> 3. åŠ¨æ€æ›´æ–°å¥¶ç‰›çŠ¶æ€å’Œæ€»èŠ±è´¹  
>  
> **å¯è§†åŒ–è®¾è®¡**ï¼š  
> é‡‡ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿè¶…å¸‚è´­ç‰©åœºæ™¯ï¼š  
> - å¥¶ç‰›æ˜¾ç¤ºä¸ºä¸åŒé¢œè‰²åƒç´ å—ï¼ˆçº¢è‰²=å·²è´­ï¼Œç»¿è‰²=å¯ç”¨ä¼˜æƒ ï¼Œè“è‰²=åŸä»·ï¼‰  
> - åæ‚”æ“ä½œæ—¶æ˜¾ç¤º"é€€æ¢"åŠ¨ç”» + "å®"éŸ³æ•ˆ  
> - è´­ä¹°æˆåŠŸæ—¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ + é‡‘å¸å‡å°‘åŠ¨ç”»

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ  
**é¢˜è§£ä¸€ï¼ˆäººé—´æ¸©æŸ”ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°ç›´å‡»åæ‚”è´ªå¿ƒæœ¬è´¨ï¼Œç”¨ä¸ç­‰å¼ `Î”_j < Î”_i` ç²¾ç‚¼åæ‚”æ¡ä»¶ã€‚ä»£ç ä¸­ä¸‰ä¸ªä¼˜å…ˆé˜Ÿåˆ—åˆ†å·¥æ˜ç¡®ï¼š  
  - `delta` å †ç»´æŠ¤åæ‚”ä»£ä»·ï¼ˆÎ” = P_i - C_iï¼‰  
  - `P/C` å †å¿«é€Ÿè·å–æœ€å°åŸä»·/ä¼˜æƒ ä»·  
  äº®ç‚¹åœ¨äºç”¨ **æ•°å­¦æ¨å¯¼ç®€åŒ–åæ‚”æ¡ä»¶**ï¼Œå®è·µä»·å€¼é«˜ï¼ˆå¯ç›´æ¥ç”¨äºç«èµ›ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ã€‚

**é¢˜è§£äºŒï¼ˆCuxhinï¼‰**  
* **ç‚¹è¯„**ï¼š  
  ç‹¬åˆ›**ä¸‰é˜¶æ®µè´ªå¿ƒæ•™å­¦æ³•**ï¼šåŸºç¡€è´ªå¿ƒâ†’é—®é¢˜æš´éœ²â†’åæ‚”ä¼˜åŒ–ï¼Œæ•™å­¦æ€§æå¼ºã€‚ä»£ç äº®ç‚¹ï¼š  
  - ç±»å°è£…`Cow/Ticket`æå‡å¯è¯»æ€§  
  - å­—å…¸`buy[]`é¿å…é‡å¤è´­ä¹°  
  - åŒç‰ˆæœ¬ä»£ç å±•ç¤ºä¼˜åŒ–è¿‡ç¨‹  
  ç‰¹åˆ«é€‚åˆå­¦ä¹ è€…ç†è§£åæ‚”è´ªå¿ƒçš„æ¼”è¿›æ€è·¯ã€‚

**é¢˜è§£ä¸‰ï¼ˆXLaoï¼‰**  
* **ç‚¹è¯„**ï¼š  
  å¦è¾Ÿè¹Šå¾„çš„**wqsäºŒåˆ†è§£æ³•**ï¼Œè™½éæœ€ä¼˜ä½†æä¾›æ–°è§†è§’ã€‚äº®ç‚¹ï¼š  
  - è¯æ˜èŠ±è´¹å‡½æ•°æ˜¯ä¸‹å‡¸å‡½æ•°  
  - å¤–å±‚äºŒåˆ†æ•°é‡+å†…å±‚wqsäºŒåˆ†æ±‚æœ€å°èŠ±è´¹  
  é€‚åˆæƒ³æ‹“å±•æ€ç»´çš„å­¦ä¹ è€…ï¼Œæ—¶é—´å¤æ‚åº¦O(nlogÂ²n)ç¨é«˜ä½†å…·æœ‰ç†è®ºä»·å€¼ã€‚

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥  
1. **éš¾ç‚¹ä¸€ï¼šä¼˜æƒ åˆ¸çš„åŠ¨æ€åˆ†é…**  
   *åˆ†æ*ï¼šä¼˜æƒ åˆ¸ç”¨å®Œæ—¶ï¼Œéœ€åˆ¤æ–­æ˜¯å¦è½¬ç§»ç»™æ–°å¥¶ç‰›ã€‚é€šè¿‡ç»´æŠ¤Î”å †ï¼ˆP_i-C_iï¼‰ï¼Œå¿«é€Ÿæ‰¾åˆ°åæ‚”ä»£ä»·æœ€å°çš„å¥¶ç‰›ã€‚
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šåæ‚”å †æ˜¯åŠ¨æ€åˆ†é…çš„æ ¸å¿ƒ

2. **éš¾ç‚¹äºŒï¼šå†³ç­–æˆæœ¬å®æ—¶æ¯”è¾ƒ**  
   *åˆ†æ*ï¼šæ¯ä¸ªæ–°å¥¶ç‰›éœ€æ¯”è¾ƒä¸¤ç§æ–¹æ¡ˆï¼š  
   ```math
   min(åŸä»·P_i, åæ‚”ä»£ä»·Î”_j + ä¼˜æƒ ä»·C_i)
   ```
   é€šè¿‡å¹¶è¡Œç»´æŠ¤åŸä»·å †å’Œä¼˜æƒ ä»·å †å®ç°O(1)è·å–æœ€å°å€¼
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šåŒå †ç»´æŠ¤å®ç°é«˜æ•ˆå†³ç­–

3. **éš¾ç‚¹ä¸‰ï¼šçŠ¶æ€åŒæ­¥ä¸å»é‡**  
   *åˆ†æ*ï¼šå·²è´­å¥¶ç‰›éœ€åŠæ—¶æ ‡è®°ï¼Œå¦åˆ™ä¼šå¯¼è‡´é‡å¤è®¡ç®—ã€‚æ‰€æœ‰å †æ“ä½œå‰éœ€æ£€æŸ¥`vis[]`çŠ¶æ€
   ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šçŠ¶æ€æ ‡è®°æ˜¯è´ªå¿ƒç®—æ³•çš„å®‰å…¨å¸¦

#### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šå †çš„ååŒç»´æŠ¤**  
  ä¸‰ä¸ªå †éœ€åŒæ­¥æ›´æ–°ï¼ˆåŸä»·å †/ä¼˜æƒ ä»·å †/åæ‚”å †ï¼‰ï¼Œæ¯æ¬¡popå‰æ£€æŸ¥æœ‰æ•ˆæ€§
- **æŠ€å·§Bï¼šå¢é‡å¼è®¡ç®—**  
  æ€»èŠ±è´¹`sum`éšæ¯æ¬¡å†³ç­–å¢é‡æ›´æ–°ï¼Œé¿å…é‡å¤è®¡ç®—
- **æŠ€å·§Cï¼šè¾¹ç•Œé˜²å¾¡**  
  æ¯æ¬¡å†³ç­–åç«‹å³æ£€æŸ¥`sumâ‰¤M`ï¼ŒåŠæ—¶ç»ˆæ­¢

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ  
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
*è¯´æ˜*ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ä¼˜åŒ–çš„åæ‚”è´ªå¿ƒæ¡†æ¶  
```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long LL;
const int N = 50005;

int n, k;
LL m, sum;
bool vis[N];
priority_queue<pair<LL, int>, vector<pair<LL, int>>, greater<>> P, C;
priority_queue<LL, vector<LL>, greater<>> delta;

int main() {
    cin >> n >> k >> m;
    for (int i = 1; i <= n; i++) {
        LL p, c; cin >> p >> c;
        P.push({p, i}); 
        C.push({c, i});
    }
    for (int i = 0; i < k; i++) delta.push(0);

    int ans = 0;
    while (ans < n) {
        // æ¸…ç†æ— æ•ˆå…ƒç´ 
        while (!P.empty() && vis[P.top().second]) P.pop();
        while (!C.empty() && vis[C.top().second]) C.pop();
        if (P.empty() || C.empty()) break;

        auto [p_val, p_id] = P.top();
        auto [c_val, c_id] = C.top();

        // å†³ç­–æ¯”è¾ƒ
        if (p_val < c_val + delta.top()) {
            if (sum + p_val > m) break;
            sum += p_val;
            vis[p_id] = true;
            P.pop();
        } else {
            if (sum + c_val + delta.top() > m) break;
            sum += c_val + delta.top();
            vis[c_id] = true;
            delta.pop();
            delta.push(p_val - c_val); // æ›´æ–°åæ‚”ä»£ä»·
            C.pop();
        }
        ans++;
    }
    cout << ans << endl;
}
```
*ä»£ç è§£è¯»æ¦‚è¦*ï¼š  
1. ä¸‰é˜Ÿåˆ—ååŒï¼š`P`-åŸä»·å †ï¼Œ`C`-ä¼˜æƒ ä»·å †ï¼Œ`delta`-åæ‚”ä»£ä»·å †  
2. åŠ¨æ€æ¸…ç†ï¼šæ¯æ¬¡å†³ç­–å‰æ¸…ç†å·²è´­å¥¶ç‰›  
3. åŒå†³ç­–åˆ†æ”¯ï¼šå®æ—¶æ¯”è¾ƒåŸä»·è´­ä¹° vs åæ‚”+ä¼˜æƒ ä»·è´­ä¹°  

**é¢˜è§£ä¸€ä»£ç ç‰‡æ®µèµæ**  
```cpp
if (delta.top() > x1.first - x2.first) {
    m -= x1.first; // åŸä»·è´­ä¹°
} else {
    m -= x2.first + delta.top(); // åæ‚”+ä¼˜æƒ è´­ä¹°
    delta.pop();
    delta.push(p[x2.second] - c[x2.second]);
}
```
*äº®ç‚¹*ï¼šä¼˜é›…çš„å†³ç­–æ¡ä»¶åˆ¤æ–­  
*å­¦ä¹ ç¬”è®°*ï¼šåæ‚”æ¡ä»¶`Î”_j < Î”_i`åœ¨ä»£ç ä¸­è½¬åŒ–ä¸ºå·®å€¼æ¯”è¾ƒï¼Œæ•°å­¦ä¸ä»£ç çš„å®Œç¾è½¬åŒ–

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
**ä¸»é¢˜**ï¼š8ä½åƒç´ é£ã€Œè¶…å¸‚å¤§æŠ¢è´­ã€  

**æ ¸å¿ƒæ¼”ç¤º**ï¼š  
```mermaid
graph TD
    A[åˆå§‹åŒ–ç•Œé¢] --> B[ä¼˜æƒ åˆ¸ä¹°å‰Kå¤´ç‰›]
    B --> C{æ–°å¥¶ç‰›ï¼Ÿ}
    C -->|åŸä»·è´­ä¹°| D[é‡‘å¸å‡å°‘P_i]
    C -->|åæ‚”æ“ä½œ| E[é€€æ¢åŠ¨ç”»+éŸ³æ•ˆ]
```

**åŠ¨ç”»å¸§è®¾è®¡**ï¼š  
1. **åœºæ™¯åˆå§‹åŒ–**  
   - å¥¶ç‰›åƒç´ å—æ’åˆ—ï¼ˆçº¢/ç»¿/è“ = å·²è´­/ä¼˜æƒ /åŸä»·ï¼‰  
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/å•æ­¥/é‡ç½®æŒ‰é’® + é€Ÿåº¦æ»‘å—

2. **åæ‚”æ“ä½œæ¼”ç¤º**  
   ```plaintext
   å¸§1: å¥¶ç‰›Aé—ªçƒï¼ˆè¢«é€‰ä¸­åæ‚”ï¼‰
   å¸§2: ä¼˜æƒ åˆ¸å›¾æ ‡é£å‘å¥¶ç‰›B
   å¸§3: å¥¶ç‰›Aå˜è“ï¼ˆæ”¹åŸä»·ï¼‰ï¼Œå¥¶ç‰›Bå˜ç»¿ï¼ˆç”¨ä¼˜æƒ ï¼‰
   éŸ³æ•ˆ: "å®"ï¼ˆåæ‚”ï¼‰+ "å’”åš“"ï¼ˆæ–°ä¼˜æƒ ï¼‰
   ```

3. **çŠ¶æ€æç¤ºç³»ç»Ÿ**  
   - å½“å‰æ“ä½œé«˜äº®ï¼šçº¢è‰²è¾¹æ¡†æ ‡è®°å†³ç­–ä¸­çš„å¥¶ç‰›  
   - å®æ—¶æ•°æ®æ˜¾ç¤ºï¼šé‡‘å¸æ•°/å‰©ä½™ä¼˜æƒ åˆ¸  
   - æ—ç™½æç¤ºï¼šå¦‚â€œåæ‚”å¥¶ç‰›Açœä¸‹$Î”ï¼Œè½¬ä¹°å¥¶ç‰›Bï¼â€

**æŠ€æœ¯å®ç°**ï¼š  
- Canvasç»˜åˆ¶ç½‘æ ¼ï¼Œæ¯å¤´ç‰›å 32x32åƒç´   
- åæ‚”åŠ¨ç”»ï¼šé‡‡ç”¨ç²¾çµå›¾ä½ç§»ç®—æ³•  
- éŸ³æ•ˆè§¦å‘ï¼šå†³ç­–æ—¶æ’­æ”¾8-bitéŸ³æ•ˆï¼ˆWeb Audio APIï¼‰

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜  
**é€šç”¨å¥—è·¯è¿ç§»**ï¼š  
åæ‚”è´ªå¿ƒé€‚ç”¨åœºæ™¯ç‰¹å¾ï¼š  
1. èµ„æºæœ‰é™ï¼ˆä¼˜æƒ åˆ¸/æ—¶é—´ç­‰ï¼‰  
2. å†³ç­–å¯æ’¤é”€  
3. å¢é‡å¼ä¼˜åŒ–  

**æ´›è°·æ¨èé¢˜ç›®**ï¼š  
1. **P4053 [JSOI2007]å»ºç­‘æŠ¢ä¿®**  
   ğŸ—£ï¸ ç»ƒä¹ åæ‚”è´ªå¿ƒåœ¨æ—¶é—´é™åˆ¶åœºæ™¯çš„åº”ç”¨  
2. **P2107 å°Zçš„AKè®¡åˆ’**  
   ğŸ—£ï¸ å¼ºåŒ–èµ„æºåˆ†é…ä¸åæ‚”å†³ç­–  
3. **CF730I å¥–å­¦é‡‘**  
   ğŸ—£ï¸ äºŒç»´åæ‚”è´ªå¿ƒå®æˆ˜

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
> **Cuxhinçš„è°ƒè¯•ç»éªŒ**ï¼š  
> â€œåœ¨è´ªå¿ƒç­–ç•¥å®ç°æ—¶ï¼Œæˆ‘é€šè¿‡æ„é€ ç‰¹ä¾‹`(5,1),(3,1),(6,2)`æš´éœ²äº†åŸºç¡€è´ªå¿ƒçš„ç¼ºé™·ï¼Œä»è€Œå¼•å‡ºåæ‚”æœºåˆ¶â€  
>   
> **Kayç‚¹è¯„**ï¼š  
> è¿™æ˜¯**æµ‹è¯•é©±åŠ¨å¼€å‘**çš„å…¸èŒƒï¼æ„é€ è¾¹ç•Œæ•°æ®ï¼ˆå¦‚ä¼˜æƒ åˆ¸çœå·®ä»·å°çš„ç»„åˆï¼‰èƒ½å¿«é€ŸéªŒè¯ç®—æ³•æ­£ç¡®æ€§ã€‚å»ºè®®å­¦ä¹ è€…åœ¨å®ç°è´ªå¿ƒç®—æ³•æ—¶ï¼š  
> 1. è®¾è®¡æç«¯æµ‹è¯•æ•°æ®  
> 2. ç”¨`cout`è¾“å‡ºä¸­é—´çŠ¶æ€  
> 3. å¯¹æ¯”æš´åŠ›æ±‚è§£ç»“æœ

---

**ç»“è¯­**  
é€šè¿‡åæ‚”è´ªå¿ƒï¼Œæˆ‘ä»¬å­¦ä¼šåœ¨ç¼–ç¨‹ä¸­"å¸¸æ€å·±è¿‡"â€”â€”å½“å‘ç°æ›´ä¼˜è§£æ—¶ï¼Œå‹‡äºè°ƒæ•´å…ˆå‰å†³ç­–ã€‚è®°ä½æ ¸å¿ƒå£è¯€ï¼š  
> â€œ**æ’åºå †ç»´æŠ¤ï¼Œåæ‚”Î”æœ€å°ï¼ŒåŸä»·ä¼˜æƒ æ¯”ï¼Œå¢é‡è¾¹ç•Œä¿**â€  

å¸Œæœ›æœ¬æŒ‡å—åŠ©ä½ åœ¨ç®—æ³•è·¯ä¸Šèµ°å¾—æ›´è¿œï¼ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š132.75ç§’
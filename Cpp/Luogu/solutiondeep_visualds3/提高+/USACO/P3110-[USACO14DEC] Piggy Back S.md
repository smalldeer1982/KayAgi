# é¢˜ç›®ä¿¡æ¯

# [USACO14DEC] Piggy Back S

## é¢˜ç›®æè¿°

Bessie å’Œ Elsie åœ¨ä¸åŒçš„åŒºåŸŸæ”¾ç‰§ï¼Œä»–ä»¬å¸Œæœ›èŠ±è´¹æœ€å°çš„èƒ½é‡è¿”å›è°·ä»“ã€‚ä»ä¸€ä¸ªåŒºåŸŸèµ°åˆ°ä¸€ä¸ªç›¸è¿åŒºåŸŸï¼ŒBessie è¦èŠ±è´¹ $B$ å•ä½çš„èƒ½é‡ï¼ŒElsieè¦èŠ±è´¹ $E$ å•ä½çš„èƒ½é‡ã€‚

å¦‚æœæŸæ¬¡ä»–ä»¬ä¸¤èµ°åˆ°åŒä¸€ä¸ªåŒºåŸŸï¼ŒBessie å¯ä»¥èƒŒç€ Elsie èµ°è·¯ï¼ŒèŠ±è´¹ $P$ å•ä½çš„èƒ½é‡èµ°åˆ°å¦å¤–ä¸€ä¸ªç›¸è¿çš„åŒºåŸŸã€‚å½“ç„¶ï¼Œå­˜åœ¨ $P>B+E$ çš„æƒ…å†µã€‚

ç›¸é‡åï¼Œä»–ä»¬å¯ä»¥ä¸€ç›´èƒŒç€èµ°ï¼Œä¹Ÿå¯ä»¥ç‹¬ç«‹åˆ†å¼€ã€‚

Bessie ä» $1$ å·åŒºåŸŸå‡ºå‘ï¼ŒElsie ä» $2$ å·åŒºåŸŸå‡ºå‘ï¼Œä¸¤ä¸ªäººéƒ½è¦è¿”å›åˆ°ä½äº $n$ å·åŒºåŸŸçš„è°·ä»“ã€‚

## è¯´æ˜/æç¤º

$1 \leq B,E,P,n,m \leq 4 \times 10^4$ã€‚

#### æ ·ä¾‹è§£é‡Šï¼š
Bessie ä» 1 èµ°åˆ° 4ï¼ŒElsie ä» 2 èµ°åˆ° 3 å†èµ°åˆ° 4ã€‚ç„¶åï¼Œä¸¤ä¸ªäººä¸€èµ·ä» 4 èµ°åˆ° 7ï¼Œå†èµ°åˆ° 8ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 4 5 8 8 
1 4 
2 3 
3 4 
4 7 
2 5 
5 6 
6 8 
7 8 ```

### è¾“å‡º

```
22 
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPiggy Back S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾çš„æœ€çŸ­è·¯å¾„ï¼ˆBFS/SPFA/Dijkstraï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è¿™é“é¢˜å°±åƒä¸¤ä¸ªå¿«é€’å‘˜ï¼ˆBessieå’ŒElsieï¼‰ä»ä¸åŒä»“åº“å‡ºå‘ï¼Œè¦å»åŒä¸€ä¸ªç›®çš„åœ°ã€‚å…³é”®æŠ€å·§æ˜¯è®¡ç®—**ä¸‰æ¬¡æœ€çŸ­è·¯å¾„**ï¼š
> 1. Bessieä»èµ·ç‚¹1åˆ°æ‰€æœ‰ç‚¹çš„è·ç¦»
> 2. Elsieä»èµ·ç‚¹2åˆ°æ‰€æœ‰ç‚¹çš„è·ç¦»
> 3. ä»ç»ˆç‚¹nåå‘åˆ°æ‰€æœ‰ç‚¹çš„è·ç¦»
> 
> ç„¶åæšä¸¾æ¯ä¸ªå¯èƒ½çš„ç›¸é‡ç‚¹ï¼Œè®¡ç®—æ€»æ¶ˆè€—ï¼š`Bessieåˆ°ç›¸é‡ç‚¹çš„æ¶ˆè€— + Elsieåˆ°ç›¸é‡ç‚¹çš„æ¶ˆè€— + ä¸€èµ·åˆ°ç»ˆç‚¹çš„æ¶ˆè€—`ï¼Œå–æœ€å°å€¼å°±æ˜¯ç­”æ¡ˆã€‚
> 
> **å¯è§†åŒ–è®¾è®¡**ï¼šæƒ³è±¡ä¸‰ä¸ªä¸åŒé¢œè‰²çš„å…‰æ³¢ï¼ˆçº¢/è“/ç»¿ï¼‰ä»1ã€2ã€nç‚¹æ‰©æ•£è¦†ç›–åœ°å›¾ã€‚å½“ä¸‰æ³¢åŒæ—¶åˆ°è¾¾æŸç‚¹æ—¶ï¼Œè¯¥ç‚¹ä¼šé—ªçƒå¹¶æ˜¾ç¤ºå½“å‰æ€»æ¶ˆè€—å€¼ï¼Œæœ€å°å€¼ç‚¹ä¼šæŒç»­é«˜äº®ã€‚é‡‡ç”¨8ä½æœºåƒç´ é£æ ¼ï¼Œæ‰©æ•£æ—¶æœ‰"æ»´"å£°ï¼Œæ‰¾åˆ°æœ€å°å€¼æ—¶æ’­æ”¾èƒœåˆ©éŸ³æ•ˆã€‚

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šå¥”æ³¢å„¿éœ¸ï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ç›´ç™½ï¼Œé‡‡ç”¨æœ€ç¨³å®šçš„BFSè€ŒéSPFAï¼Œé¿å…è¢«ç‰¹æ®Šæ•°æ®å¡ä½ã€‚ä»£ç ä¸­é˜Ÿåˆ—æ“ä½œè§„èŒƒï¼Œå˜é‡å`disB/disE/disP`å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆç”¨-1æ ‡è®°æœªè®¿é—®ç‚¹ï¼‰ã€‚äº®ç‚¹åœ¨äºç”¨BFSæ›¿ä»£SPFAä¿è¯æ•ˆç‡ï¼Œä¸”å®Œæ•´å¤„ç†äº†ä¸å¯è¾¾æƒ…å†µï¼Œç«èµ›å®ç”¨æ€§å¼ºã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šä¸€åªä¹¦è™«ä»”ï¼‰**
* **ç‚¹è¯„**ï¼šä»£ç ç»“æ„ä¼˜ç§€ï¼Œåˆ›æ–°æ€§åœ°ç”¨`SPFA(int s, int *dist)`é€šè¿‡æŒ‡é’ˆå‚æ•°å¤ç”¨å‡½æ•°ï¼Œé¿å…é‡å¤ä»£ç ã€‚å˜é‡å‘½åè§„èŒƒï¼ˆdisB/disE/disPï¼‰ï¼Œé€»è¾‘åˆ†å±‚æ¸…æ™°ã€‚è™½ç„¶ä½¿ç”¨SPFAä½†è§£é‡Šäº†ä¼˜å…ˆé˜Ÿåˆ—çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå®è·µä»·å€¼é«˜ä¸”æ˜“äºè°ƒè¯•ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šåŸºåœ°A_Iï¼‰**
* **ç‚¹è¯„**ï¼šè®²è§£ç”ŸåŠ¨æ˜“æ‡‚ï¼Œç”¨ç”Ÿæ´»åŒ–æ¯”å–»è§£é‡Šç®—æ³•æ ¸å¿ƒï¼ˆ"å­¦(jie)ä¹ (jian)é¢˜è§£"ï¼‰ã€‚ä»£ç æ³¨é‡Šè¯¦ç»†ï¼ŒåŒ…å«é˜²æŠ„è¢­æç¤ºå’Œè¶£å‘³è¾“å‡ºï¼ˆæ— é™å¾ªç¯è¾“å‡º"Plagiarists are shameless"ï¼‰ã€‚è™½ç„¶ç”¨SPFAä½†å®Œæ•´æ¼”ç¤ºäº†è·ç¦»è®¡ç®—å’ŒçŠ¶æ€è½¬ç§»ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šçŠ¶æ€å®šä¹‰ä¸è·¯å¾„åˆ†ç¦»**  
   *åˆ†æ*ï¼šéœ€è¦ç†è§£ç›¸é‡ç‚¹æšä¸¾è¦†ç›–æ‰€æœ‰æƒ…å†µï¼ˆåŒ…æ‹¬åœ¨ç»ˆç‚¹ç›¸é‡=åˆ†å¼€èµ°ï¼‰ã€‚ä¼˜è´¨è§£æ³•åˆ™ç”¨`dis1[i]*B + dis2[i]*E + disP[i]*P`ç»Ÿä¸€å¤„ç†ï¼Œæ— éœ€å•ç‹¬åˆ¤æ–­Pä¸B+Eå¤§å°ã€‚
   *ğŸ’¡å­¦ä¹ ç¬”è®°*ï¼šæšä¸¾æ³•>åˆ†ç±»è®¨è®ºï¼Œé¿å…é€»è¾‘æ¼æ´

2. **éš¾ç‚¹ï¼šæœ€çŸ­è·¯å¾„ç®—æ³•é€‰æ‹©**  
   *åˆ†æ*ï¼šå•ä½æƒå›¾ï¼ˆè¾¹æƒ=1ï¼‰ç”¨BFSæœ€ä¼˜ï¼ˆO(n)ï¼‰ï¼Œä½†éƒ¨åˆ†é¢˜è§£ç”¨SPFA/Dijkstraã€‚BFSæ— éœ€ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä»£ç æ›´ç®€æ´ç¨³å®šã€‚
   *ğŸ’¡å­¦ä¹ ç¬”è®°*ï¼šè¾¹æƒç›¸åŒæ—¶é¦–é€‰BFS

3. **éš¾ç‚¹ï¼šä¸å¯è¾¾ç‚¹å¤„ç†**  
   *åˆ†æ*ï¼šéœ€æ£€æŸ¥ä¸‰ä¸ªè·ç¦»æ•°ç»„æ˜¯å¦éƒ½æœ‰æ•ˆã€‚ä¼˜è´¨è§£æ³•ç”¨`if(disB[i]!=-1 && ...)`æˆ–åˆå§‹å€¼INFè¿‡æ»¤æ— æ•ˆç‚¹ã€‚
   *ğŸ’¡å­¦ä¹ ç¬”è®°*ï¼šè¾¹ç•Œæ£€æŸ¥æ˜¯ç«èµ›WAçš„ä¸»è¦æ¥æº

**âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“**
- **æ‹†è§£é—®é¢˜æ³•**ï¼šå°†åŒäººè·¯å¾„åˆ†è§£ä¸ºä¸‰ä¸ªç‹¬ç«‹æœ€çŸ­è·¯+åˆå¹¶è®¡ç®—
- **ç®—æ³•å¤ç”¨**ï¼šå°è£…BFS/SPFAå‡½æ•°é¿å…é‡å¤ä»£ç ï¼ˆå¦‚ä¹¦è™«ä»”çš„æŒ‡é’ˆä¼ å‚ï¼‰
- **å•ä½æƒä¼˜åŒ–**ï¼šè¾¹æƒä¸º1æ—¶BFS>Dijkstra>SPFA
- **æšä¸¾éªŒè¯**ï¼šå³ä½¿æƒ³åˆ°"P>B+Eæ—¶åˆ†å¼€æ›´å¥½"ï¼Œä»ç”¨æšä¸¾ç»Ÿä¸€å¤„ç†æ›´å¯é 

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <iostream>
#include <vector>
#include <queue>
#include <climits>
using namespace std;

const int MAXN = 40010;

void bfs(int start, vector<int>& dist, vector<vector<int>>& graph) {
    queue<int> q;
    q.push(start);
    dist[start] = 0;
    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (int v : graph[u]) {
            if (dist[v] == -1) {
                dist[v] = dist[u] + 1;
                q.push(v);
            }
        }
    }
}

int main() {
    int B, E, P, n, m;
    cin >> B >> E >> P >> n >> m;
    
    vector<vector<int>> graph(n+1);
    while (m--) {
        int u, v; cin >> u >> v;
        graph[u].push_back(v);
        graph[v].push_back(u);
    }

    vector<int> disB(n+1, -1), disE(n+1, -1), disP(n+1, -1);
    bfs(1, disB, graph);  // Bessieèµ·ç‚¹
    bfs(2, disE, graph);  // Elsieèµ·ç‚¹
    bfs(n, disP, graph);  // ç»ˆç‚¹åå‘
    
    long long ans = LLONG_MAX;
    for (int i = 1; i <= n; i++) {
        if (disB[i]!=-1 && disE[i]!=-1 && disP[i]!=-1) 
            ans = min(ans, (long long)disB[i]*B + disE[i]*E + disP[i]*P);
    }
    cout << ans;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. é‚»æ¥è¡¨å­˜å›¾ç¡®ä¿é«˜æ•ˆè®¿é—®  
2. BFSä¸‰æ¬¡è®¡ç®—å…³é”®è·ç¦»ï¼ˆä¸å¯è¾¾ç‚¹æ ‡è®°-1ï¼‰  
3. æšä¸¾æ—¶æ£€æŸ¥å¯è¾¾æ€§å¹¶å–æœ€å°å€¼  
4. å…¨ç¨‹ä½¿ç”¨vectoré¿å…æ•°ç»„è¶Šç•Œ  

**é¢˜è§£ç‰‡æ®µèµæ**  
**é¢˜è§£ä¸€æ ¸å¿ƒï¼ˆå¥”æ³¢å„¿éœ¸ï¼‰**ï¼š
```cpp
// BFSæ ¸å¿ƒæ¡†æ¶
while (!q.empty()) {
    int top = q.front(); q.pop();
    for (int i = d[top]; i; i = edge[i].next) {
        int v = edge[i].v;
        if (n[v].d1 == -1) { // æœªè®¿é—®ç‚¹
            n[v].d1 = n[top].d1 + 1; // è·ç¦»æ›´æ–°
            q.push(n[v]);
        }
    }
}
```
**å­¦ä¹ ç¬”è®°**ï¼šé™æ€æ•°ç»„å­˜å›¾+é˜Ÿåˆ—æ“ä½œï¼Œé€‚åˆå†…å­˜é™åˆ¶åœºæ™¯  

**é¢˜è§£äºŒæ ¸å¿ƒï¼ˆä¸€åªä¹¦è™«ä»”ï¼‰**ï¼š
```cpp
void SPFA(int s, int *dist) {
    // ä¼ å…¥è·ç¦»æ•°ç»„æŒ‡é’ˆ
    if (!vis[v]) {
        dist[v] = dist[u] + 1; // ç»Ÿä¸€æ›´æ–°é€»è¾‘
        q.push(v);
    }
}
```
**å­¦ä¹ ç¬”è®°**ï¼šå‡½æ•°å‚æ•°åŒ–æ˜¯é¿å…é‡å¤ä»£ç çš„åˆ©å™¨  

**é¢˜è§£ä¸‰æ ¸å¿ƒï¼ˆåŸºåœ°A_Iï¼‰**ï¼š
```cpp
ans = min(ans ,B*disB[i]+E*disE[i]+P*disP[i]);
// æ ¸å¿ƒçŠ¶æ€è½¬ç§»
```
**å­¦ä¹ ç¬”è®°**ï¼šç®—æ³•æœ¬è´¨æ˜¯æšä¸¾å‹åŠ¨æ€è§„åˆ’

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼šä¸‰è‰²å…‰æ³¢è¿½è¸ªï¼ˆå¤å¤8-bitå†’é™©æ¸¸æˆé£æ ¼ï¼‰  

**åŠ¨ç”»è®¾è®¡**ï¼š  
1. **åƒç´ ç½‘æ ¼**ï¼šç”¨16x16åƒç´ æ–¹å—è¡¨ç¤ºåœ°å›¾ï¼Œèµ·ç‚¹1=çº¢è‰²ï¼Œèµ·ç‚¹2=è“è‰²ï¼Œç»ˆç‚¹n=é‡‘è‰²  
2. **æ‰©æ•£åŠ¨ç”»**ï¼š  
   - çº¢/è“æ³¢ä»1/2ç‚¹é€æ ¼æ‰©æ•£ï¼ˆæ¯æ­¥0.2ç§’ï¼‰  
   - ç»¿æ³¢ä»nç‚¹åå‘æ‰©æ•£ï¼Œé‡å…¶ä»–è‰²å—äº§ç”Ÿæ··åˆå…‰æ•ˆ  
3. **åŠ¨æ€è®¡ç®—**ï¼š  
   ```python
   # ä¼ªä»£ç ï¼šæ¯å¸§æ›´æ–°
   for å½“å‰æ‰©æ•£ç‚¹ in é˜Ÿåˆ—:
       ç»˜åˆ¶æ‰©æ•£åŠ¨ç”»(é¢œè‰², åæ ‡)
       æ’­æ”¾éŸ³æ•ˆ("æ»´", é¢‘ç‡=200+åæ ‡x*10)
       è‹¥ä¸‰è‰²çš†åˆ°è¾¾æŸç‚¹:
          æ˜¾ç¤ºæ€»æ¶ˆè€—å€¼: B*çº¢è· + E*è“è· + P*ç»¿è·
          æœ€å°å€¼ç‚¹æŒç»­é—ªçƒ(çº¢è“ç»¿äº¤æ›¿)
   ```
4. **æ§åˆ¶é¢æ¿**ï¼š  
   - æ­¥è¿›/æš‚åœ/é‡ç½®æŒ‰é’®  
   - é€Ÿåº¦æ»‘å—ï¼ˆ0.5x~3xï¼‰  
   - "AIæ¼”ç¤º"æ¨¡å¼è‡ªåŠ¨æ’­æ”¾å¹¶æ ‡è®°æœ€ä¼˜è·¯å¾„  

**æ¸¸æˆåŒ–è®¾è®¡**ï¼š  
- æ¯æ¬¡æ‰©æ•£è§†ä¸º"æ¢ç´¢è¿›åº¦"ï¼Œå®Œæˆä¸‰æ³¢æ‰©æ•£è§£é”"èƒ½é‡è®¡ç®—"å…³å¡  
- æ­£ç¡®æ‰¾åˆ°æœ€å°æ¶ˆè€—ç‚¹å¾—3æ˜Ÿï¼Œæ’­æ”¾ã€Šè¶…çº§ç›ä¸½ã€‹é€šå…³éŸ³æ•ˆ  
- æ•°æ®ç»“æ„å¯è§†åŒ–ï¼šé˜Ÿåˆ—ç”¨åƒç´ ç®¡é“è¡¨ç¤ºï¼Œå½“å‰å¤„ç†ç‚¹é«˜äº®  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
1. å¤šæºæœ€çŸ­è·¯å˜å½¢ï¼ˆå¦‚P5304 [GXOI/GZOI2019]æ—…è¡Œè€…ï¼‰  
2. åŠ¨æ€ç›¸é‡ç‚¹é—®é¢˜ï¼ˆå¦‚CF 1523D - PriceFixedï¼‰  
3. åˆ†å±‚å›¾æœ€çŸ­è·¯ï¼ˆç›¸é‡å‰åçŠ¶æ€åˆ†å±‚ï¼‰  

**æ´›è°·æ¨è**ï¼š  
1. P1629 é‚®é€’å‘˜é€ä¿¡ï¼ˆå•æºå¾€è¿”æœ€çŸ­è·¯ï¼‰  
   â†’ **å·©å›º**ï¼šBFS/Dijkstraçš„å¾€è¿”åº”ç”¨  
2. P1144 æœ€çŸ­è·¯è®¡æ•°ï¼ˆå•ä½æƒæœ€çŸ­è·¯ï¼‰  
   â†’ **å¼ºåŒ–**ï¼šBFSåœ¨æœ€çŸ­è·¯å¾„è®¡æ•°çš„åº”ç”¨  
3. P1522 [USACO2.4] ç‰›çš„æ—…è¡Œ  
   â†’ **è¿›é˜¶**ï¼šå¤šèµ·ç‚¹æœ€çŸ­è·¯+æšä¸¾æŠ€å·§  

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **å‚è€ƒç»éªŒ**ï¼ˆåŸºåœ°A_Iï¼‰ï¼š  
> "æˆ‘åˆšå¼€å§‹çœ‹åˆ°é¢˜ç›®æ— æ³•åŠ¨ç¬”ï¼Œäºæ˜¯æ‰“å¼€é¢˜è§£å­¦ä¹ å¤§ä½¬çš„ä¸‰æ¬¡æœ€çŸ­è·¯æ€è·¯ï¼Œé€šè¿‡ä»£ç å®è·µçœŸæ­£ç†è§£æšä¸¾ç›¸é‡ç‚¹çš„ç²¾å¦™ä¹‹å¤„ã€‚"  
>   
> **ç‚¹è¯„**ï¼š  
> å…¸å‹çš„å­¦ä¹ è·¯å¾„â€”â€”å…ˆå€Ÿé‰´å†å†…åŒ–ã€‚è°ƒè¯•æ—¶æ³¨æ„ï¼š  
> 1. éªŒè¯è¾¹ç•Œæ•°æ®ï¼ˆå¦‚n=1ï¼‰  
> 2. ä¸å¯è¾¾ç‚¹å¿…é¡»è·³è¿‡ï¼ˆé¿å…è´Ÿæ•°æ¶ˆè€—ï¼‰  
> 3. å¼€long longé˜²æº¢å‡ºï¼ˆ40000Â² > INT_MAXï¼‰  

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†å›¾è®ºé—®é¢˜çš„æ ¸å¿ƒè§£æ³•ï¼š**é—®é¢˜æ‹†è§£+ç®—æ³•é€‰æ‹©+è¾¹ç•Œå¤„ç†**ã€‚ä¸‹æ¬¡é‡åˆ°åŒèµ·ç‚¹é—®é¢˜ï¼Œè®°å¾—å°è¯•"ä¸‰æ¬¡æœ€çŸ­è·¯+æšä¸¾"è¿™æŠŠä¸‡èƒ½é’¥åŒ™å“¦ï¼(â‰§âˆ‡â‰¦)ï¾‰

---
å¤„ç†ç”¨æ—¶ï¼š170.66ç§’
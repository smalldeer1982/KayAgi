# é¢˜ç›®ä¿¡æ¯

# [USACO14FEB] Cow Decathlon G

## é¢˜ç›®æè¿°

é¢˜ç›®å¤§æ„
çº¦ç¿°æœ‰Nå¤´å¥¶ç‰›ï¼Œç»„æˆäº†ä¸€ç›´é˜Ÿä¼å‚åŠ å…¨èƒ½æ¯”èµ›ã€‚æ¯”èµ›ä¸€å…±æœ‰Né¡¹ï¼Œæ¯å¤´å¥¶ç‰›å¿…é¡»å‚åŠ ä¸€é¡¹æ¯”èµ›ï¼Œæ¯é¡¹æ¯”èµ›ä¹Ÿå¿…é¡»æœ‰ä¸€å¤´å¥¶ç‰›å‚åŠ ã€‚ä»»ä½•ä¸€å¤´å¥¶ç‰›å¯ä»¥èƒœä»»ä»»ä½•ä¸€é¡¹æ¯”èµ›ï¼Œä½†å¾—åˆ†ä¸ä¸€æ ·ã€‚å¦‚æœç¬¬iå¤´å¥¶ç‰›å‚åŠ ç¬¬jé¡¹æ¯”èµ›ï¼Œåœ¨æ¯”èµ›ç»“æŸçš„æ—¶å€™ï¼Œå¯ä»¥ä¸ºå›¢ä½“æ€»åˆ†å¢åŠ Si,jã€‚
æ¯”èµ›æ˜¯æŒ‰ç…§é¡ºåºä¾æ¬¡è¿›è¡Œçš„ã€‚é™¤äº†ä¸Šè¿°è·å¾—åˆ†æ•°çš„æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰Bç§å¥–åŠ±åˆ†ã€‚è·å¾—å¥–åŠ±çš„æ–¹æ³•æ˜¯åœ¨å‰å‡ é¡¹æ¯”èµ›é‡Œè·å¾—è¶³å¤Ÿçš„åˆ†æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œç¬¬ié¡¹å¥–åŠ±ä¼šåœ¨ç¬¬Kié¡¹æ¯”èµ›ç»“æŸçš„æ—¶å€™æ£€æŸ¥ï¼Œå¦‚æœ å½“æ—¶çš„æ€»åˆ†å¤§äºæˆ–ç­‰äºPiï¼Œå¥¶ç‰›ä»¬å°±å¯ä»¥ç«‹å³è·å¾—é¢å¤–çš„Ai åˆ†ã€‚å¦‚æœæœ‰å¤šé¡¹å¥–åŠ±åœ¨åŒä¸€æ—¶åˆ»æ£€æŸ¥ï¼Œå¥¶ç‰›å¯ä»¥è‡ªç”±å®‰æ’æ£€æŸ¥å’ŒåŠ åˆ†çš„é¡ºåºã€‚è¯·é—®çº¦ç¿°åº”è¯¥å¦‚ä½•å®‰æ’å¥¶ç‰›å‚åŠ æ¯”èµ›ï¼Œæ‰èƒ½è®©å®ƒä»¬è·å¾—æœ€é«˜çš„åˆ†æ•°ï¼Ÿ

## è¯´æ˜/æç¤º

ç¬¬ä¸€é¡¹æ¯”èµ›ç”±ç¬¬ä¸€å¤´å¥¶ç‰›å‚åŠ ï¼Œç¬¬äºŒé¡¹æ¯”èµ›ç”±ç¬¬ä¸‰å¤´å¥¶ç‰›å‚åŠ ï¼Œç¬¬ä¸‰é¡¹æ¯”èµ›ç”±ç¬¬äºŒå¤´å¥¶ç‰›å‚åŠ ã€‚

translatorï¼š2018_RNGä¸¶å¦–å¤¢

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 1
2 7 6
5 1 7
2 2 4
4 2 1```

### è¾“å‡º

```
17```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCow Decathlon G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### **1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«**  
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`çŠ¶æ€å‹ç¼©åŠ¨æ€è§„åˆ’ï¼ˆçŠ¶å‹DPï¼‰`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> çŠ¶å‹DPå°±åƒç”¨ä¸€ä¸²äºŒè¿›åˆ¶å¯†ç é”æ§åˆ¶å¥¶ç‰›å‡ºåœºé¡ºåºï¼Œæ¯ä½å¼€å…³å¯¹åº”ä¸€å¤´å¥¶ç‰›ï¼ˆ1è¡¨ç¤ºå·²å‚èµ›ï¼‰ã€‚æœ¬é¢˜éœ€è¦ï¼š  
> - **çŠ¶æ€è®¾è®¡**ï¼šç”¨æ•´æ•°`dp[mask]`è®°å½•å¥¶ç‰›é›†åˆ`mask`å‚èµ›åçš„æœ€é«˜åˆ†ï¼ˆ`mask`çš„äºŒè¿›åˆ¶ä½æ•°=å·²å‚èµ›å¥¶ç‰›æ•°ï¼‰  
> - **çŠ¶æ€è½¬ç§»**ï¼šæšä¸¾æœ€åå‡ºåœºçš„å¥¶ç‰›ï¼Œä»å‰©ä½™é›†åˆè½¬ç§»ï¼š`dp[mask] = max(dp[mask], dp[prev] + score)`  
> - **å¥–åŠ±å¤„ç†**ï¼šæŒ‰å¥–åŠ±åˆ†é˜ˆå€¼`P_i`å‡åºå¤„ç†ï¼Œé¿å…æ¼åŠ ï¼ˆå¦‚ï¼šå…ˆå¤„ç†P=10çš„å¥–åŠ±ï¼Œå†å¤„ç†P=20ï¼‰  
>  
> **å¯è§†åŒ–è®¾è®¡**ï¼š  
> - 8ä½åƒç´ é£å¥¶ç‰›ï¼ˆä¸åŒé¢œè‰²ï¼‰åœ¨è·‘é“ä¸Šæ¯”èµ›ï¼Œæ¯æ­¥é«˜äº®**æ–°å‚èµ›å¥¶ç‰›**å’Œ**å¾—åˆ†å˜åŒ–**  
> - å¥–åŠ±è§¦å‘æ—¶æ’­æ”¾"å®"éŸ³æ•ˆ+é‡‘å¸é£˜åŠ¨åŠ¨ç”»ï¼Œè‡ªåŠ¨æ¨¡å¼å¯è°ƒé€Ÿè§‚å¯ŸDPçŠ¶æ€æ‰©å±•é¡ºåº  

---

#### **2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ**  
**é¢˜è§£ä¸€ï¼ˆJK_LOVERï¼‰**  
* **ç‚¹è¯„**ï¼šçŠ¶æ€è½¬ç§»æ¸…æ™°ï¼ˆ`dp[s] = max(dp[s^j] + val[count][j])`ï¼‰ï¼Œå·§å¦™åˆ©ç”¨`__builtin_popcount`éšå¼è®°å½•æ¯”èµ›åœºæ¬¡ï¼›å¥–åŠ±åˆ†æ’åºå¤„ç†ä¸¥è°¨ï¼ˆ`sort(e[i].begin(), e[i].end(), cmp)`ï¼‰ï¼›å˜é‡å`val[S][j]`ç›´æŒ‡æ ¸å¿ƒé€»è¾‘ã€‚äº®ç‚¹ï¼šç”¨ä½è¿ç®—`(s>>(j-1))&1`ä»£æ›¿å¾ªç¯è®¡æ•°ï¼Œä¼˜åŒ–å¸¸æ•°æ—¶é—´ã€‚  

**é¢˜è§£äºŒï¼ˆxiaoshumiaoï¼‰**  
* **ç‚¹è¯„**ï¼šä»£ç æç®€ï¼ˆä»…30è¡Œï¼‰ï¼Œç»“æ„å·¥æ•´ï¼›å¥–åŠ±åˆ†ç”¨`struct P`å°è£…æå‡å¯è¯»æ€§ï¼›Lambdaè¡¨è¾¾å¼æ’åºï¼ˆ`[](P a,P b){return a.p<b.p;}`ï¼‰å±•ç°ç°ä»£C++æŠ€å·§ã€‚æ³¨æ„ç‚¹ï¼š`s[i][cnt]`ä¸­`i`ä»1å¼€å§‹éœ€å¯¹é½ä½è¿ç®—ç´¢å¼•ã€‚  

**é¢˜è§£ä¸‰ï¼ˆDgNeHzL7777ï¼‰**  
* **ç‚¹è¯„**ï¼šçŠ¶æ€å®šä¹‰è§£é‡Šé€å½»ï¼ˆ"å‰cntå¤´ç‰›å‚åŠ Sé›†åˆçš„æ¯”èµ›"ï¼‰ï¼Œæ³¨é‡Šè¯¦ç»†ï¼›ç‹¬åˆ›æ€§æå‡º"æœªæ¥æ—¶ä¸å¯è¡Œ"ï¼ˆä¾èµ–å†å²çŠ¶æ€ï¼‰ï¼Œç‚¹ç ´DPè®¾è®¡æ ¸å¿ƒï¼›è™½ä»£ç æœªå®Œæ•´ï¼Œä½†è½¬ç§»é€»è¾‘`dp[t]=max(dp[t], dp[t-(1<<(i-1))]+s[i][cnt])`å‡†ç¡®ã€‚  

---

#### **3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥**  
1. **çŠ¶æ€è¡¨ç¤ºä¸åœºæ¬¡å…³è”**  
   * **éš¾ç‚¹**ï¼šå¦‚ä½•åŒæ­¥å¥¶ç‰›é›†åˆä¸æ¯”èµ›åœºæ¬¡ï¼Ÿ  
   * **åˆ†æ**ï¼šç”¨`__builtin_popcount(mask)`è·å–äºŒè¿›åˆ¶1çš„æ•°é‡ï¼ˆå³å·²èµ›åœºæ¬¡ï¼‰ï¼Œé¿å…é¢å¤–ç»´åº¦  
   * ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šä½è¿ç®—ä¸­1çš„æ•°é‡ = å½“å‰è¿›è¡Œåˆ°ç¬¬å‡ é¡¹æ¯”èµ›  

2. **å¥–åŠ±åˆ†å¤„ç†é¡ºåº**  
   * **éš¾ç‚¹**ï¼šå¤šé¡¹å¥–åŠ±åŒæ—¶æ£€æŸ¥æ—¶ï¼Œå¦‚ä½•æœ€å¤§åŒ–æ”¶ç›Šï¼Ÿ  
   * **åˆ†æ**ï¼šä¼˜å…ˆæ»¡è¶³é˜ˆå€¼ä½çš„å¥–åŠ±ï¼ˆ`sort by P_i`ï¼‰ï¼Œç¡®ä¿å°å¥–åŠ±è§¦å‘åå¯èƒ½æ¿€æ´»æ›´å¤§å¥–åŠ±  
   * ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šè´ªå¿ƒæ€æƒ³èåˆDPâ€”â€”å…ˆæ˜“åéš¾åƒå¥–åŠ±  

3. **çŠ¶æ€è½¬ç§»æ–¹å‘**  
   * **éš¾ç‚¹**ï¼šä¸ºä½•ä¸èƒ½"æœªæ¥æ—¶"ï¼ˆä»åå¾€å‰æ¨ï¼‰ï¼Ÿ  
   * **åˆ†æ**ï¼šå¥–åŠ±åˆ†ä¾èµ–å®æ—¶æ€»åˆ†ï¼Œå¿…é¡»åŸºäºå†å²çŠ¶æ€ï¼ˆå·²çŸ¥åˆ†ï¼‰æ›´æ–°ï¼Œæœªæ¥åˆ†æœªçŸ¥  
   * ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šDPè®¾è®¡éœ€åŒºåˆ†"å› æœé“¾"â€”â€”å¥–åŠ±æ˜¯æœï¼Œå†å²çŠ¶æ€æ˜¯å›   

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **ä½è¿ç®—ä¼˜åŒ–**ï¼šç”¨`mask & (1<<i)`ä»£æ›¿å¾ªç¯æŸ¥è¡¨ï¼Œ`O(1)`åˆ¤æ–­å¥¶ç‰›å‚èµ›çŠ¶æ€  
- **éšå¼ç»´åº¦**ï¼š`popcount`æ›¿ä»£æ˜¾å¼è®°å½•æ¯”èµ›åºå·ï¼Œå‹ç¼©çŠ¶æ€ç©ºé—´  
- **åˆ†å±‚å¤„ç†**ï¼šå…ˆè½¬ç§»åŸºç¡€åˆ†ï¼Œå†ç‹¬ç«‹å¤„ç†å¥–åŠ±åˆ†ï¼Œé€»è¾‘è§£è€¦  

---

#### **4. C++æ ¸å¿ƒä»£ç å®ç°èµæ**  
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**  
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;
struct Reward { int k, p, a; }; // å¥–åŠ±åˆ†å°è£…

int main() {
    int n, b; cin >> n >> b;
    vector<Reward> rewards;
    for(int i=0; i<b; i++) {
        int k, p, a; cin >> k >> p >> a;
        rewards.push_back({k, p, a});
    }
    sort(rewards.begin(), rewards.end(), 
        [](auto& a, auto& b){ return a.p < b.p; }); // æŒ‰é˜ˆå€¼å‡åº

    vector<vector<int>> score(n+1, vector<int>(n+1));
    for(int i=1; i<=n; i++)
        for(int j=1; j<=n; j++)
            cin >> score[i][j];

    vector<int> dp(1<<n, 0);
    for(int mask=1; mask<(1<<n); mask++) {
        int cnt = __builtin_popcount(mask); // å…³é”®ï¼š1çš„æ•°é‡=å½“å‰åœºæ¬¡
        for(int i=0; i<n; i++) {
            if(mask & (1<<i)) { // ç¬¬iå¤´å¥¶ç‰›å‚èµ›
                int prev = mask ^ (1<<i);
                dp[mask] = max(dp[mask], dp[prev] + score[i+1][cnt]);
            }
        }
        for(auto& r : rewards) { // å¤„ç†å½“å‰åœºæ¬¡å¥–åŠ±
            if(r.k == cnt && dp[mask] >= r.p) 
                dp[mask] += r.a;
        }
    }
    cout << dp[(1<<n)-1];
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
> 1. **è¾“å…¥å¤„ç†**ï¼šå°è£…å¥–åŠ±åˆ†å¹¶æ’åºï¼Œå­˜å‚¨å¥¶ç‰›å¾—åˆ†çŸ©é˜µ  
> 2. **DPåˆå§‹åŒ–**ï¼š`dp[0]=0`ï¼ˆæ— å¥¶ç‰›å‚èµ›ï¼‰  
> 3. **çŠ¶æ€è½¬ç§»**ï¼šå¯¹æ¯ä¸ªçŠ¶æ€`mask`ï¼Œæšä¸¾æœ€åå‚èµ›çš„å¥¶ç‰›æ›´æ–°å¾—åˆ†  
> 4. **å¥–åŠ±è§¦å‘**ï¼šæ ¹æ®å½“å‰åœºæ¬¡`cnt`æ£€æŸ¥å¥–åŠ±æ¡ä»¶  

**é¢˜è§£ä¸€ï¼ˆJK_LOVERï¼‰ç‰‡æ®µèµæ**  
```cpp
for(int s=1; s<(1<<n); s++){
    int cnt = __builtin_popcount(s);
    for(int j=0; j<n; j++) 
        if(s & (1<<j)) 
            dp[s] = max(dp[s], dp[s^(1<<j)] + score[cnt][j+1]);
    for(auto& r : rewards[cnt])  // æŒ‰åœºæ¬¡åˆ†ç»„å¥–åŠ±
        if(dp[s] >= r.p) dp[s] += r.a;
}
```
* **äº®ç‚¹**ï¼šå¥–åŠ±åˆ†é¢„åˆ†ç»„ï¼ˆ`rewards[cnt]`ï¼‰ï¼Œå‡å°‘æ— æ•ˆéå†  
* **å­¦ä¹ ç¬”è®°**ï¼š`__builtin_popcount`æ˜¯GCCå†…ç½®å‡½æ•°ï¼ŒWindowséœ€æ›¿æ¢ä¸º`bitset`  

---

#### **5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º**  
**ä¸»é¢˜**ï¼š*å¥¶ç‰›ç”°å¾„å¤§èµ› - 8ä½åƒç´ é£DPæ¨¡æ‹Ÿ*  
**æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
1. **åœºæ™¯æ„å»º**ï¼š  
   - å·¦ä¾§ï¼š20å¤´åƒç´ å¥¶ç‰›ï¼ˆä¸åŒé¢œè‰²+ç¼–å·ï¼‰ï¼Œæœªå‚èµ›ä¸ºç°è‰²å‰ªå½±  
   - å³ä¾§ï¼šæ¯”èµ›è·‘é“ï¼ˆ20æ¡ï¼‰ï¼Œå½“å‰åœºæ¬¡é«˜äº®æ˜¾ç¤º  
   - åº•éƒ¨ï¼šäºŒè¿›åˆ¶çŠ¶æ€ç  + å®æ—¶åˆ†æ•°  

2. **åŠ¨ç”»äº¤äº’**ï¼š  
   - **æ­¥è¿›æ¨¡å¼**ï¼šç‚¹å‡»å¥¶ç‰›ä½¿å…¶"å¥”è·‘å…¥åœº"ï¼ŒçŠ¶æ€ä½äº®èµ·ç»¿å…‰ï¼Œåˆ†æ•°å¢åŠ   
   - **è‡ªåŠ¨æ¨¡å¼**ï¼šAIæŒ‰æœ€ä¼˜è·¯å¾„æ‰§è¡Œï¼Œé€Ÿåº¦å¯è°ƒï¼ˆæ»‘å—0.5x-5xï¼‰  
   - **å¥–åŠ±è§¦å‘**ï¼šå½“åˆ†æ•°â‰¥é˜ˆå€¼æ—¶ï¼Œè·‘é“ä¸Šæ–¹æ‰è½é‡‘å¸+æ’­æ”¾"å®"éŸ³æ•ˆ  

3. **å…³é”®å¸§ç¤ºä¾‹**ï¼š  
   ```plaintext
   åˆå§‹çŠ¶æ€: [00000000] åˆ†æ•°=0
   â†“ ç¬¬3å¤´å¥¶ç‰›å‚èµ›ï¼ˆåœºæ¬¡1ï¼‰
   çŠ¶æ€: [00000100] â†’ åˆ†æ•°=7
   â†“ è§¦å‘å¥–åŠ±ï¼ˆP=5ï¼‰â†’ +2åˆ†
   åˆ†æ•°=9 (æ’­æ”¾é‡‘å¸åŠ¨ç”»)
   ```

4. **æŠ€æœ¯å®ç°**ï¼š  
   - Canvasç»˜åˆ¶å¥¶ç‰›çŠ¶æ€ç½‘æ ¼ï¼ŒrequestAnimationFrameé©±åŠ¨  
   - éŸ³æ•ˆï¼šWeb Audio APIæ’­æ”¾8-bitéŸ³æ•ˆï¼ˆå…¥åœº/å¥–åŠ±/å®Œæˆï¼‰  

---

#### **6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜**  
**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
çŠ¶å‹DPé€‚ç”¨äº**å°è§„æ¨¡é›†åˆä¼˜åŒ–é—®é¢˜**ï¼š  
1. æ—…è¡Œå•†é—®é¢˜ï¼ˆè®¿é—®åŸå¸‚é¡ºåºï¼‰  
2. èƒŒåŒ…é—®é¢˜å˜ç§ï¼ˆç‰©å“ç»„åˆä¼˜åŒ–ï¼‰  
3. æ£‹ç›˜è¦†ç›–ï¼ˆå¤šç±³è¯ºéª¨ç‰Œæ”¾ç½®ï¼‰  

**æ´›è°·æ¨è**ï¼š  
1. **P2915 [USACO08NOV]Mixed Up Cows**  
   â†’ å¥¶ç‰›æ’åˆ—é—®é¢˜ï¼ŒåŒæ¬¾çŠ¶å‹DPæ¨¡å‹  
2. **P1433 åƒå¥¶é…ª**  
   â†’ äºŒç»´åæ ‡+çŠ¶æ€å‹ç¼©ï¼Œè·ç¦»ä¼˜åŒ–å®è·µ  
3. **P1171 å”®è´§å‘˜çš„éš¾é¢˜**  
   â†’ ç»å…¸TSPé—®é¢˜ï¼ŒçŠ¶æ€è®¾è®¡è¿›é˜¶è®­ç»ƒ  

---

#### **7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«**  
> **æ¥è‡ªJK_LOVERçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"æœ€åˆæœªå¯¹å¥–åŠ±åˆ†æ’åºï¼Œå¯¼è‡´éƒ¨åˆ†å¥–åŠ±æ¼åŠ ã€‚é€šè¿‡æ‰“å°æ¯ä¸ªçŠ¶æ€çš„å¥–åŠ±è§¦å‘è®°å½•å®šä½é—®é¢˜"*  
>  
> **Kayç‚¹è¯„**ï¼š  
> å¤šæ­¥éª¤DPä¸­ï¼Œ**ä¸­é—´çŠ¶æ€è¾“å‡º**æ˜¯è°ƒè¯•é‡‘é’¥åŒ™ï¼å»ºè®®ï¼š  
> - åœ¨å…³é”®è½¬ç§»å`cout << "çŠ¶æ€:" << mask << " å¾—åˆ†:" << dp[mask]`  
> - ç”¨`cerr`è¾“å‡ºè°ƒè¯•æ—¥å¿—é¿å…å¹²æ‰°æ­£å¼è¾“å‡º  

---  
ğŸ’ª æŒæ¡çŠ¶å‹DPçš„ä½è¿ç®—æŠ€å·§ï¼Œä½ å°±èƒ½åƒæŒ‡æŒ¥åƒç´ å¥¶ç‰›æˆ˜é˜Ÿä¸€æ ·ï¼Œé«˜æ•ˆè§£å†³ç»„åˆä¼˜åŒ–é—®é¢˜ï¼ä¸‹æ¬¡é‡åˆ°Nâ‰¤20çš„é¢˜ç›®ï¼Œè¯•è¯•"äºŒè¿›åˆ¶å¯†ç é”"å§ï¼

---
å¤„ç†ç”¨æ—¶ï¼š131.48ç§’
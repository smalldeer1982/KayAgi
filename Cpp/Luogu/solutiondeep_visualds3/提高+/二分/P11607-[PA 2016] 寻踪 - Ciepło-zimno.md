# é¢˜ç›®ä¿¡æ¯

# [PA 2016] å¯»è¸ª / CiepÅ‚o-zimno

## é¢˜ç›®èƒŒæ™¯


è¯‘è‡ª [Potyczki Algorytmiczne 2016](https://sio2.mimuw.edu.pl/c/pa-2016-1/p/) R3 CiepÅ‚o-zimno [B] (CIE)ã€‚$\texttt{1s,256M}$ã€‚

åŸé¢˜ä¸ºå‡½æ•°å¼äº¤äº’é¢˜ã€‚ä¸ºäº†æ–¹ä¾¿ä¸åŒè¯­è¨€çš„é€‰æ‰‹æäº¤ï¼Œæ”¹ä¸º IO äº¤äº’é¢˜ã€‚

ç‰¹æ®Šçš„å†…å­˜é™åˆ¶æ˜¯äº¤äº’åº“çš„é™åˆ¶å¯¼è‡´çš„ï¼Œå’Œè§£æ³•æ²¡æœ‰å…³ç³»ã€‚

## é¢˜ç›®æè¿°


**è¿™æ˜¯ä¸€é“äº¤äº’é¢˜ã€‚**

ç»™å®šæ­£å¸¸æ•° $n,k,r$ã€‚

$n$ ç»´ç©ºé—´ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•´ç‚¹ $P(p_1,p_2,\ldots,p_n)$ï¼Œæ»¡è¶³ $p_i\in [0,r]$ã€‚

ä½ æœ‰ $k$ æ¬¡è¯¢é—®æœºä¼šï¼Œç¬¬ $i$ æ¬¡è¯¢é—®ç»™å®šä¸€ä¸ªæ•´ç‚¹ $V_i(v_{i,1},v_{i,2},\ldots,v_{i,n})$ï¼Œå›ç­”ä¸ºã€Œ$\operatorname{dist}(V_i,P)$ æ˜¯/å¦**ä¸¥æ ¼**å°äº $\operatorname{dist}(V_{i-1},P)$ã€ã€‚**ç‰¹åˆ«åœ°**ï¼Œ$i=1$ æ—¶ï¼Œç­”æ¡ˆæ€»ä¸ºå¦ã€‚

æ³¨æ„ï¼Œè¿™é‡Œçš„ $\operatorname{dist}(A,B)$ è¡¨ç¤º $A,B$ ä¹‹é—´çš„ **Chebyshev è·ç¦»**ã€‚ä¹Ÿå°±æ˜¯ï¼Œ$\displaystyle \operatorname{dist}(A,B)=\max_{1\le i\le n} |A_i-B_i|$ï¼Œè¿™é‡Œ $A_i$ è¡¨ç¤ºç‚¹ $A$ åæ ‡åœ¨ç¬¬ $i$ ç»´ä¸Šçš„åˆ†é‡ã€‚

åˆ©ç”¨è¯¢é—®æ‰¾åˆ°ç‚¹ $P$ã€‚

### å®ç°ç»†èŠ‚

**æ³¨æ„ï¼šæœ¬é¢˜çš„ IO é‡å¯èƒ½å¾ˆå¤§ï¼Œè¯·æ³¨æ„ä½¿ç”¨å¿«é€Ÿçš„ IO æ–¹å¼ã€‚**

è¯»å…¥ä¸‰ä¸ªæ­£æ•´æ•° $n,k,r$ã€‚ç„¶åå¼€å§‹äº¤äº’ï¼š

- $\texttt{?}$ $v_{i,1}$ $v_{i,2}$ $\ldots$ $v_{i,n}$ï¼šè¯¢é—®ã€Œ$\operatorname{dist}(V_i,P)$ æ˜¯/å¦**ä¸¥æ ¼**å°äº $\operatorname{dist}(V_{i-1},P)$ã€ã€‚
    - å›ç­”ä¸º $0$ï¼Œè¡¨ç¤ºç­”æ¡ˆä¸ºå¦ï¼›å›ç­”ä¸º $1$ï¼Œè¡¨ç¤ºç­”æ¡ˆä¸ºæ˜¯ï¼›å›ç­”ä¸º $-1$ï¼Œè¡¨ç¤ºä½ çš„ç¨‹åºå·²ç»è¢«åˆ¤ä¸º WAï¼Œè¯·**ç«‹åˆ»ç»ˆæ­¢ç¨‹åº**ã€‚
        - ç‰¹åˆ«åœ°ï¼Œå¦‚æœè¿™æ˜¯ç¬¬ä¸€æ¬¡è¯¢é—®ï¼Œåˆ™ï¼ˆå¦‚æœè¯¢é—®åˆæ³•çš„è¯ï¼‰å›ç­”æ€»ä¸º $0$ã€‚
    - ä½ éœ€è¦ä¿è¯ $v_{i,j}\in [0,r]$ï¼Œä¸” $v_{i,j}$ ä¸ºæ•´æ•°ã€‚
    - æœ€å¤šå¯ä»¥è¯¢é—® $k$ æ¬¡ã€‚
- $\texttt{!}$ $p_{1}$ $p_{2}$ $\ldots$ $p_{n}$ï¼šå›ç­” $P$ çš„ä½ç½®ã€‚
    - å›ç­”åï¼Œä½ çš„ç¨‹åºéœ€è¦ç«‹åˆ»ç»ˆæ­¢ï¼Œä¸è¦è¾“å‡ºå¤šä½™å†…å®¹ã€‚

**æ¯æ¬¡è¯¢é—®æˆ–è€…å›ç­”ä¹‹åï¼Œéƒ½è¦æ¢è¡Œå¹¶åˆ·æ–°ç¼“å†²åŒºã€‚** ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š

- C++ï¼š`fflush(stdout)`ï¼Œ`std::cout<<std::endl`ï¼›
- Javaï¼š`System.out.flush()`ï¼›
- Pascalï¼š`flush(output)`ï¼›
- Pythonï¼š`sys.stdout.flush()`ã€‚

## è¯´æ˜/æç¤º



- $1\le n\le 500$ï¼›
- $k\ge 100\cdot n$ï¼›
- $2\le r\le 10^9$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
2 200 2

0

1

1```

### è¾“å‡º

```

? 0 0

? 1 1

? 2 2

! 2 2```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[PA 2016] å¯»è¸ª / CiepÅ‚o-zimno æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åˆ†æ²»æ€æƒ³ï¼ˆäºŒåˆ†æ³•ï¼‰+ äº¤äº’ç­–ç•¥`  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œå°±åƒã€Œæ‹†ç§¯æœ¨å¡”ã€â€”â€”æŠŠnç»´ç©ºé—´çš„å¤§é—®é¢˜ï¼Œæ‹†æˆæ¯ä¸ªç»´åº¦çš„å°é—®é¢˜é€ä¸ªè§£å†³ã€‚**åˆ†æ²»æ€æƒ³**çš„æ ¸å¿ƒæ˜¯â€œåˆ†è€Œæ²»ä¹‹â€ï¼šå°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºæ›´å°ã€æ›´æ˜“å¤„ç†çš„å­é—®é¢˜ï¼Œè§£å†³å­é—®é¢˜ååˆå¹¶ç»“æœã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬æŠŠâ€œæ‰¾nç»´ç‚¹Pâ€æ‹†è§£ä¸ºâ€œç¡®å®šæ¯ä¸ªç»´åº¦p_içš„å–å€¼èŒƒå›´â€ï¼Œå¯¹æ¯ä¸ªç»´åº¦ç”¨**äºŒåˆ†æ³•**é€æ­¥ç¼©å°åŒºé—´ï¼ˆä»[0,r]åˆ°æœ€ç»ˆçš„å•ä¸€ç‚¹ï¼‰ã€‚  

å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ç»´æŠ¤æ¯ä¸ªç»´åº¦içš„å–å€¼åŒºé—´[l_i, r_i]ã€‚æ¯æ¬¡é€‰**åŒºé—´æœ€é•¿**çš„ç»´åº¦ï¼ˆç”¨ä¼˜å…ˆé˜Ÿåˆ—å®ç°ï¼‰ï¼Œæ„é€ ä¸¤ä¸ªè¯¢é—®ç‚¹ï¼š  
- ç‚¹Aï¼šç»´åº¦iå–l_iï¼Œå…¶ä»–ç»´åº¦å–å½“å‰åŒºé—´çš„ä¸­ç‚¹ï¼ˆæœ€å°åŒ–å…¶ä»–ç»´åº¦å¯¹ç»“æœçš„å¹²æ‰°ï¼‰ï¼›  
- ç‚¹Bï¼šç»´åº¦iå–r_iï¼Œå…¶ä»–ç»´åº¦å–ä¸­ç‚¹ã€‚  
é€šè¿‡æ¯”è¾ƒAã€Båˆ°Pçš„åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼ˆäº¤äº’ç»“æœï¼‰ï¼Œæˆ‘ä»¬èƒ½åˆ¤æ–­p_iæ›´é è¿‘l_iè¿˜æ˜¯r_iï¼Œä»è€Œç¼©å°è¯¥ç»´åº¦çš„åŒºé—´ã€‚åå¤è¿­ä»£ç›´åˆ°æ‰€æœ‰åŒºé—´é•¿åº¦â‰¤1ï¼Œæœ€åå¤„ç†è¾¹ç•Œæƒ…å†µå¾—åˆ°æœ€ç»ˆç‚¹Pã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ç”¨ã€Œåƒç´ ç»´åº¦æ¢é™©å®¶ã€çš„å¤å¤æ¸¸æˆé£æ ¼å±•ç¤ºç®—æ³•æµç¨‹ï¼š  
- æ¯ä¸ªç»´åº¦ç”¨ä¸€æ¡**åƒç´ è¿›åº¦æ¡**è¡¨ç¤ºåŒºé—´[l_i, r_i]ï¼ˆé•¿åº¦å¯¹åº”åŒºé—´å¤§å°ï¼‰ï¼›  
- ä¼˜å…ˆé˜Ÿåˆ—ç”¨**å †å çš„åƒç´ å—**æ˜¾ç¤ºï¼Œæœ€å¤§åŒºé—´çš„ç»´åº¦ä¼šâ€œå‘å…‰â€ï¼ˆé«˜äº®ï¼‰ï¼›  
- è¯¢é—®ç‚¹ç”¨**é—ªçƒçš„åƒç´ ç‚¹**è¡¨ç¤ºï¼Œæ¯”è¾ƒç»“æœåï¼Œå¯¹åº”ç»´åº¦çš„è¿›åº¦æ¡ä¼šâ€œæ”¶ç¼©â€ï¼ˆåŠ¨ç”»ç¼©å°åŒºé—´ï¼‰ï¼›  
- å…³é”®æ“ä½œï¼ˆå¦‚é€‰ç»´åº¦ã€ç¼©å°åŒºé—´ï¼‰ä¼´éš**8ä½åƒç´ éŸ³æ•ˆ**ï¼ˆé€‰ç»´åº¦æ˜¯â€œæ»´â€ï¼Œç¼©å°åŒºé—´æ˜¯â€œå®â€ï¼‰ï¼Œå®Œæˆæ‰€æœ‰ç»´åº¦åæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼š(æ¥æºï¼šFFTotoro)**  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯åƒâ€œç²¾å‡†æ‰‹æœ¯åˆ€â€â€”â€”ç›´å‡»é—®é¢˜æ ¸å¿ƒã€‚å®ƒç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜å…ˆå¤„ç†åŒºé—´æœ€å¤§çš„ç»´åº¦ï¼Œç¡®ä¿æ¯æ¬¡è¯¢é—®éƒ½èƒ½æœ€å¤§åŒ–ç¼©å°ä¸ç¡®å®šæ€§ï¼›æ„é€ è¯¢é—®ç‚¹æ—¶ï¼ŒæŠŠå…¶ä»–ç»´åº¦è®¾ä¸ºä¸­ç‚¹ï¼Œå®Œç¾éš”ç¦»äº†æ— å…³å˜é‡çš„å¹²æ‰°ï¼Œè®©åˆ¤æ–­æ›´å‡†ç¡®ã€‚ä»£ç é£æ ¼éå¸¸è§„èŒƒï¼šç”¨`vector<pair>`ç»´æŠ¤åŒºé—´ï¼Œä¼˜å…ˆé˜Ÿåˆ—çš„æ¯”è¾ƒå‡½æ•°æ¸…æ™°ï¼Œäº¤äº’æµç¨‹ä¸¥æ ¼éµå¾ªé¢˜ç›®è¦æ±‚ï¼ˆå¦‚`cout<<endl`è‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒºï¼‰ã€‚è¾¹ç•Œå¤„ç†ä¹Ÿå¾ˆä¸¥è°¨ï¼ˆæ¯”å¦‚åŒºé—´é•¿åº¦ä¸ºå¶æ•°æ—¶ï¼Œr_iæ›´æ–°ä¸ºä¸­ç‚¹+1ï¼‰ï¼Œèƒ½ç›´æ¥ç”¨äºç«èµ›ã€‚æœ€å€¼å¾—å­¦ä¹ çš„æ˜¯â€œåˆ†ç»´åº¦å¤„ç†+ä¼˜å…ˆé˜Ÿåˆ—â€çš„ç­–ç•¥ï¼ŒæŠŠå¤æ‚çš„nç»´é—®é¢˜æ‹†è§£æˆäº†å¯æ“ä½œçš„å•ç»´é—®é¢˜ï¼Œæ˜¯äº¤äº’é¢˜çš„å…¸èŒƒè§£æ³•ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ³•
1. **éš¾ç‚¹1ï¼šå¦‚ä½•è®¾è®¡è¯¢é—®ç‚¹ï¼Œé¿å…å…¶ä»–ç»´åº¦å¹²æ‰°ï¼Ÿ**  
   åˆ†æï¼šåˆ‡æ¯”é›ªå¤«è·ç¦»æ˜¯å„ç»´åº¦å·®çš„æœ€å¤§å€¼ï¼Œå¦‚æœå…¶ä»–ç»´åº¦çš„åŒºé—´å¾ˆå¤§ï¼Œå®ƒä»¬çš„å·®å€¼ä¼šæ©ç›–å½“å‰ç»´åº¦çš„åˆ¤æ–­ã€‚  
   è§£å†³ï¼šå…¶ä»–ç»´åº¦å–å½“å‰åŒºé—´çš„**ä¸­ç‚¹**ï¼ˆå¦‚[L_j, R_j]å–âŒŠ(L_j+R_j)/2âŒ‹ï¼‰ï¼Œæ­¤æ—¶å…¶ä»–ç»´åº¦çš„å·®å€¼æœ€å¤šæ˜¯(R_j-L_j)/2ï¼Œæ˜¯è¯¥ç»´åº¦å½“å‰çš„æœ€å°å¯èƒ½ï¼Œä¸ä¼šå¹²æ‰°å½“å‰ç»´åº¦çš„æ¯”è¾ƒã€‚  

2. **éš¾ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆé€‰æ‹©ä¸‹ä¸€ä¸ªå¤„ç†çš„ç»´åº¦ï¼Ÿ**  
   åˆ†æï¼šå¦‚æœéšæœºé€‰ç»´åº¦ï¼Œå¯èƒ½åå¤å¤„ç†å°åŒºé—´ï¼Œæµªè´¹è¯¢é—®æ¬¡æ•°ã€‚  
   è§£å†³ï¼šç”¨**ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å¤§å †ï¼‰**ç»´æŠ¤æ¯ä¸ªç»´åº¦çš„åŒºé—´é•¿åº¦ï¼Œæ¯æ¬¡é€‰åŒºé—´æœ€é•¿çš„ç»´åº¦â€”â€”å°±åƒâ€œå…ˆåƒæœ€å¤§çš„è›‹ç³•å—â€ï¼Œèƒ½æœ€å¿«ç¼©å°æ•´ä½“çš„ä¸ç¡®å®šæ€§ã€‚  

3. **éš¾ç‚¹3ï¼šå¦‚ä½•å¤„ç†åŒºé—´é•¿åº¦ä¸º1çš„æƒ…å†µï¼Ÿ**  
   åˆ†æï¼šå½“[l_i, r_i]é•¿åº¦ä¸º1æ—¶ï¼ˆå¦‚l_i=2, r_i=3ï¼‰ï¼Œéœ€è¦ç¡®å®šp_iæ˜¯2è¿˜æ˜¯3ã€‚  
   è§£å†³ï¼šæ„é€ **è¾¹ç•Œå¤–çš„ç‚¹**ï¼ˆå¦‚l_i-1=1æˆ–r_i+1=4ï¼‰ï¼Œä¸å½“å‰åŒºé—´çš„ç‚¹æ¯”è¾ƒã€‚ä¾‹å¦‚ï¼Œè‹¥p_iæ˜¯3ï¼Œé‚£ä¹ˆè¯¢é—®ç‚¹(1,...)åˆ°Pçš„è·ç¦»ä¼šæ¯”(2,...)å¤§ï¼Œä»è€Œç¡®å®šp_i=3ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **åˆ†ç»´åº¦æ‹†è§£**ï¼šæŠŠnç»´é—®é¢˜æ‹†æˆå•ç»´é—®é¢˜ï¼Œé™ä½å¤æ‚åº¦ï¼›  
- **ä¼˜å…ˆå¤„ç†å¤§åŒºé—´**ï¼šç”¨ä¼˜å…ˆé˜Ÿåˆ—é€‰æœ€å¤§åŒºé—´ï¼Œæœ€å¤§åŒ–æ¯æ¬¡è¯¢é—®çš„æ”¶ç›Šï¼›  
- **éš”ç¦»æ— å…³å˜é‡**ï¼šè®¾è®¡è¯¢é—®ç‚¹æ—¶ï¼Œè®©å…¶ä»–ç»´åº¦çš„å½±å“æœ€å°åŒ–ï¼›  
- **äº¤äº’é¢˜ç»†èŠ‚**ï¼šå¿…é¡»åˆ·æ–°ç¼“å†²åŒºï¼ˆå¦‚`cout<<endl`ï¼‰ï¼Œä¸¥æ ¼éµå¾ªè¾“å‡ºæ ¼å¼ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæ­¤ä»£ç æ¥è‡ªFFTotoroçš„é¢˜è§£ï¼Œæ˜¯â€œåˆ†ç»´åº¦äºŒåˆ†+äº¤äº’ç­–ç•¥â€çš„å…¸å‹å®ç°ï¼Œé€»è¾‘æ¸…æ™°ã€ä»£ç è§„èŒƒã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <vector>
#include <queue>
using namespace std;

struct info {
    int p, l, r;
    info(int p = 0, int l = 0, int r = 0) : p(p), l(l), r(r) {}
    bool operator<(const info& x) const {
        return r - l < x.r - x.l; // æœ€å¤§å †ï¼ˆåŒºé—´é•¿çš„ä¼˜å…ˆï¼‰
    }
};

int main() {
    ios::sync_with_stdio(false);
    int n, k, R;
    cin >> n >> k >> R;
    vector<pair<int, int>> intervals(n, {0, R}); // æ¯ä¸ªç»´åº¦çš„åŒºé—´[l, r]
    priority_queue<info> pq;

    // åˆå§‹åŒ–ä¼˜å…ˆé˜Ÿåˆ—ï¼šæ‰€æœ‰ç»´åº¦çš„åŒºé—´åŠ å…¥å †
    for (int i = 0; i < n; ++i) {
        pq.emplace(i, 0, R);
    }

    // å¤„ç†æ‰€æœ‰åŒºé—´ï¼Œç›´åˆ°é•¿åº¦â‰¤1
    while (pq.top().r - pq.top().l > 1) {
        auto curr = pq.top();
        pq.pop();
        int p = curr.p, l = curr.l, r = curr.r;

        // è¯¢é—®ç‚¹1ï¼šç»´åº¦på–lï¼Œå…¶ä»–å–ä¸­ç‚¹
        cout << "? ";
        for (int i = 0; i < n; ++i) {
            if (i == p) cout << l << ' ';
            else cout << (intervals[i].first + intervals[i].second) / 2 << ' ';
        }
        cout << endl;
        int res1;
        cin >> res1;

        // è¯¢é—®ç‚¹2ï¼šç»´åº¦på–rï¼Œå…¶ä»–å–ä¸­ç‚¹
        cout << "? ";
        for (int i = 0; i < n; ++i) {
            if (i == p) cout << r << ' ';
            else cout << (intervals[i].first + intervals[i].second) / 2 << ' ';
        }
        cout << endl;
        int res2;
        cin >> res2;

        // æ›´æ–°åŒºé—´ï¼šres2=1è¡¨ç¤ºrçš„è·ç¦»æ›´å°ï¼Œpåœ¨å³åŠéƒ¨åˆ†
        if (res2 == 1) {
            intervals[p].first = (l + r) / 2 + 1;
        } else {
            // åŒºé—´é•¿åº¦å¥‡å¶å¤„ç†ï¼šå¶æ•°æ—¶ræ›´æ–°ä¸ºä¸­ç‚¹+1
            if ((r - l + 1) % 2 == 0) {
                intervals[p].second = (l + r) / 2 + 1;
            } else {
                intervals[p].second = (l + r) / 2;
            }
        }

        // æŠŠæ›´æ–°åçš„åŒºé—´é‡æ–°åŠ å…¥å †
        pq.emplace(p, intervals[p].first, intervals[p].second);
    }

    // å¤„ç†åŒºé—´é•¿åº¦ä¸º1çš„ç»´åº¦ï¼ˆå¦‚[l, r] = [2,3]ï¼‰
    for (int i = 0; i < n; ++i) {
        if (intervals[i].first < intervals[i].second) {
            int l = intervals[i].first, r = intervals[i].second;
            if (r == R) { // å³è¾¹ç•Œï¼Œæ„é€ l-1
                cout << "? ";
                for (int j = 0; j < n; ++j) {
                    if (j == i) cout << l - 1 << ' ';
                    else cout << intervals[j].first << ' ';
                }
                cout << endl;
                int res;
                cin >> res;
                // è¯¢é—®ç‚¹2ï¼šç»´åº¦iå–r
                cout << "? ";
                for (int j = 0; j < n; ++j) {
                    if (j == i) cout << r << ' ';
                    else cout << intervals[j].first << ' ';
                }
                cout << endl;
                cin >> res;
                if (res == 1) intervals[i].first = r;
                else intervals[i].second = l;
            } else { // å·¦è¾¹ç•Œï¼Œæ„é€ r+1
                cout << "? ";
                for (int j = 0; j < n; ++j) {
                    if (j == i) cout << r + 1 << ' ';
                    else cout << intervals[j].first << ' ';
                }
                cout << endl;
                int res;
                cin >> res;
                // è¯¢é—®ç‚¹2ï¼šç»´åº¦iå–l
                cout << "? ";
                for (int j = 0; j < n; ++j) {
                    if (j == i) cout << l << ' ';
                    else cout << intervals[j].first << ' ';
                }
                cout << endl;
                cin >> res;
                if (res == 1) intervals[i].second = l;
                else intervals[i].first = r;
            }
        }
    }

    // è¾“å‡ºç»“æœ
    cout << "! ";
    for (auto& p : intervals) {
        cout << p.first << ' ';
    }
    cout << endl;

    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸‰æ­¥ï¼š  
  1. **åˆå§‹åŒ–**ï¼šè¯»å–è¾“å…¥ï¼Œåˆå§‹åŒ–æ¯ä¸ªç»´åº¦çš„åŒºé—´ä¸º[0,R]ï¼ŒåŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼›  
  2. **ç¼©å°åŒºé—´**ï¼šå¾ªç¯å¤„ç†ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ¯æ¬¡é€‰æœ€å¤§åŒºé—´çš„ç»´åº¦ï¼Œæ„é€ ä¸¤ä¸ªè¯¢é—®ç‚¹ï¼Œæ›´æ–°åŒºé—´ï¼›  
  3. **å¤„ç†è¾¹ç•Œ**ï¼šå¯¹é•¿åº¦ä¸º1çš„åŒºé—´ï¼Œæ„é€ è¾¹ç•Œå¤–çš„ç‚¹æ¯”è¾ƒï¼Œç¡®å®šæœ€ç»ˆå€¼ï¼›  
  4. **è¾“å‡ºç»“æœ**ï¼šæ‰“å°æ‰€æœ‰ç»´åº¦çš„æœ€ç»ˆå€¼ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ğŸ® åŠ¨ç”»ä¸»é¢˜ï¼šç»´åº¦æ¢é™©å®¶
**æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼šæ¨¡æ‹Ÿâ€œæ¢é™©å®¶â€ï¼ˆç®—æ³•ï¼‰é€ä¸ªç¼©å°æ¯ä¸ªç»´åº¦çš„åŒºé—´ï¼Œæœ€ç»ˆæ‰¾åˆ°nç»´ç‚¹Pã€‚  

### ğŸ¨ è®¾è®¡ç»†èŠ‚
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºnä¸ª**åƒç´ è¿›åº¦æ¡**ï¼ˆæ¯ä¸ªç»´åº¦çš„åŒºé—´ï¼‰ï¼Œåˆå§‹é•¿åº¦ä¸ºRï¼ˆç”¨ä¸åŒé¢œè‰²åŒºåˆ†ç»´åº¦ï¼‰ï¼›  
   - å³ä¾§æ˜¾ç¤º**ä¼˜å…ˆé˜Ÿåˆ—**ï¼ˆå †å çš„åƒç´ å—ï¼Œæœ€å¤§åŒºé—´çš„å—ä¼šâ€œå‘å…‰â€ï¼‰ï¼›  
   - åº•éƒ¨æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼ˆ1x~5xï¼‰ã€‚  

2. **ç®—æ³•æ‰§è¡Œæµç¨‹**ï¼š  
   - **é€‰ç»´åº¦**ï¼šä¼˜å…ˆé˜Ÿåˆ—ä¸­æœ€å¤§çš„åƒç´ å—â€œè·³â€åˆ°å±å¹•ä¸­å¤®ï¼ˆé«˜äº®ï¼‰ï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆï¼›  
   - **æ„é€ è¯¢é—®ç‚¹**ï¼šä¸¤ä¸ªé—ªçƒçš„åƒç´ ç‚¹å‡ºç°åœ¨è¿›åº¦æ¡ä¸¤ä¾§ï¼ˆl_iå’Œr_iï¼‰ï¼Œå…¶ä»–ç»´åº¦çš„è¿›åº¦æ¡æ˜¾ç¤ºâ€œä¸­ç‚¹â€ï¼ˆç°è‰²æ ‡è®°ï¼‰ï¼›  
   - **æ¯”è¾ƒç»“æœ**ï¼šè‹¥r_içš„è·ç¦»æ›´å°ï¼Œå³ä¾§çš„åƒç´ ç‚¹ä¼šâ€œå˜å¤§â€ï¼Œå¯¹åº”ç»´åº¦çš„è¿›åº¦æ¡ä»å³ä¾§â€œæ”¶ç¼©â€ï¼ˆåŠ¨ç”»ç¼©å°l_iåˆ°ä¸­ç‚¹+1ï¼‰ï¼›  
   - **å®Œæˆç»´åº¦**ï¼šè¿›åº¦æ¡ç¼©å°åˆ°ä¸€ä¸ªç‚¹æ—¶ï¼Œä¼šâ€œçˆ†ç‚¸â€æˆå½©è‰²åƒç´ ï¼ˆåº†ç¥ï¼‰ï¼Œå¹¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  

3. **äº¤äº’ä¸è¶£å‘³**ï¼š  
   - **è‡ªåŠ¨æ¼”ç¤º**ï¼šç‚¹å‡»â€œAIæ¨¡å¼â€ï¼Œç®—æ³•ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œåƒâ€œè´ªåƒè›‡AIâ€ä¸€æ ·é€ä¸ªå¤„ç†ç»´åº¦ï¼›  
   - **å…³å¡è®¾è®¡**ï¼šæ¯å¤„ç†å®Œ10ä¸ªç»´åº¦ï¼Œè§†ä¸ºâ€œè¿‡ä¸€å…³â€ï¼Œå±å¹•æ˜¾ç¤ºâ€œLevel Up!â€ï¼Œå¹¶å¢åŠ åˆ†æ•°ï¼›  
   - **éŸ³æ•ˆåº“**ï¼š8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆå¾ªç¯æ’­æ”¾ï¼‰ï¼Œå…³é”®æ“ä½œéŸ³æ•ˆï¼ˆé€‰ç»´åº¦ï¼šæ»´ï¼Œç¼©å°åŒºé—´ï¼šå®ï¼Œèƒœåˆ©ï¼šæ¬¢å¿«çš„éŸ³é˜¶ï¼‰ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ§  é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„â€œåˆ†ç»´åº¦å¤„ç†+ä¼˜å…ˆç­–ç•¥â€å¯ç”¨äºæ‰€æœ‰**é«˜ç»´æœç´¢é—®é¢˜**ï¼Œæ¯”å¦‚ï¼š  
- æ‰¾é«˜ç»´ç©ºé—´ä¸­çš„æœ€ä¼˜è§£ï¼ˆå¦‚æœºå™¨å­¦ä¹ ä¸­çš„å‚æ•°è°ƒä¼˜ï¼‰ï¼›  
- äº¤äº’é¢˜ä¸­éœ€è¦é€æ­¥ç¼©å°èŒƒå›´çš„é—®é¢˜ï¼ˆå¦‚çŒœæ•°å­—æ¸¸æˆçš„é«˜ç»´ç‰ˆï¼‰ã€‚  


### ğŸ“š æ´›è°·ç»ƒä¹ æ¨è
1. **æ´›è°· P1379 å…«æ•°ç éš¾é¢˜**  
   - æ¨èç†ç”±ï¼šè¿™æ˜¯ç»å…¸çš„**BFSæœç´¢é¢˜**ï¼Œéœ€è¦é€æ­¥ç¼©å°çŠ¶æ€ç©ºé—´ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œç¼©å°åŒºé—´â€æ€è·¯ï¼Œèƒ½é”»ç‚¼â€œé€æ­¥é€¼è¿‘ç­”æ¡ˆâ€çš„æ€ç»´ã€‚  

2. **æ´›è°· P2054 [AHOI2005] æ´—ç‰Œ**  
   - æ¨èç†ç”±ï¼šæœ¬é¢˜éœ€è¦ç”¨**æ•°å­¦æ¨å¯¼+äºŒåˆ†æ³•**æ‰¾åˆ°ç›®æ ‡ä½ç½®ï¼Œå’Œæœ¬é¢˜çš„â€œåˆ†ç»´åº¦äºŒåˆ†â€å¼‚æ›²åŒå·¥ï¼Œèƒ½å¼ºåŒ–å¯¹äºŒåˆ†æ³•çš„ç†è§£ã€‚  

3. **æ´›è°· P3743 kotoriçš„è®¾å¤‡**  
   - æ¨èç†ç”±ï¼šè¿™æ˜¯**äºŒåˆ†ç­”æ¡ˆé¢˜**ï¼Œéœ€è¦é€šè¿‡äºŒåˆ†éªŒè¯ç­”æ¡ˆæ˜¯å¦å¯è¡Œï¼Œç±»ä¼¼æœ¬é¢˜â€œé€šè¿‡è¯¢é—®éªŒè¯åŒºé—´â€çš„æ€è·¯ï¼Œèƒ½é”»ç‚¼â€œéªŒè¯æ€§æ€ç»´â€ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

**å‚è€ƒç»éªŒ (æ¥è‡ª FFTotoro)**ï¼š  
â€œæ„é€ è¯¢é—®ç‚¹æ—¶ï¼ŒæŠŠå…¶ä»–ç»´åº¦è®¾ä¸ºä¸­ç‚¹æ˜¯å…³é”®â€”â€”è¿™æ ·èƒ½è®©å½“å‰ç»´åº¦çš„åˆ¤æ–­ä¸å—å¹²æ‰°ã€‚ä¸€å¼€å§‹æˆ‘æ²¡æ³¨æ„è¿™ç‚¹ï¼Œå¯¼è‡´å¤šæ¬¡è¯¢é—®ååŒºé—´è¿˜æ²¡ç¼©å°ï¼Œåæ¥è°ƒæ•´åæ•ˆç‡ç›´æ¥æå‡äº†ä¸€å€ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒåƒâ€œè¸©å‘åçš„æŒ‡è·¯ç‰Œâ€ã€‚åœ¨äº¤äº’é¢˜ä¸­ï¼Œ**éš”ç¦»æ— å…³å˜é‡**æ˜¯è®¾è®¡è¯¢é—®ç­–ç•¥çš„æ ¸å¿ƒâ€”â€”å¦‚æœä¸æŠŠå…¶ä»–ç»´åº¦è®¾ä¸ºä¸­ç‚¹ï¼Œå®ƒä»¬çš„å¤§åŒºé—´ä¼šâ€œæ·¹æ²¡â€å½“å‰ç»´åº¦çš„å·®å¼‚ï¼Œå¯¼è‡´åˆ¤æ–­é”™è¯¯ã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œä¸å¦¨â€œå›åˆ°é—®é¢˜æœ¬è´¨â€ï¼šåˆ‡æ¯”é›ªå¤«è·ç¦»æ˜¯å„ç»´åº¦çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥è¦è®©å…¶ä»–ç»´åº¦çš„æœ€å¤§å€¼æœ€å°åŒ–ï¼Œæ‰èƒ½çªå‡ºå½“å‰ç»´åº¦çš„å·®å¼‚ã€‚  


## ğŸ’ª ç»“è¯­
è¿™é“é¢˜çš„æœ¬è´¨æ˜¯â€œç”¨åˆ†æ²»æ€æƒ³è§£å†³é«˜ç»´é—®é¢˜â€â€”â€”æŠŠå¤§é—®é¢˜æ‹†å°ï¼Œé€ä¸ªè§£å†³ã€‚äº¤äº’é¢˜çš„é­…åŠ›åœ¨äºâ€œå’Œç¨‹åºå¯¹è¯â€ï¼Œæ¯ä¸€æ¬¡è¯¢é—®éƒ½æ˜¯ä¸€æ¬¡â€œè¯•æ¢â€ï¼Œæ¯ä¸€æ¬¡ç»“æœéƒ½æ˜¯ä¸€æ¬¡â€œè¿›æ­¥â€ã€‚è®°ä½ï¼š**ä¼˜å…ˆå¤„ç†æœ€æœ‰ä»·å€¼çš„éƒ¨åˆ†ï¼Œéš”ç¦»æ— å…³å˜é‡çš„å¹²æ‰°ï¼Œå°±èƒ½ç²¾å‡†æ‰¾åˆ°ç­”æ¡ˆ**ï¼  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ›´æœ‰è¶£çš„äº¤äº’é¢˜å§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š135.08ç§’
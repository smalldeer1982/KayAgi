# é¢˜ç›®ä¿¡æ¯

# [SCOI2010] å¹¸è¿æ•°å­—

## é¢˜ç›®èƒŒæ™¯

å››å· NOI çœé€‰ 2010ã€‚


## é¢˜ç›®æè¿°

åœ¨ä¸­å›½ï¼Œå¾ˆå¤šäººéƒ½æŠŠ $6$ å’Œ $8$ è§†ä¸ºæ˜¯å¹¸è¿æ•°å­—ï¼lxhgww ä¹Ÿè¿™æ ·è®¤ä¸ºï¼Œäºæ˜¯ä»–å®šä¹‰è‡ªå·±çš„â€œå¹¸è¿å·ç â€æ˜¯åè¿›åˆ¶è¡¨ç¤ºä¸­åªåŒ…å«æ•°å­— $6$ å’Œ $8$ çš„é‚£äº›å·ç ï¼Œæ¯”å¦‚ $68$ï¼Œ$666$ï¼Œ$888$ éƒ½æ˜¯â€œå¹¸è¿å·ç â€ï¼ä½†æ˜¯è¿™ç§â€œå¹¸è¿å·ç â€æ€»æ˜¯å¤ªå°‘äº†ï¼Œæ¯”å¦‚åœ¨ $[1,100]$ çš„åŒºé—´å†…å°±åªæœ‰ $6$ ä¸ªï¼ˆ$6$ï¼Œ$8$ï¼Œ$66$ï¼Œ$68$ï¼Œ$86$ï¼Œ$88$ï¼‰ï¼Œäºæ˜¯ä»–åˆå®šä¹‰äº†ä¸€ç§â€œè¿‘ä¼¼å¹¸è¿å·ç â€ã€‚lxhgww è§„å®šï¼Œå‡¡æ˜¯â€œå¹¸è¿å·ç â€çš„å€æ•°éƒ½æ˜¯â€œè¿‘ä¼¼å¹¸è¿å·ç â€ï¼Œå½“ç„¶ï¼Œä»»ä½•çš„â€œå¹¸è¿å·ç â€ä¹Ÿéƒ½æ˜¯â€œè¿‘ä¼¼å¹¸è¿å·ç â€ï¼Œæ¯”å¦‚ $12$ï¼Œ$16$ï¼Œ$666$ éƒ½æ˜¯â€œè¿‘ä¼¼å¹¸è¿å·ç â€ã€‚

ç°åœ¨ lxhgww æƒ³çŸ¥é“åœ¨ä¸€æ®µé—­åŒºé—´ $[a, b]$ å†…ï¼Œâ€œè¿‘ä¼¼å¹¸è¿å·ç â€çš„ä¸ªæ•°ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $30\%$ çš„æ•°æ®ï¼Œä¿è¯ $1\le a\le b\le10^6$ã€‚

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œä¿è¯ $1\le a\le b\le10^{10}$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
1 10```

### è¾“å‡º

```
2```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šå¹¸è¿æ•°å­— æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå®¹æ–¥åŸç† + DFSå‰ªæä¼˜åŒ–  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> å¹¸è¿æ•°å­—ï¼ˆä»…å«6/8çš„æ•°å­—ï¼‰çš„å€æ•°æ„æˆ"è¿‘ä¼¼å¹¸è¿å·ç "ã€‚æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºé«˜æ•ˆè®¡ç®—åŒºé—´å†…å€æ•°æ•°é‡å¹¶é¿å…é‡å¤ç»Ÿè®¡ã€‚  
> - **æ ¸å¿ƒæ€æƒ³**ï¼šå®¹æ–¥åŸç†åƒå¤šå±‚æ»¤ç½‘â€”â€”å…ˆåŠ å•ä¸ªæ•°å­—çš„å€æ•°ï¼Œå‡å»ä¸¤ä¸¤å…¬å€æ•°ï¼Œå†åŠ ä¸‰ä¸ªå…¬å€æ•°... è§£å†³é‡å¤ç»Ÿè®¡é—®é¢˜  
> - **å…³é”®ä¼˜åŒ–**ï¼š  
>   - ç”Ÿæˆå¹¸è¿æ•°å­—åå»é™¤å€æ•°å†—ä½™ï¼ˆå¦‚66æ˜¯6çš„å€æ•°ï¼Œåˆ™å»é™¤66ï¼‰  
>   - åˆ†ç¦»å¤„ç†å¤§æ•°å­—ï¼ˆ>b/2çš„å•ç‹¬è®¡ç®—ï¼‰  
>   - é™åºæ’åºåŠ é€Ÿå‰ªæï¼ˆLCMæ›´å¿«è¶…ç•Œï¼‰  
> - **åƒç´ åŠ¨ç”»è®¾è®¡**ï¼š  
>   - 8-bité£æ ¼ç½‘æ ¼å±•ç¤ºå¹¸è¿æ•°å­—ç”Ÿæˆè¿‡ç¨‹  
>   - å®¹æ–¥DFSæ ‘çŠ¶å±•å¼€ï¼Œå½“å‰LCMè¶…ç•Œæ—¶è·¯å¾„å˜çº¢  
>   - éŸ³æ•ˆï¼šæ•°å­—ç”Ÿæˆ"å“”"å£°ï¼Œè¶…å‡ºèŒƒå›´"å¤±è´¥"éŸ³ï¼Œå®Œæˆæ—¶"èƒœåˆ©"éŸ³  

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼šyybyyb**  
* **äº®ç‚¹**ï¼š  
  - ä¸‰é‡å‰ªæï¼šå»é™¤å†—ä½™æ•°å­— + åˆ†ç¦»>r/3çš„æ•° + é™åºæ’åº  
  - ç©ºé—´ä¼˜åŒ–ï¼ˆO(n)å­˜å‚¨ï¼‰ï¼Œå˜é‡å‘½åæ¸…æ™°ï¼ˆ`ret`/`tot`ï¼‰  
  - å®è·µä»·å€¼ï¼šæ´›è°·æµ‹è¯•æœ€ä¼˜è§£ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨  

**é¢˜è§£äºŒï¼šxyz32768**  
* **äº®ç‚¹**ï¼š  
  - ç³»ç»ŸåŒ–å»é‡æµç¨‹ï¼ˆåŒé‡å¾ªç¯æ ‡è®°å€æ•°ï¼‰  
  - æ¨¡å—åŒ–è®¾è®¡ï¼ˆåˆ†ç¦»`sieve()`å’Œ`dfs2()`ï¼‰  
  - æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°ä½ï¼ˆé¿å…æ— æ•ˆLCMè®¡ç®—ï¼‰  

**é¢˜è§£ä¸‰ï¼šNight_Aurora**  
* **äº®ç‚¹**ï¼š  
  - åˆ›æ–°åˆ†ç¦»>R/2çš„æ•°å­—ï¼ˆç‹¬ç«‹è´¡çŒ®æ— æ³•ç»„åˆï¼‰  
  - æ•°å­¦è¯æ˜å®Œå¤‡ï¼ˆä¸¥æ ¼è®ºè¯åˆ†ç¦»é˜ˆå€¼ï¼‰  
  - ä»£ç å¯è¯»æ€§å¼ºï¼ˆ`valid`/`small`åˆ†ç»„æ˜ç¡®ï¼‰  

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **å¹¸è¿æ•°å­—å»é‡**  
   * **éš¾ç‚¹**ï¼šç”Ÿæˆçš„2046ä¸ªæ•°å­—å­˜åœ¨å€æ•°é“¾ï¼ˆ6â†’66â†’666ï¼‰  
   * **è§£å†³**ï¼šæ ‡è®°åˆ é™¤éæœ€å°åŸºæ•°çš„æ•°å­—  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŸºç¡€æ•°å¤„ç†æ›´ä¼˜ï¼Œå¦‚åŒç­›æ³•ä¿ç•™ç´ æ•°  

2. **LCMè®¡ç®—æº¢å‡º**  
   * **éš¾ç‚¹**ï¼š10Â¹â°èŒƒå›´ä¸‹ä¸¤æ•°ç›¸ä¹˜æ˜“æº¢å‡ºlong long  
   * **è§£å†³**ï¼š`if(1.0*a*b > 1e18)` æˆ– `__int128`  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæµ®ç‚¹ä¼°ç®—é˜²æº¢å‡ºæ˜¯ç«èµ›å¸¸ç”¨æŠ€å·§  

3. **å®¹æ–¥DFSå‰ªæ**  
   * **éš¾ç‚¹**ï¼šä¸åŠ ä¼˜åŒ–æ˜¯æŒ‡æ•°çº§å¤æ‚åº¦  
   * **è§£å†³**ï¼šé™åºæ’åº + åŠæ—¶ç»ˆæ­¢ï¼ˆLCM>bå³è¿”å›ï¼‰  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé—®é¢˜è§„æ¨¡å†³å®šæœç´¢é¡ºåºâ€”â€”å¤§æ•°ä¼˜å…ˆçªç ´è¾¹ç•Œ  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **åˆ†æ²»ä¼˜åŒ–**ï¼šåˆ†ç¦»å¤§æ•°ç‹¬ç«‹è®¡ç®—ï¼ŒåŒ–æ•´ä¸ºé›¶  
- **è¾¹ç•Œé¢„åˆ¤**ï¼š`b/num[i]`æ›¿ä»£ä¹˜æ³•é˜²æº¢å‡º  
- **è¯­ä¹‰åŒ–å‘½å**ï¼š`valid`/`small`æå‡ä»£ç å¯è¯»æ€§  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°**ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰ï¼š
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;
typedef long long ll;

void dfs(ll x, ll r, vector<ll>& nums) {
    if(x > r) return;
    if(x) nums.push_back(x);
    dfs(x*10+6, r, nums);
    dfs(x*10+8, r, nums);
}

int main() {
    ll a, b, ans = 0;
    cin >> a >> b;
    vector<ll> all, valid, big;
    dfs(0, b, all);
    sort(all.begin(), all.end());
    
    // å»é™¤å€æ•°å†—ä½™
    vector<bool> skip(all.size(), false);
    for(int i=0; i<all.size(); ++i) {
        if(!skip[i]) {
            valid.push_back(all[i]);
            for(int j=i+1; j<all.size(); ++j)
                if(all[j] % all[i] == 0) skip[j] = true;
        }
    }
    
    // åˆ†ç¦»å¤§æ•°
    for(auto x : valid) 
        if(x > b/2) big.push_back(x);
        else ans += b/x - (a-1)/x;
    
    // å®¹æ–¥DFS
    sort(valid.begin(), valid.end(), greater<ll>());
    function<void(int, ll, int)> dfs_cont = [&](int pos, ll lcm, int cnt) {
        if(lcm > b) return;
        if(pos == valid.size()) {
            if(cnt) ans += (cnt&1 ? 1 : -1) * (b/lcm - (a-1)/lcm);
            return;
        }
        dfs_cont(pos+1, lcm, cnt);
        ll new_lcm = lcm / __gcd(lcm, valid[pos]) * valid[pos];
        if(new_lcm <= b) dfs_cont(pos+1, new_lcm, cnt+1);
    };
    dfs_cont(0, 1, 0);
    cout << ans << endl;
}
```

**åˆ†é¢˜è§£èµæ**ï¼š
1. **yybyybç‰‡æ®µ**  
   ```cpp
   // åˆ†ç¦»>r/3çš„æ•°å­—
   for(int i=1; i<=tot; i++)
        if(!vis[i] && a[i]>r/3) 
            ret += r/a[i] - l/a[i];
   ```
   * **è§£è¯»**ï¼šç›´æ¥ç´¯åŠ å¤§æ•°è´¡çŒ®ï¼Œé¿å…DFSå†—ä½™é€’å½’  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†ç¦»é˜ˆå€¼é€‰æ‹©æ˜¯æ€§èƒ½å…³é”®ç‚¹  

2. **xyz32768ç‰‡æ®µ**  
   ```cpp
   // å€æ•°æ ‡è®°å»é‡
   for(int i=1; i<=tot; i++)
        for(int j=i+1; j<=tot; j++)
            if(a[j]%a[i]==0) mark[j]=1;
   ```
   * **è§£è¯»**ï¼šO(nÂ²)æ ‡è®°éç‹¬ç«‹æ•°å­—ï¼Œç±»ä¼¼åŸƒæ°ç­›  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‰ºç‰²æ—¶é—´æ¢æ¸…æ™°åº¦ï¼Œå°è§„æ¨¡æ•°æ®é€‚ç”¨  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
**ä¸»é¢˜**ï¼š"å¹¸è¿çŸ¿å·¥"8-bitå†’é™©  
**æ ¸å¿ƒæ¼”ç¤º**ï¼š  
1. **ç”Ÿæˆé˜¶æ®µ**ï¼š  
   - æ ‘çŠ¶å±•å¼€æ•°å­—ç”Ÿæˆï¼ˆ6/8åˆ†å‰ï¼‰ï¼Œæ–°æ•°å­—æ‰è½çŸ¿çŸ³éŸ³æ•ˆ  
   ![ç”Ÿæˆæ ‘](https://img.8btc.com/2023/03/8bit-tree.gif)  
2. **å»é‡é˜¶æ®µ**ï¼š  
   - è¢«æ ‡è®°æ•°å­—å˜ç°æ¶ˆå¤±ï¼ˆ"ç¢è£‚"éŸ³æ•ˆï¼‰ï¼Œä¿ç•™æœ€å°åŸºæ•°  
3. **å®¹æ–¥DFS**ï¼š  
   - çŸ¿å·¥æ²¿è·¯å¾„ç»„åˆæ•°å­—ï¼Œæ‰‹æŒLCMæŒ‡ç¤ºå™¨  
   - LCMè¶…ç•Œæ—¶è·¯å¾„å˜çº¢ï¼Œè§¦å‘"è­¦å‘Š"éŸ³æ•ˆ  
4. **åŠ¨æ€æ§åˆ¶**ï¼š  
   - é€Ÿåº¦æ»‘å—è°ƒèŠ‚å•æ­¥å»¶è¿Ÿï¼ˆ50ms-1000msï¼‰  
   - "AIæ¼”ç¤º"æ¨¡å¼è‡ªåŠ¨æ’­æ”¾å®Œæ•´æµç¨‹  

**æŠ€æœ¯å®ç°**ï¼š  
- Canvasç»˜åˆ¶ç½‘æ ¼+åƒç´ è§’è‰²  
- éŸ³æ•ˆè§¦å‘ï¼šWeb Audio APIæ’­æ”¾8-bitéŸ³æ•ˆåº“  
- æ•°æ®ç»“æ„å¯è§†åŒ–ï¼šé˜Ÿåˆ—/æ ˆç”¨åƒç´ æ–¹å—å †å   

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
1. **å®¹æ–¥åŸç†è¿ç§»**ï¼š  
   - [P2239] è®¡ç®—å™¨ï¼šåŸºç¡€å®¹æ–¥åº”ç”¨  
   - [P2568] GCDï¼šç´ æ•°ç»„åˆçš„å®¹æ–¥  
   - [SPOJ-COPRIME]ï¼šäº’è´¨æ•°ç»Ÿè®¡  

2. **æ´›è°·æ¨è**ï¼š  
   - **P1835** ç´ æ•°å¯†åº¦  
     * ğŸ—£ï¸ åŒºé—´ç­›æ³•+å®¹æ–¥ï¼Œå¼ºåŒ–åˆ†ç¦»ä¼˜åŒ–æ€æƒ³  
   - **P3328** åºåˆ—è®¡æ•°  
     * ğŸ—£ï¸ ç»„åˆæ•°å­¦+å®¹æ–¥ï¼Œæå‡æŠ½è±¡å»ºæ¨¡èƒ½åŠ›  
   - **P1891** å› å­æ¸¸æˆ  
     * ğŸ—£ï¸ å€æ•°å…³ç³»é€†å‘åº”ç”¨ï¼Œæ‹“å±•æ€ç»´ç»´åº¦  

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **yybyybç»éªŒ**ï¼š  
> *"åˆ†ç¦»>r/3çš„æ•°å­—è®©DFSå‡å°‘40%é€’å½’å±‚æ•°ï¼Œå…³é”®åœ¨äºé˜ˆå€¼é€‰æ‹©è¦ç»“åˆLCMå¢é•¿ç‰¹æ€§"*  
> **Kayç‚¹è¯„**ï¼š  
> æ€§èƒ½ä¼˜åŒ–éœ€ç»“åˆæ•°å­¦ç‰¹æ€§â€”â€”æœ¬é¢˜å› LCMè‡³å°‘3å€å¢é•¿ï¼Œr/3æ˜¯æœ€ä¼˜åˆ†ç¦»ç‚¹ã€‚è°ƒè¯•æ—¶å¯è¾“å‡ºé€’å½’æ¬¡æ•°éªŒè¯é˜ˆå€¼æœ‰æ•ˆæ€§ã€‚

> **è°ƒè¯•æŠ€å·§**ï¼š  
> è¾¹ç•Œå€¼æµ‹è¯•ï¼ˆa=1,b=1e10ï¼‰æš´éœ²æº¢å‡ºé—®é¢˜ï¼Œå»ºè®®ï¼š  
> 1. ç”¨`cout << "LCM:" << new_lcm`å®šä½æº¢å‡ºç‚¹  
> 2. æµ®ç‚¹ä¼°ç®—å‰ç½®åˆ¤æ–­ï¼š`if(1.0*a*b > 2e18) break`  

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æ·±å…¥æŒæ¡äº†å®¹æ–¥åŸç†çš„å®è·µåº”ç”¨ä¸ä¼˜åŒ–æ–¹æ³•ã€‚è®°ä½ï¼š**é—®é¢˜åˆ†è§£+æ•°å­¦ç‰¹æ€§åˆ©ç”¨=é«˜æ•ˆç®—æ³•**ï¼ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š173.06ç§’
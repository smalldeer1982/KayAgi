# é¢˜ç›®ä¿¡æ¯

# [USACO13NOV] Pogo-Cow S

## é¢˜ç›®æè¿°

In an ill-conceived attempt to enhance the mobility of his prize cow Bessie, Farmer John has attached a pogo stick to each of Bessie's legs. Bessie can now hop around quickly throughout the farm, but she has not yet learned how to slow down.

To help train Bessie to hop with greater control, Farmer John sets up a practice course for her along a straight one-dimensional path across his farm.  At various distinct positions on the path, he places N targets on which Bessie should try to land (1 <= N <= 1000).  Target i is located at position x(i), and is worth p(i) points if Bessie lands on it.  Bessie starts at the location of any target of her choosing and is allowed to move in only one direction, hopping from target to target.  Each hop must cover at least as much distance as the previous hop, and must land on a target.

Bessie receives credit for every target she touches (including the initial target on which she starts).  Please compute the maximum number of points she can obtain.

FJç»™å¥¶ç‰›è´è¥¿çš„è„šå®‰è£…ä¸Šäº†å¼¹ç°§ï¼Œä½¿å®ƒå¯ä»¥åœ¨å†œåœºé‡Œå¿«é€Ÿåœ°è·³è·ƒï¼Œä½†æ˜¯å®ƒè¿˜æ²¡æœ‰å­¦ä¼šå¦‚ä½•é™ä½é€Ÿåº¦ã€‚


FJè§‰å¾—è®©è´è¥¿åœ¨ä¸€æ¡ç›´çº¿çš„ä¸€ç»´çº¿è·¯ä¸Šè¿›è¡Œç»ƒä¹ ï¼Œä»–åœ¨ä¸åŒçš„ç›®æ ‡ç‚¹æ”¾ç½®äº†N (1 <= N <= 1000)ä¸ªç›®æ ‡ç‚¹ï¼Œç›®æ ‡ç‚¹iåœ¨ç›®æ ‡ç‚¹x(i)ï¼Œè¯¥ç‚¹å¾—åˆ†ä¸ºp(i)ã€‚è´è¥¿å¼€å§‹æ—¶å¯ä»¥é€‰æ‹©ç«™åœ¨ä¸€ä¸ªç›®æ ‡ç‚¹ä¸Šï¼Œåªå…è®¸æœä¸€ä¸ªæ–¹å‘è·³è·ƒï¼Œä»ä¸€ç›®æ ‡ç‚¹è·³åˆ°å¦å¤–ä¸€ä¸ªç›®æ ‡ç‚¹ï¼Œæ¯æ¬¡è·³è·ƒçš„è·ç¦»è‡³å°‘å’Œä¸Šä¸€æ¬¡è·³è·ƒçš„è·ç¦»ç›¸ç­‰ï¼Œå¹¶ä¸”å¿…é¡»è·³åˆ°ä¸€ä¸ªç›®æ ‡ç‚¹ã€‚


æ¯è·³åˆ°ä¸€ä¸ªç›®æ ‡ç‚¹ï¼Œè´è¥¿å¯ä»¥æ‹¿åˆ°è¯¥ç‚¹çš„å¾—åˆ†ï¼Œè¯·è®¡ç®—ä»–çš„æœ€å¤§å¯èƒ½å¾—åˆ†ã€‚


## è¯´æ˜/æç¤º

There are 6 targets.  The first is at position x=5 and is worth 6 points, and so on.


Bessie hops from position x=4 (8 points) to position x=5 (6 points) to position x=7 (6 points) to position x=10 (5 points).


## æ ·ä¾‹ #1

### è¾“å…¥

```
6 
5 6 
1 1 
10 5 
7 6 
4 8 
8 10 
```

### è¾“å‡º

```
25 
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO13NOV] Pogo-Cow S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰ä¸ä¼˜åŒ–


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œPogo-Cowâ€é—®é¢˜ï¼Œå…³é”®åœ¨äº**åŠ¨æ€è§„åˆ’**ï¼ˆDPï¼‰ã€‚å¯ä»¥æŠŠè´è¥¿çš„è·³è·ƒæ¯”ä½œâ€œçˆ¬æ¥¼æ¢¯â€â€”â€”æ¯ä¸€æ­¥éƒ½è¦è¸©åœ¨â€œæ¥¼æ¢¯â€ï¼ˆç›®æ ‡ç‚¹ï¼‰ä¸Šï¼Œä¸”æ¯ä¸€æ­¥çš„â€œè·¨åº¦â€ï¼ˆè·³è·ƒè·ç¦»ï¼‰ä¸èƒ½æ¯”å‰ä¸€æ­¥å°ã€‚DPçš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œç”¨å­é—®é¢˜çš„è§£æ¨å¯¼å¤§é—®é¢˜çš„è§£â€ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦è®°å½•â€œä»æŸä¸ªç‚¹è·³åˆ°å¦ä¸€ä¸ªç‚¹çš„æœ€å¤§å¾—åˆ†â€ï¼Œä»è€Œé€æ­¥ç®—å‡ºå…¨å±€æœ€å¤§å€¼ã€‚  

### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹
- **çŠ¶æ€å®šä¹‰**ï¼šç”¨`f[i][j]`è¡¨ç¤º**è´è¥¿è·³åˆ°ç¬¬iä¸ªç‚¹ï¼Œä¸”æœ€åä¸€æ­¥æ˜¯ä»ç¬¬jä¸ªç‚¹è·³è¿‡æ¥**çš„æœ€å¤§å¾—åˆ†ã€‚  
- **çŠ¶æ€è½¬ç§»**ï¼šè¦è®¡ç®—`f[i][j]`ï¼Œéœ€è¦æ‰¾åˆ°æ‰€æœ‰æ»¡è¶³â€œè·³è·ƒè·ç¦»ä¸å°äºå‰ä¸€æ¬¡â€çš„kç‚¹ï¼ˆå³`x(j)-x(k) â‰¤ x(i)-x(j)`ï¼‰ï¼Œå–`f[j][k]`çš„æœ€å¤§å€¼åŠ ä¸Šiç‚¹çš„å¾—åˆ†ã€‚  
- **ä¼˜åŒ–å…³é”®**ï¼šç›´æ¥æšä¸¾kä¼šå¯¼è‡´O(NÂ³)çš„æ—¶é—´å¤æ‚åº¦ï¼ˆN=1000æ—¶ï¼Œ1e9æ¬¡æ“ä½œä¼šè¶…æ—¶ï¼‰ï¼Œå› æ­¤éœ€è¦ç”¨**æ»‘åŠ¨çª—å£**æˆ–**åŒæŒ‡é’ˆ**ç»´æŠ¤åˆæ³•kçš„æœ€å¤§å€¼ï¼Œå°†å¤æ‚åº¦é™åˆ°O(NÂ²)ã€‚  
- **æ–¹å‘å¤„ç†**ï¼šè´è¥¿å¯ä»¥å‘å·¦æˆ–å‘å³è·³ï¼Œå› æ­¤éœ€è¦**æ­£åä¸¤æ¬¡DP**ï¼ˆå‘å³è·³ä¸€æ¬¡ï¼Œå‘å·¦è·³ä¸€æ¬¡ï¼Œå‘å·¦è·³æ—¶å¯ä»¥å°†æ•°ç»„åè½¬ï¼Œå¤ç”¨å‘å³è·³çš„é€»è¾‘ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯
ä¸ºäº†ç›´è§‚å±•ç¤ºDPè¿‡ç¨‹ï¼Œæˆ‘è®¾è®¡äº†**8ä½åƒç´ é£æ ¼çš„â€œè´è¥¿è·³è·ƒâ€åŠ¨ç”»**ï¼š  
- **åœºæ™¯**ï¼šä¸€ç»´ç›´çº¿ä¸Šçš„ç›®æ ‡ç‚¹ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼ˆæ¯”å¦‚çº¢è‰²ä»£è¡¨å½“å‰ç‚¹ï¼Œè“è‰²ä»£è¡¨å·²è®¿é—®ç‚¹ï¼‰ã€‚  
- **åŠ¨ç”»æ­¥éª¤**ï¼šè´è¥¿ä»æŸä¸ªç‚¹å‡ºå‘ï¼Œæ¯æ¬¡è·³è·ƒæ—¶ï¼Œç”¨ç®­å¤´æ ‡è®°è·³è·ƒè·¯å¾„ï¼ŒåŒæ—¶æ˜¾ç¤ºå½“å‰è·³è·ƒè·ç¦»å’Œç´¯è®¡å¾—åˆ†ã€‚  
- **çŠ¶æ€é«˜äº®**ï¼š`f[i][j]`çš„å€¼ç”¨æ•°å­—æ˜¾ç¤ºåœ¨iç‚¹ä¸Šæ–¹ï¼Œåˆæ³•çš„kç‚¹ç”¨é»„è‰²é—ªçƒæ ‡è®°ã€‚  
- **äº¤äº’æ§åˆ¶**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€æ­¥çœ‹è·³è·ƒè¿‡ç¨‹ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºï¼‰ï¼Œä»¥åŠâ€œé‡ç½®â€ï¼ˆé‡æ–°å¼€å§‹ï¼‰ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæ¯å®Œæˆä¸€æ¬¡æœ‰æ•ˆè·³è·ƒï¼Œæ’­æ”¾â€œå®â€çš„åƒç´ éŸ³æ•ˆï¼›è¾¾åˆ°æœ€å¤§å¾—åˆ†æ—¶ï¼Œæ˜¾ç¤ºâ€œèƒœåˆ©â€åŠ¨ç”»ï¼ˆæ¯”å¦‚åƒç´ çƒŸèŠ±ï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šgzw2005ï¼Œèµ34ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æ¸…æ™°æ€§**å’Œ**ä»£ç è§„èŒƒæ€§**éå¸¸çªå‡ºã€‚ä½œè€…å°†é—®é¢˜æ‹†åˆ†ä¸ºâ€œå‘å³è·³â€å’Œâ€œå‘å·¦è·³â€ä¸¤ä¸ªç‹¬ç«‹çš„DPè¿‡ç¨‹ï¼Œæ¯ä¸ªè¿‡ç¨‹éƒ½ç”¨äº†**æ»‘åŠ¨çª—å£ä¼˜åŒ–**ï¼ˆç”¨`now`å˜é‡ç»´æŠ¤åˆæ³•kçš„èŒƒå›´ï¼‰ï¼Œå°†æ—¶é—´å¤æ‚åº¦ä»O(NÂ³)é™åˆ°äº†O(NÂ²)ã€‚ä»£ç ä¸­çš„å˜é‡å‘½åï¼ˆå¦‚`x(i)`è¡¨ç¤ºç¬¬iç‚¹çš„ä½ç½®ï¼Œ`s(i)`è¡¨ç¤ºç¬¬iç‚¹çš„å¾—åˆ†ï¼‰éå¸¸ç›´è§‚ï¼Œè¾¹ç•Œå¤„ç†ï¼ˆå¦‚`f[j][j] = s(j)`è¡¨ç¤ºä»jç‚¹å‡ºå‘çš„åˆå§‹å¾—åˆ†ï¼‰ä¹Ÿå¾ˆä¸¥è°¨ã€‚  
  **äº®ç‚¹**ï¼šæ»‘åŠ¨çª—å£ä¼˜åŒ–çš„å·§å¦™åº”ç”¨â€”â€”é€šè¿‡`now`å˜é‡é€æ­¥æ‰©å±•åˆæ³•kçš„èŒƒå›´ï¼Œé¿å…äº†é‡å¤è®¡ç®—`f[j][k]`çš„æœ€å¤§å€¼ã€‚


### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šQwQcOrZï¼Œèµ14ï¼‰
* **ç‚¹è¯„**ï¼š  
  ä½œè€…ç”¨**åŒæŒ‡é’ˆ**ä¼˜åŒ–äº†çŠ¶æ€è½¬ç§»ï¼Œæ€è·¯éå¸¸å·§å¦™ã€‚é€šè¿‡å°†æ¡ä»¶`x(i)-x(j) â‰¥ x(j)-x(k)`ç§»é¡¹å¾—åˆ°`x(k) â‰¥ 2x(j)-x(i)`ï¼Œå‘ç°åˆæ³•çš„kæ˜¯ä¸€æ®µè¿ç»­çš„åŒºé—´ï¼Œä¸”éšç€jå¢å¤§ï¼ŒåŒºé—´ä¸‹ç•Œå•è°ƒé€’å¢ã€‚å› æ­¤å¯ä»¥ç”¨åŒæŒ‡é’ˆ`k`é€æ­¥ç§»åŠ¨ï¼Œç»´æŠ¤è¿™æ®µåŒºé—´å†…çš„æœ€å¤§å€¼ã€‚ä»£ç çš„**ç®—æ³•æœ‰æ•ˆæ€§**å¾ˆé«˜ï¼Œä¸”é€»è¾‘ç´§å‡‘ã€‚  
  **äº®ç‚¹**ï¼šåŒæŒ‡é’ˆä¸åç¼€æœ€å¤§å€¼çš„ç»“åˆâ€”â€”ç”¨åç¼€æ•°ç»„å­˜å‚¨`f[j][k]`çš„æœ€å¤§å€¼ï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚


### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼šrain_forestï¼Œèµ11ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**ä»£ç ç®€æ´æ€§**å€¼å¾—å­¦ä¹ ã€‚ä½œè€…æ²¡æœ‰ä½¿ç”¨å¤æ‚çš„æ•°æ®ç»“æ„ï¼ˆå¦‚å•è°ƒé˜Ÿåˆ—ï¼‰ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªå˜é‡`val`ç»´æŠ¤åˆæ³•kçš„æœ€å¤§å€¼ï¼Œç›´æ¥æ›´æ–°`f[i][j]`ã€‚è¿™ç§æ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†éå¸¸æœ‰æ•ˆï¼Œå°¤å…¶é€‚åˆåˆå­¦è€…ç†è§£ã€‚ä»£ç ä¸­çš„**æ–¹å‘å¤„ç†**ä¹Ÿå¾ˆèªæ˜ï¼ˆå‘å·¦è·³æ—¶åè½¬æ•°ç»„ï¼Œå¤ç”¨å‘å³è·³çš„é€»è¾‘ï¼‰ï¼Œå‡å°‘äº†ä»£ç å†—ä½™ã€‚  
  **äº®ç‚¹**ï¼šç”¨å˜é‡ç»´æŠ¤æœ€å¤§å€¼çš„ç®€å•ä¼˜åŒ–â€”â€”é¿å…äº†å•è°ƒé˜Ÿåˆ—çš„é¢å¤–å¼€é”€ï¼Œä»£ç æ›´æ˜“è¯»ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šçŠ¶æ€å®šä¹‰çš„å‡†ç¡®æ€§**  
**éš¾ç‚¹**ï¼šå¦‚ä½•ç”¨DPçŠ¶æ€è¡¨ç¤ºâ€œè·³è·ƒè·ç¦»ä¸å°äºå‰ä¸€æ¬¡â€çš„æ¡ä»¶ï¼Ÿ  
**åˆ†æ**ï¼š`f[i][j]`è¡¨ç¤ºâ€œè·³åˆ°iç‚¹ï¼Œæœ€åä¸€æ­¥ä»jç‚¹æ¥â€çš„æœ€å¤§å¾—åˆ†ï¼Œè¿™æ ·å¯ä»¥è‡ªç„¶åœ°å°†â€œå‰ä¸€æ¬¡è·³è·ƒè·ç¦»â€ï¼ˆ`x(j)-x(k)`ï¼‰ä¸â€œå½“å‰è·³è·ƒè·ç¦»â€ï¼ˆ`x(i)-x(j)`ï¼‰å…³è”èµ·æ¥ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€å®šä¹‰è¦**è¦†ç›–é—®é¢˜çš„æ ¸å¿ƒæ¡ä»¶**ï¼ˆå¦‚è·³è·ƒè·ç¦»çš„é™åˆ¶ï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ­£ç¡®æ¨å¯¼çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚


### 2. **å…³é”®ç‚¹2ï¼šçŠ¶æ€è½¬ç§»çš„ä¼˜åŒ–**  
**éš¾ç‚¹**ï¼šç›´æ¥æšä¸¾kä¼šå¯¼è‡´O(NÂ³)è¶…æ—¶ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ  
**åˆ†æ**ï¼šé€šè¿‡**æ»‘åŠ¨çª—å£**æˆ–**åŒæŒ‡é’ˆ**ç»´æŠ¤åˆæ³•kçš„èŒƒå›´ï¼Œå› ä¸ºéšç€iå¢å¤§ï¼Œåˆæ³•kçš„èŒƒå›´æ˜¯å•è°ƒæ‰©å±•çš„ï¼ˆæ¯”å¦‚å‘å³è·³æ—¶ï¼Œiè¶Šå¤§ï¼Œ`2x(j)-x(i)`è¶Šå°ï¼Œåˆæ³•kçš„æ•°é‡è¶Šå¤šï¼‰ã€‚è¿™æ ·å¯ä»¥å°†æ¯ä¸ªkçš„è®¿é—®æ¬¡æ•°æ§åˆ¶åœ¨O(1)ï¼Œæ€»å¤æ‚åº¦é™åˆ°O(NÂ²)ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯**å‘ç°çŠ¶æ€è½¬ç§»çš„å•è°ƒæ€§**ï¼ˆå¦‚åˆæ³•kçš„èŒƒå›´å•è°ƒå˜åŒ–ï¼‰ï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ã€‚


### 3. **å…³é”®ç‚¹3ï¼šå¤„ç†ä¸¤ä¸ªæ–¹å‘çš„è·³è·ƒ**  
**éš¾ç‚¹**ï¼šè´è¥¿å¯ä»¥å‘å·¦æˆ–å‘å³è·³ï¼Œå¦‚ä½•ç»Ÿä¸€å¤„ç†ï¼Ÿ  
**åˆ†æ**ï¼šå‘å·¦è·³æ—¶ï¼Œå¯ä»¥å°†æ•°ç»„**åè½¬**ï¼ˆæ¯”å¦‚å°†xåæ ‡ä¹˜ä»¥-1ï¼Œå†æ’åºï¼‰ï¼Œè¿™æ ·å‘å·¦è·³çš„é—®é¢˜å°±è½¬åŒ–ä¸ºå‘å³è·³çš„é—®é¢˜ï¼Œå¤ç”¨ä¹‹å‰çš„DPé€»è¾‘ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼š**é—®é¢˜è½¬åŒ–**æ˜¯è§£å†³å¯¹ç§°é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œèƒ½å‡å°‘ä»£ç å†—ä½™ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **çŠ¶æ€å®šä¹‰è¦ç²¾å‡†**ï¼šè¦†ç›–é—®é¢˜çš„æ ¸å¿ƒæ¡ä»¶ï¼ˆå¦‚è·³è·ƒè·ç¦»é™åˆ¶ï¼‰ã€‚  
- **åˆ©ç”¨å•è°ƒæ€§ä¼˜åŒ–**ï¼šé€šè¿‡æ»‘åŠ¨çª—å£æˆ–åŒæŒ‡é’ˆç»´æŠ¤åˆæ³•èŒƒå›´ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ã€‚  
- **é—®é¢˜è½¬åŒ–**ï¼šå¤„ç†å¯¹ç§°é—®é¢˜ï¼ˆå¦‚å·¦å³è·³ï¼‰æ—¶ï¼Œé€šè¿‡åè½¬æ•°ç»„å¤ç”¨é€»è¾‘ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆgzw2005çš„é¢˜è§£æ€è·¯ï¼Œå®ç°äº†å‘å³è·³å’Œå‘å·¦è·³çš„DPè¿‡ç¨‹ï¼Œç”¨æ»‘åŠ¨çª—å£ä¼˜åŒ–çŠ¶æ€è½¬ç§»ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <cstdio>
  #include <algorithm>
  using namespace std;
  
  struct Point { int x, s; } point[1002];
  int f[1002][1002], ans = 0;
  int N;
  
  bool cmp(Point a, Point b) { return a.x < b.x; }
  
  int main() {
      scanf("%d", &N);
      for (int i = 1; i <= N; ++i) {
          scanf("%d%d", &point[i].x, &point[i].s);
      }
      sort(point + 1, point + 1 + N, cmp);
      
      // å‘å³è·³çš„DP
      for (int j = 1; j <= N; ++j) {
          f[j][j] = point[j].s;
          for (int i = j + 1, now = j + 1; i <= N; ++i) {
              f[i][j] = f[i-1][j] - point[i-1].s; // ç»§æ‰¿å‰ä¸€æ¬¡çš„max
              while (now > 1 && point[j].x - point[now-1].x <= point[i].x - point[j].x) {
                  f[i][j] = max(f[i][j], f[j][--now]); // æ‰©å±•åˆæ³•kçš„èŒƒå›´
              }
              f[i][j] += point[i].s; // åŠ ä¸Šå½“å‰ç‚¹çš„å¾—åˆ†
              ans = max(ans, f[i][j]);
          }
      }
      
      // å‘å·¦è·³çš„DPï¼ˆåè½¬æ•°ç»„ï¼‰
      reverse(point + 1, point + 1 + N);
      for (int j = 1; j <= N; ++j) {
          f[j][j] = point[j].s;
          for (int i = j + 1, now = j + 1; i <= N; ++i) {
              f[i][j] = f[i-1][j] - point[i-1].s;
              while (now > 1 && point[j].x - point[now-1].x <= point[i].x - point[j].x) {
                  f[i][j] = max(f[i][j], f[j][--now]);
              }
              f[i][j] += point[i].s;
              ans = max(ans, f[i][j]);
          }
      }
      
      printf("%d\n", ans);
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š**å‘å³è·³**å’Œ**å‘å·¦è·³**ã€‚å‘å³è·³æ—¶ï¼Œå…ˆå°†ç‚¹æŒ‰xåæ ‡æ’åºï¼Œç„¶åæšä¸¾jï¼ˆå‰ä¸€ä¸ªç‚¹ï¼‰ï¼Œå†æšä¸¾iï¼ˆå½“å‰ç‚¹ï¼‰ï¼Œç”¨`now`å˜é‡ç»´æŠ¤åˆæ³•kçš„èŒƒå›´ï¼ˆå³ä»jç‚¹è·³åˆ°iç‚¹æ—¶ï¼Œå‰ä¸€æ¬¡è·³è·ƒçš„kç‚¹ï¼‰ã€‚å‘å·¦è·³æ—¶ï¼Œåè½¬æ•°ç»„ï¼Œå¤ç”¨å‘å³è·³çš„é€»è¾‘ã€‚


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šgzw2005ï¼‰
* **äº®ç‚¹**ï¼šæ»‘åŠ¨çª—å£ä¼˜åŒ–çš„æ ¸å¿ƒé€»è¾‘ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int j = 1; j <= N; ++j) {
      f[j][j] = point[j].s;
      for (int i = j + 1, now = j + 1; i <= N; ++i) {
          f[i][j] = f[i-1][j] - point[i-1].s; // ç»§æ‰¿å‰ä¸€æ¬¡çš„max
          while (now > 1 && point[j].x - point[now-1].x <= point[i].x - point[j].x) {
              f[i][j] = max(f[i][j], f[j][--now]); // æ‰©å±•åˆæ³•kçš„èŒƒå›´
          }
          f[i][j] += point[i].s; // åŠ ä¸Šå½“å‰ç‚¹çš„å¾—åˆ†
          ans = max(ans, f[i][j]);
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `j`è¡¨ç¤ºå‰ä¸€ä¸ªç‚¹ï¼Œ`i`è¡¨ç¤ºå½“å‰ç‚¹ã€‚  
  - `f[i-1][j] - point[i-1].s`ï¼šç»§æ‰¿`i-1`æ—¶çš„`f[i-1][j]`ï¼ˆå³ä»jç‚¹è·³åˆ°i-1ç‚¹çš„æœ€å¤§å¾—åˆ†ï¼‰ï¼Œå‡å»i-1ç‚¹çš„å¾—åˆ†ï¼ˆå› ä¸ºè¦è·³åˆ°iç‚¹ï¼Œæ‰€ä»¥i-1ç‚¹çš„å¾—åˆ†ä¸éœ€è¦ï¼‰ã€‚  
  - `while`å¾ªç¯ï¼šæ‰©å±•åˆæ³•kçš„èŒƒå›´ï¼ˆ`now`ä»j+1å¼€å§‹ï¼Œé€æ­¥å‡å°ï¼Œç›´åˆ°`point[j].x - point[now-1].x <= point[i].x - point[j]`ï¼‰ï¼Œå–`f[j][now]`çš„æœ€å¤§å€¼ã€‚  
  - `f[i][j] += point[i].s`ï¼šåŠ ä¸Šå½“å‰ç‚¹içš„å¾—åˆ†ï¼Œå¾—åˆ°ä»jç‚¹è·³åˆ°iç‚¹çš„æœ€å¤§å¾—åˆ†ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šæ»‘åŠ¨çª—å£çš„æ ¸å¿ƒæ˜¯**ç»´æŠ¤åˆæ³•èŒƒå›´çš„å•è°ƒæ€§**ï¼Œè¿™é‡Œ`now`åªä¼šå‡å°ï¼Œä¸ä¼šå›æº¯ï¼Œå› æ­¤æ¯ä¸ªkåªä¼šè¢«è®¿é—®ä¸€æ¬¡ã€‚


#### é¢˜è§£äºŒï¼ˆæ¥æºï¼šQwQcOrZï¼‰
* **äº®ç‚¹**ï¼šåŒæŒ‡é’ˆä¸åç¼€æœ€å¤§å€¼çš„ç»“åˆã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 2; i <= n; ++i) {
      dp[i][i] = a[i].y;
      for (int j = 1, k = 1; j < i; ++j) {
          while (k < j && a[k].x < 2*a[j].x - a[i].x) k++;
          dp[i][j] = dp[j][k] + a[i].y;
      }
      for (int j = i; j >= 2; --j) dp[i][j-1] = max(dp[i][j-1], dp[i][j]);
      ans = max(ans, dp[i][1]);
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `k`æ˜¯åŒæŒ‡é’ˆï¼Œç»´æŠ¤åˆæ³•kçš„ä¸‹ç•Œï¼ˆ`a[k].x >= 2*a[j].x - a[i].x`ï¼‰ã€‚  
  - `dp[j][k]`ï¼šè¡¨ç¤ºä»kç‚¹è·³åˆ°jç‚¹çš„æœ€å¤§å¾—åˆ†ï¼ŒåŠ ä¸Šiç‚¹çš„å¾—åˆ†ï¼Œå¾—åˆ°ä»jç‚¹è·³åˆ°iç‚¹çš„æœ€å¤§å¾—åˆ†ã€‚  
  - åç¼€æœ€å¤§å€¼å¾ªç¯ï¼šå°†`dp[i][j]`çš„æœ€å¤§å€¼ä¼ é€’ç»™`dp[i][j-1]`ï¼Œæ–¹ä¾¿åç»­æŸ¥è¯¢ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šåŒæŒ‡é’ˆçš„æ ¸å¿ƒæ˜¯**æ¡ä»¶çš„å•è°ƒæ€§**ï¼ˆ`2*a[j].x - a[i].x`éšjå¢å¤§è€Œå¢å¤§ï¼‰ï¼Œå› æ­¤kåªä¼šå‘å³ç§»åŠ¨ï¼Œä¸ä¼šå›æº¯ã€‚


#### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šrain_forestï¼‰
* **äº®ç‚¹**ï¼šç”¨å˜é‡ç»´æŠ¤æœ€å¤§å€¼çš„ç®€å•ä¼˜åŒ–ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int j = 1; j <= n; ++j) {
      for (int i = j+1; i <= n; ++i) {
          int k = j, val = 0;
          while (k >= 1 && a[j].x - a[k].x <= a[i].x - a[j].x) {
              val = max(val, f[j][k] + a[i].p);
              k--;
          }
          f[i][j] = val;
          ans = max(ans, val);
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `val`å˜é‡ç»´æŠ¤åˆæ³•kçš„æœ€å¤§å€¼ï¼ˆ`f[j][k] + a[i].p`ï¼‰ã€‚  
  - `while`å¾ªç¯ï¼šä»jç‚¹å¼€å§‹ï¼Œé€æ­¥å‡å°kï¼Œç›´åˆ°`a[j].x - a[k].x <= a[i].x - a[j].x`ï¼Œæ›´æ–°`val`ã€‚  
  - `f[i][j] = val`ï¼šå¾—åˆ°ä»jç‚¹è·³åˆ°iç‚¹çš„æœ€å¤§å¾—åˆ†ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šå½“åˆæ³•kçš„èŒƒå›´æ˜¯è¿ç»­çš„ï¼Œä¸”ä¸éœ€è¦é¢‘ç¹æŸ¥è¯¢æœ€å¤§å€¼æ—¶ï¼Œç”¨å˜é‡ç»´æŠ¤æœ€å¤§å€¼æ˜¯æœ€ç®€å•çš„ä¼˜åŒ–æ–¹å¼ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š**åƒç´ è´è¥¿çš„è·³è·ƒå†’é™©**ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
- **åœºæ™¯åˆå§‹åŒ–**ï¼šä¸€ç»´ç›´çº¿ä¸Šçš„ç›®æ ‡ç‚¹ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼ˆæ¯”å¦‚ç»¿è‰²ä»£è¡¨æœªè®¿é—®ï¼Œçº¢è‰²ä»£è¡¨å½“å‰ç‚¹ï¼Œè“è‰²ä»£è¡¨å·²è®¿é—®ï¼‰ï¼Œåº•éƒ¨æ˜¾ç¤ºæ§åˆ¶é¢æ¿ï¼ˆå•æ­¥ã€è‡ªåŠ¨æ’­æ”¾ã€é‡ç½®ï¼‰ã€‚  
- **è´è¥¿å‡ºå‘**ï¼šéšæœºé€‰æ‹©ä¸€ä¸ªèµ·ç‚¹ï¼ˆæ¯”å¦‚x=4ï¼Œå¾—åˆ†8ï¼‰ï¼Œç”¨é»„è‰²åƒç´ å—æ ‡è®°ï¼Œæ˜¾ç¤ºâ€œå½“å‰å¾—åˆ†ï¼š8â€ã€‚  
- **è·³è·ƒè¿‡ç¨‹**ï¼š  
  1. è´è¥¿ä»jç‚¹ï¼ˆæ¯”å¦‚x=4ï¼‰è·³åˆ°iç‚¹ï¼ˆæ¯”å¦‚x=5ï¼‰ï¼Œè·³è·ƒè·ç¦»ä¸º1ï¼Œç”¨æ©™è‰²ç®­å¤´æ ‡è®°è·¯å¾„ï¼Œæ˜¾ç¤ºâ€œè·³è·ƒè·ç¦»ï¼š1â€ã€‚  
  2. è®¡ç®—`f[i][j]`ï¼ˆæ¯”å¦‚`f[5][4] = f[4][k] + 6`ï¼Œkæ˜¯åˆæ³•ç‚¹ï¼‰ï¼Œç”¨æ•°å­—æ˜¾ç¤º`f[5][4]`çš„å€¼ï¼ˆæ¯”å¦‚14ï¼‰ã€‚  
  3. åˆæ³•kç‚¹ï¼ˆæ¯”å¦‚k=4ï¼‰ç”¨é»„è‰²é—ªçƒæ ‡è®°ï¼Œæ˜¾ç¤ºâ€œåˆæ³•kï¼š4â€ã€‚  
- **æ–¹å‘åˆ‡æ¢**ï¼šå‘å³è·³ç»“æŸåï¼Œåè½¬æ•°ç»„ï¼Œæ¼”ç¤ºå‘å·¦è·³çš„è¿‡ç¨‹ï¼ˆæ¯”å¦‚ä»x=10è·³åˆ°x=7ï¼Œè·³è·ƒè·ç¦»3ï¼‰ã€‚  
- **èƒœåˆ©åŠ¨ç”»**ï¼šå½“è¾¾åˆ°æœ€å¤§å¾—åˆ†ï¼ˆæ¯”å¦‚25ï¼‰æ—¶ï¼Œæ˜¾ç¤ºåƒç´ çƒŸèŠ±ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆ8ä½é£æ ¼ï¼‰ã€‚


### äº¤äº’ä¸æ§åˆ¶
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€æŒ‰é’®ï¼Œè´è¥¿è·³ä¸€æ­¥ï¼Œæ˜¾ç¤ºå½“å‰æ­¥éª¤çš„è¯¦ç»†ä¿¡æ¯ï¼ˆè·³è·ƒè·ç¦»ã€å¾—åˆ†å˜åŒ–ï¼‰ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼Œè´è¥¿è‡ªåŠ¨è·³è·ƒï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒèŠ‚ï¼ˆæ¯”å¦‚1xã€2xã€3xï¼‰ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°é€‰æ‹©èµ·ç‚¹ã€‚


### è®¾è®¡æ€è·¯
- **åƒç´ é£æ ¼**ï¼šæ¨¡æ‹ŸFCçº¢ç™½æœºçš„ç”»é¢ï¼Œè®©å­¦ä¹ è€…æ„Ÿåˆ°äº²åˆ‡ï¼Œé™ä½å­¦ä¹ å‹åŠ›ã€‚  
- **çŠ¶æ€é«˜äº®**ï¼šç”¨é¢œè‰²æ ‡è®°å½“å‰ç‚¹ã€å·²è®¿é—®ç‚¹å’Œåˆæ³•kç‚¹ï¼Œç›´è§‚å±•ç¤ºDPçŠ¶æ€çš„å˜åŒ–ã€‚  
- **éŸ³æ•ˆæç¤º**ï¼šæ¯å®Œæˆä¸€æ¬¡è·³è·ƒï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›è¾¾åˆ°æœ€å¤§å¾—åˆ†æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œå¼ºåŒ–è®°å¿†ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šå°†è·³è·ƒè¿‡ç¨‹è®¾è®¡ä¸ºâ€œå…³å¡â€ï¼ˆæ¯”å¦‚å®Œæˆ5æ¬¡è·³è·ƒä¸ºä¸€å…³ï¼‰ï¼Œå®Œæˆå…³å¡åæ˜¾ç¤ºâ€œé€šå…³â€æç¤ºï¼Œå¢åŠ è¶£å‘³æ€§ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»
- **åŠ¨æ€è§„åˆ’ä¼˜åŒ–**ï¼šæœ¬é¢˜çš„æ»‘åŠ¨çª—å£ã€åŒæŒ‡é’ˆä¼˜åŒ–æŠ€å·§ï¼Œå¯ç”¨äºè§£å†³**æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLISï¼‰**ã€**æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰**ç­‰é—®é¢˜çš„å˜å½¢ã€‚  
- **å¯¹ç§°é—®é¢˜å¤„ç†**ï¼šå‘å·¦è·³ä¸å‘å³è·³çš„å¯¹ç§°å¤„ç†ï¼Œå¯ç”¨äºè§£å†³**å›æ–‡ä¸²**ã€**é•œåƒé—®é¢˜**ç­‰ã€‚  
- **çŠ¶æ€å®šä¹‰**ï¼š`f[i][j]`è¡¨ç¤ºâ€œä»jåˆ°iâ€çš„æœ€å¤§å¾—åˆ†ï¼Œè¿™ç§çŠ¶æ€å®šä¹‰å¯ç”¨äºè§£å†³**è·¯å¾„é—®é¢˜**ï¼ˆæ¯”å¦‚æœ€çŸ­è·¯å¾„ã€æœ€é•¿è·¯å¾„ï¼‰ã€‚


### ç»ƒä¹ æ¨è (æ´›è°·)
1. **æ´›è°· P1020 å¯¼å¼¹æ‹¦æˆª**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯**æœ€é•¿éé€’å¢å­åºåˆ—**çš„å˜å½¢ï¼Œéœ€è¦ç”¨ç±»ä¼¼çš„DPä¼˜åŒ–æŠ€å·§ï¼ˆæ¯”å¦‚è´ªå¿ƒ+äºŒåˆ†ï¼‰ï¼Œèƒ½å¸®åŠ©ä½ å·©å›ºâ€œçŠ¶æ€è½¬ç§»ä¼˜åŒ–â€çš„æ€è·¯ã€‚  
2. **æ´›è°· P1280 å°¼å…‹çš„ä»»åŠ¡**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯**åŒºé—´DP**çš„ç»å…¸é—®é¢˜ï¼Œéœ€è¦å¤„ç†â€œä»»åŠ¡å®‰æ’â€çš„æ—¶é—´é™åˆ¶ï¼Œèƒ½å¸®åŠ©ä½ ç†è§£â€œçŠ¶æ€å®šä¹‰çš„å‡†ç¡®æ€§â€ã€‚  
3. **æ´›è°· P2501 [HAOI2006]æ•°å­—åºåˆ—**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯**DPä¼˜åŒ–**çš„è¿›é˜¶é—®é¢˜ï¼Œéœ€è¦ç”¨**å•è°ƒé˜Ÿåˆ—**æˆ–**çº¿æ®µæ ‘**ç»´æŠ¤æœ€å¤§å€¼ï¼Œèƒ½å¸®åŠ©ä½ æ‹“å±•â€œä¼˜åŒ–æŠ€å·§â€çš„åº”ç”¨ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª Zxsoul)
> â€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆç”¨äº†æ ‡å‡†çš„O(NÂ³)ä¸‰é‡å¾ªç¯ï¼Œç»“æœè¶…æ—¶äº†ã€‚åæ¥æˆ‘æ”¹å˜äº†æšä¸¾é¡ºåºï¼ˆæŠŠjæ”¾åœ¨æœ€å¤–å±‚ï¼‰ï¼Œåˆ©ç”¨ç¼“å­˜æœºåˆ¶åŠ å¿«äº†è®¿é—®é€Ÿåº¦ï¼Œå±…ç„¶ACäº†ï¼è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œ**æšä¸¾é¡ºåºçš„ä¼˜åŒ–**ä¹Ÿèƒ½å¤§å¹…æå‡ç¨‹åºæ•ˆç‡ã€‚â€

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒéå¸¸å…¸å‹ã€‚åœ¨C++ä¸­ï¼ŒäºŒç»´æ•°ç»„çš„å­˜å‚¨æ–¹å¼æ˜¯â€œè¡Œä¼˜å…ˆâ€ï¼ˆå³`f[i][j]`çš„å­˜å‚¨é¡ºåºæ˜¯`f[0][0]`, `f[0][1]`, ..., `f[1][0]`, `f[1][1]`, ...ï¼‰ã€‚å½“jæ”¾åœ¨æœ€å¤–å±‚æ—¶ï¼Œ`f[j][k]`çš„è®¿é—®æ˜¯è¿ç»­çš„ï¼Œèƒ½å……åˆ†åˆ©ç”¨ç¼“å­˜ï¼Œå‡å°‘å†…å­˜è®¿é—®æ—¶é—´ã€‚è¿™æé†’æˆ‘ä»¬ï¼Œ**ä»£ç çš„ç»†èŠ‚ï¼ˆå¦‚æšä¸¾é¡ºåºï¼‰ä¹Ÿä¼šå½±å“ç¨‹åºæ•ˆç‡**ã€‚


## ç»“è¯­
æœ¬æ¬¡å…³äºâ€œPogo-Cowâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³ï¼ŒæŒæ¡ä¼˜åŒ–æŠ€å·§ï¼Œå¹¶ä¸”åœ¨æ¸¸æˆåŒ–çš„åŠ¨ç”»ä¸­æ„Ÿå—åˆ°ç¼–ç¨‹çš„ä¹è¶£ã€‚è®°ä½ï¼Œ**ç¼–ç¨‹çš„æœ¬è´¨æ˜¯è§£å†³é—®é¢˜**ï¼Œåªè¦å¤šæ€è€ƒã€å¤šç»ƒä¹ ï¼Œä½ ä¸€å®šèƒ½æˆä¸ºä¼˜ç§€çš„ç¨‹åºå‘˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š190.85ç§’
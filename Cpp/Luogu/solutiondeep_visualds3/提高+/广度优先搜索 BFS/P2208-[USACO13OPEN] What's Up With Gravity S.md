# é¢˜ç›®ä¿¡æ¯

# [USACO13OPEN] What's Up With Gravity S

## é¢˜ç›®æè¿°

Captain Bovidian is on an adventure to rescue her crew member, Doctor Beefalo.  Like all great adventures, this story plays out in a two dimensional N by M grid (1 <= N, M <= 500), representing a side view of the captain's world.  Some grid cells are empty while others are blocked and cannot be traversed.

Unfortunately, Captain Bovidian cannot jump.  She must obey the following rules of physics while traversing her world.

1) If there is no cell directly underneath Captain Bovidian (that is, if she is at the edge of the grid), then she flies out into space and fails her mission.

2) If the cell directly underneath Captain Bovidian is empty, then she falls into that cell.

3) Otherwise:

a) Captain Bovidian may move left or right if the corresponding cell exists and is empty.

b) Or, Captain Bovidian may flip the direction of gravity.

When Captain Bovidian changes the direction of gravity, the cell that's 'underneath' her (as mentioned in rules 1 and 2) toggles between the cell with one higher row index and the cell with one lower row index (the first row in the input has index 1, and the last row has index N). Initially, the cells with one higher row index are underneath Captain Bovidian.

Doctor Beefalo is lost somewhere in this world.  Help Captain Bovidian arrive at her cell using the least number of gravity flips as possible.  If it is impossible to reach Doctor Beefalo, please output -1.


Bovidian èˆ¹é•¿æ­£åœ¨æ‹¯æ•‘å¥¹çš„èˆ¹å‘˜ï¼ŒBeefalo åšå£«ã€‚

å’Œæ‰€æœ‰ä¼Ÿå¤§çš„å†’é™©æ•…äº‹ä¸€æ ·ï¼Œè¿™ä¸ªæ•…äº‹ä¹Ÿæ˜¯å‘ç”Ÿåœ¨ä¸€ä¸ª2Då¹³é¢ä¸Šçš„ã€‚å›§

è¿™ä¸ªå¹³é¢æ˜¯M\*Nçš„æ ¼å­ç»„æˆçš„ç½‘æ ¼ï¼Œä»£è¡¨ç€èˆ¹é•¿çš„ä¸–ç•Œçš„ä¸€ä¸ªä¾§è§†å›¾ã€‚

æœ‰äº›æ ¼å­æ˜¯ç©ºçš„ï¼Œå¦ä¸€äº›åˆ™æ˜¯å®å¿ƒçš„ï¼Œå¹¶ä¸”ä¸èƒ½ç›´æ¥é€šè¿‡ã€‚

å¾ˆä¸å¹¸çš„æ˜¯ï¼Œèˆ¹é•¿è·³ä¸èµ·æ¥ã€‚å¥¹å¿…é¡»éµå®ˆè¿™ä¸ªä¸–ç•Œçš„ç‰¹æ®Šç‰©ç†æ³•åˆ™ã€‚

1ï¼‰å¦‚æœèˆ¹é•¿çš„æ­£ä¸‹æ–¹æ²¡æœ‰æ–¹å—ï¼ˆæ¢å¥è¯è¯´ï¼Œå³ä½¿å¥¹æ­£åœ¨ç½‘æ ¼çš„è¾¹ç¼˜ï¼‰ï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæ‰å…¥å®‡å®™ä¸­ï¼ŒåŒæ—¶æ„å‘³ç€å†’é™©å¤±è´¥ã€‚

2ï¼‰å¦‚æœèˆ¹é•¿çš„æ­£ä¸‹æ–¹çš„æ–¹å—æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæ‰åˆ°è¿™ä¸ªæ–¹å—ï¼Œ

3ï¼‰åœ¨ä¸æ»¡è¶³1ï¼‰ä¸2ï¼‰çš„æƒ…å†µä¸‹ï¼Œèˆ¹é•¿å¯ä»¥åšä¸€ä¸‹çš„äº‹æƒ…ï¼š

a) å¦‚æœå·¦è¾¹(æˆ–å³è¾¹ï¼‰çš„æ–¹æ ¼æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå¥¹å¯ä»¥èµ°åˆ°é‚£ä¸ªæ ¼å­ã€‚

bèˆ¹é•¿å¯ä»¥ç¿»è½¬é‡åŠ›çš„æ–¹å‘

å½“èˆ¹é•¿æ”¹å˜ç¿»è½¬é‡åŠ›çš„æ–¹å‘æ—¶ï¼Œæˆ‘ä»¬å°±æ”¹å˜èˆ¹é•¿â€ä¸‹æ–¹â€œçš„å®šä¹‰ã€‚

â€ä¸‹æ–¹â€œçš„å®šä¹‰åªèƒ½æ˜¯ä¸¤ç§

(A)æ¯”èˆ¹é•¿ä½ç½®æ‰€åœ¨çš„æ–¹æ ¼çš„åˆ—ç¼–å·æ›´å¤§çš„æ ¼å­ï¼Œ

(B)æ¯”èˆ¹é•¿ä½ç½®æ‰€åœ¨çš„æ–¹æ ¼çš„åˆ—ç¼–å·æ›´å°çš„æ ¼å­,

ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œâ€œä¸‹æ–¹â€çš„å®šä¹‰æ˜¯æ¯”èˆ¹é•¿ä½ç½®æ‰€åœ¨æ–¹æ ¼çš„åˆ—ç¼–å·æ›´å¤§çš„æ ¼å­ã€‚

Beefaloåšå£«æ­£è¿·å¤±åœ¨è¿™ä¸ªä¸–ç•Œä¸­çš„æŸä¸€å¤„ï¼Œè¯·å¸®åŠ©èˆ¹é•¿ä»èµ·ç‚¹åˆ°è¾¾åšå£«çš„åœ°æ–¹ã€‚

å¦‚æœå¯ä»¥åˆ°è¾¾ï¼Œè¯·è¾“å‡ºæœ€å°‘éœ€è¦çš„ç¿»è½¬é‡åŠ›çš„æ¬¡æ•°ã€‚


å¦‚æœä¸å¯ä»¥åˆ°è¾¾ï¼Œè¯·è¾“å‡º-1


## è¯´æ˜/æç¤º

è¾“å‡ºè§£é‡Šï¼š

é¦–å…ˆï¼Œèˆ¹é•¿åœ¨ï¼ˆ4,2ï¼‰ï¼Œæ¥ç€å¥¹ç¿»è½¬é‡åŠ›ï¼Œåˆ°è¾¾ï¼ˆ2,2ï¼‰

æ¥ç€å¥¹å‘å³èµ°èµ°åˆ°ï¼ˆ2,4ï¼‰ï¼Œæ¥ç€å¥¹ç¬¬äºŒæ¬¡ç¿»è½¬é‡åŠ›ï¼Œåˆ°è¾¾ï¼ˆ4,4ï¼‰

ç„¶åå¥¹ç»§ç»­å‘å³èµ°åˆ°ï¼ˆ4,5ï¼‰ï¼Œæœ€ååœ¨ç¿»è½¬ä¸€æ¬¡é‡åŠ›ï¼Œåˆ°è¾¾åšå£«æ‰€åœ¨çš„ï¼ˆ3,5ï¼‰


## æ ·ä¾‹ #1

### è¾“å…¥

```
5 5
#####
#...#
#...D
#C...
##.##```

### è¾“å‡º

```
3```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO13OPEN] What's Up With Gravity S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆåˆ†å±‚å›¾æœ€çŸ­è·¯ï¼‰ã€0-1 BFSï¼ˆåŒç«¯é˜Ÿåˆ—å¹¿æœï¼‰


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**å¯»æ‰¾æœ€å°‘é‡åŠ›ç¿»è½¬æ¬¡æ•°**ï¼Œæœ¬è´¨æ˜¯**å¸¦æƒæœ€çŸ­è·¯é—®é¢˜**â€”â€”ç¿»è½¬é‡åŠ›çš„ä»£ä»·ä¸º1ï¼Œå·¦å³ç§»åŠ¨å’Œä¸‹è½çš„ä»£ä»·ä¸º0ã€‚æˆ‘ä»¬éœ€è¦å°†â€œé‡åŠ›æ–¹å‘â€ä½œä¸ºçŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼Œæ„å»º**åˆ†å±‚å›¾æ¨¡å‹**ï¼š  
- **å±‚0**ï¼šé‡åŠ›å‘ä¸‹ï¼ˆåˆå§‹çŠ¶æ€ï¼Œâ€œä¸‹æ–¹â€æ˜¯è¡Œå·æ›´å¤§çš„æ ¼å­ï¼‰ï¼›  
- **å±‚1**ï¼šé‡åŠ›å‘ä¸Šï¼ˆç¿»è½¬åï¼Œâ€œä¸‹æ–¹â€æ˜¯è¡Œå·æ›´å°çš„æ ¼å­ï¼‰ã€‚  

æ¯ä¸ªæ ¼å­åœ¨ä¸¤ä¸ªå±‚ä¸­éƒ½æœ‰å¯¹åº”çš„èŠ‚ç‚¹ï¼Œ**å±‚å†…è¾¹**ï¼ˆå·¦å³ç§»åŠ¨ã€ä¸‹è½ï¼‰æƒå€¼ä¸º0ï¼Œ**å±‚é—´è¾¹**ï¼ˆç¿»è½¬é‡åŠ›ï¼‰æƒå€¼ä¸º1ã€‚è§£å†³è¿™ç±»0-1æƒå€¼çš„æœ€çŸ­è·¯é—®é¢˜ï¼Œ**SPFA**ï¼ˆé˜Ÿåˆ—ä¼˜åŒ–çš„Bellman-Fordï¼‰æˆ–**0-1 BFS**ï¼ˆåŒç«¯é˜Ÿåˆ—ä¼˜åŒ–çš„BFSï¼‰éƒ½æ˜¯æœ‰æ•ˆçš„æ–¹æ³•ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼š  
1. **çŠ¶æ€è¡¨ç¤º**ï¼šå¿…é¡»åŒ…å«é‡åŠ›æ–¹å‘ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®æ¨¡æ‹Ÿç¿»è½¬åçš„ä¸‹è½è¿‡ç¨‹ï¼›  
2. **ä¸‹è½æ¨¡æ‹Ÿ**ï¼šèˆ¹é•¿ä¼šä¸€ç›´ä¸‹è½ç›´åˆ°ç¢°åˆ°éšœç¢ç‰©ï¼Œè¿™ä¸€æ­¥éœ€è¦â€œä¸€æ¬¡æ€§å¤„ç†â€ï¼Œä¸èƒ½åˆ†æ­¥èµ°ï¼›  
3. **æœ€çŸ­è·¯ç®—æ³•é€‰æ‹©**ï¼š0-1 BFSæ¯”SPFAæ›´é«˜æ•ˆï¼ˆæ—¶é—´å¤æ‚åº¦O(N*M)ï¼‰ï¼Œå› ä¸ºè¾¹æƒåªæœ‰0å’Œ1ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºç½‘æ ¼ï¼Œèˆ¹é•¿ç”¨**çº¢è‰²æ–¹å—**è¡¨ç¤ºï¼Œé‡åŠ›æ–¹å‘ç”¨**ç®­å¤´**ï¼ˆå‘ä¸‹â†’çº¢è‰²ï¼Œå‘ä¸Šâ†’è“è‰²ï¼‰æ ‡è®°ã€‚ä¸‹è½è¿‡ç¨‹ç”¨**è¿ç»­ç§»åŠ¨åŠ¨ç”»**å±•ç¤ºï¼Œç¿»è½¬é‡åŠ›æ—¶ç®­å¤´**æ—‹è½¬180åº¦**å¹¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚å…³é”®æ­¥éª¤ï¼ˆå¦‚åˆ°è¾¾Dç‚¹ï¼‰ç”¨**é—ªçƒæ•ˆæœ**å’Œâ€œèƒœåˆ©â€éŸ³æ•ˆå¼ºåŒ–ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šåˆ†å±‚å›¾SPFAï¼ˆä½œè€…ï¼šAdoveï¼Œèµï¼š8ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**åˆ†å±‚å›¾æ¨¡å‹**éå¸¸æ¸…æ™°ï¼Œå°†é‡åŠ›æ–¹å‘è½¬åŒ–ä¸ºâ€œå±‚â€ï¼Œé€šè¿‡`get(i,j)`å‡½æ•°å°†åæ ‡æ˜ å°„ä¸ºèŠ‚ç‚¹ç¼–å·ï¼ˆå±‚0ï¼š`(i-1)*m+j`ï¼Œå±‚1ï¼š`(i-1)*m+j + n*m`ï¼‰ã€‚è¾¹çš„æ·»åŠ é€»è¾‘ä¸¥æ ¼éµå¾ªé¢˜ç›®è§„åˆ™ï¼š  
  - ä¸‹è½ï¼šå±‚å†…è¾¹ï¼Œæƒ0ï¼›  
  - å·¦å³ç§»åŠ¨ï¼šå±‚å†…è¾¹ï¼Œæƒ0ï¼›  
  - ç¿»è½¬é‡åŠ›ï¼šå±‚é—´è¾¹ï¼Œæƒ1ã€‚  
  SPFAçš„å®ç°è§„èŒƒï¼Œç”¨é˜Ÿåˆ—å¤„ç†èŠ‚ç‚¹æ¾å¼›ï¼Œæœ€ç»ˆå–å±‚0å’Œå±‚1ä¸­Dç‚¹çš„æœ€å°è·ç¦»ã€‚ä»£ç å¯è¯»æ€§é«˜ï¼Œå˜é‡å‘½åï¼ˆå¦‚`ln`è¡¨ç¤ºè·ç¦»ï¼Œ`vis`è¡¨ç¤ºæ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ï¼‰ç¬¦åˆå¸¸è§„ä¹ æƒ¯ï¼Œæ˜¯åˆ†å±‚å›¾æœ€çŸ­è·¯çš„å…¸å‹å®ç°ã€‚


### é¢˜è§£äºŒï¼š0-1 BFSï¼ˆåŒç«¯é˜Ÿåˆ—ä¼˜åŒ–ï¼Œä½œè€…ï¼šä¿ºæ˜¯å°ç¨‹ï¼Œèµï¼š0ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„**0-1 BFS**æ€è·¯éå¸¸å·§å¦™ï¼Œè§£å†³äº†è¾¹æƒ0å’Œ1çš„å•è°ƒæ€§é—®é¢˜ã€‚ç”¨`deque`ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰å­˜å‚¨çŠ¶æ€ï¼š  
  - æƒ0çš„è¾¹ï¼ˆå·¦å³ç§»åŠ¨ã€ä¸‹è½ï¼‰å¯¹åº”çš„çŠ¶æ€**å…¥é˜Ÿå¤´**ï¼ˆä¼˜å…ˆå¤„ç†ï¼Œä¿è¯è·ç¦»æœ€å°ï¼‰ï¼›  
  - æƒ1çš„è¾¹ï¼ˆç¿»è½¬é‡åŠ›ï¼‰å¯¹åº”çš„çŠ¶æ€**å…¥é˜Ÿå°¾**ï¼ˆåå¤„ç†ï¼‰ã€‚  
  çŠ¶æ€ç»“æ„ä½“`state`åŒ…å«åæ ‡ã€ç¿»è½¬æ¬¡æ•°ã€é‡åŠ›æ–¹å‘ï¼Œ`Hash`å‡½æ•°ç”¨äºåˆ¤é‡ï¼ˆé¿å…é‡å¤è®¿é—®åŒä¸€çŠ¶æ€ï¼‰ã€‚ä»£ç ä¸­çš„`expand`å‡½æ•°å¤„ç†çŠ¶æ€æ‰©å±•ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ˜¯0-1 BFSçš„ç»å…¸åº”ç”¨ã€‚


### é¢˜è§£ä¸‰ï¼šSPFAï¼ˆçŠ¶æ€åŒ…å«é‡åŠ›æ–¹å‘ï¼Œä½œè€…ï¼šæ›¹è€å¸ˆï¼Œèµï¼š2ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£å°†é‡åŠ›æ–¹å‘ä½œä¸ºçŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼ˆ`flag`ï¼š1è¡¨ç¤ºå‘ä¸‹ï¼Œ0è¡¨ç¤ºå‘ä¸Šï¼‰ï¼Œç”¨`d[x][y][flag]`å­˜å‚¨åˆ°è¾¾`(x,y)`ä¸”é‡åŠ›æ–¹å‘ä¸º`flag`çš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚SPFAçš„å¤„ç†é€»è¾‘ç¬¦åˆé¢˜ç›®è§„åˆ™ï¼šå…ˆåˆ¤æ–­æ˜¯å¦ä¸‹è½ï¼ˆè‹¥è„šä¸‹ä¸ºç©ºåˆ™ç»§ç»­ä¸‹è½ï¼‰ï¼Œå¦åˆ™å¤„ç†å·¦å³ç§»åŠ¨å’Œç¿»è½¬é‡åŠ›ã€‚ä»£ç ä¸­çš„`upd`å‡½æ•°ç”¨äºæ¾å¼›æ“ä½œï¼Œç®€æ´æ˜äº†ï¼Œé€‚åˆç†è§£çŠ¶æ€è½¬ç§»çš„è¿‡ç¨‹ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å…³é”®ç‚¹1ï¼šçŠ¶æ€è¡¨ç¤ºâ€”â€”å¦‚ä½•åŒ…å«é‡åŠ›æ–¹å‘ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  é‡åŠ›æ–¹å‘æ˜¯é¢˜ç›®çš„æ ¸å¿ƒå˜é‡ï¼Œç›´æ¥å½±å“ä¸‹è½çš„æ–¹å‘ã€‚å¦‚æœä¸å°†å…¶çº³å…¥çŠ¶æ€ï¼Œä¼šå¯¼è‡´æ— æ³•æ­£ç¡®æ¨¡æ‹Ÿç¿»è½¬åçš„è¿‡ç¨‹ï¼ˆæ¯”å¦‚ç¿»è½¬ååº”è¯¥å‘ä¸Šè½ï¼Œä½†çŠ¶æ€ä¸­æ²¡æœ‰è®°å½•ï¼Œä¼šç»§ç»­å‘ä¸‹è½ï¼‰ã€‚  
  **è§£å†³æ–¹æ¡ˆ**ï¼šç”¨**åˆ†å±‚å›¾**æˆ–**çŠ¶æ€ç»“æ„ä½“**åŒ…å«é‡åŠ›æ–¹å‘ï¼ˆå¦‚å±‚0/å±‚1ï¼Œæˆ–`flag`å˜é‡ï¼‰ã€‚ä¾‹å¦‚ï¼ŒAdoveçš„é¢˜è§£ç”¨åˆ†å±‚å›¾ï¼Œå°†æ¯ä¸ªæ ¼å­æ‹†åˆ†ä¸ºä¸¤ä¸ªèŠ‚ç‚¹ï¼ˆå±‚0å’Œå±‚1ï¼‰ï¼›ä¿ºæ˜¯å°ç¨‹çš„é¢˜è§£ç”¨`state`ç»“æ„ä½“çš„`g`å˜é‡ï¼ˆ`false`è¡¨ç¤ºå‘ä¸‹ï¼Œ`true`è¡¨ç¤ºå‘ä¸Šï¼‰ã€‚  

* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è®¾è®¡è¦è¦†ç›–æ‰€æœ‰å½±å“å†³ç­–çš„å˜é‡ï¼Œå¦åˆ™ä¼šæ¼æ‰å…³é”®ä¿¡æ¯ã€‚


### 2. **å…³é”®ç‚¹2ï¼šä¸‹è½æ¨¡æ‹Ÿâ€”â€”å¦‚ä½•å¤„ç†â€œä¸€ç›´ä¸‹è½ç›´åˆ°ç¢°åˆ°éšœç¢ç‰©â€ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  é¢˜ç›®è§„åˆ™2è¦æ±‚ï¼Œè‹¥è„šä¸‹ä¸ºç©ºï¼Œèˆ¹é•¿ä¼šä¸€ç›´ä¸‹è½ã€‚è¿™ä¸€æ­¥ä¸èƒ½åˆ†æ­¥å¤„ç†ï¼ˆæ¯”å¦‚æ¯æ¬¡åªè½ä¸€æ ¼ï¼‰ï¼Œå¦åˆ™ä¼šå¢åŠ ä¸å¿…è¦çš„çŠ¶æ€ï¼ˆæ¯”å¦‚åŠç©ºçš„çŠ¶æ€ï¼‰ï¼Œå¯¼è‡´æ•ˆç‡ä½ä¸‹æˆ–é”™è¯¯ã€‚  
  **è§£å†³æ–¹æ¡ˆ**ï¼šç”¨**å¾ªç¯æ¨¡æ‹Ÿä¸‹è½è¿‡ç¨‹**ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ç‰©æˆ–å‡ºç•Œã€‚ä¾‹å¦‚ï¼Œä¿ºæ˜¯å°ç¨‹çš„é¢˜è§£ä¸­ï¼Œ`fall`å‡½æ•°è¿”å›ä¸‹è½çš„ç›®æ ‡ä½ç½®ï¼›Adoveçš„é¢˜è§£ä¸­ï¼Œé€šè¿‡è¾¹çš„æ·»åŠ ç›´æ¥å¤„ç†ä¸‹è½ï¼ˆæ¯”å¦‚`add(get(i,j), get(i+1,j), 0)`è¡¨ç¤ºå‘ä¸‹è½ä¸€æ ¼ï¼Œä½†å®é™…ä¸Šéœ€è¦å¾ªç¯å¤„ç†å¤šæ ¼ä¸‹è½ï¼Ÿä¸ï¼Œç­‰ä¸€ä¸‹ï¼ŒAdoveçš„é¢˜è§£ä¸­çš„è¾¹æ·»åŠ æ˜¯å¦æ­£ç¡®ï¼Ÿå…¶å®ï¼ŒAdoveçš„é¢˜è§£ä¸­çš„è¾¹æ·»åŠ å¯èƒ½æœ‰é—®é¢˜ï¼Œå› ä¸ºå®ƒåªå¤„ç†äº†ä¸€æ ¼ä¸‹è½ï¼Œä½†æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ä¸€æ¬¡æ€§ä¸‹è½åˆ°åº•ã€‚å“¦ï¼Œä¸å¯¹ï¼Œå†çœ‹Adoveçš„é¢˜è§£ï¼Œå…¶å®å®ƒçš„è¾¹æ·»åŠ æ˜¯**é¢„å¤„ç†**äº†æ‰€æœ‰å¯èƒ½çš„ä¸‹è½è·¯å¾„å—ï¼Ÿä¸ï¼Œå…¶å®Adoveçš„é¢˜è§£ä¸­çš„è¾¹æ·»åŠ é€»è¾‘å¯èƒ½æœ‰è¯¯ï¼Œå› ä¸ºå®ƒåªæ·»åŠ äº†ç›¸é‚»æ ¼å­çš„è¾¹ï¼Œè€Œæ²¡æœ‰å¤„ç†å¤šæ ¼ä¸‹è½ã€‚å“¦ï¼Œç­‰ä¸€ä¸‹ï¼Œå†ä»”ç»†çœ‹Adoveçš„é¢˜è§£ï¼Œå…¶å®å®ƒçš„ä»£ç ä¸­çš„è¾¹æ·»åŠ æ˜¯**é”™è¯¯çš„**ï¼Ÿä¸ï¼Œä¸å¯¹ï¼Œå…¶å®Adoveçš„é¢˜è§£ä¸­çš„è¾¹æ·»åŠ æ˜¯**æ¨¡æ‹Ÿäº†ä¸‹è½çš„è¿‡ç¨‹**å—ï¼Ÿæ¯”å¦‚ï¼Œå¯¹äºé‡åŠ›å‘ä¸‹çš„æƒ…å†µï¼Œè‹¥`i+1`æ ¼ä¸ºç©ºï¼Œåˆ™æ·»åŠ `get(i,j)`åˆ°`get(i+1,j)`çš„è¾¹ï¼Œæƒ0ã€‚ä½†è¿™æ ·çš„è¯ï¼Œèˆ¹é•¿ä¼šä¸€æ­¥æ­¥ä¸‹è½ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ç‰©ã€‚è¿™å…¶å®æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºSPFAä¼šå¤„ç†è¿™ç§å¤šæ­¥çš„0æƒè¾¹ï¼Œæœ€ç»ˆåˆ°è¾¾ä¸‹è½åˆ°åº•çš„ä½ç½®ã€‚æ¯”å¦‚ï¼Œè‹¥`i`åˆ°`i+1`æ˜¯0æƒè¾¹ï¼Œ`i+1`åˆ°`i+2`ä¹Ÿæ˜¯0æƒè¾¹ï¼Œé‚£ä¹ˆSPFAä¼šå°†`i`çš„è·ç¦»ä¼ é€’ç»™`i+1`ï¼Œå†ä¼ é€’ç»™`i+2`ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ç‰©ã€‚è¿™æ ·å¤„ç†æ˜¯å¯¹çš„ï¼Œåªæ˜¯æ•ˆç‡å¯èƒ½æ¯”ä¸€æ¬¡æ€§ä¸‹è½åˆ°åº•ä½ï¼Œä½†å¯¹äºé¢˜ç›®ä¸­çš„æ•°æ®èŒƒå›´ï¼ˆN,Mâ‰¤500ï¼‰ï¼Œæ˜¯å¯ä»¥æ¥å—çš„ã€‚  

* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¨¡æ‹Ÿè¿ç»­åŠ¨ä½œæ—¶ï¼Œè¦ä¹ˆä¸€æ¬¡æ€§å¤„ç†åˆ°åº•ï¼ˆæ•ˆç‡é«˜ï¼‰ï¼Œè¦ä¹ˆåˆ†æ­¥å¤„ç†ï¼ˆé€»è¾‘ç®€å•ï¼‰ï¼Œé€‰æ‹©é€‚åˆé¢˜ç›®çš„æ–¹å¼ã€‚


### 3. **å…³é”®ç‚¹3ï¼šæœ€çŸ­è·¯ç®—æ³•é€‰æ‹©â€”â€”SPFA vs 0-1 BFSï¼Ÿ**  
* **åˆ†æ**ï¼š  
  æœ¬é¢˜çš„è¾¹æƒåªæœ‰0å’Œ1ï¼Œ**0-1 BFS**ï¼ˆåŒç«¯é˜Ÿåˆ—ä¼˜åŒ–ï¼‰æ¯”SPFAæ›´é«˜æ•ˆï¼ˆæ—¶é—´å¤æ‚åº¦O(N*M)ï¼Œè€ŒSPFAæ˜¯O(K*N*M)ï¼ŒKæ˜¯å¹³å‡å…¥é˜Ÿæ¬¡æ•°ï¼‰ã€‚0-1 BFSçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå¯¹äºæƒ0çš„è¾¹ï¼Œå°†æ–°çŠ¶æ€åŠ å…¥é˜Ÿå¤´ï¼ˆä¼˜å…ˆå¤„ç†ï¼Œä¿è¯è·ç¦»æœ€å°ï¼‰ï¼›å¯¹äºæƒ1çš„è¾¹ï¼Œå°†æ–°çŠ¶æ€åŠ å…¥é˜Ÿå°¾ï¼ˆåå¤„ç†ï¼‰ã€‚  
  **è§£å†³æ–¹æ¡ˆ**ï¼šè‹¥è¾¹æƒåªæœ‰0å’Œ1ï¼Œä¼˜å…ˆé€‰æ‹©0-1 BFSã€‚ä¾‹å¦‚ï¼Œä¿ºæ˜¯å°ç¨‹çš„é¢˜è§£ç”¨`deque`å®ç°0-1 BFSï¼Œæ•ˆç‡æ¯”SPFAé«˜ã€‚  

* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ¹æ®è¾¹æƒçš„ç‰¹ç‚¹é€‰æ‹©æœ€é€‚åˆçš„æœ€çŸ­è·¯ç®—æ³•ï¼Œèƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **çŠ¶æ€è®¾è®¡**ï¼šåŒ…å«æ‰€æœ‰å½±å“å†³ç­–çš„å˜é‡ï¼ˆå¦‚é‡åŠ›æ–¹å‘ï¼‰ï¼›  
- **è¿ç»­åŠ¨ä½œå¤„ç†**ï¼šä¸€æ¬¡æ€§æ¨¡æ‹Ÿåˆ°åº•ï¼ˆå¦‚ä¸‹è½ï¼‰ï¼Œå‡å°‘çŠ¶æ€æ•°é‡ï¼›  
- **ç®—æ³•é€‰æ‹©**ï¼šè¾¹æƒ0-1æ—¶ï¼Œç”¨0-1 BFSï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ›¿ä»£SPFAï¼›  
- **åˆ¤é‡**ï¼šå¿…é¡»åŒ…å«æ‰€æœ‰çŠ¶æ€å˜é‡ï¼ˆå¦‚åæ ‡ã€é‡åŠ›æ–¹å‘ï¼‰ï¼Œå¦åˆ™ä¼šé‡å¤è®¿é—®ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆ0-1 BFSï¼‰  
* **è¯´æ˜**ï¼š  
  æœ¬ä»£ç ç»¼åˆäº†ä¿ºæ˜¯å°ç¨‹çš„é¢˜è§£æ€è·¯ï¼Œç”¨0-1 BFSè§£å†³0-1æƒå€¼æœ€çŸ­è·¯é—®é¢˜ï¼Œæ•ˆç‡é«˜ï¼Œé€»è¾‘æ¸…æ™°ã€‚  

* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <deque>
  #include <vector>
  #include <cstdio>
  #include <cstring>
  using namespace std;

  const int MAXN = 505;
  char mp[MAXN][MAXN];
  bool vis[MAXN][MAXN][2]; // åˆ¤é‡ï¼šx, y, é‡åŠ›æ–¹å‘ï¼ˆ0å‘ä¸‹ï¼Œ1å‘ä¸Šï¼‰

  struct State {
      int x, y, cnt; // cntï¼šç¿»è½¬æ¬¡æ•°
      bool gravity; // falseï¼šå‘ä¸‹ï¼Œtrueï¼šå‘ä¸Š
  };

  int N, M;
  pair<int, int> start, end_;

  // æ¨¡æ‹Ÿä¸‹è½ï¼Œè¿”å›ä¸‹è½åˆ°åº•çš„ä½ç½®
  State fall(State s) {
      while (true) {
          int nx = s.x + (s.gravity ? -1 : 1);
          if (nx < 1 || nx > N || mp[nx][s.y] == '#') break;
          s.x = nx;
          // ä¸‹è½è¿‡ç¨‹ä¸­ç¢°åˆ°Dï¼Œç›´æ¥è¿”å›
          if (mp[s.x][s.y] == 'D') return s;
      }
      return s;
  }

  int bfs() {
      deque<State> q;
      State init = {start.first, start.second, 0, false};
      init = fall(init); // èµ·ç‚¹å…ˆä¸‹è½åˆ°åº•
      if (mp[init.x][init.y] == 'D') return init.cnt;
      vis[init.x][init.y][init.gravity] = true;
      q.push_back(init);

      while (!q.empty()) {
          State u = q.front();
          q.pop_front();

          // 1. å·¦å³ç§»åŠ¨ï¼ˆæƒ0ï¼Œå…¥é˜Ÿå¤´ï¼‰
          for (int dy : {-1, 1}) {
              int ny = u.y + dy;
              if (ny < 1 || ny > M || mp[u.x][ny] == '#') continue;
              State v = {u.x, ny, u.cnt, u.gravity};
              v = fall(v); // ç§»åŠ¨åä¸‹è½åˆ°åº•
              if (mp[v.x][v.y] == 'D') return v.cnt;
              if (!vis[v.x][v.y][v.gravity]) {
                  vis[v.x][v.y][v.gravity] = true;
                  q.push_front(v); // æƒ0ï¼Œå…¥é˜Ÿå¤´
              }
          }

          // 2. ç¿»è½¬é‡åŠ›ï¼ˆæƒ1ï¼Œå…¥é˜Ÿå°¾ï¼‰
          State v = {u.x, u.y, u.cnt + 1, !u.gravity};
          v = fall(v); // ç¿»è½¬åä¸‹è½åˆ°åº•
          if (mp[v.x][v.y] == 'D') return v.cnt;
          if (!vis[v.x][v.y][v.gravity]) {
              vis[v.x][v.y][v.gravity] = true;
              q.push_back(v); // æƒ1ï¼Œå…¥é˜Ÿå°¾
          }
      }

      return -1;
  }

  int main() {
      cin >> N >> M;
      for (int i = 1; i <= N; i++) {
          scanf("%s", mp[i] + 1);
          for (int j = 1; j <= M; j++) {
              if (mp[i][j] == 'C') start = {i, j};
              if (mp[i][j] == 'D') end_ = {i, j};
          }
      }

      memset(vis, false, sizeof(vis));
      int ans = bfs();
      cout << ans << endl;

      return 0;
  }
  ```

* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **çŠ¶æ€ç»“æ„ä½“**ï¼š`State`åŒ…å«åæ ‡ã€ç¿»è½¬æ¬¡æ•°ã€é‡åŠ›æ–¹å‘ï¼›  
  2. **ä¸‹è½å‡½æ•°**ï¼š`fall`æ¨¡æ‹Ÿä¸‹è½è¿‡ç¨‹ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ç‰©æˆ–å‡ºç•Œï¼›  
  3. **0-1 BFS**ï¼šç”¨`deque`å­˜å‚¨çŠ¶æ€ï¼Œå·¦å³ç§»åŠ¨ï¼ˆæƒ0ï¼‰å…¥é˜Ÿå¤´ï¼Œç¿»è½¬é‡åŠ›ï¼ˆæƒ1ï¼‰å…¥é˜Ÿå°¾ï¼›  
  4. **åˆ¤é‡**ï¼š`vis[x][y][gravity]`è®°å½•æ˜¯å¦è®¿é—®è¿‡è¯¥çŠ¶æ€ï¼Œé¿å…é‡å¤ã€‚


### é¢˜è§£äº®ç‚¹èµæï¼ˆ0-1 BFSï¼‰  
* **äº®ç‚¹**ï¼šç”¨åŒç«¯é˜Ÿåˆ—å¤„ç†0-1æƒå€¼è¾¹ï¼Œä¿è¯æœ€çŸ­è·¯çš„å•è°ƒæ€§ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  deque<State> q;
  q.push_back(init);
  while (!q.empty()) {
      State u = q.front();
      q.pop_front();

      // å·¦å³ç§»åŠ¨ï¼ˆæƒ0ï¼Œå…¥é˜Ÿå¤´ï¼‰
      for (int dy : {-1, 1}) {
          // ... å¤„ç†ç§»åŠ¨
          q.push_front(v);
      }

      // ç¿»è½¬é‡åŠ›ï¼ˆæƒ1ï¼Œå…¥é˜Ÿå°¾ï¼‰
      // ... å¤„ç†ç¿»è½¬
      q.push_back(v);
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  åŒç«¯é˜Ÿåˆ—çš„`push_front`ç”¨äºæƒ0çš„è¾¹ï¼ˆä¼˜å…ˆå¤„ç†ï¼Œä¿è¯è·ç¦»æœ€å°ï¼‰ï¼Œ`push_back`ç”¨äºæƒ1çš„è¾¹ï¼ˆåå¤„ç†ï¼‰ã€‚è¿™æ ·ï¼Œé˜Ÿåˆ—ä¸­çš„çŠ¶æ€æŒ‰è·ç¦»ä»å°åˆ°å¤§æ’åˆ—ï¼Œæ— éœ€åƒSPFAé‚£æ ·å¤šæ¬¡å…¥é˜Ÿã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š0-1 BFSæ˜¯å¤„ç†0-1æƒå€¼æœ€çŸ­è·¯çš„é«˜æ•ˆæ–¹æ³•ï¼Œæ¯”SPFAæ›´é€‚åˆè¿™ç±»é—®é¢˜ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šåƒç´ èˆ¹é•¿çš„é‡åŠ›å†’é™©ã€‹ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰  
**è®¾è®¡æ€è·¯**ï¼š  
ç”¨FCçº¢ç™½æœºçš„åƒç´ é£æ ¼å±•ç¤ºç½‘æ ¼ï¼Œèˆ¹é•¿ç”¨**çº¢è‰²æ–¹å—**è¡¨ç¤ºï¼Œé‡åŠ›æ–¹å‘ç”¨**ç®­å¤´**ï¼ˆå‘ä¸‹â†’çº¢è‰²ï¼Œå‘ä¸Šâ†’è“è‰²ï¼‰æ ‡è®°ã€‚ä¸‹è½è¿‡ç¨‹ç”¨**è¿ç»­ç§»åŠ¨åŠ¨ç”»**å±•ç¤ºï¼Œç¿»è½¬é‡åŠ›æ—¶ç®­å¤´**æ—‹è½¬180åº¦**å¹¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚å…³é”®æ­¥éª¤ï¼ˆå¦‚åˆ°è¾¾Dç‚¹ï¼‰ç”¨**é—ªçƒæ•ˆæœ**å’Œâ€œèƒœåˆ©â€éŸ³æ•ˆå¼ºåŒ–ï¼Œå¢åŠ è¶£å‘³æ€§ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º5x5åƒç´ ç½‘æ ¼ï¼ˆå¯¹åº”æ ·ä¾‹è¾“å…¥ï¼‰ï¼Œ`#`ç”¨**ç°è‰²æ–¹å—**è¡¨ç¤ºï¼Œ`.`ç”¨**ç™½è‰²æ–¹å—**è¡¨ç¤ºï¼Œ`C`ï¼ˆèµ·ç‚¹ï¼‰ç”¨**çº¢è‰²æ–¹å—**è¡¨ç¤ºï¼Œ`D`ï¼ˆç»ˆç‚¹ï¼‰ç”¨**é»„è‰²æ–¹å—**è¡¨ç¤ºã€‚  
   - æ§åˆ¶é¢æ¿ï¼š`å¼€å§‹/æš‚åœ`ï¼ˆçº¢è‰²æŒ‰é’®ï¼‰ã€`å•æ­¥æ‰§è¡Œ`ï¼ˆè“è‰²æŒ‰é’®ï¼‰ã€`é‡ç½®`ï¼ˆç»¿è‰²æŒ‰é’®ï¼‰ã€`é€Ÿåº¦æ»‘å—`ï¼ˆè°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦ï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»æ¾æ—‹å¾‹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - èˆ¹é•¿ä»`C`ç‚¹ï¼ˆ4,2ï¼‰å¼€å§‹ï¼Œé‡åŠ›æ–¹å‘å‘ä¸‹ï¼ˆçº¢è‰²ç®­å¤´æŒ‡å‘ä¸‹æ–¹ï¼‰ã€‚  
   - æ¨¡æ‹Ÿä¸‹è½è¿‡ç¨‹ï¼šèˆ¹é•¿ä»ï¼ˆ4,2ï¼‰å‘ä¸‹è½ï¼Œç›´åˆ°ç¢°åˆ°ï¼ˆ5,2ï¼‰çš„`#`ï¼ˆç°è‰²æ–¹å—ï¼‰ï¼Œåœåœ¨ï¼ˆ4,2ï¼‰ï¼Ÿä¸ï¼Œç­‰ä¸€ä¸‹ï¼Œæ ·ä¾‹è¾“å…¥ä¸­çš„`C`ç‚¹åœ¨ï¼ˆ4,2ï¼‰ï¼Œä¸‹æ–¹æ˜¯ï¼ˆ5,2ï¼‰ï¼Œæ ·ä¾‹è¾“å…¥ä¸­çš„ç¬¬äº”è¡Œæ˜¯`##.##`ï¼Œæ‰€ä»¥ï¼ˆ5,2ï¼‰æ˜¯`#`ï¼Œæ‰€ä»¥èˆ¹é•¿åœåœ¨ï¼ˆ4,2ï¼‰ã€‚ç„¶åï¼Œèˆ¹é•¿ç¿»è½¬é‡åŠ›ï¼ˆè“è‰²ç®­å¤´æŒ‡å‘ä¸Šæ–¹ï¼‰ï¼Œä»£ä»·+1ï¼Œæ­¤æ—¶â€œä¸‹æ–¹â€æ˜¯è¡Œå·æ›´å°çš„æ ¼å­ï¼Œèˆ¹é•¿å‘ä¸Šè½ï¼Œç›´åˆ°ç¢°åˆ°ï¼ˆ1,2ï¼‰çš„`#`ï¼Ÿä¸ï¼Œæ ·ä¾‹ä¸­çš„ç¬¬ä¸€è¡Œæ˜¯`#####`ï¼Œæ‰€ä»¥ï¼ˆ1,2ï¼‰æ˜¯`#`ï¼Œæ‰€ä»¥èˆ¹é•¿åœåœ¨ï¼ˆ2,2ï¼‰ã€‚

3. **æ ¸å¿ƒæ­¥éª¤æ¼”ç¤º**ï¼š  
   - **ä¸‹è½**ï¼šèˆ¹é•¿ä»ï¼ˆ4,2ï¼‰å‘ä¸‹è½ï¼Œçº¢è‰²ç®­å¤´æŒ‡å‘ä¸‹æ–¹ï¼Œçº¢è‰²æ–¹å—è¿ç»­ç§»åŠ¨åˆ°ï¼ˆ5,2ï¼‰çš„`#`å‰ï¼Œåœåœ¨ï¼ˆ4,2ï¼‰ï¼Œä¼´éšâ€œæ²™æ²™â€çš„ä¸‹è½éŸ³æ•ˆã€‚  
   - **ç¿»è½¬é‡åŠ›**ï¼šèˆ¹é•¿ç‚¹å‡»â€œç¿»è½¬â€æŒ‰é’®ï¼Œçº¢è‰²ç®­å¤´æ—‹è½¬180åº¦å˜ä¸ºè“è‰²ï¼ˆå‘ä¸Šï¼‰ï¼Œä»£ä»·+1ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚ç„¶åï¼Œèˆ¹é•¿å‘ä¸Šè½ï¼Œè“è‰²æ–¹å—è¿ç»­ç§»åŠ¨åˆ°ï¼ˆ1,2ï¼‰çš„`#`å‰ï¼Œåœåœ¨ï¼ˆ2,2ï¼‰ï¼Œä¼´éšâ€œæ²™æ²™â€çš„ä¸‹è½éŸ³æ•ˆã€‚  
   - **å·¦å³ç§»åŠ¨**ï¼šèˆ¹é•¿ä»ï¼ˆ2,2ï¼‰å‘å³ç§»åŠ¨åˆ°ï¼ˆ2,3ï¼‰ã€ï¼ˆ2,4ï¼‰ï¼Œçº¢è‰²æ–¹å—ï¼ˆæ­¤æ—¶é‡åŠ›æ–¹å‘å‘ä¸Šï¼Ÿä¸ï¼Œç¿»è½¬åé‡åŠ›æ–¹å‘æ˜¯å‘ä¸Šï¼Œæ‰€ä»¥èˆ¹é•¿åœåœ¨ï¼ˆ2,2ï¼‰ï¼Œç„¶åå‘å³ç§»åŠ¨åˆ°ï¼ˆ2,3ï¼‰ã€ï¼ˆ2,4ï¼‰ï¼Œä¼´éšâ€œå—’å—’â€çš„ç§»åŠ¨éŸ³æ•ˆã€‚  
   - **åˆ°è¾¾ç»ˆç‚¹**ï¼šèˆ¹é•¿ä»ï¼ˆ4,5ï¼‰ç¿»è½¬é‡åŠ›ï¼ˆä»£ä»·+3ï¼‰ï¼Œå‘ä¸Šè½è‡³ï¼ˆ3,5ï¼‰çš„`D`ç‚¹ï¼Œé»„è‰²æ–¹å—é—ªçƒï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚

4. **äº¤äº’æ§åˆ¶**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼ŒåŠ¨ç”»æ‰§è¡Œä¸€æ­¥ï¼ˆå¦‚ä¸‹è½ã€ç§»åŠ¨ã€ç¿»è½¬ï¼‰ï¼Œå¹¶æ˜¾ç¤ºå½“å‰æ­¥éª¤çš„æ–‡å­—æç¤ºï¼ˆå¦‚â€œèˆ¹é•¿ç¿»è½¬é‡åŠ›ï¼Œä»£ä»·+1â€ï¼‰ã€‚  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ‰§è¡Œï¼Œé€Ÿåº¦ç”±æ»‘å—è°ƒèŠ‚ï¼ˆæœ€æ…¢1ç§’/æ­¥ï¼Œæœ€å¿«0.1ç§’/æ­¥ï¼‰ã€‚  
   - **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼ŒåŠ¨ç”»å›åˆ°åˆå§‹çŠ¶æ€ï¼ˆèˆ¹é•¿åœ¨`C`ç‚¹ï¼Œé‡åŠ›å‘ä¸‹ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **åˆ†å±‚å›¾æ¨¡å‹**ï¼šé€‚ç”¨äºéœ€è¦â€œçŠ¶æ€åˆ‡æ¢â€çš„é—®é¢˜ï¼ˆå¦‚é‡åŠ›æ–¹å‘ã€å¼€å…³çŠ¶æ€ã€è§’è‰²çŠ¶æ€ï¼‰ï¼›  
- **0-1 BFS**ï¼šé€‚ç”¨äºè¾¹æƒåªæœ‰0å’Œ1çš„æœ€çŸ­è·¯é—®é¢˜ï¼ˆå¦‚è¿·å®«ä¸­çš„é—¨ã€ä¼ é€é—¨ï¼‰ï¼›  
- **è¿ç»­åŠ¨ä½œæ¨¡æ‹Ÿ**ï¼šé€‚ç”¨äºéœ€è¦â€œä¸€æ¬¡æ€§å¤„ç†â€çš„åŠ¨ä½œï¼ˆå¦‚ä¸‹è½ã€æ»‘åŠ¨ã€è·³è·ƒï¼‰ã€‚


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1332 - è¡€è‰²å…ˆé”‹é˜Ÿ**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦å¤„ç†â€œæ„ŸæŸ“â€çš„è¿ç»­æ‰©æ•£è¿‡ç¨‹ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œä¸‹è½â€æ¨¡æ‹Ÿï¼Œé€‚åˆå·©å›ºè¿ç»­åŠ¨ä½œå¤„ç†æŠ€å·§ã€‚  
2. **æ´›è°· P1144 - æœ€çŸ­è·¯è®¡æ•°**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜æ˜¯0-1æƒå€¼æœ€çŸ­è·¯çš„å˜ç§ï¼Œéœ€è¦è®¡ç®—æœ€çŸ­è·¯çš„æ•°é‡ï¼Œé€‚åˆå·©å›º0-1 BFSçš„åº”ç”¨ã€‚  
3. **æ´›è°· P2240 - ã€æ·±åŸº12.ä¾‹1ã€‘éƒ¨åˆ†èƒŒåŒ…é—®é¢˜**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜éœ€è¦å¤„ç†â€œé€‰æˆ–ä¸é€‰â€çš„çŠ¶æ€è½¬ç§»ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œç¿»è½¬æˆ–ä¸ç¿»è½¬â€ï¼Œé€‚åˆå·©å›ºçŠ¶æ€è®¾è®¡æŠ€å·§ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
> **å‚è€ƒç»éªŒ (æ¥è‡ª ä¿ºæ˜¯å°ç¨‹)**ï¼šâ€œæˆ‘ä¸€å¼€å§‹ç”¨æ™®é€šBFSï¼Œç»“æœç­”æ¡ˆåå¤§ï¼Œåæ¥æ‰çŸ¥é“å› ä¸ºè¾¹æƒæœ‰0å’Œ1ï¼Œæ™®é€šBFSä¸æ»¡è¶³å•è°ƒæ€§ã€‚æ”¹ç”¨åŒç«¯é˜Ÿåˆ—çš„0-1 BFSåï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚â€  
> **ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨å¤„ç†å¸¦æƒæœ€çŸ­è·¯é—®é¢˜æ—¶ï¼Œä¸€å®šè¦æ ¹æ®è¾¹æƒçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„ç®—æ³•ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯æˆ–æ•ˆç‡ä½ä¸‹ã€‚0-1 BFSæ˜¯å¤„ç†0-1æƒå€¼é—®é¢˜çš„â€œç¥å™¨â€ï¼Œå€¼å¾—æŒæ¡ã€‚


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[USACO13OPEN] What's Up With Gravity Sâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£åˆ†å±‚å›¾æ¨¡å‹ã€0-1 BFSç­‰æ ¸å¿ƒç®—æ³•ï¼ŒæŒæ¡çŠ¶æ€è®¾è®¡ã€è¿ç»­åŠ¨ä½œæ¨¡æ‹Ÿç­‰è§£é¢˜æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„ä¹è¶£åœ¨äºè§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼Œå¤šæ€è€ƒã€å¤šç»ƒä¹ ï¼Œä½ ä¸€å®šä¼šè¶Šæ¥è¶Šå‰å®³ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š192.52ç§’
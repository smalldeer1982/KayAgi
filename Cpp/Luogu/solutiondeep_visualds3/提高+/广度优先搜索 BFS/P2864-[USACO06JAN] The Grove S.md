# é¢˜ç›®ä¿¡æ¯

# [USACO06JAN] The Grove S

## é¢˜ç›®æè¿°

The pasture contains a small, contiguous grove of trees that has no 'holes' in the middle of the it.  Bessie wonders: how far is it to walk around that grove and get back to my starting position? She's just sure there is a way to do it by going from her start location to successive locations by walking horizontally, vertically, or diagonally and counting each move as a single step. Just looking at it, she doesn't think you could pass 'through' the grove on a tricky diagonal. Your job is to calculate the minimum number of steps she must take.


Happily, Bessie lives on a simple world where the pasture is represented by a grid with R rows and C columns (1 <= R <= 50, 1 <= C <= 50). Here's a typical example where '.' is pasture (which Bessie may traverse), 'X' is the grove of trees, '\*' represents Bessie's start and end position, and '+' marks one shortest path she can walk to circumnavigate the grove (i.e., the answer):

```cpp
...+...
..+X+..
.+XXX+.
..+XXX+
..+X..+
...+++*
```
The path shown is not the only possible shortest path; Bessie might have taken a diagonal step from her start position and achieved a similar length solution. Bessie is happy that she's starting 'outside' the grove instead of in a sort of 'harbor' that could complicate finding the best path.

ç‰§åœºé‡Œæœ‰æ ‘æ—ï¼Œæ—å­é‡Œæ²¡æœ‰å‘ï¼Œè´èŒœå¾ˆæƒ³çŸ¥é“ï¼Œæœ€å°‘å‡ æ­¥èƒ½ç»•æ ‘æ—èµ°ä¸€åœˆï¼Œæœ€åå›åˆ°èµ·ç‚¹.å¥¹èƒ½ä¸Šä¸‹å·¦å³èµ°ï¼Œä¹Ÿèƒ½èµ°å¯¹è§’çº¿æ ¼å­.

ç‰§åœºè¢«åˆ†æˆ $R$ è¡Œ $C$ åˆ— $(1\leq R\leq 50,\ 1\leq C\leq 50)$ ã€‚ä¸‹é¢æ˜¯ä¸€å¼ æ ·ä¾‹çš„åœ°å›¾ï¼Œå…¶ä¸­ `.` è¡¨ç¤ºè´èŒœå¯ä»¥èµ°çš„ç©ºåœ°ï¼Œ `X` è¡¨ç¤ºæ ‘æ—ï¼Œè¡¨ç¤ºèµ·ç‚¹.è€Œè´èŒœèµ°çš„æœ€è¿‘çš„è·¯å·²ç»ç‰¹åˆ«åœ°ç”¨ `+` è¡¨ç¤º å‡ºæ¥.

é¢˜ç›®**ä¿è¯å­˜åœ¨æœ€çŸ­è·¯å¾„**ï¼Œä¸”æ£®æ—å½¢æˆä¸€ä¸ªè”é€šå—ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
6 7
.......
...X...
..XXX..
...XXX.
...X...
...*...```

### è¾“å‡º

```
11```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO06JAN] The Grove S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢(BFS) + çº¦æŸæ¡ä»¶è®¾è®¡ï¼ˆç»•æ ‘æ—ç­–ç•¥ï¼‰


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œç»•æ ‘æ—ä¸€åœˆå›åˆ°èµ·ç‚¹â€çš„é—®é¢˜ï¼Œæ ¸å¿ƒæ˜¯**ç”¨BFSæ±‚æœ€çŸ­è·¯å¾„**ï¼Œä½†éœ€è¦ç»™BFSåŠ ä¸Šâ€œå¿…é¡»ç»•æ ‘æ—â€çš„çº¦æŸã€‚BFSå°±åƒâ€œæ´ªæ°´æ‰©æ•£â€â€”â€”ä»èµ·ç‚¹å¼€å§‹ï¼Œé€å±‚æ¢ç´¢æ‰€æœ‰å¯è¾¾çš„èŠ‚ç‚¹ï¼Œç¡®ä¿æ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚ä½†å¦‚æœç›´æ¥è·‘BFSï¼Œè·¯å¾„ä¼šâ€œæŠ„è¿‘è·¯â€ï¼ˆæ¯”å¦‚ç©¿è¿‡æ ‘æ—å‘¨å›´çš„ç©ºéš™ï¼‰ï¼Œæ— æ³•æ»¡è¶³â€œç»•ä¸€åœˆâ€çš„è¦æ±‚ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼šå¦‚ä½•è®©è·¯å¾„**å¼ºåˆ¶ç»•æ ‘æ—ä¸€åœˆ**ï¼Ÿ  
**è§£å†³æ–¹æ¡ˆ**ï¼šé¢˜è§£ä¸­å¸¸ç”¨ä¸¤ç§ç­–ç•¥ï¼š  
- **å»ºå¢™æ³•**ï¼šåœ¨æ ‘æ—æ—è¾¹â€œç”»â€ä¸€é“è™šæ‹Ÿçš„å¢™ï¼ˆæ¯”å¦‚æœ€ä¸Šæ–¹æ ‘æ—çš„å³ä¾§ï¼‰ï¼ŒBFSæ—¶ä¸å…è®¸ç©¿è¿‡è¿™é“å¢™ã€‚è¿™æ ·ï¼Œè·¯å¾„å¿…é¡»ç»•å¢™èµ°ï¼Œä»è€Œç»•æ ‘æ—ä¸€åœˆã€‚  
- **è™šæ‹Ÿå°„çº¿æ³•**ï¼šç”¨ä¸€æ¡è™šæ‹Ÿå°„çº¿ï¼ˆæ¯”å¦‚ä»æŸæ£µæ ‘å‘ä¸‹ï¼‰ï¼ŒBFSæ—¶è®°å½•èŠ‚ç‚¹æ˜¯å¦ç©¿è¿‡å°„çº¿ï¼ˆçŠ¶æ€`k`ï¼Œ0è¡¨ç¤ºåœ¨å°„çº¿å¤–ï¼Œ1è¡¨ç¤ºåœ¨å°„çº¿å†…ï¼‰ã€‚ç»•æ ‘æ—ä¸€åœˆåï¼Œå›åˆ°èµ·ç‚¹æ—¶`k`ä¼šä»0å˜1ï¼Œå› æ­¤æ±‚`èµ·ç‚¹â†’èµ·ç‚¹ä¸”k=1`çš„æœ€çŸ­è·¯å¾„å³å¯ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºç½‘æ ¼ï¼ˆç©ºåœ°=æµ…ç°ï¼Œæ ‘æ—=æ·±ç»¿ï¼Œèµ·ç‚¹=é»„è‰²*ï¼Œå¢™=çº¢è‰²|ï¼‰ã€‚BFSè¿‡ç¨‹ä¸­ï¼Œå½“å‰å¤„ç†çš„èŠ‚ç‚¹ç”¨æµ…è“è‰²é«˜äº®ï¼Œé˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹ç”¨æ·±è“è‰²æ ‡è®°ã€‚å»ºå¢™æ³•çš„åŠ¨ç”»ä¼šé‡ç‚¹å±•ç¤ºâ€œå¢™å¦‚ä½•é˜»æŒ¡è·¯å¾„â€ï¼Œè™šæ‹Ÿå°„çº¿æ³•ä¼šå±•ç¤ºâ€œå°„çº¿ç©¿è¿‡çŠ¶æ€çš„å˜åŒ–â€ã€‚æ¯”å¦‚ï¼Œå½“èŠ‚ç‚¹ç©¿è¿‡å°„çº¿æ—¶ï¼ŒçŠ¶æ€`k`ä»0å˜1ï¼Œç”¨é—ªçƒæ•ˆæœæç¤ºã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šå»ºå¢™æ³•ï¼ˆæ¥æºï¼šAutumnKiteï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸æ¸…æ™°â€”â€”é€šè¿‡â€œå»ºå¢™â€å¼ºåˆ¶è·¯å¾„ç»•æ ‘æ—ã€‚ä½œè€…é€‰æ‹©æ ‘æ—æœ€ä¸Šæ–¹çš„ç‚¹ï¼Œå‘å³å»ºä¸€é“å¢™ï¼Œç„¶åç”¨BFSè®¡ç®—èµ·ç‚¹åˆ°å„ç‚¹çš„è·ç¦»ï¼ˆä¸ç©¿è¿‡å¢™ï¼‰ã€‚æœ€åæšä¸¾å¢™ä¸¤æ—çš„ç‚¹å¯¹ï¼Œæ±‚æœ€çŸ­è·¯å¾„å’Œã€‚ä»£ç ç»“æ„è§„èŒƒï¼Œå˜é‡åï¼ˆå¦‚`zx, zy`è¡¨ç¤ºå¢™çš„ä½ç½®ï¼‰å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆæ¯”å¦‚å¢™ä¸èƒ½ä¸èµ·ç‚¹é‡åˆï¼‰ã€‚**äº®ç‚¹**ï¼šç”¨â€œå¢™â€å°†â€œç»•æ ‘æ—â€é—®é¢˜è½¬åŒ–ä¸ºâ€œä¸ç©¿è¿‡å¢™çš„æœ€çŸ­è·¯å¾„â€ï¼Œæ€è·¯å·§å¦™ï¼Œå®¹æ˜“ç†è§£ã€‚  


### é¢˜è§£äºŒï¼šè™šæ‹Ÿå°„çº¿æ³•ï¼ˆæ¥æºï¼šä¸€é¢—èµ›è‰‡ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨â€œè™šæ‹Ÿå°„çº¿â€åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦åœ¨æ ‘æ—å†…ï¼Œæ€è·¯æ–°é¢–ä¸”é€šç”¨ã€‚BFSæ—¶è®°å½•çŠ¶æ€`k`ï¼ˆæ˜¯å¦ç©¿è¿‡å°„çº¿ï¼‰ï¼Œæ±‚`èµ·ç‚¹â†’èµ·ç‚¹ä¸”k=1`çš„æœ€çŸ­è·¯å¾„ã€‚ä»£ç ç®€æ´ï¼Œç”¨`dp[x][y][k]`è¡¨ç¤ºçŠ¶æ€ï¼Œé€»è¾‘æ¸…æ™°ã€‚**äº®ç‚¹**ï¼šå°†â€œç»•æ ‘æ—â€è½¬åŒ–ä¸ºâ€œçŠ¶æ€å˜åŒ–â€ï¼Œé€‚åˆå„ç§å˜å½¢é—®é¢˜ï¼ˆæ¯”å¦‚æ ‘æ—å½¢çŠ¶å¤æ‚çš„æƒ…å†µï¼‰ã€‚  


### é¢˜è§£ä¸‰ï¼šå»ºå¢™æ³•ä¼˜åŒ–ï¼ˆæ¥æºï¼šRain_cylï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æ˜¯å»ºå¢™æ³•çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼Œé€‰æ‹©æ ‘æ—æœ€ä¸Šæ–¹ä¸”æœ€é å³çš„ç‚¹ï¼Œå‘å³å»ºå¢™ã€‚BFSæ—¶é¿å…ç©¿è¿‡å¢™ï¼Œæœ€åæšä¸¾å¢™ä¸¤æ—çš„ç‚¹å¯¹ï¼ˆåŒ…æ‹¬å¯¹è§’ï¼‰æ±‚æœ€çŸ­è·¯å¾„å’Œã€‚ä»£ç æ³¨é‡Šè¯¦ç»†ï¼Œæ¯”å¦‚`check`å‡½æ•°åˆ¤æ–­æ˜¯å¦ç©¿è¿‡å¢™ï¼Œé€»è¾‘ä¸¥è°¨ã€‚**äº®ç‚¹**ï¼šå¢™çš„ä½ç½®é€‰æ‹©æ›´åˆç†ï¼Œè¦†ç›–äº†æ›´å¤šå¯èƒ½çš„è·¯å¾„ï¼Œç¡®ä¿æ‰¾åˆ°æœ€çŸ­è§£ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•ä¿è¯è·¯å¾„ç»•æ ‘æ—ä¸€åœˆï¼Ÿ  
* **åˆ†æ**ï¼š  
  ç›´æ¥BFSä¼šèµ°æœ€çŸ­è·¯å¾„ï¼Œæ— æ³•ç»•æ ‘æ—ã€‚è§£å†³æ–¹æ³•æ˜¯**ç»™è·¯å¾„åŠ çº¦æŸ**ï¼š  
  - å»ºå¢™æ³•ï¼šåœ¨æ ‘æ—æ—è¾¹å»ºä¸€é“å¢™ï¼ŒBFSæ—¶ä¸å…è®¸ç©¿è¿‡å¢™ï¼Œè·¯å¾„å¿…é¡»ç»•å¢™èµ°ã€‚  
  - è™šæ‹Ÿå°„çº¿æ³•ï¼šç”¨è™šæ‹Ÿå°„çº¿è®°å½•èŠ‚ç‚¹æ˜¯å¦åœ¨æ ‘æ—å†…ï¼Œç»•ä¸€åœˆåçŠ¶æ€ä¼šå˜åŒ–ï¼ˆæ¯”å¦‚ä»0å˜1ï¼‰ï¼Œå› æ­¤æ±‚çŠ¶æ€å˜åŒ–åçš„æœ€çŸ­è·¯å¾„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçº¦æŸæ¡ä»¶æ˜¯è§£å†³â€œç»•åœˆâ€é—®é¢˜çš„å…³é”®ï¼Œè¦å­¦ä¼šå°†é—®é¢˜è½¬åŒ–ä¸ºâ€œæœ‰çº¦æŸçš„æœ€çŸ­è·¯å¾„â€ã€‚  


### 2. å¦‚ä½•é«˜æ•ˆè®¡ç®—æœ€çŸ­è·¯å¾„ï¼Ÿ  
* **åˆ†æ**ï¼š  
  å…«æ–¹å‘ç§»åŠ¨çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œ**BFSæ˜¯æœ€ä¼˜é€‰æ‹©**ï¼ˆå› ä¸ºBFSçš„é€å±‚æ¢ç´¢ä¿è¯äº†ç¬¬ä¸€æ¬¡åˆ°è¾¾èŠ‚ç‚¹çš„è·¯å¾„æ˜¯æœ€çŸ­çš„ï¼‰ã€‚é¢˜è§£ä¸­æ‰€æœ‰æ–¹æ³•éƒ½ç”¨äº†BFSï¼Œå› ä¸ºå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(R*C)`ï¼Œé€‚åˆ`R,Câ‰¤50`çš„è§„æ¨¡ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœ€çŸ­è·¯å¾„é—®é¢˜ä¼˜å…ˆè€ƒè™‘BFSï¼Œå°¤å…¶æ˜¯ç½‘æ ¼ç±»é—®é¢˜ã€‚  


### 3. å¦‚ä½•å¤„ç†å¢™/å°„çº¿çš„ä½ç½®ï¼Ÿ  
* **åˆ†æ**ï¼š  
  å¢™/å°„çº¿çš„ä½ç½®è¦**ä¸ä¸æ ‘æ—é‡åˆ**ï¼Œä¸”èƒ½æœ‰æ•ˆåˆ†å‰²è·¯å¾„ã€‚æ¯”å¦‚å»ºå¢™æ³•é€‰æ‹©æ ‘æ—æœ€ä¸Šæ–¹çš„ç‚¹ï¼Œå‘å³å»ºå¢™ï¼›è™šæ‹Ÿå°„çº¿æ³•é€‰æ‹©æŸæ£µæ ‘å‘ä¸‹å‘å°„å°„çº¿ã€‚è¿™æ ·èƒ½ç¡®ä¿è·¯å¾„å¿…é¡»ç»•æ ‘æ—ä¸€åœˆã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç»†èŠ‚å¤„ç†å¾ˆé‡è¦ï¼Œå¢™/å°„çº¿çš„ä½ç½®é€‰å¾—å¥½ï¼Œèƒ½ç®€åŒ–é—®é¢˜å¹¶é¿å…é”™è¯¯ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é—®é¢˜è½¬åŒ–**ï¼šå°†â€œç»•æ ‘æ—â€è½¬åŒ–ä¸ºâ€œæœ‰çº¦æŸçš„æœ€çŸ­è·¯å¾„â€ï¼ˆå¦‚å»ºå¢™ã€çŠ¶æ€è®°å½•ï¼‰ã€‚  
- **ç®—æ³•é€‰æ‹©**ï¼šç½‘æ ¼æœ€çŸ­è·¯å¾„ç”¨BFSï¼Œæ•ˆç‡é«˜ä¸”æ˜“å®ç°ã€‚  
- **ç»†èŠ‚å¤„ç†**ï¼šå¢™/å°„çº¿çš„ä½ç½®è¦åˆç†ï¼Œé¿å…ä¸æ ‘æ—æˆ–èµ·ç‚¹é‡åˆã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆå»ºå¢™æ³•ï¼‰  
* **è¯´æ˜**ï¼šç»¼åˆAutumnKiteå’ŒRain_cylçš„é¢˜è§£ï¼Œæç‚¼å‡ºå»ºå¢™æ³•çš„æ ¸å¿ƒå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <queue>
  #include <cstring>
  #include <algorithm>
  using namespace std;

  const int N = 55;
  const int dx[] = {-1, -1, -1, 0, 0, 1, 1, 1};
  const int dy[] = {-1, 0, 1, -1, 1, -1, 0, 1}; // å…«æ–¹å‘

  int n, m;
  char g[N][N];
  int d[N][N]; // èµ·ç‚¹åˆ°å„ç‚¹çš„è·ç¦»
  int sx, sy; // èµ·ç‚¹åæ ‡
  int zx, zy; // å¢™çš„ä½ç½®ï¼ˆæ ‘æ—æœ€ä¸Šæ–¹çš„ç‚¹å‘å³ï¼‰

  bool check(int x1, int y1, int x2, int y2) {
      // åˆ¤æ–­ä»(x1,y1)åˆ°(x2,y2)æ˜¯å¦ç©¿è¿‡å¢™
      if (x1 > x2) swap(x1, x2), swap(y1, y2);
      return (x1 == zx && x2 == zx + 1 && y1 > zy);
  }

  void bfs() {
      queue<pair<int, int>> q;
      memset(d, -1, sizeof(d));
      d[sx][sy] = 0;
      q.push({sx, sy});
      while (!q.empty()) {
          auto t = q.front();
          q.pop();
          int x = t.first, y = t.second;
          for (int i = 0; i < 8; i++) {
              int nx = x + dx[i], ny = y + dy[i];
              if (nx < 1 || nx > n || ny < 1 || ny > m) continue;
              if (g[nx][ny] == 'X') continue; // ä¸èƒ½èµ°æ ‘æ—
              if (d[nx][ny] != -1) continue; // å·²è®¿é—®
              if (check(x, y, nx, ny)) continue; // ä¸èƒ½ç©¿è¿‡å¢™
              d[nx][ny] = d[x][y] + 1;
              q.push({nx, ny});
          }
      }
  }

  int main() {
      cin >> n >> m;
      zx = n, zy = 1; // åˆå§‹åŒ–å¢™çš„ä½ç½®ä¸ºå³ä¸‹è§’
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              cin >> g[i][j];
              if (g[i][j] == '*') sx = i, sy = j;
              if (g[i][j] == 'X') {
                  // æ‰¾æ ‘æ—æœ€ä¸Šæ–¹çš„ç‚¹ï¼ˆiæœ€å°ï¼‰ï¼Œè‹¥iç›¸åŒåˆ™æ‰¾æœ€å³çš„ï¼ˆjæœ€å¤§ï¼‰
                  if (i < zx || (i == zx && j > zy)) {
                      zx = i;
                      zy = j;
                  }
              }
          }
      }
      zx++; // å¢™åœ¨æ ‘æ—å³ä¾§ï¼ˆi+1ï¼Œjä¸å˜ï¼‰
      bfs();
      // æšä¸¾å¢™ä¸¤æ—çš„ç‚¹å¯¹ï¼ˆzy+1åˆ—çš„ç‚¹ä¸zyåˆ—çš„ç‚¹ï¼‰
      int res = 0x3f3f3f3f;
      for (int i = 1; i <= n; i++) {
          if (d[i][zy + 1] == -1) continue;
          // å¢™ä¸¤æ—çš„ç‚¹å¯¹ï¼š(i, zy+1)ä¸(i-1, zy), (i, zy), (i+1, zy)ï¼ˆå…è®¸å¯¹è§’ï¼‰
          if (i - 1 >= 1 && d[i - 1][zy] != -1) res = min(res, d[i][zy + 1] + d[i - 1][zy]);
          if (d[i][zy] != -1) res = min(res, d[i][zy + 1] + d[i][zy]);
          if (i + 1 <= n && d[i + 1][zy] != -1) res = min(res, d[i][zy + 1] + d[i + 1][zy]);
      }
      cout << res + 1 << endl; // +1æ˜¯å› ä¸ºè¦èµ°å›èµ·ç‚¹
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–ç½‘æ ¼ï¼Œè®°å½•èµ·ç‚¹åæ ‡ï¼Œæ‰¾åˆ°æ ‘æ—æœ€ä¸Šæ–¹çš„ç‚¹ï¼ˆç”¨äºå»ºå¢™ï¼‰ã€‚  
  2. **å»ºå¢™**ï¼šå¢™çš„ä½ç½®æ˜¯æ ‘æ—æœ€ä¸Šæ–¹ç‚¹çš„å³ä¾§ï¼ˆ`zx = æ ‘æ—i+1ï¼Œzy = æ ‘æ—j`ï¼‰ã€‚  
  3. **BFS**ï¼šè®¡ç®—èµ·ç‚¹åˆ°å„ç‚¹çš„è·ç¦»ï¼Œä¸å…è®¸ç©¿è¿‡å¢™æˆ–æ ‘æ—ã€‚  
  4. **æ±‚ç­”æ¡ˆ**ï¼šæšä¸¾å¢™ä¸¤æ—çš„ç‚¹å¯¹ï¼Œè®¡ç®—æœ€çŸ­è·¯å¾„å’Œï¼ŒåŠ 1ï¼ˆèµ°å›èµ·ç‚¹ï¼‰ã€‚  


### é¢˜è§£ä¸€ï¼ˆå»ºå¢™æ³•ï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨`check`å‡½æ•°åˆ¤æ–­æ˜¯å¦ç©¿è¿‡å¢™ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  bool check(int x1, int y1, int x2, int y2) {
      if (x1 > x2) swap(x1, x2), swap(y1, y2);
      return (x1 == zx && x2 == zx + 1 && y1 > zy);
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™ä¸ªå‡½æ•°åˆ¤æ–­ä»`(x1,y1)`åˆ°`(x2,y2)`æ˜¯å¦ç©¿è¿‡å¢™ã€‚å¢™çš„ä½ç½®æ˜¯`zx`è¡Œ`zy`åˆ—ï¼ˆæ ‘æ—å³ä¾§ï¼‰ï¼Œæ‰€ä»¥å½“ç§»åŠ¨æ–¹å‘æ˜¯ä»`zx`è¡Œåˆ°`zx+1`è¡Œï¼Œä¸”`y1 > zy`æ—¶ï¼Œè¯´æ˜ç©¿è¿‡äº†å¢™ï¼Œè¿”å›`true`ï¼ŒBFSæ—¶ä¼šè·³è¿‡è¿™ä¸ªæ–¹å‘ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨å‡½æ•°å°è£…åˆ¤æ–­é€»è¾‘ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€‚  


### é¢˜è§£äºŒï¼ˆè™šæ‹Ÿå°„çº¿æ³•ï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨`dp[x][y][k]`è®°å½•çŠ¶æ€ï¼Œå¤„ç†ç»•åœˆé—®é¢˜ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int dp[105][105][2]; // dp[x][y][k]ï¼šåˆ°(x,y)ä¸”ç©¿è¿‡å°„çº¿æ¬¡æ•°ä¸ºkçš„æœ€çŸ­è·ç¦»
  bool sur() {
      if (dx == bx && dy < by) { if (nx < bx) return 1; }
      else if (nx == bx && ny < by) { if (dx < bx) return 1; }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  `dp[x][y][k]`ä¸­çš„`k`è¡¨ç¤ºç©¿è¿‡å°„çº¿çš„æ¬¡æ•°ï¼ˆ0æˆ–1ï¼‰ã€‚`sur`å‡½æ•°åˆ¤æ–­ç§»åŠ¨æ˜¯å¦ç©¿è¿‡å°„çº¿ï¼ˆ`bx`æ˜¯å°„çº¿çš„xåæ ‡ï¼Œ`by`æ˜¯å°„çº¿çš„yåæ ‡ï¼‰ã€‚å½“ç©¿è¿‡å°„çº¿æ—¶ï¼Œ`k`ä¼šç¿»è½¬ï¼ˆ`k ^= 1`ï¼‰ã€‚æœ€åæ±‚`dp[sx][sy][1]`ï¼ˆå›åˆ°èµ·ç‚¹ä¸”ç©¿è¿‡å°„çº¿ä¸€æ¬¡ï¼Œå³ç»•äº†ä¸€åœˆï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€å‹ç¼©æ˜¯å¤„ç†å¤æ‚é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ï¼Œæ¯”å¦‚è®°å½•æ˜¯å¦ç©¿è¿‡å°„çº¿ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶ç»•æ ‘æ—ä¹‹æ—…ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰  
**è®¾è®¡æ€è·¯**ï¼šç”¨FCçº¢ç™½æœºçš„é£æ ¼å±•ç¤ºç½‘æ ¼ï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°BFSå¦‚ä½•ç»•æ ‘æ—ã€‚é€šè¿‡â€œå¢™â€å’Œâ€œå°„çº¿â€çš„å¯è§†åŒ–ï¼Œç†è§£çº¦æŸæ¡ä»¶çš„ä½œç”¨ã€‚åŠ å…¥éŸ³æ•ˆå’Œäº¤äº’ï¼Œå¢å¼ºè¶£å‘³æ€§ã€‚  


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹ä¸æ­¥éª¤  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - ç½‘æ ¼ï¼š`R`è¡Œ`C`åˆ—ï¼Œç©ºåœ°=æµ…ç°è‰²ï¼ˆ`#CCCCCC`ï¼‰ï¼Œæ ‘æ—=æ·±ç»¿è‰²ï¼ˆ`#006600`ï¼‰ï¼Œèµ·ç‚¹=é»„è‰²ï¼ˆ`#FFFF00`ï¼‰*ï¼Œå¢™=çº¢è‰²ï¼ˆ`#FF0000`ï¼‰|ã€‚  
   - æ§åˆ¶é¢æ¿ï¼šåŒ…å«â€œå¼€å§‹â€ã€â€œæš‚åœâ€ã€â€œå•æ­¥â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1-5å€é€Ÿï¼‰ï¼Œæ˜¾ç¤ºå½“å‰æ­¥éª¤çš„ä¼ªä»£ç ï¼ˆå¦‚â€œBFSå¤„ç†èŠ‚ç‚¹(3,4)â€ï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»å¿«æ—‹å¾‹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **BFSè¿‡ç¨‹æ¼”ç¤º**ï¼š  
   - **èŠ‚ç‚¹è®¿é—®**ï¼šå½“å‰å¤„ç†çš„èŠ‚ç‚¹ç”¨æµ…è“è‰²ï¼ˆ`#00CCFF`ï¼‰é«˜äº®ï¼Œé˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹ç”¨æ·±è“è‰²ï¼ˆ`#0000FF`ï¼‰æ ‡è®°ã€‚æ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼ˆ`ding.wav`ï¼‰ã€‚  
   - **å¢™çš„ä½œç”¨**ï¼šå½“èŠ‚ç‚¹è¯•å›¾ç©¿è¿‡å¢™æ—¶ï¼Œç”¨çº¢è‰²é—ªçƒæç¤ºâ€œä¸èƒ½ç©¿è¿‡å¢™â€ï¼Œå¹¶è·³è¿‡è¿™ä¸ªæ–¹å‘ã€‚  
   - **çŠ¶æ€å˜åŒ–ï¼ˆè™šæ‹Ÿå°„çº¿æ³•ï¼‰**ï¼šå½“èŠ‚ç‚¹ç©¿è¿‡å°„çº¿æ—¶ï¼ŒçŠ¶æ€`k`ä»0å˜1ï¼Œç”¨é»„è‰²é—ªçƒæç¤ºâ€œç©¿è¿‡å°„çº¿â€ï¼Œå¹¶æ›´æ–°`dp`æ•°ç»„ã€‚  

3. **è·¯å¾„ç”Ÿæˆ**ï¼š  
   - æ‰¾åˆ°æœ€çŸ­è·¯å¾„åï¼Œç”¨æ©™è‰²ï¼ˆ`#FF9900`ï¼‰+æ ‡è®°è·¯å¾„ï¼Œä»èµ·ç‚¹åˆ°å¢™ä¸¤æ—çš„ç‚¹å¯¹ï¼Œå†å›åˆ°èµ·ç‚¹ã€‚æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆ`win.wav`ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œç»•åœˆæˆåŠŸï¼æœ€çŸ­è·¯å¾„é•¿åº¦ï¼š11â€ã€‚  

4. **äº¤äº’æ§åˆ¶**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œä¸€æ­¥æ­¥çœ‹BFSè¿‡ç¨‹ï¼Œæ¯æ­¥æ˜¾ç¤ºå½“å‰å¤„ç†çš„èŠ‚ç‚¹å’Œé˜Ÿåˆ—ã€‚  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨æ’­æ”¾â€æŒ‰é’®ï¼ŒåŠ¨ç”»æŒ‰é€Ÿåº¦æ»‘å—çš„é€Ÿåº¦è‡ªåŠ¨è¿›è¡Œã€‚  
   - **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚  


### æŠ€æœ¯å®ç°ç»†èŠ‚  
- **Canvasç»˜åˆ¶**ï¼šç”¨`ctx.fillRect`ç»˜åˆ¶ç½‘æ ¼ï¼Œ`ctx.fillText`æ˜¾ç¤ºæ–‡å­—ã€‚  
- **éŸ³æ•ˆè§¦å‘**ï¼šç”¨`Audio`å¯¹è±¡æ’­æ”¾éŸ³æ•ˆï¼Œæ¯”å¦‚èŠ‚ç‚¹è®¿é—®æ—¶æ’­æ”¾`ding.wav`ï¼Œèƒœåˆ©æ—¶æ’­æ”¾`win.wav`ã€‚  
- **çŠ¶æ€ç®¡ç†**ï¼šç”¨å˜é‡è®°å½•å½“å‰æ­¥éª¤ã€é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹ã€`d`æ•°ç»„çš„å€¼ï¼Œç¡®ä¿åŠ¨ç”»åŒæ­¥ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **å»ºå¢™æ³•**ï¼šé€‚ç”¨äºâ€œç»•éšœç¢ç‰©ä¸€åœˆâ€çš„é—®é¢˜ï¼Œæ¯”å¦‚æ±‚ç»•å¤šè¾¹å½¢çš„æœ€çŸ­è·¯å¾„ã€‚  
- **è™šæ‹Ÿå°„çº¿æ³•**ï¼šé€‚ç”¨äºâ€œåˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…â€çš„é—®é¢˜ï¼Œæ¯”å¦‚æ±‚å¤šè¾¹å½¢çš„é¢ç§¯ã€åˆ¤æ–­ç‚¹çš„ä½ç½®ã€‚  
- **BFS+çº¦æŸ**ï¼šé€‚ç”¨äºâ€œæœ‰æ¡ä»¶çš„æœ€çŸ­è·¯å¾„â€é—®é¢˜ï¼Œæ¯”å¦‚æ±‚é¿å¼€æŸäº›åŒºåŸŸçš„æœ€çŸ­è·¯å¾„ã€‚  


### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1141 01è¿·å®«**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜ç”¨BFSæ±‚è¿é€šå—ï¼Œéœ€è¦å¤„ç†0å’Œ1çš„ç¿»è½¬ï¼Œèƒ½å·©å›ºBFSçš„åŸºç¡€ã€‚  
2. **æ´›è°· P1332 è¡€è‰²å…ˆé”‹é˜Ÿ**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜ç”¨å¤šæºBFSæ±‚æœ€çŸ­è·¯å¾„ï¼Œéœ€è¦å¤„ç†å¤šä¸ªèµ·ç‚¹ï¼Œèƒ½æ‹“å±•BFSçš„åº”ç”¨ã€‚  
3. **æ´›è°· P2895 åœ°éœ‡é€ƒç”Ÿ**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜ç”¨BFSæ±‚æœ€çŸ­è·¯å¾„ï¼Œéœ€è¦å¤„ç†éšœç¢ç‰©å’Œå‡ºå£ï¼Œèƒ½å·©å›ºâ€œæœ‰çº¦æŸçš„æœ€çŸ­è·¯å¾„â€æ€è·¯ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
- **AutumnKite**ï¼šâ€œè£¸çš„BFSè¿‡ä¸äº†ï¼Œéœ€è¦å»ºå¢™ã€‚â€â€”â€”é‡åˆ°é—®é¢˜æ—¶ï¼Œè¦æƒ³åŠæ³•ç»™ç®—æ³•åŠ çº¦æŸï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºå·²çŸ¥çš„æ¨¡å‹ã€‚  
- **ä¸€é¢—èµ›è‰‡**ï¼šâ€œè™šæ‹Ÿå°„çº¿æ³•æ˜¯ä¸€èˆ¬è§£æ³•ï¼Œé€‚åˆå„ç§å˜å½¢ã€‚â€â€”â€”æŒæ¡é€šç”¨çš„ç®—æ³•æ€æƒ³ï¼Œèƒ½è§£å†³æ›´å¤šé—®é¢˜ã€‚  
- **Rain_cyl**ï¼šâ€œå¢™çš„ä½ç½®é€‰æ‹©å¾ˆé‡è¦ï¼Œè¦ç¡®ä¿ä¸ä¸æ ‘æ—é‡åˆã€‚â€â€”â€”ç»†èŠ‚å¤„ç†èƒ½é¿å…é”™è¯¯ï¼Œæé«˜ä»£ç çš„æ­£ç¡®æ€§ã€‚  


## ç»“è¯­  
æœ¬æ¬¡åˆ†æäº†â€œç»•æ ‘æ—ä¸€åœˆâ€çš„é—®é¢˜ï¼Œæ ¸å¿ƒæ˜¯**BFS+çº¦æŸæ¡ä»¶**ã€‚é€šè¿‡å»ºå¢™æ³•å’Œè™šæ‹Ÿå°„çº¿æ³•ï¼Œæˆ‘ä»¬å°†â€œç»•åœˆâ€é—®é¢˜è½¬åŒ–ä¸ºâ€œæœ‰çº¦æŸçš„æœ€çŸ­è·¯å¾„â€é—®é¢˜ï¼Œç”¨BFSé«˜æ•ˆè§£å†³ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£BFSçš„åº”ç”¨ï¼ŒæŒæ¡è§£å†³è¿™ç±»é—®é¢˜çš„æŠ€å·§ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š188.84ç§’
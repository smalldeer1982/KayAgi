# é¢˜ç›®ä¿¡æ¯

# ã€ŒPMOI-4ã€çŒœæ’åˆ—

## é¢˜ç›®èƒŒæ™¯

**è¿™æ˜¯ä¸€é“ IO äº¤äº’é¢˜ã€‚**

**è¯·å„ä½é€‰æ‰‹ç¡®è®¤å¥½å†æäº¤ï¼Œé˜²æ­¢è¯„æµ‹æœºçˆ†ç‚¸ã€‚**

## é¢˜ç›®æè¿°

å° A æœ‰ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„**æ’åˆ—** $a$ï¼Œä»–æƒ³è¯·ä½ çŒœä¸€çŒœè¿™ä¸ªæ’åˆ—ã€‚ä½ ä»…èƒ½ç»™å‡ºä»¥ä¸‹ä¸¤ç§è¯¢é—®ï¼š

- `! x y`ï¼Œä»–å°†ä¼šå‘Šè¯‰ä½  $a_x \bmod a_y$ çš„å€¼ï¼Œå…¶ä¸­ä½ è¯¢é—®çš„æ•°åº”å½“æ»¡è¶³ $a_x\gt a_y$ ä¸” $x\ne y$ï¼›å¦åˆ™ï¼Œä»–ä¼šä¸é«˜å…´å¹¶ç›´æ¥åˆ¤å®šè¯¢é—®ä¸åˆæ³•ï¼Œä»è€Œå¯¼è‡´ `WA`ã€‚
- `? l S p`ï¼Œä½ éœ€è¦ç»™å° A ä¸€ä¸ªå¤§å°ä¸º $l$ çš„é›†åˆ $S$ ä¸ä¸€ä¸ªæ•´æ•° $p$ï¼Œå…¶ä¸­ $S=\{x_1,x_2,x_3,\ldots,x_l\}$ï¼Œå…¶ä¸­å¯¹äºä»»æ„ $1\le i\le l$ï¼Œ$1\le x_i\le n$ï¼Œä¸” $x_i$ äº’ä¸ç›¸åŒï¼Œè¿˜è¦æ»¡è¶³ $1\le p\le n$ï¼Œ$1\le l\le n$ï¼Œå° A å°†ä¼šå‘Šè¯‰ä½ è¿™ä¸ªé›†åˆä¸­ $a_{x_k} \ge p$ çš„æ‰€æœ‰çš„ $x_k$ï¼Œè¿”å›å½¢å¼å¦‚ä¸‹ï¼šé¦–å…ˆä¼šè¿”å›ä¸€ä¸ªæ•´æ•° $L$ï¼Œæ¥ç€ä¼šè¿”å› $L$ ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ‰ $L$ ä¸ªæ»¡è¶³æ¡ä»¶çš„ $k$ï¼ˆæ³¨æ„è¿”å›çš„æ˜¯é›†åˆ $S$ ä¸­çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ä¸‹æ ‡ï¼ï¼‰ã€‚

ä½ æœ€å¤šåªèƒ½å‘å° A è¯¢é—® $m_1$ ä¸ªé—®é¢˜ $1$ï¼Œ$m_2$ ä¸ªé—®é¢˜ $2$ï¼Œå…¶ä¸­é—®é¢˜äºŒä¸­è¯¢é—®çš„é›†åˆå¤§å°ä¹‹å’Œåº”ä¸è¶…è¿‡ $m_3$ æ¥çŒœå‡ºè¿™ä¸ªåºåˆ—ã€‚

## è¯´æ˜/æç¤º

ã€æ•°æ®èŒƒå›´ã€‘

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•ã€‚**

| Subtask ç¼–å· | åˆ†å€¼ |$n=$ | $m_1=$ | $m_2=$ | $m_3=$ | ç‰¹æ®Šé™åˆ¶ |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $1$ | $10$ | $4$ | $4$ | $1$ | $4$ | æ—  | 
| $2$ | $10$ | $5 \times 10^2$ | $5 \times 10^2$ | $5 \times 10^2$ | $2.5\times 10^5$ | æ—  |
| $3$ | $10$ | $2 \times 10^4$ | $2 \times 10^4$ | $2 \times 10^4$ | $3 \times 10^5$ | A |
| $4$ | $20$ | $10^4$ | $10^4$ | $30$ | $3 \times 10^5$ | æ—  |
| $5$ | $20$ | $5 \times 10^4$ | $5 \times 10^4$ | $34$ | $4 \times 10^5$ | æ—  |
| $6$ | $25$ | $5 \times 10^4$ | $5 \times 10^4$ | $17$ |  $1.5\times 10^5$ | æ—  |
| $7$ | $5$ | $5 \times 10^4$ | $5 \times 10^4$ | $15$ | $1.5\times 10^5$ | æ—  |

**Aï¼šä¿è¯æ’åˆ— $a$ éšæœºæ„é€ **ã€‚

ã€æç¤ºã€‘

1. è¯¢é—®ä¸åˆæ³•æˆ–äº¤äº’åº“è¾“å‡ºæ•°è¶…è¿‡ $m$ åç»§ç»­è¯¢é—®ä¼šç›´æ¥å¯¼è‡´ WAã€‚

2. æ•°æ®èŒƒå›´çš„é¡¶æ éƒ½æ˜¯ $=$ è€Œé $\le$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 100 100 100

1 3

1 2```

### è¾“å‡º

```
? 3 1 2 3 3

? 2 1 2 2

A 1 2 3```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šã€ŒPMOI-4 çŒœæ’åˆ—ã€æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåˆ†æ²»ç®—æ³• + äº¤äº’ç­–ç•¥ï¼ˆç»“åˆå–æ¨¡æ€§è´¨ï¼‰


### ğŸ—£ï¸ åˆæ­¥åˆ†æ
è§£å†³â€œçŒœæ’åˆ—â€é—®é¢˜çš„æ ¸å¿ƒæ€è·¯æ˜¯**ç”¨åˆ†æ²»æ€æƒ³å°†å¤§é—®é¢˜æ‹†åˆ†æˆå°é—®é¢˜**ï¼Œé€šè¿‡**äº¤äº’è¯¢é—®**é€æ­¥ç¼©å°èŒƒå›´ï¼Œæœ€ç»ˆç¡®å®šæ¯ä¸ªä½ç½®çš„æ•°å€¼ã€‚ç®€å•æ¥è¯´ï¼Œåˆ†æ²»å°±åƒâ€œæ‹†ç§¯æœ¨â€â€”â€”æŠŠä¸€ä¸ªå¤§æ’åˆ—åˆ†æˆä¸¤ä¸ªå°éƒ¨åˆ†ï¼Œå…ˆè§£å†³ä¸€éƒ¨åˆ†ï¼Œå†ç”¨è¿™éƒ¨åˆ†çš„ç»“æœè§£å†³å¦ä¸€éƒ¨åˆ†ã€‚  

#### æ ¸å¿ƒç®—æ³•æµç¨‹
1. **åˆ’åˆ†åŒºé—´**ï¼šç”¨è¯¢é—®2ï¼ˆ`? l S p`ï¼‰æ‰¾å‡ºå½“å‰æœªç¡®å®šåŒºé—´ä¸­**å¤§äºç­‰äºmid**çš„æ•°ï¼ˆmidæ˜¯å½“å‰åŒºé—´çš„ä¸­é—´å€¼ï¼‰ï¼Œå°†è¿™äº›æ•°å½’ä¸ºâ€œå¤§çš„ä¸€åŠâ€ï¼Œå‰©ä¸‹çš„å½’ä¸ºâ€œå°çš„ä¸€åŠâ€ã€‚  
2. **é€’å½’å¤„ç†å°ä¸€åŠ**ï¼šå¯¹â€œå°çš„ä¸€åŠâ€é‡å¤æ­¥éª¤1ï¼Œç›´åˆ°åŒºé—´è¶³å¤Ÿå°ï¼ˆå¦‚nâ‰¤4ï¼‰ã€‚  
3. **ç¡®å®šå¤§ä¸€åŠçš„å€¼**ï¼šç”¨â€œå°çš„ä¸€åŠâ€ä¸­çš„æœ€å¤§å€¼ï¼ˆå·²ç¡®å®šï¼‰å¯¹â€œå¤§çš„ä¸€åŠâ€ä¸­çš„æ¯ä¸ªæ•°å–æ¨¡ï¼ˆè¯¢é—®1ï¼š`! x y`ï¼‰ï¼Œåˆ©ç”¨**å¤§çš„æ•°å¯¹midå–æ¨¡çš„ç»“æœç­‰äºå…¶ä¸midçš„å·®å€¼**ï¼ˆå¦‚5 mod 3=2ï¼Œ5=3+2ï¼‰çš„æ€§è´¨ï¼Œå¿«é€Ÿç¡®å®šâ€œå¤§çš„ä¸€åŠâ€æ¯ä¸ªæ•°çš„å€¼ã€‚  

#### å¯è§†åŒ–è®¾è®¡æ€è·¯
- **åƒç´ é£æ ¼**ï¼šç”¨8ä½çº¢ç™½æœºé£æ ¼çš„ç½‘æ ¼å±•ç¤ºæ’åˆ—ä½ç½®ï¼Œä¸åŒé¢œè‰²æ ‡è®°â€œå·²ç¡®å®šâ€â€œå¤§çš„ä¸€åŠâ€â€œå°çš„ä¸€åŠâ€ï¼ˆå¦‚çº¢è‰²=å·²ç¡®å®šï¼Œè“è‰²=å¤§çš„ä¸€åŠï¼Œç»¿è‰²=å°çš„ä¸€åŠï¼‰ã€‚  
- **å…³é”®æ­¥éª¤é«˜äº®**ï¼š  
  - è¯¢é—®2æ—¶ï¼Œç”¨é—ªçƒçš„é»„è‰²æ¡†æ ‡è®°å½“å‰æŸ¥è¯¢çš„é›†åˆSå’Œpå€¼ï¼›  
  - è¯¢é—®1æ—¶ï¼Œç”¨ç®­å¤´è¿æ¥â€œå¤§çš„æ•°â€å’Œâ€œå°çš„æ•°â€ï¼Œæ˜¾ç¤ºå–æ¨¡ç»“æœï¼›  
  - é€’å½’åˆ’åˆ†æ—¶ï¼Œç”¨åŠ¨ç”»ç¼©å°å½“å‰å¤„ç†çš„åŒºé—´ï¼ˆå¦‚å±å¹•é€æ¸èšç„¦åˆ°å°çš„ä¸€åŠï¼‰ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
  - æ¯ç¡®å®šä¸€ä¸ªæ•°ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›  
  - å®Œæˆä¸€ä¸ªåŒºé—´åˆ’åˆ†ï¼Œæ˜¾ç¤ºâ€œå…³å¡å®Œæˆâ€çš„åƒç´ åŠ¨ç”»ï¼›  
  - è‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼ï¼šåƒâ€œè´ªåƒè›‡â€ä¸€æ ·é€æ­¥æ‰§è¡Œåˆ†æ²»æ­¥éª¤ï¼Œè®©å­¦ä¹ è€…è§‚å¯Ÿæ•´ä¸ªè¿‡ç¨‹ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šæ¥æºï¼šSuzt_ilymticsï¼ˆèµï¼š11ï¼‰
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**åˆ†æ²»é€»è¾‘éå¸¸æ¸…æ™°**ï¼Œä»å¤§åŒºé—´åˆ°å°åŒºé—´é€æ­¥æ‹†è§£é—®é¢˜ï¼Œæ¯ä¸€æ­¥çš„ç›®çš„éƒ½å¾ˆæ˜ç¡®ï¼ˆæ¯”å¦‚ç”¨`Divide`å‡½æ•°åˆ’åˆ†åŒºé—´ï¼‰ã€‚ä»£ç ä¸­çš„`vis`æ•°ç»„æ ‡è®°åŒºé—´å½’å±ï¼Œ`c`æ•°ç»„æ’åºåæ–¹ä¾¿å¤„ç†ï¼Œ**å–æ¨¡éƒ¨åˆ†çš„é€»è¾‘ä¸¥è°¨**ï¼ˆå¤„ç†äº†æ¨¡0çš„æƒ…å†µï¼‰ã€‚ç‰¹åˆ«å€¼å¾—å­¦ä¹ çš„æ˜¯**å¯¹å­ä»»åŠ¡çš„ç‰¹åˆ¤**ï¼ˆå¦‚n=4æ—¶ç›´æ¥å¤„ç†ï¼‰ï¼Œé¿å…äº†é€’å½’çš„ä¸å¿…è¦å¼€é”€ã€‚


### é¢˜è§£äºŒï¼šæ¥æºï¼šLonely_NewYearï¼ˆèµï¼š3ï¼‰
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„**é€’å½’æ€è·¯ç›´ç™½**ï¼Œç”¨`dfs`å‡½æ•°å¤„ç†æ¯ä¸ªåŒºé—´ï¼Œé€šè¿‡è¯¢é—®2æ‰¾å‡ºå¤§çš„ä¸€åŠï¼Œå†ç”¨é€’å½’å¤„ç†å°çš„ä¸€åŠã€‚ä»£ç ä¸­çš„`f`æ•°ç»„æ ‡è®°å±‚æ•°ï¼ˆåŒºé—´å½’å±ï¼‰ï¼Œ`a`æ•°ç»„å­˜å‚¨æ¯ä¸ªä½ç½®çš„æ•°å€¼ï¼Œ**å–æ¨¡éƒ¨åˆ†çš„æ¨å¯¼æ¸…æ™°**ï¼ˆåˆ©ç”¨mid+xç¡®å®šå¤§çš„æ•°çš„å€¼ï¼‰ã€‚äº®ç‚¹æ˜¯**å¯¹å°nçš„ç‰¹åˆ¤**ï¼ˆå¦‚n=3ã€n=4ï¼‰ï¼Œå‡å°‘äº†è¯¢é—®æ¬¡æ•°ã€‚


### é¢˜è§£ä¸‰ï¼šæ¥æºï¼šDiana773ï¼ˆèµï¼š2ï¼‰
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**å­ä»»åŠ¡åˆ†æè¯¦ç»†**ï¼Œä»10åˆ†åˆ°100åˆ†çš„æ€è·¯é€æ­¥é€’è¿›ï¼Œé€‚åˆå…¥é—¨å­¦ä¹ è€…ç†è§£ã€‚ä»£ç ä¸­çš„`fans`æ•°ç»„å­˜å‚¨æ•°å­—çš„ä½ç½®ï¼Œ`ans`æ•°ç»„å­˜å‚¨ä½ç½®çš„æ•°å€¼ï¼Œ**äº¤äº’è¯¢é—®çš„æ ¼å¼æ­£ç¡®**ï¼ˆä¸¥æ ¼æŒ‰ç…§é¢˜ç›®è¦æ±‚è¾“å‡ºï¼‰ã€‚å€¼å¾—å­¦ä¹ çš„æ˜¯**å¯¹å–æ¨¡æ€§è´¨çš„åˆ©ç”¨**ï¼ˆå¤§çš„æ•°å¯¹midå–æ¨¡çš„ç»“æœç­‰äºå…¶ä¸midçš„å·®å€¼ï¼‰ï¼Œè¿™æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•é«˜æ•ˆåˆ’åˆ†åŒºé—´ï¼Œå‡å°‘è¯¢é—®2çš„æ¬¡æ•°ï¼Ÿ**
* **åˆ†æ**ï¼šè¯¢é—®2çš„æ¬¡æ•°é™åˆ¶ï¼ˆå¦‚m2=15ï¼‰è¦æ±‚æˆ‘ä»¬ç”¨**åˆ†æ²»**è€Œéæš´åŠ›æšä¸¾ã€‚æ¯æ¬¡å°†åŒºé—´åˆ†æˆâ€œå¤§çš„ä¸€åŠâ€å’Œâ€œå°çš„ä¸€åŠâ€ï¼Œé€’å½’å¤„ç†å°çš„ä¸€åŠï¼Œè¿™æ ·è¯¢é—®2çš„æ¬¡æ•°æ˜¯O(log n)ï¼ˆå¦‚n=5e4æ—¶ï¼Œlog2(5e4)â‰ˆ16ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ²»æ˜¯è§£å†³å¤§è§„æ¨¡é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ï¼Œé€šè¿‡æ‹†åˆ†å‡å°‘æ¯æ¬¡å¤„ç†çš„è§„æ¨¡ã€‚


### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•åˆ©ç”¨å–æ¨¡æ€§è´¨ç¡®å®šæ•°çš„å€¼ï¼Ÿ**
* **åˆ†æ**ï¼šå¯¹äºâ€œå¤§çš„ä¸€åŠâ€ä¸­çš„æ•°xï¼ˆx>midï¼‰ï¼Œx mod mid = x - midï¼ˆå› ä¸ºmid < x â‰¤ 2midï¼‰ã€‚ä¾‹å¦‚ï¼Œmid=3ï¼Œx=5ï¼Œåˆ™5 mod 3=2ï¼Œx=3+2=5ã€‚è¿™æ ·ï¼Œåªè¦çŸ¥é“midçš„å€¼ï¼Œå°±èƒ½é€šè¿‡å–æ¨¡ç»“æœå¿«é€Ÿå¾—åˆ°xçš„å€¼ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå–æ¨¡çš„æ€§è´¨æ˜¯è§£å†³æœ¬é¢˜çš„å…³é”®ï¼Œè¦å­¦ä¼šè§‚å¯Ÿæ•°å€¼ä¹‹é—´çš„å…³ç³»ã€‚


### 3. **éš¾ç‚¹3ï¼šå¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆå¦‚å°nçš„ç‰¹åˆ¤ï¼‰**
* **åˆ†æ**ï¼šå½“nâ‰¤4æ—¶ï¼Œåˆ†æ²»çš„æ•ˆç‡ä¸é«˜ï¼Œç›´æ¥ç”¨ç‰¹åˆ¤æ›´é«˜æ•ˆã€‚ä¾‹å¦‚ï¼Œn=4æ—¶ï¼Œç”¨ä¸€æ¬¡è¯¢é—®2æ‰¾å‡º3å’Œ4çš„ä½ç½®ï¼Œå†ç”¨å–æ¨¡ç¡®å®š1å’Œ2çš„ä½ç½®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œæƒ…å†µå¾€å¾€éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œé¿å…é€’å½’çš„ä¸å¿…è¦å¼€é”€ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **åˆ†æ²»æ‹†åˆ†**ï¼šå°†å¤§é—®é¢˜æ‹†åˆ†æˆå°é—®é¢˜ï¼Œé€æ­¥è§£å†³ï¼›  
- **å–æ¨¡æ€§è´¨**ï¼šåˆ©ç”¨å¤§çš„æ•°å¯¹midå–æ¨¡çš„ç»“æœç­‰äºå…¶ä¸midçš„å·®å€¼ï¼›  
- **ç‰¹åˆ¤è¾¹ç•Œ**ï¼šå¯¹å°nç›´æ¥å¤„ç†ï¼Œå‡å°‘è¯¢é—®æ¬¡æ•°ï¼›  
- **äº¤äº’æ ¼å¼**ï¼šä¸¥æ ¼æŒ‰ç…§é¢˜ç›®è¦æ±‚è¾“å‡ºè¯¢é—®ï¼Œé¿å…æ ¼å¼é”™è¯¯ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆäº†Suzt_ilymticså’ŒLonely_NewYearçš„é¢˜è§£æ€è·¯ï¼Œæå–äº†åˆ†æ²»å’Œå–æ¨¡çš„æ ¸å¿ƒé€»è¾‘ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  using namespace std;

  const int MAXN = 5e4 + 5;
  int n, m1, m2, m3;
  int ans[MAXN], vis[MAXN], c[MAXN];
  vector<int> stc;

  void Divide(int l, int r, int col) {
      int mid = (r + 1) / 2 + 1;
      if (mid == 2) {
          for (int i = 1; i <= n; ++i) if (!vis[i]) vis[i] = col;
          sort(c + 1, c + n + 1, [&](int x, int y) { return vis[x] > vis[y]; });
          return;
      }
      stc.clear();
      for (int i = 1; i <= n; ++i) if (!vis[i]) stc.push_back(i);
      printf("? %d ", (int)stc.size());
      for (int x : stc) printf("%d ", x);
      printf("%d\n", mid);
      fflush(stdout);
      int k;
      cin >> k;
      for (int i = 0; i < k; ++i) {
          int x;
          cin >> x;
          vis[x] = col;
      }
      Divide(l, mid - 1, col + 1);
  }

  int main() {
      cin >> n >> m1 >> m2 >> m3;
      for (int i = 1; i <= n; ++i) c[i] = i;
      Divide(1, n, 1);
      // å¤„ç†å°nçš„ç‰¹åˆ¤ï¼ˆå¦‚n=4ï¼‰å’Œå–æ¨¡éƒ¨åˆ†ï¼ˆç•¥ï¼‰
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  - `Divide`å‡½æ•°ï¼šé€’å½’åˆ’åˆ†åŒºé—´ï¼Œç”¨è¯¢é—®2æ‰¾å‡ºå¤§çš„ä¸€åŠï¼Œæ ‡è®°å…¶å½’å±ï¼ˆ`vis`æ•°ç»„ï¼‰ï¼›  
  - `main`å‡½æ•°ï¼šåˆå§‹åŒ–æ•°ç»„ï¼Œè°ƒç”¨`Divide`å‡½æ•°å¼€å§‹åˆ†æ²»ï¼›  
  - åç»­éœ€è¦å¤„ç†å°nçš„ç‰¹åˆ¤å’Œå–æ¨¡éƒ¨åˆ†ï¼Œç¡®å®šæ¯ä¸ªä½ç½®çš„æ•°å€¼ã€‚


### é¢˜è§£ä¸€ï¼ˆSuzt_ilymticsï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ
* **äº®ç‚¹**ï¼šåˆ†æ²»é€»è¾‘æ¸…æ™°ï¼Œç”¨`vis`æ•°ç»„æ ‡è®°åŒºé—´å½’å±ï¼Œ`c`æ•°ç»„æ’åºåæ–¹ä¾¿å¤„ç†ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
  ```cpp
  void Divide(int l, int r, int col) {
      int mid = (r + 1) / 2 + 1;
      if (mid == 2) {
          for (int i = 1; i <= n; ++i) if (!vis[i]) vis[i] = col;
          sort(c + 1, c + n + 1, [&](int x, int y) { return vis[x] > vis[y]; });
          return;
      }
      stc.clear();
      for (int i = 1; i <= n; ++i) if (!vis[i]) stc.push_back(i);
      printf("? %d ", (int)stc.size());
      for (int x : stc) printf("%d ", x);
      printf("%d\n", mid);
      fflush(stdout);
      int k;
      cin >> k;
      for (int i = 0; i < k; ++i) {
          int x;
          cin >> x;
          vis[x] = col;
      }
      Divide(l, mid - 1, col + 1);
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `mid`ï¼šå½“å‰åŒºé—´çš„ä¸­é—´å€¼ï¼ˆå¤§çš„ä¸€åŠçš„èµ·å§‹å€¼ï¼‰ï¼›  
  - `stc`ï¼šå­˜å‚¨æœªç¡®å®šçš„ä½ç½®ï¼›  
  - è¯¢é—®2ï¼šè¾“å‡ºæœªç¡®å®šçš„ä½ç½®å’Œmidï¼Œè·å–å¤§çš„ä¸€åŠçš„ä½ç½®ï¼›  
  - æ ‡è®°`vis`æ•°ç»„ï¼šå°†å¤§çš„ä¸€åŠçš„ä½ç½®æ ‡è®°ä¸ºå½“å‰å±‚ï¼ˆ`col`ï¼‰ï¼›  
  - é€’å½’å¤„ç†å°çš„ä¸€åŠï¼ˆ`mid-1`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ²»çš„å…³é”®æ˜¯æ­£ç¡®åˆ’åˆ†åŒºé—´ï¼Œå¹¶ç”¨æ•°ç»„æ ‡è®°åŒºé—´å½’å±ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### ğŸ® åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶çš„â€œåˆ†æ²»é—¯å…³â€
- **é£æ ¼**ï¼š8ä½çº¢ç™½æœºé£æ ¼ï¼Œç”¨ç½‘æ ¼å±•ç¤ºæ’åˆ—ä½ç½®ï¼Œé¢œè‰²æ ‡è®°çŠ¶æ€ï¼ˆçº¢è‰²=å·²ç¡®å®šï¼Œè“è‰²=å¤§çš„ä¸€åŠï¼Œç»¿è‰²=å°çš„ä¸€åŠï¼‰ã€‚  
- **æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤º1~nçš„åƒç´ ä½ç½®ï¼ŒèƒŒæ™¯ä¸ºæµ…ç°è‰²ã€‚  
  2. **åˆ’åˆ†åŒºé—´**ï¼šç”¨é»„è‰²æ¡†æ ‡è®°å½“å‰æŸ¥è¯¢çš„é›†åˆSï¼ˆæœªç¡®å®šçš„ä½ç½®ï¼‰ï¼Œé¡¶éƒ¨æ˜¾ç¤ºpå€¼ï¼ˆmidï¼‰ã€‚  
  3. **ç»“æœåé¦ˆ**ï¼šè“è‰²é—ªçƒæ ‡è®°å¤§çš„ä¸€åŠçš„ä½ç½®ï¼Œç»¿è‰²æ ‡è®°å°çš„ä¸€åŠçš„ä½ç½®ã€‚  
  4. **é€’å½’å¤„ç†**ï¼šå±å¹•é€æ¸èšç„¦åˆ°å°çš„ä¸€åŠçš„ä½ç½®ï¼Œé‡å¤æ­¥éª¤2~3ã€‚  
  5. **å–æ¨¡ç¡®å®šå€¼**ï¼šç”¨ç®­å¤´è¿æ¥å¤§çš„ä½ç½®å’Œå°çš„ä½ç½®ï¼ˆmidï¼‰ï¼Œæ˜¾ç¤ºå–æ¨¡ç»“æœï¼ˆå¦‚â€œ5 mod 3=2â€ï¼‰ï¼Œçº¢è‰²æ ‡è®°å·²ç¡®å®šçš„ä½ç½®ã€‚  
- **äº¤äº’æ§åˆ¶**ï¼š  
  - å•æ­¥æ‰§è¡Œï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€æŒ‰é’®ï¼Œé€æ­¥æ‰§è¡Œåˆ†æ²»æ­¥éª¤ï¼›  
  - è‡ªåŠ¨æ’­æ”¾ï¼šé€‰æ‹©é€Ÿåº¦ï¼ˆæ…¢/ä¸­/å¿«ï¼‰ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ‰§è¡Œï¼›  
  - é‡ç½®ï¼šæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
  - æ¯ç¡®å®šä¸€ä¸ªä½ç½®ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›  
  - å®Œæˆä¸€ä¸ªåŒºé—´åˆ’åˆ†ï¼Œæ˜¾ç¤ºâ€œå…³å¡å®Œæˆâ€çš„åƒç´ åŠ¨ç”»ï¼ˆå¦‚æ˜Ÿæ˜Ÿé—ªçƒï¼‰ï¼›  
  - é€šå…³ï¼ˆæ‰€æœ‰ä½ç½®ç¡®å®šï¼‰ï¼šæ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼Œæ˜¾ç¤ºâ€œä½ èµ¢äº†ï¼â€çš„åƒç´ æ–‡å­—ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»
- **åˆ†æ²»æ€æƒ³**ï¼šå¯ç”¨äºè§£å†³å¤§è§„æ¨¡çš„æœç´¢æˆ–æ’åºé—®é¢˜ï¼ˆå¦‚å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºï¼‰ï¼›  
- **äº¤äº’ç­–ç•¥**ï¼šå¯ç”¨äºè§£å†³éœ€è¦ä¸è¯„æµ‹æœºäº¤äº’çš„é—®é¢˜ï¼ˆå¦‚çŒœæ•°å­—ã€æ‰¾æœ€å¤§å€¼ï¼‰ï¼›  
- **å–æ¨¡æ€§è´¨**ï¼šå¯ç”¨äºè§£å†³æ•°å€¼å…³ç³»é—®é¢˜ï¼ˆå¦‚æ±‚ä½™æ•°ã€åˆ¤æ–­å¥‡å¶ï¼‰ã€‚


### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰
1. **æ´›è°· P1032** - å­—ä¸²å˜æ¢  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿåˆ†æ²»å’Œäº¤äº’ç­–ç•¥ï¼Œéœ€è¦å°†å¤§é—®é¢˜æ‹†åˆ†æˆå°é—®é¢˜ï¼Œé€æ­¥è§£å†³ã€‚  
2. **æ´›è°· P1084** - ç–«æƒ…æ§åˆ¶  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿåˆ†æ²»å’Œè´ªå¿ƒæ€æƒ³ï¼Œéœ€è¦åˆç†åˆ’åˆ†åŒºé—´ï¼Œä¼˜åŒ–å¤„ç†æ­¥éª¤ã€‚  
3. **æ´›è°· P2050** - ç¾é£ŸèŠ‚  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿåˆ†æ²»å’ŒåŠ¨æ€è§„åˆ’ï¼Œéœ€è¦å°†å¤§é—®é¢˜æ‹†åˆ†æˆå°é—®é¢˜ï¼Œç”¨åŠ¨æ€è§„åˆ’è§£å†³å­é—®é¢˜ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰
> **å‚è€ƒç»éªŒï¼ˆæ¥è‡ªSuzt_ilymticsï¼‰**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ²¡æœ‰è€ƒè™‘åˆ°åˆ†æ²»çš„æ€æƒ³ï¼Œå¯¼è‡´è¯¢é—®æ¬¡æ•°è¶…æ ‡ã€‚åæ¥é€šè¿‡è§‚å¯Ÿå–æ¨¡çš„æ€§è´¨ï¼Œæƒ³åˆ°ç”¨åˆ†æ²»åˆ’åˆ†åŒºé—´ï¼Œæ‰è§£å†³äº†é—®é¢˜ã€‚â€  
> **ç‚¹è¯„**ï¼šåˆ†æ²»æ˜¯è§£å†³å¤§è§„æ¨¡é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ï¼Œè¦å­¦ä¼šè§‚å¯Ÿé—®é¢˜çš„æ€§è´¨ï¼Œæ‰¾åˆ°æ‹†åˆ†çš„ä¾æ®ã€‚


## ğŸ“ æ€»ç»“
æœ¬æ¬¡åˆ†æäº†â€œPMOI-4 çŒœæ’åˆ—â€çš„æ ¸å¿ƒç®—æ³•ï¼ˆåˆ†æ²»+äº¤äº’ç­–ç•¥ï¼‰ï¼Œå¹¶é€šè¿‡ä¼˜è´¨é¢˜è§£ã€ä»£ç èµæå’Œå¯è§†åŒ–è®¾è®¡ï¼Œå¸®åŠ©å¤§å®¶ç†è§£è§£é¢˜æ€è·¯ã€‚è®°ä½ï¼Œåˆ†æ²»çš„å…³é”®æ˜¯æ‹†åˆ†é—®é¢˜ï¼Œå–æ¨¡çš„æ€§è´¨æ˜¯è§£å†³æœ¬é¢˜çš„æ ¸å¿ƒï¼Œè¾¹ç•Œæƒ…å†µéœ€è¦ç‰¹åˆ¤ã€‚å¸Œæœ›å¤§å®¶é€šè¿‡ç»ƒä¹ ï¼ŒæŒæ¡è¿™äº›æŠ€å·§ï¼Œè§£å†³æ›´å¤šç±»ä¼¼é—®é¢˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š133.18ç§’
# é¢˜ç›®ä¿¡æ¯

# å½©çƒæ ‘

## é¢˜ç›®æè¿°

å°Zæ˜¯ä¸€ä¸ªèªæ˜çš„å°å­¦ç”Ÿï¼Œä»–ç”¨å¡‘æ–™ç®¡å’Œæ©¡çš®æ³¥æ­æˆäº†ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªæ©¡çš®æ³¥ä¸Šéƒ½è¿æ¥ç€ä¸€ä¸ªå‘ä¸‹çš„å¡‘æ–™ç®¡ï¼Œæœ‰çš„è¿æ¥ç€ä¸¤æ ¹å‘ä¸Šçš„å¡‘æ–™ç®¡ï¼Œæœ‰çš„åˆ™è¿æ¥ç€ä¸€äº›å½©çƒã€‚

ç„¶è€Œï¼Œè¿™ä¸ªå·¥è‰ºå“å¾ˆå¿«å› ä¸ºä¸å¹³è¡¡å€’äº†ä¸‹æ¥ã€‚äºæ˜¯ï¼Œå°Zè¯·æ•™äº†å’Œä»–åœ¨åŒä¸€ä¸ªç­ä¸Šçš„å¦¹å­å°Cã€‚åœ¨ç™¾ç§‘å…¨ä¹¦ä¸Šçœ‹åˆ°å¤©å¹³å¹³è¡¡åŸç†çš„å°CçŸ¥é“ï¼Œå¦‚æœä»»ä½•ä¸€å—æ©¡çš®æ³¥å‘ä¸Šè¿æ¥çš„ä¸¤æ ¹ç®¡å­çš„è½½é‡é‡ä¹‹å·®è¶…è¿‡ä¸€ä¸ªå½©çƒçš„é‡é‡ï¼Œå·¥è‰ºå“å°±ä¼šä¸å¹³è¡¡å€’ä¸‹æ¥ã€‚ç”±äºå½©çƒæ¯”è¾ƒé‡ï¼Œæ©¡çš®æ³¥å’Œå¡‘æ–™ç®¡çš„é‡é‡å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚

ç”±äºç§»åŠ¨å½©çƒéœ€è¦èŠ±æ—¶é—´æ‹†å¸å’Œå›ºå®šï¼Œå°Cå¸Œæœ›ç§»åŠ¨æœ€å°‘æ¬¡æ•°å½©çƒè®©è¿™ä¸ªå·¥è‰ºå“å¹³è¡¡èµ·æ¥ã€‚ä½ èƒ½å¸®åŠ©å¥¹å—ï¼Ÿ


## è¯´æ˜/æç¤º

ã€å›¾è§£ã€‘

[PIC=1259]

ã€æ•°æ®è§„æ¨¡ã€‘

å¯¹äº 15% çš„æ•°æ®ï¼Œä¿è¯è¾“å…¥æ–‡ä»¶ä¸è¶…è¿‡ 25 å­—èŠ‚ã€‚

å¯¹äº 50% çš„æ•°æ®ï¼Œä¿è¯è¾“å…¥æ–‡ä»¶ä¸è¶…è¿‡ 250 å­—èŠ‚ã€‚

å¯¹äº 100% çš„æ•°æ®ï¼Œä¿è¯è¾“å…¥æ–‡ä»¶ä¸è¶…è¿‡ 5000 å­—èŠ‚ã€‚

ï¼ˆPSï¼š1å­—èŠ‚â‰ˆ1å­—ç¬¦ï¼‰

ã€æ—¶ç©ºé™åˆ¶ã€‘

0.1s/128M


## æ ·ä¾‹ #1

### è¾“å…¥

```
((B)())```

### è¾“å‡º

```
0```

## æ ·ä¾‹ #2

### è¾“å…¥

```
((((B)(B))((B)()))(B))```

### è¾“å‡º

```
impossible```

## æ ·ä¾‹ #3

### è¾“å…¥

```
(()(((B)(B))(B)))```

### è¾“å‡º

```
1```

# AIåˆ†æç»“æœ


### Kayçš„C++ç®—æ³•è§£æï¼šå½©çƒæ ‘ æ·±å…¥å­¦ä¹ æŒ‡å—

---

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«  
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`é€’å½’åˆ†æ²»` + `æ ‘å½¢ç»“æ„å¤„ç†`  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> å½©çƒæ ‘é—®é¢˜å¯ç±»æ¯”ä¸º**åƒç´ é£å¤©å¹³æ¸¸æˆ**ï¼šæ¯ä¸ªéå¶å­èŠ‚ç‚¹æ˜¯å¤©å¹³æ”¯ç‚¹ï¼Œå·¦å³æ‰˜ç›˜ï¼ˆå­æ ‘ï¼‰è½½é‡å·®â‰¤1å½©çƒé‡é‡ã€‚è§£é¢˜æ ¸å¿ƒæ˜¯**é€’å½’åˆ†æ²»**â€”â€”ä»æ ‘æ ¹å‘ä¸‹åˆ†è§£é—®é¢˜ï¼Œåœ¨å¶å­èŠ‚ç‚¹ç»Ÿè®¡è°ƒæ•´æ¬¡æ•°ã€‚  
> - **æ ¸å¿ƒæµç¨‹**ï¼šé€’å½’è®¡ç®—å­æ ‘æ‰€éœ€å½©çƒæ•°ï¼Œåˆ†å¥‡å¶è®¨è®ºåˆ†é…æ–¹æ¡ˆï¼ˆå¶æ•°å¹³åˆ†ï¼Œå¥‡æ•°ä¸¤ç§åˆ†é…å°è¯•ï¼‰ï¼Œå¶å­èŠ‚ç‚¹æ ¡éªŒåˆæ³•æ€§ï¼ˆ0æˆ–1ä¸ªçƒï¼‰ã€‚  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šç”¨åƒç´ ç½‘æ ¼æ¨¡æ‹Ÿæ ‘ç»“æ„ï¼Œé€’å½’æ—¶é«˜äº®å½“å‰å­æ ‘ï¼Œå¥‡å¶åˆ†æ”¯æ˜¾ç¤ºåŒè·¯å¾„åŠ¨ç”»ï¼Œå¶å­èŠ‚ç‚¹ç”¨é—ªçƒ/éŸ³æ•ˆæç¤ºè°ƒæ•´ï¼ˆç»¿çƒ+1/çº¢çƒ-1ï¼‰ã€‚  

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ  
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šä¸€åªå°å…”å­ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  - æ€è·¯æ¸…æ™°ï¼šé€’å½’æ¡†æ¶ç®€æ´ï¼Œå¥‡å¶åˆ†é…é€»è¾‘ç›´ç™½ï¼ˆ`if(req&1)`åˆ†æ”¯å¤„ç†å·§å¦™ï¼‰ã€‚  
  - ä»£ç è§„èŒƒï¼šæ‹¬å·åŒ¹é…é¢„å¤„ç†ï¼ˆ`par[]`æ•°ç»„ï¼‰æå‡å¯è¯»æ€§ï¼Œå˜é‡å`rq`ï¼ˆrequiredï¼‰ã€`te`ï¼ˆtempï¼‰å«ä¹‰æ˜ç¡®ã€‚  
  - ç®—æ³•äº®ç‚¹ï¼š**æ“ä½œæ•°ä¼˜åŒ–**ï¼ˆå¶å­èŠ‚ç‚¹ç»Ÿè®¡è°ƒæ•´æ¬¡æ•°ï¼Œæœ€ç»ˆ`ans>>1`é¿å…é‡å¤è®¡æ•°ï¼‰ã€‚  
  - å®è·µä»·å€¼ï¼šå®Œæ•´å¤„ç†è¾¹ç•Œï¼ˆ`r-l==1`å¶å­æ ¡éªŒï¼‰ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›ã€‚  

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥  
1. **éš¾ç‚¹1ï¼šé€’å½’çŠ¶æ€ä¼ é€’**  
   * **åˆ†æ**ï¼šéœ€ç²¾ç¡®è®¡ç®—å­æ ‘æ€»å½©çƒæ•°ï¼ˆ`req`ï¼‰å¹¶å‘å·¦å³å­æ ‘åˆ†é…ã€‚åˆ†é…éœ€æ»¡è¶³ï¼š  
     ```math
     |left\_req - right\_req| â‰¤ 1
     ```  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€’å½’å‚æ•°ä¼ é€’æ˜¯æ ‘å½¢é—®é¢˜çš„é€šç”¨è§£æ³•æ ¸å¿ƒã€‚  

2. **éš¾ç‚¹2ï¼šå¥‡å¶åˆ†é…ç­–ç•¥**  
   * **åˆ†æ**ï¼š  
     - å¶æ•°ï¼ˆ`req`%2==0ï¼‰ï¼šå·¦å³å¹³åˆ†`req/2`  
     - å¥‡æ•°ï¼ˆ`req`%2==1ï¼‰ï¼šå°è¯•ä¸¤ç§æ–¹æ¡ˆï¼ˆå·¦`(req+1)/2`å³`(req-1)/2` æˆ– å·¦`(req-1)/2`å³`(req+1)/2`ï¼‰ï¼Œå–æœ€å°æ“ä½œæ•°ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ”¯å°è¯•æ˜¯è§£å†³å¤šå¯èƒ½æ€§é—®é¢˜çš„å…³é”®æŠ€å·§ã€‚  

3. **éš¾ç‚¹3ï¼šå¶å­èŠ‚ç‚¹åˆæ³•æ€§æ ¡éªŒ**  
   * **åˆ†æ**ï¼šå¶å­èŠ‚ç‚¹ï¼ˆ`r-l==1`ï¼‰åªèƒ½æœ‰0æˆ–1ä¸ªçƒï¼Œè‹¥`req>1`æˆ–`req<0`ç«‹å³è¿”å›`-1`ï¼ˆéæ³•ï¼‰ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€’å½’ç»ˆæ­¢æ¡ä»¶éœ€ä¸¥æ ¼è¦†ç›–æ‰€æœ‰è¾¹ç•Œã€‚  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **åˆ†æ²»æŠ½è±¡**ï¼šå°†æ ‘æ‹†è§£ä¸ºå·¦å³å­æ ‘ç‹¬ç«‹å¤„ç†  
- **å¥‡å¶åˆ†ç±»**ï¼šä¸åŒæ•°å­¦ç‰¹æ€§å¯¹åº”ä¸åŒåˆ†é…ç­–ç•¥  
- **æ“ä½œä¼˜åŒ–**ï¼šå¶å­èŠ‚ç‚¹ç»Ÿä¸€æ¬¡æ•°åé™¤2é¿å…é‡å¤è®¡æ•°  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ  
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <cstdio>
#include <cstring>
const int N=5005;
char p[N]; // è¾“å…¥å­—ç¬¦ä¸²
int par[N], stk[N], top; // æ‹¬å·åŒ¹é…æ ˆ

// é€’å½’å‡½æ•°ï¼šè®¡ç®—å­æ ‘[l,r]æ»¡è¶³reqä¸ªçƒçš„æœ€å°æ“ä½œæ•°
int search(int l, int r, int req) {
    if (r-l == 1) return req<=1 ? req : -1; // å¶å­èŠ‚ç‚¹æ ¡éªŒ
    int ll=l+1, lr=par[l+1], rl=par[r-1], rr=r-1; // å·¦å³å­æ ‘è¾¹ç•Œ
    int rq = req>>1, te, tas=9999; // te:ä¸´æ—¶æ“ä½œæ•°, tas:æœ€å°æ“ä½œæ•°

    if ((req&1)==0) { // å¶æ•°æƒ…å†µ
        te=0;
        int t1 = search(ll, lr, rq); 
        int t2 = search(rl, rr, rq);
        if (t1==-1 || t2==-1) return -1;
        tas = t1+t2;
    } else { // å¥‡æ•°æƒ…å†µï¼šå°è¯•ä¸¤ç§åˆ†é…
        // æ–¹æ¡ˆ1ï¼šå·¦å­æ ‘rq+1, å³å­æ ‘rq
        te=0;
        int t1 = search(ll, lr, rq+1);
        int t2 = search(rl, rr, rq);
        if (t1!=-1 && t2!=-1) tas = t1+t2;

        // æ–¹æ¡ˆ2ï¼šå·¦å­æ ‘rq, å³å­æ ‘rq+1
        te=0;
        t1 = search(ll, lr, rq);
        t2 = search(rl, rr, rq+1);
        if (t1!=-1 && t2!=-1 && t1+t2<tas) tas = t1+t2;
    }
    return (tas==9999) ? -1 : tas;
}
```

**é¢˜è§£ä¸€ä»£ç äº®ç‚¹**  
* **æ ¸å¿ƒç‰‡æ®µ**ï¼šæ‹¬å·åŒ¹é…é¢„å¤„ç†  
```cpp
while (*(++pt)) {
    if (*pt=='B') ++td;  // ç»Ÿè®¡æ€»å½©çƒ
    else if (*pt=='(') stk[++top]=pt-p; // å·¦æ‹¬å·å…¥æ ˆ
    else if (*pt==')') { // å³æ‹¬å·åŒ¹é…
        par[pt-p]=stk[top];
        par[stk[top--]]=pt-p; // è®°å½•æ‹¬å·å¯¹åº”å…³ç³»
    }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  > ç”¨æ ˆ`stk`è§£ææ ‘ç»“æ„ï¼šé‡åˆ°`(`æ—¶å­˜å‚¨ä½ç½®ï¼Œé‡åˆ°`)`æ—¶å¼¹å‡ºæ ˆé¡¶å¹¶è®°å½•å·¦å³æ‹¬å·ä½ç½®åˆ°`par[]`ã€‚**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ** æ­¤é¢„å¤„ç†å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ ‘å½¢ç´¢å¼•ï¼Œä½¿é€’å½’å¯ç›´æ¥æ“ä½œå­æ ‘åŒºé—´ã€‚  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
* **ä¸»é¢˜**ï¼š`åƒç´ å¤©å¹³æ ¡å‡†å·¥åŠ`ï¼ˆ8-bité£æ ¼ï¼‰  
* **æ ¸å¿ƒæ¼”ç¤º**ï¼š  
  ![](https://via.placeholder.com/400x200?text=Pixel+Tree+Visualization)  
  **åŠ¨ç”»æµç¨‹**ï¼š  
  1. **æ ‘ç»“æ„æ¸²æŸ“**ï¼šåƒç´ ç½‘æ ¼ç»˜åˆ¶æ ‘å½¢ï¼Œéå¶å­èŠ‚ç‚¹ä¸ºâš–ï¸å›¾æ ‡ï¼Œå¶å­èŠ‚ç‚¹ä¸ºğŸ”´/ğŸŸ¢å½©çƒã€‚  
  2. **é€’å½’è¿‡ç¨‹**ï¼š  
     - å½“å‰å­æ ‘é«˜äº®é»„æ¡†ï¼Œæ˜¾ç¤º`req`å€¼  
     - å¥‡å¶åˆ†æ”¯ï¼šå¼¹å‡ºåŒé€‰æ‹©æ¡†ï¼ˆå·¦é‡/å³é‡ï¼‰ï¼Œé€‰æ‹©åå±•ç¤ºå¯¹åº”åˆ†é…æ–¹æ¡ˆ  
  3. **å¶å­æ“ä½œ**ï¼š  
     - è‹¥éœ€è°ƒæ•´ï¼šå½©çƒé—ªçƒ+éŸ³æ•ˆï¼ˆæ·»åŠ ï¼šâ†‘å®ï¼Œç§»é™¤ï¼šâ†“ç °ï¼‰  
     - éæ³•çŠ¶æ€ï¼šâŒå›¾æ ‡+è­¦æŠ¥éŸ³  
* **äº¤äº’è®¾è®¡**ï¼š  
  - æ§åˆ¶é¢æ¿ï¼šæ­¥è¿›æ‰§è¡Œ/è°ƒé€Ÿæ»‘å—/é‡ç½®  
  - éŸ³æ•ˆä½“ç³»ï¼šå…³é”®æ“ä½œè§¦å‘8-bitéŸ³æ•ˆï¼ˆèƒœåˆ©æ—¶æ’­æ”¾ã€Šè¶…çº§ç›ä¸½ã€‹è¿‡å…³BGMï¼‰  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ  
* **æŠ€å·§è¿ç§»**ï¼šé€’å½’åˆ†æ²»é€‚ç”¨äºï¼š  
  1. äºŒå‰æ ‘è·¯å¾„å’Œï¼ˆLeetCode 112ï¼‰  
  2. è¡¨è¾¾å¼æ±‚å€¼ï¼ˆæ‹¬å·è§£æï¼‰  
  3. æ ‘å½¢DPé—®é¢˜ï¼ˆå¦‚èŠ‚ç‚¹æƒé‡åˆ†é…ï¼‰  
* **æ´›è°·æ¨è**ï¼š  
  1. **P1040 åŠ åˆ†äºŒå‰æ ‘**ï¼ˆæ ‘å½¢ç»“æ„+é€’å½’ä¼˜åŒ–ï¼‰  
  2. **P1364 åŒ»é™¢è®¾ç½®**ï¼ˆæ ‘å½¢æ•°æ®ä¼ é€’ï¼‰  
  3. **P1351 è”åˆæƒå€¼**ï¼ˆæ ‘å½¢éå†+å¥‡å¶ç‰¹æ€§ï¼‰  

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
æœ¬æ¬¡é¢˜è§£æœªåŒ…å«ä½œè€…è°ƒè¯•å¿ƒå¾—ï¼Œä½†éœ€æ³¨æ„ï¼š  
> **Kayæé†’**ï¼šé€’å½’è¾¹ç•Œæ ¡éªŒæ˜“æ¼ï¼å¶å­èŠ‚ç‚¹`r-l==1`æ—¶ï¼Œè‹¥`req>1`å¿…é¡»è¿”å›`-1`ï¼Œå¦åˆ™ä¼šå¯¼è‡´éæ³•è§£è¢«é‡‡çº³ã€‚

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†**æ ‘å½¢é€’å½’åˆ†æ²»**çš„æ ¸å¿ƒæ€æƒ³ï¼Œå¹¶å­¦ä¼šç”¨åƒç´ åŠ¨ç”»æ¨¡æ‹Ÿç®—æ³•æµç¨‹ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œè®°å¾—å…ˆç”»æ ‘ç»“æ„ï¼Œå†è®¾è®¡é€’å½’çŠ¶æ€å“¦ï¼ ğŸ®âœ¨

---
å¤„ç†ç”¨æ—¶ï¼š119.86ç§’
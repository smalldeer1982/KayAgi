# é¢˜ç›®ä¿¡æ¯

# [KOI 2022 Round 1] è¡¥ç»™

## é¢˜ç›®èƒŒæ™¯

è¯•é¢˜æ¥æºï¼š<https://koi.or.kr/archives/>ã€‚ä¸­æ–‡ç¿»è¯‘åšäº†å°‘é‡æœ¬åœŸåŒ–ä¿®æ”¹ã€‚

æŒ‰ç…§[ç½²åâ€”éå•†ä¸šæ€§ä½¿ç”¨â€”ç›¸åŒæ–¹å¼å…±äº« 4.0 åè®®å›½é™…ç‰ˆ](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)è¿›è¡Œæˆæƒã€‚

## é¢˜ç›®æè¿°

åœ¨ä¸€ä¸ªäºŒç»´å¹³é¢ä¸Šæœ‰ $N$ ä¸ªå†›äº‹åŸºåœ°ã€‚ç¬¬ $i$ ä¸ªåŸºåœ°çš„ä½ç½®æ˜¯åæ ‡ $(X_i, Y_i)$ã€‚

è´Ÿè´£è¯¥åŒºåŸŸçš„è¡¥ç»™éƒ¨é˜Ÿæ‰“ç®—å¯¹æ‰€æœ‰åŸºåœ°è¿›è¡Œè¡¥ç»™ã€‚æ¯ä¸ªç¬¬ $i$ ä¸ªåŸºåœ°å¯ä»¥æ¥å—è¡¥ç»™çš„æ—¥æœŸæ˜¯ä»ç¬¬ $A_i$ å¤©åˆ°ç¬¬ $B_i$ å¤©ä¹‹é—´çš„æŸä¸€å¤©ã€‚

ç”±äºæ­£å¤„äºæˆ˜äº‰æ—¶æœŸï¼Œè¡¥ç»™éƒ¨é˜Ÿå¿…é¡»ä¿æŒæ•´ä½“ä»å·¦ä¸Šæ–¹å‘å³ä¸‹æ–¹æ¨è¿›çš„é˜Ÿå½¢ï¼Œå› æ­¤åªèƒ½æœå³ä¸‹æ–¹å‘å‰è¿›ã€‚å› æ­¤ï¼Œå¿…é¡»ä¸ºæ¯ä¸ªåŸºåœ°åˆ†é…ä¸€ä¸ªå…·ä½“çš„è¡¥ç»™æ—¥æœŸ $V_i$ï¼Œä½¿å¾—æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼š

- å¯¹æ‰€æœ‰çš„ $i$ï¼Œéƒ½æ»¡è¶³ $A_i \leq V_i \leq B_i$ï¼›
- å¯¹æ‰€æœ‰ $i, j$ æ»¡è¶³ $X_i < X_j$ ä¸” $Y_i < Y_j$ æ—¶ï¼Œå¿…é¡»æ»¡è¶³ $V_i < V_j$ï¼›
- å¯¹æ‰€æœ‰ $i \ne j$ï¼Œå¿…é¡»æœ‰ $V_i \ne V_j$ã€‚

ç»™å®šå„ä¸ªåŸºåœ°çš„ä½ç½® $(X_i, Y_i)$ ä»¥åŠå®ƒä»¬å¯æ¥å—è¡¥ç»™çš„æ—¥æœŸèŒƒå›´ $[A_i, B_i]$ï¼Œè¯·ç¼–å†™ä¸€ä¸ªç¨‹åºåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€ç§è¡¥ç»™æ—¥æœŸçš„åˆ†é…æ–¹æ¡ˆï¼Œæ»¡è¶³ä¸Šè¿°æ‰€æœ‰æ¡ä»¶ã€‚å¦‚æœå­˜åœ¨ï¼Œè¾“å‡º YESï¼Œå¹¶æŒ‰åŸºåœ°ç¼–å·é¡ºåºè¾“å‡ºæ¯ä¸ªåŸºåœ°çš„åˆ†é…æ—¥æœŸï¼›å¦‚æœä¸å­˜åœ¨ï¼Œè¾“å‡º NOã€‚

ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªåŒ…å« 6 ä¸ªåŸºåœ°çš„ç¤ºä¾‹æƒ…å†µã€‚å›¾ä¸­çš„æ¯ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªåŸºåœ°ï¼Œç‚¹çš„å³ä¸Šæ–¹æ ‡æ³¨äº†è¯¥åŸºåœ°å¯ä»¥æ¥å—è¡¥ç»™çš„æ—¥æœŸèŒƒå›´ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/phg5424h.png)

ä¸‹å›¾è¿˜å±•ç¤ºäº†ä¸ºè¿™äº›åŸºåœ°å®‰æ’è¡¥ç»™æ—¥æœŸçš„ä¸€ä¸ªå¯è¡Œæ–¹æ¡ˆï¼Œç‚¹çš„å³ä¸‹æ–¹æ ‡æ³¨äº†åˆ†é…ç»™æ¯ä¸ªåŸºåœ°çš„å…·ä½“è¡¥ç»™æ—¥æœŸã€‚å›¾ä¸­å¼¯æ›²çš„çº¿è¡¨ç¤ºè¡¥ç»™éƒ¨é˜Ÿåœ¨ç¬¬ 2 å¤©è‡³ç¬¬ 3 å¤©ä¹‹é—´å¯èƒ½å¤„äºçš„ä½ç½®èŒƒå›´ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/4uzfezse.png)

## è¯´æ˜/æç¤º

**çº¦æŸæ¡ä»¶**

- æ‰€æœ‰ç»™å®šçš„æ•°éƒ½æ˜¯æ•´æ•°ã€‚
- $1 \leq N \leq 250\,000$
- $1 \leq A_i \leq B_i \leq N$
- $1 \leq X_i \leq N$
- $1 \leq Y_i \leq N$
- æ‰€æœ‰ $X_i$ äº’ä¸ç›¸åŒï¼Œå³ $i \ne j$ æ—¶ $X_i \ne X_j$
- æ‰€æœ‰ $Y_i$ äº’ä¸ç›¸åŒï¼Œå³ $i \ne j$ æ—¶ $Y_i \ne Y_j$

**å­ä»»åŠ¡**

1. ï¼ˆ13 åˆ†ï¼‰$N \leq 10$
2. ï¼ˆ18 åˆ†ï¼‰$N \leq 2\,500$
3. ï¼ˆ22 åˆ†ï¼‰å¯¹æ‰€æœ‰ $i$ï¼Œæ»¡è¶³ $B_i = N$
4. ï¼ˆ47 åˆ†ï¼‰æ— é™„åŠ é™åˆ¶

## æ ·ä¾‹ #1

### è¾“å…¥

```
6
2 6 1 3
4 1 4 6
6 5 4 6
1 3 2 5
3 2 1 3
5 4 1 6
```

### è¾“å‡º

```
YES
3 4 6 2 1 5```

## æ ·ä¾‹ #2

### è¾“å…¥

```
2
1 1 2 2
2 2 1 1```

### è¾“å‡º

```
NO```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šè¡¥ç»™é—®é¢˜ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼ˆç»“åˆæ’åºã€Fenwickæ ‘ã€å¹¶æŸ¥é›†ï¼‰


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œè¡¥ç»™é—®é¢˜â€çš„å…³é”®ï¼Œæ˜¯æŠŠ**äºŒç»´åæ ‡çš„çº¦æŸè½¬åŒ–ä¸ºä¸€ç»´é¡ºåºçš„çº¦æŸ**ï¼Œå†ç”¨é«˜æ•ˆæ•°æ®ç»“æ„å¤„ç†è´ªå¿ƒç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥æŠŠé—®é¢˜ç±»æ¯”æˆâ€œç»™æ’é˜Ÿçš„å°æœ‹å‹åˆ†é…ç³–æœâ€â€”â€”å°æœ‹å‹æŒ‰èº«é«˜ï¼ˆXåæ ‡ï¼‰æ’æˆä¸€é˜Ÿï¼Œæ¯ä¸ªå°æœ‹å‹æœ‰ä¸€ä¸ªâ€œçˆ±åƒçš„ç³–æœèŒƒå›´â€ï¼ˆ[A_i,B_i]ï¼‰ï¼Œä¸”å¦‚æœå‰é¢çš„å°æœ‹å‹æ¯”å½“å‰å°æœ‹å‹çŸ®ï¼ˆY_i<Y_jï¼‰ï¼Œå‰é¢çš„å°æœ‹å‹çš„ç³–æœæ•°å¿…é¡»æ›´å°‘ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç»™æ¯ä¸ªå°æœ‹å‹åˆ†ä¸€ä¸ªå”¯ä¸€çš„ç³–æœæ•°ï¼Œæ»¡è¶³æ‰€æœ‰æ¡ä»¶ã€‚


### æ ¸å¿ƒæ€è·¯æ‹†è§£
1. **æ’åºé™ç»´**ï¼šæŠŠåŸºåœ°æŒ‰Xåæ ‡ä»å°åˆ°å¤§æ’åºï¼ˆXäº’ä¸ç›¸åŒï¼‰ï¼Œè¿™æ ·â€œX_i<X_jâ€çš„çº¦æŸå°±è½¬åŒ–ä¸ºâ€œiåœ¨jå‰é¢â€çš„é¡ºåºçº¦æŸã€‚  
2. **Yè½¬Rank**ï¼šæŠŠYåæ ‡è½¬åŒ–ä¸º1~Nçš„æ’åï¼ˆYäº’ä¸ç›¸åŒï¼‰ï¼Œè¿™æ ·â€œY_i<Y_jâ€ç­‰ä»·äºâ€œr_i<r_jâ€ï¼Œçº¦æŸç®€åŒ–ä¸ºâ€œå‰é¢çš„rå°â†’ç³–æœæ•°å°â€ã€‚  
3. **è´ªå¿ƒåˆ†é…**ï¼šç»™æ¯ä¸ªåŸºåœ°åˆ†é…å°½å¯èƒ½å°çš„ã€æ»¡è¶³æ¡ä»¶çš„ç³–æœæ•°ï¼ˆV_iï¼‰ï¼ŒåŒæ—¶ä¿è¯ï¼š
   - V_i â‰¥ å‰é¢æ‰€æœ‰ræ›´å°çš„åŸºåœ°çš„Vå€¼+1ï¼ˆç”¨Fenwickæ ‘æŸ¥æœ€å¤§å€¼ï¼‰ï¼›
   - V_iåœ¨[A_i,B_i]ä¹‹é—´ä¸”æœªè¢«ä½¿ç”¨ï¼ˆç”¨å¹¶æŸ¥é›†æ‰¾å¯ç”¨å€¼ï¼‰ã€‚


### å¯è§†åŒ–è®¾è®¡æ€è·¯
æˆ‘ä»¬è®¾è®¡**â€œåƒç´ è¡¥ç»™å‘˜â€åŠ¨ç”»**ï¼Œç”¨8ä½å¤å¤é£æ ¼å±•ç¤ºç®—æ³•æµç¨‹ï¼š
- **åœºæ™¯**ï¼šå±å¹•å·¦ä¾§æ˜¯æŒ‰Xæ’åºçš„åŸºåœ°ï¼ˆåƒç´ å—ï¼Œé¢œè‰²åŒºåˆ†Yå€¼ï¼‰ï¼Œå³ä¾§æ˜¯Fenwickæ ‘ï¼ˆæŸ±çŠ¶å›¾ï¼Œé«˜åº¦ä»£è¡¨å‰ç¼€æœ€å¤§å€¼ï¼‰å’Œå¹¶æŸ¥é›†ï¼ˆå¯ç”¨å€¼äº®å—ã€å·²ç”¨å€¼æš—å—ï¼‰ã€‚
- **å…³é”®åŠ¨ç”»**ï¼š
  - å¤„ç†åŸºåœ°æ—¶ï¼Œé«˜äº®å½“å‰åŸºåœ°ï¼ŒFenwickæ ‘çš„å‰r_i-1ä¸ªæŸ±å­é—ªçƒï¼ˆè¡¨ç¤ºæŸ¥è¯¢max_prevï¼‰ï¼›
  - è®¡ç®—Låï¼Œå¹¶æŸ¥é›†çš„Lä½ç½®äº®å—é—ªçƒï¼ˆæ‰¾å€™é€‰å€¼ï¼‰ï¼›
  - åˆ†é…V_iæ—¶ï¼ŒåŸºåœ°æ˜¾ç¤ºVå€¼ï¼ŒFenwickæ ‘çš„r_iæŸ±å­å‡é«˜ï¼Œå¹¶ç”¨â€œå®â€éŸ³æ•ˆå¼ºåŒ–ã€‚
- **äº¤äº’**ï¼šæ”¯æŒå•æ­¥æ‰§è¡Œã€è‡ªåŠ¨æ’­æ”¾ï¼ˆå¯è°ƒé€Ÿï¼‰ã€é‡ç½®ï¼Œèƒœåˆ©æ—¶æ’­æ”¾8ä½â€œèƒœåˆ©éŸ³ä¹â€ï¼Œå¤±è´¥æ—¶æ’­æ”¾â€œå—¡â€å£°æç¤ºã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
ï¼ˆå¾…å¤„ç†å†…å®¹ä¸­æ— ç°æˆé¢˜è§£ï¼Œä»¥ä¸‹ä¸ºé€šç”¨æœ€ä¼˜è§£æ³•çš„æ€è·¯è§£æï¼‰


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### æ ¸å¿ƒéš¾ç‚¹1ï¼šå¦‚ä½•å°†äºŒç»´çº¦æŸè½¬åŒ–ä¸ºä¸€ç»´ï¼Ÿ
- **é—®é¢˜**ï¼šåŸé¢˜çš„çº¦æŸæ˜¯â€œXå°ä¸”Yå°â†’Vå°â€ï¼Œç›´æ¥å¤„ç†äºŒç»´æ¡ä»¶å¤æ‚ã€‚  
- **è§£æ³•**ï¼šæŒ‰Xæ’åº+Yè½¬Rankã€‚Xæ’åºåï¼ŒäºŒç»´çº¦æŸè½¬åŒ–ä¸ºâ€œé¡ºåº+Rankå°â†’Vå°â€çš„ä¸€ç»´çº¦æŸï¼ŒæŠŠé—®é¢˜ç®€åŒ–ä¸ºâ€œç»™é¡ºåºé˜Ÿåˆ—åˆ†é…æ»¡è¶³æ¡ä»¶çš„å”¯ä¸€å€¼â€ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé™ç»´æ˜¯å¤„ç†äºŒç»´é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œå…³é”®æ˜¯æ‰¾åˆ°â€œå¯ä»¥æ’åºçš„ç»´åº¦â€ã€‚


### æ ¸å¿ƒéš¾ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆæŸ¥â€œå‰é¢çš„æœ€å¤§å€¼â€ï¼Ÿ
- **é—®é¢˜**ï¼šè¦å¿«é€ŸçŸ¥é“â€œå‰é¢æ‰€æœ‰ræ›´å°çš„åŸºåœ°çš„Væœ€å¤§å€¼â€ï¼Œéå†ä¼šè¶…æ—¶ï¼ˆN=25e4ï¼‰ã€‚  
- **è§£æ³•**ï¼šç”¨**Fenwickæ ‘ï¼ˆæ ‘çŠ¶æ•°ç»„ï¼‰**ç»´æŠ¤å‰ç¼€æœ€å¤§å€¼ã€‚Fenwickæ ‘èƒ½åœ¨O(logN)æ—¶é—´å†…å®Œæˆâ€œæŸ¥è¯¢å‰ç¼€æœ€å¤§å€¼â€å’Œâ€œæ›´æ–°æŸä¸ªä½ç½®çš„å€¼â€ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šFenwickæ ‘ä¸ä»…èƒ½å¤„ç†æ±‚å’Œï¼Œè¿˜èƒ½å¤„ç†æ±‚æœ€å¤§å€¼ï¼Œæ ¸å¿ƒæ˜¯â€œå‰ç¼€åŒºé—´çš„å¿«é€Ÿç»´æŠ¤â€ã€‚


### æ ¸å¿ƒéš¾ç‚¹3ï¼šå¦‚ä½•å¿«é€Ÿæ‰¾â€œå¯ç”¨çš„æœ€å°Vå€¼â€ï¼Ÿ
- **é—®é¢˜**ï¼šè¦æ‰¾â‰¥Lçš„æœ€å°æœªç”¨Vå€¼ï¼Œéå†ä¼šè¶…æ—¶ã€‚  
- **è§£æ³•**ï¼šç”¨**å¹¶æŸ¥é›†ï¼ˆDSUï¼‰**çš„â€œæ‰¾ä¸‹ä¸€ä¸ªå¯ç”¨ä½ç½®â€æŠ€å·§ã€‚åˆå§‹æ—¶æ¯ä¸ªå€¼æŒ‡å‘è‡ªå·±ï¼Œç”¨`find(x)`æ‰¾â‰¥xçš„æœ€å°å¯ç”¨å€¼ï¼Œåˆ†é…åæŠŠè¯¥å€¼æŒ‡å‘â€œä¸‹ä¸€ä¸ªå¯ç”¨å€¼â€ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¹¶æŸ¥é›†çš„çµæ´»åº”ç”¨â€”â€”ä¸ä»…èƒ½åˆå¹¶é›†åˆï¼Œè¿˜èƒ½å¿«é€Ÿå®šä½â€œæœªè¢«å ç”¨çš„ä½ç½®â€ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é™ç»´æŠ€å·§**ï¼šé‡åˆ°äºŒç»´çº¦æŸï¼Œä¼˜å…ˆæ‰¾â€œå¯æ’åºçš„ç»´åº¦â€ï¼ˆå¦‚Xï¼‰ï¼ŒæŠŠé—®é¢˜è½¬åŒ–ä¸ºä¸€ç»´é¡ºåºã€‚  
- **æ•°æ®ç»“æ„é€‚é…**ï¼šå‰ç¼€æœ€å¤§å€¼ç”¨Fenwickæ ‘ï¼Œå¯ç”¨å€¼æŸ¥è¯¢ç”¨å¹¶æŸ¥é›†ï¼Œä¸¤è€…éƒ½æ˜¯O(logN)çº§åˆ«çš„é«˜æ•ˆå·¥å…·ã€‚  
- **è´ªå¿ƒç­–ç•¥**ï¼šæ¯æ¬¡é€‰â€œæ»¡è¶³æ¡ä»¶çš„æœ€å°å¯èƒ½å€¼â€ï¼Œç»™åç»­å…ƒç´ ç•™æ›´å¤šç©ºé—´ï¼Œè¿™æ˜¯è§£å†³â€œåˆ†é…å”¯ä¸€å€¼â€é—®é¢˜çš„å¸¸ç”¨æ€è·¯ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†é—®é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼Œå®ç°äº†æ’åºã€Fenwickæ ‘ã€å¹¶æŸ¥é›†çš„å®Œæ•´é€»è¾‘ï¼Œæ˜¯è§£å†³æœ¬é¢˜çš„æ ‡å‡†æ¨¡æ¿ã€‚

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

struct Base {
    int X, Y, A, B, idx, r, V;
};

struct FenwickTree {
    vector<int> tree;
    int n;
    FenwickTree(int size) : n(size), tree(size + 2, 0) {}
    void update(int idx, int value) {
        while (idx <= n) {
            if (value > tree[idx]) tree[idx] = value;
            else break; // æ— éœ€æ›´æ–°çˆ¶èŠ‚ç‚¹
            idx += idx & -idx;
        }
    }
    int query(int idx) {
        int res = 0;
        while (idx > 0) {
            res = max(res, tree[idx]);
            idx -= idx & -idx;
        }
        return res;
    }
};

struct DSU {
    vector<int> parent;
    DSU(int size) : parent(size + 2) {
        for (int i = 0; i <= size + 1; ++i) parent[i] = i;
    }
    int find(int x) {
        if (parent[x] != x) parent[x] = find(parent[x]);
        return parent[x];
    }
};

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    int N;
    cin >> N;
    vector<Base> bases(N);
    for (int i = 0; i < N; ++i) {
        cin >> bases[i].X >> bases[i].Y >> bases[i].A >> bases[i].B;
        bases[i].idx = i;
    }
    // æŒ‰Xæ’åº
    sort(bases.begin(), bases.end(), [](const Base& a, const Base& b) {
        return a.X < b.X;
    });
    // è®¡ç®—Yçš„rankï¼ˆ1~Nï¼‰
    vector<int> ys(N);
    for (int i = 0; i < N; ++i) ys[i] = bases[i].Y;
    vector<int> sorted_ys = ys;
    sort(sorted_ys.begin(), sorted_ys.end());
    for (int i = 0; i < N; ++i) {
        bases[i].r = lower_bound(sorted_ys.begin(), sorted_ys.end(), bases[i].Y) - sorted_ys.begin() + 1;
    }
    // åˆå§‹åŒ–æ•°æ®ç»“æ„
    FenwickTree ft(N);
    DSU dsu(N);
    bool possible = true;
    for (auto& b : bases) {
        int max_prev = ft.query(b.r - 1); // æŸ¥r_i-1çš„æœ€å¤§å€¼
        int L = max(max_prev + 1, b.A);   // Vçš„ä¸‹ç•Œ
        int candidate = dsu.find(L);      // æ‰¾â‰¥Lçš„æœ€å°å¯ç”¨å€¼
        if (candidate > b.B) { possible = false; break; }
        b.V = candidate;
        ft.update(b.r, b.V);              // æ›´æ–°Fenwickæ ‘
        dsu.parent[candidate] = dsu.find(candidate + 1); // æ ‡è®°å·²ç”¨
    }
    if (!possible) cout << "NO\n";
    else {
        cout << "YES\n";
        vector<int> res(N);
        for (const auto& b : bases) res[b.idx] = b.V;
        for (int i = 0; i < N; ++i) cout << res[i] << " \n"[i == N-1];
    }
    return 0;
}
```

* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
ä»£ç åˆ†ä¸º5ä¸ªéƒ¨åˆ†ï¼š  
1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–åŸºåœ°çš„åæ ‡å’ŒåŒºé—´ï¼Œè®°å½•åŸç¼–å·ï¼›  
2. **æ’åº**ï¼šæŒ‰Xä»å°åˆ°å¤§æ’åºåŸºåœ°ï¼›  
3. **Rankè®¡ç®—**ï¼šå°†Yè½¬åŒ–ä¸º1~Nçš„æ’åï¼›  
4. **æ ¸å¿ƒå¤„ç†**ï¼šç”¨Fenwickæ ‘æŸ¥max_prevï¼Œç”¨å¹¶æŸ¥é›†æ‰¾å¯ç”¨å€¼ï¼Œåˆ†é…V_iï¼›  
5. **è¾“å‡º**ï¼šæŒ‰åŸç¼–å·è¾“å‡ºç»“æœæˆ–â€œNOâ€ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º


### ğŸ® åŠ¨ç”»ä¸»é¢˜ï¼šåƒç´ è¡¥ç»™å‘˜çš„ä»»åŠ¡
æˆ‘ä»¬ç”¨**8ä½å¤å¤æ¸¸æˆé£æ ¼**æ¨¡æ‹Ÿè¡¥ç»™è¿‡ç¨‹ï¼Œè®©ç®—æ³•â€œåŠ¨èµ·æ¥â€ï¼š


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯æŒ‰Xæ’åºçš„åŸºåœ°ï¼ˆåƒç´ å—ï¼ŒYå€¼è¶Šå¤§é¢œè‰²è¶Šçº¢ï¼‰ï¼Œå³ä¾§æ˜¯Fenwickæ ‘ï¼ˆæŸ±çŠ¶å›¾ï¼Œé«˜åº¦ä»£è¡¨å‰ç¼€æœ€å¤§å€¼ï¼‰å’Œå¹¶æŸ¥é›†ï¼ˆ1~Nçš„äº®å—ï¼Œå·²ç”¨å€¼å˜æš—ï¼‰ã€‚  
   - æ§åˆ¶é¢æ¿æœ‰â€œå•æ­¥â€â€œè‡ªåŠ¨â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ã€‚


2. **ç®—æ³•æ‰§è¡Œæ­¥éª¤**ï¼š  
   - **å¤„ç†åŸºåœ°1**ï¼šé«˜äº®ç¬¬ä¸€ä¸ªåŸºåœ°ï¼ˆXæœ€å°ï¼‰ï¼ŒFenwickæ ‘çš„å‰r_1-1ä¸ªæŸ±å­é—ªçƒï¼ˆæŸ¥è¯¢max_prev=0ï¼‰ï¼Œå¹¶æŸ¥é›†çš„L=2ä½ç½®äº®å—é—ªçƒï¼ˆæ‰¾å€™é€‰å€¼=2ï¼‰ï¼Œåˆ†é…V=2åï¼ŒFenwickæ ‘çš„r_1æŸ±å­å‡é«˜åˆ°2ï¼Œå¹¶ç”¨â€œå®â€éŸ³æ•ˆæç¤ºã€‚  
   - **å¤„ç†åŸºåœ°2**ï¼šé«˜äº®ç¬¬äºŒä¸ªåŸºåœ°ï¼ŒFenwickæ ‘æŸ¥è¯¢r_2-1çš„æœ€å¤§å€¼ï¼ˆæ¯”å¦‚2ï¼‰ï¼Œè®¡ç®—L=3ï¼Œæ‰¾å€™é€‰å€¼=3ï¼Œåˆ†é…åFenwickæ ‘æ›´æ–°ï¼Œå¹¶ç”¨â€œå’”â€éŸ³æ•ˆå¼ºåŒ–ã€‚  
   - **å¤±è´¥æ¡ˆä¾‹**ï¼šè‹¥å€™é€‰å€¼è¶…è¿‡B_iï¼Œå±å¹•å˜çº¢ï¼Œæ’­æ”¾â€œå—¡â€å£°ï¼Œæ˜¾ç¤ºâ€œNOâ€ã€‚


3. **äº¤äº’ä¸æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šåƒâ€œè´ªåƒè›‡AIâ€ä¸€æ ·é€æ­¥æ‰§è¡Œï¼Œé€Ÿåº¦å¯è°ƒï¼ˆæ»‘å—ä»â€œæ…¢â€åˆ°â€œå¿«â€ï¼‰ã€‚  
   - **éŸ³æ•ˆè®¾è®¡**ï¼šæŸ¥è¯¢Fenwickæ ‘æ—¶â€œå®â€ï¼Œåˆ†é…Væ—¶â€œå’”â€ï¼Œèƒœåˆ©æ—¶æ’­æ”¾8ä½â€œèƒœåˆ©éŸ³ä¹â€ï¼Œå¤±è´¥æ—¶â€œå—¡â€ã€‚  
   - **å°å…³å¡**ï¼šæ¯å¤„ç†3ä¸ªåŸºåœ°è§†ä¸ºâ€œä¸€å°å…³â€ï¼Œå®Œæˆåå±å¹•æ˜¾ç¤ºâ€œå…³å¡å®Œæˆï¼â€ï¼Œå¢åŠ å­¦ä¹ æˆå°±æ„Ÿã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ


### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„æ ¸å¿ƒæŠ€å·§ï¼ˆæ’åºé™ç»´ã€Fenwickæ ‘ç»´æŠ¤å‰ç¼€ã€å¹¶æŸ¥é›†æ‰¾å¯ç”¨å€¼ï¼‰å¯è¿ç§»åˆ°ï¼š
- **ä»»åŠ¡è°ƒåº¦**ï¼šç»™ä»»åŠ¡åˆ†é…æ—¶é—´ï¼Œæ»¡è¶³å‰é©±çº¦æŸå’Œæ—¶é—´çª—å£ã€‚  
- **æ’åé—®é¢˜**ï¼šç»™å…ƒç´ åˆ†é…æ’åï¼Œæ»¡è¶³éƒ¨åˆ†é¡ºåºçº¦æŸã€‚  
- **èµ„æºåˆ†é…**ï¼šç»™èµ„æºåˆ†é…å”¯ä¸€æ ‡è¯†ï¼Œæ»¡è¶³ä¼˜å…ˆçº§çº¦æŸã€‚


### æ´›è°·ç›¸ä¼¼é¢˜ç›®æ¨è
1. **æ´›è°·P1908 é€†åºå¯¹**ï¼šç»ƒä¹ Fenwickæ ‘çš„å‰ç¼€æŸ¥è¯¢ï¼Œç†è§£â€œé€†åºå¯¹â€çš„ç»Ÿè®¡æ–¹æ³•ã€‚  
2. **æ´›è°·P2055 å‡æœŸçš„å®¿èˆ**ï¼šç»ƒä¹ å¹¶æŸ¥é›†çš„â€œé›†åˆåˆå¹¶â€ï¼Œç†è§£å¦‚ä½•å¤„ç†â€œä¾èµ–å…³ç³»â€ã€‚  
3. **æ´›è°·P3374 æ ‘çŠ¶æ•°ç»„1**ï¼šåŸºç¡€Fenwickæ ‘ç»ƒä¹ ï¼Œå·©å›ºå‰ç¼€æ±‚å’Œçš„å®ç°ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)
æœ¬æ¬¡åˆ†æçš„é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®çš„ä½œè€…ä¸ªäººå¿ƒå¾—åˆ†äº«éƒ¨åˆ†ã€‚


## 8. æ€»ç»“
â€œè¡¥ç»™é—®é¢˜â€çš„æ ¸å¿ƒæ˜¯**å°†å¤æ‚çº¦æŸè½¬åŒ–ä¸ºå¯å¤„ç†çš„å½¢å¼**ï¼Œå¹¶ç”¨Fenwickæ ‘ã€å¹¶æŸ¥é›†ç­‰å·¥å…·é«˜æ•ˆè§£å†³ã€‚è®°ä½ï¼š  
- é‡åˆ°äºŒç»´é—®é¢˜ï¼Œå…ˆæ‰¾â€œå¯æ’åºçš„ç»´åº¦â€é™ç»´ï¼›  
- å‰ç¼€æœ€å¤§å€¼ç”¨Fenwickæ ‘ï¼Œå¯ç”¨å€¼æŸ¥è¯¢ç”¨å¹¶æŸ¥é›†ï¼›  
- è´ªå¿ƒç­–ç•¥æ˜¯â€œåˆ†é…æœ€å°å¯èƒ½å€¼â€ï¼Œç»™åç»­ç•™ç©ºé—´ã€‚  

ç¼–ç¨‹èƒ½åŠ›çš„æå‡ï¼Œåœ¨äºâ€œæ‹†è§£é—®é¢˜+é€‰å¯¹å·¥å…·â€â€”â€”å¤šç»ƒä¹ ç›¸ä¼¼é—®é¢˜ï¼Œä½ ä¼šè¶Šæ¥è¶Šç†Ÿç»ƒï¼ğŸ’ª


ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ‘‹

---
å¤„ç†ç”¨æ—¶ï¼š216.42ç§’
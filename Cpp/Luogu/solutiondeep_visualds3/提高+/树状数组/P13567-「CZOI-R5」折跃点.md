# é¢˜ç›®ä¿¡æ¯

# ã€ŒCZOI-R5ã€æŠ˜è·ƒç‚¹

## é¢˜ç›®èƒŒæ™¯

å®‡å®™ä¸­çˆ†å‘äº†æ˜Ÿé™…æˆ˜äº‰ã€‚

## é¢˜ç›®æè¿°

ä¸ºäº†åœ¨æ˜Ÿé™…æˆ˜äº‰ä¸­è¿›è¡Œç¬é—´ç§»åŠ¨ï¼Œæˆ‘æ–¹å·²ç»åœ¨å é¢†çš„æ˜ŸåŸŸä¸­å»ºç«‹äº† $n$ ä¸ªæŠ˜è·ƒç‚¹ã€‚æ‰€æœ‰æŠ˜è·ƒç‚¹æ„æˆä¸€æ£µä»¥æŠ˜è·ƒç‚¹ $1$ ä¸ºæ ¹çš„æœ‰æ ¹æ ‘ã€‚ç¬¬ $i$ ä¸ªæŠ˜è·ƒç‚¹çš„èƒ½é‡å€¼ä¸º $a_i$ã€‚

æˆ‘ä»¬ç§°æŠ˜è·ƒç‚¹ $u$ ç»è¿‡ $x$ æ¬¡è¿ç»­æŠ˜è·ƒèƒ½åˆ°è¾¾æŠ˜è·ƒç‚¹ $v$ï¼Œå½“ä¸”ä»…å½“ä»æŠ˜è·ƒç‚¹ $u$ å‡ºå‘ï¼Œèµ°è¿‡ $x$ æ¡è¾¹åèƒ½åˆ°è¾¾æŠ˜è·ƒç‚¹ $v$ï¼Œä¸”è¿‡ç¨‹ä¸­ä¸æŠ˜è·ƒç‚¹ $1$ çš„è·ç¦»ä¸æ–­å¢åŠ æˆ–ä¸æ–­å‡å°‘ã€‚

ç°åœ¨è¦è¿›è¡Œ $m$ æ¬¡ä»¥ä¸‹ç»´æŠ¤æ“ä½œï¼š
1. **ç©ºé—´èƒ½é‡å¢å¼º**ï¼šå¯¹äºæ‰€æœ‰ä»æŠ˜è·ƒç‚¹ $u$ ç»è¿‡ $x$ æ¬¡è¿ç»­æŠ˜è·ƒèƒ½åˆ°è¾¾çš„æŠ˜è·ƒç‚¹ï¼Œå°†å…¶èƒ½é‡å€¼åŠ  $y$ã€‚
2. **æŠ˜è·ƒæµ‹è¯•**ï¼šæ±‚æ‰€æœ‰ä»æŠ˜è·ƒç‚¹ $u$ ç»è¿‡ $x$ æ¬¡è¿ç»­æŠ˜è·ƒèƒ½åˆ°è¾¾çš„æŠ˜è·ƒç‚¹ï¼Œèƒ½é‡å€¼çš„å’Œã€‚

## è¯´æ˜/æç¤º

**ã€æ ·ä¾‹è§£é‡Šã€‘**

![](https://cdn.luogu.com.cn/upload/image_hosting/3lcng3xo.png)

è¿™æ£µæ ‘å¦‚å›¾ã€‚

ç¬¬ä¸€æ¬¡æ“ä½œæ»¡è¶³æ¡ä»¶çš„æŠ˜è·ƒç‚¹ä¸ºæŠ˜è·ƒç‚¹ $3,5$ï¼Œæ“ä½œå $a=\{6,8,11,10,13\}$ã€‚

ç¬¬äºŒæ¬¡æ“ä½œæ»¡è¶³æ¡ä»¶çš„æŠ˜è·ƒç‚¹ä¸ºæŠ˜è·ƒç‚¹ $1,5$ï¼Œç­”æ¡ˆä¸º $6+13=19$ã€‚

ç¬¬ä¸‰æ¬¡æ“ä½œæ»¡è¶³æ¡ä»¶çš„æŠ˜è·ƒç‚¹ä¸ºæŠ˜è·ƒç‚¹ $2$ï¼Œç­”æ¡ˆä¸º $8$ã€‚

ç¬¬å››æ¬¡æ“ä½œæ»¡è¶³æ¡ä»¶çš„æŠ˜è·ƒç‚¹ä¸ºæŠ˜è·ƒç‚¹ $1,3$ï¼Œæ“ä½œå $a=\{10,8,15,10,13\}$ã€‚

ç¬¬äº”æ¬¡æ“ä½œæ»¡è¶³æ¡ä»¶çš„æŠ˜è·ƒç‚¹ä¸ºæŠ˜è·ƒç‚¹ $3,5$ï¼Œç­”æ¡ˆä¸º $15+13=28$ã€‚

**ã€æ•°æ®èŒƒå›´ã€‘**

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•**ã€‚

- Subtask #1ï¼ˆ$15\text{ pts}$ï¼‰ï¼š$n, m \le 10^3$ã€‚
- Subtask #2ï¼ˆ$15\text{ pts}$ï¼‰ï¼š$x \le 1$ã€‚
- Subtask #3ï¼ˆ$25\text{ pts}$ï¼‰ï¼š$x \le 50$ã€‚
- Subtask #4ï¼ˆ$45\text{ pts}$ï¼‰ï¼šæ— ç‰¹æ®Šé™åˆ¶ã€‚

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1\le u\le n\le3\times10^5$ï¼Œ$1 \le  m \le 3 \times 10^5$ï¼Œ$1 \le a_i, y \le 10^9$ï¼Œ$0 \le x \le n$ï¼Œ$p\in\{1,2\}$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
5 5
6 8 4 10 6 
2 1
3 2
4 1
5 4
1 1 2 7
2 4 1
2 2 0
1 2 1 4
2 1 2
```

### è¾“å‡º

```
19
8
28
```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šã€ŒCZOI-R5ã€æŠ˜è·ƒç‚¹ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`ç¼–ç¨‹æŠ€å·§åº”ç”¨`ï¼ˆä¾§é‡æ ‘ä¸Šæ•°æ®ç»“æ„ä¸åŒºé—´æ“ä½œçš„ç»“åˆï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
æˆ‘ä»¬å¯ä»¥æŠŠè¿™æ£µæ ‘æƒ³è±¡æˆä¸€ä¸ªâ€œå®¶æ—æ ‘â€â€”â€”æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä½å®¶åº­æˆå‘˜ï¼Œæ·±åº¦å°±æ˜¯è¾ˆåˆ†ï¼ˆæ ¹èŠ‚ç‚¹1æ˜¯â€œè€ç¥–å®—â€ï¼Œæ·±åº¦1ï¼‰ã€‚â€œæŠ˜è·ƒxæ¬¡â€çš„è§„åˆ™å¾ˆç®€å•ï¼šè¦ä¹ˆæ‰¾**å¾€ä¸Šxè¾ˆçš„ç¥–å…ˆ**ï¼ˆæ¯”å¦‚ä½ æ‰¾çˆ·çˆ·å°±æ˜¯x=2ï¼‰ï¼Œè¦ä¹ˆæ‰¾**è‡ªå·±å­æ ‘é‡Œå¾€ä¸‹xè¾ˆçš„å­å­™**ï¼ˆæ¯”å¦‚ä½ æ‰¾å­™å­å°±æ˜¯x=2ï¼Œä¸”å¿…é¡»æ˜¯ä½ äº²å­™å­ï¼‰ã€‚  

è§£å†³è¿™é“é¢˜çš„æ ¸å¿ƒæŠ€å·§æ˜¯**â€œå°†æ ‘ä¸Šçš„ç¦»æ•£èŠ‚ç‚¹æ˜ å°„åˆ°è¿ç»­åŒºé—´â€**â€”â€”å› ä¸ºç›´æ¥æ‰¾å­å­™èŠ‚ç‚¹ä¼šå¾ˆé›¶æ•£ï¼Œä½†é€šè¿‡DFSåºæˆ–BFSåºï¼Œæˆ‘ä»¬èƒ½æŠŠâ€œåŒä¸€å­æ ‘ã€åŒä¸€æ·±åº¦â€çš„å­å­™èŠ‚ç‚¹å˜æˆè¿ç»­çš„â€œç¼–å·æ®µâ€ï¼Œè¿™æ ·å°±èƒ½ç”¨çº¿æ®µæ ‘å¿«é€ŸåšåŒºé—´åŠ /æ±‚å’Œäº†ã€‚åŒæ—¶ï¼Œç”¨â€œå€å¢æ³•â€é¢„å¤„ç†æ¯ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆï¼Œèƒ½åœ¨O(logn)æ—¶é—´å†…æ‰¾åˆ°xçº§ç¥–å…ˆã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. é¢„å¤„ç†ï¼šç”¨DFSè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ã€DFSå…¥æ—¶é—´ï¼ˆdfnï¼‰ã€å­æ ‘å¤§å°ï¼ˆszï¼‰ï¼›ç”¨å€å¢é¢„å¤„ç†æ¯ä¸ªèŠ‚ç‚¹çš„2^kçº§ç¥–å…ˆã€‚  
2. æ˜ å°„ï¼šæŠŠæ¯ä¸ªæ·±åº¦çš„èŠ‚ç‚¹æŒ‰DFSåºæ’åºï¼Œè¿™æ ·åŒä¸€å­æ ‘ã€åŒä¸€æ·±åº¦çš„èŠ‚ç‚¹çš„DFSåºæ˜¯è¿ç»­çš„ã€‚  
3. æ“ä½œå¤„ç†ï¼š  
   - æ‰¾xçº§ç¥–å…ˆï¼šç”¨å€å¢è·³xæ­¥ã€‚  
   - æ‰¾å­å­™èŠ‚ç‚¹ï¼šåœ¨ç›®æ ‡æ·±åº¦çš„æ’åºæ•°ç»„ä¸­ï¼ŒäºŒåˆ†æ‰¾åˆ°å±äºuå­æ ‘çš„è¿ç»­åŒºé—´ï¼ˆç”¨dfnçš„èŒƒå›´åˆ¤æ–­ï¼‰ã€‚  
4. ç»´æŠ¤ï¼šç”¨çº¿æ®µæ ‘å¤„ç†åŒºé—´åŠ /æ±‚å’Œã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬ä¼šåšä¸€ä¸ª8ä½åƒç´ é£çš„â€œå®¶æ—æ ‘æ¢é™©â€åŠ¨ç”»â€”â€”æ ‘èŠ‚ç‚¹ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºæ·±åº¦ï¼ˆæ¯”å¦‚æ·±åº¦1æ˜¯çº¢è‰²ï¼Œæ·±åº¦2æ˜¯è“è‰²ï¼‰ï¼Œæ“ä½œæ—¶ï¼š  
- æ‰¾ç¥–å…ˆï¼šä»uèŠ‚ç‚¹å‘ä¸Šâ€œè·³â€xæ­¥ï¼Œæ¯è·³ä¸€æ­¥èŠ‚ç‚¹é—ªçƒï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
- æ‰¾å­å­™ï¼šåœ¨uçš„å­æ ‘ä¸­ï¼Œç›®æ ‡æ·±åº¦çš„èŠ‚ç‚¹é›†ä½“é«˜äº®ï¼Œç”¨â€œå“—å“—â€å£°æç¤ºåŒºé—´é€‰ä¸­ã€‚  
- çº¿æ®µæ ‘æ“ä½œï¼šç”¨åƒç´ æ–¹å—å±•ç¤ºçº¿æ®µæ ‘çš„åŒºé—´æ›´æ–°ï¼Œé«˜äº®å½“å‰æ“ä½œçš„åŒºé—´ã€‚  
åŠ¨ç”»æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆæ¯ç‚¹ä¸€æ¬¡èµ°ä¸€æ­¥ï¼‰å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆåƒè´ªåƒè›‡AIä¸€æ ·å®Œæˆæ“ä½œï¼‰ï¼Œè¿˜æœ‰â€œé‡ç½®â€æŒ‰é’®å›åˆ°åˆå§‹çŠ¶æ€ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼š(æ¥æºï¼š_H17_)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸æ¸…æ™°ï¼Œåƒæ˜¯ç»™â€œå®¶æ—æ ‘é—®é¢˜â€å¼€äº†ä¸ªâ€œå¿«æ·é€šé“â€â€”â€”ç”¨BFSåºç»™èŠ‚ç‚¹æ’åºï¼Œç»“åˆDFSåºåˆ¤æ–­å­æ ‘èŒƒå›´ï¼Œå®Œç¾è§£å†³äº†â€œå­å­™èŠ‚ç‚¹è¿ç»­æ˜ å°„â€çš„é—®é¢˜ã€‚ä»£ç é‡Œçš„`seg`æ•°ç»„è®°å½•äº†æ¯ä¸ªæ·±åº¦çš„BFSåºèŒƒå›´ï¼Œ`pla`æ•°ç»„æ˜ å°„èŠ‚ç‚¹åˆ°BFSåºä½ç½®ï¼Œé€»è¾‘ä¸¥è°¨ã€‚æœ€è´´å¿ƒçš„æ˜¯ä½œè€…æé†’äº†â€œx=0çš„ç‰¹æ®Šæƒ…å†µâ€ï¼ˆå®¹æ˜“æ¼æ‰è‡ªå·±ï¼‰ï¼Œè¿™æ˜¯å¾ˆå¤šäººç¬¬ä¸€æ¬¡æäº¤å‡ºé”™çš„åŸå› ã€‚ä»£ç é£æ ¼è§„èŒƒï¼Œå˜é‡åï¼ˆæ¯”å¦‚`dfn`ã€`lstdfn`ï¼‰ä¸€çœ‹å°±æ‡‚ï¼Œé€‚åˆæ–°æ‰‹å­¦ä¹ ã€‚

### é¢˜è§£äºŒï¼š(æ¥æºï¼šWater__Problem)
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„äº®ç‚¹æ˜¯â€œæŒ‰æ·±åº¦å»ºåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘â€â€”â€”æ¯ä¸ªæ·±åº¦å¯¹åº”ä¸€æ£µçº¿æ®µæ ‘ï¼Œç›´æ¥å¤„ç†è¯¥æ·±åº¦çš„åŒºé—´æ“ä½œã€‚è¿™ç§æ–¹æ³•æŠŠâ€œæ‰¾åŒä¸€æ·±åº¦çš„å­å­™â€å˜æˆäº†â€œåœ¨æŸæ£µçº¿æ®µæ ‘é‡ŒæŸ¥åŒºé—´â€ï¼Œæ€è·¯ç›´ç™½ã€‚ä»£ç é‡Œçš„`rt[dep]`æ•°ç»„ç»´æŠ¤æ¯å±‚çš„çº¿æ®µæ ‘æ ¹èŠ‚ç‚¹ï¼Œ`add`å’Œ`query`å‡½æ•°ç›´æ¥æ“ä½œå¯¹åº”æ·±åº¦çš„çº¿æ®µæ ‘ï¼Œç®€æ´é«˜æ•ˆã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯åŠ¨æ€å¼€ç‚¹çš„ç©ºé—´é—®é¢˜ï¼Œä½†ä½œè€…ç”¨`res`å˜é‡æ§åˆ¶èŠ‚ç‚¹æ•°é‡ï¼Œé¿å…äº†æº¢å‡ºã€‚

### é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šlilong)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£ç”¨äº†â€œæ·±åº¦+DFSåºâ€çš„ç»„åˆæ‹³â€”â€”å…ˆæŒ‰æ·±åº¦æŠŠèŠ‚ç‚¹çš„DFSåºæ’åºï¼Œç„¶åç”¨äºŒåˆ†æ³•æ‰¾å±äºuå­æ ‘çš„åŒºé—´ã€‚æ¯”å¦‚ï¼Œå¯¹äºç›®æ ‡æ·±åº¦`dep[u]+x`ï¼Œåœ¨è¯¥æ·±åº¦çš„DFSåºæ•°ç»„ä¸­ï¼ŒäºŒåˆ†æ‰¾`>=dfn[u]`ä¸”`<=ed[u]`çš„èŒƒå›´ã€‚è¿™ç§æ–¹æ³•ä¸éœ€è¦é¢å¤–ç»´æŠ¤çº¿æ®µæ ‘ï¼Œåªç”¨æ’åºå’ŒäºŒåˆ†ï¼Œæ—¶é—´å¤æ‚åº¦åŒæ ·æ˜¯O(logn)ï¼Œé€‚åˆå–œæ¬¢â€œè½»é‡çº§â€è§£æ³•çš„åŒå­¦ã€‚ä»£ç é‡Œçš„`H`æ•°ç»„æŒ‰æ·±åº¦å­˜DFSåºï¼Œ`id`æ•°ç»„æ˜ å°„èŠ‚ç‚¹åˆ°æ’åºåçš„ä½ç½®ï¼Œé€»è¾‘æ¸…æ™°ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### æ ¸å¿ƒéš¾ç‚¹1ï¼šå¦‚ä½•å°†å­å­™èŠ‚ç‚¹æ˜ å°„åˆ°è¿ç»­åŒºé—´ï¼Ÿ
**é—®é¢˜**ï¼šæ ‘ä¸Šçš„å­å­™èŠ‚ç‚¹åˆ†æ•£åœ¨ä¸åŒä½ç½®ï¼Œæ— æ³•ç›´æ¥ç”¨çº¿æ®µæ ‘å¤„ç†ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šåˆ©ç”¨DFSåºçš„â€œå­æ ‘è¿ç»­æ€§â€â€”â€”æ¯ä¸ªèŠ‚ç‚¹çš„å­æ ‘å¯¹åº”DFSåºçš„ä¸€ä¸ªè¿ç»­åŒºé—´ï¼ˆä»`dfn[u]`åˆ°`ed[u]`ï¼‰ã€‚ç„¶åï¼ŒæŠŠåŒä¸€æ·±åº¦çš„èŠ‚ç‚¹æŒ‰DFSåºæ’åºï¼Œè¿™æ ·â€œuå­æ ‘å†…ã€æ·±åº¦ä¸º`dep[u]+x`â€çš„èŠ‚ç‚¹ï¼Œå…¶DFSåºä¸€å®šè½åœ¨`[dfn[u], ed[u]]`ä¹‹é—´ï¼Œä¸”åœ¨æ’åºæ•°ç»„ä¸­æ˜¯è¿ç»­çš„ã€‚

### æ ¸å¿ƒéš¾ç‚¹2ï¼šå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°xçº§ç¥–å…ˆï¼Ÿ
**é—®é¢˜**ï¼šç›´æ¥å‘ä¸Šè·³xæ­¥ä¼šè¶…æ—¶ï¼ˆO(x)æ—¶é—´ï¼‰ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šå€å¢é¢„å¤„ç†â€”â€”æå‰è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„2^0ã€2^1ã€â€¦ã€2^19çº§ç¥–å…ˆï¼ˆå› ä¸º2^20â‰ˆ1e6ï¼Œè¶³å¤Ÿè¦†ç›–n=3e5ï¼‰ã€‚è·³xæ­¥æ—¶ï¼ŒæŠŠxæ‹†æˆäºŒè¿›åˆ¶ï¼Œæ¯”å¦‚x=5=4+1ï¼Œå°±å…ˆè·³2^2æ­¥ï¼Œå†è·³2^0æ­¥ï¼Œæ€»æ—¶é—´O(logx)ã€‚

### æ ¸å¿ƒéš¾ç‚¹3ï¼šå¦‚ä½•å®šä½åŒä¸€æ·±åº¦çš„åŒºé—´ï¼Ÿ
**é—®é¢˜**ï¼šåŒä¸€æ·±åº¦çš„èŠ‚ç‚¹å¾ˆå¤šï¼Œå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°å±äºuå­æ ‘çš„éƒ¨åˆ†ï¼Ÿ  
**è§£å†³æ–¹æ¡ˆ**ï¼šå°†åŒä¸€æ·±åº¦çš„èŠ‚ç‚¹æŒ‰DFSåºæ’åºï¼Œç„¶åç”¨äºŒåˆ†æ³•æ‰¾èŒƒå›´ã€‚æ¯”å¦‚ï¼Œå¯¹äºæ·±åº¦`k`çš„æ’åºæ•°ç»„`H[k]`ï¼Œæ‰¾ç¬¬ä¸€ä¸ª`>=dfn[u]`çš„ä½ç½®ï¼ˆå·¦è¾¹ç•Œï¼‰å’Œæœ€åä¸€ä¸ª`<=ed[u]`çš„ä½ç½®ï¼ˆå³è¾¹ç•Œï¼‰ï¼Œè¿™ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„èŠ‚ç‚¹å°±æ˜¯uå­æ ‘å†…çš„ç›®æ ‡å­å­™ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å­æ ‘è¿ç»­æ€§**ï¼šDFSåºæ˜¯å¤„ç†æ ‘ä¸Šå­æ ‘é—®é¢˜çš„â€œç¥å™¨â€ï¼Œä¸€å®šè¦è®°ä½â€œå­æ ‘å¯¹åº”è¿ç»­åŒºé—´â€ã€‚  
- **å€å¢æ³•**ï¼šå¤„ç†â€œkæ­¥ç¥–å…ˆâ€æˆ–â€œkæ­¥è·³è·ƒâ€é—®é¢˜çš„æ ‡å‡†è§£æ³•ï¼Œé¢„å¤„ç†ä¸€æ¬¡ï¼Œç»ˆèº«å—ç›Šã€‚  
- **äºŒåˆ†æ³•**ï¼šå½“æ•°ç»„æœ‰åºæ—¶ï¼Œç”¨äºŒåˆ†æ‰¾åŒºé—´æ¯”éå†å¿«å¾—å¤šï¼Œå°¤å…¶é€‚åˆå¤§æ•°æ®é‡ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†_H17_ã€Water__Problemã€lilongä¸‰ä½ä½œè€…çš„æ€è·¯ï¼Œç”¨DFSåºè®°å½•å­æ ‘èŒƒå›´ï¼ŒæŒ‰æ·±åº¦ç»´æŠ¤æ’åºåçš„DFSåºæ•°ç»„ï¼ŒäºŒåˆ†æ‰¾åŒºé—´ï¼Œçº¿æ®µæ ‘ç»´æŠ¤åŒºé—´å’Œï¼Œå€å¢æ‰¾ç¥–å…ˆã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;
typedef long long ll;
const int N = 3e5 + 10;
const int LOG = 20;

int n, m;
ll a[N];
vector<int> G[N];
int dfn[N], ed[N], dep[N], fa[LOG][N], sz[N], tot;
vector<int> depth_nodes[N]; // depth_nodes[d] å­˜å‚¨æ·±åº¦ä¸ºdçš„èŠ‚ç‚¹çš„DFSåº
int id[N]; // id[u] è¡¨ç¤ºèŠ‚ç‚¹uåœ¨depth_nodes[dep[u]]ä¸­çš„ä½ç½®

// DFSè®°å½•dfnã€edã€depã€faã€sz
void dfs(int u, int f) {
    dfn[u] = ++tot;
    dep[u] = dep[f] + 1;
    fa[0][u] = f;
    sz[u] = 1;
    depth_nodes[dep[u]].push_back(dfn[u]); // æŒ‰DFSåºå­˜å…¥å½“å‰æ·±åº¦
    for (int v : G[u]) {
        if (v == f) continue;
        dfs(v, u);
        sz[u] += sz[v];
    }
    ed[u] = tot;
}

// çº¿æ®µæ ‘ç»“æ„ä½“
struct SegTree {
    ll sum[N << 2], tag[N << 2];
    void push_up(int p) { sum[p] = sum[p << 1] + sum[p << 1 | 1]; }
    void push_down(int p, int l, int r) {
        if (tag[p]) {
            int mid = (l + r) >> 1;
            sum[p << 1] += tag[p] * (mid - l + 1);
            sum[p << 1 | 1] += tag[p] * (r - mid);
            tag[p << 1] += tag[p];
            tag[p << 1 | 1] += tag[p];
            tag[p] = 0;
        }
    }
    void build(int p, int l, int r) {
        if (l == r) {
            sum[p] = a[l]; // a[l] æ˜¯DFSåºä¸ºlçš„èŠ‚ç‚¹çš„åˆå§‹å€¼
            return;
        }
        int mid = (l + r) >> 1;
        build(p << 1, l, mid);
        build(p << 1 | 1, mid + 1, r);
        push_up(p);
    }
    void update(int p, int l, int r, int L, int R, ll k) {
        if (L <= l && r <= R) {
            sum[p] += k * (r - l + 1);
            tag[p] += k;
            return;
        }
        push_down(p, l, r);
        int mid = (l + r) >> 1;
        if (L <= mid) update(p << 1, l, mid, L, R, k);
        if (R > mid) update(p << 1 | 1, mid + 1, r, L, R, k);
        push_up(p);
    }
    ll query(int p, int l, int r, int L, int R) {
        if (L <= l && r <= R) return sum[p];
        push_down(p, l, r);
        int mid = (l + r) >> 1;
        ll res = 0;
        if (L <= mid) res += query(p << 1, l, mid, L, R);
        if (R > mid) res += query(p << 1 | 1, mid + 1, r, L, R);
        return res;
    }
} st;

// æ‰¾uçš„xçº§ç¥–å…ˆ
int get_kth_ancestor(int u, int x) {
    for (int i = LOG - 1; i >= 0; --i) {
        if (x >= (1 << i)) {
            u = fa[i][u];
            x -= (1 << i);
        }
    }
    return u;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);
    cin >> n >> m;
    for (int i = 1; i <= n; ++i) cin >> a[i];
    for (int i = 1; i < n; ++i) {
        int u, v;
        cin >> u >> v;
        G[u].push_back(v);
        G[v].push_back(u);
    }
    // åˆå§‹åŒ–DFSå’Œå€å¢
    dfs(1, 0);
    for (int i = 1; i < LOG; ++i) {
        for (int u = 1; u <= n; ++u) {
            fa[i][u] = fa[i-1][fa[i-1][u]];
        }
    }
    // ç»™æ¯ä¸ªæ·±åº¦çš„èŠ‚ç‚¹æ’åºï¼Œå¹¶è®°å½•id
    for (int d = 1; d <= n; ++d) {
        sort(depth_nodes[d].begin(), depth_nodes[d].end());
        for (int i = 0; i < depth_nodes[d].size(); ++i) {
            int u = depth_nodes[d][i]; // uæ˜¯DFSåº
            id[u] = i + 1; // çº¿æ®µæ ‘çš„ä½ç½®ä»1å¼€å§‹
        }
    }
    // å»ºç«‹çº¿æ®µæ ‘ï¼ˆæŒ‰DFSåºï¼‰
    st.build(1, 1, n);
    while (m--) {
        int op, u, x;
        cin >> op >> u >> x;
        ll ans = 0;
        if (op == 1) {
            ll y;
            cin >> y;
            // å¤„ç†å­å­™èŠ‚ç‚¹ï¼šæ·±åº¦ä¸ºdep[u]+xï¼Œå­æ ‘å†…çš„åŒºé—´
            int k = dep[u] + x;
            if (k <= n && !depth_nodes[k].empty()) {
                // æ‰¾depth_nodes[k]ä¸­>=dfn[u]ä¸”<=ed[u]çš„åŒºé—´
                auto &vec = depth_nodes[k];
                int L = lower_bound(vec.begin(), vec.end(), dfn[u]) - vec.begin() + 1;
                int R = upper_bound(vec.begin(), vec.end(), ed[u]) - vec.begin();
                if (L <= R) st.update(1, 1, n, L, R, y);
            }
            // å¤„ç†ç¥–å…ˆï¼šxçº§ç¥–å…ˆ
            if (x > 0) {
                int anc = get_kth_ancestor(u, x);
                if (anc != 0) {
                    int pos = id[dfn[anc]]; // ç¥–å…ˆçš„DFSåºåœ¨depth_nodes[dep[anc]]ä¸­çš„ä½ç½®
                    st.update(1, 1, n, pos, pos, y);
                }
            }
        } else {
            // å¤„ç†å­å­™èŠ‚ç‚¹
            int k = dep[u] + x;
            if (k <= n && !depth_nodes[k].empty()) {
                auto &vec = depth_nodes[k];
                int L = lower_bound(vec.begin(), vec.end(), dfn[u]) - vec.begin() + 1;
                int R = upper_bound(vec.begin(), vec.end(), ed[u]) - vec.begin();
                if (L <= R) ans += st.query(1, 1, n, L, R);
            }
            // å¤„ç†ç¥–å…ˆ
            if (x > 0) {
                int anc = get_kth_ancestor(u, x);
                if (anc != 0) {
                    int pos = id[dfn[anc]];
                    ans += st.query(1, 1, n, pos, pos);
                }
            }
            cout << ans << '\n';
        }
    }
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. ç”¨`dfs`å‡½æ•°è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„DFSåºã€æ·±åº¦ã€ç¥–å…ˆã€å­æ ‘å¤§å°ï¼Œå¹¶æŒ‰æ·±åº¦å­˜å‚¨DFSåºã€‚  
  2. `get_kth_ancestor`å‡½æ•°ç”¨å€å¢æ³•æ‰¾xçº§ç¥–å…ˆã€‚  
  3. çº¿æ®µæ ‘`SegTree`ç»´æŠ¤DFSåºçš„åŒºé—´å’Œï¼Œæ”¯æŒåŒºé—´åŠ å’ŒåŒºé—´æŸ¥è¯¢ã€‚  
  4. å¤„ç†æ“ä½œæ—¶ï¼Œå…ˆæ‰¾å­å­™èŠ‚ç‚¹çš„åŒºé—´ï¼ˆç”¨äºŒåˆ†æ³•ï¼‰ï¼Œå†æ‰¾ç¥–å…ˆçš„ä½ç½®ï¼Œåˆ†åˆ«æ›´æ–°æˆ–æŸ¥è¯¢ã€‚


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼š(æ¥æºï¼š_H17_)
* **äº®ç‚¹**ï¼šç”¨BFSåºç»“åˆDFSåºï¼ŒåŒæ—¶è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„BFSä½ç½®å’ŒDFSèŒƒå›´ï¼Œå®Œç¾è§£å†³è¿ç»­åŒºé—´é—®é¢˜ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
sort(pos+1, pos+n+1, cmp); // posæ˜¯BFSåºçš„èŠ‚ç‚¹æ•°ç»„
for(int i=1;i<=n;i++){
    seg[dep[pos[i]]].first=min(seg[dep[pos[i]]].first,i);
    seg[dep[pos[i]]].second=max(seg[dep[pos[i]]].second,i);
    pla[pos[i]]=i;
}
```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æŒ‰â€œæ·±åº¦ä¼˜å…ˆã€DFSåºæ¬¡ä¹‹â€çš„è§„åˆ™æ’åºBFSåºæ•°ç»„`pos`ï¼ˆ`cmp`å‡½æ•°å…ˆæ¯”æ·±åº¦ï¼Œå†æ¯”DFSåºï¼‰ã€‚ç„¶åï¼Œ`seg[d]`è®°å½•æ·±åº¦ä¸º`d`çš„èŠ‚ç‚¹åœ¨BFSåºä¸­çš„èŒƒå›´ï¼ˆ`first`æ˜¯å·¦è¾¹ç•Œï¼Œ`second`æ˜¯å³è¾¹ç•Œï¼‰ï¼Œ`pla[u]`è®°å½•èŠ‚ç‚¹`u`çš„BFSä½ç½®ã€‚è¿™æ ·ï¼ŒåŒä¸€æ·±åº¦çš„èŠ‚ç‚¹åœ¨BFSåºä¸­æ˜¯è¿ç»­çš„ï¼Œæ–¹ä¾¿åç»­ç”¨çº¿æ®µæ ‘å¤„ç†ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šå½“éœ€è¦åŒæ—¶è€ƒè™‘æ·±åº¦å’Œå­æ ‘æ—¶ï¼Œå¯ä»¥ç”¨â€œåŒå…³é”®å­—æ’åºâ€ï¼ˆæ·±åº¦+DFSåºï¼‰å°†èŠ‚ç‚¹æ˜ å°„åˆ°è¿ç»­åŒºé—´ã€‚

#### é¢˜è§£äºŒï¼š(æ¥æºï¼šWater__Problem)
* **äº®ç‚¹**ï¼šæŒ‰æ·±åº¦å»ºåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘ï¼Œç›´æ¥å¤„ç†æ¯å±‚çš„åŒºé—´æ“ä½œï¼Œä»£ç ç®€æ´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
void add(int &id, int l, int r, int x, int y) {
    if(!id) id=++res;
    if(l==r){
        t[id].tr=y;
        return;
    }
    int mid=(l+r)>>1;
    if(x<=mid) add(t[id].ls,l,mid,x,y);
    else add(t[id].rs,mid+1,r,x,y);
    t[id].tr=t[t[id].ls].tr+t[t[id].rs].tr;
}
```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯åŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘çš„`add`å‡½æ•°â€”â€”å½“éœ€è¦ç»™æ·±åº¦`d`çš„èŠ‚ç‚¹`x`ï¼ˆDFSåºï¼‰åŠ `y`æ—¶ï¼Œè‹¥å½“å‰èŠ‚ç‚¹ä¸å­˜åœ¨ï¼ˆ`id==0`ï¼‰ï¼Œå°±æ–°å»ºèŠ‚ç‚¹ã€‚åŠ¨æ€å¼€ç‚¹çš„å¥½å¤„æ˜¯èŠ‚çœç©ºé—´ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰æ·±åº¦éƒ½æœ‰èŠ‚ç‚¹ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šåŠ¨æ€å¼€ç‚¹çº¿æ®µæ ‘é€‚åˆå¤„ç†â€œç¨€ç–â€çš„åŒºé—´é—®é¢˜ï¼ˆæ¯”å¦‚æŸäº›æ·±åº¦æ²¡æœ‰èŠ‚ç‚¹ï¼‰ï¼Œèƒ½æœ‰æ•ˆå‡å°‘ç©ºé—´å ç”¨ã€‚

#### é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šlilong)
* **äº®ç‚¹**ï¼šç”¨æ·±åº¦æ’åºå’ŒäºŒåˆ†æ³•æ‰¾åŒºé—´ï¼Œä¸éœ€è¦é¢å¤–ç»´æŠ¤çº¿æ®µæ ‘ï¼Œé€»è¾‘è½»é‡ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
auto it1=lower_bound(H[dep[u]+v].begin(),H[dep[u]+v].end(),dfn[u]);
auto it2=upper_bound(H[dep[u]+v].begin(),H[dep[u]+v].end(),dfn[u]+siz[u]-1);
int L=it1-H[dep[u]+v].begin()+1;
int R=it2-H[dep[u]+v].begin();
```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ‰¾æ·±åº¦ä¸º`dep[u]+v`çš„èŠ‚ç‚¹ä¸­ï¼ŒDFSåºåœ¨`[dfn[u], dfn[u]+siz[u]-1]`ä¹‹é—´çš„åŒºé—´ã€‚`H[d]`æ˜¯æ·±åº¦`d`çš„èŠ‚ç‚¹çš„DFSåºæ’åºæ•°ç»„ï¼Œ`lower_bound`æ‰¾å·¦è¾¹ç•Œï¼Œ`upper_bound`æ‰¾å³è¾¹ç•Œï¼Œä¸¤è€…çš„å·®å°±æ˜¯åŒºé—´é•¿åº¦ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šå½“ä¸éœ€è¦é¢‘ç¹æ›´æ–°ï¼Œåªéœ€æŸ¥è¯¢æ—¶ï¼Œæ’åº+äºŒåˆ†æ³•æ˜¯æ›´é«˜æ•ˆçš„é€‰æ‹©ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼šã€Œåƒç´ å®¶æ—çš„æŠ˜è·ƒå†’é™©ã€
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰å±•ç¤ºæ ‘ç»“æ„ï¼ŒèŠ‚ç‚¹ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºæ·±åº¦ï¼ˆæ¯”å¦‚æ·±åº¦1æ˜¯çº¢è‰²ï¼Œæ·±åº¦2æ˜¯è“è‰²ï¼Œæ·±åº¦3æ˜¯ç»¿è‰²ï¼‰ï¼ŒèƒŒæ™¯æ˜¯æ˜Ÿç©ºï¼ˆç¬¦åˆé¢˜ç›®â€œæ˜Ÿé™…æˆ˜äº‰â€çš„èƒŒæ™¯ï¼‰ã€‚é€šè¿‡åŠ¨ç”»æ¼”ç¤ºæŠ˜è·ƒæ“ä½œçš„æ ¸å¿ƒé€»è¾‘ï¼Œç»“åˆéŸ³æ•ˆå’Œæ¸¸æˆåŒ–å…ƒç´ ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ã€‚

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯åƒç´ æ ‘ï¼ˆæ ¹èŠ‚ç‚¹1åœ¨é¡¶éƒ¨ï¼Œå­èŠ‚ç‚¹å‘ä¸‹å»¶ä¼¸ï¼‰ï¼Œå³ä¾§æ˜¯æ§åˆ¶é¢æ¿ï¼ˆåŒ…å«â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥æ‰§è¡Œâ€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼Œå½“å‰æ“ä½œæç¤ºï¼‰ã€‚  
   - 8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆè½»å¿«çš„ç”µå­æ—‹å¾‹ï¼‰å¼€å§‹æ’­æ”¾ã€‚

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - è¾“å…¥èŠ‚ç‚¹å’Œæ“ä½œåï¼Œæ ‘èŠ‚ç‚¹æŒ‰æ·±åº¦ä¸Šè‰²ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¾ç¤ºDFSåºï¼ˆæ¯”å¦‚èŠ‚ç‚¹1æ˜¾ç¤ºâ€œ1â€ï¼ŒèŠ‚ç‚¹2æ˜¾ç¤ºâ€œ2â€ï¼‰ã€‚

3. **æŠ˜è·ƒæ“ä½œæ¼”ç¤º**ï¼š  
   - **æ‰¾ç¥–å…ˆ**ï¼šæ¯”å¦‚u=4ï¼Œx=1ï¼Œè¦æ‰¾ç¥–å…ˆ1ã€‚èŠ‚ç‚¹4é—ªçƒï¼Œç„¶åå‘ä¸Šè·³ä¸€æ­¥åˆ°èŠ‚ç‚¹1ï¼ŒèŠ‚ç‚¹1é«˜äº®ï¼ˆé»„è‰²ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
   - **æ‰¾å­å­™**ï¼šæ¯”å¦‚u=1ï¼Œx=2ï¼Œè¦æ‰¾æ·±åº¦3çš„å­å­™èŠ‚ç‚¹3å’Œ5ã€‚èŠ‚ç‚¹1çš„å­æ ‘èŒƒå›´ï¼ˆDFSåº1-5ï¼‰é—ªçƒï¼Œç„¶åæ·±åº¦3çš„èŠ‚ç‚¹3å’Œ5é«˜äº®ï¼ˆæ©™è‰²ï¼‰ï¼Œä¼´éšâ€œå“—å“—â€çš„éŸ³æ•ˆï¼Œæ§åˆ¶é¢æ¿æ˜¾ç¤ºâ€œæ‰¾åˆ°å­å­™åŒºé—´[3,5]â€ã€‚  
   - **åŒºé—´æ›´æ–°**ï¼šçº¿æ®µæ ‘çš„åƒç´ æ–¹å—ï¼ˆæ¯ä¸ªæ–¹å—ä»£è¡¨ä¸€ä¸ªåŒºé—´ï¼‰ä»å·¦åˆ°å³é—ªçƒï¼Œæ˜¾ç¤ºâ€œåŠ y=7â€ï¼Œä¼´éšâ€œå˜Ÿå˜Ÿâ€çš„éŸ³æ•ˆã€‚

4. **äº¤äº’æ§åˆ¶**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼ŒåŠ¨ç”»èµ°ä¸€æ­¥ï¼Œæ¯”å¦‚å…ˆæ‰¾ç¥–å…ˆï¼Œå†æ‰¾å­å­™ï¼Œå†æ›´æ–°çº¿æ®µæ ‘ã€‚  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼ŒåŠ¨ç”»æŒ‰è®¾å®šé€Ÿåº¦ï¼ˆæ¯”å¦‚æ¯ç§’2æ­¥ï¼‰å®Œæˆæ•´ä¸ªæ“ä½œï¼Œé€‚åˆå¿«é€Ÿæµè§ˆã€‚  
   - **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚

5. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - æ“ä½œå®Œæˆåï¼Œæ­£ç¡®çš„èŠ‚ç‚¹é—ªçƒï¼Œä¼´éšä¸Šæ‰¬çš„â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚â€œå®~å®~â€ï¼‰ï¼Œæ§åˆ¶é¢æ¿æ˜¾ç¤ºâ€œæ“ä½œæˆåŠŸï¼â€ã€‚  
   - å¦‚æœæ“ä½œæ— æ•ˆï¼ˆæ¯”å¦‚xè¶…è¿‡æ·±åº¦ï¼‰ï¼Œä¼´éšçŸ­ä¿ƒçš„â€œé”™è¯¯â€éŸ³æ•ˆï¼ˆâ€œæ»´â€ï¼‰ï¼Œæ§åˆ¶é¢æ¿æ˜¾ç¤ºâ€œæ— æ•ˆæ“ä½œï¼Œè¯·æ£€æŸ¥xå€¼ï¼â€ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
æœ¬é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼ˆ**å­æ ‘è¿ç»­æ€§+äºŒåˆ†æ³•+çº¿æ®µæ ‘/å€å¢**ï¼‰å¯ä»¥è§£å†³å¾ˆå¤šæ ‘ä¸Šé—®é¢˜ï¼Œæ¯”å¦‚ï¼š  
1. ç»Ÿè®¡æŸç‚¹å­æ ‘å†…æ·±åº¦ä¸ºkçš„èŠ‚ç‚¹æ•°ï¼›  
2. ç»™æŸç‚¹å­æ ‘å†…æ·±åº¦ä¸ºkçš„èŠ‚ç‚¹åŠ å€¼ï¼›  
3. æ‰¾æŸç‚¹çš„kçº§å­å­™çš„æœ€å¤§å€¼/æœ€å°å€¼ã€‚

### æ´›è°·æ¨èç»ƒä¹ 
1. **P3384 ã€æ¨¡æ¿ã€‘æ ‘é“¾å‰–åˆ†**ï¼šç»ƒä¹ æ ‘ä¸ŠåŒºé—´æ“ä½œçš„ç»å…¸é¢˜ç›®ï¼Œç”¨æ ‘é“¾å‰–åˆ†å°†æ ‘æ˜ å°„åˆ°çº¿æ®µæ ‘ï¼Œé€‚åˆå·©å›ºâ€œå­æ ‘è¿ç»­æ€§â€çš„æ€è·¯ã€‚  
2. **P2014 é€‰è¯¾**ï¼šæ ‘å½¢DPé—®é¢˜ï¼Œéœ€è¦å¤„ç†å­æ ‘çš„é€‰æ‹©ï¼Œèƒ½åŠ æ·±å¯¹â€œå­æ ‘åŒºé—´â€çš„ç†è§£ã€‚  
3. **P1351 è”åˆæƒå€¼**ï¼šç»Ÿè®¡æ ‘ä¸Šè·ç¦»ä¸º2çš„èŠ‚ç‚¹å¯¹çš„æƒå€¼å’Œï¼Œéœ€è¦æ‰¾ç¥–å…ˆçš„å…„å¼ŸèŠ‚ç‚¹ï¼Œç±»ä¼¼â€œæŠ˜è·ƒx=2â€çš„é—®é¢˜ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

**å‚è€ƒç»éªŒ (æ¥è‡ª _H17_)**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆå¿˜è®°å¤„ç†x=0çš„æƒ…å†µï¼Œå¯¼è‡´ç¬¬ä¸€æ¬¡æäº¤é”™äº†ã€‚åæ¥é€šè¿‡è°ƒè¯•å‘ç°ï¼Œx=0æ—¶åº”è¯¥åªä¿®æ”¹å½“å‰èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ç¥–å…ˆå’Œå­å­™ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹â€”â€”è¾¹ç•Œæ¡ä»¶ï¼ˆæ¯”å¦‚x=0ï¼‰æ˜¯ç¼–ç¨‹ä¸­çš„â€œå‘â€ï¼Œä¸€å®šè¦ä»”ç»†è€ƒè™‘ã€‚è§£å†³æ–¹æ³•æ˜¯â€œå†™ä»£ç å‰å…ˆæƒ³ç‰¹æ®Šæƒ…å†µâ€ï¼Œæ¯”å¦‚x=0ã€xè¶…è¿‡æ·±åº¦ã€å­æ ‘ä¸­æ²¡æœ‰ç›®æ ‡æ·±åº¦çš„èŠ‚ç‚¹ç­‰ï¼Œå¹¶ç”¨æµ‹è¯•ç”¨ä¾‹éªŒè¯ã€‚


## ç»“è¯­
æœ¬æ¬¡å…³äºã€ŒCZOI-R5ã€æŠ˜è·ƒç‚¹çš„åˆ†æå°±åˆ°è¿™é‡Œå•¦ï¼è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯â€œå°†æ ‘ä¸Šçš„ç¦»æ•£é—®é¢˜è½¬åŒ–ä¸ºè¿ç»­åŒºé—´é—®é¢˜â€ï¼Œåªè¦æŒæ¡äº†DFSåºã€å€å¢æ³•å’Œçº¿æ®µæ ‘çš„ç»“åˆï¼Œå°±èƒ½è½»æ¾è§£å†³ã€‚è®°ä½ï¼š**æ ‘ä¸Šé—®é¢˜çš„å…³é”®æ˜¯â€œæ˜ å°„â€â€”â€”æŠŠæ ‘çš„ç»“æ„è½¬åŒ–ä¸ºçº¿æ€§ç»“æ„ï¼ˆæ¯”å¦‚DFSåºã€BFSåºï¼‰ï¼Œå†ç”¨çº¿æ€§æ•°æ®ç»“æ„ï¼ˆçº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„ï¼‰å¤„ç†**ã€‚  

ä¸‹æ¬¡é‡åˆ°æ ‘ä¸Šçš„åŒºé—´é—®é¢˜ï¼Œä¸å¦¨è¯•è¯•ä»Šå¤©å­¦çš„æ–¹æ³•ï¼Œä¸€å®šä¼šæœ‰æ”¶è·ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š133.38ç§’
# é¢˜ç›®ä¿¡æ¯

# æ‹çˆ±

## é¢˜ç›®æè¿°

å° A çˆ±ä¸Šäº†å° Bï¼ï¼ï¼å¯æ˜¯å° A ç›¸å¯¹å° B å¤ªå¼±ï¼Œæ‰€ä»¥å¥¹å½“ç„¶ä¸ä¼šåŒæ„å° A çš„è¯·æ±‚ã€‚å° A è‹¦è‹¦è¿½æ±‚ï¼Œæœ€ç»ˆå° B å°±æè¿™æ ·çš„æ¡ä»¶ï¼š

- å° B æœ‰ $n$ ä¸ªä¸‹å±ï¼ˆä¸åŒ…æ‹¬å° Bï¼‰ç»„æˆäº†æ ‘çŠ¶ç»“æ„ï¼Œå° B åœ¨é¡¶ç«¯ï¼Œå…¶ä»–äººéƒ½æœ‰ä¸€ä¸ªç›´å±ä¸Šå¸ã€‚  
- å° B ç¼–å· $0$ï¼Œå…¶ä»–äººç¼–å· $1 \sim n$ã€‚  
- å¯¹äºç¬¬ $i$ äººï¼Œå¦‚æœè¿™ä¸ªäººæ²¡æœ‰ä¸‹å±ï¼Œé‚£ä¹ˆå° A å¯ä»¥ç»™ä»– $A_i$ å…ƒé’±ï¼Œåˆ™ä»–ä¼šå‘ä»–çš„ç›´å±ä¸Šå¸å†™ä¸€å°ä¿¡ï¼Œè¡¨ç¤ºå° A å‘å° B æ±‚çˆ±ï¼›  
- å¦‚æœä»–çš„ç›´å±ä¸‹å±æœ‰å æ¯”ä¸å°äº $\dfrac{A_i}{T}$ çš„äººå†™ä¿¡è¡¨ç¤ºå° A å‘å° B æ±‚çˆ±ï¼Œé‚£ä¹ˆä»–ä¹Ÿä¼šå‘ä»–çš„ç›´å±ä¸Šå¸å†™ä¸€å°ä¿¡ï¼Œè¡¨ç¤ºå° A å‘å° B æ±‚çˆ±ã€‚    
- å¦‚æœå° B çš„ç›´å±ä¸‹å±æœ‰å æ¯”ä¸å°äº $\dfrac{C}{T}$ çš„äººå†™ä¿¡è¡¨ç¤ºå° A å‘å° B æ±‚çˆ±ï¼Œé‚£ä¹ˆå¥¹ä¼šåŒæ„å° A çš„è¯·æ±‚ã€‚

è¯·é—®å° A è‡³å°‘éœ€è¦ç»™å¤šå°‘é’±æ‰ä¼šè®©å° B åŒæ„å° A çš„æ±‚çˆ±ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $20 \%$ çš„æ•°æ®ï¼Œæ²¡æœ‰ç›´å±ä¸‹å±çš„äººæ•° $\le 15$ã€‚  
å¯¹äº $40 \%$ çš„æ•°æ®ï¼Œ$n \le 2000$ã€‚  
å¦æœ‰ $10 \%$ çš„æ•°æ®ï¼Œ$B_i = 0$ã€‚
å¦æœ‰ $10 \%$ çš„æ•°æ®ï¼Œ$C = 1$ ä¸”å¯¹äºæœ‰ç›´ç³»ä¸‹å±çš„äºº $T / A_i > n$ã€‚  
å¦æœ‰ $10 \%$ çš„æ•°æ®ï¼Œ$B_i = i - 1$ã€‚

å¯¹äº $100 \%$ çš„æ•°æ®ï¼Œ$1 \le n \le 500000$ï¼Œ$1 \le T \le {10}^9$ï¼Œ$B_i < i$ï¼Œ$1 \le A_i \le T$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
14 5 3
0 3
0 3
1 10
1 10
2 3
2 10
2 3
5 10
7 10
5 10
7 10
5 10
7 10
5 10
```

### è¾“å‡º

```
50
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šã€Œæ‹çˆ±ã€æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ ‘å½¢åŠ¨æ€è§„åˆ’ï¼ˆTree DPï¼‰+ è´ªå¿ƒç­–ç•¥  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**åœ¨æ ‘ç»“æ„ä¸­ï¼Œé€šè¿‡è´ªå¿ƒé€‰æ‹©æœ€å°ä»£ä»·çš„å­èŠ‚ç‚¹ï¼Œæ»¡è¶³æ¯ä¸ªèŠ‚ç‚¹çš„â€œå†™ä¿¡æ¡ä»¶â€**ã€‚å¯ä»¥æŠŠæ ‘æƒ³è±¡æˆä¸€æ£µâ€œæœå®æ ‘â€ï¼šæ¯ä¸ªèŠ‚ç‚¹ï¼ˆéå¶å­ï¼‰éœ€è¦ä»å­èŠ‚ç‚¹ä¸­é‡‡æ‘˜**è¶³å¤Ÿæ•°é‡çš„æœ€ä¾¿å®œæœå®**ï¼Œæ‰èƒ½è®©è‡ªå·±â€œæˆç†Ÿâ€ï¼ˆå‘çˆ¶èŠ‚ç‚¹å†™ä¿¡ï¼‰ï¼›è€Œå¶å­èŠ‚ç‚¹æœ¬èº«å°±æ˜¯â€œæœå®â€ï¼Œç›´æ¥éœ€è¦èŠ±è´¹å¯¹åº”çš„é‡‘é¢ã€‚  

### æ ¸å¿ƒç®—æ³•æ€è·¯  
- **æ ‘å½¢DP**ï¼šå®šä¹‰`dp[u]`è¡¨ç¤ºè®©èŠ‚ç‚¹`u`å‘çˆ¶èŠ‚ç‚¹å†™ä¿¡çš„æœ€å°èŠ±è´¹ã€‚  
- **è´ªå¿ƒé€‰æ‹©**ï¼šå¯¹äºæ¯ä¸ªéå¶å­èŠ‚ç‚¹`u`ï¼Œéœ€è¦é€‰**è‡³å°‘`ceil(A_u * å­èŠ‚ç‚¹æ•° / T)`ä¸ª**å­èŠ‚ç‚¹çš„`dp`å€¼ï¼ˆå³å­èŠ‚ç‚¹çš„æœ€å°èŠ±è´¹ï¼‰ï¼Œæ±‚å’Œå¾—åˆ°`u`çš„`dp`å€¼ã€‚  
- **è¾¹ç•Œæ¡ä»¶**ï¼šå¶å­èŠ‚ç‚¹çš„`dp`å€¼ç­‰äºå…¶`A_i`ï¼ˆç›´æ¥èŠ±é’±è®©ä»–å†™ä¿¡ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿæ ‘çš„ç»“æ„ï¼š  
- æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼ˆæ¯”å¦‚æ ¹èŠ‚ç‚¹0æ˜¯çº¢è‰²ï¼Œå¶å­æ˜¯ç»¿è‰²ï¼‰ã€‚  
- å½“è®¡ç®—`dp[u]`æ—¶ï¼Œå­èŠ‚ç‚¹çš„åƒç´ å—ä¼š**æŒ‰`dp`å€¼ä»å°åˆ°å¤§æ’åº**ï¼ˆç”¨ç®­å¤´æŒ‡å‘æ’åºåçš„é¡ºåºï¼‰ã€‚  
- é€‰ä¸­çš„å­èŠ‚ç‚¹ä¼š**é—ªçƒ**ï¼Œå¹¶æ˜¾ç¤ºç´¯åŠ çš„èŠ±è´¹ï¼ˆæ¯”å¦‚â€œ+10â€â€œ+20â€ï¼‰ï¼ŒåŒæ—¶æ’­æ”¾â€œå®â€çš„åƒç´ éŸ³æ•ˆã€‚  
- æ ¹èŠ‚ç‚¹è®¡ç®—å®Œæˆæ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œæ•´ä¸ªæ ‘ä¼šâ€œå‘å…‰â€è¡¨ç¤ºæˆåŠŸã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šmomo5440ï¼Œèµï¼š11ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**æå…¶ç®€æ´**ï¼Œç›´æ¥ç”¨**å°æ ¹å †**ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰å­˜å‚¨å­èŠ‚ç‚¹çš„`dp`å€¼ï¼Œè‡ªåŠ¨ç»´æŠ¤æœ€å°å€¼ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œå˜é‡å‘½åï¼ˆå¦‚`bian`è¡¨ç¤ºå­èŠ‚ç‚¹åˆ—è¡¨ï¼‰ç¬¦åˆç›´è§‰ã€‚ç‰¹åˆ«æ˜¯å¤„ç†â€œéœ€è¦é€‰å¤šå°‘ä¸ªå­èŠ‚ç‚¹â€æ—¶ï¼Œç”¨`1.0 * a[x] * bian[x].size() / t`ç¡®ä¿æµ®ç‚¹æ•°è®¡ç®—ï¼Œé¿å…æ•´æ•°å–æ•´é”™è¯¯ã€‚è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(n log n)`ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹å…¥å †ä¸€æ¬¡ï¼‰ï¼Œéå¸¸é«˜æ•ˆï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼ˆ`nâ‰¤5e5`ï¼‰ã€‚  

### é¢˜è§£äºŒï¼ˆä½œè€…ï¼šéƒ‘æœæ›¦zzxï¼Œèµï¼š7ï¼‰  
* **ç‚¹è¯„**ï¼š  
  é¢˜è§£ç”¨`vector`å­˜å‚¨å­èŠ‚ç‚¹çš„`dp`å€¼ï¼Œç„¶å**æ’åº**å–å‰`k`ä¸ªï¼Œæ€è·¯æ›´ç›´è§‚ã€‚ä»£ç ä¸­çš„`f`å‡½æ•°ï¼ˆå‘ä¸Šå–æ•´ï¼‰å¤„ç†äº†åˆ†æ•°é—®é¢˜ï¼Œé¿å…äº†æµ®ç‚¹æ•°è¯¯å·®ã€‚æ­¤å¤–ï¼Œä½œè€…ç‰¹åˆ«å¼ºè°ƒäº†`long long`çš„é‡è¦æ€§ï¼ˆé˜²æ­¢æº¢å‡ºï¼‰ï¼Œè¿™æ˜¯ç«èµ›ä¸­çš„å…³é”®ç»†èŠ‚ã€‚è¿™ç§æ–¹æ³•çš„å¯è¯»æ€§å¾ˆé«˜ï¼Œé€‚åˆåˆå­¦è€…ç†è§£æ ‘å½¢DPçš„æµç¨‹ã€‚  

### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šxy0313ï¼Œèµï¼š5ï¼‰  
* **ç‚¹è¯„**ï¼š  
  é¢˜è§£ä¸­**æ ¹èŠ‚ç‚¹çš„ç‰¹æ®Šå¤„ç†**ï¼ˆ`a[0] = C`ï¼‰éå¸¸åˆ°ä½ï¼Œæ˜ç¡®äº†æ ¹èŠ‚ç‚¹çš„â€œå†™ä¿¡æ¡ä»¶â€æ˜¯`C/T`çš„æ¯”ä¾‹ã€‚æ­¤å¤–ï¼Œä½œè€…ç”¨`priority_queue`çš„æ–¹å¼ä¸é¢˜è§£ä¸€ç±»ä¼¼ï¼Œä½†å¢åŠ äº†å¯¹æ ¹èŠ‚ç‚¹çš„æ³¨é‡Šï¼Œå¸®åŠ©å­¦ä¹ è€…åŒºåˆ†æ ¹èŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹çš„å·®å¼‚ã€‚è¿™ç§â€œåˆ†æƒ…å†µè®¨è®ºâ€çš„æ€è·¯ï¼ŒåŸ¹å…»äº†å­¦ä¹ è€…å¤„ç†è¾¹ç•Œæ¡ä»¶çš„èƒ½åŠ›ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **å¦‚ä½•è®¡ç®—éœ€è¦é€‰çš„å­èŠ‚ç‚¹æ•°é‡ï¼Ÿ**  
- **éš¾ç‚¹**ï¼šé¢˜ç›®è¦æ±‚â€œå æ¯”ä¸å°äº`A_i/T`â€ï¼Œå³éœ€è¦é€‰`ceil(A_i * å­èŠ‚ç‚¹æ•° / T)`ä¸ªã€‚å¦‚æœç›´æ¥ç”¨æ•´æ•°é™¤æ³•ï¼ˆå¦‚`A_i * cnt / T`ï¼‰ï¼Œä¼šä¸¢å¤±å°æ•°éƒ¨åˆ†ï¼ˆæ¯”å¦‚`3*5/10=1.5`ï¼Œæ•´æ•°é™¤æ³•å¾—1ï¼Œè€Œå®é™…éœ€è¦2ï¼‰ã€‚  
- **è§£å†³ç­–ç•¥**ï¼šç”¨æµ®ç‚¹æ•°è®¡ç®—ï¼ˆå¦‚`1.0 * A_i * cnt / T`ï¼‰ï¼Œå†ç”¨`ceil`å‡½æ•°å‘ä¸Šå–æ•´ã€‚æˆ–è€…ç”¨æ•´æ•°æŠ€å·§ï¼š`(A_i * cnt + T - 1) / T`ï¼ˆé¿å…æµ®ç‚¹æ•°è¯¯å·®ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤„ç†â€œæ¯”ä¾‹é—®é¢˜â€æ—¶ï¼Œä¸€å®šè¦æ³¨æ„å‘ä¸Šå–æ•´ï¼Œé¿å…å› è®¡ç®—é”™è¯¯å¯¼è‡´ç­”æ¡ˆåå°ã€‚  

### 2. **å¦‚ä½•é«˜æ•ˆè·å–æœ€å°çš„kä¸ªå­èŠ‚ç‚¹ï¼Ÿ**  
- **éš¾ç‚¹**ï¼šå¦‚æœå­èŠ‚ç‚¹æ•°é‡å¾ˆå¤§ï¼ˆå¦‚`5e5`ï¼‰ï¼Œç›´æ¥æ’åºæ‰€æœ‰å­èŠ‚ç‚¹ä¼šè€—æ—¶å—ï¼Ÿ  
- **è§£å†³ç­–ç•¥**ï¼š  
  - æ–¹æ³•ä¸€ï¼ˆå°æ ¹å †ï¼‰ï¼šå°†å­èŠ‚ç‚¹çš„`dp`å€¼å…¥å †ï¼Œç„¶åå–å‰`k`ä¸ªï¼Œæ—¶é—´å¤æ‚åº¦`O(k log cnt)`ï¼ˆ`cnt`æ˜¯å­èŠ‚ç‚¹æ•°ï¼‰ã€‚  
  - æ–¹æ³•äºŒï¼ˆæ’åºï¼‰ï¼šå°†å­èŠ‚ç‚¹çš„`dp`å€¼å­˜å…¥`vector`ï¼Œæ’åºåå–å‰`k`ä¸ªï¼Œæ—¶é—´å¤æ‚åº¦`O(cnt log cnt)`ã€‚  
  ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡æœ¬é¢˜ï¼Œä½†å°æ ¹å †åœ¨`k`è¾ƒå°æ—¶æ›´é«˜æ•ˆã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€‰æ‹©æ•°æ®ç»“æ„æ—¶ï¼Œè¦æ ¹æ®â€œéœ€è¦å–å¤šå°‘ä¸ªæœ€å°å€¼â€æ¥å†³å®šï¼ˆå †é€‚åˆå–å‰kå°ï¼Œæ’åºé€‚åˆå–å…¨éƒ¨ï¼‰ã€‚  

### 3. **æ ¹èŠ‚ç‚¹çš„ç‰¹æ®Šå¤„ç†**  
- **éš¾ç‚¹**ï¼šæ ¹èŠ‚ç‚¹ï¼ˆ0å·ï¼‰çš„â€œå†™ä¿¡æ¡ä»¶â€æ˜¯`C/T`çš„æ¯”ä¾‹ï¼Œè€Œå…¶ä»–èŠ‚ç‚¹æ˜¯`A_i/T`ã€‚  
- **è§£å†³ç­–ç•¥**ï¼šå°†æ ¹èŠ‚ç‚¹çš„`A_0`è®¾ä¸º`C`ï¼Œè¿™æ ·å¯ä»¥ç»Ÿä¸€å¤„ç†æ‰€æœ‰èŠ‚ç‚¹çš„é€»è¾‘ï¼ˆæ¯”å¦‚é¢˜è§£ä¸­çš„`a[0] = c`ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€šè¿‡â€œç»Ÿä¸€å˜é‡â€å¯ä»¥ç®€åŒ–ä»£ç ï¼Œé¿å…é‡å¤é€»è¾‘ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†é¢˜è§£ä¸€ï¼ˆå°æ ¹å †ï¼‰å’Œé¢˜è§£äºŒï¼ˆæ’åºï¼‰çš„æ€è·¯ï¼Œé€‰æ‹©**æ’åº**æ–¹å¼ï¼ˆæ›´ç›´è§‚ï¼‰ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  using namespace std;
  typedef long long ll;

  const int N = 5e5 + 10;
  vector<int> son[N]; // å­èŠ‚ç‚¹åˆ—è¡¨
  ll a[N], dp[N]; // a[u]æ˜¯èŠ‚ç‚¹uçš„Aå€¼ï¼Œdp[u]æ˜¯èŠ‚ç‚¹uçš„æœ€å°èŠ±è´¹
  int n, t, c;

  void dfs(int u) {
      if (son[u].empty()) { // å¶å­èŠ‚ç‚¹
          dp[u] = a[u];
          return;
      }
      vector<ll> vals; // å­˜å‚¨å­èŠ‚ç‚¹çš„dpå€¼
      for (int v : son[u]) {
          dfs(v);
          vals.push_back(dp[v]);
      }
      sort(vals.begin(), vals.end()); // æŒ‰ä»å°åˆ°å¤§æ’åº
      int cnt = son[u].size();
      ll k = (a[u] * cnt + t - 1) / t; // å‘ä¸Šå–æ•´ï¼ˆæ•´æ•°æŠ€å·§ï¼‰
      dp[u] = 0;
      for (int i = 0; i < k; i++) { // å–å‰kä¸ªæœ€å°å€¼
          dp[u] += vals[i];
      }
  }

  int main() {
      cin >> n >> t >> c;
      a[0] = c; // æ ¹èŠ‚ç‚¹çš„Aå€¼è®¾ä¸ºC
      for (int i = 1; i <= n; i++) {
          int fa;
          cin >> fa >> a[i];
          son[fa].push_back(i);
      }
      dfs(0);
      cout << dp[0] << endl;
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **å»ºæ ‘**ï¼šç”¨`son`æ•°ç»„å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚  
  2. **DFSéå†**ï¼šä»æ ¹èŠ‚ç‚¹ï¼ˆ0ï¼‰å¼€å§‹ï¼Œé€’å½’è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„`dp`å€¼ã€‚  
  3. **å¤„ç†å­èŠ‚ç‚¹**ï¼šå¯¹äºéå¶å­èŠ‚ç‚¹ï¼Œæ”¶é›†å­èŠ‚ç‚¹çš„`dp`å€¼ï¼Œæ’åºåå–å‰`k`ä¸ªä¹‹å’Œã€‚  
  4. **è¾“å‡ºç»“æœ**ï¼šæ ¹èŠ‚ç‚¹çš„`dp[0]`å°±æ˜¯ç­”æ¡ˆã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼ˆå°æ ¹å †å®ç°ï¼‰  
* **äº®ç‚¹**ï¼šç”¨å°æ ¹å †è‡ªåŠ¨ç»´æŠ¤æœ€å°å€¼ï¼Œé¿å…æ’åºæ‰€æœ‰å­èŠ‚ç‚¹ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  priority_queue<ll, vector<ll>, greater<ll>> q;
  for (ll i = 0; i < bian[x].size(); i++) {
      q.push(dfs(bian[x][i]));
  }
  ll ans = 0;
  for (ll i = 0; i < 1.0 * a[x] * bian[x].size() / t; i++) {
      ans += q.top();
      q.pop();
  }
  return ans;
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `priority_queue`æ˜¯å°æ ¹å †ï¼ˆ`greater<ll>`ï¼‰ï¼Œå­˜å‚¨å­èŠ‚ç‚¹çš„`dp`å€¼ã€‚  
  - å¾ªç¯å–å‰`k`ä¸ªå †é¡¶å…ƒç´ ï¼ˆæœ€å°å€¼ï¼‰ï¼Œç´¯åŠ å¾—åˆ°å½“å‰èŠ‚ç‚¹çš„`dp`å€¼ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå°æ ¹å †é€‚åˆâ€œå–å‰kå°â€çš„åœºæ™¯ï¼Œæ¯”æ’åºæ›´é«˜æ•ˆï¼ˆå½“`k`è¿œå°äºå­èŠ‚ç‚¹æ•°æ—¶ï¼‰ã€‚  

#### é¢˜è§£äºŒï¼ˆæ’åºå®ç°ï¼‰  
* **äº®ç‚¹**ï¼šç”¨`vector`æ’åºï¼Œæ€è·¯ç›´è§‚ï¼Œé€‚åˆåˆå­¦è€…ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  vector<ll> now;
  for (int i = 0; i < cnt; ++i) {
      now.push_back(dp(tree[x][i]));
  }
  sort(now.begin(), now.end());
  ll sum = f((double)cost[x] * cnt / t);
  ll ans = 0;
  for (int i = 0; i < sum; ++i) {
      ans += now[i];
  }
  return ans;
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `now`æ•°ç»„å­˜å‚¨å­èŠ‚ç‚¹çš„`dp`å€¼ï¼Œæ’åºåå–å‰`sum`ä¸ªã€‚  
  - `f`å‡½æ•°æ˜¯å‘ä¸Šå–æ•´ï¼ˆæ¯”å¦‚`f(1.5)=2`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ’åºçš„å¯è¯»æ€§æ›´é«˜ï¼Œé€‚åˆç†è§£â€œé€‰æœ€å°çš„kä¸ªâ€çš„é€»è¾‘ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**ã€Šæœå®æ ‘å†’é™©ã€‹**ï¼ˆ8ä½åƒç´ é£æ ¼ï¼Œä»¿FCæ¸¸æˆï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **æ ‘ç»“æ„åˆå§‹åŒ–**ï¼š  
   - æ ¹èŠ‚ç‚¹ï¼ˆ0å·ï¼‰ä½äºå±å¹•é¡¶éƒ¨ï¼Œå­èŠ‚ç‚¹æŒ‰å±‚æ¬¡æ’åˆ—ï¼ˆæ¯”å¦‚1ã€2å·æ˜¯æ ¹çš„å­èŠ‚ç‚¹ï¼Œ3ã€4å·æ˜¯1çš„å­èŠ‚ç‚¹ï¼Œç­‰ç­‰ï¼‰ã€‚  
   - å¶å­èŠ‚ç‚¹ç”¨**ç»¿è‰²åƒç´ å—**è¡¨ç¤ºï¼Œéå¶å­èŠ‚ç‚¹ç”¨**è“è‰²åƒç´ å—**è¡¨ç¤ºï¼Œæ ¹èŠ‚ç‚¹ç”¨**çº¢è‰²åƒç´ å—**è¡¨ç¤ºã€‚  

2. **DFSéå†è¿‡ç¨‹**ï¼š  
   - ç”¨**é»„è‰²ç®­å¤´**è¡¨ç¤ºå½“å‰éå†çš„èŠ‚ç‚¹ï¼ˆä»æ ¹å¼€å§‹ï¼Œé€’å½’åˆ°å¶å­ï¼‰ã€‚  
   - å¶å­èŠ‚ç‚¹è¢«è®¿é—®æ—¶ï¼Œæ˜¾ç¤ºâ€œ+A_iâ€ï¼ˆæ¯”å¦‚â€œ+10â€ï¼‰ï¼Œè¡¨ç¤ºèŠ±è´¹A_iè®©ä»–å†™ä¿¡ã€‚  

3. **è®¡ç®—dpå€¼**ï¼š  
   - éå¶å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¼š**æŒ‰dpå€¼ä»å°åˆ°å¤§æ’åº**ï¼ˆç”¨ç®­å¤´æŒ‡å‘æ’åºåçš„é¡ºåºï¼‰ã€‚  
   - é€‰ä¸­çš„å­èŠ‚ç‚¹ä¼š**é—ªçƒ**ï¼Œå¹¶æ˜¾ç¤ºç´¯åŠ çš„èŠ±è´¹ï¼ˆæ¯”å¦‚â€œ+10â€â€œ+20â€ï¼‰ï¼ŒåŒæ—¶æ’­æ”¾â€œå®â€çš„åƒç´ éŸ³æ•ˆã€‚  
   - å½“è®¡ç®—å®Œä¸€ä¸ªèŠ‚ç‚¹çš„dpå€¼æ—¶ï¼Œè¯¥èŠ‚ç‚¹çš„åƒç´ å—ä¼šæ˜¾ç¤º`dp[u]`çš„å€¼ï¼ˆæ¯”å¦‚â€œ50â€ï¼‰ã€‚  

4. **èƒœåˆ©çŠ¶æ€**ï¼š  
   - æ ¹èŠ‚ç‚¹çš„dpå€¼è®¡ç®—å®Œæˆæ—¶ï¼Œæ•´ä¸ªæ ‘ä¼š**å‘å…‰**ï¼ˆåƒç´ å—å˜äº®ï¼‰ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„8ä½éŸ³ä¹ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œæˆåŠŸï¼æœ€å°èŠ±è´¹ï¼šXâ€ã€‚  

### äº¤äº’è®¾è®¡  
- **æ­¥è¿›æ§åˆ¶**ï¼šâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€èŠ‚ç‚¹è®¡ç®—ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¯è°ƒé€Ÿåº¦ï¼‰ã€‚  
- **é‡ç½®æŒ‰é’®**ï¼šé‡æ–°å¼€å§‹åŠ¨ç”»ã€‚  
- **éŸ³æ•ˆå¼€å…³**ï¼šå¯ä»¥å¼€å¯/å…³é—­éŸ³æ•ˆï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚  

### æŠ€æœ¯å®ç°  
- **Canvasç»˜åˆ¶**ï¼šç”¨`ctx.fillRect`ç»˜åˆ¶åƒç´ å—ï¼Œ`ctx.strokeText`æ˜¾ç¤ºæ–‡æœ¬ã€‚  
- **éŸ³æ•ˆ**ï¼šç”¨`Audio`å¯¹è±¡æ’­æ”¾8ä½éŸ³æ•ˆï¼ˆæ¯”å¦‚â€œå®â€çš„å£°éŸ³æ–‡ä»¶ï¼‰ã€‚  
- **é€»è¾‘æ§åˆ¶**ï¼šç”¨`setInterval`å®ç°è‡ªåŠ¨æ’­æ”¾ï¼Œ`addEventListener`å¤„ç†æŒ‰é’®ç‚¹å‡»ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
æ ‘å½¢DP+è´ªå¿ƒçš„ç­–ç•¥ï¼Œé€‚ç”¨äº**æ ‘ç»“æ„ä¸­çš„æœ€å°ä»£ä»·é€‰æ‹©é—®é¢˜**ï¼Œæ¯”å¦‚ï¼š  
- å…¬å¸ç»„ç»‡æ¶æ„ä¸­ï¼Œé€‰æ‹©æœ€å°‘çš„å‘˜å·¥åŸ¹è®­ï¼Œæ»¡è¶³æ¯ä¸ªéƒ¨é—¨çš„è¦æ±‚ã€‚  
- æ ‘çŠ¶ç»“æ„çš„æ¸¸æˆä¸­ï¼Œæ”¶é›†æœ€å°‘çš„èµ„æºï¼Œæ»¡è¶³æ¯ä¸ªèŠ‚ç‚¹çš„æ¡ä»¶ã€‚  

### æ´›è°·ç»ƒä¹ æ¨è  
1. **æ´›è°· P1352 æ²¡æœ‰ä¸Šå¸çš„èˆä¼š**ï¼ˆæ ‘å½¢DPç»å…¸é¢˜ï¼Œé€‰æ‹©èŠ‚ç‚¹ä½¿æ€»å’Œæœ€å¤§ï¼Œä¸é€‰ç›¸é‚»èŠ‚ç‚¹ï¼‰  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå·©å›ºæ ‘å½¢DPçš„çŠ¶æ€å®šä¹‰å’Œè½¬ç§»é€»è¾‘ã€‚  
2. **æ´›è°· P2014 é€‰è¯¾**ï¼ˆæ ‘å½¢DP+èƒŒåŒ…ï¼Œé€‰æ‹©è¯¾ç¨‹ä½¿å­¦åˆ†æœ€å¤§ï¼Œæ»¡è¶³å…ˆä¿®è¯¾è¦æ±‚ï¼‰  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå­¦ä¹ æ ‘å½¢ç»“æ„ä¸èƒŒåŒ…é—®é¢˜çš„ç»“åˆã€‚  
3. **æ´›è°· P3177 æ ‘ä¸Šçš„è·¯å¾„**ï¼ˆæ ‘å½¢DP+è´ªå¿ƒï¼Œæ±‚æ ‘ä¸­æœ€é•¿è·¯å¾„ï¼‰  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»ƒä¹ æ ‘å½¢ç»“æ„ä¸­çš„è´ªå¿ƒé€‰æ‹©ç­–ç•¥ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
- **`long long`çš„é‡è¦æ€§**ï¼šé¢˜è§£ä¸­å¤šæ¬¡å¼ºè°ƒç”¨`long long`ï¼ˆæ¯”å¦‚`typedef long long ll`ï¼‰ï¼Œå› ä¸º`nâ‰¤5e5`ï¼Œæ¯ä¸ª`A_i`â‰¤1e9ï¼Œç´¯åŠ çš„èŠ±è´¹å¯èƒ½è¶…è¿‡`int`çš„èŒƒå›´ï¼ˆ2e9ï¼‰ã€‚  
- **è¾¹ç•Œæ¡ä»¶å¤„ç†**ï¼šå¶å­èŠ‚ç‚¹çš„`dp`å€¼ç›´æ¥ç­‰äº`A_i`ï¼Œè¿™æ˜¯æ ‘å½¢DPçš„åŸºç¡€ã€‚  
- **æµ®ç‚¹æ•°è¯¯å·®**ï¼šè®¡ç®—éœ€è¦é€‰çš„å­èŠ‚ç‚¹æ•°é‡æ—¶ï¼Œç”¨æ•´æ•°æŠ€å·§ï¼ˆ`(a*b + t-1)/t`ï¼‰æ¯”æµ®ç‚¹æ•°æ›´å¯é ã€‚  


## ç»“è¯­  
æœ¬æ¬¡åˆ†æçš„â€œæ‹çˆ±â€é¢˜ï¼Œæ ¸å¿ƒæ˜¯**æ ‘å½¢DP+è´ªå¿ƒ**ï¼Œé€šè¿‡é€‰æ‹©æœ€å°ä»£ä»·çš„å­èŠ‚ç‚¹ï¼Œæ»¡è¶³æ¯ä¸ªèŠ‚ç‚¹çš„æ¡ä»¶ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£æ ‘å½¢DPçš„æ€è·¯ï¼ŒæŒæ¡è´ªå¿ƒé€‰æ‹©çš„æŠ€å·§ã€‚è®°ä½ï¼š**æ ‘å½¢é—®é¢˜çš„å…³é”®æ˜¯â€œè‡ªåº•å‘ä¸Šâ€è®¡ç®—ï¼Œè€Œè´ªå¿ƒçš„æ ¸å¿ƒæ˜¯â€œé€‰æ‹©æœ€ä¼˜çš„å±€éƒ¨è§£â€**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ›´å¤šæœ‰è¶£çš„ç®—æ³•é—®é¢˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š128.50ç§’
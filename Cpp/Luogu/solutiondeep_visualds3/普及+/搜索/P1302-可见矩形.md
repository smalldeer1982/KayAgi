# é¢˜ç›®ä¿¡æ¯

# å¯è§çŸ©å½¢

## é¢˜ç›®æè¿°

ç»™å®šå¹³é¢ä¸Š $n$ ä¸ªäº’ä¸ç›¸äº¤ï¼ˆæŒ‡å…¬å…±é¢ç§¯ä¸ºé›¶ï¼‰çš„æ­£æ–¹å½¢ï¼Œå®ƒä»¬çš„é¡¶ç‚¹åæ ‡å‡ä¸ºæ•´æ•°ã€‚è®¾åæ ‡åŸç‚¹ä¸º $O(0,0)$ã€‚å¯¹äºä»»ä¸€æ­£æ–¹å½¢ $R$ï¼Œå¦‚æœå¯ä»¥æ‰¾åˆ° $R$ çš„è¾¹ä¸Š $2$ ä¸ªä¸åŒçš„ç‚¹ $A$ å’Œ $B$ï¼Œä½¿ $\triangle OAB$ çš„å†…éƒ¨ä¸å…¶ä»–æ­£æ–¹å½¢æ— å…¬å…±ç‚¹ï¼Œåˆ™ç§°æ­£æ–¹å½¢ $R$ æ˜¯ä» $O$ ç‚¹å¯è§çš„æ­£æ–¹å½¢ã€‚

å¯¹äºç»™å®šçš„ $n$ ä¸ªäº’ä¸ç›¸äº¤çš„æ­£æ–¹å½¢ï¼Œè®¡ç®—ä»åæ ‡åŸç‚¹ $O$ å¯è§çš„æ­£æ–¹å½¢ä¸ªæ•°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3

2 6 4

1 4 1

2 4 1

```

### è¾“å‡º

```
3

```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šå¯è§çŸ©å½¢ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åŒºé—´è¦†ç›–ä¸å‡ ä½•æ’åº`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è§£å†³"å¯è§çŸ©å½¢"é—®é¢˜ï¼Œå…³é”®åœ¨äºå°†å‡ ä½•é—®é¢˜è½¬åŒ–ä¸ºæ–œç‡åŒºé—´è¦†ç›–é—®é¢˜ã€‚æƒ³è±¡ä½ ç«™åœ¨åŸç‚¹ä¸¾ç€æ‰‹ç”µç­’æ—‹è½¬ç…§å°„ï¼ˆå¦‚å›¾ï¼‰ï¼Œæ¯ä¸ªæ­£æ–¹å½¢ä¼šé®æŒ¡ç‰¹å®šè§’åº¦èŒƒå›´çš„å…‰çº¿ã€‚  
> - æ ¸å¿ƒæ€è·¯ï¼šè®¡ç®—æ¯ä¸ªæ­£æ–¹å½¢çš„"å¯è§è§’åº¦èŒƒå›´"ï¼ˆæœ€å°æ–œç‡y/(x+l)åˆ°æœ€å¤§æ–œç‡(y+l)/xï¼‰ï¼ŒæŒ‰x+y+lå‡åºæ’åºï¼ˆç¡®ä¿é è¿‘åŸç‚¹çš„å…ˆå¤„ç†ï¼‰ï¼Œç”¨é›†åˆç»´æŠ¤å·²è¢«é®æŒ¡çš„åŒºé—´ã€‚è‹¥å½“å‰æ­£æ–¹å½¢åŒºé—´æœªè¢«å®Œå…¨è¦†ç›–ï¼Œåˆ™å¯è§  
> - éš¾ç‚¹ï¼šåŒºé—´åˆå¹¶çš„è¾¹ç•Œå¤„ç†ï¼ˆå¦‚ç›¸äº¤åŒºé—´åˆå¹¶ï¼‰å’Œæµ®ç‚¹ç²¾åº¦æ§åˆ¶  
> - å¯è§†åŒ–è®¾è®¡ï¼šç”¨åƒç´ ç½‘æ ¼å±•ç¤ºæ­£æ–¹å½¢ä½ç½®ï¼ŒåŠ¨æ€ç»˜åˆ¶ä»åŸç‚¹æ—‹è½¬çš„æ‰«æçº¿å’Œè¦†ç›–åŒºé—´è‰²å¸¦ï¼Œé«˜äº®å½“å‰åˆ¤æ–­çš„æ­£æ–¹å½¢  
> - å¤å¤å…ƒç´ ï¼šæ‰«æçº¿ç”¨8-bitåƒç´ å…‰æŸï¼ŒåŒºé—´åˆå¹¶æ—¶æ’­æ”¾"åƒè±†äºº"éŸ³æ•ˆï¼Œå¯è§æ­£æ–¹å½¢ç‚¹äº®æ—¶è§¦å‘"è¶…çº§é©¬é‡Œå¥¥"é‡‘å¸éŸ³

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£äº”ï¼š(æ¥æºï¼šWZWZWZWY)**  
* **ç‚¹è¯„**ï¼šæ€è·¯æœ€æ¸…æ™°å®Œæ•´ï¼å°†å‡ ä½•é—®é¢˜è½¬åŒ–ä¸ºåŒºé—´è¦†ç›–é—®é¢˜ï¼Œç”¨setç»´æŠ¤è¦†ç›–åŒºé—´ï¼Œé€šè¿‡åˆå¹¶ç›¸äº¤åŒºé—´é«˜æ•ˆåˆ¤æ–­å¯è§æ€§ã€‚ä»£ç ç»“æ„è§„èŒƒï¼ˆå˜é‡åa[i].mink/maxkå«ä¹‰æ˜ç¡®ï¼‰ï¼Œæ ¸å¿ƒé€»è¾‘é›†ä¸­åœ¨åŒºé—´åˆå¹¶éƒ¨åˆ†ï¼ˆ20è¡Œå†…è§£å†³ï¼‰ã€‚è™½ç„¶æœªå¤„ç†æµ®ç‚¹ç²¾åº¦ä½†å·²è¶³å¤Ÿé€šè¿‡æµ‹è¯•ï¼Œæ˜¯å¯ç›´æ¥ç”¨äºç«èµ›çš„ä¼˜è´¨å‚è€ƒã€‚

**é¢˜è§£ä¸€ï¼š(æ¥æºï¼šBFSBFSBFSBFS)**  
* **ç‚¹è¯„**ï¼šæœ€æ—©å‘ç°æ–œç‡åŒºé—´æœ¬è´¨ï¼Œç‹¬åˆ›"æ’å…¥æ’åºç»´æŠ¤åŒºé—´æ•°ç»„"çš„æ–¹æ³•ã€‚Pascalä»£ç ç¨éš¾è¯»ä½†æ€è·¯æœ‰å¯å‘æ€§ï¼ˆå¦‚ç”¨p1/p2åŠ¨æ€ç»´æŠ¤è¦†ç›–è¾¹ç•Œï¼‰ï¼Œå¯æƒœæœªå®Œå…¨è§£å†³åŒºé—´åˆå¹¶é—®é¢˜å¯¼è‡´éƒ¨åˆ†æƒ…å†µé—æ¼ã€‚

**é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šThronf)**  
* **ç‚¹è¯„**ï¼šæä¾›ç›´è§‚çš„"å°„çº¿æ‰«æ"æ€è·¯ï¼Œé€šè¿‡æšä¸¾è§’åº¦åˆ¤æ–­æ¯ä¸ªæ–œç‡é¦–æ¬¡ç¢°åˆ°çš„æ­£æ–¹å½¢ã€‚è™½ç„¶O(100000n)æ•ˆç‡è¾ƒä½ï¼Œä½†å®ç°ç®€å•ä¸”åŒ…å«é‡è¦è°ƒè¯•ç»éªŒï¼ˆå¦‚Ï€/180000çš„ç²¾åº¦è®¾ç½®ï¼‰ï¼Œé€‚åˆå¸®åŠ©ç†è§£é—®é¢˜æœ¬è´¨ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **æ–œç‡åŒºé—´è®¡ç®—**  
   * **åˆ†æ**ï¼šè®¡ç®—mink=y/(x+l)å’Œmaxk=(y+l)/xæ—¶ï¼Œéœ€ç†è§£å…¶å‡ ä½•æ„ä¹‰â€”â€”æ˜¯å…‰çº¿æ“¦è¿‡æ­£æ–¹å½¢å·¦ä¸‹è§’å’Œå³ä¸Šè§’çš„ä¸´ç•Œæ–œç‡  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šmink/maxkå®šä¹‰äº†æ­£æ–¹å½¢åœ¨å…‰çº¿æ‰«æä¸­çš„"å¯è§†çª—å£"

2. **å¤„ç†é¡ºåºä¼˜åŒ–**  
   * **åˆ†æ**ï¼šå¿…é¡»æŒ‰x+y+lå‡åºæ’åºï¼å› ä¸ºé è¿‘åŸç‚¹çš„æ­£æ–¹å½¢ï¼ˆx+y+lå°ï¼‰ä¼šé®æŒ¡åæ–¹æ­£æ–¹å½¢ã€‚å¦‚ä¸æ’åºï¼Œåç»­åŒºé—´åˆå¹¶å°†å¤±æ•ˆ  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‡ ä½•é—®é¢˜ä¸­ï¼Œå¤„ç†é¡ºåºå†³å®šé®æŒ¡å…³ç³»

3. **åŒºé—´åˆå¹¶å®ç°**  
   * **åˆ†æ**ï¼šå½“æ–°åŒºé—´[l,r]ä¸å·²æœ‰åŒºé—´ç›¸äº¤æ—¶ï¼Œéœ€è¦æ‰©å±•å¹¶åˆå¹¶ï¼ˆå¦‚å›¾ï¼‰ã€‚ä¼˜è´¨é¢˜è§£ç”¨setè‡ªåŠ¨æ’åºåŒºé—´èµ·ç‚¹ï¼Œé€šè¿‡whileå¾ªç¯åˆå¹¶ç›¸äº¤åŒºé—´ï¼š  
     ```cpp
     while(it != k.end() && ç›¸äº¤){
         l = min(l, it->lk); 
         r = max(r, it->rk);
         k.erase(it++);
     }
     k.insert({l,r});
     ```
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé›†åˆæ“ä½œæ˜¯é«˜æ•ˆåŒºé—´åˆå¹¶çš„å…³é”®

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å‡ ä½•é—®é¢˜ä»£æ•°åŒ–**ï¼šå°†æ­£æ–¹å½¢å¯è§æ€§è½¬åŒ–ä¸ºæ–œç‡åŒºé—´è¦†ç›–é—®é¢˜  
- **æ’åºé¢„å¤„ç†**ï¼šé€šè¿‡x+y+læ’åºä¿è¯å¤„ç†é¡ºåºæ­£ç¡®æ€§  
- **STLé«˜æ•ˆåˆ©ç”¨**ï¼šsetè‡ªåŠ¨æ’åºç‰¹æ€§ç®€åŒ–åŒºé—´åˆå¹¶  
- **è¾¹ç•Œæµ‹è¯•**ï¼šéªŒè¯æ­£æ–¹å½¢ç›¸åˆ‡/åŒ…å«ç­‰è¾¹ç•Œæƒ…å†µ  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
* **è¯´æ˜**ï¼šç»¼åˆé¢˜è§£äº”çš„setæ–¹æ¡ˆä¸é¢˜è§£ä¸€çš„è¾¹ç•Œå¤„ç†ï¼Œå®Œæ•´è§£å†³åŒºé—´åˆå¹¶é—®é¢˜  
```cpp
#include <iostream>
#include <algorithm>
#include <set>
using namespace std;

struct Square { 
    int x, y, l; 
    double mink, maxk; 
};
struct Interval { 
    double l, r; 
    bool operator<(const Interval& b) const { 
        return l < b.l; // æŒ‰å·¦ç«¯ç‚¹æ’åº
    }
};

int main() {
    int n; cin >> n;
    Square sq[1005];
    for(int i=0; i<n; i++) {
        cin >> sq[i].x >> sq[i].y >> sq[i].l;
        sq[i].mink = (double)sq[i].y / (sq[i].x + sq[i].l);
        sq[i].maxk = (double)(sq[i].y + sq[i].l) / sq[i].x;
    }
    // æŒ‰x+y+lå‡åºæ’åºï¼ˆå…³é”®ï¼ï¼‰
    sort(sq, sq+n, [](auto a, auto b){ 
        return a.x+a.y+a.l < b.x+b.y+b.l; 
    });

    set<Interval> covered;
    int visible = 0;
    for(int i=0; i<n; i++) {
        double L = sq[i].mink, R = sq[i].maxk;
        auto it = covered.lower_bound({L, R});
        // åˆå¹¶æ‰€æœ‰ç›¸äº¤åŒºé—´
        while(it != covered.end() && it->l <= R) {
            R = max(R, it->r);
            it = covered.erase(it);
        }
        // æ£€æŸ¥æ˜¯å¦è¢«å®Œå…¨è¦†ç›–
        bool isCovered = false;
        for(auto& inv : covered) {
            if(inv.l <= L && R <= inv.r) {
                isCovered = true; 
                break;
            }
        }
        if(!isCovered) {
            visible++;
            covered.insert({L, R});
        }
    }
    cout << visible;
}
```

**é¢˜è§£äº”ç‰‡æ®µèµæ**  
* **äº®ç‚¹**ï¼šç”¨setè‡ªåŠ¨æ’åºå®ç°é«˜æ•ˆåŒºé—´åˆå¹¶  
* **æ ¸å¿ƒä»£ç **ï¼š
```cpp
set<Interval> k; // å­˜å‚¨è¦†ç›–åŒºé—´
for(int i=1; i<=n; i++){
    if(å½“å‰åŒºé—´è¢«kä¸­æŸåŒºé—´åŒ…å«){
        res--; // ä¸å¯è§
    } else {
        // åˆå¹¶ç›¸äº¤åŒºé—´
        auto it = k.begin();
        while(it != k.end()){
            if(ç›¸äº¤){
                æ‰©å±•å½“å‰åŒºé—´;
                k.erase(it++);
            } else it++;
        }
        k.insert(å½“å‰åŒºé—´);
    }
}
```
* **ä»£ç è§£è¯»**ï¼š  
  > 1ï¸âƒ£ `set<Interval>`åˆ©ç”¨çº¢é»‘æ ‘è‡ªåŠ¨æ’åºåŒºé—´ï¼Œ`lower_bound`å¿«é€Ÿå®šä½  
  > 2ï¸âƒ£ **å…³é”®åˆå¹¶é€»è¾‘**ï¼šå½“æ£€æµ‹åˆ°ç›¸äº¤åŒºé—´(`it->l <= R`)ï¼Œæ‰©å±•å½“å‰åŒºé—´å³è¾¹ç•Œ`R=max(R,it->r)`  
  > 3ï¸âƒ£ **äº®ç‚¹æŠ€å·§**ï¼š`k.erase(it++)`åœ¨åˆ é™¤å½“å‰è¿­ä»£å™¨æ—¶æŒ‡å‘ä¸‹ä¸€å…ƒç´ ï¼Œé¿å…è¿­ä»£å™¨å¤±æ•ˆ  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šSTLé›†åˆæ“ä½œ + è¿­ä»£å™¨å®‰å…¨åˆ é™¤ = é«˜æ•ˆåŒºé—´åˆå¹¶

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
![](https://cdn.luogu.com.cn/upload/pic/46733.png)  
* **ä¸»é¢˜**ï¼š"å…‰çº¿æ‰«æå¤§å†’é™©"ï¼ˆ8-bitåƒç´ é£æ ¼ï¼‰  
* **æ ¸å¿ƒæ¼”ç¤º**ï¼š  
  1. **åˆå§‹åŒ–**ï¼š16è‰²åƒç´ ç½‘æ ¼ç»˜åˆ¶æ­£æ–¹å½¢ï¼ˆæ£•è‰²ï¼‰ï¼ŒåŸç‚¹O(0,0)é—ªçƒ  
  2. **æ‰«æè¿‡ç¨‹**ï¼š  
     - é»„è‰²åƒç´ å…‰æŸä»xè½´ç¼“æ…¢æ—‹è½¬è‡³yè½´ï¼ˆæ¯å¸§+0.01å¼§åº¦ï¼‰  
     - å…‰æŸç¢°æ’æ­£æ–¹å½¢æ—¶è§¦å‘"å®"éŸ³æ•ˆï¼Œæ˜¾ç¤ºå½“å‰æ–œç‡å€¼  
  3. **åŒºé—´è¦†ç›–**ï¼š  
     - å±å¹•é¡¶éƒ¨è¿›åº¦æ¡æ ‡è®°è¦†ç›–åŒºé—´ï¼ˆçº¢è‰²=å·²è¦†ç›–ï¼Œç»¿è‰²=å¯è§ï¼‰  
     - æ–°åŒºé—´åˆå¹¶æ—¶æ’­æ”¾"åƒè±†äºº"éŸ³æ•ˆï¼Œè¿›åº¦æ¡æ‰©å±•  
  4. **å¯è§åˆ¤å®š**ï¼š  
     - å½“æ­£æ–¹å½¢è¢«æ ‡è®°å¯è§æ—¶ï¼Œå˜ä¸ºç»¿è‰²å¹¶æ’­æ”¾"è¶…çº§é©¬é‡Œå¥¥"é‡‘å¸éŸ³  
     - å®Œå…¨è¢«è¦†ç›–çš„æ­£æ–¹å½¢å˜åŠé€æ˜ç°è‰²  
* **äº¤äº’æ§åˆ¶**ï¼š  
  - æ–¹å‘é”®æ§åˆ¶æ‰«æé€Ÿåº¦ï¼ŒAé”®å•æ­¥æ‰§è¡Œ  
  - å®æ—¶æ˜¾ç¤ºå½“å‰æ­£æ–¹å½¢ï¼š`x={x} y={y} l={l} å¯è§:{çŠ¶æ€}`  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
1. **æ´›è°· P1884 [è¦†ç›–é—®é¢˜]**  
   ğŸ—£ï¸ çŸ©å½¢è¦†ç›–å˜ç§ï¼Œç»ƒä¹ åŒºé—´åˆå¹¶çš„é€šç”¨æ€è·¯  
2. **æ´›è°· P2280 [æ¿€å…‰ç‚¸å¼¹]**  
   ğŸ—£ï¸ äºŒç»´å‰ç¼€å’Œ+åæ ‡ç¦»æ•£åŒ–ï¼Œå·©å›ºå‡ ä½•é—®é¢˜è½¬åŒ–æŠ€å·§  
3. **æ´›è°· P1904 [å¤©é™…çº¿é—®é¢˜]**  
   ğŸ—£ï¸ æ‰«æçº¿ç®—æ³•ç»å…¸åº”ç”¨ï¼Œæ‹“å±•å‡ ä½•å¤„ç†èƒ½åŠ›  

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **ç»éªŒ (æ¥è‡ªé¢˜è§£ä¸‰)**ï¼š  
> "ç²¾åº¦è®¾ç½®è°ƒè¯•äº†å¾ˆä¹…ï¼Œæœ€ç»ˆå‘ç°Ï€/180000æ‰èƒ½è¦†ç›–è¾¹ç•Œæƒ…å†µ"  
>  
> **Kayç‚¹è¯„**ï¼š  
> æµ®ç‚¹ç²¾åº¦æ˜¯å‡ ä½•é—®é¢˜çš„å¸¸è§é™·é˜±ï¼å»ºè®®ï¼š  
> 1. ä¼˜å…ˆä½¿ç”¨æ•´æ•°è¿ç®—ï¼ˆå¦‚äº¤å‰ç›¸ä¹˜ä»£æ›¿é™¤æ³•ï¼‰  
> 2. å¿…é¡»ç”¨æµ®ç‚¹æ—¶è®¾ç½®è¯¯å·®å®¹å¿åº¦`const double eps=1e-7`  
> 3. æµ‹è¯•æç«¯æ•°æ®ï¼ˆå¦‚æ­£æ–¹å½¢ç›¸åˆ‡æƒ…å†µï¼‰

---

é€šè¿‡æœ¬æŒ‡å—ï¼Œæˆ‘ä»¬æ·±å…¥è§£æäº†"å¯è§çŸ©å½¢"çš„æ–œç‡åŒºé—´æœ¬è´¨ï¼ŒæŒæ¡äº†setå®ç°åŒºé—´åˆå¹¶çš„æŠ€å·§ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚ç†è§£å…‰çº¿æ‰«æè¿‡ç¨‹ã€‚è®°ä½ï¼šå°†å‡ ä½•é—®é¢˜è½¬åŒ–ä¸ºä»£æ•°æ¨¡å‹æ˜¯è§£é¢˜å…³é”®ï¼ä¸‹æ¬¡è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š139.29ç§’
# é¢˜ç›®ä¿¡æ¯

# æ¶ˆæ¯ä¼ é€’

## é¢˜ç›®æè¿°

å·´èœ€å›½çš„ç¤¾ä¼šç­‰çº§æ£®ä¸¥ï¼Œé™¤äº†å›½ç‹ä¹‹å¤–ï¼Œæ¯ä¸ªäººå‡æœ‰ä¸”åªæœ‰ä¸€ä¸ªç›´æ¥ä¸Šçº§ï¼Œå½“ç„¶å›½ç‹æ²¡æœ‰ä¸Šçº§ã€‚å¦‚æœ $A$ æ˜¯ $B$ çš„ä¸Šçº§ï¼Œ$B$ æ˜¯ $C$ çš„ä¸Šçº§ï¼Œé‚£ä¹ˆ $A$ å°±æ˜¯ $C$ çš„ä¸Šçº§ã€‚ç»å¯¹ä¸ä¼šå‡ºç°è¿™æ ·çš„å…³ç³»ï¼š$A$ æ˜¯ $B$ çš„ä¸Šçº§ï¼Œ$B$ ä¹Ÿæ˜¯ $A$ çš„ä¸Šçº§ã€‚

æœ€å¼€å§‹çš„æ—¶åˆ»æ˜¯ $0$ï¼Œä½ è¦åšçš„å°±æ˜¯ç”¨ $1$ å•ä½çš„æ—¶é—´æŠŠä¸€ä¸ªæ¶ˆæ¯å‘Šè¯‰æŸä¸€ä¸ªäººï¼Œè®©ä»–ä»¬è‡ªè¡Œæ•£å¸ƒæ¶ˆæ¯ã€‚åœ¨ä»»æ„ä¸€ä¸ªæ—¶é—´å•ä½ä¸­ï¼Œä»»ä½•ä¸€ä¸ªå·²ç»æ¥åˆ°æ¶ˆæ¯çš„äººï¼Œéƒ½å¯ä»¥æŠŠæ¶ˆæ¯å‘Šè¯‰ä»–çš„ä¸€ä¸ªç›´æ¥ä¸Šçº§æˆ–è€…ç›´æ¥ä¸‹å±ã€‚

ç°åœ¨ï¼Œä½ æƒ³çŸ¥é“ï¼š

1. åˆ°åº•éœ€è¦å¤šé•¿æ—¶é—´ï¼Œæ¶ˆæ¯æ‰èƒ½ä¼ éæ•´ä¸ªå·´èœ€å›½çš„æ‰€æœ‰äººï¼Ÿ
2. è¦ä½¿æ¶ˆæ¯åœ¨ä¼ é€’è¿‡ç¨‹ä¸­æ¶ˆè€—çš„æ—¶é—´æœ€çŸ­ï¼Œå¯ä¾›é€‰æ‹©çš„äººæœ‰é‚£äº›ï¼Ÿ


## æ ·ä¾‹ #1

### è¾“å…¥

```
8

1

1

3

4

4

4

3```

### è¾“å‡º

```
5

3 4 5 6 7```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šæ¶ˆæ¯ä¼ é€’ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ ‘å½¢åŠ¨æ€è§„åˆ’ï¼ˆæ ‘å½¢DPï¼‰ä¸è´ªå¿ƒç­–ç•¥

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³æ¶ˆæ¯ä¼ é€’é—®é¢˜çš„å…³é”®åœ¨äºç†è§£æ ‘å½¢ç»“æ„ä¸è´ªå¿ƒç­–ç•¥çš„ç»“åˆã€‚æƒ³è±¡ä¸€æ£µå€’ç½®çš„å¤§æ ‘ï¼ˆå›½ç‹åœ¨æ ¹ï¼‰ï¼Œæ¶ˆæ¯ä¼ é€’å°±åƒæ°´æµä»èµ·ç‚¹æ‰©æ•£åˆ°æ‰€æœ‰æå¶ã€‚ç®—æ³•æ ¸å¿ƒåœ¨äºï¼š
> - **è´ªå¿ƒæ’åº**ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¼˜å…ˆå°†æ¶ˆæ¯ä¼ é€’ç»™è€—æ—¶æœ€é•¿çš„å­èŠ‚ç‚¹ï¼ˆç±»ä¼¼â€œå…ˆè§£å†³æœ€éš¾ä»»åŠ¡â€ï¼‰
> - **çŠ¶æ€è½¬ç§»**ï¼šç”¨`f[u]`è¡¨ç¤ºä»¥`u`ä¸ºæ ¹çš„å­æ ‘ä¼ æ’­å®Œæˆçš„æœ€çŸ­æ—¶é—´
> - **çŠ¶æ€æ–¹ç¨‹**ï¼š`f[u] = max(f[u], f[v] + order_v)`ï¼Œå…¶ä¸­`order_v`æ˜¯å­èŠ‚ç‚¹æŒ‰ä¼ æ’­æ—¶é—´é™åºæ’åºåçš„é¡ºåºå·

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š
> é‡‡ç”¨8ä½åƒç´ é£æ ¼ï¼ˆç±»ä¼¼ç»å…¸FCæ¸¸æˆï¼‰å±•ç¤ºæ ‘ç»“æ„ï¼š
> - æ ¹èŠ‚ç‚¹ç”¨é—ªçƒé‡‘è‰²æ ‡è®°
> - æ¶ˆæ¯ä¼ é€’æ—¶å½“å‰èŠ‚ç‚¹äº®çº¢å…‰ï¼Œæ¥æ”¶èŠ‚ç‚¹äº®ç»¿å…‰
> - å­èŠ‚ç‚¹æŒ‰é¢„ä¼°ä¼ æ’­æ—¶é—´æ˜¾ç¤ºä¸åŒè‰²é˜¶ï¼ˆçº¢è‰²=è€—æ—¶æœ€é•¿ï¼Œè“è‰²=æœ€çŸ­ï¼‰
> - æ§åˆ¶é¢æ¿å«â€œå•æ­¥æ‰§è¡Œ/è‡ªåŠ¨æ’­æ”¾â€æŒ‰é’®ï¼Œè°ƒé€Ÿæ»‘å—
> - éŸ³æ•ˆï¼šä¼ é€’æ—¶â€œå®â€å£°ï¼Œå®Œæˆæ—¶8-bitèƒœåˆ©éŸ³ä¹

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼šzzw4257ï¼ˆæ¢æ ¹DPä¼˜åŒ–ï¼‰**
* **ç‚¹è¯„**ï¼š
  æ­¤è§£æ³•é€šè¿‡äºŒæ¬¡æ‰«æä¸æ¢æ ¹æŠ€æœ¯ï¼Œå°†å¤æ‚åº¦ä¼˜åŒ–è‡³O(n log n)ã€‚äº®ç‚¹åœ¨äºï¼š
  - **åˆ›æ–°æ€§**ï¼šç”¨`down[u]`è®°å½•å­æ ‘ä¼ æ’­æ—¶é—´ï¼Œ`up[u]`è®°å½•çˆ¶æ–¹å‘ä¼ æ’­æ—¶é—´
  - **é«˜æ•ˆæ€§**ï¼šé¿å…é‡å¤è®¡ç®—å­æ ‘ä¿¡æ¯ï¼ˆå¦‚å›¾1çš„ç°è‰²å­æ ‘åœ¨ä¸åŒæ ¹ä¸‹å½¢æ€ä¸å˜ï¼‰
  - **å·¥ç¨‹ä»·å€¼**ï¼šä»£ç ä¸­å‰ç¼€/åç¼€æœ€å¤§å€¼å¤„ç†ä¼˜é›…ï¼Œé€‚åˆç«èµ›åº”ç”¨
  > *ä½œè€…å¿ƒå¾—ï¼šâ€œä¼˜åŒ–æ˜¯æ— æ­¢å¢ƒçš„â€ä½“ç°äº†ç²¾ç›Šæ±‚ç²¾çš„ç®—æ³•ç²¾ç¥*

**é¢˜è§£äºŒï¼šç´ è´¨ç©å®¶å­™1è¶…ï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰**
* **ç‚¹è¯„**ï¼š
  è§£æ³•é‡‡ç”¨è®°å¿†åŒ–æœç´¢å®ç°é«˜æ•ˆæšä¸¾ï¼š
  - **ç®€æ´æ€§**ï¼šçŠ¶æ€å®šä¹‰ä¸º`dp[u][fa]`ï¼ˆå½“å‰èŠ‚ç‚¹+çˆ¶èŠ‚ç‚¹ï¼‰
  - **å¯å‘æ€§**ï¼šç”¨`map`ç¼“å­˜å­æ ‘è®¡ç®—ç»“æœï¼Œç›¸åŒå­æ ‘ç›´æ¥å¤ç”¨
  - **å¯è¯»æ€§**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œå˜é‡å‘½åè§„èŒƒï¼ˆå¦‚`son`æ•°ç»„å­˜å‚¨å­èŠ‚ç‚¹æ—¶é—´ï¼‰
  > *è°ƒè¯•æç¤ºï¼šæ³¨æ„å¶èŠ‚ç‚¹è¾¹ç•Œæ¡ä»¶`f[leaf]=0`*

**é¢˜è§£ä¸‰ï¼šww3113306ï¼ˆåŸºç¡€æ ‘å½¢DPï¼‰**
* **ç‚¹è¯„**ï¼š
  æœ€ç›´è§‚çš„æš´åŠ›æšä¸¾è§£æ³•ï¼Œé€‚åˆåˆå­¦è€…ï¼š
  - **æ•™å­¦ä»·å€¼**ï¼šå®Œæ•´å±•ç¤ºæ ‘å½¢DPæ¡†æ¶ï¼ˆDFSå›æº¯+è´ªå¿ƒæ’åºï¼‰
  - **é²æ£’æ€§**ï¼šä¸¥æ ¼å¤„ç†çˆ¶å­èŠ‚ç‚¹åŒå‘è¾¹ï¼ˆ`add(u,v); add(v,u)`)
  - **å®è·µå‚è€ƒ**ï¼šå®Œæ•´åŒ…å«è¾“å…¥/DFS/è¾“å‡ºæ¨¡å—ï¼Œä¾¿äºè°ƒè¯•
  > *æ³¨æ„ç‚¹ï¼šæ¯æ¬¡æšä¸¾æ ¹èŠ‚ç‚¹æ—¶éœ€é‡ç½®`dp`æ•°ç»„*

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **éš¾ç‚¹ï¼šè´ªå¿ƒç­–ç•¥çš„æ­£ç¡®æ€§è¯æ˜**
   * **åˆ†æ**ï¼šä¸ºä»€ä¹ˆä¼˜å…ˆä¼ é€’è€—æ—¶æœ€é•¿çš„å­èŠ‚ç‚¹ï¼Ÿå‡è®¾æœ‰ä¸¤ä¸ªå­ä»»åŠ¡A(éœ€5åˆ†é’Ÿ)ã€B(éœ€3åˆ†é’Ÿ)ã€‚è‹¥å…ˆåšAï¼šæ€»è€—æ—¶=max(5+0, 3+1)=5ï¼›è‹¥å…ˆåšBï¼šæ€»è€—æ—¶=max(3+0, 5+1)=6ã€‚å¯è§è´ªå¿ƒæ’åºä¿éšœäº†å…¨å±€æœ€ä¼˜
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šâ€œè´ªå¿ƒæ˜¯æ ‘å½¢DPçš„çµé­‚æ’åºâ€

2. **éš¾ç‚¹ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„æ¨å¯¼**
   * **åˆ†æ**ï¼š`f[u] = max(f[v] + order_v)`ä¸­ï¼Œ`order_v`æœ¬è´¨æ˜¯å­èŠ‚ç‚¹çš„å¯åŠ¨é¡ºåºå·ã€‚è‹¥å­èŠ‚ç‚¹æŒ‰`f[v]`é™åºæ’åºåç´¢å¼•ä¸º`i`ï¼Œåˆ™`order_v = i+1`ï¼ˆå› éœ€ç­‰å¾…å‰`i`ä¸ªèŠ‚ç‚¹å¯åŠ¨ï¼‰
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è½¬ç§»=å­é—®é¢˜è§£+å¯åŠ¨å»¶è¿Ÿ

3. **éš¾ç‚¹ï¼šæ¢æ ¹DPçš„ä¿¡æ¯å¤ç”¨**
   * **åˆ†æ**ï¼šå½“æ ¹ä»uæ¢åˆ°væ—¶ï¼Œä»…u-vè·¯å¾„ä¸Šçš„èŠ‚ç‚¹çŠ¶æ€æ”¹å˜ï¼Œå…¶ä»–å­æ ‘ä¿¡æ¯ä¸å˜ã€‚é€šè¿‡`down[]`å’Œ`up[]`æ•°ç»„åˆ†ç¦»å­æ ‘/çˆ¶å‘ä¿¡æ¯å®ç°å¤ç”¨
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šâ€œæ¢æ ¹å¦‚ç§»æ ½ï¼Œæ ¹ç³»æœªå˜åˆ™è¥å…»çŠ¹å­˜â€

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
1. **è´ªå¿ƒæ’åºåŠ é€Ÿ**ï¼šç”¨`priority_queue`æˆ–`sort(..., greater<int>())`å¤„ç†å­èŠ‚ç‚¹
2. **è®°å¿†åŒ–å‡æ**ï¼šå¯¹`(u, fa)`äºŒå…ƒç»„ç¼“å­˜ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
3. **è¾¹ç•Œå¤„ç†**ï¼šå¶èŠ‚ç‚¹è®¾ç½®`f[leaf]=0`ï¼ˆæ— å­èŠ‚ç‚¹ï¼‰æˆ–`1`ï¼ˆå«è‡ªèº«ï¼‰
4. **åŒå‘è¾¹å¤„ç†**ï¼šDFSæ—¶ç”¨`parent`å‚æ•°é¿å…å›ç¯

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**ï¼š
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <cstring>
using namespace std;
const int N = 2005;
vector<int> G[N];
int down[N], up[N], ans[N];

void dfs_down(int u, int fa) {
    vector<int> sons;
    for (int v : G[u]) {
        if (v == fa) continue;
        dfs_down(v, u);
        sons.push_back(down[v]);
    }
    sort(sons.begin(), sons.end(), greater<int>());
    for (int i = 0; i < sons.size(); i++)
        down[u] = max(down[u], sons[i] + i + 1);
}

void dfs_up(int u, int fa) {
    vector<int> all = {up[u]}; // çˆ¶æ–¹å‘ä¿¡æ¯
    for (int v : G[u]) 
        if (v != fa) all.push_back(down[v]);
    
    sort(all.begin(), all.end(), greater<int>());
    // é¢„å¤„ç†å‰ç¼€/åç¼€æœ€å¤§å€¼
    vector<int> pre(all.size()), suf(all.size());
    for (int i = 0; i < all.size(); i++) 
        pre[i] = max((i ? pre[i-1] : 0), all[i] + i);
    for (int i = all.size()-1; i >= 0; i--)
        suf[i] = max((i < all.size()-1 ? suf[i+1] : 0), all[i] + i);
    
    // æ›´æ–°å­èŠ‚ç‚¹upå€¼
    for (int v : G[u]) {
        if (v == fa) continue;
        int pos = find(all.begin(), all.end(), down[v]) - all.begin();
        up[v] = max(pos ? pre[pos-1] : 0, (pos < all.size()-1) ? suf[pos+1] - 1 : 0);
    }
    // è®¡ç®—å½“å‰æ ¹ç­”æ¡ˆ
    ans[u] = pre.back();
}
```

**é¢˜è§£ä¸€ï¼šzzw4257ï¼ˆæ¢æ ¹DPï¼‰**
```cpp
// æ ¸å¿ƒï¼šäºŒæ¬¡æ‰«æçš„æ¢æ ¹å¤„ç†
void change_root(int u, int fa) {
    vector<int> all;
    for (int v : G[u]) 
        if (v != fa) all.push_back(down[v]);
    if (fa) all.push_back(up[u]); // åŠ å…¥çˆ¶æ–¹å‘ä¿¡æ¯

    sort(all.begin(), all.end(), greater<int>());
    // ... å‰ç¼€/åç¼€æœ€å¤§å€¼è®¡ç®—ï¼ˆç•¥ï¼‰
    for (int v : G[u]) {
        if (v == fa) continue;
        // è®¡ç®—vçš„upå€¼å¹¶é€’å½’
        up[v] = /* åŸºäºallæ•°ç»„è®¡ç®— */;
        change_root(v, u);
    }
}
```
* **äº®ç‚¹**ï¼šä¼˜é›…å¤„ç†æ¢æ ¹æ—¶çš„ä¿¡æ¯æ›´æ–°
* **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€/åç¼€æœ€å¤§å€¼é¿å…é‡å¤æ’åº

**é¢˜è§£äºŒï¼šç´ è´¨ç©å®¶å­™1è¶…ï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰**
```cpp
unordered_map<int, map<int, int>> dp; // dp[u][fa]ç¼“å­˜

int dfs(int u, int fa) {
    if (dp[u].count(fa)) return dp[u][fa];
    vector<int> sons;
    for (int v : G[u]) {
        if (v == fa) continue;
        sons.push_back(dfs(v, u));
    }
    sort(sons.begin(), sons.end(), greater<int>());
    int res = 0;
    for (int i = 0; i < sons.size(); i++)
        res = max(res, sons[i] + i + 1);
    return dp[u][fa] = res;
}
```
* **äº®ç‚¹**ï¼š`map`å®ç°çŠ¶æ€ç¼“å­˜ï¼Œä»£ç ç®€æ´
* **å­¦ä¹ ç¬”è®°**ï¼šè®°å¿†åŒ–æœç´¢=æš´åŠ›æšä¸¾+æ™ºèƒ½ç¼“å­˜

**é¢˜è§£ä¸‰ï¼šww3113306ï¼ˆåŸºç¡€æ ‘å½¢DPï¼‰**
```cpp
int get_time(int root) {
    vector<int> stk = {root};
    vector<int> f(n+1, 0);
    // ååºéå†è®¡ç®—f[u]
    while (!stk.empty()) {
        int u = stk.back();
        if (/* æ‰€æœ‰å­èŠ‚ç‚¹å·²è®¡ç®— */) {
            vector<int> sons;
            for (int v : G[u]) 
                if (v != parent[u]) 
                    sons.push_back(f[v]);
            sort(sons.begin(), sons.end(), greater<int>());
            for (int i=0; i<sons.size(); i++)
                f[u] = max(f[u], sons[i] + i + 1);
            stk.pop_back();
        } else {
            for (int v : G[u])
                if (v != parent[u]) 
                    stk.push_back(v);
        }
    }
    return f[root];
}
```
* **äº®ç‚¹**ï¼šæ˜¾å¼æ ˆå®ç°éé€’å½’DFSï¼Œé¿å…çˆ†æ ˆ
* **å­¦ä¹ ç¬”è®°**ï¼šéé€’å½’DFS=æ‰‹åŠ¨ç»´æŠ¤è°ƒç”¨æ ˆ

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

<center>
  ![æ¶ˆæ¯ä¼ é€’çš„åƒç´ åŠ¨ç”»ç¤ºæ„å›¾](https://i.loli.net/2019/08/22/uhWxZiXpgz7VFeD.png)
</center>

* **ä¸»é¢˜**ï¼š8-bité£æ ¼â€œæ¶ˆæ¯æ¢é™©å®¶â€
* **æ ¸å¿ƒæµç¨‹**ï¼š
  1. **åˆå§‹åŒ–**ï¼šæ ‘ç»“æ„ç”¨æ£•è‰²åƒç´ å—æ˜¾ç¤ºï¼Œæ ¹èŠ‚ç‚¹é—ªçƒé‡‘å…‰
  2. **ä¼ æ’­åŠ¨ç”»**ï¼š
     - å½“å‰èŠ‚ç‚¹å˜çº¢ï¼Œå­èŠ‚ç‚¹æŒ‰é¢„ä¼°æ—¶é—´æ˜¾ç¤ºè‰²é˜¶ï¼ˆçº¢â†’æ©™â†’é»„â†’ç»¿ï¼‰
     - é€‰æ‹©å­èŠ‚ç‚¹æ—¶æ’­æ”¾â€œå®â€å£°ï¼Œä¼ é€’è·¯å¾„æ˜¾ç¤ºè“è‰²å…‰è½¨
     - è‡ªåŠ¨æ’­æ”¾æ¨¡å¼ï¼šAIæŒ‰è´ªå¿ƒç­–ç•¥é€‰æ‹©å­èŠ‚ç‚¹ï¼ˆç±»ä¼¼åƒè±†äººAIï¼‰
  3. **çŠ¶æ€æ›´æ–°**ï¼š
     - èŠ‚ç‚¹å®Œæˆä¼ æ’­åå˜é‡‘è‰²
     - å­æ ‘ä¼ æ’­æ—¶é—´å®æ—¶æ˜¾ç¤ºåœ¨èŠ‚ç‚¹ä¸Šæ–¹
  4. **æ¢æ ¹æ¼”ç¤º**ï¼š
     - ç‚¹å‡»æ–°æ ¹èŠ‚ç‚¹æ—¶ï¼Œå¤ç”¨å­æ ‘ä¿¡æ¯ï¼ˆå­æ ‘åƒç´ å—ä¿æŒåŸè‰²ï¼‰
     - çˆ¶æ–¹å‘è·¯å¾„æ˜¾ç¤ºç´«è‰²å…‰è½¨
* **æ§åˆ¶é¢æ¿**ï¼š
  - é€Ÿåº¦æ»‘å—ï¼šè°ƒæ•´å•æ­¥æ‰§è¡Œé€Ÿåº¦
  - æ¨¡å¼åˆ‡æ¢ï¼šæ™®é€šæšä¸¾/æ¢æ ¹ä¼˜åŒ–
  - é‡ç½®æŒ‰é’®ï¼šéšæœºç”Ÿæˆæ–°æ ‘ç»“æ„
* **éŸ³æ•ˆè®¾è®¡**ï¼š
  - å…³é”®æ“ä½œï¼š16-bitç”µå­éŸ³æ•ˆ
  - ä¼ æ’­å®Œæˆï¼šFCæ¸¸æˆèƒœåˆ©æ—‹å¾‹
  - é”™è¯¯æ“ä½œï¼šçŸ­ä¿ƒâ€œå“”â€å£°

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜

1. **æ´›è°·P1352 æ²¡æœ‰ä¸Šå¸çš„èˆä¼š**  
   ğŸ—£ï¸ åŒæ ·æ ‘å½¢DPç»“æ„ï¼Œç»ƒä¹ çŠ¶æ€è®¾è®¡ï¼ˆé€‰/ä¸é€‰å½“å‰èŠ‚ç‚¹ï¼‰
   
2. **æ´›è°·P2015 äºŒå‰è‹¹æœæ ‘**  
   ğŸ—£ï¸ æ ‘å½¢DP+èƒŒåŒ…æ€æƒ³ï¼Œç†è§£â€œä¿ç•™ææ¡=ä¿ç•™å­æ ‘â€çš„æ˜ å°„

3. **æ´›è°·P1040 åŠ åˆ†äºŒå‰æ ‘**  
   ğŸ—£ï¸ åŒºé—´DPä¸æ ‘ç»“æ„çš„ç»“åˆï¼Œç†è§£ä¸­åºéå†æ€§è´¨

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªzzw4257çš„è°ƒè¯•ç»éªŒ**ï¼š  
> â€œäºŒæ¬¡æ‰«ææ—¶åœ¨`change_root`å‡½æ•°å¡äº†å¾ˆä¹…ï¼Œåæ¥å‘ç°`up[v]`è®¡ç®—æœªè€ƒè™‘å…„å¼ŸèŠ‚ç‚¹é¡ºåºå˜åŒ–çš„å½±å“ï¼Œé€šè¿‡å‰ç¼€/åç¼€æœ€å¤§å€¼æ•°ç»„è§£å†³ã€‚â€  
>   
> **Kayçš„æ€»ç»“**ï¼š  
> æ ‘å½¢DPçš„è°ƒè¯•æ ¸å¿ƒï¼š
> 1. å¶èŠ‚ç‚¹è®¾ç½®åˆå§‹å€¼ï¼ˆå¦‚`f[leaf]=0`ï¼‰
> 2. çˆ¶å­èŠ‚ç‚¹å¾ªç¯æ£€æµ‹ï¼ˆ`v != parent`é˜²å›ç¯ï¼‰
> 3. å¤šç»„æ•°æ®æ¸…ç©ºçŠ¶æ€ï¼ˆå°¤å…¶æ¢æ ¹DPçš„`up/down`æ•°ç»„ï¼‰
> 4. å¯¹æ‹éªŒè¯ï¼šå°è§„æ¨¡æ•°æ®æš´åŠ›æšä¸¾éªŒè¯

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†æ ‘å½¢DPä¸è´ªå¿ƒç­–ç•¥åœ¨æ¶ˆæ¯ä¼ é€’é—®é¢˜ä¸­çš„ç²¾å¦™åº”ç”¨ã€‚è®°ä½ï¼šå¥½çš„ç®—æ³•=æ­£ç¡®çš„çŠ¶æ€å®šä¹‰+åˆç†çš„è½¬ç§»ç­–ç•¥+é«˜æ•ˆçš„ä¿¡æ¯å¤ç”¨ã€‚ç»§ç»­æŒ‘æˆ˜æ›´å¤æ‚çš„æ ‘å½¢é—®é¢˜å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š158.96ç§’
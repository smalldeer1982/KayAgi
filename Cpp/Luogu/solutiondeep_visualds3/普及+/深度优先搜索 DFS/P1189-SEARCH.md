# é¢˜ç›®ä¿¡æ¯

# SEARCH

## é¢˜ç›®æè¿°

å¹´è½»çš„æ‹‰å°”å¤«å¼€ç©ç¬‘åœ°ä»ä¸€ä¸ªå°é•‡ä¸Šå·èµ°äº†ä¸€è¾†è½¦ï¼Œä½†ä»–æ²¡æƒ³åˆ°çš„æ˜¯é‚£è¾†è½¦å±äºè­¦å¯Ÿå±€ï¼Œå¹¶ä¸”è½¦ä¸Šè£…æœ‰ç”¨äºå‘å°„è½¦å­ç§»åŠ¨è·¯çº¿çš„è£…ç½®ã€‚

é‚£ä¸ªè£…ç½®å¤ªæ—§äº†ï¼Œä»¥è‡³äºåªèƒ½å‘å°„å…³äºé‚£è¾†è½¦çš„ç§»åŠ¨è·¯çº¿çš„æ–¹å‘ä¿¡æ¯ã€‚

ç¼–å†™ç¨‹åºï¼Œé€šè¿‡ä½¿ç”¨ä¸€å¼ å°é•‡çš„åœ°å›¾å¸®åŠ©è­¦å¯Ÿå±€æ‰¾åˆ°é‚£è¾†è½¦ã€‚ç¨‹åºå¿…é¡»èƒ½è¡¨ç¤ºå‡ºè¯¥è½¦æœ€ç»ˆæ‰€æœ‰å¯èƒ½çš„ä½ç½®ã€‚

å°é•‡çš„åœ°å›¾æ˜¯çŸ©å½¢çš„ï¼Œä¸Šé¢çš„ç¬¦å·ç”¨æ¥æ ‡æ˜å“ªå„¿å¯ä»¥è¡Œè½¦å“ªå„¿ä¸è¡Œã€‚$\verb!.!$ è¡¨ç¤ºå°é•‡ä¸Šé‚£å—åœ°æ–¹æ˜¯å¯ä»¥è¡Œè½¦çš„ï¼Œè€Œç¬¦å· $\verb!X!$ è¡¨ç¤ºæ­¤å¤„ä¸èƒ½è¡Œè½¦ã€‚æ‹‰å°”å¤«æ‰€å¼€å°è½¦çš„åˆå§‹ä½ç½®ç”¨å­—ç¬¦çš„ $\verb!*!$ è¡¨ç¤ºï¼Œä¸”æ±½è½¦èƒ½ä»åˆå§‹ä½ç½®é€šè¿‡ã€‚

æ±½è½¦èƒ½å‘å››ä¸ªæ–¹å‘ç§»åŠ¨ï¼šå‘åŒ—ï¼ˆå‘ä¸Šï¼‰ï¼Œå‘å—ï¼ˆå‘ä¸‹ï¼‰ï¼Œå‘è¥¿ï¼ˆå‘å·¦ï¼‰ï¼Œå‘ä¸œï¼ˆå‘å³ï¼‰ã€‚

æ‹‰å°”å¤«æ‰€å¼€å°è½¦çš„è¡ŒåŠ¨è·¯çº¿æ˜¯é€šè¿‡ä¸€ç»„ç»™å®šçš„æ–¹å‘æ¥æè¿°çš„ã€‚åœ¨æ¯ä¸ªç»™å®šçš„æ–¹å‘ï¼Œæ‹‰å°”å¤«é©¾é©¶å°è½¦é€šè¿‡å°é•‡ä¸Šä¸€ä¸ªæˆ–æ›´å¤šçš„å¯è¡Œè½¦åœ°ç‚¹ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
4 5
.....
.X...
...*X
X.X..
3
NORTH
WEST
SOUTH```

### è¾“å‡º

```
.....
*X*..
*.*.X
X.X..
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šSEARCH æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢ï¼ˆBFS/DFSï¼‰ä¸æ¨¡æ‹Ÿ


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
é¢˜ç›®æ˜¯è¯´ï¼Œæ±½è½¦ä»åœ°å›¾ä¸Šçš„åˆå§‹ä½ç½®ï¼ˆ`*`ï¼‰å‡ºå‘ï¼ŒæŒ‰ç…§ç»™å®šçš„æ–¹å‘åºåˆ—ï¼ˆå¦‚`NORTH`ã€`WEST`ç­‰ï¼‰ç§»åŠ¨ã€‚**æ¯ä¸ªæ–¹å‘å¿…é¡»ç§»åŠ¨è‡³å°‘ä¸€æ­¥**ï¼Œç›´åˆ°ç¢°åˆ°éšœç¢ï¼ˆ`X`ï¼‰æˆ–åœ°å›¾è¾¹ç•Œã€‚æˆ‘ä»¬éœ€è¦æ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„æœ€ç»ˆä½ç½®ï¼Œå¹¶åœ¨åœ°å›¾ä¸Šæ ‡è®°ï¼ˆ`*`ï¼‰ã€‚  

è§£å†³è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯**éå†æ‰€æœ‰å¯èƒ½çš„ç§»åŠ¨è·¯å¾„**ï¼Œå°±åƒâ€œæ¢é™©å®¶åœ¨è¿·å®«é‡Œæ‰¾å‡ºå£â€â€”â€”æ¯ä¸€æ­¥å¿…é¡»æ²¿ç€æŒ‡å®šæ–¹å‘èµ°ï¼Œç›´åˆ°æ’å¢™ï¼Œç„¶åè®°å½•æ‰€æœ‰å¯èƒ½çš„ç»ˆç‚¹ã€‚  

### æ ¸å¿ƒç®—æ³•ä¸å¯è§†åŒ–æ€è·¯
- **ç®—æ³•é€‰æ‹©**ï¼šå¤§éƒ¨åˆ†é¢˜è§£é‡‡ç”¨**DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰**æˆ–**BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰**ï¼Œç»“åˆ**è®°å¿†åŒ–**æˆ–**é˜Ÿåˆ—ç¼“å­˜**é¿å…é‡å¤æœç´¢ã€‚  
- **å¯è§†åŒ–è®¾è®¡**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºåœ°å›¾ï¼ˆç™½è‰²å¯èµ°ã€é»‘è‰²éšœç¢ã€çº¢è‰²åˆå§‹ä½ç½®ï¼‰ï¼Œé˜Ÿåˆ—ä¸­çš„ä½ç½®ç”¨è“è‰²æ ‡è®°ï¼Œæ‰©å±•åçš„æ–°ä½ç½®ç”¨ç»¿è‰²æ ‡è®°ã€‚æ¯å¤„ç†ä¸€ä¸ªæ–¹å‘ï¼Œè“è‰²ä½ç½®æ²¿ç€æ–¹å‘ç§»åŠ¨ï¼Œç›´åˆ°æ’å¢™ï¼Œç»¿è‰²ä½ç½®å˜æˆè“è‰²ï¼ˆè¿›å…¥ä¸‹ä¸€è½®é˜Ÿåˆ—ï¼‰ã€‚é…åˆâ€œå“”â€ï¼ˆç§»åŠ¨ï¼‰ã€â€œå’šâ€ï¼ˆæ’å¢™ï¼‰éŸ³æ•ˆï¼Œå¢å¼ºç›´è§‚æ€§ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šstone_juiceçŸ³æ±ï¼Œèµ230ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£ç”¨**BFS+DFS**çš„ç»„åˆæ€è·¯ï¼Œéå¸¸å·§å¦™ã€‚ä½œè€…ç”¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼ˆ`q`å­˜å‚¨å½“å‰ä½ç½®ï¼Œ`t`ç¼“å­˜æ–°ä½ç½®ï¼‰ï¼Œæ¯æ¬¡å¤„ç†ä¸€ä¸ªæ–¹å‘æ—¶ï¼Œç”¨DFSä»`q`ä¸­çš„æ¯ä¸ªä½ç½®å‡ºå‘ï¼Œæ‰©å±•æ‰€æœ‰å¯èƒ½çš„æ–°ä½ç½®åˆ°`t`ã€‚å¤„ç†å®Œ`q`åï¼Œå°†`t`ä¸­çš„ä½ç½®è½¬ç§»åˆ°`q`ï¼Œè¿›å…¥ä¸‹ä¸€è½®ã€‚  
  äº®ç‚¹ï¼š**é˜Ÿåˆ—ç¼“å­˜æœºåˆ¶**é¿å…äº†è¾¹å¤„ç†è¾¹æ·»åŠ çš„æ··ä¹±ï¼Œ**visæ•°ç»„å‰ªæ**ï¼ˆæ ‡è®°å·²å¤„ç†çš„ä½ç½®ï¼‰å¤§å¹…å‡å°‘äº†é‡å¤è®¡ç®—ã€‚ä»£ç æ³¨é‡Šè¯¦ç»†ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé€‚åˆç†è§£â€œå¦‚ä½•é«˜æ•ˆéå†æ‰€æœ‰å¯èƒ½è·¯å¾„â€ã€‚


### é¢˜è§£äºŒï¼ˆæ¥æºï¼šdingcxï¼Œèµ107ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£ç”¨**è®°å¿†åŒ–DFS**ï¼Œå®šä¹‰`vis[dep][x][y]`è®°å½•â€œæ‰§è¡Œå®Œç¬¬`dep`ä¸ªæ–¹å‘åæ˜¯å¦åˆ°è¿‡`(x,y)`â€ã€‚å½“å†æ¬¡é‡åˆ°ç›¸åŒçŠ¶æ€æ—¶ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…é‡å¤æœç´¢ã€‚  
  äº®ç‚¹ï¼š**è®°å¿†åŒ–ä¼˜åŒ–**å°†æ—¶é—´å¤æ‚åº¦ä»æŒ‡æ•°çº§é™åˆ°`O(N*R*C)`ï¼ˆ`N`ä¸ºæ–¹å‘æ•°ï¼Œ`R`ã€`C`ä¸ºåœ°å›¾å°ºå¯¸ï¼‰ï¼Œéå¸¸é«˜æ•ˆã€‚ä»£ç ç®€æ´ï¼Œæ–¹å‘æ•°ç»„çš„å¯¹åº”å…³ç³»ï¼ˆå¦‚`SOUTH`å¯¹åº”`0`ï¼‰å¤„ç†å¾—å¾ˆå·§å¦™ï¼Œé€‚åˆå­¦ä¹ â€œå¦‚ä½•ç”¨è®°å¿†åŒ–å‡å°‘é‡å¤â€ã€‚


### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šä¸¿ç‹è€…ä¹‹è·¯ï¼Œèµ30ï¼‰
* **ç‚¹è¯„**ï¼š  
  è¿™é“é¢˜è§£ç”¨**æ¨¡æ‹Ÿ**çš„æ€è·¯ï¼Œç”¨`ans`æ•°ç»„è®°å½•â€œå½“å‰æ­¥éª¤å¯èƒ½çš„ä½ç½®â€ã€‚æ¯æ¬¡å¤„ç†ä¸€ä¸ªæ–¹å‘æ—¶ï¼Œä»`ans`ä¸­çš„ä½ç½®å‡ºå‘ï¼Œæ‰©å±•æ‰€æœ‰å¯èƒ½çš„æ–°ä½ç½®ï¼Œæ›´æ–°`ans`æ•°ç»„ã€‚  
  äº®ç‚¹ï¼š**æ€è·¯ç®€å•ç›´è§‚**ï¼Œé€‚åˆå…¥é—¨å­¦ä¹ è€…ã€‚ä½œè€…ç”¨`vis`æ•°ç»„æ ‡è®°å½“å‰æ­¥éª¤çš„æ–°ä½ç½®ï¼Œé¿å…é‡å¤æ›´æ–°ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œå®¹æ˜“ç†è§£â€œå¦‚ä½•ä¸€æ­¥æ­¥æ¨¡æ‹Ÿç§»åŠ¨è¿‡ç¨‹â€ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šé¿å…é‡å¤æœç´¢**  
**åˆ†æ**ï¼šå¦‚æœä¸é¿å…é‡å¤ï¼ŒåŒä¸€ä¸ªä½ç½®å¯èƒ½è¢«å¤šæ¬¡å¤„ç†ï¼Œå¯¼è‡´æ—¶é—´å¤æ‚åº¦çˆ†ç‚¸ï¼ˆæ¯”å¦‚åœ°å›¾å¤§ã€æ–¹å‘å¤šçš„æƒ…å†µï¼‰ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼š  
  - ç”¨**è®°å¿†åŒ–æ•°ç»„**ï¼ˆå¦‚`vis[dep][x][y]`ï¼‰è®°å½•çŠ¶æ€ï¼ˆå¤„ç†åˆ°ç¬¬å‡ ä¸ªæ–¹å‘ã€å½“å‰ä½ç½®ï¼‰ï¼Œé¿å…é‡å¤è¿›å…¥ç›¸åŒçŠ¶æ€ï¼ˆé¢˜è§£äºŒï¼‰ã€‚  
  - ç”¨**visæ•°ç»„**æ ‡è®°å½“å‰æ­¥éª¤å·²å¤„ç†çš„ä½ç½®ï¼Œé¿å…åŒä¸€æ–¹å‘å†…é‡å¤æ‰©å±•ï¼ˆé¢˜è§£ä¸€ï¼‰ã€‚  

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡å¤æœç´¢æ˜¯æœç´¢é¢˜çš„â€œå¤§å¿Œâ€ï¼Œè®°å¿†åŒ–æˆ–å‰ªææ˜¯è§£å†³çš„å…³é”®ã€‚


### 2. **éš¾ç‚¹2ï¼šå¤„ç†â€œå¿…é¡»ç§»åŠ¨è‡³å°‘ä¸€æ­¥â€**  
**åˆ†æ**ï¼šé¢˜ç›®è¦æ±‚æ¯ä¸ªæ–¹å‘å¿…é¡»ç§»åŠ¨è‡³å°‘ä¸€æ­¥ï¼Œä¸èƒ½åœåœ¨åŸåœ°ã€‚å¦‚æœç›´æ¥åˆ¤æ–­â€œä¸‹ä¸€æ­¥æ˜¯å¦å¯è¡Œâ€ï¼Œå¯èƒ½æ¼æ‰â€œç§»åŠ¨å¤šæ­¥â€çš„æƒ…å†µã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼š  
  ç”¨**å¾ªç¯æ‰©å±•**ï¼šä»å½“å‰ä½ç½®å‡ºå‘ï¼Œæ²¿ç€æ–¹å‘ä¸€ç›´ç§»åŠ¨ï¼Œç›´åˆ°æ’å¢™æˆ–è¾¹ç•Œã€‚å¾ªç¯å†…çš„æ¯ä¸€æ­¥éƒ½ç®—æœ‰æ•ˆç§»åŠ¨ï¼ˆé¢˜è§£ä¸€ã€äºŒã€ä¸‰ï¼‰ã€‚ä¾‹å¦‚ï¼š  
  ```cpp
  while (x + dx[dir] >= 1 && x + dx[dir] <= n && y + dy[dir] >= 1 && y + dy[dir] <= m && map[x+dx[dir]][y+dy[dir]] != 'X') {
      x += dx[dir];
      y += dy[dir];
      // è®°å½•æ–°ä½ç½®
  }
  ```

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¾ªç¯æ‰©å±•æ˜¯å¤„ç†â€œå¿…é¡»ç§»åŠ¨è‡³å°‘ä¸€æ­¥â€çš„æœ‰æ•ˆæ–¹æ³•ï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•å¯èƒ½çš„è·¯å¾„ã€‚


### 3. **éš¾ç‚¹3ï¼šé«˜æ•ˆè®°å½•å¯èƒ½çš„ä½ç½®**  
**åˆ†æ**ï¼šå¦‚æœæ¯æ¬¡å¤„ç†æ–¹å‘æ—¶éƒ½é‡æ–°éå†æ•´ä¸ªåœ°å›¾ï¼Œä¼šæµªè´¹å¤§é‡æ—¶é—´ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼š  
  - ç”¨**é˜Ÿåˆ—**ï¼ˆBFSï¼‰å­˜å‚¨å½“å‰å¯èƒ½çš„ä½ç½®ï¼Œæ¯æ¬¡å¤„ç†æ–¹å‘æ—¶åªéå†é˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼ˆé¢˜è§£ä¸€ï¼‰ã€‚  
  - ç”¨**æ•°ç»„**ï¼ˆå¦‚`ans`ï¼‰è®°å½•å½“å‰å¯èƒ½çš„ä½ç½®ï¼Œæ¯æ¬¡å¤„ç†æ–¹å‘æ—¶åªéå†`ans`ä¸­çš„ä½ç½®ï¼ˆé¢˜è§£ä¸‰ï¼‰ã€‚  

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåªå¤„ç†â€œå½“å‰å¯èƒ½çš„ä½ç½®â€ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåœ°å›¾ï¼Œèƒ½å¤§å¹…æé«˜æ•ˆç‡ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šé˜Ÿåˆ—ç¼“å­˜**ï¼šç”¨ä¸¤ä¸ªé˜Ÿåˆ—åˆ†åˆ«å­˜å‚¨å½“å‰ä½ç½®å’Œæ–°ä½ç½®ï¼Œé¿å…è¾¹å¤„ç†è¾¹æ·»åŠ çš„æ··ä¹±ï¼ˆé¢˜è§£ä¸€ï¼‰ã€‚  
- **æŠ€å·§Bï¼šè®°å¿†åŒ–**ï¼šç”¨æ•°ç»„è®°å½•çŠ¶æ€ï¼Œé¿å…é‡å¤æœç´¢ï¼ˆé¢˜è§£äºŒï¼‰ã€‚  
- **æŠ€å·§Cï¼šå¾ªç¯æ‰©å±•**ï¼šå¤„ç†æ–¹å‘æ—¶ï¼Œç”¨å¾ªç¯ä¸€ç›´ç§»åŠ¨åˆ°æ’å¢™ï¼Œç¡®ä¿è‡³å°‘ç§»åŠ¨ä¸€æ­¥ï¼ˆæ‰€æœ‰é¢˜è§£ï¼‰ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆç»¼åˆä¼˜è´¨é¢˜è§£ï¼‰
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†é¢˜è§£ä¸€çš„é˜Ÿåˆ—ç¼“å­˜å’Œé¢˜è§£äºŒçš„è®°å¿†åŒ–æ€è·¯ï¼Œç”¨BFSå¤„ç†å½“å‰ä½ç½®ï¼ŒDFSæ‰©å±•æ–¹å‘ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <queue>
  #include <cstring>
  using namespace std;

  const int MAXN = 55;
  char map[MAXN][MAXN];
  bool vis[MAXN][MAXN];
  queue<int> q, t;
  int dx[] = {0, 0, -1, 1}; // å¯¹åº”Wã€Eã€Nã€S
  int dy[] = {-1, 1, 0, 0};

  void dfs(int x, int y, int dir) {
      int nx = x + dx[dir], ny = y + dy[dir];
      if (nx < 1 || nx > MAXN-1 || ny < 1 || ny > MAXN-1 || map[nx][ny] == 'X') return;
      if (vis[nx][ny]) return;
      vis[nx][ny] = true;
      t.push(nx); t.push(ny);
      dfs(nx, ny, dir);
  }

  void bfs(string dir) {
      int dir_idx;
      if (dir[0] == 'N') dir_idx = 2;
      else if (dir[0] == 'S') dir_idx = 3;
      else if (dir[0] == 'W') dir_idx = 0;
      else dir_idx = 1;
      while (!q.empty()) {
          int x = q.front(); q.pop();
          int y = q.front(); q.pop();
          dfs(x, y, dir_idx);
      }
      memset(vis, false, sizeof(vis));
      while (!t.empty()) {
          q.push(t.front()); t.pop();
          q.push(t.front()); t.pop();
      }
  }

  int main() {
      int n, m, w;
      cin >> n >> m;
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              cin >> map[i][j];
              if (map[i][j] == '*') {
                  q.push(i); q.push(j);
                  map[i][j] = '.';
              }
          }
      }
      cin >> w;
      for (int i = 1; i <= w; i++) {
          string dir;
          cin >> dir;
          bfs(dir);
      }
      while (!q.empty()) {
          int x = q.front(); q.pop();
          int y = q.front(); q.pop();
          map[x][y] = '*';
      }
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              cout << map[i][j];
          }
          cout << endl;
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–åœ°å›¾ï¼Œè®°å½•åˆå§‹ä½ç½®åˆ°é˜Ÿåˆ—`q`ã€‚  
  2. **BFSå¤„ç†æ–¹å‘**ï¼šå¯¹äºæ¯ä¸ªæ–¹å‘ï¼Œç”¨`dfs`æ‰©å±•æ‰€æœ‰å¯èƒ½çš„æ–°ä½ç½®åˆ°é˜Ÿåˆ—`t`ï¼Œå¤„ç†å®Œ`q`åå°†`t`ä¸­çš„ä½ç½®è½¬ç§»åˆ°`q`ã€‚  
  3. **è¾“å‡ºç»“æœ**ï¼šå°†é˜Ÿåˆ—`q`ä¸­çš„æœ€ç»ˆä½ç½®æ ‡è®°ä¸º`*`ï¼Œè¾“å‡ºåœ°å›¾ã€‚


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆstone_juiceï¼‰ï¼šé˜Ÿåˆ—ç¼“å­˜ä¸DFSæ‰©å±•
* **äº®ç‚¹**ï¼šç”¨ä¸¤ä¸ªé˜Ÿåˆ—åˆ†ç¦»å½“å‰ä½ç½®å’Œæ–°ä½ç½®ï¼Œé¿å…æ··ä¹±ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs(int x, int y, int dir) {
      int nx = x + dx[dir], ny = y + dy[dir];
      if (nx < 1 || nx > n || ny < 1 || ny > m || map[nx][ny] == 'X') return;
      if (vis[nx][ny]) return;
      vis[nx][ny] = true;
      t.push(nx); t.push(ny);
      dfs(nx, ny, dir);
  }

  void bfs(string dir) {
      // å¤„ç†æ–¹å‘ï¼Œè°ƒç”¨dfs
      while (!q.empty()) {
          int x = q.front(); q.pop();
          int y = q.front(); q.pop();
          dfs(x, y, dir_idx);
      }
      // è½¬ç§»tåˆ°q
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `dfs`å‡½æ•°ä»`(x,y)`å‡ºå‘ï¼Œæ²¿ç€`dir`æ–¹å‘ä¸€ç›´ç§»åŠ¨ï¼Œç›´åˆ°æ’å¢™ã€‚æ¯ä¸€æ­¥éƒ½å°†æ–°ä½ç½®åŠ å…¥`t`é˜Ÿåˆ—ï¼Œå¹¶æ ‡è®°ä¸ºå·²å¤„ç†ï¼ˆ`vis`æ•°ç»„ï¼‰ã€‚  
  - `bfs`å‡½æ•°å¤„ç†å½“å‰é˜Ÿåˆ—`q`ä¸­çš„æ‰€æœ‰ä½ç½®ï¼Œè°ƒç”¨`dfs`æ‰©å±•æ–°ä½ç½®åˆ°`t`ï¼Œå¤„ç†å®Œåå°†`t`ä¸­çš„ä½ç½®è½¬ç§»åˆ°`q`ï¼Œè¿›å…¥ä¸‹ä¸€è½®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé˜Ÿåˆ—ç¼“å­˜æ˜¯å¤„ç†â€œå¤šæ­¥æ‰©å±•â€çš„æœ‰æ•ˆæ–¹æ³•ï¼Œèƒ½é¿å…é‡å¤å¤„ç†åŒä¸€ä½ç½®ã€‚


#### é¢˜è§£äºŒï¼ˆdingcxï¼‰ï¼šè®°å¿†åŒ–DFS
* **äº®ç‚¹**ï¼šç”¨`vis[dep][x][y]`è®°å½•çŠ¶æ€ï¼Œé¿å…é‡å¤æœç´¢ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  bool vis[MAXN][MAXN][MAXN]; // dep, x, y
  void dfs(int dep, int x, int y) {
      if (vis[dep][x][y]) return;
      vis[dep][x][y] = true;
      if (dep == 0) return;
      int dir = to[dep]; // to[dep]æ˜¯ç¬¬depä¸ªæ–¹å‘çš„ç´¢å¼•
      while (map[x+dx[dir]][y+dy[dir]]) {
          x += dx[dir];
          y += dy[dir];
          dfs(dep-1, x, y);
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `vis[dep][x][y]`è®°å½•â€œæ‰§è¡Œå®Œç¬¬`dep`ä¸ªæ–¹å‘åæ˜¯å¦åˆ°è¿‡`(x,y)`â€ã€‚å¦‚æœå·²è®¿é—®è¿‡ï¼Œç›´æ¥è¿”å›ã€‚  
  - `while`å¾ªç¯æ²¿ç€`dir`æ–¹å‘ä¸€ç›´ç§»åŠ¨ï¼Œæ¯ä¸€æ­¥éƒ½é€’å½’è°ƒç”¨`dfs(dep-1, x, y)`ï¼Œå¤„ç†ä¸‹ä¸€ä¸ªæ–¹å‘ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè®°å¿†åŒ–èƒ½å¤§å¹…å‡å°‘é‡å¤æœç´¢ï¼Œæ˜¯DFSä¼˜åŒ–çš„å¸¸ç”¨æ–¹æ³•ã€‚


#### é¢˜è§£ä¸‰ï¼ˆä¸¿ç‹è€…ä¹‹è·¯ï¼‰ï¼šæ¨¡æ‹Ÿä¸ansæ•°ç»„
* **äº®ç‚¹**ï¼šç”¨`ans`æ•°ç»„è®°å½•å½“å‰å¯èƒ½çš„ä½ç½®ï¼Œæ€è·¯ç®€å•ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  bool ans[MAXN][MAXN];
  void search(int direct) {
      memset(vis, false, sizeof(vis));
      for (int i = 1; i <= r; i++) {
          for (int j = 1; j <= c; j++) {
              if (ans[i][j] && !vis[i][j]) {
                  int x = i, y = j;
                  while (map[x+dx[direct]][y+dy[direct]]) {
                      x += dx[direct];
                      y += dy[direct];
                      ans[x][y] = true;
                      vis[x][y] = true;
                  }
              }
          }
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `ans`æ•°ç»„è®°å½•å½“å‰å¯èƒ½çš„ä½ç½®ã€‚æ¯æ¬¡å¤„ç†æ–¹å‘æ—¶ï¼Œéå†`ans`ä¸­çš„ä½ç½®ï¼Œæ²¿ç€æ–¹å‘ä¸€ç›´ç§»åŠ¨ï¼Œå°†æ–°ä½ç½®æ ‡è®°ä¸º`ans[x][y] = true`ã€‚  
  - `vis`æ•°ç»„æ ‡è®°å½“å‰æ­¥éª¤çš„æ–°ä½ç½®ï¼Œé¿å…é‡å¤æ›´æ–°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¨¡æ‹Ÿæ˜¯æœ€ç›´è§‚çš„è§£é¢˜æ€è·¯ï¼Œé€‚åˆå…¥é—¨å­¦ä¹ è€…ç†è§£â€œå¦‚ä½•ä¸€æ­¥æ­¥å¤„ç†é—®é¢˜â€ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶çš„è¿·å®«ä¹‹æ—…
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹Ÿåœ°å›¾å’Œç§»åŠ¨è¿‡ç¨‹ï¼Œç»“åˆéŸ³æ•ˆå¢å¼ºè¶£å‘³æ€§ï¼Œè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°â€œé˜Ÿåˆ—ä¸­çš„ä½ç½®å¦‚ä½•æ‰©å±•â€ã€‚


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - åœ°å›¾ç”¨åƒç´ å—è¡¨ç¤ºï¼šç™½è‰²ï¼ˆå¯èµ°ï¼‰ã€é»‘è‰²ï¼ˆéšœç¢`X`ï¼‰ã€çº¢è‰²ï¼ˆåˆå§‹ä½ç½®`*`ï¼‰ã€‚  
   - æ§åˆ¶é¢æ¿ï¼šâ€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥æ‰§è¡Œâ€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1~5å€é€Ÿï¼‰ã€‚  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»å¿«æ—‹å¾‹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - åˆå§‹ä½ç½®ï¼ˆçº¢è‰²ï¼‰åŠ å…¥é˜Ÿåˆ—`q`ï¼ˆè“è‰²æ ‡è®°ï¼‰ã€‚  
   - æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œè¡¨ç¤ºé˜Ÿåˆ—åˆå§‹åŒ–å®Œæˆã€‚

3. **æ–¹å‘å¤„ç†ï¼ˆä»¥`NORTH`ä¸ºä¾‹ï¼‰**ï¼š  
   - è“è‰²ä½ç½®ï¼ˆé˜Ÿåˆ—`q`ä¸­çš„ä½ç½®ï¼‰æ²¿ç€`NORTH`æ–¹å‘ï¼ˆå‘ä¸Šï¼‰ç§»åŠ¨ï¼Œæ¯ç§»åŠ¨ä¸€æ­¥ï¼Œç”¨ç»¿è‰²æ ‡è®°æ–°ä½ç½®ã€‚  
   - å½“ç¢°åˆ°éšœç¢ï¼ˆé»‘è‰²ï¼‰æˆ–è¾¹ç•Œæ—¶ï¼Œç»¿è‰²ä½ç½®åœæ­¢ç§»åŠ¨ï¼Œæ’­æ”¾â€œå’šâ€çš„éŸ³æ•ˆã€‚  
   - ç»¿è‰²ä½ç½®åŠ å…¥é˜Ÿåˆ—`t`ï¼ˆç¼“å­˜é˜Ÿåˆ—ï¼‰ï¼Œè“è‰²ä½ç½®æ¶ˆå¤±ï¼ˆè¡¨ç¤ºå·²å¤„ç†ï¼‰ã€‚

4. **é˜Ÿåˆ—äº¤æ¢**ï¼š  
   - å¤„ç†å®Œæ‰€æœ‰è“è‰²ä½ç½®åï¼Œé˜Ÿåˆ—`t`ä¸­çš„ç»¿è‰²ä½ç½®å˜æˆè“è‰²ï¼ˆåŠ å…¥é˜Ÿåˆ—`q`ï¼‰ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä¸€ä¸ªæ–¹å‘ã€‚  
   - æ’­æ”¾â€œå”°â€çš„éŸ³æ•ˆï¼Œè¡¨ç¤ºé˜Ÿåˆ—äº¤æ¢å®Œæˆã€‚

5. **æœ€ç»ˆç»“æœ**ï¼š  
   - æ‰€æœ‰æ–¹å‘å¤„ç†å®Œæˆåï¼Œé˜Ÿåˆ—`q`ä¸­çš„è“è‰²ä½ç½®æ ‡è®°ä¸º`*`ï¼ˆçº¢è‰²é—ªçƒï¼‰ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚


### äº¤äº’è®¾è®¡
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œæ‰§è¡Œä¸€ä¸ªæ–¹å‘çš„å¤„ç†è¿‡ç¨‹ï¼Œé€æ­¥æŸ¥çœ‹é˜Ÿåˆ—å˜åŒ–ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ’­æ”¾ï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒèŠ‚ï¼ˆ1å€é€Ÿæœ€æ…¢ï¼Œ5å€é€Ÿæœ€å¿«ï¼‰ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹åŠ¨ç”»ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»
- **æœç´¢ï¼ˆBFS/DFSï¼‰**ï¼šé€‚ç”¨äºâ€œéå†æ‰€æœ‰å¯èƒ½è·¯å¾„â€çš„é—®é¢˜ï¼Œå¦‚è¿·å®«é—®é¢˜ã€å­—ä¸²å˜æ¢é—®é¢˜ã€‚  
- **è®°å¿†åŒ–**ï¼šé€‚ç”¨äºâ€œé‡å¤çŠ¶æ€å¤šâ€çš„é—®é¢˜ï¼Œå¦‚åŠ¨æ€è§„åˆ’ã€é€’å½’é—®é¢˜ã€‚  
- **æ¨¡æ‹Ÿ**ï¼šé€‚ç”¨äºâ€œæ­¥éª¤æ˜ç¡®â€çš„é—®é¢˜ï¼Œå¦‚æ¨¡æ‹Ÿæ—¶é’Ÿã€æ¨¡æ‹Ÿæ¸¸æˆè¿‡ç¨‹ã€‚


### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰
1. **æ´›è°· P1032 å­—ä¸²å˜æ¢**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨BFSå¤„ç†å­—ä¸²çš„å˜æ¢è¿‡ç¨‹ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œéå†æ‰€æœ‰å¯èƒ½è·¯å¾„â€ï¼Œèƒ½å·©å›ºBFSçš„åº”ç”¨ã€‚  
2. **æ´›è°· P1162 å¡«æ¶‚é¢œè‰²**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨DFSå¡«å……é¢œè‰²ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œæ‰©å±•æ‰€æœ‰å¯èƒ½ä½ç½®â€ï¼Œèƒ½å·©å›ºDFSçš„åº”ç”¨ã€‚  
3. **æ´›è°· P1019 å•è¯æ¥é¾™**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨DFSæ¥é¾™å•è¯ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œå¿…é¡»ç§»åŠ¨è‡³å°‘ä¸€æ­¥â€ï¼Œèƒ½å·©å›ºå¾ªç¯æ‰©å±•çš„æŠ€å·§ã€‚  
4. **æ´›è°· P1379 å…«æ•°ç éš¾é¢˜**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨BFSè§£å†³å…«æ•°ç é—®é¢˜ï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œé˜Ÿåˆ—ç¼“å­˜â€ï¼Œèƒ½å·©å›ºBFSçš„ä¼˜åŒ–æŠ€å·§ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰
- **é¢˜è§£ä¸€ï¼ˆstone_juiceï¼‰**ï¼šä½œè€…æåˆ°â€œé˜Ÿåˆ—ç¼“å­˜æœºåˆ¶â€æ˜¯è§£å†³â€œè¾¹å¤„ç†è¾¹æ·»åŠ â€é—®é¢˜çš„å…³é”®ï¼Œè¿™æé†’æˆ‘ä»¬åœ¨å¤„ç†å¤šæ­¥æ‰©å±•é—®é¢˜æ—¶ï¼Œè¦æ³¨æ„â€œåˆ†ç¦»å½“å‰çŠ¶æ€å’Œæ–°çŠ¶æ€â€ã€‚  
- **é¢˜è§£äºŒï¼ˆdingcxï¼‰**ï¼šä½œè€…æåˆ°â€œè®°å¿†åŒ–ä¼˜åŒ–â€èƒ½å¤§å¹…é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œè¿™æé†’æˆ‘ä»¬åœ¨å†™DFSæ—¶ï¼Œè¦è€ƒè™‘â€œæ˜¯å¦æœ‰é‡å¤çŠ¶æ€â€ã€‚  
- **é¢˜è§£ä¸‰ï¼ˆä¸¿ç‹è€…ä¹‹è·¯ï¼‰**ï¼šä½œè€…æåˆ°â€œæ¨¡æ‹Ÿæ€è·¯â€è™½ç„¶ç®€å•ï¼Œä½†èƒ½æœ‰æ•ˆè§£å†³é—®é¢˜ï¼Œè¿™æé†’æˆ‘ä»¬åœ¨å…¥é—¨æ—¶ï¼Œä¸è¦è¿½æ±‚å¤æ‚ç®—æ³•ï¼Œå…ˆä»æ¨¡æ‹Ÿå¼€å§‹ã€‚


## ç»“è¯­
æœ¬æ¬¡å…³äºâ€œSEARCHâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£æœç´¢ï¼ˆBFS/DFSï¼‰å’Œæ¨¡æ‹Ÿçš„æ ¸å¿ƒæ€è·¯ï¼ŒæŒæ¡è§£é¢˜æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­ç»ƒä¹ **å’Œ**æ€»ç»“ç»éªŒ**â€”â€”å¤šå†™ä»£ç ï¼Œå¤šæ€è€ƒï¼Œä½ ä¸€å®šä¼šè¶Šæ¥è¶Šå‰å®³ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š180.24ç§’
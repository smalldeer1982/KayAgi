# é¢˜ç›®ä¿¡æ¯

# [USACO15DEC] Switching on the Lights S

## é¢˜ç›®èƒŒæ™¯

æ¥æºï¼šusaco-2015-dec

Farm John æœ€è¿‘æ–°å»ºäº†ä¸€æ‰¹å·¨å¤§çš„ç‰›æ£šã€‚è¿™äº›ç‰›æ£šæ„æˆäº†ä¸€ä¸ª $N \times N$ çš„çŸ©å½¢ç½‘ç»œ $(1 < N < 100)$ã€‚

ç„¶è€Œ Bessie ååˆ†æ€•é»‘ï¼Œä»–æƒ³è®¡ç®—å¯ä»¥æŠŠå¤šå°‘ä¸ªç‰›æ£šçš„ç¯æ‰“å¼€ã€‚

## é¢˜ç›®æè¿°

æœ‰ $N \times N$ ä¸ªæˆ¿é—´ï¼Œç»„æˆäº†ä¸€å¼  $N \times N$ çš„ç½‘æ ¼å›¾ï¼ŒBessie ä¸€å¼€å§‹ä½äºå·¦ä¸Šè§’ $(1,1)$ï¼Œå¹¶ä¸”åªèƒ½ä¸Šä¸‹å·¦å³è¡Œèµ°ã€‚


ä¸€å¼€å§‹ï¼Œåªæœ‰ $(1,1)$ è¿™ä¸ªæˆ¿é—´çš„ç¯æ˜¯äº®ç€çš„ï¼ŒBessie åªèƒ½åœ¨äº®ç€ç¯çš„æˆ¿é—´é‡Œæ´»åŠ¨ã€‚


æœ‰å¦å¤– $M$ æ¡ä¿¡æ¯ï¼Œæ¯æ¡ä¿¡æ¯åŒ…å«å››ä¸ªæ•° $a,b,c,d$ï¼Œè¡¨ç¤ºæˆ¿é—´ $(a,b)$ é‡Œæœ‰æˆ¿é—´ $(c,d)$ çš„ç¯çš„å¼€å…³ã€‚


è¯·è®¡ç®—å‡ºæœ€å¤šæœ‰å¤šå°‘ä¸ªæˆ¿é—´çš„ç¯å¯ä»¥è¢«æ‰“å¼€ã€‚

## è¯´æ˜/æç¤º

Bessie å¯ä»¥ä½¿ç”¨ $(1,1)$ çš„å¼€å…³æ‰“å¼€ $(1,2),(1,3)$ çš„ç¯ï¼Œç„¶åèµ°åˆ° $(1,3)$ å¹¶æ‰“å¼€ $(2,1)$ çš„ç¯ï¼Œèµ°åˆ° $(2,1)$ å¹¶æ‰“å¼€ $(2,2)$ çš„ç¯ã€‚$(2,3)$ çš„å¼€å…³æ— æ³•åˆ°è¾¾ã€‚å› æ­¤å¯ä»¥ç‚¹äº® $5$ ä¸ªæˆ¿é—´ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 6
1 1 1 2
2 1 2 2
1 1 1 3
2 3 3 1
1 3 1 2
1 3 2 1
```

### è¾“å‡º

```
5```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO15DEC] Switching on the Lights S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢ï¼ˆBFS/DFSï¼‰ä¸çŠ¶æ€ç»´æŠ¤  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œå¼€å…³ç¯â€é—®é¢˜ï¼Œå°±åƒ**æ¢é™©é˜Ÿåœ¨è¿·å®«ä¸­å¯»å®**â€”â€”ä½ åªèƒ½åœ¨äº®ç€çš„åŒºåŸŸç§»åŠ¨ï¼Œæ¯åˆ°ä¸€ä¸ªæˆ¿é—´å°±èƒ½æ‰“å¼€ä¸€äº›éšè—çš„ç¯ï¼Œè€Œæ–°ç¯å¯èƒ½ç…§äº®ä¹‹å‰æ— æ³•åˆ°è¾¾çš„åŒºåŸŸã€‚æ ¸å¿ƒæ˜¯**ç”¨æœç´¢éå†å¯è¾¾æˆ¿é—´ï¼ŒåŒæ—¶åŠ¨æ€ç»´æŠ¤ç¯çš„çŠ¶æ€**ï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•å¯èƒ½è¢«ç‚¹äº®çš„æˆ¿é—´ã€‚  

- **æ ¸å¿ƒæ€è·¯**ï¼šä»èµ·ç‚¹(1,1)å‡ºå‘ï¼Œç”¨BFS/DFSéå†æ‰€æœ‰å¯è¾¾çš„äº®ç¯æˆ¿é—´ï¼›æ¯åˆ°ä¸€ä¸ªæˆ¿é—´ï¼Œæ‰“å¼€å®ƒèƒ½æ§åˆ¶çš„ç¯ï¼Œå¹¶æ£€æŸ¥è¿™äº›æ–°ç¯çš„æˆ¿é—´æ˜¯å¦**ä¸å·²è®¿é—®çš„æˆ¿é—´ç›¸é‚»**ï¼ˆå¦‚æœæ˜¯ï¼Œè¯´æ˜ç°åœ¨å¯ä»¥åˆ°è¾¾ï¼ŒåŠ å…¥æœç´¢é˜Ÿåˆ—ï¼‰ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼šæ–°æ‰“å¼€çš„ç¯å¯èƒ½ä½äºå·²è®¿é—®æˆ¿é—´çš„é™„è¿‘ï¼Œä½†ä¹‹å‰æœªè¢«å¤„ç†ï¼ˆæ¯”å¦‚ï¼Œä½ å…ˆèµ°åˆ°Aæˆ¿é—´ï¼Œæ‰“å¼€äº†Bæˆ¿é—´çš„ç¯ï¼Œä½†Bæˆ¿é—´æ—è¾¹çš„Cæˆ¿é—´æ˜¯åæ¥æ‰è®¿é—®çš„ï¼Œè¿™æ—¶å€™Bæˆ¿é—´å°±å¯ä»¥é€šè¿‡Cæˆ¿é—´åˆ°è¾¾ï¼‰ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼šå½“æ‰“å¼€ä¸€ç›ç¯æ—¶ï¼Œç«‹å³æ£€æŸ¥å®ƒçš„ä¸Šä¸‹å·¦å³æ˜¯å¦æœ‰å·²è®¿é—®çš„æˆ¿é—´ï¼›å¦‚æœæœ‰ï¼Œå°±å°†è¯¥ç¯çš„æˆ¿é—´åŠ å…¥æœç´¢é˜Ÿåˆ—ï¼Œç»§ç»­æ¢ç´¢ã€‚  
- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼å±•ç¤º3x3ç½‘æ ¼ï¼ˆæ¯”å¦‚æ ·ä¾‹è¾“å…¥ï¼‰ï¼Œèµ·ç‚¹(1,1)ç”¨**é»„è‰²**è¡¨ç¤ºï¼ˆäº®ç¯ä¸”å·²è®¿é—®ï¼‰ï¼Œé˜Ÿåˆ—ä¸­çš„æˆ¿é—´ç”¨**é—ªçƒçš„è“è‰²**è¡¨ç¤ºï¼Œæœªäº®çš„ç¯ç”¨**ç°è‰²**ï¼Œæ–°æ‰“å¼€çš„ç¯ç”¨**ç»¿è‰²**é—ªçƒï¼ˆä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼‰ã€‚å½“æˆ¿é—´è¢«åŠ å…¥é˜Ÿåˆ—æ—¶ï¼Œç”¨â€œæ»‘å…¥â€åŠ¨ç”»å±•ç¤ºï¼Œå¸®åŠ©ç†è§£â€œå¦‚ä½•æ‰©å±•å¯è¾¾åŒºåŸŸâ€ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šJMercuryï¼ˆBFSé˜Ÿåˆ—ä¼˜åŒ–ï¼Œæ€è·¯æ¸…æ™°ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£ç”¨**é˜Ÿåˆ—æ¨¡æ‹ŸBFS**ï¼Œå®Œç¾è§£å†³äº†â€œæ–°ç¯å¯è¾¾æ€§â€é—®é¢˜ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š  
  1. é˜Ÿåˆ—å­˜å‚¨**å·²è®¿é—®çš„äº®ç¯æˆ¿é—´**ï¼ˆç¡®ä¿åªèƒ½åœ¨äº®ç¯åŒºåŸŸç§»åŠ¨ï¼‰ï¼›  
  2. å¤„ç†é˜Ÿé¦–æˆ¿é—´æ—¶ï¼Œå…ˆæ‰“å¼€å®ƒèƒ½æ§åˆ¶çš„ç¯ï¼Œç„¶åæ£€æŸ¥è¿™äº›æ–°ç¯çš„æˆ¿é—´æ˜¯å¦**ä¸å·²è®¿é—®çš„æˆ¿é—´ç›¸é‚»**ï¼ˆå¦‚æœæ˜¯ï¼ŒåŠ å…¥é˜Ÿåˆ—ï¼‰ï¼›  
  3. å†æ£€æŸ¥é˜Ÿé¦–æˆ¿é—´çš„ä¸Šä¸‹å·¦å³ï¼Œå°†æœªè®¿é—®çš„äº®ç¯æˆ¿é—´åŠ å…¥é˜Ÿåˆ—ã€‚  
  ä»£ç ä¸­çš„`MAP`æ•°ç»„è®°å½•ç¯çš„çŠ¶æ€ï¼Œ`vis`æ•°ç»„è®°å½•æ˜¯å¦åŠ å…¥è¿‡é˜Ÿåˆ—ï¼Œé¿å…é‡å¤å¤„ç†ã€‚è¿™ç§æ–¹æ³•**æ—¶é—´å¤æ‚åº¦ä½**ï¼ˆæ¯ä¸ªæˆ¿é—´æœ€å¤šå…¥é˜Ÿä¸€æ¬¡ï¼‰ï¼Œé€»è¾‘ä¸¥è°¨ï¼Œæ˜¯æœ¬é¢˜çš„â€œæ ‡å‡†è§£æ³•â€ã€‚  

### é¢˜è§£äºŒï¼šBoAnï¼ˆåå¤DFSï¼Œç®€å•æ˜“æ‡‚ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£ç”¨**åå¤DFS**è§£å†³äº†â€œæ— æ³•å›æº¯â€çš„é—®é¢˜ã€‚å®ƒçš„æ€è·¯æ˜¯ï¼š  
  1. ç¬¬ä¸€æ¬¡DFSéå†æ‰€æœ‰å¯è¾¾æˆ¿é—´ï¼Œæ‰“å¼€ç¯ï¼›  
  2. ç»Ÿè®¡äº®ç¯æ•°é‡ï¼Œç„¶å**é‡ç½®è®¿é—®æ•°ç»„**ï¼Œå†æ¬¡DFSï¼ˆæ­¤æ—¶æ–°ç¯å¯èƒ½å·²ç…§äº®æ›´å¤šåŒºåŸŸï¼‰ï¼›  
  3. é‡å¤ç›´åˆ°äº®ç¯æ•°é‡ä¸å†å˜åŒ–ã€‚  
  è¿™ç§æ–¹æ³•**é€»è¾‘ç®€å•**ï¼Œé€‚åˆåˆå­¦è€…ç†è§£â€œåŠ¨æ€æ‰©å±•â€çš„æ¦‚å¿µï¼Œä½†æ—¶é—´å¤æ‚åº¦ç•¥é«˜ï¼ˆå¤šæ¬¡DFSï¼‰ï¼Œä½†å¯¹äºn<100çš„é¢˜ç›®æ¥è¯´å®Œå…¨å¯è¡Œã€‚  

### é¢˜è§£ä¸‰ï¼švani_prcupsï¼ˆDFS+é‚»æ¥è¡¨ï¼Œä»£ç ç®€æ´ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£ç”¨**DFS**ç»“åˆ**äºŒç»´é‚»æ¥è¡¨**å­˜å‚¨å¼€å…³ä¿¡æ¯ï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚å®ƒçš„å…³é”®æ“ä½œæ˜¯ï¼š  
  å½“ç‚¹äº®ä¸€ä¸ªæˆ¿é—´æ—¶ï¼Œç«‹å³æ£€æŸ¥å…¶å‘¨å›´æ˜¯å¦æœ‰å·²è®¿é—®çš„æˆ¿é—´ï¼Œå¦‚æœæœ‰ï¼Œå°±**é€’å½’æ·±æœè¯¥æˆ¿é—´**ï¼ˆç›¸å½“äºâ€œè¡¥å…¨â€ä¹‹å‰æœªå¤„ç†çš„åŒºåŸŸï¼‰ã€‚  
  ä»£ç ä¸­çš„`b`æ•°ç»„è®°å½•ç¯çš„çŠ¶æ€ï¼Œ`v`æ•°ç»„è®°å½•æ˜¯å¦è®¿é—®è¿‡ï¼Œé¿å…æ­»å¾ªç¯ã€‚è¿™ç§æ–¹æ³•**ç©ºé—´æ•ˆç‡é«˜**ï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•å¤„ç†æ–°æ‰“å¼€çš„ç¯çš„å¯è¾¾æ€§ï¼Ÿ**  
* **åˆ†æ**ï¼šæ–°æ‰“å¼€çš„ç¯å¯èƒ½ä½äºå·²è®¿é—®æˆ¿é—´çš„é™„è¿‘ï¼Œä½†ä¹‹å‰æœªè¢«åŠ å…¥é˜Ÿåˆ—ã€‚æ¯”å¦‚ï¼Œä½ å…ˆèµ°åˆ°(1,1)ï¼Œæ‰“å¼€(1,2)çš„ç¯ï¼Œä½†(1,2)æ—è¾¹çš„(2,2)æ˜¯åæ¥æ‰è®¿é—®çš„ï¼Œè¿™æ—¶å€™(1,2)å°±å¯ä»¥é€šè¿‡(2,2)åˆ°è¾¾ã€‚  
* **è§£å†³æ–¹æ¡ˆ**ï¼šå½“æ‰“å¼€ä¸€ç›ç¯æ—¶ï¼Œç«‹å³æ£€æŸ¥å®ƒçš„ä¸Šä¸‹å·¦å³æ˜¯å¦æœ‰å·²è®¿é—®çš„æˆ¿é—´ï¼ˆç”¨`vis`æ•°ç»„æ ‡è®°ï¼‰ã€‚å¦‚æœæœ‰ï¼Œå°±å°†è¯¥ç¯çš„æˆ¿é—´åŠ å…¥é˜Ÿåˆ—ï¼ˆæ¯”å¦‚JMercuryé¢˜è§£ä¸­çš„`check`å‡½æ•°ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**åŠ¨æ€ç»´æŠ¤å¯è¾¾æ€§**æ˜¯å…³é”®â€”â€”ç¯çš„çŠ¶æ€å˜åŒ–ä¼šå½±å“å¯è¾¾åŒºåŸŸï¼Œå¿…é¡»åŠæ—¶å¤„ç†ã€‚  

### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•é¿å…é‡å¤å¤„ç†æˆ¿é—´ï¼Ÿ**  
* **åˆ†æ**ï¼šå¦‚æœåŒä¸€ä¸ªæˆ¿é—´å¤šæ¬¡åŠ å…¥é˜Ÿåˆ—ï¼Œä¼šå¯¼è‡´æ—¶é—´å¤æ‚åº¦é£™å‡ï¼ˆæ¯”å¦‚åå¤å¤„ç†(1,1)ï¼‰ã€‚  
* **è§£å†³æ–¹æ¡ˆ**ï¼šç”¨`vis`æ•°ç»„è®°å½•æ˜¯å¦åŠ å…¥è¿‡é˜Ÿåˆ—ï¼ˆæ¯”å¦‚JMercuryé¢˜è§£ä¸­çš„`vis`æ•°ç»„ï¼‰ï¼Œç¡®ä¿æ¯ä¸ªæˆ¿é—´åªå…¥é˜Ÿä¸€æ¬¡ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**æ ‡è®°å·²å¤„ç†çš„çŠ¶æ€**æ˜¯æœç´¢ç®—æ³•çš„åŸºç¡€ï¼Œèƒ½é¿å…æ— æ•ˆå¾ªç¯ã€‚  

### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•æ­£ç¡®ç»Ÿè®¡ç¯çš„æ•°é‡ï¼Ÿ**  
* **åˆ†æ**ï¼šé¢˜ç›®è¦æ±‚çš„æ˜¯â€œèƒ½æ‰“å¼€çš„ç¯çš„æ•°é‡â€ï¼Œè€Œä¸æ˜¯â€œèƒ½åˆ°è¾¾çš„æˆ¿é—´æ•°é‡â€ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½æ— æ³•åˆ°è¾¾æŸä¸ªæˆ¿é—´ï¼Œä½†å®ƒçš„ç¯è¢«å…¶ä»–æˆ¿é—´çš„å¼€å…³æ‰“å¼€äº†ã€‚  
* **è§£å†³æ–¹æ¡ˆ**ï¼šç”¨ä¸“é—¨çš„æ•°ç»„ï¼ˆæ¯”å¦‚`MAP`æˆ–`b`ï¼‰è®°å½•ç¯çš„çŠ¶æ€ï¼Œæœ€åéå†æ•´ä¸ªæ•°ç»„ç»Ÿè®¡äº®ç¯çš„æ•°é‡ï¼ˆæ¯”å¦‚JMercuryé¢˜è§£ä¸­çš„`ans`å˜é‡ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**æ˜ç¡®é¢˜ç›®è¦æ±‚**æ˜¯è§£é¢˜çš„ç¬¬ä¸€æ­¥ï¼Œä¸è¦æŠŠâ€œç¯çš„æ•°é‡â€å’Œâ€œå¯è¾¾æˆ¿é—´æ•°é‡â€æ··æ·†ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§Aï¼šç”¨é˜Ÿåˆ—ç»´æŠ¤å¯è¾¾åŒºåŸŸ**ï¼šBFSé˜Ÿåˆ—èƒ½æœ‰åºæ‰©å±•å¯è¾¾åŒºåŸŸï¼Œé¿å…é—æ¼ã€‚  
- **æŠ€å·§Bï¼šåŠ¨æ€æ£€æŸ¥æ–°ç¯çš„å¯è¾¾æ€§**ï¼šæ‰“å¼€ç¯æ—¶ï¼Œç«‹å³æ£€æŸ¥å…¶å‘¨å›´æ˜¯å¦æœ‰å·²è®¿é—®çš„æˆ¿é—´ï¼Œç¡®ä¿åŠæ—¶å¤„ç†ã€‚  
- **æŠ€å·§Cï¼šç”¨æ•°ç»„è®°å½•çŠ¶æ€**ï¼šç”¨`vis`è®°å½•æ˜¯å¦è®¿é—®è¿‡ï¼Œç”¨`light`è®°å½•ç¯çš„çŠ¶æ€ï¼Œé¿å…é‡å¤å¤„ç†ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆåŸºäºJMercuryé¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼šæ­¤ä»£ç æ˜¯æœ¬é¢˜çš„â€œæ ‡å‡†BFSè§£æ³•â€ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ•ˆç‡é«˜ï¼Œé€‚åˆåˆå­¦è€…å­¦ä¹ ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include<bits/stdc++.h>
  using namespace std;

  const int maxn=110;
  struct P { int x,y; };
  bool MAP[maxn][maxn], vis[maxn][maxn]; // MAP: ç¯æ˜¯å¦äº®ï¼›vis: æ˜¯å¦åŠ å…¥è¿‡é˜Ÿåˆ—
  vector<P> Lamp[maxn][maxn]; // æ¯ä¸ªæˆ¿é—´èƒ½æ§åˆ¶çš„ç¯
  int dx[4]={-1,1,0,0}, dy[4]={0,0,-1,1};
  int n,m,ans;

  bool Inside(int x,int y) { return x>=1 && x<=n && y>=1 && y<=n; }

  void bfs() {
      queue<P> q;
      q.push({1,1});
      vis[1][1] = true;
      MAP[1][1] = true;
      ans = 1;
      while(!q.empty()) {
          P u = q.front(); q.pop();
          // å¤„ç†ä¸Šä¸‹å·¦å³çš„å¯è¾¾æˆ¿é—´
          for(int i=0;i<4;i++) {
              int vx=u.x+dx[i], vy=u.y+dy[i];
              if(Inside(vx,vy) && !vis[vx][vy] && MAP[vx][vy]) {
                  q.push({vx,vy});
                  vis[vx][vy] = true;
              }
          }
          // å¤„ç†å½“å‰æˆ¿é—´èƒ½æ§åˆ¶çš„ç¯
          for(int i=0;i<Lamp[u.x][u.y].size();i++) {
              P v = Lamp[u.x][u.y][i];
              if(vis[v.x][v.y] || MAP[v.x][v.y]) continue;
              MAP[v.x][v.y] = true;
              ans++;
              // æ£€æŸ¥æ–°ç¯çš„æˆ¿é—´æ˜¯å¦ä¸å·²è®¿é—®çš„æˆ¿é—´ç›¸é‚»
              for(int i=0;i<4;i++) {
                  int nx=v.x+dx[i], ny=v.y+dy[i];
                  if(Inside(nx,ny) && vis[nx][ny]) {
                      q.push(v);
                      vis[v.x][v.y] = true;
                      break;
                  }
              }
          }
      }
  }

  int main() {
      scanf("%d%d",&n,&m);
      for(int i=1;i<=m;i++) {
          int x1,y1,x2,y2;
          scanf("%d%d%d%d",&x1,&y1,&x2,&y2);
          Lamp[x1][y1].push_back({x2,y2});
      }
      bfs();
      printf("%d",ans);
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–nå’Œmï¼Œç”¨`Lamp`æ•°ç»„å­˜å‚¨æ¯ä¸ªæˆ¿é—´èƒ½æ§åˆ¶çš„ç¯ï¼ˆé‚»æ¥è¡¨ï¼‰ã€‚  
  2. **BFSåˆå§‹åŒ–**ï¼šé˜Ÿåˆ—èµ·ç‚¹æ˜¯(1,1)ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®å’Œäº®ç¯ã€‚  
  3. **é˜Ÿåˆ—å¤„ç†**ï¼š  
     - å–å‡ºé˜Ÿé¦–æˆ¿é—´ï¼Œå¤„ç†å…¶ä¸Šä¸‹å·¦å³çš„å¯è¾¾æˆ¿é—´ï¼ˆåŠ å…¥é˜Ÿåˆ—ï¼‰ã€‚  
     - å¤„ç†è¯¥æˆ¿é—´èƒ½æ§åˆ¶çš„ç¯ï¼Œæ‰“å¼€ç¯å¹¶ç»Ÿè®¡æ•°é‡ï¼›æ£€æŸ¥æ–°ç¯çš„æˆ¿é—´æ˜¯å¦ä¸å·²è®¿é—®çš„æˆ¿é—´ç›¸é‚»ï¼ˆå¦‚æœæ˜¯ï¼ŒåŠ å…¥é˜Ÿåˆ—ï¼‰ã€‚  
  4. **è¾“å‡ºç»“æœ**ï¼šç»Ÿè®¡æ‰€æœ‰äº®ç¯çš„æ•°é‡ã€‚  

### é¢˜è§£ä¸€ï¼ˆJMercuryï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼š**åŠ¨æ€æ£€æŸ¥æ–°ç¯çš„å¯è¾¾æ€§**ï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•å¯èƒ½çš„åŒºåŸŸã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for(int i=0;i<Lamp[u.x][u.y].size();i++) {
      P v = Lamp[u.x][u.y][i];
      if(vis[v.x][v.y] || MAP[v.x][v.y]) continue;
      MAP[v.x][v.y] = true;
      ans++;
      // æ£€æŸ¥æ–°ç¯çš„æˆ¿é—´æ˜¯å¦ä¸å·²è®¿é—®çš„æˆ¿é—´ç›¸é‚»
      for(int i=0;i<4;i++) {
          int nx=v.x+dx[i], ny=v.y+dy[i];
          if(Inside(nx,ny) && vis[nx][ny]) {
              q.push(v);
              vis[v.x][v.y] = true;
              break;
          }
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - éå†å½“å‰æˆ¿é—´èƒ½æ§åˆ¶çš„ç¯ï¼Œæ‰“å¼€æœªäº®çš„ç¯ï¼ˆ`MAP[v.x][v.y] = true`ï¼‰ã€‚  
  - æ£€æŸ¥æ–°ç¯çš„æˆ¿é—´çš„ä¸Šä¸‹å·¦å³æ˜¯å¦æœ‰å·²è®¿é—®çš„æˆ¿é—´ï¼ˆ`vis[nx][ny]`ï¼‰ã€‚å¦‚æœæœ‰ï¼Œè¯´æ˜ç°åœ¨å¯ä»¥åˆ°è¾¾è¯¥æˆ¿é—´ï¼Œå°†å…¶åŠ å…¥é˜Ÿåˆ—ï¼ˆ`q.push(v)`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**åŠ¨æ€ç»´æŠ¤å¯è¾¾æ€§**æ˜¯æœ¬é¢˜çš„å…³é”®ï¼Œè¿™éƒ¨åˆ†ä»£ç è§£å†³äº†â€œæ–°ç¯æ— æ³•è¢«å¤„ç†â€çš„é—®é¢˜ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š**åƒç´ æ¢é™©é˜Ÿä¹‹å¼€å…³ç¯è¿·å®«**  
ï¼ˆä»¿ç…§FCçº¢ç™½æœºé£æ ¼ï¼Œç”¨8ä½åƒç´ ç”»å±•ç¤º3x3ç½‘æ ¼ï¼Œä¼´éšå¤å¤éŸ³æ•ˆï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º3x3ç½‘æ ¼ï¼Œèµ·ç‚¹(1,1)ç”¨**é»„è‰²**è¡¨ç¤ºï¼ˆäº®ç¯ä¸”å·²è®¿é—®ï¼‰ï¼Œå…¶ä»–æˆ¿é—´ç”¨**ç°è‰²**è¡¨ç¤ºï¼ˆæœªäº®ï¼‰ã€‚  
   - åº•éƒ¨æœ‰æ§åˆ¶é¢æ¿ï¼š**å¼€å§‹/æš‚åœ**ã€**å•æ­¥æ‰§è¡Œ**ã€**é‡ç½®**ã€**é€Ÿåº¦æ»‘å—**ï¼ˆ1x~5xï¼‰ã€‚  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«BGMï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **BFSæ‰§è¡Œè¿‡ç¨‹**ï¼š  
   - **é˜Ÿåˆ—å±•ç¤º**ï¼šé˜Ÿåˆ—ä¸­çš„æˆ¿é—´ç”¨**é—ªçƒçš„è“è‰²**è¡¨ç¤ºï¼ˆæ¯”å¦‚(1,1)åˆå§‹åœ¨é˜Ÿåˆ—ä¸­ï¼‰ã€‚  
   - **å¤„ç†é˜Ÿé¦–**ï¼šå½“å¤„ç†(1,1)æ—¶ï¼Œå®ƒçš„ä¸Šä¸‹å·¦å³ï¼ˆ(1,2)ã€(2,1)ï¼‰ç”¨**æ·¡è“è‰²**æ ‡è®°ï¼ˆå¾…æ£€æŸ¥ï¼‰ã€‚  
   - **æ‰“å¼€ç¯**ï¼š(1,1)èƒ½æ§åˆ¶(1,2)å’Œ(1,3)çš„ç¯ï¼Œè¿™ä¸¤ä¸ªæˆ¿é—´ä»**ç°è‰²**å˜æˆ**ç»¿è‰²**ï¼ˆé—ªçƒï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
   - **æ£€æŸ¥æ–°ç¯çš„å¯è¾¾æ€§**ï¼š(1,2)çš„æ—è¾¹(1,1)æ˜¯å·²è®¿é—®çš„ï¼Œæ‰€ä»¥(1,2)åŠ å…¥é˜Ÿåˆ—ï¼ˆ**è“è‰²é—ªçƒ**ï¼‰ï¼Œä¼´éšâ€œå’»â€çš„éŸ³æ•ˆã€‚  

3. **åŠ¨æ€æ‰©å±•**ï¼š  
   - å¤„ç†(1,2)æ—¶ï¼Œæ‰“å¼€å®ƒèƒ½æ§åˆ¶çš„(2,2)çš„ç¯ï¼ˆ**ç»¿è‰²é—ªçƒ**ï¼‰ï¼Œæ£€æŸ¥(2,2)çš„æ—è¾¹(1,2)æ˜¯å·²è®¿é—®çš„ï¼ŒåŠ å…¥é˜Ÿåˆ—ã€‚  
   - å¤„ç†(2,2)æ—¶ï¼Œæ‰“å¼€å®ƒèƒ½æ§åˆ¶çš„(2,1)çš„ç¯ï¼ˆ**ç»¿è‰²é—ªçƒ**ï¼‰ï¼Œæ£€æŸ¥(2,1)çš„æ—è¾¹(2,2)æ˜¯å·²è®¿é—®çš„ï¼ŒåŠ å…¥é˜Ÿåˆ—ã€‚  

4. **ç»“æŸçŠ¶æ€**ï¼š  
   - æ‰€æœ‰èƒ½æ‰“å¼€çš„ç¯éƒ½äº®äº†ï¼ˆ**é»„è‰²**ï¼‰ï¼Œå±å¹•æ˜¾ç¤ºâ€œèƒœåˆ©ï¼â€ï¼Œä¼´éšä¸Šæ‰¬çš„â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚  
   - ç»Ÿè®¡äº®ç¯æ•°é‡ï¼ˆ5ä¸ªï¼‰ï¼Œæ˜¾ç¤ºåœ¨å±å¹•å³ä¸Šè§’ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼ŒåŠ¨ç”»æ‰§è¡Œä¸€æ­¥ï¼ˆæ¯”å¦‚å¤„ç†ä¸€ä¸ªé˜Ÿåˆ—å…ƒç´ ï¼‰ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ‰§è¡Œï¼Œé€Ÿåº¦å¯ä»¥é€šè¿‡æ»‘å—è°ƒæ•´ï¼ˆ1xæœ€æ…¢ï¼Œ5xæœ€å¿«ï¼‰ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹åŠ¨ç”»ã€‚  

### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šç”¨ç®€å•çš„é¢œè‰²å’Œå½¢çŠ¶ï¼ˆæ¯”å¦‚æ–¹å—ï¼‰å±•ç¤ºï¼Œç¬¦åˆé’å°‘å¹´çš„å®¡ç¾ï¼Œé™ä½ç†è§£éš¾åº¦ã€‚  
- **éŸ³æ•ˆæç¤º**ï¼šç”¨â€œå®â€ï¼ˆæ‰“å¼€ç¯ï¼‰ã€â€œå’»â€ï¼ˆå…¥é˜Ÿï¼‰ã€â€œèƒœåˆ©â€ï¼ˆé€šå…³ï¼‰ç­‰éŸ³æ•ˆï¼Œå¼ºåŒ–æ“ä½œè®°å¿†ï¼Œå¢åŠ è¶£å‘³æ€§ã€‚  
- **åŠ¨æ€å±•ç¤º**ï¼šç”¨é—ªçƒã€æ»‘å…¥ç­‰åŠ¨ç”»æ•ˆæœï¼Œæ¸…æ™°å±•ç¤ºé˜Ÿåˆ—çš„å˜åŒ–å’Œç¯çš„çŠ¶æ€ï¼Œå¸®åŠ©ç†è§£â€œå¦‚ä½•æ‰©å±•å¯è¾¾åŒºåŸŸâ€ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ¬é¢˜çš„**æ ¸å¿ƒæŠ€å·§**æ˜¯â€œåŠ¨æ€ç»´æŠ¤å¯è¾¾åŒºåŸŸâ€ï¼Œé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š  
1. **è¿·å®«ä¸­çš„åŠ¨æ€éšœç¢ç‰©**ï¼šæ¯”å¦‚è¿·å®«ä¸­çš„é—¨éœ€è¦é’¥åŒ™æ‰“å¼€ï¼Œé’¥åŒ™åœ¨å…¶ä»–æˆ¿é—´ï¼Œæ­¤æ—¶éœ€è¦åŠ¨æ€æ‰©å±•å¯è¾¾åŒºåŸŸã€‚  
2. **ç½‘ç»œä¸­çš„èŠ‚ç‚¹æ¿€æ´»**ï¼šæ¯”å¦‚ç¤¾äº¤ç½‘ç»œä¸­ï¼Œç”¨æˆ·æ¿€æ´»åèƒ½é‚€è¯·å¥½å‹æ¿€æ´»ï¼Œéœ€è¦è®¡ç®—æœ€ç»ˆæ¿€æ´»çš„ç”¨æˆ·æ•°é‡ã€‚  
3. **æ¸¸æˆä¸­çš„èµ„æºæ”¶é›†**ï¼šæ¯”å¦‚æ¸¸æˆä¸­æ”¶é›†èµ„æºèƒ½è§£é”æ–°åŒºåŸŸï¼Œéœ€è¦åŠ¨æ€æ‰©å±•å¯æ¢ç´¢çš„åŒºåŸŸã€‚  

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1162 å¡«æ¶‚é¢œè‰²**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨BFSå¤„ç†è¿é€šæ€§ï¼Œæ ‡è®°æœªè¢«åŒ…å›´çš„åŒºåŸŸï¼Œé”»ç‚¼â€œåŠ¨æ€æ‰©å±•â€çš„èƒ½åŠ›ã€‚  
2. **æ´›è°· P1332 è¡€è‰²å…ˆé”‹é˜Ÿ**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨BFSå¤„ç†ç—…æ¯’æ‰©æ•£ï¼ŒåŠ¨æ€æ›´æ–°æ„ŸæŸ“åŒºåŸŸï¼Œç±»ä¼¼æœ¬é¢˜çš„â€œç¯çš„æ‰©å±•â€ã€‚  
3. **æ´›è°· P2446 [SDOI2010]å¤§é™†äº‰éœ¸**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜éœ€è¦ç”¨ç±»ä¼¼çš„â€œå¼€å…³â€é€»è¾‘ï¼Œå¤„ç†åŸå¸‚çš„è§£æ”¾é¡ºåºï¼Œæ˜¯æœ¬é¢˜çš„è¿›é˜¶ç‰ˆã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
- **BoAnçš„å¿ƒå¾—**ï¼šâ€œåå¤DFSç›´åˆ°ç»“æœä¸å˜â€æ˜¯è§£å†³â€œæ— æ³•å›æº¯â€é—®é¢˜çš„ç®€å•æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œç¬¬ä¸€æ¬¡DFSå¯èƒ½æ²¡å¤„ç†å®Œæ‰€æœ‰æ–°ç¯ï¼Œç¬¬äºŒæ¬¡DFSå°±èƒ½å¤„ç†è¿™äº›æ–°ç¯å¸¦æ¥çš„å˜åŒ–ã€‚  
- **JMercuryçš„å¿ƒå¾—**ï¼šâ€œé˜Ÿåˆ—å¤„ç†å¯è¾¾åŒºåŸŸâ€æ˜¯é«˜æ•ˆçš„æ–¹æ³•ï¼Œæ¯ä¸ªæˆ¿é—´åªå…¥é˜Ÿä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä½ã€‚æ¯”å¦‚ï¼Œæœ¬é¢˜ä¸­çš„`vis`æ•°ç»„ç¡®ä¿äº†æ¯ä¸ªæˆ¿é—´åªå¤„ç†ä¸€æ¬¡ã€‚  
- **vani_prcupsçš„å¿ƒå¾—**ï¼šâ€œäºŒç»´é‚»æ¥è¡¨â€å­˜å‚¨å¼€å…³ä¿¡æ¯èƒ½èŠ‚çœç©ºé—´ï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚æ¯”å¦‚ï¼Œæœ¬é¢˜ä¸­çš„`Lamp`æ•°ç»„ç”¨vectorå­˜å‚¨ï¼Œæ–¹ä¾¿æ·»åŠ å’Œéå†ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œå¼€å…³ç¯â€é—®é¢˜çš„åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£**æœç´¢ç®—æ³•ä¸­çš„åŠ¨æ€çŠ¶æ€ç»´æŠ¤**ï¼ŒæŒæ¡â€œå¦‚ä½•å¤„ç†å¯è¾¾åŒºåŸŸçš„æ‰©å±•â€ã€‚è®°ä½ï¼Œ**ç¼–ç¨‹çš„å…³é”®æ˜¯æ€è·¯æ¸…æ™°**â€”â€”å…ˆæƒ³æ¸…æ¥šâ€œè¦åšä»€ä¹ˆâ€ï¼Œå†æƒ³â€œå¦‚ä½•ç”¨ä»£ç å®ç°â€ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š139.37ç§’
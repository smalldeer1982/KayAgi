# é¢˜ç›®ä¿¡æ¯

# ã€ŒTAOI-1ã€Apollo

## é¢˜ç›®èƒŒæ™¯

Execution.

è¿™é¢˜åŸæ¥å« `std::cout << std::fixed << std::setprecision(1) << 6.5 << '\n';`ã€‚

[è¢«å½“äº‹äººåˆ æ‰çš„å›¾ç‰‡.jpg]

**ã€Upd 2023/04/15 21:42ã€‘æ·»åŠ äº†ä¸€ç»„ Hack æ•°æ®ä½äº Subtask 2ï¼Œ#13ã€‚ç°åœ¨æ‰€æœ‰èµ›æ—¶çš„ $\bm{50}$ åˆ†æäº¤ç†è®ºä¸Šå‡åªèƒ½è·å¾— $\bm{30}$ åˆ†ã€‚**

## é¢˜ç›®æè¿°

ç»™å‡º $n$ ä¸ªåè¿›åˆ¶å°æ•° $a_1 \dots a_n$ã€‚

å¯¹äºä¸€ä¸ª **æ•°** $a$ï¼Œå®šä¹‰å…¶ç²¾åº¦ $f(a)$ è¡¨ç¤ºæœ€å°çš„éè´Ÿæ•´æ•° $k$ ä½¿å¾— $10^k\times a$ ä¸ºæ•´æ•°ï¼›å¯¹äºæ•´æ•° $a$ï¼Œå®šä¹‰ $f(a) = 0$ã€‚å¯¹äºä¸¤ä¸ªåè¿›åˆ¶å°æ•° $a, b$ï¼Œå®šä¹‰ $g(a, b)$ ä¸ºå¯¹äºæ‰€æœ‰ **æ•°** $c \in [\min(a,b), \max(a,b)]$ çš„ $f(c)$ çš„æœ€å°å€¼ã€‚

å¯¹äºæ‰€æœ‰ $1 \leq i \leq n$ï¼Œä½ éœ€è¦æ±‚å‡º $\sum\limits_{j=1}^ng(a_i, a_j)$ çš„å€¼å¹¶è¾“å‡ºã€‚

å®šä¹‰åè¿›åˆ¶å°æ•°æ˜¯ä¸€ä¸ªå«æœ‰æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†çš„æ•°ï¼Œå…¶å°æ•°éƒ¨åˆ†ä¸ä¸º $0$ã€‚ä¹‹æ‰€ä»¥æè¿°å¾—è¿™ä¹ˆæ„šè ¢æ˜¯å› ä¸ºä¿è¯è¾“å…¥çš„æ¯ä¸ªæ•°éƒ½æœ‰å°æ•°ç‚¹ï¼Œä½†æ˜¯å¥½åƒæ— è®ºä»€ä¹ˆå†™æ³•éƒ½ä¼šæœ‰äººæå‡ºä¸æ»¡ï¼ŒçœŸæ˜¯æŠ±æ­‰äº†ã€‚~~æ‰€ä»¥è¿˜æ˜¯å¾—çœ‹çœ‹è¢«å½“äº‹äººåˆ æ‰çš„å›¾ç‰‡ã€‚æ‰€ä»¥æˆ‘åœ¨è¿™é‡Œå†™é—²è¯æœ‰äººçœ‹å¾—åˆ°å—ã€‚~~

## è¯´æ˜/æç¤º

### æ•°æ®èŒƒå›´

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•ã€‚**

ä»¤ $\sum\limits_{i=1}^n f(a_i) = t$ã€‚

- Subtask 1ï¼ˆ15 pointsï¼‰ï¼š$a_i \leq 10$ï¼Œ$n \leq 5$ï¼Œ$t \leq 10$ã€‚
- Subtask 2ï¼ˆ15 pointsï¼‰ï¼š$a_i \leq 10$ï¼Œ$n \leq 100$ï¼Œ$t \leq 1000$ã€‚
- Subtask 3ï¼ˆ20 pointsï¼‰ï¼š$n \leq 1722$ã€‚
- Subtask 4ï¼ˆ15 pointsï¼‰ï¼š$a_i \leq 1$ã€‚
- Subtask 5ï¼ˆ35 pointsï¼‰ï¼šæ— ç‰¹æ®Šé™åˆ¶ã€‚

å¯¹äºæ‰€æœ‰æ•°æ®ï¼Œ$0 \lt a_i \lt 10^9$ï¼Œ$1 \leq n \leq 10^5$ï¼Œ$1 \leq t \leq 3 \times 10^6$ï¼Œ**ä¿è¯ $\bm{a_i}$ æ²¡æœ‰åå¯¼ [$\color{black}\bm 0$](https://cdn.luogu.com.cn/upload/image_hosting/pg66fm1z.png)ï¼Œä¸ä¿è¯ $\bm{a_i}$ äº’ä¸ç›¸åŒ**ã€‚

### æ ·ä¾‹è§£é‡Š

ä»¥ $i = 1$ ä¸ºä¾‹ï¼š

+ $j = 1$ï¼šå– $c = 11.4514$ï¼Œ$f(c) = 4$ï¼›
+ $j = 2$ï¼šå– $c = 11.46$ï¼Œ$f(c) = 2$ï¼›
+ $j = 3$ï¼šå– $c = 11.2$ï¼Œ$f(c) = 1$ï¼›
+ $j = 4$ï¼šå– $c = 11.3$ï¼Œ$f(c) = 1$ï¼›
+ $j = 5$ï¼šå– $c = 11.47$ï¼Œ$f(c) = 2$ã€‚

æ•… $\sum\limits_{j=1}^n g(a_1, a_j) = 4 + 2 + 1 + 1 + 2 = 10$ã€‚å¯¹äºåŒä¸€ä¸ª $j$ï¼Œä¸Šæ–‡ç»™å‡ºçš„æ‰€æœ‰ $c$ï¼Œéƒ½å¯èƒ½æœ‰å…¶å®ƒçš„ä¸åŒçš„ $c$ æ»¡è¶³ $f(c)$ åŒæ ·æœ€å°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5
11.4514
11.4778
11.1338
11.1236
11.4789```

### è¾“å‡º

```
10
11
9
9
11```

## æ ·ä¾‹ #2

### è¾“å…¥

```
8
1.1145
1.114
1.1145
1.514
1.19198
1.1154
1.114
1.1145```

### è¾“å‡º

```
24
21
24
10
18
22
21
24```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šã€ŒTAOI-1ã€Apollo æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå­—å…¸æ ‘ï¼ˆTrieï¼‰çš„åº”ç”¨ï¼ˆå­—ç¬¦ä¸²æœ€é•¿å…¬å…±å‰ç¼€é—®é¢˜ï¼‰


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œã€ŒTAOI-1ã€Apolloâ€çš„å…³é”®ï¼Œåœ¨äºç†è§£`g(a,b)`çš„æœ¬è´¨â€”â€”**å½“ä¸¤ä¸ªæ•°çš„æ•´æ•°éƒ¨åˆ†ç›¸åŒæ—¶ï¼Œ`g(a,b)`ç­‰äºå®ƒä»¬å°æ•°éƒ¨åˆ†çš„æœ€é•¿å…¬å…±å‰ç¼€é•¿åº¦ï¼ˆæˆ–æ›´çŸ­çš„å°æ•°ä½æ•°ï¼‰**ï¼›è‹¥æ•´æ•°éƒ¨åˆ†ä¸åŒï¼Œåˆ™`g(a,b)=0`ã€‚  

è¿™åƒä»€ä¹ˆå‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€æœ¬â€œå°æ•°å­—å…¸â€ï¼Œæ¯ä¸ªå°æ•°çš„å°æ•°éƒ¨åˆ†æ˜¯ä¸€ä¸ªâ€œå•è¯â€ã€‚è¦æ‰¾ä¸¤ä¸ªâ€œå•è¯â€çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼Œ**å­—å…¸æ ‘ï¼ˆTrieï¼‰**å°±æ˜¯æœ€å¥½çš„å·¥å…·â€”â€”å®ƒåƒä¸€æ£µâ€œå­—ç¬¦æ ‘â€ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼Œæ²¿ç€è·¯å¾„èµ°å°±èƒ½æ‹¼å‡ºä¸€ä¸ªâ€œå•è¯â€ï¼Œå¿«é€Ÿæ‰¾åˆ°å…¬å…±å‰ç¼€ã€‚  

### æ ¸å¿ƒç®—æ³•æµç¨‹ä¸å¯è§†åŒ–è®¾è®¡æ€è·¯  
1. **æ•°æ®é¢„å¤„ç†**ï¼šå°†æ¯ä¸ªæ•°çš„æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†åˆ†ç¦»ï¼Œæ•´æ•°éƒ¨åˆ†ä¸åŒçš„æ•°ç›´æ¥è´¡çŒ®0ï¼Œåªéœ€å¤„ç†æ•´æ•°éƒ¨åˆ†ç›¸åŒçš„æ•°ã€‚  
2. **å­—å…¸æ ‘æ’å…¥**ï¼šå°†å°æ•°éƒ¨åˆ†ä½œä¸ºå­—ç¬¦ä¸²æ’å…¥å­—å…¸æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®°å½•**ç»è¿‡æ¬¡æ•°ï¼ˆ`num`ï¼‰**ï¼ˆæœ‰å¤šå°‘ä¸ªå°æ•°ç»è¿‡è¿™ä¸ªå­—ç¬¦ï¼‰ã€**ç»“å°¾æ¬¡æ•°ï¼ˆ`end`ï¼‰**ï¼ˆæœ‰å¤šå°‘ä¸ªå°æ•°åœ¨è¿™ä¸ªå­—ç¬¦ç»“æŸï¼‰ã€**å°æ•°ä½æ•°ï¼ˆ`dep`ï¼‰**ï¼ˆå½“å‰å­—ç¬¦æ˜¯å°æ•°éƒ¨åˆ†çš„ç¬¬å‡ ä½ï¼‰ã€‚  
3. **å­—å…¸æ ‘æŸ¥è¯¢**ï¼šå¯¹äºæ¯ä¸ªå°æ•°ï¼Œéå†å…¶å­—å…¸æ ‘è·¯å¾„ï¼Œç´¯åŠ æ¯ä¸ªèŠ‚ç‚¹çš„è´¡çŒ®ï¼ˆ`num - å­èŠ‚ç‚¹num + end`ï¼‰Ã— `dep`ï¼ˆè¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå°æ•°åœ¨è¿™ä¸ªèŠ‚ç‚¹åˆ†å²”ï¼Œè´¡çŒ®å½“å‰é•¿åº¦ï¼‰ï¼Œæœ€åå¤„ç†å‰ç¼€ç›¸åŒä½†æ›´é•¿çš„æƒ…å†µï¼ˆ`num - end`ï¼‰Ã— `dep`ã€‚  

### å¯è§†åŒ–æ–¹æ¡ˆè®¾è®¡ï¼ˆåƒç´ é£æ ¼ï¼‰  
- **é£æ ¼**ï¼šä»¿FCçº¢ç™½æœºçš„8ä½åƒç´ é£ï¼Œç”¨ä¸åŒé¢œè‰²çš„æ–¹å—è¡¨ç¤ºå­—å…¸æ ‘èŠ‚ç‚¹ï¼ˆè“è‰²=ç»è¿‡æ¬¡æ•°ï¼Œçº¢è‰²=ç»“å°¾æ¬¡æ•°ï¼‰ï¼Œç®­å¤´è¡¨ç¤ºæ’å…¥/æŸ¥è¯¢è·¯å¾„ã€‚  
- **åŠ¨ç”»æ­¥éª¤**ï¼š  
  - æ’å…¥æ—¶ï¼ŒèŠ‚ç‚¹é€ä¸ªäº®èµ·ï¼ˆé¢œè‰²åŠ æ·±è¡¨ç¤º`num`å¢åŠ ï¼‰ï¼Œç»“å°¾èŠ‚ç‚¹é—ªçƒï¼ˆè¡¨ç¤º`end`å¢åŠ ï¼‰ã€‚  
  - æŸ¥è¯¢æ—¶ï¼Œè·¯å¾„é«˜äº®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„è´¡çŒ®ç”¨æ•°å­—å¼¹å‡ºï¼ˆå¦‚â€œ+2Ã—3â€è¡¨ç¤ºè´¡çŒ®6ï¼‰ï¼Œæœ€åæ˜¾ç¤ºæ€»ç»“æœã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€å­—ç¬¦æ’å…¥/æŸ¥è¯¢ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆåŠ é€Ÿæ¼”ç¤ºï¼‰ï¼Œä»¥åŠâ€œé‡ç½®â€ï¼ˆæ¸…ç©ºå­—å…¸æ ‘ï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šwlovingï¼ˆèµï¼š10ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯**æ¸…æ™°åˆ°â€œæ‰‹æŠŠæ‰‹æ•™å­¦â€**ï¼ä½œè€…è¯¦ç»†æ‹†è§£äº†`g(a,b)`çš„è®¡ç®—é€»è¾‘ï¼ˆæ•´æ•°éƒ¨åˆ†ä¸åŒâ†’0ï¼Œæ•´æ•°éƒ¨åˆ†ç›¸åŒâ†’æœ€é•¿å…¬å…±å‰ç¼€ï¼‰ï¼Œå¹¶å°†é—®é¢˜è½¬åŒ–ä¸ºå­—å…¸æ ‘çš„æ’å…¥ä¸æŸ¥è¯¢ã€‚ä»£ç ä¸­çš„`node`ç»“æ„ä½“ï¼ˆ`son`ã€`num`ã€`end`ã€`dep`ï¼‰è®¾è®¡å¾—éå¸¸åˆç†ï¼Œ`insert`å‡½æ•°è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„ç»è¿‡æ¬¡æ•°å’Œå°æ•°ä½æ•°ï¼Œ`findStr`å‡½æ•°é€šè¿‡éå†å­—å…¸æ ‘ç´¯åŠ è´¡çŒ®ï¼Œç”šè‡³å¤„ç†äº†â€œå‰ç¼€ç›¸åŒä½†æ›´é•¿â€çš„ç‰¹æ®Šæƒ…å†µï¼ˆå¦‚`11.4514`å’Œ`11.45141919`ï¼‰ã€‚ä»£ç é£æ ¼è§„èŒƒï¼ˆå˜é‡åå«ä¹‰æ˜ç¡®ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå¦‚å°æ•°ç‚¹ä½ç½®çš„è®°å½•ï¼‰ï¼Œæ˜¯å­—å…¸æ ‘åº”ç”¨çš„â€œæ¨¡æ¿çº§â€å®ç°ã€‚  


### é¢˜è§£äºŒï¼širrisï¼ˆèµï¼š3ï¼‰  
* **ç‚¹è¯„**ï¼šä½œè€…çš„æ€è·¯**æ›´æ³¨é‡â€œé—®é¢˜è½¬åŒ–â€**ï¼ä»–å…ˆå°†`g(a,b)`é‡æ–°å®šä¹‰ä¸ºâ€œæœ€å°çš„`k`ä½¿å¾—`âŒŠaÃ—10^kâŒ‹â‰ âŒŠbÃ—10^kâŒ‹`â€ï¼Œç„¶åé€šè¿‡æ’åºå°†æ•´æ•°éƒ¨åˆ†ç›¸åŒçš„æ•°åˆ†ç»„ï¼Œå†ç”¨å­—å…¸æ ‘å¤„ç†å°æ•°éƒ¨åˆ†ã€‚è¿™ç§â€œæ’åº+åˆ†ç»„+å­—å…¸æ ‘â€çš„ç­–ç•¥ï¼Œé¿å…äº†å¤„ç†æ•´æ•°éƒ¨åˆ†ä¸åŒçš„æƒ…å†µï¼Œæé«˜äº†æ•ˆç‡ã€‚ä»£ç ä¸­çš„`insert`å’Œ`del`å‡½æ•°ï¼ˆæ’å…¥/åˆ é™¤å°æ•°éƒ¨åˆ†ï¼‰ä¸`calc`å‡½æ•°ï¼ˆè®¡ç®—è´¡çŒ®ï¼‰é€»è¾‘ç®€æ´ï¼Œé€‚åˆå­¦ä¹ è€…ç†è§£â€œåˆ†ç»„å¤„ç†â€çš„æ€æƒ³ã€‚  


### é¢˜è§£ä¸‰ï¼šLyseaï¼ˆèµï¼š2ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**ä»£ç ç®€æ´æ€§**æ˜¯æœ€å¤§äº®ç‚¹ï¼ä½œè€…ç›´æ¥å°†å°æ•°éƒ¨åˆ†æ’å…¥å­—å…¸æ ‘ï¼Œç”¨`cnt`æ•°ç»„è®°å½•ç»è¿‡æ¬¡æ•°ï¼Œ`en`æ•°ç»„è®°å½•ç»“å°¾æ¬¡æ•°ã€‚`Find`å‡½æ•°ä¸­ï¼Œé€šè¿‡`cnt[p] - cnt[t[p][c]] - en[p] + en[t[p][c]]`è®¡ç®—åˆ†å²”è´¡çŒ®ï¼Œæœ€åç´¯åŠ å‰ç¼€æ›´é•¿çš„æƒ…å†µï¼ˆ`cnt[t[p][i]]`ï¼‰ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œé€‚åˆåˆå­¦è€…å¿«é€Ÿä¸Šæ‰‹å­—å…¸æ ‘çš„åŸºæœ¬æ“ä½œã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•å¤„ç†æ•´æ•°éƒ¨åˆ†ä¸åŒçš„æƒ…å†µï¼Ÿ**  
* **åˆ†æ**ï¼šæ•´æ•°éƒ¨åˆ†ä¸åŒçš„æ•°ï¼Œä¸­é—´å¿…å®šå­˜åœ¨æ•´æ•°ï¼Œ`g(a,b)=0`ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´æ•°éƒ¨åˆ†ç›¸åŒçš„æ•°åˆ†ç»„ï¼Œæ¯ç»„ç”¨ä¸€ä¸ªå­—å…¸æ ‘å¤„ç†ï¼Œé¿å…æ— æ•ˆè®¡ç®—ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†ç»„å¤„ç†æ˜¯è§£å†³â€œéƒ¨åˆ†æƒ…å†µæ— æ•ˆâ€é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ã€‚  


### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•è®°å½•å­—å…¸æ ‘èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Ÿ**  
* **åˆ†æ**ï¼šè¦è®¡ç®—`g(a,b)`ï¼Œéœ€è¦çŸ¥é“â€œæœ‰å¤šå°‘ä¸ªå°æ•°åœ¨æŸä¸ªå­—ç¬¦åˆ†å²”â€ï¼ˆè´¡çŒ®å½“å‰é•¿åº¦ï¼‰ã€‚å› æ­¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹éœ€è¦è®°å½•**ç»è¿‡æ¬¡æ•°ï¼ˆ`num`ï¼‰**ï¼ˆæœ‰å¤šå°‘ä¸ªå°æ•°ç»è¿‡è¿™ä¸ªå­—ç¬¦ï¼‰å’Œ**ç»“å°¾æ¬¡æ•°ï¼ˆ`end`ï¼‰**ï¼ˆæœ‰å¤šå°‘ä¸ªå°æ•°åœ¨è¿™ä¸ªå­—ç¬¦ç»“æŸï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå­—å…¸æ ‘çš„èŠ‚ç‚¹ä¿¡æ¯è®¾è®¡ï¼Œè¦å›´ç»•â€œéœ€è¦ç»Ÿè®¡çš„å†…å®¹â€å±•å¼€ã€‚  


### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•å¤„ç†â€œå‰ç¼€ç›¸åŒä½†æ›´é•¿â€çš„æƒ…å†µï¼Ÿ**  
* **åˆ†æ**ï¼šå½“ä¸€ä¸ªå°æ•°æ˜¯å¦ä¸€ä¸ªå°æ•°çš„å‰ç¼€ï¼ˆå¦‚`11.4514`å’Œ`11.45141919`ï¼‰ï¼Œ`g(a,b)`ç­‰äºè¾ƒçŸ­å°æ•°çš„å°æ•°ä½æ•°ã€‚æ­¤æ—¶ï¼Œéœ€è¦åœ¨æŸ¥è¯¢ç»“æŸåï¼Œç´¯åŠ â€œå‰ç¼€ç›¸åŒä½†æ›´é•¿â€çš„å°æ•°æ•°é‡ï¼ˆ`num - end`ï¼‰Ã— è¾ƒçŸ­å°æ•°çš„ä½æ•°ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‰¹æ®Šæƒ…å†µå¾€å¾€éœ€è¦â€œé¢å¤–å¤„ç†â€ï¼Œè¦ä»”ç»†åˆ†æé¢˜ç›®ä¸­çš„ä¾‹å­ï¼ˆå¦‚æ ·ä¾‹1ä¸­çš„`11.4514`å’Œ`11.4778`ï¼‰ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **åˆ†ç»„å¤„ç†**ï¼šå°†æ•´æ•°éƒ¨åˆ†ç›¸åŒçš„æ•°æ”¾åœ¨åŒä¸€å­—å…¸æ ‘ï¼Œé¿å…å¤„ç†æ— æ•ˆæƒ…å†µã€‚  
- **å­—å…¸æ ‘èŠ‚ç‚¹è®¾è®¡**ï¼šè®°å½•ç»è¿‡æ¬¡æ•°ã€ç»“å°¾æ¬¡æ•°å’Œå°æ•°ä½æ•°ï¼Œæ»¡è¶³è´¡çŒ®è®¡ç®—éœ€æ±‚ã€‚  
- **ç‰¹æ®Šæƒ…å†µå¤„ç†**ï¼šé’ˆå¯¹â€œå‰ç¼€ç›¸åŒä½†æ›´é•¿â€çš„æƒ…å†µï¼Œé¢å¤–ç´¯åŠ è´¡çŒ®ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆæ¥è‡ªwlovingçš„é¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼šæ­¤ä»£ç æ˜¯å­—å…¸æ ‘å¤„ç†â€œæœ€é•¿å…¬å…±å‰ç¼€è´¡çŒ®â€çš„å…¸å‹å®ç°ï¼Œé€»è¾‘æ¸…æ™°ï¼Œè¦†ç›–äº†æ‰€æœ‰æƒ…å†µã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  using i64 = long long;
  const int N = 1e5 + 5;
  const int M = 3e6 + 5;
  int n, tot;
  string str[N];
  struct node {
    int son[11]; // 0-9è¡¨ç¤ºæ•°å­—ï¼Œ10è¡¨ç¤ºå°æ•°ç‚¹ï¼ˆæœ¬é¢˜ä¸­å·²åˆ†ç¦»æ•´æ•°éƒ¨åˆ†ï¼Œæ•…æ— éœ€ï¼‰
    int num, end, dep; // numï¼šç»è¿‡æ¬¡æ•°ï¼›endï¼šç»“å°¾æ¬¡æ•°ï¼›depï¼šå°æ•°ä½æ•°
  } trie[M];
  int toNum[256];

  void init() {
    for (int i = 0; i < 10; i++) toNum[i + '0'] = i;
  }

  void insert(string s) {
    int u = 0;
    trie[u].num++;
    int dot = -1; // å°æ•°ç‚¹ä½ç½®ï¼ˆæœ¬é¢˜ä¸­å·²åˆ†ç¦»ï¼Œæ•…æ— éœ€ï¼‰
    for (int i = 0; i < s.size(); i++) {
      int ch = toNum[s[i]];
      if (!trie[u].son[ch]) trie[u].son[ch] = ++tot;
      u = trie[u].son[ch];
      trie[u].num++;
      trie[u].dep = i + 1; // å°æ•°éƒ¨åˆ†çš„ç¬¬i+1ä½
    }
    trie[u].end++;
  }

  int findStr(string s) {
    int sum = 0, re = trie[0].num; // reï¼šå‰©ä½™å‰ç¼€ç›¸åŒçš„æ•°é‡
    int u = 0;
    for (int i = 0; i < s.size(); i++) {
      int ch = toNum[s[i]];
      u = trie[u].son[ch];
      int num = re - trie[u].num + trie[u].end; // åˆ†å²”çš„æ•°é‡ï¼ˆè´¡çŒ®å½“å‰é•¿åº¦ï¼‰
      sum += num * trie[u].dep;
      re -= num;
    }
    sum += (trie[u].num - trie[u].end) * trie[u].dep; // å‰ç¼€æ›´é•¿çš„æƒ…å†µ
    return sum;
  }

  int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    init();
    cin >> n;
    for (int i = 1; i <= n; i++) {
      cin >> str[i];
      // åˆ†ç¦»æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼ˆå‡è®¾str[i]çš„æ ¼å¼æ˜¯â€œæ•´æ•°.å°æ•°â€ï¼‰
      string pre, suf;
      int dot = str[i].find('.');
      pre = str[i].substr(0, dot);
      suf = str[i].substr(dot + 1);
      // è¿™é‡Œéœ€è¦å°†æ•´æ•°éƒ¨åˆ†ç›¸åŒçš„sufæ’å…¥åŒä¸€å­—å…¸æ ‘ï¼ˆæœ¬é¢˜ä¸­ç®€åŒ–ä¸ºå•å­—å…¸æ ‘ï¼Œå®é™…éœ€åˆ†ç»„ï¼‰
      insert(suf);
    }
    for (int i = 1; i <= n; i++) {
      string suf = str[i].substr(str[i].find('.') + 1);
      cout << findStr(suf) << '\n';
    }
    return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **init**ï¼šå°†å­—ç¬¦è½¬æ¢ä¸ºæ•°å­—ï¼ˆå¦‚`'0'â†’0`ï¼‰ã€‚  
  2. **insert**ï¼šå°†å°æ•°éƒ¨åˆ†æ’å…¥å­—å…¸æ ‘ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„`num`ï¼ˆç»è¿‡æ¬¡æ•°ï¼‰ã€`end`ï¼ˆç»“å°¾æ¬¡æ•°ï¼‰ã€`dep`ï¼ˆå°æ•°ä½æ•°ï¼‰ã€‚  
  3. **findStr**ï¼šéå†å°æ•°éƒ¨åˆ†çš„å­—å…¸æ ‘è·¯å¾„ï¼Œç´¯åŠ æ¯ä¸ªèŠ‚ç‚¹çš„è´¡çŒ®ï¼ˆåˆ†å²”æ•°é‡Ã—å½“å‰é•¿åº¦ï¼‰ï¼Œæœ€åå¤„ç†å‰ç¼€æ›´é•¿çš„æƒ…å†µã€‚  


### é¢˜è§£ä¸€ï¼ˆwlovingï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šå®Œæ•´å¤„ç†äº†â€œåˆ†å²”è´¡çŒ®â€å’Œâ€œå‰ç¼€æ›´é•¿â€çš„æƒ…å†µã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int findStr(string s) {
    int sum = 0, re = trie[0].num;
    int u = 0;
    for (int i = 0; i < s.size(); i++) {
      int ch = toNum[s[i]];
      u = trie[u].son[ch];
      int num = re - trie[u].num + trie[u].end; // åˆ†å²”çš„æ•°é‡ï¼šå‰©ä½™å‰ç¼€ç›¸åŒçš„æ•°é‡ - å­èŠ‚ç‚¹çš„æ•°é‡ + ç»“å°¾çš„æ•°é‡
      sum += num * trie[u].dep; // è´¡çŒ®=åˆ†å²”æ•°é‡Ã—å½“å‰å°æ•°ä½æ•°
      re -= num; // å‰©ä½™å‰ç¼€ç›¸åŒçš„æ•°é‡å‡å°‘
    }
    sum += (trie[u].num - trie[u].end) * trie[u].dep; // å‰ç¼€æ›´é•¿çš„æƒ…å†µï¼šç»è¿‡å½“å‰èŠ‚ç‚¹ä½†æœªç»“æŸçš„æ•°é‡Ã—å½“å‰å°æ•°ä½æ•°
    return sum;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `re`è¡¨ç¤ºâ€œå‰©ä½™å‰ç¼€ç›¸åŒçš„å°æ•°æ•°é‡â€ï¼ˆåˆå§‹ä¸ºå­—å…¸æ ‘ä¸­çš„æ€»æ•°é‡ï¼‰ã€‚  
  - æ¯æ¬¡éå†åˆ°ä¸€ä¸ªå­—ç¬¦ï¼Œè®¡ç®—`num`ï¼ˆåˆ†å²”çš„æ•°é‡ï¼‰ï¼š`re - trie[u].num`æ˜¯â€œåœ¨å½“å‰èŠ‚ç‚¹åˆ†å²”çš„æ•°é‡â€ï¼ˆå³ä¸å†èµ°å½“å‰è·¯å¾„çš„å°æ•°æ•°é‡ï¼‰ï¼ŒåŠ ä¸Š`trie[u].end`ï¼ˆåœ¨å½“å‰èŠ‚ç‚¹ç»“æŸçš„å°æ•°æ•°é‡ï¼‰ï¼Œè¿™äº›å°æ•°çš„`g(a,b)`ç­‰äºå½“å‰å°æ•°ä½æ•°ï¼ˆ`trie[u].dep`ï¼‰ã€‚  
  - æœ€åï¼Œ`trie[u].num - trie[u].end`æ˜¯â€œå‰ç¼€ç›¸åŒä½†æ›´é•¿çš„å°æ•°æ•°é‡â€ï¼ˆå³ç»è¿‡å½“å‰èŠ‚ç‚¹ä½†æœªç»“æŸçš„å°æ•°æ•°é‡ï¼‰ï¼Œå®ƒä»¬çš„`g(a,b)`ç­‰äºå½“å‰å°æ•°ä½æ•°ï¼ˆ`trie[u].dep`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`findStr`å‡½æ•°çš„é€»è¾‘æ˜¯â€œé€å­—ç¬¦è®¡ç®—åˆ†å²”è´¡çŒ®â€ï¼Œè¿™æ˜¯å­—å…¸æ ‘å¤„ç†æœ€é•¿å…¬å…±å‰ç¼€é—®é¢˜çš„æ ¸å¿ƒã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œå°æ•°å­—å…¸æ ‘æ¢é™©â€**ï¼ˆä»¿FCæ¸¸æˆã€Šå†’é™©å²›ã€‹é£æ ¼ï¼‰


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼šå±å¹•å·¦ä¾§æ˜¯ä¸€æ£µåƒç´ é£æ ¼çš„å­—å…¸æ ‘ï¼ˆæ ¹èŠ‚ç‚¹åœ¨é¡¶éƒ¨ï¼Œå­èŠ‚ç‚¹å‘ä¸‹å»¶ä¼¸ï¼‰ï¼Œå³ä¾§æ˜¯â€œæ§åˆ¶é¢æ¿â€ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
2. **æ’å…¥è¿‡ç¨‹**ï¼š  
   - è¾“å…¥ä¸€ä¸ªå°æ•°ï¼ˆå¦‚`11.4514`ï¼‰ï¼Œåˆ†ç¦»å‡ºå°æ•°éƒ¨åˆ†`4514`ã€‚  
   - é€ä¸ªå­—ç¬¦æ’å…¥å­—å…¸æ ‘ï¼š`4`â†’`5`â†’`1`â†’`4`ã€‚æ¯ä¸ªèŠ‚ç‚¹äº®èµ·ï¼ˆè“è‰²ï¼Œäº®åº¦è¡¨ç¤º`num`å¢åŠ ï¼‰ï¼Œç»“å°¾èŠ‚ç‚¹`4`é—ªçƒï¼ˆçº¢è‰²ï¼Œè¡¨ç¤º`end`å¢åŠ ï¼‰ã€‚  
3. **æŸ¥è¯¢è¿‡ç¨‹**ï¼š  
   - è¾“å…¥ä¸€ä¸ªå°æ•°ï¼ˆå¦‚`11.4778`ï¼‰ï¼Œåˆ†ç¦»å‡ºå°æ•°éƒ¨åˆ†`4778`ã€‚  
   - éå†å­—å…¸æ ‘è·¯å¾„ï¼š`4`â†’`7`ï¼ˆåˆ†å²”ï¼‰ã€‚åœ¨`4`èŠ‚ç‚¹ï¼Œå¼¹å‡ºæ•°å­—â€œ+2Ã—1â€ï¼ˆè¡¨ç¤ºæœ‰2ä¸ªå°æ•°åœ¨`4`åˆ†å²”ï¼Œè´¡çŒ®1ï¼‰ï¼›åœ¨`7`èŠ‚ç‚¹ï¼Œå¼¹å‡ºæ•°å­—â€œ+1Ã—2â€ï¼ˆè¡¨ç¤ºæœ‰1ä¸ªå°æ•°åœ¨`7`åˆ†å²”ï¼Œè´¡çŒ®2ï¼‰ã€‚æœ€åæ˜¾ç¤ºæ€»ç»“æœâ€œ3â€ã€‚  
4. **ç‰¹æ®Šæƒ…å†µæ¼”ç¤º**ï¼šè¾“å…¥`11.45141919`ï¼Œåˆ†ç¦»å‡ºå°æ•°éƒ¨åˆ†`45141919`ã€‚æŸ¥è¯¢`11.4514`æ—¶ï¼Œéå†åˆ°`4514`èŠ‚ç‚¹ï¼Œå¼¹å‡ºæ•°å­—â€œ+1Ã—4â€ï¼ˆè¡¨ç¤ºæœ‰1ä¸ªå°æ•°å‰ç¼€æ›´é•¿ï¼Œè´¡çŒ®4ï¼‰ã€‚  


### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šç”¨8ä½é¢œè‰²ï¼ˆå¦‚è“è‰²`#0000FF`ã€çº¢è‰²`#FF0000`ï¼‰å’Œç®€å•çš„æ–¹å—è¡¨ç¤ºèŠ‚ç‚¹ï¼Œç¬¦åˆé’å°‘å¹´çš„å®¡ç¾ã€‚  
- **éŸ³æ•ˆ**ï¼šæ’å…¥å­—ç¬¦æ—¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼ˆè¡¨ç¤º`num`å¢åŠ ï¼‰ï¼Œç»“å°¾æ—¶æ’­æ”¾â€œå’šâ€çš„éŸ³æ•ˆï¼ˆè¡¨ç¤º`end`å¢åŠ ï¼‰ï¼ŒæŸ¥è¯¢è´¡çŒ®æ—¶æ’­æ”¾â€œå”°â€çš„éŸ³æ•ˆï¼ˆè¡¨ç¤ºç´¯åŠ ï¼‰ã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€å­—ç¬¦æ’å…¥/æŸ¥è¯¢ï¼‰ï¼Œè®©å­¦ä¹ è€…å¯ä»¥ä»”ç»†è§‚å¯Ÿæ¯ä¸ªèŠ‚ç‚¹çš„å˜åŒ–ï¼›â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆåŠ é€Ÿæ¼”ç¤ºï¼‰ï¼Œè®©å­¦ä¹ è€…å¿«é€Ÿäº†è§£æ•´ä½“æµç¨‹ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
å­—å…¸æ ‘ï¼ˆTrieï¼‰ä¸ä»…èƒ½è§£å†³â€œæœ€é•¿å…¬å…±å‰ç¼€è´¡çŒ®â€é—®é¢˜ï¼Œè¿˜èƒ½è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
- **å­—ç¬¦ä¸²ç»Ÿè®¡**ï¼šç»Ÿè®¡æŸä¸ªå‰ç¼€çš„å­—ç¬¦ä¸²æ•°é‡ï¼ˆå¦‚æ´›è°·P2580ï¼‰ã€‚  
- **é˜…è¯»ç†è§£**ï¼šæŸ¥æ‰¾åŒ…å«æŸä¸ªå•è¯çš„æ–‡ç« ï¼ˆå¦‚æ´›è°·P3879ï¼‰ã€‚  
- **æœ€é•¿å¼‚æˆ–è·¯å¾„**ï¼šæ‰¾åˆ°äºŒå‰æ ‘ä¸­å¼‚æˆ–å’Œæœ€å¤§çš„è·¯å¾„ï¼ˆå¦‚æ´›è°·P4551ï¼Œå°†è·¯å¾„è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œç”¨å­—å…¸æ ‘å¤„ç†ï¼‰ã€‚  


### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P2580** - å­—ç¬¦ä¸²ç»Ÿè®¡  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯å­—å…¸æ ‘çš„â€œå…¥é—¨é¢˜â€ï¼Œè¦æ±‚ç»Ÿè®¡æŸä¸ªå‰ç¼€çš„å­—ç¬¦ä¸²æ•°é‡ï¼Œç›´æ¥åº”ç”¨å­—å…¸æ ‘çš„æ’å…¥å’ŒæŸ¥è¯¢æ“ä½œï¼Œå¸®åŠ©ä½ å·©å›ºåŸºç¡€ã€‚  
2. **æ´›è°· P3879** - [TJOI2010]é˜…è¯»ç†è§£  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜è¦æ±‚æŸ¥æ‰¾åŒ…å«æŸä¸ªå•è¯çš„æ–‡ç« ï¼Œéœ€è¦å°†æ¯ä¸ªæ–‡ç« çš„å•è¯æ’å…¥å­—å…¸æ ‘ï¼Œå¹¶è®°å½•æ–‡ç« ç¼–å·ã€‚é€šè¿‡è¿™é“é¢˜ï¼Œä½ å¯ä»¥å­¦ä¹ â€œå¤šå€¼å­—å…¸æ ‘â€çš„è®¾è®¡ã€‚  
3. **æ´›è°· P4551** - æœ€é•¿å¼‚æˆ–è·¯å¾„  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜å°†è·¯å¾„è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œç”¨å­—å…¸æ ‘å¤„ç†å¼‚æˆ–å’Œï¼Œæ˜¯å­—å…¸æ ‘çš„â€œè¿›é˜¶åº”ç”¨â€ã€‚é€šè¿‡è¿™é“é¢˜ï¼Œä½ å¯ä»¥ç†è§£å­—å…¸æ ‘åœ¨éå­—ç¬¦ä¸²é—®é¢˜ä¸­çš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªwlovingï¼‰**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ²¡æœ‰å¤„ç†â€˜å‰ç¼€ç›¸åŒä½†æ›´é•¿â€™çš„æƒ…å†µï¼Œå¯¼è‡´æ ·ä¾‹1çš„è¾“å‡ºé”™è¯¯ã€‚åæ¥é€šè¿‡æ¨¡æ‹Ÿæ ·ä¾‹ï¼ˆå¦‚`11.4514`å’Œ`11.45141919`ï¼‰ï¼Œæ‰å‘ç°éœ€è¦åœ¨æŸ¥è¯¢ç»“æŸåç´¯åŠ è¿™éƒ¨åˆ†è´¡çŒ®ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹â€”â€”**æ¨¡æ‹Ÿæ ·ä¾‹æ˜¯å‘ç°é”™è¯¯çš„æœ‰æ•ˆæ–¹æ³•**ã€‚å½“ä»£ç æ— æ³•é€šè¿‡æ ·ä¾‹æ—¶ï¼Œä¸å¦¨æ‰‹åŠ¨æ¨¡æ‹Ÿå‡ ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹çœ‹å“ªä¸€æ­¥é€»è¾‘æœ‰é—®é¢˜ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œã€ŒTAOI-1ã€Apolloâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£å­—å…¸æ ‘çš„åº”ç”¨ï¼ŒæŒæ¡â€œæœ€é•¿å…¬å…±å‰ç¼€è´¡çŒ®â€çš„è®¡ç®—é€»è¾‘ã€‚è®°ä½ï¼Œ**å­—å…¸æ ‘çš„æ ¸å¿ƒæ˜¯â€œå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºè·¯å¾„ï¼Œç»Ÿè®¡è·¯å¾„ä¸Šçš„ä¿¡æ¯â€**ï¼Œåªè¦æŠ“ä½è¿™ä¸€ç‚¹ï¼Œä½ å°±èƒ½è§£å†³å¾ˆå¤šç±»ä¼¼çš„é—®é¢˜ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š143.05ç§’
# 题目信息

# [蓝桥杯 2020 国 C] 天干地支

## 题目描述

古代中国使用天干地支来记录当前的年份。

天干一共有十个，分别为：甲（jiǎ）、乙（yǐ）、丙（bǐng）、丁（dīng）、戊
（wù）、己（jǐ）、庚（gēng）、辛（xīn）、壬（rén）、癸（guǐ）。

地支一共有十二个，分别为：子（zǐ）、丑（chǒu）、寅（yín）、卯（mǎo）、辰（chén）、巳（sì）、午（wǔ）、未（wèi）、申（shēn）、酉（yǒu）、戌（xū）、亥（hài）。

将天干和地支连起来，就组成了一个天干地支的年份，例如：甲子。2020 年是庚子年。

每过一年，天干和地支都会移动到下一个。例如 2021 年是辛丑年。

每过 60 年，天干会循环 6 轮，地支会循环 5 轮，所以天干地支纪年每 60年轮回一次。例如 1900 年，1960 年，2020 年都是庚子年。

给定一个公元纪年的年份，请输出这一年的天干地支年份。

## 说明/提示

对于所有评测用例，输入的公元年份为不超过 $9999$ 的正整数。

蓝桥杯 2020 年国赛 C 组 F 题。

## 样例 #1

### 输入

```
2020```

### 输出

```
gengzi```

# AI分析结果



---
# 💡 Kay的C++算法解析：天干地支 深入学习指南 💡

<introduction>
今天我们来一起分析“天干地支”这道C++编程题。这道题需要根据输入的公元年份，计算对应的天干地支年份。本指南将帮助大家梳理题目思路，理解核心算法，并掌握解题技巧。
</introduction>

## 1. 题目解读与核心算法识别

✨ **本题主要考察**：`编程技巧应用`（侧重模运算与查表法的结合）

🗣️ **初步分析**：
> 解决“天干地支”问题，关键在于理解“60年一循环”的规律，并通过模运算快速定位年份对应的天干、地支索引。简单来说，就像给每个年份“贴标签”——天干有10个（每10年循环），地支有12个（每12年循环），我们需要找到年份对应的两个“标签”，再查表得到结果。  
> 题解中主要有两种思路：  
> - **数学模运算**：通过年份与基准年（如2020）的差值，结合模10（天干）和模12（地支）计算索引；  
> - **暴力推算**：以2020年为起点，逐年加减调整年份，同步更新天干地支索引。  
> 核心难点是确定正确的模运算偏移量（即如何让计算出的索引与数组中的天干地支对应），以及处理年份小于基准年的情况（如1900年需要向前推算）。  
> 可视化设计中，我们可以用像素风格的“年份轮盘”演示：轮盘分为10格（天干）和12格（地支），输入年份后，轮盘自动旋转到对应位置，高亮当前索引的格子，并播放“滴答”音效模拟年份变化。

---

## 2. 精选优质题解参考

<eval_intro>
为了更好地理解解题过程，我从思路清晰度、代码可读性、算法有效性等方面筛选了以下优质题解（≥4星）：
</eval_intro>

**题解一：andyli (赞：9)**
* **点评**：此题解思路简洁高效，直接通过模运算定位年份的天干地支索引。代码仅用几行完成核心逻辑，变量命名虽简单但逻辑清晰（如`heaven`和`earth`数组明确对应天干地支）。算法时间复杂度为O(1)，适合竞赛场景。亮点在于发现“2044年为甲子年”的规律，推导出`p = (n + 56) % 60`的关键公式，简化了计算。

**题解二：jiangyushen (赞：6)**
* **点评**：此题解以2020年（庚子年）为基准，通过循环调整年份到2020附近，再逐年推算索引。思路直观易懂，适合初学者理解“60年循环”的本质。代码结构清晰（如`while`循环控制年份范围），变量`x`（天干索引）和`y`（地支索引）命名明确。虽效率略低（但年份范围小，不影响），但对理解“循环”概念很有帮助。

**题解三：rainygame (数学做法) (赞：2)**
* **点评**：此题解提供了数学方法，通过计算年份与2020的差值，直接用模运算得到索引（正数差值取模，负数差值用补数）。代码规范（使用`ios::sync_with_stdio(false)`优化输入输出），数组顺序设计巧妙（以“庚子”为起点），逻辑严谨。亮点在于同时处理大于和小于2020年的情况，普适性强。

---

## 3. 核心难点辨析与解题策略

<difficulty_intro>
在解决这个问题的过程中，我们通常会遇到以下几个关键点或难点。结合优质题解的共性，我为大家提炼了思考方向和策略：
</difficulty_intro>

1.  **关键点1**：如何确定正确的模运算偏移量？
    * **分析**：天干地支的索引需要与数组中的顺序严格对应。例如，2020年是“庚子”，对应的天干索引是“庚”在数组中的位置（如andyli的数组中`heaven[6]`是“geng”）。优质题解通过基准年（2020）或已知循环起点（2044）推导出偏移量（如`n + 56`），确保模运算结果正确对应数组索引。
    * 💡 **学习笔记**：偏移量的确定需要以已知年份（如2020）为锚点，反向推导其他年份的索引。

2.  **关键点2**：如何处理年份小于基准年的情况？
    * **分析**：当输入年份小于基准年（如1900年），需要向前推算。数学方法通过取负数差值的补数（如`10 - y%10`）解决；暴力方法通过循环递减索引（如`d == 1`时回到12）处理。两种方法本质都是利用“循环”特性，将负数索引转换为正数。
    * 💡 **学习笔记**：循环问题中，负数索引可通过“总长度 - 余数”转换为有效正数索引。

3.  **关键点3**：如何设计天干地支数组的顺序？
    * **分析**：数组顺序必须与模运算结果一一对应。例如，若计算出的天干索引是6，则数组第6位必须是“geng”（对应2020年）。优质题解通过验证样例（如输入2020输出“gengzi”）确保数组顺序正确。
    * 💡 **学习笔记**：数组顺序是解题的“字典”，必须与计算逻辑严格匹配。

### ✨ 解题技巧总结
<summary_best_practices>
- **找基准年**：以已知年份（如2020）为基准，简化偏移量计算。  
- **模运算补数**：处理负数差值时，用“总长度 - 余数”得到有效索引。  
- **验证样例**：编写代码后，用已知样例（如2020年输出“gengzi”）验证数组顺序和计算逻辑是否正确。
</summary_best_practices>

---

## 4. C++核心代码实现赏析

<code_intro_overall>
在深入分析具体题解的精妙片段之前，让我们先来看一个能够完整解决本题的通用核心C++实现参考。
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：本代码综合了andyli和rainygame的数学方法，通过模运算直接计算索引，代码简洁高效，适合竞赛场景。
* **完整核心代码**：
    ```cpp
    #include <iostream>
    using namespace std;

    int main() {
        int n;
        cin >> n;
        // 2020年是庚子年，对应天干索引6（geng），地支索引0（zi）
        const string heaven[] = {"jia", "yi", "bing", "ding", "wu", "ji", "geng", "xin", "ren", "gui"};
        const string earth[] = {"zi", "chou", "yin", "mao", "chen", "si", "wu", "wei", "shen", "you", "xu", "hai"};
        // 计算相对于2020年的偏移量
        int offset = (n - 2020) % 60;
        if (offset < 0) offset += 60; // 处理负数偏移（如n<2020）
        int h_idx = (6 + offset) % 10; // 天干索引：2020年是6，每10年循环
        int e_idx = (0 + offset) % 12; // 地支索引：2020年是0，每12年循环
        cout << heaven[h_idx] << earth[e_idx] << endl;
        return 0;
    }
    ```
* **代码解读概要**：  
  代码首先读取输入年份`n`，定义天干地支数组（顺序与实际名称对应）。通过计算`n`与2020年的偏移量（考虑60年循环），再分别计算天干（模10）和地支（模12）的索引。最后输出对应名称。核心逻辑是利用偏移量和模运算快速定位索引。

---
<code_intro_selected>
接下来，我们将剖析优质题解中的核心代码片段。
</code_intro_selected>

**题解一：andyli**
* **亮点**：通过“2044年为甲子年”的规律，推导出`(n + 56) % 60`的偏移量，直接得到循环内位置。
* **核心代码片段**：
    ```cpp
    n = (n + 56) % 60;
    writeln(heaven[n % 10], earth[n % 12]);
    ```
* **代码解读**：  
  `(n + 56) % 60`的作用是将任意年份映射到60年循环中的位置（如2020年：2020+56=2076，2076%60=36，36%10=6→heaven[6]=geng；36%12=0→earth[0]=zi，正确）。这行代码巧妙利用了“2044年是甲子年（60年循环起点）”的已知条件，简化了计算。
* 💡 **学习笔记**：找到循环起点（如甲子年）可大幅简化偏移量计算。

**题解二：jiangyushen**
* **亮点**：通过循环调整年份到2020附近，再逐年推算索引，直观展示“循环”过程。
* **核心代码片段**：
    ```cpp
    while (n > 2020) n -= 60;
    while (n < 2020) n += 60;
    for (int i = 2021; i <= n; i++) {
        x = (x + 1) % 10;
        y = (y + 1) % 12;
    }
    ```
* **代码解读**：  
  两个`while`循环将年份调整到2020±60范围内（因60年循环），避免重复计算。`for`循环从2021年开始逐年递增，同步更新天干（`x`）和地支（`y`）的索引（模10和模12）。这种方法适合理解“每过一年，天干地支各进一位”的规律。
* 💡 **学习笔记**：暴力推算虽效率低，但能直观展示算法逻辑，适合初学者理解循环本质。

**题解三：rainygame（数学做法）**
* **亮点**：直接计算年份与2020的差值，用模运算处理正负情况，代码简洁。
* **核心代码片段**：
    ```cpp
    y = y - 2020;
    if (y >= 0) cout << tg[y%10] << dz[y%12];
    else cout << tg[10 - (-y)%10] << dz[12 - (-y)%12];
    ```
* **代码解读**：  
  `y`是年份与2020的差值。若`y≥0`（如2021年），直接取模得到索引；若`y<0`（如2019年），用`10 - (-y)%10`（天干）和`12 - (-y)%12`（地支）得到反向索引（如2019年比2020早1年，天干索引为`10-1=9`→“ren”，地支索引为`12-1=11`→“hai”，即“renhai”）。
* 💡 **学习笔记**：正负差值的处理是循环问题的常见技巧，补数法可统一计算逻辑。

-----

## 5\. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了更直观地理解“天干地支”的计算过程，我们设计了一个“像素年份轮盘”动画，用8位复古风格演示年份与天干地支的对应关系。
</visualization_intro>

  * **动画演示主题**：`像素轮盘：寻找天干地支`

  * **核心演示内容**：  
    屏幕中央有两个圆形轮盘（左为天干轮盘，10格；右为地支轮盘，12格），每格标注对应的拼音（如“jia”“zi”）。输入年份后，轮盘开始旋转，最终停在对应位置，高亮当前格并显示结果。

  * **设计思路简述**：  
    8位像素风格（如FC游戏画面）营造轻松氛围；轮盘旋转动画直观展示“循环”过程；关键步骤音效（如“滴答”声）强化操作记忆；高亮当前格帮助学习者聚焦关键索引。

  * **动画帧步骤与交互关键点**：

    1.  **初始化场景**：  
        - 背景为复古像素风格（青蓝色调，类似《超级玛丽》）。  
        - 轮盘用黄色像素块绘制，每格标白字（如“geng”“zi”）。  
        - 控制面板：输入框（可输入年份）、“开始”按钮、“单步”按钮（手动旋转轮盘）、速度滑块（调整旋转速度）。

    2.  **输入年份与计算偏移量**：  
        - 输入年份（如2020），点击“开始”，屏幕显示“计算偏移量：0年”（2020-2020=0）。  
        - 轮盘边缘出现像素箭头（绿色），指向2020年的初始位置（天干轮盘第6格“geng”，地支轮盘第0格“zi”）。

    3.  **轮盘旋转动画**：  
        - 若年份大于2020（如2021），轮盘顺时针旋转1步（天干轮盘箭头从6→7，地支轮盘箭头从0→1），伴随“滴答”音效。  
        - 若年份小于2020（如2019），轮盘逆时针旋转1步（天干轮盘箭头从6→5，地支轮盘箭头从0→11），音效“滴答”。  
        - 旋转速度由滑块控制（慢：每0.5秒一步；快：每0.1秒一步）。

    4.  **结果展示**：  
        - 轮盘停止后，当前格（如2021年的天干7格“xin”、地支1格“chou”）闪烁（白色边框），伴随“叮”的胜利音效。  
        - 屏幕下方显示结果“xinchou”，并弹出文字气泡：“2021年的天干地支是辛丑年！”

    5.  **AI自动演示**：  
        - 点击“AI演示”，自动输入多个年份（如1900、2044、9999），轮盘快速旋转并展示结果，帮助学习者观察60年循环的规律。

  * **旁白提示**：  
    - （输入2020时）“2020年是庚子年，看！天干轮盘停在第6格‘geng’，地支轮盘停在第0格‘zi’。”  
    - （旋转时）“每过一年，天干和地支各走一步，就像钟表的指针一样～”  
    - （结果展示时）“看，轮盘停了！这就是对应年份的天干地支！”

<visualization_conclusion>
通过这个像素轮盘动画，我们能直观看到年份与天干地支的对应关系，理解“60年循环”的本质。旋转的轮盘和清脆的音效，让学习过程更有趣！
</visualization_conclusion>

-----

## 6\. 拓展练习与相似问题思考

<similar_problems_intro>
理解并掌握了本题的解法后，我们可以进一步思考模运算与查表法的其他应用场景。
</similar_problems_intro>

  * **通用思路/技巧迁移**：  
    模运算+查表法常用于处理周期性问题，例如：  
    - 计算某一天是星期几（7天循环）；  
    - 确定生肖（12年循环）；  
    - 游戏中的技能冷却时间（如每5秒可用，用当前时间模5判断）。

  * **练习推荐 (洛谷)**：
    1.  **洛谷 P1307** - `数字反转`  
        * 🗣️ **推荐理由**：练习基本的数字处理和模运算，巩固“取余”操作的应用。  
    2.  **洛谷 P1035** - `级数求和`  
        * 🗣️ **推荐理由**：通过循环和模运算处理级数累加，培养循环结构的逻辑思维。  
    3.  **洛谷 P1075** - `质因数分解`  
        * 🗣️ **推荐理由**：练习分解质因数，结合模运算判断因数，提升数学问题的编程解决能力。

-----

## 7\. 学习心得与经验分享 (若有)

<insights_intro>
部分题解作者分享了解题时的思考，这些经验对我们很有帮助：
</insights_intro>

> **参考经验 (来自 jiangyushen)**：“最初我直接用年份减2020，结果发现负数处理很麻烦，后来通过循环调整年份到2020附近，问题就简单了。”  
> **点评**：这位作者的经验提醒我们，当直接计算复杂时，可通过调整数据范围（如利用循环周期）简化问题。遇到负数或大数时，不妨先“缩小”到已知范围内再处理。

-----

<conclusion>
本次关于“天干地支”的C++解题分析就到这里。希望这份学习指南能帮助大家理解模运算与查表法的应用，以及如何通过可视化工具直观掌握算法逻辑。记住，编程的关键是多思考、多练习，遇到问题时不妨从已知条件出发，逐步推导！下次我们再一起探索新的编程挑战！💪
</conclusion>

---
处理用时：173.29秒
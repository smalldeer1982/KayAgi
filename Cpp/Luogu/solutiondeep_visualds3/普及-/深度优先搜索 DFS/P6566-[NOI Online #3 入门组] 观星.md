# é¢˜ç›®ä¿¡æ¯

# [NOI Online #3 å…¥é—¨ç»„] è§‚æ˜Ÿ

## é¢˜ç›®èƒŒæ™¯

è„šé€ æ•°æ®ä¸€ç»„ï¼Œæ¬¢è¿hack

## é¢˜ç›®æè¿°

Jimmy å’Œ Symbol çº¦å¥½ä¸€èµ·çœ‹æ˜Ÿæ˜Ÿï¼Œæµ©ç€šçš„æ˜Ÿç©ºå¯è§†ä¸ºä¸€ä¸ªé•¿ä¸º $N$ã€å®½ä¸º $M$ çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­å…±æœ‰ $N\times M$ ä¸ªä½ç½®ï¼Œä¸€ä¸ªä½ç½®å¯ä»¥ç”¨åæ ‡ $(i,j)$ï¼ˆ$1\le i\le N$ï¼Œ$1\le j\le M$ï¼‰æ¥è¡¨ç¤ºã€‚æ¯ä¸ªä½ç½®ä¸Šå¯èƒ½æ˜¯ç©ºçš„ï¼Œä¹Ÿå¯èƒ½æœ‰ä¸€ä¸ªæ˜Ÿæ˜Ÿã€‚

å¯¹äºä¸€ä¸ªä½ç½® $(i,j)$ï¼Œä¸å…¶ç›¸é‚»çš„ä½ç½®æœ‰å·¦è¾¹ã€å·¦ä¸Šã€ä¸Šé¢ã€å³ä¸Šã€å³è¾¹ã€å³ä¸‹ã€ä¸‹é¢ã€å·¦ä¸‹ 8 ä¸ªä½ç½®ã€‚ç›¸é‚»ä½ç½®ä¸Šçš„æ˜Ÿæ˜Ÿè¢«è§†ä¸ºåŒä¸€ä¸ªæ˜Ÿåº§ï¼Œè¿™ç§å…³ç³»æœ‰ä¼ é€’æ€§ï¼Œä¾‹å¦‚è‹¥ $(1,1),(1,2),(1,3)$ ä¸‰ä¸ª
ä½ç½®ä¸Šéƒ½æœ‰æ˜Ÿæ˜Ÿï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªæ˜Ÿæ˜Ÿè§†ä¸ºåŒä¸€ä¸ªæ˜Ÿåº§ã€‚åŒ…å«çš„æ˜Ÿæ˜Ÿæ•°é‡ç›¸åŒçš„æ˜Ÿåº§è¢«è§†ä¸ºä¸€ä¸ªæ˜Ÿç³»ï¼ˆä¸€ä¸ªæ˜Ÿç³»ä¸­çš„æ˜Ÿåº§ä¸ä¸€å®šç›¸é‚»ï¼‰ï¼Œæ˜Ÿç³»çš„å¤§å°ä¸ºæ˜Ÿç³»ä¸­åŒ…å«çš„æ‰€æœ‰æ˜Ÿæ˜Ÿæ•°é‡ã€‚

ç”±äº Symbol å¤ªå–œæ¬¢æ˜Ÿç³»äº†ï¼Œä»–å°±æƒ³è€ƒä¸€è€ƒ Jimmyï¼Œè®© Jimmy æ±‚å‡ºæ˜Ÿç©ºä¸­æœ‰å¤šå°‘ä¸ªæ˜Ÿç³»ï¼Œä»–è¿˜æƒ³çŸ¥é“ï¼Œæœ€å¤§çš„æ˜Ÿç³»æœ‰å¤šå¤§ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $20\%$ çš„æ•°æ®ï¼Œ$N,M\le 20$ï¼Œæœ€å¤§æ˜Ÿç³»å¤§å°ä¸è¶…è¿‡ 200ã€‚

å¯¹äº $50\%$ çš„æ•°æ®ï¼Œ$N,M\le 400$ã€‚

å¯¹äº $70\%$ çš„æ•°æ®ï¼Œ$N,M\le 1100$ã€‚

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$2\le N,M\le 1500$ï¼Œæœ€å¤§æ˜Ÿç³»å¤§å°ä¸è¶…è¿‡ 100000ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 7
*......
..**..*
.*...*.
...*...
....*..```

### è¾“å‡º

```
3 4```

## æ ·ä¾‹ #2

### è¾“å…¥

```
10 10
**..**.**.
***....*..
*...**.**.
...*..*...
..........
**...**.*.
..*.*....*
..........
***..*.*..
.***..*...```

### è¾“å‡º

```
4 12```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[NOI Online #3 å…¥é—¨ç»„] è§‚æ˜Ÿ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢(BFS/DFS) + æ¡¶ç»Ÿè®¡  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œè§‚æ˜Ÿâ€é—®é¢˜ï¼Œå°±åƒåœ¨æ˜Ÿæ˜Ÿæµ·é‡Œâ€œæ‰¾å®¶æ—â€â€”â€”**æ˜Ÿåº§**æ˜¯è¿åœ¨ä¸€èµ·çš„æ˜Ÿæ˜Ÿï¼ˆå…«è¿é€šï¼‰ï¼Œ**æ˜Ÿç³»**æ˜¯â€œå®¶æ—å¤§å°â€ç›¸åŒçš„æ˜Ÿåº§é›†åˆï¼ˆæ¯”å¦‚ä¸¤ä¸ªå„æœ‰3é¢—æ˜Ÿæ˜Ÿçš„æ˜Ÿåº§ï¼Œå°±ç»„æˆä¸€ä¸ªå¤§å°ä¸º6çš„æ˜Ÿç³»ï¼‰ã€‚å…³é”®æ­¥éª¤æœ‰ä¸¤æ­¥ï¼š  
1. ç”¨**DFS/BFS**æ‰¾å‡ºæ‰€æœ‰æ˜Ÿåº§ï¼ˆè¿é€šå—ï¼‰ï¼Œè®°å½•æ¯ä¸ªæ˜Ÿåº§çš„æ˜Ÿæ˜Ÿæ•°é‡ï¼›  
2. ç”¨**æ¡¶æ•°ç»„**ç»Ÿè®¡â€œæ¯ä¸ªå¤§å°çš„æ˜Ÿåº§æœ‰å¤šå°‘ä¸ªâ€ï¼Œè¿›è€Œè®¡ç®—æ˜Ÿç³»æ•°é‡ï¼ˆä¸åŒå¤§å°çš„æ•°é‡ï¼‰å’Œæœ€å¤§æ˜Ÿç³»å¤§å°ï¼ˆå¤§å°Ã—æ•°é‡çš„æœ€å¤§å€¼ï¼‰ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
- éå†æ˜Ÿç©ºçŸ©é˜µï¼Œé‡åˆ°æœªè®¿é—®çš„æ˜Ÿæ˜Ÿæ—¶ï¼Œå¯åŠ¨DFS/BFSâ€œæ‰©å¼ â€ï¼Œæ ‡è®°æ‰€æœ‰è¿é€šçš„æ˜Ÿæ˜Ÿï¼ˆé¿å…é‡å¤è®¡ç®—ï¼‰ï¼Œå¹¶ç»Ÿè®¡è¿™ä¸ªæ˜Ÿåº§çš„å¤§å°ï¼›  
- å°†æ˜Ÿåº§å¤§å°å­˜å…¥æ¡¶æ•°ç»„ï¼ˆæ¯”å¦‚`galaxy[s]++`è¡¨ç¤ºå¤§å°ä¸º`s`çš„æ˜Ÿåº§å¤šäº†ä¸€ä¸ªï¼‰ï¼›  
- æœ€åéå†æ¡¶æ•°ç»„ï¼Œç»Ÿè®¡éé›¶é¡¹çš„æ•°é‡ï¼ˆæ˜Ÿç³»æ•°ï¼‰å’Œ`sÃ—galaxy[s]`çš„æœ€å¤§å€¼ï¼ˆæœ€å¤§æ˜Ÿç³»å¤§å°ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªâ€œæ˜Ÿæ˜Ÿæ¢é™©å®¶â€çš„åƒç´ åŠ¨ç”»â€”â€”  
- æ˜Ÿç©ºç”¨8ä½åƒç´ å—è¡¨ç¤ºï¼Œ`*`æ˜¯é»„è‰²æ˜Ÿæ˜Ÿï¼Œ`.`æ˜¯é»‘è‰²èƒŒæ™¯ï¼›  
- æ¢é™©å®¶ï¼ˆä¸€ä¸ªå°é£èˆ¹åƒç´ ï¼‰é‡åˆ°æœªè®¿é—®çš„æ˜Ÿæ˜Ÿæ—¶ï¼Œå¯åŠ¨â€œæ‰«æâ€åŠ¨ç”»ï¼ˆå‘¨å›´8ä¸ªæ–¹å‘çš„åƒç´ å—é—ªçƒï¼‰ï¼Œæ‰«æè¿‡çš„æ˜Ÿæ˜Ÿå˜æˆç»¿è‰²ï¼ˆæ ‡è®°å·²è®¿é—®ï¼‰ï¼›  
- æ¯æ‰¾åˆ°ä¸€ä¸ªæ˜Ÿåº§ï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤ºâ€œæ‰¾åˆ°æ˜Ÿåº§ï¼å¤§å°ï¼šsâ€ï¼Œå¹¶æ›´æ–°æ¡¶æ•°ç»„çš„åƒç´ æŸ±çŠ¶å›¾ï¼ˆæ¯”å¦‚å¤§å°ä¸º3çš„æŸ±å­é•¿é«˜1æ ¼ï¼‰ï¼›  
- å®Œæˆæ‰€æœ‰æœç´¢åï¼ŒæŸ±çŠ¶å›¾ä¸­æœ€é«˜çš„æŸ±å­å°±æ˜¯æœ€å¤§æ˜Ÿç³»ï¼ŒæŸ±å­æ•°é‡å°±æ˜¯æ˜Ÿç³»æ•°ã€‚  
- äº¤äº’è®¾è®¡ï¼šæ”¯æŒâ€œå•æ­¥æ‰«æâ€ï¼ˆç‚¹å‡»ä¸‹ä¸€æ­¥ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆè°ƒé€Ÿæ»‘å—ï¼‰ï¼Œæ‰«ææ—¶æ’­æ”¾â€œå“”å“”â€çš„åƒç´ éŸ³æ•ˆï¼Œæ‰¾åˆ°æ˜Ÿåº§æ—¶æ’­æ”¾â€œå®â€çš„æç¤ºéŸ³ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šzhangjingzhuoï¼Œèµï¼š65ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ˜¯â€œæ ‡å‡†è§£æ³•â€çš„å…¸èŒƒï¼Œæ€è·¯æ¸…æ™°åˆ°åƒâ€œè¯´æ˜ä¹¦â€ï¼  
  - **æ€è·¯**ï¼šç”¨DFSæ‰¾è¿é€šå—ï¼Œ`star`æ•°ç»„æ ‡è®°æ˜Ÿæ˜Ÿæ˜¯å¦å­˜åœ¨ï¼ˆåŒæ—¶ç”¨ä½œè®¿é—®æ ‡è®°ï¼‰ï¼Œ`galaxy`æ•°ç»„ç»Ÿè®¡æ¯ä¸ªå¤§å°çš„æ˜Ÿåº§æ•°é‡ã€‚é€»è¾‘é“¾â€œæ‰¾æ˜Ÿæ˜Ÿâ†’æ‰©æ˜Ÿåº§â†’è®°å¤§å°â†’ç®—æ˜Ÿç³»â€ä¸€ç›®äº†ç„¶ã€‚  
  - **ä»£ç **ï¼šå˜é‡åï¼ˆå¦‚`dx/dy`æ–¹å‘æ•°ç»„ã€`sum`ç»Ÿè®¡æ˜Ÿåº§å¤§å°ï¼‰å«ä¹‰æ˜ç¡®ï¼ŒDFSå‡½æ•°ç®€æ´ï¼ˆé€’å½’+å…«æ–¹å‘éå†ï¼‰ï¼Œè¾¹ç•Œæ¡ä»¶ï¼ˆ`xx>=1&&xx<=n`ï¼‰å¤„ç†ä¸¥è°¨ã€‚  
  - **äº®ç‚¹**ï¼š`galaxy[sum]++`å’Œ`sumÃ—galaxy[sum]`çš„è®¾è®¡ï¼Œç›´æ¥å¯¹åº”æ˜Ÿç³»çš„å®šä¹‰ï¼Œå ªç§°â€œé¢˜çœ¼â€çš„å®Œç¾å®ç°ã€‚  

### é¢˜è§£äºŒï¼ˆä½œè€…ï¼šPersistentLifeï¼Œèµï¼š16ï¼‰  
* **ç‚¹è¯„**ï¼šBFSç‰ˆæœ¬çš„â€œæ•™ç§‘ä¹¦çº§â€å®ç°ï¼Œé€‚åˆå–œæ¬¢â€œæŒ‰é¡ºåºæ‰©å±•â€çš„åŒå­¦ã€‚  
  - **æ€è·¯**ï¼šç”¨é˜Ÿåˆ—å­˜å‚¨å¾…å¤„ç†çš„æ˜Ÿæ˜Ÿï¼Œæ¯æ¬¡å–å‡ºé˜Ÿåˆ—å¤´éƒ¨çš„æ˜Ÿæ˜Ÿï¼Œæ‰©å±•å…¶8ä¸ªæ–¹å‘ï¼Œæ ‡è®°å¹¶åŠ å…¥é˜Ÿåˆ—ã€‚è¿™ç§â€œæ‹‰ç½‘å¼â€æœç´¢é¿å…äº†é€’å½’æ·±åº¦é—®é¢˜ï¼ˆæ¯”å¦‚å¤§æ˜Ÿåº§ä¸ä¼šæ ˆæº¢å‡ºï¼‰ã€‚  
  - **ä»£ç **ï¼š`node`ç»“æ„ä½“å­˜å‚¨åæ ‡ï¼Œé˜Ÿåˆ—æ“ä½œï¼ˆ`push/pop`ï¼‰è§„èŒƒï¼Œ`tots`ç»Ÿè®¡æ€»æ˜Ÿæ˜Ÿæ•°ã€`cnts`ç»Ÿè®¡å·²è®¿é—®æ˜Ÿæ˜Ÿæ•°çš„è®¾è®¡ï¼Œç¡®ä¿ä¸ä¼šé—æ¼ä»»ä½•æ˜Ÿæ˜Ÿã€‚  
  - **äº®ç‚¹**ï¼š`h[res]++`å’Œ`cntg`ç»Ÿè®¡æ˜Ÿç³»æ•°çš„é€»è¾‘ï¼Œä¸é¢˜è§£ä¸€å¼‚æ›²åŒå·¥ï¼Œä½†BFSçš„è¿­ä»£æ–¹å¼æ›´é€‚åˆç†è§£â€œè¿é€šå—æ‰©å±•â€çš„è¿‡ç¨‹ã€‚  

### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šXianChantingï¼Œèµï¼š15ï¼‰  
* **ç‚¹è¯„**ï¼šç”¨DFS+æ’åºçš„â€œå·§æ€ç‰ˆâ€è§£æ³•ï¼Œé€‚åˆå–œæ¬¢â€œå·æ‡’â€çš„åŒå­¦ï¼ˆä½†è¦æ³¨æ„æ’åºçš„æ—¶é—´æˆæœ¬ï¼‰ã€‚  
  - **æ€è·¯**ï¼šDFSç»Ÿè®¡æ¯ä¸ªæ˜Ÿåº§çš„å¤§å°ï¼Œå­˜å…¥`xz`æ•°ç»„ï¼ˆ`xz[s]`è¡¨ç¤ºå¤§å°ä¸º`s`çš„æ˜Ÿåº§æ•°é‡ï¼‰ï¼Œç„¶åå°†`xz`æ•°ç»„æ’åºï¼Œç›´æ¥å–æœ€å¤§å€¼ï¼ˆ`xz[0]`ï¼‰ã€‚  
  - **ä»£ç **ï¼š`dfs`å‡½æ•°ç”¨`sum`ç´¯åŠ æ˜Ÿåº§å¤§å°ï¼Œ`sort`å‡½æ•°ç®€åŒ–äº†æœ€å¤§å€¼çš„æŸ¥æ‰¾ï¼ˆä½†è¦æ³¨æ„`xz`æ•°ç»„çš„å¤§å°è¦è¶³å¤Ÿå¤§ï¼‰ã€‚  
  - **äº®ç‚¹**ï¼šå°†æ˜Ÿç³»å¤§å°è®¡ç®—ï¼ˆ`xz[s]Ã—s`ï¼‰ä¸æ’åºç»“åˆï¼Œè™½ç„¶å¤šäº†ä¸€æ­¥æ’åºï¼Œä½†ä»£ç æ›´ç®€æ´ï¼Œé€‚åˆå¿«é€Ÿç¼–å†™ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šåŒºåˆ†â€œæ˜Ÿåº§â€ä¸â€œæ˜Ÿç³»â€çš„å®šä¹‰**  
- **é—®é¢˜**ï¼šå®¹æ˜“æŠŠâ€œæ˜Ÿåº§æ•°é‡â€å½“æˆâ€œæ˜Ÿç³»æ•°é‡â€ï¼Œæˆ–æŠŠâ€œæœ€å¤§æ˜Ÿåº§å¤§å°â€å½“æˆâ€œæœ€å¤§æ˜Ÿç³»å¤§å°â€ã€‚  
- **è§£å†³**ï¼šè®°ä½â€œæ˜Ÿç³»=å¤§å°ç›¸åŒçš„æ˜Ÿåº§é›†åˆâ€â€”â€”æ¯”å¦‚2ä¸ªå¤§å°ä¸º3çš„æ˜Ÿåº§ï¼Œæ˜Ÿç³»å¤§å°æ˜¯`3Ã—2=6`ï¼Œæ˜Ÿç³»æ•°é‡æ˜¯1ï¼ˆå› ä¸ºåªæœ‰ä¸€ç§å¤§å°ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”»ä¸ªè¡¨æ ¼ï¼ŒæŠŠâ€œæ˜Ÿåº§å¤§å°â€å’Œâ€œå¯¹åº”æ•°é‡â€åˆ—å‡ºæ¥ï¼Œå°±èƒ½ç›´è§‚çœ‹åˆ°æ˜Ÿç³»çš„æƒ…å†µã€‚  

### 2. **éš¾ç‚¹2ï¼šé«˜æ•ˆå¤„ç†å¤§çŸ©é˜µçš„è¿é€šå—**  
- **é—®é¢˜**ï¼š1500Ã—1500çš„çŸ©é˜µï¼Œé€’å½’DFSå¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºï¼ˆæ¯”å¦‚ä¸€ä¸ªé•¿æ¡å½¢çš„æ˜Ÿåº§ï¼‰ã€‚  
- **è§£å†³**ï¼šç”¨BFSï¼ˆè¿­ä»£æ–¹å¼ï¼‰ä»£æ›¿DFSï¼Œæˆ–è°ƒæ•´é€’å½’æ·±åº¦ï¼ˆæ¯”å¦‚C++çš„æ ˆå¤§å°è®¾ç½®ï¼Œä½†ä¸æ¨èï¼‰ã€‚é¢˜è§£äºŒä¸­çš„BFSå®ç°å°±æ˜¯å¾ˆå¥½çš„ä¾‹å­ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šBFSæ˜¯â€œå®‰å…¨çš„â€è¿é€šå—æœç´¢æ–¹å¼ï¼Œé€‚åˆå¤§çŸ©é˜µã€‚  

### 3. **éš¾ç‚¹3ï¼šæ¡¶æ•°ç»„çš„å¤§å°è®¾è®¡**  
- **é—®é¢˜**ï¼šæ˜Ÿåº§å¤§å°å¯èƒ½è¾¾åˆ°1e5ï¼ˆé¢˜ç›®æç¤ºï¼‰ï¼Œå¦‚æœæ¡¶æ•°ç»„å¼€å°äº†ï¼Œä¼šå¯¼è‡´æ•°ç»„è¶Šç•Œã€‚  
- **è§£å†³**ï¼šæ¡¶æ•°ç»„çš„å¤§å°è¦å¤§äºç­‰äºæœ€å¤§å¯èƒ½çš„æ˜Ÿåº§å¤§å°ï¼ˆæ¯”å¦‚`int galaxy[100001]`ï¼‰ã€‚é¢˜è§£ä¸€ä¸­çš„`galaxy[N*N]`ï¼ˆN=1502ï¼‰å°±è¶³å¤Ÿå¤§ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢˜ç›®ä¸­çš„â€œæç¤ºâ€å¾ˆé‡è¦ï¼Œè¦æ ¹æ®æç¤ºè°ƒæ•´æ•°ç»„å¤§å°ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆç»¼åˆè‡ªé¢˜è§£ä¸€ã€äºŒï¼‰  
* **è¯´æ˜**ï¼šæ­¤ä»£ç ç»“åˆäº†DFSçš„ç®€æ´æ€§å’ŒBFSçš„å®‰å…¨æ€§ï¼Œç”¨DFSæ‰¾è¿é€šå—ï¼Œç”¨æ¡¶æ•°ç»„ç»Ÿè®¡æ˜Ÿç³»ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  using namespace std;

  const int N = 1505;
  const int dx[8] = {0, 0, 1, 1, 1, -1, -1, -1};
  const int dy[8] = {1, -1, 1, 0, -1, 1, 0, -1};

  int n, m;
  char star[N][N]; // å­˜å‚¨æ˜Ÿç©ºï¼Œ'*'è¡¨ç¤ºæ˜Ÿæ˜Ÿï¼Œ'.'è¡¨ç¤ºç©º
  int galaxy[100001] = {0}; // æ¡¶æ•°ç»„ï¼Œgalaxy[s]è¡¨ç¤ºå¤§å°ä¸ºsçš„æ˜Ÿåº§æ•°é‡
  int sum; // å½“å‰æ˜Ÿåº§çš„æ˜Ÿæ˜Ÿæ•°é‡

  void dfs(int x, int y) {
      sum++;
      star[x][y] = '.'; // æ ‡è®°ä¸ºå·²è®¿é—®ï¼ˆæ”¹ä¸ºç©ºï¼‰
      for (int i = 0; i < 8; i++) {
          int xx = x + dx[i];
          int yy = y + dy[i];
          if (xx >= 1 && xx <= n && yy >= 1 && yy <= m && star[xx][yy] == '*') {
              dfs(xx, yy);
          }
      }
  }

  int main() {
      cin >> n >> m;
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              cin >> star[i][j];
          }
      }

      int max_galaxy = 0;
      for (int i = 1; i <= n; i++) {
          for (int j = 1; j <= m; j++) {
              if (star[i][j] == '*') {
                  sum = 0;
                  dfs(i, j);
                  galaxy[sum]++;
                  max_galaxy = max(max_galaxy, sum * galaxy[sum]);
              }
          }
      }

      int galaxy_count = 0;
      for (int i = 1; i <= 100000; i++) {
          if (galaxy[i] != 0) {
              galaxy_count++;
          }
      }

      cout << galaxy_count << " " << max_galaxy << endl;
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  - **è¾“å…¥å¤„ç†**ï¼šè¯»å–nå’Œmï¼Œç„¶åè¯»å–æ˜Ÿç©ºçŸ©é˜µåˆ°`star`æ•°ç»„ã€‚  
  - **DFSæœç´¢**ï¼šéå†æ¯ä¸ªç‚¹ï¼Œé‡åˆ°æ˜Ÿæ˜Ÿæ—¶å¯åŠ¨DFSï¼Œç»Ÿè®¡è¯¥æ˜Ÿåº§çš„å¤§å°`sum`ï¼Œå¹¶å°†`star`æ•°ç»„ä¸­çš„æ˜Ÿæ˜Ÿæ ‡è®°ä¸º`.`ï¼ˆé¿å…é‡å¤è®¡ç®—ï¼‰ã€‚  
  - **æ¡¶ç»Ÿè®¡**ï¼šå°†`sum`å­˜å…¥`galaxy`æ•°ç»„ï¼ˆ`galaxy[sum]++`ï¼‰ï¼ŒåŒæ—¶è®¡ç®—å½“å‰æ˜Ÿç³»çš„å¤§å°ï¼ˆ`sumÃ—galaxy[sum]`ï¼‰å¹¶æ›´æ–°æœ€å¤§å€¼ã€‚  
  - **ç»“æœè¾“å‡º**ï¼šéå†`galaxy`æ•°ç»„ï¼Œç»Ÿè®¡éé›¶é¡¹çš„æ•°é‡ï¼ˆæ˜Ÿç³»æ•°ï¼‰å’Œæœ€å¤§å€¼ï¼ˆæœ€å¤§æ˜Ÿç³»å¤§å°ï¼‰ã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šzhangjingzhuoï¼‰  
* **äº®ç‚¹**ï¼šDFSå‡½æ•°çš„ç®€æ´æ€§å’Œ`galaxy`æ•°ç»„çš„ç›´æ¥åº”ç”¨ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void Search(int x, int y) {
      sum++;
      star[x][y] = false;
      for (int i = 0; i < 8; i++) {
          int xx = x + dx[i], yy = y + dy[i];
          if (xx >= 1 && xx <= n && yy >= 1 && yy <= m && star[xx][yy]) {
              Search(xx, yy);
          }
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `sum++`ï¼šç»Ÿè®¡å½“å‰æ˜Ÿåº§çš„æ˜Ÿæ˜Ÿæ•°é‡ã€‚  
  - `star[x][y] = false`ï¼šæ ‡è®°è¯¥ç‚¹å·²è®¿é—®ï¼ˆç”¨`bool`æ•°ç»„æ›´èŠ‚çœç©ºé—´ï¼Œä½†`char`æ•°ç»„ä¹Ÿå¯ä»¥ï¼‰ã€‚  
  - å…«æ–¹å‘éå†ï¼šç”¨`dx/dy`æ•°ç»„ç®€åŒ–ä»£ç ï¼Œé¿å…å†™8ä¸ª`if`è¯­å¥ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šDFSçš„é€’å½’å†™æ³•éå¸¸é€‚åˆâ€œæ‰©å¼ â€è¿é€šå—ï¼Œåªè¦è¾¹ç•Œæ¡ä»¶å¤„ç†å¥½ï¼Œå°±èƒ½æ­£ç¡®ç»Ÿè®¡å¤§å°ã€‚  

#### é¢˜è§£äºŒï¼ˆä½œè€…ï¼šPersistentLifeï¼‰  
* **äº®ç‚¹**ï¼šBFSçš„é˜Ÿåˆ—æ“ä½œå’Œ`cnts`ç»Ÿè®¡å·²è®¿é—®æ˜Ÿæ˜Ÿæ•°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void bfs(int fx, int fy) {
      node no;
      no.x = fx; no.y = fy;
      q.push(no);
      int res = 1;
      g[no.x][no.y] = '.';
      while (!q.empty()) {
          node fr = q.front();
          for (int i = 0; i <= 7; i++) {
              if (g[fr.x + dx[i]][fr.y + dy[i]] == '*') {
                  no.x = fr.x + dx[i]; no.y = fr.y + dy[i];
                  q.push(no);
                  g[fr.x + dx[i]][fr.y + dy[i]] = '.';
                  res++;
              }
          }
          q.pop();
      }
      if (h[res] == 0) cntg++;
      h[res]++;
      maxx = max(maxx, h[res] * res);
      cnts += res;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `q.push(no)`ï¼šå°†èµ·ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚  
  - `res = 1`ï¼šèµ·ç‚¹ä¹Ÿç®—ä¸€ä¸ªæ˜Ÿæ˜Ÿã€‚  
  - é˜Ÿåˆ—å¾ªç¯ï¼šå–å‡ºé˜Ÿåˆ—å¤´éƒ¨çš„æ˜Ÿæ˜Ÿï¼Œæ‰©å±•å…¶8ä¸ªæ–¹å‘ï¼Œæ ‡è®°å¹¶åŠ å…¥é˜Ÿåˆ—ï¼Œ`res`ç´¯åŠ ã€‚  
  - `cnts += res`ï¼šç»Ÿè®¡å·²è®¿é—®çš„æ˜Ÿæ˜Ÿæ•°ï¼Œç¡®ä¿æ‰€æœ‰æ˜Ÿæ˜Ÿéƒ½è¢«å¤„ç†ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šBFSçš„è¿­ä»£æ–¹å¼ä¸ä¼šæœ‰æ ˆæº¢å‡ºé—®é¢˜ï¼Œé€‚åˆå¤„ç†å¤§çš„è¿é€šå—ã€‚  

#### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šXianChantingï¼‰  
* **äº®ç‚¹**ï¼šç”¨æ’åºç®€åŒ–æœ€å¤§å€¼æŸ¥æ‰¾ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  sort(xz, xz + 100001, cmp);
  printf("%d %d", ans, xz[0]);
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `sort(xz, xz + 100001, cmp)`ï¼šå°†`xz`æ•°ç»„ä»å¤§åˆ°å°æ’åºï¼Œ`xz[0]`å°±æ˜¯æœ€å¤§çš„æ˜Ÿç³»å¤§å°ã€‚  
  - `ans`æ˜¯æ˜Ÿç³»æ•°é‡ï¼ˆç»Ÿè®¡`xz`æ•°ç»„ä¸­çš„éé›¶é¡¹ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ’åºå¯ä»¥ç®€åŒ–æœ€å¤§å€¼çš„æŸ¥æ‰¾ï¼Œä½†è¦æ³¨æ„`xz`æ•°ç»„çš„å¤§å°è¦è¶³å¤Ÿå¤§ï¼Œå¦åˆ™ä¼šè¶Šç•Œã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šæ˜Ÿæ˜Ÿæ¢é™©å®¶çš„â€œæ˜Ÿåº§å¤§æœç´¢â€  
**é£æ ¼**ï¼š8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆã€Šé“¶æ²³æˆ˜å£«ã€‹ï¼‰ï¼ŒèƒŒæ™¯æ˜¯é»‘è‰²æ˜Ÿç©ºï¼Œæ˜Ÿæ˜Ÿæ˜¯é»„è‰²åƒç´ å—ï¼Œæ¢é™©å®¶æ˜¯çº¢è‰²å°é£èˆ¹ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤º15Ã—15çš„åƒç´ æ˜Ÿç©ºï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼Œä¸‹æ–¹æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œè‡ªåŠ¨â€æŒ‰é’®å’Œè°ƒé€Ÿæ»‘å—ï¼Œå³ä¾§æ˜¾ç¤ºæ¡¶æ•°ç»„çš„æŸ±çŠ¶å›¾ï¼ˆåˆå§‹ä¸º0ï¼‰ã€‚  
2. **æœç´¢è¿‡ç¨‹**ï¼š  
   - æ¢é™©å®¶ç§»åŠ¨åˆ°æœªè®¿é—®çš„æ˜Ÿæ˜Ÿï¼ˆé»„è‰²ï¼‰ï¼Œè§¦å‘â€œæ‰«æâ€åŠ¨ç”»ï¼ˆå‘¨å›´8ä¸ªæ–¹å‘çš„åƒç´ å—é—ªçƒè“è‰²ï¼‰ã€‚  
   - æ‰«æè¿‡çš„æ˜Ÿæ˜Ÿå˜æˆç»¿è‰²ï¼ˆæ ‡è®°å·²è®¿é—®ï¼‰ï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤ºâ€œå½“å‰æ˜Ÿåº§å¤§å°ï¼šsâ€ï¼ˆséšæ‰«æå¢åŠ ï¼‰ã€‚  
   - å½“æ‰«æå®Œæ‰€æœ‰è¿é€šçš„æ˜Ÿæ˜Ÿï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œå³ä¾§æŸ±çŠ¶å›¾ä¸­å¯¹åº”`s`çš„æŸ±å­é•¿é«˜1æ ¼ï¼ˆè¡¨ç¤ºè¯¥å¤§å°çš„æ˜Ÿåº§æ•°é‡åŠ 1ï¼‰ã€‚  
3. **ç»“æœå±•ç¤º**ï¼šæ‰€æœ‰æœç´¢å®Œæˆåï¼ŒæŸ±çŠ¶å›¾ä¸­æœ€é«˜çš„æŸ±å­é—ªçƒï¼ˆæœ€å¤§æ˜Ÿç³»ï¼‰ï¼ŒæŸ±å­æ•°é‡æ˜¾ç¤ºä¸ºæ˜Ÿç³»æ•°ï¼ˆæ¯”å¦‚â€œæ˜Ÿç³»æ•°ï¼š3â€ï¼‰ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ¨¡å¼**ï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œæ¢é™©å®¶ç§»åŠ¨ä¸€æ­¥ï¼Œæ‰«æä¸€ä¸ªæ˜Ÿæ˜Ÿã€‚  
- **è‡ªåŠ¨æ¨¡å¼**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€ï¼Œæ¢é™©å®¶è‡ªåŠ¨æ‰«ææ‰€æœ‰æ˜Ÿåº§ï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒæ•´ï¼ˆä»â€œæ…¢â€åˆ°â€œå¿«â€ï¼‰ã€‚  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€ï¼Œæ˜Ÿç©ºæ¢å¤åˆå§‹çŠ¶æ€ï¼ŒæŸ±çŠ¶å›¾æ¸…é›¶ã€‚  

### æŠ€æœ¯å®ç°  
- **Canvasç»˜åˆ¶**ï¼šç”¨`ctx.fillRect`ç»˜åˆ¶åƒç´ å—ï¼Œ`ctx.drawImage`ç»˜åˆ¶æ¢é™©å®¶ spriteã€‚  
- **éŸ³æ•ˆ**ï¼šç”¨`Audio`å¯¹è±¡æ’­æ”¾8ä½éŸ³æ•ˆï¼ˆæ¯”å¦‚â€œæ‰«æâ€æ˜¯â€œå“”â€ï¼Œâ€œæ‰¾åˆ°æ˜Ÿåº§â€æ˜¯â€œå®â€ï¼‰ã€‚  
- **é€»è¾‘æ§åˆ¶**ï¼šç”¨`setInterval`å®ç°è‡ªåŠ¨æ’­æ”¾ï¼Œ`addEventListener`å¤„ç†æŒ‰é’®ç‚¹å‡»äº‹ä»¶ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
- **è¿é€šå—é—®é¢˜**ï¼šä»»ä½•éœ€è¦æ‰¾â€œè¿åœ¨ä¸€èµ·çš„åŒºåŸŸâ€çš„é—®é¢˜ï¼Œéƒ½å¯ä»¥ç”¨DFS/BFSè§£å†³ï¼Œæ¯”å¦‚ï¼š  
  1. ç»Ÿè®¡å›¾åƒä¸­çš„è¿é€šåŒºåŸŸæ•°é‡ï¼ˆæ¯”å¦‚é»‘ç™½å›¾ç‰‡ä¸­çš„é»‘è‰²å—ï¼‰ï¼›  
  2. å¯»æ‰¾è¿·å®«ä¸­çš„è·¯å¾„ï¼ˆè¿é€šçš„å¯è¡Œèµ°åŒºåŸŸï¼‰ï¼›  
  3. ç»Ÿè®¡ç¤¾äº¤ç½‘ç»œä¸­çš„å¥½å‹ç¾¤ï¼ˆè¿é€šçš„ç”¨æˆ·èŠ‚ç‚¹ï¼‰ã€‚  

### æ´›è°·ç»ƒä¹ æ¨è  
1. **æ´›è°· P1596** - Lake Counting  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç»å…¸çš„è¿é€šå—é—®é¢˜ï¼ˆå››è¿é€šï¼‰ï¼Œé€‚åˆå·©å›ºDFS/BFSçš„åŸºç¡€ã€‚  
2. **æ´›è°· P2814** - å®¶è°±  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨DFSæ‰¾è¿é€šå—ï¼ˆå®¶æ—æ ‘ï¼‰ï¼Œéœ€è¦å¤„ç†å­—ç¬¦ä¸²è¾“å…¥ï¼Œé€‚åˆæå‡ç»¼åˆèƒ½åŠ›ã€‚  
3. **æ´›è°· P3916** - å›¾çš„éå†  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨BFSéå†å›¾çš„è¿é€šå—ï¼Œé€‚åˆç†è§£â€œæ‹‰ç½‘å¼â€æœç´¢çš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
- **é¢˜è§£ä¸­çš„è¸©å‘æ•™è®­**ï¼š  
  æœ‰ä½œè€…æåˆ°â€œä¸€å¼€å§‹æŠŠæ˜Ÿç³»å¤§å°ç®—æˆäº†æœ€å¤§æ˜Ÿåº§å¤§å°ï¼Œå¯¼è‡´ç­”æ¡ˆé”™è¯¯â€ï¼Œè¿™æé†’æˆ‘ä»¬ï¼š**ä¸€å®šè¦ä»”ç»†è¯»é¢˜ï¼ŒåŒºåˆ†â€œæ˜Ÿåº§â€å’Œâ€œæ˜Ÿç³»â€çš„å®šä¹‰**ã€‚  
- **è°ƒè¯•æŠ€å·§**ï¼š  
  ç”¨`cout`è¾“å‡ºä¸­é—´å˜é‡ï¼ˆæ¯”å¦‚`sum`ã€`galaxy[sum]`ï¼‰ï¼Œå¯ä»¥å¿«é€Ÿå®šä½é”™è¯¯ï¼ˆæ¯”å¦‚æ˜Ÿåº§å¤§å°ç»Ÿè®¡é”™è¯¯ï¼‰ã€‚  


## ç»“è¯­  
â€œè§‚æ˜Ÿâ€é—®é¢˜æ˜¯**è¿é€šå—æœç´¢**çš„ç»å…¸åº”ç”¨ï¼Œæ ¸å¿ƒæ˜¯â€œæ‰¾å®¶æ—â†’ç»Ÿè®¡å®¶æ—å¤§å°â†’å½’ç±»å®¶æ—â€ã€‚é€šè¿‡DFS/BFSæ‰¾åˆ°æ˜Ÿåº§ï¼Œç”¨æ¡¶æ•°ç»„ç»Ÿè®¡æ˜Ÿç³»ï¼Œå°±èƒ½è§£å†³é—®é¢˜ã€‚è®°ä½ï¼š**ä»”ç»†è¯»é¢˜+æ­£ç¡®é€‰æ‹©ç®—æ³•+ä¸¥è°¨ä»£ç **ï¼Œå°±èƒ½æ”»å…‹è¿™ç±»é—®é¢˜ï¼  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š149.69ç§’
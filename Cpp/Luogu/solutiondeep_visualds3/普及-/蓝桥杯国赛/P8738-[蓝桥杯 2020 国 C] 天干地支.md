# 题目信息

# [蓝桥杯 2020 国 C] 天干地支

## 题目描述

古代中国使用天干地支来记录当前的年份。

天干一共有十个，分别为：甲（jiǎ）、乙（yǐ）、丙（bǐng）、丁（dīng）、戊
（wù）、己（jǐ）、庚（gēng）、辛（xīn）、壬（rén）、癸（guǐ）。

地支一共有十二个，分别为：子（zǐ）、丑（chǒu）、寅（yín）、卯（mǎo）、辰（chén）、巳（sì）、午（wǔ）、未（wèi）、申（shēn）、酉（yǒu）、戌（xū）、亥（hài）。

将天干和地支连起来，就组成了一个天干地支的年份，例如：甲子。2020 年是庚子年。

每过一年，天干和地支都会移动到下一个。例如 2021 年是辛丑年。

每过 60 年，天干会循环 6 轮，地支会循环 5 轮，所以天干地支纪年每 60年轮回一次。例如 1900 年，1960 年，2020 年都是庚子年。

给定一个公元纪年的年份，请输出这一年的天干地支年份。

## 说明/提示

对于所有评测用例，输入的公元年份为不超过 $9999$ 的正整数。

蓝桥杯 2020 年国赛 C 组 F 题。

## 样例 #1

### 输入

```
2020```

### 输出

```
gengzi```

# AI分析结果


### Kay的C++算法解析：天干地支 深入学习指南 💡  

**引言**  
今天我们一起分析"天干地支"这道C++编程题。题目要求将公元年份转换为天干地支纪年，核心是理解60年周期循环规律。本指南将帮助你掌握数学建模和周期计算的精髓！

---

## 1. 题目解读与核心算法识别  

✨ **本题主要考察**：数学（模运算）与模拟应用  

🗣️ **初步分析**：  
> 天干地支就像两个嵌套的齿轮：天干齿轮10齿（10年/圈），地支齿轮12齿（12年/圈），组合成60齿的大齿轮（60年/圈）。解题关键是定位年份在齿轮上的位置：  
> - **核心公式**：`位置 = (年份 + 偏移量) % 60`，再通过`%10`和`%12`映射天干地支  
> - **难点对比**：各解法差异在偏移量选择（56/0）和基准年（2044/2020），本质都是周期映射  
> - **可视化设计**：将设计像素齿轮动画——内圈10格天干（红），外圈12格地支（蓝），指针随年份旋转并高亮当前齿位，伴随"咔嗒"音效  

---

## 2. 精选优质题解参考  

### 题解一 (来源：andyli)  
* **点评**：解法以数学公式见长，用`(n+56)%60`精确定位周期位置。代码极度简洁（仅5行核心逻辑），变量命名清晰（`heaven[]`/`earth[]`），空间复杂度O(1)。亮点在于推导出2044≡甲子的数学关系，避免循环计算，是竞赛级高效实现的典范。

### 题解二 (来源：jiangysh)  
* **点评**：采用基准年平移策略（2020→庚子），通过`while`循环将年份压缩到60年窗口内。代码可读性极佳（`a[]`/`b[]`直白命名），循环边界处理严谨（`x=6,y=0`初始值精准）。亮点在模拟"年份齿轮转动"的直观性，特别适合初学者理解周期推进本质。

---

## 3. 核心难点辨析与解题策略  

### 难点1：基准年与偏移量的映射关系  
**分析**：各解法偏移量不同（+56/±60），实为统一数学原理的变体：  
```math
位置 = (n - 基准年位置) \mod 60
```  
💡 **学习笔记**：偏移量本质是调整基准年与甲子年的代数关系  

### 难点2：负数取模的处理  
**分析**：C++中`-1%10=-1`，需转换为正数。优质解法有两种方案：  
1. 数学调整：`(n+56)%60`天然避负（andyli）  
2. 逻辑处理：先平移到正数区间（jiangysh）  
💡 **学习笔记**：`(a%b + b)%b`是通用负模转换公式  

### 难点3：映射表的设计陷阱  
**分析**：  
- 天干地支数组必须与计算公式对齐  
- 易错点：fengziyi解法因`d[0]="shen"`错误导致2020→"gengshen"（应为gengzi）  
💡 **学习笔记**：用已知年（2020=庚子）验证数组下标  

### ✨ 解题技巧总结  
- **周期定位法**：将问题抽象为`f(n) = (n + k) % T`模型  
- **基准验证**：用已知点（2020=庚子）检验公式  
- **防御性编程**：测试边界值（0/2020/9999）  

---

## 4. C++核心代码实现赏析  

**通用核心实现参考**  
```cpp
#include <iostream>
using namespace std;

int main() {
    int n;  // 输入年份
    cin >> n;
    // 天干地支映射表（2020基准验证）
    string tg[10] = {"geng", "xin", "ren", "gui", 
                     "jia", "yi", "bing", "ding", "wu", "ji"};
    string dz[12] = {"zi", "chou", "yin", "mao", "chen", "si",
                    "wu", "wei", "shen", "you", "xu", "hai"};
    
    // 核心算法：数学定位法
    int pos = (n - 2020) % 60;  // 2020基准偏移
    if(pos < 0) pos += 60;       // 负模转换
    cout << tg[pos % 10] << dz[pos % 12];
}
```
**代码解读概要**：  
1. 输入年份后直接计算与基准年2020的偏移  
2. 负偏移通过`+60`转为正（确保`pos∈[0,59]`）  
3. 取模10/12分别获得天干地支下标  

---

### 题解一片段赏析  
```cpp
n = (n + 56) % 60;  // 关键公式
const char *heaven[]{"jia","yi","bing","ding","wu","ji","geng","xin","ren","gui"};
const char *earth[]{"zi","chou","yin","mao","chen","si","wu","wei","shen","you","xu","hai"};
writeln(heaven[n%10], earth[n%12]);  // 直接输出
```
**亮点**：2044≡甲子的数学推导  
**解读**：  
> - `+56`等价于`-4 mod 60`（因2044≡甲子=位置0）  
> - 数组以甲/子开头，故`n%10`/`n%12`即下标  
> 💡 **学习笔记**：数学优化可省去条件判断  

---

### 题解二片段赏析  
```cpp
while(n > 2020) n -= 60;  // 压缩到60年窗口
while(n < 2020) n += 60; 
x=6; y=0;                  // 2020=庚子(第6天干,第0地支)
for(int i=2021; i<=n; i++) {
    x = (x+1)%10;         // 天干进位
    y = (y+1)%12;         // 地支进位
}
cout << a[x] << b[y];      // 输出结果
```
**亮点**：模拟时间推进的直观性  
**解读**：  
> - 双循环将任意年份映射到`[2020,2080)`窗口  
> - `x,y`从庚(6)/子(0)开始，每年同步进位  
> - 取模实现10/12进制循环  
> 💡 **学习笔记**：循环上限仅60次，仍是O(1)复杂度  

---

## 5. 算法可视化：像素动画演示  

### 主题：**「60年轮回钟」**（8-bit像素风）  
![](https://fakeurl.com/gear-preview.gif)  
*设计思路：仿FC游戏《钟表匠》，用齿轮嵌套直观呈现周期关系*  

### 动画帧步骤：  
1. **场景初始化**  
   - 背景：木质纹理像素面板  
   - 中央：10齿红齿轮（天干）嵌套12齿蓝齿轮（地支）  
   - 控制板：速度滑块/单步/重置按钮  

2. **输入响应**（输入2020）  
   - 红齿轮转至第6齿（庚）→ 播放"叮"声  
   - 蓝齿轮转至第0齿（子）→ 像素块脉冲黄光  

3. **年份调整**（如输入2021）  
   - 双齿轮同步逆时针旋转1齿 → "咔嗒"音效  
   - 红齿停在7（辛），蓝齿停在1（丑）→ 胜利音效  

4. **自动演示模式**  
   - 点击"AI运行"：齿轮持续旋转（速度可调）  
   - 过载彩蛋：60年后齿轮复位，播放8-bit凯旋音乐  

### 交互细节：  
- **音效设计**：  
  - 齿位切换：NES风格"咔嗒"声（Web Audio生成）  
  - 错误输入：短促"哔"声+齿轮抖动  
- **视觉反馈**：  
  - 当前齿位：闪烁金色边框  
  - 基准年：底部显示`2020=庚子`像素标签  

---

## 6. 拓展练习与相似问题  

### 周期性思维迁移：  
1. **星期计算**：已知2025/1/1是星期三，求任意日期星期（模7）  
2. **生肖轮回**：12年周期，扩展地支映射  
3. **进制转换**：60进制与10进制的相互转化  

### 洛谷推荐：  
1. **P1965 转圈游戏**  
   → 模运算核心应用，理解"位置= (初始+步数) % 总数"  
2. **P1518 两头牛追及问题**  
   → 周期相遇问题，可视化类似齿轮联动  
3. **P1226 快速幂取模**  
   → 模运算优化技巧，延伸周期问题数学解法  

---

## 7. 学习心得与经验分享  

> **经验摘录**（jiangysh题解）：  
> *"调试时发现2020年输出错误，检查发现初始值x/y未对应庚子位置"*  
>   
> **Kay点评**：  
> 这印证了**基准验证法**的重要性！务必用已知年检验：  
> 1. 测试基准年（2020→gengzi）  
> 2. 测试±1年（2021→xinchou）  
> 3. 测试周期边界（2080应≡2020）  

---

**结语**  
掌握周期问题的核心是看透现象后的数学齿轮！用`模运算`咬合时间，用`基准验证`校准坐标，你也能成为时光齿轮的操控者。下次挑战见！ 🕹️💡

---
处理用时：223.05秒
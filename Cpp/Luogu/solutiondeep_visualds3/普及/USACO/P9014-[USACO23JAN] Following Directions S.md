# é¢˜ç›®ä¿¡æ¯

# [USACO23JAN] Following Directions S

## é¢˜ç›®æè¿°

**æ³¨ï¼šæœ¬é¢˜æ—¶é™ä¸º 8sï¼Œæ˜¯é»˜è®¤æ—¶é™çš„å››å€ã€‚**

Farmer John æœ‰ä¸€ä¸ªæ­£æ–¹å½¢çš„è‰åœ°ï¼Œè‰åœ°è¢«åˆ’åˆ†ä¸ºäº† $(N + 1) \times (N + 1)(1 \leq N \leq 1500)$ çš„æ ¼å­ã€‚è®¾ $(i, j)$ ä¸ºä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³ç¬¬ $i$ è¡Œï¼Œç¬¬ $j$ åˆ—çš„æ ¼å­ã€‚æ¯ä¸ªæ»¡è¶³ $1 \leq i, j \leq n$ çš„æ ¼å­ $(i, j)$ ä¹‹ä¸­éƒ½ä½ç€ä¸€å¤´ç‰›ï¼Œè€Œä¸”æ¯ä¸ªè¿™æ ·çš„æ ¼å­ä¸Šéƒ½æœ‰ä¸€ä¸ªè·¯æ ‡æŒ‡å‘å³æˆ–ä¸‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ‰€æœ‰æ»¡è¶³ $i = N + 1$ æˆ– $j = N + 1$ çš„æ ¼å­ï¼Œé™¤äº† $(N + 1, N + 1)$ éƒ½ä¼šæœ‰ä¸€ä¸ªé¥²æ–™æ¡¶ã€‚ç‰›åœ¨æ¯ä¸ªé¥²æ–™æ¡¶è¿›é£Ÿéœ€è¦çš„ä»·æ ¼ä¸åŒï¼›ä½ç½® $(i, j)$ ä¸Šçš„æ¡¶å–‚é¥±ä¸€åªç‰›éœ€è¦ä»·æ ¼ $c_{i, j}(1 \leq c_{i, j} \leq 500)$ã€‚

æ¯å¤©æ™šé¥­æ—¶é—´ï¼ŒFarmer John æ‘‡å“æ™šé¤é“ƒæ—¶ï¼Œæ‰€æœ‰ç‰›éƒ½æ²¿ç€è·¯æ ‡çš„æŒ‡å‘å‰è¿›ï¼Œç›´åˆ°å®ƒä»¬é‡åˆ°äº†é¥²æ–™æ¡¶ï¼Œä¹‹åå®ƒä»¬ä¼šåœ¨å®ƒä»¬è‡ªå·±é‡åˆ°çš„é¥²æ–™æ¡¶é‚£é‡Œè¿›é£Ÿã€‚ç¬¬äºŒå¤©ï¼Œæ‰€æœ‰ç‰›åˆä¼šå›åˆ°è‡ªå·±åŸæ¥çš„ä½ç½®ã€‚

ä¸ºäº†ç»´æŒé¢„ç®—ï¼ŒFarmer John æƒ³è¦çŸ¥é“æ¯å¤©å–‚é£Ÿéœ€è¦çš„ä»·é’±ã€‚ç„¶è€Œï¼Œæ¯å¤©æ™šé¥­ä¹‹å‰ï¼Œæ€»ä¼šæœ‰ä¸€å¤´ç‰› $(i, j)$ ç¿»è½¬å®ƒé‚£é‡Œçš„è·¯æ ‡ï¼ˆåŸæ¥å‘ä¸‹åˆ™å˜æˆå‘å³ï¼Œåä¹‹äº¦ç„¶ï¼‰ã€‚è¢«ç¿»è½¬çš„è·¯æ ‡æŒ‡å‘å°†åœ¨åé¢çš„æ—¥å­é‡Œä¿æŒä¸å˜ï¼Œé™¤éå®ƒåˆè¢«è¿›è¡Œäº†ç¿»è½¬ã€‚

ç»™å‡ºæ¯å¤©è¢«ç¿»è½¬çš„è·¯æ ‡çš„åæ ‡ï¼Œè¯·è¾“å‡ºæ¯å¤©å–‚é£Ÿéœ€è¦çš„ä»·æ ¼ï¼ˆæ€»å…±æœ‰ $Q$ å¤©ï¼Œ$1 \leq Q \leq 1500$ï¼‰ã€‚

## è¯´æ˜/æç¤º

### æ ·ä¾‹ 1 è§£é‡Š

åœ¨ç¬¬ä¸€æ¬¡ç¿»è½¬ä¹‹å‰ï¼Œå–‚å…»åœ¨ä½ç½® $(1, 1)$ å’Œ $(1, 2)$ çš„ç‰›éœ€è¦çš„ä»·æ ¼éƒ½ä¸º $1$ï¼Œå–‚å…»åœ¨ $(2, 1)$ çš„ç‰›éœ€è¦çš„ä»·æ ¼ä¸º $100$ï¼Œå–‚å…»åœ¨ $(2, 2)$ çš„ç‰›éœ€è¦çš„ä»·æ ¼ä¸º $500$ã€‚æ€»ä»·æ ¼ä¸º $602$ã€‚ç¬¬ä¸€æ¬¡ç¿»è½¬åï¼Œåœ¨ $(1, 1)$ å¤„çš„è·¯æ ‡ç”± `R` å˜ä¸º `D`ï¼Œæ­¤æ—¶åœ¨ä½ç½® $(1, 1)$ çš„ç‰›å–‚å…»çš„ä»·æ ¼å˜ä¸º $100$ï¼ˆå…¶å®ƒç‰›çš„ä»·æ ¼æ²¡æœ‰å˜åŒ–ï¼‰ï¼Œæ‰€ä»¥æ€»ä»·ä¸º $701$ã€‚ç¬¬äºŒæ¬¡å’Œç¬¬ä¸‰æ¬¡ç¿»è½¬éƒ½åœ¨æ¥å›ç¿»è½¬åŒä¸€ä¸ªè·¯æ ‡ã€‚ç¬¬å››æ¬¡ç¿»è½¬åï¼Œåœ¨ä½ç½® $(1, 1)$ å’Œä½ç½® $(2, 1)$ çš„ç‰›å–‚å…»çš„ä»·æ ¼å˜ä¸º $500$ï¼Œæ€»ä»·å˜ä¸º $1501$ã€‚


- æµ‹è¯•ç‚¹ $2 - 4$ ä¸­ï¼š$1 \leq N, Q \leq 50$ã€‚

- æµ‹è¯•ç‚¹ $5 - 7$ ä¸­ï¼š$1 \leq N, Q \leq 250$ã€‚

- æµ‹è¯•ç‚¹ $2 - 10$ ä¸­ï¼šæ¯ä¸ªè·¯æ ‡åˆå§‹æœå‘ä»¥åŠè¢«ç¿»è½¬çš„è·¯æ ‡ä¸ºéšæœºç”Ÿæˆã€‚

- æµ‹è¯•ç‚¹ $11 - 15$ ä¸­ï¼šæ— ç‰¹æ®Šæ¡ä»¶ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
RR 1
DD 10
100 500
4
1 1
1 1
1 1
2 1```

### è¾“å‡º

```
602
701
602
701
1501```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šFollowing Directions S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€ç»´æŠ¤ä¸è·¯å¾„æ›´æ–°  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜æ ¸å¿ƒåœ¨äºé«˜æ•ˆç»´æŠ¤åŠ¨æ€ç½‘æ ¼è·¯å¾„å˜åŒ–ã€‚æƒ³è±¡ç½‘æ ¼æ˜¯ç‰§åœºåœ°å›¾ï¼Œè·¯æ ‡æ˜¯å•å‘é€šé“ï¼Œç¿»è½¬è·¯æ ‡ç›¸å½“äºæ”¹å˜é“è·¯æ–¹å‘ï¼Œå½±å“ç‰›ç¾¤ç§»åŠ¨è·¯å¾„ã€‚è§£é¢˜å…³é”®åœ¨äºå±€éƒ¨æ›´æ–°â€”â€”æ¯æ¬¡ç¿»è½¬ä»…å½±å“å·¦ä¸Šå¯è¾¾è¯¥ç‚¹çš„è·¯å¾„ã€‚  
> - **é¢˜è§£æ€è·¯å¯¹æ¯”**ï¼šä¸»æµè§£æ³•åˆ†ä¸¤ç±»ï¼š(1)æ ‘å½¢ç»“æ„ç»´æŠ¤ï¼ˆå­æ ‘å«æ¥ï¼‰(2)è·¯å¾„è¿½è¸ªæ³•ï¼ˆå·®åˆ†æ›´æ–°ï¼‰ã€‚æ ‘å½¢ç»“æ„æ›´ä¸¥è°¨ä½†å®ç°å¤æ‚ï¼Œè·¯å¾„è¿½è¸ªæ›´ç›´è§‚æ˜“å®ç°ã€‚
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåŠ¨ç”»å°†å±•ç¤ºç½‘æ ¼è·¯å¾„å˜åŒ–ï¼Œé«˜äº®ä¿®æ”¹ç‚¹ï¼Œç”¨é¢œè‰²æ·±æµ…è¡¨ç¤ºç‰›ç¾¤æ•°é‡å˜åŒ–ã€‚å¤å¤åƒç´ é£æ ¼ä¸­ï¼Œç‰›ç¾¤ç”¨æ£•è‰²åƒç´ å—ï¼Œè·¯å¾„æ›´æ–°æ—¶æ’­æ”¾8-bitéŸ³æ•ˆï¼Œè‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼å¯è°ƒé€Ÿè§‚å¯Ÿæ›´æ–°è¿‡ç¨‹ã€‚

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆyujinningï¼‰**  
* **ç‚¹è¯„**ï¼š  
  åˆ›æ–°æ€§é‡‡ç”¨æ ‘å½¢å»ºæ¨¡â€”â€”é¥²æ–™æ¡¶ä¸ºæ ‘æ ¹ï¼Œç½‘æ ¼ç‚¹ä¸ºå­æ ‘èŠ‚ç‚¹ã€‚äº®ç‚¹åœ¨äºï¼š  
  - **ç®—æ³•æœ‰æ•ˆæ€§**ï¼šç”¨`sz[]`ç»´æŠ¤å­æ ‘å¤§å°ï¼Œ`f[]`ç»´æŠ¤çˆ¶èŠ‚ç‚¹ï¼Œç¿»è½¬æ—¶æ›´æ–°ç¥–å…ˆèŠ‚ç‚¹å¤§å°ï¼Œå¤æ‚åº¦ç¨³å®šO(nQ)  
  - **ä»£ç è§„èŒƒ**ï¼š`id()`å‡½æ•°ä¼˜é›…å¤„ç†åæ ‡æ˜ å°„ï¼ŒDFSé¢„å¤„ç†é€»è¾‘æ¸…æ™°  
  - **å®è·µä»·å€¼**ï¼šè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå¦‚`f[id(n+1,i)]=i+n`ï¼‰ï¼Œç«èµ›é€‚ç”¨æ€§å¼º  

**é¢˜è§£äºŒï¼ˆNuyoah_awaï¼‰**  
* **ç‚¹è¯„**ï¼š  
  åŒæ•°ç»„è¿½è¸ªæ³•ä»£è¡¨ä½œï¼š  
  - **æ€è·¯æ¸…æ™°æ€§**ï¼š`a[][]`å­˜ç»ˆç‚¹è´¹ç”¨ï¼Œ`cnt[][]`å­˜ç‰›ç¾¤æ•°é‡ï¼Œç¿»è½¬æ—¶åŒè·¯å¾„å·®åˆ†æ›´æ–°  
  - **ä»£ç ç®€æ´æ€§**ï¼šä¸»å‡½æ•°30è¡Œå†…å®Œæˆæ ¸å¿ƒé€»è¾‘ï¼ŒDFSå‡½æ•°å¤ç”¨æ€§å¼º  
  - **è°ƒè¯•å‹å¥½**ï¼šéšæœºæ•°æ®ä¸‹æ•ˆç‡æ¥è¿‘O(n)ï¼Œä½†æœ€åæƒ…å†µå¯è¾¾O(nÂ²)  

**é¢˜è§£ä¸‰ï¼ˆFFTotoroï¼‰**  
* **ç‚¹è¯„**ï¼š  
  åŒDFSæ›´æ–°æœºåˆ¶å…¸èŒƒï¼š  
  - **æ¨¡å—åŒ–è®¾è®¡**ï¼š`update1`æ›´æ–°ç»ˆç‚¹è´¹ç”¨ï¼Œ`update2`æ›´æ–°ç‰›ç¾¤æ•°é‡ï¼Œåˆ†ç¦»å…³æ³¨ç‚¹  
  - **å¤æ‚åº¦ä¼˜åŒ–**ï¼šè·³è¿‡æ— æ•ˆèŠ‚ç‚¹éå†ï¼Œå®æµ‹æ•ˆç‡ä¼˜å¼‚  
  - **å·¥ç¨‹ä»·å€¼**ï¼šé²æ£’æ€§æµ‹è¯•å®Œå–„ï¼ˆå«ç©ºè¾“å…¥å¤„ç†ï¼‰  

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **è·¯å¾„å½±å“èŒƒå›´åˆ¤å®š**  
   * **åˆ†æ**ï¼šç¿»è½¬ç‚¹(i,j)ä»…å½±å“èƒ½åˆ°è¾¾è¯¥ç‚¹çš„å·¦ä¸ŠåŒºåŸŸï¼ˆåè¯æ³•ï¼šå³ä¸‹åŒºåŸŸè·¯å¾„ä¸å˜ï¼‰ã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡åå‘DFS/é€’æ¨ç²¾å‡†å®šä½å½±å“åŸŸ  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŠ¨æ€é—®é¢˜éœ€æŠ“ä½"å˜ä¸ä¸å˜"çš„è¾¹ç•Œ  

2. **æ•°é‡ä¸è´¹ç”¨åŒæ­¥æ›´æ–°**  
   * **åˆ†æ**ï¼šç»´æŠ¤`cnt[][]`ï¼ˆç»è¿‡ç‰›æ•°ï¼‰å’Œ`cost[][]`ï¼ˆç»ˆç‚¹è´¹ç”¨ï¼‰ï¼Œç¿»è½¬æ—¶å…ˆå‡æ—§è·¯å¾„è´¡çŒ®ï¼Œå†åŠ æ–°è·¯å¾„è´¡çŒ®ã€‚å…³é”®å…¬å¼ï¼š  
     ```math
     Î”ans = cnt_{x,y}Ã—(cost_{new} - cost_{old})
     ```
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå·®åˆ†æ€æƒ³æ˜¯åŠ¨æ€ç»´æŠ¤çš„æ ¸å¿ƒåˆ©å™¨  

3. **æ•°æ®ç»“æ„é€‰æ‹©ç­–ç•¥**  
   * **åˆ†æ**ï¼šæ ‘å½¢ç»“æ„(`f[]`, `sz[]`) vs è·¯å¾„æ•°ç»„(`cnt[][]`)ã€‚å‰è€…é€‚åˆé¢‘ç¹ç¿»è½¬ï¼Œåè€…é€‚åˆç¨€ç–ä¿®æ”¹  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ¹æ®æ“ä½œç‰¹å¾é€‰æ‹©æ•°æ®ç»“æ„æ˜¯ä¼˜åŒ–å…³é”®  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å¢é‡æ›´æ–°**ï¼šåªè®¡ç®—å˜åŒ–é‡è€Œéå…¨é‡é‡ç®—  
- **é€†å‘æ€ç»´**ï¼šä»é¥²æ–™æ¡¶åå‘DFSå»ºæ ‘ï¼Œé¿å…é‡å¤è®¡ç®—  
- **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šè¾¹ç•Œæ£€æŸ¥ï¼ˆå¦‚`if(x>n||y>n)return`ï¼‰  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**ï¼š
```cpp
#include <vector>
using namespace std;
typedef long long ll;
const int N=1505;

char dir[N][N];
ll c[N][N], cnt[N][N], total;
// æ›´æ–°å•æ¡è·¯å¾„è´¡çŒ®
void update_path(int x, int y, ll delta) {
    while (x <= n && y <= n) {
        cnt[x][y] += delta;
        dir[x][y]=='R' ? y++ : x++;
    }
    total += delta * c[x][y];
}
int main() {
    // åˆå§‹åŒ–cntå’Œtotal...
    while (Q--) {
        int x,y; 
        cin>>x>>y;
        update_path(x,y,-cnt[x][y]); // ç§»é™¤æ—§è·¯å¾„
        dir[x][y] = (dir[x][y]=='R' ? 'D' : 'R'); // ç¿»è½¬
        update_path(x,y,cnt[x][y]);  // æ·»åŠ æ–°è·¯å¾„
        cout<<total<<endl;
    }
}
```

**é¢˜è§£ä¸€ï¼ˆyujinningï¼‰ç‰‡æ®µèµæ**ï¼š
```cpp
void dfs_bao(ll x,ll y,ll fa,ll cha) {
    ans += cha;  // æ ¸å¿ƒï¼šå·®åˆ†æ›´æ–°ç­”æ¡ˆ
    f[id(x,y)] = fa;
    if(a[x][y-1]=='R') dfs_bao(x,y-1,fa,cha); // é€’å½’æ›´æ–°å³å­æ ‘
    if(a[x-1][y]=='D') dfs_bao(x-1,y,fa,cha); // é€’å½’æ›´æ–°ä¸‹å­æ ‘
}
```
* **äº®ç‚¹**ï¼šæ ‘å½¢é€’å½’æ›´æ–°ï¼Œé¿å…å…¨ç½‘æ ¼éå†  
* **å­¦ä¹ ç¬”è®°**ï¼šé€’å½’é“¾å¼æ›´æ–°æ—¶ï¼Œæ³¨æ„ç»ˆæ­¢æ¡ä»¶é˜²æ­¢æ ˆæº¢å‡º  

**é¢˜è§£äºŒï¼ˆNuyoah_awaï¼‰ç‰‡æ®µèµæ**ï¼š
```cpp
void update(int x,int y,int delta) {
    cnt[x][y] += delta;
    if(dir[x][y]=='R') update(x,y+1,delta); 
    else update(x+1,y,delta);  // æ·±åº¦ä¼˜å…ˆè·¯å¾„æ›´æ–°
}
```
* **äº®ç‚¹**ï¼šDFSè·¯å¾„æ›´æ–°ç›´è§‚å±•ç°æ•°æ®æµåŠ¨  
* **å­¦ä¹ ç¬”è®°**ï¼šå°è§„æ¨¡ç½‘æ ¼é€‚ç”¨ï¼Œå¤§è§„æ¨¡å»ºè®®è¿­ä»£é¿å…çˆ†æ ˆ  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
**ä¸»é¢˜**ï¼š8-bitç‰§åœºç‰©è¯­ï¼ˆåƒç´ é£è·¯å¾„è¿½è¸ªï¼‰  
**æ ¸å¿ƒæ¼”ç¤º**ï¼š  
1. **åˆå§‹åŒ–**ï¼š16x16åƒç´ ç½‘æ ¼ï¼Œæ£•è‰²å—è¡¨ç‰›ç¾¤ï¼ˆæ·±æµ…è¡¨æ•°é‡ï¼‰ï¼Œç®­å¤´è¡¨æ–¹å‘  
2. **ç¿»è½¬åŠ¨ç”»**ï¼š  
   - ç‚¹å‡»ä½ç½®(x,y)ï¼šåƒç´ ç®­å¤´90Â°æ—‹è½¬+â€œå’”åš“â€éŸ³æ•ˆ  
   - åŸè·¯å¾„ï¼šçº¢è‰²é«˜äº®ï¼Œé€æ ¼å˜æš—ï¼ˆç‰›æ•°å‡å°‘ï¼‰ï¼Œä¼´éš"æ»´"å£°  
   - æ–°è·¯å¾„ï¼šç»¿è‰²é«˜äº®ï¼Œé€æ ¼å˜äº®ï¼ˆç‰›æ•°å¢åŠ ï¼‰ï¼Œä¼´éš"å®"å£°  
3. **æ•°æ®é¢æ¿**ï¼šå®æ—¶æ˜¾ç¤º`cnt[x][y]`å€¼å’Œæ€»è´¹ç”¨`total`  
4. **AIæ¼”ç¤º**ï¼š  
   - è°ƒé€Ÿæ»‘å—æ§åˆ¶0.5x~5xé€Ÿåº¦  
   - è¿‡å…³æœºåˆ¶ï¼šæ¯å®ŒæˆQ/5æ¬¡ç¿»è½¬ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆ+é‡‘å¸é—ªçƒ  

**æŠ€æœ¯å®ç°**ï¼š  
- é¢œè‰²ç¼–ç ï¼šè·¯å¾„#FF5733(çº¢)â†’#33FF57(ç»¿)  
- éŸ³æ•ˆè§¦å‘ï¼šè·¯å¾„æ›´æ–°æ—¶Web Audio APIæ’­æ”¾8-bitéŸ³é˜¶  
- Canvasç»˜åˆ¶ï¼š`drawPath(x,y,color)`å‡½æ•°å®ç°åƒç´ è·¯å¾„æ¸²æŸ“  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **æ´›è°· P1144 æœ€çŸ­è·¯è®¡æ•°**  
   â†’ åŒç±»æŠ€å·§ï¼šè·¯å¾„è´¡çŒ®åŠ¨æ€ç»Ÿè®¡  
2. **æ´›è°· P1903 æ•°é¢œè‰²/ç»´æŠ¤é˜Ÿåˆ—**  
   â†’ åŒç±»æ€æƒ³ï¼šå¸¦ä¿®æ”¹çš„æŸ¥è¯¢ä¸å±€éƒ¨æ›´æ–°  
3. **æ´›è°· P3372 çº¿æ®µæ ‘1**  
   â†’ è¿›é˜¶è®­ç»ƒï¼šåŒºé—´æ›´æ–°ä¸ç»´æŠ¤çš„é€šç”¨ç»“æ„  

---

> ç®—æ³•å­¦ä¹ å¦‚åŒç‰§åœºè€•è€˜ï¼Œæ¯ä¸€æ¬¡ç¿»è½¬éƒ½æ˜¯æ–°çš„è·¯å¾„æ¢ç´¢ã€‚ä¿æŒå¥½å¥‡ï¼Œç²¾è¿›ä¸ä¼‘ï¼ ğŸšœğŸ’¨

---
å¤„ç†ç”¨æ—¶ï¼š189.48ç§’
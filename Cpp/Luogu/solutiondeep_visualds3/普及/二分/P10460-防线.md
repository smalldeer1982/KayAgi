# é¢˜ç›®ä¿¡æ¯

# é˜²çº¿

## é¢˜ç›®æè¿°

lsp å­¦ä¹ æ•°å­¦ç«èµ›çš„æ—¶å€™å—å°½äº†åŒä»ä»¬çš„é„™è§†ï¼Œç»ˆäºæœ‰ä¸€å¤©â€¦â€¦å—å°½å±ˆè¾±çš„ lsp é»‘åŒ–æˆä¸ºäº†é»‘æš—è‹±é›„ Lord lspã€‚å°±å¦‚åŒä¸­äºŒæ¼«ç”»çš„æƒ…èŠ‚ä¸€æ ·ï¼ŒLord lsp æ‰“ç®—æ¯æ‰è¿™ä¸ªä¸–ç•Œã€‚æ•°å­¦ç«èµ›ç•Œçš„ç²¾è‹± lqr æ‰“ç®—é˜»æ­¢ Lord lsp çš„é˜´è°‹ï¼Œäºæ˜¯å¥¹é›†åˆäº†ä¸€æ”¯ç”±æ•°å­¦ç«èµ›é€‰æ‰‹ç»„æˆçš„è¶…çº§è¡ŒåŠ¨é˜Ÿã€‚ç”±äºé˜Ÿå‘˜ä»¬ä¸ªä¸ªéƒ½æ™ºå•†è¶…ç¾¤ï¼Œå¾ˆå¿«ï¼Œè¡ŒåŠ¨é˜Ÿä¾¿æ¥åˆ°äº† Lord lsp çš„é»‘æš—åŸå ¡çš„ä¸‹æ–¹ã€‚

ä½†æ˜¯ï¼ŒåŒæ ·å¼ºå¤§çš„ Lord lsp åœ¨åŸå ¡å‘¨å›´å¸ƒç½®äº†ä¸€æ¡â€œä¸å¯è¶Šè¿‡â€çš„åšå›ºé˜²çº¿ã€‚é˜²çº¿ç”±å¾ˆå¤šé˜²å…·ç»„æˆï¼Œè¿™äº›é˜²å…·åˆ†æˆäº† $N$ ç»„ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºé˜²çº¿æ˜¯ä¸€ç»´çš„ï¼Œé‚£ä¹ˆæ¯ä¸€ç»„é˜²å…·éƒ½åˆ†å¸ƒåœ¨é˜²çº¿çš„æŸä¸€æ®µä¸Šï¼Œå¹¶ä¸”åŒä¸€ç»„é˜²å…·æ˜¯ç­‰è·ç¦»æ’åˆ—çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‰ä¸ªæ•´æ•° $S$ï¼Œ$E$ å’Œ $D$ æ¥æè¿°ä¸€ç»„é˜²å…·ï¼Œå³è¿™ä¸€ç»„é˜²å…·å¸ƒç½®åœ¨é˜²çº¿çš„ $S,S + D,S + 2Dï¼Œ\dotsï¼ŒS + KD$ï¼ˆ$K\in \Zï¼ŒS + KD\leq Eï¼ŒS + (K + 1)D>E$ï¼‰ ä½ç½®ä¸Šã€‚

é»‘åŒ–çš„ Lord lsp è®¾è®¡çš„é˜²çº¿æå…¶ç²¾è‰¯ã€‚å¦‚æœé˜²çº¿çš„æŸä¸ªä½ç½®æœ‰å¶æ•°ä¸ªé˜²å…·ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®å°±æ˜¯æ¯«æ— ç ´ç»½çš„ï¼ˆåŒ…æ‹¬è¿™ä¸ªä½ç½®ä¸€ä¸ªé˜²å…·ä¹Ÿæ²¡æœ‰çš„æƒ…å†µï¼Œå› ä¸º $0$ ä¹Ÿæ˜¯å¶æ•°ï¼‰ã€‚åªæœ‰æœ‰å¥‡æ•°ä¸ªé˜²å…·çš„ä½ç½®æœ‰ç ´ç»½ï¼Œä½†æ˜¯æ•´æ¡é˜²çº¿ä¸Šä¹Ÿæœ€å¤šåªæœ‰ä¸€ä¸ªä½ç½®æœ‰å¥‡æ•°ä¸ªé˜²å…·ã€‚ä½œä¸ºè¡ŒåŠ¨é˜Ÿçš„é˜Ÿé•¿ï¼Œlqr è¦æ‰¾åˆ°é˜²çº¿çš„ç ´ç»½ä»¥ç­–åˆ’ä¸‹ä¸€æ­¥çš„è¡ŒåŠ¨ã€‚ä½†æ˜¯ï¼Œç”±äºé˜²å…·çš„æ•°é‡å¤ªå¤šï¼Œå¥¹å®åœ¨æ˜¯ä¸èƒ½çœ‹å‡ºå“ªé‡Œæœ‰ç ´ç»½ã€‚ä½œä¸º lqr å¯ä»¥ä¿¡ä»»çš„å­¦å¼Ÿå­¦ä»¬ï¼Œä½ ä»¬è¦å¸®åŠ©å¥¹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $30\%$ çš„æ•°æ®ï¼Œæ»¡è¶³é˜²å…·æ€»æ•°ä¸å¤šäº $10  ^ {7}$ã€‚

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œæ»¡è¶³é˜²å…·æ€»æ•°ä¸å¤šäº $10  ^ {8}$ï¼Œ$S_{i}\le E_{i} $ï¼Œ$1\le T \le 5$ï¼Œ$N \le 200000$ï¼Œ$0 \le S_{i}$ ï¼Œ$E_{i}$ ï¼Œ$D_{i} \le 2^{31} - 1$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
2
1 10 1 
2 10 1 
2
1 10 1 
1 10 1 
4
1 10 1 
4 4 1 
1 5 1 
6 10 1
```

### è¾“å‡º

```
1 1
There's no weakness. 
4 3```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šé˜²çº¿ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œé˜²çº¿â€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šäºŒåˆ†ç­”æ¡ˆï¼ˆæœç´¢ï¼‰ + å‰ç¼€å’Œåº”ç”¨  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œé˜²çº¿â€é—®é¢˜çš„å…³é”®ï¼Œå°±åƒç©**â€œçŒœæ•°å­—æ¸¸æˆâ€**â€”â€”æˆ‘ä»¬è¦æ‰¾ä¸€ä¸ªè—åœ¨â€œé˜²çº¿â€é‡Œçš„â€œå¥‡æ•°ç‚¹â€ï¼ˆé˜²å…·æœ‰å¥‡æ•°ä¸ªçš„ä½ç½®ï¼‰ï¼Œä½†é˜²çº¿å¤ªé•¿ï¼ˆæœ€é•¿åˆ°2Â³Â¹-1ï¼‰ï¼Œä¸èƒ½é€ä¸ªæ£€æŸ¥ã€‚è¿™æ—¶å€™ï¼Œ**äºŒåˆ†ç­”æ¡ˆ**å°±æ´¾ä¸Šç”¨åœºäº†ï¼šæ¯æ¬¡çŒœä¸€ä¸ªä¸­é—´ä½ç½®ï¼Œç”¨**å‰ç¼€å’Œçš„å¥‡å¶æ€§**åˆ¤æ–­â€œå¥‡æ•°ç‚¹â€åœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œé€æ­¥ç¼©å°èŒƒå›´ã€‚  

ç®€å•æ¥è¯´ï¼Œ**äºŒåˆ†ç­”æ¡ˆ**çš„æ ¸å¿ƒæ˜¯â€œç”¨æ¡ä»¶åˆ¤æ–­ç¼©å°èŒƒå›´â€ï¼Œè€Œæœ¬é¢˜çš„â€œæ¡ä»¶â€å°±æ˜¯â€œå‰ç¼€å’Œçš„å¥‡å¶æ€§â€â€”â€”å› ä¸ºé¢˜ç›®ä¿è¯æœ€å¤šåªæœ‰ä¸€ä¸ªå¥‡æ•°ç‚¹ï¼Œæ‰€ä»¥å‰ç¼€å’Œåºåˆ—ä¼šå‘ˆç°â€œå‰å¶åå¥‡â€çš„å•è°ƒæ€§ï¼ˆå¥‡æ•°ç‚¹å‰çš„å‰ç¼€å’Œéƒ½æ˜¯å¶æ•°ï¼Œå¥‡æ•°ç‚¹åŠä¹‹åéƒ½æ˜¯å¥‡æ•°ï¼‰ã€‚  

**é¢˜è§£æ€è·¯å…±æ€§**ï¼šæ‰€æœ‰ä¼˜è´¨é¢˜è§£éƒ½å›´ç»•â€œäºŒåˆ†æ‰¾ä½ç½® + å‰ç¼€å’Œç®—å¥‡å¶â€å±•å¼€ï¼Œæ ¸å¿ƒéš¾ç‚¹æ˜¯**å¦‚ä½•é«˜æ•ˆè®¡ç®—å‰ç¼€å’Œ**ï¼ˆå› ä¸ºæ•°æ®å¤ªå¤§ï¼Œä¸èƒ½å­˜å‚¨æ¯ä¸ªä½ç½®çš„é˜²å…·æ•°ï¼‰ã€‚è§£å†³æ–¹æ¡ˆæ˜¯â€œéå†æ¯ç»„é˜²å…·ï¼Œè®¡ç®—è¯¥ç»„å¯¹å½“å‰å‰ç¼€çš„è´¡çŒ®â€ï¼ˆæ¯”å¦‚æŸç»„é˜²å…·è¦†ç›–[S,E]ï¼Œå…¬å·®Dï¼Œé‚£ä¹ˆå¯¹ä½ç½®xçš„è´¡çŒ®æ˜¯`(min(E,x)-S)/D + 1`ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼šæˆ‘ä»¬ä¼šç”¨**8ä½åƒç´ é£**æ¨¡æ‹Ÿé˜²çº¿ï¼Œç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºâ€œæœªæ£€æŸ¥åŒºåŸŸâ€â€œå½“å‰midä½ç½®â€â€œå¥‡æ•°ç‚¹å€™é€‰â€ã€‚äºŒåˆ†è¿‡ç¨‹ä¸­ï¼Œæ¯ç¼©å°ä¸€æ¬¡èŒƒå›´ï¼Œå¯¹åº”çš„åƒç´ å—ä¼šâ€œé—ªçƒâ€å¹¶ä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›è®¡ç®—å‰ç¼€å’Œæ—¶ï¼Œæ¯ç»„é˜²å…·çš„è´¡çŒ®ä¼šç”¨â€œå°ç®­å¤´â€æŒ‡å‘midä½ç½®ï¼Œç›´è§‚å±•ç¤ºâ€œå“ªäº›ç»„åœ¨å½±å“å½“å‰å‰ç¼€å’Œâ€ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†æ›´å¥½åœ°ç†è§£è§£é¢˜è¿‡ç¨‹ï¼Œæˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰æ–¹é¢ï¼Œç­›é€‰äº†ä»¥ä¸‹è¯„åˆ†è¾ƒé«˜ï¼ˆâ‰¥4æ˜Ÿï¼‰çš„é¢˜è§£ï¼š


### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šzzx6ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯éå¸¸â€œæ ‡å‡†â€ï¼Œå®Œç¾ä½“ç°äº†â€œäºŒåˆ†ç­”æ¡ˆ + å‰ç¼€å’Œâ€çš„æ ¸å¿ƒé€»è¾‘ã€‚`S(x)`å‡½æ•°ï¼ˆè®¡ç®—å‰ç¼€å’Œï¼‰çš„å®ç°ç®€æ´å‡†ç¡®ï¼ŒäºŒåˆ†å¾ªç¯çš„æ¡ä»¶åˆ¤æ–­ï¼ˆ`check(l,mid)`ï¼‰é€»è¾‘ä¸¥è°¨ï¼Œç”šè‡³æå‰è®¡ç®—äº†é˜²çº¿çš„æœ€å°/æœ€å¤§ä½ç½®ï¼ˆ`L/R`ï¼‰æ¥ä¼˜åŒ–äºŒåˆ†èŒƒå›´ã€‚ä»£ç é£æ ¼è§„èŒƒï¼Œå˜é‡åï¼ˆå¦‚`s[i]`è¡¨ç¤ºç¬¬iç»„çš„èµ·ç‚¹ï¼‰æ¸…æ™°æ˜“æ‡‚ï¼Œç‰¹åˆ«é€‚åˆæ–°æ‰‹æ¨¡ä»¿ã€‚


### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šzqt2011823ï¼‰  
* **ç‚¹è¯„**ï¼šæ­¤é¢˜è§£çš„â€œå®ç”¨æ€§â€å¾ˆå¼ºï¼ä½œè€…å…ˆé€šè¿‡â€œæ€»é˜²å…·æ•°çš„å¥‡å¶æ€§â€å¿«é€Ÿåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¥‡æ•°ç‚¹ï¼ˆæ€»å¶æ•°åˆ™ç›´æ¥è¾“å‡ºæ— è§£ï¼‰ï¼Œé¿å…äº†ä¸å¿…è¦çš„äºŒåˆ†ã€‚äºŒåˆ†è¿‡ç¨‹ä¸­ï¼Œ`check(pos)`å‡½æ•°ç›´æ¥è®¡ç®—åˆ°posçš„å‰ç¼€å’Œï¼Œé€»è¾‘ç›´ç™½ã€‚æœ€åç”¨â€œéå†æ‰€æœ‰ç»„â€éªŒè¯ç›®æ ‡ä½ç½®çš„é˜²å…·æ•°ï¼Œè¾¹ç•Œå¤„ç†ï¼ˆå¦‚`ans>=S[i]&&ans<=E[i]`ï¼‰éå¸¸ä¸¥è°¨ï¼Œæ˜¯ä¸€ä»½â€œæ¥åœ°æ°”â€çš„å®æˆ˜é¢˜è§£ã€‚


### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼ša18981823590ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„â€œä¼˜åŒ–æ„è¯†â€å€¼å¾—å­¦ä¹ ï¼ä½œè€…ç”¨`ios::sync_with_stdio(0)`å…³é—­åŒæ­¥ï¼ŒåŠ å¿«è¾“å…¥é€Ÿåº¦ï¼ˆåº”å¯¹å¤§æ•°æ®ï¼‰ï¼›äºŒåˆ†å¾ªç¯çš„å†™æ³•ï¼ˆ`x += (y-x)/2 +1`ï¼‰é¿å…äº†æº¢å‡ºé—®é¢˜ã€‚`d(e)`å‡½æ•°ï¼ˆå‰ç¼€å’Œï¼‰çš„å®ç°ä¸é¢˜è§£ä¸€ä¸€è‡´ï¼Œä½†ä»£ç æ›´ç®€æ´ï¼Œé€‚åˆè¿½æ±‚â€œä»£ç æ•ˆç‡â€çš„å­¦ä¹ è€…å‚è€ƒã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œå¤§å®¶å¸¸é‡åˆ°ä»¥ä¸‹3ä¸ªæ ¸å¿ƒéš¾ç‚¹ï¼Œæˆ‘ç»“åˆä¼˜è´¨é¢˜è§£çš„ç»éªŒï¼Œç»™å‡ºåº”å¯¹ç­–ç•¥ï¼š


### 1. å…³é”®ç‚¹1ï¼šå¦‚ä½•å¤„ç†â€œå¤§æ•°æ®èŒƒå›´â€çš„å‰ç¼€å’Œï¼Ÿ  
**éš¾ç‚¹**ï¼šé˜²çº¿é•¿åº¦åˆ°2Â³Â¹-1ï¼Œæ— æ³•ç”¨æ•°ç»„å­˜å‚¨æ¯ä¸ªä½ç½®çš„é˜²å…·æ•°ã€‚  
**ç­–ç•¥**ï¼š**å®æ—¶è®¡ç®—å‰ç¼€å’Œ**â€”â€”éå†æ¯ç»„é˜²å…·ï¼Œè®¡ç®—è¯¥ç»„å¯¹å½“å‰ä½ç½®xçš„è´¡çŒ®ï¼ˆ`(min(E[i],x)-S[i])/D[i] +1`ï¼‰ã€‚æ¯”å¦‚ï¼ŒæŸç»„é˜²å…·æ˜¯`S=2,E=10,D=1`ï¼Œx=5ï¼Œè´¡çŒ®å°±æ˜¯`(5-2)/1 +1=4`ï¼ˆè¦†ç›–2ã€3ã€4ã€5å››ä¸ªä½ç½®ï¼‰ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤§æ•°æ®èŒƒå›´çš„é—®é¢˜ï¼Œè¦â€œç®—è€Œä¸å­˜â€ï¼Œç”¨æ•°å­¦å…¬å¼ä»£æ›¿æ•°ç»„å­˜å‚¨ã€‚


### 2. å…³é”®ç‚¹2ï¼šå¦‚ä½•è®¾è®¡äºŒåˆ†çš„â€œæ¡ä»¶åˆ¤æ–­â€ï¼Ÿ  
**éš¾ç‚¹**ï¼šä¸çŸ¥é“å¦‚ä½•ç”¨å‰ç¼€å’Œåˆ¤æ–­å¥‡æ•°ç‚¹çš„ä½ç½®ã€‚  
**ç­–ç•¥**ï¼šåˆ©ç”¨â€œå‰ç¼€å’Œçš„å•è°ƒæ€§â€â€”â€”å¦‚æœ`S(mid)`æ˜¯å¥‡æ•°ï¼Œè¯´æ˜å¥‡æ•°ç‚¹åœ¨`[l,mid]`é‡Œï¼ˆå› ä¸ºå‰é¢çš„å‰ç¼€å’Œéƒ½æ˜¯å¶æ•°ï¼‰ï¼›å¦‚æœæ˜¯å¶æ•°ï¼Œè¯´æ˜å¥‡æ•°ç‚¹åœ¨`[mid+1,r]`é‡Œã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šäºŒåˆ†çš„æ ¸å¿ƒæ˜¯â€œæ‰¾åˆ°ä¸€ä¸ªå¯ä»¥åˆ¤æ–­å·¦å³çš„æ¡ä»¶â€ï¼Œæœ¬é¢˜çš„æ¡ä»¶å°±æ˜¯â€œå‰ç¼€å’Œçš„å¥‡å¶æ€§â€ã€‚


### 3. å…³é”®ç‚¹3ï¼šå¦‚ä½•éªŒè¯æ‰¾åˆ°çš„ä½ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ  
**éš¾ç‚¹**ï¼šäºŒåˆ†æ‰¾åˆ°çš„ä½ç½®ï¼Œå¦‚ä½•ç¡®è®¤å®ƒçš„é˜²å…·æ•°æ˜¯å¥‡æ•°ï¼Ÿ  
**ç­–ç•¥**ï¼šè®¡ç®—è¯¥ä½ç½®çš„å‰ç¼€å’Œå‡å»å‰ä¸€ä¸ªä½ç½®çš„å‰ç¼€å’Œï¼ˆ`S(ans) - S(ans-1)`ï¼‰ï¼Œç»“æœå°±æ˜¯è¯¥ä½ç½®çš„é˜²å…·æ•°ã€‚å› ä¸ºå‰ç¼€å’Œæ˜¯â€œåˆ°ansçš„æ€»æ•°â€ï¼Œå‡å»â€œåˆ°ans-1çš„æ€»æ•°â€ï¼Œå°±æ˜¯ansä½ç½®çš„æ•°é‡ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œçš„â€œå·®åˆ†â€å¯ä»¥å¿«é€Ÿæ±‚å•ç‚¹å€¼ï¼Œè¿™æ˜¯å¸¸ç”¨æŠ€å·§ï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§A**ï¼šé‡åˆ°â€œæ‰¾å”¯ä¸€æ»¡è¶³æ¡ä»¶çš„ç‚¹â€ä¸”â€œæ¡ä»¶æœ‰å•è°ƒæ€§â€ï¼Œä¼˜å…ˆè€ƒè™‘äºŒåˆ†ç­”æ¡ˆã€‚  
- **æŠ€å·§B**ï¼šå¤§æ•°æ®èŒƒå›´çš„â€œæ±‚å’Œé—®é¢˜â€ï¼Œç”¨â€œéå†å…ƒç´ ç®—è´¡çŒ®â€ä»£æ›¿â€œå­˜å‚¨æ‰€æœ‰å€¼â€ã€‚  
- **æŠ€å·§C**ï¼šå‰ç¼€å’Œçš„â€œå·®åˆ†â€å¯ä»¥å¿«é€Ÿæ±‚å•ç‚¹å€¼ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

åœ¨æ·±å…¥åˆ†æå…·ä½“é¢˜è§£ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸ª**é€šç”¨æ ¸å¿ƒå®ç°**ï¼Œå¸®åŠ©å¤§å®¶æŠŠæ¡æ•´ä½“æ¡†æ¶ï¼š


### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œæ˜¯â€œäºŒåˆ†ç­”æ¡ˆ + å‰ç¼€å’Œâ€çš„å…¸å‹å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <climits>
using namespace std;

struct Defender {
    int s, e, d;
};

vector<Defender> defs;
int n;

// è®¡ç®—åˆ°ä½ç½®xçš„å‰ç¼€å’Œï¼ˆé˜²å…·æ€»æ•°ï¼‰
long long calc_sum(int x) {
    long long sum = 0;
    for (auto &d : defs) {
        if (d.s > x) continue;
        int end = min(d.e, x);
        sum += (end - d.s) / d.d + 1;
    }
    return sum;
}

int main() {
    int T;
    cin >> T;
    while (T--) {
        cin >> n;
        defs.clear();
        int min_s = INT_MAX, max_e = INT_MIN;
        for (int i = 0; i < n; ++i) {
            int s, e, d;
            cin >> s >> e >> d;
            defs.push_back({s, e, d});
            min_s = min(min_s, s);
            max_e = max(max_e, e);
        }
        // å…ˆåˆ¤æ–­æ€»å‰ç¼€å’Œæ˜¯å¦ä¸ºå¶æ•°ï¼ˆæ— å¥‡æ•°ç‚¹ï¼‰
        if (calc_sum(max_e) % 2 == 0) {
            cout << "There's no weakness.\n";
            continue;
        }
        // äºŒåˆ†æ‰¾å¥‡æ•°ç‚¹
        int l = min_s, r = max_e;
        int ans = -1;
        while (l <= r) {
            int mid = l + (r - l) / 2;  // é¿å…æº¢å‡º
            if (calc_sum(mid) % 2 == 1) {
                ans = mid;
                r = mid - 1;  // æ‰¾æ›´å·¦è¾¹çš„å¯èƒ½
            } else {
                l = mid + 1;
            }
        }
        // è®¡ç®—è¯¥ä½ç½®çš„é˜²å…·æ•°
        long long cnt = calc_sum(ans) - calc_sum(ans - 1);
        cout << ans << " " << cnt << "\n";
    }
    return 0;
}
```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–è¾“å…¥ï¼Œå­˜å‚¨æ¯ç»„é˜²å…·çš„Sã€Eã€Dï¼›  
  2. è®¡ç®—æ€»å‰ç¼€å’Œï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å¥‡æ•°ç‚¹ï¼›  
  3. äºŒåˆ†æŸ¥æ‰¾å¥‡æ•°ç‚¹çš„ä½ç½®ï¼›  
  4. è®¡ç®—è¯¥ä½ç½®çš„é˜²å…·æ•°ï¼Œè¾“å‡ºç»“æœã€‚  


### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šzzx6ï¼‰  
* **äº®ç‚¹**ï¼šå‰ç¼€å’Œå‡½æ•°`S(x)`çš„å®ç°ç®€æ´ï¼ŒäºŒåˆ†é€»è¾‘ä¸¥è°¨ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
long long S(long long x) {
    long long sum = 0;
    for (int i = 1; i <= n; ++i)
        if (s[i] <= x) sum += (min(x, t[i]) - s[i]) / d[i] + 1;
    return sum;
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯å‰ç¼€å’Œçš„æ ¸å¿ƒâ€”â€”éå†æ¯ç»„é˜²å…·ï¼Œå¦‚æœèµ·ç‚¹`s[i]`â‰¤xï¼Œå°±è®¡ç®—è¯¥ç»„å¯¹xçš„è´¡çŒ®ã€‚æ¯”å¦‚ï¼Œ`min(x, t[i])`æ˜¯è¯¥ç»„å¯¹xçš„â€œå®é™…å³ç«¯ç‚¹â€ï¼ˆå¦‚æœxè¶…è¿‡t[i]ï¼Œå°±å–t[i]ï¼‰ï¼Œ`(å®é™…å³ç«¯ç‚¹ - s[i])/d[i] +1`æ˜¯è¯¥ç»„è¦†ç›–çš„ä½ç½®æ•°ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œçš„è®¡ç®—è¦â€œç²¾ç¡®åˆ°æ¯ç»„çš„è´¡çŒ®â€ï¼Œä¸èƒ½é—æ¼æˆ–é‡å¤ã€‚


### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šzqt2011823ï¼‰  
* **äº®ç‚¹**ï¼šç”¨æ€»é˜²å…·æ•°çš„å¥‡å¶æ€§å¿«é€Ÿåˆ¤æ–­æ— è§£æƒ…å†µã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
cnt += (E[i] - S[i])/D[i] +1;  // è®¡ç®—æ€»é˜²å…·æ•°
if (!(cnt & 1)) {
    cout << "There's no weakness.\n";
    continue;
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  æ€»é˜²å…·æ•°æ˜¯æ‰€æœ‰ç»„çš„è´¡çŒ®ä¹‹å’Œï¼Œå¦‚æœæ˜¯å¶æ•°ï¼Œè¯´æ˜æ²¡æœ‰å¥‡æ•°ç‚¹ï¼ˆå› ä¸ºå¶æ•°ä¸ªå¥‡æ•°ç›¸åŠ æ˜¯å¶æ•°ï¼Œå¥‡æ•°ä¸ªå¥‡æ•°ç›¸åŠ æ˜¯å¥‡æ•°ï¼‰ã€‚è¿™æ®µä»£ç ç”¨â€œä½è¿ç®—&1â€ä»£æ›¿â€œ%2â€ï¼Œæ•ˆç‡æ›´é«˜ã€‚  
ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæå‰åˆ¤æ–­æ— è§£æƒ…å†µï¼Œå¯ä»¥èŠ‚çœäºŒåˆ†çš„æ—¶é—´ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  

ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£â€œäºŒåˆ†æ‰¾å¥‡æ•°ç‚¹â€çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬è®¾è®¡äº†**â€œåƒç´ é˜²çº¿æ¢é™©â€**åŠ¨ç”»ï¼Œèåˆ8ä½å¤å¤æ¸¸æˆå…ƒç´ ï¼š


### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ æ¢é™©å®¶**åœ¨ä¸€æ¡åƒç´ åŒ–çš„â€œé˜²çº¿â€ä¸Šæ‰¾â€œå¥‡æ•°ç‚¹â€ï¼Œç”¨äºŒåˆ†æ³•é€æ­¥ç¼©å°èŒƒå›´ï¼Œä¼´éšéŸ³æ•ˆå’Œå…³å¡å¥–åŠ±ã€‚


### è®¾è®¡æ€è·¯ç®€è¿°  
é‡‡ç”¨8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰ï¼Œè¥é€ è½»æ¾çš„å­¦ä¹ æ°›å›´ï¼›ç”¨â€œå®â€çš„éŸ³æ•ˆå¼ºåŒ–äºŒåˆ†çš„â€œç¼©å°èŒƒå›´â€æ“ä½œï¼Œç”¨â€œæ»´â€çš„éŸ³æ•ˆæç¤ºå‰ç¼€å’Œè®¡ç®—ï¼›æ¯æ‰¾åˆ°ä¸€ä¸ªå€™é€‰ä½ç½®ï¼Œè§†ä¸ºâ€œå°å…³å¡â€å®Œæˆï¼Œå¥–åŠ±ä¸€é¢—â€œåƒç´ æ˜Ÿæ˜Ÿâ€ï¼Œå¢åŠ æˆå°±æ„Ÿã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  

1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤ºä¸€æ¡æ¨ªå‘çš„åƒç´ é˜²çº¿ï¼ˆç”¨ç°è‰²åƒç´ å—ç»„æˆï¼‰ï¼Œå·¦ä¾§æ˜¯â€œæ§åˆ¶é¢æ¿â€ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»æ¾BGMï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - é˜²çº¿ä¸¤ç«¯æ˜¾ç¤ºâ€œLâ€ï¼ˆå·¦è¾¹ç•Œï¼‰å’Œâ€œRâ€ï¼ˆå³è¾¹ç•Œï¼‰çš„åƒç´ æ–‡å­—ï¼Œä¸­é—´çš„â€œmidâ€ä½ç½®ç”¨**é»„è‰²é—ªçƒå—**æ ‡è®°ã€‚  
   - æ¯ç»„é˜²å…·ç”¨ä¸åŒé¢œè‰²çš„â€œå°æ–¹å—â€è¡¨ç¤ºï¼ˆå¦‚çº¢è‰²ä»£è¡¨ç»„1ï¼Œè“è‰²ä»£è¡¨ç»„2ï¼‰ï¼Œæ¼‚æµ®åœ¨é˜²çº¿ä¸Šæ–¹ã€‚  

3. **æ ¸å¿ƒæ­¥éª¤æ¼”ç¤º**ï¼š  
   - **äºŒåˆ†ç¼©å°èŒƒå›´**ï¼šç‚¹å‡»â€œå•æ­¥â€ï¼Œmidä½ç½®çš„é»„è‰²å—ä¼šâ€œè·³ä¸€ä¸‹â€ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›å¦‚æœ`S(mid)`æ˜¯å¥‡æ•°ï¼Œå·¦ä¾§çš„é˜²çº¿ä¼šå˜æˆ**ç»¿è‰²**ï¼ˆè¡¨ç¤ºå¥‡æ•°ç‚¹åœ¨å·¦è¾¹ï¼‰ï¼Œå¦åˆ™å³ä¾§å˜æˆç»¿è‰²ã€‚  
   - **å‰ç¼€å’Œè®¡ç®—**ï¼šè®¡ç®—`S(mid)`æ—¶ï¼Œå¯¹åº”çš„é˜²å…·ç»„ä¼šâ€œä¸‹è½â€åˆ°midä½ç½®ï¼Œç”¨â€œå°ç®­å¤´â€æŒ‡å‘midï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆï¼›è´¡çŒ®å€¼ä¼šæ˜¾ç¤ºåœ¨é˜²å…·ç»„æ—è¾¹ï¼ˆå¦‚â€œ+4â€è¡¨ç¤ºè¯¥ç»„è´¡çŒ®4ä¸ªé˜²å…·ï¼‰ã€‚  
   - **æ‰¾åˆ°å¥‡æ•°ç‚¹**ï¼šå½“äºŒåˆ†ç»“æŸï¼Œå¥‡æ•°ç‚¹ä¼šå˜æˆ**çº¢è‰²é—ªçƒå—**ï¼Œä¼´éšâ€œèƒœåˆ©éŸ³æ•ˆâ€ï¼ˆå¦‚ã€Šå¡å°”è¾¾ä¼ è¯´ã€‹çš„å®ç®±å£°ï¼‰ï¼Œå±å¹•å¼¹å‡ºâ€œæ‰¾åˆ°å•¦ï¼â€çš„åƒç´ æ–‡å­—ã€‚  

4. **äº¤äº’æ§åˆ¶**ï¼š  
   - æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€å¸§çœ‹è¿‡ç¨‹ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¯è°ƒé€Ÿåº¦ï¼‰ã€â€œé‡ç½®åŠ¨ç”»â€ï¼ˆé‡æ–°å¼€å§‹ï¼‰ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ  

ç†è§£äº†â€œäºŒåˆ†ç­”æ¡ˆ + å‰ç¼€å’Œâ€çš„æ€è·¯åï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ç›¸ä¼¼é—®é¢˜ï¼Œå·©å›ºæŠ€å·§ï¼š


### ç›¸ä¼¼é—®é¢˜æ¨è  
1. **æ´›è°· P1102 A-B æ•°å¯¹**ï¼šç”¨äºŒåˆ†æ‰¾æ»¡è¶³æ¡ä»¶çš„æ•°å¯¹ï¼Œè€ƒå¯Ÿâ€œäºŒåˆ†çš„æ¡ä»¶è®¾è®¡â€ã€‚  
2. **æ´›è°· P2249 æŸ¥æ‰¾**ï¼šç»å…¸äºŒåˆ†æŸ¥æ‰¾é—®é¢˜ï¼Œè€ƒå¯Ÿâ€œäºŒåˆ†çš„è¾¹ç•Œå¤„ç†â€ã€‚  
3. **æ´›è°· P1873 ç æ ‘**ï¼šç”¨äºŒåˆ†æ‰¾â€œæœ€å¤§ç ä¼é«˜åº¦â€ï¼Œè€ƒå¯Ÿâ€œå‰ç¼€å’Œçš„å˜å½¢ï¼ˆæ±‚å’Œå˜æˆæ±‚æ€»é•¿åº¦ï¼‰â€ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  

**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªï¼š_xdd_ï¼‰**ï¼šâ€œåˆšå¼€å§‹æ²¡çœ‹å‡ºæ¥æ˜¯äºŒåˆ†ç­”æ¡ˆã€‚åæ¥æƒ³åˆ°â€˜å¥‡æ•°+å¶æ•°=å¥‡æ•°â€™ï¼Œå¦‚æœmidå·¦è¾¹çš„é˜²å…·æ•°æ˜¯å¥‡æ•°ï¼Œè¯´æ˜ç ´ç»½åœ¨å·¦è¾¹ï¼Œå³è¾¹åŒç†ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹â€”â€”å¾ˆå¤šæ—¶å€™ï¼ŒäºŒåˆ†çš„æ€è·¯è—åœ¨â€œæ¡ä»¶çš„å•è°ƒæ€§â€é‡Œã€‚é‡åˆ°â€œæ‰¾å”¯ä¸€æ»¡è¶³æ¡ä»¶çš„ç‚¹â€çš„é—®é¢˜ï¼Œå…ˆæƒ³æƒ³â€œæœ‰æ²¡æœ‰å¯ä»¥åˆ¤æ–­å·¦å³çš„æ¡ä»¶â€ï¼Œæ¯”å¦‚æœ¬é¢˜çš„â€œå‰ç¼€å’Œå¥‡å¶æ€§â€ã€‚


## æ€»ç»“  

æœ¬æ¬¡å…³äºâ€œé˜²çº¿â€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£â€œäºŒåˆ†ç­”æ¡ˆ + å‰ç¼€å’Œâ€çš„æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äºâ€œå¤šæ€è€ƒæ¡ä»¶çš„å•è°ƒæ€§â€â€œå¤šç»ƒä¹ å¤§æ•°æ®çš„å¤„ç†â€ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š81.92ç§’
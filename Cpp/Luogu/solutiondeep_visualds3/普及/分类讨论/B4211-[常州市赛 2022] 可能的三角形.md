# 题目信息

# [常州市赛 2022] 可能的三角形

## 题目背景

搬运自 <http://czoj.com.cn/p/452>。数据为民间数据。



## 题目描述

小 $\text{X}$ 和小 $\text Y$ 都是龙城学堂的资深学员，为了丰富学弟学妹们的课余生活，小 $\text{X}$ 和小 $\text{Y}$ 发明了一个简单的数字游戏。

小 $\text{Y}$ 有三个正整数 $A,B,C(2≤A≤B≤C)$，且 $A,B,C$ 刚好构成一个三角形的三条边。这些数字是保密的，他不会直接透露给小 $\text{X}$。他会告诉小 $\text{X}$ 一共 $4$ 个正整数 $x_1,x_2,x_3,x_4$，并宣称 $x_1,x_2,x_3,x_4$ 每个数必定是 $A,B,C,A+B,A+C,B+C$ 或 $A+B+C$ 之一。

为了公平起见，小 $\text{Y}$ 不可能撒谎，也就是说他给出的这些正整数里一定存在至少一组对应的合法的 $(A,B,C)$，满足 $A,B,C$ 恰好是某个三角形的三条边。

小 $\text{X}$ 百思不得其解，所以请你来求出有哪些三元组 $(A,B,C)$ 符合条件。

## 说明/提示

### 样例解释
对于第一组解，$A=2,B=2,C=3$，输入的 $4$ 个数对应的值分别是 $A,A+B,A+C,A+B+C$；

对于第二组解，$A=2,B=3,C=4$，输入的 $4$ 个数对应的值分别是 $A,C,A+B,B+C$；

对于第三组解，$A=2,B=4,C=5$，输入的 $4$ 个数对应的值分别是 $A,B,C,A+C$；

除此之外不可能存在其它符合条件的三角形了。注意 $(1,2,4)$ 不可能组成三角形。

### 数据规模与约定
对于所有数据，$1≤x_1,x_2,x_3,x_4≤10^9$。
| 测试点编号 | 特殊性质 |
| :----------: | :----------: |
| $1$ | 保证答案的 $A,B,C$ 构成直角三角形 |
| $2$ | 保证答案的 $A,B,C$ 构成等腰三角形 |
| $3$ | 保证答案的 $A,B,C$ 构成等边三角形 |
| $1 \sim 6$ | 保证答案的 $A,B,C$ 唯一 |
| $7 \sim 10$ | $1≤x_1,x_2,x_3,x_4≤100$ |
| $11 \sim 20$ | 无 |

## 样例 #1

### 输入

```
2 4 5 7```

### 输出

```
2 2 3
2 3 4
2 4 5```

# AI分析结果


### 💡 Kay的C++算法解析：可能的三角形 深入学习指南 💡

#### 1. 题目解读与核心算法识别
✨ **本题主要考察**：`枚举` + `数学推理`

🗣️ **初步分析**：
> 这道题就像玩一个数字拼图游戏！小Y隐藏了三角形三边A,B,C，只给出4个线索数字（每个线索对应A/B/C或它们的组合）。我们需要尝试所有可能的拼图组合（共35种情况），找出所有满足三角形条件的(A,B,C)组合。
> - **核心思路**：枚举所有可能的映射关系（4个数字对应7个表达式中的哪4个），推导A,B,C的值，验证三角形条件（A+B>C, A≤B≤C）
> - **难点突破**：关键在高效处理35种映射关系，避免遗漏或重复。可视化中将用像素拼图展示映射过程，当拼图成功时会播放"叮！"的音效并高亮三角形
> - **像素动画设计**：复古红白机风格界面，左侧显示4个输入数字块，右侧7个表达式槽位。每次尝试映射时，数字块会滑动到对应槽位，失败时槽位变红闪烁，成功时构建出像素三角形并旋转展示

---

#### 2. 精选优质题解参考
**题解（作者：HanSF）**
* **点评**：
  - 思路完整性：★★★☆（覆盖所有35种情况但缺乏分类逻辑）
  - 代码规范性：★★★（使用结构体存储解，但变量命名a1/a2/a3不够直观）
  - 算法有效性：★★★★（暴力枚举确保不漏解，时间复杂度O(1)可接受）
  - 实践价值：★★★（可直接运行但调试困难，缺少情况注释）
  > 主要亮点：完整实现35种映射推导，利用排序+结构体去重。建议学习其枚举的完备性，但需改进代码可读性

---

#### 3. 核心难点辨析与解题策略
1. **难点1：映射关系复杂性**
   * **分析**：4个数字可能对应7个表达式中的任意4个，需建立推导公式（如当x1=A, x2=B+C时，C=x2-B）
   * 💡 学习笔记：用代数思维处理映射关系，设未知数建立方程

2. **难点2：解的有效性验证**
   * **分析**：推导出的A,B,C需满足：①A≤B≤C ②A+B>C（三角形定理）③非负整数
   * 💡 学习笔记：验证比求解更重要！务必检查边界条件

3. **难点3：结果去重处理**
   * **分析**：不同映射可能得到相同(A,B,C)，需排序后相邻比较去重
   * 💡 学习笔记：`sort+unique`或遍历比较是去重常用手段

✨ **解题技巧总结**
- **枚举优化**：先对输入排序，减少无效尝试（如x4必为最大值）
- **模块化设计**：将验证逻辑封装成check()函数提高可读性
- **防御性编程**：检查除数非零、整数解等边界情况

---

#### 4. C++核心代码实现赏析
**通用核心实现参考**
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

struct Tri { int a,b,c; }; // 封装三角形三边

void check(vector<Tri>& ans, int a, int b, int c) {
    if(a<=0||b<=0||c<=0) return;
    if(a>b) swap(a,b); if(b>c) swap(b,c); // 保证a≤b≤c
    if(a+b>c && a+c>b && b+c>a) // 三角形验证
        ans.push_back({a,b,c});
}

int main() {
    int x[4]; cin>>x[0]>>x[1]>>x[2]>>x[3];
    sort(x, x+4); // 关键！先排序简化逻辑
    vector<Tri> solutions;
    
    // 示例：处理x1=A, x2=B, x3=C, x4=A+B+C的情况
    int A = x[0], B = x[1], C = x[2];
    if(x[3] == A+B+C) // 映射关系验证
        check(solutions, A, B, C);
    
    /* 实际需实现35种情况，此处省略其他34种 */
    
    // 去重输出
    sort(solutions.begin(), solutions.end(), [](Tri p, Tri q){
        return tie(p.a,p.b,p.c) < tie(q.a,q.b,q.c); 
    });
    auto last = unique(solutions.begin(), solutions.end());
    for(auto it=solutions.begin(); it!=last; ++it) 
        cout<<it->a<<" "<<it->b<<" "<<it->c<<endl;
}
```

**题解片段赏析**
```cpp
// 情况35：当x1+x2+x3=2*(A+B+C)时 
int a1 = (x[1]+x[2]-x[3])/2; 
int a2 = (x[1]-x[2]+x[3])/2;
int a3 = (x[2]-x[1]+x[3])/2;
check(a1,a2,a3);
```
> **代码解读**：这是最精妙的映射！通过解方程组：
>   `A = (x1+x2-x3)/2`  
>   `B = (x1-x2+x3)/2`  
>   `C = (-x1+x2+x3)/2`
> 注意：/2前需确保分子为偶数，否则无整数解
> 💡 **学习笔记**：代数技巧可减少枚举量，但需数学证明支持

---

#### 5. 算法可视化：像素动画演示
* **主题**："三角形解谜屋"（8-bit像素风）
* **核心交互流程**：
  ```mermaid
  graph TD
    A[输入4个数字块] --> B[数字滑入右侧表达式槽]
    B --> C{映射有效？}
    C -- 否 --> D[槽位变红闪烁+错误音效]
    C -- 是 --> E[计算A,B,C值]
    E --> F{满足三角形？}
    F -- 否 --> D
    F -- 是 --> G[生成像素三角形+胜利音效]
  ```
* **关键动画设计**：
  1. **控制面板**：复古街机按钮（开始/步进/调速）
  2. **映射过程**：数字块像素化移动，附带"咔嗒"音效
  3. **成功特效**：三角形旋转展示，背景绽放像素烟花
  4. **自动演示**：AI角色依次尝试35种情况，速度可调

---

#### 6. 拓展练习与相似问题思考
* **相似思维拓展**：
  1. 表达式映射：P1003 铺地毯（坐标映射）
  2. 条件组合验证：P1217 回文质数（双条件过滤）
  3. 几何约束：P5717 三角形分类（强化版验证）

* **推荐练习**：
  1. **洛谷 P1003** - 理解多条件映射
  2. **洛谷 P1217** - 训练数学枚举能力
  3. **洛谷 P5717** - 巩固三角形定理应用

---

> 本次解析结束！记住：好的枚举需要**完备性**（不遗漏）和**高效性**（不重复）。尝试用可视化工具模拟35种情况，你会惊讶于自己的进步！🚀

---
处理用时：102.96秒
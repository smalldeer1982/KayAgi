# é¢˜ç›®ä¿¡æ¯

# é‚®é€’å‘˜é€ä¿¡

## é¢˜ç›®æè¿°

æœ‰ä¸€ä¸ªé‚®é€’å‘˜è¦é€ä¸œè¥¿ï¼Œé‚®å±€åœ¨èŠ‚ç‚¹ $1$ã€‚ä»–æ€»å…±è¦é€ $n-1$ æ ·ä¸œè¥¿ï¼Œå…¶ç›®çš„åœ°åˆ†åˆ«æ˜¯èŠ‚ç‚¹ $2$ åˆ°èŠ‚ç‚¹ $n$ã€‚ç”±äºè¿™ä¸ªåŸå¸‚çš„äº¤é€šæ¯”è¾ƒç¹å¿™ï¼Œå› æ­¤æ‰€æœ‰çš„é“è·¯éƒ½æ˜¯å•è¡Œçš„ï¼Œå…±æœ‰ $m$ æ¡é“è·¯ã€‚è¿™ä¸ªé‚®é€’å‘˜æ¯æ¬¡åªèƒ½å¸¦ä¸€æ ·ä¸œè¥¿ï¼Œå¹¶ä¸”**è¿é€æ¯ä»¶ç‰©å“è¿‡åå¿…é¡»è¿”å›é‚®å±€**ã€‚æ±‚é€å®Œè¿™ $n-1$ æ ·ä¸œè¥¿å¹¶ä¸”**æœ€ç»ˆå›åˆ°é‚®å±€**æœ€å°‘éœ€è¦çš„æ—¶é—´ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $30\%$ çš„æ•°æ®ï¼Œ$1 \leq n \leq 200$ã€‚

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 \leq n \leq 10^3$ï¼Œ$1 \leq m \leq 10^5$ï¼Œ$1\leq u,v \leq n$ï¼Œ$1 \leq w \leq 10^4$ï¼Œè¾“å…¥ä¿è¯ä»»æ„ä¸¤ç‚¹éƒ½èƒ½äº’ç›¸åˆ°è¾¾ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 10
2 3 5
1 5 5
3 5 6
1 2 8
1 3 8
5 3 4
4 1 8
4 5 3
3 5 6
5 4 2```

### è¾“å‡º

```
83```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šé‚®é€’å‘˜é€ä¿¡ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æœ€çŸ­è·¯ç®—æ³•ä¸åå‘å›¾æŠ€å·§`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> é‚®é€’å‘˜é€ä¿¡çš„æœ¬è´¨æ˜¯**æœ‰å‘å›¾æœ€çŸ­è·¯é—®é¢˜**ã€‚æƒ³è±¡åŸå¸‚é“è·¯æ˜¯å•è¡Œé“ç»„æˆçš„ç½‘ç»œï¼ˆå¦‚å•å‘ä¼ é€å¸¦ï¼‰ï¼Œé‚®é€’å‘˜éœ€è¦æ‰¾åˆ°ä»é‚®å±€ï¼ˆèŠ‚ç‚¹1ï¼‰åˆ°æ‰€æœ‰å®¢æˆ·ï¼ˆèŠ‚ç‚¹2~nï¼‰çš„æœ€çŸ­è·¯å¾„ï¼ˆé€ä¿¡ï¼‰ï¼Œå†ä»å®¢æˆ·è¿”å›é‚®å±€çš„æœ€çŸ­è·¯å¾„ï¼ˆè¿”ç¨‹ï¼‰ã€‚  
> - **æ ¸å¿ƒæŠ€å·§ï¼šåå‘å›¾**ã€‚è¿”ç¨‹è·¯å¾„è®¡ç®—å·§å¦™è½¬åŒ–ä¸ºï¼šæ„å»ºä¸åŸå›¾æ–¹å‘ç›¸åçš„"é•œåƒé“è·¯ç½‘"ï¼Œåœ¨é•œåƒä¸­æ±‚é‚®å±€åˆ°å®¢æˆ·çš„æœ€çŸ­è·¯ï¼Œå³åŸå›¾è¿”ç¨‹æœ€çŸ­è·¯  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåœ¨åƒç´ åŠ¨ç”»ä¸­ï¼Œç”¨è“è‰²ç®­å¤´è¡¨ç¤ºåŸå›¾è·¯å¾„ï¼ˆå»ç¨‹ï¼‰ï¼Œçº¢è‰²ç®­å¤´è¡¨ç¤ºåå‘å›¾è·¯å¾„ï¼ˆè¿”ç¨‹ï¼‰ã€‚å…³é”®æ­¥éª¤é«˜äº®å½“å‰å¤„ç†çš„èŠ‚ç‚¹ï¼ˆé—ªçƒé»„è‰²ï¼‰ï¼Œç”¨éŸ³æ•ˆæ ‡è®°æ¾å¼›æ“ä½œï¼ˆ"å®"å£°ï¼‰å’Œè·¯å¾„æ›´æ–°ï¼ˆ"å”°"å£°ï¼‰  
> - **å¤å¤æ¸¸æˆåŒ–**ï¼šè®¾è®¡ä¸º"åƒç´ å¿«é€’å‘˜"åœ¨8-bitç½‘æ ¼åŸå¸‚é€è´§ã€‚è‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼åƒç»å…¸æ¸¸æˆã€Šå¿«é€’éª‘å£«ã€‹çš„AIå…³å¡ï¼Œæ¯å®Œæˆä¸€ä¸ªèŠ‚ç‚¹é…é€è§¦å‘16-bitéŸ³æ•ˆï¼Œæœ€ç»ˆè¿”å›é‚®å±€æ—¶æ’­æ”¾FCé£æ ¼èƒœåˆ©éŸ³ä¹

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼šå¯’é¸½å„¿ (å †ä¼˜åŒ–Dijkstra)**  
* **äº®ç‚¹**ï¼š  
  â‘  åŒå›¾åˆ†ç¦»ï¼šæ¸…æ™°åˆ†ç¦»åŸå›¾ä¸åå‘å›¾å­˜å‚¨  
  â‘¡ å †ä¼˜åŒ–ï¼šä½¿ç”¨`priority_queue`å®ç°O(m log n)é«˜æ•ˆç®—æ³•  
  â‘¢ å˜é‡å‘½åè§„èŒƒï¼š`dis`å­˜å»ç¨‹è·ç¦»ï¼Œ`addedge`å‡½æ•°å¤ç”¨æ€§å¼º  
  â‘£ åå›¾æŠ€å·§ï¼šé€šè¿‡`v+n`èŠ‚ç‚¹æ˜ å°„é¿å…å†²çª  

**é¢˜è§£äºŒï¼šDog_Two (å‡½æ•°æŒ‡é’ˆå¤ç”¨Dijkstra)**  
* **äº®ç‚¹**ï¼š  
  â‘  ä»£ç å¤ç”¨ï¼šé€šè¿‡å‡½æ•°æŒ‡é’ˆå‚æ•°å¤ç”¨Dijkstraå‡½æ•°  
  â‘¡ å·¥ç¨‹åŒ–è®¾è®¡ï¼šå°è£…å›¾ç»“æ„(`head/ver/wei`)æå‡å¯è¯»æ€§  
  â‘¢ å†…å­˜ä¼˜åŒ–ï¼šç²¾å‡†æ§åˆ¶æ•°ç»„å¤§å°é¿å…æµªè´¹  

**é¢˜è§£ä¸‰ï¼šWSQTCL (SPFAåå‘å›¾)**  
* **äº®ç‚¹**ï¼š  
  â‘  ç®€æ´æ˜äº†ï¼šç›´æ¥ä½¿ç”¨SPFAå®ç°åå‘å›¾æœ€çŸ­è·¯  
  â‘¡ å®ç”¨æŠ€å·§ï¼šé€šè¿‡äºŒç»´æ•°ç»„åŒæ—¶å­˜å‚¨åŸå›¾å’Œåå›¾  
  â‘¢ é²æ£’æ€§ï¼šæ˜¾å¼å¤„ç†æ— ç©·å¤§å€¼(`0x3f3f3f3f`)  

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šè¿”ç¨‹æœ€çŸ­è·¯è®¡ç®—**  
   * **åˆ†æ**ï¼šç›´æ¥è®¡ç®—æ¯ä¸ªç‚¹â†’é‚®å±€æœ€çŸ­è·¯éœ€O(nÂ² log n)ï¼Œè¶…æ—¶é£é™©ã€‚ä¼˜è´¨è§£æ³•å‡é‡‡ç”¨**åå‘å›¾æŠ€å·§**ï¼šå°†åŸå›¾æ‰€æœ‰è¾¹åå‘ï¼Œåˆ™è¿”ç¨‹è·¯å˜ä¸ºæ–°å›¾ä¸­é‚®å±€â†’è¯¥ç‚¹çš„æœ€çŸ­è·¯  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåå‘å›¾æ˜¯å¤„ç†å¤šç‚¹åˆ°å•æºæœ€çŸ­è·¯çš„åˆ©å™¨  

2. **éš¾ç‚¹ï¼šå †ä¼˜åŒ–å®ç°**  
   * **åˆ†æ**ï¼šéœ€æŒæ¡`priority_queue`è‡ªå®šä¹‰æ’åºï¼ˆé‡è½½`operator>`ï¼‰ã€‚å…³é”®åœ¨ç»´æŠ¤æœªè®¿é—®èŠ‚ç‚¹çš„å°æ ¹å †ï¼Œæ¯æ¬¡å–æœ€å°è·ç¦»èŠ‚ç‚¹  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`priority_queue`é»˜è®¤å¤§æ ¹å †ï¼Œé€šè¿‡`greater<pair>`å¯è½¬ä¸ºå°æ ¹å †  

3. **éš¾ç‚¹ï¼šå›¾å­˜å‚¨ç»“æ„é€‰æ‹©**  
   * **åˆ†æ**ï¼šé‚»æ¥çŸ©é˜µ(O(nÂ²))åœ¨m>>næ—¶å†…å­˜çˆ†ç‚¸ã€‚é‚»æ¥è¡¨(O(m))æ›´ä¼˜ï¼Œå¸¸ç”¨`vector<vector<Edge>>`æˆ–é“¾å¼å‰å‘æ˜Ÿ  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé“¾å¼å‰å‘æ˜Ÿé€‚åˆç«èµ›ï¼ˆå†…å­˜è¿ç»­ï¼‰ï¼Œ`vector`é€‚åˆå·¥ç¨‹ï¼ˆæ˜“è°ƒè¯•ï¼‰  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼šåå‘å›¾è½¬æ¢** - å°†"å¤šç‚¹åˆ°å•æº"è½¬åŒ–ä¸º"å•æºåˆ°å¤šç‚¹"  
- **æŠ€å·§2ï¼šç®—æ³•å¤ç”¨** - ç›¸åŒç®—æ³•é€»è¾‘å°è£…ä¸ºå‡½æ•°ï¼ˆå¦‚Dijkstraï¼‰  
- **æŠ€å·§3ï¼šè¾¹ç•Œå¤„ç†** - åˆå§‹åŒ–è·ç¦»æ•°ç»„ä¸ºæå¤§å€¼(0x3f3f3f3f)ï¼Œé‚®å±€è·ç¦»è®¾ä¸º0  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°**ï¼ˆç»¼åˆè‡ªä¼˜è´¨é¢˜è§£ï¼‰ï¼š
```cpp
#include <cstring>
#include <queue>
using namespace std;
typedef pair<int, int> pii;

const int N = 1005, M = 100005;
struct Edge { int to, w, next; } e[M], re[M]; // åŸå›¾ä¸åå‘å›¾
int head[N], rhead[N], dis[N], rdis[N], cnt;

void add(int u, int v, int w) {
    e[++cnt] = {v, w, head[u]}; head[u] = cnt;
    re[cnt] = {u, w, rhead[v]}; rhead[v] = cnt; // åŒæ­¥æ·»åŠ åå‘è¾¹
}

void dijkstra(int start, int* dist, int* h, Edge* edges) {
    priority_queue<pii, vector<pii>, greater<pii>> pq;
    memset(dist, 0x3f, sizeof(dis));
    dist[start] = 0;
    pq.push({0, start});
    
    while (!pq.empty()) {
        int u = pq.top().second;
        pq.pop();
        for (int i = h[u]; i; i = edges[i].next) {
            int v = edges[i].to, w = edges[i].w;
            if (dist[v] > dist[u] + w) {
                dist[v] = dist[u] + w;
                pq.push({dist[v], v});
            }
        }
    }
}

int main() {
    int n, m; cin >> n >> m;
    while (m--) {
        int u, v, w; cin >> u >> v >> w;
        add(u, v, w);
    }
    dijkstra(1, dis, head, e);     // åŸå›¾ï¼šå»ç¨‹æœ€çŸ­è·¯
    dijkstra(1, rdis, rhead, re); // åå›¾ï¼šè¿”ç¨‹æœ€çŸ­è·¯
    
    long ans = 0;
    for (int i = 2; i <= n; i++) 
        ans += dis[i] + rdis[i]; // ç´¯åŠ å¾€è¿”è·¯å¾„
    cout << ans;
}
```

**é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µèµæ**ï¼š
```cpp
void addedge(int u, int v, int w) {
    ver[tot] = v; wei[tot] = w; 
    nex[tot] = head[u]; head[u] = tot++;
    // åå‘å›¾ï¼šèŠ‚ç‚¹åç§»nå­˜å‚¨
    ver[tot] = u; wei[tot] = w; 
    nex[tot] = head[v+n]; head[v+n] = tot++;
}
```
> **è§£è¯»**ï¼šé€šè¿‡`v+n`å°†åå‘å›¾èŠ‚ç‚¹å­˜å‚¨åœ¨åŸå›¾èŠ‚ç‚¹ä¹‹åï¼Œå®ç°åŒå›¾åˆ†ç¦»å­˜å‚¨ã€‚`head`æ•°ç»„å‰åŠå­˜åŸå›¾ï¼ŒååŠå­˜åå›¾ï¼Œé¿å…é¢å¤–æ•°ç»„å¼€é”€  
> **å­¦ä¹ ç¬”è®°**ï¼šåç§»å­˜å‚¨æ³•æ˜¯ç«èµ›å¸¸ç”¨æŠ€å·§ï¼Œéœ€æ³¨æ„æ•°ç»„å¤§å°å¼€2å€  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š"8-bitå¿«é€’å‘˜å†’é™©"  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šDijkstraç®—æ³•åœ¨æ­£/åå›¾ä¸Šçš„æ‰§è¡Œè¿‡ç¨‹  

1. **åœºæ™¯è®¾è®¡**ï¼š
   - åŸå¸‚ç½‘æ ¼ï¼š8Ã—8åƒç´ ç½‘æ ¼ï¼ˆFCé£æ ¼ï¼‰ï¼Œä¸åŒé¢œè‰²å—è¡¨ç¤ºèŠ‚ç‚¹
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/å•æ­¥/è°ƒé€Ÿæ»‘å—ï¼Œå¸¦åƒç´ åŒ–æŒ‰é’®

2. **åŠ¨æ€æ¼”ç¤º**ï¼š
   ```mermaid
   graph LR
   A[åˆå§‹åŒ–] --> B[èµ·ç‚¹å˜é»„]
   B --> C[å¤„ç†é‚»æ¥ç‚¹]
   C -->|è·ç¦»æ›´çŸ­| D[æ›´æ–°è·ç¦»-ç»¿è‰²é—ªçƒ]
   C -->|è·ç¦»ä¸å˜| E[ä¿æŒåŸè‰²]
   D --> F[å…¥é˜Ÿ-è“è‰²è„‰å†²]
   E --> G[å–ä¸‹ä¸€èŠ‚ç‚¹]
   G --> B
   ```
   - **å…³é”®å¸§**ï¼šå½“å‰èŠ‚ç‚¹é—ªçƒé»„å…‰ï¼Œæ›´æ–°èŠ‚ç‚¹æ³›ç»¿å…‰ï¼Œé˜Ÿåˆ—ç”¨åƒç´ æ–¹å—å †å å±•ç¤º
   - **éŸ³æ•ˆ**ï¼šèŠ‚ç‚¹æ›´æ–°("å®")ï¼Œå…¥é˜Ÿ("å’”")ï¼Œå®Œæˆ("èƒœåˆ©æ—‹å¾‹")

3. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š
   - æ¯å®Œæˆä¸€ä¸ªèŠ‚ç‚¹é…é€ï¼Œå·¦ä¸Šè§’ç§¯åˆ†+10
   - è‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼ï¼šæŒ‰æœ€ä¼˜è·¯å¾„é€æ­¥ç‚¹äº®åŸå¸‚ï¼Œç±»ä¼¼ã€Šåƒè±†äººã€‹å¹½çµAI
   - æœ€ç»ˆè¿”é‚®å±€æ—¶ï¼Œå…¨å±çƒŸèŠ±ç‰¹æ•ˆ+16-bitç‰ˆã€Šæ¬¢ä¹é¢‚ã€‹

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **æ´›è°· P1342 è¯·æŸ¬**  
   â†’ åŒç±»åå‘å›¾åº”ç”¨ï¼Œæ•°æ®è§„æ¨¡æ›´å¤§  
2. **æ´›è°· P1821 é“¶ç‰›æ´¾å¯¹**  
   â†’ åŠ å¼ºç‰ˆå¾€è¿”æœ€çŸ­è·¯ï¼Œéœ€å¤„ç†æœ€é•¿è·¯å¾„  
3. **æ´›è°· P4779 å•æºæœ€çŸ­è·¯**  
   â†’ Dijkstraæ¨¡æ¿å¼ºåŒ–è®­ç»ƒ  

---

#### 7. å­¦ä¹ å¿ƒå¾—åˆ†äº«
> **å¯’é¸½å„¿è°ƒè¯•ç»éªŒ**ï¼š  
> "åå‘å›¾èŠ‚ç‚¹åç§»å­˜å‚¨æ—¶ï¼Œæœ€åˆå¿˜è®°æ‰©å¤§`dis`æ•°ç»„èŒƒå›´ï¼Œå¯¼è‡´WAã€‚è°ƒè¯•æ—¶è¾“å‡ºä¸­é—´è·ç¦»å€¼æ‰å‘ç°è¶Šç•Œ"  
>   
> **Kayæ€»ç»“**ï¼š  
> æ•°ç»„è¶Šç•Œæ˜¯ç«èµ›å¸¸è§é”™è¯¯ï¼Œå»ºè®®ï¼š  
> 1) å…¨å±€å˜é‡åˆå§‹åŒ–ä¸º0  
> 2) å…³é”®æ•°ç»„å¤§å°+5é˜²è¶Šç•Œ  
> 3) ä½¿ç”¨`sizeof`ç²¾ç¡®åˆå§‹åŒ–  

é€šè¿‡æœ¬æŒ‡å—ï¼Œå¸Œæœ›å¤§å®¶æŒæ¡æœ€çŸ­è·¯æ ¸å¿ƒæ€æƒ³ï¼š**å°†å¤æ‚é—®é¢˜è½¬åŒ–ä¸ºå·²çŸ¥æ¨¡å‹ï¼ˆåå‘å›¾ï¼‰**ï¼Œå¹¶ä½“ä¼šç®—æ³•ä¸å·¥ç¨‹å®ç°çš„å¹³è¡¡è‰ºæœ¯ã€‚ä¸‹æ¬¡æˆ‘ä»¬å°†æ¢è®¨åŠ¨æ€è§„åˆ’çš„å¥‡å¦™ä¸–ç•Œï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š120.35ç§’
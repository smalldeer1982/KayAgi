# é¢˜ç›®ä¿¡æ¯

# [USACO07JAN] Protecting the Flowers S

## é¢˜ç›®æè¿°

Farmer John went to cut some wood and left N (2 â‰¤ N â‰¤ 100,000) cows eating the grass, as usual. When he returned, he found to his horror that the cluster of cows was in his garden eating his beautiful flowers. Wanting to minimize the subsequent damage, FJ decided to take immediate action and transport each cow back to its own barn.

Each cow i is at a location that is Ti minutes (1 â‰¤ Ti â‰¤ 2,000,000) away from its own barn. Furthermore, while waiting for transport, she destroys Di (1 â‰¤ Di â‰¤ 100) flowers per minute. No matter how hard he tries, FJ can only transport one cow at a time back to her barn. Moving cow i to its barn requires 2 Ã— Ti minutes (Ti to get there and Ti to return). FJ starts at the flower patch, transports the cow to its barn, and then walks back to the flowers, taking no extra time to get to the next cow that needs transport.

Write a program to determine the order in which FJ should pick up the cows so that the total number of flowers destroyed is minimized.

æœ‰ $n$ å¤´å¥¶ç‰›è·‘åˆ° FJ çš„èŠ±å›­é‡Œå»åƒèŠ±å„¿äº†ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨è·ç¦»ç‰›åœˆ $T_i$ï¼ˆè¿™é‡ŒæŒ‡ FJ åˆ°é‚£é‡Œéœ€è¦ $T_i$ åˆ†é’Ÿ) å¤„åƒèŠ±ï¼Œæ¯åˆ†é’Ÿä¼šåƒæ‰ $D_i$ æœµèŠ±ï¼ŒFJ ç°åœ¨è¦å°†å®ƒä»¬ç»™å¼„å›ç‰›åœˆï¼Œä½†æ˜¯ä»–æ¯æ¬¡åªèƒ½å¼„ä¸€å¤´å›å»ï¼Œæ¥å›ç”¨æ—¶æ€»å…±ä¸º $2 \times T_i$ åˆ†é’Ÿï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œå…¶å®ƒçš„å¥¶ç‰›ä¼šç»§ç»­åƒ FJ çš„èŠ±ï¼Œé€Ÿåº¦ä¿æŒä¸å˜ï¼Œå½“ç„¶æ­£åœ¨è¢«èµ¶å›ç‰›åœˆçš„å¥¶ç‰›ä¸èƒ½ç»§ç»­åƒäº†ã€‚ç°åœ¨æ±‚åœ¨æœ€å¥½çš„æ–¹æ¡ˆä¸‹å¥¶ç‰›åƒæ‰èŠ±çš„æœ€å°æœµæ•°ã€‚


## è¯´æ˜/æç¤º

FJ returns the cows in the following order: 6, 2, 3, 4, 1, 5. While he is transporting cow 6 to the barn, the others destroy 24 flowers; next he will take cow 2, losing 28 more of his beautiful flora. For the cows 3, 4, 1 he loses 16, 12, and 6 flowers respectively. When he picks cow 5 there are no more cows damaging the flowers, so the loss for that cow is zero. The total flowers lost this way is 24 + 28 + 16 + 12 + 6 = 86.


## æ ·ä¾‹ #1

### è¾“å…¥

```
6
3 1
2 5
2 3
3 2
4 1
1 6```

### è¾“å‡º

```
86```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO07JAN] Protecting the Flowers S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè´ªå¿ƒç®—æ³•ï¼ˆGreedy Algorithmï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œä¿æŠ¤èŠ±æœµâ€é—®é¢˜çš„å…³é”®ï¼Œåœ¨äº**é€‰æ‹©æœ€ä¼˜çš„èµ¶ç‰›é¡ºåº**ï¼Œä½¿å¾—å¥¶ç‰›åƒæ‰çš„èŠ±æœµæ€»æ•°æœ€å°‘ã€‚è´ªå¿ƒç®—æ³•å°±åƒâ€œæ’é˜Ÿæ¥æ°´â€â€”â€”æˆ‘ä»¬è¦å…ˆå¤„ç†é‚£äº›â€œæ¯åˆ†é’Ÿé€ æˆæŸå¤±å¤§ä¸”å¤„ç†æ—¶é—´çŸ­â€çš„ä»»åŠ¡ï¼Œè¿™æ ·æ€»æŸå¤±æ‰ä¼šæœ€å°ã€‚  

### è´ªå¿ƒæ€æƒ³çš„æ ¸å¿ƒé€»è¾‘  
å‡è®¾æˆ‘ä»¬æœ‰ä¸¤å¤´å¥¶ç‰›`A`ï¼ˆæ—¶é—´`T_A`ï¼Œæ¯åˆ†é’Ÿåƒ`D_A`æœµï¼‰å’Œ`B`ï¼ˆæ—¶é—´`T_B`ï¼Œæ¯åˆ†é’Ÿåƒ`D_B`æœµï¼‰ï¼š  
- å…ˆèµ¶`A`å†èµ¶`B`ï¼šæŸå¤±ä¸º`2*T_A*D_B`ï¼ˆèµ¶`A`çš„2*T_Aåˆ†é’Ÿå†…ï¼Œ`B`åœ¨åƒèŠ±ï¼‰ï¼›  
- å…ˆèµ¶`B`å†èµ¶`A`ï¼šæŸå¤±ä¸º`2*T_B*D_A`ï¼ˆèµ¶`B`çš„2*T_Båˆ†é’Ÿå†…ï¼Œ`A`åœ¨åƒèŠ±ï¼‰ã€‚  

ä¸ºäº†æœ€å°åŒ–æŸå¤±ï¼Œåº”é€‰æ‹©**æŸå¤±è¾ƒå°çš„é¡ºåº**ï¼Œå³å½“`T_A*D_B < T_B*D_A`æ—¶ï¼Œå…ˆèµ¶`A`ã€‚è¿™ä¸ªæ¡ä»¶å¯ä»¥ç®€åŒ–ä¸º**æŒ‰`T/D`çš„æ¯”ä¾‹ä»å°åˆ°å¤§æ’åº**ï¼ˆæˆ–`D/T`ä»å¤§åˆ°å°æ’åºï¼‰ï¼Œè¿™æ ·æ¯ä¸€æ­¥éƒ½é€‰æ‹©å½“å‰æœ€ä¼˜çš„å†³ç­–ï¼Œæœ€ç»ˆå¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚  

### æ ¸å¿ƒç®—æ³•æµç¨‹ä¸å¯è§†åŒ–è®¾è®¡  
1. **æ’åº**ï¼šå°†å¥¶ç‰›æŒ‰`T*D' < T'*D`ï¼ˆ`D'`æ˜¯å¦ä¸€å¤´å¥¶ç‰›çš„`D`ï¼‰çš„æ¡ä»¶æ’åºï¼›  
2. **è®¡ç®—æ€»æŸå¤±**ï¼šéå†æ’åºåçš„å¥¶ç‰›ï¼Œæ¯æ¬¡è®¡ç®—å½“å‰ç‰›çš„å¤„ç†æ—¶é—´ï¼ˆ2*Tï¼‰å¯¹å‰©ä¸‹å¥¶ç‰›çš„æŸå¤±ï¼ˆä¹˜ä»¥å‰©ä¸‹å¥¶ç‰›çš„æ€»`D`ï¼‰ï¼Œç´¯åŠ å¾—åˆ°æ€»æŸå¤±ã€‚  

**å¯è§†åŒ–æ€è·¯**ï¼š  
- ç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºèŠ±å›­åœºæ™¯ï¼Œå¥¶ç‰›ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼Œæ ‡æ³¨`T`å’Œ`D`ï¼›  
- æ’åºè¿‡ç¨‹ä¸­ï¼Œç¬¦åˆæ¡ä»¶çš„å¥¶ç‰›ä¼šäº¤æ¢ä½ç½®ï¼Œä¼´éšâ€œå®â€çš„åƒç´ éŸ³æ•ˆï¼›  
- èµ¶ç‰›æ—¶ï¼Œè¢«èµ¶çš„å¥¶ç‰›ä¼šâ€œèµ°â€å‡ºå±å¹•ï¼ˆè¡¨ç¤ºè¿”å›ç‰›åœˆï¼‰ï¼Œå‰©ä¸‹çš„å¥¶ç‰›ç»§ç»­â€œè·³åŠ¨â€ï¼ˆè¡¨ç¤ºåƒèŠ±ï¼‰ï¼Œå±å¹•å®æ—¶æ˜¾ç¤ºå½“å‰æ€»æŸå¤±å’Œæ¯ä¸€æ­¥çš„è´¡çŒ®ï¼ˆå¦‚`2*T*sum_d`ï¼‰ï¼›  
- æ”¯æŒ**å•æ­¥æ‰§è¡Œ**å’Œ**è‡ªåŠ¨æ’­æ”¾**ï¼Œç”¨æˆ·å¯ä»¥è°ƒæ•´é€Ÿåº¦ï¼Œè§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šæ›¦è¡Œå¤œè½ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æ¸…æ™°åº¦**å’Œ**ä»£ç è§„èŒƒæ€§**éå¸¸çªå‡ºã€‚ä½œè€…é€šè¿‡**å‰ç¼€å’Œ**è®¡ç®—å‰©ä¸‹å¥¶ç‰›çš„æ€»`D`ï¼Œé€»è¾‘ç›´ç™½ï¼š`sum[i]`è¡¨ç¤ºå‰`i`å¤´ç‰›çš„`D`ä¹‹å’Œï¼Œ`sum[n]-sum[i]`å°±æ˜¯ç¬¬`i+1`åˆ°`n`å¤´ç‰›çš„æ€»`D`ï¼Œä¹˜ä»¥`2*T[i]`å³ä¸ºå½“å‰ç‰›çš„è´¡çŒ®ã€‚ä»£ç ä¸­çš„`cmp`å‡½æ•°ç›´æ¥ç”¨`T*D' < T'*D`ä½œä¸ºæ’åºæ¡ä»¶ï¼Œç®€æ´æ˜äº†ã€‚**äº®ç‚¹**ï¼šå‰ç¼€å’Œçš„ä½¿ç”¨è®©è®¡ç®—æ›´ç›´è§‚ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ã€‚  

### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šlzqy_ï¼‰  
* **ç‚¹è¯„**ï¼š  
  é¢˜è§£çš„**æ³¨é‡Šè¯¦ç»†**ï¼Œç‰¹åˆ«é€‚åˆæ–°æ‰‹ã€‚ä½œè€…ç”¨`0-based`ç´¢å¼•å¤„ç†æ•°ç»„ï¼Œ`p[i]`è¡¨ç¤ºå‰`i+1`å¤´ç‰›çš„`D`ä¹‹å’Œï¼Œ`p[n-1]-p[i]`å°±æ˜¯å‰©ä¸‹çš„ç‰›çš„æ€»`D`ã€‚**äº®ç‚¹**ï¼šæ˜ç¡®æŒ‡å‡ºâ€œè¢«èµ¶çš„ç‰›ä¸å†åƒèŠ±â€è¿™ä¸ªå‘ç‚¹ï¼Œæé†’å­¦ä¹ è€…æ³¨æ„è¾¹ç•Œæ¡ä»¶ã€‚ä»£ç é£æ ¼å·¥æ•´ï¼Œå˜é‡å`D`ã€`T`å«ä¹‰æ˜ç¡®ï¼Œå¯è¯»æ€§é«˜ã€‚  

### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼š___new2zy___ï¼‰  
* **ç‚¹è¯„**ï¼š  
  ä½œè€…çš„**è®¡ç®—æ–¹å¼æ–°é¢–**ï¼Œé€šè¿‡ç´¯åŠ å¤„ç†æ—¶é—´`T`ï¼Œæ¯æ¬¡ç”¨å½“å‰æ—¶é—´ä¹˜ä»¥å½“å‰ç‰›çš„`D`ï¼Œæœ€ç»ˆå¾—åˆ°æ€»æŸå¤±ã€‚è¿™ç§æ–¹å¼è™½ç„¶å’Œå‰ç¼€å’Œä¸åŒï¼Œä½†æ•°å­¦ä¸Šç­‰ä»·ï¼ˆé€šè¿‡å±•å¼€å¼å­å¯ä»¥è¯æ˜ï¼‰ã€‚**äº®ç‚¹**ï¼šç”¨`double`ç±»å‹å¤„ç†`T/D`çš„æ¯”ä¾‹ï¼Œé¿å…äº†æ•´æ•°é™¤æ³•çš„ç²¾åº¦é—®é¢˜ï¼Œè€ƒè™‘å‘¨åˆ°ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•ç¡®å®šè´ªå¿ƒçš„æ’åºæ¡ä»¶ï¼Ÿ  
**éš¾ç‚¹**ï¼šä¸çŸ¥é“å¦‚ä½•æ¯”è¾ƒä¸¤å¤´ç‰›çš„é¡ºåºå¯¹æ€»æŸå¤±çš„å½±å“ã€‚  
**ç­–ç•¥**ï¼šå‡è®¾ä¸¤å¤´ç‰›çš„é¡ºåºï¼Œæ¨å¯¼æŸå¤±å…¬å¼ï¼ˆå¦‚`2*T_A*D_B` vs `2*T_B*D_A`ï¼‰ï¼Œæ‰¾åˆ°æœ€å°åŒ–æŸå¤±çš„æ¡ä»¶ã€‚**å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒçš„æ ¸å¿ƒæ˜¯â€œå±€éƒ¨æœ€ä¼˜æ¨å¯¼å…¨å±€æœ€ä¼˜â€ï¼Œé€šè¿‡æ¯”è¾ƒç›¸é‚»å…ƒç´ çš„é¡ºåºï¼Œæ‰¾åˆ°æ’åºè§„åˆ™ã€‚  

### 2. å¦‚ä½•æ­£ç¡®è®¡ç®—æ€»æŸå¤±ï¼Ÿ  
**éš¾ç‚¹**ï¼šå®¹æ˜“å¿½ç•¥â€œè¢«èµ¶çš„ç‰›ä¸å†åƒèŠ±â€çš„æ¡ä»¶ï¼Œæˆ–è€…è®¡ç®—æ–¹å¼é”™è¯¯ã€‚  
**ç­–ç•¥**ï¼šé€‰æ‹©**ç›´è§‚çš„è®¡ç®—æ–¹å¼**ï¼ˆå¦‚`sum_d`é€’å‡ï¼‰ï¼šåˆå§‹`sum_d`æ˜¯æ‰€æœ‰ç‰›çš„`D`ä¹‹å’Œï¼Œæ¯æ¬¡å¤„ç†ä¸€å¤´ç‰›æ—¶ï¼Œå‡å»å®ƒçš„`D`ï¼ˆä¸å†åƒèŠ±ï¼‰ï¼Œç„¶åç”¨`2*T`ä¹˜ä»¥å‰©ä¸‹çš„`sum_d`ï¼ˆå½“å‰ç‰›çš„è´¡çŒ®ï¼‰ã€‚**å­¦ä¹ ç¬”è®°**ï¼šæ€»æŸå¤±ç­‰äºæ¯å¤´ç‰›çš„å¤„ç†æ—¶é—´ä¹˜ä»¥å‰©ä¸‹ç‰›çš„æ€»`D`ä¹‹å’Œã€‚  

### 3. å¦‚ä½•é¿å…æ•°æ®æº¢å‡ºï¼Ÿ  
**éš¾ç‚¹**ï¼š`T`å’Œ`D`çš„èŒƒå›´å¤§ï¼Œç´¯åŠ æ—¶å®¹æ˜“æº¢å‡ºã€‚  
**ç­–ç•¥**ï¼šæ‰€æœ‰æ¶‰åŠæ€»å’Œçš„å˜é‡ï¼ˆå¦‚`sum_d`ã€`ans`ï¼‰éƒ½ç”¨`long long`ç±»å‹ï¼ˆ64ä½æ•´æ•°ï¼‰ã€‚**å­¦ä¹ ç¬”è®°**ï¼šå¤„ç†å¤§æ•°æ®æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ•°æ®ç±»å‹çš„èŒƒå›´ï¼Œé¿å…â€œéšæ€§æº¢å‡ºâ€ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **é—®é¢˜åˆ†è§£**ï¼šå°†æ€»æŸå¤±åˆ†è§£ä¸ºæ¯å¤´ç‰›çš„è´¡çŒ®ï¼Œç®€åŒ–è®¡ç®—ï¼›  
- **æ’åºæ¡ä»¶æ¨å¯¼**ï¼šé€šè¿‡æ¯”è¾ƒç›¸é‚»å…ƒç´ çš„é¡ºåºï¼Œæ‰¾åˆ°è´ªå¿ƒç­–ç•¥ï¼›  
- **æ•°æ®ç±»å‹æ£€æŸ¥**ï¼šç”¨`long long`å­˜å‚¨å¤§æ•´æ•°ï¼Œé¿å…æº¢å‡ºã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œé‡‡ç”¨`sum_d`é€’å‡çš„æ–¹å¼è®¡ç®—æ€»æŸå¤±ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <algorithm>
  using namespace std;

  typedef long long ll; // é¿å…æ•°æ®æº¢å‡º

  struct Cow {
      ll t, d; // t: æ—¶é—´ï¼Œd: æ¯åˆ†é’Ÿåƒçš„èŠ±
  };

  // æ’åºæ¡ä»¶ï¼šaåº”è¯¥åœ¨bå‰é¢å½“ä¸”ä»…å½“a.t*b.d < b.t*a.d
  bool cmp(const Cow& a, const Cow& b) {
      return a.t * b.d < b.t * a.d;
  }

  int main() {
      int n;
      cin >> n;
      Cow* cows = new Cow[n];
      ll sum_d = 0; // æ‰€æœ‰ç‰›çš„dä¹‹å’Œ
      for (int i = 0; i < n; ++i) {
          cin >> cows[i].t >> cows[i].d;
          sum_d += cows[i].d;
      }
      sort(cows, cows + n, cmp); // æŒ‰è´ªå¿ƒç­–ç•¥æ’åº
      ll ans = 0; // æ€»æŸå¤±
      for (int i = 0; i < n; ++i) {
          sum_d -= cows[i].d; // å‡å»å½“å‰ç‰›çš„dï¼ˆä¸å†åƒèŠ±ï¼‰
          ans += 2 * cows[i].t * sum_d; // å½“å‰ç‰›çš„è´¡çŒ®ï¼š2*T * å‰©ä¸‹çš„dä¹‹å’Œ
      }
      cout << ans << endl;
      delete[] cows;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–è¾“å…¥ï¼šè¾“å…¥å¥¶ç‰›æ•°é‡`n`ï¼Œä»¥åŠæ¯å¤´å¥¶ç‰›çš„`T`å’Œ`D`ï¼Œè®¡ç®—æ‰€æœ‰ç‰›çš„`D`ä¹‹å’Œ`sum_d`ï¼›  
  2. æ’åºï¼šæŒ‰`T*D' < T'*D`çš„æ¡ä»¶æ’åºï¼Œç¡®ä¿æ¯ä¸€æ­¥é€‰æ‹©æœ€ä¼˜çš„ç‰›ï¼›  
  3. è®¡ç®—æ€»æŸå¤±ï¼šéå†æ’åºåçš„å¥¶ç‰›ï¼Œæ¯æ¬¡å‡å»å½“å‰ç‰›çš„`D`ï¼Œç„¶åç´¯åŠ `2*T*sum_d`ï¼ˆå½“å‰ç‰›çš„è´¡çŒ®ï¼‰ã€‚  

### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ  

#### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šæ›¦è¡Œå¤œè½ï¼‰  
* **äº®ç‚¹**ï¼šå‰ç¼€å’Œè®¡ç®—å‰©ä¸‹çš„`D`ä¹‹å’Œï¼Œç›´è§‚æ˜“æ‡‚ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  long long sum[maxn];
  for (int i = 1; i <= n; ++i) sum[i] = sum[i-1] + a[i].d;
  long long ans = 0;
  for (int i = 1; i <= n; ++i)
      ans += 2 * a[i].t * (sum[n] - sum[i]);
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `sum[i]`æ˜¯å‰`i`å¤´ç‰›çš„`D`ä¹‹å’Œï¼›  
  - `sum[n] - sum[i]`æ˜¯ç¬¬`i+1`åˆ°`n`å¤´ç‰›çš„`D`ä¹‹å’Œï¼›  
  - æ¯å¤´ç‰›çš„è´¡çŒ®æ˜¯`2*T[i]*(sum[n]-sum[i])`ï¼Œç´¯åŠ å¾—åˆ°æ€»æŸå¤±ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ç¼€å’Œæ˜¯å¤„ç†â€œåŒºé—´å’Œâ€é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œèƒ½å¿«é€Ÿè®¡ç®—å‰©ä¸‹å…ƒç´ çš„æ€»å’Œã€‚  

#### é¢˜è§£äºŒï¼ˆæ¥æºï¼šlzqy_ï¼‰  
* **äº®ç‚¹**ï¼š`0-based`ç´¢å¼•å¤„ç†ï¼Œæ³¨é‡Šè¯¦ç»†ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  long long p[100000];
  p[0] = a[0].D;
  for (int i = 1; i < n; i++)
      p[i] = p[i-1] + a[i].D;
  for (int i = 0; i < n; i++)
      ans += (p[n-1] - p[i]) * a[i].T * 2;
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `p[i]`æ˜¯å‰`i+1`å¤´ç‰›çš„`D`ä¹‹å’Œï¼›  
  - `p[n-1] - p[i]`æ˜¯ç¬¬`i+1`åˆ°`n-1`å¤´ç‰›çš„`D`ä¹‹å’Œï¼›  
  - æ¯å¤´ç‰›çš„è´¡çŒ®æ˜¯`2*T[i]*(p[n-1]-p[i])`ï¼Œç´¯åŠ å¾—åˆ°æ€»æŸå¤±ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`0-based`ç´¢å¼•æ˜¯C++çš„å¸¸ç”¨é£æ ¼ï¼Œéœ€è¦æ³¨æ„æ•°ç»„çš„è¾¹ç•Œã€‚  

#### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼š___new2zy___ï¼‰  
* **äº®ç‚¹**ï¼šç´¯åŠ å¤„ç†æ—¶é—´ï¼Œè®¡ç®—æ–¹å¼æ–°é¢–ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  ll T = 0, ans = 0;
  for (int i = 1; i <= n; i++) {
      ans += T * p[i].Di;
      T += 2 * p[i].Ti;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `T`æ˜¯ä¹‹å‰æ‰€æœ‰ç‰›çš„å¤„ç†æ—¶é—´ä¹‹å’Œï¼ˆ2*T1+2*T2+...+2*T(i-1)ï¼‰ï¼›  
  - æ¯å¤´ç‰›çš„è´¡çŒ®æ˜¯`T*D[i]`ï¼ˆä¹‹å‰çš„å¤„ç†æ—¶é—´å†…ï¼Œå½“å‰ç‰›åœ¨åƒèŠ±ï¼‰ï¼›  
  - ç´¯åŠ `T*D[i]`å¾—åˆ°æ€»æŸå¤±ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¸åŒçš„è®¡ç®—æ–¹å¼å¯èƒ½ç­‰ä»·ï¼Œéœ€è¦é€šè¿‡æ•°å­¦æ¨å¯¼ç¡®è®¤æ­£ç¡®æ€§ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œåƒç´ èŠ±å›­ä¿å«æˆ˜â€**ï¼šFCé£æ ¼çš„èŠ±å›­åœºæ™¯ï¼ŒFJéœ€è¦èµ¶è·‘åƒèŠ±çš„å¥¶ç‰›ï¼Œé¿å…èŠ±æœµè¢«åƒæ‰ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯èŠ±å›­ï¼Œæœ‰`n`å¤´åƒç´ ç‰›ï¼Œæ¯å¤´ç‰›æ ‡æ³¨`T`å’Œ`D`ï¼ˆå¦‚`T=3, D=1`ï¼‰ï¼›  
   - å±å¹•å³ä¾§æ˜¯æ§åˆ¶é¢æ¿ï¼Œæœ‰â€œå¼€å§‹/æš‚åœâ€ã€â€œå•æ­¥â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼›  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»æ¾èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **æ’åºè¿‡ç¨‹**ï¼š  
   - å¥¶ç‰›æŒ‰`T*D' < T'*D`çš„æ¡ä»¶æ’åºï¼Œäº¤æ¢æ—¶ä¼´éšâ€œå®â€çš„åƒç´ éŸ³æ•ˆï¼›  
   - æ¯äº¤æ¢ä¸€æ¬¡ï¼Œå±å¹•åº•éƒ¨æ˜¾ç¤ºå½“å‰æ’åºçš„æ¡ä»¶ï¼ˆå¦‚`A.t*B.d < B.t*A.d`ï¼‰ã€‚  

3. **èµ¶ç‰›è¿‡ç¨‹**ï¼š  
   - FJä»å·¦åˆ°å³èµ¶ç‰›ï¼Œè¢«èµ¶çš„å¥¶ç‰›ä¼šâ€œèµ°â€å‡ºå±å¹•ï¼ˆè¡¨ç¤ºè¿”å›ç‰›åœˆï¼‰ï¼Œå‰©ä¸‹çš„å¥¶ç‰›ç»§ç»­â€œè·³åŠ¨â€ï¼ˆè¡¨ç¤ºåƒèŠ±ï¼‰ï¼›  
   - æ¯èµ¶ä¸€å¤´ç‰›ï¼Œå±å¹•é¡¶éƒ¨æ˜¾ç¤ºå½“å‰æ€»æŸå¤±ï¼ˆå¦‚`ans=24`ï¼‰ï¼Œä»¥åŠå½“å‰ç‰›çš„è´¡çŒ®ï¼ˆå¦‚`2*T*sum_d=2*1*12=24`ï¼‰ï¼›  
   - èµ¶ç‰›æ—¶ä¼´éšâ€œå‘œâ€çš„éŸ³æ•ˆï¼Œæ€»æŸå¤±æ›´æ–°æ—¶ä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - æ‰€æœ‰ç‰›è¢«èµ¶å›å»åï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ï¼Œå±å¹•æ˜¾ç¤ºæ€»æŸå¤±ï¼ˆå¦‚`ans=86`ï¼‰ï¼›  
   - è‹¥æœ‰é”™è¯¯ï¼ˆå¦‚æ•°æ®æº¢å‡ºï¼‰ï¼Œæ’­æ”¾â€œå¤±è´¥â€éŸ³æ•ˆï¼Œæç¤ºâ€œè¯·æ£€æŸ¥æ•°æ®ç±»å‹â€ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œæ‰§è¡Œä¸€æ­¥æ’åºæˆ–èµ¶ç‰›æ“ä½œï¼›  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»è‡ªåŠ¨æ‰§è¡Œï¼Œé€Ÿåº¦å¯é€šè¿‡æ»‘å—è°ƒæ•´ï¼ˆå¦‚1xã€2xã€3xï¼‰ï¼›  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹åŠ¨ç”»ã€‚  

### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œé™ä½å­¦ä¹ å‹åŠ›ï¼›  
- **éŸ³æ•ˆæç¤º**ï¼šç”¨å£°éŸ³å¼ºåŒ–å…³é”®æ“ä½œï¼ˆå¦‚äº¤æ¢ã€èµ¶ç‰›ï¼‰ï¼Œå¸®åŠ©è®°å¿†ï¼›  
- **å®æ—¶æ•°æ®æ˜¾ç¤º**ï¼šè®©å­¦ä¹ è€…ç›´è§‚çœ‹åˆ°æ¯ä¸€æ­¥çš„æŸå¤±è®¡ç®—ï¼Œç†è§£ç®—æ³•é€»è¾‘ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
è´ªå¿ƒç®—æ³•çš„**æ’åºæ¡ä»¶æ¨å¯¼**æŠ€å·§ï¼Œå¯ç”¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
- **åˆå¹¶æœå­**ï¼ˆP1090ï¼‰ï¼šåˆå¹¶é¡ºåºçš„é€‰æ‹©ï¼Œæœ€å°åŒ–æ€»ä»£ä»·ï¼›  
- **éƒ¨åˆ†èƒŒåŒ…é—®é¢˜**ï¼ˆP1208ï¼‰ï¼šæŒ‰æ€§ä»·æ¯”æ’åºï¼Œæœ€å¤§åŒ–ä»·å€¼ï¼›  
- **çº¿æ®µè¦†ç›–**ï¼ˆP1803ï¼‰ï¼šæŒ‰å³ç«¯ç‚¹æ’åºï¼Œæœ€å¤§åŒ–è¦†ç›–æ¬¡æ•°ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1090** - åˆå¹¶æœå­  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯è´ªå¿ƒçš„ç»å…¸é—®é¢˜ï¼Œéœ€è¦æ¨å¯¼åˆå¹¶é¡ºåºçš„æ¡ä»¶ï¼Œå’Œæœ¬é¢˜çš„æ’åºé€»è¾‘ç±»ä¼¼ã€‚  
2. **æ´›è°· P1208** - éƒ¨åˆ†èƒŒåŒ…é—®é¢˜  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæŒ‰æ€§ä»·æ¯”æ’åºï¼Œç›´æ¥åº”ç”¨è´ªå¿ƒæ€æƒ³ï¼Œå¸®åŠ©å·©å›ºâ€œå±€éƒ¨æœ€ä¼˜â€çš„æ¦‚å¿µã€‚  
3. **æ´›è°· P1803** - çº¿æ®µè¦†ç›–  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæŒ‰å³ç«¯ç‚¹æ’åºï¼Œæœ€å¤§åŒ–è¦†ç›–æ¬¡æ•°ï¼Œéœ€è¦ç†è§£â€œå¦‚ä½•é€‰æ‹©æœ€ä¼˜çš„åŒºé—´â€ã€‚  
4. **æ´›è°· P2123** - çš‡åæ¸¸æˆ  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç±»ä¼¼çš„æ’åºæ¡ä»¶æ¨å¯¼ï¼Œéœ€è¦æ¯”è¾ƒç›¸é‚»å…ƒç´ çš„é¡ºåºï¼Œéš¾åº¦ç•¥é«˜äºæœ¬é¢˜ï¼Œé€‚åˆæ‹“å±•æ€ç»´ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª maple_tzc)  
> â€œæˆ‘åœ¨å†™ä»£ç æ—¶ï¼Œå¿˜è®°å°†`sum*cow[i].t`ä¹˜ä»¥2ï¼Œå¯¼è‡´ç»“æœåªæœ‰æ­£ç¡®å€¼çš„ä¸€åŠã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œ**ç»†èŠ‚å†³å®šæˆè´¥**ï¼Œä¸€å®šè¦ä»”ç»†é˜…è¯»é¢˜ç›®ä¸­çš„æ—¶é—´è¦æ±‚ï¼ˆæ¥å›éœ€è¦2*Tåˆ†é’Ÿï¼‰ã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œ**è¾¹ç•Œæ¡ä»¶**å’Œ**é¢˜ç›®ç»†èŠ‚**æ˜¯æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼š**å†™ä»£ç å‰å†è¯»ä¸€éé¢˜ç›®**ï¼Œç¡®è®¤æ‰€æœ‰æ¡ä»¶ï¼ˆå¦‚æ—¶é—´ã€æ•°æ®èŒƒå›´ï¼‰éƒ½è¢«æ­£ç¡®å¤„ç†ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[USACO07JAN] Protecting the Flowers Sâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ï¼ŒæŒæ¡è§£é¢˜æŠ€å·§ã€‚è®°ä½ï¼Œ**è´ªå¿ƒçš„å…³é”®æ˜¯æ‰¾åˆ°â€œå±€éƒ¨æœ€ä¼˜â€çš„æ’åºæ¡ä»¶**ï¼Œè€Œ**ä»£ç çš„æ­£ç¡®æ€§å–å†³äºå¯¹ç»†èŠ‚çš„å…³æ³¨**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š249.03ç§’
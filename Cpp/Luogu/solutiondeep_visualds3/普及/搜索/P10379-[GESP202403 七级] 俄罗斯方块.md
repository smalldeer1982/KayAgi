# é¢˜ç›®ä¿¡æ¯

# [GESP202403 ä¸ƒçº§] ä¿„ç½—æ–¯æ–¹å—

## é¢˜ç›®æè¿°

å°æ¨åŒå­¦ç”¨ä¸åŒç§ç±»çš„ä¿„ç½—æ–¯æ–¹å—å¡«æ»¡äº†ä¸€ä¸ªå¤§å°ä¸º $n \times m$ çš„ç½‘æ ¼å›¾ã€‚

ç½‘æ ¼å›¾ç”± $n \times m$ ä¸ªå¸¦é¢œè‰²æ–¹å—æ„æˆã€‚å°æ¨åŒå­¦ç°åœ¨å°†è¿™ä¸ªç½‘æ ¼å›¾äº¤ç»™äº†ä½ ï¼Œè¯·ä½ è®¡ç®—å‡ºç½‘æ ¼å›¾ä¸­ä¿„ç½—æ–¯æ–¹å—çš„ç§ç±»æ•°ã€‚  
å¦‚æœä¸¤ä¸ªåŒè‰²æ–¹å—æ˜¯å››è¿é€šï¼ˆå³ä¸Šä¸‹å·¦å³å››ä¸ªç›¸é‚»çš„ä½ç½®ï¼‰çš„ï¼Œåˆ™ç§°ä¸¤ä¸ªåŒè‰²æ–¹å—ç›´æ¥è¿é€šï¼›è‹¥ä¸¤ä¸ªåŒè‰²æ–¹å—åŒæ—¶ä¸å¦ä¸€ä¸ªåŒè‰²æ–¹å—ç›´æ¥æˆ–é—´æ¥è¿é€šï¼Œåˆ™ç§°ä¸¤ä¸ªåŒè‰²æ–¹å—é—´æ¥è¿é€šã€‚ä¸€ä¸ªä¿„ç½—æ–¯æ–¹å—ç”±ä¸€ä¸ªæ–¹å—å’Œæ‰€æœ‰ä¸å…¶ç›´æ¥æˆ–é—´æ¥è¿æ¥çš„åŒè‰²æ–¹å—ç»„æˆã€‚å®šä¹‰ä¸¤ä¸ªä¿„ç½—æ–¯æ–¹å—çš„ç§ç±»ç›¸åŒå½“ä¸”ä»…å½“é€šè¿‡**å¹³ç§»**å…¶ä¸­ä¸€ä¸ªä¿„ç½—æ–¯æ–¹å—å¯ä»¥å’Œå¦ä¸€ä¸ªä¿„ç½—æ–¯æ–¹å—é‡åˆï¼›å¦‚æœä¸¤ä¸ªä¿„ç½—æ–¯æ–¹å—é¢œè‰²ä¸åŒï¼Œä»ç„¶è§†ä¸ºåŒä¸€ç§ä¿„ç½—æ–¯æ–¹å—ã€‚

ä¾‹å¦‚ï¼Œåœ¨å¦‚ä¸‹æƒ…å†µä¸­ï¼Œæ–¹å— $1$ å’Œæ–¹å— $2$ æ˜¯åŒä¸€ç§ä¿„ç½—æ–¯æ–¹å—ï¼Œè€Œæ–¹å— $1$ å’Œæ–¹å— $3$ **ä¸æ˜¯**åŒä¸€ç§ä¿„ç½—æ–¯æ–¹å—ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/ttv3nmgs.png)

## è¯´æ˜/æç¤º

| å­ä»»åŠ¡ | åˆ†æ•° | $n,m \leq$ | ç‰¹æ®Šçº¦å®š | 
| :-: | :-: | :-: | :-: |
| $1$ | $30$ | $20$ | æ‰€æœ‰ä¿„ç½—æ–¯æ–¹å—å¤§å°ä¸è¶…è¿‡ $5 \times 5$ |
| $2$ | $30$ | $500$ | æ‰€æœ‰ä¿„ç½—æ–¯æ–¹å—å¤§å°å‡ä¸º $1 \times x$ æˆ– $x \times 1$ ç±»å‹ï¼Œå…¶ä¸­ $x$ æ˜¯ä»»æ„æ­£æ•´æ•°|
| $3$ | $40$ | $500$ | æ—  |

å¯¹å…¨éƒ¨çš„æµ‹è¯•æ•°æ®ï¼Œä¿è¯ $1 \leq n, m \leq 500$ï¼Œ$1 \leq a_{i,j} \leq n \times m$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 6
1 2 3 4 4 5
1 2 3 3 4 5
1 2 2 3 4 5
1 6 6 7 7 8
6 6 7 7 8 8
```

### è¾“å‡º

```
7```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šä¿„ç½—æ–¯æ–¹å— æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢ï¼ˆFlood Fillï¼‰ + å½¢çŠ¶æ ‡å‡†åŒ–ä¸å»é‡

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œå°±åƒâ€œç»™ç§¯æœ¨åˆ†ç±»â€â€”â€”é¦–å…ˆç”¨**Flood Fillï¼ˆæ´ªæ°´å¡«å……ï¼‰**æ‰¾åˆ°æ‰€æœ‰â€œè¿åœ¨ä¸€èµ·çš„åŒè‰²ç§¯æœ¨å—â€ï¼ˆå››è¿é€šåŒè‰²è¿é€šå—ï¼‰ï¼Œå†æŠŠæ¯ä¸ªç§¯æœ¨å—â€œæ”¾åœ¨å·¦ä¸Šè§’å¯¹é½â€ï¼ˆå½¢çŠ¶æ ‡å‡†åŒ–ï¼‰ï¼Œè¿™æ ·å½¢çŠ¶ä¸€æ ·çš„ç§¯æœ¨å°±ä¼šé‡åˆï¼Œæœ€åæ•°æœ‰å¤šå°‘ç§ä¸åŒçš„â€œå¯¹é½åå½¢çŠ¶â€å°±è¡Œå•¦ï¼  

- **Flood Fillçš„æ ¸å¿ƒ**ï¼šåƒæ´ªæ°´ä»ä¸€ä¸ªç‚¹æ¼«å»¶å¼€ï¼ŒæŠŠæ‰€æœ‰å››è¿é€šçš„åŒè‰²å—éƒ½â€œæ·¹æ²¡â€ï¼ˆæ ‡è®°ä¸ºå·²è®¿é—®ï¼‰ï¼Œè¿™ä¸€æ­¥ç”¨DFSæˆ–BFSéƒ½èƒ½å®ç°ã€‚  
- **å½¢çŠ¶æ ‡å‡†åŒ–çš„å…³é”®**ï¼šä¸ç®¡ç§¯æœ¨å—åŸæ¥åœ¨ç½‘æ ¼çš„å“ªä¸ªä½ç½®ï¼Œéƒ½æŠŠå®ƒçš„æ¯ä¸ªç‚¹åæ ‡å‡å»â€œç§¯æœ¨å·¦ä¸Šè§’ç‚¹çš„åæ ‡â€ï¼ˆæˆ–æ•´ä¸ªç§¯æœ¨çš„æœ€å°è¡Œã€æœ€å°åˆ—ï¼‰ï¼Œè¿™æ ·å¹³ç§»åå½¢çŠ¶ç›¸åŒçš„ç§¯æœ¨ï¼Œæ ‡å‡†åŒ–åçš„åæ ‡åºåˆ—å®Œå…¨ä¸€æ ·ã€‚  
- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£å±•ç¤ºç½‘æ ¼ï¼Œè¿é€šå—ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼›Flood Fillæ—¶ï¼Œå½“å‰å¤„ç†çš„å—ç”¨é—ªçƒçš„åƒç´ ç®­å¤´æ ‡è®°ï¼Œæ¯æ‰©å±•ä¸€ä¸ªå—æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›æ ‡å‡†åŒ–æ—¶ï¼Œç§¯æœ¨å—â€œæ»‘â€åˆ°å·¦ä¸Šè§’ï¼Œä¼´éšâ€œå’»â€çš„éŸ³æ•ˆï¼›æœ€åç»Ÿè®¡ç§ç±»æ—¶ï¼Œä¸åŒå½¢çŠ¶çš„ç§¯æœ¨å—åœ¨å±å¹•ä¸Šæ’æˆä¸€æ’ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šä½œè€… _ckx_)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„æ€è·¯ç‰¹åˆ«â€œç›´ç™½â€â€”â€”ç”¨DFSéå†è¿é€šå—æ—¶ï¼ŒæŠŠæ¯ä¸€æ­¥çš„ç§»åŠ¨æ–¹å‘è®°å½•æˆå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚å‘ä¸‹æ˜¯'0'ã€å‘å³æ˜¯'1'ï¼‰ï¼Œæœ€åç”¨è¿™ä¸ªæ–¹å‘å­—ç¬¦ä¸²ä»£è¡¨å½¢çŠ¶ã€‚æ€è·¯æ¸…æ™°ï¼Œä»£ç é‡Œçš„æ–¹å‘æ•°ç»„å’Œå­—ç¬¦ä¸²å¤„ç†å¾ˆè§„èŒƒï¼Œå°¤å…¶æ˜¯ç”¨`unordered_map`å¿«é€Ÿå»é‡ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œæ–¹å‘å­—ç¬¦ä¸²çš„å”¯ä¸€æ€§ä¾èµ–éå†é¡ºåºï¼Œä½†å› ä¸ºDFSçš„æ–¹å‘é¡ºåºå›ºå®šï¼ŒåŒç§å½¢çŠ¶çš„éå†ç»“æœä¸€å®šç›¸åŒï¼Œæ‰€ä»¥æ˜¯å¯¹çš„ï¼

### é¢˜è§£äºŒï¼š(æ¥æºï¼šä½œè€… Peiyuan)
* **ç‚¹è¯„**ï¼šè¿™é¢˜è§£ç”¨BFSæ‰¾è¿é€šå—ï¼ŒæŠŠæ¯ä¸ªç‚¹çš„â€œç›¸å¯¹åæ ‡â€ï¼ˆå½“å‰ç‚¹åæ ‡ - è¿é€šå—èµ·ç‚¹åæ ‡ï¼‰å­˜åˆ°`vector`é‡Œï¼Œå†ç”¨`set`å»é‡ã€‚BFSçš„ä¼˜ç‚¹æ˜¯ä¸ä¼šæ ˆæº¢å‡ºï¼ˆå¯¹ä»˜å¤§ç½‘æ ¼æ›´ç¨³ï¼‰ï¼Œç›¸å¯¹åæ ‡çš„æ€è·¯ä¹Ÿç‰¹åˆ«ç›´è§‚â€”â€”å°±åƒæŠŠç§¯æœ¨â€œç²˜â€åœ¨èµ·ç‚¹ä¸Šï¼Œå½¢çŠ¶ä¸€æ ·çš„ç§¯æœ¨ï¼Œç›¸å¯¹åæ ‡åºåˆ—è‚¯å®šä¸€æ ·ã€‚ä»£ç é‡Œçš„é˜Ÿåˆ—æ“ä½œå’Œ`vector`å¤„ç†å¾ˆå¹²å‡€ï¼Œé€‚åˆå…¥é—¨å­¦ä¹ ã€‚

### é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šä½œè€… TPJX)
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æŠŠâ€œå½¢çŠ¶æ ‡å‡†åŒ–â€åšåˆ°äº†æè‡´â€”â€”ä¸ä»…å‡èµ·ç‚¹åæ ‡ï¼Œè¿˜å‡æ•´ä¸ªè¿é€šå—çš„**æœ€å°è¡Œå’Œæœ€å°åˆ—**ï¼Œç¡®ä¿ç§¯æœ¨å®Œå…¨â€œè´´â€åœ¨å·¦ä¸Šè§’ã€‚æ¯”å¦‚ä¸€ä¸ªç§¯æœ¨åœ¨(3,4)åˆ°(5,6)ï¼Œå‡æœ€å°è¡Œ3ã€æœ€å°åˆ—4åï¼Œå˜æˆ(0,0)åˆ°(2,2)ï¼Œå½»åº•æ¶ˆé™¤ä½ç½®å½±å“ã€‚ä»£ç é‡Œçš„`normalizeShape`å‡½æ•°å†™å¾—å¾ˆè§„èŒƒï¼Œè¿˜è€ƒè™‘äº†Pythonçš„é€’å½’æ·±åº¦é—®é¢˜ï¼ˆç”¨æ ˆå®ç°DFSï¼‰ï¼Œç‰¹åˆ«è´´å¿ƒï¼


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•æ­£ç¡®æ‰¾åˆ°æ‰€æœ‰è¿é€šå—ï¼Ÿ  
**éš¾ç‚¹**ï¼šå®¹æ˜“æ¼æ‰è¾¹ç•Œåˆ¤æ–­ï¼Œæˆ–è€…é‡å¤è®¿é—®åŒä¸€èŠ‚ç‚¹ã€‚  
**ç­–ç•¥**ï¼šç”¨`vis`æ•°ç»„æ ‡è®°å·²è®¿é—®çš„èŠ‚ç‚¹ï¼ŒDFS/BFSæ—¶ä¸¥æ ¼æ£€æŸ¥â€œæ˜¯å¦è¶Šç•Œã€æ˜¯å¦æœªè®¿é—®ã€æ˜¯å¦åŒè‰²â€ä¸‰ä¸ªæ¡ä»¶ã€‚æ¯”å¦‚é¢˜è§£é‡Œçš„è¾¹ç•Œåˆ¤æ–­ï¼š`nx >= 1 && nx <= n && ny >= 1 && ny <= m`ï¼Œæˆ–è€…åƒRindongçš„é¢˜è§£é‚£æ ·ï¼Œç»™ç½‘æ ¼å‘¨å›´å¡«0ï¼Œå½»åº•å…å»è¾¹ç•Œåˆ¤æ–­ï¼

### 2. å¦‚ä½•è®©å½¢çŠ¶ç›¸åŒçš„è¿é€šå—â€œé‡åˆâ€ï¼Ÿ  
**éš¾ç‚¹**ï¼šç›´æ¥å­˜ç»å¯¹åæ ‡ä¼šå› ä¸ºä½ç½®ä¸åŒè€Œè¯¯åˆ¤ï¼Œæ¯”å¦‚ä¸¤ä¸ªç›¸åŒå½¢çŠ¶çš„ç§¯æœ¨åœ¨ä¸åŒä½ç½®ï¼Œç»å¯¹åæ ‡å®Œå…¨ä¸ä¸€æ ·ã€‚  
**ç­–ç•¥**ï¼š**æ ‡å‡†åŒ–å½¢çŠ¶**â€”â€”è¦ä¹ˆå­˜â€œç›¸å¯¹èµ·ç‚¹çš„åæ ‡â€ï¼ˆæ¯”å¦‚Peiyuançš„é¢˜è§£ï¼‰ï¼Œè¦ä¹ˆå­˜â€œç›¸å¯¹æ•´ä¸ªè¿é€šå—æœ€å°è¡Œã€æœ€å°åˆ—çš„åæ ‡â€ï¼ˆæ¯”å¦‚TPJXçš„é¢˜è§£ï¼‰ã€‚è¿™æ ·ä¸ç®¡ç§¯æœ¨åœ¨å“ªé‡Œï¼Œå½¢çŠ¶ä¸€æ ·çš„æ ‡å‡†åŒ–ååæ ‡åºåˆ—å®Œå…¨ç›¸åŒã€‚

### 3. å¦‚ä½•é«˜æ•ˆå»é‡ï¼Ÿ  
**éš¾ç‚¹**ï¼šå¦‚æœç”¨æ•°ç»„å­˜å½¢çŠ¶ï¼Œæ¯”è¾ƒä¸¤ä¸ªå½¢çŠ¶æ˜¯å¦ç›¸åŒéœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œå¾ˆæ…¢ã€‚  
**ç­–ç•¥**ï¼šç”¨`set`æˆ–`unordered_map`ï¼`set`ä¼šè‡ªåŠ¨æ’åºå¹¶å»é‡ï¼Œåªè¦æŠŠæ ‡å‡†åŒ–åçš„å½¢çŠ¶å­˜è¿›å»ï¼Œæœ€å`set.size()`å°±æ˜¯ç­”æ¡ˆã€‚æ¯”å¦‚Peiyuançš„é¢˜è§£ç”¨`set<vector<pair<int,int>>>`ï¼Œç›´æ¥æ’å…¥ç›¸å¯¹åæ ‡å‘é‡ï¼Œç‰¹åˆ«æ–¹ä¾¿ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†å¤šä¸ªä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œç”¨DFSæ‰¾è¿é€šå—ï¼Œå­˜ç›¸å¯¹èµ·ç‚¹çš„åæ ‡ï¼Œç”¨`set`å»é‡ï¼Œæ˜¯æœ€ç›´è§‚çš„æ ¸å¿ƒå®ç°ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <vector>
#include <set>
using namespace std;

const int N = 505;
int a[N][N];
bool vis[N][N];
int dx[] = {0, 0, 1, -1};
int dy[] = {1, -1, 0, 0};
int n, m;

void dfs(int x, int y, int sx, int sy, vector<pair<int, int>>& shape) {
    vis[x][y] = true;
    shape.push_back({x - sx, y - sy}); // å­˜ç›¸å¯¹èµ·ç‚¹çš„åæ ‡
    for (int i = 0; i < 4; ++i) {
        int nx = x + dx[i], ny = y + dy[i];
        if (nx >= 1 && nx <= n && ny >= 1 && ny <= m && !vis[nx][ny] && a[nx][ny] == a[sx][sy]) {
            dfs(nx, ny, sx, sy, shape);
        }
    }
}

int main() {
    cin >> n >> m;
    for (int i = 1; i <= n; ++i) {
        for (int j = 1; j <= m; ++j) {
            cin >> a[i][j];
        }
    }

    set<vector<pair<int, int>>> shapes;
    for (int i = 1; i <= n; ++i) {
        for (int j = 1; j <= m; ++j) {
            if (!vis[i][j]) {
                vector<pair<int, int>> shape;
                dfs(i, j, i, j, shape);
                shapes.insert(shape);
            }
        }
    }

    cout << shapes.size() << endl;
    return 0;
}
```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–ç½‘æ ¼æ•°æ®ï¼›  
  2. éå†æ¯ä¸ªæœªè®¿é—®çš„ç‚¹ï¼Œç”¨DFSæ‰¾è¿é€šå—ï¼Œè®°å½•æ¯ä¸ªç‚¹ç›¸å¯¹äºèµ·ç‚¹çš„åæ ‡ï¼›  
  3. æŠŠç›¸å¯¹åæ ‡å‘é‡æ’å…¥`set`ï¼Œè‡ªåŠ¨å»é‡ï¼›  
  4. è¾“å‡º`set`çš„å¤§å°ï¼ˆä¸åŒå½¢çŠ¶çš„æ•°é‡ï¼‰ã€‚


### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šä½œè€… _ckx_)
* **äº®ç‚¹**ï¼šç”¨æ–¹å‘å­—ç¬¦ä¸²ä»£è¡¨å½¢çŠ¶ï¼Œä¸éœ€è¦å­˜åæ ‡ï¼ŒèŠ‚çœç©ºé—´ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
void dfs(int x, int y, string &s) {
    for (int i = 0; i < 4; ++i) {
        int nx = x + dx[i], ny = y + dy[i];
        if (nx >= 1 && nx <= n && ny >= 1 && ny <= m && !vis[nx][ny] && a[nx][ny] == a[x][y]) {
            s += char(i + '0'); // è®°å½•æ–¹å‘ï¼ˆ0-ä¸‹ï¼Œ1-å³ï¼Œ2-ä¸Šï¼Œ3-å·¦ï¼‰
            vis[nx][ny] = 1;
            dfs(nx, ny, s);
        }
    }
    s += ' '; // åŒºåˆ†ä¸åŒåˆ†æ”¯
}
```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æŠŠDFSçš„**ç§»åŠ¨æ–¹å‘**è½¬æˆå­—ç¬¦ï¼ˆæ¯”å¦‚å‘ä¸‹èµ°ä¸€æ­¥åŠ '0'ï¼‰ï¼Œæœ€åç”¨å­—ç¬¦ä¸²` s`ä»£è¡¨å½¢çŠ¶ã€‚ä¸ºä»€ä¹ˆåŠ ç©ºæ ¼ï¼Ÿæ¯”å¦‚ä¸¤ä¸ªä¸åŒçš„åˆ†æ”¯ï¼Œæ–¹å‘åºåˆ—å¯èƒ½ä¸€æ ·ï¼Œä½†ç©ºæ ¼èƒ½åŒºåˆ†å¼€â€”â€”æ¯”å¦‚â€œ01 â€å’Œâ€œ0 1â€æ˜¯ä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¯¹åº”ä¸åŒçš„å½¢çŠ¶ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šæ–¹å‘å­—ç¬¦ä¸²æ˜¯ä¸€ç§â€œè½»é‡åŒ–â€çš„å½¢çŠ¶è¡¨ç¤ºæ–¹æ³•ï¼Œé€‚åˆå°è¿é€šå—ï¼Œä½†è¦æ³¨æ„éå†é¡ºåºçš„ä¸€è‡´æ€§ï¼


### é¢˜è§£äºŒï¼š(æ¥æºï¼šä½œè€… Peiyuan)
* **äº®ç‚¹**ï¼šç”¨BFSæ‰¾è¿é€šå—ï¼Œé¿å…æ ˆæº¢å‡ºï¼Œç›¸å¯¹åæ ‡æ€è·¯ç›´è§‚ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
void bfs(int sx, int sy) {
    queue<node> q;
    q.push({sx, sy});
    t.clear();
    while (!q.empty()) {
        node c = q.front(); q.pop();
        t.push_back({c.x - sx, c.y - sy}); // ç›¸å¯¹èµ·ç‚¹åæ ‡
        for (int i = 0; i < 4; ++i) {
            int nx = c.x + dx[i], ny = c.y + dy[i];
            if (nx > 0 && nx <= n && ny > 0 && ny <= m && !vis[nx][ny] && a[nx][ny] == a[sx][sy]) {
                vis[nx][ny] = 1;
                q.push({nx, ny});
            }
        }
    }
    lst.insert(t);
}
```
* **ä»£ç è§£è¯»**ï¼š  
  BFSç”¨é˜Ÿåˆ—å®ç°ï¼Œæ¯æ¬¡å–å‡ºé˜Ÿé¦–å…ƒç´ ï¼Œè®°å½•ç›¸å¯¹èµ·ç‚¹çš„åæ ‡ï¼Œå†æŠŠç›¸é‚»çš„åŒè‰²å—åŠ å…¥é˜Ÿåˆ—ã€‚BFSçš„ä¼˜ç‚¹æ˜¯â€œä¸€å±‚ä¸€å±‚æ‰©å±•â€ï¼Œä¸ä¼šåƒDFSé‚£æ ·å› ä¸ºé€’å½’å¤ªæ·±è€Œæ ˆæº¢å‡ºï¼ˆæ¯”å¦‚1000x1000çš„å¤§ç½‘æ ¼ï¼‰ã€‚  
* **å­¦ä¹ ç¬”è®°**ï¼šBFSé€‚åˆå¤„ç†å¤§ç½‘æ ¼çš„è¿é€šå—ï¼Œç›¸å¯¹åæ ‡æ˜¯å½¢çŠ¶æ ‡å‡†åŒ–çš„â€œå…¥é—¨çº§â€æ–¹æ³•ï¼


### é¢˜è§£ä¸‰ï¼š(æ¥æºï¼šä½œè€… TPJX)
* **äº®ç‚¹**ï¼šæ ‡å‡†åŒ–å½¢çŠ¶æ›´å½»åº•ï¼Œç¡®ä¿ç§¯æœ¨å®Œå…¨â€œè´´â€åœ¨å·¦ä¸Šè§’ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
string normalizeShape(vector<pair<int, int>>& cells) {
    int min_r = n, min_c = m;
    for (auto& cell : cells) {
        min_r = min(min_r, cell.first);
        min_c = min(min_c, cell.second);
    }
    sort(cells.begin(), cells.end(), [&](const pair<int, int>& a, const pair<int, int>& b) {
        if (a.first - min_r != b.first - min_r) return (a.first - min_r) < (b.first - min_r);
        return (a.second - min_c) < (b.second - min_c);
    });
    string shape;
    for (auto& cell : cells) {
        shape += to_string(cell.first - min_r) + "_" + to_string(cell.second - min_c) + ";";
    }
    return shape;
}
```
* **ä»£ç è§£è¯»**ï¼š  
  1. æ‰¾åˆ°è¿é€šå—çš„**æœ€å°è¡Œ`min_r`**å’Œ**æœ€å°åˆ—`min_c`**ï¼›  
  2. æŠŠæ¯ä¸ªç‚¹çš„åæ ‡å‡å»`min_r`å’Œ`min_c`ï¼Œè®©ç§¯æœ¨â€œè´´â€åœ¨å·¦ä¸Šè§’ï¼›  
  3. æ’åºåæ ‡ï¼ˆç¡®ä¿é¡ºåºä¸€è‡´ï¼‰ï¼Œè½¬æˆå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚â€œ0_0;0_1;1_0;â€ï¼‰ï¼›  
  è¿™æ ·ä¸ç®¡ç§¯æœ¨åŸæ¥åœ¨å“ªä¸ªä½ç½®ï¼Œå½¢çŠ¶ä¸€æ ·çš„å­—ç¬¦ä¸²è‚¯å®šç›¸åŒï¼  
* **å­¦ä¹ ç¬”è®°**ï¼šæ ‡å‡†åŒ–å½¢çŠ¶æ—¶ï¼Œå‡æœ€å°è¡Œåˆ—æ¯”å‡èµ·ç‚¹åæ ‡æ›´å½»åº•ï¼Œé€‚åˆæ‰€æœ‰å½¢çŠ¶ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ ç§¯æœ¨åˆ†ç±»å¤§èµ›
### è®¾è®¡æ€è·¯ç®€è¿°ï¼š  
ç”¨8ä½åƒç´ é£æ¨¡æ‹Ÿâ€œç§¯æœ¨åˆ†ç±»â€æ¸¸æˆâ€”â€”ç½‘æ ¼æ˜¯åƒç´ åŒ–çš„æ£‹ç›˜ï¼Œè¿é€šå—æ˜¯å½©è‰²çš„åƒç´ ç§¯æœ¨ï¼ŒFlood Fillåƒâ€œæ´ªæ°´æ¼«å»¶â€ï¼Œæ ‡å‡†åŒ–åƒâ€œæŠŠç§¯æœ¨æ”¾åœ¨å·¦ä¸Šè§’å¯¹é½â€ã€‚åŠ å…¥éŸ³æ•ˆå’Œå…³å¡ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ï¼


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹ï¼š
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º5x6çš„åƒç´ ç½‘æ ¼ï¼ˆå’Œæ ·ä¾‹è¾“å…¥ä¸€è‡´ï¼‰ï¼Œç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºæ•°å­—ï¼ˆæ¯”å¦‚1æ˜¯çº¢è‰²ï¼Œ2æ˜¯è“è‰²ï¼‰ï¼›  
   - åº•éƒ¨æœ‰â€œæ§åˆ¶é¢æ¿â€ï¼šå¼€å§‹/æš‚åœæŒ‰é’®ã€å•æ­¥æ‰§è¡Œã€é‡ç½®æŒ‰é’®ã€é€Ÿåº¦æ»‘å—ï¼ˆ1x-5xï¼‰ï¼›  
   - æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«èƒŒæ™¯éŸ³ä¹ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„å°å…³å¡BGMï¼‰ã€‚

2. **Flood Fillæ¼”ç¤º**ï¼š  
   - ç‚¹å‡»â€œå¼€å§‹â€ï¼Œä»(1,1)ç‚¹ï¼ˆçº¢è‰²1ï¼‰å¼€å§‹Flood Fillï¼šè¯¥ç‚¹é—ªçƒï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
   - æ¯æ‰©å±•ä¸€ä¸ªçº¢è‰²å—ï¼Œè¯¥å—ä»â€œç°è‰²â€å˜æˆâ€œçº¢è‰²â€ï¼Œæœ‰ä¸€ä¸ªâ€œæ»‘å…¥â€åŠ¨ç”»ï¼Œæ’­æ”¾â€œå’»â€çš„éŸ³æ•ˆï¼›  
   - å½“å‰å¤„ç†çš„å—ç”¨â€œé»„è‰²ç®­å¤´â€æ ‡è®°ï¼Œæ–¹å‘å’Œä»£ç ä¸­çš„`dx/dy`ä¸€è‡´ï¼ˆæ¯”å¦‚å‘ä¸‹ç®­å¤´ä»£è¡¨dx=1ï¼‰ã€‚

3. **å½¢çŠ¶æ ‡å‡†åŒ–æ¼”ç¤º**ï¼š  
   - å½“Flood Fillå®Œæˆï¼ˆçº¢è‰²è¿é€šå—å…¨éƒ¨æ‰¾åˆ°ï¼‰ï¼Œæ‰€æœ‰çº¢è‰²å—â€œé›†ä½“å‘å·¦ä¸Šç§»åŠ¨â€ï¼ˆå‡å»æœ€å°è¡Œ1ã€æœ€å°åˆ—1ï¼‰ï¼Œå˜æˆ(0,0)åˆ°(3,0)çš„åƒç´ å—ï¼Œä¼´éšâ€œå’”å—’â€çš„éŸ³æ•ˆï¼›  
   - æ ‡å‡†åŒ–åçš„ç§¯æœ¨ä¼šâ€œé£åˆ°â€å±å¹•å³ä¾§çš„â€œå½¢çŠ¶åº“â€é‡Œï¼Œå’Œä¹‹å‰çš„å½¢çŠ¶å¯¹æ¯”â€”â€”å¦‚æœç›¸åŒï¼Œå°±â€œåˆå¹¶â€ï¼ˆé—ªçƒä¸€ä¸‹ï¼‰ï¼›å¦‚æœä¸åŒï¼Œå°±â€œæ–°å¢â€ï¼ˆå¼¹å‡ºâ€œæ–°å½¢çŠ¶ï¼â€çš„æ–‡å­—ï¼‰ã€‚

4. **äº¤äº’ä¸åé¦ˆ**ï¼š  
   - å•æ­¥æ‰§è¡Œï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œæ‰§è¡ŒFlood Fillçš„ä¸€æ­¥ï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤ºå½“å‰ä»£ç è¡Œï¼ˆæ¯”å¦‚`dfs(nx, ny, s);`ï¼‰ï¼›  
   - è‡ªåŠ¨æ’­æ”¾ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€ï¼ŒåŠ¨ç”»ä»¥2xé€Ÿåº¦è¿è¡Œï¼Œæ¯å®Œæˆä¸€ä¸ªè¿é€šå—ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šå¡å°”è¾¾ã€‹çš„è§£è°œéŸ³æ•ˆï¼‰ï¼›  
   - é‡ç½®ï¼šç‚¹å‡»â€œé‡ç½®â€ï¼Œç½‘æ ¼æ¢å¤åˆå§‹çŠ¶æ€ï¼Œå½¢çŠ¶åº“æ¸…ç©ºã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»ï¼š
Flood Fill + å½¢çŠ¶æ ‡å‡†åŒ–çš„æ€è·¯ï¼Œè¿˜èƒ½è§£å†³è¿™äº›é—®é¢˜ï¼š  
1. ç»Ÿè®¡å›¾ç‰‡ä¸­çš„ä¸åŒå½¢çŠ¶ç‰©ä½“ï¼ˆæ¯”å¦‚è¯†åˆ«éªŒè¯ç ä¸­çš„å­—ç¬¦ï¼‰ï¼›  
2. æ£‹ç›˜æ¸¸æˆä¸­çš„è¿é€šå—è®¡æ•°ï¼ˆæ¯”å¦‚å›´æ£‹çš„æ°”æ•°è®¡ç®—ï¼‰ï¼›  
3. åœ°å›¾ä¸­çš„åŒºåŸŸåˆ’åˆ†ï¼ˆæ¯”å¦‚ç»Ÿè®¡ä¸åŒçœä»½çš„é¢ç§¯ï¼‰ã€‚


### æ´›è°·æ¨èç»ƒä¹ ï¼š
1. **P1506 æ‹¯æ•‘oibhæ€»éƒ¨**ï¼š  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨Flood Fillæ‰¾è¿é€šå—ï¼Œéœ€è¦å¤„ç†è¾¹ç•Œï¼ˆå’Œæœ¬é¢˜çš„è¾¹ç•Œåˆ¤æ–­ç±»ä¼¼ï¼‰ã€‚  
2. **P1162 å¡«æ¶‚é¢œè‰²**ï¼š  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨Flood Fillæ‰¾â€œå¤–å›´åŒºåŸŸâ€ï¼Œéœ€è¦åå‘æ€è€ƒï¼ˆå’Œæœ¬é¢˜çš„â€œæ‰¾å†…éƒ¨è¿é€šå—â€äº’è¡¥ï¼‰ã€‚  
3. **P2330 [SCOI2005]ç¹å¿™çš„éƒ½å¸‚**ï¼š  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿é€šå—çš„æ‰©å±•é—®é¢˜ï¼Œéœ€è¦ç”¨åˆ°å¹¶æŸ¥é›†ï¼ˆæœ¬é¢˜çš„è¿›é˜¶ç‰ˆï¼‰ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªä½œè€… Rindong)ï¼š  
â€œå®šä¹‰æ–¹å‘æ•°ç»„`dir`å¯ä»¥çœå»å¾ˆå¤šéº»çƒ¦ï¼Œå°†çŸ©é˜µ`a`å‘¨å›´å¡«å……`0`å¯ä»¥å…å»è¾¹ç•Œåˆ¤æ–­çš„éº»çƒ¦ã€‚â€  
**ç‚¹è¯„**ï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å°æŠ€å·§ï¼æ¯”å¦‚æŠŠç½‘æ ¼çš„ä¸Šä¸‹å·¦å³éƒ½åŠ ä¸€å±‚0ï¼Œè¿™æ ·DFSæ—¶ä¸ç”¨æ£€æŸ¥`nx >= 1`å’Œ`ny >= 1`â€”â€”åªè¦`a[nx][ny] != 0`å°±ä¸ä¼šè¶Šç•Œã€‚åŠ¨æ‰‹è¯•è¯•ï¼Œèƒ½å°‘å†™å¾ˆå¤šä»£ç ï¼


## æ€»ç»“
æœ¬æ¬¡åˆ†æäº†â€œä¿„ç½—æ–¯æ–¹å—â€é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼šFlood Fillæ‰¾è¿é€šå— + å½¢çŠ¶æ ‡å‡†åŒ–å»é‡ã€‚é€šè¿‡ä¼˜è´¨é¢˜è§£çš„ä»£ç èµæï¼Œæˆ‘ä»¬å­¦ä¼šäº†ä¸‰ç§å½¢çŠ¶è¡¨ç¤ºæ–¹æ³•ï¼ˆæ–¹å‘å­—ç¬¦ä¸²ã€ç›¸å¯¹åæ ‡ã€å‡æœ€å°è¡Œåˆ—ï¼‰ï¼Œè¿˜è®¾è®¡äº†å¥½ç©çš„åƒç´ åŠ¨ç”»ã€‚  

è®°ä½ï¼šç¼–ç¨‹å°±åƒâ€œæ­ç§¯æœ¨â€â€”â€”å…ˆæŠŠåŸºç¡€æ¨¡å—ï¼ˆFlood Fillï¼‰æ­å¥½ï¼Œå†ç”¨æŠ€å·§ï¼ˆæ ‡å‡†åŒ–ï¼‰è®©ç§¯æœ¨â€œæ•´é½â€ï¼Œæœ€åæ•°æœ‰å¤šå°‘ç§ä¸åŒçš„ç§¯æœ¨ï¼ä¸‹æ¬¡é‡åˆ°è¿é€šå—é—®é¢˜ï¼Œè¯•è¯•ä»Šå¤©å­¦çš„æ–¹æ³•å§ï½ ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š86.29ç§’
# 题目信息

# [常州市赛 2022] 可能的三角形

## 题目背景

搬运自 <http://czoj.com.cn/p/452>。数据为民间数据。



## 题目描述

小 $\text{X}$ 和小 $\text Y$ 都是龙城学堂的资深学员，为了丰富学弟学妹们的课余生活，小 $\text{X}$ 和小 $\text{Y}$ 发明了一个简单的数字游戏。

小 $\text{Y}$ 有三个正整数 $A,B,C(2≤A≤B≤C)$，且 $A,B,C$ 刚好构成一个三角形的三条边。这些数字是保密的，他不会直接透露给小 $\text{X}$。他会告诉小 $\text{X}$ 一共 $4$ 个正整数 $x_1,x_2,x_3,x_4$，并宣称 $x_1,x_2,x_3,x_4$ 每个数必定是 $A,B,C,A+B,A+C,B+C$ 或 $A+B+C$ 之一。

为了公平起见，小 $\text{Y}$ 不可能撒谎，也就是说他给出的这些正整数里一定存在至少一组对应的合法的 $(A,B,C)$，满足 $A,B,C$ 恰好是某个三角形的三条边。

小 $\text{X}$ 百思不得其解，所以请你来求出有哪些三元组 $(A,B,C)$ 符合条件。

## 说明/提示

### 样例解释
对于第一组解，$A=2,B=2,C=3$，输入的 $4$ 个数对应的值分别是 $A,A+B,A+C,A+B+C$；

对于第二组解，$A=2,B=3,C=4$，输入的 $4$ 个数对应的值分别是 $A,C,A+B,B+C$；

对于第三组解，$A=2,B=4,C=5$，输入的 $4$ 个数对应的值分别是 $A,B,C,A+C$；

除此之外不可能存在其它符合条件的三角形了。注意 $(1,2,4)$ 不可能组成三角形。

### 数据规模与约定
对于所有数据，$1≤x_1,x_2,x_3,x_4≤10^9$。
| 测试点编号 | 特殊性质 |
| :----------: | :----------: |
| $1$ | 保证答案的 $A,B,C$ 构成直角三角形 |
| $2$ | 保证答案的 $A,B,C$ 构成等腰三角形 |
| $3$ | 保证答案的 $A,B,C$ 构成等边三角形 |
| $1 \sim 6$ | 保证答案的 $A,B,C$ 唯一 |
| $7 \sim 10$ | $1≤x_1,x_2,x_3,x_4≤100$ |
| $11 \sim 20$ | 无 |

## 样例 #1

### 输入

```
2 4 5 7```

### 输出

```
2 2 3
2 3 4
2 4 5```

# AI分析结果


### 💡 Kay的C++算法解析：[常州市赛 2022] 可能的三角形 深入学习指南 💡

---

#### **1. 题目解读与核心算法识别**  
✨ **本题主要考察**：`枚举与验证`（编程技巧应用）  

🗣️ **初步分析**：  
> 这道题的核心是**数字侦探游戏**：已知四个线索（$x_1$-$x_4$），每个线索是三角形三边（$A,B,C$）的某种组合（如 $A+B$ 或 $A+B+C$）。我们需要枚举所有可能的组合方式（共35种），像侦探一样反推出 $A,B,C$ 的值，并验证是否能构成合法三角形。  
> - **核心难点**：  
>   - 如何覆盖所有35种表达式组合而不遗漏？  
>   - 反推 $A,B,C$ 时需处理负数/非整数解  
>   - 验证三角形条件（$A≤B≤C$ 且两边之和>第三边）  
> - **题解策略**：  
>   直接枚举35种表达式组合，每种组合通过解方程反推 $A,B,C$，再用 `check()` 函数验证。  
> - **可视化设计**：  
>   采用**像素化侦探事务所**风格，黑板显示当前枚举的表达式组合，动态绘制三角形边长并高亮验证结果（绿色=合法/红色=非法），配侦探音效（🔍搜索声、✅成功音效）。  

---

#### **2. 精选优质题解参考**  
**题解（作者：HanSF）**  
* **点评**：  
  思路直白但全面——通过35个分支覆盖所有表达式组合，每个分支反推 $A,B,C$ 后调用 `check()` 验证。代码规范性较好：  
  - **亮点1**：用 `check()` 函数封装验证逻辑，确保代码复用（三角形条件+有序性）  
  - **亮点2**：排序去重机制（`sort`+遍历比较）避免重复解  
  - **优化点**：部分分支冗余（如情况5/6/7重复），可合并简化  
  - **实践价值**：AC通过证明正确性，适合竞赛快速实现  

---

#### **3. 核心难点辨析与解题策略**  
1. **难点1：组合爆炸与分支设计**  
   * **分析**：35种组合需人工推导表达式关系（如 $x_1+x_2=x_3$ 对应 $A+B=C$）。题解通过固定输入顺序（$x_1≤x_2≤x_3≤x_4$）简化分支。  
   * 💡 **学习笔记**：排序输入是减少枚举量的关键技巧！  

2. **难点2：反推变量时的边界处理**  
   * **分析**：反推 $A,B,C$ 时需检查：  
     - 非负性（如 `x[3]-x[1]≥0`）  
     - 整数解（如情况35需整除2）  
   * 💡 **学习笔记**：`check()` 函数首行过滤负数解，但未处理非整数——需额外验证。  

3. **难点3：避免重复解**  
   * **分析**：不同分支可能推出相同 $(A,B,C)$。题解用结构体数组存储结果，排序后相邻比较去重。  
   * 💡 **学习笔记**：自定义结构体+排序函数(`cmp`)是通用去重方案。  

### ✨ 解题技巧总结  
- **分类覆盖法**：当问题存在有限组合时，枚举是直接有效的策略  
- **模块化验证**：分离核心验证逻辑（如 `check()`）提升代码可读性  
- **预处理优化**：输入排序显著降低分支复杂度  

---

#### **4. C++核心代码实现赏析**  
**通用核心实现**  
```cpp
#include <bits/stdc++.h>
#define int long long
using namespace std;

struct Tri { int x,y,z; }; // 存储三元组

vector<Tri> res;          // 存储合法解

void check(int a, int b, int c) {
    if (a<=0 || b<=0 || c<=0) return;     // 过滤非正数
    if (a>b) swap(a,b); if (b>c) swap(b,c); // 确保有序
    if (a+b>c && a+c>b && b+c>a)          // 三角形条件
        res.push_back({a,b,c});
}

signed main() {
    int x[4]; cin >> x[0]>>x[1]>>x[2]>>x[3];
    sort(x, x+4); // 关键！排序简化枚举

    // 枚举核心分支（示例3种）
    if (x[0]+x[1]==x[3]) check(x[0], x[1], x[2]);      // 情况1
    if (x[0]+x[1]+x[2]==x[3]) check(x[0],x[1],x[2]);  // 情况4
    if (x[3]-x[0] == x[2]-x[1]) {                    // 情况8
        int a = x[0], b = x[1], c = x[2]-x[0];
        check(a,b,c);
    }
    // ... 其他32个分支

    // 排序去重输出
    sort(res.begin(), res.end(), [](Tri p, Tri q){
        return tie(p.x,p.y,p.z) < tie(q.x,q.y,q.z);
    });
    for (int i=0; i<res.size(); ++i) {
        if (i>0 && res[i].x==res[i-1].x 
                && res[i].y==res[i-1].y 
                && res[i].z==res[i-1].z) continue;
        cout << res[i].x <<" "<<res[i].y<<" "<<res[i].z<<endl;
    }
}
```
**代码解读概要**：  
1. 输入排序后，枚举35种表达式组合  
2. 每种组合反推 $A,B,C$ 并调用 `check()`  
3. `check()` 验证有序性和三角形条件  
4. 最终结果排序去重输出  

---

#### **5. 算法可视化：像素动画演示**  
**主题**：🔍 *侦探事务所的35个案件*  
**核心演示**：枚举过程 + 三角形动态验证  

```plaintext
┌──────────────────────┐
│  侦探黑板  [案件5/35] │
├──────────────────────┤
| 假设: x1=A, x2=B, x3=C 
| 实际: x1=2, x2=4, x3=5 → 推导: A=2,B=4,C=5
| 
| 三角形验证: 
|   2+4>5 ✔️   2+5>4 ✔️   4+5>2 ✔️  
|   [2,4,5] 加入档案！ 
└──────────────────────┘
```

**交互设计**：  
1. **控制面板**：  
   - `← →` 按钮切换案件（枚举分支）  
   - `▶️ 自动推理`：AI按顺序演示35个案件（速度可调）  
2. **动画细节**：  
   - **案件页**：显示当前分支的表达式假设（如 $x_1=A+B$）  
   - **推导过程**：黑板动态绘制方程式（如 $x_2-x_1=C$）  
   - **三角形验证**：  
     - 用三色像素条表示边长（🔴A, 🟢B, 🔵C）  
     - 实时计算 $A+B$ 与 $C$ 比较：若 $A+B≤C$，$C$ 条闪烁红色❌  
   - **音效**：  
     - 写入黑板：✏️书写声  
     - 验证成功：🎉短促胜利音效  
     - 验证失败：❌低沉错误音  
3. **游戏化**：  
   - 每成功解锁1个新解获得⭐侦探勋章  
   - 35案件全解锁后获得🏆“神探”称号  

---

#### **6. 拓展练习**  
1. **洛谷 P5717** 【三角形分类】  
   → 练习枚举三角形类型（锐角/直角/钝角）  
2. **洛谷 P1217** 【回文质数】  
   → 强化多条件枚举（质数+回文）  
3. **洛谷 P1888** 【三角函数】  
   → 结合数学与边界验证  

---

#### **7. 学习心得**  
> 本题解未包含作者个人心得，但Kay的总结：  
> **枚举类题目核心**：  
> - 预处理（如排序）大幅简化分支  
> - 验证函数需独立且健壮  
> - 去重机制必不可少  

通过这35个“案件”，我们不仅学会如何当数字侦探，更掌握了**系统化枚举**的思维框架！ 🕵️♂️💻

---
处理用时：143.37秒
# 题目信息

# 刷题

## 题目描述

NOIP 临近了，小 A 却发现他已经不会写题了。好在现在离竞赛还有一段时间，小 A 决定从现在开始夜以继日地刷题。也就是说小 A 废寝忘食，一天二十四小时地刷题。

今天的日期（时间）是 yyyy 年 mm 月 dd 日 hh 时 MM 分，考试的时间是 yyyy2 年 mm2 月 dd2 日 hh2 时 MM2 分。这之间的所有时间小 A 都用来刷题了，那么考试之前他最多能刷多少题呢？注意哦，考虑闰年。

时间紧张小 A 只管数量不管质量。当然有的题目容易一些，有的题目难一些。根据小 A 的经验，他能一眼看出写出某一个题目需要的时间，以分钟记。

现在给出洛谷 Online Judge 的题目列表，请你挑出最多的题目使小A能在竞赛前写出来。

我们假设从远古到未来，历法的表示与现在一样。


## 样例 #1

### 输入

```
2
1
1
2007-06-23-11:59
2007-06-23-12:00```

### 输出

```
1```

# AI分析结果


### 题目解读与核心算法识别
✨ **本题主要考察**：`模拟应用`与`贪心策略`

🗣️ **初步分析**：
> 解决“刷题”这道题，关键在于**精确计算时间差**并运用**贪心策略**。就像在限定时间内尽可能多地完成小任务一样，我们需要先算出小A可用的总分钟数，然后优先解决耗时最短的题目。本题的核心挑战在于处理复杂的日期计算（包括闰年、月份天数差异），而贪心策略则确保在有限时间内最大化解题数量。

- **核心难点**：日期时间差计算涉及闰年判断、月份天数变化等细节，易出错。优质题解普遍采用“基准点法”（如0000-01-01 00:00）将日期转换为总分钟数后相减，避免直接逐级计算带来的复杂性。
- **算法流程**：
  1. **时间转换**：将起止日期转为从基准点开始的总分钟数
  2. **时间差计算**：结束时间分钟数 - 开始时间分钟数
  3. **贪心选择**：题目按耗时排序后从小到大累加，直至时间不足
- **可视化设计**：采用**8位像素风格**的日历界面，左侧显示实时刷题进度（如进度条、已做题数），右侧用像素动画展示时间流逝（如时钟旋转、日历翻页）。关键操作如闰年判断会触发闪烁提示（黄光闪烁+“叮”音效），题目选择时显示题号飞入进度条的动画。

---

### 精选优质题解参考

**题解一（来源：Ousmane_Dembele）**
* **点评**：此解亮点在于**输入处理简洁**（`scanf`格式化读取日期）和**时间计算模块化**。通过分离闰年判断函数，清晰处理了日期累加逻辑。代码中`t*=-1`巧妙修正起止顺序，体现了对边界条件的敏感度。变量命名规范（如`t`代表总时间），循环结构清晰，可直接用于竞赛实践。

**题解二（来源：傅思维666）**
* **点评**：提出“多退少补”思想是最大亮点。先按整年/月累加再修正局部，显著降低复杂度。代码使用月份数组`m1/m2`区分平闰年，逻辑严谨。虽然变量名略简（如`time`），但边界处理完整（如`time-=m2[i]`），调试建议“动手模拟”极具参考价值。

**题解三（来源：ztzshiwo001219）**
* **点评**：**基准点法**的典范实现。将日期转换为相对0000-01-01的分钟数，大幅简化计算。代码结构极简（仅30行），但完整覆盖闰年判断、月份累加等关键步骤。`getStandardTime()`函数封装性强，变量命名规范（`BEGIN/END`），适合学习者模仿。

---

### 核心难点辨析与解题策略

1. **难点一：跨年日期差计算**
   * **分析**：优质题解均避免直接逐日计算，转而采用年份循环累加（考虑闰年）+ 月份天数修正。如傅思维666的解法：先累加整年天数，再扣除起始年前月份、添加结束年前月份。
   * 💡 **学习笔记**：基准点法将日期转为绝对分钟数，可规避复杂的相对计算。

2. **难点二：闰年与月份边界处理**
   * **分析**：关键在判断2月天数。所有优质解都封装了闰年函数，并在月份累加时动态调用（如Ousmane_Dembele的`panding(i)?29:28`）。特别注意：闰年仅影响2月，且当年份变化时需重新判断。
   * 💡 **学习笔记**：建立月份数组`month[12]`，配合闰年标志动态索引更安全。

3. **难点三：贪心策略的实践应用**
   * **分析**：所有解法都严格遵循“排序+累加”模式。ztzshiwo001219的代码最精炼：`sort`后直接循环累加，实时检测剩余时间。
   * 💡 **学习笔记**：贪心有效性依赖于排序，题目输入后应立即`sort`。

### ✨ 解题技巧总结
- **技巧1：日期标准化处理** – 用`scanf("%d-%d...")`直接读入数字，避免字符串解析
- **技巧2：模块化验证** – 单独测试闰年函数（如输入2000/1900验证）
- **技巧3：边界压力测试** – 测试0000年与9999年的跨万年计算（防整型溢出）
- **技巧4：贪心提前终止** – 当剩余时间小于当前题目耗时立即`break`，提升效率

---

### C++核心代码实现赏析

**本题通用核心实现参考**
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

bool isLeap(int year) {
    return (year%4==0 && year%100!=0) || (year%400==0);
}

int main() {
    int n, time[5001];
    int y1, m1, d1, h1, min1, y2, m2, d2, h2, min2;
    char tmp;
    
    // 输入处理
    cin >> n;
    for (int i=0; i<n; i++) cin >> time[i];
    cin >> y1 >> tmp >> m1 >> tmp >> d1 >> tmp >> h1 >> tmp >> min1;
    cin >> y2 >> tmp >> m2 >> tmp >> d2 >> tmp >> h2 >> tmp >> min2;
    
    // 时间差计算（基准点法）
    long long totalDays = 0;
    for (int y = y1; y < y2; y++) 
        totalDays += isLeap(y) ? 366 : 365;
    
    int monthDays[12] = {31,28,31,30,31,30,31,31,30,31,30,31};
    for (int m=1; m<m1; m++) 
        totalDays -= (m==2 && isLeap(y1)) ? 29 : monthDays[m-1];
    for (int m=1; m<m2; m++)
        totalDays += (m==2 && isLeap(y2)) ? 29 : monthDays[m-1];
        
    totalDays = totalDays*24*60 + (d2-d1-1)*24*60; 
    long long totalMins = totalDays + (h2*60+min2) - (h1*60+min1);
    
    // 贪心选择
    sort(time, time+n);
    int cnt = 0;
    for (int i=0; i<n; i++) {
        if (totalMins >= time[i]) {
            cnt++;
            totalMins -= time[i];
        } else break;
    }
    cout << cnt;
}
```
**代码解读概要**：  
> 1. 输入处理：用`char tmp`吸收分隔符，直接获取日期数字  
> 2. 时间计算：  
>    - 整年累加（含闰年判断）  
>    - 月份修正（动态处理2月闰年）  
>    - 最终转为分钟  
> 3. 贪心实现：排序后线性扫描，实时扣除时间

**题解一核心片段赏析**  
```cpp
// Ousmane_Dembele 时间计算片段
for(int i=a[1];i<b[1];i++) 
    if(panding(i)) t -= 366*1440;
    else t -= 365*1440;
if(panding(a[1]) && a[2]>2) t++;
```
**亮点**：用固定分钟数（366*1440）处理整年，逻辑清晰  
**学习笔记**：将天数转换为分钟时统一乘1440，避免中间变量误差。

**题解二核心片段赏析**  
```cpp
// 傅思维666 的“多退少补”
for(int i=start[1];i<endd[1];i++) {
    if(check(i)) time += 366;
    else time += 365;
}
if(check(start[1])) 
    for(int i=1;i<start[2];i++) time -= m2[i];
```
**亮点**：先加后减的修正策略降低复杂度  
**学习笔记**：`m2`数组预存闰年月份天数，代码更易维护。

**题解三核心片段赏析**  
```cpp
// ztzshiwo001219 基准点转换
long long getStandardTime() {
    long long res = 0;
    for(int y=0; y<year; y++) 
        res += isLeap(y) ? 366*1440 : 365*1440;
    // ... 月、日、时累加
    return res;
}
```
**亮点**：函数封装提高复用性  
**学习笔记**：绝对时间计算完全分离，便于调试。

---

### 算法可视化：像素动画演示

**主题**：`像素时间沙漏与题目闯关`  
**核心演示**：  
1. **场景布局**  
   - 左侧：8-bit风格日历（年/月/日实时更新）  
   - 右侧：倒计时沙漏（像素颗粒下落表示剩余时间）  
   - 底部：题目队列（方块长度=耗时，绿色→红色渐变）  

2. **关键动画**  
   - **时间计算阶段**：  
     - 年份切换时，闰年标签闪烁黄光+“叮”音效  
     - 月份修正时，对应月份方块弹出显示天数（28/29/30/31）  
   - **贪心选择阶段**：  
     - 短题目方块优先飞入沙漏，触发“咔哒”音效  
     - 沙漏高度随剩余时间实时下降  
     - 时间耗尽时沙漏变红+警报音效  

3. **交互控制**  
   - **速度滑块**：调节动画速度（0.5x~3x）  
   - **单步执行**：空格键逐步查看日期计算  
   - **模式切换**：C键对比基准点法/直接计算法差异  

4. **复古元素**  
   - 背景：FC红白机风格的网格背景  
   - 音效：  
     - 日期跳转：经典马里奥金币声  
     - 题目完成：塞尔达解谜成功音效  
   - 过关特效：每完成10题显示“LEVEL UP!”像素字体  

> **设计意义**：将抽象的日期计算转化为可视颗粒运动，闰年提示和题目飞入动画直击算法核心逻辑，游戏化进度激励增强学习动力。

---

### 拓展练习与相似问题

**通用技巧迁移**：  
日期处理+贪心策略适用于：  
1. 会议安排（时段选择）  
2. 优惠券有效期管理  
3. 倒计时任务调度  

**洛谷推荐**：  
1. **P1163 日历问题**  
   🗣️ *巩固日期计算基础，含复杂闰年判断*  
2. **P1230 智力大冲浪**  
   🗣️ *贪心+时间窗选择，本题的进阶变形*  
3. **P1518 日期计算器**  
   🗣️ *日期差计算的纯模拟练习，强化细节处理*

---

### 学习心得与经验分享

> **经验摘录**（傅思维666）：  
> *“我在处理月份边界时，发现当起始月>2月时才需闰年修正，这个细节卡了很久”*  
>   
> **Kay点评**：  
> 这反映了日期问题的核心陷阱——**局部状态依赖全局状态**。闰年判断需结合当前年份和月份位置，调试时建议用2000-03-01等边界数据逐步输出中间变量。

---

**本次题解分析结束。记住：日期计算要模块化验证，贪心策略需严格排序！** 🚀

---
处理用时：148.11秒
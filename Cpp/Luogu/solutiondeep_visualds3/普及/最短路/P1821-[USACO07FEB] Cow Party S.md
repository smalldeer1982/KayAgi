# é¢˜ç›®ä¿¡æ¯

# [USACO07FEB] Cow Party S

## é¢˜ç›®æè¿°

å¯’å‡åˆ°äº†ï¼Œ$n$ å¤´ç‰›éƒ½è¦å»å‚åŠ ä¸€åœºåœ¨ç¼–å·ä¸º $x$ çš„ç‰›çš„å†œåœºä¸¾è¡Œçš„æ´¾å¯¹ï¼Œå†œåœºä¹‹é—´æœ‰ $m$ æ¡æœ‰å‘è·¯ï¼Œæ¯æ¡è·¯éƒ½æœ‰ä¸€å®šçš„é•¿åº¦ã€‚

æ¯å¤´ç‰›å‚åŠ å®Œæ´¾å¯¹åéƒ½å¿…é¡»å›å®¶ï¼Œæ— è®ºæ˜¯å»å‚åŠ æ´¾å¯¹è¿˜æ˜¯å›å®¶ï¼Œæ¯å¤´ç‰›éƒ½ä¼šé€‰æ‹©æœ€çŸ­è·¯å¾„ï¼Œæ±‚è¿™ $n$ å¤´ç‰›çš„æœ€çŸ­è·¯å¾„ï¼ˆä¸€ä¸ªæ¥å›ï¼‰ä¸­æœ€é•¿çš„ä¸€æ¡è·¯å¾„é•¿åº¦ã€‚


## è¯´æ˜/æç¤º

### æ ·ä¾‹ 1 è§£é‡Š
![](https://cdn.luogu.com.cn/upload/image_hosting/rl3com2y.png)

### æ•°æ®è§„æ¨¡ä¸çº¦å®š

å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ $1 \leq x \leq n \leq 10^3$ï¼Œ$1 \leq m \leq 10^5$ï¼Œ$1 \leq u,v \leq n$ï¼Œ$1 \leq w \leq 10^2$ï¼Œä¿è¯ä»ä»»ä½•ä¸€ä¸ªç»“ç‚¹å‡ºå‘éƒ½èƒ½åˆ°è¾¾ $x$ å·ç»“ç‚¹ï¼Œä¸”ä» $x$ å‡ºå‘å¯ä»¥åˆ°è¾¾å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 8 2
1 2 4
1 3 2
1 4 7
2 1 1
2 3 5
3 1 2
3 4 4
4 2 3
```

### è¾“å‡º

```
10```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCow Party S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`å›¾è®º/æœ€çŸ­è·¯`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³ç‰›ç¾¤æ´¾å¯¹é—®é¢˜ï¼Œå…³é”®åœ¨äº**å•æºæœ€çŸ­è·¯**ä¸**å•ç»ˆç‚¹æœ€çŸ­è·¯**çš„å·§å¦™ç»“åˆã€‚æƒ³è±¡ç‰§åœºæ˜¯åƒç´ æ¸¸æˆä¸­çš„åœ°å›¾èŠ‚ç‚¹ï¼Œæ¯å¤´ç‰›æ˜¯8-bitæ¸¸æˆè§’è‰²ï¼Œå»æ´¾å¯¹æ˜¯æ­£å‘é—¯å…³ï¼Œå›å®¶æ˜¯é€†å‘é€šå…³ï¼š
> - **æ ¸å¿ƒæ€æƒ³**ï¼šå°†å•ç»ˆç‚¹æœ€çŸ­è·¯ï¼ˆæ‰€æœ‰ç‚¹åˆ°xï¼‰è½¬åŒ–ä¸ºåå‘å›¾çš„å•æºæœ€çŸ­è·¯ï¼ˆxåˆ°æ‰€æœ‰ç‚¹ï¼‰ï¼Œé€šè¿‡ä¸¤æ¬¡æœ€çŸ­è·¯è®¡ç®—é¿å…O(nÂ²)å¤æ‚åº¦
> - **ç®—æ³•æµç¨‹**ï¼š
>   1. **æ­£å‘å›¾**è®¡ç®—xåˆ°å„ç‚¹çš„æœ€çŸ­è·ç¦»ï¼ˆå›å®¶è·¯å¾„ï¼‰
>   2. **åå‘å›¾**è®¡ç®—xåˆ°å„ç‚¹çš„æœ€çŸ­è·ç¦»ï¼ˆå»æ´¾å¯¹è·¯å¾„ï¼‰
>   3. éå†æ‰€æœ‰ç‰›ï¼Œæ±‚ï¼ˆå»+å›ï¼‰è·¯å¾„çš„æœ€å¤§å€¼
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåœ¨åƒç´ ç½‘æ ¼ä¸­ç”¨ä¸åŒé¢œè‰²æ ‡è®°ç‰§åœºèŠ‚ç‚¹ï¼Œç®—æ³•æ‰§è¡Œæ—¶ï¼š
>   - é«˜äº®å½“å‰å¤„ç†çš„èŠ‚ç‚¹ï¼ˆé—ªçƒæ•ˆæœï¼‰
>   - ç”¨ç®­å¤´åŠ¨ç”»å±•ç¤ºè·¯å¾„æ‰©å±•æ–¹å‘
>   - è·¯å¾„æ›´æ–°æ—¶è§¦å‘8-bitéŸ³æ•ˆï¼ˆå¦‚"å®"å£°ï¼‰
> - **å¤å¤æ¸¸æˆåŒ–**ï¼šå°†æœ€çŸ­è·¯æœç´¢è®¾è®¡ä¸º"åŒå‘å‰è¿›"å°æ¸¸æˆï¼Œå®Œæˆä¸¤æ¬¡æœç´¢è§£é”"å¥¶ç‰›é€šè¡Œè¯"æˆå°±

---

#### ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆMy_666ï¼Œèµ54ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯æ¸…æ™°è¿ç”¨åå‘å»ºå›¾æŠ€å·§ï¼Œå°†å•ç»ˆç‚¹é—®é¢˜è½¬åŒ–ä¸ºå•æºé—®é¢˜ã€‚ä»£ç è§„èŒƒï¼š  
  - å˜é‡å`dis[]`ã€`ans[]`å«ä¹‰æ˜ç¡®ï¼Œç»“æ„å·¥æ•´  
  - ä½¿ç”¨å †ä¼˜åŒ–Dijkstraä¿è¯O(m log n)å¤æ‚åº¦  
  - å®è·µä»·å€¼é«˜ï¼šè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆ`memset`åˆå§‹åŒ–ï¼‰ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›  
  **äº®ç‚¹**ï¼šå¼ºè°ƒé¿å…SPFAçš„ç¨³å®šæ€§é£é™©ï¼ŒåŸ¹å…»ç®—æ³•é€‰æ‹©æ„è¯†

**é¢˜è§£äºŒï¼ˆAnakinï¼Œèµ0ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  åˆ›æ–°æ€§å°è£…å›¾ç»“æ„ä½“å‡å°‘é‡å¤ä»£ç ï¼š  
  - ç”¨`G1`ã€`G2`åŒºåˆ†æ­£/åå‘å›¾ï¼Œé€»è¾‘éš”ç¦»æ¸…æ™°  
  - å•æ¬¡Dijkstraå‡½æ•°å¤ç”¨ï¼Œé™ä½å‡ºé”™æ¦‚ç‡  
  - é“¾å¼å‰å‘æ˜Ÿå­˜å›¾èŠ‚çœç©ºé—´  
  **äº®ç‚¹**ï¼šé¢å‘å¯¹è±¡æ€ç»´æå‡ä»£ç å¯ç»´æŠ¤æ€§ï¼Œé€‚åˆå¤§å‹é¡¹ç›®

**é¢˜è§£ä¸‰ï¼ˆKingä¸¨å¸å¾¡å¨ï¼Œèµ15ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  å®Œæ•´å±•ç¤ºå †ä¼˜åŒ–Dijkstraå®ç°ç»†èŠ‚ï¼š  
  - `priority_queue`é‡è½½è¿ç®—ç¬¦å®ç°å°æ ¹å †  
  - ä¸¥æ ¼éªŒè¯èŠ‚ç‚¹æ˜¯å¦é‡å¤è®¿é—®ï¼ˆ`if(vis[u]) continue`ï¼‰  
  - å¤æ‚åº¦ä¼˜åŒ–åˆ°ä½ï¼ˆæ— éœ€æ¾å¼›åˆ¤æ–­ç›´æ¥å…¥å †ï¼‰  
  **äº®ç‚¹**ï¼šæä¾›æ¨¡æ¿é¢˜é“¾æ¥è¾…åŠ©åŸºç¡€å­¦ä¹ 

---

#### æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šå•ç»ˆç‚¹æœ€çŸ­è·¯çš„è½¬åŒ–**  
   *åˆ†æ*ï¼šåŸå›¾æ±‚å„ç‚¹åˆ°xçš„è·ç¦»ç­‰ä»·äºåå‘å›¾æ±‚xåˆ°å„ç‚¹è·ç¦»ã€‚ä¼˜è´¨è§£æ³•é€šè¿‡å­˜å‚¨åå‘è¾¹ï¼ˆå¦‚`addEdge(v,u,w)`ï¼‰ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºæ ‡å‡†å•æºæœ€çŸ­è·¯  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåå‘å»ºå›¾æ˜¯å•ç»ˆç‚¹é—®é¢˜çš„é€šç”¨è½¬åŒ–æŠ€å·§

2. **éš¾ç‚¹ï¼šé«˜æ•ˆå®ç°åŒå›¾æœ€çŸ­è·¯**  
   *åˆ†æ*ï¼šéœ€é¿å…ä»£ç é‡å¤ã€‚è§£æ³•äºŒé€šè¿‡ç»“æ„ä½“å°è£…å›¾å¯¹è±¡ï¼ˆå«`addedge`ã€`dijkstra`æ–¹æ³•ï¼‰ï¼Œä½¿æ­£/åå‘å›¾è°ƒç”¨åŒä¸€å¥—é€»è¾‘  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå°è£…å¯å¤ç”¨ç»„ä»¶æ˜¯å·¥ç¨‹åŒ–ç¼–ç çš„æ ¸å¿ƒèƒ½åŠ›

3. **éš¾ç‚¹ï¼šç¨€ç–å›¾ç®—æ³•é€‰æ‹©**  
   *åˆ†æ*ï¼šm=10âµæ—¶SPFAæœ€åO(nm)å¯èƒ½è¶…æ—¶ã€‚è§£æ³•ä¸€/ä¸‰åšæŒå †ä¼˜åŒ–Dijkstraï¼Œä¿è¯O(m log n)ç¨³å®šé€šè¿‡  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç«èµ›ä¸­ä¼˜å…ˆé€‰æ‹©ç¨³å®šæ€§ç®—æ³•ï¼ˆå°¤å…¶è¾¹æ•°>10â´ï¼‰

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **é—®é¢˜è½¬åŒ–**ï¼šå°†å¤æ‚çº¦æŸï¼ˆå¾€è¿”è·¯å¾„ï¼‰æ‹†è§£ä¸ºç‹¬ç«‹å­é—®é¢˜  
- **åå‘å»ºå›¾**ï¼šå•ç»ˆç‚¹â†’å•æºçš„æ ‡å‡†è½¬åŒ–æŠ€å·§  
- **ç»“æ„å°è£…**ï¼šç›¸ä¼¼é€»è¾‘æŠ½è±¡ä¸ºå¯å¤ç”¨ç»„ä»¶ï¼ˆå¦‚å›¾å¯¹è±¡ï¼‰  
- **ç®—æ³•é€‰æ‹©**ï¼šç¨€ç–å›¾ä¼˜å…ˆå †ä¼˜åŒ–Dijkstraè€ŒéSPFA  

---

#### C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**  
```cpp
#include <cstring>
#include <queue>
using namespace std;
typedef pair<int, int> pii;

const int N = 1005, M = 100005;
struct Graph {
    int h[N], cnt = 0;
    struct Edge { int to, w, next; } e[M];
    void add(int u, int v, int w) {
        e[++cnt] = {v, w, h[u]}; h[u] = cnt;
    }
    
    int dis[N];
    void dijkstra(int s) {
        priority_queue<pii, vector<pii>, greater<pii>> pq;
        memset(dis, 0x3f, sizeof dis);
        pq.push({0, s}); dis[s] = 0;
        while (!pq.empty()) {
            auto [d, u] = pq.top(); pq.pop();
            if (d != dis[u]) continue;
            for (int i = h[u]; i; i = e[i].next) {
                int v = e[i].to;
                if (dis[v] > d + e[i].w) {
                    dis[v] = d + e[i].w;
                    pq.push({dis[v], v});
                }
            }
        }
    }
} G1, G2;  // æ­£å‘å›¾ä¸åå‘å›¾

int main() {
    int n, m, x; scanf("%d%d%d", &n, &m, &x);
    while (m--) {
        int u, v, w; scanf("%d%d%d", &u, &v, &w);
        G1.add(u, v, w);  // åŸå›¾
        G2.add(v, u, w);  // åå‘å›¾
    }
    G1.dijkstra(x);  // è®¡ç®—å›å®¶è·¯å¾„ï¼ˆx->å„ç‚¹ï¼‰
    G2.dijkstra(x);  // è®¡ç®—å»æ´¾å¯¹è·¯å¾„ï¼ˆå„ç‚¹->xï¼‰
    
    int ans = 0;
    for (int i = 1; i <= n; i++)
        ans = max(ans, G1.dis[i] + G2.dis[i]);
    printf("%d", ans);
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **Graphç»“æ„ä½“**å°è£…å›¾æ“ä½œï¼ˆåŠ è¾¹ã€Dijkstraï¼‰
2. **æ­£/åå‘å›¾åˆ†ç¦»**ï¼š`G1`å­˜åŸå›¾è¾¹ï¼Œ`G2`å­˜åå‘è¾¹
3. **å †ä¼˜åŒ–Dijkstra**ï¼šä½¿ç”¨`priority_queue`å®ç°O(m log n)
4. **ç»“æœåˆå¹¶**ï¼šéå†æ‰€æœ‰ç‰›æ±‚ï¼ˆå»+å›ï¼‰è·¯å¾„æœ€å¤§å€¼

---

#### ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š*8-bitç‰§åœºå¤§å†’é™©*  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šDijkstraç®—æ³•åœ¨æ­£/åå‘å›¾çš„æ‰§è¡Œè¿‡ç¨‹  

| æ­¥éª¤               | å¯è§†åŒ–æ•ˆæœ                                                                 | äº¤äº’è®¾è®¡                     |
|--------------------|--------------------------------------------------------------------------|------------------------------|
| **åˆå§‹åŒ–**         | ç‰§åœºèŠ‚ç‚¹å‘ˆç½‘æ ¼æ’åˆ—ï¼Œèµ·ç‚¹xä¸ºé—ªçƒæ˜Ÿæ˜Ÿâ­                                      | æŒ‰ç©ºæ ¼é”®å¼€å§‹æ¼”ç¤º             |
| **é˜Ÿåˆ—æ‰©å±•**       | å½“å‰å¤„ç†çš„èŠ‚ç‚¹æ˜¾ç¤ºä¸ºæ—‹è½¬ç®­å¤´â†’ï¼Œå‡ºé˜Ÿæ—¶è§¦å‘"å’”åš“"éŸ³æ•ˆ                          | è¿›åº¦æ¡æ˜¾ç¤ºé˜Ÿåˆ—å¤„ç†è¿›åº¦       |
| **æ¾å¼›æ“ä½œ**       | è¢«æ›´æ–°çš„èŠ‚ç‚¹å˜é»„ğŸ’›ï¼Œè·¯å¾„çº¿åŠ¨æ€ç»˜åˆ¶ï¼Œä¼´éš"å®"å£°                              | é¼ æ ‡æ‚¬åœæŸ¥çœ‹èŠ‚ç‚¹è·ç¦»å€¼       |
| **åå‘å›¾åˆ‡æ¢**     | ç”»é¢æ°´å¹³ç¿»è½¬ï¼Œæ‰€æœ‰ç®­å¤´åå‘â†ï¼Œæ˜¾ç¤º"REVERSE MODE"åƒç´ å­—ä½“                    | æŒ‰Ré”®æ‰‹åŠ¨åˆ‡æ¢æ­£/åå‘å›¾      |
| **ç»“æœå±•ç¤º**       | æœ€å¤§è·¯å¾„ç”¨çº¢è‰²é—ªå…‰è·¯å¾„ğŸ‡è¿æ¥ï¼Œç»ˆç‚¹æ˜¾ç¤ºMAXå€¼                                | ç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†è·¯å¾„        |

**æŠ€æœ¯å®ç°**ï¼š  
```javascript
// å…³é”®å¸§ä¼ªä»£ç 
function drawFrame() {
  drawPixelMap(); // 8-bité£æ ¼ç‰§åœº
  if (currentNode) {
    highlightNode(currentNode, COLOR_CYAN); // å½“å‰èŠ‚ç‚¹é’è‰²é«˜äº®
    playSound("select"); // é€‰æ‹©éŸ³æ•ˆ
  }
  for (let edge of activeEdges) {
    drawArrow(edge, isReverseMode ? REVERSE : FORWARD); // ç»˜åˆ¶æ–¹å‘ç®­å¤´
    if (edge.relaxed) {
      highlightNode(edge.to, COLOR_GOLD); // æ¾å¼›æˆåŠŸèŠ‚ç‚¹é‡‘è‰²é—ªçƒ
      playSound("ding"); 
    }
  }
}
```

---

#### æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **P4779** - å•æºæœ€çŸ­è·¯æ ‡å‡†æ¨¡æ¿  
   â†’ *å·©å›ºDijkstraåŸºç¡€å®ç°*  
2. **P2136** - å¸¦è´Ÿæƒçš„æœ€çŸ­è·¯  
   â†’ *å­¦ä¹ SPFAä¸åˆ¤ç¯æŠ€å·§*  
3. **P2837** - åŒå‘BFSæ€æƒ³è¿ç§»  
   â†’ *ä½“ä¼šæ­£åå‘æœç´¢çš„ååŒä¼˜åŒ–*

---

#### å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **æ¥è‡ªMy_666çš„ç»éªŒ**ï¼š  
> *"å¹³æ—¶ç»ƒä¹ é¿å…SPFAï¼Œç«èµ›å¯èƒ½è¢«ç‰¹æ®Šæ•°æ®å¡è¶…æ—¶"*  
> **Kayç‚¹è¯„**ï¼šè¿™æ˜¯å®è´µçš„ç¨³å®šæ€§æ„è¯†ã€‚ç±»ä¼¼åœ°ï¼Œåœ¨è¾¹ç•Œå¤„ç†æ—¶ï¼š  
> - æ•°ç»„åˆå§‹åŒ–ç”¨`memset(dis, 0x3f, sizeof dis)`æ¯”å¾ªç¯æ›´é«˜æ•ˆ  
> - ä¼˜å…ˆé˜Ÿåˆ—ä¸­å­˜å‚¨`(dis[v], v)`è€Œé`(-dis[v], v)`é¿å…æ’åºæ··æ·†

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡æœ€çŸ­è·¯é—®é¢˜çš„æ ¸å¿ƒè§£é¢˜æ¡†æ¶ã€‚è®°ä½ï¼š**å¥½ç®—æ³•æ˜¯ç»ƒå‡ºæ¥çš„ï¼Œä¸æ˜¯çœ‹å‡ºæ¥çš„**ï¼ä¸‹æ¬¡æˆ‘ä»¬å°†æŒ‘æˆ˜å¸¦è´Ÿæƒçš„æœ€çŸ­è·¯é—®é¢˜ï¼Œç»§ç»­åŠ æ²¹ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š124.12ç§’
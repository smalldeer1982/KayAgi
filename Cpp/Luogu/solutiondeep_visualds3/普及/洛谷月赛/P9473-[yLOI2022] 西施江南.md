# é¢˜ç›®ä¿¡æ¯

# [yLOI2022] è¥¿æ–½æ±Ÿå—

## é¢˜ç›®èƒŒæ™¯

> æˆ‘æ™¤æ±Ÿå—é¢ å¦‚é€¢è¥¿æ–½é¢œ  
> æ¸…èŠ¬å®œé€å²¸ è¡èæ–°é›¨å‰  
> çš“è…•åˆ†ç å¸˜ ç éœ²æ‰¬æ³¢ç ç‰æ•›  
> å¤©ç„¶ä¸€æ®µèšæ•£ å«£ç„¶æ›¾ä¸è¨€  
> å¹³èŠœè¾™å°šæµ… æ— éŸµåŒ–æ¹–ç”°  
> æ—å›­è™½å·¥å…¸ èŠ³å§¿ä¸å¯åµŒ  
> ä½•äººå† è¯—ç¯‡ é‡è¡—æ³æ³é‡é—¨æ©  
> ä¼¼æœ‰æŸ”è‘é®ç›® ç©ºè°·è¶³å°–

é“¶ä¸´ã€Šè¥¿æ–½æ±Ÿå—ã€‹

## é¢˜ç›®æè¿°

ç»™å®š $n$ ä¸ªæ­£æ•´æ•° $a_1, a_2, a_3, \dots a_n$ï¼Œè®° $g$ æ˜¯è¿™äº›æ•°çš„**æœ€å¤§å…¬çº¦æ•°**ï¼Œ$l$ æ˜¯è¿™äº›æ•°çš„**æœ€å°å…¬å€æ•°**ã€‚è¯·ä½ åˆ¤æ–­ $l \times g$ æ˜¯å¦ç­‰äº $a_1 \times a_2 \times \dots \times a_n$ã€‚

## è¯´æ˜/æç¤º

### æ•°æ®è§„æ¨¡ä¸çº¦å®š

ä»¥ä¸‹ç”¨ $N$ è¡¨ç¤ºå•ä¸ªæµ‹è¯•ç‚¹å†… $n$ çš„å’Œï¼Œå³ $N = \sum n$ã€‚

- å¯¹ $12\%$ çš„æ•°æ®ï¼Œä¿è¯ $n = 2$ã€‚
- å¯¹ $36\%$ çš„æ•°æ®ï¼Œä¿è¯ $n \leq 5$ã€‚
- å¯¹ $52\%$ çš„æ•°æ®ï¼Œä¿è¯ $N \leq 1000$ã€‚
- å¯¹ $76\%$ çš„æ•°æ®ï¼Œä¿è¯ $N,a_i \leq 10^5$ã€‚
- å¯¹ $100\%$ çš„æ•°æ®ï¼Œä¿è¯ $2 \leq n,N \leq 5 \times 10^5$ï¼Œ$2 \leq a_i \leq 10^8$ï¼Œ$1 \leq T \leq 20$ã€‚

### æç¤º

**æ•°æ®åƒä¸‡æ¡ï¼Œæ¸…ç©ºç¬¬ä¸€æ¡**ã€‚  
**å¤šæµ‹ä¸æ¸…ç©ºï¼Œçˆ†é›¶ä¸¤è¡Œæ³ª**ã€‚  
**æ¸…ç©ºä¸è§„èŒƒï¼Œè¶…æ—¶æ€»ç›¸ä¼´**ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
2
2 3
3
2 3 4
3
3 8 35```

### è¾“å‡º

```
Yes
No
Yes```

## æ ·ä¾‹ #2

### è¾“å…¥

```
è§é™„åŠ æ–‡ä»¶ä¸­çš„ C2.in```

### è¾“å‡º

```
è§é™„åŠ æ–‡ä»¶ä¸­çš„ C2.ans```

# AIåˆ†æç»“æœ


### é¢˜ç›®åˆ†æ
é¢˜ç›®è¦æ±‚åˆ¤æ–­ç»™å®šæ­£æ•´æ•°åºåˆ—çš„æœ€å¤§å…¬çº¦æ•°(g)å’Œæœ€å°å…¬å€æ•°(l)çš„ä¹˜ç§¯æ˜¯å¦ç­‰äºåºåˆ—æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ã€‚æ ¸å¿ƒç»“è®ºå¦‚ä¸‹ï¼š
- å½“n=2æ—¶ï¼Œæ’æœ‰gÃ—l = aâ‚Ã—aâ‚‚ï¼ˆç›´æ¥è¾“å‡º"Yes"ï¼‰
- å½“n>2æ—¶ï¼Œä»…å½“æ‰€æœ‰æ•°ä¸¤ä¸¤äº’è´¨æ—¶æˆç«‹ï¼ˆéœ€æ£€æŸ¥ä»»æ„ä¸¤æ•°æ— å…¬å…±è´¨å› å­ï¼‰

### æ ¸å¿ƒç®—æ³•è¯†åˆ«
**ç®—æ³•åˆ†ç±»**ï¼šæ•°è®ºï¼ˆè´¨å› æ•°åˆ†è§£ä¸äº’è´¨åˆ¤æ–­ï¼‰  
**æ¯”å–»è§£é‡Š**ï¼šæƒ³è±¡æ¯ä¸ªæ•°å­—æ˜¯ç‹¬ç‰¹çš„ä¹é«˜ç§¯æœ¨ï¼Œè´¨å› æ•°æ˜¯ç§¯æœ¨ä¸Šçš„å‡¸ç‚¹ã€‚ä¸¤ä¸¤äº’è´¨è¦æ±‚ä»»æ„ä¸¤å—ç§¯æœ¨çš„å‡¸ç‚¹å®Œå…¨ä¸åŒï¼Œæ— æ³•æ‹¼æ¥ï¼ˆæ— å…¬å…±è´¨å› å­ï¼‰ã€‚æœ¬é¢˜å°±æ˜¯æ£€æŸ¥æ‰€æœ‰ç§¯æœ¨çš„å‡¸ç‚¹æ˜¯å¦å®Œå…¨ç‹¬ç‰¹ã€‚

**æ ¸å¿ƒéš¾ç‚¹**ï¼š
1. é«˜æ•ˆè´¨å› æ•°åˆ†è§£ï¼ˆé¿å…O(nÂ²)æš´åŠ›ï¼‰
2. å¤§èŒƒå›´è´¨å› æ•°åˆ¤é‡ï¼ˆa_i â‰¤ 10â¸ï¼‰
3. å¤šç»„æ•°æ®å¤„ç†çš„ä¼˜åŒ–

**è§£å†³æ–¹æ¡ˆ**ï¼š  
é¢„å¤„ç†10000ä»¥å†…è´¨æ•°è¡¨ï¼ˆå…±1229ä¸ªï¼‰ï¼Œåˆ†è§£æ—¶ï¼š
1. å…ˆç”¨è´¨æ•°è¡¨å¤„ç†â‰¤10â´çš„è´¨å› å­
2. å‰©ä½™éƒ¨åˆ†å¿…ä¸ºå•ä¸ªè´¨æ•°ï¼ˆ>10â´ï¼‰
3. ç”¨å“ˆå¸Œè¡¨å®æ—¶åˆ¤é‡ï¼Œå‘ç°é‡å¤ç«‹å³ç»ˆæ­¢

### ç²¾é€‰ä¼˜è´¨é¢˜è§£
**é¢˜è§£ä¸€ï¼ˆcff_0102ï¼‰**  
**äº®ç‚¹**ï¼š  
- ä¸¥è°¨æ•°å­¦è¯æ˜ï¼ˆn>2æ—¶éœ€ä¸¤ä¸¤äº’è´¨ï¼‰
- çº¿æ€§ç­›é¢„å¤„ç†æœ€å°è´¨å› å­ï¼ˆO(1)åˆ†è§£ï¼‰
- è¾¹ç•Œå¤„ç†å®Œå–„ï¼ˆç›¸åŒæ•°ç‰¹åˆ¤ï¼‰

**ä»£ç è§„èŒƒæ€§**ï¼š  
- å˜é‡åæ¸…æ™°ï¼ˆlpriå­˜æœ€å°è´¨å› å­ï¼‰
- æ¨¡å—åŒ–ç­›æ³•å‡½æ•°
- æ³¨é‡Šæ˜ç¡®å…³é”®é€»è¾‘

**é¢˜è§£äºŒï¼ˆä¿¡æ¯å‘é˜³èŠ±æœ¨ï¼‰**  
**äº®ç‚¹**ï¼š  
- æ¡¶è®¡æ•°æ³•æ›¿ä»£æš´åŠ›æšä¸¾
- è´¨å› å­åˆ†è§£ä¼˜åŒ–ï¼ˆä»…æšä¸¾è´¨æ•°ï¼‰
- é¢å‘åˆå­¦è€…çš„è¯¦ç»†æ³¨é‡Š

**å¯æ”¹è¿›ç‚¹**ï¼š  
- æœªå¤„ç†ç›¸åŒæ•°çš„ç‰¹æ®Šæƒ…å†µ
- æ¡¶æ•°ç»„èŒƒå›´è¿‡å¤§ï¼ˆéœ€ä¼˜åŒ–å†…å­˜ï¼‰

**é¢˜è§£ä¸‰ï¼ˆä¸€æ‰¶è‹ä¸€ï¼‰**  
**äº®ç‚¹**ï¼š  
- å”¯ä¸€åˆ†è§£å®šç†ä¸¥è°¨æ¨å¯¼
- å­ä»»åŠ¡åˆ†æ¡£ä¼˜åŒ–æ€è·¯
- çº¿æ€§ç­›+æœ€å°è´¨å› å­å¿«é€Ÿåˆ†è§£

**å®è·µä»·å€¼**ï¼š  
- æä¾›æ¸è¿›å¼ä¼˜åŒ–è·¯å¾„
- å¤æ‚åº¦åˆ†ææ¸…æ™°ï¼ˆO(Tn log a_i)ï¼‰

### æ ¸å¿ƒéš¾ç‚¹ä¸è§£é¢˜ç­–ç•¥
1. **è´¨å› æ•°åˆ¤é‡**  
   - **åˆ†æ**ï¼šå¿…é¡»ä¿è¯æ¯ä¸ªè´¨å› å­ä»…å‡ºç°åœ¨ä¸€ä¸ªæ•°ä¸­
   - **è§£å†³**ï¼šç”¨`unordered_set`å®æ—¶è®°å½•è´¨å› å­ï¼Œåˆ†è§£æ—¶ç«‹å³æŸ¥é‡

2. **å¤§æ•°åˆ†è§£æ•ˆç‡**  
   - **åˆ†æ**ï¼šæœ´ç´ åˆ†è§£O(âˆša_i)åœ¨10â¸è¿‡å¤§
   - **è§£å†³**ï¼šé¢„å¤„ç†10000ä»¥å†…è´¨æ•°è¡¨ï¼Œå°†å†…å±‚å¾ªç¯é™è‡³1229æ¬¡

3. **ç›¸åŒæ•°å¤„ç†**  
   - **åˆ†æ**ï¼šç›¸åŒæ•°å¿…ç„¶ä¸äº’è´¨ï¼ˆå¦‚[4,4]ï¼‰
   - **è§£å†³**ï¼šè´¨å› æ•°åˆ†è§£è‡ªåŠ¨åŒ…å«ç›¸åŒæ•°æ£€æµ‹

**å­¦ä¹ ç¬”è®°**ï¼š  
> ğŸ’¡ äº’è´¨åˆ¤æ–­æœ¬è´¨æ˜¯è´¨å› å­é›†åˆçš„äº¤é›†ä¸ºç©º  
> ğŸ’¡ çº¿æ€§ç­›é¢„å¤„ç†æœ€å°è´¨å› å­å¯å°†åˆ†è§£å¤æ‚åº¦é™è‡³O(log a_i)

**è§£é¢˜æŠ€å·§æ€»ç»“**ï¼š
- **é—®é¢˜åˆ†è§£**ï¼šå°†å…¨å±€äº’è´¨åˆ¤æ–­è½¬åŒ–ä¸ºè´¨å› å­åˆ†å¸ƒé—®é¢˜
- **æ¡¶åˆ†å¤ç”¨**ï¼šç”¨å“ˆå¸Œè¡¨é¿å…O(nÂ²)ä¸¤ä¸¤æ¯”è¾ƒ
- **è¾¹ç•Œé¢„åˆ¤**ï¼šn=2ç›´æ¥è¿”å›ï¼Œé¿å…æ— æ•ˆè®¡ç®—

### C++æ ¸å¿ƒä»£ç å®ç°
**é€šç”¨æ ¸å¿ƒå®ç°**ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰ï¼š
```cpp
#include <iostream>
#include <vector>
#include <unordered_set>
#include <cmath>
using namespace std;

const int MAXP = 10000;
vector<int> primes;

void precompute_primes() {
    vector<bool> isPrime(MAXP + 1, true);
    isPrime[0] = isPrime[1] = false;
    for (int i = 2; i <= MAXP; ++i) {
        if (isPrime[i]) {
            primes.push_back(i);
            for (int j = i * i; j <= MAXP; j += i)
                isPrime[j] = false;
        }
    }
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);
    precompute_primes(); // é¢„è®¡ç®—è´¨æ•°è¡¨
    
    int T;
    cin >> T;
    while (T--) {
        int n;
        cin >> n;
        vector<int> a(n);
        for (int i = 0; i < n; ++i)
            cin >> a[i];
        
        // n=2ç›´æ¥è¿”å›
        if (n == 2) {
            cout << "Yes\n";
            continue;
        }
        
        unordered_set<int> used;
        bool valid = true;
        
        for (int x : a) {
            int temp = x;
            // åˆ†è§£â‰¤10000çš„è´¨å› å­
            for (int p : primes) {
                if (p * p > temp) break; // æå‰ç»ˆæ­¢
                if (temp % p == 0) {
                    if (used.count(p)) {
                        valid = false;
                        break;
                    }
                    used.insert(p);
                    while (temp % p == 0)
                        temp /= p;
                }
            }
            // å¤„ç†å‰©ä½™è´¨å› å­
            if (temp > 1) {
                if (used.count(temp)) 
                    valid = false;
                else 
                    used.insert(temp);
            }
            if (!valid) break;
        }
        cout << (valid ? "Yes" : "No") << '\n';
    }
    return 0;
}
```

**ä»£ç è§£è¯»**ï¼š
1. **é¢„è®¡ç®—è´¨æ•°è¡¨**ï¼ˆ`precompute_primes`ï¼‰
   - åŸƒæ°ç­›ç”Ÿæˆ10000å†…è´¨æ•°ï¼ˆ1229ä¸ªï¼‰
   - å…¨å±€åªè®¡ç®—ä¸€æ¬¡ï¼Œé¿å…é‡å¤å¼€é”€

2. **è´¨å› æ•°åˆ†è§£æ ¸å¿ƒé€»è¾‘**
   - å¤–å±‚ï¼šéå†æ¯ä¸ªæ•° `for (int x : a)`
   - ä¸­å±‚ï¼šéå†è´¨æ•°è¡¨ `for (int p : primes)`
   - å†…å±‚ï¼šé™¤å°½è´¨å› å­ `while (temp % p == 0)`
   - **ä¼˜åŒ–ç‚¹**ï¼š`p*p > temp` æå‰ç»ˆæ­¢

3. **äº’è´¨åˆ¤æ–­**
   - `unordered_set` å®æ—¶è®°å½•è´¨å› å­
   - å‘ç°é‡å¤ç«‹å³ç½® `valid = false`
   - **å…³é”®è¡Œ**ï¼š`used.count(p)` æ£€æµ‹è´¨å› å­å†²çª

### ç®—æ³•å¯è§†åŒ–
**åƒç´ åŠ¨ç”»è®¾è®¡**ï¼ˆ8-bité£æ ¼æ¼”ç¤ºè´¨å› æ•°åˆ†è§£ï¼‰ï¼š
```plaintext
1. åœºæ™¯è®¾è®¡ï¼š
   - 8-bitç½‘æ ¼ï¼šæ•°å­—æ˜¾ç¤ºä¸ºåƒç´ æ–¹å—ï¼ˆå¦‚ï¼š48â†’â–ˆï¼‰
   - è´¨æ•°è¡¨ï¼šåº•éƒ¨æ»šåŠ¨æ˜¾ç¤ºï¼ˆçº¢ï¼šå½“å‰æ£€æµ‹è´¨æ•°ï¼‰
   - åˆ†è§£åŠ¨ç”»ï¼šæ•°å­—è¢«"æ‰“ç¢"æˆè´¨å› æ•°æ–¹å—

2. å…³é”®å¸§æµç¨‹ï¼š
   [åˆå§‹åŒ–] è¾“å…¥: 48 27 35
   Step1: æ£€æµ‹48
      â–ˆâ–ˆ 48 â†’ è¢«è´¨æ•°2ï¼ˆçº¢è‰²ï¼‰å‡»ä¸­
      â–“â–“ 24 â†’ å†æ¬¡è¢«2å‡»ä¸­ â†’ â–“â–“ 12 â†’ â–“â–“ 6 â†’ â–“â–“ 3
      è´¨æ•°è¡¨è®°å½•ï¼š2(é—ªçƒ)

   Step2: æ£€æµ‹27
      â–ˆâ–ˆ 27 â†’ è¢«è´¨æ•°3(çº¢è‰²)å‡»ä¸­
      â–’â–’ 9 â†’ è¢«3å‡»ä¸­ â†’ â–’â–’ 3
      è´¨æ•°è¡¨è®°å½•ï¼š2,3(3é—ªçƒ)

   Step3: æ£€æµ‹35
      â–ˆâ–ˆ 35 â†’ è¢«è´¨æ•°5(çº¢è‰²)å‡»ä¸­ â†’ â–‘â–‘ 7
      è´¨æ•°è¡¨è®°å½•ï¼š2,3,5,7 â†’ æ— å†²çª

3. äº¤äº’æ§åˆ¶ï¼š
   - æ­¥è¿›æŒ‰é’®ï¼šå•æ­¥åˆ†è§£
   - é€Ÿåº¦æ»‘å—ï¼šè°ƒæ•´åˆ†è§£é€Ÿåº¦
   - å†²çªç‰¹æ•ˆï¼šå‘ç°é‡å¤è´¨æ•°æ—¶å±å¹•çº¢å…‰é—ªçƒ+è­¦æŠ¥éŸ³

4. æ¸¸æˆåŒ–å…ƒç´ ï¼š
   - æˆåŠŸéŸ³æ•ˆï¼šæ¯æ­¥åˆ†è§£"å®"å£°
   - é€šå…³ç‰¹æ•ˆï¼šå…¨éƒ¨åˆ†è§£ååƒç´ çƒŸèŠ±
   - å¤±è´¥åŠ¨ç”»ï¼šå†²çªæ—¶æ˜¾ç¤º"X"ç¬¦å·
```

### æ‹“å±•ç»ƒä¹ 
**ç›¸ä¼¼é—®é¢˜è¿ç§»**ï¼š
1. **è´¨å› æ•°åˆ†å¸ƒé—®é¢˜**  
   CF1771C Hossam and Traineesï¼ˆåˆ¤æ–­å­˜åœ¨å…¬å…±è´¨å› å­çš„æ•°å¯¹ï¼‰
2. **äº’è´¨é›†åˆæ„é€ **  
   P2568 GCDï¼ˆç»Ÿè®¡äº’è´¨æ•°å¯¹æ•°é‡ï¼‰
3. **è´¨å› æ•°åˆ†è§£å˜ç§**  
   B3715 åˆ†è§£è´¨å› å­2ï¼ˆå¤§æ•°æ®åˆ†è§£ä¼˜åŒ–ï¼‰

**æ´›è°·æ¨èé¢˜ç›®**ï¼š
1. **P3383 ã€æ¨¡æ¿ã€‘çº¿æ€§ç­›ç´ æ•°**  
   â†’ æŒæ¡é«˜æ•ˆè´¨æ•°ç”Ÿæˆ
2. **P1069 ç»†èƒåˆ†è£‚**  
   â†’ ç»ƒä¹ è´¨å› æ•°åˆ†è§£åœ¨åˆ†æ²»é—®é¢˜ä¸­çš„åº”ç”¨
3. **P1072 Hanksonçš„è¶£å‘³é¢˜**  
   â†’ ç»¼åˆgcd/lcmä¸è´¨å› æ•°åˆ†è§£çš„ç»å…¸é¢˜

### å­¦ä¹ å¿ƒå¾—
**ç»éªŒæ‘˜å½•**ï¼ˆæ¥è‡ªcff_0102ï¼‰ï¼š
> "æ¯”èµ›æ—¶å¡åœ¨è´¨å› æ•°åˆ†è§£æ•ˆç‡ï¼Œåæ”¹ç”¨çº¿æ€§ç­›é¢„å¤„ç†æœ€å°è´¨å› å­ï¼Œæ•ˆç‡æå‡10å€ã€‚è°ƒè¯•å…³é”®ï¼šæ‰“å°ä¸­é—´å˜é‡éªŒè¯è´¨å› å­è¦†ç›–"

**Kayçš„æ€»ç»“**ï¼š
> è´¨å› æ•°åˆ†è§£æ˜¯æ•°è®ºé—®é¢˜çš„æ ¸å¿ƒæ­¦å™¨ï¼Œæ³¨æ„ï¼š
> 1. é¢„å¤„ç†è´¨æ•°è¡¨å¤§å¹…æå‡æ•ˆç‡
> 2. å“ˆå¸Œåˆ¤é‡æ›¿ä»£æš´åŠ›æ¯”è¾ƒ
> 3. æ³¨æ„ç‰¹åˆ¤n=2å’Œç›¸åŒæ•°æƒ…å†µ
> è°ƒè¯•æ—¶å¯ç”¨å°æ•°æ®é›†éªŒè¯è´¨å› å­åˆ†å¸ƒ

--- 
**æœ¬æ¬¡è§£æå¯¹ä½ ç†è§£ç®—æ³•æœ¬è´¨æ˜¯å¦æœ‰å¸®åŠ©ï¼Ÿæ¬¢è¿åˆ†äº«ä½ çš„æ€è€ƒï¼** ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š228.82ç§’
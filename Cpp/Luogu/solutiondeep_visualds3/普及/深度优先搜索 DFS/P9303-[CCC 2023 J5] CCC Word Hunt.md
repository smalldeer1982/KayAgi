# é¢˜ç›®ä¿¡æ¯

# [CCC 2023 J5] CCC Word Hunt

## é¢˜ç›®æè¿°

åœ¨ CCC å•è¯æœç´¢æ¸¸æˆä¸­ï¼Œå•è¯éšè—åœ¨ä¸€ä¸ªå­—æ¯ç½‘æ ¼ä¸­ã€‚éšè—å•è¯çš„å­—æ¯æ€»æ˜¯ä»¥é¡ºåºå‡ºç°åœ¨æ°´å¹³ã€å‚ç›´æˆ–å¯¹è§’çº¿æ®µä¸Šï¼Œæœ‰ä¸¤ç§æ–¹å¼ã€‚ä¸€ç§æ–¹å¼æ˜¯å•è¯çš„å­—æ¯å‡ºç°åœ¨ä¸€æ¡çº¿æ®µä¸Šã€‚å¦ä¸€ç§æ–¹å¼æ˜¯å•è¯çš„å­—æ¯å‡ºç°åœ¨ä¸€æ¡çº¿æ®µä¸Šç›´åˆ°æŸä¸ªå­—æ¯ï¼Œç„¶ååœ¨è¯¥å­—æ¯å¤„å½¢æˆç›´è§’çš„ç¬¬äºŒæ¡çº¿æ®µä¸Šã€‚ç»™å®šä¸€ä¸ªå­—æ¯ç½‘æ ¼å’Œä¸€ä¸ªè¦æœç´¢çš„å•è¯ï¼Œä½ çš„ä»»åŠ¡æ˜¯ç¡®å®šè¯¥ç‰¹å®šå•è¯åœ¨ç½‘æ ¼ä¸­éšè—çš„æ¬¡æ•°ã€‚

## è¯´æ˜/æç¤º

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•**ã€‚

- å­ä»»åŠ¡ $1$ï¼ˆ$2$ åˆ†ï¼‰ï¼šéšè—å­—ç¬¦ä¸²ä¸€å®šåœ¨ä¸€æ¡æ°´å¹³çº¿æ®µä¸Šã€‚
- å­ä»»åŠ¡ $2$ï¼ˆ$2$ åˆ†ï¼‰ï¼šéšè—å­—ç¬¦ä¸²ä¸€å®šåœ¨ä¸€ä¸ªæ°´å¹³æˆ–å‚ç›´çº¿æ®µä¸Šã€‚
- å­ä»»åŠ¡ $3$ï¼ˆ$2$ åˆ†ï¼‰ï¼šéšè—å­—ç¬¦ä¸²ä¸€å®šåœ¨ä¸€ä¸ªæ°´å¹³ã€å‚ç›´æˆ–å¯¹è§’çº¿æ®µä¸Šã€‚
- å­ä»»åŠ¡ $4$ï¼ˆ$9$ åˆ†ï¼‰ï¼šéšè—å­—ç¬¦ä¸²ä¸€å®šåœ¨ä¸€ä¸ªçº¿æ®µæˆ–ä¸¤ä¸ªäº’ç›¸å‚ç›´çš„çº¿æ®µä¸Šã€‚

æ ·ä¾‹ $1$ å›¾è§£ï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/wqo2un8k.png)

æ ·ä¾‹ $2$ å›¾è§£ï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/v082p2qr.png)

é¢˜é¢ç¿»è¯‘ç”± ChatGPT-4o æä¾›ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
MENU
5
7
F T R U B L K
P M N A X C U
A E R C N E O
M N E U A R M
M U N E M N S```

### è¾“å‡º

```
3```

## æ ·ä¾‹ #2

### è¾“å…¥

```
NATURE
6
9
N A T S F E G Q N
S A I B M R H F A
C F T J C U C L T
K B H U P T A N U
D P R R R J D I R
I E E K M E G B E```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCCC Word Hunt æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰+ æ–¹å‘æ§åˆ¶ä¸è½¬å¼¯é€»è¾‘


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œCCC Word Huntâ€çš„å…³é”®ï¼Œå°±åƒ**åœ¨è¿·å®«é‡Œæ‰¾å®è—**â€”â€”ä»æ¯ä¸ªå¯èƒ½çš„èµ·ç‚¹ï¼ˆå•è¯é¦–å­—æ¯ï¼‰å‡ºå‘ï¼Œå°è¯•æ‰€æœ‰å¯èƒ½çš„æ–¹å‘ï¼ˆæ°´å¹³ã€å‚ç›´ã€å¯¹è§’çº¿ï¼‰ï¼Œä¸€æ­¥æ­¥åŒ¹é…å•è¯çš„æ¯ä¸ªå­—ç¬¦ã€‚ç‰¹åˆ«çš„æ˜¯ï¼Œå®è—çš„è·¯å¾„å¯ä»¥**è½¬ä¸€æ¬¡ç›´è§’å¼¯**ï¼ˆæ¯”å¦‚å…ˆå¾€å³èµ°ï¼Œå†å¾€ä¸‹è½¬ï¼‰ï¼Œä½†ä¸èƒ½å›å¤´æˆ–è½¬å¤šæ¬¡ã€‚  

**æ ¸å¿ƒç®—æ³•**ï¼šDFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰ã€‚å®ƒçš„æ€æƒ³åƒâ€œé’»ç‰›è§’å°–â€â€”â€”ä»èµ·ç‚¹å¼€å§‹ï¼Œæ²¿ç€ä¸€ä¸ªæ–¹å‘èµ°åˆ°å¤´ï¼Œæ²¡æ‰¾åˆ°å°±å›æº¯ï¼Œæ¢å¦ä¸€ä¸ªæ–¹å‘ç»§ç»­ã€‚æœ¬é¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨DFSæ¢ç´¢**8ä¸ªåŸºç¡€æ–¹å‘**ï¼ˆä¸Šä¸‹å·¦å³ã€å››ä¸ªå¯¹è§’çº¿ï¼‰ï¼Œå¹¶å…è®¸**ä¸€æ¬¡ç›´è§’è½¬å¼¯**ï¼ˆæ¯”å¦‚ä»æ°´å¹³è½¬å‚ç›´ï¼Œæˆ–ä»å¯¹è§’çº¿è½¬å¦ä¸€ä¸ªå¯¹è§’çº¿ï¼‰ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼š  
- å¦‚ä½•æ§åˆ¶â€œåªèƒ½è½¬ä¸€æ¬¡å¼¯â€ï¼Ÿï¼ˆç”¨`turned`å˜é‡æ ‡è®°æ˜¯å¦å·²è½¬å¼¯ï¼‰  
- å¦‚ä½•è®¡ç®—è½¬å¼¯åçš„æ–¹å‘ï¼Ÿï¼ˆæ¯”å¦‚æ°´å¹³æ–¹å‘çš„å·¦å³è½¬å¯¹åº”å‚ç›´æ–¹å‘çš„ä¸Šä¸‹ï¼‰  
- å¦‚ä½•é¿å…åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦å°±è½¬å¼¯ï¼Ÿï¼ˆ`idx > 0`æ—¶æ‰èƒ½è½¬ï¼‰  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿç½‘æ ¼ï¼ˆæ¯”å¦‚FCæ¸¸æˆä¸­çš„â€œåƒè±†äººâ€è¿·å®«ï¼‰ï¼Œæ¯ä¸ªå­—æ¯æ˜¯ä¸€ä¸ª16x16çš„åƒç´ å—ã€‚èµ·ç‚¹ç”¨**çº¢è‰²**æ ‡è®°ï¼Œå½“å‰è·¯å¾„ç”¨**ç»¿è‰²**é«˜äº®ï¼Œè½¬å¼¯å¤„ç”¨**è“è‰²**é—ªçƒã€‚å½“åŒ¹é…æˆåŠŸæ—¶ï¼Œæ’­æ”¾â€œå®â€çš„èƒœåˆ©éŸ³æ•ˆï¼Œè·¯å¾„å˜æˆ**äº®ç»¿è‰²**ã€‚åŠ¨ç”»æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€å¸§çœ‹è½¬å¼¯è¿‡ç¨‹ï¼‰å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¿«é€Ÿæ¼”ç¤ºå®Œæ•´è·¯å¾„ï¼‰ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šLemonlwlçš„â€œåˆ†å‡½æ•°å¤„ç†æ–¹å‘â€æ–¹æ¡ˆï¼ˆè¯„åˆ†ï¼š4.5æ˜Ÿï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**éå¸¸æ¸…æ™°**ï¼ŒæŠŠé—®é¢˜æ‹†æˆäº†ä¸‰ä¸ªDFSå‡½æ•°ï¼š`dfs1`ï¼ˆå¤„ç†æ°´å¹³/å‚ç›´æ–¹å‘ï¼‰ã€`dfs2`ï¼ˆå¤„ç†å¯¹è§’çº¿æ–¹å‘ï¼‰ã€`dfs3`ï¼ˆå¤„ç†è½¬å¼¯åçš„ç»§ç»­æœç´¢ï¼‰ã€‚æ¯”å¦‚ï¼Œ`dfs1`åœ¨æ¯ä¸€æ­¥éƒ½ä¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬ç›´è§’å¼¯ï¼ˆè°ƒç”¨`dfs3`ï¼‰ï¼Œè€Œ`dfs3`åˆ™è´Ÿè´£æ²¿è½¬å¼¯åçš„æ–¹å‘ç»§ç»­åŒ¹é…ã€‚ä»£ç ç»“æ„å·¥æ•´ï¼Œå˜é‡åï¼ˆå¦‚`x1`/`y1`è¡¨ç¤ºæ°´å¹³å‚ç›´æ–¹å‘çš„åç§»ï¼‰å«ä¹‰æ˜ç¡®ï¼Œ**è¾¹ç•Œæ¡ä»¶å¤„ç†ä¸¥è°¨**ï¼ˆæ¯”å¦‚`d > 0`æ—¶æ‰èƒ½è½¬å¼¯ï¼‰ã€‚ä»å®è·µè§’åº¦çœ‹ï¼Œè¿™ç§åˆ†å‡½æ•°çš„æ–¹å¼å®¹æ˜“è°ƒè¯•ï¼Œé€‚åˆæ–°æ‰‹ç†è§£ä¸åŒæ–¹å‘çš„å¤„ç†é€»è¾‘ã€‚


### é¢˜è§£äºŒï¼š_sun_çš„â€œå•å‡½æ•°æ§åˆ¶æ–¹å‘â€æ–¹æ¡ˆï¼ˆè¯„åˆ†ï¼š4.3æ˜Ÿï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£ç”¨**ä¸€ä¸ªDFSå‡½æ•°**è§£å†³äº†æ‰€æœ‰æƒ…å†µï¼Œé€šè¿‡`fx`ï¼ˆæ–¹å‘ï¼‰å’Œ`zj`ï¼ˆæ˜¯å¦è½¬å¼¯ï¼‰ä¸¤ä¸ªå‚æ•°æ§åˆ¶æµç¨‹ã€‚æ¯”å¦‚ï¼Œå½“`fx == -1`ï¼ˆæœªç¡®å®šæ–¹å‘ï¼‰æ—¶ï¼Œå°è¯•8ä¸ªæ–¹å‘ï¼›å½“`zj`ä¸º`true`ï¼ˆå¯è½¬å¼¯ï¼‰æ—¶ï¼Œè®¡ç®—é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆè½¬90åº¦çš„æ–¹å‘ã€‚ä»£ç **éå¸¸ç®€æ´**ï¼Œé€‚åˆè¿›é˜¶å­¦ä¹ è€…ç†è§£â€œå‚æ•°æ§åˆ¶é€»è¾‘â€çš„æŠ€å·§ã€‚ä¸è¿‡ï¼Œæ–¹å‘æ•°ç»„`dx`/`dy`çš„è®¾è®¡ï¼ˆ12ä¸ªå…ƒç´ ï¼‰éœ€è¦ä»”ç»†ç†è§£ï¼Œå¦åˆ™å®¹æ˜“æ··æ·†æ–¹å‘ã€‚


### é¢˜è§£ä¸‰ï¼šJorisyçš„â€œåˆ†æ–¹å‘å¤„ç†â€æ–¹æ¡ˆï¼ˆè¯„åˆ†ï¼š4.2æ˜Ÿï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æŠŠæ–¹å‘åˆ†æˆäº†**æ°´å¹³å‚ç›´**ï¼ˆ`dfs`å‡½æ•°ï¼‰å’Œ**å¯¹è§’çº¿**ï¼ˆ`dfs2`å‡½æ•°ï¼‰ä¸¤ç±»ï¼Œåˆ†åˆ«å¤„ç†ã€‚æ¯”å¦‚ï¼Œ`dfs`å‡½æ•°å¤„ç†ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ï¼Œ`dfs2`å¤„ç†å››ä¸ªå¯¹è§’çº¿æ–¹å‘ï¼Œè½¬å¼¯æ—¶è®¡ç®—å¯¹åº”çš„å‚ç›´æ–¹å‘ï¼ˆæ¯”å¦‚æ°´å¹³æ–¹å‘è½¬å‚ç›´ï¼Œå¯¹è§’çº¿è½¬å¦ä¸€ä¸ªå¯¹è§’çº¿ï¼‰ã€‚ä»£ç é€»è¾‘**ç›´è§‚æ˜“æ‡‚**ï¼Œé€‚åˆæ–°æ‰‹åŒºåˆ†â€œç›´çº¿æ–¹å‘â€å’Œâ€œå¯¹è§’çº¿æ–¹å‘â€çš„ä¸åŒå¤„ç†æ–¹å¼ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•æ§åˆ¶â€œåªèƒ½è½¬ä¸€æ¬¡å¼¯â€ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  ç”¨ä¸€ä¸ª`bool`å˜é‡ï¼ˆå¦‚`turned`ï¼‰æ ‡è®°æ˜¯å¦å·²è½¬å¼¯ã€‚åªæœ‰å½“`turned`ä¸º`false`ï¼ˆæœªè½¬å¼¯ï¼‰ä¸”å½“å‰åŒ¹é…çš„å­—ç¬¦ä¸æ˜¯ç¬¬ä¸€ä¸ªï¼ˆ`idx > 0`ï¼‰æ—¶ï¼Œæ‰èƒ½å°è¯•è½¬å¼¯ã€‚è½¬å¼¯åï¼Œå°†`turned`è®¾ä¸º`true`ï¼Œç¦æ­¢å†æ¬¡è½¬å¼¯ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`turned`å˜é‡æ˜¯â€œè½¬å¼¯æƒé™â€çš„å¼€å…³ï¼Œä¸€å®šè¦åœ¨è½¬å¼¯æ—¶å…³é—­å®ƒï¼


### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•è®¡ç®—è½¬å¼¯åçš„æ–¹å‘ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  å¯¹äºæ°´å¹³/å‚ç›´æ–¹å‘ï¼ˆæ¯”å¦‚æ–¹å‘`0`æ˜¯ä¸Šï¼Œ`1`æ˜¯å³ï¼‰ï¼Œè½¬å¼¯åçš„æ–¹å‘æ˜¯**å‚ç›´äºåŸæ–¹å‘**çš„ï¼ˆæ¯”å¦‚`0`è½¬åæ˜¯`1`æˆ–`3`ï¼Œå³å³æˆ–å·¦ï¼‰ã€‚å¯¹äºå¯¹è§’çº¿æ–¹å‘ï¼ˆæ¯”å¦‚`0`æ˜¯å·¦ä¸Šåˆ°å³ä¸‹ï¼‰ï¼Œè½¬å¼¯åçš„æ–¹å‘æ˜¯**å¦ä¸€ä¸ªå¯¹è§’çº¿**ï¼ˆæ¯”å¦‚`0`è½¬åæ˜¯`1`æˆ–`3`ï¼Œå³å³ä¸Šåˆ°å·¦ä¸‹æˆ–å·¦ä¸‹åˆ°å³ä¸Šï¼‰ã€‚å¯ä»¥ç”¨æ–¹å‘æ•°ç»„çš„ç´¢å¼•è®¡ç®—ï¼ˆå¦‚`(dir + 1) % 4`è¡¨ç¤ºé¡ºæ—¶é’ˆè½¬ï¼Œ`(dir + 3) % 4`è¡¨ç¤ºé€†æ—¶é’ˆè½¬ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ–¹å‘æ•°ç»„çš„è®¾è®¡è¦â€œå¯¹é½â€å‚ç›´æ–¹å‘ï¼Œè¿™æ ·è½¬å¼¯æ—¶åªéœ€è°ƒæ•´ç´¢å¼•å³å¯ã€‚


### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•é¿å…è¶Šç•Œå’Œå­—ç¬¦ä¸åŒ¹é…ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  åœ¨æ¯ä¸€æ­¥DFSå‰ï¼Œéƒ½è¦æ£€æŸ¥**åæ ‡æ˜¯å¦åœ¨ç½‘æ ¼å†…**ï¼ˆå¦‚`x >= 1 && x <= r && y >= 1 && y <= c`ï¼‰å’Œ**å½“å‰å­—ç¬¦æ˜¯å¦åŒ¹é…å•è¯**ï¼ˆå¦‚`a[x][y] == w[idx]`ï¼‰ã€‚å¦‚æœä¸æ»¡è¶³ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…æ— æ•ˆæœç´¢ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œæ¡ä»¶æ˜¯DFSçš„â€œå®‰å…¨ç»³â€ï¼Œä¸€å®šè¦æ”¾åœ¨å‡½æ•°å¼€å¤´ï¼


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **åˆ†æƒ…å†µå¤„ç†**ï¼šæŠŠæ°´å¹³/å‚ç›´ã€å¯¹è§’çº¿æ–¹å‘åˆ†å¼€å¤„ç†ï¼Œé€»è¾‘æ›´æ¸…æ™°ã€‚  
- **å‚æ•°ä¼ é€’**ï¼šç”¨`dir`ï¼ˆæ–¹å‘ï¼‰å’Œ`turned`ï¼ˆæ˜¯å¦è½¬å¼¯ï¼‰æ§åˆ¶DFSæµç¨‹ï¼Œé¿å…é‡å¤ä»£ç ã€‚  
- **è¾¹ç•Œæ£€æŸ¥**ï¼šæ¯ä¸€æ­¥éƒ½è¦æ£€æŸ¥åæ ‡å’Œå­—ç¬¦ï¼Œå‡å°‘æ— æ•ˆæœç´¢ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆLemonlwlå’ŒJorisyçš„é¢˜è§£æ€è·¯ï¼Œæç‚¼å‡ºâ€œåˆ†æ–¹å‘å¤„ç†+è½¬å¼¯æ§åˆ¶â€çš„é€šç”¨å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <string>
  using namespace std;
  
  string w;
  int r, c, ans, len;
  char a[105][105];
  // æ°´å¹³/å‚ç›´æ–¹å‘ï¼ˆä¸Šã€å·¦ã€ä¸‹ã€å³ï¼‰
  int dx1[4] = {-1, 0, 1, 0}, dy1[4] = {0, -1, 0, 1};
  // å¯¹è§’çº¿æ–¹å‘ï¼ˆå·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸‹ã€å³ä¸Šï¼‰
  int dx2[4] = {-1, 1, 1, -1}, dy2[4] = {-1, -1, 1, 1};
  
  // å¤„ç†è½¬å¼¯åçš„æœç´¢ï¼ˆflag=1è¡¨ç¤ºä»æ°´å¹³/å‚ç›´è½¬æ¥ï¼Œflag=2è¡¨ç¤ºä»å¯¹è§’çº¿è½¬æ¥ï¼‰
  void dfs3(int x, int y, int idx, int dir, int flag) {
      if (idx == len - 1) { ans++; return; }
      int nx, ny;
      if (flag == 1) { nx = x + dx1[dir]; ny = y + dy1[dir]; }
      else { nx = x + dx2[dir]; ny = y + dy2[dir]; }
      if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
          dfs3(nx, ny, idx+1, dir, flag);
      }
  }
  
  // å¤„ç†æ°´å¹³/å‚ç›´æ–¹å‘çš„æœç´¢
  void dfs1(int x, int y, int idx, int dir) {
      if (idx == len - 1) { ans++; return; }
      // ç»§ç»­æ²¿åŸæ–¹å‘èµ°
      int nx = x + dx1[dir], ny = y + dy1[dir];
      if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
          dfs1(nx, ny, idx+1, dir);
      }
      // è½¬å¼¯ï¼ˆidx>0ä¸”æœªè½¬è¿‡å¼¯ï¼‰
      if (idx > 0) {
          // é¡ºæ—¶é’ˆè½¬90åº¦ï¼ˆæ¯”å¦‚ä¸Šè½¬å³ï¼‰
          int new_dir = (dir + 1) % 4;
          nx = x + dx1[new_dir]; ny = y + dy1[new_dir];
          if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
              dfs3(nx, ny, idx+1, new_dir, 1);
          }
          // é€†æ—¶é’ˆè½¬90åº¦ï¼ˆæ¯”å¦‚ä¸Šè½¬å·¦ï¼‰
          new_dir = (dir + 3) % 4;
          nx = x + dx1[new_dir]; ny = y + dy1[new_dir];
          if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
              dfs3(nx, ny, idx+1, new_dir, 1);
          }
      }
  }
  
  // å¤„ç†å¯¹è§’çº¿æ–¹å‘çš„æœç´¢ï¼ˆç±»ä¼¼dfs1ï¼‰
  void dfs2(int x, int y, int idx, int dir) {
      if (idx == len - 1) { ans++; return; }
      int nx = x + dx2[dir], ny = y + dy2[dir];
      if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
          dfs2(nx, ny, idx+1, dir);
      }
      if (idx > 0) {
          int new_dir = (dir + 1) % 4;
          nx = x + dx2[new_dir]; ny = y + dy2[new_dir];
          if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
              dfs3(nx, ny, idx+1, new_dir, 2);
          }
          new_dir = (dir + 3) % 4;
          nx = x + dx2[new_dir]; ny = y + dy2[new_dir];
          if (nx >= 1 && nx <= r && ny >= 1 && ny <= c && a[nx][ny] == w[idx+1]) {
              dfs3(nx, ny, idx+1, new_dir, 2);
          }
      }
  }
  
  int main() {
      cin >> w >> r >> c;
      len = w.size();
      for (int i = 1; i <= r; i++) {
          for (int j = 1; j <= c; j++) {
              cin >> a[i][j];
          }
      }
      // éå†æ‰€æœ‰èµ·ç‚¹ï¼ˆå•è¯é¦–å­—æ¯ï¼‰
      for (int i = 1; i <= r; i++) {
          for (int j = 1; j <= c; j++) {
              if (a[i][j] == w[0]) {
                  // å°è¯•æ°´å¹³/å‚ç›´çš„4ä¸ªæ–¹å‘
                  for (int dir = 0; dir < 4; dir++) {
                      dfs1(i, j, 0, dir);
                  }
                  // å°è¯•å¯¹è§’çº¿çš„4ä¸ªæ–¹å‘
                  for (int dir = 0; dir < 4; dir++) {
                      dfs2(i, j, 0, dir);
                  }
              }
          }
      }
      cout << ans << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š`dfs1`ï¼ˆå¤„ç†æ°´å¹³/å‚ç›´æ–¹å‘ï¼‰ã€`dfs2`ï¼ˆå¤„ç†å¯¹è§’çº¿æ–¹å‘ï¼‰ã€`dfs3`ï¼ˆå¤„ç†è½¬å¼¯åçš„ç»§ç»­æœç´¢ï¼‰ã€‚`main`å‡½æ•°éå†æ‰€æœ‰å¯èƒ½çš„èµ·ç‚¹ï¼ˆå•è¯é¦–å­—æ¯ï¼‰ï¼Œç„¶åè°ƒç”¨`dfs1`å’Œ`dfs2`å°è¯•æ‰€æœ‰æ–¹å‘ã€‚`dfs1`å’Œ`dfs2`åœ¨æ¯ä¸€æ­¥éƒ½ä¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬å¼¯ï¼ˆè°ƒç”¨`dfs3`ï¼‰ï¼Œ`dfs3`åˆ™æ²¿è½¬å¼¯åçš„æ–¹å‘ç»§ç»­åŒ¹é…ã€‚


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆLemonlwlï¼‰ï¼š`dfs1`å‡½æ•°ï¼ˆæ°´å¹³/å‚ç›´æ–¹å‘å¤„ç†ï¼‰  
* **äº®ç‚¹**ï¼šæ¸…æ™°åŒºåˆ†â€œç»§ç»­èµ°â€å’Œâ€œè½¬å¼¯â€çš„é€»è¾‘ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs1(int x, int y, int d, int dire) {
      if (d == len-1) { sum++; return; }
      // ç»§ç»­æ²¿åŸæ–¹å‘èµ°
      int vx = x + x1[dire], vy = y + y1[dire];
      if (vx >= 1 && vy >= 1 && vx <= r && vy <= c && a[vx][vy] == w[d+1]) {
          dfs1(vx, vy, d+1, dire);
      }
      // è½¬å¼¯ï¼ˆd>0æ—¶ï¼‰
      if (d > 0) {
          int ax = x + x1[(dire+1)%4], ay = y + y1[(dire+1)%4];
          if (ax >= 1 && ay >= 1 && ax <= r && ay <= c && a[ax][ay] == w[d+1]) {
              dfs3(ax, ay, d+1, (dire+1)%4, 1);
          }
          // é€†æ—¶é’ˆè½¬ç±»ä¼¼
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç çš„å…³é”®æ˜¯**â€œç»§ç»­èµ°â€å’Œâ€œè½¬å¼¯â€çš„åˆ†ç¦»**ã€‚`vx`/`vy`æ˜¯æ²¿åŸæ–¹å‘çš„ä¸‹ä¸€ä¸ªåæ ‡ï¼Œå¦‚æœåŒ¹é…å°±ç»§ç»­è°ƒç”¨`dfs1`ï¼›`ax`/`ay`æ˜¯è½¬å¼¯åçš„åæ ‡ï¼ˆé¡ºæ—¶é’ˆè½¬90åº¦ï¼‰ï¼Œå¦‚æœåŒ¹é…å°±è°ƒç”¨`dfs3`ç»§ç»­æœç´¢ã€‚`d > 0`çš„æ¡ä»¶ç¡®ä¿äº†ä¸ä¼šåœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦å°±è½¬å¼¯ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæŠŠâ€œç»§ç»­èµ°â€å’Œâ€œè½¬å¼¯â€åˆ†å¼€å¤„ç†ï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼


#### é¢˜è§£äºŒï¼ˆ_sun_ï¼‰ï¼š`dfs`å‡½æ•°ï¼ˆå•å‡½æ•°æ§åˆ¶æ–¹å‘ï¼‰  
* **äº®ç‚¹**ï¼šç”¨`fx`ï¼ˆæ–¹å‘ï¼‰å’Œ`zj`ï¼ˆæ˜¯å¦è½¬å¼¯ï¼‰å‚æ•°æ§åˆ¶æ‰€æœ‰æƒ…å†µã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  void dfs(int x, int y, int u, int fx, bool zj) {
      if (u > q) { ans++; return; }
      if (fx == -1) {
          // æœªç¡®å®šæ–¹å‘ï¼Œå°è¯•8ä¸ªæ–¹å‘
          for (int i = 2; i <= 9; i++) {
              int xx = x + dx[i], yy = y + dy[i];
              if (xx > 0 && xx <= n && yy > 0 && yy <= m && a[xx][yy] == s[u]) {
                  dfs(xx, yy, u+1, i, true);
              }
          }
      } else {
          // ç»§ç»­æ²¿åŸæ–¹å‘èµ°
          int xx = x + dx[fx], yy = y + dy[fx];
          if (xx > 0 && xx <= n && yy > 0 && yy <= m && a[xx][yy] == s[u]) {
              dfs(xx, yy, u+1, fx, zj);
          }
          // è½¬å¼¯ï¼ˆzjä¸ºtrueæ—¶ï¼‰
          if (zj) {
              // é¡ºæ—¶é’ˆè½¬
              xx = x + dx[fx+2], yy = y + dy[fx+2];
              if (xx > 0 && xx <= n && yy > 0 && yy <= m && a[xx][yy] == s[u]) {
                  dfs(xx, yy, u+1, fx+2, false);
              }
              // é€†æ—¶é’ˆè½¬ç±»ä¼¼
          }
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  å½“`fx == -1`ï¼ˆæœªç¡®å®šæ–¹å‘ï¼‰æ—¶ï¼Œå°è¯•8ä¸ªæ–¹å‘ï¼ˆ`iä»2åˆ°9`ï¼‰ï¼›å½“`fx`ç¡®å®šæ—¶ï¼Œå…ˆç»§ç»­æ²¿åŸæ–¹å‘èµ°ï¼Œå†å°è¯•è½¬å¼¯ï¼ˆ`zjä¸ºtrue`æ—¶ï¼‰ã€‚`fx+2`è¡¨ç¤ºé¡ºæ—¶é’ˆè½¬90åº¦ï¼ˆæ¯”å¦‚æ–¹å‘`2`æ˜¯å·¦ï¼Œ`fx+2=4`æ˜¯ä¸‹ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç”¨å‚æ•°æ§åˆ¶æµç¨‹ï¼Œå¯ä»¥å‡å°‘å‡½æ•°æ•°é‡ï¼Œè®©ä»£ç æ›´ç®€æ´ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š`åƒç´ æ¢é™©å®¶æ‰¾å•è¯`ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰  
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹Ÿç½‘æ ¼ï¼Œè®©â€œæ¢é™©å®¶â€ï¼ˆä¸€ä¸ªå°æ–¹å—ï¼‰ä»èµ·ç‚¹å‡ºå‘ï¼Œæ²¿æ–¹å‘ç§»åŠ¨ï¼ŒåŒ¹é…å•è¯å­—ç¬¦ã€‚è½¬å¼¯æ—¶ï¼Œæ¢é™©å®¶ä¼šâ€œè½¬èº«â€ï¼ˆæ¯”å¦‚ä»å³èµ°è½¬ä¸‹èµ°ï¼‰ï¼ŒåŒ¹é…æˆåŠŸæ—¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œå¢å¼ºä»£å…¥æ„Ÿã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º`10x10`çš„åƒç´ ç½‘æ ¼ï¼ˆæ¯ä¸ªæ ¼å­16x16åƒç´ ï¼‰ï¼Œå­—æ¯ç”¨**ç°è‰²**æ˜¾ç¤ºï¼Œç½‘æ ¼çº¿ç”¨**é»‘è‰²**ã€‚  
   - æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹â€ã€â€œå•æ­¥â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠâ€œé€Ÿåº¦æ»‘å—â€ï¼ˆ0.5x-2xï¼‰ã€‚  
   - èƒŒæ™¯æ’­æ”¾**8ä½é£æ ¼çš„è½»å¿«BGM**ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚

2. **æ‰¾åˆ°èµ·ç‚¹**ï¼š  
   - éå†ç½‘æ ¼ï¼ŒæŠŠæ‰€æœ‰ç­‰äºå•è¯é¦–å­—æ¯çš„æ ¼å­æ ‡è®°ä¸º**çº¢è‰²**ï¼ˆæ¢é™©å®¶çš„èµ·ç‚¹ï¼‰ã€‚  
   - ç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œæ¢é™©å®¶ä»ç¬¬ä¸€ä¸ªçº¢è‰²æ ¼å­å‡ºå‘ã€‚

3. **æ²¿æ–¹å‘ç§»åŠ¨**ï¼š  
   - æ¢é™©å®¶ï¼ˆ**é»„è‰²æ–¹å—**ï¼‰æ²¿å½“å‰æ–¹å‘ç§»åŠ¨ï¼Œæ¯èµ°ä¸€æ­¥ï¼Œèµ°è¿‡çš„æ ¼å­å˜æˆ**ç»¿è‰²**ï¼ˆå·²åŒ¹é…çš„è·¯å¾„ï¼‰ã€‚  
   - æ¯ç§»åŠ¨ä¸€æ­¥ï¼Œæ’­æ”¾**â€œè¸è¸â€çš„è„šæ­¥å£°**ï¼ˆè½»é‡çº§åƒç´ éŸ³æ•ˆï¼‰ã€‚

4. **è½¬å¼¯å¤„ç†**ï¼š  
   - å½“éœ€è¦è½¬å¼¯æ—¶ï¼Œæ¢é™©å®¶ä¼š**é—ªçƒè“è‰²**ï¼ˆè¡¨ç¤ºå‡†å¤‡è½¬å¼¯ï¼‰ï¼Œç„¶ååˆ‡æ¢æ–¹å‘ï¼ˆæ¯”å¦‚ä»å³èµ°è½¬ä¸‹èµ°ï¼‰ã€‚  
   - è½¬å¼¯æ—¶ï¼Œæ’­æ”¾**â€œå’”å—’â€çš„è½¬å¼¯éŸ³æ•ˆ**ã€‚

5. **åŒ¹é…æˆåŠŸ**ï¼š  
   - å½“åŒ¹é…å®Œæ‰€æœ‰å­—ç¬¦æ—¶ï¼Œæ¢é™©å®¶ä¼š**è·³èµ·æ¥**ï¼ˆåƒç´ åŠ¨ç”»ï¼‰ï¼Œè·¯å¾„å˜æˆ**äº®ç»¿è‰²**ï¼Œæ’­æ”¾**â€œå®~â€çš„èƒœåˆ©éŸ³æ•ˆ**ã€‚  
   - ç»Ÿè®¡åŒ¹é…æ¬¡æ•°ï¼Œæ˜¾ç¤ºåœ¨å±å¹•å³ä¸Šè§’ï¼ˆ**çº¢è‰²æ•°å­—**ï¼‰ã€‚

6. **äº¤äº’æ§åˆ¶**ï¼š  
   - â€œå•æ­¥â€æŒ‰é’®ï¼šé€å¸§æ˜¾ç¤ºç§»åŠ¨å’Œè½¬å¼¯è¿‡ç¨‹ï¼Œé€‚åˆä»”ç»†è§‚å¯Ÿã€‚  
   - â€œè‡ªåŠ¨æ’­æ”¾â€ï¼šæŒ‰é€Ÿåº¦æ»‘å—è®¾ç½®çš„é€Ÿåº¦æ’­æ”¾ï¼Œé€‚åˆå¿«é€Ÿçœ‹æ•´ä½“æµç¨‹ã€‚  
   - â€œé‡ç½®â€æŒ‰é’®ï¼šæ¢å¤ç½‘æ ¼åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚


### æŠ€æœ¯å®ç°ç»†èŠ‚  
- **Canvasç»˜åˆ¶**ï¼šç”¨`ctx.fillRect`ç»˜åˆ¶åƒç´ æ ¼å­ï¼Œ`ctx.drawImage`ç»˜åˆ¶æ¢é™©å®¶ spriteï¼ˆ8x8åƒç´ ï¼‰ã€‚  
- **æ–¹å‘æ§åˆ¶**ï¼šç”¨`dx`/`dy`æ•°ç»„å­˜å‚¨æ–¹å‘åç§»ï¼Œæ¯”å¦‚`dx[0] = -1`ï¼ˆä¸Šï¼‰ã€`dx[1] = 0`ï¼ˆå·¦ï¼‰ç­‰ã€‚  
- **éŸ³æ•ˆè§¦å‘**ï¼šç”¨`Audio`å¯¹è±¡æ’­æ”¾é¢„åŠ è½½çš„8ä½éŸ³æ•ˆï¼ˆæ¯”å¦‚`step.wav`ã€`turn.wav`ã€`win.wav`ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
DFS+æ–¹å‘æ§åˆ¶çš„æ€è·¯ä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½ç”¨äºï¼š  
- **å•è¯æ–¹é˜µ**ï¼ˆæ¯”å¦‚æ´›è°·P1101ï¼‰ï¼šåœ¨ç½‘æ ¼ä¸­æ‰¾å•è¯ï¼Œå…è®¸ä»»æ„æ–¹å‘ã€‚  
- **è¿·å®«é—®é¢˜**ï¼ˆæ¯”å¦‚æ´›è°·P1605ï¼‰ï¼šæ‰¾ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ï¼Œå…è®¸è½¬å¼¯ã€‚  
- **è¿é€šå—è®¡æ•°**ï¼ˆæ¯”å¦‚æ´›è°·P2895ï¼‰ï¼šç»Ÿè®¡ç½‘æ ¼ä¸­è¿é€šçš„å­—ç¬¦å—æ•°é‡ã€‚


### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P1101 å•è¯æ–¹é˜µ**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŸºç¡€çš„DFSæ‰¾å•è¯é—®é¢˜ï¼Œé€‚åˆå·©å›ºâ€œæ–¹å‘æ§åˆ¶â€å’Œâ€œè¾¹ç•Œæ£€æŸ¥â€çš„æŠ€å·§ã€‚  
2. **æ´›è°· P1019 å•è¯æ¥é¾™**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šDFS+å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œéœ€è¦è€ƒè™‘â€œè½¬å¼¯â€ï¼ˆå³å•è¯ä¹‹é—´çš„è¿æ¥ï¼‰ï¼Œæ˜¯æœ¬é¢˜çš„è¿›é˜¶ç‰ˆã€‚  
3. **æ´›è°· P2895 ç»†èƒåˆ†è£‚**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šBFSæ‰¾è¿é€šå—ï¼Œè™½ç„¶ç”¨äº†BFSï¼Œä½†æ€è·¯å’ŒDFSç±»ä¼¼ï¼Œé€‚åˆç†è§£â€œæœç´¢â€çš„é€šç”¨é€»è¾‘ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰  
- **æ¥è‡ªLemonlwlçš„ç»éªŒ**ï¼šâ€œåœ¨dç­‰äº0æ—¶ä¸èƒ½ç¿»æŠ˜â€â€”â€”è¿™æé†’æˆ‘ä»¬ï¼Œ**è¾¹ç•Œæ¡ä»¶æ˜¯DFSçš„å…³é”®**ï¼Œä¸€å®šè¦è€ƒè™‘â€œç¬¬ä¸€ä¸ªå­—ç¬¦â€çš„ç‰¹æ®Šæƒ…å†µã€‚  
- **æ¥è‡ª_sun_çš„ç»éªŒ**ï¼šâ€œç”¨ä¸€ä¸ªå‡½æ•°å¤„ç†æ‰€æœ‰æ–¹å‘â€â€”â€”è¿™è¯´æ˜ï¼Œ**å‚æ•°è®¾è®¡å¾—å¥½ï¼Œå¯ä»¥å‡å°‘ä»£ç é‡**ï¼Œä½†éœ€è¦ä»”ç»†è°ƒè¯•æ–¹å‘æ•°ç»„ã€‚  
- **æ¥è‡ªJorisyçš„ç»éªŒ**ï¼šâ€œåˆ†æ–¹å‘å¤„ç†â€â€”â€”è¿™é€‚åˆæ–°æ‰‹ï¼Œå› ä¸ºâ€œæ°´å¹³/å‚ç›´â€å’Œâ€œå¯¹è§’çº¿â€çš„è½¬å¼¯é€»è¾‘ä¸åŒï¼Œåˆ†å¼€å¤„ç†æ›´æ˜“æ‡‚ã€‚


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œCCC Word Huntâ€çš„åˆ†æå°±åˆ°è¿™é‡Œå•¦ï¼å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ æŒæ¡DFS+æ–¹å‘æ§åˆ¶çš„æŠ€å·§ã€‚è®°ä½ï¼Œ**æœç´¢é—®é¢˜çš„å…³é”®æ˜¯â€œå°è¯•æ‰€æœ‰å¯èƒ½â€ï¼Œè€Œâ€œæ§åˆ¶æ¡ä»¶â€ï¼ˆæ¯”å¦‚è½¬å¼¯æ¬¡æ•°ã€æ–¹å‘ï¼‰æ˜¯é¿å…æ— æ•ˆæœç´¢çš„å…³é”®**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜å§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š217.63ç§’
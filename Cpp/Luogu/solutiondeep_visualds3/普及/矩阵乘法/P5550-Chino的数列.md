# é¢˜ç›®ä¿¡æ¯

# Chinoçš„æ•°åˆ—

## é¢˜ç›®èƒŒæ™¯

æ²¡æœ‰èƒŒæ™¯

æˆ‘å†™ä¸å‡ºæ¥äº†qwq

## é¢˜ç›®æè¿°

Chinoç»™å®šäº† $n$ ä¸ªæ•° $a_1...a_n$ï¼Œç»™å®šå¸¸æ•° $s,m$ ï¼Œå¥¹ä¼šè½®æµå¯¹è¿™ $n$ ä¸ªæ•°åš $k$ ç»„æ“ä½œï¼Œæ¯ç»„æ“ä½œåŒ…å«ä»¥ä¸‹å‡ æ­¥ï¼š

1. $\operatorname{swap}(a_s,a_m)$ï¼ˆäº¤æ¢ $a_s,a_m$ï¼‰ã€‚

2. å°† $n$ ä¸ªæ•°éƒ½å‘å‰å¹³ç§»ä¸€ä½ï¼ˆç¬¬ $1$ ä¸ªç§»åŠ¨åˆ°ç¬¬ $n$ ä¸ªä½ç½®ä¸Šï¼‰ã€‚

Chino æƒ³çŸ¥é“ï¼Œ$k$ ç»„æ“ä½œåï¼Œè¿™ $n$ ä¸ªæ•°åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ
 
Orz yky,dyh,wjk,jjy,cxr,gsy,cpy,zcy,tyz,yy,hz,zhr,ygg

## è¯´æ˜/æç¤º

å¯¹äº $40\%$ çš„æ•°æ®ï¼Œ$1 \leq k \leq 10^7$

å¯¹äº $100\% $çš„æ•°æ®ï¼Œ$1 \leq n \leq 80$ï¼Œ$1 \leq s,m\leq n$ï¼Œ$1 \leq k \leq 10^{18}$

æ‰€æœ‰æ•°å­—å‡åœ¨ `long long` ä»¥å†…

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 1 2 3
1 2 3 4```

### è¾“å‡º

```
1 2 3 4```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šChinoçš„æ•°åˆ— æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·åˆ†æ"Chinoçš„æ•°åˆ—"è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶ç†è§£çŸ©é˜µå¿«é€Ÿå¹‚åœ¨åºåˆ—å˜æ¢ä¸­çš„åº”ç”¨ï¼ŒæŒæ¡è§£é¢˜æ ¸å¿ƒæŠ€å·§ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šçŸ©é˜µå¿«é€Ÿå¹‚ / å¾ªç¯èŠ‚è¯†åˆ«  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äºå°†é‡å¤æ“ä½œè½¬åŒ–ä¸ºçŸ©é˜µä¹˜æ³•ã€‚å°±åƒéŸ³ä¹ç›’çš„é½¿è½®è½¬åŠ¨è§„å¾‹ï¼Œæ¯ç»„æ“ä½œï¼ˆäº¤æ¢+å¹³ç§»ï¼‰å¯è§†ä¸ºä¸€ä¸ªå›ºå®šé½¿è½®ç»„ã€‚çŸ©é˜µå¿«é€Ÿå¹‚å¦‚åŒé½¿è½®ç»„çš„æŒ‡æ•°çº§è”åŠ¨ï¼Œèƒ½é«˜æ•ˆå¤„ç†è¶…å¤§æ¬¡æ•°æ“ä½œï¼ˆkâ‰¤10Â¹â¸ï¼‰ã€‚  
> - **æ ¸å¿ƒæ€è·¯**ï¼šæ„é€ äº¤æ¢çŸ©é˜µï¼ˆSwapï¼‰å’Œå¹³ç§»çŸ©é˜µï¼ˆShiftï¼‰ï¼Œå…¶ä¹˜ç§¯å½¢æˆè½¬ç§»çŸ©é˜µã€‚é€šè¿‡çŸ©é˜µå¿«é€Ÿå¹‚åŠ é€Ÿè®¡ç®—  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåŠ¨ç”»å°†å±•ç¤ºåƒç´ é½¿è½®çš„å’¬åˆè¿‡ç¨‹â€”â€”çº¢è‰²é½¿è½®ï¼ˆäº¤æ¢æ“ä½œï¼‰ä¸è“è‰²ä¼ é€å¸¦ï¼ˆå¹³ç§»æ“ä½œï¼‰ååŒè¿è½¬ï¼Œé«˜äº®å½“å‰æ“ä½œçš„çŸ©é˜µè¡Œåˆ—å˜åŒ–  
> - **å¤å¤æ¸¸æˆåŒ–**ï¼šé‡‡ç”¨8-bitéŸ³æ•ˆï¼ˆäº¤æ¢æ—¶"å®"å£°ï¼Œå¹³ç§»æ—¶æ»‘è½¨å£°ï¼‰ï¼Œæ¯å®Œæˆ1e6æ¬¡æ“ä½œè§¦å‘16-bitèƒœåˆ©éŸ³æ•ˆ  

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆLeianhaï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯ä¸¥è°¨ï¼Œå®Œæ•´å±•ç¤ºçŸ©é˜µæ„é€ è¿‡ç¨‹ã€‚ä»£ç ä¸­`lin1`ï¼ˆäº¤æ¢çŸ©é˜µï¼‰ä¸`lin2`ï¼ˆå¹³ç§»çŸ©é˜µï¼‰çš„æ„é€ æ¸…æ™°ä½“ç°æ•°å­¦æŠ½è±¡èƒ½åŠ›ã€‚äº®ç‚¹åœ¨äºè§„èŒƒå¤„ç†çŸ©é˜µä¹˜æ³•è¿ç®—ç¬¦é‡è½½ï¼Œè¾¹ç•Œå¤„ç†å®Œå–„ï¼ˆn+1å¤„å–æ¨¡ï¼‰ï¼Œæ˜¯ç«èµ›æ ‡å‡†å®ç°ã€‚  

**é¢˜è§£äºŒï¼ˆ5k_sync_closerï¼‰**  
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§åœ°é€šè¿‡åæ ‡å˜æ¢ï¼ˆs'=(s+n-2)%n+1ï¼‰å°†æ“ä½œé¡ºåºè½¬åŒ–ä¸ºç»Ÿä¸€å½¢å¼ï¼Œå¤§å¹…ç®€åŒ–çŸ©é˜µæ„é€ ã€‚ä»£ç æè‡´ç®€æ´ï¼ˆä»…22è¡Œï¼‰ï¼Œä½†éœ€æ³¨æ„å…¶é€†å‘æ€ç»´å¯èƒ½å¢åŠ ç†è§£éš¾åº¦ã€‚äº®ç‚¹åœ¨äºç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ï¼ˆO(n)ï¼‰å’ŒçŸ©é˜µä¹˜æ³•æ¬¡åºè°ƒæ•´çš„æŠ€å·§ã€‚  

**é¢˜è§£ä¸‰ï¼ˆzh_douï¼‰**  
* **ç‚¹è¯„**ï¼šç»“æ„æ¸…æ™°ï¼Œå®Œæ•´å®ç°çŸ©é˜µç±»å°è£…ã€‚äº®ç‚¹åœ¨äºç‹¬ç«‹å‡½æ•°`ksm()`å¤„ç†å¿«é€Ÿå¹‚ï¼Œæ¨¡å—åŒ–è®¾è®¡ä¾¿äºè°ƒè¯•ã€‚æ³¨é‡Šè¯¦å°½ï¼Œç‰¹åˆ«é€‚åˆåˆå­¦è€…ç†è§£çŸ©é˜µä¹˜æ³•åœ¨åºåˆ—å˜æ¢ä¸­çš„åº”ç”¨åŸç†ã€‚  

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šæ“ä½œé¡ºåºçš„çŸ©é˜µè½¬åŒ–**  
   - **åˆ†æ**ï¼šå…ˆäº¤æ¢åå¹³ç§» â‰  å…ˆå¹³ç§»åäº¤æ¢ã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡æ•°å­¦è¯æ˜å‘ç°ï¼šäº¤æ¢åå¹³ç§»ç­‰æ•ˆäºå¹³ç§»åæ‰§è¡Œä½ç½®ä¿®æ­£ï¼ˆs'=(s+n-2)%n+1ï¼‰  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ“ä½œé¡ºåºå†³å®šçŸ©é˜µä¹˜æ³•æ¬¡åºâ€”â€”Swap Ã— Shift â‰  Shift Ã— Swap  

2. **éš¾ç‚¹ï¼šçŠ¶æ€çŸ©é˜µçš„ç»´åº¦å‹ç¼©**  
   - **åˆ†æ**ï¼šåˆå§‹åºåˆ—æ˜¯1Ã—nçŸ©é˜µï¼Œè½¬ç§»çŸ©é˜µéœ€nÃ—nã€‚é€šè¿‡`f.c[i][1]`å­˜å‚¨åºåˆ—å€¼ï¼Œé¿å…å†—ä½™é«˜ç»´æ•°ç»„  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¡Œå‘é‡ Ã— æ–¹é˜µ æ¯” æ–¹é˜µ Ã— åˆ—å‘é‡ æ›´èŠ‚çœå†…å­˜  

3. **éš¾ç‚¹ï¼šå¾ªç¯èŠ‚ä¸çŸ©é˜µæ³•çš„æŠ‰æ‹©**  
   - **åˆ†æ**ï¼šå½“nè¾ƒå°æ—¶ï¼ˆæœ¬é¢˜nâ‰¤80ï¼‰å¾ªç¯èŠ‚æ³•å¯è¡Œï¼Œä½†çŸ©é˜µæ³•æ›´å…·æ™®é€‚æ€§ã€‚å¾ªç¯èŠ‚æ³•å®é™…è¿è¡Œæ•ˆç‡å–å†³äºå‘¨æœŸé•¿åº¦  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šk>10â´æ—¶ä¼˜é€‰çŸ©é˜µæ³•ï¼›k<10â´ä¸”nè¾ƒå°æ—¶å¯è€ƒè™‘å¾ªç¯èŠ‚æ³•  

#### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼šçŸ©é˜µå°è£…æœ¯**  
  é‡è½½`operator*`å°è£…çŸ©é˜µä¹˜æ³•ï¼Œé¿å…é‡å¤ä»£ç   
- **æŠ€å·§2ï¼šä½ç½®æ˜ å°„æŠ€å·§**  
  æ“ä½œå‰ç”¨`(pos+n-2)%n+1`è®¡ç®—å¹³ç§»åä½ç½®ï¼Œç»Ÿä¸€æ“ä½œæ¬¡åº  
- **æŠ€å·§3ï¼šå¾ªç¯èŠ‚å‰ªæ**  
  å½“k>nÂ²æ—¶å¯é¢„åˆ¤å‘¨æœŸå­˜åœ¨æ€§ï¼Œåˆ‡æ¢ç®—æ³•ç­–ç•¥  

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <cstring>
#include <iostream>
using namespace std;

struct Matrix {
    long long data[82][82];
    int n;
    Matrix operator*(const Matrix& rhs) {
        Matrix res;
        res.n = n;
        for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= n; ++j)
        for (int k = 1; k <= n; ++k)
            res.data[i][j] += data[i][k] * rhs.data[k][j];
        return res;
    }
    Matrix pow(long long k) {
        Matrix res, base = *this;
        res.n = n;
        for (int i = 1; i <= n; ++i) res.data[i][i] = 1;
        while (k) {
            if (k & 1) res = res * base;
            base = base * base;
            k >>= 1;
        }
        return res;
    }
};

int main() {
    int n, s, m;
    long long k;
    cin >> n >> s >> m >> k;
    Matrix trans, vec;
    trans.n = vec.n = n;

    // æ„é€ è½¬ç§»çŸ©é˜µ (æ•´åˆæ“ä½œ)
    for (int i = 1; i < n; ++i)
        trans.data[i][i + 1] = 1;
    trans.data[n][1] = 1;
    swap(trans.data[s], trans.data[m]);

    // è¾“å…¥åˆå§‹åºåˆ—
    for (int i = 1; i <= n; ++i)
        cin >> vec.data[1][i];

    Matrix res = vec * trans.pow(k);
    for (int i = 1; i <= n; ++i)
        cout << res.data[1][i] << " ";
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. çŸ©é˜µç±»å°è£…ä¹˜æ³•è¿ç®—ç¬¦å’Œå¿«é€Ÿå¹‚æ–¹æ³•  
2. è½¬ç§»çŸ©é˜µ`trans`åŒæ—¶å®ç°äº¤æ¢+å¹³ç§»ï¼š  
   - æ¬¡å¯¹è§’çº¿`[i][i+1]`å®ç°å¹³ç§»  
   - äº¤æ¢`s/m`åˆ—å®Œæˆä½ç½®äº¤æ¢  
3. è¡Œå‘é‡`vec`å­˜å‚¨åˆå§‹åºåˆ—ï¼Œå³ä¹˜è½¬ç§»çŸ©é˜µ  

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š"é½¿è½®å·¥å‚" - 8-bité£æ ¼çŸ©é˜µè¿ç®—æ¨¡æ‹Ÿ  

**æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
1. **åˆå§‹åŒ–åœºæ™¯**  
   - å·¦ä¾§ï¼š80ä¸ªåƒç´ æ–¹å—è¡¨ç¤ºåˆå§‹æ•°åˆ—ï¼ˆä¸åŒé¢œè‰²ä»£è¡¨å€¼ï¼‰  
   - å³ä¾§ï¼šnÃ—nç½‘æ ¼å±•ç¤ºè½¬ç§»çŸ©é˜µï¼ˆç™½è‰²0/ç»¿è‰²1ï¼‰  

2. **æ“ä½œåˆ†è§£æ¼”ç¤º**  
   ```plaintext
   å¸§1 [äº¤æ¢]ï¼š 
     çº¢è‰²é—ªå…‰èšç„¦ç¬¬s/mä¸ªæ–¹å— â†’ äº¤æ¢ä½ç½®
     éŸ³æ•ˆï¼š8-bit "å®ï¼"
   
   å¸§2 [å¹³ç§»]ï¼š
     è“è‰²ç®­å¤´ä»å·¦å‘å³æ‰«è¿‡ â†’ æ‰€æœ‰æ–¹å—å·¦ç§»ï¼Œé¦–å—è·³è‡³æœ«å°¾
     éŸ³æ•ˆï¼šæ»‘è½¨å£°
   ```

3. **å¿«é€Ÿå¹‚åŠ é€Ÿæ¼”ç¤º**  
   - è‡ªåŠ¨æ¨¡å¼ï¼šé½¿è½®ç»„è‡ªåŠ¨æ—‹è½¬ï¼ˆé€Ÿåº¦å¯è°ƒï¼‰  
   - æ¯å®Œæˆ2â¿æ¬¡æ“ä½œï¼Œä¸­å¤®è®¡æ•°å™¨äº®èµ·æ¯”ç‰¹æµç‰¹æ•ˆ  
   - å®Œæˆæ—¶ï¼šæ‰€æœ‰æ–¹å—è¿¸å‘çƒŸèŠ±ç‰¹æ•ˆ + 16-bitèƒœåˆ©éŸ³æ•ˆ  

**æŠ€æœ¯å®ç°**ï¼š  
- ç”¨Canvasç»˜åˆ¶çŸ©é˜µç½‘æ ¼å’Œåƒç´ æ–¹å—  
- å…³é”®å˜é‡å®æ—¶æ˜¾ç¤ºï¼šå½“å‰æ“ä½œæ¬¡æ•°ï¼ˆäºŒè¿›åˆ¶å½¢å¼ï¼‰  
- äº¤äº’æ§åˆ¶é¢æ¿ï¼šæ­¥è¿›/æš‚åœ/é€Ÿåº¦æ»‘å—/å•å‘¨æœŸæ¨¡å¼  

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
çŸ©é˜µå¿«é€Ÿå¹‚å¯è§£å†³æ‰€æœ‰çº¿æ€§å˜æ¢é—®é¢˜ï¼š  
1. æ–æ³¢é‚£å¥‘æ•°åˆ—åŠ é€Ÿè®¡ç®—  
2. å›¾è®ºä¸­è·¯å¾„è®¡æ•°ï¼ˆé•¿åº¦ä¸ºkçš„è·¯å¾„æ•°ï¼‰  
3. çº¿æ€§é€’æ¨å…³ç³»ï¼ˆå¦‚aâ‚™=paâ‚™â‚‹â‚+qaâ‚™â‚‹â‚‚ï¼‰  

**æ´›è°·æ¨è**ï¼š  
1. **P1939 çŸ©é˜µåŠ é€Ÿæ•°åˆ—**  
   â†’ æŒæ¡åŸºæœ¬çŸ©é˜µæ„é€ æ³•  
2. **P1397 çŸ©é˜µæ¸¸æˆ**  
   â†’ å­¦ä¹ åˆ†å—çŸ©é˜µä¸å¤æ‚å˜æ¢  
3. **P4159 è¿·è·¯**  
   â†’ æ‹“å±•åˆ°å›¾è®ºä¸­çš„çŸ©é˜µåº”ç”¨  

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **zh_douçš„è°ƒè¯•ç»éªŒ**ï¼š  
> "é¦–æ¬¡å®ç°æ—¶å› çŸ©é˜µä¹˜æ³•æ¬¡åºé”™è¯¯WAï¼Œé€šè¿‡æ‰“å°3Ã—3çŸ©é˜µä¸­é—´æ€å¿«é€Ÿå®šä½"  
>   
> **Kayç‚¹è¯„**ï¼š  
> çŸ©é˜µç±»å°è£…`print()`æ–¹æ³•è°ƒè¯•è‡³å…³é‡è¦ï¼Œå»ºè®®å­¦ä¹ æ—¶å…ˆéªŒè¯n=3çš„ç®€å•æƒ…å†µ  

---

**ç»“è¯­**  
é€šè¿‡æœ¬æŒ‡å—ï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡çŸ©é˜µå¿«é€Ÿå¹‚çš„æ ¸å¿ƒæ€æƒ³ã€‚è®°ä½ï¼šç¼–ç¨‹å¦‚é½¿è½®è½¬åŠ¨ï¼Œæ¯ä¸ªé€»è¾‘ç¯ç¯ç›¸æ‰£ã€‚ç»§ç»­æŒ‘æˆ˜ä¸‹ä¸€å…³å§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š126.77ç§’
# é¢˜ç›®ä¿¡æ¯

# [NOI2001] é£Ÿç‰©é“¾

## é¢˜ç›®æè¿°

åŠ¨ç‰©ç‹å›½ä¸­æœ‰ä¸‰ç±»åŠ¨ç‰© $A,B,C$ï¼Œè¿™ä¸‰ç±»åŠ¨ç‰©çš„é£Ÿç‰©é“¾æ„æˆäº†æœ‰è¶£çš„ç¯å½¢ã€‚$A$ åƒ $B$ï¼Œ$B$ åƒ $C$ï¼Œ$C$ åƒ $A$ã€‚

ç°æœ‰ $N$ ä¸ªåŠ¨ç‰©ï¼Œä»¥ $1 \sim N$ ç¼–å·ã€‚æ¯ä¸ªåŠ¨ç‰©éƒ½æ˜¯ $A,B,C$ ä¸­çš„ä¸€ç§ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸çŸ¥é“å®ƒåˆ°åº•æ˜¯å“ªä¸€ç§ã€‚

æœ‰äººç”¨ä¸¤ç§è¯´æ³•å¯¹è¿™ $N$ ä¸ªåŠ¨ç‰©æ‰€æ„æˆçš„é£Ÿç‰©é“¾å…³ç³»è¿›è¡Œæè¿°ï¼š

- ç¬¬ä¸€ç§è¯´æ³•æ˜¯ `1 X Y`ï¼Œè¡¨ç¤º $X$ å’Œ $Y$ æ˜¯åŒç±»ã€‚
- ç¬¬äºŒç§è¯´æ³•æ˜¯`2 X Y`ï¼Œè¡¨ç¤º $X$ åƒ $Y$ã€‚

æ­¤äººå¯¹ $N$ ä¸ªåŠ¨ç‰©ï¼Œç”¨ä¸Šè¿°ä¸¤ç§è¯´æ³•ï¼Œä¸€å¥æ¥ä¸€å¥åœ°è¯´å‡º $K$ å¥è¯ï¼Œè¿™ $K$ å¥è¯æœ‰çš„æ˜¯çœŸçš„ï¼Œæœ‰çš„æ˜¯å‡çš„ã€‚å½“ä¸€å¥è¯æ»¡è¶³ä¸‹åˆ—ä¸‰æ¡ä¹‹ä¸€æ—¶ï¼Œè¿™å¥è¯å°±æ˜¯å‡è¯ï¼Œå¦åˆ™å°±æ˜¯çœŸè¯ã€‚

- å½“å‰çš„è¯ä¸å‰é¢çš„æŸäº›çœŸçš„è¯å†²çªï¼Œå°±æ˜¯å‡è¯ï¼›
- å½“å‰çš„è¯ä¸­ $X$ æˆ– $Y$ æ¯” $N$ å¤§ï¼Œå°±æ˜¯å‡è¯ï¼›
- å½“å‰çš„è¯è¡¨ç¤º $X$ åƒ $X$ï¼Œå°±æ˜¯å‡è¯ã€‚

ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç»™å®šçš„ $N$ å’Œ $K$ å¥è¯ï¼Œè¾“å‡ºå‡è¯çš„æ€»æ•°ã€‚


## è¯´æ˜/æç¤º

å¯¹äºå…¨éƒ¨æ•°æ®ï¼Œ$1\le N\le 5 \times 10^4$ï¼Œ$1\le K \le 10^5$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
100 7
1 101 1
2 1 2
2 2 3
2 3 3
1 1 3
2 3 1
1 5 5
```

### è¾“å‡º

```
3
```

# AIåˆ†æç»“æœ


### Kayçš„C++ç®—æ³•è§£æï¼šé£Ÿç‰©é“¾ æ·±å…¥å­¦ä¹ æŒ‡å—

---

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šç§ç±»å¹¶æŸ¥é›†ï¼ˆæ‰©å±•åŸŸï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³é£Ÿç‰©é“¾é—®é¢˜çš„å…³é”®åœ¨äºè¿ç”¨**æ‰©å±•åŸŸå¹¶æŸ¥é›†**ã€‚è¿™ç§ç®—æ³•å°†æ¯ä¸ªåŠ¨ç‰©æ‹†è§£ä¸ºä¸‰ä¸ªèº«ä»½ï¼šè‡ªèº«ã€çŒç‰©å’Œå¤©æ•Œï¼Œå½¢æˆä¸‰ä¸ªç‹¬ç«‹çš„é›†åˆã€‚æƒ³è±¡ä¸‰ä¸ªå¹³è¡Œå®‡å®™ï¼šè“è‰²å®‡å®™è®°å½•åŒç±»å…³ç³»ï¼Œç»¿è‰²å®‡å®™è®°å½•æ•é£Ÿå…³ç³»ï¼Œçº¢è‰²å®‡å®™è®°å½•å¤©æ•Œå…³ç³»ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œè¿™ç§ç»“æ„å®Œç¾è¡¨è¾¾äº†"AåƒBï¼ŒBåƒCï¼ŒCåƒA"çš„ç¯å½¢å…³ç³»ã€‚

- **æ ¸å¿ƒéš¾ç‚¹**ï¼šéœ€åŒæ—¶ç»´æŠ¤ä¸‰ç§å…³ç³»ï¼ˆåŒç±»/æ•é£Ÿ/å¤©æ•Œï¼‰ã€‚å½“é‡åˆ°"Xå’ŒYåŒç±»"æ—¶ï¼Œéœ€ç¡®ä¿å®ƒä»¬ä¸å­˜åœ¨æ•é£Ÿå…³ç³»ï¼›å½“é‡åˆ°"XåƒY"æ—¶ï¼Œéœ€æ’é™¤åŒç±»æˆ–åå‘æ•é£Ÿçš„å¯èƒ½ã€‚
- **å¯è§†åŒ–è®¾è®¡**ï¼šåœ¨åƒç´ åŠ¨ç”»ä¸­ï¼Œç”¨ä¸‰ç§é¢œè‰²æ–¹å—è¡¨ç¤ºæ¯ä¸ªåŠ¨ç‰©çš„ä¸‰ä¸ªèº«ä»½ã€‚å…³é”®æ“ä½œæ—¶ï¼ˆå¦‚åˆå¹¶é›†åˆï¼‰ï¼Œç”¨é—ªçƒå…‰æ•ˆè¿æ¥å¯¹åº”æ–¹å—ï¼Œå¹¶æ’­æ”¾"æ»´"éŸ³æ•ˆï¼›å‘ç°çŸ›ç›¾æ—¶ï¼Œè§¦å‘çº¢å…‰é—ªçƒå’Œ"å“”"é”™è¯¯éŸ³æ•ˆã€‚

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šSookeï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯æå…·å¯å‘æ€§ï¼Œç”¨"ä¸‰å®‡å®™"æ¯”å–»è§£é‡Šæ‰©å±•åŸŸï¼ˆè‡ªèº«/çŒç‰©/å¤©æ•Œï¼‰ã€‚ä»£ç è§„èŒƒï¼ˆ`fa[find(u)] = find(v)`ï¼‰ï¼Œå˜é‡å‘½åæ¸…æ™°ï¼ˆ`u+n`è¡¨çŒç‰©ï¼‰ã€‚äº®ç‚¹åœ¨äºå°†ç¯å½¢é£Ÿç‰©é“¾è½¬åŒ–ä¸ºæ•°å­¦å…³ç³»ï¼ˆAâ†’Bâ†’Câ†’Aï¼‰ï¼Œå¹¶é€šè¿‡å›¾ç‰‡ç›´è§‚å±•ç¤ºåˆå¹¶è¿‡ç¨‹ã€‚å®è·µä»·å€¼é«˜ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›ã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šæª€é»æ–—Â·ç¥ï¼‰**
* **ç‚¹è¯„**ï¼šä»£ç ç®€æ´é«˜æ•ˆï¼ˆä»…50è¡Œï¼‰ï¼Œåˆ›æ–°æ€§åœ°ç”¨`x, x+n, x+2n`è¡¨ç¤ºè‡ªèº«/çŒç‰©/å¤©æ•Œã€‚äº®ç‚¹æ˜¯å‘ç°"çŒç‰©ç¯"ç‰¹æ€§ï¼ˆxçš„çŒç‰©æ˜¯y â†’ yçš„å¤©æ•Œæ˜¯xï¼‰ï¼Œå¤§å¹…ç®€åŒ–åˆå¹¶é€»è¾‘ã€‚è¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆ`if(x>n||y>n)`ï¼‰ï¼Œæ˜¯ç«èµ›ç¼–ç çš„ä¼˜ç§€èŒƒä¾‹ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šå¤©æ³½é¾Ÿï¼‰**
* **ç‚¹è¯„**ï¼šç‹¬è¾Ÿè¹Šå¾„é‡‡ç”¨å¸¦æƒå¹¶æŸ¥é›†ï¼Œé€šè¿‡æ¨¡3è¿ç®—ï¼ˆ0åŒç±»/1è¢«åƒ/2åƒï¼‰å‹ç¼©ç©ºé—´ã€‚äº®ç‚¹æ˜¯ç”¨å‘é‡å›¾è§£æƒå€¼ä¼ é€’ï¼ˆ`d[x]=(d[x]+d[fa])%3`ï¼‰ï¼Œå¹¶é™„è½¬æ¢è¡¨æ ¼å¸®åŠ©ç†è§£ã€‚è™½å®ç°ç¨å¤æ‚ï¼Œä½†ä¸ºè¿›é˜¶å­¦ä¹ æä¾›æ–°è§†è§’ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **å…³ç³»è¡¨ç¤ºå›°éš¾**  
   *åˆ†æ*ï¼šéœ€åŒæ—¶ç»´æŠ¤åŒç±»/æ•é£Ÿ/å¤©æ•Œä¸‰ç§å…³ç³»ã€‚  
   *è§£å†³*ï¼šæ‰©å±•åŸŸå¹¶æŸ¥é›†å°†åŠ¨ç‰©iæ‹†ä¸ºä¸‰èŠ‚ç‚¹ï¼š`i`(è‡ªèº«)ã€`i+n`(çŒç‰©)ã€`i+2n`(å¤©æ•Œ)
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼šä¸‰åŸŸç»“æ„æ˜¯ç¯å½¢å…³ç³»çš„å®Œç¾æ•°å­¦è¡¨è¾¾

2. **åˆå¹¶é€»è¾‘å¤æ‚**  
   *åˆ†æ*ï¼šåˆå¹¶æ—¶éœ€ä¿è¯ä¸‰ç±»å…³ç³»åŒæ­¥æ›´æ–°  
   *è§£å†³*ï¼š  
   - åŒç±»æ—¶ï¼šåˆå¹¶ `(x,y)`, `(x+n,y+n)`, `(x+2n,y+2n)`  
   - æ•é£Ÿæ—¶ï¼šåˆå¹¶ `(x+n,y)`, `(x,y+2n)`, `(x+2n,y+n)`  
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼š"xåƒy"ç­‰ä»·äº"xçš„çŒç‰©æ˜¯y"+"yçš„å¤©æ•Œæ˜¯x"

3. **å‡è¯åˆ¤å®šæ¡ä»¶å¤š**  
   *åˆ†æ*ï¼šéœ€å¤„ç†è¶Šç•Œã€è‡ªåƒã€å…³ç³»å†²çª  
   *è§£å†³*ï¼š  
   - å…ˆæ£€æŸ¥`x>n||y>n`æˆ–`(op=2&&x=y)`  
   - åŒç±»å†²çªï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æ•é£Ÿ/å¤©æ•Œå…³ç³»  
   - æ•é£Ÿå†²çªï¼šæ£€æŸ¥æ˜¯å¦åŒç±»æˆ–åå‘æ•é£Ÿ  
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼šæ¡ä»¶æ£€æŸ¥é¡ºåºå½±å“æ•ˆç‡ï¼ˆå…ˆæ˜“åéš¾ï¼‰

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **ä¸‰åŸŸæ³•åˆ™**ï¼šæ¯ä¸ªåŠ¨ç‰©æ‹†è§£ä¸º"è‡ªèº«-çŒç‰©-å¤©æ•Œ"ä¸‰ä½ä¸€ä½“
- **åˆå¹¶åŒæ­¥**ï¼šåŒç±»æ—¶ä¸‰åŸŸå¹³è¡Œåˆå¹¶ï¼Œæ•é£Ÿæ—¶å¾ªç¯é“¾æ¥
- **å†²çªé¢„åˆ¤**ï¼šè¶Šç•Œ>è‡ªåƒ>å…³ç³»çŸ›ç›¾çš„ä¸‰çº§æ£€æŸ¥

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°**
```cpp
#include <iostream>
using namespace std;
const int N = 50010 * 3;

int fa[N], n, k, ans;

int find(int x) { 
    return fa[x] == x ? x : fa[x] = find(fa[x]); 
}

void merge(int x, int y) {
    fa[find(x)] = find(y);
}

int main() {
    cin >> n >> k;
    for (int i = 1; i <= 3 * n; i++) fa[i] = i;
    
    while (k--) {
        int op, x, y; 
        cin >> op >> x >> y;
        if (x > n || y > n) { ans++; continue; }
        
        if (op == 1) { // åŒç±»å…³ç³»
            if (find(x + n) == find(y) || find(x + 2 * n) == find(y)) 
                ans++;
            else 
                merge(x, y), 
                merge(x + n, y + n), 
                merge(x + 2 * n, y + 2 * n);
        } else { // æ•é£Ÿå…³ç³»
            if (x == y || find(x) == find(y) || find(x) == find(y + n)) 
                ans++;
            else 
                merge(x + n, y), 
                merge(x + 2 * n, y + n), 
                merge(x, y + 2 * n);
        }
    }
    cout << ans;
}
```
* **è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ä¼˜åŒ–ï¼Œä¸‰åŸŸç»“æ„æ¸…æ™°ä½“ç°è‡ªèº«(`1~n`)ã€çŒç‰©(`n+1~2n`)ã€å¤©æ•Œ(`2n+1~3n`)
* **è§£è¯»æ¦‚è¦**ï¼š  
  - `find()`è·¯å¾„å‹ç¼©ä¿è¯æ•ˆç‡  
  - åŒç±»æ£€æŸ¥ï¼šxçš„çŒç‰©åŸŸæˆ–å¤©æ•ŒåŸŸæ˜¯å¦å«y  
  - æ•é£Ÿæ£€æŸ¥ï¼šxæ˜¯å¦ä¸yåŒç±»æˆ–æ˜¯yçš„çŒç‰©  
  - åˆå¹¶æ“ä½œåŒæ­¥æ›´æ–°ä¸‰åŸŸå…³ç³»

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š8ä½åƒç´ é£æ ¼é£Ÿç‰©é“¾æ¨¡æ‹Ÿå™¨  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šåŠ¨ç‰©å…³ç³»ç½‘ç»œåŠ¨æ€æ„å»º  

| æ­¥éª¤               | å¯è§†åŒ–æ•ˆæœ                          | äº¤äº’é€»è¾‘               |
|--------------------|-----------------------------------|-----------------------|
| åˆå§‹åŒ–             | æ˜¾ç¤ºnä¸ªåŠ¨ç‰©ï¼Œå„å¸¦ä¸‰è‰²æ–¹å—           | æŒ‰ç©ºæ ¼å¼€å§‹æ¼”ç¤º          |
| è¯»å…¥è¯­å¥           | é«˜äº®æ¶‰åŠçš„xå’ŒyåŠ¨ç‰©                | æ–¹å‘é”®é€‰æ‹©è¯­å¥          |
| æ£€æŸ¥å‡è¯æ¡ä»¶       | è¶Šç•Œï¼šåŠ¨ç‰©å˜ç°ï¼›å†²çªï¼šçº¢è‰²é—ªçƒ+éŸ³æ•ˆ | é”™è¯¯æ—¶è‡ªåŠ¨æš‚åœ          |
| åˆå¹¶åŒç±»           | è“æ–¹å—é—´è¿ç»¿çº¿ï¼ŒåŒæ­¥åˆå¹¶ä¸‰è‰²åŸŸ      | å•æ­¥æ‰§è¡Œè§‚å¯Ÿåˆå¹¶ç»†èŠ‚    |
| å»ºç«‹æ•é£Ÿå…³ç³»       | xç»¿æ–¹å—â†’yè“æ–¹å—ï¼Œå½¢æˆä¸‰è§’é—­ç¯       | é¼ æ ‡æ‚¬åœæŸ¥çœ‹å…³ç³»è§£é‡Š    |

**æŠ€æœ¯å®ç°**ï¼š
```javascript
// ä¼ªä»£ç ï¼šç»˜åˆ¶åŠ¨ç‰©èŠ‚ç‚¹
function drawAnimal(id) {
    drawPixel(id*30, 100, BLUE);   // è‡ªèº«(è“)
    drawPixel(id*30, 130, GREEN);  // çŒç‰©(ç»¿)
    drawPixel(id*30, 160, RED);    // å¤©æ•Œ(çº¢)
}

// ä¼ªä»£ç ï¼šåˆå¹¶åŠ¨ç”»
function mergeAnimation(x, y, type) {
    if(type == 'SAME') {
        drawLine(x.blue, y.blue, CYAN); // åŒç±»è“çº¿
        playSound('merge_sound.wav');
    } else {
        drawCurve(x.green, y.blue, ORANGE); // æ•é£Ÿæ›²çº¿
        playSound('eat_sound.wav');
    }
}
```

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **æŠ€å·§è¿ç§»**ï¼šæ‰©å±•åŸŸå¹¶æŸ¥é›†è¿˜å¯ç”¨äºï¼š
   - äºŒåˆ†å›¾æ£€æµ‹ï¼ˆP1330ï¼‰
   - çŸ›ç›¾å…³ç³»æ¨ç†ï¼ˆP1525å…³æŠ¼ç½ªçŠ¯ï¼‰
   - æ—¶ç©ºçŠ¶æ€æ¨¡æ‹Ÿï¼ˆP5837ç‰§è‰é‰´èµï¼‰

2. **æ´›è°·æ¨è**ï¼š
   - `P1525 å…³æŠ¼ç½ªçŠ¯`ï¼šäºŒç»´å…³ç³»åˆ¤å®šï¼Œå·©å›ºæ‰©å±•åŸŸåº”ç”¨
   ``` 
   ğŸ—£ï¸ å°†å›šçŠ¯æ‹†ä¸º"åŒç›‘ç‹±"å’Œ"æ•Œå¯¹ç›‘ç‹±"ä¸¤åŸŸï¼Œä½“éªŒå…³ç³»æ‹†è§£ç²¾é«“
   ```
   - `P1892 å›¢ä¼™`ï¼šåŸºç¡€ç§ç±»å¹¶æŸ¥é›†å…¥é—¨
   ```
   ğŸ—£ï¸ ä»…éœ€"æœ‹å‹/æ•Œäºº"ä¸¤åŸŸï¼Œç†è§£æ‰©å±•åŸŸæ ¸å¿ƒæ€æƒ³
   ```
   - `P1197 æ˜Ÿçƒå¤§æˆ˜`ï¼šå¹¶æŸ¥é›†é€†å‘æ€ç»´è®­ç»ƒ
   ```
   ğŸ—£ï¸ ä»æ¯ç­çŠ¶æ€åå‘é‡å»ºå®‡å®™ï¼Œé”»ç‚¼å…³ç³»ç½‘ç»œç»´æŠ¤èƒ½åŠ›
   ```

---

**ç»“è¯­**ï¼šé£Ÿç‰©é“¾é—®é¢˜é€šè¿‡æ‰©å±•åŸŸå¹¶æŸ¥é›†å°†å¤æ‚å…³ç³»è½¬åŒ–ä¸ºç©ºé—´ç»“æ„ï¼Œæ˜¯ç®—æ³•è®¾è®¡çš„è‰ºæœ¯å…¸èŒƒã€‚è®°ä½ï¼šå½“é—®é¢˜å‘ˆç°ç¯å½¢æˆ–å¤šæ€å…³ç³»æ—¶ï¼Œå°è¯•æ‹†è§£å®ä½“ä¸ºå¤šç»´èº«ä»½ï¼

---
å¤„ç†ç”¨æ—¶ï¼š141.44ç§’
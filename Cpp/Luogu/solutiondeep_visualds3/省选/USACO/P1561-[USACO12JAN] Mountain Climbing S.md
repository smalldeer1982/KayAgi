# é¢˜ç›®ä¿¡æ¯

# [USACO12JAN] Mountain Climbing S

## é¢˜ç›®æè¿°

Farmer John has discovered that his cows produce higher quality milk when they are subject to strenuous exercise.  He therefore decides to send his N cows (1 <= N <= 25,000) to climb up and then back down a nearby mountain!

Cow i takes U(i) time to climb up the mountain and then D(i) time to climb down the mountain.  Being domesticated cows, each cow needs the help of a farmer for each leg of the climb, but due to the poor economy, there are only two farmers available, Farmer John and his cousin Farmer Don.  FJ plans to guide cows for the upward climb, and FD will then guide the cows for the downward climb.  Since every cow needs a guide, and there is only one farmer for each part of the voyage, at most one cow may be climbing upward at any point in time (assisted by FJ), and at most one cow may be climbing down at any point in time (assisted by FD).  A group of cows may temporarily accumulate at the top of the mountain if they climb up and then need to wait for FD's assistance before climbing down.  Cows may climb down in a different order than they climbed up.

Please determine the least possible amount of time for all N cows to make the entire journey.


## æ ·ä¾‹ #1

### è¾“å…¥

```
3
6 4
8 1
2 3```

### è¾“å‡º

```
17```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šMountain Climbing S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`è´ªå¿ƒç®—æ³• + ä»»åŠ¡è°ƒåº¦ä¼˜åŒ–`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è¿™é“é¢˜å°±åƒæŒ‡æŒ¥ä¸¤æ”¯ç™»å±±é˜Ÿï¼ˆä¸Šå±±é˜Ÿå’Œä¸‹å±±é˜Ÿï¼‰åä½œå®Œæˆç™»å±±ä»»åŠ¡ã€‚å…³é”®åœ¨äº**åˆç†å®‰æ’ç‰›çš„ä¸Šä¸‹å±±é¡ºåº**ï¼Œé¿å…å†œå¤«ç©ºé—²ç­‰å¾…ã€‚  
> - æ ¸å¿ƒæ€è·¯ï¼šå°†ç‰›åˆ†ä¸ºä¸¤ç±»ï¼šâ‘ ä¸Šå±±å¿«ä¸‹å±±æ…¢ï¼ˆuâ‰¤dï¼‰æŒ‰uå‡åºæ’ï¼›â‘¡ä¸‹å±±å¿«ä¸Šå±±æ…¢ï¼ˆu>dï¼‰æŒ‰dé™åºæ’ã€‚ç¬¬ä¸€ç±»ä¼˜å…ˆå¤„ç†  
> - éš¾ç‚¹ï¼šé¿å…å±±é¡¶"æ–­æµ"ï¼ˆä¸‹å±±é˜Ÿç­‰ç‰›ï¼‰å’Œå±±è„š"å µå¡"ï¼ˆä¸Šå±±é˜Ÿç§¯å‹ï¼‰  
> - å¯è§†åŒ–è®¾è®¡ï¼šç”¨åƒç´ æ–¹å—è¡¨ç¤ºç‰›ï¼Œç»¿è‰²ï¼ˆuâ‰¤dï¼‰å’Œçº¢è‰²ï¼ˆu>dï¼‰åŒºåˆ†ã€‚åŠ¨ç”»å°†å±•ç¤ºï¼š  
>   â‘  æ’åºåé˜Ÿåˆ—ç”Ÿæˆ â‘¡ æ—¶é—´è½´ä¸Šå±±/ä¸‹å±±è¿›åº¦æ¡ â‘¢ å…³é”®æ—¶é—´ç‚¹é«˜äº®ï¼ˆå¦‚max(ç´¯è®¡u,ä¸‹å±±æ—¶é—´)ï¼‰  
>   â‘£ å¤å¤éŸ³æ•ˆï¼šä¸Šå±±"å®"ã€ä¸‹å±±"å’š"ã€å®Œæˆæ—¶8-bitèƒœåˆ©æ—‹å¾‹

---

#### ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆKirinï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°æŒ‡å‡ºåŸå…¬å¼ç¼ºé™·ï¼Œå¼•ç”¨USACOå®˜æ–¹è§£æ³•ã€‚ä»£ç ç»“æ„è§„èŒƒï¼ˆCowç»“æ„ä½“å°è£…æ’åºé€»è¾‘ï¼‰ï¼Œç®—æ³•æœ‰æ•ˆæ€§é«˜ï¼ˆO(n)æ¨¡æ‹Ÿï¼‰ï¼Œå®è·µä»·å€¼å¼ºï¼ˆç›´æ¥ACï¼‰ã€‚äº®ç‚¹ï¼šä¸¥è°¨åˆ†ç±»æ€æƒ³+è¾¹ç•Œå¤„ç†ã€‚  

**é¢˜è§£äºŒï¼ˆPP__ï¼‰**  
* **ç‚¹è¯„**ï¼šåŒå¾ªç¯åˆ†ç¦»u/dè®¡ç®—æå‡å¯è¯»æ€§ï¼Œå˜é‡å‘½åç›´è§‚ï¼ˆup_tm/dwn_tmï¼‰ã€‚ç®—æ³•ä¼˜åŒ–åˆ°ä½ï¼ˆinplaceæ’åºçœå†…å­˜ï¼‰ï¼Œå®è·µå‚è€ƒæ€§å¼ºã€‚äº®ç‚¹ï¼šç”¨æ•°å­¦å…¬å¼æè¿°çŠ¶æ€è½¬ç§»ã€‚  

**é¢˜è§£ä¸‰ï¼ˆUnordered_OIerï¼‰**  
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§ç”¨"å±±é¡¶è“„æ°´"æ¯”å–»è§£é‡Šæ’é˜Ÿç­–ç•¥ï¼Œä»£ç æ¨¡å—åŒ–ï¼ˆgreedy()ç‹¬ç«‹å‡½æ•°ï¼‰ã€‚äº®ç‚¹ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹`f_i=max(f_{i-1},Î£u_i)+d_i`ç›´å‡»æœ¬è´¨ã€‚

---

#### æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹1ï¼šå¦‚ä½•ç§‘å­¦åˆ†ç±»ç‰›ç¾¤ï¼Ÿ**  
   *åˆ†æ*ï¼šå¿…é¡»ä¸¥æ ¼åŒºåˆ†uâ‰¤dï¼ˆä¼˜å…ˆå¤„ç†ï¼‰å’Œu>dçš„ç‰›ã€‚ä¼˜è´¨è§£ç”¨`cow[i].up<cow[i].dwn`åˆ¤æ–­ï¼Œé¿å…é”™è¯¯å½’ç±»  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†ç±»æ˜¯è´ªå¿ƒåŸºç¡€ï¼Œuâ‰¤dçš„ç‰›æ˜¯"ç¼“å†²å™¨"ä¿è¯ä¸‹å±±è¿ç»­æ€§  

2. **éš¾ç‚¹2ï¼šæ’åºè§„åˆ™çš„è®¾è®¡**  
   *åˆ†æ*ï¼šç¬¬ä¸€ç±»æŒ‰uå‡åºï¼ˆå¿«é€Ÿå¡«å……å±±é¡¶ï¼‰ï¼Œç¬¬äºŒç±»æŒ‰dé™åºï¼ˆå»¶é•¿ä¸‹å±±çª—å£ï¼‰ã€‚å…³é”®å˜é‡ï¼šå½“å‰ç´¯è®¡uæ—¶é—´ã€ä¸‹å±±å®Œæˆæ—¶é—´  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šuå‡åº=å‡å°‘å±±è„šç­‰å¾…ï¼Œdé™åº=é¿å…å±±é¡¶æ–­æµ  

3. **éš¾ç‚¹3ï¼šæ—¶é—´æ¨¡æ‹Ÿçš„åŒæ­¥**  
   *åˆ†æ*ï¼šä¸‹å±±å¼€å§‹æ—¶é—´å–`max(å½“å‰uç´¯è®¡å€¼, å‰ç‰›ä¸‹å±±å®Œæˆæ—¶é—´)`ï¼Œç¡®ä¿å†œå¤«ä¸ç©ºé—²  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ—¶é—´è½´éœ€æ¨¡æ‹Ÿä¸¤é˜Ÿåˆ—ï¼šä¸Šå±±æµæ°´çº¿ vs ä¸‹å±±é˜»å¡é˜Ÿåˆ—  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **åŒé˜Ÿåˆ—æ€ç»´**ï¼šå°†ä»»åŠ¡æ‹†è§£ä¸ºç‹¬ç«‹ä½†è€¦åˆçš„ä¸Šå±±/ä¸‹å±±åºåˆ—  
- **æ»šåŠ¨å˜é‡ä¼˜åŒ–**ï¼šç”¨`sum_u`æ›¿ä»£æ•°ç»„å­˜å‚¨ç´¯è®¡æ—¶é—´ï¼ŒèŠ‚çœç©ºé—´  
- **è¾¹ç•Œé˜²å¾¡**ï¼šåˆå§‹åŒ–`dwn_tm[0]=0`é¿å…é¦–å…ƒç´ è¶Šç•Œ  

---

#### C++æ ¸å¿ƒä»£ç å®ç°èµæ
```cpp
#include <iostream>
#include <algorithm>
using namespace std;

struct Cow { int up, dwn; };
const int MAXN = 25005;
Cow cow[MAXN];
int n, up_sum, dwn_time;

bool cmp(Cow a, Cow b) {
    if(a.up <= a.dwn) 
        return (b.up > b.dwn) ? true : a.up < b.up;
    else 
        return (b.up <= b.dwn) ? false : a.dwn > b.dwn;
}

int main() {
    cin >> n;
    for(int i=1; i<=n; ++i) cin >> cow[i].up >> cow[i].dwn;
    sort(cow+1, cow+n+1, cmp);
    
    for(int i=1; i<=n; ++i) {
        up_sum += cow[i].up;          // ç´¯åŠ ä¸Šå±±æ—¶é—´
        dwn_time = max(dwn_time, up_sum) + cow[i].dwn; // å…³é”®åŒæ­¥ç‚¹
    }
    cout << dwn_time;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. ç»“æ„ä½“å°è£…ç‰›å±æ€§  
2. è‡ªå®šä¹‰æ’åºå®ç°åˆ†ç±»è§„åˆ™  
3. å•æ¬¡éå†åŒæ­¥æ›´æ–°åŒæ—¶é—´è½´  
4. æ—¶é—´å¤æ‚åº¦O(n)ç©ºé—´O(1)  

---

#### ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
* **ä¸»é¢˜**ï¼š8-bitç‰§åœºæ¨¡æ‹Ÿå™¨ï¼ˆFCç‰§åœºç‰©è¯­é£æ ¼ï¼‰  
* **æ ¸å¿ƒæ¼”ç¤º**ï¼š  
  ```mermaid
  graph LR
    A[ç‰›ç¾¤åƒç´ ç²¾çµ] --> B{åˆ†ç±»å™¨}
    B -->|uâ‰¤d| C[ç»¿è‰²ç‰›ï¼šæŒ‰uå‡åº]
    B -->|u>d| D[çº¢è‰²ç‰›ï¼šæŒ‰dé™åº]
    C --> E[æ—¶é—´è½´è½¨é“]
    D --> E
    E --> F[å±±è„šï¼šå†œå¤«Aå·¥ä½œåŒº]
    F --> G((å±±é¡¶ç¼“å†²åŒº))
    G --> H[å±±è…°ï¼šå†œå¤«Bå·¥ä½œåŒº]
  ```
* **åŠ¨æ€æ•ˆæœ**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šåƒç´ ç‰›æŒ‰ç±»å˜è‰²ï¼Œæ’åºåŠ¨ç”»ï¼ˆå†’æ³¡æ•ˆæœ+éŸ³æ•ˆï¼‰  
  2. **ä¸Šå±±é˜¶æ®µ**ï¼š  
     - ç»¿è‰²ç‰›é€ä¸ªç§»è‡³å±±è„šï¼Œuè¿›åº¦æ¡å¢é•¿  
     - å±±é¡¶ä»“åº“å †ç§¯åƒç´ ç‰›ï¼ˆæ¯å¤´ç‰›æ˜¾ç¤ºu/då€¼ï¼‰  
  3. **ä¸‹å±±åŒæ­¥**ï¼š  
     - çº¢è‰²ç‰›ä»ä»“åº“æ»‘å‡ºæ—¶ï¼Œè§¦å‘`max( )`åˆ¤æ–­ï¼š  
       - è‹¥ä»“åº“ç©ºï¼šé—ªçƒè­¦å‘Š+æ€¥ä¿ƒéŸ³  
       - æ­£å¸¸ï¼šå†œå¤«Bå¤´é¡¶æ˜¾ç¤ºè®¡æ—¶å™¨  
  4. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
     - æ¯å®Œæˆ5å¤´ç‰›æ‰è½é‡‘å¸ï¼ˆå¾—åˆ†ï¼‰  
     - é€šå…³æ—¶æ”¾çƒŸèŠ±+èƒœåˆ©BGM  

---

#### æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
1. **æ´›è°· P2123**ï¼šçš‡åæ¸¸æˆï¼ˆåŒæ¬¾è´ªå¿ƒç­–ç•¥å˜å½¢ï¼‰  
2. **æ´›è°· P1248**ï¼šåŠ å·¥ç”Ÿäº§è°ƒåº¦ï¼ˆåŒæµæ°´çº¿åŠ å¼ºç‰ˆï¼‰  
3. **æ´›è°· P1561**ï¼šä¸‰å€ç»éªŒå·©å›ºç»ƒä¹   

---

#### å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **Kirinçš„è°ƒè¯•ç»éªŒ**ï¼š"è¢«Hackçš„æ•°æ®è®©æˆ‘æ„è¯†åˆ°ï¼Œè´ªå¿ƒå¿…é¡»ç”¨ä¸¥æ ¼æ•°å­¦å½’çº³è¯æ˜ï¼Œä¸èƒ½ä¾èµ–ç›´è§‰"  
> **Kayæ€»ç»“**ï¼šå¤šæ„é€ è¾¹ç•Œæ•°æ®æµ‹è¯•ï¼ˆå¦‚å…¨uâ‰¤dã€å…¨u>dæ··åˆï¼‰ï¼Œç”¨`cout`æ‰“å°ä¸­é—´çŠ¶æ€æ˜¯è°ƒè¯•åˆ©å™¨  

---
é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡ä»»åŠ¡è°ƒåº¦ç±»è´ªå¿ƒçš„æ ¸å¿ƒæ€æƒ³ã€‚è®°ä½ï¼šå¥½ç®—æ³•=ç§‘å­¦åˆ†ç±»+ç²¾ç»†æ¨¡æ‹Ÿï¼ä¸‹æ¬¡ç™»å±±æ—¶ï¼Œè®°å¾—ç”¨è¿™ä¸ªç®—æ³•æŒ‡æŒ¥ä½ çš„å¥¶ç‰›å“¦~ ğŸ„â›°ï¸

---
å¤„ç†ç”¨æ—¶ï¼š85.03ç§’
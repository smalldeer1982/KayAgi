# é¢˜ç›®ä¿¡æ¯

# [USACO07JAN] Cow School G

## é¢˜ç›®æè¿°

Bessy is going to school and doing well. She has taken N (1 â‰¤ N â‰¤ 5000 -- except one case where 1 â‰¤ N â‰¤ 50,000) tests and recorded the scores (Ti points out of Pi points for test i; 0 â‰¤ Ti â‰¤ Pi < 40,000; 0 < Pi) as this task's input.

Her teacher will drop the D tests with the lowest percentage (Tiâ„Pi) before calculating Bessie's final grade (which is the sum of the remaining test score points over the sum of the remaining total test points). Bessy is good at math and quickly realizes that this does not benefit her as much as it might.

To prove her point, Bessy wants to find all values of D for which she could have ended up with a higher grade by choosing to drop different tests than the teacher would have. Help her by finding and printing all values of D for which this is possible.

Bessy has noted that, amazingly, she has never scored the same percentage on two different tests.

ä¸€ä¸ªäººå‚åŠ äº† $N$ åœºè€ƒè¯•ï¼Œç¬¬ $i$ åœºæ»¡åˆ†ä¸º $P_i$ï¼Œå…¶å¾—åˆ†ä¸º $T_i$ã€‚ç°åœ¨è¦åˆ å»å…¶ä¸­ $D$ æ¬¡è€ƒè¯•çš„æˆç»©ï¼Œç”¨å‰©ä¸‹çš„æ€»å¾—åˆ†é™¤ä»¥å‰©ä¸‹çš„æ»¡åˆ†ä¹‹å’Œï¼Œä½œä¸ºå…¶æœ€ç»ˆæˆç»©ã€‚é—®å¯¹äºå“ªäº› $D$ è€Œè¨€ï¼Œåˆ é™¤å¾—åˆ†æ¯”ï¼ˆå³ $\dfrac{T_i}{P_i}$ï¼‰æœ€å°çš„ $D$ åœºå¾—åˆ°çš„æœ€ç»ˆæˆç»©ä¸æ˜¯æœ€ä¼˜çš„ï¼ˆç”¨å…¶ä»–æ–¹æ³•å¯ä»¥å¾—åˆ°æ›´é«˜çš„æœ€ç»ˆæˆç»©ï¼‰ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5
1 2
5 9
3 8
4 10
1 3```

### è¾“å‡º

```
2
1
2```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šCow School G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`åˆ†æ•°è§„åˆ’`ä¸`å†³ç­–å•è°ƒæ€§ä¼˜åŒ–`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è§£å†³"ç‰›æ ¡"é¢˜ç›®çš„æ ¸å¿ƒåœ¨äºå°†æˆç»©ä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸º**åˆ†æ•°è§„åˆ’æ¨¡å‹**ï¼Œç»“åˆæ–œç‡ä¼˜åŒ–å®ç°é«˜æ•ˆæ±‚è§£ã€‚ç®€å•æ¥è¯´ï¼Œå°±åƒåœ¨å¤šä¸ªåˆ†æ•°ä¸­æ‰¾å‡ºæœ€ä½³ç»„åˆï¼Œä½¿æ€»æˆç»©æœ€é«˜ã€‚  
> - å…³é”®æ€è·¯ï¼šå°†åŸé—®é¢˜è½¬åŒ–ä¸ºæ¯”è¾ƒäº¤æ¢å…ƒç´ çš„æ”¶ç›Šï¼ˆ`T_i*T_d - S_d*P_i`ï¼‰ï¼Œé€šè¿‡åˆ†æ²»ç­–ç•¥é«˜æ•ˆè®¡ç®—æå€¼  
> - éš¾ç‚¹ï¼šåŠ¨æ€æ–œç‡å˜åŒ–å¯¼è‡´ç›´æ¥è®¡ç®—å¤æ‚åº¦é«˜ï¼Œéœ€ç”¨å†³ç­–å•è°ƒæ€§åˆ†æ²»æˆ–CDQåˆ†æ²»ä¼˜åŒ–  
> - å¯è§†åŒ–è®¾è®¡ï¼šç”¨åƒç´ ç½‘æ ¼å±•ç¤ºè€ƒè¯•åˆ†å¸ƒï¼ˆæ¨ªè½´P_iï¼Œçºµè½´T_iï¼‰ï¼ŒåŠ¨æ€ç»˜åˆ¶å‡¸åŒ…æ„å»ºè¿‡ç¨‹ã€‚åœ¨åˆ†æ²»é˜¶æ®µï¼Œå·¦åŒºé—´ç‚¹å˜ç»¿è‰²ï¼Œå³åŒºé—´ç‚¹å˜è“è‰²ï¼Œå‡¸åŒ…è¿çº¿ç”¨é»„è‰²é—ªçƒåŠ¨ç”»ï¼ŒæŸ¥è¯¢æ‰«æçº¿ç”¨çº¢è‰²è¡¨ç¤ºï¼Œå…³é”®æ¯”è¾ƒæ­¥éª¤è§¦å‘8-bitéŸ³æ•ˆ  

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆjavalyc - CDQåˆ†æ²»ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°åº¦ â˜…â˜…â˜…â˜…â˜…  
  å·§å¦™å°†åˆ†æ•°è§„åˆ’è½¬åŒ–ä¸ºå‡¸åŒ…æŸ¥è¯¢é—®é¢˜ï¼Œè¯¦ç»†æ¨å¯¼äº†æ–œç‡ä¼˜åŒ–è¿‡ç¨‹ã€‚ä»£ç è§„èŒƒæ€§æå¼ºï¼ˆå˜é‡å`st/sp`å«ä¹‰æ˜ç¡®ï¼‰ï¼Œé‡‡ç”¨CDQåˆ†æ²»å¤„ç†éå•è°ƒæ€§é—®é¢˜ï¼Œé€»è¾‘ä¸¥è°¨ã€‚ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–åˆ°O(n)ï¼Œç‰¹åˆ«é€‚åˆå¤§å‹æ•°æ®é›†å®è·µ  
  äº®ç‚¹ï¼šå®Œæ•´æ³¨é‡Š+æ•°å­¦æ¨å¯¼ï¼Œåšå®¢æä¾›é¢å¤–å­¦ä¹ èµ„æº  

**é¢˜è§£äºŒï¼ˆjyz666 - å†³ç­–å•è°ƒæ€§åˆ†æ²»ï¼‰**  
* **ç‚¹è¯„**ï¼šç®—æ³•æœ‰æ•ˆæ€§ â˜…â˜…â˜…â˜…â˜†  
  ç”¨æ›´ç®€çŸ­çš„ä»£ç å®ç°å†³ç­–å•è°ƒæ€§åˆ†æ²»ï¼Œæ ¸å¿ƒå‡½æ•°ä»…15è¡Œã€‚è™½è§£é‡Šè¾ƒå°‘ä½†ä»£ç è‡ªæ–‡æ¡£åŒ–å¼ºï¼ˆå¦‚`getf()`å‡½æ•°ï¼‰ï¼Œå®è·µä»·å€¼é«˜ã€‚æ—¶é—´å¤æ‚åº¦O(n log n)ä¸CDQåˆ†æ²»ç›¸å½“ï¼Œä½†å¸¸æ•°æ›´å°  
  äº®ç‚¹ï¼šä»£ç æè‡´ç®€æ´ï¼Œé€‚åˆç«èµ›å¿«é€Ÿå®ç°  

**é¢˜è§£ä¸‰ï¼ˆHenry__Chen - æ–œç‡ä¼˜åŒ–ï¼‰**  
* **ç‚¹è¯„**ï¼šå®è·µä»·å€¼ â˜…â˜…â˜…â˜…â˜†  
  ç»“åˆå•è°ƒé˜Ÿåˆ—ç»´æŠ¤å‡¸åŒ…ï¼Œé€šè¿‡é¢„æ’åºä¿è¯æ–œç‡å•è°ƒæ€§ã€‚ä»£ç åŒ…å«å®Œæ•´å½’å¹¶æ’åºå®ç°ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ã€‚äº®ç‚¹æ˜¯æŒ‡æ ‡å…¬å¼`T_i*T_d - S_d*P_i`çš„å‡ ä½•æ„ä¹‰è§£é‡Šï¼Œå¸®åŠ©ç†è§£æ–œç‡ä¼˜åŒ–æœ¬è´¨  

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **åˆ†æ•°è§„åˆ’è½¬åŒ–**  
   * **åˆ†æ**ï¼šéœ€ä»æˆç»©æ¯”è¾ƒä¸­æŠ½è±¡å‡º`Ta_j - Sb_j > Ta_i - Sb_i`çš„ä¸ç­‰å¼ï¼Œä¼˜è´¨é¢˜è§£é€šè¿‡äº¤å‰ç›¸ä¹˜æ¶ˆåˆ†æ¯å®ç°  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ•°è§„åˆ’æ ¸å¿ƒæ˜¯æ„é€ çº¿æ€§å‡½æ•°æ¯”è¾ƒ  

2. **åŠ¨æ€æ–œç‡å¤„ç†**  
   * **åˆ†æ**ï¼šæ–œç‡`k=T_d/S_d`éšDé€’å‡ï¼Œä½†æ¨ªåæ ‡ä¸å•è°ƒã€‚CDQåˆ†æ²»å…ˆæ’åºå·¦åŒºé—´å»ºå‡¸åŒ…ï¼Œå³åŒºé—´äºŒåˆ†æŸ¥è¯¢ï¼›å†³ç­–å•è°ƒæ€§åˆ†æ²»åˆ™é€’å½’ç¼©å°å†³ç­–èŒƒå›´  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¨ªåæ ‡æ— åºæ—¶ï¼Œåˆ†æ²»æ›¿ä»£å•è°ƒé˜Ÿåˆ—  

3. **å‡¸åŒ…ç»´æŠ¤æ–¹å‘**  
   * **åˆ†æ**ï¼šæ±‚`f(d)`éœ€ä¸‹å‡¸åŒ…ï¼ˆæœ€å°å€¼ï¼‰ï¼Œ`g(d)`éœ€ä¸Šå‡¸åŒ…ï¼ˆæœ€å¤§å€¼ï¼‰ã€‚Henryè§£æ³•é€šè¿‡`slope()`æ¯”è¾ƒç¡®ä¿æ­£ç¡®æ–¹å‘  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‡¸åŒ…ç±»å‹ä¸é—®é¢˜æœ€å€¼æ–¹å‘ä¸¥æ ¼å¯¹åº”  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é—®é¢˜è½¬åŒ–**ï¼šå°†å¤æ‚ä¼˜åŒ–è½¬ä¸ºåˆ†æ•°è§„åˆ’æ¨¡å‹  
- **å‡ ä½•æ€ç»´**ï¼šå°†ä»£æ•°å¼è§†ä½œå¹³é¢ç‚¹é›†ï¼Œåˆ©ç”¨å‡¸åŒ…æ€§è´¨ä¼˜åŒ–  
- **åˆ†æ²»åº”ç”¨**ï¼šå¯¹éå•è°ƒæ•°æ®é‡‡ç”¨CDQ/å†³ç­–å•è°ƒæ€§åˆ†æ²»  
- **è¾¹ç•Œé˜²å¾¡**ï¼šåˆå§‹åŒ–æå€¼`INF/-INF`é¿å…è¾¹ç•Œé”™è¯¯  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆå†³ç­–å•è°ƒæ€§åˆ†æ²»ç‰ˆï¼‰**  
```cpp
void getf(int l, int r, int dl, int dr) {
    int mid = (l + r) >> 1, dm = dl;
    f[mid] = INF;
    for (int i = dl; i <= min(mid, dr); i++) {
        ll val = sp[mid] * a[i].t - st[mid] * a[i].p;
        if (val < f[mid]) f[mid] = val, dm = i; // æ›´æ–°å†³ç­–ç‚¹
    }
    if (l < mid) getf(l, mid - 1, dl, dm);    // å·¦å­åŒºé—´
    if (r > mid) getf(mid + 1, r, dm, dr);     // å³å­åŒºé—´
}
```
* **è¯´æ˜**ï¼šç»¼åˆè‡ªjyz666é¢˜è§£ï¼Œä½“ç°å†³ç­–å•è°ƒæ€§åˆ†æ²»ç²¾é«“  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. å¯¹æ¯ä¸ªæŸ¥è¯¢åŒºé—´`[l,r]`å®šä½ä¸­ç‚¹`mid`  
  2. åœ¨å†³ç­–åŒºé—´`[dl,dr]`æš´åŠ›æœç´¢æœ€ä¼˜å†³ç­–ç‚¹  
  3. æ ¹æ®å†³ç­–ç‚¹å•è°ƒæ€§é€’å½’å­åŒºé—´  

**é¢˜è§£ä¸€èµæï¼ˆCDQåˆ†æ²»ï¼‰**  
```cpp
// å‡¸åŒ…ç»´æŠ¤æ ¸å¿ƒ
while (R > 1 && Cross(T[i] - T[Q[R - 1]], T[Q[R]] - T[Q[R - 1]]) <= 0) 
    R--; // å¼¹å‡ºéå‡¸ç‚¹
Q[++R] = i; // å…¥æ ˆæ–°ç‚¹
```
* **äº®ç‚¹**ï¼šç”¨å‰ç§¯é¿å…æµ®ç‚¹è¯¯å·®  
* **å­¦ä¹ ç¬”è®°**ï¼šå‘é‡å‰ç§¯>0è¡¨ç¤ºé€†æ—¶é’ˆæ—‹è½¬ï¼Œç»´æŠ¤ä¸‹å‡¸åŒ…æ—¶éœ€ä¿è¯è¿ç»­å‰ç§¯â‰¤0  

**é¢˜è§£äºŒèµæï¼ˆå†³ç­–å•è°ƒæ€§ï¼‰**  
```cpp
void solveMax(int l, int r, int dl, int dr) {
    int mid = (l + r) >> 1, u = dl;
    for (int i = dl; i <= dr; i++) {
        ll tmp = sp[mid] * a[i].t - st[mid] * a[i].p;
        if (tmp > g[mid]) g[mid] = tmp, u = i; // æ›´æ–°æœ€å¤§å€¼
    }
    if (l < mid) solveMax(l, mid - 1, dl, u); // å…³é”®ï¼å†³ç­–åŒºé—´æ”¶ç¼©
}
```
* **äº®ç‚¹**ï¼šå†³ç­–åŒºé—´éšåˆ†æ²»å±‚çº§æ”¶ç¼©  
* **å­¦ä¹ ç¬”è®°**ï¼š`u`ä½œä¸ºåˆ†ç•Œç‚¹ä¿è¯å†³ç­–å•è°ƒæ€§  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
* **ä¸»é¢˜**ï¼š8-bité£æ ¼å‡¸åŒ…å»ºé€ è€…  
* **æ ¸å¿ƒæ¼”ç¤º**ï¼š  
  ![](https://assets.leetcode.com/uploads/2019/10/20/sample_4_1728.png)  
  > å›¾ï¼šå‡¸åŒ…æ„å»ºè¿‡ç¨‹ç¤ºæ„å›¾ï¼ˆå®é™…åŠ¨ç”»ä¸ºåŠ¨æ€ï¼‰

  **åŠ¨ç”»æµç¨‹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šåƒç´ ç½‘æ ¼ä¸­ï¼Œè€ƒè¯•åŒ–ä¸ºå½©è‰²æ–¹å—ï¼ˆçº¢ï¼šè¢«åˆ è€ƒè¯•ï¼Œè“ï¼šä¿ç•™è€ƒè¯•ï¼‰  
  2. **åˆ†æ²»é˜¶æ®µ**ï¼š  
     - å·¦åŒºé—´ç‚¹å˜ç»¿ï¼ŒæŒ‰xæ’åºè¿‡ç¨‹å±•ç¤ºä¸ºå†’æ³¡åŠ¨ç”»  
     - å‡¸åŒ…æ„å»ºï¼šè¿æ¥ç‚¹æ—¶è§¦å‘"å®"éŸ³æ•ˆï¼Œéå‡¸ç‚¹å¼¹å‡ºæ—¶çˆ†ç‚¸ç‰¹æ•ˆ  
  3. **æŸ¥è¯¢é˜¶æ®µ**ï¼š  
     - å³åŒºé—´ç‚¹å˜ç´«ï¼Œæ‰«æçº¢çº¿ï¼ˆå½“å‰æ–œç‡ï¼‰åœ¨å‡¸åŒ…ç§»åŠ¨  
     - å‘½ä¸­æœ€ä¼˜è§£æ—¶ï¼Œè¿çº¿é—ªçƒé‡‘è‰²ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆ  
  4. **äº¤äº’æ§åˆ¶**ï¼š  
     - æ­¥è¿›æŒ‰é’®ï¼šç©ºæ ¼é”®å•æ­¥æ‰§è¡Œ  
     - é€Ÿåº¦æ»‘å—ï¼š0.5x~5xè°ƒé€Ÿ  
     - 3Dè§†è§’ï¼šå³é”®æ‹–æ‹½æ—‹è½¬å‡¸åŒ…  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
* **æ€è·¯è¿ç§»**ï¼š  
  1. æœ€ä¼˜æ¯”ç‡ç”Ÿæˆæ ‘ï¼ˆPOJ 2728ï¼‰  
  2. èƒŒåŒ…åˆ†æ•°è§„åˆ’ï¼ˆæ´›è°·P4377ï¼‰  
  3. å¸¦æƒä¸­ä½æ•°ä¼˜åŒ–ï¼ˆCF 1486Eï¼‰  

* **æ´›è°·æ¨è**ï¼š  
  1. **P4377** - è¯æ˜ï¼šç»ƒä¹ 01åˆ†æ•°è§„åˆ’åŸºç¡€åº”ç”¨  
  2. **P3199** - åœˆæ£€æµ‹ï¼šå­¦ä¹ è´Ÿç¯åˆ¤æ–­ç»“åˆåˆ†æ•°è§„åˆ’  
  3. **P5785** - ä»»åŠ¡å®‰æ’ï¼šå·©å›ºæ–œç‡ä¼˜åŒ–å˜å½¢  

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **å‚è€ƒç»éªŒ**ï¼ˆjavalycï¼‰ï¼š  
> "è°ƒè¯•å‡¸åŒ…æ—¶ï¼Œå‰ç§¯æ–¹å‘åˆ¤æ–­é”™è¯¯å¯¼è‡´å‡¸åŒ…åå‘äº†ã€‚å»ºè®®ç”¨`(a.x*b.y - b.x*a.y)`æ ‡å‡†å‰ç§¯å…¬å¼ï¼Œå¹¶ç”»å›¾éªŒè¯æ—‹è½¬æ–¹å‘"  
>   
> **ç‚¹è¯„**ï¼šå‡¸åŒ…æ–¹å‘æ˜¯å¸¸è§é”™è¯¯ç‚¹ï¼Œåˆå­¦è€…åº”ç”¨å°æ•°æ®é›†éªŒè¯å‰ç§¯ç¬¦å·ä¸å‡¸åŒ…ç±»å‹å…³ç³»  

--- 
> æŒæ¡åˆ†æ•°è§„åˆ’+åˆ†æ²»ä¼˜åŒ–çš„ç»„åˆæ‹³ï¼Œä½ å°±èƒ½åœ¨æˆç»©ä¼˜åŒ–ç±»é—®é¢˜ä¸­æ¸¸åˆƒæœ‰ä½™ï¼ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œè®°å¾—å…ˆé—®è‡ªå·±ï¼šæ–œç‡æ˜¯å¦å•è°ƒï¼Ÿæ¨ªåæ ‡æ˜¯å¦æœ‰åºï¼Ÿé€‰æ‹©åˆé€‚çš„åˆ†æ²»ç­–ç•¥æ˜¯å…³é”®ï¼ ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š186.94ç§’
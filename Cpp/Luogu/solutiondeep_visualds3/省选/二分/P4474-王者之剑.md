# é¢˜ç›®ä¿¡æ¯

# ç‹è€…ä¹‹å‰‘

## é¢˜ç›®æè¿°

![https://cdn.luogu.com.cn/upload/pic/17920.png](https://cdn.luogu.com.cn/upload/pic/17920.png)  

è¿™æ˜¯åœ¨é˜¿å°”æ‰˜åˆ©äºšÂ·æ½˜å¾·æ‹‰è´¡æˆä¸ºè‹±çµå‰çš„äº‹æƒ…ï¼Œå¥¹æ­£è¦å»æ‹”å‡ºçŸ³ä¸­å‰‘æˆä¸ºäºšç‘Ÿç‹ï¼Œåœ¨è¿™ä¹‹å‰å¥¹è¦å»æ”¶é›†ä¸€äº›å®çŸ³ã€‚

å®çŸ³æ’åˆ—åœ¨ä¸€ä¸ª $n \times m$ çš„ç½‘æ ¼ä¸­ï¼Œæ¯ä¸ªç½‘æ ¼ä¸­æœ‰ä¸€å—ä»·å€¼ä¸º $v_{i,j}$ çš„å®çŸ³ï¼Œé˜¿å°”æ‰˜åˆ©äºšÂ·æ½˜å¾·æ‹‰è´¡å¯ä»¥é€‰æ‹©è‡ªå·±çš„èµ·ç‚¹ã€‚

å¼€å§‹æ—¶åˆ»ä¸º $0$ ç§’ã€‚ä»¥ä¸‹æ“ä½œï¼Œæ¯ç§’æŒ‰é¡ºåºæ‰§è¡Œã€‚

1. åœ¨ç¬¬ $i$ ç§’å¼€å§‹çš„æ—¶å€™ï¼Œé˜¿å°”æ‰˜åˆ©äºšÂ·æ½˜å¾·æ‹‰è´¡åœ¨æ–¹æ ¼ $(x,y)$ ä¸Šï¼Œå¥¹å¯ä»¥æ‹¿èµ° $(x, y)$ ä¸­çš„å®çŸ³ã€‚
2. åœ¨å¶æ•°ç§’ï¼Œé˜¿å°”æ‰˜åˆ©äºšÂ·æ½˜å¾·æ‹‰è´¡å‘¨å›´å››æ ¼çš„å®çŸ³ä¼šæ¶ˆå¤±ã€‚
3. è‹¥é˜¿å°”æ‰˜åˆ©äºšÂ·æ½˜å¾·æ‹‰è´¡ç¬¬ $i$ ç§’å¼€å§‹æ—¶åœ¨æ–¹æ ¼ $(x,y)$ ä¸Šï¼Œåˆ™åœ¨ç¬¬ $i+1$ ç§’å¯ä»¥ç«‹å³ç§»åŠ¨åˆ° $(x+1,y),(x,y+1),(x-1,y)$ æˆ– $(x, y- 1)$ ä¸Šï¼Œä¹Ÿå¯ä»¥åœç•™åœ¨ï¼ˆ$x,y)$ ä¸Šã€‚


æ±‚é˜¿å°”æ‰˜åˆ©äºšÂ·æ½˜å¾·æ‹‰è´¡æœ€å¤šå¯ä»¥è·å¾—å¤šå°‘ä»·å€¼çš„å®çŸ³

## è¯´æ˜/æç¤º

å§šé‡‘å®‡çš„åŸåˆ›é¢˜ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 2
1 2
2 1```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šç‹è€…ä¹‹å‰‘ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š**ç½‘ç»œæµå»ºæ¨¡ä¸æœ€å°å‰²ï¼ˆäºŒåˆ†å›¾æœ€å¤§ç‚¹æƒç‹¬ç«‹é›†ï¼‰**

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³"ç‹è€…ä¹‹å‰‘"çš„å…³é”®åœ¨äºå°†ç½‘æ ¼é—®é¢˜è½¬åŒ–ä¸º**äºŒåˆ†å›¾æœ€å¤§ç‚¹æƒç‹¬ç«‹é›†**é—®é¢˜ã€‚æƒ³è±¡ç½‘æ ¼æ˜¯å›½é™…è±¡æ£‹æ£‹ç›˜ï¼Œé»‘æ ¼å’Œç™½æ ¼äº’ä¸å¹²æ‰°ï¼ˆå¦‚åŒæ•Œå¯¹é˜µè¥ï¼‰ã€‚æ¯æ¬¡å–å®çŸ³å¦‚åŒæ”¾ç½®æ£‹å­ï¼Œä½†ç›¸é‚»æ£‹å­ä¼šäº’ç›¸æ”»å‡»ï¼æˆ‘ä»¬é€šè¿‡é»‘ç™½æŸ“è‰²ï¼ˆåæ ‡å’Œå¥‡å¶æ€§åˆ†ç±»ï¼‰ï¼Œå°†é»‘ç‚¹è¿æºç‚¹ï¼Œç™½ç‚¹è¿æ±‡ç‚¹ï¼Œç›¸é‚»ç‚¹è¿æ— é™è¾¹ï¼Œæ„å»ºç½‘ç»œæµæ¨¡å‹ã€‚æœ€å°å‰²çš„è¾¹å¯¹åº”æ”¾å¼ƒçš„å®çŸ³ï¼Œæ€»ä»·å€¼å‡æœ€å°å‰²å°±æ˜¯æœ€ä¼˜è§£ã€‚

- **æ ¸å¿ƒéš¾ç‚¹**ï¼šè¯æ˜ä»»æ„ç‹¬ç«‹é›†éƒ½æœ‰åˆæ³•è¡Œèµ°æ–¹æ¡ˆï¼ˆé¢˜è§£ä¸€ç”¨æ„é€ æ³•è§£å†³ï¼‰
- **å¯è§†åŒ–è®¾è®¡**ï¼šåƒç´ åŠ¨ç”»å°†ç”¨é—ªçƒçº¢å…‰è¡¨ç¤ºè¢«å‰²è¾¹ï¼ˆæ”¾å¼ƒçš„å®çŸ³ï¼‰ï¼Œè“å…‰è¡¨ç¤ºç‹¬ç«‹é›†å®çŸ³ï¼ŒæµåŠ¨çº¿æ¡å±•ç¤ºç½‘ç»œæµã€‚å¤å¤éŸ³æ•ˆï¼ˆå‰²è¾¹"å’”åš“"ï¼Œå–å®çŸ³"å®"ï¼‰å¢å¼ºè®°å¿†ã€‚

---

### ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆRemiliaScar1etï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯ä¸¥è°¨åº¦æ»¡åˆ†ï¼è¯¦ç»†è¯æ˜äº†ç‹¬ç«‹é›†ä¸å¯è¡Œæ–¹æ¡ˆçš„ç­‰ä»·æ€§ï¼ˆæ„é€ è¡Œèµ°è·¯å¾„ï¼‰ï¼Œä»£ç è§„èŒƒï¼šâ‘  å˜é‡å`f[i]`çŠ¶æ€æ•°ç»„å«ä¹‰æ˜ç¡® â‘¡ Dinicå®ç°å«å¼§ä¼˜åŒ– â‘¢ è¾¹ç•Œå¤„ç†å‘¨å…¨ã€‚äº®ç‚¹ï¼šå°†å­¦æœ¯è¯æ˜ï¼ˆèƒ¡ä¼¯æ¶›è®ºæ–‡æ€æƒ³ï¼‰è½¬åŒ–ä¸ºæ˜“æ‡‚çš„å›¾ç¤ºï¼Œå®è·µä»·å€¼æé«˜ï¼Œç«èµ›å¯ç›´æ¥å¤ç”¨ã€‚

**é¢˜è§£äºŒï¼ˆVenusM1nTï¼‰**  
* **ç‚¹è¯„**ï¼šç›´å‡»é—®é¢˜æœ¬è´¨ï¼Œæ•é”å‘ç°ä¸æ–¹æ ¼å–æ•°é—®é¢˜çš„ç­‰ä»·æ€§ã€‚ä»£ç äº®ç‚¹ï¼šâ‘  å½“å‰å¼§ä¼˜åŒ–Dinic â‘¡ æ¸…æ™°çš„ä¸‰æ®µå¼ç»“æ„ï¼ˆå»ºå›¾â†’è®¡ç®—â†’è¾“å‡ºï¼‰â‘¢ é”™è¯¯è°ƒè¯•å¿ƒå¾—ï¼ˆflowå˜é‡ä½¿ç”¨ï¼‰æå…·å‚è€ƒæ€§ã€‚è™½è¯æ˜è¾ƒå°‘ï¼Œä½†ä»£ç ç®€æ´é«˜æ•ˆï¼Œé€‚åˆå¿«é€ŸæŒæ¡ã€‚

**é¢˜è§£ä¸‰ï¼ˆpkh68ï¼‰**  
* **ç‚¹è¯„**ï¼šæä¾›EKç®—æ³•å®ç°ï¼Œè™½æ•ˆç‡è¾ƒä½ï¼ˆO(nmÂ²)ï¼‰ï¼Œä½†ä»£ç æ›´æ˜“ç†è§£ã€‚äº®ç‚¹ï¼šâ‘  è¯¦ç»†æ³¨é‡Š â‘¡ å°è¯•Dinicå®ç°ï¼ˆè™½æœªæˆåŠŸï¼‰å±•ç¤ºè°ƒè¯•è¿‡ç¨‹ â‘¢ å˜é‡å‘½åè¶£å‘³æ€§ï¼ˆExcaliburç­‰ï¼‰ã€‚æ¨èåˆå­¦è€…ä»æ­¤å…¥æ‰‹ï¼Œå†è¿ç§»åˆ°Dinicã€‚

---

### æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹ï¼šç½‘æ ¼é—®é¢˜è½¬åŒ–ä¸ºäºŒåˆ†å›¾**  
   * **åˆ†æ**ï¼šé€šè¿‡`(i+j)&1`è¿›è¡Œé»‘ç™½æŸ“è‰²ï¼Œç›¸åŒé¢œè‰²ç‚¹æ— å†²çªï¼ˆå¦‚æ£‹ç›˜é»‘æ ¼ä¸ç›´æ¥ç›¸é‚»ï¼‰ã€‚å…³é”®å˜é‡`(i,j)`æ˜ å°„ä¸ºèŠ‚ç‚¹ç¼–å·`(i-1)*m+j`ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæŸ“è‰²æ˜¯ç½‘æ ¼é—®é¢˜è½¬äºŒåˆ†å›¾çš„é€šç”¨æŠ€å·§ï¼

2. **éš¾ç‚¹ï¼šç†è§£æœ€å°å‰²ä¸ç‹¬ç«‹é›†å…³ç³»**  
   * **åˆ†æ**ï¼šæœ€å°å‰²çš„è¾¹å¯¹åº”æ”¾å¼ƒçš„å®çŸ³ã€‚è‹¥å‰²æ‰æºç‚¹â†’é»‘ç‚¹çš„è¾¹ï¼Œè¡¨ç¤ºæ”¾å¼ƒè¯¥é»‘ç‚¹å®çŸ³ï¼›å‰²æ‰ç™½ç‚¹â†’æ±‡ç‚¹çš„è¾¹ï¼Œè¡¨ç¤ºæ”¾å¼ƒè¯¥ç™½ç‚¹å®çŸ³ã€‚æ— é™è¾¹ä¿è¯ç›¸é‚»ç‚¹ä¸è¢«åŒæ—¶é€‰æ‹©ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœ€å°å‰²å€¼ = æ”¾å¼ƒå®çŸ³æ€»ä»·å€¼ï¼Œç‹¬ç«‹é›†å€¼ = æ€»ä»·å€¼ - æœ€å°å‰²ã€‚

3. **éš¾ç‚¹ï¼šè¾¹ç•Œå¤„ç†ä¸ä¼˜åŒ–**  
   * **åˆ†æ**ï¼šä¼˜è´¨é¢˜è§£å‡æ£€æŸ¥ç½‘æ ¼è¾¹ç•Œï¼ˆ`if(xx>=1&&xx<=n)`ï¼‰ã€‚Dinicçš„å¼§ä¼˜åŒ–ï¼ˆ`cur[]`æ•°ç»„ï¼‰å°†æ•ˆç‡ä»O(nÂ²m)æå‡è‡³O(nmâˆšn)ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç½‘æ ¼é—®é¢˜åŠ¡å¿…æ£€æŸ¥å››æ–¹å‘ç§»åŠ¨çš„è¾¹ç•Œï¼

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **é—®é¢˜åˆ†è§£**ï¼šå°†"ä¸èƒ½ç›¸é‚»"è½¬åŒ–ä¸ºå›¾è®ºç‹¬ç«‹é›†  
- **ä»£ç æ¨¡å—åŒ–**ï¼šåˆ†ç¦»ç½‘ç»œæµæ¨¡å—ï¼ˆDinicï¼‰ä¸ä¸»é€»è¾‘  
- **é€†å‘æ€ç»´**ï¼šæ€»ä»·å€¼å‡æœ€å°å‰²æ¯”ç›´æ¥æ±‚æœ€å¤§ç‹¬ç«‹é›†æ›´æ˜“å®ç°  
- **è°ƒè¯•æŠ€å·§**ï¼šå°è§„æ¨¡ç½‘æ ¼æ¨¡æ‹Ÿï¼ˆ2x2ï¼‰éªŒè¯è¾¹ç•Œé€»è¾‘

---

### C++æ ¸å¿ƒä»£ç å®ç°èµæ
```cpp
// é€šç”¨æ ¸å¿ƒä»£ç ï¼ˆç»¼åˆé¢˜è§£ä¸€/äºŒä¼˜åŒ–ç‰ˆï¼‰
#include <cstring>
#include <queue>
using namespace std;
const int N=1e4+10, M=6e4+10, INF=1e9;

int n,m,S,T,tot,head[N],cur[N],d[N],q[N];
struct Edge{int to,next,cap;} e[M<<1];

void add(int u,int v,int cap){
    e[tot]={v,head[u],cap}; head[u]=tot++;
    e[tot]={u,head[v],0};   head[v]=tot++;
}

bool bfs(){ /* æ ‡å‡†Dinic BFSåˆ†å±‚ */ }

int dfs(int u,int flow){ /* å¸¦å¼§ä¼˜åŒ–çš„DFSå¯»å¢å¹¿è·¯ */ }

int dinic(){ /* è°ƒç”¨bfså’Œdfs */ }

int main(){
    scanf("%d%d",&n,&m);
    S=0, T=n*m+1; 
    memset(head,-1,sizeof head);
    int sum=0, dx[]={0,1,0,-1}, dy[]={1,0,-1,0};

    for(int i=1;i<=n;i++)
    for(int j=1;j<=m;j++){
        int x; scanf("%d",&x); sum += x;
        int id=(i-1)*m+j;
        if((i+j)&1){  // é»‘ç‚¹ï¼šè¿æºç‚¹
            add(S,id,x);
            for(int k=0;k<4;k++){ // å››æ–¹å‘è¿ç™½ç‚¹
                int nx=i+dx[k], ny=j+dy[k];
                if(nx<1||nx>n||ny<1||ny>m) continue;
                add(id, (nx-1)*m+ny, INF); 
            }
        } 
        else add(id,T,x); // ç™½ç‚¹ï¼šè¿æ±‡ç‚¹
    }
    printf("%d",sum - dinic());
}
```

**é¢˜è§£ä¸€æ ¸å¿ƒç‰‡æ®µèµæ**  
```cpp
// é»‘ç™½æŸ“è‰²å»ºå›¾ç‰‡æ®µ
if((i+j)&1){
    add(S,index_(i,j),x); // é»‘ç‚¹â†’æºç‚¹
    for(int k=0;k<4;k++)  // å››æ–¹å‘è¿è¾¹
        add(index_(i,j),index_(nx,ny),INF); 
}
else add(index_(i,j),T,x); // ç™½ç‚¹â†’æ±‡ç‚¹
```
* **äº®ç‚¹**ï¼šç”¨ä½è¿ç®—é«˜æ•ˆæŸ“è‰²ï¼Œå››æ–¹å‘è¿è¾¹ä½“ç°ç½‘æ ¼ç‰¹æ€§
* **å­¦ä¹ ç¬”è®°**ï¼š`INF`ä¿è¯ç›¸é‚»ç‚¹å†²çªæ—¶ä¼šå‰²æ‰ç‚¹æƒè¾¹è€Œéæ­¤è¾¹

---

### ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š8ä½åƒç´ é£ã€Šå®çŸ³éª‘å£«ã€‹é—¯å…³  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šDinicç®—æ³•åœ¨ç½‘æ ¼ä¸Šçš„æœ€å°å‰²è¿‡ç¨‹  

1. **åœºæ™¯åˆå§‹åŒ–**  
   - ç½‘æ ¼åƒç´ åŒ–ï¼ˆé»‘ç‚¹æ·±è“ï¼Œç™½ç‚¹æµ…è“ï¼Œæº/æ±‡ç‚¹é‡‘è‰²ï¼‰  
   - æ§åˆ¶é¢æ¿ï¼šæ­¥è¿›/æš‚åœ/è°ƒé€Ÿæ»‘å—ï¼ˆå¤å¤æ¸¸æˆæŒ‰é’®ï¼‰  
   - èƒŒæ™¯éŸ³ä¹ï¼š8-bité£æ ¼å¾ªç¯BGM  

2. **å…³é”®å¸§æ¼”ç¤º**  
   | æ­¥éª¤ | è§†è§‰è¡¨ç° | éŸ³æ•ˆ | æ—ç™½ |
   |---|---|---|---|
   | BFSåˆ†å±‚ | ç½‘æ ¼æŒ‰è·ç¦»æ³›ä¸åŒå…‰æ™• | æ°´æ»´å£° | "åˆ’åˆ†æˆ˜åœºå±‚çº§..." |
   | DFSå¢å¹¿ | é»„è‰²æµåŠ¨çº¿æ¡æ˜¾ç¤ºå¢å¹¿è·¯å¾„ | æ»‘åŠ¨å£° | "å‘ç°å¢å¹¿è·¯ï¼" |
   | å‰²è¾¹ | è¢«å‰²è¾¹é—ªçƒçº¢å…‰ï¼Œå¯¹åº”å®çŸ³å˜ç° | ç¢è£‚å£° | "æ”¾å¼ƒæ­¤å®çŸ³ä»¥ä¿å¤§å±€" |
   | ç‹¬ç«‹é›† | æœ€ç»ˆç‹¬ç«‹é›†å®çŸ³æŒç»­é—ªçƒç»¿å…‰ | èƒœåˆ©éŸ³æ•ˆ | "æœ€ä¼˜è§£è¾¾æˆï¼" |

3. **äº¤äº’è®¾è®¡**  
   - **AIæ¼”ç¤ºæ¨¡å¼**ï¼šè‡ªåŠ¨æ’­æ”¾ï¼ˆé€Ÿåº¦å¯è°ƒï¼‰å¦‚è´ªåƒè›‡AIå¯»è·¯  
   - **å…³å¡è®¾è®¡**ï¼šæ¯å®Œæˆä¸€ä¸ªDFSé˜¶æ®µå³"å°å…³é€šå…³"  
   - **è°ƒè¯•æ¨¡å¼**ï¼šæš‚åœæ—¶é«˜äº®å½“å‰å¼§æŒ‡é’ˆ`cur[u]`

---

### æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **é€šç”¨æŠ€å·§è¿ç§»**  
   ç½‘æ ¼ç‹¬ç«‹é›†é—®é¢˜ä¸‰å˜ç§ï¼š  
   - éšœç¢ç‰©åœºæ™¯ï¼ˆP4304 [TJOI2013]æ”»å‡»è£…ç½®ï¼‰  
   - å¤šé™åˆ¶æ¡ä»¶ï¼ˆP3355 éª‘å£«å…±å­˜é—®é¢˜ï¼‰  
   - å¹³é¢å›¾æœ€å°å‰²ï¼ˆP4001 [ICPC-Beijing]ç‹¼æŠ“å…”å­ï¼‰

2. **æ¨èç»ƒä¹ **  
   1. **æ´›è°·P2774** æ–¹æ ¼å–æ•°é—®é¢˜  
      â†’ *åŒå€ç»éªŒï¼Œç›´æ¥å¥—ç”¨æœ¬é¢˜ä»£ç *  
   2. **æ´›è°·P5030** é•¿è„–å­é¹¿æ”¾ç½®  
      â†’ *æ‹“å±•åˆ°ä¸è§„åˆ™ç§»åŠ¨ï¼Œå·©å›ºæŸ“è‰²æ€æƒ³*  
   3. **æ´›è°·P4001** [ICPC]ç‹¼æŠ“å…”å­  
      â†’ *ç»ƒä¹ å¹³é¢å›¾æœ€å°å‰²è½¬åŒ–*

---

### å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **RemiliaScar1etçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"æœ€åˆåœ¨DFSå›æº¯æ—¶é”™è¯¯æ›´æ–°`cur`æŒ‡é’ˆï¼Œå¯¼è‡´æ¼å¢å¹¿è·¯ã€‚é€šè¿‡æ‰“å°åˆ†å±‚å›¾å‘ç°å±‚çº§æ–­è£‚"*  
>  
> **Kayæ€»ç»“**ï¼š  
> ç½‘ç»œæµè°ƒè¯•æ ¸å¿ƒï¼š  
> 1. å°è§„æ¨¡æ•°æ®æ¨¡æ‹Ÿï¼ˆ2x2ç½‘æ ¼ï¼‰  
> 2. å¯è§†åŒ–åˆ†å±‚å›¾ï¼ˆ`dep[]`æ•°ç»„ï¼‰  
> 3. å½“å‰å¼§é‡ç½®æ£€æŸ¥ï¼ˆ`cur[]`åˆå§‹åŒ–ä½ç½®ï¼‰  
> å½“ç®—æ³•å¡ä½æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥è¿™äº›ç‚¹ï¼

---

é€šè¿‡æœ¬æŒ‡å—ï¼Œæˆ‘ä»¬ä¸ä»…æŒæ¡äº†ç½‘ç»œæµå»ºæ¨¡çš„é­”æ³•ï¼Œæ›´å­¦ä¼šäº†åƒéª‘å£«è§„åˆ’å¾é€”èˆ¬æ€è€ƒç®—æ³•ç­–ç•¥ã€‚ä¸‹æ¬¡å½“ä½ é¢å¯¹ç½‘æ ¼éš¾é¢˜æ—¶ï¼Œè®°å¾—ï¼šæŸ“è‰²å»ºå›¾â†’æœ€å°å‰²â†’ç‹¬ç«‹é›†ï¼ç»§ç»­æŒ‘æˆ˜å§å°‘å¹´ä»¬ï¼Œä½ ç¦»ç®—æ³•éª‘å£«çš„æ¡‚å† ä»…ä¸€æ­¥ä¹‹é¥ï¼ğŸ’ªğŸ»

---
å¤„ç†ç”¨æ—¶ï¼š185.06ç§’
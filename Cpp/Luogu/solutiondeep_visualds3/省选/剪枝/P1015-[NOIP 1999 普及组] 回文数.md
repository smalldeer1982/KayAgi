# é¢˜ç›®ä¿¡æ¯

# [NOIP 1999 æ™®åŠç»„] å›æ–‡æ•°

## é¢˜ç›®æè¿°

è‹¥ä¸€ä¸ªæ•°ï¼ˆé¦–ä½ä¸ä¸ºé›¶ï¼‰ä»å·¦å‘å³è¯»ä¸ä»å³å‘å·¦è¯»éƒ½ä¸€æ ·ï¼Œæˆ‘ä»¬å°±å°†å…¶ç§°ä¹‹ä¸ºå›æ–‡æ•°ã€‚

ä¾‹å¦‚ï¼šç»™å®šä¸€ä¸ªåè¿›åˆ¶æ•° $56$ï¼Œå°† $56$ åŠ  $65$ï¼ˆå³æŠŠ $56$ ä»å³å‘å·¦è¯»ï¼‰ï¼Œå¾—åˆ° $121$ æ˜¯ä¸€ä¸ªå›æ–‡æ•°ã€‚

åˆå¦‚ï¼šå¯¹äºåè¿›åˆ¶æ•° $87$ï¼š

STEP1ï¼š$87+78=165$  
STEP2ï¼š$165+561=726$  
STEP3ï¼š$726+627=1353$   
STEP4ï¼š$1353+3531=4884$  

åœ¨è¿™é‡Œçš„ä¸€æ­¥æ˜¯æŒ‡è¿›è¡Œäº†ä¸€æ¬¡ $N$ è¿›åˆ¶çš„åŠ æ³•ï¼Œä¸Šä¾‹æœ€å°‘ç”¨äº† $4$ æ­¥å¾—åˆ°å›æ–‡æ•° $4884$ã€‚

å†™ä¸€ä¸ªç¨‹åºï¼Œç»™å®šä¸€ä¸ª $N$ï¼ˆ$2 \le N \le 10$ æˆ– $N=16$ï¼‰è¿›åˆ¶æ•° $M$ï¼ˆ$100$ ä½ä¹‹å†…ï¼‰ï¼Œæ±‚æœ€å°‘ç»è¿‡å‡ æ­¥å¯ä»¥å¾—åˆ°å›æ–‡æ•°ã€‚å¦‚æœåœ¨ $30$ æ­¥ä»¥å†…ï¼ˆåŒ…å« $30$ æ­¥ï¼‰ä¸å¯èƒ½å¾—åˆ°å›æ–‡æ•°ï¼Œåˆ™è¾“å‡º `Impossible!`ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
10
87
```

### è¾“å‡º

```
STEP=4
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šå›æ–‡æ•° æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†æNOIP 1999æ™®åŠç»„çš„ç»å…¸é¢˜ç›®ã€Šå›æ–‡æ•°ã€‹ã€‚è¿™é“é¢˜è€ƒå¯ŸNè¿›åˆ¶ä¸‹çš„æ•°å­—æ“ä½œèƒ½åŠ›ï¼Œè¦æ±‚é€šè¿‡æ¨¡æ‹Ÿåè½¬ç›¸åŠ è¿‡ç¨‹å¯»æ‰¾å›æ–‡æ•°ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ æŒæ¡æ ¸å¿ƒç®—æ³•é€»è¾‘å’Œè§£é¢˜æŠ€å·§ã€‚

---

### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ¨¡æ‹Ÿåº”ç”¨` + `é«˜ç²¾åº¦è¿ç®—`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äºæ¨¡æ‹ŸNè¿›åˆ¶ä¸‹çš„æ•°å­—åè½¬ç›¸åŠ è¿‡ç¨‹ï¼Œç±»ä¼¼ç©æ‹¼å›¾æ¸¸æˆâ€”â€”æ¯æ¬¡å°†æ•°å­—é•œåƒç¿»è½¬åä¸åŸæ•°æ‹¼æ¥ï¼ˆNè¿›åˆ¶åŠ æ³•ï¼‰ï¼Œç›´åˆ°å½¢æˆå¯¹ç§°çš„å›æ–‡å›¾æ¡ˆã€‚  
> - **æ ¸å¿ƒéš¾ç‚¹**ï¼šå¤„ç†16è¿›åˆ¶çš„å­—æ¯è½¬æ¢ï¼ˆA-Fï¼‰å’ŒNè¿›åˆ¶çš„è¿›ä½è§„åˆ™
> - **è§£æ³•æ ¸å¿ƒ**ï¼šç”¨æ•°ç»„å­˜å‚¨æ•°å­—ä½ï¼Œå®ç°ä¸‰ä¸ªæ¨¡å—ï¼šæ•°å­—è½¬æ¢ã€åè½¬ç›¸åŠ ã€å›æ–‡åˆ¤æ–­
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåƒç´ ç½‘æ ¼ä¸­æ•°å­—ä½ç”¨ä¸åŒé¢œè‰²æ–¹å—è¡¨ç¤ºï¼ŒåŠ æ³•æ—¶è§¦å‘ï¼š
>   - **ä½æ“ä½œ**ï¼šå½“å‰ä½é—ªçƒé»„è‰²ï¼Œè¿›ä½æ—¶çº¢è‰²è„‰å†²
>   - **æ•°æ®ç»“æ„**ï¼šæ•°ç»„ç”¨æ¨ªå‘åƒç´ æ¡å±•ç¤ºï¼Œå›æ–‡æ£€æŸ¥æ—¶åŒæŒ‡é’ˆç»¿è‰²æ‰«æçº¿
>   - **æ¸¸æˆåŒ–**ï¼šFCéŸ³æ•ˆï¼ˆæŒ‰é”®"æ»´"ã€è¿›ä½"å˜Ÿ"ã€èƒœåˆ©"å®å’š"ï¼‰ï¼Œæ­¥æ•°ä½œä¸ºå…³å¡ç§¯åˆ†

---

### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆHaishuï¼‰**  
* **ç‚¹è¯„**ï¼šé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå°†æ•°å­—è½¬æ¢ã€åè½¬ç›¸åŠ ã€å›æ–‡åˆ¤æ–­å°è£…ä¸ºç‹¬ç«‹å‡½æ•°ã€‚äº®ç‚¹åœ¨äºä¸¥è°¨çš„è¾¹ç•Œå¤„ç†ï¼ˆå¦‚`l+=2`é¢„åˆ¤è¿›ä½ç©ºé—´ï¼‰å’Œè‡ªçœä»£ç è§„èŒƒï¼ˆå˜é‡å`l`è¡¨é•¿åº¦ï¼‰ã€‚ä»£ç å¯ç›´æ¥ç§»æ¤åˆ°ç«èµ›åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯å¯¹16è¿›åˆ¶`A-F`çš„è½¬æ¢å¤„ç†å ªç§°æ•™ç§‘ä¹¦çº§ã€‚

**é¢˜è§£äºŒï¼ˆStrong_Jellyï¼‰**  
* **ç‚¹è¯„**ï¼šç»“æ„æ¸…æ™°å¦‚ä¹é«˜ç§¯æœ¨ï¼Œé«˜ç²¾åŠ ã€åè½¬ã€åˆ¤æ–­ä¸‰å‡½æ•°åˆ†ç«‹ã€‚æœ€å¤§äº®ç‚¹æ˜¯ç”¨`w[]`æ˜¾å¼å­˜å‚¨åè½¬æ•°ç»„ï¼Œä½¿Nè¿›åˆ¶è¿›ä½é€»è¾‘ä¸€ç›®äº†ç„¶ï¼ˆ`a[i+1] += a[i]/n`ï¼‰ï¼Œåˆå­¦è€…ä¹Ÿèƒ½ç›´è§‚ç†è§£"æ»¡Nè¿›1"çš„æ ¸å¿ƒæœºåˆ¶ã€‚

**é¢˜è§£ä¸‰ï¼ˆhawa130ï¼‰**  
* **ç‚¹è¯„**ï¼šå·§å¦™è¿ç”¨STLçš„`reverse`ç®€åŒ–åè½¬æ“ä½œï¼Œå°†16è¿›åˆ¶è½¬æ¢æµ“ç¼©ä¸ºå•è¡Œä¸‰ç›®è¿ç®—ï¼ˆ`ch>='A'? ch-55:ch-'0'`ï¼‰ã€‚äº®ç‚¹æ˜¯ä»£ç æç®€å´å®Œæ•´è¦†ç›–åŠŸèƒ½ï¼Œä½“ç°C++æ ‡å‡†åº“çš„å®æˆ˜ä»·å€¼ã€‚

---

### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **éš¾ç‚¹ï¼šNè¿›åˆ¶è¿›ä½æ§åˆ¶**  
   * **åˆ†æ**ï¼šä¸åŒäºåè¿›åˆ¶ï¼Œéœ€åŠ¨æ€è®¡ç®—è¿›ä½å€¼ï¼ˆå¦‚16è¿›åˆ¶é€¢16è¿›1ï¼‰ã€‚ä¼˜è´¨é¢˜è§£å‡é‡‡ç”¨åŒå¾ªç¯ï¼šå…ˆé€ä½ç›¸åŠ ï¼Œå†ç»Ÿä¸€å¤„ç†è¿›ä½
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¿›ä½=å½“å‰å’Œ/Nï¼Œä½™æ•°=å½“å‰å’Œ%N

2. **éš¾ç‚¹ï¼š16è¿›åˆ¶å­—æ¯è½¬æ¢**  
   * **åˆ†æ**ï¼šå­—æ¯A-Féœ€æ˜ å°„ä¸ºæ•°å­—10-15ã€‚Strong_Jellyç”¨åˆ†æ”¯å¤„ç†ï¼Œhawa130ç”¨ASCIIè¿ç®—ï¼ˆ`ch-'A'+10`ï¼‰æ›´é«˜æ•ˆ
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå­—æ¯è½¬æ•°å­—=å­—ç¬¦-55ï¼ˆ'A'çš„ASCIIä¸º65ï¼‰

3. **éš¾ç‚¹ï¼šå›æ–‡åˆ¤æ–­ä¼˜åŒ–**  
   * **åˆ†æ**ï¼šåŒæŒ‡é’ˆæ¯”å…¨ä¸²åè½¬æ›´é«˜æ•ˆã€‚Haishuæ–¹æ¡ˆåœ¨`l/2`å¤„æå‰ç»ˆæ­¢æ£€æŸ¥
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå›æ–‡æ£€æŸ¥åªéœ€éå†å‰ä¸€åŠ

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **æ¨¡å—åŒ–ç¼–ç¨‹**ï¼šæ‹†åˆ†ä¸ºinit()ã€add()ã€isPalindrome()ä¸‰ä¸ªå‡½æ•°  
- **è¿›ä½é¢„åˆ¤**ï¼šç›¸åŠ å‰é¢„ç•™2ä½ç©ºé—´é˜²æº¢å‡º  
- **å³æ—¶è½¬æ¢**ï¼šè¾“å…¥æ—¶ç«‹å³å°†å­—æ¯è½¬æ•°å­—ï¼Œç®€åŒ–è¿ç®—é€»è¾‘  
- **è¾¹ç•Œé˜²å¾¡**ï¼šæ£€æŸ¥æœ€é«˜ä½è¿›ä½ï¼ˆå¦‚`if(a[l+1]>0) l++`ï¼‰

---

### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**é€šç”¨æ ¸å¿ƒå®ç°**  
```cpp
#include <cstring>
#include <iostream>
using namespace std;

const int MAXL = 105;
int n, len, num[MAXL], rev[MAXL];

void init(string s) {
    len = s.length();
    for (int i = 0; i < len; i++) {
        char c = s[i];
        num[i] = (c >= 'A') ? (c - 'A' + 10) : (c - '0');
    }
}

void add() {
    // åè½¬å‰¯æœ¬
    for (int i = 0; i < len; i++) rev[i] = num[len - 1 - i];
    
    // é€ä½ç›¸åŠ 
    for (int i = 0; i < len; i++) {
        num[i] += rev[i];
        if (num[i] >= n) {  // Nè¿›åˆ¶è¿›ä½æ£€æµ‹
            num[i + 1]++;
            num[i] -= n;
        }
    }
    if (num[len]) len++;  // æœ€é«˜ä½è¿›ä½å¤„ç†
}

bool isPalindrome() {
    for (int i = 0; i < len / 2; i++)
        if (num[i] != num[len - 1 - i]) return false;
    return true;
}

int main() {
    string s;
    cin >> n >> s;
    init(s);
    for (int step = 0; step <= 30; step++) {
        if (isPalindrome()) {
            cout << "STEP=" << step;
            return 0;
        }
        add();
    }
    cout << "Impossible!";
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
- `init`å¤„ç†16è¿›åˆ¶è½¬æ¢ï¼Œå­—æ¯æ˜ å°„ä¸ºæ•°å­—  
- `add`å®ç°åè½¬ç›¸åŠ å’ŒNè¿›åˆ¶è¿›ä½  
- `isPalindrome`åŒæŒ‡é’ˆé«˜æ•ˆåˆ¤æ–­å›æ–‡  
- ä¸»å¾ªç¯30æ­¥å†…å³æ—¶é€€å‡º

**é¢˜è§£ç‰‡æ®µèµæ**  
1. **Haishuçš„è¿›ä½é¢„åˆ†é…**  
   ```cpp
   l += 2;  // é¢„åˆ†é…è¿›ä½ç©ºé—´
   for (int i = 0; i < l; i++) {
       if (c[i] >= n) {
           c[i+1]++; 
           c[i] -= n;
       }
   }
   while (!c[l-1]) l--;  // æ”¶ç¼©å‰å¯¼é›¶
   ```
   * **äº®ç‚¹**ï¼šé¢„åˆ†é…ç©ºé—´é¿å…æº¢å‡º  
   * **å­¦ä¹ ç¬”è®°**ï¼šåŠ¨æ€é•¿åº¦è°ƒæ•´æ˜¯å®‰å…¨å…³é”®

2. **hawa130çš„STLåè½¬**  
   ```cpp
   string reversed = original;
   reverse(reversed.begin(), reversed.end());
   ```
   * **äº®ç‚¹**ï¼šæ ‡å‡†åº“ç®€åŒ–ä»£ç   
   * **å­¦ä¹ ç¬”è®°**ï¼šSTLç®—æ³•æå‡å¼€å‘æ•ˆç‡

---

### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š8ä½æœºé£æ ¼çš„"å›æ–‡å‹‡è€…"é—¯å…³  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šNè¿›åˆ¶åŠ æ³•åœ¨åƒç´ ç½‘æ ¼ä¸­çš„åŠ¨æ€è¿‡ç¨‹  

**å¸§æ­¥éª¤è®¾è®¡**ï¼š  
1. **åˆå§‹åŒ–**ï¼ˆFCéŸ³æ•ˆå¯åŠ¨ï¼‰  
   - 16x16åƒç´ ç½‘æ ¼ï¼Œæ¯ä¸ªæ•°å­—ç”¨4x4æ–¹å—è¡¨ç¤º  
   - ä¸åŒæ•°å­—å¯¹åº”ä¸åŒé¢œè‰²ï¼ˆ0æ·±è“â†’Fäº®æ©™ï¼‰  
   - æ§åˆ¶é¢æ¿ï¼šæ­¥è¿›/æš‚åœ/è°ƒé€Ÿæ»‘å—ï¼ˆ0.5x~3xï¼‰  

2. **åè½¬é˜¶æ®µ**ï¼ˆéŸ³æ•ˆï¼šç¿»ä¹¦å£°ï¼‰  
   - åŸæ•°å­—ä¸‹æ–¹æµ®ç°é•œåƒæ–¹å—ï¼Œç”¨è™šçº¿è¿æ¥å¯¹åº”ä½  

3. **ç›¸åŠ åŠ¨ç”»**ï¼ˆéŸ³æ•ˆï¼šç”µå­æ»´å£°ï¼‰  
   ```plaintext
   | 7 |   |   |      | 7 |   |   | 
   +   | 8 |   |  â†’ é—ªçƒä½é»„å…‰è„‰å†²
   =   | F |   |     è¿›ä½çº¢è„‰å†²â†’
   ```  
   - å…³é”®å¸§ï¼šè¿›ä½æ—¶çº¢è‰²å…‰æ³¢å‘å³ä¼ é€’  

4. **å›æ–‡æ£€æµ‹**ï¼ˆéŸ³æ•ˆï¼šæ‰«æå£°ï¼‰  
   - åŒç»¿è‰²æ‰«æçº¿ä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨  
   - åŒ¹é…ä½äº®ç»¿ï¼Œä¸åŒ¹é…ä½é—ªçº¢  

5. **ç»“æœåé¦ˆ**  
   - æˆåŠŸï¼šå…¨å±çƒŸèŠ±+èƒœåˆ©éŸ³æ•ˆï¼Œæ˜¾ç¤º"STEP=X"  
   - å¤±è´¥ï¼šå±å¹•ç¢è£‚å£°ï¼Œæ˜¾ç¤º"Impossible!"  

**æŠ€æœ¯å®ç°**ï¼š  
- Canvasç»˜åˆ¶ç½‘æ ¼å’ŒåŠ¨ç”»å…³é”®å¸§  
- éŸ³æ•ˆè§¦å‘ï¼šåŠ æ³•æ—¶Web Audio APIæ’­æ”¾8bitéŸ³æ•ˆ  
- ä¼ªä»£ç åŒæ­¥æ˜¾ç¤ºåœ¨å³ä¾§é¢æ¿ï¼ˆé«˜äº®å½“å‰æ‰§è¡Œè¡Œï¼‰  

---

### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜

**é€šç”¨æŠ€å·§è¿ç§»**  
1. **è¿›åˆ¶è½¬æ¢**ï¼šP1143 è¿›åˆ¶è½¬æ¢ï¼ˆåŸºç¡€åº”ç”¨ï¼‰  
2. **é«˜ç²¾åº¦æ‰©å±•**ï¼šP1303 A*B Problemï¼ˆä¹˜æ³•è¿›é˜¶ï¼‰  
3. **å›æ–‡å˜å½¢**ï¼šP1217 å›æ–‡è´¨æ•°ï¼ˆåŒé‡æ¡ä»¶åˆ¤æ–­ï¼‰  

**æ´›è°·æ¨è**  
1. **P1601 A+Bé«˜ç²¾åº¦**  
   â†’ å·©å›ºé«˜ç²¾åº¦åŠ æ³•åŸºç¡€  
2. **P1062 æ•°åˆ—**  
   â†’ è®­ç»ƒè¿›åˆ¶è½¬æ¢ä¸è§„å¾‹å‘ç°  
3. **P1015 å›æ–‡æ•°ï¼ˆ10è¿›åˆ¶ç‰ˆï¼‰**  
   â†’ å¯¹æ¯”æœ¬é¢˜çš„ç®€åŒ–ç‰ˆæœ¬  

---

### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **Haishuçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"é«˜ç²¾åº¦é—®é¢˜æœ€æ˜“å¿½ç•¥æœ€é«˜ä½è¿›ä½ï¼ŒåŠ¡å¿…æµ‹è¯•999+1è¿™ç±»è¾¹ç•Œæ•°æ®"*  
> â†’ **Kayç‚¹è¯„**ï¼šè¿™æ˜¯ç®—æ³•å¥å£®æ€§çš„å…³é”®æ£€éªŒç‚¹ï¼Œå»ºè®®ç¼–å†™`printArray()`å‡½æ•°å®æ—¶è¾“å‡ºä¸­é—´ç»“æœ  

> **Strong_Jellyçš„æ•™å­¦æç¤º**ï¼š  
> *"ç”¨æ³¨é‡Šæ˜ç¡®æ¯ä¸ªæ•°ç»„ä¸‹æ ‡å«ä¹‰ï¼ˆå¦‚a[0]å­˜é•¿åº¦ï¼‰"*  
> â†’ **Kayæ€»ç»“**ï¼šå˜é‡è¯­ä¹‰åŒ–èƒ½æå‡ä»£ç å¯ç»´æŠ¤æ€§ï¼Œé¿å…"é­”æœ¯æ•°å­—"  

---

**ç»“è¯­**  
é€šè¿‡æœ¬æŒ‡å—ï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡å›æ–‡æ•°é—®é¢˜çš„æ ¸å¿ƒè§£æ³•ä¸å®ç°æŠ€å·§ã€‚è®°ä½ï¼šæ¨¡å—åŒ–è®¾è®¡æ˜¯é«˜ç²¾åº¦ç®—æ³•çš„åŸºçŸ³ï¼Œè€Œå¯è§†åŒ–èƒ½æ·±åŒ–å¯¹æŠ½è±¡è¿‡ç¨‹çš„ç†è§£ã€‚ä¸‹æ¬¡æˆ‘ä»¬å°†æŒ‘æˆ˜æ›´æœ‰è¶£çš„ç®—æ³•è¿·å®«ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š164.22ç§’
# é¢˜ç›®ä¿¡æ¯

# [SDOI2009] å­¦æ ¡é£Ÿå ‚

## é¢˜ç›®æè¿°

å° F çš„å­¦æ ¡åœ¨åŸå¸‚çš„ä¸€ä¸ªååƒ»è§’è½ï¼Œæ‰€æœ‰å­¦ç”Ÿéƒ½åªå¥½åœ¨å­¦æ ¡åƒé¥­ã€‚å­¦æ ¡æœ‰ä¸€ä¸ªé£Ÿå ‚ï¼Œè™½ç„¶ç®€é™‹ï¼Œä½†é£Ÿå ‚å¤§å¨æ€»èƒ½åšå‡ºè®©åŒå­¦ä»¬æ»¡æ„çš„èœè‚´ã€‚å½“ç„¶ï¼Œä¸åŒçš„äººå£å‘³ä¹Ÿä¸ä¸€å®šç›¸åŒï¼Œä½†æ¯ä¸ªäººçš„å£å‘³éƒ½å¯ä»¥ç”¨ä¸€ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºã€‚ ç”±äºäººæ‰‹ä¸å¤Ÿï¼Œé£Ÿå ‚æ¯æ¬¡åªèƒ½ä¸ºä¸€ä¸ªäººåšèœã€‚åšæ¯é“èœæ‰€éœ€çš„æ—¶é—´æ˜¯å’Œå‰ä¸€é“èœæœ‰å…³çš„ï¼Œè‹¥å‰ä¸€é“èœçš„å¯¹åº”çš„å£å‘³æ˜¯ $a$ï¼Œè¿™ä¸€é“ä¸º $b$ï¼Œåˆ™åšè¿™é“èœæ‰€éœ€çš„æ—¶é—´ä¸º $(a\operatorname{or}b)-(a\operatorname{and}b)$ï¼Œè€Œåšç¬¬ä¸€é“èœæ˜¯ä¸éœ€è¦è®¡ç®—æ—¶é—´çš„ã€‚å…¶ä¸­ï¼Œ$\operatorname{or}$ å’Œ $\operatorname{and}$ è¡¨ç¤ºæ•´æ•°é€ä½æˆ–è¿ç®—åŠé€ä½ä¸è¿ç®—ï¼ŒC è¯­è¨€ä¸­å¯¹åº”çš„è¿ç®—ç¬¦ä¸º `|` å’Œ `&`ã€‚


å­¦ç”Ÿæ•°ç›®ç›¸å¯¹äºè¿™ä¸ªå­¦æ ¡è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œåƒé¥­åšèœå¾€å¾€å°±ä¼šèŠ±å»ä¸å°‘æ—¶é—´ã€‚å› æ­¤ï¼Œå­¦æ ¡é£Ÿå ‚å¶å°”ä¼šä¸æŒ‰ç…§å¤§å®¶çš„æ’é˜Ÿé¡ºåºåšèœï¼Œä»¥ç¼©çŸ­æ€»çš„è¿›é¤æ—¶é—´ã€‚

è™½ç„¶åŒå­¦ä»¬èƒ½å¤Ÿç†è§£å­¦æ ¡é£Ÿå ‚çš„è¿™ç§åšæ³•ï¼Œä¸è¿‡æ¯ä¸ªåŒå­¦è¿˜æ˜¯æœ‰ä¸€å®šå®¹å¿åº¦çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé˜Ÿä¼ä¸­çš„ç¬¬ $i$ ä¸ªåŒå­¦ï¼Œæœ€å¤šå…è®¸ç´§è·Ÿä»–èº«åçš„ $B_i$ ä¸ªäººå…ˆæ‹¿åˆ°é¥­èœã€‚ä¸€æ—¦åœ¨æ­¤ä¹‹åçš„ä»»æ„åŒå­¦æ¯”å½“å‰åŒå­¦å…ˆæ‹¿åˆ°é¥­ï¼Œå½“å‰åŒå­¦å°†ä¼šååˆ†æ„¤æ€’ã€‚å› æ­¤ï¼Œé£Ÿå ‚åšèœè¿˜å¾—ç…§é¡¾åˆ°åŒå­¦ä»¬çš„æƒ…ç»ªã€‚ ç°åœ¨ï¼Œå° F æƒ³çŸ¥é“åœ¨æ»¡è¶³æ‰€æœ‰äººçš„å®¹å¿åº¦è¿™ä¸€å‰æä¸‹ï¼Œè‡ªå·±çš„å­¦æ ¡é£Ÿå ‚åšå®Œè¿™äº›èœæœ€å°‘éœ€è¦å¤šå°‘æ—¶é—´ã€‚


## è¯´æ˜/æç¤º

å¯¹äºç¬¬ä¸€ç»„æ•°æ®ï¼š

åŒå­¦ 1 å…è®¸åŒå­¦ 2 æˆ–åŒå­¦ 3 åœ¨ä»–ä¹‹å‰æ‹¿åˆ°èœï¼›åŒå­¦ 2 å…è®¸åŒå­¦ 3 åœ¨ä»–ä¹‹å‰æ‹¿åˆ°èœï¼›åŒå­¦ 3 æ¯”è¾ƒå°æ°”ï¼Œä»–å¿…é¡»æ¯”ä»–åé¢çš„åŒå­¦å…ˆæ‹¿èœã€‚

ä¸€ç§æœ€ä¼˜çš„æ–¹æ¡ˆæ˜¯æŒ‰åŒå­¦ 3ã€åŒå­¦ 2ã€åŒå­¦ 1ã€åŒå­¦ 4ã€åŒå­¦ 5 åšèœï¼Œæ¯é“èœæ‰€éœ€çš„æ—¶é—´åˆ†åˆ«æ˜¯ 0ã€8ã€1ã€6 åŠ 1ã€‚


**æ•°æ®è§„æ¨¡å’Œçº¦å®š**

- å¯¹äº $30\%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $1 \le N \le 20$ã€‚

- å¯¹äº $ 100\% $ çš„æ•°æ®ï¼Œæ»¡è¶³ $1 \le N \le 1000,0 \le T_i \le 1000,0 \le B_i \le 7ï¼Œ1 \le C \le 5$ã€‚

- å­˜åœ¨ $30\%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $0 \le B_i \le 1$ã€‚

- å­˜åœ¨ $65\%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $0 \le B_i \le 5$ã€‚

- å­˜åœ¨ $45\%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $0 \le T_i \le 130$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
2
5
5 2
4 1
12 0
3 3
2 2
2
5 0
4 0```

### è¾“å‡º

```
16
1
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[SDOI2009]å­¦æ ¡é£Ÿå ‚ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šçŠ¶å‹åŠ¨æ€è§„åˆ’ï¼ˆçŠ¶å‹DPï¼‰


### ğŸ—£ï¸ åˆæ­¥åˆ†æ
è§£å†³â€œå­¦æ ¡é£Ÿå ‚â€é—®é¢˜çš„å…³é”®åœ¨äº**çŠ¶å‹DP**â€”â€”é€šè¿‡äºŒè¿›åˆ¶çŠ¶æ€å‹ç¼©ï¼Œå¤„ç†â€œæ¯ä¸ªåŒå­¦æœ€å¤šå…è®¸èº«å7äººå…ˆæ‰“é¥­â€çš„é™åˆ¶ã€‚ç®€å•æ¥è¯´ï¼ŒçŠ¶å‹DPå°±åƒâ€œç”¨äºŒè¿›åˆ¶ä½è®°å½•å°èŒƒå›´çš„çŠ¶æ€â€ï¼Œæ¯”å¦‚ç”¨8ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºå½“å‰åŒå­¦åŠå…¶èº«å7äººçš„æ‰“é¥­æƒ…å†µï¼ˆ1è¡¨ç¤ºå·²æ‰“ï¼Œ0è¡¨ç¤ºæœªæ‰“ï¼‰ã€‚

#### æ ¸å¿ƒæ€è·¯
é¢˜ç›®è¦æ±‚**æœ€å°åŒ–æ€»åšèœæ—¶é—´**ï¼ˆæ¯é“èœæ—¶é—´ä¸ºå‰ä¸€é“çš„å¼‚æˆ–å€¼ï¼‰ï¼ŒåŒæ—¶æ»¡è¶³**å®¹å¿åº¦é™åˆ¶**ï¼ˆç¬¬iä¸ªåŒå­¦æœ€å¤šå…è®¸èº«åB_iäººå…ˆæ‰“é¥­ï¼‰ã€‚ç”±äºB_iâ‰¤7ï¼Œæˆ‘ä»¬å¯ä»¥å°†çŠ¶æ€å‹ç¼©åˆ°**8ä½äºŒè¿›åˆ¶**ï¼ˆè¦†ç›–å½“å‰åŒå­¦åŠå…¶èº«å7äººï¼‰ï¼Œä»è€Œå°†é—®é¢˜è½¬åŒ–ä¸ºâ€œçŠ¶æ€è½¬ç§»â€é—®é¢˜ã€‚

#### çŠ¶æ€å®šä¹‰
å‡ ä¹æ‰€æœ‰é¢˜è§£éƒ½é‡‡ç”¨ç±»ä¼¼çš„çŠ¶æ€å®šä¹‰ï¼š  
`f[i][j][k]` è¡¨ç¤ºï¼š
- å‰`i-1`ä¸ªåŒå­¦å·²æ‰“å®Œé¥­ï¼›
- `i`åˆ°`i+7`è¿™8ä¸ªåŒå­¦çš„æ‰“é¥­çŠ¶æ€ä¸º`j`ï¼ˆäºŒè¿›åˆ¶ä½ï¼Œ1è¡¨ç¤ºå·²æ‰“ï¼‰ï¼›
- æœ€åä¸€ä¸ªæ‰“é¥­çš„åŒå­¦ç›¸å¯¹äº`i`çš„ä½ç½®ä¸º`k`ï¼ˆ`k`èŒƒå›´ï¼š-8~7ï¼Œæ•°ç»„å­˜å‚¨æ—¶åŠ åç§»é‡ï¼Œå¦‚+8ï¼‰ã€‚

#### æ ¸å¿ƒè½¬ç§»é€»è¾‘
1. **å½“iå·²æ‰“é¥­ï¼ˆj&1==1ï¼‰**ï¼š  
   å¯ä»¥è½¬ç§»åˆ°`i+1`ï¼ŒçŠ¶æ€`j`å³ç§»ä¸€ä½ï¼ˆå»æ‰içš„çŠ¶æ€ï¼‰ï¼Œ`k`å‡1ï¼ˆç›¸å¯¹äºi+1ï¼ŒåŸkä½ç½®å˜ä¸ºk-1ï¼‰ã€‚  
   ä¾‹ï¼š`f[i+1][j>>1][k-1] = min(f[i+1][j>>1][k-1], f[i][j][k])`ã€‚

2. **å½“iæœªæ‰“é¥­ï¼ˆj&1==0ï¼‰**ï¼š  
   æšä¸¾`i`åˆ°`i+7`ä¸­æœªæ‰“çš„åŒå­¦`h`ï¼ˆ0â‰¤hâ‰¤7ï¼‰ï¼Œéœ€æ»¡è¶³**å®¹å¿åº¦é™åˆ¶**ï¼ˆç”¨`lir`ç»´æŠ¤å½“å‰èƒ½å®¹å¿çš„æœ€å¤§ä½ç½®ï¼Œ`lir = min(lir, i+h+B[i+h])`ï¼‰ã€‚è‹¥`i+h`è¶…è¿‡`lir`ï¼Œåˆ™breakï¼ˆåé¢çš„hæ›´å¤§ï¼Œè‚¯å®šè¶…è¿‡ï¼‰ã€‚  
   è½¬ç§»ï¼š`f[i][j|(1<<h)][h] = min(f[i][j|(1<<h)][h], f[i][j][k] + (i+k ? (T[i+k]^T[i+h]) : 0))`ï¼ˆ`i+k`ä¸ºæœ€åä¸€ä¸ªæ‰“é¥­çš„åŒå­¦ç¼–å·ï¼Œå¼‚æˆ–å€¼ä¸ºå½“å‰èœçš„æ—¶é—´ï¼‰ã€‚

#### å¯è§†åŒ–è®¾è®¡æ€è·¯
- **åƒç´ é£æ ¼**ï¼šç”¨8ä½äºŒè¿›åˆ¶ä½è¡¨ç¤º`j`ï¼ˆæ¯ä¸ªä½ç”¨åƒç´ å—è¡¨ç¤ºï¼Œäº®è¡¨ç¤ºå·²æ‰“ï¼‰ï¼›`i`ç”¨è¿›åº¦æ¡è¡¨ç¤ºï¼›`k`ç”¨ç®­å¤´æŒ‡å‘æœ€åä¸€ä¸ªæ‰“é¥­çš„ä½ç½®ï¼›`lir`ç”¨çº¢è‰²æ¡†æ ‡è®°èƒ½å®¹å¿çš„æœ€å¤§ä½ç½®ã€‚
- **åŠ¨ç”»æ­¥éª¤**ï¼š  
  1. åˆå§‹åŒ–ï¼š`i=1`ï¼Œ`j=0`ï¼ˆå…¨æœªæ‰“ï¼‰ï¼Œ`k=-1`ï¼ˆæ— æœ€åæ‰“é¥­çš„äººï¼‰ã€‚  
  2. æšä¸¾`h`ï¼šç‚¹å‡»â€œå•æ­¥â€ï¼Œ`j`çš„ç¬¬`h`ä½å˜äº®ï¼Œ`k`æŒ‡å‘`i+h`ï¼Œæ˜¾ç¤ºå¼‚æˆ–æ—¶é—´ç´¯åŠ ã€‚  
  3. è½¬ç§»åˆ°`i+1`ï¼šå½“`j&1==1`ï¼Œ`i`è¿›åº¦æ¡å‰è¿›ï¼Œ`j`å³ç§»ï¼Œ`k`å‡1ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæ¯å®Œæˆä¸€ä¸ª`i`çš„è½¬ç§»ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›å½“æ‰€æœ‰åŒå­¦æ‰“å®Œé¥­ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼›å…è®¸â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆè°ƒé€Ÿæ»‘å—ï¼‰ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### ğŸ“Œ é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šxyz32768ï¼Œèµï¼š162ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£æ˜¯çŠ¶å‹DPçš„ç»å…¸å®ç°ï¼ŒçŠ¶æ€å®šä¹‰æ¸…æ™°ï¼ˆ`f[i][j][k]`ï¼‰ï¼Œè½¬ç§»é€»è¾‘ä¸¥è°¨ã€‚ä»£ç ä¸­ç”¨`chkmin`å‡½æ•°ç»´æŠ¤æœ€å°å€¼ï¼Œ`lir`å˜é‡å¤„ç†å®¹å¿åº¦é™åˆ¶ï¼Œå‰ªæï¼ˆ`if(i+h>lir) break`ï¼‰æœ‰æ•ˆå‡å°‘äº†è®¡ç®—é‡ã€‚**äº®ç‚¹**ï¼šå°†`k`çš„èŒƒå›´ï¼ˆ-8~7ï¼‰é€šè¿‡`k+8`è½¬åŒ–ä¸ºæ­£æ•°ï¼Œé¿å…æ•°ç»„è¶Šç•Œï¼›åˆå§‹åŒ–`f[1][0][7] = 0`ï¼ˆ`k=-1`ï¼Œè¡¨ç¤ºè¿˜æ²¡å¼€å§‹æ‰“é¥­ï¼‰ï¼Œç¬¦åˆçŠ¶æ€å®šä¹‰ã€‚

### ğŸ“Œ é¢˜è§£äºŒï¼ˆä½œè€…ï¼š_LAUV_ï¼Œèµï¼š67ï¼‰
**ç‚¹è¯„**ï¼š  
é¢˜è§£ç”¨é€šä¿—çš„è¯­è¨€è§£é‡ŠçŠ¶æ€ï¼ˆâ€œiåŒå­¦åƒå®Œäº†â€â€œiåŒå­¦æ²¡åƒå®Œâ€ï¼‰ï¼Œå®¹æ˜“ç†è§£ã€‚**äº®ç‚¹**ï¼šç”¨`tw[lx]`ï¼ˆ`1<<lx`ï¼‰ç®€åŒ–çŠ¶æ€å‹ç¼©ï¼Œ`TM`å‡½æ•°è®¡ç®—å¼‚æˆ–æ—¶é—´ï¼Œä»£ç é£æ ¼ç®€æ´ã€‚è½¬ç§»æ—¶ç”¨`mxR`ç»´æŠ¤å®¹å¿åº¦ï¼Œé€»è¾‘ä¸é¢˜è§£ä¸€ä¸€è‡´ï¼Œä½†æ›´è´´è¿‘åˆå­¦è€…çš„æ€ç»´ã€‚

### ğŸ“Œ é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šå‚…æ€ç»´666ï¼Œèµï¼š14ï¼‰
**ç‚¹è¯„**ï¼š  
é¢˜è§£è¯¦ç»†è§£é‡Šäº†çŠ¶æ€è½¬ç§»çš„åŸå› ï¼ˆâ€œä¸ºä»€ä¹ˆj&1==1å¯ä»¥è½¬ç§»åˆ°i+1â€ï¼‰ï¼Œå¸®åŠ©ç†è§£çŠ¶æ€çš„åˆç†æ€§ã€‚**äº®ç‚¹**ï¼šç”¨`dp[i][j][k+8]`å¤„ç†è´Ÿæ•°`k`ï¼Œåˆå§‹åŒ–`dp[1][0][7] = 0`ï¼Œä»£ç ä¸­æ³¨é‡Šè¯¦ç»†ï¼Œé€‚åˆåˆå­¦è€…æ¨¡ä»¿ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### ğŸ§© æ ¸å¿ƒéš¾ç‚¹1ï¼šçŠ¶æ€å®šä¹‰çš„åˆç†æ€§
**é—®é¢˜**ï¼šä¸ºä»€ä¹ˆé€‰æ‹©`i`è¡¨ç¤ºå‰`i-1`å®Œæˆï¼Œ`j`è¡¨ç¤º`i`åˆ°`i+7`çš„çŠ¶æ€ï¼Ÿ  
**åˆ†æ**ï¼šç”±äº`B_iâ‰¤7`ï¼Œåé¢çš„åŒå­¦ä¸ä¼šå½±å“å‰é¢è¶…è¿‡7çš„ä½ç½®ï¼Œå› æ­¤`i`åˆ°`i+7`çš„çŠ¶æ€è¶³ä»¥è¦†ç›–æ‰€æœ‰å¯èƒ½çš„â€œå…ˆæ‰“é¥­â€æƒ…å†µã€‚è¿™ç§å®šä¹‰ç¡®ä¿äº†çŠ¶æ€çš„**æ— åæ•ˆæ€§**ï¼ˆå½“å‰çŠ¶æ€ä¸ä¾èµ–æœªæ¥çš„å†³ç­–ï¼‰ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šçŠ¶å‹DPçš„çŠ¶æ€å®šä¹‰éœ€ç´§æ‰£â€œå°èŒƒå›´é™åˆ¶â€ï¼ˆå¦‚æœ¬é¢˜çš„B_iâ‰¤7ï¼‰ï¼Œå°†çŠ¶æ€å‹ç¼©åˆ°å¯å¤„ç†çš„èŒƒå›´ã€‚

### ğŸ§© æ ¸å¿ƒéš¾ç‚¹2ï¼šå®¹å¿åº¦çš„å¤„ç†
**é—®é¢˜**ï¼šå¦‚ä½•ç¡®ä¿æšä¸¾çš„`h`ä¸ä¼šè®©å‰é¢çš„åŒå­¦æ„¤æ€’ï¼Ÿ  
**åˆ†æ**ï¼šç”¨`lir`å˜é‡ç»´æŠ¤å½“å‰èƒ½å®¹å¿çš„æœ€å¤§ä½ç½®ï¼ˆ`lir = min(lir, i+h+B[i+h])`ï¼‰ã€‚å½“`i+h`è¶…è¿‡`lir`æ—¶ï¼Œbreakï¼ˆåé¢çš„`h`æ›´å¤§ï¼Œè‚¯å®šè¶…è¿‡ï¼‰ã€‚è¿™ç§å‰ªææœ‰æ•ˆå‡å°‘äº†æ— æ•ˆæšä¸¾ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šå®¹å¿åº¦é™åˆ¶å¯ä»¥é€šè¿‡â€œç»´æŠ¤å½“å‰æœ€å¤§å…è®¸ä½ç½®â€æ¥å¤„ç†ï¼Œé¿å…éå†æ‰€æœ‰å¯èƒ½çš„`h`ã€‚

### ğŸ§© æ ¸å¿ƒéš¾ç‚¹3ï¼šåç§»é‡çš„å¤„ç†
**é—®é¢˜**ï¼š`k`çš„èŒƒå›´æ˜¯-8~7ï¼Œå¦‚ä½•å­˜å‚¨åˆ°æ•°ç»„ä¸­ï¼Ÿ  
**åˆ†æ**ï¼šæ•°ç»„ä¸‹æ ‡ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå› æ­¤å°†`k`åŠ ä¸Šåç§»é‡ï¼ˆå¦‚+8ï¼‰ï¼Œè½¬åŒ–ä¸º0~15çš„æ­£æ•°ã€‚ä¾‹å¦‚ï¼Œ`k=-1`å­˜å‚¨ä¸º`7`ï¼ˆ-1+8=7ï¼‰ï¼Œ`k=7`å­˜å‚¨ä¸º`15`ï¼ˆ7+8=15ï¼‰ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼šå¤„ç†è´Ÿæ•°ä¸‹æ ‡æ—¶ï¼Œåç§»é‡æ˜¯å¸¸ç”¨çš„æŠ€å·§ï¼Œéœ€ç¡®ä¿åç§»åçš„èŒƒå›´ä¸è¶…è¿‡æ•°ç»„å¤§å°ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
1. **çŠ¶å‹DPçš„åº”ç”¨åœºæ™¯**ï¼šå½“é—®é¢˜å­˜åœ¨â€œå°èŒƒå›´é™åˆ¶â€ï¼ˆå¦‚æœ¬é¢˜çš„B_iâ‰¤7ï¼‰æ—¶ï¼Œå¯è€ƒè™‘ç”¨çŠ¶å‹DPå‹ç¼©çŠ¶æ€ã€‚  
2. **çŠ¶æ€è½¬ç§»çš„å‰ªæ**ï¼šé€šè¿‡ç»´æŠ¤â€œæœ€å¤§å…è®¸ä½ç½®â€ï¼ˆå¦‚`lir`ï¼‰ï¼Œå‡å°‘æ— æ•ˆæšä¸¾ï¼Œæé«˜æ•ˆç‡ã€‚  
3. **åç§»é‡çš„ä½¿ç”¨**ï¼šå¤„ç†è´Ÿæ•°ä¸‹æ ‡æ—¶ï¼ŒåŠ ä¸Šåˆé€‚çš„åç§»é‡ï¼Œé¿å…æ•°ç»„è¶Šç•Œã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### ğŸ“ æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
**è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œæä¾›ä¸€ä¸ªæ¸…æ™°çš„æ ¸å¿ƒå®ç°ã€‚  
**å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
const int N = 1005;
const int INF = 0x3f3f3f3f;
int T, n, t[N], b[N];
int f[N][1 << 8][20]; // f[i][j][k+8]ï¼ŒkèŒƒå›´-8~7

void chkmin(int &a, int b) { a = min(a, b); }

int main() {
    scanf("%d", &T);
    while (T--) {
        scanf("%d", &n);
        for (int i = 1; i <= n; i++) {
            scanf("%d%d", &t[i], &b[i]);
        }
        memset(f, INF, sizeof(f));
        f[1][0][7] = 0; // åˆå§‹åŒ–ï¼ši=1ï¼Œj=0ï¼Œk=-1ï¼ˆ7= -1+8ï¼‰
        for (int i = 1; i <= n; i++) {
            for (int j = 0; j < (1 << 8); j++) {
                for (int k = -8; k <= 7; k++) {
                    if (f[i][j][k + 8] == INF) continue;
                    // æƒ…å†µ1ï¼šiå·²æ‰“é¥­ï¼ˆj&1==1ï¼‰
                    if (j & 1) {
                        chkmin(f[i + 1][j >> 1][k + 7], f[i][j][k + 8]);
                    }
                    // æƒ…å†µ2ï¼šiæœªæ‰“é¥­ï¼ˆj&1==0ï¼‰
                    else {
                        int lir = INF;
                        for (int h = 0; h <= 7; h++) {
                            if (!((j >> h) & 1)) {
                                if (i + h > lir) break;
                                lir = min(lir, i + h + b[i + h]);
                                int cost = (i + k) ? (t[i + k] ^ t[i + h]) : 0;
                                chkmin(f[i][j | (1 << h)][h + 8], f[i][j][k + 8] + cost);
                            }
                        }
                    }
                }
            }
        }
        int ans = INF;
        for (int k = -8; k <= 0; k++) {
            ans = min(ans, f[n + 1][0][k + 8]);
        }
        printf("%d\n", ans);
    }
    return 0;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **åˆå§‹åŒ–**ï¼š`f[1][0][7] = 0`è¡¨ç¤ºå¼€å§‹æ—¶ï¼Œå‰0ä¸ªåŒå­¦å·²æ‰“å®Œï¼Œ`i=1`çš„çŠ¶æ€ä¸º0ï¼ˆæœªæ‰“ï¼‰ï¼Œæœ€åä¸€ä¸ªæ‰“é¥­çš„ä½ç½®æ˜¯-1ï¼ˆæ— ï¼‰ã€‚  
2. **çŠ¶æ€è½¬ç§»**ï¼šéå†`i`ã€`j`ã€`k`ï¼Œå¤„ç†ä¸¤ç§æƒ…å†µï¼ˆiå·²æ‰“/æœªæ‰“ï¼‰ï¼Œæ›´æ–°`f`æ•°ç»„ã€‚  
3. **ç»“æœè®¡ç®—**ï¼šå–`f[n+1][0][k]`ï¼ˆ`k`èŒƒå›´-8~0ï¼‰çš„æœ€å°å€¼ï¼Œå³æ‰€æœ‰åŒå­¦éƒ½æ‰“å®Œé¥­çš„æœ€å°æ—¶é—´ã€‚


### ğŸ“ é¢˜è§£ä¸€ï¼ˆxyz32768ï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ
**äº®ç‚¹**ï¼š`chkmin`å‡½æ•°ç®€åŒ–æœ€å°å€¼ç»´æŠ¤ï¼Œ`lir`å˜é‡å¤„ç†å®¹å¿åº¦ã€‚  
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
for (int i = 1; i <= n; i++) {
    for (int j = 0; j < (1 << 8); j++) {
        for (int k = -8; k <= 7; k++) {
            if (f[i][j][k + 8] == INF) continue;
            if (j & 1) {
                chkmin(f[i + 1][j >> 1][k + 7], f[i][j][k + 8]);
            } else {
                int lir = INF;
                for (int h = 0; h <= 7; h++) {
                    if (!((j >> h) & 1)) {
                        if (i + h > lir) break;
                        lir = min(lir, i + h + b[i + h]);
                        int cost = (i + k) ? (t[i + k] ^ t[i + h]) : 0;
                        chkmin(f[i][j | (1 << h)][h + 8], f[i][j][k + 8] + cost);
                    }
                }
            }
        }
    }
}
```
**ä»£ç è§£è¯»**ï¼š  
- `j & 1`åˆ¤æ–­iæ˜¯å¦å·²æ‰“é¥­ï¼ˆå› ä¸ºjçš„ç¬¬0ä½è¡¨ç¤ºiçš„çŠ¶æ€ï¼‰ã€‚  
- `lir`åˆå§‹åŒ–ä¸ºINFï¼Œæ¯æ¬¡æšä¸¾`h`æ—¶ï¼Œæ›´æ–°`lir`ä¸º`min(lir, i+h+B[i+h])`ï¼Œç¡®ä¿`i+h`ä¸è¶…è¿‡å‰é¢åŒå­¦çš„å®¹å¿èŒƒå›´ã€‚  
- `cost`è®¡ç®—å½“å‰èœçš„æ—¶é—´ï¼ˆå¼‚æˆ–å€¼ï¼‰ï¼Œè‹¥`i+k`ä¸º0ï¼ˆæ— æœ€åæ‰“é¥­çš„äººï¼‰ï¼Œåˆ™costä¸º0ã€‚  
**ğŸ’¡ å­¦ä¹ ç¬”è®°**ï¼š`chkmin`å‡½æ•°æ˜¯ç«èµ›ä¸­å¸¸ç”¨çš„æŠ€å·§ï¼Œå¯ç®€åŒ–ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### ğŸ® åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šé£Ÿå ‚æ‰“é¥­å¤§æŒ‘æˆ˜ã€‹ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰

### ğŸ¨ è®¾è®¡æ€è·¯
é‡‡ç”¨FCçº¢ç™½æœºé£æ ¼ï¼Œç”¨åƒç´ å—è¡¨ç¤ºåŒå­¦ï¼ŒäºŒè¿›åˆ¶ä½è¡¨ç¤ºæ‰“é¥­çŠ¶æ€ï¼Œç®­å¤´è¡¨ç¤ºæœ€åä¸€ä¸ªæ‰“é¥­çš„ä½ç½®ï¼Œçº¢è‰²æ¡†è¡¨ç¤ºå®¹å¿åº¦èŒƒå›´ã€‚é€šè¿‡â€œå•æ­¥â€â€œè‡ªåŠ¨æ’­æ”¾â€åŠŸèƒ½ï¼Œç›´è§‚å±•ç¤ºçŠ¶æ€è½¬ç§»è¿‡ç¨‹ã€‚

### ğŸ“ åŠ¨ç”»å¸§æ­¥éª¤
1. **åˆå§‹åŒ–åœºæ™¯**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆ`i`ä»1åˆ°nï¼‰ï¼Œå³ä¾§æ˜¾ç¤º`j`çš„äºŒè¿›åˆ¶çŠ¶æ€ï¼ˆ8ä¸ªåƒç´ å—ï¼Œç°è‰²è¡¨ç¤ºæœªæ‰“ï¼Œç»¿è‰²è¡¨ç¤ºå·²æ‰“ï¼‰ã€‚  
   - ä¸­é—´æ˜¾ç¤º`i`åˆ°`i+7`çš„åŒå­¦ï¼ˆåƒç´ äººï¼‰ï¼Œç®­å¤´æŒ‡å‘æœ€åä¸€ä¸ªæ‰“é¥­çš„ä½ç½®ï¼ˆ`k`ï¼‰ï¼Œçº¢è‰²æ¡†æ ‡è®°`lir`ï¼ˆèƒ½å®¹å¿çš„æœ€å¤§ä½ç½®ï¼‰ã€‚  
   - æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠè°ƒé€Ÿæ»‘å—ã€‚

2. **çŠ¶æ€è½¬ç§»æ¼”ç¤º**ï¼š  
   - **æƒ…å†µ1ï¼ˆiå·²æ‰“é¥­ï¼‰**ï¼šå½“`j&1==1`ï¼Œè¿›åº¦æ¡å‰è¿›åˆ°`i+1`ï¼Œ`j`çš„äºŒè¿›åˆ¶ä½å³ç§»ä¸€ä½ï¼ˆæœ€å·¦è¾¹çš„ä½æ¶ˆå¤±ï¼Œæœ€å³è¾¹è¡¥0ï¼‰ï¼Œç®­å¤´å‘å·¦ç§»åŠ¨ä¸€ä½ï¼ˆ`k`å‡1ï¼‰ã€‚  
   - **æƒ…å†µ2ï¼ˆiæœªæ‰“é¥­ï¼‰**ï¼šæšä¸¾`h`ï¼Œç‚¹å‡»â€œå•æ­¥â€ï¼Œ`j`çš„ç¬¬`h`ä½å˜ä¸ºç»¿è‰²ï¼ˆå·²æ‰“ï¼‰ï¼Œç®­å¤´æŒ‡å‘`i+h`ï¼Œçº¢è‰²æ¡†æ›´æ–°ä¸º`lir`ï¼Œå±å¹•ä¸‹æ–¹æ˜¾ç¤ºå½“å‰å¼‚æˆ–æ—¶é—´ï¼ˆå¦‚â€œ+5â€ï¼‰ã€‚

3. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
   - **éŸ³æ•ˆ**ï¼šæ¯å®Œæˆä¸€æ¬¡çŠ¶æ€è½¬ç§»ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›å½“æ‰€æœ‰åŒå­¦æ‰“å®Œé¥­ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚  
   - **ç§¯åˆ†**ï¼šæ¯å®Œæˆä¸€ä¸ª`i`çš„è½¬ç§»ï¼Œè·å¾—10åˆ†ï¼›å®Œæˆæ‰€æœ‰è½¬ç§»ï¼Œè·å¾—100åˆ†ï¼Œæ˜¾ç¤ºâ€œé€šå…³ï¼â€åŠ¨ç”»ã€‚

### ğŸ“ æ—ç™½æç¤º
- â€œç°åœ¨å¤„ç†ç¬¬`i`ä¸ªåŒå­¦ï¼Œä»–è¿˜æ²¡æ‰“é¥­ï¼ˆ`j`çš„ç¬¬0ä½æ˜¯ç°è‰²ï¼‰ã€‚â€  
- â€œæšä¸¾`h=2`ï¼Œ`i+2`åŒå­¦å¯ä»¥å…ˆæ‰“é¥­ï¼ˆçº¢è‰²æ¡†è¦†ç›–åˆ°`i+2`ï¼‰ã€‚â€  
- â€œè½¬ç§»åï¼Œ`j`çš„ç¬¬2ä½å˜ä¸ºç»¿è‰²ï¼Œæœ€åä¸€ä¸ªæ‰“é¥­çš„æ˜¯`i+2`ï¼ˆç®­å¤´æŒ‡å‘ä»–ï¼‰ã€‚â€  
- â€œ`i`å·²æ‰“é¥­ï¼ˆ`j`çš„ç¬¬0ä½æ˜¯ç»¿è‰²ï¼‰ï¼Œè½¬ç§»åˆ°`i+1`ï¼Œè¿›åº¦æ¡å‰è¿›ï¼â€


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ§  é€šç”¨æ€è·¯è¿ç§»
çŠ¶å‹DPé€‚ç”¨äº**å°èŒƒå›´çŠ¶æ€å‹ç¼©**çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
1. **å­—ç¬¦ä¸²åŒ¹é…**ï¼ˆå¦‚æ´›è°·P2167ã€ŠBillçš„æŒ‘æˆ˜ã€‹ï¼‰ï¼šç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºå­—ç¬¦ä¸²çš„åŒ¹é…çŠ¶æ€ã€‚  
2. **ç½‘æ ¼ç§æ¤**ï¼ˆå¦‚æ´›è°·P1879ã€Šç‰ç±³ç”°ã€‹ï¼‰ï¼šç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºæ¯è¡Œçš„ç§æ¤çŠ¶æ€ã€‚  
3. **å›¾åˆ†å‰²**ï¼ˆå¦‚æ´›è°·P2598ã€Šç‹¼å’Œç¾Šçš„æ•…äº‹ã€‹ï¼‰ï¼šç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºå›¾çš„åˆ†å‰²çŠ¶æ€ã€‚

### ğŸ“š æ´›è°·ç»ƒä¹ æ¨è
1. **P2167 ã€ŠBillçš„æŒ‘æˆ˜ã€‹**  
   - ğŸ—£ï¸ æ¨èç†ç”±ï¼šçŠ¶å‹DPå¤„ç†å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼Œéœ€ç»´æŠ¤æ¯ä¸ªä½ç½®çš„åŒ¹é…çŠ¶æ€ï¼Œä¸æœ¬é¢˜çš„çŠ¶æ€å‹ç¼©æ€è·¯ä¸€è‡´ã€‚  
2. **P1879 ã€Šç‰ç±³ç”°ã€‹**  
   - ğŸ—£ï¸ æ¨èç†ç”±ï¼šçŠ¶å‹DPå¤„ç†ç½‘æ ¼ä¸­çš„ç§æ¤é™åˆ¶ï¼Œéœ€ç¡®ä¿ç›¸é‚»è¡Œçš„ç§æ¤çŠ¶æ€åˆæ³•ï¼Œé”»ç‚¼çŠ¶æ€è½¬ç§»çš„é€»è¾‘ã€‚  
3. **P2598 ã€Š[ZJOI2009]ç‹¼å’Œç¾Šçš„æ•…äº‹ã€‹**  
   - ğŸ—£ï¸ æ¨èç†ç”±ï¼šçŠ¶å‹DPå¤„ç†å›¾ä¸­çš„åˆ†å‰²é—®é¢˜ï¼Œéœ€å°†ç‹¼å’Œç¾Šåˆ†å¼€ï¼Œé”»ç‚¼çŠ¶æ€å®šä¹‰çš„èƒ½åŠ›ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰

### ğŸ“ å‚è€ƒç»éªŒï¼ˆæ¥è‡ªé¢˜è§£ä½œè€…xyz32768ï¼‰
â€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆå¯¹çŠ¶æ€å®šä¹‰æ„Ÿåˆ°å›°æƒ‘ï¼Œåæ¥æƒ³åˆ°B_iâ‰¤7ï¼Œäºæ˜¯å°†çŠ¶æ€å‹ç¼©åˆ°8ä½ï¼Œè¿™æ ·çŠ¶æ€æ•°å°±å¯æ§äº†ã€‚å¦å¤–ï¼Œå¤„ç†å®¹å¿åº¦æ—¶ï¼Œç”¨lirå˜é‡ç»´æŠ¤æœ€å¤§å…è®¸ä½ç½®ï¼Œé¿å…äº†æ— æ•ˆæšä¸¾ï¼Œæé«˜äº†æ•ˆç‡ã€‚â€

### ğŸ’¡ ç‚¹è¯„
è¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚çŠ¶å‹DPçš„å…³é”®åœ¨äº**æ‰¾åˆ°â€œå°èŒƒå›´é™åˆ¶â€**ï¼ˆå¦‚æœ¬é¢˜çš„B_iâ‰¤7ï¼‰ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºäºŒè¿›åˆ¶çŠ¶æ€ã€‚å¤„ç†é™åˆ¶æ¡ä»¶æ—¶ï¼Œ**ç»´æŠ¤ä¸­é—´å˜é‡**ï¼ˆå¦‚lirï¼‰å¯ä»¥æœ‰æ•ˆå‡å°‘è®¡ç®—é‡ï¼Œé¿å…éå†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µã€‚


## ğŸ‰ æ€»ç»“
æœ¬æ¬¡åˆ†æçš„â€œå­¦æ ¡é£Ÿå ‚â€é—®é¢˜æ˜¯çŠ¶å‹DPçš„ç»å…¸æ¡ˆä¾‹ï¼Œæ ¸å¿ƒåœ¨äº**ç”¨äºŒè¿›åˆ¶çŠ¶æ€å‹ç¼©å°èŒƒå›´çš„çŠ¶æ€**ï¼Œå¤„ç†â€œå®¹å¿åº¦é™åˆ¶â€ï¼Œå¹¶é€šè¿‡çŠ¶æ€è½¬ç§»æ‰¾åˆ°æœ€å°æ€»æ—¶é—´ã€‚é€šè¿‡ä¼˜è´¨é¢˜è§£çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æŒæ¡äº†çŠ¶å‹DPçš„çŠ¶æ€å®šä¹‰ã€è½¬ç§»é€»è¾‘å’Œå‰ªææŠ€å·§ï¼ŒåŒæ—¶é€šè¿‡å¯è§†åŒ–åŠ¨ç”»ç›´è§‚ç†è§£äº†ç®—æ³•è¿‡ç¨‹ã€‚

è®°ä½ï¼ŒçŠ¶å‹DPçš„å…³é”®æ˜¯**â€œå°èŒƒå›´â€**â€”â€”å½“é—®é¢˜å­˜åœ¨å°èŒƒå›´çš„é™åˆ¶æ—¶ï¼Œä¸å¦¨å°è¯•ç”¨äºŒè¿›åˆ¶çŠ¶æ€å‹ç¼©ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºå¯å¤„ç†çš„çŠ¶æ€è½¬ç§»é—®é¢˜ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œç›¸ä¿¡ä½ èƒ½è½»æ¾è§£å†³ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š189.75ç§’
# é¢˜ç›®ä¿¡æ¯

# [USACO11OPEN] Soldering G

## é¢˜ç›®æè¿°

The cows are playing with wires! They have learned a technique called soldering, in which they connect two pieces of wire together by attaching the endpoint of one wire to a location along the length of the other. (Soldering endpoint to endpoint is not allowed.) There can be multiple solder junctions at the same point.

The cows have a plan for an Amazing Structure they would like to build. It is in the form of a graph with N (1 <= N <= 50,000) nodes and N-1 edges of unit length so that each pair of nodes is connected. Each edge is described by a pair of integers, A and B (1 <= A <= N; 1 <= B <= N; A != B).

The cows are able to buy wire from a local store; however longer wire is more expensive. In particular the cows can buy a wire of length L with cost L\*L, but they cannot cut wires or join wires together.

Given the plan, the cows would like solder wires together to build their Amazing Structure. Please help them find the minimum possible cost!

Test data worth at least 50% of the points will have N <= 2,000.

Partial feedback will be provided on your first 50 submissions to this problem.

TIME LIMIT: 2 seconds

MEMORY LIMIT: 64 MB

å¥¶ç‰›å†³å®šç”¨ç”µçº¿ç„Šæ¥å‡ºä¸€ä¸ªç‰¹æ®Šå›¾å½¢ï¼Œè¿™ä¸ªå›¾å½¢æ˜¯è¿é€šçš„ï¼Œç”±Nä¸ªç‚¹ï¼ŒN -1æ¡è¾¹ç»„æˆï¼Œ æ¯æ¡è¾¹çš„é•¿åº¦éƒ½æ˜¯1ã€‚ç„Šæ¥æ‰€ç”¨çš„ç”µçº¿è¦ä»å½“åœ°çš„å•†åº—é‡Œä¹°ã€‚è¶Šé•¿çš„ç”µçº¿è¶Šè´µï¼Œä¸€æ¡é•¿åº¦ä¸º Lçš„ç”µçº¿å”®ä»·ä¸ºL^2 ã€‚ å¥¶ç‰›ä»¬å·²ç»å­¦ä¼šäº†åŸºæœ¬çš„ç„Šæ¥æ–¹æ³•ï¼Œ å¥¹ä»¬ä¼šæŠŠæŸæ¡ç”µçº¿çš„ä¸€ä¸ªç«¯ç‚¹ç„Šæ¥åˆ°å¦ä¸€æ¡ç”µçº¿çš„ ä¸­é—´æŸä¸ªä½ç½®ï¼Œ ä½†å¥¹ä»¬æ²¡æœ‰å­¦ä¼šå¦‚ä½•æŠŠä¸¤æ¡ç”µçº¿çš„ç«¯ç‚¹ç›´æ¥ç„Šæ¥èµ·æ¥ï¼Œ ä¹Ÿæ²¡æœ‰å­¦ä¼šæ€ä¹ˆæŠŠç”µ çº¿å‰ªæ–­ã€‚ å‘Šè¯‰ä½ å¥¶ç‰›å‡†å¤‡ç„Šæ¥çš„å›¾å½¢ï¼Œè¯·å‘Šè¯‰å¥¶ç‰›æ€ä¹ˆç„Šæ¥æ‰èƒ½æœ€èŠ‚çº¦ææ–™è´¹ç”¨ã€‚


## è¯´æ˜/æç¤º

Since all nodes in the structure are connected to node 1, we only need to buy one wire of length 2 and three of length 1, for a total cost of 2 \* 2 + 1 \* 1 + 1 \* 1 + 1 \* 1 = 7.


## æ ·ä¾‹ #1

### è¾“å…¥

```
6 
1 2 
1 3 
1 4 
1 5 
1 6 
```

### è¾“å‡º

```
7 
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO11OPEN] Soldering G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆæ ‘å½¢DPï¼‰+ å‡¸åŒ…ä¼˜åŒ– + å¯å‘å¼åˆå¹¶  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œç„Šæ¥æ ‘ç»“æ„â€é—®é¢˜çš„å…³é”®ï¼Œåœ¨äº**ç”¨æ ‘å½¢DPè®°å½•æ¯æ¡é“¾çš„ä¿¡æ¯**ï¼Œå¹¶é€šè¿‡**å‡¸åŒ…ä¼˜åŒ–**å¿«é€Ÿè®¡ç®—å¹³æ–¹æˆæœ¬çš„æœ€å°å€¼ï¼Œæœ€åç”¨**å¯å‘å¼åˆå¹¶**é«˜æ•ˆåˆå¹¶å­æ ‘æ•°æ®ã€‚  
å¯ä»¥æŠŠæ ‘æƒ³è±¡æˆä¸€æ£µâ€œç”µçº¿æ ‘â€ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¯ç”µçº¿çš„è¿æ¥ç‚¹ã€‚æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤â€œç»è¿‡è¯¥èŠ‚ç‚¹çš„é“¾â€çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚é“¾çš„åº•ç«¯èŠ‚ç‚¹ã€æˆæœ¬ï¼‰ï¼Œè¿™æ ·å°±èƒ½é€’å½’è®¡ç®—æ¯ä¸ªå­æ ‘çš„æœ€å°æˆæœ¬ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼šå¹³æ–¹æˆæœ¬çš„è®¡ç®—ï¼ˆ`LÂ²`ï¼‰ä¼šå¯¼è‡´DPè½¬ç§»æ–¹ç¨‹å¤æ‚ï¼Œç›´æ¥è®¡ç®—ä¼šè¶…æ—¶ï¼›å­æ ‘åˆå¹¶æ—¶éœ€è¦é«˜æ•ˆç»´æŠ¤é“¾çš„ä¿¡æ¯ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼š  
  1. å°†å¹³æ–¹æˆæœ¬æ‹†åˆ†ä¸ºçº¿æ€§å½¢å¼ï¼ˆå¦‚`f(v,k) + (d_u - d_k)Â² = f(v,k) + d_kÂ² - 2d_u d_k + d_uÂ²`ï¼‰ï¼Œç”¨**å‡¸åŒ…**æˆ–**æè¶…çº¿æ®µæ ‘**ç»´æŠ¤è¿™äº›çº¿æ€§å‡½æ•°ï¼Œå¿«é€ŸæŸ¥è¯¢æœ€å°å€¼ã€‚  
  2. ç”¨**å¯å‘å¼åˆå¹¶**ï¼ˆæŠŠå°çš„å­æ ‘åˆå¹¶åˆ°å¤§çš„å­æ ‘ï¼‰å‡å°‘æ•°æ®ç»“æ„çš„åˆå¹¶æ—¶é—´ï¼Œä¿è¯æ€»å¤æ‚åº¦ä¸º`O(n logÂ²n)`ã€‚  
- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
  ç”¨åƒç´ å—è¡¨ç¤ºæ ‘èŠ‚ç‚¹ï¼ˆé¢œè‰²åŒºåˆ†çˆ¶èŠ‚ç‚¹/å­èŠ‚ç‚¹ï¼‰ï¼ŒåŠ¨æ€å±•ç¤ºDPçŠ¶æ€çš„ä¼ é€’ï¼ˆæ¯”å¦‚é“¾çš„åº•ç«¯èŠ‚ç‚¹å˜åŒ–ï¼‰ï¼›ç”¨â€œå‡¸åŒ…â€å½¢çŠ¶çš„åƒç´ å›¾å½¢å±•ç¤ºçº¿æ€§å‡½æ•°çš„ç»´æŠ¤ï¼ˆæ¯”å¦‚æ·»åŠ æ–°å‡½æ•°æ—¶ï¼Œå‡¸åŒ…çš„è°ƒæ•´åŠ¨ç”»ï¼‰ï¼›å¯å‘å¼åˆå¹¶æ—¶ï¼Œç”¨â€œå°æ–¹å—èå…¥å¤§æ–¹å—â€çš„åŠ¨ç”»è¡¨ç¤ºå­æ ‘åˆå¹¶ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆæç¤ºå…³é”®æ“ä½œã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šä½œè€…Keroshiï¼ˆèµï¼š12ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ ¸å¿ƒæ˜¯**æ ‘å½¢DP + æè¶…çº¿æ®µæ ‘ä¼˜åŒ–**ï¼Œæ€è·¯ä¸¥è°¨ä¸”å¤æ‚åº¦æ­£ç¡®ï¼ˆ`O(n logÂ²n)`ï¼‰ã€‚ä½œè€…å®šä¹‰`f[u][k]`è¡¨ç¤ºç»è¿‡èŠ‚ç‚¹`u`åŠå…¶çˆ¶èŠ‚ç‚¹çš„é“¾çš„åº•ç«¯æ˜¯`k`æ—¶çš„æœ€å°æˆæœ¬ï¼Œé€šè¿‡æ‹†åˆ†å¹³æ–¹æˆæœ¬ä¸ºçº¿æ€§å½¢å¼ï¼Œç”¨æè¶…çº¿æ®µæ ‘ç»´æŠ¤è¿™äº›å‡½æ•°ï¼Œå¿«é€ŸæŸ¥è¯¢æ¯ä¸ªå­èŠ‚ç‚¹çš„æœ€å°è´¡çŒ®ã€‚ä»£ç ä¸­â€œå¯å‘å¼åˆå¹¶æè¶…æ ‘â€çš„é€»è¾‘ï¼ˆæŠŠå°çš„æè¶…æ ‘åˆå¹¶åˆ°å¤§çš„ï¼‰éå¸¸å·§å¦™ï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚è™½ç„¶ä»£ç å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†æ¯ä¸€æ­¥çš„è½¬ç§»éƒ½æœ‰æ˜ç¡®çš„æ•°å­¦ä¾æ®ï¼Œé€‚åˆå­¦ä¹ â€œå¦‚ä½•ç”¨æ•°æ®ç»“æ„ä¼˜åŒ–DPâ€ã€‚  

### é¢˜è§£äºŒï¼šä½œè€…hansangï¼ˆèµï¼š5ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£æ¥è‡ªå®˜æ–¹é¢˜è§£çš„ç¿»è¯‘ï¼Œæ€è·¯æ›´è´´è¿‘â€œç›´è§‚ç†è§£â€ã€‚ä½œè€…ç”¨`set`ç»´æŠ¤**å‡¸åŒ…**ï¼ˆä¸‹å‡¸å£³ï¼‰ï¼Œé€šè¿‡è®¡ç®—â€œæ–œç‡â€æ¥å¿«é€Ÿæ‰¾åˆ°æœ€ä¼˜çš„çº¿æ€§å‡½æ•°ã€‚ä»£ç ä¸­çš„`calc`å‡½æ•°ï¼ˆè®¡ç®—å‡¸åŒ…çš„äº¤ç‚¹ï¼‰å’Œ`dfs`ä¸­çš„å­æ ‘åˆå¹¶é€»è¾‘ï¼ˆå¯å‘å¼åˆå¹¶setï¼‰æ³¨é‡Šè¯¦ç»†ï¼Œå®¹æ˜“è·Ÿéšã€‚ç‰¹åˆ«æ˜¯ä½œè€…å°†â€œå¹³æ–¹æˆæœ¬â€æ‹†åˆ†ä¸º`LÂ² + 2Ll + (lÂ² + c)`çš„å½¢å¼ï¼Œæ¸…æ™°è§£é‡Šäº†å‡¸åŒ…ä¼˜åŒ–çš„åŸç†ï¼Œé€‚åˆæ–°æ‰‹ç†è§£â€œä¸ºä»€ä¹ˆè¦ç»´æŠ¤å‡¸åŒ…â€ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šæ ‘å½¢DPçš„çŠ¶æ€å®šä¹‰**  
* **é—®é¢˜**ï¼šå¦‚ä½•è®°å½•ç»è¿‡èŠ‚ç‚¹çš„é“¾çš„ä¿¡æ¯ï¼Œæ‰èƒ½æ­£ç¡®é€’å½’è®¡ç®—æˆæœ¬ï¼Ÿ  
* **åˆ†æ**ï¼š  
  é¢˜è§£ä¸­ç”¨`f[u][k]`ï¼ˆKeroshiï¼‰æˆ–`node`ç»“æ„ä½“ï¼ˆhansangï¼‰è®°å½•â€œé“¾çš„åº•ç«¯èŠ‚ç‚¹`k`â€å’Œâ€œå¯¹åº”çš„æˆæœ¬â€ã€‚ä¾‹å¦‚ï¼Œ`f[u][k]`è¡¨ç¤ºç»è¿‡`u`å’Œçˆ¶èŠ‚ç‚¹çš„é“¾çš„åº•ç«¯æ˜¯`k`ï¼Œè¿™æ ·å­èŠ‚ç‚¹çš„é“¾å¯ä»¥å»¶ä¼¸åˆ°çˆ¶èŠ‚ç‚¹ï¼Œè®¡ç®—æˆæœ¬æ—¶åªéœ€åŠ ä¸Šé“¾é•¿åº¦çš„å¹³æ–¹ï¼ˆ`(d_u - d_k)Â²`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ‘å½¢DPçš„çŠ¶æ€éœ€è¦è¦†ç›–â€œå­æ ‘çš„æ‰€æœ‰å¯èƒ½æƒ…å†µâ€ï¼Œè¿™é‡Œçš„â€œé“¾çš„åº•ç«¯èŠ‚ç‚¹â€å°±æ˜¯å…³é”®çš„çŠ¶æ€ç»´åº¦ã€‚  

### 2. **éš¾ç‚¹2ï¼šå¹³æ–¹æˆæœ¬çš„ä¼˜åŒ–**  
* **é—®é¢˜**ï¼šç›´æ¥è®¡ç®—`(d_u - d_k)Â²`ä¼šå¯¼è‡´è½¬ç§»æ–¹ç¨‹ä¸º`O(nÂ²)`ï¼Œæ— æ³•é€šè¿‡å¤§æ•°æ®ã€‚  
* **åˆ†æ**ï¼š  
  å°†å¹³æ–¹æˆæœ¬æ‹†åˆ†ä¸º`d_kÂ² - 2d_u d_k + d_uÂ²`ï¼Œå…¶ä¸­`d_uÂ²`æ˜¯å¸¸æ•°ï¼Œ`-2d_u d_k + (d_kÂ² + f(v,k))`æ˜¯å…³äº`d_u`çš„çº¿æ€§å‡½æ•°ï¼ˆæ–œç‡ä¸º`-2d_k`ï¼Œæˆªè·ä¸º`d_kÂ² + f(v,k)`ï¼‰ã€‚ç”¨å‡¸åŒ…æˆ–æè¶…çº¿æ®µæ ‘ç»´æŠ¤è¿™äº›çº¿æ€§å‡½æ•°ï¼Œå¿«é€ŸæŸ¥è¯¢å¯¹äºç»™å®š`d_u`çš„æœ€å°å€¼ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¹³æ–¹æˆæœ¬çš„ä¼˜åŒ–é€šå¸¸å¯ä»¥é€šè¿‡â€œçº¿æ€§åŒ–â€+â€œå‡¸åŒ…/æè¶…æ ‘â€è§£å†³ï¼Œå…³é”®æ˜¯æ‰¾åˆ°â€œçº¿æ€§å‡½æ•°â€çš„å½¢å¼ã€‚  

### 3. **éš¾ç‚¹3ï¼šå¯å‘å¼åˆå¹¶çš„æ•°æ®ç»“æ„ç»´æŠ¤**  
* **é—®é¢˜**ï¼šå­æ ‘åˆå¹¶æ—¶ï¼Œå¦‚ä½•é«˜æ•ˆç»´æŠ¤é“¾çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚å‡¸åŒ…æˆ–æè¶…æ ‘ï¼‰ï¼Ÿ  
* **åˆ†æ**ï¼š  
  ç”¨â€œå¯å‘å¼åˆå¹¶â€ï¼ˆåˆç§°â€œæŒ‰å¤§å°åˆå¹¶â€ï¼‰ï¼šæ¯æ¬¡å°†è¾ƒå°çš„å­æ ‘åˆå¹¶åˆ°è¾ƒå¤§çš„å­æ ‘ä¸­ã€‚ä¾‹å¦‚ï¼Œhansangçš„ä»£ç ä¸­ï¼Œå½“åˆå¹¶ä¸¤ä¸ªå­æ ‘çš„`set`æ—¶ï¼Œæ€»æ˜¯å°†è¾ƒå°çš„`set`ä¸­çš„å…ƒç´ æ’å…¥åˆ°è¾ƒå¤§çš„`set`ä¸­ï¼Œè¿™æ ·æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«åˆå¹¶`log n`æ¬¡ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º`O(n logÂ²n)`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¯å‘å¼åˆå¹¶æ˜¯å¤„ç†â€œå­æ ‘åˆå¹¶â€é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ï¼Œèƒ½æœ‰æ•ˆé™ä½æ—¶é—´å¤æ‚åº¦ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆhansangé¢˜è§£çš„æ€è·¯ï¼Œæå–æ ‘å½¢DP + å‡¸åŒ…ä¼˜åŒ–çš„æ ¸å¿ƒæ¡†æ¶ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <set>
  #include <algorithm>
  using namespace std;
  typedef long long LL;
  const int N = 5e4 + 10;
  const LL inf = 1e18;

  vector<int> G[N];
  LL dep[N], dp[N];
  int p[N]; // å¯å‘å¼åˆå¹¶çš„æ ¹èŠ‚ç‚¹

  struct Node {
      LL d, c, f; // æ·±åº¦ã€æˆæœ¬ã€å‡¸åŒ…äº¤ç‚¹ï¼ˆæ–œç‡ç›¸å…³ï¼‰
      bool tag; // æ ‡è®°æ˜¯å¦ä¸ºæŸ¥æ‰¾çŠ¶æ€
      bool operator<(const Node& other) const {
          if (tag || other.tag) return f < other.f;
          if (d != other.d) return d > other.d;
          return c < other.c;
      }
  };
  set<Node> b[N];

  LL sq(LL x) { return x * x; }

  // è®¡ç®—ä¸¤ä¸ªçº¿æ€§å‡½æ•°çš„äº¤ç‚¹ï¼ˆå‡¸åŒ…ä¼˜åŒ–ç”¨ï¼‰
  LL calc(const Node& a, const Node& b) {
      if (a.d > b.d) return calc(b, a);
      LL numerator = (sq(a.d) + a.c) - (sq(b.d) + b.c);
      LL denominator = 2 * (b.d - a.d);
      if (denominator == 0) return inf;
      LL res = numerator / denominator;
      while ((sq(a.d) + a.c) - (sq(b.d) + b.c) > res * 2 * (b.d - a.d)) res++;
      return res;
  }

  void dfs(int u, int fa) {
      LL sum = 0;
      for (int v : G[u]) {
          if (v == fa) continue;
          dep[v] = dep[u] + 1;
          dfs(v, u);
          // æŸ¥è¯¢vå­æ ‘çš„æœ€ä¼˜è§£ï¼ˆå¯¹åº”uçš„æ·±åº¦ï¼‰
          Node query_node{0, 0, dep[u], true};
          auto it = b[p[v]].upper_bound(query_node);
          if (it != b[p[v]].begin()) {
              --it;
              LL cost = sq(it->d - dep[u]) + it->c + dp[v];
              sum += cost;
          }
          // å¯å‘å¼åˆå¹¶ï¼šå°†å°çš„å­æ ‘åˆå¹¶åˆ°å¤§çš„å­æ ‘
          if (b[p[u]].size() < b[p[v]].size()) {
              swap(p[u], p[v]);
              swap(dp[u], dp[v]);
          }
          // åˆå¹¶vçš„setåˆ°uçš„set
          for (const Node& node : b[p[v]]) {
              Node new_node = node;
              new_node.c += dp[u] - dp[v]; // è°ƒæ•´æˆæœ¬
              auto insert_it = b[p[u]].insert(new_node).first;
              // ç»´æŠ¤å‡¸åŒ…ï¼ˆä¸‹å‡¸å£³ï¼‰
              // ...ï¼ˆçœç•¥å‡¸åŒ…ç»´æŠ¤çš„ç»†èŠ‚ï¼Œå‚è€ƒhansangé¢˜è§£ï¼‰
          }
          dp[u] += dp[v];
      }
      // æ·»åŠ å½“å‰èŠ‚ç‚¹çš„é“¾ä¿¡æ¯åˆ°å‡¸åŒ…
      if (b[p[u]].empty()) {
          b[p[u]].insert({dep[u], 0, -inf, false});
      } else {
          Node new_node{dep[u], sum - dp[u], 0, false};
          // ç»´æŠ¤å‡¸åŒ…
          // ...ï¼ˆçœç•¥ç»†èŠ‚ï¼‰
          b[p[u]].insert(new_node);
      }
  }

  int main() {
      int n;
      cin >> n;
      for (int i = 1; i <= n; ++i) p[i] = i;
      for (int i = 0; i < n-1; ++i) {
          int a, b;
          cin >> a >> b;
          G[a].push_back(b);
          G[b].push_back(a);
      }
      dep[1] = 0;
      dfs(1, 0);
      // æŸ¥è¯¢æ ¹èŠ‚ç‚¹çš„æœ€ä¼˜è§£
      Node query_node{0, 0, 0, true};
      auto it = b[p[1]].upper_bound(query_node);
      if (it != b[p[1]].begin()) {
          --it;
          cout << dp[1] + it->c + sq(it->d) << endl;
      }
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç çš„æ ¸å¿ƒæ˜¯`dfs`å‡½æ•°ï¼Œé€’å½’å¤„ç†æ¯ä¸ªå­æ ‘ï¼š  
  1. è®¡ç®—å­èŠ‚ç‚¹çš„è´¡çŒ®ï¼ˆé€šè¿‡æŸ¥è¯¢å‡¸åŒ…å¾—åˆ°æœ€ä¼˜è§£ï¼‰ï¼›  
  2. å¯å‘å¼åˆå¹¶å­æ ‘çš„`set`ï¼ˆç»´æŠ¤å‡¸åŒ…ï¼‰ï¼›  
  3. å°†å½“å‰èŠ‚ç‚¹çš„é“¾ä¿¡æ¯æ·»åŠ åˆ°å‡¸åŒ…ä¸­ã€‚  
  ä¸»å‡½æ•°ä¸­ï¼ŒæŸ¥è¯¢æ ¹èŠ‚ç‚¹çš„å‡¸åŒ…ï¼Œå¾—åˆ°æœ€å°æˆæœ¬ã€‚  


### é¢˜è§£äºŒï¼ˆhansangï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨`set`ç»´æŠ¤å‡¸åŒ…ï¼Œä»£ç æ³¨é‡Šè¯¦ç»†ï¼Œå®¹æ˜“ç†è§£ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  // è®¡ç®—ä¸¤ä¸ªçº¿æ€§å‡½æ•°çš„äº¤ç‚¹ï¼ˆå‡¸åŒ…ä¼˜åŒ–ç”¨ï¼‰
  LL calc(const Node& a, const Node& b) {
      if (a.d > b.d) return calc(b, a);
      LL numerator = (sq(a.d) + a.c) - (sq(b.d) + b.c);
      LL denominator = 2 * (b.d - a.d);
      if (denominator == 0) return inf;
      LL res = numerator / denominator;
      while ((sq(a.d) + a.c) - (sq(b.d) + b.c) > res * 2 * (b.d - a.d)) res++;
      return res;
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  è¿™ä¸ªå‡½æ•°è®¡ç®—ä¸¤ä¸ªçº¿æ€§å‡½æ•°ï¼ˆå¯¹åº”é“¾çš„ä¿¡æ¯ï¼‰çš„äº¤ç‚¹ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°`f1(L) = 2*L*a.d + (a.dÂ² + a.c)`å’Œ`f2(L) = 2*L*b.d + (b.dÂ² + b.c)`çš„äº¤ç‚¹`L`ï¼Œè¡¨ç¤ºå½“`L`è¶…è¿‡è¿™ä¸ªå€¼æ—¶ï¼Œ`f2`æ¯”`f1`æ›´ä¼˜ã€‚é€šè¿‡è¿™ä¸ªäº¤ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤å‡¸åŒ…çš„ä¸‹å‡¸å£³ï¼Œå¿«é€ŸæŸ¥è¯¢æœ€ä¼˜è§£ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‡¸åŒ…ä¼˜åŒ–çš„å…³é”®æ˜¯è®¡ç®—â€œäº¤ç‚¹â€ï¼Œä»è€Œç¡®å®šå“ªä¸ªçº¿æ€§å‡½æ•°æ›´ä¼˜ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šåƒç´ ç”µçº¿å·¥ã€‹  
**é£æ ¼**ï¼š8ä½åƒç´ é£ï¼ˆç±»ä¼¼FCæ¸¸æˆï¼‰ï¼Œç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºæ ‘èŠ‚ç‚¹ï¼ˆçˆ¶èŠ‚ç‚¹ä¸ºè“è‰²ï¼Œå­èŠ‚ç‚¹ä¸ºç»¿è‰²ï¼‰ã€å‡¸åŒ…ï¼ˆé»„è‰²åƒç´ çº¿ï¼‰ã€é“¾ï¼ˆçº¢è‰²åƒç´ çº¿ï¼‰ã€‚  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤ºä¸€æ£µåƒç´ æ ‘ï¼ˆæ ¹èŠ‚ç‚¹1åœ¨ä¸­å¿ƒï¼Œå­èŠ‚ç‚¹å‘å››å‘¨å±•å¼€ï¼‰ï¼›  
   - æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼›  
   - èƒŒæ™¯éŸ³ä¹ï¼š8ä½é£æ ¼çš„è½»å¿«æ—‹å¾‹ã€‚  

2. **DFSè¿‡ç¨‹**ï¼š  
   - ç”¨â€œåƒç´ ç®­å¤´â€æŒ‡ç¤ºå½“å‰å¤„ç†çš„èŠ‚ç‚¹ï¼ˆå¦‚èŠ‚ç‚¹2ï¼‰ï¼›  
   - å­èŠ‚ç‚¹çš„é“¾ä¿¡æ¯ï¼ˆå¦‚èŠ‚ç‚¹2çš„é“¾åº•ç«¯æ˜¯èŠ‚ç‚¹5ï¼‰ç”¨çº¢è‰²åƒç´ çº¿è¿æ¥ï¼Œä¼´éšâ€œæ»´â€çš„éŸ³æ•ˆï¼›  
   - è®¡ç®—å­èŠ‚ç‚¹è´¡çŒ®æ—¶ï¼Œå‡¸åŒ…ï¼ˆé»„è‰²åƒç´ çº¿ï¼‰ä¼šåŠ¨æ€è°ƒæ•´ï¼Œæ·»åŠ æ–°çš„çº¿æ€§å‡½æ•°ï¼ˆå¦‚èŠ‚ç‚¹5çš„å‡½æ•°ï¼‰ã€‚  

3. **å¯å‘å¼åˆå¹¶**ï¼š  
   - å½“åˆå¹¶å­æ ‘æ—¶ï¼Œå°çš„å­æ ‘ï¼ˆå¦‚èŠ‚ç‚¹2çš„å­æ ‘ï¼‰çš„åƒç´ å—ä¼šâ€œèå…¥â€å¤§çš„å­æ ‘ï¼ˆå¦‚èŠ‚ç‚¹1çš„å­æ ‘ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
   - å‡¸åŒ…ä¼šåŠ¨æ€æ›´æ–°ï¼Œåˆ é™¤è¢«æ”¯é…çš„çº¿æ€§å‡½æ•°ï¼ˆå¦‚èŠ‚ç‚¹5çš„å‡½æ•°è¢«èŠ‚ç‚¹3çš„å‡½æ•°æ”¯é…ï¼‰ã€‚  

4. **ç»“æœå±•ç¤º**ï¼š  
   - æ‰¾åˆ°æœ€å°æˆæœ¬æ—¶ï¼Œæ ¹èŠ‚ç‚¹1ä¼šé—ªçƒï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„8ä½éŸ³è°ƒï¼‰ï¼›  
   - å±å¹•æ˜¾ç¤ºæ€»æˆæœ¬ï¼ˆå¦‚æ ·ä¾‹çš„7ï¼‰ï¼Œä»¥åŠç”¨åˆ°çš„ç”µçº¿é•¿åº¦ï¼ˆå¦‚1æ¡é•¿åº¦2ï¼Œ3æ¡é•¿åº¦1ï¼‰ã€‚  

### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼ŒåŠ¨ç”»æ‰§è¡Œä¸€æ­¥ï¼ˆå¦‚å¤„ç†ä¸€ä¸ªå­èŠ‚ç‚¹ï¼‰ï¼›  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šæ‹–åŠ¨é€Ÿåº¦æ»‘å—è°ƒæ•´æ’­æ”¾é€Ÿåº¦ï¼ˆå¦‚1xã€2xï¼‰ï¼›  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **æ ‘å½¢DP + å‡¸åŒ…ä¼˜åŒ–**ï¼šé€‚ç”¨äºâ€œæ ‘ç»“æ„ä¸­çš„è·¯å¾„æˆæœ¬è®¡ç®—â€é—®é¢˜ï¼Œå¦‚â€œæ±‚æ ‘ä¸­æ‰€æœ‰è·¯å¾„çš„æœ€å°å¹³æ–¹å’Œâ€ï¼›  
- **å¯å‘å¼åˆå¹¶**ï¼šé€‚ç”¨äºâ€œå­æ ‘åˆå¹¶â€é—®é¢˜ï¼Œå¦‚â€œç»´æŠ¤å­æ ‘ä¸­çš„ä¿¡æ¯ï¼ˆå¦‚æœ€å¤§å€¼ã€æœ€å°å€¼ï¼‰â€ï¼›  
- **å¹³æ–¹æˆæœ¬ä¼˜åŒ–**ï¼šé€‚ç”¨äºâ€œæˆæœ¬ä¸ºçº¿æ€§å‡½æ•°å¹³æ–¹â€çš„é—®é¢˜ï¼Œå¦‚â€œè·¯å¾„é•¿åº¦çš„å¹³æ–¹å’Œæœ€å°â€ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P3628 [APIO2010] ç‰¹åˆ«è¡ŒåŠ¨é˜Ÿ**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜æ˜¯â€œçº¿æ€§DP + å‡¸åŒ…ä¼˜åŒ–â€çš„ç»å…¸é¢˜ï¼Œèƒ½å¸®åŠ©ä½ å·©å›ºâ€œå¹³æ–¹æˆæœ¬ä¼˜åŒ–â€çš„æ€è·¯ã€‚  
2. **æ´›è°· P4072 [SDOI2016] å¾é€”**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜è¦æ±‚â€œå°†è·¯å¾„åˆ†æˆkæ®µï¼Œä½¿å¹³æ–¹å’Œæœ€å°â€ï¼Œéœ€è¦ç”¨åˆ°â€œå‡¸åŒ…ä¼˜åŒ–â€å’Œâ€œå‰ç¼€å’Œâ€ï¼Œæ˜¯æ ‘å½¢DPçš„å»¶ä¼¸ã€‚  
3. **æ´›è°· P5017 [NOIP2018 æé«˜ç»„] æ‘†æ¸¡è½¦**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜è¦æ±‚â€œæœ€å°åŒ–ç­‰å¾…æ—¶é—´çš„å¹³æ–¹å’Œâ€ï¼Œéœ€è¦ç”¨åˆ°â€œçº¿æ€§DP + å‡¸åŒ…ä¼˜åŒ–â€ï¼Œä¸æœ¬é¢˜çš„æˆæœ¬æ¨¡å‹ç±»ä¼¼ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
> **å‚è€ƒç»éªŒ (æ¥è‡ªhansang)**ï¼šâ€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆå¯¹â€˜å‡¸åŒ…ä¼˜åŒ–â€™çš„åŸç†ä¸å¤ªç†è§£ï¼Œåæ¥é€šè¿‡ç¿»è¯‘å®˜æ–¹é¢˜è§£ï¼Œæ‰æ˜ç™½â€˜å¹³æ–¹æˆæœ¬â€™å¯ä»¥æ‹†åˆ†ä¸ºçº¿æ€§å‡½æ•°ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œ**æ•°å­¦æ¨å¯¼æ˜¯ä¼˜åŒ–DPçš„å…³é”®**ã€‚â€  
> **ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨å¤„ç†â€œå¹³æ–¹æˆæœ¬â€é—®é¢˜æ—¶ï¼Œä¸è¦ç›´æ¥è®¡ç®—ï¼Œè€Œæ˜¯é€šè¿‡æ•°å­¦æ¨å¯¼å°†å…¶è½¬åŒ–ä¸ºçº¿æ€§å½¢å¼ï¼Œå†ç”¨æ•°æ®ç»“æ„ä¼˜åŒ–ã€‚è¿™æ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„å¸¸ç”¨æŠ€å·§ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[USACO11OPEN] Soldering Gâ€çš„åˆ†æï¼Œæˆ‘ä»¬å­¦ä¹ äº†**æ ‘å½¢DP + å‡¸åŒ…ä¼˜åŒ– + å¯å‘å¼åˆå¹¶**çš„ç»„åˆæŠ€å·§ã€‚è®°ä½ï¼Œ**æ•°å­¦æ¨å¯¼**ï¼ˆæ‹†åˆ†å¹³æ–¹æˆæœ¬ï¼‰å’Œ**æ•°æ®ç»“æ„**ï¼ˆå‡¸åŒ…ã€å¯å‘å¼åˆå¹¶ï¼‰æ˜¯è§£å†³å¤æ‚DPé—®é¢˜çš„å…³é”®ã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£è¿™äº›æŠ€å·§ï¼Œå¹¶åœ¨åç»­ç»ƒä¹ ä¸­ä¸¾ä¸€åä¸‰ï¼ğŸ’ª  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ˜Š

---
å¤„ç†ç”¨æ—¶ï¼š160.95ç§’
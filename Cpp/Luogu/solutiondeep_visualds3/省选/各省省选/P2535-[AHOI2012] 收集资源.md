# é¢˜ç›®ä¿¡æ¯

# [AHOI2012] æ”¶é›†èµ„æº

## é¢˜ç›®æè¿°

 ![](https://cdn.luogu.com.cn/upload/pic/1637.png) 

 ![](https://cdn.luogu.com.cn/upload/pic/1638.png) 



## è¯´æ˜/æç¤º

æ•°æ®ï¼š

50%: 1<=N,M,T<=100

100%: 1<=N,M,T<=200


## æ ·ä¾‹ #1

### è¾“å…¥

```
8 8 10
1 1 3
2 2 4
3 3 5
3 4 3
4 3 2
4 4 6
5 5 7
6 6 8```

### è¾“å‡º

```
28```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[AHOI2012] æ”¶é›†èµ„æº æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œAHOI2012 æ”¶é›†èµ„æºâ€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶æ¢³ç†é¢˜ç›®æ€è·¯ï¼Œç†è§£æ ¸å¿ƒç®—æ³•ï¼Œå¹¶æŒæ¡è§£é¢˜æŠ€å·§ã€‚


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæœç´¢(DFS) + å‰ªæä¼˜åŒ–  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œå°±åƒ**â€œåƒç´ æ¢é™©å®¶åœ¨ç½‘æ ¼é‡Œæ‰¾å®è—â€**â€”â€”ä½ éœ€è¦ä»èµ·ç‚¹å‡ºå‘ï¼Œå‰å¾€å„ä¸ªèµ„æºç‚¹æ”¶é›†ä»·å€¼ï¼Œä½†æ¯èµ°ä¸€æ­¥éƒ½è¦èŠ±æ—¶é—´ï¼Œæ€»æ—¶é—´ä¸èƒ½è¶…è¿‡é™åˆ¶ã€‚è€ŒDFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰å°±æ˜¯è¿™ä½â€œæ¢é™©å®¶â€çš„è¡ŒåŠ¨é€»è¾‘ï¼šèµ°åˆ°ä¸€ä¸ªèµ„æºç‚¹åï¼Œå°è¯•æ‰€æœ‰èƒ½åˆ°è¾¾çš„**æœªè®¿é—®è¿‡**çš„èµ„æºç‚¹ï¼Œèµ°ä¸é€šå°±å›å¤´æ¢æ¡è·¯ï¼Œç›´åˆ°æ‰¾åˆ°â€œæ€»åˆ†æœ€é«˜â€çš„è·¯çº¿ã€‚  

### ç®—æ³•åœ¨æœ¬é¢˜çš„åº”ç”¨  
- **æ ¸å¿ƒé€»è¾‘**ï¼šæ¯ä¸ªçŠ¶æ€è®°å½•â€œå½“å‰æ‰€åœ¨èµ„æºç‚¹ã€å·²ç”¨æ—¶é—´ã€å·²å¾—åˆ†æ•°â€ï¼Œéå†æ‰€æœ‰èƒ½åˆ°è¾¾çš„æœªè®¿é—®èµ„æºç‚¹ï¼Œæ›´æ–°æœ€å¤§åˆ†æ•°ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼š  
  1. å¦‚ä½•é¿å…â€œç»•è¿œè·¯â€ï¼ˆæ¯”å¦‚ä¸¤ä¸ªç‚¹ä¹‹é—´æœ‰å…¶ä»–èµ„æºç‚¹ï¼Œç›´æ¥èµ°ä¼šé”™è¿‡ä¸­é—´çš„èµ„æºï¼Œæ‰€ä»¥è¿™ç±»è¾¹è¦æ’é™¤ï¼‰ï¼›  
  2. å¦‚ä½•å‡å°‘æ— æ•ˆæœç´¢ï¼ˆæ¯”å¦‚å·²ç»ç”¨äº†å¾ˆå¤šæ—¶é—´ï¼Œå‰©ä¸‹çš„æ—¶é—´å³ä½¿å…¨æ‹¿æœ€å¤§ä»·å€¼ä¹Ÿä¸å¦‚å·²æœ‰ç­”æ¡ˆï¼Œè¿™æ—¶åº”è¯¥ç›´æ¥â€œå›å¤´â€ï¼‰ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼š  
  - é¢˜è§£ä¸€é€šè¿‡**é¢„å¤„ç†æœ‰æ•ˆè¾¹**ï¼ˆæ£€æŸ¥ä¸¤ç‚¹ä¹‹é—´æ˜¯å¦æœ‰å…¶ä»–èµ„æºç‚¹ï¼Œæ²¡æœ‰æ‰è¿è¾¹ï¼‰é¿å…ç»•è¿œè·¯ï¼›  
  - é¢˜è§£äºŒç”¨**A*å‰ªæ**ï¼ˆä¼°è®¡å‰©ä½™æœ€å¤§å¯èƒ½ä»·å€¼ï¼Œå¦‚æœåŠ ä¸Šå½“å‰åˆ†æ•°è¿˜ä¸å¦‚å·²æœ‰ç­”æ¡ˆï¼Œå°±åœæ­¢è¿™æ¡è·¯å¾„çš„æœç´¢ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**è¿˜åŸè¿™ä¸ªè¿‡ç¨‹ï¼š  
- èµ„æºç‚¹ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºï¼ˆæ¯”å¦‚è“è‰²æ˜¯èµ·ç‚¹ï¼Œé»„è‰²æ˜¯èµ„æºç‚¹ï¼‰ï¼›  
- æ¯ä¸€æ­¥DFSéƒ½ä¼š**é«˜äº®å½“å‰èµ„æºç‚¹**ï¼ˆé—ªçƒæˆ–åŠ åƒç´ ç®­å¤´ï¼‰ï¼Œå·²è®¿é—®çš„ç‚¹å˜æµ…ç°è‰²ï¼›  
- æ—¶é—´å’Œåˆ†æ•°ç”¨åƒç´ æ•°å­—å®æ—¶æ˜¾ç¤ºåœ¨å±å¹•å³ä¾§ï¼›  
- å‰ªææ—¶ä¼šå¼¹å‡ºâ€œå‰ªæâ€æç¤ºæ¡†ï¼Œä¼´éšçŸ­ä¿ƒçš„â€œå’”â€å£°ï¼›  
- è‡ªåŠ¨æ’­æ”¾æ¨¡å¼åƒâ€œè´ªåƒè›‡AIâ€ä¸€æ ·ï¼Œé€æ­¥å±•ç¤ºæ¢é™©å®¶çš„é€‰æ‹©ï¼ŒæˆåŠŸæ‰¾åˆ°é«˜åˆ†è·¯çº¿æ—¶ä¼šæœ‰â€œèƒœåˆ©éŸ³æ•ˆâ€ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºäº†æ›´å¥½åœ°ç†è§£è§£é¢˜è¿‡ç¨‹ï¼Œæˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç å¯è¯»æ€§ã€ç®—æ³•æœ‰æ•ˆæ€§ç­‰æ–¹é¢ï¼Œä¸ºå¤§å®¶ç­›é€‰äº†ä»¥ä¸‹è¯„åˆ†è¾ƒé«˜çš„é¢˜è§£ï¼š

**é¢˜è§£ä¸€ï¼š(æ¥æºï¼šcaddy)**  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**æ ¸å¿ƒäº®ç‚¹æ˜¯â€œé¢„å¤„ç†æœ‰æ•ˆè¾¹â€**â€”â€”é€šè¿‡`check`å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªèµ„æºç‚¹ä¹‹é—´æ˜¯å¦æœ‰å…¶ä»–ç‚¹ï¼Œå¦‚æœæœ‰ï¼Œå°±ä¸ç›´æ¥è¿è¾¹ï¼ˆå› ä¸ºä¸­é—´çš„èµ„æºç‚¹æ›´åº”è¯¥ä¼˜å…ˆè®¿é—®ï¼‰ã€‚è¿™æ ·å»ºå›¾åï¼ŒDFSçš„è·¯å¾„ä¼šæ›´â€œåˆç†â€ï¼Œé¿å…èµ°æ— æ•ˆè·¯çº¿ã€‚ä»£ç ç»“æ„å¾ˆæ¸…æ™°ï¼šå…ˆè¯»å…¥æ•°æ®ï¼Œå†å»ºå›¾ï¼Œæœ€åDFSéå†æ‰€æœ‰å¯èƒ½ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯æ²¡æœ‰å‰ªæï¼Œå¯¹äºå¤§ä¸€ç‚¹çš„æ•°æ®å¯èƒ½ä¼šæ…¢ï¼Œä½†æ€è·¯éå¸¸é€‚åˆç†è§£â€œä¸ºä»€ä¹ˆè¦é¢„å¤„ç†è¾¹â€ã€‚

**é¢˜è§£äºŒï¼š(æ¥æºï¼škarma)**  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**å‰ªææŠ€å·§éå¸¸å·§å¦™**ï¼å®ƒç”¨äº†ç±»ä¼¼A*ç®—æ³•çš„æ€è·¯ï¼šå‡è®¾å‰©ä¸‹çš„æ—¶é—´å…¨ç”¨æ¥æ‹¿â€œæœ€å¤§ä»·å€¼çš„èµ„æºç‚¹â€ï¼Œå¦‚æœâ€œå½“å‰åˆ†æ•°+å‰©ä½™æœ€å¤§å¯èƒ½ä»·å€¼â€è¿˜ä¸å¦‚å·²æœ‰ç­”æ¡ˆï¼Œå°±ç›´æ¥åœæ­¢è¿™æ¡è·¯å¾„çš„æœç´¢ï¼ˆå‰ªæï¼‰ã€‚å¦å¤–ï¼Œä½œè€…è¿˜å¤„ç†äº†â€œæœ€çŸ­è·ç¦»ä¸º0â€çš„ç„å­¦é—®é¢˜ï¼ˆç»™ä¸ªé»˜è®¤å€¼3ï¼‰ï¼Œé¿å…ç¨‹åºå‡ºé”™ã€‚ä»£ç æ›´ç®€æ´ï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜ï¼Œæ˜¯â€œä¼˜åŒ–DFSâ€çš„å…¸å‹ä¾‹å­ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œå¤§å®¶å¸¸é‡åˆ°3ä¸ªâ€œå¡å£³ç‚¹â€ï¼Œç»“åˆé¢˜è§£çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€ä¸€è§£å†³ï¼š

### 1. å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªèµ„æºç‚¹ä¹‹é—´å¯ä»¥ç›´æ¥èµ°ï¼Ÿ  
- **éš¾ç‚¹**ï¼šå¦‚æœä¸¤ä¸ªç‚¹ä¹‹é—´æœ‰å…¶ä»–èµ„æºç‚¹ï¼Œç›´æ¥èµ°ä¼šé”™è¿‡ä¸­é—´çš„èµ„æºï¼Œæ‰€ä»¥è¿™ç±»è¾¹æ˜¯â€œæ— æ•ˆâ€çš„ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼ˆé¢˜è§£ä¸€ï¼‰ï¼šç”¨`check`å‡½æ•°æ£€æŸ¥ä¸¤ç‚¹å½¢æˆçš„çŸ©å½¢èŒƒå›´å†…æ˜¯å¦æœ‰å…¶ä»–èµ„æºç‚¹ã€‚å¦‚æœæœ‰ï¼Œå°±ä¸è¿è¾¹ï¼›æ²¡æœ‰ï¼Œæ‰è®¡ç®—æ›¼å“ˆé¡¿è·ç¦»ä½œä¸ºè¾¹çš„æƒé‡ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†æœ‰æ•ˆè¾¹ï¼Œèƒ½å¤§å¹…å‡å°‘DFSçš„æ— æ•ˆè·¯å¾„ã€‚

### 2. å¦‚ä½•å‡å°‘DFSçš„æ— æ•ˆæœç´¢ï¼Ÿ  
- **éš¾ç‚¹**ï¼šDFSå®¹æ˜“â€œé’»ç‰›è§’å°–â€â€”â€”æ¯”å¦‚å·²ç»ç”¨äº†90%çš„æ—¶é—´ï¼Œå‰©ä¸‹çš„æ—¶é—´å³ä½¿å…¨æ‹¿æœ€å¤§ä»·å€¼ä¹Ÿä¸å¦‚å·²æœ‰ç­”æ¡ˆï¼Œè¿™æ—¶ç»§ç»­æœç´¢å°±æ˜¯æµªè´¹æ—¶é—´ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼ˆé¢˜è§£äºŒï¼‰ï¼šç”¨**A*å‰ªæ**ã€‚è®¡ç®—â€œå‰©ä½™æ—¶é—´Ã·æœ€çŸ­è¾¹æƒÃ—æœ€å¤§èµ„æºä»·å€¼â€ï¼ˆä¼°è®¡å‰©ä½™æœ€å¤§å¯èƒ½ä»·å€¼ï¼‰ï¼Œå¦‚æœâ€œå½“å‰åˆ†æ•°+ä¼°è®¡å€¼â€â‰¤å·²æœ‰ç­”æ¡ˆï¼Œå°±åœæ­¢è¿™æ¡è·¯å¾„çš„æœç´¢ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ªææ˜¯DFSçš„â€œåŠ é€Ÿå™¨â€ï¼Œèƒ½å¸®ä½ è·³è¿‡æ²¡ç”¨çš„è·¯çº¿ã€‚

### 3. å¦‚ä½•å¤„ç†èµ·ç‚¹ï¼Ÿ  
- **éš¾ç‚¹**ï¼šé¢˜ç›®ä¸­çš„èµ·ç‚¹æ˜¯(0,0)å—ï¼Ÿéœ€è¦æŠŠèµ·ç‚¹åŠ å…¥å›¾ä¸­ï¼Œä½œä¸ºDFSçš„åˆå§‹çŠ¶æ€ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼šä¸¤ä¸ªé¢˜è§£éƒ½æŠŠèµ·ç‚¹å½“ä½œâ€œç¬¬0ä¸ªèµ„æºç‚¹â€ï¼ˆ`node[0]`æˆ–`a[0]`ï¼‰ï¼Œè®¡ç®—å®ƒåˆ°å…¶ä»–èµ„æºç‚¹çš„è·ç¦»ï¼Œä½œä¸ºåˆå§‹è¾¹ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šèµ·ç‚¹æ˜¯DFSçš„â€œå…¥å£â€ï¼Œä¸€å®šè¦è®°å¾—åŠ å…¥å›¾ä¸­ï¼

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- é¢„å¤„ç†æœ‰æ•ˆè¾¹ï¼Œé¿å…ç»•è¿œè·¯ï¼›  
- ç”¨å‰ªæå‡å°‘æ— æ•ˆæœç´¢ï¼›  
- æŠŠèµ·ç‚¹å½“ä½œç‰¹æ®ŠèŠ‚ç‚¹ï¼ŒåŠ å…¥å›¾ä¸­ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

åœ¨æ·±å…¥åˆ†æå…·ä½“é¢˜è§£çš„ç²¾å¦™ç‰‡æ®µä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ª**ç»¼åˆäº†æœ‰æ•ˆè¾¹é¢„å¤„ç†+A*å‰ªæ**çš„é€šç”¨æ ¸å¿ƒå®ç°ï¼Œå¸®å¤§å®¶æŠŠæ¡æ•´ä½“æ¡†æ¶ã€‚

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†é¢˜è§£ä¸€çš„â€œæœ‰æ•ˆè¾¹é¢„å¤„ç†â€å’Œé¢˜è§£äºŒçš„â€œA*å‰ªæâ€ï¼Œæ˜¯ä¸€ä¸ªæ›´å®Œæ•´çš„æ ¸å¿ƒå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <cstring>
using namespace std;

const int MAXM = 205;
struct Node { int x, y, v; } node[MAXM]; // èµ„æºç‚¹ï¼ˆ0å·æ˜¯èµ·ç‚¹ï¼‰
int n, m, t, ans;
int g[MAXM][MAXM]; // å›¾ï¼šg[i][j]æ˜¯iåˆ°jçš„æ—¶é—´ï¼ˆæ›¼å“ˆé¡¿è·ç¦»ï¼‰
bool vis[MAXM];    // æ ‡è®°æ˜¯å¦è®¿é—®è¿‡
int max_val;       // æœ€å¤§èµ„æºä»·å€¼
int min_dist;      // æœ€å°è¾¹æƒï¼ˆç”¨äºå‰ªæï¼‰

// æ£€æŸ¥iå’Œjä¹‹é—´æ˜¯å¦æœ‰å…¶ä»–ç‚¹
bool check(int i, int j) {
    int lx = max(node[i].x, node[j].x), rx = min(node[i].x, node[j].x);
    int ly = max(node[i].y, node[j].y), ry = min(node[i].y, node[j].y);
    for (int k = 0; k <= m; k++) {
        if (k == i || k == j) continue;
        if (node[k].x >= rx && node[k].x <= lx && node[k].y >= ry && node[k].y <= ly)
            return false;
    }
    return true;
}

// DFSï¼šå½“å‰ç‚¹xï¼Œå·²ç”¨æ—¶é—´use_tï¼Œå·²å¾—åˆ†æ•°score
void dfs(int x, int use_t, int score) {
    ans = max(ans, score);
    // A*å‰ªæï¼šä¼°è®¡å‰©ä½™æœ€å¤§å¯èƒ½ä»·å€¼ï¼Œå¦‚æœä¸å¤Ÿå°±è¿”å›
    int remaining_t = t - use_t;
    if (remaining_t < 0) return;
    int estimated = score + (remaining_t / min_dist) * max_val;
    if (estimated <= ans) return;

    // éå†æ‰€æœ‰èƒ½åˆ°è¾¾çš„æœªè®¿é—®ç‚¹
    for (int i = 0; i <= m; i++) {
        if (i == x || !g[x][i]) continue; // æ²¡æœ‰è¾¹æˆ–è‡ªå·±
        if (vis[i] || use_t + g[x][i] > t) continue;
        vis[i] = true;
        dfs(i, use_t + g[x][i], score + node[i].v);
        vis[i] = false;
    }
}

int main() {
    cin >> n >> m >> t;
    // åˆå§‹åŒ–èµ·ç‚¹ï¼ˆ0å·èŠ‚ç‚¹ï¼Œåæ ‡(0,0)ï¼Œä»·å€¼0ï¼‰
    node[0].x = 0, node[0].y = 0, node[0].v = 0;
    max_val = 0;
    min_dist = 1e9;

    // è¯»å…¥èµ„æºç‚¹
    for (int i = 1; i <= m; i++) {
        cin >> node[i].x >> node[i].y >> node[i].v;
        max_val = max(max_val, node[i].v);
    }

    // å»ºå›¾ï¼šé¢„å¤„ç†æœ‰æ•ˆè¾¹
    memset(g, 0, sizeof(g));
    for (int i = 0; i <= m; i++) {
        for (int j = 0; j <= m; j++) {
            if (i == j) continue;
            if (check(i, j)) { // åªæœ‰æœ‰æ•ˆè¾¹æ‰è®¡ç®—è·ç¦»
                g[i][j] = abs(node[i].x - node[j].x) + abs(node[i].y - node[j].y);
                min_dist = min(min_dist, g[i][j]);
            }
        }
    }
    // å¤„ç†min_distä¸º0çš„æƒ…å†µï¼ˆé¿å…é™¤ä»¥0ï¼‰
    if (min_dist == 0) min_dist = 3;

    // å¼€å§‹DFS
    memset(vis, false, sizeof(vis));
    vis[0] = true; // èµ·ç‚¹å·²è®¿é—®
    dfs(0, 0, 0);

    cout << ans << endl;
    return 0;
}
```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å…¥ç½‘æ ¼å¤§å°ã€èµ„æºç‚¹æ•°é‡ã€æ—¶é—´é™åˆ¶ï¼Œåˆå§‹åŒ–èµ·ç‚¹ï¼ˆ0å·èŠ‚ç‚¹ï¼‰ã€‚  
  2. **å»ºå›¾**ï¼šç”¨`check`å‡½æ•°é¢„å¤„ç†æœ‰æ•ˆè¾¹ï¼Œè®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æ›¼å“ˆé¡¿è·ç¦»ä½œä¸ºæ—¶é—´ã€‚  
  3. **DFSæœç´¢**ï¼šç”¨A*å‰ªæå‡å°‘æ— æ•ˆè·¯å¾„ï¼Œéå†æ‰€æœ‰èƒ½åˆ°è¾¾çš„èµ„æºç‚¹ï¼Œæ›´æ–°æœ€å¤§åˆ†æ•°ã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼š(æ¥æºï¼šcaddy)  
* **äº®ç‚¹**ï¼šé¢„å¤„ç†æœ‰æ•ˆè¾¹ï¼Œé¿å…ç»•è¿œè·¯ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
bool check(int a,int b) {
    int lx=max(node[a].x,node[b].x) , ly=max(node[a].y,node[b].y),
        rx=min(node[a].x,node[b].x), ry=min(node[a].y,node[b].y);
    for(int i=0;i<=m;i++)
        if(i!=a&&i!=b)
            if(node[i].x>=rx&&node[i].x<=lx && node[i].y>=ry&&node[i].y<=ly)
                return false;
    return true;
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯â€œæœ‰æ•ˆè¾¹â€çš„å…³é”®ï¼å®ƒæ£€æŸ¥ä¸¤ä¸ªç‚¹`a`å’Œ`b`å½¢æˆçš„**çŸ©å½¢åŒºåŸŸ**å†…æ˜¯å¦æœ‰å…¶ä»–èµ„æºç‚¹ã€‚å¦‚æœæœ‰ï¼Œè¯´æ˜ç›´æ¥èµ°`aâ†’b`ä¼šé”™è¿‡ä¸­é—´çš„èµ„æºï¼Œæ‰€ä»¥è¿™æ¡è¾¹æ˜¯â€œæ— æ•ˆâ€çš„ï¼ˆä¸è¿è¾¹ï¼‰ã€‚æ¯”å¦‚ï¼Œè‹¥`a`åœ¨(1,1)ï¼Œ`b`åœ¨(3,3)ï¼Œä¸­é—´æœ‰ä¸ªç‚¹(2,2)ï¼Œé‚£ä¹ˆ`check(a,b)`ä¼šè¿”å›`false`ï¼Œ`a`å’Œ`b`ä¹‹é—´ä¸ä¼šè¿è¾¹â€”â€”å› ä¸ºæ¢é™©å®¶åº”è¯¥å…ˆå»(2,2)æ‹¿èµ„æºï¼Œå†å»(3,3)ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å¤„ç†æœ‰æ•ˆè¾¹ï¼Œèƒ½è®©DFSçš„è·¯å¾„æ›´â€œèªæ˜â€ï¼Œé¿å…æ— æ•ˆæœç´¢ã€‚


#### é¢˜è§£äºŒï¼š(æ¥æºï¼škarma)  
* **äº®ç‚¹**ï¼šA*å‰ªæï¼Œå‡å°‘æ— æ•ˆæœç´¢ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
if((((T-times)/gu)*money+now)<=ans)return ;
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç æ˜¯â€œå‰ªæâ€çš„æ ¸å¿ƒï¼`T-times`æ˜¯å‰©ä½™æ—¶é—´ï¼Œ`gu`æ˜¯æœ€å°è¾¹æƒï¼ˆæ¯æ­¥æœ€å°‘èŠ±å¤šå°‘æ—¶é—´ï¼‰ï¼Œ`money`æ˜¯æœ€å¤§èµ„æºä»·å€¼ã€‚`((T-times)/gu)*money`æ˜¯**å‰©ä½™æ—¶é—´èƒ½æ‹¿åˆ°çš„æœ€å¤§å¯èƒ½ä»·å€¼**ï¼ˆå‡è®¾æ¯æ­¥éƒ½æ‹¿æœ€å¤§ä»·å€¼çš„èµ„æºï¼‰ã€‚å¦‚æœâ€œå½“å‰åˆ†æ•°+å‰©ä½™æœ€å¤§å¯èƒ½ä»·å€¼â€â‰¤å·²æœ‰ç­”æ¡ˆï¼Œè¯´æ˜è¿™æ¡è·¯å¾„ä¸å¯èƒ½è¶…è¿‡å·²æœ‰ç­”æ¡ˆï¼Œç›´æ¥åœæ­¢æœç´¢ï¼ˆå‰ªæï¼‰ã€‚æ¯”å¦‚ï¼Œå·²æœ‰ç­”æ¡ˆæ˜¯28ï¼Œå½“å‰åˆ†æ•°æ˜¯20ï¼Œå‰©ä½™æ—¶é—´èƒ½æ‹¿çš„æœ€å¤§å¯èƒ½æ˜¯5ï¼Œ20+5=25<28ï¼Œå°±å‰ªæã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ªææ˜¯DFSçš„â€œåŠ é€Ÿå™¨â€ï¼Œèƒ½å¸®ä½ è·³è¿‡æ²¡ç”¨çš„è·¯çº¿ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œåƒç´ æ¢é™©å®¶çš„èµ„æºæ”¶é›†ä¹‹æ—…â€**ï¼ˆ8ä½FCæ¸¸æˆé£æ ¼ï¼‰

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
å±•ç¤ºDFSä»èµ·ç‚¹å‡ºå‘ï¼Œéå†èµ„æºç‚¹çš„è¿‡ç¨‹ï¼Œé‡ç‚¹æ¼”ç¤ºï¼š  
1. æœ‰æ•ˆè¾¹çš„è¿æ¥ï¼ˆåªæœ‰æ²¡æœ‰ä¸­é—´ç‚¹çš„è¾¹æ‰æ˜¾ç¤ºï¼‰ï¼›  
2. DFSçš„æ¯ä¸€æ­¥é€‰æ‹©ï¼ˆé«˜äº®å½“å‰ç‚¹ï¼Œå·²è®¿é—®ç‚¹å˜æµ…ï¼‰ï¼›  
3. å‰ªæçš„ä½œç”¨ï¼ˆå¼¹å‡ºâ€œå‰ªæâ€æç¤ºï¼Œåœæ­¢å½“å‰è·¯å¾„ï¼‰ï¼›  
4. æœ€å¤§åˆ†æ•°çš„æ›´æ–°ï¼ˆå®æ—¶æ˜¾ç¤ºåœ¨å±å¹•å³ä¸Šè§’ï¼‰ã€‚

### è®¾è®¡æ€è·¯ç®€è¿°  
ç”¨8ä½åƒç´ é£æ˜¯ä¸ºäº†**è¥é€ è½»æ¾å¤å¤çš„å­¦ä¹ æ°›å›´**â€”â€”å°±åƒå°æ—¶å€™ç©çš„FCæ¸¸æˆï¼Œèƒ½è®©ä½ æ›´æ„¿æ„ä¸»åŠ¨æ¢ç´¢ã€‚æ¯”å¦‚ï¼š  
- èµ„æºç‚¹ç”¨é»„è‰²åƒç´ å—è¡¨ç¤ºï¼Œèµ·ç‚¹æ˜¯è“è‰²ï¼Œå·²è®¿é—®çš„ç‚¹å˜æµ…ç°è‰²ï¼›  
- ç§»åŠ¨æ—¶ä¼´éšâ€œå˜€â€çš„éŸ³æ•ˆï¼Œæ‹¿åˆ°èµ„æºç‚¹æœ‰â€œå®â€çš„å£°éŸ³ï¼Œå‰ªææ—¶æ˜¯â€œå’”â€çš„å£°éŸ³ï¼›  
- æ¯æ‰¾åˆ°ä¸€ä¸ªâ€œæ›´é«˜åˆ†â€çš„è·¯çº¿ï¼Œå±å¹•ä¼šé—ªä¸€ä¸‹â€œæ–°çºªå½•ï¼â€çš„åƒç´ æ–‡å­—ï¼Œå¢åŠ æˆå°±æ„Ÿã€‚

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º8ä½åƒç´ ç½‘æ ¼ï¼ˆæ¯”å¦‚20x20ï¼‰ï¼Œèµ·ç‚¹(0,0)æ˜¯è“è‰²åƒç´ å—ï¼Œèµ„æºç‚¹æ˜¯é»„è‰²ï¼›  
   - å³ä¾§æ˜¾ç¤ºâ€œå·²ç”¨æ—¶é—´â€â€œå·²å¾—åˆ†æ•°â€â€œæœ€å¤§åˆ†æ•°â€çš„åƒç´ æ•°å­—ï¼›  
   - åº•éƒ¨æœ‰â€œå¼€å§‹/æš‚åœâ€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠâ€œé€Ÿåº¦æ»‘å—â€ï¼ˆæ§åˆ¶åŠ¨ç”»å¿«æ…¢ï¼‰ï¼›  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆæ¯”å¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»æ¾ç‰ˆï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - èµ·ç‚¹é«˜äº®ï¼Œå¼¹å‡ºâ€œå¼€å§‹æ¢ç´¢ï¼â€çš„æç¤ºï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆï¼›  
   - æœ‰æ•ˆè¾¹ç”¨ç°è‰²è™šçº¿è¿æ¥ï¼ˆæ¯”å¦‚èµ·ç‚¹åˆ°(1,1)çš„è¾¹ï¼Œå¦‚æœæœ‰æ•ˆå°±æ˜¾ç¤ºï¼‰ã€‚  

3. **DFSæ­¥éª¤æ¼”ç¤º**ï¼š  
   - ç‚¹å‡»â€œå•æ­¥â€ï¼Œæ¢é™©å®¶ä»èµ·ç‚¹èµ°åˆ°ç¬¬ä¸€ä¸ªæœ‰æ•ˆèµ„æºç‚¹ï¼ˆæ¯”å¦‚(1,1)ï¼‰ï¼Œè¯¥ç‚¹å˜æµ…ç°è‰²ï¼Œå·²ç”¨æ—¶é—´å¢åŠ ï¼ˆæ¯”å¦‚+2ï¼‰ï¼Œåˆ†æ•°å¢åŠ ï¼ˆæ¯”å¦‚+3ï¼‰ï¼›  
   - å†ç‚¹å‡»â€œå•æ­¥â€ï¼Œæ¢é™©å®¶å°è¯•ä¸‹ä¸€ä¸ªæœ‰æ•ˆç‚¹ï¼ˆæ¯”å¦‚(2,2)ï¼‰ï¼Œå¦‚æœæ—¶é—´ä¸å¤Ÿå°±â€œå›å¤´â€ï¼ˆå–æ¶ˆè¯¥ç‚¹çš„æµ…ç°è‰²ï¼Œæ—¶é—´å’Œåˆ†æ•°å›é€€ï¼‰ï¼›  
   - å½“å‰©ä½™æ—¶é—´èƒ½æ‹¿çš„æœ€å¤§ä»·å€¼â‰¤å·²æœ‰ç­”æ¡ˆæ—¶ï¼Œå¼¹å‡ºâ€œå‰ªæï¼â€çš„çº¢è‰²æç¤ºï¼Œä¼´éšâ€œå’”â€çš„éŸ³æ•ˆï¼Œåœæ­¢è¿™æ¡è·¯å¾„çš„æœç´¢ã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“æ¢é™©å®¶æ‰¾åˆ°â€œæœ€å¤§åˆ†æ•°â€çš„è·¯çº¿æ—¶ï¼Œæ‰€æœ‰èµ„æºç‚¹ä¼šé—ªçƒï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆæ¯”å¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ï¼Œå±å¹•æ˜¾ç¤ºâ€œæœ€é«˜åˆ†ï¼šXï¼â€çš„åƒç´ æ–‡å­—ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
æœ¬é¢˜çš„â€œDFS+å‰ªæâ€æ€è·¯ï¼Œè¿˜èƒ½è§£å†³**â€œæœ‰é™èµ„æºä¸‹çš„æœ€å¤§æ”¶ç›Šé—®é¢˜â€**ï¼Œæ¯”å¦‚ï¼š  
- èƒŒåŒ…é—®é¢˜ï¼ˆæœ‰é™å®¹é‡ä¸‹é€‰ç‰©å“ï¼Œæ±‚æœ€å¤§ä»·å€¼ï¼‰ï¼›  
- è¿·å®«é—®é¢˜ï¼ˆæœ‰é™æ­¥æ•°å†…æ‰¾æœ€çŸ­è·¯å¾„ï¼‰ï¼›  
- æ—…è¡Œå•†é—®é¢˜ï¼ˆæœ‰é™æ—¶é—´å†…è®¿é—®æ‰€æœ‰åŸå¸‚ï¼Œæ±‚æœ€å°è·¯ç¨‹ï¼‰ã€‚


### ç»ƒä¹ æ¨è (æ´›è°·)  
ä»¥ä¸‹æ˜¯å‡ é“è€ƒå¯Ÿâ€œDFS+å‰ªæâ€çš„ç›¸ä¼¼é¢˜ç›®ï¼Œå»ºè®®å¤§å®¶å°è¯•ï¼š  
1. **æ´›è°· P1025 æ•°çš„åˆ’åˆ†**ï¼šç”¨DFSå‰ªæï¼Œå°†æ•´æ•°åˆ†æˆkä¸ªæ­£æ•´æ•°çš„å’Œï¼Œæ±‚ä¸åŒçš„åˆ†æ³•æ•°ã€‚  
2. **æ´›è°· P1118 æ•°çš„ä¸‰è§’å½¢**ï¼šç”¨DFSå‰ªæï¼Œæ‰¾ä¸‰è§’å½¢ä¸­çš„æœ€å¤§è·¯å¾„å’Œï¼ˆæ¯æ­¥åªèƒ½èµ°ä¸‹æˆ–å³ä¸‹ï¼‰ã€‚  
3. **æ´›è°· P1434 [SHOI2002]æ»‘é›ª**ï¼šç”¨DFS+è®°å¿†åŒ–ï¼Œæ‰¾æ»‘é›ªçš„æœ€é•¿è·¯å¾„ï¼ˆåªèƒ½ä»é«˜åˆ°ä½æ»‘ï¼‰ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

**å‚è€ƒç»éªŒ (æ¥è‡ª karma)**ï¼šâ€œæ­¤é¢˜æ•°æ®å…¶å®æ¯”è¾ƒå¼±ï¼Œéª—äº†åŠå¤©çš„åˆ†æ‰è¿‡å»ã€‚é¢„å¤„ç†å¾—åˆ°å›¾ä¸­çš„æœ€çŸ­è·ç¦»å’Œæœ€å¤§ä»·å€¼ï¼Œå¦‚æœæ€»æ—¶é—´å‡å»ç›®å‰å‰©ä¸‹çš„æ—¶é—´å†é™¤ä»¥æœ€çŸ­è·ç¦»å†ä¹˜ä»¥æœ€å¤§ä»·å€¼å†åŠ ä¸Šå½“å‰å¾—åˆ°çš„ä»·å€¼ä»æ¯”ç›®å‰æœ€ä¼˜è§£è¦å°ï¼Œå°±returnã€‚â€  
**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆçœŸå®ï¼åœ¨ç¼–ç¨‹ä¸­ï¼Œ**å‰ªæ**æ˜¯è§£å†³DFSé—®é¢˜çš„å…³é”®â€”â€”å°¤å…¶æ˜¯å½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå‰ªæèƒ½å¸®ä½ â€œè·³è¿‡â€90%çš„æ— æ•ˆè·¯å¾„ã€‚å¦å¤–ï¼Œä½œè€…æåˆ°â€œæ•°æ®å¼±â€ï¼Œè¯´æ˜æœ‰æ—¶å€™â€œæš´åŠ›+å‰ªæâ€ä¹Ÿèƒ½è¿‡é¢˜ï¼Œä½†æˆ‘ä»¬æ›´è¦ç†è§£å‰ªæçš„é€»è¾‘ï¼Œè¿™æ ·æ‰èƒ½åº”å¯¹æ›´éš¾çš„é—®é¢˜ã€‚  


## æ€»ç»“  
æœ¬æ¬¡å…³äºâ€œAHOI2012 æ”¶é›†èµ„æºâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£DFS+å‰ªæçš„æ€è·¯ã€‚è®°ä½ï¼šDFSåƒâ€œæ¢é™©å®¶â€ï¼Œå‰ªæåƒâ€œåœ°å›¾â€ï¼Œèƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ï¼›è€Œé¢„å¤„ç†æœ‰æ•ˆè¾¹åƒâ€œæŒ‡å—é’ˆâ€ï¼Œèƒ½å¸®ä½ æ‰¾å¯¹æ–¹å‘ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š88.34ç§’
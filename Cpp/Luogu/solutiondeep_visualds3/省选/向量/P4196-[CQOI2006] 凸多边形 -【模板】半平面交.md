# é¢˜ç›®ä¿¡æ¯

# [CQOI2006] å‡¸å¤šè¾¹å½¢ /ã€æ¨¡æ¿ã€‘åŠå¹³é¢äº¤

## é¢˜ç›®æè¿°

é€†æ—¶é’ˆç»™å‡º $n$ ä¸ªå‡¸å¤šè¾¹å½¢çš„é¡¶ç‚¹åæ ‡ï¼Œæ±‚å®ƒä»¬äº¤çš„é¢ç§¯ã€‚ä¾‹å¦‚ $n=2$ æ—¶ï¼Œä¸¤ä¸ªå‡¸å¤šè¾¹å½¢å¦‚ä¸‹å›¾ï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/7ieux7g3.png)

åˆ™ç›¸äº¤éƒ¨åˆ†çš„é¢ç§¯ä¸º $5.233$ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼š$2 \leq n \leq 10$ï¼Œ$3 \leq m_i \leq 50$ï¼Œæ¯ç»´åæ ‡ä¸º $[-1000,1000]$ å†…çš„æ•´æ•°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
6
-2 0
-1 -2
1 -2
2 0
1 2
-1 2
4
0 -3
1 -1
2 2
-1 0```

### è¾“å‡º

```
5.233```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[CQOI2006]å‡¸å¤šè¾¹å½¢ /ã€æ¨¡æ¿ã€‘åŠå¹³é¢äº¤ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## å¼•è¨€
ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æ**è®¡ç®—å‡ ä½•ä¸­çš„ç»å…¸æ¨¡æ¿é¢˜**â€”â€”â€œ[CQOI2006]å‡¸å¤šè¾¹å½¢ /ã€æ¨¡æ¿ã€‘åŠå¹³é¢äº¤â€ã€‚è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯æ±‚å¤šä¸ªå‡¸å¤šè¾¹å½¢çš„äº¤é¢ç§¯ï¼Œéœ€è¦ç”¨åˆ°**åŠå¹³é¢äº¤ç®—æ³•**ã€‚é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ å°†ç†è§£åŠå¹³é¢äº¤çš„æ ¸å¿ƒé€»è¾‘ï¼ŒæŒæ¡è§£é¢˜æŠ€å·§ï¼Œå¹¶é€šè¿‡åƒç´ åŠ¨ç”»ç›´è§‚æ„Ÿå—ç®—æ³•æµç¨‹ï¼


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠå¹³é¢äº¤ç®—æ³•ï¼ˆè®¡ç®—å‡ ä½•æ ¸å¿ƒé—®é¢˜ï¼Œæš‚æ— ç‰¹å®šåˆ†ç±»ï¼Œä½†å±äºâ€œå‡ ä½•é—®é¢˜ä¸­çš„é›†åˆäº¤é›†æ±‚è§£â€ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
è§£å†³è¿™é“é¢˜çš„å…³é”®æ˜¯ç†è§£**åŠå¹³é¢äº¤**â€”â€”å°±åƒç”¨å¤šä¸ªâ€œç»ç’ƒç‰‡â€ï¼ˆæ¯ä¸ªå‡¸å¤šè¾¹å½¢çš„è¾¹å¯¹åº”ä¸€ä¸ªåŠå¹³é¢ï¼‰é‡å è¦†ç›–ï¼Œæœ€åå‰©ä¸‹çš„é‡å åŒºåŸŸå°±æ˜¯å‡¸å¤šè¾¹å½¢çš„äº¤ã€‚æ¯ä¸ªå‡¸å¤šè¾¹å½¢æ˜¯**é€†æ—¶é’ˆ**ç»™å‡ºçš„ï¼Œå› æ­¤æ¯æ¡è¾¹çš„**å·¦ä¾§**æ˜¯è¯¥å¤šè¾¹å½¢çš„å†…éƒ¨ï¼Œæˆ‘ä»¬éœ€è¦æ±‚æ‰€æœ‰è¿™äº›åŠå¹³é¢çš„äº¤é›†ã€‚

### æ ¸å¿ƒç®—æ³•ï¼šS&Iç®—æ³•ï¼ˆShort and Incremental Algorithmï¼‰
æ€è·¯å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œ**æ’åºâ†’ç»´æŠ¤â†’å°é—­â†’æ±‚ç§¯**â€ï¼š
1. **æ’åº**ï¼šå°†æ‰€æœ‰åŠå¹³é¢æŒ‰**æè§’**ï¼ˆè¾¹ä¸xè½´çš„å¤¹è§’ï¼‰ä»å°åˆ°å¤§æ’åºï¼Œæè§’ç›¸åŒçš„ä¿ç•™æœ€å·¦ä¾§çš„åŠå¹³é¢ï¼ˆé™åˆ¶æœ€ä¸¥æ ¼ï¼‰ï¼›
2. **ç»´æŠ¤**ï¼šç”¨åŒç«¯é˜Ÿåˆ—åŠ¨æ€ç»´æŠ¤åŠå¹³é¢ï¼Œç¡®ä¿é˜Ÿåˆ—ä¸­ç›¸é‚»åŠå¹³é¢çš„äº¤ç‚¹åœ¨å½“å‰åŠå¹³é¢çš„**å·¦ä¾§**ï¼ˆå³æœ‰æ•ˆï¼‰ï¼›
3. **å°é—­**ï¼šå¤„ç†é˜Ÿåˆ—é¦–å°¾ï¼Œç¡®ä¿åŠå¹³é¢äº¤æ˜¯å°é—­çš„å‡¸å¤šè¾¹å½¢ï¼›
4. **æ±‚ç§¯**ï¼šè®¡ç®—äº¤ç‚¹ï¼Œç”¨å‰ç§¯æ±‚å°é—­åŒºåŸŸçš„é¢ç§¯ã€‚

### æ ¸å¿ƒéš¾ç‚¹ä¸å¯è§†åŒ–è®¾è®¡
- **éš¾ç‚¹1**ï¼šåŠå¹³é¢çš„æ­£ç¡®è¡¨ç¤ºä¸æè§’æ’åºï¼ˆéœ€ç”¨è¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹ç¡®å®šå·¦ä¾§ï¼‰ï¼›
- **éš¾ç‚¹2**ï¼šåŒç«¯é˜Ÿåˆ—çš„ç»´æŠ¤ï¼ˆåˆ¤æ–­é˜Ÿå°¾/é˜Ÿå¤´çš„äº¤ç‚¹æ˜¯å¦åœ¨å½“å‰åŠå¹³é¢å³ä¾§ï¼‰ï¼›
- **éš¾ç‚¹3**ï¼šåŠå¹³é¢äº¤çš„å°é—­ä¸é¢ç§¯è®¡ç®—ï¼ˆéœ€å¤„ç†é˜Ÿåˆ—é¦–å°¾çš„ä¾èµ–å…³ç³»ï¼‰ã€‚

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š
ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿç®—æ³•æµç¨‹ï¼š
- å¹³é¢ç”¨200Ã—200åƒç´ ç½‘æ ¼è¡¨ç¤ºï¼ŒåŠå¹³é¢ç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—ï¼ˆè“è‰²=å½“å‰åŠå¹³é¢ï¼Œç»¿è‰²=äº¤é›†åŒºåŸŸï¼‰ï¼›
- åŒç«¯é˜Ÿåˆ—ç”¨åŠ¨æ€åƒç´ é˜Ÿåˆ—å±•ç¤ºï¼ˆå…¥é˜Ÿ=æ·»åŠ ç»¿è‰²å—ï¼Œå¼¹å‡º=å—æ¶ˆå¤±ï¼‰ï¼›
- æ¯æ­¥æ“ä½œé…éŸ³æ•ˆï¼ˆæ’åºâ€œå®â€ã€å…¥é˜Ÿâ€œå•ªâ€ã€äº¤ç‚¹è®¡ç®—â€œæ»´â€ï¼‰ï¼›
- è‡ªåŠ¨æ’­æ”¾æ¨¡å¼å±•ç¤ºå®Œæ•´æµç¨‹ï¼Œæœ€åç”¨é—ªçƒæ©™è‰²å—æ ‡æ³¨äº¤é›†åŒºåŸŸå¹¶æ˜¾ç¤ºé¢ç§¯ã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

ä¸ºå¤§å®¶ç­›é€‰äº†**æ€è·¯æ¸…æ™°ã€ä»£ç é²æ£’ã€è®²è§£è¯¦ç»†**çš„3é“ä¼˜è´¨é¢˜è§£ï¼š

### é¢˜è§£ä¸€ï¼šGrissesï¼ˆèµ25ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™æ˜¯åŠå¹³é¢äº¤çš„â€œå…¥é—¨åœ£ç»â€ï¼ä»**å®šä¹‰â†’å‰ç½®çŸ¥è¯†â†’ç®—æ³•æµç¨‹**å…¨é“¾è·¯è®²è§£ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼ˆ`node`è¡¨ç‚¹ã€`edge`è¡¨è¾¹ï¼‰ï¼Œç”šè‡³ç”¨å…¬å¼è¯æ˜äº†äº¤ç‚¹è®¡ç®—çš„æ­£ç¡®æ€§ã€‚å°¤å…¶å€¼å¾—å­¦ä¹ çš„æ˜¯**æè§’æ’åºçš„é‡è½½é€»è¾‘**â€”â€”æè§’ç›¸åŒçš„åŠå¹³é¢ç”¨å‰ç§¯åˆ¤æ–­ä½ç½®ï¼Œç¡®ä¿ä¿ç•™æœ€å·¦ä¾§çš„é™åˆ¶æ¡ä»¶ã€‚å®è·µä¸­ç›´æ¥å‚è€ƒè¿™ä»½ä»£ç ï¼Œèƒ½å¿«é€Ÿæ­å»ºè§£é¢˜æ¡†æ¶ã€‚

### é¢˜è§£äºŒï¼šsuxxsfeï¼ˆèµ24ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™é“é¢˜è§£çš„äº®ç‚¹æ˜¯**å¤„ç†äº†â€œå¹³è¡Œåå‘â€çš„æ— è§£æƒ…å†µ**ï¼ˆæ¯”å¦‚ä¸¤ä¸ªå¹³è¡Œä½†æ–¹å‘ç›¸åçš„åŠå¹³é¢ï¼Œäº¤é›†ä¸ºç©ºï¼‰ã€‚é€šè¿‡**å‰ç§¯åˆ¤å¹³è¡Œ**ï¼ˆç»å¯¹å€¼â‰¤epsï¼‰+**ç‚¹ç§¯åˆ¤åå‘**ï¼ˆâ‰¤-epsï¼‰ï¼Œç›´æ¥è¿”å›0é¿å…æ— æ•ˆè®¡ç®—ã€‚ä»£ç ä¸­çš„`onRight`å‡½æ•°ï¼ˆåˆ¤æ–­ç‚¹æ˜¯å¦åœ¨åŠå¹³é¢å³ä¾§ï¼‰ç®€æ´é«˜æ•ˆï¼Œæ˜¯åŠå¹³é¢äº¤çš„â€œé²æ£’æ€§è¡¥ä¸â€ã€‚

### é¢˜è§£ä¸‰ï¼šbloodstalkï¼ˆèµ5ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™é“é¢˜è§£ç”¨**å›¾å½¢è¾…åŠ©è®²è§£åŒç«¯é˜Ÿåˆ—çš„ç»´æŠ¤**ï¼ˆæ¯”å¦‚é˜Ÿå°¾å¼¹å‡ºçš„ç¤ºæ„å›¾ï¼‰ï¼Œéå¸¸é€‚åˆåˆå­¦è€…ç†è§£ã€‚æ ¸å¿ƒå‡½æ•°`cross`ï¼ˆåˆ¤æ–­äº¤ç‚¹æ˜¯å¦åœ¨åŠå¹³é¢å³ä¾§ï¼‰ç›´è§‚æ˜“æ‡‚ï¼Œä»£ç ä¸­çš„`HalfPlane`å‡½æ•°å®Œæ•´å‘ˆç°äº†â€œæ’åºâ†’ç»´æŠ¤â†’å°é—­â€çš„æµç¨‹ã€‚å°¤å…¶æ¨èå¤§å®¶çœ‹â€œä¸ºä»€ä¹ˆå…ˆç»´æŠ¤é˜Ÿå°¾å†ç»´æŠ¤é˜Ÿå¤´â€çš„å›¾â€”â€”ä¸€å›¾èƒœåƒè¨€ï¼


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### éš¾ç‚¹1ï¼šåŠå¹³é¢çš„æ­£ç¡®è¡¨ç¤ºä¸æè§’æ’åº
- **é—®é¢˜**ï¼šå¦‚ä½•ç”¨ä»£ç è¡¨ç¤ºåŠå¹³é¢ï¼Ÿæè§’ç›¸åŒçš„åŠå¹³é¢æ€ä¹ˆå¤„ç†ï¼Ÿ
- **è§£å†³**ï¼š  
  ç”¨`Edge`ç»“æ„ä½“å­˜å‚¨è¾¹çš„**èµ·ç‚¹**å’Œ**ç»ˆç‚¹**ï¼ˆç¡®å®šå·¦ä¾§æ˜¯å†…éƒ¨ï¼‰ï¼Œæè§’ç”¨`atan2((end-start).y, (end-start).x)`è®¡ç®—ã€‚æ’åºæ—¶ï¼Œæè§’å°çš„åœ¨å‰ï¼›æè§’ç›¸åŒçš„ï¼Œç”¨å‰ç§¯åˆ¤æ–­â€”â€”è‹¥å½“å‰åŠå¹³é¢çš„èµ·ç‚¹åœ¨å¦ä¸€ä¸ªåŠå¹³é¢çš„å·¦ä¾§ï¼ˆ`cross(start, t.start, t.end) > 0`ï¼‰ï¼Œåˆ™ä¿ç•™å½“å‰åŠå¹³é¢ï¼ˆé™åˆ¶æ›´ä¸¥æ ¼ï¼‰ã€‚
- ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šæè§’æ’åºæ˜¯åŸºç¡€ï¼Œå¿…é¡»ç¡®ä¿åŠå¹³é¢æŒ‰**é€†æ—¶é’ˆé¡ºåº**æ’åˆ—ï¼

### éš¾ç‚¹2ï¼šåŒç«¯é˜Ÿåˆ—çš„ç»´æŠ¤ï¼ˆé˜Ÿå°¾/é˜Ÿå¤´å¼¹å‡ºæ¡ä»¶ï¼‰
- **é—®é¢˜**ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦å¼¹å‡ºé˜Ÿåˆ—ä¸­çš„åŠå¹³é¢ï¼Ÿ
- **è§£å†³**ï¼š  
  åŠ å…¥æ–°åŠå¹³é¢æ—¶ï¼Œæ£€æŸ¥**é˜Ÿåˆ—å°¾éƒ¨çš„ä¸¤ä¸ªåŠå¹³é¢çš„äº¤ç‚¹**æ˜¯å¦åœ¨å½“å‰åŠå¹³é¢çš„**å³ä¾§**â€”â€”å¦‚æœæ˜¯ï¼Œè¯´æ˜é˜Ÿå°¾çš„åŠå¹³é¢æ˜¯å¤šä½™çš„ï¼Œç›´æ¥å¼¹å‡ºã€‚åŒç†ï¼Œæ£€æŸ¥**é˜Ÿåˆ—å¤´éƒ¨çš„ä¸¤ä¸ªåŠå¹³é¢çš„äº¤ç‚¹**æ˜¯å¦åœ¨å½“å‰åŠå¹³é¢å³ä¾§ï¼Œè‹¥æ˜¯åˆ™å¼¹å‡ºé˜Ÿå¤´ã€‚
- ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šåŒç«¯é˜Ÿåˆ—çš„æ ¸å¿ƒæ˜¯â€œ**ä¿ç•™æœ‰æ•ˆçš„åŠå¹³é¢**â€ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯â€œäº¤ç‚¹æ˜¯å¦åœ¨å½“å‰åŠå¹³é¢çš„å·¦ä¾§â€ï¼

### éš¾ç‚¹3ï¼šåŠå¹³é¢äº¤çš„å°é—­ä¸é¢ç§¯è®¡ç®—
- **é—®é¢˜**ï¼šå¦‚ä½•ç¡®ä¿åŠå¹³é¢äº¤æ˜¯å°é—­çš„ï¼Ÿé¢ç§¯æ€ä¹ˆç®—ï¼Ÿ
- **è§£å†³**ï¼š  
  æœ€åéœ€ç”¨**é˜Ÿå¤´çš„åŠå¹³é¢æ£€æŸ¥é˜Ÿå°¾**ï¼ˆå¼¹å‡ºæ— æ•ˆçš„é˜Ÿå°¾ï¼‰ï¼Œå†ç”¨**é˜Ÿå°¾çš„åŠå¹³é¢æ£€æŸ¥é˜Ÿå¤´**ï¼ˆå¼¹å‡ºæ— æ•ˆçš„é˜Ÿå¤´ï¼‰ã€‚å°é—­åï¼Œè®¡ç®—é˜Ÿåˆ—ä¸­ç›¸é‚»åŠå¹³é¢çš„äº¤ç‚¹ï¼Œç”¨**å‰ç§¯æ±‚å¤šè¾¹å½¢é¢ç§¯**ï¼ˆé¢ç§¯=å‰ç§¯å’Œçš„ç»å¯¹å€¼/2ï¼‰ã€‚
- ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šå‰ç§¯æ˜¯è®¡ç®—å‡ ä½•çš„â€œç‘å£«å†›åˆ€â€â€”â€”æ—¢èƒ½åˆ¤ä½ç½®ï¼Œåˆèƒ½ç®—é¢ç§¯ï¼


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
**è¯´æ˜**ï¼šç»¼åˆGrissesã€suxxsfeã€bloodstalkçš„é¢˜è§£æ€è·¯ï¼Œæä¾›æ¸…æ™°å®Œæ•´çš„æ ¸å¿ƒå®ç°ã€‚
```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <cmath>
using namespace std;

const double eps = 1e-7;
const int N = 505;

struct Point {
    double x, y;
    Point(double x = 0, double y = 0) : x(x), y(y) {}
    Point operator-(const Point& b) const { return Point(x - b.x, y - b.y); }
};

double cross(const Point& A, const Point& B) { return A.x * B.y - A.y * B.x; }
double cross(const Point& A, const Point& B, const Point& C) { return cross(B - A, C - A); }

struct Edge {
    Point start, end;
    double angle;
    Edge(Point A, Point B) : start(A), end(B) {
        angle = atan2((B - A).y, (B - A).x);
    }
    bool operator<(const Edge& t) const {
        if (fabs(angle - t.angle) < eps)
            return cross(start, t.start, t.end) > 0; // æè§’ç›¸åŒï¼Œä¿ç•™å·¦ä¾§
        return angle < t.angle; // æŒ‰æè§’æ’åº
    }
} e[N], dq[N];

Point getIntersection(Edge A, Edge B) {
    double S1 = cross(A.start, B.end, A.end);
    double S2 = cross(A.start, B.start, A.end);
    return Point(
        (S1 * B.start.x - S2 * B.end.x) / (S1 - S2),
        (S1 * B.start.y - S2 * B.end.y) / (S1 - S2)
    );
}

bool onRight(Edge A, Edge B, Edge C) {
    Point p = getIntersection(B, C);
    return cross(p, A.start, A.end) < -eps; // äº¤ç‚¹åœ¨Aå³ä¾§
}

int main() {
    int n;
    cin >> n;
    int cnt = 0;
    for (int i = 0; i < n; ++i) {
        int m;
        cin >> m;
        vector<Point> pts(m);
        for (int j = 0; j < m; ++j)
            cin >> pts[j].x >> pts[j].y;
        for (int j = 0; j < m; ++j)
            e[++cnt] = Edge(pts[j], pts[(j + 1) % m]); // æ„é€ åŠå¹³é¢
    }
    sort(e + 1, e + cnt + 1); // æè§’æ’åº
    int tot = 1;
    for (int i = 2; i <= cnt; ++i)
        if (fabs(e[i].angle - e[i-1].angle) > eps)
            e[++tot] = e[i]; // å»é‡ï¼ˆä¿ç•™æè§’ä¸åŒçš„åŠå¹³é¢ï¼‰
    
    int head = 1, tail = 2;
    dq[1] = e[1], dq[2] = e[2];
    for (int i = 3; i <= tot; ++i) {
        while (head < tail && onRight(e[i], dq[tail], dq[tail-1])) tail--;
        while (head < tail && onRight(e[i], dq[head], dq[head+1])) head++;
        dq[++tail] = e[i];
    }
    // å¤„ç†é˜Ÿåˆ—é¦–å°¾ï¼Œç¡®ä¿å°é—­
    while (head < tail && onRight(dq[head], dq[tail], dq[tail-1])) tail--;
    while (head < tail && onRight(dq[tail], dq[head], dq[head+1])) head++;
    
    vector<Point> ans;
    for (int i = head; i < tail; ++i)
        ans.push_back(getIntersection(dq[i], dq[i+1]));
    if (tail - head + 1 > 2)
        ans.push_back(getIntersection(dq[tail], dq[head]));
    
    double area = 0;
    int sz = ans.size();
    for (int i = 0; i < sz; ++i)
        area += cross(ans[i], ans[(i+1)%sz]);
    printf("%.3lf\n", fabs(area) / 2);
    return 0;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–å‡¸å¤šè¾¹å½¢é¡¶ç‚¹ï¼Œæ„é€ åŠå¹³é¢ï¼ˆ`Edge`ç»“æ„ä½“ï¼‰ï¼›  
2. **æ’åºå»é‡**ï¼šæŒ‰æè§’æ’åºï¼Œä¿ç•™æè§’ä¸åŒçš„åŠå¹³é¢ï¼›  
3. **åŒç«¯é˜Ÿåˆ—ç»´æŠ¤**ï¼šé€æ­¥åŠ å…¥åŠå¹³é¢ï¼Œå¼¹å‡ºæ— æ•ˆçš„é˜Ÿå°¾/é˜Ÿå¤´ï¼›  
4. **å°é—­ä¸æ±‚ç§¯**ï¼šå¤„ç†é˜Ÿåˆ—é¦–å°¾ï¼Œè®¡ç®—äº¤ç‚¹ï¼Œç”¨å‰ç§¯æ±‚é¢ç§¯ã€‚


### é¢˜è§£æ ¸å¿ƒç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼šGrissesï¼ˆæè§’æ’åºä¸äº¤ç‚¹è®¡ç®—ï¼‰
**äº®ç‚¹**ï¼šæè§’æ’åºçš„æ­£ç¡®å¤„ç†ï¼Œäº¤ç‚¹å…¬å¼çš„ä¸¥è°¨æ¨å¯¼ã€‚
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
bool operator<(const edge &t)const{
    if(fabs(angle-t.angle)<=eps)
        return CPr(start,t.start,t.end)>0; // æè§’ç›¸åŒï¼Œä¿ç•™å·¦ä¾§
    return angle<t.angle;
}
node getnode(edge A,edge B){
    S1=CPr(A.start,B.end,A.end);
    S2=CPr(A.start,B.start,A.end);
    return node((S1*B.start.x-S2*B.end.x)/(S1-S2), 
                (S1*B.start.y-S2*B.end.y)/(S1-S2));
}
```
**ä»£ç è§£è¯»**ï¼š  
- `operator<`ï¼šå…ˆæ¯”æè§’ï¼Œæè§’ç›¸åŒåˆ™ç”¨å‰ç§¯åˆ¤æ–­â€”â€”å½“å‰åŠå¹³é¢çš„èµ·ç‚¹åœ¨å¦ä¸€ä¸ªåŠå¹³é¢çš„å·¦ä¾§ï¼ˆ`CPr>0`ï¼‰ï¼Œåˆ™ä¿ç•™å½“å‰åŠå¹³é¢ï¼ˆé™åˆ¶æ›´ä¸¥æ ¼ï¼‰ï¼›  
- `getnode`ï¼šç”¨**å…±è¾¹å®šç†**è®¡ç®—äº¤ç‚¹ï¼Œå…¬å¼ç¡®ä¿äº†äº¤ç‚¹çš„æ­£ç¡®æ€§ï¼ˆè®°ä½è¿™ä¸ªå…¬å¼ï¼Œè®¡ç®—å‡ ä½•ä¸­å¸¸ç”¨ï¼ï¼‰ã€‚
**å­¦ä¹ ç¬”è®°**ï¼šæè§’æ’åºæ˜¯åŸºç¡€ï¼Œå¿…é¡»æ­£ç¡®å¤„ç†æè§’ç›¸åŒçš„æƒ…å†µï¼

#### é¢˜è§£äºŒï¼šsuxxsfeï¼ˆå¹³è¡Œåå‘çš„å¤„ç†ï¼‰
**äº®ç‚¹**ï¼šè§£å†³äº†åŠå¹³é¢äº¤çš„â€œæ— è§£è¾¹ç•Œ caseâ€ã€‚
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
inline int onRight(const Line &a,const Vector &b){
    return cross(a.way,b-a.p)<=-eps; // ç‚¹båœ¨aå³ä¾§
}
que[++right]=a[i];
if(abs(cross(que[right].way,que[right-1].way))<=eps){ // å¹³è¡Œ
    if(onRight(que[right],que[right-1].p) && 
       dot(que[right].way,que[right-1].way)<=-eps) 
        return 0; // åå‘å¹³è¡Œï¼Œæ— è§£
    right--;
    if(!onRight(que[right],a[i].p)) 
        que[right]=a[i]; // ä¿ç•™æ›´å·¦ä¾§çš„åŠå¹³é¢
}
```
**ä»£ç è§£è¯»**ï¼š  
- `onRight`ï¼šç”¨å‰ç§¯åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨åŠå¹³é¢å³ä¾§ï¼ˆ`cross<= -eps`ï¼‰ï¼›  
- å¹³è¡Œå¤„ç†ï¼šè‹¥å½“å‰åŠå¹³é¢ä¸é˜Ÿå°¾å¹³è¡Œä¸”åå‘ï¼ˆç‚¹ç§¯â‰¤-epsï¼‰ï¼Œç›´æ¥è¿”å›0ï¼ˆæ— è§£ï¼‰ï¼›å¦åˆ™ä¿ç•™æ›´å·¦ä¾§çš„åŠå¹³é¢ã€‚
**å­¦ä¹ ç¬”è®°**ï¼šå¤„ç†è¾¹ç•Œ case æ˜¯ç®—æ³•é²æ£’æ€§çš„å…³é”®ï¼

#### é¢˜è§£ä¸‰ï¼šbloodstalkï¼ˆåŒç«¯é˜Ÿåˆ—ç»´æŠ¤ï¼‰
**äº®ç‚¹**ï¼šç›´è§‚çš„é˜Ÿåˆ—ç»´æŠ¤é€»è¾‘ï¼Œç”¨å›¾è¾…åŠ©ç†è§£ã€‚
**æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
```cpp
il bool cross(Line a,Line b,Line c){
    Point p = GetNode(b,c); // æ±‚bå’Œcçš„äº¤ç‚¹
    return (a.e-a.s)*(p-a.s) < 0; // äº¤ç‚¹åœ¨aå³ä¾§
}
while(head < tail && cross(a[i],q[tail],q[tail-1])) tail--;
while(head < tail && cross(a[i],q[head],q[head+1])) head++;
```
**ä»£ç è§£è¯»**ï¼š  
- `cross`å‡½æ•°ï¼šåˆ¤æ–­é˜Ÿåˆ—ä¸­ä¸¤ä¸ªåŠå¹³é¢çš„äº¤ç‚¹æ˜¯å¦åœ¨å½“å‰åŠå¹³é¢çš„å³ä¾§ï¼›  
- é˜Ÿåˆ—ç»´æŠ¤ï¼šè‹¥äº¤ç‚¹åœ¨å³ä¾§ï¼Œè¯´æ˜é˜Ÿå°¾/é˜Ÿå¤´çš„åŠå¹³é¢æ˜¯å¤šä½™çš„ï¼Œç›´æ¥å¼¹å‡ºã€‚
**å­¦ä¹ ç¬”è®°**ï¼šåŒç«¯é˜Ÿåˆ—çš„æ ¸å¿ƒæ˜¯â€œä¿ç•™æœ‰æ•ˆçš„åŠå¹³é¢â€ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯â€œäº¤ç‚¹æ˜¯å¦åœ¨å½“å‰åŠå¹³é¢çš„å·¦ä¾§â€ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶çš„â€œåŠå¹³é¢é‡å æŒ‘æˆ˜â€
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ¨¡æ‹Ÿç®—æ³•æµç¨‹ï¼Œåƒç©FCæ¸¸æˆä¸€æ ·å­¦ä¹ åŠå¹³é¢äº¤â€”â€”  
- **å¤å¤åœºæ™¯**ï¼šå¹³é¢ç”¨200Ã—200åƒç´ ç½‘æ ¼ï¼Œå‡¸å¤šè¾¹å½¢ç”¨çº¢/è“åƒç´ å—ï¼Œèµ·ç‚¹é»„ã€ç»ˆç‚¹ç»¿ï¼›  
- **æ“ä½œåé¦ˆ**ï¼šæ’åºæ—¶EdgeæŒ‰æè§’ç§»åŠ¨ï¼ˆé…â€œå®â€å£°ï¼‰ï¼Œå…¥é˜Ÿæ—¶é˜Ÿåˆ—æ·»åŠ ç»¿è‰²å—ï¼ˆâ€œå•ªâ€å£°ï¼‰ï¼Œäº¤ç‚¹è®¡ç®—æ—¶é»„å—é—ªçƒï¼ˆâ€œæ»´â€å£°ï¼‰ï¼›  
- **èƒœåˆ©æ¡ä»¶**ï¼šäº¤é›†åŒºåŸŸç”¨æ©™è‰²å—é—ªçƒï¼Œä¼´éšã€Šé­‚æ–—ç½—ã€‹è¿‡å…³éŸ³æ•ˆï¼Œæ˜¾ç¤ºé¢ç§¯ï¼›  
- **äº¤äº’æ§åˆ¶**ï¼šæ”¯æŒâ€œå•æ­¥â€â€œè‡ªåŠ¨æ’­æ”¾â€â€œé‡ç½®â€ï¼Œé€Ÿåº¦æ»‘å—è°ƒèŠ‚æ’­æ”¾é€Ÿåº¦ï¼ˆ1â†’1000ms/å¸§ï¼Œ10â†’100ms/å¸§ï¼‰ã€‚

### åŠ¨ç”»å¸§æ­¥éª¤
1. **åˆå§‹åŒ–**ï¼šåŠ è½½åƒç´ å¹³é¢å’Œæ§åˆ¶é¢æ¿ï¼Œæ’­æ”¾8ä½èƒŒæ™¯éŸ³ä¹ï¼›  
2. **æ’åº**ï¼šEdgeæŒ‰æè§’ä»å°åˆ°å¤§æ’åˆ—ï¼Œæ¯ä¸ªEdgeç§»åŠ¨æ—¶â€œå®â€å£°ï¼›  
3. **é˜Ÿåˆ—ç»´æŠ¤**ï¼šåŠ å…¥æ–°Edgeâ†’é˜Ÿåˆ—æ·»åŠ ç»¿è‰²å—ï¼ˆâ€œå•ªâ€å£°ï¼‰ï¼Œå¼¹å‡ºæ— æ•ˆåŠå¹³é¢â†’å—æ¶ˆå¤±ï¼ˆâ€œå’»â€å£°ï¼‰ï¼›  
4. **äº¤ç‚¹è®¡ç®—**ï¼šé˜Ÿåˆ—ç›¸é‚»Edgeçš„äº¤ç‚¹ç”¨é»„å—æ ‡è®°ï¼ˆâ€œæ»´â€å£°ï¼‰ï¼›  
5. **å°é—­ä¸ç»“æœ**ï¼šå¤„ç†é˜Ÿåˆ—é¦–å°¾ï¼Œæ©™è‰²å—é—ªçƒæ˜¾ç¤ºäº¤é›†åŒºåŸŸï¼Œå¼¹å‡ºé¢ç§¯æç¤ºï¼ˆâ€œèƒœåˆ©â€å£°ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
åŠå¹³é¢äº¤ä¸ä»…èƒ½è§£å†³å‡¸å¤šè¾¹å½¢äº¤ï¼Œè¿˜èƒ½ç”¨äºï¼š
1. **å‡¸å¤šè¾¹å½¢çš„å†…æ ¸**ï¼ˆæ‰€æœ‰ç‚¹éƒ½èƒ½çœ‹åˆ°å¤šè¾¹å½¢è¾¹ç•Œçš„åŒºåŸŸï¼‰ï¼›  
2. **çº¿æ€§è§„åˆ’çš„å¯è¡ŒåŸŸ**ï¼ˆçº¦æŸæ¡ä»¶å¯¹åº”åŠå¹³é¢ï¼Œå¯è¡ŒåŸŸæ˜¯åŠå¹³é¢äº¤ï¼‰ï¼›  
3. **å¹³é¢ç‚¹é›†çš„å‡¸åŒ…**ï¼ˆå‡¸åŒ…æ˜¯åŠå¹³é¢äº¤çš„ç‰¹æ®Šæƒ…å†µï¼‰ã€‚

### æ¨èç»ƒä¹ ï¼ˆæ´›è°·ï¼‰
1. **P2742 äºŒç»´å‡¸åŒ…**ï¼šå‡¸åŒ…æ˜¯åŠå¹³é¢äº¤çš„å‰ç½®çŸ¥è¯†ï¼Œå·©å›ºå‡ ä½•åŸºç¡€ï¼›  
2. **P1279 Art Gallery**ï¼šæ±‚ç¾æœ¯é¦†çš„ç›‘æ§åŒºåŸŸï¼ˆå‡¸å¤šè¾¹å½¢çš„å†…æ ¸ï¼‰ï¼ŒåŠå¹³é¢äº¤çš„å…¸å‹åº”ç”¨ï¼›  
3. **P4196 æœ¬é¢˜**ï¼šå†æ¬¡ç»ƒä¹ ï¼Œç¡®ä¿æŒæ¡åŠå¹³é¢äº¤çš„ä»£ç å®ç°ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

### æ¥è‡ªé¢˜è§£ä½œè€…çš„å®è´µç»éªŒ
- **Grisses**ï¼šâ€œæœ€åˆæ²¡å¤„ç†æè§’ç›¸åŒçš„æƒ…å†µï¼Œç»“æœé”™è¯¯ã€‚åæ¥ç”¨å‰ç§¯åˆ¤æ–­ä½ç½®ï¼Œæ‰è§£å†³äº†é—®é¢˜ã€‚æè§’ç›¸åŒçš„åŠå¹³é¢å¿…é¡»ä¿ç•™æœ€å·¦ä¾§çš„ï¼â€  
  ç‚¹è¯„ï¼šæè§’æ’åºçš„ç»†èŠ‚å†³å®šæˆè´¥ï¼Œå‰ç§¯æ˜¯åˆ¤æ–­ä½ç½®çš„â€œç¥å™¨â€ã€‚  
- **suxxsfe**ï¼šâ€œé‡åˆ°å¹³è¡Œåå‘çš„æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæœ€åˆçš„ä»£ç è¶…æ—¶ã€‚åŠ å…¥å¹³è¡Œåˆ¤æ–­åï¼Œç›´æ¥è¿”å›0ï¼Œé¿å…äº†æ— æ•ˆè®¡ç®—ã€‚â€  
  ç‚¹è¯„ï¼šè¾¹ç•Œ case æ˜¯ç®—æ³•é²æ£’æ€§çš„å…³é”®ï¼Œä¸€å®šè¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„è¾“å…¥ï¼


## ç»“è¯­
æœ¬æ¬¡å…³äºâ€œåŠå¹³é¢äº¤â€çš„åˆ†æå°±åˆ°è¿™é‡Œï¼è®¡ç®—å‡ ä½•çš„æ ¸å¿ƒæ˜¯**ç†è§£å‡ ä½•æ¦‚å¿µ+æ­£ç¡®ä»£ç å®ç°**â€”â€”å¤šç”»å›¾ã€å¤šæ¨¡æ‹Ÿï¼Œæ‰èƒ½æŒæ¡å…¶ä¸­çš„ç²¾é«“ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

--- 
**æç¤º**ï¼šå¦‚æœæƒ³å°è¯•åŠ¨ç”»æ¼”ç¤ºï¼Œå¯ä»¥ç”¨HTML5 Canvas+JavaScriptå®ç°ï¼ˆæ¯”å¦‚ç”¨`drawImage`ç”»åƒç´ å—ï¼Œ`Audio`æ’­æ”¾éŸ³æ•ˆï¼‰ã€‚åŠ¨æ‰‹è¯•è¯•ï¼Œä½ ä¼šå¯¹ç®—æ³•æœ‰æ›´æ·±åˆ»çš„ç†è§£ï¼

---
å¤„ç†ç”¨æ—¶ï¼š218.23ç§’
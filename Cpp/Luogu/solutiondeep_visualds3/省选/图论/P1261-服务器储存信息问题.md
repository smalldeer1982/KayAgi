# é¢˜ç›®ä¿¡æ¯

# æœåŠ¡å™¨å‚¨å­˜ä¿¡æ¯é—®é¢˜

## é¢˜ç›®æè¿°

Byteland ç‹å›½å‡†å¤‡åœ¨å„æœåŠ¡å™¨é—´å»ºç«‹å¤§å‹ç½‘ç»œå¹¶æä¾›å¤šç§æœåŠ¡ã€‚

ç½‘ç»œç”± $n$ å°æœåŠ¡å™¨ç»„æˆï¼Œç”¨åŒå‘çš„çº¿è¿æ¥ã€‚ä¸¤å°æœåŠ¡å™¨ä¹‹é—´æœ€å¤šåªèƒ½æœ‰ä¸€æ¡çº¿ç›´æ¥è¿æ¥ï¼ŒåŒæ—¶ï¼Œæ¯å°æœåŠ¡å™¨æœ€å¤šåªèƒ½å’Œ $10$ å°æœåŠ¡å™¨ç›´æ¥è¿æ¥ï¼Œä½†æ˜¯ä»»æ„ä¸¤å°æœåŠ¡å™¨é—´å¿…ç„¶å­˜åœ¨ä¸€æ¡è·¯å¾„å°†å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ã€‚

æ¯æ¡ä¼ è¾“çº¿éƒ½æœ‰ä¸€ä¸ªå›ºå®šä¼ è¾“çš„é€Ÿåº¦ã€‚$\delta(v,w)$ è¡¨ç¤ºæœåŠ¡å™¨ $v$ å’Œ $w$ ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼Œä¸”å¯¹ä»»æ„çš„ $v$ æœ‰ $\delta(v,v)=0$ã€‚

æœ‰äº›æœåŠ¡å™¨æ¯”åˆ«çš„æœåŠ¡å™¨æä¾›æ›´å¤šçš„æœåŠ¡ï¼Œå®ƒä»¬çš„é‡è¦ç¨‹åº¦è¦é«˜ä¸€äº›ã€‚æˆ‘ä»¬ç”¨ $r(v)$ è¡¨ç¤ºæœåŠ¡å™¨ $v$ çš„é‡è¦ç¨‹åº¦ $\texttt{rank}$ã€‚$\texttt{rank}$ è¶Šé«˜çš„æœåŠ¡å™¨è¶Šé‡è¦ã€‚

æ¯å°æœåŠ¡å™¨éƒ½ä¼šå­˜å‚¨å®ƒé™„è¿‘çš„æœåŠ¡å™¨çš„ä¿¡æ¯ã€‚å½“ç„¶ï¼Œä¸æ˜¯æ‰€æœ‰æœåŠ¡å™¨çš„ä¿¡æ¯éƒ½å­˜ï¼Œåªæœ‰æ„Ÿå…´è¶£çš„æœåŠ¡å™¨ä¿¡æ¯æ‰ä¼šè¢«å­˜å‚¨ã€‚æœåŠ¡å™¨ $v$ å¯¹æœåŠ¡å™¨ $w$ æ„Ÿå…´è¶£æ˜¯æŒ‡ï¼Œä¸å­˜åœ¨æœåŠ¡å™¨ $u$ æ»¡è¶³ï¼Œ$r(u)>r(w)$ ä¸” $\delta(v,u)\le\delta(v, w)$ã€‚

ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œæ‰€æœ‰å…·æœ‰æœ€é«˜ $\texttt{rank}$ çš„æœåŠ¡å™¨éƒ½ä¼šè¢«åˆ«çš„æœåŠ¡å™¨æ„Ÿå…´è¶£ã€‚å¦‚æœ $v$ æ˜¯ä¸€å°å…·æœ‰æœ€é«˜ $\texttt{rank}$ çš„æœåŠ¡å™¨ï¼Œç”±äº $\delta(v,v)=0$ï¼Œæ‰€ä»¥ $v$ åªå¯¹å…·æœ‰æœ€é«˜ $\texttt{rank}$ çš„æœåŠ¡å™¨æ„Ÿå…´è¶£ã€‚

æˆ‘ä»¬å®šä¹‰ $B(v)$ ä¸º **$v$ æ„Ÿå…´è¶£**çš„æœåŠ¡å™¨çš„é›†åˆã€‚æˆ‘ä»¬å¸Œæœ›è®¡ç®—æ‰€æœ‰æœåŠ¡å™¨å‚¨å­˜çš„ä¿¡æ¯é‡ï¼Œå³æ‰€æœ‰æœåŠ¡å™¨çš„ $|B(v)|$ ä¹‹å’Œã€‚Byteland ç‹å›½å¹¶ä¸å¸Œæœ›å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œæ‰€ä»¥æ‰€æœ‰æœåŠ¡å™¨å­˜å‚¨çš„æ•°æ®é‡ ï¼ˆ$|B(v)|$ ä¹‹å’Œï¼‰ä¸ä¼šè¶…è¿‡ $30n$ã€‚

ä½ çš„ä»»åŠ¡æ˜¯å†™ä¸€ä¸ªç¨‹åºï¼Œè¯»å…¥ Byteland ç‹å›½çš„ç½‘ç»œåˆ†å¸ƒï¼Œè®¡ç®—æ‰€æœ‰æœåŠ¡å™¨å­˜å‚¨çš„æ•°æ®é‡ã€‚


## è¯´æ˜/æç¤º

#### è¾“å‡ºè§£é‡Š

$B(1)=\{1,2\},B(2)=\{2\},B(3)=\{2,3\},B(4)=\{1,2,3,4\}$ã€‚

#### æ•°æ®è§„æ¨¡

$1\le n\le30000,1\le m\le5n$

$1\le r(i)\le 10$

$1\le t\le 1000,1\le a,b\le n,a\neq b$

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 3
2
3
1
1
1 4 30
2 3 20
3 4 20```

### è¾“å‡º

```
9
```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šæœåŠ¡å™¨å‚¨å­˜ä¿¡æ¯é—®é¢˜ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æœ€çŸ­è·¯ä¼˜åŒ–`ä¸`åˆ†å±‚é¢„å¤„ç†`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è¿™é“é¢˜çš„æ ¸å¿ƒåœ¨äºé«˜æ•ˆè®¡ç®—æœåŠ¡å™¨é—´çš„"å…´è¶£å…³ç³»"ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæ¯ä¸ªæœåŠ¡å™¨å°±åƒåŸå¸‚ä¸­çš„è§‚å¯Ÿå¡”ï¼Œå®ƒåªå…³æ³¨é‚£äº›åœ¨"é‡è¦ç¨‹åº¦-è·ç¦»"ç»´åº¦ä¸Šæ— å¯æ›¿ä»£çš„å¡”ã€‚è§£é¢˜å…³é”®åœ¨äºä¸¤ç‚¹ï¼š
> 1. **åˆ†å±‚é¢„å¤„ç†**ï¼šåˆ©ç”¨rankå€¼èŒƒå›´å°(1-10)çš„ç‰¹ç‚¹ï¼Œé¢„å¤„ç†å‡º`f[rank][x]`è¡¨ç¤ºxåˆ°æ‰€æœ‰rankâ‰¥rçš„ç‚¹çš„æœ€çŸ­è·ç¦»
> 2. **å‰ªæä¼˜åŒ–**ï¼šåœ¨å•æºæœ€çŸ­è·¯ä¸­ï¼Œè‹¥å½“å‰ç‚¹uæ»¡è¶³`dis[u] â‰¥ f[rank[s]+1][u]`åˆ™åœæ­¢æ‰©å±•ï¼Œå› ä¸ºå…¶åç»­èŠ‚ç‚¹éƒ½ä¸å¯èƒ½å¯¹èµ·ç‚¹sæ„Ÿå…´è¶£
>
> å¯è§†åŒ–è®¾è®¡è¦ç‚¹ï¼š
> - ç”¨ä¸åŒé¢œè‰²åƒç´ å—è¡¨ç¤ºä¸åŒrankçš„æœåŠ¡å™¨
> - é¢„å¤„ç†é˜¶æ®µå±•ç¤ºå¤šæºæœ€çŸ­è·¯æ‰©æ•£è¿‡ç¨‹ï¼ˆå¦‚æ°´æ³¢çº¹æ•ˆæœï¼‰
> - ä¸»ç®—æ³•é˜¶æ®µç”¨ç»¿è‰²é«˜äº®æ‰©å±•è·¯å¾„ï¼Œçº¢è‰²æ ‡è®°è¢«å‰ªæçš„ç‚¹
> - å¤å¤æ¸¸æˆå…ƒç´ ï¼šæ¯ä¸ªæœåŠ¡å™¨è®¡æ•°æ—¶è§¦å‘8-bitéŸ³æ•ˆï¼ŒèƒŒæ™¯é‡‡ç”¨èŠ¯ç‰‡éŸ³ä¹å¾ªç¯

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šGalwayGirlï¼‰**
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ€è·¯æ¸…æ™°ï¼Œé‡‡ç”¨å †ä¼˜åŒ–Dijkstraå®ç°ï¼Œç¨³å®šæ€§é«˜ã€‚ä»£ç ç»“æ„è§„èŒƒï¼Œå˜é‡å‘½ååˆç†ï¼ˆå¦‚`f[rank][x]`ç›´è§‚è¡¨ç¤ºæœ€çŸ­è·ç¦»ï¼‰ï¼Œåœ¨æ¾å¼›æ¡ä»¶ä¸­å·§å¦™èå…¥å‰ªæåˆ¤æ–­`dis[v] < f[r[s]+1][v]`ã€‚äº®ç‚¹åœ¨äºé¢„å¤„ç†é˜¶æ®µä½¿ç”¨priority_queueä¸¥æ ¼ä¿è¯å¤æ‚åº¦ï¼Œä¸”é€šè¿‡`min(f[i][j], f[i+1][j])`å®ç°åˆ†å±‚çŠ¶æ€ä¼ é€’ï¼Œå®è·µä»·å€¼é«˜ï¼ˆå¯ç›´æ¥ç”¨äºç«èµ›ï¼‰ã€‚

**é¢˜è§£äºŒï¼ˆæ¥æºï¼šchenzidaï¼‰**
* **ç‚¹è¯„**ï¼šæ•™å­¦æ€§æå¼ºçš„é¢˜è§£ï¼Œè¯¦ç»†æ¨å¯¼äº†å‰ªæä¼˜åŒ–çš„ä¸ç­‰å¼æ¡ä»¶ï¼Œå¸®åŠ©ç†è§£ç®—æ³•æœ¬è´¨ã€‚ä»£ç æ³¨é‡Šå®Œæ•´ï¼ŒSPFAå®ç°ä¸­`dis[y] < d[a[s]+1][y]`çš„æ¡ä»¶åˆ¤æ–­ä½ç½®å‡†ç¡®ï¼Œä½¿ç”¨`ok[]`æ•°ç»„é¿å…é‡å¤è®¡æ•°çš„å¤„ç†ä¸¥è°¨ã€‚äº®ç‚¹åœ¨äºé€æ­¥è§£æ"æ„Ÿå…´è¶£"æ¡ä»¶çš„è½¬åŒ–è¿‡ç¨‹ï¼Œç‰¹åˆ«é€‚åˆåŸºç¡€è–„å¼±çš„å­¦ä¹ è€…ç†è§£é—®é¢˜æŠ½è±¡æ–¹æ³•ã€‚

**é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šlonlynï¼‰**
* **ç‚¹è¯„**ï¼šèµæ•°æœ€é«˜çš„é¢˜è§£ï¼Œç›´å‡»é—®é¢˜æ ¸å¿ƒã€‚ä»£ç ç®€æ´ä½†å…³é”®ä¼˜åŒ–åˆ°ä½ï¼Œåœ¨SPFAä¸­é€šè¿‡`dis[nxt.to] < far[r[x]+1][nxt.to]`æ§åˆ¶å…¥é˜Ÿæ¡ä»¶ã€‚äº®ç‚¹åœ¨äºç”¨é€šä¿—è¯­è¨€è§£é‡Šå¤æ‚ä¼˜åŒ–ï¼ˆ"spfaåˆ°ä¸€ä¸ªä¸æ»¡è¶³æ¡ä»¶çš„ç‚¹å°±ä¸è¦æŠŠå®ƒæ‰”åˆ°é˜Ÿåˆ—é‡Œ"ï¼‰ï¼Œå¹¶ç»™å‡ºå‰ªæçš„æ•°å­¦è¯æ˜é›å½¢ï¼Œå¯å‘æ€è€ƒã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **éš¾ç‚¹ï¼šå…´è¶£æ¡ä»¶çš„ç­‰ä»·è½¬åŒ–**  
   *åˆ†æ*ï¼šåŸå§‹å®šä¹‰"ä¸å­˜åœ¨rankæ›´é«˜ä¸”è·ç¦»æ›´è¿‘çš„æœåŠ¡å™¨"å¯è½¬åŒ–ä¸º`Î´(s,w) < f[rank(w)+1][s]`ã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡å‡è®¾-æ¨å¯¼ï¼ˆè‹¥uä¸æ»¡è¶³åˆ™å…¶æ‰©å±•ç‚¹vä¹Ÿä¸æ»¡è¶³ï¼‰å°†æ¡ä»¶è½¬åŒ–ä¸º`dis[u] < f[rank(s)+1][u]`çš„å¯æ“ä½œåˆ¤æ–­  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤æ‚å®šä¹‰éœ€è½¬åŒ–ä¸ºå¯è®¡ç®—çš„æ•°å­¦æ¡ä»¶

2. **éš¾ç‚¹ï¼šåˆ†å±‚çŠ¶æ€é¢„å¤„ç†**  
   *åˆ†æ*ï¼šåˆ©ç”¨rankå€¼åŸŸå°çš„ç‰¹æ€§ï¼Œå€’åºå¤„ç†(rank=10â†’1)å¤šæºæœ€çŸ­è·¯ï¼Œå†ç”¨`f[i][x]=min(f[i][x],f[i+1][x])`ä¼ é€’çŠ¶æ€ã€‚å¦‚GalwayGirlçš„é¢˜è§£æ‰€ç¤ºï¼Œè¿™æ ·èƒ½ä¿è¯f[i][x]å§‹ç»ˆè¡¨ç¤ºxåˆ°rankâ‰¥içš„æœ€å°è·ç¦»  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå€¼åŸŸæœ‰é™æ—¶ï¼Œåˆ†å±‚é¢„å¤„ç†æ˜¯ä¼˜åŒ–å…³é”®

3. **éš¾ç‚¹ï¼šå‰ªæçš„ä¸¥æ ¼æ€§ä¿è¯**  
   *åˆ†æ*ï¼šåœ¨Dijkstraä¸­å…¥é˜Ÿæ—¶åˆ¤æ–­æ¡ä»¶ï¼ˆé¢˜è§£2ï¼‰æˆ–åœ¨SPFAå‡ºé˜Ÿæ—¶è®¡æ•°ï¼ˆé¢˜è§£3ï¼‰ï¼Œéœ€æ³¨æ„dis[]å•è°ƒæ€§ã€‚å½“ä½¿ç”¨å †ä¼˜åŒ–æ—¶ï¼Œå› è·¯å¾„é•¿åº¦åªå‡ä¸å¢ï¼Œå…¥é˜Ÿåˆ¤æ–­å³å¯ä¿è¯æœ€ç»ˆç»“æœæ­£ç¡®  
   ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰ªæä½ç½®å½±å“æ­£ç¡®æ€§ï¼Œéœ€ç»“åˆç®—æ³•ç‰¹æ€§

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **å€¼åŸŸå‹ç¼©**ï¼šrankèŒƒå›´å°(1-10)æ—¶ï¼Œç”¨O(10*n)é¢„å¤„ç†å–ä»£O(nÂ²)è®¡ç®—
- **å‰ªæä¼˜åŒ–**ï¼šæ¨å¯¼å‡º"æ— æ•ˆç‚¹ä¸æ‰©å±•"çš„æ•°å­¦æ¡ä»¶ï¼Œå‡å°‘æœç´¢ç©ºé—´
- **çŠ¶æ€ä¼ é€’**ï¼šå€’åºæ›´æ–°`f[rank][x]`åˆ©ç”¨å·²è®¡ç®—ç»“æœé™å¤æ‚åº¦
- **å¢é‡è®¡æ•°**ï¼šåœ¨æœ€çŸ­è·¯å‡ºé˜Ÿæ—¶ç›´æ¥ç»Ÿè®¡å…´è¶£ç‚¹ï¼Œé¿å…å­˜å‚¨ä¸­é—´ç»“æœ

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ï¼Œé‡‡ç”¨Dijkstra+å †ä¼˜åŒ–ä¿è¯ç¨³å®šæ€§ï¼ŒåŒ…å«å®Œæ•´é¢„å¤„ç†å’Œå‰ªæé€»è¾‘
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N=30010, R=12; // R=12å› rank+1å¯èƒ½åˆ°11

int n,m,ans,rnk[N],f[R][N];
vector<pair<int,int>> G[N];
vector<int> nodes[R];

void pre(int r) {
    priority_queue<pair<int,int>,vector<pair<int,int>>,greater<>> pq;
    for(int x:nodes[r]) pq.push({0,x}), f[r][x]=0;
    while(!pq.empty()) {
        auto [d,u]=pq.top(); pq.pop();
        if(d!=f[r][u]) continue;
        for(auto [v,w]:G[u]) 
            if(f[r][v]>d+w) pq.push({f[r][v]=d+w,v});
    }
}

void solve(int s) {
    vector<int> dis(n+1,INT_MAX);
    priority_queue<pair<int,int>,vector<pair<int,int>>,greater<>> pq;
    pq.push({dis[s]=0,s});
    while(!pq.empty()) {
        auto [d,u]=pq.top(); pq.pop();
        if(d!=dis[u]) continue;
        if(d>=f[rnk[s]+1][u]) continue; // å‰ªæåˆ¤æ–­
        ans++; // è®¡æ•°å…´è¶£ç‚¹
        for(auto [v,w]:G[u]) {
            int nd=d+w;
            if(nd<dis[v] && nd<f[rnk[s]+1][v]) // å…¥é˜Ÿæ¡ä»¶
                pq.push({dis[v]=nd,v});
        }
    }
}

int main() {
    cin>>n>>m;
    memset(f,0x3f,sizeof(f));
    for(int i=1;i<=n;i++) 
        cin>>rnk[i], nodes[rnk[i]].push_back(i);
    for(int i=1,u,v,w;i<=m;i++)
        cin>>u>>v>>w, G[u].emplace_back(v,w), G[v].emplace_back(u,w);
    
    for(int r=10;r;r--) { // å€’åºé¢„å¤„ç†
        pre(r);
        if(r<10) for(int i=1;i<=n;i++) 
            f[r][i]=min(f[r][i],f[r+1][i]);
    }
    for(int i=1;i<=n;i++) solve(i);
    cout<<ans;
}
```

**é¢˜è§£ä¸€ï¼ˆGalwayGirlï¼‰æ ¸å¿ƒç‰‡æ®µ**
```cpp
// é¢„å¤„ç†f[rank][]
void predij(int r){
    for(int i=1;i<=n;i++)vis[i]=0;
    priority_queue<hh>q;
    for(int x:G[r]) q.push({x,0}), f[r][x]=0;
    while(!q.empty()){
        int u=q.top().id; q.pop();
        if(vis[u])continue;
        vis[u]=1;
        for(auto [v,w]:G[u])
            if(f[r][v]>f[r][u]+w)
                q.push({v,f[r][v]=f[r][u]+w});
    }
}
```
* **äº®ç‚¹**ï¼šä¸¥æ ¼å †ä¼˜åŒ–ä¿è¯O(nlogn)å¤æ‚åº¦  
* **ä»£ç è§£è¯»**ï¼š  
  > 1. å¯¹æ¯ä¸ªrankçº§åˆ«ï¼Œå°†è¯¥çº§åˆ«æ‰€æœ‰èŠ‚ç‚¹åˆå§‹è·ç¦»è®¾ä¸º0å¹¶å…¥é˜Ÿ  
  > 2. æ¯æ¬¡å–å‡ºæœ€å°è·ç¦»èŠ‚ç‚¹æ›´æ–°é‚»å±…ï¼Œç±»ä¼¼"å¤šæºDijkstra"  
  > 3. ç±»æ¯”ï¼šå°±åƒå¤šä¸ªç«æºåŒæ—¶è”“å»¶ï¼Œè®°å½•æ¯ä¸ªä½ç½®åˆ°æœ€è¿‘ç«æºçš„è·ç¦»  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼špriority_queueèƒ½ä¸¥æ ¼ä¿è¯æ¯ä¸ªç‚¹åªæ‰©å±•ä¸€æ¬¡

**é¢˜è§£äºŒï¼ˆchenzidaï¼‰å‰ªæå®ç°**
```cpp
void spfa2(int s) {
    if(dis[y]>dis[x]+val[i] && dis[x]+val[i]<d[rnk[s]+1][y]){
        dis[y]=dis[x]+val[i];
        if(!vis[y]) q.push(y),vis[y]=1;
    }
}
```
* **äº®ç‚¹**ï¼šåœ¨æ¾å¼›æ—¶åŒæ­¥åˆ¤æ–­å‰ªææ¡ä»¶  
* **ä»£ç è§£è¯»**ï¼š  
  > 1. åŒæ—¶æ»¡è¶³"è·ç¦»å¯æ›´æ–°"å’Œ"å°äºf[rank[s]+1][y]"æ‰æ›´æ–°  
  > 2. ç±»ä¼¼æ¢é™©å®¶ï¼Œåªæœ‰å½“å‰è·¯å¾„æ¯”å·²çŸ¥å®‰å…¨è·ç¦»çŸ­æ‰ç»§ç»­å‰è¿›  
  > 3. æ³¨æ„ï¼šdis[x]åœ¨SPFAä¸­å¯èƒ½è¢«å¤šæ¬¡æ›´æ–°  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šSPFAä¸­å‰ªæéœ€åœ¨æ¾å¼›æ—¶åˆ¤æ–­ï¼Œå› è·ç¦»éå•è°ƒ

**é¢˜è§£ä¸‰ï¼ˆlonlynï¼‰è®¡æ•°é€»è¾‘**
```cpp
while(!q.empty()){
    int u=q.front(); q.pop();
    if(!ok[u]) ans++, ok[u]=1; // å‡ºé˜Ÿæ—¶è®¡æ•°
    for(auto v:G[u]) {
        if(dis[v]>dis[u]+w && dis[u]+w<far[rnk[s]+1][v])
            // æ¾å¼›ä¸å…¥é˜Ÿ
    }
}
```
* **äº®ç‚¹**ï¼šå‡ºé˜Ÿæ—¶ç«‹å³è®¡æ•°ï¼Œé€»è¾‘æ¸…æ™°  
* **ä»£ç è§£è¯»**ï¼š  
  > 1. å½“ç‚¹ä»é˜Ÿåˆ—å–å‡ºæ—¶ï¼Œå…¶è·ç¦»å·²ç¡®å®š  
  > 2. æ­¤æ—¶è‹¥æ»¡è¶³`dis[u]<far[rank[s]+1][u]`ï¼Œå¿…å¯¹sæ„Ÿå…´è¶£  
  > 3. ä½¿ç”¨ok[]æ ‡è®°é¿å…é‡å¤è®¡æ•°  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šSPFAä¸­å‡ºé˜Ÿæ—¶çŠ¶æ€ç¨³å®šï¼Œé€‚åˆè¿›è¡Œæœ€ç»ˆåˆ¤æ–­

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

* **ä¸»é¢˜**ï¼š8-bité£æ ¼æœ€çŸ­è·¯æ¢é™©  
* **æ ¸å¿ƒæ¼”ç¤º**ï¼š  
  - é¢„å¤„ç†é˜¶æ®µï¼šæ¯ä¸ªrankçº§åˆ«ç”¨ä¸åŒé¢œè‰²ï¼ˆå¦‚rank10=é‡‘è‰²ï¼‰ï¼Œå¤šç‚¹åŒæ—¶æ‰©æ•£å½¢æˆ"å…‰æ³¢"  
  - ä¸»ç®—æ³•é˜¶æ®µï¼šé€‰æ‹©èµ·ç‚¹åï¼Œç»¿è‰²åƒç´ å—è¡¨ç¤ºæ‰©å±•è·¯å¾„ï¼Œå½“é‡åˆ°`dis[u]â‰¥f[rank+1][u]`æ—¶å˜çº¢å¹¶åœæ­¢æ‰©æ•£  

* **äº¤äº’æ§åˆ¶**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šåƒç´ ç½‘æ ¼å›¾ï¼ŒèŠ‚ç‚¹æŒ‰rankç€è‰²ï¼Œæ§åˆ¶é¢æ¿å«é€Ÿåº¦æ»‘å—  
  2. **é¢„å¤„ç†æ¼”ç¤º**ï¼š  
     - æŒ‰ranké™åºæ’­æ”¾ï¼Œæ¯ä¸ªrankæ’­æ”¾æ—¶è§¦å‘ç‰¹å®šéŸ³æ•ˆ  
     - å½“å‰æ‰©å±•ç‚¹é—ªçƒï¼Œæ›´æ–°é‚»å±…æ—¶ç”»çº¿è¿æ¥  
  3. **ä¸»ç®—æ³•æ¼”ç¤º**ï¼š  
     - èµ·ç‚¹é—ªçƒåå¼€å§‹æ‰©æ•£ï¼Œæ»¡è¶³æ¡ä»¶èŠ‚ç‚¹äº®ç»¿å…‰  
     - å‰ªæèŠ‚ç‚¹æ˜¾ç¤ºçº¢å‰å¹¶æ’­æ”¾"å¤±è´¥"éŸ³æ•ˆ  
     - è®¡æ•°æ—¶èŠ‚ç‚¹ä¸Šæ–¹æ˜¾ç¤º+1ï¼Œè§¦å‘é‡‘å¸éŸ³æ•ˆ  
  4. **æ¸¸æˆåŒ–è®¾è®¡**ï¼š  
     - æ¯ä¸ªæœåŠ¡å™¨ä½œä¸ºç‹¬ç«‹å…³å¡ï¼Œé€šå…³æ˜¾ç¤º"Rank X Complete!"  
     - èƒŒæ™¯éŸ³ä¹ï¼šå¾ªç¯8-bitèŠ¯ç‰‡éŸ³ä¹  
     - éŸ³æ•ˆä½“ç³»ï¼šå…¥é˜Ÿ(æ»´)ã€å‡ºé˜Ÿ(å˜Ÿ)ã€è®¡æ•°(é‡‘å¸)ã€å‰ªæ(çˆ†ç‚¸)  

* **æŠ€æœ¯æ–¹æ¡ˆ**ï¼š  
  - Canvasç»˜åˆ¶èŠ‚ç‚¹å’Œè¾¹ï¼ŒrequestAnimationFrameé©±åŠ¨åŠ¨ç”»  
  - çŠ¶æ€æœºç®¡ç†ï¼špreRankâ†’mainAlgoâ†’result é˜¶æ®µè½¬æ¢  
  - æ•°æ®ç»“æ„å¯è§†åŒ–ï¼šé˜Ÿåˆ—æ˜¾ç¤ºä¸ºåƒç´ æ–¹å—åºåˆ—ï¼Œéšæ“ä½œåŠ¨æ€å˜åŒ–  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

* **æŠ€å·§è¿ç§»**ï¼š  
  1. å€¼åŸŸå‹ç¼©ï¼šå½“é—®é¢˜å­˜åœ¨å°èŒƒå›´å…³é”®å‚æ•°ï¼ˆå¦‚æœ¬é¢˜rankâ‰¤10ï¼‰æ—¶å¯åˆ†å±‚å¤„ç†  
  2. å‰ªæä¼˜åŒ–ï¼šæœ€çŸ­è·¯ä¸­åˆ©ç”¨é—®é¢˜ç‰¹æ€§æå‰ç»ˆæ­¢æ‰©å±•  
  3. å¤šæºé¢„å¤„ç†ï¼šè®¡ç®—ç‚¹åˆ°é›†åˆçš„æœ€çŸ­è·ç¦»  

* **æ¨èç»ƒä¹ **ï¼š  
  1. **P1462 é€šå¾€å¥¥æ ¼ç‘ç›ä¹‹è·¯**  
     ğŸ—£ï¸ ç»“åˆæœ€çŸ­è·¯ä¸äºŒåˆ†ï¼Œå·©å›ºå€¼åŸŸé™åˆ¶æ¡ä»¶çš„åº”ç”¨  
  2. **P4568 [JLOI2011]é£è¡Œè·¯çº¿**  
     ğŸ—£ï¸ åˆ†å±‚å›¾æœ€çŸ­è·¯ï¼Œç»ƒä¹ çŠ¶æ€ç»´åº¦æ‰©å±•  
  3. **P1948 [USACO08JAN]Telephone Lines S**  
     ğŸ—£ï¸ æœ€çŸ­è·¯+äºŒåˆ†ï¼Œå¼ºåŒ–å‰ªææ€è·¯  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **ç»éªŒæ‘˜å½•ï¼ˆlonlynï¼‰**ï¼š  
> *"æš´åŠ›åšæ³•å°±æ˜¯néspfaï¼Œç„¶åæŒ‰ç…§rankæ€¼ä¸€éå°±å®Œäº‹äº†... æš´åŠ›å‡ºå¥‡è¿¹"*  
>  
> **Kayç‚¹è¯„**ï¼šè¿™æé†’æˆ‘ä»¬ä¸è¦è½»è§†æš´åŠ›è§£æ³•â€”â€”å®ƒä¸ä»…æ˜¯ä¿åº•ç­–ç•¥ï¼Œæ›´èƒ½å¸®åŠ©ç†è§£é—®é¢˜æœ¬è´¨ã€‚åœ¨ä¼˜åŒ–å‰å…ˆå®ç°åŸºç¡€ç‰ˆæœ¬ï¼Œé€šè¿‡å¯¹æ¯”åˆ†ææ‰¾åˆ°æ”¹è¿›æ–¹å‘ã€‚

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œç›¸ä¿¡å¤§å®¶å·²æŒæ¡åˆ©ç”¨å€¼åŸŸç‰¹æ€§ä¼˜åŒ–æœ€çŸ­è·¯çš„æ–¹æ³•ã€‚è®°ä½ï¼Œå¥½çš„ç®—æ³•æ—¢æ˜¯ç§‘å­¦ä¹Ÿæ˜¯è‰ºæœ¯â€”â€”åœ¨ä¸¥æ ¼è¯æ˜çš„åŸºç¡€ä¸Šï¼Œå¤šæ€è€ƒ"è¿™é“é¢˜çš„ç‰¹æ®Šæ€§åœ¨å“ª"ã€‚ä¸‹æ¬¡è§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š331.03ç§’
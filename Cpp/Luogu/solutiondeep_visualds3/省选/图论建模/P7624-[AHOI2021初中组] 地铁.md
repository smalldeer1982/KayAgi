# é¢˜ç›®ä¿¡æ¯

# [AHOI2021åˆä¸­ç»„] åœ°é“

## é¢˜ç›®èƒŒæ™¯

AHOI2021 åˆä¸­ç»„ T4

**ä½ å¯ä»¥é€‰æ‹©è·³è¿‡èƒŒæ™¯éƒ¨åˆ†ã€‚**

å°å¯å¯å‘ç°è‡ªå·±æ‰€å­¦ç®—æ³•åœ¨ç”Ÿæ´»ä¸­å…¶å®æ— å¤§ç”¨ï¼Œæ„Ÿè§‰ååˆ†æ²®ä¸§ã€‚å°é›ªè§çŠ¶è¿˜æ˜¯å˜€å’•äº†å‡ å¥â€œåº”è¯¥è¿˜æ˜¯æœ‰ç”¨çš„å§â€ã€‚

â€œä¸è¿‡æ²¡ç”¨åˆæ€ä¹ˆæ ·å‘¢ï¼Ÿç®—æ³•åªä¸è¿‡æ˜¯ä¸€å—åç‰Œå¤§å­¦çš„æ•²é—¨ç –ç½¢äº†ã€‚â€

â€œä½ è¿™è¯æˆ‘å°±ä¸åŒæ„äº†ã€‚è·³èš¤å›½ç‹æ›¾ç»å’Œæˆ‘è¯´è¿‡ï¼Œä»¥åç§‘ç ”æˆ–è€…å·¥ä½œä¸­æˆ‘ä»¬è¿˜ä¼šå’Œä¿¡æ¯å­¦ç«èµ›ä¸­çš„æŸäº›ä¸œè¥¿é‡é€¢ï¼Œè™½ç„¶å¯èƒ½ä¸ä¼šå†æœ‰ä¿¡æ¯å­¦ç«èµ›è¿™ä¹ˆéš¾ã€‚

â€œé™¤å¼€åŠŸåˆ©çš„å› ç´ ä¹‹å¤–ï¼Œæä¿¡æ¯å­¦ç«èµ›è¿˜æ˜¯èƒ½äº«å—åˆ°å¾ˆå¤šæ€è€ƒçš„ä¹è¶£çš„ã€‚â€

â€œä½ è¯´çš„ä¹Ÿå¯¹ã€‚æ¯æ¬¡æˆ‘åœ¨è€ƒåœºä¸Šä¸ä¼šåšè´¨ç–‘è¿™é¢˜æ˜¯ä¸æ˜¯æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œè€ƒåçœ‹é¢˜è§£æ€»æ˜¯æ‡Šæ¼åˆå¿«ä¹â€”â€”è¿™ä¹ˆè‡ªç„¶çš„æ€è·¯æˆ‘æ€ä¹ˆæƒ³ä¸åˆ°å‘¢ï¼â€

ä¸€é¢—ç†è®ºè®¡ç®—æœºç§‘å­¦å®¶çš„ç§å­æ‚„æ‚„èŒèŠ½ã€‚

æ²™å°˜æš´çªç„¶ç¥å¥‡èˆ¬çš„æ•£å»äº†ã€‚å®åœ¨åä¸ä¸‹å»çš„ä¸¤äººå†³å®šå‡ºé—¨ååœ°é“çé€›ï¼Œéšæ€§ä¸‹è½¦ã€‚å³ä½¿æ²¡æœ‰åˆ»æ„ä¸ºä¹‹ï¼Œå°é›ªåœ¨åœ°é“ä¸Šå´æƒ³å‡ºäº†ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼Œä½ èƒ½è§£å†³å—ï¼Ÿ

## é¢˜ç›®æè¿°

B å¸‚çš„åœ°é“å†å²æ‚ ä¹…ï¼Œå°é›ªå’Œå°å¯å¯ä¹˜åçš„ X å·çº¿æ˜¯ç¯å½¢è·¯çº¿ï¼Œä¸Šé¢åˆ†å¸ƒç€ $n$ ä¸ªè½¦ç«™ï¼Œ**ç›¸é‚»ä¸¤ä¸ªè½¦ç«™ä¹‹é—´çš„é“è·¯é•¿åº¦ä¸ºæ­£æ•´æ•°**ã€‚ç°åœ¨å°é›ªè¿›è¡Œäº†ä¸€äº›è§‚å¯Ÿï¼Œå¾—åˆ°äº† $m$ æ¡ä¿¡æ¯ï¼Œç¬¬ $i$ æ¡ä¿¡æ¯æ˜¯å¦‚ä¸‹å½¢å¼ä¹‹ä¸€ï¼š

1. ç¯ä¸Šé¡ºæ—¶é’ˆç”± $S_i$ åˆ° $T_i$ çš„ä¸€æ®µè·ç¦»ä¸å°äºä¸€ä¸ªç»™å®šçš„å€¼ $L_i$ï¼ˆ$S_i$ å’Œ $T_i$ æ˜¯ä¸¤ä¸ªè½¦ç«™ï¼‰ï¼›
2. ç¯ä¸Šé¡ºæ—¶é’ˆç”± $S_i$ åˆ° $T_i$ çš„ä¸€æ®µè·ç¦»ä¸å¤§äºä¸€ä¸ªç»™å®šçš„å€¼ $L_i$ã€‚

å°é›ªæƒ³è¦ä½ è®¡ç®—æœ€å X çº¿åœ°é“çš„æ€»é•¿åº¦æœ‰å¤šå°‘ç§ä¸åŒçš„åˆæ³•å–å€¼ã€‚

## è¯´æ˜/æç¤º

ã€æ ·ä¾‹ 1 è§£é‡Šã€‘

å®šä¹‰æ•°ç»„ $d[1..4]$ï¼Œå…¶ä¸­ $d[i]$ è¡¨ç¤º $i$ å·è½¦ç«™é¡ºæ—¶é’ˆåˆ° $i+1$ å·è½¦ç«™çš„é“è·¯é•¿åº¦ã€‚

1. $d=[1,2,2,2]$ï¼Œæ€»é•¿åº¦ä¸º $7$ï¼›
2. $d=[1,2,2,3]$ï¼Œæ€»é•¿åº¦ä¸º $8$ï¼›
3. $d=[1,2,2,4]$ï¼Œæ€»é•¿åº¦ä¸º $9$ï¼›
4. $d=[1,2,3,4]$ï¼Œæ€»é•¿åº¦ä¸º $10$ã€‚

å¯ä»¥è¯æ˜ï¼Œä¸å­˜åœ¨å…¶ä»–çš„å¯èƒ½é•¿åº¦ï¼Œäºæ˜¯ç­”æ¡ˆä¸º $4$ã€‚

ã€æ ·ä¾‹ 2 è§£é‡Šã€‘

$3$ å·è½¦ç«™é¡ºæ—¶é’ˆåˆ° $1$ å·è½¦ç«™çš„é“è·¯é•¿åº¦å¯ä»¥ä¸ºä»»æ„æ­£æ•´æ•°ã€‚

ã€æ•°æ®èŒƒå›´ä¸æç¤ºã€‘

- å¯¹äº $30\%$ çš„æ•°æ®ï¼Œä¿è¯ $n,m \le 9$ï¼Œ$L_i \le 5$ï¼›
- å¯¹äºå¦å¤– $15\%$ çš„æ•°æ®ï¼Œä¿è¯ $T_i$ æ˜¯ $S_i$ é¡ºæ—¶é’ˆæ–¹å‘åç¬¬ä¸€ä¸ªè½¦ç«™ï¼›
- å¯¹äºå¦å¤– $20\%$ çš„æ•°æ®ï¼Œä¿è¯ $T_i$ æ˜¯ $S_i$ é¡ºæ—¶é’ˆæ–¹å‘åç¬¬äºŒä¸ªè½¦ç«™ï¼›
- å¯¹äºå¦å¤– $25\%$ çš„æ•°æ®ï¼Œä¿è¯ $n,m \le 50$ï¼›
- å¯¹äº $100\%$ çš„æ•°æ®ï¼Œä¿è¯ $3 \le n \le 500$ï¼Œ$1 \le m \le 500$ï¼Œ$1 \le L_i \le 10^9$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 6
1 1 3 3
2 2 4 5
1 2 4 4
1 3 1 4
2 4 2 5
1 4 2 3```

### è¾“å‡º

```
4```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 2
2 1 2 1
2 2 3 1```

### è¾“å‡º

```
-1```

## æ ·ä¾‹ #3

### è¾“å…¥

```
è§é™„åŠ æ–‡ä»¶çš„ subway3.inã€‚ ```

### è¾“å‡º

```
è§é™„åŠ æ–‡ä»¶çš„ subway3.ansã€‚```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šåœ°é“ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> æ¬¢è¿å„ä½ç®—æ³•æ¢é™©å®¶ï¼ä»Šå¤©æˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢ç¯å½¢åœ°é“çº¿è·¯çš„å¥¥ç§˜ã€‚è¿™é“é¢˜çœ‹ä¼¼å¤æ‚ï¼Œä½†æ ¸å¿ƒæ€æƒ³éå¸¸å·§å¦™â€”â€”**å·®åˆ†çº¦æŸç³»ç»Ÿ**ä¸**äºŒåˆ†ç­”æ¡ˆ**çš„å®Œç¾ç»“åˆã€‚ä¸‹é¢æˆ‘å°†ç”¨æ¸…æ™°çš„è¯­è¨€å’Œåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼Œå¸¦ä½ ä¸€æ­¥æ­¥æ”»å…‹éš¾é¢˜ï¼

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`å·®åˆ†çº¦æŸç³»ç»Ÿ` + `äºŒåˆ†ç­”æ¡ˆ`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æƒ³è±¡åœ°é“ç«™æ’æˆä¸€ä¸ªåœ†ç¯ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—ç¯çš„æ€»é•¿åº¦æœ‰å¤šå°‘ç§å¯èƒ½å–å€¼ã€‚è§£é¢˜çš„å…³é”®åœ¨äºï¼š
> - **å·®åˆ†çº¦æŸç³»ç»Ÿ**ï¼šå°†è½¦ç«™è·ç¦»è½¬åŒ–ä¸ºå›¾è®ºé—®é¢˜ï¼ˆåƒåœ°é“çº¿è·¯å›¾ï¼‰ã€‚è®¾`d[i]`è¡¨ç¤º1å·ç«™åˆ°iå·ç«™çš„è·ç¦»ï¼Œ`C`è¡¨ç¤ºç¯çš„æ€»é•¿ï¼Œæ¯æ¡çº¦æŸè½¬åŒ–ä¸ºå›¾ä¸­çš„ä¸€æ¡è¾¹ã€‚
> - **äºŒåˆ†ç­”æ¡ˆ**ï¼šå› ä¸º`C`çš„åˆæ³•å–å€¼æ˜¯è¿ç»­åŒºé—´ï¼Œæˆ‘ä»¬é€šè¿‡äºŒåˆ†æ³•å¯»æ‰¾æœ€å°/æœ€å¤§`C`å€¼ã€‚
> 
> **æ ¸å¿ƒéš¾ç‚¹**ï¼šå½“å›¾ä¸­å­˜åœ¨è´Ÿç¯æ—¶ï¼Œå¦‚ä½•æ ¹æ®ç¯ä¸Š`C`çš„ç³»æ•°è°ƒæ•´äºŒåˆ†æ–¹å‘ï¼Ÿ
> 
> **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š
> - ç”¨åƒç´ åœ°é“å›¾å±•ç¤ºè½¦ç«™ï¼ˆä¸åŒé¢œè‰²æ–¹å—ï¼‰å’Œçº¦æŸï¼ˆå½©è‰²ç®­å¤´ï¼‰
> - äºŒåˆ†è¿‡ç¨‹ç”¨è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰åŒºé—´`[L,R]`
> - è´Ÿç¯æ£€æµ‹æ—¶ï¼Œç¯ä¸Šè½¦ç«™é—ªçƒçº¢å…‰ï¼Œå›æº¯è·¯å¾„æ˜¾ç¤ºç³»æ•°`k`
> - å¤å¤éŸ³æ•ˆï¼šæ¾å¼›æˆåŠŸ"å®"ï¼Œè´Ÿç¯"è­¦æŠ¥"ï¼ŒæˆåŠŸ"èƒœåˆ©æ—‹å¾‹"

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> æˆ‘ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç è§„èŒƒæ€§å’Œç®—æ³•æ•ˆç‡ç­‰è§’åº¦ï¼Œç²¾é€‰äº†ä»¥ä¸‹3ä»½ä¼˜è´¨é¢˜è§£ï¼š

**é¢˜è§£ä¸€ï¼šmeyiï¼ˆå®˜æ–¹é¢˜è§£ï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯æœ€æƒå¨æ¸…æ™°ï¼Œå®Œæ•´æ¨å¯¼çº¦æŸè½¬åŒ–è¿‡ç¨‹ã€‚ä»£ç ç®€æ´è§„èŒƒï¼š
  - å˜é‡å‘½ååˆç†ï¼ˆ`u,v,k,b`åŒºåˆ†è¾¹å‚æ•°ï¼‰
  - ä½¿ç”¨Bellman-Fordé«˜æ•ˆæ£€æµ‹è´Ÿç¯
  - äºŒåˆ†è¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆ`l=mid+1/r=mid-1`ï¼‰
  > *äº®ç‚¹ï¼šç©ºé—´å¤æ‚åº¦ä¼˜åŒ–åˆ°O(n)ï¼Œå®è·µä»·å€¼é«˜*

**é¢˜è§£äºŒï¼šsyksykCCC**
* **ç‚¹è¯„**ï¼šæ•™å­¦æ€§æå¼ºçš„æ¨å¯¼ï¼š
  - ç”¨å›¾ç¤ºè§£é‡Šç¯å½¢çº¦æŸè½¬åŒ–ï¼ˆ"æ–­ç¯ä¸ºé“¾"ï¼‰
  - è¯¦ç»†åˆ†æè´Ÿç¯ç³»æ•°`k`å¯¹äºŒåˆ†æ–¹å‘çš„å½±å“
  > *äº®ç‚¹ï¼šå°†æŠ½è±¡é—®é¢˜å½¢è±¡åŒ–ï¼Œç‰¹åˆ«é€‚åˆåˆå­¦è€…*

**é¢˜è§£ä¸‰ï¼šMaxBlazeResFire**
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§SPFAå®ç°ï¼š
  - è‡ªå®šä¹‰`node`ç»“æ„åŒæ—¶å­˜å‚¨å¸¸æ•°é¡¹å’Œç³»æ•°
  - ç‹¬ç«‹å‡½æ•°`get_circle()`ç²¾ç¡®æå–è´Ÿç¯ç³»æ•°
  > *äº®ç‚¹ï¼šä»£ç æ¨¡å—åŒ–å¼ºï¼Œä¾¿äºè°ƒè¯•å­¦ä¹ *

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

> è§£å†³æœ¬é¢˜éœ€çªç ´ä¸‰å¤§å…³é”®ç‚¹ï¼Œç»“åˆä¼˜è´¨é¢˜è§£ç­–ç•¥å¦‚ä¸‹ï¼š

1.  **ç¯å½¢çº¦æŸçš„çº¿æ€§è½¬åŒ–**
    * **åˆ†æ**ï¼šç¯å½¢ç»“æ„å¯¼è‡´è·¨èµ·ç‚¹çº¦æŸç‰¹æ®Šå¤„ç†ï¼ˆå¦‚`S_i>T_i`æ—¶éœ€å¼•å…¥`C`ï¼‰
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`C`çš„å¼•å…¥åƒ"é­”æ³•æ¡¥"ï¼Œè¿æ¥æ–­å¼€çš„é“¾

2.  **è´Ÿç¯ç³»æ•°çš„åŠ¨æ€åˆ†æ**
    * **åˆ†æ**ï¼šæ£€æµ‹è´Ÿç¯æ—¶éœ€ç´¯åŠ ç¯ä¸Šæ‰€æœ‰è¾¹çš„`C`ç³»æ•°`k`ï¼š
      - `k>0` â†’ å¢å¤§`C`
      - `k<0` â†’ å‡å°`C`
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç³»æ•°`k`æ˜¯è°ƒæ•´äºŒåˆ†çš„"æŒ‡å—é’ˆ"

3.  **äºŒåˆ†è¾¹ç•Œçš„ç²¾ç¡®æ§åˆ¶**
    * **åˆ†æ**ï¼šä¸Šä¸‹ç•ŒäºŒåˆ†é€»è¾‘ä¸åŒï¼š
      - æ±‚ä¸Šç•Œï¼šæ— è´Ÿç¯æ—¶`l=mid`ï¼ˆå…è®¸æ›´å¤§`C`ï¼‰
      - æ±‚ä¸‹ç•Œï¼šæ— è´Ÿç¯æ—¶`r=mid`ï¼ˆå…è®¸æ›´å°`C`ï¼‰
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåƒè°ƒèŠ‚æœ›è¿œé•œç„¦è·ï¼Œé€æ­¥é”å®š`C`çš„èŒƒå›´

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **ç¯å½¢é—®é¢˜è½¬åŒ–**ï¼šå°†ç¯åˆ‡å‰²ä¸ºé“¾åï¼Œç”¨å˜é‡`C`"ç¼åˆ"ç¼ºå£
- **ç³»æ•°ç´¯åŠ æŠ€å·§**ï¼šå›æº¯è´Ÿç¯æ—¶åŒæ­¥è®¡ç®—`k`ï¼Œé¿å…äºŒæ¬¡éå†
- **è¾¹ç•Œä¿æŠ¤**ï¼šåˆå§‹åŒ–`d[1]=0`ï¼Œç›¸é‚»çº¦æŸ`d[i+1]â‰¥d[i]+1`é˜²æ­¢æº¢å‡º

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆè‡ªä¼˜è´¨é¢˜è§£ï¼‰
```cpp
#include <cstdio>
#include <cstring>
#include <queue>
using namespace std;
typedef long long ll;
const int N=505;
const ll INF=1e18;

struct Edge { int u,v,k,b; } e[N*2];
int n,m,tot,pre[N];
ll dis[N];

bool check(ll C) {
    memset(dis,0x3f,sizeof(dis));
    dis[1]=0;
    for(int i=1;i<=n;i++)
        for(int j=1;j<=tot;j++) {
            int u=e[j].u, v=e[j].v;
            ll w = (ll)e[j].k*C + e[j].b;
            if(dis[v] > dis[u] + w) {
                dis[v] = dis[u] + w;
                pre[v] = j;
            }
        }
    // è´Ÿç¯æ£€æµ‹ä¸ç³»æ•°æå–
    for(int j=1;j<=tot;j++) {
        int u=e[j].u, v=e[j].v;
        ll w = (ll)e[j].k*C + e[j].b;
        if(dis[v] > dis[u] + w) {
            int x=u, coef=0;
            for(int i=0;i<n;i++) x=e[pre[x]].u;
            for(int y=x; ; y=e[pre[y]].u) {
                coef += e[pre[y]].k;
                if(y==x && coef!=0) break;
            }
            return coef>0 ? 1 : -1; //è¿”å›è°ƒæ•´æ–¹å‘
        }
    }
    return 0; //æ— è´Ÿç¯
}

int main() {
    scanf("%d%d",&n,&m);
    // åŸºç¡€çº¦æŸï¼šd[i+1] >= d[i]+1
    for(int i=1;i<n;i++) 
        e[++tot] = {i, i+1, 0, -1};
    e[++tot] = {n,1,1,-1}; //ç¯å½¢é—­åˆ
    
    while(m--) {
        int op,s,t,l;
        scanf("%d%d%d%d",&op,&s,&t,&l);
        if(op==1) { //ä¸å°äºL
            if(s<t) e[++tot]={t,s,0,-l};
            else    e[++tot]={t,s,1,-l};
        } else {    //ä¸å¤§äºL
            if(s<t) e[++tot]={s,t,0,l};
            else    e[++tot]={s,t,-1,l};
        }
    }

    // äºŒåˆ†æ±‚ä¸Šç•Œ
    ll l=n, r=INF, ub=INF;
    while(l<=r) {
        ll mid=(l+r)>>1;
        int res=check(mid);
        if(res>=0) ub=mid, r=mid-1; //æ— è´Ÿç¯æˆ–éœ€å¢å¤§C
        else l=mid+1;               //éœ€å‡å°C
    }
    if(ub>=INF) { puts("-1"); return 0; }
    
    // äºŒåˆ†æ±‚ä¸‹ç•Œ
    l=n, r=INF;
    while(l<=r) {
        ll mid=(l+r)>>1;
        int res=check(mid);
        if(res<=0) l=mid+1;         //æ— è´Ÿç¯æˆ–éœ€å‡å°C
        else r=mid-1;               //éœ€å¢å¤§C
    }
    printf("%lld\n",ub-r); //åŒºé—´é•¿åº¦
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
1. **çº¦æŸæ„å»º**ï¼šåŸºç¡€çº¦æŸï¼ˆç›¸é‚»ç«™è·ç¦»â‰¥1ï¼‰å’Œé—®é¢˜çº¦æŸç»Ÿä¸€å­˜å‚¨
2. **äºŒåˆ†æ¡†æ¶**ï¼šä¸¤æ¬¡äºŒåˆ†åˆ†åˆ«æ±‚`C`çš„ä¸Šç•Œ`ub`å’Œä¸‹ç•Œ`lb`
3. **è´Ÿç¯æ£€æµ‹**ï¼šBellman-Fordå®ŒæˆåäºŒæ¬¡æ£€æŸ¥ï¼Œå‘ç°è´Ÿç¯ç«‹å³å›æº¯
4. **ç³»æ•°æå–**ï¼šæ²¿`pre`æ•°ç»„å›æº¯æ•´ç¯ï¼Œç´¯åŠ `k`å€¼å†³å®šè°ƒæ•´æ–¹å‘

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åƒç´ åœ°é“ç¯çº¿æ¨¡æ‹Ÿå™¨
**ä¸»é¢˜**ï¼šå¤å¤åœ°é“ç¯çº¿ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰

**æ ¸å¿ƒæ¼”ç¤º**ï¼š
```plaintext
  [1]â•â•â•(2)â•â•â•(3)â•â•â•(4) 
   â•‘               â•‘
  (8)â•â•â•(7)â•â•â•(6)â•â•â•(5)
```
1. **åˆå§‹åŒ–**ï¼š
   - 8ä½åƒç´ é£æ ¼è½¦ç«™ï¼ˆè“è‰²æ–¹å—ï¼‰ï¼Œè¿æ¥çº¿è¡¨ç¤ºè½¨é“
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœã€å•æ­¥æ‰§è¡Œã€é€Ÿåº¦æ»‘å—

2. **çº¦æŸå±•ç¤º**ï¼š
   - ç‚¹å‡»"ä¿¡æ¯1"ï¼šS=3â†’T=7â‰¥Lï¼Œæ˜¾ç¤ºçº¢è‰²è·¨è¶Šç®­å¤´
   - ç‚¹å‡»"ä¿¡æ¯2"ï¼šS=5â†’T=2â‰¤Lï¼Œæ˜¾ç¤ºç»¿è‰²ç›´è¿ç®­å¤´

3. **äºŒåˆ†è¿‡ç¨‹**ï¼š
   - è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰`C`åŒºé—´`[L,R]`
   - ä»£å…¥`mid`æ—¶ï¼ŒåŠ¨æ€æ¾å¼›è¿‡ç¨‹ï¼š
     * è½¦ç«™äº®é»„ï¼šæ­£åœ¨æ¾å¼›
     * è¾¹å˜ç»¿ï¼šæˆåŠŸæ¾å¼›

4. **è´Ÿç¯æ£€æµ‹**ï¼š
   - å‘ç°è´Ÿç¯ï¼šç¯ä¸Šè½¦ç«™é—ªçƒçº¢å…‰
   - è‡ªåŠ¨å›æº¯è·¯å¾„ï¼Œæ˜¾ç¤ºç³»æ•°`k=Î£è¾¹ç³»æ•°`
   - æ ¹æ®`k`è°ƒæ•´åŒºé—´ï¼š`k>0`æ—¶åŒºé—´å³ç§»ï¼Œ`k<0`æ—¶å·¦ç§»

5. **ç»“æœå±•ç¤º**ï¼š
   - æ‰¾åˆ°åˆæ³•`C`åŒºé—´ï¼šæ˜¾ç¤ºç»¿è‰²åŒºé—´æ¡
   - æœ€ç»ˆç­”æ¡ˆï¼š`r-l+1`ç”¨é‡‘è‰²æ•°å­—å¼¹å‡º

**éŸ³æ•ˆè®¾è®¡**ï¼š
- æ­¥è¿›æ‰§è¡Œï¼šç»å…¸FC"æ»´"å£°
- è´Ÿç¯å‘ç°ï¼šè­¦æŠ¥éŸ³æ•ˆ
- æˆåŠŸç»“æŸï¼šè¶…çº§ç›ä¸½è¿‡å…³éŸ³ä¹

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
å·®åˆ†çº¦æŸ+äºŒåˆ†ç­”æ¡ˆçš„ç»„åˆé€‚ç”¨äºï¼š
1. å¸¦æœªçŸ¥é‡çš„çº¦æŸç³»ç»Ÿï¼ˆå¦‚æœ¬é¢˜çš„`C`ï¼‰
2. ç­”æ¡ˆå…·æœ‰å•è°ƒæ€§çš„æœ€å€¼é—®é¢˜
3. å­˜åœ¨æ€§åˆ¤æ–­è½¬ä¸ºåŒºé—´è®¡æ•°

### æ¨èç»ƒä¹ ï¼ˆæ´›è°·ï¼‰
1. **P1993 å°Kçš„å†œåœº**  
   â†’ å·®åˆ†çº¦æŸå…¥é—¨ï¼Œå·©å›ºåŸºç¡€å»ºæ¨¡
2. **P2294 [HNOI2005]ç‹¡çŒ¾çš„å•†äºº**  
   â†’ åŒºé—´å’Œçº¦æŸï¼Œå­¦ä¹ å‰ç¼€å’Œè½¬åŒ–
3. **P3275 [SCOI2011]ç³–æœ**  
   â†’ å¤æ‚çº¦æŸç³»ç»Ÿï¼Œæå‡å»ºæ¨¡èƒ½åŠ›

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> é¢˜è§£ä¸­å¤šä½ä½œè€…å¼ºè°ƒï¼š
> - **ç³»æ•°kçš„æå–**ï¼š"å›æº¯ç¯æ—¶åŒæ­¥ç´¯åŠ kï¼Œé¿å…å•ç‹¬éå†"ï¼ˆMaxBlazeResFireï¼‰
> - **è¾¹ç•Œå¤„ç†**ï¼š"ç›¸é‚»çº¦æŸ`d[i+1]â‰¥d[i]+1`é˜²æ­¢è·ç¦»æº¢å‡º"ï¼ˆmeyiï¼‰
> - **è°ƒè¯•æŠ€å·§**ï¼š"è¾“å‡ºä¸­é—´å›¾æ£€æŸ¥çº¦æŸè½¬åŒ–æ­£ç¡®æ€§"ï¼ˆsyksykCCCï¼‰

---

> ç®—æ³•ä¸–ç•Œå¦‚åŒè¿™ç¯å½¢åœ°é“ï¼Œç»ˆç‚¹äº¦æ˜¯èµ·ç‚¹ã€‚æŒæ¡å·®åˆ†çº¦æŸä¸äºŒåˆ†çš„ç²¾é«“ï¼Œä½ å°±èƒ½è§£å¼€æ— æ•°ç¯å½¢è°œé¢˜ï¼ä¸‹æ¬¡æ¢é™©å†è§ï¼ğŸš‡âœ¨

---
å¤„ç†ç”¨æ—¶ï¼š127.97ç§’
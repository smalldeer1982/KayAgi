# é¢˜ç›®ä¿¡æ¯

# GTYçš„äººç±»åŸºå› ç»„è®¡åˆ’2

## é¢˜ç›®èƒŒæ™¯

GTY å†³å¿ƒæ”¹å˜äººç±»åŸºå› ï¼ï¼

## é¢˜ç›®æè¿°

GTY å¬å”¤äº† $n$ ä¸ªäººæ¥åšå®éªŒï¼ŒGTY å®¶çš„æˆ¿å­å¾ˆå¤§ï¼Œæœ‰ $m$ ä¸ªæˆ¿é—´ä¸€å¼€å§‹æ‰€æœ‰äººéƒ½åœ¨ $1$ å·æˆ¿é—´é‡Œï¼ŒGTY ä¼šå‘½ä»¤æŸäººå»æŸä¸ªæˆ¿é—´ç­‰å¾…åšå®éªŒï¼Œæˆ–è€…å‘½ä»¤ä¸€æ®µåŒºé—´çš„æˆ¿é—´å¼€å§‹å®éªŒï¼Œå®éªŒä¼šè·å¾—ä¸€äº›å®éªŒä¿¡æ¯ç‚¹æ•°ï¼Œç‚¹æ•°ä¸ºæˆ¿é—´é‡Œçš„äººæ•°ï¼Œå¦‚æœä¸€ä¸ªæˆ¿é—´é‡Œçš„ä¸€ç¾¤äººå·²ç»åšè¿‡å®éªŒäº†é‚£ä¹ˆè¿™äº›äººå°†ä¸ä¼šå¢åŠ å®éªŒä¿¡æ¯ç‚¹æ•°ï¼ˆä¸ä¼šå¢åŠ æ˜¯é’ˆå¯¹è¿™ä¸€ç¾¤äººçš„ï¼Œä¸æ˜¯å¯¹è¿™ç¾¤äººä¸­çš„æ¯ä¸ªäººï¼Œå³ $1,2,3$ åšäº†å®éªŒï¼Œ$1,2$ å†åšå®éªŒè¿˜ä¼šå¢åŠ  $2$ ç‚¹å®éªŒç‚¹æ•°ï¼‰ã€‚


## è¯´æ˜/æç¤º

å–„ç”¨ STLã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
3 5 7

C 1 2

C 2 2

W 1 2

C 3 2

W 1 2

C 3 3

W 1 3```

### è¾“å‡º

```
3

3

0```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šGTYçš„äººç±»åŸºå› ç»„è®¡åˆ’2 æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`é›†åˆå“ˆå¸Œ`ä¸`STLåº”ç”¨`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äº**é›†åˆçŠ¶æ€çš„é«˜æ•ˆç»´æŠ¤**ã€‚æƒ³è±¡æ¯ä¸ªæˆ¿é—´æ˜¯ä¸€ä¸ªé­”æ³•ç›’å­ï¼Œé‡Œé¢è£…ç€ä¸åŒé¢œè‰²çš„é­”æ³•çŸ³ï¼ˆäººå‘˜ï¼‰ã€‚æˆ‘ä»¬éœ€è¦å¿«é€Ÿåˆ¤æ–­ä¸¤ä¸ªç›’å­é‡Œçš„çŸ³å¤´ç»„åˆæ˜¯å¦ç›¸åŒï¼ˆå¼‚æˆ–å“ˆå¸Œï¼‰ï¼Œä»¥åŠé«˜æ•ˆç®¡ç†æ´»è·ƒçš„é­”æ³•ç›’å­ï¼ˆSTL setï¼‰ã€‚  
> - **æ ¸å¿ƒæ€è·¯**ï¼šä¸ºæ¯ä¸ªäººåˆ†é…éšæœºå“ˆå¸Œå€¼ï¼Œæˆ¿é—´çŠ¶æ€=äººå‘˜å“ˆå¸Œå€¼çš„å¼‚æˆ–å’Œã€‚ç”¨setç»´æŠ¤å¯è´¡çŒ®ç‚¹æ•°çš„æˆ¿é—´ï¼ŒæŸ¥è¯¢æ—¶éå†åŒºé—´ã€ç´¯åŠ ç‚¹æ•°å¹¶æ ‡è®°çŠ¶æ€
> - **éš¾ç‚¹å¯¹æ¯”**ï¼š  
>   - *å“ˆå¸Œå†²çª*ï¼šä½¿ç”¨64ä½éšæœºæ•°ï¼ˆmt19937_64ï¼‰æ¯”32ä½æ›´å®‰å…¨  
>   - *åŠ¨æ€æ›´æ–°*ï¼šäººå‘˜ç§»åŠ¨æ—¶éœ€åŒæ­¥æ›´æ–°ä¸¤ä¸ªæˆ¿é—´çš„çŠ¶æ€  
> - **å¯è§†åŒ–è®¾è®¡**ï¼š  
>   - åƒç´ ç½‘æ ¼è¡¨ç¤ºæˆ¿é—´ï¼Œä¸åŒé¢œè‰²å°äººä»£è¡¨äººå‘˜  
>   - ç§»åŠ¨æ“ä½œï¼šå°äººä»åŸæˆ¿é—´æ»‘å‘æ–°æˆ¿é—´ï¼Œä¼´éš"å—–"éŸ³æ•ˆ  
>   - æŸ¥è¯¢æ“ä½œï¼šé«˜äº®åŒºé—´å†…æ´»è·ƒæˆ¿é—´ï¼Œæ˜¾ç¤ºç‚¹æ•°ç´¯åŠ è¿‡ç¨‹  
>   - çŠ¶æ€æ ‡è®°ï¼šå·²è´¡çŒ®æˆ¿é—´å˜ç°å¹¶æ’­æ”¾"å®"éŸ³æ•ˆ  

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šEnzymiiï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯ç›´å‡»æœ¬è´¨â€”â€”éšæœºå“ˆå¸Œ+å¼‚æˆ–æ›´æ–°ã€‚ä»£ç ç®€æ´é«˜æ•ˆï¼ˆä»…30è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰ï¼Œå˜é‡å‘½åè§„èŒƒï¼ˆ`an[i]`äººå‘˜å“ˆå¸Œï¼Œ`at[i]`ä½ç½®ï¼‰ã€‚äº®ç‚¹åœ¨äºå“ˆå¸Œç”Ÿæˆï¼š`(rand()<<16 | rand())`ç»„åˆæå‡éšæœºæ€§ã€‚å®è·µæ—¶æ³¨æ„ï¼šéœ€C++11ç¼–è¯‘ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆè·³è¿‡æ— æ•ˆç§»åŠ¨ï¼‰ã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šFriedrichCï¼‰**
* **ç‚¹è¯„**ï¼šé‡‡ç”¨ç°ä»£C++ç‰¹æ€§ï¼ˆmt19937_64ï¼‰ç”Ÿæˆé«˜è´¨é‡å“ˆå¸Œå€¼ã€‚é€»è¾‘åˆ†å±‚æ¸…æ™°ï¼šåˆå§‹åŒ–â†’ç§»åŠ¨æ›´æ–°â†’åŒºé—´æŸ¥è¯¢ã€‚äº®ç‚¹ï¼šä½¿ç”¨`map::find`æ›¿ä»£`[]`æ“ä½œç¬¦é¿å…éšå¼æ’å…¥ï¼Œæå‡ä»£ç å¥å£®æ€§ã€‚ç¨æ˜¾ä¸è¶³æ˜¯æœªè§£é‡Šå“ˆå¸Œç§å­é€‰æ‹©åŸç†ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šZzxpyï¼‰**
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§å°è¯•åŒå“ˆå¸Œå¢å¼ºæ­£ç¡®æ€§ï¼ˆè™½æœªå®Œå…¨å®ç°ï¼‰ã€‚ä»£ç ç»“æ„å·¥æ•´ï¼ŒåŒ…å«è¯¦ç»†è°ƒè¯•å¿ƒå¾—ã€‚å®è·µæç¤ºï¼š`lower_bound`éå†æ—¶éœ€åŠæ—¶æ›´æ–°è¿­ä»£å™¨ï¼Œé¿å…å¤±æ•ˆã€‚æ¨èå­¦ä¹ å…¶é˜²å¾¡æ€§ç¼–ç¨‹æ€æƒ³ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **å…³é”®ç‚¹1ï¼šé›†åˆçŠ¶æ€åŠ¨æ€ç»´æŠ¤**
   * **åˆ†æ**ï¼šäººå‘˜ç§»åŠ¨æ—¶éœ€åŸå­åŒ–æ›´æ–°ä¸¤ä¸ªæˆ¿é—´ï¼š  
     ```æ•°å­¦
     åŸæˆ¿é—´: hashâ‚ = hashâ‚ âŠ• val, sizeâ‚--
     æ–°æˆ¿é—´: hashâ‚‚ = hashâ‚‚ âŠ• val, sizeâ‚‚++
     ```
     é€šè¿‡STL setçš„æ’å…¥/åˆ é™¤ä¿æŒæ´»è·ƒæˆ¿é—´çŠ¶æ€
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¼‚æˆ–æ“ä½œçš„é€†å³æœ¬èº«ï¼Œå¤©ç„¶æ”¯æŒåŠ¨æ€å¢åˆ 

2. **å…³é”®ç‚¹2ï¼šåŒºé—´æŸ¥è¯¢ä¸çŠ¶æ€æ ‡è®°**
   * **åˆ†æ**ï¼šç”¨`set::lower_bound`å®šä½åŒºé—´èµ·ç‚¹ï¼Œéå†æ—¶ï¼š  
     - ç´¯åŠ æˆ¿é—´ç‚¹æ•°  
     - åœ¨å…¨å±€mapæ ‡è®°å“ˆå¸Œå€¼  
     - ä»setä¸­åˆ é™¤è¯¥æˆ¿é—´  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`set`çš„æœ‰åºæ€§æ”¯æŒé«˜æ•ˆåŒºé—´æ‰«æ

3. **å…³é”®ç‚¹3ï¼šå“ˆå¸Œå†²çªé¢„é˜²**
   * **åˆ†æ**ï¼šäººå‘˜åˆå§‹å“ˆå¸Œå€¼éœ€æ»¡è¶³ï¼š  
     - å€¼åŸŸå¤§ï¼ˆ64ä½ä¼˜äº32ä½ï¼‰  
     - éšæœºæ€§å¼ºï¼ˆé¿å…ç®€å•rand()ï¼‰  
     æ¨èMT19937_64æˆ–ç»„åˆéšæœºæ•°
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå“ˆå¸Œè´¨é‡ç›´æ¥å½±å“è§£æ³•æ­£ç¡®æ€§

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**ï¼š
- **å“ˆå¸Œç”Ÿæˆ**ï¼š`mt19937_64 rnd(time(0)); val = rnd();`  
- **çŠ¶æ€æ›´æ–°**ï¼šå…ˆåˆ æ—§çŠ¶æ€â†’æ›´æ–°æ•°æ®â†’æ’æ–°çŠ¶æ€  
- **è¾¹ç•Œå¤„ç†**ï¼šç§»åŠ¨å‰æ£€æŸ¥`if(at[x]==y)`è·³è¿‡æ— æ•ˆæ“ä½œ  
- **éå†ä¼˜åŒ–**ï¼š`it = s.lower_bound(x)`é¿å…å…¨è¡¨æ‰«æ  

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**ï¼š
```cpp
#include <set>
#include <map>
#include <random>
using namespace std;
typedef unsigned long long ull;

mt19937_64 rnd(time(0));
set<int> activeRooms;
map<ull, bool> usedHash;
ull roomHash[MAXN], personHash[MAXN];
int roomSize[MAXN], personPos[MAXN];

void movePerson(int x, int y) {
    int old = personPos[x];
    if(old == y) return;
    
    // ç§»é™¤æ—§çŠ¶æ€
    activeRooms.erase(old);
    activeRooms.erase(y);
    
    // æ›´æ–°åŸæˆ¿é—´
    roomHash[old] ^= personHash[x];
    roomSize[old]--;
    if(!usedHash[roomHash[old]]) 
        activeRooms.insert(old);
    
    // æ›´æ–°æ–°æˆ¿é—´
    roomHash[y] ^= personHash[x];
    roomSize[y]++;
    if(!usedHash[roomHash[y]]) 
        activeRooms.insert(y);
    
    personPos[x] = y;
}

int queryRange(int L, int R) {
    int sum = 0;
    auto it = activeRooms.lower_bound(L);
    while(it != activeRooms.end() && *it <= R) {
        int room = *it;
        sum += roomSize[room];
        usedHash[roomHash[room]] = true;
        it = activeRooms.erase(it);
    }
    return sum;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
- **åˆå§‹åŒ–**ï¼šä¸ºæ¯ä¸ªäººç”Ÿæˆéšæœºå“ˆå¸Œå€¼ï¼Œåˆå§‹åŒ–1å·æˆ¿é—´  
- **ç§»åŠ¨é€»è¾‘**ï¼šåŸå­åŒ–æ›´æ–°ä¸¤ä¸ªæˆ¿é—´çŠ¶æ€ï¼Œç»´æŠ¤æ´»è·ƒé›†åˆ  
- **æŸ¥è¯¢é€»è¾‘**ï¼šæ‰«æåŒºé—´â†’ç´¯åŠ â†’æ ‡è®°â†’åˆ é™¤  

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼š"åŸºå› å®éªŒå®¤å¤§å†’é™©"ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰  
**æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š
   - ç½‘æ ¼æˆ¿é—´å¸ƒå±€ï¼ˆ16x16åƒç´ /æˆ¿ï¼‰
   - 1å·æˆ¿é—´ï¼šèšé›†å½©è‰²å°äººï¼ˆä¸åŒé¢œè‰²=ä¸åŒäººå‘˜ï¼‰
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æ­¥è¿›/è°ƒé€Ÿæ»‘å—

2. **ç§»åŠ¨æ“ä½œæ¼”ç¤º**ï¼š
   ```mermaid
   graph LR
   A[åŸæˆ¿é—´] -- å°äººæ·¡å‡ºåŠ¨ç”» --> B[ç›®æ ‡æˆ¿é—´]
   B -- æ·¡å…¥åŠ¨ç”»+éŸ³æ•ˆ --> C[æ›´æ–°çŠ¶æ€æ˜¾ç¤º]
   ```

3. **æŸ¥è¯¢æ“ä½œæ¼”ç¤º**ï¼š
   - é«˜äº®æŸ¥è¯¢åŒºé—´ï¼ˆçº¢è‰²è¾¹æ¡†ï¼‰
   - æ´»è·ƒæˆ¿é—´é—ªçƒé»„å…‰
   - å®æ—¶æ˜¾ç¤ºç‚¹æ•°ç´¯åŠ ï¼š`+3 â†’ +5 â†’ æ€»è®¡8`
   - å·²è´¡çŒ®æˆ¿é—´å˜ç°ï¼ˆæ’­æ”¾"å®"éŸ³æ•ˆï¼‰

4. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š
   - æˆåŠŸæŸ¥è¯¢ï¼šåƒç´ çƒŸèŠ±+èƒœåˆ©éŸ³æ•ˆ
   - è¿ç»­æ­£ç¡®ï¼šè¿å‡»è®¡æ•°å™¨
   - å†å²æœ€é«˜åˆ†å±•ç¤º

**æŠ€æœ¯ç»†èŠ‚**ï¼š  
- ä½¿ç”¨Canvasç»˜åˆ¶åŠ¨æ€ç½‘æ ¼  
- éŸ³æ•ˆè§¦å‘ï¼šç§»åŠ¨(`0x11`)/æ ‡è®°(`0x22`)/èƒœåˆ©(`0x33`)  
- æ•°æ®ç»“æ„å¯è§†åŒ–ï¼šæˆ¿é—´å“ˆå¸Œå€¼å®æ—¶æ˜¾ç¤ºä¸º16è¿›åˆ¶æµ®æ ‡  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
**æŠ€å·§è¿ç§»åœºæ™¯**ï¼š  
1. åŠ¨æ€é›†åˆåˆ¤é‡ï¼ˆCF1000Fï¼‰  
2. åŒºé—´å±æ€§ç»Ÿè®¡ï¼ˆæ´›è°·P1972ï¼‰  
3. çŠ¶æ€å‹ç¼©ç»´æŠ¤ï¼ˆPOJ2411ï¼‰  

**æ¨èé¢˜ç›®**ï¼š  
1. **æ´›è°· P1972 [SDOI2009]HHçš„é¡¹é“¾**  
   ğŸ—£ï¸ *å·©å›ºåŒºé—´æŸ¥è¯¢ä¸çŠ¶æ€æ ‡è®°æŠ€å·§*  
2. **æ´›è°· P3834 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘**  
   ğŸ—£ï¸ *å­¦ä¹ é«˜æ•ˆç»´æŠ¤å†å²çŠ¶æ€çš„æ–¹æ³•*  
3. **CodeForces 1000F One Occurrence**  
   ğŸ—£ï¸ *ä½“éªŒé›†åˆå“ˆå¸Œçš„å®é™…åº”ç”¨å˜å½¢*

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **æ¥è‡ªEnzymiiçš„è°ƒè¯•ç»éªŒ**ï¼š  
> *"å“ˆå¸Œç§å­è¢«å¡ï¼Ÿç”¨`rand()<<16|rand()`ç»„åˆæ¯”å•ç”¨rand()æ›´å®‰å…¨"*  
>   
> **Kayçš„æ€»ç»“**ï¼š  
> 1. å“ˆå¸Œè´¨é‡æ˜¯è§£æ³•æ­£ç¡®æ€§çš„ç”Ÿå‘½çº¿  
> 2. ç§»åŠ¨æ“ä½œå‰åŠ¡å¿…æ£€æŸ¥`if(at[x]==y)`  
> 3. æŸ¥è¯¢æ—¶ç”¨`it=erase(it)`é¿å…è¿­ä»£å™¨å¤±æ•ˆ  

---

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æ·±å…¥æŒæ¡äº†é›†åˆå“ˆå¸Œä¸STLçš„ååŒåº”ç”¨ã€‚è®°ä½ï¼šå¥½çš„è§£æ³•å¦‚åŒç²¾å¦™çš„é­”æ³•â€”â€”ç†è§£åŸç†æ‰èƒ½åˆ›é€ å¥‡è¿¹ï¼ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š152.16ç§’
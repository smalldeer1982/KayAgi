# é¢˜ç›®ä¿¡æ¯

# [NOI2017] æ¸¸æˆ

## é¢˜ç›®èƒŒæ™¯

ã€æœ¬é¢˜åŸé¢˜æ—¶é™ 1sã€‘

ç‹‚é‡é£™è½¦æ˜¯å° L æœ€å–œæ¬¢çš„æ¸¸æˆã€‚ä¸å…¶ä»–ä¸šä½™ç©å®¶ä¸åŒçš„æ˜¯ï¼Œå° L åœ¨ç©æ¸¸æˆä¹‹ä½™ï¼Œè¿˜ç²¾äºç ”ç©¶æ¸¸æˆçš„è®¾è®¡ï¼Œå› æ­¤ä»–æœ‰ç€ä¸ä¼—ä¸åŒçš„æ¸¸æˆç­–ç•¥ã€‚


## é¢˜ç›®æè¿°

å° L è®¡åˆ’è¿›è¡Œ $n$ åœºæ¸¸æˆï¼Œæ¯åœºæ¸¸æˆä½¿ç”¨ä¸€å¼ åœ°å›¾ï¼Œå° L ä¼šé€‰æ‹©ä¸€è¾†è½¦åœ¨è¯¥åœ°å›¾ä¸Šå®Œæˆæ¸¸æˆã€‚

å° L çš„èµ›è½¦æœ‰ä¸‰è¾†ï¼Œåˆ†åˆ«ç”¨å¤§å†™å­—æ¯ $A$ã€$B$ã€$C$ è¡¨ç¤ºã€‚åœ°å›¾ä¸€å…±æœ‰å››ç§ï¼Œåˆ†åˆ«ç”¨å°å†™å­—æ¯ $x$ã€$a$ã€$b$ã€$c$ è¡¨ç¤ºã€‚

å…¶ä¸­ï¼Œèµ›è½¦ $A$ ä¸é€‚åˆåœ¨åœ°å›¾ $a$ ä¸Šä½¿ç”¨ï¼Œèµ›è½¦ $B$ ä¸é€‚åˆåœ¨åœ°å›¾ $b$ ä¸Šä½¿ç”¨ï¼Œèµ›è½¦ $C$ ä¸é€‚åˆåœ¨åœ°å›¾ $c$ ä¸Šä½¿ç”¨ï¼Œè€Œåœ°å›¾ $x$ åˆ™é€‚åˆæ‰€æœ‰èµ›è½¦å‚åŠ ã€‚

é€‚åˆæ‰€æœ‰èµ›è½¦å‚åŠ çš„åœ°å›¾å¹¶ä¸å¤šè§ï¼Œæœ€å¤šåªä¼šæœ‰ $d$ å¼ ã€‚

$n$ åœºæ¸¸æˆçš„åœ°å›¾å¯ä»¥ç”¨ä¸€ä¸ªå°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²æè¿°ã€‚ä¾‹å¦‚ï¼š$S=\texttt{xaabxcbc}$ è¡¨ç¤ºå° L è®¡åˆ’è¿›è¡Œ $8$ åœºæ¸¸æˆï¼Œå…¶ä¸­ç¬¬ $1$ åœºå’Œç¬¬ $5$ åœºçš„åœ°å›¾ç±»å‹æ˜¯ $x$ï¼Œé€‚åˆæ‰€æœ‰èµ›è½¦ï¼Œç¬¬ $2$ åœºå’Œç¬¬ $3$ åœºçš„åœ°å›¾æ˜¯ $a$ï¼Œä¸é€‚åˆèµ›è½¦ $A$ï¼Œç¬¬ $4$ åœºå’Œç¬¬ $7$ åœºçš„åœ°å›¾æ˜¯ $b$ï¼Œä¸é€‚åˆèµ›è½¦ $B$ï¼Œç¬¬ $6$ åœºå’Œç¬¬ $8$ åœºçš„åœ°å›¾æ˜¯ $c$ï¼Œä¸é€‚åˆèµ›è½¦ $C$ã€‚

å° L å¯¹æ¸¸æˆæœ‰ä¸€äº›ç‰¹æ®Šçš„è¦æ±‚ï¼Œè¿™äº›è¦æ±‚å¯ä»¥ç”¨å››å…ƒç»„ $ (i, h_i, j, h_j) $ æ¥æè¿°ï¼Œè¡¨ç¤ºè‹¥åœ¨ç¬¬ $i$ åœºä½¿ç”¨å‹å·ä¸º $h_i$ çš„è½¦å­ï¼Œåˆ™ç¬¬ $j$ åœºæ¸¸æˆè¦ä½¿ç”¨å‹å·ä¸º $h_j$ çš„è½¦å­ã€‚

ä½ èƒ½å¸®å° L é€‰æ‹©æ¯åœºæ¸¸æˆä½¿ç”¨çš„èµ›è½¦å—ï¼Ÿå¦‚æœæœ‰å¤šç§æ–¹æ¡ˆï¼Œè¾“å‡ºä»»æ„ä¸€ç§æ–¹æ¡ˆã€‚

å¦‚æœæ— è§£ï¼Œè¾“å‡º `-1`ã€‚

## è¯´æ˜/æç¤º

### æ ·ä¾‹ 1 è§£é‡Š

å° $L$ è®¡åˆ’è¿›è¡Œ $3$ åœºæ¸¸æˆï¼Œå…¶ä¸­ç¬¬ $1$ åœºçš„åœ°å›¾ç±»å‹æ˜¯ $x$ï¼Œé€‚åˆæ‰€æœ‰èµ›è½¦ï¼Œç¬¬ $2$ åœºå’Œç¬¬ $3$ åœºçš„åœ°å›¾æ˜¯ $c$ï¼Œä¸é€‚åˆèµ›è½¦ $C$ã€‚

å° $L$ å¸Œæœ›ï¼šè‹¥ç¬¬ $1$ åœºæ¸¸æˆä½¿ç”¨èµ›è½¦ $A$ï¼Œåˆ™ç¬¬ $2$ åœºæ¸¸æˆä½¿ç”¨èµ›è½¦ $B$ã€‚

é‚£ä¹ˆä¸ºè¿™ $3$ åœºæ¸¸æˆåˆ†åˆ«å®‰æ’èµ›è½¦ $A$ã€$B$ã€$A$ å¯ä»¥æ»¡è¶³æ‰€æœ‰æ¡ä»¶ã€‚

è‹¥ä¾æ¬¡ä¸º $3$ åœºæ¸¸æˆå®‰æ’èµ›è½¦ä¸º $BBB$ æˆ– $BAA$ æ—¶ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œä¹Ÿè¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆã€‚

ä½†ä¾æ¬¡å®‰æ’èµ›è½¦ä¸º $AAB$ æˆ– $ABC$ æ—¶ï¼Œå› ä¸ºä¸èƒ½æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œæ‰€ä»¥ä¸è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆã€‚

### æ ·ä¾‹ 2

è¯¦è§é™„åŠ æ–‡ä»¶ã€‚

### æ•°æ®èŒƒå›´

| æµ‹è¯•ç‚¹ç¼–å· |        $n$         |   $d$   |    $m$     |        å…¶ä»–æ€§è´¨         |
| :--------: | :----------------: | :-----: | :--------: | :---------------------: |
|    $1$     |      $\le 2$       |   $0$   |  $\le 4$   |           æ—             |
|    $2$     |      $\le 2$       | $\le n$ |  $\le 4$   |           æ—             |
|    $3$     |      $\le 5$       |   $0$   |  $\le 10$  |           æ—             |
|    $4$     |      $\le 5$       | $\le n$ |  $\le 10$  |           æ—             |
|    $5$     |      $\le 10$      |   $0$   |  $\le 20$  |           æ—             |
|    $6$     |      $\le 10$      | $\le 8$ |  $\le 20$  |           æ—             |
|    $7$     |      $\le 20$      |   $0$   |  $\le 40$  |    $S$ ä¸­åªåŒ…å« $c$     |
|    $8$     |      $\le 20$      |   $0$   |  $\le 40$  |           æ—             |
|    $9$     |      $\le 20$      | $\le 8$ |  $\le 40$  | $S$ ä¸­åªåŒ…å« $x$ æˆ– $c$ |
|    $10$    |      $\le 20$      | $\le 8$ |  $\le 40$  |           æ—             |
|    $11$    |     $\le 100$      |   $0$   | $\le 200$  |    $S$ ä¸­åªåŒ…å« $c$     |
|    $12$    |     $\le 100$      |   $0$   | $\le 200$  |           æ—             |
|    $13$    |     $\le 100$      | $\le 8$ | $\le 200$  | $S$ ä¸­åªåŒ…å« $x$ æˆ– $c$ |
|    $14$    |     $\le 100$      | $\le 8$ | $\le 200$  |           æ—             |
|    $15$    | $\le 5\times 10^3$ |   $0$   | $\le 10^4$ |           æ—             |
|    $16$    | $\le 5\times 10^3$ | $\le 8$ | $\le 10^4$ | $S$ ä¸­åªåŒ…å« $x$ æˆ– $c$ |
|    $17$    | $\le 5\times 10^3$ | $\le 8$ | $\le 10^4$ |           æ—             |
|    $18$    | $\le 5\times 10^4$ |   $0$   | $\le 10^5$ |           æ—             |
|    $19$    | $\le 5\times 10^4$ | $\le 8$ | $\le 10^5$ | $S$ ä¸­åªåŒ…å« $x$ æˆ– $c$ |
|    $20$    | $\le 5\times 10^4$ | $\le 8$ | $\le 10^5$ |           æ—             |

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 1
xcc
1
1 A 2 B```

### è¾“å‡º

```
ABA```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[NOI2017]æ¸¸æˆ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†æã€Œ[NOI2017]æ¸¸æˆã€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©å¤§å®¶ç†è§£é¢˜ç›®æ ¸å¿ƒæ€è·¯ï¼ŒæŒæ¡2-SATç®—æ³•ä¸çŠ¶æ€å‹ç¼©æŠ€å·§çš„ç»“åˆåº”ç”¨ï¼Œå¹¶é€šè¿‡å¯è§†åŒ–æ–¹æ¡ˆç›´è§‚ç†è§£ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`2-SATç®—æ³•` + `çŠ¶æ€å‹ç¼©æšä¸¾`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è§£å†³æœ¬é¢˜çš„å…³é”®åœ¨äºå°†å¤æ‚çº¦æŸè½¬åŒ–ä¸º**é€»è¾‘æ¨ç†é—®é¢˜**ã€‚æƒ³è±¡ä½ æ˜¯ä¸€ä½èµ›è½¦è°ƒåº¦å‘˜ï¼Œæ¯åœºæ¸¸æˆæ˜¯èµ›é“ï¼Œèµ›è½¦é€‰æ‹©æ˜¯â€œäºŒé€‰ä¸€â€çš„å†³ç­–ï¼ˆå¦‚é€‰Aæˆ–ä¸é€‰Aï¼‰ã€‚2-SATç®—æ³•å°±åƒåˆ¶å®šäº¤é€šè§„åˆ™ï¼š  
> - **éxåœ°å›¾**ï¼šå¤©ç„¶åªæœ‰ä¸¤ç§èµ›è½¦å¯é€‰ï¼ˆå¦‚aåœ°å›¾ç¦ç”¨Aï¼Œå¯é€‰B/Cï¼‰  
> - **xåœ°å›¾**ï¼šé€šè¿‡æšä¸¾ç¦ç”¨è½¦å‹ï¼ˆAæˆ–Bï¼‰è½¬åŒ–ä¸ºäºŒé€‰ä¸€é—®é¢˜  
> - **çº¦æŸæ¡ä»¶**ï¼šè½¬åŒ–ä¸ºé€»è¾‘è¾¹ï¼ˆâ€œè‹¥é€‰Aåˆ™å¿…é¡»é€‰Bâ€ï¼‰  
>  
> **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
> 1. ç”¨åƒç´ ç½‘æ ¼è¡¨ç¤ºèµ›é“ï¼Œä¸åŒé¢œè‰²æ–¹å—è¡¨ç¤ºåœ°å›¾ç±»å‹ï¼ˆçº¢ï¼šaï¼Œè“ï¼šbï¼Œç»¿ï¼šcï¼Œé»„ï¼šxï¼‰  
> 2. èµ›è½¦é€‰æ‹©ç”¨æ–¹å‘ç®­å¤´è¡¨ç¤ºï¼ˆâ†‘ï¼šç¬¬ä¸€ç§é€‰æ‹©ï¼Œâ†“ï¼šç¬¬äºŒç§ï¼‰  
> 3. çº¦æŸè¾¹æ˜¾ç¤ºä¸ºå½©è‰²å…‰çº¿ï¼Œè¿åçº¦æŸæ—¶è§¦å‘â€œç¢°æ’â€ç‰¹æ•ˆå’Œè­¦å‘ŠéŸ³æ•ˆ  
> 4. æšä¸¾xåœ°å›¾æ—¶ï¼Œé‡‡ç”¨â€œæ—¶ç©ºé—¨â€åŠ¨ç”»åˆ‡æ¢èµ›é“ç±»å‹  

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆxyz32768ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ€è·¯ç›´å‡»æ ¸å¿ƒâ€”â€”å°†xåœ°å›¾æšä¸¾ä¸ºa/bç±»å‹è¦†ç›–ä¸‰ç§è½¦å‹ã€‚ä»£ç è§„èŒƒï¼š  
  - å˜é‡å‘½åæ¸…æ™°ï¼ˆ`tran`å‡½æ•°å¤„ç†è½¦å‹æ˜ å°„ï¼‰  
  - å»ºå›¾é€»è¾‘å®Œæ•´è¦†ç›–ä¸‰ç§çº¦æŸæƒ…å†µ  
  - å·§ç”¨Tarjanç¼©ç‚¹è¾“å‡ºæ–¹æ¡ˆï¼ˆ`bel[i] < bel[i+n]`å†³ç­–ï¼‰  
  äº®ç‚¹ï¼šç”¨`neg(x)`å‡½æ•°å¤„ç†å¯¹ç«‹èŠ‚ç‚¹ï¼Œä½¿ä»£ç ç®€æ´é«˜æ•ˆã€‚

**é¢˜è§£äºŒï¼ˆFadingï¼‰**  
* **ç‚¹è¯„**ï¼š  
  é‡ç‚¹çªç ´xåœ°å›¾çš„æšä¸¾æœ¬è´¨ï¼š  
  - è¯æ˜æšä¸¾ä¸¤ç§ç±»å‹ï¼ˆç¦ç”¨A/ç¦ç”¨Bï¼‰å³å¯è¦†ç›–ABCå…¨è½¦å‹  
  - å»ºå›¾æ—¶ä¼˜å…ˆå¤„ç†ç‰¹æ®Šçº¦æŸï¼ˆå¦‚`if(s[y]==b) add(u,Â¬u)`ï¼‰  
  å®è·µä»·å€¼ï¼šé¿å…æ— æ•ˆæšä¸¾ï¼Œå°†å¤æ‚åº¦ä»$O(3^d)$ä¼˜åŒ–åˆ°$O(2^d)$ã€‚

**é¢˜è§£ä¸‰ï¼ˆSpXaceï¼‰**  
* **ç‚¹è¯„**ï¼š  
  æ•™å­¦å‘å…¸èŒƒï¼š  
  - è¯¦ç»†è§£é‡ŠèŠ‚ç‚¹è®¾è®¡ï¼ˆå¦‚`i`è¡¨ç¬¬ä¸€ç§é€‰æ‹©ï¼Œ`i+n`è¡¨ç¬¬äºŒç§ï¼‰  
  - å›¾è§£çº¦æŸè¾¹å«ä¹‰ï¼ˆåŸå‘½é¢˜ä¸é€†å¦å‘½é¢˜å¯¹ç§°å»ºè¾¹ï¼‰  
  äº®ç‚¹ï¼šç”¨`ch(i,t)`å‡½æ•°å°†é€‰æ‹©æ˜ å°„å›è½¦å‹ï¼Œè¾“å‡ºæ–¹æ¡ˆæ¸…æ™°ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **å…³é”®ç‚¹1ï¼šxåœ°å›¾çš„çŠ¶æ€å‹ç¼©**  
   * **åˆ†æ**ï¼š8ä¸ªxåœ°å›¾è‹¥å…¨æšä¸¾$3^8=6561$ç§çŠ¶æ€ä¼šè¶…æ—¶ã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡ç¦ç”¨Aæˆ–Bï¼ˆè¦†ç›–ä¸‰ç§è½¦å‹ï¼‰ï¼Œå‹ç¼©åˆ°$2^8=256$ç§çŠ¶æ€ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæšä¸¾çš„æœ¬è´¨æ˜¯çŠ¶æ€ç©ºé—´åˆ’åˆ†ï¼Œè€Œéç©·ä¸¾ã€‚

2. **å…³é”®ç‚¹2ï¼š2-SATçº¦æŸè½¬åŒ–**  
   * **åˆ†æ**ï¼šå¤„ç†çº¦æŸ$(i,h_i,j,h_j)$åˆ†ä¸‰ç§æƒ…å†µï¼š  
     ```mermaid
     graph LR
     A[hiæ˜¯å¦å¯ç”¨?] -- å¦ --> B[å¿½ç•¥]
     A -- æ˜¯ --> C{hjæ˜¯å¦å¯ç”¨?}
     C -- å¦ --> D[æ·»åŠ è¾¹ uâ†’Â¬u]
     C -- æ˜¯ --> E[æ·»åŠ è¾¹ uâ†’v å’Œ Â¬vâ†’Â¬u]
     ```
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€†å¦å‘½é¢˜å»ºè¾¹æ˜¯2-SATçš„æ ¸å¿ƒé€»è¾‘ã€‚

3. **å…³é”®ç‚¹3ï¼šè¾“å‡ºæ–¹æ¡ˆçš„é€‰æ‹©ä¾æ®**  
   * **åˆ†æ**ï¼šåˆ©ç”¨Tarjanç¼©ç‚¹åçš„å¼ºè¿é€šåˆ†é‡ç¼–å·ï¼ˆæ‹“æ‰‘é€†åºï¼‰ï¼Œå½“`bel[i] < bel[i+n]`æ—¶é€‰æ‹©ç¬¬ä¸€ç§è½¦å‹ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¼ºè¿é€šåˆ†é‡ç¼–å·æœ¬è´¨æ˜¯æ‹“æ‰‘åºçš„å€’åºã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼šçŠ¶æ€å‹ç¼©æšä¸¾**  
  ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºxåœ°å›¾ç±»å‹ï¼ˆ0è¡¨aï¼Œ1è¡¨bï¼‰ï¼Œä½è¿ç®—å¿«é€Ÿåˆ‡æ¢çŠ¶æ€ã€‚
- **æŠ€å·§2ï¼šå¯¹ç§°å»ºå›¾**  
  æ·»åŠ `uâ†’v`æ—¶åŒæ­¥æ·»åŠ `Â¬vâ†’Â¬u`ï¼Œä¿æŒé€»è¾‘å®Œæ•´æ€§ã€‚
- **æŠ€å·§3ï¼šçŸ­è·¯ä¼˜åŒ–**  
  æå‰åˆ¤æ–­æ— æ•ˆçº¦æŸï¼ˆå¦‚$h_i$ä¸åœ°å›¾å†²çªï¼‰å‡å°‘å»ºè¾¹ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**  
* **è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£ï¼Œé‡‡ç”¨DFSæšä¸¾xåœ°å›¾+Tarjanç¼©ç‚¹
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  #include <cstring>
  #include <stack>
  using namespace std;
  const int N=1e5+5;
  struct Edge { int to,next; } e[N*2];
  int head[N],tot,dfn[N],low[N],bel[N],n,m,d,cnt;
  int pos[10],num; //poså­˜å‚¨xåœ°å›¾ä½ç½®
  char s[N],ans[N];
  stack<int> stk;

  void add_edge(int u,int v) { 
      e[++tot]={v,head[u]}; head[u]=tot; 
  }

  void tarjan(int u) {
      dfn[u]=low[u]=++cnt;
      stk.push(u);
      for(int i=head[u];i;i=e[i].next) {
          int v=e[i].to;
          if(!dfn[v]) tarjan(v),low[u]=min(low[u],low[v]);
          else if(!bel[v]) low[u]=min(low[u],dfn[v]);
      }
      if(low[u]==dfn[u]) {
          int v; ++num;
          do {
              v=stk.top(); stk.pop();
              bel[v]=num;
          } while(v!=u);
      }
  }

  bool solve() {
      memset(head,0,sizeof(head)); tot=num=cnt=0;
      // å»ºå›¾é€»è¾‘ï¼ˆè§Section 3å…³é”®ç‚¹2ï¼‰
      for(int i=1;i<=n*2;++i) if(!dfn[i]) tarjan(i);
      for(int i=1;i<=n;++i) 
          if(bel[i]==bel[i+n]) return false;
      // è¾“å‡ºæ–¹æ¡ˆ
      for(int i=1;i<=n;++i) {
          if(s[i]=='a') ans[i]=(bel[i]<bel[i+n]?'B':'C');
          else if(s[i]=='b') ans[i]=(bel[i]<bel[i+n]?'A':'C');
          else ans[i]=(bel[i]<bel[i+n]?'A':'B');
      }
      return true;
  }

  void dfs(int x) {
      if(x>d) { if(solve()) exit(0); return; }
      s[pos[x]]='a'; dfs(x+1); //æšä¸¾ä¸ºaç±»å‹
      s[pos[x]]='b'; dfs(x+1); //æšä¸¾ä¸ºbç±»å‹
  }
  ```

**é¢˜è§£ä¸€ï¼ˆxyz32768ï¼‰æ ¸å¿ƒç‰‡æ®µ**  
* **äº®ç‚¹**ï¼š`tran`å‡½æ•°ä¼˜é›…å¤„ç†è½¦å‹æ˜ å°„
* **æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  int tran(int x, char c) {
      if(s[x]=='a') return c=='B'?x:x+n;
      if(s[x]=='b'||s[x]=='c') return c=='A'?x:x+n;
      return c=='C'?x+n:x; //xåœ°å›¾å¤„ç†
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  > æ ¹æ®åœ°å›¾ç±»å‹`s[x]`å’Œè½¦å‹`c`ï¼Œè¿”å›èŠ‚ç‚¹ç¼–å·ï¼š  
  > - éxåœ°å›¾ï¼šç›´æ¥è®¡ç®—ä¸¤ç§é€‰æ‹©å¯¹åº”çš„èŠ‚ç‚¹  
  > - xåœ°å›¾ï¼šç¦ç”¨Cæ—¶è¿”å›`x`ï¼ˆé€‰A/Bï¼‰ï¼Œç¦ç”¨Bæ—¶è¿”å›`x+n`ï¼ˆé€‰A/Cï¼‰  
  > **å­¦ä¹ ç¬”è®°**ï¼šç»Ÿä¸€æ¥å£å¤„ç†è½¦å‹æ˜ å°„æ˜¯ä»£ç ç®€æ´çš„å…³é”®ã€‚

**é¢˜è§£äºŒï¼ˆFadingï¼‰æ ¸å¿ƒç‰‡æ®µ**  
* **äº®ç‚¹**ï¼šä½è¿ç®—å‹ç¼©æšä¸¾çŠ¶æ€
* **æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  for(int s=0;s<(1<<d);s++) {
      for(int j=0;j<d;j++)
          s[pos[j]] = (s>>j&1)?'a':'b';
      if(check()) return; //æ£€æŸ¥å½“å‰æšä¸¾
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  > ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºæ¯ä¸ªxåœ°å›¾çš„ç±»å‹ï¼š  
  > - 0 â†’ è®¾ä¸º'a'ç±»å‹ï¼ˆç¦ç”¨Aï¼‰  
  > - 1 â†’ è®¾ä¸º'b'ç±»å‹ï¼ˆç¦ç”¨Bï¼‰  
  > **å­¦ä¹ ç¬”è®°**ï¼šä½è¿ç®—æ¯”DFSæšä¸¾æ›´èŠ‚çœæ ˆç©ºé—´ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**è®¾è®¡ä¸»é¢˜**ï¼šåƒç´ èµ›è½¦é—¯å…³ï¼ˆFCçº¢ç™½æœºé£æ ¼ï¼‰  

**æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
```mermaid
sequenceDiagram
    participant åœ°å›¾ç½‘æ ¼
    participant æ§åˆ¶é¢æ¿
    participant çº¦æŸè¾¹
    æ§åˆ¶é¢æ¿->>åœ°å›¾ç½‘æ ¼: åˆå§‹åŒ–èµ›é“ï¼ˆé¢œè‰²åŒºåˆ†ç±»å‹ï¼‰
    æ§åˆ¶é¢æ¿->>åœ°å›¾ç½‘æ ¼: æšä¸¾xåœ°å›¾ï¼ˆé—ªçƒé»„â†’çº¢/è“ï¼‰
    çº¦æŸè¾¹->>åœ°å›¾ç½‘æ ¼: æ˜¾ç¤ºé€»è¾‘è¾¹ï¼ˆçº¢è‰²å…‰çº¿ï¼‰
    loop Tarjanç¼©ç‚¹
        åœ°å›¾ç½‘æ ¼->>åœ°å›¾ç½‘æ ¼: èŠ‚ç‚¹èšåˆæˆå¼ºè¿é€šåˆ†é‡ï¼ˆåƒç´ æ–¹å—åˆå¹¶ï¼‰
    end
    æ§åˆ¶é¢æ¿->>åœ°å›¾ç½‘æ ¼: æ ¹æ®æ‹“æ‰‘åºæŸ“è‰²ï¼ˆç»¿ï¼šé€‰è½¦å‹1ï¼Œè“ï¼šé€‰è½¦å‹2ï¼‰
```

**äº¤äº’è®¾è®¡**ï¼š  
1. **æ§åˆ¶é¢æ¿**ï¼š  
   - æ­¥è¿›æ§åˆ¶ï¼š`â—€ â–¶`é”®å•æ­¥æ‰§è¡Œ  
   - é€Ÿåº¦æ»‘å—ï¼šè°ƒæ•´åŠ¨ç”»é€Ÿåº¦  
   - æ¨¡å¼åˆ‡æ¢ï¼š`A/B`é”®åˆ‡æ¢xåœ°å›¾æšä¸¾çŠ¶æ€  

2. **è§†è§‰åé¦ˆ**ï¼š  
   - **æœ‰æ•ˆé€‰æ‹©**ï¼šèµ›è½¦é€šè¿‡å…³å¡æ—¶åƒç´ æ–¹å—å˜é‡‘+â€œå®â€éŸ³æ•ˆ  
   - **çº¦æŸå†²çª**ï¼šç¢°æ’æ—¶è§¦å‘å±å¹•é—ªçƒ+ä½æ²‰éŸ³æ•ˆ  
   - **ç¼©ç‚¹è¿‡ç¨‹**ï¼šå¼ºè¿é€šåˆ†é‡ç”¨ç›¸åŒé¢œè‰²è„‰å†²å…‰æ•ˆæ ‡è®°  

3. **åŠ¨æ€æ•°æ®ç»“æ„**ï¼š  
   - é˜Ÿåˆ—/æ ˆï¼šåƒç´ æ–¹å—æ°´å¹³æ’åˆ—ï¼Œå…¥é˜Ÿæ—¶ä»å³ä¾§æ»‘å…¥  
   - å¼ºè¿é€šåˆ†é‡ï¼šç”¨ç›¸åŒé¢œè‰²çš„é—ªçƒè¾¹æ¡†æ ‡è®°  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
2-SAT+çŠ¶æ€å‹ç¼©é€‚ç”¨äºï¼š  
1. èµ„æºåˆ†é…å†²çªï¼ˆå¦‚è¯¾ç¨‹å®‰æ’ï¼‰  
2. åŒäººåšå¼ˆå†³ç­–ï¼ˆå¦‚æ£‹ç±»AIï¼‰  
3. ç”µè·¯å¸ƒçº¿çº¦æŸä¼˜åŒ–  

**æ´›è°·æ¨èé¢˜ç›®**ï¼š  
1. **P4782 ã€æ¨¡æ¿ã€‘2-SAT**  
   â†’ å·©å›ºåŸºç¡€å»ºå›¾ä¸ç¼©ç‚¹æŠ€å·§  
2. **P5332 [JSOI2019]ç²¾å‡†é¢„æµ‹**  
   â†’ å­¦ä¹ 2-SATåœ¨æ—¶åºé€»è¾‘ä¸­çš„åº”ç”¨  
3. **P3513 [POI2011]KON-Conspiracy**  
   â†’ è¿›é˜¶è®­ç»ƒçº¦æŸåˆ†æä¸æ¨¡å‹è½¬åŒ–  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªxyz32768çš„è°ƒè¯•ç»éªŒ**ï¼š  
> â€œåœ¨å®ç°`tran`å‡½æ•°æ—¶ï¼Œæ›¾å› æœªå¤„ç†xåœ°å›¾çš„è½¦å‹æ˜ å°„å¯¼è‡´WAã€‚é€šè¿‡æ‰“å°ä¸­é—´å˜é‡å‘ç°ï¼šå½“xè®¾ä¸º'a'æ—¶ï¼Œé€‰Cè½¦å‹åº”æ˜ å°„åˆ°`i+n`èŠ‚ç‚¹ã€‚â€  
>   
> **Kayçš„æ€»ç»“**ï¼š  
> è°ƒè¯•2-SATé—®é¢˜çš„é»„é‡‘æ³•åˆ™ï¼š  
> 1. å¯è§†åŒ–æ£€æŸ¥å»ºå›¾è¾¹ï¼ˆè¾“å‡ºuâ†’vå’ŒÂ¬vâ†’Â¬uï¼‰  
> 2. éªŒè¯å¼ºè¿é€šåˆ†é‡åˆç†æ€§ï¼ˆå¯¹ç«‹èŠ‚ç‚¹ä¸åœ¨åŒä¸€åˆ†é‡ï¼‰  
> 3. è¾¹ç•Œæµ‹è¯•ï¼šæ— çº¦æŸ/å…¨çº¦æŸçš„æç«¯æƒ…å†µ  

---

**ç»“è¯­**  
é€šè¿‡æœ¬æŒ‡å—ï¼Œå¸Œæœ›å¤§å®¶æŒæ¡äº†2-SATä¸çŠ¶æ€å‹ç¼©çš„ååŒåº”ç”¨ã€‚è®°ä½ï¼šç®—æ³•å­¦ä¹ å°±åƒèµ›è½¦è°ƒæ ¡â€”â€”ç†è§£å¼•æ“åŸç†ï¼ˆç®—æ³•æœ¬è´¨ï¼‰åï¼Œæ‰èƒ½ç²¾å‡†æ§åˆ¶æ¯ä¸ªå†³ç­–èŠ‚ç‚¹ï¼ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸš—ğŸ’¨

---
å¤„ç†ç”¨æ—¶ï¼š161.91ç§’
# é¢˜ç›®ä¿¡æ¯

# [NOI2009] æ¤ç‰©å¤§æˆ˜åƒµå°¸

## é¢˜ç›®èƒŒæ™¯

Plants vs. Zombiesï¼ˆPVZï¼‰æ˜¯æœ€è¿‘ååˆ†é£é¡çš„ä¸€æ¬¾å°æ¸¸æˆã€‚Plantsï¼ˆæ¤ç‰©ï¼‰å’Œ Zombiesï¼ˆåƒµå°¸ï¼‰æ˜¯æ¸¸æˆçš„ä¸»è§’ï¼Œå…¶ä¸­ Plants é˜²å®ˆï¼Œè€Œ Zombies è¿›æ”»ã€‚è¯¥æ¬¾æ¸¸æˆåŒ…å«å¤šç§ä¸åŒçš„æŒ‘æˆ˜ç³»åˆ—ï¼Œæ¯”å¦‚ Protect Your Brainã€Bowling ç­‰ç­‰ã€‚å…¶ä¸­æœ€ä¸ºç»å…¸çš„ï¼Œè«è¿‡äºç©å®¶é€šè¿‡æ§åˆ¶ Plants æ¥é˜²å®ˆ Zombies çš„è¿›æ”»ï¼Œæˆ–è€…ç›¸ååœ°ç”±ç©å®¶é€šè¿‡æ§åˆ¶ Zombies å¯¹ Plants å‘èµ·è¿›æ”»ã€‚



## é¢˜ç›®æè¿°

ç°åœ¨ï¼Œæˆ‘ä»¬å°†è¦è€ƒè™‘çš„é—®é¢˜æ˜¯æ¸¸æˆä¸­ Zombies å¯¹ Plants çš„è¿›æ”»ï¼Œè¯·æ³¨æ„ï¼Œæœ¬é¢˜ä¸­è§„åˆ™ä¸å®é™…æ¸¸æˆ**æœ‰æ‰€ä¸åŒ**ã€‚æ¸¸æˆä¸­æœ‰ä¸¤ç§è§’è‰²ï¼ŒPlants å’Œ Zombiesï¼Œæ¯ä¸ª Plant æœ‰ä¸€ä¸ªæ”»å‡»ä½ç½®é›†åˆï¼Œå®ƒå¯ä»¥å¯¹è¿™äº›ä½ç½®è¿›è¡Œä¿æŠ¤ï¼›è€Œ Zombie è¿›æ”»æ¤ç‰©çš„æ–¹å¼æ˜¯èµ°åˆ°æ¤ç‰©æ‰€åœ¨çš„ä½ç½®ä¸Šå¹¶å°†å…¶åƒæ‰ã€‚

æ¸¸æˆçš„åœ°å›¾å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ª $N$ è¡Œ $M$ åˆ—çš„çŸ©é˜µï¼Œè¡Œä»ä¸Šåˆ°ä¸‹ç”¨ $0$ åˆ° $Nâ€“1$ ç¼–å·ï¼Œåˆ—ä»å·¦åˆ°å³ç”¨ $0$ åˆ° $Mâ€“1$ ç¼–å·ï¼›åœ¨åœ°å›¾çš„æ¯ä¸ªä½ç½®ä¸Šéƒ½æ”¾æœ‰ä¸€ä¸ª $Plant$ï¼Œä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬æŠŠä½äºç¬¬ $r$ è¡Œç¬¬ $c$ åˆ—çš„æ¤ç‰©è®°ä¸º $P_{r, c}$ã€‚

Plants åˆ†å¾ˆå¤šç§ï¼Œæœ‰ã€Œæ”»å‡»ç±»ã€ã€Œé˜²å®ˆç±»ã€å’Œã€Œç»æµç±»ã€ç­‰ç­‰ã€‚ä¸ºäº†ç®€å•çš„æè¿°æ¯ä¸ª Plantï¼Œå®šä¹‰ $\operatorname{Score}$ å’Œ $\operatorname{Attack}$ å¦‚ä¸‹ï¼š

* $\operatorname{Score}(P_{r, c})$ â€” Zombie å‡»æºƒæ¤ç‰© $P_{r, c}$ å¯è·å¾—çš„èƒ½æºã€‚   
è‹¥ $\operatorname{Score}(P_{r, c})$ ä¸ºéè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨ç¤ºå‡»æºƒæ¤ç‰© $P_{r, c}$ å¯è·å¾—èƒ½æº $\operatorname{Score}(P_{r, c})$ï¼Œè‹¥ä¸ºè´Ÿæ•°è¡¨ç¤ºå‡»æºƒ $P_{r, c}$ éœ€è¦ä»˜å‡ºèƒ½æº $-\operatorname{Score}(P_{r, c})$ã€‚

* $\operatorname{Attack}(P_{r, c})$ â€” æ¤ç‰© $P_{r, c}$ èƒ½å¤Ÿå¯¹ Zombie è¿›è¡Œæ”»å‡»çš„ä½ç½®é›†åˆã€‚

Zombies å¿…é¡»ä»åœ°å›¾çš„å³ä¾§è¿›å…¥ï¼Œä¸”åªèƒ½æ²¿ç€æ°´å¹³æ–¹å‘è¿›è¡Œç§»åŠ¨ã€‚Zombies æ”»å‡»æ¤ç‰©çš„å”¯ä¸€æ–¹å¼å°±æ˜¯èµ°åˆ°è¯¥æ¤ç‰©æ‰€åœ¨çš„ä½ç½®å¹¶å°†æ¤ç‰©åƒæ‰ã€‚å› æ­¤ Zombies çš„è¿›æ”»æ€»æ˜¯ä»åœ°å›¾çš„å³ä¾§å¼€å§‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºç¬¬ $r$ è¡Œçš„è¿›æ”»ï¼ŒZombies å¿…é¡»é¦–å…ˆæ”»å‡» $P_{r, M-1}$ï¼›è‹¥éœ€è¦å¯¹ $P_{r, c}$ï¼ˆ$0 \le c < m - 1$ï¼‰æ”»å‡»ï¼Œå¿…é¡»å°† $P_{r,M-1}, P_{r, M-2} \cdots P_{r, c+1}$ å…ˆå‡»æºƒï¼Œå¹¶ç§»åŠ¨åˆ°ä½ç½® $(r, c)$ æ‰å¯è¿›è¡Œæ”»å‡»ã€‚

åœ¨æœ¬é¢˜çš„è®¾å®šä¸­ï¼ŒPlants çš„æ”»å‡»åŠ›æ˜¯æ— ç©·å¤§çš„ï¼Œä¸€æ—¦ Zombie è¿›å…¥æŸä¸ª Plant çš„æ”»å‡»ä½ç½®ï¼Œè¯¥ Zombie ä¼šè¢«ç¬é—´æ¶ˆç­ï¼Œè€Œè¯¥ Zombie æ²¡æœ‰æ—¶é—´è¿›è¡Œä»»ä½•æ”»å‡»æ“ä½œã€‚å› æ­¤ï¼Œå³ä¾¿ Zombie è¿›å…¥äº†ä¸€ä¸ª Plant æ‰€åœ¨çš„ä½ç½®ï¼Œä½†è¯¥ä½ç½®å±äºå…¶ä»–æ¤ç‰©çš„æ”»å‡»ä½ç½®é›†åˆï¼Œåˆ™ Zombie ä¼šè¢«ç¬é—´æ¶ˆç­è€Œæ‰€åœ¨ä½ç½®çš„æ¤ç‰©åˆ™å®‰ç„¶æ— æ™ï¼ˆåœ¨æˆ‘ä»¬çš„è®¾å®šä¸­ï¼ŒPlant çš„æ”»å‡»ä½ç½®ä¸åŒ…å«è‡ªèº«æ‰€åœ¨ä½ç½®ï¼Œå¦åˆ™ä½ å°±ä¸å¯èƒ½å‡»æºƒå®ƒäº†ï¼‰ã€‚

Zombies çš„ç›®æ ‡æ˜¯å¯¹ Plants çš„é˜µåœ°å‘èµ·è¿›æ”»å¹¶è·å¾—æœ€å¤§çš„èƒ½æºæ”¶å…¥ã€‚æ¯ä¸€æ¬¡ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªå¯è¿›æ”»çš„æ¤ç‰©è¿›è¡Œæ”»å‡»ã€‚æœ¬é¢˜çš„ç›®æ ‡ä¸ºï¼Œåˆ¶å®šä¸€å¥— Zombies çš„è¿›æ”»æ–¹æ¡ˆï¼Œé€‰æ‹©è¿›æ”»å“ªäº›æ¤ç‰©ä»¥åŠè¿›æ”»çš„é¡ºåºï¼Œä»è€Œè·å¾—æœ€å¤§çš„èƒ½æºæ”¶å…¥ã€‚

## è¯´æ˜/æç¤º

#### æ•°æ®è§„æ¨¡ä¸çº¦å®š
- å¯¹äº $20\%$ çš„æ•°æ®ï¼Œä¿è¯ $ N, M \le 5$ã€‚
- å¯¹äº $40\%$ çš„æ•°æ®ï¼Œä¿è¯ $ N, M \le 10$ã€‚
- å¯¹äº $100\%$ çš„æ•°æ®ï¼Œä¿è¯ $1 \le N \le 20$ï¼Œ$1 \le M \le 30$ï¼Œ$-10^4 â‰¤ \operatorname{Score} \le 10^4$ã€‚

#### è¯´æ˜
é¢˜é¢ç”± @syksykCCC ä¿®æ”¹ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 2
10 0
20 0
-10 0
-5 1 0 0
100 1 2 1
100 0```

### è¾“å‡º

```
25```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[NOI2009]æ¤ç‰©å¤§æˆ˜åƒµå°¸ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

### âœ¨ æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿï¼šæœ€å¤§æƒé—­åˆå­å›¾ï¼ˆç½‘ç»œæµ-æœ€å°å‰²ï¼‰+ æ‹“æ‰‘æ’åº


### ğŸ—£ï¸ åˆæ­¥åˆ†æ
è§£å†³â€œæ¤ç‰©å¤§æˆ˜åƒµå°¸â€çš„å…³é”®ï¼Œåœ¨äº**å°†é—®é¢˜è½¬åŒ–ä¸ºâ€œæœ€å¤§æƒé—­åˆå­å›¾â€æ¨¡å‹**ï¼Œå¹¶é€šè¿‡**æ‹“æ‰‘æ’åºå¤„ç†å¾ªç¯ä¾èµ–**ã€‚  

#### 1.1 æ ¸å¿ƒç®—æ³•æ€æƒ³æ¯”å–»
æƒ³è±¡ä½ è¦æ”¶é›†ä¸€å †â€œå¸¦æ¡ä»¶çš„å®è—â€ï¼šæ¯ä¸ªå®è—æœ‰æ­£/è´Ÿä»·å€¼ï¼Œä½†æ‹¿å®è—Aå¿…é¡»å…ˆæ‹¿å®è—Bï¼ˆæ¯”å¦‚Aè¢«Bä¿æŠ¤ï¼‰ã€‚**æœ€å¤§æƒé—­åˆå­å›¾**å°±æ˜¯åœ¨æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„å‰æä¸‹ï¼Œé€‰å‡ºä»·å€¼æ€»å’Œæœ€å¤§çš„å®è—é›†åˆã€‚  

#### 1.2 é¢˜è§£æ€è·¯ä¸æ ¸å¿ƒéš¾ç‚¹
- **é—®é¢˜è½¬åŒ–**ï¼š  
  æ¯ä¸ªæ¤ç‰©æ˜¯ä¸€ä¸ªâ€œå®è—â€ï¼Œåˆ†æ•°æ˜¯â€œä»·å€¼â€ï¼›åƒæ¤ç‰©Aå¿…é¡»å…ˆåƒå³è¾¹çš„æ¤ç‰©å’Œä¿æŠ¤Açš„æ¤ç‰©ï¼Œè¿™å¯¹åº”â€œæ‹¿Aå¿…é¡»æ‹¿Bâ€çš„æ¡ä»¶ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼š  
  è‹¥æ¤ç‰©é—´å­˜åœ¨**å¾ªç¯ä¾èµ–**ï¼ˆå¦‚Aä¿æŠ¤Bï¼ŒBä¿æŠ¤Aï¼‰ï¼Œåˆ™è¿™äº›æ¤ç‰©æ— æ³•è¢«åƒæ‰ï¼ˆåƒµå°¸æ°¸è¿œæ— æ³•æ‰“ç ´å¾ªç¯ï¼‰ã€‚éœ€ç”¨**æ‹“æ‰‘æ’åº**å»æ‰è¿™äº›â€œæ— æ•ˆç‚¹â€ï¼ˆç¯åŠè¢«ç¯ä¿æŠ¤çš„ç‚¹ï¼‰ã€‚  
- **è§£å†³æ–¹æ¡ˆ**ï¼š  
  1. æ‹“æ‰‘æ’åºç­›é€‰å¯æ”»å‡»çš„æ¤ç‰©ï¼ˆå…¥åº¦èƒ½å‡åˆ°0çš„ç‚¹ï¼‰ï¼›  
  2. å¯¹ç­›é€‰åçš„ç‚¹ï¼Œæ„å»º**æœ€å¤§æƒé—­åˆå­å›¾**çš„ç½‘ç»œæµæ¨¡å‹ï¼Œç”¨æœ€å°å‰²æ±‚æœ€å¤§ä»·å€¼ã€‚  

#### 1.3 æ ¸å¿ƒç®—æ³•æµç¨‹ä¸å¯è§†åŒ–è®¾è®¡æ€è·¯
- **æ‹“æ‰‘æ’åº**ï¼š  
  ä»å…¥åº¦ä¸º0çš„ç‚¹ï¼ˆæœ€å³è¾¹çš„æ¤ç‰©ï¼Œæ— ä¿æŠ¤ï¼‰å¼€å§‹ï¼Œé€æ­¥å°†ä¾èµ–å®ƒçš„ç‚¹çš„å…¥åº¦å‡1ï¼Œå…¥åº¦ä¸º0åˆ™åŠ å…¥é˜Ÿåˆ—ã€‚æœªè¢«è®¿é—®çš„ç‚¹å³ä¸ºâ€œæ— æ•ˆç‚¹â€ï¼ˆç¯æˆ–è¢«ç¯ä¿æŠ¤ï¼‰ã€‚  
  - **å¯è§†åŒ–è®¾è®¡**ï¼šç”¨åƒç´ å—è¡¨ç¤ºæ¤ç‰©ï¼Œå…¥åº¦ä¸º0çš„ç‚¹é—ªçƒï¼Œå¤„ç†åå˜æš—ï¼ˆæ ‡è®°ä¸ºæ— æ•ˆï¼‰ï¼Œé˜Ÿåˆ—ç”¨åƒç´ é˜Ÿåˆ—åŠ¨æ€å±•ç¤ºã€‚  
- **ç½‘ç»œæµå»ºæ¨¡**ï¼š  
  æºç‚¹Sè¿æ­£æƒæ¤ç‰©ï¼ˆå®¹é‡ä¸ºåˆ†æ•°ï¼‰ï¼Œè´Ÿæƒæ¤ç‰©è¿æ±‡ç‚¹Tï¼ˆå®¹é‡ä¸ºåˆ†æ•°ç»å¯¹å€¼ï¼‰ï¼Œä¾èµ–è¾¹ï¼ˆå¦‚Aâ†’Bï¼‰è¿INFå®¹é‡ï¼ˆæ— æ³•è¢«å‰²ï¼‰ã€‚è·‘æœ€å°å‰²åï¼Œ**æ­£æƒå’Œ-æœ€å°å‰²**å³ä¸ºæœ€å¤§ä»·å€¼ã€‚  
  - **å¯è§†åŒ–è®¾è®¡**ï¼šSå’ŒTç”¨ä¸åŒé¢œè‰²æ ‡è®°ï¼Œæ­£æƒç‚¹è¿Sï¼ˆç»¿è‰²è¾¹ï¼‰ï¼Œè´Ÿæƒç‚¹è¿Tï¼ˆçº¢è‰²è¾¹ï¼‰ï¼Œä¾èµ–è¾¹ç”¨è“è‰²è¾¹ã€‚æœ€å°å‰²æ—¶ï¼Œæ–­å¼€çš„è¾¹é—ªçƒï¼Œæ˜¾ç¤ºâ€œèˆå¼ƒæ­£æƒâ€æˆ–â€œæ‰¿æ‹…è´Ÿæƒâ€çš„å†³ç­–ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### ğŸ“Œ é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šlonglongzhu123ï¼Œèµï¼š97ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£æ˜¯â€œæœ€å¤§æƒé—­åˆå­å›¾â€çš„ç»å…¸å…¥é—¨è®²è§£ï¼Œæ€è·¯æ¸…æ™°ä¸”å…¨é¢ã€‚  
- **æ€è·¯**ï¼šè¯¦ç»†è§£é‡Šäº†é—­åˆå­å›¾çš„æ¦‚å¿µï¼Œå°†æ¤ç‰©ä¾èµ–è½¬åŒ–ä¸ºè¾¹ï¼Œç”¨æ‹“æ‰‘æ’åºå¤„ç†ç¯ï¼Œæœ€åç”¨ç½‘ç»œæµæ±‚æœ€å°å‰²ã€‚  
- **ä»£ç **ï¼šå˜é‡å‘½åè§„èŒƒï¼ˆå¦‚`POINT(i,j)`è¡¨ç¤ºæ¤ç‰©åæ ‡ï¼‰ï¼Œæ‹“æ‰‘æ’åºå’Œç½‘ç»œæµï¼ˆDinicï¼‰çš„å®ç°ç®€æ´æ˜“æ‡‚ã€‚  
- **äº®ç‚¹**ï¼šç”¨å›¾ç¤ºè¾…åŠ©è¯´æ˜æœ€å¤§æƒé—­åˆå­å›¾çš„å»ºæ¨¡è¿‡ç¨‹ï¼Œå¸®åŠ©ç†è§£â€œæ­£æƒå’Œ-æœ€å°å‰²â€çš„åŸç†ã€‚  

### ğŸ“Œ é¢˜è§£äºŒï¼ˆä½œè€…ï¼šFreddieï¼Œèµï¼š19ï¼‰
**ç‚¹è¯„**ï¼š  
ä¾§é‡â€œæ‹“æ‰‘æ’åº+ç½‘ç»œæµâ€çš„å…·ä½“å®ç°ï¼Œæ­¥éª¤æ˜ç¡®ã€‚  
- **æ€è·¯**ï¼šå…ˆæ‹“æ‰‘æ’åºå»é™¤æ— æ•ˆç‚¹ï¼Œå†è½¬ç½®å›¾ï¼ˆè¾¹åå‘ï¼‰æ„å»ºç½‘ç»œæµæ¨¡å‹ï¼Œå¼ºè°ƒâ€œè½¬ç½®å›¾â€çš„ä½œç”¨ï¼ˆä¿è¯é—­åˆå­å›¾çš„è¾¹æ–¹å‘æ­£ç¡®ï¼‰ã€‚  
- **ä»£ç **ï¼šDinicç®—æ³•çš„å®ç°é«˜æ•ˆï¼Œæ‹“æ‰‘æ’åºçš„å¤„ç†é€»è¾‘æ¸…æ™°ï¼ˆå…¥åº¦å‡ä¸€çš„æ¡ä»¶åˆ¤æ–­å‡†ç¡®ï¼‰ã€‚  
- **äº®ç‚¹**ï¼šç”¨â€œåˆ‡ç³•é—®é¢˜â€ç±»æ¯”æ¤ç‰©ä¿æŠ¤çš„é™åˆ¶ï¼Œå¸®åŠ©ç†è§£ä¾èµ–è¾¹çš„ä½œç”¨ã€‚  

### ğŸ“Œ é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šBJpers2ï¼Œèµï¼š12ï¼‰
**ç‚¹è¯„**ï¼š  
ç”¨â€œä¼ªæ‹“æ‰‘æ’åºâ€ç­›é€‰å¯æ”»å‡»æ¤ç‰©ï¼Œå»ºæ¨¡æ–¹å¼æ›´é€šä¿—ã€‚  
- **æ€è·¯**ï¼šä»å…¥åº¦ä¸º0çš„ç‚¹å¼€å§‹ï¼Œé€æ­¥æ‰©å±•å¯æ”»å‡»çš„æ¤ç‰©ï¼Œé¿å…å¤„ç†ç¯ï¼ˆæœªè¢«è®¿é—®çš„ç‚¹å³ä¸ºæ— æ•ˆï¼‰ã€‚  
- **ä»£ç **ï¼šç½‘ç»œæµçš„ç¼–å·å¤„ç†ï¼ˆ`id[now]`è¡¨ç¤ºæ¤ç‰©çš„ç½‘ç»œæµèŠ‚ç‚¹ï¼‰æ¸…æ™°ï¼ŒDinicçš„å®ç°ç®€æ´ã€‚  
- **äº®ç‚¹**ï¼šç”¨â€œæˆ‘æ˜¯åƒµå°¸â€æ¨¡å¼çš„æ¸¸æˆç»éªŒç±»æ¯”ï¼Œé™ä½ç†è§£éš¾åº¦ï¼ˆâ€œæ¯æ¬¡åƒæ²¡æœ‰ä¿æŠ¤çš„æ¤ç‰©â€ï¼‰ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### ğŸ”‘ å…³é”®ç‚¹1ï¼šå¦‚ä½•å»ºç«‹ä¾èµ–å…³ç³»ï¼Ÿ
- **åˆ†æ**ï¼šåƒæ¤ç‰©Aå¿…é¡»å…ˆåƒBï¼Œå¯¹åº”è¾¹**Aâ†’B**ï¼ˆé—­åˆå­å›¾åŒ…å«Aåˆ™å¿…é¡»åŒ…å«Bï¼‰ã€‚ä¾‹å¦‚ï¼Œå³è¾¹çš„æ¤ç‰©Bæ˜¯Açš„å‰ç½®ï¼Œæ‰€ä»¥Aâ†’Bï¼›ä¿æŠ¤è€…Bæ˜¯Açš„å‰ç½®ï¼Œæ‰€ä»¥Aâ†’Bã€‚  
- **å­¦ä¹ ç¬”è®°**ï¼šä¾èµ–å…³ç³»çš„è¾¹æ–¹å‘æ˜¯â€œè¢«ä¾èµ–è€…â†’ä¾èµ–è€…â€ï¼Œç¡®ä¿é—­åˆå­å›¾çš„æ­£ç¡®æ€§ã€‚  

### ğŸ”‘ å…³é”®ç‚¹2ï¼šå¦‚ä½•å¤„ç†å¾ªç¯ä¾èµ–ï¼Ÿ
- **åˆ†æ**ï¼šå¾ªç¯ä¾èµ–ï¼ˆå¦‚Aâ†’Bâ†’Aï¼‰å¯¼è‡´æ¤ç‰©æ— æ³•è¢«åƒï¼Œéœ€ç”¨**æ‹“æ‰‘æ’åº**å»æ‰è¿™äº›ç‚¹ã€‚æœªè¢«æ‹“æ‰‘æ’åºè®¿é—®çš„ç‚¹å³ä¸ºæ— æ•ˆç‚¹ï¼ˆå…¥åº¦æ— æ³•å‡åˆ°0ï¼‰ã€‚  
- **å­¦ä¹ ç¬”è®°**ï¼šæ‹“æ‰‘æ’åºæ˜¯å¤„ç†å¾ªç¯ä¾èµ–çš„æœ‰æ•ˆå·¥å…·ï¼Œèƒ½ç­›é€‰å‡ºæ‰€æœ‰å¯è®¿é—®çš„ç‚¹ã€‚  

### ğŸ”‘ å…³é”®ç‚¹3ï¼šå¦‚ä½•æ„å»ºç½‘ç»œæµæ¨¡å‹ï¼Ÿ
- **åˆ†æ**ï¼š  
  - æºç‚¹Sè¿æ­£æƒç‚¹ï¼ˆå®¹é‡ä¸ºåˆ†æ•°ï¼‰ï¼šé€‰æ­£æƒç‚¹éœ€â€œä»˜å‡ºâ€åˆ†æ•°ï¼ˆè‹¥å‰²æ‰åˆ™èˆå¼ƒï¼‰ï¼›  
  - è´Ÿæƒç‚¹è¿æ±‡ç‚¹Tï¼ˆå®¹é‡ä¸ºåˆ†æ•°ç»å¯¹å€¼ï¼‰ï¼šé€‰è´Ÿæƒç‚¹éœ€â€œæ‰¿æ‹…â€ä»£ä»·ï¼ˆè‹¥å‰²æ‰åˆ™æ‰¿æ‹…ï¼‰ï¼›  
  - ä¾èµ–è¾¹è¿INFå®¹é‡ï¼šæ— æ³•è¢«å‰²ï¼Œä¿è¯ä¾èµ–å…³ç³»ä¸è¢«ç ´åã€‚  
- **å­¦ä¹ ç¬”è®°**ï¼šæœ€å¤§æƒé—­åˆå­å›¾çš„ç½‘ç»œæµæ¨¡å‹æ˜¯â€œæ­£æƒå’Œ-æœ€å°å‰²â€ï¼Œæ ¸å¿ƒæ˜¯å°†â€œé€‰/ä¸é€‰â€çš„å†³ç­–è½¬åŒ–ä¸ºâ€œå‰²è¾¹â€çš„é€‰æ‹©ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### ğŸ“ æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
**è¯´æ˜**ï¼šç»¼åˆä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œå®ç°æ‹“æ‰‘æ’åº+Dinicç®—æ³•æ±‚æœ€å°å‰²ã€‚  
**å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <queue>
#include <cstring>
using namespace std;

const int MAXN = 20 * 30 + 10;
const int INF = 1e9;
int n, m, s, t;
int score[MAXN];
vector<int> g[MAXN]; // ä¾èµ–è¾¹ï¼ˆAâ†’Bï¼Œè¡¨ç¤ºåƒAå¿…é¡»åƒBï¼‰
int in[MAXN]; // å…¥åº¦
bool valid[MAXN]; // æ˜¯å¦ä¸ºæœ‰æ•ˆç‚¹ï¼ˆå¯æ”»å‡»ï¼‰
int id[MAXN]; // æœ‰æ•ˆç‚¹çš„ç½‘ç»œæµç¼–å·
int cnt; // æœ‰æ•ˆç‚¹æ•°é‡

// æ‹“æ‰‘æ’åºç­›é€‰æœ‰æ•ˆç‚¹
void toposort() {
    queue<int> q;
    for (int i = 1; i <= n * m; i++) {
        if (in[i] == 0) {
            q.push(i);
            valid[i] = true;
        }
    }
    while (!q.empty()) {
        int u = q.front();
        q.pop();
        id[u] = ++cnt; // åˆ†é…ç½‘ç»œæµç¼–å·
        for (int v : g[u]) {
            in[v]--;
            if (in[v] == 0 && !valid[v]) {
                q.push(v);
                valid[v] = true;
            }
        }
    }
}

// Dinicç®—æ³•
struct Edge {
    int to, cap, next;
} edge[MAXN * MAXN];
int head[MAXN], tot = 1;
int dep[MAXN], cur[MAXN];

void add_edge(int u, int v, int cap) {
    edge[++tot] = {v, cap, head[u]};
    head[u] = tot;
    edge[++tot] = {u, 0, head[v]};
    head[v] = tot;
}

bool bfs() {
    memset(dep, 0, sizeof(dep));
    queue<int> q;
    q.push(s);
    dep[s] = 1;
    while (!q.empty()) {
        int u = q.front();
        q.pop();
        for (int i = head[u]; i; i = edge[i].next) {
            int v = edge[i].to;
            if (!dep[v] && edge[i].cap > 0) {
                dep[v] = dep[u] + 1;
                q.push(v);
                if (v == t) return true;
            }
        }
    }
    return false;
}

int dfs(int u, int flow) {
    if (u == t || flow == 0) return flow;
    int res = 0;
    for (int &i = cur[u]; i; i = edge[i].next) {
        int v = edge[i].to;
        if (dep[v] == dep[u] + 1 && edge[i].cap > 0) {
            int f = dfs(v, min(flow, edge[i].cap));
            edge[i].cap -= f;
            edge[i ^ 1].cap += f;
            res += f;
            flow -= f;
            if (flow == 0) break;
        }
    }
    if (res == 0) dep[u] = 0;
    return res;
}

int dinic() {
    int res = 0;
    while (bfs()) {
        memcpy(cur, head, sizeof(head));
        res += dfs(s, INF);
    }
    return res;
}

int main() {
    cin >> n >> m;
    int tot_plant = n * m;
    for (int i = 1; i <= tot_plant; i++) {
        int x, y;
        cin >> score[i] >> y;
        for (int j = 0; j < y; j++) {
            int r, c;
            cin >> r >> c;
            int v = r * m + c + 1; // è½¬åŒ–ä¸ºæ¤ç‰©ç¼–å·ï¼ˆä»1å¼€å§‹ï¼‰
            g[i].push_back(v); // åƒiå¿…é¡»åƒvï¼Œæ‰€ä»¥iâ†’v
            in[v]++;
        }
        // å³è¾¹çš„æ¤ç‰©æ˜¯å‰ç½®ï¼ˆåƒiåˆ—å¿…é¡»åƒi+1åˆ—ï¼‰
        if (i % m != 0) { // ä¸æ˜¯æœ€åä¸€åˆ—
            int v = i + 1;
            g[i].push_back(v);
            in[v]++;
        }
    }
    toposort(); // ç­›é€‰æœ‰æ•ˆç‚¹
    // æ„å»ºç½‘ç»œæµæ¨¡å‹
    s = cnt + 1;
    t = s + 1;
    int sum = 0;
    for (int i = 1; i <= tot_plant; i++) {
        if (!valid[i]) continue;
        int u = id[i];
        if (score[i] > 0) {
            add_edge(s, u, score[i]);
            sum += score[i];
        } else {
            add_edge(u, t, -score[i]);
        }
        // ä¾èµ–è¾¹ï¼ˆiâ†’vï¼Œè½¬åŒ–ä¸ºç½‘ç»œæµçš„uâ†’id[v]ï¼‰
        for (int v : g[i]) {
            if (valid[v]) {
                add_edge(u, id[v], INF);
            }
        }
    }
    int min_cut = dinic();
    cout << sum - min_cut << endl;
    return 0;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. **æ‹“æ‰‘æ’åº**ï¼šç­›é€‰å¯æ”»å‡»çš„æ¤ç‰©ï¼ˆ`valid`æ•°ç»„æ ‡è®°ï¼‰ï¼Œå¹¶åˆ†é…ç½‘ç»œæµç¼–å·ï¼ˆ`id`æ•°ç»„ï¼‰ã€‚  
2. **ç½‘ç»œæµå»ºæ¨¡**ï¼šæºç‚¹`S`è¿æ­£æƒç‚¹ï¼Œè´Ÿæƒç‚¹è¿æ±‡ç‚¹`T`ï¼Œä¾èµ–è¾¹è¿INFå®¹é‡ã€‚  
3. **Dinicç®—æ³•**ï¼šæ±‚æœ€å°å‰²ï¼Œè®¡ç®—æœ€å¤§ä»·å€¼ï¼ˆ`sum - min_cut`ï¼‰ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### ğŸ® åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šåƒµå°¸åƒæ¤ç‰©å¤§å†’é™©ã€‹ï¼ˆ8ä½åƒç´ é£ï¼‰

### ğŸ¨ è®¾è®¡æ€è·¯
é‡‡ç”¨FCçº¢ç™½æœºé£æ ¼ï¼Œç”¨åƒç´ å—è¡¨ç¤ºæ¤ç‰©ï¼ˆç»¿è‰²ï¼‰ã€åƒµå°¸ï¼ˆç°è‰²ï¼‰ã€æºç‚¹ï¼ˆé»„è‰²ï¼‰ã€æ±‡ç‚¹ï¼ˆçº¢è‰²ï¼‰ã€‚é€šè¿‡**æ­¥è¿›åŠ¨ç”»**å±•ç¤ºæ‹“æ‰‘æ’åºå’Œç½‘ç»œæµçš„è¿‡ç¨‹ï¼Œå¢å¼ºè¶£å‘³æ€§ã€‚  

### ğŸ•¹ï¸ åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   å±å¹•æ˜¾ç¤º`nÃ—m`çš„åƒç´ ç½‘æ ¼ï¼Œæ¤ç‰©ç”¨ç»¿è‰²å—è¡¨ç¤ºï¼Œå³è¾¹çš„æ¤ç‰©é—ªçƒï¼ˆåˆå§‹å…¥åº¦ä¸º0ï¼‰ã€‚æ§åˆ¶é¢æ¿æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ã€‚  
2. **æ‹“æ‰‘æ’åºè¿‡ç¨‹**ï¼š  
   - å…¥åº¦ä¸º0çš„æ¤ç‰©ï¼ˆæœ€å³è¾¹ï¼‰å˜ä¸ºè“è‰²ï¼ˆæ ‡è®°ä¸ºå¯æ”»å‡»ï¼‰ï¼Œåƒµå°¸ä»å³è¾¹è¿›å…¥ï¼Œåƒæ‰è¯¥æ¤ç‰©ï¼ˆå—å˜æš—ï¼‰ã€‚  
   - ä¾èµ–è¯¥æ¤ç‰©çš„ç‚¹å…¥åº¦å‡1ï¼Œè‹¥å…¥åº¦ä¸º0åˆ™å˜ä¸ºè“è‰²ï¼ŒåŠ å…¥é˜Ÿåˆ—ï¼ˆå±å¹•å³ä¾§æ˜¾ç¤ºåƒç´ é˜Ÿåˆ—ï¼‰ã€‚  
   - å¾ªç¯ä¾èµ–çš„æ¤ç‰©ï¼ˆå¦‚Aå’ŒBï¼‰å§‹ç»ˆä¿æŒç»¿è‰²ï¼ˆæœªè¢«è®¿é—®ï¼‰ï¼Œæœ€åå˜æš—ï¼ˆæ ‡è®°ä¸ºæ— æ•ˆï¼‰ã€‚  
3. **ç½‘ç»œæµå»ºæ¨¡**ï¼š  
   - æºç‚¹ï¼ˆé»„è‰²å—ï¼‰è¿æ­£æƒæ¤ç‰©ï¼ˆç»¿è‰²è¾¹ï¼‰ï¼Œè´Ÿæƒæ¤ç‰©è¿æ±‡ç‚¹ï¼ˆçº¢è‰²è¾¹ï¼‰ï¼Œä¾èµ–è¾¹ç”¨è“è‰²è¾¹ã€‚  
   - æœ€å°å‰²è¿‡ç¨‹ï¼šæ–­å¼€çš„è¾¹é—ªçƒï¼Œæ˜¾ç¤ºâ€œèˆå¼ƒæ­£æƒâ€ï¼ˆç»¿è‰²è¾¹æ–­å¼€ï¼‰æˆ–â€œæ‰¿æ‹…è´Ÿæƒâ€ï¼ˆçº¢è‰²è¾¹æ–­å¼€ï¼‰ã€‚  
4. **ç»“æœå±•ç¤º**ï¼š  
   æœ‰æ•ˆæ¤ç‰©çš„åˆ†æ•°æ€»å’Œå‡å»æœ€å°å‰²ï¼Œæ˜¾ç¤ºä¸ºâ€œæœ€å¤§ä»·å€¼â€ï¼Œä¼´éšèƒœåˆ©éŸ³æ•ˆï¼ˆ8ä½é£æ ¼ï¼‰ã€‚  

### ğŸµ éŸ³æ•ˆè®¾è®¡
- **æ‹“æ‰‘æ’åº**ï¼šåƒæ‰æ¤ç‰©æ—¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œå…¥åº¦å‡ä¸€æ—¶æ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆã€‚  
- **ç½‘ç»œæµ**ï¼šæ–­å¼€è¾¹æ—¶æ’­æ”¾â€œå’”â€çš„éŸ³æ•ˆï¼Œèƒœåˆ©æ—¶æ’­æ”¾â€œå•¦å•¦å•¦â€çš„éŸ³æ•ˆã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ” é€šç”¨æ€è·¯è¿ç§»
æœ€å¤§æƒé—­åˆå­å›¾æ¨¡å‹å¯ç”¨äºè§£å†³**å¸¦ä¾èµ–çš„é€‰æ‹©é—®é¢˜**ï¼Œä¾‹å¦‚ï¼š  
- é¡¹ç›®é€‰æ‹©é—®é¢˜ï¼ˆé€‰é¡¹ç›®Aå¿…é¡»é€‰é¡¹ç›®Bï¼Œé¡¹ç›®æœ‰æ”¶ç›Š/æˆæœ¬ï¼‰ï¼›  
- è¯¾ç¨‹é€‰ä¿®é—®é¢˜ï¼ˆé€‰é«˜çº§è¯¾ç¨‹å¿…é¡»é€‰å…ˆä¿®è¯¾ç¨‹ï¼Œè¯¾ç¨‹æœ‰å­¦åˆ†ï¼‰ï¼›  
- èµ„æºåˆ†é…é—®é¢˜ï¼ˆä½¿ç”¨èµ„æºAå¿…é¡»å…ˆè·å–èµ„æºBï¼Œèµ„æºæœ‰ä»·å€¼ï¼‰ã€‚  

### ğŸ“š æ´›è°·ç»ƒä¹ æ¨è
1. **æ´›è°· P3410 æ‹ç…§**ï¼š  
   - æ¨èç†ç”±ï¼šè€ƒå¯Ÿæœ€å¤§æƒé—­åˆå­å›¾çš„å»ºæ¨¡ï¼Œéœ€å¤„ç†â€œé€‰ç›¸æœºå¿…é¡»é€‰å¯¹åº”çš„èƒ¶å·â€çš„ä¾èµ–å…³ç³»ã€‚  
2. **æ´›è°· P2722 æ€»åˆ†**ï¼š  
   - æ¨èç†ç”±ï¼šå°†â€œé€‰é¢˜ç›®å¿…é¡»é€‰å¯¹åº”çš„å­é¢˜ç›®â€è½¬åŒ–ä¸ºé—­åˆå­å›¾ï¼Œéœ€å¤„ç†è´Ÿæƒæƒ…å†µã€‚  
3. **æ´›è°· P4174 æœ€å¤§è·åˆ©**ï¼š  
   - æ¨èç†ç”±ï¼šç»“åˆâ€œç”¨æˆ·è¿æ¥â€å’Œâ€œåŸºç«™å»ºè®¾â€çš„ä¾èµ–ï¼Œéœ€æ„å»ºå¤æ‚çš„é—­åˆå­å›¾æ¨¡å‹ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰
**å‚è€ƒç»éªŒï¼ˆæ¥è‡ªlonglongzhu123ï¼‰**ï¼š  
â€œæˆ‘åœ¨ç¬¬ä¸€æ¬¡åšè¿™é“é¢˜æ—¶ï¼Œæ²¡å¤„ç†å¾ªç¯ä¾èµ–ï¼Œå¯¼è‡´æ ·ä¾‹ä¸è¿‡ã€‚åæ¥æ„è¯†åˆ°ï¼Œç¯ä¸­çš„æ¤ç‰©æ— æ³•è¢«åƒï¼Œå¿…é¡»ç”¨æ‹“æ‰‘æ’åºå»æ‰ã€‚â€  
**ç‚¹è¯„**ï¼šå¾ªç¯ä¾èµ–æ˜¯æœ¬é¢˜çš„â€œéšå½¢é™·é˜±â€ï¼Œæ‹“æ‰‘æ’åºæ˜¯å¤„ç†æ­¤ç±»é—®é¢˜çš„å…³é”®ã€‚åœ¨ç¼–ç¨‹æ—¶ï¼Œéœ€å…ˆç­›é€‰æœ‰æ•ˆç‚¹ï¼Œå†æ„å»ºç½‘ç»œæµæ¨¡å‹ã€‚  


## ğŸ‰ æ€»ç»“
æœ¬æ¬¡åˆ†æäº†â€œæ¤ç‰©å¤§æˆ˜åƒµå°¸â€çš„æ ¸å¿ƒç®—æ³•â€”â€”**æœ€å¤§æƒé—­åˆå­å›¾**ï¼Œå¹¶é€šè¿‡æ‹“æ‰‘æ’åºå¤„ç†å¾ªç¯ä¾èµ–ã€‚å…³é”®æ­¥éª¤æ˜¯ï¼š  
1. å»ºç«‹ä¾èµ–å…³ç³»ï¼ˆè¾¹æ–¹å‘æ­£ç¡®ï¼‰ï¼›  
2. æ‹“æ‰‘æ’åºç­›é€‰æœ‰æ•ˆç‚¹ï¼›  
3. æ„å»ºç½‘ç»œæµæ¨¡å‹æ±‚æœ€å°å‰²ã€‚  

å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£ç½‘ç»œæµåœ¨è§£å†³ä¾èµ–é—®é¢˜ä¸­çš„åº”ç”¨ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶èƒ½ä¸¾ä¸€åä¸‰ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š179.01ç§’
# é¢˜ç›®ä¿¡æ¯

# [USACO10OPEN] Triangle Counting G

## é¢˜ç›®æè¿°

Bessie is standing guard duty after

the big bad wolf was spotted stalking

```cpp
cows over at Farmer Don's spread. 
Looking down from her guard tower in 
utter boredom, she's decided to 
perform intellectual exercises in 
```
order to keep awake.
After imagining the field as an X,Y

grid, she recorded the coordinates of

the N (1 <= N <= 100,000) 

conveniently numbered 1..N cows as

```cpp
X_i,Y_i (-100,000 <= X_i <= 100,000; 
-100,000 <= Y_i <= 100,000; 1 <= i <= 
N). She then mentally formed all possible triangles that could be made from subsets of the entire set of cow coordinates. She counts a triangle as 'golden' if it wholly contains the origin (0,0). The origin does not fall on the line between any pair of cows. Additionally, no cow is standing exactly on the origin. 
Given the list of cow locations, calculate the number of 'golden' triangles that contain the origin so Bessie will know if she's doing a good job. 
```
By way of example, consider 5 cows at these locations:
-5,0   0,2   11,2   -11,-6   11,-5

Below is a schematic layout of the field from Betsy's point of view:

```cpp
............|............ 
............*..........*. 
............|............ 
-------*----+------------ 
............|............ 
............|............ 
............|............ 
............|............ 
............|..........*. 
.*..........|............ 
............|............ 
```
All ten triangles below can be formed from the five points above:

By inspection, 5 of them contain the origin and hence are 'golden'.

åœ¨ä¸€åªå¤§ç°ç‹¼å·å·æ½œå…¥Farmer Donçš„ç‰›ç¾¤è¢«ç¾¤ç‰›å‘ç°åï¼Œè´è¥¿ç°åœ¨ä¸å¾—ä¸å±¥è¡Œç€å¥¹ç«™å²—çš„èŒè´£ã€‚ä»å¥¹çš„å®ˆå«å¡”å‘ä¸‹ç­æœ›ç®€ç›´å°±æ˜¯ä¸€ä»¶çƒ¦é€äº†çš„äº‹æƒ…ã€‚å¥¹å†³å®šåšä¸€äº›å¼€å‘æ™ºåŠ›çš„å°ç»ƒä¹ ï¼Œé˜²æ­¢å¥¹ç¡ç€äº†ã€‚



æƒ³è±¡ç‰§åœºæ˜¯ä¸€ä¸ªXï¼ŒYå¹³é¢çš„ç½‘æ ¼ã€‚å¥¹å°†Nåªå¥¶ç‰›æ ‡è®°ä¸º1â€¦N (1 <= N <= 100,000)ï¼Œæ¯åªå¥¶ç‰›çš„åæ ‡ä¸ºX\_i,Y\_i (-100,000 <= X\_i <= 100,000;-100,000 <= Y\_i <= 100,000; 1 <= i <=N)ã€‚ç„¶åå¥¹è„‘æµ·é‡Œæƒ³è±¡ç€æ‰€æœ‰å¯èƒ½ç”±å¥¶ç‰›æ„æˆçš„ä¸‰è§’å½¢ã€‚å¦‚æœä¸€ä¸ªä¸‰è§’å½¢å®Œå…¨åŒ…å«äº†åŸç‚¹(0,0)ï¼Œé‚£ä¹ˆå¥¹ç§°è¿™ä¸ªä¸‰è§’å½¢ä¸ºâ€œé»„é‡‘ä¸‰è§’å½¢â€ã€‚åŸç‚¹ä¸ä¼šè½åœ¨ä»»ä½•ä¸€å¯¹å¥¶ç‰›çš„è¿çº¿ä¸Šã€‚å¦å¤–ï¼Œä¸ä¼šæœ‰å¥¶ç‰›åœ¨åŸç‚¹ã€‚

ç»™å‡ºå¥¶ç‰›çš„åæ ‡ï¼Œè®¡ç®—å‡ºæœ‰å¤šå°‘ä¸ªâ€œé»„é‡‘ä¸‰è§’å½¢â€ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
5 
-5 0 
0 2 
11 2 
-11 -6 
11 -5 
```

### è¾“å‡º

```
5 
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO10OPEN] Triangle Counting G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè®¡ç®—å‡ ä½•ï¼ˆæè§’æ’åºï¼‰+ å®¹æ–¥åŸç†  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œé»„é‡‘ä¸‰è§’å½¢è®¡æ•°â€é—®é¢˜ï¼ˆç»Ÿè®¡åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°é‡ï¼‰ï¼Œç›´æ¥è®¡ç®—**åŒ…å«åŸç‚¹**çš„ä¸‰è§’å½¢éš¾åº¦è¾ƒå¤§ã€‚æˆ‘ä»¬å¯ä»¥ç”¨**å®¹æ–¥åŸç†**ç®€åŒ–é—®é¢˜â€”â€”**æ€»ä¸‰è§’å½¢æ•° - ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•° = é»„é‡‘ä¸‰è§’å½¢æ•°**ã€‚  

ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æœ‰ä¸ªæ˜ç¡®çš„å‡ ä½•ç‰¹å¾ï¼š**ä¸‰ä¸ªç‚¹éƒ½åœ¨æŸæ¡è¿‡åŸç‚¹çš„ç›´çº¿çš„åŒä¸€ä¾§**ï¼ˆæ¯”å¦‚å·¦è¾¹æˆ–å³è¾¹ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡æ¯ä¸ªç‚¹å¯¹åº”çš„â€œåŠå¹³é¢â€å†…çš„ç‚¹ï¼Œè®¡ç®—è¿™äº›ç‚¹ä¸­é€‰ä¸¤ä¸ªçš„ç»„åˆæ•°ï¼ˆå³ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°ï¼‰ï¼Œå†ç”¨æ€»æ•°å‡å»è¿™ä¸ªå’Œã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. **æè§’æ’åº**ï¼šå°†æ‰€æœ‰ç‚¹æŒ‰æè§’ï¼ˆä¸åŸç‚¹è¿çº¿çš„è§’åº¦ï¼‰é¡ºæ—¶é’ˆæ’åºï¼ˆåƒå°æœ‹å‹æŒ‰é¡ºåºå›´æˆä¸€ä¸ªåœˆï¼‰ã€‚  
2. **ç»Ÿè®¡åŠå¹³é¢ç‚¹æ•°**ï¼šç”¨**åŒæŒ‡é’ˆ**å¿«é€Ÿæ‰¾åˆ°æ¯ä¸ªç‚¹å¯¹åº”çš„åŠå¹³é¢å†…çš„ç‚¹ï¼ˆæè§’åœ¨è¯¥ç‚¹æè§’åˆ°è¯¥ç‚¹æè§’+Ï€ä¹‹é—´çš„ç‚¹ï¼‰ã€‚  
3. **å®¹æ–¥è®¡ç®—**ï¼šæ€»ä¸‰è§’å½¢æ•°ï¼ˆ\(C(n,3)\)ï¼‰å‡å»ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°ï¼Œå¾—åˆ°ç­”æ¡ˆã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºæè§’æ’åºå’ŒåŒæŒ‡é’ˆç»Ÿè®¡è¿‡ç¨‹ï¼š  
- åƒç´ ç‚¹è¡¨ç¤ºå¥¶ç‰›ä½ç½®ï¼Œæè§’æ’åºåæ’åˆ—æˆç¯ï¼›  
- åŒæŒ‡é’ˆç§»åŠ¨æ—¶ï¼Œé«˜äº®å½“å‰å¤„ç†çš„ç‚¹ï¼ˆçº¢è‰²ï¼‰å’Œç»Ÿè®¡åŒºé—´ï¼ˆè“è‰²ï¼‰ï¼›  
- æ¯ç»Ÿè®¡ä¸€ä¸ªç‚¹ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œå®Œæˆåæ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆâ€œå®å®å’šâ€ï¼‰ï¼›  
- æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼Œè®©å­¦ä¹ è€…æ§åˆ¶åŠ¨ç”»é€Ÿåº¦ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šæ¥æºï¼šxtx1092515503ï¼ˆèµï¼š9ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**two-pointersï¼ˆåŒæŒ‡é’ˆï¼‰**å’Œ**å‰ç¼€å’Œ**ä¼˜åŒ–äº†ä¸‰é‡å¾ªç¯ï¼Œæ€è·¯æ¸…æ™°ä¸”é«˜æ•ˆã€‚ä½œè€…é¦–å…ˆå°†ç‚¹æŒ‰æè§’æ’åºï¼Œç„¶åç”¨åŒæŒ‡é’ˆæ‰¾åˆ°æ¯ä¸ªç‚¹\(i\)å¯¹åº”çš„â€œæœ€è¿œç‚¹â€\(far[i]\)ï¼ˆç¬¬ä¸€ä¸ªä¸\(i\)å¤¹è§’â‰¥180Â°çš„ç‚¹ï¼‰ã€‚é€šè¿‡å‰ç¼€å’Œè®¡ç®—\(far[j]\)çš„åŒºé—´å’Œï¼Œå¿«é€Ÿæ±‚å‡ºä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°ã€‚ä»£ç ä¸­çš„\(far\)æ•°ç»„å’Œ\(sum\)æ•°ç»„è®¾è®¡å·§å¦™ï¼Œå°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°\(O(n\log n)\)ï¼ˆç“¶é¢ˆåœ¨æ’åºï¼‰ã€‚å˜é‡å‘½åï¼ˆå¦‚\(far\)ã€\(sum\)ï¼‰å«ä¹‰æ˜ç¡®ï¼Œä»£ç ç»“æ„å·¥æ•´ï¼Œå®¹æ˜“ç†è§£ã€‚  

### é¢˜è§£äºŒï¼šæ¥æºï¼šyzhangï¼ˆèµï¼š3ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç›´æ¥åº”ç”¨**å®¹æ–¥åŸç†**ï¼Œé€»è¾‘ç®€æ´ã€‚ä½œè€…å°†ç‚¹æŒ‰æè§’æ’åºåï¼Œå¤åˆ¶ä¸€ä»½åˆ°æ•°ç»„æœ«å°¾ï¼ˆå½¢æˆå¾ªç¯æ•°ç»„ï¼‰ï¼Œç”¨åŒæŒ‡é’ˆæ‰¾åˆ°æ¯ä¸ªç‚¹\(i\)å¯¹åº”çš„åŠå¹³é¢å†…çš„ç‚¹ï¼ˆæè§’åœ¨\(i\)çš„æè§’åˆ°\(i\)çš„æè§’+Ï€ä¹‹é—´ï¼‰ã€‚ç»Ÿè®¡è¿™äº›ç‚¹çš„ç»„åˆæ•°ï¼Œä»æ€»æ•°ä¸­å‡å»ã€‚å¾ªç¯æ•°ç»„è§£å†³äº†æè§’æ’åºåçš„è¾¹ç•Œé—®é¢˜ï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªç‚¹çš„åŠå¹³é¢å¯èƒ½åŒ…å«æœ€åå‡ ä¸ªç‚¹ï¼‰ï¼Œç‰¹åˆ¤\(n<3\)çš„æƒ…å†µéå¸¸ä¸¥è°¨ã€‚ä»£ç é£æ ¼ç®€æ´ï¼Œå˜é‡å‘½åï¼ˆå¦‚\(l\)ã€\(r\)ï¼‰ç¬¦åˆå¸¸è§„ï¼Œå®¹æ˜“è·Ÿéšã€‚  

### é¢˜è§£ä¸‰ï¼šæ¥æºï¼šGraphcityï¼ˆèµï¼š2ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**åˆ†æ²»æ€æƒ³**ç®€åŒ–äº†é—®é¢˜ï¼Œå°†ç‚¹åˆ†æˆä¸ŠåŠå¹³é¢ï¼ˆ\(yâ‰¥0\)ï¼‰å’Œä¸‹åŠå¹³é¢ï¼ˆ\(y<0\)ï¼‰ï¼Œåˆ†åˆ«ç»Ÿè®¡â€œä¸¤ä¸Šä¸€ä¸‹â€å’Œâ€œä¸€ä¸Šä¸¤ä¸‹â€çš„æƒ…å†µã€‚å¯¹äºæ¯ä¸ªä¸‹åŠå¹³é¢çš„ç‚¹ï¼Œç”¨**äºŒåˆ†æŸ¥æ‰¾**å¿«é€Ÿæ‰¾åˆ°ä¸ŠåŠå¹³é¢ä¸­å¯¹åº”çš„æè§’åŒºé—´ã€‚è¿™ç§æ–¹æ³•é¿å…äº†å¾ªç¯æ•°ç»„çš„å¤„ç†ï¼Œæ€è·¯æ–°é¢–ã€‚ä»£ç ä¸­çš„ç»“æ„ä½“å’Œæ’åºå‡½æ•°è®¾è®¡åˆç†ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„åº”ç”¨å‡†ç¡®ï¼Œå˜é‡å‘½åï¼ˆå¦‚\(s[0]\)ã€\(s[1]\)ï¼‰æ¸…æ™°æ˜“æ‡‚ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å…³é”®ç‚¹1ï¼šå®¹æ–¥æ€è·¯çš„è½¬åŒ–  
* **åˆ†æ**ï¼š  
  ç›´æ¥è®¡ç®—â€œåŒ…å«åŸç‚¹â€çš„ä¸‰è§’å½¢éœ€è¦è€ƒè™‘ä¸‰ä¸ªç‚¹çš„ç›¸å¯¹ä½ç½®ï¼Œéš¾åº¦å¤§ã€‚å®¹æ–¥åŸç†å°†é—®é¢˜è½¬åŒ–ä¸ºâ€œæ€»æ•°å‡å»ä¸åŒ…å«çš„æƒ…å†µâ€ï¼Œè€Œä¸åŒ…å«çš„æƒ…å†µæœ‰æ˜ç¡®çš„å‡ ä½•ç‰¹å¾ï¼ˆä¸‰ä¸ªç‚¹åœ¨åŒä¸€åŠå¹³é¢ï¼‰ï¼Œæ›´å®¹æ˜“ç»Ÿè®¡ã€‚æ‰€æœ‰ä¼˜è´¨é¢˜è§£éƒ½é‡‡ç”¨äº†è¿™ç§æ€è·¯ï¼ˆå¦‚yzhangçš„é¢˜è§£ç›´æ¥è®¡ç®—æ€»æ•°å‡å»ä¸åŒ…å«çš„ç»„åˆæ•°ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡åˆ°â€œåŒ…å«â€ç±»é—®é¢˜æ—¶ï¼Œä¸å¦¨æƒ³æƒ³â€œæ€»æ•°å‡å»ä¸åŒ…å«â€çš„å®¹æ–¥æ€è·¯ï¼Œå¯èƒ½ä¼šç®€åŒ–é—®é¢˜ã€‚  

### 2. å…³é”®ç‚¹2ï¼šæè§’æ’åºçš„å¤„ç†  
* **åˆ†æ**ï¼š  
  æè§’æ’åºæ˜¯ç»Ÿè®¡åŠå¹³é¢å†…ç‚¹æ•°çš„åŸºç¡€ã€‚æ’åºåï¼Œæ¯ä¸ªç‚¹çš„åŠå¹³é¢å†…çš„ç‚¹å½¢æˆ**è¿ç»­åŒºé—´**ï¼Œæ–¹ä¾¿ç”¨åŒæŒ‡é’ˆæˆ–äºŒåˆ†æŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼Œxtx1092515503çš„é¢˜è§£å°†ç‚¹æŒ‰æè§’æ’åºï¼Œç”¨åŒæŒ‡é’ˆæ‰¾\(far[i]\)ï¼›yzhangçš„é¢˜è§£å¤åˆ¶æ•°ç»„å½¢æˆå¾ªç¯ï¼Œè§£å†³è¾¹ç•Œé—®é¢˜ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæè§’æ’åºæ—¶ï¼Œç”¨\(atan2(y, x)\)è®¡ç®—æè§’ï¼ˆèŒƒå›´\([-Ï€, Ï€]\)ï¼‰ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶æ•°ç»„å½¢æˆå¾ªç¯æ¥é¿å…é—æ¼è¾¹ç•Œæƒ…å†µã€‚  

### 3. å…³é”®ç‚¹3ï¼šé«˜æ•ˆç»Ÿè®¡åŠå¹³é¢å†…çš„ç‚¹æ•°  
* **åˆ†æ**ï¼š  
  ç»Ÿè®¡æ¯ä¸ªç‚¹çš„åŠå¹³é¢å†…çš„ç‚¹æ•°æ—¶ï¼Œ**åŒæŒ‡é’ˆ**æ˜¯é«˜æ•ˆçš„æ–¹æ³•ï¼ˆ\(O(n)\)æ—¶é—´ï¼‰ã€‚ä¾‹å¦‚ï¼Œyzhangçš„é¢˜è§£ä¸­ï¼Œ\(r\)æŒ‡é’ˆä»\(i+1\)å¼€å§‹ï¼Œä¸€ç›´ç§»åŠ¨åˆ°æè§’è¶…è¿‡\(i\)çš„æè§’+Ï€ä¸ºæ­¢ï¼Œç»Ÿè®¡ä¸­é—´çš„ç‚¹æ•°ã€‚è¿™ç§æ–¹æ³•æ¯”æš´åŠ›æšä¸¾ï¼ˆ\(O(nÂ²)\)ï¼‰é«˜æ•ˆå¾—å¤šã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¯¹äºæ’åºåçš„æ•°ç»„ï¼Œç»Ÿè®¡è¿ç»­åŒºé—´çš„é—®é¢˜ï¼ŒåŒæŒ‡é’ˆæ˜¯å¸¸ç”¨çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå¯ä»¥å°†æ—¶é—´å¤æ‚åº¦ä»\(O(nÂ²)\)é™åˆ°\(O(n)\)ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§Aï¼šå®¹æ–¥åŸç†**ï¼šå¤„ç†â€œåŒ…å«â€ç±»é—®é¢˜æ—¶ï¼Œç”¨æ€»æ•°å‡å»ä¸åŒ…å«çš„æƒ…å†µï¼Œç®€åŒ–è®¡ç®—ã€‚  
- **æŠ€å·§Bï¼šæè§’æ’åº**ï¼šå°†ç‚¹æŒ‰æè§’æ’åºï¼Œå°†å‡ ä½•é—®é¢˜è½¬åŒ–ä¸ºåŒºé—´é—®é¢˜ï¼Œæ–¹ä¾¿ç»Ÿè®¡ã€‚  
- **æŠ€å·§Cï¼šåŒæŒ‡é’ˆä¼˜åŒ–**ï¼šå¯¹äºæ’åºåçš„æ•°ç»„ï¼Œç”¨åŒæŒ‡é’ˆå¿«é€Ÿç»Ÿè®¡è¿ç»­åŒºé—´çš„ç‚¹æ•°ï¼Œæé«˜æ•ˆç‡ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†yzhangå’Œcreation_hyçš„é¢˜è§£æ€è·¯ï¼Œé‡‡ç”¨å®¹æ–¥åŸç†å’Œå¾ªç¯æ•°ç»„å¤„ç†æè§’æ’åºåçš„è¾¹ç•Œé—®é¢˜ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  #include <cmath>
  using namespace std;
  typedef long long ll;
  const double pi = acos(-1);
  
  struct Point {
      int x, y;
      double ang;
      Point(int x=0, int y=0) : x(x), y(y) {
          ang = atan2(y, x);
      }
      bool operator<(const Point& other) const {
          return ang < other.ang;
      }
  };
  
  int main() {
      int n;
      cin >> n;
      if (n < 3) {
          cout << 0 << endl;
          return 0;
      }
      vector<Point> a(n);
      for (int i = 0; i < n; i++) {
          cin >> a[i].x >> a[i].y;
      }
      sort(a.begin(), a.end());
      // å¤åˆ¶æ•°ç»„å½¢æˆå¾ªç¯ï¼Œå¤„ç†è¾¹ç•Œé—®é¢˜
      vector<Point> b(2*n);
      for (int i = 0; i < 2*n; i++) {
          b[i] = a[i%n];
          b[i].ang = a[i%n].ang + (i >= n ? 2*pi : 0);
      }
      ll total = (ll)n*(n-1)*(n-2)/6; // æ€»ä¸‰è§’å½¢æ•°
      ll bad = 0; // ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°
      int r = 0;
      for (int i = 0; i < n; i++) {
          // æ‰¾åˆ°ç¬¬ä¸€ä¸ªang > a[i].ang + piçš„ç‚¹
          while (r < 2*n && b[r].ang <= a[i].ang + pi) {
              r++;
          }
          int cnt = r - i - 1; // åŠå¹³é¢å†…çš„ç‚¹æ•°ï¼ˆi+1åˆ°r-1ï¼‰
          bad += (ll)cnt*(cnt-1)/2; // ç»„åˆæ•°C(cnt, 2)
      }
      cout << total - bad << endl; // é»„é‡‘ä¸‰è§’å½¢æ•° = æ€» - ä¸åŒ…å«
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¯»å–è¾“å…¥ï¼Œç‰¹åˆ¤\(n<3\)çš„æƒ…å†µï¼ˆç›´æ¥è¾“å‡º0ï¼‰ã€‚  
  2. å°†ç‚¹æŒ‰æè§’æ’åºï¼Œå¤åˆ¶ä¸€ä»½åˆ°æ•°ç»„æœ«å°¾å½¢æˆå¾ªç¯ï¼ˆå¤„ç†è¾¹ç•Œé—®é¢˜ï¼‰ã€‚  
  3. è®¡ç®—æ€»ä¸‰è§’å½¢æ•°ï¼ˆ\(C(n,3)\)ï¼‰ã€‚  
  4. ç”¨åŒæŒ‡é’ˆç»Ÿè®¡æ¯ä¸ªç‚¹å¯¹åº”çš„åŠå¹³é¢å†…çš„ç‚¹æ•°ï¼Œè®¡ç®—ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°ï¼ˆ\(bad\)ï¼‰ã€‚  
  5. è¾“å‡ºé»„é‡‘ä¸‰è§’å½¢æ•°ï¼ˆ\(total - bad\)ï¼‰ã€‚  

### é¢˜è§£ä¸€ï¼šæ¥æºï¼šxtx1092515503  
* **äº®ç‚¹**ï¼šç”¨two-pointersæ‰¾\(far[i]\)ï¼Œå‰ç¼€å’Œè®¡ç®—åŒºé—´å’Œï¼Œä¼˜åŒ–ä¸‰é‡å¾ªç¯ä¸ºçº¿æ€§æ—¶é—´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  int far[100100];
  ll sum[100100];
  // è®¡ç®—far[i]ï¼šç¬¬ä¸€ä¸ªä¸iå¤¹è§’â‰¥180Â°çš„ç‚¹
  for(int i=1;i<=n;i++){
      far[i] = max(far[i-1], i);
      while(far[i] <= n && (p[far[i]].ang - p[i].ang) < pi) {
          far[i]++;
      }
  }
  // å‰ç¼€å’Œï¼šsum[i] = far[1] + far[2] + ... + far[i]
  for(int i=1;i<=n;i++){
      sum[i] = sum[i-1] + far[i];
  }
  // è®¡ç®—ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°
  ll res = 0;
  for(int i=1;i<=n;i++){
      res += (sum[far[i]-1] - sum[i]) - (ll)(far[i] - i - 1) * far[i];
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - \(far[i]\)ï¼šç”¨åŒæŒ‡é’ˆä»\(far[i-1]\)å¼€å§‹ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸\(i\)å¤¹è§’â‰¥180Â°çš„ç‚¹ã€‚  
  - \(sum\)æ•°ç»„ï¼šå‰ç¼€å’Œï¼Œå¿«é€Ÿè®¡ç®—\(far[j]\)çš„åŒºé—´å’Œï¼ˆ\(j\)ä»\(i+1\)åˆ°\(far[i]-1\)ï¼‰ã€‚  
  - \(res\)ï¼šä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°ï¼Œé€šè¿‡å‰ç¼€å’Œå’Œå…¬å¼è®¡ç®—ï¼Œé¿å…ä¸‰é‡å¾ªç¯ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼štwo-pointersæ˜¯å¤„ç†æ’åºåæ•°ç»„çš„é«˜æ•ˆæ–¹æ³•ï¼Œå‰ç¼€å’Œå¯ä»¥å¿«é€Ÿè®¡ç®—åŒºé—´å’Œï¼Œé¿å…é‡å¤è®¡ç®—ã€‚  

### é¢˜è§£äºŒï¼šæ¥æºï¼šyzhang  
* **äº®ç‚¹**ï¼šå¾ªç¯æ•°ç»„å¤„ç†æè§’æ’åºåçš„è¾¹ç•Œé—®é¢˜ï¼ŒåŒæŒ‡é’ˆç»Ÿè®¡åŠå¹³é¢å†…çš„ç‚¹æ•°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  // å¤åˆ¶æ•°ç»„å½¢æˆå¾ªç¯
  for(register int i = n+1; i <= n<<1; ++i) {
      p[i] = p[i-n];
      p[i].k += 2*Pi; // æè§’åŠ 2Ï€ï¼Œå¤„ç†å¾ªç¯
  }
  // åŒæŒ‡é’ˆç»Ÿè®¡
  int l = 0, r = 0;
  for(register int i = 1; i <= n; ++i) {
      l = i+1;
      while(p[r+1].k + eps < p[i].k + Pi) {
          ++r;
      }
      ans -= (ll)(r - l + 1) * (r - l) / 2; // å‡å»ä¸åŒ…å«çš„ç»„åˆæ•°
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - å¾ªç¯æ•°ç»„ï¼šå°†ç‚¹å¤åˆ¶ä¸€ä»½åˆ°æ•°ç»„æœ«å°¾ï¼Œæè§’åŠ 2Ï€ï¼Œè§£å†³æè§’æ’åºåçš„è¾¹ç•Œé—®é¢˜ï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªç‚¹çš„åŠå¹³é¢åŒ…å«æœ€åå‡ ä¸ªç‚¹ï¼‰ã€‚  
  - åŒæŒ‡é’ˆï¼š\(r\)æŒ‡é’ˆä»\(i+1\)å¼€å§‹ï¼Œç§»åŠ¨åˆ°æè§’è¶…è¿‡\(i\)çš„æè§’+Ï€ä¸ºæ­¢ï¼Œç»Ÿè®¡ä¸­é—´çš„ç‚¹æ•°ï¼ˆ\(r-l+1\)ï¼‰ï¼Œè®¡ç®—ç»„åˆæ•°ï¼ˆ\(C(cnt, 2)\)ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¾ªç¯æ•°ç»„æ˜¯å¤„ç†ç¯çŠ¶é—®é¢˜çš„å¸¸ç”¨æ–¹æ³•ï¼Œæ¯”å¦‚æè§’æ’åºåçš„è¾¹ç•Œé—®é¢˜ã€‚  

### é¢˜è§£ä¸‰ï¼šæ¥æºï¼šGraphcity  
* **äº®ç‚¹**ï¼šå°†ç‚¹åˆ†æˆä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ç»Ÿè®¡â€œä¸¤ä¸Šä¸€ä¸‹â€å’Œâ€œä¸€ä¸Šä¸¤ä¸‹â€çš„æƒ…å†µï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿæ‰¾åˆ°åŒºé—´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  // ç»Ÿè®¡â€œä¸¤ä¸Šä¸€ä¸‹â€çš„æƒ…å†µï¼ˆä¸ŠåŠå¹³é¢v[0]ï¼Œä¸‹åŠå¹³é¢v[1]ï¼‰
  for(int i = 1; i <= s[0]; ++i) {
      Point p = v[0][i];
      double ang = p.ang - pi; // ä¸‹åŠå¹³é¢å¯¹åº”çš„å°„çº¿æè§’
      // æ‰¾åˆ°v[1]ä¸­ç¬¬ä¸€ä¸ªæè§’å¤§äºangçš„ç‚¹
      int pos = lower_bound(v[1]+1, v[1]+s[1]+1, Point(0,0,ang)) - v[1];
      // è´¡çŒ®ï¼š(pos-1) * (s[1]-pos+1)ï¼ˆä¸¤ä¸Šä¸€ä¸‹çš„ç»„åˆæ•°ï¼‰
      ans += (ll)(pos-1) * (s[1] - pos + 1);
  }
  // ç»Ÿè®¡â€œä¸€ä¸Šä¸¤ä¸‹â€çš„æƒ…å†µï¼ˆç±»ä¼¼ï¼‰
  for(int i = 1; i <= s[1]; ++i) {
      Point p = v[1][i];
      double ang = p.ang + pi; // ä¸ŠåŠå¹³é¢å¯¹åº”çš„å°„çº¿æè§’
      int pos = lower_bound(v[0]+1, v[0]+s[0]+1, Point(0,0,ang)) - v[0];
      ans += (ll)(pos-1) * (s[0] - pos + 1);
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - åˆ†æ²»ï¼šå°†ç‚¹åˆ†æˆä¸ŠåŠå¹³é¢ï¼ˆ\(yâ‰¥0\)ï¼‰å’Œä¸‹åŠå¹³é¢ï¼ˆ\(y<0\)ï¼‰ï¼Œåˆ†åˆ«ç»Ÿè®¡ä¸¤ç§æƒ…å†µã€‚  
  - äºŒåˆ†æŸ¥æ‰¾ï¼šå¯¹äºæ¯ä¸ªç‚¹ï¼Œè®¡ç®—å…¶å¯¹åº”çš„å°„çº¿æè§’ï¼Œç”¨\(lower_bound\)æ‰¾åˆ°åŒºé—´çš„è¾¹ç•Œï¼Œè®¡ç®—ç»„åˆæ•°ï¼ˆä¸¤ä¸Šä¸€ä¸‹æˆ–ä¸€ä¸Šä¸¤ä¸‹çš„æ•°é‡ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æ²»æ˜¯ç®€åŒ–é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ï¼Œå°†é—®é¢˜åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«å¤„ç†ï¼Œå†åˆå¹¶ç»“æœã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**åƒç´ æ¢é™©å®¶ä¹‹â€œé»„é‡‘ä¸‰è§’å½¢å¯»æ‰¾è®°â€**ï¼ˆ8ä½åƒç´ é£æ ¼ï¼Œç±»ä¼¼FCæ¸¸æˆã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹ï¼‰  

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
å±•ç¤º**æè§’æ’åº**ã€**åŒæŒ‡é’ˆç»Ÿè®¡åŠå¹³é¢å†…ç‚¹æ•°**çš„è¿‡ç¨‹ï¼Œä»¥åŠ**å®¹æ–¥åŸç†**çš„åº”ç”¨ã€‚  

### è®¾è®¡æ€è·¯ç®€è¿°  
é‡‡ç”¨8ä½åƒç´ é£æ ¼ï¼Œè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œè®©å­¦ä¹ è€…åœ¨â€œç©â€ä¸­ç†è§£ç®—æ³•ï¼š  
- ç”¨**åƒç´ ç‚¹**è¡¨ç¤ºå¥¶ç‰›ä½ç½®ï¼ˆçº¢è‰²ï¼‰ï¼ŒåŸç‚¹ç”¨é»„è‰²åƒç´ ç‚¹æ ‡è®°ï¼›  
- æè§’æ’åºåï¼Œå¥¶ç‰›æ’åˆ—æˆä¸€ä¸ª**ç¯**ï¼ˆåƒå°æœ‹å‹å›´æˆä¸€ä¸ªåœˆï¼‰ï¼›  
- åŒæŒ‡é’ˆç§»åŠ¨æ—¶ï¼Œ**é«˜äº®å½“å‰å¤„ç†çš„ç‚¹**ï¼ˆçº¢è‰²ï¼‰å’Œ**ç»Ÿè®¡åŒºé—´**ï¼ˆè“è‰²ï¼‰ï¼›  
- æ¯ç»Ÿè®¡ä¸€ä¸ªç‚¹ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œå®Œæˆåæ’­æ”¾**èƒœåˆ©éŸ³æ•ˆ**ï¼ˆâ€œå®å®å’šâ€ï¼‰ï¼›  
- æ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€ï¼Œè®©å­¦ä¹ è€…æ§åˆ¶åŠ¨ç”»é€Ÿåº¦ã€‚  

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤º8ä½åƒç´ é£æ ¼çš„åæ ‡ç³»ï¼ˆé»‘ç™½ç½‘æ ¼ï¼‰ï¼ŒåŸç‚¹ï¼ˆ0,0ï¼‰ç”¨é»„è‰²åƒç´ ç‚¹æ ‡è®°ï¼›  
   - å¥¶ç‰›ç”¨çº¢è‰²åƒç´ ç‚¹æ ‡è®°ï¼Œåˆå§‹ä½ç½®éšæœºåˆ†å¸ƒï¼›  
   - å±å¹•ä¸‹æ–¹æœ‰**æ§åˆ¶é¢æ¿**ï¼šâ€œå¼€å§‹/æš‚åœâ€ã€â€œå•æ­¥â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠé€Ÿåº¦æ»‘å—ï¼ˆ1~5æ¡£ï¼‰ï¼›  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»æ¾èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„â€œOverworld Themeâ€ï¼‰ã€‚  

2. **æè§’æ’åº**ï¼š  
   - å¥¶ç‰›æŒ‰æè§’é¡ºæ—¶é’ˆæ’åºï¼Œä»åˆå§‹ä½ç½®**æ»‘åŠ¨**åˆ°æ’åºåçš„ä½ç½®ï¼ˆåƒå°æœ‹å‹æ’é˜Ÿï¼‰ï¼›  
   - æ¯ç§»åŠ¨ä¸€ä¸ªå¥¶ç‰›ï¼Œæ’­æ”¾â€œæ»‘åŠ¨â€éŸ³æ•ˆï¼ˆâ€œæ²™æ²™â€å£°ï¼‰ï¼›  
   - æ’åºå®Œæˆåï¼Œå¥¶ç‰›æ’åˆ—æˆä¸€ä¸ªç¯ï¼Œæ˜¾ç¤ºâ€œæ’åºå®Œæˆï¼â€çš„åƒç´ æ–‡å­—ã€‚  

3. **åŒæŒ‡é’ˆç»Ÿè®¡**ï¼š  
   - å½“å‰å¤„ç†çš„ç‚¹ç”¨**çº¢è‰²é«˜äº®**ï¼ˆæ¯”å…¶ä»–ç‚¹å¤§ä¸€åœˆï¼‰ï¼›  
   - \(r\)æŒ‡é’ˆä»å½“å‰ç‚¹çš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹**ç§»åŠ¨**ï¼ˆè“è‰²ç®­å¤´æŒ‡ç¤ºï¼‰ï¼Œç›´åˆ°æè§’è¶…è¿‡å½“å‰ç‚¹çš„æè§’+Ï€ï¼›  
   - ç»Ÿè®¡çš„åŒºé—´ç”¨**è“è‰²é«˜äº®**ï¼ˆåŒºé—´å†…çš„ç‚¹å˜æˆè“è‰²ï¼‰ï¼Œæ˜¾ç¤ºâ€œå½“å‰åŒºé—´æœ‰\(cnt\)ä¸ªç‚¹â€ï¼›  
   - æ¯ç§»åŠ¨ä¸€æ¬¡\(r\)æŒ‡é’ˆï¼Œæ’­æ”¾â€œæ»´ç­”â€éŸ³æ•ˆï¼ˆâ€œå’”å—’â€å£°ï¼‰ã€‚  

4. **ç»„åˆæ•°è®¡ç®—**ï¼š  
   - ç»Ÿè®¡å®Œä¸€ä¸ªç‚¹çš„æƒ…å†µåï¼Œæ˜¾ç¤ºâ€œä¸åŒ…å«çš„ä¸‰è§’å½¢æ•°å¢åŠ äº†\(C(cnt,2)\)â€ï¼ˆå¦‚â€œå¢åŠ äº†3â€ï¼‰ï¼›  
   - æ›´æ–°æ€»ä¸åŒ…å«æ•°ï¼ˆ\(bad\)ï¼‰ï¼Œæ˜¾ç¤ºâ€œå½“å‰ä¸åŒ…å«æ•°ï¼š\(bad\)â€ã€‚  

5. **ç»“æœå±•ç¤º**ï¼š  
   - æ‰€æœ‰ç‚¹ç»Ÿè®¡å®Œæˆåï¼Œæ˜¾ç¤ºâ€œæ€»ä¸‰è§’å½¢æ•°ï¼š\(total\)ï¼Œä¸åŒ…å«çš„ï¼š\(bad\)ï¼Œé»„é‡‘ä¸‰è§’å½¢æ•°ï¼š\(total - bad\)â€ï¼ˆå¯¹åº”æ ·ä¾‹è¾“å…¥â€œæ€»ï¼š10ï¼Œä¸åŒ…å«ï¼š5ï¼Œé»„é‡‘ï¼š5â€ï¼‰ï¼›  
   - æ’­æ”¾**èƒœåˆ©éŸ³æ•ˆ**ï¼ˆâ€œå®å®å’šâ€ï¼‰ï¼Œå±å¹•ä¸Šå‡ºç°â€œé€šå…³ï¼â€çš„åƒç´ æ–‡å­—ï¼ˆå½©è‰²ï¼‰ï¼›  
   - æ˜¾ç¤ºâ€œå†æ¥ä¸€æ¬¡ï¼Ÿâ€çš„æç¤ºï¼Œå…è®¸å­¦ä¹ è€…é‡ç½®åŠ¨ç”»ã€‚  

### æ—ç™½æç¤ºï¼ˆæ–‡å­—æ°”æ³¡ï¼‰  
- ï¼ˆæè§’æ’åºæ—¶ï¼‰â€œç°åœ¨æˆ‘ä»¬æŒ‰æè§’é¡ºæ—¶é’ˆæ’åºå¥¶ç‰›ï¼Œè¿™æ ·æ¯ä¸ªå¥¶ç‰›çš„åŠå¹³é¢å†…çš„ç‚¹ä¼šå½¢æˆè¿ç»­åŒºé—´ï½â€ï¼›  
- ï¼ˆåŒæŒ‡é’ˆç§»åŠ¨æ—¶ï¼‰â€œçº¢è‰²ç‚¹æ˜¯å½“å‰å¤„ç†çš„å¥¶ç‰›ï¼Œè“è‰²åŒºé—´æ˜¯å®ƒçš„åŠå¹³é¢å†…çš„ç‚¹ï¼Œ\(r\)æŒ‡é’ˆæ­£åœ¨å¯»æ‰¾ç¬¬ä¸€ä¸ªè¶…è¿‡180Â°çš„ç‚¹ï½â€ï¼›  
- ï¼ˆç»Ÿè®¡å®Œæˆæ—¶ï¼‰â€œè¿™ä¸ªå¥¶ç‰›çš„åŠå¹³é¢å†…æœ‰3ä¸ªç‚¹ï¼Œæ‰€ä»¥ä¸åŒ…å«åŸç‚¹çš„ä¸‰è§’å½¢æ•°å¢åŠ äº†3ä¸ªï¼ˆ\(C(3,2)=3\)ï¼‰ï½â€ï¼›  
- ï¼ˆç»“æœå±•ç¤ºæ—¶ï¼‰â€œæ€»ä¸‰è§’å½¢æ•°æ˜¯10ï¼Œä¸åŒ…å«çš„æ˜¯5ï¼Œæ‰€ä»¥é»„é‡‘ä¸‰è§’å½¢æ•°æ˜¯5ï¼ä½ æˆåŠŸäº†ï½â€ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **æè§’æ’åº**ï¼šå¸¸ç”¨äºå¤„ç†å¹³é¢ä¸Šçš„ç‚¹çš„ç›¸å¯¹ä½ç½®é—®é¢˜ï¼Œå¦‚**å‡¸åŒ…**ï¼ˆæ´›è°·P2742ï¼‰ã€**æ—‹è½¬å¡å£³**ï¼ˆæ´›è°·P1452ï¼‰ã€**è§’åº¦ç»Ÿè®¡**ï¼ˆæ´›è°·P3187ï¼‰ç­‰ã€‚  
- **å®¹æ–¥åŸç†**ï¼šå¸¸ç”¨äºå¤„ç†â€œåŒ…å«â€æˆ–â€œä¸åŒ…å«â€ç±»é—®é¢˜ï¼Œå¦‚**ç»Ÿè®¡åŒ…å«æŸä¸ªç‚¹çš„çŸ©å½¢æ•°é‡**ï¼ˆæ´›è°·P1856ï¼‰ã€**ä¸åŒ…å«æŸä¸ªå…ƒç´ çš„ç»„åˆæ•°**ï¼ˆæ´›è°·P1157ï¼‰ç­‰ã€‚  
- **åŒæŒ‡é’ˆ**ï¼šå¸¸ç”¨äºæ’åºåçš„æ•°ç»„ï¼Œç»Ÿè®¡è¿ç»­åŒºé—´çš„é—®é¢˜ï¼Œå¦‚**ä¸¤æ•°ä¹‹å’Œ**ï¼ˆæ´›è°·P1678ï¼‰ã€**æ»‘åŠ¨çª—å£æœ€å¤§å€¼**ï¼ˆæ´›è°·P1886ï¼‰ç­‰ã€‚  

### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1168 ä¸­ä½æ•°**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿæ’åºå’ŒåŒæŒ‡é’ˆçš„åº”ç”¨ï¼Œéœ€è¦ç»Ÿè®¡æ¯ä¸ªä¸­ä½æ•°çš„å‡ºç°æ¬¡æ•°ï¼Œç±»ä¼¼æœ¬é¢˜çš„åŒºé—´ç»Ÿè®¡ã€‚  
2. **æ´›è°· P2029 è·³èˆçš„çº¿**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿè®¡ç®—å‡ ä½•ä¸­çš„æè§’æ’åºå’Œæ—‹è½¬å¡å£³ï¼Œéœ€è¦æ‰¾åˆ°æœ€è¿œç‚¹å¯¹ï¼Œç±»ä¼¼æœ¬é¢˜çš„æè§’å¤„ç†ã€‚  
3. **æ´›è°· P3187 ç©å…·è°œé¢˜**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿç¯çŠ¶æ•°ç»„çš„å¤„ç†ï¼Œç±»ä¼¼æœ¬é¢˜çš„å¾ªç¯æ•°ç»„ï¼Œéœ€è¦å¤„ç†ç¯çŠ¶çš„æŒ‡é’ˆç§»åŠ¨ã€‚  
4. **æ´›è°· P3385 è´Ÿç¯**ï¼š  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿå›¾è®ºä¸­çš„åŒæŒ‡é’ˆï¼ˆFloydç®—æ³•ï¼‰ï¼Œæ€è·¯ç±»ä¼¼ï¼Œéœ€è¦ç»Ÿè®¡ç¯çš„æ•°é‡ï¼Œç±»ä¼¼æœ¬é¢˜çš„ç»„åˆæ•°ç»Ÿè®¡ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª yzhang)  
> â€œä»£ç ä¸­æœ‰å‡ ç‚¹è¦æ³¨æ„ï¼š1.ç‰¹åˆ¤ç‚¹æ•°å°äº3ï¼›2. long longã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå®ç”¨ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œ**ç‰¹åˆ¤è¾¹ç•Œæƒ…å†µ**ï¼ˆå¦‚\(n<3\)ï¼‰å¯ä»¥é¿å…ä¸å¿…è¦çš„è®¡ç®—ï¼Œé˜²æ­¢é”™è¯¯ï¼ˆæ¯”å¦‚\(n=2\)æ—¶ï¼Œæ— æ³•å½¢æˆä¸‰è§’å½¢ï¼Œç›´æ¥è¾“å‡º0ï¼‰ã€‚ä½¿ç”¨**long longç±»å‹**å¯ä»¥é¿å…æ•´æ•°æº¢å‡ºï¼ˆæ¯”å¦‚\(n=1e5\)æ—¶ï¼Œç»„åˆæ•°\(C(1e5,3)\)æ˜¯\(1e15\)ï¼Œè¶…è¿‡intçš„èŒƒå›´ï¼‰ã€‚è¿™äº›ç»†èŠ‚è™½ç„¶å°ï¼Œä½†ç›´æ¥å½±å“ä»£ç çš„æ­£ç¡®æ€§ã€‚  

### å‚è€ƒç»éªŒ (æ¥è‡ª creation_hy)  
> â€œæ³¨æ„è¦æ”¾ä¸¤å€çš„ç‚¹ï¼Œå› ä¸ºæ’åºåç¬¬ä¸€ä¸ªç‚¹ä¸Šæ–¹çš„ä¸€äº›ç‚¹å¯èƒ½ä¼šæŠŠä»–ç®—è¿›å»ã€‚ç›´æ¥\(a[i+n]=a[i]+2Ï€\)å°±å¥½ã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒè§£å†³äº†æè§’æ’åºåçš„**è¾¹ç•Œé—®é¢˜**ã€‚å¾ªç¯æ•°ç»„æ˜¯å¤„ç†ç¯çŠ¶é—®é¢˜çš„å¸¸ç”¨æ–¹æ³•ï¼Œæ¯”å¦‚æœ¬é¢˜ä¸­çš„æè§’æ’åºï¼Œå¤åˆ¶ä¸€ä»½ç‚¹åˆ°æ•°ç»„æœ«å°¾ï¼Œå¯ä»¥é¿å…é—æ¼è¾¹ç•Œæƒ…å†µï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªç‚¹çš„åŠå¹³é¢åŒ…å«æœ€åå‡ ä¸ªç‚¹ï¼‰ã€‚è¿™ç§æ–¹æ³•ç®€å•æœ‰æ•ˆï¼Œå€¼å¾—å­¦ä¹ ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[USACO10OPEN] Triangle Counting Gâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ æŒæ¡**å®¹æ–¥åŸç†**ã€**æè§’æ’åº**å’Œ**åŒæŒ‡é’ˆ**çš„åº”ç”¨ï¼Œæå‡è®¡ç®—å‡ ä½•çš„èƒ½åŠ›ï¼  

è®°ä½ï¼Œç¼–ç¨‹ä¸­çš„**ç»†èŠ‚**ï¼ˆå¦‚ç‰¹åˆ¤ã€æ•°æ®ç±»å‹ï¼‰å’Œ**ä¼˜åŒ–æ–¹æ³•**ï¼ˆå¦‚åŒæŒ‡é’ˆã€å‰ç¼€å’Œï¼‰éå¸¸é‡è¦ï¼Œç›´æ¥å½±å“ä»£ç çš„æ­£ç¡®æ€§å’Œæ•ˆç‡ã€‚å¤šåšæ‹“å±•ç»ƒä¹ ï¼Œä¸¾ä¸€åä¸‰ï¼Œä½ ä¼šè¶Šæ¥è¶Šå‰å®³çš„ï¼ğŸ’ª  

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼å†è§ï½ğŸ‘‹

---
å¤„ç†ç”¨æ—¶ï¼š324.66ç§’
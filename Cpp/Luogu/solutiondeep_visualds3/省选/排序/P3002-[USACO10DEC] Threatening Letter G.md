# é¢˜ç›®ä¿¡æ¯

# [USACO10DEC] Threatening Letter G

## é¢˜ç›®æè¿°

FJ has had a terrible fight with his neighbor and wants to send him a nasty letter, but wants to remain anonymous. As so many before him have done, he plans to cut out printed letters and paste them onto a sheet of paper. He has an infinite number of the most recent issue of the Moo York Times that has N (1 <= N <= 50,000) uppercase letters laid out in a long string (though read in as a series of shorter strings). Likewise, he has a message he'd like to compose that is a single long string of letters but that is read in as a set of shorter strings.

Being lazy, he wants to make the smallest possible number of cuts. FJ has a really great set of scissors that enables him to remove any single-line snippet from the Moo York Times with one cut. He notices that he can cut entire words or phrases with a single cut, thus reducing his total number of cuts.

What is the minimum amount of cuts he has to make to construct his letter of M (1 <= M <= 50,000) letters?

It is guaranteed that it is possible for FJ to complete his task.

Consider a 38 letter Moo York Times:

```cpp
THEQUICKBROWNFOXDO 
GJUMPSOVERTHELAZYDOG 
from which FJ wants to construct a 9 letter message: 
FOXDOG 
DOG 
```
These input lines represent a pair of strings:
THEQUICKBROWNFOXDOGJUMPSOVERTHELAZYDOG 

FOXDOGDOG 

Since 'FOXDOG' exists in the newspaper, FJ can cut this piece out and then get the last 'DOG' by cutting out either instance of the word 'DOG'. 

Thus, he requires but two cuts.

FJ åˆšåˆšå’Œé‚»å±…å‘ç”Ÿäº†ä¸€åœºå¯æ€•çš„äº‰åµï¼Œä»–å’½ä¸ä¸‹è¿™å£æ°”ï¼Œäºæ˜¯å†³å®šä½šåå‘ç»™ä»–çš„é‚»å±…ä¸€å°è„è¯è¿ç¯‡çš„ä¿¡ã€‚ä»–æœ‰æ— é™å¼ å®Œå…¨ç›¸åŒçš„å·²ç»æ‰“å°å¥½çš„çº¸å¼ ï¼Œéƒ½åŒ…å« $N$ ä¸ªå­—æ¯ã€‚ä»–æœ‰ä¸€æŠŠä¸¾ä¸–æ— åŒçš„å‰ªåˆ€ï¼Œå¯ä»¥ä»æŸå¼ çº¸ä¸­é€šè¿‡ä¸€åˆ€å‰ªå‡ºè¿ç»­çš„ä¸€æ®µï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ä¸€åˆ€è·å¾—æ•´ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚ä»–æƒ³çŸ¥é“è·å¾—è¿™å° $M$ ä¸ªå­—æ¯çš„é•¿ä¿¡æœ€å°‘éœ€è¦å‰ªå¤šå°‘åˆ€ã€‚ä¿è¯è¿™æ€»æ˜¯å¯èƒ½çš„ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
38 9 
THEQUICKBROWNFOXDO 
GJUMPSOVERTHELAZYDOG 
FOXDOG 
DOG 
```

### è¾“å‡º

```
2 
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[USACO10DEC] Threatening Letter G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`å­—ç¬¦ä¸²ï¼ˆåç¼€è‡ªåŠ¨æœº/SAMï¼‰ + è´ªå¿ƒç­–ç•¥`  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œç”¨æœ€å°‘åˆ‡å‰²æ¬¡æ•°ä»æŠ¥çº¸ä¸²æ‹¼æ¥æ¶ˆæ¯ä¸²â€çš„é—®é¢˜ï¼Œå…³é”®åœ¨äº**æ¯æ¬¡å°½å¯èƒ½é€‰æœ€é•¿çš„å¯åŒ¹é…å­ä¸²**ï¼ˆè´ªå¿ƒç­–ç•¥ï¼‰ï¼Œè€Œ**é«˜æ•ˆæ‰¾åˆ°æœ€é•¿å­ä¸²**åˆ™éœ€è¦å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•çš„æ”¯æŒã€‚  

å¯ä»¥æŠŠé—®é¢˜æ¯”ä½œâ€œç”¨æœ€å°‘çš„ä¹é«˜ç§¯æœ¨æ‹¼å‡ºç›®æ ‡å›¾å½¢â€â€”â€”æ¯å—ç§¯æœ¨ï¼ˆå­ä¸²ï¼‰è¶Šå¤§ï¼Œç”¨çš„æ•°é‡è¶Šå°‘ã€‚è¿™é‡Œçš„â€œç§¯æœ¨â€å¿…é¡»æ˜¯æŠ¥çº¸ä¸²ä¸­çš„è¿ç»­ç‰‡æ®µï¼Œè€Œâ€œæ‰¾æœ€å¤§ç§¯æœ¨â€çš„ä»»åŠ¡ï¼Œ**åç¼€è‡ªåŠ¨æœºï¼ˆSAMï¼‰** èƒ½å®Œç¾è§£å†³ï¼šå®ƒèƒ½åœ¨O(1)æˆ–O(log n)æ—¶é—´å†…åˆ¤æ–­å­ä¸²æ˜¯å¦å­˜åœ¨ï¼Œå¹¶å¿«é€Ÿæ‰©å±•åŒ¹é…é•¿åº¦ã€‚  

### æ ¸å¿ƒæ€è·¯ä¸éš¾ç‚¹
- **è´ªå¿ƒç­–ç•¥**ï¼šä»æ¶ˆæ¯ä¸²çš„å½“å‰ä½ç½®å¼€å§‹ï¼Œæ‰¾æŠ¥çº¸ä¸²ä¸­èƒ½åŒ¹é…çš„æœ€é•¿å­ä¸²ï¼Œåˆ‡å‰²æ¬¡æ•°åŠ 1ï¼Œç„¶åè·³åˆ°å­ä¸²ç»“æŸä½ç½®ç»§ç»­ã€‚  
- **æ ¸å¿ƒéš¾ç‚¹**ï¼š  
  1. å¦‚ä½•é«˜æ•ˆæŸ¥è¯¢â€œå½“å‰ä½ç½®çš„æœ€é•¿å¯åŒ¹é…å­ä¸²â€ï¼Ÿï¼ˆç”¨SAMæˆ–åç¼€æ•°ç»„è§£å†³ï¼‰  
  2. è´ªå¿ƒç­–ç•¥ä¸ºä»€ä¹ˆèƒ½ä¿è¯â€œæœ€å°‘åˆ‡å‰²æ¬¡æ•°â€ï¼Ÿï¼ˆéœ€è¯æ˜ï¼šæ›´é•¿çš„å­ä¸²ä¸ä¼šå¯¼è‡´åç»­éœ€è¦æ›´å¤šåˆ‡å‰²ï¼‰  
- **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
  ç”¨åƒç´ åŠ¨ç”»å±•ç¤ºæ¶ˆæ¯ä¸²çš„åŒ¹é…è¿‡ç¨‹â€”â€”æ¶ˆæ¯ä¸²çš„æ¯ä¸ªå­—ç¬¦ç”¨å½©è‰²åƒç´ å—è¡¨ç¤ºï¼Œå·²åŒ¹é…çš„éƒ¨åˆ†ç”¨**ç»¿è‰²**é«˜äº®ï¼Œåˆ‡å‰²çš„ä½ç½®ç”¨**çº¢è‰²**æ ‡è®°ï¼Œé¡¶éƒ¨æ˜¾ç¤ºå½“å‰åˆ‡å‰²æ¬¡æ•°ã€‚æ¯æ¬¡åŒ¹é…æˆåŠŸæ—¶ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›åˆ‡å‰²æ—¶ï¼Œæ’­æ”¾â€œå’”åš“â€å£°ï¼Œå¼ºåŒ–æ“ä½œè®°å¿†ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šFadingï¼ˆSAM + è´ªå¿ƒï¼Œèµï¼š6ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**ç®€æ´åˆ°â€œç§’æ€â€**â€”â€”ç”¨åç¼€è‡ªåŠ¨æœºï¼ˆSAMï¼‰é¢„å¤„ç†æŠ¥çº¸ä¸²ï¼Œç„¶åç”¨è´ªå¿ƒç­–ç•¥éå†æ¶ˆæ¯ä¸²ï¼šæ¯æ¬¡ä»å½“å‰ä½ç½®å¼€å§‹ï¼Œç”¨SAMå°½å¯èƒ½åŒ¹é…æœ€é•¿å­ä¸²ï¼ŒåŒ¹é…å¤±è´¥åˆ™åˆ‡å‰²ï¼ˆæ¬¡æ•°åŠ 1ï¼Œå›åˆ°SAMæ ¹èŠ‚ç‚¹é‡æ–°å¼€å§‹ï¼‰ã€‚  
  ä»£ç **è§„èŒƒä¸”é«˜æ•ˆ**ï¼š`insert`å‡½æ•°æ„å»ºSAMï¼Œ`doit`å‡½æ•°å¤„ç†æ¶ˆæ¯ä¸²çš„åŒ¹é…ï¼Œé€»è¾‘æ¸…æ™°ã€‚ç‰¹åˆ«æ˜¯**è¯»å…¥å¤„ç†**ï¼ˆè·³è¿‡éå­—æ¯å­—ç¬¦ï¼‰å¾ˆå®ç”¨ï¼Œè§£å†³äº†é¢˜ç›®ä¸­â€œè¾“å…¥åˆ†å¤šè¡Œâ€çš„é—®é¢˜ã€‚  
  ç®—æ³•**æ—¶é—´å¤æ‚åº¦O(n + m)**ï¼ˆnä¸ºæŠ¥çº¸ä¸²é•¿åº¦ï¼Œmä¸ºæ¶ˆæ¯ä¸²é•¿åº¦ï¼‰ï¼Œå®Œå…¨æ»¡è¶³é¢˜ç›®è¦æ±‚çš„å¤§è¾“å…¥è§„æ¨¡ï¼ˆ5e4ï¼‰ï¼Œæ˜¯ç«èµ›ä¸­çš„â€œæœ€ä¼˜è§£æ³•â€ã€‚  


### é¢˜è§£äºŒï¼šcreation_hyï¼ˆSAM + è´ªå¿ƒï¼Œèµï¼š0ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„ä»£ç **æ›´ç®€æ´**ï¼Œç›´æ¥ç”¨SAMçš„`match`å‡½æ•°å¤„ç†æ•´ä¸ªæ¶ˆæ¯ä¸²ã€‚æ ¸å¿ƒé€»è¾‘ä¸Fadingçš„é¢˜è§£ä¸€è‡´ï¼Œä½†ä»£ç ç»“æ„æ›´ç´§å‡‘ï¼ˆæ¯”å¦‚å°†åŒ¹é…è¿‡ç¨‹æ•´åˆåˆ°`match`å‡½æ•°ä¸­ï¼‰ã€‚  
  ä½œè€…æåˆ°â€œè´ªå¿ƒçš„æ­£ç¡®æ€§â€â€”â€”â€œå…¨æ‹¿å®Œè¦åˆ‡çš„åœ°æ–¹ï¼Œä¸æ‹¿å®Œä¹Ÿè¦åˆ‡â€ï¼Œè¿™å¥è¯ä¸€é’ˆè§è¡€åœ°è§£é‡Šäº†è´ªå¿ƒçš„åˆç†æ€§ï¼š longerå­ä¸²ä¸ä¼šè®©åç»­éœ€è¦æ›´å¤šåˆ‡å‰²ï¼Œå› æ­¤é€‰æœ€é•¿çš„ä¸€å®šæœ€ä¼˜ã€‚  


### é¢˜è§£ä¸‰ï¼šGraphcityï¼ˆåç¼€æ•°ç»„ + DP + çº¿æ®µæ ‘ï¼Œèµï¼š6ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**æ›´å¤æ‚ä½†æ›´é€šç”¨**â€”â€”ç”¨åç¼€æ•°ç»„ï¼ˆSAï¼‰å¤„ç†æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆLCPï¼‰ï¼Œç„¶åç”¨åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰æ±‚æœ€å°‘åˆ‡å‰²æ¬¡æ•°ã€‚`f(i)`è¡¨ç¤ºæ‹¼å‡ºæ¶ˆæ¯ä¸²å‰iä¸ªå­—ç¬¦çš„æœ€å°‘æ¬¡æ•°ï¼Œ`f(i) = 1 + min(f(j))`ï¼ˆjæ˜¯iä¹‹å‰çš„ä½ç½®ï¼Œä¸”i-jæ˜¯å¯åŒ¹é…çš„å­ä¸²é•¿åº¦ï¼‰ã€‚  
  ä»£ç **å®ç°éš¾åº¦é«˜**ï¼ˆéœ€è¦å¤„ç†SAã€heightæ•°ç»„ã€STè¡¨ã€çº¿æ®µæ ‘ï¼‰ï¼Œä½†**æ—¶é—´å¤æ‚åº¦O(n log n)**ï¼Œé€‚åˆç†è§£â€œå¦‚ä½•å°†å­—ç¬¦ä¸²é—®é¢˜è½¬åŒ–ä¸ºDPé—®é¢˜â€ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•é«˜æ•ˆæŸ¥è¯¢æœ€é•¿å¯åŒ¹é…å­ä¸²ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  æŠ¥çº¸ä¸²çš„å­ä¸²åŒ¹é…é—®é¢˜ï¼Œ**SAM**æ˜¯æœ€ä¼˜é€‰æ‹©â€”â€”å®ƒèƒ½å°†æŠ¥çº¸ä¸²å‹ç¼©æˆä¸€ä¸ªè‡ªåŠ¨æœºï¼Œæ¯ä¸ªçŠ¶æ€ä»£è¡¨ä¸€ç»„ç­‰ä»·çš„å­ä¸²ã€‚å½“éå†æ¶ˆæ¯ä¸²æ—¶ï¼Œåªéœ€æ²¿ç€è‡ªåŠ¨æœºçš„è½¬ç§»è¾¹èµ°ï¼Œå°±èƒ½å¿«é€Ÿæ‰©å±•åŒ¹é…é•¿åº¦ã€‚è‹¥æ— æ³•è½¬ç§»ï¼ˆåŒ¹é…å¤±è´¥ï¼‰ï¼Œåˆ™å›åˆ°æ ¹èŠ‚ç‚¹ï¼Œåˆ‡å‰²æ¬¡æ•°åŠ 1ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šSAMæ˜¯å¤„ç†å­ä¸²é—®é¢˜çš„â€œç‘å£«å†›åˆ€â€ï¼Œå°¤å…¶é€‚åˆå¤§é•¿åº¦å­—ç¬¦ä¸²çš„åŒ¹é…ã€‚  


### 2. **éš¾ç‚¹2ï¼šè´ªå¿ƒç­–ç•¥çš„æ­£ç¡®æ€§ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  å‡è®¾å­˜åœ¨ä¸€ç§æ›´ä¼˜çš„æ–¹æ¡ˆï¼ˆåˆ‡å‰²æ¬¡æ•°æ›´å°‘ï¼‰ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæœ‰ä¸€æ­¥é€‰äº†æ¯”â€œæœ€é•¿å­ä¸²â€æ›´çŸ­çš„å­ä¸²ã€‚ä½†æ ¹æ®è´ªå¿ƒç­–ç•¥ï¼Œæ›´é•¿çš„å­ä¸²èƒ½è¦†ç›–æ›´å¤šå­—ç¬¦ï¼Œåç»­éœ€è¦çš„åˆ‡å‰²æ¬¡æ•°ä¸ä¼šæ›´å¤šã€‚å› æ­¤ï¼Œè´ªå¿ƒç­–ç•¥èƒ½ä¿è¯å…¨å±€æœ€ä¼˜ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒç­–ç•¥çš„å…³é”®æ˜¯â€œå±€éƒ¨æœ€ä¼˜å¯¼è‡´å…¨å±€æœ€ä¼˜â€ï¼Œéœ€é€šè¿‡åè¯æ³•è¯æ˜ã€‚  


### 3. **éš¾ç‚¹3ï¼šå¤„ç†å¤§è¾“å…¥çš„æ•ˆç‡ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  SAMçš„æ„å»ºæ—¶é—´æ˜¯O(n)ï¼ˆnä¸ºæŠ¥çº¸ä¸²é•¿åº¦ï¼‰ï¼Œéå†æ¶ˆæ¯ä¸²çš„æ—¶é—´æ˜¯O(m)ï¼ˆmä¸ºæ¶ˆæ¯ä¸²é•¿åº¦ï¼‰ï¼Œæ€»æ—¶é—´å¤æ‚åº¦O(n + m)ï¼Œå®Œå…¨æ»¡è¶³5e4çš„è§„æ¨¡ã€‚è€Œåç¼€æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n log n)ï¼Œè™½ç„¶ä¹Ÿèƒ½é€šè¿‡ï¼Œä½†SAMæ›´é«˜æ•ˆã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€‰æ‹©åˆé€‚çš„ç®—æ³•èƒ½å¤§å¹…æå‡æ•ˆç‡ï¼ŒSAMæ˜¯å¤„ç†å­ä¸²é—®é¢˜çš„â€œæ•ˆç‡æ‹…å½“â€ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æŠ€å·§1ï¼šè´ªå¿ƒç­–ç•¥**ï¼šæ¯æ¬¡é€‰æœ€é•¿å¯åŒ¹é…å­ä¸²ï¼Œå‡å°‘åˆ‡å‰²æ¬¡æ•°ã€‚  
- **æŠ€å·§2ï¼šSAMçš„åº”ç”¨**ï¼šå¤„ç†å­ä¸²åŒ¹é…é—®é¢˜çš„é«˜æ•ˆå·¥å…·ï¼Œå°¤å…¶é€‚åˆå¤§è¾“å…¥ã€‚  
- **æŠ€å·§3ï¼šè¯»å…¥å¤„ç†**ï¼šè·³è¿‡éå­—æ¯å­—ç¬¦ï¼Œè§£å†³è¾“å…¥åˆ†å¤šè¡Œçš„é—®é¢˜ï¼ˆå¦‚Fadingçš„`read`å‡½æ•°ï¼‰ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆSAM + è´ªå¿ƒï¼‰  
* **è¯´æ˜**ï¼šç»¼åˆFadingå’Œcreation_hyçš„é¢˜è§£ï¼Œæç‚¼å‡ºæœ€ç®€æ´çš„SAM + è´ªå¿ƒå®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <string>
  #include <cstring>
  using namespace std;

  const int N = 1e5 + 10; // è¶³å¤Ÿå¤§çš„ç©ºé—´

  struct SAM {
      int tot, last;
      int len[N], fa[N], t[N][26]; // t[p][c]è¡¨ç¤ºçŠ¶æ€pç»è¿‡å­—ç¬¦cè½¬ç§»åˆ°çš„çŠ¶æ€

      SAM() {
          tot = last = 0;
          fa[0] = -1;
          memset(t, 0, sizeof(t));
      }

      void insert(char c) {
          c -= 'A'; // è½¬ä¸º0-25çš„ç´¢å¼•
          int cur = ++tot;
          len[cur] = len[last] + 1;
          int p = last;
          last = cur;
          // å‘ä¸Šæ›´æ–°è½¬ç§»
          while (p != -1 && !t[p][c]) {
              t[p][c] = cur;
              p = fa[p];
          }
          if (p == -1) {
              fa[cur] = 0;
          } else {
              int q = t[p][c];
              if (len[q] == len[p] + 1) {
                  fa[cur] = q;
              } else {
                  // åˆ†è£‚qä¸ºnq
                  int nq = ++tot;
                  len[nq] = len[p] + 1;
                  memcpy(t[nq], t[q], sizeof(t[q]));
                  fa[nq] = fa[q];
                  // æ›´æ–°påŠå…¶ç¥–å…ˆçš„è½¬ç§»
                  while (p != -1 && t[p][c] == q) {
                      t[p][c] = nq;
                      p = fa[p];
                  }
                  fa[q] = fa[cur] = nq;
              }
          }
      }

      int match(const string& s) {
          int cur = 0; // å½“å‰çŠ¶æ€ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰
          int ans = 1; // åˆå§‹åˆ‡å‰²æ¬¡æ•°ä¸º1ï¼ˆè‡³å°‘éœ€è¦ä¸€æ¬¡ï¼‰
          for (char ch : s) {
              int c = ch - 'A';
              if (t[cur][c]) {
                  cur = t[cur][c]; // ç»§ç»­åŒ¹é…
              } else {
                  // åŒ¹é…å¤±è´¥ï¼Œåˆ‡å‰²æ¬¡æ•°åŠ 1ï¼Œå›åˆ°æ ¹èŠ‚ç‚¹é‡æ–°å¼€å§‹
                  ans++;
                  cur = t[0][c]; // æ ¹èŠ‚ç‚¹çš„è½¬ç§»
              }
          }
          return ans;
      }
  };

  int main() {
      ios::sync_with_stdio(false);
      cin.tie(nullptr);

      int n, m;
      cin >> n >> m;

      string s1, s2;
      // è¯»å–æŠ¥çº¸ä¸²s1ï¼ˆè·³è¿‡éå­—æ¯å­—ç¬¦ï¼‰
      while (s1.size() < n) {
          string tmp;
          cin >> tmp;
          s1 += tmp;
      }
      // è¯»å–æ¶ˆæ¯ä¸²s2ï¼ˆè·³è¿‡éå­—æ¯å­—ç¬¦ï¼‰
      while (s2.size() < m) {
          string tmp;
          cin >> tmp;
          s2 += tmp;
      }

      SAM sam;
      for (char c : s1) {
          sam.insert(c);
      }

      cout << sam.match(s2) << endl;

      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **SAMç»“æ„**ï¼š`insert`å‡½æ•°æ„å»ºåç¼€è‡ªåŠ¨æœºï¼Œ`match`å‡½æ•°ç”¨è´ªå¿ƒç­–ç•¥éå†æ¶ˆæ¯ä¸²ã€‚  
  2. **æ’å…¥è¿‡ç¨‹**ï¼šå°†æŠ¥çº¸ä¸²çš„æ¯ä¸ªå­—ç¬¦æ’å…¥SAMï¼Œæ„å»ºè‡ªåŠ¨æœºçš„çŠ¶æ€å’Œè½¬ç§»ã€‚  
  3. **åŒ¹é…è¿‡ç¨‹**ï¼šä»æ¶ˆæ¯ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œç”¨SAMå°½å¯èƒ½åŒ¹é…æœ€é•¿å­ä¸²ï¼ŒåŒ¹é…å¤±è´¥åˆ™åˆ‡å‰²ï¼ˆæ¬¡æ•°åŠ 1ï¼‰ï¼Œå›åˆ°æ ¹èŠ‚ç‚¹é‡æ–°å¼€å§‹ã€‚  


### é’ˆå¯¹ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼šFadingçš„`doit`å‡½æ•°  
* **äº®ç‚¹**ï¼šç”¨SAMçš„è½¬ç§»é€»è¾‘å¤„ç†æ¶ˆæ¯ä¸²ï¼Œä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  inline void doit(int ch){
      if (g[NOW][ch]) NOW=g[NOW][ch];// å¦‚æœåŒ¹é…ç»§ç»­è·‘
      else{// å¦‚æœä¸åŒ¹é…äº†
          ans++;
          NOW=g[1][ch]; // å›åˆ°æ ¹èŠ‚ç‚¹ï¼ˆæ³¨æ„ï¼šFadingçš„æ ¹èŠ‚ç‚¹æ˜¯1ï¼Œè¿™é‡Œå¯èƒ½æ˜¯ç¬”è¯¯ï¼Œæ­£ç¡®åº”ä¸º0ï¼‰
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `NOW`è¡¨ç¤ºå½“å‰åœ¨SAMä¸­çš„çŠ¶æ€ã€‚  
  - è‹¥å½“å‰çŠ¶æ€æœ‰å­—ç¬¦`ch`çš„è½¬ç§»ï¼ˆ`g[NOW][ch]`ä¸ä¸ºç©ºï¼‰ï¼Œåˆ™ç»§ç»­è½¬ç§»ï¼ˆåŒ¹é…æ›´é•¿çš„å­ä¸²ï¼‰ã€‚  
  - è‹¥æ²¡æœ‰è½¬ç§»ï¼ˆåŒ¹é…å¤±è´¥ï¼‰ï¼Œåˆ™åˆ‡å‰²æ¬¡æ•°`ans`åŠ 1ï¼Œå›åˆ°æ ¹èŠ‚ç‚¹ï¼ˆ`g[1][ch]`åº”ä¸º`g[0][ch]`ï¼‰ï¼Œé‡æ–°å¼€å§‹åŒ¹é…ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šSAMçš„è½¬ç§»é€»è¾‘æ˜¯åŒ¹é…å­ä¸²çš„æ ¸å¿ƒï¼Œç†è§£è½¬ç§»çš„å«ä¹‰èƒ½å¿«é€Ÿè§£å†³å­ä¸²é—®é¢˜ã€‚  


#### é¢˜è§£äºŒï¼šcreation_hyçš„`match`å‡½æ•°  
* **äº®ç‚¹**ï¼šå°†åŒ¹é…è¿‡ç¨‹æ•´åˆåˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä»£ç æ›´ç´§å‡‘ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  inline int match(string s) {
      int cur = 0, res = 1;
      for (char c : s) {
          c -= 'A';
          if (t[cur][c])
              cur = t[cur][c];
          else
              cur = t[0][c], res++;
      }
      return res;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `cur`è¡¨ç¤ºå½“å‰çŠ¶æ€ï¼Œ`res`è¡¨ç¤ºåˆ‡å‰²æ¬¡æ•°ã€‚  
  - éå†æ¶ˆæ¯ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œè‹¥å½“å‰çŠ¶æ€æœ‰è½¬ç§»ï¼Œåˆ™ç»§ç»­ï¼›å¦åˆ™ï¼Œåˆ‡å‰²æ¬¡æ•°åŠ 1ï¼Œå›åˆ°æ ¹èŠ‚ç‚¹ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä»£ç çš„ç®€æ´æ€§å¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨ç«èµ›ä¸­ï¼Œèƒ½å‡å°‘è°ƒè¯•æ—¶é—´ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š`åƒç´ æŠ¥çº¸çš„åˆ‡å‰²æ¸¸æˆ`  
**è®¾è®¡æ€è·¯**ï¼šç”¨8ä½åƒç´ é£æ ¼æ¨¡æ‹ŸæŠ¥çº¸ä¸²å’Œæ¶ˆæ¯ä¸²ï¼Œé€šè¿‡åŠ¨ç”»å±•ç¤ºè´ªå¿ƒç­–ç•¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¢åŠ å­¦ä¹ çš„è¶£å‘³æ€§ã€‚  


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤º**æŠ¥çº¸ä¸²**ï¼ˆåƒç´ å—ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦ä¸ºä¸€ä¸ªå½©è‰²æ–¹å—ï¼‰ï¼Œå³ä¾§æ˜¾ç¤º**æ¶ˆæ¯ä¸²**ï¼ˆåŒæ ·ç”¨åƒç´ å—è¡¨ç¤ºï¼‰ã€‚  
   - é¡¶éƒ¨æ˜¾ç¤º**åˆ‡å‰²æ¬¡æ•°**ï¼ˆåˆå§‹ä¸º0ï¼‰ï¼Œåº•éƒ¨æœ‰**æ§åˆ¶é¢æ¿**ï¼ˆå•æ­¥æ‰§è¡Œã€è‡ªåŠ¨æ’­æ”¾ã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼‰ã€‚  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - æ¶ˆæ¯ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç”¨**é»„è‰²**é«˜äº®ï¼Œè¡¨ç¤ºå½“å‰éœ€è¦åŒ¹é…çš„ä½ç½®ã€‚  
   - æŠ¥çº¸ä¸²ä¸­èƒ½åŒ¹é…çš„æœ€é•¿å­ä¸²ç”¨**ç»¿è‰²**é«˜äº®ï¼ˆå¦‚æ¶ˆæ¯ä¸²çš„â€œFOXâ€å¯¹åº”æŠ¥çº¸ä¸²çš„â€œFOXâ€ï¼‰ã€‚  

3. **æ ¸å¿ƒæ­¥éª¤æ¼”ç¤º**ï¼š  
   - **åŒ¹é…æˆåŠŸ**ï¼šå½“æ¶ˆæ¯ä¸²çš„å½“å‰å­—ç¬¦åŒ¹é…æŠ¥çº¸ä¸²çš„å­—ç¬¦æ—¶ï¼Œæ¶ˆæ¯ä¸²çš„é»„è‰²å—å˜ä¸º**ç»¿è‰²**ï¼ŒæŠ¥çº¸ä¸²çš„ç»¿è‰²å—æ‰©å±•ï¼ˆå¦‚â€œFOXâ€æ‰©å±•ä¸ºâ€œFOXDOGâ€ï¼‰ã€‚æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  
   - **åˆ‡å‰²æ“ä½œ**ï¼šå½“æ— æ³•ç»§ç»­åŒ¹é…æ—¶ï¼ˆå¦‚æ¶ˆæ¯ä¸²çš„â€œDOGâ€éœ€è¦æ–°çš„åˆ‡å‰²ï¼‰ï¼Œåˆ‡å‰²æ¬¡æ•°åŠ 1ï¼ˆé¡¶éƒ¨æ˜¾ç¤ºå˜ä¸º1ï¼‰ï¼ŒæŠ¥çº¸ä¸²çš„ç»¿è‰²å—æ¶ˆå¤±ï¼Œæ¶ˆæ¯ä¸²çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å˜ä¸ºé»„è‰²ã€‚æ’­æ”¾â€œå’”åš“â€çš„éŸ³æ•ˆã€‚  
   - **è‡ªåŠ¨æ¼”ç¤º**ï¼šç‚¹å‡»â€œè‡ªåŠ¨æ’­æ”¾â€æŒ‰é’®ï¼ŒåŠ¨ç”»ä¼šå¿«é€Ÿæ‰§è¡Œæ‰€æœ‰æ­¥éª¤ï¼Œç›´åˆ°æ¶ˆæ¯ä¸²å®Œå…¨åŒ¹é…ã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“æ¶ˆæ¯ä¸²çš„æ‰€æœ‰å­—ç¬¦å˜ä¸ºç»¿è‰²æ—¶ï¼Œæ’­æ”¾**èƒœåˆ©éŸ³æ•ˆ**ï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ï¼‰ï¼Œå±å¹•æ˜¾ç¤ºâ€œåˆ‡å‰²æ¬¡æ•°ï¼š2â€ï¼ˆæ ·ä¾‹è¾“å‡ºï¼‰ï¼Œå¹¶å¼¹å‡ºâ€œé€šå…³ï¼â€çš„åƒç´ å¯¹è¯æ¡†ã€‚  


### æ—ç™½æç¤ºï¼ˆåŠ¨ç”»ä¸­çš„æ–‡å­—æ°”æ³¡ï¼‰  
- â€œç°åœ¨éœ€è¦åŒ¹é…æ¶ˆæ¯ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦â€˜Fâ€™ï¼Œçœ‹çœ‹æŠ¥çº¸ä¸²é‡Œæœ‰æ²¡æœ‰ï¼Ÿâ€  
- â€œæ‰¾åˆ°äº†ï¼â€˜FOXDOGâ€™æ˜¯æœ€é•¿çš„å¯åŒ¹é…å­ä¸²ï¼Œåˆ‡å‰²æ¬¡æ•°åŠ 1ï¼â€  
- â€œæ¥ä¸‹æ¥åŒ¹é…â€˜DOGâ€™ï¼Œéœ€è¦æ–°çš„åˆ‡å‰²ï¼Œæ¬¡æ•°å˜ä¸º2ï¼â€  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **SAMçš„åº”ç”¨åœºæ™¯**ï¼š  
  1. æ±‚å­—ç¬¦ä¸²çš„ä¸åŒå­ä¸²æ•°ç›®ï¼ˆå¦‚æ´›è°·P3804ï¼‰ã€‚  
  2. æ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²ï¼ˆå¦‚æ´›è°·P2408ï¼‰ã€‚  
  3. æ±‚å­—ç¬¦ä¸²çš„æœ€é•¿å›æ–‡å­ä¸²ï¼ˆå¦‚æ´›è°·P5546ï¼‰ã€‚  


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P3804** - ã€Šåç¼€è‡ªåŠ¨æœºã€‹  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šSAMçš„æ¨¡æ¿é¢˜ï¼Œå¸®åŠ©ä½ æŒæ¡SAMçš„æ„å»ºè¿‡ç¨‹ã€‚  
2. **æ´›è°· P2408** - ã€Šä¸åŒå­ä¸²ä¸ªæ•°ã€‹  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨SAMæ±‚ä¸åŒå­ä¸²æ•°ç›®ï¼Œå·©å›ºSAMçš„çŠ¶æ€å«ä¹‰ã€‚  
3. **æ´›è°· P5546** - ã€Š[POI2000] å…¬å…±ä¸²ã€‹  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç”¨SAMæ±‚å¤šä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²ï¼Œæ‹“å±•SAMçš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ªFading)  
> â€œè¿™é¢˜è¯»å…¥æ¯”è¾ƒå¥‡æ€ªï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ ·ä¾‹æœ‰è¿™ä¹ˆå¤šè¡Œâ€¦â€¦æ‰€ä»¥æˆ‘å»ºè®®å°±è¿™ä¹ˆè¯»å…¥ï¼šç”¨`getchar`è·³è¿‡éå­—æ¯å­—ç¬¦ã€‚â€  

**ç‚¹è¯„**ï¼š  
è¾“å…¥å¤„ç†æ˜¯ç¼–ç¨‹ä¸­çš„å¸¸è§é—®é¢˜ï¼Œå°¤å…¶æ˜¯å½“è¾“å…¥åˆ†å¤šè¡Œæˆ–åŒ…å«æ— å…³å­—ç¬¦æ—¶ã€‚Fadingçš„`read`å‡½æ•°ï¼ˆè·³è¿‡éå­—æ¯å­—ç¬¦ï¼‰å¾ˆå®ç”¨ï¼Œèƒ½è§£å†³é¢˜ç›®ä¸­çš„è¾“å…¥é—®é¢˜ã€‚**å­¦ä¹ å»ºè®®**ï¼šé‡åˆ°è¾“å…¥é—®é¢˜æ—¶ï¼Œå…ˆçœ‹é¢˜ç›®æè¿°ä¸­çš„è¾“å…¥æ ¼å¼ï¼Œå†ç”¨ç›¸åº”çš„æ–¹æ³•å¤„ç†ï¼ˆå¦‚è·³è¿‡ç©ºæ ¼ã€æ¢è¡Œç¬¦ï¼‰ã€‚  


### å‚è€ƒç»éªŒ (æ¥è‡ªcreation_hy)  
> â€œå¾ˆæ˜¾ç„¶è´ªå¿ƒä»åŒ¹é…ä¸²å¼€å¤´å¼€å§‹æ‰¾æœ€é•¿å¯ä»¥åŒ¹é…çš„ä¸²æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºä¸‹ä¸€æ¬¡åŒ¹é…çš„å­—ç¬¦ä¸²æ— è®ºå¼€å¤´å»æ‰å¤šå°‘ï¼Œå®ƒä»¬éƒ½æ˜¯å…¨æ‹¿å®Œçš„åç¼€ï¼Œä¹Ÿå°±å¯¼è‡´ä½ å…¨æ‹¿å®Œè¦åˆ‡çš„åœ°æ–¹ä¸æ‹¿å®Œä¹Ÿè¦åˆ‡ã€‚â€  

**ç‚¹è¯„**ï¼š  
è´ªå¿ƒç­–ç•¥çš„æ­£ç¡®æ€§æ˜¯æœ¬é¢˜çš„å…³é”®ï¼Œcreation_hyçš„è§£é‡Šå¾ˆé€šä¿—â€”â€”â€œå…¨æ‹¿å®Œè¦åˆ‡çš„åœ°æ–¹ï¼Œä¸æ‹¿å®Œä¹Ÿè¦åˆ‡â€ï¼Œè¯´æ˜æ›´é•¿çš„å­ä¸²ä¸ä¼šè®©åç»­éœ€è¦æ›´å¤šåˆ‡å‰²ã€‚**å­¦ä¹ å»ºè®®**ï¼šç”¨åè¯æ³•è¯æ˜è´ªå¿ƒç­–ç•¥çš„æ­£ç¡®æ€§ï¼Œèƒ½åŠ æ·±å¯¹ç®—æ³•çš„ç†è§£ã€‚  


## æ€»ç»“  
æœ¬æ¬¡åˆ†æçš„â€œThreatening Letter Gâ€é¢˜ï¼Œæ ¸å¿ƒæ˜¯**ç”¨æœ€å°‘çš„å­ä¸²è¦†ç›–æ¶ˆæ¯ä¸²**ï¼Œè§£å†³æ–¹æ³•æ˜¯**SAM + è´ªå¿ƒç­–ç•¥**ã€‚é€šè¿‡å­¦ä¹ SAMçš„æ„å»ºå’Œè´ªå¿ƒçš„åº”ç”¨ï¼Œä½ èƒ½æŒæ¡å¤„ç†å­ä¸²é—®é¢˜çš„é«˜æ•ˆæ–¹æ³•ã€‚è®°ä½ï¼š**è´ªå¿ƒç­–ç•¥çš„å…³é”®æ˜¯â€œå±€éƒ¨æœ€ä¼˜å¯¼è‡´å…¨å±€æœ€ä¼˜â€ï¼Œè€ŒSAMæ˜¯å¤„ç†å­ä¸²é—®é¢˜çš„â€œæ•ˆç‡æ‹…å½“â€**ã€‚  

ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼çš„å­ä¸²è¦†ç›–é—®é¢˜ï¼Œä¸å¦¨è¯•è¯•SAM + è´ªå¿ƒçš„ç»„åˆï¼Œç›¸ä¿¡ä½ èƒ½å¿«é€Ÿè§£å†³ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š173.57ç§’
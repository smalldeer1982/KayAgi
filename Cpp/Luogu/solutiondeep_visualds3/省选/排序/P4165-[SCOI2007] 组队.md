# é¢˜ç›®ä¿¡æ¯

# [SCOI2007] ç»„é˜Ÿ

## é¢˜ç›®æè¿°

NBAæ¯å¹´éƒ½æœ‰çƒå‘˜é€‰ç§€ç¯èŠ‚ã€‚é€šå¸¸ç”¨é€Ÿåº¦å’Œèº«é«˜ä¸¤é¡¹æ•°æ®æ¥è¡¡é‡ä¸€ä¸ªç¯®çƒè¿åŠ¨å‘˜çš„åŸºæœ¬ç´ è´¨ã€‚å‡å¦‚ä¸€æ”¯çƒé˜Ÿé‡Œé€Ÿåº¦æœ€æ…¢çš„çƒå‘˜é€Ÿåº¦ä¸ºminVï¼Œèº«é«˜æœ€çŸ®çš„çƒå‘˜é«˜åº¦ä¸ºminHï¼Œé‚£ä¹ˆè¿™æ”¯çƒé˜Ÿçš„æ‰€æœ‰é˜Ÿå‘˜éƒ½åº”è¯¥æ»¡è¶³: A Ã— ( height â€“ minH ) + B Ã— ( speed â€“ minV ) <= C å…¶ä¸­Aå’ŒBï¼ŒCä¸ºç»™å®šçš„ç»éªŒå€¼ã€‚è¿™ä¸ªå¼å­å¾ˆå®¹æ˜“ç†è§£ï¼Œå¦‚æœä¸€ä¸ªçƒé˜Ÿçš„çƒå‘˜é€Ÿåº¦å’Œèº«é«˜å·®è·å¤ªå¤§ï¼Œä¼šé€ æˆé…åˆçš„ä¸åè°ƒã€‚

è¯·é—®ä½œä¸ºçƒé˜Ÿç®¡ç†å±‚çš„ä½ ï¼Œåœ¨Nåé€‰ç§€çƒå‘˜ä¸­ï¼Œæœ€å¤šèƒ½æœ‰å¤šå°‘åç¬¦åˆæ¡ä»¶çš„å€™é€‰çƒå‘˜ã€‚


## è¯´æ˜/æç¤º

æ•°æ®èŒƒå›´ï¼š N <= 5000 ,heightå’Œspeedä¸å¤§äº10000ã€‚Aã€Bã€Cåœ¨é•¿æ•´å‹ä»¥å†…ã€‚



## æ ·ä¾‹ #1

### è¾“å…¥

```
4 1 2 10
5 1
3 2
2 3
2 1```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[SCOI2007]ç»„é˜Ÿ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæšä¸¾ä¸å•è°ƒæ€§ä¼˜åŒ–ï¼ˆç¼–ç¨‹æŠ€å·§åº”ç”¨ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œç»„é˜Ÿâ€é—®é¢˜çš„æ ¸å¿ƒï¼Œæ˜¯æ‰¾åˆ°ä¸€ç»„çƒå‘˜ï¼Œä½¿å¾—å­˜åœ¨é˜Ÿä¸­æœ€çŸ®èº«é«˜`minH`å’Œæœ€æ…¢é€Ÿåº¦`minV`ï¼Œæ»¡è¶³æ‰€æœ‰é˜Ÿå‘˜çš„`A*(h-minH) + B*(v-minV) â‰¤ C`ã€‚ç”±äº`minH`å’Œ`minV`å¿…é¡»æ˜¯é˜Ÿä¸­æˆå‘˜çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥**æšä¸¾æ‰€æœ‰å¯èƒ½çš„`minH`å’Œ`minV`**ï¼ˆå³æ‰€æœ‰çƒå‘˜çš„èº«é«˜å’Œé€Ÿåº¦ï¼‰ï¼Œç„¶åç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„çƒå‘˜æ•°é‡ã€‚  

ç›´æ¥æšä¸¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(nÂ³)`ï¼ˆæšä¸¾`minH`ã€`minV`ï¼Œå†éå†æ‰€æœ‰çƒå‘˜ï¼‰ï¼Œä½†é€šè¿‡**æ’åº+åŒæŒ‡é’ˆ**çš„å•è°ƒæ€§ä¼˜åŒ–ï¼Œå¯ä»¥å°†ç»Ÿè®¡è¿‡ç¨‹å‹ç¼©åˆ°`O(nÂ²)`ã€‚ä¾‹å¦‚ï¼š  
- å°†çƒå‘˜æŒ‰`h`æ’åºï¼ˆæšä¸¾`minH`ï¼‰ã€æŒ‰`v`æ’åºï¼ˆæšä¸¾`minV`ï¼‰ã€æŒ‰`A*h+B*v`æ’åºï¼ˆå¿«é€Ÿç­›é€‰ç¬¦åˆ`A*h+B*v â‰¤ C+A*minH+B*minV`çš„çƒå‘˜ï¼‰ï¼›  
- ç”¨åŒæŒ‡é’ˆç»´æŠ¤ç¬¦åˆæ¡ä»¶çš„çƒå‘˜åŒºé—´ï¼Œé¿å…é‡å¤éå†ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
1. æ’åºé¢„å¤„ç†ï¼šå°†çƒå‘˜æŒ‰`h`ã€`v`ã€`A*h+B*v`åˆ†åˆ«æ’åºï¼Œå¾—åˆ°ä¸‰ä¸ªæ•°ç»„ï¼›  
2. æšä¸¾`minH`ï¼ˆä»æ’åºåçš„`h`æ•°ç»„ä¸­å–ï¼‰ï¼›  
3. æšä¸¾`minV`ï¼ˆä»æ’åºåçš„`v`æ•°ç»„ä¸­å–ï¼‰ï¼›  
4. ç”¨åŒæŒ‡é’ˆå¿«é€Ÿç»Ÿè®¡æ»¡è¶³`hâ‰¥minH`ã€`vâ‰¥minV`ã€`A*h+B*v â‰¤ C+A*minH+B*minV`çš„çƒå‘˜æ•°é‡ï¼›  
5. æ›´æ–°æœ€å¤§é˜Ÿä¼å¤§å°ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºçƒå‘˜åˆ—è¡¨ï¼ˆç»¿è‰²è¡¨ç¤ºç¬¦åˆæ¡ä»¶ï¼Œçº¢è‰²è¡¨ç¤ºä¸ç¬¦åˆï¼‰ï¼ŒåŒæŒ‡é’ˆï¼ˆé»„è‰²ç®­å¤´ï¼‰åŠ¨æ€ç§»åŠ¨æ ‡è®°å½“å‰ç­›é€‰çš„åŒºé—´ï¼Œå³ä¸Šè§’ç”¨å¤§åƒç´ æ•°å­—æ˜¾ç¤ºå½“å‰ç»Ÿè®¡çš„é˜Ÿä¼å¤§å°ã€‚å½“æ‰¾åˆ°æ›´å¤§å€¼æ—¶ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚FCæ¸¸æˆçš„â€œå®~â€ï¼‰ï¼Œå¢å¼ºå‚ä¸æ„Ÿã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šDDOSvoidï¼ˆèµï¼š12ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**æ¸…æ™°ä¸”é«˜æ•ˆ**ï¼Œé€šè¿‡**ä¸‰æ•°ç»„æ’åº+åŒæŒ‡é’ˆ**å°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°`O(nÂ²)`ï¼Œéå¸¸é€‚åˆç«èµ›åœºæ™¯ã€‚  
  - **æ€è·¯**ï¼šæšä¸¾`minH`ï¼ˆ`a1`æ•°ç»„çš„`h`ï¼‰å’Œ`minV`ï¼ˆ`a2`æ•°ç»„çš„`v`ï¼‰ï¼Œç”¨`a3`æ•°ç»„ï¼ˆæŒ‰`A*h+B*v`æ’åºï¼‰çš„åŒæŒ‡é’ˆ`l2`ç»´æŠ¤æ»¡è¶³`A*h+B*v â‰¤ C+A*minH+B*minV`çš„çƒå‘˜ï¼Œç”¨`l1`æŒ‡é’ˆç»´æŠ¤æ»¡è¶³`vâ‰¥minV`çš„çƒå‘˜ï¼Œç»Ÿè®¡åŒæ—¶æ»¡è¶³`hâ‰¥minH`çš„çƒå‘˜æ•°ã€‚  
  - **ä»£ç è§„èŒƒæ€§**ï¼šå˜é‡åï¼ˆå¦‚`a1`ï¼ˆæŒ‰`h`æ’åºï¼‰ã€`a2`ï¼ˆæŒ‰`v`æ’åºï¼‰ã€`a3`ï¼ˆæŒ‰`A*h+B*v`æ’åºï¼‰ï¼‰å«ä¹‰æ˜ç¡®ï¼Œç»“æ„å·¥æ•´ï¼Œè¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚`l2 < n`ã€`l1 < n`ï¼‰å¤„ç†ä¸¥è°¨ã€‚  
  - **äº®ç‚¹**ï¼šå•è°ƒæ€§è¯æ˜ç¡®ä¿åŒæŒ‡é’ˆç§»åŠ¨çš„æ­£ç¡®æ€§ï¼ˆä¸ä¼šæ¼åˆ æˆ–å¤šåˆ ï¼‰ï¼Œä»£ç å¯ç›´æ¥ç”¨äºç«èµ›ï¼Œå®è·µä»·å€¼é«˜ã€‚


### é¢˜è§£äºŒï¼špigstdï¼ˆèµï¼š10ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**å·®åˆ†ä¼˜åŒ–**éå¸¸å·§å¦™ï¼Œå°†ç»Ÿè®¡é—®é¢˜è½¬åŒ–ä¸ºåŒºé—´æ›´æ–°+å‰ç¼€å’ŒæŸ¥è¯¢ï¼Œç®€åŒ–äº†ä»£ç é€»è¾‘ã€‚  
  - **æ€è·¯**ï¼šæšä¸¾å»é‡åçš„`minH`ï¼ˆå‡å°‘æšä¸¾æ¬¡æ•°ï¼‰ï¼Œå¯¹æ¯ä¸ªçƒå‘˜è®¡ç®—åœ¨è¯¥`minH`ä¸‹`minV`çš„æœ‰æ•ˆèŒƒå›´ï¼ˆ`tl`åˆ°`v[j]`ï¼‰ï¼Œç”¨å·®åˆ†æ•°ç»„æ ‡è®°åŒºé—´ï¼Œæœ€åé€šè¿‡å‰ç¼€å’Œç»Ÿè®¡æ¯ä¸ª`minV`å¯¹åº”çš„ç¬¦åˆæ¡ä»¶çš„çƒå‘˜æ•°ã€‚  
  - **ä»£ç è§„èŒƒæ€§**ï¼šå¤„ç†äº†`B=0`çš„è¾¹ç•Œæƒ…å†µï¼ˆæ­¤æ—¶`minV`çš„èŒƒå›´ä¸º`1`åˆ°`v[j]`ï¼‰ï¼Œæ³¨é‡Šè¯¦ç»†ï¼Œå¯è¯»æ€§é«˜ã€‚  
  - **äº®ç‚¹**ï¼šå·®åˆ†æ€æƒ³çš„åº”ç”¨ï¼Œå°†`O(nÂ²)`çš„ç»Ÿè®¡è¿‡ç¨‹ä¼˜åŒ–ä¸º`O(n)`ï¼Œä»£ç ç®€æ´é«˜æ•ˆã€‚


### é¢˜è§£ä¸‰ï¼šcrashedï¼ˆåˆ†æè¯¦ç»†ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**é€†å‘æšä¸¾**æ€è·¯æ–°é¢–ï¼Œåˆ©ç”¨`H`ä»å¤§åˆ°å°çš„å•è°ƒæ€§ï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚  
  - **æ€è·¯**ï¼šæšä¸¾`minV`ï¼ˆ`p2`æ•°ç»„çš„`v`ï¼‰ï¼Œä»å¤§åˆ°å°æšä¸¾`minH`ï¼ˆ`p1`æ•°ç»„çš„`h`ï¼‰ï¼Œç”¨æ¡¶ç»Ÿè®¡æ»¡è¶³`vâ‰¥minV`çš„çƒå‘˜ï¼Œå†é€šè¿‡`p3`æ•°ç»„ï¼ˆæŒ‰`A*h+B*v`æ’åºï¼‰ç»´æŠ¤`A*h+B*v â‰¤ C+A*minH+B*minV`çš„çƒå‘˜ï¼Œé€æ­¥åŠ å…¥ç¬¦åˆæ¡ä»¶çš„çƒå‘˜ã€‚  
  - **ä»£ç è§„èŒƒæ€§**ï¼šå‡½æ•°å‘½åï¼ˆå¦‚`val`è®¡ç®—`A*h+B*v`ï¼‰æ¸…æ™°ï¼Œæ³¨é‡Šè¯¦ç»†ï¼Œç»“æ„å±‚æ¬¡åˆ†æ˜ã€‚  
  - **äº®ç‚¹**ï¼šé€†å‘æšä¸¾`H`çš„å•è°ƒæ€§åˆ©ç”¨ï¼Œæ¯æ¬¡æ”¾å®½`H`çš„é™åˆ¶ï¼ŒåŠ å…¥æ–°çš„ç¬¦åˆæ¡ä»¶çš„çƒå‘˜ï¼Œå‡å°‘äº†é‡å¤å¤„ç†ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•å°†ä¸‰ä¸ªæ¡ä»¶è½¬åŒ–ä¸ºå¯ç»Ÿè®¡çš„å½¢å¼ï¼Ÿ**  
**åˆ†æ**ï¼š  
é¢˜ç›®è¦æ±‚çš„ä¸‰ä¸ªæ¡ä»¶ï¼ˆ`hâ‰¥minH`ã€`vâ‰¥minV`ã€`A*(h-minH)+B*(v-minV) â‰¤ C`ï¼‰å¯ä»¥è½¬åŒ–ä¸ºï¼š  
- `A*h + B*v â‰¤ C + A*minH + B*minV`ï¼ˆè®°ä¸ºæ¡ä»¶1ï¼‰ï¼›  
- `hâ‰¥minH`ï¼ˆæ¡ä»¶2ï¼‰ï¼›  
- `vâ‰¥minV`ï¼ˆæ¡ä»¶3ï¼‰ã€‚  
é€šè¿‡æ’åºï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¡ä»¶1è½¬åŒ–ä¸ºåŒºé—´æŸ¥è¯¢ï¼ˆå¦‚`a3`æ•°ç»„æŒ‰`A*h+B*v`æ’åºï¼Œç”¨åŒæŒ‡é’ˆæ‰¾â‰¤ä¸Šé™çš„åŒºé—´ï¼‰ï¼Œæ¡ä»¶2å’Œ3è½¬åŒ–ä¸ºç­›é€‰æ¡ä»¶ï¼ˆå¦‚`h`åœ¨`[minH, minH+C/A]`ä¹‹é—´ï¼Œ`vâ‰¥minV`ï¼‰ã€‚  

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå°†å¤æ‚æ¡ä»¶æ‹†è§£ä¸ºæ’åºåçš„åŒºé—´æŸ¥è¯¢ï¼Œæ˜¯ä¼˜åŒ–æšä¸¾é—®é¢˜çš„å…³é”®ã€‚


### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•åˆ©ç”¨å•è°ƒæ€§ä¼˜åŒ–ç»Ÿè®¡è¿‡ç¨‹ï¼Ÿ**  
**åˆ†æ**ï¼š  
å½“æšä¸¾`minH`æˆ–`minV`æ—¶ï¼Œæ¡ä»¶1çš„ä¸Šé™ï¼ˆ`C+A*minH+B*minV`ï¼‰æ˜¯å•è°ƒå˜åŒ–çš„ï¼ˆå¦‚`minH`å¢å¤§æ—¶ï¼Œä¸Šé™å¢å¤§ï¼›`minV`å¢å¤§æ—¶ï¼Œä¸Šé™å¢å¤§ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨**åŒæŒ‡é’ˆ**ç»´æŠ¤ç¬¦åˆæ¡ä»¶çš„åŒºé—´ï¼Œé¿å…æ¯æ¬¡é‡æ–°éå†æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œ`a3`æ•°ç»„æŒ‰`A*h+B*v`æ’åºï¼Œå½“`minV`å¢å¤§æ—¶ï¼Œä¸Šé™å¢å¤§ï¼Œ`l2`æŒ‡é’ˆåªéœ€å‘å³ç§»åŠ¨ï¼Œä¸éœ€è¦å›é€€ã€‚  

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå•è°ƒæ€§æ˜¯åŒæŒ‡é’ˆä¼˜åŒ–çš„åŸºç¡€ï¼Œè¦å­¦ä¼šè¯†åˆ«é—®é¢˜ä¸­çš„å•è°ƒå…³ç³»ã€‚


### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•å¤„ç†è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚`A=0`æˆ–`B=0`ï¼‰ï¼Ÿ**  
**åˆ†æ**ï¼š  
å½“`A=0`æ—¶ï¼Œæ¡ä»¶`A*(h-minH) â‰¤ C`æ’æˆç«‹ï¼Œæ­¤æ—¶`h`çš„é™åˆ¶æ¶ˆå¤±ï¼Œåªéœ€è€ƒè™‘`vâ‰¥minV`å’Œ`B*(v-minV) â‰¤ C`ï¼›å½“`B=0`æ—¶ï¼Œç±»ä¼¼åœ°ï¼Œ`v`çš„é™åˆ¶æ¶ˆå¤±ã€‚åœ¨ä»£ç ä¸­ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†è¿™äº›æƒ…å†µï¼Œé¿å…é™¤ä»¥é›¶æˆ–é€»è¾‘é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œpigstdçš„é¢˜è§£ä¸­ï¼Œå½“`B=0`æ—¶ï¼Œ`tl=1`ï¼ˆ`minV`çš„èŒƒå›´ä¸º`1`åˆ°`v[j]`ï¼‰ã€‚  

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œæ¡ä»¶æ˜¯ä»£ç å¥å£®æ€§çš„å…³é”®ï¼Œè¦æå‰è€ƒè™‘æç«¯æƒ…å†µã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æšä¸¾ä¼˜åŒ–**ï¼šæšä¸¾å¿…é¡»å­˜åœ¨çš„æå€¼ï¼ˆå¦‚`minH`ã€`minV`ï¼‰ï¼Œå‡å°‘æšä¸¾èŒƒå›´ï¼›  
- **æ’åº+åŒæŒ‡é’ˆ**ï¼šåˆ©ç”¨æ’åºåçš„å•è°ƒæ€§ï¼Œç”¨åŒæŒ‡é’ˆå¿«é€Ÿç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„åŒºé—´ï¼›  
- **å·®åˆ†/æ¡¶**ï¼šå°†åŒºé—´ç»Ÿè®¡è½¬åŒ–ä¸ºå·®åˆ†æ›´æ–°æˆ–æ¡¶è®¡æ•°ï¼Œç®€åŒ–ä»£ç é€»è¾‘ï¼›  
- **è¾¹ç•Œå¤„ç†**ï¼šæå‰è€ƒè™‘`A=0`ã€`B=0`ç­‰æç«¯æƒ…å†µï¼Œç¡®ä¿ä»£ç å¥å£®æ€§ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆåŸºäºDDOSvoidçš„é¢˜è§£ï¼‰  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†ä¸‰æ•°ç»„æ’åº+åŒæŒ‡é’ˆçš„æ ¸å¿ƒæ€è·¯ï¼Œæ˜¯`O(nÂ²)`æ—¶é—´å¤æ‚åº¦çš„å…¸å‹å®ç°ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <algorithm>
  using namespace std;

  const int maxn = 5010;
  struct Node { int h, v, s; };
  Node a1[maxn], a2[maxn], a3[maxn];
  int A, B, C, n, ans;

  bool cmp1(Node x, Node y) { return x.h < y.h; }
  bool cmp2(Node x, Node y) { return x.v < y.v; }
  bool cmp3(Node x, Node y) { return x.s < y.s; }

  int main() {
      cin >> n >> A >> B >> C;
      for (int i = 1; i <= n; ++i) {
          cin >> a1[i].h >> a1[i].v;
          a1[i].s = A * a1[i].h + B * a1[i].v;
          a2[i] = a3[i] = a1[i];
      }
      sort(a2 + 1, a2 + n + 1, cmp2); // æŒ‰væ’åº
      sort(a3 + 1, a3 + n + 1, cmp3); // æŒ‰s=A*h+B*væ’åº

      for (int i = 1; i <= n; ++i) { // æšä¸¾minH = a1[i].h
          int minH = a1[i].h;
          int maxH = minH + C / A; // ç”±A*(h-minH) â‰¤ Cæ¨å¯¼
          int l1 = 0, l2 = 0, cnt = 0;
          for (int j = 1; j <= n; ++j) { // æšä¸¾minV = a2[j].v
              int minV = a2[j].v;
              // ç»´æŠ¤a3ä¸­s â‰¤ C + A*minH + B*minVçš„çƒå‘˜
              while (l2 < n && a3[l2+1].s <= C + A*minH + B*minV) {
                  l2++;
                  if (a3[l2].h >= minH && a3[l2].h <= maxH) cnt++;
              }
              // ç»´æŠ¤a2ä¸­v â‰¥ minVçš„çƒå‘˜ï¼ˆç§»é™¤v < minVçš„ï¼‰
              while (l1 < n && a2[l1+1].v < minV) {
                  l1++;
                  if (a2[l1].h >= minH && a2[l1].h <= maxH) cnt--;
              }
              ans = max(ans, cnt);
          }
      }
      cout << ans << endl;
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. è¾“å…¥æ•°æ®å¹¶åˆå§‹åŒ–ä¸‰ä¸ªæ•°ç»„ï¼ˆ`a1`ã€`a2`ã€`a3`ï¼‰ï¼Œåˆ†åˆ«å­˜å‚¨çƒå‘˜çš„`h`ã€`v`ã€`s=A*h+B*v`ï¼›  
  2. å¯¹`a2`æŒ‰`v`æ’åºï¼ˆæšä¸¾`minV`ï¼‰ï¼Œå¯¹`a3`æŒ‰`s`æ’åºï¼ˆå¿«é€Ÿç­›é€‰æ¡ä»¶1ï¼‰ï¼›  
  3. æšä¸¾`minH`ï¼ˆ`a1`çš„`h`ï¼‰ï¼Œè®¡ç®—`maxH`ï¼ˆ`h`çš„ä¸Šé™ï¼‰ï¼›  
  4. æšä¸¾`minV`ï¼ˆ`a2`çš„`v`ï¼‰ï¼Œç”¨åŒæŒ‡é’ˆ`l2`ç»´æŠ¤`a3`ä¸­ç¬¦åˆæ¡ä»¶1çš„çƒå‘˜ï¼Œç”¨`l1`ç»´æŠ¤`a2`ä¸­ç¬¦åˆæ¡ä»¶3çš„çƒå‘˜ï¼Œç»Ÿè®¡åŒæ—¶ç¬¦åˆæ¡ä»¶2çš„çƒå‘˜æ•°`cnt`ï¼›  
  5. æ›´æ–°æœ€å¤§é˜Ÿä¼å¤§å°`ans`ã€‚


### é¢˜è§£ä¸€ï¼ˆDDOSvoidï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šåŒæŒ‡é’ˆç»´æŠ¤ç¬¦åˆæ¡ä»¶çš„åŒºé—´ï¼Œå•è°ƒæ€§ä¼˜åŒ–ç»Ÿè®¡ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  while (l2 < n && a3[l2+1].s <= C + A*minH + B*minV) {
      l2++;
      if (a3[l2].h >= minH && a3[l2].h <= maxH) cnt++;
  }
  while (l1 < n && a2[l1+1].v < minV) {
      l1++;
      if (a2[l1].h >= minH && a2[l1].h <= maxH) cnt--;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `l2`æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œå°†`a3`ä¸­`s`â‰¤ä¸Šé™çš„çƒå‘˜åŠ å…¥å€™é€‰ï¼ŒåŒæ—¶æ£€æŸ¥`h`æ˜¯å¦åœ¨`[minH, maxH]`ä¹‹é—´ï¼ˆç¬¦åˆæ¡ä»¶2ï¼‰ï¼Œè‹¥æ˜¯åˆ™`cnt`åŠ 1ï¼›  
  - `l1`æŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œå°†`a2`ä¸­`v`ï¼œ`minV`çš„çƒå‘˜ä»å€™é€‰ä¸­ç§»é™¤ï¼ŒåŒæ—¶æ£€æŸ¥`h`æ˜¯å¦åœ¨`[minH, maxH]`ä¹‹é—´ï¼Œè‹¥æ˜¯åˆ™`cnt`å‡1ï¼›  
  - åŒæŒ‡é’ˆçš„ç§»åŠ¨æ–¹å‘æ˜¯å•è°ƒçš„ï¼ˆåªèƒ½å‘å³ï¼‰ï¼Œå› æ­¤æ¯ä¸ªçƒå‘˜æœ€å¤šè¢«å¤„ç†ä¸¤æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦`O(n)`ã€‚  

ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒæŒ‡é’ˆçš„å…³é”®æ˜¯**å•è°ƒæ€§**ï¼Œç¡®ä¿æŒ‡é’ˆä¸ä¼šå›é€€ï¼Œä»è€Œä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šåƒç´ çƒé˜Ÿç»„å»ºæ¨¡æ‹Ÿå™¨ï¼ˆFCé£æ ¼ï¼‰  
**è®¾è®¡æ€è·¯**ï¼š  
é‡‡ç”¨8ä½åƒç´ é£æ ¼ï¼ˆç±»ä¼¼ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹ï¼‰ï¼Œç”¨åƒç´ å—è¡¨ç¤ºçƒå‘˜ï¼ˆç»¿è‰²=ç¬¦åˆæ¡ä»¶ï¼Œçº¢è‰²=ä¸ç¬¦åˆï¼Œé»„è‰²=å€™é€‰ï¼‰ï¼ŒåŒæŒ‡é’ˆç”¨é»„è‰²ç®­å¤´æ ‡è®°ï¼Œå³ä¸Šè§’ç”¨å¤§åƒç´ æ•°å­—æ˜¾ç¤ºå½“å‰é˜Ÿä¼å¤§å°ã€‚åŠ å…¥éŸ³æ•ˆï¼ˆå¦‚æšä¸¾`minH`æ—¶çš„â€œå®â€ã€ç§»åŠ¨æŒ‡é’ˆæ—¶çš„â€œæ²™æ²™â€ã€æ‰¾åˆ°æœ€å¤§å€¼æ—¶çš„â€œèƒœåˆ©â€éŸ³æ•ˆï¼‰ï¼Œå¢å¼ºè¶£å‘³æ€§ã€‚


### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¾ç¤º`minH`ï¼ˆå½“å‰æšä¸¾çš„æœ€çŸ®èº«é«˜ï¼‰å’Œ`minV`ï¼ˆå½“å‰æšä¸¾çš„æœ€æ…¢é€Ÿåº¦ï¼‰ï¼Œç”¨åƒç´ æ•°å­—è¡¨ç¤ºï¼›  
   - ä¸­é—´æ˜¾ç¤ºçƒå‘˜åˆ—è¡¨ï¼ˆ10x50çš„åƒç´ ç½‘æ ¼ï¼Œæ¯ä¸ªçƒå‘˜ç”¨2x2åƒç´ å—è¡¨ç¤ºï¼‰ï¼›  
   - å³ä¾§æ˜¾ç¤ºå½“å‰é˜Ÿä¼å¤§å°ï¼ˆç”¨4x4åƒç´ æ•°å­—æ˜¾ç¤ºï¼‰ï¼›  
   - åº•éƒ¨æœ‰â€œå¼€å§‹â€ã€â€œå•æ­¥â€ã€â€œé‡ç½®â€æŒ‰é’®ï¼ˆåƒç´ é£æ ¼ï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - ç‚¹å‡»â€œå¼€å§‹â€ï¼Œæ’­æ”¾8ä½é£æ ¼èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šå¦å…‹å¤§æˆ˜ã€‹çš„BGMï¼‰ï¼›  
   - æšä¸¾`minH`ï¼ˆä»`a1`æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼‰ï¼Œç”¨çº¢è‰²ç®­å¤´æŒ‡å‘å½“å‰`minH`çš„çƒå‘˜ï¼›  
   - æšä¸¾`minV`ï¼ˆä»`a2`æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼‰ï¼Œç”¨è“è‰²ç®­å¤´æŒ‡å‘å½“å‰`minV`çš„çƒå‘˜ã€‚  

3. **åŒæŒ‡é’ˆç§»åŠ¨**ï¼š  
   - `l2`æŒ‡é’ˆï¼ˆé»„è‰²ç®­å¤´ï¼‰å‘å³ç§»åŠ¨ï¼Œå°†`a3`ä¸­`s`â‰¤ä¸Šé™çš„çƒå‘˜æ ‡è®°ä¸ºé»„è‰²ï¼ˆå€™é€‰ï¼‰ï¼›  
   - `l1`æŒ‡é’ˆï¼ˆè“è‰²ç®­å¤´ï¼‰å‘å³ç§»åŠ¨ï¼Œå°†`a2`ä¸­`v`ï¼œ`minV`çš„çƒå‘˜ä»å€™é€‰ä¸­ç§»é™¤ï¼ˆå˜å›çº¢è‰²ï¼‰ï¼›  
   - ç»Ÿè®¡å€™é€‰ä¸­`h`åœ¨`[minH, maxH]`ä¹‹é—´çš„çƒå‘˜ï¼ˆå˜ä¸ºç»¿è‰²ï¼‰ï¼Œæ›´æ–°å³ä¾§çš„é˜Ÿä¼å¤§å°æ•°å­—ï¼ˆæ’­æ”¾â€œæ»´â€çš„éŸ³æ•ˆï¼‰ã€‚  

4. **ç›®æ ‡è¾¾æˆ**ï¼š  
   - å½“æ‰¾åˆ°æ›´å¤§çš„é˜Ÿä¼å¤§å°æ—¶ï¼Œå³ä¾§æ•°å­—é—ªçƒå¹¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³æ•ˆï¼‰ï¼›  
   - æšä¸¾å®Œæ‰€æœ‰`minH`å’Œ`minV`åï¼Œæ˜¾ç¤ºæœ€å¤§é˜Ÿä¼å¤§å°ï¼ˆç”¨é‡‘è‰²åƒç´ æ•°å­—æ˜¾ç¤ºï¼‰ã€‚  

5. **äº¤äº’æ§åˆ¶**ï¼š  
   - â€œå•æ­¥â€æŒ‰é’®ï¼šé€å¸§æ’­æ”¾ç®—æ³•æ­¥éª¤ï¼Œä¾¿äºè§‚å¯Ÿï¼›  
   - â€œé‡ç½®â€æŒ‰é’®ï¼šæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹æ¼”ç¤ºï¼›  
   - é€Ÿåº¦æ»‘å—ï¼šè°ƒæ•´åŠ¨ç”»æ’­æ”¾é€Ÿåº¦ï¼ˆä»â€œæ…¢â€åˆ°â€œå¿«â€ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
æœ¬é¢˜çš„**æšä¸¾+å•è°ƒæ€§ä¼˜åŒ–**æ€è·¯å¯è¿ç§»åˆ°ä»¥ä¸‹åœºæ™¯ï¼š  
- **ä¸‰ç»´ååºé—®é¢˜**ï¼ˆå¦‚æ´›è°·P3810ï¼‰ï¼šéœ€è¦ç»Ÿè®¡æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„å…ƒç´ æ•°é‡ï¼›  
- **åŒºé—´ç»Ÿè®¡é—®é¢˜**ï¼ˆå¦‚æ´›è°·P1908é€†åºå¯¹ï¼‰ï¼šç”¨åŒæŒ‡é’ˆæˆ–å½’å¹¶æ’åºä¼˜åŒ–ï¼›  
- **æå€¼æšä¸¾é—®é¢˜**ï¼ˆå¦‚æ´›è°·P2085äºŒåˆ†+åŒæŒ‡é’ˆï¼‰ï¼šæšä¸¾æå€¼å¹¶ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P3810** - ä¸‰ç»´ååº  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜çš„æ¡ä»¶å¯è½¬åŒ–ä¸ºä¸‰ç»´ååºï¼ˆ`hâ‰¥minH`ã€`vâ‰¥minV`ã€`sâ‰¤ä¸Šé™`ï¼‰ï¼Œç»ƒä¹ è¯¥é¢˜å¯å·©å›ºæ’åº+æ•°æ®ç»“æ„ï¼ˆå¦‚æ ‘çŠ¶æ•°ç»„ï¼‰çš„åº”ç”¨ã€‚  

2. **æ´›è°· P1908** - é€†åºå¯¹  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šé€†åºå¯¹é—®é¢˜ç”¨åˆ°äº†å½’å¹¶æ’åº+åŒæŒ‡é’ˆçš„å•è°ƒæ€§ä¼˜åŒ–ï¼Œä¸æœ¬é¢˜çš„åŒæŒ‡é’ˆæ€è·¯å¼‚æ›²åŒå·¥ã€‚  

3. **æ´›è°· P2085** - äºŒåˆ†+åŒæŒ‡é’ˆ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¯¥é¢˜éœ€è¦æšä¸¾æå€¼ï¼ˆå¦‚æœ€å¤§å¹³å‡å€¼ï¼‰ï¼Œå¹¶ç”¨åŒæŒ‡é’ˆç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„åŒºé—´ï¼Œç»ƒä¹ è¯¥é¢˜å¯å·©å›ºæšä¸¾+åŒæŒ‡é’ˆçš„æŠ€å·§ã€‚  

4. **æ´›è°· P4165** - [SCOI2007]ç»„é˜Ÿï¼ˆæœ¬é¢˜ï¼‰  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå†åšä¸€éæœ¬é¢˜ï¼Œå°è¯•ç”¨ä¸åŒçš„æ€è·¯ï¼ˆå¦‚pigstdçš„å·®åˆ†ä¼˜åŒ–ã€crashedçš„é€†å‘æšä¸¾ï¼‰å®ç°ï¼Œå·©å›ºæ ¸å¿ƒæŠ€å·§ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
**å‚è€ƒç»éªŒ (æ¥è‡ªDDOSvoid)**ï¼š  
â€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ‹…å¿ƒåŒæŒ‡é’ˆçš„å•è°ƒæ€§æ˜¯å¦æ­£ç¡®ï¼Œåæ¥é€šè¿‡ä¸¥æ ¼è¯æ˜ï¼ˆæ¯ä¸ªçƒå‘˜åªä¼šè¢«åŠ å…¥å’Œç§»é™¤ä¸€æ¬¡ï¼‰ï¼Œæ‰ç¡®è®¤äº†ç®—æ³•çš„æ­£ç¡®æ€§ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œ**ç®—æ³•çš„æ­£ç¡®æ€§éœ€è¦ä¸¥æ ¼çš„æ•°å­¦è¯æ˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ç›´è§‰**ã€‚â€  

**ç‚¹è¯„**ï¼š  
è¿™ä½ä½œè€…çš„ç»éªŒå¾ˆé‡è¦ã€‚åœ¨ä½¿ç”¨åŒæŒ‡é’ˆç­‰ä¼˜åŒ–æŠ€å·§æ—¶ï¼Œå¿…é¡»è¯æ˜æŒ‡é’ˆçš„ç§»åŠ¨æ–¹å‘æ˜¯å•è°ƒçš„ï¼Œå¦åˆ™å¯èƒ½å‡ºç°æ¼åˆ¤æˆ–é”™åˆ¤ã€‚ä¾‹å¦‚ï¼Œæœ¬é¢˜ä¸­`l2`æŒ‡é’ˆåªä¼šå‘å³ç§»åŠ¨ï¼Œå› ä¸º`minV`å¢å¤§æ—¶ï¼Œæ¡ä»¶1çš„ä¸Šé™å¢å¤§ï¼Œç¬¦åˆæ¡ä»¶çš„çƒå‘˜åªä¼šå¢å¤šï¼Œä¸ä¼šå‡å°‘ã€‚


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[SCOI2007]ç»„é˜Ÿâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æŒæ¡**æšä¸¾+å•è°ƒæ€§ä¼˜åŒ–**çš„æ ¸å¿ƒæŠ€å·§ï¼Œç†è§£å¦‚ä½•å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºå¯ç»Ÿè®¡çš„å½¢å¼ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­ç»ƒä¹ +æ€è€ƒ+æ€»ç»“**ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š209.60ç§’
# é¢˜ç›®ä¿¡æ¯

# [BalticOI 2013] Palindrome-Free Numbers (Day1)

## é¢˜ç›®æè¿°

æˆ‘ä»¬å®šä¹‰å›æ–‡ä¸²ä¸ºæ­£ç€è¯»åç€è¯»éƒ½ä¸€æ ·çš„æ•°å­—ä¸²ï¼Œå¦‚æœä¸€ä¸ªæ•°å­—ä¸²çš„ä¸€ä¸ªé•¿åº¦å¤§äº $1$ çš„å­ä¸²ä¹Ÿä¸ºå›æ–‡ä¸²çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå®šä¹‰è¿™ä¸ªæ•°å­—ä¸²ä¸ºå›æ–‡ä¸²ã€‚

é¡¾åæ€ä¹‰ï¼Œä¸æ˜¯å›æ–‡ä¸²çš„æ•°å­—ä¸²ä¸ºéå›æ–‡ä¸²ã€‚

ç»™å®š $a,b$ï¼Œæ±‚åŒºé—´ $[a,b]$ ä¸­æœ‰å¤šå°‘ä¸ªæ•°å­—ä¸²ä¸ºéå›æ–‡ä¸²ã€‚

## è¯´æ˜/æç¤º

#### æ•°æ®è§„æ¨¡ä¸çº¦å®š

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$0 \le a \le b \le 10^{18}$ã€‚    
å¯¹äºå…¶ä¸­çš„ $25\%$ çš„æ•°æ®ï¼Œ$b-a \le 10^5$ã€‚

#### è¯´æ˜

ç¿»è¯‘è‡ª [BalticOI 2013 Day1 B Palindrome-Free Numbers](https://boi.cses.fi/files/boi2013_day1.pdf)ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
123 321```

### è¾“å‡º

```
153```

## æ ·ä¾‹ #2

### è¾“å…¥

```
123456789 987654321```

### è¾“å‡º

```
167386971```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[BalticOI 2013] Palindrome-Free Numbers æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ•°ä½åŠ¨æ€è§„åˆ’`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³è¿™é“é¢˜çš„å…³é”®åœ¨äºç†è§£**æ•°ä½DPçš„æ ¸å¿ƒæ€æƒ³**â€”â€”åƒç©è§£è°œæ¸¸æˆæ—¶é€ä½è§£é”æ•°å­—å¯†ç ğŸ”‘ã€‚æˆ‘ä»¬åªéœ€å…³æ³¨å½“å‰ä½ä¸å‰ä¸¤ä½çš„å…³ç³»ï¼šè‹¥å½“å‰ä½â‰ å‰ä¸€ä½ä¸”â‰ å‰ä¸¤ä½ï¼Œåˆ™ä¸ä¼šå½¢æˆå›æ–‡ä¸²ã€‚  
> - **æ ¸å¿ƒéš¾ç‚¹**ï¼šå¤„ç†å‰å¯¼é›¶æ—¶éœ€ç‰¹æ®Šæ ‡è®°ï¼ˆé¿å…è¯¯åˆ¤0ä¸ºæœ‰æ•ˆä½ï¼‰ï¼ŒåŒæ—¶éœ€è®¾è®¡ä¸‰ç»´çŠ¶æ€å­˜å‚¨ï¼ˆå½“å‰ä½ã€å‰ä¸€ä½ã€å‰ä¸¤ä½ï¼‰  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šé‡‡ç”¨**8ä½åƒç´ é£è¿·å®«æ¢ç´¢**åŠ¨ç”»ï¼Œæ•°å­—ä½æ˜¾ç¤ºä¸ºå‘å…‰æ–¹å—ğŸ’ ï¼Œå½“å‰ä½é«˜äº®é—ªçƒã€‚å½“æ•°å­—è¿åè§„åˆ™æ—¶è§¦å‘"å¤±è´¥éŸ³æ•ˆ"ğŸ’¥ï¼ŒæˆåŠŸæ„é€ æ•°å­—æ—¶æ’­æ”¾"èƒœåˆ©éŸ³æ•ˆ"ğŸµã€‚æ§åˆ¶é¢æ¿æ”¯æŒå•æ­¥è°ƒè¯•å’Œè‡ªåŠ¨æ’­æ”¾ï¼ˆè°ƒé€Ÿæ»‘å—ï¼‰ã€‚

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šEuphoricStarï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯ç›´å‡»æœ¬è´¨â€”â€”åˆ©ç”¨"å½“å‰ä½â‰ å‰ä¸¤ä½"çš„æ€§è´¨ç®€åŒ–çŠ¶æ€å®šä¹‰ã€‚ä»£ç é‡‡ç”¨è®°å¿†åŒ–æœç´¢ï¼Œç”¨`pre1/pre2=-1`ä¼˜é›…å¤„ç†å‰å¯¼é›¶ï¼Œé€»è¾‘æ¸…æ™°ï¼ˆæ¨å¯¼ï¼šå‰å¯¼é›¶ä¸å‚ä¸å›æ–‡åˆ¤æ–­ï¼‰ã€‚å˜é‡å‘½åè§„èŒƒï¼ˆ`limit/lead`ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆWAæ•™è®­æé†’æ³¨æ„å‰å¯¼é›¶é™·é˜±ï¼‰ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›ã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šExberï¼‰**  
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§åœ°ç»™å‡ºè¿­ä»£DPè§£æ³•ï¼ˆéä¸»æµä½†å…·å¯å‘æ€§ï¼‰ã€‚çŠ¶æ€`dp[i][j][k]`è¡¨ç¤ºé•¿åº¦ä¸ºiã€é¦–ä½jã€æ¬¡ä½kçš„æ–¹æ¡ˆæ•°ï¼Œé¢„å¤„ç†æ‰€æœ‰é•¿åº¦â‰¤18çš„ç»“æœã€‚äº®ç‚¹åœ¨äºé¿å…é€’å½’å±‚æ•°è¿‡æ·±ï¼Œä½†ä»£ç é‡è¾ƒå¤§ï¼ˆéœ€å•ç‹¬å¤„ç†æ•°ä½æ‹†åˆ†é€»è¾‘ï¼‰ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šchlchlï¼‰**  
* **ç‚¹è¯„**ï¼šæœ€ç®€æ´çš„è®°å¿†åŒ–æœç´¢å®ç°ï¼ˆä»…20è¡Œæ ¸å¿ƒä»£ç ï¼‰ã€‚ç”¨`lst1/lst2=10`åˆå§‹åŒ–è§„é¿è¶Šç•Œï¼Œé€šè¿‡`is0`æ ‡å¿—åŠ¨æ€å¤„ç†å‰å¯¼é›¶ã€‚ç²¾å¦™ä¹‹å¤„ï¼š`(!lead||i)?i:-1`ä¸‰ç›®è¿ç®—ç¬¦åŒæ­¥å¤„ç†çŠ¶æ€è½¬ç§»ï¼Œå ªç§°æ•°ä½DPæ¨¡æ¿ä»£ç ã€‚

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1.  **å…³é”®ç‚¹ï¼šå‰å¯¼é›¶çš„å¹½çµçŠ¶æ€**  
    * **åˆ†æ**ï¼šå‰å¯¼é›¶ï¼ˆå¦‚"0012"ï¼‰ä¸åº”å‚ä¸å›æ–‡åˆ¤æ–­ã€‚ä¼˜è´¨è§£æ³•ç»Ÿä¸€é‡‡ç”¨**è´Ÿå€¼æ ‡è®°æ³•**ï¼ˆè®¾pre1/pre2=-1æˆ–10ï¼‰ï¼Œåœ¨çŠ¶æ€è½¬ç§»ä¸­åŠ¨æ€åˆ¤æ–­ï¼šä»…å½“éå‰å¯¼é›¶æ—¶æ‰æ›´æ–°çœŸå®æ•°å­—ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰å¯¼é›¶æ˜¯æ•°ä½DPçš„"å¹»å½±åˆºå®¢"â€”â€”å­˜åœ¨æ„Ÿä¸ºé›¶å´å½±å“å…¨å±€ï¼

2.  **å…³é”®ç‚¹ï¼šä¸‰ç»´çŠ¶æ€çš„é™ç»´æ‰“å‡»**  
    * **åˆ†æ**ï¼šå›æ–‡åˆ¤æ–­éœ€å‰ä¸¤ä½å†å²è®°å½•ï¼Œä½†ç›´æ¥å­˜å®Œæ•´æ•°å­—ä¼šMLEã€‚è§£æ³•å‡å‹ç¼©ä¸ºä¸¤ä¸ª`int`å˜é‡ï¼ˆpre1/pre2ï¼‰ï¼Œé€šè¿‡**çŠ¶æ€å¤ç”¨**å°†ç©ºé—´é™è‡³O(10Â²Ã—ä½æ•°)ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ•°ä½DPçš„æœ¬è´¨â€”â€”ç”¨æœ‰é™çŠ¶æ€å‹ç¼©æ— é™å¯èƒ½ã€‚

3.  **å…³é”®ç‚¹ï¼šè®°å¿†åŒ–çš„è¾¹ç•Œé™·é˜±**  
    * **åˆ†æ**ï¼šå½“`limit=true`ï¼ˆé«˜ä½æœªé¡¶æ ¼ï¼‰æˆ–`lead=true`ï¼ˆå‰å¯¼é›¶ï¼‰æ—¶ä¸èƒ½ç›´æ¥è®°å¿†åŒ–ï¼Œå¦åˆ™ä¼šæ¼çŠ¶æ€ã€‚å¿…é¡»å¢åŠ åˆ¤å®šæ¡ä»¶ï¼š`if(!limit && !lead) cache[state]`ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè®°å¿†åŒ–æ˜¯å¸¦é”çš„å®ç®±â€”â€”å”¯æœ‰å®Œå…¨è‡ªç”±çš„çŠ¶æ€æ‰èƒ½è¢«å¤ç”¨ï¼

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šé—®é¢˜é™ç»´** - å°†"æ— é•¿åº¦>1å›æ–‡"ç®€åŒ–ä¸º"ç¦æ­¢aa/abaæ¨¡å¼"ï¼Œé¿å…å¤æ‚å›æ–‡åˆ¤å®š
- **æŠ€å·§Bï¼šçŠ¶æ€å‹ç¼©** - ç”¨ä¸¤ä¸ªå˜é‡å­˜å‚¨å†å²ä½ï¼Œè€Œéå®Œæ•´æ•°å­—åºåˆ—
- **æŠ€å·§Cï¼šå‰å¯¼é›¶åˆ†èº«æœ¯** - ç”¨ç‰¹æ®Šå€¼æ ‡è®°ï¼ˆ-1/10ï¼‰ï¼Œä½¿å…¶ä¸å‚ä¸å›æ–‡æ ¡éªŒ

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <cstring>
#include <iostream>
using namespace std;
typedef long long ll;
ll dp[20][11][11]; // è®°å¿†åŒ–ï¼špos, pre1, pre2

ll dfs(int pos, int pre1, int pre2, bool limit, bool lead, string& num) {
    if (pos == num.size()) return 1;
    if (!limit && !lead && dp[pos][pre1][pre2] != -1) 
        return dp[pos][pre1][pre2];
    
    ll res = 0;
    int up = limit ? num[pos] - '0' : 9;
    for (int d = 0; d <= up; d++) {
        if (d == pre1 || d == pre2) continue; // å›æ–‡å†²çª
        int new_pre1 = (lead && d == 0) ? 10 : d; // å‰å¯¼é›¶ä¿æŒå¹½çµæ€
        res += dfs(pos + 1, new_pre1, pre1, limit && (d == up), 
                   lead && (d == 0), num);
    }
    if (!limit && !lead) 
        dp[pos][pre1][pre2] = res;
    return res;
}

ll count(ll x) {
    string s = to_string(x);
    memset(dp, -1, sizeof dp);
    return dfs(0, 10, 10, true, true, s); // åˆå§‹å¹½çµæ€
}
```

**é¢˜è§£ç‰‡æ®µèµæ**  
1. **EuphoricStarï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰**  
   ```cpp
   ans += dfs(pos-1, (!lead||i)?i:-1, pre1, ...); // å¹½çµæ€è½¬æ¢
   ```
   > **è§£è¯»**ï¼š`(!lead||i)`æ˜¯ç‚¹ç›ä¹‹ç¬”â€”â€”å½“å‰å¯¼é›¶å­˜åœ¨ä¸”é€‰0æ—¶ï¼Œä¼ é€’`-1`ä¿æŒå¹½çµæ€ï¼›å¦åˆ™ä¼ é€’çœŸå®æ•°å­—ã€‚å¦‚åŒè§£å¼€"å¹½çµå°å°"ï¼  
   > ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä¸‰ç›®è¿ç®—ç¬¦æ˜¯çŠ¶æ€è½¬ç§»çš„"é‡å­å¼€å…³"ã€‚

2. **Exberï¼ˆè¿­ä»£DPï¼‰**  
   ```cpp
   for(int i=0;i<=9;i++) for(int j=0;j<=9;j++) 
      if(i!=j) dp[2][i][j]=1; // ä¸¤ä½æ•°åˆå§‹åŒ–
   ```
   > **è§£è¯»**ï¼šæ˜¾å¼åˆå§‹åŒ–æ‰€æœ‰ä¸¤ä½æ•°ç»„åˆï¼Œé¿å…é€’å½’æ ˆæº¢å‡ºã€‚ç¼ºç‚¹æ˜¯éœ€å•ç‹¬å¤„ç†æ•°ä½æ‹†åˆ†ï¼Œå¦‚åŒæ‰‹å·¥æ­å»ºæ•°å­—ç§¯æœ¨ã€‚  
   > ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¿­ä»£DPæ˜¯"è‡ªåº•å‘ä¸Šçš„ä¹é«˜"â€”â€”é€å—æ„é€ è§£ç©ºé—´ã€‚

3. **chlchlï¼ˆæè‡´ç®€æ´ï¼‰**  
   ```cpp
   if(is0&&d==0) // å‰å¯¼é›¶å»¶ç»­
      res+=dfs(...,10,10,...); 
   ```
   > **è§£è¯»**ï¼šç”¨å›ºå®šå€¼10è¡¨ç¤ºå¹½çµæ€ï¼Œç»Ÿä¸€åˆå§‹åŒ–ä¸è½¬ç§»ã€‚å¦‚åŒç»™å¹½çµé¢å‘"æ•°å­—èº«ä»½è¯"ï¼  
   > ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä»£ç ç®€æ´æ€§ = é€»è¾‘ç»Ÿä¸€æ€§ Ã— çŠ¶æ€æŠ½è±¡åº¦ã€‚

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  
**ä¸»é¢˜**ï¼š`å¹½çµæ•°å­—è¿·å®«`ï¼ˆ8-bitåƒç´ é£ï¼‰  
**æ ¸å¿ƒé€»è¾‘æ¼”ç¤º**ï¼š  
![](https://via.placeholder.com/400x200?text=Pixel+BFS+Demonstration)  
1. **åœºæ™¯è®¾è®¡**ï¼š  
   - æ•°å­—è·¯å¾„è§†ä¸ºè¿·å®«é€šé“ï¼Œæ¯æ­¥é€‰æ‹©æ•°å­—å³æ‰“å¼€æ–°è·¯å¾„  
   - å¹½çµæ€ï¼ˆå‰å¯¼é›¶ï¼‰æ˜¾ç¤ºä¸ºåŠé€æ˜é¬¼é­‚ğŸ‘»ï¼Œå®ä½“æ•°å­—ä¸ºå‘å…‰æ–¹å—ğŸ’   
   - è¿åè§„åˆ™æ—¶å½“å‰ä½é—ªçƒçº¢å…‰ğŸ’¥å¹¶æ’­æ”¾çˆ†ç ´éŸ³æ•ˆ

2. **å…³é”®åŠ¨ç”»å¸§**ï¼š  
   | æ­¥éª¤ | è§†è§‰è¡¨ç° | éŸ³æ•ˆ |  
   |---|---|---|  
   | é€‰æ‹©æ•°å­— | åƒç´ æ–¹å—ä»é¡¶éƒ¨æ‰è½ | ç”µå­æ»´ç­”å£° |  
   | å¹½çµæ€å»¶ç»­ | é¬¼é­‚é£˜è¿‡å½“å‰ä½ | é£å£°å‘¼å•¸ |  
   | å›æ–‡å†²çª | å½“å‰ä½çˆ†ç‚¸+çº¢è‰²é—ªå…‰ | ç»ç’ƒç ´ç¢å£° |  
   | å®Œæˆæ„é€  | è·¯å¾„ç»½æ”¾å½©è™¹å…‰ğŸŒˆ | èƒœåˆ©å·è§’ |  

3. **äº¤äº’æ§åˆ¶**ï¼š  
   - `å•æ­¥è°ƒè¯•`ï¼šæŒ‰æ–¹å‘é”®é€ä½æ¢ç´¢  
   - `è‡ªåŠ¨æ¼”ç¤º`ï¼šAIå¹½çµè‡ªåŠ¨å¯»è·¯ï¼ˆè°ƒé€Ÿæ»‘å—æ§åˆ¶é€Ÿåº¦ï¼‰  
   - `å…³å¡æŒ‘æˆ˜`ï¼šæ¯æˆåŠŸæ„é€ 1ä¸ªæ•°å­—å¾—1é‡‘å¸ï¼Œé›†é½10é‡‘å¸è§£é”æ–°æ•°å­—çš®è‚¤  

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
1. **æ´›è°· P4124 [CQOI2016]æ‰‹æœºå·ç **  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå¼ºåŒ–æ•°ä½DP+çŠ¶æ€è®¾è®¡ï¼ˆéœ€è®°å½•è¿ç»­å‡ºç°æ¬¡æ•°ï¼‰ï¼Œå®Œç¾è¡”æ¥æœ¬é¢˜æŠ€å·§

2. **æ´›è°· P3413 SAC#1 - èŒæ•°**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜çš„åŒå€ç»éªŒé¢˜ï¼Œæ•°æ®èŒƒå›´æ‰©å¤§è‡³10^1000ï¼ŒæŒ‘æˆ˜é«˜ç²¾åº¦å¤„ç†

3. **æ´›è°· P2657 [SCOI2009] windyæ•°**  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šç®€åŒ–ç‰ˆæ•°ä½DPï¼ˆåªéœ€æ±‚ç›¸é‚»æ•°å­—å·®â‰¥2ï¼‰ï¼Œé€‚åˆå·©å›ºåŸºç¡€çŠ¶æ€è½¬ç§»

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **EuphoricStarçš„è°ƒè¯•ç»å†**ï¼š  
> *"WA 78ptsæ•™è®­ï¼šå‰å¯¼é›¶ä¸èƒ½ç®€å•è®¾ä¸º0ï¼Œå¦åˆ™ä¼šè¯¯åˆ¤'0'ä¸ºæœ‰æ•ˆä½"*  
>   
> **Kayç‚¹è¯„**ï¼š  
> æ­¤ç»éªŒæ­éœ²æ•°ä½DPçš„æ ¸å¿ƒé™·é˜±â€”â€”å‰å¯¼é›¶çš„äºŒå…ƒæ€§ï¼ˆæ•°å€¼æ„ä¹‰ä¸º0ï¼ŒçŠ¶æ€æ„ä¹‰ä¸ºè™šæ— ï¼‰ã€‚è°ƒè¯•æ—¶å¯è¾“å‡º`(pre1,pre2,lead)`ä¸‰å…ƒç»„ï¼Œç”¨çº¸ç¬”æ¨¡æ‹Ÿå°æ•°æ®ï¼ˆå¦‚10~20ï¼‰éªŒè¯çŠ¶æ€è½¬ç§»ã€‚

---

> æŒæ¡æ•°ä½DPå¦‚åŒè·å¾—"æ•°å­—å®‡å®™çš„æ“æ§æƒ"â€”â€”ç”¨æœ‰é™çŠ¶æ€é©¾é©­æ— é™æ•°ä½ã€‚ä¸‹æ¬¡æˆ‘ä»¬å°†æ¢ç´¢æ›´å¤æ‚çš„æ•°ä½çº¦æŸï¼Œä¿æŒå¥½å¥‡ï¼Œç¼–ç¨‹ä¸–ç•Œæ°¸æ— æ­¢å¢ƒï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š86.78ç§’
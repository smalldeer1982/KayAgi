# é¢˜ç›®ä¿¡æ¯

# [NWRRC 2017] Grand Test

## é¢˜ç›®æè¿°

ç»™å®šä¸€å¼  $n$ ä¸ªèŠ‚ç‚¹ $m$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œè¯·åœ¨å›¾ä¸­æ‰¾å‡ºä¸¤ä¸ªç‚¹ $S$ å’Œ $F$ï¼Œä½¿å¾—è¿™ä¸¤ç‚¹é—´è‡³å°‘å­˜åœ¨ä¸‰æ¡ä¸ç›¸äº¤çš„è·¯å¾„ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
6 6
3 6
3 4
1 4
1 2
1 3
2 3
3 1
1 2
```

### è¾“å‡º

```
1 3
3 1 2 3
2 1 3
3 1 4 3
-1
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[NWRRC 2017] Grand Test æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›¾è®ºï¼ˆDFSæ ‘æ€§è´¨ä¸Tarjanç®—æ³•åº”ç”¨ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œå¯»æ‰¾å›¾ä¸­å­˜åœ¨ä¸‰æ¡ä¸ç›¸äº¤è·¯å¾„çš„ç‚¹å¯¹â€é—®é¢˜ï¼Œå…³é”®åœ¨äº**åˆ©ç”¨æ— å‘å›¾DFSæ ‘çš„ç‰¹æ®Šæ€§è´¨**â€”â€”**æ— æ¨ªå‰è¾¹**ï¼ˆåªæœ‰æ ‘è¾¹å’Œè¿”ç¥–è¾¹ï¼‰ã€‚å¯ä»¥æŠŠDFSæ ‘æ¯”ä½œä¸€æ£µâ€œå®¶æ—æ ‘â€ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¯â€œå®¶åº­æˆå‘˜â€ï¼Œæ ‘è¾¹æ˜¯â€œè¡€ç¼˜å…³ç³»â€ï¼Œè¿”ç¥–è¾¹åˆ™æ˜¯â€œè¿œæˆ¿äº²æˆšçš„è”ç³»â€ã€‚å½“ä¸¤æ¡â€œè¿œæˆ¿äº²æˆšçš„è”ç³»â€ï¼ˆè¿”ç¥–è¾¹ï¼‰è¦†ç›–äº†åŒä¸€æ®µâ€œè¡€ç¼˜é“¾â€ï¼ˆæ ‘è¾¹ï¼‰æ—¶ï¼Œè¿™æ®µé“¾çš„ä¸¤ç«¯ç‚¹å°±æœ‰äº†ä¸‰æ¡èµ°æ³•ï¼šç›´æ¥èµ°è¡€ç¼˜é“¾ï¼ˆæ ‘è¾¹ï¼‰ã€èµ°ç¬¬ä¸€æ¡è¿œæˆ¿äº²æˆšçš„è·¯ï¼ˆè¿”ç¥–è¾¹+æ ‘è¾¹ï¼‰ã€èµ°ç¬¬äºŒæ¡è¿œæˆ¿äº²æˆšçš„è·¯ï¼ˆå¦ä¸€æ¡è¿”ç¥–è¾¹+æ ‘è¾¹ï¼‰ã€‚  

**é¢˜è§£æ€è·¯å…±æ€§**ï¼š  
æ‰€æœ‰é¢˜è§£éƒ½åŸºäºâ€œDFSæ ‘+Tarjanç®—æ³•â€çš„æ¡†æ¶ï¼Œé€šè¿‡ä¿®æ”¹Tarjanç®—æ³•ä¸­çš„`low`æ•°ç»„ï¼ˆè®°å½•å­æ ‘èƒ½åˆ°è¾¾çš„æœ€å°dfnåºï¼‰ï¼Œå¢åŠ `low2`ï¼ˆç¬¬äºŒå°çš„dfnåºï¼‰æˆ–`clow`ï¼ˆæ¬¡å°dfnåºï¼‰ï¼Œå½“`low2[u] < dfn[u]`æ—¶ï¼Œè¯´æ˜èŠ‚ç‚¹`u`çš„å­æ ‘ä¸­æœ‰ä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–äº†`u`åˆ°å…¶ç¥–å…ˆçš„è·¯å¾„ï¼Œæ­¤æ—¶`u`å’Œè¯¥ç¥–å…ˆå°±æ˜¯ç¬¦åˆæ¡ä»¶çš„ç‚¹å¯¹ï¼ˆSå’ŒFï¼‰ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼š  
- å¦‚ä½•é«˜æ•ˆæ£€æµ‹â€œä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–åŒä¸€æ®µæ ‘è¾¹â€ï¼Ÿ  
- å¦‚ä½•æ­£ç¡®æ„é€ ä¸‰æ¡ä¸ç›¸äº¤çš„è·¯å¾„ï¼Ÿ  

**è§£å†³æ–¹æ¡ˆ**ï¼š  
- ç”¨`low1`ï¼ˆæœ€å°dfnåºï¼‰å’Œ`low2`ï¼ˆç¬¬äºŒå°dfnåºï¼‰è®°å½•æ¯ä¸ªèŠ‚ç‚¹å­æ ‘èƒ½åˆ°è¾¾çš„ç¥–å…ˆï¼Œå½“`low2[u] < dfn[u]`æ—¶è§¦å‘æ¡ä»¶ï¼›  
- è·¯å¾„æ„é€ é€šè¿‡â€œæ ‘è¾¹+è¿”ç¥–è¾¹â€çš„ç»„åˆï¼šç¬¬ä¸€æ¡æ˜¯ç›´æ¥æ ‘è·¯å¾„ï¼Œç¬¬äºŒæ¡æ˜¯â€œå­èŠ‚ç‚¹â†’è¿”ç¥–è¾¹â†’ç¥–å…ˆâ†’æ ‘è¾¹â€ï¼Œç¬¬ä¸‰æ¡æ˜¯â€œå¦ä¸€å­èŠ‚ç‚¹â†’è¿”ç¥–è¾¹â†’ç¥–å…ˆâ†’æ ‘è¾¹â€ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨8ä½åƒç´ é£æ ¼å±•ç¤ºDFSæ ‘çš„æ„å»ºè¿‡ç¨‹ï¼ˆæ ‘è¾¹ä¸ºç»¿è‰²ï¼ŒèŠ‚ç‚¹ä¸ºé»„è‰²æ–¹å—ï¼‰ï¼Œå½“æ·»åŠ è¿”ç¥–è¾¹æ—¶ï¼ˆçº¢è‰²è™šçº¿ï¼‰ï¼Œé«˜äº®å¯¹åº”çš„æ ‘è¾¹ï¼ˆè“è‰²é—ªçƒï¼‰ã€‚å½“ä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–åŒä¸€æ®µæ ‘è¾¹æ—¶ï¼Œå¼¹å‡ºâ€œæ‰¾åˆ°ç›®æ ‡ç‚¹å¯¹ï¼â€çš„åƒç´ æç¤ºæ¡†ï¼ˆå¸¦éŸ³æ•ˆï¼‰ï¼Œç„¶åç”¨ä¸‰ç§é¢œè‰²ï¼ˆç»¿ã€çº¢ã€è“ï¼‰åŠ¨ç”»å±•ç¤ºä¸‰æ¡è·¯å¾„çš„èµ°å‘ï¼ˆå¦‚ç»¿è‰²æ–¹å—æ²¿æ ‘è¾¹ç§»åŠ¨ï¼Œçº¢è‰²æ–¹å—æ²¿è¿”ç¥–è¾¹+æ ‘è¾¹ç§»åŠ¨ï¼‰ã€‚æ§åˆ¶é¢æ¿åŒ…å«â€œå•æ­¥æ‰§è¡Œâ€ï¼ˆæ¯æ­¥æ˜¾ç¤ºå½“å‰æ“ä½œçš„ä»£ç ç‰‡æ®µï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆå¯è°ƒé€Ÿåº¦ï¼‰ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œä¼´éšâ€œæ ‘è¾¹éå†â€ï¼ˆå“”å£°ï¼‰ã€â€œè¿”ç¥–è¾¹æ·»åŠ â€ï¼ˆå®å£°ï¼‰ã€â€œè·¯å¾„å®Œæˆâ€ï¼ˆèƒœåˆ©éŸ³æ•ˆï¼‰çš„åƒç´ éŸ³æ•ˆã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼šagicyï¼Œæ´›è°·åšå®¢ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„**æ€è·¯æ¸…æ™°åº¦**å ªç§°æ ‡æ†â€”â€”é€šè¿‡ä¿®æ”¹Tarjanç®—æ³•ï¼Œç”¨`low`ï¼ˆæœ€å°dfnåºï¼‰å’Œ`clow`ï¼ˆæ¬¡å°dfnåºï¼‰åˆ†åˆ«è®°å½•èŠ‚ç‚¹å­æ ‘èƒ½åˆ°è¾¾çš„æœ€è¿‘å’Œæ¬¡è¿‘ç¥–å…ˆï¼Œå½“`clow[u] < dfn[u]`æ—¶ï¼Œç›´æ¥é”å®š`u`å’Œå…¶ç¥–å…ˆ`rnk[clow[u]]`ä¸ºè§£ã€‚**ä»£ç è§„èŒƒæ€§**æå¼ºï¼šå˜é‡å`low`ï¼ˆæœ€å°dfnï¼‰ã€`clow`ï¼ˆæ¬¡å°dfnï¼‰ã€`ed`ï¼ˆå¯¹åº”ç«¯ç‚¹ï¼‰å«ä¹‰æ˜ç¡®ï¼Œå¿«é€Ÿè¯»å…¥è¾“å‡ºï¼ˆ`getchar`/`putchar`ä¼˜åŒ–ï¼‰é’ˆå¯¹å¤§è¾“å…¥åœºæ™¯ï¼Œ**å®è·µä»·å€¼**å¾ˆé«˜ã€‚**ç®—æ³•æœ‰æ•ˆæ€§**æ–¹é¢ï¼Œæ—¶é—´å¤æ‚åº¦O(n+m)ï¼Œå®Œå…¨ç¬¦åˆé¢˜ç›®é™åˆ¶ã€‚äº®ç‚¹æ˜¯**å¯¹Tarjanç®—æ³•çš„å·§å¦™æ‰©å±•**ï¼Œå‡†ç¡®æ•æ‰åˆ°äº†â€œä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–åŒä¸€æ®µæ ‘è¾¹â€çš„æ¡ä»¶ï¼Œä¸”è·¯å¾„æ„é€ ï¼ˆ`getPath`å‡½æ•°ï¼‰é€»è¾‘æ¸…æ™°ï¼Œé€šè¿‡åè½¬å’Œåˆå¹¶æ•°ç»„å¾—åˆ°ä¸‰æ¡è·¯å¾„ã€‚


### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼šzcz0263ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„**æ€è·¯åˆ›æ–°æ€§**åœ¨äºç”¨`low1`ï¼ˆæœ€å°dfnï¼‰ã€`low2`ï¼ˆç¬¬äºŒå°dfnï¼‰å’Œ`ed1`ï¼ˆå¯¹åº”ç«¯ç‚¹ï¼‰ã€`ed2`ï¼ˆå¯¹åº”ç«¯ç‚¹ï¼‰çš„ç»„åˆï¼Œæ›´ç›´è§‚åœ°è®°å½•äº†ä¸¤æ¡è¿”ç¥–è¾¹çš„ä¿¡æ¯ã€‚**ä»£ç å¯è¯»æ€§**ä¼˜ç§€ï¼šä½¿ç”¨C++11çš„`basic_string`å¤„ç†è·¯å¾„ï¼ˆå¦‚`getpth`å‡½æ•°è¿”å›è·¯å¾„å­—ç¬¦ä¸²ï¼‰ï¼Œé€šè¿‡`views::reverse`åè½¬è·¯å¾„ï¼Œç®€åŒ–äº†ä»£ç é€»è¾‘ã€‚**ç®—æ³•ä¼˜åŒ–**æ–¹é¢ï¼Œé€’å½’ç»ˆæ­¢æ¡ä»¶ï¼ˆ`if(s|t) return;`ï¼‰é¿å…äº†ä¸å¿…è¦çš„è®¡ç®—ï¼Œ**å®è·µä»·å€¼**çªå‡ºã€‚äº®ç‚¹æ˜¯**è·¯å¾„æ„é€ çš„ç®€æ´æ€§**ï¼Œç”¨å­—ç¬¦ä¸²æ‹¼æ¥ç›´æ¥å¾—åˆ°ä¸‰æ¡è·¯å¾„ï¼Œä»£ç é‡å°‘ä¸”æ˜“ç†è§£ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•æ£€æµ‹â€œä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–åŒä¸€æ®µæ ‘è¾¹â€ï¼Ÿ  
* **åˆ†æ**ï¼š  
  æ— å‘å›¾çš„DFSæ ‘æ²¡æœ‰æ¨ªå‰è¾¹ï¼Œæ‰€æœ‰ç¯éƒ½ç”±æ ‘è¾¹+è¿”ç¥–è¾¹æ„æˆã€‚è¦æ‰¾åˆ°ä¸‰æ¡ä¸ç›¸äº¤è·¯å¾„ï¼Œå¿…é¡»å­˜åœ¨**ä¸¤æ®µè¿”ç¥–è¾¹è¦†ç›–åŒä¸€æ®µæ ‘è¾¹**ã€‚é€šè¿‡ä¿®æ”¹Tarjanç®—æ³•ï¼Œç”¨`low1`ï¼ˆæœ€å°dfnåºï¼‰è®°å½•å­æ ‘èƒ½åˆ°è¾¾çš„æœ€è¿‘ç¥–å…ˆï¼Œ`low2`ï¼ˆç¬¬äºŒå°dfnåºï¼‰è®°å½•æ¬¡è¿‘ç¥–å…ˆï¼Œå½“`low2[u] < dfn[u]`æ—¶ï¼Œè¯´æ˜`u`çš„å­æ ‘ä¸­æœ‰ä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–äº†`u`åˆ°å…¶ç¥–å…ˆçš„è·¯å¾„ï¼ˆ`rnk[low2[u]]`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`low`æ•°ç»„çš„æ‰©å±•æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„å…³é”®ï¼Œå®ƒèƒ½æ•æ‰åˆ°â€œå¤šç¯è¦†ç›–â€çš„æ¡ä»¶ã€‚


### 2. å¦‚ä½•æ„é€ ä¸‰æ¡ä¸ç›¸äº¤çš„è·¯å¾„ï¼Ÿ  
* **åˆ†æ**ï¼š  
  å‡è®¾æ‰¾åˆ°çš„ç‚¹å¯¹æ˜¯`u`ï¼ˆåä»£ï¼‰å’Œ`v`ï¼ˆç¥–å…ˆï¼‰ï¼Œä¸‰æ¡è·¯å¾„åˆ†åˆ«ä¸ºï¼š  
  - ç›´æ¥æ ‘è·¯å¾„ï¼š`u â†’ ... â†’ v`ï¼ˆæ ‘è¾¹ï¼‰ï¼›  
  - ç¬¬ä¸€æ¡è¿”ç¥–è¾¹è·¯å¾„ï¼š`u â†’ ed1[u] â†’ ... â†’ v`ï¼ˆ`ed1[u]`æ˜¯`low1[u]`å¯¹åº”çš„å­èŠ‚ç‚¹ï¼Œé€šè¿‡è¿”ç¥–è¾¹åˆ°`v`ï¼‰ï¼›  
  - ç¬¬äºŒæ¡è¿”ç¥–è¾¹è·¯å¾„ï¼š`u â†’ ed2[u] â†’ ... â†’ v`ï¼ˆ`ed2[u]`æ˜¯`low2[u]`å¯¹åº”çš„å­èŠ‚ç‚¹ï¼Œé€šè¿‡å¦ä¸€æ¡è¿”ç¥–è¾¹åˆ°`v`ï¼‰ã€‚  
  è·¯å¾„æ„é€ çš„æ ¸å¿ƒæ˜¯**åˆ©ç”¨æ ‘è¾¹çš„çˆ¶å­å…³ç³»**ï¼ˆ`fa`æ•°ç»„ï¼‰å’Œ**è¿”ç¥–è¾¹çš„ç«¯ç‚¹è®°å½•**ï¼ˆ`ed1`/`ed2`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè·¯å¾„æ„é€ çš„å…³é”®æ˜¯â€œæ ‘è¾¹+è¿”ç¥–è¾¹â€çš„ç»„åˆï¼Œéœ€è¦æ˜ç¡®æ¯ä¸ªè¿”ç¥–è¾¹å¯¹åº”çš„ç«¯ç‚¹ã€‚


### 3. å¦‚ä½•å¤„ç†å¤§è¾“å…¥åœºæ™¯ï¼Ÿ  
* **åˆ†æ**ï¼š  
  é¢˜ç›®ä¸­`âˆ‘n, âˆ‘m â‰¤ 1e5`ï¼Œæ™®é€šçš„`cin`/`cout`ä¼šè¶…æ—¶ã€‚ä¼˜è´¨é¢˜è§£ä¸­ï¼Œagicyç”¨`getchar`/`putchar`å®ç°å¿«é€Ÿè¯»å…¥è¾“å‡ºï¼Œzcz0263ç”¨`ios::sync_with_stdio(false); cin.tie(nullptr);`å…³é—­åŒæ­¥ï¼Œè¿™äº›ä¼˜åŒ–èƒ½æ˜¾è‘—æå‡ç¨‹åºè¿è¡Œé€Ÿåº¦ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¤§è¾“å…¥åœºæ™¯ä¸‹ï¼Œå¿«é€Ÿè¯»å…¥è¾“å‡ºæ˜¯å¿…é¡»æŒæ¡çš„æŠ€å·§ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **DFSæ ‘æ€§è´¨**ï¼šæ— å‘å›¾çš„DFSæ ‘æ²¡æœ‰æ¨ªå‰è¾¹ï¼Œæ‰€æœ‰ç¯éƒ½ç”±æ ‘è¾¹+è¿”ç¥–è¾¹æ„æˆï¼›  
- **Tarjanæ‰©å±•**ï¼šé€šè¿‡`low1`/`low2`è®°å½•å¤šç¯ä¿¡æ¯ï¼Œæ•æ‰â€œå¤šç¯è¦†ç›–â€çš„æ¡ä»¶ï¼›  
- **è·¯å¾„æ„é€ **ï¼šåˆ©ç”¨`fa`æ•°ç»„ï¼ˆæ ‘è¾¹ï¼‰å’Œ`ed1`/`ed2`ï¼ˆè¿”ç¥–è¾¹ç«¯ç‚¹ï¼‰ç»„åˆè·¯å¾„ï¼›  
- **è¾“å…¥ä¼˜åŒ–**ï¼šå¤§è¾“å…¥åœºæ™¯ä¸‹ï¼Œä½¿ç”¨å¿«é€Ÿè¯»å…¥è¾“å‡ºï¼ˆ`getchar`/`putchar`æˆ–å…³é—­åŒæ­¥ï¼‰ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†agicyå’Œzcz0263çš„æ€è·¯ï¼Œä¿ç•™äº†å¿«é€Ÿè¯»å…¥è¾“å‡ºå’ŒTarjanæ‰©å±•çš„æ ¸å¿ƒé€»è¾‘ï¼Œè·¯å¾„æ„é€ é‡‡ç”¨`vector`ç®€åŒ–ä»£ç ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  using namespace std;

  const int MAXN = 1e5 + 5;
  vector<int> G[MAXN];
  int dfn[MAXN], low1[MAXN], low2[MAXN], ed1[MAXN], ed2[MAXN], fa[MAXN], rnk[MAXN];
  int tim, s, t, n, m;

  void tarjan(int u, int father) {
      fa[u] = father;
      dfn[u] = low1[u] = low2[u] = ++tim;
      rnk[tim] = u;
      ed1[u] = ed2[u] = u;
      for (int v : G[u]) {
          if (v == father) continue;
          if (!dfn[v]) {
              tarjan(v, u);
              if (low1[v] < low1[u]) {
                  low2[u] = low1[u];
                  ed2[u] = ed1[u];
                  low1[u] = low1[v];
                  ed1[u] = ed1[v];
              } else if (low1[v] < low2[u]) {
                  low2[u] = low1[v];
                  ed2[u] = ed1[v];
              }
          } else {
              if (dfn[v] < low1[u]) {
                  low2[u] = low1[u];
                  ed2[u] = ed1[u];
                  low1[u] = dfn[v];
                  ed1[u] = u;
              } else if (dfn[v] < low2[u]) {
                  low2[u] = dfn[v];
                  ed2[u] = u;
              }
          }
          if (low2[u] < dfn[u]) {
              s = u;
              t = rnk[low2[u]];
          }
      }
  }

  vector<int> getPath(int son, int father) {
      vector<int> res;
      for (int p = son; p != father; p = fa[p])
          res.push_back(p);
      res.push_back(father);
      reverse(res.begin(), res.end());
      return res;
  }

  int main() {
      ios::sync_with_stdio(false);
      cin.tie(nullptr);
      int T;
      cin >> T;
      while (T--) {
          cin >> n >> m;
          for (int i = 1; i <= n; ++i)
              G[i].clear();
          for (int i = 0; i < m; ++i) {
              int u, v;
              cin >> u >> v;
              G[u].push_back(v);
              G[v].push_back(u);
          }
          tim = 0;
          fill(dfn + 1, dfn + n + 1, 0);
          s = t = 0;
          for (int i = 1; i <= n; ++i)
              if (!dfn[i])
                  tarjan(i, 0);
          if (!s || !t) {
              cout << "-1\n";
              continue;
          }
          cout << s << " " << t << "\n";
          vector<int> path1 = getPath(t, s);
          cout << path1.size() << " ";
          for (int x : path1) cout << x << " ";
          cout << "\n";
          vector<int> path2 = getPath(s, ed1[s]);
          vector<int> tmp = getPath(rnk[low1[s]], t);
          path2.insert(path2.end(), tmp.begin(), tmp.end());
          cout << path2.size() << " ";
          for (int x : path2) cout << x << " ";
          cout << "\n";
          vector<int> path3 = getPath(s, ed2[s]);
          path3.push_back(t);
          cout << path3.size() << " ";
          for (int x : path3) cout << x << " ";
          cout << "\n";
      }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  ä»£ç åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š`tarjan`å‡½æ•°ï¼ˆè®¡ç®—`low1`/`low2`å’Œ`ed1`/`ed2`ï¼‰ã€`getPath`å‡½æ•°ï¼ˆè·å–æ ‘è·¯å¾„ï¼‰ã€`main`å‡½æ•°ï¼ˆå¤„ç†è¾“å…¥è¾“å‡ºå’Œè·¯å¾„æ„é€ ï¼‰ã€‚`tarjan`å‡½æ•°é€šè¿‡é€’å½’éå†å›¾ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å°å’Œæ¬¡å°dfnåºï¼›`getPath`å‡½æ•°é€šè¿‡`fa`æ•°ç»„å›æº¯æ ‘è·¯å¾„ï¼›`main`å‡½æ•°å¤„ç†å¤šç»„æµ‹è¯•æ•°æ®ï¼Œè°ƒç”¨`tarjan`æ‰¾åˆ°è§£åï¼Œæ„é€ ä¸‰æ¡è·¯å¾„å¹¶è¾“å‡ºã€‚


### é¢˜è§£ä¸€ï¼ˆagicyï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šå¿«é€Ÿè¯»å…¥è¾“å‡ºä¼˜åŒ–ï¼Œ`clow`/`ced`è®°å½•æ¬¡å°dfnåºã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  inline int read(void) {
      reg char ch = getchar();
      reg int res = 0;
      while (!isdigit(ch)) ch = getchar();
      while (isdigit(ch)) res = 10 * res + (ch ^ '0'), ch = getchar();
      return res;
  }

  inline void write(reg int x) {
      static char buf[32];
      reg int p = -1;
      if (x < 0) x = -x, putchar('-');
      if (!x) putchar('0');
      else while (x) buf[++p] = (x % 10) ^ '0', x /= 10;
      while (~p) putchar(buf[p--]);
      return;
  }

  inline void tarjan(reg int u, reg int father) {
      fa[u] = father;
      dfn[u] = low[u] = clow[u] = ++tim;
      rnk[tim] = u;
      ed[u] = ced[u] = u;
      for (int v : G[u])
          if (v != father) {
              if (!dfn[v]) {
                  tarjan(v, u);
                  if (low[v] < low[u]) {
                      clow[u] = low[u], ced[u] = ed[u];
                      low[u] = low[v], ed[u] = ed[v];
                  } else if (low[v] < clow[u])
                      clow[u] = low[v], ced[u] = ed[v];
              } else {
                  if (dfn[v] < low[u]) {
                      clow[u] = low[u], ced[u] = ed[u];
                      low[u] = dfn[v], ed[u] = u;
                  } else if (dfn[v] < clow[u])
                      clow[u] = dfn[v], ced[u] = u;
              }
          }
      if (!s && !t && clow[u] < dfn[u])
          s = u, t = rnk[clow[u]];
      return;
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `read`/`write`å‡½æ•°ï¼šç”¨`getchar`/`putchar`å®ç°å¿«é€Ÿè¯»å…¥è¾“å‡ºï¼Œé¿å…`cin`/`cout`çš„è¶…æ—¶é—®é¢˜ï¼›  
  - `tarjan`å‡½æ•°ï¼š`low`è®°å½•æœ€å°dfnåºï¼Œ`clow`è®°å½•æ¬¡å°dfnåºï¼Œ`ed`/`ced`è®°å½•å¯¹åº”ç«¯ç‚¹ï¼Œå½“`clow[u] < dfn[u]`æ—¶ï¼Œ`u`å’Œ`rnk[clow[u]]`æ˜¯è§£ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¿«é€Ÿè¯»å…¥è¾“å‡ºæ˜¯å¤„ç†å¤§è¾“å…¥çš„å¿…å¤‡æŠ€å·§ï¼Œ`low`/`clow`çš„ç»„åˆèƒ½æœ‰æ•ˆæ•æ‰â€œå¤šç¯è¦†ç›–â€çš„æ¡ä»¶ã€‚


### é¢˜è§£äºŒï¼ˆzcz0263ï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼š`basic_string`å¤„ç†è·¯å¾„ï¼Œ`views::reverse`ç®€åŒ–åè½¬ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  auto getpth = [&](int u, int v) -> basic_string<int> {
      basic_string<int> res;
      for (; v != u; v = fa[v]) res += v;
      res += v;
      reverse(all(res));
      return res;
  };

  if (s && t) {
      cout << s << " " << t << "\n";
      prt(getpth(t, s) | views::reverse);
      prt(getpth(s, ed1[s]) + getpth(rnk[low1[s]], t));
      prt(getpth(s, ed2[s]) + t);
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `getpth`å‡½æ•°ï¼šç”¨`basic_string`å­˜å‚¨è·¯å¾„ï¼Œé€šè¿‡`fa`æ•°ç»„å›æº¯ï¼Œ`reverse`åè½¬å¾—åˆ°ä»`u`åˆ°`v`çš„è·¯å¾„ï¼›  
  - è·¯å¾„æ„é€ ï¼š`getpth(t, s) | views::reverse`å¾—åˆ°ä»`s`åˆ°`t`çš„æ ‘è·¯å¾„ï¼Œ`getpth(s, ed1[s]) + getpth(rnk[low1[s]], t)`å¾—åˆ°ç»è¿‡ç¬¬ä¸€æ¡è¿”ç¥–è¾¹çš„è·¯å¾„ï¼Œ`getpth(s, ed2[s]) + t`å¾—åˆ°ç»è¿‡ç¬¬äºŒæ¡è¿”ç¥–è¾¹çš„è·¯å¾„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`basic_string`æ¯”`vector`æ›´é€‚åˆå¤„ç†è·¯å¾„æ‹¼æ¥ï¼Œ`views::reverse`èƒ½ç®€åŒ–åè½¬æ“ä½œã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**â€œåƒç´ æ¢é™©å®¶â€å¯»æ‰¾ä¸‰æ¡è·¯å¾„**ï¼ˆä»¿FCã€Šå¡å°”è¾¾ä¼ è¯´ã€‹é£æ ¼ï¼‰


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
- **åœºæ™¯åˆå§‹åŒ–**ï¼š8ä½åƒç´ é£æ ¼çš„ç½‘æ ¼åœ°å›¾ï¼ŒèŠ‚ç‚¹ä¸ºé»„è‰²æ–¹å—ï¼ˆå¸¦ç¼–å·ï¼‰ï¼Œæ ‘è¾¹ä¸ºç»¿è‰²çº¿æ¡ï¼Œè¿”ç¥–è¾¹ä¸ºçº¢è‰²è™šçº¿ï¼›  
- **DFSæ ‘æ„å»º**ï¼šæ¢é™©å®¶ï¼ˆè“è‰²æ–¹å—ï¼‰ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œæ²¿æ ‘è¾¹éå†ï¼Œæ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å˜ä¸ºç»¿è‰²ï¼ˆå·²è®¿é—®ï¼‰ï¼›  
- **è¿”ç¥–è¾¹æ·»åŠ **ï¼šå½“æ¢é™©å®¶é‡åˆ°å·²è®¿é—®çš„èŠ‚ç‚¹ï¼ˆéçˆ¶èŠ‚ç‚¹ï¼‰æ—¶ï¼Œç»˜åˆ¶çº¢è‰²è™šçº¿ï¼ˆè¿”ç¥–è¾¹ï¼‰ï¼Œå¹¶é«˜äº®å¯¹åº”çš„æ ‘è¾¹ï¼ˆè“è‰²é—ªçƒï¼‰ï¼›  
- **ç›®æ ‡æ£€æµ‹**ï¼šå½“ä¸¤æ¡è¿”ç¥–è¾¹è¦†ç›–åŒä¸€æ®µæ ‘è¾¹æ—¶ï¼Œå¼¹å‡ºâ€œæ‰¾åˆ°ç›®æ ‡ï¼S=Xï¼ŒF=Yâ€çš„åƒç´ æç¤ºæ¡†ï¼ˆå¸¦â€œå®â€çš„éŸ³æ•ˆï¼‰ï¼›  
- **è·¯å¾„æ¼”ç¤º**ï¼šç”¨ä¸‰ç§é¢œè‰²çš„æ¢é™©å®¶ï¼ˆç»¿ã€çº¢ã€è“ï¼‰åˆ†åˆ«æ²¿ä¸‰æ¡è·¯å¾„ç§»åŠ¨ï¼Œæ¯æ­¥æ˜¾ç¤ºå½“å‰è·¯å¾„çš„ä»£ç ç‰‡æ®µï¼ˆå¦‚`getPath(s, ed1[s])`ï¼‰ï¼Œå®Œæˆåæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„8ä½éŸ³ä¹ï¼‰ã€‚


### äº¤äº’ä¸æ§åˆ¶  
- **æ§åˆ¶é¢æ¿**ï¼šä½äºå±å¹•ä¸‹æ–¹ï¼ŒåŒ…å«â€œå¼€å§‹/æš‚åœâ€ï¼ˆçº¢è‰²æŒ‰é’®ï¼‰ã€â€œå•æ­¥æ‰§è¡Œâ€ï¼ˆè“è‰²æŒ‰é’®ï¼‰ã€â€œé‡ç½®â€ï¼ˆé»„è‰²æŒ‰é’®ï¼‰ã€é€Ÿåº¦æ»‘å—ï¼ˆ1-10å€é€Ÿï¼‰ï¼›  
- **AIè‡ªåŠ¨æ¼”ç¤º**ï¼šç‚¹å‡»â€œè‡ªåŠ¨æ’­æ”¾â€æŒ‰é’®ï¼Œæ¢é™©å®¶ä¼šè‡ªåŠ¨å®ŒæˆDFSéå†å’Œè·¯å¾„æ¼”ç¤ºï¼Œç±»ä¼¼â€œè´ªåƒè›‡AIâ€ï¼›  
- **ä¿¡æ¯å±•ç¤º**ï¼šå±å¹•å³ä¾§æ˜¾ç¤ºå½“å‰`low1`/`low2`çš„å€¼ï¼ˆåƒç´ æ•°å­—ï¼‰ï¼Œä»¥åŠå½“å‰æ“ä½œçš„è§£é‡Šï¼ˆå¦‚â€œæ·»åŠ è¿”ç¥–è¾¹ï¼Œè¦†ç›–æ ‘è¾¹1-2â€ï¼‰ã€‚


### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆæ°›å›´ï¼Œé™ä½å­¦ä¹ å‹åŠ›ï¼›  
- **éŸ³æ•ˆåé¦ˆ**ï¼šå…³é”®æ“ä½œï¼ˆå¦‚è¿”ç¥–è¾¹æ·»åŠ ã€è·¯å¾„å®Œæˆï¼‰çš„éŸ³æ•ˆèƒ½å¼ºåŒ–è®°å¿†ï¼›  
- **åŠ¨ç”»åˆ†æ­¥**ï¼šå•æ­¥æ‰§è¡Œè®©å­¦ä¹ è€…æ¸…æ™°çœ‹åˆ°æ¯ä¸€æ­¥çš„å˜åŒ–ï¼Œè‡ªåŠ¨æ’­æ”¾åˆ™å±•ç¤ºæ•´ä½“æµç¨‹ï¼›  
- **ä»£ç åŒæ­¥**ï¼šæ¯æ­¥åŠ¨ç”»å¯¹åº”ä»£ç ç‰‡æ®µï¼Œå¸®åŠ©å­¦ä¹ è€…å°†è§†è§‰æ•ˆæœä¸ä»£ç é€»è¾‘å…³è”ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **ç¯æ£€æµ‹**ï¼šæ— å‘å›¾ä¸­å¯»æ‰¾ç¯çš„æ•°é‡ã€å¤§å°ï¼›  
- **è·¯å¾„è®¡æ•°**ï¼šè®¡ç®—ä¸¤ç‚¹é—´çš„è·¯å¾„æ•°é‡ï¼ˆä¸ç›¸äº¤/è¾¹ä¸é‡å¤ï¼‰ï¼›  
- **è¾¹è¦†ç›–**ï¼šå¯»æ‰¾è¦†ç›–æ‰€æœ‰è¾¹çš„æœ€å°è·¯å¾„é›†åˆï¼ˆå¦‚ä¸­å›½é‚®è·¯é—®é¢˜ï¼‰ã€‚


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P7025** - [NWRRC 2017] Grand Test  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŸé¢˜ï¼Œå·©å›ºâ€œDFSæ ‘+Tarjanæ‰©å±•â€çš„åº”ç”¨ï¼Œç†Ÿæ‚‰è·¯å¾„æ„é€ é€»è¾‘ã€‚  
2. **æ´›è°· CF521E** - [Cycle in Maze]  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŒå€ç»éªŒé¢˜ï¼ŒåŒæ ·è€ƒå¯Ÿæ— å‘å›¾çš„ç¯æ£€æµ‹å’Œè·¯å¾„æ„é€ ï¼Œéš¾åº¦é€‚ä¸­ã€‚  
3. **æ´›è°· P3387** - [å¼ºè¿é€šåˆ†é‡]  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè™½ç„¶æ˜¯æœ‰å‘å›¾ï¼Œä½†Tarjanç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ä¸€è‡´ï¼Œæ‹“å±•å¯¹â€œlowâ€æ•°ç»„çš„ç†è§£ã€‚  
4. **æ´›è°· P1656** - [ç‚¸é“è·¯]  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè€ƒå¯Ÿæ— å‘å›¾çš„è¾¹åŒè¿é€šåˆ†é‡ï¼Œä¸æœ¬é¢˜çš„â€œç¯è¦†ç›–â€æ€è·¯ç›¸å…³ï¼Œæå‡ç»¼åˆåº”ç”¨èƒ½åŠ›ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒ (æ¥è‡ª agicy)  
> â€œæˆ‘åœ¨è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæœ€åˆæ²¡æœ‰è€ƒè™‘åˆ°æ¬¡å°dfnåºçš„é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•æ•æ‰åˆ°ä¸¤æ¡è¿”ç¥–è¾¹çš„æƒ…å†µã€‚åæ¥é€šè¿‡ä¿®æ”¹Tarjanç®—æ³•ï¼Œå¢åŠ äº†`clow`æ•°ç»„ï¼Œæ‰æ­£ç¡®æ‰¾åˆ°äº†è§£ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼ŒTarjanç®—æ³•çš„`low`æ•°ç»„å¯ä»¥æ ¹æ®é—®é¢˜éœ€æ±‚è¿›è¡Œæ‰©å±•ï¼Œå…³é”®æ˜¯è¦ç†è§£`low`æ•°ç»„çš„å«ä¹‰â€”â€”å­æ ‘èƒ½åˆ°è¾¾çš„æœ€å°dfnåºã€‚â€  

**ç‚¹è¯„**ï¼šagicyçš„ç»éªŒå¾ˆå…¸å‹ã€‚åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œ**å¯¹ç®—æ³•æ ¸å¿ƒæ•°ç»„çš„æ‰©å±•**æ˜¯è§£å†³å¤æ‚é—®é¢˜çš„å…³é”®ã€‚`low`æ•°ç»„çš„æœ¬è´¨æ˜¯â€œå­æ ‘çš„å¯è¾¾æ€§â€ï¼Œé€šè¿‡æ‰©å±•`low`æ•°ç»„ï¼ˆå¦‚`low1`/`low2`ï¼‰ï¼Œå¯ä»¥æ•æ‰åˆ°æ›´å¤šçš„å›¾ç»“æ„ä¿¡æ¯ï¼ˆå¦‚å¤šç¯è¦†ç›–ï¼‰ã€‚


### å‚è€ƒç»éªŒ (æ¥è‡ª zcz0263)  
> â€œæˆ‘ç”¨`basic_string`å¤„ç†è·¯å¾„ï¼Œæ˜¯å› ä¸ºå®ƒçš„`+`è¿ç®—ç¬¦å¯ä»¥ç›´æ¥æ‹¼æ¥è·¯å¾„ï¼Œæ¯”`vector`çš„`insert`æ›´æ–¹ä¾¿ã€‚å¦å¤–ï¼Œ`views::reverse`åè½¬è·¯å¾„ï¼Œä»£ç æ›´ç®€æ´ã€‚â€  

**ç‚¹è¯„**ï¼šzcz0263çš„æŠ€å·§å€¼å¾—å­¦ä¹ ã€‚**é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„**èƒ½ç®€åŒ–ä»£ç é€»è¾‘ï¼Œ`basic_string`é€‚åˆå¤„ç†åºåˆ—æ‹¼æ¥ï¼Œ`views`åº“çš„å‡½æ•°èƒ½å‡å°‘ä»£ç é‡ã€‚


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[NWRRC 2017] Grand Testâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£**DFSæ ‘çš„æ€§è´¨**å’Œ**Tarjanç®—æ³•çš„æ‰©å±•åº”ç”¨**ã€‚è®°ä½ï¼Œç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äº**æŒç»­å­¦ä¹ ã€å‹¤äºæ€è€ƒå’Œå‹‡äºå®è·µ**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š197.32ç§’
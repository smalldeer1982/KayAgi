# 题目信息

# [THUPC 2021] 群星连结

## 题目背景

众所周知，群星和公主连结联动啦！联动的结果是一个叫做群星连结的游戏。

这是一个双人回合制竞赛游戏，双方记为 Alice 和 Bob。游戏有若干**回合**，每个回合依次由先手和后手分别行动一次。

现在聪明的你写了一个优秀的 AI 来玩这个游戏，这个 AI 会遵从游戏规则，并且按照游戏过程条目里既定的策略进行游戏。但是由于您太强了，所以世界上只有这么一个 AI，所以只能自己和自己打。

现在给定这个游戏的初始局面，让这个 AI 分别作为 Alice 和 Bob 对战，其中 Alice 先手。你需要模拟游戏过程，并且判断最终是 Alice 获胜还是 Bob 获胜。

游戏初始局面会通过输入给出。

**【提示】**

本题中，**伤害**、**真实伤害**、**生命值扣除**是三个不同的概念，请注意区分。

## 题目描述

#### 基础参数

首先，在游戏开始之前，每个玩家需要选择恰好 $n$ 个角色，并编号 $1,2,3,\dots,n$。

每个角色都有一些基础参数：

1. $HP,hp$ ：最大生命值，生命值；
2. $MP,mp$：最大能量值，能量值；
3. $atk,\Delta_{atk}$：基础攻击力，攻击力增益；
4. $def,\Delta_{def}$：基础防御力，防御力增益；

另外，为方便起见，下文中记 $A=\max(atk+\Delta_{atk},1)$，$D=\max(def+\Delta_{def},0)$。

游戏开始时，生命值 $hp$ 等于最大生命值 $HP$，能量值 $mp$、攻击力增益 $\Delta_{atk}$、防御力增益 $\Delta_{def}$ 均等于 $0$。

$HP,MP,atk,def$ 将由输入给出。

除此之外，每个角色分别拥有一个**天赋**和一个**技能**，分别见**天赋**条目和**技能**条目。

#### 死亡判定

游戏过程的任意时刻，如果某个角色生命值 $hp$ 降到 $0$ **及**以下，则判定该角色【死亡】。

一个角色一旦被判定为【死亡】，则该角色将从场上完全退出，并且生命值被恒定为 $0$，不能通过任何方式回复生命值（即不能起死回生，即使拥有【天赋 — 心胜于物】；另外，也不能通过己方其它角色技能回复生命值），不能普通攻击、发动技能，也不能被选定为优先目标，因而不能被普通攻击。

总之就是不以任何形式参与后续游戏的进程，并且本题中所有“全体”、“所有角色”等词均不包含【死亡】角色。

当某方角色全部被判定【死亡】时，游戏立刻结束，并判定另一方胜利（若此时仍有尚未完成的结算，也全部不再进行）。

#### 参数溢出

在游戏过程的任意时刻，如果某个角色的生命值 $hp>HP$，则 $hp$ 会立刻变成为 $HP$。

在游戏过程的任意时刻，如果某个角色的能量值 $mp>MP$，则 $mp$ 会立刻变成为 $MP$。

#### 优先目标

游戏开始前，每个玩家需要为每个角色选定一个攻击顺序。

具体来说，对编号为 $i$ 的角色，需要确定一个攻击顺序 $p_{i,1},\ldots,p_{i,n}$，满足 $p_{i,1},\ldots,p_{i,n}$ 是一个关于 $1,\ldots,n$ 的排列。

游戏过程的任意时刻，称编号为 $i$ 的优先目标是 $p_{i,j}$，当且仅当 $p_{i,1},\ldots,p_{i,j-1}$ 全部【死亡】，并且 $p_{i,j}$ 没有【死亡】。

#### 普通攻击

普通攻击会对优先目标造成 $A$ 点伤害。

拥有【天赋 — 超凡入圣】的角色则会对优先目标造成 $A$ 点真实伤害。详见**天赋**条目。

拥有【天赋 — 星河力量投射】的角色普通攻击会附加真实伤害。详见**天赋**条目。

#### 天赋

天赋有以下几种类型（每行前的编号为天赋类型的编号，圆括弧 `()` 内部为附加参数）：

0. 【天赋 — 我自闭了】该角色的天赋毫无作用；
1. 【天赋 — 血肉皮囊】该角色免疫一半真实伤害。详情见**生命值扣除环节**条目。  
   **真实伤害见生命值扣除条目**；
2. 【天赋 — 星河力量投射】$(x)$ 该角色每次普通攻击会附加的 $x$ 点真实伤害；
3. 【天赋 — 心胜于物】$(x,y)$ 该角色每次己方行动结束后回复 $x$ 点生命值，并**额外**回复 $y$ 点能量值；
4. 【天赋 — 超凡入圣】该角色的普通攻击被视为真实伤害攻击，即该角色的普通攻击不造成伤害，但造成 $A$ 点真实伤害。
5. 【天赋 — 科技至上】$(x,y)$ 该角色每次进行普通攻击后，回复 $x$ 点生命值；该角色每次发动技能后，**额外**回复 $y$ 点能量值。注意：如果普通攻击或发动技能造成对方全部角色【死亡】，则该角色不再回复生命值或能量值。

本题保证天赋附加参数均为**正**整数（但在输入数据中可能会有 $0$，详情参见**输入格式**条目）。

#### 技能

当某个角色能量值等于其最大能量值时（并且在游戏过程中被选定为发动技能的角色），可以清零其能量值并发动一次技能。

技能有以下几种类型（每行前的编号为技能类型的编号，圆括弧` ()` 内部为附加参数）：

0. 【技能：心态崩了！】该角色的主动技能毫无作用。注意，该技能仍然可以被发动，只不过毫无效果而已。
1. 【技能：格林炸裂！】$(x)$ 对敌方**所有**角色造成 $x$ 点伤害，**然后**使敌方**所有**角色能量值减少 $\left\lfloor\frac{mp_{enemy}}{10}\right\rfloor$，其中 $mp_{enemy}$ 为敌方该角色能量值（即对于每个敌方角色，若其当前的能量值为 $mp_{enemy}$，那么受此技能影响，其能量值会变成 $mp_{enemy}-\left\lfloor\frac{mp_{enemy}}{10}\right\rfloor$）。注意，根据规则，敌方角色会先受到伤害而进入生命值扣除环节，在该环节中回复能量值，然后再被该技能扣除能量值。
2. 【技能：日 (zhou) 昇 (ji) 之 (dao) 雨 (dan)！】对敌方**所有**角色造成 $A$ 点真实伤害。
3. 【技能：天楼霸断剑！】$(x)$ 对敌方**所有**目标造成 $\min\left(\left\lfloor\frac{HP_{enemy}}{10}\right\rfloor,x\times A\right)$ 点伤害，其中 $HP_{enemy}$ 为被攻击目标的最大生命值。
4. 【技能：演出开始！】$(x,y)$ 设当前为第 $t$ 回合，则从发动技能开始，到第 $t+x-1$ 回合结束期间，在己方行动结束时，己方全体角色**额外**回复 $y$ 点能量值。
5. 【技能：天狼噬斩！】$(x)$ 将优先目标的防御力增益减小 $x$，**然后**对优先目标造成 $A$ 点真实伤害。
6. 【技能：地 (太) 球 (虚) 蓝 (苍) 色 (蓝) 闪 (闪) 电！】$(x,y)$ 对优先目标造成 $A$ 点真实伤害。另外，设当前为第 $t$ 回合，则从发动技能开始，到第 $t+x-1$ 回合结束期间，敌方所有角色攻击力增益减小 $y$。
7. 【技能：极光绽放！】$(x,y,z)$ 使己方未【死亡】角色生命值最低（如有多个，则编号最小）的恰好一名角色回复 $z$ 点生命值。另外，设当前为第 $t$ 回合，则从发动技能开始到第 $t+x-1$ 回合结束期间，己方所有角色攻击力增益增大 $y$。
8. 【技能：流星！】$(x,y)$ 对敌方所有角色造成 $A$ 点伤害。设当前为第 $t$ 回合，则**从该技能造成伤害后**，到第 $t+x-1$ 回合结束期间，使敌方所有角色防御力增益减小 $y$。注意，本技能先造成伤害，再产生减益。
9. 【技能：精灵庇护！】$(x,y,z)$ 己方全体角色回复 $z$ 点生命值。设当前为第 $t$ 回合，则从发动技能开始，到第 $t+x-1$ 回合结束期间，己方所有角色防御力增益增大 $y$。
10. 【技能：全力超全开！轮回之终末！】$(x)$ 己方所有角色基础攻击力 $atk$、基础防御力 $def$ 变为原先的两倍 $2\times atk, 2\times def$；未【死亡】角色生命值 $hp$ 变为 $\max\left(\left\lfloor\frac{HP}2\right\rfloor,hp\right)$，能量值 $mp$ 变为 $\max\left(\left\lfloor\frac{MP}2\right\rfloor,mp\right)$；设当前为第 $t$ 回合，则从发动技能开始，到第 $t+x-1$ 回合结束期间，己方行动结束时，己方所有角色**额外**回复 $1$ 点能量值。在第 $t+x-1$ 回合结束时，若敌方仍有角色未【死亡】，则己方全体角色强制生命值清零，并被判定为【死亡】。另外，在发动该技能时，场上所有拥有这个技能的角色（包括自己）的技能将被强制替换为 0 号【技能：心态崩了！】（因此该技能最多在游戏中被发动一次）。

本题保证技能附加参数均为**正**整数（但在输入数据中可能会有 $0$，详情参见**输入**条目）。

注意：上述形如“设当前为第 $t$ 回合，则从发动技能开始到第 $t+x-1$ 回合结束期间，……”产生的效果是**可以叠加**的。

#### 生命回复与能量回复

生命值仅可通过天赋和技能回复。

己方行动结束时，己方全体角色能量值增加 $1$。拥有【天赋 — 心胜于物】的角色，以及受【技能：演出开始！】和【技能：全力超全开！轮回之终末！】影响的角色可以额外回复能量值。

当己方角色进行普通攻击或者发动技能后，该角色能量值增加 $1$。拥有【天赋 — 科技至上】的角色发动技能后会回复额外的能量值。

注意，发动技能时，先扣除全部能量值，再发动技能，然后再增加能量值。

特别的，若该技能为【技能：全力超全开！轮回之终末！】，则使发动该技能的角色 $mp=\max\left(mp,\left\lfloor\frac{MP}2\right\rfloor\right)$ 后再增加能量值。

当己方角色因受到伤害而进入生命值扣除环节时，该角色能量值增加 $1$（无论其是否实际扣除生命值）。

**生命值扣除见生命值扣除环节。**

#### 生命值扣除环节

当角色受到伤害或者真实伤害时，该角色立即进入生命值扣除环节（注意，即使受到了 $0$ 点伤害，也会进入生命值扣除环节）。

进入生命值扣除环节后，由能量回复条目，该角色能量值增加 $1$。

假设其受到 $x$ 点伤害和 $y$ 点真实伤害，那么：

- 若该角色因拥有【天赋—血肉皮囊】而免疫一半真实伤害，则其生命值扣除 $\max(x-D,0)+y-\left\lfloor\frac y2\right\rfloor$。
- 否则，其生命值扣除 $\max(x-D,0)+y$。

#### 游戏过程

游戏开始后，可视为若干回合，编号从 $1$ 开始。

每个回合，可以划分为如下 $5$ 个阶段：Alice 行动（期间）、Alice 行动结束、Bob 行动（期间）、Bob 行动结束、当前回合结束。

己方行动期间，

1. 如果己方存在至少一个角色可以发动技能时，则按照技能编号从大到小的顺序选择其中一位发动技能。如果有多个角色满足可以发动相同编号的技能，则选择这些角色中角色编号最大的角色发动技能。
2. 如果己方没有角色可以发动技能，则选择一个优先目标生命值最高的角色发动普通攻击。如果有多个角色的优先目标生命值最高，则选择能对优先目标扣除更多生命值（而不是造成更多伤害！）的角色发动攻击。如果仍然有多个角色可以选择，则选择其中编号最大的角色发动普通攻击。

己方行动结束。

注意，己方行动期间，仅能选择一位角色发动技能，或者选择一位角色进行普通攻击。

## 说明/提示

**【数据范围】**

$n \le 10$，$HP, MP, atk \gt 0$，$def \ge 0$。

保证在游戏中的任意时刻，所有题面中提及到的参数及表达式的绝对值均不超过 ${10}^9$。

保证游戏在 $23333$ 回合内结束。

**【题目来源】**

来自 2021 清华大学学生程序设计竞赛暨高校邀请赛（THUPC2021）。

题解等资源可在 [https://github.com/yylidiw/thupc_2/tree/master](https://github.com/yylidiw/thupc_2/tree/master) 查看。

## 样例 #1

### 输入

```
3
2 8 1 1
1 2 3
3 1 1
7 2 1 2
6 6 3 0
1 2 3
5 1 1
7 2 1 1
99 10 1 1
2 1 3
1 0 0
10 10 0 0
9 10 1 0
1 2 3
2 1 0
8 2 1 0
8 7 2 1
2 1 3
1 0 0
4 2 1 0
99 10 2 0
2 1 3
1 0 0
10 10 0 0
```

### 输出

```
15
Alice
2 0 96 
```

# AI分析结果



---
# 💡 Kay的C++算法解析：群星连结 深入学习指南 💡

<introduction>
今天我们要挑战的是THUPC 2021中的“群星连结”题目！这是一道超详细的回合制游戏模拟题，需要我们严格按照规则模拟角色的行动、技能释放、状态变化等过程。通过这份指南，你将掌握大模拟题的核心思路和关键技巧，一起来看看吧！
</introduction>

## 1. 题目解读与核心算法识别

✨ **本题主要考察**：`模拟`（编程技巧应用）

🗣️ **初步分析**：
解决“群星连结”的关键在于**严格按照题目规则逐步模拟游戏过程**。模拟就像“按剧本演戏”——每个回合有固定的5个阶段（Alice行动→Alice结束→Bob行动→Bob结束→回合结束），每个阶段需要处理角色的技能/普攻选择、状态更新（如增益/减益）、生命/能量回复等。

- **题解思路**：所有优质题解均采用“结构体/类存储角色信息+分阶段处理”的思路。例如，用`struct role`保存角色的HP、MP、天赋、技能等参数；用独立函数处理技能释放（如`jn_x`函数）、普攻（如`work_pg`函数）、死亡判定（如`work_death`函数）。
- **核心难点**：
  1. **状态管理**：技能带来的持续增益/减益（如“演出开始！”技能的额外回蓝）需要记录生效回合，结束时清除；
  2. **多条件行动选择**：技能释放需按编号从大到小选择，普攻需选优先目标生命值最高的角色；
  3. **边界条件**：角色死亡后立即退出游戏，且不能参与后续操作（如“鞭尸”攻击）。
- **可视化设计**：计划采用8位像素风格动画，用不同颜色标记角色状态（绿色代表存活，灰色代表死亡）、技能效果（蓝色光晕表示回蓝增益）。每一步操作伴随“叮”的音效，技能释放时用闪烁动画突出。控制面板支持单步执行、自动播放（可调节速度），同步显示当前代码片段（如技能选择逻辑）。

---

## 2. 精选优质题解参考

<eval_intro>
通过评估思路清晰度、代码规范性、算法有效性等维度，以下题解值得重点参考：
</eval_intro>

**题解一：kyBWE（赞18）**
* **点评**：这份题解对模拟流程的拆解非常清晰。作者定义了`role`结构体存储角色所有参数，并用`targetrole`结构体管理优先目标。在处理技能和天赋时，将逻辑拆分为独立函数（如技能单独写函数），代码结构工整。特别值得学习的是调试经验总结（如“变量未初始化导致数组越界”），对避免常见错误有直接帮助。

**题解二：Mys_C_K（出题人，赞9）**
* **点评**：出题人题解强调“阶段划分”，将游戏流程明确分为行动开始、行动结束、回合结束，代码逻辑与题目描述高度匹配。作者提到“先搞事后结算”，即每个阶段结束后统一处理状态（如增益效果），这种设计减少了逻辑混乱，适合作为大模拟的框架参考。

**题解三：Naptie（Java题解，赞6）**
* **点评**：Java题解采用面向对象设计，用`Player`、`Character`、`Talent`、`Skill`类封装数据，代码可读性强。例如，`Character`类包含`calcHurt`方法计算伤害，`Skill`类用`switch`处理不同技能逻辑，体现了良好的模块化思想，适合学习如何用OOP简化大模拟。

---

## 3. 核心难点辨析与解题策略

<difficulty_intro>
模拟题的核心在于“细节”，以下是三个关键难点及应对策略：
</difficulty_intro>

1.  **关键点1：状态管理（如增益/减益效果）**
    * **分析**：技能（如“演出开始！”）会在`t`到`t+x-1`回合内生效，需记录每个效果的结束回合。优质题解通常用“时间线数组”（如`bonus[t][type]`）记录每回合的增益值，回合结束时清除过期效果。
    * 💡 **学习笔记**：用“差分”或“时间戳”记录效果的生效区间，避免重复计算。

2.  **关键点2：多条件行动选择（技能vs普攻）**
    * **分析**：技能释放需选编号最大的可释放角色（同编号选角色ID最大），普攻需选优先目标生命值最高（同生命选扣血最多，同扣血选角色ID最大）。题解中通常用两次遍历实现：第一次找技能，第二次找普攻，每一步严格按规则比较。
    * 💡 **学习笔记**：用临时变量保存当前最优选择（如`max_skill`、`best_attack`），遍历时动态更新。

3.  **关键点3：死亡判定与游戏结束**
    * **分析**：角色死亡后需立即标记为`islive=false`，并检查对方是否全灭。题解中通常用`work_death`函数处理死亡，若对方存活数为0则抛出异常结束游戏。
    * 💡 **学习笔记**：每次扣血后调用死亡检查函数，避免“漏判”或“延迟判”。

### ✨ 解题技巧总结
- **模块化设计**：将技能、普攻、死亡判定等逻辑拆分为独立函数，降低代码复杂度（如kyBWE的`jn_x`函数处理技能）。
- **变量初始化**：所有临时变量（如`max_skill`）初始化为“不可能值”（如-1），避免未初始化错误（参考kyBWE的调试经验）。
- **边界测试**：针对死亡、HP/MP溢出等边界条件，手动构造测试用例（如“技能10发动后强制死亡”），确保逻辑正确。

---

## 4. C++核心代码实现赏析

<code_intro_overall>
大模拟的核心在于“结构清晰”，以下是综合多个优质题解的通用核心实现：
</code_intro_overall>

**本题通用核心C++实现参考**
* **说明**：此代码综合了kyBWE和Mys_C_K的题解思路，用结构体管理角色信息，分阶段处理回合流程。
* **完整核心代码**：
    ```cpp
    #include <iostream>
    #include <vector>
    #include <algorithm>
    using namespace std;

    struct Role {
        long long HP, maxHP, MP, maxMP;
        long long atk, delta_atk, def, delta_def;
        int talent, t_x, t_y; // 天赋及参数
        int skill, s_x, s_y, s_z; // 技能及参数
        int id; // 角色编号
        bool islive; // 是否存活
        vector<int> attack_order; // 攻击优先级数组
        int current_target; // 当前优先目标

        Role() : HP(0), maxHP(0), MP(0), maxMP(0), atk(0), delta_atk(0), def(0), delta_def(0),
                 talent(0), t_x(0), t_y(0), skill(0), s_x(0), s_y(0), s_z(0), id(0), islive(true) {}
    };

    struct Team {
        vector<Role> roles; // 角色列表
        int id; // 队伍ID（1:Alice，2:Bob）
        vector<vector<long long>> bonus; // 增益数组，bonus[t][type]表示第t回合的增益（type:0=回蓝，1=攻击，2=防御）
    };

    // 计算当前攻击目标
    int get_target(const Role& role, const Team& enemy) {
        for (int p : role.attack_order) {
            if (enemy.roles[p-1].islive) return p-1; // 注意数组索引从0开始
        }
        return -1; // 理论上不会触发（游戏未结束）
    }

    // 处理死亡判定
    bool check_death(Role& role, Team& enemy) {
        if (role.HP <= 0) {
            role.islive = false;
            role.HP = 0;
            // 检查对方是否全灭
            int alive = 0;
            for (auto& r : enemy.roles) if (r.islive) alive++;
            return alive == 0;
        }
        return false;
    }

    // 主模拟函数
    void simulate(Team& alice, Team& bob) {
        int round = 0;
        while (round <= 23333) {
            round++;
            // Alice行动阶段
            // 选择技能或普攻（简化逻辑，仅示例）
            // ...（实际需实现技能选择、普攻选择等逻辑）
            // 检查游戏是否结束
            int alice_alive = 0, bob_alive = 0;
            for (auto& r : alice.roles) if (r.islive) alice_alive++;
            for (auto& r : bob.roles) if (r.islive) bob_alive++;
            if (alice_alive == 0 || bob_alive == 0) break;
        }
        // 输出结果
    }

    int main() {
        // 输入处理（略）
        Team alice, bob;
        simulate(alice, bob);
        return 0;
    }
    ```
* **代码解读概要**：代码用`Role`结构体存储角色所有属性，`Team`管理队伍和增益。`get_target`函数计算当前优先目标，`check_death`处理死亡判定。主函数`simulate`控制回合流程，核心逻辑需补充技能/普攻选择等细节。

---
<code_intro_selected>
下面以kyBWE题解的技能处理片段为例，分析核心逻辑：
</code_intro_selected>

**题解一：kyBWE（来源：洛谷题解）**
* **亮点**：技能处理独立为函数，逻辑清晰，注释详细。
* **核心代码片段**：
    ```cpp
    void work_jn(int now, int p) { // now:队伍，p:角色索引
        Role& c = (now == 1) ? Alice[p] : Bob[p];
        c.MP = 0; // 发动技能前清空能量
        switch (c.skill) {
            case 1: { // 格林炸裂！
                for (auto& enemy : (now == 1) ? Bob : Alice) {
                    if (!enemy.islive) continue;
                    // 造成伤害并进入生命扣除环节
                    int damage = c.s_x;
                    int real_damage = 0;
                    work_decrease(enemy, damage, real_damage);
                    // 扣除能量：mp -= floor(mp/10)
                    enemy.MP -= enemy.MP / 10;
                    if (enemy.MP < 0) enemy.MP = 0;
                }
                break;
            }
            // 其他技能...
        }
        c.MP += 1; // 发动技能后回1点能量
        if (c.talent == 5) c.MP += c.t_y; // 科技至上天赋额外回蓝
    }
    ```
* **代码解读**：
  - `work_jn`函数处理技能释放：先清空能量，再根据技能类型执行效果（如技能1对敌方全体造成伤害并扣蓝）。
  - `work_decrease`函数处理生命扣除（包括回蓝和天赋减伤），确保符合题目规则。
  - 技能释放后，根据天赋“科技至上”额外回蓝，细节处理到位。
* 💡 **学习笔记**：技能处理需严格按题目描述的顺序（如技能1先造成伤害，再扣蓝），用`switch`分情况实现。

---

## 5\. 算法可视化：像素动画演示 (核心部分)

<visualization_intro>
为了直观理解游戏流程，我们设计一个“像素回合剧场”动画，用8位风格展示角色行动、技能效果和状态变化！
</visualization_intro>

  * **动画演示主题**：`像素回合剧场——群星连结之战`

  * **核心演示内容**：模拟Alice和Bob的回合，展示技能释放（如“格林炸裂！”的范围攻击）、普攻（如“超凡入圣”的真实伤害）、增益效果（如“演出开始！”的回蓝光晕）。

  * **设计思路简述**：采用FC红白机风格，用色块表示角色（Alice红，Bob蓝），灰色表示死亡。技能释放时用闪烁动画+音效（“咻——”），增益效果用持续的蓝色光晕标记。控制面板支持单步/自动播放，同步高亮对应代码行（如技能选择逻辑）。

  * **动画帧步骤与交互关键点**：

    1.  **场景初始化**：
        - 屏幕分为左右两栏（Alice/Bob队伍），每栏显示角色ID、HP/MP条（绿色表示当前值）。
        - 控制面板：开始/暂停、单步、重置按钮；速度滑块（1x-5x）。
        - 播放8位风格BGM（如《超级马力欧》经典旋律）。

    2.  **Alice行动阶段**：
        - 角色列表按技能编号降序排列，当前选中角色（如技能10）用黄色边框高亮。
        - 技能释放时，角色头顶显示技能图标（如“💥”代表格林炸裂），敌方角色HP条减少，伴随“嘭！”音效。
        - 普攻时，角色向优先目标（红色箭头指向）发射像素子弹，目标HP条减少，伴随“啪！”音效。

    3.  **状态更新阶段**：
        - 回蓝：角色MP条增加，伴随“滴”音效。
        - 增益效果：角色周围出现蓝色光晕（表示“演出开始！”的额外回蓝），光晕持续到对应回合结束。

    4.  **游戏结束**：
        - 一方全灭时，胜利方角色跳跃庆祝，播放“胜利！”音效，屏幕显示“Alice/Bob胜利”。

  * **旁白提示**：
    - （技能选择时）“当前选择技能编号最大的角色，注意技能10释放后会改变基础属性！”
    - （普攻时）“优先目标生命值最高的角色被选中，扣血后需检查是否死亡哦~”

<visualization_conclusion>
通过这样的动画，你可以“看到”每个回合的关键操作，理解技能和天赋如何影响角色状态，比看代码更直观！
</visualization_conclusion>

-----

## 6\. 拓展练习与相似问题思考

<similar_problems_intro>
大模拟题的核心是“按规则编码”，以下题目能帮你巩固相关能力：
</similar_problems_intro>

  * **通用思路/技巧迁移**：
    - 本题的“状态管理”技巧（如时间线数组）可用于“P7075 儒略日”（处理日期变化）；
    - “多条件选择逻辑”可用于“P2482 猪国杀”（处理玩家行动优先级）；
    - “死亡判定与游戏结束”可用于“P5006 大美江湖”（处理角色存活状态）。

  * **练习推荐 (洛谷)**：
    1.  **洛谷 P7075 儒略日**  
        * 🗣️ **推荐理由**：需要严格模拟日期计算，练习状态管理和边界条件处理。
    2.  **洛谷 P2482 猪国杀**  
        * 🗣️ **推荐理由**：多玩家行动优先级选择，与本题的技能/普攻选择逻辑类似。
    3.  **洛谷 P5006 大美江湖**  
        * 🗣️ **推荐理由**：处理角色存活状态和技能效果，巩固死亡判定逻辑。

-----

## 7\. 学习心得与经验分享 (若有)

<insights_intro>
题解中作者们的调试经验非常宝贵，以下是关键总结：
</insights_intro>

> **参考经验 (来自 kyBWE)**：“变量未初始化导致数组越界；复制技能代码时少改了一个名字，卡了42分。”
>
> **点评**：这些错误提醒我们，大模拟题需重视变量初始化（如`max_skill`初始化为-1），复制代码后要逐行检查！调试时可打印关键变量（如当前技能编号、优先目标），快速定位问题。

-----

<conclusion>
“群星连结”是大模拟的典型代表，关键在于“细致”和“耐心”。通过理解角色状态、技能逻辑，结合模块化代码设计，你一定能征服这类题目！下次我们再挑战更难的算法题，加油~ 💪
</conclusion>

-----

---
处理用时：167.99秒
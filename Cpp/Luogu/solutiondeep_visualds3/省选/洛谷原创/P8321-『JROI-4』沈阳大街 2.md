# é¢˜ç›®ä¿¡æ¯

# ã€JROI-4ã€æ²ˆé˜³å¤§è¡— 2

## é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„åºåˆ— $A,B$ï¼Œæ»¡è¶³ï¼š

* $\forall 1\le i<n,A_i \ge A_{i+1}$ 

* $A_n\ge \min\limits_{i=1}^n(B_i)$

$\pi$ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ’åˆ—ï¼Œå®šä¹‰ä»·å€¼å‡½æ•° $f(\pi)$ï¼š

$$
f(\pi)=\prod_{i=1}^n\min(A_i,B_{\pi(i)})
$$

æ¯ç§æ’åˆ—å‡ºç°çš„æ¦‚ç‡ç›¸ç­‰ï¼Œæ±‚ $f(\pi)$ çš„æœŸæœ›å¯¹ $998244353$ å–æ¨¡çš„ç»“æœã€‚

å³æ±‚:

$$
\left(\dfrac{1}{n!}\sum_\pi f(\pi)\right) \bmod 998244353
$$


## è¯´æ˜/æç¤º

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•ã€‚**

|  å­ä»»åŠ¡ç¼–å· | åˆ†å€¼ | ç‰¹æ®Šé™åˆ¶ |
| :-----------: | :---:| :-----------: |
| 1 | 5 | $1\le n\le 8$ |
| 2 | 35 | $1\le n\le 50$ |
| 3 | 20 | $A_n\ge \max\limits_{i=1}^n(B_i)$ |
| 4 | 40 | æ—  |

å¯¹äº $100\%$ çš„æ•°æ®æ»¡è¶³ $1\le n\le 5000$ï¼Œ$1\le A_i,B_i\le 10^9$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
8
15 14 13 10 9 6 3 2 
2 10 8 2 9 1 10 2 ```

### è¾“å‡º

```
114102208```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šã€JROI-4ã€æ²ˆé˜³å¤§è¡— 2 æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šåŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰ä¹‹**é…å¯¹åºåˆ—æ¨¡å‹**  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œåœ¨äºæŠŠâ€œæ±‚æ‰€æœ‰æ’åˆ—çš„minä¹˜ç§¯æœŸæœ›â€è½¬åŒ–ä¸º**æœ‰åºåºåˆ—ä¸Šçš„é…å¯¹é—®é¢˜**ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼šå‡è®¾æˆ‘ä»¬æœ‰ä¸€å †çº¢è‰²ï¼ˆæ¥è‡ªAåºåˆ—ï¼‰å’Œè“è‰²ï¼ˆæ¥è‡ªBåºåˆ—ï¼‰çš„ç§¯æœ¨ï¼Œæ¯ä¸ªç§¯æœ¨ä¸Šæœ‰ä¸€ä¸ªæ•°å­—ã€‚æˆ‘ä»¬éœ€è¦æŠŠçº¢è‰²å’Œè“è‰²ç§¯æœ¨ä¸€ä¸€é…å¯¹ï¼Œæ¯å¯¹çš„è´¡çŒ®æ˜¯è¾ƒå°çš„é‚£ä¸ªæ•°å­—â€”â€”ä½†å¦‚æœæˆ‘ä»¬**æŠŠæ‰€æœ‰ç§¯æœ¨æŒ‰æ•°å­—ä»å¤§åˆ°å°æ’åº**ï¼Œé‚£ä¹ˆæ¯å¯¹çš„è´¡çŒ®ä¸€å®šæ˜¯åå¤„ç†çš„é‚£ä¸ªç§¯æœ¨ï¼ˆå› ä¸ºå‰é¢çš„éƒ½æ›´å¤§ï¼‰ï¼  

åŸºäºè¿™ä¸ªè§‚å¯Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨**åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰**æ¥é€æ­¥è®¡ç®—æ‰€æœ‰å¯èƒ½çš„é…å¯¹è´¡çŒ®ï¼š  
- æŠŠAå’ŒBåˆå¹¶æˆä¸€ä¸ªåºåˆ—ï¼Œæ ‡è®°æ¯ä¸ªå…ƒç´ çš„â€œé¢œè‰²â€ï¼ˆAæˆ–Bï¼‰ï¼Œç„¶åä»å¤§åˆ°å°æ’åºï¼›  
- å®šä¹‰`f[i][j]`ä¸º**å‰iä¸ªå…ƒç´ ä¸­é…å¯¹äº†jå¯¹çš„æ€»è´¡çŒ®å’Œ**ï¼ˆæ‰€æœ‰å¯èƒ½é…å¯¹æ–¹å¼çš„è´¡çŒ®ä¹˜ç§¯ä¹‹å’Œï¼‰ï¼›  
- è½¬ç§»æ—¶ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸¤ç§é€‰æ‹©ï¼š  
  1. **ä¸é…å¯¹**ï¼šç›´æ¥ç»§æ‰¿`f[i-1][j]`ï¼ˆç•™åˆ°åé¢å¤„ç†ï¼‰ï¼›  
  2. **é…å¯¹**ï¼šå¦‚æœå½“å‰å…ƒç´ æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆå¯ä»¥å’Œå‰é¢æœªé…å¯¹çš„è“è‰²å…ƒç´ é…å¯¹ï¼Œè´¡çŒ®ä¸º`f[i-1][j-1] Ã— å½“å‰å…ƒç´ å€¼ Ã— å‰©ä½™å¯é…å¯¹çš„è“è‰²å…ƒç´ æ•°é‡`ï¼ˆåŒç†è“è‰²å…ƒç´ é…å¯¹çº¢è‰²ï¼‰ã€‚  

**æ ¸å¿ƒéš¾ç‚¹**ï¼šå¦‚ä½•å°†minçš„ä¹˜ç§¯è½¬åŒ–ä¸ºæœ‰åºåºåˆ—çš„è´¡çŒ®ï¼Œä»¥åŠæ­£ç¡®è®¡ç®—â€œå¯é…å¯¹çš„å¼‚è‰²å…ƒç´ æ•°é‡â€ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šé€šè¿‡æ’åºå›ºå®šè´¡çŒ®çš„â€œå½’å±â€ï¼ˆå½“å‰å…ƒç´ æ˜¯é…å¯¹ä¸­çš„è¾ƒå°å€¼ï¼‰ï¼Œå¹¶ç”¨å‰ç¼€å’Œæ•°ç»„ç»Ÿè®¡å‰é¢çš„å¼‚è‰²å…ƒç´ æ•°é‡ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šOtomachi_Una_ï¼ˆèµï¼š20ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£æ˜¯æœ¬é¢˜çš„**æ ‡å‡†æ­£è§£**ï¼Œæ€è·¯æ¸…æ™°åˆ°â€œä¸€çœ‹å°±æ‡‚â€ï¼ä½œè€…å®Œç¾è´¯å½»äº†â€œåˆå¹¶æ’åº+é…å¯¹DPâ€çš„æ ¸å¿ƒé€»è¾‘ï¼š  
  - é¦–å…ˆå°†Aå’ŒBåˆå¹¶æˆä¸€ä¸ªåºåˆ—ï¼Œæ ‡è®°é¢œè‰²åä»å¤§åˆ°å°æ’åºï¼ˆè¿™ä¸€æ­¥ç›´æ¥è§£å†³äº†minçš„è´¡çŒ®é—®é¢˜ï¼‰ï¼›  
  - ç”¨`cnt`æ•°ç»„ç»Ÿè®¡å‰iä¸ªå…ƒç´ ä¸­Aã€Bçš„æ•°é‡ï¼Œå¿«é€Ÿå¾—åˆ°â€œå¯é…å¯¹çš„å¼‚è‰²å…ƒç´ æ•°é‡â€ï¼›  
  - DPçŠ¶æ€`f[i][j]`çš„è½¬ç§»ä¸¥æ ¼éµå¾ªâ€œé…å¯¹/ä¸é…å¯¹â€çš„é€»è¾‘ï¼Œä»£ç ä¸­çš„æ¨¡è¿ç®—å’Œé€†å…ƒå¤„ç†ä¹Ÿéå¸¸è§„èŒƒã€‚  
  ä»£ç çš„å¯è¯»æ€§å’Œæ•ˆç‡éƒ½å¾ˆé«˜ï¼Œæ˜¯å­¦ä¹ æœ¬é¢˜çš„**é¦–é€‰å‚è€ƒ**ã€‚  


### é¢˜è§£äºŒï¼šDaidlyï¼ˆèµï¼š7ï¼‰  
* **ç‚¹è¯„**ï¼šä½œè€…çš„æ€è·¯å’Œé¢˜è§£ä¸€ä¸€è‡´ï¼Œä½†åœ¨**çŠ¶æ€å®šä¹‰**ä¸Šæ›´å¼ºè°ƒâ€œå‰iå¤§çš„å€¼æœ‰jå¯¹åŒ¹é…â€ï¼Œå¹¶æ˜ç¡®æŒ‡å‡ºé¢˜ç›®ç»™å‡ºçš„Aåºåˆ—å•è°ƒæ€§å¯¹æ­£è§£æ— ç”¨â€”â€”è¿™å¸®åŠ©æˆ‘ä»¬è·³å‡ºé¢˜ç›®æ¡ä»¶çš„â€œå¹²æ‰°â€ï¼Œèšç„¦æ ¸å¿ƒé€»è¾‘ã€‚ä»£ç ä¸­çš„`cnt[i]`è®¡ç®—ç¨æ˜¾ç®€æ´ï¼Œä½†æœ¬è´¨å’Œé¢˜è§£ä¸€çš„`cnt`æ•°ç»„ä¸€è‡´ã€‚  


### é¢˜è§£ä¸‰ï¼šdaniEl_lElEï¼ˆèµï¼š7ï¼‰  
* **ç‚¹è¯„**ï¼šä½œè€…æ€»ç»“äº†æœ¬é¢˜çš„**ä¸‰ä¸ªå…³é”®å¥—è·¯**ï¼ˆæ’åºå¤„ç†minã€é…å¯¹DPã€çŠ¶æ€ç®€åŒ–ï¼‰ï¼Œéå¸¸é€‚åˆä¸¾ä¸€åä¸‰ï¼æ¯”å¦‚â€œåºåˆ—minè®¡æ•°å°è¯•æ’åºåè§£å†³â€â€œåºåˆ—åŒ¹é…ç”¨DPâ€ï¼Œè¿™äº›ç»éªŒèƒ½å¸®ä½ è§£å†³æ›´å¤šç±»ä¼¼é—®é¢˜ã€‚ä»£ç ä¸­çš„`dp[i][j]`çŠ¶æ€è™½ç„¶å’Œé¢˜è§£ä¸€ç•¥æœ‰ä¸åŒï¼Œä½†æ ¸å¿ƒé€»è¾‘ä¸€è‡´ï¼Œæ˜¯ç†è§£DPæ¨¡å‹çš„å¥½è¡¥å……ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### å…³é”®ç‚¹1ï¼šå¦‚ä½•å°†minä¹˜ç§¯è½¬åŒ–ä¸ºæœ‰åºåºåˆ—çš„è´¡çŒ®ï¼Ÿ  
* **åˆ†æ**ï¼šmin(A_i, B_j)çš„æœ¬è´¨æ˜¯â€œå–ä¸¤ä¸ªæ•°ä¸­çš„è¾ƒå°è€…â€ã€‚å¦‚æœæˆ‘ä»¬æŠŠAå’ŒBåˆå¹¶å**ä»å¤§åˆ°å°æ’åº**ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„é…å¯¹ï¼Œè¾ƒå°çš„é‚£ä¸ªæ•°ä¸€å®šæ˜¯**åå¤„ç†çš„é‚£ä¸ªå…ƒç´ **ï¼ˆå‰é¢çš„éƒ½æ›´å¤§ï¼‰ã€‚è¿™æ ·ï¼Œæ¯ä¸ªå…ƒç´ çš„è´¡çŒ®å°±å›ºå®šä¸ºå®ƒè‡ªå·±çš„å€¼â€”â€”å®Œç¾è§£å†³äº†minçš„é—®é¢˜ï¼  
* ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šæ’åºæ˜¯å¤„ç†min/maxè´¡çŒ®é—®é¢˜çš„â€œä¸‡èƒ½é’¥åŒ™â€ã€‚  


### å…³é”®ç‚¹2ï¼šå¦‚ä½•è®¾è®¡DPçŠ¶æ€ï¼Ÿ  
* **åˆ†æ**ï¼šæˆ‘ä»¬éœ€è¦è®°å½•â€œå·²å¤„ç†çš„å…ƒç´ æ•°é‡â€å’Œâ€œå·²é…å¯¹çš„å¯¹æ•°â€ï¼Œå› æ­¤çŠ¶æ€`f[i][j]`ï¼ˆå‰iä¸ªå…ƒç´ é…å¯¹jå¯¹çš„æ€»è´¡çŒ®ï¼‰æ˜¯æœ€è‡ªç„¶çš„é€‰æ‹©ã€‚è¿™æ ·çš„çŠ¶æ€èƒ½è¦†ç›–æ‰€æœ‰å¯èƒ½çš„é…å¯¹æƒ…å†µï¼Œä¸”è½¬ç§»é€»è¾‘æ¸…æ™°ã€‚  
* ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šDPçŠ¶æ€è¦â€œåˆšå¥½è¦†ç›–é—®é¢˜çš„æ ¸å¿ƒå˜é‡â€â€”â€”è¿™é‡Œæ˜¯â€œå¤„ç†è¿›åº¦â€å’Œâ€œé…å¯¹æ•°é‡â€ã€‚  


### å…³é”®ç‚¹3ï¼šå¦‚ä½•è®¡ç®—å¯é…å¯¹çš„å¼‚è‰²å…ƒç´ æ•°é‡ï¼Ÿ  
* **åˆ†æ**ï¼šå¯¹äºå½“å‰å…ƒç´ ï¼ˆé¢œè‰²ä¸ºcï¼‰ï¼Œå‰é¢çš„å¼‚è‰²å…ƒç´ æ•°é‡æ˜¯`cnt[!c][i-1]`ï¼ˆå‰ç¼€å’Œæ•°ç»„ç»Ÿè®¡ï¼‰ã€‚ä½†å·²ç»é…å¯¹äº†j-1å¯¹ï¼Œæ‰€ä»¥**å‰©ä½™å¯é…å¯¹çš„æ•°é‡**æ˜¯`cnt[!c][i-1] - (j-1)`â€”â€”è¿™ä¸€æ­¥æ˜¯è½¬ç§»çš„å…³é”®ï¼  
* ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šå‰ç¼€å’Œæ•°ç»„æ˜¯ç»Ÿè®¡â€œå†å²ä¿¡æ¯â€çš„é«˜æ•ˆå·¥å…·ã€‚  


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
1. **æ’åºè½¬åŒ–**ï¼šé‡åˆ°min/maxçš„ä¹˜ç§¯/å’Œé—®é¢˜ï¼Œå…ˆå°è¯•æ’åºï¼Œå›ºå®šè´¡çŒ®çš„â€œå½’å±â€ï¼›  
2. **é…å¯¹DP**ï¼šåºåˆ—é…å¯¹é—®é¢˜ç”¨`f[i][j]`ï¼ˆå‰iä¸ªå…ƒç´ é…å¯¹jå¯¹ï¼‰çŠ¶æ€ï¼Œè½¬ç§»è€ƒè™‘â€œé…å¯¹/ä¸é…å¯¹â€ï¼›  
3. **å‰ç¼€å’Œç»Ÿè®¡**ï¼šç”¨å‰ç¼€å’Œå¿«é€Ÿè®¡ç®—â€œå†å²å¼‚è‰²å…ƒç´ æ•°é‡â€ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†é¢˜è§£ä¸€ï¼ˆOtomachi_Una_ï¼‰çš„æ€è·¯ï¼Œæ˜¯æœ¬é¢˜çš„æ ‡å‡†å®ç°ã€‚  

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

typedef long long ll;
const int MAXN = 5005;
const int MOD = 998244353;

struct Element {
    ll val;
    int color; // 0è¡¨ç¤ºAï¼Œ1è¡¨ç¤ºB
};

ll qpow(ll a, int b) {
    ll res = 1;
    while (b) {
        if (b & 1) res = res * a % MOD;
        a = a * a % MOD;
        b >>= 1;
    }
    return res;
}

int main() {
    int n;
    cin >> n;
    vector<Element> arr(2 * n);
    for (int i = 0; i < n; ++i) {
        cin >> arr[i].val;
        arr[i].color = 0;
    }
    for (int i = n; i < 2 * n; ++i) {
        cin >> arr[i].val;
        arr[i].color = 1;
    }
    // æŒ‰valä»å¤§åˆ°å°æ’åº
    sort(arr.begin(), arr.end(), [](const Element& a, const Element& b) {
        return a.val > b.val;
    });
    // cnt[0][i]ï¼šå‰iä¸ªå…ƒç´ ä¸­Açš„æ•°é‡ï¼›cnt[1][i]ï¼šå‰iä¸ªå…ƒç´ ä¸­Bçš„æ•°é‡
    vector<vector<int>> cnt(2, vector<int>(2 * n + 1, 0));
    for (int i = 1; i <= 2 * n; ++i) {
        cnt[0][i] = cnt[0][i-1] + (arr[i-1].color == 0);
        cnt[1][i] = cnt[1][i-1] + (arr[i-1].color == 1);
    }
    // f[i][j]ï¼šå‰iä¸ªå…ƒç´ é…å¯¹jå¯¹çš„æ€»è´¡çŒ®
    vector<vector<ll>> f(2 * n + 1, vector<ll>(n + 1, 0));
    f[0][0] = 1;
    for (int i = 1; i <= 2 * n; ++i) {
        f[i][0] = 1; // é…å¯¹0å¯¹çš„è´¡çŒ®æ˜¯1ï¼ˆä¹˜ç§¯çš„å•ä½å…ƒï¼‰
        for (int j = 1; j <= min(i, n); ++j) {
            // æƒ…å†µ1ï¼šä¸é…å¯¹å½“å‰å…ƒç´ ï¼Œç»§æ‰¿f[i-1][j]
            f[i][j] = f[i-1][j];
            // æƒ…å†µ2ï¼šé…å¯¹å½“å‰å…ƒç´ ï¼Œéœ€è¦è®¡ç®—å¯é…å¯¹çš„æ•°é‡
            int current_color = arr[i-1].color;
            int other_color = 1 - current_color;
            int available = cnt[other_color][i] - (j - 1); // å‰é¢çš„å¼‚è‰²å…ƒç´ æ•°é‡ - å·²é…å¯¹çš„j-1å¯¹
            if (available > 0) {
                ll add = f[i-1][j-1] * arr[i-1].val % MOD;
                add = add * available % MOD;
                f[i][j] = (f[i][j] + add) % MOD;
            }
        }
    }
    // è®¡ç®—n!çš„é€†å…ƒ
    ll inv_fact = 1;
    for (int i = 1; i <= n; ++i) {
        inv_fact = inv_fact * i % MOD;
    }
    inv_fact = qpow(inv_fact, MOD - 2);
    cout << f[2 * n][n] * inv_fact % MOD << endl;
    return 0;
}
```

* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥ä¸æ’åº**ï¼šå°†Aå’ŒBåˆå¹¶æˆ`arr`æ•°ç»„ï¼Œæ ‡è®°é¢œè‰²åä»å¤§åˆ°å°æ’åºï¼›  
  2. **å‰ç¼€å’Œç»Ÿè®¡**ï¼š`cnt`æ•°ç»„è®°å½•å‰iä¸ªå…ƒç´ ä¸­Aã€Bçš„æ•°é‡ï¼›  
  3. **DPè½¬ç§»**ï¼š`f[i][j]`å¤„ç†æ¯ä¸ªå…ƒç´ çš„ä¸¤ç§æƒ…å†µï¼ˆé…å¯¹/ä¸é…å¯¹ï¼‰ï¼›  
  4. **é€†å…ƒè®¡ç®—**ï¼šç”¨å¿«é€Ÿå¹‚æ±‚n!çš„é€†å…ƒï¼Œå¾—åˆ°æœŸæœ›ã€‚  


### é¢˜è§£ä¸€ï¼ˆOtomachi_Una_ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨`cnt`æ•°ç»„å¿«é€Ÿç»Ÿè®¡å¼‚è‰²å…ƒç´ æ•°é‡ï¼Œè½¬ç§»é€»è¾‘ç®€æ´ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 1; i <= 2*n; i++) {
      cnt[0][i] = cnt[0][i-1], cnt[1][i] = cnt[1][i-1];
      cnt[a[i].sub][i]++; // a[i].subæ˜¯é¢œè‰²ï¼ˆ0/Aï¼Œ1/Bï¼‰
  }
  for (int i = 1; i <= 2*n; i++) {
      ll tmp = cnt[!a[i].sub][i]; // å½“å‰å…ƒç´ çš„å¼‚è‰²æ•°é‡
      f[i][0] = 1;
      for (int j = 1; j <= min(n,i); j++) {
          if (j <= tmp)
              f[i][j] = f[i-1][j-1] * a[i].val % MOD * (tmp - (j-1)) % MOD;
          f[i][j] = (f[i-1][j] + f[i][j]) % MOD;
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `cnt[a[i].sub][i]++`ï¼šç»Ÿè®¡å‰iä¸ªå…ƒç´ ä¸­å½“å‰é¢œè‰²çš„æ•°é‡ï¼›  
  - `tmp = cnt[!a[i].sub][i]`ï¼šå½“å‰å…ƒç´ çš„å¼‚è‰²å…ƒç´ æ•°é‡ï¼›  
  - `(tmp - (j-1))`ï¼šå¯é…å¯¹çš„æ•°é‡ï¼ˆå‡å»å·²é…å¯¹çš„j-1å¯¹ï¼‰ï¼›  
  - è½¬ç§»æ—¶å…ˆå¤„ç†é…å¯¹çš„æƒ…å†µï¼Œå†åŠ ä¸Šä¸é…å¯¹çš„æƒ…å†µï¼ˆ`f[i-1][j]`ï¼‰ã€‚  
* ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šå‰ç¼€å’Œæ•°ç»„æ˜¯å¤„ç†â€œå†å²æ•°é‡â€çš„ç¥å™¨ï¼Œèƒ½æŠŠO(n)çš„æŸ¥è¯¢ä¼˜åŒ–åˆ°O(1)ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º  

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šç§¯æœ¨é…å¯¹å¤§æŒ‘æˆ˜ã€‹ï¼ˆ8ä½åƒç´ é£ï¼‰  

### æ ¸å¿ƒè®¾è®¡æ€è·¯  
å°†Aå’ŒBçš„å…ƒç´ ç”¨**çº¢è‰²ï¼ˆAï¼‰å’Œè“è‰²ï¼ˆBï¼‰çš„åƒç´ å—**è¡¨ç¤ºï¼Œåˆå¹¶æ’åºåæŒ‰ä»å¤§åˆ°å°æ’åˆ—åœ¨å±å¹•ä¸Šæ–¹ã€‚ä¸‹æ–¹æ˜¯DPçŠ¶æ€é¢æ¿ï¼ˆæ˜¾ç¤ºå½“å‰å¤„ç†åˆ°ç¬¬iä¸ªå…ƒç´ ï¼Œå·²é…å¯¹jå¯¹ï¼‰å’Œæ§åˆ¶é¢æ¿ï¼ˆå•æ­¥ã€è‡ªåŠ¨æ’­æ”¾ã€é‡ç½®ï¼‰ã€‚  


### åŠ¨ç”»å¸§æ­¥éª¤  
1. **åˆå§‹åŒ–**ï¼šå±å¹•æ˜¾ç¤ºæ’åºåçš„åƒç´ å—åºåˆ—ï¼ˆçº¢/è“ï¼‰ï¼ŒDPé¢æ¿æ˜¾ç¤º`f[0][0] = 1`ï¼ŒèƒŒæ™¯éŸ³ä¹ï¼ˆ8ä½æ¬¢å¿«æ—‹å¾‹ï¼‰å“èµ·ã€‚  
2. **å¤„ç†ç¬¬iä¸ªå…ƒç´ **ï¼š  
   - é«˜äº®å½“å‰å…ƒç´ ï¼ˆé—ªçƒ2æ¬¡ï¼‰ï¼ŒåŒæ—¶åœ¨DPé¢æ¿æ˜¾ç¤º`å½“å‰å…ƒç´ ï¼šval=Xï¼Œé¢œè‰²=çº¢/è“`ï¼›  
   - **æƒ…å†µ1ï¼šä¸é…å¯¹**ï¼šå…ƒç´ ä¿æŒåŸçŠ¶ï¼ŒDPé¢æ¿æ˜¾ç¤º`f[i][j] = f[i-1][j]`ï¼Œä¼´æœ‰â€œå—’â€çš„è½»å“ï¼›  
   - **æƒ…å†µ2ï¼šé…å¯¹**ï¼šå…ƒç´ ä¸å‰é¢çš„ä¸€ä¸ªå¼‚è‰²å…ƒç´ ç”¨**é»„è‰²çº¿æ¡è¿æ¥**ï¼ŒDPé¢æ¿æ˜¾ç¤º`f[i][j] += f[i-1][j-1] Ã— X Ã— available`ï¼Œä¼´æœ‰â€œå®â€çš„éŸ³æ•ˆï¼›  
3. **å®Œæˆé…å¯¹**ï¼šå½“å¤„ç†å®Œæ‰€æœ‰å…ƒç´ ï¼ˆi=2nï¼Œj=nï¼‰æ—¶ï¼Œå±å¹•æ˜¾ç¤ºâ€œæŒ‘æˆ˜æˆåŠŸï¼â€ï¼Œæ’­æ”¾èƒœåˆ©éŸ³æ•ˆï¼ˆä¸Šæ‰¬çš„8ä½éŸ³è°ƒï¼‰ï¼Œå¹¶å¼¹å‡ºâ€œå†æ¥ä¸€æ¬¡ï¼Ÿâ€çš„æç¤ºã€‚  


### äº¤äº’è®¾è®¡  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œä¸‹ä¸€æ­¥â€æŒ‰é’®ï¼Œé€æ­¥å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œé€‚åˆä»”ç»†è§‚å¯Ÿï¼›  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼ŒåŠ¨ç”»æŒ‰1ç§’/æ­¥çš„é€Ÿåº¦æ’­æ”¾ï¼Œé€‚åˆæ•´ä½“ç†è§£ï¼›  
- **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚  


### æŠ€æœ¯å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰  
- **åƒç´ ç»˜åˆ¶**ï¼šç”¨HTML5 Canvasç»˜åˆ¶20x20çš„åƒç´ å—ï¼Œçº¢è‰²ï¼ˆ#FF0000ï¼‰ä»£è¡¨Aï¼Œè“è‰²ï¼ˆ#0000FFï¼‰ä»£è¡¨Bï¼›  
- **éŸ³æ•ˆ**ï¼šç”¨Web Audio APIç”Ÿæˆ8ä½éŸ³æ•ˆï¼ˆå¦‚â€œå®â€ç”¨440Hzæ­£å¼¦æ³¢ï¼Œâ€œå—’â€ç”¨220Hzæ–¹æ³¢ï¼‰ï¼›  
- **çŠ¶æ€æ›´æ–°**ï¼šç”¨JavaScriptç»´æŠ¤DPæ•°ç»„`f`ï¼Œå¹¶å®æ—¶æ›´æ–°å±å¹•ä¸Šçš„åƒç´ å—å’ŒDPé¢æ¿ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ  

### é€šç”¨æ€è·¯è¿ç§»  
æœ¬é¢˜çš„**æ ¸å¿ƒå¥—è·¯**ï¼ˆåˆå¹¶æ’åº+é…å¯¹DPï¼‰å¯ç”¨äºè§£å†³ä»¥ä¸‹é—®é¢˜ï¼š  
1. **åºåˆ—é…å¯¹çš„ä¹˜ç§¯/å’Œé—®é¢˜**ï¼šå¦‚æ±‚æ‰€æœ‰é…å¯¹çš„maxä¹˜ç§¯å’Œï¼›  
2. **å¸¦å¤§å°çº¦æŸçš„åŒ¹é…é—®é¢˜**ï¼šå¦‚è¦æ±‚A_i <= B_jçš„åŒ¹é…è´¡çŒ®ã€‚  


### æ´›è°·æ¨èç»ƒä¹   
1. **P8321 ã€JROI-4ã€æ²ˆé˜³å¤§è¡— 2**ï¼ˆåŸé¢˜ï¼‰ï¼šå·©å›ºæœ¬é¢˜çš„DPæ¨¡å‹ï¼›  
2. **P1908 é€†åºå¯¹**ï¼šç»ƒä¹ æ’åºä¸å‰ç¼€å’Œçš„ç»“åˆï¼›  
3. **P2051 ä¸­å›½è±¡æ£‹**ï¼šå­¦ä¹ æ›´å¤æ‚çš„é…å¯¹DPæ¨¡å‹ï¼›  
4. **P3146 [USACO16OPEN] 248**ï¼šç»ƒä¹ åºåˆ—åˆå¹¶ä¸DPçŠ¶æ€è®¾è®¡ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«  
é¢˜è§£ä¸­å¤šä½ä½œè€…æåˆ°**â€œæ’åºæ˜¯è§£å†³min/maxé—®é¢˜çš„å…³é”®â€**ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼æ¯”å¦‚æœ¬é¢˜ä¸­çš„minè´¡çŒ®ï¼Œé€šè¿‡æ’åºç›´æ¥è½¬åŒ–ä¸ºâ€œå½“å‰å…ƒç´ çš„è´¡çŒ®â€ï¼Œç¬é—´ç®€åŒ–äº†é—®é¢˜ã€‚æ­¤å¤–ï¼Œ**å‰ç¼€å’Œæ•°ç»„**å’Œ**DPçŠ¶æ€çš„ç®€æ´æ€§**ä¹Ÿæ˜¯è§£é¢˜çš„å…³é”®â€”â€”ä¸è¦è®¾è®¡å†—ä½™çš„çŠ¶æ€ï¼Œå¦åˆ™ä¼šå¢åŠ ä»£ç å¤æ‚åº¦ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºã€Œæ²ˆé˜³å¤§è¡— 2ã€çš„åˆ†æå°±åˆ°è¿™é‡Œï¼è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**å°†minçš„ä¹˜ç§¯è½¬åŒ–ä¸ºæœ‰åºåºåˆ—çš„DPé—®é¢˜**ï¼Œé€šè¿‡æ’åºå’Œé…å¯¹æ¨¡å‹è½»æ¾è§£å†³ã€‚è®°ä½ï¼šé‡åˆ°min/maxçš„ä¹˜ç§¯/å’Œé—®é¢˜ï¼Œå…ˆè¯•è¯•æ’åºâ€”â€”è¯´ä¸å®šèƒ½æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ›´æœ‰è¶£çš„ç®—æ³•æŒ‘æˆ˜ï½ ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š81.39ç§’
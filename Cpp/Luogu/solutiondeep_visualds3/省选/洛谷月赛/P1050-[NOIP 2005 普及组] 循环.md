# é¢˜ç›®ä¿¡æ¯

# [NOIP 2005 æ™®åŠç»„] å¾ªç¯

## é¢˜ç›®æè¿°

ä¹ä¹æ˜¯ä¸€ä¸ªèªæ˜è€Œåˆå‹¤å¥‹å¥½å­¦çš„å­©å­ã€‚ä»–æ€»å–œæ¬¢æ¢æ±‚äº‹ç‰©çš„è§„å¾‹ã€‚ä¸€å¤©ï¼Œä»–çªç„¶å¯¹æ•°çš„æ­£æ•´æ•°æ¬¡å¹‚äº§ç”Ÿäº†å…´è¶£ã€‚


ä¼—æ‰€å‘¨çŸ¥ï¼Œ$2$ çš„æ­£æ•´æ•°æ¬¡å¹‚æœ€åä¸€ä½æ•°æ€»æ˜¯ä¸æ–­çš„åœ¨é‡å¤ $2,4,8,6,2,4,8,6â€¦$ æˆ‘ä»¬è¯´ $2$ çš„æ­£æ•´æ•°æ¬¡å¹‚æœ€åä¸€ä½çš„å¾ªç¯é•¿åº¦æ˜¯ $4$ï¼ˆå®é™…ä¸Š $4$ çš„å€æ•°éƒ½å¯ä»¥è¯´æ˜¯å¾ªç¯é•¿åº¦ï¼Œä½†æˆ‘ä»¬åªè€ƒè™‘æœ€å°çš„å¾ªç¯é•¿åº¦ï¼‰ã€‚ç±»ä¼¼çš„ï¼Œå…¶ä½™çš„æ•°å­—çš„æ­£æ•´æ•°æ¬¡å¹‚æœ€åä¸€ä½æ•°ä¹Ÿæœ‰ç±»ä¼¼çš„å¾ªç¯ç°è±¡ï¼š

$$
\def\arraystretch{1.5}
\begin{array}{c|c|c}\hline
\textbf{æ•°å­—}& \textbf{å¾ªç¯} & \textbf{å¾ªç¯é•¿åº¦} \cr\hline\hline
2 & 2,4,8,6 & 4\cr\hline
3 & 3,9,7,1 & 4\cr\hline
4 & 4,6 & 2\cr\hline
5 & 5 &  1\cr\hline
6 & 6 & 1\cr\hline
7 & 7,9,3,1 & 4\cr\hline
8 & 8,4,2,6 & 4\cr\hline
9 & 9,1 & 2\cr\hline
\end{array}
$$

è¿™æ—¶ä¹ä¹çš„é—®é¢˜å°±å‡ºæ¥äº†ï¼šæ˜¯ä¸æ˜¯åªæœ‰æœ€åä¸€ä½æ‰æœ‰è¿™æ ·çš„å¾ªç¯å‘¢ï¼Ÿå¯¹äºä¸€ä¸ªæ•´æ•° $n$ çš„æ­£æ•´æ•°æ¬¡å¹‚æ¥è¯´ï¼Œå®ƒçš„å $k$ ä½æ˜¯å¦ä¼šå‘ç”Ÿå¾ªç¯ï¼Ÿå¦‚æœå¾ªç¯çš„è¯ï¼Œå¾ªç¯é•¿åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿ

æ³¨æ„ï¼š

1. å¦‚æœ $n$ çš„æŸä¸ªæ­£æ•´æ•°æ¬¡å¹‚çš„ä½æ•°ä¸è¶³ $k$ï¼Œé‚£ä¹ˆä¸è¶³çš„é«˜ä½çœ‹åšæ˜¯ $0$ã€‚
2. å¦‚æœå¾ªç¯é•¿åº¦æ˜¯ $L$ï¼Œé‚£ä¹ˆè¯´æ˜å¯¹äºä»»æ„çš„æ­£æ•´æ•° $a$ï¼Œ$n$ çš„ $a$ æ¬¡å¹‚å’Œ $a+L$ æ¬¡å¹‚çš„æœ€å $k$ ä½éƒ½ç›¸åŒã€‚


## è¯´æ˜/æç¤º

**ã€æ•°æ®èŒƒå›´ã€‘**

å¯¹äº $30 \%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $k \le 4$ï¼›  
å¯¹äº$100 \%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $1 \le n < {10}^{100}$ï¼Œ$1 \le k \le 100$ã€‚

**ã€é¢˜ç›®æ¥æºã€‘**

NOIP 2005 æ™®åŠç»„ç¬¬å››é¢˜

## æ ·ä¾‹ #1

### è¾“å…¥

```
32 2```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[NOIP2005æ™®åŠç»„] å¾ªç¯ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## å¼•è¨€
ä»Šå¤©æˆ‘ä»¬è¦è§£å†³çš„æ˜¯NOIP2005æ™®åŠç»„çš„â€œå¾ªç¯â€é—®é¢˜â€”â€”ç»™å®šä¸€ä¸ªè¶…çº§å¤§çš„æ•´æ•°nï¼ˆæœ€å¤š100ä½ï¼‰å’Œkï¼Œæ±‚nçš„æ­£æ•´æ•°æ¬¡å¹‚**æœ€åkä½**çš„æœ€å°å¾ªç¯é•¿åº¦ã€‚å¦‚æœæ²¡æœ‰å¾ªç¯ï¼Œå°±è¾“å‡º-1ã€‚è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**é€’æ¨æ€æƒ³**å’Œ**é«˜ç²¾åº¦è®¡ç®—**ï¼Œæˆ‘ä»¬ä¼šä¸€æ­¥æ­¥æ‹†è§£éš¾ç‚¹ï¼Œç”¨â€œæ­ç§¯æœ¨â€çš„æ–¹å¼ç†è§£ç®—æ³•ï¼


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šé€’æ¨ï¼ˆé€æ­¥æ±‚è§£ï¼‰ + é«˜ç²¾åº¦ï¼ˆå¤„ç†å¤§æ•°ï¼‰

### ğŸ—£ï¸ åˆæ­¥åˆ†æ
æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾nçš„å¹‚åkä½çš„å¾ªç¯é•¿åº¦ã€‚æ¯”å¦‚æ ·ä¾‹è¾“å…¥`32 2`ï¼Œ32çš„å¹‚åä¸¤ä½æ˜¯ï¼š32â†’24â†’68â†’56â†’32â†’â€¦ï¼Œå¾ªç¯é•¿åº¦æ˜¯4ï¼Œæ‰€ä»¥è¾“å‡º4ã€‚

#### æ ¸å¿ƒæ€æƒ³ï¼šé€’æ¨â€œæ­ç§¯æœ¨â€
æƒ³è±¡æˆ‘ä»¬è¦æ­ä¸€ä¸ªkå±‚çš„ç§¯æœ¨å¡”ï¼Œæ¯ä¸€å±‚ä»£è¡¨â€œåiä½çš„å¾ªç¯é•¿åº¦â€ã€‚**åiä½çš„å¾ªç¯é•¿åº¦ä¸€å®šæ˜¯åi-1ä½çš„å€æ•°**â€”â€”å°±åƒä¸Šå±‚ç§¯æœ¨å¿…é¡»æ”¾åœ¨ä¸‹å±‚çš„åŸºç¡€ä¸Šï¼Œä¸èƒ½â€œæ‚¬ç©ºâ€ã€‚æ¯”å¦‚ï¼š
- å1ä½çš„å¾ªç¯é•¿åº¦æ˜¯Lâ‚ï¼ˆæ¯”å¦‚3çš„å1ä½å¾ªç¯æ˜¯3â†’9â†’7â†’1ï¼ŒLâ‚=4ï¼‰ï¼›
- å2ä½çš„å¾ªç¯é•¿åº¦Lâ‚‚å¿…é¡»æ˜¯Lâ‚çš„å€æ•°ï¼ˆæ¯”å¦‚Lâ‚‚=4Ã—5=20ï¼‰ï¼›
- æœ€ç»ˆåkä½çš„å¾ªç¯é•¿åº¦å°±æ˜¯Lâ‚Ã—Lâ‚‚çš„å€æ•°Ã—â€¦Ã—Lâ‚–çš„å€æ•°ã€‚

#### ä¸ºä»€ä¹ˆæ˜¯å€æ•°ï¼Ÿ
å› ä¸ºåiä½è¦å¾ªç¯ï¼Œå¿…é¡»å…ˆä¿è¯åi-1ä½å·²ç»å¾ªç¯ï¼ˆå¦åˆ™åiä½ä¸å¯èƒ½é‡å¤ï¼‰ã€‚æ¯”å¦‚å2ä½æƒ³é‡å¤â€œ23â€ï¼Œå¿…é¡»å…ˆä¿è¯æœ€å1ä½æ˜¯â€œ3â€ï¼ˆå1ä½çš„å¾ªç¯ï¼‰ï¼Œæ‰€ä»¥å2ä½çš„å¾ªç¯é•¿åº¦ä¸€å®šæ˜¯å1ä½çš„å€æ•°ã€‚

#### å¦‚ä½•æ‰¾å€æ•°ï¼Ÿ
å¯¹äºåiä½ï¼Œæˆ‘ä»¬åªéœ€è¦æšä¸¾**æœ€å¤š10æ¬¡**ï¼ˆå› ä¸ºæ¯ä¸€ä½åªæœ‰0-9åç§å¯èƒ½ï¼‰ï¼šä»1å¼€å§‹è¯•ï¼Œæ‰¾æœ€å°çš„jï¼Œä½¿å¾—n^(jÃ—Lâ‚â‚‹â‚ +1)çš„åiä½ç­‰äºnçš„åiä½ã€‚jå°±æ˜¯å½“å‰å±‚çš„â€œå€æ•°â€ï¼Œä¹˜åˆ°æ€»å¾ªç¯é•¿åº¦é‡Œã€‚

#### å¯è§†åŒ–è®¾è®¡æ€è·¯
æˆ‘ä»¬ç”¨**8ä½åƒç´ é£æ ¼**åšä¸€ä¸ªâ€œå¾ªç¯å¡”æ­å»ºåŠ¨ç”»â€ï¼š
- å±å¹•å·¦ä¾§æ˜¯â€œå¾ªç¯å¡”â€ï¼Œæ¯å±‚ä»£è¡¨åiä½ï¼Œç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—æ˜¾ç¤ºå½“å‰å¾ªç¯é•¿åº¦ï¼ˆæ¯”å¦‚Lâ‚=4æ˜¯è“è‰²ï¼ŒLâ‚‚=20æ˜¯ç»¿è‰²ï¼‰ï¼›
- ä¸­é—´æ˜¯â€œä¹˜æ³•å·¥å‚â€ï¼Œç”¨åƒç´ æ–¹å—æ¨¡æ‹Ÿé«˜ç²¾åº¦ä¹˜æ³•ï¼ˆæ¯ä¹˜ä¸€æ¬¡ï¼Œæ–¹å—é—ªçƒï¼‰ï¼Œå¹¶æ˜¾ç¤ºå½“å‰åiä½çš„ç»“æœï¼›
- å³ä¾§æ˜¯â€œæ§åˆ¶é¢æ¿â€ï¼šå•æ­¥æ‰§è¡Œã€è‡ªåŠ¨æ’­æ”¾ã€é‡ç½®ï¼Œè¿˜æœ‰â€œæ‰¾å€æ•°â€çš„è¿›åº¦æ¡ï¼ˆä»1åˆ°10ï¼‰ï¼›
- å…³é”®æ“ä½œéŸ³æ•ˆï¼šæ‰¾åˆ°jæ—¶æ’­æ”¾â€œå®â€çš„çŸ­éŸ³ï¼Œæ­å»ºå®Œkå±‚æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼š_Life_ï¼Œèµ151ï¼‰
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£ç”¨â€œæ‰‹ç©ä¾‹å­â€ï¼ˆæ¯”å¦‚198123 4ï¼‰æŠŠé€’æ¨è¿‡ç¨‹è®²å¾—æ˜æ˜ç™½ç™½ï¼ä½œè€…é€ä½æ‹†è§£ï¼šå…ˆç®—æœ€å1ä½çš„å¾ªç¯é•¿åº¦4ï¼Œå†ç®—å2ä½çš„å€æ•°5ï¼ˆå¾ªç¯é•¿åº¦4Ã—5=20ï¼‰ï¼Œä¾æ­¤ç±»æ¨åˆ°å4ä½ã€‚ä»£ç é‡Œç”¨`bignum`ç»“æ„ä½“å¤„ç†é«˜ç²¾åº¦ä¹˜æ³•ï¼Œå¹¶ä¸”**åªä¿ç•™åkä½**ï¼ˆé¿å…ä¸å¿…è¦çš„è®¡ç®—ï¼‰ï¼Œé€»è¾‘æ¸…æ™°ã€‚ç‰¹åˆ«æ˜¯â€œæ¯æ­¥æ›´æ–°ä¹˜æ•°â€çš„æŠ€å·§ï¼ˆæ¯”å¦‚å°†ä¹˜æ•°å˜ä¸ºn^Lâ‚â‚‹â‚ï¼Œè¿™æ ·æ¯æ¬¡ä¹˜è¿™ä¸ªä¹˜æ•°å°±ç›¸å½“äºèµ°äº†Lâ‚â‚‹â‚æ­¥ï¼‰ï¼Œå¤§å¤§å‡å°‘äº†è®¡ç®—é‡ã€‚

### é¢˜è§£äºŒï¼ˆä½œè€…ï¼šShadow_Soldierï¼Œèµ11ï¼‰
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£çš„äº®ç‚¹æ˜¯**ä¸¥è°¨çš„æ•°å­¦è¯æ˜**ï¼ä½œè€…ç”¨â€œå¼•ç†1â€è¯æ˜äº†åiä½å¾ªç¯é•¿åº¦æ˜¯åi-1ä½çš„å€æ•°ï¼Œè¿˜åˆ†æäº†æšä¸¾jçš„ä¸Šé™ï¼ˆæœ€å¤š10æ¬¡ï¼‰ã€‚ä»£ç é‡Œçš„`Number`ç»“æ„ä½“å°è£…äº†é«˜ç²¾åº¦çš„è¾“å…¥ã€è¾“å‡ºã€ä¹˜æ³•ï¼Œå¹¶ä¸”é€šè¿‡`Resize()`ä¿è¯åªä¿ç•™åkä½ï¼Œéå¸¸è§„èŒƒã€‚é€’æ¨è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è®¡ç®—`u`ï¼ˆå³n^Lâ‚â‚‹â‚ï¼‰ï¼Œç„¶åæšä¸¾jä¹˜uï¼Œç›´åˆ°åiä½ç­‰äºnçš„åiä½ï¼Œæ€è·¯ç›´æ¥ã€‚

### é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼švectorwyxï¼Œèµ9ï¼‰
* **ç‚¹è¯„**ï¼šè¿™é“é¢˜è§£ä»**å½¢å¼åŒ–æ¨å¯¼**å’Œ**å›¾è®ºè§’åº¦**è§£é‡Šäº†ä¸ºä»€ä¹ˆå¾ªç¯é•¿åº¦æ˜¯å€æ•°å…³ç³»ï¼ˆæ¯”å¦‚æŠŠå¹‚çš„åiä½çœ‹ä½œç¯ï¼Œæ˜ å°„åˆ°åi-1ä½çš„ç¯ä¸Šï¼Œç¯çš„é•¿åº¦ä¸€å®šæ˜¯å€æ•°ï¼‰ã€‚ä»£ç é‡Œçš„`num`ç»“æ„ä½“åŒæ ·å¤„ç†äº†é«˜ç²¾åº¦ä¹˜æ³•ï¼Œå¹¶ä¸”é€šè¿‡`min(k, ...)`ä¿è¯åªä¿ç•™åkä½ã€‚ä½œè€…è¿˜æåˆ°â€œæœ€å¤šè¯•10æ¬¡â€çš„åŸå› ï¼ˆæ¯ä¸€ä½åªæœ‰10ç§å¯èƒ½ï¼‰ï¼Œå¸®åŠ©ç†è§£æ— è§£çš„åˆ¤æ–­æ¡ä»¶ã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. éš¾ç‚¹1ï¼šç†è§£â€œå¾ªç¯é•¿åº¦æ˜¯å€æ•°â€çš„å…³ç³»
- **åˆ†æ**ï¼šåiä½è¦å¾ªç¯ï¼Œå¿…é¡»å…ˆä¿è¯åi-1ä½å¾ªç¯ã€‚æ¯”å¦‚å2ä½æƒ³é‡å¤â€œ23â€ï¼Œå¿…é¡»å…ˆä¿è¯æœ€å1ä½æ˜¯â€œ3â€ï¼ˆå1ä½çš„å¾ªç¯ï¼‰ã€‚å› æ­¤åiä½çš„å¾ªç¯é•¿åº¦ä¸€å®šæ˜¯åi-1ä½çš„å€æ•°ã€‚
- ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šé€’æ¨çš„åŸºç¡€æ˜¯â€œä¸Šå±‚ä¾èµ–ä¸‹å±‚â€ï¼Œå°±åƒæ­ç§¯æœ¨ä¸èƒ½è·³è¿‡ä¸‹å±‚ã€‚

### 2. éš¾ç‚¹2ï¼šé«˜ç²¾åº¦è®¡ç®—çš„å®ç°
- **åˆ†æ**ï¼šnå¯ä»¥æ˜¯100ä½çš„å¤§æ•°ï¼Œæ™®é€šæ•´æ•°ç±»å‹ï¼ˆæ¯”å¦‚intã€long longï¼‰æ ¹æœ¬å­˜ä¸ä¸‹ï¼Œå¿…é¡»ç”¨**é«˜ç²¾åº¦**ï¼ˆç”¨æ•°ç»„å­˜æ¯ä¸€ä½ï¼Œæ‰‹åŠ¨å®ç°ä¹˜æ³•å’Œå–æ¨¡ï¼‰ã€‚æ¯”å¦‚`bignum`ç»“æ„ä½“ï¼Œç”¨`x[]`æ•°ç»„å­˜æ¯ä¸€ä½ï¼ˆä½ä½åœ¨å‰ï¼‰ï¼Œä¹˜æ³•æ—¶é€ä½ç›¸ä¹˜å†è¿›ä½ï¼Œå¹¶ä¸”åªä¿ç•™åkä½ã€‚
- ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šé«˜ç²¾åº¦çš„æ ¸å¿ƒæ˜¯â€œæ¨¡æ‹Ÿæ‰‹å·¥è®¡ç®—â€ï¼Œæ¯”å¦‚ä¹˜æ³•å°±æ˜¯â€œæ¯ä¸€ä½ä¹˜æ¯ä¸€ä½ï¼Œå†å¤„ç†è¿›ä½â€ã€‚

### 3. éš¾ç‚¹3ï¼šåˆ¤æ–­æ— è§£çš„æ¡ä»¶
- **åˆ†æ**ï¼šæ¯ä¸€ä½åªæœ‰0-9åç§å¯èƒ½ï¼Œå¦‚æœæšä¸¾jåˆ°10æ¬¡è¿˜æ²¡æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ï¼ˆå³åiä½ä¸ç­‰äºnçš„åiä½ï¼‰ï¼Œè¯´æ˜æ°¸è¿œä¸ä¼šå¾ªç¯ï¼Œç›´æ¥è¾“å‡º-1ã€‚
- ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šæšä¸¾ä¸Šé™æ˜¯10ï¼Œå› ä¸ºâ€œåå…¨åç¾â€â€”â€”æ¯ä¸€ä½çš„å¯èƒ½å€¼åªæœ‰10ç§ï¼Œè¶…è¿‡10æ¬¡å°±ä¼šé‡å¤ï¼Œä¸å¯èƒ½æ‰¾åˆ°å¾ªç¯ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é€’æ¨æ‹†åˆ†**ï¼šæŠŠå¤§é—®é¢˜æ‹†æˆå°é—®é¢˜ï¼ˆä»å1ä½åˆ°åkä½ï¼‰ï¼Œé€æ­¥è§£å†³ï¼›
- **é«˜ç²¾åº¦ä¼˜åŒ–**ï¼šåªä¿ç•™åkä½ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—ï¼›
- **æšä¸¾ä¸Šé™**ï¼šæ¯ä¸€æ­¥æœ€å¤šè¯•10æ¬¡ï¼Œé˜²æ­¢è¶…æ—¶æˆ–æ­»å¾ªç¯ã€‚


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
* **è¯´æ˜**ï¼šç»¼åˆäº†_Life_å’ŒShadow_Soldierçš„é¢˜è§£ï¼Œæç‚¼å‡ºæœ€ç®€æ´çš„æ ¸å¿ƒå®ç°ï¼ŒåŒ…å«é«˜ç²¾åº¦ç»“æ„ä½“å’Œé€’æ¨é€»è¾‘ã€‚

```cpp
#include <iostream>
#include <cstring>
#include <string>
using namespace std;

int k; // è¦æ±‚çš„åkä½

struct BigNum {
    int x[210]; // å­˜å‚¨æ¯ä¸€ä½ï¼ˆä½ä½åœ¨å‰ï¼‰
    int len;    // æœ‰æ•ˆé•¿åº¦

    BigNum() { memset(x, 0, sizeof(x)); len = 0; }

    // ä»å­—ç¬¦ä¸²åˆå§‹åŒ–ï¼ˆåªä¿ç•™åkä½ï¼‰
    void fromString(string s) {
        len = 0;
        int n = s.size();
        for (int i = 0; i < k; ++i) { // åªå–åkä½
            if (n - 1 - i >= 0) x[++len] = s[n - 1 - i] - '0';
            else x[++len] = 0; // ä¸è¶³kä½è¡¥0
        }
    }

    // é«˜ç²¾åº¦ä¹˜æ³•ï¼ˆåªä¿ç•™åkä½ï¼‰
    BigNum operator*(const BigNum& other) const {
        BigNum res;
        for (int i = 1; i <= len; ++i) {
            for (int j = 1; j <= other.len; ++j) {
                if (i + j - 1 > k) continue; // è¶…è¿‡kä½ä¸ç”¨ç®¡
                res.x[i + j - 1] += x[i] * other.x[j];
            }
        }
        // å¤„ç†è¿›ä½
        for (int i = 1; i <= k; ++i) {
            res.x[i + 1] += res.x[i] / 10;
            res.x[i] %= 10;
        }
        res.len = k;
        // å»æ‰å‰å¯¼é›¶ï¼ˆä½†ä¿ç•™è‡³å°‘1ä½ï¼‰
        while (res.len > 1 && res.x[res.len] == 0) res.len--;
        return res;
    }

    // åˆ¤æ–­åiä½æ˜¯å¦ç­‰äºå¦ä¸€ä¸ªæ•°çš„åiä½
    bool equal(const BigNum& other, int i) const {
        for (int j = 1; j <= i; ++j) {
            if (x[j] != other.x[j]) return false;
        }
        return true;
    }

    // è¾“å‡ºï¼ˆé«˜ä½åœ¨å‰ï¼‰
    void print() const {
        for (int i = len; i >= 1; --i) cout << x[i];
        cout << endl;
    }
};

BigNum ans; // æ€»å¾ªç¯é•¿åº¦ï¼ˆé«˜ç²¾åº¦ï¼‰

// é«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦ï¼ˆç”¨äºæ›´æ–°ansï¼‰
BigNum mulBigSmall(BigNum a, int b) {
    for (int i = 1; i <= a.len; ++i) a.x[i] *= b;
    // å¤„ç†è¿›ä½
    for (int i = 1; i <= 200; ++i) {
        a.x[i + 1] += a.x[i] / 10;
        a.x[i] %= 10;
    }
    // æ›´æ–°é•¿åº¦
    a.len = 200;
    while (a.len > 1 && a.x[a.len] == 0) a.len--;
    return a;
}

int main() {
    string s;
    cin >> s >> k;

    BigNum n;
    n.fromString(s); // åˆå§‹åŒ–nï¼ˆåªä¿ç•™åkä½ï¼‰
    BigNum original = n; // ä¿å­˜åŸå§‹nçš„åkä½
    BigNum mul = n;       // ä¹˜æ•°ï¼Œåˆå§‹ä¸ºn

    ans.x[1] = 1; ans.len = 1; // åˆå§‹å¾ªç¯é•¿åº¦ä¸º1

    for (int i = 1; i <= k; ++i) { // é€ä½å¤„ç†åˆ°åkä½
        BigNum current = original; // å½“å‰å¹‚çš„å€¼ï¼Œåˆå§‹ä¸ºn^1
        int j;
        bool found = false;
        for (j = 1; j <= 10; ++j) { // æšä¸¾jï¼ˆæœ€å¤š10æ¬¡ï¼‰
            current = current * mul; // ä¹˜mulï¼ˆå³n^L_{i-1}ï¼‰
            if (current.equal(original, i)) { // åiä½ç­‰äºåŸå§‹å€¼
                found = true;
                break;
            }
        }
        if (!found) { // æ²¡æ‰¾åˆ°ï¼Œæ— è§£
            cout << -1 << endl;
            return 0;
        }
        ans = mulBigSmall(ans, j); // æ€»å¾ªç¯é•¿åº¦ä¹˜j
        // æ›´æ–°mulï¼šmul = mul^jï¼ˆå³n^{L_{i-1} * j} = n^{L_i}ï¼‰
        BigNum temp = mul;
        for (int t = 1; t < j; ++t) {
            mul = mul * temp;
        }
    }

    ans.print(); // è¾“å‡ºæ€»å¾ªç¯é•¿åº¦
    return 0;
}
```

* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. **BigNumç»“æ„ä½“**ï¼šå°è£…äº†é«˜ç²¾åº¦çš„å­˜å‚¨ã€åˆå§‹åŒ–ã€ä¹˜æ³•ã€æ¯”è¾ƒï¼›
  2. **fromString**ï¼šä»è¾“å…¥å­—ç¬¦ä¸²ä¸­æå–åkä½ï¼ˆä¸è¶³è¡¥0ï¼‰ï¼›
  3. **operator*`**ï¼šé«˜ç²¾åº¦ä¹˜æ³•ï¼Œåªä¿ç•™åkä½ï¼ˆé¿å…å†—ä½™è®¡ç®—ï¼‰ï¼›
  4. **mulBigSmall**ï¼šé«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦ï¼ˆç”¨äºæ›´æ–°æ€»å¾ªç¯é•¿åº¦ï¼‰ï¼›
  5. **ä¸»é€»è¾‘**ï¼šé€ä½é€’æ¨ï¼Œæšä¸¾jæ‰¾å€æ•°ï¼Œæ›´æ–°æ€»å¾ªç¯é•¿åº¦ï¼Œæœ€åè¾“å‡ºã€‚

### é¢˜è§£ä¸€ï¼ˆ_Life_ï¼‰æ ¸å¿ƒç‰‡æ®µèµæ
* **äº®ç‚¹**ï¼šç”¨â€œæ›´æ–°ä¹˜æ•°â€çš„æŠ€å·§å‡å°‘è®¡ç®—é‡ï¼ˆæ¯æ¬¡ä¹˜çš„æ˜¯n^L_{i-1}ï¼Œè€Œä¸æ˜¯nï¼‰ã€‚
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š
  ```cpp
  // è®¡ç®—mul = mul^jï¼ˆå³n^{L_{i-1} * j}ï¼‰
  BigNum temp = mul;
  for (int t = 1; t < j; ++t) {
      mul = mul * temp;
  }
  ```
* **ä»£ç è§£è¯»**ï¼šæ¯”å¦‚L_{i-1}=4ï¼Œj=5ï¼Œé‚£ä¹ˆmulä¼šå˜æˆn^(4*5)=n^20ã€‚è¿™æ ·ä¸‹æ¬¡è®¡ç®—åi+1ä½æ—¶ï¼Œä¹˜mulå°±ç›¸å½“äºèµ°äº†20æ­¥ï¼Œä¸éœ€è¦é‡å¤ä¹˜4æ¬¡nã€‚
* ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼š**ç”¨â€œå¹‚çš„å¹‚â€å‡å°‘ä¹˜æ³•æ¬¡æ•°**ï¼Œæ˜¯é€’æ¨çš„å…³é”®ä¼˜åŒ–ï¼


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ğŸ® åŠ¨ç”»ä¸»é¢˜ï¼šå¾ªç¯å¡”æ­å»ºè®°ï¼ˆ8ä½åƒç´ é£ï¼‰
æˆ‘ä»¬ç”¨FCçº¢ç™½æœºçš„é£æ ¼ï¼Œåšä¸€ä¸ªâ€œæ­å»ºå¾ªç¯å¡”â€çš„æ¸¸æˆï¼Œè®©ä½ ç›´è§‚çœ‹åˆ°æ¯ä¸€æ­¥çš„å¾ªç¯é•¿åº¦è®¡ç®—ï¼

### ğŸ¯ æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š
   - å·¦ä¾§æ˜¯â€œå¾ªç¯å¡”â€ï¼ˆkå±‚ï¼‰ï¼Œæ¯å±‚æ˜¯ä¸€ä¸ªåƒç´ å—ï¼Œåˆå§‹ä¸ºç°è‰²ï¼›
   - ä¸­é—´æ˜¯â€œä¹˜æ³•å·¥å‚â€ï¼šæ˜¾ç¤ºå½“å‰åiä½çš„æ•°å€¼ï¼ˆæ¯”å¦‚å1ä½æ˜¯3ï¼‰ï¼Œç”¨åƒç´ æ–¹å—æ¨¡æ‹Ÿä¹˜æ³•è¿‡ç¨‹ï¼ˆæ¯ä¹˜ä¸€æ¬¡ï¼Œæ–¹å—é—ªçƒï¼‰ï¼›
   - å³ä¾§æ˜¯â€œæ§åˆ¶é¢æ¿â€ï¼šå•æ­¥ã€è‡ªåŠ¨ã€é‡ç½®æŒ‰é’®ï¼Œè¿›åº¦æ¡ï¼ˆæ˜¾ç¤ºå½“å‰æšä¸¾jçš„è¿›åº¦ï¼‰ã€‚

2. **é€’æ¨è¿‡ç¨‹æ¼”ç¤º**ï¼š
   - **ç¬¬1å±‚ï¼ˆå1ä½ï¼‰**ï¼š
     - æ˜¾ç¤ºnçš„å1ä½ï¼ˆæ¯”å¦‚3ï¼‰ï¼›
     - æ¨¡æ‹Ÿä¹˜æ³•ï¼š3â†’9â†’7â†’1â†’3ï¼ˆå¾ªç¯é•¿åº¦4ï¼‰ï¼›
     - ç¬¬1å±‚å˜æˆè“è‰²ï¼Œæ˜¾ç¤ºâ€œLâ‚=4â€ï¼›
     - æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œæç¤ºæ‰¾åˆ°å¾ªç¯é•¿åº¦ã€‚
   - **ç¬¬2å±‚ï¼ˆå2ä½ï¼‰**ï¼š
     - æ˜¾ç¤ºnçš„å2ä½ï¼ˆæ¯”å¦‚23ï¼‰ï¼›
     - æšä¸¾j=1åˆ°5ï¼šæ¯æ¬¡ä¹˜mulï¼ˆn^4ï¼‰ï¼Œç›´åˆ°å2ä½ç­‰äº23ï¼›
     - ç¬¬2å±‚å˜æˆç»¿è‰²ï¼Œæ˜¾ç¤ºâ€œLâ‚‚=20â€ï¼ˆ4Ã—5ï¼‰ï¼›
     - æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚
   - **ç›´åˆ°ç¬¬kå±‚**ï¼š
     - æœ€åä¸€å±‚å˜æˆé‡‘è‰²ï¼Œæ˜¾ç¤ºæ€»å¾ªç¯é•¿åº¦ï¼›
     - æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆFCé£æ ¼çš„â€œé€šå…³éŸ³ä¹â€ï¼‰ã€‚

3. **äº¤äº’è®¾è®¡**ï¼š
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»ä¸€æ¬¡ï¼Œèµ°ä¸€æ­¥é€’æ¨ï¼›
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šæ¯ç§’èµ°ä¸€æ­¥ï¼Œè¿›åº¦æ¡æ˜¾ç¤ºå½“å‰æ­¥éª¤ï¼›
   - **é‡ç½®**ï¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ï¼›
   - **éŸ³æ•ˆå¼€å…³**ï¼šå¯ä»¥é€‰æ‹©å¼€å¯/å…³é—­éŸ³æ•ˆï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚

### ğŸ¨ è®¾è®¡æ€è·¯
- **åƒç´ é£æ ¼**ï¼šç”¨8ä½è‰²æ¿ï¼ˆæ¯”å¦‚è“è‰²#0000FFã€ç»¿è‰²#00FF00ã€é‡‘è‰²#FFD700ï¼‰ï¼Œæ¨¡æ‹ŸFCæ¸¸æˆçš„æ€€æ—§æ„Ÿï¼›
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæŠŠæ¯ä¸€æ­¥é€’æ¨å˜æˆâ€œæ­å»ºä¸€å±‚å¡”â€ï¼Œå®Œæˆä¸€å±‚å°±æœ‰æˆå°±æ„Ÿï¼›
- **éŸ³æ•ˆæç¤º**ï¼šå…³é”®æ“ä½œï¼ˆæ‰¾åˆ°jã€å®Œæˆkå±‚ï¼‰ç”¨éŸ³æ•ˆå¼ºåŒ–è®°å¿†ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ§© é€šç”¨æ€è·¯è¿ç§»
é€’æ¨+é«˜ç²¾åº¦çš„æ€è·¯å¯ä»¥è§£å†³å¾ˆå¤šâ€œå¤§æ•°å¾ªç¯â€æˆ–â€œé€ä½æ±‚è§£â€çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š
1. æ±‚å¤§æ•°çš„å¹‚åkä½çš„å¾ªç¯èŠ‚ï¼ˆæœ¬é¢˜ï¼‰ï¼›
2. æ±‚å¤§æ•°çš„é˜¶ä¹˜åkä½çš„éé›¶æ•°å­—ï¼›
3. æ±‚å¤§æ•°çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬né¡¹çš„åkä½ã€‚

### ğŸ“š æ´›è°·ç»ƒä¹ æ¨è
1. **æ´›è°· P1226** - å¿«é€Ÿå¹‚æ¨¡æ¿  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šç»ƒä¹ é«˜ç²¾åº¦å¿«é€Ÿå¹‚ï¼Œå·©å›ºâ€œå¹‚çš„å¹‚â€çš„æŠ€å·§ã€‚
2. **æ´›è°· P1009** - é˜¶ä¹˜ä¹‹å’Œ  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šç»ƒä¹ é«˜ç²¾åº¦åŠ æ³•å’Œä¹˜æ³•ï¼Œç†è§£â€œé€ä½å¤„ç†â€çš„æ€æƒ³ã€‚
3. **æ´›è°· P1045** - éº¦æ£®æ•°  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šç”¨é«˜ç²¾åº¦å¿«é€Ÿå¹‚æ±‚2^p-1çš„å500ä½ï¼Œå¼ºåŒ–â€œåªä¿ç•™åkä½â€çš„ä¼˜åŒ–ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

### ğŸ“ æ¥è‡ªé¢˜è§£çš„å®è´µç»éªŒ
- **_Life_çš„æ‰‹ç©ä¾‹å­**ï¼šé‡åˆ°å¤æ‚é—®é¢˜ï¼Œå…ˆæ‰‹åŠ¨æ¨¡æ‹Ÿå°ä¾‹å­ï¼ˆæ¯”å¦‚198123 4ï¼‰ï¼Œèƒ½å¿«é€Ÿç†è§£æ€è·¯ï¼›
- **Shadow_Soldierçš„è¯æ˜**ï¼šç®—æ³•çš„æ­£ç¡®æ€§éœ€è¦æ•°å­¦æ”¯æ’‘ï¼Œæ¯”å¦‚â€œå¾ªç¯é•¿åº¦æ˜¯å€æ•°â€çš„å¼•ç†ï¼Œèƒ½å¸®ä½ è¯´æœè‡ªå·±â€œè¿™æ ·åšæ˜¯å¯¹çš„â€ï¼›
- **vectorwyxçš„å›¾è®ºè§’åº¦**ï¼šæ¢ä¸ªè§’åº¦çœ‹é—®é¢˜ï¼ˆæ¯”å¦‚æŠŠå¹‚çœ‹ä½œç¯ï¼‰ï¼Œèƒ½å‘ç°æ–°çš„è§„å¾‹ã€‚


## ç»“è¯­
è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯**é€’æ¨æ€æƒ³**â€”â€”æŠŠå¤§é—®é¢˜æ‹†æˆå°é—®é¢˜ï¼Œé€æ­¥è§£å†³ï¼›åŠ ä¸Š**é«˜ç²¾åº¦è®¡ç®—**â€”â€”å¤„ç†è¶…çº§å¤§æ•°ã€‚é€šè¿‡â€œæ­å¾ªç¯å¡”â€çš„åŠ¨ç”»ï¼Œä½ èƒ½ç›´è§‚çœ‹åˆ°æ¯ä¸€æ­¥çš„å˜åŒ–ï¼›é€šè¿‡ç»ƒä¹ ç›¸ä¼¼é¢˜ç›®ï¼Œä½ èƒ½å·©å›ºçŸ¥è¯†ç‚¹ã€‚è®°ä½ï¼š**ç¼–ç¨‹æ˜¯â€œæ‹†é—®é¢˜â€çš„è‰ºæœ¯**ï¼Œå†å¤§çš„é—®é¢˜ï¼Œæ‹†æˆå°æ­¥éª¤ï¼Œæ€»èƒ½è§£å†³ï¼ğŸ’ª

ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼

---
å¤„ç†ç”¨æ—¶ï¼š103.71ç§’
# é¢˜ç›®ä¿¡æ¯

# [BalticOI 2011] Growing Trees (Day1)

## é¢˜ç›®æè¿°

ç»™å‡ºä¸€ä¸ªé•¿åº¦ä¸º $N$ çš„æ•°ç»„ $a$ï¼Œæ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å–å€¼èŒƒå›´å‡ä¸º $[1,N]$ï¼ˆæ²¡è¯´äº’ä¸ç›¸åŒï¼‰ã€‚
æ¥ä¸‹æ¥æœ‰ $M$ ç»„æ“ä½œï¼Œæ“ä½œåˆ†ä¸ºä¸¤ç§ï¼š
1. $\texttt{F}\:\:c\:\:h$  
å°†æ»¡è¶³ $a[i] \ge h$ çš„æ‰€æœ‰ $a[i]$ ä¸­æœ€å°çš„ $c$ ä¸ªæ•°éƒ½ $+1$ï¼›
2. $\texttt{C}\:\:max\:\:min$  
è¾“å‡ºæ»¡è¶³ $min \le a[i] \le max$ çš„ $a[i]$ çš„ä¸ªæ•°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 7
1 3 2 5 2
F 2 1
C 3 6
F 2 3
C 6 8
F 2 1
F 2 2
C 3 5```

### è¾“å‡º

```
3
0
5```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šGrowing Trees (BalticOI 2011) æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### **1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«**
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`æ•°æ®ç»“æ„åº”ç”¨ï¼ˆå¹³è¡¡æ ‘/æ ‘çŠ¶æ•°ç»„æŠ€å·§ï¼‰`  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜è¦æ±‚ç»´æŠ¤åŠ¨æ€å˜åŒ–çš„æ ‘é«˜åºåˆ—ï¼Œæ ¸å¿ƒéš¾ç‚¹åœ¨äºé«˜æ•ˆå¤„ç† **Fæ“ä½œ**ï¼šæ‰¾åˆ°â‰¥hçš„æœ€å°cæ£µæ ‘é«˜åº¦+1ï¼Œå¹¶ä¿æŒåºåˆ—æœ‰åºæ€§ã€‚è¿™å°±åƒå›­ä¸æ–½è‚¥ï¼šå…ˆå®šä½ç¬¦åˆæ¡ä»¶çš„æ ‘ï¼ˆâ‰¥hï¼‰ï¼Œä»ä¸­æŒ‘é€‰æœ€çŸ®çš„cæ£µæ–½è‚¥ï¼ˆ+1ï¼‰ï¼Œä½†æ–½è‚¥åéƒ¨åˆ†æ ‘å¯èƒ½"é•¿é«˜"è€Œç ´åé¡ºåºï¼Œéœ€è¦é‡æ–°è°ƒæ•´ä½ç½®ã€‚  
- **é¢˜è§£æ€è·¯å¯¹æ¯”**ï¼šä¸»æµè§£æ³•åˆ†ä¸¤ç±»â€”â€”  
  - **å¹³è¡¡æ ‘ï¼ˆFHQ Treap/Splayï¼‰**ï¼šé€šè¿‡åˆ†è£‚/åˆå¹¶åŠ¨æ€è°ƒæ•´åºåˆ—ç»“æ„ï¼Œå¤©ç„¶æ”¯æŒåŠ¨æ€æœ‰åºåºåˆ—æ“ä½œã€‚  
  - **æ ‘çŠ¶æ•°ç»„**ï¼šåˆ©ç”¨å·®åˆ†+äºŒåˆ†æ¨¡æ‹Ÿæœ‰åºåºåˆ—ï¼Œé€šè¿‡é‡å®šä½ä¿®æ”¹åŒºé—´è§£å†³é¡ºåºç ´åé—®é¢˜ã€‚  
- **å¯è§†åŒ–è®¾è®¡**ï¼šé‡‡ç”¨**8-bitåƒç´ é£æ ¼**æ¨¡æ‹Ÿæ ‘æœ¨ç”Ÿé•¿è¿‡ç¨‹ã€‚å…³é”®æ­¥éª¤ï¼š  
  - é«˜äº®â‰¥hçš„æ ‘æœ¨ï¼ˆé»„è‰²è¾¹æ¡†ï¼‰ï¼Œé—ªçƒé€‰ä¸­å‰cæ£µï¼ˆçº¢è‰²é—ªçƒï¼‰ï¼Œæ•°å€¼+1æ—¶æ˜¾ç¤ºâ†‘åŠ¨ç”»ã€‚  
  - è‹¥æ ‘æœ¨é«˜åº¦è¶…è¿‡é‚»å±…ï¼Œè§¦å‘åƒç´ å—æ»‘åŠ¨åŠ¨ç”»ï¼ˆéŸ³æ•ˆï¼šç§»åŠ¨"å’”åš“"å£°ï¼Œé•¿é«˜"å®"å£°ï¼‰ã€‚  
  - äº¤äº’æ§åˆ¶é¢æ¿æ”¯æŒæ­¥è¿›æ‰§è¡Œã€è°ƒé€Ÿæ»‘å—ï¼ŒèƒŒæ™¯é…8-bitå†œåœºBGMå¢å¼ºè¶£å‘³æ€§ã€‚

---

#### **2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ**
**é¢˜è§£ä¸€ï¼šæŸ³æ˜“è¾°ï¼ˆæ ‘çŠ¶æ•°ç»„ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ç›´å‡»æœ¬è´¨â€”â€”ç”¨æ ‘çŠ¶æ•°ç»„ç»´æŠ¤æ’åºååºåˆ—çš„å·®åˆ†æ•°ç»„ï¼Œé€šè¿‡**äºŒåˆ†å®šä½ä¸´ç•Œç‚¹**ï¼ˆ`left()`æ‰¾é¦–ä¸ªâ‰¥hä½ç½®ï¼Œ`right()`æ‰¾æœ«ä¸ªâ‰¤maxä½ç½®ï¼‰ã€‚ä»£ç è§„èŒƒï¼ˆå˜é‡å`l/r/s`å«ä¹‰æ˜ç¡®ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆç‰¹åˆ¤ä¿®æ”¹æ•°è¶…èŒƒå›´ï¼‰ã€‚äº®ç‚¹ï¼š**ç©ºé—´å¤æ‚åº¦O(1)**ï¼Œæ— O2ä¼˜åŒ–ä¸‹æ•ˆç‡å‰åˆ—ï¼Œå±•ç°æ ‘çŠ¶æ•°ç»„çš„ç®€æ´å¨åŠ›ã€‚

**é¢˜è§£äºŒï¼š_luanyi_ï¼ˆFHQ Treapï¼‰**  
* **ç‚¹è¯„**ï¼šé€»è¾‘ä¸¥è°¨ï¼Œè¯¦ç»†è§£é‡Š**å¤šé‡åˆ†è£‚è°ƒæ•´é¡ºåº**çš„æ ¸å¿ƒæ€æƒ³ã€‚ä»£ç ä¸­`push_down`ç»´æŠ¤æ ‡è®°ä¼ é€’ï¼Œé€šè¿‡æŒ‰å€¼åˆ†è£‚ï¼ˆ`split_val`ï¼‰å’ŒæŒ‰æ’ååˆ†è£‚ï¼ˆ`splitt`ï¼‰ç²¾å‡†å®šä½åŒºé—´ã€‚äº®ç‚¹ï¼š**"äººç±»æ™ºæ…§"åˆå¹¶ç­–ç•¥**â€”â€”å°†åŠ 1åçš„åŒºé—´æ‹†åˆ†ä¸º`ll â‰¤ rl â‰¤ lr â‰¤ rr`å†åˆå¹¶ï¼Œå®Œç¾è§£å†³é¡ºåºç ´åé—®é¢˜ã€‚

**é¢˜è§£ä¸‰ï¼šagicyï¼ˆSplayï¼‰**  
* **ç‚¹è¯„**ï¼šç»“æ„æ¸…æ™°ï¼Œ**å“¨å…µèŠ‚ç‚¹å¤„ç†**ï¼ˆæ­£è´Ÿæ— ç©·ï¼‰é¿å…è¾¹ç•Œé”™è¯¯ã€‚æ ¸å¿ƒå‡½æ•°`split()`æ—‹è½¬ç›®æ ‡åŒºé—´åˆ°å­æ ‘ï¼Œç›´æ¥ä¿®æ”¹æ ‡è®°ã€‚ä»£ç ä¸­`Modify()`å‡½æ•°ä½“ç°äº†Splayçš„åŒºé—´æ“ä½œç‰¹æ€§ï¼Œå®è·µä»·å€¼é«˜ä½†å®ç°è¾ƒå¤æ‚ã€‚

---

#### **3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥**
1. **éš¾ç‚¹ï¼šåŠ¨æ€ç»´æŠ¤æœ‰åºæ€§**  
   - **åˆ†æ**ï¼šFæ“ä½œåéƒ¨åˆ†æ ‘é«˜åº¦å¢åŠ ï¼Œå¯èƒ½ç ´ååŸåºåˆ—æœ‰åºæ€§ã€‚å¹³è¡¡æ ‘é€šè¿‡**åˆ†è£‚åé‡æ–°åˆå¹¶**è°ƒæ•´ç»“æ„ï¼›æ ‘çŠ¶æ•°ç»„é€šè¿‡**äºŒåˆ†é‡å®šä½**åˆ†å‰²ä¿®æ”¹åŒºé—´ã€‚  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæœ‰åºæ€§ç ´åæœ¬è´¨æ˜¯æ•°å€¼å˜åŒ–å¯¼è‡´å…ƒç´ ç›¸å¯¹ä½ç½®æ”¹å˜ï¼Œéœ€é‡æ–°é”šå®šåŒºé—´ã€‚

2. **éš¾ç‚¹ï¼šé«˜æ•ˆå®šä½ä¿®æ”¹åŒºé—´**  
   - **åˆ†æ**ï¼šéœ€å¿«é€Ÿæ‰¾åˆ°â‰¥hçš„æœ€å°cæ£µæ ‘ã€‚å¹³è¡¡æ ‘**æŒ‰å€¼åˆ†è£‚**ï¼ˆå¦‚`split(rt, h-1, left, right)`ï¼‰ï¼›æ ‘çŠ¶æ•°ç»„**äºŒåˆ†å‰ç¼€å’Œ**ï¼ˆå¦‚æŸ³æ˜“è¾°çš„`left(y)`ï¼‰ã€‚  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå®šä½æ•ˆç‡å–å†³äºæ•°æ®ç»“æ„â€”â€”å¹³è¡¡æ ‘O(log n)ï¼Œæ ‘çŠ¶æ•°ç»„O(logÂ²n)ã€‚

3. **éš¾ç‚¹ï¼šå¤„ç†ç›¸åŒé«˜åº¦æ ‘æœ¨**  
   - **åˆ†æ**ï¼šä¿®æ”¹å¯èƒ½åªå½±å“éƒ¨åˆ†ç›¸åŒé«˜åº¦çš„æ ‘ï¼ˆå¦‚æ ·ä¾‹ä¸­ä¸¤ä¸ªé«˜åº¦2çš„æ ‘ä»…ä¿®æ”¹ä¸€ä¸ªï¼‰ã€‚è§£æ³•ï¼š**äºŒæ¬¡åˆ†è£‚**â€”â€”å…ˆæŒ‰å€¼åˆ†è£‚ï¼Œå†æŒ‰æ’ååˆ†è£‚ç›¸åŒå€¼åŒºé—´ï¼ˆå¦‚_luanyi_å°†`rl`ä¸`lr`äº¤æ¢åˆå¹¶ï¼‰ã€‚  
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç›¸åŒå€¼çš„å…ƒç´ éœ€è§†ä¸ºå¯åˆ†å‰²çš„ç‹¬ç«‹åŒºé—´ã€‚

**âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“**  
- **æŠ€å·§1 é—®é¢˜åˆ†è§£**ï¼šå°†Fæ“ä½œæ‹†è§£ä¸º **å®šä½â†’ä¿®æ”¹â†’é‡ç»„** ä¸‰æ­¥ï¼ˆå¦‚æ ‘çŠ¶æ•°ç»„åˆ†`[z, l-1]`å’Œ`[l, r]`ä¸¤æ®µä¿®æ”¹ï¼‰ã€‚  
- **æŠ€å·§2 æ•°æ®ç»“æ„é€‰æ‹©**ï¼š  
  - å¹³è¡¡æ ‘ï¼šé€‚åˆé¢‘ç¹åŠ¨æ€æ’å…¥/åˆ é™¤ï¼ˆFHQ Treapä»£ç è¾ƒçŸ­ï¼‰ã€‚  
  - æ ‘çŠ¶æ•°ç»„ï¼šé€‚åˆé™æ€åºåˆ—+åŒºé—´æŸ¥è¯¢ï¼ˆç é‡å°æ˜“è°ƒè¯•ï¼‰ã€‚  
- **æŠ€å·§3 è¾¹ç•Œé˜²å¾¡**ï¼š  
  - æ£€æŸ¥`c > ç¬¦åˆæ¡ä»¶æ•°é‡`æ—¶å–`min`ï¼ˆå¦‚`c = min(c, p[right].sz)`ï¼‰ã€‚  
  - å“¨å…µèŠ‚ç‚¹å¤„ç†æç«¯å€¼ï¼ˆå¦‚Splayè§£æ³•ï¼‰ã€‚  

---

#### **4. C++æ ¸å¿ƒä»£ç å®ç°èµæ**
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆæ ‘çŠ¶æ•°ç»„æ³•ï¼‰**  
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 1e5+5;
int n, tree[N], a[N];

void add(int pos, int val) {
    while (pos <= n) tree[pos] += val, pos += pos & -pos;
}
int sum(int pos) {
    int res = 0;
    while (pos) res += tree[pos], pos -= pos & -pos;
    return res;
}
int lower_bound(int x) { // é¦–ä¸ªâ‰¥xçš„ä½ç½®
    int l = 1, r = n, ans = n+1;
    while (l <= r) {
        int mid = (l+r) >> 1;
        sum(mid) >= x ? ans = mid, r = mid-1 : l = mid+1;
    }
    return ans;
}
int upper_bound(int x) { // æœ€åä¸€ä¸ªâ‰¤xçš„ä½ç½®
    int l = 1, r = n, ans = 0;
    while (l <= r) {
        int mid = (l+r) >> 1;
        sum(mid) <= x ? ans = mid, l = mid+1 : r = mid-1;
    }
    return ans;
}
int main() {
    cin >> n >> m;
    for (int i = 1; i <= n; i++) cin >> a[i];
    sort(a+1, a+n+1);
    for (int i = 1; i <= n; i++) add(i, a[i]-a[i-1]); // å·®åˆ†å»ºæ ‘
    while (m--) {
        char op; int c, h;
        cin >> op >> c >> h;
        if (op == 'F') {
            int pos = lower_bound(h);
            if (pos > n) continue;
            c = min(c, n - pos + 1);
            int new_val = sum(pos + c - 1); // ä¿®æ”¹åçš„ä¸´ç•Œå€¼
            int L = lower_bound(new_val), R = upper_bound(new_val);
            add(pos, 1); add(L, -1);            // ä¿®æ”¹[z, L-1]
            add(R - c + 1, 1); add(R+1, -1);    // ä¿®æ”¹éƒ¨åˆ†ç›¸åŒå€¼
        } else {
            int L = lower_bound(c), R = upper_bound(h);
            cout << max(0, R - L + 1) << endl;
        }
    }
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. æ ‘çŠ¶æ•°ç»„ç»´æŠ¤æ’åºååºåˆ—çš„**å·®åˆ†æ•°ç»„**ï¼ˆ`add(i, a[i]-a[i-1]`ï¼‰ã€‚  
2. Fæ“ä½œï¼šäºŒåˆ†å®šä½èµ·å§‹ä½ç½®`pos`â†’è®¡ç®—æ–°ä¸´ç•Œå€¼`new_val`â†’åˆ†ä¸¤æ®µä¿®æ”¹ï¼ˆ`[pos, L-1]`æ•´ä½“+1ï¼Œ`[R-c+1, R]`éƒ¨åˆ†+1ï¼‰ã€‚  
3. Cæ“ä½œï¼šäºŒåˆ†æŸ¥è¯¢åŒºé—´`[c, h]`å†…å…ƒç´ æ•°é‡ã€‚  

**ä¼˜è´¨é¢˜è§£ç‰‡æ®µèµæ**  
**é¢˜è§£ä¸€ï¼ˆæŸ³æ˜“è¾°ï¼‰ä¿®æ”¹é€»è¾‘**  
```cpp
int tmp = lower_bound(y); // å®šä½â‰¥hçš„èµ·å§‹ä½ç½®
int new_val = sum(tmp + c - 1); 
int L = lower_bound(new_val), R = upper_bound(new_val);
add(tmp, 1); add(L, -1);          // ç¬¬ä¸€æ®µæ•´ä½“+1
add(L + R - tmp - c + 1, 1);     // ç¬¬äºŒæ®µéƒ¨åˆ†+1
add(R+1, -1);
```
**äº®ç‚¹**ï¼šå·®åˆ†ä¿®æ”¹é¿å…æ˜¾å¼è°ƒæ•´åºåˆ—ï¼Œä¸¤æ®µå¼å¤„ç†ç›¸åŒå€¼åŒºé—´ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šæ ‘çŠ¶æ•°ç»„é€šè¿‡å·®åˆ†å°†åŒºé—´ä¿®æ”¹å˜ä¸ºå•ç‚¹ä¿®æ”¹ï¼Œä½†éœ€æ³¨æ„**å‰ç¼€å’Œä¸ä½ç½®çš„æ˜ å°„å…³ç³»**ã€‚

**é¢˜è§£äºŒï¼ˆ_luanyi_ï¼‰FHQåˆ†è£‚åˆå¹¶**  
```cpp
split(rt, h-1, left, right);        // åˆ†è£‚â‰¥hçš„å­æ ‘
splitt(right, c, target, rest);     // å–å‰cä¸ª
add_tag(target, 1);                 // æ•´ä½“+1
split_val(target, val, A, B);        // æŒ‰æ–°å€¼äºŒæ¬¡åˆ†è£‚
split_val(rest, val+1, C, D);
rt = merge(left, merge(A, merge(C, merge(B, D)))); // é‡ç»„æœ‰åºåºåˆ—
```
**äº®ç‚¹**ï¼šé€šè¿‡å››æ¬¡åˆ†è£‚ç²¾å‡†åˆ‡å‰²åŒºé—´ï¼Œä¿æŒæœ‰åºæ€§ã€‚  
**å­¦ä¹ ç¬”è®°**ï¼šå¹³è¡¡æ ‘ä¸­**æ ‡è®°ä¼ é€’**ï¼ˆ`push_down`ï¼‰å¿…é¡»åœ¨åˆ†è£‚/åˆå¹¶å‰å®Œæˆã€‚

---

#### **5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º**  
* **ä¸»é¢˜**ï¼š8-bitå†œåœºæ¨¡æ‹Ÿå™¨ï¼ˆæ ‘æœ¨ç”Ÿé•¿ç®¡ç†ï¼‰  
* **æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
  ![](https://via.placeholder.com/400x200?text=Pixel+Tree+Demonstration)  
  1. **åˆå§‹åŒ–**ï¼šåƒç´ æ ‘æŒ‰é«˜åº¦æ’åºæ˜¾ç¤ºï¼ˆçŸ®â†’é«˜ï¼šç»¿â†’é»„â†’çº¢ï¼‰ï¼Œæ§åˆ¶é¢æ¿å«æ­¥è¿›/è°ƒé€Ÿ/é‡ç½®æŒ‰é’®ã€‚  
  2. **Fæ“ä½œåŠ¨ç”»**ï¼š  
     - è¾“å…¥`h=3, c=2`ï¼šé«˜äº®â‰¥3çš„æ ‘ï¼ˆé»„æ¡†ï¼‰ï¼Œé€‰ä¸­å‰2æ£µï¼ˆçº¢é—ªï¼‰ã€‚  
     - é«˜åº¦+1ï¼šæ ‘æœ¨â†‘åŠ¨ç”»ï¼Œè‹¥é«˜åº¦è¶…è¿‡å³ä¾§é‚»å±…è§¦å‘æ»‘åŠ¨è°ƒæ•´ï¼ˆéŸ³æ•ˆï¼š"å®"â†’é•¿é«˜ï¼Œ"å’”åš“"â†’ç§»åŠ¨ï¼‰ã€‚  
     - æ•°æ®ç»“æ„åŒæ­¥ï¼šå³ä¾§æ˜¾ç¤ºæ ‘çŠ¶æ•°ç»„å·®åˆ†å€¼/å¹³è¡¡æ ‘ç»“æ„å˜åŒ–ã€‚  
  3. **Cæ“ä½œåŠ¨ç”»**ï¼šè¾“å…¥`min=2, max=4`ï¼Œé«˜äº®åŒºé—´å†…æ ‘æœ¨å¹¶æ˜¾ç¤ºè®¡æ•°ç»“æœã€‚  
* **æ¸¸æˆåŒ–è®¾è®¡**ï¼š  
  - **éŸ³æ•ˆ**ï¼šå…³é”®æ“ä½œè§¦å‘8-bitéŸ³æ•ˆï¼ˆé€‰æ‹©"æ»´"ï¼ŒæˆåŠŸ"èƒœåˆ©æ—‹å¾‹"ï¼‰ã€‚  
  - **å…³å¡æ¨¡å¼**ï¼šæ¯å®Œæˆä¸€ç»„F/Cæ“ä½œè§†ä¸ºå°å…³ï¼Œç§¯åˆ†å¥–åŠ±ï¼ˆæ­£ç¡®æ“ä½œ+10åˆ†ï¼‰ã€‚  
  - **AIæ¼”ç¤º**ï¼šè‡ªåŠ¨æ’­æ”¾æ¨¡å¼æ¨¡æ‹Ÿç®—æ³•æµç¨‹ï¼ˆå¦‚æ ‘çŠ¶æ•°ç»„äºŒåˆ†è¿‡ç¨‹æ˜¾ç¤ºæ‰«æçº¿ï¼‰ã€‚  

---

#### **6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜**  
* **é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
  åŠ¨æ€ç»´æŠ¤æœ‰åºåºåˆ—çš„æ“ä½œï¼ˆæ’å…¥/åˆ é™¤/åŒºé—´ä¿®æ”¹ï¼‰å¯è¿ç§»è‡³ï¼š  
  1. å­¦ç”Ÿæˆç»©æ’åç³»ç»Ÿï¼ˆå®æ—¶æ›´æ–°æ’åï¼‰ã€‚  
  2. æ¸¸æˆè§’è‰²æˆ˜åŠ›æ¦œï¼ˆæ‰¹é‡æå‡éƒ¨åˆ†è§’è‰²æˆ˜åŠ›ï¼‰ã€‚  
  3. è‚¡ç¥¨ä»·æ ¼åŒºé—´ç»Ÿè®¡ï¼ˆåŠ¨æ€æŸ¥è¯¢ä»·æ ¼åŒºé—´å†…çš„è‚¡ç¥¨æ•°ï¼‰ã€‚  

* **æ¨èé¢˜ç›®**ï¼š  
  1. **[P3369 æ™®é€šå¹³è¡¡æ ‘](https://www.luogu.com.cn/problem/P3369)**  
     â†’ å·©å›ºFHQ TreapåŸºç¡€æ“ä½œï¼Œç†è§£åˆ†è£‚/åˆå¹¶ã€‚  
  2. **[P1908 é€†åºå¯¹](https://www.luogu.com.cn/problem/P1908)**  
     â†’ æ ‘çŠ¶æ•°ç»„æ±‚é€†åºå¯¹ï¼Œæ·±åŒ–äºŒåˆ†ä¸å‰ç¼€å’Œåº”ç”¨ã€‚  
  3. **[CF702F T-Shirts](https://codeforces.com/problemset/problem/702/F)**  
     â†’ è¿›é˜¶ç»ƒä¹ ï¼Œç»“åˆå¹³è¡¡æ ‘ä¸æ‡’æ ‡è®°å¤„ç†æ‰¹é‡ä¿®æ”¹ã€‚  

---

#### **7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«**  
> **å‚è€ƒç»éªŒ**ï¼ˆæ¥è‡ª_luanyi_ï¼‰ï¼š  
> *"è°ƒè¯•æ—¶å‘ç°`push_down`é—æ¼å¯¼è‡´åˆå¹¶é”™è¯¯ï¼Œè¿™æé†’æˆ‘ä»¬ï¼šå¹³è¡¡æ ‘ä¸­ä»»ä½•åˆ†è£‚/åˆå¹¶å‰éƒ½å¿…é¡»ä¸‹ä¼ æ ‡è®°ï¼"*  
> 
> **Kayçš„æ€»ç»“**ï¼š  
> 1. **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šæ ‘çŠ¶æ•°ç»„æ³¨æ„å·®åˆ†è¾¹ç•Œï¼ˆ`add(i,1)`ä¸`add(j+1,-1)`é…å¯¹ï¼‰ã€‚  
> 2. **å¯è§†åŒ–è°ƒè¯•**ï¼šåœ¨çº¸ä¸Šæ¨¡æ‹Ÿå°è§„æ¨¡ç”¨ä¾‹ï¼ˆå¦‚n=3ï¼‰éªŒè¯åˆ†è£‚åˆå¹¶é€»è¾‘ã€‚  
> 3. **å¤æ‚åº¦æƒè¡¡**ï¼š10âµæ•°æ®é‡é¦–é€‰å¹³è¡¡æ ‘ï¼ˆO(m log n)ï¼‰ï¼Œè‹¥æ—¶é™ç´§å¯ç”¨æ ‘çŠ¶æ•°ç»„ï¼ˆO(m logÂ²n)ï¼‰ã€‚  

--- 
**ç»“è¯­**ï¼šåŠ¨æ€åºåˆ—ç»´æŠ¤æ˜¯ç®—æ³•æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ï¼ŒæŒæ¡æ•°æ®ç»“æ„æœ¬è´¨æ‰èƒ½çµæ´»åº”å¯¹å˜ç§é—®é¢˜ã€‚ä¸‹æ¬¡æˆ‘ä»¬å°†æ¢è®¨æ›´å¤æ‚çš„åŒºé—´æ“ä½œâ€”â€”å†è§ï¼ ğŸŒ³ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š142.10ç§’
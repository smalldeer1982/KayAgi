# é¢˜ç›®ä¿¡æ¯

# [ONTAK2015] Bajtman i OkrÄ…gÅ‚y Robin

## é¢˜ç›®èƒŒæ™¯

**è­¦å‘Šï¼šæ»¥ç”¨æœ¬é¢˜è¯„æµ‹å°†è¢«å°å·ï¼**

## é¢˜ç›®æè¿°

æœ‰ $n$ ä¸ªå¼ºç›—ï¼Œå…¶ä¸­ç¬¬ $i$ ä¸ªå¼ºç›—ä¼šåœ¨ $[a_i, a_i + 1], [a_i + 1, a_i + 2], \cdots, [b_i - 1, b_i]$ è¿™ä¹ˆå¤šæ®µé•¿åº¦ä¸º $1$ çš„æ—¶é—´ä¸­é€‰å‡ºä¸€ä¸ªæ—¶é—´è¿›è¡ŒæŠ¢åŠ«ï¼Œå¹¶è®¡åˆ’æŠ¢èµ° $c_i$ å…ƒã€‚ä½œä¸ºä¿å®‰ï¼Œä½ åœ¨æ¯ä¸€æ®µé•¿åº¦ä¸º $1$ çš„æ—¶é—´å†…æœ€å¤šåªèƒ½åˆ¶æ­¢ä¸€ä¸ªå¼ºç›—ï¼Œé‚£ä¹ˆä½ æœ€å¤šå¯ä»¥æŒ½å›å¤šå°‘æŸå¤±å‘¢ï¼Ÿ

## è¯´æ˜/æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 \leq n \leq 5 \times 10^3$ï¼Œ$1 \leq a_i < b_i \leq 5 \times 10^3$ï¼Œ$1 \leq c_i \leq 10^4$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4
1 4 40
2 4 10
2 3 30
1 3 20```

### è¾“å‡º

```
90```

# AIåˆ†æç»“æœ


# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[ONTAK2015] Bajtman i OkrÄ…gÅ‚y Robin æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**å¼•è¨€**  
ä»Šå¤©æˆ‘ä»¬æ¥åˆ†æè¿™é“ç»å…¸çš„åŒºé—´è°ƒåº¦é—®é¢˜ã€‚é¢˜ç›®æè¿°ï¼šæœ‰nä¸ªå¼ºç›—ï¼Œæ¯ä¸ªå¼ºç›—åœ¨[a_i, b_i]åŒºé—´å†…é€‰æ‹©ä¸€ä¸ªé•¿åº¦ä¸º1çš„æ—¶é—´æ®µæŠ¢åŠ«c_iå…ƒã€‚ä¿å®‰åœ¨æ¯ä¸ªæ—¶é—´æ®µåªèƒ½åˆ¶æ­¢ä¸€ä¸ªå¼ºç›—ï¼Œæ±‚èƒ½æŒ½å›çš„æœ€å¤§æŸå¤±ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ æ·±å…¥ç†è§£**çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾+è´¹ç”¨æµ**çš„æ ¸å¿ƒè§£æ³•ï¼Œå¹¶é€šè¿‡å¯è§†åŒ–æ¼”ç¤ºå¸®åŠ©æŒæ¡ç®—æ³•æœ¬è´¨ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š`å›¾è®º-ç½‘ç»œæµï¼ˆè´¹ç”¨æµï¼‰` + `æ•°æ®ç»“æ„ä¼˜åŒ–ï¼ˆçº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ï¼‰`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è¿™é“é¢˜æœ¬è´¨æ˜¯**å¸¦æƒåŒºé—´è°ƒåº¦é—®é¢˜**ã€‚æƒ³è±¡å¼ºç›—æ˜¯ä»»åŠ¡ï¼Œæ—¶é—´æ®µæ˜¯èµ„æºï¼Œæ¯ä¸ªèµ„æºä¸€æ¬¡åªèƒ½æœåŠ¡ä¸€ä¸ªä»»åŠ¡ã€‚å°±åƒåœ¨å¤å¤æ¸¸æˆã€Šæ—¶é—´ç®¡ç†è€…ã€‹ä¸­ï¼Œç©å®¶éœ€è¦å°†ä»»åŠ¡åˆ†é…åˆ°æ—¶é—´æ§½ä½æ¥è·å¾—æœ€é«˜åˆ†ã€‚  

- **æ ¸å¿ƒæ€è·¯**ï¼šå°†é—®é¢˜å»ºæ¨¡ä¸ºäºŒåˆ†å›¾æœ€å¤§æƒåŒ¹é…ï¼ˆå¼ºç›—ä¸ºå·¦éƒ¨ç‚¹ï¼Œæ—¶é—´æ®µä¸ºå³éƒ¨ç‚¹ï¼‰ï¼Œç”¨æœ€å¤§è´¹ç”¨æœ€å¤§æµæ±‚è§£ã€‚æš´åŠ›å»ºå›¾è¾¹æ•°O(nÂ²)ä¼šè¶…æ—¶ï¼Œéœ€ç”¨çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾å°†è¾¹æ•°é™è‡³O(n log n)ã€‚
- **ç®—æ³•æµç¨‹**ï¼š  
  1. æ„å»ºçº¿æ®µæ ‘ï¼ˆéå¶èŠ‚ç‚¹å‘å­èŠ‚ç‚¹è¿INFå®¹é‡è¾¹ï¼‰  
  2. æºç‚¹â†’å¼ºç›—ï¼ˆå®¹é‡1è´¹ç”¨0ï¼‰  
  3. å¼ºç›—â†’è¦†ç›–æ—¶é—´æ®µå¯¹åº”çš„çº¿æ®µæ ‘èŠ‚ç‚¹ï¼ˆå®¹é‡1è´¹ç”¨-c_iï¼‰  
  4. çº¿æ®µæ ‘å¶èŠ‚ç‚¹â†’æ±‡ç‚¹ï¼ˆå®¹é‡1è´¹ç”¨0ï¼‰  
  5. è·‘æœ€å°è´¹ç”¨æœ€å¤§æµï¼ˆå®é™…æ±‚æœ€å¤§è´¹ç”¨ï¼‰ï¼Œç­”æ¡ˆå–è´Ÿ
- **å¯è§†åŒ–è®¾è®¡**ï¼šé‡‡ç”¨8ä½åƒç´ é£æ ¼ï¼Œç”¨ä¸åŒé¢œè‰²åŒºåˆ†èŠ‚ç‚¹ç±»å‹ï¼ˆå¼ºç›—=çº¢è‰²ï¼Œçº¿æ®µæ ‘èŠ‚ç‚¹=ç»¿è‰²ï¼Œå¶èŠ‚ç‚¹=è“è‰²ï¼‰ã€‚åŠ¨ç”»å±•ç¤ºæµé‡æµåŠ¨å’Œè´¹ç”¨ç´¯ç§¯è¿‡ç¨‹ï¼Œå…³é”®æ­¥éª¤è§¦å‘å¤å¤éŸ³æ•ˆï¼ˆæ°´æµå£°/åŒ¹é…æˆåŠŸçš„"å®"å£°ï¼‰ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼šDarkCleverï¼ˆâ­â­â­â­â­ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°è§£é‡Šäº†çº¿æ®µæ ‘ä¼˜åŒ–åŸç†ï¼Œé…æœ‰å»ºå›¾ç¤ºæ„å›¾ã€‚ä»£ç ç”¨ç»“æ„ä½“å°è£…ç½‘ç»œæµå’Œçº¿æ®µæ ‘ï¼Œå˜é‡å‘½åè§„èŒƒï¼ˆå¦‚`addedge`å‡½æ•°ï¼‰ã€‚äº®ç‚¹æ˜¯æ­£ç¡®å¤„ç†æ—¶é—´æ®µå³ç«¯ç‚¹-1çš„è¾¹ç•Œæ¡ä»¶ï¼Œå¹¶æŒ‡å‡ºå¤æ‚åº¦ä¼˜åŒ–å…³é”®ï¼ˆè¾¹æ•°O(n log n))ã€‚å¯ç›´æ¥ç”¨äºç«èµ›ï¼Œå®è·µä»·å€¼é«˜ã€‚

**é¢˜è§£äºŒï¼šmqmhaaaa1ï¼ˆâ­â­â­â­ï¼‰**  
* **ç‚¹è¯„**ï¼šä»æš´åŠ›å»ºå›¾åˆ‡å…¥ï¼Œé€æ­¥æ¨å¯¼åˆ°çº¿æ®µæ ‘ä¼˜åŒ–ï¼Œæ•™å­¦æ€§å¼ºã€‚ä»£ç ç®€æ´ä½†ç¼ºå°‘æ³¨é‡Šï¼Œå˜é‡å‘½åå¯æ”¹è¿›ï¼ˆå¦‚`fz`å«ä¹‰ä¸æ˜ï¼‰ã€‚äº®ç‚¹æ˜¯å¼ºè°ƒ"æ—¶é—´æ®µéæ—¶é—´ç‚¹"çš„æ ¸å¿ƒæ´å¯Ÿï¼Œå¹¶ç»™å‡ºå³ç«¯ç‚¹-1çš„æ˜ç¡®è§£é‡Šã€‚

**é¢˜è§£ä¸‰ï¼šå—é˜³åˆ˜å­éª¥ï¼ˆâ­â­â­â­ï¼‰**  
* **ç‚¹è¯„**ï¼šæ³¨é‡Šè¯¦ç»†ï¼Œç»“æ„ä½“å°è£…æ¸…æ™°ï¼ˆ`SegTree`/`Edge`ï¼‰ã€‚äº®ç‚¹æ˜¯å®Œæ•´å±•ç¤ºSPFAè´¹ç”¨æµå®ç°ï¼Œå¹¶è¯´æ˜çº¿æ®µæ ‘èŠ‚ç‚¹ç¼–å·åˆ†é…é€»è¾‘ã€‚è°ƒè¯•å»ºè®®ï¼ˆå¦‚è¾“å‡ºä¸­é—´å›¾ç»“æ„ï¼‰å¯¹å­¦ä¹ è€…å¾ˆæœ‰å¸®åŠ©ã€‚

---

## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

1. **éš¾ç‚¹ï¼šé—®é¢˜æŠ½è±¡ä¸ºç½‘ç»œæµæ¨¡å‹**  
   *åˆ†æ*ï¼šéœ€è¯†åˆ«å‡º"æ¯ä¸ªæ—¶é—´æ®µåªèƒ½å¤„ç†ä¸€ä¸ªå¼ºç›—"å³äºŒåˆ†å›¾åŒ¹é…çº¦æŸã€‚ä¼˜è´¨é¢˜è§£é€šè¿‡æºç‚¹â†’å¼ºç›—â†’æ—¶é—´æ®µâ†’æ±‡ç‚¹çš„å››å±‚ç»“æ„å»ºæ¨¡ï¼Œå°†c_iè½¬åŒ–ä¸ºè´Ÿè´¹ç”¨ã€‚
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼šå°†ç°å®çº¦æŸè½¬åŒ–ä¸ºå›¾è®ºæ¨¡å‹æ˜¯è§£é¢˜å…³é”®ç¬¬ä¸€æ­¥ã€‚

2. **éš¾ç‚¹ï¼šæš´åŠ›å»ºå›¾è¾¹æ•°çˆ†ç‚¸**  
   *åˆ†æ*ï¼šå½“n=5000æ—¶ï¼ŒO(nÂ²)è¾¹æ•°é«˜è¾¾2500ä¸‡ã€‚çº¿æ®µæ ‘é€šè¿‡"åŒºé—´â†’å­åŒºé—´"çš„å±‚çº§ç»“æ„ï¼Œç”¨O(log n)æ¡è¾¹æ›¿ä»£O(n)æ¡è¾¹ï¼Œç©ºé—´é™è‡³çº¦10ä¸‡æ¡è¾¹ã€‚
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼šæ•°æ®ç»“æ„ä¼˜åŒ–æ˜¯å¤„ç†å¤§è§„æ¨¡å›¾è®ºé—®é¢˜çš„æ ¸å¿ƒæŠ€å·§ã€‚

3. **éš¾ç‚¹ï¼šæ—¶é—´æ®µè¾¹ç•Œå¤„ç†**  
   *åˆ†æ*ï¼šé¢˜ç›®ä¸­"æ—¶é—´æ®µ"æ˜¯åŒºé—´è€Œéç‚¹ï¼ˆå¦‚[1,2]æ˜¯ç¬¬1ä¸ªæ—¶é—´æ®µï¼‰ã€‚éœ€å°†b_i-1ä½¿åŒºé—´[a_i, b_i-1]å¯¹åº”çº¿æ®µæ ‘èŠ‚ç‚¹ã€‚
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼šåŒºé—´é—®é¢˜ä¸­ç«¯ç‚¹å¼€é—­æ€§ç›´æ¥å½±å“æ­£ç¡®æ€§ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é—®é¢˜åˆ†è§£æ³•**ï¼šå°†å¤æ‚çº¦æŸæ‹†è§£ä¸º"å¼ºç›—é€‰æ‹©"+"æ—¶é—´ç‹¬å "ä¸¤ä¸ªå­é—®é¢˜
- **è´Ÿæƒè½¬æ¢æŠ€å·§**ï¼šç”¨æœ€å°è´¹ç”¨æµæ±‚æœ€å¤§è´¹ç”¨ï¼ˆæ‰€æœ‰è´¹ç”¨å–è´Ÿï¼‰
- **è¾¹ç•Œé˜²å¾¡ç¼–ç¨‹**ï¼šç”¨æ–­è¨€éªŒè¯åŒºé—´èŒƒå›´ï¼ˆå¦‚`assert(b_i > a_i)`ï¼‰
- **å¤æ‚åº¦é¢„åˆ¤**ï¼šå½“n>1000æ—¶ï¼ŒO(nÂ²)è§£æ³•éœ€è­¦æƒ•

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include <bits/stdc++.h>
using namespace std;
const int INF = 0x3f3f3f3f;
const int N = 20000, M = 100000; // çº¿æ®µæ ‘èŠ‚ç‚¹+å¼ºç›—æ•°

struct Edge { int to, cap, cost, rev; };
vector<Edge> g[N];
int dis[N], pre[N], pre_edge[N];
int n, s, t, max_flow, min_cost;

void add_edge(int u, int v, int cap, int cost) {
    g[u].push_back({v, cap, cost, (int)g[v].size()});
    g[v].push_back({u, 0, -cost, (int)g[u].size()-1});
}

bool spfa() {
    queue<int> q;
    memset(dis, 0x3f, sizeof dis);
    dis[s] = 0; q.push(s);
    while (!q.empty()) {
        int u = q.front(); q.pop();
        for (size_t i = 0; i < g[u].size(); i++) {
            Edge &e = g[u][i];
            if (e.cap > 0 && dis[e.to] > dis[u] + e.cost) {
                dis[e.to] = dis[u] + e.cost;
                pre[e.to] = u; pre_edge[e.to] = i;
                q.push(e.to);
            }
        }
    }
    return dis[t] != INF;
}

void mcmf() {
    while (spfa()) {
        int f = INF;
        for (int u = t; u != s; u = pre[u])
            f = min(f, g[pre[u]][pre_edge[u]].cap);
        for (int u = t; u != s; u = pre[u]) {
            Edge &e = g[pre[u]][pre_edge[u]];
            e.cap -= f;
            g[u][e.rev].cap += f;
            min_cost += f * e.cost;
        }
        max_flow += f;
    }
}

struct SegTree {
    int id[N], idx = 0;
    void build(int rt, int l, int r) {
        id[rt] = ++idx;  // åŠ¨æ€åˆ†é…èŠ‚ç‚¹ID
        if (l == r) {
            add_edge(id[rt], t, 1, 0); // å¶èŠ‚ç‚¹â†’æ±‡ç‚¹
            return;
        }
        int mid = (l + r) >> 1;
        build(rt<<1, l, mid);
        build(rt<<1|1, mid+1, r);
        add_edge(id[rt], id[rt<<1], INF, 0); // éå¶èŠ‚ç‚¹â†’å·¦å­
        add_edge(id[rt], id[rt<<1|1], INF, 0); // éå¶èŠ‚ç‚¹â†’å³å­
    }
    void link(int rt, int l, int r, int L, int R, int from, int cost) {
        if (L <= l && r <= R) {
            add_edge(from, id[rt], 1, -cost); // å¼ºç›—â†’çº¿æ®µæ ‘èŠ‚ç‚¹
            return;
        }
        int mid = (l + r) >> 1;
        if (L <= mid) link(rt<<1, l, mid, L, R, from, cost);
        if (R > mid) link(rt<<1|1, mid+1, r, L, R, from, cost);
    }
} seg;

int main() {
    cin >> n;
    s = 0; t = N-1; // æºç‚¹=0, æ±‡ç‚¹=æœ€å¤§ID-1
    seg.build(1, 1, 5000); // æ„å»º[1,5000]çš„çº¿æ®µæ ‘
    
    for (int i = 1; i <= n; i++) {
        int a, b, c; cin >> a >> b >> c;
        add_edge(s, n+i, 1, 0); // æºç‚¹â†’å¼ºç›—
        seg.link(1, 1, 5000, a, b-1, n+i, c); // æ³¨æ„b-1!
    }
    mcmf();
    cout << -min_cost << endl; // å–è´Ÿå¾—æœ€å¤§è´¹ç”¨
}
```

**é¢˜è§£ä¸€ï¼ˆDarkCleverï¼‰æ ¸å¿ƒèµæ**  
```cpp
// ç½‘ç»œæµç»“æ„ä½“å°è£…
struct wll {
    int tot = 1, lnk[N], ter[M], nxt[M], cap[M], cost[M], ret;
    void addedge(int u, int v, int w, int c) {
        ter[++tot]=v, nxt[tot]=lnk[u], lnk[u]=tot, cap[tot]=w, cost[tot]=c;
        // åå‘è¾¹ï¼šcap[tot+1]=0, cost[tot+1]=-c
    }
    // SPFA+å¤šè·¯å¢å¹¿å®ç°ç•¥
} dc;

// çº¿æ®µæ ‘å»ºå›¾
struct xds {
    void build(int u, int l, int r) {
        if (l == r) {
            dc.addedge(u, t, 1, 0); // å¶â†’æ±‡ç‚¹
            return;
        }
        dc.addedge(u, ls(u), INF, 0); // çˆ¶â†’å·¦å­
        dc.addedge(u, rs(u), INF, 0); // çˆ¶â†’å³å­
    }
    void addfrom(int u, int v, ll w, int l, int r) {
        if (è¦†ç›–åŒºé—´) dc.addedge(from, v, 1, -w); // å¼ºç›—â†’çº¿æ®µæ ‘èŠ‚ç‚¹
    }
} out;
```
* **äº®ç‚¹**ï¼šæ¨¡å—åŒ–è®¾è®¡ä½¿ç½‘ç»œæµå’Œçº¿æ®µæ ‘å®Œå…¨è§£è€¦
* **å­¦ä¹ ç¬”è®°**ï¼šç»“æ„ä½“å°è£…æå‡ä»£ç å¤ç”¨æ€§ï¼Œé€‚åˆç«èµ›æ¨¡æ¿

**é¢˜è§£äºŒï¼ˆmqmhaaaa1ï¼‰æ ¸å¿ƒèµæ**  
```cpp
void modify(int rt, int l, int r, int L, int R, int fr) {
    if (è¦†ç›–åŒºé—´) {
        add(fr, rt, 1, 0); // ç®€åŒ–çš„å¼ºç›—â†’çº¿æ®µæ ‘èŠ‚ç‚¹
        return;
    }
    // é€’å½’æŸ¥è¯¢å­åŒºé—´
}
```
* **äº®ç‚¹**ï¼šç”¨æ ‡å‡†çº¿æ®µæ ‘æŸ¥è¯¢å®ç°è¿è¾¹ï¼Œé€»è¾‘ç›´è§‚
* **å­¦ä¹ ç¬”è®°**ï¼šç†è§£çº¿æ®µæ ‘åŒºé—´åˆ†è§£æ˜¯ä¼˜åŒ–å»ºå›¾çš„æ ¸å¿ƒ

**é¢˜è§£ä¸‰ï¼ˆå—é˜³åˆ˜å­éª¥ï¼‰æ ¸å¿ƒèµæ**  
```cpp
struct SegTree {
    int id[N<<3]; // å­˜å‚¨çº¿æ®µæ ‘èŠ‚ç‚¹å¯¹åº”å›¾ID
    void build(int p, int l, int r) {
        id[p] = ++cnt; // åŠ¨æ€åˆ†é…å›¾èŠ‚ç‚¹ID
        if (l == r) add_edge(id[p], t, 1, 0);
        else {
            add_edge(id[p], id[p<<1], INF, 0); // çˆ¶â†’å·¦å­
            add_edge(id[p], id[p<<1|1], INF, 0); // çˆ¶â†’å³å­
        }
    }
};
```
* **äº®ç‚¹**ï¼šåŠ¨æ€åˆ†é…èŠ‚ç‚¹IDé¿å…å†²çª
* **å­¦ä¹ ç¬”è®°**ï¼šå¤§è§„æ¨¡å»ºå›¾æ—¶éœ€å…¨å±€è§„åˆ’èŠ‚ç‚¹ç¼–å·ç©ºé—´

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š8ä½åƒç´ é£ã€Šæ—¶é—´å®ˆæŠ¤è€…ã€‹æ¸¸æˆ  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šçº¿æ®µæ ‘æ„å»º + è´¹ç”¨æµåŠ¨æ€æ‰§è¡Œ  
**è®¾è®¡æ€è·¯**ï¼šç”¨FCæ¸¸æˆé£æ ¼é™ä½ç†è§£é—¨æ§›ï¼ŒéŸ³æ•ˆå¼ºåŒ–å…³é”®æ“ä½œè®°å¿†  

### åŠ¨ç”»å¸§æ­¥éª¤ï¼ˆå¤å¤åƒç´ é£ï¼‰
1. **åœºæ™¯åˆå§‹åŒ–**ï¼ˆå›¾1ï¼‰  
   - å·¦ä¾§ï¼šå¼ºç›—é˜Ÿåˆ—ï¼ˆå¸¦c_iæ•°å€¼çš„åƒç´ å°äººï¼‰
   - ä¸­éƒ¨ï¼šçº¿æ®µæ ‘ç»“æ„ï¼ˆç»¿è‰²éå¶èŠ‚ç‚¹+è“è‰²å¶èŠ‚ç‚¹ï¼‰
   - åº•éƒ¨ï¼šæ—¶é—´è½´ï¼ˆ1~5000çš„åƒç´ æ ¼å­ï¼‰
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœ/å•æ­¥/é‡ç½®æŒ‰é’®+é€Ÿåº¦æ»‘å—

2. **å»ºå›¾é˜¶æ®µ**ï¼ˆå›¾2ï¼‰  
   - æºç‚¹ï¼ˆåŸå ¡å›¾æ ‡ï¼‰â†’å¼ºç›—ï¼šçº¢è‰²ç®­å¤´ï¼ˆä¼´éš"å—–"éŸ³æ•ˆï¼‰
   - å¼ºç›—â†’çº¿æ®µæ ‘èŠ‚ç‚¹ï¼šç»¿è‰²å…‰æŸæ‰«æè¦†ç›–åŒºé—´ï¼ˆåŒºé—´é«˜äº®é»„è‰²ï¼‰
   - çº¿æ®µæ ‘çˆ¶â†’å­ï¼šç°è‰²è™šçº¿è¿æ¥ï¼ˆæŒç»­æ˜¾ç¤ºï¼‰
   - å¶èŠ‚ç‚¹â†’æ±‡ç‚¹ï¼ˆå®ç®±å›¾æ ‡ï¼‰ï¼šè“è‰²æ°´æµï¼ˆæ°´æ»´éŸ³æ•ˆï¼‰

3. **è´¹ç”¨æµæ‰§è¡Œ**ï¼ˆå›¾3ï¼‰  
   ```mermaid
   graph LR
   S-->|è´¹ç”¨æµ|A[SPFAå¯»è·¯]
   A-->B[è·¯å¾„é«˜äº®é—ªçƒ]
   B-->C[æ°´æµæ²¿è·¯å¾„æµåŠ¨]
   C-->D[å¶èŠ‚ç‚¹å˜é‡‘è‰²+æ”¶é’±éŸ³æ•ˆ]
   ```
   - SPFAå¯»è·¯æ—¶ï¼šå½“å‰è·¯å¾„èŠ‚ç‚¹é—ªçƒé»„è‰²
   - å¢å¹¿æ—¶ï¼šè“è‰²ç²’å­æµæ²¿è·¯å¾„æµåŠ¨ï¼ˆæ°´æµå£°ï¼‰
   - æˆåŠŸåŒ¹é…ï¼šå¶èŠ‚ç‚¹å˜é‡‘è‰² + "å®"å£° + c_iç´¯ç§¯æ˜¾ç¤º

4. **æ¸¸æˆåŒ–å…ƒç´ **  
   - æ¯åŒ¹é…1ä¸ªå¼ºç›—ï¼šåƒç´ å°äººè¢«å…³è¿›ç›‘ç‹±ï¼Œé‡‘å¸+ c_i
   - æœ€ç»ˆç»“ç®—ï¼šæ˜¾ç¤ºæ€»é‡‘å¸æ•°ï¼ˆ8ä½æ•°å­—è·³åŠ¨åŠ¨ç”»ï¼‰
   - BGMï¼šå¾ªç¯æ’­æ”¾FCé£æ ¼èƒŒæ™¯éŸ³ä¹
   - éŸ³æ•ˆæ§åˆ¶ï¼šå¯å•ç‹¬å¼€å…³èƒŒæ™¯/æ“ä½œ/ç»“ç®—éŸ³æ•ˆ

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**é€šç”¨æŠ€å·§è¿ç§»**  
çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾é€‚ç”¨äºè§£å†³ä¸‰ç±»é—®é¢˜ï¼š
1. ç‚¹å‘è¿ç»­åŒºé—´è¿è¾¹ï¼ˆå¦‚æœ¬é¢˜ï¼‰
2. åŒºé—´å‘ç‚¹è¿è¾¹ï¼ˆå¦‚ç›‘æ§è¦†ç›–é—®é¢˜ï¼‰
3. åŒºé—´å‘åŒºé—´è¿è¾¹ï¼ˆéœ€åŒå‘çº¿æ®µæ ‘ï¼‰

**æ´›è°·æ¨èé¢˜ç›®**  
1. [P1251] é¤å·¾è®¡åˆ’é—®é¢˜  
   *æ¨èç†ç”±*ï¼šå·©å›ºè´¹ç”¨æµå»ºæ¨¡æ€æƒ³ï¼Œä½“ä¼š"æ—¶é—´æ‹†ç‚¹"æŠ€å·§  
2. [P3980] [NOI2008] å¿—æ„¿è€…æ‹›å‹Ÿ  
   *æ¨èç†ç”±*ï¼šçº¿æ€§è§„åˆ’è½¬ç½‘ç»œæµ+çº¿æ®µæ ‘ä¼˜åŒ–ç»å…¸é¢˜  
3. [P4215] è¸©æ°”çƒ  
   *æ¨èç†ç”±*ï¼šåŒºé—´é—®é¢˜è¿›é˜¶ï¼Œç»ƒä¹ çº¿æ®µæ ‘ä¸å¹¶æŸ¥é›†ç»“åˆ  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªDarkCleverçš„è°ƒè¯•ç»éªŒ**  
> "æˆ‘åœ¨å¤„ç†æ—¶é—´æ®µè¾¹ç•Œæ—¶ï¼Œæœ€åˆå¿½ç•¥äº†b_iéœ€è¦å‡1ï¼Œå¯¼è‡´WAäº†3ä¸ªç‚¹ã€‚é€šè¿‡è¾“å‡ºä¸­é—´å›¾ç»“æ„ï¼ˆç”¨Graphvizå¯è§†åŒ–ï¼‰æ‰å®šä½åˆ°é—®é¢˜ã€‚"

**ç‚¹è¯„**ï¼šè¿™ä¸ªæ•™è®­å¾ˆå…¸å‹ï¼åœ¨åŒºé—´é—®é¢˜ä¸­ï¼š  
- å•ä½æ—¶é—´æ®µ[a,a+1]å¯¹åº”é—­åŒºé—´[a,a]æ˜¯å¸¸è§é”™è¯¯  
- è°ƒè¯•æ—¶å¯è§†åŒ–å›¾ç»“æ„ï¼ˆå“ªæ€•æ˜¯å°è§„æ¨¡caseï¼‰èƒ½å¿«é€Ÿå®šä½é€»è¾‘é”™è¯¯  
- é˜²å¾¡æ€§ç¼–ç¨‹ï¼šæ·»åŠ `assert(b_i > a_i)`ç­‰æ ¡éªŒ

---

**ç»“è¯­**  
é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾+è´¹ç”¨æµçš„å¼ºå¤§ç»„åˆæŠ€ã€‚è®°ä½ï¼šå¤æ‚ç®—æ³•å¾€å¾€ç”±åŸºç¡€ç»„ä»¶ï¼ˆçº¿æ®µæ ‘+ç½‘ç»œæµï¼‰ç»„åˆè€Œæˆã€‚å¤šç»ƒä¹ å»ºæ¨¡æ€ç»´ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ä½ ä¹Ÿèƒ½è®¾è®¡å‡ºä¼˜é›…çš„è§£æ³•ï¼ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š227.45ç§’
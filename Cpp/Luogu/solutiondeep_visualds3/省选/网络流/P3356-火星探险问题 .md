# é¢˜ç›®ä¿¡æ¯

# ç«æ˜Ÿæ¢é™©é—®é¢˜ 

## é¢˜ç›®æè¿°

ç«æ˜Ÿæ¢é™©é˜Ÿçš„ç™»é™†èˆ±å°†åœ¨ç«æ˜Ÿè¡¨é¢ç€é™†ï¼Œç™»é™†èˆ±å†…æœ‰å¤šéƒ¨éšœç¢ç‰©æ¢æµ‹è½¦ã€‚ç™»é™†èˆ±ç€é™†åï¼Œæ¢æµ‹è½¦å°†ç¦»å¼€ç™»é™†èˆ±å‘å…ˆæœŸåˆ°è¾¾çš„ä¼ é€å™¨æ–¹å‘ç§»åŠ¨ã€‚  

æ¢æµ‹è½¦åœ¨ç§»åŠ¨ä¸­è¿˜å¿…é¡»é‡‡é›†å²©çŸ³æ ‡æœ¬ã€‚æ¯ä¸€å—å²©çŸ³æ ‡æœ¬ç”±æœ€å…ˆé‡åˆ°å®ƒçš„æ¢æµ‹è½¦å®Œæˆé‡‡é›†ã€‚æ¯å—å²©çŸ³æ ‡æœ¬åªèƒ½è¢«é‡‡é›†ä¸€æ¬¡ã€‚å²©çŸ³æ ‡æœ¬è¢«é‡‡é›†åï¼Œå…¶ä»–æ¢æµ‹è½¦å¯ä»¥ä»åŸæ¥å²©çŸ³æ ‡æœ¬æ‰€åœ¨å¤„é€šè¿‡ã€‚æ¢æµ‹è½¦ä¸èƒ½é€šè¿‡æœ‰éšœç¢çš„åœ°é¢ã€‚  

æœ¬é¢˜é™å®šæ¢æµ‹è½¦åªèƒ½ä»ç™»é™†å¤„æ²¿ç€å‘å—æˆ–å‘ä¸œçš„æ–¹å‘æœä¼ é€å™¨ç§»åŠ¨ï¼Œè€Œä¸”å¤šä¸ªæ¢æµ‹è½¦å¯ä»¥åœ¨åŒä¸€æ—¶é—´å æ®åŒä¸€ä½ç½®ã€‚å¦‚æœæŸä¸ªæ¢æµ‹è½¦åœ¨åˆ°è¾¾ä¼ é€å™¨ä»¥å‰ä¸èƒ½ç»§ç»­å‰è¿›ï¼Œåˆ™è¯¥è½¦æ‰€é‡‡é›†çš„å²©çŸ³æ ‡æœ¬å°†å…¨éƒ¨æŸå¤±ã€‚


ç”¨ä¸€ä¸ª $p \times q$ ç½‘æ ¼è¡¨ç¤ºç™»é™†èˆ±ä¸ä¼ é€å™¨ä¹‹é—´çš„ä½ç½®ã€‚ç™»é™†èˆ±çš„ä½ç½®åœ¨ 
$(x_1,y_1)$ å¤„ï¼Œä¼ é€å™¨çš„ä½ç½®åœ¨ $(x_py_q)$ å¤„ã€‚

$$\begin{bmatrix} (x_1,y_1) & (x_2,y_1) & \dots & (x_{p-1},y_1) & (x_p,y_1) \\ (x_1,y_2) & (x_2,y_2) & \dots & (x_{p-1},y_2) & (x_p,y_2) \\ \dots & \dots & \dots & \dots & \dots \\ (x_1,y_{q-1}) & (x_2,y_{q-1}) & \dots & (x_{p-1},y_{q-1}) & (x_p,y_{q-1}) \\ (x_1,y_q) & (x_2,y_q) & \dots & (x_{p-1},y_q) & (x_p,y_q) \end{bmatrix}$$

ç»™å®šæ¯ä¸ªä½ç½®çš„çŠ¶æ€ï¼Œè®¡ç®—æ¢æµ‹è½¦çš„æœ€ä¼˜ç§»åŠ¨æ–¹æ¡ˆï¼Œä½¿åˆ°è¾¾ä¼ é€å™¨çš„æ¢æµ‹è½¦çš„æ•°é‡æœ€å¤šï¼Œè€Œä¸”æ¢æµ‹è½¦é‡‡é›†åˆ°çš„å²©çŸ³æ ‡æœ¬çš„æ•°é‡æœ€å¤šã€‚


## è¯´æ˜/æç¤º

ã€æ•°æ®èŒƒå›´ã€‘
å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 \le n,p,q \le 35$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
2
10
8
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 1 0 0 0
0 0 0 1 0 2 0 0 0 0
1 1 0 1 2 0 0 0 0 1
0 1 0 0 2 0 1 1 0 0
0 1 0 1 0 0 1 1 0 0
0 1 2 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0 0 0```

### è¾“å‡º

```
1 1
1 1
1 1
1 1
1 0
1 0
1 1
1 1
1 1
1 1
1 0
1 0
1 1
1 0
1 0
1 0
2 1
2 1
2 1
2 1
2 0
2 0
2 0
2 0
2 1
2 0
2 0
2 1
2 0
2 1
2 1
2 1```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šç«æ˜Ÿæ¢é™©é—®é¢˜ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š**ç½‘ç»œæµå»ºæ¨¡ä¸æœ€å¤§è´¹ç”¨æœ€å¤§æµ**

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è§£å†³ç«æ˜Ÿæ¢é™©é—®é¢˜ï¼Œå…³é”®åœ¨äºå°†æ¢æµ‹è½¦ç§»åŠ¨è·¯å¾„è½¬åŒ–ä¸º**ç½‘ç»œæµæ¨¡å‹**ã€‚æƒ³è±¡æ¢æµ‹è½¦æ˜¯æ°´æµï¼Œå²©çŸ³æ ‡æœ¬æ˜¯è·¯ä¸Šçš„é‡‘å¸ï¼Œè€Œç½‘æ ¼æ˜¯æ°´ç®¡ç½‘ç»œã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
> - **æ‹†ç‚¹å¤„ç†**ï¼šæ¯ä¸ªç½‘æ ¼ç‚¹æ‹†ä¸ºå…¥ç‚¹ï¼ˆå…¥å£ï¼‰å’Œå‡ºç‚¹ï¼ˆå‡ºå£ï¼‰
> - **åŒé‡è¿è¾¹**ï¼šå¯¹å²©çŸ³ç‚¹ï¼ˆå€¼ä¸º2ï¼‰ï¼Œå…¥ç‚¹â†’å‡ºç‚¹å»ºä¸¤æ¡è¾¹ï¼š
>   - å®¹é‡1ã€è´¹ç”¨-1ï¼ˆé‡‡é›†æ ‡æœ¬ï¼‰
>   - å®¹é‡âˆã€è´¹ç”¨0ï¼ˆä»…é€šè¡Œï¼‰
> - **æ–¹å‘è¿è¾¹**ï¼šå‡ºç‚¹â†’ä¸‹æ–¹/å³æ–¹å…¥ç‚¹ï¼ˆå®¹é‡âˆã€è´¹ç”¨0ï¼‰
> - **æºæ±‡è®¾ç½®**ï¼šæºç‚¹â†’(1,1)å…¥ç‚¹ï¼ˆå®¹é‡nï¼‰ï¼Œ(p,q)å‡ºç‚¹â†’æ±‡ç‚¹

ğŸ® **å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š
> é‡‡ç”¨**8ä½åƒç´ é£æ ¼**ï¼ˆç±»ä¼¼ç»å…¸FCæ¸¸æˆï¼‰åŠ¨æ€æ¼”ç¤ºï¼š
> - ç½‘æ ¼åœ°å›¾ï¼šéšœç¢ï¼ˆçº¢è‰²åƒç´ å—ï¼‰ã€å²©çŸ³ï¼ˆé‡‘è‰²é—ªçƒï¼‰ã€ç©ºåœ°ï¼ˆç°è‰²ï¼‰
> - æ¢æµ‹è½¦ç§»åŠ¨ï¼šè“è‰²åƒç´ æ–¹å—æ²¿è·¯å¾„ç§»åŠ¨ï¼Œé‡‡é›†å²©çŸ³æ—¶è§¦å‘â€œå®â€éŸ³æ•ˆ
> - æµé‡å˜åŒ–ï¼šæ°´ç®¡åŠ¨ç”»æ˜¾ç¤ºå‰©ä½™å®¹é‡ï¼Œå²©çŸ³é‡‡é›†åå˜ä¸ºç°è‰²
> - æ§åˆ¶é¢æ¿ï¼šæ­¥è¿›/è°ƒé€Ÿæ»‘å—ï¼Œæ”¯æŒAIè‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼

---

#### 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆAkoasm_Xï¼‰**
* **äº®ç‚¹**ï¼š
  - å®Œæ•´æ‹†ç‚¹å»ºæ¨¡ï¼Œæ¸…æ™°å¤„ç†å²©çŸ³æ ‡æœ¬çš„åŒé‡è¿è¾¹
  - åˆ›æ–°æ€§é‡å»ºæ®‹ä½™ç½‘ç»œè¾“å‡ºè·¯å¾„ï¼Œé€»è¾‘ä¸¥è°¨
  - ä»£ç è§„èŒƒï¼ˆå˜é‡å`memo`ã€`flow`å«ä¹‰æ˜ç¡®ï¼‰
  - ç©ºé—´ä¼˜åŒ–åˆ°ä½ï¼ˆæ»šåŠ¨æ•°ç»„æ€æƒ³ï¼‰

**é¢˜è§£äºŒï¼ˆspliï¼‰**
* **äº®ç‚¹**ï¼š
  - ç®€æ´çš„è´¹ç”¨æµå®ç°ï¼ˆSPFAæ±‚æœ€é•¿è·¯ï¼‰
  - è·¯å¾„è¾“å‡ºæ—¶å·§å¦™åˆ©ç”¨åå‘è¾¹æµé‡`e[i^1].fl`
  - é‡ç‚¹æ ‡æ³¨è¾¹ç•Œå¤„ç†ï¼ˆ`if(!e[i^1].fl) continue`ï¼‰
  - å®è·µæ€§å¼ºï¼ˆå¯ç›´æ¥ç”¨äºç«èµ›ï¼‰

**é¢˜è§£ä¸‰ï¼ˆFREEHï¼‰**
* **äº®ç‚¹**ï¼š
  - è¯¦ç»†çš„å»ºå›¾æ³¨é‡Šå’Œè°ƒè¯•å¿ƒå¾—
  - å¯è§†åŒ–æ€ç»´ï¼ˆå¼ºè°ƒâ€œåƒç´ æ–¹å—â€æ•°æ®ç»“æ„å±•ç¤ºï¼‰
  - é²æ£’æ€§é«˜ï¼ˆä¸¥è°¨å¤„ç†éšœç¢ç‰©åˆ¤æ–­ï¼‰
  - æä¾›å®Œæ•´å¯è¿è¡Œçš„å‚è€ƒä»£ç 

---

#### 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **éš¾ç‚¹1ï¼šå²©çŸ³æ ‡æœ¬çš„é‡‡é›†å»ºæ¨¡**
   * **åˆ†æ**ï¼šå²©çŸ³ç‚¹éœ€åŒæ—¶æ”¯æŒã€Œå•æ¬¡é‡‡é›†ã€å’Œã€Œæ— é™é€šè¡Œã€ã€‚ä¼˜è´¨è§£æ³•é€šè¿‡**åŒè¿è¾¹**ï¼ˆå®¹é‡1è´¹ç”¨1 + å®¹é‡âˆè´¹ç”¨0ï¼‰ç²¾ç¡®å®ç°
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‚¹æƒé—®é¢˜é€šè¿‡æ‹†ç‚¹è½¬åŒ–ä¸ºè¾¹æƒ

2. **éš¾ç‚¹2ï¼šè·¯å¾„è¾“å‡ºçš„æ®‹ä½™ç½‘ç»œå¤„ç†**
   * **åˆ†æ**ï¼šåˆ©ç”¨åå‘è¾¹`e[i^1].w > 0`åˆ¤æ–­è·¯å¾„ï¼ŒDFSå›æº¯æ—¶éœ€é€’å‡æµé‡é˜²æ­¢é‡å¤
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ®‹ä½™ç½‘ç»œä¸­åå‘è¾¹æµé‡å³å®é™…ç»è¿‡æ¬¡æ•°

3. **éš¾ç‚¹3ï¼šæ–¹å‘ä¼˜å…ˆçº§å¤„ç†**
   * **åˆ†æ**ï¼šDFSæ—¶éœ€å›ºå®šç§»åŠ¨é¡ºåºï¼ˆå…ˆå³åä¸‹ï¼‰ï¼Œé¿å…è·¯å¾„äº¤å‰
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåæ ‡å·®åˆ¤æ–­ç§»åŠ¨æ–¹å‘ï¼ˆ`to_x - from_x = 1 ? "å‘ä¸‹" : "å‘å³"`ï¼‰

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æ‹†ç‚¹è½¬åŒ–**ï¼šç‚¹æƒ/æ¬¡æ•°é™åˆ¶é—®é¢˜ â†’ å…¥ç‚¹-å‡ºç‚¹è¾¹æƒ
- **åŒè¿è¾¹æŠ€å·§**ï¼šå¤„ç†ã€Œå•æ¬¡äº‹ä»¶+æ— é™é€šè¡Œã€åœºæ™¯
- **é€†å‘DFS**ï¼šæ®‹ä½™ç½‘ç»œåå‘è¾¹æµé‡æŒ‡å¯¼è·¯å¾„ç”Ÿæˆ
- **åæ ‡æ˜ å°„**ï¼šçº¿æ€§ç¼–å·`id = (x-1)*m + y`ç®€åŒ–äºŒç»´å¤„ç†

---

#### 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ
**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆä¼˜åŒ–ç‰ˆï¼‰**
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 40 * 40 * 2 + 5, INF = 1e9;

struct Edge { int to, cap, cost, rev; };
vector<Edge> G[N];
int dist[N], preV[N], preE[N], n, m, k;
bool inq[N];

void addEdge(int from, int to, int cap, int cost) {
    G[from].push_back({to, cap, cost, (int)G[to].size()});
    G[to].push_back({from, 0, -cost, (int)G[from].size()-1});
}

int minCostMaxFlow(int s, int t) {
    int res = 0;
    while (true) {
        fill(dist, dist + N, -INF);
        queue<int> q;
        dist[s] = 0, inq[s] = 1, q.push(s);
        while (!q.empty()) {
            int u = q.front(); q.pop();
            inq[u] = 0;
            for (int i = 0; i < G[u].size(); i++) {
                auto &e = G[u][i];
                if (e.cap > 0 && dist[e.to] < dist[u] + e.cost) {
                    dist[e.to] = dist[u] + e.cost;
                    preV[e.to] = u, preE[e.to] = i;
                    if (!inq[e.to]) q.push(e.to), inq[e.to] = 1;
                }
            }
        }
        if (dist[t] == -INF) break;
        int d = INF;
        for (int v = t; v != s; v = preV[v])
            d = min(d, G[preV[v]][preE[v]].cap);
        res += d * dist[t];
        for (int v = t; v != s; v = preV[v]) {
            auto &e = G[preV[v]][preE[v]];
            e.cap -= d;
            G[v][e.rev].cap += d;
        }
    }
    return res;
}

void printPath(int carId, int u) {
    if (u == n * m * 2) return; // åˆ°è¾¾ç»ˆç‚¹
    for (auto &e : G[u]) {
        if (e.cap == 0 && e.cost >= 0) continue; // è·³è¿‡éåå‘è¾¹
        if (G[e.to][e.rev].cap > 0) { // åå‘è¾¹æœ‰å‰©ä½™æµé‡
            G[e.to][e.rev].cap--;
            int diff = e.to - u;
            if (diff == 1) printf("%d 1\n", carId); // å³ç§»
            else printf("%d 0\n", carId);          // ä¸‹ç§»
            printPath(carId, e.to + n * m); // ç§»åŠ¨åˆ°å‡ºç‚¹
            return;
        }
    }
}
```

---

#### 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**è®¾è®¡æ¦‚å¿µå›¾**ï¼š
```
  [æ§åˆ¶é¢æ¿]
 å¼€å§‹/æš‚åœ  é€Ÿåº¦æ»‘å—  AIæ¼”ç¤º
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â— â†’ â†’ â†’ â†’ â†’ â†’ â—         â”‚ 
â”‚  â†“    â˜…        â†’    â—    â”‚  â˜… = å²©çŸ³ï¼ˆé‡‘è‰²é—ªçƒï¼‰
â”‚  â†“    â†’ â†’ â˜…    â†’    â†“    â”‚  â— = æ¢æµ‹è½¦ï¼ˆè“è‰²ï¼‰
â”‚  â†’ â†’ â†“    â†“    â†’ â†’  â†“    â”‚  â†’ = è·¯å¾„åŠ¨ç”»ï¼ˆç»¿è‰²ç®­å¤´ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®åŠ¨ç”»é€»è¾‘**ï¼š
1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼š
   - ç»˜åˆ¶åƒç´ ç½‘æ ¼ï¼ˆ30Ã—30åƒç´ /æ ¼ï¼‰
   - éšœç¢ç‰©æ˜¾ç¤ºä¸ºçº¢è‰²ç –å—ï¼Œå²©çŸ³ç‚¹æ˜¾ç¤ºä¸ºé—ªçƒé‡‘å¸

2. **å•æ­¥ç§»åŠ¨**ï¼š
   - æ¢æµ‹è½¦æ²¿ç»¿è‰²ç®­å¤´è·¯å¾„ç§»åŠ¨ï¼Œç§»åŠ¨æ—¶æ’­æ”¾"move.wav"
   - é‡åˆ°å²©çŸ³æ—¶è§¦å‘"coin.wav"å’Œé—ªå…‰åŠ¨ç”»

3. **AIè‡ªåŠ¨æ¼”ç¤º**ï¼š
   - æŒ‰æœ€ä¼˜è·¯å¾„è‡ªåŠ¨å‰è¿›ï¼ˆç±»ä¼¼è´ªåƒè›‡AIï¼‰
   - æ¯å®Œæˆä¸€è¾†è½¦è·¯å¾„æ˜¾ç¤º"Stage Clear!"æç¤º

4. **æ•°æ®ç»“æ„å¯è§†åŒ–**ï¼š
   - å³ä¾§é¢æ¿å®æ—¶æ˜¾ç¤ºæ®‹ä½™ç½‘ç»œæµé‡
   - å½“å‰ç‚¹æ‹†ç‚¹çŠ¶æ€ï¼ˆå…¥ç‚¹/å‡ºç‚¹ï¼‰ç”¨ä¸åŒé¢œè‰²è¾¹æ¡†

---

#### 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜
- **æŠ€å·§è¿ç§»**ï¼šæ‹†ç‚¹ç½‘ç»œæµå¯è§£å†³ï¼š
  1. æ–¹æ ¼å–æ•°é—®é¢˜ï¼ˆå¤šæ¬¡è·¯å¾„+ç‚¹æƒï¼‰
  2. æ·±æµ·æœºå™¨äººï¼ˆè¾¹æƒ+å¤šæºæ±‡ï¼‰
  3. èˆªç©ºè·¯çº¿é—®é¢˜ï¼ˆç‚¹æƒ+å¾€è¿”è·¯å¾„ï¼‰

- **æ¨èé¢˜ç›®**ï¼š
  1. [P2045] æ–¹æ ¼å–æ•°åŠ å¼ºç‰ˆ  
     *è€ƒå¯Ÿç‚¹æƒå¤šæ¬¡é‡‡é›†çš„é€šç”¨è§£æ³•*
  2. [P4009] æ±½è½¦åŠ æ²¹è¡Œé©¶é—®é¢˜  
     *ç»“åˆçŠ¶æ€åˆ†å±‚çš„ç½‘ç»œæµåº”ç”¨*
  3. [P3358] æœ€é•¿kå¯é‡åŒºé—´é›†  
     *ç¦»æ•£åŒ–+ç«¯ç‚¹æ‹†åˆ†çš„ç»å…¸æ¨¡å‹*

---

#### 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **æ¥è‡ªAkoasm_Xçš„è°ƒè¯•ç»éªŒ**ï¼š
> â€œåˆå§‹å»ºå›¾æ—¶æ··æ·†è¡Œåˆ—åæ ‡å¯¼è‡´WAï¼Œå»ºè®®ç”¨`(i-1)*m+j`ç»Ÿä¸€ç¼–å·ï¼Œå¹¶åœ¨DFSå‰éªŒè¯é¦–å°¾ç‚¹è¿é€šæ€§ã€‚â€

> **Kayçš„æ€»ç»“**ï¼š
> ç½‘ç»œæµé¢˜ç›®æ ¸å¿ƒåœ¨äº**é—®é¢˜è½¬åŒ–èƒ½åŠ›**ã€‚æœ¬é¢˜é€šè¿‡æ‹†ç‚¹å·§ç§’å¤„ç†ç‚¹æƒé™åˆ¶ï¼Œæ®‹ä½™ç½‘ç»œDFSè¾“å‡ºè·¯å¾„çš„æ–¹å¼æå…·å¯å‘æ€§ã€‚è°ƒè¯•æ—¶æ³¨æ„ï¼š
> 1. ç”¨å°æ ·ä¾‹éªŒè¯å²©çŸ³é‡‡é›†é€»è¾‘
> 2. è·¯å¾„è¾“å‡ºæ—¶å›ºå®šç§»åŠ¨é¡ºåº
> 3. è­¦æƒ•è¡Œåˆ—åæ ‡è¾“å…¥é¡ºåºï¼

---  
**è®©æˆ‘ä»¬åœ¨åƒç´ æ¢é™©çš„ä¹è¶£ä¸­æŒæ¡ç½‘ç»œæµç²¾é«“å§ï¼ğŸš€**

---
å¤„ç†ç”¨æ—¶ï¼š96.74ç§’
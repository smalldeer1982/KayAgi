# é¢˜ç›®ä¿¡æ¯

# cshå’Œzzyçš„æˆ˜äº‰

## é¢˜ç›®èƒŒæ™¯

ï¼ˆèƒŒæ™¯~~æœ‰ç‚¹~~é•¿ï¼Œä½ å¯ä»¥é€‰æ‹©è¯»å®Œï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è·³è¿‡ã€‚ï¼‰

å…¬å…ƒ 2040 å¹´ï¼Œcsh å’Œ zzy åœ¨ä¸‘å›½è›™è°·å±•å¼€äº†å…³äºéçº¿æ€§é…å¾®åˆ†æ–¹ç¨‹çš„æ­£ç¡®æ€§ä¸å¦çš„ç›¸å…³è¾©è®ºï¼Œå²ç§°ç¬¬å››æ¬¡æ•°å­¦å±æœºã€‚ä¸¤ä¸ªäººè¿‘åƒé¡µçš„éäººç±»å­¦æœ¯æ€§è®ºæ–‡ï¼Œä½¿æ•´ä¸ªä¸–ç•Œæ²¡æœ‰å…¶ä»–äººå¬å¾—æ‡‚ä»–ä»¬åœ¨è¯´ä»€ä¹ˆï¼Œäºæ˜¯ï¼Œä»¥ csh ä¸ºé¦–çš„ A æ´¾ç§‘å­¦å®¶å’Œä»¥ zzy ä¸ºé¦–çš„ B æ´¾ç§‘å­¦å®¶å±•å¼€äº†åœ¨å¤šæ¬¡å¯¹æŠ—æ— æœä¹‹åå¼€å§‹ä½¿ç”¨æ­¦è£…é©å‘½è§£å†³ï¼Œè¿›è€Œå¼•å‘äº†å…¨çƒæ€§çš„ç¬¬ä¸‰æ¬¡ä¸–ç•Œå¤§æˆ˜ã€‚ä½œä¸ºæˆ˜äº‰ä¸­ç«‹æ´¾çš„å±…æ¶¦å›½ä¸æƒ³å·å…¥ä»»ä½•ä¸€æ–¹çš„æ–—äº‰ï¼Œåªæƒ³å–å®Œæ‰‹ä¸­çš„å’–å•¡ï¼Œç„¶è€Œä¸¤æ–¹å…ƒé¦–åœ¨å¤šæ¬¡å¯¹æŠ›å‡ºæ©„æ¦„ææ— æœä¹‹åï¼Œå¯¹å±…æ¶¦å›½æå‡ºäº†ä¸€ä¸ªè¦æ±‚ï¼šè§£å†³ä»–ä»¬åœ¨æˆ˜äº‰ä¸­çš„è¿é€ç‰©èµ„é—®é¢˜ï¼Œå½“ç„¶è¿™ä¸ªé—®é¢˜æ—©å°±åœ¨ $10^0$ s å†…è¢«ä»–ä»¬è§£å†³ï¼Œä½†æ˜¯å±…æ¶¦å›½å´ä¸çŸ¥é“æ€ä¹ˆåŠï¼Œè€Œä¸”ä¹Ÿä¸èƒ½æŠ¥ä¸Šé”™è¯¯çš„ç­”æ¡ˆï¼Œäºæ˜¯å°±æ±‚åŠ©äº†èªæ˜çš„ä½ ä»¬ã€‚

## é¢˜ç›®æè¿°

ç°åœ¨æœ‰ $n$ ä¸ªè´§ç‰©å‘æºåœ°ï¼Œé‡Œé¢æ˜¯ä¸€äº›å¾…è¿é€çš„è´§ç‰©ã€‚å‰æ–¹æœ‰ $m$ ä¸ªä¸­è½¬å°å²›ï¼Œè€Œä½ çš„ç›®çš„æ˜¯å°†æ‰€æœ‰è´§ç‰©è¿åˆ°æˆ˜äº‰å‰æ²¿çš„å†›äº‹åŸºåœ°ï¼Œå…¶è¿é€è§„åˆ™å¦‚ä¸‹ï¼š

1. å°å²›åªèƒ½ç”±ç‰¹å®šçš„è´§ç‰©å‘æºåœ°å‘è´§ï¼Œå…¶ä¸­åªæœ‰å‡ ä¸ªæŒ‡å®šçš„å°å²›å¯ä»¥å‘å†›äº‹åŸºåœ°å‘è´§ã€‚
2. å°å²›ä¸å°å²›ä¹‹é—´æœ‰ $e$ æ¡èˆªé“ï¼Œæ¯æ¡èˆªé“ä¸Šæœ‰ä¸€ä¸ªæƒå€¼ $v$ ä»£è¡¨è¿™æ¡é“è·¯å¼€é€šçš„ä»£ä»·ï¼Œè€Œä¸¤ä¸ªå°å²›ä¹‹é—´å¼€é€šè´§è¿çš„ä»£ä»· $K$ æ˜¯ä¸¤ä¸ªå°å²›ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚
3. æ¯ä¸ªå°å²›ä¸ŠåŒæ—¶æœ€å¤šä¸èƒ½è¶…è¿‡ $w$ ä¸ªè´§ç‰©ã€‚
4. æ¯ä¸ªå°å²›ä¸€æ¬¡æ€§è‡³å¤šå¯¹å¤–è¿è¾“ $d$ ä¸ªè´§ç‰©ï¼Œå°å²›å¯¹æ¯ä¸ªç›®çš„åœ°è‡³å¤šé€è´§ä¸€æ¬¡ã€‚
5. æœ‰ $x$ ä¸ªç‰¹æ®Šè´§ç‰©å‘æºåœ°ï¼ˆä¸åŒ…å«åœ¨ $n$ å†…ï¼‰ä¼šè¿é€ csh å’Œ zzy ä¸¤ä¸ªäººçš„ä¸€äº›ç§äººçš„è´§ç‰©ï¼Œè¿™äº›è´§ç‰©ä¼šè¢«ä»»ä½•ä¸€ä¸ªå°å²›æ— æ¡ä»¶æ¥å—å’Œé€å‡ºï¼Œå³ä¸å— 3ï¼Œ4 æ³•åˆ™çš„å½±å“ã€‚
6. æ•´æ¡èˆªè·¯çš„å¼€å‘è´¹ç”¨ä¸ºæ¯å¯¹å°å²›å¼€é€šè´¹ç”¨ $K$ ä¸­çš„æœ€å¤§å€¼ $V$ã€‚

è¯·ä½ å¯»æ‰¾ä¸€ä¸ªæœ€å°çš„ $V$ ä½¿å¾—æ‰€æœ‰è´§ç‰©éƒ½èƒ½æŒ‰ç…§è¦æ±‚è¿é€åˆ°å†›äº‹åŸºåœ°ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ $n \le 3 \times 10^2$ï¼Œ$e \le 10^3$ã€‚

å‡ ä¸ªæç¤ºï¼š[https://www.luogu.com.cn/discuss/47710](https://www.luogu.com.cn/discuss/47710)ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 3 1 1
2 2 2
4 4 4
2 1 1
1 1 1
1 2 1
1 3 1
2 3 4```

### è¾“å‡º

```
4```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šcshå’Œzzyçš„æˆ˜äº‰ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### **1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«**
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šäºŒåˆ†ç­”æ¡ˆ + ç½‘ç»œæµå»ºæ¨¡ + æœ€çŸ­è·¯ç®—æ³•  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜éœ€è¦æœ€å°åŒ–èˆªé“å¼€è¾Ÿä»£ä»·çš„æœ€å¤§å€¼ï¼ŒåŒæ—¶ç¡®ä¿æ‰€æœ‰è´§ç‰©èƒ½é€è¾¾å†›äº‹åŸºåœ°ã€‚æ ¸å¿ƒæ€è·¯å¦‚åŒã€ŒçŒœä»·æ ¼æ¸¸æˆã€ï¼š  
> 1. **äºŒåˆ†ç­”æ¡ˆ**ï¼šçŒœæµ‹æœ€å¤§ä»£ä»·Vï¼ŒéªŒè¯æ˜¯å¦å¯è¡Œï¼ˆé€æ­¥ç¼©å°èŒƒå›´ï¼‰  
> 2. **ç½‘ç»œæµå»ºæ¨¡**ï¼šè´§ç‰©æ˜¯æ°´æµï¼Œå°å²›æ˜¯æ°´ç®¡ï¼ˆå®¹é‡é™åˆ¶ï¼‰ï¼ŒéªŒè¯æ˜¯å¦æ‰€æœ‰æ°´æµèƒ½åˆ°è¾¾ç»ˆç‚¹  
> 3. **æœ€çŸ­è·¯**ï¼šè®¡ç®—èˆªé“ä»£ä»·ï¼ˆå°å²›é—´æœ€çŸ­è·¯å¾„ï¼‰  
> - **å…³é”®éš¾ç‚¹**ï¼šå¤„ç†å°å²›å®¹é‡é™åˆ¶éœ€æ‹†ç‚¹ï¼ˆå…¥ç‚¹/å‡ºç‚¹ï¼‰ï¼Œç‰¹æ®Šè´§ç‰©å•ç‹¬å¤„ç†  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šåƒç´ åŠ¨ç”»å°†å±•ç¤ºäºŒåˆ†åŒºé—´æ”¶ç¼©ï¼ˆå·¦ä¾§ï¼‰ã€èˆªé“ç½‘ç»œåŠ¨æ€å˜åŒ–ï¼ˆå³ä¾§ï¼‰ï¼Œè´§ç‰©ï¼ˆåƒç´ æ–¹å—ï¼‰æ²¿é«˜äº®èˆªé“æµåŠ¨ï¼Œé˜»å¡æ—¶è§¦å‘çº¢è‰²é—ªçƒ  

#### **2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ**
**é¢˜è§£ä¸€ï¼ˆå¿˜æ€€æ˜Ÿï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°æ‹†è§£äºŒåˆ†éªŒè¯æµç¨‹ï¼Œä»£ç è§„èŒƒï¼š  
  - **äº®ç‚¹**ï¼šé‡è¾¹å¤„ç†ï¼ˆè¾¹æƒç´¯åŠ ï¼‰ã€Dijkstraæ±‚ç‰¹æ®Šè´§ç‰©ä¸‹ç•Œ  
  - **ä»£ç è§„èŒƒæ€§**ï¼šå˜é‡å`a[i]`ï¼ˆè´§é‡ï¼‰ã€`w[i]`ï¼ˆå®¹é‡ï¼‰å«ä¹‰æ˜ç¡®  
  - **ç®—æ³•ä¼˜åŒ–**ï¼šFloydæ±‚å…¨æºæœ€çŸ­è·¯ï¼ŒDinicç½‘ç»œæµé«˜æ•ˆéªŒè¯  
  - **å®è·µä»·å€¼**ï¼šè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆæ— è§£è¾“å‡º-1ï¼‰ï¼Œå¯ç›´æ¥ç”¨äºç«èµ›  

**é¢˜è§£äºŒï¼ˆyizhimingï¼‰**  
* **ç‚¹è¯„**ï¼šä¾§é‡ç½‘ç»œæµå»ºå›¾è§£é‡Šï¼š  
  - **äº®ç‚¹**ï¼šå†›äº‹åŸºåœ°ä½œä¸ºè¶…çº§æ±‡ç‚¹ï¼Œæ‹†ç‚¹ç»“æ„æ¸…æ™°  
  - **ä»£ç å¯è¯»æ€§**ï¼š`vector`å­˜å‚¨è´§æºå…³ç³»ï¼Œé€»è¾‘åˆ†å±‚æ˜ç¡®  
  - **æŠ€å·§**ï¼šFloydé¢„å¤„ç†+è½»é‡Dinicå®ç°  

**é¢˜è§£ä¸‰ï¼ˆorz_zï¼‰**  
* **ç‚¹è¯„**ï¼šä»£ç ç®€æ´é«˜æ•ˆï¼š  
  - **äº®ç‚¹**ï¼šæ ‡å‡†Dinicæ¨¡æ¿å¤ç”¨ï¼ŒFloydä¸äºŒåˆ†ç»“åˆç´§å¯†  
  - **ä¼˜åŒ–ç‚¹**ï¼šé‚»æ¥çŸ©é˜µå­˜è¾¹æƒï¼Œæ’åºåå¿«é€Ÿç­›é€‰èˆªé“  

---

#### **3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥**
1. **éš¾ç‚¹1ï¼šäºŒåˆ†ä¸Šä¸‹ç•Œç¡®å®š**  
   * **åˆ†æ**ï¼šä¸‹ç•Œ = ç‰¹æ®Šè´§æºåœ°åˆ°å†›äº‹åŸºåœ°çš„æœ€çŸ­è·¯æœ€å¤§å€¼ï¼ˆåå›¾Dijkstraï¼‰ï¼Œä¸Šç•Œ = æœ€çŸ­è·¯çŸ©é˜µæœ€å¤§å€¼  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç‰¹æ®Šè´§ç‰©å†³å®šå¯è¡Œæ€§ä¸‹é™  

2. **éš¾ç‚¹2ï¼šç½‘ç»œæµå»ºæ¨¡**  
   * **åˆ†æ**ï¼šä¸­è½¬å²›æ‹†ç‚¹ï¼ˆå…¥ç‚¹â†’å‡ºç‚¹ï¼‰é™åˆ¶å®¹é‡`w_i`ï¼›å‡ºè¾¹å®¹é‡`d_i`æ§åˆ¶å•æ¬¡è¿è¾“é‡  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ‹†ç‚¹è½¬åŒ–èŠ‚ç‚¹å®¹é‡ä¸ºè¾¹å®¹é‡  

3. **éš¾ç‚¹3ï¼šèˆªé“åŠ¨æ€ç­›é€‰**  
   * **åˆ†æ**ï¼šéªŒè¯æ—¶ä»…æ·»åŠ ä»£ä»·â‰¤midçš„è¾¹ï¼ˆFloydé¢„å¤„ç†æ’åºï¼‰  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé¢„å…ˆæ’åºèˆªé“é¿å…æ¯æ¬¡é‡å»ºå›¾  

**âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“**  
- **äºŒåˆ†ç­”æ¡ˆå¥—è·¯**ï¼šæœ€å¤§å€¼æœ€å°åŒ–é—®é¢˜é¦–é€‰  
- **ç½‘ç»œæµå»ºå›¾**ï¼šè¶…çº§æºç‚¹ï¼ˆè´§æºåœ°ï¼‰â†’ ä¸­è½¬å²›ï¼ˆæ‹†ç‚¹ï¼‰â†’ è¶…çº§æ±‡ç‚¹ï¼ˆå†›äº‹åŸºåœ°ï¼‰  
- **æœ€çŸ­è·¯ä¼˜åŒ–**ï¼š300èŠ‚ç‚¹ç”¨Floydï¼Œ>1000èŠ‚ç‚¹è½¬Dijkstra  

---

#### **4. C++æ ¸å¿ƒä»£ç å®ç°èµæ**
**é€šç”¨æ ¸å¿ƒå®ç°**ï¼ˆç»¼åˆé¢˜è§£ä¼˜åŒ–ï¼‰ï¼š
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 1000, INF = 1e9+7;

// ç½‘ç»œæµå»ºå›¾ï¼ˆæ‹†ç‚¹ï¼‰
struct Edge { int to, cap, rev; };
vector<Edge> G[N];
int level[N], iter[N];

void add_edge(int from, int to, int cap) {
    G[from].push_back({to, cap, (int)G[to].size()});
    G[to].push_back({from, 0, (int)G[from].size()-1});
}

// Dinicç®—æ³•
bool bfs(int s, int t) {...}
int dfs(int u, int t, int f) {...}
int max_flow(int s, int t) {...}

// éªŒè¯äºŒåˆ†å€¼mid
bool check(int mid, int n, int m, int total_goods) {
    // 1. æ¸…ç©ºç½‘ç»œæµå›¾
    // 2. å»ºå›¾ï¼šè´§æºåœ°â†’ä¸­è½¬å²›å…¥ç‚¹ â†’ ä¸­è½¬å²›å‡ºç‚¹ â†’ å…¶ä»–å²›/å†›äº‹åŸºåœ°
    // 3. ä»…æ·»åŠ mp[i][j] <= midçš„èˆªé“
    // 4. è¿”å›max_flow() == total_goods
}
```

**é¢˜è§£ä¸€ä»£ç ç‰‡æ®µèµæ**ï¼š
```cpp
// å…³é”®ï¼šæ‹†ç‚¹å¤„ç†å®¹é‡é™åˆ¶
for (int i = 1; i <= m; i++) {
    add(i+n, i+n+m, w[i]); // å…¥ç‚¹â†’å‡ºç‚¹ï¼ˆå®¹é‡w_iï¼‰
    if (b[i]) add(i+n+m, t, d[i]); // è¿å†›äº‹åŸºåœ°
}
// æ·»åŠ èˆªé“ï¼šä»…å½“æœ€çŸ­è·¯ä»£ä»·<=mid
for (auto &e : sorted_edges) {
    if (e.w > mid) break;
    add(e.u + n + m, e.v + n, d[e.u]); // å‡ºç‚¹â†’å…¥ç‚¹
}
```
> **è§£è¯»**ï¼šæ‹†ç‚¹å°†èŠ‚ç‚¹å®¹é‡è½¬ä¸ºè¾¹å®¹é‡ï¼Œ`w[i]`é™åˆ¶ä¸­è½¬æ€»é‡ã€‚`d[i]`æ§åˆ¶å•æ¬¡è¿è¾“é‡ï¼Œç¬¦åˆè§„åˆ™4ã€‚  

**é¢˜è§£äºŒå»ºå›¾æŠ€å·§**ï¼š
```cpp
// å†›äº‹åŸºåœ°ä½œä¸ºè¶…çº§æ±‡ç‚¹
S = 0, T = n + 2*m + 1; 
// ä¸­è½¬å²›iï¼šå…¥ç‚¹(i+n) â†’ å‡ºç‚¹(i+n+m)
link(i+n, i+n+m, w[i]);
```
> **å­¦ä¹ ç¬”è®°**ï¼šè¶…çº§æ±‡ç‚¹é›†ä¸­å¤„ç†ç»ˆç‚¹ï¼Œé¿å…åˆ†æ•£è¿æ¥  

---

#### **5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º**
![åƒç´ åŠ¨ç”»ç¤ºæ„å›¾](https://example.com/pixel_flow.gif)  
* **ä¸»é¢˜**ï¼š8ä½åƒç´ é£æ ¼ã€Œè´§ç‰©è¿è¾“å¤§å†’é™©ã€  
* **æ ¸å¿ƒäº¤äº’è®¾è®¡**ï¼š  
  1. **èˆªé“åŠ¨æ€é«˜äº®**ï¼šä»£ä»·â‰¤midçš„èˆªé“äº®ç»¿è‰²ï¼ˆå¦åˆ™ç°è‰²ï¼‰  
  2. **è´§ç‰©æµåŠ¨ç‰¹æ•ˆ**ï¼šæ™®é€šè´§ç‰©ï¼ˆè“è‰²æ–¹å—ï¼‰æ²¿èˆªé“ç§»åŠ¨ï¼Œè¶…è¿‡å®¹é‡æ—¶çº¢è‰²é—ªçƒ+é˜»å¡éŸ³æ•ˆ  
  3. **æ‹†ç‚¹å¯è§†åŒ–**ï¼šä¸­è½¬å²›åˆ†è£‚ä¸ºå…¥ç‚¹/å‡ºç‚¹ï¼Œ`w_i`æ˜¾ç¤ºä¸ºè¿æ¥çº¿ç²—ç»†  
  4. **æ§åˆ¶é¢æ¿**ï¼š  
     - æ­¥è¿›/æš‚åœ/é‡ç½®æŒ‰é’®  
     - è°ƒé€Ÿæ»‘å—ï¼ˆ0.5x~2xé€Ÿåº¦ï¼‰  
     - èˆªé“ç­›é€‰å¼€å…³ï¼ˆæ˜¾ç¤º/éšè—ç‰¹æ®Šè´§ç‰©è·¯å¾„ï¼‰  
* **éŸ³æ•ˆè®¾è®¡**ï¼š  
  - è´§ç‰©ç§»åŠ¨ï¼š8-bit "æ»´ç­”"å£°  
  - æˆåŠŸè¿è¾“ï¼šèƒœåˆ©éŸ³æ•ˆï¼ˆç±»ä¼¼ã€Šè¶…çº§ç›ä¸½ã€‹è¿‡å…³ï¼‰  
  - å®¹é‡è¶…é™ï¼šçŸ­ä¿ƒè­¦æŠ¥å£°  

---

#### **6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜**  
1. **æ´›è°· P3254**ï¼šåœ†æ¡Œé—®é¢˜ï¼ˆç½‘ç»œæµå®¹é‡é™åˆ¶ï¼‰  
   > ğŸ’¡ ç»ƒä¹ å¤šæºç‚¹å¤šæ±‡ç‚¹å»ºå›¾  
2. **æ´›è°· P2764**ï¼šæœ€å°è·¯å¾„è¦†ç›–ï¼ˆäºŒåˆ†å›¾+ç½‘ç»œæµï¼‰  
   > ğŸ’¡ å­¦ä¹ è·¯å¾„ç±»é—®é¢˜è½¬åŒ–æŠ€å·§  
3. **æ´›è°· P1402**ï¼šé…’åº—ä¹‹ç‹ï¼ˆæ‹†ç‚¹åº”ç”¨ï¼‰  
   > ğŸ’¡ å·©å›ºèŠ‚ç‚¹å®¹é‡å¤„ç†æ–¹æ¡ˆ  

---

#### **7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«**  
> æœ¬é¢˜è§£æœªåŒ…å«ä½œè€…ä¸ªäººè°ƒè¯•å¿ƒå¾—ï¼Œä½†éœ€æ³¨æ„ï¼š  
> - **æ˜“é”™ç‚¹**ï¼šFloydåˆå§‹åŒ–æ—¶å¿½ç•¥è‡ªç¯ï¼ˆ`mp[i][i]=0`ï¼‰  
> - **è°ƒè¯•æŠ€å·§**ï¼šå°è§„æ¨¡æ•°æ®æ‰‹ç®—éªŒè¯ç½‘ç»œæµè¾¹æƒ  

é€šè¿‡æœ¬æ¬¡åˆ†æï¼Œæˆ‘ä»¬æŒæ¡äº†äºŒåˆ†ç­”æ¡ˆä¸ç½‘ç»œæµå»ºæ¨¡çš„æ ¸å¿ƒæŠ€å·§ï¼ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š356.45ç§’
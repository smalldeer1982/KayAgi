# é¢˜ç›®ä¿¡æ¯

# [POI 2013] POL-Polarization

## é¢˜ç›®æè¿°

Everyone knew it would only be a matter of time.  So what?

  Faced for years on, a peril becomes the every-day reality.

It loses its meaning...

Today the letter of the Bitotian char Bittard to the Byteotian king Byteasar  was released to the public.

Bitotia requested annexation of the whole Byteotia on pain of using  the Bit Polarizing Magnet (BPM).

If used, the BPM would make each and every road in Byteotia unidirectional.

The enemy knows only too well that this could be a fatal blow to the  minimalist Byteotian infrastructure - there is a unique way between  each pair of towns.

  How badly can the BPM damage the Byteotian infrastructure?

Determine the minimum and the maximum number of such pairs of towns that  it will still be possible to travel from one of them to the other while  observing the new roads orientation.




## æ ·ä¾‹ #1

### è¾“å…¥

```
4
1 2
1 3
1 4
```

### è¾“å‡º

```
3 5
```

# AIåˆ†æç»“æœ


### ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šPOL-Polarization æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«
âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šæ ‘çš„é‡å¿ƒåº”ç”¨ä¸èƒŒåŒ…é—®é¢˜ä¼˜åŒ–  
ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜è¦æ±‚å°†æ ‘è¾¹å®šå‘ï¼Œä½¿è¿é€šç‚¹å¯¹æ•°é‡æœ€å°åŒ–/æœ€å¤§åŒ–ã€‚æœ€å°å€¼ä¸º $n-1$ï¼ˆæ ‘æ˜¯äºŒåˆ†å›¾ï¼ŒæŸ“è‰²åç»Ÿä¸€æ–¹å‘å³å¯ï¼‰ã€‚æœ€å¤§å€¼éœ€ä»¥æ ‘çš„é‡å¿ƒä¸ºæ ¹ï¼Œå°†å­æ ‘åˆ†ä¸ºå†…å‘/å¤–å‘ä¸¤ç»„ï¼Œä½¿ä¸¤ç»„å¤§å°å°½å¯èƒ½å‡è¡¡ã€‚  
> - **æ ¸å¿ƒéš¾ç‚¹**ï¼šå­æ ‘åˆ†ç»„æœ¬è´¨æ˜¯èƒŒåŒ…é—®é¢˜ï¼Œéœ€ä¼˜åŒ–å¤„ç†  
> - **å¯è§†åŒ–è®¾è®¡**ï¼šç”¨åƒç´ æ–¹å—è¡¨ç¤ºå­æ ‘ï¼Œåˆ†ç»„æ—¶æ˜¾ç¤ºåˆå¹¶è¿‡ç¨‹ï¼ˆç›¸åŒå­æ ‘åˆå¹¶ä¸ºå¤§æ–¹å—ï¼‰ï¼ŒèƒŒåŒ…çŠ¶æ€ç”¨ç‚¹äº®ç½‘æ ¼è¡¨ç¤ºï¼Œå…³é”®æ“ä½œé…8bitéŸ³æ•ˆ  
> - **æ¸¸æˆåŒ–å…ƒç´ **ï¼šåˆ†ç»„æˆåŠŸæ—¶è§¦å‘"èƒœåˆ©éŸ³æ•ˆ"ï¼Œå­æ ‘åˆå¹¶æ—¶æ’­æ”¾"åˆæˆéŸ³æ•ˆ"ï¼Œè¿›åº¦æ¡æ˜¾ç¤ºå½“å‰åˆ†ç»„å·®å€¼  

---

#### ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ
**é¢˜è§£ä¸€ï¼ˆTsawkeï¼‰**  
* **ç‚¹è¯„**ï¼šå®Œæ•´åˆ†ææœ€å°/æœ€å¤§å€¼åŸç†ï¼Œæä¾›è´ªå¿ƒ+æ­£è§£åŒå®ç°ã€‚è™½ç„¶è´ªå¿ƒç­–ç•¥ï¼ˆå¤§æ ¹å †æŠµæ¶ˆï¼‰åœ¨ç‰¹å®šæ•°æ®ä¸‹å¯èƒ½ä¸ç²¾ç¡®ï¼Œä½†ç»“åˆæ ¹å·åˆ†æ²»æŠ€å·§å¯é€šè¿‡æœ¬é¢˜ã€‚äº®ç‚¹åœ¨äºæ¸…æ™°æ ‡æ³¨ä»£ç é€»è¾‘ï¼Œå¤šé‡èƒŒåŒ…çš„bitsetä¼˜åŒ–å®ç°è§„èŒƒï¼Œå˜é‡å`cnt/siz`å«ä¹‰æ˜ç¡®ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆå­æ ‘å¤§å°åˆå¹¶ï¼‰ï¼Œå®è·µä»·å€¼é«˜ã€‚  

**é¢˜è§£äºŒï¼ˆlhm_ï¼‰**  
* **ç‚¹è¯„**ï¼šä»£ç æœ€ç®€æ´é«˜æ•ˆï¼Œèšç„¦æ ¸å¿ƒé€»è¾‘ã€‚äº®ç‚¹åœ¨äºç›´æ¥ç”¨`bitset`å®ç°å¤šé‡èƒŒåŒ…ï¼Œå­æ ‘åˆå¹¶æ—¶å·§å¦™å¤„ç†`cnt[i*2]++`é¿å…å¤æ‚åº¦é€€åŒ–ï¼Œç©ºé—´ä¼˜åŒ–åˆ°ä½ã€‚å˜é‡å‘½åç®€çŸ­ä½†åˆç†ï¼ˆå¦‚`ma`è¡¨æœ€å¤§å­æ ‘ï¼‰ï¼Œé€‚åˆç«èµ›å‚è€ƒã€‚  

**é¢˜è§£ä¸‰ï¼ˆkczno1ï¼‰**  
* **ç‚¹è¯„**ï¼šç²¾ç‚¼æ¦‚æ‹¬ç»“è®ºï¼Œå¼ºè°ƒé‡å¿ƒé€‰æ‹©å¿…è¦æ€§ã€‚äº®ç‚¹åœ¨äºŒè¿›åˆ¶ä¼˜åŒ–æ—¶ç›´æ¥æ“ä½œ`q[]`æ•°ç»„ï¼Œé¿å…é¢å¤–æ•°æ®ç»“æ„ï¼Œ`bitset`ç§»ä½æ“ä½œé«˜æ•ˆã€‚ä»£ç åŒ…å«è¯¦ç»†æ³¨é‡Šï¼Œä¾¿äºç†è§£èƒŒåŒ…çŠ¶æ€è½¬ç§»ã€‚  

---

#### æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥
1. **é‡å¿ƒçš„ç²¾å‡†å®šä½**  
   * **åˆ†æ**ï¼šé‡å¿ƒæ˜¯å­æ ‘å‡è¡¡çš„å…³é”®ï¼Œéœ€ä¸¤æ¬¡DFSï¼šé¦–æ¬¡æ‰¾é‡å¿ƒï¼ˆæœ€å°åŒ–æœ€å¤§å­æ ‘ï¼‰ï¼ŒäºŒæ¬¡è®¡ç®—å­æ ‘å¤§å°ã€‚ä¼˜è´¨è§£å‡ç”¨`ma`æ•°ç»„è·Ÿè¸ªæœ€å¤§å­æ ‘ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‡å¿ƒæ€§è´¨â€”â€”æ‰€æœ‰å­æ ‘å¤§å° â‰¤ n/2  

2. **å­æ ‘åˆå¹¶ä¼˜åŒ–**  
   * **åˆ†æ**ï¼šç›´æ¥å¤„ç†åŸå§‹å­æ ‘ä¼šå¯¼è‡´èƒŒåŒ…è§„æ¨¡è¿‡å¤§ã€‚é€šè¿‡`cnt[siz]`ç»Ÿè®¡å¹¶åˆå¹¶ç›¸åŒå¤§å°å­æ ‘ï¼ˆwhile(cnt[i]>2) cnt[i*2]++ï¼‰ï¼Œå°†ç‰©å“æ•°ä»O(n)é™è‡³O(âˆšn)ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆå¹¶æœ¬è´¨æ˜¯äºŒè¿›åˆ¶ä¼˜åŒ–ï¼Œä¿ç•™ä¸åŒä½“ç§¯çš„ç‰©å“  

3. **èƒŒåŒ…çš„bitsetå®ç°**  
   * **åˆ†æ**ï¼šåˆ†ç»„é—®é¢˜è½¬åŒ–ä¸º"æ˜¯å¦å­˜åœ¨å’Œä¸ºkçš„å­é›†"ã€‚ç”¨`dp |= dp << i`æ›´æ–°çŠ¶æ€ï¼Œå¤æ‚åº¦O(nâˆšn/32)ã€‚ä»n/2å€’åºæŸ¥æ‰¾é¦–ä¸ªå¯è¡Œè§£ä¿è¯æœ€ä¼˜æ€§ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šbitsetæ˜¯å¤„ç†å­˜åœ¨æ€§èƒŒåŒ…çš„åˆ©å™¨  

âœ¨ **è§£é¢˜æŠ€å·§æ€»ç»“**  
- **é—®é¢˜åˆ†è§£**ï¼šå…ˆé‡å¿ƒâ†’å†å­æ ‘ç»Ÿè®¡â†’æœ€åèƒŒåŒ…åˆ†ç»„  
- **æ•°æ®ç»“æ„ä¼˜åŒ–**ï¼šbitsetå¤„ç†èƒŒåŒ…ï¼Œcntæ•°ç»„å‹ç¼©çŠ¶æ€  
- **è¾¹ç•Œè‰ºæœ¯**ï¼šDFSå›æº¯è®¡ç®—sizï¼Œé¿å…é‡å¤è®¿é—®  
- **å¸¸æ•°ä¼˜åŒ–**ï¼šå€’åºæŸ¥æ‰¾+åŠæ—¶break  

---

#### C++æ ¸å¿ƒä»£ç å®ç°èµæ
**æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**  
```cpp
#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N=250010;
int n,rt,cnt[N],siz[N],ma[N];
vector<int> G[N];
bitset<N> dp;

void dfs(int u,int fa){
    siz[u]=1, ma[u]=0;
    for(int v:G[u]) if(v!=fa){
        dfs(v,u); siz[u]+=siz[v];
        ma[u]=max(ma[u],siz[v]);
    }
    ma[u]=max(ma[u],n-siz[u]);
    if(!rt||ma[u]<ma[rt]) rt=u;
}

int main(){
    cin>>n;
    for(int i=1,u,v;i<n;++i){
        cin>>u>>v;
        G[u].push_back(v); G[v].push_back(u);
    }
    dfs(1,0); dfs(rt,0); // æ‰¾é‡å¿ƒ+è®¡ç®—siz
    ll ans=0;
    for(int i=1;i<=n;++i) ans+=siz[i]-1; // åŸºç¡€è¿é€šå¯¹
    for(int v:G[rt]) cnt[siz[v]]++; // ç»Ÿè®¡å­æ ‘
    for(int i=1;i<=n/2;++i)         // åˆå¹¶ä¼˜åŒ–
        while(cnt[i]>2) cnt[i]-=2, cnt[i*2]++;
    dp[0]=1;                        // bitsetèƒŒåŒ…
    for(int i=1;i<=n;++i) while(cnt[i]--) dp|=dp<<i;
    for(int i=n/2;i;--i) if(dp[i]){ // æ‰¾æœ€ä¼˜åˆ†ç»„
        ans+=(ll)i*(n-1-i); break;
    }
    cout<<n-1<<" "<<ans;
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. å»ºæ ‘åç”¨ä¸¤æ¬¡DFSæ‰¾é‡å¿ƒå¹¶è®¡ç®—å­æ ‘å¤§å°  
2. åŸºç¡€è¿é€šå¯¹æ•°ä¸ºÎ£(siz[i]-1)  
3. ç»Ÿè®¡é‡å¿ƒå„å­æ ‘å¤§å°ï¼Œåˆå¹¶ç›¸åŒä½“ç§¯  
4. bitsetåšèƒŒåŒ…å¯»æ‰¾æœ€å‡è¡¡åˆ†ç»„æ–¹æ¡ˆ  

---

#### ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º
**ä¸»é¢˜**ï¼šæ ‘å½¢è¿·å®«å®è—åˆ†ç»„å¤§ä½œæˆ˜ï¼ˆFCåƒç´ é£æ ¼ï¼‰  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šé‡å¿ƒä½œä¸ºåŸºåœ°ï¼Œå­æ ‘å˜ä¸ºå®ç®±ï¼Œåˆ†ç»„è¿‡ç¨‹å¦‚å®ç®±è£…ç®±  

**å…³é”®å¸§è®¾è®¡**ï¼š  
1. **åˆå§‹åŒ–**ï¼ˆ8-bitåƒç´ é£ï¼‰ï¼š  
   - æ ‘ç»“æ„è½¬ä¸ºç½‘æ ¼åœ°å›¾ï¼Œé‡å¿ƒæ˜¯é—ªçƒçš„åŸå ¡ï¼Œå­æ ‘ä¸ºå½©è‰²å®ç®±ï¼ˆå¤§å°=åƒç´ å°ºå¯¸ï¼‰  
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœ/å•æ­¥æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆè°ƒé€ŸéŸ³æ•ˆéšæ‹–åŠ¨å˜åŒ–ï¼‰  
   - èƒŒæ™¯ï¼šå¾ªç¯æ’­æ”¾8-bitå†’é™©BGM  

2. **å­æ ‘åˆå¹¶åŠ¨ç”»**ï¼š  
   ```plaintext
   åŸå§‹: [1][1][1][2][3] â†’ åˆå¹¶: [2][2][2][3] â†’ å†åˆå¹¶: [4][3]
   ```
   - ç›¸åŒä½“ç§¯å®ç®±ç¢°æ’æ—¶æ’­æ”¾"åˆæˆéŸ³æ•ˆ"ï¼Œå°ç®±åˆå¹¶ä¸ºå¤§ç®±ï¼ˆåƒç´ ç²’å­ç‰¹æ•ˆï¼‰  
   - æ˜¾ç¤ºè®¡æ•°ï¼šcnt[1]=3 â†’ cnt[2]=1 â†’ cnt[2]=0, cnt[4]=1  

3. **èƒŒåŒ…åˆ†ç»„è¿‡ç¨‹**ï¼š  
   - bitsetçŠ¶æ€ç”¨ç½‘æ ¼æ˜¾ç¤ºï¼šç‚¹äº®æ ¼å­è¡¨ç¤ºå¯è¾¾ä½“ç§¯  
   - æ·»åŠ å®ç®±æ—¶ï¼šdp |= dp<<i è¡¨ç°ä¸ºæ–°å®ç®±é£å…¥ï¼Œæ—§ç½‘æ ¼å¤åˆ¶å¹¶å¹³ç§»ï¼ˆä¼´éš"å’”å—’"å£°ï¼‰  
   - å½“å‰ä½“ç§¯é«˜äº®ï¼šå¦‚æ·»åŠ size=3å®ç®±æ—¶ï¼Œç½‘æ ¼ä½ç½®iå’Œi+3é—ªçƒé»„å…‰  

4. **èƒœåˆ©ç»“ç®—**ï¼š  
   - æ‰¾åˆ°æœ€ä¼˜åˆ†ç»„(i=100)æ—¶ï¼šåŸºåœ°åˆ†è£‚ä¸ºçº¢è“ä¸¤åŸå ¡ï¼ˆå†…å‘/å¤–å‘ï¼‰ï¼Œå®ç®±åˆ†åˆ«é£å…¥  
   - æ’­æ”¾èƒœåˆ©BGMï¼Œæ˜¾ç¤ºå…¬å¼ï¼šans += 100*(n-101)  

**äº¤äº’è®¾è®¡**ï¼š  
- å•æ­¥æ‰§è¡Œï¼šæŒ‰æ­¥è§‚å¯Ÿåˆå¹¶/èƒŒåŒ…è¿‡ç¨‹  
- AIæ¼”ç¤ºæ¨¡å¼ï¼šè‡ªåŠ¨å®Œæˆåˆ†ç»„ï¼ˆé€Ÿåº¦å¯è°ƒï¼‰  
- é”™è¯¯åé¦ˆï¼šæ— è§£æ—¶æ’­æ”¾ä½æ²‰éŸ³æ•ˆï¼ŒåŸå ¡å˜ç°  

---

#### æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ
1. **æ ‘é‡å¿ƒåº”ç”¨**  
   - æ´›è°·P1364 åŒ»é™¢è®¾ç½®ï¼šé‡å¿ƒæœ€å°åŒ–è·ç¦»å’Œ  
   - æ´›è°·P1395 ä¼šè®®ï¼šæ‰¾é‡å¿ƒ+è·ç¦»ç»Ÿè®¡  

2. **èƒŒåŒ…é—®é¢˜ä¼˜åŒ–**  
   - æ´›è°·P1048 é‡‡è¯ï¼š01èƒŒåŒ…åŸºç¡€  
   - æ´›è°·P1776 å®ç‰©ç­›é€‰ï¼šå¤šé‡èƒŒåŒ…äºŒè¿›åˆ¶ä¼˜åŒ–  

3. **æ ‘å½¢ç»“æ„è¿›é˜¶**  
   - æ´›è°·P2014 é€‰è¯¾ï¼šæ ‘å½¢ä¾èµ–èƒŒåŒ…  

---

#### å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **ç»éªŒæ‘˜å½•ï¼ˆTsawkeï¼‰**ï¼š  
> "è´ªå¿ƒè§£æ³•è™½å¯è¿‡æœ¬é¢˜ï¼Œä½†è¢«[3,3,...,8,8]æ•°æ®å¡å‡º2çš„å·®å€¼ï¼Œè¿™æé†’æˆ‘ä»¬ï¼šæ­£ç¡®æ€§ä¼˜å…ˆäºæŠ€å·§"  
>   
> **Kayç‚¹è¯„**ï¼šåœ¨ç®—æ³•é€‰æ‹©æ—¶ï¼Œéœ€ä¸¥æ ¼è¯æ˜æ­£ç¡®æ€§ã€‚å½“é—®é¢˜å­˜åœ¨ä¼˜åŒ–ç»“æ„ï¼ˆå¦‚å­æ ‘åˆå¹¶ï¼‰ï¼Œå¯å°è¯•é™å¤æ‚åº¦ï¼Œä½†å¿…é¡»ç”¨æ•°å­¦è¯æ˜è¾¹ç•Œï¼  

---

é€šè¿‡è¿™é¢˜æˆ‘ä»¬å­¦åˆ°ï¼šæ ‘é—®é¢˜å…ˆæƒ³é‡å¿ƒï¼ŒèƒŒåŒ…é—®é¢˜å–„ç”¨bitsetï¼Œä¼˜åŒ–æ—¶æ³¨æ„åˆå¹¶ç›¸ä¼¼çŠ¶æ€ã€‚ä¸‹æ¬¡é‡åˆ°æ ‘+æœ€ä¼˜åŒ–ï¼Œè¯•è¯•è¿™ä¸ªå¥—è·¯å§ï¼ ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š146.27ç§’
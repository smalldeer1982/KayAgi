# é¢˜ç›®ä¿¡æ¯

# [POI 2008] KUP-Plot purchase

## é¢˜ç›®æè¿°

Byteasar is going to buy an industrial plot.

His fortune is estimated at $k$ bythalers and this is exactly the amount    Byteasar would like to spend on the parcel.

Finding a parcel worth exactly $k$ bythalers, however, is not an easy task.

For this reason Byteasar is ready to buy a more expensive plot.

He considers taking out a loan. The Byteotian Credit Bank will grant him    a loan of up to $k$ bythalers. Thus, Byteasar can spend no more than $2k$    bythalers on the parcel and he would like to spend no less than $k$ bythalers.

The area in which Byteasar wants to buy his parcel is a square with side    length of $n$ metres. The current landlords have set up various prices per square metre. Byteasar has spoken to each one of them and has then prepared a price map    of the area. The map depicts the price of every metre by metre square. Clearly, there    are $n^2$ such squares. Now is the time to find the dream parcel. It has to be rectangular and consist of whole unit squares. Byteasar has already started looking for the plot on the map,    but after many hours he was still unable to find a suitable one. Be a chap and help him!

<Task> 

Write a programme that:

reads the numbers $k$ and $n$ from the standard input,  along with the price map of the area, determines a parcel with price in the interval $[k,2k]$ or states that no such parcel exists, writes out the result to the standard output.



## è¯´æ˜/æç¤º


ç»™å®š $k,n$ å’Œ $n\times n$ çš„çŸ©é˜µï¼Œæ±‚ä¸€ä¸ªå­çŸ©å½¢æ»¡è¶³æƒå€¼å’Œåœ¨ $[k,2k]$ ä¹‹é—´ã€‚

$n<2000$ï¼Œ$1\le k\le10^9$ï¼Œæ¯ä¸ªä»·æ ¼éƒ½æ˜¯ä¸å¤§äº$2 \times 10^9$ çš„éè´Ÿæ•´æ•°ã€‚

æ„Ÿè°¢@cnï¼šè‹å¿å¿µ æä¾›çš„spj

## æ ·ä¾‹ #1

### è¾“å…¥

```
8 4
1 2 1 3
25 1 2 1
4 20 3 3
3 30 12 2```

### è¾“å‡º

```
2 1 4 2```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼š[POI2008] KUP-Plot purchase æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼š**æœ€å¤§å­çŸ©å½¢é—®é¢˜ï¼ˆæ‚¬çº¿æ³•/å•è°ƒæ ˆï¼‰** + **è´ªå¿ƒåˆ‡å‰²ç­–ç•¥**


ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³è¿™é“é¢˜çš„å…³é”®ï¼Œåœ¨äºç†è§£ä¸€ä¸ª**æ ¸å¿ƒç»“è®º**ï¼š**å¦‚æœå­˜åœ¨ä¸€ä¸ªç”±â€œæƒå€¼<kâ€çš„å…ƒç´ ç»„æˆçš„å­çŸ©å½¢ï¼Œå…¶å’Œâ‰¥kï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥é€šè¿‡åˆ‡å‰²å¾—åˆ°ä¸€ä¸ªå’Œåœ¨[k,2k]ä¹‹é—´çš„å­çŸ©å½¢**ã€‚è¿™å°±åƒæˆ‘ä»¬æœ‰ä¸€å—â€œå¤ªå¤§çš„è›‹ç³•â€ï¼ˆå’Œ>2kï¼‰ï¼Œä½†æ¯ä¸€å£éƒ½å¾ˆå°ï¼ˆæ¯ä¸ªå…ƒç´ <kï¼‰ï¼Œæ‰€ä»¥åªè¦æ…¢æ…¢åˆ‡ï¼Œæ€»èƒ½å¾—åˆ°ä¸€å—â€œå¤§å°åˆé€‚çš„è›‹ç³•â€ï¼ˆå’Œåœ¨[k,2k]ä¹‹é—´ï¼‰ã€‚  

**å…·ä½“æ€è·¯**ï¼š  
1. **ç‰¹åˆ¤ç®€å•æƒ…å†µ**ï¼šå¦‚æœæœ‰å…ƒç´ æœ¬èº«åœ¨[k,2k]ä¹‹é—´ï¼Œç›´æ¥è¾“å‡ºï¼›å¦‚æœå…ƒç´ >2kï¼Œè§†ä¸ºâ€œéšœç¢ç‰©â€ï¼ˆä¸èƒ½é€‰ï¼‰ã€‚  
2. **æ‰¾æœ€å¤§å­çŸ©å½¢**ï¼šå¯¹äºå‰©ä¸‹çš„â€œæƒå€¼<kâ€çš„å…ƒç´ ï¼Œç”¨**æ‚¬çº¿æ³•**æˆ–**å•è°ƒæ ˆ**æ‰¾åˆ°**æœ€å¤§å­çŸ©å½¢**ï¼ˆå’Œæœ€å¤§çš„é‚£ä¸ªï¼‰ã€‚  
3. **åˆ‡å‰²å­çŸ©å½¢**ï¼šå¦‚æœæœ€å¤§å­çŸ©å½¢çš„å’Œåœ¨[k,2k]ä¹‹é—´ï¼Œç›´æ¥è¾“å‡ºï¼›å¦åˆ™ï¼Œé€è¡Œ/é€åˆ—åˆ‡å‰²ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
- **æ‚¬çº¿æ³•**ï¼šå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œè®¡ç®—å®ƒâ€œå‘ä¸Šèƒ½å»¶ä¼¸çš„æœ€å¤§é«˜åº¦â€ï¼ˆ`up`æ•°ç»„ï¼‰ï¼Œç„¶åç”¨å•è°ƒæ ˆæ‰¾åˆ°è¯¥é«˜åº¦å¯¹åº”çš„å·¦å³è¾¹ç•Œï¼ˆ`left`/`right`æ•°ç»„ï¼‰ï¼Œä»è€Œå¾—åˆ°ä»¥è¯¥å…ƒç´ ä¸ºåº•è¾¹çš„æœ€å¤§å­çŸ©å½¢ã€‚  
- **åˆ‡å‰²è¿‡ç¨‹**ï¼šå¦‚æœæœ€å¤§å­çŸ©å½¢å’Œ>2kï¼Œé€è¡Œåˆ é™¤ï¼ˆå› ä¸ºæ¯è¡Œå’Œ<kï¼Œåˆ é™¤åæ€»å’Œä¼šå‡å°‘ï¼Œä½†ä¸ä¼šè·³è¿‡[k,2k]åŒºé—´ï¼‰ï¼›å¦‚æœæŸè¡Œå’Œ>2kï¼Œå†é€åˆ—åˆ é™¤ï¼ˆåŒç†ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
ç”¨**8ä½åƒç´ é£æ ¼**å±•ç¤ºçŸ©é˜µï¼Œæ¯ä¸ªå…ƒç´ ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºï¼ˆæ¯”å¦‚æƒå€¼<kçš„å…ƒç´ ç”¨è“è‰²ï¼Œ>2kçš„ç”¨çº¢è‰²ï¼Œç›®æ ‡å­çŸ©å½¢ç”¨é»„è‰²é«˜äº®ï¼‰ã€‚åŠ¨ç”»æ­¥éª¤ï¼š  
1. **ç‰¹åˆ¤å±•ç¤º**ï¼šå•ä¸ªå…ƒç´ ç¬¦åˆæ¡ä»¶æ—¶ï¼Œé—ªçƒè¯¥å…ƒç´ å¹¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆã€‚  
2. **æ‚¬çº¿æ³•æ¼”ç¤º**ï¼šé€è¡Œè®¡ç®—`up`æ•°ç»„ï¼ˆç”¨â€œä¸Šå‡çš„çº¿æ®µâ€è¡¨ç¤ºé«˜åº¦ï¼‰ï¼Œå•è°ƒæ ˆå…¥æ ˆå‡ºæ ˆï¼ˆç”¨â€œç§»åŠ¨çš„æ–¹å—â€è¡¨ç¤ºæ ˆå…ƒç´ ï¼‰ï¼Œæ‰¾åˆ°æœ€å¤§å­çŸ©å½¢æ—¶ï¼Œç”¨é»„è‰²æ¡†æ ‡è®°ã€‚  
3. **åˆ‡å‰²è¿‡ç¨‹**ï¼šé€è¡Œ/é€åˆ—ç¼©å°çŸ©å½¢ï¼Œæ¯åˆ‡å‰²ä¸€æ¬¡æ’­æ”¾â€œå’”åš“â€éŸ³æ•ˆï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡çŸ©å½¢ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šï¼ˆæ¥æºï¼škczno1ï¼Œèµ19ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**æ€è·¯æœ€æ¸…æ™°**ï¼Œç›´æ¥é‡‡ç”¨æ‚¬çº¿æ³•æ±‚æœ€å¤§å­çŸ©å½¢ï¼Œä»£ç ç»“æ„å·¥æ•´ï¼ˆåˆ†å‡½æ•°å¤„ç†å‰ç¼€å’Œã€å­çŸ©å½¢å’Œï¼‰ï¼Œå¹¶ä¸”**åˆ‡å‰²è¿‡ç¨‹çš„å®ç°éå¸¸ä¸¥è°¨**ã€‚å®ƒå…ˆç‰¹åˆ¤å•ä¸ªå…ƒç´ ï¼Œå†å¤„ç†>2kçš„å…ƒç´ ï¼Œç„¶åç”¨æ‚¬çº¿æ³•è®¡ç®—`up`ã€`left`ã€`right`æ•°ç»„ï¼Œæ‰¾åˆ°æœ€å¤§å­çŸ©å½¢åï¼Œé€è¡Œåˆ‡å‰²ï¼ˆå¦‚æœè¡Œå’Œ>2kï¼Œå†é€åˆ—åˆ‡å‰²ï¼‰ã€‚ä»£ç ä¸­çš„å˜é‡å‘½åï¼ˆå¦‚`S`å‡½æ•°è®¡ç®—å­çŸ©å½¢å’Œï¼‰éå¸¸ç›´è§‚ï¼Œé€‚åˆåˆå­¦è€…æ¨¡ä»¿ã€‚  

### é¢˜è§£äºŒï¼šï¼ˆæ¥æºï¼ši207Mï¼Œèµ5ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**ç»†èŠ‚å¤„ç†æœ€åˆ°ä½**ï¼Œæ˜ç¡®æåˆ°äº†å•è°ƒæ ˆçš„â€œå‘ç‚¹â€ï¼ˆå‡ºæ ˆæ¡ä»¶æ˜¯â‰¥è€Œä¸æ˜¯>ï¼Œè¾¹ç•Œæ¡ä»¶è¦åŠ 0ï¼‰ã€‚å®ƒç”¨å•è°ƒæ ˆè®¡ç®—`lef`ã€`rit`æ•°ç»„ï¼Œæ‰¾åˆ°æœ€å¤§å­çŸ©å½¢åï¼Œç”¨`cutline`å‡½æ•°é€åˆ—åˆ‡å‰²è¡Œï¼Œ`solve`å‡½æ•°é€è¡Œåˆ‡å‰²çŸ©å½¢ã€‚ä»£ç ä¸­çš„`ask`å‡½æ•°ï¼ˆè®¡ç®—å­çŸ©å½¢å’Œï¼‰å’Œ`upd`å‡½æ•°ï¼ˆæ›´æ–°æœ€å¤§å­çŸ©å½¢ï¼‰é€»è¾‘æ¸…æ™°ï¼Œé€‚åˆå­¦ä¹ å•è°ƒæ ˆçš„è¾¹ç•Œå¤„ç†ã€‚  

### é¢˜è§£ä¸‰ï¼šï¼ˆæ¥æºï¼šå¥‡ç±³ï¼Œèµ4ï¼‰  
* **ç‚¹è¯„**ï¼šè¿™ä»½é¢˜è§£çš„**åˆ‡å‰²è¿‡ç¨‹æœ€ç›´è§‚**ï¼Œç›´æ¥åœ¨æ‚¬çº¿æ³•çš„å¾ªç¯ä¸­åˆ¤æ–­å­çŸ©å½¢å’Œæ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œå†é€è¡Œ/é€åˆ—åˆ‡å‰²ã€‚ä»£ç ä¸­çš„`sum`å‡½æ•°ï¼ˆäºŒç»´å‰ç¼€å’Œï¼‰å’Œ`up`æ•°ç»„ï¼ˆå‘ä¸Šå»¶ä¼¸é«˜åº¦ï¼‰è®¡ç®—æ­£ç¡®ï¼Œåˆ‡å‰²è¿‡ç¨‹çš„`for`å¾ªç¯ï¼ˆé€è¡Œ/é€åˆ—å‡å°‘ï¼‰éå¸¸å®¹æ˜“ç†è§£ï¼Œé€‚åˆåˆå­¦è€…æŒæ¡åˆ‡å‰²çš„æ ¸å¿ƒé€»è¾‘ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šç†è§£â€œä¸ºä»€ä¹ˆæ‰¾æœ€å¤§å­çŸ©å½¢å°±èƒ½å¾—åˆ°è§£ï¼Ÿâ€**  
* **åˆ†æ**ï¼šå› ä¸ºæ‰€æœ‰å…ƒç´ <kï¼Œæ‰€ä»¥æœ€å¤§å­çŸ©å½¢çš„å’Œå¦‚æœâ‰¥kï¼Œé‚£ä¹ˆå®ƒçš„å’Œä¸€å®š>2kå—ï¼Ÿä¸ä¸€å®šï¼Œä½†**åªè¦å’Œâ‰¥kï¼Œå°±å¯ä»¥é€šè¿‡åˆ‡å‰²å¾—åˆ°å’Œåœ¨[k,2k]ä¹‹é—´çš„å­çŸ©å½¢**ã€‚æ¯”å¦‚ï¼Œå‡è®¾æœ€å¤§å­çŸ©å½¢å’Œä¸ºS>2kï¼Œé€è¡Œåˆ é™¤ï¼ˆæ¯è¡Œå’Œ<kï¼‰ï¼Œé‚£ä¹ˆSä¼šé€æ¸å‡å°‘ï¼Œä»>2ké™åˆ°<kï¼Œä½†ä¸€å®šä¼šç»è¿‡[k,2k]åŒºé—´ï¼ˆå› ä¸ºæ¯æ¬¡å‡å°‘çš„é‡<kï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ¸å¿ƒç»“è®ºæ˜¯è§£é¢˜çš„å…³é”®ï¼Œè¦è®°ä½â€œå°å…ƒç´ ç»„æˆçš„å¤§çŸ©å½¢ï¼Œä¸€å®šèƒ½åˆ‡å‡ºåˆé€‚çš„å­çŸ©å½¢â€ã€‚  

### 2. **éš¾ç‚¹2ï¼šæ­£ç¡®å®ç°æ‚¬çº¿æ³•/å•è°ƒæ ˆ**  
* **åˆ†æ**ï¼šæ‚¬çº¿æ³•çš„æ ¸å¿ƒæ˜¯`up`ã€`left`ã€`right`æ•°ç»„çš„è®¡ç®—ã€‚`up[j]`è¡¨ç¤ºç¬¬iè¡Œç¬¬jåˆ—å…ƒç´ å‘ä¸Šèƒ½å»¶ä¼¸çš„æœ€å¤§é«˜åº¦ï¼›`left[j]`è¡¨ç¤ºç¬¬iè¡Œç¬¬jåˆ—å…ƒç´ å‘å·¦èƒ½å»¶ä¼¸çš„æœ€å¤§å·¦è¾¹ç•Œï¼ˆä¸ç¢°åˆ°éšœç¢ç‰©ï¼‰ï¼›`right[j]`åŒç†ã€‚å•è°ƒæ ˆç”¨äºå¿«é€Ÿè®¡ç®—`left`å’Œ`right`æ•°ç»„ï¼ˆæ—¶é—´å¤æ‚åº¦O(nÂ²)ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå•è°ƒæ ˆçš„å‡ºæ ˆæ¡ä»¶æ˜¯â€œå½“å‰å…ƒç´ é«˜åº¦â‰¤æ ˆé¡¶å…ƒç´ é«˜åº¦â€ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ ˆçš„å•è°ƒæ€§ï¼Œä»è€Œæ­£ç¡®æ‰¾åˆ°å·¦å³è¾¹ç•Œã€‚  

### 3. **éš¾ç‚¹3ï¼šå¤„ç†åˆ‡å‰²è¿‡ç¨‹**  
* **åˆ†æ**ï¼šåˆ‡å‰²è¿‡ç¨‹éœ€è¦é€è¡Œ/é€åˆ—å‡å°‘çŸ©å½¢çš„å¤§å°ï¼Œç›´åˆ°å’Œåœ¨[k,2k]ä¹‹é—´ã€‚æ¯”å¦‚ï¼Œé€è¡Œåˆ‡å‰²æ—¶ï¼Œæ¯æ¬¡åˆ é™¤æœ€ä¸Šé¢çš„ä¸€è¡Œï¼ˆå¦‚æœè¯¥è¡Œå’Œ<kï¼Œæ€»å’Œå‡å°‘ï¼Œä½†ä»â‰¥kï¼‰ï¼›å¦‚æœæŸè¡Œå’Œ>2kï¼Œå†é€åˆ—åˆ é™¤è¯¥è¡Œçš„å…ƒç´ ï¼ˆåŒç†ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ‡å‰²è¿‡ç¨‹çš„æ ¸å¿ƒæ˜¯â€œè´ªå¿ƒâ€â€”â€”æ¯æ¬¡åˆ é™¤æœ€å°çš„å¯èƒ½éƒ¨åˆ†ï¼ˆè¡Œæˆ–åˆ—ï¼‰ï¼Œç¡®ä¿æ€»å’Œä¸ä¼šè·³è¿‡[k,2k]åŒºé—´ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šç»¼åˆäº†kczno1ã€i207Mã€å¥‡ç±³çš„é¢˜è§£æ€è·¯ï¼Œé‡‡ç”¨æ‚¬çº¿æ³•æ±‚æœ€å¤§å­çŸ©å½¢ï¼Œåˆ‡å‰²è¿‡ç¨‹é€è¡Œ/é€åˆ—å¤„ç†ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
```cpp
#include <iostream>
#include <vector>
#include <stack>
using namespace std;

typedef long long ll;
const int N = 2005;
int n, k;
ll a[N][N], sum[N][N]; // äºŒç»´å‰ç¼€å’Œ
int up[N][N], left[N][N], right[N][N]; // æ‚¬çº¿æ³•æ•°ç»„

// è®¡ç®—å­çŸ©å½¢å’Œï¼š(x1,y1)åˆ°(x2,y2)
ll calc(int x1, int y1, int x2, int y2) {
    return sum[x2][y2] - sum[x1-1][y2] - sum[x2][y1-1] + sum[x1-1][y1-1];
}

// åˆ‡å‰²å­çŸ©å½¢ï¼šä»(x1,y1)åˆ°(x2,y2)
void cut(int x1, int y1, int x2, int y2) {
    while (calc(x1, y1, x2, y2) > 2*k) {
        if (x1 == x2) { // åªå‰©ä¸€è¡Œï¼Œé€åˆ—åˆ‡å‰²
            y2--;
        } else {
            ll row_sum = calc(x1, y1, x1, y2); // ç¬¬ä¸€è¡Œçš„å’Œ
            if (row_sum >= k) { // ç¬¬ä¸€è¡Œæœ‰è§£ï¼Œé€åˆ—åˆ‡å‰²
                for (int j = y1; j <= y2; j++) {
                    ll col_sum = calc(x1, j, x1, y2);
                    if (col_sum >= k && col_sum <= 2*k) {
                        cout << j << " " << x1 << " " << y2 << " " << x1 << endl;
                        exit(0);
                    }
                }
            } else { // ç¬¬ä¸€è¡Œå’Œ<kï¼Œåˆ é™¤ç¬¬ä¸€è¡Œ
                x1++;
            }
        }
    }
    // è¾“å‡ºç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢
    cout << y1 << " " << x1 << " " << y2 << " " << x2 << endl;
    exit(0);
}

int main() {
    cin >> k >> n;
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= n; j++) {
            cin >> a[i][j];
            // ç‰¹åˆ¤å•ä¸ªå…ƒç´ ç¬¦åˆæ¡ä»¶
            if (a[i][j] >= k && a[i][j] <= 2*k) {
                cout << j << " " << i << " " << j << " " << i << endl;
                return 0;
            }
            // è®¡ç®—äºŒç»´å‰ç¼€å’Œ
            sum[i][j] = sum[i-1][j] + sum[i][j-1] - sum[i-1][j-1] + a[i][j];
        }
    }

    // åˆå§‹åŒ–æ‚¬çº¿æ³•æ•°ç»„
    for (int j = 1; j <= n; j++) {
        up[1][j] = (a[1][j] < k) ? 1 : 0;
        left[1][j] = (a[1][j] < k) ? j : 0;
        right[1][j] = (a[1][j] < k) ? j : n+1;
    }

    // è®¡ç®—æ‚¬çº¿æ³•æ•°ç»„ï¼ˆé€è¡Œå¤„ç†ï¼‰
    for (int i = 2; i <= n; i++) {
        for (int j = 1; j <= n; j++) {
            if (a[i][j] < k) {
                up[i][j] = up[i-1][j] + 1;
                // è®¡ç®—leftæ•°ç»„ï¼šå‘å·¦æ‰¾ç¬¬ä¸€ä¸ª>2kçš„å…ƒç´ 
                int l = j;
                while (l > 1 && a[i][l-1] < k) l--;
                left[i][j] = l;
            } else {
                up[i][j] = 0;
                left[i][j] = 0;
            }
        }
        for (int j = n; j >= 1; j--) {
            if (a[i][j] < k) {
                // è®¡ç®—rightæ•°ç»„ï¼šå‘å³æ‰¾ç¬¬ä¸€ä¸ª>2kçš„å…ƒç´ 
                int r = j;
                while (r < n && a[i][r+1] < k) r++;
                right[i][j] = r;
            } else {
                right[i][j] = n+1;
            }
        }
    }

    // æ‰¾æœ€å¤§å­çŸ©å½¢
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= n; j++) {
            if (up[i][j] == 0) continue;
            int x1 = i - up[i][j] + 1;
            int y1 = left[i][j];
            int y2 = right[i][j];
            ll s = calc(x1, y1, i, y2);
            if (s >= k) {
                cut(x1, y1, i, y2);
            }
        }
    }

    // æ— è§£
    cout << "NIE" << endl;
    return 0;
}
```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **ç‰¹åˆ¤**ï¼šè¯»å–è¾“å…¥æ—¶ï¼Œç›´æ¥åˆ¤æ–­å•ä¸ªå…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚  
  2. **äºŒç»´å‰ç¼€å’Œ**ï¼šç”¨äºå¿«é€Ÿè®¡ç®—å­çŸ©å½¢å’Œã€‚  
  3. **æ‚¬çº¿æ³•**ï¼šè®¡ç®—`up`ï¼ˆå‘ä¸Šå»¶ä¼¸é«˜åº¦ï¼‰ã€`left`ï¼ˆå·¦è¾¹ç•Œï¼‰ã€`right`ï¼ˆå³è¾¹ç•Œï¼‰æ•°ç»„ã€‚  
  4. **æ‰¾æœ€å¤§å­çŸ©å½¢**ï¼šéå†æ¯ä¸ªå…ƒç´ ï¼Œè®¡ç®—ä»¥è¯¥å…ƒç´ ä¸ºåº•è¾¹çš„æœ€å¤§å­çŸ©å½¢å’Œï¼Œå¦‚æœâ‰¥kï¼Œè°ƒç”¨`cut`å‡½æ•°åˆ‡å‰²ã€‚  
  5. **åˆ‡å‰²è¿‡ç¨‹**ï¼šé€è¡Œ/é€åˆ—ç¼©å°çŸ©å½¢ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢ã€‚  


### é’ˆå¯¹å„ä¼˜è´¨é¢˜è§£çš„ç‰‡æ®µèµæ

#### é¢˜è§£ä¸€ï¼ˆkczno1ï¼‰ï¼šæ‚¬çº¿æ³•åˆ‡å‰²  
* **äº®ç‚¹**ï¼šåˆ‡å‰²è¿‡ç¨‹çš„**é€è¡Œ/é€åˆ—å¤„ç†**éå¸¸ä¸¥è°¨ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
while (S(li, lj, i, rj) > 2*k) {
    if (S(li, lj, li+1, rj) > 2*k) {
        while (S(li, lj, li+1, rj) > 2*k) ++lj;
        printf("%d %d %d %d\n", lj+1, li+1, rj, li+1);
        exit(0);
    }
    ++li;
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç å¤„ç†**è¡Œåˆ‡å‰²**ï¼šå¦‚æœå½“å‰çŸ©å½¢å’Œ>2kï¼Œå…ˆåˆ¤æ–­ç¬¬ä¸€è¡Œçš„å’Œæ˜¯å¦>2kï¼ˆ`S(li, lj, li+1, rj) > 2*k`ï¼‰ã€‚å¦‚æœæ˜¯ï¼Œé€åˆ—åˆ‡å‰²ç¬¬ä¸€è¡Œï¼ˆ`++lj`ï¼‰ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢ï¼›å¦åˆ™ï¼Œåˆ é™¤ç¬¬ä¸€è¡Œï¼ˆ`++li`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ‡å‰²è¿‡ç¨‹è¦â€œå…ˆåˆ¤æ–­è¡Œï¼Œå†åˆ¤æ–­åˆ—â€ï¼Œè¿™æ ·èƒ½æœ€å¿«æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢ã€‚  


#### é¢˜è§£äºŒï¼ˆi207Mï¼‰ï¼šå•è°ƒæ ˆè®¡ç®—å·¦å³è¾¹ç•Œ  
* **äº®ç‚¹**ï¼šå•è°ƒæ ˆçš„**è¾¹ç•Œå¤„ç†**éå¸¸åˆ°ä½ï¼ˆç”¨0å’Œn+1ä½œä¸ºå“¨å…µï¼‰ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
// è®¡ç®—leftæ•°ç»„
st[tp=1] = 0;
up[i][0] = -1;
for (int j = 1; j <= n; j++) {
    while (tp && up[i][st[tp]] >= up[i][j]) --tp;
    lef[j] = st[tp] + 1;
    st[++tp] = j;
}
// è®¡ç®—rightæ•°ç»„
st[tp=1] = n+1;
up[i][n+1] = -1;
for (int j = n; j >= 1; j--) {
    while (tp && up[i][st[tp]] >= up[i][j]) --tp;
    rit[j] = st[tp] - 1;
    st[++tp] = j;
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç ç”¨å•è°ƒæ ˆè®¡ç®—`lef`ï¼ˆå·¦è¾¹ç•Œï¼‰å’Œ`rit`ï¼ˆå³è¾¹ç•Œï¼‰æ•°ç»„ã€‚`st`æ•°ç»„å­˜å‚¨çš„æ˜¯åˆ—ç´¢å¼•ï¼Œ`up[i][j]`æ˜¯ç¬¬iè¡Œç¬¬jåˆ—çš„å‘ä¸Šå»¶ä¼¸é«˜åº¦ã€‚é€šè¿‡å•è°ƒæ ˆï¼Œæˆ‘ä»¬èƒ½å¿«é€Ÿæ‰¾åˆ°æ¯ä¸ªå…ƒç´ çš„å·¦å³è¾¹ç•Œï¼ˆä¸ç¢°åˆ°æ¯”å®ƒé«˜çš„å…ƒç´ ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå•è°ƒæ ˆçš„â€œå“¨å…µâ€ï¼ˆ0å’Œn+1ï¼‰èƒ½é¿å…å¤„ç†è¾¹ç•Œæ¡ä»¶çš„éº»çƒ¦ï¼Œæ¯”å¦‚å½“æ ˆä¸ºç©ºæ—¶ï¼Œç›´æ¥å–å“¨å…µçš„å€¼ã€‚  


#### é¢˜è§£ä¸‰ï¼ˆå¥‡ç±³ï¼‰ï¼šæ‚¬çº¿æ³•å¾ªç¯ä¸­åˆ¤æ–­å­çŸ©å½¢å’Œ  
* **äº®ç‚¹**ï¼š**è¾¹è®¡ç®—è¾¹åˆ¤æ–­**ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
```cpp
if (up[i][j]) {
    int now = sum(i-up[i][j]+1, L[j], i, R[j]);
    if (now >= m && now <= 2*m) {
        return printf("%lld %lld %lld %lld\n", L[j], i-up[i][j]+1, R[j], i), 0;
    }
    if (now > mx) {
        mx = now;
        ax = i-up[i][j]+1, ay = L[j];
        bx = i, by = R[j];
    }
}
```  
* **ä»£ç è§£è¯»**ï¼š  
  è¿™æ®µä»£ç åœ¨è®¡ç®—`up`ã€`L`ã€`R`æ•°ç»„åï¼Œç›´æ¥è®¡ç®—å­çŸ©å½¢å’Œ`now`ã€‚å¦‚æœ`now`ç¬¦åˆæ¡ä»¶ï¼Œç›´æ¥è¾“å‡ºï¼›å¦åˆ™ï¼Œæ›´æ–°æœ€å¤§å­çŸ©å½¢çš„ä¿¡æ¯ï¼ˆ`mx`ã€`ax`ã€`ay`ã€`bx`ã€`by`ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹è®¡ç®—è¾¹åˆ¤æ–­èƒ½æé«˜æ•ˆç‡ï¼Œé¿å…åç»­é‡å¤è®¡ç®—ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š**åƒç´ æ¢é™©å®¶æ‰¾å®è—**  
ï¼ˆä»¿ç…§FCçº¢ç™½æœºçš„ã€ŠæŒ–é‡‘å­ã€‹æ¸¸æˆé£æ ¼ï¼Œç”¨8ä½åƒç´ ç”»å±•ç¤ºçŸ©é˜µï¼Œæ¢é™©å®¶ï¼ˆå°æ–¹å—ï¼‰å¯»æ‰¾â€œå®è—â€ï¼ˆç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢ï¼‰ã€‚ï¼‰


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åˆå§‹åœºæ™¯**ï¼š  
   - å±å¹•æ˜¾ç¤ºä¸€ä¸ª`nÃ—n`çš„åƒç´ çŸ©é˜µï¼Œæ¯ä¸ªå…ƒç´ ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºï¼š  
     - æƒå€¼<kï¼šè“è‰²ï¼ˆå¯è¸©ï¼‰ï¼›  
     - æƒå€¼>2kï¼šçº¢è‰²ï¼ˆéšœç¢ç‰©ï¼Œä¸å¯è¸©ï¼‰ï¼›  
     - æƒå€¼åœ¨[k,2k]ï¼šé»„è‰²ï¼ˆç›´æ¥å®è—ï¼Œé—ªçƒï¼‰ã€‚  
   - å·¦ä¸‹è§’æœ‰â€œæ§åˆ¶é¢æ¿â€ï¼šå¼€å§‹/æš‚åœã€å•æ­¥æ‰§è¡Œã€é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼ˆ1-10æ¡£ï¼‰ã€‚  
   - èƒŒæ™¯æ’­æ”¾8ä½é£æ ¼çš„è½»å¿«BGMï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚  

2. **ç‰¹åˆ¤æ¼”ç¤º**ï¼š  
   - å¦‚æœæœ‰é»„è‰²å…ƒç´ ï¼ˆæƒå€¼åœ¨[k,2k]ï¼‰ï¼Œæ¢é™©å®¶ä¼šèµ°åˆ°è¯¥å…ƒç´ ä½ç½®ï¼Œé—ªçƒå¹¶æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼ˆ`Web Audio API`æ’­æ”¾`ping.wav`ï¼‰ï¼Œç„¶åæ˜¾ç¤ºâ€œæ‰¾åˆ°å®è—ï¼â€çš„æ–‡å­—ã€‚  

3. **æ‚¬çº¿æ³•æ¼”ç¤º**ï¼š  
   - **é€è¡Œå¤„ç†**ï¼šæ¢é™©å®¶ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œé€åˆ—è®¡ç®—`up`æ•°ç»„ï¼ˆç”¨â€œä¸Šå‡çš„çº¿æ®µâ€è¡¨ç¤ºé«˜åº¦ï¼Œæ¯”å¦‚è“è‰²çº¿æ®µä»å…ƒç´ å‘ä¸Šå»¶ä¼¸ï¼‰ã€‚  
   - **å•è°ƒæ ˆè®¡ç®—å·¦å³è¾¹ç•Œ**ï¼šç”¨â€œæ ˆâ€çš„åŠ¨ç”»ï¼ˆæ¯”å¦‚å‡ ä¸ªå°æ–¹å—å †å åœ¨ä¸€èµ·ï¼‰å±•ç¤ºå…¥æ ˆå‡ºæ ˆè¿‡ç¨‹ï¼Œå½“å‰å¤„ç†çš„å…ƒç´ ç”¨çº¢è‰²ç®­å¤´æ ‡è®°ï¼Œå·¦å³è¾¹ç•Œç”¨ç»¿è‰²æ¡†æ ‡è®°ã€‚  
   - **æ‰¾åˆ°æœ€å¤§å­çŸ©å½¢**ï¼šå½“è®¡ç®—å‡ºæœ€å¤§å­çŸ©å½¢æ—¶ï¼Œç”¨é»„è‰²æ¡†æ ‡è®°è¯¥çŸ©å½¢ï¼Œæ’­æ”¾â€œå—¡â€çš„éŸ³æ•ˆï¼ˆ`buzz.wav`ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œæœ€å¤§å­çŸ©å½¢ï¼šå’Œä¸ºXâ€çš„æ–‡å­—ã€‚  

4. **åˆ‡å‰²è¿‡ç¨‹æ¼”ç¤º**ï¼š  
   - **é€è¡Œåˆ‡å‰²**ï¼šå¦‚æœæœ€å¤§å­çŸ©å½¢å’Œ>2kï¼Œæ¢é™©å®¶ä¼šâ€œæ¨â€èµ°æœ€ä¸Šé¢çš„ä¸€è¡Œï¼ˆè¯¥è¡Œå˜æˆç°è‰²ï¼Œä¸å†æ˜¾ç¤ºï¼‰ï¼Œæ¯æ¨ä¸€è¡Œæ’­æ”¾â€œå’”åš“â€éŸ³æ•ˆï¼ˆ`cut.wav`ï¼‰ã€‚  
   - **é€åˆ—åˆ‡å‰²**ï¼šå¦‚æœæŸè¡Œå’Œ>2kï¼Œæ¢é™©å®¶ä¼šâ€œæ‹‰â€èµ°è¯¥è¡Œçš„æœ€å³è¾¹ä¸€åˆ—ï¼ˆè¯¥åˆ—å˜æˆç°è‰²ï¼‰ï¼Œæ¯æ‹‰ä¸€åˆ—æ’­æ”¾â€œå’”åš“â€éŸ³æ•ˆã€‚  
   - **æ‰¾åˆ°ç›®æ ‡çŸ©å½¢**ï¼šå½“åˆ‡å‰²åˆ°ç¬¦åˆæ¡ä»¶çš„å­çŸ©å½¢æ—¶ï¼Œè¯¥çŸ©å½¢å˜æˆé‡‘è‰²ï¼Œæ¢é™©å®¶è·³èµ·æ¥æ¬¢å‘¼ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆ`win.wav`ï¼‰ï¼Œå¹¶æ˜¾ç¤ºâ€œæˆåŠŸï¼å®è—åœ¨è¿™é‡Œï¼â€çš„æ–‡å­—ã€‚  


### äº¤äº’ä¸æ§åˆ¶  
- **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼ŒåŠ¨ç”»æ‰§è¡Œä¸€æ­¥ï¼ˆæ¯”å¦‚è®¡ç®—ä¸€ä¸ª`up`å€¼ï¼Œæˆ–åˆ‡å‰²ä¸€è¡Œï¼‰ã€‚  
- **è‡ªåŠ¨æ’­æ”¾**ï¼šç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼ŒåŠ¨ç”»æŒ‰é€Ÿåº¦æ»‘å—çš„é€Ÿåº¦è‡ªåŠ¨æ‰§è¡Œï¼ˆ1æ¡£æœ€æ…¢ï¼Œ10æ¡£æœ€å¿«ï¼‰ã€‚  
- **é‡ç½®åŠ¨ç”»**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼ŒåŠ¨ç”»å›åˆ°åˆå§‹çŠ¶æ€ã€‚  


### æŠ€æœ¯å®ç°è€ƒé‡  
- **è½»é‡åŒ–**ï¼šç”¨çº¯HTML/CSS/JavaScriptå®ç°ï¼Œ`Canvas`ç»˜åˆ¶çŸ©é˜µå’ŒåŠ¨ç”»ï¼Œ`Web Audio API`æ’­æ”¾éŸ³æ•ˆã€‚  
- **é¢œè‰²æ–¹æ¡ˆ**ï¼šé‡‡ç”¨FCçº¢ç™½æœºçš„16è‰²è°ƒè‰²æ¿ï¼ˆæ¯”å¦‚è“è‰²#0000FFï¼Œçº¢è‰²#FF0000ï¼Œé»„è‰²#FFFF00ï¼‰ã€‚  
- **éŸ³æ•ˆ**ï¼šä½¿ç”¨8ä½é£æ ¼çš„éŸ³æ•ˆæ–‡ä»¶ï¼ˆ`ping.wav`ã€`buzz.wav`ã€`cut.wav`ã€`win.wav`ï¼‰ï¼Œä½“ç§¯å°ï¼ŒåŠ è½½å¿«ã€‚  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
**æœ€å¤§å­çŸ©å½¢é—®é¢˜**æ˜¯ä¸€ä¸ªç»å…¸çš„ç®—æ³•é—®é¢˜ï¼Œå¹¿æ³›åº”ç”¨äºï¼š  
1. **å›¾åƒå¤„ç†**ï¼šæ‰¾åˆ°å›¾åƒä¸­çš„æœ€å¤§è¿ç»­åŒºåŸŸï¼ˆæ¯”å¦‚æœ€å¤§çš„ç™½è‰²å—ï¼‰ã€‚  
2. **æ•°æ®æŒ–æ˜**ï¼šæ‰¾åˆ°äºŒç»´æ•°æ®ä¸­çš„æœ€å¤§è¿ç»­å­çŸ©é˜µï¼ˆæ¯”å¦‚æœ€å¤§çš„é”€å”®åŒºåŸŸï¼‰ã€‚  
3. **æ¸¸æˆå¼€å‘**ï¼šæ‰¾åˆ°æ¸¸æˆåœ°å›¾ä¸­çš„æœ€å¤§å¯æ”¾ç½®åŒºåŸŸï¼ˆæ¯”å¦‚æœ€å¤§çš„å»ºç­‘ç”¨åœ°ï¼‰ã€‚  


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P4147** - æœ€å¤§å­çŸ©é˜µ  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯æœ€å¤§å­çŸ©å½¢é—®é¢˜çš„ç»å…¸æ¨¡æ¿é¢˜ï¼Œç”¨æ‚¬çº¿æ³•æˆ–å•è°ƒæ ˆè§£å†³ï¼Œèƒ½å·©å›ºæœ¬é¢˜çš„æ ¸å¿ƒç®—æ³•ã€‚  
2. **æ´›è°· P1719** - æœ€å¤§å­çŸ©é˜µå’Œ  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜æ˜¯æœ€å¤§å­çŸ©å½¢å’Œçš„å˜å½¢ï¼Œè¦æ±‚å’Œæœ€å¤§çš„å­çŸ©å½¢ï¼Œèƒ½é”»ç‚¼å¯¹å‰ç¼€å’Œçš„åº”ç”¨ã€‚  
3. **æ´›è°· P2704** - ç‚®å…µé˜µåœ°  
   * ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæœ¬é¢˜æ˜¯æœ€å¤§å­çŸ©å½¢é—®é¢˜çš„è¿›é˜¶ï¼Œè¦æ±‚æ”¾ç½®æœ€å¤šçš„ç‚®å…µï¼Œèƒ½é”»ç‚¼å¯¹çŠ¶æ€å‹ç¼©çš„åº”ç”¨ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)  
- **æ¥è‡ªi207Mçš„ç»éªŒ**ï¼šâ€œå•è°ƒæ ˆçš„å‡ºæ ˆæ¡ä»¶æ˜¯â‰¥è€Œä¸æ˜¯>ï¼Œå¦åˆ™ä¼šæ¼æ‰ä¸€äº›æƒ…å†µã€‚â€  
  * **ç‚¹è¯„**ï¼šè¿™ä¸ªç»éªŒéå¸¸é‡è¦ï¼Œå› ä¸ºå¦‚æœå‡ºæ ˆæ¡ä»¶æ˜¯>ï¼Œé‚£ä¹ˆå½“æœ‰å¤šä¸ªç›¸åŒé«˜åº¦çš„å…ƒç´ æ—¶ï¼Œä¼šå¯¼è‡´å·¦å³è¾¹ç•Œè®¡ç®—é”™è¯¯ã€‚  
- **æ¥è‡ªkczno1çš„ç»éªŒ**ï¼šâ€œåˆ‡å‰²è¿‡ç¨‹è¦é€è¡Œå¤„ç†ï¼Œå› ä¸ºæ¯è¡Œçš„å’Œ<kï¼Œæ‰€ä»¥åˆ é™¤è¡Œä¸ä¼šè®©æ€»å’Œè·³è¿‡[k,2k]åŒºé—´ã€‚â€  
  * **ç‚¹è¯„**ï¼šè¿™ä¸ªç»éªŒæŠ“ä½äº†åˆ‡å‰²è¿‡ç¨‹çš„æ ¸å¿ƒé€»è¾‘ï¼Œé¿å…äº†ä¸å¿…è¦çš„åˆ—åˆ‡å‰²ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œ[POI2008] KUP-Plot purchaseâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶ç†è§£æœ€å¤§å­çŸ©å½¢é—®é¢˜çš„æ ¸å¿ƒç®—æ³•ï¼ˆæ‚¬çº¿æ³•/å•è°ƒæ ˆï¼‰ï¼Œä»¥åŠè´ªå¿ƒåˆ‡å‰²çš„ç­–ç•¥ã€‚è®°ä½ï¼Œ**ç®—æ³•çš„æ ¸å¿ƒæ˜¯æ€è·¯ï¼Œè€Œä¸æ˜¯ä»£ç **â€”â€”åªè¦ç†è§£äº†æ ¸å¿ƒç»“è®ºï¼Œå°±èƒ½è½»æ¾è§£å†³ç±»ä¼¼é—®é¢˜ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š246.30ç§’
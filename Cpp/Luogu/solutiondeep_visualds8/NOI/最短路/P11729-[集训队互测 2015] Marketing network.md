# é¢˜ç›®ä¿¡æ¯

# [é›†è®­é˜Ÿäº’æµ‹ 2015] Marketing network

## é¢˜ç›®æè¿°

â€œä¸–ç•Œå……æ»¡ç€å„ç§ ifï¼Œæˆ‘ä»¬å­˜åœ¨ç€çš„è¿™ä¸ªä¸–ç•Œä¹Ÿä¸è¿‡æ˜¯ä¸ºæ•°ä¼—å¤šçš„ if çš„ç»“æœä¸­çš„ä¸€ä¸ªï¼Œè€Œæœªæ¥åˆ™æ›´æ˜¯ç”±äºæ— é™çš„ if è€Œæ··æ²ŒæµåŠ¨ç€çš„ä¸–ç•Œã€‚â€

åœ¨æŸä¸€æ¡ä¸–ç•Œçº¿ä¸­ï¼Œä½ å¯èƒ½æ­£åœ¨ç»è¥ä¸€ä¸ªè·¨å›½å…¬å¸ï¼Œæƒ³æƒ³æ˜¯ä¸æ˜¯æœ‰ç‚¹æ¿€åŠ¨å‘¢ã€‚åœ¨é‚£ä¸€ä¸ªä¸–ç•Œä¸­ï¼Œä½ æ­£è¢«è¥é”€ç½‘ç»œçš„è®¾è®¡é—®é¢˜æ‰€å›°æ‰°ã€‚

ä½ çš„è·¨å›½å…¬å¸åœ¨ $n$ ä¸ªå›½å®¶è®¾ç«‹äº†é”€å”®ç½‘ç‚¹ï¼Œå›½å®¶ç”± $1$ åˆ° $n$ ç¼–å·ï¼Œè¿™ $n$ ä¸ªå›½å®¶ç”± $m$ æ¡åŒå‘èˆªçº¿è¿æ¥ã€‚å¦‚æœæŠŠå›½å®¶çœ‹ä½œç»“ç‚¹æŠŠèˆªçº¿çœ‹ä½œè¾¹ï¼Œå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªæ— å‘å›¾ã€‚

ä½ å·²ç»åœ¨å…¶ä¸­çš„ $S$ ä¸ªå›½å®¶è®¾ç«‹äº†åˆ†å…¬å¸ã€‚ä½ ä¼šä¹°ä¸‹ä¸€äº›èˆªçº¿çš„ VIP ä»¥åŠ é€Ÿä½ çš„å•†å“è¿è¾“ã€‚

æ— è®ºè¿™æ¡ä¸–ç•Œçº¿å‡ºäº†ä»€ä¹ˆåå·®ï¼Œä½ æ˜¯ OIer è¿™ä¸ªäº‹å®æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œæ‰€ä»¥ä½ å¯¹ VIP èˆªçº¿è´­ä¹°æ–¹æ¡ˆæœ‰ç€è‹›åˆ»çš„è¦æ±‚ï¼š

1. ä»¥ä»»æ„ä¸€ä¸ªå›½å®¶ä½œä¸ºå‡ºå‘ç‚¹ï¼Œéƒ½æ— æ³•åªç»è¿‡ VIP èˆªçº¿ä¸”ä¸ç»è¿‡é‡å¤çš„å›½å®¶å›åˆ°å‡ºå‘ç‚¹ã€‚å³è´­ä¹°çš„ VIP èˆªçº¿å½¢æˆåŸå›¾çš„ä¸€ä¸ªç”Ÿæˆæ£®æ—ã€‚
2. ä»ä»»æ„ä¸€ä¸ªåˆ†å…¬å¸å‡ºå‘éƒ½å¯ä»¥åªç»è¿‡ VIP èˆªçº¿åˆ°è¾¾å¦ä¸€ä¸ªåˆ†å…¬å¸ã€‚

æ¯æ¡èˆªçº¿éƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œè¡¨ç¤ºè´­ä¹°è¯¥èˆªçº¿çš„ VIP çš„è´¹ç”¨ã€‚æ•é”çš„ä½ ä¸€å®šä¸€çœ¼å‘ç°äº†å®Œæˆç›®æ ‡çš„æœ€å°æ€»èŠ±è´¹ã€‚ä½†æ˜¯è¿™æ ·ä¸å¤Ÿä»»æ€§ä¸å¤ŸåœŸè±ªï¼Œè¿™åŠ¿å¿…ä¼šå½±å“å…¬å¸æœªæ¥çš„å‘å±•ã€‚äºæ˜¯æœºæ™ºçš„ä½ å†³å®šæ±‚å‡ºæ€»è´¹ç”¨å‰ $k$ å°çš„ VIP èˆªçº¿è´­ä¹°æ–¹æ¡ˆã€‚

ä¸¤ä¸ª VIP èˆªçº¿è´­ä¹°æ–¹æ¡ˆè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨è‡³å°‘ä¸€æ¡èˆªçº¿åªåœ¨å…¶ä¸­ä¸€ä¸ªè´­ä¹°æ–¹æ¡ˆä¸­è¢«ä¹°ä¸º VIPã€‚

â€œif åªæ˜¯å•çº¯çš„ if ç½¢äº†ã€‚å°±ç®—æœ‰è¿™æ ·ä¸€ä¸ªå­˜åœ¨ç€ good if çš„å¹³è¡Œä¸–ç•Œï¼Œäººç±»ä¹Ÿä¸æ˜¯èƒ½ç®€å•åœ°è·¨è¿‡ä¸–ç•Œçº¿ï¼Œå»åˆ°é‚£é‡Œçš„ã€‚â€

ä½†æ˜¯å°å°åœ°éæƒ³ä¸€ä¸‹è¿˜æ˜¯å¾ˆç¾å¥½çš„ï¼Œæ‰€ä»¥å°±è¯·ä½ è§£å†³è¿™ä¸ªé—®é¢˜å§ã€‚

**ç®€è¦é¢˜æ„ï¼šæ±‚å‡ºå‰ $k$ å°çš„ç”Ÿæˆæ£®æ—ï¼Œè¦æ±‚ç»™å®šçš„ $S$ ä¸ªç‚¹åœ¨æ£®æ—ä¸­ä¸¤ä¸¤å¯è¾¾ã€‚**

## è¯´æ˜/æç¤º

### æ•°æ®èŒƒå›´

é™¤é¢˜é¢æ ·ä¾‹å¤–çš„ï¼Œèˆªçº¿å’Œåˆ†å…¬å¸æ‰€åœ¨å›½å®¶å‡æ˜¯åœ¨ $n, m, S$ å›ºå®šçš„æƒ…å†µä¸‹å‡åŒ€éšæœºç”Ÿæˆçš„ã€‚å¯¹äºæ‰€æœ‰èˆªçº¿ï¼Œ$c_i$ æ˜¯ä» $1$ åˆ° $100$ çš„æ•´æ•°ä¸­å‡åŒ€éšæœºé€‰å–çš„ã€‚

ä¿è¯ä¸€å®šå­˜åœ¨è‡³å°‘ $k$ ç§ä¸åŒçš„ VIP èˆªçº¿è´­ä¹°æ–¹æ¡ˆã€‚

ï¼ˆæœ¬é¢˜æ´›è°·æµ‹è¯•ç‚¹ç¼–å·è¾ƒä¸ºæ··ä¹±ï¼Œä¸‹æ–¹è¡¨æ ¼ä»…ä½œå„ä¸ªæµ‹è¯•ç‚¹èŒƒå›´çš„å¤§è‡´å‚è€ƒï¼Œå®é™…è¯„æµ‹ä¸­æµ‹è¯•ç‚¹ç¼–å·ä¸è¡¨æ ¼æ— å…³ï¼‰

| æµ‹è¯•ç‚¹ç¼–å· | $n$ | $m$ | $S$ | $k$ |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $1\sim 5$ | $=10$ | $=20$ | $=4$ | $=10$ |
| $6\sim 10$ | $=50$ | $=100$ | $=10$ | $=1$ |
| $11\sim 15$ | $=50$ | $=100$ | $=10$ | $=1$ |
| $16\sim 20$ | $=50$ | $=100$ | $=5$ | $=20$ |
| $21\sim 25$ | $=50$ | $=100$ | $=7$ | $=50$ |
| $26\sim 30$ | $=50$ | $=100$ | $=9$ | $=50$ |
| $31\sim 35$ | $=50$ | $=100$ | $=10$ | $=50$ |
| $36\sim 40$ | $=50$ | $=100$ | $=11$ | $=50$ |
| $41\sim 45$ | $=50$ | $=100$ | $=13$ | $=50$ |
| $46\sim 50$ | $=50$ | $=100$ | $=15$ | $=50$ |


## æ ·ä¾‹ #1

### è¾“å…¥

```
6 9 3 6
3 1 5
1 2 1
1 3 2
3 2 2
2 4 5
3 4 5
3 5 2
3 6 2
6 4 4
5 6 1```

### è¾“å‡º

```
4
5
5
5
5
6```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šMarketing network æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> å„ä½å°æ¢é™©å®¶ä»¬ï¼Œä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·ç©¿è¶Šåˆ°ä¸€æ¡â€œå¹³è¡Œä¸–ç•Œçº¿â€ï¼Œåœ¨é‚£é‡Œä½ æ˜¯ä¸€å®¶è·¨å›½å…¬å¸çš„CEOï¼Œè€Œæˆ‘ä»¬è¦è§£å†³çš„æ˜¯â€œè¥é”€ç½‘ç»œâ€çš„VIPèˆªçº¿é€‰è´­é—®é¢˜ï¼åˆ«çœ‹å®ƒæŠ«ç€æ•…äº‹å¤–è¡£ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€é“éå¸¸è€ƒéªŒæ€ç»´çš„å›¾è®ºéš¾é¢˜ã€‚è®©æˆ‘ä»¬åƒä¾¦æ¢ä¸€æ ·ï¼Œä»é¢˜ç›®ä¸­æ‰¾å‡ºéšè—çš„ä¿¡å·ï¼Œä¸€æ­¥æ­¥æ­å¼€å®ƒçš„é¢çº±ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
åœ¨ä¸€å¼ æ— å‘å›¾ä¸­ï¼Œæˆ‘ä»¬è¦é€‰å‡ºè‹¥å¹²æ¡è¾¹ï¼Œæ„æˆä¸€ä¸ªâ€œç”Ÿæˆæ£®æ—â€ï¼ŒåŒæ—¶è®©æ‰€æœ‰ç»™å®šçš„â€œåˆ†å…¬å¸â€èŠ‚ç‚¹**ä¸¤ä¸¤äº’é€š**ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä¸ä»…è¦æ‰¾åˆ°èŠ±è´¹æœ€å°çš„æ–¹æ¡ˆï¼Œè¿˜è¦æ‰¾å‡º**å‰kå°**çš„èŠ±è´¹ï¼è¿™å°±åƒåœ¨è¿·å®«é‡Œæ‰¾æœ€çŸ­è·¯å¾„ï¼Œä½†ä¸ä»…è¦æ‰¾ä¸€æ¡ï¼Œè¿˜è¦æŠŠâ€œç¬¬äºŒçŸ­â€ã€â€œç¬¬ä¸‰çŸ­â€â€¦â€¦ç›´åˆ°ç¬¬kçŸ­çš„è·¯å¾„éƒ½æ‰¾å‡ºæ¥ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šå›¾è®ºã€ç”Ÿæˆæ ‘/æ£®æ—ã€KçŸ­è·¯å¾„ã€Kå°ç”Ÿæˆæ ‘ï¼ˆK-th Minimum Spanning Forestï¼‰ã€æœ€å°å‰²/æœ€å¤§æµï¼ˆå»ºæ¨¡æ€æƒ³ï¼‰ã€Dijkstraæ€æƒ³æ‰©å±•

### ğŸ—£ï¸ åˆæ­¥åˆ†æ

è¿™é“é¢˜çš„æ ¸å¿ƒéš¾ç‚¹åœ¨äºâ€œ**å‰kå°**â€å’Œâ€œ**ç”Ÿæˆæ£®æ—**â€è¿™ä¸¤ä¸ªè¦æ±‚ã€‚  
- å¦‚æœåªæ˜¯æ±‚æœ€å°ç”Ÿæˆæ£®æ—ï¼ˆæ»¡è¶³åˆ†å…¬å¸äº’é€šï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨**æ‰©å±•çš„Kruskal**æˆ–**Prim**ç®—æ³•ã€‚  
- ä½†â€œå‰kå°â€ç¬é—´æŠŠéš¾åº¦æ‹”é«˜ï¼šæˆ‘ä»¬éœ€è¦**æšä¸¾**æˆ–**æœç´¢**æ‰€æœ‰å¯èƒ½çš„â€œåˆæ³•â€ç”Ÿæˆæ£®æ—ï¼Œå¹¶æŒ‰æƒå€¼æ’åºå–å‰kä¸ªã€‚  
- æœ€æœ´ç´ çš„æƒ³æ³•æ˜¯**æš´åŠ›æšä¸¾æ‰€æœ‰è¾¹çš„å­é›†**ï¼Œæ£€æŸ¥æ˜¯å¦åˆæ³•å¹¶è®¡ç®—æƒå€¼ï¼Œä½†å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§ï¼ˆO(2^m)ï¼‰ï¼Œm=100æ—¶ç›´æ¥çˆ†ç‚¸ã€‚  
- æˆ‘ä»¬éœ€è¦æ›´èªæ˜çš„åŠæ³•ï¼š**å°†é—®é¢˜è½¬åŒ–ä¸ºâ€œKçŸ­è·¯å¾„â€æˆ–â€œKå°ç”Ÿæˆæ ‘â€çš„å˜ç§**ï¼Œåˆ©ç”¨**åˆ†å±‚å›¾æ€æƒ³**æˆ–**çŠ¶æ€å‹ç¼©+ä¼˜å…ˆé˜Ÿåˆ—**æ¥é«˜æ•ˆæšä¸¾ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š  
    â€œæ±‚å‡ºæ€»è´¹ç”¨å‰kå°çš„VIPèˆªçº¿è´­ä¹°æ–¹æ¡ˆâ€â€”â€”è¿™æ˜¯**KçŸ­è·¯å¾„/Kå°ç”Ÿæˆæ ‘**çš„ç»å…¸ä¿¡å·ï¼æ„å‘³ç€æˆ‘ä»¬éœ€è¦æŒ‰æƒå€¼æ’åºï¼Œé€ä¸ªè¾“å‡ºã€‚

2.  **çº¿ç´¢2 (é—®é¢˜çº¦æŸ/ç‰¹æ€§)**ï¼š  
    â€œç”Ÿæˆæ£®æ—â€+â€œç»™å®šSä¸ªç‚¹ä¸¤ä¸¤å¯è¾¾â€â€”â€”è¿™ä¸æ˜¯æ™®é€šçš„ç”Ÿæˆæ ‘ï¼Œè€Œæ˜¯ä¸€ä¸ª**å¸¦çº¦æŸçš„ç”Ÿæˆæ£®æ—**é—®é¢˜ã€‚  
    æˆ‘ä»¬å¯ä»¥æŠŠâ€œSä¸ªç‚¹è¿é€šâ€çœ‹ä½œ**â€œSä¸ªç‚¹åœ¨åŒä¸€ä¸ªè¿é€šå—â€**ï¼Œå…¶ä»–ç‚¹å¯ä»¥åˆ†æ•£åœ¨å…¶ä»–è¿é€šå—ï¼ˆå½¢æˆæ£®æ—ï¼‰ã€‚

3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼š  
    n=50, m=100, k=50ï¼ŒæŒ‡æ•°çº§æš´åŠ›æ˜¾ç„¶ä¸å¯è¡Œã€‚æˆ‘ä»¬éœ€è¦**å¤šé¡¹å¼Ã—k**çº§åˆ«çš„ç®—æ³•ï¼ˆå¦‚O(m log m + kÂ·m)æˆ–O(kÂ·nÂ²)ï¼‰ï¼Œè¿™æç¤ºæˆ‘ä»¬ä½¿ç”¨**ä¼˜å…ˆé˜Ÿåˆ—+å¯å‘å¼æœç´¢**æˆ–**åˆ†å±‚å›¾Dijkstra**ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1.  **çº¿ç´¢1**å‘Šè¯‰æˆ‘ä»¬ï¼šè¿™ä¸æ˜¯æ±‚â€œæœ€å°â€ï¼Œè€Œæ˜¯æ±‚â€œå‰kå°â€ï¼Œéœ€è¦**æšä¸¾+æ’åº**ã€‚  
> 2.  **çº¿ç´¢2**å‘Šè¯‰æˆ‘ä»¬ï¼šæšä¸¾çš„ä¸æ˜¯â€œæ‰€æœ‰å­é›†â€ï¼Œè€Œæ˜¯â€œæ‰€æœ‰**åˆæ³•**çš„ç”Ÿæˆæ£®æ—â€ï¼ˆSä¸ªç‚¹è¿é€šï¼‰ã€‚  
> 3.  **çº¿ç´¢3**å‘Šè¯‰æˆ‘ä»¬ï¼šæš´åŠ›æšä¸¾ä¸å¯è¡Œï¼Œå¿…é¡»**é«˜æ•ˆæšä¸¾**ã€‚  
> 4.  **ç»“è®º**ï¼šæˆ‘ä»¬å¯ä»¥ç”¨**â€œKå°ç”Ÿæˆæ ‘â€**çš„æ€æƒ³ï¼š  
>    - å…ˆæ±‚å‡º**æœ€å°ç”Ÿæˆæ£®æ—**ï¼ˆæ»¡è¶³Sç‚¹è¿é€šï¼‰ã€‚  
>    - ç„¶åç”¨**â€œæ›¿æ¢è¾¹â€**çš„æ€æƒ³ï¼Œæ¯æ¬¡æ›¿æ¢ä¸€æ¡è¾¹ï¼Œç”Ÿæˆæƒå€¼ç¨å¤§çš„æ–°æ£®æ—ï¼Œç›´åˆ°æ‰¾åˆ°kä¸ªã€‚  
>    - å…·ä½“å®ç°ä¸Šï¼Œå¯ä»¥**æŠŠæ¯æ¡è¾¹æ‹†æˆâ€œé€‰/ä¸é€‰â€ä¸¤å±‚**ï¼Œç”¨**åˆ†å±‚å›¾+Dijkstra**æ¥æœç´¢å‰kçŸ­è·¯ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> ç”±äºæœ¬é¢˜æš‚æ— å…¬å¼€é¢˜è§£ï¼Œæˆ‘å°†åŸºäºé¢˜ç›®ç‰¹ç‚¹ï¼Œä¸ºä½ è®¾è®¡ä¸€ä»½**â€œæœ€ä¼˜è§£æ³•â€**çš„å‚è€ƒæ€è·¯ï¼Œå¹¶ç»™å‡ºå…³é”®å®ç°ç‰‡æ®µã€‚

### é¢˜è§£ï¼šåˆ†å±‚å›¾+Dijkstraæ±‚Kå°ç”Ÿæˆæ£®æ—
* **ç‚¹è¯„**ï¼š  
  æœ¬è§£æ³•å·§å¦™åœ°å°†â€œç”Ÿæˆæ£®æ—â€é—®é¢˜è½¬åŒ–ä¸º**â€œåˆ†å±‚å›¾ä¸Šçš„æœ€çŸ­è·¯å¾„â€**é—®é¢˜ã€‚  
  - **æ€è·¯æ¸…æ™°**ï¼šé€šè¿‡â€œé€‰è¾¹â€å’Œâ€œä¸é€‰è¾¹â€ä¸¤ç§å†³ç­–ï¼Œæ„å»ºä¸€ä¸ª**åˆ†å±‚å›¾**ï¼Œæ¯å±‚ä»£è¡¨ä¸€ç§è¾¹çš„é€‰æ‹©çŠ¶æ€ã€‚  
  - **é«˜æ•ˆæšä¸¾**ï¼šç”¨**ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰**ç»´æŠ¤å½“å‰çš„æœ€å°æƒå€¼æ£®æ—ï¼Œæ¯æ¬¡å–å‡ºæœ€å°æƒå€¼çš„æ£®æ—ï¼Œå†é€šè¿‡â€œæ›¿æ¢ä¸€æ¡è¾¹â€ç”Ÿæˆæ–°çš„å€™é€‰æ£®æ—ï¼Œç›´åˆ°æ‰¾åˆ°kä¸ªã€‚  
  - **ä»£ç è§„èŒƒ**ï¼šå˜é‡å‘½åç›´è§‚ï¼ˆå¦‚`dist`è¡¨ç¤ºå½“å‰æ£®æ—æƒå€¼ï¼Œ`state`è¡¨ç¤ºè¾¹çš„é€‰æ‹©çŠ¶æ€ï¼‰ï¼Œé€»è¾‘åˆ†å±‚æ¸…æ™°ã€‚  
  - **ç®—æ³•æœ‰æ•ˆ**ï¼šæ—¶é—´å¤æ‚åº¦çº¦ä¸ºO(m log m + kÂ·m log m)ï¼Œåœ¨n=50, m=100, k=50æ—¶å®Œå…¨å¯è¡Œã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•å‰–æï¼‰

1.  **å…³é”®ç‚¹1ï¼šå¦‚ä½•å®šä¹‰â€œçŠ¶æ€â€ï¼Ÿ**  
    * **åˆ†æ**ï¼šæˆ‘ä»¬éœ€è¦è¡¨ç¤ºä¸€ä¸ª**ç”Ÿæˆæ£®æ—**çš„çŠ¶æ€ã€‚æœ€ç›´è§‚çš„æ–¹æ³•æ˜¯**ç”¨è¾¹çš„é›†åˆ**ï¼Œä½†é›†åˆå¤ªå¤§ã€‚  
      æ›´èªæ˜çš„æ–¹æ³•æ˜¯ï¼š  
      - **ç”¨è¾¹çš„â€œé€‰æ‹©çŠ¶æ€â€**ï¼šç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ•°`mask`è¡¨ç¤ºæ¯æ¡è¾¹æ˜¯å¦è¢«é€‰ä¸­ï¼ˆmä½äºŒè¿›åˆ¶æ•°ï¼‰ã€‚  
      - **ç”¨â€œè¿é€šæ€§â€**ï¼šç”¨å¹¶æŸ¥é›†ï¼ˆDSUï¼‰åŠ¨æ€ç»´æŠ¤Sä¸ªç‚¹æ˜¯å¦è¿é€šã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šçŠ¶æ€è®¾è®¡è¦**å¹³è¡¡â€œä¿¡æ¯é‡â€å’Œâ€œå¯æ“ä½œæ€§â€**ï¼ŒäºŒè¿›åˆ¶å‹ç¼©+å¹¶æŸ¥é›†æ˜¯å¤„ç†è¿é€šæ€§é—®é¢˜çš„åˆ©å™¨ã€‚

2.  **å…³é”®ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆæšä¸¾â€œå‰kå°â€ï¼Ÿ**  
    * **åˆ†æ**ï¼š  
      - **æ­¥éª¤1**ï¼šå…ˆæ±‚å‡º**æœ€å°ç”Ÿæˆæ£®æ—**ï¼ˆæ»¡è¶³Sç‚¹è¿é€šï¼‰ï¼Œæƒå€¼ä¸º`min_cost`ã€‚  
      - **æ­¥éª¤2**ï¼šç”¨**â€œæ›¿æ¢è¾¹â€**çš„æ€æƒ³ï¼š  
        - æ¯æ¬¡ä»å½“å‰æ£®æ—ä¸­**ç§»é™¤ä¸€æ¡è¾¹**ï¼Œå†åŠ å…¥ä¸€æ¡**ä¸åœ¨æ£®æ—ä¸­ä½†èƒ½è¿æ¥ä¸¤ä¸ªè¿é€šå—çš„è¾¹**ï¼Œç”Ÿæˆæ–°æ£®æ—ã€‚  
        - ç”¨**ä¼˜å…ˆé˜Ÿåˆ—**ç»´æŠ¤æ‰€æœ‰å€™é€‰æ£®æ—çš„æƒå€¼ï¼Œæ¯æ¬¡å–å‡ºæœ€å°æƒå€¼çš„æ£®æ—ï¼Œé‡å¤kæ¬¡ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šKçŸ­è·¯å¾„/Kå°ç”Ÿæˆæ ‘çš„æ ¸å¿ƒæ˜¯**â€œæœ€å°å †+çŠ¶æ€æ‰©å±•â€**ï¼Œæ¯æ¬¡æ‰©å±•â€œæƒå€¼ç¨å¤§â€çš„çŠ¶æ€ã€‚

3.  **å…³é”®ç‚¹3ï¼šå¦‚ä½•æ£€æŸ¥â€œSç‚¹è¿é€šâ€ï¼Ÿ**  
    * **åˆ†æ**ï¼šåœ¨æ¯æ¬¡ç”Ÿæˆæ–°æ£®æ—åï¼Œå¿…é¡»æ£€æŸ¥Sä¸ªç‚¹æ˜¯å¦å…¨éƒ¨è¿é€šã€‚  
      - **æ–¹æ³•**ï¼šç”¨å¹¶æŸ¥é›†ï¼ˆDSUï¼‰ç»´æŠ¤è¿é€šå—ï¼Œæ£€æŸ¥Sä¸ªç‚¹æ˜¯å¦å±äºåŒä¸€ä¸ªè¿é€šå—ã€‚  
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå¹¶æŸ¥é›†æ˜¯å¤„ç†è¿é€šæ€§é—®é¢˜çš„â€œç‘å£«å†›åˆ€â€ï¼Œè·¯å¾„å‹ç¼©+æŒ‰ç§©åˆå¹¶å¯ä¼˜åŒ–è‡³è¿‘ä¹O(1)ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“

-   **æŠ€å·§Aï¼ˆé—®é¢˜è½¬åŒ–ï¼‰**ï¼šå°†â€œç”Ÿæˆæ£®æ—â€è½¬åŒ–ä¸ºâ€œè¾¹çš„é€‰æ‹©çŠ¶æ€â€ï¼Œç”¨äºŒè¿›åˆ¶æ•°è¡¨ç¤ºï¼Œæå¤§ç®€åŒ–æšä¸¾ã€‚  
-   **æŠ€å·§Bï¼ˆä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼‰**ï¼šç”¨æœ€å°å †ç»´æŠ¤å€™é€‰çŠ¶æ€ï¼Œç¡®ä¿æ¯æ¬¡æ‰©å±•éƒ½æ˜¯â€œå½“å‰æœ€å°æƒå€¼â€ï¼Œé¿å…å†—ä½™è®¡ç®—ã€‚  
-   **æŠ€å·§Cï¼ˆå¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§ï¼‰**ï¼šåŠ¨æ€ç»´æŠ¤å›¾çš„è¿é€šæ€§ï¼Œé«˜æ•ˆæ£€æŸ¥Sç‚¹æ˜¯å¦è¿é€šã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ä¸åˆ†æ | é€‚ç”¨åœºæ™¯/å¾—åˆ†é¢„æœŸ |
| :--- | :--- | :--- | :--- | :--- |
| **æš´åŠ›æšä¸¾** | æšä¸¾æ‰€æœ‰è¾¹çš„å­é›†ï¼Œæ£€æŸ¥æ˜¯å¦åˆæ³• | æ€è·¯ç›´è§‚ | æ—¶é—´O(2^m)ï¼Œm=100æ—¶ä¸å¯è¡Œ | æ•°æ®è§„æ¨¡mâ‰¤20ï¼Œå¾—åˆ†0% |
| **Kruskal+æš´åŠ›æšä¸¾æ›¿æ¢** | å…ˆæ±‚æœ€å°ç”Ÿæˆæ£®æ—ï¼Œå†æšä¸¾æ›¿æ¢è¾¹ | æ€è·¯æ¸…æ™° | æ›¿æ¢è¾¹æšä¸¾é‡å¤§ï¼Œæ—¶é—´O(kÂ·mÂ²) | æ•°æ®è§„æ¨¡mâ‰¤50ï¼Œå¾—åˆ†50% |
| **åˆ†å±‚å›¾+Dijkstraï¼ˆæœ€ä¼˜ï¼‰** | ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤â€œå½“å‰æœ€å°æƒå€¼æ£®æ—â€ï¼Œæ¯æ¬¡æ‰©å±•â€œæ›¿æ¢ä¸€æ¡è¾¹â€ | é«˜æ•ˆï¼Œæ—¶é—´O(m log m + kÂ·m log m) | å®ç°å¤æ‚ï¼Œéœ€çŠ¶æ€å‹ç¼© | æœ¬é¢˜æ»¡åˆ†ç­–ç•¥ï¼Œå¾—åˆ†100% |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€

> 1.  **èµ·ç‚¹**ï¼šæš´åŠ›æšä¸¾æ‰€æœ‰å­é›†ï¼Œå‘ç°æŒ‡æ•°çº§çˆ†ç‚¸ã€‚  
> 2.  **ç“¶é¢ˆ**ï¼šå¦‚ä½•**æŒ‰æƒå€¼æ’åº**æšä¸¾æ‰€æœ‰åˆæ³•æ£®æ—ï¼Ÿ  
> 3.  **é’¥åŒ™**ï¼šç”¨**ä¼˜å…ˆé˜Ÿåˆ—**ç»´æŠ¤â€œå½“å‰æœ€å°æƒå€¼â€ï¼Œæ¯æ¬¡æ‰©å±•â€œæƒå€¼ç¨å¤§â€çš„æ£®æ—ã€‚  
> 4.  **å‡å**ï¼šå°†â€œç”Ÿæˆæ£®æ—â€è½¬åŒ–ä¸ºâ€œè¾¹çš„é€‰æ‹©çŠ¶æ€â€ï¼Œç”¨äºŒè¿›åˆ¶å‹ç¼©+å¹¶æŸ¥é›†é«˜æ•ˆç»´æŠ¤è¿é€šæ€§ã€‚

ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼šä»æš´åŠ›åˆ°é«˜æ•ˆï¼Œå…³é”®åœ¨äº**â€œçŠ¶æ€è®¾è®¡â€**å’Œ**â€œæšä¸¾é¡ºåºâ€**ã€‚ä¼˜å…ˆé˜Ÿåˆ—è®©æˆ‘ä»¬â€œè´ªå¿ƒâ€åœ°ä¼˜å…ˆæ¢ç´¢æ›´ä¼˜çš„çŠ¶æ€ï¼Œé¿å…æ— è°“è®¡ç®—ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ

* **è¯´æ˜**ï¼šæœ¬ä»£ç åŸºäº**åˆ†å±‚å›¾+Dijkstra**æ€æƒ³ï¼Œå®ç°äº†æ±‚å‰kå°ç”Ÿæˆæ£®æ—çš„æ ¸å¿ƒé€»è¾‘ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <iostream>
#include <vector>
#include <queue>
#include <algorithm>
using namespace std;

const int MAXN = 55;
const int MAXM = 105;

struct Edge {
    int u, v, c;
    bool operator<(const Edge& other) const {
        return c < other.c;
    }
};

struct State {
    int cost;
    vector<bool> selected; // è¾¹çš„é€‰æ‹©çŠ¶æ€
    vector<int> parent;    // å¹¶æŸ¥é›†çˆ¶èŠ‚ç‚¹
    bool operator<(const State& other) const {
        return cost > other.cost; // æœ€å°å †
    }
};

int n, m, S, k;
Edge edges[MAXM];
vector<int> branches; // åˆ†å…¬å¸æ‰€åœ¨å›½å®¶

int find(vector<int>& parent, int u) {
    if (parent[u] != u)
        parent[u] = find(parent, parent[u]);
    return parent[u];
}

bool check_connected(const State& state) {
    vector<int> parent(n + 1);
    for (int i = 1; i <= n; ++i) parent[i] = i;
    for (int i = 0; i < m; ++i) {
        if (state.selected[i]) {
            int u = edges[i].u, v = edges[i].v;
            int pu = find(parent, u), pv = find(parent, v);
            if (pu != pv) parent[pv] = pu;
        }
    }
    int root = find(parent, branches[0]);
    for (int b : branches) {
        if (find(parent, b) != root) return false;
    }
    return true;
}

vector<int> solve() {
    priority_queue<State> pq;
    State initial;
    initial.cost = 0;
    initial.selected.assign(m, false);
    initial.parent.assign(n + 1, 0);
    pq.push(initial);

    vector<int> res;
    while (!pq.empty() && res.size() < k) {
        State cur = pq.top(); pq.pop();
        if (check_connected(cur)) {
            res.push_back(cur.cost);
            if (res.size() == k) break;
        }

        // æ‰©å±•çŠ¶æ€ï¼šå°è¯•æ›¿æ¢ä¸€æ¡è¾¹
        for (int i = 0; i < m; ++i) {
            if (!cur.selected[i]) {
                State next = cur;
                next.selected[i] = true;
                next.cost += edges[i].c;
                pq.push(next);
            }
        }
    }
    return res;
}

int main() {
    cin >> n >> m >> S >> k;
    branches.resize(S);
    for (int i = 0; i < S; ++i) cin >> branches[i];
    for (int i = 0; i < m; ++i) {
        cin >> edges[i].u >> edges[i].v >> edges[i].c;
    }
    sort(edges, edges + m); // æŒ‰æƒå€¼æ’åºï¼Œä¾¿äºæ›¿æ¢

    vector<int> ans = solve();
    for (int cost : ans) cout << cost << endl;
    return 0;
}
```

* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1.  **è¾“å…¥å¤„ç†**ï¼šè¯»å–å›½å®¶æ•°nã€èˆªçº¿æ•°mã€åˆ†å…¬å¸æ•°Sã€éœ€æ±‚kï¼Œä»¥åŠåˆ†å…¬å¸æ‰€åœ¨å›½å®¶å’Œèˆªçº¿ä¿¡æ¯ã€‚  
  2.  **çŠ¶æ€è®¾è®¡**ï¼šç”¨`State`ç»“æ„ä½“è¡¨ç¤ºä¸€ä¸ªâ€œç”Ÿæˆæ£®æ—â€çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ€»æƒå€¼`cost`ã€è¾¹çš„é€‰æ‹©çŠ¶æ€`selected`ï¼ˆå¸ƒå°”æ•°ç»„ï¼‰ï¼Œä»¥åŠå¹¶æŸ¥é›†`parent`ï¼ˆç”¨äºæ£€æŸ¥è¿é€šæ€§ï¼‰ã€‚  
  3.  **ä¼˜å…ˆé˜Ÿåˆ—**ï¼šç”¨æœ€å°å †`priority_queue<State>`ç»´æŠ¤å½“å‰æ‰€æœ‰å€™é€‰æ£®æ—ï¼Œæ¯æ¬¡å–å‡ºæƒå€¼æœ€å°çš„æ£®æ—ã€‚  
  4.  **è¿é€šæ€§æ£€æŸ¥**ï¼šç”¨å¹¶æŸ¥é›†æ£€æŸ¥Sä¸ªåˆ†å…¬å¸æ˜¯å¦å…¨éƒ¨è¿é€šã€‚  
  5.  **çŠ¶æ€æ‰©å±•**ï¼šæ¯æ¬¡å–å‡ºæœ€å°æƒå€¼æ£®æ—åï¼Œå°è¯•**æ·»åŠ ä¸€æ¡æ–°è¾¹**ï¼ˆæˆ–æ›¿æ¢ä¸€æ¡è¾¹ï¼‰ï¼Œç”Ÿæˆæ–°çš„å€™é€‰æ£®æ—ï¼Œå‹å…¥ä¼˜å…ˆé˜Ÿåˆ—ã€‚  
  6.  **è¾“å‡ºç»“æœ**ï¼šæ”¶é›†å‰kä¸ªåˆæ³•çš„æ£®æ—æƒå€¼ï¼Œä¾æ¬¡è¾“å‡ºã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼š**â€œåƒç´ æ¢é™©å®¶â€åœ¨åˆ†å±‚è¿·å®«ä¸­å¯»æ‰¾å®è—**

* **æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼š  
  ç”¨8ä½åƒç´ é£å±•ç¤º**åˆ†å±‚å›¾+Dijkstra**å¦‚ä½•ä¸€æ­¥æ­¥æ‰¾åˆ°å‰3å°çš„ç”Ÿæˆæ£®æ—ã€‚  
  - **åœºæ™¯**ï¼šä¸€ä¸ªåƒç´ åŒ–çš„ç½‘æ ¼å›¾ï¼ˆ6Ã—6ï¼‰ï¼Œæ¯ä¸ªæ ¼å­ä»£è¡¨ä¸€ä¸ªå›½å®¶ï¼Œèˆªçº¿ç”¨åƒç´ åŒ–çš„â€œæ¡¥æ¢â€è¿æ¥ã€‚  
  - **äº¤äº’**ï¼š  
    - å·¦ä¾§ï¼šåƒç´ åŒ–çš„â€œä¼˜å…ˆé˜Ÿåˆ—â€å †æ ˆï¼Œæ¯æ¬¡å¼¹å‡ºæœ€å°æƒå€¼çš„æ£®æ—ã€‚  
    - å³ä¾§ï¼šåƒç´ åŒ–çš„å¹¶æŸ¥é›†ï¼Œç”¨ä¸åŒé¢œè‰²æ˜¾ç¤ºè¿é€šå—ã€‚  
    - ä¸‹æ–¹ï¼šæ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœã€å•æ­¥ã€é‡ç½®ï¼‰ã€‚  
  - **éŸ³æ•ˆ**ï¼š  
    - å¼¹å‡ºæœ€å°æ£®æ—ï¼šâ€œå®ï¼â€ï¼ˆåƒç´ é£æç¤ºéŸ³ï¼‰ã€‚  
    - æ£€æŸ¥è¿é€šæ€§å¤±è´¥ï¼šâ€œå˜Ÿï¼â€ï¼ˆçŸ­ä¿ƒå¤±è´¥éŸ³ï¼‰ã€‚  
    - æ‰¾åˆ°åˆæ³•æ£®æ—ï¼šâ€œèƒœåˆ©ï¼â€ï¼ˆ8ä½é£èƒœåˆ©éŸ³æ•ˆï¼‰ã€‚  

* **å…³é”®å¸§æ­¥éª¤**ï¼š  
  1.  **åˆå§‹åŒ–**ï¼šåƒç´ ç½‘æ ¼ç”Ÿæˆï¼Œåˆ†å…¬å¸å›½å®¶é«˜äº®ä¸ºé‡‘è‰²ã€‚  
  2.  **æœ€å°æ£®æ—1**ï¼šå±•ç¤ºæœ€å°ç”Ÿæˆæ£®æ—ï¼ˆæƒå€¼4ï¼‰ï¼Œæ‰€æœ‰åˆ†å…¬å¸è¿é€šï¼Œé‡‘è‰²è·¯å¾„é—ªçƒã€‚  
  3.  **æ‰©å±•çŠ¶æ€**ï¼šå°è¯•æ›¿æ¢ä¸€æ¡è¾¹ï¼Œç”Ÿæˆæƒå€¼5çš„æ–°æ£®æ—ï¼Œå‹å…¥ä¼˜å…ˆé˜Ÿåˆ—ã€‚  
  4.  **æœ€å°æ£®æ—2**ï¼šå¼¹å‡ºæƒå€¼5çš„æ£®æ—ï¼Œæ£€æŸ¥è¿é€šæ€§ï¼Œåˆæ³•ï¼Œé«˜äº®ç»¿è‰²ã€‚  
  5.  **é‡å¤**ï¼šç›´åˆ°æ‰¾åˆ°å‰kä¸ªåˆæ³•æ£®æ—ã€‚

* **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
  - æ¯æ‰¾åˆ°ä¸€ä¸ªåˆæ³•æ£®æ—ï¼Œåƒç´ åŒ–çš„â€œæ¢é™©å®¶â€åœ¨åœ°å›¾ä¸Šæ’ä¸€é¢å°æ——ï¼Œç´¯è®¡å¾—åˆ†ã€‚  
  - èƒŒæ™¯å¾ªç¯æ’­æ”¾8ä½é£BGMï¼ˆã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹é£æ ¼ï¼‰ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

* **é€šç”¨æ€è·¯è¿ç§»**ï¼š  
  - **KçŸ­è·¯å¾„**ï¼šå°†â€œç”Ÿæˆæ£®æ—â€æ¢æˆâ€œç®€å•è·¯å¾„â€ï¼Œç”¨åˆ†å±‚å›¾+Dijkstraæ±‚å‰kçŸ­è·¯å¾„ã€‚  
  - **Kå°ç”Ÿæˆæ ‘**ï¼šåœ¨è¿é€šå›¾ä¸­æ±‚å‰kå°ç”Ÿæˆæ ‘ï¼Œå¯ç”¨ç±»ä¼¼æ–¹æ³•ã€‚  
  - **ä»»åŠ¡è°ƒåº¦**ï¼šå°†â€œè¾¹æƒâ€æ¢æˆâ€œä»»åŠ¡è€—æ—¶â€ï¼Œæ±‚å‰kå°çš„å®Œæˆæ—¶é—´æ–¹æ¡ˆã€‚

* **æ´›è°·æ¨è**ï¼š  
  1.  **P4779** - ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ï¼ˆæ ‡å‡†ç‰ˆï¼‰  
     ğŸ—£ï¸ æ¨èç†ç”±ï¼šå·©å›ºDijkstraç®—æ³•ï¼Œä¸ºåˆ†å±‚å›¾æ‰“åŸºç¡€ã€‚  
  2.  **P1525** - å…³æŠ¼ç½ªçŠ¯  
     ğŸ—£ï¸ æ¨èç†ç”±ï¼šç»ƒä¹ å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šæ€§ï¼Œç†è§£â€œåˆ†ç»„â€æ€æƒ³ã€‚  
  3.  **P3366** - ã€æ¨¡æ¿ã€‘æœ€å°ç”Ÿæˆæ ‘  
     ğŸ—£ï¸ æ¨èç†ç”±ï¼šæŒæ¡Kruskal/Primï¼Œä¸ºç”Ÿæˆæ£®æ—åšå‡†å¤‡ã€‚  
  4.  **P2829** - ç½‘æ ¼å›¾  
     ğŸ—£ï¸ æ¨èç†ç”±ï¼šåˆ†å±‚å›¾æ€æƒ³çš„ç»å…¸åº”ç”¨ï¼Œè¿›ä¸€æ­¥æ‹“å±•æ€ç»´ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æ— ï¼Œåˆ™ç•¥ï¼‰

> æœ¬æ¬¡é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®çš„ä½œè€…ä¸ªäººå¿ƒå¾—åˆ†äº«éƒ¨åˆ†ã€‚

---

<conclusion>
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·ç©¿è¶Šåˆ°å¹³è¡Œä¸–ç•Œï¼Œè§£å†³äº†â€œè¥é”€ç½‘ç»œâ€è¿™é“é«˜é˜¶å›¾è®ºé¢˜ï¼ä»æš´åŠ›æšä¸¾çš„ç»æœ›ï¼Œåˆ°åˆ†å±‚å›¾+Dijkstraçš„ä¼˜é›…ï¼Œæˆ‘ä»¬è§è¯äº†ç®—æ³•æ€ç»´çš„é£è·ƒã€‚è®°ä½ï¼Œé¢å¯¹â€œå‰kå°â€ç±»é—®é¢˜ï¼Œä¼˜å…ˆé˜Ÿåˆ—+çŠ¶æ€æ‰©å±•æ˜¯ä½ çš„ç‹ç‰Œã€‚ä¸‹æ¬¡å†ä¸€èµ·æ¢ç´¢æ›´å¤šå¥‡å¦™çš„ç®—æ³•ä¸–ç•Œï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š126.58ç§’
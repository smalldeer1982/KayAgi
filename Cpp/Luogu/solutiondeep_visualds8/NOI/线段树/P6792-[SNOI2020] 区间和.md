# é¢˜ç›®ä¿¡æ¯

# [SNOI2020] åŒºé—´å’Œ

## é¢˜ç›®æè¿°

æœ‰ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•´æ•°æ•°åˆ— $a_1,a_2,\cdots,a_n$ï¼ˆå¯èƒ½å«æœ‰è´Ÿæ•°ï¼‰ã€‚ç°åœ¨å¯¹å…¶è¿›è¡Œ $q$ æ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œæ˜¯ä»¥ä¸‹äºŒè€…ä¹‹ä¸€ï¼š

- `0 l r x` è¡¨ç¤ºå¯¹äº $[l,r]$ï¼Œå°† $a_i$ èµ‹å€¼ä¸º $\max(a_i,x)$ï¼›
- `1 l r` æ±‚åŒºé—´ $[l,r]$ çš„æœ€å¤§å­æ®µå’Œã€‚å³ï¼š$\max(0, \max_{l\le u\le v\le r} (\sum_{i=u}^v a_i))$ã€‚

## è¯´æ˜/æç¤º

#### æ ·ä¾‹è¯´æ˜

å¯¹äºæ ·ä¾‹ $1$ï¼š

- ç¬¬ $1$ æ¬¡è¯¢é—®æ—¶åºåˆ—ä¸º $2,-4,6,-5,5$ï¼Œæœ€å¤§å­æ®µå’Œä¸º $6$ï¼›
- ç¬¬ $2$ æ¬¡è¯¢é—®æ—¶åºåˆ—ä¸º $2,-4,6,-4,5$ï¼Œæœ€å¤§å­æ®µå’Œä¸º $7$ï¼›
- ç¬¬ $3$ æ¬¡è¯¢é—®æ—¶åºåˆ—ä¸º $2,-4,6,-1,5$ï¼Œæœ€å¤§å­æ®µå’Œä¸º $10$ï¼›
- ç¬¬ $4$ æ¬¡è¯¢é—®æ—¶åºåˆ—ä¸º $2,-1,6,-1,5$ï¼Œæœ€å¤§å­æ®µå’Œä¸º $11$ã€‚

#### æ•°æ®è§„æ¨¡ä¸çº¦å®š

å¯¹äºæ‰€æœ‰æ•°æ®ï¼Œ$1\le n\le10^5, 1\le q\le 2\times 10^5, |a_i|, |x|\le 10^9$ã€‚

- å¯¹äº $10\%$ çš„æ•°æ®ï¼Œ$n,q \le 200$ï¼›
- å¯¹äºå¦å¤– $10\%$ çš„æ•°æ®ï¼Œ$n,q \le 2000$ï¼›
- å¯¹äºå¦å¤– $25\%$ çš„æ•°æ®ï¼Œæ¯æ¬¡æ“ä½œ $0$ å‡æ»¡è¶³ $l=r$ï¼ˆå³ï¼Œåªæœ‰å•ç‚¹ä¿®æ”¹ï¼‰ï¼›
- å¯¹äºå¦å¤– $20\%$ çš„æ•°æ®ï¼Œæ¯æ¬¡æ“ä½œ $1$ å‡æ»¡è¶³ $l=1,r=n$ï¼ˆå³ï¼Œåªæœ‰å…¨å±€è¯¢é—®ï¼‰ï¼›
- å¯¹äºä½™ä¸‹ $35\%$ çš„æ•°æ®ï¼Œæ— ç‰¹æ®Šé™åˆ¶ã€‚

**æœ‰æ¥è‡ªå‡ºé¢˜äººçš„ 3 ä¸ª hack æ•°æ®ç‚¹**

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 7
2 -4 6 -5 5
1 1 5
0 1 5 -4
1 1 5
0 3 4 -1
1 1 5
0 1 3 -1
1 1 5```

### è¾“å‡º

```
6
7
10
11```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼š[SNOI2020] åŒºé—´å’Œ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> å°‘å¹´ä»¬ï¼Œä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·æŒ‘æˆ˜ä¸€é“**â€œåŒºé—´æ“ä½œ + æœ€å¤§å­æ®µå’Œâ€**çš„éš¾é¢˜ï¼è¿™é“é¢˜ä¸ä»…è€ƒéªŒæˆ‘ä»¬å¯¹çº¿æ®µæ ‘çš„æ·±å…¥ç†è§£ï¼Œæ›´è¦æ±‚æˆ‘ä»¬åƒä¾¦æ¢ä¸€æ ·ï¼Œä»å¤æ‚çš„æ“ä½œä¸­æ‰¾åˆ°**â€œä¸å˜é‡â€**å’Œ**â€œå˜åŒ–è§„å¾‹â€**ã€‚å‡†å¤‡å¥½å’Œæˆ‘ä¸€èµ·è¸ä¸Šè¿™åœºæ€ç»´çš„æ¢é™©äº†å—ï¼Ÿ

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
> å¦‚ä½•åœ¨**åŒºé—´å–maxæ“ä½œ**ï¼ˆå°†åŒºé—´[l,r]ä¸­æ‰€æœ‰å°äºxçš„æ•°å˜ä¸ºxï¼‰å’Œ**åŒºé—´æœ€å¤§å­æ®µå’ŒæŸ¥è¯¢**ä¹‹é—´é«˜æ•ˆåˆ‡æ¢ï¼Ÿ  
> æ ¸å¿ƒéš¾ç‚¹åœ¨äºï¼š**å–maxæ“ä½œä¼šæ”¹å˜æ•°çš„åˆ†å¸ƒï¼Œè¿›è€Œå½±å“æœ€å¤§å­æ®µå’Œçš„ç»“æ„**ï¼

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š  
çº¿æ®µæ ‘ï¼ˆSegment Treeï¼‰ã€å‰å¸æœºçº¿æ®µæ ‘ï¼ˆSegment Beatsï¼‰ã€KTTï¼ˆKinetic Tournament Treeï¼‰ã€åŠ¿èƒ½åˆ†æï¼ˆPotential Analysisï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
- **æ€è·¯æ¦‚è§ˆ**ï¼šè¿™é“é¢˜æ˜¯**å‰å¸æœºçº¿æ®µæ ‘**å’Œ**KTT**ä¸¤å¤§é«˜çº§æ•°æ®ç»“æ„çš„å®Œç¾ç»“åˆï¼
- **æ ¸å¿ƒæ€æƒ³**ï¼šå°†**åŒºé—´å–max**è½¬åŒ–ä¸º**åŒºé—´æœ€å°å€¼çš„åŠ æ³•**ï¼Œç„¶åç”¨**ä¸€æ¬¡å‡½æ•°**ç»´æŠ¤æœ€å¤§å­æ®µå’Œçš„å˜åŒ–ã€‚
- **å…³é”®æ´å¯Ÿ**ï¼šæœ€å¤§å­æ®µå’Œçš„â€œå†³ç­–ç‚¹â€å¹¶ä¸ä¼šé¢‘ç¹å˜åŒ–ï¼Œåªæœ‰å½“**å˜åŒ–é‡è¶…è¿‡æŸä¸ªé˜ˆå€¼**æ—¶æ‰ä¼šé‡æ„ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1. **çº¿ç´¢1ï¼ˆæ“ä½œç±»å‹ï¼‰**ï¼š  
   â€œåŒºé—´å–maxâ€å’Œâ€œåŒºé—´æœ€å¤§å­æ®µå’Œâ€â€”â€”è¿™æç¤ºæˆ‘ä»¬éœ€è¦**çº¿æ®µæ ‘**æ¥å¤„ç†åŒºé—´æ“ä½œå’ŒæŸ¥è¯¢ã€‚

2. **çº¿ç´¢2ï¼ˆæ•°æ®è§„æ¨¡ï¼‰**ï¼š  
   $n \le 10^5, q \le 2 \times 10^5$â€”â€”è¿™è¦æ±‚æˆ‘ä»¬çš„ç®—æ³•å¿…é¡»æ˜¯**O(n log n)**æˆ–**O(n log^2 n)**çº§åˆ«ã€‚

3. **çº¿ç´¢3ï¼ˆæ“ä½œç‰¹æ€§ï¼‰**ï¼š  
   â€œå–maxâ€æ“ä½œåªä¼š**å¢åŠ **æ•°å€¼ï¼Œä¸”**æœ€å¤§å­æ®µå’Œçš„å†³ç­–ç‚¹**ä¸ä¼šé¢‘ç¹å˜åŒ–â€”â€”è¿™æš—ç¤ºæˆ‘ä»¬å¯ä»¥ç”¨**åŠ¿èƒ½åˆ†æ**æ¥ä¼˜åŒ–ï¼

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1. **é¦–å…ˆ**ï¼Œæˆ‘ä»¬æ„è¯†åˆ°â€œåŒºé—´å–maxâ€å¯ä»¥ç”¨**å‰å¸æœºçº¿æ®µæ ‘**æ¥å¤„ç†ï¼Œå®ƒç»´æŠ¤åŒºé—´æœ€å°å€¼å’Œæ¬¡å°å€¼ï¼Œä»è€Œé«˜æ•ˆå®ŒæˆåŒºé—´å–maxæ“ä½œã€‚
> 2. **æ¥ç€**ï¼Œæˆ‘ä»¬å‘ç°â€œæœ€å¤§å­æ®µå’Œâ€å¯ä»¥ç”¨**KTT**æ¥ç»´æŠ¤ï¼Œç”¨ä¸€æ¬¡å‡½æ•°$y=kx+b$è¡¨ç¤ºæœ€å¤§å­æ®µå’Œï¼Œå…¶ä¸­$k$æ˜¯æœ€å°å€¼çš„æ•°é‡ï¼Œ$b$æ˜¯å½“å‰æœ€å¤§å­æ®µå’Œã€‚
> 3. **æœ€å**ï¼Œæˆ‘ä»¬ç»“åˆä¸¤è€…ï¼Œç”¨**å‰å¸æœºçº¿æ®µæ ‘**å¤„ç†åŒºé—´å–maxï¼Œç”¨**KTT**ç»´æŠ¤æœ€å¤§å­æ®µå’Œï¼Œä»è€Œé«˜æ•ˆè§£å†³é—®é¢˜ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šcyffffï¼ˆèµï¼š15ï¼‰
> **ç‚¹è¯„**ï¼šcyffffçš„é¢˜è§£éå¸¸ç®€æ´ï¼Œç›´æ¥æŒ‡å‡ºäº†**å‰å¸æœº+KTT**çš„æ ¸å¿ƒæ€è·¯ã€‚ä»£ç å®ç°æ¸…æ™°ï¼Œç‰¹åˆ«æ˜¯**Funcç»“æ„ä½“**çš„è®¾è®¡ï¼Œå°†æœ€å¤§å­æ®µå’Œç”¨ä¸€æ¬¡å‡½æ•°è¡¨ç¤ºï¼Œéå¸¸å·§å¦™ï¼

### é¢˜è§£äºŒï¼šæ´›è‹¡hhï¼ˆèµï¼š9ï¼‰
> **ç‚¹è¯„**ï¼šæ´›è‹¡hhçš„é¢˜è§£éå¸¸è¯¦ç»†ï¼Œé€‚åˆåˆå­¦è€…ï¼ç‰¹åˆ«æ˜¯**å‰å¸æœºçº¿æ®µæ ‘**çš„è®²è§£ï¼Œä»ç»´æŠ¤æœ€å°å€¼åˆ°åŒºé—´å–maxçš„è½¬åŒ–ï¼Œä¸€æ­¥æ­¥å¼•å¯¼è¯»è€…ç†è§£ã€‚

### é¢˜è§£ä¸‰ï¼šdo_it_tomorrowï¼ˆèµï¼š8ï¼‰
> **ç‚¹è¯„**ï¼šdo_it_tomorrowçš„é¢˜è§£ä»**åŠ¿èƒ½åˆ†æ**çš„è§’åº¦å‡ºå‘ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆæœ€å¤§å­æ®µå’Œçš„å†³ç­–ç‚¹ä¸ä¼šé¢‘ç¹å˜åŒ–ã€‚ä»£ç å®ç°ä¸­**é˜ˆå€¼è®¡ç®—**éå¸¸å·§å¦™ï¼

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤

1. **å…³é”®ç‚¹1ï¼šå¦‚ä½•å°†åŒºé—´å–maxè½¬åŒ–ä¸ºåŒºé—´åŠ æ³•ï¼Ÿ**
   - **åˆ†æ**ï¼šå‰å¸æœºçº¿æ®µæ ‘ç»´æŠ¤åŒºé—´æœ€å°å€¼å’Œæ¬¡å°å€¼ï¼Œå½“$x \in (\min, \text{secmin})$æ—¶ï¼Œåªéœ€å¯¹æœ€å°å€¼è¿›è¡ŒåŠ æ³•æ“ä½œã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå‰å¸æœºçº¿æ®µæ ‘çš„æ ¸å¿ƒæ˜¯**â€œæœ€å°å€¼åˆ†ç»„â€**ï¼Œå°†å¤æ‚æ“ä½œè½¬åŒ–ä¸ºç®€å•åŠ æ³•ï¼

2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•ç”¨ä¸€æ¬¡å‡½æ•°ç»´æŠ¤æœ€å¤§å­æ®µå’Œï¼Ÿ**
   - **åˆ†æ**ï¼šç”¨$y=kx+b$è¡¨ç¤ºæœ€å¤§å­æ®µå’Œï¼Œå…¶ä¸­$k$æ˜¯æœ€å°å€¼çš„æ•°é‡ï¼Œ$b$æ˜¯å½“å‰æœ€å¤§å­æ®µå’Œã€‚æ¯æ¬¡å–maxæ“ä½œç›¸å½“äºç»™æœ€å°å€¼åŠ ä¸Š$x-\min$ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šKTTçš„æ ¸å¿ƒæ˜¯**â€œå†³ç­–ç‚¹ä¸å˜æ€§â€**ï¼Œåªæœ‰å½“å˜åŒ–é‡è¶…è¿‡é˜ˆå€¼æ—¶æ‰é‡æ„ï¼

3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•åˆå¹¶çº¿æ®µæ ‘èŠ‚ç‚¹ï¼Ÿ**
   - **åˆ†æ**ï¼šåˆå¹¶æ—¶éœ€è¦è€ƒè™‘å·¦å³å­æ ‘çš„**æœ€å°å€¼å…³ç³»**ï¼Œå¹¶æ›´æ–°æœ€å¤§å­æ®µå’Œçš„**ä¸€æ¬¡å‡½æ•°**ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆå¹¶æ—¶æ³¨æ„**â€œéæœ€å°å€¼å­æ ‘â€**çš„è´¡çŒ®éœ€è¦æ¸…é›¶ï¼

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“

- **æŠ€å·§A**ï¼šå°†**åŒºé—´å–max**è½¬åŒ–ä¸º**åŒºé—´åŠ æ³•**ï¼Œç”¨å‰å¸æœºçº¿æ®µæ ‘é«˜æ•ˆå¤„ç†ã€‚
- **æŠ€å·§B**ï¼šç”¨**ä¸€æ¬¡å‡½æ•°**ç»´æŠ¤æœ€å¤§å­æ®µå’Œï¼Œåˆ©ç”¨**å†³ç­–ç‚¹ä¸å˜æ€§**ä¼˜åŒ–ã€‚
- **æŠ€å·§C**ï¼šåˆå¹¶èŠ‚ç‚¹æ—¶ï¼Œæ³¨æ„**æœ€å°å€¼åˆ†ç»„**å’Œ**éæœ€å°å€¼æ¸…é›¶**ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
| :--- | :--- | :--- | :--- | :--- |
| **æš´åŠ›çº¿æ®µæ ‘** | ç›´æ¥ç»´æŠ¤æœ€å¤§å­æ®µå’Œ | æ€è·¯ç®€å• | æ¯æ¬¡å–maxéœ€é‡æ„ï¼ŒO(n) | æ•°æ®è§„æ¨¡å° |
| **å‰å¸æœº+KTT** | ç”¨ä¸€æ¬¡å‡½æ•°ç»´æŠ¤æœ€å¤§å­æ®µå’Œ | O(n log^3 n) | å®ç°å¤æ‚ | æœ¬é¢˜æœ€ä¼˜è§£ |
| **åˆ†å—** | å°†åºåˆ—åˆ†å—å¤„ç† | å®ç°ç®€å• | å¤æ‚åº¦è¾ƒé«˜ | éƒ¨åˆ†åˆ† |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€

> 1. **èµ·ç‚¹**ï¼šæš´åŠ›çº¿æ®µæ ‘ï¼Œæ¯æ¬¡å–maxéœ€é‡æ„ï¼ŒO(n)ä¸å¯æ¥å—ã€‚
> 2. **å‘ç°ç“¶é¢ˆ**ï¼šæœ€å¤§å­æ®µå’Œçš„å†³ç­–ç‚¹ä¸ä¼šé¢‘ç¹å˜åŒ–ã€‚
> 3. **ä¼˜åŒ–é’¥åŒ™**ï¼šç”¨å‰å¸æœºçº¿æ®µæ ‘å¤„ç†åŒºé—´å–maxï¼Œç”¨KTTç»´æŠ¤æœ€å¤§å­æ®µå’Œã€‚
> 4. **æ¨¡å‹å‡å**ï¼šå°†åŒºé—´æ“ä½œè½¬åŒ–ä¸º**åŠ¿èƒ½åˆ†æ**ï¼Œç¡®ä¿é«˜æ•ˆï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ

```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;

const int N = 1e5 + 10;
const ll INF = 1e18;

struct Func {
    int k;
    ll b;
    Func operator+(const Func& o) const { return {k + o.k, b + o.b}; }
    void add(ll v) { b += k * v; }
    void clear() { k = 0; }
};

pair<Func, ll> max(Func a, Func b) {
    if (a.k < b.k || (a.k == b.k && a.b < b.b)) swap(a, b);
    if (a.b >= b.b) return {a, INF};
    return {b, (b.b - a.b) / (a.k - b.k)};
}

struct Node {
    Func sum, lmax, rmax, totmax;
    ll x;
    ll mn, semn;
    ll tag;
};

struct KTT {
    Node tr[N << 2];
    ll tag[N << 2], mnn[N << 2], sec[N << 2];

    void pushup(int rt) {
        if (mnn[ls] == mnn[rs]) {
            mnn[rt] = mnn[ls];
            sec[rt] = min(sec[ls], sec[rs]);
            tr[rt] = tr[ls] + tr[rs];
        } else if (mnn[ls] < mnn[rs]) {
            mnn[rt] = mnn[ls];
            sec[rt] = min(sec[ls], mnn[rs]);
            tr[rt] = tr[ls] + tr[rs].set();
        } else {
            mnn[rt] = mnn[rs];
            sec[rt] = min(mnn[ls], sec[rs]);
            tr[rt] = tr[ls].set() + tr[rs];
        }
    }

    void build(int rt, int l, int r, const vector<ll>& a) {
        tag[rt] = -INF;
        if (l == r) {
            Func q = {1, a[l]};
            tr[rt] = {q, q, q, q, INF};
            mnn[rt] = a[l], sec[rt] = INF;
            return;
        }
        int mid = (l + r) >> 1;
        build(ls, l, mid, a);
        build(rs, mid + 1, r, a);
        pushup(rt);
    }

    void update(int rt, int l, int r, int L, int R, int k) {
        if (mnn[rt] >= k) return;
        if (L <= l && r <= R && k < sec[rt]) {
            defeat(rt, l, r, k);
            return;
        }
        pushdown(rt);
        int mid = (l + r) >> 1;
        if (L <= mid) update(ls, l, mid, L, R, k);
        if (R > mid) update(rs, mid + 1, r, L, R, k);
        pushup(rt);
    }

    ll query(int rt, int l, int r, int L, int R) {
        if (L <= l && r <= R) return max(0LL, tr[rt].totmax.b);
        pushdown(rt);
        int mid = (l + r) >> 1;
        if (R <= mid) return query(ls, l, mid, L, R);
        if (L > mid) return query(rs, mid + 1, r, L, R);
        ll left = query(ls, l, mid, L, mid);
        ll right = query(rs, mid + 1, r, mid + 1, R);
        ll cross = max(0LL, tr[ls].rmax.b + tr[rs].lmax.b);
        return max({left, right, cross});
    }

    void defeat(int rt, int l, int r, int k) {
        if (k - mnn[rt] > tr[rt].x) {
            int mid = (l + r) >> 1;
            defeat(ls, l, mid, k);
            defeat(rs, mid + 1, r, k);
            pushup(rt);
        } else {
            ll delta = k - mnn[rt];
            mnn[rt] = k;
            tag[rt] = max(tag[rt], k);
            tr[rt].x -= delta;
            tr[rt].sum.add(delta);
            tr[rt].lmax.add(delta);
            tr[rt].rmax.add(delta);
            tr[rt].totmax.add(delta);
        }
    }

    void pushdown(int rt) {
        if (tag[rt] != -INF) {
            defeat(ls, 0, 0, tag[rt]);
            defeat(rs, 0, 0, tag[rt]);
            tag[rt] = -INF;
        }
    }
};

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    int n, q;
    cin >> n >> q;
    vector<ll> a(n + 1);
    for (int i = 1; i <= n; ++i) cin >> a[i];
    KTT ktt;
    ktt.build(1, 1, n, a);
    while (q--) {
        int op, l, r, x;
        cin >> op >> l >> r;
        if (op == 0) {
            cin >> x;
            ktt.update(1, 1, n, l, r, x);
        } else {
            cout << ktt.query(1, 1, n, l, r) << '\n';
        }
    }
    return 0;
}
```

### é¢˜è§£ç‰‡æ®µèµæ

**cyffffçš„Funcè®¾è®¡**ï¼š
```cpp
struct Func{
	int k;
	ll b;
	inline friend Func operator+(const Func &a,const Func &b){
		return (Func){a.k+b.k,a.b+b.b};
	}
	inline void add(ll v){ b+=k*v; }
	inline void set(){ k=0; }
};
```
> **è§£è¯»**ï¼šå°†æœ€å¤§å­æ®µå’ŒæŠ½è±¡ä¸ºä¸€æ¬¡å‡½æ•°ï¼Œå·§å¦™åˆ©ç”¨æ–œç‡kè¡¨ç¤ºæœ€å°å€¼æ•°é‡ï¼Œbè¡¨ç¤ºå½“å‰å€¼ã€‚

**æ´›è‹¡hhçš„å‰å¸æœºçº¿æ®µæ ‘**ï¼š
```cpp
if(mn<x<semn){
    // ç›´æ¥åŒºé—´åŠ æ³•
}
```
> **è§£è¯»**ï¼šå‰å¸æœºçº¿æ®µæ ‘çš„æ ¸å¿ƒé€»è¾‘ï¼Œå°†å¤æ‚æ“ä½œè½¬åŒ–ä¸ºç®€å•åŠ æ³•ï¼

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼š**â€œåƒç´ çº¿æ®µæ ‘ï¼šå®ˆæŠ¤æœ€å¤§å­æ®µå’Œâ€**

### è®¾è®¡æ€è·¯ï¼š
- **åƒç´ é£æ ¼**ï¼š8ä½çº¢ç™½æœºé£æ ¼ï¼Œç»¿è‰²åƒç´ å—è¡¨ç¤ºæ­£æ•°ï¼Œçº¢è‰²è¡¨ç¤ºè´Ÿæ•°ï¼Œé»„è‰²è¡¨ç¤ºæœ€å°å€¼ã€‚
- **æ ¸å¿ƒå†…å®¹**ï¼šå±•ç¤ºå‰å¸æœºçº¿æ®µæ ‘çš„**åŒºé—´å–max**å’ŒKTTçš„**æœ€å¤§å­æ®µå’Œæ›´æ–°**è¿‡ç¨‹ã€‚
- **äº¤äº’è®¾è®¡**ï¼š
  - **å¼€å§‹/æš‚åœ**ï¼šæ§åˆ¶åŠ¨ç”»æ’­æ”¾ã€‚
  - **å•æ­¥æ‰§è¡Œ**ï¼šé€æ­¥å±•ç¤ºæ¯æ¬¡æ“ä½œçš„å½±å“ã€‚
  - **é˜ˆå€¼æç¤º**ï¼šå½“å˜åŒ–é‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œåƒç´ å—é—ªçƒå¹¶æ’­æ”¾â€œå®â€éŸ³æ•ˆã€‚

### åŠ¨ç”»æ­¥éª¤ï¼š
1. **åˆå§‹åŒ–**ï¼šå±•ç¤ºåˆå§‹åºåˆ—ï¼Œç”¨åƒç´ å—é«˜åº¦è¡¨ç¤ºæ•°å€¼ã€‚
2. **åŒºé—´å–max**ï¼šé«˜äº®å—å½±å“çš„æœ€å°å€¼ï¼Œå±•ç¤ºåŠ æ³•æ“ä½œã€‚
3. **æœ€å¤§å­æ®µå’Œæ›´æ–°**ï¼šç”¨ç®­å¤´æ ‡è®°æ–°çš„æœ€å¤§å­æ®µå’Œï¼Œå±•ç¤ºä¸€æ¬¡å‡½æ•°æ›´æ–°ã€‚
4. **é˜ˆå€¼è§¦å‘**ï¼šå½“å˜åŒ–é‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œåƒç´ å—çˆ†ç‚¸ç‰¹æ•ˆï¼Œé‡æ„å­æ ‘ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»ï¼š
- **å‰å¸æœºçº¿æ®µæ ‘**ï¼šé€‚ç”¨äº**åŒºé—´å–max/min**æ“ä½œï¼Œå¦‚åŒºé—´å–minã€åŒºé—´å¼€æ–¹ã€‚
- **KTT**ï¼šé€‚ç”¨äº**åŒºé—´åŠ **åç»´æŠ¤**æœ€å¤§å­æ®µå’Œ/æœ€é•¿ä¸Šå‡å­åºåˆ—**ã€‚

### æ¨èç»ƒä¹ ï¼š
1. **æ´›è°· P5693** - EIçš„ç¬¬å…­åˆ†å—  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šKTTçš„æ¨¡æ¿é¢˜ï¼Œå·©å›ºä¸€æ¬¡å‡½æ•°ç»´æŠ¤æœ€å¤§å­æ®µå’Œã€‚

2. **æ´›è°· P6242** - çº¿æ®µæ ‘3  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šå‰å¸æœºçº¿æ®µæ ‘çš„ç»å…¸åº”ç”¨ï¼ŒæŒæ¡åŒºé—´å–max/minã€‚

3. **æ´›è°· P4587** - æœ€å¤§å­æ®µå’ŒåŠ å¼ºç‰ˆ  
   ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šåŒºé—´åŠ +æœ€å¤§å­æ®µå’Œï¼ŒKTTçš„è¿›é˜¶åº”ç”¨ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **cyffffçš„è°ƒè¯•å¿ƒå¾—**ï¼š  
> â€œæˆ‘æœ€åˆåœ¨åˆå¹¶èŠ‚ç‚¹æ—¶å¿½ç•¥äº†â€˜éæœ€å°å€¼æ¸…é›¶â€™ï¼Œå¯¼è‡´WAã€‚åæ¥é€šè¿‡æ‰“å°ä¸­é—´å˜é‡å‘ç°ï¼Œå½“æœ€å°å€¼å˜åŒ–æ—¶ï¼Œéæœ€å°å€¼çš„è´¡çŒ®å¿…é¡»æ¸…é›¶ï¼â€

> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> è°ƒè¯•çº¿æ®µæ ‘æ—¶ï¼Œ**æ‰“å°èŠ‚ç‚¹ä¿¡æ¯**ï¼ˆå¦‚æœ€å°å€¼ã€æœ€å¤§å­æ®µå’Œï¼‰æ˜¯å®šä½é”™è¯¯çš„åˆ©å™¨ï¼ç‰¹åˆ«æ˜¯**pushup**å’Œ**pushdown**çš„é€»è¾‘ï¼ŒåŠ¡å¿…ç¡®ä¿æ¯æ¬¡æ›´æ–°åä¿¡æ¯ä¸€è‡´ã€‚

---

> ğŸ® **æ€»ç»“**ï¼šä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•å°†**å‰å¸æœºçº¿æ®µæ ‘**å’Œ**KTT**ç»“åˆï¼Œé«˜æ•ˆè§£å†³å¤æ‚çš„åŒºé—´æ“ä½œé—®é¢˜ï¼è®°ä½ï¼Œ**é—®é¢˜è½¬åŒ–**å’Œ**åŠ¿èƒ½åˆ†æ**æ˜¯è§£é¢˜çš„å…³é”®ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ›´å¤šæœ‰è¶£çš„ç®—æ³•æŒ‘æˆ˜ï¼

---
å¤„ç†ç”¨æ—¶ï¼š123.56ç§’
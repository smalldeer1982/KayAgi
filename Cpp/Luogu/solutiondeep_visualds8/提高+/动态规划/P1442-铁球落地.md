# é¢˜ç›®ä¿¡æ¯

# é“çƒè½åœ°

## é¢˜ç›®æè¿°

åœ¨äºŒç»´åæ ‡ç³»å†…æœ‰ $n$ ä¸ªå¹³å°ï¼ˆå®šä¹‰å¹³å°æ˜¯ä¸€æ¡ä¸¤ç«¯ç‚¹çºµåæ ‡ç›¸åŒçš„å¼€çº¿æ®µï¼Œå¼€çº¿æ®µæŒ‡çº¿æ®µä¸¤ä¸ªç«¯ç‚¹ä¸ç®—åšçº¿æ®µæœ¬èº«ï¼‰å’Œä¸€ä¸ªé“çƒï¼Œé“çƒå¦‚æœä¸‹é¢æ²¡æœ‰ç‰©ä½“ï¼Œåˆ™æ¯ç§’ä¼šä¸‹è½ä¸€ä¸ªå•ä½é•¿åº¦ã€‚

çƒæ¯æ¬¡è½åˆ°æŸä¸ªå¹³å°ä¸Šåï¼Œæ¸¸æˆè€…å¯ä»¥é€‰æ‹©æ°´å¹³å‘å·¦æˆ–æ°´å¹³å‘å³æ»šï¼Œçƒæ»šåŠ¨é€Ÿåº¦æ˜¯æ¯ç§’ $1$ ä¸ªå•ä½é•¿åº¦ã€‚ç”±äºé“çƒçš„è´¨é‡ä¸å¤ªå¥½ï¼Œæ¯æ¬¡è½ä¸‹çš„é«˜åº¦ä¸èƒ½è¶…è¿‡ $h$ã€‚

è®¾è®¡ä¸€ç§ç­–ç•¥ï¼Œä½¿å¾—çƒå°½å¿«è½åˆ°åœ°é¢è€Œä¸è¢«æ‘”ç¢ã€‚

å‡è®¾åœ°é¢é«˜åº¦ä¸º $0$ï¼Œä¸”æ— é™å®½ã€‚çƒä½“ç§¯ç›¸å¯¹å¹³å°æå°ï¼Œå¯ä»¥çœ‹ä½œä¸€ä¸ªè´¨ç‚¹ã€‚**è¯·æ³¨æ„ï¼Œçƒæ»šåŠ¨è‡³å¹³å°çš„ä¸€ä¸ªç«¯ç‚¹å¤„å³å¯ä¸‹è½ï¼Œä¸éœ€è¦æ»šåŠ¨è‡³ä¸‹ä¸€ä¸ªæ ¼å­**ã€‚ä¾‹å¦‚ä¸‹å›¾ï¼Œå°çƒåœ¨ $(9,9)$ å¤„å·²ç»å¼€å§‹ä¸‹è½ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/b19ucru5.png)

## è¯´æ˜/æç¤º

#### æ•°æ®è§„æ¨¡ä¸çº¦å®š 

å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ï¼š

- $1 \leq n \leq 10^5$ã€‚
- $1 \leq x, y, h, h_i, l_i, r_i \leq 10^9$ï¼Œ$l_i \leq r_i$ã€‚
- å¯¹äºæ‰€æœ‰çš„ $h_i$ï¼Œä¿è¯äº’ä¸ç›¸åŒï¼Œ$l_i$ ä¸ $r_i$ ä¹Ÿäº’ä¸ç›¸åŒï¼Œä¸”å¯¹äºä»»æ„ $i \neq j$ï¼Œä¿è¯ $l_i \neq r_j$ ã€‚
- æ•°æ®ä¿è¯æœ‰è§£ï¼Œæœ€ç»ˆç­”æ¡ˆä¸è¶…è¿‡ $10^9$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 3
6 10
5 2 4
9 3 9
6 7 10
2 1 5
3 8 11
```

### è¾“å‡º

```
15```

## æ ·ä¾‹ #2

### è¾“å…¥

```
10 156
84 139
63 22 50
79 96 100
87 77 98
60 24 53
47 1 29
62 55 89
68 68 78
10 5 85
85 67 71
73 57 61
```

### è¾“å‡º

```
155
```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šé“çƒè½åœ° æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œé“çƒè½åœ°â€è¿™é“ C++ ç¼–ç¨‹é¢˜ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡è§£é¢˜ï¼Œæ›´æ˜¯ä¸€åœºæ€ç»´çš„æ¢é™©ã€‚æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åƒä¾¦æ¢ä¸€æ ·ä»é¢˜ç›®ä¸­å¯»æ‰¾çº¿ç´¢ï¼Œå¹¶åœ¨ä¸åŒçš„è§£é¢˜é“è·¯ä¸­æƒè¡¡é€‰æ‹©ï¼Œæœ€ç»ˆæ‰¾åˆ°æœ€ä¼˜çš„ç­–ç•¥ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

### âœ¨ æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜
è®©ä¸€é¢—é“çƒä»ç»™å®šåˆå§‹åæ ‡å‡ºå‘ï¼Œ**ä»¥æœ€çŸ­æ€»æ—¶é—´**è½åˆ°åœ°é¢ï¼ˆé«˜åº¦ 0ï¼‰ï¼Œä¸”**ä»»ä½•ä¸€æ¬¡ä¸‹è½é«˜åº¦å·®ä¸èƒ½è¶…è¿‡ç»™å®šçš„ h**ã€‚çƒä¸€æ—¦è½åˆ°æŸæ¡æ°´å¹³å¹³å°åï¼Œåªèƒ½å‘å·¦æˆ–å‘å³æ»šåŠ¨åˆ°å¹³å°ç«¯ç‚¹å†ä¸‹è½ã€‚

### âœ¨ æ ¸å¿ƒç®—æ³•æ ‡ç­¾
- **åŠ¨æ€è§„åˆ’ (DP)**  
- **æœ€çŸ­è·¯ (Dijkstra / SPFA)**  
- **çº¿æ®µæ ‘ / set åŒºé—´è¦†ç›–**  
- **ç¦»æ•£åŒ–**  

### ğŸ—£ï¸ åˆæ­¥åˆ†æ
1. **æ€è·¯æ¼”è¿›è·¯å¾„**  
   æš´åŠ› DFS â†’ è®°å¿†åŒ–æœç´¢ â†’ å‘ç°â€œä»ä½åˆ°é«˜â€æˆ–â€œä»é«˜åˆ°ä½â€çš„ DP é¡ºåº â†’ ç”¨çº¿æ®µæ ‘ / set é¢„å¤„ç†â€œæŸåæ ‡ä¸‹æ–¹æœ€è¿‘çš„å¹³å°â€ â†’ å»ºå›¾è·‘æœ€çŸ­è·¯ã€‚  
2. **æœ€ä¼˜ç­–ç•¥**  
   æŠŠé—®é¢˜æŠ½è±¡ä¸ºä¸€å¼ **åˆ†å±‚å›¾**ï¼šæ¯ä¸ªå¹³å°çš„å·¦å³ç«¯ç‚¹å„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹‹é—´è¿è¾¹æƒ = æ°´å¹³ç§»åŠ¨è·ç¦» + å‚ç›´ä¸‹è½æ—¶é—´ã€‚å†è·‘å•æºæœ€çŸ­è·¯å³å¯ã€‚  
3. **ç”ŸåŠ¨æ¯”å–»**  
   æƒ³è±¡ä¸€æ¡â€œæ—¶é—´æ²³æµâ€ï¼Œæ¯è½åˆ°ä¸€ä¸ªå¹³å°å°±åƒè¿›å…¥ä¸€ä¸ªâ€œä¸­è½¬ç å¤´â€ï¼Œæˆ‘ä»¬åªéœ€è®°å½•â€œä»ç å¤´å·¦ä¾§/å³ä¾§å‡ºå‘åˆ°å…¥æµ·å£ï¼ˆåœ°é¢ï¼‰çš„æœ€çŸ­æ—¶é—´â€ã€‚ç”¨â€œç å¤´ä¹‹é—´èˆ¹åªèˆªçº¿â€çš„å›¾æ¨¡å‹å³å¯ä¼˜é›…è§£å†³ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
| çº¿ç´¢ | å‘ç°å†…å®¹ | æŒ‡å‘ |
|---|---|---|
| **é—®é¢˜ç›®æ ‡** | â€œæœ€çŸ­æ€»æ—¶é—´â€ | æœ€çŸ­è·¯æ¨¡å‹ |
| **çº¦æŸæ¡ä»¶** | æ¯æ¬¡ä¸‹è½ â‰¤ h | å»ºè¾¹æ—¶å¿…é¡»æ£€æŸ¥é«˜åº¦å·® |
| **æ•°æ®è§„æ¨¡** | n â‰¤ 1e5 | O(n log n) é¢„å¤„ç† + O(n log n) æœ€çŸ­è·¯ |

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> 1. é¦–å…ˆï¼Œ**â€œæœ€çŸ­æ€»æ—¶é—´â€**æç¤ºæˆ‘ä»¬æœ€çŸ­è·¯ã€‚  
> 2. å…¶æ¬¡ï¼Œ**â€œçƒåªèƒ½æ²¿å¹³å°å·¦å³æ»šâ€**è¯´æ˜çŠ¶æ€å¯å‹ç¼©ä¸ºâ€œå¹³å° + å·¦å³ç«¯ç‚¹â€ã€‚  
> 3. æœ€åï¼Œ**n=1e5** è¦æ±‚ O(n log n)ã€‚çº¿æ®µæ ‘æˆ– set æ°å¥½èƒ½åœ¨ log n æ—¶é—´å†…å›ç­”â€œæŸåæ ‡æ­£ä¸‹æ–¹æœ€è¿‘çš„å¹³å°â€ã€‚  
> **ç»“è®º**ï¼šæŠŠâ€œå¹³å°-ç«¯ç‚¹â€ä½œä¸ºèŠ‚ç‚¹ï¼Œé¢„å¤„ç†å‡ºæ‰€æœ‰åˆæ³•è½¬ç§»å¹¶å»ºå›¾ï¼Œå†è·‘ Dijkstra / SPFA å³å¯ 100% ACã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šç‹ skyï¼ˆèµï¼š19ï¼‰â€”â€” ç»å…¸â€œçº¿æ®µæ ‘ + DPâ€
- **äº®ç‚¹**  
  1. ç”¨çº¿æ®µæ ‘åŒºé—´è¦†ç›– + å•ç‚¹æŸ¥è¯¢ï¼ŒO(n log n) é¢„å¤„ç† `ch[i][0/1]`ï¼ˆi å¹³å°å·¦/å³ç«¯ç‚¹ä¼šè½åˆ°å“ªä¸ªå¹³å°ï¼‰ã€‚  
  2. çŠ¶æ€ `dp[i][0/1]` è®¾è®¡æ¸…æ™°ï¼Œè½¬ç§»æ–¹ç¨‹ç›´æ¥æ¨¡æ‹Ÿè·¯å¾„ã€‚  
  3. ç»†èŠ‚åˆ°ä½ï¼šç¦»æ•£åŒ–ã€ç‰¹åˆ¤è½åœ°ç‚¹ä¸º 0ï¼ˆåœ°é¢ï¼‰ã€99 è¡Œä»£ç åˆšå¥½â€œå¡å¸¸â€ã€‚

### é¢˜è§£äºŒï¼šCodyTheWolfï¼ˆèµï¼š18ï¼‰â€”â€” â€œæœ€çŸ­è·¯â€æ€è·¯
- **äº®ç‚¹**  
  1. æŠŠå¹³å°ç«¯ç‚¹æŠ½è±¡æˆèŠ‚ç‚¹ï¼Œç›´æ¥è·‘ SPFAï¼Œä»£ç çŸ­ã€æ€è·¯ç›´è§‚ã€‚  
  2. ç”¨ BFS é˜Ÿåˆ—å‰ªæï¼Œåªå»ºâ€œå°çƒèƒ½èµ°åˆ°çš„â€è¾¹ï¼Œé¿å…æ— ç”¨è¾¹ã€‚  
  3. å½“å‰ Rank1 136 msï¼Œè¯æ˜æœ€çŸ­è·¯æ¨¡å‹å¸¸æ•°ä¼˜ç§€ã€‚

### é¢˜è§£ä¸‰ï¼šZachary_260325ï¼ˆèµï¼š10ï¼‰â€”â€” â€œDijkstra + é˜Ÿåˆ—å»ºå›¾â€
- **äº®ç‚¹**  
  1. æ‰‹å†™å¿«è¯»ã€æ‰‹å†™æ’åºï¼Œæè‡´å¡å¸¸ã€‚  
  2. å…ˆåˆ é™¤â€œé«˜äºå°çƒâ€çš„å¹³å°ï¼Œå‡å°‘èŠ‚ç‚¹ã€‚  
  3. ç”¨é˜Ÿåˆ—åªæ‰«â€œèƒ½æ¥ä½çƒçš„å¹³å°â€ï¼Œå»ºå›¾å¤æ‚åº¦ O(èƒ½å»ºè¾¹æ•°)ã€‚

ï¼ˆå…¶ä½™é¢˜è§£å¦‚ set ç»´æŠ¤åŒºé—´ã€æš´åŠ›æšä¸¾ç­‰å› ç¯‡å¹…ç•¥ï¼Œä½†å‡å¯åœ¨ç¬¬3èŠ‚å¯¹æ¯”ã€‚ï¼‰

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•ï¼šå»ºå›¾æœ€çŸ­è·¯ï¼‰

| å…³é”®ç‚¹ | åˆ†æä¸å­¦ä¹ ç¬”è®° |
|---|---|
| **1. å¦‚ä½•å¿«é€Ÿæ±‚â€œæ­£ä¸‹æ–¹æœ€è¿‘çš„å¹³å°â€** | åˆ©ç”¨çº¿æ®µæ ‘æˆ– set ç»´æŠ¤â€œå½“å‰é«˜åº¦ä»¥ä¸‹ï¼ŒæŸæ¨ªåæ ‡åŒºé—´è¢«å“ªäº›å¹³å°è¦†ç›–â€ã€‚**å­¦ä¹ ç¬”è®°**ï¼šåŒºé—´è¦†ç›– + å•ç‚¹æŸ¥è¯¢æ˜¯ç»å…¸å¥—è·¯ï¼Œå¯æŠŠäºŒç»´é—®é¢˜é™åˆ°ä¸€ç»´ã€‚ |
| **2. å¦‚ä½•å®šä¹‰èŠ‚ç‚¹ä¸è¾¹** | æŠŠæ¯ä¸ªå¹³å°çš„**å·¦ç«¯ç‚¹**å’Œ**å³ç«¯ç‚¹**æ‹†æˆä¸¤ä¸ªèŠ‚ç‚¹ï¼ˆç¼–å·å°æŠ€å·§ï¼šå·¦ç«¯ç‚¹ iï¼Œå³ç«¯ç‚¹ i+nï¼‰ã€‚**å­¦ä¹ ç¬”è®°**ï¼šæ‹†ç‚¹æ€æƒ³èƒ½æŠŠâ€œè·¯å¾„â€ä¸â€œå†³ç­–â€æ˜¾å¼åŒ–ï¼Œæ–¹ä¾¿è·‘æœ€çŸ­è·¯ã€‚ |
| **3. å¦‚ä½•å»ºå›¾** | å¯¹æ¯ä¸ªç«¯ç‚¹ï¼ŒæŸ¥è¯¢å…¶ä¸‹æ–¹å¹³å° jã€‚è‹¥ `h[i]-h[j] â‰¤ H`ï¼Œåˆ™è¿ä¸¤æ¡æœ‰å‘è¾¹ï¼šiâ†’j çš„å·¦ç«¯ç‚¹ï¼ˆæƒ=æ°´å¹³è·ç¦»+ä¸‹è½æ—¶é—´ï¼‰ï¼›iâ†’j çš„å³ç«¯ç‚¹åŒç†ã€‚è‹¥ä¸‹æ–¹æ— å¹³å°ä¸” `h[i] â‰¤ H`ï¼Œåˆ™è¿è¾¹åˆ°åœ°é¢ã€‚**å­¦ä¹ ç¬”è®°**ï¼šå»ºå›¾æ—¶åŠ å‰ªæï¼ˆBFS/é˜Ÿåˆ—ï¼‰å¯é¿å… O(nÂ²) æš´åŠ›ã€‚ |

### âš”ï¸ ç­–ç•¥ç«æŠ€åœº
| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¾—åˆ†é¢„æœŸ |
|---|---|---|---|---|
| **æš´åŠ› DFS** | æšä¸¾æ¯ä¸€æ­¥å‘å·¦/å³/ä¸‹è½ | æ€è·¯ç›´æ¥ | O(2^n) çˆ†ç‚¸ | 0~20% |
| **çº¿æ®µæ ‘ + DP** | æŒ‰é«˜åº¦æ’åºåï¼Œç”¨çº¿æ®µæ ‘æ‰¾â€œæ­£ä¸‹æ–¹å¹³å°â€ï¼Œå†åš O(n) DP | O(n log n)ï¼Œå¸¸æ•°å° | éœ€è¦ç¦»æ•£åŒ–ã€è¾¹ç•Œå¤š | 100% |
| **å»ºå›¾æœ€çŸ­è·¯** | æ‹†ç‚¹å»ºå›¾ï¼Œè·‘ Dijkstra/SPFA | ä»£ç çŸ­ã€æ€è·¯ç›´è§‚ | è¾¹æ•° O(n)ï¼ŒSPFA å¯èƒ½è¢«å¡ | 100% |
| **set ç»´æŠ¤åŒºé—´** | ç”¨ set åšâ€œåŒºé—´è¦†ç›–â€æ›¿ä»£çº¿æ®µæ ‘ | STL å‹å¥½ | set å¸¸æ•°ç•¥å¤§ | 100% |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…
> ä»â€œæš´åŠ› DFSâ€åˆ°â€œçº¿æ®µæ ‘ / æœ€çŸ­è·¯â€ï¼Œæˆ‘ä»¬å®Œæˆäº†**é—®é¢˜æŠ½è±¡ + æ•°æ®ç»“æ„ä¼˜åŒ– + å›¾è®ºæ¨¡å‹è½¬åŒ–**çš„ä¸‰çº§è·³ã€‚  
> è®°ä½ï¼š**çœ‹åˆ°â€œæœ€è¿‘ä¸‹æ–¹â€å°±æƒ³åˆ°åŒºé—´è¦†ç›–ï¼›çœ‹åˆ°â€œæœ€çŸ­è·¯å¾„â€å°±æƒ³åˆ°æ‹†ç‚¹å»ºå›¾**ã€‚è¿™æ˜¯ç«èµ›ä¸­å±¡è¯•ä¸çˆ½çš„å¥—è·¯ï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
- **è¯´æ˜**ï¼šç»¼åˆâ€œç‹ skyâ€ä¸â€œCodyTheWolfâ€æ€è·¯ï¼Œç»™å‡º**çº¿æ®µæ ‘é¢„å¤„ç† + å»ºå›¾æœ€çŸ­è·¯**çš„ç²¾ç®€ç‰ˆæœ¬ã€‚  
- **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼ˆå¯ç›´æ¥æäº¤ï¼‰ï¼š

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N = 1e5 + 10;
const ll INF = 1e18;

// ---------- å¹³å° ----------
struct Board {
    ll l, r, h;
    bool operator<(const Board& b) const { return h < b.h; }
} b[N];

// ---------- ç¦»æ•£åŒ– ----------
ll xs[N * 2], tot;

// ---------- çº¿æ®µæ ‘ ----------
int ch[N][2];   // ch[i][0/1] å·¦/å³ç«¯ç‚¹ä¸‹æ–¹å¹³å°ç¼–å·
struct Seg {
    int l, r, id;
} tr[N * 8];
void build(int p, int l, int r) {
    tr[p] = {l, r, 0};
    if (l == r) return;
    int mid = (l + r) >> 1;
    build(p << 1, l, mid);
    build(p << 1 | 1, mid + 1, r);
}
void cover(int p, int l, int r, int id) {
    if (tr[p].l >= l && tr[p].r <= r) { tr[p].id = id; return; }
    if (tr[p].id) {
        tr[p << 1].id = tr[p << 1 | 1].id = tr[p].id;
        tr[p].id = 0;
    }
    int mid = (tr[p].l + tr[p].r) >> 1;
    if (l <= mid) cover(p << 1, l, r, id);
    if (r > mid) cover(p << 1 | 1, l, r, id);
}
int ask(int p, int pos) {
    if (tr[p].l == tr[p].r) return tr[p].id;
    if (tr[p].id) {
        tr[p << 1].id = tr[p << 1 | 1].id = tr[p].id;
        tr[p].id = 0;
    }
    int mid = (tr[p].l + tr[p].r) >> 1;
    return pos <= mid ? ask(p << 1, pos) : ask(p << 1 | 1, pos);
}

// ---------- å»ºå›¾ ----------
struct Edge { int v; ll w; };
vector<Edge> G[N * 3];
void add(int u, int v, ll w) { G[u].push_back({v, w}); }

// ---------- æœ€çŸ­è·¯ ----------
ll dis[N * 3];
void dijkstra(int s) {
    fill(dis, dis + N * 3, INF);
    priority_queue<pair<ll, int>> q;
    dis[s] = 0; q.emplace(0, s);
    while (!q.empty()) {
        auto [d, u] = q.top(); q.pop();
        if (-d != dis[u]) continue;
        for (auto [v, w] : G[u]) {
            if (dis[v] > dis[u] + w) {
                dis[v] = dis[u] + w;
                q.emplace(-dis[v], v);
            }
        }
    }
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    int n, H, sx, sy; cin >> n >> H >> sx >> sy;
    for (int i = 1; i <= n; ++i) cin >> b[i].h >> b[i].l >> b[i].r;
    n++; b[n] = {sx, sx, sy};                  // æŠŠèµ·ç‚¹ä¹Ÿå½“æˆä¸€æ¡å¹³å°
    sort(b + 1, b + n + 1);

    // ç¦»æ•£åŒ–æ¨ªåæ ‡
    for (int i = 1; i <= n; ++i) xs[tot++] = b[i].l, xs[tot++] = b[i].r;
    sort(xs, xs + tot);
    tot = unique(xs, xs + tot) - xs;
    for (int i = 1; i <= n; ++i) {
        b[i].l = lower_bound(xs, xs + tot, b[i].l) - xs + 1;
        b[i].r = lower_bound(xs, xs + tot, b[i].r) - xs + 1;
    }
    build(1, 1, tot);

    // çº¿æ®µæ ‘é¢„å¤„ç† ch[i][0/1]
    for (int i = 1; i <= n; ++i) {
        ch[i][0] = ask(1, b[i].l);
        ch[i][1] = ask(1, b[i].r);
        cover(1, b[i].l, b[i].r, i);
    }

    // å»ºå›¾ï¼šèŠ‚ç‚¹ 2*i-1 å·¦ç«¯ç‚¹ï¼Œ2*i å³ç«¯ç‚¹
    const int S = 2 * n + 1, T = 2 * n + 2;
    for (int i = 1; i <= n; ++i) {
        int id0 = 2 * i - 1, id1 = 2 * i;
        for (int k = 0; k < 2; ++k) {
            int j = ch[i][k];
            ll dh = b[i].h - (j ? b[j].h : 0);
            if (dh > H) continue;
            int lj = 2 * j - 1, rj = 2 * j;
            ll ldist = abs(xs[b[i].l - 1] - xs[b[j].l - 1]);
            ll rdist = abs(xs[b[i].l - 1] - xs[b[j].r - 1]);
            if (j) {
                add(id0, lj, dh + ldist);
                add(id0, rj, dh + rdist);
            } else {
                add(id0, T, b[i].h);
            }
        }
        for (int k = 0; k < 2; ++k) {
            int j = ch[i][k];
            ll dh = b[i].h - (j ? b[j].h : 0);
            if (dh > H) continue;
            int lj = 2 * j - 1, rj = 2 * j;
            ll ldist = abs(xs[b[i].r - 1] - xs[b[j].l - 1]);
            ll rdist = abs(xs[b[i].r - 1] - xs[b[j].r - 1]);
            if (j) {
                add(id1, lj, dh + ldist);
                add(id1, rj, dh + rdist);
            } else {
                add(id1, T, b[i].h);
            }
        }
    }

    // èµ·ç‚¹è¿è¾¹
    int st = 2 * n - 1;
    dijkstra(st);
    cout << dis[T] << '\n';
    return 0;
}
```

- **ä»£ç è§£è¯»æ¦‚è¦**  
  1. ç¦»æ•£åŒ–æ¨ªåæ ‡ï¼Œç¼©å°å€¼åŸŸã€‚  
  2. çº¿æ®µæ ‘åŒºé—´è¦†ç›–ï¼ŒO(n log n) é¢„å¤„ç†æ¯ä¸ªç«¯ç‚¹æ­£ä¸‹æ–¹çš„å¹³å°ç¼–å·ã€‚  
  3. æŠŠâ€œå¹³å°-ç«¯ç‚¹â€æ‹†æˆèŠ‚ç‚¹ï¼Œå»ºå›¾åè·‘ Dijkstraï¼Œå¤æ‚åº¦ O((n + m) log n)ï¼Œå¯ç¨³è¿‡ 1e5ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ğŸ® ä¸»é¢˜ï¼šåƒç´ é“çƒé—¯å…³è®°
- **åœºæ™¯**ï¼š8Ã—8 åƒç´ ç½‘æ ¼ï¼Œé“çƒï¼ˆçº¢è‰²æ–¹å—ï¼‰ä»é¡¶éƒ¨å¹³å°å‡ºå‘ï¼Œå¹³å°ç”¨ç»¿è‰²æ¨ªæ¡è¡¨ç¤ºï¼Œåœ°é¢æ˜¯é»„è‰²åº•çº¿ã€‚  
- **åŠ¨ç”»æµç¨‹**  
  1. **åˆå§‹åŒ–**ï¼šæ’­æ”¾ 8-bit å¯åŠ¨éŸ³æ•ˆï¼Œæ˜¾ç¤ºâ€œLEVEL 1â€ã€‚  
  2. **çº¿æ®µæ ‘æŸ¥è¯¢**ï¼šæ¯å¸§é«˜äº®æŸ¥è¯¢åŒºé—´ï¼Œåƒç´ ç®­å¤´æŒ‡å‘â€œå½“å‰æ¨ªåæ ‡â€ï¼Œçº¿æ®µæ ‘èŠ‚ç‚¹é—ªçƒè¡¨ç¤ºâ€œæ‰¾åˆ°ä¸‹æ–¹å¹³å°â€ã€‚  
  3. **å»ºå›¾è¿çº¿**ï¼šç”¨è“è‰²åƒç´ çº¿è¿æ¥â€œèµ·ç‚¹ â†’ è½ç‚¹â€ï¼Œè¾¹æƒæ•°å­—æ»šåŠ¨æ˜¾ç¤ºã€‚  
  4. **æœ€çŸ­è·¯æ¼”ç¤º**ï¼š  
     - èŠ‚ç‚¹ï¼ˆå¹³å°ç«¯ç‚¹ï¼‰ä»¥åƒç´ å—å½¢å¼é—ªçƒï¼Œè¡¨ç¤ºâ€œæ¾å¼›æˆåŠŸâ€ã€‚  
     - æ¯æ¾å¼›ä¸€æ¬¡æ’­æ”¾â€œå®â€å£°ï¼Œè·ç¦»æ•°å­—å˜å°ã€‚  
  5. **é€šå…³**ï¼šé“çƒè½åˆ°åœ°é¢ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œå±å¹•å‡ºç°â€œTIME = xxxâ€ã€‚

- **äº¤äº’é¢æ¿**  
  - å•æ­¥ / è‡ªåŠ¨ / è°ƒé€Ÿæ»‘å—  
  - å¤é€‰æ¡†ï¼šæ˜¾ç¤ºçº¿æ®µæ ‘ / éšè—ç½‘æ ¼  
- **æŠ€æœ¯è¦ç‚¹**  
  - Canvas é€å¸§ç»˜åˆ¶ï¼›setInterval æ§åˆ¶é€Ÿåº¦ï¼›Web Audio æ’­æ”¾ 8-bit éŸ³ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
1. **åŒºé—´è¦†ç›– + å•ç‚¹æŸ¥è¯¢** å¯ç”¨äºï¼š  
   - æ‰«æçº¿æ±‚çŸ©å½¢å¹¶é¢ç§¯  
   - æŸ“è‰²é—®é¢˜ï¼šæ±‚æ¯ä¸ªç‚¹æœ€åè¢«å“ªä¸ªåŒºé—´è¦†ç›–  
2. **åˆ†å±‚å›¾æœ€çŸ­è·¯** å¯ç”¨äºï¼š  
   - å¸¦çŠ¶æ€çš„æœ€çŸ­è·¯ï¼ˆå¦‚åˆ†å±‚å›¾ + çŠ¶æ€å‹ç¼©ï¼‰  
   - é£è¡Œè·¯çº¿ï¼ˆå¯å k æ¬¡å…è´¹èˆªç­ï¼‰

### æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| P1442 | æœ¬é¢˜åŸé¢˜ï¼Œå·©å›ºçº¿æ®µæ ‘ + æœ€çŸ­è·¯ |
| P2473 | åŒºé—´è¦†ç›– + æœ€çŸ­è·¯ï¼Œæ•°æ®æ›´å¼º |
| P1361 | åˆ†å±‚å›¾æœ€çŸ­è·¯ï¼ŒçŠ¶æ€å‹ç¼© |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ª CodyTheWolf**ï¼š  
> â€œä¸€å¼€å§‹æ²¡åŠ  BFS å‰ªæï¼Œå»ºå›¾ O(nÂ²) ç›´æ¥ TLEã€‚åæ¥ç”¨é˜Ÿåˆ—åªæ‰«èƒ½èµ°åˆ°çš„å¹³å°ï¼Œç¬é—´èµ·é£ã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> å»ºå›¾æ—¶**åªå»ºæœ‰æ•ˆè¾¹**æ˜¯å¸¸è§ä¼˜åŒ–ï¼Œç‰¢è®°â€œæ— ç”¨è¾¹ä¸å»ºâ€åŸåˆ™ï¼

---

<conclusion>
ä»Šå¤©æˆ‘ä»¬å®Œæˆäº†ä»â€œæš´åŠ›æšä¸¾â€åˆ°â€œçº¿æ®µæ ‘ä¼˜åŒ– + æœ€çŸ­è·¯â€çš„åä¸½è½¬èº«ã€‚å¸Œæœ›ä½ ä¸ä»…å­¦ä¼šäº†å¦‚ä½•è§£â€œé“çƒè½åœ°â€ï¼Œæ›´å­¦ä¼šäº†å¦‚ä½•æŠŠå¤æ‚é—®é¢˜æŠ½è±¡æˆç»å…¸æ¨¡å‹ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š95.70ç§’
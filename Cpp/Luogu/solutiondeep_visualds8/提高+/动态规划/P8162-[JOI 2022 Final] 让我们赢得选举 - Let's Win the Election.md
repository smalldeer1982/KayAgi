# é¢˜ç›®ä¿¡æ¯

# [JOI 2022 Final] è®©æˆ‘ä»¬èµ¢å¾—é€‰ä¸¾ / Let's Win the Election

## é¢˜ç›®æè¿°

JOI å…±å’Œå›½æœ‰ $N$ ä¸ªå·ï¼Œç¼–å·ä¸º $1 \sim N$ã€‚åœ¨ 2022 å¹´ï¼ŒJOI å…±å’Œå›½å°†ä¸¾è¡Œæ€»ç»Ÿå¤§é€‰ã€‚é€‰ä¸¾å°†åœ¨æ¯ä¸ªå·åˆ†åˆ«ä¸¾è¡Œã€‚æ¯ä¸ªå·çš„è·èƒœè€…å°†èµ¢å¾—è¯¥å·çš„ä¸€å¼ é€‰ç¥¨ã€‚

Rie å°†ç«é€‰æ€»ç»Ÿï¼Œå¥¹æ­£è®¡åˆ’èµ¢å¾—é€‰ä¸¾ã€‚å¥¹å†³å®šä»¥å‘è¡¨æ¼”è®²çš„æ–¹å¼æ¥æé«˜è‡ªå·±çš„å¯é ç¨‹åº¦ã€‚åœ¨å¥¹å‘è¡¨æ¼”è®²åï¼Œä¸‹åˆ—äº‹ä»¶å¯èƒ½ä¼šå‘ç”Ÿã€‚

- å¦‚æœåœ¨ç¬¬ $i$ ä¸ªå·çš„æ€»æ¼”è®²æ—¶é—´è¾¾åˆ°äº† $A_i$ å°æ—¶ï¼Œå¥¹å°†èµ¢å¾—è¯¥å·çš„ä¸€å¼ é€‰ç¥¨ã€‚
- å¦‚æœåœ¨ç¬¬ $i$ ä¸ªå·çš„æ€»æ¼”è®²æ—¶é—´è¾¾åˆ°äº† $B_i$ å°æ—¶ï¼Œå¥¹å°†è·å¾—ä¸€åæ¥è‡ªè¯¥å·çš„åä½œè€…ã€‚
- æœ‰å¯èƒ½ Rie åœ¨ç¬¬ $i$ ä¸ªå·æ— æ³•è·å¾—åä½œè€…ã€‚æ­¤ç§æƒ…å†µä¸‹ï¼Œ$B_i = -1$ï¼Œå¦åˆ™ä¿è¯ $B_i > A_i$ã€‚

æ¥è‡ªç¬¬ $i$ ä¸ªå·çš„åä½œè€…å¯ä»¥åœ¨ç¬¬ $i$ ä¸ªå·å¤–å‘è¡¨æ¼”è®²ã€‚å¤šä¸ªäººå¯ä»¥åŒæ—¶åœ¨åŒä¸€ä¸ªå·å‘è¡¨æ¼”è®²ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸¤ä¸ªäººåœ¨æŸä¸ªå·åŒæ—¶å‘è¡¨äº† $x$ å°æ—¶çš„æ¼”è®²ï¼Œåˆ™è¯¥å·çš„æ€»æ¼”è®²æ—¶é—´å°†å¢åŠ  $2 x$ å°æ—¶ã€‚æ¼”è®²çš„æ—¶é—´ä¸å¿…æ˜¯æ•´æ•°ä¸ªå°æ—¶ã€‚æˆ‘ä»¬å¯ä»¥å¿½ç•¥åœ¨ä¸¤å·ä¹‹é—´çš„äº¤é€šè€—æ—¶ã€‚

å¤§é€‰æ—¥å¿«åˆ°äº†ï¼ŒRie æƒ³è¦å°½å¿«å¾—åˆ° $K$ å¼ é€‰ç¥¨ã€‚

ç»™å®šå·çš„æ•°é‡å’Œæ¯ä¸ªå·çš„ä¿¡æ¯ï¼Œå†™ä¸€ä¸ªç¨‹åºè®¡ç®—å¾—åˆ° $K$ å¼ é€‰ç¥¨çš„æœ€å°è€—æ—¶ï¼ˆä»¥å°æ—¶ä¸ºå•ä½ï¼‰ã€‚

## è¯´æ˜/æç¤º

**ã€æ ·ä¾‹è§£é‡Š \#1ã€‘**

æŒ‰ç…§å¦‚ä¸‹æ–¹æ¡ˆè¿›è¡Œæ¼”è®²ï¼ŒRie å°†åœ¨ $5.5$ å°æ—¶å†…èµ¢å¾—æ¯ä¸ªå·çš„é€‰ç¥¨ã€‚

- åœ¨ç¬¬ $2$ ä¸ªå·æ¼”è®² $2$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚
- åœ¨ç¬¬ $2$ ä¸ªå·å†æ¼”è®² $1$ ä¸ªå°æ—¶ï¼Œè·å¾—ä¸€ä¸ªåä½œè€…ã€‚
- åœ¨ç¬¬ $3$ ä¸ªå·ä¸åä½œè€…ä¸€èµ·æ¼”è®² $2$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚
- åœ¨ç¬¬ $1$ ä¸ªå·ä¸åä½œè€…ä¸€èµ·æ¼”è®² $0.5$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚

è¿™ä¸ªæ ·ä¾‹æ»¡è¶³å­ä»»åŠ¡ $3, 4, 5, 6, 7$ çš„æ€§è´¨ã€‚

**ã€æ ·ä¾‹è§£é‡Š \#2ã€‘**

æŒ‰ç…§å¦‚ä¸‹æ–¹æ¡ˆè¿›è¡Œæ¼”è®²ï¼ŒRie å°†åœ¨ $32$ å°æ—¶å†…èµ¢å¾— $4$ å¼ é€‰ç¥¨ã€‚

- åœ¨ç¬¬ $1$ ä¸ªå·æ¼”è®² $4$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚
- åœ¨ç¬¬ $2$ ä¸ªå·æ¼”è®² $11$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚
- åœ¨ç¬¬ $3$ ä¸ªå·æ¼”è®² $6$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚
- åœ¨ç¬¬ $6$ ä¸ªå·æ¼”è®² $11$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚

è¿™ä¸ªæ ·ä¾‹æ»¡è¶³å­ä»»åŠ¡ $1, 2, 3, 4, 5, 7$ çš„é™åˆ¶ã€‚

**ã€æ ·ä¾‹è§£é‡Š \#3ã€‘**

æŒ‰ç…§å¦‚ä¸‹æ–¹æ¡ˆè¿›è¡Œæ¼”è®²ï¼ŒRie å°†åœ¨ $11.5$ å°æ—¶å†…èµ¢å¾— $3$ å¼ é€‰ç¥¨ã€‚

- åœ¨ç¬¬ $4$ ä¸ªå·æ¼”è®² $7$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ï¼Œå¹¶è·å¾—ä¸€ä¸ªåä½œè€…ã€‚
- åœ¨ç¬¬ $1$ ä¸ªå·æ¼”è®² $4$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚ä¸æ­¤åŒæ—¶ï¼Œåä½œè€…åœ¨ç¬¬ $2$ ä¸ªå·æ¼”è®² $4$ ä¸ªå°æ—¶ã€‚
- åœ¨ç¬¬ $2$ ä¸ªå·ä¸åä½œè€…ä¸€èµ·æ¼”è®² $0.5$ ä¸ªå°æ—¶ï¼Œèµ¢å¾—ä¸€å¼ é€‰ç¥¨ã€‚

è¿™ä¸ªæ ·ä¾‹æ»¡è¶³å­ä»»åŠ¡ $2, 3, 4, 5, 7$ çš„é™åˆ¶ã€‚

**ã€æ ·ä¾‹è§£é‡Š \#4ã€‘**

è¿™ä¸ªæ ·ä¾‹æ»¡è¶³å­ä»»åŠ¡ $3, 4, 5, 7$ çš„é™åˆ¶ã€‚

**ã€æ ·ä¾‹è§£é‡Š \#5ã€‘**

è¿™ä¸ªæ ·ä¾‹æ»¡è¶³å­ä»»åŠ¡ $4, 5, 7$ çš„é™åˆ¶ã€‚

----

**ã€æ•°æ®èŒƒå›´ã€‘**

**æœ¬é¢˜é‡‡ç”¨æ†ç»‘æµ‹è¯•ã€‚**

å¯¹äº $100 \%$ çš„æ•°æ®ï¼Œ$1 \le K \le N \le 500$ï¼Œ$1 \le A_i \le 1000$ï¼Œ$A_i \le B_i \le 1000$ æˆ– $B_i = -1$ã€‚

- å­ä»»åŠ¡ $1$ï¼ˆ$5$ åˆ†ï¼‰ï¼š$B_i = -1$ã€‚
- å­ä»»åŠ¡ $2$ï¼ˆ$5$ åˆ†ï¼‰ï¼š$B_i = -1$ æˆ– $B_i = A_i$ã€‚
- å­ä»»åŠ¡ $3$ï¼ˆ$11$ åˆ†ï¼‰ï¼š$N \le 7$ã€‚
- å­ä»»åŠ¡ $4$ï¼ˆ$12$ åˆ†ï¼‰ï¼š$N \le 20$ã€‚
- å­ä»»åŠ¡ $5$ï¼ˆ$33$ åˆ†ï¼‰ï¼š$N \le 100$ã€‚
- å­ä»»åŠ¡ $6$ï¼ˆ$11$ åˆ†ï¼‰ï¼š$K = N$ã€‚
- å­ä»»åŠ¡ $7$ï¼ˆ$23$ åˆ†ï¼‰ï¼šæ— ç‰¹æ®Šé™åˆ¶ã€‚

----

**è¯‘è‡ª [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T3ã€Œ[é¸æŒ™ã§å‹ã¨ã†](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3.pdf) / [Let's Win the Election](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t3-en.pdf)ã€**

## æ ·ä¾‹ #1

### è¾“å…¥

```
3
3
1 5
2 3
4 5
```

### è¾“å‡º

```
5.500000000000000
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
7
4
4 -1
11 -1
6 -1
12 -1
36 -1
11 -1
20 -1
```

### è¾“å‡º

```
32.000000000000000
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
5
3
4 -1
5 -1
6 -1
7 7
8 8
```

### è¾“å‡º

```
11.500000000000000
```

## æ ·ä¾‹ #4

### è¾“å…¥

```
7
5
28 36
11 57
20 35
19 27
31 33
25 56
38 51
```

### è¾“å‡º

```
62.166666666666664
```

## æ ·ä¾‹ #5

### è¾“å…¥

```
20
14
106 277
175 217
170 227
164 245
118 254
139 261
142 270
185 200
162 241
153 239
128 264
103 299
147 248
158 236
160 232
183 205
194 197
135 260
153 234
128 260
```

### è¾“å‡º

```
644.203571428571422
```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šè®©æˆ‘ä»¬èµ¢å¾—é€‰ä¸¾ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> å„ä½å°æ¢é™©å®¶ä»¬ï¼Œä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·æ”»å…‹ JOI 2022 Final çš„å‹è½´é¢˜â€”â€”â€œè®©æˆ‘ä»¬èµ¢å¾—é€‰ä¸¾â€ã€‚è¿™é“é¢˜è¡¨é¢ä¸Šæ˜¯â€œæ¼”è®²+æ‹‰ç¥¨â€ï¼ŒèƒŒåå´éšè—ç€ç²¾å¦™çš„**â€œåˆ†ç»„å†³ç­–+åŠ¨æ€è§„åˆ’â€**æ€ç»´ã€‚æˆ‘ä»¬å°†ä¸€èµ·ä»â€œç›´è§‰è´ªå¿ƒâ€çš„å¤±è´¥å‡ºå‘ï¼Œä¸€æ­¥æ­¥èµ°å‘ä¸¥è°¨çš„ O(NÂ³) å†åˆ°æ›´æ¼‚äº®çš„ O(NÂ²) è§£æ³•ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

**âœ¨ æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
åœ¨ N ä¸ªå·é‡Œé€‰æ°å¥½ K ä¸ªå·æ‹¿åˆ°é€‰ç¥¨ï¼Œä¸”å¯ä»¥åœ¨éƒ¨åˆ†å·é¢å¤–èŠ±è´¹æ—¶é—´æ‹›å‹Ÿâ€œåä½œè€…â€ã€‚åä½œè€…å¯ä»¥**å¹¶è¡Œ**å¸®ä½ æ¼”è®²ã€‚å¦‚ä½•å®‰æ’æ¼”è®²é¡ºåºä¸å·çš„é€‰æ‹©ï¼Œä½¿å¾—**æ€»è€—æ—¶æœ€çŸ­**ï¼Ÿ

**âœ¨ æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š  
è´ªå¿ƒæ€æƒ³éªŒè¯ â†’ åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰â†’ æ’åº + å‰ç¼€å’Œä¼˜åŒ– â†’ O(NÂ³) / O(NÂ²) å®ç°

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

| çº¿ç´¢ | ä¾¦æ¢ç¬”è®° |
|---|---|
| **çº¿ç´¢1ï¼šé—®é¢˜ç›®æ ‡** | â€œæœ€çŸ­æ€»æ—¶é—´â€æš—ç¤º**æœ€ä¼˜åŒ–é—®é¢˜**ï¼Œä¸”æ—¶é—´å¯æµ®ç‚¹ â†’ æ’é™¤çº¯æ•´æ•° DPï¼Œéœ€è€ƒè™‘**æ¯”ä¾‹/æ’åº**ã€‚ |
| **çº¿ç´¢2ï¼šå†³ç­–ç»´åº¦** | æ¯ä¸ªå·æœ‰ 3 ç§çŠ¶æ€ï¼šä¸é€‰ / åªæ‹¿é€‰ç¥¨(A) / æ‹¿é€‰ç¥¨+åä½œè€…(B)ã€‚ |
| **çº¿ç´¢3ï¼šå¹¶è¡Œæ•ˆç‡** | åä½œè€…è¶Šå¤šï¼Œåç»­å•ä½æ—¶é—´äº§å‡ºè¶Šé«˜ â†’ å­˜åœ¨**åæ•ˆæ€§**ï¼Œéœ€è¦**é¡ºåºå†³ç­–**ã€‚ |
| **çº¿ç´¢4ï¼šæ•°æ®è§„æ¨¡** | N â‰¤ 500 â†’ O(NÂ³) â‰ˆ 1.25Ã—10â¸ å¯æ¥å—ï¼ŒO(Nâ´) ä¼šè¶…æ—¶ã€‚ |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

1. **ç›´è§‰è´ªå¿ƒ**ï¼šâ€œå…ˆæ‹¿åä½œè€…ï¼Œå†é›†ä¸­åˆ·ç¥¨â€ â†’ æ ·ä¾‹1å³è¢«æ¨ç¿»ï¼ˆè´ªå¿ƒæŠŠ B å½“ A æ›´ä¼˜ï¼‰ã€‚  
2. **ä¿®æ­£è´ªå¿ƒ**ï¼šæŠŠé—®é¢˜æ‹†æˆ**â€œå…ˆé€‰ b ä¸ª B å· + å†é€‰ K-b ä¸ª A å·â€**ï¼Œä½†éœ€è¦ä¿è¯é¡ºåºæœ€ä¼˜ã€‚  
3. **å…³é”®æ´å¯Ÿ**ï¼šæŒ‰ B å‡åºæ’åºåï¼Œæœ€ä¼˜æ–¹æ¡ˆä¸€å®šå½¢å¦‚  
   ```
   [B...B][A...A][C...C]
   ```  
   å³æ‰€æœ‰ B å·è¿ç»­åœ¨å‰ï¼Œæ‰€æœ‰ A å·è¿ç»­åœ¨åï¼Œä¸­é—´æ— ç©ºéš™ã€‚  
4. **DP å»ºæ¨¡**ï¼š  
   - çŠ¶æ€ï¼š`dp[i][j]` è¡¨ç¤ºå‰ i ä¸ªå·é‡Œé€‰äº† j ä¸ª B å·çš„æœ€å°æ—¶é—´ã€‚  
   - è½¬ç§»ï¼š  
     - ä¸é€‰ï¼š`dp[i-1][j] + A[i]/(b+1)`  
     - é€‰ Bï¼š`dp[i-1][j-1] + B[i]/j`  
5. **å¤æ‚åº¦**ï¼šå¤–å±‚æšä¸¾ bï¼ˆ0..Kï¼‰ï¼Œå†…å±‚ O(NÂ²) DP â†’ æ€» O(NÂ³)ï¼Œå¯è¿‡ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

| é¢˜è§£ | äº®ç‚¹æç‚¼ |
|---|---|
| **å°ç¦ç”¨æˆ·** | æœ€æ—©ç»™å‡º**â€œæšä¸¾ b + DPâ€**æ¡†æ¶ï¼Œä»£ç ç®€æ´ï¼Œç”¨ `sum[i][j]` é¢„å¤„ç†åç¼€å’Œã€‚ |
| **RyexAwl** | ç”¨**â€œå‰ç¼€/åç¼€â€**æ€æƒ³è¯æ˜æ— ç©ºæ´ç»“æ„ï¼Œé…å›¾ç›´è§‚ï¼Œä»£ç æ¸…æ™°ã€‚ |
| **lg_zhou** | ç”¨**â€œæ”¯æŒå·/åˆä½œå·/åå¯¹å·â€**ä¸‰æ®µè®ºï¼Œé€»è¾‘ä¸¥è°¨ï¼Œæ³¨é‡Šä¸°å¯Œã€‚ |
| **duyi** | åšå®¢å¼è®²è§£ï¼Œä» O(Nâ´) ä¸€æ­¥æ­¥ä¼˜åŒ–åˆ° O(NÂ³) å†åˆ° O(NÂ²)ï¼Œæ€ç»´æ¼”è¿›å®Œæ•´ã€‚ |

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£ O(NÂ³)ï¼‰

| å…³é”®ç‚¹ | åˆ†æ | ğŸ’¡ å­¦ä¹ ç¬”è®° |
|---|---|---|
| **1. çŠ¶æ€è®¾è®¡** | `dp[i][j]` ä»…è®°å½•**B å·ä¸ªæ•°**ï¼Œä¸è®°å½• A å·ä¸ªæ•°ï¼Œåˆ©ç”¨â€œæ’åºå A å·ä¸€å®šåœ¨åç¼€â€æ€§è´¨ç æ‰ä¸€ç»´ã€‚ | é™ç»´æ‰“å‡»ï¼šç”¨æ’åº+å‰ç¼€å’Œä»£æ›¿ä¸€ç»´çŠ¶æ€ã€‚ |
| **2. è½¬ç§»æ–¹ç¨‹** | é€‰ Bï¼š`dp[i-1][j-1] + B[i]/j`ï¼›é€‰ Aï¼š`dp[i-1][j] + A[i]/(b+1)`ã€‚æ³¨æ„åˆ†æ¯æ˜¯å½“å‰åä½œè€…æ•° j æˆ– b+1ã€‚ | åˆ†æ¯å®æ—¶åæ˜ â€œå¹¶è¡Œæ•ˆç‡â€ã€‚ |
| **3. åç¼€å’Œä¼˜åŒ–** | é¢„å¤„ç† `suf[i][k]` è¡¨ç¤ºå i ä¸ªå·é‡Œæœ€å°çš„ k ä¸ª A ä¹‹å’Œï¼ŒO(1) æŸ¥è¯¢ã€‚ | æ’åº + å‰ç¼€å’Œæ˜¯å¤„ç†â€œé€‰æœ€å°è‹¥å¹²æ•°â€çš„ç»å…¸å¥—è·¯ã€‚ |

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¾—åˆ† |
|---|---|---|---|---|
| **æš´åŠ›æšä¸¾** | æšä¸¾æ¯ä¸ªå· 3 ç§çŠ¶æ€ï¼Œå›æº¯ | æ€è·¯ç›´è§‚ | O(3^N) çˆ†ç‚¸ | 0-10 |
| **è´ªå¿ƒ1.0** | å…ˆå…¨æ‹¿ Bï¼Œå†å…¨æ‹¿ A | ä»£ç æçŸ­ | æ ·ä¾‹1å³é”™ | 20 |
| **DP O(Nâ´)** | ä¸‰ç»´çŠ¶æ€ `f[i][j][k]` | æ­£ç¡® | N=500 è¶…æ—¶ | 60 |
| **DP O(NÂ³)** | æšä¸¾ b + äºŒç»´ DP | ç®€æ´é«˜æ•ˆ | ç†è®ºæœ€ä¼˜ | 100 |
| **DP O(NÂ²logN)** | ä¸‰åˆ† b + äºŒç»´ DP | æ›´ä¼˜å¸¸æ•° | å®ç°å¤æ‚ | 100 |

---

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€

> â€œè´ªå¿ƒå¤±è´¥ â†’ è¯æ˜ç»“æ„ â†’ é™ç»´ DP â†’ å‰ç¼€å’Œä¼˜åŒ–â€  
> è¿™å››æ­¥æ˜¯ç«èµ›ä¸­ä»æš´åŠ›åˆ°æ­£è§£çš„å…¸å‹è·¯å¾„ã€‚è®°ä½ï¼š**å…ˆçŒœç»“æ„ï¼Œå†è¯ç»“æ„ï¼Œæœ€åä¼˜åŒ–å®ç°ã€‚**

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
> ç»¼åˆå°ç¦ç”¨æˆ· & RyexAwl æ€è·¯ï¼Œå®ç°æœ€æ¸…æ™°çš„ O(NÂ³) æ¨¡æ¿ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 505;
const double INF = 1e18;
struct State { double a, b; } s[N];
double dp[N][N], suf[N][N], tmp[N];
int n, k;

double solve(int b) {
    for (int i = 1; i <= n; ++i) tmp[i] = s[i].a;
    for (int i = 0; i <= n; ++i)
        for (int j = 0; j <= b; ++j) dp[i][j] = INF;
    dp[0][0] = 0;
    for (int i = 1; i <= n; ++i)
        for (int j = 0; j <= min(b, i); ++j) {
            dp[i][j] = dp[i-1][j] + s[i].a / (b + 1);          // é€‰ A
            if (j && s[i].b < 1e17)
                dp[i][j] = min(dp[i][j], dp[i-1][j-1] + s[i].b / j); // é€‰ B
        }
    double res = INF;
    for (int i = b; i <= n; ++i) {
        sort(tmp + i + 1, tmp + n + 1);
        double sum = 0;
        for (int j = 1; j <= k - i; ++j) sum += tmp[i + j];
        res = min(res, dp[i][b] + sum / (b + 1));
    }
    return res;
}

int main() {
    scanf("%d%d", &n, &k);
    for (int i = 1; i <= n; ++i) {
        scanf("%lf%lf", &s[i].a, &s[i].b);
        if (s[i].b == -1) s[i].b = 1e18;
    }
    sort(s + 1, s + n + 1, [](State x, State y) {
        return x.b < y.b;
    });
    double ans = INF;
    for (int b = 0; b <= k; ++b) ans = min(ans, solve(b));
    printf("%.15lf\n", ans);
    return 0;
}
```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼šâ€œåƒç´ ç«é€‰æŒ‡æŒ¥éƒ¨â€  
- **èˆå°**ï¼š8Ã—8 åƒç´ ç½‘æ ¼ï¼Œæ¯ä¸ªæ ¼å­ä»£è¡¨ä¸€ä¸ªå·ï¼ˆA=è“ï¼ŒB=çº¢ï¼ŒC=ç°ï¼‰ã€‚  
- **è§’è‰²**ï¼š  
  - Rieï¼šåƒç´ ç¬‘è„¸ï¼Œæ¯ç§»åŠ¨ä¸€æ­¥æ’­æ”¾â€œå®â€éŸ³æ•ˆã€‚  
  - åä½œè€…ï¼šå°æœºå™¨äººï¼Œæ•°é‡å®æ—¶æ˜¾ç¤ºåœ¨å·¦ä¸Šè§’ã€‚  
- **åŠ¨ç”»æµç¨‹**ï¼š  
  1. **åˆå§‹åŒ–**ï¼šéšæœºç”Ÿæˆ N ä¸ªå·ï¼ŒæŒ‰ B æ’åºååƒç´ åŒ–å±•ç¤ºã€‚  
  2. **DP è¿‡ç¨‹**ï¼š  
     - é«˜äº®å½“å‰æ­£åœ¨å†³ç­–çš„å·ï¼ˆé»„è‰²è¾¹æ¡†ï¼‰ã€‚  
     - é€‰ Aï¼šæ ¼å­å˜è“ï¼Œæ˜¾ç¤º `+A/(b+1)` æ•°å€¼ã€‚  
     - é€‰ Bï¼šæ ¼å­å˜çº¢ï¼Œåä½œè€… +1ï¼Œæ’­æ”¾â€œå’”å—’â€éŸ³æ•ˆã€‚  
  3. **ç»“æœå±•ç¤º**ï¼šæœ€ä¼˜è·¯å¾„æ ¼å­é—ªçƒé‡‘è‰²ï¼Œæ€»è€—æ—¶ä»¥åƒç´ æ•°å­—æ˜¾ç¤ºã€‚  
- **äº¤äº’**ï¼š  
  - æ­¥è¿›/è‡ªåŠ¨æŒ‰é’®ï¼ˆåƒç´ é£æ ¼ï¼‰ã€‚  
  - é€Ÿåº¦æ»‘å—ï¼ˆ1-8 å€é€Ÿï¼Œå¯¹åº” 8 ä½æœºéŸ³æ•ˆé¢‘ç‡ï¼‰ã€‚  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**é€šç”¨æ€è·¯è¿ç§»**ï¼š  
- åˆ†ç»„èƒŒåŒ…çš„â€œå…ˆé€‰ç»„å†…æœ€ä¼˜ï¼Œå†ç»„é—´è´ªå¿ƒâ€æ€æƒ³ï¼Œé€‚ç”¨äºï¼š  
  1. **è¯¾ç¨‹è¡¨**ï¼šå…ˆé€‰å¿…ä¿®è¯¾ï¼Œå†é€‰é€‰ä¿®è¯¾ã€‚  
  2. **ä»»åŠ¡è°ƒåº¦**ï¼šå…ˆå¹¶è¡Œå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œå†ä¸²è¡Œä½ä¼˜å…ˆçº§ã€‚  
  3. **èµ„æºåˆ†é…**ï¼šå…ˆé›†ä¸­å‡çº§æ ¸å¿ƒè®¾æ–½ï¼Œå†åˆ†æ•£å»ºè®¾è¾…åŠ©è®¾æ–½ã€‚

**æ´›è°·æ¨è**ï¼š
1. **P1850 [NOIP2016] æ¢æ•™å®¤**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šåˆ†ç»„èƒŒåŒ… + æœŸæœ› DPï¼Œç»ƒä¹ â€œå…ˆé€‰ç»„å†é€‰ç‰©å“â€çš„æ€ç»´ã€‚  
2. **P5322 [BJOI2019] æ’å…µå¸ƒé˜µ**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šåˆ†ç»„èƒŒåŒ…å˜å½¢ï¼Œéœ€é¢„å¤„ç†â€œç»„å†…æœ€ä¼˜â€ã€‚  
3. **P1948 [USACO08JAN] Telephone Lines**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šäºŒåˆ† + æœ€çŸ­è·¯ï¼Œä½“éªŒâ€œæšä¸¾å‚æ•° + éªŒè¯â€çš„å¥—è·¯ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **RyexAwl**ï¼šâ€œè€ƒåœºä¸Šå…ˆç”¨è´ªå¿ƒéª— 20 åˆ†ï¼Œå†å†·é™ç”»å›¾è¯æ˜ç»“æ„ï¼Œæœ€åç”¨ DP ä¼˜åŒ–åˆ° O(NÂ³)ã€‚è®°ä½ï¼šè´ªå¿ƒæ˜¯ DP çš„å‰å¥ï¼â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šè¿™æ­£æ˜¯ç«èµ›æ€ç»´çš„æ ¸å¿ƒâ€”â€”**å…ˆæ„Ÿæ€§çŒœæƒ³ï¼Œå†ç†æ€§è¯æ˜ï¼Œæœ€åä¼˜é›…å®ç°**ã€‚

---
å¤„ç†ç”¨æ—¶ï¼š54.80ç§’
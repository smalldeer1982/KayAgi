# é¢˜ç›®ä¿¡æ¯

# [NOI2001] èªæ˜çš„æ‰“å­—å‘˜

## é¢˜ç›®æè¿°

é˜¿å…°æ˜¯æŸæœºå¯†éƒ¨é—¨çš„æ‰“å­—å‘˜ï¼Œå¥¹ç°åœ¨æ¥åˆ°ä¸€ä¸ªä»»åŠ¡ï¼šéœ€è¦åœ¨ä¸€å¤©ä¹‹å†…è¾“å…¥å‡ ç™¾ä¸ªé•¿åº¦å›ºå®šä¸º6çš„å¯†ç ã€‚å½“ç„¶ï¼Œå¥¹å¸Œæœ›è¾“å…¥çš„è¿‡ç¨‹ä¸­æ•²å‡»é”®ç›˜çš„æ€»æ¬¡æ•°è¶Šå°‘è¶Šå¥½ã€‚

ä¸å¹¸çš„æ˜¯ï¼Œå‡ºäºä¿å¯†çš„éœ€è¦ï¼Œè¯¥éƒ¨é—¨ç”¨äºè¾“å…¥å¯†ç çš„é”®ç›˜æ˜¯ç‰¹æ®Šè®¾è®¡çš„ï¼Œé”®ç›˜ä¸Šæ²¡æœ‰æ•°å­—é”®ï¼Œè€Œåªæœ‰ä»¥ä¸‹å…­ä¸ªé”®ï¼š`swap0`ï¼Œ`swap1`ï¼Œ`up`ï¼Œ`down`ï¼Œ`left`ï¼Œ`right`ã€‚ä¸ºäº†è¯´æ˜è¿™ $6$ ä¸ªé”®çš„ä½œç”¨ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰å½•å…¥åŒºçš„ $6$ ä¸ªä½ç½®çš„ç¼–å·ï¼Œä»å·¦è‡³å³ä¾æ¬¡ä¸º $1,2,3,4,5,6$ã€‚ä¸‹é¢åˆ—å‡ºæ¯ä¸ªé”®çš„ä½œç”¨ï¼š

- `swap0`ï¼šæŒ‰ `swap0`ï¼Œå…‰æ ‡ä½ç½®ä¸å˜ï¼Œå°†å…‰æ ‡æ‰€åœ¨çš„ä½ç½®çš„æ•°å­—ä¸å½•å…¥åŒºçš„ $1$ å·ä½ç½®çš„æ•°å­—ï¼ˆå·¦èµ·ç¬¬ä¸€ä¸ªæ•°å­—ï¼‰äº¤æ¢ã€‚å¦‚æœå…‰æ ‡å·²ç»å¤„åœ¨å½•å…¥åŒºçš„ $1$ å·ä½ç½®ï¼Œåˆ™æŒ‰ `swap0` é”®ä¹‹åå½•å…¥åŒºçš„æ•°å­—ä¸å˜ã€‚

- `swap1`ï¼šæŒ‰ `swap1`ï¼Œå…‰æ ‡ä½ç½®ä¸å˜ï¼Œå°†å…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•°å­—ä¸å½•å…¥åŒºçš„ $6$ å·ä½ç½®çš„æ•°å­—ï¼ˆå·¦èµ·ç¬¬å…­ä¸ªæ•°å­—ï¼‰äº¤æ¢ã€‚å¦‚æœå…‰æ ‡å·²ç»å¤„åœ¨å½•å…¥åŒºçš„ $6$ å·ä½ç½®ï¼Œåˆ™æŒ‰ `swap1` é”®ä¹‹åå½•å…¥åŒºçš„æ•°å­—ä¸å˜ã€‚

- `up`ï¼šæŒ‰ `up`ï¼Œå…‰æ ‡ä½ç½®ä¸å˜ï¼Œè®²å…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•°å­—åŠ  $1$ï¼ˆé™¤éè¯¥æ•°å­—æ˜¯ $9$ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•°å­—ä¸º $2$ï¼ŒæŒ‰ `up` ä¹‹åï¼Œè¯¥å¤„çš„æ•°å­—å˜ä¸º $3$ï¼›å¦‚æœå…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•°å­—ä¸º $9$ï¼ŒæŒ‰ `up` ä¹‹åï¼Œè¯¥å¤„çš„æ•°å­—ä¸å˜ï¼Œå…‰æ ‡ä½ç½®ä¹Ÿä¸å˜ï¼›

- `down`ï¼šæŒ‰ `down`ï¼Œå…‰æ ‡ä½ç½®ä¸å˜ï¼Œè®²å…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•°å­—å‡ $1$ï¼ˆé™¤éè¯¥æ•°å­—æ˜¯ $0$ï¼‰ã€‚å¦‚æœå…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ•°å­—ä¸º $0$ï¼ŒæŒ‰ `down` ä¹‹åï¼Œè¯¥å¤„çš„æ•°å­—ä¸å˜ï¼Œå…‰æ ‡ä½ç½®ä¹Ÿä¸å˜ï¼›

- `left`ï¼šæŒ‰ `left`ï¼Œå…‰æ ‡å·¦ç§»ä¸€ä¸ªä½ç½®ï¼Œå¦‚æœå…‰æ ‡å·²åœ¨å½•å…¥åŒºçš„ $1$ å·ä½ç½®ï¼ˆå·¦èµ·ç¬¬ä¸€ä¸ªä½ç½®ï¼‰ä¸Šï¼Œåˆ™å…‰æ ‡ä¸åŠ¨ï¼›

- `right`ï¼šæŒ‰ `right`ï¼Œå…‰æ ‡å³ç§»ä¸€ä¸ªä½ç½®ï¼Œå¦‚æœå…‰æ ‡å·²åœ¨å½•å…¥åŒºçš„ $6$ å·ä½ç½®ï¼ˆå·¦èµ·ç¬¬å…­ä¸ªä½ç½®ï¼‰ä¸Šï¼Œåˆ™å…‰æ ‡ä¸åŠ¨ï¼›

å½“ç„¶ï¼Œä¸ºäº†ä½¿è¿™æ ·çš„é”®ç›˜å‘æŒ¥ä½œç”¨ï¼Œæ¯æ¬¡å½•å…¥å¯†ç ä¹‹å‰ï¼Œå½•å…¥åŒºæ€»ä¼šéšæœºå‡ºç°ä¸€ä¸ªé•¿åº¦ä¸º $6$ çš„åˆå§‹å¯†ç ï¼Œè€Œä¸”å…‰æ ‡ä¼šå›ºå®šå‡ºç°åœ¨ $1$ å·ä½ç½®ä¸Šã€‚å½“å·§å¦™çš„ä½¿ç”¨ä¸Šè¿°å…­ä¸ªç‰¹æ®Šé”®ä¹‹åï¼Œå¯ä»¥å¾—åˆ°ç›®æ ‡å¯†ç ï¼Œè¿™æ—¶å…‰æ ‡å…è®¸åœç•™åœ¨ä»»ä½•ä¸€ä¸ªä½ç½®ã€‚

ç°åœ¨ï¼Œé˜¿å…°éœ€è¦ä½ çš„å¸®åŠ©ï¼Œç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ±‚å‡ºå½•å…¥ä¸€ä¸ªå¯†ç éœ€è¦çš„æœ€å°‘çš„å‡»é”®æ¬¡æ•°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
123456 654321```

### è¾“å‡º

```
11```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼š[NOI2001] èªæ˜çš„æ‰“å­—å‘˜ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œèªæ˜çš„æ‰“å­—å‘˜â€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡è§£é¢˜ï¼Œæ›´æ˜¯ä¸€åœºæ€ç»´çš„æ¢é™©ã€‚æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åƒä¾¦æ¢ä¸€æ ·ä»é¢˜ç›®ä¸­å¯»æ‰¾çº¿ç´¢ï¼Œå¹¶åœ¨ä¸åŒçš„è§£é¢˜é“è·¯ä¸­æƒè¡¡é€‰æ‹©ï¼Œæœ€ç»ˆæ‰¾åˆ°æœ€ä¼˜çš„ç­–ç•¥ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
åœ¨6ä½æ•°å­—å¯†ç ä¸å…‰æ ‡ä½ç½®æ„æˆçš„**çŠ¶æ€ç©ºé—´**ä¸­ï¼Œé€šè¿‡6ç§ç‰¹æ®ŠæŒ‰é”®æ“ä½œï¼Œå¯»æ‰¾ä»åˆå§‹çŠ¶æ€åˆ°ç›®æ ‡çŠ¶æ€çš„**æœ€çŸ­è·¯å¾„**ï¼ˆæœ€å°‘æŒ‰é”®æ¬¡æ•°ï¼‰ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š**BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰**ã€**çŠ¶æ€å‹ç¼©**ã€**åŒå‘BFSä¼˜åŒ–**ã€‚

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œ**çŠ¶æ€ç©ºé—´æœç´¢**â€é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªâ€œ6ä½æ•°å­—+å…‰æ ‡ä½ç½®â€çœ‹ä½œå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯ç§æŒ‰é”®æ“ä½œçœ‹ä½œä¸€æ¡è¾¹ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ç”±äºè¾¹æƒå‡ä¸º1ï¼ˆæ¯æ¬¡æŒ‰é”®ç®—ä¸€æ­¥ï¼‰ï¼Œ**BFSå¤©ç„¶é€‚åˆæ±‚è§£æœ€çŸ­è·¯å¾„**ã€‚ä½†çŠ¶æ€ç©ºé—´è¾ƒå¤§ï¼ˆæ•°å­—ç»„åˆæœ‰10^6ç§ï¼Œå…‰æ ‡ä½ç½®æœ‰6ç§ï¼Œå…±600ä¸‡ç§çŠ¶æ€ï¼‰ï¼Œéœ€è¦**é«˜æ•ˆçš„çŠ¶æ€å‹ç¼©å’Œåˆ¤é‡**ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š  
    â€œæ±‚å½•å…¥ä¸€ä¸ªå¯†ç éœ€è¦çš„æœ€å°‘å‡»é”®æ¬¡æ•°â€ â†’ **æœ€çŸ­è·¯å¾„é—®é¢˜**ï¼ŒBFSæ˜¯é¦–é€‰ã€‚

2.  **çº¿ç´¢2 (é—®é¢˜çº¦æŸ/ç‰¹æ€§)**ï¼š  
    - çŠ¶æ€ç”±â€œ6ä½æ•°å­—+å…‰æ ‡ä½ç½®â€å…±åŒå†³å®šï¼Œå¿…é¡»åŒæ—¶è®°å½•ã€‚  
    - æ•°å­—èŒƒå›´0-9ï¼Œå…‰æ ‡èŒƒå›´1-6ï¼Œæ€»çŠ¶æ€æ•°çº¦600ä¸‡ï¼Œ**å¿…é¡»ç”¨æ•°ç»„O(1)åˆ¤é‡**ï¼Œä¸èƒ½ç”¨map/setã€‚

3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼š  
    è¾“å…¥ä»…ä¸ºä¸¤ä¸ª6ä½æ•°ï¼ŒçŠ¶æ€æ•°å›ºå®šï¼ˆ600ä¸‡ï¼‰ï¼Œ**BFS+çŠ¶æ€å‹ç¼©å¯è¡Œ**ã€‚åŒå‘BFSå¯è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> å¥½äº†ï¼Œä¾¦æ¢å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬æ”¶é›†åˆ°äº†å‡ æ¡å…³é”®çº¿ç´¢ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åƒæ‹¼å›¾ä¸€æ ·æŠŠå®ƒä»¬ç»„åˆèµ·æ¥ï¼š
> 1.  é¦–å…ˆï¼Œ**çº¿ç´¢1ï¼šé—®é¢˜ç›®æ ‡**å‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªâ€œæœ€çŸ­è·¯å¾„â€é—®é¢˜ï¼ŒBFSæ˜¯é¦–é€‰ã€‚
> 2.  æ¥ç€ï¼Œ**çº¿ç´¢2ï¼šé—®é¢˜ç‰¹æ€§**æç¤ºæˆ‘ä»¬çŠ¶æ€ç”±â€œæ•°å­—+å…‰æ ‡â€å…±åŒå†³å®šï¼Œå¿…é¡»é«˜æ•ˆå‹ç¼©ã€‚
> 3.  æœ€åï¼Œ**çº¿ç´¢3ï¼šæ•°æ®è§„æ¨¡**å‘Šè¯‰æˆ‘ä»¬600ä¸‡çŠ¶æ€æ˜¯å¯è¡Œçš„ï¼ŒåŒå‘BFSå¯å‰ªæã€‚
> 4.  **ç»“è®º**ï¼š**BFS+çŠ¶æ€å‹ç¼©**æ˜¯æ ¸å¿ƒï¼Œ**åŒå‘BFS**æ˜¯ä¼˜åŒ–æ–¹å‘ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šPoncirusçš„åŒå‘BFSï¼ˆèµï¼š16ï¼‰
**ç‚¹è¯„**ï¼š  
è¿™ä»½é¢˜è§£é‡‡ç”¨äº†**åŒå‘BFS**çš„ç»å…¸ä¼˜åŒ–ï¼Œä»èµ·ç‚¹å’Œç»ˆç‚¹åŒæ—¶æœç´¢ï¼Œå½“ä¸¤ç«¯ç›¸é‡æ—¶å³å¾—ç­”æ¡ˆã€‚çŠ¶æ€å‹ç¼©å·§å¦™ï¼šç”¨`int`å­˜6ä½æ•°å­—ï¼Œ`short vis[1000000][7][2]`è®°å½•æ­¥æ•°ï¼ˆæ­£å‘/åå‘ï¼‰ã€‚ä»£ç ä¸­`UpOrDown`å’Œ`Swap`å‡½æ•°ç”¨ä½è¿ç®—é«˜æ•ˆå¤„ç†æ•°å­—ä¿®æ”¹ï¼Œé¿å…äº†å­—ç¬¦ä¸²æ“ä½œçš„å¼€é”€ã€‚  
**å­¦ä¹ ç‚¹**ï¼šåŒå‘BFSçš„ç›¸é‡æ¡ä»¶`vis[f.now][f.pos][!f.flag] != -1`æ˜¯å…³é”®ã€‚

### é¢˜è§£äºŒï¼šlitbleçš„å•å‘BFSï¼ˆèµï¼š10ï¼‰
**ç‚¹è¯„**ï¼š  
é‡‡ç”¨**å•å‘BFS+æ•°ç»„åˆ¤é‡**ï¼Œç”¨`bool vis[1000000][7]`æ ‡è®°çŠ¶æ€æ˜¯å¦è®¿é—®ã€‚ä»£ç ç®€æ´ï¼Œé€šè¿‡`shi[]`æ•°ç»„ï¼ˆä½æƒï¼‰å¿«é€Ÿæå–/ä¿®æ”¹æ•°å­—çš„æŸä¸€ä½ã€‚  
**å­¦ä¹ ç‚¹**ï¼š`shi[]`æ•°ç»„çš„é¢„å¤„ç†æŠ€å·§ï¼Œé¿å…é‡å¤è®¡ç®—ä½æƒã€‚

### é¢˜è§£ä¸‰ï¼šæ¸…æ­£ç¾è®°è€…çš„BFS+å‰ªæï¼ˆèµï¼š3ï¼‰
**ç‚¹è¯„**ï¼š  
åœ¨å•å‘BFSåŸºç¡€ä¸Šå¢åŠ äº†**å‰ªæä¼˜åŒ–**ï¼šè®°å½•ç›®æ ‡çŠ¶æ€çš„æœ€å¤§/æœ€å°æ•°å­—ï¼Œè‹¥å½“å‰æ“ä½œå¯¼è‡´æ•°å­—è¶…å‡ºèŒƒå›´åˆ™è·³è¿‡ã€‚ç”¨å¾ªç¯é˜Ÿåˆ—èŠ‚çœç©ºé—´ã€‚  
**å­¦ä¹ ç‚¹**ï¼šå‰ªææ€è·¯â€”â€”æ— æ•ˆæ“ä½œç›´æ¥è·³è¿‡ï¼Œå‡å°‘çŠ¶æ€æ•°ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•å‰–æï¼‰

#### å…³é”®ç‚¹1ï¼šå¦‚ä½•å‹ç¼©çŠ¶æ€ï¼Ÿ
- **åˆ†æ**ï¼šçŠ¶æ€ç”±â€œ6ä½æ•°å­—+å…‰æ ‡ä½ç½®â€ç»„æˆï¼Œéœ€å‹ç¼©ä¸ºæ•°ç»„ä¸‹æ ‡ã€‚  
  - æ•°å­—éƒ¨åˆ†ï¼šç›´æ¥å­˜ä¸º`int`ï¼ˆå¦‚123456ï¼‰ã€‚  
  - å…‰æ ‡éƒ¨åˆ†ï¼šå­˜ä¸º1-6çš„æ•´æ•°ã€‚  
  - ç»„åˆï¼š`vis[num][pos]`å³å¯å”¯ä¸€æ ‡è¯†çŠ¶æ€ã€‚
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**æ•°å­—+å…‰æ ‡=äºŒç»´çŠ¶æ€**ï¼Œæ•°ç»„å¤§å°`[1e6][7]`çº¦7MBï¼Œå¯æ¥å—ã€‚

#### å…³é”®ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆä¿®æ”¹æ•°å­—ï¼Ÿ
- **åˆ†æ**ï¼šéœ€å¿«é€Ÿæå–/ä¿®æ”¹æŸä¸€ä½æ•°å­—ã€‚  
  - æå–ç¬¬`k`ä½ï¼š`num / 10^(6-k) % 10`ã€‚  
  - ä¿®æ”¹ç¬¬`k`ä½ä¸º`x`ï¼š`num = (num / 10^(7-k)) * 10^(7-k) + x * 10^(6-k) + num % 10^(6-k)`ã€‚
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**ä½æƒæ•°ç»„é¢„å¤„ç†**ï¼ˆå¦‚`ws[] = {1e6, 1e5, ..., 1}`ï¼‰å¯ç®€åŒ–è®¡ç®—ã€‚

#### å…³é”®ç‚¹3ï¼šå¦‚ä½•åˆ¤é‡ï¼Ÿ
- **åˆ†æ**ï¼šBFSéœ€é¿å…é‡å¤è®¿é—®çŠ¶æ€ã€‚  
  - å•å‘BFSï¼š`bool vis[1e6][7]`æ ‡è®°æ˜¯å¦è®¿é—®è¿‡ã€‚  
  - åŒå‘BFSï¼š`short vis[1e6][7][2]`åˆ†åˆ«è®°å½•æ­£å‘/åå‘æ­¥æ•°ã€‚
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**æ•°ç»„åˆ¤é‡æ¯”å“ˆå¸Œè¡¨æ›´å¿«**ï¼Œä½†éœ€åˆç†è®¾è®¡çŠ¶æ€ç»´åº¦ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼ˆçŠ¶æ€å‹ç¼©ï¼‰**ï¼šå°†å¤åˆçŠ¶æ€ï¼ˆæ•°å­—+å…‰æ ‡ï¼‰æ˜ å°„ä¸ºæ•°ç»„ä¸‹æ ‡ã€‚  
- **æŠ€å·§Bï¼ˆåŒå‘BFSï¼‰**ï¼šä»èµ·ç‚¹å’Œç»ˆç‚¹åŒæ—¶æœç´¢ï¼Œå‡å°‘çŠ¶æ€æ•°çº¦âˆšNå€ã€‚  
- **æŠ€å·§Cï¼ˆå‰ªæä¼˜åŒ–ï¼‰**ï¼šæå‰æ’é™¤æ— æ•ˆæ“ä½œï¼ˆå¦‚æ•°å­—è¶Šç•Œï¼‰ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ä¸åˆ†æ | é€‚ç”¨åœºæ™¯/å¾—åˆ†é¢„æœŸ |
| :--- | :--- | :--- | :--- | :--- |
| **æš´åŠ›DFS** | é€’å½’æšä¸¾æ‰€æœ‰æ“ä½œè·¯å¾„ | æ€è·¯ç®€å• | æŒ‡æ•°çº§å¤æ‚åº¦ï¼ŒçŠ¶æ€çˆ†ç‚¸ | ä»…æ•™å­¦æ¼”ç¤ºï¼Œå¾—åˆ†0% |
| **å•å‘BFS** | é˜Ÿåˆ—+æ•°ç»„åˆ¤é‡ | æ­£ç¡®æ€§æ˜“è¯ | çŠ¶æ€æ•°600ä¸‡ï¼Œå¯èƒ½è¶…æ—¶ | æ•°æ®è¾ƒå¼±æ—¶å¾—åˆ†100%ï¼Œä½†é£é™©é«˜ |
| **åŒå‘BFS** | ä¸¤ç«¯åŒæ—¶æœç´¢ | çŠ¶æ€æ•°å‡å°‘è‡³âˆšNâ‰ˆ2500 | å®ç°ç¨å¤æ‚ | æœ€ä¼˜ç­–ç•¥ï¼Œå¾—åˆ†100% |
| **BFS+å‰ªæ** | æ’é™¤æ— æ•ˆæ“ä½œ | è¿›ä¸€æ­¥å‡å°‘çŠ¶æ€æ•° | å‰ªææ¡ä»¶éœ€è®¾è®¡ | ä¼˜åŒ–å•å‘BFSï¼Œå¾—åˆ†100% |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> ä»æš´åŠ›æšä¸¾åˆ°åŒå‘BFSï¼Œæˆ‘ä»¬ç»å†äº†â€œçŠ¶æ€å‹ç¼©â†’æ•°ç»„åˆ¤é‡â†’åŒå‘æœç´¢â†’å‰ªæä¼˜åŒ–â€çš„å®Œæ•´è·¯å¾„ã€‚æ¯ä¸€æ­¥ä¼˜åŒ–éƒ½åŸºäºå¯¹é—®é¢˜ç»“æ„çš„æ·±å…¥ç†è§£ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆåŒå‘BFSï¼‰
```cpp
#include <bits/stdc++.h>
using namespace std;
struct State {
    int num, pos, step;
    bool dir; // 0=æ­£å‘, 1=åå‘
};
const int ws[7] = {1, 10, 100, 1000, 10000, 100000, 1000000}; // ws[k] = 10^(6-k)
short vis[1000000][7][2]; // vis[num][pos][dir]
queue<State> q;

inline int modify(int num, int pos, int delta) {
    int digit = (num / ws[pos]) % 10;
    int new_digit = digit + delta;
    if (new_digit < 0 || new_digit > 9) return num;
    return num - digit * ws[pos] + new_digit * ws[pos];
}

inline int swap_pos(int num, int pos, int target) {
    int d1 = (num / ws[pos]) % 10;
    int d2 = (num / ws[target]) % 10;
    if (d1 == d2) return num;
    return num - d1 * ws[pos] - d2 * ws[target] + d2 * ws[pos] + d1 * ws[target];
}

int bidirectional_bfs(int start, int end) {
    memset(vis, -1, sizeof(vis));
    q.push({start, 1, 0, 0});
    vis[start][1][0] = 0;
    for (int i = 1; i <= 6; ++i) {
        q.push({end, i, 0, 1});
        vis[end][i][1] = 0;
    }
    while (!q.empty()) {
        State cur = q.front(); q.pop();
        int num = cur.num, pos = cur.pos, step = cur.step;
        if (vis[num][pos][!cur.dir] != -1) return step + vis[num][pos][!cur.dir];
        
        // ç”Ÿæˆ6ç§æ“ä½œçš„æ–°çŠ¶æ€
        // 1. left
        if (pos > 1 && vis[num][pos-1][cur.dir] == -1) {
            vis[num][pos-1][cur.dir] = step + 1;
            q.push({num, pos-1, step+1, cur.dir});
        }
        // 2. right
        if (pos < 6 && vis[num][pos+1][cur.dir] == -1) {
            vis[num][pos+1][cur.dir] = step + 1;
            q.push({num, pos+1, step+1, cur.dir});
        }
        // 3. up
        int new_num = modify(num, pos, 1);
        if (vis[new_num][pos][cur.dir] == -1) {
            vis[new_num][pos][cur.dir] = step + 1;
            q.push({new_num, pos, step+1, cur.dir});
        }
        // 4. down
        new_num = modify(num, pos, -1);
        if (vis[new_num][pos][cur.dir] == -1) {
            vis[new_num][pos][cur.dir] = step + 1;
            q.push({new_num, pos, step+1, cur.dir});
        }
        // 5. swap0
        new_num = swap_pos(num, pos, 1);
        if (vis[new_num][pos][cur.dir] == -1) {
            vis[new_num][pos][cur.dir] = step + 1;
            q.push({new_num, pos, step+1, cur.dir});
        }
        // 6. swap1
        new_num = swap_pos(num, pos, 6);
        if (vis[new_num][pos][cur.dir] == -1) {
            vis[new_num][pos][cur.dir] = step + 1;
            q.push({new_num, pos, step+1, cur.dir});
        }
    }
    return -1; // æ— è§£
}

int main() {
    int start, end;
    scanf("%d %d", &start, &end);
    printf("%d\n", bidirectional_bfs(start, end));
    return 0;
}
```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼š**â€œåƒç´ æ‰“å­—å‘˜â€çš„é”®ç›˜å†’é™©**
- **åœºæ™¯**ï¼š8ä½åƒç´ é£æ ¼çš„é”®ç›˜ç•Œé¢ï¼Œ6ä¸ªæ•°å­—æ ¼å­ï¼ˆç¼–å·1-6ï¼‰ï¼Œå…‰æ ‡ä»¥é—ªçƒåƒç´ æ–¹å—è¡¨ç¤ºã€‚
- **æ“ä½œæ¼”ç¤º**ï¼š
  - **left/right**ï¼šå…‰æ ‡åƒç´ æ–¹å—å·¦å³æ»‘åŠ¨ï¼Œä¼´éšâ€œæ»´ç­”â€éŸ³æ•ˆã€‚
  - **up/down**ï¼šç›®æ ‡æ•°å­—æ ¼å­åƒç´ åŒ–â€œ+1/-1â€åŠ¨ç”»ï¼ˆæ•°å­—ç¿»è½¬æ•ˆæœï¼‰ï¼Œè‹¥è¶Šç•Œåˆ™æ’­æ”¾â€œå’šâ€æç¤ºéŸ³ã€‚
  - **swap0/swap1**ï¼šæ•°å­—æ ¼å­åƒç´ é—ªçƒäº¤æ¢ï¼Œä¼´éšâ€œå’”å—’â€éŸ³æ•ˆã€‚
- **åŒå‘BFSå¯è§†åŒ–**ï¼š
  - èµ·ç‚¹çŠ¶æ€ï¼ˆç»¿è‰²åƒç´ è·¯å¾„ï¼‰å’Œç»ˆç‚¹çŠ¶æ€ï¼ˆçº¢è‰²åƒç´ è·¯å¾„ï¼‰åŒæ—¶æ‰©å±•ï¼Œç›¸é‡æ—¶æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆã€‚
- **äº¤äº’è®¾è®¡**ï¼š
  - æ­¥è¿›æŒ‰é’®ï¼šå•æ­¥æ‰§è¡Œï¼Œæ˜¾ç¤ºå½“å‰çŠ¶æ€å’Œæ“ä½œã€‚
  - é€Ÿåº¦æ»‘å—ï¼šè°ƒæ•´åŠ¨ç”»é€Ÿåº¦ã€‚
  - é‡ç½®æŒ‰é’®ï¼šå›åˆ°åˆå§‹çŠ¶æ€ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
1. **å…«æ•°ç é—®é¢˜**ï¼š3Ã—3æ»‘å—æ‹¼å›¾ï¼ŒçŠ¶æ€ä¸ºæ•°å­—æ’åˆ—+ç©ºæ ¼ä½ç½®ã€‚  
2. **é­”æ¿é—®é¢˜**ï¼šæ—‹è½¬å’Œç¿»è½¬æ“ä½œçš„çŠ¶æ€ç©ºé—´æœç´¢ã€‚  
3. **åå®¹é“**ï¼š4Ã—5æ»‘å—çš„æœ€çŸ­è·¯å¾„æ±‚è§£ã€‚

### æ´›è°·æ¨èç»ƒä¹ 
1. **P1379 å…«æ•°ç éš¾é¢˜**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šç»å…¸çŠ¶æ€å‹ç¼©BFSï¼Œç»ƒä¹ åŒå‘BFSå’ŒA*ç®—æ³•ã€‚  
2. **P2324 é­”æ¿**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šå¤æ‚æ“ä½œçš„çŠ¶æ€å»ºæ¨¡ï¼Œå¼ºåŒ–çŠ¶æ€å‹ç¼©æŠ€å·§ã€‚  
3. **P1074 é¶å½¢æ•°ç‹¬**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šæœç´¢+å‰ªæçš„ç»¼åˆåº”ç”¨ï¼Œæå‡ä¼˜åŒ–æ€ç»´ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªPoncirusçš„è¸©å‘æ•™è®­**ï¼š  
> â€œæœ¬è’Ÿè’»æ›¾ç”¨`1e7`æ•°ç»„å¯¼è‡´`memset`çˆ†ç‚¸ï¼Œåæ¥æ”¹ç”¨`short vis[1e6][7][2]`èŠ‚çœç©ºé—´ã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šçŠ¶æ€å‹ç¼©æ—¶åŠ¡å¿…è®¡ç®—æ•°ç»„å¤§å°ï¼Œ`short`æ¯”`int`çœä¸€åŠç©ºé—´ï¼

---

<conclusion>
æœ¬æ¬¡å…³äºâ€œèªæ˜çš„æ‰“å­—å‘˜â€çš„åˆ†æåˆ°æ­¤ç»“æŸã€‚è®°ä½ï¼šçŠ¶æ€å‹ç¼©æ˜¯æœç´¢é¢˜çš„é’¥åŒ™ï¼ŒåŒå‘BFSæ˜¯ä¼˜åŒ–çš„æ·å¾„ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š74.26ç§’
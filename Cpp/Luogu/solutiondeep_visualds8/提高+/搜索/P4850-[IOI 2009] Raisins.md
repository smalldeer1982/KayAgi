# é¢˜ç›®ä¿¡æ¯

# [IOI 2009] Raisins

## é¢˜ç›®èƒŒæ™¯

IOI2009 D1T4

## é¢˜ç›®æè¿°

æ™®ç½—å¤«è¿ªå¤«çš„è‘—åå·§å…‹åŠ›å¤§å¸ˆ Bonny éœ€è¦åˆ‡å¼€ä¸€æ¿å¸¦æœ‰è‘¡è„å¹²çš„å·§å…‹åŠ›ã€‚å·§å…‹åŠ›æ˜¯ä¸€ä¸ªåŒ…å«è®¸å¤šç›¸åŒçš„æ–¹å½¢å°å—çš„çŸ©å½¢ã€‚å°å—æ²¿ç€å·§å…‹åŠ›çš„è¾¹æ’åˆ—æˆ $N$ è¡Œ $M$ åˆ—ï¼Œå…±æœ‰ $N\times M$ å—ã€‚æ¯ä¸ªå°å—ä¸Šæœ‰ $1$ ä¸ªæˆ–å¤šä¸ªè‘¡è„å¹²ï¼Œæ²¡æœ‰è‘¡è„å¹²åœ¨å°å—çš„è¾¹ä¸Šæˆ–è€…è·¨è¿‡ä¸¤ä¸ªå°å—ã€‚

æœ€å¼€å§‹ï¼Œå·§å…‹åŠ›æ˜¯ä¸€æ•´å—ã€‚Bonny éœ€è¦æŠŠå®ƒåˆ‡æˆä¸Šè¿°çš„ $N\times M$ ä¸ªç‹¬ç«‹çš„å°å—ã€‚å› ä¸º Bonny å¾ˆå¿™ï¼Œå¥¹éœ€è¦å¥¹çš„åŠ©æ‰‹ Sly Peter å¸®å¥¹åˆ‡ã€‚
Peter åªèƒ½ä»ä¸€ç«¯åˆ°å¦ä¸€ç«¯åˆ‡ç›´çº¿ï¼Œå¹¶ä¸”ä»–è¦ä¸ºä»–çš„æ¯ä¸€åˆ€å¾—åˆ°æŠ¥é…¬ã€‚Bonny æ‰‹å¤´æ²¡æœ‰é’±ï¼Œä½†æ˜¯å¥¹æœ‰è¶³å¤Ÿçš„è‘¡è„å¹²ï¼Œæ‰€ä»¥å¥¹æå‡ºç”¨è‘¡è„å¹²ä»˜ç»™ Peterã€‚Sly Peter åŒæ„æ¥å—è‘¡è„å¹²ï¼Œä½†æ˜¯æœ‰ä¸‹é¢çš„æ¡ä»¶ï¼šæ¯æ¬¡ä»–æŠŠç»™å®šçš„ä¸€å—å·§å…‹åŠ›åˆ‡æˆä¸¤å°å—ï¼Œä»–éƒ½è¦å¾—åˆ°å’Œé‚£å—ç»™å®šçš„å·§å…‹åŠ›ä¸Šè‘¡è„å¹²æ•°ç›®ç›¸åŒçš„è‘¡è„å¹²ã€‚

Bonny æƒ³è¦ä»˜ç»™ Peter å°½å¯èƒ½å°‘çš„è‘¡è„å¹²ã€‚å¥¹çŸ¥é“è¿™ $n\times m$ ä¸ªå°å—ä¸­æ¯ä¸€ä¸ªå°å—ä¸Šè‘¡è„å¹²çš„æ•°ç›®ã€‚å¥¹å¯ä»¥é€‰æ‹©é€’ç»™ Peter çš„å·§å…‹åŠ›çš„é¡ºåºï¼Œä¹Ÿå¯ä»¥å‘Šè¯‰ Peter å¦‚ä½•åˆ‡ï¼ˆæ¨ªåˆ‡è¿˜æ˜¯ç«–åˆ‡ï¼‰ä»¥åŠä»å“ªé‡Œåˆ‡ã€‚è¯·å‘Šè¯‰ Bonny å¦‚ä½•æŠŠå·§å…‹åŠ›åˆ‡æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„å°å—ï¼Œä½¿å¥¹èƒ½å¤Ÿä»˜ç»™ Sly Peter å°½å¯èƒ½å°‘çš„è‘¡è„å¹²ã€‚

**ä»»åŠ¡**ï¼šç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œç»™å®šæ¯ä¸ªå°å—ä¸Šè‘¡è„å¹²çš„æ•°ç›®ï¼Œè®¡ç®—å‡º Bonny è¦ä»˜ç»™ Sly Peter çš„æœ€å°‘çš„è‘¡è„å¹²çš„æ•°ç›®ã€‚

## è¯´æ˜/æç¤º

### æ ·ä¾‹è§£é‡Š

ä¸€ç§å¯èƒ½çš„ä»£ä»·ä¸º $77$ çš„åˆ‡å‰²æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://cdn.luogu.com.cn/upload/image_hosting/zg74ypip.png)

ç¬¬ä¸€æ¬¡åˆ‡å‰²å°†ç¬¬ä¸‰åˆ—å’Œå‰©ä¸‹æ¥çš„å·§å…‹åŠ›åˆ†å¼€äº†ã€‚Bonny éœ€è¦ä»˜ç»™ Peter $29$ ä¸ªè‘¡è„å¹²ã€‚

æ¥ä¸‹æ¥ Bonny æŠŠè¾ƒå°çš„é‚£ä¸€å—å·§å…‹åŠ›ï¼ˆæœ‰ä¸¤å°å—ï¼Œæ¯ä¸€å—éƒ½æœ‰ $5$ ä¸ªè‘¡è„å¹²ï¼‰ç»™ Peterï¼Œè¦æ±‚ Peter åˆ‡æˆä¸¤åŠå¹¶æ”¯ä»˜ $10$ ä¸ªè‘¡è„å¹²ã€‚

åœ¨æ­¤ä¹‹åï¼ŒBonny ç»™ Peter å‰©ä¸‹æ¥çš„æœ€å¤§å—ï¼ˆåˆ†åˆ«æœ‰ $2,  7, 1, 9$ ä¸ªè‘¡è„å¹²åœ¨å®ƒçš„å››ä¸ªå°å—ä¸Šï¼‰ã€‚Bonny è¦æ±‚ Peter æ°´å¹³åˆ‡å‰²è¿™ä¸€å—ï¼Œå°†ç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œåˆ†å¼€å¹¶ä»˜ç»™ä»– $19$ ä¸ªè‘¡è„å¹²ã€‚

æ­¤å Bonny ç»™ Peter å·¦ä¸Šè§’çš„å—ï¼Œæ”¯ä»˜ $9$ ä¸ªè‘¡è„å¹²ã€‚æœ€å Bonny è¦æ±‚ Peter å°†å·¦ä¸‹è§’çš„å—åˆ†å¼€ï¼Œæ”¯ä»˜ $10$ ä¸ªè‘¡è„å¹²ã€‚

Bonny çš„æ€»ä»£ä»·æ˜¯ $29 + 10 + 19 + 9 + 10 = 77$ ä¸ªè‘¡è„å¹²ã€‚æ²¡æœ‰å…¶å®ƒå®‰æ’åˆ‡å‰²çš„æ–¹æ¡ˆæœ‰æ›´å°çš„ä»£ä»·ã€‚

### æ•°æ®èŒƒå›´ä¸çº¦å®š

- å¯¹äº $25\%$ çš„æ•°æ®ï¼Œ$n,m\leq 7$ã€‚
- å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1\leq n,m\leq 50$ï¼Œ$1\leq R_{k, p}\leq 1000$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 3
2 7 5
1 9 5
```

### è¾“å‡º

```
77
```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šIOI2009 Raisins æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æã€ŒIOI 2009 Raisinsã€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡è§£é¢˜ï¼Œæ›´æ˜¯ä¸€åœºæ€ç»´çš„æ¢é™©ï¼šå¦‚ä½•æŠŠä¸€å—å¤§å·§å…‹åŠ›åˆ‡æˆ1Ã—1çš„å°å—ï¼ŒåŒæ—¶è®©ä»˜å‡ºçš„è‘¡è„å¹²æœ€å°‘ï¼Ÿæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åƒä¾¦æ¢ä¸€æ ·ä»é¢˜ç›®ä¸­å¯»æ‰¾çº¿ç´¢ï¼Œå¹¶åœ¨ä¸åŒçš„è§£é¢˜é“è·¯ä¸­æƒè¡¡é€‰æ‹©ï¼Œæœ€ç»ˆæ‰¾åˆ°æœ€ä¼˜çš„ç­–ç•¥ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
åœ¨**åªèƒ½æ¨ªåˆ‡æˆ–ç«–åˆ‡**çš„è§„åˆ™ä¸‹ï¼ŒæŠŠNÃ—Mçš„å·§å…‹åŠ›åˆ‡æˆNÃ—Mä¸ª1Ã—1çš„å°å—ï¼Œæ¯æ¬¡åˆ‡å‰²çš„ä»£ä»·ä¸º**è¢«åˆ‡æ•´å—**ä¸Šè‘¡è„å¹²ä¹‹å’Œï¼Œæ±‚**æœ€å°æ€»ä»£ä»·**ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šåŒºé—´DPã€è®°å¿†åŒ–æœç´¢ã€äºŒç»´å‰ç¼€å’Œ

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

| çº¿ç´¢ | å‘ç°å†…å®¹ | å¯¹åº”ç­–ç•¥ |
|---|---|---|
| **é—®é¢˜ç›®æ ‡** | æœ€å°åŒ–æ€»ä»£ä»· â†’ **æœ€ä¼˜åŒ–é—®é¢˜** | åŠ¨æ€è§„åˆ’/è®°å¿†åŒ–æœç´¢ |
| **æ“ä½œæ–¹å¼** | åªèƒ½æ¨ª/ç«–åˆ‡ â†’ **åŒºé—´åˆ†å‰²** | åŒºé—´DPç»å…¸æ¨¡å‹ |
| **æ•°æ®è§„æ¨¡** | N,M â‰¤ 50 â†’ **O(Nâ´Â·N)**â‰ˆ6Ã—10â¶ å¯æ¥å— | å››ç»´çŠ¶æ€+æšä¸¾åˆ‡ç‚¹ |
| **ä»£ä»·è®¡ç®—** | éœ€è¦å¿«é€Ÿæ±‚å­çŸ©é˜µå’Œ â†’ **äºŒç»´å‰ç¼€å’Œ** | é¢„å¤„ç†O(1)æŸ¥è¯¢ |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1. çœ‹åˆ°â€œæœ€å°ä»£ä»·â€+â€œåˆ†å‰²åŒºé—´â€ï¼Œå¤§è„‘ç«‹åˆ»è”æƒ³åˆ°**åŒºé—´DP**ã€‚  
> 2. æ¯æ¬¡åªèƒ½æ¨ªåˆ‡æˆ–ç«–åˆ‡ï¼Œæ„å‘³ç€**ä¸€ä¸ªåŒºé—´å¯ä»¥è¢«æ‹†æˆä¸¤ä¸ªå­åŒºé—´**ï¼Œç¬¦åˆåŒºé—´DPçš„â€œåˆå¹¶â€æ€æƒ³ã€‚  
> 3. æ•°æ®è§„æ¨¡50Ã—50Ã—50Ã—50â‰ˆ6Ã—10â¶ï¼Œå†ä¹˜ä¸Šæšä¸¾åˆ‡ç‚¹çš„50æ¬¡ï¼Œâ‰ˆ3Ã—10â¸ï¼Œåœ¨5sæ—¶é™+è®°å¿†åŒ–å‰ªæä¸‹å®Œå…¨å¯è¡Œã€‚  
> 4. **äºŒç»´å‰ç¼€å’Œ**æ˜¯è®¡ç®—å­çŸ©é˜µå’Œçš„åˆ©å™¨ï¼Œå¯ä»¥æŠŠO(NÂ²)æ±‚å’Œå˜æˆO(1)ã€‚  

**ç»“è®º**ï¼šä½¿ç”¨**å››ç»´çŠ¶æ€**è¡¨ç¤ºå­çŸ©é˜µï¼Œ**è®°å¿†åŒ–æœç´¢**å®ç°åŒºé—´DPï¼Œ**äºŒç»´å‰ç¼€å’Œ**ä¼˜åŒ–æ±‚å’Œï¼Œå³å¯ä¼˜é›…ACï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> ä»¥ä¸‹é¢˜è§£å‡â‰¥4æ˜Ÿï¼Œå·²æŒ‰å¯å‘æ€§æ’åºï¼Œä¿ç•™æœ€ç²¾åçš„5ä»½ã€‚

---

### é¢˜è§£1ï¼šSuperJvRuoï¼ˆèµ6ï¼‰â€”â€”ç®€æ´è®°å¿†åŒ–æ¨¡æ¿

**ç‚¹è¯„**ï¼š  
- çŠ¶æ€è®¾è®¡æç®€æ´ï¼š`f[u][d][l][r]` è¡¨ç¤ºå­çŸ©é˜µæœ€å°ä»£ä»·ã€‚  
- é€’å½’è¾¹ç•Œ`u==d && l==r`ç›´æ¥è¿”å›0ï¼Œé¿å…å¤šä½™è®¡ç®—ã€‚  
- ç”¨`LLONG_MAX`åˆå§‹åŒ–ï¼Œé˜²æ­¢æº¢å‡ºã€‚  
- å‰ç¼€å’Œ`sum`æ•°ç»„ä¸€è¡Œä»£ç å®Œæˆé¢„å¤„ç†ï¼Œæ¨¡æ¿çº§ç¤ºèŒƒã€‚

---

### é¢˜è§£2ï¼šchinuyaï¼ˆèµ4ï¼‰â€”â€”å›¾æ–‡å¹¶èŒ‚çš„å…¥é—¨ä¹‹é€‰

**ç‚¹è¯„**ï¼š  
- ç”¨ä¸¤å¹…æ‰‹ç»˜å›¾ç›´è§‚å±•ç¤ºâ€œæ¨ªåˆ‡â€å’Œâ€œç«–åˆ‡â€ï¼Œå¯¹åˆå­¦è€…æå…¶å‹å¥½ã€‚  
- ä»£ç ä¸­åŠ å…¥ä¸‡èƒ½å¤´æ–‡ä»¶`bits/stdc++.h`ï¼Œé™ä½è¯­æ³•é—¨æ§›ã€‚  
- é¢å¤–è¡¥å……â€œäºŒç»´å‰ç¼€å’Œâ€çš„å›¾å½¢æ¨å¯¼ï¼Œå¸®åŠ©ç†è§£å‡ ä½•æ„ä¹‰ã€‚

---

### é¢˜è§£3ï¼šCreatesjï¼ˆèµ4ï¼‰â€”â€”æ­£ç»ŸDPå†™æ³•

**äº®ç‚¹**ï¼š  
- å°†è®°å¿†åŒ–æ”¹å†™ä¸º**è‡ªåº•å‘ä¸ŠDP**ï¼Œ`f[i][j][k][l]`ç”¨å››é‡å¾ªç¯æšä¸¾å­çŸ©é˜µå¤§å°å’Œå·¦ä¸Šè§’åæ ‡ï¼Œé¿å…é€’å½’å¼€é”€ã€‚  
- ç”¨`register`å…³é”®å­—å’Œå¾ªç¯å±•å¼€ä¼˜åŒ–å¸¸æ•°ï¼Œä¸å¼€O2ä¹Ÿèƒ½è¿‡ã€‚  
- ä»£ç é£æ ¼è§„èŒƒï¼Œå˜é‡å`k,l`è¡¨ç¤ºå­çŸ©é˜µå®½é«˜ï¼Œæ˜“äºç»´æŠ¤ã€‚

---

### é¢˜è§£4ï¼šKonnyaku_ljcï¼ˆèµ4ï¼‰â€”â€”â€œå¸æ°§â€èƒŒåçš„æ•…äº‹

**äº®ç‚¹**ï¼š  
- çœŸå®è®°å½•ä»**TLEâ†’å¼€O2â†’AC**çš„è°ƒè¯•å†ç¨‹ï¼Œæé†’å­¦ä¹ è€…**å‰ç¼€å’Œ+è®°å¿†åŒ–**çš„é‡è¦æ€§ã€‚  
- ä½¿ç”¨`bool b[][][][]`æ ‡è®°æ˜¯å¦è®¡ç®—è¿‡ï¼Œé¿å…é‡å¤é€’å½’ï¼Œå‰ªææ•ˆæœæ˜æ˜¾ã€‚  
- ç»“å°¾ä¸€å¥â€œæˆ‘çˆ±è®°æœâ€ï¼Œå¹½é»˜ä¸­å¸¦ç€å¯¹ç®—æ³•çš„çƒ­æƒ…ã€‚

---

### é¢˜è§£5ï¼šæ·¸æ¢£lingï¼ˆèµ2ï¼‰â€”â€”åˆ†æ­¥å¾—åˆ†ç­–ç•¥

**äº®ç‚¹**ï¼š  
- å°†è§£é¢˜è¿‡ç¨‹æ‹†æˆ**24â†’76â†’100pts**ä¸‰é˜¶æ®µï¼Œå¯¹åº”**æš´åŠ›â†’è®°å¿†åŒ–â†’å‰ç¼€å’Œä¼˜åŒ–**ï¼Œå¸®åŠ©å­¦ä¹ è€…ç†è§£å¦‚ä½•é€æ­¥æ‹¿åˆ†ã€‚  
- æ¯é˜¶æ®µä»£ç ç‹¬ç«‹ï¼Œä¾¿äºå¯¹ç…§å­¦ä¹ ä¼˜åŒ–æ€è·¯ã€‚  

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

---

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•ï¼‰

| å…³é”®ç‚¹ | åˆ†æ | ğŸ’¡å­¦ä¹ ç¬”è®° |
|---|---|---|
| **çŠ¶æ€å®šä¹‰** | `dp[x1][y1][x2][y2]`è¡¨ç¤ºå·¦ä¸Šè§’(x1,y1)ã€å³ä¸‹è§’(x2,y2)å­çŸ©é˜µçš„æœ€å°ä»£ä»· | å››ç»´çŠ¶æ€æ˜¯åŒºé—´DPåœ¨äºŒç»´çš„â€œè‡ªç„¶â€æ‰©å±• |
| **è½¬ç§»æ–¹ç¨‹** | æšä¸¾æ‰€æœ‰æ¨ªåˆ‡/ç«–åˆ‡ä½ç½®ï¼Œå–ä¸¤åŠå­çŸ©é˜µä»£ä»·å’Œçš„æœ€å°å€¼ï¼Œå†åŠ ä¸Šå½“å‰å­çŸ©é˜µå’Œ | åŒºé—´DPç»å…¸â€œæ‹†åˆ†-åˆå¹¶â€æ€æƒ³ |
| **å‰ç¼€å’Œä¼˜åŒ–** | é¢„å¤„ç†`sum[i][j]`ï¼Œå­çŸ©é˜µå’ŒO(1)è®¡ç®—ï¼š`sum[x2][y2]-sum[x1-1][y2]-sum[x2][y1-1]+sum[x1-1][y1-1]` | äºŒç»´å‰ç¼€å’Œæ˜¯åŒºé—´DPåœ¨çŸ©é˜µåœºæ™¯çš„å¿…å¤‡æŠ€èƒ½ |

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¾—åˆ†é¢„æœŸ |
|---|---|---|---|---|
| **æš´åŠ›DFS** | æšä¸¾æ‰€æœ‰åˆ‡æ³• | æ€è·¯ç›´è§‚ | æŒ‡æ•°çº§å¤æ‚åº¦ï¼ŒN=M=7å°±TLE | 25pts |
| **è®°å¿†åŒ–æœç´¢** | å››ç»´çŠ¶æ€+å‰ªæ | ä»£ç çŸ­ï¼Œæ€ç»´é‡ä½ | å››ç»´æ•°ç»„è®¿é—®ç•¥æ…¢ | 100ptsï¼ˆéœ€å‰ç¼€å’Œï¼‰ |
| **è‡ªåº•å‘ä¸ŠDP** | å››é‡å¾ªç¯æšä¸¾å­çŸ©é˜µ | æ— é€’å½’å¼€é”€ï¼Œå¸¸æ•°æ›´å° | ä»£ç è¾ƒé•¿ï¼Œæ˜“å†™é”™è¾¹ç•Œ | 100pts |
| **å“ˆå¸Œé™ç»´** | æŠŠå››ç»´æ˜ å°„æˆä¸€ç»´ | å‡å°‘Cache Miss | å®ç°å¤æ‚ï¼Œæ”¶ç›Šæœ‰é™ | 100ptsï¼ˆé”¦ä¸Šæ·»èŠ±ï¼‰ |

---

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€

> 1. **æš´åŠ›DFS**ä¼šæšä¸¾æ‰€æœ‰2^(N+M)ç§åˆ‡æ³•ï¼Œåƒæ— å¤´è‹è‡ã€‚  
> 2. **å‘ç°é‡å¤å­é—®é¢˜**ï¼šåŒä¸€ä¸ªå­çŸ©é˜µè¢«åå¤è®¡ç®—ã€‚  
> 3. **å¼•å…¥è®°å¿†åŒ–**ï¼šç”¨å››ç»´æ•°ç»„ç¼“å­˜ç»“æœï¼Œå‰ªæåå¤æ‚åº¦é™è‡³O(NÂ²MÂ²Â·(N+M))ã€‚  
> 4. **å‰ç¼€å’Œä¼˜åŒ–**ï¼šæŠŠæ¯æ¬¡æ±‚å’Œçš„O(NÂ²)å˜æˆO(1)ï¼Œæ€»å¤æ‚åº¦å†é™ä¸€ä¸ªNå€ã€‚  

ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼šåŒºé—´DPçš„æ ¸å¿ƒæ˜¯**çŠ¶æ€æ‹†åˆ†+åˆå¹¶æœ€ä¼˜**ï¼ŒäºŒç»´åœºæ™¯ä¸‹åŠ¡å¿…é…åˆ**äºŒç»´å‰ç¼€å’Œ**ï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

---

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ

**è¯´æ˜**ï¼šç»¼åˆå¤šä»½é¢˜è§£ï¼Œæç‚¼å‡º**æœ€ç®€æ´å¯AC**çš„æ¨¡æ¿ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 55;
int n, m, a[N][N], sum[N][N];
long long f[N][N][N][N];

inline int area(int x1, int y1, int x2, int y2) {
    return sum[x2][y2] - sum[x1-1][y2] - sum[x2][y1-1] + sum[x1-1][y1-1];
}

long long dfs(int x1, int y1, int x2, int y2) {
    if (f[x1][y1][x2][y2] != -1) return f[x1][y1][x2][y2];
    if (x1 == x2 && y1 == y2) return 0;
    long long res = 1e18;
    // æ¨ªåˆ‡
    for (int i = x1; i < x2; ++i)
        res = min(res, dfs(x1, y1, i, y2) + dfs(i+1, y1, x2, y2));
    // ç«–åˆ‡
    for (int i = y1; i < y2; ++i)
        res = min(res, dfs(x1, y1, x2, i) + dfs(x1, i+1, x2, y2));
    return f[x1][y1][x2][y2] = res + area(x1, y1, x2, y2);
}

int main() {
    scanf("%d%d", &n, &m);
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= m; ++j) {
            scanf("%d", &a[i][j]);
            sum[i][j] = a[i][j] + sum[i-1][j] + sum[i][j-1] - sum[i-1][j-1];
        }
    memset(f, -1, sizeof(f));
    printf("%lld\n", dfs(1, 1, n, m));
    return 0;
}
```

---

### å„é¢˜è§£ç‰‡æ®µèµæ

- **chinuya**ï¼š`ma=min(ma,dfs(...)+dfs(...))` ä¸¤è¡Œä»£ç æ¸…æ™°å±•ç¤ºæ¨ªåˆ‡/ç«–åˆ‡æšä¸¾ã€‚  
- **Createsj**ï¼šå››é‡å¾ªç¯`for(k)for(l)for(i)for(j)`é…åˆ`f[i][j][k][l]`ï¼Œå±•ç¤ºè‡ªåº•å‘ä¸ŠDPçš„â€œå¡«è¡¨â€è¿‡ç¨‹ã€‚  
- **Konnyaku_ljc**ï¼š`b[x1][y1][x2][y2]=1`æ ‡è®°å·²è®¡ç®—ï¼Œé¿å…é‡å¤é€’å½’ï¼Œå‰ªæç²¾é«“ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼š**ã€Šåƒç´ åˆ‡åˆ‡ä¹ã€‹**  
8ä½åƒç´ é£æ ¼ï¼Œæ¨¡æ‹Ÿâ€œä¸€åˆ€åˆ‡â€å·§å…‹åŠ›ï¼

### æ ¸å¿ƒæ¼”ç¤ºï¼š  
- **åœºæ™¯**ï¼š50Ã—50åƒç´ ç½‘æ ¼ï¼Œæ¯ä¸ªåƒç´ å—é¢œè‰²æ·±æµ…è¡¨ç¤ºè‘¡è„å¹²æ•°é‡ã€‚  
- **æ“ä½œ**ï¼š  
  1. ç‚¹å‡»â€œæ¨ªåˆ‡â€/â€œç«–åˆ‡â€æŒ‰é’®ï¼Œå‡ºç°é—ªçƒçš„**åƒç´ åˆ€å…‰**ã€‚  
  2. åˆ€å…‰è½ä¸‹åï¼Œå­çŸ©é˜µé«˜äº®æ˜¾ç¤ºï¼Œå·¦ä¸Šè§’å¼¹å‡ºâ€œä»£ä»·=XXè‘¡è„å¹²â€çš„åƒç´ å¯¹è¯æ¡†ã€‚  
  3. é€’å½’è¿›å…¥å­çŸ©é˜µï¼Œé‡å¤æ­¥éª¤ï¼Œç›´åˆ°1Ã—1å°å—å‡ºç°â€œå®â€çš„éŸ³æ•ˆã€‚  
- **æ§åˆ¶é¢æ¿**ï¼š  
  - å•æ­¥/è‡ªåŠ¨æ’­æ”¾ï¼ˆå¯è°ƒé€Ÿæ»‘å—ï¼‰ã€‚  
  - é‡ç½®æŒ‰é’®å›åˆ°å®Œæ•´å·§å…‹åŠ›ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
  - æ¯å®Œæˆä¸€æ¬¡åˆ‡å‰²ï¼Œæ’­æ”¾8ä½â€œå’”å—’â€éŸ³æ•ˆã€‚  
  - æœ€ç»ˆ1Ã—1å…¨éƒ¨åˆ‡å®Œï¼Œæ’­æ”¾â€œèƒœåˆ©â€BGMï¼Œåƒç´ çƒŸèŠ±åº†ç¥ï¼

### æŠ€æœ¯å®ç°ï¼š  
- **Canvasç»˜åˆ¶**ï¼šç”¨`fillRect`ç»˜åˆ¶åƒç´ å—ï¼Œ`setTimeout`æ§åˆ¶åŠ¨ç”»å¸§ã€‚  
- **éŸ³æ•ˆ**ï¼šWeb Audio APIç”Ÿæˆ8ä½æ–¹æ³¢â€œå®â€â€œå’”å—’â€ã€‚  
- **çŠ¶æ€åŒæ­¥**ï¼šå·¦ä¾§å®æ—¶æ˜¾ç¤ºå½“å‰`dp[x1][y1][x2][y2]`å€¼ï¼Œå¸®åŠ©ç†è§£è®°å¿†åŒ–ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»  
åŒºé—´DPçš„â€œæ‹†åˆ†-åˆå¹¶â€æ€æƒ³é€‚ç”¨äºï¼š  
1. **çŸ³å­åˆå¹¶ï¼ˆP1880ï¼‰**ï¼šä¸€ç»´åŒºé—´DPï¼Œç¯çŠ¶å¤„ç†ã€‚  
2. **æ£‹ç›˜åˆ†å‰²ï¼ˆP1436ï¼‰**ï¼šäºŒç»´åŒºé—´DPï¼Œå¸¦â€œåˆ‡æˆKå—â€é™åˆ¶ã€‚  
3. **æœ€ä¼˜çŸ©é˜µè¿ä¹˜ï¼ˆP1004ï¼‰**ï¼šä¸‰ç»´åŒºé—´DPï¼ŒçŸ©é˜µç»´åº¦åŒ¹é…ã€‚

### æ´›è°·æ¨èç»ƒä¹   
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| **P1880** | çŸ³å­åˆå¹¶ï¼Œä¸€ç»´åŒºé—´DPå…¥é—¨ï¼Œç†è§£â€œæ‹†åˆ†-åˆå¹¶â€æ ¸å¿ƒã€‚ |
| **P1436** | æ£‹ç›˜åˆ†å‰²ï¼ŒäºŒç»´åŒºé—´DPè¿›é˜¶ï¼Œéœ€å¤„ç†â€œåˆ‡æˆKå—â€é¢å¤–é™åˆ¶ã€‚ |
| **P1004** | æœ€ä¼˜çŸ©é˜µè¿ä¹˜ï¼Œä¸‰ç»´åŒºé—´DPï¼Œå­¦ä¹ ç»´åº¦æ‰©å±•æŠ€å·§ã€‚ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **Konnyaku_ljc**ï¼šâ€œæˆ‘æœ€åˆæš´åŠ›DFS TLEï¼Œå¼€O2åACï¼Œä½†æ„è¯†åˆ°**å‰ç¼€å’Œ+è®°å¿†åŒ–**æ‰æ˜¯æ­£é“ã€‚è°ƒè¯•æ—¶æ‰“å°ä¸­é—´`dp`å€¼ï¼Œå‘ç°å¤§é‡é‡å¤è®¡ç®—ï¼Œåšå®šäº†è®°å¿†åŒ–çš„å†³å¿ƒã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šè°ƒè¯•æ—¶æ‰“å°å­çŸ©é˜µå’Œä¸`dp`å€¼ï¼Œèƒ½å¿«é€Ÿå®šä½é‡å¤è®¡ç®—ï¼Œæ˜¯åŒºé—´DPè°ƒè¯•çš„â€œé»„é‡‘æ³•åˆ™â€ï¼

---

<conclusion>
æœ¬æ¬¡ã€ŠIOI 2009 Raisinsã€‹ä¹‹æ—…åˆ°æ­¤ç»“æŸï¼æˆ‘ä»¬å­¦ä¼šäº†ç”¨**å››ç»´åŒºé—´DP+è®°å¿†åŒ–+å‰ç¼€å’Œ**ä¼˜é›…è§£å†³äºŒç»´åˆ†å‰²é—®é¢˜ã€‚è®°ä½ï¼šé‡åˆ°â€œæœ€å°ä»£ä»·åˆ†å‰²â€å…ˆæƒ³åŒºé—´DPï¼ŒäºŒç»´åœºæ™¯åŠ¡å¿…å‰ç¼€å’Œä¼˜åŒ–ã€‚ä¸‹æ¬¡æ¢é™©è§ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š78.47ç§’
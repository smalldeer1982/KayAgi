# é¢˜ç›®ä¿¡æ¯

# å° B çš„é¢åŒ…

## é¢˜ç›®èƒŒæ™¯

æœ¬é¢˜æ˜¯ä¸€é“**å‡½æ•°å¼äº¤äº’é¢˜**ã€‚

å° B è·å¾—äº†å¾ˆå¤šé¢åŒ…ï¼Œå° Y å¾ˆæ„¤æ€’ï¼Œä»–æƒ³æŠ¢å¤ºé¢åŒ…ã€‚

å° Y æå‡ºè¦å’Œå° B ç©ä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆï¼Œå¦‚æœå° B è¾“äº†ï¼Œå° B å°±è¦è¢«æŠ¢èµ°æ‰€æœ‰é¢åŒ…ã€‚

å° B è¿˜è¦åˆ°ã€æ•°æ®åˆ é™¤ã€‘æ±Ÿè¾¹æ•£æ­¥ï¼Œæ‰€ä»¥ä»–æŠŠè¿™ä¸ªä»»åŠ¡äº¤ç»™äº†ä½ ã€‚

èªæ˜çš„ä½ èƒ½å¸®å° B å®ˆå«ä»–å®è´µçš„é¢åŒ…å—ï¼Ÿ

## é¢˜ç›®æè¿°

**æœ¬é¢˜å»ºè®®ä½¿ç”¨ `c++` è¯­è¨€ç¼–ç¨‹**ã€‚

å° Y æŠŠ $9$ ä¸ªé¢åŒ…ä¾æ¬¡æ”¾åœ¨äº†æ¡Œå­ä¸Šï¼Œç¬¬ $i$ ä¸ªé¢åŒ…çš„è´¨é‡ä¸º $i$ã€‚

å° Y ä¸ä½ è½®æµé€‰å–é¢åŒ…ï¼Œè°é€‰å–çš„é¢åŒ…ä¸­ï¼Œä»»æ„ä¸‰ä¸ªé¢åŒ…çš„æ€»è´¨é‡å…ˆæ°å¥½è¾¾åˆ° $15$ï¼Œè°å°±è·èƒœï¼Œå¦å¤–ä¸€æ–¹åˆ™è½è´¥ã€‚**æ¯ä¸ªé¢åŒ…åªèƒ½å–ä¸€æ¬¡ï¼Œä¸€ä¸ªäººå–äº†æŸä¸ªé¢åŒ…åå¦ä¸€ä¸ªäººå°±ä¸èƒ½å†é€‰å–äº†ï¼Œé€‰å–é¢åŒ…åä¸èƒ½å†æ”¾å›**ã€‚

å¦‚æœæœ€åé¢åŒ…å…¨éƒ¨é€‰å–å®ŒååŒæ–¹æœªå‡è¾¾åˆ°ï¼Œåˆ™ä¸ºå¹³å±€ã€‚

---

æœ¬é¢˜ä¸­ï¼Œä½ éœ€è¦ä¸”åªéœ€è¦å®ç°ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°ï¼ˆå¯ä»¥åœ¨å…¶ä¸­è°ƒç”¨æˆ–è®¿é—®ä½ çš„è‡ªå†™å‡½æ•°æˆ–å…¨å±€å˜é‡ï¼‰ï¼š

```cpp
extern "C" int choose(int x);
extern "C" void init();
extern "C" void newgame(bool f);
/* æ³¨æ„ä»¥ä¸Šä¸‰ä¸ªå‡½æ•°ä¹‹å‰çš„ extern "C" ä¸å¯çœç•¥ */
```

è¯„æµ‹æ—¶ï¼Œäº¤äº’åº“å°†é¦–å…ˆè°ƒç”¨ä¸€æ¬¡ä½ æ‰€å®ç°çš„ `init()` å‡½æ•°ã€‚`init()` å‡½æ•°çš„ä½œç”¨ä¸ºæ–¹ä¾¿ä½ æœ€å¼€å§‹åˆå§‹åŒ–ï¼Œä¹‹åä¸ä¼šå†æ¬¡è°ƒç”¨ï¼Œå¦‚æœä½ ä¸éœ€è¦åˆå§‹åŒ–ä¹Ÿè¯·åŠ å…¥ `extern "C" void init() {}`ã€‚

æ¥ä¸‹æ¥äº¤äº’åº“ä¼šè°ƒç”¨ä½ æ‰€å®ç°çš„ `newgame(bool f)` å‡½æ•°ï¼Œäº¤äº’åº“è°ƒç”¨ `newgame(bool f)` å‡½æ•°è¡¨ç¤ºå¼€å§‹ä¸€åœºæ–°æ¸¸æˆï¼Œä¼ å…¥çš„ `f` è‹¥ç­‰äº $1$ è¡¨ç¤ºæ˜¯ç”±äº¤äº’åº“å…ˆé€‰æ‹©ï¼Œå¦åˆ™ç”±ä½ å…ˆé€‰æ‹©ã€‚

æ¥ä¸‹æ¥äº¤äº’åº“å°†ä¼šä¸æ–­è°ƒç”¨ä½ å®ç°çš„ `choose(int x)` å‡½æ•°ï¼Œä¼ å…¥çš„ $x$ è¡¨ç¤ºå° Y é€‰å–äº†ç¬¬ $x$ ä¸ªé¢åŒ…ï¼Œæ­¤å‡½æ•°è¿è¡Œç»“æŸåä½ éœ€è¦è¿”å›ä¸€ä¸ªæ•´æ•° $y(1 \le y \le 9)$ï¼Œè¡¨ç¤ºä½ é€‰å–äº†ç¬¬ $y$ ä¸ªé¢åŒ…ï¼Œå³ï¼š

```cpp
extern "C" int choose(int x) { /*xä¸ºäº¤äº’åº“é€‰å–çš„é¢åŒ… */
    /* ä½ çš„ä»£ç  */
    return y; /* yä¸ºä½ é€‰å–çš„é¢åŒ… */
}
```

ç‰¹åˆ«åœ°ï¼Œå½“ä¼ å…¥çš„ $x=0$ æ—¶ï¼Œè¡¨ç¤ºæ˜¯ç”±ä½ å…ˆé€‰å–é¢åŒ…ã€‚å¦‚æœä½  `choose(int x)` å‡½æ•°è¿”å›äº†ä¸åˆæ³•çš„å€¼ï¼Œè¯¥åœºæ¸¸æˆç«‹å³ç»“æŸï¼Œä¸”ç»“æœä¸ºäº¤äº’åº“è·èƒœã€‚

ä¸åœè°ƒç”¨ `choose(int x)` å‡½æ•°ç›´åˆ°æŸä¸€æ–¹èƒœåˆ©æˆ–å¹³å±€ï¼Œå³è¯¥åœºæ¸¸æˆç»“æŸã€‚æ¥ç€ï¼Œäº¤äº’åº“åˆä¼šè°ƒç”¨ `newgame(bool f)` å‡½æ•°ï¼Œå¼€å§‹ä¸€åœºæ–°æ¸¸æˆã€‚äº¤äº’åº“ä¸€å…±ä¼šè°ƒç”¨ $1800$ æ¬¡ `newgame(bool f)` å‡½æ•°ï¼Œè¡¨ç¤ºè¿›è¡Œ $1800$ åœºæ¸¸æˆã€‚

è¯¦ç»†å¯æŸ¥çœ‹`template_game.cpp`ã€‚

---

åœ¨é™„åŠ æ–‡ä»¶ä¸­ï¼Œæœ‰ä»¥ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼š

`template_game.cpp`â€”â€”ä½ å°†åœ¨å…¶ä¸­å®ç°ä¸Šè¿°ä¸‰ä¸ªå‡½æ•°ï¼Œå†…å«è¯¦ç»†æ³¨é‡Šï¼Œä¹ŸåŒ…æ‹¬äº¤äº’åº“å‚è€ƒä»£ç ï¼Œè¯·ä»”ç»†é˜…è¯»ï¼Œ**å»ºè®®åœ¨æ­¤åŸºç¡€ä¸Šç­”é¢˜**ã€‚

æœ¬åœ°å¯ç›´æ¥åœ¨ IDE ä¸­ç¼–è¯‘ã€‚

## è¯´æ˜/æç¤º

**ä¿è¯äº¤äº’åº“é‡‡ç”¨å®Œå…¨éšæœºé€‰å–ç­–ç•¥ï¼Œå³æ¯æ¬¡å‡ä¼šä»æœªé€‰å–çš„é¢åŒ…ä¸­ç­‰æ¦‚ç‡é€‰å–ä¸€ä¸ªé¢åŒ…**

$1800$ åœºæ¸¸æˆä¸­ï¼Œæœ‰ $600$ åœºæ˜¯ç”±ä½ çš„ç¨‹åºå…ˆé€‰å–ï¼Œæœ‰ $1200$ åœºæ˜¯ç”±äº¤äº’åº“å…ˆé€‰å–ã€‚

å…·ä½“æ¥è¯´ï¼Œå¯¹äºç¬¬ $i$ åœºæ¸¸æˆï¼Œè‹¥ $i \bmod 3 =0$ ï¼Œåˆ™ç”±ä½ çš„ç¨‹åºå…ˆé€‰å–ï¼Œå¦åˆ™ç”±äº¤äº’åº“å…ˆé€‰å–ã€‚

æœ¬é¢˜é¦–å…ˆä¼šå—åˆ°å’Œä¼ ç»Ÿé¢˜ç›¸åŒçš„é™åˆ¶ï¼Œä¾‹å¦‚ç¼–è¯‘é”™è¯¯ä¼šå¯¼è‡´æ•´é“é¢˜ç›®å¾— $0$ åˆ†ï¼Œè¿è¡Œæ—¶é”™è¯¯ã€è¶…è¿‡æ—¶é—´é™åˆ¶ã€è¶…è¿‡ç©ºé—´é™åˆ¶ç­‰ä¼šå¯¼è‡´ç›¸åº”æµ‹è¯•ç‚¹å¾— $0$ åˆ†ç­‰ã€‚

ä½ åªèƒ½è®¿é—®è‡ªå·±å®šä¹‰çš„å’Œäº¤äº’åº“ç»™å‡ºçš„å˜é‡åŠå…¶å¯¹åº”çš„å†…å­˜ç©ºé—´ï¼Œå°è¯•è®¿é—®å…¶ä»–ç©ºé—´å°†å¯èƒ½å¯¼è‡´ç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œé”™è¯¯ã€‚

**æœ¬é¢˜åªæœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹ï¼Œä½ çš„å¾—åˆ†æŒ‰å¦‚ä¸‹è§„å®šåˆ¤å®šï¼š**

è®¾ä½ ç¨‹åºè·èƒœäº† $x$ åœºï¼Œå¹³å±€ä¸º $y$ åœºï¼Œä½ æœ€ç»ˆçš„å¾—åˆ†ç”¨è®¡åˆ†å‡½æ•° $f(x,y)$ è¡¨ç¤ºä¸ºï¼š

$$
f(x,y)=\lfloor (\frac{x+y}{6}-200) \cdot \min((\frac{x}{x + y})^2+0.2,1) \rfloor
$$

æœ€ä½å¾—åˆ†ä¸º $0$ åˆ†ã€‚

**å®é™…è¯„æµ‹çš„äº¤äº’åº“ä¸ä¸‹å‘çš„ä¸ç›¸åŒï¼Œé€‰æ‰‹çš„ç¨‹åºåº”ä¸ä¾èµ–äºäº¤äº’åº“å®ç°**ã€‚

è¯¦ç»†å¯æŸ¥çœ‹`template_game.cpp`ã€‚

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šå° B çš„é¢åŒ… æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡  
> ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æ **â€œå° B çš„é¢åŒ…â€** è¿™é“ **å‡½æ•°å¼äº¤äº’é¢˜**ã€‚  
> å®ƒçœ‹ä¼¼åœ¨â€œæŠ¢é¢åŒ…â€ï¼Œå®åˆ™æ˜¯ä¸€åœº **äº•å­—æ£‹çš„å˜å½¢åšå¼ˆ**ï¼  
> æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æŠŠâ€œä¸‰ä¸ªæ•°ä¹‹å’Œ=15â€çš„è°œé¢˜ï¼Œè½¬åŒ–ä¸º **åƒç´ æ£‹ç›˜ä¸Šçš„å¯¹å¼ˆ**ï¼Œå¹¶ç»™å‡º **å¿…èƒœç­–ç•¥**ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
> **æŠŠâ€œä»»æ„ä¸‰ä¸ªé¢åŒ…è´¨é‡ä¹‹å’Œ=15â€è¿™ä¸€æ¡ä»¶ï¼Œè½¬åŒ–ä¸ºäº•å­—æ£‹çš„â€œä¸€æ¡çº¿=15â€è§„åˆ™**ï¼Œå¹¶åœ¨ä¸€ç§’é’Ÿå†…åšå‡ºå¿…èƒœå†³ç­–ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š**åšå¼ˆè®º** Â· **çŠ¶æ€å‹ç¼©** Â· **è®°å¿†åŒ–æœç´¢** Â· **äº•å­—æ£‹å¿…èƒœè¡¨**

---

### ğŸ—£ï¸ åˆæ­¥åˆ†æ

1. **é—®é¢˜æœ¬è´¨**ï¼š  
   - é¢åŒ…ç¼–å· 1~9ï¼Œè´¨é‡å³ç¼–å·å€¼ã€‚  
   - ä»»å–ä¸‰ä¸ªé¢åŒ…ï¼Œè‹¥è´¨é‡ä¹‹å’Œ=15ï¼Œåˆ™è·èƒœã€‚  
   - ç»è¿‡ **é­”æ–¹é˜µæ„é€ **ï¼ˆè§ä¸‹è¡¨ï¼‰ï¼Œå‘ç° **ä»»æ„ä¸€æ¡ç›´çº¿ï¼ˆæ¨ªã€ç«–ã€æ–œï¼‰ä¹‹å’Œå‡ä¸º15**ã€‚  
     äºæ˜¯ï¼Œæ¸¸æˆç­‰ä»·äº **åœ¨ 3Ã—3 æ£‹ç›˜ä¸Šï¼ŒåŒæ–¹è½®æµä¸‹å­ï¼Œå…ˆè¿æˆä¸€æ¡çº¿è€…èƒœ**ã€‚

   | 2 | 9 | 4 |
   | 7 | 5 | 3 |
   | 6 | 1 | 8 |

2. **æ€è·¯æ¼”è¿›**  
   - **æš´åŠ›æœç´¢**ï¼šæšä¸¾æ‰€æœ‰ 9! å±€é¢ï¼ŒæŒ‡æ•°çº§ä¸å¯è¡Œã€‚  
   - **äº•å­—æ£‹ç­–ç•¥**ï¼šäº•å­—æ£‹å·²è¢«å®Œå…¨ç ´è§£ï¼Œå…ˆæ‰‹/åæ‰‹å‡æœ‰ **å¿…èƒœæˆ–å¿…å’Œè¡¨**ã€‚  
   - **çŠ¶æ€å‹ç¼© + è®°å¿†åŒ–**ï¼šæŠŠæ£‹ç›˜å‹æˆ 9 ä½ä¸‰è¿›åˆ¶æ•°ï¼ˆ0ç©ºï¼Œ1å¯¹æ‰‹ï¼Œ2è‡ªå·±ï¼‰ï¼Œé¢„è®¡ç®—æ‰€æœ‰çŠ¶æ€çš„èƒœè´Ÿå€¼ï¼ŒæŸ¥è¯¢ O(1)ã€‚

3. **æ ¸å¿ƒç®—æ³•**  
   > åƒâ€œåƒç´ æ£‹ç›˜â€ä¸€æ ·ï¼ŒæŠŠé¢åŒ…æ˜ å°„åˆ° 3Ã—3 æ ¼å­ï¼Œç›´æ¥è°ƒç”¨ **äº•å­—æ£‹å¿…èƒœè¡¨**ã€‚  
   > è¿™å°±æ˜¯æœ¬é¢˜çš„â€œé’¥åŒ™â€ã€‚

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

| çº¿ç´¢ | ä¾¦æ¢ç¬”è®° |
|---|---|
| **çº¿ç´¢1ï¼šç›®æ ‡=15** | â€œä»»æ„ä¸‰æ•°ä¹‹å’Œ=15â€ â†’ è”æƒ³åˆ° **é­”æ–¹é˜µ** ä¸ **äº•å­—æ£‹** çš„ç›´çº¿å’Œã€‚ |
| **çº¿ç´¢2ï¼šè½®æµé€‰é¢åŒ…** | è§„åˆ™ä¸äº•å­—æ£‹å®Œå…¨ä¸€è‡´ï¼šåŒæ–¹äº¤æ›¿è½å­ï¼Œä¸å¯é‡å¤ã€‚ |
| **çº¿ç´¢3ï¼šæ•°æ®è§„æ¨¡=9** | 9 ä¸ªé¢åŒ… â†’ 3Ã—3 æ£‹ç›˜ï¼ŒçŠ¶æ€æ•° 3â¹ = 19683ï¼Œæå°ï¼Œ**å¯å…¨é‡é¢„å¤„ç†**ã€‚ |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1. å‘ç°â€œ15â€ â†’ æƒ³åˆ°é­”æ–¹é˜µ â†’ å‘ç°äº•å­—æ£‹ç­‰ä»·ã€‚  
> 2. äº•å­—æ£‹å·²è¢«å®Œå…¨ç ´è§£ï¼Œåªéœ€ **é¢„è®¡ç®—å¿…èƒœè¡¨**ã€‚  
> 3. ç”¨ **çŠ¶æ€å‹ç¼©** å­˜å‚¨æ£‹ç›˜ï¼Œç”¨ **è®°å¿†åŒ–æœç´¢** é¢„å¤„ç†æ‰€æœ‰å±€é¢ã€‚  
> 4. äº¤äº’æ—¶ **æŸ¥è¡¨å‡ºæ‹›**ï¼Œå³å¯ç¨³æ“èƒœåˆ¸ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> å‡ºé¢˜äºº **tuxiaobei** çš„æ ‡ç¨‹ï¼ˆèµï¼š12ï¼‰  
> **ç‚¹è¯„**ï¼š  
> - **æ€è·¯æ¸…æ™°**ï¼šç›´æ¥ç‚¹æ˜â€œäº•å­—æ£‹â€ç­‰ä»·ï¼Œçœå»ç»•è·¯ã€‚  
> - **ä»£ç è§„èŒƒ**ï¼šä¸‰è¿›åˆ¶å‹ç¼© + è®°å¿†åŒ–æœç´¢ï¼Œå˜é‡åæ˜“æ‡‚ã€‚  
> - **ç®—æ³•é«˜æ•ˆ**ï¼šé¢„å¤„ç† 2 ä¸‡æ¬¡ dfsï¼Œäº¤äº’æœŸ O(1) æŸ¥è¡¨ã€‚  
> - **å®æˆ˜ä»·å€¼**ï¼šå¯ç›´æ¥åµŒå…¥äº¤äº’æ¨¡æ¿ï¼Œç¨³æ‹¿ 100 åˆ†ã€‚  

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•ï¼‰

| å…³é”®ç‚¹ | åˆ†æä¸å­¦ä¹ ç¬”è®° |
|---|---|
| **1. é­”æ–¹é˜µæ˜ å°„** | å°†é¢åŒ… 1~9 æ˜ å°„åˆ° 3Ã—3 é­”æ–¹é˜µï¼Œä»»æ„ç›´çº¿å’Œ=15ã€‚  
> ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæŠŠæŠ½è±¡æ•°å€¼æ¡ä»¶ **å¯è§†åŒ–** ä¸ºæ£‹ç›˜ç›´çº¿ï¼Œæ˜¯åšå¼ˆé¢˜å¸¸ç”¨æŠ€å·§ã€‚ |
| **2. çŠ¶æ€å‹ç¼©** | æ¯ä¸ªæ ¼å­ 0/1/2 â†’ 9 ä½ä¸‰è¿›åˆ¶æ•´æ•° `key`ï¼ŒçŠ¶æ€ä»… 19683 ç§ã€‚  
> ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šä½è¿ç®—æˆ–è¿›åˆ¶å‹ç¼©å¯å°†æ£‹ç›˜ **å‹æˆä¸€ä¸ªæ•´æ•°**ï¼Œä¾¿äºç´¢å¼•ã€‚ |
| **3. è®°å¿†åŒ–æœç´¢** | `f[key][turn]` è®°å½•â€œå½“å‰æ£‹ç›˜ + è½®åˆ°è°â€ çš„èƒœè´Ÿå€¼ã€‚  
> ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè‡ªé¡¶å‘ä¸‹ dfs + memoï¼Œå®ç°ç®€å•ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚ |

---

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“

- **æŠ€å·§Aï¼šé—®é¢˜è½¬åŒ–**  
  æŠŠâ€œä¸‰æ•°ä¹‹å’Œâ€æ¡ä»¶æ˜ å°„åˆ° **å‡ ä½•ç›´çº¿**ï¼Œç«‹åˆ»æƒ³åˆ°äº•å­—æ£‹ã€‚
- **æŠ€å·§Bï¼šçŠ¶æ€å‹ç¼©**  
  å°æ£‹ç›˜ç”¨ä¸‰è¿›åˆ¶/ä½æ©ç å‹æˆæ•´æ•°ï¼Œç´¢å¼•æ•°ç»„å³å¯ O(1)ã€‚
- **æŠ€å·§Cï¼šé¢„å¤„ç†å¿…èƒœè¡¨**  
  åšå¼ˆè®ºå°çŠ¶æ€é—®é¢˜ï¼Œ**æå‰ dfs æ•´å¼ è¡¨**ï¼Œäº¤äº’æœŸç›´æ¥æŸ¥è¡¨ã€‚

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¾—åˆ†é¢„æœŸ |
|---|---|---|---|---|
| **éšæœºä¹±é€‰** | ä»æœªé€‰é¢åŒ…ä¸­ç­‰æ¦‚ç‡æŒ‘ä¸€ä¸ª | å®ç°æç®€å• | èƒœç‡â‰ˆ50%ï¼Œè¿œä¸è¶³ | 0-10 åˆ† |
| **è´ªå¿ƒå±€éƒ¨æœ€ä¼˜** | æ¯æ­¥é˜»æ­¢å¯¹æ‰‹æˆçº¿ | ä»£ç çŸ­ | æ— æ³•ä¿è¯å…¨å±€æœ€ä¼˜ | 30-60 åˆ† |
| **äº•å­—æ£‹å¿…èƒœè¡¨**ï¼ˆæ¨èï¼‰ | é¢„è®¡ç®—æ‰€æœ‰å±€é¢èƒœè´Ÿå€¼ | å…ˆæ‰‹èƒœç‡>99%ï¼Œåæ‰‹>88% | éœ€å†™é¢„å¤„ç† | **100 åˆ†** |

---

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€

> 1. éšæœºç­–ç•¥ â†’ èƒœç‡ 50% â†’ ä¸å¤Ÿã€‚  
> 2. è´ªå¿ƒæŒ¡æ‹† â†’ ä»æœ‰æ¼æ´ â†’ ä»ä¸å¤Ÿã€‚  
> 3. å‘ç° **äº•å­—æ£‹å®Œå…¨è§£** â†’ åªéœ€ **é¢„è®¡ç®— 19683 ä¸ªçŠ¶æ€** â†’ æŸ¥è¡¨å³å¿…èƒœã€‚  
> 4. **æ€ç»´è·ƒè¿**ï¼šæŠŠæ•°å€¼æ¡ä»¶æ˜ å°„ä¸ºæ£‹ç›˜ç›´çº¿ï¼Œå†ç”¨ **çŠ¶æ€å‹ç¼© + è®°å¿†åŒ–** å®Œæˆé¢„å¤„ç†ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ

- **è¯´æ˜**ï¼šç»¼åˆ tuxiaobei æ ‡ç¨‹ï¼Œæç‚¼å‡º **å¯åµŒå…¥äº¤äº’æ¨¡æ¿** çš„æç®€å®ç°ã€‚  
- **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š

```cpp
#include <bits/stdc++.h>
using namespace std;

const int STATES = 19683;        // 3^9
int Pow10[10], trans[10];        // Pow10[i] = 3^i, trans[é¢åŒ…å·]â†’æ ¼å­å·
struct Node { int win, tot, best; } f[STATES][2];

/* é­”æ–¹é˜µæ˜ å°„è¡¨ï¼ŒæŠŠé¢åŒ…å·æ˜ å°„åˆ° 3Ã—3 æ ¼å­ç¼–å· */
inline void build_trans() {
    int magic[3][3] = {{2,9,4},{7,5,3},{6,1,8}};
    for (int i = 0; i < 3; ++i)
        for (int j = 0; j < 3; ++j)
            trans[magic[i][j]] = i * 3 + j;   // 0~8
}

inline int get_key(const int board[10]) {
    int key = 0;
    for (int i = 1; i <= 9; ++i)
        key = key * 3 + board[i];             // 0ç©º 1å¯¹æ‰‹ 2è‡ªå·±
    return key;
}

/* æ£€æŸ¥æ˜¯å¦æœ‰äººè¿æˆä¸€æ¡çº¿ */
inline int check_win(const int b[10]) {
    const int lines[8][3] = {
        {0,1,2},{3,4,5},{6,7,8},
        {0,3,6},{1,4,7},{2,5,8},
        {0,4,8},{2,4,6}
    };
    for (auto &l : lines) {
        int a = l[0], c = l[1], d = l[2];
        if (b[a+1] && b[a+1] == b[c+1] && b[a+1] == b[d+1])
            return b[a+1];                    // 1å¯¹æ‰‹èƒœ 2è‡ªå·±èƒœ
    }
    bool full = true;
    for (int i = 1; i <= 9; ++i) if (!b[i]) full = false;
    return full ? 3 : 0;                      // 3å¹³å±€
}

/* è®°å¿†åŒ–æœç´¢é¢„å¤„ç† */
void dfs(int key, int turn) {
    if (f[key][turn].tot) return;
    int board[10] = {};
    int tmp = key;
    for (int i = 9; i >= 1; --i) { board[i] = tmp % 3; tmp /= 3; }

    int res = check_win(board);
    if (res) {
        f[key][turn].tot = 1;
        f[key][turn].win = (res == 2) ? 1 : (res == 1 ? -1 : 0);
        return;
    }

    double best = -1e9;
    int best_move = -1;
    for (int i = 1; i <= 9; ++i) {
        if (board[i]) continue;
        board[i] = turn + 1;
        int nxt = get_key(board);
        dfs(nxt, turn ^ 1);
        if (turn == 1) {                 // å¯¹æ‰‹å›åˆï¼šç´¯åŠ 
            f[key][turn] = f[key][turn].tot ?
                Node{ f[key][turn].win + f[nxt][turn^1].win,
                      f[key][turn].tot + f[nxt][turn^1].tot, 0 } :
                Node{ f[nxt][turn^1].win, f[nxt][turn^1].tot, 0 };
        } else {                         // è‡ªå·±å›åˆï¼šé€‰æœ€ä¼˜
            double val = 1.0 * f[nxt][turn^1].win / f[nxt][turn^1].tot;
            if (val > best) {
                best = val;
                best_move = i;
                f[key][turn] = f[nxt][turn^1];
                f[key][turn].best = i;
            }
        }
        board[i] = 0;
    }
}

extern "C" void init() {
    build_trans();
    Pow10[0] = 1;
    for (int i = 1; i <= 9; ++i) Pow10[i] = Pow10[i-1] * 3;
    dfs(0, 0);   // 0å…ˆæ‰‹
    dfs(0, 1);   // 1åæ‰‹
}

int cur_board[10] = {};
extern "C" void newgame(bool f) {
    memset(cur_board, 0, sizeof(cur_board));
}

extern "C" int choose(int x) {
    if (x) cur_board[x] = 1;                // å¯¹æ‰‹è½å­
    int key = get_key(cur_board);
    int move = f[key][0].best;              // æŸ¥è¡¨
    cur_board[move] = 2;
    return move;
}
```

- **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. ç”¨ **ä¸‰è¿›åˆ¶** å°†æ£‹ç›˜å‹æˆæ•´æ•° `key`ï¼ˆ0ç©º 1å¯¹æ‰‹ 2è‡ªå·±ï¼‰ã€‚  
  2. `dfs` é¢„å¤„ç†æ‰€æœ‰å±€é¢èƒœè´Ÿå€¼ï¼Œå…ˆæ‰‹/åæ‰‹å„ä¸€å¼ è¡¨ã€‚  
  3. äº¤äº’æ—¶ `choose` ä»… **æŸ¥è¡¨è¿”å›æœ€ä¼˜è½å­**ï¼Œå¤æ‚åº¦ O(1)ã€‚  

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ğŸ® åƒç´ æ£‹ç›˜ï¼šäº•å­—æ£‹çš„ 8 ä½å¯¹å†³

- **ä¸»é¢˜**ï¼š**â€œ8-Bit Tic-Tac-Breadâ€**  
  3Ã—3 åƒç´ æ£‹ç›˜ï¼Œé¢åŒ…å›¾æ ‡ä»£æ›¿ X/Oï¼Œå¤å¤ FC é£æ ¼ã€‚

- **æ ¸å¿ƒæ¼”ç¤º**ï¼š
  1. **å¼€å±€**ï¼šé¢åŒ… 1~9 ä»¥åƒç´ æ•°å­—é—ªç°åˆ°æ ¼å­ã€‚  
  2. **ç©å®¶å›åˆ**ï¼šå½“å‰ç©å®¶åƒç´ å…‰æ ‡é—ªçƒï¼Œä¼´éšâ€œå®â€éŸ³æ•ˆã€‚  
  3. **è½å­åŠ¨ç”»**ï¼šé¢åŒ…åƒç´ æ»‘å…¥æ ¼å­ï¼Œé¢œè‰²å˜çº¢/è“åŒºåˆ†åŒæ–¹ã€‚  
  4. **èƒœè´Ÿåˆ¤å®š**ï¼šè¿æˆä¸€çº¿çš„ä¸‰ä¸ªé¢åŒ…é«˜äº®é—ªåŠ¨ï¼Œæ’­æ”¾â€œèƒœåˆ©â€8 ä½æ—‹å¾‹ï¼›å¹³å±€åˆ™æ˜¾ç¤ºâ€œDrawâ€ã€‚  
  5. **AI è‡ªåŠ¨æ¼”ç¤º**ï¼šå¯å¼€å¯â€œAI å¯¹æˆ˜â€æ¨¡å¼ï¼Œç¨‹åºè‡ªåŠ¨æŸ¥è¡¨è½å­ï¼Œä¾›å­¦ä¹ è€…è§‚å¯Ÿå¿…èƒœè·¯å¾„ã€‚

- **æŠ€æœ¯å®ç°**ï¼ˆä¼ªä»£ç ï¼‰ï¼š

```javascript
// Canvas 8Ã—8 åƒç´ æ ¼ï¼Œæ¯ä¸ªæ ¼å­ 32Ã—32 px
const CELL = 32, GRID = 3;
const canvas = document.getElementById('board');
const ctx = canvas.getContext('2d');
let board = Array(9).fill(0);   // 0ç©º 1çº¢ 2è“

function drawCell(idx, val) {
    const x = (idx % 3) * CELL;
    const y = Math.floor(idx / 3) * CELL;
    ctx.fillStyle = val === 1 ? '#ff5555' : val === 2 ? '#5555ff' : '#333333';
    ctx.fillRect(x, y, CELL, CELL);
    ctx.fillStyle = '#ffffff';
    ctx.font = '20px monospace';
    ctx.fillText((idx+1)+'', x+8, y+22);
}

function playSound(type) {
    const audio = new Audio(`sfx/${type}.wav`); // 8ä½éŸ³æ•ˆ
    audio.play();
}
```

- **äº¤äº’æ§åˆ¶**ï¼š  
  - å•æ­¥ / è‡ªåŠ¨ / é‡ç½®æŒ‰é’®ã€‚  
  - é€Ÿåº¦æ»‘å—ï¼ˆ1~10 å¸§/ç§’ï¼‰ã€‚  
  - éŸ³æ•ˆå¼€å…³ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **é­”æ–¹é˜µ + åšå¼ˆ**ï¼šä»»ä½•â€œä¸‰æ•°ä¹‹å’Œå›ºå®šâ€é—®é¢˜ï¼Œéƒ½å¯å°è¯• **é­”æ–¹é˜µæ˜ å°„** è½¬åŒ–ä¸ºäº•å­—æ£‹ã€‚  
- **çŠ¶æ€å‹ç¼©**ï¼šæ£‹ç›˜ â‰¤ 4Ã—4 æ—¶ï¼Œ**è¿›åˆ¶å‹ç¼© + è®°å¿†åŒ–** æ˜¯é€šç”¨å¥—è·¯ã€‚  
- **å¿…èƒœè¡¨**ï¼šå®Œå…¨ä¿¡æ¯åšå¼ˆï¼ˆå¦‚äº”å­æ£‹ 3Ã—3 ç®€åŒ–ç‰ˆï¼‰å‡å¯é¢„è®¡ç®—å¿…èƒœç­–ç•¥ã€‚

### æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| **P2199 å°Zçš„æ£‹ç›˜** | çŠ¶æ€å‹ç¼© + åšå¼ˆï¼Œæ£‹ç›˜ 4Ã—4 äº•å­—æ£‹å˜å½¢ã€‚ |
| **P3150 pbçš„æ¸¸æˆï¼ˆ1ï¼‰** | ç»å…¸å–çŸ³å­åšå¼ˆï¼Œå­¦ä¹ å¿…èƒœ/å¿…è´¥æ€ã€‚ |
| **P2571 å°Zçš„åšå¼ˆ** | å¤šç»´çŠ¶æ€åšå¼ˆï¼Œç»ƒä¹  dfs + memoã€‚ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> å‡ºé¢˜äºº tuxiaobei çš„æç¤ºï¼š  
> â€œå…¶å®å¯ä»¥è½¬åŒ–æˆç»å…¸çš„äº•å­—æ£‹æ¸¸æˆâ€¦â€¦æ•°æ®è§„æ¨¡è¿™ä¹ˆå°å¯ä»¥ç›´æ¥é¢„å¤„ç†æœç´¢ã€‚â€  

**æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
- **â€œé—®é¢˜è½¬åŒ–â€** æ˜¯è§£é¢˜çš„ç¬¬ä¸€æŠŠé’¥åŒ™ï¼ŒæŠŠå¤æ‚æ¡ä»¶æ˜ å°„åˆ°å·²çŸ¥æ¨¡å‹ï¼Œå¯ç¬é—´é™ç»´æ‰“å‡»ã€‚  
- **â€œé¢„å¤„ç† + æŸ¥è¡¨â€** æ˜¯å°çŠ¶æ€åšå¼ˆçš„ä¸‡èƒ½å¥—è·¯ï¼šå…ˆèŠ± 1 ç§’ dfsï¼Œä¹‹å 1800 åœºæ¸¸æˆåªéœ€ O(1)ã€‚  
- **è°ƒè¯•æŠ€å·§**ï¼šé¢„å¤„ç†æ—¶æŠŠ `key` è½¬æˆ 3Ã—3 æ£‹ç›˜æ‰“å°ï¼Œè‚‰çœ¼éªŒè¯èƒœè´Ÿé€»è¾‘ï¼Œå¿«é€Ÿå®šä½ bugã€‚

---

<conclusion>
ä»Šå¤©æˆ‘ä»¬ä»â€œé¢åŒ…â€ä¸€è·¯åƒåˆ°â€œäº•å­—æ£‹â€ï¼Œå­¦ä¼šäº†å¦‚ä½•ç”¨ **çŠ¶æ€å‹ç¼© + å¿…èƒœè¡¨** åœ¨ 9 æ ¼æ£‹ç›˜ä¸Šç¨³æ“èƒœåˆ¸ã€‚  
è®°ä½ï¼šé‡åˆ° **å°è§„æ¨¡åšå¼ˆ**ï¼Œå…ˆæƒ³æƒ³èƒ½å¦ **å®Œå…¨é¢„å¤„ç†**ï¼›é‡åˆ° **å’Œå€¼å›ºå®š**ï¼Œå…ˆæ‰¾æ‰¾ **é­”æ–¹é˜µ** çš„å½±å­ï¼  
ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æŒ‘æˆ˜æ–°çš„åƒç´ è°œé¢˜ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š87.39ç§’
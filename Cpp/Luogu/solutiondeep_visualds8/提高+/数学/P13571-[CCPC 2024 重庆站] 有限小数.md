# é¢˜ç›®ä¿¡æ¯

# [CCPC 2024 é‡åº†ç«™] æœ‰é™å°æ•°

## é¢˜ç›®èƒŒæ™¯

æœ¬é¢˜ç›®æ¥è‡ªä»“åº“ <https://github.com/Disposrestfully/CCPC-CQ-2024/tree/main>

## é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªäº’è´¨æ­£æ•´æ•° $a, b$ï¼Œä½ éœ€è¦æ±‚ä¸¤ä¸ªéè´Ÿæ•´æ•° $c, d$ï¼Œæ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š

- $\frac{a}{b}+\frac{c}{d}$ ä¸ºåè¿›åˆ¶ä¸‹çš„æ•´æ•°æˆ–æœ‰é™å°æ•°ã€‚
- $1\le d \le {{ 10^9 }}$ã€‚

åœ¨æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„éè´Ÿæ•´æ•°å¯¹ $(c,d)$ ä¸­ï¼Œè¯·æ±‚å‡º $c$ æœ€å°çš„ä¸€å¯¹ã€‚

ä¸€ä¸ªæœ‰ç†æ•° $x$ æ˜¯åè¿›åˆ¶ä¸‹çš„æœ‰é™å°æ•°ï¼Œå½“ä¸”ä»…å½“å°† $x$ åœ¨åè¿›åˆ¶ä¸‹ä»¥å°æ•°å½¢å¼å†™å‡ºåï¼Œå°æ•°ç‚¹åçš„ä½æ•°æ˜¯æœ‰é™çš„ï¼Œå³å­˜åœ¨æ­£æ•´æ•° $k$ï¼Œæ•´æ•° $p$ å’Œæ•´æ•°æ•°ç»„ $(q_1,q_2,\dots,q_k)$ æ»¡è¶³ $0\le q_i \le 9$ï¼Œä½¿å¾— $x=p+\sum\limits_{i=1}^{k}q_i\cdot 10^{-i}$ã€‚


## è¯´æ˜/æç¤º

å¯¹äºç¬¬ä¸€ç»„æ•°æ®ï¼Œç”±äº $\frac{1}{2}=0.5$ æ˜¯æœ‰é™å°æ•°ï¼Œå› æ­¤è¾“å‡º $(c,d)$ æ»¡è¶³ $c=0$ ä¸” $1\le d \le 10^9$ å³å¯ã€‚

å¯¹äºç¬¬äºŒç»„æ•°æ®ï¼Œ$\frac{2}{3}+\frac{1}{3}=1$ æ˜¯æ•´æ•°ï¼Œä¸” $\frac{2}{3}=0.666\dots$ ä¸æ˜¯æœ‰é™å°æ•°ï¼Œå› æ­¤ $c=1$ æ˜¯æœ€å°å¯èƒ½å€¼ã€‚

å¯¹äºç¬¬ä¸‰ç»„æ•°æ®ï¼Œ$\frac{3}{7}+\frac{1}{14}=\frac{1}{2}=0.5$ æ˜¯æœ‰é™å°æ•°ã€‚

å¯¹äºç¬¬å››ç»„æ•°æ®ï¼Œ$\frac{19}{79}+\frac{3}{316}=\frac{1}{4}=0.25$ æ˜¯æœ‰é™å°æ•°ï¼Œä¸”å¯ä»¥è¯æ˜ä¸å­˜åœ¨ $0\le c\le 2$ï¼Œ$1\le d \le 10^9$ ä½¿å¾— $\frac{19}{79}+\frac{c}{d}$ æ˜¯æœ‰é™å°æ•°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4
1 2
2 3
3 7
19 79
```

### è¾“å‡º

```
0 1
1 3
1 14
3 316```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šæœ‰é™å°æ•° æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨æ»¡è¶³dâ‰¤10â¹çš„çº¦æŸä¸‹ï¼Œæ‰¾åˆ°æœ€å°éè´Ÿæ•´æ•°cï¼Œä½¿å¾—åˆ†æ•°a/b + c/dçš„åè¿›åˆ¶è¡¨ç¤ºæ˜¯æœ‰é™å°æ•°ï¼ˆåˆ†æ¯ä»…å«è´¨å› æ•°2å’Œ5ï¼‰ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šæ•°è®ºã€åŒä½™æ–¹ç¨‹ã€æšä¸¾ä¼˜åŒ–

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜è¦æ±‚å°†åˆ†æ•°è°ƒæ•´ä¸ºæœ‰é™å°æ•°ï¼Œå…³é”®åœ¨äºåˆ†æ¯çš„è´¨å› æ•°å¿…é¡»ä»…ä¸º2å’Œ5ã€‚é€šè¿‡åˆ†æé¢˜ç›®ç‰¹æ€§ï¼Œæˆ‘ä»¬å‘ç°ï¼š
> - æš´åŠ›æšä¸¾d(1åˆ°10â¹)ä¸å¯è¡Œ â†’ æ—¶é—´å¤æ‚åº¦O(10â¹)
> - ä¼˜åŒ–æ€è·¯ï¼šåˆ©ç”¨æ•°å­¦æ€§è´¨ç¼©å°dçš„æœç´¢ç©ºé—´
> - æœ€ä¼˜ç­–ç•¥ï¼šå°†é—®é¢˜è½¬åŒ–ä¸ºåŒä½™æ–¹ç¨‹æ±‚è§£+å¯¹æ•°çº§æšä¸¾

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**: "è¦æ±‚åˆ†æ•°ç»“æœä¸ºæœ‰é™å°æ•°" â†’ åˆ†æ¯å¿…é¡»èƒ½è¡¨ç¤ºä¸º2Ë£5Ê¸çš„å½¢å¼ï¼Œè¿™æ˜¯æ•°è®ºä¸­æœ‰é™å°æ•°çš„æ ¸å¿ƒç‰¹å¾ã€‚
2.  **çº¿ç´¢2 (é—®é¢˜çº¦æŸ/ç‰¹æ€§)**: "a,bäº’è´¨" â†’ æš—ç¤ºbçš„è´¨å› æ•°åˆ†è§£æœ‰ç‰¹æ®Šæ€§è´¨ï¼Œå¯æå–ä¸2,5äº’è´¨çš„éƒ¨åˆ†rã€‚
3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**: "dâ‰¤10â¹" â†’ ç»“åˆrçš„æ€§è´¨ï¼Œå¯å°†æšä¸¾é‡ä»10â¹é™è‡³O(logÂ²10â¹)â‰ˆ900æ¬¡ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»º
> 1.  ç›®æ ‡è¦æ±‚åˆ†æ¯ä¸º2Ë£5Ê¸ â†’ åˆ†æ¯å¿…é¡»ä¸å«å…¶ä»–è´¨å› å­
> 2.  bå«æœ‰é2,5å› å­r â†’ då¿…é¡»åŒ…å«ræ¥æŠµæ¶ˆåˆ†æ¯ä¸­çš„r
> 3.  dçš„ç»“æ„å¿…ä¸ºrÂ·2Ë£'5Ê¸' â†’ æšä¸¾ç©ºé—´ä»10â¹é™è‡³å¯¹æ•°çº§
> 4.  å¯¹æ¯ä¸ªdï¼Œé€šè¿‡åŒä½™æ–¹ç¨‹câ‰¡k(mod r)ç›´æ¥æ±‚æœ€å°c
> **ç»“è®º**ï¼š**æ•°è®ºåˆ†è§£+æšä¸¾ä¼˜åŒ–+åŒä½™æ±‚è§£**å®Œç¾å¥‘åˆæ‰€æœ‰æ¡ä»¶ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆFFTotoroï¼‰**
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ä¸¥è°¨ï¼Œé€šè¿‡åˆ†è§£b=rÂ·2Ë£5Ê¸å’Œè¯æ˜dçš„ç»“æ„ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºå¯¹æ•°çº§æšä¸¾ã€‚äº®ç‚¹åœ¨äºé¢„å¤„ç†é€†å…ƒï¼Œä½¿å†…å±‚å¾ªç¯O(1)æ±‚è§£cã€‚ä»£ç ç®€æ´è§„èŒƒï¼ˆexgcdå°è£…å®Œå–„ï¼‰ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆdâ‰¤10â¹çš„å¾ªç¯æ¡ä»¶ï¼‰ï¼Œå®è·µä»·å€¼é«˜ã€‚

**é¢˜è§£äºŒï¼ˆSUNCHAOYIï¼‰**
* **ç‚¹è¯„**ï¼šæä¾›äº†ä¸¥è°¨çš„æ•°å­¦è¯æ˜ï¼ˆdå¿…å«rï¼‰ï¼Œç†è®ºä»·å€¼çªå‡ºã€‚è§£æ³•åŒæ ·é‡‡ç”¨æšä¸¾ä¼˜åŒ–ï¼Œä½†ä½¿ç”¨exgcdç›´æ¥æ±‚è§£æ–¹ç¨‹ï¼Œç›¸æ¯”é¢˜è§£ä¸€ç¨æ˜¾å¤æ‚ã€‚è™½æœªæä¾›å®Œæ•´ä»£ç ï¼Œä½†æ¨å¯¼è¿‡ç¨‹å¯¹ç†è§£é—®é¢˜æœ¬è´¨å¾ˆæœ‰å¸®åŠ©ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1.  **å…³é”®ç‚¹1ï¼šåˆ†è§£bç¡®å®šæšä¸¾ç»“æ„**
    * **åˆ†æ**ï¼šå°†båˆ†è§£ä¸ºb=rÂ·2Ë£5Ê¸ï¼ˆrä¸2,5äº’è´¨ï¼‰ï¼Œè¯æ˜då¿…ä¸ºrÂ·2Ë£'5Ê¸'ã€‚é¢„å¤„ç†råªéœ€å¾ªç¯é™¤2/5ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†è§£è´¨å› æ•°æ˜¯æ•°è®ºé—®é¢˜çš„é€šç”¨èµ·æ‰‹å¼ã€‚

2.  **å…³é”®ç‚¹2ï¼šåŒä½™æ–¹ç¨‹æ±‚æœ€å°c**
    * **åˆ†æ**ï¼šå¯¹æ¯ä¸ªdï¼Œéœ€è§£ad+bc â‰¡ 0 (mod rÂ²)ã€‚è½¬åŒ–ä¸ºc â‰¡ -aÂ·(d/r)Â·inv(b/r) mod rã€‚é¢„å¤„ç†é€†å…ƒé¿å…é‡å¤è®¡ç®—ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒä½™æ–¹ç¨‹è½¬åŒ–æ˜¯æ±‚æœ€å°å€¼çš„åˆ©å™¨ã€‚

3.  **å…³é”®ç‚¹3ï¼šå¯¹æ•°çº§æšä¸¾å®ç°**
    * **åˆ†æ**ï¼šd=rÂ·2Ë£'5Ê¸'ä¸”dâ‰¤10â¹ â†’ ç”¨åŒé‡å¾ªç¯æšä¸¾2å’Œ5çš„å¹‚æ¬¡ï¼ˆå¤–å¾ªç¯2Ë£'ï¼Œå†…å¾ªç¯5Ê¸'ï¼‰ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæŒ‡æ•°å¢é•¿çš„ç‰¹æ€§å¯å°†å¤§èŒƒå›´æœç´¢è½¬ä¸ºå¯¹æ•°çº§æšä¸¾ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼ˆå› å­åˆ†è§£ï¼‰**ï¼šæå–å…³é”®å› å­rç¼©å°é—®é¢˜è§„æ¨¡
- **æŠ€å·§Bï¼ˆé€†å…ƒä¼˜åŒ–ï¼‰**ï¼šé¢„å¤„ç†æ¨¡é€†å…ƒåŠ é€Ÿå¾ªç¯å†…è®¡ç®—
- **æŠ€å·§Cï¼ˆç»“æ„æšä¸¾ï¼‰**ï¼šåˆ©ç”¨å¹‚æ¬¡å¢é•¿ç‰¹æ€§é™å¤æ‚åº¦

### âš”ï¸ ç­–ç•¥ç«æŠ€åœº

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯/å¾—åˆ† |
|------|----------|------|------|---------------|
| **æš´åŠ›æšä¸¾** | æšä¸¾dâˆˆ[1,10â¹]éªŒè¯æ¡ä»¶ | æ€è·¯ç›´è§‚ | O(10â¹)è¶…æ—¶ | Mâ‰¤20ï¼Œ10%åˆ† |
| **åˆ†æ•°åˆ†è§£** | æ•°å­¦å˜å½¢æ‰¾é€šè§£ | ç†è®ºå®Œå¤‡ | å®ç°å¤æ‚æ˜“é”™ | ç†è®ºåˆ†æä»·å€¼ |
| **æšä¸¾ä¼˜åŒ–ï¼ˆæœ€ä¼˜ï¼‰** | d=rÂ·2Ë£'5Ê¸' + åŒä½™æ±‚c | O(logÂ²V)é«˜æ•ˆ | éœ€æ•°è®ºåŸºç¡€ | 100%åˆ† |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…
> 1. **æš´åŠ›å›°å¢ƒ**ï¼š10â¹æ¬¡æšä¸¾å¦‚åŒå¤§æµ·æé’ˆ  
> 2. **å…³é”®æ´å¯Ÿ**ï¼šbçš„è´¨å› æ•°å†³å®šdçš„ç»“æ„ â†’ æšä¸¾ç©ºé—´éª¤é™  
> 3. **åŒä½™è½¬åŒ–**ï¼šad+bcâ‰¡0(mod rÂ²) â†’ æ±‚é€†å…ƒå¿«é€Ÿå¾—c  
> 4. **å®Œç¾è½åœ°**ï¼šåŒé‡å¾ªç¯æšä¸¾2/5å¹‚æ¬¡ï¼ŒO(1)æ±‚c  

ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼š"ä»æš´åŠ›åˆ°ä¼˜åŒ–ï¼Œæ˜¯'é—®é¢˜è½¬åŒ–'ä¸'æ•°å­¦å·¥å…·'çš„å®Œç¾ç»“åˆï¼"

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**
```cpp
#include <bits/stdc++.h>
using namespace std;
const int V = 1e9;

pair<int, int> exgcd(int a, int b) {
  if (!b) return {1, 0};
  auto [x, y] = exgcd(b, a % b);
  return {y, x - a / b * y};
}

int inv(int x, int m) {
  int res = exgcd(x, m).first % m;
  return res < 0 ? res + m : res;
}

int main() {
  int t; cin >> t;
  while (t--) {
    int a, b, r; cin >> a >> b;
    
    // åˆ†è§£bï¼šæå–é2,5å› å­r
    r = b;
    while (r % 2 == 0) r /= 2;
    while (r % 5 == 0) r /= 5;
    
    // é¢„å¤„ç†ï¼šè®¡ç®—q = b/r çš„æ¨¡é€†å…ƒ
    int q = b / r % r;
    int inv_q = inv(q, r);
    
    // æšä¸¾æ‰€æœ‰d=r*2^x*5^y
    pair<int, int> ans = {INT_MAX, 0};
    for (long long d2 = 1; d2 * r <= V; d2 *= 2)
      for (long long d5 = 1; d2 * d5 * r <= V; d5 *= 5) {
        long long d = d2 * d5 * r;
        long long p = d / r;  // 2^x*5^yéƒ¨åˆ†
        
        // è§£åŒä½™æ–¹ç¨‹æ±‚æœ€å°c
        long long c = (r - (a * p) % r) * inv_q % r;
        if (c < ans.first) ans = {c, d};
      }
    
    cout << ans.first << " " << ans.second << "\n";
  }
}
```
**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
1. åˆ†è§£bæå–å…³é”®å› å­r
2. é¢„å¤„ç†qçš„æ¨¡é€†å…ƒinv_q
3. åŒé‡å¾ªç¯æšä¸¾2/5çš„å¹‚æ¬¡æ„é€ d
4. é€šè¿‡åŒä½™æ–¹ç¨‹câ‰¡-aÂ·pÂ·inv_q mod ræ±‚æœ€å°c

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

* **ä¸»é¢˜**ï¼šåƒç´ åŒ–"å°æ•°è½¬æ¢å™¨"
* **æ ¸å¿ƒæ¼”ç¤º**ï¼š
  - **åœºæ™¯1**ï¼š8-bité£æ ¼åˆ†è§£b â†’ åƒç´ å—æ˜¾ç¤º2Ë£,5Ê¸,ræˆåˆ†
  - **åœºæ™¯2**ï¼šæšä¸¾dç»“æ„ â†’ 2/5åƒç´ å—åŠ¨æ€ç»„åˆ
  - **åœºæ™¯3**ï¼šåŒä½™æ±‚è§£c â†’ æ˜¾ç¤ºæ¨¡é€†å…ƒè®¡ç®—è¿‡ç¨‹
* **äº¤äº’è®¾è®¡**ï¼š
  ```mermaid
  graph LR
  æ§åˆ¶é¢æ¿-->|å¼€å§‹| åˆ†è§£b
  åˆ†è§£b-->|æ˜¾ç¤ºr| æšä¸¾d
  æšä¸¾d-->|é«˜äº®å½“å‰ç»„åˆ| è®¡ç®—c
  è®¡ç®—c-->|æ›´æ–°æœ€å°å€¼| ç»“æœå±•ç¤º
  ```
* **æ¸¸æˆåŒ–å…ƒç´ **ï¼š
  - éŸ³æ•ˆï¼šåˆ†è§£b(å’”åš“)ã€æ±‚è§£c(å®ï¼)ã€æ‰¾åˆ°æœ€ä¼˜è§£(èƒœåˆ©æ—‹å¾‹)
  - ç§¯åˆ†ï¼šæ¯æˆåŠŸæšä¸¾ä¸€ç»„då¾—10åˆ†ï¼Œæ‰¾åˆ°æ›´å°cé¢å¤–å¥–åŠ±
* **æ—ç™½æç¤º**ï¼š
  > "å½“å‰æšä¸¾d=rÃ—2Â³Ã—5Â²...æ­£åœ¨æ±‚è§£câ‰¡k mod rï¼"

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

* **é€šç”¨æŠ€å·§è¿ç§»**ï¼š
  1. åˆ†æ¯è´¨å› æ•°çº¦æŸ â†’ åˆ†æ•°åŒ–ç®€é—®é¢˜
  2. æ¨¡é€†å…ƒåŠ é€Ÿ â†’ åŒä½™æ–¹ç¨‹æ±‚è§£
  3. å› å­åˆ†è§£+æšä¸¾ â†’ æ•°è®ºä¼˜åŒ–é—®é¢˜

* **ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰**ï¼š
  1. **P1082 [NOIP2012]åŒä½™æ–¹ç¨‹**  
     â†’ å·©å›ºexgcdæ±‚æ¨¡é€†å…ƒ
  2. **P1061 [NOIP2009]æœ‰é™å°æ•°åˆ¤æ–­**  
     â†’ é€†ç”¨æœ¬é¢˜ç»“è®º
  3. **P2428 è´¨å› æ•°åˆ†è§£**  
     â†’ å¼ºåŒ–å› å­åˆ†è§£èƒ½åŠ›

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> **å‚è€ƒç»éªŒï¼ˆFFTotoroï¼‰**ï¼š  
> "é¢„å¤„ç†é€†å…ƒæ˜¯å†…å±‚å¾ªç¯é«˜æ•ˆçš„å…³é”®ï¼Œé¿å…æ¯æ¬¡è°ƒç”¨exgcdçš„å¼€é”€ã€‚"  
> **ç‚¹è¯„**ï¼šé‡è¦ä¼˜åŒ–æŠ€å·§ï¼åœ¨å¤šé‡å¾ªç¯ä¸­ï¼Œå°†è´¹æ—¶æ“ä½œç§»åˆ°å¤–å±‚å¸¸å¸¦æ¥æ•°é‡çº§æå‡ã€‚

---

æŒæ¡æ•°è®ºåˆ†è§£ä¸åŒä½™è½¬åŒ–çš„æ€ç»´ï¼Œå°±èƒ½åœ¨åˆ†æ•°å®‡å®™ä¸­è‡ªç”±èˆªè¡Œï¼ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š185.06ç§’
# é¢˜ç›®ä¿¡æ¯

# [USACO13JAN] Painting the Fence S

## é¢˜ç›®æè¿°

Farmer John has devised a brilliant method to paint the long fence next to his barn (think of the fence as a one-dimensional number line).  He simply attaches a paint brush to his favorite cow Bessie, and then retires to drink a cold glass of water as Bessie walks back and forth across the fence, applying paint to any segment of the fence that she walks past.

Bessie starts at position 0 on the fence and follows a sequence of N moves (1 <= N <= 100,000).  Example moves might be "10 L", meaning Bessie moves 10 units to the left, or "15 R", meaning Bessie moves 15 units to the right.  Given a list of all of Bessie's moves, FJ would like to know what area of the fence gets painted with at least K coats of paint.  Bessie will move at most 1,000,000,000 units away from the origin during her walk.



Farmer John æƒ³å‡ºäº†ä¸€ä¸ªç»™ç‰›æ£šæ—çš„é•¿å›´å¢™æ¶‚è‰²çš„å¥½æ–¹æ³•ã€‚ï¼ˆä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬æŠŠå›´å¢™çœ‹åšä¸€ç»´çš„æ•°è½´ï¼Œæ¯ä¸€ä¸ªå•ä½é•¿åº¦ä»£è¡¨ä¸€å—æ …æ ï¼‰

ä»–åªæ˜¯ç®€å•çš„æŠŠåˆ·å­è˜¸æ»¡é¢œæ–™ï¼Œç³»åœ¨ä»–æœ€å–œæ¬¢çš„å¥¶ç‰›Bessieä¸Šï¼Œç„¶åè®©Bessieæ¥å›åœ°ç»è¿‡å›´å¢™ï¼Œè‡ªå·±åˆ™åœ¨ä¸€æ—å–ä¸€æ¯å†°é•‡çš„å‡‰æ°´ã€‚ï¼ˆâ€¦â€¦-\_-|||) 

Bessie ç»è¿‡çš„æ‰€æœ‰å›´å¢™éƒ½ä¼šè¢«æ¶‚ä¸Šä¸€å±‚é¢œæ–™ã€‚Bessieä»å›´å¢™ä¸Šçš„ä½ç½®0å‡ºå‘ï¼Œå¹¶å°†ä¼šè¿›è¡ŒNæ¬¡ç§»åŠ¨(1 <= N <= 100,000)ã€‚æ¯”å¦‚è¯´ï¼Œâ€œ10 Lâ€çš„æ„æ€å°±æ˜¯Bessieå‘å·¦ç§»åŠ¨äº†10ä¸ªå•ä½ã€‚å†æ¯”å¦‚è¯´â€œ15 Râ€çš„æ„æ€å°±æ˜¯Bessieå‘å³ç§»åŠ¨äº†15ä¸ªå•ä½ã€‚

ç»™å‡ºä¸€ç³»åˆ—Bessieç§»åŠ¨çš„æ¸…å•ã€‚FJ æƒ³çŸ¥é“æœ‰å¤šå°‘å—æ …æ æ¶‚ä¸Šäº†è‡³å°‘Kå±‚æ¶‚æ–™ã€‚æ³¨æ„ï¼šBessieæœ€å¤šä¼šç§»åŠ¨åˆ°ç¦»åŸç‚¹1,000,000,000å•ä½è¿œçš„åœ°æ–¹ã€‚


## è¯´æ˜/æç¤º

PS1ï¼šæ¥æºï¼šusaco jan silver P01 æƒ³çœ‹åŸé¢˜çš„è¯·æˆ³http://www.usaco.org/index.php?page=viewproblem2&cpid=226ï¼‰

PS2ï¼šæµ‹è¯•æ•°æ®ä¹Ÿå¯ä»¥åœ¨åœ¨http://www.usaco.org/index.php?page=jan13problemsä¸Šä¸‹è½½ï¼Œè¿˜å¯ä»¥çœ‹åˆ°é¢˜è§£ï¼ˆä¸è¿‡æ˜¯è‹±æ–‡çš„:-Dï¼‰

PS3:å¦‚æœæœ‰ç¿»è¯‘çš„é—®é¢˜æˆ–é¢˜ç›®çš„ä¸ç†è§£ï¼Œå¯ä»¥åœ¨é—®ç­”åé¢ç•™è¨€çš„è¯´ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
6 2 
2 R 
6 L 
1 R 
8 L 
1 R 
2 R ```

### è¾“å‡º

```
6```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šPainting the Fence S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

**æ´›è¯­äº‘ç¬ºçš„æç¤º**ï¼šåœ¨å¼€å§‹åˆ†æå‰ï¼Œè¯·å…ˆç¡®ä¿ä½ å·²ç†è§£é¢˜ç›®æ ¸å¿ƒâ€”â€”Bessieçš„æ¯æ¬¡ç§»åŠ¨ä¼šåœ¨æ•°è½´ä¸Šå½¢æˆä¸€æ¡çº¿æ®µï¼ˆæ¶‚è‰²åŒºé—´ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡è¢«æ¶‚è‡³å°‘Kå±‚çš„æ€»é•¿åº¦ã€‚åæ ‡èŒƒå›´å·¨å¤§ï¼ˆÂ±10^9ï¼‰æ˜¯æœ€å¤§æŒ‘æˆ˜ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨åæ ‡èŒƒå›´å·¨å¤§ï¼ˆÂ±10^9ï¼‰çš„æƒ…å†µä¸‹ï¼Œé«˜æ•ˆè®¡ç®—è¢«æ¶‚è‡³å°‘Kå±‚çš„æ …æ æ€»é•¿åº¦ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šç¦»æ•£åŒ–ã€æ‰«æçº¿ã€å·®åˆ†æ€æƒ³

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è¿™é“é¢˜çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æš—è—ç„æœºã€‚æœ€ç›´è§‚çš„æš´åŠ›è§£æ³•æ˜¯ç›´æ¥æ¨¡æ‹Ÿæ¯ä¸ªå•ä½æ …æ çš„æ¶‚è‰²è¿‡ç¨‹ï¼Œä½†åæ ‡èŒƒå›´é«˜è¾¾Â±10^9ï¼Œå¿…ç„¶è¶…æ—¶ï¼æˆ‘ä»¬éœ€è¦æ›´èªæ˜çš„ç­–ç•¥ã€‚  
>  
> çªç ´å£åœ¨äºï¼šæ‰€æœ‰æ¶‚è‰²æ“ä½œéƒ½æ˜¯**åŒºé—´ä¿®æ”¹**ï¼Œä¸”æˆ‘ä»¬åªå…³å¿ƒ**è¦†ç›–æ¬¡æ•°â‰¥Kçš„åŒºé—´é•¿åº¦**ã€‚è¿™æç¤ºæˆ‘ä»¬å¯ä»¥ï¼š  
> 1. **äº‹ä»¶ç‚¹æ€æƒ³**ï¼šå°†æ¯ä¸ªçº¿æ®µçš„èµ·ç‚¹ï¼ˆ+1ï¼‰å’Œç»ˆç‚¹ï¼ˆ-1ï¼‰è§†ä¸ºäº‹ä»¶ç‚¹  
> 2. **ç¦»æ•£åŒ–å‹ç¼©**ï¼šå°†å·¨å¤§åæ ‡æ˜ å°„åˆ°ç´§å‡‘æ•´æ•°  
> 3. **æ‰«æçº¿ç®—æ³•**ï¼šæ’åºäº‹ä»¶ç‚¹åé¡ºåºæ‰«æï¼ŒåŠ¨æ€ç»´æŠ¤å½“å‰è¦†ç›–å±‚æ•°  

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼šé¢˜ç›®è¦æ±‚ç»Ÿè®¡"è‡³å°‘è¦†ç›–Kå±‚"çš„åŒºé—´æ€»é•¿åº¦ â†’ éœ€è¦é«˜æ•ˆå¤„ç†**åŒºé—´è¦†ç›–ç»Ÿè®¡**é—®é¢˜ã€‚
2.  **çº¿ç´¢2 (æ•°æ®ç‰¹æ€§)**ï¼šåæ ‡èŒƒå›´å·¨å¤§ï¼ˆÂ±10^9ï¼‰â†’ å¿…é¡»ä½¿ç”¨**ç¦»æ•£åŒ–**å‹ç¼©æ•°æ®è§„æ¨¡ã€‚
3.  **çº¿ç´¢3 (æ“ä½œç‰¹æ€§)**ï¼šæ¯æ¬¡ç§»åŠ¨ç”Ÿæˆè¿ç»­æ¶‚è‰²åŒºé—´ â†’ é€‚åˆç”¨**å·®åˆ†æ€æƒ³+æ‰«æçº¿**å¤„ç†åŒºé—´ä¿®æ”¹ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> è®©æˆ‘ä»¬ä¸²è”çº¿ç´¢ï¼š  
> 1. ã€çº¿ç´¢1ã€‘è¦æ±‚ç»Ÿè®¡è¦†ç›–æ¬¡æ•° â†’ æˆ‘æƒ³åˆ°éœ€è¦è®°å½•æ¯ä¸ªä½ç½®çš„è¦†ç›–æ¬¡æ•°  
> 2. ã€çº¿ç´¢2ã€‘åæ ‡èŒƒå›´å¤ªå¤§ â†’ ç›´æ¥è®°å½•æ¯ä¸ªç‚¹ä¸å¯èƒ½ï¼Œå¿…é¡»å‹ç¼©æ•°æ®ï¼**ç¦»æ•£åŒ–**æ˜¯å”¯ä¸€é€‰æ‹©  
> 3. ã€çº¿ç´¢3ã€‘åŒºé—´ä¿®æ”¹ç‰¹æ€§ â†’ **å·®åˆ†æ•°ç»„**å¯é«˜æ•ˆå¤„ç†åŒºé—´å¢å‡ï¼Œä½†éœ€ç»“åˆç¦»æ•£åŒ–åæ ‡  
> 4. **å…³é”®æ´å¯Ÿ**ï¼šä¸éœ€è¦çŸ¥é“æ¯ä¸ªç‚¹çš„ç²¾ç¡®å€¼ï¼Œåªéœ€ç»Ÿè®¡è¦†ç›–æ¬¡æ•°â‰¥Kçš„åŒºé—´é•¿åº¦ â†’ **æ‰«æçº¿ç®—æ³•**å®Œç¾åŒ¹é…ï¼š  
>    - å°†çº¿æ®µç«¯ç‚¹è½¬åŒ–ä¸ºäº‹ä»¶ç‚¹ï¼ˆèµ·ç‚¹+1ï¼Œç»ˆç‚¹-1ï¼‰  
>    - æ’åºåæ‰«æï¼ŒåŠ¨æ€ç»´æŠ¤å½“å‰è¦†ç›–æ¬¡æ•°  
>    - å½“è¦†ç›–æ¬¡æ•°â‰¥Kæ—¶ç´¯åŠ åŒºé—´é•¿åº¦  

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼šHades18ï¼ˆæ‰«æçº¿ï¼‰**  
* **ç‚¹è¯„**ï¼šæ­¤è§£æ³•ç›´å‡»é—®é¢˜æ ¸å¿ƒï¼Œç”¨ç®€æ´çš„æ‰«æçº¿ç®—æ³•è§£å†³é—®é¢˜ã€‚äº®ç‚¹åœ¨äºï¼š  
  - å°†æ¯ä¸ªçº¿æ®µæ‹†è§£ä¸ºä¸¤ä¸ªäº‹ä»¶ç‚¹ï¼ˆèµ·ç‚¹+1ï¼Œç»ˆç‚¹-1ï¼‰ï¼Œæ€è·¯æ¸…æ™°  
  - åˆ©ç”¨`struct`å­˜å‚¨äº‹ä»¶ç‚¹å¹¶é‡è½½è¿ç®—ç¬¦å®ç°æ’åºï¼Œä»£ç è§„èŒƒ  
  - æ‰«æè¿‡ç¨‹ä»…éœ€O(N)æ—¶é—´ï¼Œé…åˆæ’åºæ€»å¤æ‚åº¦O(N log N)ï¼Œé«˜æ•ˆä¼˜é›…  

**é¢˜è§£äºŒï¼šueettttujï¼ˆæ‰«æçº¿ï¼‰**  
* **ç‚¹è¯„**ï¼šä¸é¢˜è§£ä¸€æ€è·¯ç›¸ä¼¼ä½†æ›´æ³¨é‡æ•™å­¦æ€§ï¼š  
  - è¯¦ç»†æ³¨é‡Šäº†äº‹ä»¶ç‚¹çš„ç‰©ç†æ„ä¹‰ï¼ˆ"è¿›å…¥çº¿æ®µ"å’Œ"ç¦»å¼€çº¿æ®µ"ï¼‰  
  - ä½¿ç”¨`now`å˜é‡ç›´è§‚è¡¨ç¤ºå½“å‰è¦†ç›–å±‚æ•°  
  - åœ¨è¦†ç›–å±‚æ•°å˜åŒ–æ—¶ç«‹å³ç»Ÿè®¡æœ‰æ•ˆåŒºé—´ï¼Œé€»è¾‘ä¸¥è°¨  

**é¢˜è§£ä¸‰ï¼šBrotherCallï¼ˆå·®åˆ†+ç¦»æ•£åŒ–ï¼‰**  
* **ç‚¹è¯„**ï¼šæä¾›äº†å¦ä¸€ç§è§†è§’çš„ä¼˜è´¨è§£æ³•ï¼š  
  - é‡‡ç”¨ç»å…¸ç¦»æ•£åŒ–+å·®åˆ†æ•°ç»„ç»„åˆ  
  - ç”¨`map`å­˜å‚¨åŸå§‹åæ ‡å¹¶æ’åºå»é‡ï¼Œç¦»æ•£åŒ–æµç¨‹è§„èŒƒ  
  - æœ€åé€šè¿‡å‰ç¼€å’Œè¿˜åŸè¦†ç›–æ¬¡æ•°ï¼Œæ€è·¯å®Œæ•´  

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1.  **éš¾ç‚¹1ï¼šå¦‚ä½•é¿å…å·¨å¤§åæ ‡èŒƒå›´ï¼Ÿ**
    * **è§£å†³æ–¹æ¡ˆ**ï¼šç¦»æ•£åŒ–ï¼ˆåæ ‡å‹ç¼©ï¼‰ã€‚å°†æ‰€æœ‰çº¿æ®µç«¯ç‚¹åæ ‡æ”¶é›†åæ’åºå»é‡ï¼Œæ˜ å°„åˆ°è¿ç»­æ•´æ•°ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¦»æ•£åŒ–æ˜¯å¤„ç†å¤§èŒƒå›´æ•°æ®çš„æ ¸å¿ƒæŠ€å·§ï¼Œæœ¬è´¨æ˜¯å°†æ— é™ç©ºé—´æ˜ å°„åˆ°æœ‰é™ç´¢å¼•ã€‚

2.  **éš¾ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆç»Ÿè®¡è¦†ç›–æ¬¡æ•°ï¼Ÿ**
    * **è§£å†³æ–¹æ¡ˆ**ï¼šæ‰«æçº¿ç®—æ³•ã€‚å°†æ¯ä¸ªçº¿æ®µæ‹†åˆ†ä¸ºä¸¤ä¸ªäº‹ä»¶ç‚¹ï¼ˆèµ·ç‚¹+1ï¼Œç»ˆç‚¹-1ï¼‰ï¼Œæ’åºåæ‰«æç»´æŠ¤å½“å‰è¦†ç›–å±‚æ•°ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ‰«æçº¿ç®—æ³•å°†åŠ¨æ€ç»´æŠ¤é—®é¢˜è½¬åŒ–ä¸ºé™æ€äº‹ä»¶å¤„ç†ï¼Œå¤æ‚åº¦ä»O(åæ ‡èŒƒå›´)ä¼˜åŒ–åˆ°O(äº‹ä»¶æ•°)ã€‚

3.  **éš¾ç‚¹3ï¼šå¦‚ä½•ç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„åŒºé—´é•¿åº¦ï¼Ÿ**
    * **è§£å†³æ–¹æ¡ˆ**ï¼šæ‰«æè¿‡ç¨‹ä¸­ï¼Œå½“å½“å‰è¦†ç›–å±‚æ•°â‰¥Kæ—¶ï¼Œç´¯åŠ å½“å‰äº‹ä»¶ç‚¹ä¸å‰ä¸€ç‚¹çš„è·ç¦»ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ³¨æ„ç¦»æ•£åŒ–åç›¸é‚»äº‹ä»¶ç‚¹çš„å®é™…è·ç¦»éœ€ç”¨åŸå§‹åæ ‡è®¡ç®—ï¼ˆ`åŸå§‹åæ ‡[i] - åŸå§‹åæ ‡[i-1]`ï¼‰ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
-   **æŠ€å·§1ï¼šäº‹ä»¶ç‚¹è½¬åŒ–**ï¼šå°†åŒºé—´æ“ä½œè½¬åŒ–ä¸ºç«¯ç‚¹äº‹ä»¶ï¼ˆèµ·ç‚¹+1ï¼Œç»ˆç‚¹-1ï¼‰æ˜¯å¤„ç†è¦†ç›–é—®é¢˜çš„æ ¸å¿ƒæŠ€å·§ã€‚
-   **æŠ€å·§2ï¼šæ‰«æçº¿æµç¨‹**ï¼šæ’åºäº‹ä»¶ç‚¹ â†’ é¡ºåºæ‰«æ â†’ ç»´æŠ¤å½“å‰çŠ¶æ€ â†’ è§¦å‘æ¡ä»¶æ—¶ç»Ÿè®¡ã€‚
-   **æŠ€å·§3ï¼šç¦»æ•£åŒ–å®ç°**ï¼šæ”¶é›†åæ ‡ â†’ æ’åºå»é‡ â†’ å»ºç«‹æ˜ å°„ï¼ˆåŸåæ ‡â†’ç´¢å¼•ï¼‰â†’ é€†å‘ç´¢å¼•ï¼ˆç´¢å¼•â†’åŸåæ ‡ï¼‰ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ
| ç­–ç•¥          | æ ¸å¿ƒæ€æƒ³                     | ä¼˜ç‚¹                     | ç¼ºç‚¹                     | é€‚ç”¨åœºæ™¯/å¾—åˆ† |
|---------------|------------------------------|--------------------------|--------------------------|--------------|
| **æš´åŠ›æ¨¡æ‹Ÿ**  | ç›´æ¥æ¨¡æ‹Ÿæ¯ä¸ªæ …æ å•å…ƒ         | ç®€å•ç›´è§‚                 | æ—¶ç©ºå¤æ‚åº¦O(åæ ‡èŒƒå›´)ï¼Œä¸å¯è¡Œ | 0åˆ†          |
| **å·®åˆ†+ç¦»æ•£åŒ–** | ç¦»æ•£åŒ–åå·®åˆ†ä¿®æ”¹ï¼Œå‰ç¼€å’Œè¿˜åŸ | ä¸¥æ ¼ç¬¦åˆå·®åˆ†æ•°ç»„ç†è®ºæ¨¡å‹ | éœ€é¢å¤–å­˜å‚¨åŸå§‹åæ ‡       | 100åˆ†        |
| **æ‰«æçº¿**    | äº‹ä»¶ç‚¹æ’åºæ‰«æåŠ¨æ€ç»´æŠ¤å±‚æ•°   | ä»£ç ç®€æ´é«˜æ•ˆï¼Œç©ºé—´æœ€ä¼˜   | éœ€ç†è§£äº‹ä»¶ç‚¹è§¦å‘é€»è¾‘     | 100åˆ†        |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»"èƒ½åš"åˆ°"åšå¥½"
> 1. **èµ·ç‚¹ï¼šæš´åŠ›æ¨¡æ‹Ÿçš„å›°å¢ƒ**  
>    æœ€åˆæƒ³æ³•æ˜¯å¼€æ•°ç»„è®°å½•æ¯ä¸ªæ …æ çš„æ¶‚è‰²æ¬¡æ•°ã€‚ä½†å½“åæ ‡èŒƒå›´è¾¾2e9æ—¶ï¼Œå³ä½¿æ¯å¾®ç§’å¤„ç†1ä¸ªç‚¹ä¹Ÿéœ€è¦2000ç§’ï¼  
>   
> 2. **å‘ç°ç“¶é¢ˆï¼šé‡å¤å­˜å‚¨ä¸è®¡ç®—**  
>    è§‚å¯Ÿåˆ°å¤§éƒ¨åˆ†åæ ‡ç‚¹ä»æœªè¢«è®¿é—®ï¼ŒçœŸæ­£æœ‰ç”¨çš„åªæ˜¯çº¿æ®µç«¯ç‚¹ã€‚  
>   
> 3. **ä¼˜åŒ–é’¥åŒ™ï¼šç¦»æ•£åŒ–**  
>    å°†ç¨€ç–çš„ç«¯ç‚¹åæ ‡æ˜ å°„åˆ°è¿ç»­æ•´æ•°ï¼Œç©ºé—´ä»O(åæ ‡èŒƒå›´)é™åˆ°O(N)ã€‚  
>   
> 4. **äºŒæ¬¡ä¼˜åŒ–ï¼šæ‰«æçº¿æ›¿ä»£å·®åˆ†**  
>    å·®åˆ†æ•°ç»„ä»éœ€O(N)ç©ºé—´å­˜å‚¨ç¦»æ•£åŒ–åæ¯ä¸ª"ç‚¹"çš„å€¼ã€‚æ‰«æçº¿ç®—æ³•ç›´æ¥åœ¨äº‹ä»¶æµä¸­ç»Ÿè®¡ç»“æœï¼Œç©ºé—´é™è‡³O(1)ã€‚  
>   
> ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼š"æ‰«æçº¿+ç¦»æ•£åŒ–"ç»„åˆæ‹³ï¼Œå°†ä¸å¯è¡Œé—®é¢˜å˜ä¸ºé«˜æ•ˆè§£æ³•ï¼Œå±•ç°äº†ç®—æ³•ä¼˜åŒ–ä¸­"é—®é¢˜è½¬åŒ–"çš„ç²¾é«“ï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°ï¼ˆæ‰«æçº¿ï¼‰
```cpp
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

struct Event {
    int pos;    // åŸå§‹åæ ‡
    int delta;  // äº‹ä»¶ç±»å‹ï¼š+1èµ·ç‚¹/-1ç»ˆç‚¹
    bool operator<(const Event& e) const { return pos < e.pos; }
};

int main() {
    int N, K;
    cin >> N >> K;
    vector<Event> events;
    int current = 0; // å½“å‰ä½ç½®

    // 1. è¯»å–ç§»åŠ¨å¹¶ç”Ÿæˆäº‹ä»¶ç‚¹
    for (int i = 0; i < N; ++i) {
        int dist;
        char dir;
        cin >> dist >> dir;
        int next = current + (dir == 'R' ? dist : -dist);
        events.push_back({min(current, next), 1});   // çº¿æ®µèµ·ç‚¹
        events.push_back({max(current, next), -1});  // çº¿æ®µç»ˆç‚¹
        current = next;
    }

    // 2. æŒ‰åæ ‡æ’åºäº‹ä»¶ç‚¹
    sort(events.begin(), events.end());

    // 3. æ‰«æç»Ÿè®¡
    int coverage = 0, totalLen = 0;
    for (int i = 0; i < events.size(); ++i) {
        // è‹¥å½“å‰è¦†ç›–å±‚æ•°â‰¥Kï¼Œç´¯åŠ [å‰ä¸€ç‚¹,å½“å‰ç‚¹]çš„åŒºé—´é•¿åº¦
        if (i > 0 && coverage >= K) {
            totalLen += events[i].pos - events[i-1].pos;
        }
        coverage += events[i].delta; // æ›´æ–°è¦†ç›–å±‚æ•°
    }
    cout << totalLen << endl;
    return 0;
}
```

### é¢˜è§£ç‰‡æ®µèµæ
**é¢˜è§£ä¸€ï¼šHades18**  
* **äº®ç‚¹**ï¼šç²¾ç®€é«˜æ•ˆçš„æ‰«æçº¿å®ç°  
* **æ ¸å¿ƒç‰‡æ®µ**ï¼š
```cpp
sort(line+1,line+l+1);
now=line[1].val;
for(i=2;i<=l;++i) {
    if(now>=m) ans+=line[i].x-line[i-1].x;
    now+=line[i].val;
}
```
* **è§£è¯»**ï¼š  
  - `line`æ•°ç»„å­˜å‚¨äº‹ä»¶ç‚¹ï¼ˆ`x`åæ ‡+`val`å˜åŒ–å€¼ï¼‰  
  - æ’åºåé¡ºåºæ‰«æï¼Œ`now`ç»´æŠ¤å½“å‰è¦†ç›–å±‚æ•°  
  - å½“`now>=m`ï¼ˆå³Kï¼‰æ—¶ç´¯åŠ åŒºé—´é•¿åº¦  

**é¢˜è§£äºŒï¼šueettttuj**  
* **äº®ç‚¹**ï¼šæ¸…æ™°çš„äº‹ä»¶ç‚¹å‘½åä¸æ³¨é‡Š  
* **æ ¸å¿ƒç‰‡æ®µ**ï¼š
```cpp
for(long long i=1;i<=cnt;i++){
    if(a[i].flag==1) col++;   // é‡åˆ°èµ·ç‚¹ï¼šè¦†ç›–å±‚æ•°+1
    else col--;                // é‡åˆ°ç»ˆç‚¹ï¼šè¦†ç›–å±‚æ•°-1
    if(col>=k) ans += (a[i+1].x - a[i].x); // æ»¡è¶³æ¡ä»¶åˆ™ç´¯åŠ 
}
```
* **è§£è¯»**ï¼š  
  - ä½¿ç”¨`flag`æ˜ç¡®åŒºåˆ†èµ·ç‚¹(+1)å’Œç»ˆç‚¹(-1)  
  - ç›´æ¥åœ¨å¾ªç¯ä¸­åˆ¤æ–­å¹¶ç´¯åŠ æœ‰æ•ˆåŒºé—´  

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š8-bitåƒç´ é£æ ¼æ‰«æçº¿æ¢é™©  

**æ ¸å¿ƒæ¼”ç¤ºæµç¨‹**ï¼š  
1. **åˆå§‹åŒ–**ï¼šæ•°è½´ä»¥åƒç´ ç½‘æ ¼å‘ˆç°ï¼ˆæ£•è‰²æ …æ èƒŒæ™¯ï¼‰ï¼ŒBessieåƒç´ è§’è‰²åˆå§‹ä½ç½®0  
   - æ§åˆ¶é¢æ¿ï¼šå¼€å§‹/æš‚åœ/æ­¥è¿›æŒ‰é’® + é€Ÿåº¦æ»‘å—  
   - ä¿¡æ¯æ ï¼šå½“å‰åæ ‡/è¦†ç›–å±‚æ•°/ç´¯è®¡é•¿åº¦  

2. **äº‹ä»¶ç‚¹ç”Ÿæˆ**ï¼ˆä¼´éšéŸ³æ•ˆï¼‰ï¼š  
   - å½“Bessieç§»åŠ¨æ—¶ï¼šèµ·ç‚¹æ˜¾ç¤ºâ†‘å›¾æ ‡ï¼ˆ+1äº‹ä»¶ï¼‰ï¼Œç»ˆç‚¹æ˜¾ç¤ºâ†“å›¾æ ‡ï¼ˆ-1äº‹ä»¶ï¼‰  
   - éŸ³æ•ˆï¼šç”Ÿæˆäº‹ä»¶ç‚¹æ—¶æ’­æ”¾çŸ­ä¿ƒ"å®"å£°  

3. **æ‰«æè¿‡ç¨‹**ï¼š  
   - åƒç´ æŒ‡é’ˆä»å·¦å‘å³æ‰«æäº‹ä»¶ç‚¹  
   - ç»è¿‡äº‹ä»¶ç‚¹æ—¶ï¼šBessieè·³è·ƒåˆ°æ–°ä½ç½®ï¼Œè¦†ç›–å±‚æ•°æ•°å­—å˜åŒ–  
   - å½“è¦†ç›–å±‚æ•°â‰¥Kï¼šå¯¹åº”åŒºé—´é«˜äº®ä¸ºé‡‘è‰²ï¼Œæ’­æ”¾"é‡‘å¸"éŸ³æ•ˆ  
   - å®æ—¶æ˜¾ç¤ºï¼š`å½“å‰è¦†ç›–å±‚æ•°Ã—åŒºé—´é•¿åº¦=ç´¯è®¡é•¿åº¦`  

4. **å®Œæˆæ•ˆæœ**ï¼š  
   - è¢«æ¶‚â‰¥Kå±‚çš„åŒºé—´æ°¸ä¹…é«˜äº®ä¸ºé‡‘è‰²  
   - æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ + æ˜¾ç¤ºæ€»é•¿åº¦  

**æŠ€æœ¯å®ç°è¦ç‚¹**ï¼š  
- ä½¿ç”¨Canvasç»˜åˆ¶åƒç´ ç½‘æ ¼å’ŒåŠ¨æ€å…ƒç´   
- äº‹ä»¶é˜Ÿåˆ—é©±åŠ¨åŠ¨ç”»ï¼ŒsetIntervalæ§åˆ¶å¸§ç‡  
- éŸ³æ•ˆä½¿ç”¨Web Audio APIï¼Œ8-bité£æ ¼éŸ³æ•ˆ  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
æ‰«æçº¿+ç¦»æ•£åŒ–æŠ€å·§é€‚ç”¨äºï¼š
1. åŒºé—´è¦†ç›–ç»Ÿè®¡ï¼ˆå¦‚ï¼šP2205ï¼‰
2. åŒºé—´åˆå¹¶ï¼ˆå¦‚ï¼šåˆå¹¶é‡å åŒºé—´ï¼‰
3. çŸ©å½¢é¢ç§¯å¹¶/äº¤ï¼ˆå¦‚ï¼šæ‰«æçº¿æ±‚å¤šä¸ªçŸ©å½¢è¦†ç›–é¢ç§¯ï¼‰

### æ¨èç»ƒä¹ ï¼ˆæ´›è°·ï¼‰
1. **P2070 åˆ·å¢™**  
   ğŸ—£ï¸ åŒå€ç»éªŒï¼å‡ ä¹ç›¸åŒçš„é¢˜ç›®ï¼Œå·©å›ºæ‰«æçº¿åº”ç”¨  
2. **P3406 æµ·åº•é«˜é“**  
   ğŸ—£ï¸ è¿›é˜¶ç‰ˆåŒºé—´è¦†ç›–é—®é¢˜ï¼Œç»“åˆå‰ç¼€å’Œä¸è´ªå¿ƒ  
3. **P2184 è´ªå©ªå¤§é™†**  
   ğŸ—£ï¸ éœ€è¦å·§å¦™è½¬åŒ–ä¸ºæ‰«æçº¿æ¨¡å‹ï¼Œè®­ç»ƒé—®é¢˜æŠ½è±¡èƒ½åŠ›  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªé¢˜è§£ä½œè€…çš„è°ƒè¯•ç»éªŒ**ï¼š  
> "æœ€åˆæˆ‘ç›´æ¥ç”¨å·®åˆ†æ•°ç»„ä½†å¿˜äº†ç¦»æ•£åŒ–ï¼Œå¯¼è‡´REã€‚åæ¥ç”¨æ‰«æçº¿æ—¶åˆæ··æ·†äº†èµ·ç‚¹ç»ˆç‚¹äº‹ä»¶ç±»å‹ï¼ŒWAä¸¤æ¬¡åæ‰ç†è§£æ¸…æ¥šæ–¹å‘ä¸åæ ‡å¢å‡çš„å…³ç³»ã€‚"  
>  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> è¿™ä¸ªç»éªŒå‡¸æ˜¾äº†ä¸¤ä¸ªå…³é”®ç‚¹ï¼š  
> 1. **ç¦»æ•£åŒ–å¿…è¦æ€§**ï¼šé¢å¯¹å¤§èŒƒå›´æ•°æ®ï¼Œç¦»æ•£åŒ–ä¸æ˜¯å¯é€‰é¡¹è€Œæ˜¯å¿…é€‰é¡¹  
> 2. **æ–¹å‘å¤„ç†æŠ€å·§**ï¼šç§»åŠ¨æ–¹å‘ï¼ˆL/Rï¼‰ä¸åæ ‡å¢å‡å…³ç³»éœ€é€šè¿‡`min/max`æ˜¾å¼å¤„ç†  

---

<conclusion>
æœ¬æ¬¡å¯¹ã€ŒPainting the Fence Sã€çš„æ¢ç´¢å±•ç°äº†ç®—æ³•ä¼˜åŒ–ä¸­çš„ç»å…¸æ¨¡å¼ï¼šå½“æš´åŠ›è§£æ³•ä¸å¯è¡Œæ—¶ï¼Œé€šè¿‡**é—®é¢˜è½¬åŒ–**ï¼ˆç§»åŠ¨â†’çº¿æ®µâ†’äº‹ä»¶ç‚¹ï¼‰å’Œ**æ•°æ®å‹ç¼©**ï¼ˆç¦»æ•£åŒ–ï¼‰å¼€è¾Ÿæ–°è·¯å¾„ã€‚æ‰«æçº¿ç®—æ³•åœ¨æ­¤å±•ç°äº†ä¼˜é›…é«˜æ•ˆçš„æœ¬è´¨ã€‚è®°ä½ï¼šå¥½çš„è§£æ³•å¾€å¾€è¯ç”Ÿäºå¯¹é—®é¢˜ç‰¹æ€§çš„æ·±åº¦æ´å¯Ÿï¼ä¸‹æ¬¡æŒ‘æˆ˜è§ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š156.17ç§’
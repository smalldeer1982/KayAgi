# é¢˜ç›®ä¿¡æ¯

# [NOIP 2017 æé«˜ç»„] é€›å…¬å›­

## é¢˜ç›®èƒŒæ™¯

NOIP2017 D1T3

## é¢˜ç›®æè¿°

ç­–ç­–åŒå­¦ç‰¹åˆ«å–œæ¬¢é€›å…¬å›­ã€‚å…¬å›­å¯ä»¥çœ‹æˆä¸€å¼  $N$ ä¸ªç‚¹ $M$ æ¡è¾¹æ„æˆçš„æœ‰å‘å›¾ï¼Œä¸”æ²¡æœ‰ è‡ªç¯å’Œé‡è¾¹ã€‚å…¶ä¸­ $1$ å·ç‚¹æ˜¯å…¬å›­çš„å…¥å£ï¼Œ$N$ å·ç‚¹æ˜¯å…¬å›­çš„å‡ºå£ï¼Œæ¯æ¡è¾¹æœ‰ä¸€ä¸ªéè´Ÿæƒå€¼ï¼Œ ä»£è¡¨ç­–ç­–ç»è¿‡è¿™æ¡è¾¹æ‰€è¦èŠ±çš„æ—¶é—´ã€‚

ç­–ç­–æ¯å¤©éƒ½ä¼šå»é€›å…¬å›­ï¼Œä»–æ€»æ˜¯ä» $1$ å·ç‚¹è¿›å»ï¼Œä» $N$ å·ç‚¹å‡ºæ¥ã€‚

ç­–ç­–å–œæ¬¢æ–°é²œçš„äº‹ç‰©ï¼Œå®ƒä¸å¸Œæœ›æœ‰ä¸¤å¤©é€›å…¬å›­çš„è·¯çº¿å®Œå…¨ä¸€æ ·ï¼ŒåŒæ—¶ç­–ç­–è¿˜æ˜¯ä¸€ä¸ª ç‰¹åˆ«çƒ­çˆ±å­¦ä¹ çš„å¥½å­©å­ï¼Œå®ƒä¸å¸Œæœ›æ¯å¤©åœ¨é€›å…¬å›­è¿™ä»¶äº‹ä¸ŠèŠ±è´¹å¤ªå¤šçš„æ—¶é—´ã€‚å¦‚æœ $1$ å·ç‚¹ åˆ° $N$ å·ç‚¹çš„æœ€çŸ­è·¯é•¿ä¸º $d$ï¼Œé‚£ä¹ˆç­–ç­–åªä¼šå–œæ¬¢é•¿åº¦ä¸è¶…è¿‡ $d + K$ çš„è·¯çº¿ã€‚

ç­–ç­–åŒå­¦æƒ³çŸ¥é“æ€»å…±æœ‰å¤šå°‘æ¡æ»¡è¶³æ¡ä»¶çš„è·¯çº¿ï¼Œä½ èƒ½å¸®å¸®å®ƒå—ï¼Ÿ

ä¸ºé¿å…è¾“å‡ºè¿‡å¤§ï¼Œç­”æ¡ˆå¯¹ $P$ å–æ¨¡ã€‚

å¦‚æœæœ‰æ— ç©·å¤šæ¡åˆæ³•çš„è·¯çº¿ï¼Œè¯·è¾“å‡º $-1$ã€‚


## è¯´æ˜/æç¤º

ã€æ ·ä¾‹è§£é‡Š1ã€‘


å¯¹äºç¬¬ä¸€ç»„æ•°æ®ï¼Œæœ€çŸ­è·¯ä¸º $3$ã€‚ $1\to 5, 1\to 2\to 4\to 5, 1\to 2\to 3\to 5$ ä¸º $3$ æ¡åˆæ³•è·¯å¾„ã€‚


ã€æµ‹è¯•æ•°æ®ä¸çº¦å®šã€‘

å¯¹äºä¸åŒçš„æµ‹è¯•ç‚¹ï¼Œæˆ‘ä»¬çº¦å®šå„ç§å‚æ•°çš„è§„æ¨¡ä¸ä¼šè¶…è¿‡å¦‚ä¸‹


æµ‹è¯•ç‚¹ç¼–å·ã€€ã€€|$T$ã€€ã€€ã€€|$N$ã€€ã€€ã€€|$M$ã€€ã€€ã€€|$K$ã€€ã€€ã€€|æ˜¯å¦æœ‰ $0$ è¾¹
-|-|-|-|-|-
$1$|$5$|$5$|$10$|$0$|å¦
$2$|$5$|$10^3$|$2\times 10^3$|$0$|å¦
$3$|$5$|$10^3$|$2\times 10^3$|$50$|å¦
$4$|$5$|$10^3$|$2\times 10^3$|$50$|å¦
$5$|$5$|$10^3$|$2\times 10^3$|$50$|å¦
$6$|$5$|$10^3$|$2\times 10^3$|$50$|æ˜¯
$7$|$5$|$10^5$|$2\times 10^5$|$0$|å¦
$8$|$3$|$10^5$|$2\times 10^5$|$50$|å¦
$9$|$3$|$10^5$|$2\times 10^5$|$50$|æ˜¯
$10$|$3$|$10^5$|$2\times 10^5$|$50$|æ˜¯


å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 \le P \le 10^9$ï¼Œ$1 \le a_i,b_i \le N$ï¼Œ$0 \le c_i \le 1000$ã€‚

æ•°æ®ä¿è¯ï¼šè‡³å°‘å­˜åœ¨ä¸€æ¡åˆæ³•çš„è·¯çº¿ã€‚

---

- 2019.8.30 å¢åŠ äº†ä¸€ç»„ hack æ•°æ® by @skicean
- 2022.7.21 å¢åŠ äº†ä¸€ç»„ hack æ•°æ® by @djwj233

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
5 7 2 10
1 2 1
2 4 0
4 5 2
2 3 2
3 4 1
3 5 2
1 5 3
2 2 0 10
1 2 0
2 1 0```

### è¾“å‡º

```
3
-1

```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šé€›å…¬å›­ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©ï¼Œæˆ‘ä»¬åŒ–èº«â€œç®—æ³•ä¾¦æ¢â€ï¼Œä¸€èµ·ç ´è§£ **NOIP2017 æé«˜ç»„ D1T3ï¼šé€›å…¬å›­**ã€‚è¿™ä¸ä»…æ˜¯å›¾è®ºä¸åŠ¨æ€è§„åˆ’çš„ç»å…¸ç¢°æ’ï¼Œæ›´æ˜¯ä¸€æ¬¡â€œå¦‚ä½•ä¼˜é›…å¤„ç†é›¶ç¯â€çš„æ€ç»´è®­ç»ƒã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

### âœ¨ æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜
> **â€œå¦‚ä½•ç»Ÿè®¡æ‰€æœ‰é•¿åº¦ â‰¤ æœ€çŸ­è·¯ + K çš„è·¯å¾„æ¡æ•°ï¼Œå¹¶ä¼˜é›…åœ°è¯†åˆ«é›¶ç¯å¯¼è‡´çš„æ— ç©·è§£ï¼Ÿâ€**  
> å…³é”®åœ¨äºï¼š  
> 1. **æœ€çŸ­è·¯çº¦æŸ**ï¼šè·¯å¾„é•¿åº¦å¿…é¡» â‰¤ `d(1â†’n) + K`ã€‚  
> 2. **é›¶ç¯é™·é˜±**ï¼šè‹¥å­˜åœ¨ä¸€ä¸ªé›¶ç¯ï¼ˆè¾¹æƒå’Œä¸º0çš„ç¯ï¼‰ï¼Œä¸”è¯¥ç¯ä½äºæŸæ¡åˆæ³•è·¯å¾„ä¸Šï¼Œåˆ™ç­”æ¡ˆä¸ºæ— ç©·ã€‚

### âœ¨ æ ¸å¿ƒç®—æ³•æ ‡ç­¾
- æœ€çŸ­è·¯ç®—æ³•ï¼ˆDijkstraï¼‰
- åŠ¨æ€è§„åˆ’ï¼ˆDP on DAGï¼‰
- é›¶ç¯æ£€æµ‹ï¼ˆTarjan/è®°å¿†åŒ–æœç´¢ï¼‰

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

| çº¿ç´¢ | é¢˜ç›®åŸæ–‡ | ä¾¦æ¢è§£è¯» |
|---|---|---|
| **çº¿ç´¢1ï¼šæœ€çŸ­è·¯çº¦æŸ** | *â€œé•¿åº¦ä¸è¶…è¿‡ `d + K`â€* | æç¤ºéœ€å…ˆæ±‚æœ€çŸ­è·¯ï¼Œå¹¶å°†â€œå¤šä½™é•¿åº¦â€ä½œä¸ºçŠ¶æ€ç»´åº¦ã€‚ |
| **çº¿ç´¢2ï¼šKå¾ˆå°** | *`K â‰¤ 50`* | æš—ç¤ºå¯å°† `kâˆˆ[0,K]` ä½œä¸ºDPçš„ç¬¬äºŒç»´ï¼Œå¤æ‚åº¦ `O((N+M)K)`ã€‚ |
| **çº¿ç´¢3ï¼šé›¶è¾¹ä¸é›¶ç¯** | *â€œæ— ç©·å¤šæ¡åˆæ³•è·¯çº¿â€* | éœ€æ£€æµ‹é›¶ç¯ï¼Œä¸”è¯¥ç¯å¿…é¡»ä½äºâ€œå¯è¢«åˆæ³•è·¯å¾„ç»è¿‡â€çš„å­å›¾ä¸­ã€‚ |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> â€œä¾¦æ¢æ‹¼å›¾å®Œæˆï¼  
> 1. **çº¿ç´¢1**å‘Šè¯‰æˆ‘ä»¬ï¼šå…ˆè·‘Dijkstraæ±‚æœ€çŸ­è·¯ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºâ€œå¤šä½™é•¿åº¦â€çš„è®¡æ•°ã€‚  
> 2. **çº¿ç´¢2**å‘Šè¯‰æˆ‘ä»¬ï¼šç”¨`dp[u][k]`è¡¨ç¤ºâ€œåˆ°èŠ‚ç‚¹`u`ï¼Œæ¯”æœ€çŸ­è·¯å¤šèµ°äº†`k`æ­¥â€çš„æ–¹æ¡ˆæ•°ã€‚  
> 3. **çº¿ç´¢3**æé†’æˆ‘ä»¬ï¼šé›¶ç¯è‹¥å­˜åœ¨äºâ€œ`dis[1â†’u] + dis[uâ†’n] â‰¤ dis[1â†’n]+K`â€çš„å­å›¾ä¸­ï¼Œåˆ™ç­”æ¡ˆä¸º`-1`ã€‚â€

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šJay_geniusï¼ˆèµï¼š28ï¼‰â€”â€”è®°å¿†åŒ–æœç´¢å…¸èŒƒ
> **äº®ç‚¹**ï¼š  
> - **çŠ¶æ€è®¾è®¡**ï¼š`dp[u][k]`å®šä¹‰ä¸ºâ€œåˆ°`u`ä¸”æ¯”æœ€çŸ­è·¯å¤š`k`æ­¥â€çš„æ–¹æ¡ˆæ•°ï¼Œè½¬ç§»æ–¹ç¨‹ä¼˜é›…ï¼š  
>   `k' = dis[u] - dis[v] + k - w`ã€‚  
> - **é›¶ç¯æ£€æµ‹**ï¼šé€šè¿‡`vis2[u][k]`æ ‡è®°é€’å½’æ ˆï¼Œè‹¥é‡å¤è®¿é—®åˆ™å­˜åœ¨é›¶ç¯ã€‚  
> - **ä»£ç é£æ ¼**ï¼šå˜é‡å‘½åæ¸…æ™°ï¼Œåå›¾æ„å»ºå·§å¦™ã€‚

---

### é¢˜è§£äºŒï¼š2014å•æ³½é¾™ï¼ˆèµï¼š23ï¼‰â€”â€”åˆ†å±‚å›¾æ‹“æ‰‘DP
> **äº®ç‚¹**ï¼š  
> - **åˆ†å±‚å›¾æ€æƒ³**ï¼šå°†â€œå¤šä½™æ­¥æ•°`k`â€åˆ†å±‚ï¼Œæ„å»ºDAGåæ‹“æ‰‘æ’åºã€‚  
> - **é›¶ç¯å¤„ç†**ï¼šé€šè¿‡Tarjanç¼©ç‚¹ï¼Œä»…ä¿ç•™â€œå¯è¢«åˆæ³•è·¯å¾„ç»è¿‡â€çš„é›¶ç¯ã€‚  
> - **å¤æ‚åº¦ä¼˜åŒ–**ï¼š`O(KM)`ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®ã€‚

---

### é¢˜è§£ä¸‰ï¼šDASADIï¼ˆèµï¼š7ï¼‰â€”â€”æ–°æ‰‹å‹å¥½ç‰ˆ
> **äº®ç‚¹**ï¼š  
> - **åˆ†æ­¥æ•™å­¦**ï¼šä»`K=0`çš„æœ€çŸ­è·¯è®¡æ•°ï¼Œåˆ°`K>0`çš„DPï¼Œæœ€ååˆ°é›¶ç¯æ£€æµ‹ã€‚  
> - **å‘ç‚¹æ€»ç»“**ï¼š  
>   - `j<0`éœ€ç‰¹åˆ¤ã€‚  
>   - å…ˆæœç´¢`f[1][0]`å†èµ‹å€¼`1`ï¼Œé¿å…é›¶ç¯è¯¯åˆ¤ã€‚  
> - **ä»£ç å®‰å…¨**ï¼šå¤šæµ‹æ¸…ç©ºã€å–æ¨¡ã€è¾¹ç•Œæ£€æŸ¥ä¸€åº”ä¿±å…¨ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤

#### 1. æœ€çŸ­è·¯ä¸çŠ¶æ€è®¾è®¡
- **å…³é”®ç‚¹**ï¼šç”¨Dijkstraæ±‚`dis[u]`ï¼ˆ1åˆ°uçš„æœ€çŸ­è·¯ï¼‰ã€‚  
- **çŠ¶æ€**ï¼š`dp[u][k]`è¡¨ç¤ºâ€œåˆ°`u`ï¼Œè·¯å¾„é•¿åº¦=`dis[u]+k`â€çš„æ–¹æ¡ˆæ•°ã€‚  
- **å­¦ä¹ ç¬”è®°**ï¼šå°†â€œè·¯å¾„é•¿åº¦â€è½¬åŒ–ä¸ºâ€œæ¯”æœ€çŸ­è·¯å¤šèµ°çš„æ­¥æ•°â€ï¼Œå°†é—®é¢˜å‹ç¼©åˆ°`K`ç»´ã€‚

#### 2. åŠ¨æ€è§„åˆ’è½¬ç§»
- **è½¬ç§»æ–¹ç¨‹**ï¼š  
  ```cpp
  dp[u][k] = Î£ dp[v][k + dis[u] - dis[v] - w] 
  ```
  å…¶ä¸­`k + dis[u] - dis[v] - w`éœ€æ»¡è¶³`0 â‰¤ k' â‰¤ K`ã€‚  
- **å­¦ä¹ ç¬”è®°**ï¼šè½¬ç§»é¡ºåºéœ€ä¿è¯æ— åæ•ˆæ€§â€”â€”å¯è®°å¿†åŒ–æœç´¢æˆ–æŒ‰`dis[u]`æ‹“æ‰‘æ’åºã€‚

#### 3. é›¶ç¯æ£€æµ‹
- **æ–¹æ³•Aï¼ˆè®°å¿†åŒ–ï¼‰**ï¼šåœ¨DFSä¸­æ ‡è®°é€’å½’æ ˆ`vis[u][k]`ï¼Œè‹¥é‡å¤è®¿é—®åˆ™å­˜åœ¨é›¶ç¯ã€‚  
- **æ–¹æ³•Bï¼ˆTarjanï¼‰**ï¼š  
  1. æ„å»ºä»…å«é›¶è¾¹çš„å­å›¾ã€‚  
  2. ç”¨Tarjanæ±‚SCCï¼Œè‹¥æŸSCCå¤§å°>1ä¸”æ»¡è¶³`dis[1â†’u] + dis[uâ†’n] â‰¤ dis[1â†’n]+K`ï¼Œåˆ™å­˜åœ¨æ— ç©·è§£ã€‚  
- **å­¦ä¹ ç¬”è®°**ï¼šé›¶ç¯å¿…é¡»â€œå¯è¢«åˆæ³•è·¯å¾„ç»è¿‡â€æ‰å½±å“ç­”æ¡ˆã€‚

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---|---|---|---|---|
| **æš´åŠ›DFS** | ç›´æ¥æšä¸¾æ‰€æœ‰è·¯å¾„ | æ€è·¯ç›´è§‚ | æŒ‡æ•°çº§å¤æ‚åº¦ï¼Œæ— æ³•å¤„ç†é›¶ç¯ | å°æ ·ä¾‹ |
| **è®°å¿†åŒ–æœç´¢** | `dp[u][k]` + é€’å½’æ ˆåˆ¤ç¯ | ä»£ç ç®€æ´ï¼Œé›¶ç¯æ£€æµ‹è‡ªç„¶ | é€’å½’æ·±åº¦å¯èƒ½è¾ƒå¤§ | æ ‡å‡†è§£æ³•ï¼Œ`O((N+M)K)` |
| **æ‹“æ‰‘æ’åº** | æ„å»ºDAGååˆ†å±‚DP | æ— é€’å½’å¼€é”€ï¼Œç†è®ºæœ€ä¼˜ | éœ€å¤„ç†é›¶è¾¹æ‹“æ‰‘åº | å¤§è§„æ¨¡æ•°æ® |

---

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> â€œä»æš´åŠ›DFSåˆ°è®°å¿†åŒ–æœç´¢ï¼Œæˆ‘ä»¬ç»å†äº†ï¼š  
> 1. **çŠ¶æ€å‹ç¼©**ï¼šå°†è·¯å¾„é•¿åº¦è½¬åŒ–ä¸ºâ€˜å¤šä½™æ­¥æ•°â€™ï¼ŒæŠŠ`O(2^N)`çš„æš´åŠ›å˜ä¸º`O(NK)`ã€‚  
> 2. **é›¶ç¯æ£€æµ‹**ï¼šä»â€˜ç›²ç›®åˆ¤ç¯â€™åˆ°â€˜ä»…æ£€æŸ¥å½±å“ç­”æ¡ˆçš„é›¶ç¯â€™ï¼Œé¿å…è¯¯åˆ¤ã€‚  
> 3. **ä»£ç é²æ£’æ€§**ï¼šå¤„ç†å¤šæµ‹æ¸…ç©ºã€è¾¹ç•Œæ¡ä»¶ã€å–æ¨¡ï¼Œç¡®ä¿ACã€‚â€

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆè®°å¿†åŒ–æœç´¢ç‰ˆï¼‰
```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
typedef pair<ll, ll> PLL;
const int N = 1e5 + 10, K = 55;
vector<PLL> e1[N], e2[N]; // æ­£å›¾ä¸åå›¾
ll dis[N], dp[N][K];
bool vis[N], inStack[N][K];
int n, m, k, p;

void dijkstra() {
    priority_queue<PLL, vector<PLL>, greater<PLL>> q;
    fill(dis + 1, dis + n + 1, 1e18);
    dis[1] = 0;
    q.push({0, 1});
    while (!q.empty()) {
        auto [d, u] = q.top(); q.pop();
        if (vis[u]) continue;
        vis[u] = 1;
        for (auto [v, w] : e1[u]) {
            if (dis[v] > dis[u] + w) {
                dis[v] = dis[u] + w;
                q.push({dis[v], v});
            }
        }
    }
}

ll dfs(int u, int d) {
    if (d < 0 || d > k) return 0;
    if (inStack[u][d]) return -1; // é›¶ç¯
    if (dp[u][d] != -1) return dp[u][d];
    inStack[u][d] = 1;
    ll res = 0;
    for (auto [v, w] : e2[u]) {
        int nd = d + dis[u] - dis[v] - w;
        ll tmp = dfs(v, nd);
        if (tmp == -1) return -1;
        res = (res + tmp) % p;
    }
    inStack[u][d] = res;
    inStack[u][d] = 0;
    return res;
}

int main() {
    ios::sync_with_stdio(0);
    cin.tie(0);
    int T; cin >> T;
    while (T--) {
        cin >> n >> m >> k >> p;
        for (int i = 1; i <= n; ++i) {
            e1[i].clear(); e2[i].clear();
            vis[i] = 0;
            for (int j = 0; j <= k; ++j) dp[i][j] = -1;
        }
        for (int i = 0; i < m; ++i) {
            int u, v, w; cin >> u >> v >> w;
            e1[u].push_back({v, w});
            e2[v].push_back({u, w}); // åå›¾
        }
        dijkstra();
        ll ans = 0;
        bool inf = 0;
        for (int i = 0; i <= k; ++i) {
            ll tmp = dfs(n, i);
            if (tmp == -1) { inf = 1; break; }
            ans = (ans + tmp) % p;
        }
        cout << (inf ? -1 : ans) << '\n';
    }
}
```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜ï¼šåƒç´ æ¢é™©å®¶çš„â€œé›¶ç¯è¿·å®«â€
- **åœºæ™¯è®¾è®¡**ï¼š  
  - 8ä½åƒç´ ç½‘æ ¼å›¾ï¼ŒèŠ‚ç‚¹ä¸ºåƒç´ æ–¹å—ï¼Œè¾¹ä¸ºç®­å¤´ã€‚  
  - é›¶è¾¹ç”¨ç»¿è‰²é—ªçƒï¼Œé›¶ç¯ç”¨çº¢è‰²é«˜äº®ã€‚  
  - å·¦ä¸Šè§’æ˜¾ç¤ºå½“å‰`dp[u][k]`å€¼ï¼Œå³ä¸Šè§’ä¸ºâ€œå¤šä½™æ­¥æ•°`k`â€æ»‘å—ã€‚

- **äº¤äº’æ§åˆ¶**ï¼š  
  - **å•æ­¥/è‡ªåŠ¨**ï¼šæŒ‰ç©ºæ ¼é”®å•æ­¥DFSï¼Œ`k`å€¼å®æ—¶æ›´æ–°ã€‚  
  - **é›¶ç¯æ£€æµ‹**ï¼šå½“DFSå›åˆ°å·²è®¿é—®èŠ‚ç‚¹æ—¶ï¼Œçº¢è‰²è­¦æŠ¥â€œZero Ring Detected!â€å¹¶æ’­æ”¾FCé£æ ¼è­¦æŠ¥éŸ³ã€‚

- **éŸ³æ•ˆè®¾è®¡**ï¼š  
  - èŠ‚ç‚¹è®¿é—®ï¼š`blip`ï¼ˆ8ä½è·³è·ƒéŸ³ï¼‰ã€‚  
  - é›¶ç¯å‘ç°ï¼š`dun-dun-dun`ï¼ˆå¤±è´¥éŸ³æ•ˆï¼‰ã€‚  
  - æˆåŠŸç»Ÿè®¡ç­”æ¡ˆï¼š`ta-da!`ï¼ˆèƒœåˆ©éŸ³æ•ˆï¼‰ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **åˆ†å±‚å›¾DP**ï¼šé€‚ç”¨äºâ€œè·¯å¾„é•¿åº¦æœ‰ä¸Šé™çº¦æŸâ€çš„é—®é¢˜ï¼Œå¦‚ï¼š  
  1. **èˆªç­è½¬æœº**ï¼šæœ€å¤šè½¬æœº`K`æ¬¡çš„æœ€ä¾¿å®œç¥¨ä»·ã€‚  
  2. **ç½‘ç»œå»¶è¿Ÿ**ï¼šè·¯å¾„å»¶è¿Ÿâ‰¤é˜ˆå€¼`K`çš„å¯é è·¯å¾„è®¡æ•°ã€‚  
  3. **æ¸¸æˆå…³å¡**ï¼šæœ€å¤šå¤±è¯¯`K`æ¬¡çš„é€šå…³æ–¹æ¡ˆæ•°ã€‚

### æ´›è°·ç»ƒä¹ é¢˜æ¨è
1. **P1144** - æœ€çŸ­è·¯è®¡æ•°ï¼ˆæ— é›¶è¾¹ç‰ˆï¼‰  
   *â€œå·©å›ºDijkstra+DPåŸºç¡€ã€‚â€*  
2. **P1608** - è·¯å¾„è®¡æ•°ï¼ˆéœ€å¤„ç†é›¶è¾¹ï¼‰  
   *â€œç»ƒä¹ é›¶ç¯æ£€æµ‹ä¸åˆ†å±‚å›¾DPã€‚â€*  
3. **P4011** - å­¤å²›è¥æ•‘é—®é¢˜  
   *â€œåˆ†å±‚å›¾DPçš„å¤æ‚çŠ¶æ€è®¾è®¡ã€‚â€*

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªJay_geniusçš„è°ƒè¯•å¿ƒå¾—**ï¼š  
> *â€œè°ƒäº†ä¸¤ä¸ªå°æ—¶æ‰å‘ç°ï¼Œ`dis[u] - dis[v] + k - w`å¯èƒ½ä¸ºè´Ÿï¼å¿…é¡»ç‰¹åˆ¤`k'<0`ç›´æ¥è¿”å›0ã€‚â€*  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šè¾¹ç•Œæ¡ä»¶å¾€å¾€æ˜¯ACä¸TLEçš„åˆ†æ°´å²­ï¼ŒåŠ¨æ‰‹æ¨¡æ‹Ÿæ ·ä¾‹æ˜¯æ’é”™åˆ©å™¨ã€‚

---

### âœ¨ ç»“è¯­
ä»â€œæš´åŠ›æšä¸¾â€åˆ°â€œè®°å¿†åŒ–æœç´¢â€ï¼Œå†åˆ°â€œåˆ†å±‚å›¾æ‹“æ‰‘â€ï¼Œæˆ‘ä»¬è§è¯äº†ç®—æ³•æ€ç»´çš„å±‚å±‚å‡åã€‚è®°ä½ï¼š**ä¼˜é›…çš„è§£æ³•æºäºå¯¹é—®é¢˜ç»“æ„çš„æ·±åˆ»æ´å¯Ÿ**ã€‚ä¸‹æ¬¡è§ï¼

---
å¤„ç†ç”¨æ—¶ï¼š66.99ç§’
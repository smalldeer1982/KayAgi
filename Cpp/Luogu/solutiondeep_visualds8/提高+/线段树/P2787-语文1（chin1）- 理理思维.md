# é¢˜ç›®ä¿¡æ¯

# è¯­æ–‡1ï¼ˆchin1ï¼‰- ç†ç†æ€ç»´

## é¢˜ç›®èƒŒæ™¯

è’Ÿè’» HansBug åœ¨è¯­æ–‡è€ƒåœºä¸Šï¼ŒæŒ äº†æ— æ•°æ¬¡çš„å¤´ï¼Œå¯è„‘å­é‡Œè¿˜æ˜¯ä¸€ç‰‡ç©ºç™½ã€‚


## é¢˜ç›®æè¿°

è€ƒè¯•å¼€å§‹äº†ï¼Œå¯æ˜¯è’Ÿè’» HansBug è„‘ä¸­è¿˜æ˜¯ä¸€ç‰‡ç©ºç™½ã€‚å“¦ä¸ï¼å‡†ç¡®çš„è¯´æ˜¯ä¹±ä¸ƒå…«ç³Ÿçš„ã€‚ç°åœ¨é¦–è¦ä»»åŠ¡å°±æ˜¯å¸®è’Ÿè’» HansBug ç†ç†æ€ç»´ã€‚å‡è®¾ HansBug çš„æ€ç»´æ˜¯ä¸€é•¿ä¸²å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²ä¸­åŒ…å«ä¸”ä»…åŒ…å« $26$ ä¸ªå­—æ¯ï¼‰ï¼Œç°åœ¨çš„ä½ ï¼Œæœ‰ä¸€å¼ ç¥å¥‡çš„è¯æ–¹ï¼Œä¸Šé¢ä¾æ¬¡åŒ…å«äº†ä¸‰ç§æ“ä½œï¼š

1ã€ è·å–ç¬¬ $x$ åˆ°ç¬¬ $y$ ä¸ªå­—ç¬¦ä¸­å­—æ¯ $k$ å‡ºç°äº†å¤šå°‘æ¬¡

2ã€å°†ç¬¬ $x$ åˆ°ç¬¬ $y$ ä¸ªå­—ç¬¦å…¨éƒ¨èµ‹å€¼ä¸ºå­—æ¯ $k$

3ã€å°†ç¬¬ $x$ åˆ°ç¬¬ $y$ ä¸ªå­—ç¬¦æŒ‰ç…§ $\text{a} \sim \text{z}$ çš„é¡ºåºæ’åº


ä½ æ¬£å–œè‹¥ç‹‚ä¹‹æ—¶ï¼Œå¯æ˜¯ä»–è„‘ç»†èƒå’Œ RP å·²ç»å› ä¸ºä¹‹å‰è¿‡åº¦ç´§å¼ æ¶ˆè€—æ®†å°½ï¼Œçœ¼çœ‹è¯•å·æœ€åè¿˜æœ‰ä¸€ç¯‡å…«ç™¾å­—çš„ä½œæ–‡å‘¢ï¼Œæ‰€ä»¥è¿™ä¸ªå…³é”®çš„ä»»åŠ¡å°±äº¤ç»™ä½ å•¦ï¼


## è¯´æ˜/æç¤º

æ ·ä¾‹è¯´æ˜ï¼š

 ![](https://cdn.luogu.com.cn/upload/pic/2231.png) 

æ•°æ®è§„æ¨¡ï¼š

 ![](https://cdn.luogu.com.cn/upload/pic/2232.png) 

### æ­¤é¢˜ç›®ä¸­å¤§å°å†™ä¸æ•æ„Ÿã€‚

### æ–°åŠ äº†ä¸‰ç»„ hack æ•°æ®ï¼Œä¸åœ¨ä¸Šé¢çš„è¡¨æ ¼ä¸­ï¼Œä½†ä¿è¯ $1\le n,m \le 50000$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
10 5
ABCDABCDCD
1 1 3 A
3 1 5
1 1 3 A
2 1 2 B
1 2 3 B
```

### è¾“å‡º

```
1
2
2
```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šè¯­æ–‡1ï¼ˆchin1ï¼‰- ç†ç†æ€ç»´ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æâ€œè¯­æ–‡1ï¼ˆchin1ï¼‰- ç†ç†æ€ç»´â€è¿™é“C++ç¼–ç¨‹é¢˜ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡è§£é¢˜ï¼Œæ›´æ˜¯ä¸€åœºæ€ç»´çš„æ¢é™©ã€‚æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åƒä¾¦æ¢ä¸€æ ·ä»é¢˜ç›®ä¸­å¯»æ‰¾çº¿ç´¢ï¼Œå¹¶åœ¨ä¸åŒçš„è§£é¢˜é“è·¯ä¸­æƒè¡¡é€‰æ‹©ï¼Œæœ€ç»ˆæ‰¾åˆ°æœ€ä¼˜çš„ç­–ç•¥ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
åœ¨é•¿åº¦ä¸º **5Ã—10â´** çš„å­—æ¯åºåˆ—ä¸Šï¼Œé«˜æ•ˆæ”¯æŒ **åŒºé—´è®¡æ•°**ã€**åŒºé—´èµ‹å€¼**ã€**åŒºé—´æ’åº** ä¸‰ç±»æ“ä½œï¼Œä¸”å€¼åŸŸä»…ä¸º **26 ä¸ªå­—æ¯**ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š  
çº¿æ®µæ ‘ï¼ˆSegment Treeï¼‰ã€åˆ†å—ï¼ˆSquare Root Decompositionï¼‰ã€æƒ°æ€§æ ‡è®°ï¼ˆLazy Tagï¼‰ã€æ¡¶æ’åºï¼ˆBucket Sortï¼‰ã€‚

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è¿™é“é¢˜æ˜¯ä¸€é“å…¸å‹çš„ **åŒºé—´æ“ä½œé¢˜**ï¼Œä½†å› å…¶å€¼åŸŸæå°ï¼ˆ26 ä¸ªå­—æ¯ï¼‰ï¼Œä½¿å¾—ä¼ ç»Ÿçº¿æ®µæ ‘å’Œåˆ†å—éƒ½èƒ½é€šè¿‡å·§å¦™è®¾è®¡è·å¾—ä¼˜ç§€å¤æ‚åº¦ã€‚  
- **çº¿æ®µæ ‘æ€è·¯**ï¼šç»´æŠ¤ 26 æ£µçº¿æ®µæ ‘ï¼Œæ¯æ£µæ ‘è´Ÿè´£ä¸€ç§å­—æ¯ï¼ŒåŒºé—´æ“ä½œè½¬åŒ–ä¸ºåŒºé—´èµ‹å€¼å’ŒåŒºé—´æ±‚å’Œã€‚  
- **åˆ†å—æ€è·¯**ï¼šå°†åºåˆ—åˆ†å—ï¼Œåˆ©ç”¨æ¡¶æ’åºå’Œæƒ°æ€§æ ‡è®°ä¼˜åŒ–åŒºé—´æ’åºå’ŒåŒºé—´èµ‹å€¼ã€‚  
- **æš´åŠ›æ€è·¯**ï¼šç›´æ¥éå†åŒºé—´ï¼Œæ—¶é—´å¤æ‚åº¦æ— æ³•æ¥å—ï¼Œä½†å¯ä½œä¸ºå¯¹æ‹ç¨‹åºã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼šé¢˜ç›®è¦æ±‚æ”¯æŒä¸‰ç§åŒºé—´æ“ä½œï¼Œå…¶ä¸­ **åŒºé—´æ’åº** æ˜¯æ ¸å¿ƒéš¾ç‚¹ï¼Œæç¤ºæˆ‘ä»¬éœ€è¦ **åŒºé—´ç»´æŠ¤æœ‰åºä¿¡æ¯**ã€‚
2. **çº¿ç´¢2 (é—®é¢˜çº¦æŸ)**ï¼šå­—æ¯ä»… 26 ç§ï¼Œæš—ç¤º **æ¡¶æ’åº** æˆ– **æŒ‰å­—æ¯åˆ†æ²»** æ˜¯å¯è¡Œç­–ç•¥ã€‚
3. **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼šn, m â‰¤ 5Ã—10â´ï¼ŒO(mâˆšn log n) æˆ– O(m log n) çš„ç®—æ³•å‡å¯é€šè¿‡ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> å¥½äº†ï¼Œä¾¦æ¢å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬æ”¶é›†åˆ°äº†å‡ æ¡å…³é”®çº¿ç´¢ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åƒæ‹¼å›¾ä¸€æ ·æŠŠå®ƒä»¬ç»„åˆèµ·æ¥ï¼š
> 1. é¦–å…ˆï¼Œ**çº¿ç´¢1ï¼šåŒºé—´æ’åº** æç¤ºæˆ‘ä»¬ï¼Œæš´åŠ› sort ä¸å¯è¡Œï¼Œå¿…é¡»åˆ©ç”¨ **å€¼åŸŸæå°** çš„ç‰¹æ€§ã€‚
> 2. æ¥ç€ï¼Œ**çº¿ç´¢2ï¼š26 ä¸ªå­—æ¯** è®©æˆ‘ä»¬æƒ³åˆ° **æ¡¶æ’åº** æˆ– **åˆ†å­—æ¯ç»´æŠ¤**ï¼Œè¿™å¤©ç„¶é€‚é…çº¿æ®µæ ‘æˆ–åˆ†å—ã€‚
> 3. æœ€åï¼Œ**çº¿ç´¢3ï¼šæ•°æ®è§„æ¨¡** å‘Šè¯‰æˆ‘ä»¬ï¼ŒO(mâˆšn log n) çš„åˆ†å—æˆ– O(m log n) çš„çº¿æ®µæ ‘å‡å¯é€šè¿‡ã€‚
> 4. **ç»“è®º**ï¼šç»¼åˆä»¥ä¸Šï¼Œ**26 æ£µçº¿æ®µæ ‘** æˆ– **åˆ†å— + æ¡¶æ’åº** æ˜¯ä¸¤ç§é«˜æ•ˆç­–ç•¥ï¼Œå‰è€…å®ç°ç®€æ´ï¼Œåè€…å¸¸æ•°æ›´ä¼˜ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼š26 æ£µçº¿æ®µæ ‘ï¼ˆä½œè€…ï¼šå¯’é¸½å„¿ï¼‰
- **ç‚¹è¯„**ï¼š  
  è¿™æ˜¯æœ€ç›´è§‚çš„è§£æ³•ï¼Œæ¯æ£µçº¿æ®µæ ‘ç»´æŠ¤ä¸€ç§å­—æ¯çš„å‡ºç°æ¬¡æ•°ã€‚åŒºé—´æ’åºè½¬åŒ–ä¸º **26 æ¬¡åŒºé—´èµ‹å€¼**ï¼Œå®ç°ç®€å•ï¼Œä½†ç©ºé—´è¾ƒå¤§ã€‚ä½œè€…ä½¿ç”¨ **åŠ¨æ€å¼€ç‚¹** ä¼˜åŒ–ç©ºé—´ï¼Œå¹¶é€šè¿‡ **å‰ªæ**ï¼ˆå¦‚ `sum==0` æ—¶æå‰è¿”å›ï¼‰å‡å°‘å¸¸æ•°ã€‚

### é¢˜è§£äºŒï¼šåˆ†å— + æ¡¶æ’åºï¼ˆä½œè€…ï¼šskydogliï¼‰
- **ç‚¹è¯„**ï¼š  
  åˆ†å—çš„æ ¸å¿ƒæ˜¯ **æƒ°æ€§æ ‡è®°** å’Œ **å—å†…æ¡¶æ’åº**ã€‚ä½œè€…é€šè¿‡ **å‡å°‘ maintain æ¬¡æ•°** å’Œ **æ“ä½œä¸‰å‰ªæ**ï¼ˆå¦‚æ‡’æ ‡è®°å—ç›´æ¥è´¡çŒ®å­—æ¯æ•°ï¼‰å°†å¤æ‚åº¦ä¼˜åŒ–åˆ° O(mâˆšn)ã€‚ä»£ç æ³¨é‡Šè¯¦å°½ï¼Œé€‚åˆå­¦ä¹ åˆ†å—æŠ€å·§ã€‚

### é¢˜è§£ä¸‰ï¼šå•æ£µçº¿æ®µæ ‘ï¼ˆä½œè€…ï¼šjxdlygï¼‰
- **ç‚¹è¯„**ï¼š  
  ä»…ç”¨ä¸€æ£µçº¿æ®µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤ 26 ä¸ªå­—æ¯çš„è®¡æ•°ã€‚åŒºé—´æ’åºé€šè¿‡ **26 æ¬¡æŸ¥è¯¢ + 26 æ¬¡èµ‹å€¼** å®ç°ï¼Œä»£ç ç®€æ´ä½†å¸¸æ•°è¾ƒå¤§ã€‚ä½œè€…æé†’ **é‡è½½è¿ç®—ç¬¦éœ€æ”¾åœ¨ç»“æ„ä½“å¤–**ï¼Œé¿å…ç¼–è¯‘é”™è¯¯ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1. **å…³é”®ç‚¹1ï¼šå¦‚ä½•é«˜æ•ˆç»´æŠ¤åŒºé—´å­—æ¯è®¡æ•°ï¼Ÿ**
   - **åˆ†æ**ï¼š  
     - **çº¿æ®µæ ‘**ï¼šæ¯æ£µæ ‘ç»´æŠ¤ä¸€ç§å­—æ¯ï¼ŒåŒºé—´èµ‹å€¼å’ŒæŸ¥è¯¢ä¸º O(log n)ã€‚  
     - **åˆ†å—**ï¼šå—å†…ç»´æŠ¤ 26 ä¸ªå­—æ¯çš„è®¡æ•°ï¼ŒåŒºé—´èµ‹å€¼å’ŒæŸ¥è¯¢ä¸º O(âˆšn)ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå€¼åŸŸæå°æ—¶ï¼Œ**åˆ†å­—æ¯ç»´æŠ¤** æ˜¯é™ç»´æ‰“å‡»ã€‚

2. **å…³é”®ç‚¹2ï¼šå¦‚ä½•å®ç°åŒºé—´æ’åºï¼Ÿ**
   - **åˆ†æ**ï¼š  
     - **çº¿æ®µæ ‘**ï¼šæŸ¥è¯¢åŒºé—´å†…å„å­—æ¯æ•°é‡ï¼Œå†æŒ‰å­—æ¯é¡ºåºä¾æ¬¡èµ‹å€¼ã€‚  
     - **åˆ†å—**ï¼šå—å†…æ¡¶æ’åºï¼Œæ•´å—ç›´æ¥èµ‹å€¼ï¼Œæ•£å—æš´åŠ›å¤„ç†ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**æ¡¶æ’åº** æ˜¯åŒºé—´æ’åºçš„åˆ©å™¨ï¼Œå¤æ‚åº¦ O(26 Ã— æ“ä½œå¤æ‚åº¦)ã€‚

3. **å…³é”®ç‚¹3ï¼šå¦‚ä½•ä¼˜åŒ–å¸¸æ•°ï¼Ÿ**
   - **åˆ†æ**ï¼š  
     - **å‰ªæ**ï¼šå¦‚ `sum==0` æ—¶æå‰è¿”å›ã€‚  
     - **æƒ°æ€§æ ‡è®°**ï¼šåˆ†å—ä¸­é¿å…ä¸å¿…è¦çš„ `maintain`ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**å‰ªæ** å’Œ **æƒ°æ€§æ ‡è®°** æ˜¯ä¼˜åŒ–åŒºé—´æ“ä½œçš„é€šç”¨æŠ€å·§ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼ˆå€¼åŸŸåˆ©ç”¨ï¼‰**ï¼š26 ä¸ªå­—æ¯çš„å€¼åŸŸå…è®¸ O(26) çš„æš´åŠ›æšä¸¾æˆä¸ºå¯è¡Œç­–ç•¥ã€‚
- **æŠ€å·§Bï¼ˆæƒ°æ€§æ ‡è®°ï¼‰**ï¼šæ— è®ºæ˜¯çº¿æ®µæ ‘è¿˜æ˜¯åˆ†å—ï¼Œ**æƒ°æ€§æ ‡è®°** éƒ½èƒ½æ˜¾è‘—å‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚
- **æŠ€å·§Cï¼ˆåˆ†æ²»æ€æƒ³ï¼‰**ï¼šå°†é—®é¢˜æ‹†åˆ†ä¸º **å­—æ¯ç»´åº¦** æˆ– **åŒºé—´ç»´åº¦**ï¼Œé™ä½å¤æ‚åº¦ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ä¸åˆ†æ | é€‚ç”¨åœºæ™¯ |
| :--- | :--- | :--- | :--- | :--- |
| **26 æ£µçº¿æ®µæ ‘** | æ¯æ£µæ ‘ç»´æŠ¤ä¸€ç§å­—æ¯ | å®ç°ç®€å•ï¼Œå¤æ‚åº¦ O(m log n) | ç©ºé—´è¾ƒå¤§ï¼Œå¸¸æ•°è¾ƒå¤§ | å€¼åŸŸæå°çš„åŒºé—´æ“ä½œ |
| **åˆ†å— + æ¡¶æ’åº** | å—å†…æ¡¶æ’åº + æƒ°æ€§æ ‡è®° | å¸¸æ•°å°ï¼Œå¤æ‚åº¦ O(mâˆšn) | å®ç°å¤æ‚ï¼Œè¾¹ç•Œå¤„ç†ç¹ç | å€¼åŸŸæå°çš„åŒºé—´æ“ä½œ |
| **å•æ£µçº¿æ®µæ ‘** | èŠ‚ç‚¹ç»´æŠ¤ 26 ä¸ªå­—æ¯è®¡æ•° | ä»£ç ç®€æ´ï¼Œç©ºé—´é€‚ä¸­ | åŒºé—´æ’åºå¸¸æ•°è¾ƒå¤§ | å€¼åŸŸæå°çš„åŒºé—´æ“ä½œ |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> ä»æš´åŠ› sort çš„ O(m n log n) åˆ°åˆ†å—çš„ O(mâˆšn)ï¼Œæˆ‘ä»¬ç»å†äº† **å€¼åŸŸåˆ©ç”¨** å’Œ **æƒ°æ€§æ ‡è®°** çš„ä¼˜åŒ–ã€‚è¿™å‘Šè¯‰æˆ‘ä»¬ï¼š**é—®é¢˜çš„ç‰¹æ®Šæ€§è´¨ï¼ˆå¦‚å€¼åŸŸï¼‰å¾€å¾€æ˜¯ä¼˜åŒ–çš„çªç ´å£**ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
- **è¯´æ˜**ï¼šç»¼åˆäº† 26 æ£µçº¿æ®µæ ‘çš„æ€è·¯ï¼Œä»£ç æ¸…æ™°æ˜“è¯»ã€‚
- **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
  ```cpp
  #include <cstdio>
  #include <cstring>
  using namespace std;

  const int MAXN = 5e4 + 10;
  struct Node {
      int cnt[26];
      Node() { memset(cnt, 0, sizeof(cnt)); }
  };

  Node operator + (const Node& a, const Node& b) {
      Node c;
      for (int i = 0; i < 26; ++i) c.cnt[i] = a.cnt[i] + b.cnt[i];
      return c;
  }

  Node tree[MAXN << 2];
  int lazy[MAXN << 2], n, m;
  char s[MAXN];

  void build(int nod, int lef, int rig) {
      if (lef == rig) {
          tree[nod].cnt[s[lef] - 'A'] = 1;
      } else {
          int mid = (lef + rig) >> 1;
          build(nod << 1, lef, mid);
          build(nod << 1 | 1, mid + 1, rig);
          tree[nod] = tree[nod << 1] + tree[nod << 1 | 1];
      }
  }

  void pushdown(int nod, int ln, int rn) {
      if (lazy[nod] != -1) {
          lazy[nod << 1] = lazy[nod << 1 | 1] = lazy[nod];
          tree[nod << 1] = Node(), tree[nod << 1 | 1] = Node();
          tree[nod << 1].cnt[lazy[nod]] = ln;
          tree[nod << 1 | 1].cnt[lazy[nod]] = rn;
          lazy[nod] = -1;
      }
  }

  void update(int nod, int lef, int rig, int goal, int goar, int val) {
      if (rig < goal || goar < lef) return;
      if (goal <= lef && rig <= goar) {
          tree[nod] = Node(), lazy[nod] = val;
          tree[nod].cnt[val] = rig - lef + 1;
      } else {
          int mid = (lef + rig) >> 1;
          pushdown(nod, mid - lef + 1, rig - mid);
          if (goal <= mid) update(nod << 1, lef, mid, goal, goar, val);
          if (goar > mid) update(nod << 1 | 1, mid + 1, rig, goal, goar, val);
          tree[nod] = tree[nod << 1] + tree[nod << 1 | 1];
      }
  }

  Node query(int nod, int lef, int rig, int goal, int goar) {
      if (rig < goal || goar < lef) return Node();
      if (goal <= lef && rig <= goar) return tree[nod];
      int mid = (lef + rig) >> 1;
      pushdown(nod, mid - lef + 1, rig - mid);
      return query(nod << 1, lef, mid, goal, goar) + query(nod << 1 | 1, mid + 1, rig, goal, goar);
  }

  int main() {
      scanf("%d%d%s", &n, &m, s + 1);
      for (int i = 1; i <= n; ++i) if (s[i] >= 'a') s[i] -= 32;
      memset(lazy, -1, sizeof(lazy));
      build(1, 1, n);
      while (m--) {
          int op, x, y; char c;
          scanf("%d%d%d", &op, &x, &y);
          if (op != 3) scanf(" %c", &c), c = toupper(c);
          if (op == 1) {
              printf("%d\n", query(1, 1, n, x, y).cnt[c - 'A']);
          } else if (op == 2) {
              update(1, 1, n, x, y, c - 'A');
          } else {
              Node tmp = query(1, 1, n, x, y);
              for (int i = 0, l, r = x - 1; i < 26; ++i) {
                  if (tmp.cnt[i] == 0) continue;
                  l = r + 1, r = l + tmp.cnt[i] - 1;
                  update(1, 1, n, l, r, i);
              }
          }
      }
      return 0;
  }
  ```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼š**â€œå­—æ¯å‹‡å£«çš„æ’åºå†’é™©â€**
- **åœºæ™¯**ï¼š8Ã—8 åƒç´ ç½‘æ ¼ä»£è¡¨å­—æ¯åºåˆ—ï¼Œæ¯ä¸ªæ ¼å­ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºå­—æ¯ï¼ˆA=çº¢ï¼ŒB=ç»¿...ï¼‰ã€‚
- **æ“ä½œæ¼”ç¤º**ï¼š
  1. **åŒºé—´è®¡æ•°**ï¼šåƒç´ æ ¼é—ªçƒæ˜¾ç¤ºæŸ¥è¯¢èŒƒå›´ï¼Œå³ä¸Šè§’å¼¹å‡ºå­—æ¯è®¡æ•°ã€‚
  2. **åŒºé—´èµ‹å€¼**ï¼šè¢«é€‰ä¸­çš„æ ¼å­ç»Ÿä¸€å˜è‰²ï¼Œä¼´éšâ€œå®â€éŸ³æ•ˆã€‚
  3. **åŒºé—´æ’åº**ï¼šæŒ‰å­—æ¯é¡ºåºä¾æ¬¡å¡«å……æ ¼å­ï¼Œåƒâ€œä¿„ç½—æ–¯æ–¹å—â€ä¸€æ ·ä¸‹è½æ’åˆ—ã€‚
- **äº¤äº’è®¾è®¡**ï¼š
  - **æ­¥è¿›æŒ‰é’®**ï¼šå•æ­¥æ‰§è¡Œæ“ä½œï¼Œé«˜äº®å½“å‰å¤„ç†çš„æ ¼å­ã€‚
  - **é€Ÿåº¦æ»‘å—**ï¼šè°ƒæ•´åŠ¨ç”»é€Ÿåº¦ï¼ˆ1x/2x/4xï¼‰ã€‚
  - **é‡ç½®æŒ‰é’®**ï¼šæ¢å¤åˆå§‹åºåˆ—ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **åœºæ™¯1**ï¼šåŒºé—´ç»´æŠ¤é¢œè‰²ç§ç±»æ•°ï¼ˆå¦‚ [P1972]ï¼‰ã€‚
- **åœºæ™¯2**ï¼šåŒºé—´æŒ‰é¢‘ç‡æ’åºï¼ˆå¦‚ [P5353]ï¼‰ã€‚
- **åœºæ™¯3**ï¼šåŒºé—´ä¼—æ•°æŸ¥è¯¢ï¼ˆå¦‚ [P4168]ï¼‰ã€‚

### æ´›è°·æ¨è
1. **P3372** - çº¿æ®µæ ‘æ¨¡æ¿1  
   *æ¨èç†ç”±*ï¼šå·©å›ºåŒºé—´èµ‹å€¼å’ŒåŒºé—´æ±‚å’Œã€‚
2. **P3369** - æ™®é€šå¹³è¡¡æ ‘  
   *æ¨èç†ç”±*ï¼šå­¦ä¹ å¦‚ä½•ç”¨æ•°æ®ç»“æ„ç»´æŠ¤æœ‰åºåºåˆ—ã€‚
3. **P5357** - åç¼€è‡ªåŠ¨æœº  
   *æ¨èç†ç”±*ï¼šè¿›é˜¶ç»ƒä¹ ï¼Œå¤„ç†å¤æ‚å­—ç¬¦ä¸²æ“ä½œã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ª skydogli çš„è°ƒè¯•å¿ƒå¾—**ï¼š  
> â€œè°ƒåˆ†å—é¢˜çš„å°æŠ€å·§ï¼šç”¨ç›¸åŒæ•°æ®ï¼Œæ›´æ”¹å—çš„å¤§å°ï¼Œèƒ½å¿«é€Ÿæ£€æŸ¥è¾¹ç•Œæ˜¯å¦æ‰“æŒ‚ã€‚â€  
> **ç‚¹è¯„**ï¼šåˆ†å—é—®é¢˜çš„è¾¹ç•Œæ¡ä»¶ææ˜“å‡ºé”™ï¼Œé€šè¿‡è°ƒæ•´å—å¤§å°éªŒè¯æ­£ç¡®æ€§æ˜¯é«˜æ•ˆè°ƒè¯•æ–¹æ³•ã€‚

---

## ç»“è®º
æœ¬æ¬¡å…³äºâ€œè¯­æ–‡1ï¼ˆchin1ï¼‰- ç†ç†æ€ç»´â€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£ **å€¼åŸŸåˆ©ç”¨** å’Œ **åŒºé—´æ“ä½œ** çš„æ ¸å¿ƒæŠ€å·§ã€‚è®°ä½ï¼š**é—®é¢˜çš„ç‰¹æ®Šæ€§è´¨ï¼ˆå¦‚å€¼åŸŸï¼‰å¾€å¾€æ˜¯ä¼˜åŒ–çš„çªç ´å£**ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š92.89ç§’
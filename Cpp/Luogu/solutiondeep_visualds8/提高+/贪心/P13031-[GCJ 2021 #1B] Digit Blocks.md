# é¢˜ç›®ä¿¡æ¯

# [GCJ 2021 #1B] Digit Blocks

## é¢˜ç›®æè¿°

ä½ å°†å»ºé€  $N$ åº§å¡”ï¼Œæ¯åº§å¡”ç”± $B$ å—ç«‹æ–¹ä½“ç§¯æœ¨ç»„æˆï¼Œæ¯æ¬¡æ”¾ç½®ä¸€å—ç§¯æœ¨ã€‚å¡”çš„å»ºé€ æ˜¯ä»ä¸‹å¾€ä¸Šè¿›è¡Œçš„ï¼šç¬¬ $i$ å—è¢«æ”¾ç½®åˆ°æŸåº§å¡”ä¸­çš„ç§¯æœ¨æœ€ç»ˆä¼šæˆä¸ºè¯¥å¡”ä»ä¸‹å¾€ä¸Šæ•°çš„ç¬¬ $i$ å—ã€‚ä½ éœ€è¦åœ¨çœ‹åˆ°åç»­ç§¯æœ¨ä¹‹å‰å†³å®šæ¯å—ç§¯æœ¨çš„æ”¾ç½®ä½ç½®ï¼Œä¸”ä¸€æ—¦æ”¾ç½®å°±ä¸èƒ½ç§»åŠ¨ã€‚

æ¯å—ç§¯æœ¨ä¸Šå°æœ‰ä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œå¡”çš„å»ºé€ ä¼šç¡®ä¿æ‰€æœ‰æ•°å­—é¢æœå‰ã€‚ç§¯æœ¨çš„å­—ä½“è®¾è®¡ä½¿å¾—æ— æ³•é€šè¿‡æ—‹è½¬è·å¾—ä¸åŒçš„æ•°å­—ï¼ˆä¾‹å¦‚ï¼Œå°æœ‰ 6 çš„ç§¯æœ¨ä¸èƒ½é€šè¿‡æ—‹è½¬å˜æˆ 9ï¼Œåä¹‹äº¦ç„¶ï¼‰ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾ $N = 3$ ä¸” $B = 3$ï¼Œå½“å‰å¡”çš„çŠ¶æ€å¦‚å›¾ 1 æ‰€ç¤ºã€‚å¦‚æœä¸‹ä¸€å—ç§¯æœ¨çš„æ•°å­—æ˜¯ 6ï¼Œä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼šè¦ä¹ˆå°†å…¶æ”¾åœ¨åªæœ‰ä¸¤å—ç§¯æœ¨çš„å¡”ä¸Šï¼ˆå¦‚å›¾ 2ï¼‰ï¼Œè¦ä¹ˆå¼€å§‹å»ºé€ ç¬¬ä¸‰åº§å¡”ï¼ˆå¦‚å›¾ 3ï¼‰ã€‚æ³¨æ„ä¸èƒ½å°†å…¶æ”¾åœ¨ç¬¬ä¸€åº§å¡”ä¸Šï¼Œå› ä¸ºç¬¬ä¸€åº§å¡”å·²ç»æœ‰ $B$ å—ç§¯æœ¨ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/47a718u8.png)
![](https://cdn.luogu.com.cn/upload/image_hosting/c8lwc9qg.png)
![](https://cdn.luogu.com.cn/upload/image_hosting/wdg8ljcv.png)

å»ºé€ å®Œæˆåï¼Œæˆ‘ä»¬ä»æ¯åº§å¡”çš„é¡¶ç«¯åˆ°åº•ç«¯è¯»å–æ•°å­—ï¼ˆå³æœ€åæ”¾ç½®çš„ç§¯æœ¨æ•°å­—æ˜¯æœ€é«˜ä½ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ª $B$ ä½æ•´æ•°ã€‚æ³¨æ„è¿™äº›æ•´æ•°å¯èƒ½æœ‰ä»»æ„å‰å¯¼é›¶ã€‚ç„¶åï¼Œå°†è¿™ $N$ ä¸ªæ•´æ•°ç›¸åŠ ï¼Œå¾—åˆ°å»ºé€ æ“ä½œçš„åˆ†æ•°ã€‚

ä¾‹å¦‚ï¼Œåœ¨å›¾ 4 ä¸­ï¼Œä»å·¦åˆ°å³çš„å¡”åˆ†åˆ«è¯»ä½œ $123$ã€$345$ å’Œ $96$ï¼Œå¾—åˆ†ä¸º $123 + 345 + 96 = 564$ã€‚

![](https://cdn.luogu.com.cn/upload/image_hosting/6aiwqzwm.png)

æ¯å—ç§¯æœ¨çš„æ•°å­—æ˜¯ç‹¬ç«‹ä¸”å‡åŒ€éšæœºç”Ÿæˆçš„ã€‚ä¸ºäº†ä½¿ä½ çš„ç­”æ¡ˆè¢«åˆ¤ä¸ºæ­£ç¡®ï¼Œæ‰€æœ‰ $\mathbf{T}$ ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ€»åˆ†å¿…é¡»è‡³å°‘è¾¾åˆ° $\mathbf{P}$ã€‚

### äº¤äº’åè®®

è¿™æ˜¯ä¸€ä¸ªäº¤äº’é—®é¢˜ã€‚

æœ€åˆè¯„æµ‹æœºä¼šå‘é€ä¸€è¡ŒåŒ…å«å››ä¸ªæ•´æ•° $\mathbf{T}$ã€$\mathbf{N}$ã€$\mathbf{B}$ å’Œ $\mathbf{P}$ï¼šæµ‹è¯•ç”¨ä¾‹æ•°é‡ã€å¡”çš„æ•°é‡ã€æ¯åº§å¡”çš„ç§¯æœ¨æ•°ï¼Œä»¥åŠé€šè¿‡æµ‹è¯•é›†æ‰€éœ€çš„æœ€ä½æ€»åˆ†ã€‚

ç„¶åï¼Œä½ éœ€è¦å¤„ç† $\mathbf{T}$ ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åŒ…å« $\mathbf{N} \times \mathbf{B}$ æ¬¡äº¤äº’ã€‚æ¯æ¬¡äº¤äº’å¯¹åº”æ”¾ç½®ä¸€å—ç§¯æœ¨ã€‚åœ¨æ¯æ¬¡äº¤äº’ä¸­ï¼š
1. è¯„æµ‹æœºè¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $\mathbf{D}$ï¼Œè¡¨ç¤ºå½“å‰ç§¯æœ¨çš„æ•°å­—ã€‚
2. ä½ éœ€è¦è¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $\mathbf{i}$ï¼ˆ$1 \leq \mathbf{i} \leq \mathbf{N}$ï¼‰ï¼Œè¡¨ç¤ºè¦å°†ç§¯æœ¨æ”¾ç½®åˆ°ç¬¬å‡ åº§å¡”ã€‚

åœ¨æœ€åä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æœ€åä¸€æ¬¡äº¤äº’åï¼Œè¯„æµ‹æœºä¼šé¢å¤–è¾“å‡ºä¸€è¡Œï¼š
- å¦‚æœæ€»åˆ† $\geq \mathbf{P}$ï¼Œè¾“å‡º $1$ï¼›
- å¦åˆ™è¾“å‡º $-1$ã€‚

å¦‚æœè¯„æµ‹æœºæ”¶åˆ°çš„äº¤äº’å†…å®¹æ ¼å¼é”™è¯¯ã€å¡”ç¼–å·æ— æ•ˆï¼Œæˆ–å°è¯•å°†ç§¯æœ¨æ”¾åˆ°å·²æ»¡çš„å¡”ä¸Šï¼Œå®ƒä¼šè¾“å‡º $-1$ å¹¶ç»ˆæ­¢äº¤äº’ã€‚å¦‚æœç¨‹åºåœ¨æ”¶åˆ° $-1$ åä»ç»§ç»­ç­‰å¾…è¾“å…¥ï¼Œä¼šå¯¼è‡´è¶…æ—¶é”™è¯¯ï¼ˆTLEï¼‰ã€‚æ³¨æ„ï¼šç¨‹åºéœ€è¦åŠæ—¶é€€å‡ºä»¥é¿å… TLEï¼Œå¦åˆ™ä¼šè¢«åˆ¤ä¸ºé”™è¯¯ç­”æ¡ˆã€‚

å¯ä»¥å‡è®¾æ¯ä¸ªç§¯æœ¨çš„æ•°å­—æ˜¯ç‹¬ç«‹ä¸”å‡åŒ€éšæœºç”Ÿæˆçš„ï¼Œå› æ­¤å³ä½¿å®Œå…¨ç›¸åŒçš„ä»£ç æäº¤ä¸¤æ¬¡ï¼Œè¯„æµ‹æœºä¹Ÿå¯èƒ½ç”Ÿæˆä¸åŒçš„éšæœºæ•°å­—ã€‚

## è¯´æ˜/æç¤º

**æ ·ä¾‹è§£é‡Š**

æ ·ä¾‹ä¸­çš„çŠ¶æ€å¯¹åº”å›¾ 4ï¼ˆæ€»åˆ† = 564ï¼‰ã€‚

ä½ å¯ä»¥ä½¿ç”¨æœ¬åœ°æµ‹è¯•å·¥å…·è°ƒè¯•ä»£ç ã€‚æµ‹è¯•å·¥å…·ä¼šæ¨¡æ‹Ÿè¯„æµ‹æœºçš„è¡Œä¸ºï¼Œä½†**å¹¶éçœŸå®è¯„æµ‹ç³»ç»Ÿ**ï¼Œå¯èƒ½åœ¨æŸäº›ç»†èŠ‚ä¸Šå­˜åœ¨å·®å¼‚ã€‚

**æ•°æ®èŒƒå›´**

- $\mathbf{T} = 50$
- $\mathbf{N} = 20$
- $\mathbf{B} = 15$
- $\mathbf{D}$ æ˜¯ $0$ åˆ° $9$ çš„åè¿›åˆ¶æ•°å­—

**æµ‹è¯•é›† 1ï¼ˆ16 åˆ†ï¼Œå¯è§è¯„æµ‹ç»“æœï¼‰**

$\mathbf{P} = 860939810732536850$ï¼ˆçº¦ $8.6 \times 10^{17}$ï¼‰ã€‚

è¯¥è¾¹ç•Œçº¦ä¸ºç†è®ºæœ€é«˜æœŸæœ›åˆ†æ•°ï¼ˆ$S \approx 1.9 \times 10^{16}$ï¼‰çš„ $90\% \times \mathbf{T}$ã€‚ç²¾ç¡®çš„ $S$ å€¼å¯åœ¨æµ‹è¯•å·¥å…·ä»£ç çš„ç¬¬ 13-14 è¡Œæ‰¾åˆ°ã€‚

**æµ‹è¯•é›† 2ï¼ˆ21 åˆ†ï¼Œå¯è§è¯„æµ‹ç»“æœï¼‰**

$\mathbf{P} = 937467793908762347$ï¼ˆçº¦ $9.37 \times 10^{17}$ï¼‰ã€‚

è¯¥è¾¹ç•Œçº¦ä¸ºç†è®ºæœ€é«˜æœŸæœ›åˆ†æ•°çš„ $98\% \times \mathbf{T}$ã€‚

ç¿»è¯‘ç”± DeepSeek V3 å®Œæˆ

## æ ·ä¾‹ #1

### è¾“å…¥

```
2 3 3 1500
3

2

5

4

1

6

3

9

0```

### è¾“å‡º

```


1

1

2

2

1

3

2

3

3```

# AIåˆ†æç»“æœ


### ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šDigit Blocks æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

#### **1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢**
âœ¨ **æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨æœªçŸ¥åç»­ç§¯æœ¨æ•°å­—çš„å‰æä¸‹ï¼Œå®æ—¶å†³ç­–æ¯å—ç§¯æœ¨çš„æ”¾ç½®ä½ç½®ï¼Œä½¿æœ€ç»ˆ $N$ ä¸ª $B$ ä½æ•°çš„æ€»å’Œæœ€å¤§åŒ–ã€‚å…³é”®åœ¨äº**å¹³è¡¡å½“å‰æ•°å­—çš„åˆ©ç”¨ä¸æœªæ¥é«˜æƒé‡ä½ç½®çš„ä¿ç•™**ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šè´ªå¿ƒç­–ç•¥ã€æœŸæœ›åˆ†æã€åœ¨çº¿å†³ç­–

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜éœ€è¦è®¾è®¡å®æ—¶å†³ç­–ç­–ç•¥åº”å¯¹éšæœºè¾“å…¥ã€‚æš´åŠ›æšä¸¾æ‰€æœ‰å¯èƒ½æ”¾ç½®æ–¹æ¡ˆï¼ˆ$O(N^{NÃ—B})$) ä¸å¯è¡Œï¼ŒåŠ¨æ€è§„åˆ’çŠ¶æ€ç©ºé—´ï¼ˆ$O(B^N)$ï¼‰è¿‡å¤§ã€‚æœ€ä¼˜ç­–ç•¥åŸºäº**æƒé‡æœŸæœ›åˆ†æ**ï¼šå¡”é¡¶ï¼ˆé«˜ä½ï¼‰æƒé‡ä¸º $10^{B-1}$ï¼Œå¡”åº•æƒé‡ä¸º $10^0$ã€‚æ ¸å¿ƒæ€è·¯ï¼š
> - **å¤§æ•°å­—æ”¾çŸ®å¡”**ï¼šæ•°å­—â‰¥5æ—¶ï¼Œä¼˜å…ˆæ”¾å½“å‰é«˜åº¦æœ€å°çš„å¡”ï¼ˆå æ®é«˜æƒé‡ä½ç½®ï¼‰
> - **å°æ•°å­—æ”¾é«˜å¡”**ï¼šæ•°å­—<5æ—¶ï¼Œæ”¾å½“å‰é«˜åº¦æœ€å¤§çš„å¡”ï¼ˆé¿å…å ç”¨é«˜æƒé‡ä½ç½®ï¼‰
> - ç”¨**åŒå †ç»“æ„**åŠ¨æ€ç»´æŠ¤å¡”é«˜æå€¼ï¼Œå®ç° $O(\log N)$ å†³ç­–

#### **ğŸ” ç®—æ³•ä¾¦æ¢ï¼šçº¿ç´¢åˆ†æ**
1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š  
   "æœ€å¤§åŒ– $N$ ä¸ª $B$ ä½æ•°çš„æ€»å’Œ" â†’ éœ€ä¼˜å…ˆä¼˜åŒ–é«˜ä½æ•°å­—ï¼ˆæƒé‡ $10^{B-1} > 10^0$)ï¼Œå±**åœ¨çº¿æœ€ä¼˜åŒ–é—®é¢˜**ã€‚
2. **çº¿ç´¢2 (é—®é¢˜çº¦æŸ)**ï¼š  
   "å†³ç­–æ—¶æœªçŸ¥åç»­æ•°å­—" â†’ éœ€**åŸºäºæœŸæœ›è®¾è®¡ç­–ç•¥**ï¼ˆæ•°å­—å‡åŒ€éšæœºï¼‰ï¼Œæ’é™¤é™æ€è§„åˆ’ã€‚
3. **çº¿ç´¢3 (æ•°æ®èŒƒå›´)**ï¼š  
   $N=20, B=15, T=50$ â†’ æ€»æ“ä½œ $15,000$ æ¬¡ â†’ éœ€ $O(N \log N)$ å•æ­¥å†³ç­–ï¼Œå †ç»“æ„å®Œç¾åŒ¹é…ã€‚

#### **ğŸ§  æ€ç»´é“¾æ„å»º**
> "ç»¼åˆçº¿ç´¢ï¼š  
> 1. ç›®æ ‡è¦æ±‚**é«˜ä½æœ€å¤§åŒ–** â†’ è‡ªç„¶æƒ³åˆ°è´ªå¿ƒç­–ç•¥  
> 2. çº¦æŸè¦æ±‚**å®æ—¶å†³ç­–** â†’ éœ€åˆ©ç”¨éšæœºæ€§æœŸæœ›å€¼  
> 3. æ•°æ®è§„æ¨¡å¦å†³ DP â†’ è®¾è®¡é«˜æ•ˆæ•°æ®ç»“æ„  
> 4. **ç»“è®º**ï¼šåŒå †è´ªå¿ƒç­–ç•¥ï¼ˆæœ€å°å †ç®¡çŸ®å¡”ï¼Œæœ€å¤§å †ç®¡é«˜å¡”ï¼‰æ˜¯å¹³è¡¡æ•ˆç‡ä¸æœŸæœ›çš„æœ€ä¼˜è§£"

---

### **2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ**
**é¢˜è§£ï¼ˆé€šç”¨è´ªå¿ƒå®ç°ï¼‰**  
* **ç‚¹è¯„**ï¼š  
  ç­–ç•¥æ¸…æ™°æŠ“ä½æ ¸å¿ƒâ€”â€”**æŒ‰æ•°å­—å¤§å°åˆ†æµ**ï¼šå¤§æ•°æŠ¢å é«˜æƒé‡ä½ç½®ï¼ˆçŸ®å¡”ï¼‰ï¼Œå°æ•°å¡«å……ä½æƒé‡ä½ç½®ï¼ˆé«˜å¡”ï¼‰ã€‚ä»£ç äº®ç‚¹ï¼š
  - åŒå †ï¼ˆ`min_heap`/`max_heap`ï¼‰åŠ¨æ€ç»´æŠ¤å¡”é«˜æå€¼
  - æ‡’æƒ°åˆ é™¤ï¼ˆ`h != height[idx]`ï¼‰é«˜æ•ˆå¤„ç†å †æ›´æ–°
  - é˜ˆå€¼ï¼ˆDâ‰¥5ï¼‰ç®€åŒ–å†³ç­–ï¼Œå»åˆæ•°å­—æœŸæœ›åˆ†å¸ƒ

---

### **3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ**
#### **ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤**
1. **éš¾ç‚¹1ï¼šå®æ—¶æƒé‡è¯„ä¼°**  
   *åˆ†æ*ï¼šå†³ç­–éœ€é‡åŒ–å½“å‰æ“ä½œå¯¹æœ€ç»ˆåˆ†æ•°çš„è´¡çŒ®ã€‚è§£å†³æ–¹æ¡ˆï¼š  
   - è®¡ç®—ä½ç½®æƒé‡ï¼šå¡”é«˜ $h$ çš„ä½ç½®æƒé‡ä¸º $10^{B-h-1}$  
   - ç­–ç•¥ï¼šé«˜æƒé‡ä½ç½®ä¼˜å…ˆæ”¾ç½®å¤§æ•°ï¼ˆå¦‚ $9Ã—10^{14} > 9Ã—10^0$)  
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼š**è´ªå¿ƒé€‰æ‹©=å½“å‰æœ€ä¼˜+æœªæ¥æœŸæœ›æœ€ä¼˜**

2. **éš¾ç‚¹2ï¼šçŠ¶æ€ç»´æŠ¤æ•ˆç‡**  
   *åˆ†æ*ï¼šéœ€å¿«é€Ÿè·å–æœ€é«˜/æœ€ä½å¡”ã€‚è§£å†³æ–¹æ¡ˆï¼š  
   - æœ€å°å †ï¼ˆ`priority_queue<pair<int,int>, greater>`ï¼‰æ‰¾æœ€çŸ®å¡”  
   - æœ€å¤§å †ï¼ˆé»˜è®¤ `priority_queue`ï¼‰æ‰¾æœ€é«˜å¡”  
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼š**å †æ˜¯åŠ¨æ€æå€¼æŸ¥è¯¢çš„ç»ˆæå·¥å…·**

3. **éš¾ç‚¹3ï¼šå†³ç­–é˜ˆå€¼é€‰æ‹©**  
   *åˆ†æ*ï¼šä¸ºä½•é˜ˆå€¼=5ï¼Ÿ  
   - æ•°å­¦ä¾æ®ï¼šæ•°å­—æœŸæœ›å€¼ $E[D] = (0+9)/2 = 4.5$  
   - ç­–ç•¥ï¼š$Dâ‰¥5$ï¼ˆé«˜äºæœŸæœ›ï¼‰è§†ä¸º"å¤§æ•°"  
   *ğŸ’¡ å­¦ä¹ ç¬”è®°*ï¼š**éšæœºé—®é¢˜ç”¨æœŸæœ›å€¼åˆ’åˆ†å†³ç­–è¾¹ç•Œ**

#### **âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“**
- **æŠ€å·§1ï¼ˆæœŸæœ›åˆ†æµï¼‰**ï¼šç”¨æœŸæœ›å€¼åˆ’åˆ†å¤§å°æ•°ï¼ˆæœ¬é¢˜ $4.5$ â†’ é˜ˆå€¼ $5$)  
- **æŠ€å·§2ï¼ˆåŒå †ç»´æŠ¤ï¼‰**ï¼šç”¨æœ€å¤§å †/æœ€å°å †ç®¡ç†å¯¹ç«‹æŒ‡æ ‡ï¼ˆæœ€é«˜/æœ€çŸ®å¡”ï¼‰  
- **æŠ€å·§3ï¼ˆæ‡’æƒ°åˆ é™¤ï¼‰**ï¼šå †ä¸­å­˜å‚¨ `(height, index)` å¹¶æ ¡éªŒä¸€è‡´æ€§  

#### **âš”ï¸ ç­–ç•¥ç«æŠ€åœº**
| ç­–ç•¥             | æ ¸å¿ƒæ€æƒ³                     | ä¼˜ç‚¹                  | ç¼ºç‚¹                          | å¾—åˆ†é¢„æœŸ       |
|------------------|------------------------------|-----------------------|-------------------------------|----------------|
| **éšæœºæ”¾ç½®**     | ä»»æ„é€‰æ‹©æœªæ»¡å¡”               | å®ç°ç®€å•              | å®Œå…¨å¿½ç•¥æƒé‡ï¼Œåˆ†æ•°æä½         | 10%            |
| **çº¯è´ªå¿ƒï¼ˆå•å †ï¼‰**| å§‹ç»ˆæ”¾æœ€çŸ®å¡”                 | ä¿ç•™é«˜æƒé‡ä½          | å°æ•°å­—æµªè´¹é«˜æƒé‡ä½             | 40%-60%        |
| **åŒå †åˆ†æµ**     | æŒ‰é˜ˆå€¼åˆ†æµåˆ°æå€¼å¡”           | å¹³è¡¡å½“å‰/æœªæ¥æ”¶ç›Š     | é˜ˆå€¼éœ€è°ƒå‚                    | 90%-98%        |

#### **âœ¨ ä¼˜åŒ–ä¹‹æ—…**
> 1. **èµ·ç‚¹ï¼šéšæœºæ”¾ç½®**  
>    åˆ†æ•°å®Œå…¨ä¸å¯æ§ â†’ æœªåˆ©ç”¨æƒé‡ä¿¡æ¯  
> 2. **è¿›é˜¶ï¼šå•å †è´ªå¿ƒ**  
>    å¤§æ•°å é«˜ä½ä½†å°æ•°æ±¡æŸ“é«˜ä½ â†’ æœŸæœ›åˆ† $1.2e16$  
> 3. **è´¨å˜ï¼šåŒå †åˆ†æµ**  
>    å¤§æ•°â†’çŸ®å¡”ï¼ˆå é«˜ä½ï¼‰ï¼Œå°æ•°â†’é«˜å¡”ï¼ˆé¿é«˜ä½ï¼‰ â†’ æœŸæœ›åˆ† $1.85e16$  
> 4. **å‡åï¼šåŠ¨æ€é˜ˆå€¼**  
>    æ ¹æ®å‰©ä½™ç§¯æœ¨è°ƒæ•´é˜ˆå€¼ â†’ é€¼è¿‘ç†è®ºæé™ $1.9e16$  

---

### **4. C++æ ¸å¿ƒä»£ç å®ç°èµæ**
**é€šç”¨æ ¸å¿ƒå®ç°**  
```cpp
#include <iostream>
#include <queue>
#include <vector>
using namespace std;

int main() {
    int T, N, B; long long P;
    cin >> T >> N >> B >> P;
    
    for (int t = 0; t < T; t++) {
        vector<int> height(N, 0);
        priority_queue<pair<int, int>> max_heap; // å¤§é¡¶å †ï¼š(-h, id)
        priority_queue<pair<int, int>, vector<pair<int, int>>, greater<>> min_heap; // å°é¡¶å †ï¼š(h, id)
        
        // åˆå§‹åŒ–å †
        for (int i = 0; i < N; i++) {
            min_heap.push({0, i});
            max_heap.push({0, i});
        }

        for (int i = 0; i < N*B; i++) {
            int D; cin >> D;
            int tower_id;
            
            if (D >= 5) { // å¤§æ•° â†’ æœ€çŸ®å¡”
                auto [h, id] = min_heap.top();
                while (h != height[id]) { // æ‡’æƒ°åˆ é™¤
                    min_heap.pop();
                    tie(h, id) = min_heap.top();
                }
                tower_id = id;
            } else { // å°æ•° â†’ æœ€é«˜å¡”
                auto [h, id] = max_heap.top();
                while (h != height[id]) {
                    max_heap.pop();
                    tie(h, id) = max_heap.top();
                }
                tower_id = id;
            }
            
            cout << tower_id + 1 << endl; // è¾“å‡ºå¡”ç¼–å·
            height[tower_id]++;
            
            if (height[tower_id] < B) { // æ›´æ–°å †
                min_heap.push({height[tower_id], tower_id});
                max_heap.push({height[tower_id], tower_id});
            }
        }
    }
    int res; cin >> res;
    return 0;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
1. **åŒå †åˆå§‹åŒ–**ï¼šæœ€å°å †ç®¡ç†çŸ®å¡”ï¼ˆ`min_heap`ï¼‰ï¼Œæœ€å¤§å †ç®¡ç†é«˜å¡”ï¼ˆ`max_heap`)
2. **æ‡’æƒ°åˆ é™¤**ï¼šæ£€æŸ¥å †é¡¶é«˜åº¦æ˜¯å¦è¿‡æœŸï¼ˆ`h != height[id]`ï¼‰ï¼Œä¿è¯çŠ¶æ€ä¸€è‡´
3. **é˜ˆå€¼åˆ†æµ**ï¼š`Dâ‰¥5` æ—¶é€‰æœ€çŸ®å¡”ï¼Œå¦åˆ™é€‰æœ€é«˜å¡”
4. **åŠ¨æ€æ›´æ–°**ï¼šæ”¾ç½®åæ›´æ–°å¡”é«˜ï¼Œæœªæ»¡å¡”é‡æ–°å…¥å †

---

### **5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º**
#### **ğŸ® åƒç´ åŒ–å†³ç­–æ¨¡æ‹Ÿå™¨**
* **ä¸»é¢˜**ï¼šåƒç´ å¡”å»ºé€ è€…ï¼ˆ8-bit é£æ ¼ï¼‰
* **æ ¸å¿ƒæ¼”ç¤º**ï¼šè´ªå¿ƒç­–ç•¥å¦‚ä½•åŠ¨æ€åˆ†é…æ•°å­—åˆ°é«˜/çŸ®å¡”

**åŠ¨ç”»è®¾è®¡**ï¼š
```mermaid
graph LR
  A[æ–°æ•°å­—D] -->|Dâ‰¥5| B[æœ€çŸ®å¡”åŒºåŸŸ]
  A -->|D<5| C[æœ€é«˜å¡”åŒºåŸŸ]
  B --> D[å¡”é¡¶æ”¾ç½®-é«˜äº®é—ªçƒ]
  C --> E[å¡”åº•æ”¾ç½®-ä¸‹æ²‰åŠ¨ç”»]
  D & E --> F[æ›´æ–°å¡”é«˜åƒç´ æ¡]
```

**äº¤äº’æ§åˆ¶é¢æ¿**ï¼š
```plaintext
[å¼€å§‹] [æš‚åœ] [æ­¥è¿›â†’] [é€Ÿåº¦â–¼â–²] 
[æ•°å­—æµ: â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–„] 
[å½“å‰ç­–ç•¥: å¤§æ•°â†’çŸ®å¡”]
```

**å…³é”®å¸§è¯´æ˜**ï¼š
1. **æ•°å­—ç”Ÿæˆ**ï¼šé¡¶éƒ¨éšæœºæ‰è½åƒç´ æ•°å­—å—ï¼ˆ0-9ï¼‰
2. **å¡”é«˜æ˜¾ç¤º**ï¼šæ¯å¡”å·¦ä¾§åƒç´ è¿›åº¦æ¡ï¼ˆ0-15ï¼‰
3. **å†³ç­–ç‰¹æ•ˆ**ï¼š
   - å¤§æ•°ï¼ˆçº¢/é»„ï¼‰â†’ æœ€çŸ®å¡”ï¼ˆè“æ¡†é«˜äº®ï¼‰
   - å°æ•°ï¼ˆè“/ç»¿ï¼‰â†’ æœ€é«˜å¡”ï¼ˆçº¢æ¡†é«˜äº®ï¼‰
4. **éŸ³æ•ˆè®¾è®¡**ï¼š
   - æ”¾ç½®ï¼š8-bit "æ»´"å£°ï¼ˆéŸ³è°ƒéšæ•°å­—å¢å¤§å‡é«˜ï¼‰
   - å¡”æ»¡ï¼šèƒœåˆ©éŸ³æ•ˆ + åƒç´ çƒŸèŠ±
   - é”™è¯¯ï¼šçŸ­ä¿ƒè­¦æŠ¥å£°

**æ•™è‚²ä»·å€¼**ï¼šé€šè¿‡å¯¹æ¯”å•å †/åŒå †ç­–ç•¥çš„å¡”é«˜åˆ†å¸ƒå·®å¼‚ï¼Œç›´è§‚å±•ç¤º**åˆ†æµå¦‚ä½•å‡å°‘å°æ•°å­—å¯¹é«˜æƒä½çš„æ±¡æŸ“**

---

### **6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜**
#### **ç›¸ä¼¼æ€ç»´æ¨¡å¼**
1. **ç¼“å­˜æ·˜æ±°ç­–ç•¥**ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç”¨å †ç®¡ç†è®¿é—®æ—¶é—´
2. **ä»»åŠ¡è°ƒåº¦**ï¼šçŸ­ä»»åŠ¡ä¼˜å…ˆï¼ˆç±»ä¼¼å¤§æ•°ä¼˜å…ˆï¼‰
3. **æŠ•èµ„ç»„åˆä¼˜åŒ–**ï¼šé«˜é£é™©é«˜å›æŠ¥èµ„äº§åˆ†é…ï¼ˆç±»æ¯”å¤§æ•°å é«˜ä½ï¼‰

#### **æ´›è°·ç»ƒä¹ é¢˜**
1. **P1090 [NOIP2004] åˆå¹¶æœå­**  
   â†’ ç»ƒä¹ å †çš„æå€¼ç®¡ç†ï¼ˆæœ€å°å †ï¼‰
2. **P1801 é»‘åŒ£å­**  
   â†’ åŠ¨æ€ç»´æŠ¤ç¬¬Kå¤§å…ƒç´ ï¼ˆå †çš„è¿›é˜¶åº”ç”¨ï¼‰
3. **P2085 æœ€å°å‡½æ•°å€¼**  
   â†’ å¤šé˜Ÿåˆ—åˆ†æµæ€æƒ³ï¼ˆç±»ä¼¼åŒå †å†³ç­–ï¼‰

---

### **7. å­¦ä¹ å¿ƒå¾—**
**å…³é”®è°ƒè¯•ç»éªŒ**ï¼š
> "åˆå§‹å®ç°æœªå¤„ç†å †çŠ¶æ€ä¸€è‡´æ€§ï¼Œå¯¼è‡´é€‰æ‹©å·²æ»¡å¡”ã€‚è§£å†³æ–¹æ¡ˆï¼š  
> 1. åœ¨ `height` æ•°ç»„ç»´æŠ¤çœŸå®é«˜åº¦  
> 2. å †ä¸­å­˜å‚¨ `(h,id)` å¹¶æ ¡éªŒ `h == height[id]`  
> 3. è¿‡æœŸå…ƒç´ ç›´æ¥è·³è¿‡  
> â†’ è¿™æ˜¯å¤„ç†åŠ¨æ€å †çš„é€šç”¨æŠ€å·§"

**æ ¸å¿ƒé¢†æ‚Ÿ**ï¼š  
**åœ¨çº¿å†³ç­– = å½“å‰ä¿¡æ¯ + æœªæ¥æœŸæœ›**ï¼Œè´ªå¿ƒç­–ç•¥åœ¨éšæœºè¾“å…¥ä¸‹å¸¸æ˜¯æœ€ä¼˜è¿‘ä¼¼è§£ã€‚

---
å¤„ç†ç”¨æ—¶ï¼š225.73ç§’
# é¢˜ç›®ä¿¡æ¯

# [USACO22OPEN] Apple Catching G

## é¢˜ç›®æè¿°

å¤©ä¸Šä¸‹è‹¹æœäº†ï¼åœ¨æŸäº›æ—¶åˆ»ï¼Œä¸€å®šæ•°é‡çš„è‹¹æœä¼šè½åˆ°æ•°è½´ä¸Šã€‚åœ¨æŸäº›æ—¶åˆ»ï¼ŒFarmer John çš„ä¸€äº›å¥¶ç‰›å°†åˆ°è¾¾æ•°è½´å¹¶å¼€å§‹æ¥è‹¹æœã€‚

å¦‚æœä¸€ä¸ªè‹¹æœåœ¨æ²¡æœ‰å¥¶ç‰›æ¥ä½çš„æƒ…å†µä¸‹è½åˆ°æ•°è½´ä¸Šï¼Œå®ƒå°±ä¼šæ°¸è¿œæ¶ˆå¤±ã€‚å¦‚æœä¸€å¤´å¥¶ç‰›å’Œä¸€ä¸ªè‹¹æœåŒæ—¶åˆ°è¾¾ï¼Œå¥¶ç‰›å°±ä¼šæ¥ä½è‹¹æœã€‚æ¯å¤´å¥¶ç‰›æ¯ç§’å¯ä»¥ç§»åŠ¨ä¸€å•ä½è·ç¦»ã€‚ä¸€æ—¦ä¸€å¤´å¥¶ç‰›æ¥ä½äº†ä¸€ä¸ªè‹¹æœï¼Œå¥¹å°±ä¼šç¦»å¼€æ•°è½´ã€‚

å¦‚æœ FJ çš„å¥¶ç‰›ä»¥æœ€ä¼˜æ–¹å¼åˆä½œï¼Œå¥¹ä»¬æ€»å…±èƒ½æ¥ä½å¤šå°‘ä¸ªè‹¹æœï¼Ÿ

## è¯´æ˜/æç¤º

ã€æ ·ä¾‹è§£é‡Š 1ã€‘

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨ $t=5$ æ—¶åˆ»è½åœ°çš„ $100$ ä¸ªè‹¹æœå‡ä¸èƒ½è¢«æ¥ä½ã€‚ä»¥ä¸‹æ˜¯ä¸€ç§æ¥ä½ $10$ ä¸ªè‹¹æœçš„æ–¹å¼ï¼š

- FJ çš„æ‰€æœ‰å…­å¤´ $t=4$ æ—¶åˆ»åˆ°è¾¾çš„å¥¶ç‰›å„æ¥ä¸€ä¸ª $t=8$ æ—¶åˆ»è½åœ°çš„è‹¹æœã€‚
- FJ çš„ä¸€å¤´ $t=2$ æ—¶åˆ»åˆ°è¾¾çš„å¥¶ç‰›æ¥ä¸€ä¸ª $t=8$ æ—¶åˆ»è½åœ°çš„è‹¹æœã€‚
- ä½™ä¸‹ä¸‰å¤´ $t=2$ æ—¶åˆ»åˆ°è¾¾çš„å¥¶ç‰›å„æ¥ä¸€ä¸ª $t=6$ æ—¶åˆ»è½åœ°çš„è‹¹æœã€‚

ã€æ ·ä¾‹è§£é‡Š 2ã€‘

å†ä¸€æ¬¡åœ°ï¼Œåœ¨ $t=5$ æ—¶åˆ»è½åœ°çš„è‹¹æœå‡ä¸èƒ½è¢«æ¥ä½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ $t=2$ æ—¶åˆ»åˆ°è¾¾çš„å¥¶ç‰›å‡ä¸èƒ½æ¥ä½ $t=8$ æ—¶åˆ»è½åœ°çš„è‹¹æœã€‚ä»¥ä¸‹æ˜¯ä¸€ç§æ¥ä½ $9$ ä¸ªè‹¹æœçš„æ–¹å¼ï¼š

- FJ çš„æ‰€æœ‰å…­å¤´ $t=4$ æ—¶åˆ»åˆ°è¾¾çš„å¥¶ç‰›å„æ¥ä¸€ä¸ª $t=8$ æ—¶åˆ»è½åœ°çš„è‹¹æœã€‚
- ä½™ä¸‹ä¸‰å¤´ $t=2$ æ—¶åˆ»åˆ°è¾¾çš„å¥¶ç‰›å„æ¥ä¸€ä¸ª $t=6$ æ—¶åˆ»è½åœ°çš„è‹¹æœã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5
2 5 10 100
2 6 0 3
2 8 10 7
1 2 4 5
1 4 7 6```

### è¾“å‡º

```
10```

## æ ·ä¾‹ #2

### è¾“å…¥

```
5
2 5 10 100
2 6 0 3
2 8 11 7
1 2 4 5
1 4 7 6```

### è¾“å‡º

```
9```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šApple Catching G æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> æ¬¢è¿æ¥åˆ°ã€Œæ´›è¯­äº‘ç¬ºã€çš„ç®—æ³•è§£æè¯¾å ‚ï¼ä»Šå¤©æˆ‘ä»¬å°†ä¸€èµ·æ¢ç´¢USACO22OPENçš„ç»å…¸é¢˜ç›®â€”â€”Apple Catching Gã€‚è¿™æ˜¯ä¸€é“å°†ç°å®é—®é¢˜æŠ½è±¡ä¸ºäºŒç»´åŒ¹é…çš„ç²¾å½©é¢˜ç›®ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¾¦æ¢èˆ¬çš„æ€ç»´ï¼Œä¸€æ­¥æ­¥æ­å¼€æœ€ä¼˜è§£çš„ç¥ç§˜é¢çº±ï¼

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨æ»¡è¶³æ—¶ç©ºçº¦æŸï¼ˆ$|x_i-x_j| \leq t_j-t_i$ï¼‰çš„å‰æä¸‹ï¼Œæœ€å¤§åŒ–å¥¶ç‰›æ¥ä½çš„è‹¹æœæ•°é‡  
âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šè´ªå¿ƒç­–ç•¥ã€äºŒç»´ååºã€æ•°æ®ç»“æ„ï¼ˆmultisetï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> è¿™é“é¢˜çš„æ ¸å¿ƒåœ¨äºå¤„ç†å¥¶ç‰›ä¸è‹¹æœçš„æ—¶ç©ºå…³ç³»ã€‚æœ€æœ´ç´ çš„æš´åŠ›è§£æ³•æ˜¯å°è¯•æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ç»„åˆï¼Œä½†O(nÂ²)çš„å¤æ‚åº¦æ˜¾ç„¶æ— æ³•é€šè¿‡200,000çš„æ•°æ®è§„æ¨¡ã€‚é€šè¿‡è§‚å¯Ÿé¢˜ç›®ç‰¹å¾ï¼Œæˆ‘ä»¬å‘ç°ï¼š
> - é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºäºŒç»´å¹³é¢ä¸Šçš„ç‚¹åŒ¹é…
> - å¥¶ç‰›èƒ½æ¥åˆ°çš„è‹¹æœåŒºåŸŸæ„æˆä¸€ä¸ªåŠå¹³é¢
> - é€šè¿‡45åº¦åæ ‡æ—‹è½¬ï¼Œé—®é¢˜å¯è½¬åŒ–ä¸ºç»å…¸çš„äºŒç»´ååºé—®é¢˜
> 
> æœ€ä¼˜è§£æ³•é‡‡ç”¨**è´ªå¿ƒ+multiset**çš„ç»„åˆç­–ç•¥ï¼š
> 1. å°†å¥¶ç‰›å’Œè‹¹æœæ˜ å°„ä¸ºæ–°çš„åæ ‡(t+x, t-x)
> 2. æŒ‰ç‰¹å®šè§„åˆ™æ’åºï¼ˆyé™åºâ†’xé™åºï¼‰
> 3. ç”¨multisetç»´æŠ¤è‹¹æœé›†åˆï¼Œè´ªå¿ƒåŒ¹é…

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š"æœ€å¤§åŒ–æ¥ä½çš„è‹¹æœæ•°é‡"æ˜¯å…¸å‹çš„**æœ€ä¼˜åŒ–é—®é¢˜**ï¼Œä¸”åŒ¹é…å…·æœ‰**é€‰æ‹©æ€§**ï¼Œè¿™æŒ‡å‘è´ªå¿ƒæˆ–ç½‘ç»œæµç®—æ³•
2.  **çº¿ç´¢2 (é—®é¢˜ç‰¹æ€§)**ï¼šå¥¶ç‰›ä¸è‹¹æœçš„åŒ¹é…å­˜åœ¨ä¸¥æ ¼çš„**æ—¶ç©ºçº¦æŸ**ï¼ˆç»å¯¹å€¼ä¸ç­‰å¼ï¼‰ï¼Œæš—ç¤ºéœ€è¦**åæ ‡å˜æ¢**è½¬åŒ–ä¸ºå¯å¤„ç†çš„å½¢å¼
3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼šnâ‰¤200,000è¦æ±‚O(n log n)ç®—æ³•ï¼Œæ’é™¤äº†O(nÂ²)æš´åŠ›è§£ï¼ŒæŒ‡å‘**æ•°æ®ç»“æ„ä¼˜åŒ–**

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> ç»¼åˆçº¿ç´¢ï¼Œæˆ‘ä»¬è¿™æ ·æ€è€ƒï¼š
> 1. çº¿ç´¢1æç¤ºè¿™æ˜¯æœ€ä¼˜åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘è´ªå¿ƒï¼ˆç½‘ç»œæµåœ¨n=2e5ä¸‹å¯èƒ½è¶…æ—¶ï¼‰
> 2. çº¿ç´¢2çš„å…³é”®è¯"æ—¶ç©ºçº¦æŸ"å’Œ"ç»å¯¹å€¼"æç¤ºå°è¯•åæ ‡å˜æ¢ï¼šè®¾æ–°åæ ‡(u,v)=(t+x,t-x)
> 3. æ–°åæ ‡ä¸‹çº¦æŸç®€åŒ–ä¸ºuáµ¢â‰¤uâ±¼ä¸”váµ¢â‰¥vâ±¼ï¼Œæˆä¸ºäºŒç»´ååºé—®é¢˜
> 4. çº¿ç´¢3çš„n=2e5è¦æ±‚O(n log n)ï¼Œè€Œæ’åº+å¹³è¡¡æ ‘/multisetæ­£å¥½æ»¡è¶³
> 
> **ç»“è®º**ï¼šé‡‡ç”¨**åæ ‡å˜æ¢+æ’åº+multisetè´ªå¿ƒåŒ¹é…**çš„ä¸‰æ­¥ç­–ç•¥ï¼Œå®Œç¾å¥‘åˆæ‰€æœ‰çº¿ç´¢ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šI_am_Acceptedï¼ˆè´¨é‡ï¼šâ˜…â˜…â˜…â˜…â˜…ï¼‰
* **æ ¸å¿ƒæ€è·¯**ï¼š
  - å°†å¥¶ç‰›/è‹¹æœæ˜ å°„ä¸º(t+x, t-x)åæ ‡
  - æŒ‰yé™åºâ†’xé™åºæ’åº
  - ç”¨multisetç»´æŠ¤è‹¹æœï¼Œå¥¶ç‰›ä¼˜å…ˆåŒ¹é…æœ€å°xå€¼çš„è‹¹æœ
* **äº®ç‚¹**ï¼š
  - å¼•å…¥`mutable`å…³é”®å­—ä¼˜é›…å¤„ç†multisetå…ƒç´ ä¿®æ”¹
  - ä¸¥æ ¼å¤„ç†åŒ¹é…æ—¶çš„æ•°é‡æ‰£é™¤é€»è¾‘
  - ä»£ç æ¨¡å—æ¸…æ™°ï¼Œè¾¹ç•Œå¤„ç†å®Œå–„

### é¢˜è§£äºŒï¼šyaoxiï¼ˆè´¨é‡ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼‰
* **æ ¸å¿ƒæ€è·¯**ï¼š
  - æŒ‰(x-t, -x)æ’åºï¼Œç¡®ä¿è¦†ç›–èŒƒå›´å¤§çš„å¥¶ç‰›ä¼˜å…ˆåŒ¹é…
  - ä½¿ç”¨`pair`å­˜å‚¨è‹¹æœï¼Œç®€åŒ–åŒ¹é…é€»è¾‘
* **äº®ç‚¹**ï¼š
  - ç‹¬ç‰¹çš„æ’åºè§„åˆ™ä¿è¯è¢«åŒ…å«çš„é›†åˆä¼˜å…ˆåŒ¹é…
  - ä»£ç ç®€æ´é«˜æ•ˆï¼ˆä»…30è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰
  - å®Œæ•´å¤„ç†äº†åŒ¹é…æ—¶çš„æ•°é‡æ›´æ–°

### é¢˜è§£ä¸‰ï¼šEricQianï¼ˆè´¨é‡ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼‰
* **æ ¸å¿ƒæ€è·¯**ï¼š
  - æŒ‰x-tå‡åºæ’åºï¼Œè®©"æ›´éš¾åŒ¹é…"çš„å¥¶ç‰›ä¼˜å…ˆ
  - å¥¶ç‰›ä¼˜å…ˆåŒ¹é…t+xæœ€å°çš„è‹¹æœï¼ˆæœ€éš¾åŒ¹é…çš„è‹¹æœï¼‰
* **äº®ç‚¹**ï¼š
  - åˆ›æ–°æ€§çš„"æœ€éš¾åŒ¹é…ä¼˜å…ˆ"ç­–ç•¥
  - ä»£ç æåº¦ç®€æ´ï¼ˆ20è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰
  - åŒ…å«å®Œæ•´çš„è´ªå¿ƒæ­£ç¡®æ€§è¯æ˜

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1.  **åæ ‡ç³»è½¬æ¢çš„å‡ ä½•æ„ä¹‰**
    * **åˆ†æ**ï¼šåŸå§‹çº¦æŸ$|x_i-x_j|â‰¤t_j-t_i$åœ¨å‡ ä½•ä¸Šè¡¨ç¤ºå¥¶ç‰›åœ¨æ—¶ç©ºå¹³é¢ä¸Šçš„å½±å“åŒºåŸŸæ˜¯ä¸€ä¸ª45åº¦è±å½¢ã€‚é€šè¿‡åæ ‡å˜æ¢ï¼š
      $u=t+x, v=t-x$ 
      è±å½¢åŒºåŸŸå˜ä¸º$u_câ‰¤u_a$ä¸”$v_câ‰¥v_a$çš„çŸ©å½¢åŒºåŸŸ
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåæ ‡æ—‹è½¬æ˜¯å¤„ç†ç»å¯¹å€¼çº¦æŸçš„åˆ©å™¨ï¼Œå°†å¤æ‚å‡ ä½•å…³ç³»è½¬åŒ–ä¸ºè§„æ•´çš„çŸ©å½¢åŒºåŸŸ

2.  **è´ªå¿ƒç­–ç•¥çš„è®¾è®¡ä¸è¯æ˜**
    * **åˆ†æ**ï¼šä¼˜è´¨é¢˜è§£é‡‡ç”¨ä¸¤ç§äº’è¡¥ç­–ç•¥ï¼š
      - ç­–ç•¥Aï¼šè¦†ç›–èŒƒå›´å¤§çš„å¥¶ç‰›ä¼˜å…ˆï¼ˆä¿è¯"å¼ºè€…"å…ˆé€‰ï¼‰
      - ç­–ç•¥Bï¼šæœ€éš¾åŒ¹é…çš„è‹¹æœä¼˜å…ˆï¼ˆä¿è¯èµ„æºåˆç†åˆ†é…ï¼‰
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒç­–ç•¥éœ€è¦ä¿è¯**æ— åæ•ˆæ€§**â€”â€”å½“å‰é€‰æ‹©ä¸å½±å“åç»­å†³ç­–çš„æœ€ä¼˜æ€§

3.  **multisetçš„æ“ä½œæŠ€å·§**
    * **åˆ†æ**ï¼šåŒ¹é…æ—¶éœ€è¦ï¼š
      1. å¿«é€ŸæŸ¥æ‰¾æ»¡è¶³$uâ‰¥u_{cow}$çš„æœ€å°è‹¹æœï¼ˆ`lower_bound`ï¼‰
      2. åŠ¨æ€æ‰£é™¤è‹¹æœæ•°é‡
      3. é«˜æ•ˆåˆ é™¤æ•°é‡å½’é›¶çš„è‹¹æœ
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`multiset`çš„`erase`è¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé¿å…è¿­ä»£å™¨å¤±æ•ˆ

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **åæ ‡ç³»è½¬æ¢**ï¼šå°†æ–œ45åº¦çš„è±å½¢åŒºåŸŸè½¬åŒ–ä¸ºè½´å¯¹é½çš„çŸ©å½¢åŒºåŸŸ
- **æ’åºé™ç»´**ï¼šé€šè¿‡æ’åºå°†äºŒç»´åŒ¹é…é—®é¢˜è½¬åŒ–ä¸ºä¸€ç»´æ‰«æ
- **æ•°æ®ç»“æ„é€‰æ‹©**ï¼š`multiset`ç»´æŠ¤åŠ¨æ€é›†åˆï¼Œæ”¯æŒ$O(\log n)$æŸ¥æ‰¾å’Œåˆ é™¤

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ
| ç­–ç•¥                | æ ¸å¿ƒæ€æƒ³                     | ä¼˜ç‚¹                     | ç¼ºç‚¹                     | å¾—åˆ†é¢„æœŸ |
|---------------------|-----------------------------|--------------------------|--------------------------|----------|
| **æš´åŠ›æšä¸¾**        | å°è¯•æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ç»„åˆ       | å®ç°ç®€å•                 | O(nÂ²)è¶…æ—¶               | TLE      |
| **ç½‘ç»œæµ**          | æ„å»ºå¥¶ç‰›â†’è‹¹æœçš„æµé‡ç½‘ç»œ      | å¯å¾—ç²¾ç¡®è§£               | O(nÂ²)ç©ºé—´è¶…é™           | MLE      |
| **æ ‘å¥—æ ‘**          | äºŒç»´æ•°æ®ç»“æ„ç»´æŠ¤ç‚¹å¯¹        | ç†è®ºå¯è¡Œ                 | ä»£ç å¤æ‚ï¼Œå¸¸æ•°å¤§         | 70%      |
| **è´ªå¿ƒ+multiset**   | åæ ‡å˜æ¢+æ’åº+è´ªå¿ƒåŒ¹é…      | O(n log n)æœ€ä¼˜          | éœ€ä¸¥æ ¼è¯æ˜æ­£ç¡®æ€§         | 100%     |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»"èƒ½åš"åˆ°"åšå¥½"
1. **èµ·ç‚¹ï¼šæš´åŠ›æšä¸¾çš„å›°å¢ƒ**  
   å°è¯•æ‰€æœ‰å¥¶ç‰›-è‹¹æœç»„åˆï¼ˆO(nÂ²)ï¼‰ï¼Œå½“n=200,000æ—¶è®¡ç®—é‡è¾¾40äº¿ï¼Œè¿œè¶…æ—¶é™

2. **å…³é”®æ´å¯Ÿï¼šçº¦æŸçš„å‡ ä½•æœ¬è´¨**  
   å‘ç°å¥¶ç‰›å½±å“åŒºåŸŸæ˜¯45åº¦è±å½¢â†’åæ ‡æ—‹è½¬45åº¦â†’é—®é¢˜è½¬åŒ–ä¸ºè½´å¯¹é½çŸ©å½¢è¦†ç›–

3. **çªç ´ï¼šé™ç»´æ‰“å‡»**  
   é€šè¿‡æŒ‰yåæ ‡æ’åºï¼Œå°†äºŒç»´åŒ¹é…è½¬åŒ–ä¸ºä¸€ç»´æ‰«æçº¿é—®é¢˜

4. **ä¸´é—¨ä¸€è„šï¼šè´ªå¿ƒ+æ•°æ®ç»“æ„**  
   ç”¨multisetç»´æŠ¤å½“å‰è‹¹æœé›†åˆï¼ŒO(log n)å®ŒæˆæŸ¥æ‰¾å’Œåˆ é™¤æ“ä½œ

> ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼šä»æš´åŠ›åˆ°æœ€ä¼˜è§£çš„è·¨è¶Šï¼Œå…³é”®åœ¨äºå‘ç°**é—®é¢˜å¯è½¬åŒ–**çš„æœ¬è´¨ç‰¹å¾ã€‚åœ¨ç«èµ›ä¸­ï¼Œå³ä½¿æƒ³ä¸åˆ°æœ€ä¼˜è§£ï¼Œå®ç°O(nÂ²)çš„æš´åŠ›ä¹Ÿå¯èƒ½è·å¾—éƒ¨åˆ†åˆ†æ•°ï¼Œä½†æœ€ä¼˜è§£æ‰æ˜¯é€šå‘ACçš„é‡‘é’¥åŒ™ï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### é€šç”¨æ ¸å¿ƒå®ç°
```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 2e5+5;

struct Event {
    bool isCow;
    int x, y, cnt;
    bool operator<(const Event& e) const {
        return y != e.y ? y > e.y : x > e.x; // ä¸»ï¼šyé™åºï¼›æ¬¡ï¼šxé™åº
    }
};

int main() {
    int n; cin >> n;
    vector<Event> events;
    for (int i = 0; i < n; ++i) {
        int type, t, x, cnt;
        cin >> type >> t >> x >> cnt;
        events.push_back({type==1, t+x, t-x, cnt});
    }
    sort(events.begin(), events.end());
    
    multiset<pair<int, int>> apples; // <x, cnt>
    int ans = 0;
    
    for (auto& e : events) {
        if (e.isCow) {
            while (e.cnt) {
                auto it = apples.lower_bound({e.x, 0});
                if (it == apples.end()) break;
                
                int take = min(e.cnt, it->second);
                ans += take;
                e.cnt -= take;
                
                if (take == it->second) {
                    apples.erase(it);
                } else {
                    apples.insert({it->first, it->second - take});
                    apples.erase(it);
                }
            }
        } else {
            apples.insert({e.x, e.cnt});
        }
    }
    cout << ans << endl;
}
```

### é¢˜è§£ç‰‡æ®µèµæ
**I_am_Acceptedçš„åŒ¹é…æ ¸å¿ƒ**ï¼š
```cpp
while (a[i].cnt) {
    it = s.lower_bound((node){0, a[i].x, 0, 0});
    if (it == s.end()) break;
    int take = min(a[i].cnt, it->cnt);
    ans += take;
    // ä¼˜é›…å¤„ç†æ•°é‡æ‰£é™¤
    if (it->cnt > a[i].cnt) {
        it->cnt -= a[i].cnt;
        break;
    }
    a[i].cnt -= it->cnt;
    s.erase(it);
}
```
**äº®ç‚¹**ï¼šä½¿ç”¨`mutable`å…è®¸ä¿®æ”¹setå…ƒç´ ï¼Œé¿å…é¢‘ç¹åˆ é™¤æ’å…¥  
**å­¦ä¹ ç¬”è®°**ï¼š`mutable`å…³é”®å­—å¯çªç ´setå…ƒç´ çš„consté™åˆ¶ï¼Œä½†éœ€è°¨æ…ä½¿ç”¨

**yaoxiçš„ç®€æ´å®ç°**ï¼š
```cpp
multiset<pii> st;
for (auto e : events) {
    if (e.isCow) {
        auto it = st.lower_bound({e.t+e.x, 0});
        while (e.cnt && it != st.end()) {
            int take = min(e.cnt, it->second);
            // ç®€æ´çš„æ•°é‡æ›´æ–°
        }
    } else {
        st.insert({e.t+e.x, e.cnt});
    }
}
```
**äº®ç‚¹**ï¼šä½¿ç”¨`pair`ä»£æ›¿ç»“æ„ä½“ï¼Œä»£ç æ›´ç®€æ´  
**å­¦ä¹ ç¬”è®°**ï¼šå½“ä»…éœ€ä¸¤ä¸ªæ•°æ®æˆå‘˜æ—¶ï¼Œ`pair`æ¯”`struct`æ›´è½»é‡

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š8-bité£æ ¼ã€Šå¥¶ç‰›æ¥è‹¹æœå¤§ä½œæˆ˜ã€‹  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šåæ ‡å˜æ¢ â†’ æ’åº â†’ è´ªå¿ƒåŒ¹é…çš„å…¨è¿‡ç¨‹

### åŠ¨ç”»è®¾è®¡
```mermaid
graph TD
    A[åŸå§‹åæ ‡] -->|45åº¦æ—‹è½¬| B(æ–°åæ ‡ç³»)
    B --> C{æ’åºç­–ç•¥}
    C --> D[è¦†ç›–èŒƒå›´å¤§çš„ä¼˜å…ˆ]
    C --> E[æœ€éš¾åŒ¹é…ä¼˜å…ˆ]
    D --> F[multisetç»´æŠ¤]
    E --> F
    F --> G[åŒ¹é…æˆåŠŸï¼]
```

**å…³é”®å¸§è®¾è®¡**ï¼š
1. **åæ ‡å˜æ¢æ¼”ç¤º**ï¼š
   - åŸå§‹æ—¶ç©ºå¹³é¢ï¼šå¥¶ç‰›æ˜¾ç¤ºä¸ºğŸ®ï¼Œè‹¹æœæ˜¾ç¤ºä¸ºğŸ
   - 45åº¦æ—‹è½¬åŠ¨ç”»ï¼šåæ ‡ç³»é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œè±å½¢åŒºåŸŸå˜ä¸ºçŸ©å½¢

2. **æ’åºè¿‡ç¨‹å¯è§†åŒ–**ï¼š
   - å¥¶ç‰›/è‹¹æœæŒ‰æ–°åæ ‡yå€¼ä»å¤§åˆ°å°ä¸‹è½
   - ç›¸åŒyå€¼æ—¶ï¼Œxå€¼å¤§çš„å…ˆè½åˆ°åº•éƒ¨

3. **è´ªå¿ƒåŒ¹é…åŠ¨ç”»**ï¼š
   - å¥¶ç‰›ç§»åŠ¨æ—¶æ˜¾ç¤ºè½¨è¿¹çº¿
   - åŒ¹é…æˆåŠŸæ—¶æ˜¾ç¤ºâœ¨ç‰¹æ•ˆ
   - è‹¹æœæ•°é‡å‡å°‘æ—¶æ˜¾ç¤º"-1"é£˜å­—

**æ¸¸æˆåŒ–å…ƒç´ **ï¼š
- **éŸ³æ•ˆè®¾è®¡**ï¼š
  - åŒ¹é…æˆåŠŸï¼šç»å…¸é©¬é‡Œå¥¥åƒé‡‘å¸éŸ³æ•ˆ
  - è‹¹æœæ¶ˆå¤±ï¼šç ´ç¢ç»ç’ƒå£°
  - å…³å¡é€šè¿‡ï¼šå¡å°”è¾¾é€šå…³æ—‹å¾‹
- **ç§¯åˆ†ç³»ç»Ÿ**ï¼šæ¯æ¥ä½1è‹¹æœå¾—10åˆ†ï¼Œè¿ç»­åŒ¹é…æœ‰comboå¥–åŠ±
- **å…³å¡è®¾è®¡**ï¼š
  - æ•™å­¦å…³ï¼š5è‹¹æœ
  - è¿›é˜¶å…³ï¼šå¯¹ç§°åˆ†å¸ƒè‹¹æœ
  - BOSSå…³ï¼š2000è‹¹æœå‹åŠ›æµ‹è¯•

**æŠ€æœ¯å®ç°**ï¼šåŸºäºCanvasçš„åƒç´ ç»˜åˆ¶ï¼Œä½¿ç”¨Asepriteåˆ¶ä½œç´ æï¼ŒWeb Audio APIå®ç°8-bitéŸ³æ•ˆ

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
è´ªå¿ƒ+åæ ‡å˜æ¢çš„ç­–ç•¥å¯æ‰©å±•è‡³ï¼š
1. ä»»åŠ¡è°ƒåº¦ï¼ˆæ¯ä¸ªä»»åŠ¡æœ‰å¼€å§‹/ç»“æŸæ—¶é—´ï¼‰
2. åŒºé—´è¦†ç›–ï¼ˆå¦‚é›·è¾¾è¦†ç›–é—®é¢˜ï¼‰
3. äºŒç»´ç‚¹å¯¹åŒ¹é…ï¼ˆå¦‚æœ¬æ¬¡çš„å¥¶ç‰›-è‹¹æœé—®é¢˜ï¼‰

### æ¨èç»ƒä¹ ï¼ˆæ´›è°·ï¼‰
1. **P5894 [IOI2013]robots**  
   ğŸ—£ï¸ *æ¨èç†ç”±*ï¼šåŒæ ·æ˜¯äºŒç»´åŒ¹é…é—®é¢˜ï¼Œæ£€éªŒæ˜¯å¦æŒæ¡è´ªå¿ƒ+æ•°æ®ç»“æ„çš„æ ¸å¿ƒæ€æƒ³

2. **P4053 [JSOI2007]å»ºç­‘æŠ¢ä¿®**  
   ğŸ—£ï¸ *æ¨èç†ç”±*ï¼šå˜å½¢çš„æ—¶é—´åŒºé—´é—®é¢˜ï¼Œç»ƒä¹ è´ªå¿ƒç­–ç•¥çš„çµæ´»åº”ç”¨

3. **P5021 [NOIP2018]èµ›é“ä¿®å»º**  
   ğŸ—£ï¸ *æ¨èç†ç”±*ï¼šæ ‘å½¢ç»“æ„ä¸Šçš„è´ªå¿ƒåŒ¹é…ï¼Œæå‡é—®é¢˜è½¬åŒ–èƒ½åŠ›

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªé¢˜è§£çš„è°ƒè¯•ç»éªŒ**ï¼š
> "æˆ‘åœ¨å¤„ç†multisetè¿­ä»£å™¨æ—¶è¸©äº†å‘â€”â€”åˆ é™¤å…ƒç´ åæœªæ›´æ–°è¿­ä»£å™¨å¯¼è‡´æ®µé”™è¯¯ã€‚è§£å†³æ–¹æ³•ï¼š`it = apples.erase(it)`ç¡®ä¿è¿­ä»£å™¨æŒ‡å‘ä¸‹ä¸€å…ƒç´ "
>
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> è¿™ä¸ªç»éªŒéå¸¸å®è´µï¼ä½¿ç”¨STLå®¹å™¨æ—¶ï¼Œè¿­ä»£å™¨å¤±æ•ˆæ˜¯å¸¸è§é”™è¯¯ã€‚ç‰¢è®°ï¼š
> 1. åˆ é™¤å…ƒç´ ä¼šä½¿æŒ‡å‘è¯¥å…ƒç´ çš„è¿­ä»£å™¨å¤±æ•ˆ
> 2. `erase`è¿”å›æŒ‡å‘ä¸‹ä¸€å…ƒç´ çš„è¿­ä»£å™¨
> 3. å¾ªç¯ä¸­åˆ é™¤åº”ä½¿ç”¨`while(it!=end)`é…åˆ`it=erase(it)`

---

<conclusion>
**ç»“è¯­**ï¼š  
é€šè¿‡æœ¬æ¬¡æ¢ç´¢ï¼Œæˆ‘ä»¬è§è¯äº†å¦‚ä½•å°†å¤æ‚çš„ç°å®é—®é¢˜ï¼ˆæ¥è‹¹æœï¼‰è½¬åŒ–ä¸ºä¼˜é›…çš„ç®—æ³•æ¨¡å‹ï¼ˆäºŒç»´ååºï¼‰ã€‚è®°ä½ç®—æ³•è®¾è®¡çš„é»„é‡‘æ³•åˆ™ï¼š  
ğŸ” *è§‚å¯Ÿç‰¹å¾ â†’ ğŸ“ è½¬åŒ–æ¨¡å‹ â†’ ğŸ§© é€‰æ‹©ç­–ç•¥ â†’ ğŸš€ é«˜æ•ˆå®ç°*  
ä¸‹æ¬¡é‡åˆ°éš¾é¢˜æ—¶ï¼Œè®°å¾—åƒä¾¦æ¢ä¸€æ ·å¯»æ‰¾é¢˜ç›®ä¸­çš„çº¿ç´¢ï¼ç»§ç»­åŠ æ²¹ï¼Œæœªæ¥çš„ç®—æ³•å¤§å¸ˆä»¬ï¼âœ¨
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š186.90ç§’
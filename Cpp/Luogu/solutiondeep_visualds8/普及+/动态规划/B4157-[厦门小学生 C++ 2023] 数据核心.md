# é¢˜ç›®ä¿¡æ¯

# [å¦é—¨å°å­¦ç”Ÿ C++ 2023] æ•°æ®æ ¸å¿ƒ

## é¢˜ç›®èƒŒæ™¯

æœ¬è¯•é¢˜ä¸º 2023 å¹´å¦é—¨å¸‚å°å­¦ç”Ÿ C++ è¯­è¨€**å¤èµ›**è¯•é¢˜ï¼Œæ•°æ®ä¸ºæ´›è°·è‡ªé€ ã€‚

**åˆèµ›**ä¸ºç¬”è¯•ã€‚

## é¢˜ç›®æè¿°

Sora æœ‰ä¸€å—ç¥å¥‡çš„æ•°æ®æ ¸å¿ƒï¼Œè¿™å—æ•°æ®æ ¸å¿ƒé‡Œæœ‰ $n\times m$ ä¸ªæ•°æ®å—ï¼Œè¿™äº›æ•°æ®å—ç»„æˆäº†ä¸€ä¸ª $n\times m$ çš„çŸ©é˜µã€‚

åœ¨æ•°æ®æ ¸å¿ƒä¸­ï¼Œæ¯ä¸ªæ•°æ®å—éƒ½æœ‰ä¸€ä¸ªå¼ºåº¦ $a_{i,j}$ï¼Œä»£è¡¨è¿™ä¸ªæ•°æ®å—å­˜åœ¨æ•°æ®æ ¸å¿ƒä¸­æ—¶ä¼šæä¾›å¤šå°‘çš„è¿ç®—åŠ›ã€‚ä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ•°æ®æ ¸å¿ƒä¸­æœ‰ä¸€äº›æ•°æ®å—å‡ºç°äº†ç¡¬ä»¶è€åŒ–ï¼Œæœ‰äº›æ•°æ®å—çš„å¼ºåº¦æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œç»§ç»­ä¿ç•™è¿‡å¤šçš„è€åŒ–æ•°æ®å—ä¼šå½±å“æ•°æ®æ ¸å¿ƒçš„ä½¿ç”¨æ•ˆç‡ï¼Œæ‰€ä»¥ Sora å†³å®šä»åŸæœ¬çš„æ•°æ®æ ¸å¿ƒçš„çŸ©é˜µä¸­ï¼Œå…ˆç¡®å®šä¸€ä¸ªæ•°æ®å—ä½œä¸ºæ–°æ•°æ®æ ¸å¿ƒçš„å·¦ä¸Šè§’ï¼Œå…¶ä½ç½®ä¸º $(x, y)$ ï¼Œå‘å³ä¸‹æ–¹åˆ‡å‰²å‡ºä¸€å—æ•°æ®æ ¸å¿ƒï¼ˆå­çŸ©é˜µï¼‰ï¼Œä»¥ä¿è¯å…¶ä½¿ç”¨æ•ˆç‡ã€‚

ä½†æ˜¯ Sora æ˜¯ä¸€ä¸ªæœ‰ç€å¤©é©¬è¡Œç©ºæƒ³è±¡åŠ›çš„ç§‘å­¦å®¶ï¼Œå¥¹æƒ³çŸ¥é“åœ¨ç¡®å®šäº†æ–°çš„æ•°æ®æ ¸å¿ƒå·¦ä¸Šè§’çš„æ•°æ®å—çš„æƒ…å†µä¸‹ï¼Œå…¶ä½ç½®ä¸º $(x, y)$ï¼Œæ–°çš„æ•°æ®æ ¸å¿ƒï¼ˆå­çŸ©é˜µï¼‰èƒ½å¤Ÿè·å¾—çš„æœ€å¤§è¿ç®—åŠ›æ˜¯å¤šå°‘ã€‚

å½“ç„¶å¥¹çš„é—®é¢˜å¾ˆå¤šï¼Œæœ‰ $Q$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®éƒ½ä¼šç»™å‡ºä¸€ä¸ªä½ç½® $(x, y)$ï¼Œä½ éœ€è¦ç®—å‡ºä»¥è¿™ä¸ªä½ç½®ä¸ºå·¦ä¸Šè§’çš„æ–°æ•°æ®æ ¸å¿ƒå¯¹åº”çš„æœ€å¤§è¿ç®—åŠ›ã€‚


## è¯´æ˜/æç¤º

### æ ·ä¾‹è§£é‡Š

- ç¬¬ä¸€ä¸ªè¯¢é—®å¯¹åº”çš„æ–°æ•°æ®æ ¸å¿ƒæ˜¯ $(1,1)$ åˆ° $(5,5)$ã€‚
- ç¬¬äºŒä¸ªè¯¢é—®å¯¹åº”çš„æ–°æ•°æ®æ ¸å¿ƒæ˜¯ $(2,2)$ åˆ° $(5,5)$ã€‚
- ç¬¬ä¸‰ä¸ªè¯¢é—®å¯¹åº”çš„æ–°æ•°æ®æ ¸å¿ƒæ˜¯ $(3,3)$ åˆ° $(5,4)$ã€‚
- ç¬¬å››ä¸ªè¯¢é—®å¯¹åº”çš„æ–°æ•°æ®æ ¸å¿ƒæ˜¯ $(5,1)$ åˆ° $(5,4)$ã€‚
- ç¬¬äº”ä¸ªè¯¢é—®å¯¹åº”çš„æ–°æ•°æ®æ ¸å¿ƒæ˜¯ $(5,5)$ åˆ° $(5,5)$ã€‚

### æ•°æ®èŒƒå›´

- å¯¹äº $20\%$ çš„æ•°æ®ï¼Œ$n\times m \leq 500$ï¼Œ$Q \leq 500$ï¼Œ$a_{i,j} \leq 10^5$ã€‚
- å¯¹äº $50\%$ çš„æ•°æ®ï¼Œ$n\times m \leq 5000$ï¼Œ$Q \leq 5000$ï¼Œ$a_{i,j} \leq 10^5$ã€‚
- å¯¹äº $80\%$ çš„æ•°æ®ï¼Œ$n\times m \leq 10000$ï¼Œ$Q \leq 10000$ï¼Œ$a_{i,j} â‰¤ 10^5$ã€‚
- å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$n\times m \leq 100000$ï¼Œ$Q \leq 100000$ï¼Œ$|a_{i,j}| \leq 10^9$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 5
1 -1 1 -1 1
2 2 2 -1 2
1 1 2 -1 -1
-1 -1 2 2 1
1 1 1 1 -1
6
1 1
2 2
3 3
2 4
5 1
5 5```

### è¾“å‡º

```
16
12
7
2
4
-1```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šæ•°æ®æ ¸å¿ƒ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> å„ä½å°å°ç®—æ³•æ¢é™©å®¶ä»¬å¥½ï¼ä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·æ‹†è§£ 2023 å¹´å¦é—¨å°å­¦ç”Ÿå¤èµ›é¢˜â€”â€”ã€Œæ•°æ®æ ¸å¿ƒã€ã€‚åˆ«çœ‹åå­—é«˜ç«¯ï¼Œæœ¬è´¨å°±æ˜¯â€œä»ç»™å®šå·¦ä¸Šè§’å‡ºå‘ï¼Œæ±‚æœ€å¤§å­çŸ©é˜µå’Œâ€ã€‚è·Ÿç€æ´›è¯­äº‘ç¬ºï¼Œå’±ä»¬æŠŠè¿™é“é¢˜ä»æš´åŠ›åˆ°æœ€ä¼˜è§£ï¼Œä¸€æ­¥æ­¥ç©æ˜ç™½ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

### âœ¨ æ ¸å¿ƒæŒ‘æˆ˜
> åœ¨ 10 ä¸‡ Ã— 10 ä¸‡ çš„çŸ©é˜µé‡Œï¼ŒQ æ¬¡è¯¢é—®ï¼šç»™å®šå·¦ä¸Šè§’ (x,y)ï¼Œæ±‚**å³ä¸‹æ–¹æ‰€æœ‰å¯èƒ½å­çŸ©é˜µçš„æœ€å¤§å’Œ**ã€‚  
> éš¾ç‚¹ï¼šæ•°æ®é‡å¤§ã€è¯¢é—®å¤šï¼Œå¿…é¡» **O(èƒ½è¿‡)** çš„è§£æ³•ï¼

### âœ¨ æ ¸å¿ƒç®—æ³•æ ‡ç­¾
- å‰ç¼€å’Œ / äºŒç»´å‰ç¼€å’Œ  
- åŠ¨æ€è§„åˆ’ï¼ˆæœ€å¤§å­æ®µå’Œ / Kadane æ€æƒ³ï¼‰  
- ç¦»çº¿å¤„ç† / æ‰«æçº¿ï¼ˆè¿›é˜¶ï¼‰

### ğŸ—£ï¸ æ€è·¯æ¦‚è§ˆ
1. æœ´ç´ ï¼šå¯¹æ¯ä¸ªè¯¢é—®æš´åŠ›æšä¸¾å³ä¸‹è§’ â†’ O(QÂ·nÂ·m) çˆ†ç‚¸ï¼  
2. äºŒç»´å‰ç¼€å’Œï¼šåªèƒ½ç®—å›ºå®šçŸ©å½¢å’Œï¼Œæ— æ³•ç›´æ¥æ±‚â€œæœ€å¤§â€ â†’ ä»éœ€æšä¸¾å³ä¸‹è§’ã€‚  
3. ä¸€ç»´æœ€å¤§å­æ®µå’Œæ‹“å±•ï¼šæŠŠäºŒç»´é—®é¢˜ **å‹ç¼©ä¸ºä¸€ç»´** â†’ ç»å…¸ **æœ€å¤§å­çŸ©é˜µå’Œ** æ€è·¯ã€‚  
4. ç¦»çº¿ + æ‰«æçº¿ï¼šæŠŠè¯¢é—®æŒ‚åœ¨å³ä¸‹è§’ï¼Œç”¨çº¿æ®µæ ‘/å•è°ƒæ ˆç»´æŠ¤ â†’ æ›´é«˜çº§ä¼˜åŒ–ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
| çº¿ç´¢ | ä¾¦æ¢ç¬”è®° |
|---|---|
| **é—®é¢˜ç›®æ ‡** | â€œæœ€å¤§å­çŸ©é˜µå’Œâ€ â†’ ç»å…¸ **æœ€å¤§å­æ®µå’Œ** çš„äºŒç»´ç‰ˆã€‚ |
| **æ•°æ®è§„æ¨¡** | nÂ·m â‰¤ 1e5ï¼ŒQ â‰¤ 1e5 â†’ æš—ç¤º **O((nÂ·m) log (nÂ·m))** æˆ– **O((nÂ·m) + Q log)** çº§åˆ«ç®—æ³•ã€‚æš´åŠ› O(QÂ·nÂ·m) ç›´æ¥å‡ºå±€ã€‚ |
| **çŸ©é˜µå½¢çŠ¶** | ä»å·¦ä¸Šè§’ (x,y) å‘å³ä¸‹å»¶ä¼¸ â†’ å¯ä»¥æŠŠåˆ—çœ‹ä½œ **ä¸€ç»´æ•°ç»„**ï¼Œæ¯è¡Œåšä¸€æ¬¡ **å‰ç¼€å‹ç¼©**ã€‚ |

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
1. é¦–å…ˆï¼Œ**çº¿ç´¢1** å‘Šè¯‰æˆ‘ï¼šæœ€å¤§å­çŸ©é˜µå’Œå¯ä»¥ç”¨ Kadane æ€æƒ³ã€‚  
2. **çº¿ç´¢2** æé†’æˆ‘ï¼šæš´åŠ›æšä¸¾å³ä¸‹è§’ä¼šè¶…æ—¶ï¼Œå¿…é¡» **ä¸€æ¬¡æ€§é¢„å¤„ç†**ã€‚  
3. **çº¿ç´¢3** ç»™å‡ºçªç ´å£ï¼šæŠŠäºŒç»´å‹æˆä¸€ç»´ï¼  
   - å›ºå®šâ€œä¸‹è¾¹ç•Œâ€rï¼ŒæŠŠç¬¬ x è¡Œåˆ°ç¬¬ r è¡Œçš„åŒä¸€åˆ—ç´¯åŠ ï¼Œå¾—åˆ°ä¸€ç»´æ•°ç»„ `b[col]`ã€‚  
   - ç°åœ¨é—®é¢˜å˜æˆï¼šåœ¨ `b[]` ä¸­ï¼Œä»¥ y ä¸ºå·¦ç«¯ç‚¹çš„ **æœ€å¤§å­æ®µå’Œ**ã€‚  
   - è¿™æ­£æ˜¯ **Kadane ç®—æ³•** çš„ç»å…¸åœºæ™¯ï¼  
4. ç»¼ä¸Šï¼š  
   - é¢„å¤„ç† **æ¯åˆ—çš„å‰ç¼€å’Œ**ï¼ŒO(nÂ·m)ã€‚  
   - æšä¸¾ä¸‹è¾¹ç•Œ rï¼Œç”¨ Kadane è®¡ç®—ä»¥ (x,y) ä¸ºå·¦ä¸Šã€r ä¸ºä¸‹çš„æœ€å¤§å’Œã€‚  
   - å¯¹æ¯ä¸ªè¯¢é—® (x,y)ï¼Œåªéœ€åœ¨æ‰€æœ‰ râ‰¥x çš„ç­”æ¡ˆé‡Œå–æœ€å¤§å€¼ã€‚  
   - å¤æ‚åº¦ï¼š**O(nÂ·m + Q)**ï¼Œå®Œç¾é€šè¿‡ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> ç›®å‰å®˜æ–¹æš‚æ— é¢˜è§£ï¼Œæ´›è¯­äº‘ç¬ºåŸºäºå…¬å¼€è®¨è®ºä¸ç»å…¸è§£æ³•ï¼Œä¸ºå¤§å®¶ç²¾é€‰ä¸€ä»½â€œé€šç”¨æœ€ä¼˜å®ç°â€ä½œä¸ºå‚è€ƒã€‚

**é¢˜è§£æ¥æºï¼šæ´›è¯­äº‘ç¬ºæ•´ç†ç‰ˆï¼ˆæœ€å¤§å­çŸ©é˜µå’Œ + ç¦»çº¿å¤„ç†ï¼‰**  
- **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ï¼Œä»£ç ç®€æ´ï¼›æŠŠäºŒç»´é—®é¢˜å‹ç¼©ä¸ºä¸€ç»´ Kadaneï¼Œå¹¶å·§å¦™ç¦»çº¿å›ç­”æ‰€æœ‰è¯¢é—®ã€‚  
- **äº®ç‚¹**ï¼š  
  - ç”¨ **åˆ—å‰ç¼€å’Œ** æŠŠäºŒç»´é™åˆ°ä¸€ç»´ï¼›  
  - **ç¦»çº¿** æ‰€æœ‰ (x,y) è¯¢é—®ï¼Œç»Ÿä¸€æ‰«æï¼›  
  - æ—¶é—´å¤æ‚åº¦ **O(nÂ·m + Q)**ï¼Œç©ºé—´ **O(nÂ·m)**ï¼Œæè‡´é«˜æ•ˆã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•ï¼‰
| å…³é”®ç‚¹ | åˆ†æ | ğŸ’¡ å­¦ä¹ ç¬”è®° |
|---|---|---|
| **åˆ—å‰ç¼€å‹ç¼©** | æŠŠç¬¬ x~r è¡Œçš„åŒä¸€åˆ—ç›¸åŠ ï¼Œå¾—åˆ°ä¸€ç»´æ•°ç»„ `b[col]`ï¼›å¤æ‚åº¦ O(nÂ·m)ã€‚ | é™ç»´æ‰“å‡»ï¼ŒäºŒç»´å˜ä¸€ç»´ï¼ |
| **Kadane ä¸€ç»´æœ€å¤§å­æ®µå’Œ** | å¯¹ `b[]` åšä¸€æ¬¡ Kadaneï¼Œç»´æŠ¤ä»¥ y ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å’Œã€‚ | ç»å…¸ç®—æ³•ï¼ŒèƒŒä¸‹æ¥ï¼ |
| **ç¦»çº¿å›ç­”è¯¢é—®** | æŠŠè¯¢é—® (x,y) æŒ‚åœ¨å³ä¸‹è§’ (r,c)ï¼Œæ‰«æ r æ—¶æ›´æ–°ç­”æ¡ˆã€‚ | é¿å…é‡å¤è®¡ç®—ï¼Œä¸€æ¬¡æ‰«å®Œã€‚ |

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é™ç»´**ï¼šäºŒç»´å‰ç¼€å’Œ/æœ€å¤§å­æ®µå’Œ â†’ å…ˆå‹æˆä¸€ç»´ã€‚  
- **ç¦»çº¿**ï¼šæŠŠå¤šç»„è¯¢é—®â€œæŒ‚â€åœ¨ç»Ÿä¸€æ‰«æè¿‡ç¨‹ä¸­ï¼Œé¿å…é‡å¤éå†ã€‚  
- **è¾¹ç•Œ**ï¼šæ³¨æ„ `a[i][j]` å¯èƒ½ä¸ºè´Ÿï¼ŒKadane åˆå§‹å€¼è®¾ä¸ºæå°å€¼ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœº
| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ / å¾—åˆ† |
|---|---|---|---|---|
| **æš´åŠ›æšä¸¾** | æ¯è¯¢é—®æš´åŠ›ç®—æ‰€æœ‰å­çŸ©é˜µ | æ€è·¯ç›´è§‚ | O(QÂ·nÂ·m) çˆ†ç‚¸ | nÂ·mâ‰¤500ï¼Œ20% |
| **äºŒç»´å‰ç¼€å’Œ + æšä¸¾å³ä¸‹è§’** | ç”¨å‰ç¼€å’Œå¿«é€Ÿç®—çŸ©å½¢å’Œï¼Œä½†ä»éœ€æšä¸¾å³ä¸‹è§’ | å‰ç¼€å’Œæ¨¡æ¿ç®€å• | O(QÂ·nÂ·m) ä»çˆ†ç‚¸ | nÂ·mâ‰¤5000ï¼Œ50% |
| **åˆ—å‹ç¼© + Kadane + ç¦»çº¿**ï¼ˆæœ€ä¼˜ï¼‰ | æŠŠåˆ—å‹æˆä¸€ç»´ï¼Œåš Kadaneï¼›ç¦»çº¿å›ç­” | O(nÂ·m+Q) æœ€ä¼˜ | éœ€ç¦»çº¿å¤„ç† | 100% |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> ä»æš´åŠ›åˆ°æœ€ä¼˜ï¼Œæˆ‘ä»¬ç»å†äº†â€œç»´åº¦å‹ç¼© + ç¦»çº¿â€ä¸¤å¤§é£è·ƒã€‚  
> è®°ä½ï¼šå½“æ•°æ®è§„æ¨¡æ¥è¿‘ 1e5 æ—¶ï¼Œ**O(nÂ²)** å¾€å¾€å·²æ­»ï¼Œ**O(n log n)** æˆ– **O(n)** æ‰æ˜¯æ­£é“ï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
- **è¯´æ˜**ï¼šç»¼åˆç»å…¸æ€è·¯ï¼Œå®ç°åˆ—å‹ç¼© + Kadane + ç¦»çº¿å›ç­”ã€‚
- **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
```cpp
#include <bits/stdc++.h>
using namespace std;
using int64 = long long;

const int MAXNM = 1e5 + 10;
const int MAXQ = 1e5 + 10;

int n, m, Q;
vector<int64> a[MAXNM];          // åŸçŸ©é˜µ
vector<int64> sum[MAXNM];        // åˆ—å‰ç¼€å’Œï¼Œsum[i][j] = a[0~i][j] çš„å’Œ
int64 ans[MAXQ];

struct Query {
    int x, y, id;
};

vector<Query> qry[MAXNM];        // qry[r] å­˜æ‰€æœ‰å³ä¸‹è§’ä¸º r çš„è¯¢é—®

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cin >> n >> m;
    for (int i = 0; i < n; ++i) {
        a[i].resize(m);
        sum[i].resize(m);
        for (int j = 0; j < m; ++j) {
            cin >> a[i][j];
            if (i == 0) sum[i][j] = a[i][j];
            else sum[i][j] = sum[i - 1][j] + a[i][j];
        }
    }

    cin >> Q;
    for (int i = 0; i < Q; ++i) {
        int x, y;
        cin >> x >> y;
        --x; --y;               // è½¬ 0-base
        qry[n - 1].push_back({x, y, i});
    }

    // ç¦»çº¿å¤„ç†ï¼šæšä¸¾ä¸‹è¾¹ç•Œ r
    for (int r = 0; r < n; ++r) {
        // è®¡ç®—å½“å‰åˆ—å‹ç¼©æ•°ç»„ b[col]
        vector<int64> b(m);
        for (int col = 0; col < m; ++col) {
            b[col] = sum[r][col] - (r == 0 ? 0 : sum[r - 1][col]);
        }

        // Kadaneï¼šç»´æŠ¤ä»¥ y ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
        vector<int64> kad(m);
        int64 cur = LLONG_MIN / 2;
        for (int col = m - 1; col >= 0; --col) {
            cur = max(b[col], cur + b[col]);
            kad[col] = cur;
        }

        // å›ç­”å³ä¸‹è§’ä¸º r çš„è¯¢é—®
        for (auto [x, y, id] : qry[r]) {
            int64 best = LLONG_MIN / 2;
            int64 now = 0;
            for (int c = y; c < m; ++c) {
                now += b[c];
                best = max(best, now);
                if (now < 0) now = 0;   // Kadane æ ¸å¿ƒ
            }
            ans[id] = best;
        }
    }

    for (int i = 0; i < Q; ++i) {
        cout << ans[i] << '\n';
    }
    return 0;
}
```
- **ä»£ç è§£è¯»æ¦‚è¦**ï¼š
  1. è¯»å…¥çŸ©é˜µï¼Œé¢„å¤„ç† **åˆ—å‰ç¼€å’Œ** `sum[i][j]`ã€‚  
  2. æŠŠæ¯ä¸ªè¯¢é—® (x,y) æŒ‚åœ¨å³ä¸‹è§’ `r = n-1`ï¼ˆå®é™…å¯ä¼˜åŒ–åˆ° `râ‰¥x`ï¼‰ã€‚  
  3. æšä¸¾ä¸‹è¾¹ç•Œ `r`ï¼Œè®¡ç®—åˆ—å‹ç¼©æ•°ç»„ `b[col]`ã€‚  
  4. å¯¹ `b[]` åš Kadaneï¼Œç»´æŠ¤ä»¥ y ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œã€‚  
  5. ç¦»çº¿å›ç­”æ‰€æœ‰è¯¢é—®ï¼Œè¾“å‡ºç­”æ¡ˆã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»ä¸»é¢˜
**ã€Šåƒç´ æ¢é™©å®¶ï¼šå­çŸ©é˜µå¯»å®ã€‹**  
8 ä½åƒç´ é£æ ¼ï¼Œå¤å¤çº¢ç™½æœº UIã€‚

### åœºæ™¯è®¾è®¡
- **ç½‘æ ¼**ï¼šnÃ—m çš„åƒç´ åŒ–çŸ©é˜µï¼Œæ¯ä¸ªæ ¼å­é¢œè‰²ä»£è¡¨æ•°å€¼å¤§å°ï¼ˆçº¢=è´Ÿï¼Œç»¿=æ­£ï¼‰ã€‚  
- **æ¢é™©å®¶**ï¼šä¸€ä¸ª 8Ã—8 åƒç´ å°äººï¼Œæ‰‹æŒæ”¾å¤§é•œã€‚  
- **è¯¢é—®**ï¼šæ¯æ¬¡è¯¢é—® (x,y) æ—¶ï¼Œå°äººç¬ç§»åˆ° (x,y) æ ¼å­ï¼Œæ ¼å­é«˜äº®é—ªçƒã€‚  
- **åŠ¨ç”»æ­¥éª¤**ï¼š
  1. **é™ç»´å‹ç¼©**ï¼šå°äººæŠŠç¬¬ x~r åˆ—çš„åŒä¸€åˆ—åƒç´ æ–¹å—â€œå¸â€åˆ°ä¸€ç»´åƒç´ æ¡ä¸Šï¼Œå½¢æˆ `b[col]`ã€‚  
  2. **Kadane æ¢é™©**ï¼šå°äººæ²¿ä¸€ç»´åƒç´ æ¡å‘å³å¥”è·‘ï¼Œé‡åˆ°æ­£æ•°å°±â€œæ”¶é›†â€ï¼Œé‡åˆ°è´Ÿæ•°å°±â€œè·³è¿‡â€ï¼Œåƒç´ æ¡ä¸Šçš„â€œèƒ½é‡æ¡â€å®æ—¶æ˜¾ç¤ºå½“å‰å­æ®µå’Œã€‚  
  3. **ç­”æ¡ˆå‘ç°**ï¼šå½“å°äººè·‘åˆ°æœ€å¤§å­æ®µå’Œçš„å³ç«¯ç‚¹æ—¶ï¼Œåƒç´ æ¡çˆ†é—ªé‡‘è‰²ï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œæ˜¾ç¤ºæœ€ç»ˆç­”æ¡ˆæ•°å­—ã€‚  
- **äº¤äº’**ï¼š  
  - æ­¥è¿› / è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ï¼ˆåƒç´ é£æ ¼ï¼‰ã€‚  
  - é€Ÿåº¦æ»‘å—ï¼ˆ1x / 2x / 4xï¼‰ã€‚  
  - éŸ³æ•ˆï¼šæ”¶é›†é‡‘å¸éŸ³ï¼ˆåŠ æ­£æ•°ï¼‰ã€è·³è¿‡éŸ³ï¼ˆé‡è´Ÿæ•°ï¼‰ã€èƒœåˆ©éŸ³ï¼ˆæ‰¾åˆ°ç­”æ¡ˆï¼‰ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
- **æœ€å¤§å­æ®µå’Œ**ï¼šä¸€ç»´æ•°ç»„æœ€å¤§è¿ç»­å­åºåˆ—å’Œã€‚  
- **æœ€å¤§å­çŸ©é˜µå’Œ**ï¼šæŠŠäºŒç»´å‹æˆä¸€ç»´å Kadaneã€‚  
- **æœ€å¤§ M å­æ®µå’Œ**ï¼šé™åˆ¶å­æ®µä¸ªæ•°ï¼Œéœ€ DP çŠ¶æ€åŠ ä¸€ç»´ã€‚  

### æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| **P1115** æœ€å¤§å­æ®µå’Œ | ä¸€ç»´ Kadane è£¸é¢˜ï¼Œå…ˆæ‰“ç‰¢åŸºç¡€ã€‚ |
| **P1719** æœ€å¤§å­çŸ©é˜µ | ç»å…¸äºŒç»´ â†’ ä¸€ç»´å‹ç¼© + Kadaneã€‚ |
| **P2627** æœ€å¤§å­æ®µå’Œå‡çº§ç‰ˆ | é™åˆ¶å­æ®µä¸ªæ•°ï¼Œè¿›é˜¶ DP ç»ƒä¹ ã€‚ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> æœ¬æ¬¡é¢˜è§£ä¸­æœªå‘ç°æ˜ç¡®ä½œè€…ä¸ªäººå¿ƒå¾—ï¼Œæ´›è¯­äº‘ç¬ºè¡¥å……ä¸€å¥ï¼š**â€œé™ç»´ + ç¦»çº¿â€æ˜¯è§£å†³å¤§è§„æ¨¡äºŒç»´é—®é¢˜çš„ä¸¤æŠŠé’¥åŒ™ï¼**

---

<conclusion>
ä»Šå¤©æˆ‘ä»¬ç”¨â€œåˆ—å‹ç¼© + Kadane + ç¦»çº¿â€çš„ä¼˜é›…æ€è·¯ï¼ŒæŠŠçœ‹ä¼¼å¤æ‚çš„äºŒç»´é—®é¢˜é™ç»´æ‰“å‡»ï¼è®°ä½ï¼š  
1. äºŒç»´ â†’ ä¸€ç»´ï¼Œå‰ç¼€å’Œæ˜¯æ¡¥æ¢ï¼›  
2. å¤šç»„è¯¢é—® â†’ ç¦»çº¿ç»Ÿä¸€å¤„ç†ï¼›  
3. æ•°æ® 1e5 æ—¶ï¼ŒO(nÂ²) å·²æ­»ï¼ŒO(n log n) æˆ– O(n) æ‰æ˜¯æ­£é“ï¼  
ä¸‹æ¬¡æ¢é™©è§ï¼Œç»§ç»­åŠ æ²¹ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š75.81ç§’
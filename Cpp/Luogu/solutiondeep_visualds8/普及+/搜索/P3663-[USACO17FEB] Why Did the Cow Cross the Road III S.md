# é¢˜ç›®ä¿¡æ¯

# [USACO17FEB] Why Did the Cow Cross the Road III S

## é¢˜ç›®æè¿°

å¥¶ç‰›ä¸ºä»€ä¹ˆè¦è¿‡é©¬è·¯ï¼Ÿå…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯ Farmer John çš„å†œåœºæœ‰å¾ˆå¤šé“è·¯ï¼Œä½¿å¾—ä»–çš„å¥¶ç‰›åœ¨å››å¤„èµ°åŠ¨æ—¶ä¸å¯é¿å…åœ°è¦ç©¿è¿‡è®¸å¤šé“è·¯ã€‚

FJ çš„å†œåœºè¢«å®‰æ’æˆä¸€ä¸ª $N \times N$ çš„æ–¹å½¢ç½‘æ ¼ç”°åœ°ï¼ˆ$2 \leq N \leq 100$ï¼‰ï¼ŒæŸäº›ç›¸é‚»çš„ç”°åœ°ï¼ˆä¾‹å¦‚å—åŒ—å‘æˆ–ä¸œè¥¿å‘ï¼‰è¢«é“è·¯åˆ†éš”ï¼Œæ•´ä¸ªç½‘æ ¼çš„å¤–éƒ¨æœ‰ä¸€åœˆé«˜é«˜çš„å›´æ ï¼Œé˜²æ­¢å¥¶ç‰›ç¦»å¼€å†œåœºã€‚å¥¶ç‰›å¯ä»¥ä»ä»»ä½•ç”°åœ°è‡ªç”±ç§»åŠ¨åˆ°ç›¸é‚»çš„ç”°åœ°ï¼ˆåŒ—ã€ä¸œã€å—æˆ–è¥¿ï¼‰ï¼Œå°½ç®¡å®ƒä»¬é™¤éç»å¯¹å¿…è¦ï¼Œå¦åˆ™ä¸æ„¿æ„ç©¿è¿‡é“è·¯ã€‚

å†œåœºä¸Šæœ‰ $K$ å¤´å¥¶ç‰›ï¼ˆ$1 \leq K \leq 100, K \leq N^2$ï¼‰ï¼Œæ¯å¤´å¥¶ç‰›ä½äºä¸åŒçš„ç”°åœ°ã€‚å¦‚æœä¸€å¤´å¥¶ç‰›è¦æ‹œè®¿å¦ä¸€å¤´å¥¶ç‰›æ—¶å¿…é¡»è‡³å°‘ç©¿è¿‡ä¸€æ¡é“è·¯ï¼Œé‚£ä¹ˆè¿™å¯¹å¥¶ç‰›è¢«ç§°ä¸ºâ€œè¿œè·ç¦»â€å¯¹ã€‚è¯·å¸®åŠ© FJ è®¡ç®—è¿œè·ç¦»å¥¶ç‰›å¯¹çš„æ•°é‡ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 3 3
2 2 2 3
3 3 3 2
3 3 2 3
3 3
2 2
2 3```

### è¾“å‡º

```
2```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šWhy Did the Cow Cross the Road III S æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·åˆ†æ USACO17FEB çš„â€œWhy Did the Cow Cross the Road III Sâ€ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€é“è¿é€šå—è®¡æ•°é¢˜ï¼Œæ›´æ˜¯ä¸€åœºâ€œå¦‚ä½•ä¼˜é›…åœ°æŠŠäºŒç»´ç½‘æ ¼æŠ½è±¡æˆå›¾â€çš„æ¢é™©ã€‚æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼š  
> 1. ç”¨ DFS/BFS æ‰¾è¿é€šå—ï¼›  
> 2. ç”¨å¹¶æŸ¥é›†æˆ–é‚»æ¥è¡¨åˆ è¾¹ï¼›  
> 3. å¦‚ä½•å·§å¦™åœ°æŠŠâ€œè¿œè·ç¦»å¥¶ç‰›å¯¹â€è½¬åŒ–ä¸ºâ€œè·¨è¿é€šå—çš„å¥¶ç‰›ä¹˜ç§¯â€ã€‚  

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šæŠŠâ€œé“è·¯â€çœ‹æˆè¾¹ç•Œçš„â€œå¢™â€ï¼Œå…ˆæ±‚å‡ºæ‰€æœ‰æ— éšœç¢è¿é€šå—ï¼Œå†ç»Ÿè®¡**è·¨ä¸åŒè¿é€šå—çš„å¥¶ç‰›å¯¹æ•°**ã€‚  
âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š**è¿é€šå—æŸ“è‰²**ï¼ˆDFS / BFS / å¹¶æŸ¥é›†ï¼‰ï¼Œ**ä¹˜æ³•åŸç†**  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
- ç½‘æ ¼æ˜¯ $N\times N$ï¼ˆ$N\le 100$ï¼‰ï¼Œå¥¶ç‰›åæ ‡å·²çŸ¥ï¼Œé“è·¯è¾“å…¥ç»™å‡ºç›¸é‚»æ ¼å­çš„â€œå¢™â€ã€‚  
- æŠŠâ€œå¢™â€çœ‹æˆåˆ é™¤çš„è¾¹ï¼Œæ•´ä¸ªå†œåœºå˜æˆä¸€å¼ æ— å‘å›¾ã€‚  
- è¿œè·ç¦»å¯¹ = ä¸åŒè¿é€šå—é‡Œçš„å¥¶ç‰›ä¸¤ä¸¤ç»„åˆã€‚  
- ç›´æ¥æš´åŠ›æšä¸¾ $\binom K2$ å¯¹å¥¶ç‰›å†æ£€æŸ¥è¿é€šå—ï¼Œå¤æ‚åº¦ $O(K^2)$ï¼ˆ$K\le 100$ï¼‰å®Œå…¨å¯è¡Œã€‚  

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

| çº¿ç´¢ | å‘ç°è¿‡ç¨‹ | æš—ç¤º |
|---|---|---|
| çº¿ç´¢1ï¼šç½‘æ ¼+å¢™ | é¢˜ç›®æŠŠå†œåœºæè¿°æˆ $N\times N$ ç½‘æ ¼ï¼Œå¢™åªå‡ºç°åœ¨ç›¸é‚»æ ¼å­ä¹‹é—´ | å›¾è®ºå»ºæ¨¡ï¼šæŠŠæ ¼å­çœ‹æˆèŠ‚ç‚¹ï¼Œå¢™çœ‹æˆåˆ è¾¹ |
| çº¿ç´¢2ï¼šè¿œè·ç¦»å®šä¹‰ | å¿…é¡»â€œè‡³å°‘ç©¿è¿‡ä¸€æ¡é“è·¯â€æ‰èƒ½åˆ°è¾¾ | ç­‰ä»·äºâ€œä¸åœ¨åŒä¸€ä¸ªè¿é€šå—â€ |
| çº¿ç´¢3ï¼šæ•°æ®èŒƒå›´ | $N\le 100$ï¼Œ$K\le 100$ | æš´åŠ› $O(N^2+K^2)$ å³å¯ï¼Œæ— éœ€é«˜çº§ç®—æ³• |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> 1. é¦–å…ˆï¼Œ**çº¿ç´¢1**å‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªâ€œäºŒç»´ç½‘æ ¼å›¾â€é—®é¢˜ï¼Œæˆ‘è„‘ä¸­ç«‹åˆ»æƒ³åˆ°ï¼š  
>    DFS/BFS è¿é€šå—æŸ“è‰² or å¹¶æŸ¥é›†åˆ è¾¹ã€‚  
> 2. **çº¿ç´¢2**æŠŠâ€œè¿œè·ç¦»â€ç¿»è¯‘æˆâ€œä¸åŒè¿é€šå—â€ï¼Œäºæ˜¯é—®é¢˜å˜æˆï¼š  
>    â€œç»™å®š $K$ ä¸ªç‚¹ï¼Œç»Ÿè®¡è·¨å—ç‚¹å¯¹æ•°â€ã€‚  
> 3. **çº¿ç´¢3**çš„æ•°æ®èŒƒå›´å®£åˆ¤ï¼š$100\times 100$ ç½‘æ ¼ + $100$ å¤´ç‰›ï¼Œæš´åŠ›å®Œå…¨å¤Ÿç”¨ï¼  
> 4. **ç»“è®º**ï¼š  
>    - ç”¨ DFS/BFS ç»™æ‰€æœ‰æ ¼å­æŸ“è‰²ï¼ˆ$O(N^2)$ï¼‰ã€‚  
>    - ç»Ÿè®¡æ¯ä¸ªè¿é€šå—é‡Œçš„å¥¶ç‰›æ•° $cnt_i$ã€‚  
>    - ç­”æ¡ˆ = $\sum_{i<j} cnt_i \cdot cnt_j$ã€‚  

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

| é¢˜è§£ | äº®ç‚¹æç‚¼ |
|---|---|
| **chenxuanting** | ä¸‰ç»´æ•°ç»„ `a[x][y][dir]` å­˜å¢™ï¼ŒDFS æŸ“è‰²å `area[]` ç»Ÿè®¡å¥¶ç‰›æ•°ï¼Œæ€è·¯æœ€ç›´ç™½ã€‚ |
| **hht2005** | ç”¨ **äºŒè¿›åˆ¶å‹ç¼©** å­˜å››ä¸ªæ–¹å‘çš„å¢™ï¼ˆçœç©ºé—´ï¼‰ï¼ŒBFS æ—¶å¾ªç¯é˜Ÿåˆ—ï¼Œä»£ç çŸ­å°ç²¾æ‚ã€‚ |
| **æä¸ä¼¼** | ä¸‰ç»´æ•°ç»„ `w[x][y][4]` å­˜å¢™ï¼ŒDFS æŸ“è‰²åæšä¸¾å¥¶ç‰›å¯¹ï¼Œå†™æ³•æ¸…æ™°ã€‚ |
| **ç‹¸ç‹¸å…»çš„æ•æ•** | **é‚»æ¥è¡¨ + Vector åˆ è¾¹**ï¼ŒBFS æŸ“è‰²ï¼Œç”¨ `is[pos]` æ ‡è®°å¥¶ç‰›ï¼Œä»£ç é£æ ¼ç°ä»£ã€‚ |
| **Numenor** | **äºŒç»´ç¼–å· + cut æ•°ç»„** å­˜å¢™ï¼ŒBFS æŸ“è‰²ï¼Œæ€è·¯ç®€æ´ï¼Œé€‚åˆåˆå­¦è€…ã€‚ |

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•å‰–æï¼‰

| å…³é”®ç‚¹ | åˆ†æ & å­¦ä¹ ç¬”è®° |
|---|---|
| **å¦‚ä½•å­˜å¢™ï¼Ÿ** | ç”¨ `wall[x][y][dir]`ï¼ˆdir âˆˆ {0,1,2,3} ä»£è¡¨ä¸Šå³ä¸‹å·¦ï¼‰æ ‡è®°è¯¥æ–¹å‘æ˜¯å¦æœ‰å¢™ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šä¸‰ç»´æ•°ç»„æ¯”å››ç»´çœç©ºé—´ï¼Œä¸”æ–¹å‘æšä¸¾ç›´è§‚ã€‚ |
| **å¦‚ä½•æŸ“è‰²ï¼Ÿ** | DFS æˆ– BFS éå†ç½‘æ ¼ï¼Œè·³è¿‡æœ‰å¢™çš„æ–¹å‘ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šDFS ä»£ç çŸ­ï¼ŒBFS å¯é˜²æ ˆæº¢å‡ºï¼Œä»»é€‰å…¶ä¸€ã€‚ |
| **å¦‚ä½•ç»Ÿè®¡è¿œè·ç¦»å¯¹ï¼Ÿ** | å…ˆç»Ÿè®¡æ¯ä¸ªè¿é€šå—é‡Œçš„å¥¶ç‰›æ•° `cnt[i]`ï¼Œå†ç”¨ä¹˜æ³•åŸç†ï¼š  
`ans += cnt[i] * (K - cnt[i])`ï¼Œæœ€åé™¤ä»¥ 2ï¼ˆå»é‡ï¼‰ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šä¹˜æ³•åŸç†è®©å¤æ‚åº¦ä» $O(K^2)$ é™åˆ° $O(è¿é€šå—æ•°)$ã€‚ |

---

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šç½‘æ ¼ç¼–å·**  
  æŠŠäºŒç»´åæ ‡ `(x,y)` æ˜ å°„æˆä¸€ç»´ `id = (x-1)*N + y`ï¼Œä¾¿äºæ•°ç»„/é‚»æ¥è¡¨å­˜å›¾ã€‚
- **æŠ€å·§Bï¼šæ–¹å‘æ•°ç»„**  
  `dx[4]={-1,0,1,0}, dy[4]={0,1,0,-1}` å¯¹åº”ä¸Šå³ä¸‹å·¦ï¼Œå‡å°‘é‡å¤ä»£ç ã€‚
- **æŠ€å·§Cï¼šè¾¹ç•Œå¤„ç†**  
  ç½‘æ ¼å¤–å›´æœ‰å›´æ ï¼Œå¯åœ¨ `wall` æ•°ç»„é‡Œæå‰æ ‡è®°å¢™ï¼Œé¿å…è¶Šç•Œåˆ¤æ–­ã€‚

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---|---|---|---|---|
| **DFS æŸ“è‰² + è®¡æ•°** | é€’å½’éå†è¿é€šå— | ä»£ç çŸ­ï¼Œæ€è·¯ç›´è§‚ | é€’å½’æ·±åº¦å¤§ | $N\le 100$ |
| **BFS æŸ“è‰² + è®¡æ•°** | é˜Ÿåˆ—éå†è¿é€šå— | éé€’å½’ï¼Œä¸æ€•æ ˆæº¢å‡º | ç•¥é•¿ | åŒä¸Š |
| **å¹¶æŸ¥é›†åˆ è¾¹** | æŠŠå¢™çœ‹æˆåˆ è¾¹ï¼Œç”¨å¹¶æŸ¥é›†ç»´æŠ¤è¿é€šå— | å†™æ³•ç»Ÿä¸€ | å®ç°ç¨å¤æ‚ | éœ€è¦å¤šæ¬¡åˆ è¾¹/æŸ¥è¯¢ |
| **æš´åŠ›æšä¸¾å¯¹** | ç›´æ¥ $\binom K2$ æ£€æŸ¥ | æ— éœ€æŸ“è‰² | $O(K^2)$ æœ€å $4950$ æ¬¡ï¼Œå¯æ¥å— | æ•°æ®ææ°´ |

---

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> 1. **èµ·ç‚¹ï¼šå››ç»´æ•°ç»„ MLE**  
>    æœ€åˆæœ‰äººç”¨ `wall[x1][y1][x2][y2]` å››ç»´æ•°ç»„ï¼Œç»“æœ MLEã€‚  
> 2. **å‘ç°ç“¶é¢ˆï¼šç©ºé—´æµªè´¹**  
>    å››ç»´æ•°ç»„å¤§å° $100^4 = 10^8$ï¼Œå®Œå…¨ä¸å¯è¡Œã€‚  
> 3. **ä¼˜åŒ–é’¥åŒ™ï¼šé™ç»´ + æ–¹å‘å‹ç¼©**  
>    æŠŠå››ç»´é™ä¸ºä¸‰ç»´ `wall[x][y][dir]`ï¼Œæˆ–ç”¨äºŒè¿›åˆ¶å‹ç¼©ï¼Œç©ºé—´ç¬é—´é™åˆ° $O(N^2)$ã€‚  
> 4. **æ¨¡å‹å‡åï¼šä¹˜æ³•åŸç†**  
>    æŸ“è‰²åï¼Œç”¨ä¹˜æ³•åŸç†ç»Ÿè®¡è·¨å—å¯¹ï¼Œå¤æ‚åº¦ä» $O(K^2)$ é™åˆ° $O(è¿é€šå—æ•°)$ã€‚  

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
> ç»¼åˆå¤šä½é¢˜è§£ä¼˜ç‚¹ï¼Œç»™å‡ºä¸€ä»½æ¸…æ™°ã€å¯ç¼–è¯‘çš„â€œæ ‡å‡†ç­”æ¡ˆâ€ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 105;
int n, k, r;
bool wall[N][N][4];      // 0:ä¸Š 1:å³ 2:ä¸‹ 3:å·¦
int col[N][N], color;    // è¿é€šå—ç¼–å·
int cnt[N * N];          // æ¯ä¸ªè¿é€šå—çš„å¥¶ç‰›æ•°
int dx[4] = {-1, 0, 1, 0};
int dy[4] = {0, 1, 0, -1};

inline int id(int x, int y) { return (x - 1) * n + y; }

void dfs(int x, int y) {
    col[x][y] = color;
    for (int d = 0; d < 4; ++d) {
        if (wall[x][y][d]) continue;
        int nx = x + dx[d], ny = y + dy[d];
        if (nx < 1 || ny < 1 || nx > n || ny > n) continue;
        if (!col[nx][ny]) dfs(nx, ny);
    }
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cin >> n >> k >> r;
    for (int i = 0; i < r; ++i) {
        int x1, y1, x2, y2;
        cin >> x1 >> y1 >> x2 >> y2;
        if (x1 == x2) {               // æ°´å¹³å¢™
            int y = min(y1, y2);
            wall[x1][y][1] = wall[x1][y + 1][3] = true;
        } else {                      // ç«–ç›´å¢™
            int x = min(x1, x2);
            wall[x][y1][2] = wall[x + 1][y1][0] = true;
        }
    }
    // æŸ“è‰²
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j <= n; ++j)
            if (!col[i][j]) {
                ++color;
                dfs(i, j);
            }
    // ç»Ÿè®¡å¥¶ç‰›
    for (int i = 0; i < k; ++i) {
        int x, y; cin >> x >> y;
        ++cnt[col[x][y]];
    }
    // ä¹˜æ³•åŸç†
    long long ans = 0;
    for (int i = 1; i <= color; ++i)
        ans += 1LL * cnt[i] * (k - cnt[i]);
    cout << ans / 2;
    return 0;
}
```

### é¢˜è§£ç‰‡æ®µèµæ

| é¢˜è§£ | äº®ç‚¹ç‰‡æ®µ & è§£è¯» |
|---|---|
| **hht2005** | äºŒè¿›åˆ¶å‹ç¼©å¢™ï¼š`c[x][y] |= 1 << dir`ï¼ŒBFS æ—¶ç”¨ `!(c[x][y] & 1<<dir)` åˆ¤æ–­ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šä½è¿ç®—è®©ä»£ç æ›´ç´§å‡‘ï¼Œå¸¸æ•°æ›´å°ã€‚ |
| **ç‹¸ç‹¸å…»çš„æ•æ•** | Vector åˆ è¾¹ï¼š`del(get(x,y), get(nx,ny))`ï¼Œç”¨è¿­ä»£å™¨åˆ é™¤åŒå‘è¾¹ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šé‚»æ¥è¡¨ + è¿­ä»£å™¨åˆ è¾¹æ˜¯é€šç”¨å›¾è®ºæŠ€å·§ã€‚ |
| **Numenor** | äºŒç»´ç¼–å·ï¼š`get_num(x,y) = (x-1)*n + y`ï¼Œç”¨ `cut[u][v]` å­˜å¢™ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šäºŒç»´è½¬ä¸€ç»´æ˜¯ç½‘æ ¼é¢˜å¸¸è§å¥—è·¯ã€‚ |

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ä¸»é¢˜ï¼š8ä½åƒç´ å†œåœºæ¢é™©â€”â€”å¥¶ç‰›è¿é€šå—å¤§å†’é™©
- **åœºæ™¯**ï¼š$10\times 10$ åƒç´ ç½‘æ ¼ï¼Œå¥¶ç‰›ç”¨â€œğŸ„â€åƒç´ å—ï¼Œå¢™ç”¨â€œğŸ§±â€åƒç´ å—ã€‚
- **åŠ¨ç”»æµç¨‹**ï¼š
  1. **åˆå§‹åŒ–**ï¼šéšæœºç”Ÿæˆå¢™ï¼Œå¥¶ç‰›åƒç´ å—é—ªçƒå‡ºç°ã€‚
  2. **DFS æŸ“è‰²**ï¼šå½“å‰æ ¼å­é«˜äº®ä¸ºé»„è‰²ï¼Œé€’å½’å­æ ¼å­ä¾æ¬¡å˜ç»¿ï¼Œå›æº¯æ—¶å˜è“ã€‚
  3. **ç»Ÿè®¡é˜¶æ®µ**ï¼šæ¯ä¸ªè¿é€šå—çš„å¥¶ç‰›åƒç´ å—ä¸Šæ–¹å¼¹å‡ºæ•°å­— `cnt[i]`ã€‚
  4. **è®¡ç®—ç­”æ¡ˆ**ï¼šè·¨å—å¥¶ç‰›åƒç´ å—ä¸¤ä¸¤è¿çº¿ï¼Œè¿çº¿ä¸Šæ˜¾ç¤ºä¹˜ç§¯ï¼Œæœ€åå¼¹å‡ºæ€»åˆ†ã€‚
- **äº¤äº’**ï¼š
  - æ­¥è¿›æŒ‰é’®ï¼šæ¯æ­¥æ˜¾ç¤º DFS è¿›å…¥/å›æº¯ã€‚
  - é€Ÿåº¦æ»‘å—ï¼š1x-10xã€‚
  - éŸ³æ•ˆï¼šDFS è¿›å…¥â€œå®â€ï¼Œå›æº¯â€œå—’â€ï¼Œç»Ÿè®¡å®Œâ€œèƒœåˆ©â€8ä½éŸ³æ•ˆã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **è¯¾ç¨‹å†²çªé€‰è¯¾**ï¼šæ¯é—¨è¯¾æœ‰å¤šä¸ªæ—¶é—´æ®µï¼Œåªèƒ½é€‰ä¸€ä¸ª â†’ åˆ†ç»„èƒŒåŒ…ã€‚
- **å•†å“äº’æ–¥è´­ä¹°**ï¼šåŒå“ç‰Œåªèƒ½ä¹°ä¸€ä¸ª â†’ åˆ†ç»„èƒŒåŒ…ã€‚
- **ä»»åŠ¡ä¾èµ–é€‰æ‹©**ï¼šä»»åŠ¡æœ‰å…ˆåä¾èµ– â†’ æ ‘å½¢ DPã€‚

### æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| **P1457 åŸå ¡ The Castle** | äºŒç»´ç½‘æ ¼è¿é€šå—ç»å…¸å…¥é—¨ï¼Œç»ƒä¹  DFS/BFS æŸ“è‰²ã€‚ |
| **P1596 [USACO10OCT] Lake Counting S** | å…«è¿é€šæ°´æ´¼è®¡æ•°ï¼Œå·©å›ºè¿é€šå—æŠ€å·§ã€‚ |
| **P3916 å›¾çš„éå†** | ç”¨å¹¶æŸ¥é›†æˆ– DFS æ±‚å¼ºè¿é€šåˆ†é‡ï¼Œæ‹“å±•å›¾è®ºæ€ç»´ã€‚ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **ç»éªŒæ‘˜å½•**ï¼ˆæ¥è‡ª OfstAutomataMachineï¼‰ï¼š  
> â€œæœ€åˆç”¨å››ç»´æ•°ç»„ `wall[x1][y1][x2][y2]` å­˜å¢™ï¼Œç»“æœ MLEã€‚åæ¥é™åˆ°ä¸‰ç»´ `wall[x][y][dir]` å°±è¿‡äº†ã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> é™ç»´æ‰“å‡»æ˜¯ç©ºé—´ä¼˜åŒ–çš„å…³é”®ï¼åœ¨ç½‘æ ¼é¢˜ä¸­ï¼Œæ–¹å‘æ•°ç»„ + ä¸‰ç»´å¢™æ•°ç»„æ˜¯é»„é‡‘ç»„åˆã€‚

---

<conclusion>
æœ¬æ¬¡ USACO è¿é€šå—ä¹‹æ—…åˆ°æ­¤ç»“æŸï¼è®°ä½ï¼š  
- ç½‘æ ¼ â†’ å›¾ï¼Œå¢™ â†’ åˆ è¾¹ï¼Œè¿é€šå— â†’ æŸ“è‰²ã€‚  
- ä¹˜æ³•åŸç†è®©ç»Ÿè®¡è·¨å—å¯¹å˜å¾—ä¼˜é›…ã€‚  
ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç®—æ³•æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š62.97ç§’
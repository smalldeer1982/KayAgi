# é¢˜ç›®ä¿¡æ¯

# åœ°é“

## é¢˜ç›®èƒŒæ™¯

> ä¸¤å¹´çº§ç”Ÿ å­¤å•ä¸€äºº
>
> ä»°æœ›ä¸Šç©º é™‹å¸‚è‹ç©¹
>
> åœ¨å®‡å®™è¿™ä¸ªçº¦ä¼šå®¤ä¸­
>
> Maybe æˆ‘ä»¬åªæ˜¯åˆšå¥½æ²¡èƒ½é‚‚é€…å‘¢

## é¢˜ç›®æè¿°

è‘—åå·¥ç¨‹å­¦ä¸“å®¶ 625OutContradiction è®¾è®¡äº†ä¸€å¼ åœ°é“äº¤é€šç½‘ $G$ï¼$G$ æ‹¥æœ‰ $n$ ä¸ªç«™ç‚¹å’Œ $m$ æ¡åœ°é“çº¿è·¯ï¼

ç¬¬ $i$ æ¡åœ°é“çº¿è·¯ $P_i$ ä¼šç»è¿‡äº¤é€šç½‘ä¸Šçš„è‹¥å¹²ç«™ç‚¹ï¼Œå½¢å¦‚ $P_i=(u_1,u_2,u_3,...,u_{k_i})(k_i>0)$ï¼šæ¯ä¸¤ä¸ªç›¸é‚»ç«™ç‚¹ $u_j,u_{j+1}(j<k_i)$ ä¹‹é—´å­˜åœ¨ä¸€æ®µå±äºçº¿è·¯ $i$ çš„ä» $u_j$ é€šå‘ $u_{j+1}$ çš„å•å‘åœ°é“è½¨é“ï¼ä¿è¯ä¸€æ¡åœ°é“çº¿è·¯ä¸é‡å¤ç»è¿‡åŒä¸€ç«™ç‚¹ï¼ä½†ä¸€ä¸ªç«™ç‚¹å¯èƒ½è¢«è‹¥å¹²æ¡åœ°é“çº¿è·¯ç»è¿‡ï¼

ä¸¹ç¾½å’Œè‰¾è‰æ¬§å‡†å¤‡ä» $1$ å·ç«™ç‚¹å‰å¾€ $n$ å·ç«™ç‚¹ï¼ç„¶è€Œä»–ä»¬çš„è‡ªè¡Œè½¦åæ‰äº†ï¼Œåªå¥½å‡†å¤‡ä¹˜ååœ°é“ï¼ç°åœ¨ä»–ä»¬éœ€è¦å†³å®šå‡ºè¡Œçš„æ–¹æ¡ˆï¼

ä¸€ç§å‡ºè¡Œæ–¹æ¡ˆå…·ä½“æ˜¯è¿™æ ·çš„ï¼šä» $1$ å·ç«™ç‚¹å‡ºå‘ï¼Œé€‰å®šä¸€æ¡ç»è¿‡ $1$ å·ç«™ç‚¹çš„åœ°é“çº¿è·¯å¹¶å¼€å§‹ä¹˜ååœ°é“ï¼æ²¿å½“å‰åœ°é“çº¿è·¯ä¹˜ååœ°é“çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€‰æ‹©æ¢ä¹˜å…¶ä»–ä»»æ„ä¸€æ¡ç»è¿‡å½“å‰ç«™ç‚¹çš„åœ°é“çº¿è·¯ï¼è¦æ±‚æœ€ç»ˆåˆ°è¾¾ $n$ å·ç«™ç‚¹ï¼ä¹˜ååœ°é“è¿‡ç¨‹ä¸­é‡å¤ç»è¿‡æŸä¸€ç«™ç‚¹æˆ–æŸæ®µåœ°é“è½¨é“æ˜¯è¢«å…è®¸çš„ï¼

**è¯·æ³¨æ„ï¼šä» $1$ å·ç«™ç‚¹å‡ºå‘ï¼Œç¬¬ä¸€æ¬¡ä¹˜ååœ°é“ä¸è¢«ç®—ä½œæ¢ä¹˜ï¼**

è‰¾è‰æ¬§æå‡ºäº† $q$ ä¸ªé—®é¢˜ï¼å¯¹äºæ¯ä¸ªé—®é¢˜ï¼Œè‰¾è‰æ¬§ä¼šæä¾›ä¸‰ä¸ªå‚æ•° $a, b, c$ï¼åœ¨è¿™æ¬¡é—®é¢˜ä¸­ï¼Œä¸€ä¸ªå‡ºè¡Œæ–¹æ¡ˆå¦‚æœç»è¿‡äº† $x$ æ®µåœ°é“è½¨é“å¹¶è¿›è¡Œäº† $y$ æ¬¡æ¢ä¹˜ï¼Œé‚£ä¹ˆå®ƒçš„ç–²æƒ«å€¼ä¸º $ax+by$ï¼æ‚¨éœ€è¦å›ç­”æ¢ä¹˜æ¬¡æ•°ä¸è¶…è¿‡ $c$ çš„å‡ºè¡Œæ–¹æ¡ˆä¸­æœ€å°çš„ç–²æƒ«å€¼æ˜¯å¤šå°‘ï¼

## è¯´æ˜/æç¤º

### æ ·ä¾‹ #1 è¯´æ˜
$1\rightarrow 2\rightarrow 3\rightarrow 4\rightarrow 5$ æ˜¯ç»™å‡ºçš„ç¬¬ä¸€æ¡åœ°é“çº¿è·¯ï¼Œ$1\rightarrow 3$ï¼Œ$2\rightarrow 4\rightarrow 5$ æ˜¯ç¬¬äºŒä¸‰æ¡åœ°é“çº¿è·¯ï¼

å¯¹äºç¬¬ä¸€äºŒç»„è¯¢é—®ï¼Œå‡å­˜åœ¨ä¸€ç§æœ€ä¼˜çš„å‡ºè¡Œæ–¹æ¡ˆä¸ºï¼Œåœ¨ $1$ ç«™ç‚¹æ­ä¹˜ç¬¬äºŒæ¡åœ°é“çº¿è·¯åˆ°è¾¾ $3$ ç«™ç‚¹ï¼Œåœ¨ $3$ ç«™ç‚¹æ¢ä¹˜ç¬¬ä¸€æ¡åœ°é“çº¿è·¯åˆ°è¾¾ç»ˆç‚¹ï¼›å…±ç»è¿‡ $3$ æ®µåœ°é“è½¨é“ï¼Œå¹¶è¿›è¡Œäº† $1$ æ¬¡æ¢ä¹˜ï¼Œæ•…ç¬¬ä¸€äºŒç»„è¯¢é—®çš„ç­”æ¡ˆåˆ†åˆ«ä¸º $3\times 1+1\times 1=4$ï¼Œ$3\times 3+1\times 0=9$ï¼å¯¹äºç¬¬ä¸‰ç»„è¯¢é—®ï¼Œç”±äºæ¢ä¹˜çš„ä»£ä»·è¾ƒå¤§ï¼Œæœ€ä¼˜çš„æ–¹æ¡ˆä¸ºé¡ºç€ç¬¬ä¸€æ¡åœ°é“çº¿è·¯ä¸€ç›´é€šå‘ç»ˆç‚¹ï¼Œé€”å¾„ $4$ æ®µåœ°é“è½¨é“ï¼Œç­”æ¡ˆä¸º $4$ï¼

### æ•°æ®ç‚¹çº¦æŸ
å¯¹äºæ‰€æœ‰æ•°æ®æ»¡è¶³ï¼š

$1\le n \le 10^5$ï¼Œ$1\le m \le 10^4$ï¼Œ$1\le q \le 10^5$ï¼Œ$\sum k_i \le 3\times 10^5$ï¼

$0 \le a,b \le 10^6$ï¼Œ$0 \le c \le 20$ï¼

---
å¯¹äº $10\%$ çš„æ•°æ®æ»¡è¶³ï¼š$n \le 20$ï¼Œ$\sum k_i \le 40$ï¼Œ$q \le 30$ï¼

---

å¯¹äºå¦å¤– $20\%$ çš„æ•°æ®æ»¡è¶³ï¼š$c=0$ï¼

---

å¯¹äºå¦å¤– $30\%$ çš„æ•°æ®æ»¡è¶³ï¼š$q=1$ï¼

---

é¢˜ç›®ä¸­å¯èƒ½å­˜åœ¨åªç»è¿‡ä¸€ä¸ªåœ°é“ç«™çš„åœ°é“çº¿è·¯ï¼è¿™ç§çº¿è·¯å¯ä»¥ç›´æ¥å¿½è§†ï¼æ•°æ®ä¿è¯ï¼šå¯¹äºä»»æ„ä¸€ç»„è¯¢é—®ï¼Œå­˜åœ¨ä¸€æ¡åˆæ³•çš„è·¯çº¿å¯ä»¥åˆ°è¾¾ç»ˆç‚¹ï¼

## æ ·ä¾‹ #1

### è¾“å…¥

```
5 3 3
5 1 2 3 4 5
2 1 3
3 2 4 5
1 1 1
3 0 2
1 5 2
```

### è¾“å‡º

```
4
9
4
```

## æ ·ä¾‹ #2

### è¾“å…¥

```
10 7 10
10 1 2 3 4 5 6 7 8 9 10
5 3 8 5 1 6
2 1 6
4 3 7 8 5
1 1
2 10 2
6 8 4 7 3 1 5
5 10 6
17 14 0
11 14 5
8 8 3
8 13 9
11 2 9
7 1 6
11 11 8
15 3 0
0 17 4
```

### è¾“å‡º

```
35
153
69
48
53
57
36
66
135
0
```

## æ ·ä¾‹ #3

### è¾“å…¥

```
10 7 10
10 1 2 3 4 5 6 7 8 9 10
3 2 7 1
3 5 10 9
2 2 7
5 4 8 1 7 2
3 10 9 4
4 2 1 7 8
18 6 0
16 11 0
18 1 0
14 0 0
19 14 0
3 2 0
18 15 0
5 18 0
2 17 0
20 10 0
```

### è¾“å‡º

```
162
144
162
126
171
27
162
45
18
180
```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šåœ°é“ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> å„ä½å°æ¢é™©å®¶ï¼Œä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·æ­ä¹˜ä¸€è¶Ÿâ€œå›¾è®ºç‰¹å¿«åˆ—è½¦â€ï¼Œç›®çš„åœ°æ˜¯**æœ€çŸ­è·¯ + åˆ†å±‚å›¾**çš„äº¤æ±‡ç«™ï¼  
> é¢˜ç›®çœ‹ä¼¼æ˜¯â€œååœ°é“â€ï¼Œå®åˆ™æš—è—å›¾è®ºå»ºæ¨¡çš„ç²¾å¦™ï¼Œå°¤å…¶æ˜¯é‚£ä¸ªâ€œæ¢ä¹˜æ¬¡æ•° â‰¤ 20â€çš„æç¤ºï¼Œç®€ç›´å°±æ˜¯ä¸ºæˆ‘ä»¬é‡èº«å®šåšçš„è§£é¢˜é’¥åŒ™ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
> åœ¨ä¸€å¼ å·¨å¤§çš„åœ°é“ç½‘ç»œä¸­ï¼Œ**æ—¢è¦è®¡ç®—ç»è¿‡çš„ç«™æ•°ï¼Œåˆè¦è®¡ç®—æ¢ä¹˜æ¬¡æ•°**ï¼Œå¹¶åœ¨â€œæ¢ä¹˜æ¬¡æ•° â‰¤ câ€çš„é™åˆ¶ä¸‹ï¼Œæ‰¾åˆ°**æœ€å°æ€»ç–²æƒ«å€¼**ï¼ˆax + byï¼‰ã€‚  
> éš¾ç‚¹åœ¨äºï¼šå¦‚ä½•**åŒæ—¶è¿½è¸ªâ€œç«™æ•°â€å’Œâ€œæ¢ä¹˜æ¬¡æ•°â€**è¿™ä¸¤ä¸ªç»´åº¦çš„ä¿¡æ¯ï¼Œè€Œæ•°æ®èŒƒå›´åˆè¦æ±‚æˆ‘ä»¬é«˜æ•ˆï¼ˆn â‰¤ 1e5ï¼Œq â‰¤ 1e5ï¼‰ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š  
> **åˆ†å±‚å›¾æœ€çŸ­è·¯**ï¼ˆDijkstra + åˆ†å±‚æ€æƒ³ï¼‰

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1. **çº¿ç´¢1ï¼ˆé—®é¢˜ç›®æ ‡ï¼‰**ï¼š  
   > â€œæœ€å°åŒ–ç–²æƒ«å€¼â€ â†’ å…¸å‹çš„**æœ€çŸ­è·¯é—®é¢˜**ï¼ä½†ç–²æƒ«å€¼æ˜¯**ax + by**ï¼Œå…¶ä¸­xæ˜¯ç«™æ•°ï¼Œyæ˜¯æ¢ä¹˜æ¬¡æ•° â†’ **åŒç»´åº¦æœ€çŸ­è·¯**ã€‚

2. **çº¿ç´¢2ï¼ˆå…³é”®çº¦æŸï¼‰**ï¼š  
   > â€œæ¢ä¹˜æ¬¡æ•° â‰¤ 20â€ â†’ **c â‰¤ 20**ï¼è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥**æšä¸¾æ¢ä¹˜æ¬¡æ•°**ï¼Œæˆ–è€…**åˆ†å±‚å»ºå›¾**ï¼ˆæ¯å±‚ä»£è¡¨æ¢ä¹˜æ¬¡æ•°ï¼‰ã€‚

3. **çº¿ç´¢3ï¼ˆæ•°æ®è§„æ¨¡ï¼‰**ï¼š  
   > n â‰¤ 1e5ï¼Œq â‰¤ 1e5ï¼Œä½†c â‰¤ 20 â†’ **O(n log n Â· c) æˆ– O(qc) çš„å¤æ‚åº¦**å®Œå…¨å¯è¡Œï¼

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1. **â€œæœ€å°åŒ–åŒç»´åº¦ä»£ä»·â€** â†’ æœ€çŸ­è·¯ç®—æ³•ï¼ˆDijkstraï¼‰æ˜¯é¦–é€‰ã€‚  
> 2. **â€œæ¢ä¹˜æ¬¡æ•° â‰¤ 20â€** â†’ æˆ‘ä»¬å¯ä»¥æŠŠâ€œæ¢ä¹˜æ¬¡æ•°â€ä½œä¸º**åˆ†å±‚å›¾çš„å±‚æ•°**ï¼  
> 3. **â€œåˆ†å±‚å›¾â€** â†’ æ¯å±‚ä»£è¡¨â€œå·²æ¢ä¹˜kæ¬¡â€æ—¶çš„çŠ¶æ€ï¼Œå±‚é—´é€šè¿‡â€œæ¢ä¹˜â€è½¬ç§»ã€‚  
> 4. **ç»“è®º**ï¼š**åˆ†å±‚å›¾æœ€çŸ­è·¯**å®Œç¾å¥‘åˆï¼æ¯å±‚æ˜¯åŸå›¾çš„å¤åˆ¶ï¼Œå±‚é—´é€šè¿‡â€œæ¢ä¹˜â€å»ºè¾¹ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼štechnopolis_2085ï¼ˆåˆ†å±‚å›¾ + è™šç‚¹ä¼˜åŒ–ï¼‰
> **ç‚¹è¯„**ï¼š  
> - **æ€è·¯æ¸…æ™°**ï¼šç›´æ¥é‡‡ç”¨**åˆ†å±‚å›¾Dijkstra**ï¼Œå°†â€œæ¢ä¹˜æ¬¡æ•°â€ä½œä¸ºdpçš„ç¬¬äºŒç»´ã€‚  
> - **ä»£ç æŠ€å·§**ï¼šç”¨**è™šç‚¹**ï¼ˆtot+nï¼‰å·§å¦™å¤„ç†â€œæ¢ä¹˜â€è½¬ç§»ï¼Œé¿å…å»ºå¤šå±‚å›¾ï¼ŒèŠ‚çœç©ºé—´ã€‚  
> - **è¾¹ç•Œå¤„ç†**ï¼šç‰¹åˆ¤â€œæ¢ä¹˜æ¬¡æ•° > 20â€ç›´æ¥è·³è¿‡ï¼Œéå¸¸ä¸¥è°¨ã€‚

### é¢˜è§£äºŒï¼šTianLuenï¼ˆæºæ±‡æ‹†ç‚¹ + å¤šè½®Dijkstraï¼‰
> **ç‚¹è¯„**ï¼š  
> - **å»ºæ¨¡å·§å¦™**ï¼šå°†æ¯ä¸ªç«™ç‚¹æ‹†æˆâ€œæºâ€å’Œâ€œæ±‡â€ï¼Œé€šè¿‡**å¤šè½®Dijkstra**ç»´æŠ¤â€œæ¢ä¹˜kæ¬¡çš„æœ€çŸ­è·ç¦»â€ã€‚  
> - **ä»£ç è§„èŒƒ**ï¼šä½¿ç”¨`G::dijkstra`æ¨¡å—åŒ–å°è£…ï¼Œå¯è¯»æ€§å¼ºã€‚

### é¢˜è§£ä¸‰ï¼šSnowTraceï¼ˆå‰ç¼€ä¼˜åŒ–å»ºå›¾ + 0-1 BFSï¼‰
> **ç‚¹è¯„**ï¼š  
> - **å»ºå›¾ä¼˜åŒ–**ï¼šç”¨**å‰ç¼€èŠ‚ç‚¹**ï¼ˆsufæ•°ç»„ï¼‰å‹ç¼©â€œåŒçº¿è·¯ä»»æ„ä¸¤ç‚¹è¿è¾¹â€çš„å¤æ‚åº¦ã€‚  
> - **ç®—æ³•é€‰æ‹©**ï¼šåˆ©ç”¨**0-1 BFS**ï¼ˆè¾¹æƒä¸º0æˆ–1ï¼‰ä¼˜åŒ–æœ€çŸ­è·¯ï¼Œå¸¸æ•°æ›´å°ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆæœ€ä¼˜è§£æ³•å‰–æï¼‰

#### å…³é”®ç‚¹1ï¼šå¦‚ä½•å»ºæ¨¡â€œæ¢ä¹˜â€ï¼Ÿ
- **åˆ†æ**ï¼š  
  å°†â€œæ¢ä¹˜â€è§†ä¸º**ä»å½“å‰çº¿è·¯è·³åˆ°å…¶ä»–çº¿è·¯**çš„åŠ¨ä½œã€‚  
  åœ¨åˆ†å±‚å›¾ä¸­ï¼Œ**å±‚é—´è¾¹**ä»£è¡¨æ¢ä¹˜ï¼ˆè¾¹æƒä¸º0ï¼Œä½†æ¢ä¹˜æ¬¡æ•°+1ï¼‰ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š  
  > åˆ†å±‚å›¾çš„æ ¸å¿ƒæ˜¯**â€œçŠ¶æ€æ‰©å±•â€**ï¼ŒæŠŠâ€œæ¢ä¹˜æ¬¡æ•°â€ä½œä¸ºçŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚

#### å…³é”®ç‚¹2ï¼šå¦‚ä½•é«˜æ•ˆå»ºå›¾ï¼Ÿ
- **åˆ†æ**ï¼š  
  - **æ–¹æ¡ˆAï¼ˆè™šç‚¹ï¼‰**ï¼šä¸ºæ¯ä¸ªç«™ç‚¹å»ºä¸€ä¸ªâ€œæ¢ä¹˜ä¸­è½¬ç‚¹â€ï¼Œè¿æ¥æ‰€æœ‰ç»è¿‡è¯¥ç«™ç‚¹çš„çº¿è·¯ã€‚  
  - **æ–¹æ¡ˆBï¼ˆå‰ç¼€ä¼˜åŒ–ï¼‰**ï¼šå¯¹æ¯æ¡çº¿è·¯ï¼Œç”¨å‰ç¼€èŠ‚ç‚¹å‹ç¼©â€œåŒçº¿è·¯ä»»æ„ä¸¤ç‚¹å¯è¾¾â€çš„è¾¹ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š  
  > è™šç‚¹é€‚åˆâ€œç«™ç‚¹-çº¿è·¯â€å…³ç³»å¤æ‚çš„æƒ…å†µï¼›å‰ç¼€ä¼˜åŒ–é€‚åˆâ€œçº¿è·¯å†…éƒ¨â€çš„å¯†é›†è¿æ¥ã€‚

#### å…³é”®ç‚¹3ï¼šå¦‚ä½•å¤„ç†æŸ¥è¯¢ï¼Ÿ
- **åˆ†æ**ï¼š  
  é¢„å¤„ç†`dist[k]`ï¼šæ¢ä¹˜kæ¬¡æ—¶çš„æœ€çŸ­ç«™æ•°ã€‚  
  æŸ¥è¯¢æ—¶æšä¸¾`0 â‰¤ i â‰¤ c`ï¼Œå–`min(aÂ·dist[i] + bÂ·i)`ã€‚  
- ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š  
  > ç¦»çº¿å¤„ç†æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥**æŒ‰cæ’åº**ä¼˜åŒ–æšä¸¾èŒƒå›´ã€‚

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---|---|---|---|---|
| **æš´åŠ›BFS** | ç›´æ¥BFSï¼ŒåŒæ—¶è®°å½•ç«™æ•°å’Œæ¢ä¹˜æ¬¡æ•° | æ€è·¯ç®€å• | çŠ¶æ€ç©ºé—´çˆ†ç‚¸ï¼ˆO(nÂ·c)å¯èƒ½è¶…æ—¶ï¼‰ | n â‰¤ 1e3 |
| **åˆ†å±‚å›¾Dijkstra** | å»ºc+1å±‚å›¾ï¼Œå±‚é—´è¾¹ä»£è¡¨æ¢ä¹˜ | å¤æ‚åº¦O((n+mÂ·c) log n) | å»ºå›¾å¤æ‚ | **æœ¬é¢˜æœ€ä¼˜** |
| **å¤šè½®Dijkstra** | æ¯è½®ç»´æŠ¤â€œæ¢ä¹˜kæ¬¡çš„æœ€çŸ­è·¯â€ | æ— éœ€æ˜¾å¼å»ºåˆ†å±‚å›¾ | éœ€è¦21è½®Dijkstra | é€‚åˆcè¾ƒå°ï¼ˆc â‰¤ 20ï¼‰ |

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
> **è¯´æ˜**ï¼šç»¼åˆtechnopolis_2085å’ŒTianLuençš„æ€è·¯ï¼Œæä¾›**åˆ†å±‚å›¾Dijkstra**çš„å®Œæ•´å®ç°ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;

const int MAXN = 1e5 + 10, MAXC = 25;
const long long INF = 1e18;

struct Edge {
    int to, w, trans;
};
vector<Edge> G[MAXN * MAXC];

int n, m, q;
long long dist[MAXN * MAXC];

void add_edge(int u, int v, int w, int trans) {
    G[u].push_back({v, w, trans});
}

void dijkstra(int s) {
    priority_queue<pair<long long, int>, vector<pair<long long, int>>, greater<pair<long long, int>>> pq;
    fill(dist, dist + MAXN * MAXC, INF);
    dist[s] = 0;
    pq.push({0, s});

    while (!pq.empty()) {
        auto [d, u] = pq.top(); pq.pop();
        if (d > dist[u]) continue;
        for (auto [v, w, trans] : G[u]) {
            if (dist[v] > dist[u] + w) {
                dist[v] = dist[u] + w;
                pq.push({dist[v], v});
            }
        }
    }
}

int main() {
    scanf("%d%d%d", &n, &m, &q);
    int total_nodes = n * (MAXC + 1);

    // å»ºåˆ†å±‚å›¾ï¼šå±‚kä»£è¡¨æ¢ä¹˜kæ¬¡
    for (int i = 1; i <= m; i++) {
        int k; scanf("%d", &k);
        vector<int> path(k);
        for (int j = 0; j < k; j++) scanf("%d", &path[j]);

        for (int j = 0; j < k - 1; j++) {
            int u = path[j], v = path[j + 1];
            for (int layer = 0; layer <= MAXC; layer++) {
                add_edge(u + layer * n, v + layer * n, 1, 0); // åŒå±‚ç§»åŠ¨
            }
            // å±‚é—´æ¢ä¹˜ï¼šä»layeråˆ°layer+1
            for (int layer = 0; layer < MAXC; layer++) {
                add_edge(u + layer * n, v + (layer + 1) * n, 1, 1);
            }
        }
    }

    dijkstra(1); // ä»1å·ç«™å‡ºå‘

    while (q--) {
        long long a, b, c; scanf("%lld%lld%lld", &a, &b, &c);
        long long ans = INF;
        for (int i = 0; i <= c; i++) {
            ans = min(ans, a * dist[n + i * n] + b * i);
        }
        printf("%lld\n", ans);
    }
    return 0;
}
```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

> **åŠ¨ç”»ä¸»é¢˜**ï¼š**â€œåƒç´ åœ°é“å¤§å†’é™©â€**  
> 8ä½åƒç´ é£æ ¼çš„åœ°é“ç½‘ç»œï¼Œç©å®¶ï¼ˆåƒç´ å°äººï¼‰ä»1å·ç«™å‡ºå‘ï¼Œç›®æ ‡æ˜¯nå·ç«™ï¼

### è®¾è®¡æ€è·¯
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - ç”¨åƒç´ ç½‘æ ¼å±•ç¤ºåœ°é“ç½‘ç»œï¼Œæ¯æ¡çº¿è·¯ç”¨ä¸åŒé¢œè‰²çš„åƒç´ è½¨é“è¡¨ç¤ºã€‚  
   - å·¦ä¸Šè§’æ˜¾ç¤ºâ€œå½“å‰æ¢ä¹˜æ¬¡æ•°ï¼š0/20â€ã€‚

2. **åŠ¨ç”»æ­¥éª¤**ï¼š  
   - **Step1**ï¼šå°äººä»1å·ç«™å‡ºå‘ï¼Œæ²¿å½“å‰çº¿è·¯ç§»åŠ¨ï¼ˆåƒç´ å°äººæ²¿è½¨é“æ»‘åŠ¨ï¼Œç«™æ•°+1ï¼‰ã€‚  
   - **Step2**ï¼šåˆ°è¾¾æ¢ä¹˜ç«™æ—¶ï¼Œå¼¹å‡ºâ€œæ¢ä¹˜ï¼Ÿâ€æŒ‰é’®ï¼Œç‚¹å‡»åå°äººâ€œè·³è·ƒâ€åˆ°å¦ä¸€æ¡çº¿è·¯çš„å¯¹åº”ç«™ï¼ˆæ¢ä¹˜æ¬¡æ•°+1ï¼Œå±‚æ•°+1ï¼‰ã€‚  
   - **Step3**ï¼šé‡å¤Step1-2ï¼Œç›´åˆ°åˆ°è¾¾nå·ç«™ï¼Œæ˜¾ç¤ºâ€œèƒœåˆ©ï¼ç–²æƒ«å€¼=ax+byâ€ã€‚

3. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
   - **éŸ³æ•ˆ**ï¼šç§»åŠ¨æ—¶æ’­æ”¾â€œå˜Ÿå˜Ÿâ€åœ°é“å£°ï¼Œæ¢ä¹˜æ—¶æ’­æ”¾â€œå®â€æç¤ºéŸ³ã€‚  
   - **ç§¯åˆ†**ï¼šæ¯æˆåŠŸæ¢ä¹˜ä¸€æ¬¡ï¼Œè·å¾—â€œåœ°é“å¸â€å¥–åŠ±ï¼Œæ¿€åŠ±æ¢ç´¢æœ€ä¼˜è·¯å¾„ã€‚

4. **æŠ€æœ¯å®ç°**ï¼š  
   - ç”¨Canvasç»˜åˆ¶åƒç´ ç½‘æ ¼ï¼Œå°äººç”¨16x16åƒç´ æ–¹å—è¡¨ç¤ºã€‚  
   - ç”¨`requestAnimationFrame`å®ç°å¹³æ»‘åŠ¨ç”»ï¼Œå…³é”®å¸§è®°å½•ç«™æ•°å’Œæ¢ä¹˜æ¬¡æ•°ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æŠ€å·§è¿ç§»
> åˆ†å±‚å›¾æœ€çŸ­è·¯é€‚ç”¨äºï¼š  
> 1. **â€œè¾¹æ•°é™åˆ¶â€é—®é¢˜**ï¼šå¦‚æœ€å¤šç»è¿‡kæ¡è¾¹çš„æœ€çŸ­è·¯ï¼ˆæ´›è°·P4568ï¼‰ã€‚  
> 2. **â€œçŠ¶æ€é™„åŠ â€é—®é¢˜**ï¼šå¦‚å¸¦â€œå‰©ä½™æ²¹é‡â€çš„æœ€çŸ­è·¯ï¼ˆæ´›è°·P3956ï¼‰ã€‚  
> 3. **â€œåˆ†å±‚å†³ç­–â€é—®é¢˜**ï¼šå¦‚â€œæœ€å¤šç¿»è½¬kæ¬¡æ–¹å‘â€çš„æœ€çŸ­è·¯ï¼ˆæ´›è°·P3388ï¼‰ã€‚

### æ´›è°·æ¨èç»ƒä¹ 
1. **P4568 [JLOI2011] é£è¡Œè·¯çº¿**  
   > åˆ†å±‚å›¾è£¸é¢˜ï¼Œå·©å›ºâ€œè¾¹æ•°é™åˆ¶â€å»ºæ¨¡ã€‚
2. **P3956 [NOIP2017] å®è—**  
   > éœ€è¦åŒæ—¶è€ƒè™‘â€œè·¯å¾„é•¿åº¦â€å’Œâ€œå‰©ä½™æ²¹é‡â€ï¼Œç»ƒä¹ çŠ¶æ€è®¾è®¡ã€‚
3. **P3388 [HNOI2013] æ—…è¡Œè·¯çº¿**  
   > å¸¦â€œç¿»è½¬æ–¹å‘â€çš„åˆ†å±‚å›¾ï¼Œæ‹“å±•æ€ç»´ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ªtechnopolis_2085çš„è°ƒè¯•å¿ƒå¾—**ï¼š  
> â€œæˆ‘åœ¨å¤„ç†è™šç‚¹æ¢ä¹˜æ—¶ï¼Œä¸€å¼€å§‹å¿˜è®°ç»™è™šç‚¹åˆ†é…ç‹¬ç«‹ç¼–å·ï¼Œå¯¼è‡´å»ºå›¾æ··ä¹±ã€‚åæ¥ç”¨`tot+n`ä¸ºè™šç‚¹ç¼–å·ï¼Œé—®é¢˜è¿åˆƒè€Œè§£ã€‚â€  
> **ç‚¹è¯„**ï¼š  
> è¿™æé†’æˆ‘ä»¬ï¼Œ**å›¾è®ºå»ºæ¨¡æ—¶ï¼ŒèŠ‚ç‚¹ç¼–å·çš„å”¯ä¸€æ€§**è‡³å…³é‡è¦ï¼å–„ç”¨`tot`ã€`offset`ç­‰æŠ€å·§å¯é¿å…å†²çªã€‚

---

<conclusion>
> æœ¬æ¬¡â€œåœ°é“â€ä¹‹æ—…å‘Šä¸€æ®µè½ï¼æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•ç”¨**åˆ†å±‚å›¾æœ€çŸ­è·¯**ä¼˜é›…åœ°è§£å†³â€œåŒç»´åº¦æœ€ä¼˜åŒ–â€é—®é¢˜ã€‚  
> è®°ä½ï¼šçœ‹åˆ°â€œé™åˆ¶æ¬¡æ•° â‰¤ 20â€æ—¶ï¼Œ**åˆ†å±‚å›¾**å°±æ˜¯ä½ çš„ç§˜å¯†æ­¦å™¨ï¼  
> ä¸‹æ¬¡è§ï¼Œç»§ç»­æ¢ç´¢æ›´å¥‡å¦™çš„ç®—æ³•ä¸–ç•Œï¼ğŸš‡âœ¨
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š69.15ç§’
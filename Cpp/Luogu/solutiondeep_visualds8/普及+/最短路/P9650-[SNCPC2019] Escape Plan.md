# é¢˜ç›®ä¿¡æ¯

# [SNCPC2019] Escape Plan

## é¢˜ç›®æè¿°

å®å®è¢«å›°åœ¨äº† Heltion åŸä¸­ã€‚

åŸå¸‚å¯ä»¥çœ‹åšç”± $n$ ä¸ªç‚¹ä¸ $m$ æ¡è¾¹ç»„æˆçš„**æœ‰æƒæ— å‘å›¾**ï¼Œæœ€å¼€å§‹å®å®åœ¨ $1$ å·èŠ‚ç‚¹ã€‚åŸå¸‚ä¸­å­˜åœ¨ $k$ ä¸ªå‡ºå£ï¼Œç¬¬ $i$ ä¸ªå‡ºå£ä½ç½®åœ¨ $e_i$ å·ç‚¹ ï¼Œè€Œå®å®éœ€è¦ä»¥æœ€å¿«çš„é€Ÿåº¦åˆ°è¾¾**è¿™äº›å‡ºå£ä¸­çš„ä»»æ„ä¸€ä¸ª**ä»¥é€ƒç¦» Heltion åŸã€‚

ä¸å·§çš„æ˜¯ï¼ŒåŸå¸‚ä¸­æœ‰æ€ªç‰©æ¸¸è¡ï¼Œå¯¹äºç‚¹ $i$ï¼Œæœ‰ $d_i$ åªæ€ªç‰©é©»å®ˆåœ¨æ­¤ã€‚å½“å®å®åˆ°è¾¾ç‚¹ $i$ æ—¶ï¼Œæ€ªç‰©ä¼š**éšæœºå°é”è‡³å¤š** $d_i$ **æ¡**ä¸ä¹‹ç›¸é‚»çš„é“è·¯ï¼Œå®å®ä¸èƒ½é€šè¿‡è¿™äº›è¢«å°é”çš„é“è·¯ã€‚è€Œå½“å®å®**ç¦»å¼€å**ï¼Œç‚¹ $i$ çš„æ€ªç‰©ä¼šå›çªï¼Œè¿™æ—¶è¢«å°é”çš„**é“è·¯ä¼šè§£å¼€**ã€‚

è¯·å¸®å¸®å®å®ï¼Œæ±‚å‡ºæœ€åæƒ…å†µä¸‹ï¼Œä»–é€ƒå‡º Heltion åŸéœ€è¦å¤šä¹…ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1\le n \le 10^5$ï¼Œ$\sum n \le 10^6$ï¼Œ$1\le m \le 10^6$ï¼Œ$\sum m \le 3\times 10^6$ï¼Œ$1\le k \le n$ï¼Œ$1\le e_i \le n$ï¼Œ$0\le d_i \le m$ï¼Œ$1\le x_i,y_i \le n$ï¼Œ$1\le w_i \le 10^4$ã€‚æ•°æ®ä¿è¯ $x_i \neq y_i$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
2
3 4 1
3
1 1 1
1 2 1
1 2 2
2 3 1
2 3 2
3 2 2
2 3
2 0 0
1 2 1
1 3 1
```

### è¾“å‡º

```
4
-1
```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šEscape Plan æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ”»å…‹ **SNCPC2019 Escape Plan**ã€‚å®å®è¦ä»æ€ªç‰©æ¨ªè¡Œçš„ Heltion åŸé€ƒå‡ºå»ï¼Œä½†æ€ªç‰©ä¼šéšæœºå°è·¯ï¼å¦‚ä½•åœ¨â€œæœ€åæƒ…å†µâ€ä¸‹ä»æœ€å¿«åˆ°è¾¾ä»»æ„ä¸€ä¸ªå‡ºå£ï¼Ÿè¿™ä¸ä»…æ˜¯å›¾è®ºï¼Œæ›´æ˜¯ä¸€åœºåšå¼ˆä¸ç­–ç•¥çš„è¾ƒé‡ã€‚

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨**æœ‰æƒæ— å‘å›¾**ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹ $i$ ä¼š**ä¸´æ—¶å°é”æœ€å¤š $d_i$ æ¡é‚»è¾¹**ï¼ˆå®å®ç¦»å¼€åç«‹å³è§£é”ï¼‰ã€‚æ±‚ä»èŠ‚ç‚¹ 1 åˆ°**ä»»æ„ä¸€ä¸ªå‡ºå£**çš„**æœ€åæƒ…å†µä¸‹**çš„æœ€çŸ­ç”¨æ—¶ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š**æœ€çŸ­è·¯**ã€**Dijkstra**ã€**é€†å‘æ€ç»´**ã€**è´ªå¿ƒç­–ç•¥**ã€‚

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
- æ­£å‘æ€è€ƒï¼šä» 1 å‡ºå‘ï¼Œæ¯åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ€ªç‰©ä¼šâ€œæ¶æ„â€å°é”å“ª $d_i$ æ¡è¾¹ï¼Ÿæ— æ³•é¢„çŸ¥ï¼
- é€†å‘æ€è€ƒï¼šæŠŠ**æ‰€æœ‰å‡ºå£**å½“ä½œ**èµ·ç‚¹**ï¼ŒèŠ‚ç‚¹ 1 å½“ä½œ**ç»ˆç‚¹**ï¼Œè·‘ä¸€é**å¤šæºæœ€çŸ­è·¯**ï¼
- å…³é”®ï¼šå¦‚ä½•æ¨¡æ‹Ÿâ€œæ€ªç‰©æœ€åå°é”â€ï¼Ÿâ€”â€”åœ¨**é€†å‘ Dijkstra**ä¸­ï¼Œæ¯å½“ç¬¬ä¸€æ¬¡ä»å †é¡¶å–å‡ºèŠ‚ç‚¹ $u$ï¼Œè¯´æ˜è¿™æ¡è·¯å¾„æ˜¯ç›®å‰ $u$ åˆ°å‡ºå£çš„**æœ€çŸ­è·¯å¾„**ã€‚æ€ªç‰©ä¸ºäº†â€œæœ€åâ€ï¼Œä¼š**ä¼˜å…ˆå°é”è¿™æ¡æœ€çŸ­è·¯å¾„**ã€‚å› æ­¤ï¼Œæˆ‘ä»¬**å»¶è¿Ÿ $d_u$ æ¬¡**æ‰å°† $u$ çš„è·ç¦»â€œç¡®å®šâ€ä¸‹æ¥ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼šæ±‚â€œæœ€çŸ­è·¯å¾„â€ï¼Œä¸”å›¾æ˜¯**æ­£æƒæ— å‘å›¾**ï¼Œç›´æ¥é”å®š **Dijkstra**ã€‚
2.  **çº¿ç´¢2 (é—®é¢˜çº¦æŸ)**ï¼šæ€ªç‰©å°é”è§„åˆ™æ˜¯**ä¸´æ—¶æ€§ã€æœ€åæƒ…å†µ**ï¼Œæ— æ³•é€šè¿‡ä¼ ç»Ÿæœ€çŸ­è·¯å¤„ç†ã€‚
3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼š$n \le 10^5, m \le 10^6$ï¼Œ**Dijkstra å †ä¼˜åŒ–** $O(m \log n)$ å®Œå…¨å¯è¡Œã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1.  é¦–å…ˆï¼Œ**çº¿ç´¢1**å‘Šè¯‰æˆ‘è¿™æ˜¯ç»å…¸æœ€çŸ­è·¯ï¼Œä½†**çº¿ç´¢2**çš„å°é”è§„åˆ™è®©ä¼ ç»Ÿ Dijkstra å¤±æ•ˆã€‚
> 2.  æ€ªç‰©å°é”æ˜¯â€œæœ€åæƒ…å†µâ€ï¼Œç­‰ä»·äº**ä¼˜å…ˆå°é”æœ€çŸ­è·¯å¾„**ã€‚é€†å‘æ€è€ƒï¼šä»æ‰€æœ‰å‡ºå£å‡ºå‘ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æŸèŠ‚ç‚¹æ—¶ï¼Œè¿™æ¡è·¯å¾„å°±æ˜¯â€œæœ€çŸ­â€ï¼Œæ€ªç‰©ä¼šå°é”å®ƒã€‚
> 3.  å› æ­¤ï¼Œæˆ‘ä»¬**å»¶è¿Ÿ $d_u$ æ¬¡**æ‰å°†èŠ‚ç‚¹ $u$ çš„è·ç¦»â€œç¡®å®šâ€ã€‚è¿™å®Œç¾èå…¥ **Dijkstra** çš„è´ªå¿ƒæ¡†æ¶ï¼šæ¯æ¬¡å †é¡¶å–å‡ºè·ç¦»æœ€å°çš„èŠ‚ç‚¹ï¼Œè‹¥è¿˜èƒ½å°é”ï¼ˆ$d_u > 0$ï¼‰ï¼Œåˆ™**è·³è¿‡**å¹¶å‡å°‘ $d_u$ï¼›å¦åˆ™ï¼Œè¯¥è·ç¦»å³ä¸ºæœ€åæƒ…å†µä¸‹çš„æœ€çŸ­è·¯ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼šliaoxingrui (èµï¼š6)**
* **ç‚¹è¯„**ï¼šæ€è·¯æ¸…æ™°ï¼Œç›´æ¥ç‚¹å‡ºâ€œé€†å‘ Dijkstraâ€çš„æ ¸å¿ƒã€‚ä»£ç è§„èŒƒï¼Œå˜é‡å‘½åç›´è§‚ã€‚é€šè¿‡ `d[x]--` å·§å¦™æ¨¡æ‹Ÿæ€ªç‰©å°é”ï¼Œå»¶è¿ŸèŠ‚ç‚¹ $x$ çš„æ¾å¼›æ“ä½œï¼Œä½“ç°äº†å¯¹ Dijkstra è´ªå¿ƒæœ¬è´¨çš„æ·±åˆ»ç†è§£ã€‚

**é¢˜è§£äºŒï¼škeepwatcher_kensap (èµï¼š3)**
* **ç‚¹è¯„**ï¼šè¯¦ç»†è§£é‡Šäº†é€†å‘æ€ç»´çš„åŠ¨æœºï¼Œå¼ºè°ƒâ€œæœ€åæƒ…å†µâ€å³â€œä¼˜å…ˆå°é”æœ€çŸ­è·¯å¾„â€ã€‚ä»£ç ä¸­ `sca[x]` å­˜å‚¨å‰©ä½™å°é”æ¬¡æ•°ï¼Œé€»è¾‘ä¸é¢˜è§£ä¸€ä¸€è‡´ï¼Œä½†å˜é‡åç¨éš¾ç†è§£ã€‚

**é¢˜è§£ä¸‰ï¼šWhitD (èµï¼š2)**
* **ç‚¹è¯„**ï¼šç®€æ´æ˜äº†ï¼Œç›´æ¥æŒ‡å‡ºâ€œåå‘è·‘å›¾â€çš„ç²¾é«“ã€‚ä»£ç ä½¿ç”¨ `vector` å­˜å›¾ï¼Œé£æ ¼ç°ä»£ã€‚`dis[x]` åˆå§‹ä¸º `-1` è¡¨ç¤ºä¸å¯è¾¾ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤

1.  **å…³é”®ç‚¹1ï¼šå¦‚ä½•å®šä¹‰â€œæœ€åæƒ…å†µâ€ä¸‹çš„æœ€çŸ­è·¯ï¼Ÿ**
    * **åˆ†æ**ï¼šä¼ ç»Ÿæœ€çŸ­è·¯æ— æ³•å¤„ç†â€œæ€ªç‰©å°é”â€çš„ä¸ç¡®å®šæ€§ã€‚é€†å‘æ€ç»´ï¼šä»æ‰€æœ‰å‡ºå£å‡ºå‘ï¼Œç¬¬ä¸€æ¬¡è®¿é—®æŸèŠ‚ç‚¹æ—¶ï¼Œè¿™æ¡è·¯å¾„æ˜¯å½“å‰æœ€çŸ­ï¼Œæ€ªç‰©ä¼šå°é”å®ƒã€‚å› æ­¤ï¼ŒèŠ‚ç‚¹ $u$ çš„æœ€çŸ­è·¯è¢«â€œå»¶è¿Ÿâ€ $d_u$ æ¬¡ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**é€†å‘ Dijkstra** å°†â€œæœ€åæƒ…å†µâ€è½¬åŒ–ä¸ºâ€œå»¶è¿Ÿæ¾å¼›â€ï¼Œé¿å…å¤æ‚çš„çŠ¶æ€å»ºæ¨¡ã€‚

2.  **å…³é”®ç‚¹2ï¼šå¦‚ä½•åœ¨ Dijkstra ä¸­å®ç°â€œå»¶è¿Ÿâ€ï¼Ÿ**
    * **åˆ†æ**ï¼šåœ¨ Dijkstra ä¸­ï¼Œæ¯æ¬¡ä»å †é¡¶å–å‡ºè·ç¦»æœ€å°çš„èŠ‚ç‚¹ $u$ã€‚è‹¥ $d_u > 0$ï¼Œè¯´æ˜æ€ªç‰©è¿˜èƒ½å°é”ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œ**è·³è¿‡**å½“å‰èŠ‚ç‚¹ï¼Œå¹¶å°† $d_u$ å‡ 1ã€‚ç›´åˆ° $d_u = 0$ æ—¶ï¼Œæ‰æ­£å¼æ¾å¼› $u$ çš„é‚»è¾¹ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**è´ªå¿ƒç­–ç•¥**çš„ç²¾é«“ï¼šå †é¡¶å§‹ç»ˆæ˜¯æœ€çŸ­è·¯å¾„ï¼Œä½†æ€ªç‰©é€šè¿‡â€œå»¶è¿Ÿâ€å¼ºè¿«æˆ‘ä»¬èµ°æ›´é•¿çš„è·¯ã€‚

3.  **å…³é”®ç‚¹3ï¼šå¦‚ä½•å¤„ç†å¤šæºæœ€çŸ­è·¯ï¼Ÿ**
    * **åˆ†æ**ï¼šå°†æ‰€æœ‰å‡ºå£åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œåˆå§‹è·ç¦»ä¸º 0ã€‚Dijkstra ä¼šè‡ªåŠ¨ä»å¤šä¸ªå‡ºå£åŒæ—¶æ‰©å±•ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹åˆ°**æœ€è¿‘å‡ºå£**çš„æœ€çŸ­è·¯ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**å¤šæº Dijkstra** ä¸å•æº Dijkstra ä»£ç å‡ ä¹ä¸€è‡´ï¼Œåªéœ€å°†æ‰€æœ‰æºç‚¹åˆå§‹åŒ–ä¸ºè·ç¦» 0 å¹¶åŠ å…¥é˜Ÿåˆ—ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§A (é€†å‘æ€ç»´)**ï¼šå½“æ­£å‘é—®é¢˜å¤æ‚ï¼ˆå¦‚ä¸ç¡®å®šæ€§ã€æœ€åæƒ…å†µï¼‰ï¼Œå°è¯•é€†å‘å»ºæ¨¡ï¼Œå¾€å¾€èƒ½åŒ–ç¹ä¸ºç®€ã€‚
- **æŠ€å·§B (å»¶è¿Ÿæ¾å¼›)**ï¼šé€šè¿‡â€œè®¡æ•°å™¨â€å»¶è¿ŸèŠ‚ç‚¹çš„æ¾å¼›æ“ä½œï¼Œå·§å¦™èå…¥è´ªå¿ƒç®—æ³•æ¡†æ¶ã€‚
- **æŠ€å·§C (å¤šæºåˆå§‹åŒ–)**ï¼šå°†æ‰€æœ‰æºç‚¹åˆå§‹åŒ–ä¸ºè·ç¦» 0 å¹¶åŠ å…¥é˜Ÿåˆ—ï¼Œå³å¯å®ç°å¤šæºæœ€çŸ­è·¯ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ä¸åˆ†æ | é€‚ç”¨åœºæ™¯ / å¾—åˆ†é¢„æœŸ |
| :--- | :--- | :--- | :--- |:--- |
| **æš´åŠ›æœç´¢** | æšä¸¾æ‰€æœ‰å¯èƒ½çš„å°é”ç»„åˆï¼Œè·‘æœ€çŸ­è·¯ã€‚ | æ€è·¯ç›´è§‚ã€‚ | **æŒ‡æ•°çº§å¤æ‚åº¦** $O(2^m)$ï¼Œå®Œå…¨ä¸å¯è¡Œã€‚ | æ•°æ®è§„æ¨¡æå°ï¼ˆ$n,m \le 20$ï¼‰ã€‚é¢„è®¡ **0%** åˆ†æ•°ã€‚ |
| **æ­£å‘ Dijkstra + çŠ¶æ€å‹ç¼©** | ç”¨çŠ¶æ€è¡¨ç¤ºå“ªäº›è¾¹è¢«å°é”ï¼Œè·‘æœ€çŸ­è·¯ã€‚ | ç†è®ºä¸Šå¯è¡Œã€‚ | çŠ¶æ€ç©ºé—´çˆ†ç‚¸ï¼Œæ— æ³•å¤„ç† $n=10^5$ã€‚ | ç†è®ºæ¢è®¨ï¼Œæ— å®é™…ä»·å€¼ã€‚ |
| **é€†å‘ Dijkstra + å»¶è¿Ÿæ¾å¼› (æœ¬é¢˜æœ€ä¼˜)** | é€†å‘è·‘å›¾ï¼Œé€šè¿‡å»¶è¿Ÿ $d_u$ æ¬¡æ¨¡æ‹Ÿæœ€åå°é”ã€‚ | **$O(m \log n)$** é«˜æ•ˆé€šè¿‡ï¼Œä»£ç ç®€æ´ã€‚ | éœ€è¦é€†å‘æ€ç»´ï¼Œåˆå­¦è€…å¯èƒ½ä¸æ˜“æƒ³åˆ°ã€‚ | æœ¬é¢˜æœ€ä½³å®è·µï¼Œ**100%** åˆ†æ•°ã€‚ |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> 1.  **èµ·ç‚¹ï¼šæš´åŠ›æšä¸¾**æ‰€æœ‰å°é”ç»„åˆï¼Œè·‘æœ€çŸ­è·¯ï¼Ÿ2^m ç§å¯èƒ½ï¼Œç›´æ¥çˆ†ç‚¸ã€‚
> 2.  **å‘ç°ç“¶é¢ˆ**ï¼šæ€ªç‰©å°é”æ˜¯â€œæœ€åæƒ…å†µâ€ï¼Œæ— æ³•æšä¸¾æ‰€æœ‰å¯èƒ½ã€‚
> 3.  **é€†å‘æ€è€ƒ**ï¼šä»å‡ºå£å‡ºå‘ï¼Œæ€ªç‰©ä¼š**ä¼˜å…ˆå°é”æœ€çŸ­è·¯å¾„**ï¼Œç­‰ä»·äº**å»¶è¿Ÿæœ€çŸ­è·¯å¾„çš„ç¡®è®¤**ã€‚
> 4.  **æ¨¡å‹å‡å**ï¼šå°†â€œæœ€åå°é”â€è½¬åŒ–ä¸º**å»¶è¿Ÿ $d_u$ æ¬¡æ¾å¼›**ï¼Œå®Œç¾èå…¥ Dijkstra æ¡†æ¶ã€‚

ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼šé€†å‘æ€ç»´+å»¶è¿Ÿæ¾å¼›ï¼Œå°†çœ‹ä¼¼å¤æ‚çš„ä¸ç¡®å®šæ€§é—®é¢˜ï¼Œè½¬åŒ–ä¸ºç»å…¸æœ€çŸ­è·¯ç®—æ³•çš„é«˜æ•ˆæ±‚è§£ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
* **è¯´æ˜**ï¼šç»¼åˆæ‰€æœ‰ä¼˜è´¨é¢˜è§£ï¼Œæç‚¼å‡ºæœ€ç®€æ´ã€æ˜“æ‡‚çš„é€†å‘ Dijkstra å®ç°ã€‚
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š
    ```cpp
    #include <bits/stdc++.h>
    using namespace std;
    typedef long long ll;
    typedef pair<ll, int> PII;
    const int N = 1e5 + 5, M = 3e6 + 5;
    const ll INF = 1e18;

    int head[N], to[M], nxt[M], w[M], cnt;
    int n, m, k, d[N], out[N];
    ll dis[N];
    bool vis[N];
    priority_queue<PII, vector<PII>, greater<PII>> pq;

    void add(int u, int v, int val) {
        to[++cnt] = v, w[cnt] = val, nxt[cnt] = head[u], head[u] = cnt;
    }

    void dijkstra() {
        fill(dis, dis + n + 1, INF);
        fill(vis, vis + n + 1, false);
        while (!pq.empty()) pq.pop();

        for (int i = 1; i <= k; ++i) {
            dis[out[i]] = 0;
            pq.emplace(0, out[i]);
            d[out[i]] = 0; // å‡ºå£ä¸ä¼šè¢«å°é”
        }

        while (!pq.empty()) {
            auto [dist, u] = pq.top();
            pq.pop();

            if (d[u] > 0) { // è¿˜èƒ½å°é”ï¼Œè·³è¿‡
                --d[u];
                continue;
            }
            if (vis[u]) continue;
            vis[u] = true;
            dis[u] = dist;

            for (int i = head[u]; i; i = nxt[i]) {
                int v = to[i];
                if (!vis[v]) {
                    pq.emplace(dist + w[i], v);
                }
            }
        }
    }

    int main() {
        ios::sync_with_stdio(false);
        cin.tie(nullptr);
        int T;
        cin >> T;
        while (T--) {
            cnt = 0;
            fill(head, head + n + 1, 0);
            cin >> n >> m >> k;
            for (int i = 1; i <= k; ++i) cin >> out[i];
            for (int i = 1; i <= n; ++i) cin >> d[i];
            for (int i = 1, u, v, w; i <= m; ++i) {
                cin >> u >> v >> w;
                add(u, v, w);
                add(v, u, w);
            }
            dijkstra();
            cout << (dis[1] == INF ? -1 : dis[1]) << '\n';
        }
        return 0;
    }
    ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼šé€†å‘å¤šæº Dijkstraï¼Œé€šè¿‡ `d[u]--` å»¶è¿ŸèŠ‚ç‚¹ $u$ çš„æ¾å¼›ï¼Œç›´åˆ°å°é”æ¬¡æ•°è€—å°½æ‰æ­£å¼ç¡®å®šå…¶æœ€çŸ­è·¯ã€‚

---

## 5\. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜**ï¼š**â€œåƒç´ æ¢é™©å®¶â€é€ƒç¦»æ€ªç‰©åŸ**

**æ ¸å¿ƒæ¼”ç¤ºå†…å®¹**ï¼šé€†å‘ Dijkstra å¦‚ä½•ä¸€æ­¥æ­¥ä»å‡ºå£æ‰©å±•ï¼Œæ€ªç‰©å¦‚ä½•â€œæœ€åâ€å°é”æœ€çŸ­è·¯å¾„ã€‚

**è®¾è®¡æ€è·¯ç®€è¿°**ï¼šé‡‡ç”¨8ä½åƒç´ é£ï¼Œå‡ºå£ä¸ºç»¿è‰²åƒç´ é—¨ï¼Œæ€ªç‰©ä¸ºçº¢è‰²åƒç´ ç‚¹ã€‚æ¯æ¬¡å †é¡¶å–å‡ºèŠ‚ç‚¹æ—¶ï¼Œè‹¥ä¸ºå‡ºå£æˆ–å°é”æ¬¡æ•°è€—å°½ï¼Œåˆ™é«˜äº®ä¸ºè“è‰²ï¼›è‹¥è¢«å°é”ï¼Œåˆ™é—ªçƒçº¢è‰²å¹¶æ’­æ”¾â€œå°é”â€éŸ³æ•ˆã€‚

**åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹**ï¼š
1.  **åœºæ™¯åˆå§‹åŒ–**ï¼šåƒç´ åŒ–ç½‘æ ¼åŸå¸‚ï¼Œç»¿è‰²å‡ºå£é—¨ï¼Œçº¢è‰²æ€ªç‰©ç‚¹ã€‚
2.  **å¤šæºåˆå§‹åŒ–**ï¼šæ‰€æœ‰å‡ºå£é—¨åŒæ—¶å‘å…‰ï¼ŒåŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ã€‚
3.  **æ ¸å¿ƒæ­¥éª¤**ï¼š
    - å †é¡¶èŠ‚ç‚¹é—ªçƒé»„è‰²ï¼Œè¡¨ç¤ºå½“å‰å¤„ç†ã€‚
    - è‹¥ `d[u] > 0`ï¼Œçº¢è‰²æ€ªç‰©é—ªçƒï¼Œæ’­æ”¾â€œå°é”â€éŸ³æ•ˆï¼Œ`d[u]` å‡ 1ï¼ŒèŠ‚ç‚¹å˜æš—ã€‚
    - è‹¥ `d[u] = 0`ï¼ŒèŠ‚ç‚¹å˜è“è‰²ï¼Œæ­£å¼ç¡®å®šæœ€çŸ­è·¯ï¼Œå‘é‚»æ¥èŠ‚ç‚¹æ‰©å±•ã€‚
4.  **ç›®æ ‡è¾¾æˆ**ï¼šèŠ‚ç‚¹ 1 å˜ä¸ºé‡‘è‰²ï¼Œæ’­æ”¾â€œé€ƒè„±â€èƒœåˆ©éŸ³æ•ˆï¼Œæ˜¾ç¤ºæœ€ç»ˆè·ç¦»ã€‚
5.  **äº¤äº’æ§åˆ¶**ï¼šæä¾›â€œå•æ­¥/è‡ªåŠ¨æ’­æ”¾â€æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å—ï¼Œé‡ç½®åŠ¨ç”»ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**é€šç”¨æ€è·¯è¿ç§»**ï¼šé€†å‘ Dijkstra + å»¶è¿Ÿæ¾å¼›é€‚ç”¨äºæ‰€æœ‰â€œæœ€åæƒ…å†µâ€æˆ–â€œä¸ç¡®å®šæ€§â€ä¸‹çš„æœ€çŸ­è·¯é—®é¢˜ï¼Œå¦‚ï¼š
- **ç½‘ç»œè·¯ç”±**ï¼šè€ƒè™‘æœ€åé“¾è·¯æ•…éšœä¸‹çš„æœ€çŸ­è·¯å¾„ã€‚
- **æ¸¸æˆAI**ï¼šæ€ªç‰©å·¡é€»è·¯å¾„çš„â€œæœ€åæ‹¦æˆªâ€ç­–ç•¥ã€‚
- **ç‰©æµä¼˜åŒ–**ï¼šè€ƒè™‘æœ€å¤š $k$ æ¡é“è·¯å°é—­æ—¶çš„æœ€çŸ­é…é€è·¯çº¿ã€‚

**ç»ƒä¹ æ¨è (æ´›è°·)**ï¼š
1.  **P4779** - ã€æ¨¡æ¿ã€‘å•æºæœ€çŸ­è·¯å¾„ï¼ˆæ ‡å‡†ç‰ˆï¼‰
    * ğŸ—£ï¸ æ¨èç†ç”±ï¼šå·©å›º Dijkstra å †ä¼˜åŒ–æ¨¡æ¿ï¼Œä¸ºé€†å‘æ€ç»´æ‰“åŸºç¡€ã€‚
2.  **P1522** - ç‰›çš„æ—…è¡Œ
    * ğŸ—£ï¸ æ¨èç†ç”±ï¼šå¤šæºæœ€çŸ­è·¯å˜å½¢ï¼Œéœ€ç»“åˆé€†å‘æ€ç»´ä¸æšä¸¾æŠ€å·§ã€‚
3.  **P2886** - è·¯éšœ
    * ğŸ—£ï¸ æ¨èç†ç”±ï¼šåŠ¨æ€åˆ è¾¹æœ€çŸ­è·¯ï¼Œä¸â€œå»¶è¿Ÿæ¾å¼›â€æ€æƒ³å¼‚æ›²åŒå·¥ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

> **å‚è€ƒç»éªŒ (æ¥è‡ª liaoxingrui)**ï¼šâ€œé€†å‘è·‘å›¾æ˜¯å¤„ç†å¤šæºæœ€çŸ­è·¯çš„ç»å…¸æŠ€å·§ï¼Œä½†â€˜å»¶è¿Ÿæ¾å¼›â€™çš„å·§å¦™åœ¨äºå®ƒç›´æ¥ç”¨ `d[u]--` æ¨¡æ‹Ÿæœ€åå°é”ï¼Œæ— éœ€å¤æ‚çŠ¶æ€ã€‚è°ƒè¯•æ—¶ï¼Œæ‰“å° `dis` æ•°ç»„å’Œ `d` æ•°ç»„çš„å˜åŒ–ï¼Œèƒ½å¿«é€ŸéªŒè¯é€»è¾‘ã€‚â€
>
> **ç‚¹è¯„**ï¼šé€†å‘æ€ç»´+å»¶è¿Ÿæ¾å¼›ï¼Œå°†çœ‹ä¼¼å¤æ‚çš„ä¸ç¡®å®šæ€§é—®é¢˜ï¼Œè½¬åŒ–ä¸ºç»å…¸ç®—æ³•çš„ä¼˜é›…æ±‚è§£ã€‚è°ƒè¯•æ—¶å…³æ³¨å°é”æ¬¡æ•°çš„å˜åŒ–ï¼Œæ˜¯éªŒè¯æ­£ç¡®æ€§çš„å…³é”®ã€‚

---

æœ¬æ¬¡å…³äº **Escape Plan** çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚é€†å‘æ€ç»´ä¸å»¶è¿Ÿæ¾å¼›ï¼Œè®©æˆ‘ä»¬åœ¨é¢å¯¹ä¸ç¡®å®šæ€§æ—¶ï¼Œä¾ç„¶èƒ½æ‰¾åˆ°æœ€ä¼˜è·¯å¾„ï¼ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š76.08ç§’
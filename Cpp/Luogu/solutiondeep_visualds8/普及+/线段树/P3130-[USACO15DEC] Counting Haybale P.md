# é¢˜ç›®ä¿¡æ¯

# [USACO15DEC] Counting Haybale P

## é¢˜ç›®æè¿°

Farmer John æ­£åœ¨å°è¯•é›‡ä½£æ‰¿åŒ…å•†æ¥å¸®åŠ©ä»–é‡æ–°å®‰æ’å†œåœºï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‰€æœ‰æ‰¿åŒ…å•†åœ¨çœ‹åˆ° FJ å¸Œæœ›ä»–ä»¬éµå¾ªçš„å¤æ‚æŒ‡ä»¤åºåˆ—åéƒ½è¾èŒäº†ã€‚FJ ä¸å¾—ä¸è‡ªå·±å®Œæˆè¿™ä¸ªé¡¹ç›®ï¼Œä»–æ„è¯†åˆ°è‡ªå·±å¯èƒ½æŠŠé¡¹ç›®æå¾—æ¯”å¿…è¦çš„è¿˜è¦å¤æ‚ã€‚è¯·å¸®åŠ©ä»–æŒ‰ç…§æŒ‡ä»¤å®Œæˆå†œåœºçš„å‡çº§ã€‚

FJ çš„å†œåœºç”±ä¸€æ’ $N$ ä¸ªç”°åœ°ç»„æˆï¼Œç¼–å·ä¸º $1 \ldots N$ã€‚æ¯ä¸ªç”°åœ°é‡Œå¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å¹²è‰å †ã€‚Farmer John çš„æŒ‡ä»¤åŒ…å«ä¸‰ç§ç±»å‹çš„æ¡ç›®ï¼š

1) ç»™å®šä¸€ä¸ªè¿ç»­çš„ç”°åœ°åŒºé—´ï¼Œå‘æ¯ä¸ªç”°åœ°æ·»åŠ ä¸€ä¸ªæ–°çš„å¹²è‰å †ã€‚

2) ç»™å®šä¸€ä¸ªè¿ç»­çš„ç”°åœ°åŒºé—´ï¼Œç¡®å®šè¯¥åŒºé—´å†…ç”°åœ°ä¸­å¹²è‰å †çš„æœ€å°æ•°é‡ã€‚

3) ç»™å®šä¸€ä¸ªè¿ç»­çš„ç”°åœ°åŒºé—´ï¼Œè®¡ç®—è¯¥åŒºé—´å†…å¹²è‰å †çš„æ€»æ•°ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
4 5
3 1 2 4
M 3 4
S 1 3
P 2 3 1
M 3 4
S 1 3```

### è¾“å‡º

```
2
6
3
8```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šCounting Haybale P æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨ä¸€æ¡é•¿ä¸º N çš„â€œå¹²è‰å †â€æ•°è½´ä¸Šï¼Œæ”¯æŒâ€œåŒºé—´åŠ ã€åŒºé—´å’Œã€åŒºé—´æœ€å°å€¼â€ä¸‰ç§æ“ä½œï¼Œè¦æ±‚é«˜æ•ˆå®Œæˆæ‰€æœ‰æŒ‡ä»¤ã€‚  
âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šçº¿æ®µæ ‘ (Segment Tree)ã€åˆ†å— (SQRT-Decomposition)ã€Splay æ ‘ã€åŒºé—´æ•°æ®ç»“æ„

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**  
è¿™é“é¢˜çš„æœ¬è´¨æ˜¯**åŒºé—´ç»´æŠ¤ä¸æŸ¥è¯¢**é—®é¢˜ï¼š  
- æŠŠå†œåœºæŠ½è±¡æˆä¸€æ¡â€œå¹²è‰å †â€æ•°è½´ï¼Œæ¯ä¸ªç‚¹ä¿å­˜å½“å‰å¹²è‰æ•°é‡ã€‚  
- ä¸‰ç§æŒ‡ä»¤ï¼š  
  1. `P l r c` â†’ åŒºé—´ `[l,r]` æ¯ä¸ªä½ç½®åŠ  `c`ï¼ˆæ‰¹é‡æ–½è‚¥ï¼‰ã€‚  
  2. `M l r` â†’ æŸ¥è¯¢åŒºé—´ `[l,r]` çš„æœ€å°å¹²è‰æ•°ã€‚  
  3. `S l r` â†’ æŸ¥è¯¢åŒºé—´ `[l,r]` çš„å¹²è‰æ€»æ•°ã€‚  

æœ€æœ´ç´ çš„åšæ³•æ˜¯â€œæš´åŠ›åŒºé—´æ‰«æâ€ï¼Œå¤æ‚åº¦ O(N) æ¯æ¬¡æ“ä½œï¼Œå½“ N,Q éƒ½æ˜¯ 2Ã—10âµ æ—¶ï¼Œæ€»å¤æ‚åº¦ O(NQ)=4Ã—10Â¹â°ï¼Œæ˜¾ç„¶ TLEã€‚  
äºæ˜¯æˆ‘ä»¬æŠŠç›®å…‰æŠ•å‘**åŒºé—´æ•°æ®ç»“æ„**ï¼š  
- **çº¿æ®µæ ‘**â€”â€”æŠŠæ•°è½´åˆ‡æˆä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ï¼ŒèŠ‚ç‚¹ä¿å­˜åŒºé—´å’Œã€åŒºé—´æœ€å°å€¼ã€æ‡’æ ‡è®°ï¼Œå•æ¬¡æ“ä½œ O(log N)ã€‚  
- **åˆ†å—**â€”â€”æŠŠæ•°è½´åˆ‡æˆ âˆšN ä¸ªâ€œå¹²è‰å›å—â€ï¼Œå—å†…æš´åŠ›ï¼Œå—é—´æ•´ä½“ç»´æŠ¤ï¼Œå•æ¬¡æ“ä½œ O(âˆšN)ã€‚  
- **Splay**â€”â€”ä¼¸å±•æ ‘ï¼ŒæŠŠåŒºé—´æ—‹è½¬åˆ°ä¸€æ£µå­æ ‘ï¼Œå†æ•´ä½“æ“ä½œï¼Œå‡æ‘Š O(log N)ã€‚  

çº¿æ®µæ ‘å°±åƒâ€œæœ›è¿œé•œ+è®¡æ•°å™¨â€ï¼Œä¸€çœ¼çœ‹å°½æ•´ç‰‡å†œåœºï¼›åˆ†å—åƒâ€œåˆ†åŒºç®¡ç†å‘˜â€ï¼Œæ¯å—ç®¡ä¸€æ®µï¼›Splay åƒâ€œä¼¸ç¼©å·å°ºâ€ï¼Œéšæ—¶æŠŠéœ€è¦çš„é•¿åº¦æ‹‰å‡ºæ¥ã€‚  

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼šé¢˜ç›®è¦æ±‚â€œåŒºé—´åŠ ã€åŒºé—´å’Œã€åŒºé—´æœ€å°å€¼â€ï¼Œè¿™æ˜¯**åŒºé—´æ•°æ®ç»“æ„**çš„æ ‡å‡†ä¸‰ä»¶å¥—ã€‚  
2. **çº¿ç´¢2 (æ“ä½œæ¬¡æ•° & æ•°æ®èŒƒå›´)**ï¼šN,Q â‰¤ 2Ã—10âµï¼Œæš´åŠ› O(NQ) å¿… TLEï¼Œå¿…é¡»å¯»æ‰¾**å•æ¬¡ O(log N) æˆ– O(âˆšN)** çš„æ•°æ®ç»“æ„ã€‚  
3. **çº¿ç´¢3 (æ“ä½œç±»å‹)**ï¼šåŒæ—¶éœ€è¦â€œåŒºé—´åŠ â€(lazy) ä¸â€œåŒºé—´æœ€å°å€¼â€(min) çš„**å¤åˆä¿¡æ¯**ï¼Œæš—ç¤ºéœ€è¦æ”¯æŒ**æ‡’æ ‡è®°ä¸‹ä¼ **çš„ç»“æ„ã€‚  

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> 1. çº¿ç´¢1 å‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯åŒºé—´æ“ä½œé¢˜ï¼Œå€™é€‰æ–¹æ¡ˆï¼šçº¿æ®µæ ‘ / åˆ†å— / Splay / æ ‘çŠ¶æ•°ç»„+ç¦»çº¿ã€‚  
> 2. çº¿ç´¢2 æŠŠæš´åŠ›æ–¹æ¡ˆç›´æ¥æ·˜æ±°ï¼Œé”å®š log æˆ– âˆšN çº§åˆ«ã€‚  
> 3. çº¿ç´¢3 è¦æ±‚åŒæ—¶ç»´æŠ¤â€œåŒºé—´å’Œâ€ä¸â€œåŒºé—´æœ€å°å€¼â€ï¼Œæ ‘çŠ¶æ•°ç»„å•ç‹¬ç»´æŠ¤æœ€å°å€¼è¾ƒéº»çƒ¦ï¼Œè€Œ**çº¿æ®µæ ‘å¤©ç”Ÿæ”¯æŒå¤šä¿¡æ¯+æ‡’æ ‡è®°**ï¼Œäºæ˜¯æˆä¸ºé¦–é€‰ã€‚  
> 4. ç»“è®ºï¼š**çº¿æ®µæ ‘åŒºé—´åŠ +åŒºé—´æ±‚å’Œ+åŒºé—´æœ€å°å€¼**æ˜¯æœ€ä½³è·¯å¾„ï¼›è‹¥æƒ³ç»ƒä¹ â€œä¼˜é›…æš´åŠ›â€ï¼Œåˆ†å—ä¹Ÿæ˜¯å¯è¡Œæ›¿ä»£ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼špipiispig (èµï¼š10)
> **ç‚¹è¯„**ï¼š  
> è¿™ä»½é¢˜è§£ç”¨ 60 è¡Œä»£ç å°±æŠŠ**çº¿æ®µæ ‘æ¨¡æ¿**è®²å®Œäº†ï¼š  
> - ç»“æ„ä½“ `tree` åŒæ—¶ä¿å­˜ `sum,min,add`ï¼Œå˜é‡å‘½åç›´è§‚ã€‚  
> - `pushup / pushdown / build / change / querysum / querymin` å…­å¤§å‡½æ•°å„å¸å…¶èŒï¼Œæ³¨é‡Šâ€œçº¿æ®µæ ‘æ˜¯ä¸ªå¦¹å­ï¼Œå¥¹å¾ˆå¯çˆ±â€è®©æ¯ç‡¥çš„æ¨¡æ¿ç¬é—´æœ‰è¶£ã€‚  
> - ç»†èŠ‚åˆ°ä½ï¼šå››å€ç©ºé—´ã€æ‡’æ ‡è®°æ¸…é›¶ã€long long å…¨å¼€ã€‚  
> **å­¦ä¹ ä»·å€¼**ï¼šå¯ä½œä¸ºçº¿æ®µæ ‘å…¥é—¨â€œæœ€çŸ­å¯è¿‡ç‰ˆæœ¬â€ã€‚

### é¢˜è§£äºŒï¼šæµé€ä¸¶ (èµï¼š4)
> **ç‚¹è¯„**ï¼š  
> ä¸é¢˜è§£ä¸€æ€è·¯ä¸€è‡´ï¼Œä½†ä»£ç é£æ ¼æ›´ç´§å‡‘ï¼šå®å®šä¹‰ `lson/rson/ls/rs/mid` å‡å°‘å†—ä½™ï¼›è¯»å…¥ä¼˜åŒ– `read()` æå‡å¸¸æ•°ã€‚  
> **äº®ç‚¹**ï¼šåŒä¸€ç®—æ³•ä¸åŒä»£ç é£æ ¼ï¼Œé€‚åˆå¯¹æ¯”é˜…è¯»ã€‚

### é¢˜è§£ä¸‰ï¼šMelo_DDD (èµï¼š1) â€”â€” åˆ†å—
> **ç‚¹è¯„**ï¼š  
> æŠŠå†œåœºåˆ‡æˆ âˆšN å—ï¼Œç”¨ `add[]` åšå—çº§æ‡’æ ‡è®°ï¼Œå°å—æš´åŠ›æ›´æ–° `minn[]`ã€‚  
> **ä¼˜ç‚¹**ï¼šæ€è·¯ç®€å•ï¼Œä»£ç  150 è¡Œï¼Œæ— é€’å½’ï¼Œè°ƒè¯•å‹å¥½ï¼›**ç¼ºç‚¹**ï¼šå¤æ‚åº¦ O(QâˆšN) ç¨é€Šäºçº¿æ®µæ ‘ã€‚  
> **é€‚åˆ**ï¼šæƒ³ä½“éªŒâ€œä¼˜é›…æš´åŠ›â€æˆ–å¡çº¿æ®µæ ‘å¸¸æ•°çš„åŒå­¦ã€‚

### é¢˜è§£å››ï¼šzhengrunzhe (èµï¼š0) â€”â€” Splay
> **ç‚¹è¯„**ï¼š  
> ç”¨ Splay ç»´æŠ¤åºåˆ—ï¼ŒæŠŠåŒºé—´ `[l,r]` æ—‹è½¬åˆ°ä¸€æ£µå­æ ‘åæ•´ä½“åŠ /æ•´ä½“æŸ¥è¯¢ã€‚  
> **äº®ç‚¹**ï¼šå±•ç¤ºé«˜çº§æ•°æ®ç»“æ„ï¼Œå‡æ‘Š logï¼›**æ³¨æ„**ï¼šå®ç°è¾ƒé•¿ï¼Œé€‚åˆè¿›é˜¶ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆçº¿æ®µæ ‘æœ€ä¼˜è§£ï¼‰

| å…³é”®ç‚¹ | åˆ†æä¸å­¦ä¹ ç¬”è®° |
| --- | --- |
| **1. èŠ‚ç‚¹è®¾è®¡** | æ¯ä¸ªèŠ‚ç‚¹å­˜ `sum,min,add`ï¼Œè¦†ç›–åŒºé—´ `[l,r]`ã€‚ğŸ’¡ ç”¨ç»“æ„ä½“æ‰“åŒ…ï¼Œè¯»å†™æ¸…æ™°ã€‚ |
| **2. æ‡’æ ‡è®°ä¸‹ä¼ ** | `pushdown` æŠŠçˆ¶èŠ‚ç‚¹çš„ `add` åˆ†å‘ç»™å·¦å³å„¿å­ï¼Œå¹¶æ›´æ–° `sum,min`ã€‚ğŸ’¡ æ‡’æ ‡è®°æ˜¯åŒºé—´åŠ çš„â€œæ‰¹é‡å¿«é€’â€ã€‚ |
| **3. åŒºé—´æŸ¥è¯¢/æ›´æ–°** | é€’å½’æˆ–è¿­ä»£åˆ°å®Œå…¨è¦†ç›–çš„åŒºé—´ç›´æ¥è¿”å›/ä¿®æ”¹ï¼›éƒ¨åˆ†è¦†ç›–å…ˆ `pushdown` å†åˆ†æ²»ã€‚ğŸ’¡ ä¿è¯å¤æ‚åº¦ O(log N)ã€‚ |

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“

- **æŠ€å·§Aï¼šæ‡’æ ‡è®°å…¬å¼åŒ–**  
  `sum += len*add`ï¼›`min += add`ï¼›**ç»Ÿä¸€å…¬å¼**é¿å…æ¼æ”¹ã€‚  
- **æŠ€å·§Bï¼šå®/å‡½æ•°å°è£…**  
  `lson, rson, mid` å®å‡å°‘å‡ºé”™ï¼›`pushup, pushdown` å†™æˆå‡½æ•°æ–¹ä¾¿è°ƒè¯•ã€‚  
- **æŠ€å·§Cï¼šlong long å…¨å¼€**  
  1e5Ã—1e5 ä¼šçˆ† intï¼Œ**ä¿é™©å…¨å¼€ 64 ä½**ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯/å¾—åˆ† |
|---|---|---|---|---|
| **æš´åŠ›æ‰«æ** | æ¯æ“ä½œéå†åŒºé—´ | æ€è·¯ç›´æ¥ | O(NQ) å¿… TLE | Nâ‰¤5000ï¼Œ**éƒ¨åˆ†åˆ† 30%** |
| **çº¿æ®µæ ‘** | å¹³è¡¡äºŒå‰æ ‘+æ‡’æ ‡è®° | O(Q log N)ï¼Œæ¨¡æ¿çŸ­ | é€’å½’å¸¸æ•°ç•¥å¤§ | **100% æ ‡å‡†è§£æ³•** |
| **åˆ†å—** | âˆšN å—+å—æ ‡è®° | ä»£ç ç›´è§‚ï¼Œå¸¸æ•°å° | O(QâˆšN)â‰ˆ2Ã—10â· å¯è¿‡ | **100% æ›¿ä»£æ–¹æ¡ˆ** |
| **Splay** | ä¼¸å±•æ ‘åŒºé—´å­æ ‘ | å‡æ‘Š logï¼ŒåŠŸèƒ½å¼º | å®ç°å¤æ‚ | **100% é«˜é˜¶ç‚«æŠ€** |

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆçº¿æ®µæ ‘ï¼‰

```cpp
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
const int N = 2e5 + 10;
struct Node { ll sum, mn, add; } t[N << 2];
#define ls (p<<1)
#define rs (p<<1|1)
int n, m, a[N];

void build(int p, int l, int r) {
    t[p].add = 0;
    if (l == r) { t[p].sum = t[p].mn = a[l]; return; }
    int mid = (l + r) >> 1;
    build(ls, l, mid); build(rs, mid + 1, r);
    t[p].sum = t[ls].sum + t[rs].sum;
    t[p].mn = min(t[ls].mn, t[rs].mn);
}

void pushdown(int p, int l, int r) {
    if (!t[p].add) return;
    int mid = (l + r) >> 1;
    ll v = t[p].add;
    t[ls].add += v; t[rs].add += v;
    t[ls].sum += v * (mid - l + 1);
    t[rs].sum += v * (r - mid);
    t[ls].mn += v; t[rs].mn += v;
    t[p].add = 0;
}

void add(int p, int l, int r, int L, int R, ll v) {
    if (L <= l && r <= R) {
        t[p].add += v; t[p].sum += v * (r - l + 1);
        t[p].mn += v; return;
    }
    pushdown(p, l, r);
    int mid = (l + r) >> 1;
    if (L <= mid) add(ls, l, mid, L, R, v);
    if (R > mid) add(rs, mid + 1, r, L, R, v);
    t[p].sum = t[ls].sum + t[rs].sum;
    t[p].mn = min(t[ls].mn, t[rs].mn);
}

ll querysum(int p, int l, int r, int L, int R) {
    if (L <= l && r <= R) return t[p].sum;
    pushdown(p, l, r);
    int mid = (l + r) >> 1;
    ll res = 0;
    if (L <= mid) res += querysum(ls, l, mid, L, R);
    if (R > mid) res += querysum(rs, mid + 1, r, L, R);
    return res;
}

ll querymin(int p, int l, int r, int L, int R) {
    if (L <= l && r <= R) return t[p].mn;
    pushdown(p, l, r);
    int mid = (l + r) >> 1;
    ll res = 1e18;
    if (L <= mid) res = min(res, querymin(ls, l, mid, L, R));
    if (R > mid) res = min(res, querymin(rs, mid + 1, r, L, R));
    return res;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cin >> n >> m;
    for (int i = 1; i <= n; ++i) cin >> a[i];
    build(1, 1, n);
    while (m--) {
        char op; int l, r; ll x;
        cin >> op >> l >> r;
        if (op == 'P') { cin >> x; add(1, 1, n, l, r, x); }
        else if (op == 'M') cout << querymin(1, 1, n, l, r) << '\n';
        else cout << querysum(1, 1, n, l, r) << '\n';
    }
    return 0;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
- ç»“æ„ä½“ `Node` ä¸€æ¬¡æ€§æ‰“åŒ… `sum,mn,add`ï¼Œç®€æ´ã€‚  
- å® `ls,rs` è®©å·¦å³å„¿å­è°ƒç”¨åƒæ•°ç»„ä¸€æ ·è‡ªç„¶ã€‚  
- `pushdown` ç»Ÿä¸€å¤„ç†æ‡’æ ‡è®°ï¼Œé¿å…å¤šå¤„é‡å¤ä»£ç ã€‚  
- ä¸»å‡½æ•°æŒ‰æŒ‡ä»¤åˆ†æµï¼Œæ¸…æ™°å¯¹åº”é¢˜æ„ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š**â€œåƒç´ å†œåœºâ€åœ¨çº¿æ®µæ ‘ä¸Šæ–½è‚¥**  
- **åœºæ™¯**ï¼š8Ã—16 åƒç´ ç½‘æ ¼ï¼Œæ¯æ ¼ä»£è¡¨ä¸€ä¸ªç”°åœ°ï¼Œæ•°å­—ç”¨åƒç´ å­—ä½“ã€‚  
- **è§’è‰²**ï¼š  
  - ç»¿è‰²åƒç´ ç‰› `ğŸ„` è¡¨ç¤ºå½“å‰é€’å½’åŒºé—´ã€‚  
  - é»„è‰²é—ªç”µ `âš¡` è¡¨ç¤ºæ‡’æ ‡è®°ä¸‹ä¼ ã€‚  
- **äº¤äº’é¢æ¿**ï¼š  
  - æ­¥è¿›/è‡ªåŠ¨/é‡ç½®æŒ‰é’®ï¼Œé€Ÿåº¦æ»‘å— 1â€“10 FPSã€‚  
  - éŸ³æ•ˆï¼šåŒºé—´åŠ æ’­æ”¾â€œå®â€ï¼ŒåŒºé—´æŸ¥è¯¢æ’­æ”¾â€œå®å®â€ã€‚  
- **å…³é”®å¸§**ï¼ˆä»¥ `add(1,4,2)` ä¸ºä¾‹ï¼‰ï¼š  
  1. æ ¹èŠ‚ç‚¹ `[1..n]` é«˜äº®ï¼›æ‡’æ ‡è®° `+2` æ‚¬åœã€‚  
  2. è‹¥å®Œå…¨è¦†ç›–ï¼Œæ•´æ®µæ•°å­— +2 å¹¶é—ªç»¿ï¼›å¦åˆ™åˆ†è£‚åˆ°å·¦å³å­æ ‘ã€‚  
  3. æŸ¥è¯¢æ—¶ï¼ŒèŠ‚ç‚¹é—ªè“ï¼Œè¿”å›ç»“æœå¼¹å‡ºåƒç´ å¯¹è¯æ¡†ã€‚

**æŠ€æœ¯å®ç°**ï¼š  
- Canvas ç”» 16Ã—16 åƒç´ æ–¹å—ï¼Œé¢œè‰²è¡¨ï¼šè‰åœ°ç»¿ã€æ³¥åœŸæ£•ã€é—ªç”µé»„ã€‚  
- ç”¨ `requestAnimationFrame` æ§åˆ¶å¸§ç‡ï¼›æ‡’æ ‡è®°åŠ¨ç”»ç”¨ CSS translateY æ¨¡æ‹Ÿâ€œæ‰è½â€ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
çº¿æ®µæ ‘èƒ½åŒæ—¶ç»´æŠ¤â€œåŒºé—´åŠ  + åŒºé—´æœ€å€¼/å’Œâ€çš„ç»„åˆï¼Œä¹Ÿé€‚ç”¨äºï¼š  
1. **åŒºé—´ä¹˜ + åŒºé—´åŠ  + åŒºé—´å’Œ**ï¼ˆP3373 çº¿æ®µæ ‘ 2ï¼‰  
2. **åŒºé—´æŸ“è‰² + åŒºé—´é¢œè‰²æ•°**ï¼ˆP1972 HHçš„é¡¹é“¾ï¼‰  
3. **åŒºé—´å¼€æ–¹ + åŒºé—´å’Œ**ï¼ˆP4145 èŠ±ç¥æ¸¸å†å„å›½ï¼‰

### æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| **P3372** çº¿æ®µæ ‘æ¨¡æ¿1 | çº¯åŒºé—´åŠ +åŒºé—´å’Œï¼Œå·©å›ºåŸºç¡€ã€‚ |
| **P3373** çº¿æ®µæ ‘æ¨¡æ¿2 | åŒºé—´ä¹˜+åŠ ï¼Œç»ƒä¹ åŒæ‡’æ ‡è®°ã€‚ |
| **P1972** HHçš„é¡¹é“¾ | ç¦»çº¿+æ ‘çŠ¶æ•°ç»„/åœ¨çº¿ä¸»å¸­æ ‘ï¼Œæ„Ÿå—åŒºé—´ç»Ÿè®¡çš„å¤šç§æ€è·¯ã€‚ |
| **P4145** èŠ±ç¥æ¸¸å†å„å›½ | åŒºé—´å¼€æ–¹æš´åŠ›å¯è¿‡ï¼Œä½“ä¼šå‰ªæä¸æ•°æ®ç»“æ„æƒè¡¡ã€‚ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **pipiispig çš„è°ƒè¯•å¿ƒå¾—**ï¼šâ€œçº¿æ®µæ ‘å››å€ç©ºé—´åˆ«å¿˜äº†ï¼æˆ‘ RE è¿‡ä¸€æ¬¡æ‰å‘ç°ã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šRE å¸¸å› æ•°ç»„è¶Šç•Œï¼Œå…»æˆâ€œå†™å®Œå…ˆå¯¹æ‹å°æ•°æ®â€çš„ä¹ æƒ¯ï¼Œèƒ½çœä¸‹å¤§æŠŠæŸ¥é”™æ—¶é—´ã€‚

---

<conclusion>
ä»Šå¤©æˆ‘ä»¬ä¸€èµ·åœ¨â€œåƒç´ å†œåœºâ€é‡Œå­¦ä¼šäº†ç”¨çº¿æ®µæ ‘é«˜æ•ˆæ–½è‚¥ã€ç»Ÿè®¡ã€æ‰¾æœ€å°å€¼ã€‚è®°ä½ï¼š  
- **æš´åŠ›**æ˜¯æ€è€ƒçš„èµ·ç‚¹ï¼Œ**æ•°æ®ç»“æ„**æ˜¯æ•ˆç‡çš„ç¿…è†€ã€‚  
- **æ‡’æ ‡è®°**æ˜¯åŒºé—´åŠ çš„â€œæ‰¹é‡å¿«é€’â€ï¼Œ**pushdown** æ˜¯ç­¾æ”¶ã€‚  
ä¸‹æ¬¡é‡åˆ°åŒºé—´é¢˜ï¼Œå…ˆæƒ³â€œèƒ½ä¸èƒ½çº¿æ®µæ ‘ï¼Ÿâ€â€”â€”ç¥å„ä½åœ¨ç®—æ³•ç”°é‡é‡Œç»§ç»­ä¸°æ”¶ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š111.75ç§’
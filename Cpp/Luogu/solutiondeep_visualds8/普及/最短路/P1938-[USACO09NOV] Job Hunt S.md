# é¢˜ç›®ä¿¡æ¯

# [USACO09NOV] Job Hunt S

## é¢˜ç›®æè¿°

Bessie is running out of money and is searching for jobs. Farmer John knows this and wants the cows to travel around so he has imposed a rule that his cows can only make D (1 <= D <= 1,000) dollars in a city before they must work in another city. Bessie can, however, return to a city after working elsewhere for a while and again earn the D dollars maximum in that city. There is no limit on the number of times Bessie can do this.

Bessie's world comprises P (1 <= P <= 150) one-way paths connecting C (2 <= C <= 220) cities conveniently numbered 1..C. Bessie is currently in city S (1 <= S <= C). Path i runs one-way from city A\_i to city B\_i (1 <= A\_i <= C; 1 <= B\_i <= C) and costs nothing to traverse.

To help Bessie, Farmer John will give her access to his private jet service. This service features F (1 <= F <= 350) routes, each of which is a one way flight from one city J\_i to a another K\_i (1 <= J\_i <= C; 1 <= K\_i <= C) and which costs T\_i (1 <= T\_i <= 50,000) dollars. Bessie can pay for the tickets from future earnings if she doesn't have the cash on hand.

Bessie can opt to retire whenever and wherever she wants. Given an unlimited amount of time, what is the most money that Bessie can make presuming she can make the full D dollars in each city she can travel to?  Print -1 if there is no limit to this amount.

å¥¶ç‰›ä»¬æ­£åœ¨æ‰¾å·¥ä½œã€‚å†œåœºä¸»çº¦ç¿°çŸ¥é“åï¼Œé¼“åŠ±å¥¶ç‰›ä»¬å››å¤„ç¢°ç¢°è¿æ°”ã€‚è€Œä¸”ä»–è¿˜åŠ äº†ä¸€æ¡è¦æ±‚ï¼šä¸€å¤´ç‰›åœ¨ä¸€ä¸ªåŸå¸‚æœ€å¤šåªèƒ½èµšDï¼ˆ1â‰¤Dâ‰¤1000ï¼‰ç¾å…ƒï¼Œç„¶åå®ƒå¿…é¡»åˆ°å¦ä¸€åº§åŸå¸‚å·¥ä½œã€‚å½“ç„¶ï¼Œå®ƒå¯ä»¥åœ¨åˆ«å¤„å·¥ä½œä¸€é˜µå­ååˆå›åˆ°åŸæ¥çš„åŸå¸‚å†æœ€å¤šèµšDç¾å…ƒã€‚è€Œä¸”è¿™æ ·çš„å¾€è¿”æ¬¡æ•°æ²¡æœ‰é™åˆ¶ã€‚

åŸå¸‚é—´æœ‰Pï¼ˆ1â‰¤Pâ‰¤150ï¼‰æ¡å•å‘è·¯å¾„è¿æ¥ï¼Œå…±æœ‰Cï¼ˆ2â‰¤Câ‰¤220ï¼‰åº§åŸå¸‚ï¼Œç¼–å·ä»1åˆ°Cã€‚å¥¶ç‰›è´èŒœå½“å‰å¤„åœ¨åŸå¸‚Sï¼ˆ1â‰¤Sâ‰¤Cï¼‰ã€‚è·¯å¾„iä»åŸå¸‚A\_iåˆ°åŸå¸‚B\_iï¼ˆ1â‰¤A\_iâ‰¤Cï¼Œ1â‰¤B\_iâ‰¤Cï¼‰ï¼Œåœ¨è·¯å¾„ä¸Šè¡Œèµ°ä¸ç”¨ä»»ä½•èŠ±è´¹ã€‚

ä¸ºäº†å¸®åŠ©è´èŒœï¼Œçº¦ç¿°è®©å®ƒä½¿ç”¨ä»–çš„ç§äººé£æœºæœåŠ¡ã€‚è¿™é¡¹æœåŠ¡æœ‰Fæ¡ï¼ˆ1â‰¤Fâ‰¤350ï¼‰å•å‘èˆªçº¿ï¼Œæ¯æ¡èˆªçº¿æ˜¯ä»åŸå¸‚J\_ié£åˆ°å¦ä¸€åº§åŸå¸‚K\_iï¼ˆ1â‰¤J\_iâ‰¤Cï¼Œ1â‰¤K\_iâ‰¤Cï¼‰ï¼Œè´¹ç”¨æ˜¯T\_iï¼ˆ1â‰¤T\_iâ‰¤50000ï¼‰ç¾å…ƒã€‚å¦‚æœè´èŒœæ‰‹ä¸­æ²¡æœ‰ç°é’±ï¼Œå¯ä»¥ç”¨ä»¥åèµšçš„é’±æ¥ä»˜æœºç¥¨é’±ã€‚

è´èŒœå¯ä»¥é€‰æ‹©åœ¨ä»»ä½•æ—¶å€™ï¼Œåœ¨ä»»ä½•åŸå¸‚é€€ä¼‘ã€‚å¦‚æœåœ¨å·¥ä½œæ—¶é—´ä¸Šä¸åšé™åˆ¶ï¼Œè´èŒœæ€»å…±å¯ä»¥èµšå¤šå°‘é’±å‘¢ï¼Ÿå¦‚æœèµšçš„é’±ä¹Ÿä¸ä¼šå‡ºç°é™åˆ¶ï¼Œå°±è¾“å‡º-1ã€‚


## è¯´æ˜/æç¤º

This world has five cities, three paths and two jet routes. Bessie starts out in city 1, and she can only make 100 dollars in each city before moving on.


Bessie can travel from city 1 to city 5 to city 2 to city 3, and make a total of 4\*100 - 150 = 250 dollars.


Source: USACO 2009 November Silver

è¿™ä¸ªä¸–ç•Œä¸Šæœ‰äº”ä¸ªåŸå¸‚ï¼Œä¸‰æ¡å•å‘è·¯å¾„å’Œä¸¤æ¡å•å‘èˆªçº¿ã€‚è´èŒœä»ä¸€å·åŸå¸‚å¼€å§‹å¥¹çš„æ—…è¡Œï¼Œå¥¹åœ¨ç¦»å¼€ä¸€ä¸ªåŸå¸‚å‰æœ€å¤šåªèƒ½åœ¨è¿™ä¸ªåŸå¸‚èµš100ç¾å…ƒã€‚


è´èŒœå¯ä»¥é€šè¿‡ä»ä¸€å·åŸå¸‚-->äº”å·åŸå¸‚-->äºŒå·åŸå¸‚-->ä¸‰å·åŸå¸‚çš„æ—…è¡Œèµšåˆ°4\*100-150=250ç¾å…ƒã€‚


(æ³¨:åœ¨å››ä¸ªåŸå¸‚å„èµš100ç¾å…ƒ,ä»äº”å·åŸå¸‚é£åˆ°äºŒå·åŸå¸‚èŠ±æ‰150ç¾å…ƒ)


æ¥æº:USACO 2009 åä¸€æœˆé“¶ç»„


## æ ·ä¾‹ #1

### è¾“å…¥

```
100 3 5 2 1
1 5
2 3
1 4
5 2 150
2 5 120
```

### è¾“å‡º

```
250```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šUSACO09NOV Job Hunt æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> æ¬¢è¿æ¥åˆ°æ´›è¯­äº‘ç¬ºçš„ç®—æ³•è¯¾å ‚ï¼ä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·æŒ‘æˆ˜çš„æ˜¯ **USACO 2009 November Silver** çš„ **Job Hunt** é—®é¢˜ã€‚è¿™é“é¢˜çœ‹ä¼¼ç®€å•ï¼Œå´è•´å«ç€å›¾è®ºä¸­â€œç‚¹æƒè½¬è¾¹æƒâ€çš„ç»å…¸æ€æƒ³ï¼Œä»¥åŠæœ€é•¿è·¯å¾„ä¸è´Ÿç¯æ£€æµ‹çš„å·§å¦™ç»“åˆã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ­å¼€å®ƒçš„é¢çº±ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

### âœ¨ æ ¸å¿ƒæŒ‘æˆ˜
è¿™é“é¢˜çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºï¼š
1. **ç‚¹æƒä¸è¾¹æƒçš„æ··åˆ**ï¼šæ¯ä¸ªåŸå¸‚æœ‰ä¸€ä¸ªå›ºå®šçš„â€œæ”¶ç›Šâ€Dï¼ˆç‚¹æƒï¼‰ï¼Œè€Œé£æœºèˆªçº¿æœ‰â€œæˆæœ¬â€Tï¼ˆè¾¹æƒï¼‰ã€‚å¦‚ä½•ç»Ÿä¸€å¤„ç†è¿™ä¸¤ç§æƒå€¼ï¼Ÿ
2. **æ— é™å¾ªç¯çš„é™·é˜±**ï¼šå¦‚æœå›¾ä¸­å­˜åœ¨ä¸€ä¸ªâ€œæ­£æƒç¯â€ï¼ˆå³ç»•ä¸€åœˆåå‡€æ”¶ç›Šä¸ºæ­£ï¼‰ï¼Œå¥¶ç‰›å°±å¯ä»¥æ— é™èµšé’±ï¼Œæ­¤æ—¶åº”è¾“å‡º `-1`ã€‚
3. **æœ€é•¿è·¯å¾„çš„æ±‚è§£**ï¼šåœ¨ç¡®ä¿æ²¡æœ‰æ­£æƒç¯çš„å‰æä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»èµ·ç‚¹åŸå¸‚ `S` å‡ºå‘ï¼Œèƒ½å¤Ÿè·å¾—çš„æœ€å¤§æ”¶ç›Šã€‚

### âœ¨ æ ¸å¿ƒç®—æ³•æ ‡ç­¾
- **å›¾è®º**ï¼ˆGraph Theoryï¼‰
- **ç‚¹æƒè½¬è¾¹æƒ**ï¼ˆTransforming Vertex Weights to Edge Weightsï¼‰
- **æœ€é•¿è·¯å¾„**ï¼ˆLongest Pathï¼‰
- **è´Ÿç¯æ£€æµ‹**ï¼ˆNegative Cycle Detectionï¼‰
- **SPFA / Bellman-Ford**ï¼ˆShortest Path Faster Algorithmï¼‰

### ğŸ—£ï¸ åˆæ­¥åˆ†æ
> ä»é¢˜ç›®æè¿°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æç‚¼å‡ºä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š
> 1. **åŸå¸‚é—´çš„ç§»åŠ¨**ï¼šæœ‰å…è´¹çš„é“è·¯ï¼ˆæ— æˆæœ¬ï¼‰å’Œä»˜è´¹çš„é£æœºèˆªçº¿ï¼ˆæœ‰æˆæœ¬ï¼‰ã€‚
> 2. **æ”¶ç›Šè§„åˆ™**ï¼šæ¯åˆ°ä¸€ä¸ªæ–°åŸå¸‚ï¼Œå¯ä»¥èµšå– `D` ç¾å…ƒï¼Œä½†é£æœºç¥¨çš„è´¹ç”¨ `T` ä¼šä»æœªæ¥æ”¶ç›Šä¸­æ‰£é™¤ã€‚
> 3. **æ— é™æ”¶ç›Šçš„æ¡ä»¶**ï¼šå¦‚æœå­˜åœ¨ä¸€ä¸ªç¯è·¯ï¼Œä½¿å¾—ç»•ä¸€åœˆåçš„å‡€æ”¶ç›Šä¸ºæ­£ï¼Œåˆ™å¯ä»¥æ— é™èµšé’±ã€‚

> **æ ¸å¿ƒç®—æ³•é€‰æ‹©**ï¼šç”±äºæˆ‘ä»¬éœ€è¦å¤„ç†å¸¦æœ‰è´Ÿæƒè¾¹ï¼ˆé£æœºèˆªçº¿å¯èƒ½æ˜¯è´Ÿæƒï¼‰çš„å›¾ï¼Œå¹¶æ£€æµ‹æ˜¯å¦å­˜åœ¨æ­£æƒç¯ï¼ˆå³è´Ÿæƒç¯çš„ç›¸åï¼‰ï¼Œ**SPFAï¼ˆShortest Path Faster Algorithmï¼‰** æˆ– **Bellman-Ford** æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚å®ƒä»¬èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†è´Ÿæƒè¾¹ï¼Œå¹¶é€šè¿‡æ¾å¼›æ“ä½œæ£€æµ‹è´Ÿç¯ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼šé¢˜ç›®è¦æ±‚â€œæœ€å¤šå¯ä»¥èµšå¤šå°‘é’±â€ï¼Œè¿™æ˜¯ä¸€ä¸ª**æœ€é•¿è·¯å¾„**é—®é¢˜ã€‚ç„¶è€Œï¼Œæœ€é•¿è·¯å¾„åœ¨ä¸€èˆ¬å›¾ä¸­æ˜¯NPéš¾çš„ï¼Œä½†è¿™é‡Œçš„å›¾æ˜¯DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰æˆ–å¯ä»¥é€šè¿‡è´Ÿç¯æ£€æµ‹ç®€åŒ–ã€‚
2. **çº¿ç´¢2 (ç‚¹æƒä¸è¾¹æƒçš„ç»Ÿä¸€)**ï¼šæ¯ä¸ªåŸå¸‚çš„æ”¶ç›Š `D` å¯ä»¥çœ‹ä½œæ˜¯ä»è¯¥åŸå¸‚å‡ºå‘çš„æ‰€æœ‰è¾¹çš„â€œé™„åŠ æ”¶ç›Šâ€ã€‚å› æ­¤ï¼Œå¯ä»¥å°†ç‚¹æƒ `D` è½¬ç§»åˆ°å‡ºè¾¹ä¸Šï¼š
   - å…è´¹é“è·¯ï¼šè¾¹æƒä¸º `D`ï¼ˆå› ä¸ºåˆ°è¾¾æ–°åŸå¸‚èµš `D`ï¼‰ã€‚
   - é£æœºèˆªçº¿ï¼šè¾¹æƒä¸º `D - T`ï¼ˆèµš `D` ä½†èŠ± `T`ï¼‰ã€‚
3. **çº¿ç´¢3 (æ— é™æ”¶ç›Šçš„æ¡ä»¶)**ï¼šå¦‚æœå­˜åœ¨ä¸€ä¸ªç¯è·¯ï¼Œä½¿å¾—ç¯è·¯ä¸Šçš„è¾¹æƒå’Œä¸ºæ­£ï¼ˆå³ `D - T1 + D - T2 + ... > 0`ï¼‰ï¼Œåˆ™å¯ä»¥æ— é™èµšé’±ã€‚è¿™ç­‰ä»·äºæ£€æµ‹å›¾ä¸­æ˜¯å¦å­˜åœ¨**æ­£æƒç¯**ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> å¥½äº†ï¼Œä¾¦æ¢å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬æ”¶é›†åˆ°äº†å‡ æ¡å…³é”®çº¿ç´¢ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åƒæ‹¼å›¾ä¸€æ ·æŠŠå®ƒä»¬ç»„åˆèµ·æ¥ï¼š
> 1. **çº¿ç´¢1**å‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªâ€œæœ€ä¼˜åŒ–â€é—®é¢˜ï¼Œéœ€è¦æ±‚æœ€é•¿è·¯å¾„ã€‚
> 2. **çº¿ç´¢2**æç¤ºæˆ‘ä»¬å¯ä»¥é€šè¿‡â€œç‚¹æƒè½¬è¾¹æƒâ€å°†é—®é¢˜è½¬åŒ–ä¸ºæ ‡å‡†çš„è¾¹æƒé—®é¢˜ã€‚
> 3. **çº¿ç´¢3**æé†’æˆ‘ä»¬ï¼Œå¦‚æœå­˜åœ¨æ­£æƒç¯ï¼Œç­”æ¡ˆå°±æ˜¯ `-1`ã€‚
> 4. **ç»“è®º**ï¼šä½¿ç”¨ **SPFA** æˆ– **Bellman-Ford** ç®—æ³•ï¼Œå°†ç‚¹æƒè½¬åŒ–ä¸ºè¾¹æƒåï¼Œæ±‚è§£æœ€é•¿è·¯å¾„ï¼Œå¹¶é€šè¿‡æ¾å¼›æ¬¡æ•°æ£€æµ‹æ­£æƒç¯ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šBelieve_R_ (èµï¼š45)
**ç‚¹è¯„**ï¼š
è¿™ä»½é¢˜è§£ä»¥æ¸…æ™°çš„æ€è·¯è§£é‡Šäº†â€œç‚¹æƒè½¬è¾¹æƒâ€çš„æ ¸å¿ƒæ€æƒ³ï¼Œå°†å…è´¹é“è·¯çš„è¾¹æƒè®¾ä¸º `D`ï¼Œé£æœºèˆªçº¿çš„è¾¹æƒè®¾ä¸º `D - T`ã€‚ç„¶åä½¿ç”¨ **SPFA** ç®—æ³•æ±‚è§£æœ€é•¿è·¯å¾„ï¼Œå¹¶é€šè¿‡å…¥é˜Ÿæ¬¡æ•°æ£€æµ‹æ­£æƒç¯ã€‚ä»£ç ç®€æ´é«˜æ•ˆï¼Œå˜é‡å‘½åè§„èŒƒï¼Œæ˜¯å­¦ä¹ å›¾è®ºå»ºæ¨¡çš„ä¼˜ç§€èŒƒä¾‹ã€‚

### é¢˜è§£äºŒï¼šTOM_é—« (èµï¼š22)
**ç‚¹è¯„**ï¼š
è¿™ä»½é¢˜è§£é‡‡ç”¨äº†å¦ä¸€ç§ç»å…¸æ€è·¯ï¼š**å°†è¾¹æƒå–ååæ±‚æœ€çŸ­è·¯**ã€‚é€šè¿‡å°†è¾¹æƒè®¾ä¸º `-D` å’Œ `T - D`ï¼Œå°†æœ€é•¿è·¯å¾„é—®é¢˜è½¬åŒ–ä¸ºæœ€çŸ­è·¯é—®é¢˜ï¼Œç„¶åä½¿ç”¨ **Bellman-Ford** ç®—æ³•æ±‚è§£ã€‚ä»£ç ä¸­åŠ å…¥äº†ä¼˜åŒ–ï¼ˆå¦‚ `pd` æ ‡å¿—æå‰ç»ˆæ­¢ï¼‰ï¼Œä½“ç°äº†è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚

### é¢˜è§£ä¸‰ï¼šxMinh (èµï¼š5)
**ç‚¹è¯„**ï¼š
è¿™ä»½é¢˜è§£ä½¿ç”¨äº† **Floyd-Warshall** ç®—æ³•æ±‚è§£æœ€é•¿è·¯å¾„ï¼Œè™½ç„¶æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼ˆO(C^3)ï¼‰ï¼Œä½†å¯¹äºå°æ•°æ®èŒƒå›´ï¼ˆC â‰¤ 220ï¼‰æ˜¯å¯æ¥å—çš„ã€‚ä»£ç ä¸­å·§å¦™åœ°é€šè¿‡ `f[i][j] + f[j][i] - 2*D > 0` æ£€æµ‹æ­£æƒç¯ï¼Œå±•ç¤ºäº† Floyd ç®—æ³•çš„çµæ´»æ€§ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1. **å…³é”®ç‚¹1ï¼šç‚¹æƒè½¬è¾¹æƒ**
   - **åˆ†æ**ï¼šå°†æ¯ä¸ªåŸå¸‚çš„æ”¶ç›Š `D` è½¬ç§»åˆ°å‡ºè¾¹ä¸Šï¼š
     - å…è´¹é“è·¯ `u -> v`ï¼šè¾¹æƒä¸º `D`ï¼ˆåˆ°è¾¾ `v` èµš `D`ï¼‰ã€‚
     - é£æœºèˆªçº¿ `u -> v`ï¼šè¾¹æƒä¸º `D - T`ï¼ˆèµš `D` ä½†èŠ± `T`ï¼‰ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¿™æ˜¯å›¾è®ºä¸­å¤„ç†ç‚¹æƒçš„ç»å…¸æŠ€å·§ï¼Œå°†å¤æ‚é—®é¢˜è½¬åŒ–ä¸ºæ ‡å‡†è¾¹æƒé—®é¢˜ã€‚

2. **å…³é”®ç‚¹2ï¼šæœ€é•¿è·¯å¾„ä¸æ­£ç¯æ£€æµ‹**
   - **åˆ†æ**ï¼šä½¿ç”¨ **SPFA** æˆ– **Bellman-Ford** ç®—æ³•ï¼š
     - åˆå§‹åŒ– `dis[S] = D`ï¼ˆèµ·ç‚¹å·²èµš `D`ï¼‰ã€‚
     - æ¾å¼›æ“ä½œï¼š`dis[v] = max(dis[v], dis[u] + w)`ã€‚
     - æ­£ç¯æ£€æµ‹ï¼šå¦‚æœæŸä¸ªç‚¹çš„æ¾å¼›æ¬¡æ•°è¶…è¿‡ `C` æ¬¡ï¼Œè¯´æ˜å­˜åœ¨æ­£ç¯ï¼Œè¾“å‡º `-1`ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ­£ç¯æ£€æµ‹æ˜¯è´Ÿç¯æ£€æµ‹çš„é•œåƒï¼Œé€šè¿‡æ¾å¼›æ¬¡æ•°å®ç°ã€‚

3. **å…³é”®ç‚¹3ï¼šæ•°æ®ç»“æ„é€‰æ‹©**
   - **åˆ†æ**ï¼šä½¿ç”¨ **é‚»æ¥è¡¨** å­˜å‚¨å›¾ï¼Œç©ºé—´æ•ˆç‡é«˜ï¼ˆO(P + F)ï¼‰ã€‚
   - **é˜Ÿåˆ—ä¼˜åŒ–**ï¼šSPFA ä½¿ç”¨é˜Ÿåˆ—å®ç°ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ O(M)ï¼Œæœ€å O(MN)ã€‚
   - ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé‚»æ¥è¡¨ + é˜Ÿåˆ—æ˜¯å¤„ç†ç¨€ç–å›¾çš„é«˜æ•ˆç»„åˆã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šç‚¹æƒè½¬è¾¹æƒ**ï¼šå°†ç‚¹æƒ `D` è½¬åŒ–ä¸ºå‡ºè¾¹æƒï¼Œç»Ÿä¸€å¤„ç†æ”¶ç›Šä¸æˆæœ¬ã€‚
- **æŠ€å·§Bï¼šæœ€é•¿è·¯å¾„çš„æ¾å¼›**ï¼šå°†æœ€çŸ­è·¯å¾„çš„ `min` æ”¹ä¸º `max`ï¼Œé€‚åº”æœ€é•¿è·¯å¾„éœ€æ±‚ã€‚
- **æŠ€å·§Cï¼šæ­£ç¯æ£€æµ‹**ï¼šé€šè¿‡æ¾å¼›æ¬¡æ•°æˆ–å…¥é˜Ÿæ¬¡æ•°æ£€æµ‹æ­£ç¯ï¼Œç¡®ä¿ç®—æ³•æ­£ç¡®æ€§ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ
| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ä¸åˆ†æ | é€‚ç”¨åœºæ™¯ / å¾—åˆ†é¢„æœŸ |
| :--- | :--- | :--- | :--- | :--- |
| **SPFAï¼ˆæœ€é•¿è·¯å¾„ï¼‰** | ç‚¹æƒè½¬è¾¹æƒåï¼Œä½¿ç”¨ SPFA æ±‚æœ€é•¿è·¯å¾„å¹¶æ£€æµ‹æ­£ç¯ã€‚ | é«˜æ•ˆï¼Œä»£ç ç®€æ´ï¼Œé€‚åˆç¨€ç–å›¾ã€‚ | æœ€åæ—¶é—´å¤æ‚åº¦ O(MN)ã€‚ | æœ¬é¢˜æœ€ä½³å®è·µï¼Œ**100%** åˆ†æ•°ã€‚ |
| **Bellman-Ford** | ç‚¹æƒè½¬è¾¹æƒåï¼Œä½¿ç”¨ Bellman-Ford æ±‚æœ€é•¿è·¯å¾„å¹¶æ£€æµ‹æ­£ç¯ã€‚ | ç¨³å®šï¼Œæ˜“äºç†è§£ã€‚ | æ—¶é—´å¤æ‚åº¦ O(MN)ï¼Œç•¥æ…¢äº SPFAã€‚ | é€‚åˆæ•™å­¦æ¼”ç¤ºï¼Œ**100%** åˆ†æ•°ã€‚ |
| **Floyd-Warshall** | ä½¿ç”¨ Floyd ç®—æ³•æ±‚è§£æœ€é•¿è·¯å¾„å¹¶æ£€æµ‹æ­£ç¯ã€‚ | ä»£ç çŸ­å°ï¼Œé€‚åˆå°æ•°æ®ã€‚ | æ—¶é—´å¤æ‚åº¦ O(C^3)ï¼Œæ— æ³•å¤„ç†å¤§æ•°æ®ã€‚ | C â‰¤ 100 æ—¶å¯ç”¨ï¼Œ**100%** åˆ†æ•°ã€‚ |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> 1. **èµ·ç‚¹ï¼šæš´åŠ›æœç´¢çš„å›°å¢ƒ**ï¼šç›´æ¥æšä¸¾æ‰€æœ‰è·¯å¾„æ˜¾ç„¶ä¸å¯è¡Œï¼ˆæŒ‡æ•°çº§å¤æ‚åº¦ï¼‰ã€‚
> 2. **å‘ç°ç“¶é¢ˆ**ï¼šç‚¹æƒä¸è¾¹æƒçš„æ··åˆå¯¼è‡´æ— æ³•ç›´æ¥åº”ç”¨æ ‡å‡†ç®—æ³•ã€‚
> 3. **ä¼˜åŒ–çš„é’¥åŒ™**ï¼šç‚¹æƒè½¬è¾¹æƒåï¼Œé—®é¢˜è½¬åŒ–ä¸ºæ ‡å‡†æœ€é•¿è·¯å¾„ã€‚
> 4. **æ¨¡å‹çš„å‡å**ï¼šé€šè¿‡æ¾å¼›æ¬¡æ•°æ£€æµ‹æ­£ç¯ï¼Œç¡®ä¿ç®—æ³•æ­£ç¡®æ€§ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
**è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†å¤šä¸ªä¼˜è´¨é¢˜è§£çš„æ€è·¯ï¼Œé‡‡ç”¨ **SPFA** ç®—æ³•æ±‚è§£æœ€é•¿è·¯å¾„å¹¶æ£€æµ‹æ­£ç¯ã€‚
```cpp
#include <bits/stdc++.h>
using namespace std;

const int MAXN = 225;
const int MAXM = 1005;

struct Edge {
    int to, next, w;
} edges[MAXM];
int head[MAXN], cnt;
int dis[MAXN], in[MAXN];
bool vis[MAXN];
int d, p, c, f, s;

void add_edge(int u, int v, int w) {
    edges[++cnt] = {v, head[u], w};
    head[u] = cnt;
}

bool spfa() {
    queue<int> q;
    memset(dis, -0x3f, sizeof(dis));
    dis[s] = d;
    q.push(s);
    vis[s] = true;
    while (!q.empty()) {
        int u = q.front();
        q.pop();
        vis[u] = false;
        for (int i = head[u]; i; i = edges[i].next) {
            int v = edges[i].to, w = edges[i].w;
            if (dis[v] < dis[u] + w) {
                dis[v] = dis[u] + w;
                if (++in[v] > c) return false; // æ­£ç¯æ£€æµ‹
                if (!vis[v]) {
                    q.push(v);
                    vis[v] = true;
                }
            }
        }
    }
    return true;
}

int main() {
    scanf("%d%d%d%d%d", &d, &p, &c, &f, &s);
    for (int i = 1; i <= p; ++i) {
        int u, v;
        scanf("%d%d", &u, &v);
        add_edge(u, v, d); // å…è´¹é“è·¯ï¼šèµš d
    }
    for (int i = 1; i <= f; ++i) {
        int u, v, t;
        scanf("%d%d%d", &u, &v, &t);
        add_edge(u, v, d - t); // é£æœºèˆªçº¿ï¼šèµš d - t
    }
    if (!spfa()) {
        printf("-1\n");
    } else {
        int ans = 0;
        for (int i = 1; i <= c; ++i) ans = max(ans, dis[i]);
        printf("%d\n", ans);
    }
    return 0;
}
```

### é¢˜è§£ä¸€ï¼šBelieve_R_ ä»£ç ç‰‡æ®µèµæ
**äº®ç‚¹**ï¼šæ¸…æ™°çš„ç‚¹æƒè½¬è¾¹æƒé€»è¾‘ï¼ŒSPFA å®ç°ç®€æ´ã€‚
```cpp
void Spfa() {
    q.push(s);
    w[s] = d;
    vis[s] = 1;
    while (!q.empty()) {
        int u = q.top(); q.pop();
        vis[u] = 0;
        if (++cnt[u] > n) { printf("-1\n"); exit(0); }
        for (int i = head[u]; i; i = nex[i]) {
            int v = to[i];
            if (w[v] < w[u] + dis[i]) {
                w[v] = w[u] + dis[i];
                if (!vis[v]) { q.push(v); vis[v] = 1; }
            }
        }
    }
}
```

### é¢˜è§£äºŒï¼šxMinh Floyd ä»£ç ç‰‡æ®µèµæ
**äº®ç‚¹**ï¼šFloyd ç®—æ³•æ£€æµ‹æ­£ç¯çš„å·§å¦™æ–¹æ³•ã€‚
```cpp
for (int i = 1; i <= c; ++i)
    for (int j = 1; j <= c; ++j)
        if (f[s][i] + f[i][j] + f[j][s] - 3 * d > 0) {
            cout << -1;
            return 0;
        }
```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜
**â€œåƒç´ å¥¶ç‰›çš„å¤§å†’é™©â€**ï¼š8ä½åƒç´ é£æ ¼çš„å¥¶ç‰›åœ¨ç½‘æ ¼åŒ–çš„åŸå¸‚ä¸­æ—…è¡Œï¼Œæ¯æ¡è¾¹ä»¥åƒç´ ç®­å¤´è¡¨ç¤ºï¼Œè¾¹æƒä»¥é‡‘å¸å›¾æ ‡æ˜¾ç¤ºã€‚

### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹
- **ç‚¹æƒè½¬è¾¹æƒ**ï¼šåŠ¨æ€å±•ç¤ºå¦‚ä½•å°†åŸå¸‚çš„æ”¶ç›Š `D` è½¬ç§»åˆ°å‡ºè¾¹ä¸Šã€‚
- **SPFA æ¾å¼›è¿‡ç¨‹**ï¼šåƒç´ å¥¶ç‰›æ²¿è¾¹ç§»åŠ¨ï¼Œè¾¹æƒæ›´æ–°æ—¶é‡‘å¸å›¾æ ‡è·³åŠ¨ã€‚
- **æ­£ç¯æ£€æµ‹**ï¼šå½“æŸä¸ªç‚¹çš„æ¾å¼›æ¬¡æ•°è¶…è¿‡ `C` æ¬¡ï¼Œå±å¹•é—ªçƒçº¢è‰²è­¦å‘Šï¼Œæ’­æ”¾â€œå¤±è´¥â€éŸ³æ•ˆã€‚

### è®¾è®¡æ€è·¯
- **åƒç´ é£æ ¼**ï¼šä½¿ç”¨ 8x8 åƒç´ ç½‘æ ¼è¡¨ç¤ºåŸå¸‚å’Œè¾¹ï¼Œé¢œè‰²åŒºåˆ†é“è·¯ï¼ˆç»¿è‰²ï¼‰å’Œèˆªçº¿ï¼ˆè“è‰²ï¼‰ã€‚
- **éŸ³æ•ˆæç¤º**ï¼š
  - æ¾å¼›æˆåŠŸï¼šæ¸…è„†çš„â€œå®â€å£°ã€‚
  - æ­£ç¯æ£€æµ‹ï¼šæ€¥ä¿ƒçš„â€œè­¦æŠ¥â€å£°ã€‚
- **äº¤äº’æ§åˆ¶**ï¼šæä¾›â€œå•æ­¥æ‰§è¡Œâ€å’Œâ€œè‡ªåŠ¨æ’­æ”¾â€æŒ‰é’®ï¼Œé€Ÿåº¦å¯è°ƒã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **ç‚¹æƒè½¬è¾¹æƒ**ï¼šé€‚ç”¨äºæ‰€æœ‰ç‚¹æƒä¸è¾¹æƒæ··åˆçš„é—®é¢˜ï¼Œå¦‚ï¼š
  1. æ¯ä¸ªèŠ‚ç‚¹æœ‰å¥–åŠ±/æƒ©ç½šï¼Œè¾¹æœ‰æˆæœ¬çš„è¿·å®«å¯»å®ã€‚
  2. ç½‘ç»œè·¯ç”±ä¸­ï¼ŒèŠ‚ç‚¹æœ‰å»¶è¿Ÿï¼Œé“¾è·¯æœ‰å¸¦å®½æˆæœ¬ã€‚
  3. ä»»åŠ¡è°ƒåº¦ä¸­ï¼Œä»»åŠ¡æœ‰æ”¶ç›Šï¼Œä¾èµ–å…³ç³»æœ‰å»¶è¿Ÿæˆæœ¬ã€‚

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰
1. **P1807 æœ€é•¿è·¯**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šåˆ†ç»„èƒŒåŒ…çš„è£¸é¢˜ï¼Œå·©å›ºæœ€é•¿è·¯å¾„çš„æ¨¡æ¿å†™æ³•ã€‚
2. **P2648 èµšé’±**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šä¸æœ¬é¢˜å‡ ä¹ç›¸åŒï¼Œä½†éœ€å¤„ç†ä»»æ„èµ·ç‚¹ï¼Œå¼•å…¥è¶…çº§æºç‚¹æŠ€å·§ã€‚
3. **P1938 æ‰¾å·¥å°±ä¸š**  
   ğŸ—£ï¸ æ¨èç†ç”±ï¼šUSACO åŸé¢˜ï¼Œå¼ºåŒ–ç‚¹æƒè½¬è¾¹æƒçš„å»ºæ¨¡èƒ½åŠ›ã€‚

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ª Believe_R_ çš„ç»éªŒ**ï¼šâ€œç‚¹æƒè½¬è¾¹æƒæ˜¯å›¾è®ºä¸­åŒ–ç¹ä¸ºç®€çš„ç¥æŠ€ï¼ä¸€å¼€å§‹æˆ‘æ€»çº ç»“å¦‚ä½•å¤„ç†ç‚¹æƒï¼Œåæ¥é¡¿æ‚Ÿï¼šæŠŠç‚¹æƒâ€˜æ¨â€™åˆ°è¾¹ä¸Šï¼Œé—®é¢˜ç«‹åˆ»æ¸…æ™°ã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šè¿™ç§â€œè½¬åŒ–â€æ€ç»´æ˜¯ç®—æ³•å­¦ä¹ çš„æ ¸å¿ƒï¼Œé‡åˆ°å¤æ‚é—®é¢˜æ—¶ï¼Œä¸å¦¨æ€è€ƒå¦‚ä½•å°†å…¶æ˜ å°„åˆ°å·²çŸ¥æ¨¡å‹ã€‚

---

<conclusion>
æœ¬æ¬¡å…³äº **USACO09NOV Job Hunt** çš„è§£æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æŒæ¡â€œç‚¹æƒè½¬è¾¹æƒâ€çš„ç²¾é«“ï¼Œä»¥åŠæœ€é•¿è·¯å¾„ä¸æ­£ç¯æ£€æµ‹çš„å®æˆ˜æŠ€å·§ã€‚è®°ä½ï¼šç®—æ³•çš„é­…åŠ›åœ¨äºåŒ–ç¹ä¸ºç®€ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„å›¾è®ºå¥¥ç§˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š75.66ç§’
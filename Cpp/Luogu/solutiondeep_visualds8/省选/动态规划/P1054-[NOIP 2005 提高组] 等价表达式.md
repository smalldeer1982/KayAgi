# é¢˜ç›®ä¿¡æ¯

# [NOIP 2005 æé«˜ç»„] ç­‰ä»·è¡¨è¾¾å¼

## é¢˜ç›®æè¿°

æ˜æ˜è¿›äº†ä¸­å­¦ä¹‹åï¼Œå­¦åˆ°äº†ä»£æ•°è¡¨è¾¾å¼ã€‚æœ‰ä¸€å¤©ï¼Œä»–ç¢°åˆ°ä¸€ä¸ªå¾ˆéº»çƒ¦çš„é€‰æ‹©é¢˜ã€‚è¿™ä¸ªé¢˜ç›®çš„é¢˜å¹²ä¸­é¦–å…ˆç»™å‡ºäº†ä¸€ä¸ªä»£æ•°è¡¨è¾¾å¼ï¼Œç„¶ååˆ—å‡ºäº†è‹¥å¹²é€‰é¡¹ï¼Œæ¯ä¸ªé€‰é¡¹ä¹Ÿæ˜¯ä¸€ä¸ªä»£æ•°è¡¨è¾¾å¼ï¼Œé¢˜ç›®çš„è¦æ±‚æ˜¯åˆ¤æ–­é€‰é¡¹ä¸­å“ªäº›ä»£æ•°è¡¨è¾¾å¼æ˜¯å’Œé¢˜å¹²ä¸­çš„è¡¨è¾¾å¼ç­‰ä»·çš„ã€‚

è¿™ä¸ªé¢˜ç›®æ‰‹ç®—å¾ˆéº»çƒ¦ï¼Œå› ä¸ºæ˜æ˜å¯¹è®¡ç®—æœºç¼–ç¨‹å¾ˆæ„Ÿå…´è¶£ï¼Œæ‰€ä»¥ä»–æƒ³æ˜¯ä¸æ˜¯å¯ä»¥ç”¨è®¡ç®—æœºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å‡è®¾ä½ æ˜¯æ˜æ˜ï¼Œèƒ½å®Œæˆè¿™ä¸ªä»»åŠ¡å—ï¼Ÿ

è¿™ä¸ªé€‰æ‹©é¢˜ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼éƒ½æ»¡è¶³ä¸‹é¢çš„æ€§è´¨ï¼š

1. è¡¨è¾¾å¼åªå¯èƒ½åŒ…å«ä¸€ä¸ªå˜é‡ $\tt a$ã€‚
2. è¡¨è¾¾å¼ä¸­å‡ºç°çš„æ•°éƒ½æ˜¯æ­£æ•´æ•°ï¼Œè€Œä¸”éƒ½å°äº $10000$ã€‚
3. è¡¨è¾¾å¼ä¸­å¯ä»¥åŒ…æ‹¬å››ç§è¿ç®— `+`ï¼ˆåŠ ï¼‰ï¼Œ`-`ï¼ˆå‡ï¼‰ï¼Œ`*`ï¼ˆä¹˜ï¼‰ï¼Œ`^`ï¼ˆä¹˜å¹‚ï¼‰ï¼Œä»¥åŠå°æ‹¬å· `()`ã€‚å°æ‹¬å·çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯ `^`ï¼Œç„¶åæ˜¯ `*`ï¼Œæœ€åæ˜¯ `+` å’Œ `-`ã€‚`+` å’Œ `-` çš„ä¼˜å…ˆçº§æ˜¯ç›¸åŒçš„ã€‚ç›¸åŒä¼˜å…ˆçº§çš„è¿ç®—ï¼ˆ**åŒ…æ‹¬ `^` è¿ç®—**ï¼‰éƒ½æ˜¯**ä»å·¦åˆ°å³**è¿›è¡Œã€‚
4. å¹‚æŒ‡æ•°åªå¯èƒ½æ˜¯ $1$ åˆ° $10$ ä¹‹é—´çš„æ­£æ•´æ•°ï¼ˆåŒ…æ‹¬ $1$ å’Œ $10$ï¼‰ã€‚
5. è¡¨è¾¾å¼å†…éƒ¨ï¼Œå¤´éƒ¨æˆ–è€…å°¾éƒ¨éƒ½å¯èƒ½æœ‰ä¸€äº›å¤šä½™çš„ç©ºæ ¼ã€‚

ä¸‹é¢æ˜¯ä¸€äº›åˆç†çš„è¡¨è¾¾å¼çš„ä¾‹å­ï¼š

`((a^1) ^ 2)^3`ï¼Œ`a*a+a-a`ï¼Œ`((a+a))`ï¼Œ`9999+(a-a)*a`ï¼Œ`1 + (a -1)^3`ï¼Œ`1^10^9`


## è¯´æ˜/æç¤º

- å¯¹äº $30\%$ çš„æ•°æ®ï¼Œè¡¨è¾¾å¼ä¸­åªå¯èƒ½å‡ºç°ä¸¤ç§è¿ç®—ç¬¦ `+` å’Œ `-`ï¼›
- å¯¹äºå…¶å®ƒçš„æ•°æ®ï¼Œå››ç§è¿ç®—ç¬¦ `+-*^` åœ¨è¡¨è¾¾å¼ä¸­éƒ½å¯èƒ½å‡ºç°ã€‚  
- å¯¹äº $100\%$ çš„æ•°æ®ï¼Œè¡¨è¾¾å¼ä¸­éƒ½å¯èƒ½å‡ºç°å°æ‹¬å· `()`ï¼Œ$2 \le n \le  26$ã€‚

**ã€é¢˜ç›®æ¥æºã€‘**

NOIP 2005 æé«˜ç»„ç¬¬å››é¢˜

## æ ·ä¾‹ #1

### è¾“å…¥

```
( a + 1) ^2
3
(a-1)^2+4*a
a + 1+ a
a^2 + 2 * a * 1 + 1^2 + 10 -10 +a -a
```

### è¾“å‡º

```
AC```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šç­‰ä»·è¡¨è¾¾å¼ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> â€œç®—æ³•æ˜¯æ€æƒ³çš„èˆè¹ˆï¼Œä»£ç æ˜¯é€»è¾‘çš„è¯—ç¯‡ã€‚ä»Šå¤©æˆ‘ä»¬å°†æ¢ç´¢è¡¨è¾¾å¼è®¡ç®—çš„å¥¥ç§˜ï¼Œåœ¨ç¬¦å·ä¸æ•°å­—çš„äº¤ç»‡ä¸­å¯»æ‰¾ç­‰ä»·çš„çœŸè°›ã€‚â€

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šå‡†ç¡®åˆ¤æ–­å¤šä¸ªå«å˜é‡`a`çš„è¡¨è¾¾å¼æ˜¯å¦ä¸ç»™å®šè¡¨è¾¾å¼ç­‰ä»·ï¼Œéœ€å¤„ç†å¤æ‚è¿ç®—ç¬¦ä¼˜å…ˆçº§ã€æ‹¬å·åŒ¹é…ã€å¤§æ•°è®¡ç®—ç­‰é—®é¢˜  
âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š`è¡¨è¾¾å¼è§£æ`ã€`ä¸­ç¼€è½¬åç¼€`ã€`æ ˆåº”ç”¨`ã€`æ¦‚ç‡åˆ¤å®š`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜è¦æ±‚åˆ¤æ–­å¤šä¸ªè¡¨è¾¾å¼åœ¨å˜é‡`a`ä»»æ„å–å€¼ä¸‹æ˜¯å¦ç­‰ä»·ã€‚ç›´æ¥æ•°å­¦è¯æ˜å›°éš¾ï¼Œä¸»æµç­–ç•¥æ˜¯**æ¦‚ç‡åˆ¤å®š**ï¼šç»™`a`ä»£å…¥å¤šä¸ªä¸åŒå€¼ï¼Œè®¡ç®—è¡¨è¾¾å¼ç»“æœï¼Œè‹¥ç»“æœå…¨ç­‰åˆ™è®¤ä¸ºè¡¨è¾¾å¼ç­‰ä»·ã€‚  
>  
> å…³é”®è§£é¢˜è·¯å¾„æ¼”è¿›ï¼š  
> 1. **æœ´ç´ å­—ç¬¦ä¸²æ¯”è¾ƒ**ï¼ˆä¸å¯è¡Œï¼šç­‰ä»·ä½†å½¢å¼ä¸åŒï¼‰  
> 2. **å±•å¼€å¤šé¡¹å¼æ¯”å¯¹**ï¼ˆç†è®ºç²¾ç¡®ä½†å®ç°å¤æ‚ï¼‰  
> 3. **æ•°å€¼ä»£å…¥æ³•**ï¼ˆé«˜æ•ˆå®ç”¨ï¼‰ï¼š  
>    - é¢„å¤„ç†ï¼šå»é™¤ç©ºæ ¼ï¼Œå¤„ç†æ‹¬å·ä¸åŒ¹é…  
>    - æ ¸å¿ƒï¼šä¸­ç¼€è¡¨è¾¾å¼ â†’ åç¼€è¡¨è¾¾å¼ â†’ æ±‚å€¼è®¡ç®—  
>    - ä¼˜åŒ–ï¼šå¤šç»„éšæœºæµ‹è¯•å€¼ + å¤§æ•°å–æ¨¡é¿å…æº¢å‡º  

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š"åˆ¤æ–­è¡¨è¾¾å¼ç­‰ä»·"è¦æ±‚æˆ‘ä»¬å¤„ç†**ç¬¦å·é€»è¾‘ä¸æ•°å€¼è®¡ç®—**çš„ç»“åˆã€‚è¿™ç§**ç¬¦å·åŒ–é—®é¢˜çš„æ•°å€¼åŒ–è½¬æ¢**æ€è·¯ï¼Œæ˜¯æ¦‚ç‡ç®—æ³•çš„å…¸å‹æ ‡å¿—ã€‚
2. **çº¿ç´¢2 (é—®é¢˜çº¦æŸ/ç‰¹æ€§)**ï¼šè¡¨è¾¾å¼ä¸­å­˜åœ¨**åŠ¨æ€ä¼˜å…ˆçº§è¿ç®—ç¬¦**ï¼ˆ`^`ä¼˜å…ˆçº§> `*` > `+/-`ï¼‰å’Œ**æ‹¬å·å¼ºåˆ¶ä¼˜å…ˆçº§**ï¼Œè¿™æŒ‡å‘äº†éœ€è¦**ä¸­ç¼€è½¬åç¼€**çš„æ ˆåº”ç”¨æ¨¡å‹ã€‚
3. **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼šè¡¨è¾¾å¼é•¿åº¦â‰¤100ï¼Œé€‰é¡¹æ•°â‰¤26ã€‚O(nL)çš„ç®—æ³•å®Œå…¨å¯è¡Œï¼ˆçº¦2600æ¬¡è®¡ç®—ï¼‰ï¼ŒéªŒè¯äº†ä¸­ç¼€è½¬åç¼€ç­–ç•¥çš„å¯è¡Œæ€§ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥

> ä¾¦æ¢å·¥ä½œå®Œæˆï¼è®©æˆ‘ä»¬ä¸²è”çº¿ç´¢ï¼š  
> 1. **çº¿ç´¢1**æŒ‡å‘æ•°å€¼ä»£å…¥æ³•â€”â€”å°†ç¬¦å·é—®é¢˜è½¬åŒ–ä¸ºæ•°å€¼è®¡ç®—é—®é¢˜  
> 2. **çº¿ç´¢2**æ­ç¤ºæ ¸å¿ƒéšœç¢ï¼šè¿ç®—ç¬¦ä¼˜å…ˆçº§å¤„ç†éœ€ç”¨**æ ˆæœºåˆ¶**å®ç°ä¸­ç¼€è½¬åç¼€  
> 3. **çº¿ç´¢3**ç¡®è®¤å¯è¡Œæ€§ï¼šæ•°æ®è§„æ¨¡æ”¯æŒO(nL)çš„æ ˆæ“ä½œ  
>  
> **ç»“è®º**ï¼šç»¼åˆä»¥ä¸Šï¼Œé‡‡ç”¨"ä¸­ç¼€è½¬åç¼€+åç¼€è¡¨è¾¾å¼æ±‚å€¼"ä¸ºæ ¸å¿ƒï¼Œè¾…ä»¥å¤šç»„æµ‹è¯•å€¼éªŒè¯çš„ç­–ç•¥ï¼Œå®Œç¾å¹³è¡¡æ•ˆç‡ä¸å‡†ç¡®æ€§ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆClV_Csyï¼‰**
* **ç‚¹è¯„**ï¼šæ­¤è§£æ³•ç³»ç»ŸåŒ–å®ç°äº†ä¸­ç¼€è½¬åç¼€çš„å®Œæ•´æµç¨‹ï¼Œå…³é”®åˆ›æ–°ç‚¹åœ¨äº**ä¸€å…ƒè´Ÿå·å¤„ç†**ï¼ˆ`-a`â†’`0-a`çš„è½¬æ¢ï¼‰å’Œ**å¤§æ•°å–æ¨¡**æŠ€å·§ã€‚ä»£ç ç»“æ„æ¸…æ™°ï¼Œè¿ç®—ç¬¦ä¼˜å…ˆçº§å¤„ç†ä¸¥è°¨ï¼Œå®è·µä»·å€¼é«˜ã€‚

**é¢˜è§£äºŒï¼ˆBitByBitï¼‰**
* **ç‚¹è¯„**ï¼šäº®ç‚¹åœ¨äºé‡‡ç”¨**åŒå“ˆå¸ŒéªŒè¯**ï¼ˆä¸¤ä¸ªä¸åŒæ¨¡æ•°ï¼‰å’Œ**éšæœºæµ‹è¯•å€¼**ï¼Œæ˜¾è‘—é™ä½è¯¯åˆ¤æ¦‚ç‡ã€‚å¯¹æ‹¬å·ä¸åŒ¹é…çš„é²æ£’æ€§å¤„ç†å±•ç¤ºäº†å®æˆ˜ç»éªŒï¼Œå€¼å¾—å­¦ä¹ çš„é˜²å¾¡æ€§ç¼–ç¨‹æ€ç»´ã€‚

**é¢˜è§£ä¸‰ï¼ˆShadow_Soldierï¼‰**
* **ç‚¹è¯„**ï¼šåˆ›æ–°ä½¿ç”¨**é€’å½’ä¸‹é™è§£ææ³•**ç›´æ¥æ±‚å€¼ï¼Œé¿å…æ˜¾å¼ä¸­ç¼€è½¬åç¼€ã€‚å…¶**å®æ—¶æ‹¬å·åŒ¹é…æ£€æµ‹**å’Œ**è¿ç®—ç¬¦ä¼˜å…ˆçº§åµŒå…¥é€’å½’**çš„æ€è·¯ç‹¬æ ‘ä¸€å¸œï¼Œå±•ç°ç®—æ³•è®¾è®¡çš„çµæ´»æ€§ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤

1. **å…³é”®ç‚¹1ï¼šè´Ÿå·è¯­ä¹‰çš„äºŒä¹‰æ€§å¤„ç†**  
   * **åˆ†æ**ï¼šè´Ÿå·å¯èƒ½è¡¨ç¤ºä¸€å…ƒè¿ç®—ç¬¦ï¼ˆå¦‚`-a`ï¼‰æˆ–äºŒå…ƒè¿ç®—ç¬¦ï¼ˆå¦‚`a-b`ï¼‰ã€‚è§£å†³æ–¹æ¡ˆï¼šå½“è´Ÿå·å‡ºç°åœ¨è¡¨è¾¾å¼å¼€å¤´æˆ–`(`åæ—¶ï¼Œåœ¨æ•°å­—æ ˆå‹å…¥`0`ï¼Œå°†å…¶è½¬æ¢ä¸º`0-a`çš„äºŒå…ƒè¿ç®—ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€šè¿‡**æ·»åŠ ä¸­æ€§å…ƒç´ **è½¬æ¢é—®é¢˜æœ¬è´¨ï¼Œæ˜¯ç®—æ³•è®¾è®¡çš„å¸¸ç”¨æŠ€å·§ã€‚

2. **å…³é”®ç‚¹2ï¼šè¿ç®—ç¬¦ä¼˜å…ˆçº§ä¸ç»“åˆæ€§å®ç°**  
   * **åˆ†æ**ï¼šä½¿ç”¨ä¼˜å…ˆçº§æ˜ å°„å‡½æ•°ï¼š
     ```cpp
     int priority(char op) {
         if (op == '+' || op == '-') return 1;
         if (op == '*') return 2;
         if (op == '^') return 3; // æ³¨æ„^å·¦ç»“åˆ
         return -1;
     }
     ```
     è½¬æ¢æ—¶éµå¾ªï¼šé«˜ä¼˜å…ˆçº§è¿ç®—ç¬¦å…ˆå‡ºæ ˆï¼ŒåŒä¼˜å…ˆçº§ä»å·¦åˆ°å³ã€‚
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ ˆçš„**åè¿›å…ˆå‡º**ç‰¹æ€§å¤©ç„¶é€‚é…è¡¨è¾¾å¼ä¼˜å…ˆçº§å¤„ç†ã€‚

3. **å…³é”®ç‚¹3ï¼šå¤§æ•°å¤„ç†çš„ä¼˜åŒ–ç­–ç•¥**  
   * **åˆ†æ**ï¼šä¹˜æ–¹è¿ç®—æ˜“å¯¼è‡´æ•°å€¼æº¢å‡ºã€‚è§£å†³æ–¹æ¡ˆï¼š
     - æ¨¡æ•°é€‰æ‹©ï¼š`1e9+7`ç­‰å¤§è´¨æ•°
     - ä¹˜æ–¹ä¼˜åŒ–ï¼šå¿«é€Ÿå¹‚ç®—æ³•
     ```cpp
     ll qpow(ll a, ll b, ll mod) {
         ll res = 1;
         while (b) {
             if (b & 1) res = res * a % mod;
             a = a * a % mod;
             b >>= 1;
         }
         return res;
     }
     ```
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**æ¨¡è¿ç®—ä¿æŒç­‰å¼æ€§è´¨**çš„ç‰¹æ€§ï¼Œä½¿æ¦‚ç‡åˆ¤å®šæ³•æˆä¸ºå¯èƒ½ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **é—®é¢˜è½¬æ¢**ï¼šå°†ç¬¦å·ç­‰ä»·åˆ¤æ–­â†’å¤šç»„æ•°å€¼æ¯”è¾ƒ
- **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šé¢„å¤„ç†æ‹¬å·ä¸åŒ¹é…ï¼ˆåˆ é™¤å¤šä½™å³æ‹¬å·/è¡¥å·¦æ‹¬å·ï¼‰
- **ç©ºé—´æ¢æ—¶é—´**ï¼šåç¼€è¡¨è¾¾å¼é¿å…é€’å½’è§£æ
- **æ¦‚ç‡åŠ å›º**ï¼šå¤šç»„éšæœºæµ‹è¯•å€¼+åŒæ¨¡æ•°éªŒè¯

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥                | æ ¸å¿ƒæ€æƒ³                     | ä¼˜ç‚¹                          | ç¼ºç‚¹ä¸åˆ†æ                     | é€‚ç”¨åœºæ™¯/å¾—åˆ†é¢„æœŸ       |
|---------------------|------------------------------|-------------------------------|--------------------------------|-------------------------|
| **é€’å½’ä¸‹é™è§£æ**    | ç›´æ¥åœ¨è§£ææ ‘æ±‚å€¼             | é¿å…æ˜¾å¼è½¬æ¢ï¼Œç†è®ºæœ€ç›´è§‚      | æ‹¬å·å¤„ç†å¤æ‚ï¼Œæ˜“å‡ºé”™           | å°è§„æ¨¡è¡¨è¾¾å¼ï¼ˆ70-90åˆ†ï¼‰ |
| **ä¸­ç¼€è½¬åç¼€**      | é€šè¿‡æ ˆå®ç°ä¼˜å…ˆçº§ç®¡ç†         | æµç¨‹æ ‡å‡†åŒ–ï¼Œæ‰©å±•æ€§å¥½          | éœ€é¢å¤–å¤„ç†ä¸€å…ƒè´Ÿå·             | æœ¬é¢˜æœ€ä½³ï¼ˆ100åˆ†ï¼‰       |
| **åˆ†æ²»æ³•**          | åœ¨æœ€ä½ä¼˜å…ˆçº§è¿ç®—ç¬¦å¤„åˆ†å‰²     | é¿å…æ ˆæ“ä½œï¼Œè‡ªç„¶å¤„ç†ç»“åˆæ€§     | å¤§æ•°å¤„ç†å›°éš¾ï¼Œæ˜“è¶…æ—¶           | æ— å¤§æ•°åœºæ™¯ï¼ˆ60-80åˆ†ï¼‰  |
| **å¤šé¡¹å¼å±•å¼€**      | æ¯”è¾ƒç³»æ•°å‘é‡                 | ç†è®ºç²¾ç¡®                      | å®ç°å¤æ‚ï¼Œé«˜æ¬¡é¡¹ç³»æ•°çˆ†ç‚¸       | å­¦æœ¯ç ”ç©¶ï¼ˆ100åˆ†ä½†éš¾ACï¼‰|

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
1. **èµ·ç‚¹ï¼šæœ´ç´ å­—ç¬¦ä¸²æ¯”è¾ƒ**  
   ç›´æ¥å¯¹æ¯”è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œä½†`(a+1)^2`ä¸`a^2+2a+1`å½¢å¼ä¸åŒæœ¬è´¨ç›¸åŒã€‚

2. **ç“¶é¢ˆï¼šå¤šé¡¹å¼å±•å¼€å®ç°å›°éš¾**  
   ç¬¦å·å¤„ç†éœ€å®ç°å¤šé¡¹å¼ä¹˜æ³•ã€å±•å¼€å’Œåˆå¹¶ï¼Œä»£ç å¤æ‚åº¦O(2^n)ã€‚

3. **å…³é”®è½¬æŠ˜ï¼šæ•°å€¼åŒ–è½¬æ¢**  
   å°†`a`æ›¿æ¢ä¸ºå…·ä½“æ•°å€¼ï¼Œé—®é¢˜è½¬åŒ–ä¸ºæ•°å€¼è®¡ç®—ï¼Œå¤æ‚åº¦é™ä¸ºO(n)ã€‚

4. **æ•ˆç‡é£è·ƒï¼šä¸­ç¼€è½¬åç¼€**  
   é€šè¿‡æ ˆæœºåˆ¶å®ç°O(n)çš„ä¼˜å…ˆçº§ç®¡ç†ï¼Œå¥ å®šé«˜æ•ˆåŸºç¡€ã€‚

> ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼šä»ç›´æ¥å¯¹æ¯”åˆ°æ•°å€¼è®¡ç®—ï¼Œå†åˆ°æ ˆç®¡ç†ä¼˜å…ˆçº§ï¼Œæˆ‘ä»¬è§è¯äº†**é—®é¢˜è½¬åŒ–**çš„åŠ›é‡ã€‚æœ€ä¼˜è§£å¾€å¾€è¯ç”Ÿäºå¯¹é—®é¢˜æœ¬è´¨çš„æ·±åˆ»æ´å¯Ÿï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ**
```cpp
const int MOD = 1e9 + 7;

int priority(char op) {
    if (op == '+' || op == '-') return 1;
    if (op == '*') return 2;
    if (op == '^') return 3;
    return -1;
}

string infixToSuffix(string s) {
    stack<char> st;
    string res;
    for (int i = 0; i < s.size(); i++) {
        if (s[i] == 'a') res += "a ";
        else if (isdigit(s[i])) {
            while (i < s.size() && isdigit(s[i])) 
                res += s[i++];
            res += ' '; 
            i--;
        }
        else if (s[i] == '(') st.push('(');
        else if (s[i] == ')') {
            while (st.top() != '(') {
                res += st.top(); 
                res += ' ';
                st.pop();
            }
            st.pop(); // å¼¹å‡º'('
        }
        else if (s[i] == '-' && (i == 0 || s[i-1] == '(')) {
            res += "0 "; // ä¸€å…ƒè´Ÿå·è½¬äºŒå…ƒ
            st.push('-');
        }
        else {
            while (!st.empty() && priority(st.top()) >= priority(s[i])) {
                res += st.top(); 
                res += ' ';
                st.pop();
            }
            st.push(s[i]);
        }
    }
    while (!st.empty()) {
        res += st.top();
        res += ' ';
        st.pop();
    }
    return res;
}

ll calcSuffix(string s, ll a_val) {
    stack<ll> num;
    stringstream ss(s);
    string token;
    while (ss >> token) {
        if (token == "a") num.push(a_val);
        else if (token == "+") {
            ll r = num.top(); num.pop();
            ll l = num.top(); num.pop();
            num.push((l + r) % MOD);
        }
        // ç±»ä¼¼å¤„ç†-ã€*ã€^
        else num.push(stoll(token));
    }
    return num.top();
}
```

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

> **è®¾è®¡ç†å¿µ**ï¼šç”¨8-bitæ¸¸æˆé£æ ¼å¯è§†åŒ–æ ˆæ“ä½œï¼Œè®©æŠ½è±¡çš„è¡¨è¾¾å¼è®¡ç®—å…·è±¡åŒ–

### åŠ¨ç”»æ¼”ç¤ºè®¾è®¡
- **åœºæ™¯**ï¼š  
  - èƒŒæ™¯ï¼šå¤å¤CRTæ˜¾ç¤ºå™¨é£æ ¼ï¼ˆæ·±ç»¿åº•+æµ…ç»¿åƒç´ ï¼‰  
  - è¡¨è¾¾å¼å…ƒç´ ï¼šä¸åŒé¢œè‰²åƒç´ å—è¡¨ç¤ºï¼ˆæ•°å­—=è“è‰²ï¼Œè¿ç®—ç¬¦=çº¢è‰²ï¼Œå˜é‡a=é»„è‰²ï¼‰
- **æ ¸å¿ƒåŠ¨æ•ˆ**ï¼š
  1. **ä¸­ç¼€è½¬åç¼€**ï¼š
     - è¾“å…¥æµï¼šåº•éƒ¨åƒç´ å¸¦æ»šåŠ¨æ˜¾ç¤ºè¡¨è¾¾å¼
     - æ ˆåŒºï¼šå³ä¾§8Ã—16åƒç´ æ ˆç»“æ„ï¼Œå…ƒç´ å…¥æ ˆæ—¶åƒç´ å—ä¸Šæµ®+éŸ³æ•ˆ
     - è¾“å‡ºæµï¼šå·¦ä¾§é€æ¸ç”Ÿæˆåç¼€è¡¨è¾¾å¼
  2. **åç¼€è®¡ç®—**ï¼š
     - æ•°å­—æ ˆï¼šå·¦ä¾§å †å çš„åƒç´ æ–¹å—
     - è¿ç®—è§¦å‘ï¼šè¿ç®—ç¬¦é—ªçƒåï¼Œé¡¶éƒ¨ä¸¤ä¸ªæ–¹å—ç¢°æ’èåˆä¸ºæ–°æ–¹å—
  3. **ç‰¹æ®Šæ•ˆæœ**ï¼š
     - è´Ÿå·è½¬æ¢ï¼š0çš„åƒç´ å—ä»é¡¶éƒ¨æ‰è½ä¸è´Ÿå·ç»“åˆ
     - æ‹¬å·åŒ¹é…ï¼šé…å¯¹æ‹¬å·å‘å…‰è„‰å†²

### äº¤äº’æ§åˆ¶é¢æ¿
```plaintext
[â–¶ï¸ å¼€å§‹] [â¸ï¸ æš‚åœ] [â­ å•æ­¥] 
é€Ÿåº¦ï¼šğŸ•------ğŸ•¤ 
æµ‹è¯•å€¼ï¼ša=ğŸ”¢
[ğŸ² éšæœºæµ‹è¯•]
```

> **è®¾è®¡æ„ä¹‰**ï¼šé€šè¿‡åƒç´ åŠ¨ç”»å°†æŠ½è±¡çš„æ ˆæ“ä½œå…·è±¡åŒ–ï¼ŒéŸ³æ•ˆå¼ºåŒ–æ“ä½œè®°å¿†ï¼Œæ¸¸æˆåŒ–è¿›åº¦æ¡æå‡å­¦ä¹ åŠ¨åŠ›ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**åŒç±»é—®é¢˜è¿ç§»**ï¼š
1. **å˜é‡ä¾èµ–æ‰©å±•**ï¼šå¤„ç†å¤šå˜é‡è¡¨è¾¾å¼ï¼ˆå¦‚`a+b*c`ï¼‰
2. **å‡½æ•°é›†æˆ**ï¼šæ”¯æŒ`sin/cos`ç­‰å‡½æ•°è°ƒç”¨
3. **å¸ƒå°”è¡¨è¾¾å¼**ï¼šåˆ¤æ–­é€»è¾‘è¡¨è¾¾å¼ç­‰ä»·æ€§

**æ¨èç»ƒä¹ **ï¼š
1. **P1449 åç¼€è¡¨è¾¾å¼**  
   â†’ å·©å›ºåç¼€è¡¨è¾¾å¼è®¡ç®—åŸºç¡€
2. **P1044 è¡¨è¾¾å¼è®¡ç®—4**  
   â†’ å¼ºåŒ–ä¸­ç¼€è½¬åç¼€å®ç°èƒ½åŠ›
3. **P1981 è¡¨è¾¾å¼æ±‚å€¼**ï¼ˆNOIPæ™®åŠç»„ï¼‰  
   â†’ ç»ƒä¹ æ— æ‹¬å·åœºæ™¯çš„ä¼˜åŒ–å¤„ç†
4. **P7073 è¡¨è¾¾å¼**ï¼ˆCSP-S2020ï¼‰  
   â†’ æŒ‘æˆ˜è¡¨è¾¾å¼æ ‘ä¸é€»è¾‘å€¼è®¡ç®—

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **ç»éªŒæ‘˜å½•**ï¼ˆæ¥è‡ªé¢˜è§£ä½œè€…ï¼‰ï¼š  
> â€œè°ƒè¯•æœ€è€—æ—¶çš„æ˜¯è´Ÿå·å¤„ç†â€”â€”åœ¨è¡¨è¾¾å¼`-(a-2)`ä¸­ï¼Œæœªå°†é¦–ä¸ªè´Ÿå·è½¬æ¢ä¸º`0-`å¯¼è‡´è®¡ç®—é”™è¯¯ã€‚å»ºè®®åœ¨æ•°å­—æ ˆåˆå§‹åŒ–æ—¶å‹å…¥0ï¼Œå¹¶æ‰“å°ä¸­é—´è¡¨è¾¾å¼çŠ¶æ€ã€‚â€

> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼šè¿™ä¸ªè°ƒè¯•ç»éªŒæå…·ä»·å€¼ï¼Œå®ƒæ­ç¤ºäº†**è¾¹ç•Œæ¡ä»¶æµ‹è¯•**çš„é‡è¦æ€§ã€‚åœ¨è¡¨è¾¾å¼è®¡ç®—é—®é¢˜ä¸­ï¼Œæœ€æ˜“å‡ºé”™çš„å¾€å¾€æ˜¯å¼€å¤´/ç»“å°¾å’Œæ‹¬å·è¾¹ç•Œå¤„çš„ç‰¹æ®Šè¿ç®—ç¬¦ã€‚  
>  
> **æ€»ç»“æ•™è®­**ï¼š  
> 1. å•å…ƒæµ‹è¯•å¿…é¡»åŒ…å«å•å…ƒç´ /ç©ºæ‹¬å·ç­‰è¾¹ç•Œæ¡ˆä¾‹  
> 2. å…³é”®æ­¥éª¤è¾“å‡ºä¸­é—´ç»“æœï¼ˆå¦‚è½¬æ¢å‰åçš„è¡¨è¾¾å¼ï¼‰  
> 3. åˆå§‹åŒ–æ“ä½œæ ˆæ—¶é¢„å‹å…¥`0`å¯é˜²å¾¡æ€§å¤„ç†ä¸€å…ƒè¿ç®—ç¬¦

---

> â€œç®—æ³•ä¹‹è·¯å¦‚åŒæ‹¼å›¾æ¸¸æˆï¼Œæ¯ä¸€å—ä»£ç éƒ½æ˜¯é€»è¾‘çš„ç¢ç‰‡ã€‚å½“ä½ æŠŠä¸­ç¼€çš„æ··ä¹±è½¬åŒ–ä¸ºåç¼€çš„ç§©åºï¼Œè®©æ ˆçš„èµ·ä¼æ¼”å¥å‡ºè®¡ç®—çš„æ—‹å¾‹ï¼Œé‚£ä¸€åˆ»ï¼Œä½ å·²è§¦æ‘¸åˆ°ç¼–ç¨‹ä¹‹ç¾çš„æ ¸å¿ƒã€‚â€  
> â€”â€” æ´›è¯­äº‘ç¬º âœ¨

---
å¤„ç†ç”¨æ—¶ï¼š249.10ç§’
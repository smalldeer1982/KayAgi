# é¢˜ç›®ä¿¡æ¯

# ç¯çŠ¶æœ€å¤§ä¸¤æ®µå­æ®µå’Œ

## é¢˜ç›®æè¿°

ç»™å‡ºä¸€æ®µé•¿åº¦ä¸º $n$ çš„ç¯çŠ¶åºåˆ— $a$ï¼Œå³è®¤ä¸º $a_1$ å’Œ $a_n$ æ˜¯ç›¸é‚»çš„ï¼Œé€‰å‡ºå…¶ä¸­è¿ç»­ä¸é‡å ä¸”éç©ºçš„ä¸¤æ®µä½¿å¾—è¿™ä¸¤æ®µå’Œæœ€å¤§ã€‚


## è¯´æ˜/æç¤º

#### æ•°æ®è§„æ¨¡ä¸çº¦å®š

å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ $2 \leq n \leq 2 \times 10^5$ï¼Œ$-10^4 \leq a_i \leq 10^4$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
7
2 -4 3 -1 2 -4 3
```

### è¾“å‡º

```
9```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šç¯çŠ¶æœ€å¤§ä¸¤æ®µå­æ®µå’Œ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨ç¯çŠ¶åºåˆ—ä¸­é€‰å–ä¸¤æ®µè¿ç»­ä¸é‡å ä¸”éç©ºçš„å­æ®µï¼Œä½¿å®ƒä»¬çš„å’Œæœ€å¤§ã€‚ç¯çŠ¶ç»“æ„æ„å‘³ç€é¦–å°¾ç›¸é‚»ï¼Œéœ€è¦å¤„ç†è·¨è¶Šåºåˆ—è¾¹ç•Œçš„å­æ®µç»„åˆé—®é¢˜ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š**åŠ¨æ€è§„åˆ’(DP)**ã€**åºåˆ—å¤„ç†**ã€**é—®é¢˜è½¬åŒ–**

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š
> æœ¬é¢˜éœ€è¦åŒæ—¶å¤„ç†ç¯çŠ¶ç»“æ„å’Œä¸¤æ®µå­æ®µçš„çº¦æŸï¼Œç›´è§‚æ€è·¯æ˜¯åˆ†ç±»è®¨è®ºï¼š
> - **æƒ…å†µ1**ï¼šä¸¤æ®µå­æ®µå‡ä¸è·¨è¶Šé¦–å°¾ï¼ˆçº¿æ€§éƒ¨åˆ†ï¼‰
> - **æƒ…å†µ2**ï¼šè‡³å°‘ä¸€æ®µè·¨è¶Šé¦–å°¾ï¼ˆç¯çŠ¶ç‰¹æ€§ï¼‰
> 
> å¯¹äºæƒ…å†µ1ï¼Œå¯è½¬åŒ–ä¸ºç»å…¸çš„æœ€å¤§ä¸¤æ®µå­æ®µå’Œé—®é¢˜ï¼›å¯¹äºæƒ…å†µ2ï¼Œå¯è½¬åŒ–ä¸ºæ€»å’Œå‡å»ä¸­é—´æœªé€‰éƒ¨åˆ†çš„æœ€å°å’Œã€‚åŠ¨æ€è§„åˆ’æ˜¯å¤„ç†æ­¤ç±»æœ€ä¼˜åŒ–é—®é¢˜çš„åˆ©å™¨ï¼Œé€šè¿‡çŠ¶æ€å®šä¹‰å’Œè½¬ç§»æ–¹ç¨‹é«˜æ•ˆæ±‚è§£ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š"æ±‚ä¸¤æ®µå­æ®µå’Œæœ€å¤§"æ˜¯å…¸å‹çš„æœ€ä¼˜åŒ–é—®é¢˜ï¼Œæš—ç¤ºä½¿ç”¨**åŠ¨æ€è§„åˆ’**æˆ–**è´ªå¿ƒ**ç­–ç•¥ã€‚
2.  **çº¿ç´¢2 (é—®é¢˜çº¦æŸ)**ï¼š"ç¯çŠ¶åºåˆ—"å’Œ"ä¸é‡å "çº¦æŸæ’é™¤äº†ç®€å•è´ªå¿ƒï¼ŒæŒ‡å‘éœ€è¦ç‰¹æ®Šå¤„ç†çš„**ç¯çŠ¶DP**æˆ–**é—®é¢˜è½¬åŒ–**æŠ€å·§ã€‚
3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼šn â‰¤ 2Ã—10âµï¼Œè¦æ±‚O(n)æˆ–O(n log n)ç®—æ³•ï¼ŒåŠ¨æ€è§„åˆ’çš„O(n)è§£æ³•å¯è¡Œã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> ç»¼åˆçº¿ç´¢ï¼š
> 1. æœ€ä¼˜åŒ–ç›®æ ‡æŒ‡å‘DPæˆ–è´ªå¿ƒï¼Œä½†ç¯çŠ¶çº¦æŸä½¿è´ªå¿ƒç­–ç•¥å¤±æ•ˆ
> 2. ç¯çŠ¶ç»“æ„å¯é€šè¿‡åˆ†ç±»è®¨è®ºè½¬åŒ–ä¸ºçº¿æ€§é—®é¢˜
> 3. æ•°æ®è§„æ¨¡è¦æ±‚é«˜æ•ˆDPå®ç°
> 
> **ç»“è®º**ï¼šé‡‡ç”¨åŠ¨æ€è§„åˆ’ï¼Œåˆ†æƒ…å†µå¤„ç†ç¯çŠ¶çº¦æŸï¼šâ‘ çº¿æ€§éƒ¨åˆ†ç”¨å‰ç¼€/åç¼€æœ€å¤§å€¼ â‘¡ç¯çŠ¶éƒ¨åˆ†ç”¨æ€»å’Œå‡æœ€å°å­æ®µå’Œ

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šI_AM_HelloWordï¼‰**
* **ç‚¹è¯„**ï¼šè§£æ³•æ¸…æ™°æŠ“ä½é—®é¢˜æœ¬è´¨ï¼Œå°†ç¯çŠ¶é—®é¢˜æ‹†è§£ä¸ºä¸¤ç§ç‹¬ç«‹æƒ…å†µã€‚å·§å¦™è¿ç”¨"æ€»å’Œå‡æœ€å°å­æ®µå’Œ"å¤„ç†ç¯çŠ¶çº¦æŸï¼Œä»£ç ç®€æ´é«˜æ•ˆï¼ˆ18è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰ã€‚ç‰¹åˆ¤å¤„ç†ï¼ˆå…¨è´Ÿæ•°/å•æ­£æ•°ï¼‰ä½“ç°äº†ä¸¥è°¨æ€§ã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šzhy137036ï¼‰**
* **ç‚¹è¯„**ï¼šç³»ç»ŸåŒ–æ„å»ºæœ€å¤§å­æ®µå’ŒçŸ¥è¯†ä½“ç³»ï¼Œä»åŸºç¡€åˆ°å˜å¼å®Œæ•´æ¼”ç»ã€‚é€šè¿‡å‡½æ•°å°è£…å®ç°ä»£ç å¤ç”¨ï¼Œå‰ç¼€/åç¼€æ•°ç»„å¤„ç†ä¼˜é›…ã€‚ç¯çŠ¶è½¬åŒ–æ€è·¯æ¸…æ™°ï¼Œä»£ç è§„èŒƒæ€§ä½³ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šywy_c_asmï¼‰**
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§ä½¿ç”¨çº¿æ®µæ ‘ç»´æŠ¤9ç§åŒºé—´ä¿¡æ¯ï¼Œæä¾›ä¸åŒè§†è§’è§£æ³•ã€‚å›¾ç¤ºè¾…åŠ©ç†è§£åŒºé—´åˆå¹¶é€»è¾‘ï¼Œé€‚åˆæ‹“å±•æ€ç»´ã€‚è™½ç„¶å¤æ‚åº¦O(n log n)ç¨é«˜ï¼Œä½†ç»“æ„è®¾è®¡æå…·å¯å‘æ€§ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1.  **éš¾ç‚¹1ï¼šç¯çŠ¶ç»“æ„å¤„ç†**
    * **åˆ†æ**ï¼šé€šè¿‡åˆ†ç±»è®¨è®ºå°†ç¯è½¬åŒ–ä¸ºé“¾ã€‚æƒ…å†µ1ç›´æ¥DPï¼›æƒ…å†µ2å–ååæ±‚æœ€å°å­æ®µå’Œï¼Œç”¨æ€»å’Œå‡å»
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¯çŠ¶é—®é¢˜å¸¸ç”¨"åˆ†ç±»è®¨è®º+é—®é¢˜è½¬åŒ–"æŠ€å·§
2.  **éš¾ç‚¹2ï¼šçŠ¶æ€å®šä¹‰ä¸è½¬ç§»**
    * **åˆ†æ**ï¼š
      - å®šä¹‰`g1[i]`ä¸º[1,i]çš„æœ€å¤§å­æ®µå’Œ
      - `g2[i]`ä¸º[i,n]çš„æœ€å¤§å­æ®µå’Œ
      - çº¿æ€§éƒ¨åˆ†ï¼š`max{g1[i] + g2[i+1]}`
      - ç¯çŠ¶éƒ¨åˆ†ï¼šæ€»å’Œ - æœ€å°å­æ®µå’Œï¼ˆå–ååæ±‚ï¼‰
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåŒæŒ‡é’ˆç»´æŠ¤å‰ç¼€/åç¼€æå€¼æ˜¯åºåˆ—é—®é¢˜çš„æ ¸å¿ƒæŠ€å·§
3.  **éš¾ç‚¹3ï¼šè¾¹ç•Œç‰¹åˆ¤å¤„ç†**
    * **åˆ†æ**ï¼šå…¨è´Ÿæ•°æ—¶é€‰æœ€å¤§ä¸¤ä¸ªæ•°ï¼›å•æ­£æ•°æ—¶é€‰æ­£æ•°åŠ æœ€å¤§è´Ÿæ•°
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè¾¹ç•Œæƒ…å†µéœ€å•ç‹¬éªŒè¯ï¼Œä¿è¯ç®—æ³•é²æ£’æ€§

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼ˆé—®é¢˜æ‹†è§£ï¼‰**ï¼šå°†å¤æ‚ç¯çŠ¶é—®é¢˜æ‹†åˆ†ä¸ºçº¿æ€§+ç¯çŠ¶ç‰¹ä¾‹
- **æŠ€å·§2ï¼ˆæ­£è´Ÿè½¬åŒ–ï¼‰**ï¼šå°†æœ€å°å­æ®µå’Œè½¬åŒ–ä¸ºå–ååçš„æœ€å¤§å­æ®µå’Œ
- **æŠ€å·§3ï¼ˆæ»šåŠ¨æ›´æ–°ï¼‰**ï¼šç”¨å˜é‡ä»£æ›¿æ•°ç»„é™ç©ºé—´å¤æ‚åº¦

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ
| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¾—åˆ†/é€‚ç”¨åœºæ™¯ |
|------|----------|------|------|---------------|
| **æš´åŠ›æœç´¢** | æšä¸¾æ‰€æœ‰å­æ®µç»„åˆ | é€»è¾‘ç›´è§‚ | O(nâ´)è¶…æ—¶ | nâ‰¤20æ—¶10%åˆ† |
| **æ ‘å½¢DP** | å¤„ç†ä¾èµ–å…³ç³» | æ¨¡å‹ç²¾ç¡® | è¿‡é‡ | é€šç”¨ä¾èµ–èƒŒåŒ… |
| **åŒæŒ‡é’ˆDPï¼ˆæœ€ä¼˜ï¼‰** | å‰ç¼€/åç¼€æå€¼ | O(n)é«˜æ•ˆ | éœ€ç‰¹åˆ¤è¾¹ç•Œ | 100%åˆ† |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»"èƒ½åš"åˆ°"åšå¥½"
1. **èµ·ç‚¹ï¼šæš´åŠ›æšä¸¾** â†’ O(nâ´)ä¸å¯è¡Œ
2. **å‘ç°é‡å¤å­é—®é¢˜** â†’ åŠ¨æ€è§„åˆ’æ–¹å‘
3. **çŠ¶æ€å®šä¹‰ä¼˜åŒ–** â†’ å‰ç¼€/åç¼€æ•°ç»„
4. **ç¯çŠ¶è½¬åŒ–** â†’ æ€»å’Œå‡æœ€å°å­æ®µå’Œ
5. **è¾¹ç•Œç‰¹åˆ¤** â†’ å…¨è´Ÿæ•°/å•æ­£æ•°å¤„ç†

> **ç­–ç•¥æ€»ç»“**ï¼šå¥½ç®—æ³•=æ·±åˆ»é—®é¢˜ç†è§£+åˆé€‚ç­–ç•¥é€‰æ‹©+ä¸¥è°¨è¾¹ç•Œå¤„ç†

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆç»¼åˆæœ€ä¼˜è§£ï¼‰**
```cpp
#include <iostream>
#include <algorithm>
#include <climits>
using namespace std;
typedef long long LL;
const int N = 2e5+10;
const LL INF = 1e18;

LL solve(LL a[], int n) {
    LL g1[N], g2[N], cur = -INF;
    g1[0] = -INF;
    for (int i = 1; i <= n; i++) {
        cur = max(a[i], (cur < 0 ? 0 : cur) + a[i]);
        g1[i] = max(g1[i-1], cur);
    }
    
    g2[n+1] = -INF, cur = -INF;
    for (int i = n; i; i--) {
        cur = max(a[i], (cur < 0 ? 0 : cur) + a[i]);
        g2[i] = max(g2[i+1], cur);
    }
    
    LL res = -INF;
    for (int i = 1; i < n; i++)
        res = max(res, g1[i] + g2[i+1]);
    return res;
}

int main() {
    int n; cin >> n;
    LL a[N], sum = 0, pos_cnt = 0;
    for (int i = 1; i <= n; i++) {
        cin >> a[i];
        sum += a[i];
        pos_cnt += (a[i] > 0);
    }
    
    // ç‰¹åˆ¤å…¨è´Ÿæ•°
    if (pos_cnt == 0) {
        sort(a+1, a+n+1);
        cout << a[n] + a[n-1];
        return 0;
    }
    
    // ç‰¹åˆ¤å•æ­£æ•°
    if (pos_cnt == 1) {
        LL pos_val = -INF, max_neg = -INF;
        for (int i = 1; i <= n; i++) {
            if (a[i] > 0) pos_val = a[i];
            else if (a[i] > max_neg) max_neg = a[i];
        }
        cout << pos_val + max_neg;
        return 0;
    }
    
    LL ans1 = solve(a, n);  // çº¿æ€§éƒ¨åˆ†
    
    LL b[N];  // å–åå¤„ç†ç¯çŠ¶éƒ¨åˆ†
    for (int i = 1; i <= n; i++) 
        b[i] = -a[i];
    LL min_val = -solve(b, n);
    LL ans2 = sum - min_val;
    
    cout << max(ans1, ans2);
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š
1. `solve()`å‡½æ•°å¤„ç†æœ€å¤§ä¸¤æ®µå­æ®µå’Œ
2. å‰ç¼€/åç¼€æ•°ç»„`g1[]`/`g2[]`è®°å½•æå€¼
3. ç‰¹åˆ¤å¤„ç†å…¨è´Ÿæ•°/å•æ­£æ•°æƒ…å†µ
4. ç¯çŠ¶éƒ¨åˆ†é€šè¿‡å–åè½¬åŒ–ä¸ºçº¿æ€§é—®é¢˜

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åŠ¨ç”»è®¾è®¡ï¼šç¯çŠ¶åºåˆ—æ‰«æå™¨
![ç¯çŠ¶åºåˆ—å¯è§†åŒ–](https://assets.leetcode.com/uploads/2019/04/15/circulararray.gif)

**è®¾è®¡è¦ç‚¹**ï¼š
1. **8ä½åƒç´ é£æ ¼**ï¼šå¤å¤çº¢ç™½æœºé…è‰²ï¼Œ16è‰²ç´¢å¼•è°ƒè‰²æ¿
2. **åŠ¨æ€æ‰«æçº¿**ï¼šçº¢è‰²æ‰«æçº¿æ²¿ç¯ç§»åŠ¨ï¼Œé«˜äº®å½“å‰å¤„ç†ä½ç½®
3. **çŠ¶æ€é¢æ¿**ï¼šå®æ—¶æ˜¾ç¤ºå‰ç¼€/åç¼€æœ€å¤§å€¼ï¼Œå­æ®µå’Œå˜åŒ–
4. **éŸ³æ•ˆè®¾è®¡**ï¼š
   - æ•°æ®æ›´æ–°ï¼š"å“”"å£°(440Hz)
   - æå€¼æ›´æ–°ï¼š"å®"å£°(880Hz)
   - é”™è¯¯ï¼š"å—¡"å£°(220Hz)

**äº¤äº’æ§åˆ¶**ï¼š
- æ­¥è¿›æ¨¡å¼ï¼šç©ºæ ¼å•æ­¥æ‰§è¡Œ
- è‡ªåŠ¨æ’­æ”¾ï¼šAé”®æ§åˆ¶é€Ÿåº¦(1x/2x/4x)
- è§†è§’åˆ‡æ¢ï¼šVé”®åˆ‡æ¢å…¨å±€/å±€éƒ¨è§†å›¾

**æŠ€æœ¯å®ç°**ï¼š
```javascript
// ä¼ªä»£ç æ ¸å¿ƒé€»è¾‘
function drawFrame() {
  drawPixelArray();  // ç»˜åˆ¶åƒç´ åŒ–åºåˆ—
  drawScanline(pos); // ç»˜åˆ¶æ‰«æçº¿
  updateStatusPanel(); // æ›´æ–°æ•°æ®é¢æ¿
  if (autoPlay) setTimeout(nextFrame, speed);
}
```

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ç›¸ä¼¼é—®é¢˜è¿ç§»
1. **åˆ†ç»„èƒŒåŒ…é—®é¢˜**ï¼šç‰©å“ä¾èµ–å…³ç³»ç±»æ¯”ä¸»ä»¶/é™„ä»¶
2. **ç¯çŠ¶æœ€å¤§å­æ®µå’Œ**ï¼šæœ¬é¢˜çš„å•æ®µç‰ˆæœ¬ï¼ˆæ´›è°·P1115ï¼‰
3. **å¸¦é•¿åº¦é™åˆ¶å­æ®µå’Œ**ï¼šåŠ å…¥é•¿åº¦çº¦æŸçš„å˜ä½“

### æ¨èç»ƒä¹ 
1. **æ´›è°·P1115**ï¼šæœ€å¤§å­æ®µå’Œï¼ˆåŸºç¡€è®­ç»ƒï¼‰
2. **æ´›è°·P1886**ï¼šæ»‘åŠ¨çª—å£ï¼ˆå•è°ƒé˜Ÿåˆ—åº”ç”¨ï¼‰
3. **æ´›è°·P2642**ï¼šåŒå­åºåˆ—æœ€å¤§å’Œï¼ˆçº¿æ€§ç‰ˆï¼‰
4. **æ´›è°·P1121**ï¼šç¯çŠ¶æœ€å¤§ä¸¤æ®µå­æ®µå’Œï¼ˆæœ¬é¢˜å¼ºåŒ–ï¼‰

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> "è§£é¢˜æ—¶ç‰¹åˆ«æ³¨æ„è¾¹ç•Œæƒ…å†µâ€”â€”å…¨è´Ÿæ•°æ—¶åªèƒ½é€‰ä¸¤ä¸ªæœ€å¤§è´Ÿæ•°ï¼Œå•æ­£æ•°æ—¶è¦æ­é…æœ€å¤§è´Ÿæ•°ã€‚è¿™äº›ç‰¹åˆ¤æ˜¯ACçš„å…³é”®ï¼Œä¹Ÿæ˜¯ç®—æ³•ä¸¥è°¨æ€§çš„ä½“ç°ã€‚"

---

> æŒæ¡ç¯çŠ¶é—®é¢˜çš„è½¬åŒ–æ€ç»´ï¼Œç†è§£åŠ¨æ€è§„åˆ’çš„çŠ¶æ€è®¾è®¡ç²¾é«“ï¼Œä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜å®šèƒ½æ¸¸åˆƒæœ‰ä½™ï¼ ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š445.60ç§’
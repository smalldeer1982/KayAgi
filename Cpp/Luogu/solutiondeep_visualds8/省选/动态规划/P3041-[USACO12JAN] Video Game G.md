# é¢˜ç›®ä¿¡æ¯

# [USACO12JAN] Video Game G

## é¢˜ç›®æè¿°

Bessie åœ¨ç©ä¸€æ¬¾æ¸¸æˆï¼Œè¯¥æ¸¸æˆåªæœ‰ä¸‰ä¸ªæŠ€èƒ½é”® `A`ï¼Œ`B`ï¼Œ`C` å¯ç”¨ï¼Œä½†è¿™äº›é”®å¯ç”¨å½¢æˆ $n$ ç§ç‰¹å®šçš„ç»„åˆæŠ€ã€‚ç¬¬ $i$ ä¸ªç»„åˆæŠ€ç”¨ä¸€ä¸ªå­—ç¬¦ä¸² $s_i$ è¡¨ç¤ºã€‚

Bessie ä¼šè¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„å­—ç¬¦ä¸² $t$ï¼Œè€Œä¸€ä¸ªç»„åˆæŠ€æ¯åœ¨ $t$ ä¸­å‡ºç°ä¸€æ¬¡ï¼ŒBessie å°±ä¼šè·å¾—ä¸€åˆ†ã€‚$s_i$ åœ¨ $t$ ä¸­å‡ºç°ä¸€æ¬¡æŒ‡çš„æ˜¯ $s_i$ æ˜¯ $t$ ä»æŸä¸ªä½ç½®èµ·çš„è¿ç»­å­ä¸²ã€‚å¦‚æœ $s_i$ ä» $t$ çš„å¤šä¸ªä½ç½®èµ·éƒ½æ˜¯è¿ç»­å­ä¸²ï¼Œé‚£ä¹ˆç®—ä½œ $s_i$ å‡ºç°äº†å¤šæ¬¡ã€‚

è‹¥ Bessie è¾“å…¥äº†æ°å¥½ $k$ ä¸ªå­—ç¬¦ï¼Œåˆ™å¥¹æœ€å¤šèƒ½è·å¾—å¤šå°‘åˆ†ï¼Ÿ

## è¯´æ˜/æç¤º

#### æ ·ä¾‹ 1 è§£é‡Š

Bessie å¦‚æœè¾“å…¥ `ABACBCB`ï¼Œåˆ™ `ABA` å‡ºç°äº†ä¸€æ¬¡ï¼Œ`ABACB` å‡ºç°äº†ä¸€æ¬¡ï¼Œ`CB` å‡ºç°äº†ä¸¤æ¬¡ï¼Œå…±å¾—åˆ° $4$ åˆ†ã€‚å¯ä»¥è¯æ˜è¿™æ˜¯æœ€ä¼˜çš„è¾“å…¥ã€‚

#### æ•°æ®è§„æ¨¡ä¸çº¦å®š

å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ï¼š

- $1 \leq n \leq 20$ï¼Œ$1 \leq k \leq 10^3$ã€‚
- $1 \leq |s_i| \leq 15$ã€‚å…¶ä¸­ $|s_i|$ è¡¨ç¤ºå­—ç¬¦ä¸² $s_i$ çš„é•¿åº¦ã€‚
- $s$ ä¸­åªå«å¤§å†™å­—æ¯ `A`ï¼Œ`B`ï¼Œ`C`ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 7 
ABA 
CB 
ABACB 
```

### è¾“å‡º

```
4 
```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼š[USACO12JAN] Video Game G æ·±åº¦å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨ACè‡ªåŠ¨æœºæ¨¡å‹ä¸‹ï¼Œé€šè¿‡åŠ¨æ€è§„åˆ’æ‰¾åˆ°é•¿åº¦ä¸ºkçš„å­—ç¬¦ä¸²ï¼Œæœ€å¤§åŒ–å…¶åŒ…å«çš„æ‰€æœ‰æ¨¡å¼ä¸²å‡ºç°æ¬¡æ•°æ€»å’Œã€‚  
âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š`ACè‡ªåŠ¨æœº`ã€`åŠ¨æ€è§„åˆ’`ã€`å­—ç¬¦ä¸²åŒ¹é…`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> æœ¬é¢˜è¦æ±‚æ„é€ ç‰¹å®šé•¿åº¦çš„å­—ç¬¦ä¸²æœ€å¤§åŒ–æ¨¡å¼ä¸²å‡ºç°æ¬¡æ•°ï¼Œæœ¬è´¨æ˜¯**å¤šæ¨¡å¼ä¸²åŒ¹é…çš„æœ€ä¼˜åŒ–é—®é¢˜**ã€‚æˆ‘ä»¬å¯ä»¥æ²¿ç€ä»¥ä¸‹æ€è·¯æ¼”è¿›ï¼š  
> - **æš´åŠ›æœç´¢**ï¼šæšä¸¾æ‰€æœ‰é•¿åº¦ä¸ºkçš„å­—ç¬¦ä¸²ï¼ˆå…±3^kç§ï¼‰ï¼Œç”¨KMPç­‰ç®—æ³•ç»Ÿè®¡æ¨¡å¼ä¸²å‡ºç°æ¬¡æ•°ã€‚æ—¶é—´å¤æ‚åº¦O(3^k * k * n)ï¼Œå®Œå…¨ä¸å¯è¡Œã€‚  
> - **ACè‡ªåŠ¨æœºä¼˜åŒ–**ï¼šåˆ©ç”¨ACè‡ªåŠ¨æœºé«˜æ•ˆå¤„ç†å¤šæ¨¡å¼ä¸²åŒ¹é…ï¼Œç»“åˆåŠ¨æ€è§„åˆ’é¿å…é‡å¤è®¡ç®—ã€‚  
> - **DPçŠ¶æ€è®¾è®¡**ï¼šè®¾dp[i][j]è¡¨ç¤ºé•¿åº¦ä¸ºiçš„å­—ç¬¦ä¸²ï¼Œå½“å‰å¤„äºACè‡ªåŠ¨æœºèŠ‚ç‚¹jæ—¶çš„æœ€å¤§å¾—åˆ†ã€‚é€šè¿‡é¢„å¤„ç†èŠ‚ç‚¹ä»·å€¼ï¼Œå®ç°O(k*M)çš„å¤æ‚åº¦ï¼ˆMä¸ºè‡ªåŠ¨æœºèŠ‚ç‚¹æ•°ï¼‰ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1.  **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š"æœ€å¤§åŒ–å­—ç¬¦ä¸²ä¸­æ¨¡å¼ä¸²å‡ºç°æ¬¡æ•°"æ˜¯**å¤šæ¨¡å¼ä¸²åŒ¹é…çš„æœ€ä¼˜åŒ–é—®é¢˜**ï¼ŒæŒ‡å‘ACè‡ªåŠ¨æœºã€‚
2.  **çº¿ç´¢2 (é—®é¢˜ç‰¹æ€§)**ï¼šæ¨¡å¼ä¸²å­˜åœ¨é‡å å’ŒåŒ…å«å…³ç³»ï¼ˆå¦‚"ABA"æ˜¯"ABACB"çš„å­ä¸²ï¼‰ï¼Œéœ€è¦**é«˜æ•ˆå¤„ç†åç¼€åŒ¹é…**ï¼Œæš—ç¤ºéœ€è¦failæŒ‡é’ˆæœºåˆ¶ã€‚
3.  **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼škâ‰¤1000ï¼Œæ¨¡å¼ä¸²æ€»é•¿â‰¤300ï¼ˆ20*15ï¼‰ï¼ŒACè‡ªåŠ¨æœºèŠ‚ç‚¹æ•°Mâ‰ˆ300ï¼ŒO(k*M)â‰ˆ3e5ï¼Œç¬¦åˆå¯è¡ŒèŒƒå›´ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> "ç»¼åˆçº¿ç´¢ï¼š  
> 1. æœ€ä¼˜åŒ–é—®é¢˜éœ€é«˜æ•ˆåŒ¹é…å¤šæ¨¡å¼ä¸² â†’ ACè‡ªåŠ¨æœºæ˜¯ç†æƒ³é€‰æ‹©  
> 2. å­—ç¬¦ä¸²éœ€æŒ‰é•¿åº¦é€æ­¥æ„é€  â†’ åŠ¨æ€è§„åˆ’è‡ªç„¶å¥‘åˆ  
> 3. æ•°æ®è§„æ¨¡å¦å†³æš´åŠ›æœç´¢ â†’ éœ€O(k*M)çº§ç®—æ³•  
> **ç»“è®º**ï¼šACè‡ªåŠ¨æœºé¢„å¤„ç†èŠ‚ç‚¹ä»·å€¼ + DPçŠ¶æ€è½¬ç§»ï¼Œæ˜¯æœ¬é¢˜çš„æœ€ä¼˜è§£ï¼"

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆä½œè€…ï¼šlgswdn_SAï¼‰**  
* **ç‚¹è¯„**ï¼šè¯¥é¢˜è§£äº®ç‚¹åœ¨äºæ¸…æ™°é˜è¿°ACè‡ªåŠ¨æœºä¸­èŠ‚ç‚¹ä»·å€¼çš„é¢„å¤„ç†â€”â€”é€šè¿‡`tr[u].val=tr[u].fin+tr[tr[u].nxt].val`å°†failé“¾ä»·å€¼ç´¯åŠ åˆ°å½“å‰èŠ‚ç‚¹ã€‚ä»£ç ä¸­ç›´æ¥ä½¿ç”¨é¢„å¤„ç†ä»·å€¼è¿›è¡ŒDPè½¬ç§»ï¼Œé¿å…äº†å®æ—¶è·³failé“¾çš„å¼€é”€ï¼Œæ•ˆç‡æ˜¾è‘—æå‡ã€‚å…¶DPä¸‰é‡å¾ªç¯ç»“æ„ï¼ˆé•¿åº¦Ã—èŠ‚ç‚¹æ•°Ã—å­—ç¬¦é›†ï¼‰ç®€æ´å…¸å‹ï¼Œé€‚åˆä½œä¸ºæ¨¡æ¿å­¦ä¹ ã€‚

**é¢˜è§£äºŒï¼ˆä½œè€…ï¼šOrion545ï¼‰**  
* **ç‚¹è¯„**ï¼šçªå‡ºè´¡çŒ®åœ¨äºè¯¦ç»†åˆ†æäº†æš´åŠ›è§£åˆ°ACè‡ªåŠ¨æœº+DPçš„ä¼˜åŒ–æ€è·¯æ¼”è¿›è¿‡ç¨‹ã€‚é€šè¿‡å¯¹æ¯”æ ‘å½¢DPä¸åˆ†ç»„èƒŒåŒ…ç­‰æ›¿ä»£æ–¹æ¡ˆï¼Œæ·±åŒ–äº†å¯¹ACè‡ªåŠ¨æœºé€‚ç”¨åœºæ™¯çš„ç†è§£ã€‚ä»£ç ä¸­`proc`å‡½æ•°å®æ—¶è®¡ç®—èŠ‚ç‚¹ä»·å€¼çš„æ–¹å¼è™½éæœ€ä¼˜ï¼Œä½†æä¾›äº†ç†è§£failé“¾çš„ç›´è§‚è§†è§’ã€‚

**é¢˜è§£ä¸‰ï¼ˆä½œè€…ï¼šRefined_heartï¼‰**  
* **ç‚¹è¯„**ï¼šåˆ›æ–°æ€§åœ°å°†failæŒ‡é’ˆå¤„ç†ä¸ºæ ‘å½¢ç»“æ„ï¼ˆ`to[T[u].fail].push_back(u)`ï¼‰ï¼Œé€šè¿‡DFSç´¯åŠ å­æ ‘ä»·å€¼ã€‚è¿™ç§è§†è§’æ·±åŒ–äº†å¯¹failé“¾æ‹“æ‰‘å…³ç³»çš„ç†è§£ï¼Œè™½åœ¨æœ¬é¢˜éå¿…è¦ï¼Œä½†å¯¹å¤„ç†æ›´å¤æ‚çš„ACè‡ªåŠ¨æœºé—®é¢˜æœ‰å¯å‘æ„ä¹‰ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1.  **éš¾ç‚¹1ï¼šå¦‚ä½•é‡åŒ–æ¯ä¸ªèŠ‚ç‚¹çš„ä»·å€¼ï¼Ÿ**  
    * **åˆ†æ**ï¼šåœ¨ACè‡ªåŠ¨æœºä¸­ï¼ŒèŠ‚ç‚¹uçš„ä»·å€¼åº”åŒ…å«ï¼šâ‘  ä»¥uç»“å°¾çš„æ¨¡å¼ä¸²æ•°é‡ â‘¡ æ‰€æœ‰failé“¾ä¸Šæ¨¡å¼ä¸²çš„åç¼€åŒ¹é…æ•°é‡ã€‚é€šè¿‡`val[u] = cnt[u] + val[fail[u]]`é¢„å¤„ç†ï¼Œå®ç°O(1)æŸ¥è¯¢ã€‚
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**failé“¾çš„ä»·å€¼ç´¯åŠ **æ˜¯ACè‡ªåŠ¨æœºå¤„ç†é‡å åŒ¹é…çš„æ ¸å¿ƒæŠ€å·§ã€‚

2.  **éš¾ç‚¹2ï¼šå¦‚ä½•è®¾è®¡é«˜æ•ˆDPçŠ¶æ€è½¬ç§»ï¼Ÿ**  
    * **åˆ†æ**ï¼šå®šä¹‰`dp[i][j]`ä¸ºé•¿åº¦iã€ä½äºèŠ‚ç‚¹jçš„æœ€å¤§å¾—åˆ†ã€‚è½¬ç§»æ—¶æšä¸¾ä¸‹ä¸€ä¸ªå­—ç¬¦cï¼š  
      ```cpp
      dp[i+1][ch] = max(dp[i+1][ch], dp[i][j] + val[ch])
      ```
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**çŠ¶æ€è½¬ç§»æ–¹å‘**å§‹ç»ˆæ˜¯çˆ¶èŠ‚ç‚¹å‘å­èŠ‚ç‚¹ä¼ é€’ï¼Œä½“ç°"é€æ­¥æ„é€ å­—ç¬¦ä¸²"çš„ç‰¹æ€§ã€‚

3.  **éš¾ç‚¹3ï¼šå¦‚ä½•åˆå§‹åŒ–ACè‡ªåŠ¨æœºï¼Ÿ**  
    * **åˆ†æ**ï¼šæ ¹èŠ‚ç‚¹ï¼ˆ0æˆ–1ï¼‰ä»£è¡¨ç©ºå­—ç¬¦ä¸²ï¼Œ`dp[0][root]=0`ã€‚éœ€æ³¨æ„ï¼š  
      - å¯¹ä¸å­˜åœ¨çš„è¾¹`trie[u][c]`ï¼ŒæŒ‡å‘`trie[fail[u]][c]`ï¼ˆ`else`éƒ¨åˆ†ï¼‰  
      - BFSæ„å»ºfailæŒ‡é’ˆæ—¶éœ€**åŒæ­¥æ›´æ–°val**ï¼ˆå¦‚é¢˜è§£ä¸€ï¼‰æˆ–**ååºDFSç´¯åŠ **ï¼ˆå¦‚é¢˜è§£ä¸‰ï¼‰
    * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š**è‡ªåŠ¨æœºæ„å»ºçš„å®Œæ•´æ€§**ç›´æ¥å½±å“DPæ­£ç¡®æ€§ï¼Œå»ºè®®å…ˆé€šè¿‡å°æ ·ä¾‹éªŒè¯ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šFailé“¾ä»·å€¼é¢„å¤„ç†**ï¼šé¿å…DPä¸­é‡å¤è·³è½¬ï¼Œå°†O(æ¨¡å¼ä¸²é•¿åº¦)æŸ¥è¯¢ä¼˜åŒ–è‡³O(1)
- **æŠ€å·§Bï¼šè™šæ‹Ÿæ ¹èŠ‚ç‚¹è®¾è®¡**ï¼šç»Ÿä¸€å¤„ç†`trie[0]`çš„å­èŠ‚ç‚¹æŒ‡å‘æ ¹ï¼Œç®€åŒ–ä»£ç 
- **æŠ€å·§Cï¼šDPçŠ¶æ€å‰ªæ**ï¼šè‹¥`dp[i][j]`ä¸ºè´Ÿæ— ç©·ï¼Œè¯´æ˜çŠ¶æ€ä¸å¯è¾¾ï¼Œç›´æ¥è·³è¿‡

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šè§£æ³•å¯¹æ¯”
| ç­–ç•¥             | æ ¸å¿ƒæ€æƒ³                     | ä¼˜ç‚¹                          | ç¼ºç‚¹ä¸åˆ†æ                     | å¾—åˆ†é¢„æœŸ |
|------------------|----------------------------|-----------------------------|-----------------------------|----------|
| **æš´åŠ›æšä¸¾**       | ç”Ÿæˆæ‰€æœ‰3^kå­—ç¬¦ä¸²ç»Ÿè®¡åŒ¹é…æ¬¡æ•° | é€»è¾‘ç®€å•                    | O(3^k * k * n) å¿…ç„¶TLE       | 0%       |
| **KMP+DP**       | å¯¹æ¯ä¸ªæ¨¡å¼ä¸²å•ç‹¬DP          | å•æ¨¡å¼ä¸²åœºæ™¯æœ‰æ•ˆ             | æ— æ³•å¤„ç†å¤šæ¨¡å¼ä¸²é‡å           | 30%      |
| **ACè‡ªåŠ¨æœº+DP**  | è‡ªåŠ¨æœºé¢„å¤„ç†+DPçŠ¶æ€è½¬ç§»      | O(k*M)é«˜æ•ˆï¼Œå¤„ç†é‡å åŒ¹é…      | å®ç°è¾ƒå¤æ‚ï¼Œéœ€ç†è§£failé“¾      | 100%     |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»"èƒ½åš"åˆ°"åšå¥½"
> 1. **èµ·ç‚¹ï¼šæš´åŠ›æšä¸¾çš„å›°å¢ƒ**  
>    3^1000 â‰ˆ 10^477 ç§å¯èƒ½ï¼Œå®‡å®™æ¯ç­ä¹Ÿæ— æ³•ç®—å®Œï¼
> 
> 2. **å‘ç°ç“¶é¢ˆï¼šé‡å¤åŒ¹é…è®¡ç®—**  
>    æ¯æ¬¡æ·»åŠ å­—ç¬¦éƒ½é‡æ–°æ‰«ææ‰€æœ‰æ¨¡å¼ä¸²ï¼Œå¤§é‡é‡å¤è®¡ç®—åç¼€ã€‚
> 
> 3. **å…³é”®è·ƒè¿ï¼šACè‡ªåŠ¨æœºçš„è®°å¿†**  
>    ACè‡ªåŠ¨æœºé€šè¿‡Trieæ ‘å‹ç¼©å­˜å‚¨æ¨¡å¼ä¸²ï¼ŒfailæŒ‡é’ˆè®°å¿†åç¼€åŒ¹é…çŠ¶æ€ã€‚
> 
> 4. **æ¨¡å‹å‡åï¼šDPä¸è‡ªåŠ¨æœºèåˆ**  
>    DPçŠ¶æ€ä¸è‡ªåŠ¨æœºèŠ‚ç‚¹ç»‘å®šï¼Œæ¯æ­¥è½¬ç§»ç­‰ä»·äºåœ¨Trieæ ‘ä¸Šèµ°ä¸€æ­¥ã€‚

ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼š**ç®—æ³•ä¼˜åŒ–æœ¬è´¨æ˜¯å‘ç°å¹¶æ¶ˆé™¤é‡å¤è®¡ç®—**ã€‚ACè‡ªåŠ¨æœºé¢„å¤„ç†failé“¾ä»·å€¼ï¼ŒDPé¿å…é‡å¤æ„é€ å­—ç¬¦ä¸²ï¼ŒåŒé‡ä¼˜åŒ–ç¼ºä¸€ä¸å¯ï¼

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ**
```cpp
#include <cstring>
#include <iostream>
#include <queue>
using namespace std;

const int N = 1005, M = 3000; // é•¿åº¦k, ACè‡ªåŠ¨æœºèŠ‚ç‚¹æ•°
int trie[M][3], val[M], fail[M], dp[N][M];
int n, k, cnt = 1; // cntä»1å¼€å§‹

void insert(string s) {
    int u = 0;
    for (char c : s) {
        int idx = c - 'A';
        if (!trie[u][idx]) trie[u][idx] = cnt++;
        u = trie[u][idx];
    }
    val[u]++;
}

void buildAC() {
    queue<int> q;
    for (int i = 0; i < 3; i++) 
        if (trie[0][i]) q.push(trie[0][i]);
    
    while (!q.empty()) {
        int u = q.front(); q.pop();
        val[u] += val[fail[u]]; // å…³é”®ï¼ç´¯åŠ failé“¾ä»·å€¼
        
        for (int i = 0; i < 3; i++) {
            int &v = trie[u][i];
            if (v) {
                fail[v] = trie[fail[u]][i];
                q.push(v);
            } else {
                v = trie[fail[u]][i]; // æŒ‡å‘failèŠ‚ç‚¹
            }
        }
    }
}

int main() {
    cin >> n >> k;
    while (n--) {
        string s; cin >> s;
        insert(s);
    }
    buildAC();

    memset(dp, -0x3f, sizeof dp);
    dp[0][0] = 0;

    for (int i = 0; i < k; i++) {
        for (int j = 0; j < cnt; j++) {
            for (int c = 0; c < 3; c++) {
                int nxt = trie[j][c];
                dp[i+1][nxt] = max(dp[i+1][nxt], dp[i][j] + val[nxt]);
            }
        }
    }

    int ans = 0;
    for (int i = 0; i < cnt; i++) 
        ans = max(ans, dp[k][i]);
    cout << ans;
}
```

**ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
1. `insert`æ„å»ºTrieæ ‘ï¼Œ`val[u]++`æ ‡è®°æ¨¡å¼ä¸²ç»ˆç‚¹  
2. `buildAC`ä¸­`val[u] += val[fail[u]]`æ˜¯æ ¸å¿ƒä¼˜åŒ–  
3. DPä¸‰é‡å¾ªç¯åˆ†åˆ«æšä¸¾ï¼šå­—ç¬¦ä¸²é•¿åº¦ã€å½“å‰èŠ‚ç‚¹ã€ä¸‹ä¸€ä¸ªå­—ç¬¦  
4. æ—¶é—´å¤æ‚åº¦O(k * èŠ‚ç‚¹æ•° * 3)ï¼Œç©ºé—´O(k * èŠ‚ç‚¹æ•°)

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ğŸ® è®¾è®¡æ¦‚å¿µï¼š**ACè‡ªåŠ¨æœºå¤§å†’é™©**
> é‡‡ç”¨FCçº¢ç™½æœºã€Šå¡å°”è¾¾ä¼ è¯´ã€‹åƒç´ é£æ ¼ï¼Œç©å®¶æ“æ§è§’è‰²åœ¨Trieæ ‘è¿·å®«ä¸­æ”¶é›†é‡‘å¸ï¼ˆæ¨¡å¼ä¸²å¾—åˆ†ï¼‰

### ğŸ–¼ï¸ å…³é”®å¸§è®¾è®¡
1. **åœºæ™¯åˆå§‹åŒ–**ï¼ˆ8-bitåƒç´ é£ï¼‰  
   - èƒŒæ™¯ï¼šæ·±è“ç½‘æ ¼ä»£è¡¨Trieæ ‘ï¼Œç»¿è‰²æ–¹å—ä¸ºèŠ‚ç‚¹
   - è§’è‰²ï¼šåƒç´ å°äººç«™åœ¨æ ¹èŠ‚ç‚¹(0,0)
   - UIï¼šé¡¶éƒ¨æ˜¾ç¤ºé•¿åº¦i=0ï¼Œåˆ†æ•°=0ï¼Œåº•éƒ¨æ§åˆ¶é¢æ¿ï¼ˆå¼€å§‹/æš‚åœ/æ­¥è¿›ï¼‰

2. **æ·»åŠ å­—ç¬¦**ï¼ˆè§’è‰²ç§»åŠ¨ + éŸ³æ•ˆï¼‰  
   ```mermaid
   graph LR
   A[è§’è‰²åœ¨èŠ‚ç‚¹j] -->|æŒ‰Aé”®| B[ç§»åŠ¨åˆ°trie[j][A]]
   B --> C{æ˜¯å¦æ–°èŠ‚ç‚¹?}
   C -->|æ˜¯| D[æ’­æ”¾â€œé‡‘å¸è·å–â€éŸ³æ•ˆ]
   C -->|å¦| E[æ’­æ”¾â€œè¸æ­¥â€éŸ³æ•ˆ]
   ```
   - è§’è‰²å‘A/B/Cæ–¹å‘ç§»åŠ¨æ—¶ï¼Œæ˜¾ç¤ºè·¯å¾„è¿çº¿
   - æ–°å¢èŠ‚ç‚¹æ—¶æ’­æ”¾"é‡‘å¸+1"éŸ³æ•ˆï¼Œåˆ†æ•°å¢åŠ val[æ–°èŠ‚ç‚¹]

3. **Failé“¾å±•ç¤º**ï¼ˆç‰¹æ•ˆæ—¶åˆ»ï¼‰  
   - å½“è§’è‰²åˆ°è¾¾èŠ‚ç‚¹uæ—¶ï¼Œçº¢è‰²å…‰æŸæ²¿fail[u]è·¯å¾„å›æº¯
   - å…‰æŸç»è¿‡çš„èŠ‚ç‚¹å¼¹å‡º`+val`æç¤ºï¼Œä½“ç°ä»·å€¼ç´¯åŠ 
   - æ’­æ”¾"èƒ½é‡æ±‡èš"éŸ³æ•ˆï¼ˆFC Zeldaç§˜æŠ€å£°ï¼‰

4. **èƒœåˆ©ç»“ç®—**  
   - é•¿åº¦i=kæ—¶ï¼Œè§’è‰²åœæ­¢ç§»åŠ¨
   - å±å¹•æ˜¾ç¤º`Max Score: XX`ï¼ˆ8-bitåƒç´ å­—ä½“ï¼‰
   - æ ¹æ®åˆ†æ•°æ’­æ”¾ä¸åŒç»“å±€éŸ³ä¹ï¼ˆ>50%: æ¬¢å¿«æ›² / <50%: é¼“åŠ±æ›²ï¼‰

### ğŸ•¹ï¸ äº¤äº’æ§åˆ¶
- **æ­¥è¿›æ¨¡å¼**ï¼šæŒ‰A/B/Cé”®å•æ­¥ç§»åŠ¨ï¼Œè§‚å¯ŸçŠ¶æ€è½¬ç§»
- **è‡ªåŠ¨æ¼”ç¤º**ï¼šAIè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜è·¯å¾„ï¼Œé€Ÿåº¦å¯è°ƒ
- **æ•™å­¦æ¨¡å¼**ï¼šé«˜äº®æ˜¾ç¤ºä¸‹ä¸€æ­¥çš„æœ€ä¼˜é€‰æ‹©ï¼ˆDPå†³ç­–ç‚¹ï¼‰

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸ”— é€šç”¨æŠ€å·§è¿ç§»
1. **å¸¦æƒå€¼å¤šæ¨¡å¼ä¸²åŒ¹é…**ï¼šå¦‚[NOI2014]åŠ¨ç‰©å›­ï¼Œç»Ÿè®¡æ¨¡å¼ä¸²å‡ºç°æ¬¡æ•°åŠ æƒ
2. **é™åˆ¶æ€§å­—ç¬¦ä¸²æ„é€ **ï¼šå¦‚ç¦æ­¢æŸäº›å­ä¸²å‡ºç°ï¼Œåªéœ€å°†å¯¹åº”èŠ‚ç‚¹è®¾ä¸ºç¦åŒº
3. **æ¦‚ç‡æœŸæœ›é—®é¢˜**ï¼šéšæœºç”Ÿæˆå­—ç¬¦ä¸²ï¼Œæ±‚æœŸæœ›å¾—åˆ†ï¼ˆDP+æ¦‚ç‡è½¬ç§»ï¼‰

### ğŸ“š æ¨èç»ƒä¹ ï¼ˆæ´›è°·ï¼‰
1. **P3808 ACè‡ªåŠ¨æœºï¼ˆç®€å•ç‰ˆï¼‰**  
   â†’ æŒæ¡ACè‡ªåŠ¨æœºåŸºç¡€æ“ä½œ
2. **P2446 å¤§é™†äº‰éœ¸**  
   â†’ æ‹“æ‰‘æ’åº+DPï¼Œç†è§£çŠ¶æ€è½¬ç§»ä¾èµ–
3. **P2414 é˜¿ç‹¸çš„æ‰“å­—æœº**  
   â†’ ACè‡ªåŠ¨æœºä¸æ ‘å½¢ç»“æ„çš„æ·±åº¦ç»“åˆ

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **ç»éªŒæ‘˜å½•ï¼ˆä½œè€…ï¼šyybyybï¼‰**ï¼š  
> "åœ¨è®¡ç®—è´¡çŒ®æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¦åŠ ä¸Šå­ä¸²çš„è´¡çŒ®â€”â€”è¿™æ˜¯æœ¬é¢˜æœ€æ˜“é”™ç‚¹ï¼Œæˆ‘è°ƒè¯•äº†3å°æ—¶æ‰æ˜ç™½ï¼"

> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> æ­¤æ•™è®­æ­ç¤ºACè‡ªåŠ¨æœºçš„æ ¸å¿ƒæœ¬è´¨ï¼š**èŠ‚ç‚¹ä»·å€¼å¿…é¡»åŒ…å«æ•´ä¸ªfailé“¾**ã€‚å»ºè®®ï¼š  
> 1. æ„å»ºACåæ‰“å°æ¯ä¸ªèŠ‚ç‚¹çš„(val, fail)  
> 2. å¯¹å•èŠ‚ç‚¹æ ·ä¾‹ï¼ˆå¦‚åªæœ‰"ABA"ï¼‰æ‰‹åŠ¨éªŒè¯DPè¿‡ç¨‹  
> è°ƒè¯•ACè‡ªåŠ¨æœºçš„é»„é‡‘æ³•åˆ™ï¼š**å°æ ·ä¾‹å¤§æ™ºæ…§ï¼**

---

æœ¬æ¬¡ACè‡ªåŠ¨æœº+DPçš„æ¢é™©åˆ°æ­¤ç»“æŸï¼Œè®°ä½ï¼š**ä¼˜ç§€ç®—æ³•=é—®é¢˜è½¬åŒ–+æ¶ˆé™¤å†—ä½™**ã€‚ä¸‹æ¬¡æŒ‘æˆ˜å†è§ï¼ğŸš€

---
å¤„ç†ç”¨æ—¶ï¼š142.00ç§’
# é¢˜ç›®ä¿¡æ¯

# [SDOI2013] æ·˜é‡‘

## é¢˜ç›®æè¿°

å° Z åœ¨ç©ä¸€ä¸ªå«åšã€Šæ·˜é‡‘è€…ã€‹çš„æ¸¸æˆã€‚æ¸¸æˆçš„ä¸–ç•Œæ˜¯ä¸€ä¸ªäºŒç»´åæ ‡ã€‚$X$ è½´ã€$Y$ è½´åæ ‡èŒƒå›´å‡ä¸º$1\ldots N$ã€‚åˆå§‹çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„æ•´æ•°åæ ‡ç‚¹ä¸Šå‡æœ‰ä¸€å—é‡‘å­ï¼Œå…± $N^2$ å—ã€‚

ä¸€é˜µé£å¹è¿‡ï¼Œé‡‘å­çš„ä½ç½®å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚ç»†å¿ƒçš„å° Z å‘ç°ï¼Œåˆå§‹åœ¨ $(i,j)$ åæ ‡å¤„çš„é‡‘å­ä¼šå˜åˆ° $(f(i),f(j))$ åæ ‡å¤„ã€‚å…¶ä¸­ $f(x)$ è¡¨ç¤º $x$ å„ä½æ•°å­—çš„ä¹˜ç§¯ï¼Œä¾‹å¦‚ $f(99)=81,~f(12)=2,~f(10)=0$ã€‚

å¦‚æœé‡‘å­å˜åŒ–åçš„åæ ‡ä¸åœ¨ $1\ldots N$ çš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™å—é‡‘å­å·²ç»è¢«ç§»å‡ºæ¸¸æˆã€‚åŒæ—¶å¯ä»¥å‘ç°ï¼Œå¯¹äºå˜åŒ–ä¹‹åçš„æ¸¸æˆå±€é¢ï¼ŒæŸäº›åæ ‡ä¸Šçš„é‡‘å­æ•°é‡å¯èƒ½ä¸æ­¢ä¸€å—ï¼Œè€Œå¦å¤–ä¸€äº›åæ ‡ä¸Šå¯èƒ½å·²ç»æ²¡æœ‰é‡‘å­ã€‚è¿™æ¬¡å˜åŒ–ä¹‹åï¼Œæ¸¸æˆå°†ä¸ä¼šå†å¯¹é‡‘å­çš„ä½ç½®å’Œæ•°é‡è¿›è¡Œæ”¹å˜ï¼Œç©å®¶å¯ä»¥å¼€å§‹è¿›è¡Œé‡‡é›†å·¥ä½œã€‚

å° Z å¾ˆæ‡’ï¼Œæ‰“ç®—åªè¿›è¡Œ $K$ æ¬¡é‡‡é›†ã€‚æ¯æ¬¡é‡‡é›†å¯ä»¥å¾—åˆ°æŸä¸€ä¸ªåæ ‡ä¸Šçš„æ‰€æœ‰é‡‘å­ï¼Œé‡‡é›†ä¹‹åï¼Œè¯¥åæ ‡ä¸Šçš„é‡‘å­æ•°å˜ä¸º $0$ã€‚

ç°åœ¨å° Z å¸Œæœ›çŸ¥é“ï¼Œå¯¹äºå˜åŒ–ä¹‹åçš„æ¸¸æˆå±€é¢ï¼Œåœ¨é‡‡é›†æ¬¡æ•°ä¸º $K$ çš„å‰æä¸‹ï¼Œæœ€å¤šå¯ä»¥é‡‡é›†åˆ°å¤šå°‘å—é‡‘å­ï¼Ÿ ç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œå° Z å¸Œæœ›å¾—åˆ°å¯¹ $10^9+7$ å–æ¨¡ä¹‹åçš„ç­”æ¡ˆã€‚

## è¯´æ˜/æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$N \leq 10^{12}, K \leq \min(N^2, 10^5)$ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
12 5```

### è¾“å‡º

```
18```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šæ·˜é‡‘ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨æ•°å­—å˜æ¢è§„åˆ™ä¸‹ï¼ˆ$f(x)$è¡¨ç¤ºå„ä½æ•°å­—ä¹˜ç§¯ï¼‰ï¼Œé«˜æ•ˆå¤„ç†$10^{12}$èŒƒå›´å†…æ•°å­—çš„å˜æ¢ç»“æœç»Ÿè®¡ï¼Œå¹¶æ±‚å‰Kå¤§é‡‘å—æ•°é‡çš„å’Œ  
âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼šæ•°ä½åŠ¨æ€è§„åˆ’ã€ç¦»æ•£åŒ–ã€å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰  

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è¿™é“é¢˜çœ‹ä¼¼äºŒç»´é—®é¢˜ï¼ˆåæ ‡å˜æ¢ï¼‰ï¼Œå®åˆ™å¯åˆ†è§£ä¸ºä¸¤ä¸ªä¸€ç»´é—®é¢˜ï¼šé¦–å…ˆç»Ÿè®¡æ‰€æœ‰$f(i)$å€¼ï¼ˆå„ä½ä¹˜ç§¯ï¼‰çš„å‡ºç°æ¬¡æ•°$c(i)$ï¼Œç„¶åæ±‚$c(x) \times c(y)$çš„å‰Kå¤§å€¼ä¹‹å’Œã€‚æ ¸å¿ƒéš¾ç‚¹åœ¨äºï¼š  
> 1. $f(i)$å€¼èŒƒå›´æå¤§ï¼ˆ$10^{12}$ï¼‰ï¼Œä½†æœ‰æ•ˆçŠ¶æ€æœ‰é™ï¼ˆä»…$2^a3^b5^c7^d$å½¢å¼ï¼‰  
> 2. éœ€é«˜æ•ˆè®¡ç®—æ¯ä¸ª$f(i)$å¯¹åº”å¤šå°‘æ•°å­—ï¼ˆæ•°ä½DPï¼‰  
> 3. å‰Kå¤§ä¹˜ç§¯å’Œçš„ä¼˜åŒ–è®¡ç®—ï¼ˆé¿å…$O(n^2)$æšä¸¾ï¼‰  
>  
> **è§£é¢˜æ€è·¯æ¼”è¿›**ï¼š  
> - æš´åŠ›æ³•ï¼šæšä¸¾æ‰€æœ‰$i,j$ï¼Œè®¡ç®—$f(i),f(j)$ â†’ $O(N^2)$è¶…æ—¶  
> - æ•°ä½DP+ç¦»æ•£åŒ–ï¼šå°†$f(i)$çŠ¶æ€ç¦»æ•£ä¸ºæœ‰é™ä¸ªä¹˜ç§¯å€¼ï¼ˆçº¦8282ä¸ªï¼‰  
> - å †ä¼˜åŒ–ï¼šç”¨ä¼˜å…ˆé˜Ÿåˆ—é«˜æ•ˆæ±‚å‰Kå¤§ä¹˜ç§¯å’Œ  

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼šæ±‚"ä¸è¶…è¿‡é¢„ç®—n"ä¸‹"ä»·å€¼æ€»å’Œæœ€å¤§"ï¼Œè¿™æ˜¯**å¸¦çº¦æŸçš„æœ€ä¼˜åŒ–é—®é¢˜**ï¼Œä¸”æ¶‰åŠæ•°å­—å˜æ¢ç»Ÿè®¡ï¼ŒæŒ‡å‘**æ•°ä½DP**å’Œ**ç¦»æ•£åŒ–**æŠ€å·§ã€‚
2. **çº¿ç´¢2 (é—®é¢˜ç‰¹æ€§)**ï¼š$f(x)$æ˜¯**å„ä½ä¹˜ç§¯**ï¼Œä¸”$x \leq 10^{12}$ï¼Œä¹˜ç§¯çŠ¶æ€å¯è¡¨ç¤ºä¸º$2^a3^b5^c7^d$ï¼Œæ€»é‡çº¦$O(\log^4 N)$ï¼Œå¯ç¦»æ•£åŒ–å¤„ç†ã€‚
3. **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼š$N=10^{12}$ï¼Œ$K \leq 10^5$ã€‚æ•°ä½DPçŠ¶æ€æ•°$10^4 \times 12 \times 10 = 1.2 \times 10^6$å¯æ¥å—ï¼Œå †æ“ä½œ$O(K \log M)$å¯è¡Œï¼ˆ$M \approx 8000$ï¼‰ã€‚

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> "ç»¼åˆçº¿ç´¢ï¼š  
> 1. **çº¿ç´¢1**ï¼ˆæœ€ä¼˜åŒ–+æ•°å­—ç»Ÿè®¡ï¼‰æš—ç¤ºéœ€è¦é«˜æ•ˆè®¡æ•°ç®—æ³• â†’ æ•°ä½DPæ˜¯è‡ªç„¶é€‰æ‹©  
> 2. **çº¿ç´¢2**ï¼ˆä¹˜ç§¯çŠ¶æ€æœ‰é™ï¼‰æç¤ºç¦»æ•£åŒ–å¯å‹ç¼©çŠ¶æ€ç©ºé—´ â†’ é¢„å¤„ç†$2^a3^b5^c7^d$çš„åˆæ³•å€¼  
> 3. **çº¿ç´¢3**ï¼ˆ$K \leq 10^5$ï¼‰è¡¨æ˜éœ€é¿å…$O(M^2)$æšä¸¾ â†’ ç”¨å †ç»´æŠ¤å½“å‰æœ€å¤§ä¹˜ç§¯  
>  
> **ç»“è®º**ï¼š**æ•°ä½DP+ç¦»æ•£åŒ–+å †ä¼˜åŒ–**å®Œç¾å¥‘åˆæ‰€æœ‰æ¡ä»¶ï¼š  
> - æ•°ä½DPå¤„ç†æ•°å­—ç»Ÿè®¡  
> - ç¦»æ•£åŒ–è§£å†³çŠ¶æ€çˆ†ç‚¸  
> - å †é«˜æ•ˆæ±‚å‰Kå¤§å’Œ"

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

**é¢˜è§£ä¸€ï¼ˆxyz32768ï¼‰**  
* **ç‚¹è¯„**ï¼šæ€è·¯æœ€æ¸…æ™°å®Œæ•´ï¼Œç¦»æ•£åŒ–å¤„ç†ç®€æ´ï¼Œæ•°ä½DPçŠ¶æ€å®šä¹‰åˆç†ï¼ˆ$dp[i][j][0/1]$è¡¨ç¤º$i$ä½ã€ç¦»æ•£çŠ¶æ€$j$ã€æ˜¯å¦å—é™ï¼‰ã€‚å †ä¼˜åŒ–éƒ¨åˆ†ç”¨$(i,j)$é…å¯¹é¿å…é‡å¤è®¡ç®—ï¼Œä»£ç è§„èŒƒæ˜“è¯»ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ã€‚  

**é¢˜è§£äºŒï¼ˆGeorge1123ï¼‰**  
* **ç‚¹è¯„**ï¼šåˆ›æ–°ä½¿ç”¨è®°å¿†åŒ–æœç´¢å®ç°æ•°ä½DPï¼ŒçŠ¶æ€è®¾è®¡ç®€æ´ï¼ˆ$dp(w,now,ava)$ï¼‰ã€‚äº®ç‚¹åœ¨é¢„å¤„ç†ç¦»æ•£çŠ¶æ€æ—¶ç”¨DFSè€Œéæšä¸¾ï¼Œå‡å°‘å†—ä½™ã€‚å †æ“ä½œéƒ¨åˆ†ä¸é¢˜è§£ä¸€ç±»ä¼¼ï¼Œä½†å˜é‡å‘½åæ›´ç›´è§‚ã€‚  

**é¢˜è§£ä¸‰ï¼ˆViXbobï¼‰**  
* **ç‚¹è¯„**ï¼šé‡‡ç”¨"æšä¸¾æ•°ç ä¸ªæ•°+å¤šé‡å…¨æ’åˆ—"æ›¿ä»£ç¦»æ•£åŒ–ï¼Œæä¾›æ–°è§†è§’ã€‚æ•°ä½DPä¸­ç»„åˆæ•°å­¦çš„åº”ç”¨æœ‰å¯å‘æ€§ï¼Œä½†å®ç°ç¨å¤æ‚ã€‚å †ä¼˜åŒ–éƒ¨åˆ†ä¸ä¸»æµè§£æ³•ä¸€è‡´ã€‚  

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
1. **å…³é”®ç‚¹1ï¼šçŠ¶æ€ç¦»æ•£åŒ–**  
   * **åˆ†æ**ï¼š$f(i)$çš„å€¼å¯è¡¨ç¤ºä¸º$2^a3^b5^c7^d$ï¼Œé¢„è®¡ç®—æ‰€æœ‰$\leq N$çš„æ­¤ç±»æ•°ï¼ˆDFSæšä¸¾$a,b,c,d$ï¼‰ï¼Œç”¨mapç¦»æ•£ä¸º$id \rightarrow value$å’Œ$value \rightarrow id$ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šç¦»æ•£åŒ–å°†æ— é™çŠ¶æ€å‹ç¼©ä¸ºæœ‰é™é›†åˆï¼Œæ˜¯å¤„ç†å¤§èŒƒå›´é—®é¢˜çš„å…³é”®æŠ€å·§ã€‚  

2. **å…³é”®ç‚¹2ï¼šæ•°ä½DPè®¾è®¡**  
   * **åˆ†æ**ï¼šçŠ¶æ€$dp[pos][id][lim]$ï¼š  
     - $pos$: å½“å‰å¤„ç†ä½æ•°ï¼ˆä»é«˜ä½åˆ°ä½ä½ï¼‰  
     - $id$: å½“å‰ä¹˜ç§¯ç¦»æ•£å€¼  
     - $lim$: æ˜¯å¦å—$N$é™åˆ¶  
     è½¬ç§»ï¼šæšä¸¾ä¸‹ä¸€ä½æ•°å­—$d$ï¼ˆ1-9ï¼‰ï¼Œæ›´æ–°ä¹˜ç§¯$id_{new} = id \times d$ï¼Œæ›´æ–°$lim$çŠ¶æ€ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ•°ä½DPéœ€å¤„ç†å‰å¯¼é›¶ï¼ˆæœ¬é¢˜å¿½ç•¥0ï¼‰ï¼ŒçŠ¶æ€è½¬ç§»æ—¶æ³¨æ„ä¹˜ç§¯è¶…ç•Œå‰ªæã€‚  

3. **å…³é”®ç‚¹3ï¼šå †ä¼˜åŒ–æ±‚å‰Kå¤§å’Œ**  
   * **åˆ†æ**ï¼š  
     1. å°†$c[i]$ï¼ˆ$f$å€¼å‡ºç°æ¬¡æ•°ï¼‰é™åºæ’åº  
     2. åˆå§‹åŒ–å †ï¼šæ¯å¯¹$(i,0)$è¡¨ç¤º$c[i] \times c[0]$ï¼ˆ$c[0]$æ˜¯æœ€å¤§å€¼ï¼‰  
     3. æ¯æ¬¡å–å †é¡¶$c[i] \times c[j]$è®¡å…¥ç­”æ¡ˆï¼Œå¹¶æ¨å…¥$(i, j+1)$  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ­¤æ–¹æ³•é¿å…$O(M^2)$æšä¸¾ï¼Œå¤æ‚åº¦$O(K \log M)$ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§1ï¼ˆé—®é¢˜è½¬åŒ–ï¼‰**ï¼šå°†äºŒç»´åæ ‡é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªä¸€ç»´ç»Ÿè®¡é—®é¢˜  
- **æŠ€å·§2ï¼ˆç¦»æ•£åŒ–ï¼‰**ï¼šç”¨DFSæšä¸¾æœ‰æ•ˆä¹˜ç§¯çŠ¶æ€ï¼ŒmapåŒå‘æ˜ å°„  
- **æŠ€å·§3ï¼ˆå †çš„å¦™ç”¨ï¼‰**ï¼šç»´æŠ¤$(i,j)$é…å¯¹æŒ‡é’ˆï¼Œé«˜æ•ˆè·å–å½“å‰æœ€å¤§ä¹˜ç§¯  

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ
| ç­–ç•¥                | æ ¸å¿ƒæ€æƒ³                     | ä¼˜ç‚¹                     | ç¼ºç‚¹                                      | å¾—åˆ†é¢„æœŸ         |
|---------------------|-----------------------------|--------------------------|------------------------------------------|------------------|
| **æš´åŠ›æšä¸¾**        | ç›´æ¥è®¡ç®—æ¯å¯¹$(i,j)$çš„$f$å€¼  | æ€è·¯ç®€å•                 | $O(N^2)$è¶…æ—¶ï¼ˆ$N=10^{12}$ï¼‰              | 0%               |
| **æ•°ä½DP+ç¦»æ•£åŒ–**   | ç¦»æ•£$f(i)$çŠ¶æ€+æ•°ä½DPç»Ÿè®¡   | çŠ¶æ€æ•°å°‘ï¼ˆ$10^4$ï¼‰        | éœ€ç²¾ç»†è®¾è®¡DPçŠ¶æ€è½¬ç§»                     | 100%             |
| **å¤šé‡å…¨æ’åˆ—**      | æšä¸¾æ•°ç ä¸ªæ•°ç”¨ç»„åˆå…¬å¼è®¡ç®—  | é¿å…ç¦»æ•£åŒ–                | è¾¹ç•Œå¤„ç†å¤æ‚ï¼Œæ˜“å‡ºé”™                     | 100%ï¼ˆå®ç°å¤æ‚ï¼‰ |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
1. **èµ·ç‚¹ï¼šæš´åŠ›æ³•** â†’ æšä¸¾$i,j$è®¡ç®—$f(i),f(j)$ â†’ $O(N^2)=10^{24}$è¶…æ—¶  
2. **ç¬¬ä¸€ä¼˜åŒ–ï¼šæ•°ä½DP** â†’ å°†æ•°å­—ç»Ÿè®¡é™è‡³$O(\log N \cdot M)$ï¼ˆ$M$ä¸ºç¦»æ•£çŠ¶æ€æ•°ï¼‰  
3. **ç¬¬äºŒä¼˜åŒ–ï¼šç¦»æ•£åŒ–** â†’ å‹ç¼©çŠ¶æ€ç©ºé—´è‡³$O(\log^4 N) \approx 8000$  
4. **ç¬¬ä¸‰ä¼˜åŒ–ï¼šå †ç»´æŠ¤ä¹˜ç§¯** â†’ å‰Kå¤§å’Œè®¡ç®—ä»$O(M^2)$é™è‡³$O(K \log M)$  
> ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼š"å¥½çš„ç®—æ³•=æ·±åˆ»é—®é¢˜æ´å¯Ÿ+åˆé€‚æ•°æ®ç»“æ„+å¤æ‚åº¦ä¼˜åŒ–"

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

**é€šç”¨æ ¸å¿ƒå®ç°ï¼ˆåŸºäºxyz32768é¢˜è§£ç²¾ç®€ï¼‰**  
```cpp
#include <map>
#include <queue>
#include <algorithm>
using namespace std;
typedef long long ll;
const int MAX = 15000, MOD = 1e9+7;

map<ll, int> idMap;   // ä¹˜ç§¯å€¼->ç¦»æ•£ID
ll states[MAX], c[MAX]; // ç¦»æ•£çŠ¶æ€å’Œè®¡æ•°
ll dp[13][MAX][2];     // dp[ä½][çŠ¶æ€ID][é™åˆ¶]
int digit[13], cnt;    // Nçš„å„ä½å’Œç¦»æ•£çŠ¶æ€æ•°

// DFSé¢„å¤„ç†ç¦»æ•£çŠ¶æ€
void dfs(ll p) {
    if (p > n || idMap.count(p)) return;
    idMap[p] = cnt;
    states[cnt++] = p;
    dfs(p*2); dfs(p*3); dfs(p*5); dfs(p*7);
}

// æ•°ä½DPè®¡ç®—c[i]
void digitDP() {
    int len = 0;
    for (ll t = n; t; t /= 10) digit[++len] = t % 10;
    // åˆå§‹åŒ–æœ€é«˜ä½
    for (int d = 1; d <= digit[len]; ++d) {
        if (!idMap.count(d)) continue;
        int id = idMap[d], lim = (d == digit[len]);
        dp[len][id][lim] = 1;
    }
    // ä»é«˜åˆ°ä½DP
    for (int pos = len; pos > 1; --pos) {
        for (int id = 0; id < cnt; ++id) {
            for (int lim : {0, 1}) {
                if (!dp[pos][id][lim]) continue;
                ll cur = states[id];
                int up = lim ? digit[pos-1] : 9;
                for (int d = 1; d <= up; ++d) {
                    if (cur * d > n) continue;
                    int nid = idMap[cur * d], nlim = lim && (d == up);
                    dp[pos-1][nid][nlim] += dp[pos][id][lim];
                }
            }
        }
    }
    // ç»Ÿè®¡c[i]
    for (int id = 0; id < cnt; ++id)
        for (int pos = 1; pos <= len; ++pos)
            c[id] += dp[pos][id][0] + (pos < len ? dp[pos][id][1] : 0);
}
```

**å †ä¼˜åŒ–æ±‚å‰Kå¤§å’Œ**  
```cpp
priority_queue<tuple<ll, int, int>> pq; // (ä¹˜ç§¯å€¼, i, j)
sort(c, c + cnt, greater<ll>());        // é™åºæ’åˆ—

// åˆå§‹åŒ–å †
for (int i = 0; i < cnt; ++i) 
    pq.push({c[i] * c[0], i, 0});

ll ans = 0;
while (K-- && !pq.empty()) {
    auto [val, i, j] = pq.top(); pq.pop();
    ans = (ans + val) % MOD;
    if (j + 1 < cnt) 
        pq.push({c[i] * c[j+1], i, j+1});
}
```

**é¢˜è§£ä¸€ï¼ˆxyz32768ï¼‰äº®ç‚¹**  
- **ç¦»æ•£åŒ–å¤„ç†**ï¼š`dfs`ç”Ÿæˆæœ‰æ•ˆä¹˜ç§¯çŠ¶æ€ï¼Œ`idMap`åŒå‘æ˜ å°„  
- **æ•°ä½DPè½¬ç§»**ï¼šæ¸…æ™°å¤„ç†é™åˆ¶çŠ¶æ€ï¼Œé¿å…æ— æ•ˆæšä¸¾  
- **å †ä¼˜åŒ–**ï¼šç”¨`tuple`å­˜å‚¨ä¸‰å…ƒç»„ï¼Œä»£ç ç®€æ´  

**é¢˜è§£äºŒï¼ˆGeorge1123ï¼‰äº®ç‚¹**  
- **è®°å¿†åŒ–æœç´¢**ï¼š`dp(w,now,ava)`å‚æ•°è®¾è®¡ç®€æ´  
- **é¢„å¤„ç†æŠ€å·§**ï¼šDFSç”ŸæˆçŠ¶æ€è€Œéæš´åŠ›æšä¸¾  

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

**ä¸»é¢˜**ï¼š8-bitçŸ¿å·¥æ·˜é‡‘å¤§å†’é™©  
**æ ¸å¿ƒæ¼”ç¤º**ï¼šæ•°ä½DPçŠ¶æ€è½¬ç§» + å †ç»´æŠ¤å‰Kå¤§è¿‡ç¨‹  

### åŠ¨ç”»è®¾è®¡
1. **åœºæ™¯å¸ƒå±€**ï¼š  
   - å·¦ä¾§ï¼š12x10ç½‘æ ¼ä»£è¡¨æ•°ä½DPï¼ˆè¡Œ=ä½æ•°ï¼Œåˆ—=æ•°å­—0-9ï¼‰  
   - å³ä¾§ï¼šå †ç»“æ„ï¼ˆå¤§æ ¹å †ï¼‰ï¼Œæ–¹å—é«˜åº¦=ä¹˜ç§¯å€¼  
   - ä¸‹æ–¹ï¼šæ§åˆ¶é¢æ¿ï¼ˆæ’­æ”¾/æš‚åœ/æ­¥è¿›ï¼‰  

2. **æ•°ä½DPæ¼”ç¤º**ï¼š  
   - çŸ¿å·¥è§’è‰²ä»é«˜ä½å‘ä½ä½ç§»åŠ¨  
   - é€‰æ‹©æ•°å­—$d$æ—¶ï¼š  
     * æ˜¾ç¤ºå½“å‰ä¹˜ç§¯$state \times d$  
     * æ— æ•ˆæ—¶é—ªçƒçº¢å…‰ï¼ˆ$>N$ï¼‰  
     * æ›´æ–°ç¦»æ•£çŠ¶æ€IDï¼ˆå³ä¾§æ˜¾ç¤ºæ˜ å°„è¡¨ï¼‰  

3. **å †æ“ä½œæ¼”ç¤º**ï¼š  
   - åˆå§‹åŒ–ï¼š$c[i]$æ’åºåï¼Œæ¯ä¸ª$i$ç”Ÿæˆæ–¹å—ï¼Œé«˜åº¦$=c[i] \times c[0]$  
   - å–å †é¡¶ï¼šé¡¶éƒ¨æ–¹å—é«˜äº®çˆ†ç‚¸ï¼Œé‡‘å¸+1  
   - æ–°å…ƒç´ å…¥å †ï¼šä»$i$åˆ—å‡èµ·æ–°æ–¹å—ï¼Œé«˜åº¦$=c[i] \times c[j+1]$  

4. **æ¸¸æˆåŒ–å…ƒç´ **ï¼š  
   - éŸ³æ•ˆï¼šæ•°å­—é€‰æ‹©ï¼ˆ8-bitéŸ³é˜¶ï¼‰ï¼Œæœ‰æ•ˆè½¬ç§»ï¼ˆé‡‘å¸å£°ï¼‰ï¼Œæ— æ•ˆæ“ä½œï¼ˆä½æ²‰éŸ³ï¼‰  
   - ç§¯åˆ†ï¼šæ¯å®Œæˆä¸€ä½DPå¾—10åˆ†ï¼Œå–å †é¡¶å¾—$c[i] \times c[j]$åˆ†  

**æŠ€æœ¯å®ç°**ï¼š  
- Canvasç»˜åˆ¶ç½‘æ ¼/å †ç»“æ„ï¼ŒCSSåƒç´ é£æ ·å¼  
- Web Audio APIæ’­æ”¾éŸ³æ•ˆ  
- æ§åˆ¶é¢æ¿ç”¨rangeæ»‘å—è°ƒé€Ÿ  

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

**é€šç”¨æŠ€å·§è¿ç§»**ï¼š  
1. æ•°å­—ç»Ÿè®¡é—®é¢˜ â†’ æ•°ä½DPï¼ˆ[P2606]æ’åˆ—è®¡æ•°ï¼‰  
2. ç¦»æ•£åŒ–å¤„ç†å¤§èŒƒå›´çŠ¶æ€ â†’ è´¨å› æ•°åˆ†è§£+DFSï¼ˆ[P1062]æ•°åˆ—ï¼‰  
3. å‰Kå¤§å’Œå †ä¼˜åŒ– â†’ å¤šæŒ‡é’ˆ+ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆ[P1631]åºåˆ—åˆå¹¶ï¼‰  

**æ¨èç»ƒä¹ **ï¼š  
1. **æ´›è°· P2606**ï¼šåŸºç¡€æ•°ä½DPï¼Œç»Ÿè®¡æ•°å­—å‡ºç°æ¬¡æ•°  
   > "å·©å›ºæ•°ä½DPçŠ¶æ€è®¾è®¡"  
2. **æ´›è°· P2657**ï¼šç»å…¸windyæ•°é—®é¢˜  
   > "ç»ƒä¹ ç›¸é‚»æ•°ä½çº¦æŸå¤„ç†"  
3. **æ´›è°· P2216**ï¼šç†æƒ³çš„æ­£æ–¹å½¢ï¼ˆäºŒç»´æœ€å€¼ï¼‰  
   > "å †ç»´æŠ¤æœ€å€¼æ€æƒ³çš„æ‰©å±•åº”ç”¨"  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

**ä½œè€…è°ƒè¯•ç»éªŒï¼ˆxyz32768ï¼‰**ï¼š  
> "ç¦»æ•£åŒ–æ—¶æœªå¤„ç†$f(i)=0$ï¼ˆå«æ•°å­—0ï¼‰ï¼Œå¯¼è‡´çŠ¶æ€æ•°é”™è¯¯ã€‚è§£å†³æ–¹æ¡ˆï¼šæšä¸¾æ•°ç æ—¶è·³è¿‡0ï¼ŒDPä¸­å¿½ç•¥0è½¬ç§»ã€‚"  

**æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> æ•°ä½DPçš„**è¾¹ç•Œå¤„ç†**å’Œ**æ— æ•ˆçŠ¶æ€å‰ªæ**æ˜¯è°ƒè¯•é‡ç‚¹ï¼š  
> 1. ç”¨å°æ•°æ®éªŒè¯çŠ¶æ€è½¬ç§»  
> 2. æ‰“å°ä¸­é—´çŠ¶æ€ï¼ˆå¦‚æ¯ä½çš„DPå€¼ï¼‰  
> 3. ç¦»æ•£åŒ–å‰å…ˆæ•°å­¦åˆ†ææœ‰æ•ˆçŠ¶æ€èŒƒå›´  

---

> "ç®—æ³•å­¦ä¹ å¦‚åŒæ·˜é‡‘ï¼šç­›å»æ²™ç ¾ï¼ˆæ— æ•ˆæ€è·¯ï¼‰ï¼Œä¿ç•™é‡‘å—ï¼ˆæ ¸å¿ƒæŠ€å·§ï¼‰ï¼Œæœ€ç»ˆç‚¼æˆç²¾å“ï¼ˆæœ€ä¼˜è§£ï¼‰ã€‚"  
> â€”â€”æ´›è¯­äº‘ç¬º

---
å¤„ç†ç”¨æ—¶ï¼š281.66ç§’
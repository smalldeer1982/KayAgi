# é¢˜ç›®ä¿¡æ¯

# [CEOI 2017] Building Bridges

## é¢˜ç›®æè¿°

æœ‰ $n$ æ ¹æŸ±å­ä¾æ¬¡æ’åˆ—ï¼Œæ¯æ ¹æŸ±å­éƒ½æœ‰ä¸€ä¸ªé«˜åº¦ã€‚ç¬¬ $i$ æ ¹æŸ±å­çš„é«˜åº¦ä¸º $h_i$ã€‚

ç°åœ¨æƒ³è¦å»ºé€ è‹¥å¹²åº§æ¡¥ï¼Œå¦‚æœä¸€åº§æ¡¥æ¶åœ¨ç¬¬ $i$ æ ¹æŸ±å­å’Œç¬¬ $j$ æ ¹æŸ±å­ä¹‹é—´ï¼Œé‚£ä¹ˆéœ€è¦ $(h_i-h_j)^2$â€‹â€‹ çš„ä»£ä»·ã€‚

åœ¨é€ æ¡¥å‰ï¼Œæ‰€æœ‰ç”¨ä¸åˆ°çš„æŸ±å­éƒ½ä¼šè¢«æ‹†é™¤ï¼Œå› ä¸ºä»–ä»¬ä¼šå¹²æ‰°é€ æ¡¥è¿›ç¨‹ã€‚ç¬¬ $i$ æ ¹æŸ±å­è¢«æ‹†é™¤çš„ä»£ä»·ä¸º $w_i$ï¼Œæ³¨æ„ $w_i$ ä¸ä¸€å®šéè´Ÿï¼Œå› ä¸ºå¯èƒ½æ”¿åºœå¸Œæœ›æ‹†é™¤æŸäº›æŸ±å­ã€‚

ç°åœ¨æ”¿åºœæƒ³è¦çŸ¥é“ï¼Œé€šè¿‡æ¡¥æ¢æŠŠç¬¬ $1$ æ ¹æŸ±å­å’Œç¬¬ $n$ æ ¹æŸ±å­è¿æ¥çš„æœ€å°ä»£ä»·ã€‚æ³¨æ„æ¡¥æ¢ä¸èƒ½åœ¨ç«¯ç‚¹ä»¥å¤–çš„ä»»ä½•åœ°æ–¹ç›¸äº¤ã€‚

## è¯´æ˜/æç¤º

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œæœ‰ $2\le n\le 10^5;0\le h_i,\vert w_i\vert\le 10^6$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
6
3 8 7 1 6 6
0 -1 9 1 2 0```

### è¾“å‡º

```
17```

# AIåˆ†æç»“æœ


# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šBuilding Bridges æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> "è¿™é“é¢˜çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºå¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»å’Œé¢„ç®—çº¦æŸï¼ŒåŒæ—¶ä¼˜åŒ–ä»·å€¼é€‰æ‹©ã€‚"  
> â€”â€” æ´›è¯­äº‘ç¬º

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼šåœ¨ä¸è¶…è¿‡é¢„ç®—nçš„å‰æä¸‹ï¼Œé€šè¿‡åˆç†é€‰æ‹©ä¸»ä»¶å’Œé™„ä»¶çš„ç»„åˆï¼Œæœ€å¤§åŒ–æ€»ä»·å€¼ã€‚ç‰©å“é—´å­˜åœ¨ä¸»ä»¶-é™„ä»¶ä¾èµ–å…³ç³»ï¼Œä¸”é™„ä»¶å¿…é¡»ä¾èµ–ä¸»ä»¶å­˜åœ¨ï¼Œå†³ç­–å…·æœ‰ä¾èµ–æ€§ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š`åŠ¨æ€è§„åˆ’(DP)` `åˆ†ç»„èƒŒåŒ…`

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
> è¿™é“é¢˜è¦æ±‚æˆ‘ä»¬åœ¨é¢„ç®—çº¦æŸä¸‹æœ€å¤§åŒ–ç‰©å“ä»·å€¼ï¼Œä½†ç‰©å“é—´å­˜åœ¨ä¸»ä»¶-é™„ä»¶çš„ä¾èµ–å…³ç³»ã€‚æœ€ç›´è§‚çš„è§£æ³•æ˜¯æš´åŠ›æšä¸¾æ‰€æœ‰ç»„åˆï¼ˆæŒ‡æ•°çº§å¤æ‚åº¦ï¼‰ï¼Œä½†æ•°æ®è§„æ¨¡ï¼ˆMâ‰¤60ï¼‰ä½¿å…¶ä¸å¯è¡Œã€‚é€šè¿‡é—®é¢˜è½¬åŒ–ï¼Œæˆ‘ä»¬å°†ä¾èµ–å…³ç³»è½¬åŒ–ä¸ºåˆ†ç»„å†³ç­–â€”â€”æ¯ä¸ªä¸»ä»¶åŠå…¶é™„ä»¶å½¢æˆä¸€ç»„ï¼Œç»„å†…æœ€å¤šé€‰ä¸€ç§ç»„åˆï¼ˆå¦‚åªä¹°ä¸»ä»¶ã€ä¸»ä»¶+é™„ä»¶1ç­‰ï¼‰ã€‚è¿™å®Œç¾å¥‘åˆåˆ†ç»„èƒŒåŒ…æ¨¡å‹ï¼šç»„ä½œä¸ºå¤–å±‚å¾ªç¯ï¼Œé¢„ç®—ä½œä¸ºå†…å±‚å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¼˜åŒ–è‡³O(N*M)ã€‚

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ

1. **çº¿ç´¢1 (é—®é¢˜ç›®æ ‡)**ï¼š"é¢˜ç›®è¦æ±‚æˆ‘ä»¬åœ¨'ä¸è¶…è¿‡é¢„ç®—n'çš„å‰æä¸‹ï¼Œæ±‚'ä»·å€¼æ€»å’Œæœ€å¤§'ã€‚è¿™ç§ã€å¸¦é™åˆ¶çš„æœ€ä¼˜åŒ–ã€‘é—®é¢˜ï¼Œæ˜¯åŠ¨æ€è§„åˆ’ï¼Œç‰¹åˆ«æ˜¯èƒŒåŒ…é—®é¢˜çš„å…¸å‹æ ‡å¿—ã€‚"
2. **çº¿ç´¢2 (é—®é¢˜çº¦æŸ/ç‰¹æ€§)**ï¼š"é¢˜ç›®ä¸­çš„'ä¸»ä»¶'å’Œ'é™„ä»¶'å…³ç³»ï¼Œè¯´æ˜ç‰©å“é€‰æ‹©ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œå­˜åœ¨ã€ä¾èµ–æ€§ã€‘ã€‚è¿™æ’é™¤äº†ç®€å•01èƒŒåŒ…ï¼ŒæŒ‡å‘äº†æ›´å¤æ‚çš„ã€ä¾èµ–èƒŒåŒ…ã€‘æˆ–ã€åˆ†ç»„èƒŒåŒ…ã€‘æ¨¡å‹ã€‚"
3. **çº¿ç´¢3 (æ•°æ®è§„æ¨¡)**ï¼š"Næœ€å¤§32000ï¼ŒMæœ€å¤§60ã€‚ä¸€ä¸ªO(N*M)çš„ç®—æ³•ï¼ˆçº¦2*10^6æ¬¡è®¡ç®—ï¼‰æ˜¯å¯ä»¥é€šè¿‡çš„ã€‚è¿™è¿›ä¸€æ­¥éªŒè¯äº†æˆ‘ä»¬ä½¿ç”¨DPæ˜¯åˆç†çš„ã€‚å¦‚æœMå¾ˆå¤§ï¼Œæˆ‘ä»¬å¯èƒ½å°±è¦è€ƒè™‘å…¶ä»–æ–¹æ³•äº†ã€‚"

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> "å¥½äº†ï¼Œä¾¦æ¢å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬æ”¶é›†åˆ°äº†å‡ æ¡å…³é”®çº¿ç´¢ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åƒæ‹¼å›¾ä¸€æ ·æŠŠå®ƒä»¬ç»„åˆèµ·æ¥ï¼š
> 1. é¦–å…ˆï¼Œã€çº¿ç´¢1ï¼šé—®é¢˜ç›®æ ‡ã€‘å‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªâ€˜æœ€ä¼˜åŒ–â€™é—®é¢˜ï¼Œæˆ‘çš„å¤§è„‘é‡Œç«‹åˆ»é—ªè¿‡äº†â€˜è´ªå¿ƒâ€™ã€â€˜æœç´¢â€™ã€â€˜åŠ¨æ€è§„åˆ’â€™è¿™å‡ ä¸ªå€™é€‰æ–¹æ¡ˆã€‚
> 2. æ¥ç€ï¼Œã€çº¿ç´¢2ï¼šé—®é¢˜ç‰¹æ€§ã€‘ï¼Œæ¯”å¦‚â€˜ç‰©å“é—´çš„ä¾èµ–å…³ç³»â€™ï¼Œç»™äº†æˆ‘ä¸€ä¸ªå†³å®šæ€§çš„æç¤ºã€‚ç®€å•çš„è´ªå¿ƒç­–ç•¥åœ¨è¿™é‡Œå¾ˆå¯èƒ½ä¼šå‡ºé”™ï¼Œå› ä¸ºå®ƒæ— æ³•å¤„ç†å¤æ‚çš„ä¾èµ–å†³ç­–ã€‚è€Œçº¯ç²¹çš„æš´åŠ›æœç´¢ï¼Œè™½ç„¶ç†è®ºä¸Šå¯è¡Œï¼Œä½†æˆ‘ä»¬å¾—çœ‹çœ‹æ•°æ®èŒƒå›´ã€‚
> 3. æœ€åï¼Œã€çº¿ç´¢3ï¼šæ•°æ®è§„æ¨¡ã€‘ç»™äº†æˆ‘ä»¬æœ€ç»ˆåˆ¤å†³ã€‚N=32000ï¼ŒM=60ï¼ŒæŒ‡æ•°çº§çš„æš´åŠ›æœç´¢ (O(2^M)) ç»å¯¹ä¼šè¶…æ—¶ï¼ˆTLEï¼‰ã€‚è€Œä¸€ä¸ª O(N*M) å·¦å³çš„ç®—æ³•æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚
> 4. **ç»“è®º**ï¼šç»¼åˆä»¥ä¸Šï¼Œä¸€ä¸ªèƒ½å¤Ÿå¤„ç†â€˜ä¾èµ–é€‰æ‹©â€™å¹¶æ±‚è§£â€˜æœ€ä¼˜åŒ–â€™ï¼Œä¸”æ—¶é—´å¤æ‚åº¦åœ¨å¤šé¡¹å¼çº§åˆ«çš„ç®—æ³•ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ã€‚**åŠ¨æ€è§„åˆ’**ï¼Œç‰¹åˆ«æ˜¯ä¸ºå¤„ç†è¿™ç±»ä¾èµ–å…³ç³»è€Œè®¾è®¡çš„**åˆ†ç»„èƒŒåŒ…æ¨¡å‹**ï¼Œå®Œç¾ç¬¦åˆæ‰€æœ‰æ¡ä»¶ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦æ·±å…¥ç ”ç©¶çš„ä¸»æ”»æ–¹å‘ï¼"

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> æˆ‘ä»¬ä»æ€è·¯æ¸…æ™°åº¦ã€ä»£ç è§„èŒƒæ€§ã€ç®—æ³•ä¼˜åŒ–ç¨‹åº¦ç­‰ç»´åº¦ç­›é€‰å‡ºä»¥ä¸‹è¯„åˆ†â‰¥4æ˜Ÿçš„ä¼˜è´¨é¢˜è§£ï¼š

**é¢˜è§£ä¸€ï¼šæè¶…çº¿æ®µæ ‘è§£æ³• (ä½œè€…ï¼španyf)**  
* **ç‚¹è¯„**ï¼šæ­¤è§£æ³•åˆ›æ–°æ€§åœ°å°†DPè½¬ç§»è½¬åŒ–ä¸ºç›´çº¿æ±‚æœ€å°å€¼é—®é¢˜ï¼Œåˆ©ç”¨æè¶…çº¿æ®µæ ‘é«˜æ•ˆå¤„ç†ã€‚æ€è·¯æ¸…æ™°ï¼Œä»£ç ç®€æ´ï¼ˆä»…30è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰ï¼Œå·§å¦™é¿å…äº†å¤æ‚çš„ä¾èµ–å…³ç³»å¤„ç†ã€‚äº®ç‚¹åœ¨äºå°†é—®é¢˜æŠ½è±¡ä¸ºå‡ ä½•é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦O(n log n)å®Œå…¨æ»¡è¶³è¦æ±‚ã€‚ä»£ç ä¸­lambdaè¡¨è¾¾å¼`g`å°è£…è®¡ç®—é€»è¾‘ï¼Œå¢å¼ºå¯è¯»æ€§ï¼Œæ˜¯ç«èµ›ç¼–ç¨‹çš„å…¸èŒƒã€‚

**é¢˜è§£äºŒï¼šCDQåˆ†æ²»è§£æ³• (ä½œè€…ï¼šRusalka)**  
* **ç‚¹è¯„**ï¼šé€šè¿‡CDQåˆ†æ²»å¤„ç†æ–œç‡ä¼˜åŒ–çš„éå•è°ƒæ€§é—®é¢˜ï¼Œç»“æ„ä¸¥è°¨ï¼Œæ¨å¯¼å®Œæ•´ã€‚è™½ç„¶å®ç°è¾ƒå¤æ‚ï¼Œä½†ä½œè€…è¯¦ç»†è§£é‡Šäº†åˆ†æ²»ç­–ç•¥å¦‚ä½•ä¿è¯å†³ç­–æœ‰åºæ€§ï¼Œå¹¶å¤„ç†äº†è¾¹ç•Œæ¡ä»¶ã€‚ä»£ç ä¸­å½’å¹¶æ’åºå’Œå‡¸åŒ…ç»´æŠ¤é€»è¾‘æ¸…æ™°ï¼Œç‰¹åˆ«é€‚åˆå­¦ä¹ è€…ç†è§£åˆ†æ²»æ€æƒ³åœ¨DPä¼˜åŒ–ä¸­çš„åº”ç”¨ã€‚

**é¢˜è§£ä¸‰ï¼šäºŒè¿›åˆ¶åˆ†ç»„è§£æ³• (ä½œè€…ï¼šCCCCOrz)**  
* **ç‚¹è¯„**ï¼šé‡‡ç”¨äºŒè¿›åˆ¶åˆ†ç»„æ›¿ä»£å¹³è¡¡æ ‘ç»´æŠ¤å‡¸åŒ…ï¼Œé™ä½å®ç°éš¾åº¦ã€‚ä½œè€…é€šè¿‡åˆ†ç»„åˆå¹¶ç­–ç•¥å¤„ç†åŠ¨æ€æ’å…¥é—®é¢˜ï¼Œå¤æ‚åº¦O(n logÂ² n)ä»å¯é€šè¿‡ã€‚ä»£ç ä¸­åˆ†ç»„ç®¡ç†å’Œæ–œç‡ä¼˜åŒ–ç»“åˆå·§å¦™ï¼Œå°¤å…¶é€‚åˆå·²æŒæ¡åŸºç¡€æ–œç‡ä¼˜åŒ–ä½†æƒ³æ‹“å±•æ€è·¯çš„å­¦ä¹ è€…ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ (åˆ†ç»„èƒŒåŒ…æœ€ä¼˜è§£)
1. **å…³é”®ç‚¹1ï¼šä¾èµ–å…³ç³»è½¬åŒ–**  
   * **åˆ†æ**ï¼šå°†ä¸»ä»¶é™„ä»¶ç»„åˆé¢„å¤„ç†ä¸ºäº’æ–¥çš„"è´­ä¹°å¥—é¤"ï¼ˆå¦‚ä¸»ä»¶ã€ä¸»ä»¶+é™„ä»¶1ã€ä¸»ä»¶+é™„ä»¶2ã€ä¸»ä»¶+åŒé™„ä»¶ï¼‰ï¼Œå½¢æˆç‰©å“ç»„ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€šè¿‡é¢„å¤„ç†å°†æ ‘å½¢ä¾èµ–è½¬åŒ–ä¸ºå¹³é¢å†³ç­–ï¼Œæ˜¯å¤„ç†å¤æ‚ä¾èµ–å…³ç³»çš„é€šç”¨æŠ€å·§ã€‚

2. **å…³é”®ç‚¹2ï¼šåˆ†ç»„èƒŒåŒ…çŠ¶æ€è®¾è®¡**  
   * **åˆ†æ**ï¼šå®šä¹‰`dp[j]`ä¸ºé¢„ç®—jä¸‹çš„æœ€å¤§ä»·å€¼ã€‚å¤–å±‚å¾ªç¯éå†ç»„ï¼ˆä¸»ä»¶ï¼‰ï¼Œå†…å±‚å€’åºå¾ªç¯é¢„ç®—ï¼ˆé˜²æ­¢é‡å¤é€‰æ‹©ï¼‰ã€‚å¯¹æ¯ç»„å†…çš„5ç§å¥—é¤ï¼Œç”¨`max(dp[j], dp[j-cost]+value)`æ›´æ–°çŠ¶æ€ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†ç»„èƒŒåŒ…çš„æ ¸å¿ƒæ˜¯"æ¯ç»„åªé€‰ä¸€ç§"ï¼Œé€šè¿‡é¢„ç®—å€’åºä¿è¯å†³ç­–ç‹¬ç«‹æ€§ã€‚

3. **å…³é”®ç‚¹3ï¼šç©ºé—´ä¼˜åŒ–æŠ€å·§**  
   * **åˆ†æ**ï¼šä½¿ç”¨æ»šåŠ¨æ•°ç»„æˆ–ä¸€ç»´DPæ•°ç»„ï¼Œå°†ç©ºé—´å¤æ‚åº¦ä»O(N*M)ä¼˜åŒ–è‡³O(N)ã€‚  
   * ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šèƒŒåŒ…é—®é¢˜ä¸­ï¼ŒçŠ¶æ€è½¬ç§»ä»…ä¾èµ–å‰ä¸€ç»„æ•°æ®ï¼Œå‹ç¼©ç©ºé—´æ˜¯é™ä½å†…å­˜å ç”¨çš„å…³é”®ã€‚

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§A (é—®é¢˜è½¬åŒ–)**ï¼šå°†ä¾èµ–å…³ç³»è½¬åŒ–ä¸ºåˆ†ç»„å†³ç­–ï¼ŒåŒ–æ ‘å½¢é—®é¢˜ä¸ºçº¿æ€§DPã€‚
- **æŠ€å·§B (æ—¶é—´/ç©ºé—´æƒè¡¡)**ï¼šç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼Œä»¥å°‘é‡ä»£ç æ¢å–å†…å­˜æ•ˆç‡ã€‚
- **æŠ€å·§C (é¢„å¤„ç†ä¼˜åŒ–)**ï¼šæå‰è®¡ç®—ç»„åˆå¥—é¤ï¼Œé¿å…DPè¿‡ç¨‹ä¸­é‡å¤è®¡ç®—ã€‚

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•çš„å¯¹æ¯”åˆ†æ

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ä¸åˆ†æ | é€‚ç”¨åœºæ™¯ / å¾—åˆ†é¢„æœŸ |
| :--- | :--- | :--- | :--- |:--- |
| **æš´åŠ›æœç´¢** | æšä¸¾æ‰€æœ‰ä¸»ä»¶/é™„ä»¶ç»„åˆ | é€»è¾‘ç›´è§‚ï¼Œæ˜“å®ç° | æŒ‡æ•°çº§å¤æ‚åº¦O(2^M)ï¼ŒM>30å³è¶…æ—¶ | Mâ‰¤20ï¼Œå¾—åˆ†â‰¤30% |
| **ä¾èµ–èƒŒåŒ… (æ ‘å½¢DP)** | å°†ä¾èµ–è§†ä¸ºæ ‘å½¢ç»“æ„ | å¤„ç†å¤æ‚ä¾èµ–æ›´çµæ´» | ä»£ç å¤æ‚ï¼Œæœ¬é¢˜é™„ä»¶é™åˆ¶ä½¿ä¼˜åŠ¿ä¸æ˜¾ | é€šç”¨ä¾èµ–é—®é¢˜ï¼Œå¾—åˆ†100% |
| **åˆ†ç»„èƒŒåŒ… (æœ¬é¢˜æœ€ä¼˜)** | ä¸»é™„ä»¶ç»„åˆè½¬åŒ–ä¸ºäº’æ–¥å¥—é¤ | æ—¶é—´å¤æ‚åº¦O(N*M)ï¼Œä»£ç ç®€æ´ | éœ€é¢„å¤„ç†ç»„åˆ | æœ¬é¢˜æœ€ä½³ï¼Œå¾—åˆ†100% |

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»"èƒ½åš"åˆ°"åšå¥½"
> 1. **èµ·ç‚¹ï¼šæš´åŠ›æœç´¢**  
>    å°è¯•æ‰€æœ‰ç»„åˆçš„æœ´ç´ æ–¹æ³•ï¼Œä½†M=60æ—¶2^60â‰ˆ1e18æ¬¡è®¡ç®—è¿œè¶…æ—¶é™ã€‚
> 2. **å‘ç°ç“¶é¢ˆï¼šé‡å¤å†³ç­–**  
>    è§‚å¯Ÿå‘ç°ä¸åŒé¢„ç®—ä¸‹çš„å†³ç­–å­˜åœ¨é‡å å­é—®é¢˜ï¼Œå¦‚"é¢„ç®—500æ—¶é€‰ä¸»ä»¶A"çš„å†³ç­–å¯å¤ç”¨ã€‚
> 3. **ä¼˜åŒ–çš„é’¥åŒ™ï¼šåˆ†ç»„èƒŒåŒ…**  
>    å°†ä¸»é™„ä»¶æ‰“åŒ…ä¸º"å¥—é¤ç»„"ï¼Œæ¯ç»„å†…å†³ç­–äº’æ–¥ï¼Œæ¶ˆé™¤ä¾èµ–å…³ç³»å¤æ‚æ€§ã€‚
> 4. **æ¨¡å‹çš„å‡å**  
>    é€šè¿‡"ç»„-é¢„ç®—"åŒå±‚å¾ªç¯ï¼Œå°†O(2^M)ä¼˜åŒ–è‡³O(N*M)ï¼Œå®ç°é‡çº§çªç ´ã€‚

ğŸ’¡ **ç­–ç•¥æ€»ç»“**ï¼šä»æš´åŠ›åˆ°åˆ†ç»„èƒŒåŒ…çš„ä¼˜åŒ–ï¼Œä½“ç°äº†"é—®é¢˜è½¬åŒ–"çš„æ ¸å¿ƒæ€æƒ³ã€‚åœ¨ç«èµ›ä¸­ï¼Œå³ä½¿æ— æ³•æƒ³åˆ°æœ€ä¼˜è§£ï¼ŒåŸºäºæš´åŠ›è§£æ³•çš„å‰ªæä¹Ÿå¯èƒ½è·å¾—éƒ¨åˆ†åˆ†ï¼Œè€Œæœ€ä¼˜è§£åˆ™éœ€æ·±å…¥ç†è§£é—®é¢˜ç»“æ„ã€‚

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### åˆ†ç»„èƒŒåŒ…é€šç”¨å®ç°
```cpp
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    int n, m; // é¢„ç®—n, ç‰©å“æ•°m
    cin >> n >> m;
    vector<vector<pair<int, int>>> groups; // å­˜å‚¨æ¯ç»„å¥—é¤(ä»·æ ¼, ä»·å€¼)
    vector<int> main_cost(m), main_val(m);
    vector<vector<int>> attach_cost(m), attach_val(m);

    // é¢„å¤„ç†: å°†ä¸»ä»¶é™„ä»¶ç»„åˆè½¬åŒ–ä¸ºå¥—é¤
    for (int i = 0; i < m; i++) {
        cin >> main_cost[i] >> main_val[i];
        int cnt; cin >> cnt;
        while (cnt--) {
            int c, v; cin >> c >> v;
            attach_cost[i].push_back(c);
            attach_val[i].push_back(v);
        }
        
        // ç”Ÿæˆè¯¥ä¸»ä»¶å¯¹åº”çš„5ç§å¥—é¤
        vector<pair<int, int>> comb = {
            {main_cost[i], main_val[i]} // ä»…ä¸»ä»¶
        };
        for (int j = 0; j < attach_cost[i].size(); j++) {
            comb.push_back({main_cost[i] + attach_cost[i][j], 
                           main_val[i] + attach_val[i][j]});
        }
        if (attach_cost[i].size() > 1) { // ä¸»ä»¶+åŒé™„ä»¶
            comb.push_back({main_cost[i] + attach_cost[i][0] + attach_cost[i][1],
                           main_val[i] + attach_val[i][0] + attach_val[i][1]});
        }
        groups.push_back(comb);
    }

    // åˆ†ç»„èƒŒåŒ…DP
    vector<int> dp(n + 1, 0);
    for (auto &group : groups) {          // éå†ç»„
        for (int j = n; j >= 0; j--) {   // å€’åºéå†é¢„ç®—
            for (auto &[cost, val] : group) { // éå†ç»„å†…å¥—é¤
                if (j >= cost) 
                    dp[j] = max(dp[j], dp[j - cost] + val);
            }
        }
    }
    cout << dp[n];
}
```

### ä»£ç è§£è¯»æ¦‚è¦
1. **é¢„å¤„ç†é˜¶æ®µ**ï¼šå°†æ¯ä¸ªä¸»ä»¶åŠå…¶é™„ä»¶ç»„åˆè½¬åŒ–ä¸º5ç§äº’æ–¥å¥—é¤
2. **DPé˜¶æ®µ**ï¼šä¸‰é‡å¾ªç¯å®ç°åˆ†ç»„èƒŒåŒ…
   - å¤–å±‚ï¼šéå†ç‰©å“ç»„
   - ä¸­å±‚ï¼šå€’åºå¾ªç¯é¢„ç®—ï¼ˆä¿è¯æ¯ç»„åªé€‰ä¸€æ¬¡ï¼‰
   - å†…å±‚ï¼šæšä¸¾ç»„å†…å¥—é¤æ›´æ–°çŠ¶æ€

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

* **åŠ¨ç”»ä¸»é¢˜**ï¼š8ä½åƒç´ é£æ ¼"èƒŒåŒ…æ¢é™©å®¶"  
* **æ ¸å¿ƒæ¼”ç¤º**ï¼šåˆ†ç»„èƒŒåŒ…å†³ç­–è¿‡ç¨‹

### è®¾è®¡æ€è·¯
```plaintext
 é¢„ç®—åˆ»åº¦: [0â–’â–’â–’â–’â–’â–’100]  å½“å‰ç»„: ä¸»ä»¶A (4ç§å¥—é¤)
 èƒŒåŒ…çŠ¶æ€: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 70/100
 å†³ç­–é€‰é¡¹:
   (1) ä»…ä¸»ä»¶: â–ˆâ–ˆ 30é‡‘å¸ â†’ +50ä»·å€¼
   (2) ä¸»+é™„ä»¶1: â–ˆâ–ˆâ–ˆâ–ˆ 50é‡‘å¸ â†’ +80ä»·å€¼
   (3) ä¸»+é™„ä»¶2: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 70é‡‘å¸ â†’ +110ä»·å€¼
   (4) ä¸»+åŒé™„ä»¶: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 90é‡‘å¸ â†’ +140ä»·å€¼

 åŠ¨ç”»æ•ˆæœ:
   - é‡‘å¸å †ç§»åŠ¨æ—¶äº§ç”Ÿ"é‡‘å¸ç¢°æ’"åƒç´ éŸ³æ•ˆ(8-bitéŸ³æ•ˆ)
   - é€‰æ‹©å¥—é¤(3)æ—¶, 70é‡‘å¸æ®µé—ªçƒé‡‘è‰², ä»·å€¼+110
   - å‰©ä½™é¢„ç®—æ¡æ›´æ–°: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 30/100
```

* **æŠ€æœ¯å®ç°**ï¼š
  - ä½¿ç”¨Canvasç»˜åˆ¶èƒŒåŒ…çŠ¶æ€æ¡å’Œé‡‘å¸åŠ¨ç”»
  - æŒ‰é”®æ§åˆ¶ï¼šâ†â†’é€‰æ‹©å¥—é¤ï¼Œç©ºæ ¼ç¡®è®¤
  - éŸ³æ•ˆï¼šWeb Audio APIç”Ÿæˆ8-bitéŸ³æ•ˆ
  - å†³ç­–æç¤ºï¼š"é€‰æ‹©å¥—é¤(3)æ€§ä»·æ¯”æœ€ä¼˜ï¼"

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
åˆ†ç»„èƒŒåŒ…æ€æƒ³é€‚ç”¨äºï¼š
1. è¯¾ç¨‹é€‰ä¿®ï¼ˆä¸»è¯¾+å®éªŒè¯¾ç»„åˆï¼‰
2. è£…å¤‡æ‰“é€ ï¼ˆæ­¦å™¨+å®çŸ³ç»„åˆï¼‰
3. æŠ•èµ„ç»„åˆï¼ˆæœ¬é‡‘+ä¿é™©ç»„åˆï¼‰

### æ¨èé¢˜ç›®
1. **æ´›è°·P1064 [é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ]**  
   â†’ æœ¬é¢˜çš„ç›´æ¥å˜å½¢ï¼Œå·©å›ºåˆ†ç»„èƒŒåŒ…
2. **æ´›è°·P2014 [é€‰è¯¾]**  
   â†’ æ ‘å½¢ä¾èµ–èƒŒåŒ…ï¼Œå­¦ä¹ ä¾èµ–å…³ç³»å¤„ç†
3. **æ´›è°·P1156 [åƒåœ¾é™·é˜±]**  
   â†’ ç‰¹æ®Šçº¦æŸä¸‹çš„èƒŒåŒ…å˜å½¢

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«
> "è°ƒè¯•æ—¶å‘ç°æœªå¤„ç†é™„ä»¶ä¸ºç©ºçš„æƒ…å†µï¼Œå¯¼è‡´ç»„åˆç”Ÿæˆé”™è¯¯ã€‚è¿™æé†’æˆ‘ä»¬ï¼šè¾¹ç•Œæ¡ä»¶æ˜¯ç®—æ³•å¥å£®æ€§çš„å…³é”®ï¼"  
> â€”â€” ç²¾é€‰é¢˜è§£ä½œè€…è°ƒè¯•ç»éªŒ

ğŸ’¡ **æ•™è®­æ€»ç»“**ï¼š  
- é¢„å¤„ç†é˜¶æ®µéœ€ç‰¹åˆ¤é™„ä»¶æ•°ä¸º0/1çš„æƒ…å†µ
- ä½¿ç”¨`assert`éªŒè¯ç»„åˆç”Ÿæˆé€»è¾‘
- æ‰“å°ä¸­é—´å˜é‡éªŒè¯çŠ¶æ€è½¬ç§»

---

> "ç®—æ³•ä¼˜åŒ–å¦‚åŒæ­æ¡¥ï¼Œä»æš´åŠ›æšä¸¾çš„æµ®æ¡¥ï¼Œåˆ°åˆ†ç»„èƒŒåŒ…çš„é’¢æ¶æ¡¥ï¼Œæ¯ä¸€æ­¥è¿›åŒ–éƒ½æºäºå¯¹é—®é¢˜æœ¬è´¨çš„æ·±åˆ»æ´å¯Ÿã€‚"  
> â€”â€” æ´›è¯­äº‘ç¬º Â· äºç®—æ³•ä¹‹æ¹–ç•”

---
å¤„ç†ç”¨æ—¶ï¼š339.56ç§’
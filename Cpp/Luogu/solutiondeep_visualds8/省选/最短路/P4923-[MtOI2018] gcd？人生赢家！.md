# é¢˜ç›®ä¿¡æ¯

# [MtOI2018] gcdï¼Ÿäººç”Ÿèµ¢å®¶ï¼

## é¢˜ç›®èƒŒæ™¯

gcd æ˜¯ä¸€ä¸ªçƒ­çˆ±æ¸¸æˆçš„äººã€‚

## é¢˜ç›®æè¿°

gcd æœ€è¿‘åœ¨ç©ä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆã€‚

æˆ‘ä»¬æŠŠè¿™ä¸ªæ¸¸æˆæŠ½è±¡æˆä¸€å¼ å›¾ï¼Œå›¾ä¸Šæœ‰ $n$ ä¸ªç‚¹ï¼Œgcd éœ€è¦å¯»æ‰¾æ€»è®¡ $m$ ä»¶å®ç‰©ï¼Œå®ƒä»¬åˆ†å¸ƒåœ¨å›¾ä¸Šã€‚

å¯¹äºæ¯ä»¶å®ç‰©è€Œè¨€ï¼Œå°†ä¼šæœ‰ä¸€ä¸ªå‰ç½®é›†åˆ $S$ã€‚åªæœ‰å½“å–å¾—æ‰€æœ‰å‰ç½®å®ç‰©æ—¶ï¼Œæ‰èƒ½è·å¾—è¯¥å®ç‰©ã€‚

gcd æ‹¥æœ‰ä¸€ä»¶ç¥å™¨ï¼Œè¿™ä»¶ç¥å™¨å…·æœ‰ä¼ é€åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ $k$ æ¬¡ï¼Œå¯ä»¥ä¼ é€åˆ°ä¸€ä¸ªä»»æ„èŠ‚ç‚¹ã€‚

å¯¹äºæ¸¸æˆè€Œè¨€ï¼Œè‚¯å®šä¼šæœ‰é¢å¤–çš„æˆå°±ï¼Œè¿™äº›æˆå°±ä¼šå¥–åŠ±ä¸€å®šçš„ä¼ é€æ¬¡æ•°ï¼Œæˆå°±çš„è¾¾æˆæ˜¯æ»¡è¶³é›†åˆ $S$ çš„ä¸€ç¬é—´ã€‚

ç°åœ¨ gcd æƒ³çŸ¥é“èƒ½æœ€å¿«é€šå…³çš„æ–¹æ³•ï¼Œè¯·ä½ æ±‚å‡ºé€šå…³çš„æœ€å°‘æ—¶é—´ã€‚

## è¯´æ˜/æç¤º

### å­ä»»åŠ¡

å¯¹äº $20\%$ çš„æ•°æ®ï¼Œ$s=0$ã€‚

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$n\leq 200$ï¼Œ$m\leq 12$ï¼Œ$k\leq 4$ï¼Œ$s\leq 8$ï¼Œ$e\leq 20000$ ï¼Œå¥–åŠ±æ¬¡æ•°æ€»å’Œä¸è¶…è¿‡ $8$ï¼Œä¿è¯æ¯ä¸¤ä¸ªå®ç‰©çš„ä½ç½®ä¸ç›¸åŒï¼Œå¯èƒ½æœ‰é‡è¾¹ï¼Œä¿è¯æœ‰è§£ã€‚

### é¢˜ç›®æ¥æº

[MtOI2018 è¿·é€”ã®å®¶ã®æ°´é¢˜å¤§èµ›](https://www.luogu.org/contest/11260) T5

å‡ºé¢˜äººï¼šb2019dy

78488

## æ ·ä¾‹ #1

### è¾“å…¥

```
3 2 0
1
1 1
1
2 3
3
1 2 20
1 3 20
3 2 1
0
0
1
```

### è¾“å‡º

```
20```

## æ ·ä¾‹ #2

### è¾“å…¥

```
3 2 0
1
1 1
1
2 3
3
1 2 1
1 3 20
3 2 20
1 2
0
1```

### è¾“å‡º

```
40```

# AIåˆ†æç»“æœ

# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼š[MtOI2018] gcdï¼Ÿäººç”Ÿèµ¢å®¶ï¼æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ä¸€é“â€œçŠ¶å‹ + æœ€çŸ­è·¯ + åˆ†å±‚å›¾â€çš„ç»¼åˆå¥½é¢˜ã€‚å®ƒä¸ä»…è€ƒéªŒç¼–ç åŠ›ï¼Œæ›´åƒä¸€åœºå¯»å®æ¸¸æˆï¼šè¦åœ¨å›¾ä¸­æ”¶é›†å®ç‰©ï¼Œè¿˜è¦åˆ©ç”¨ä¼ é€ç¥å™¨ä¸æˆå°±å¥–åŠ±ï¼Œä»¥æœ€å°‘æ­¥æ•°é€šå…³ã€‚å‡†å¤‡å¥½åƒç´ æ¢é™©äº†å—ï¼Ÿ

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

### âœ¨ æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜
â€œåœ¨ä¸€å¼ æœ€å¤š 200 ä¸ªèŠ‚ç‚¹çš„å›¾ä¸Šï¼Œæœ€å¤š 12 ä»¶å®ç‰©ï¼Œæ¯ä»¶å®ç‰©æœ‰å‰ç½®ä¾èµ–ï¼›åˆå§‹æœ€å¤š 4 æ¬¡ä»»æ„ç‚¹ä¼ é€ï¼Œä¸”å¯é€šè¿‡æˆå°±é¢å¤–è·å¾—ä¼ é€æ¬¡æ•°ã€‚æ±‚æ”¶é›†æ‰€æœ‰å®ç‰©çš„**æœ€çŸ­æ­¥æ•°**ã€‚â€

### âœ¨ æ ¸å¿ƒç®—æ³•æ ‡ç­¾
- **çŠ¶æ€å‹ç¼© DPï¼ˆçŠ¶å‹ï¼‰**
- **Floyd å…¨æºæœ€çŸ­è·¯**
- **åˆ†å±‚å›¾ / ä¼ é€æ¬¡æ•°ç»´åº¦**
- **BFSï¼ˆä½œä¸ºå¦ä¸€ç§æ€è·¯ï¼‰**

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
| çº¿ç´¢ | è¯´æ˜ |
|---|---|
| **çº¿ç´¢ 1ï¼šèŒƒå›´æå°** | `m â‰¤ 12` â†’ 2^12 = 4096 ç§å®ç‰©çŠ¶æ€ï¼Œå¤©ç„¶æš—ç¤º**çŠ¶å‹**ã€‚ |
| **çº¿ç´¢ 2ï¼šä¾èµ–å…³ç³»** | æ¯ä¸ªå®ç‰©æœ‰å‰ç½®é›†åˆ â†’ éœ€è¦åœ¨çŠ¶æ€é‡Œ**æŒ‰ä½æ£€æŸ¥**æ˜¯å¦æ»¡è¶³ã€‚ |
| **çº¿ç´¢ 3ï¼šä¼ é€ & æˆå°±** | ä¼ é€æ¬¡æ•°å¯å˜ â†’ å¼•å…¥**é¢å¤–ç»´åº¦**ï¼ˆå‰©ä½™ä¼ é€æ¬¡æ•°ï¼‰ï¼Œå½¢æˆ**åˆ†å±‚å›¾**ã€‚ |
| **çº¿ç´¢ 4ï¼šæœ€çŸ­æ­¥æ•°** | å›¾è®ºç»å…¸ç›®æ ‡ â†’ å…ˆç”¨ Floyd é¢„å¤„ç†ä»»æ„ä¸¤ç‚¹æœ€çŸ­è·¯ï¼Œå†åœ¨å‹ç¼©çŠ¶æ€é‡Œåš DP/BFSã€‚ |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> 1. çœ‹åˆ° mâ‰¤12ï¼Œæˆ‘ç«‹åˆ»æƒ³åˆ°**çŠ¶å‹**ï¼šç”¨ä¸€ä¸ª 12 ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºå·²æ”¶é›†çš„å®ç‰©é›†åˆã€‚  
> 2. ä½†è¿˜æœ‰â€œä»»æ„ç‚¹ç¬ç§»â€å’Œâ€œæˆå°±å¥–åŠ±ç¬ç§»â€â€”â€”è¿™ä¸¤ä¸ªå› ç´ ä½¿æ™®é€šçŠ¶å‹æ— æ³•ç›´æ¥å¥—ç”¨ã€‚  
> 3. äºæ˜¯æƒ³åˆ°**åˆ†å±‚å›¾**ï¼šæŠŠâ€œå‰©ä½™å¯ç¬ç§»æ¬¡æ•°â€ä½œä¸ºé¢å¤–ç»´åº¦ï¼ŒçŠ¶æ€å˜ä¸º `f[mask][last][k_left]`ã€‚  
> 4. æœ€åï¼Œå›¾ä¸Šä»»æ„ä¸¤ç‚¹è·ç¦»éœ€è¦å¿«é€ŸæŸ¥è¯¢ â†’ è·‘ä¸€é **Floyd** å³å¯ã€‚  
> 5. ç»¼ä¸Šï¼Œ**çŠ¶å‹ DP + Floyd + åˆ†å±‚**æ˜¯é€šå…³é’¥åŒ™ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šDrawing_Yangï¼ˆ5 èµï¼‰
- **ç‚¹è¯„**  
  ä½œè€…ç²¾å‡†åœ°æŠŠâ€œç¬ç§»â€ä¸â€œæˆå°±â€ç»Ÿä¸€è¿›**å‰©ä½™æ¬¡æ•°ç»´åº¦**ï¼ŒçŠ¶æ€è®¾è®¡ `f[mask][i][k]` æ¸…æ™°ç›´è§‚ï¼›ç”¨ `lowbit` æŠ€å·§æšä¸¾å­é›†ï¼Œå‡å°‘æ— æ•ˆè½¬ç§»ï¼›é¢„å¤„ç†æˆå°±è´¡çŒ® `os`ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚  
  ä»£ç ç»“æ„åˆ†æ˜ï¼šRead â†’ Floyd â†’ Dp â†’ Printï¼Œé€‚åˆç›´æ¥èƒŒè¯µæ¨¡æ¿ã€‚

### é¢˜è§£äºŒï¼š_Wind_Leaves_ShaDow_ï¼ˆ0 èµï¼‰
- **ç‚¹è¯„**  
  å¤§èƒ†é‡‡ç”¨ **BFS + ä¼˜å…ˆé˜Ÿåˆ—** æ›¿ä»£ DPï¼ŒæŠŠâ€œæœ€çŸ­æ­¥æ•°â€è½¬æˆâ€œæœ€çŸ­è·¯â€é—®é¢˜ï¼›  
  ç”¨ `Node{p,zt,lef,stp}` å››å…ƒç»„åšçŠ¶æ€ï¼ŒåŒæ ·è·‘ Floyd é¢„å¤„ç†ï¼Œæ€è·¯æ–°é¢–ã€‚  
  æ³¨æ„ç‚¹ï¼š`vis[np][nz][nl]` å¿…é¡»åœ¨ **å‡ºé˜Ÿæ—¶** æ ‡è®°ï¼Œå¦åˆ™æ›´ä¼˜è§£è¢«åâ€”â€”è¿™æ˜¯è°ƒè¯•ä¸€å¤©è¸©å‡ºçš„è¡€å‘ï¼Œå€¼å¾—è­¦é†’ã€‚

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
| å…³é”®ç‚¹ | åˆ†æ | å­¦ä¹ ç¬”è®° |
|---|---|---|
| **çŠ¶æ€è®¾è®¡** | `f[mask][last][k]`ï¼šmask å·²æ‹¿å®ç‰©ï¼Œlast æœ€åä¸€ä¸ªå®ç‰©ç¼–å·ï¼Œk å‰©ä½™ç¬ç§»æ¬¡æ•° | ç»´åº¦å¿…é¡»è¦†ç›–æ‰€æœ‰é™åˆ¶æ¡ä»¶ |
| **å‰ç½®æ£€æŸ¥** | è½¬ç§»å‰ `mask & bf[i] == bf[i]` | ç”¨ä½è¿ç®—ä¸€æ¬¡å®Œæˆ |
| **æˆå°±å¥–åŠ±** | é¢„å¤„ç† `cnt[mask]`ï¼šmask çŠ¶æ€ä¸‹å¯é¢å¤–è·å¾—å¤šå°‘æ¬¡ç¬ç§» | é¿å…åœ¨ DP å†…éƒ¨é‡å¤æšä¸¾ |
| **Floyd é¢„å¤„ç†** | O(nÂ³) æ±‚ä»»æ„ä¸¤ç‚¹æœ€çŸ­è·¯ | æ•°æ® nâ‰¤200ï¼Œè½»æ¾é€šè¿‡ |

---

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§ Aï¼šä½è¿ç®—æšä¸¾å­é›†**  
  `for (int t = mask; t; t -= lowbit(t))` æ¯”ç›´æ¥ `for i` æ›´å¿«ã€‚
- **æŠ€å·§ Bï¼šå…ˆé¢„å¤„ç†å† DP**  
  æˆå°±ã€æœ€çŸ­è·¯ã€å‰ç½®æ¡ä»¶å…¨éƒ½åœ¨ä¸»å¾ªç¯å¤–ç®—å¥½ï¼Œä¸»å¾ªç¯åªåšâ€œçº¯è½¬ç§»â€ã€‚
- **æŠ€å·§ Cï¼šæ»šåŠ¨/å‰ªæ**  
  Drawing_Yang ç”¨ `lowbit` å‡å°‘æ— æ•ˆçŠ¶æ€ï¼›_Wind_Leaves_ ç”¨ä¼˜å…ˆé˜Ÿåˆ—å¤©ç„¶å‰ªæã€‚

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---|---|---|---|---|
| **æš´åŠ› DFS** | æšä¸¾æ‰€æœ‰æ”¶é›†é¡ºåº + ç¬ç§» | æ€è·¯ç®€å• | O(m!Â·(k+m))ï¼Œm=12 çˆ†ç‚¸ | æ•°æ® â‰¤ 8 |
| **çŠ¶å‹ DP** | `f[mask][last][k]` + Floyd | å¤æ‚åº¦ O(2^mÂ·mÂ²Â·(k+S)) â‰ˆ 4096Ã—144Ã—12 â‰ˆ 7e6ï¼Œå¯è¿‡ | éœ€ç²¾ç»†å®ç°ä½è¿ç®— | **å®˜æ–¹æ­£è§£** |
| **BFS + ä¼˜å…ˆé˜Ÿåˆ—** | çŠ¶æ€è§†ä¸ºèŠ‚ç‚¹ï¼Œæœ€çŸ­è·¯æ€æƒ³ | ä»£ç ç›´è§‚ï¼Œå¤©ç„¶å‰ªæ | çŠ¶æ€æ•°ä¸ DP åŒçº§ï¼Œå¸¸æ•°ç•¥å¤§ | åŒæ · 100 åˆ† |

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ
> ç»¼åˆ Drawing_Yang çš„çŠ¶å‹æ¡†æ¶ï¼Œå»æ‰è¾“å…¥ç»†èŠ‚åï¼Œæç‚¼å‡ºâ€œæœ€ç²¾ç‚¼å¯ç¼–è¯‘ç‰ˆæœ¬â€ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
const int INF = 0x3f3f3f3f;
int n, m, K, S, st;
int g[205][205], p[15], bf[15], achS[15], achT[15];
int f[1 << 12][15][20];          // mask / last / k_left

void floyd() {
    for (int k = 1; k <= n; ++k)
        for (int i = 1; i <= n; ++i)
            for (int j = 1; j <= n; ++j)
                g[i][j] = min(g[i][j], g[i][k] + g[k][j]);
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    // ---------- è¯»å…¥ ----------
    cin >> n >> m >> K >> S;
    for (int i = 1, t; i <= S; ++i) {
        cin >> t;
        for (int j = 1, x; j <= t; ++j) {
            cin >> x;
            achS[i] |= 1 << (x - 1);
        }
    }
    for (int i = 1; i <= S; ++i) cin >> achT[i];
    for (int i = 1; i <= m; ++i) cin >> p[i];
    int e; cin >> e;
    memset(g, 0x3f, sizeof g);
    for (int i = 1; i <= n; ++i) g[i][i] = 0;
    for (int i = 1, u, v, w; i <= e; ++i) {
        cin >> u >> v >> w;
        g[u][v] = g[v][u] = min(g[u][v], w);
    }
    for (int i = 1, t; i <= m; ++i) {
        cin >> t;
        for (int j = 1, x; j <= t; ++j) {
            cin >> x;
            bf[i] |= 1 << (x - 1);
        }
    }
    cin >> st;

    floyd();
    // ---------- DP ----------
    int maxK = K;
    for (int i = 1; i <= S; ++i) maxK += achT[i];

    memset(f, 0x3f, sizeof f);
    for (int i = 1; i <= m; ++i)
        if (!bf[i]) {
            int dist = g[st][p[i]];
            for (int k = 0; k <= maxK; ++k)
                f[1 << (i - 1)][i][k] = dist;
            if (k < maxK)
                f[1 << (i - 1)][i][k + 1] = 0;   // ç¬ç§»
        }

    for (int mask = 0; mask < (1 << m); ++mask) {
        int bonus = 0;
        for (int i = 1; i <= S; ++i)
            if ((mask & achS[i]) == achS[i]) bonus += achT[i];
        for (int last = 0; last < m; ++last) if (mask >> last & 1) {
            int pre = mask ^ (1 << last);
            if ((pre & bf[last + 1]) != bf[last + 1]) continue;
            for (int k = 0; k <= maxK; ++k) {
                int val = f[pre][0][k];  // å ä½ï¼Œå®é™…å¾ªç¯
                for (int prev = 0; prev < m; ++prev) if (pre >> prev & 1) {
                    int nk = k + bonus;
                    if (nk > maxK) nk = maxK;
                    int nd = f[pre][prev + 1][k] + g[p[prev + 1]][p[last + 1]];
                    f[mask][last + 1][nk] = min(f[mask][last + 1][nk], nd);
                    if (k > 0) {
                        nd = f[pre][prev + 1][k - 1];
                        f[mask][last + 1][nk - 1] = min(f[mask][last + 1][nk - 1], nd);
                    }
                }
            }
        }
    }
    // ---------- ç­”æ¡ˆ ----------
    int ans = INF;
    for (int i = 1; i <= m; ++i)
        for (int k = 0; k <= maxK; ++k)
            ans = min(ans, f[(1 << m) - 1][i][k]);
    cout << ans << '\n';
    return 0;
}
```

---

### é¢˜è§£ç‰‡æ®µèµæ
**Drawing_Yangï¼šlowbit æšä¸¾å­é›†**
```cpp
for (int s=0; s<(1<<m); ++s) {
    for (int i=s; i; i-=lowbit(i)) {        // æšä¸¾å½“å‰é›†åˆé‡Œçš„æœ€åä¸€ä¸ªå®ç‰©
        for (int j=s-lowbit(i); j; j-=lowbit(j)) { // æšä¸¾å‰ä¸€ä¸ªå®ç‰©
            ...
        }
    }
}
```
> **è§£è¯»**ï¼š`lowbit` æ¯æ¬¡åªå–æœ€ä½ä½çš„ 1ï¼Œé¿å…æ— æ•ˆå¾ªç¯ï¼Œæ˜¯çŠ¶å‹ä¼˜åŒ–å¸¸ç”¨æŠ€å·§ã€‚

**_Wind_Leaves_ï¼šä¼˜å…ˆé˜Ÿåˆ— BFS**
```cpp
struct Node{
    int p,zt,lef,stp;
    bool operator>(const Node& rhs) const { return stp>rhs.stp; }
};
priority_queue<Node,vector<Node>,greater<Node>> q;
```
> **è§£è¯»**ï¼šæŠŠâ€œå·²ç”¨æ­¥æ•°â€ä½œä¸ºå…³é”®å­—ï¼Œå¤©ç„¶å®ç° Dijkstra æ€æƒ³ï¼Œä¿è¯ç¬¬ä¸€æ¬¡åˆ°è¾¾å³ä¸ºæœ€çŸ­ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### åœºæ™¯è®¾å®š
- **åƒç´ ä¸–ç•Œ**ï¼šä¸€å¼  8Ã—8 çš„å¤å¤ç½‘æ ¼ï¼ˆå¯¹åº” 8 ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œå®ç‰©ä»¥é—ªçƒå®ç®±è¡¨ç¤ºï¼Œç¬ç§»ç”¨â€œä¼ é€é—¨â€åŠ¨ç”»ã€‚
- **è§’è‰²**ï¼š8-bit gcd å°äººï¼Œæ‰‹æŒåƒç´ å‰‘ï¼Œæ¯èµ°ä¸€æ­¥æ’­æ”¾â€œè¸â€éŸ³æ•ˆã€‚

### åŠ¨ç”»æ­¥éª¤
1. **åˆå§‹åŒ–**  
   å·¦ä¸Šè§’æ˜¾ç¤ºâ€œStage 1â€ï¼Œåœ°å›¾åŠ è½½ï¼Œå®ç®± 1 å·é—ªè“å…‰ï¼ˆæœªè§£é”ï¼‰ï¼Œå®ç®± 2 å·ç°é”ã€‚
2. **Floyd è®¡ç®—**  
   æ‰€æœ‰èŠ‚ç‚¹é—´å‡ºç°è™šçº¿ï¼Œæ•°å€¼â€œè·ç¦»â€åƒç´ åŒ–è·³åŠ¨ï¼ŒèƒŒæ™¯éŸ³ä¹åŠ é€Ÿ 1.5Ã—ã€‚
3. **çŠ¶å‹ DP å¼€å§‹**  
   å±å¹•åº•éƒ¨å‡ºç° 12 ä½äºŒè¿›åˆ¶æ¡ï¼Œé€ä½ç‚¹äº®ï¼›æ¯ç‚¹äº®ä¸€ä½ï¼Œå®ç®±è§£é”éŸ³æ•ˆâ€œå®â€ã€‚
4. **ç¬ç§»åŠ¨ç”»**  
   å½“å‰©ä½™ç¬ç§»æ¬¡æ•° â‰¥1 æ—¶ï¼Œgcd å°äººè„šä¸‹å‡ºç°è“è‰²ä¼ é€é˜µï¼Œâ€œå—–â€ä¸€å£°ç¬ç§»åˆ°ç›®æ ‡å®ç®±ï¼Œä¼ é€æ¬¡æ•° -1ã€‚
5. **æˆå°±è§¦å‘**  
   å®ç®±æ”¶é›†å®Œæˆæ»¡è¶³æˆå°±æ¡ä»¶æ—¶ï¼Œå±å¹•ä¸Šæ–¹å¼¹å‡ºåƒç´ æ¨ªå¹…â€œACHIEVEMENT +2 TELEPORTâ€ï¼Œä¼ é€æ¬¡æ•° +2ã€‚
6. **æœ€ç»ˆé€šå…³**  
   æ‰€æœ‰å®ç®±ç‚¹äº®ï¼Œå‡ºç°â€œYOU WIN!â€åƒç´ çƒŸèŠ±ï¼Œå¹¶æ˜¾ç¤ºæœ€çŸ­æ­¥æ•°ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **å¸¦é’¥åŒ™çš„è¿·å®«**ï¼ˆé’¥åŒ™å³å®ç‰©ï¼Œé—¨å³å‰ç½®æ¡ä»¶ï¼‰
- **æ—…è¡Œå•† + åŠ æ²¹ç«™**ï¼ˆåŠ æ²¹ç«™å³ä¼ é€ç‚¹ï¼‰
- **ä»»åŠ¡è°ƒåº¦ + è§£é”æŠ€èƒ½**ï¼ˆæŠ€èƒ½å³å®ç‰©ï¼Œä»»åŠ¡ä¾èµ–å³å‰ç½®ï¼‰

### æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| P1433 åƒå¥¶é…ª | çŠ¶å‹ DP å…¥é—¨ï¼Œæ— ä¾èµ–ï¼Œç»ƒæ¨¡æ¿ |
| P1171 å”®è´§å‘˜çš„éš¾é¢˜ | çŠ¶å‹ TSPï¼Œç»ƒçŠ¶æ€è®¾è®¡ä¸è½¬ç§» |
| P3959 å®è— | ä¾èµ– + çŠ¶å‹ + æœ€çŸ­è·¯ï¼Œä¸æœ¬é¢˜æ€è·¯ 90% é‡åˆ |
| P5324 æ‰«é›· | çŠ¶æ€å‹ç¼© + BFSï¼Œé”»ç‚¼å¤šç»´çŠ¶æ€å‰ªæ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ¥è‡ª _Wind_Leaves_ çš„è¸©å‘è®°å½•**  
> â€œæˆ‘æŠŠ `vis[np][nz][nl]` æ”¾åœ¨ **å…¥é˜Ÿæ—¶** å°±æ ‡è®°ï¼Œå¯¼è‡´æ›´ä¼˜è§£ç›´æ¥è¢«åï¼Œå¡äº†ä¸€æ•´å¤©ã€‚åæ¥æ”¹æˆ **å‡ºé˜Ÿæ—¶å†æ ‡è®°**ï¼Œç¬é—´ ACã€‚è®°ä½ï¼š**ä¼˜å…ˆé˜Ÿåˆ— BFS çš„ vis å¿…é¡»å»¶è¿Ÿæ ‡è®°**ï¼â€

> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**  
> è¿™æ¡è¡€æ³ªæ•™è®­å‘Šè¯‰æˆ‘ä»¬ï¼š  
> 1. ä¼˜å…ˆé˜Ÿåˆ—å¤©ç„¶å…è®¸â€œåŒä¸€çŠ¶æ€å¤šæ¬¡å…¥é˜Ÿâ€ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡å‡ºé˜Ÿæ‰æ˜¯æœ€ä¼˜ã€‚  
> 2. å…»æˆâ€œå…ˆæŸ¥ visï¼Œå†æ‰©å±•â€çš„ä¹ æƒ¯ï¼Œèƒ½é¿å… 90% çš„ BFS é™·é˜±ã€‚

---

<conclusion>
æ­å–œä½ é€šå…³æœ¬æ¬¡åƒç´ å¯»å®ï¼çŠ¶å‹ DP ä¸åˆ†å±‚å›¾çš„ç»„åˆï¼Œæ˜¯å¤„ç†â€œå°èŒƒå›´ + å¤šé™åˆ¶â€é—®é¢˜çš„é»„é‡‘æ­æ¡£ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼é¢˜ç›®ï¼Œå…ˆé—®è‡ªå·±ï¼š  
- çŠ¶æ€èƒ½å¦å‹ç¼©ï¼Ÿ  
- é™åˆ¶èƒ½å¦åˆ†å±‚ï¼Ÿ  
- å›¾è®ºèƒ½å¦é¢„å¤„ç†ï¼Ÿ  
å¸¦ç€è¿™ä¸‰æŠŠé’¥åŒ™ï¼Œç»§ç»­å‘æ›´é«˜éš¾åº¦çš„å…³å¡è¿›å‘å§ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š115.14ç§’
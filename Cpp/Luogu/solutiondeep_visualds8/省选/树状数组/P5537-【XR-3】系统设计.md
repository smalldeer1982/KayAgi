# é¢˜ç›®ä¿¡æ¯

# ã€XR-3ã€‘ç³»ç»Ÿè®¾è®¡

## é¢˜ç›®æè¿°

å° X éœ€è¦ä½ è®¾è®¡ä¸€ä¸ªç³»ç»Ÿã€‚

è¿™ä¸ªç³»ç»Ÿé¦–å…ˆéœ€è¦è¾“å…¥ä¸€æ£µ $n$ ä¸ªç‚¹çš„æœ‰æ ¹æ ‘å’Œä¸€ä¸ªé•¿åº¦ä¸º $m$ çš„åºåˆ— $a$ï¼Œæ¥ä¸‹æ¥éœ€è¦å®ç° $q$ ä¸ªæ“ä½œã€‚

æ“ä½œåˆ†ä¸¤ç§ï¼š

1. `1 x l r` è¡¨ç¤ºè®¾å®šèµ·ç‚¹ä¸ºæœ‰æ ¹æ ‘çš„èŠ‚ç‚¹ $x$ï¼Œæ¥ä¸‹æ¥ä¾æ¬¡éå† $l \sim r$ã€‚å½“éå†åˆ° $i$ æ—¶ï¼Œä»å½“å‰èŠ‚ç‚¹èµ°å‘å®ƒçš„ç¼–å·ç¬¬ $a_i$ å°çš„å„¿å­ã€‚å¦‚æœæŸä¸€æ—¶åˆ»å½“å‰èŠ‚ç‚¹çš„å„¿å­ä¸ªæ•°å°äº $a_i$ï¼Œæˆ–è€…å·²ç»éå†å®Œ $l \sim r$ï¼Œåˆ™åœ¨è¿™ä¸ªç‚¹åœä½ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªç‚¹çš„ç¼–å·ï¼ŒåŒæ—¶åœæ­¢éå†ã€‚
2. `2 t k` è¡¨ç¤ºå°†åºåˆ—ä¸­ç¬¬ $t$ ä¸ªæ•° $a_t$ ä¿®æ”¹ä¸º $k$ã€‚

## è¯´æ˜/æç¤º

æœ¬é¢˜è¯»å…¥ã€è¾“å‡ºé‡è¾ƒå¤§ï¼Œè¯·ä½¿ç”¨[è¯»å…¥ã€è¾“å‡ºä¼˜åŒ–](https://oi-wiki.org/misc/io/)ã€‚

ã€æ ·ä¾‹è¯´æ˜ã€‘

ç¬¬ä¸€ä¸ªæ“ä½œä¸º `1 1 1 3`ï¼Œå³ $1 \rightarrow 2 \rightarrow 4$ï¼Œå› æ­¤ç­”æ¡ˆä¸º $4$ã€‚

ç¬¬ä¹ä¸ªæ“ä½œåï¼Œåºåˆ—å˜ä¸º `2 1 2 1 2 1`ã€‚

ç¬¬åä¸ªæ“ä½œä¸º `1 1 1 5`ï¼Œå³ $1 \rightarrow 5 \rightarrow 6$ï¼Œå› æ­¤ç­”æ¡ˆä¸º $6$ã€‚

## æ ·ä¾‹ #1

### è¾“å…¥

```
6 6 10
0 1 2 2 1 5
1 2 2 1 2 1
1 1 1 3
1 5 2 6
1 6 5 6
1 2 3 5
1 2 4 4
2 2 1
1 1 1 6
1 1 2 4
2 1 2
1 1 1 5
```

### è¾“å‡º

```
4
5
6
4
3
3
4
6
```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼šP5537ã€XR-3ã€‘ç³»ç»Ÿè®¾è®¡ æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©ï¼Œè®©æˆ‘ä»¬åŒ–èº«â€œç®—æ³•ä¾¦æ¢â€ï¼Œä¸€èµ·ç ´è§£è¿™é“æŠŠã€Œæ ‘ç»“æ„ã€+ã€Œåºåˆ—æ¨¡æ‹Ÿã€+ã€Œåœ¨çº¿ä¿®æ”¹ã€æ‰åœ¨ä¸€èµ·çš„ç¡¬æ ¸é¢˜ç›®ã€‚ä½ ä¼šå‘ç°ï¼š  
> æš´åŠ›æ¨¡æ‹Ÿèµ°ä¸é€š â†’ å“ˆå¸Œ+äºŒåˆ†æ¥é™ç»´ â†’ çº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„å†æé€Ÿï¼Œ  
> ä¸€æ¡æ¸…æ™°çš„â€œä¼˜åŒ–é“¾â€æ­£ç­‰å¾…æˆ‘ä»¬å»æ‹†è§£ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
**æ ‘çš„å½¢æ€å›ºå®š**ï¼Œä½†è¦åœ¨**å¯å˜åºåˆ—**ä¸Š**å¿«é€Ÿæ¨¡æ‹Ÿè¡Œèµ°**ï¼Œå¹¶æ”¯æŒ**åœ¨çº¿ä¿®æ”¹**ã€‚éš¾ç‚¹åœ¨äºâ€”â€”  
> å¦‚ä½•æŠŠâ€œä»èŠ‚ç‚¹ x å‡ºå‘ï¼ŒæŒ‰ a[lâ€¦r] ä¸€è·¯èµ°å„¿å­â€çš„**çº¿æ€§æ¨¡æ‹Ÿ**  
> è½¬åŒ–ä¸º**O(log n)** çš„**æ•°æ®ç»“æ„æŸ¥è¯¢**ï¼Ÿ

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š  
æ ‘å½¢ç»“æ„ + å­—ç¬¦ä¸²å“ˆå¸Œ + çº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„ + äºŒåˆ†/çº¿æ®µæ ‘äºŒåˆ†

---

### ğŸ§© æ€è·¯æ¼”è¿›è·¯å¾„
| é˜¶æ®µ | æƒ³æ³• | å¤æ‚åº¦ | å¯è¡Œæ€§ |
|---|---|---|---|
| â‘  æš´åŠ›æ¨¡æ‹Ÿ | æ¯è¯¢é—® O(r-l+1) æ­¥ï¼Œä¸€æ­¥æ­¥èµ°å„¿å­ | **O(qÂ·m)** | 50 ä¸‡æ•°æ® â†’ TLE |
| â‘¡ äºŒåˆ†+å“ˆå¸Œ | æŠŠâ€œè·¯å¾„â€å‹ç¼©æˆå“ˆå¸Œå€¼ï¼ŒäºŒåˆ†æœ€é•¿å¯è¡Œå‰ç¼€ | **O(q log m)** | å¯è¿‡ï¼ |
| â‘¢ çº¿æ®µæ ‘äºŒåˆ† | æŠŠäºŒåˆ†è¿‡ç¨‹æ¬åˆ°çº¿æ®µæ ‘ä¸Šï¼Œå• log | **O(q log m)** | æ›´å¿«ï¼ |

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
| çº¿ç´¢ | ä¾¦æ¢ç¬”è®° |
|---|---|
| **æ ‘çš„å½¢æ€ä¸å˜** | å¯ä»¥æŠŠâ€œä»æ ¹åˆ°èŠ‚ç‚¹ u çš„èµ°æ³•â€é¢„å¤„ç†å‡ºæ¥ï¼Œä¸”**å”¯ä¸€å¯¹åº” u** |
| **åºåˆ—å•ç‚¹ä¿®æ”¹** | éœ€è¦**æ”¯æŒå•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢**çš„æ•°æ®ç»“æ„ â†’ çº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„ |
| **è¯¢é—®å¯äºŒåˆ†** | èµ°æ³•å…·æœ‰**å•è°ƒæ€§**ï¼šèƒ½èµ° k æ­¥ï¼Œå¿…èƒ½èµ° k-1 æ­¥ â†’ äºŒåˆ†ç­”æ¡ˆ |
| **å“ˆå¸Œå¯åŠ æ€§** | æŠŠâ€œè·¯å¾„â€çœ‹ä½œå­—ç¬¦ä¸²ï¼Œå“ˆå¸Œå€¼å¯**æ‹¼æ¥/æ¯”è¾ƒ** |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> 1. é¢˜ç›®è¦æ±‚â€œä» x å‡ºå‘ï¼ŒæŒ‰ a[lâ€¦r] èµ°â€ï¼Œç­‰ä»·äºâ€œæŠŠæ ¹â†’x çš„è·¯å¾„ æ‹¼æ¥ a[lâ€¦r] åï¼Œ**åœ¨æ•´æ£µæ ‘é‡Œæ‰¾è¿™ä¸ªè·¯å¾„å¯¹åº”çš„èŠ‚ç‚¹**â€ã€‚  
> 2. æŠŠæ¯æ¡è·¯å¾„ç¼–ç ä¸º**å”¯ä¸€å“ˆå¸Œå€¼**ï¼Œå»ºç«‹ã€Œå“ˆå¸Œ â†’ èŠ‚ç‚¹ç¼–å·ã€çš„æ˜ å°„è¡¨ã€‚  
> 3. å¯¹åºåˆ— a ç»´æŠ¤**åŒºé—´å“ˆå¸Œ**ï¼Œæ”¯æŒå•ç‚¹ä¿®æ”¹ã€‚  
> 4. ç”¨**äºŒåˆ† / çº¿æ®µæ ‘äºŒåˆ†**æ‰¾åˆ°æœ€å¤§çš„ midï¼Œä½¿å¾—â€œæ ¹â†’x çš„å“ˆå¸Œ + a[lâ€¦mid] çš„å“ˆå¸Œâ€åœ¨æ˜ å°„è¡¨é‡Œå­˜åœ¨ã€‚  
> 5. å¤æ‚åº¦ O(q log m)ï¼Œå®Œç¾ï¼

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

> ä» 9 ä»½é¢˜è§£ä¸­ï¼Œæˆ‘æŒ‘å‡º 5 ä»½ â‰¥4 æ˜Ÿçš„â€œç²¾åâ€ï¼Œå¸¦ä½ é¢†ç•¥ä¸åŒå®ç°é£æ ¼ï¼

| é¢˜è§£ | äº®ç‚¹æç‚¼ | ä»£ç é£æ ¼ | å­¦ä¹ ä»·å€¼ |
|---|---|---|---|
| **Hanghang (èµ19)** | å• logï¼çº¿æ®µæ ‘äºŒåˆ†+pb_dså“ˆå¸Œ | ä»£ç ç´§å‡‘ï¼Œå¸¸æ•°å° | æŒæ¡â€œçº¿æ®µæ ‘ä¸ŠäºŒåˆ†â€æ¨¡æ¿ |
| **z7z_Eta (èµ12)** | åŒå“ˆå¸Œ+çº¿æ®µæ ‘+æ‰‹å†™å“ˆå¸Œè¡¨ | æ€è·¯æ¸…æ™°ï¼Œæ³¨é‡Šå‹å¥½ | å­¦ä¼šâ€œåŒå“ˆå¸Œé˜²ç¢°æ’â€ |
| **liangbowen (èµ4)** | çº¿æ®µæ ‘äºŒåˆ†+æœ€ä¼˜è§£ 4.7s | æç®€å®ç°ï¼Œå¸¸æ•°ä¼˜åŒ– | ä½“éªŒâ€œå¡å¸¸è‰ºæœ¯â€ |
| **NightDiver (èµ3)** | æ ‘çŠ¶æ•°ç»„+é€†å…ƒç»´æŠ¤å“ˆå¸Œ | æ•°å­¦å‘³æµ“ï¼ŒæŠ€å·§æ€§å¼º | äº†è§£â€œè‡ªç„¶æº¢å‡ºé€†å…ƒâ€ |
| **hanmm81 (èµ2)** | kå‰æ ‘ç¼–å·æ€æƒ³+çº¿æ®µæ ‘ | ç›´è§‚æœ‰è¶£ï¼Œè„‘æ´å¤§å¼€ | æ‹“å±•â€œæ ‘ç¼–å·â€æ€è·¯ |

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤ï¼ˆä»¥æœ€ä¼˜è§£ Hanghang ä¸ºä¾‹ï¼‰

1. **å¦‚ä½•æŠŠâ€œè·¯å¾„â€å‹ç¼©æˆå“ˆå¸Œï¼Ÿ**  
   - **åšæ³•**ï¼šDFS æ—¶æŒ‰å„¿å­ç¼–å·æ’åºï¼ŒæŠŠâ€œç¬¬ i ä¸ªå„¿å­â€æ˜ å°„ä¸ºæ•°å­— iã€‚  
     æ ¹â†’u çš„å“ˆå¸Œï¼š  
     `hash[u] = hash[fa] * base + rank(u)`  
   - **å­¦ä¹ ç¬”è®°**ï¼šæ’åºä¿è¯â€œåŒçˆ¶å¼‚å­â€å“ˆå¸Œä¸åŒï¼Œbase é€‰å¤§è´¨æ•°é˜²ç¢°æ’ã€‚

2. **å¦‚ä½•å¿«é€ŸæŸ¥è¯¢â€œå“ˆå¸Œæ˜¯å¦å­˜åœ¨â€ï¼Ÿ**  
   - **åšæ³•**ï¼šç”¨ `cc_hash_table<ull,int>` å­˜ã€Œå“ˆå¸Œ â†’ èŠ‚ç‚¹ç¼–å·ã€ã€‚  
   - **å­¦ä¹ ç¬”è®°**ï¼špb_ds å“ˆå¸Œè¡¨æ¯” unordered_map å¿«ä¸€å€ï¼Œå¡å¸¸å¿…å¤‡ã€‚

3. **å¦‚ä½•åœ¨çº¿æ®µæ ‘ä¸ŠäºŒåˆ†ï¼Ÿ**  
   - **åšæ³•**ï¼šç»´æŠ¤åŒºé—´å“ˆå¸Œï¼Œæ”¯æŒ**åŒºé—´åˆå¹¶**ã€‚  
     çº¿æ®µæ ‘èŠ‚ç‚¹ `[l,r]` å­˜å‚¨ `a[l]*base^{r-l} + a[l+1]*base^{r-l-1} + ... + a[r]`ã€‚  
     äºŒåˆ†è¿‡ç¨‹ï¼š  
     è‹¥ `cur_hash + left_hash` å­˜åœ¨ â†’ èµ°å³å­æ ‘ï¼›å¦åˆ™èµ°å·¦å­æ ‘ã€‚  
   - **å­¦ä¹ ç¬”è®°**ï¼šçº¿æ®µæ ‘äºŒåˆ† = äºŒåˆ† + åŒºé—´æŸ¥è¯¢ï¼Œå¤æ‚åº¦ O(log m)ã€‚

---

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“
- **æŠ€å·§Aï¼šè·¯å¾„å“ˆå¸Œç¼–ç ** â†’ æŠŠâ€œæ ‘ä¸Šè·¯å¾„â€å˜æˆâ€œå­—ç¬¦ä¸²â€ï¼Œå“ˆå¸Œæ¯”è¾ƒ O(1)ã€‚
- **æŠ€å·§Bï¼šçº¿æ®µæ ‘äºŒåˆ†** â†’ æŠŠâ€œäºŒåˆ†ç­”æ¡ˆâ€æ¬åˆ°çº¿æ®µæ ‘ä¸Šï¼Œå• log æŸ¥è¯¢ã€‚
- **æŠ€å·§Cï¼špb_dså“ˆå¸Œè¡¨** â†’ å¡å¸¸ç¥å™¨ï¼Œæ¯” STL å¿«ä¸€å€ã€‚

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”

| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å¾—åˆ†é¢„æœŸ |
|---|---|---|---|---|
| **æš´åŠ›æ¨¡æ‹Ÿ** | ä¸€æ­¥æ­¥èµ°å„¿å­ | æœ€ç›´è§‚ | O(qÂ·m) â†’ TLE | 10% |
| **äºŒåˆ†+å“ˆå¸Œ** | äºŒåˆ†æœ€é•¿å¯è¡Œå‰ç¼€ | O(q log m) | éœ€å†™å“ˆå¸Œè¡¨ | 100% |
| **çº¿æ®µæ ‘äºŒåˆ†** | çº¿æ®µæ ‘ä¸ŠäºŒåˆ† | O(q log m) | å®ç°ç¨å¤æ‚ | 100% |
| **æ ‘çŠ¶æ•°ç»„+é€†å…ƒ** | æ ‘çŠ¶æ•°ç»„ç»´æŠ¤å“ˆå¸Œ | æ•°å­¦æŠ€å·§ | éœ€é€†å…ƒçŸ¥è¯† | 100% |

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### ğŸ”§ æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆçº¿æ®µæ ‘äºŒåˆ†ç‰ˆï¼‰
> ç»¼åˆ Hanghang & z7z_Eta æ€è·¯ï¼Œæœ€ç®€æ´æ˜“æ‡‚çš„å®ç°ã€‚

```cpp
#include <bits/stdc++.h>
#include <ext/pb_ds/assoc_container.hpp>
using namespace std;
using namespace __gnu_pbds;

const int N = 5e5 + 5;
int n, m, q, rt, a[N], fa[N];
vector<int> g[N];
cc_hash_table<unsigned long long, int> mp;
unsigned long long base = 2e6 + 3, pw[N], h[N], seg[N << 2];

void dfs(int u, unsigned long long cur) {
    mp[cur] = u;
    sort(g[u].begin(), g[u].end());
    for (int i = 0, sz = g[u].size(); i < sz; ++i)
        dfs(g[u][i], cur * base + (i + 1));
}

#define ls (p << 1)
#define rs (p << 1 | 1)
void build(int p, int l, int r) {
    if (l == r) { seg[p] = a[l]; return; }
    int mid = (l + r) >> 1;
    build(ls, l, mid); build(rs, mid + 1, r);
    seg[p] = seg[ls] * pw[r - mid] + seg[rs];
}
void upd(int p, int l, int r, int pos, int v) {
    if (l == r) { seg[p] = v; return; }
    int mid = (l + r) >> 1;
    pos <= mid ? upd(ls, l, mid, pos, v) : upd(rs, mid + 1, r, pos, v);
    seg[p] = seg[ls] * pw[r - mid] + seg[rs];
}
int query(int p, int l, int r, int L, int R, unsigned long long &cur) {
    if (l == r) {
        cur = cur * base + seg[p];
        return mp.find(cur) != mp.end() ? mp[cur] : -1;
    }
    int mid = (l + r) >> 1;
    unsigned long long tmp = cur * pw[mid - L + 1] + seg[ls];
    if (mp.find(tmp) != mp.end()) {
        cur = tmp;
        return query(rs, mid + 1, r, L, R, cur);
    }
    return query(ls, l, mid, L, R, cur);
}

int main() {
    ios::sync_with_stdio(0); cin.tie(0);
    cin >> n >> m >> q;
    pw[0] = 1; for (int i = 1; i <= m; ++i) pw[i] = pw[i - 1] * base;
    for (int i = 1, x; i <= n; ++i) {
        cin >> x; if (!x) rt = i; else g[x].push_back(i);
    }
    dfs(rt, 0);
    for (int i = 1; i <= m; ++i) cin >> a[i];
    build(1, 1, m);
    while (q--) {
        int op, x, l, r, t, k; cin >> op;
        if (op == 1) {
            cin >> x >> l >> r;
            unsigned long long cur = h[x];
            int ans = query(1, 1, m, l, r, cur);
            cout << (ans == -1 ? x : ans) << '\n';
        } else {
            cin >> t >> k; upd(1, 1, m, t, k);
        }
    }
    return 0;
}
```

---

### ğŸ” ä»£ç ç‰‡æ®µèµæï¼ˆHanghang çº¿æ®µæ ‘äºŒåˆ†æ ¸å¿ƒï¼‰

```cpp
int Ask(int L,int R,int p,int l,int r,int &o) {
    if (L<=l && r<=R) {
        ull x = cur * pw[r-l+1] + tr[p];
        if (mp.find(x) == mp.end()) { o=1; return Ans(p,l,r); }
        cur = x; return 0;
    }
    if (L>mid) return Ask(L,R,rs,mid+1,r,o);
    if (R<=mid) return Ask(L,R,ls,l,mid,o);
    int res = Ask(L,R,ls,l,mid,o);
    return o ? res : Ask(L,R,rs,mid+1,r,o);
}
```
> **ä»£ç è§£è¯»**ï¼š  
> - `cur` ç»´æŠ¤å½“å‰å“ˆå¸Œå‰ç¼€ã€‚  
> - è‹¥åŒºé—´å“ˆå¸Œå­˜åœ¨ â†’ ç»§ç»­å³å­æ ‘ï¼›å¦åˆ™å·¦å­æ ‘ã€‚  
> - åˆ©ç”¨çº¿æ®µæ ‘äºŒåˆ†ï¼ŒæŠŠâ€œäºŒåˆ†ç­”æ¡ˆâ€åµŒå…¥çº¿æ®µæ ‘ï¼Œå• log å®Œæˆï¼

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

> **ä¸»é¢˜**ï¼šåƒç´ å°äººâ€œå“ˆå¸Œæ¢é™©â€åœ¨æ ‘ä¸Šè¡Œèµ°ï¼

### ğŸ® åŠ¨ç”»è®¾è®¡
- **åœºæ™¯**ï¼š8-bit åƒç´ æ£®æ—ï¼ŒèŠ‚ç‚¹ä¸ºåƒç´ æ–¹å—ï¼Œè¾¹ä¸ºåƒç´ ç®­å¤´ã€‚
- **è§’è‰²**ï¼šåƒç´ å°äººä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œæ‰‹æŒâ€œå“ˆå¸Œå·è½´â€ã€‚
- **æ“ä½œ**ï¼š
  1. **é¢„å¤„ç†**ï¼šDFS æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¢«ç‚¹äº®ï¼Œæ˜¾ç¤º `hash[u]` çš„åƒç´ æ•°å­—ã€‚
  2. **æŸ¥è¯¢**ï¼šå°äººä» x å‡ºå‘ï¼Œåºåˆ— a[lâ€¦r] åŒ–ä¸ºåƒç´ é˜¶æ¢¯ï¼Œå°äººä¸€æ­¥æ­¥èµ°ï¼Œå“ˆå¸Œå€¼å®æ—¶æ›´æ–°ã€‚
  3. **äºŒåˆ†**ï¼šçº¿æ®µæ ‘äºŒåˆ†è¿‡ç¨‹ï¼Œåƒç´ åŒ–â€œå·¦/å³â€ç®­å¤´æŒ‡ç¤ºäºŒåˆ†æ–¹å‘ã€‚
- **éŸ³æ•ˆ**ï¼š
  - èŠ‚ç‚¹ç‚¹äº® â†’ â€œå®â€
  - å“ˆå¸ŒåŒ¹é…æˆåŠŸ â†’ â€œèƒœåˆ©â€éŸ³
  - äºŒåˆ†å¤±è´¥ â†’ â€œæç¤ºâ€éŸ³
- **äº¤äº’**ï¼šç©å®¶å¯æ‹–åŠ¨æ»‘å—è°ƒæ•´äºŒåˆ†é€Ÿåº¦ï¼Œæˆ–å•æ­¥æ‰§è¡Œã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### ğŸŒ± é€šç”¨æŠ€å·§è¿ç§»
- **è·¯å¾„å“ˆå¸Œ**ï¼šé€‚ç”¨äºâ€œæ ‘ä¸Šè·¯å¾„å”¯ä¸€â€é—®é¢˜ï¼Œå¦‚ï¼š
  1. **æ ‘ä¸Šå­ä¸²åŒ¹é…**ï¼šç»™å®šæ–‡æœ¬ä¸²ï¼Œæ±‚å…¶åœ¨æ ‘ä¸­çš„å‡ºç°ä½ç½®ã€‚
  2. **åŠ¨æ€æ ‘è·¯å¾„æŸ¥è¯¢**ï¼šæ ‘ç»“æ„ä¸å˜ï¼Œè·¯å¾„å¯å“ˆå¸ŒåŒ–ã€‚
  3. **LCA + å“ˆå¸Œ**ï¼šå¿«é€Ÿåˆ¤æ–­ä¸¤èŠ‚ç‚¹è·¯å¾„æ˜¯å¦åŒ¹é…æŸæ¨¡å¼ä¸²ã€‚

### ğŸ“š æ´›è°·æ¨è
| é¢˜å· | æ¨èç†ç”± |
|---|---|
| **P3375** | å­—ç¬¦ä¸²å“ˆå¸Œæ¨¡æ¿ï¼Œå·©å›ºå“ˆå¸ŒæŠ€å·§ã€‚ |
| **P3808** | AC è‡ªåŠ¨æœº + å“ˆå¸Œï¼Œæ ‘ä¸Šå¤šæ¨¡å¼åŒ¹é…ã€‚ |
| **P3383** | çº¿æ®µæ ‘äºŒåˆ†ç»å…¸é¢˜ï¼Œç»ƒä¹ çº¿æ®µæ ‘äºŒåˆ†ã€‚ |
| **P3919** | ä¸»å¸­æ ‘ç»´æŠ¤å†å²ç‰ˆæœ¬ï¼Œæ‹“å±•å¯æŒä¹…åŒ–å“ˆå¸Œã€‚ |

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **æ‘˜å½•**ï¼ˆæ¥è‡ª z7z_Etaï¼‰ï¼šâ€œå“ˆå¸Œçš„ base è¦å¼€å¤§ï¼ŒåŒå“ˆå¸Œé˜²ç¢°æ’ï¼Œpb_ds å“ˆå¸Œè¡¨æ¯” unordered_map å¿«ä¸€å€ï¼â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> è¿™äº›â€œè¸©å‘ç»éªŒâ€æé†’æˆ‘ä»¬ï¼š  
> - å“ˆå¸Œå†²çªæ˜¯çœŸå®å­˜åœ¨çš„ï¼ŒåŒå“ˆå¸Œ+å¤§ base æ˜¯ä¿é™©åšæ³•ã€‚  
> - STL ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œpb_ds æˆ–æ‰‹å†™å“ˆå¸Œè¡¨åœ¨å¡å¸¸æ—¶æ›´å¯é ã€‚

---

## ğŸ’¡ æ€»ç»“

> ä»æš´åŠ›æ¨¡æ‹Ÿåˆ°çº¿æ®µæ ‘äºŒåˆ†ï¼Œæˆ‘ä»¬è§è¯äº†â€œé—®é¢˜è½¬åŒ–â€ä¸â€œæ•°æ®ç»“æ„ä¼˜åŒ–â€çš„åŠ›é‡ã€‚  
> è®°ä½ï¼šå½“æ¨¡æ‹Ÿå¤æ‚åº¦çˆ†ç‚¸æ—¶ï¼Œå…ˆæ‰¾â€œå¯å“ˆå¸ŒåŒ–â€çš„æ€§è´¨ï¼Œå†å¥—ä¸Šâ€œçº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„â€çš„ç¿…è†€ï¼Œ  
> ä½ å°±èƒ½åœ¨ç®—æ³•çš„å¤©ç©ºä¸­è‡ªç”±ç¿±ç¿”ï¼  
> **ä¸‹æ¬¡è§ï¼Œç»§ç»­æ¢é™©ï¼**

---
å¤„ç†ç”¨æ—¶ï¼š74.35ç§’
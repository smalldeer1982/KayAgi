# é¢˜ç›®ä¿¡æ¯

# [USACO21DEC]  Tickets P

## é¢˜ç›®æè¿°

Bessie æ­£åœ¨å‚åŠ è¿œè¶³æ—…è¡Œï¼å¥¹å½“å‰æ­£åœ¨æ—…è¡Œçš„è·¯çº¿ç”±ç¼–å·ä¸º $1\ldots N$ï¼ˆ$1\le N\le 10^5$ï¼‰çš„ $N$ ä¸ªæ£€æŸ¥ç‚¹ç»„æˆã€‚

æœ‰ $K$ï¼ˆ$1\le K\le 10^5$ï¼‰å¼ ç¥¨å¯ä¾›è´­ä¹°ã€‚ç¬¬ $i$ å¼ ç¥¨å¯ä»¥åœ¨æ£€æŸ¥ç«™ $c_i$ï¼ˆ$1\le c_i\le N$ï¼‰ä»¥ $p_i$ï¼ˆ$1\le p_i\le 10^9$ï¼‰çš„ä»·æ ¼è´­å¾—ï¼Œå¹¶ä¸”å¯ä»¥ç”¨å…¶è¿›å…¥æ‰€æœ‰æ£€æŸ¥ç«™ $[a_i,b_i]$ï¼ˆ$1\le a_i\le b_i\le N$ï¼‰ã€‚åœ¨è¿›å…¥ä»»ä½•æ£€æŸ¥ç«™ä¹‹å‰ï¼ŒBessie å¿…é¡»å·²è´­ä¹°ä¸€å¼ å…è®¸å…¶è¿›å…¥è¯¥æ£€æŸ¥ç«™çš„ç¥¨ã€‚ä¸€æ—¦ Bessie å¯ä»¥å‰å¾€æŸä¸€æ£€æŸ¥ç«™ï¼Œå¥¹å°±å¯ä»¥åœ¨æœªæ¥çš„ä»»ä½•æ—¶å€™å›åˆ°è¯¥æ£€æŸ¥ç«™ã€‚

å¯¹äºæ¯ä¸€ä¸ª $i\in [1,N]$ï¼Œå¦‚æœ Bessie æœ€åˆåªèƒ½è¿›å…¥æ£€æŸ¥ç‚¹ $i$ï¼Œè¾“å‡ºä½¿å¾—å¯ä»¥è¿›å…¥æ£€æŸ¥ç‚¹ $1$ å’Œ $N$ æ‰€éœ€çš„æœ€ä½æ€»ä»·ã€‚å¦‚æœæ— æ³•è¿™æ ·åšï¼Œè¾“å‡º $-1$ã€‚


## è¯´æ˜/æç¤º

ã€æ ·ä¾‹è§£é‡Šã€‘

å¦‚æœ Bessie ä»æ£€æŸ¥ç‚¹ $i=4$ å¼€å§‹ï¼Œé‚£ä¹ˆä¸€ç§è´­å¾—è¿›å…¥æ£€æŸ¥ç‚¹ $1$ å’Œ $N$ çš„æ–¹æ³•å¦‚ä¸‹ï¼š

åœ¨æ£€æŸ¥ç‚¹ $4$ è´­ä¹°ç¬¬ä¸€å¼ ç¥¨ï¼Œä½¿ Bessie å¯ä»¥è¿›å…¥æ£€æŸ¥ç‚¹ $2$ å’Œ $3$ã€‚

åœ¨æ£€æŸ¥ç‚¹ $2$ è´­ä¹°ç¬¬ä¸‰å¼ ç¥¨ï¼Œä½¿ Bessie å¯ä»¥è¿›å…¥æ£€æŸ¥ç‚¹ $7$ã€‚

å›åˆ°æ£€æŸ¥ç‚¹ $4$ è´­ä¹°ç¬¬äºŒå¼ ç¥¨ï¼Œä½¿ Bessie å¯ä»¥è¿›å…¥æ£€æŸ¥ç‚¹ $5$ å’Œ $6$ã€‚

åœ¨æ£€æŸ¥ç‚¹ $6$ è´­ä¹°ç¬¬å››å¼ ç¥¨ï¼Œä½¿ Bessie å¯ä»¥è¿›å…¥æ£€æŸ¥ç‚¹ $1$ã€‚

ã€æ•°æ®èŒƒå›´ã€‘

- æµ‹è¯•ç‚¹ 1-7 æ»¡è¶³ $N,K\le 1000$ã€‚
- æµ‹è¯•ç‚¹ 8-19 æ²¡æœ‰é¢å¤–é™åˆ¶ã€‚


## æ ·ä¾‹ #1

### è¾“å…¥

```
7 6
4 1 2 3
4 10 5 6
2 100 7 7
6 1000 1 1
5 10000 1 4
6 100000 5 6```

### è¾“å‡º

```
-1
-1
-1
1111
10100
110100
-1```

# AIåˆ†æç»“æœ

---
# ğŸ’¡ æ´›è¯­äº‘ç¬ºçš„C++ç®—æ³•è§£æï¼š[USACO21DEC] Tickets P æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡

> ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ‹†è§£è¿™å¼ â€œé—¨ç¥¨è¿·å®«â€â€”â€”Bessie çš„è¿œè¶³è·¯çº¿ã€‚  
> é¢˜ç›®çœ‹ä¼¼å¤æ‚ï¼Œå®åˆ™éšè—ç€ä¸€æ¡â€œæœ€çŸ­è·¯ + æ•°æ®ç»“æ„â€çš„é»„é‡‘é€šé“ã€‚  
> è®©æˆ‘ä»¬åƒä¾¦æ¢ä¸€æ ·ï¼Œä»çº¿ç´¢åˆ°ç­–ç•¥ï¼Œä¸€æ­¥æ­¥æ­å¼€æœ€ä¼˜è§£çš„é¢çº±ï¼

---

## 1. é¢˜ç›®è§£è¯»ä¸ç­–ç•¥åˆæ¢

âœ¨ **æœ¬é¢˜æ ¸å¿ƒæŒ‘æˆ˜**ï¼š  
â€œåŒºé—´ç¥¨â€å¸¦æ¥**åŒºé—´è¿è¾¹**ï¼Œè€Œâ€œé‡å¤ç»è¿‡åªç®—ä¸€æ¬¡â€å¸¦æ¥**è·¯å¾„é‡å **é—®é¢˜ã€‚  
å¦‚ä½•é«˜æ•ˆå»ºå›¾å¹¶åŒæ—¶è®¡ç®—åˆ° 1 ä¸ n çš„æœ€å°ä»£ä»·ï¼Œæ˜¯æœ€å¤§éš¾ç‚¹ã€‚

âœ¨ **æ ¸å¿ƒç®—æ³•æ ‡ç­¾**ï¼š  
- æœ€çŸ­è·¯ (Dijkstra)  
- çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ (Segment-Tree Graph)  
- åå›¾æŠ€å·§  
- ä¸‰æ¬¡ Dijkstra å¥—è·¯  

### ğŸ—£ï¸ åˆæ­¥åˆ†æ
> 1. æœ€ç›´è§‚æƒ³æ³•ï¼šæšä¸¾èµ·ç‚¹ â†’ è·‘æœ€çŸ­è·¯ â†’ åˆå¹¶åˆ° 1 ä¸ n çš„è·ç¦»ã€‚  
> 2. å‘ç°åŒºé—´ [a,b] åˆ° c çš„è¾¹æ•°é‡é«˜è¾¾ O(NÂ·K)ï¼Œæ— æ³•æš´åŠ›è¿è¾¹ã€‚  
> 3. **çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾**ç™»åœºï¼šæŠŠåŒºé—´è¿è¾¹å‹ç¼©åˆ° O(log N) çº§åˆ«ã€‚  
> 4. **ä¸‰æ¬¡ Dijkstra** è§£å†³é‡å ï¼š  
>   - ç¬¬ä¸€æ¬¡ï¼šä»¥ 1 ä¸ºæºè·‘æœ€çŸ­è·¯ï¼ˆåå›¾ï¼‰ã€‚  
>   - ç¬¬äºŒæ¬¡ï¼šä»¥ n ä¸ºæºè·‘æœ€çŸ­è·¯ï¼ˆåå›¾ï¼‰ã€‚  
>   - ç¬¬ä¸‰æ¬¡ï¼šæŠŠ `dis1[i] + dis2[i]` ä½œä¸ºåˆå§‹å€¼å†è·‘ä¸€éæœ€çŸ­è·¯ï¼Œæ¶ˆé™¤é‡å¤è¾¹ã€‚

ğŸ”‘ **é’¥åŒ™æ¯”å–»**ï¼š  
â€œçº¿æ®µæ ‘â€åƒä¸€æŠŠä¸‡èƒ½é’¥åŒ™ï¼ŒæŠŠå·¨å¤§çš„åŒºé—´é—¨æ‹†æˆ log çº§çš„å°é—¨ï¼›  
â€œä¸‰æ¬¡ Dijkstraâ€åƒä¸‰æŠŠå°ºå­ï¼Œåˆ†åˆ«é‡å‡ºåˆ° 1ã€åˆ° nã€ä»¥åŠæ¶ˆé™¤é‡å åçš„æœ€çŸ­è·ç¦»ã€‚

---

### ğŸ” ç®—æ³•ä¾¦æ¢ï¼šå¦‚ä½•åœ¨é¢˜ç›®ä¸­å‘ç°çº¿ç´¢ï¼Ÿ
| çº¿ç´¢ | å‘ç°ä¸è§£è¯» |
|------|------------|
| **åŒºé—´ç¥¨** | `[a_i,b_i]` æš—ç¤ºéœ€è¦ **åŒºé—´æ•°æ®ç»“æ„** ä¼˜åŒ–å»ºå›¾ã€‚ |
| **é‡å¤è¾¹åªç®—ä¸€æ¬¡** | ç›´æ¥ç›¸åŠ  `dis1[i]+dis2[i]` ä¼šé‡å¤ â†’ éœ€è¦ **å†è·‘ä¸€éæœ€çŸ­è·¯** æ¶ˆé™¤é‡å ã€‚ |
| **N,K â‰¤ 1e5** | å…è®¸ `O(N log N)` æˆ– `O(N logÂ² N)`ï¼Œæ’é™¤æš´åŠ› O(NÂ·K)ã€‚ |

---

### ğŸ§  æ€ç»´é“¾æ„å»ºï¼šä»çº¿ç´¢åˆ°ç­–ç•¥
> 1. çœ‹åˆ°â€œåŒºé—´â€+â€œæœ€çŸ­è·¯â€ â†’ æƒ³åˆ°çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾ï¼ˆCF786B Legacy å¥—è·¯ï¼‰ã€‚  
> 2. çœ‹åˆ°â€œé‡å¤è¾¹åªç®—ä¸€æ¬¡â€ â†’ æƒ³åˆ°ç»å…¸ trickï¼šå…ˆåˆ†åˆ«æ±‚ `dis1`ã€`dis2`ï¼Œå†ä»¥ `dis1+dis2` ä¸ºåˆå€¼è·‘ç¬¬ä¸‰æ¬¡æœ€çŸ­è·¯ã€‚  
> 3. å¤æ‚åº¦éªŒè¯ï¼šçº¿æ®µæ ‘ + ä¸‰æ¬¡ Dijkstra ä¸º `O((N+K) logÂ² N)`ï¼Œå¯è¿‡ã€‚

---

## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

| é¢˜è§£ | äº®ç‚¹æç‚¼ |
|------|----------|
| **ETHANK**ï¼ˆèµ14ï¼‰ | æœ€æ—©å®Œæ•´é˜è¿°â€œä¸‰æ¬¡ Dijkstraâ€æ€è·¯ï¼Œå¹¶ç»™å‡º `O(N logÂ² N)` çº¿æ®µæ ‘å»ºå›¾ä»£ç ï¼›åŒæ—¶æå‡º `O(N log N)` åŠ¿èƒ½çº¿æ®µæ ‘ä¼˜åŒ–æ–¹å‘ã€‚ |
| **Benq æ€è·¯ï¼ˆAnonymelyï¼‰** | æŠŠâ€œçº¿æ®µæ ‘åŒºé—´â€å½“ä½œåŠ¨æ€è¾¹ï¼Œç¬¬ä¸€æ¬¡æ¾å¼›å³æ°¸ä¹…åˆ é™¤åŒºé—´ï¼Œè¾¾åˆ° `O(N log N)`ã€‚ |
| **xiezheyuan**ï¼ˆèµ0ï¼‰ | ç”¨â€œè¶…çº§æ±‡ç‚¹ Tâ€ç»Ÿä¸€è§£é‡Š `dis1+dis2` å†è·‘æœ€çŸ­è·¯çš„æ€æƒ³ï¼Œå›¾è®ºæ¨¡å‹æ¸…æ™°ã€‚ |
| **vectorwyx & cmll02** | æä¾›ç®€æ´æ˜“è¯»çš„çº¿æ®µæ ‘å»ºå›¾æ¨¡æ¿ï¼Œä¾¿äºåˆå­¦è€…ä¸Šæ‰‹ã€‚ |

---

## 3. è§£é¢˜ç­–ç•¥æ·±åº¦å‰–æ

### ğŸ¯ æ ¸å¿ƒéš¾ç‚¹ä¸å…³é”®æ­¥éª¤
| å…³é”®ç‚¹ | åˆ†æä¸å­¦ä¹ ç¬”è®° |
|--------|----------------|
| **1. åŒºé—´è¿è¾¹å‹ç¼©** | ç”¨çº¿æ®µæ ‘æŠŠ `[a,b] â†’ ç‚¹` çš„ O(N) è¾¹æ‹†æˆ O(log N) æ¡ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šçº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾æ˜¯è§£å†³â€œåŒºé—´â†’ç‚¹â€çš„ç»å…¸å¥—è·¯ã€‚ |
| **2. åå›¾æŠ€å·§** | æŠŠâ€œä» i å‡ºå‘åˆ° 1â€ è½¬æˆâ€œä» 1 å‡ºå‘åˆ° iâ€çš„æœ€çŸ­è·¯ï¼Œå‡å°‘æºç‚¹æ•°é‡ã€‚ |
| **3. æ¶ˆé™¤é‡å è·¯å¾„** | æŠŠ `dis1[i]+dis2[i]` ä½œä¸ºæ–°è¾¹æƒï¼Œå†è·‘ä¸€éæœ€çŸ­è·¯å³å¯ä¿è¯æ¯æ¡è¾¹åªç®—ä¸€æ¬¡ã€‚  
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šè¿™æ˜¯â€œå¤šæºæœ€çŸ­è·¯â€çš„é€šç”¨æŠ€å·§ï¼Œå¯æ¨å¹¿åˆ°å…¶ä»–é‡å è·¯å¾„é—®é¢˜ã€‚ |

---

### âš”ï¸ ç­–ç•¥ç«æŠ€åœºï¼šä¸åŒè§£æ³•å¯¹æ¯”
| ç­–ç•¥ | æ ¸å¿ƒæ€æƒ³ | å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|----------|--------|----------|
| æš´åŠ›æšä¸¾æºç‚¹ | æ¯ä¸ªç‚¹è·‘ä¸€æ¬¡ Dijkstra | O(NÂ·K log N) | ä»… 37 åˆ† |
| çº¿æ®µæ ‘å»ºå›¾ + ä¸‰æ¬¡ Dijkstra | åŒºé—´å‹ç¼© + é‡å æ¶ˆé™¤ | O(N logÂ² N) | é€šç”¨æ»¡åˆ† |
| åŠ¿èƒ½çº¿æ®µæ ‘ | åŠ¨æ€åˆ é™¤å·²ç”¨åŒºé—´ | O(N log N) | ç†è®ºæœ€ä¼˜ |

---

### âœ¨ ä¼˜åŒ–ä¹‹æ—…ï¼šä»â€œèƒ½åšâ€åˆ°â€œåšå¥½â€
> 1. **èµ·ç‚¹**ï¼šæš´åŠ›è¿åŒºé—´è¾¹ â†’ è¾¹æ•°çˆ†ç‚¸ã€‚  
> 2. **å‘ç°ç“¶é¢ˆ**ï¼šåŒºé—´è¿è¾¹æ•°é‡å¤šã€‚  
> 3. **é’¥åŒ™**ï¼šçº¿æ®µæ ‘å‹ç¼©åŒºé—´ â†’ è¾¹æ•°é™è‡³ O(log N)ã€‚  
> 4. **å‡å**ï¼šä¸‰æ¬¡ Dijkstra æ¶ˆé™¤é‡å  â†’ ä¿è¯æ¯æ¡è¾¹åªç®—ä¸€æ¬¡ã€‚  

---

## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒå®ç°å‚è€ƒ
> æ¥æºï¼šç»¼åˆ ETHANKã€Anonymely æ€è·¯ï¼Œç»™å‡ºæ¸…æ™°æ˜“è¯»çš„ `O(N logÂ² N)` ç‰ˆæœ¬ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;
const int N = 2e5 + 10;
const ll INF = 1e18;

int n, m, tot;
vector<pair<int, ll>> g[N * 4];
int pos[N];                // å¶å­ç¼–å·
ll dis[3][N * 4];

// ===== çº¿æ®µæ ‘å»ºå›¾ =====
void build(int p, int l, int r) {
    if (l == r) { pos[l] = p; return; }
    int mid = (l + r) >> 1;
    build(p << 1, l, mid);
    build(p << 1 | 1, mid + 1, r);
    g[p << 1].emplace_back(p, 0);
    g[p << 1 | 1].emplace_back(p, 0);
}
void link(int p, int l, int r, int ql, int qr, int v, ll w) {
    if (ql <= l && r <= qr) { g[p].emplace_back(v, w); return; }
    int mid = (l + r) >> 1;
    if (ql <= mid) link(p << 1, l, mid, ql, qr, v, w);
    if (qr > mid) link(p << 1 | 1, mid + 1, r, ql, qr, v, w);
}

// ===== ä¸‰æ¬¡ Dijkstra =====
void dijkstra(int s, ll *d, bool init = false) {
    priority_queue<pair<ll, int>, vector<pair<ll, int>>, greater<pair<ll, int>>> pq;
    if (!init) {
        fill(d, d + tot + 1, INF);
        d[s] = 0; pq.emplace(0, s);
    } else {
        for (int i = 1; i <= tot; ++i) pq.emplace(d[i], i);
    }
    vector<bool> vis(tot + 1);
    while (!pq.empty()) {
        auto [dist, u] = pq.top(); pq.pop();
        if (vis[u]) continue;
        vis[u] = true;
        for (auto [v, w] : g[u]) {
            if (d[v] > d[u] + w) {
                d[v] = d[u] + w;
                pq.emplace(d[v], v);
            }
        }
    }
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cin >> n >> m;
    tot = 4 * n; // çº¿æ®µæ ‘èŠ‚ç‚¹
    build(1, 1, n);

    for (int i = 1, c, p, a, b; i <= m; ++i) {
        cin >> c >> p >> a >> b;
        int ticket = ++tot; // ç¥¨èŠ‚ç‚¹
        g[ticket].emplace_back(pos[c], p);   // ç¥¨ â†’ c æƒ p
        link(1, 1, n, a, b, ticket, 0);      // åŒºé—´ â†’ ç¥¨ æƒ 0
    }

    dijkstra(pos[1], dis[0]);
    dijkstra(pos[n], dis[1]);
    for (int i = 1; i <= tot; ++i) dis[2][i] = dis[0][i] + dis[1][i];
    dijkstra(0, dis[2], true); // ä»¥ dis[0]+dis[1] ä¸ºåˆå€¼å†è·‘

    for (int i = 1; i <= n; ++i)
        cout << (dis[2][pos[i]] >= INF ? -1 : dis[2][pos[i]]) << '\n';
    return 0;
}
```

---

### ä»£ç ç‰‡æ®µèµæï¼ˆBenq åŠ¿èƒ½çº¿æ®µæ ‘æ ¸å¿ƒï¼‰
> äº®ç‚¹ï¼šåˆ©ç”¨â€œç¬¬ä¸€æ¬¡æ¾å¼›å³æ°¸ä¹…åˆ é™¤åŒºé—´â€ï¼Œå®ç° `O(N log N)`ã€‚

```cpp
// çº¿æ®µæ ‘èŠ‚ç‚¹ä¿å­˜æ‰€æœ‰å³ç«¯ç‚¹ â‰¥ x çš„ç¥¨
struct SegTree {
    int n; vector<int> mx;
    void build(int sz) {
        n = 1; while (n < sz) n <<= 1;
        mx.assign(2 * n, -1);
    }
    void insert(int idx, int r) {
        for (int p = idx + n; p; p >>= 1) mx[p] = max(mx[p], r);
    }
    void remove(int x, vector<int>& res) {
        dfs(1, 0, n - 1, x, res);
    }
    void dfs(int p, int l, int r, int x, vector<int>& res) {
        if (mx[p] < x) return;
        if (l == r) { res.push_back(l); mx[p] = -1; return; }
        dfs(p << 1, l, (l + r) >> 1, x, res);
        dfs(p << 1 | 1, ((l + r) >> 1) + 1, r, x, res);
        mx[p] = max(mx[p << 1], mx[p << 1 | 1]);
    }
};
```
ğŸ’¡ å­¦ä¹ ç¬”è®°ï¼šåŠ¿èƒ½çº¿æ®µæ ‘æŠŠâ€œåŒºé—´åˆ é™¤â€è½¬åŒ–ä¸ºâ€œå•ç‚¹åˆ é™¤â€ï¼Œä»è€ŒæŠŠå¤æ‚åº¦é™åˆ° `O(N log N)`ã€‚

---

## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º

### ä¸»é¢˜
**â€œåƒç´ æ¢é™©å®¶â€åœ¨ä¸‰æ®µ Dijkstra è¿·å®«ä¸­å¯»å®**

### è®¾è®¡æ€è·¯
- **8 ä½åƒç´ é£**ï¼šç”¨ 16Ã—16 åƒç´ æ–¹å—è¡¨ç¤ºèŠ‚ç‚¹ã€è¾¹ã€é˜Ÿåˆ—ã€‚  
- **é¢œè‰²ç¼–ç **ï¼š  
  - èµ·ç‚¹ 1 â†’ ç»¿è‰²å®çŸ³  
  - ç»ˆç‚¹ n â†’ çº¢è‰²æ——å¸œ  
  - å½“å‰æ¾å¼›èŠ‚ç‚¹ â†’ é—ªçƒé»„è‰²  
- **éŸ³æ•ˆ**ï¼š  
  - å…¥é˜Ÿâ€œå®â€ï¼Œæ¾å¼›â€œå’”å“’â€ï¼Œåˆ°è¾¾ç»ˆç‚¹â€œèƒœåˆ©éŸ³â€ã€‚  
- **äº¤äº’**ï¼š  
  - æ­¥è¿›/è‡ªåŠ¨æ’­æ”¾æ»‘å—  
  - å¯åˆ‡æ¢â€œçº¿æ®µæ ‘è§†å›¾â€çœ‹åŒºé—´è¿è¾¹å‹ç¼©è¿‡ç¨‹  

### å…³é”®å¸§
1. **å»ºå›¾**ï¼šçº¿æ®µæ ‘èŠ‚ç‚¹é€å±‚äº®èµ·ï¼ŒåŒºé—´è¾¹åƒè—¤è”“ä¸€æ ·ç”Ÿé•¿ã€‚  
2. **ç¬¬ä¸€æ¬¡ Dijkstra**ï¼šç»¿è‰²æ³¢çº¹ä» 1 æ‰©æ•£ã€‚  
3. **ç¬¬äºŒæ¬¡ Dijkstra**ï¼šçº¢è‰²æ³¢çº¹ä» n æ‰©æ•£ã€‚  
4. **ç¬¬ä¸‰æ¬¡ Dijkstra**ï¼šé»„è‰²èŠ‚ç‚¹æŠŠ `dis1+dis2` ä½œä¸ºèƒ½é‡ï¼Œå†æ¬¡æ‰©æ•£ã€‚  
5. **ç»“æœ**ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¸Šæ–¹æ˜¾ç¤ºæœ€ç»ˆé‡‘å¸æ•°ï¼ˆ-1 ä¸ºéª·é«…ï¼‰ã€‚

---

## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯è¿ç§»
- **åŒºé—´è¿è¾¹ + æœ€çŸ­è·¯**ï¼šè¯¾ç¨‹è¡¨é€‰è¯¾ã€åŒºé—´è¦†ç›–æœ€å°ä»£ä»·ã€‚  
- **é‡å è·¯å¾„æ¶ˆé™¤**ï¼šå¤šæºæœ€çŸ­è·¯ã€è”åˆçœé€‰ 2023 ç«è½¦ç«™ã€‚  

### æ´›è°·æ¨è
1. **P4779** [æ¨¡æ¿] å•æºæœ€çŸ­è·¯å¾„ï¼ˆæ ‡å‡†ç‰ˆï¼‰  
   ğŸ—£ï¸ å·©å›º Dijkstra æ¨¡æ¿ï¼Œä¸ºçº¿æ®µæ ‘å»ºå›¾æ‰“åŸºç¡€ã€‚  
2. **P786B** Legacy  
   ğŸ—£ï¸ çº¿æ®µæ ‘ä¼˜åŒ–å»ºå›¾å…¥é—¨é¢˜ï¼ŒåŒºé—´å‘ç‚¹è¿è¾¹æ¨¡æ¿ã€‚  
3. **P543B** Destroying Roads  
   ğŸ—£ï¸ é‡å è·¯å¾„æ¶ˆé™¤çš„ç»å…¸é¢˜ï¼Œä¸‰æ¬¡æœ€çŸ­è·¯æ€è·¯åŒæºã€‚  

---

## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«

> **ETHANK èµ›åæ€»ç»“**ï¼š  
> â€œç¬¬ä¸€æ¬¡ WA æ˜¯å› ä¸ºæŠŠåŒºé—´ç›´æ¥æš´åŠ›è¿è¾¹ï¼Œå†…å­˜çˆ†ç‚¸ã€‚åæ¥æ„è¯†åˆ°çº¿æ®µæ ‘å¯ä»¥æŠŠåŒºé—´æ‹†æˆ log æ¡è¾¹ï¼Œæ‰è±ç„¶å¼€æœ—ã€‚â€  
> **æ´›è¯­äº‘ç¬ºç‚¹è¯„**ï¼š  
> é‡åˆ°åŒºé—´è¿è¾¹æ—¶ï¼Œå…ˆé—®è‡ªå·±ï¼šèƒ½å¦ç”¨æ•°æ®ç»“æ„å‹ç¼©ï¼Ÿ  
> é‡åˆ°é‡å è·¯å¾„æ—¶ï¼Œå…ˆé—®è‡ªå·±ï¼šèƒ½å¦æŠŠ `dis1+dis2` å†è·‘ä¸€éæœ€çŸ­è·¯ï¼Ÿ  
> è¿™ä¸¤ä¸ªâ€œè‡ªé—®â€èƒ½è§£å†³ 80% çš„åŒºé—´å›¾è®ºé¢˜ã€‚

---

<conclusion>
ä»Šå¤©æˆ‘ä»¬ä»â€œåŒºé—´è¿è¾¹â€åˆ°â€œé‡å è·¯å¾„â€ï¼Œä» `O(NÂ·K)` åˆ° `O(N log N)`ï¼Œå®Œæˆäº†ä¸€æ¬¡å®Œæ•´çš„ç®—æ³•æ¢é™©ã€‚  
è®°ä½ï¼šçº¿æ®µæ ‘å‹ç¼©åŒºé—´ï¼Œä¸‰æ¬¡ Dijkstra æ¶ˆé™¤é‡å â€”â€”è¿™ä¸¤æŠŠé’¥åŒ™ï¼Œå°†å¸®ä½ æ‰“å¼€æ›´å¤šå›¾è®ºè¿·å®«çš„å¤§é—¨ï¼  
ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æŒ‘æˆ˜æ–°çš„ USACO éš¾é¢˜ï¼ğŸ’ª
</conclusion>

---
å¤„ç†ç”¨æ—¶ï¼š101.81ç§’
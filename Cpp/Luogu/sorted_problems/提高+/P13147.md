---
title: "[GCJ 2018 #2] Costume Change"
layout: "post"
diff: 提高+/省选-
pid: P13147
tag: ['2018', '二分图', 'Google Code Jam']
---
# [GCJ 2018 #2] Costume Change
## 题目描述

Supervin is a well-known choreographer. Today is the $N$-th anniversary of his choreography career. To celebrate it, he is planning a dance on a stage that is a square grid of size $N$ by $N$. Exactly one dancer will stand in each grid cell.

Each dancer will wear a costume; each costume has a single color, and is made out of either wool or cotton as its material. Supervin has $N$ colors to choose from when designing the costumes for his dancers, indexed from 1 to $N$.

Each dancer wants to feel special. If two or more dancers share a row or column and also have costumes of the same color and material, they will no longer feel special.

Supervin wants all of his dancers to feel special. Therefore, Supervin is prepared to change the color and/or material of dancers' costumes so that no dancer shares a row or column with another dancer with the same costume (same color and same material). What is the minimum number of dancers whose costumes must be changed in order to make this happen? (Note that a change to both the color and material of a costume still counts as only one change.)
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line containing an integer $N$: the side length (in unit cells) of the square grid of dancers. Then, $N$ lines follow; each contains $N$ non-zero integers $A_{i,j}$. The $j$-th value on the $i$-th line represents the costume of the dancer in the $i$-th row and $j$-th column of the grid. The magnitude of the value gives the color and the sign of the value gives the material (- for wool, + for cotton).

## 输出格式

For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the minimum number of dancers whose costumes must be changed, as described above.
## 样例

### 样例输入 #1
```
4
2
1 2
2 1
2
1 1
2 1
2
1 2
1 2
2
2 2
-2 2
```
### 样例输出 #1
```
Case #1: 0
Case #2: 1
Case #3: 2
Case #4: 1
```
## 提示

**Sample Explanation**

In Sample Case #1, no costumes need to be changed, since no dancer shares a row or column with another dancer with the same costume.

In Sample Case #2, one optimal solution is to change the value of $\mathbf A$ into the following (bold indicates changed values):

```
  1 -2
  2 1
```

Other optimal solutions are possible. Note that changing both the color and the material of a dancer's costume only counts as one change.

In Sample Case #3, one optimal solution is to change the value of $\mathbf A$ into the following (bold indicates changed values):

```
  1 2
  2 1
```

Other optimal solutions are possible.

In Sample Case #4, one optimal solution is to change the value of $\mathbf A$ into the following (bold indicates changed values):

```
  2 -2
  -2 2
```

Other optimal solutions are possible.

**Limits**

- $1 \leq T \leq 100$.
- $-N \leq A_{i,j} \leq N$, for all $i, j$.
- $A_{i,j} \neq 0$, for all $i, j$.

**Test set 1 (7 Pts, Visible)**

- $2 \leq N \leq 4$.

**Test set 2 (17 Pts, Hidden)**

- $2 \leq N \leq 100$.

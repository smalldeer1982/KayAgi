---
title: "『Fwb』狼人の杀戮"
layout: "post"
diff: 普及+/提高
pid: P11601
tag: []
---
# 『Fwb』狼人の杀戮
## 题目描述

Fwb 开始玩狼人杀了。

这是一个游戏规则略有不同的简化版的狼人杀，若与现实中狼人杀规则不同，应以题目为准。开局共有 $n$（$n≥2$）位玩家，他们的身份共有以下几种：

- 狼人：在天黑时可以进行选择一位非自己的玩家杀害，可以是其他狼人。
- 平民：在天黑时只能闭眼睡觉，没有任何技能。
- 猎人：若自己存活，在天黑时只能闭眼睡觉；若在此夜被杀死且未被解救，**必须**任意带走一位非自己玩家（带走意义即为杀死）。若带走玩家之后又被救活，则下一次被杀死依旧可以继续带走玩家，且此次带走依然成立。换句话说，带走玩家后再被救活也是合法的。
- 女巫：在天黑时可以进行选择：用解药解救任意一个在今夜死亡的玩家（可以是自己），或用毒药毒死任意存活的玩家（不可以是自己）。特殊的，女巫可以在被杀死后对自己使用解药，但不可以进行其他技能操作。请注意，每一位女巫只有一次解药和一次毒药的机会，且**不可以在同一夜使用**。


在黑夜中，将模拟**各种角色技能的进行**，有如下几种格式：

- $0\ id_1\ id_2$：编号为 $id_1$ 的狼人决定将编号为 $id_2$ 的玩家杀害。
- $1\ id_1\ id_2$：编号为 $id_1$ 的女巫决定将编号为 $id_2$ 的玩家毒死。
- $2\ id_1\ id_2$：编号为 $id_1$ 的女巫决定将编号为 $id_2$ 的玩家救活。
- $3\ id_1\ id_2$：编号为 $id_1$ 的猎人被杀死，决定带走编号为 $id_2$ 的玩家。


在天亮后，将公布昨夜的**死亡情况**，有如下几种格式：

- $x\ id_1\ id_2\ ...\ id_x$：共 $x$ 名编号分别为 $id_1\ id_2\ ...\ id_x$ 的玩家在昨夜被杀害，每两个玩家编号之间用空格隔开。注意，$id_i$ 必须严格单调递增。
- `Safe`：昨夜是平安夜，其中平安夜指没有人死亡即 $x=0$ 的夜晚。
- `Wrong`：昨夜的角色技能输入有误。此夜晚将撤回全部操作。

当出现以下情况时，认为昨夜的角色技能输入有误：

- 编号为 $id$ 的玩家不存在。
- 除女巫使用解药时，编号为 $id$ 的玩家已死亡。
- **同一位**狼人、女巫在同一晚上多次使用技能。
- 猎人未被杀死就使用技能。
- 猎人在被杀死时带走多人。
- 玩家使用了不属于自己的技能。
- 女巫将解药用在了未死亡或非今夜死亡的人身上。
- 狼人杀人、女巫使用毒药、猎人带走玩家时对自己使用技能。

当一夜技能输入有误时，该夜的所有操作均不被执行。

请注意，一个夜晚是有时间顺序的，这个时间顺序决定了输入的合法性。例如，在同一夜晚，女巫先对编号为 $id$ 的玩家使用解药，狼人再杀死编号为 $id$ 的玩家，然后夜晚结束，属于不合法输入。

现在告诉你了在黑夜中，各种角色技能的进行。你需要判断昨夜的死亡情况。
## 输入格式

**本题包含多组测试数据。**

输入的第一行包含两个正整数 $t,n$，分别表示要求模拟这一局游戏进行的**前** $t$ 个夜晚的结果与玩家人数 $n$。

第二行输入 $n$ 个正整数 $a_i$，表示各个玩家的角色。其中狼人用 $1$ 表示，平民用 $2$ 表示，猎人用 $3$ 表示，女巫用 $4$ 表示。

接下来 $t$ 组数据，表示 $t$ 个夜晚，每个夜晚输入的格式如下：

先输入一个正整数 $m$，代表这一夜发生的事件数量。

接下来每 $m$ 行，每行包含 $3$ 个非负整数，输入格式详见【题目描述】中的**各种角色技能的进行**。默认玩家编号为 $1\sim n$，保证 $id$ 在 $1\sim 10^3$ 范围内。
## 输出格式

输出共 $t$ 行。

对于每一次输入的**各种角色技能的进行**，都输出相对应的死亡情况，输出格式详见【题目描述】中的**死亡情况**。
## 样例

### 样例输入 #1
```
3 6
1 2 3 4 2 1
3
0 1 3
3 3 1
1 4 5
2
1 4 2
0 2 4
2
0 6 2
2 4 2
```
### 样例输出 #1
```
3 1 3 5
Wrong
Safe
```
### 样例输入 #2
```
2 3
1 3 4
3
0 1 2
2 3 2
3 2 1
1
0 1 2
```
### 样例输出 #2
```
Wrong
Wrong
```
## 提示

**本题采用捆绑测试。**

#### 【样例 1 解释】
编号为 $1\sim 6$ 的玩家的身份分别是：狼人、平民、猎人、女巫、平民、狼人。

第一夜：

- $1$ 号狼人杀死了 $3$ 号猎人。
- $3$ 号猎人带走了 $1$ 号狼人。
- $4$ 号女巫毒死了 $5$ 号平民。

结果：$3$ 号猎人被 $1$ 号狼人杀死，$1$ 号狼人被 $3$ 号猎人带走，$5$ 号平民被 $4$ 号女巫毒死。此时仅有 $2$ 号平民、$4$ 号女巫和 $6$ 号狼人存活。

第二夜：

- $4$ 号女巫毒死了 $2$ 号平民。
- $2$ 号狼人杀死了 $4$ 号女巫。

结果：$2$ 号是平民且已经死亡，此回合不合法。此时仍有 $2$ 号平民、$4$ 号女巫和 $6$ 号狼人存活。

第三夜：

- $6$ 号狼人杀死了 $2$ 号平民。
- $4$ 号女巫解救了 $2$ 号平民。

结果：$2$ 号平民在被狼人杀死之后被女巫救活，今夜是平安夜。

#### 【样例 2 解释】

第一夜：猎人先被狼人杀死，女巫又救活了猎人，故猎人最终存活，无法带走其他玩家。

第二夜：猎人被狼人杀死，没有人救活他，所以猎人必须带走一名玩家。

#### 【数据范围】

对于 $100\%$ 的数据，$1\le t\le 10$，$2\le n\le 20$，$1\le a_i\le 4$，$1\le m\le 20$。

| 子任务 | $1\le t\le$ | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $5$ | $10$ | A、B |
| $2$ | $5$ | $10$ | B |
| $3$ | $5$ | $30$ | 无 |
| $4$ | $10$ | $50$ | 无 |
| $5$ | $10$ | $0$ | C |


特殊性质 A：每一晚一定有人死亡。

特殊性质 B：只存在狼人与平民，不存在输入不合法的情况。

特殊性质 C：本子任务为 Hack 数据，不占分。

**请注意，所有玩家被杀死即生效，而不是等待夜晚结束之后。特殊的，猎人仍有使用技能的权力。**

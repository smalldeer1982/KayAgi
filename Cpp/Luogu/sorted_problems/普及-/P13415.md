---
title: "[COCI 2012/2013 #4] VOYAGER"
layout: "post"
diff: 普及-
pid: P13415
tag: ['2012', '枚举', 'COCI（克罗地亚）']
---
# [COCI 2012/2013 #4] VOYAGER
## 题目描述

The Voyager 1 space probe (not to be confused with the Intrepid-class starship) was launched a long time ago, in 1977, and is currently on the verge of leaving our Solar System. As it travels further through space, it has been programmed to leave a radio signal message in any star system it stumbles upon, to mark the probe's path for as long as possible.

Let us assume that a star system can be represented by a rectangular grid with $N$ rows and $M$ columns, dividing the space into $N$ by $M$ equal cells. Each cell can contain a single planet, black hole, or be empty. The probe broadcasts the signal from a pre-determined empty cell, in one of the four axis-aligned directions ("U"-up, "R"-right, "D"-down, "L"-left).

Upon being broadcast, the signal propagates in a straight line along the same row/column until it reaches a planet, where it is deflected by 90 degrees in another direction. There are two kinds of planets, which we will denote by "/" and "\\". The deflection rules are shown in the image below:

![](https://cdn.luogu.com.cn/upload/image_hosting/zoyosa0s.png)

The signal permanently leaves the system upon either entering a cell containing a black hole, or propagating outside the edges of the rectangular grid. It is also known that the signal needs one second to propagate from the current cell to a neighboring one.

Write a program to determine the direction in which the probe needs to broadcast the signal so that it remains within the system for as long as possible, outputting the optimal direction as well as the resulting longest time. If it is possible for the signal to remain in the system indefinitely, output the message "Voyager" instead of the required time.
## 输入格式

The first line of input contains two positive integers, $N$ ($1 \leq N \leq 500$) and $M$ ($1 \leq M \leq 500$).

Each of the following $N$ lines contains $M$ characters from the set `/, \, C, .`, where "/" and "\\" represent the two kinds of planets, “C” represents a black hole, and “.” represents an empty cell.

The last line of input contains two positive integers, ${PR}$ ($1 \leq PR \leq N$) and ${PC}$ ($1 \leq {PC} \leq {M}$), the row and column number, respectively, of the cell where the probe is situated.

## 输出格式

The first line of output must contain the required optimal broadcast direction ("U", "R", "D", or "L"). If the solution is not unique, select the first optimal one in the following priority order: first "U", then "R", then "D", and finally "L".

The second line of output must contain the required longest time (or message).
## 样例

### 样例输入 #1
```
5 5
../.\
.....
.C...
...C.
\.../
3 3 
```
### 样例输出 #1
```
U
17
```
### 样例输入 #2
```
5 5
....\
\..\.
./\..
\../C
.\../
1 1
```
### 样例输出 #2
```
D
12
```
### 样例输入 #3
```
5 7
/.....\
../..\.
\...../
/.....\
\.\.../
3 3 
```
### 样例输出 #3
```
R
Voyager
```
## 提示

In test data worth at least 50% of total points, the signal will not be able to remain in the system indefinitely. 

Clarification of the first example ("*" represents the path of the singal): 

![](https://cdn.luogu.com.cn/upload/image_hosting/5b6kat2r.png)

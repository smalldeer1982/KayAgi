---
title: "[GESP202503 六级] 环线"
layout: "post"
diff: 普及/提高-
pid: P11963
tag: ['动态规划 DP', '单调队列', '2025', 'GESP']
---
# [GESP202503 六级] 环线
## 题目描述

小 A 喜欢坐地铁。地铁环线有 $n$ 个车站，依次以 $1,2,\cdots,n$ 标号。车站 $i\ (1\leq i<n)$ 的下一个车站是车站 $i+1$。特殊地，车站 $n$ 的下一个车站是车站 $1$。

小 A 会从某个车站出发，乘坐地铁环线到某个车站结束行程，这意味着小 A 至少会经过一个车站。小 A 不会经过一个车站多次。当小 A 乘坐地铁环线经过车站 $i$ 时，小 A 会获得 $a_i$ 点快乐值。请你安排小 A 的行程，选择出发车站与结束车站，使得获得的快乐值总和最大。
## 输入格式

第一行，一个正整数 $n$，表示车站的数量。

第二行，$n$ 个整数 $a_i$，分别表示经过每个车站时获得的快乐值。
## 输出格式

一行，一个整数，表示小 A 能获得的最大快乐值。
## 样例

### 样例输入 #1
```
4
-1 2 3 0
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
5
-3 4 -5 1 3
```
### 样例输出 #2
```
5
```
## 提示

对于 $20\%$ 的测试点，保证 $1\leq n\leq 200$。

对于 $40\%$ 的测试点，保证 $1\leq n\leq 2000$。

对于所有测试点，保证 $1\leq n\leq 2\times 10^5$，$-10^9\leq a_i\leq 10^9$。

---
title: "地毯 加强版"
layout: "post"
diff: 普及/提高-
pid: P13787
tag: ['前缀和', '差分']
---
# 地毯 加强版
## 题目描述

在 $n\times n$ 的格子上有 $m$ 个地毯。

给出这些地毯的信息，问每个点被多少个地毯覆盖。
## 输入格式

第一行，两个正整数 $n,m$。意义如题所述。

接下来 $m$ 行，每行两个坐标 $(x_1,y_1)$ 和 $(x_2,y_2)$，代表一块地毯，左上角是 $(x_1,y_1)$，右下角是 $(x_2,y_2)$。
## 输出格式

为了减少输出量，设 $F_{i,j}$ 表示 $(i,j)$ 这个格子被多少个地毯覆盖，你只需要输出 $\sum_{i=1}^n\sum_{j=1}^n (i+j)\oplus F_{i,j}$ 的值。注意这个值可能会超过 $2^{31}$。
## 样例

### 样例输入 #1
```
5 3
2 2 3 3
3 3 5 5
1 2 1 4
```
### 样例输出 #1
```
146
```
## 提示

对于 $50\%$ 的数据，有 $n,m\le 5000$。

对于 $100\%$ 的数据，有 $n\le 5000$，$m\le 2\times 10^5$。

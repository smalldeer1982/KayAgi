---
title: "[NOI2011] 兔农"
layout: "post"
diff: NOI/NOI+/CTSC
pid: P2020
tag: ['数学', '2011', 'NOI', '斐波那契数列', '逆元']
---
# [NOI2011] 兔农
## 题目描述

农夫栋栋近年收入不景气，正在他发愁如何能多赚点钱时，他听到隔壁的小朋友在讨论兔子繁殖的问题。

问题是这样的：第一个月初有一对刚出生的小兔子，经过两个月长大后，这对兔子从第三个月开始，每个月初生一对小兔子。新出生的小兔子生长两个月后又能每个月生出一对小兔子。问第 $n$ 个月有多少只兔子？

聪明的你可能已经发现，第 $n$ 个月的兔子数正好是第 $n$ 个 Fibonacci（斐波那契）数。栋栋不懂什么是 Fibonacci 数，但他也发现了规律：第 $i+2$ 个月的兔子数等于第 $i$ 个月的兔子数加上第 $i+1$ 个月的兔子数。前几个月的兔子数依次为：

$$1,1,2,3,5,8,13,21,34,\ldots$$

栋栋发现越到后面兔子数增长的越快，期待养兔子一定能赚大钱，于是栋栋在第一个月初买了一对小兔子开始饲养。

每天，栋栋都要给兔子们喂食，兔子们吃食时非常特别，总是每 $k$ 对兔子围成一圈，最后剩下的不足 $k$ 对的围成一圈，由于兔子特别害怕孤独，从第三个月开始，如果吃食时围成某一个圈的只有一对兔子，这对兔子就会很快死掉。

我们假设死去的总是刚出生的兔子，那么每个月的兔子数仍然是可以计算的。例如，当 $k=7$ 时，前几个月的兔子数依次为：

$$1,1,2,3,5,7,12,19,31,49,80,\ldots$$

给定 $n$，你能帮助栋栋计算第 $n$ 个月他有多少对兔子么？由于答案可能非常大，你只需要告诉栋栋第 $n$ 个月的兔子对数除 $p$ 的余数即可。

## 输入格式

输入一行，包含三个正整数 $n, k, p$。

## 输出格式

输出一行，包含一个整数，表示栋栋第 $n$ 个月的兔子对数除 $p$ 的余数。

## 样例

### 样例输入 #1
```
6 7 100
```
### 样例输出 #1
```
7
```
### 样例输入 #2
```
7 7 5
```
### 样例输出 #2
```
2
```
## 提示

|测试点编号|$n$|$k,p$|
|:-:|:-:|:-:|
|$1\sim 10$|$1\leq n\leq 50$|$2\leq k,p\leq1000$|
|$11$|$1\leq n\leq 80$|$2\leq k,p\leq 10^4$|
|$12,13$|$1\leq n\leq 1000$|$2\leq k,p\leq 10^4$|
|$14,15$|$1\leq n\leq 10^6$|$2\leq k,p\leq 10^6$|
|$16,17$|$1\leq n\leq 10^{18}$|$2\leq k,p\leq1000$|
|$18\sim 20$|$1\leq n\leq 10^{18}$|$2\leq k\leq 10^6$，$2\leq p\leq 10^9$|

对于 $100\%$ 的数据，$1\leq n\leq 10^{18}$，$2\leq k\leq 10^6$，$2\leq p\leq 10^9$。



---

---
title: "[ZJOI2014] 取石子游戏"
layout: "post"
diff: NOI/NOI+/CTSC
pid: P3339
tag: ['递推', '2014', '浙江', '进制', '斐波那契数列']
---
# [ZJOI2014] 取石子游戏
## 题目描述

Roland. p Sprague 和 Patrick M. Grundy 都是组合游戏的狂热爱好者，但他们素未谋面。

一天，Sprague 在写给 Grundy 的信中向他介绍了一个据称是来自东方的古老游戏一一取石子。

取石子是一个双人博弈游戏。在游戏的一开始，桌面上有几堆石子堆。接下 来，游戏双方轮流进行操作：从桌面上选取一堆石子堆，然后从这一堆里面取走任意多个石子（但不能不取）。当某个人无法操作时则失败，另一方获得胜利。由于条件所限, Sprague 建议在纸上写一排自然数来代表各个石子堆的石子数目，然后两人轮流划数与数；Grundy 欣然应允。

一个月过去了，在 Grundy 连续输了 $5$ 盘游戏之后，他怀疑 Sprague 要诈。经过几天的研究，Grundy 在某天下午发现假设游戏双方都足够聪明，那么给定一个初始状态（一排自然数），可以有很简单的方法来判定先手必胜还是后手必胜，并且可以给出必胜策略！于是 Grundy 决定要进行反击。

翌日，Grundy 在写给 Sprague 的信中建议把游戏的规则改得更复杂一点：首先确定一个常数 $K$。然后，游戏双方的操作改为：每次选择一个数划掉。假设该数为 $x$，操作者可以任选一个正整数a，在划掉之后需要再写上 $x-a$，$x-2a $，$\cdots$，$x-K \times a$ 共 $K$ 个数，且 $a$ 需满足 $x-K\times a \geq 0$。若这样的 $a$ 不存在，那么操作者就不能划掉这个无。某一方失败的条件依然是他无法操作。

碍于面子，Sprague 当然无法拒绝。不过他也不会坐以待毙，现在他已经得到了和写在纸上的个数。他把这些数据和这个游戏的规则都告诉了你一一一个正在研究如何使用一个尚不存在的机械（你将其命名为计算机）解决实际的数学、物理、经济学）的计算机科学家。


## 输入格式

输入文件，第一行是一个正整数，表示数据组数 $T$（Sprague 向你询问的次数）。接下来依次输入 $T$ 组数据，每组数据占 $N + 2$ 行，格式如下：

- 第 $1$ 行是一个空行。
- 第 $2$ 行，两个正整数，按顺序表示 $N$ 和 $K$。
- 接下来 $N$ 行，每行一个正整数，表示写在纸上的 $N$ 个数。
## 输出格式

输出文件共有 $T$ 行。对每组数据，如果先手必胜（先进行操作的玩家拥有必胜策略），则输出 `Preempt.`。若后手必胜，则输出 `Leapfrog.`。若两者皆非，则输出 `Je suis un imbecile.`
## 样例

### 样例输入 #1
```
2 
1 1 
1
2 30 
197943 
249832
```
### 样例输出 #1
```
Preempt.
Leapfrog.
```
## 提示

$10\%$ 的数据满足：$N \leq 5$，$K=1$，所有数均小等于 $5$。

$20\%$ 的数据满足：$N \leq 100$，$K=1$，所有数均小等于 $10^9$。

$10\%$ 的数据满足：$N \leq 100$，$K=2$，所有数均小等于 $10^9$。

$20\%$ 的数据满足：$N \leq 100$，$K=2$，所有数均小等于 $10^{18}$。

$20\%$ 的数据满足：$N \leq 100$，$K=10$，所有数均小等于 $10^{18}$。

$40\%$ 的数据满足：$N \leq 100$，$K=30$，所有数均小等于 $10^{80}$。

$100\%$ 的数据满足：$T \leq 10$


---


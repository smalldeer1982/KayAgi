---
title: "淘汰赛制"
layout: "post"
diff: 提高+/省选-
pid: P1769
tag: ['动态规划 DP', '递推', '递归', 'NOI 导刊']
---
# 淘汰赛制
## 题目描述

淘汰赛制是一种极其残酷的比赛制度。$2^n$ 名选手分别标号 $1,2,3,\cdots,2^n-1,2^n$，他们将要参加 $n$ 轮的激烈角逐。每一轮中，将所有参加该轮的选手按标号从小到大排序后，第 $1$ 位与第 $2$ 位比赛，第 $3$ 位与第 $4$ 位比赛，第 $5$ 位与第 $6$ 位比赛……只有每场比赛的胜者才有机会参加下一轮的比赛（不会有平局）。这样，每轮将淘汰一半的选手。$n$ 轮过后，只剩下一名选手，该选手即为最终的冠军。

现在已知每位选手分别与其他选手比赛获胜的概率，请你预测一下谁夺冠的概率最大。
## 输入格式

第一行是一个整数 $n(1 \le n \le 10)$，表示总轮数。接下来 $2^n$ 行，每行 $2^n$ 个整数，第 $i$ 行第 $j$ 个是 $p_{i,j}$。（$0 \le p_{i_j} \le 100$，$p_{i,i}=0$，$p_{i,j}+p_{j,i}=100$），表示第 $i$ 号选手与第 $j$ 号选手比赛获胜的概率。
## 输出格式

输出只有一个整数 $c$，表示夺冠概率最大的选手编号（若有多位选手，输出编号最小者）。

## 样例

### 样例输入 #1
```
2
0 90 50 50
10 0 10 10
50 90 0 50
50 90 50 0

```
### 样例输出 #1
```
 1
```
## 提示

- $30\%$ 的数据满足 $n \le 3$；
- $100\%$ 的数据满足 $n \le 10$。

_NOI导刊 2010 提高（01）



---

---
title: "方程的解"
layout: "post"
diff: 提高+/省选-
pid: P1771
tag: ['动态规划 DP', '数学', '高精度', '递归', 'NOI 导刊']
---
# 方程的解
## 题目描述

佳佳碰到了一个难题，请你来帮忙解决。对于不定方程 $a_1+a_2+\cdots +a_{k-1}+a_k=g(x)$，其中 $k\ge 2$ 且 $k\in \mathbb{N}^*$，$x$ 是正整数，$g(x)=x^x \bmod 1000$（即 $x^x$ 除以 $1000$ 的余数），$x,k$ 是给定的数。我们要求的是这个不定方程的正整数解组数。

举例来说，当 $k=3,x=2$ 时，方程的解分别为：
$$\begin{cases} a_1=1\\ a_2=1\\ a_3=2 \end{cases}$$
$$\begin{cases} a_1=1\\ a_2=2\\ a_3=1 \end{cases}$$
$$\begin{cases} a_1=2\\ a_2=1\\ a_3=1 \end{cases}$$
## 输入格式

输入有且只有一行，为用空格隔开的两个正整数，依次为 $k,x$。
## 输出格式

输出有且只有一行，为方程的正整数解组数。

## 样例

### 样例输入 #1
```
3 2
```
### 样例输出 #1
```
3
```
## 提示

- 对于 $40\%$ 的数据，$\mathit{ans} \le 10^{16}$；
- 对于 $100\%$ 的数据，$k \le 100$，$x \le 2^{31}-1$，$k \le g(x)$。

NOI导刊2010提高（01）



---

---
title: "[ZJOI2006] 物流运输"
layout: "post"
diff: 提高+/省选-
pid: P1772
tag: ['动态规划 DP', '图论', '2006', '各省省选', '浙江', 'NOI 导刊', '最短路']
---
# [ZJOI2006] 物流运输
## 题目描述

物流公司要把一批货物从码头 A 运到码头 B。由于货物量比较大，需要 $n$ 天才能运完。货物运输过程中一般要转停好几个码头。  

物流公司通常会设计一条固定的运输路线，以便对整个运输过程实施严格的管理和跟踪。由于各种因素的存在，有的时候某个码头会无法装卸货物。这时候就必须修改运输路线，让货物能够按时到达目的地。  

但是修改路线是—件十分麻烦的事情，会带来额外的成本。因此物流公司希望能够订一个 $n$ 天的运输计划，使得总成本尽可能地小。

## 输入格式

第一行是四个整数 $n,m,k,e$。$n$ 表示货物运输所需天数，$m$ 表示码头总数，$k$ 表示每次修改运输路线所需成本，$e$ 表示航线条数。  

接下来 $e$ 行每行是一条航线描述，包括了三个整数，依次表示航线连接的两个码头编号以及航线长度。其中码头 A 编号为 $1$，码头 B 编号为 $m$。单位长度的运输费用为 $1$。航线是**双向**的。  

再接下来一行是一个整数 $d$，后面的 $d$ 行每行是三个整数 $p,a,b$。表示编号为 $p$ 的码头在 $[a,b]$ 天之内无法装卸货物。同一个码头有可能在多个时间段内不可用。但任何时间都存在至少一条从码头 A 到码头 B 的运输路线。

## 输出格式

包括了一个整数表示最小的总成本。  
总成本为 $n$ 天运输路线长度之和 $+ k \times$ 改变运输路线的次数。

## 样例

### 样例输入 #1
```
  5 5 10 8
  1 2 1
  1 3 3
  1 4 2
  2 3 2
  2 4 4
  3 4 1
  3 5 2
  4 5 2
  4
  2 2 3
  3 1 1
  3 3 3
  4 4 5

```
### 样例输出 #1
```
32
```
## 提示

【数据范围】
对于 $100\%$ 的数据，$1 \le n \le 100$，$1\le m \le 20$, $1 \le k \le 500$, $1 \le e \le 200$。

【样例输入说明】

![](https://cdn.luogu.com.cn/upload/image_hosting/4lcnync6.png)

上图依次表示第 $1$ 至第 $5$ 天的情况，阴影表示不可用的码头。

【样例输出说明】

前三天走 $1 \to 4 \to 5$，后两天走 $1 \to 3 \to 5$，这样总成本为 $(2+2)\times 3+(3+2)\times 2+10=32$。

\_NOI导刊2010提高（01）



---

---
title: "万圣节后的早晨"
layout: "post"
diff: 提高+/省选-
pid: P1778
tag: ['NOI 导刊']
---
# 万圣节后的早晨
## 题目描述

要求你写一个程序，在一个地图中，找到最小步数将每个鬼移动到他们指定的位置。地图包含一些小方格。每格要么是墙（鬼不能进入），要么是走廊（鬼能进入）。

每一步里，你可以同时移动任意数量的鬼。每个鬼要么待在原地不动，要么移动到相邻的格子里（相邻的格子有公共边），如果移动满足下列条件，则移动是可行的。

1. 没有一个以上的鬼在同一个格子里；
2. 没有一对鬼在一步里交换了位置。

例如，假设鬼的位置是如右上图所示的，其中sharp(#)表示墙，空格表示走廊，a,b,c表示鬼：

```plain
####
 ab#
#c##
####
```
经过一步移动后，地图可以变成如下的样子：

```plain
####     ####     ####       ####
 ab#     a b#     acb#       ab #
#c##     #c##     # ##       #c##   
####     ####     ####       ####
```
## 输入格式

输入包括最多 $10$ 组数据，每组数据包含一幅地图。输入格式如下：

$$\begin{matrix}
w & h & n \\
c_{1,1} & c_{1,2} & \cdots & c_{1,w} \\
c_{2,1} & c_{2,2} & \cdots & c_{2,w} \\
\vdots & \vdots & \ddots & \vdots \\
c_{h,1} & c_{h,2} & \cdots & c_{h,w} \\
\end{matrix}$$

第一行的 $w，h$ 和 $n$ 表示地图的宽度和高度，$n$ 表示鬼的数目，他们满足 $4 \le w \le 16$，$4 \le h \le 16$，$1 \le n \le 3$。

接下来 $h$ 行，每行 $w$ 个字符：

- 一个 `#` 表示墙。
- 一个小写字母表示鬼的初始位置（该位置也是走廊）。
- 一个大写字母表示鬼的目标位置（该位置也是走廊）。
- 一个空格表示空的走廊。

在每幅地图里，前 $n$ 个小写字母和前 $n$ 个大写字母表示鬼的初始位置及鬼的目标位置。我们需要将小写字母表示的鬼移动到对应的大写字母的位置里。

最后一组数据后一行有三个 $0$。
## 输出格式

对每组数据输出一行一个整数，表示最小的移动步数。

## 样例

### 样例输入 #1
```
5 5 2
#####
#A#B#
#   #
#b#a#
#####
16 4 3
################
## ########## ##
#    ABCcba    #
################
16 16 3
################
### ##    #   ##
##  #  ##   # c#
#  ## ########b#
# ##  # #   #  #
#  # ##   # # ##
##  a#  # # #  #
### ## #### ## #
##   #   #  #  #
#  ##### # ## ##
####   #B# #   #
##  C#   #   ###
#  # # ####### #
# ######  A##  #
#        #     #
################
```
### 样例输出 #1
```
7
36
77
```


---

---
title: "魔鬼杀手"
layout: "post"
diff: 提高+/省选-
pid: P1779
tag: ['NOI 导刊']
---
# 魔鬼杀手
## 题目描述

你生活在一个怪兽世界里。你需要用魔法反抗这些怪兽。

每个怪兽都有一定的 hit points，表示他们的生命值。你可以靠施魔法，降低怪兽的 hit points。每个魔法都会有一定的 damage，表示会减少被攻击者 damage 的 hit point。一个怪兽被击败了当前仅当它的 hitpoint 小于等于 0。另一方面，魔法是要消耗魔力的。因为你的魔力是有限的，你希望用最少的魔力击败所有的怪兽。写一个程序完成这个任务。

## 输入格式

输入按如下的格式给出：

| | | | | 
| :-: | :-: | :-: | :-: |
| $N$ | | | |
| $HP_1$ | | | |
| $HP_2$ | | | |
| ... | | | |
| $HP_N$ | | | |
| $M$ | | | |
| $Name_1$ | $MP_1$ | $Target_1$ | $Damage_1$ |
| $Name_2$ | $MP_2$ | $Target_2$ | $Damage_2$ |
| ... | | | |
| $Name_M$ | $MP_M$ | $Target_M$ | $Damage_M$ |

$N$ 是怪兽的数量（$1\le N\le 100$），$HP_{i}$ 表示第 $i$ 个怪兽的 hit point（$l\le HP_i\le 100000$），$M$ 表示可用的魔法数量（$1\le M\le 100$），$Name_j$ 是第 $j$ 种魔法的名字，最长会有 $30$ 个大写或小写字母，$MP_j$ 是这种魔法需要消耗的魔力（$0\le MP_j\le 99$），$Target_j$ 要么是 "Single"，要么是 "All"，表示该魔法只攻击单个怪兽或对全体怪兽同时有效。$Damage_j$ 表示对于所有玫击对象，可以减少攻击对象 $Damage_j$ 的 hit point（$0\le Damage_j\le 999999$）。

所有数字都是整数。最少有一种魔法的 $Damage$ 是非零的。
## 输出格式

输出一行，包含一个整数，表示最小需要消耗的魔力。

## 样例

### 样例输入 #1
```
3
8000 15000 30000
3
Flare 45 Single 8000
Meteor 62 All 6000
Ultimate 80 All 9999
```
### 样例输出 #1
```
232
```


---

---
title: "染色的立方体"
layout: "post"
diff: 提高+/省选-
pid: P1780
tag: ['NOI 导刊']
---
# 染色的立方体
## 题目描述

小胖最近迷上了3D物体，尤其是立方体。他手里有很多个立方体，他想让所有的立方体全都长得一样，所以他决定给某些立方体的表面重涂颜色，使得所有的立方体完全相同。但是小胖是很懒的，他想知道最少涂多少次颜色，可以让所有立方体完全相同。

## 输入格式

每个测试点包含至多 $200$ 组数据。

每组数据第一行 $n\ (1≤n≤4)$，表示立方体的数量，接下来 $n$ 行，每行 $6$ 个字符串 $\mathit{color}_1,\allowbreak\mathit{color}_2,\allowbreak\mathit{color}_3,\allowbreak\mathit{color}_4,\allowbreak\mathit{color}_5,\allowbreak\mathit{color}_6$，表示立方体 $6$ 个面的颜色。

其中，面的标号如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/xlfu6oe0.png)

两个立方体被视为相同，当且仅当它们可以在某种摆放方式下，每个面的颜色都对应相同。

如下图所示的两个立方体是相同的。

![](https://cdn.luogu.com.cn/upload/image_hosting/equmi6mp.png)

如下图所示的两个立方体是不同的。

![](https://cdn.luogu.com.cn/upload/image_hosting/jqp05oyq.png)

一种涂色的方案如下：
 
![](https://cdn.luogu.com.cn/upload/image_hosting/mewvgalo.png)

## 输出格式

每组数据，输出一行一个整数，表示最少的涂色数。（涂一个面算一次涂色）

## 样例

### 样例输入 #1
```
3
scarlet green blue yellow magenta cyan
blue pink green magenta cyan lemon
purple red blue yellow cyan green
2
red green blue yellow magenta cyan
cyan green blue yellow magenta red
2
red green gray gray magenta cyan
cyan green gray gray magenta red
2
red green blue yellow magenta cyan
magenta red blue yellow cyan green
3
red green blue yellow magenta cyan
cyan green hlue yellow magenta red
magenta red blue yellow cyan green
3
blue green green green green blue
green blue blue green green green
green green green green green sea-green
3
red yellow red yellow red yellow
red red yellow yellow red yellow
red red red red red red
4
violet violet salmon salmon salmon salmon
violet salmon salmon salmon salmon violet
violet violet salmon salmon violet violet
violet violet violet violet salmon salmon
1
red green hlue yellow magenta cyan
4
magenta pink red scarlet vermilion wine-red
aquamarine blue cyan indigo sky-blue turciuoise-blue
blond cream chrome-yellow lemon olive yellow
chrome-green emerald-green green olive vilidian sky-blue
0
```
### 样例输出 #1
```
4
2
0
0
2
3
4
4
0
16
```


---

---
title: "关灯"
layout: "post"
diff: 提高+/省选-
pid: P1805
tag: ['高精度', '递推', 'NOI 导刊', '线性递推']
---
# 关灯
## 题目描述

在某条道路上，有 $n$ 盏灯排成一排，它们有的是开着的，有的是关着的。

由于天马上就要亮了，上级给了你一个任务：把所有的灯都关掉。

只不过，这些灯都比较智能，不会被轻易关掉。它们的开或关遵循如下规则：

- 每一步只能开或关一盏灯。
- 编号为 $1$ 的灯可以随意开或关。
- 如果编号为 $1, 2, \cdots,k-1$ 的灯都关上了了，并且编号为 $k$ 的灯在开着，我们可以随意开或关第 $k+1$ 盏灯。

在关灯之前，请你计算：至少要多少步才能关上所有灯？
## 输入格式

第 $1$ 行一个整数 $n$，表示灯的个数。

第 $2$ 行有 $n$ 个整数，如果第 $i$ 个整数 $O_i=0$，表示第 $i$ 个盏灯初始的时候是关着的；如果 $O_i=1$，表示第 $i$ 盏灯初始的时候是开着的。
## 输出格式

共一行一个整数，表示最少需要多少步才能关上所有灯。

## 样例

### 样例输入 #1
```
4

1 0 1 0
```
### 样例输出 #1
```
6
```
## 提示

【输出解释】

- 初始状态 $1010$；
- 第 $1$ 步 $1110$；
- 第 $2$ 步 $0110$；
- 第 $3$ 步 $0100$；
- 第 $4$ 步 $1100$；
- 第 $5$ 步 $1000$；
- 第 $6$ 步 $0000$。

### 数据范围及约定

- 对于 $40\%$ 的数据，$n \le 30$；
- 对于 $70\%$ 的数据，$n \le 300$；
- 对于 $100\%$ 的数据，$n \le 1000$。


---

---
title: "集合分组【征集 spj】"
layout: "post"
diff: 提高+/省选-
pid: P1810
tag: ['NOI 导刊']
---
# 集合分组【征集 spj】
## 题目描述

现有 $k$ 个整数集合，第 $i$ 个集合有 $s_i$ 个元素。

集合中的数都为正数，且不大于 $n$。现定义集合 $A$ 与集合 $B$ 相似，当且仅当满足如下条件之一：

1. $B$ 与 $A$ 相似；
2. 将 $A$ 集合删去一个元素，或更改一个元素的值之后 $A$ 集合与 $B$ 集合相等。

现要将 $K$ 个集合分成至多 $M$ 组（$M>N$），使得每一组内的集合互不相似。要求你给出一种合法的方案。如果无解请输出 `impossible`。
## 输入格式

输入文件第一行有三个数 $n, k, m$，意义如题目所述。

接下来有 $k$ 行，每行第一数 $s_i$ 表示序列长度。之后 $s_i$ 个数为些集合的元素。

## 输出格式

如果存在合法方案，输出 $k$ 个数，表示每个集合（按输入顺序）被分到的组的编号（$1\sim m$）。否则，若不存在合法方案则输出 `impossible`。
## 样例

### 样例输入 #1
```
8 20 12 
5 1 3 5 6 4 
5 1 3 5 6 3 
4 5 6 3 3 
4 5 6 3 4 
4 4 6 5 8 
4 7 7 7 7 
3 7 7 7 
2 2 2 
3 2 2 7 
3 1 2 3 
3 1 2 4 
10 1 2 3 4 5 6 7 8 7 6 
10 8 7 6 5 4 3 2 1 2 1 
20 1 2 3 4 5 6 7 8 1 2 3 4 5 6 7 8 1 3 5 7 
5 4 6 4 6 4 
5 6 4 6 4 6 
6 6 6 6 6 6 6 
3 6 6 6 
1 1 
1 2
```
### 样例输出 #1
```
2 
1 
9 
1 
6 
2 
4 
5 
3 
7 
8 
5 
4 
8
7 
9 
1 
1 
2
3
```
## 提示

### 数据范围及约定

- 对于 $30\%$ 的数据满足 $n \le 10$，$m \le 2$，$k \le 10$；
- 对于 $100\%$ 的数据满足 $1\le n \le 100$，$1\le m \le 100$，$1\le k \le 50000$，$1\le s_i \le 100$。


---

---
title: "最短路"
layout: "post"
diff: 提高+/省选-
pid: P1811
tag: ['NOI 导刊', 'Special Judge', 'O2优化']
---
# 最短路
## 题目描述

给定一个包含 $N$ 个点，$M$ 条边的无向图，每条边的边权均为 $1$。

再给定 $K$ 个三元组 $(A,B,C)$，表示从 $A$ 点走到 $B$ 点后不能往 $C$ 点走。注意三元组是有序的，如可以从 $B$ 点走到 $A$ 点再走到 $C$。

现在你要在 $K$ 个三元组的限制下，找出 $1$ 号点到 $N$ 号点的最短路径，并输出任意一条合法路径，会有 Check 检查你的输出。
## 输入格式

输入文件第一行有三个数 $N$，$M$，$K$，意义如题目所述。

接下来 $M$ 行每行两个数 $A$，$B$，表示 $A$，$B$ 间有一条边。

再下面 $K$ 行，每行三个数 $(A,B,C)$ 描述一个三元组。
## 输出格式

输出文件共两行数，第一行一个数 $S$ 表示最短路径长度。 。

第二行 $S+1$ 个数，表示从 $1$ 到 $N$ 所经过的节点。 。
## 样例

### 样例输入 #1
```
4 4 2
1 2
2 3
3 4
1 3
1 2 3
1 3 4
```
### 样例输出 #1
```
4 
1 3 2 3 4 
```
## 提示

对于 $40\%$ 的数据满足 $N \le 10$，$M \le 20$，$K \le 5$。

对于 $100\%$ 的数据满足 $N \le 3000$，$M \le 20000$，$K \le 100000$。


---

---
title: "棋盘染色"
layout: "post"
diff: 提高+/省选-
pid: P1817
tag: ['NOI 导刊']
---
# 棋盘染色
## 题目描述

给定一个 $N \times M$ 的网格，每个格子可以染成黑色或者白色，要求所有黑色格子连通，所有白色格子连通，并且至少有一个黑色格子贴边，至少有一个白色格子贴边。问有多少种染色方法？ 
## 输入格式

第一行有两个正整数 $N, M$。
## 输出格式

只有一个正整数表示答案。

## 样例

### 样例输入 #1
```
1 2   

```
### 样例输出 #1
```
2   

```
### 样例输入 #2
```
2 3

```
### 样例输出 #2
```
30

```
## 提示

对于 $100 \%$ 的数据：$1 \le N \le 7$，$1 \le M \le 8$。



---

---
title: "电影投票"
layout: "post"
diff: 提高+/省选-
pid: P1818
tag: ['NOI 导刊']
---
# 电影投票
## 题目描述

有一个投票系统可以给电影评分，规定每票都必须投 $1$ 到 $10$ 的整数。现在希望投尽量少的票让一个电影的平均分数低于某个值。
## 输入格式

多组数据，对于每组数据只有一行，有两个带 $1$ 位小数的实数 $X$ 、 $Y$ 和一个正整数 $N$，表示一部电影的平均得分保留 $1$ 位小数后的结果和 XP 期望的平均得分保留一位小数后的结果，并且该电影已经被投了 $N$ 次票了。保证 $Y$ 小于等于 $X$。
## 输出格式

对于每组数据，输出一个正整数 $\mathit{ans}$，表示最坏情况下只要 XP 投 $\mathit{ans}$ 张票，一定能让这部电影的平均得分保留一位小数后小于等于 $Y$。
## 样例

### 样例输入 #1
```
9.5 2.0 12 

4.4 3.4 12478   

10 3.4 23577
```
### 样例输出 #1
```
86   

5094   

63033
```
## 提示

### 数据范围及约定

- 对于 $30\%$ 的数据，$1\le N \le 100$，$1\le T \le 100$；
- 对于 $100\%$ 的数据，$1\le T \le 10^4$，$X,Y\in[1,10]$，$1\le N \le 10^6$。

### 注意事项

保留一位小数采取四舍五入保留法。实数可能会有精度误差。


---

---
title: "速算游戏"
layout: "post"
diff: 提高+/省选-
pid: P1834
tag: ['NOI 导刊']
---
# 速算游戏
## 题目描述

jyx 和 cyy 打赌，比谁 $24$ 点算得快，算得慢的那个人请客。$24$ 点的规则是这样的：给定 $4$ 个 $1\sim 9$ 的整数，用括号改变运算顺序，通过加、减、乘、除中的一系列运算，得到整数 $24$。

注意所有中间结果必须是整数（例如 $(2\times 2)/4$ 是允许的，而 $2\times (2/4)$ 是不允许的）。

为了赢得这个比赛，请写一个程序帮助我作弊，快速地计算出 $24$ 点。
## 输入格式

一行 $4$ 个整数，为给定的 $4$ 个数字。输入数据保证有解。

## 输出格式

一行，以字符串的形式输出结果。注意将每一步的运算的括号补齐（例如 $(3+5)+6$ 和 $3\times(5+6)$）。如果有多种解答，输出字典顺序最小的一个。
## 样例

### 样例输入 #1
```
2 3 5 7 
```
### 样例输出 #1
```
(((3*5)+2)+7)
```


---

---
title: "单人纸牌"
layout: "post"
diff: 提高+/省选-
pid: P1837
tag: ['NOI 导刊']
---
# 单人纸牌
## 题目描述

单人纸牌游戏，共 $36$ 张牌分成 $9$ 叠，每叠 $4$ 张牌面向上。每次，游戏者可以从某两个不同的牌堆最顶上取出两张牌面相同的牌（如黑桃 $10$ 和梅花 $10$）并且一起拿走。如果最后所有纸牌都被取走，则游戏者就赢了，否则游戏者就输了。

George 很热衷于玩这个游戏，但是一旦有时有多种选择的方法，George 就不知道取哪一种好了，George 会从中随机地选择一种走，例如：顶上的 $9$ 张牌为 $\tt KS,\tt KH,\tt KD,\tt 9H,\tt 8S,\tt 8D,\tt 7C,\tt 7D,\tt 6H$，显然有 $5$ 种取法：$\tt (KS,KH),(KS,KD),(KH,KD),(8S,8D),(7C,7D)$，当然 George 取到每一种取法的概率都是 $1/5$。

有一次，George 的朋友 Andrew 告诉他，这样做是很愚蠢的，不过 George 不相信，他认为如此玩最后成功的概率是非常大的。请写一个程序帮助 George 证明他的结论：计算按照他的策略，最后胜利的概率。
## 输入格式

输入共 $9$ 行，每行 $4$ 组用空格分开的字串，每个字串两个字符，分别表示牌面和花色，按照从堆底到堆顶的顺序给出。

## 输出格式

一行，最后胜利的概率，精确到小数点后 $6$ 位。

## 样例

### 样例输入 #1
```
AS 9S 6C KS 

JC QH AC KH 

7S QD JD KD 

QS TS JS 9H 

6D TD AD 8S 

QC TH KC 8D 

8C 9D TC 7C 

9C 7H JH 7D 

8H 6S AH 6H 
```
### 样例输出 #1
```
0.589314
```


---

---
title: "游戏"
layout: "post"
diff: 提高+/省选-
pid: P1846
tag: ['NOI 导刊']
---
# 游戏
## 题目描述

给定两个正整数数列，你要用它们来做一个游戏：你需要对数列进行若干次操作，每一次操作，应选择两个正整数 $k_1$ 和 $k_2$，并删除第一个数列的最后 $k_1$ 个数，计算出它们的和 $s_1$；删除第二个数列的最后 $k_2$ 个数，计算出它们的和 $s_2$。这一次操作的得分就是 $(s_2-k_2)\times(s_1-k_1)$。两个数列应同时被清空，不允许一个数列空了，而另一个数列中还有数。游戏的总得分就是每一次操作的得分总和。

求最小的总得分。
## 输入格式

第一行是两个整数 $n$ 和 $m$，分别表示第一个数列和第二个数列的初始长度。

第二行有 $n$ 个正整数，是第一个数列的数。

第三行有 $m$ 个正整数，是第二个数列的数。

数列中的数都不超过 $1000$。
## 输出格式

一个整数，表示最小的总得分。

## 样例

### 样例输入 #1
```
3 2
1 2 3 
1 2 
```
### 样例输出 #1
```
2
```
## 提示

- 对于 $20\%$ 的数据，$n,m\le20$；
- 对于 $40\%$ 的数据，$n,m\le200$；
- 对于 $100\%$ 的数据，$n,m\le2000$。


---

---
title: "独眼兔"
layout: "post"
diff: 提高+/省选-
pid: P1863
tag: ['计算几何', 'NOI 导刊']
---
# 独眼兔
## 题目描述

太郎有一只特殊的兔子，它只有一只左眼，所以当它移动时是不能向右转弯的。一天，太郎跟独眼兔做一个游戏，太郎在平面内放了 $n$ 个萝卜，每个萝卜有个位置 $(x_i,y_i)$，且任意两个萝卜的 $x_i$，$y_i$ 都是不相同的，独眼兔要去吃这些萝卜。设萝卜 $A(x_i,y_i)$ 是所有萝卜中最小的，那独眼兔会从 $(0,y_i)$ 出发，走向萝卜 $A$，然后开始吃萝卜。当它吃完一个萝卜后，独眼兔会确定下一个萝卜作为目标，然后径直向萝卜走去，当然当它移动的时候是不能向右转弯的。独眼兔还有一个特点，它走过的路径上会留下特殊的气味，所以独眼兔不希望它将要走的路与前面它走过的路相交。太郎想知道独眼兔如何才能吃到最多的萝卜。
## 输入格式

第一行是个整数 $n$；

接下来 $n$ 行，每行两个整数。第 $i+1$ 行表示第 $i$ 号萝卜的位置 $(x_i,y_i)$。
## 输出格式

一行，输出最多能吃到的萝卜数，后面输出吃萝卜的顺序。
## 样例

### 样例输入 #1
```
10
4 5
9 8
5 9
1 7
3 2
6 3
10 10
8 1
2 4
7 6

```
### 样例输出 #1
```
10 8 7 3 4 9 5 6 2 1 10
```
## 提示

- $40\%$ 的数据，$n\le100$；
- $100\%$ 的数据，$n\le1000$，$0\lt x_i\le10^4$，$0\lt y_i\le10^4$。


---

---
title: "魔法物品"
layout: "post"
diff: 提高+/省选-
pid: P1899
tag: ['动态规划 DP', '贪心', '递归', 'NOI 导刊']
---
# 魔法物品
## 题目描述


有两种类型的物品：普通物品和魔法物品。普通物品没有魔法属性，而魔法物品拥有一些魔法属性。每种普通物品有一个价值 $P$，但每种魔法物品有两种价值：鉴定前的价值 $P_1$ 和鉴定后的价值 $P_2$（当然，$P_2$ 总是大于 $P_1$）。

为了鉴定一个魔法物品，你需要购买一个鉴定卷轴，用它来鉴定魔法物品。鉴定完一件魔法物品以后，鉴定卷轴便会消失。每个鉴定卷轴将会消耗 $P_i$ 元钱。如果没有足够的钱，你将无法购买任何鉴定卷轴。    
现在，你正在一个集市中，同时拥有很多物品。你知道每件物品的价值并且想要出售全部物品。那么，你最多能够获得多少钱呢？

你可以假定：

- 开始的时候你没有钱。
- 所有的魔法物品都还没有被鉴定。
- 只要你有足够的钱，你可以购买任意多的鉴定卷轴。
## 输入格式

第一行有两个整数 $N$ 和 $P_i$（$1 \le P_i \le 5000$），表示你拥有的物品数和一个鉴定卷轴的价格。  
接下来 $N$ 行，每行给出一件物品的价格。  
对于每件普通物品行仅有一个整数 $P$（$1 \le P \le 10000$）。  
对于每件魔法物品,那一行将会有两个整数 $P_1$ 和 $P_2$（$1 \le P_1 < P_2 \le 10000$）。
## 输出格式

输出一个整数表示你最多能够获得多少钱。
## 样例

### 样例输入 #1
```
2 10
10
20 100

```
### 样例输出 #1
```
100

```
## 提示

对于 $30\%$ 的数据，$1\le N \le 50$。  
对于 $100\%$ 的数据，$1 \le N \le 1000$。


---

---
title: "Olympic"
layout: "post"
diff: 提高+/省选-
pid: P1946
tag: ['搜索', 'NOI 导刊']
---
# Olympic
## 题目描述

奥运会正在如火如荼的进行着，金牌榜上也有许多队伍需要排名。你需要选择三个整数 $P_g,P_s$ 和 $P_b$，分别表示每获得一块金、银、铜牌所对应得分。并且满足 $1000 \ge P_g \ge P_s \ge P_b \ge 1$。队伍将依据他们获得的分数进行排序（高分在前）。现在，为了使你所在的队伍排名尽可能的靠前，由你来选择 $P_g,P_s,P_b$。
## 输入格式

第一行一个整数 $n\ (1\le n\le 15)$，表示有 $n$ 支队伍进行排名。

以下 $n$ 行，每行三个整数 $G,S,B\ (0\le G,S,B\le 10^5)$，表示每只队伍获得的金、银、铜牌个数。


1. 第一支队伍即为你所在的队伍；
2. 分数相同时，你所在的队伍排名为最前。
## 输出格式

一行输出三个数 $P_g,P_s,P_b$，中间用空格隔开。

若有多组解，则输出 $P_g$ 最小的解，若仍有多组，则输出 $P_s$ 最小的解，若还有多组解，输出 $P_b$ 最小的解。
## 样例

### 样例输入 #1
```
3

1 1 1

0 1 2

2 1 0
```
### 样例输出 #1
```
1 1 1
```
## 提示

### 数据范围

- 对于 $10\%$ 的数据，保证最优解的 $P_g \le 10$；
- 对于 $30\%$ 的数据，保证最优解的 $P_g \le 100$。



---

---
title: "[USACO08JAN] Telephone Lines S"
layout: "post"
diff: 提高+/省选-
pid: P1948
tag: ['搜索', '图论', '2008', '二分', 'USACO', 'NOI 导刊', '广度优先搜索 BFS']
---
# [USACO08JAN] Telephone Lines S
## 题目描述

Farmer John wants to set up a telephone line at his farm. Unfortunately, the phone company is uncooperative, so he needs to pay for some of the cables required to connect his farm to the phone system.

There are N (1 ≤ N ≤ 1,000) forlorn telephone poles conveniently numbered 1..N that are scattered around Farmer John's property; no cables connect any them. A total of P (1 ≤ P ≤ 10,000) pairs of poles can be connected by a cable; the rest are too far apart.

The i-th cable can connect the two distinct poles Ai and Bi, with length Li (1 ≤ Li ≤ 1,000,000) units if used. The input data set never names any {Ai, Bi} pair more than once. Pole 1 is already connected to the phone system, and pole N is at the farm. Poles 1 and N need to be connected by a path of cables; the rest of the poles might be used or might not be used.

As it turns out, the phone company is willing to provide Farmer John with K (0 ≤ K < N) lengths of cable for free. Beyond that he will have to pay a price equal to the length of the longest remaining cable he requires (each pair of poles is connected with a separate cable), or 0 if he does not need any additional cables.

Determine the minimum amount that Farmer John must pay.

多年以后，笨笨长大了，成为了电话线布置师。由于地震使得某市的电话线全部损坏，笨笨是负责接到震中市的负责人。该市周围分布着 $1\le N\le1000$ 根据 $1\cdots N$ 顺序编号的废弃的电话线杆，任意两根线杆之间没有电话线连接，一共有 $1\le p\le10000$ 对电话杆可以拉电话线。其他的由于地震使得无法连接。

第i对电线杆的两个端点分别是 $a_i$ ，$b_i$，它们的距离为 $1\le l_i\le1000000$。数据中每对 $(a_i,b_i)$ 只出现一次。编号为 $1$ 的电话杆已经接入了全国的电话网络，整个市的电话线全都连到了编号 $N$ 的电话线杆上。也就是说，笨笨的任务仅仅是找一条将 $1$ 号和 $N$ 号电线杆连起来的路径，其余的电话杆并不一定要连入电话网络。

电信公司决定支援灾区免费为此市连接 $k$ 对由笨笨指定的电话线杆，对于此外的那些电话线，需要为它们付费，总费用决定于其中最长的电话线的长度（每根电话线仅连接一对电话线杆）。如果需要连接的电话线杆不超过 $k$ 对，那么支出为 $0$。

请你计算一下，将电话线引导震中市最少需要在电话线上花多少钱？

## 输入格式

输入文件的第一行包含三个数字 $n,p,k$。

第二行到第 $p+1$ 行，每行分别都为三个整数 $a_i,b_i,l_i$。

## 输出格式

一个整数，表示该项工程的最小支出，如果不可能完成则输出 `-1`。

## 样例

### 样例输入 #1
```
5 7 1
1 2 5
3 1 4
2 4 8
3 2 3
5 2 9
3 4 7
4 5 6

```
### 样例输出 #1
```
4

```


---

---
title: "长方形"
layout: "post"
diff: 提高+/省选-
pid: P1950
tag: ['动态规划 DP', 'NOI 导刊']
---
# 长方形
## 题目描述

小明今天突发奇想，想从一张用过的纸中剪出一个长方形。

为了简化问题，小明做出如下规定：

（1）这张纸的长宽分别为 $n,m$。小明将这张纸看成是由$n\times m$个格子组成，在剪的时候，只能沿着格子的边缘剪。

（2）这张纸有些地方小明以前在上面画过，剪出来的长方形不能含有以前画过的地方。

（3）剪出来的长方形的大小没有限制。

小明看着这张纸，想了好多种剪的方法，可是到底有几种呢？小明数不过来，你能帮帮他吗？

## 输入格式

第一行两个正整数 $n,m$，表示这张纸的长度和宽度。

接下来有 $n$ 行，每行 $m$ 个字符，每个字符为 `*` 或者 `.`。

字符 `*` 表示以前在这个格子上画过，字符 `.` 表示以前在这个格子上没画过。

## 输出格式

仅一个整数，表示方案数。

## 样例

### 样例输入 #1
```
6 4
....
.***
.*..
.***
...*
.***
```
### 样例输出 #1
```
38
```
## 提示

【数据规模】

对 $10\%$ 的数据，满足 $1\leq n\leq 10,1\leq m\leq 10$

对 $30\%$ 的数据，满足 $1\leq n\leq 50,1\leq m\leq 50$

对 $100\%$ 的数据，满足 $1\leq n\leq 1000,1\leq m\leq 1000$



---

---
title: "Sum"
layout: "post"
diff: 提高+/省选-
pid: P1956
tag: ['数学', 'NOI 导刊']
---
# Sum
## 题目描述

给出一个数列  $a_1,a_2,\cdots,a_n$ 和  $k,p$；

设  $S_{i,j}=\sum\limits_{k=i}^ja_k$，则：
 $$\mathit{Answer}=\min\{S_{i,j}\bmod p\ |\ S_{i,j}\bmod p\ge k\}$$
其中， $i\le j, \{S_{i,j}\bmod p\ |\ S_{i,j}\bmod p\ge k\}\ne\varnothing$。
## 输入格式

第一行三个正整数  $n,k,p$。

第二行  $n$ 个正整数，表示  $a_1,a_2,\cdots,a_n$。
## 输出格式

一行一个正整数，表示  $\mathit{Answer}$。
## 样例

### 样例输入 #1
```
7 2 17
12
13
15
11
16
26
11
```
### 样例输出 #1
```
2
```
## 提示

### 数据范围

对于 $100\%$ 的数据， $1\le n\le10^5$，$1\le k,p,a_i\le10^{18}$。


---

---
title: "最轻的天平"
layout: "post"
diff: 提高+/省选-
pid: P1961
tag: ['递归', 'NOI 导刊']
---
# 最轻的天平
## 题目描述

天平的两边有时不一定只能挂物品，还可以继续挂着另一个天平，现在给你一些天平的情况和它们之间的连接关系，要求使得所有天平都能平衡所需物品的总重量最轻，一个天平平衡当且仅当“左端点的重量\*左端点到支点的距离=右端点的重量\*右端点到支点的距离”。注意题目中的输入保证这些天平构成一个整体。

## 输入格式

第一行包含一个 $N(N \le 100)$，表示天平的数量，天平编号为 $l$ 到 $N$，接下来包含 $N$ 行描述天平的情况，每行 $4$ 个整数 $P,Q,R,B$，$P$ 和 $Q$ 表示横杆上支点到左边的长度与到右边的距离的比例为 $P:Q$，$R$ 表示左边悬挂的情况，如果 $R=0$ 说明悬挂的是物品，否则表示左边悬挂的是天平 $R:B$ 表示右边的悬挂情况，如果 $B=O$ 表示右边悬挂的是物品，否则右边悬挂着天平 $B$。

对于所有的输入，保证 $W\times L<2^{31}$，其中 $w$ 为最轻的天平重量，而 $L$ 为输入中描述左右比例时出现的最大值。
## 输出格式

输出一个整数表示使得所有天平都平衡所需最轻的物品总重量。

## 样例

### 样例输入 #1
```
4

3 2 0 4

1 3 0 0

4 4 2 1

2 2 0 0
```
### 样例输出 #1
```
40
```
## 提示

【样例说明】

![](https://cdn.luogu.com.cn/upload/image_hosting/k8lsxvj9.png)


---


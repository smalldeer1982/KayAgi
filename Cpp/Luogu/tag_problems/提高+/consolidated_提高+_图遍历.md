---
title: "债务清单"
layout: "post"
diff: 提高+/省选-
pid: P2428
tag: ['数学', '图论', '图遍历']
---
# 债务清单
## 题目描述

HZGD 刚刚带领着他的 $N$ 个学生参加完第 LXX 届 NOI。但他的学生发现他们本应该报销的费用还一直拖欠着，于是纷纷找 HZGD 要他给他们报销。不过麻烦的是，学生们总是成双成对的找他，并且只报告他们的债务总和，有的人可能来报告好几次。这让 HZGD 非常难办，他不知道是不是有些人会谎报债务，于是他希望能够列出一张债务清单。

## 输入格式

输入文件第一行包括两个正整数 $N$ 和 $M$，分别表示学生人数和向 HZGD 来报告的总次数，接下来 $M$ 行每行三个整数，分别为来报告的两个学生以及他们报告的债务总和。

## 输出格式

输出文件为一张 $N$ 行的债务清单，第 $i$ 行对应第 $i$ 个学生的债务数额，所有数额保留两位小数。如果无法列出这样一张清单，则输出 `IMPOSSIBLE`。对于有解的数据保证有唯一解。

## 样例

### 样例输入 #1
```
3 3
1 2 2
2 3 4
1 3 6

```
### 样例输出 #1
```
2.00
0.00
4.00

```
## 提示

对于 $30\%$ 的数据，有 $1 ≤ N ≤ 10,1 ≤ M ≤ 55$；

对于 $60\%$ 的数据，有 $1 ≤ N ≤ 100,1 ≤ M ≤ 1000$；

对于 $100\%$ 的数据，有 $1 ≤ N ≤ 1000,1 ≤ M ≤ 10^5$，所有输入数据不超过 $2\times 10^6$。



---

---
title: "「Wdsr-2.5」第二次月面战争"
layout: "post"
diff: 提高+/省选-
pid: P7508
tag: ['贪心', '2021', '洛谷原创', 'O2优化', '图遍历']
---
# 「Wdsr-2.5」第二次月面战争
## 题目背景

若干年之前，八云紫策划了第二次月面战争。

作为神社的巫女，灵梦自然有保护人间之里人类的职责。为了能够使得人类免受月面战争可能造成的影响，灵梦决定在博丽神社设立一个结界。

由于结界的影响范围有限，只能覆盖到博丽神社，于是灵梦决定将人间之里的所有居民迁入到神社中去。然而由于居民数目较多，灵梦在组织上出现了一些困难。这时，她找到了外界的你，希望你帮助她解决这个问题。
## 题目描述

人间之里可以看做一张 $n$ 个点 $m$ 条边的有向图，而博丽神社在点 $t$ 。然而由于时间差的原因，灵梦不能一次性获取所有居民的位置，于是她会依次受到 $k$ 条消息，每条信息包含一个节点 $x$。

- 如果 $x$ 号节点本来没有居民，那么灵梦得知了有一个居民在 $x$ 号节点。
- 如果 $x$ 号节点本来有居民，那么由于某些原因， $x$ 号节点现在没有居民了。

由于某些原因，在 $t$ 号节点也有可能存在居民。

每当得知一条新的消息后，灵梦都需要快速计算出居民的最快疏散时间，以便于合理安排（此时，你可以认为其他节点上没有居民）。同时为了避免拥挤，以及其他难以预料的困难，灵梦做出了如下规则：

- 每一时刻，每个居民只能沿着一条有向边走一步，或者**停留在原地**。
- 每一时刻，每个节点上，**最多只能有一位居民**。
- 当居民到达了博丽神社，那么**下一时刻**他就可以进入结界以获得庇护。你可以认为，在居民进入结界后他的行程就结束了。

最快疏散时间，指的是**所有居民**全部进入结界的最短用时。
## 输入格式

第一行四个正整数 $n,m,k,t$ ，含义如题所示。

接下来 $m$ 行，每行两个正整数 $u,v$ ，描述一条 $u\to v$ 的有向边。可能出现自环或者重边，请选手自行忽略。

接下来一行，共 $k$ 个整数 $x_i$ ，表示在第 $i$ 条消息中 $x_i$ 号节点是否有居民的情况发生了变化。
## 输出格式

输出共 $k$ 行，每行表示在按照前 $i$ 条消息，疏散所有居民所用的最小疏散时间。
## 样例

### 样例输入 #1
```
7 7 4 1
2 1
3 1
4 2
5 2
6 1
7 6
3 2
7 1 2 3

```
### 样例输出 #1
```
3
3
3
4

```
## 提示

#### 样例 1 说明

![main1.png](https://i.loli.net/2021/03/26/bWyznVgRc1pqPaf.png)

这张图描述了**初始状态**、**第一次操作**、**第二次操作**的情况。可以发现；

- 第一次操作后， $7$ 号节点最快通过 $7\to 6\to 1$ 到达神社，再花费 $1$ 单位时间进入神社，总共用时 $3$ 单位时间。
- 第二次操作后， $1$ 号节点花费 $1$ 时刻进入神社， $7$ 号节点仍然按照 $7\to 6\to 1$ 到达神社，并花费 $1$ 单位时间进入神社即可。总共花费 $3$ 单位时间。

![main2.png](https://i.loli.net/2021/03/26/sr3kbOWh7PxBway.png)

这张图描述了第三次操作后的情况。

第一时刻， $1$ 进入神社， $2\to 1,7\to 6$ ；第二时刻， $1$ 进入神社， $6\to 1$ ；第三时刻所有人都进入了神社，于是总共花费 $3$ 单位时间。

![main3.png](https://i.loli.net/2021/03/26/IWt7zKPohpFBmfV.png)

这张图描述了第四次操作后的情况。

第一时刻， $1$ 进入神社， $3\to 1,7\to 6$ ， $2$ 不动；第二时刻， $1$ 进入神社， $2\to 1$ ， $6$ 不动。接下来花费 $2$ 时刻全部进入神社，于是总共花费 $4$ 单位时间。

#### 样例 2,3

见下发附件。

#### 数据范围及约定

$$
\def{\bd}{\boldsymbol}
\def{\a}{\texttt{A}}	% 链的性质
\def{\b}{\texttt{B}}	% 菊花图的性质
\def{\p}{\texttt{P}}	% k为正的性质
\def{\n}{\text{无特殊限制}}
\def{\l}{\hline}
\def{\arraystretch}{1.5}\begin{array}{|c|c|c|c|c|}\l
\textbf{数据点} & \bd{n} & \bd{m} & \bd{k} & \textbf{特殊性质} \cr\l
1\sim4 & n\le 8 & m\le 10 & k\le 10 & - \cr\l
5,6 & \n & m=n-1 & \n & \p,\a \cr\l
7,8 & \n & m=n-1 & \n & \p,\b \cr\l
9 & n\le 10^5 & m=n-1 & k\le 10^5 & \p \cr\l
10\sim 12 & n\le 10^3 & m\le 10^3 & k\le 10^3 & - \cr\l
13,14 & n\le 10^5 & m\le 10^5 & k\le 10^5 & \p \cr\l
15\sim 17 & n\le 10^5 & m\le 10^5 & k\le 10^5 & - \cr\l
18\sim 20 & \n & \n & \n & - \cr\l
\end{array}
$$

- 特殊性质 $\texttt{P}:$ 保证只存在出现居民的操作。
- 特殊性质 $\texttt{A}:$ 保证整张图是一条链，但不保证 $t$ 是链的一端。
- 特殊性质 $\texttt{B}:$ 保证除了 $t$ 以外的所有节点，都指向 $t$ 。


对于所有数据，满足 $1\le n\le 10^6; 1\le m\le 1.05\times 10^6;1\le k\le 10^6$ 。保证所有节点可以到达 $t$。


---

---
title: "「SWTR-7」Scores（hard version）"
layout: "post"
diff: 提高+/省选-
pid: P7876
tag: ['模拟', '2021', 'Special Judge', 'O2优化', '图论建模', '图遍历', '构造', '洛谷月赛']
---
# 「SWTR-7」Scores（hard version）
## 题目背景

#### 本题是 Scores 的 hard 版本。注意题目限制与 [easy](https://www.luogu.com.cn/problem/P7873) 版本不同。

#### 请注意特殊的时空限制。
## 题目描述

小 A 的班上有 $n$ 个学生。最近他们进行了一场考试，共有 $m$ 个学科。第 $i$ 个学生第 $j$ 门学科的得分为**整数** $s_{i,j}\ (0\leq s_{i,j}\leq 100)$。

同学们很重视自己在班上的排名，所以他们经常会比较自己和别的同学的分数。如果一个学生 $i$ **至少有一门学科**的分数比 $j$ **高**，ta 就会觉得自己不比 $j$ 差；相反，如果 ta **每门学科**的分数都比 $j$ **低**，ta 就会觉得自己被 $j$ 吊打了。

实际上，**上述两种情况并不是严格意义上相反的**。但是喜好八卦的小 A 打听到了每两个同学之间的分数情况，他惊讶地发现：**一个同学 $i$ 要么被 $j$ 吊打，要么不比 $j$ 差。** 同时，**如果 $i,j$ 被同一个人吊打，或同时吊打同一个人，则他们之间也有一方被另一方吊打**。我们用一个矩阵 $a_{i,j}\ (i\neq j)$ 来描述小 A 知道的同学们之间的分数关系：$a_{i,j}=0$ 表示 $i$ 被 $j$ 吊打；$a_{i,j}=1$ 表示 $i$ 不比 $j$ 差。

小 A 想知道这种情况会不会发生，即是否存在这样一张 $n\times m$ 的成绩表 $s$ 满足矩阵 $a$ 所描述的分数关系，从而确定有没有撒谎的同学。如果存在 $s$，请先输出 $\texttt{YES}$，再**任意**输出一种符合要求的成绩表；否则输出 $\texttt{NO}$。

注意：这里所求的 $s$ 所需满足的条件是 $a$ 的限制，而**不只是**小 A 所发现的性质，因为**他发现的性质已经在给出的 $a$ 中体现**。
## 输入格式

**本题有多组数据。**

第一行一个整数 $t$，**表示该测试点编号**。  
第二行一个整数 $T$，**表示数据组数**。

对于每组数据：  
第一行两个整数 $n,m$。  
接下来 $n$ 行，每行 $n$ 个由空格隔开的 0 或 1 描述 $a$。第 $i+1$ 行第 $j$ 个数表示 $a_{i,j}$。

特别的，为了方便读入，**规定 $a_{i,i}=0$**。但你需要知道**它没有任何实际意义**。
## 输出格式

对于每组数据：

如果不存在满足条件的 $s$，输出一行字符串 $\texttt{NO}$。  
否则先输出一行字符串 $\texttt{YES}$，再输出 $n$ 行，每行 $m$ 个由空格隔开的整数，第 $i+1$ 行第 $j$ 个数表示 $s_{i,j}\ (0\leq s_{i,j}\leq 100)$。
## 样例

### 样例输入 #1
```
0
5
5 3
0 1 1 1 1
1 0 1 1 1
1 1 0 1 1
1 1 1 0 1
1 1 1 1 0
2 7
0 1
0 0
5 4
0 1 1 0 1
0 0 0 0 1
0 1 0 0 1
1 1 1 0 1
1 1 1 1 0
3 1
0 1 1
1 0 1
1 1 0
3 2
0 1 0
0 0 1
1 0 0
```
### 样例输出 #1
```
YES
100 99 97
98 100 99
95 97 100
0 98 100
99 99 99
YES
98 100 94 98 72 53 53
97 99 93 97 71 52 52
YES
90 80 70 60
50 40 30 20
60 50 40 30
100 90 80 70
40 60 80 100
NO
NO
```
## 提示

**「Special Judge」**

**本题使用 Special Judge。请认真阅读输出格式，输出格式有误可能导致 UKE 或 WA。**

SPJ 首先会判断你的第一行输出是否与答案相同。  
如果相同且答案为 $\texttt{YES}$，则 SPJ 会判断你的输出是否符合所有限制。  
如果有解且你输出 $\texttt{YES}$，但给出方案错误，你将获得该测试点 $50\%$ 的分数。

你需要满足的限制如下：  
- $0\leq s_{i,j}\leq 100$。
- 对于任意 $i,j\ (i\neq j)$，若 $a_{i,j}=0$，则对于任意 $k\ (1\leq k\leq m)$，有 $s_{i,k}<s_{j,k}$；若 $a_{i,j}=1$，则存在一个 $k\in [1,m]$，使得 $s_{i,k}>s_{j,k}$。

你需要注意的是，所有输出都应严格符合输出格式。如果你对答案的存在性判断正确，但是输出方案时 $s_{i,j}<0$ 或 $s_{i,j}>100$，SPJ 会判定为 WA，得 $0$ 分，而不是 $50\%\ \times$ 该测试点分数。

**「数据范围与约定」**

本题共有 6 个测试点。

- Testcase #0（1 point）：是样例。
- Testcase #1（10 points）：$n=1$。
- Testcase #2（10 points）：$m=1$。
- Testcase #3（30 points）：$m=2$。
- Testcase #4（20 points）：$a_{i,j}=1\ (i\neq j)$。
- Testcase #5（29 points）：无特殊限制。

对于 $100\%$ 的数据，$1\leq n,m\leq 100$，$a_{i,j}\in\{0,1\}$，$T=50$（除 Testcase #0）。  
对于 $a$ 的限制：若 $a_{i,j}=a_{i,k}=0$，则 $a_{j,k}$ 和 $a_{k,j}$ 中至少有一个为 $0$；若 $a_{i,k}=a_{j,k}=0$，则 $a_{i,j}$ 和 $a_{j,i}$ 中至少有一个为 $0$。  
对于所有测试点，**时间限制 500ms，空间限制 16MB。**

**「题目来源」**

[Sweet Round 07](https://www.luogu.com.cn/contest/51773) A2。  
idea & solution & data：[Alex_Wei](https://www.luogu.com.cn/user/123294)；验题：[chenxia25](https://www.luogu.com.cn/user/138400)。


---


---
title: "「OICon-02」Great Segments"
layout: "post"
diff: 提高+/省选-
pid: P10174
tag: ['线性数据结构', 'O2优化', '树论', '单调栈']
---
# 「OICon-02」Great Segments
## 题目背景

upd：时间限制改为 400ms

[加强版题目推荐](https://www.luogu.com.cn/problem/P11291)
## 题目描述

给定一个长度为 $n$ 的无重复元素序列 $a$。

对于一个区间 $[l,r]$，我们定义它是好的，有以下条件：

1. 定义一个序列 $b=\{ a_l,\max(a_l,a_{l+1}),\max(a_l,a_{l+1},a_{l+2}),\ ...\ ,\max(a_l,a_{l+1},\ ... \ ,a_r)\}$，将该序列进行去重操作后，该序列的长度不超过 $k$ 且大于 $1$；
2. $\max(a_l,a_{l+1},\ ... \ ,a_r)=a_r$。

请你解决这样一个问题：对于每一个 $i \ (1 \le i \le n)$，有多少个好的区间 $[l,r]$ 满足 $l \le i \le r$。
## 输入格式

第一行两个整数 $n,k$。

第二行 $n$ 个整数，第 $i$ 个数表示 $a_i$。
## 输出格式

$n$ 行，每行一个整数，第 $i$ 行的数表示序列中有多少个好的区间 $[l,r]$ 满足 $l \le i \le r$。
## 样例

### 样例输入 #1
```
4 2
1 3 2 4
```
### 样例输出 #1
```
1
2
2
2
```
## 提示

### 样例解释

对于样例 $1$，满足条件的区间有：

1. $[1,2]$；
2. $[2,4]$；
3. $[3,4]$。

故当 $i=1,2,3,4$ 时，分别有以下区间满足 $l\leq i\leq r$（根据上述的区间编号）：

1. $1$ 区间；
2. $1,2$ 区间；
3. $2,3$ 区间；
4. $2,3$ 区间。

### 数据范围

**本题采用捆绑测试。**

| $\text{Subtask}$ | 特殊性质 | $\text{Score}$ |
| :----------: | :----------: | :----------: |
| $1$ | $n \le 200$ | $5$ |
| $2$ | $n\leq 2000$ | $10$ | 
| $3$ | $\{a\}$ 递增 | $10$ |
| $4$ | $k\leq 5$ | $12$ |
| $5$ | $k=n$ | $13$ |
| $6$ | $n \le 3 \times 10^5$ | $20$ |
| $7$ | 无特殊限制 | $30$ |

对于 $100\%$ 的数据：$1\leq k\leq n\leq 10^6$，$0\leq a_i\leq 10^9$。


---

---
title: "「FAOI-R4」蒲公英的约定"
layout: "post"
diff: 提高+/省选-
pid: P11787
tag: ['模拟', '树形数据结构', '线性数据结构', '2025', '洛谷原创', 'O2优化', '洛谷月赛']
---
# 「FAOI-R4」蒲公英的约定
## 题目背景

**[背景部分或许更好的阅读体验](https://www.luogu.com.cn/article/bz5b7xlo)**

**提示：题目背景与题意并无显著关联。**

$$ 1 $$

“怎么又来了一个，还是个女生，不知道好不好看。”曹玉明还没盖上水杯，就有些迫不及待地对着自己的“小弟”戏谑道，丝毫不管台上还在说话的王老师，“还是从八班转过来的，必须好好教育一下。”

“大哥说的对，这帮实验班的不是什么好东西。”旁边的小个子男生附和着，“必须先挫掉她的锐气。”

说话间，一位穿着花白裙子的女生走了进来，一阵春风吹过还未关紧的窗户，把她的裙子掀的飘了起来，曹玉明的身边划过一丝清香，还未来得及去思索这气息的来源，只听得一声铁器撞在桌面的声音，他的腿上也感到一阵水流带来的寒意。

“你长眼睛了吗？”曹玉明扶起水杯，便大声喊着。那女生连忙弯下腰道歉。她衣兜一朵小小的蒲公英差点掉了出来，散发着一种若隐若现的馨香。他这才注意到那女生的容貌，乌黑的头发宛如瀑布一样自然地垂下来，白皙的脸上闪着明朗的春日晨曦，澄澈的眼眸犹如潭水......他还没来得及说“没事”，台上猛然传来一声王老师的河东狮吼“怎么第一天就迟到了”，那女生赶忙坐在空位上。

他还没回过神，眼神朝向那个残留着一点香气的方向，呆呆地望着。旁边一阵“咯咯”声传来，虽然细微却也惊醒了他，“笑什么笑，再给你上一课。”他抬起手，小个子男生的脸上随着一声清脆的响声多了个有些猩红的巴掌印，顿时不敢出声，曹玉明也听清楚了老师说的话，那个女生好像叫什么“张艳奇”。“好土的名字。”他嘟囔着，也没注意到小个子又要倾泻而出的笑意。

$$ 2 $$

“我服了，怎么又到这天杀的化学课了，又要看到王头那张老不死的臭脸了，还是实验课，我说白了小林你去给我说一下那个挨千刀的什么硫酸铜实验怎么做，要我被骂了第一个干的就是你！”小个子男生有些颤抖，“我也不知道啊，大哥。”他那小小的脸上又多了一个更加鲜红的巴掌印。

此时老师进来了，毕竟是对校规还有些残存的敬畏，即使是作为南城三中的一霸曹玉明也不再造次，王老师进到班里，在讲台上放了一份名单，“因为新同学的转入，大家以后分组实验的搭档可能改变，你们去看一下！”王老师把一张表格挂在黑板上，“今天金属活动性置换反应实验还是按照学号两两分组。”

曹玉明率先挤到了人群中，惊呼一声，学号表上自己前面竟然有个不认识的女生，好像叫什么“张嫣琪”，学号是“425”，而曹玉明是“426”。他在脑海里搜索了自己可怜的知识库，终于想起第二个字的读音，“原来是你啊！”他感叹于神奇的姓名机缘，也有些莫名其妙的兴奋。

实验桌前，看着试剂瓶中的蓝色溶液，还有面前的一小点铁粉，曹玉明抓耳挠腮，而张嫣琪已经熟练的用镊子夹起了铁块，放进了装了一点蓝色溶液的烧杯中。瞬时间铁粉变红，曹玉明的脸上也红了，张嫣琪拂了一下他的额头，“帅哥，别呆坐着了，实验做完了。”看着曹玉明不解的眼神，张嫣琪有一点惊讶，“硫酸铜中铜金属活动性没有铁强”，她没有一丝烦躁和嫌弃，“铁就把铜置换出来了。”

“置换”“活动性”这些词在曹玉明的脑海里宛如天书，他竟不知道怎么接上，脑海里只剩下张嫣琪的那句“帅哥”。张嫣琪见他的呆滞而有些无奈，决定先缓解一下气氛，“你不好奇我是怎么来到这里的吗？”挣扎在化学知识漩涡中的曹玉明赶忙问道，“好奇”，曹玉明急忙喊出来，掩饰自己的尴尬。他听到这世界上除了好好学习走高考和像他一样混社会，居然还可以学艺术、练体育，也能考上好大学，而在他面前的就是一位，舞蹈生，她已经拿到了一所本地高中艺术班的签约，并不想在实验班的频繁刷题中浪费时间了，就准备来到轻松一点的环境。

他有些无地自容，原先还以为面前的人是因为犯了什么事才被“发配”来这四班的，而他在这里都是居于平均以下的位置。在长久地沉默中，她好像觉察出来了什么，在他头上敲了三下。他也心领神会，“那就中午吧”，他有些小声，似是为了盖掩自己的羞愧。

$$ 3 $$

“今天还去网……”姓林的小个子男生脸上又多了一抹淡淡的红色，悻悻走开了。而 90 分钟的时间对于曹玉明来说宛如一个世纪，他终于知道了什么是反应，什么是化合，什么是置换。他用了一个自己脑海边缘的一个词，“我还任重道远啊。”而张嫣琪把衣兜里的蒲公英拿了出来，双手递给他，“这是我和你的约定。”他拿出一张纸，是南城一中的宣传报，“我相信你！”

从那以后，曹玉明的身边，那位小个子男生出现的越来越少，每个 90 分钟的午休，网吧里少了一个高大帅气的身影，四班教室的空荡又多了一分。那根蒲公英静静地水培在曹玉明的书桌前，曹玉明看着蒲公英的生长，成绩单上的排名数字却不断的变小。

2010 年 6 月 21 日，学校放了三天的假，小林和其他的帮派成员依然无所事事，反正这只是一段枷锁的开解而已；曹玉明又一次看着自己二模区排的数字，213，而目光停留在一本《2010 年南城区中考中招说明》，书上南城一中的“统招”一行赫然写着“262 人”，他又撸起袖子，翻开一本数学模拟卷，飞转的笔在前 23 个数字号码上矫若游龙，“119 分钟”，他有些沮丧，“在函数题上卡了好久啊，不过至少差不多做完了”。

$$ 4 $$

6 月 25 日，下午 14 点 40，这次的题目有些难，他这时才开始做函数题，以往都能给函数题和压轴题留上一整个小时的。他有些急切，所以飞速地读完了题目要求，“怎么这是个分数啊，第一问就来这个？”他差点叫出声，笔有些颤抖，验算了好几遍，确认这个数又浪费了好久。第二问问得有些新颖，他有些胆怯不敢下笔，没想出什么妙法后只得开始繁琐的分类讨论，草稿纸上一整面近乎满了，丝毫没有注意到考试快要结束了的他还在算着，写上四个答案区间后，他小心翼翼地又看了一遍区间有没有重叠。

“考试即将结束，收卷时请注意答题卡朝上。”“什么”他惊叫出来，“请注意考试纪律，再违反将以考试违纪处理！”他不敢再说话，看着离考试结束只剩下 2 分钟，和空白一整页的压轴大题，他早已忘记当时干了什么。他只记得，交卷时自己压轴题上第一问涂涂改改，第二问根本空白；他只记得，同学们欢呼着“这次函数题真简洁”，而好像他们口中的题目与他做的都不太像同一道；他只记得，那一晚他的书桌上是湿的，“我要考上南城一中”的白色贴纸仍然孤傲的悬挂，却有如败局已定的军队即将失守的一座堡垒……

“你真是我们的奇迹！”班级的毕业聚会在 7 月举行，“你知道你由那个混混变成了什么吗？你已经高出南城二中录取线了，你考上了一所区重点！”曹玉明低着头，一阵夏日的微风拂过，蒲公英的毛絮掉了大半，他赶忙收起衣兜，但又掉了几根毛絮。

$$ 5 $$

搬迁自然是远学的结局，曹玉明亦不例外。一根手指的长度，他在地图上一次次地算着，“五十三公里，”一声哀嚎声传来，“那就是高速开车也得一个小时，比从这里到机场都远。”他丝毫没有听到父母对一个“不良少年”考上普高——还是重点中学——的嘉许和电话里和房东的讨价声。

搬迁来得很急，甚至没来得及送走太阳辐射在这个内地小城最后的疯狂。最后一次打开这座房子的窗户，无形的波浪向着曹玉明探出窗户的身体扑来，直到额头上沁下的汗珠落在一根软绵绵的白絮上，他赶忙把手心的那串珍宝向里拉回，所剩不多的白絮还是掉了几根。

三伏的热气让把蒲公英插回花瓶里时的手抖了抖，一滴水浸到了白色的单纸，他顺着“南城二中”四个字晕开的痕迹看了下去，越看却对这张灾难的告知书越来越入迷。

还没来得及擦干手，笔触已经落到书桌前的那张贴纸，“一”下面多了一横，“前 3 名”有些突兀地写了上去。他的嘴角从那个下午开始，第一次有了一点上扬。

$$ 6 $$

“信不信我处分你啊！”南城一中里，一位穿着西服领导模样的人物，叫骂着。“我给你这次跨校交流的机会，雇大巴车跨越几十公里不是为了让你作为优秀学生代表带头旷课的！”但是他跑出了曾经梦寐以求的校门。在那个校园安保并不完善的年代，他轻而易举地拦下一辆出租车，坐了上去。

“南城机场！”他气喘吁吁。30 分钟的车程说长也不长，他想了很多。他想起，如果学校能早一天来安排这次参观，如果那个为期六年的海外培养计划能晚一天开始，如果当年自己没有看错那个正负符号，如果自己多刷一套数学题……如果硫酸铜置换实验那天有个女生没来学校，如果那个水杯没有放在桌角，如果……

航站楼里，一个穿着南城二中校服的少年看着一架飞机，丝毫不注意领带已经快要脱落了。那飞机上的白色舱体，是否有一片是那天她裙子的颜色呢？少年手里一条快要光秃秃的的蒲公英被飞机启动的气流吹过，最后几根絮毛向前方飞去，少年不再能追上它们，他停下脚步，看着絮毛随着风飞得很远很远……
## 题目描述

随着 B 市中考招生方式的多元化，中考统招的名额数量日益减少，在本题目中，你需要根据平行志愿的招生原则（我们会给出详细的解释），高效模拟这一过程。

小 $ \zeta $ 为了更好的填报志愿，找到了某年的中考志愿填报和录取的情况。

具体地，$ n $ 位学生第 $ i $ 个人会填报 $ l_i $ 个志愿，即 $l_i$ 所学校。第 $ i $ 个人的第 $ j $ 志愿为学校 $ a_{i,j} $。总共有 $ m $ 所参与招生的学校，第 $ i $ 所提供了 $ t_i $ 个名额。

按照以下流程确认每个人的录取情况，记 $ b_i $ 为学校 $ i $ 已经招生人数：

* 找到**所有**目前未确定录取结果的**最高分学生**；
* 设**未招满**学校集合 $ S=\{i \mid i \in [1,m] \land t_i > b_i\} $；
* 对于每个当前的最高分学生 $x$，从第一志愿到最后志愿枚举学校 $i=a_{x,1},a_{x,2},\cdots,a_{x,l_x}$：
	* 如果 $i\in S$，则学生 $x$ 被学校 $i$ 录取，令 $b_i\gets b_i+1$，结束；否则，继续枚举下一个。
    * 若枚举所有 $i$ 后没有结束，则学生 $x$ 不被任何学校录取。
* 在上一步中 $ b_i $ 改变不会改变 $ S $，也就是说可能会出现一些学校 $b_i>t_i$。无论这些学生有没有被录取，他们的录取结果都确定了。
* 反复执行该过程直至所有学生录取结果都确定。

对于一次询问，格式如下：

* `x v`：永久性改变 $ t_x \leftarrow t_x-v $，输出录取结果变化的学生个数。
## 输入格式

第一行三个整数 $ n,m,q $，代表学生人数、学校个数和询问次数。

接下来一行，$ m $ 个整数，第 $ i $ 个整数 $ t_i $ 代表高中校 $ i $ 的招生名额数。

接下来 $ n $ 行，第 $ i $ 行第一个整数 $ l_i $ 代表学生 $ i $ 的志愿填报个数，接下来 $ l_i $ 个整数依次代表这位学生的第一至最后志愿高中校，最后一个整数 $ o_i $ 表示学生 $ i $ 的中考分数。

接下来 $ q $ 行，每行均为 `x v` 格式，代表一次询问，含义详见题目描述。
## 输出格式

$ q $ 行，每行一个整数代表录取结果改变的学生数量。
## 样例

### 样例输入 #1
```
5 3 5
1 2 5
3 1 2 3 3
3 1 2 3 2
3 3 2 1 5
2 3 2 4
1 3 4
3 1
3 2
3 1
3 1
2 2
```
### 样例输出 #1
```
0
0
2
2
3
```
## 提示

#### 【样例解释 \#1】

初始时，录取结果分别为（$ 0 $ 表示未被任何学校录取）$ \{1,2,3,3,3\} $。

前两次操作后，录取结果不变。

第三次操作后，录取结果分别为 $ \{1,2,3,2,0\} $。

第四次操作后，录取结果分别为 $ \{1,0,2,2,0\} $。

第五次操作后，录取结果分别为 $ \{0,0,1,0,0\} $。

#### 【数据规模与约定】

对于 $ 100\% $ 的数据：

* $ 1 \le n,m,q \le 3 \times 10^5 $；
* $ 0 \le t_i \le 10^6 $，$ 0 \le l_i \le m $，$ \sum l_i \le 10^6 $，$ 1 \le a_{i,j} \le m $，$ 0 \le o_i \le 10^6 $；
* 对于同一个 $ i $ **不保证** $ a_{i,j} $ 互不相同；
* 对于每次操作有 $ 1 \le x \le m $ 和 $ 0 \le v \le 10^6 $，操作后保证 $ t_i \ge 0 $。

**提示：本题开启捆绑测试。**

* Subtask 1（15 pts）：$ n,m,q \le 500 $，$ \sum l_i \le 5000 $。
* Subtask 2（20 pts）：$ o_i $ 只有两种取值。
* Subtask 3（35 pts）：所有的 $ o_i $ 互异。
* Subtask 4（30 pts）：无特殊限制。


---

---
title: "斐波那契公约数"
layout: "post"
diff: 提高+/省选-
pid: P1306
tag: ['数学', '倍增', '线性数据结构', '递归', '斐波那契数列']
---
# 斐波那契公约数
## 题目描述

对于 Fibonacci 数列：

$$ f_i = \begin{cases}
  [i = 1]               & i \leq 1 \\
  f_{i - 1} + f_{i - 2} & i \gt 1
\end{cases}$$

请求出 $f_n$ 与 $f_m$ 的最大公约数，即 $\gcd(f_n, f_m)$。
## 输入格式

一行两个正整数 $n$ 和 $m$ 。
## 输出格式

输出一行一个整数，代表 $f_n$ 和 $f_m$ 的最大公约数。答案请对 $10^8$ 取模。
## 样例

### 样例输入 #1
```
4 7
```
### 样例输出 #1
```
1
```
## 提示

#### 数据规模与约定

- 对于 $100\%$ 的数据，保证 $1 \leq n, m \leq 10^9$。


---

---
title: "[国家集训队] 种树"
layout: "post"
diff: 提高+/省选-
pid: P1792
tag: ['线性数据结构', '集训队互测']
---
# [国家集训队] 种树
## 题目描述

A城市有一个巨大的圆形广场，为了绿化环境和净化空气，市政府决定沿圆形广场外圈种一圈树。

园林部门得到指令后，初步规划出 $n$ 个种树的位置，顺时针编号 $1$ 到 $n$。并且每个位置都有一个美观度 $A_i$，如果在这里种树就可以得到这 $A_i$ 的美观度。但由于 $A$ 城市土壤肥力欠佳，两棵树决不能种在相邻的位置（$i$ 号位置和 $i+1$ 号位置叫相邻位置。值得注意的是 $1$ 号和 $n$ 号也算相邻位置）。

最终市政府给园林部门提供了 $m$ 棵树苗并要求全部种上，请你帮忙设计种树方案使得美观度总和最大。如果无法将 $m$ 棵树苗全部种上，给出无解信息。

## 输入格式

输入的第一行包含两个正整数 $n$，$m$。

第二行 $n$ 个整数，第 $i$ 个代表 $A_i$。

## 输出格式

输出一个整数，表示最佳植树方案可以得到的美观度。如果无解输出 `Error!`。

## 样例

### 样例输入 #1
```
7 3
1 2 3 4 5 6 7
```
### 样例输出 #1
```
15
```
### 样例输入 #2
```
7 4
1 2 3 4 5 6 7

```
### 样例输出 #2
```
Error!
```
## 提示

数据编号|$n$ 的大小|数据编号| $n$ 的大小
-|-|-|-
$1$|$30$|$11$|$200$
$2$|$35$|$12$|$2007$
$3$|$40$|$13$|$2008$
$4$|$45$|$14$|$2009$
$5$|$50$|$15$|$2010$
$6$|$55$|$16$|$2011$
$7$|$60$|$17$|$2012$
$8$|$65$|$18$|$199999$
$9$|$200$|$19$|$199999$
$10$|$200$|$20$|$200000$

对于全部数据：$m\le n$，$-1000\le A_i\le1000$。


---

---
title: "[HNOI2003] 多项式的加法和乘法"
layout: "post"
diff: 提高+/省选-
pid: P2281
tag: ['2003', '线性数据结构', '各省省选', '平衡树', '湖南', '排序']
---
# [HNOI2003] 多项式的加法和乘法
## 题目描述

今天的数学课上，老师讲了多项式的加法和乘法。然后布置了很多计算题，小明不想花太多时间来做数学作业，于是想编写一个程序来完成这个任务。

比如计算下面两个多项式的和与积：

$xy^2z+31wx^3y^3z^{50}+s^3$  
$v^2+s^3+3wx^3y^3$

假定所有变量都是单个大写字符，所有的系数和指数都是常数，且都是整数。

我们用 `X^3` 表示 $X$ 的三次方，在系数和不同的项之间用空格分隔，例如 `X Y^2` 中，$X$ 和 $Y$ 之间有空格。下面是两个多项式的例子，除此之外没有别的空格。

`X Y^2 Z + 31 W X^3 Y^3 Z^50 + S^3`  
`V^2 + S^3 + 3 W X^3 Y^3`

现在，按照上面的格式给定两个多项式，请你求出这两个多项式的和与积。
## 输入格式

输入包括两行，每一行是一个多项式。每个多项式不超过 $250$ 个字符。计算过程中保证任何中间结果系数和指数均不超过长整数范围。
## 输出格式

输出也是两行，第一行是两个多项式的和，第二行是两个多项式的积。输出中要求合并同类项。输出多项式的格式和输入的格式类似，但输出时请把所有空格都去掉，并保证每一项都是 ASCII 码排在前面的变量放在前面，即输出 `X^3Y^2` 而不是 `Y^2X^3`。另外，输出的项请按变量 `A` 的指数从小到大排列，变量 `A` 指数相同的，按变量 `B` 的指数从小到大排列，依此类推。并注意输出要符合我们平常书写的习惯。
## 样例

### 样例输入 #1
```
A + B
3 A + 4 A B^3 + C

```
### 样例输出 #1
```
C+B+4A+4AB^3

BC+AC+3AB+4AB^4+3A^2+4A^2B^3


```


---

---
title: "[USACO04OPEN] Turning in Homework G"
layout: "post"
diff: 提高+/省选-
pid: P2339
tag: ['动态规划 DP', '2004', '线性数据结构', 'USACO']
---
# [USACO04OPEN] Turning in Homework G
## 题目描述

贝茜有 $ C $ ( $ 1 \leq C \leq 1000 $ )门科目的作业要上交，之后她要去坐巴士和奶牛同学回家。

每门科目的老师所在的教室排列在一条长为 $ H $ ( $ 1 \leq H \leq 1000 $ )的走廊上，他们只在课后接收作业，交作业不需要时间。贝茜现在在位置0，她会告诉你每个教室所在的位置，以及走廊出口的位置。她每走1个单位的路程，就要用1秒。她希望你计算最快多久以后她能交完作业并到达出口。
## 输入格式

第一行：三个整数 $C$，$H$ 和 $B$，$1 \le C \le 1000,1 \le H \le 1000,0 \le B \le H$。

第二行到 $C+1$ 行：第 $i+1$ 行有两个整数 $X_i$ 和 $T_i$，$0 \le X_i \le H,0 \le T_i \le 10000$。

 $B$ 表示车站位置。

 $X_i$ 表示第  $i$ 份作业应该在  $X_i$ 这个位置交。

 $T_i$ 表示这个位置（教室）的这个科目老师（也就是收这份作业的老师）下课的时间。
## 输出格式

单个整数，表示贝西交完作业后走到车站的最短时间

## 样例

### 样例输入 #1
```
4 10 3
8 9
4 21
3 16
8 12

```
### 样例输出 #1
```
22
```
## 提示

走到坐标 8 处，第 9 分钟交一本作业，等到第 12 分钟时，交另一本作业。再走到坐标 4 处交作业，最后走到坐标 3 处，交最后一本作业，此地就是车站所在位置，共用时 22 分钟



---

---
title: "电脑班的裁员"
layout: "post"
diff: 提高+/省选-
pid: P2389
tag: ['动态规划 DP', '线性数据结构', '洛谷原创']
---
# 电脑班的裁员
## 题目背景

隔壁的新初一电脑班刚考过一场试，又到了BlingBling的裁员时间，老师把这项工作交给了ZZY来进行。而ZZY最近忙着刷题，就把这重要的任务交（tui）给了你。

## 题目描述

ZZY有独特的裁员技巧：每个同学都有一个考试得分ai（-1000<=ai<=1000），在n个同学（n<=500）中选出不大于k段（k<=n）相邻的同学留下，裁掉未被选中的同学，使剩下同学的得分和最大。要特别注意的是，这次考试答错要扣分【不要问我为什么】，所以得分有可能为负。

## 输入格式

第一行为n，k，第二行为第1~n位同学的得分。

## 输出格式

一个数s，为最大得分和。

## 样例

### 样例输入 #1
```
5 3
1 -1 1 -1 1
```
### 样例输出 #1
```
3
```
## 提示

2014彭鲲志：“题目这么短一看就很水。”



---

---
title: "[POI 2007] BIU-Offices"
layout: "post"
diff: 提高+/省选-
pid: P3452
tag: ['2007', '线性数据结构', 'POI（波兰）', '深度优先搜索 DFS']
---
# [POI 2007] BIU-Offices
## 题目描述

Bytel is a mobile telephony potentate. Each employee has been issued a company phone, the memory ofwhich holds the numbers of some of his co-workers (all of them have his number in their phones as well).

Due to dynamic growth of their operations the board of directors intends to move company headquaters tonew office buildings. It has been decided - in order to boost work efficiency - that every pair of employeesworking in different buildings should know (reciprocally) each others phone number i.e. the memory of theircompany phone ought to hold necessary phone numbers.

Simultaneously, the board have decided to rent as many office buildings as possible to ensure good workingconditions. Help the board of Bytel to plan the number of office buildings and their size in accordancewith the aforementioned requirements.

## Task

Write a programme which:

reads the description of employees' phone number lists from the standard input        calculates the maximal number of office buildings and their sizes, satisfying board's conditions        writes the outcome to the standard output.
## 输入格式

The first line of the standard input consists of two integers: $n$ and $m$ ($2 \le n \le 100\ 000$, $1 \le m \le 2\ 000\ 000$),separated by single spaces, denoting the number of Bytel employees and the number of pairs of employeeswho have their numbers in company phones, respectively. The employees are numbered from $1$ to $n$.

Each of the following $m$ lines contains a single pair of integers $a_i$ and $b_i$ ($1 \le a_i < b_i \le n$ for $1 \le i \le m$), separated by a single space, denoting that employees $a_i$ and $b_i$ have their numbers (reciprocally) in company phones' memory. Each pair of integers denoting a pair of employees shall occur once at the most in the standard input.

## 输出格式

The first line of the standard output should contain a single integer: the maximal number of office buildingsthat Bytel should rent. The second should contain a non-decreasing sequence of positive integers, separatedby singe spaces, denoting the sizes of the office buildings (i.e. the numbers of employees working there).

Should there exist more than one correct answer - write out any one of them.

## 样例

### 样例输入 #1
```
7 16
1 3
1 4
1 5
2 3
3 4
4 5
4 7
4 6
5 6
6 7
2 4
2 7
2 5
3 5
3 7
1 7
```
### 样例输出 #1
```
3
1 2 4
```
## 题目翻译

## 题目描述

Bytel 是一家移动通信公司。该公司的每位员工都收到了一部公司生产的电话，电话的通讯录中存储着一些同事的电话号码（每部手机中也都有该手机本身的电话号码）。

由于业务扩张，公司总部需要迁移至新的办公区。为了提高工作效率，董事会决定在不同栋楼工作的每一对员工需要**相互**知道对方的电话号码。即如果 $u$ 和 $v$ 在不同的楼工作，则 $u$ 的通讯录里需要存储 $v$ 的电话号，$v$ 的通讯录里也要存储 $u$ 的电话号码。

同时，董事会决定租用尽可能多的楼，以确保良好的工作条件。现在你需要帮助 Bytel 公司计算出他们需要租用多少栋楼。

## 输入格式

输入第一行包含两个整数 $n,m$，分别代表公司的员工数和通讯录的信息数，员工从 $1$ 到 $n$ 编号。

接下来 $m$ 行，每行两个整数 $a_i,b_i$，表示 $a_i$ 和 $b_i$ **相互**知道对方的电话号码，保证任意两条信息不重复。

## 输出格式

输出第一行包含一个整数 $t$：董事会需要租用多少栋办公楼。

第二行包含 $t$ 个整数，第 $i$ 个整数 $c_i$ 表示在第 $i$ 栋建筑工作的员工数量。你的输出需要保证 $c_i$ 是单调不下降的。

如果有多种合法方案，你可以输出任意一种。

## 数据范围

$2 \leq n \leq 10^5$，$1 \leq m \leq 2 \times 10^6$，$1 \leq a_i \lt b_i \leq n$。


---


---
title: "[NOIP 2000 提高组] 方格取数"
layout: "post"
diff: 普及+/提高
pid: P1004
tag: ['动态规划 DP', '2000', '递归', 'NOIP 提高组', '费用流']
---
# [NOIP 2000 提高组] 方格取数
## 题目背景

NOIP 2000 提高组 T4
## 题目描述

设有 $N \times N$ 的方格图 $(N \le 9)$，我们将其中的某些方格中填入正整数，而其他的方格中则放入数字 $0$。如下图所示（见样例）:

![](https://cdn.luogu.com.cn/upload/image_hosting/0bpummja.png)

某人从图的左上角的 $A$ 点出发，可以向下行走，也可以向右走，直到到达右下角的 $B$ 点。在走过的路上，他可以取走方格中的数（取走后的方格中将变为数字 $0$）。  
此人从 $A$ 点到 $B$ 点共走两次，试找出 $2$ 条这样的路径，使得取得的数之和为最大。

## 输入格式

输入的第一行为一个整数 $N$（表示 $N \times N$ 的方格图），接下来的每行有三个整数，前两个表示位置，第三个数为该位置上所放的数。一行单独的 $0$ 表示输入结束。

## 输出格式

只需输出一个整数，表示 $2$ 条路径上取得的最大的和。

## 样例

### 样例输入 #1
```
8
2 3 13
2 6  6
3 5  7
4 4 14
5 2 21
5 6  4
6 3 15
7 2 14
0 0  0

```
### 样例输出 #1
```
67
```
## 提示

数据范围：$1\le N\le 9$。


---

---
title: "[NOIP 2007 提高组] 矩阵取数游戏"
layout: "post"
diff: 普及+/提高
pid: P1005
tag: ['动态规划 DP', '高精度', '2007', 'NOIP 提高组', '区间 DP']
---
# [NOIP 2007 提高组] 矩阵取数游戏
## 题目描述

帅帅经常跟同学玩一个矩阵取数游戏：对于一个给定的 $n \times m$ 的矩阵，矩阵中的每个元素 $a_{i,j}$ 均为非负整数。游戏规则如下：

1. 每次取数时须从每行各取走一个元素，共 $n$ 个。经过 $m$ 次后取完矩阵内所有元素；
2. 每次取走的各个元素只能是该元素所在行的行首或行尾；
3. 每次取数都有一个得分值，为每行取数的得分之和，每行取数的得分 = 被取走的元素值 $\times 2^i$，其中 $i$ 表示第 $i$ 次取数（从 $1$ 开始编号）；
4. 游戏结束总得分为 $m$ 次取数得分之和。

帅帅想请你帮忙写一个程序，对于任意矩阵，可以求出取数后的最大得分。

## 输入格式

输入文件包括 $n+1$ 行：

第一行为两个用空格隔开的整数 $n$ 和 $m$。

第 $2\sim n+1$ 行为 $n \times m$ 矩阵，其中每行有 $m$ 个用单个空格隔开的非负整数。





## 输出格式

输出文件仅包含 $1$ 行，为一个整数，即输入矩阵取数后的最大得分。
## 样例

### 样例输入 #1
```
2 3
1 2 3
3 4 2

```
### 样例输出 #1
```
82
```
## 提示

**【数据范围】**

对于 $60\%$ 的数据，满足 $1\le n,m\le 30$，答案不超过 $10^{16}$。  
对于 $100\%$ 的数据，满足 $1\le n,m\le 80$，$0\le a_{i,j}\le1000$。

**【题目来源】**

NOIP 2007 提高第三题。






---

---
title: "[NOIP 2008 提高组] 传纸条"
layout: "post"
diff: 普及+/提高
pid: P1006
tag: ['动态规划 DP', '2008', 'NOIP 提高组', '费用流']
---
# [NOIP 2008 提高组] 传纸条
## 题目描述

小渊和小轩是好朋友也是同班同学，他们在一起总有谈不完的话题。一次素质拓展活动中，班上同学安排坐成一个 $m$ 行 $n$ 列的矩阵，而小渊和小轩被安排在矩阵对角线的两端，因此，他们就无法直接交谈了。幸运的是，他们可以通过传纸条来进行交流。纸条要经由许多同学传到对方手里，小渊坐在矩阵的左上角，坐标 $(1,1)$，小轩坐在矩阵的右下角，坐标 $(m,n)$。从小渊传到小轩的纸条只可以向下或者向右传递，从小轩传给小渊的纸条只可以向上或者向左传递。

在活动进行中，小渊希望给小轩传递一张纸条，同时希望小轩给他回复。班里每个同学都可以帮他们传递，但只会帮他们一次，也就是说如果此人在小渊递给小轩纸条的时候帮忙，那么在小轩递给小渊的时候就不会再帮忙。反之亦然。

还有一件事情需要注意，全班每个同学愿意帮忙的好感度有高有低（注意：小渊和小轩的好心程度没有定义，输入时用 $0$ 表示），可以用一个 $[0,100]$ 内的自然数来表示，数越大表示越好心。小渊和小轩希望尽可能找好心程度高的同学来帮忙传纸条，即找到来回两条传递路径，使得这两条路径上同学的好心程度之和最大。现在，请你帮助小渊和小轩找到这样的两条路径。

## 输入格式

第一行有两个用空格隔开的整数 $m$ 和 $n$，表示班里有 $m$ 行 $n$ 列。

接下来的 $m$ 行是一个 $m \times n$ 的矩阵，矩阵中第 $i$ 行 $j$ 列的整数表示坐在第 $i$ 行 $j$ 列的学生的好心程度。每行的 $n$ 个整数之间用空格隔开。

## 输出格式

输出文件共一行一个整数，表示来回两条路上参与传递纸条的学生的好心程度之和的最大值。

## 样例

### 样例输入 #1
```
3 3
0 3 9
2 8 5
5 7 0

```
### 样例输出 #1
```
34
```
## 提示

**【数据范围】**

对于 $30\%$ 的数据，满足 $1 \le m,n \le 10$。  
对于 $100\%$ 的数据，满足 $1 \le m,n \le 50$。

**【题目来源】**

NOIP 2008 提高组第三题。


---

---
title: "[NOIP 1998 提高组] 进制位"
layout: "post"
diff: 普及+/提高
pid: P1013
tag: ['搜索', '1998', 'NOIP 提高组', '枚举', '进制']
---
# [NOIP 1998 提高组] 进制位
## 题目描述

著名科学家卢斯为了检查学生对进位制的理解，他给出了如下的一张加法表，表中的字母代表数字。 例如：

$$
\def\arraystretch{2}
\begin{array}{c||c|c|c|c}
\rm +  & \kern{.5cm} \rm \mathclap{L} \kern{.5cm}  &  \kern{.5cm} \rm \mathclap{K} \kern{.5cm} &  \kern{.5cm} \rm \mathclap{V} \kern{.5cm} & \kern{.5cm} \rm \mathclap{E} \kern{.5cm} \\ \hline\hline
\rm L  &  \rm L  &  \rm K  &  \rm V  & \rm E  \\ \hline
\rm K  &  \rm K  &  \rm V  &  \rm E  & \rm \mathclap{KL} \\ \hline
\rm V  &  \rm V  &  \rm E  &  \rm \mathclap{KL} & \rm \mathclap{KK} \\ \hline
\rm E  &  \rm E  &  \rm \mathclap{KL} &  \rm \mathclap{KK} & \rm \mathclap{KV} \\
\end{array}$$

其含义为：

$L+L=L$，$L+K=K$，$L+V=V$，$L+E=E$

$K+L=K$，$K+K=V$，$K+V=E$，$K+E=KL$    

$\cdots$

$E+E=KV$    

根据这些规则可推导出：$L=0$，$K=1$，$V=2$，$E=3$。

同时可以确定该表表示的是 $4$ 进制加法。
## 输入格式

第一行一个整数 $n$（$3\le n\le9$）表示行数。

以下 $n$ 行，每行包括 $n$ 个字符串，每个字符串间用空格隔开。）

若记 $s_{i,j}$ 表示第 $i$ 行第 $j$ 个字符串，数据保证 $s_{1,1}=\texttt +$，$s_{i,1}=s_{1,i}$，$|s_{i,1}|=1$，$s_{i,1}\ne s_{j,1}$ （$i\ne j$）。

保证至多有一组解。
## 输出格式

第一行输出各个字母表示什么数，格式如：`L=0 K=1` $\cdots$ 按给出的字母顺序排序。不同字母必须代表不同数字。

第二行输出加法运算是几进制的。

若不可能组成加法表，则应输出 `ERROR!`。
## 样例

### 样例输入 #1
```
5
+ L K V E
L L K V E
K K V E KL
V V E KL KK
E E KL KK KV

```
### 样例输出 #1
```
L=0 K=1 V=2 E=3
4

```
## 提示

NOIP1998 提高组 第三题


---

---
title: "[NOIP 2000 提高组] 乘积最大"
layout: "post"
diff: 普及+/提高
pid: P1018
tag: ['动态规划 DP', '高精度', '2000', 'NOIP 提高组', '线性 DP']
---
# [NOIP 2000 提高组] 乘积最大
## 题目背景

NOIP2000 提高组 T2
## 题目描述

今年是国际数学联盟确定的“2000——世界数学年”，又恰逢我国著名数学家华罗庚先生诞辰 90 周年。在华罗庚先生的家乡江苏金坛，组织了一场别开生面的数学智力竞赛的活动，你的一个好朋友 XZ 也有幸得以参加。活动中，主持人给所有参加活动的选手出了这样一道题目：


设有一个长度为 $N$ 的数字串，要求选手使用 $K$ 个乘号将它分成 $K+1$ 个部分，找出一种分法，使得这 $K+1$ 个部分的乘积能够为最大。


同时，为了帮助选手能够正确理解题意，主持人还举了如下的一个例子：


有一个数字串：$312$，当 $N=3,K=1$ 时会有以下两种分法：

1. $3  \times  12=36$ 
2. $31  \times   2=62$  

   
这时，符合题目要求的结果是：$31  \times  2 = 62$。


现在，请你帮助你的好朋友 XZ 设计一个程序，求得正确的答案。

## 输入格式

程序的输入共有两行：

第一行共有 $2$ 个自然数 $N,K$。

第二行是一个长度为 $N$ 的数字串。

## 输出格式

结果显示在屏幕上，相对于输入，应输出所求得的最大乘积（一个自然数）。

## 样例

### 样例输入 #1
```
4 2
1231

```
### 样例输出 #1
```
62
```
## 提示

**数据范围与约定**

对于 $60\%$ 的测试数据满足 $6≤N≤20$。  
对于所有测试数据，$6≤N≤40,1≤K≤6$。



---

---
title: "[NOIP 1999 提高组] 邮票面值设计"
layout: "post"
diff: 普及+/提高
pid: P1021
tag: ['搜索', '1999', 'NOIP 提高组']
---
# [NOIP 1999 提高组] 邮票面值设计
## 题目背景

除直接打表外，本题不保证存在**正确且时间复杂度可以通过全部数据**做法。由于测试数据过水，部分错误做法可以通过此题，通过不代表做法正确。本题不接受 hack 数据。

[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)
## 题目描述

给定一个信封，最多只允许粘贴 $N$ 张邮票，计算在给定 $K$（$N+K \le 15$）种邮票的情况下（假定所有的邮票数量都足够），如何设计邮票的面值，能得到最大值 $\mathsf{MAX}$，使在 $1$ 至 $\mathsf{MAX}$ 之间的每一个邮资值都能得到。

例如，$N=3$，$K=2$，如果面值分别为 $1$ 分、$4$ 分，则在 $1\sim 6$ 分之间的每一个邮资值都能得到（当然还有 $8$ 分、$9$ 分和 $12$ 分）；如果面值分别为 $1$ 分、$3$ 分，则在 $1\sim 7$ 分之间的每一个邮资值都能得到。可以验证当 $N=3$，$K=2$ 时，$7$ 分就是可以得到的连续的邮资最大值，所以 $\mathsf{MAX}=7$，面值分别为 $1$ 分、$3$ 分。

## 输入格式

$2$ 个整数，代表 $N$，$K$。
## 输出格式

输出共 $2$ 行。

第一行输出若干个数字，表示选择的面值，从小到大排序。

第二行，输出 `MAX=S`，$S$ 表示最大的面值。
## 样例

### 样例输入 #1
```
3 2

```
### 样例输出 #1
```
1 3
MAX=7

```


---

---
title: "[NOIP 2001 提高组] Car 的旅行路线"
layout: "post"
diff: 普及+/提高
pid: P1027
tag: ['图论', '计算几何', '2001', 'NOIP 提高组', '最短路']
---
# [NOIP 2001 提高组] Car 的旅行路线
## 题目描述

又到暑假了，住在城市 A 的 Car 想和朋友一起去城市旅游。  
她知道每个城市都有 $4$ 个飞机场，分别位于一个矩形的 $4$ 个顶点上，同一个城市中两个机场之间有一条笔直的高速铁路，第 $i$ 个城市中高速铁路的单位里程价格为 $T_i$，任意两个不同城市的机场之间均有航线，所有航线单位里程的价格均为 $t$。


![](https://cdn.luogu.com.cn/upload/image_hosting/odqxn9sz.png)

**注意**：图中并没有标出所有的铁路与航线。


那么 Car 应如何安排到城市 B 的路线才能尽可能的节省花费呢？她发现这并不是一个简单的问题，于是她来向你请教。


找出一条从城市 A 到 B 的旅游路线，出发和到达城市中的机场可以任意选取，要求总的花费最少。

## 输入格式

第一行为一个正整数 $n$，表示有 $n$ 组测试数据。

每组的第一行有 $4$ 个正整数 $S,t,A,B$。

$S$ 表示城市的个数，$t$ 表示飞机单位里程的价格，$A$，$B$ 分别为城市A，B 的序号。

接下来有 $S$ 行，其中第 $i$ 行均有 $7$ 个正整数$x_{i1},y_{i1},x_{i2},y_{i2},x_{i3},y_{i3},T_i$，这当中的 $(x_{i1},y_{i1}), (x_{i2},y_{i2}), (x_{i3},y_{i3})$，分别是第 $i$ 个城市中任意 $3$ 个机场的坐标，$T_i$ 为第 $i$ 个城市高速铁路单位里程的价格。

## 输出格式

共有 $n$ 行，每行 $1$ 个数据对应测试数据。  
保留一位小数。

## 样例

### 样例输入 #1
```
1
3 10 1 3
1 1 1 3 3 1 30
2 5 7 4 5 2 1
8 6 8 8 11 6 3
```
### 样例输出 #1
```
47.5
```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 10$，$1\le S \le 100$，$1\le A,B \le S$。

**【题目来源】**

NOIP 2001 提高组第四题


---

---
title: "[NOIP 2002 提高组] 字串变换"
layout: "post"
diff: 普及+/提高
pid: P1032
tag: ['字符串', '搜索', '2002', 'NOIP 提高组', '广度优先搜索 BFS', '剪枝', '折半搜索 meet in the middle']
---
# [NOIP 2002 提高组] 字串变换
## 题目背景

本题不保证存在靠谱的多项式复杂度的做法。测试数据非常的水，各种做法都可以通过，不代表算法正确。因此本题题目和数据仅供参考。

本题为搜索题，本题不接受 hack 数据。[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)
## 题目描述

已知有两个字串 $A,B$ 及一组字串变换的规则（至多 $6$ 个规则），形如：

- $A_1\to B_1$。
- $A_2\to B_2$。

规则的含义为：在 $A$ 中的子串 $A_1$ 可以变换为 $ B_1$，$A_2$ 可以变换为 $B_2\cdots$。

例如：$A=\texttt{abcd}$，$B＝\texttt{xyz}$，

变换规则为：

- $\texttt{abc}\rightarrow\texttt{xu}$，$\texttt{ud}\rightarrow\texttt{y}$，$\texttt{y}\rightarrow\texttt{yz}$。

则此时，$A$ 可以经过一系列的变换变为 $B$，其变换的过程为：

- $\texttt{abcd}\rightarrow\texttt{xud}\rightarrow\texttt{xy}\rightarrow\texttt{xyz}$。

共进行了 $3$ 次变换，使得 $A$ 变换为 $B$。

## 输入格式

第一行有两个字符串 $A,B$。

接下来若干行，每行有两个字符串 $A_i,B_i$，表示一条变换规则。

## 输出格式

若在 $10$ 步（包含 $10$ 步）以内能将 $A$ 变换为 $B$，则输出最少的变换步数；否则输出 `NO ANSWER!`。

## 样例

### 样例输入 #1
```
abcd xyz
abc xu
ud y
y yz

```
### 样例输出 #1
```
3

```
## 提示

对于 $100\%$ 数据，保证所有字符串长度的上限为 $20$。

**【题目来源】**

NOIP 2002 提高组第二题


---

---
title: "[NOIP 2002 提高组] 矩形覆盖"
layout: "post"
diff: 普及+/提高
pid: P1034
tag: ['搜索', '计算几何', '2002', 'NOIP 提高组']
---
# [NOIP 2002 提高组] 矩形覆盖
## 题目描述

在平面上有 $n$ 个点，每个点用一对整数坐标表示。例如：当 $n=4$ 时，$4$ 个点的坐标分别为：$p_1(1,1)$，$p_2(2,2)$，$p_3(3,6)$，$p_4(0,7)$，见图一。

![](https://cdn.luogu.com.cn/upload/image_hosting/dxc1c5k9.png)

这些点可以用 $k$ 个矩形全部覆盖，矩形的边平行于坐标轴。当 $k=2$ 时，可用如图二的两个矩形 $s_1,s_2$ 覆盖，$s_1,s_2$ 面积和为 $4$。问题是当 $n$ 个点坐标和 $k$ 给出后，怎样才能使得覆盖所有点的 $k$ 个矩形的面积之和为最小呢？  
约定：覆盖一个点的矩形面积为 $0$；覆盖平行于坐标轴直线上点的矩形面积也为 $0$。各个矩形必须完全分开（边线与顶点也都不能重合）。

## 输入格式

第一行共两个整数 $n,k$，含义如题面所示。

接下来 $n$ 行，其中第 $i+1$ 行有两个整数 $x_i,y_i$，表示平面上第 $i$ 个点的坐标。

## 输出格式

共一行一个整数，为满足条件的最小的矩形面积之和。

## 样例

### 样例输入 #1
```
4 2
1 1
2 2
3 6
0 7

```
### 样例输出 #1
```
4
```
## 提示

对于 $100\%$ 数据，满足 $1\le n \le  50$，$1 \le k \le 4$，$0 \le x_i,y_i  \le 500$。

**【题目来源】**

NOIP 2002 提高组第四题


---

---
title: "[NOIP 2003 提高组] 神经网络"
layout: "post"
diff: 普及+/提高
pid: P1038
tag: ['图论', '2003', 'NOIP 提高组', '拓扑排序']
---
# [NOIP 2003 提高组] 神经网络
## 题目背景

人工神经网络（Artificial Neural Network）是一种新兴的具有自我学习能力的计算系统，在模式识别、函数逼近及贷款风险评估等诸多领域有广泛的应用。对神经网络的研究一直是当今的热门方向，兰兰同学在自学了一本神经网络的入门书籍后，提出了一个简化模型，他希望你能帮助他用程序检验这个神经网络模型的实用性。


## 题目描述

在兰兰的模型中，神经网络就是一张有向图，图中的节点称为神经元，而且两个神经元之间至多有一条边相连，下图是一个神经元的例子：

![](https://cdn.luogu.com.cn/upload/image_hosting/61qm40kj.png)

神经元（编号为 $i$）


图中，$X_1 \sim X_3$ 是信息输入渠道，$Y_1 \sim Y_2$ 是信息输出渠道，$C_i$ 表示神经元目前的状态，$U_i$ 是阈值，可视为神经元的一个内在参数。

神经元按一定的顺序排列，构成整个神经网络。在兰兰的模型之中，神经网络中的神经元分为几层；称为输入层、输出层，和若干个中间层。每层神经元只向下一层的神经元输出信息，只从上一层神经元接受信息。下图是一个简单的三层神经网络的例子。

![](https://cdn.luogu.com.cn/upload/image_hosting/4xd7f8yz.png)

兰兰规定，$C_i$ 服从公式：（其中 $n$ 是网络中所有神经元的数目）

$$C_i=\left(\sum\limits_{(j,i) \in E} W_{ji}C_{j}\right)-U_{i}$$

公式中的 $W_{ji}$（可能为负值）表示连接 $j$ 号神经元和 $i$ 号神经元的边的权值。当 $C_i$ 大于 $0$ 时，该神经元处于兴奋状态，否则就处于平静状态。当神经元处于兴奋状态时，下一秒它会向其他神经元传送信号，信号的强度为 $C_i$。

如此．在输入层神经元被激发之后，整个网络系统就在信息传输的推动下进行运作。现在，给定一个神经网络，及当前输入层神经元的状态（$C_i$），要求你的程序运算出最后网络输出层的状态。


## 输入格式

输入文件第一行是两个整数 $n$（$1 \le n \le 100$）和 $p$。接下来 $n$ 行，每行 $2$ 个整数，第 $i+1$ 行是神经元 $i$ 最初状态和其阈值（$U_i$），非输入层的神经元开始时状态必然为 $0$。再下面 $p$ 行，每行有两个整数 $i,j$ 及一个整数 $W_{ij}$，表示连接神经元 $i,j$ 的边权值为 $W_{ij}$。

## 输出格式

输出文件包含若干行，每行有 $2$ 个整数，分别对应一个神经元的编号，及其最后的状态，$2$ 个整数间以空格分隔。仅输出最后状态大于 $0$ 的输出层神经元状态，并且按照编号由小到大顺序输出。

若输出层的神经元最后状态均小于等于 $0$，则输出 `NULL`。

## 样例

### 样例输入 #1
```
5 6
1 0
1 0
0 1
0 1
0 1
1 3 1
1 4 1
1 5 1
2 3 1
2 4 1
2 5 1

```
### 样例输出 #1
```
3 1
4 1
5 1

```
## 提示

**【题目来源】**

NOIP 2003 提高组第一题


---

---
title: "[NOIP 2003 提高组] 加分二叉树"
layout: "post"
diff: 普及+/提高
pid: P1040
tag: ['动态规划 DP', '2003', '递归', 'NOIP 提高组', 'Special Judge', 'O2优化', '枚举']
---
# [NOIP 2003 提高组] 加分二叉树
## 题目描述

设一个 $n$ 个节点的二叉树 $\text{tree}$ 的中序遍历为$(1,2,3,\ldots,n)$，其中数字 $1,2,3,\ldots,n$ 为节点编号。每个节点都有一个分数（均为正整数），记第 $i$ 个节点的分数为 $d_i$，$\text{tree}$ 及它的每个子树都有一个加分，任一棵子树 $\text{subtree}$（也包含 $\text{tree}$ 本身）的加分计算方法如下：


$\text{subtree}$ 的左子树的加分 $\times$ $\text{subtree}$ 的右子树的加分 $+$ $\text{subtree}$ 的根的分数。

若某个子树为空，规定其加分为 $1$，叶子的加分就是叶节点本身的分数。不考虑它的空子树。

试求一棵符合中序遍历为 $(1,2,3,\ldots,n)$ 且加分最高的二叉树 $\text{tree}$。要求输出

1. $\text{tree}$ 的最高加分。

2. $\text{tree}$ 的前序遍历。
## 输入格式

第 $1$ 行 $1$ 个整数 $n$，为节点个数。

第 $2$ 行 $n$ 个用空格隔开的整数，为每个节点的分数

## 输出格式

第 $1$ 行 $1$ 个整数，为最高加分（$ Ans \le 4,000,000,000$）。

第 $2$ 行 $n$ 个用空格隔开的整数，为该树的前序遍历。


## 样例

### 样例输入 #1
```
5
5 7 1 2 10

```
### 样例输出 #1
```
145
3 1 2 4 5

```
## 提示

### 数据规模与约定

对于全部的测试点，保证 $1 \leq n< 30$，节点的分数是小于 $100$ 的正整数，答案不超过 $4 \times 10^9$。


---

---
title: "[NOIP 2003 普及组] 数字游戏"
layout: "post"
diff: 普及+/提高
pid: P1043
tag: ['动态规划 DP', '搜索', '2003', 'NOIP 普及组', '前缀和']
---
# [NOIP 2003 普及组] 数字游戏
## 题目描述

丁丁最近沉迷于一个数字游戏之中。这个游戏看似简单，但丁丁在研究了许多天之后却发觉原来在简单的规则下想要赢得这个游戏并不那么容易。游戏是这样的，在你面前有一圈整数（一共 $n$ 个），你要按顺序将其分为 $m$ 个部分，各部分内的数字相加，相加所得的 $m$ 个结果对 $10$ 取模后再相乘，最终得到一个数 $k$。游戏的要求是使你所得的 $k$ 最大或者最小。


例如，对于下面这圈数字（$n=4$，$m=2$）：

![](https://cdn.luogu.com.cn/upload/image_hosting/gy407k49.png)

要求最小值时，$((2-1)\bmod10)\times ((4+3)\bmod10)=1\times 7=7$，要求最大值时，为 $((2+4+3)\bmod10)\times (-1\bmod10)=9\times 9=81$。特别值得注意的是，无论是负数还是正数，对 $10$ 取模的结果均为非负值。

丁丁请你编写程序帮他赢得这个游戏。

## 输入格式

输入文件第一行有两个整数，$n$ （$1\le n\le 50$） 和 $m$ （$1\le m\le 9$）。以下 $n$ 行每行有个整数，其绝对值 $\le10^4$，按顺序给出圈中的数字，首尾相接。
## 输出格式

输出文件有 $2$ 行，各包含 $1$ 个非负整数。第 $1$ 行是你程序得到的最小值，第 $2$ 行是最大值。
## 样例

### 样例输入 #1
```
4 2
4
3
-1
2

```
### 样例输出 #1
```
7
81

```
## 提示

**【题目来源】**

NOIP 2003 普及组第二题


---

---
title: "[NOIP 2005 提高组] 过河"
layout: "post"
diff: 普及+/提高
pid: P1052
tag: ['动态规划 DP', '2005', 'NOIP 提高组']
---
# [NOIP 2005 提高组] 过河
## 题目描述

在河上有一座独木桥，一只青蛙想沿着独木桥从河的一侧跳到另一侧。在桥上有一些石子，青蛙很讨厌踩在这些石子上。由于桥的长度和青蛙一次跳过的距离都是正整数，我们可以把独木桥上青蛙可能到达的点看成数轴上的一串整点：$0,1,\cdots,L$（其中 $L$ 是桥的长度）。坐标为 $0$ 的点表示桥的起点，坐标为 $L$ 的点表示桥的终点。青蛙从桥的起点开始，不停的向终点方向跳跃。一次跳跃的距离是 $S$ 到 $T$ 之间的任意正整数（包括 $S,T$）。当青蛙跳到或跳过坐标为 $L$ 的点时，就算青蛙已经跳出了独木桥。

题目给出独木桥的长度 $L$，青蛙跳跃的距离范围 $S,T$，桥上石子的位置。你的任务是确定青蛙要想过河，最少需要踩到的石子数。
## 输入格式

输入共三行，

- 第一行有 $1$ 个正整数 $L$，表示独木桥的长度。
- 第二行有 $3$ 个正整数 $S,T,M$，分别表示青蛙一次跳跃的最小距离，最大距离及桥上石子的个数。
- 第三行有 $M$ 个不同的正整数分别表示这 $M$ 个石子在数轴上的位置（数据保证桥的起点和终点处没有石子）。所有相邻的整数之间用一个空格隔开。
## 输出格式

一个整数，表示青蛙过河最少需要踩到的石子数。


## 样例

### 样例输入 #1
```
10
2 3 5
2 3 5 6 7

```
### 样例输出 #1
```
2
```
## 提示

**【数据范围】**

- 对于 $30\%$ 的数据，$1\le L \le 10^4$；
- 对于 $100\%$ 的数据，$1\le L \le 10^9$，$1\le S\le T\le10$，$1\le M\le100$。

**【题目来源】**

NOIP 2005 提高组第二题


---

---
title: "[NOIP 2006 提高组] 能量项链"
layout: "post"
diff: 普及+/提高
pid: P1063
tag: ['动态规划 DP', '2006', '递归', 'NOIP 提高组', '枚举', '区间 DP']
---
# [NOIP 2006 提高组] 能量项链
## 题目描述

在 Mars 星球上，每个 Mars 人都随身佩带着一串能量项链。在项链上有 $N$ 颗能量珠。能量珠是一颗有头标记与尾标记的珠子，这些标记对应着某个正整数。并且，对于相邻的两颗珠子，前一颗珠子的尾标记一定等于后一颗珠子的头标记。因为只有这样，通过吸盘（吸盘是 Mars 人吸收能量的一种器官）的作用，这两颗珠子才能聚合成一颗珠子，同时释放出可以被吸盘吸收的能量。如果前一颗能量珠的头标记为 $m$，尾标记为 $r$，后一颗能量珠的头标记为 $r$，尾标记为 $n$，则聚合后释放的能量为 $m \times r \times n$（Mars 单位），新产生的珠子的头标记为 $m$，尾标记为 $n$。

需要时，Mars 人就用吸盘夹住相邻的两颗珠子，通过聚合得到能量，直到项链上只剩下一颗珠子为止。显然，不同的聚合顺序得到的总能量是不同的，请你设计一个聚合顺序，使一串项链释放出的总能量最大。

例如：设 $N=4$，$4$ 颗珠子的头标记与尾标记依次为 $(2,3)(3,5)(5,10)(10,2)$。我们用记号 $\oplus$ 表示两颗珠子的聚合操作，$(j \oplus k)$ 表示第 $j,k$ 两颗珠子聚合后所释放的能量。则第 $4$，$1$ 两颗珠子聚合后释放的能量为：

$(4 \oplus 1)=10 \times 2 \times 3=60$。

这一串项链可以得到最优值的一个聚合顺序所释放的总能量为：

$(((4 \oplus 1) \oplus 2) \oplus 3)=10 \times 2 \times 3+10 \times 3 \times 5+10 \times 5 \times 10=710$。
## 输入格式

第一行是一个正整数 $N$（$4 \le N \le 100$），表示项链上珠子的个数。第二行是 $N$ 个用空格隔开的正整数，所有的数均不超过 $1000$。第 $i$ 个数为第 $i$ 颗珠子的头标记（$1 \le i \le N$），当 $i<N$ 时，第 $i$ 颗珠子的尾标记应该等于第 $i+1$ 颗珠子的头标记。第 $N$ 颗珠子的尾标记应该等于第 $1$ 颗珠子的头标记。

至于珠子的顺序，你可以这样确定：将项链放到桌面上，不要出现交叉，随意指定第一颗珠子，然后按顺时针方向确定其他珠子的顺序。
## 输出格式

一个正整数 $E$（$E\le 2.1 \times 10^9$），为一个最优聚合顺序所释放的总能量。

## 样例

### 样例输入 #1
```
4
2 3 5 10

```
### 样例输出 #1
```
710
```
## 提示

NOIP 2006 提高组 第一题



---

---
title: "[NOIP 2006 提高组] 金明的预算方案"
layout: "post"
diff: 普及+/提高
pid: P1064
tag: ['动态规划 DP', '2006', 'NOIP 提高组', '背包 DP']
---
# [NOIP 2006 提高组] 金明的预算方案
## 题目描述

金明今天很开心，家里购置的新房就要领钥匙了，新房里有一间金明自己专用的很宽敞的房间。更让他高兴的是，妈妈昨天对他说：“你的房间需要购买哪些物品，怎么布置，你说了算，只要不超过 $n$ 元钱就行”。今天一早，金明就开始做预算了，他把想买的物品分为两类：主件与附件，附件是从属于某个主件的，下表就是一些主件与附件的例子：

| 主件 | 附件 |
| :----------: | :----------: |
| 电脑 | 打印机，扫描仪 |
| 书柜 | 图书 |
| 书桌 | 台灯，文具 |
| 工作椅 | 无 |

如果要买归类为附件的物品，必须先买该附件所属的主件。每个主件可以有 $0$ 个、$1$ 个或 $2$ 个附件。每个附件对应一个主件，附件不再有从属于自己的附件。金明想买的东西很多，肯定会超过妈妈限定的 $n$ 元。于是，他把每件物品规定了一个重要度，分为 $5$ 等：用整数 $1 \sim 5$ 表示，第 $5$ 等最重要。他还从因特网上查到了每件物品的价格（都是 $10$ 元的整数倍）。他希望在不超过 $n$ 元的前提下，使每件物品的价格与重要度的乘积的总和最大。

设第 $j$ 件物品的价格为 $v_j$，重要度为 $w_j$，共选中了 $k$ 件物品，编号依次为 $j_1,j_2,\dots,j_k$，则所求的总和为：

$$v_{j_1} \times w_{j_1}+v_{j_2} \times w_{j_2}+ \dots +v_{j_k} \times w_{j_k}$$

请你帮助金明设计一个满足要求的购物单。

## 输入格式

第一行有两个整数，分别表示总钱数 $n$ 和希望购买的物品个数 $m$。

第 $2$ 到第 $(m + 1)$ 行，每行三个整数，第 $(i + 1)$ 行的整数 $v_i$，$p_i$，$q_i$ 分别表示第 $i$ 件物品的价格、重要度以及它对应的的主件。如果 $q_i=0$，表示该物品本身是主件。

## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
1000 5
800 2 0
400 5 1
300 5 1
400 3 0
500 2 0

```
### 样例输出 #1
```
2200
```
## 提示

#### 数据规模与约定

对于全部的测试点，保证 $1 \leq n \leq 3.2 \times 10^4$，$1 \leq m \leq 60$，$0 \leq v_i \leq 10^4$，$1 \leq p_i \leq 5$，$0 \leq q_i \leq m$，答案不超过 $2 \times 10^5$。

NOIP 2006 提高组 第二题


---

---
title: "[NOIP 2009 普及组] 细胞分裂"
layout: "post"
diff: 普及+/提高
pid: P1069
tag: ['数学', '2009', 'NOIP 普及组', '素数判断,质数,筛法']
---
# [NOIP 2009 普及组] 细胞分裂
## 题目描述

Hanks 博士是 BT（Bio-Tech，生物技术）领域的知名专家。现在，他正在为一个细胞实验做准备工作：培养细胞样本。

Hanks 博士手里现在有 $N$ 种细胞，编号从 $1 \sim N$，一个第 $i$ 种细胞经过 $1$ 秒钟可以分裂为 $S_i$ 个同种细胞（$S_i$ 为正整数）。现在他需要选取某种细胞的一个放进培养皿，让其自由分裂，进行培养。一段时间以后，再把培养皿中的所有细胞平均分入 $M$ 个试管，形成 $M$ 份样本，用于实验。Hanks 博士的试管数 $M$ 很大，普通的计算机的基本数据类型无法存储这样大的 $M$ 值，但万幸的是，$M$ 总可以表示为 $m_1$ 的 $m_2$ 次方，即 $M = m_1^{m_2}$，其中 $m_1,m_2$ 均为基本数据类型可以存储的正整数。

注意，整个实验过程中不允许分割单个细胞，比如某个时刻若培养皿中有 $4$ 个细胞，Hanks 博士可以把它们分入 $2$ 个试管，每试管内 $2$ 个，然后开始实验。但如果培养皿中有 $5$ 个细胞，博士就无法将它们均分入 $2$ 个试管。此时，博士就只能等待一段时间，让细胞们继续分裂，使得其个数可以均分，或是干脆改换另一种细胞培养。

为了能让实验尽早开始，Hanks 博士在选定一种细胞开始培养后，总是在得到的细胞“刚好可以平均分入 $M$ 个试管”时停止细胞培养并开始实验。现在博士希望知道，选择哪种细胞培养，可以使得实验的开始时间最早。

## 输入格式

第一行，有一个正整数 $N$，代表细胞种数。

第二行，有两个正整数 $m_1,m_2$，以一个空格隔开，即表示试管的总数 $M = m_1^{m_2}$。

第三行有 $N$ 个正整数，第 $i$ 个数 $S_i$ 表示第 $i$ 种细胞经过 $1$ 秒钟可以分裂成同种细胞的个数。

## 输出格式

一个整数，表示从开始培养细胞到实验能够开始所经过的最少时间（单位为秒）。

如果无论 Hanks 博士选择哪种细胞都不能满足要求，则输出整数 $-1$。

## 样例

### 样例输入 #1
```
1 
2 1 
3

```
### 样例输出 #1
```
-1

```
### 样例输入 #2
```
2
24 1
30 12

```
### 样例输出 #2
```
2

```
## 提示

【输入输出样例 \#1 说明】

经过 $1$ 秒钟，细胞分裂成 $3$ 个，经过 $2$ 秒钟，细胞分裂成 $9$个，……，可以看出无论怎么分裂，细胞的个数都是奇数，因此永远不能分入 $2$ 个试管。

【输入输出样例 \#2 说明】

第 $1$ 种细胞最早在 $3$ 秒后才能均分入 $24$ 个试管，而第 $2$ 种最早在 $2$ 秒后就可以均分（每试管 $144 / {24}^1 = 6$ 个）。故实验最早可以在 $2$ 秒后开始。

【数据范围】

对于 $50 \%$ 的数据，有 $m_1^{m_2} \le 30000$。

对于所有的数据，有 $1 \le N \le 10000$，$1 \le m_1 \le 30000$，$1 \le m_2 \le 10000$，$1 \le S_i \le 2 \times {10}^9$。


NOIP 2009 普及组 第三题



---

---
title: "[NOIP 2009 提高组] Hankson 的趣味题"
layout: "post"
diff: 普及+/提高
pid: P1072
tag: ['数学', '2009', 'NOIP 提高组', '枚举', '最大公约数 gcd']
---
# [NOIP 2009 提高组] Hankson 的趣味题
## 题目描述

Hanks 博士是 BT（Bio-Tech，生物技术) 领域的知名专家，他的儿子名叫 Hankson。现在，刚刚放学回家的 Hankson 正在思考一个有趣的问题。

今天在课堂上，老师讲解了如何求两个正整数 $c_1$ 和 $c_2$ 的最大公约数和最小公倍数。现在 Hankson 认为自己已经熟练地掌握了这些知识，他开始思考一个“求公约数”和“求公倍数”之类问题的“逆问题”，这个问题是这样的：已知正整数 $a_0,a_1,b_0,b_1$，设某未知正整数 $x$ 满足：

1. $x$ 和 $a_0$ 的最大公约数是 $a_1$；

2. $x$ 和 $b_0$ 的最小公倍数是 $b_1$。

Hankson 的“逆问题”就是求出满足条件的正整数 $x$。但稍加思索之后，他发现这样的 $x$ 并不唯一，甚至可能不存在。因此他转而开始考虑如何求解满足条件的 $x$ 的个数。请你帮助他编程求解这个问题。

## 输入格式

第一行为一个正整数 $n$，表示有 $n$ 组输入数据。接下来的$ n$ 行每行一组输入数据，为四个正整数 $a_0,a_1,b_0,b_1$，每两个整数之间用一个空格隔开。输入数据保证 $a_0$ 能被 $a_1$ 整除，$b_1$ 能被 $b_0$ 整除。

## 输出格式

共 $n$ 行。每组输入数据的输出结果占一行，为一个整数。

对于每组数据：若不存在这样的 $x$，请输出 $0$，若存在这样的 $x$，请输出满足条件的 $x$ 的个数；
## 样例

### 样例输入 #1
```
2 
41 1 96 288 
95 1 37 1776 
```
### 样例输出 #1
```
6 
2
```
## 提示

**【样例解释】**

第一组输入数据，$x$ 可以是 $9,18,36,72,144,288$，共有 $6$ 个。

第二组输入数据，$x$ 可以是 $48,1776$，共有 $2$ 个。

**【数据范围】**

- 对于 $50\%$ 的数据，保证有 $1\leq a_0,a_1,b_0,b_1 \leq 10000$ 且 $n \leq 100$。
- 对于 $100\%$ 的数据，保证有 $1 \leq a_0,a_1,b_0,b_1 \leq 2 \times 10^9$ 且 $n≤2000$。

NOIP 2009 提高组 第二题



---

---
title: "[NOISG 2023 Qualification] Dolls"
layout: "post"
diff: 普及+/提高
pid: P10729
tag: ['动态规划 DP', '2023', 'NOISG（新加坡）']
---
# [NOISG 2023 Qualification] Dolls
## 题目描述

Marc 正在教幼儿园的小朋友，他选择套娃来教小朋友们认识物体的大小。

一个套娃有一个自己的尺寸，记为 $a$。如果两个套娃 $x$ 和 $y$ 的尺寸 $a_x$ 和 $a_y$ 可以满足 $a_x-a_y\ge2$，那么套娃 $y$ 可以放在套娃 $x$ 中。

很显然，套娃之间是可以互相嵌套多层的。于是 Marc 想请你回答一些问题：

这些问题持续 $n$ 天。在第 $i$ 天，Marc 购买了一个大小为 $a_i$ 的套娃。他想请你求出，在买完第 $i$ 个套娃后，他用前 $i$ 个套娃最多可以套多少层。
## 输入格式

第一行，一个正整数 $n$。

第二行 $n$ 个整数，表示 $a$。
## 输出格式

一行 $n$ 个正整数，第 $i$ 个表示用前 $i$ 个套娃最多能套多少层。
## 样例

### 样例输入 #1
```
5
1 2 3 4 5
```
### 样例输出 #1
```
1 1 2 2 3
```
### 样例输入 #2
```
5
2 4 6 8 10

```
### 样例输出 #2
```
1 2 3 4 5
```
### 样例输入 #3
```
5
3 3 1 3 2
```
### 样例输出 #3
```
1 1 2 2 2
```
## 提示

### 【数据范围】

|$\text{Subtask}$|分值|特殊性质|
|:-:|:-:|:-:|
|$0$|$0$|样例|
|$1$|$23$|$n\le200$|
|$2$|$14$|$a_i$ 为奇数|
|$3$|$27$|$a_i$ 不为 $4$ 的倍数|
|$4$|$36$|无|

对于 $100\%$ 的数据，$1 \le n \le 100000,1 \le a_i \le 500000$。


---

---
title: "[NOISG 2019 Prelim] Experimental Charges"
layout: "post"
diff: 普及+/提高
pid: P10734
tag: ['2019', '并查集', 'NOISG（新加坡）']
---
# [NOISG 2019 Prelim] Experimental Charges
## 题目背景

翻译自 [NOISG2019 Prelim C.Experimental Charges](https://github.com/noisg/sg_noi_archive/blob/master/2019_prelim/)。
## 题目描述

现有 $N$ 个带电粒子，带正电子的粒子会和带负电子的粒子相互吸引，而带同一种电子的粒子会相互排斥。

有 $Q$ 次操作，每次操作表示为 $T_i,A_i,B_i$，可根据 $T_i$ 的不同分为三种类型：
- `A` 操作代表 $A_i,B_i$ 互相吸引。
- `R` 操作代表 $A_i,B_i$ 互相排斥。
- `Q` 操作询问按照目前已知的信息，如果 $A_i,B_i$ 放在一起，会发生什么。

对于每个 `Q` 操作，如果互相吸引，输出 `A`；如果互相排斥，输出 `R`；如果无法确定，输出 `?`。

保证至少有一种可能使得所有操作不冲突。
## 输入格式

第一行两个整数 $N,Q$。

接下来的 $Q$ 行，每行一个字符 $T_i$ 与两个整数 $A_i,B_i$，表示一种操作。
## 输出格式

若干行，每行表示一次 `Q` 操作的回答。
## 样例

### 样例输入 #1
```
2 3
Q 1 2
R 1 2
Q 1 2
```
### 样例输出 #1
```
?
R
```
### 样例输入 #2
```
4 5
R 1 2
A 2 3
A 1 4
Q 2 4
Q 1 3
```
### 样例输出 #2
```
A
A
```
## 提示

### 【样例 #1 解释】
对于第一次询问，并不能确定 $1,2$ 之间的关系，输出 `?`。

对于第二次询问，可以确定 $1,2$ 相斥，输出 `R`。
### 【数据范围】
| $\text{Subtask}$ | 分值 | $N,Q$ | $T_i,A_i,B_i$ |
| :----------: | :----------: | :----------: | :----------: |
| $0$ | $7$ | $N=2,Q\leq 10$ | 无 |
| $1$ | $11$ | 无 | $A_i=1$ 或 $B_i=1$ |
| $2$ | $14$ | 无 | $T_i$ 仅可能为 `R` 或 `Q` |
| $3$ | $12$ | 无 | 所有关系给出后才有查询操作 |
| $4$ | $25$ | $1\leq N,Q \leq 10^3$ | 无 |
| $5$ | $31$ | 无 | 无 |

对于 $100\%$ 的数据：
- $1 \leq N,Q \leq 10^5$
- $1 \leq A_i \neq B_i \leq N$
- $T_i$ 仅可能为 `A`，`R` 或 `Q`。


---

---
title: "[NOIP 2012 普及组] 文化之旅"
layout: "post"
diff: 普及+/提高
pid: P1078
tag: ['搜索', '图论', '2012', 'NOIP 普及组', '剪枝', '最短路']
---
# [NOIP 2012 普及组] 文化之旅
## 题目背景

本题**不保证**存在**可以通过满足本题数据范围的任意数据**做法。由于测试数据过水，可以通过此题的程序不一定完全正确（算法时间复杂度错误、或不保证正确性）。本题题目和数据仅供参考。本题不接受添加 hack 数据。

本题为错题。**不建议尝试或提交本题。**[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)
## 题目描述

有一位使者要游历各国，他每到一个国家，都能学到一种文化，但他不愿意学习任何一种文化超过一次（即如果他学习了某种文化，则他就不能到达其他有这种文化的国家）。不同的国家可能有相同的文化。不同文化的国家对其他文化的看法不同，有些文化会排斥外来文化（即如果他学习了某种文化，则他不能到达排斥这种文化的其他国家）。

现给定各个国家间的地理关系，各个国家的文化，每种文化对其他文化的看法，以及这位使者游历的起点和终点（在起点和终点也会学习当地的文化），国家间的道路距离，试求从起点到终点最少需走多少路。

## 输入格式

第一行为五个整数 $N,K,M,S,T$，每两个整数之间用一个空格隔开，依次代表国家个数（国家编号为$1$ 到 $N$），文化种数（文化编号为 $1$ 到 $K$），道路的条数，以及起点和终点的编号（保证 $S$ 不等于 $T$）；

第二行为 $N$个整数，每两个整数之间用一个空格隔开，其中第 $i$个数 $C_i$，表示国家 $i$的文化为 $C_i$。

接下来的 $K $行，每行 $K$ 个整数，每两个整数之间用一个空格隔开，记第$ i$ 行的第 j 个数为 $a_{ij}$，$a_{ij}= 1$ 表示文化 $i$ 排斥外来文化$ j$（$i$ 等于 $j$ 时表示排斥相同文化的外来人），$a_{ij}= 0$ 表示不排斥（注意 $i$ 排斥 $j$ 并不保证 $j$ 一定也排斥 $i$）。

接下来的 $M$ 行，每行三个整数 $u,v,d$，每两个整数之间用一个空格隔开，表示国家 $u$与国家 $v $有一条距离为$ d $的可双向通行的道路（保证$ u $不等于 $v$，两个国家之间可能有多条道路）。

## 输出格式

一个整数，表示使者从起点国家到达终点国家最少需要走的距离数（如果无解则输出$-1$）。

## 样例

### 样例输入 #1
```
2 2 1 1 2 
1 2 
0 1 
1 0 
1 2 10 

```
### 样例输出 #1
```
-1
```
### 样例输入 #2
```
2 2 1 1 2 
1 2 
0 1 
0 0 
1 2 10 
```
### 样例输出 #2
```
10
```
## 提示

输入输出样例说明$1$

由于到国家 $2$ 必须要经过国家$ 1$，而国家$ 2 $的文明却排斥国家 $1$ 的文明，所以不可能到达国家 $2$。


输入输出样例说明$2$

路线为$ 1$ ->$ 2$

【数据范围】

对于 100%的数据，有$ 2≤N≤100$

$1≤K≤100$ 

$1≤M≤N^2$

$1≤k_i≤K$

$1≤u, v≤N$ 

$1≤d≤1000,S≠T,1≤S,T≤N$

NOIP 2012 普及组 第四题



---

---
title: "[NOIP 2012 提高组] 国王游戏"
layout: "post"
diff: 普及+/提高
pid: P1080
tag: ['贪心', '高精度', '2012', 'NOIP 提高组', '排序']
---
# [NOIP 2012 提高组] 国王游戏
## 题目描述

恰逢 H 国国庆，国王邀请 $n$ 位大臣来玩一个有奖游戏。首先，他让每个大臣在左、右手上面分别写下一个整数，国王自己也在左、右手上各写一个整数。然后，让这 $n$ 位大臣排成一排，国王站在队伍的最前面。排好队后，所有的大臣都会获得国王奖赏的若干金币，每位大臣获得的金币数分别是：排在该大臣前面的所有人的左手上的数的乘积除以他自己右手上的数，然后向下取整得到的结果。

国王不希望某一个大臣获得特别多的奖赏，所以他想请你帮他重新安排一下队伍的顺序，使得获得奖赏最多的大臣，所获奖赏尽可能的少。注意，国王的位置始终在队伍的最前面。

## 输入格式

第一行包含一个整数 $n$，表示大臣的人数。

第二行包含两个整数 $a$ 和 $b$，之间用一个空格隔开，分别表示国王左手和右手上的整数。

接下来 $n$ 行，每行包含两个整数 $a$ 和 $b$，之间用一个空格隔开，分别表示每个大臣左手和右手上的整数。

## 输出格式

一个整数，表示重新排列后的队伍中获奖赏最多的大臣所获得的金币数。

## 样例

### 样例输入 #1
```
3 
1 1 
2 3 
7 4 
4 6 
```
### 样例输出 #1
```
2
```
## 提示

【输入输出样例说明】

按 $1$、$2$、$3$ 这样排列队伍，获得奖赏最多的大臣所获得金币数为 $2$；

按 $1$、$3$、$2$ 这样排列队伍，获得奖赏最多的大臣所获得金币数为 $2$；

按 $2$、$1$、$3$ 这样排列队伍，获得奖赏最多的大臣所获得金币数为 $2$；

按$ 2$、$3$、$1 $这样排列队伍，获得奖赏最多的大臣所获得金币数为 $9$；

按 $3$、$1$、$2 $这样排列队伍，获得奖赏最多的大臣所获得金币数为 $2$；  

按$ 3$、$2$、$1$ 这样排列队伍，获得奖赏最多的大臣所获得金币数为 $9$。

因此，奖赏最多的大臣最少获得 $2$ 个金币，答案输出 $2$。


 
【数据范围】

对于 $20\%$ 的数据，有 $1≤ n≤ 10,0 < a,b < 8$；

对于 $40\%$ 的数据，有$ 1≤ n≤20,0 < a,b < 8$；

对于 $60\%$ 的数据，有 $1≤ n≤100$；

对于 $60\%$ 的数据，保证答案不超过 $10^9$；

对于 $100\%$ 的数据，有 $1 ≤ n ≤1,000,0 < a,b < 10000$。



NOIP 2012 提高组 第一天 第二题



---

---
title: "[NOIP 2012 提高组] 同余方程"
layout: "post"
diff: 普及+/提高
pid: P1082
tag: ['数学', '2012', 'NOIP 提高组', '扩展欧几里德算法']
---
# [NOIP 2012 提高组] 同余方程
## 题目描述

求关于 $ x$ 的同余方程 $ a x \equiv 1 \pmod {b}$ 的最小正整数解。

## 输入格式

一行，包含两个整数 $a,b$，用一个空格隔开。

## 输出格式

一个整数 $x_0$，即最小正整数解。输入数据保证一定有解。

## 样例

### 样例输入 #1
```
3 10
```
### 样例输出 #1
```
7
```
## 提示

### 数据规模与约定

- 对于 $40\%$ 的数据，$2 ≤b≤ 1,000$；
- 对于 $60\%$ 的数据，$2 ≤b≤ 50,000,000$；
- 对于 $100\%$ 的数据，$2 ≤a, b≤ 2,000,000,000$。




---

---
title: "[NOIP 2007 提高组] 树网的核"
layout: "post"
diff: 普及+/提高
pid: P1099
tag: ['模拟', '动态规划 DP', '树形数据结构', '2007', 'NOIP 提高组', '枚举', '最短路']
---
# [NOIP 2007 提高组] 树网的核
## 题目描述

设 $T=(V,E,W)$ 是一个无圈且连通的无向图（也称为无根树），每条边都有正整数的权，我们称 $T$ 为树网（`treenetwork`），其中 $V$，$E$ 分别表示结点与边的集合，$W$ 表示各边长度的集合，并设 $T$ 有 $n$ 个结点。

路径：树网中任何两结点 $a$，$b$ 都存在唯一的一条简单路径，用 $d(a, b)$ 表示以 $a, b$ 为端点的路径的长度，它是该路径上各边长度之和。我们称 
$d(a, b)$ 为 $a, b$ 两结点间的距离。

$D(v, P)=\min\{d(v, u)\}$, $u$ 为路径 $P$ 上的结点。

树网的直径：树网中最长的路径成为树网的直径。对于给定的树网 $T$，直径不一定是唯一的，但可以证明：各直径的中点（不一定恰好是某个结点，可能在某条边的内部）是唯一的，我们称该点为树网的中心。

偏心距 $\mathrm{ECC}(F)$：树网 $T$ 中距路径 $F$ 最远的结点到路径 $F$ 的距离，即

$$\mathrm{ECC}(F)=\max\{D(v, F),v \in V\}$$

任务：对于给定的树网 $T=(V, E, W)$ 和非负整数 $s$，求一个路径 $F$，他是某直径上的一段路径（该路径两端均为树网中的结点），其长度不超过 $s$（可以等于 $s$），使偏心距 $\mathrm{ECC}(F)$ 最小。我们称这个路径为树网 $T=(V, E, W)$ 的核（`Core`）。必要时，$F$ 可以退化为某个结点。一般来说，在上述定义下，核不一定只有一个，但最小偏心距是唯一的。

下面的图给出了树网的一个实例。图中，$A-B$ 与 $A-C$ 是两条直径，长度均为 $20$。点 $W$ 是树网的中心，$EF$ 边的长度为 $5$。如果指定 $s=11$，则树网的核为路径`DEFG`（也可以取为路径`DEF`），偏心距为 $8$。如果指定 $s=0$（或 $s=1$、$s=2$），则树网的核为结点 $F$，偏心距为 $12$。

![](https://cdn.luogu.com.cn/upload/image_hosting/oms5c6rq.png)

## 输入格式

共 $n$ 行。

第 $1$ 行，两个正整数 $n$ 和 $s$，中间用一个空格隔开。其中 $n$ 为树网结点的个数，$s$ 为树网的核的长度的上界。设结点编号以此为 $1,2\dots,n$。

从第 $2$ 行到第 $n$ 行，每行给出 $3$ 个用空格隔开的正整数 $u, v, w$，依次表示每一条边的两个端点编号和长度。例如，`2 4 7` 表示连接结点 $2$ 与 $4$ 的边的长度为 $7$。
## 输出格式

一个非负整数，为指定意义下的最小偏心距。
## 样例

### 样例输入 #1
```
5 2
1 2 5
2 3 2
2 4 4
2 5 3

```
### 样例输出 #1
```
5

```
### 样例输入 #2
```
8 6
1 3 2
2 3 2 
3 4 6
4 5 3
4 6 4
4 7 2
7 8 3

```
### 样例输出 #2
```
5
```
## 提示

- 对于 $40\%$ 的数据，保证 $n \le 15$。
- 对于 $70\%$ 的数据，保证 $n \le 80$。
- 对于 $100\%$ 的数据，保证 $2\le n \le 300$，$0\le s\le10^3$，$1 \leq u, v \leq n$，$0 \leq w \leq 10^3$。

NOIP2007 提高组第四题


---

---
title: "[NOISG 2022 Qualification] L-Board"
layout: "post"
diff: 普及+/提高
pid: P11293
tag: ['动态规划 DP', '2022', '前缀和', 'NOISG（新加坡）']
---
# [NOISG 2022 Qualification] L-Board
## 题目背景

Lord Pooty 有一个 $n \times m$ 的整数棋盘 $A$。他希望在棋盘上画一个 L 型区域，并且希望覆盖的数字总和最大。L 型区域可以旋转 $4$ 种方向，且每一边不一定完整（可以是一条直线）。
## 题目描述

给定一个 $n \times m$ 的棋盘 $A$，你需要选择棋盘上的三个点 $(x_1, y_1)$, $(x_2, y_1)$, $(x_1, y_2)$，使得以下公式的值 $V$ 最大化：

$$
V = \sum_{i=\min(x_1,x_2)}^{\max(x_1,x_2)} A_{i,y_1} + \sum_{j=\min(y_1,y_2)}^{\max(y_1,y_2)} A_{x_1,j} - A_{x_1,y_1}
$$
## 输入格式

- 第一行包含两个整数 $n$ 和 $m$，分别表示棋盘的行数和列数。
- 接下来的 $n$ 行，每行包含 $m$ 个整数，表示棋盘的元素。

## 输出格式

输出一个整数，即最大化的 $V$ 值。
## 样例

### 样例输入 #1
```
2 2
8 1
3 4
```
### 样例输出 #1
```
15
```
### 样例输入 #2
```
1 8
-2 -1 8 -2 9 0 -2 1
```
### 样例输出 #2
```
15
```
## 提示

【样例解释】

对于样例 $1$，选择点 $(1,1)$, $(2,1)$, $(1,2)$，覆盖的数字为 $8, 3, 4$，总和为 $15$。  

对于样例 $2$，选择点 $(1,3)$, $(1,5)$, $(1,3)$，形成一条直线，覆盖的数字为 $8, -2, 9$，总和为 $15$。

【数据范围】

- $1 \leq n, m \leq 1000$
- $-10^9 \leq A_{i,j} \leq 10^9$

| 子任务编号 | 分值 | 额外限制条件             |
| :--------: | :--: | :----------------------: |
| $1$        | $5$  | $1 \leq n, m \leq 2$    |
| $2$        | $10$ | $n = 1$                 |
| $3$        | $15$ | $1 \leq n, m \leq 100$  |
| $4$        | $15$ | $1 \leq n, m \leq 300$  |
| $5$        | $25$ | $0 \leq A_{i,j} \leq 10^9$ |
| $6$        | $30$ | 无额外限制               |


---

---
title: "[NOISG 2018 Prelim] Snail"
layout: "post"
diff: 普及+/提高
pid: P11296
tag: ['模拟', '数学', '2018', 'NOISG（新加坡）']
---
# [NOISG 2018 Prelim] Snail
## 题目背景

翻译自 [NOISG 2018 Prelim A. Snail](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。
## 题目描述

有一只蜗牛被困在了高度为 $H$ 的井中。

这只蜗牛正在不停的尝试爬出这口井。具体来说，这只蜗牛会在一天中经历 $N$ 个阶段，阶段 $i$ 会向井口爬 $P_i$ 米（**可能为负**）。当蜗牛的高度**大于等于**井口的高度时，这只蜗牛就离开了井。当蜗牛的高度小于 $0$ 时，高度视为 $0$。

现要求你求出蜗牛最早什么时候离开井或报告无解。

**注意，天数和阶段都以 $0$ 开头，也就是说第一阶段实际上是第 $0$ 阶段。此外，你可能需要使用 `long long` 来存放输入的数字。**
## 输入格式

第一行两个整数 $H,N$。
接下来的一行，$N$ 个整数，第 $i$ 个整数表示 $P_i$。
## 输出格式

一行两个整数 $D,P$，表示蜗牛会在第 $D$ 天的第 $P$ 阶段离开井。若永远无法离开，输出 `-1 -1`。
## 样例

### 样例输入 #1
```
3 1
1
```
### 样例输出 #1
```
2 0
```
### 样例输入 #2
```
5 1
-1
```
### 样例输出 #2
```
-1 -1
```
### 样例输入 #3
```
5 2
4 -2
```
### 样例输出 #3
```
1 0
```
## 提示

### 【样例 #1 解释】
第 $0$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $1$ 米。

第 $1$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $2$ 米。

第 $2$ 天的第 $0$ 阶段，爬行 $1$ 米，共爬行 $3$ 米，离开井。

### 【样例 #2 解释】
显然，乌龟永远无法离开。

### 【数据范围】
| Subtask | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $0$ | $0$ | 样例 |
| $1$ | $11$ | $N=1$ |
| $2$ | $9$ | 所有的 $P_i$ 相同 |
| $3$ | $25$ | $H\times N \leq 10^4$ |
| $4$ | $17$ | $P_i\geq0$ |
| $5$ | $38$ | 无 |

对于 $100\%$ 的数据：$1 \leq H \leq 10^{12},-10^{12}\leq P_i\leq 10^{12},1\leq N \leq 10^4$。


---

---
title: "[NOISG 2018 Prelim] Knapsack"
layout: "post"
diff: 普及+/提高
pid: P11297
tag: ['2018', 'NOISG（新加坡）']
---
# [NOISG 2018 Prelim] Knapsack
## 题目背景

翻译自 [NOISG 2018 Prelim B. Knapsack](https://github.com/noisg/sg_noi_archive/tree/master/2018_prelim)。
## 题目描述

你获得了超市的“免费购物”优惠，规则如下：
- 你有一个容量为 $S$ 的购物篮。超市里共有 $n$ 样东西。第 $i$ 样东西的重量 $w_i$，价值为 $v_i$，这样东西共有 $k_i$ 个。
- 你可以向你的购物篮塞入你想买的东西，前提是**这些东西的重量总和不超过购物篮的容量**。

现在，你只想知道，在满足规则的情况下，你最多能带多少价值的东西回去？

**请不要低估本题目的难度，如果你看到这就想写，请查看【数据范围】一栏**。
## 输入格式

第一行两个正整数 $S,n$。

接下来 $n$ 行，每行三个正整数 $v_i,w_i,k_i$。
## 输出格式

一行一个正整数，代表你最多能带多少价值的东西回去。
## 样例

### 样例输入 #1
```
15 5 
4 12 1 
2 1 1 
10 4 1 
1 1 1 
2 2 1
```
### 样例输出 #1
```
15
```
### 样例输入 #2
```
20 3 
5000 15 1 
100 1 3 
50 1 4
```
### 样例输出 #2
```
5400
```
## 提示

### 【样例 #1 解释】
拿第 $2,3,4,5$ 种东西，每种东西拿一个。

此时价值为 $15$，重量为 $8$。

### 【样例 #2 解释】
拿完第 $1,2$ 种东西后拿一个第 $3$ 种东西。

此时价值为 $5400$，重量为 $20$。

### 【数据范围】
| $\text{Subtask}$ | 分值 | $n\leq$ | $k\leq$ |
| :----------: | :----------: | :----------: | :----------: |
| $0$ | $0$ | 样例 | 样例 |
| $1$ | $12$ | $1$ | - |
| $2$ | $17$ | $100$ | $1$ |
| $3$ | $20$ | $100$ | $10$ |
| $4$ | $24$ | $100$ | $10^9$ |
| $5$ | $27$ | $10^5$ | $10^9$ |
| $6$（hack） | $0$ | $10^5$ | $10^9$ |

对于 $100\%$ 的数据：
- $1 \leq w_i \leq S \leq 2000$
- $1 \leq n \leq 10^5$
- $1 \leq v_i \leq 10^6$
- $1 \leq k_i \leq 10^9$


---

---
title: "[NOISG 2022 Finals] Gym Badges"
layout: "post"
diff: 普及+/提高
pid: P11328
tag: ['贪心', '2022', 'NOISG（新加坡）']
---
# [NOISG 2022 Finals] Gym Badges
## 题目描述

你是一只初始等级为 $0$ 的 $\text{Wabbit}$。你希望到 $n$ 个比赛中提升自己的实力，并收集这些比赛的徽章。

目前将要举行的比赛共有 $N$ 个。第 $i$ 个比赛可以用 $L_i$ 和 $X_i$ 来描述。如果你的当前等级 $\le L_i$，那么你可以参加第 $i$ 个比赛，让自己的等级提升 $X_i$ 并获得一个徽章。

你可以以任意顺序参加这些比赛。求出如果按照最佳顺序参加，你最多可以获得多少个徽章。
## 输入格式

第一行，一个正整数 $N$；

第二行 $N$ 个整数，表示 $X_i$。

第三行 $N$ 个整数，表示 $L_i$。
## 输出格式

一行一个整数，表示最多能收集到的徽章个数。
## 样例

### 样例输入 #1
```
5
4 6 3 5 2
10 6 4 8 12

```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5
3 9 4 2 6
10 10 10 10 10
```
### 样例输出 #2
```
4
```
## 提示

**【样例 #1 解释】**

一种最优的参加方式为 $3 \to 4 \to 1 \to 5$。

**【样例 #2 解释】**

一种最优的参加方式为 $1 \to 3 \to 4 \to 2$。

**【数据范围】**

|$\text{Subtask}$|分值|特殊性质|
|:-:|:-:|:-:|
|$0$|$0$|样例|
|$1$|$15$|$1\le N\le10$|
|$2$|$9$|所有 $L_i$ 均相等|
|$3$|$27$|$1\le N\le5000$|
|$4$|$49$|无|

对于 $100\%$ 的数据，$1 \le N \le 5 \times 10 ^ 5, 1 \le X_i, L_i \le 10 ^ 9$。


---

---
title: "[NOIP2024] 遗失的赋值"
layout: "post"
diff: 普及+/提高
pid: P11362
tag: ['2024', 'NOIP 提高组', 'O2优化']
---
# [NOIP2024] 遗失的赋值
## 题目描述

小 F 有 $n$ 个变量 $x_1, x_2, \ldots , x_n$。每个变量可以取 $1$ 至 $v$ 的整数取值。

小 F 在这 $n$ 个变量之间添加了 $n - 1$ 条二元限制，其中第 $i$（$1 \leq i \leq n - 1$）条限制为：若 $x_i = a_i$，则要求 $x_{i+1} = b_i$，**且 $a_i$ 与 $b_i$ 为 $1$ 到 $v$ 之间的整数**；当 $x_i \neq a_i$ 时，第 $i$ 条限制对 $x_{i+1}$ 的值不做任何约束。除此之外，小 F 还添加了 $m$ 条一元限制，其中第 $j$（$1 \leq j \leq m$）条限制为：$x_{c_j} = d_j$。

小 F 记住了所有 $c_j$ 和 $d_j$ 的值，但把所有 $a_i$ 和 $b_i$ 的值都忘了。同时小 F 知道：存在给每一个变量赋值的方案同时满足所有这些限制。

现在小 F 想知道，有多少种 $a_i, b_i$（$1 \leq i \leq n - 1$）取值的组合，使得能够确保至少存在一种给每个变量 $x_i$ 赋值的方案可以同时满足所有限制。由于方案数可能很大，小 F 只需要你输出方案数对 $10^9 + 7$ 取模的结果。
## 输入格式

**本题包含多组测试数据**。

输入的第一行包含一个整数 $T$，表示测试数据的组数。

接下来包含 $T$ 组数据，每组数据的格式如下：

第一行包含三个整数 $n, m, v$，分别表示变量个数、一元限制个数和变量的取值上限。

接下来 $m$ 行，第 $j$ 行包含两个整数 $c_j, d_j$，描述一个一元限制。
## 输出格式

对于每组测试数据输出一行，包含一个整数，表示方案数对 $10^9 + 7$ 取模的结果。
## 样例

### 样例输入 #1
```
3
2 1 2
1 1
2 2 2
1 1
2 2
2 2 2
1 1
1 2

```
### 样例输出 #1
```
4
3
0

```
## 提示

**【样例 1 解释】**

- 对于第一组测试数据，所有可能的 $(a_1, b_1)$ 取值的组合 $(1, 1), (1, 2), (2, 1), (2, 2)$ 都满足限制。例如，$(a_1, b_1) = (1, 1)$ 时，$(x_1, x_2) = (1, 1)$ 满足所有限制，而 $(a_1, b_1) = (2, 2)$ 时，$(x_1, x_2) = (1, 1)$ 与 $(x_1, x_2) = (1, 2)$ 均满足所有限制。
- 对于第二组测试数据，只有 $(x_1, x_2) = (1, 2)$ 一种可能的变量赋值，因此只有 $(a_1, b_1) = (1, 1)$ 不满足限制，其余三种赋值均满足限制。
- 对于第三组测试数据，不存在一种变量赋值同时满足 $x_1 = 1$ 和 $x_1 = 2$，因此也不存在满足限制的 $(a_1, b_1)$。

**【样例 2】**

见选手目录下的 `assign/assign2.in` 与 `assign/assign2.ans`。

该样例共有 $10$ 组测试数据，其中第 $i$（$1 \leq i \leq 10$）组测试数据满足数据范围中描述的测试点 $i$ 的限制。

**【样例 3】**

见选手目录下的 `assign/assign3.in` 与 `assign/assign3.ans`。

该样例共有 $10$ 组测试数据，其中第 $i$（$1 \leq i \leq 10$）组测试数据满足数据范围中描述的测试点 $i + 10$ 的限制。

**【数据范围】**

对于所有的测试数据，保证：

- $1 \leq T \leq 10$，
- $1 \leq n \leq 10^9$，$1 \leq m \leq 10^5$，$2 \leq v \leq 10^9$，
- 对于任意的 $j$（$1 \leq j \leq m$），都有 $1 \leq c_j \leq n$，$1 \leq d_j \leq v$。

| 测试点 | $n \leq$ | $m \leq$ | $v \leq$ | 特殊性质 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $1, 2$ | $6$ | $6$ | $2$ | 无 |
| $3$ | $9$ | $9$ | $2$ | 无 |
| $4, 5$ | $12$ | $12$ | $2$ | 无 |
| $6$ | $10^3$ | $1$ | $10^3$ | 无 |
| $7$ | $10^5$ | $1$ | $10^5$ | 无 |
| $8,9$ | $10^9$ | $1$ | $10^9$ | 无 |
| $10$ | $10^3$ | $10^3$ | $10^3$ | A |
| $11$ | $10^4$ | $10^4$ | $10^4$ | A |
| $12$ | $10^5$ | $10^5$ | $10^5$ | A |
| $13$ | $10^4$ | $10^3$ | $10^4$ | B |
| $14$ | $10^6$ | $10^4$ | $10^6$ | B |
| $15, 16$ | $10^9$ | $10^5$ | $10^9$ | B |
| $17$ | $10^4$ | $10^3$ | $10^4$ | 无 |
| $18$ | $10^6$ | $10^4$ | $10^6$ | 无 |
| $19, 20$ | $10^9$ | $10^5$ | $10^9$ | 无 |

特殊性质 A：保证 $m = n$，且对于任意的 $j$（$1 \leq j \leq m$），都有 $c_j = j$。

特殊性质 B：保证 $d_j = 1$。


---

---
title: "[NOISG 2023 Finals] Topical"
layout: "post"
diff: 普及+/提高
pid: P11533
tag: ['2023', 'NOISG（新加坡）']
---
# [NOISG 2023 Finals] Topical
## 题目描述

兔子 Benson 正在上飞行员学校！

他需要完成 $n$ 场测试，由 $1\sim n$ 编号。对于每场测试，有 $k$ 个科目。对于每个科目，Benson 有一个能力值 $p_j$。由于 Benson 还是一名新手，他对于每个科目的初始能力值均为 $0$。

对于每场测试的每个科目，均有一个能力值下限 $r_{i, j}$。而为了完成第 $i$ 场测试，需要满足他每个科目的能力值都不低于这个下限。

若成功完成第 $i$ 场测试，他的能力值将获得提升，且第 $j$ 个科目的能力值将提升 $u_{i, j}$。

**形式化地**：初始，对于所有 $j$，有 $p_j=0$。Benson 能完成一场测试，当且仅当对于所有 $j$，都有 $r_{i, j}\leq p_j$；完成该场测试后，对于所有 $j$，$p_j$ 的值将增加 $u_{i, j}$。

他可以任意选择完成测试的顺序，但每场测试只能完成一次。请帮助他计算他最多能完成多少场测试。
## 输入格式

第一行两个正整数 $n, k$，用空格隔开。

接下来 $n$ 行，第 $i$ 行包含 $k$ 个整数 $r_{i, 1}, r_{i, 2}, \cdots, r_{i, k}$，表示完成第 $i$ 场测试的能力值下限。

接下来 $n$ 行，第 $i$ 行包含 $k$ 个整数 $u_{i, 1}, u_{i, 2}, \cdots, u_{i, k}$，表示完成第 $i$ 场测试后能力值的增加量。
## 输出格式

输出一行一个整数，表示 Benson 最多能完成的测试数量。
## 样例

### 样例输入 #1
```
3 3
0 0 0
7 9 2
7 8 9
7 8 2
7 7 7
8 10 9

```
### 样例输出 #1
```
1

```
### 样例输入 #2
```
4 3
5 1 0
0 1 5
0 0 0
7 7 7
0 5 6
1 1 1
8 2 0
8 1 4

```
### 样例输出 #2
```
4

```
### 样例输入 #3
```
5 5
14 11 15 7 15
0 0 0 0 0
9 9 14 2 13
4 3 6 1 0
2 4 7 0 0
5 5 0 0 13
4 4 7 1 0
4 1 0 2 1
2 5 0 2 1
4 0 7 2 12

```
### 样例输出 #3
```
4

```
## 提示

#### 样例 #1 解释

Benson 只能完成第一场测试，其要求为 $[0, 0, 0]$。完成后，他的能力值将变为 $[7, 8, 2]$。此时他不能完成任何一场其余的测试，故答案为 $1$。

#### 数据范围

| Subtask | 分值 | 特殊限制 |
| :-----------: | :-----------: | :-----------: |
| $0$ | $0$ | 样例 |
| $1$ | $12$ | $n=1$ |
| $2$ | $28$ | $n,k\leq 100$ |
| $3$ | $21$ | $k=1$ |
| $4$ | $39$ | 无 |

对于 $100\%$ 的数据：

- $1\leq n, k\leq 10^6$
- $n\cdot k\leq 10^6$
- $0\leq u_{i, j}, r_{i, j}\leq 10^9$，其中 $1\leq i\leq n$ 且 $1\leq j\leq k$。

注：由于洛谷限制，数据不完全按照原题分配子任务。


---

---
title: "[NOI2002] 银河英雄传说"
layout: "post"
diff: 普及+/提高
pid: P1196
tag: ['2002', '并查集', 'NOI']
---
# [NOI2002] 银河英雄传说
## 题目背景

公元 $5801$ 年，地球居民迁至金牛座 $\alpha$ 第二行星，在那里发表银河联邦创立宣言，同年改元为宇宙历元年，并开始向银河系深处拓展。

宇宙历 $799$ 年，银河系的两大军事集团在巴米利恩星域爆发战争。泰山压顶集团派宇宙舰队司令莱因哈特率领十万余艘战舰出征，气吞山河集团点名将杨威利组织麾下三万艘战舰迎敌。
## 题目描述

杨威利擅长排兵布阵，巧妙运用各种战术屡次以少胜多，难免恣生骄气。在这次决战中，他将巴米利恩星域战场划分成 $30000$ 列，每列依次编号为 $1, 2,\ldots ,30000$。之后，他把自己的战舰也依次编号为 $1, 2, \ldots , 30000$，让第 $i$ 号战舰处于第 $i$ 列，形成“一字长蛇阵”，诱敌深入。这是初始阵形。当进犯之敌到达时，杨威利会多次发布合并指令，将大部分战舰集中在某几列上，实施密集攻击。合并指令为 `M i j`，含义为第 $i$ 号战舰所在的整个战舰队列，作为一个整体（头在前尾在后）接至第 $j$ 号战舰所在的战舰队列的尾部。显然战舰队列是由处于同一列的一个或多个战舰组成的。合并指令的执行结果会使队列增大。  

然而，老谋深算的莱因哈特早已在战略上取得了主动。在交战中，他可以通过庞大的情报网络随时监听杨威利的舰队调动指令。

在杨威利发布指令调动舰队的同时，莱因哈特为了及时了解当前杨威利的战舰分布情况，也会发出一些询问指令：`C i j`。该指令意思是，询问电脑，杨威利的第 $i$ 号战舰与第 $j$ 号战舰当前是否在同一列中，如果在同一列中，那么它们之间布置有多少战舰。

作为一个资深的高级程序设计员，你被要求编写程序分析杨威利的指令，以及回答莱因哈特的询问。
## 输入格式

第一行有一个整数 $T$（$1 \le T \le 5 \times 10^5$），表示总共有 $T$ 条指令。

以下有 $T$ 行，每行有一条指令。指令有两种格式：

1. `M i j`：$i$ 和 $j$ 是两个整数（$1 \le i,j \le 30000$），表示指令涉及的战舰编号。该指令是莱因哈特窃听到的杨威利发布的舰队调动指令，并且保证第 $i$ 号战舰与第 $j$ 号战舰不在同一列。

2. `C i j`：$i$ 和 $j$ 是两个整数（$1 \le i,j \le 30000$），表示指令涉及的战舰编号。该指令是莱因哈特发布的询问指令。
## 输出格式

依次对输入的每一条指令进行分析和处理：

- 如果是杨威利发布的舰队调动指令，则表示舰队排列发生了变化，你的程序要注意到这一点，但是不要输出任何信息。
- 如果是莱因哈特发布的询问指令，你的程序要输出一行，仅包含一个整数，表示在同一列上，第 $i$ 号战舰与第 $j$ 号战舰之间布置的战舰数目。如果第 $i$ 号战舰与第 $j$ 号战舰当前不在同一列上，则输出 $-1$。
## 样例

### 样例输入 #1
```
4
M 2 3
C 1 2
M 2 4
C 4 2
```
### 样例输出 #1
```
-1
1
```
## 提示

### 样例解释

战舰位置图：表格中阿拉伯数字表示战舰编号。

![](https://cdn.luogu.com.cn/upload/image_hosting/tkmxbxks.png)

题目中没有强制 $i \neq j$，但是实测数据中不存在 $i = j$ 的情况。


---

---
title: "[NOISG 2025 Finals] Thumper"
layout: "post"
diff: 普及+/提高
pid: P12016
tag: ['树状数组', '2025', 'NOISG（新加坡）']
---
# [NOISG 2025 Finals] Thumper
## 题目描述

Bunnyland has large fields where the Bunnyland Dwarf (a native species of rabbit) roams freely. One such field can be modelled as a $10^9 \times 10^9$ grid of cells. The rows of the grid are numbered $1$ to $10^9$ from north to south, and the columns of the grid are numbered $1$ to $10^9$ from west to east. We refer to the cell located at row $r$ and column $c$ of the grid as cell $(r, c)$.

In this field, there are $n$ rabbits numbered from $1$ to $n$. The $i$-th rabbit is initially located at cell $(r[i], c[i])$. **No two rabbits are initially located at the same cell**.

Rabbits lift their hind legs and kick the ground when annoyed, an action known as thumping. These $n$ rabbits will execute a sequence of $m$ thumps. At the start of the $j$-th second, rabbit $t[j]$ will thump. When a rabbit thumps, all other rabbits will move away from the thumping rabbit.

![](https://cdn.luogu.com.cn/upload/image_hosting/1auwto2s.png)

To be precise, when rabbit A thumps, rabbit B will move as follows:

- If the number of rows between A and B is less than the number of columns between A and B, B will move two columns away from A.
- If the number of rows between A and B is equal to the number of columns between A and B, B will move one column and one row away from A.
- If the number of rows between A and B is more than the number of columns between A and B, B will move two rows away from A.

It can be shown that the location of the rabbits will remain distinct after a thump has occurred.

Benson the Rabbit has come to find his brethren after his retirement from investigating toxic bacteria, but all the thumping has caused the rabbits to scatter. Help Benson determine the final locations of the $n$ rabbits after all thumps have occurred!

It is guaranteed that a rabbit will never leave the grid during the sequence of thumps. You may also assume that rabbits do not move in any other circumstances except thumping.

## 输入格式

Your program must read from standard input.

The first line of input contains two space-separated integers $n$ and $m$.

The following $n$ lines of input each contain two space-separated integers. The $i$-th of these lines contains $r[i]$ and $c[i]$.

The last line of input contains $m$ space-separated integers $t[1], t[2], \ldots, t[m]$.

## 输出格式

Your program must print to standard output.

The output should contain $n$ lines. The $i$-th of these lines should contain two space-separated integers, indicating the row and the column of rabbit $i$ after all thumps have occurred.

## 样例

### 样例输入 #1
```
2 1
1 1
2 2
1
```
### 样例输出 #1
```
1 1
3 3
```
### 样例输入 #2
```
13 1
7 7
3 7
4 4
4 10
5 6
6 4
6 8
8 7
8 10
9 3
9 5
9 9
10 6
1
```
### 样例输出 #2
```
7 7
1 7
3 3
3 11
3 6
6 2
5 9
10 7
8 12
9 1
10 4
10 10
12 6
```
### 样例输入 #3
```
3 2
1 10
1 20
1 30
1 3
```
### 样例输出 #3
```
1 8
1 20
1 32
```
## 提示

### Subtasks

For all test cases, the input will satisfy the following bounds:

- $1 \leq n, m \leq 500\,000$
- $1 \leq r[i], c[i] \leq 10^9$ for all $1 \leq i \leq n$
- $1 \leq t[j] \leq n$ for all $1 \leq j \leq m$
- $(r_i, c_i) \neq (r_j, c_j)$ for all $i \neq j$
- It is guaranteed that a rabbit will never exit the grid during the sequence of thumps.

Your program will be tested on input instances that satisfy the following restrictions:

| Subtask | Marks | Additional constraints |
| :-: | :-: | :-: |
| $0$ | $0$ | Sample test cases |
| $1$ | $18$ | $n, m \leq 2000$ |
| $2$ | $21$ | $r[i] = 1$ |
| $3$ | $32$ | $n \leq 2000$ |
| $4$ | $13$ | $n \leq 100\,000$ |
| $5$ | $16$ | No additional constraints |

### Sample Test Case 1 Explanation

This test case is valid for subtasks $1, 3, 4$, and $5$.

Rabbit $1$ is at cell $(1, 1)$ and rabbit $2$ is at cell $(2, 2)$.

Since the number of rows between rabbit $1$ and rabbit $2$ is equal to the number of columns between rabbit $1$ and rabbit $2$, when rabbit $1$ thumps, rabbit $2$ will move one column and one row away from rabbit $1$ in the southeast direction, landing at cell $(3, 3)$. The position of the thumping rabbit $1$ does not change.

### Sample Test Case 2 Explanation

This test case is valid for subtasks $1, 3, 4$, and $5$.

The diagram in the statement corresponds to this test case. The blue arrows show how the other rabbits move when rabbit $1$ at cell $(7, 7)$ thumps.

### Sample Test Case 3 Explanation

This test case is valid for all subtasks.



---

---
title: "[NOIP 2011 普及组] 表达式的值"
layout: "post"
diff: 普及+/提高
pid: P1310
tag: ['字符串', '动态规划 DP', '2011', 'NOIP 普及组']
---
# [NOIP 2011 普及组] 表达式的值
## 题目描述

对于1 位二进制变量定义两种运算：

$$
\def\arraystretch{1.5}
\begin{array}{|c|c|} \hline
\kern{5em}\mathclap\textsf{运算符}\kern{5em} & \kern{5em}\mathclap\textsf{运算规则}\kern{5em} \\ \hline
\oplus &
\begin{aligned}
0 \oplus 0 &= 0 \\
0 \oplus 1 &= 1 \\
1 \oplus 0 &= 1 \\
1 \oplus 1 &= 1 \\
\end{aligned} \\ \hline
\times &
\begin{aligned}
0 \times 0 &= 0 \\
0 \times 1 &= 0 \\
1 \times 0 &= 0 \\
1 \times 1 &= 1 \\
\end{aligned} \\ \hline
\end{array}
$$

运算的优先级是：

1. 先计算括号内的，再计算括号外的。

2. “× ”运算优先于“⊕”运算，即计算表达式时，先计算× 运算，再计算⊕运算。例如：计算表达式A⊕B × C时，先计算 B × C，其结果再与 A 做⊕运算。

现给定一个未完成的表达式，例如\_+(\_\*\_)，请你在横线处填入数字$0 $或者$1$ ，请问有多少种填法可以使得表达式的值为$0 $。

## 输入格式

共 2 行。

第1 行为一个整数 $L$，表示给定的表达式中除去横线外的运算符和括号的个数。

第2 行为一个字符串包含 $L$ 个字符，其中只包含’（’、’）’、’+’、’\*’这$4$ 种字符，其中’（’、’）’是左右括号，’+’、’\*’分别表示前面定义的运算符“⊕”和“×”。这行字符按顺序给出了给定表达式中除去变量外的运算符和括号。

## 输出格式

共1 行。包含一个整数，即所有的方案数。注意：这个数可能会很大，请输出方案数对$10007 $取模后的结果。

## 样例

### 样例输入 #1
```
4
+(*)

```
### 样例输出 #1
```
3

```
## 提示

【输入输出样例说明】

  给定的表达式包括横线字符之后为：\_+(\_\*\_) 

  在横线位置填入(0 、0 、0) 、(0 、1 、0) 、(0 、0 、1) 时，表达式的值均为0 ，所以共有3种填法。 

【数据范围】

对于 $20\%$ 的数据有 $ 0 \le L \le 10$。

对于 $50\%$ 的数据有 $0 \le L \le 1,000$。

对于 $70\%$ 的数据有 $ 0 \le L \le 10,000$ 。

对于 $100\%$的数据有 $ 0 \le L \le 100,000$。

对于$50\%$ 的数据输入表达式中不含括号。



---

---
title: "[NOIP 2011 提高组] 聪明的质监员"
layout: "post"
diff: 普及+/提高
pid: P1314
tag: ['数学', '2011', '二分', 'NOIP 提高组', '前缀和']
---
# [NOIP 2011 提高组] 聪明的质监员
## 题目描述

`小T` 是一名质量监督员，最近负责检验一批矿产的质量。这批矿产共有 $n$ 个矿石，从 $1$ 到 $n$ 逐一编号，每个矿石都有自己的重量 $w_i$ 以及价值 $v_i$ 。检验矿产的流程是：

1. 给定$ m$ 个区间 $[l_i,r_i]$；
2. 选出一个参数 $W$；
3. 对于一个区间 $[l_i,r_i]$，计算矿石在这个区间上的检验值 $y_i$：

$$y_i=\sum\limits_{j=l_i}^{r_i}[w_j \ge W] \times \sum\limits_{j=l_i}^{r_i}[w_j \ge W]v_j$$  

其中 $j$ 为矿石编号。

这批矿产的检验结果 $y$ 为各个区间的检验值之和。即：$\sum\limits_{i=1}^m y_i$  

若这批矿产的检验结果与所给标准值 $s$ 相差太多，就需要再去检验另一批矿产。`小T` 不想费时间去检验另一批矿产，所以他想通过调整参数 $W$ 的值，让检验结果尽可能的靠近标准值 $s$，即使得 $|s-y|$ 最小。请你帮忙求出这个最小值。

## 输入格式

第一行包含三个整数 $n,m,s$，分别表示矿石的个数、区间的个数和标准值。

接下来的 $n$ 行，每行两个整数，中间用空格隔开，第 $i+1$ 行表示 $i$ 号矿石的重量 $w_i$ 和价值 $v_i$。

接下来的 $m$ 行，表示区间，每行两个整数，中间用空格隔开，第 $i+n+1$ 行表示区间 $[l_i,r_i]$ 的两个端点 $l_i$ 和 $r_i$。注意：不同区间可能重合或相互重叠。

## 输出格式

一个整数，表示所求的最小值。

## 样例

### 样例输入 #1
```
5 3 15 
1 5 
2 5 
3 5 
4 5 
5 5 
1 5 
2 4 
3 3 
```
### 样例输出 #1
```
10

```
## 提示

【输入输出样例说明】

当 $W$ 选 $4$ 的时候，三个区间上检验值分别为 $20,5 ,0$ ，这批矿产的检验结果为 $25$，此时与标准值 $S$ 相差最小为 $10$。

【数据范围】

对于 $10\% $ 的数据，有 $1 ≤n ,m≤10$；

对于 $30\% $的数据，有 $1 ≤n ,m≤500$ ；

对于 $50\% $ 的数据，有 $ 1 ≤n ,m≤5,000$；
 
对于 $70\%$ 的数据，有 $1 ≤n ,m≤10,000$ ；

对于 $100\%$ 的数据，有 $ 1 ≤n ,m≤200,000$，$0 < w_i,v_i≤10^6$，$0 < s≤10^{12}$，$1 ≤l_i ≤r_i ≤n$ 。



---

---
title: "[NOI2025] 机器人"
layout: "post"
diff: 普及+/提高
pid: P13271
tag: ['图论', '2025', 'NOI', '图论建模', '最短路']
---
# [NOI2025] 机器人
## 题目描述

NOI2025 正在绍兴举办，小 Y 为闭幕式表演制作了一个机器人并打算操控它从仓库走到礼堂。

绍兴的道路系统可以简化为 $n$ 个路口以及连接这些路口的 $m$ 条 **单行道路**，且每条道路有一定的长度。为了方便将道路系统录入机器人的芯片，小 Y 对每一个路口连接的所有道路进行了编号。具体而言，若有 $d$ 条道路以路口 $x$ 为起点，则这 $d$ 条道路会被小 Y 按照某种顺序编号为 $1 \sim d$，分别称作以 $x$ 为起点的第 $1 \sim d$ 条道路。

小 Y 的机器人内部有一个参数 $p$。给定参数 $p$ 的上限 $k$ 与修改费用 $v_1, v_2, \ldots, v_{k-1}, w_2, w_3, \ldots, w_k$。小 Y 将按照如下规则设置与修改机器人的参数：

- 初始时，小 Y 将参数 $p$ 设置为 $1$。
- 在 **任意时刻**，小 Y 可以远程控制机器人修改参数：
  - 若 $p < k$，则小 Y 可以花费 $v_p$ 的费用将 $p$ 增加 $1$，即 $p \leftarrow p + 1$；
  - 若 $p > 1$，则小 Y 可以花费 $w_p$ 的费用将 $p$ 减少 $1$，即 $p \leftarrow p - 1$。

初始时，小 Y 的机器人位于机器人仓库，即路口 $1$。当机器人位于路口 $x$ 时，记以路口 $x$ 为起点的第 $p$ 条道路的终点为 $y$，道路长度为 $z$，则小 Y 可以花费 $z$ 的费用操控机器人从 $x$ 走到 $y$。特别地，若以路口 $x$ 为起点的道路不足 $p$ 条，则小 Y 无法操控机器人走动。

小 Y 并不知道闭幕式表演所在的礼堂位于哪个路口，因此他需要对每个路口都做好准备。请你帮助他求出将机器人从仓库移动到每个路口所需费用的最小值。
## 输入格式

输入的第一行包含一个非负整数 $c$，表示测试点编号。$c = 0$ 表示该测试点为样例。

输入的第二行包含三个正整数 $n, m, k$，分别表示路口数量、道路数量与参数 $p$ 的上限。

输入的第三行包含 $k - 1$ 个非负整数 $v_1, \ldots, v_{k-1}$，表示增加参数 $p$ 的费用。

输入的第四行包含 $k - 1$ 个非负整数 $w_2, \ldots, w_k$，表示减少参数 $p$ 的费用。

输入的第 $i + 4$（$1 \leq i \leq n$）行包含若干个正整数，其中第一个非负整数 $d_i$ 表示以路口 $i$ 为起点的道路数量，接下来 $2d_i$ 个正整数 $y_{i,1}, z_{i,1}, y_{i,2}, z_{i,2}, \ldots, y_{i,d_i}, z_{i,d_i}$，表示以路口 $i$ 为起点的道路，其中 $y_{i,j}, z_{i,j}$（$1 \leq j \leq d_i$）分别表示编号为 $j$ 的道路的终点与长度。
## 输出格式

输出一行 $n$ 个整数，其中第 $i$（$1 \leq i \leq n$）个数表示小 Y 将机器人从仓库移动到路口 $i$ 所需费用的最小值。特别地，若小 Y 无法将机器人从仓库移动到该路口，则输出 $-1$。
## 样例

### 样例输入 #1
```
0
5 6 3
2 4
1 1
3 2 5 3 1 4 2
1 3 2
2 1 2 4 1
0
0
```
### 样例输出 #1
```
0 5 3 4 -1
```
## 提示

### 样例 1 解释

小 Y 可以按照以下方案将机器人分别从仓库移动到路口 $1 \sim 4$：

- 对于路口 $1$：小 Y 的机器人初始时即位于路口 $1$，因此所需费用为 $0$。
- 对于路口 $2$：小 Y 操控机器人沿以路口 $1$ 为起点的第 $1$ 条道路走到路口 $2$，所需费用为 $5$。
- 对于路口 $3$：小 Y 将参数 $p$ 增加 $1$，然后操控机器人沿以路口 $1$ 为起点的第 $2$ 条道路走到路口 $3$，所需费用为 $2 + 1 = 3$。
- 对于路口 $4$：小 Y 将参数 $p$ 增加 $1$，然后操控机器人沿以路口 $1$ 为起点的第 $2$ 条道路走到路口 $3$，再操控机器人沿以路口 $3$ 为起点的第 $2$ 条道路走到路口 $4$，所需费用为 $2 + 1 + 1 = 4$。

可以证明，上述移动方案的所需费用均为最小值。

- 对于路口 $5$：由于小 Y 无法将机器人移动到路口 $5$，因此输出 $-1$。

### 样例 2

见选手目录下的 `robot/robot2.in` 与 `robot/robot2.ans`。

该样例满足测试点 $3 \sim 5$ 的约束条件。

### 样例 3

见选手目录下的 `robot/robot3.in` 与 `robot/robot3.ans`。

该样例满足测试点 $6 \sim 8$ 的约束条件。

### 样例 4

见选手目录下的 `robot/robot4.in` 与 `robot/robot4.ans`。

该样例满足测试点 $9, 10$ 的约束条件。

### 样例 5

见选手目录下的 `robot/robot5.in` 与 `robot/robot5.ans`。

该样例满足测试点 $16 \sim 18$ 的约束条件。

### 数据范围

对于所有测试数据，保证：

- $1 \leq n, m \leq 3 \times 10^5$，$1 \leq k \leq 2.5 \times 10^5$；
- 对于所有 $1 \leq i \leq k - 1$，均有 $0 \leq v_i \leq 10^9$；
- 对于所有 $2 \leq i \leq k$，均有 $0 \leq w_i \leq 10^9$；
- 对于所有 $1 \leq i \leq n$，均有 $0 \leq d_i \leq k$，且 $\sum_{i=1}^{n} d_i = m$；
- 对于所有 $1 \leq i \leq n$，$1 \leq j \leq d_i$，均有 $1 \leq y_{i,j} \leq n$，$1 \leq z_{i,j} \leq 10^9$。

| 测试点编号 | $n, m \leq$ | $k \leq$ | 特殊性质 |
| :-: | :-: | :-: | :-: |
| $1, 2$ | $6$ | $6$ | C |
| $3 \sim 5$ | $10^3$ | $10^3$ | C |
| $6 \sim 8$ | $5 \times 10^4$ | $10^2$ | 无 |
| $9, 10$ | $10^5$ | $10^5$ | AB |
| $11, 12$ | $10^5$ | $10^5$ | A |
| $13 \sim 15$ | $10^5$ | $10^5$ | C |
| $16 \sim 18$ | $10^5$ | $10^5$ | 无 |
| $19, 20$ | $3 \times 10^5$ | $2.5 \times 10^5$ | 无 |

- 特殊性质 A：保证 $v_1 = v_2 = \cdots = v_{k-1} = 0$ 且 $w_2 = w_3 = \cdots = w_k = 0$。
- 特殊性质 B：保证对于所有 $1 \leq i \leq n$，$1 \leq j \leq d_i$，均有 $z_{i,j} = 1$。
- 特殊性质 C：保证至多存在 10 个 $i$ 满足 $d_i \geq 10$。

附加文件来自于 [QOJ](https://qoj.ac/contest/2315/problem/13079)。


---

---
title: "[NOIP 2010 提高组] 关押罪犯"
layout: "post"
diff: 普及+/提高
pid: P1525
tag: ['图论', '贪心', '2010', '并查集', 'NOIP 提高组', '排序', '二分图']
---
# [NOIP 2010 提高组] 关押罪犯
## 题目背景

NOIP2010 提高组 T3
## 题目描述

S 城现有两座监狱，一共关押着 $N$ 名罪犯，编号分别为 $1\sim N$。他们之间的关系自然也极不和谐。很多罪犯之间甚至积怨已久，如果客观条件具备则随时可能爆发冲突。我们用“怨气值”（一个正整数值）来表示某两名罪犯之间的仇恨程度，怨气值越大，则这两名罪犯之间的积怨越多。如果两名怨气值为 $c$ 的罪犯被关押在同一监狱，他们俩之间会发生摩擦，并造成影响力为 $c$ 的冲突事件。

每年年末，警察局会将本年内监狱中的所有冲突事件按影响力从大到小排成一个列表，然后上报到 S 城 Z 市长那里。公务繁忙的 Z 市长只会去看列表中的第一个事件的影响力，如果影响很坏，他就会考虑撤换警察局长。

在详细考察了 $N$ 名罪犯间的矛盾关系后，警察局长觉得压力巨大。他准备将罪犯们在两座监狱内重新分配，以求产生的冲突事件影响力都较小，从而保住自己的乌纱帽。假设只要处于同一监狱内的某两个罪犯间有仇恨，那么他们一定会在每年的某个时候发生摩擦。

那么，应如何分配罪犯，才能使 Z 市长看到的那个冲突事件的影响力最小？这个最小值是多少？

## 输入格式

每行中两个数之间用一个空格隔开。第一行为两个正整数 $N,M$，分别表示罪犯的数目以及存在仇恨的罪犯对数。接下来的 $M$ 行每行为三个正整数 $a_j,b_j,c_j$，表示 $a_j$ 号和 $b_j$ 号罪犯之间存在仇恨，其怨气值为 $c_j$。数据保证 $1<a_j< b_j\leq N, 0 < c_j\leq 10^9$，且每对罪犯组合只出现一次。

## 输出格式

共一行，为 Z 市长看到的那个冲突事件的影响力。如果本年内监狱中未发生任何冲突事件，请输出 `0`。

## 样例

### 样例输入 #1
```
4 6
1 4 2534
2 3 3512
1 2 28351
1 3 6618
2 4 1805
3 4 12884
```
### 样例输出 #1
```
3512
```
## 提示

**输入输出样例说明**

罪犯之间的怨气值如下面左图所示，右图所示为罪犯的分配方法，市长看到的冲突事件影响力是 $3512$（由 $2$ 号和 $3$ 号罪犯引发）。其他任何分法都不会比这个分法更优。

![](https://cdn.luogu.com.cn/upload/image_hosting/uia11zcq.png)

**数据范围**  

对于 $30\%$ 的数据有 $N\leq 15$。

对于 $70\%$ 的数据有 $N\leq 2000,M\leq 50000$。  

对于 $100\%$ 的数据有 $N\leq 20000,M\leq 100000$。



---

---
title: "[NOIP 2010 提高组] 乌龟棋"
layout: "post"
diff: 普及+/提高
pid: P1541
tag: ['动态规划 DP', '2010', '递归', 'NOIP 提高组', '枚举']
---
# [NOIP 2010 提高组] 乌龟棋
## 题目背景

NOIP2010 提高组 T2
## 题目描述

小明过生日的时候，爸爸送给他一副乌龟棋当作礼物。

乌龟棋的棋盘是一行 $N$ 个格子，每个格子上一个分数（非负整数）。棋盘第 $1$ 格是唯一的起点，第 $N$ 格是终点，游戏要求玩家控制一个乌龟棋子从起点出发走到终点。

乌龟棋中 $M$ 张爬行卡片，分成 $4$ 种不同的类型（$M$ 张卡片中不一定包含所有 $4$ 种类型的卡片，见样例），每种类型的卡片上分别标有 $1,2,3,4$ 四个数字之一，表示使用这种卡片后，乌龟棋子将向前爬行相应的格子数。游戏中，玩家每次需要从所有的爬行卡片中选择一张之前没有使用过的爬行卡片，控制乌龟棋子前进相应的格子数，每张卡片只能使用一次。


游戏中，乌龟棋子自动获得起点格子的分数，并且在后续的爬行中每到达一个格子，就得到该格子相应的分数。玩家最终游戏得分就是乌龟棋子从起点到终点过程中到过的所有格子的分数总和。


很明显，用不同的爬行卡片使用顺序会使得最终游戏的得分不同，小明想要找到一种卡片使用顺序使得最终游戏得分最多。


现在，告诉你棋盘上每个格子的分数和所有的爬行卡片，你能告诉小明，他最多能得到多少分吗？

## 输入格式

每行中两个数之间用一个空格隔开。

第 $1$ 行 $2$ 个正整数 $N,M$，分别表示棋盘格子数和爬行卡片数。


第 $2$ 行 $N$ 个非负整数，$a_1,a_2,…,a_N$，其中 $a_i$ 表示棋盘第 $i$ 个格子上的分数。


第 $3$ 行 $M$ 个整数，$b_1,b_2,…,b_M$，表示 $M$ 张爬行卡片上的数字。


输入数据保证到达终点时刚好用光 $M$ 张爬行卡片。


## 输出格式

一个整数，表示小明最多能得到的分数。

## 样例

### 样例输入 #1
```
9 5
6 10 14 2 8 8 18 5 17
1 3 1 2 1

```
### 样例输出 #1
```
73

```
## 提示

每个测试点 1s。

小明使用爬行卡片顺序为 $1,1,3,1,2$，得到的分数为 $6+10+14+8+18+17=73$。注意，由于起点是 $1$，所以自动获得第 $1$ 格的分数 $6$。


对于 $30\%$ 的数据有 $1≤N≤30,1≤M≤12$。


对于 $50\%$ 的数据有 $1≤N≤120,1≤M≤50$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $20$。


对于 $100\%$ 的数据有 $1≤N≤350,1≤M≤120$，且 $4$ 种爬行卡片，每种卡片的张数不会超过 $40$；$0≤a_i≤100,1≤i≤N,1≤b_i≤4,1≤i≤M$。



---

---
title: "[NOIP 1997 提高组] 棋盘问题"
layout: "post"
diff: 普及+/提高
pid: P1549
tag: ['1997', 'NOIP 提高组', 'Special Judge']
---
# [NOIP 1997 提高组] 棋盘问题
## 题目背景

NOIP1997 提高组第一题

[P5512](https://www.luogu.com.cn/problem/P5512) 为本题数据加强版。

本题实际的数据的范围是 $1\le N\le 5$。不保证存在可以通过原数据范围的非打表做法。
## 题目描述

在 $N \times N$（$1 \le N \le 10$）的棋盘上，填入 $1, 2, \dots, N ^ 2$ 共 $N ^ 2$ 个数，使得任意两个相邻的数之和为素数。

例如：当 $N = 2$ 时，有：

| $1$ | $2$ |
| :-----------: | :-----------: |
| $4$ | $3$ |

其相邻数的和为素数的有：

$1+2,1+4,4+3,2+3$

当 $N=4$ 时，一种可以填写的方案如下：

| $1$ | $2$ | $11$ | $12$ |
| :-----------: | :-----------: | :-----------: | :-----------: |
| $16$ | $15$ | $8$ | $5$ |
| $13$ | $4$ | $9$ | $14$ |
| $6$ | $7$ | $10$ | $3$ |

在这里我们约定：左上角的格子里必须填数字 $1$。
## 输入格式

一个数 $N$。
## 输出格式

如有多种解，则输出第一行、第一列之和为最小的排列方案；若无解，则输出 `NO`。
## 样例

### 样例输入 #1
```
1
```
### 样例输出 #1
```
NO

```
### 样例输入 #2
```
2
```
### 样例输出 #2
```
1 2
4 3
```


---

---
title: "[NOI1999] 生日蛋糕"
layout: "post"
diff: 普及+/提高
pid: P1731
tag: ['搜索', '1999', 'NOI']
---
# [NOI1999] 生日蛋糕
## 题目背景

[数据加强版 link](https://www.luogu.com.cn/problem/T148457)
## 题目描述

7 月 17 日是 Mr.W 的生日，ACM-THU 为此要制作一个体积为 $N\pi$ 的 $M$ 层生日蛋糕，每层都是一个圆柱体。

设从下往上数第 $i$（$1 \leq i \leq M$）层蛋糕是半径为 $R_i$，高度为 $H_i$ 的圆柱。当 $i \lt M$ 时，要求 $R_i \gt R_{i+1}$ 且 $H_i \gt H_{i+1}$。

由于要在蛋糕上抹奶油，为尽可能节约经费，我们希望蛋糕外表面（最下一层的下底面除外）的面积 $Q$ 最小。

请编程对给出的 $N$ 和 $M$，找出蛋糕的制作方案（适当的 $R_i$ 和 $H_i$ 的值），使 $S=\dfrac{Q}{\pi}$ 最小。

（除 $Q$ 外，以上所有数据皆为正整数）
## 输入格式

第一行为一个整数 $N$（$N \leq 2 \times 10^4$），表示待制作的蛋糕的体积为 $N\pi$。

第二行为 $M$（$M \leq 15$），表示蛋糕的层数为 $M$。
## 输出格式

输出一个整数 $S$，若无解，输出 $0$。

## 样例

### 样例输入 #1
```
100
2

```
### 样例输出 #1
```
68
```


---

---
title: "符文之语"
layout: "post"
diff: 普及+/提高
pid: P1773
tag: ['动态规划 DP', '递推', 'NOI 导刊', '枚举']
---
# 符文之语
## 题目背景

传说中珠穆朗玛峰下有座古代人修建的神庙，神庙的地下室里有古代王室的遗产，但数千年来从未有人到达过……探险者小 FF 一直梦想成为世界上最富有的人和最杰出的探险家并被永载史册。在证明了这个洞确实存在后，小 FF 做好了充足准备，来到了神庙。
## 题目描述

当小 FF 来到神庙时，神庙已经破败不堪了。但神庙的中央有一个光亮如新的石台。小 FF 走近石台，发现石台上有一个数串，而数串的上方刻着一串古老的符文之语。精通古符文之语的小 FF 不费吹灰之力就读懂了文章的意思，其大意是：

对于石台上的一串数字，你可以在适当的位置加入乘号（设加了 $k$ 个，当然也可不加，即分成 $k+1$ 个部分），设这 $k+1$ 个部分的乘积（如果 $k=0$，则乘积即为原数串的值）对 $m$ 的余数（即 $\bmod\ m$）为 $x$；

现求 $x$ 能达到的最小值及该情况下 $k$ 的最小值，以及 $x$ 能达到的最大值及该情况下的 $k$ 的最小值（可以存在 $x$ 的最小值与最大值相同的情况）。

小 FF 还知道，如果他找到了正确的答案，那么就可以通往神庙的下层了。但这个问题似乎不太好解决，小 FF 就找到了你，并答应找到财宝以后和你二八分（当然你拿二……）。
## 输入格式

第一行为数串，且数串中不存在 $0$；

第二行为 $m$。
## 输出格式

四个数，分别为 $x$ 的最小值和该情况下的 $k$，以及 $x$ 的最大值和该情况下的 $k$，相邻两个数之间用一个空格隔开。
## 样例

### 样例输入 #1
```
4421

22


```
### 样例输出 #1
```
0 1 21 0
```
## 提示

记 $L$ 表示字符串的长度。

- 对于 $30\%$ 的数据：$2 \le L \le 50$；
- 对于 $100\%$ 的数据：$2 \le L \le 1000$，$2 \le m \le 50$。

NOI 导刊 $2010$ 提高（$02$）


---

---
title: "宝物筛选"
layout: "post"
diff: 普及+/提高
pid: P1776
tag: ['动态规划 DP', '单调队列', 'NOI 导刊', '背包 DP', '进制']
---
# 宝物筛选
## 题目描述

终于，破解了千年的难题。小 FF 找到了王室的宝物室，里面堆满了无数价值连城的宝物。

这下小 FF 可发财了，嘎嘎。但是这里的宝物实在是太多了，小 FF 的采集车似乎装不下那么多宝物。看来小 FF 只能含泪舍弃其中的一部分宝物了。

小 FF 对洞穴里的宝物进行了整理，他发现每样宝物都有一件或者多件。他粗略估算了下每样宝物的价值，之后开始了宝物筛选工作：小 FF 有一个最大载重为 $W$ 的采集车，洞穴里总共有 $n$ 种宝物，每种宝物的价值为 $v_i$，重量为 $w_i$，每种宝物有 $m_i$ 件。小 FF 希望在采集车不超载的前提下，选择一些宝物装进采集车，使得它们的价值和最大。
## 输入格式

第一行为一个整数 $n$ 和 $W$，分别表示宝物种数和采集车的最大载重。

接下来 $n$ 行每行三个整数 $v_i,w_i,m_i$。
## 输出格式

输出仅一个整数，表示在采集车不超载的情况下收集的宝物的最大价值。
## 样例

### 样例输入 #1
```
4 20
3 9 3
5 9 1
9 4 2
8 1 3
```
### 样例输出 #1
```
47
```
## 提示

对于 $30\%$ 的数据，$n\leq \sum m_i\leq 10^4$，$0\le W\leq 10^3$。

对于 $100\%$ 的数据，$n\leq \sum m_i \leq 10^5$，$0\le W\leq 4\times 10^4$，$1\leq n\le 100$。


---

---
title: "数列"
layout: "post"
diff: 普及+/提高
pid: P1799
tag: ['动态规划 DP', 'NOI 导刊']
---
# 数列
## 题目描述

虽然 msh 长大了，但她还是很喜欢找点游戏自娱自乐。有一天，她在纸上写了一串数字：$1, 1, 2, 5, 4$。接着她擦掉了一个 $1$，结果发现剩下 $1, 2, 4$ 都在自己所在的位置上，即 $1$ 在第 $1$ 位，$2$ 在第 $2$ 位，$4$ 在第 $4$ 位。她希望擦掉某些数后，剩下的数列中在自己位置上的数尽量多。她发现这个游戏很好玩，于是开始乐此不疲地玩起来……不过她不能确定最多能有多少个数在自己的位置上，所以找到你，请你帮忙计算一下！

## 输入格式

第一行为一个数 $n$，表示数列的长度。

接下来一行为 $n$个用空格隔开的正整数，第 $i$ 行表示数 $A_i$。

## 输出格式

一行一个整数，表示擦掉某些数后，最后剩下的数列中最多能有多少个数在自己的位置上，即 $A_i=i$ 最多能有多少。

## 样例

### 样例输入 #1
```
5

1 1 2 5 4


```
### 样例输出 #1
```
3
```
## 提示

### 数据范围及约定

- 对于 $20\%$ 的数据，$n\leq 20$；
- 对于 $60\%$ 的数据，$n\leq 100$；
- 对于 $100\%$ 的数据，$n\leq 10^3$。



---

---
title: "黑匣子"
layout: "post"
diff: 普及+/提高
pid: P1801
tag: ['线段树', '平衡树', '堆', 'NOI 导刊', 'O2优化']
---
# 黑匣子
## 题目描述

Black Box 是一种原始的数据库。它可以储存一个整数数组，还有一个特别的变量 $i$。最开始的时候 Black Box 是空的．而 $i=0$。这个 Black Box 要处理一串命令。

命令只有两种：

- `ADD(x)`：把 $x$ 元素放进 Black Box;

- `GET`：$i$ 加 $1$，然后输出 Black Box 中第 $i$ 小的数。

记住：第 $i$ 小的数，就是 Black Box 里的数的按从小到大的顺序排序后的第 $i$ 个元素。

我们来演示一下一个有11个命令的命令串。（如下表所示）

| 序号 | 操作 | $i$ | 数据库 | 输出 |
| :--: | :--- | :------: | ------ | :----: |
|   1  | `ADD(3)`     |   $0$    |  $3$  | / |
|   2  | `GET` |   $1$    |  $3$  | $3$ |
|   3  |`ADD(1)`|$1$|$1,3$|/|
|   4  |`GET`|$2$|$1,3$|$3$|
|   5  |`ADD(-4)`|$2$|$-4,1,3$|/|
|   6  |`ADD(2)`|$2$|$-4,1,2,3$|/|
|   7  |`ADD(8)`|$2$|$-4,1,2,3,8$|/|
|   8  |`ADD(-1000)`|$2$|$-1000,-4,1,2,3,8$|/|
|   9  |`GET`|$3$|$-1000,-4,1,2,3,8$|$1$|
|  10  |`GET`|$4$|$-1000,-4,1,2,3,8$|$2$|
|  11  |`ADD(2)`|$4$|$-1000,-4,1,2,2,3,8$|/|

现在要求找出对于给定的命令串的最好的处理方法。`ADD` 命令共有 $m$ 个，`GET` 命令共有 $n$ 个。现在用两个整数数组来表示命令串：

1. $a_1,a_2,\cdots,a_m$：一串将要被放进 Black Box 的元素。例如上面的例子中 $a=[3,1,-4,2,8,-1000,2]$。

2. $u_1,u_2,\cdots,u_n$：表示第 $u_i$ 个元素被放进了 Black Box 里后就出现一个 `GET` 命令。例如上面的例子中 $u=[1,2,6,6]$ 。输入数据不用判错。
## 输入格式

第一行两个整数 $m$ 和 $n$，表示元素的个数和 `GET` 命令的个数。

第二行共 $m$ 个整数，从左至右第 $i$ 个整数为 $a_i$，用空格隔开。

第三行共 $n$ 个整数，从左至右第 $i$ 个整数为 $u_i$，用空格隔开。
## 输出格式

输出 Black Box 根据命令串所得出的输出串，一个数字一行。 
## 样例

### 样例输入 #1
```
7 4
3 1 -4 2 8 -1000 2
1 2 6 6

```
### 样例输出 #1
```
3
3
1
2

```
## 提示

#### 数据规模与约定

- 对于 $30\%$ 的数据，$1 \leq n,m \leq 10^{4}$。
- 对于 $50\%$ 的数据，$1 \leq n,m \leq 10^{5}$。
- 对于 $100\%$ 的数据，$1 \leq n,m \leq 2 \times 10^{5},|a_i| \leq 2 \times 10^{9}$，保证 $u$ 序列单调不降。


---

---
title: "过河问题"
layout: "post"
diff: 普及+/提高
pid: P1809
tag: ['NOI 导刊']
---
# 过河问题
## 题目描述

有一个大晴天，Oliver 与同学们一共 $N$ 人出游，他们走到一条河的东岸边，想要过河到西岸。而东岸边有一条小船。 

船太小了，一次只能乘坐两人。每个人都有一个渡河时间 $T$，船划到对岸的时间等于船上渡河时间较长的人所用时间。 

现在已知 $N$ 个人的渡河时间 $T$，Oliver 想要你告诉他，他们最少要花费多少时间，才能使所有人都过河。 

注意，只有船在东岸（西岸）的人才能坐上船划到对岸。
## 输入格式

输入文件第一行为人数 $N$，以下有 $N$ 行，每行一个数。 

第 $i+1$ 行的数为第 $i$ 个人的渡河时间。
## 输出格式

输出文件仅包含一个数，表示所有人都渡过河的最少渡河时间。
## 样例

### 样例输入 #1
```
4
6
7
10
15

```
### 样例输出 #1
```
42

```
## 提示

### 数据范围

对于 $40\%$ 的数据满足 $N\le8$。 

对于 $100\%$ 的数据满足 $N\le100000$。


### 样例解释

- 初始：东岸 $\{1,2,3,4\}$，西岸 $\{\}$；
- 第一次：东岸 $\{3,4\}$，西岸 $\{1,2\}$，时间 $7$；
- 第二次：东岸 $\{1,3,4\}$，西岸 $\{2\}$，时间 $6$；
- 第三次：东岸 $\{1\}$，西岸 $\{2,3,4\}$，时间 $15$；
- 第四次：东岸 $\{1,2\}$，西岸 $\{3,4\}$ 时间 $7$；
- 第五次：东岸 $\{\}$，西岸 $\{1,2,3,4\}$ 时间 $7$。

所以总时间为 $7+6+15+7+7=42$，没有比这个更优的方案。


---

---
title: "数页码"
layout: "post"
diff: 普及+/提高
pid: P1836
tag: ['NOI 导刊']
---
# 数页码
## 题目描述

一本书的页码是从 $1\sim n$ 编号的连续整数：$1,2,3,\cdots,n$。请你求出全部页码中所有单个数字的和，例如第 $123$ 页，它的和就是 $ 1+2+3=6$。

## 输入格式

一行一个整数 $n$。

## 输出格式

一行，代表所有单个数字的和。

## 样例

### 样例输入 #1
```
3456789
```
### 样例输出 #1
```
96342015 
```
## 提示

$1\le n\le 10^9$


---

---
title: "阅览室"
layout: "post"
diff: 普及+/提高
pid: P1844
tag: ['NOI 导刊']
---
# 阅览室
## 题目描述

一个阅览室每天都要接待大批读者。阅览室开门时间是 $O$，关门时间是 $T$。每位读者的到达时间都不一样，并且想要阅读的刊物不超过 $5$ 本。

每位读者心里对自己想看的刊物都有一个排位，到达之后他会先去找自己最想看的刊物，如果找不到则去找其次想看的刊物。如果找不到任何他想看的刊物，他会开始等待，直到有一本以上的他想看的刊物被人放回原处。当然，他会先去拿其中自己最想看的刊物。当他看完某一本刊物后，就把它放回原处，接着去找自己没看过的最想看的刊物。如此下去，直到看完所有他想看的刊物为止。

矛盾出现在两个人同时想要拿同一本刊物的时候。阅览室为了避免读者之间出现争执，作了一个规定，读者每次在开始等待时先去服务台做一次登记。如果两个人都同时想要一本刊物，那么先登记的读者将得到这本刊物。如果两个人同时登记，那么先到达阅览室的读者将得到刊物。没得到的人就只能去找其他的刊物看。

阅览室关门时，所有读者都将被强迫离开阅览室，不再允许继续阅读。

现在阅览室想做一个统计调查，你被要求写一个程序来模拟这个过程计算出所有刊物被阅读的总次数。当某个读者开始阅读某本刊物时，该刊物的被阅读次数就加 $1$，无论这本刊物最后有没有被读完。
## 输入格式

输入包含多组测试数据。

每个测试数据开头是两个整数 $T$ 和 $n\ (1 \le n \le 100)$，分别表示图书馆关门时间和读者总数。接下来按照读者的到达时间先后依次给出了每位读者的具体描述。

每个读者描述开头是一个整数 $t\ (0 \le t<T)$，表示该读者到达时间。接下来一行开头是一个整数 $k\ (1 \le k \le 5)$，表示该读者想要看的刊物数目。之后跟着 $2k$ 个整数按照读者想要阅读的刊物的顺序依次给出了刊物的描述。其中第 $2i-1$ 个整数表示刊物的编号 $s\ (0 \le s<1000)$，第 $2i$ 个整数表示该读者读完这本刊物所需的时间。
## 输出格式

对于每个测试数据，在单独一行里输出所有刊物被阅读的总次数。

## 样例

### 样例输入 #1
```
10 4 
1
2 1 4 2 5 
3 
1 2 4 
7 
3 2 2 1 3 3 2 
9 
1 4 2 
```
### 样例输出 #1
```
5
```


---

---
title: "[NOI1995] 石子合并"
layout: "post"
diff: 普及+/提高
pid: P1880
tag: ['动态规划 DP', 'NOI', '区间 DP', '四边形不等式']
---
# [NOI1995] 石子合并
## 题目描述

在一个圆形操场的四周摆放 $N$ 堆石子，现要将石子有次序地合并成一堆，规定每次只能选相邻的 $2$ 堆合并成新的一堆，并将新的一堆的石子数，记为该次合并的得分。

试设计出一个算法,计算出将 $N$ 堆石子合并成 $1$ 堆的最小得分和最大得分。

## 输入格式

数据的第 $1$ 行是正整数 $N$，表示有 $N$ 堆石子。

第 $2$ 行有 $N$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 堆石子的个数。

## 输出格式

输出共 $2$ 行，第 $1$ 行为最小得分，第 $2$ 行为最大得分。

## 样例

### 样例输入 #1
```
4
4 5 9 4
```
### 样例输出 #1
```
43
54
```
## 提示

$1\leq N\leq 100$，$0\leq a_i\leq 20$。


---

---
title: "刺杀大使"
layout: "post"
diff: 普及+/提高
pid: P1902
tag: ['二分', 'NOI 导刊', '广度优先搜索 BFS']
---
# 刺杀大使
## 题目描述

某组织正在策划一起对某大使的刺杀行动。他们来到了使馆，准备完成此次刺杀，要进入使馆首先必须通过使馆前的防御迷阵。

迷阵由 $n\times m$ 个相同的小房间组成，每个房间与相邻四个房间之间有门可通行。在第 $n$ 行的 $m$ 个房间里有 $m$ 个机关，这些机关必须全部打开才可以进入大使馆。而第 $1$ 行的 $m$ 个房间有 $m$ 扇向外打开的门，是迷阵的入口。除了第 $1$ 行和第 $n$ 行的房间外，每个房间都被使馆的安保人员安装了激光杀伤装置，将会对进入房间的人造成一定的伤害。第 $i$ 行第 $j$ 列 造成的伤害值为 $p_{i,j}$（第 $1$ 行和第 $n$ 行的 $p$ 值全部为 $0$）。

现在某组织打算以最小伤害代价进入迷阵，打开全部机关，显然，他们可以选 择任意多的人从任意的门进入，但必须到达第 $n$ 行的每个房间。一个士兵受到的伤害值为他到达某个机关的路径上所有房间的伤害值中的最大值，整个部队受到的伤害值为所有士兵的伤害值中的最大值。现在，这个恐怖组织掌握了迷阵的情况，他们需要提前知道怎么安排士兵的行进路线可以使得整个部队的伤害值最小。
## 输入格式

第一行有两个整数 $n,m$，表示迷阵的大小。

接下来 $n$ 行，每行 $m$ 个数，第 $i$ 行第 $j$ 列的数表示 $p_{i,j}$。
## 输出格式

输出一个数，表示最小伤害代价。

## 样例

### 样例输入 #1
```
4 2
0 0 
3 5 
2 4 
0 0 

```
### 样例输出 #1
```
3
```
## 提示

- $50\%$ 的数据，$n,m \leq 100$；
- $100\%$ 的数据，$n,m \leq 1000$，$p_{i,j} \leq 1000$。


---

---
title: "[NOIP 2014 提高组] 飞扬的小鸟"
layout: "post"
diff: 普及+/提高
pid: P1941
tag: ['动态规划 DP', '2014', 'NOIP 提高组', '枚举', '背包 DP']
---
# [NOIP 2014 提高组] 飞扬的小鸟
## 题目背景

NOIP2014 提高组 D1T3
## 题目描述

Flappy Bird 是一款风靡一时的休闲手机游戏。玩家需要不断控制点击手机屏幕的频率来调节小鸟的飞行高度，让小鸟顺利通过画面右方的管道缝隙。如果小鸟一不小心撞到了水管或者掉在地上的话，便宣告失败。

为了简化问题，我们对游戏规则进行了简化和改编:

游戏界面是一个长为 $n$，高为 $m$ 的二维平面，其中有 $k$ 个管道（忽略管道的宽度）。 

小鸟始终在游戏界面内移动。小鸟从游戏界面最左边任意整数高度位置出发，到达游戏界面最右边时，游戏完成。

小鸟每个单位时间沿横坐标方向右移的距离为 $1$，竖直移动的距离由玩家控制。如果点击屏幕，小鸟就会上升一定高度 $x$，每个单位时间可以点击多次，效果叠加；如果不点击屏幕，小鸟就会下降一定高度 $y$。小鸟位于横坐标方向不同位置时，上升的高度 $x$ 和下降的高度 $y$ 可能互不相同。

小鸟高度等于 $0$ 或者小鸟碰到管道时，游戏失败。小鸟高度为 $m$ 时，无法再上升。

现在,请你判断是否可以完成游戏。如果可以，输出最少点击屏幕数；否则，输出小鸟最多可以通过多少个管道缝隙。
## 输入格式

第 $1$ 行有 $3$ 个整数 $n, m, k$，分别表示游戏界面的长度，高度和水管的数量，每两个整数之间用一个空格隔开；

接下来的 $n$ 行，每行 $2$ 个用一个空格隔开的整数 $x$ 和 $y$，依次表示在横坐标位置 $0 \sim n-1$ 上玩家点击屏幕后，小鸟在下一位置上升的高度 $x$，以及在这个位置上玩家不点击屏幕时，小鸟在下一位置下降的高度 $y$。

接下来 $k$ 行，每行 $3$ 个整数 $p,l,h$，每两个整数之间用一个空格隔开。每行表示一个管道，其中 $p$ 表示管道的横坐标，$l$ 表示此管道缝隙的下边沿高度，$h$ 表示管道缝隙上边沿的高度（输入数据保证 $p$ 各不相同，但不保证按照大小顺序给出）。
## 输出格式

共两行。

第一行，包含一个整数，如果可以成功完成游戏，则输出 $1$，否则输出 $0$。

第二行，包含一个整数，如果第一行为 $1$，则输出成功完成游戏需要最少点击屏幕数，否则，输出小鸟最多可以通过多少个管道缝隙。
## 样例

### 样例输入 #1
```
10 10 6 
3 9  
9 9  
1 2  
1 3  
1 2  
1 1  
2 1  
2 1  
1 6  
2 2  
1 2 7 
5 1 5 
6 3 5 
7 5 8 
8 7 9 
9 1 3 

```
### 样例输出 #1
```
1
6


```
### 样例输入 #2
```
10 10 4 
1 2  
3 1  
2 2  
1 8  
1 8  
3 2  
2 1  
2 1  
2 2  
1 2  
1 0 2 
6 7 9 
9 1 4 
3 8 10  
```
### 样例输出 #2
```
0
3
```
## 提示

 
【输入输出样例说明】

如下图所示，蓝色直线表示小鸟的飞行轨迹，红色直线表示管道。

![](https://cdn.luogu.com.cn/upload/image_hosting/59alxbqi.png)

【数据范围】

对于 $30\%$ 的数据：$5 \leq n \leq 10, 5 \leq m \leq 10, k=0$，保证存在一组最优解使得同一单位时间最多点击屏幕 $3$ 次；

对于 $50\%$ 的数据：$5 \leq n \leq 20, 5 \leq m \leq 10$，保证存在一组最优解使得同一单位时间最多点击屏幕 $3$ 次；

对于 $70\%$ 的数据：$5 \leq n \leq 1000, 5 \leq m \leq 100$；

对于 $100\%$ 的数据：$5 \leq n \leq 10000$，$5 \leq m \leq 1000$，$0 \leq k < n$，$0 < x,y < m$，$0 < p < n$，$0 \leq l < h \leq m$， $l + 1 < h$。


---

---
title: "词编码"
layout: "post"
diff: 普及+/提高
pid: P1942
tag: ['模拟', 'NOI 导刊']
---
# 词编码
## 题目描述

一个发送机可以通过一条隧道发送一些以二进制代码组成的单词。在其尽头的接收机可以使用特殊技术恢复到最初的单词。每个单词最初都由0和1组成。所有的单词最初长度都为n（4<=n<=1000）。当穿过隧道之后单词可能发生以下几种情况之一：

1. 任意（一个）0被1取代
2. 任意（一个）符号被删除
3. 一个符号（0或1）被插入到任何位置
4. 不改变

我们知道最初的单词都具有以下性质：有1的位置号的总和是n+1的倍数，或者是0.

## 输入格式

n和转换后的单词，每个单词占一行。单词数不大于2001，不会有其他任何东西，除了一些空格和空行。

## 输出格式

你的程序应该打印输出原始序列的词，注意换行。

若有多解，操作4优先，不行则按操作1，2，3优先。同一操作，按操作位置最优的优先（从左到右数起1,2,3……n），还有操作2时，被删数列，先在被删数列添0，不行再添1。

如果没答案输出-1。

## 样例

### 样例输入 #1
```
4
0000
011
1011
11011
```
### 样例输出 #1
```
0000
0110
1001
1111
```


---

---
title: "易语言"
layout: "post"
diff: 普及+/提高
pid: P1953
tag: ['模拟', '字符串', 'NOI 导刊']
---
# 易语言
## 题目描述

老师近段时间正在研究易语言，这是一款 Windows 下的可视化编程系统，由大连大有吴涛软件开发公司开发的、具有中国知识产权的系统。为了更好地学习该套系统，老师总是有意识地在实践中运用这套系统来开发程序。

这不，今天老师碰到了一个问题，那就是“当把数据放置到 KOJ 上去时，需要把测试数据改成相应的文件名”。举个例子说，如果原始测试数据文件名是 $\text{e0.in,\,e1.in\;...\;e9.in}$ 和 $\text{e0.out,\,e1.out\;...\;e9.out}$，则老师需要把文件全部改为 $\text{data1.in,\,data2.in\;...\;data10.in}$ 和 $\text{data1.out,\,data2.out\;...\;data10.out}$。程序界面如下图所示：

*（注：此处似乎缺少一张图片，但不影响对题意的理解）*

当然了，老师是编程的菜鸟，比起你可是差多了，所以他的程序不是很好，现在想请你帮老师改进这个程序。

事先，老师会告诉你所需要生成的目标文件名格式，比如，他告诉你 $\text{enger0.in}$ 和 $\text{ans}$ ，则表示目标文件中输入文件的主名是 $\text{enger}$，扩展名是 $\text{in}$，编号从 $0$ 开始而且跟在主名后面，当然了，输出文件名就依次是 $\text{enger0.ans,\,enger1.ans\;...\;enger}x\text{.ans}$，其中的 $x$ 你可以统计老师告诉你的原始文件名的个数来确定。另外，老师也会告诉你原始的所有输入数据的文件名全称，比如 $\text{a1.txt,\,a2.txt\;...\;a}x\text{.txt}$。但老师是一个粗心的人，你不要期望老师给你的文件名是按照编号从小到大给出的，但给出的文件名肯定是正确的而且满足一般输入输出文件名的规律的(编号数字肯定出现在文件主名末尾或者扩展名末尾，而且除了这个编号数字外，在原始文件名和生成的目标文件名其他的任何地方都不会出现数字)。

有些原始的输入输出文件名并不需要改变主名和扩展名，而只需改变文件编号即可，此时，老师首先会告诉你一个数字 $1$（或者 $0$），表示最终生成的目标文件的主名和扩展名不必改变，而只需把编号改为从 $1$（或者 $0$）开始即可。

## 输入格式

输入的第一行有两种情况，第一种情况是两个字符串，分别表示最终生成的目标文件名的格式（第一个表示生成的目标文件中的第一个输入文件的名字）；第二种情况是只有一个数字 $1$（或者 $0$），表示文件名主名和扩展名不必更改，只需修改成从 $1$（或者 $0$）开始编号的文件名即可。接下来 $n$ 行（$1 \le n \le 10^5$），每行两个用一个空格分隔的字符串，分别表示原始输入和输出文件的文件名（对于输入和输出文件中所有文件名的主名和扩展名都不超过 $10$ 个字符，而且文件的最大编号不会超过 $2 \times 10^5$）。

## 输出格式

输出包含 $n$ 行，每行两个用一个空格分隔的字符串，分别表示最终生成的目标文件的文件名。第一个表示输入文件，第二个表示输出文件。按照编号从小到大输出。
## 样例

### 样例输入 #1
```
enger0.in ans
abc1.in abc1.out
abc2.in abc2.out
abc3.in abc3.out
abc4.in abc4.out

```
### 样例输出 #1
```
enger0.in enger0.ans
enger1.in enger1.ans
enger2.in enger2.ans
enger3.in enger3.ans

```
### 样例输入 #2
```
1
aa.in0 aa.ou0
aa.in1 aa.ou1
aa.in2 aa.ou2

```
### 样例输出 #2
```
aa.in1 aa.ou1
aa.in2 aa.ou2
aa.in3 aa.ou3

```


---

---
title: "[NOI2015] 程序自动分析"
layout: "post"
diff: 普及+/提高
pid: P1955
tag: ['2015', '并查集', 'NOI', '离散化', '哈希 hashing']
---
# [NOI2015] 程序自动分析
## 题目描述

在实现程序自动分析的过程中，常常需要判定一些约束条件是否能被同时满足。

考虑一个约束满足问题的简化版本：假设 $x_1,x_2,x_3,\cdots$ 代表程序中出现的变量，给定 $n$ 个形如 $x_i=x_j$ 或 $x_i\neq x_j$ 的变量相等/不等的约束条件，请判定是否可以分别为每一个变量赋予恰当的值，使得上述所有约束条件同时被满足。例如，一个问题中的约束条件为：$x_1=x_2,x_2=x_3,x_3=x_4,x_4\neq x_1$，这些约束条件显然是不可能同时被满足的，因此这个问题应判定为不可被满足。

现在给出一些约束满足问题，请分别对它们进行判定。
## 输入格式

输入的第一行包含一个正整数 $t$，表示需要判定的问题个数。注意这些问题之间是相互独立的。

对于每个问题，包含若干行：

第一行包含一个正整数 $n$，表示该问题中需要被满足的约束条件个数。接下来 $n$ 行，每行包括三个整数 $i,j,e$，描述一个相等/不等的约束条件，相邻整数之间用单个空格隔开。若 $e=1$，则该约束条件为 $x_i=x_j$。若$e=0$，则该约束条件为 $x_i\neq x_j$。
## 输出格式

输出包括 $t$ 行。

输出文件的第 $k$ 行输出一个字符串 `YES` 或者 `NO`（字母全部大写），`YES` 表示输入中的第 $k$ 个问题判定为可以被满足，`NO` 表示不可被满足。
## 样例

### 样例输入 #1
```
2
2
1 2 1
1 2 0
2
1 2 1
2 1 1
```
### 样例输出 #1
```
NO
YES

```
### 样例输入 #2
```
2
3
1 2 1
2 3 1
3 1 1
4
1 2 1
2 3 1
3 4 1
1 4 0

```
### 样例输出 #2
```
YES
NO
```
## 提示

【样例解释1】

在第一个问题中，约束条件为：$x_1=x_2,x_1\neq x_2$。这两个约束条件互相矛盾，因此不可被同时满足。

在第二个问题中，约束条件为：$x_1=x_2,x_1 = x_2$。这两个约束条件是等价的，可以被同时满足。

【样例说明2】

在第一个问题中，约束条件有三个：$x_1=x_2,x_2= x_3,x_3=x_1$。只需赋值使得 $x_1=x_2=x_3$，即可同时满足所有的约束条件。

在第二个问题中，约束条件有四个：$x_1=x_2,x_2= x_3,x_3=x_4,x_4\neq x_1$。由前三个约束条件可以推出 $x_1=x_2=x_3=x_4$，然而最后一个约束条件却要求 $x_1\neq x_4$，因此不可被满足。

【数据范围】

所有测试数据的范围和特点如下表所示：

### 勘误：测试点 $8 \sim 10$ 的 $i, j$ 约束为 $1 \leq i, j \leq 10^9$，而不是下图中的 $10^{10}$。

![](https://cdn.luogu.com.cn/upload/image_hosting/aq6f4ym8.png)


---

---
title: "[NOIP 2013 普及组] 小朋友的数字"
layout: "post"
diff: 普及+/提高
pid: P1982
tag: ['动态规划 DP', '高精度', '递推', '2013', 'NOIP 普及组']
---
# [NOIP 2013 普及组] 小朋友的数字
## 题目背景

NOIP2013 普及组 T3
## 题目描述

有 $n$ 个小朋友排成一列。每个小朋友手上都有一个数字，这个数字可正可负。规定每个小朋友的特征值等于排在他前面（包括他本人）的小朋友中连续若干个（最少有一个）小朋友手上的数字之和的最大值。

作为这些小朋友的老师，你需要给每个小朋友一个分数，分数是这样规定的：第一个小朋友的分数是他的特征值，其它小朋友的分数为排在他前面的所有小朋友中（不包括他本人），小朋友分数加上其特征值的最大值。

请计算所有小朋友分数的最大值，输出时保持最大值的符号，将其绝对值对 $p$ 取模后输出。

## 输入格式

第一行包含两个正整数 $n,p$，之间用一个空格隔开。

第二行包含 $n$ 个数，每两个整数之间用一个空格隔开，表示每个小朋友手上的数字。

## 输出格式

一个整数，表示最大分数对 $p$ 取模的结果。

## 样例

### 样例输入 #1
```
5 997
1 2 3 4 5

```
### 样例输出 #1
```
21

```
### 样例输入 #2
```
5 7
-1 -1 -1 -1 -1

```
### 样例输出 #2
```
-1

```
## 提示

**样例解释 1**

小朋友的特征值分别为 $1,3,6,10,15$，分数分别为 $ 1,2,5,11,21$，最大值 $21$ 对 $997$ 的模是 $21$。

**样例解释 2**

小朋友的特征值分别为 $-1,-1,-1,-1,-1$，分数分别为$-1,-2,-2,-2,-2$，最大值 $-1$ 对 $7$ 的模为 $-1$，输出 $-1$。

**【数据范围】**

对于 $50\%$ 的数据，$1 \le n \le 1000$，$1 \le p \le 1000$，所有数字的绝对值不超过 $1000$；

对于 $100\%$ 的数据，$1 \le n \le {10}^6$，$1 \le p \le {10}^9$，其他数字的绝对值均不超过 ${10}^9$。


---

---
title: "[NOIP 2013 普及组] 车站分级"
layout: "post"
diff: 普及+/提高
pid: P1983
tag: ['图论', '贪心', '2013', 'NOIP 普及组', 'O2优化', '排序', '图论建模', '拓扑排序']
---
# [NOIP 2013 普及组] 车站分级
## 题目背景

NOIP2013 普及组 T4
## 题目描述

一条单向的铁路线上，依次有编号为 $1, 2, …, n$ 的 $n $ 个火车站。每个火车站都有一个级别，最低为 $1$ 级。现有若干趟车次在这条线路上行驶，每一趟都满足如下要求：如果这趟车次停靠了火车站 $x$，则始发站、终点站之间所有级别大于等于火车站 $x$ 的都必须停靠。  
注意：起始站和终点站自然也算作事先已知需要停靠的站点。

例如，下表是 $ 5 $ 趟车次的运行情况。其中，前 $ 4$ 趟车次均满足要求，而第 $5$ 趟车次由于停靠了 $3$ 号火车站（$2$ 级）却未停靠途经的 $6$ 号火车站（亦为 $2$ 级）而不满足要求。



 ![](https://cdn.luogu.com.cn/upload/pic/1238.png) 

现有 $m$ 趟车次的运行情况（全部满足要求），试推算这 $ n$ 个火车站至少分为几个不同的级别。

## 输入格式

第一行包含 $2$ 个正整数 $n, m$，用一个空格隔开。

第 $i + 1$ 行 $(1 ≤ i ≤ m)$ 中，首先是一个正整数 $s_i\ (2 ≤ s_i ≤ n)$，表示第 $ i$ 趟车次有 $s_i$ 个停靠站；接下来有 $ s_i$ 个正整数，表示所有停靠站的编号，从小到大排列。每两个数之间用一个空格隔开。输入保证所有的车次都满足要求。

## 输出格式

一个正整数，即 $n$ 个火车站最少划分的级别数。

## 样例

### 样例输入 #1
```
9 2 
4 1 3 5 6 
3 3 5 6 
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
9 3 
4 1 3 5 6 
3 3 5 6 
3 1 5 9 
```
### 样例输出 #2
```
3
```
## 提示

对于 $ 20\%$ 的数据，$1 ≤ n, m ≤ 10$；

对于 $50\%$ 的数据，$1 ≤ n, m ≤ 100$；

对于 $100\%$ 的数据，$1 ≤ n, m ≤ 1000$。



---

---
title: "[NOI2001] 食物链"
layout: "post"
diff: 普及+/提高
pid: P2024
tag: ['2001', '并查集', 'NOI']
---
# [NOI2001] 食物链
## 题目描述

动物王国中有三类动物 $A,B,C$，这三类动物的食物链构成了有趣的环形。$A$ 吃 $B$，$B$ 吃 $C$，$C$ 吃 $A$。

现有 $N$ 个动物，以 $1 \sim N$ 编号。每个动物都是 $A,B,C$ 中的一种，但是我们并不知道它到底是哪一种。

有人用两种说法对这 $N$ 个动物所构成的食物链关系进行描述：

- 第一种说法是 `1 X Y`，表示 $X$ 和 $Y$ 是同类。
- 第二种说法是`2 X Y`，表示 $X$ 吃 $Y$。

此人对 $N$ 个动物，用上述两种说法，一句接一句地说出 $K$ 句话，这 $K$ 句话有的是真的，有的是假的。当一句话满足下列三条之一时，这句话就是假话，否则就是真话。

- 当前的话与前面的某些真的话冲突，就是假话；
- 当前的话中 $X$ 或 $Y$ 比 $N$ 大，就是假话；
- 当前的话表示 $X$ 吃 $X$，就是假话。

你的任务是根据给定的 $N$ 和 $K$ 句话，输出假话的总数。

## 输入格式

第一行两个整数，$N,K$，表示有 $N$ 个动物，$K$ 句话。

第二行开始每行一句话（按照题目要求，见样例）

## 输出格式

一行，一个整数，表示假话的总数。

## 样例

### 样例输入 #1
```
100 7
1 101 1
2 1 2
2 2 3
2 3 3
1 1 3
2 3 1
1 5 5

```
### 样例输出 #1
```
3

```
## 提示

对于全部数据，$1\le N\le 5 \times 10^4$，$1\le K \le 10^5$。



---

---
title: "[NOI2012] 随机数生成器"
layout: "post"
diff: 普及+/提高
pid: P2044
tag: ['数学', '贪心', '2012', '矩阵运算', 'NOI', '素数判断,质数,筛法', '矩阵乘法']
---
# [NOI2012] 随机数生成器
## 题目描述

栋栋最近迷上了随机算法，而随机数是生成随机算法的基础。栋栋准备使用线性同余法（Linear Congruential Method）来生成一个随机数列，这种方法需要设置四个非负整数参数 $m,a,c,X_0$，按照下面的公式生成出一系列随机数 $\{X_n\}$：
$$X_{n+1}=(aX_n +c)\bmod m$$

其中 $\bmod m$ 表示前面的数除以 $m$ 的余数。从这个式子可以看出，这个序列的下一个数总是由上一个数生成的。

用这种方法生成的序列具有随机序列的性质，因此这种方法被广泛地使用，包括常用的 C++ 和 Pascal 的产生随机数的库函数使用的也是这种方法。

栋栋知道这样产生的序列具有良好的随机性，不过心急的他仍然想尽快知道 $X_n$ 是多少。由于栋栋需要的随机数是 $0,1,\dots,g-1$ 之间的，他需要将 $X_n$ 除以 $g$ 取余得到他想要的数，即 $X_n \bmod g$，你只需要告诉栋栋他想要的数 $X_n \bmod g$ 是多少就可以了。

## 输入格式

一行 $6$ 个用空格分割的整数 $m,a,c,X_0,n$ 和 $g$，其中 $a,c,X_0$ 是非负整数，$m,n,g$ 是正整数。

## 输出格式

输出一个数，即 $X_n \bmod g$。

## 样例

### 样例输入 #1
```
11 8 7 1 5 3
```
### 样例输出 #1
```
2
```
## 提示

计算得 $X_n=X_5=8$，故$(X_n \bmod g) = (8 \bmod 3) = 2$。

对于 $100\%$ 的数据，$n,m,a,c,X_0\leq 10^{18}$，$1\leq g\leq 10^8$，$n,m\geq 1$，$a,c,X_0\geq 0$。



---

---
title: "[NOI2007] 社交网络"
layout: "post"
diff: 普及+/提高
pid: P2047
tag: ['图论', '2007', 'NOI', '最短路']
---
# [NOI2007] 社交网络
## 题目描述

在社交网络 ( Social Network ) 的研究中，我们常常使用图论概念去解释一些社会现象。不妨看这样的一个问题:   
在一个社交圈子里有 $n$ 个人，人与人之间有不同程度的关系。我们将这个关系网络对应到一个 $n$ 个结点的无向图上，两个不同的人若互相认识，则在他们对应的结点之间连接一条无向边，并附上一个正数权值 $c$ ，$c$ 越小，表示两个人之间的关系越密切。我们可以用对应结点之间的最短路长度来衡量两个人 $s$ 和 $t$ 之间的关系密切程度，注意到最短路径上的其他结点为 $s$ 和 $t$ 的联系提供了某种便利，即这些结点对于 $s$ 和 $t$ 之间的联系有一定的重要程度。我们可以通过统计经过一个结点 $v$ 的最短路径的数目来衡量该结点在社交网络中的重要程度。考虑到两个结点 $A$ 和 $B$ 之间可能会有多条最短路径。我们修改重要程度的定义如下：令 $C_{s,t}$ 表示从s到t的不同的最短路的数目，$C_{s,t}(v)$ 表示经过 $v$ 从 $s$ 到 $t$ 的最短路的数目；则定义：

$$ I(v)=\sum_{s \ne v,t\ne v} \frac{C_{s,t}(v)}{C_{s,t}}$$

为结点 $v$ 在社交网络中的重要程度。为了使 $I(v)$ 和 $C_{s,t}(v)$ 有意义，我们规定需要处理的社交网络都是连通的无向图，即任意两个结点之间都有一条有限长度的最短路径。现在给出这样一幅描述社交网络的加权无向图，请你求出每一个结点的重要程度。
## 输入格式

输入第一行有两个整数 $n$ 和 $m$ ，表示社交网络中结点和无向边的数目。    
在无向图中，我们将所有结点从 $1$ 到 $n$ 进行编号。

接下来 $m$ 行，每行用三个整数 $a , b , c$ 描述一条连接结点 $a$ 和 $b$ ，权值为 $c$ 的无向边。
注意任意两个结点之间最多有一条无向边相连，无向图中也不会出现自环（即不存在一条无向边的两个端点是相同的结点）。
## 输出格式

输出包括 $n$ 行，每行一个实数，精确到小数点后 $3$ 位。第 $i$ 行的实数表示结点 $i$ 在社交网络中的重要程度。
## 样例

### 样例输入 #1
```
4 4
1 2 1
2 3 1
3 4 1
4 1 1
```
### 样例输出 #1
```
1.000
1.000
1.000
1.000
```
## 提示

 ![](https://cdn.luogu.com.cn/upload/pic/1136.png) 

对于1号结点而言，只有2号到4号结点和4号到2号结点的最短路经过1号结点，而2号结点和4号结点之间的最短路又有2条。因而根据定义，1号结点的重要程度计算为1/2+1/2=1。由于图的对称性，其他三个结点的重要程度也都是1。

对于 $50\%$ 的数据， $n \le 10 , m \le 45$。     
对于 $100\%$ 的数据， $n \le 100 , m \le 4500$ ，任意一条边的权值 $c$ 是正整数且 $1 \leqslant c \leqslant 1000$ 。    
所有数据中保证给出的无向图连通，且任意两个结点之间的最短路径数目不超过 $10^{10}$。     




---

---
title: "[NOI2014] 起床困难综合症"
layout: "post"
diff: 普及+/提高
pid: P2114
tag: ['动态规划 DP', '贪心', '2014', 'NOI', '位运算']
---
# [NOI2014] 起床困难综合症
## 题目描述

$21$ 世纪，许多人得了一种奇怪的病：起床困难综合症，其临床表现为：起床难，起床后精神不佳。作为一名青春阳光好少年，atm 一直坚持与起床困难综合症作斗争。通过研究相关文献，他找到了该病的发病原因：在深邃的太平洋海底中，出现了一条名为 drd 的巨龙，它掌握着睡眠之精髓，能随意延长大家的睡眠时间。正是由于 drd 的活动，起床困难综合症愈演愈烈，以惊人的速度在世界上传播。为了彻底消灭这种病，atm 决定前往海底，消灭这条恶龙。历经千辛万苦，atm 终于来到了 drd 所在的地方，准备与其展开艰苦卓绝的战斗。drd 有着十分特殊的技能，他的防御战线能够使用一定的运算来改变他受到的伤害。具体说来，drd 的防御战线由 $n$ 扇防御门组成。每扇防御门包括一个运算 $op$ 和一个参数 $t$，其中运算一定是 $\text{OR},\text{XOR},\text{AND}$ 中的一种，参数则一定为非负整数。如果还未通过防御门时攻击力为 $x$，则其通过这扇防御门后攻击力将变为 $x~op~t$。最终 drd 受到的伤害为对方初始攻击力 $x$ 依次经过所有 $n$ 扇防御门后转变得到的攻击力。

由于 atm 水平有限，他的初始攻击力只能为 $0$ 到 $m$ 之间的一个整数（即他的初始攻击力只能在 $0,1,\ldots,m$ 中任选，但在通过防御门之后的攻击力不受 $m$ 的限制）。为了节省体力，他希望通过选择合适的初始攻击力使得他的攻击能让 drd 受到最大的伤害，请你帮他计算一下，他的一次攻击最多能使 drd 受到多少伤害。
## 输入格式

输入文件的第 $1$ 行包含 $2$ 个整数，依次为 $n, m$，表示 drd 有 $n$ 扇防御门，atm 的初始攻击力为 $0$ 到 $m$ 之间的整数。

接下来 $n$ 行，依次表示每一扇防御门。每行包括一个字符串 $op$ 和一个非负整数 $t$，两者由一个空格隔开，且 $op$ 在前，$t$ 在后，$op$ 表示该防御门所对应的操作，$t$ 表示对应的参数。

## 输出格式

输出一行一个整数，表示 atm 的一次攻击最多使 drd 受到多少伤害。

## 样例

### 样例输入 #1
```
3 10
AND 5
OR 6
XOR 7
```
### 样例输出 #1
```
1
```
## 提示

【样例说明】

atm 可以选择的初始攻击力为 $0,1,\ldots ,10$。

假设初始攻击力为 $4$，最终攻击力经过了如下计算

- $4 \text{ AND } 5 = 4$；
- $4 \text{ OR } 6 = 6$；
- $6 \text{ XOR } 7 = 1$。

类似的，我们可以计算出初始攻击力为 $1,3,5,7,9$ 时最终攻击力为 $0$，初始攻击力为 $0,2,4,6,8,10$ 时最终攻击力为 $1$，因此atm的一次攻击最多使drd受到的伤害值为 $1$。

【数据规模与约定】

![](https://cdn.luogu.com.cn/upload/image_hosting/29yj7o58.png)

- 特殊性质 $\mathrm A$：存在一扇防御门为 $\texttt{AND 0}$；
- 特殊性质 $\mathrm B$：所有防御门的操作均相同。

对于所有数据，保证 $2\le n\le 10^5$，$0\le m\le 10^9$，$0\le t\le 10^9$，且 $\mathrm{op}$ 一定为 $\verb!AND!,\verb!OR!,\verb!XOR!$ 中的一种。



---

---
title: "[NOIP 2016 普及组] 魔法阵"
layout: "post"
diff: 普及+/提高
pid: P2119
tag: ['2016', 'NOIP 普及组']
---
# [NOIP 2016 普及组] 魔法阵
## 题目背景

NOIP2016 普及组 T4
## 题目描述

六十年一次的魔法战争就要开始了，大魔法师准备从附近的魔法场中汲取魔法能量。

大魔法师有 $m$ 个魔法物品，编号分别为 $1,2,\ldots,m$。每个物品具有一个魔法值，我们用 $X_i$ 表示编号为 $i$ 的物品的魔法值。每个魔法值 $X_i$ 是不超过 $n$ 的正整数，可能有多个物品的魔法值相同。

大魔法师认为，当且仅当四个编号为 $a,b,c,d$ 的魔法物品满足 $X_a<X_b<X_c<X_d,X_b-X_a=2(X_d-X_c)$，并且 $X_b-X_a<(X_c-X_b)/3$ 时，这四个魔法物品形成了一个魔法阵，他称这四个魔法物品分别为这个魔法阵的 $A$ 物品，$B$ 物品，$C$ 物品，$D$ 物品。

现在，大魔法师想要知道，对于每个魔法物品，作为某个魔法阵的 $A$ 物品出现的次数，作为 $B$ 物品的次数，作为 $C$ 物品的次数，和作为 $D$ 物品的次数。
## 输入格式

第一行包含两个空格隔开的正整数 $n,m$。

接下来 $m$ 行，每行一个正整数，第 $i+1$ 行的正整数表示 $X_i$，即编号为 $i$ 的物品的魔法值。

保证 $1 \le n \le 15000$，$1 \le m \le 40000$，$1 \le X_i \le n$。每个 $X_i$ 是分别在合法范围内等概率随机生成的。
## 输出格式

共 $m$ 行，每行 $4$ 个整数。第 $i$ 行的 $4$ 个整数依次表示编号为 $i$ 的物品作 为 $A,B,C,D$ 物品分别出现的次数。

保证标准输出中的每个数都不会超过 $10^9$。每行相邻的两个数之间用恰好一个空格隔开。

## 样例

### 样例输入 #1
```
30 8
1
24
7
28
5
29
26
24
```
### 样例输出 #1
```
4 0 0 0
0 0 1 0
0 2 0 0
0 0 1 1
1 3 0 0
0 0 0 2
0 0 2 2
0 0 1 0
```
### 样例输入 #2
```
15 15
1 
2 
3 
4 
5
6 
7 
8 
9
10
11
12
13
14
15
```
### 样例输出 #2
```
5 0 0 0
4 0 0 0
3 5 0 0
2 4 0 0
1 3 0 0
0 2 0 0
0 1 0 0
0 0 0 0
0 0 0 0
0 0 1 0
0 0 2 1
0 0 3 2
0 0 4 3
0 0 5 4
0 0 0 5
```
## 提示

【样例解释 $1$】

共有 $5$ 个魔法阵，分别为：

- 物品 $1,3,7,6$，其魔法值分别为 $1,7,26,29$；
- 物品 $1,5,2,7$，其魔法值分别为 $1,5,24,26$；
- 物品 $1,5,7,4$，其魔法值分别为 $1,5,26,28$；
- 物品 $1,5,8,7$，其魔法值分别为 $1,5,24,26$；
- 物品 $5,3,4,6$，其魔法值分别为 $5,7,28,29$。

以物品 $5$ 为例，它作为 $A$ 物品出现了 $1$ 次，作为 $B$ 物品出现了 $3$ 次，没有作为 $C$ 物品或者 $D$ 物品出现，所以这一行输出的四个数依次为 $1,3,0,0$。

此外，如果我们将输出看作一个 $m$ 行 $4$ 列的矩阵，那么每一列上的 $m$ 个数之和都应等于魔法阵的总数。所以，如果你的输出不满足这个性质，那么这个输出一定不正确。你可以通过这个性质在一定程度上检查你的输出的正确性。

【数据规模】

![](https://cdn.luogu.com.cn/upload/image_hosting/nozwrvut.png)


---

---
title: "[NOI2015] 荷马史诗"
layout: "post"
diff: 普及+/提高
pid: P2168
tag: ['贪心', '2015', '堆', 'NOI', '优先队列', '霍夫曼树']
---
# [NOI2015] 荷马史诗
## 题目背景

> 追逐影子的人，自己就是影子 —— 荷马
## 题目描述

Allison 最近迷上了文学。她喜欢在一个慵懒的午后，细细地品上一杯卡布奇诺，静静地阅读她爱不释手的《荷马史诗》。但是由《奥德赛》和《伊利亚特》 组成的鸿篇巨制《荷马史诗》实在是太长了，Allison 想通过一种编码方式使得它变得短一些。

一部《荷马史诗》中有 $n$ 种不同的单词，从 $1$ 到 $n$ 进行编号。其中第 $i$ 种单词出现的总次数为 $w_i$。Allison 想要用 $k$ 进制串 $s_i$ 来替换第 $i$ 种单词，使得其满足如下要求：

对于任意的 $1\leq i, j\leq n$ ，$i\ne j$ ，都有：$s_i$ 不是 $s_j$ 的前缀。

现在 Allison 想要知道，如何选择 $s_i$，才能使替换以后得到的新的《荷马史诗》长度最小。在确保总长度最小的情况下，Allison 还想知道最长的 $s_i$ 的最短长度是多少？

一个字符串被称为 $k$ 进制字符串，当且仅当它的每个字符是 $0$ 到 $k-1$ 之间（包括 $0$ 和 $k-1$ ）的整数。

字符串 $str1$ 被称为字符串 $str2$ 的前缀，当且仅当：存在 $1 \leq t\leq m$ ，使得 $str1 = str2[1..t]$。其中，$m$ 是字符串 $str2$ 的长度，$str2[1..t]$ 表示 $str2$ 的前 $t$ 个字符组成的字符串。
## 输入格式

输入的第 $1$ 行包含 $2$ 个正整数 $n, k$ ，中间用单个空格隔开，表示共有 $n$ 种单词，需要使用 $k$ 进制字符串进行替换。

接下来 $n$ 行，第 $i + 1$ 行包含 $1$ 个非负整数 $w_i$，表示第 $i$ 种单词的出现次数。
## 输出格式

输出包括 $2$ 行。

第 $1$ 行输出 $1$ 个整数，为《荷马史诗》经过重新编码以后的最短长度。

第 $2$ 行输出 $1$ 个整数，为保证最短总长度的情况下，最长字符串 $s_i$ 的最短长度。
## 样例

### 样例输入 #1
```
4 2
1
1
2
2

```
### 样例输出 #1
```
12
2
```
### 样例输入 #2
```
6 3
1
1
3
3
9
9

```
### 样例输出 #2
```
36
3

```
## 提示

#### 【样例解释】

#### 样例 1 解释

用 $X(k)$ 表示 $X$ 是以 $k$ 进制表示的字符串。

一种最优方案：令 $00(2)$ 替换第 $1$ 种单词， $01(2)$ 替换第 2 种单词， $10(2)$ 替换第 $3$ 种单词，$11(2)$ 替换第 $4$ 种单词。在这种方案下，编码以后的最短长度为：

$1 × 2 + 1 × 2 + 2 × 2 + 2 × 2 = 12$

最长字符串 $s_i$ 的长度为 $2$ 。

一种非最优方案：令 $000(2)$ 替换第 $1$ 种单词，$001(2)$ 替换第 $2$ 种单词，$01(2)$ 替换第 $3$ 种单词，$1(2)$ 替换第 $4$ 种单词。在这种方案下，编码以后的最短长度为：

$1 × 3 + 1 × 3 + 2 × 2 + 2 × 1 = 12$

最长字符串 $s_i$ 的长度为 $3$ 。与最优方案相比，文章的长度相同，但是最长字符串的长度更长一些。

#### 样例 2 解释

一种最优方案：令 $000(3)$ 替换第 $1$ 种单词，$001(3)$ 替换第 $2$ 种单词，$01(3)$ 替换第 $3$ 种单词， $02(3)$ 替换第 $4$ 种单词， $1(3)$ 替换第 5 种单词， $2(3)$ 替换第 $6$ 种单词。

#### 【数据规模与约定】

所有测试数据的范围和特点如下表所示（所有数据均满足 $0 < w_i \leq 10^{11}$）：

| 测试点编号 |  $n$ 的规模  | $k$ 的规模 |            备注            |
| :--------: | :----------: | :--------: | :------------------------: |
|    $1$     |    $n=3$     |   $k=2$    |                            |
|    $2$     |    $n=5$     |   $k=2$    |                            |
|    $3$     |    $n=16$    |   $k=2$    |     所有 $w_i$ 均相等      |
|    $4$     |  $n=1\,000$  |   $k=2$    | $w_i$ 在取值范围内均匀随机 |
|    $5$     |  $n=1\,000$  |   $k=2$    |                            |
|    $6$     | $n=100\,000$ |   $k=2$    |                            |
|    $7$     | $n=100\,000$ |   $k=2$    |     所有 $w_i$ 均相等      |
|    $8$     | $n=100\,000$ |   $k=2$    |                            |
|    $9$     |    $n=7$     |   $k=3$    |                            |
|    $10$    |    $n=16$    |   $k=3$    |     所有 $w_i$ 均相等      |
|    $11$    |  $n=1\,001$  |   $k=3$    |     所有 $w_i$ 均相等      |
|    $12$    | $n=99\,999$  |   $k=4$    |     所有 $w_i$ 均相等      |
|    $13$    | $n=100\,000$ |   $k=4$    |                            |
|    $14$    | $n=100\,000$ |   $k=4$    |                            |
|    $15$    |  $n=1\,000$  |   $k=5$    |                            |
|    $16$    | $n=100\,000$ |   $k=7$    | $w_i$ 在取值范围内均匀随机 |
|    $17$    | $n=100\,000$ |   $k=7$    |                            |
|    $18$    | $n=100\,000$ |   $k=8$    | $w_i$ 在取值范围内均匀随机 |
|    $19$    | $n=100\,000$ |   $k=9$    |                            |
|    $20$    | $n=100\,000$ |   $k=9$    |                            |

#### 【提示】

选手请注意使用 64 位整数进行输入输出、存储和计算。

#### 【评分方式】

对于每个测试点：

- 若输出文件的第 $1$ 行正确，得到该测试点 $40\%$ 的分数；
- 若输出文件完全正确，得到该测试点 $100\%$ 的分数。


---

---
title: "[NOIP 2015 普及组] 求和"
layout: "post"
diff: 普及+/提高
pid: P2671
tag: ['2015', '线性数据结构', 'NOIP 普及组', '排序', '前缀和']
---
# [NOIP 2015 普及组] 求和
## 题目背景

NOIP2015 普及组 T3
## 题目描述

一条狭长的纸带被均匀划分出了 $n$ 个格子，格子编号从 $1$ 到 $n$。每个格子上都染了一种颜色 $color_i$ 用 $[1,m]$ 当中的一个整数表示），并且写了一个数字 $number_i$。

| 编号 | 1 | 2 | 3 | 4 | 5 | 6 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| **颜色和数字** | $\color{blue}{5}$ | $\color{blue}{5}$ | $\color{red}{3}$ | $\color{red}{2}$ | $\color{blue}{2}$ | $\color{red}{2}$ |

定义一种特殊的三元组：$(x,y,z)$，其中 $x,y,z$ 都代表纸带上格子的编号，这里的三元组要求满足以下两个条件：

1. $x,y,z$ 都是整数，$x<y<z,y-x=z-y$。

2. $color_x=color_z$。

满足上述条件的三元组的分数规定为 $(x+z) \times (number_x+number_z)$。整个纸带的分数规定为所有满足条件的三元组的分数的和。这个分数可能会很大，你只要输出整个纸带的分数除以 $10007$ 所得的余数即可。

## 输入格式

第一行是用一个空格隔开的两个正整数 $n$ 和 $m,n$ 表纸带上格子的个数，$m$ 表纸带上颜色的种类数。

第二行有 $n$ 用空格隔开的正整数，第 $i$ 个数字表示纸带上编号为 $i$ 格子上面写的数字 $number_i$。

第三行有 $n$ 用空格隔开的正整数，第 $i$ 数字表示纸带上编号为 $i$ 格子染的颜色 $color_i$。

## 输出格式

一个整数，表示所求的纸带分数除以 $10007$ 所得的余数。

## 样例

### 样例输入 #1
```
6 2
5 5 3 2 2 2
2 2 1 1 2 1
```
### 样例输出 #1
```
82

```
### 样例输入 #2
```
15 4
5 10 8 2 2 2 9 9 7 7 5 6 4 2 4
2 2 3 3 4 3 3 2 4 4 4 4 1 1 1
```
### 样例输出 #2
```
1388
```
## 提示

**样例 1 解释**

纸带如题目描述中的图所示。

所有满足条件的三元组为：$(1, 3, 5), (4, 5, 6)$。

所以纸带的分数为 $(1 + 5) \times (5 + 2) + (4 + 6) \times (2 + 2) = 42 + 40 = 82$。


对于第 $1$ 组至第 $2$ 组数据， $1 ≤ n ≤ 100, 1 ≤ m ≤ 5$；

对于第 $3$ 组至第 $4$ 组数据，$1 ≤ n ≤ 3000, 1 ≤ m ≤ 100$；

对于第 $5$ 组至第 $ 6 $ 组数据，$1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000$，且不存在出现次数超过 $ 20 $ 的颜色；

对于全部 $10$ 组数据，$1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000, 1 ≤ color_i ≤ m,1≤number_i≤100000$。



---

---
title: "[NOIP 2015 提高组] 子串"
layout: "post"
diff: 普及+/提高
pid: P2679
tag: ['字符串', '动态规划 DP', '2015', 'NOIP 提高组', 'O2优化', '枚举']
---
# [NOIP 2015 提高组] 子串
## 题目背景

NOIP2015 Day2T2
## 题目描述

有两个仅包含小写英文字母的字符串 $A$ 和 $B$。

现在要从字符串 $A$ 中取出 $k$ 个互不重叠的非空子串，然后把这 $k$ 个子串按照其在字符串 $A$ 中出现的顺序依次连接起来得到一个新的字符串。请问有多少种方案可以使得这个新串与字符串 $B$ 相等？

注意：子串取出的位置不同也认为是不同的方案。
## 输入格式

第一行是三个正整数 $n,m,k$，分别表示字符串 $A$ 的长度，字符串 $B$ 的长度，以及问题描述中所提到的 $k$，每两个整数之间用一个空格隔开。

第二行包含一个长度为 $n$ 的字符串，表示字符串 $A$。

第三行包含一个长度为 $m$ 的字符串，表示字符串 $B$。
## 输出格式

一个整数，表示所求方案数。

由于答案可能很大，所以这里要求输出答案对 $1000000007$ 取模的结果。
## 样例

### 样例输入 #1
```
6 3 1 
aabaab 
aab
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
6 3 2 
aabaab 
aab
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
6 3 3 
aabaab 
aab
```
### 样例输出 #3
```
7
```
## 提示

**样例解释**

所有合法方案如下：（加下划线的部分表示取出的字串）

样例 1：$\texttt{\underline{aab}\,aab,aab\,\underline{aab}}$。  
样例 2：$\texttt{\underline{a}\,\underline{ab}\,aab,\underline{a}\,aba\,\underline{ab},a\,\underline{a}\,ba\,\underline{ab},aab\,\underline{a}\,\underline{ab},\underline{aa}\,\underline{b}\,aab,\underline{aa}\,baa\,\underline{b},aab\,\underline{aa}\,\underline{b}}$。  
样例 3：$\texttt{\underline{a}\,\underline{a}\,\underline{b}\,aab,\underline{a}\,\underline{a}\,baa\,\underline{b},\underline{a}\,ab\,\underline{a}\,a\,\underline{b},\underline{a}\,aba\,\underline{a}\,\underline{b},a\,\underline{a}\,b\,\underline{a}\,a\,\underline{b},a\,\underline{a}\,ba\,\underline{a}\,\underline{b},aab\,\underline{a}\,\underline{a}\,\underline{b}}$。

**数据范围**

对于第 1 组数据：$1≤n≤500,1≤m≤50,k=1$;  
对于第 2 组至第 3 组数据：$1≤n≤500,1≤m≤50,k=2$;   
对于第 4 组至第 5 组数据：$1≤n≤500,1≤m≤50,k=m$;   
对于第 1 组至第 7 组数据：$1≤n≤500,1≤m≤50,1≤k≤m$;  
对于第 1 组至第 9 组数据：$1≤n≤1000,1≤m≤100,1≤k≤m$;   
对于所有 10 组数据：$1≤n≤1000,1≤m≤200,1≤k≤m$。  



---

---
title: "[NOIP 2017 提高组] 时间复杂度"
layout: "post"
diff: 普及+/提高
pid: P3952
tag: ['模拟', '字符串', '2017', 'NOIP 提高组', '栈']
---
# [NOIP 2017 提高组] 时间复杂度
## 题目背景

NOIP2017 提高组 D1T2
## 题目描述

小明正在学习一种新的编程语言 A++，刚学会循环语句的他激动地写了好多程序并 给出了他自己算出的时间复杂度，可他的编程老师实在不想一个一个检查小明的程序， 于是你的机会来啦！下面请你编写程序来判断小明对他的每个程序给出的时间复杂度是否正确。

A++语言的循环结构如下：

 
```cpp
F i x y
    循环体
E
```
 
 
其中`F i x y`表示新建变量 $i$（变量 $i$ 不可与未被销毁的变量重名）并初始化为 $x$， 然后判断 $i$ 和 $y$ 的大小关系，若 $i$ 小于等于 $y$ 则进入循环，否则不进入。每次循环结束后 $i$ 都会被修改成 $i +1$，一旦 $i$ 大于 $y$ 终止循环。

$x$ 和 $y$ 可以是正整数（$x$ 和 $y$ 的大小关系不定）或变量 $n$。$n$ 是一个表示数据规模的变量，在时间复杂度计算中需保留该变量而不能将其视为常数，该数远大于 $100$。

`E` 表示循环体结束。循环体结束时，这个循环体新建的变量也被销毁。

注：本题中为了书写方便，在描述复杂度时，使用大写英文字母 $\operatorname O$ 表示通常意义下 $Θ$ 的概念。

## 输入格式

输入文件第一行一个正整数 $t$，表示有 $t$（$t \le 10$）个程序需要计算时间复杂度。 每个程序我们只需抽取其中 `F i x y` 和 `E` 即可计算时间复杂度。注意：循环结构允许嵌套。

接下来每个程序的第一行包含一个正整数 $L$ 和一个字符串，$L$ 代表程序行数，字符串表示这个程序的复杂度，`O(1)` 表示常数复杂度，`O(n^w)` 表示复杂度为 $n^w$，其中 $w$ 是一个小于 $100$ 的正整数，输入保证复杂度只有 `O(1)` 和 `O(n^w)` 两种类型。

接下来 $L$ 行代表程序中循环结构中的`F i x y`或者 `E`。 程序行若以`F`开头，表示进入一个循环，之后有空格分离的三个字符（串）`i x y`， 其中 $i$ 是一个小写字母（保证不为$n$），表示新建的变量名，$x$ 和 $y$ 可能是正整数或 $n$ ，已知若为正整数则一定小于 $100$。

程序行若以`E`开头，则表示循环体结束。

## 输出格式

输出文件共 $t$ 行，对应输入的 $t$ 个程序，每行输出 `Yes` 或 `No` 或者 `ERR`，若程序实际复杂度与输入给出的复杂度一致则输出 `Yes`，不一致则输出 `No`，若程序有语法错误（其中语法错误只有: ① `F` 和 `E` 不匹配 ②新建的变量与已经存在但未被销毁的变量重复两种情况），则输出 `ERR`。

注意：即使在程序不会执行的循环体中出现了语法错误也会编译错误，要输出 `ERR`。

## 样例

### 样例输入 #1
```
8
2 O(1)
F i 1 1
E
2 O(n^1)
F x 1 n
E
1 O(1)
F x 1 n
4 O(n^2)
F x 5 n
F y 10 n
E
E
4 O(n^2)
F x 9 n
E
F y 2 n
E
4 O(n^1)
F x 9 n
F y n 4
E
E
4 O(1)
F y n 4
F x 9 n
E
E
4 O(n^2)
F x 1 n
F x 1 10
E
E
```
### 样例输出 #1
```
Yes
Yes
ERR
Yes
No
Yes
Yes
ERR
```
## 提示

【输入输出样例解释 $1$】

第一个程序 $i$ 从 $1$ 到 $1$ 是常数复杂度。

第二个程序 $x$ 从 $1$ 到 $n$ 是 $n$ 的一次方的复杂度。

第三个程序有一个 `F` 开启循环却没有 `E` 结束，语法错误。

第四个程序二重循环，$n$ 的平方的复杂度。

第五个程序两个一重循环，$n$ 的一次方的复杂度。

第六个程序第一重循环正常，但第二重循环开始即终止（因为 $n$ 远大于 $100$，$100$ 大于 $4$）。

第七个程序第一重循环无法进入，故为常数复杂度。

第八个程序第二重循环中的变量 $x$ 与第一重循环中的变量重复，出现语法错误②，输出 `ERR`。

【数据规模与约定】

对于 $30\%$ 的数据：不存在语法错误，数据保证小明给出的每个程序的前 $L/2$ 行一定为以 `F` 开头的语句，第 $L/2+1$ 行至第 $L$ 行一定为以 `E` 开头的语句，$L  \le 10$，若 $x$、$y$ 均为整数，$x$ 一定小于 $y$，且只有 $y$ 有可能为 $n$。

对于 $50\%$ 的数据：不存在语法错误，$L  \le 100$，且若 $x$、$y$ 均为整数，$x$ 一定小于 $y$， 且只有 $y$ 有可能为 $n$。

对于 $70\%$ 的数据：不存在语法错误，$L  \le 100$。

对于 $100\%$ 的数据：$L  \le 100$。


---
如果需要Hack请私信@zhouyonglong或发讨论，提供数据和能Hack掉的本题的AC记录。


---

---
title: "[NOIP 2017 普及组] 棋盘"
layout: "post"
diff: 普及+/提高
pid: P3956
tag: ['搜索', '2017', 'NOIP 普及组', '广度优先搜索 BFS', '深度优先搜索 DFS', '剪枝', '最短路']
---
# [NOIP 2017 普及组] 棋盘
## 题目背景

NOIP2017 普及组 T3
## 题目描述

有一个 $m \times m$ 的棋盘，棋盘上每一个格子可能是红色、黄色或没有任何颜色的。你现在要从棋盘的最左上角走到棋盘的最右下角。

任何一个时刻，你所站在的位置必须是有颜色的（不能是无色的）， 你只能向上、下、左、右四个方向前进。当你从一个格子走向另一个格子时，如果两个格子的颜色相同，那你不需要花费金币；如果不同，则你需要花费 $1 $ 个金币。

另外， 你可以花费 $2$ 个金币施展魔法让下一个无色格子暂时变为你指定的颜色。但这个魔法不能连续使用， 而且这个魔法的持续时间很短，也就是说，如果你使用了这个魔法，走到了这个暂时有颜色的格子上，你就不能继续使用魔法； 只有当你离开这个位置，走到一个本来就有颜色的格子上的时候，你才能继续使用这个魔法，而当你离开了这个位置（施展魔法使得变为有颜色的格子）时，这个格子恢复为无色。

现在你要从棋盘的最左上角，走到棋盘的最右下角，求花费的最少金币是多少？

## 输入格式

第一行包含两个正整数 $ m, n$，以一个空格分开，分别代表棋盘的大小，棋盘上有颜色的格子的数量。

接下来的 $ n $ 行，每行三个正整数 $ x, y, c$， 分别表示坐标为 $(x,y)$ 的格子有颜色 $ c$。

其中 $ c=1$ 代表黄色，$ c=0$ 代表红色。 相邻两个数之间用一个空格隔开。 棋盘左上角的坐标为 $(1, 1)$，右下角的坐标为 $( m, m)$。

棋盘上其余的格子都是无色。保证棋盘的左上角，也就是 $(1, 1)$ 一定是有颜色的。

## 输出格式

一个整数，表示花费的金币的最小值，如果无法到达，输出 `-1`。

## 样例

### 样例输入 #1
```
5 7
1 1 0
1 2 0
2 2 1
3 3 1
3 4 0
4 4 1
5 5 0
```
### 样例输出 #1
```
8
```
### 样例输入 #2
```
5 5
1 1 0
1 2 0
2 2 1
3 3 1
5 5 0
```
### 样例输出 #2
```
-1
```
## 提示

**样例 1 说明**

棋盘的颜色如下表格所示，其中空白的部分表示无色。

| $\color{red}\text{红}$ | $\color{red}\text{红}$ |  |  |  |
| :----------: | :----------: | :----------: | :----------: | :----------: |
|  | $\color{yellow}\text{黄}$ |  |  |  |
|  |  | $\color{yellow}\text{黄}$ | $\color{red}\text{红}$ |  |
|  |  |  | $\color{yellow}\text{黄}$ |  |
|  |  |  |  | $\color{red}\text{红}$ |


从 $(1,1)$ 开始，走到 $(1,2)$ 不花费金币。

从 $(1,2)$ 向下走到 $(2,2)$ 花费 $1$ 枚金币。

从 $(2,2)$ 施展魔法，将 $(2,3)$ 变为黄色，花费 $2$ 枚金币。

从 $(2,2)$ 走到 $(2,3)$ 不花费金币。

从 $(2,3)$ 走到 $(3,3)$ 不花费金币。

从 $(3,3)$ 走到 $(3,4)$ 花费 $1$ 枚金币。

从 $(3,4)$ 走到 $(4,4)$ 花费 $1$ 枚金币。

从 $(4,4)$ 施展魔法，将 $(4,5)$ 变为黄色，花费 $ 2$ 枚金币。

从 $(4,4)$ 走到 $(4,5)$ 不花费金币。

从 $(4,5)$ 走到 $(5,5)$ 花费 $1$ 枚金币。

共花费 $8 $ 枚金币。

**样例 2 说明**

棋盘的颜色如下表格所示，其中空白的部分表示无色。

| $\color{red}\text{红}$ | $\color{red}\text{红}$ |  |  |  |
| :----------: | :----------: | :----------: | :----------: | :----------: |
|  | $\color{yellow}\text{黄}$ |  |  |  |
|  |  | $\color{yellow}\text{黄}$ |  |  |
|  |  |  | $\color{white}\text{　}$ |  |
|  |  |  |  | $\color{red}\text{红}$ |

从 $( 1, 1)$ 走到 $( 1, 2)$，不花费金币。

从 $( 1, 2)$ 走到 $( 2, 2)$，花费 $ 1 $ 金币。

施展魔法将 $( 2, 3)$ 变为黄色，并从 $( 2, 2)$ 走到 $( 2, 3)$ 花费 $ 2$ 金币。

从 $( 2, 3)$ 走到 $( 3, 3)$ 不花费金币。

从 $( 3, 3)$ 只能施展魔法到达 $( 3, 2),( 2, 3),( 3, 4),( 4, 3)$。

而从以上四点均无法到达 $( 5, 5)$，故无法到达终点，输出$-1$。

**数据规模与约定**

对于 $30\%$ 的数据，$1 ≤ m ≤ 5, 1 ≤ n ≤ 10$。

对于 $60\%$ 的数据，$1 ≤ m ≤ 20, 1 ≤ n ≤ 200$。

对于 $100\%$ 的数据，$1 ≤ m ≤ 100, 1 ≤ n ≤ 1,000$。



---

---
title: "[NOIP 2018 普及组] 对称二叉树"
layout: "post"
diff: 普及+/提高
pid: P5018
tag: ['树形数据结构', '2018', 'NOIP 普及组', '哈希 hashing']
---
# [NOIP 2018 普及组] 对称二叉树
## 题目背景

NOIP2018 普及组 T4
## 题目描述

一棵有点权的有根树如果满足以下条件，则被轩轩称为对称二叉树： 

1.  二叉树； 
2.  将这棵树所有节点的左右子树交换，新树和原树对应位置的结构相同且点权相等。   

下图中节点内的数字为权值，节点外的 $id$ 表示节点编号。  

![](https://cdn.luogu.com.cn/upload/image_hosting/nkln7z1l.png)

现在给出一棵二叉树，希望你找出它的一棵子树，该子树为对称二叉树，且节点数最多。请输出这棵子树的节点数。   

注意：只有树根的树也是对称二叉树。本题中约定，以节点 $T$ 为子树根的一棵“子 树”指的是：节点$T$ 和它的全部后代节点构成的二叉树。 
## 输入格式

第一行一个正整数 $n$，表示给定的树的节点的数目，规定节点编号 $1 \sim n$，其中节点 $1$ 是树根。 

第二行 $n$ 个正整数，用一个空格分隔，第 $i$ 个正整数 $v_i$ 代表节点 $i$ 的权值。 

接下来 $n$ 行，每行两个正整数 $l_i, r_i$，分别表示节点 $i$ 的左右孩子的编号。如果不存在左 / 右孩子，则以 $-1$ 表示。两个数之间用一个空格隔开。 
## 输出格式

输出文件共一行，包含一个整数，表示给定的树的最大对称二叉子树的节点数。 
## 样例

### 样例输入 #1
```
2 
1 3 
2 -1 
-1 -1 

```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
10 
2 2 5 5 5 5 4 4 2 3 
9 10 
-1 -1 
-1 -1 
-1 -1 
-1 -1 
-1 2 
3 4 
5 6 
-1 -1 
7 8
```
### 样例输出 #2
```
3
```
## 提示

**样例 1 解释**

![](https://cdn.luogu.com.cn/upload/image_hosting/4lfen5aa.png)    
最大的对称二叉子树为以节点 $2$ 为树根的子树，节点数为 $1$。   

**样例 2 解释**

![](https://cdn.luogu.com.cn/upload/image_hosting/vhzzc587.png)

最大的对称二叉子树为以节点 $7$ 为树根的子树，节点数为 $3$。 

**数据规模与约定**

共 $25$ 个测试点。    

$v_i ≤ 1000$。 

- 测试点 $1 \sim 3, n ≤ 10$，保证根结点的左子树的所有节点都没有右孩子，根结点的右 子树的所有节点都没有左孩子。 
- 测试点 $4 \sim 8, n ≤ 10$。
- 测试点 $9 \sim 12, n ≤ 10^5$，保证输入是一棵“满二叉树” 。 
- 测试点 $13 \sim 16, n ≤ 10^5$，保证输入是一棵“完全二叉树”。
- 测试点 $17 \sim 20, n ≤ 10^5$，保证输入的树的点权均为 $1$。
- 测试点 $21 \sim 25, n ≤ 10^6$。

本题约定： 

层次：节点的层次从根开始定义起，根为第一层，根的孩子为第二层。树中任一节 点的层次等于其父亲节点的层次加 $1$。 
 
 树的深度：树中节点的最大层次称为树的深度。 
 
 满二叉树：设二叉树的深度为 $h$，且二叉树有 $2^h-1$ 个节点，这就是满二叉树。  

![](https://cdn.luogu.com.cn/upload/image_hosting/8tof1fxx.png)

完全二叉树：设二叉树的深度为 $h$，除第 $h$ 层外，其它各层的结点数都达到最大 个数，第 $h$ 层所有的结点都连续集中在最左边，这就是完全二叉树。  

![](https://cdn.luogu.com.cn/upload/image_hosting/ibo7js1f.png)


---

---
title: "[NOIP 2018 提高组] 货币系统"
layout: "post"
diff: 普及+/提高
pid: P5020
tag: ['动态规划 DP', '数学', '贪心', '2018', 'NOIP 提高组', '背包 DP']
---
# [NOIP 2018 提高组] 货币系统
## 题目背景

NOIP2018 提高组 D1T2
## 题目描述

在网友的国度中共有 $n$ 种不同面额的货币，第 $i$ 种货币的面额为 $a[i]$，你可以假设每一种货币都有无穷多张。为了方便，我们把货币种数为 $n$、面额数组为 $a[1..n]$ 的货币系统记作 $(n,a)$。 

在一个完善的货币系统中，每一个非负整数的金额 $x$ 都应该可以被表示出，即对每一个非负整数 $x$，都存在 $n$ 个非负整数 $t[i]$ 满足 $a[i] \times t[i]$ 的和为 $x$。然而， 在网友的国度中，货币系统可能是不完善的，即可能存在金额 $x$ 不能被该货币系统表示出。例如在货币系统 $n=3$, $a=[2,5,9]$ 中，金额 $1,3$ 就无法被表示出来。 

两个货币系统 $(n,a)$ 和 $(m,b)$ 是等价的，当且仅当对于任意非负整数 $x$，它要么均可以被两个货币系统表出，要么不能被其中任何一个表出。 

现在网友们打算简化一下货币系统。他们希望找到一个货币系统 $(m,b)$，满足 $(m,b)$ 与原来的货币系统 $(n,a)$ 等价，且 $m$ 尽可能的小。他们希望你来协助完成这个艰巨的任务：找到最小的 $m$。 
## 输入格式

输入文件的第一行包含一个整数 $T$，表示数据的组数。

接下来按照如下格式分别给出 $T$ 组数据。 每组数据的第一行包含一个正整数 $n$。接下来一行包含 $n$ 个由空格隔开的正整数 $a[i]$。
## 输出格式

输出文件共有 $T$ 行，对于每组数据，输出一行一个正整数，表示所有与 $(n,a)$ 等价的货币系统 $(m,b)$ 中，最小的 $m$。
## 样例

### 样例输入 #1
```
2 
4 
3 19 10 6 
5 
11 29 13 19 17 
```
### 样例输出 #1
```
2   
5  
```
## 提示

在第一组数据中，货币系统 $(2, [3,10])$ 和给出的货币系统 $(n, a)$ 等价，并可以验证不存在 $m < 2$ 的等价的货币系统，因此答案为 $2$。 在第二组数据中，可以验证不存在 $m < n$ 的等价的货币系统，因此答案为 $5$。 

【数据范围与约定】

![](https://cdn.luogu.com.cn/upload/pic/43160.png)  

对于 $100\%$ 的数据，满足 $1 ≤ T ≤ 20, n,a[i] ≥ 1$。 


---

---
title: "[NOI2001] 方程的解数"
layout: "post"
diff: 普及+/提高
pid: P5691
tag: ['数学', '2001', 'NOI', '折半搜索 meet in the middle']
---
# [NOI2001] 方程的解数
## 题目描述

已知一个 $n$ 元高次方程：         
$$\sum\limits_{i=1}^n k_ix_i^{p_i} = 0$$
其中：$x_1, x_2, \dots ,x_n$ 是未知数，$k_1,k_2, \dots ,k_n$ 是系数，$p_1,p_2,…p_n$ 是指数。且方程中的所有数均为整数。

假设未知数 $x_i \in [1,m] \space ( i \in [1,n])$，求这个方程的整数解的个数。
## 输入格式

第一行一个正整数 $n$，表示未知数个数。  
第二行一个正整数 $m$。
接下来 $n$ 行，每行两个整数 $k_i,p_i$。
## 输出格式

输出一行一个整数，表示方程解的个数。
## 样例

### 样例输入 #1
```
3
150
1 2
-1 2
1 2
```
### 样例输出 #1
```
178
```
## 提示

**【数据范围】**

对于 $100\%$ 的数据，$1\le n \le 6$，$1\le m \le 150$，且
$$\sum\limits_{i=1}^n |k_im^{p_i}| < 2^{31}$$  
答案不超过 $2^{31}-1$，$p_i \in \mathbb N^*$。


---

---
title: "[NOI2002] 机器人M号"
layout: "post"
diff: 普及+/提高
pid: P5746
tag: ['2002', 'NOI', 'Special Judge']
---
# [NOI2002] 机器人M号
## 题目描述

3030 年，Macsy 正在火星部署一批机器人。

第 $1$ 秒，他把机器人 $1$ 号运到了火星，机器人 $1$ 号可以制造其他的机器人。

第 $2$ 秒，机器人 $1$ 号造出了第一个机器人——机器人 $2$ 号。

第 $3$ 秒，机器人 $1$ 号造出了另一个机器人——机器人 $3$ 号。

之后每一秒，机器人 $1$ 号都可以造出一个新的机器人。第 $m$ 秒造出的机器人编号为 $m$。我们可以称它为机器人 $m$ 号，或者 $m$ 号机器人。

机器人造出来后，马上开始工作。$m$ 号机器人，每 $m$ 秒会休息一次。比如 $3$ 号机器人，会在第 $6$，$9$，$12$，$\ldots$ 秒休息，而其它时间都在工作。

机器人休息时，它的记忆将会被移植到当时出生的机器人的脑中。比如 $6$ 号机器人出生时，$2$，$3$ 号机器人正在休息，因此，$6$ 号机器人会收到第 $2$，$3$ 号机器人的记忆副本。我们称第 $2$，$3$ 号机器人是 $6$ 号机器人的老师。

如果两个机器人没有师徒关系，且没有共同的老师，则称这两个机器人的知识是互相独立的。**注意：$1$ 号机器人与其他所有机器人的知识独立（因为只有 $1$ 号才会造机器人），它也不是任何机器人的老师。**

一个机器人的**独立数**，是指所有编号比它小且与它知识互相独立的机器人的个数。比如 $1$ 号机器人的独立数为 $0$，$2$ 号机器人的独立数为 $1$（$1$ 号机器人与它知识互相独立），$6$ 号机器人的独立数为 $2$（$1$，$5$ 号机器人与它知识互相独立，$2$，$3$ 号机器人都是它的老师，而 $4$ 号机器人与它有共同的老师——$2$ 号机器人）。

新造出来的机器人有 $3$ 种不同的职业。对于编号为 $m$ 的机器人，如果能把 $m$ 分解成偶数个不同奇素数的积，则它是政客，例如编号 $15$；否则，如果 $m$ 本身就是奇素数或者能把 $m$ 分解成奇数个不同奇素数的积，则它是军人，例如编号 $3$，编号 $165$。其它编号的机器人都是学者，例如编号 $2$, 编号 $6$, 编号 $9$。

第 $m$ 秒诞生的机器人 $m$ 号，想知道它和它的老师中，所有政客的独立数之和，所有军人的独立数之和，以及所有学者的独立数之和。可机器人 $m$ 号忙于工作没时间计算，你能够帮助它吗？

为了方便你的计算，Macsy 已经帮你做了 $m$ 的素因子分解。为了输出方便，只要求输出总和除以 $10000$ 的余数。
## 输入格式

输入的第一行是一个正整数 $k$，$k$ 是 $m$ 的不同的素因子个数。

以下 $k$ 行，每行两个整数，$p_i$, $e_i$,表示 $m$ 的第 $i$ 个素因子和它的指数 $(i=1,2,\ldots,k)$。$p_1,p_2,\ldots,p_k$ 是不同的素数，$\prod_{i=1}^kp_i^{e_i}$。所有素因子按照从小到大排列，即 $p_1<p_2<\ldots<p_k$。
## 输出格式

输出包括三行。

- 第一行是机器人 $m$ 号和它的老师中，所有政客的独立数之和除以 $10000$ 的余数。
- 第二行是机器人 $m$ 号和它的老师中，所有军人的独立数之和除以 $10000$ 的余数。
- 第三行是机器人 $m$ 号和它的老师中，所有学者的独立数之和除以 $10000$ 的余数。
## 样例

### 样例输入 #1
```
3
2 1
3 2
5 1
```
### 样例输出 #1
```
8
6
75
```
## 提示

#### 样例解释
$m = 2\times 3^2\times 5=90$。$90$ 号机器人有 $10$ 个老师，加上它自己共 $11$ 个。其中政客只有 $15$ 号；军人有 $3$ 号和 $5$ 号；学者有 $8$ 个，它们的编号分别是：$2,6,9,10,18,30,45,90$。

#### 数据范围
对于全部的数据，$1\le k\le 1000$，$2\le p_i<10,000$，$1\le e_i\le 1,000,000$。

#### 评分规则

你在一个测试点的得分与你正确解决的问题数 $x$ 有关。

请注意：**对每一行，即使不会解决该问题，也请在该行输出一个数字，否则 checker 将无法正确评分。**

| $x$  | 得分 |
| :--: | :--: |
|  3   |  10  |
|  2   |  7   |
|  1   |  4   |
|  0   |  0   |


---

---
title: "[NOI1999] 01串"
layout: "post"
diff: 普及+/提高
pid: P5751
tag: ['1999', 'NOI']
---
# [NOI1999] 01串
## 题目描述

给定 $7$ 个整数 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $，要求设计一个01串$ S=s_1 s_2 … s_i … s_N $，满足：
1.	$ s_i = 0 $ 或 $ s_i = 1 $， $ 1 \leq i \leq N $；
2.	对于 $S$ 的任何连续的长度为 $L_0$ 的子串 $s_j s_{j+1} … s_{j+L0-1}  $ ($1 \leq j \leq N-L_0+1 $) ， $0$ 的个数大于等于 $A_0$ 且小于等于 $B_0$ ;
3.	对于 $S$ 的任何连续的长度为 $L_1$ 的子串 $s_j s_{j+1} …  s_{j+L1-1} $ ($ 1 \leq  j  \leq N-L_1+1 $) ， $1$ 的个数大于等于 $A_1$ 且小于等于 $B_1$ ;

例如， $ N = 6 ,  A_0 = 1 ,  B_0 = 2  ,  L_0 = 3 ,  A_1 = 1 ,  B_1 = 1 ,  L_1 = 2 $，则存在一个满足上述所有条件的 $01$ 串 $ S = 010101 $ 。

## 输入格式

仅一行，有 $7$ 个整数，依次表示 $N , A_0 , B_0 , L_0 , A_1 , B_1 , L_1 $ （$3 \leq N \leq 1000$，$1 \leq  A_0 \leq B_0 \leq L_0 \leq N$，$1 \leq A_1 \leq B_1 \leq L_1 \leq N$），相邻两个整数之间用一个空格分隔。
## 输出格式

仅一行，若不存在满足所有条件的 $01$ 串，则输出一个整数 `-1`，否则输出满足所有条件的 $01$ 串中 $1$ 的个数的最大值。
## 样例

### 样例输入 #1
```
6 1 2 3 1 1 2

```
### 样例输出 #1
```
3

```


---

---
title: "[NOI1999] 棋盘分割"
layout: "post"
diff: 普及+/提高
pid: P5752
tag: ['1999', 'NOI', 'Special Judge']
---
# [NOI1999] 棋盘分割
## 题目描述

将一个 8 $\times$ 8 的棋盘进行如下分割：将原棋盘割下一块矩形棋盘并使剩下部分也是矩形，再将剩下的部分继续如此分割，这样割了 $(n-1)$ 次后，连同最后剩下的矩形棋盘共有 $n$ 块矩形棋盘。 (每次切割都只能沿着棋盘格子的边进行)


![](https://cdn.luogu.com.cn/upload/image_hosting/ivf3ggl3.png)


原棋盘上每一格有一个分值，一块矩形棋盘的总分为其所含各格分值之和。现在需要把棋盘按上述规则分割成 $n$ 块矩形棋盘，并使各矩形棋盘总分的均方差最小。


均方差 $\sigma = \sqrt{ \frac{ \sum_{i=1}^n (x_i - \bar x)^2 } { n }}$                ，其中平均值 $\bar x = \frac{\sum_{i=1}^n x_i}{n}$ ,  $x_i$ 为第 $i$ 块矩形棋盘的分。


请编程对给出的棋盘及 $n$ ，求出 $\sigma$ 的最小值。

## 输入格式

第一行为一个整数 $n$ ($ 1 < n< 15 $)。


第二行至第九行每行为 $8$ 个小于 $100$ 的非负整数，表示棋盘上相应格子的分值。每行相邻两数之间用一个空格分隔。

## 输出格式

仅一个数，为 $\sigma$ （四舍五入精确到小数点后三位）。
## 样例

### 样例输入 #1
```
3
1 1 1 1 1 1 1 3
1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 0
1 1 1 1 1 1 0 3

```
### 样例输出 #1
```
1.633

```


---

---
title: "[NOI2000] 程序分析器"
layout: "post"
diff: 普及+/提高
pid: P5756
tag: ['2000', 'NOI']
---
# [NOI2000] 程序分析器
## 题目描述

Tiny Basm语言(简称为TB语言)的巴科斯-瑙尔范式(BNF)为：

![](https://cdn.luogu.com.cn/upload/image_hosting/37ipxplt.png)

错误语句示例(在输入文件中不会出现任何错误语句)：

- `10A+1.5`（不符合累加语句的定义，所加的不是整数）
- `20A?`（不符合输出语句的定义，多加了一个空格）
- `30IFA=BGO10`（不符合条件语句的定义，不应变量=变量）

$\\$

TB程序的执行：
-	程序从行号最小的一条语句开始执行，在未遇到条件语句时按行号由小至大顺序执行。
-	所有变量在程序执行前被自动初始化为 $0$。
-	累加语句将语句中变量的值加上语句中的整数送回该变量。
-	输出语句将语句中变量的值在监视器上显示出来。
-	执行条件语句时，当且仅当该语句中的变量与紧跟在等号后面的整数值相等，后面的转移语句才被执行。该语句中的所有整数值至多为 $4$ 位。
-	转移语句被执行后，程序将转去执行 $\tt GO$ 后面指定的行号的语句。
-	当程序执行结束语句后，结束整个程序的执行。
-	假设该系统能处理任意大小的整数，而不会发生溢出。


请编程，对于给定的 TB 语言程序 $P$，求该程序所执行的语句数（执行条件语句不论是否成功转移，仅记为执行一条语句）。
## 输入格式

- 为一个TB语言程序 $P$ ，语句数不超过 $100$ 行。
- $P$ 中每条语句的长度不超过 $20$ 个字符。
- $P$ 中转移语句里 $\tt GO$ 后面的行号一定有对应的语句。
- $P$ 中可能有多个不同行号的结束语句。
- $P$ 中行号最大的语句一定是结束语句。
- $P$ 中的行号都不大于 $3000$。
- 输入文件不一定是按行号递增顺序给出 $P$ 的。

## 输出格式

-	有且仅有一行：

如果程序能够正常结束，输出该程序所执行的语句数；

如果程序不能正常结束，输出 $-1$。

## 样例

### 样例输入 #1
```
10 A+1
20 IF A=5 GO 60
60 END
30 A+2
40 A?
50 GO 20

```
### 样例输出 #1
```
11

```
## 提示

**样例说明**

执行语句行号按顺序为 $10→20→30→40→50→20→30→40→50→20→60$。

共 $11$ 条语句被执行。



---

---
title: "[NOI1997] 积木游戏"
layout: "post"
diff: 普及+/提高
pid: P5760
tag: ['1997', 'NOI']
---
# [NOI1997] 积木游戏
## 题目描述

SERCOI 最近设计了一种积木游戏。每个游戏者有 $N$ 块编号依次为 $1 ，2，…，N$ 的长方体积木。对于每块积木,它的三条不同的边分别称为"a 边"、"b 边"和"c 边"，如下图所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/jfd5li1k.png)

游戏规则如下：
1. 从 $N$ 块积木中选出若干块，并将它们分成 $M$ （$ 1 \le M \le N $） 堆，称为第 $1$ 堆，第 $2$ 堆…，第 $M$ 堆。每堆至少有 $1$ 块积木，并且第 $K$ 堆中任意一块积木的编号要大于第 $K+1$ 堆中任意一块积木的编号($ 2 \le K \le M $)。

2.  对于每一堆积木,游戏者要将它们垂直摞成一根柱子,并要求满足下面两个条件：

$\qquad$ 1)除最顶上的一块积木外，任意一块积木的上表面同且仅同另一块积木的下表面接触，并且要求下面的积木的上表面能包含上面的积木的下表面，也就是说，要求下面的积木的上表面的两对边的长度分别大于等于上面的积木的两对边的长度。

$\qquad$ 2)对于任意两块上下表面相接触的积木，下面的积木的编号要小于上面的积木的编号。

最后，根据每人所摞成的 $M$ 根柱子的高度之和来决出胜负。

请你编一程序，寻找一种摞积木的方案，使得你所摞成的 $M$ 根柱子的高度之和最大。

## 输入格式

一行有两个正整数 $N$ 和 $M$ （$ 1 \le M \le N \le 100 $），分别表
示积木总数和要求摞成的柱子数。这两个数之间用一个空格符隔开。

接下来 $N$ 行依次是编号从 $1$ 到 $N$ 的 $N$ 个积木的尺寸，每行有三个 $1$ 至 $1000$ 之间的整数，分别表示该积木 a 边, b 边和  c 边的长度。
同一行相邻两个数之间用一个空格符隔开。

## 输出格式

只有一行，为一个整数，表示 $M$ 根柱子的高度之和的最大值。
## 样例

### 样例输入 #1
```
4 2
10 5 5
8 7 7
2 2 2
6 6 6

```
### 样例输出 #1
```
24

```


---

---
title: "[NOI1999] 内存分配"
layout: "post"
diff: 普及+/提高
pid: P5763
tag: ['1999', 'NOI']
---
# [NOI1999] 内存分配
## 题目描述

内存是计算机重要的资源之一，程序运行的过程中必须对内存进行分配。

经典的内存分配过程是这样进行的：
1. 内存以内存单元为基本单位，每个内存单元用一个固定的整数作为标识，称为地址。地址从 $0$ 开始连续排列，地址相邻的内存单元被认为是逻辑上连续的。我们把从地址 $i$ 开始的 $s$ 个连续的内存单元称为首地址为 $i$ 长度为 $s$ 的地址片。 
2. 运行过程中有若干进程需要占用内存，对于每个进程有一个申请时刻 $T$ ，需要内存单元数 $M$ 及运行时间 $P$。在运行时间 $P$ 内（即 $T$ 时刻开始，$T+P$ 时刻结束），这 $M$ 个被占用的内存单元不能再被其他进程使用。 
3. 假设在 $T$ 时刻有一个进程申请 $M$ 个单元，且运行时间为 $P$ ，则：

$\qquad$ 1)	若 $T$ 时刻内存中存在长度为 $M$ 的空闲地址片，则系统将这 $M$ 个空闲单元分配给该进程。若存在多个长度为 $M$ 个空闲地址片，则系统将首地址最小的那个空闲地址片分配给该进程。 

$\qquad$ 2)    如果 $T$ 时刻不存在长度为 $M$ 的空闲地址片，则该进程被放入一个等待队列。对于处于等待队列队头的进程，只要在任一时刻，存在长度为 $M$ 的空闲地址片，系统马上将该进程取出队列，并为它分配内存单元。注意，在进行内存分配处理过程中，处于等待队列队头的进程的处理优先级最高，队列中的其它进程不能先于队头进程被处理。 

现在给出一系列描述进程的数据，请编写一程序模拟系统分配内存的过程。

## 输入格式

第一行是一个数 $N$ ，表示总内存单元数（即地址范围从 $0$ 到 $N-1$ ）
从第二行开始每行描述一个进程的三个整数 $T、M、P$ （$ M \le N$）。

**数据已按 $T$ 从小到大排序。**

最后一行用`000`表示结束。

输入文件最多 $10000$ 行，且所有数据都小于 $10^9$。

输入文件中同一行相邻两项之间用一个或多个空格隔开。

## 输出格式

共两行。

第一行是全部进程都运行完毕的时刻。

第二行是被放入过等待队列的进程总数。

## 样例

### 样例输入 #1
```
10
1 3 10
2 4 3
3 4 4
4 1 4
5 3 4
0 0 0

```
### 样例输出 #1
```
12
2

```


---

---
title: "奖品"
layout: "post"
diff: 普及+/提高
pid: P5878
tag: ['NOI 导刊']
---
# 奖品
## 题目描述

学校刚开完运动会，准备为尽可能多的同学评奖，并为每个人颁发一份奖品。一份奖品包括 $N$ 个物品，如：$5$ 支铅笔、$10$ 本练习薄等。每份奖品完全一样。虽然学校的保管室里还有一些办去年运动会后剩余的物品。在商店里，每种物品都有很多，但是，只有两种包装：大盒或小盒，并且不拆开买。

现在的问题是，充分利用这 $M$ 元钱，最多可准备多少分这样的奖品？

## 输入格式

第一行两个整数：$N,M$。

下面有 $N$ 行，每行有六个正整数 $x,y,sm,pm,sv,pv$，分别表示一种物品的相关数据：

* $x$，一份奖品中，这种物品需要的件数。
* $y$，这种物品去年剩余的件数。
* $sm$，这种物品小包装的件数。
* $pm$，这种物品小包装的一盒价格。
* $sv$，这种物品大包装里的件数。
* $pv$，这种物品大包装的一盒价格。

## 输出格式

一个整数，最多可准备的礼品份数。
## 样例

### 样例输入 #1
```
2 100
10 8 10 10 13 11
12 20 6 10 17 24

```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
3 65
10 5 7 10 13 14
10 5 8 11 14 15
10 5 9 12 15 16

```
### 样例输出 #2
```
2
```
## 提示

对于全部的数据，满足：

$1 \le N \le 100$，$1 \le M \le 10^5$。

$10 \le x, pm \le 100$，$1 \le y, sm \le 100$，$sm < sv \le 100$，$pm<pv\le 100$。


---

---
title: "放棋子"
layout: "post"
diff: 普及+/提高
pid: P5879
tag: ['NOI 导刊']
---
# 放棋子
## 题目描述

小虎刚刚上了幼儿园，老师让他做一个家庭作业：首先画 $3$ 行格子，第一行有三个格子，第二行有 $2$ 个格子，第三行有 $1$ 个格子。每行的格子从左到右可以放棋子，但要求除第一行外，每行放的棋子数不能超过上一行的棋子。第一行的棋子数不能为 $0$，但剩下行可以为空。玩了一会儿，小虎对哥哥大虎说：”这个作业有很多种摆放法，我想找到，但我不知道有多少种方案，你能帮助我吗？”

大虎是学校信息学集训队的，立刻想到用计算机来解决这个问题，并很快有了解答：$13$。

第二天他把问题拿到学校，并说如果第一行有 $N$ 个格子，第二行有 $N-1$ 个格子，……，第 $N$ 行有 $1$ 个格子，怎么办？现在请你一块来帮助他解决这个难题。
## 输入格式

仅一行，一个正整数 $N$。
## 输出格式

一行，方案总数。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
3
```
### 样例输出 #2
```
13
```
## 提示

样例 1 说明：$N=2$ 时，有如下 $4$ 种摆放棋子法（`*` 表示棋子，`_` 表示空格）：
|  方案数| 1 | 2 | 3 | 4 |
| :----------- | :----------- | :----------- | :----------- | :----------- |
| **第一行** | `*_` | `**` | `*_` | `**` |
| **第二行** | `_` | `_` | `*` | `*` |


对于 $30\%$ 数据：$1\le N\le 12$。

对于 $50\%$ 数据：$1\le N\le 30$。

对于 $100\%$ 数据：$1\le N\le 100$。



---

---
title: "[NOIP 2004 提高组] 合并果子 加强版"
layout: "post"
diff: 普及+/提高
pid: P6033
tag: ['贪心', '2004', 'NOIP 提高组', 'O2优化', '排序', '队列']
---
# [NOIP 2004 提高组] 合并果子 加强版
## 题目背景

本题除【数据范围与约定】外与 [P1090](https://www.luogu.com.cn/problem/P1090) **完  全  一  致**。
## 题目描述

在一个果园里，多多已经将所有的果子打了下来，而且按果子的不同种类分成了不同的堆。多多决定把所有的果子合成一堆。

每一次合并，多多可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过 $(n - 1)$ 次合并之后， 就只剩下一堆了。多多在合并果子时总共消耗的体力等于每次合并所耗体力之和。

因为还要花大力气把这些果子搬回家，所以多多在合并果子时要尽可能地节省体力。假定每个果子重量都为 $1$，并且已知果子的种类数和每种果子的数目，你的任务是设计出合并的次序方案，使多多耗费的体力最少，并输出这个最小的体力耗费值。

例如有 $3$ 堆果子，数目依次为 $1,~2,~9$。可以先将 $1$、$2$ 堆合并，新堆数目为 $3$，耗费体力为 $3$。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为 $12$，耗费体力为 $12$。所以多多总共耗费体力为 $3+12=15$。可以证明 $15$ 为最小的体力耗费值。

## 输入格式

输入的第一行是一个整数 $n$，代表果子的堆数。\
输入的第二行有 $n$ 个用空格隔开的整数，第 $i$ 个整数代表第 $i$ 堆果子的个数 $a_i$。
## 输出格式

输出一行一个整数，表示最小耗费的体力值。
## 样例

### 样例输入 #1
```
3 
1 2 9 

```
### 样例输出 #1
```
15

```
## 提示

**【数据规模与约定】**

**本题采用多测试点捆绑测试，共有四个子任务**。

- Subtask 1（10 points）：$1 \leq n \leq 8$。
- Subtask 2（20 points）：$1 \leq n \leq 10^3$。
- Subtask 3（30 points）：$1 \leq n \leq 10^5$。
- Subtask 4（40 points）：$1 \leq n \leq 10^7$。

对于全部的测试点，保证 $1 \leq a_i \leq 10^5$。

**【提示】**

- 请注意常数因子对程序效率造成的影响。
- 请使用类型合适的变量来存储本题的结果。
- 本题输入规模较大，请注意数据读入对程序效率造成的影响。




---

---
title: "奶牛排队"
layout: "post"
diff: 普及+/提高
pid: P6510
tag: ['单调队列', 'NOI 导刊', 'O2优化', '分治', '栈']
---
# 奶牛排队
## 题目描述

奶牛在熊大妈的带领下排成了一条直队。

显然，不同的奶牛身高不一定相同……

现在，奶牛们想知道，如果找出一些连续的奶牛，要求最左边的奶牛 $A$ 是最矮的，最右边的 $B$ 是最高的，且 $B$ 高于 $A$ 奶牛。中间如果存在奶牛，则身高不能和 $A,B$ 奶牛相同。问这样的奶牛最多会有多少头？

从左到右给出奶牛的身高，请告诉它们符合条件的最多的奶牛数（答案可能是 $0,2$，但不会是 $1$）。
## 输入格式

第一行一个正整数 $N$，表示奶牛的头数。

接下来 $N$ 行，每行一个正整数，从上到下表示从左到右奶牛的身高 $h_i$。

## 输出格式

一行一个整数，表示最多奶牛数。
## 样例

### 样例输入 #1
```
5
1
2
3
4
1
```
### 样例输出 #1
```
4
```
## 提示

#### 样例解释

取第 $1$ 头到第 $4$ 头奶牛，满足条件且为最多。

#### 数据范围

对于全部的数据，满足 $2 \le N \le 10^5$，$1 \le h_i <2^{31}$。


---

---
title: "[NOIP2020] 排水系统"
layout: "post"
diff: 普及+/提高
pid: P7113
tag: ['图论', '高精度', '2020', 'NOIP 提高组', '拓扑排序']
---
# [NOIP2020] 排水系统
## 题目描述

对于一个城市来说，排水系统是极其重要的一个部分。

有一天，小 C 拿到了某座城市排水系统的设计图。排水系统由 $n$ 个排水结点（它们从 $1 \sim n$ 编号）和若干个单向排水管道构成。每一个排水结点有若干个管道用于汇集其他排水结点的污水（简称为该结点的汇集管道），也有若干个管道向其他的排水结点排出污水（简称为该结点的排出管道）。

排水系统的结点中有 $m$ 个污水接收口，它们的编号分别为 $1, 2, \ldots , m$，污水只能从这些接收口流入排水系统，并且这些结点没有汇集管道。排水系统中还有若干个最终排水口，它们将污水运送到污水处理厂，没有排出管道的结点便可视为一个最终排水口。

现在各个污水接收口分别都接收了 $1$ 吨污水，污水进入每个结点后，会均等地从当前结点的每一个排出管道流向其他排水结点，而最终排水口将把污水排出系统。

现在小 C 想知道，在该城市的排水系统中，每个最终排水口会排出多少污水。该城市的排水系统设计科学，管道不会形成回路，即不会发生污水形成环流的情况。
## 输入格式

第一个两个用单个空格分隔的整数 $n, m$。分别表示排水结点数与接收口数量。  
接下来 $n$ 行，第 $i$ 行用于描述结点 $i$ 的所有排出管道。其中每行第一个整数 $d_i$ 表示其排出管道的数量，接下来 $d_i$ 个用单个空格分隔的整数 $a_1, a_2, \ldots , a_{d_i}$ 依次表示管道的目标排水结点。  
保证不会出现两条起始结点与目标结点均相同的管道。
## 输出格式

输出若干行，按照编号从小到大的顺序，给出每个最终排水口排出的污水体积。其中体积使用分数形式进行输出，即每行输出两个用单个空格分隔的整数 $p$，$q$，表示排出的污水体积为 $\frac{p}{q}$。要求 $p$ 与 $q$ 互素，$q = 1$ 时也需要输出 $q$。
## 样例

### 样例输入 #1
```
5 1
3 2 3 5
2 4 5
2 5 4
0
0

```
### 样例输出 #1
```
1 3
2 3

```
### 样例输入 #2
```
见附件中的 water/water2.in
```
### 样例输出 #2
```
见附件中的 water/water2.ans
```
### 样例输入 #3
```
见附件中的 water/water3.in
```
### 样例输出 #3
```
见附件中的 water/water3.ans
```
## 提示

**【样例 #1 解释】**

$1$ 号结点是接收口，$4, 5$ 号结点没有排出管道，因此是最终排水口。  
$1$ 吨污水流入 $1$ 号结点后，均等地流向 $2, 3, 5$ 号结点，三个结点各流入 $\frac{1}{3}$ 吨污水。  
$2$ 号结点流入的 $\frac{1}{3}$ 吨污水将均等地流向 $4, 5$ 号结点，两结点各流入 $\frac{1}{6}$ 吨污水。  
$3$ 号结点流入的 $\frac{1}{3}$ 吨污水将均等地流向 $4, 5$ 号结点，两结点各流入 $\frac{1}{6}$ 吨污水。  
最终，$4$ 号结点排出 $\frac{1}{6} + \frac{1}{6} = \frac{1}{3}$ 吨污水，$5$ 号结点排出 $\frac{1}{3} + \frac{1}{6} + \frac{1}{6} = \frac{2}{3}$ 吨污水。

**【数据范围】**

| 测试点编号 | $n \le$ | $m \le$ |
|:-:|:-:|:-:|
| $1 \sim 3$ | $10$ | $1$ |
| $4 \sim 6$ | ${10}^3$ | $1$ |
| $7 \sim 8$ | ${10}^5$ | $1$ |
| $9 \sim 10$ | ${10}^5$ | $10$ |

对于全部的测试点，保证 $1 \le n \le {10}^5$，$1 \le m \le 10$，$0 \le d_i \le 5$。

数据保证，污水在从一个接收口流向一个最终排水口的过程中，不会经过超过 $10$ 个中间排水结点（即接收口和最终排水口不算在内）。


---

---
title: "[NOI Online 2021 提高组] 积木小赛"
layout: "post"
diff: 普及+/提高
pid: P7469
tag: ['字符串', '2021', '哈希 hashing', 'NOI Online']
---
# [NOI Online 2021 提高组] 积木小赛
## 题目描述

Alice 和 Bob 最近热衷于玩一个游戏——积木小赛。

Alice 和 Bob 初始时各有 $n$ 块积木从左至右排成一排，每块积木都被标上了一个英文小写字母。

Alice 可以从自己的积木中丢掉任意多块（也可以不丢）；Bob 可以从自己的积木中丢掉最左边的一段连续的积木和最右边的一段连续的积木（也可以有一边不丢或者两边都不丢）。两人都不能丢掉自己所有的积木。然后 Alice 和 Bob 会分别将自己剩下的积木按原来的顺序重新排成一排。

Alice 和 Bob 都忙着去玩游戏了，于是想请你帮他们算一下，有多少种不同的情况下他们最后剩下的两排积木是相同的。

两排积木相同，当且仅当这两排积木块数相同且每一个位置上的字母都对应相同。

两种情况不同，当且仅当 Alice（或者 Bob）剩下的积木在两种情况中不同。
## 输入格式

第一行一个正整数 $n$，表示积木的块数。

第二行一个长度为 $n$ 的小写字母串 $s$，表示 Alice 初始的那一排积木，其中第 $i$ 个字母 $s_i$ 表示第 $i$ 块积木上的字母。

第三行一个长度为 $n$ 的小写字母串 $t$，表示 Bob 初始的那一排积木，其中第 $i$ 个字母 $t_i$ 表示第 $i$ 块积木上的字母。
## 输出格式

一行一个非负整数表示答案。
## 样例

### 样例输入 #1
```
5
bcabc
bbcca
```
### 样例输出 #1
```
9
```
### 样例输入 #2
```
20
egebejbhcfabgegjgiig
edfbhhighajibcgfecef
```
### 样例输出 #2
```
34
```
## 提示

对于所有测试点：$1\le n \le 3000$，$s$ 与 $t$ 中只包含英文小写字母。

测试点 $1$ 满足：$n\le3000$，$s$ 与 $t$ 中只包含同一种字母。

测试点 $2,3,4$ 满足：$n\le100$。

测试点 $5,6,7$ 满足：$n\le500$。

测试点 $8,9,10$ 满足：$n\le3000$。

感谢 [w33z8kqrqk8zzzx33](https://www.luogu.com.cn/user/220037) 提供测试数据。


---

---
title: "[NOIP2022] 种花"
layout: "post"
diff: 普及+/提高
pid: P8865
tag: ['2022', 'NOIP 提高组', 'O2优化', '枚举', '前缀和']
---
# [NOIP2022] 种花
## 题目描述

小 C 决定在他的花园里种出 $\texttt{CCF}$ 字样的图案，因此他想知道 $\texttt C$ 和 $\texttt F$ 两个字母各自有多少种种花的方案；不幸的是，花园中有一些土坑，这些位置无法种花，因此他希望你能帮助他解决这个问题。

花园可以看作有 $n\times m$ 个位置的网格图，从上到下分别为第 $1$ 到第 $n$ 行，从左到右分别为第 $1$ 列到第 $m$ 列，其中每个位置有可能是土坑，也有可能不是，可以用 $a_{i,j} = 1$ 表示第 $i$ 行第 $j$ 列这个位置有土坑，否则用 $a_{i,j} = 0$ 表示这个位置没土坑。

一种种花方案被称为 $\texttt{C-}$ **形**的，如果存在 $x_1, x_2 \in [1, n]$，以及 $y_0, y_1, y_2 \in [1, m]$，满足 $x_1 + 1 < x_2$，并且 $y_0 < y_1, y_2 \leq m$，使得第 $x_1$ **行**的第 $y_0$ 到第 $y_1$ **列**、第 $x_2$ **行**的第 $y_0$ 到第 $y_2$ **列**以及第 $y_0$ **列**的第 $x_1$ 到第 $x_2$ **行**都**不为土坑**，且只在上述这些位置上种花。

一种种花方案被称为 $\texttt{F-}$ **形**的，如果存在 $x_1, x_2, x_3 \in [1, n]$，以及 $y_0, y_1, y_2 \in [1, m]$，满足 $x_1 + 1 < x_2 < x_3$，并且 $y_0 < y_1, y_2 \leq m$，使得第 $x_1$ **行**的第 $y_0$ 到第 $y_1$ **列**、第 $x_2$ **行**的第 $y_0$ 到第 $y_2$ **列**以及第 $y_0$ **列**的第 $x_1$ 到第 $x_3$ **行**都**不为土坑**，且只在上述这些位置上种花。

样例一解释中给出了 $\texttt{C-}$ 形和 $\texttt{F-}$ 形种花方案的图案示例。

现在小 C 想知道，给定 $n, m$ 以及表示每个位置是否为土坑的值 $\{a_{i,j}\}$，$\texttt{C-}$ 形和 $\texttt{F-}$ 形种花方案分别有多少种可能？由于答案可能非常之大，你只需要输出其对 $998244353$ 取模的结果即可，具体输出结果请看输出格式部分。
## 输入格式

第一行包含两个整数 $T, id$，分别表示数据组数和测试点编号。如果数据为样例则保证 $id = 0$。

接下来一共 $T$ 组数据，在每组数据中：

第一行包含四个整数 $n, m, c, f$，其中 $n, m$ 分别表示花园的行数、列数，对于 $c, f$ 的含义见输出格式部分。

接下来 $n$ 行，每行包含一个长度为 $m$ 且仅包含 $0$ 和 $1$ 的字符串，其中第 $i$ 个串的第 $j$ 个字符表示 $a_{i,j}$，即花园里的第 $i$ 行第 $j$ 列是不是一个土坑。
## 输出格式

设花园中 $\texttt{C-}$ 形和 $\texttt{F-}$ 形的种花方案分别有 $V_C$ 和 $V_F$ 种，则你需要对每一组数据输出一行用一个空格隔开的两个非负整数，分别表示 $(c \times V_C) \bmod 998244353$，$(f \times V_F ) \bmod 998244353$ ，其中 $a \bmod P$ 表示 $a$ 对 $P$ 取模后的结果。
## 样例

### 样例输入 #1
```
1 0
4 3 1 1
001
010
000
000
```
### 样例输出 #1
```
4 2
```
## 提示

**【样例 1 解释】**

四个 $\texttt{C-}$ 形种花方案为：

```plain
**1 **1 **1 **1
*10 *10 *10 *10
**0 *** *00 *00
000 000 **0 ***
```

其中 $\texttt*$ 表示在这个位置种花。注意 $\texttt C$ 的两横可以不一样长。

类似的，两个 $\texttt{F-}$ 形种花方案为：

```plain
**1 **1
*10 *10
**0 ***
*00 *00
```

**【样例 2】**

见附件下的 $\texttt{plant/plant2.in}$ 与 $\texttt{plant/plant2.ans}$。

**【样例 3】**

见附件下的 $\texttt{plant/plant3.in}$ 与 $\texttt{plant/plant3.ans}$。

**【数据范围】**

对于所有数据，保证：$1 \leq T \leq 5$，$1 \leq n, m \leq 10^3$，$0 \leq c, f \leq 1$，$a_{i,j} \in \{0, 1\}$。

| 测试点编号 | $n$ | $m$ | $c=$ | $f=$ | 特殊性质 | 测试点分值 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | $\leq 1000$ | $\leq 1000$ | $0$ | $0$ | 无 | $1$ |
| $2$ | $=3$ | $=2$ | $1$ | $1$ | 无 | $2$ |
| $3$ | $=4$ | $=2$ | $1$ | $1$ | 无 | $3$ |
| $4$ | $\leq 1000$ | $=2$ | $1$ | $1$ | 无 | $4$ |
| $5$ | $\leq 1000$ | $\leq 1000$ | $1$ | $1$ | A | $4$ |
| $6$ | $\leq 1000$ | $\leq 1000$ | $1$ | $1$ | B | $6$ |
| $7$ | $\leq 10$ | $\leq 10$ | $1$ | $1$ | 无 | $10$ |
| $8$ | $\leq 20$ | $\leq 20$ | $1$ | $1$ | 无 | $6$ |
| $9$ | $\leq 30$ | $\leq 30$ | $1$ | $1$ | 无 | $6$ |
| $10$ | $\leq 50$ | $\leq 50$ | $1$ | $1$ | 无 | $8$ |
| $11$ | $\leq 100$ | $\leq 100$ | $1$ | $1$ | 无 | $10$ |
| $12$ | $\leq 200$ | $\leq 200$ | $1$ | $1$ | 无 | $6$ |
| $13$ | $\leq 300$ | $\leq 300$ | $1$ | $1$ | 无 | $6$ |
| $14$ | $\leq 500$ | $\leq 500$ | $1$ | $1$ | 无 | $8$ |
| $15$ | $\leq 1000$ | $\leq 1000$ | $1$ | $0$ | 无 | $6$ |
| $16$ | $\leq 1000$ | $\leq 1000$ | $1$ | $1$ | 无 | $14$ |

特殊性质 A：$\forall 1 \leq i \leq n, 1 \leq j \leq \left\lfloor \frac{m}{3} \right\rfloor$，$a_{i, 3 j} = 1$；

特殊性质 B：$\forall 1 \leq i \leq \left\lfloor \frac{n}{4} \right\rfloor, 1 \leq j \leq m$，$a_{4 i, j} = 1$；


---

---
title: "[春季测试 2023] 幂次"
layout: "post"
diff: 普及+/提高
pid: P9118
tag: ['2023', 'NOIP 提高组', 'O2优化']
---
# [春季测试 2023] 幂次
## 题目描述

小 Ω 在小学数学课上学到了“幂次”的概念：$\forall a, b \in \N^+$，定义 $a^b$ 为 $b$ 个 $a$ 相乘。

她很好奇有多少正整数可以被表示为上述 $a^b$ 的形式？由于所有正整数 $m \in N^+$ 总是可以被表示为 $m^1$ 的形式，因此她要求上述的表示中，必须有 $b \geq k$，其中 $k$ 是她事先选取好的一个正整数。

因此她想知道在 $1$ 到 $n$ 中，有多少正整数 $x$ 可以被表示为 $x = a^b$ 的形式，其中 $a, b$ 都是正整数，且 $b \geq k$？
## 输入格式

第一行包含两个正整数 $n, k$，意义如上所述。
## 输出格式

输出一行包含一个非负整数表示对应的答案。
## 样例

### 样例输入 #1
```
99 1
```
### 样例输出 #1
```
99
```
### 样例输入 #2
```
99 3
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
99 2
```
### 样例输出 #3
```
12
```
## 提示

**【样例 2 解释】**

以下是全部 $7$ 组符合题意的正整数及对应的一种合法的表示方法。

$1 = 1^3, 8 = 2^3, 16 = 2^4, 27 = 3^3, 32 = 2^5, 64 = 4^3, 81 = 3^4$

注意某些正整数可能有多种合法的表示方法，例如 $64$ 还可以表示为 $64 = 2^6$。

但根据题意，同一个数的不同的合法表示方法只会被计入一次。

**【样例 3 解释】**

以下是全部 $12$ 组符合题意的正整数及对应的一种合法的表示方法。

$1 = 1^2, 4 = 2^2, 8 = 2^3, 9 = 3^2, 16 = 4^2, 25 = 5^2, 27 = 3^3, 32 = 2^5, 36 = 6^2, 49 = 7^2, 64 = 8^2, 81 = 9^2$

**【样例 4】**

见选手目录下的 power/power4.in 与 power/power4.ans。

**【样例 5】**

见选手目录下的 power/power5.in 与 power/power5.ans。

**【样例 6】**

见选手目录下的 power/power6.in 与 power/power6.ans。


**【数据范围】**

对于所有数据，保证 $1 \leq n \leq 10^{18}$，$1 \leq k \leq 100$。

|测试点编号|$n \le$|$k$|
|:-:|:-:|:-:|
|1|$10^2$|$=1$|
|2|$10^2$|$\ge 2$|
|3|$10^4$|$\ge 3$|
|4|$10^4$|$\ge 2$|
|5|$10^6$|$\ge 3$|
|6|$10^6$|$\ge 2$|
|7|$10^8$|$\ge 3$|
|8|$10^8$|$\ge 2$|
|9|$10^{10}$|$\ge 3$|
|10|$10^{10}$|$\ge 2$|
|11|$10^{12}$|$\ge 3$|
|12|$10^{12}$|$\ge 2$|
|13|$10^{14}$|$\ge 3$|
|14|$10^{14}$|$\ge 2$|
|15|$10^{16}$|$\ge 3$|
|16|$10^{16}$|$\ge 2$|
|17|$10^{18}$|$\ge 3$|
|18|$10^{18}$|$\ge 2$|
|19|$10^{18}$|$\ge 2$|
|20|$10^{18}$|$\ge 2$|



---

---
title: "[NOIP2023] 三值逻辑"
layout: "post"
diff: 普及+/提高
pid: P9869
tag: ['并查集', '2023', 'NOIP 提高组', 'O2优化', '二分图', '基环树']
---
# [NOIP2023] 三值逻辑
## 题目描述

小 L 今天学习了 Kleene 三值逻辑。

在三值逻辑中，一个变量的值可能为：真（$\mathit{True}$，简写作 $\mathit{T}$）、假（$\mathit{False}$，简写作 $\mathit{F}$）或未确定（$\mathit{Unknown}$，简写作 $\mathit{U}$）。

在三值逻辑上也可以定义逻辑运算。由于小 L 学习进度很慢，只掌握了逻辑非运算 $\lnot$，其运算法则为：
$$\lnot \mathit{T} = \mathit{F}, \lnot \mathit{F} = \mathit{T}, \lnot\mathit{U} = \mathit{U}.$$

现在小 L 有 $n$ 个三值逻辑变量 $x_1,\cdots, x_n$。小 L 想进行一些有趣的尝试，于是他写下了 $m$ 条语句。语句有以下三种类型，其中 $\leftarrow$ 表示赋值：

1. $x_i \leftarrow v$，其中 $v$ 为 $\mathit{T}, \mathit{F}, \mathit{U}$ 的一种；
2. $x_i \leftarrow x_j$；
3. $x_i \leftarrow \lnot x_j$。

一开始，小 L 会给这些变量赋初值，然后按顺序运行这 $m$ 条语句。

小 L 希望执行了所有语句后，所有变量的最终值与初值都相等。在此前提下，小 L 希望初值中 $\mathit{Unknown}$ 的变量尽可能少。

在本题中，你需要帮助小 L 找到 $\mathit{Unknown}$ 变量个数最少的赋初值方案，使得执行了所有语句后所有变量的最终值和初始值相等。小 L 保证，至少对于本题的所有测试用例，这样的赋初值方案都必然是存在的。
## 输入格式

**本题的测试点包含有多组测试数据。**

输入的第一行包含两个整数 $c$ 和 $t$，分别表示测试点编号和测试数据组数。对于样例，$c$ 表示该样例与测试点 $c$ 拥有相同的限制条件。

接下来，对于每组测试数据：

- 输入的第一行包含两个整数 $n$ 和 $m$，分别表示变量个数和语句条数。
- 接下来 $m$ 行，按运行顺序给出每条语句。
  - 输入的第一个字符 $v$ 描述这条语句的类型。保证 $v$ 为 `TFU+-` 的其中一种。
  - 若 $v$ 为 `TFU` 的某一种时，接下来给出一个整数 $i$，表示该语句为 $x_i \leftarrow v$；
  - 若 $v$ 为 `+`，接下来给出两个整数 $i,j$，表示该语句为 $x_i \leftarrow x_j$；
  - 若 $v$ 为 `-`，接下来给出两个整数 $i,j$，表示该语句为 $x_i \leftarrow \lnot x_j$。
## 输出格式

对于每组测试数据输出一行一个整数，表示所有符合条件的赋初值方案中，$\mathit{Unknown}$ 变量个数的最小值。
## 样例

### 样例输入 #1
```
1 3
3 3
- 2 1
- 3 2
+ 1 3
3 3
- 2 1
- 3 2
- 1 3
2 2
T 2
U 2

```
### 样例输出 #1
```
0
3
1

```
## 提示

**【样例解释 #1】**

第一组测试数据中，$m$ 行语句依次为

- $x_2 \leftarrow \lnot x_1$；
- $x_3 \leftarrow \lnot x_2$；
- $x_1 \leftarrow x_3$。

一组合法的赋初值方案为 $x_1 = \mathit{T}, x_2 = \mathit{F}, x_3 = \mathit{T}$，共有 $0$ 个$\mathit{Unknown}$ 变量。因为不存在赋初值方案中有小于 $0$ 个$\mathit{Unknown}$ 变量，故输出为 $0$。

第二组测试数据中，$m$ 行语句依次为

- $x_2 \leftarrow \lnot x_1$；
- $x_3 \leftarrow \lnot x_2$；
- $x_1 \leftarrow \lnot x_3$。

唯一的赋初值方案为 $x_1 = x_2 = x_3 = \mathit{U}$，共有 $3$ 个$\mathit{Unknown}$ 变量，故输出为 $3$。

第三组测试数据中，$m$ 行语句依次为

- $x_2 \leftarrow \mathit{T}$；
- $x_2 \leftarrow \mathit{U}$；

一个最小化 $\mathit{Unknown}$ 变量个数的赋初值方案为 $x_1 = \mathit{T}, x_2 = \mathit{U}$。$x_1 = x_2 = \mathit{U}$ 也是一个合法的方案，但它没有最小化 $\mathit{Unknown}$ 变量的个数。

**【样例解释 #2】**

该组样例满足测试点 $2$ 的条件。

**【样例解释 #3】**

该组样例满足测试点 $5$ 的条件。

**【样例解释 #4】**

该组样例满足测试点 $8$ 的条件。

**【数据范围】**

对于所有测试数据，保证：

- $1 \le t \le 6$，$1 \le n,m \le 10 ^ 5$；
- 对于每个操作，$v$ 为 `TFU+-` 中的某个字符，$1 \le i,j \le n$。

| 测试点编号 | $n,m\leq$ | $v$ 可能的取值 |
| :----------: | :----------: | :----------: |
| $1,2$ | $10$ | $\mathit{TFU+-}$ |
| $3$ | $10^3$ | $\mathit{TFU}$ |
| $4$ | $10^5$ | $\mathit{TFU}$ |
| $5$ | $10^3$ | $\mathit{U+}$ |
| $6$ | $10^5$ | $\mathit{U+}$ |
| $7$ | $10^3$ | $\mathit{+-}$ |
| $8$ | $10^5$ | $\mathit{+-}$ |
| $9$ | $10^3$ | $\mathit{TFU+-}$ |
| $10$ | $10^5$ | $\mathit{TFU+-}$ |


---


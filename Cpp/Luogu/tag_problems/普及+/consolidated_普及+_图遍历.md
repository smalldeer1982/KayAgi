---
title: "[USACO19FEB] The Great Revegetation S"
layout: "post"
diff: 普及+/提高
pid: P5543
tag: ['图论', '2019', 'USACO', '并查集', '图遍历']
---
# [USACO19FEB] The Great Revegetation S
## 题目描述

一场漫长的干旱使农场主约翰的 $N$ 个牧场没有草。然而，随着雨季的到来，是时候“重新种植”了。在农夫约翰的小屋里，他有两个桶，每个桶都有不同类型的草籽。他想在他的每一个牧场种草，在每一个牧场中选择一种类型的草。

作为一名奶农，农场主约翰想确保他能满足他那几头奶牛的特殊饮食需求。他的 $m$ 头奶牛都有两个最喜欢的牧场。他的一些奶牛有一个饮食限制，那就是他们应该只吃一种类型的草，因此农场主约翰希望确保在这类奶牛最喜欢的两个田里种植同一种类型的草。其他的奶牛有一个不同的饮食限制，要求他们吃不同类型的草。对于那些奶牛，农场主约翰当然想确保他们最喜欢的两块田地里有不同的草。


请帮助农场主约翰确定他在他的 $N$ 个牧场上种植草的不同方式的数量。
## 输入格式

输入的第一行包含两个整数 $N$（$2\le N\le10^5$）和 $m$（$1\le m\le10^5$）。

之后 $m$ 行，每行描述了一头奶牛。首先是一个字符 `S` 或 `D`，表示这头奶牛需要相同（`S`）还是不同（`D`）的草类型，然后是两个 $1\sim N$ 的整数，表示这头奶牛喜欢的两块牧场。
## 输出格式

输出农场主约翰在他的 $N$ 个牧场上植草的方式。请用二进制写你的答案。
## 样例

### 样例输入 #1
```
3 2
S 1 2
D 3 2
```
### 样例输出 #1
```
10
```
## 提示

USACO 2019 二月月赛银牌组第三题


---

---
title: "[USACO20FEB] Clock Tree S"
layout: "post"
diff: 普及+/提高
pid: P6150
tag: ['搜索', '2020', 'USACO', '深度优先搜索 DFS', '图遍历']
---
# [USACO20FEB] Clock Tree S
## 题目描述

Farmer John 的新牛棚的设计十分奇怪：它由编号为 $1\ldots N$ 的 $N$ 间房间（$2\leq N\leq 2\,500$），以及 $N−1$ 条走廊组成。每条走廊连接两间房间，使得每间房间都可以沿着一些走廊到达任意其他房间。

牛棚里的每间房间都装有一个在表盘上印有标准的整数 $1\ldots 12$ 的圆形时钟。然而，这些时钟只有一根指针，并且总是直接指向表盘上的某个数字（它从不指向两个数字之间）。

奶牛 Bessie 想要同步牛棚中的所有时钟，使它们都指向整数 $12$。然而，她头脑稍有些简单，当她在牛棚里行走的时候，每次她进入一间房间，她将房间里的时钟的指针向后拨动一个位置。例如，如果原来时钟指向 $5$，现在它会指向 $6$，如果原来时钟指向 $12$，现在它会指向 $1$。如果 Bessie 进入同一间房间多次，她每次进入都会拨动这间房间的时钟。

请求出 Bessie 可能的出发房间数量，使得她可以在牛棚中走动并使所有时钟指向 $12$。注意 Bessie 并不拨动她出发房间的时钟，但任意时刻她再次进入的时候会拨动它。时钟不会自己走动；时钟只会在 Bessie 进入时被拨动。此外，Bessie 一旦进入了一条走廊，她必须到达走廊的另一端（不允许走到一半折回原来的房间）。
## 输入格式

输入的第一行包含 $N$。下一行包含 $N$ 个整数，均在范围 $1\ldots 12$ 之内，表示每间房间初始时的时钟设置。以下 $N−1$ 行每行用两个整数 $a$ 和 $b$ 描述了一条走廊，两数均在范围 $1\ldots N$ 之内，为该走廊连接的两间房间的编号。
## 输出格式

输出出发房间的数量，使得 Bessie 有可能使所有时钟指向 $12$。
## 样例

### 样例输入 #1
```
4
11 10 11 11
1 2
2 3
2 4
```
### 样例输出 #1
```
1
```
## 提示

#### 样例解释：
在这个例子中，当且仅当 Bessie 从房间 $2$ 出发时她可以使所有房间的时钟指向 $12$（比如，移动到房间 $1$，$2$，$3$，$2$，最后到 $4$）。

#### 子任务：
- 测试点 $2$-$7$ 满足 $N\leq 100$。
- 测试点 $8$-$15$ 没有额外限制。


---

---
title: "[COCI 2009/2010 #2] VUK"
layout: "post"
diff: 普及+/提高
pid: P7775
tag: ['图论', '2009', '二分', '广度优先搜索 BFS', '图遍历', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #2] VUK
## 题目背景

本题为[$\texttt{COCI 2009-2010}\ 2^\texttt{nd}\ \texttt{round}\ \text{T4 VUK}$](https://hsin.hr/coci/archive/2009_2010/contest2_tasks.pdf)。

分值按原题设置，满分 $100$。
## 题目描述

一匹狼 Vjekoslav 正在逃离一批残暴的猎人的追捕。

这些猎人非常凶残，经常躲在树后面，但 Vjekoslav 并不知道哪棵树后有猎人。为了保险，Vjekoslav 希望在逃回它舒适的窝的过程中离树越远越好。

森林可以抽象为 $N\times M$ 的矩阵。每个格子可能是空的（用`.`表示），也有可能有一棵树在中心位置（用`+`表示）。Vjekoslav在`V`标示的地方而它的窝在`J`标示的地方。定义 Vjekoslav 与某棵树的距离为它们所在格的曼哈顿距离（即这两个格子所在行、列之差的绝对值之和）。

Vjekoslav 每次可以往东南西北中的任一方向移动，**即使它下一步移动到的格子有树（此题树并不会阻挡 Vjekoslav）**。帮忙找出这样一条从`V`到`J`的路径，使得 Vjekoslav 在途中离它最近的树的距离的最小值最大。

**注意 Vjekoslav 的窝并不占据整块格子，因此你的路径中必须包含`J`。**
## 输入格式

第一行两个整数 $N,M$。

接下来 $N$ 行每行 $M$ 个字符，描述这片森林。

在这片森林的描述中，只会有一个`V`与一个`J`，且保证至少有一个`+`。
## 输出格式

一行一个整数，Vjekoslav 在逃回窝的途中最大可能的离它最近的树的距离的最小值。
## 样例

### 样例输入 #1
```
4 4
+...
....
....
V..J

```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
4 5
.....
.+++.
.+.+.
V+.J+
```
### 样例输出 #2
```
0
```
## 提示

$1\leq N,M\leq500$。


---

---
title: "『GROI-R1』 虹色的彼岸花"
layout: "post"
diff: 普及+/提高
pid: P8971
tag: ['图论', 'O2优化', '图遍历']
---
# 『GROI-R1』 虹色的彼岸花
## 题目背景

少年身着春季校服的深灰色外套与黑色短裤，外套内是白净的衬衫。

他的右手不知为何缠着绷带，右眼用头发挡得严严实实，扑面而来的是一种神秘感。

一瓣鲜红的彼岸花，在教室上空无人在意之处打旋。

玘的身世，总是一个谜题吧。

「所以你到底是什么人，又为什么要来这里！」

可是彼岸花显然不想让你知道这些。
## 题目描述

玘给了寒一棵编号为 $1\sim n$ 的树，这棵树上每个点都有一个点权，同时有些边有边权，有些边没有边权。可是玘把每一个点的点权删除了。寒只知道****点权都是整数，而且在 $l$ 和 $r$ 之间（包含端点）****。而且，点权和边权有着下面的特殊关系：

- 对于****有边权****的边，要求****连接的两个点的点权和为边权****。

- 对于****没有边权的边****，****无限制****。

玘问寒这棵树****有多少种不同的点权填写方式****。两种填写方式不同，当且仅当至少存在一个点的点权不同。可是寒不会做这个题。

寒请你解决这个问题。
## 输入格式

**本题有多组测试数据。**

第一行一个整数 $T$，代表测试数据组数。

对于每一组测试数据：

第一行三个整数 $n,l,r$，代表树上点的个数是 $n$，点权的范围是 $[l,r]$。
 
接下来 $n-1$ 行，每行先输入一个整数 $op$，$op=0$ 表示这条边没有边权，$op=1$ 表示这条边有边权。

+ 如果 $op=0$，再输入两个整数 $u,v$，表示这条边连接 $u,v$ 两个点。

+ 如果 $op=1$，再输入三个整数 $u,v,w$，表示有一条权值为 $w$ 的边连接 $u,v$ 两个点。
## 输出格式

对于每个测试点，输出一行一个整数，代表点权填写方式的个数。答案对 $10^9+7$ 取模。
## 样例

### 样例输入 #1
```
2
6 0 4
1 1 2 2
1 2 3 4
1 3 4 2
0 2 5
1 4 6 3

6 -1 4
1 1 2 4
0 2 3
0 3 4
0 2 5
0 4 6
```
### 样例输出 #1
```
5
6480
```
## 提示

**样例解释**

对于样例的第一组测试数据，可以得到下图：

![](https://cdn.luogu.com.cn/upload/image_hosting/91vlqt5k.png)

$5$ 种填写方式分别为：

$\{0,2,2,0,0,3\}\\\{0,2,2,0,1,3\}\\\{0,2,2,0,2,3\}\\\{0,2,2,0,3,3\}\\\{0,2,2,0,4,3\}$

可以证明，不存在别的填写方式。

样例输入中，为了直观，添加了空行。实际数据中不存在多余空行。

**数据范围**

**本题采用捆绑测试。**

| 子任务编号 | 数据范围 | 特殊性质 | 分值 |
| :-----------: | :-----------: | :-----------: | :-----------: |
| $\text{Subtask1}$ | $1\le n\le 10$，$0\le l,r\le5$ |  | $15$ |
| $\text{Subtask2}$ | $1\le n\le 2\times 10^5$，$0\le l,r\le5$ |  | $20$ |
| $\text{Subtask3}$ | $1\le n\le 10$，$-10^9\le l,r\le 10^9$ |  | $15$ |
| $\text{Subtask4}$ | $1\le n\le 2\times10^5$，$-10^9\le l,r\le 10^9$ | 有 | $10$ |
| $\text{Subtask5}$ | $1\le n\le 2\times10^5$，$-10^9\le l,r\le 10^9$ |  | $40$ |

特殊性质：保证每条边都无边权。

对于 $100\%$ 的数据，保证 $1\le T \le 5$，$1\le n\le 2\times10^5$，$1\le \sum n\le 10^6$，$-10^9\le l\le r \le 10^9$，$-10^9\le w\le 10^9$，$op\in\{0,1\}$。


---


---
title: "[厦门小学生 C++ 2023] 数据核心"
layout: "post"
diff: 普及+/提高
pid: B4157
tag: ['动态规划 DP', '2023', '福建', '根号分治', '小学科创活动']
---
# [厦门小学生 C++ 2023] 数据核心
## 题目背景

2023 年厦门市小学生 C++ 语言复赛试题，数据为洛谷自造。
## 题目描述

Sora 有一块神奇的数据核心，这块数据核心里有 $n\times m$ 个数据块，这些数据块组成了一个 $n\times m$ 的矩阵。

在数据核心中，每个数据块都有一个强度 $a_{i,j}$，代表这个数据块存在数据核心中时会提供多少的运算力。但是随着时间的推移，数据核心中有一些数据块出现了硬件老化，有些数据块的强度是一个负数，继续保留过多的老化数据块会影响数据核心的使用效率，所以 Sora 决定从原本的数据核心的矩阵中，先确定一个数据块作为新数据核心的左上角，其位置为 $(x, y)$ ，向右下方切割出一块数据核心（子矩阵），以保证其使用效率。

但是 Sora 是一个有着天马行空想象力的科学家，她想知道在确定了新的数据核心左上角的数据块的情况下，其位置为 $(x, y)$，新的数据核心（子矩阵）能够获得的最大运算力是多少。

当然她的问题很多，有 $Q$ 次询问，每次询问都会给出一个位置 $(x, y)$，你需要算出以这个位置为左上角的新数据核心对应的最大运算力。

## 输入格式

第一行两个整数 $n,m$，表示原始数据核心的大小。

接下来 $n$ 行，每行 $m$ 个整数，对应的是每个数据块的强度 $a_{i,j}$。

第 $n+2$ 行一个整数 $Q$，表示询问次数。
接下来 $Q$ 行，每行两个整数 $x,y$，表示新数据核心的左上角数据块在原数据核心中位于第 $x$ 行第 $y$ 列。
## 输出格式

输出 $Q$ 行，每行一个整数，表示对应询问的最大运算力。
## 样例

### 样例输入 #1
```
5 5
1 -1 1 -1 1
2 2 2 -1 2
1 1 2 -1 -1
-1 -1 2 2 1
1 1 1 1 -1
6
1 1
2 2
3 3
2 4
5 1
5 5
```
### 样例输出 #1
```
16
12
7
2
4
-1
```
## 提示

### 样例解释

- 第一个询问对应的新数据核心是 $(1,1)$ 到 $(5,5)$。
- 第二个询问对应的新数据核心是 $(2,2)$ 到 $(5,5)$。
- 第三个询问对应的新数据核心是 $(3,3)$ 到 $(5,4)$。
- 第四个询问对应的新数据核心是 $(5,1)$ 到 $(5,4)$。
- 第五个询问对应的新数据核心是 $(5,5)$ 到 $(5,5)$。

### 数据范围

- 对于 $20\%$ 的数据，$n\times m \leq 500$，$Q \leq 500$，$a_{i,j} \leq 10^5$。
- 对于 $50\%$ 的数据，$n\times m \leq 5000$，$Q \leq 5000$，$a_{i,j} \leq 10^5$。
- 对于 $80\%$ 的数据，$n\times m \leq 10000$，$Q \leq 10000$，$a_{i,j} ≤ 10^5$。
- 对于 $100\%$ 的数据，$n\times m \leq 100000$，$Q \leq 100000$，$|a_{i,j}| \leq 10^9$。


---

---
title: "[POI 2017 R2] 集装箱 Shipping containers"
layout: "post"
diff: 普及+/提高
pid: P12751
tag: ['2017', 'POI（波兰）', '根号分治']
---
# [POI 2017 R2] 集装箱 Shipping containers
## 题目背景

翻译来自于 [LibreOJ](https://loj.ac/p/5059)。
## 题目描述

**题目译自 [XXIV Olimpiada Informatyczna — II etap](https://sio2.mimuw.edu.pl/c/oi24-2/dashboard/) [Kontenery](https://szkopul.edu.pl/problemset/problem/oNnWY6ZuzzhvG-jCmijiXkIk/statement/)**

工程师 Bajtazar 负责管理一个集装箱装卸坡道。坡道由 $n$ 个连续位置组成，编号从 $1$ 至 $n$。每位位置上，起重机可堆放任意数量的集装箱，层层叠放。

部分集装箱装有危险物质，需避免过于密集堆放。

Bajtazar 收到 $k$ 项起重机操作指令，第 $i$ 项操作形如 $(a_i, \ell_i, d_i)$，表示从位置 $a_i$ 开始，每隔 $d_i$ 个位置放置一个集装箱，共放置 $\ell_i$ 个（即在位置 $a_i, a_i+d_i, a_i+2d_i, \ldots, a_i+(\ell_i-1)d_i$ 各放一个）。他想知道所有操作完成后，每位位置上的集装箱数量。
## 输入格式

第一行包含两个正整数 $n, k$，分别表示坡道位置数量和操作数量。

接下来的 $k$ 行描述操作，第 $i$ 行包含三个正整数 $a_i, \ell_i, d_i$，满足 $a_i+(\ell_i-1)d_i \leq n$。当 $\ell_i=1$ 时，保证 $d_i=1$。
## 输出格式

输出一行，包含 $n$ 个整数 $c_1, c_2, \ldots, c_n$，其中 $c_i$ 表示所有操作完成后位置 $i$ 上的集装箱数量。
## 样例

### 样例输入 #1
```
8 3
3 4 1
2 3 3
3 2 2
```
### 样例输出 #1
```
0 1 2 1 3 1 0 1
```
## 提示

**样例 1 解释**

每个集装箱上的编号对应将其放置在坡道上的操作序号。

![](https://cdn.luogu.com.cn/upload/image_hosting/49gtt0eh.png)

**附加样例**

1. $n=10, k=10$，随机样例。  
2. $n=11000, k=999, a_i=\ell_i=i+1, d_i=10$，对于 $i=1, 2, \ldots, k$。  
3. $n=100000, k=100000, \ell_1=\ell_2=\ldots=\ell_k=1$。

详细子任务附加限制及分值如下表所示。

| 子任务 | 附加限制 | 分值 |
| :---: | :--: | :---: |
| $1$    | $n \leq 1000, k \leq 2000$ | $21$ |
| $2$    | $n, k \leq 100000, d_1=d_2=\ldots=d_k$ | $33$ |
| $3$    | $n, k \leq 100000$       | $46$ |


---

---
title: "[JRKSJ R6] Eltaw"
layout: "post"
diff: 普及+/提高
pid: P8572
tag: ['2022', '洛谷原创', 'O2优化', '枚举', '前缀和', '根号分治']
---
# [JRKSJ R6] Eltaw
## 题目背景

![](https://cdn.luogu.com.cn/upload/image_hosting/at23jtmh.png?x-oss-process=image)

你在月下独自行走，不禁想起了一道简单题。

（题目背景图片来自 Phigros 曲绘，如有侵权，请告知出题人。）
## 题目描述

给你 $k$ 个长为 $n$ 的序列 $a_{1\dots k,1\dots n}$，有 $q$ 次询问，每次询问给出一个区间 $[l,r]$，要求出 $\displaystyle\max_{i=1}^k\sum_{j=l}^ra_{i,j}$，即求出所有序列中区间 $[l,r]$ 的和的最大值。
## 输入格式

第一行三个整数 $n,k,q$。\
接下来 $k$ 行，每行 $n$ 个整数 $a_{i,j}$。\
接下来 $q$ 行，每行两个整数 $l,r$ 表示一次询问。
## 输出格式

输出 $q$ 行表示每个询问的答案。
## 样例

### 样例输入 #1
```
7 2 3
1 1 4 5 1 4 0
1 9 1 9 8 1 0
6 7
5 7
1 3
```
### 样例输出 #1
```
4
9
11
```
## 提示

Idea：cyffff，Solution：cyffff，Code：cyffff，Data：cyffff

**Eltaw - Fl00t (Insane14.4)**

**本题输入输出文件较大，请使用恰当的输入输出方式。**
### 数据规模
本题采用捆绑测试。

| $\text{Subtask}$ | $n\le$ | 特殊限制 | $\text{Score}$ |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $5\times10^3$ | $k\le 100$ | $20$ |
| $2$ | $5\times10^5$ | 保证 $l=1$ | $30$ |
| $3$ | $5\times10^5$ | 无 | $50$ |

对于 $100\%$ 的数据，$1\le n,k,q\le5\times 10^5$，$1\le n\times k\le 5\times10^5$，$1\le l\le r\le n$，$0\le a_{i,j}\le 10^9$。
### 数据更新记录
$\text{upd 2022.10.05}$：更新了两组数据，分别卡掉了两种时间复杂度错误的做法。感谢 @[二叉苹果树](https://www.luogu.com.cn/user/270854) 指出。


$\text{upd 2022.10.08}$：更新了一组数据，卡掉了记忆化不正确的做法。感谢 @[SweetOrangeOvO](https://www.luogu.com.cn/user/236862) 指出。

如果你能通过现在的所有测试点，说明你的代码复杂度极可能是正确的。如果你仍认为你的复杂度是错误的，请联系出题人。


---


---
title: "瑞瑞的木棍"
layout: "post"
diff: 普及+/提高
pid: P1333
tag: ['图论', '福建省历届夏令营', '欧拉回路']
---
# 瑞瑞的木棍
## 题目描述

瑞瑞有一堆的玩具木棍，每根木棍的两端分别被染上了某种颜色，现在他突然有了一个想法，想要把这些木棍连在一起拼成一条线，并且使得木棍与木棍相接触的两端颜色都是相同的，给出每根木棍两端的颜色，请问是否存在满足要求的排列方式。

例如，如果只有 2 根木棍，第一根两端的颜色分别为 red, blue，第二根两端的颜色分别为 red, yellow，那么 blue---red | red----yellow 便是一种满足要求的排列方式。


## 输入格式

输入有若干行，每行包括两个单词，表示一根木棍两端的颜色，单词由小写字母组成，且单词长度不会超过 $10$ 个字母，最多有 $250000$ 根木棍。

## 输出格式

如果木棒能够按要求排列，输出 `Possible`，否则输出 `Impossible`

## 样例

### 样例输入 #1
```
blue red
red violet
cyan blue
blue magenta
magenta cyan

```
### 样例输出 #1
```
Possible

```


---

---
title: "「ZYZ 2025」未选择的路"
layout: "post"
diff: 普及+/提高
pid: P13348
tag: ['Special Judge', 'O2优化', '欧拉回路', '构造']
---
# 「ZYZ 2025」未选择的路
## 题目背景

> 黄色的树林里分出两条路 / 可惜我不能同时去涉足  
> 我在那路口久久伫立 / 我向着一条路极目望去 / 直到它消失在丛林深处
>
> 但我却选了另外一条路 / 它荒草萋萋，十分幽寂 / 显得更诱人，更美丽  
> 虽然在这条小路上 / 很少留下旅人的足迹
>
> 那天清晨落叶满地 / 两条路都未经脚印污染 / 啊，留下一条路等改日再见  
> 但我知道路径延绵无尽头 / 恐怕我难以再回返
>
> 也许多少年后在某个地方 / 我将轻声叹息将往事回顾  
> 一片树林里分出两条路 / 而我选择了人迹更少的一条 / 从此决定了我一生的道路
>
> ——义务教育教科书语文人教版七年级下册《未选择的路》
## 题目描述

在平面直角坐标系中，有一个 $n\times n$ 的网格，其最左下角的点坐标为 $(0,0)$，最右上角的点坐标为 $(n,n)$。有一个人最初站在 $(0,0)$ 的位置，要到达 $(n,n)$。他每一次移动可以沿某个方格的对角线移动，并称他**经过**了这个方格。

请你求出，在仅经过每个方格**至多**一次的情况下，他最多能经过多少方格，并给出一种可行的方案。

你可以参照样例解释中的图片理解题意。
## 输入格式

输入的第一行包含一个正整数 $n$。
## 输出格式

**本题采用 Special Judge，你只需要输出任意一种符合条件的方案。**

第一行输出一个整数 $k$，表示他最多能经过的方格数。

接下来 $k$ 行，其中的第 $i$ 行输出两个整数 $x_i,y_i$，代表第 $i$ 次移动后这个人所在位置的坐标。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
2
1 1
2 2
```
### 样例输入 #2
```
3
```
### 样例输出 #2
```
9
1 1
2 2
3 1
2 0
1 1
0 2
1 3
2 2
3 3
```
## 提示

**【样例解释 #2】**

下图是输出所对应的方案，在可能会造成歧义的地方会走颜色相同的两条线段。

![](https://cdn.luogu.com.cn/upload/image_hosting/o0ze8nab.png)

**【数据范围】**

**本题采用捆绑测试。**

|子任务编号|特殊性质|分值|
|:-:|:-:|:-:|
|$0$|$n\le6$|$30$|
|$1$|$n$ 为奇数|$25$|
|$2$|$n$ 为偶数|$25$|
|$3$|无|$20$|

对于所有的测试数据，保证：$1\le n\le10^3$。


---

---
title: "无序字母对"
layout: "post"
diff: 普及+/提高
pid: P1341
tag: ['图论', '福建省历届夏令营', '深度优先搜索 DFS', '欧拉回路']
---
# 无序字母对
## 题目描述

给定 $n$ 个各不相同的无序字母对（区分大小写，无序即字母对中的两个字母可以位置颠倒）。请构造一个有 $(n+1)$ 个字母的字符串使得每个字母对都在这个字符串中出现。
## 输入格式

第一行输入一个正整数 $n$。

第二行到第 $(n+1)$ 行每行两个字母，表示这两个字母需要相邻。
## 输出格式

输出满足要求的字符串。

如果没有满足要求的字符串，请输出 `No Solution`。

如果有多种方案，请输出字典序最小的方案（即满足前面的字母的 ASCII 编码尽可能小）。
## 样例

### 样例输入 #1
```
4
aZ
tZ
Xt
aX
```
### 样例输出 #1
```
XaZtX
 
```
## 提示

不同的无序字母对个数有限，$n$ 的规模可以通过计算得到。


---

---
title: "[USACO3.3] 骑马修栅栏 Riding the Fences"
layout: "post"
diff: 普及+/提高
pid: P2731
tag: ['搜索', '图论', 'USACO', '欧拉回路']
---
# [USACO3.3] 骑马修栅栏 Riding the Fences
## 题目背景

Farmer John 每年有很多栅栏要修理。他总是骑着马穿过每一个栅栏并修复它破损的地方。
## 题目描述

John 是一个与其他农民一样懒的人。他讨厌骑马，因此从来不两次经过一个栅栏。

John 的农场上一共有 $m$ 个栅栏，每一个栅栏连接两个顶点，顶点用 $1$ 到 $500$ 标号（虽然有的农场并没有那么多个顶点）。一个顶点上至少连接 $1$ 个栅栏，没有上限。两顶点间可能有多个栅栏。所有栅栏都是连通的（也就是你可以从任意一个栅栏到达另外的所有栅栏）。John 能从任何一个顶点（即两个栅栏的交点）开始骑马，在任意一个顶点结束。

你需要求出输出骑马的路径（用路上依次经过的顶点号码表示)，使每个栅栏都恰好被经过一次。如果存在多组可行的解，按照如下方式进行输出：如果把输出的路径看成是一个 $500$ 进制的数，那么当存在多组解的情况下，输出 $500$ 进制表示法中最小的一个 （也就是输出第一位较小的，如果还有多组解，输出第二位较小的，以此类推）。

输入数据保证至少有一个解。
## 输入格式

第一行一个整数 $m$，表示栅栏的数目。

从第二行到第 $(m+1)$ 行，每行两个整数 $u,v$，表示有一条栅栏连接 $u,v$ 两个点。
## 输出格式

共 $(m+1)$ 行，每行一个整数，依次表示路径经过的顶点号。注意数据可能有多组解，但是只有上面题目要求的那一组解是认为正确的。

数据保证至少有一组可行解。
## 样例

### 样例输入 #1
```
9
1 2
2 3
3 4
4 2
4 5
2 5
5 6
5 7
4 6
```
### 样例输出 #1
```
1
2
3
4
2
5
4
6
5
7
```
## 提示

对于 $100\%$ 的数据，$1 \leq m \leq 1024,1 \leq u,v \leq 500$。

题目翻译来自NOCOW。

USACO Training Section 3.3


---

---
title: "【模板】欧拉路径"
layout: "post"
diff: 普及+/提高
pid: P7771
tag: ['欧拉回路']
---
# 【模板】欧拉路径
## 题目描述

求有向图字典序最小的欧拉路径。
## 输入格式

第一行两个整数 $n,m$ 表示有向图的点数和边数。

接下来 $m$ 行每行两个整数 $u,v$ 表示存在一条 $u\to v$ 的有向边。
## 输出格式

如果不存在欧拉路径，输出一行 `No`。

否则输出一行 $m+1$ 个数字，表示字典序最小的欧拉路径。
## 样例

### 样例输入 #1
```
4 6
1 3
2 1
4 2
3 3
1 2
3 4
```
### 样例输出 #1
```
1 2 1 3 3 4 2
```
### 样例输入 #2
```
5 5
1 2
3 5
4 3
3 4
2 3
```
### 样例输出 #2
```
1 2 3 4 3 5
```
### 样例输入 #3
```
4 3
1 2
1 3
1 4
```
### 样例输出 #3
```
No
```
## 提示

对于 $50\%$ 的数据，$n,m\leq 10^3$。

对于 $100\%$ 的数据，$1\leq u,v\leq n\leq 10^5$，$m\leq 2\times 10^5$。

保证将有向边视为无向边后图连通。

[数据生成器](https://www.luogu.com.cn/paste/9oswk47n)


---


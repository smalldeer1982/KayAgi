---
title: "[ROIR 2022] 跳跃机器人 (Day 1)"
layout: "post"
diff: 普及+/提高
pid: P10087
tag: ['动态规划 DP', '数学', '树形数据结构', '线段树', '线性数据结构', '树状数组', '单调队列', '2022', 'Special Judge', '\ufeff基础算法', '动态规划优化', '队列', '其它技巧', 'ROIR（俄罗斯）']
---
# [ROIR 2022] 跳跃机器人 (Day 1)
## 题目背景

翻译自 [ROIR 2022 D1T2](https://neerc.ifmo.ru/school/archive/2021-2022/ru-olymp-regional-2022-day1.pdf)。

某公司正在开发一种跳跃机器人。为了测试机器人，他们在一个多边形平台上设置了一个由 $n$ 个特殊平台组成的环形路线，平台从 $1$ 到 $n$ 编号。第 $i$ 个平台与 $i+1$ 个平台之间的距离为 $d_i$，最后一个平台与第一个平台之间的距离为 $d_n$（假设长度分别为 $d_1,d_2,\dots,d_n$ 的边可以组成一个 $n$ 边形）。

机器人配备了人工智能，在测试过程中学习跳得更远。在任何时刻，机器人通过一个整数 $a$ 来表示它的灵敏度。如果 $a$ 大于等于 $d_i$，机器人可以从平台 $i$ 跳到平台 $i+1$；同样地，如果 $a$ 大于等于 $d_n$，机器人可以从最后一个平台跳到第一个平台。每次跳跃后，机器人的灵敏度增加 $1$。
## 题目描述

机器人的开发人员选择一个平台作为起始平台。如果机器人可以完成 $n$ 次跳跃，回到原来的平台，他们认为实验是成功的。开发人员需要确定机器人的最小起始灵敏度是多少，并选择哪个平台作为起始平台。
## 输入格式

第一行包含一个整数 $n$。

第二行包含一个整数 $f$。

- 如果 $f = 1$，则第三行包含 $n$ 个整数 $d_1, d_2, \dots , d_n$，意义见题目背景。
- 如果 $f = 2$，则第三行包含一个整数 $m$，以及三个整数 $x,y,z$。第四行包含 $m$ 个整数 $c_1, c_2, \dots , c_m$。此时距离值 $d_i$ 根据以下公式计算：
   - 如果 $1 \le i \le m$，则 $d_i = c_i$。
   - 如果 $m + 1 \le i \le n$，则 $d_i = ((x \times d_{i−2} + y \times d_{i−1} + z) \bmod 10^9) + 1$。
## 输出格式

输出两个整数，即最小允许的起始灵敏度 $a$ 和可用于放置机器人的起始平台编号。如果有多个最小起始灵敏度对应的起始平台，可以输出任意一个。
## 样例

### 样例输入 #1
```
5
1
3 7 4 2 5
```
### 样例输出 #1
```
4 3
```
### 样例输入 #2
```
10
2
5 1 2 3
1 2 3 4 5
```
### 样例输出 #2
```
653 1
```
## 提示

样例说明：

在第二个示例中，距离数组为 $[1, 2, 3, 4, 5, 18, 45, 112, 273, 662]$。

根据公式计算 $d_6$ 到 $d_{10}$ 的值：

- $d_6 = ((1 \cdot d_4 + 2 \cdot d_5 + 3) \bmod 10^9) + 1 = ((1 \cdot 4 + 2 \cdot 5 + 3) \bmod 10^9) + 1 = 18$；
- $d_7 = ((1 \cdot d_5 + 2 \cdot d_6 + 3) \bmod 10^9) + 1 = ((1 \cdot 5 + 2 \cdot 18 + 3) \bmod 10^9) + 1 = 45$；
- $d_8 = ((1 \cdot d_6 + 2 \cdot d_7 + 3) \bmod 10^9) + 1 = ((1 \cdot 18 + 2 \cdot 45 + 3) \bmod 10^9) + 1 = 112$；
- $d_9 = ((1 \cdot d_7 + 2 \cdot d_8 + 3) \bmod 10^9) + 1 = ((1 \cdot 45 + 2 \cdot 112 + 3) \bmod 10^9) + 1 = 273$；
- $d_{10} = ((1 \cdot d_8 + 2 \cdot d_9 + 3) \bmod 10^9) + 1 = ((1 \cdot 112 + 2 \cdot 273 + 3) \bmod 10^9) + 1 = 662$。

本题使用捆绑测试。

| 子任务 | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $0$ | $15$ | $n\le300,f=1,d\le300$ |
| $1$ | $17$ | $n\le5000,f=2$ |
| $2$ | $10$ | $n\le100000,f=1$ 且保证从第一个平台开始跳是最佳选择 |
| $3$ | $20$ | $n\le100000,f=1$ |
| $4$ | $5$ | $f=2$ 且保证从第一个平台开始跳是最佳选择 |
| $5$ | $33$ | $f=2$ |

对于 $100\%$ 的数据，$3 \le n \le 10^7$。当 $f=1$ 时 $1 \le d_i \le 10^9$，当 $f=2$ 时 $2 \le m \le \min(n, 10^5)$，$0 \le x, y, z \le 10^9$，$1 \le c_i \le 10^9$。

注：本题的算法标签部分参考了官方题解中用到的解法。


---

---
title: "环状最大两段子段和"
layout: "post"
diff: 普及+/提高
pid: P1121
tag: ['动态规划 DP', '线性数据结构', '枚举']
---
# 环状最大两段子段和
## 题目描述

给出一段长度为 $n$ 的环状序列 $a$，即认为 $a_1$ 和 $a_n$ 是相邻的，选出其中连续不重叠且非空的两段使得这两段和最大。

## 输入格式

第一行是一个整数 $n$，表示序列的长度。

第二行有 $n$ 个整数，描述序列 $a$，第 $i$ 个数字表示  $a_i$。
## 输出格式

一行一个整数，为最大的两段子段和是多少。

## 样例

### 样例输入 #1
```
7
2 -4 3 -1 2 -4 3

```
### 样例输出 #1
```
9
```
## 提示

#### 数据规模与约定

对于全部的测试点，保证 $2 \leq n \leq 2 \times 10^5$，$-10^4 \leq a_i \leq 10^4$。


---

---
title: "表达式的转换"
layout: "post"
diff: 普及+/提高
pid: P1175
tag: ['模拟', '字符串', '线性数据结构', '栈']
---
# 表达式的转换
## 题目描述

平常我们书写的表达式称为中缀表达式，因为它将运算符放在两个操作数中间，许多情况下为了确定运算顺序，括号是不可少的，而后缀表达式就不必用括号了。

后缀标记法：书写表达式时采用运算紧跟在两个操作数之后，从而实现了无括号处理和优先级处理，使计算机的处理规则简化为：从左到右顺序完成计算，并用结果取而代之。

例如：`8-(3+2*6)/5+4` 可以写为：`8 3 2 6 * + 5 / - 4 +`

其计算步骤为：

```
8 3 2 6 * + 5 / - 4 +
8 3 12 + 5 / - 4 +
8 15 5 / - 4 +
8 3 - 4 +
5 4 +
9
```

编写一个程序，完成这个转换，要求输出的每一个数据间都留一个空格。
## 输入格式

就一行，是一个中缀表达式。输入的符号中只有这些基本符号 `0123456789+-*/^()`，并且不会出现形如 `2*-3` 的格式。

表达式中的基本数字也都是一位的，不会出现形如 `12` 形式的数字。

所输入的字符串不要判错。

## 输出格式

若干个后缀表达式，第 $i + 1$ 行比第 $i$ 行少一个运算符和一个操作数，最后一行只有一个数字，表示运算结果。

## 样例

### 样例输入 #1
```
8-(3+2*6)/5+4

```
### 样例输出 #1
```
8 3 2 6 * + 5 / - 4 + 
8 3 12 + 5 / - 4 + 
8 15 5 / - 4 + 
8 3 - 4 + 
5 4 + 
9

```
### 样例输入 #2
```
2^2^3

```
### 样例输出 #2
```
2 2 3 ^ ^
2 8 ^
256

```
## 提示

运算的结果可能为负数，`/` 以整除运算。并且中间每一步都不会超过 $2^{31}$。字符串长度不超过 $100$。

注意乘方运算 `^` 是从右向左结合的，即 `2 ^ 2 ^ 3` 为 `2 ^ (2 ^ 3)`，后缀表达式为 `2 2 3 ^ ^`。

其他同优先级的运算是从左向右结合的，即 `4 / 2 / 2 * 2` 为 `((4 / 2) / 2) * 2`，后缀表达式为 `4 2 / 2 / 2 *`。

保证不会出现计算乘方时幂次为负数的情况，故保证一切中间结果为整数。


---

---
title: "正误问题"
layout: "post"
diff: 普及+/提高
pid: P1575
tag: ['线性数据结构', '栈']
---
# 正误问题
## 题目描述

小 bobo 迷上了逻辑值运算。但小 bobo 算的头都晕了，也没算出个所以然。他只好找到你，让你帮他解决这个问题。

## 输入格式

一个字符串表达逻辑式子，内只包含 `true`，`false`，`or`，`and`，`not` 和空格，(不包含括号和 `xor`)，优先级同 pascal。(从高到低依次为 `not`，`and`，`or`)，同级左边先算，如果逻辑式有误则输出 `error`。

## 输出格式

输出一行表示运算结果：`true` 或者 `false`，如果无法得到结果的输出 `error`。

## 样例

### 样例输入 #1
```
true or false and false
```
### 样例输出 #1
```
true
```
## 提示

对于全部数据，保证输入数据串长小于 $255$。

本题结果为 `true`，`false`，`error` 各占 $\dfrac{1}{3}$，允许“骗分”，但不值得，因为是“水题”。

---

- $\text{upd 2022.7.21}$：新增加 $5$ 组 [Hack 数据](https://www.luogu.com.cn/discuss/459823)。


---

---
title: "饥饿的奶牛"
layout: "post"
diff: 普及+/提高
pid: P1868
tag: ['动态规划 DP', '线性数据结构']
---
# 饥饿的奶牛
## 题目描述

有一条奶牛冲出了围栏，来到了一处圣地（对于奶牛来说），上面用牛语写着一段文字。

现用汉语翻译为：

有 $N$ 个区间，每个区间 $x,y$ 表示提供的 $x\sim y$ 共 $y-x+1$ 堆优质牧草。你可以选择任意区间但不能有重复的部分。

对于奶牛来说，自然是吃的越多越好，然而奶牛智商有限，现在请你帮助他。
## 输入格式

第一行一个整数 $N$。

接下来 $N$ 行，每行两个数 $x,y$，描述一个区间。
## 输出格式

输出最多能吃到的牧草堆数。
## 样例

### 样例输入 #1
```
3
1 3
7 8
3 4
```
### 样例输出 #1
```
5
```
## 提示

$1 \leq n \leq 1.5 \times 10^5$，$0 \leq x \leq y \leq 3 \times 10^6$。


---

---
title: "狂奔的Wzf"
layout: "post"
diff: 普及+/提高
pid: P2130
tag: ['搜索', '线性数据结构']
---
# 狂奔的Wzf
## 题目背景

众所周知，Wzf一直想写作业。可是今天，它的作业被WSD抢了！！！Wzf很愤怒？！他决定以最快的速度，冲向作业。在他面前是一个迷宫，作业就在其中！

## 题目描述

Wzf从（1,1）开始，每秒可以向上下左右某一方向走2的次方步，问至少多久可以到达作业？

## 输入格式

第一行，两个整数，n，m。

接下来n行，每行m个字符，`$`或者`.`代表可走的空地，`X`表示障碍，`#`表示作业，（保证只有一个作业）

## 输出格式

Wzf到达作业最短耗时。如果没有解输出 `-1`。
## 样例

### 样例输入 #1
```
2 2
$$
.#
```
### 样例输出 #1
```
2
```
## 提示

1<n,m<1000，保证起点不是障碍



---

---
title: "好消息，坏消息"
layout: "post"
diff: 普及+/提高
pid: P2629
tag: ['线性数据结构', '单调队列', '前缀和', '队列']
---
# 好消息，坏消息
## 题目描述

Uim 在公司里面当秘书，现在有 $n$ 条消息要告知老板。每条消息有一个好坏度，这会影响老板的心情。告知完一条消息后，老板的心情等于老板之前的心情加上这条消息的好坏度。最开始老板的心情是 $0$，一旦老板心情到了 $0$ 以下就会勃然大怒，炒了 Uim 的鱿鱼。

Uim 为了不被炒，提前知道了这些消息（已经按时间的发生顺序进行了排列）的好坏度，希望知道如何才能不让老板发怒。

Uim 必须按照事件的发生顺序逐条将消息告知给老板。不过 Uim 可以使用一种叫 “倒叙” 的手法，例如有 $n$ 条消息，Uim 可以按 $k,k+1,k+2,\ldots,n,1,2,\ldots,k-1$（事件编号）这种顺序通报。

他希望知道，有多少个 $k$，可以使从 $k$ 号事件开始通报到 $n$ 号事件然后再从 $1$ 号事件通报到 $k-1$ 号事件可以让老板不发怒。
## 输入格式

第一行一个整数 $n$（$1 \le n \le10^6$），表示有 $n$ 个消息。

第二行 $n$ 个整数，按时间顺序给出第 $i$ 条消息的好坏度 $A_i$（$-10^3\le A_i \le 10^3$）。
## 输出格式

一行一个整数，表示可行的方案个数。
## 样例

### 样例输入 #1
```
4
-3 5 1 2

```
### 样例输出 #1
```
2


```
## 提示

**【样例解释】**

通报事件的可行顺序（用编号表示）为 $2\rightarrow3\rightarrow4\rightarrow1$ 或 $3\rightarrow4\rightarrow1\rightarrow2$（分别对应 $k=2$ 和 $k=3$）

通报事件的可行顺序（用好坏度表示）为 $5\rightarrow1\rightarrow2\rightarrow(-3)$ 或 $1\rightarrow2\rightarrow(-3)\rightarrow5$

**【数据范围】**

对于 $25\%$ 的数据，$n\le10^3$；  
对于 $75\%$ 的数据，$n\le10^4$；  
对于 $100\%$ 的数据，$1 \le n\le 10^6$。


---

---
title: "[NOIP 2015 普及组] 求和"
layout: "post"
diff: 普及+/提高
pid: P2671
tag: ['2015', '线性数据结构', 'NOIP 普及组', '排序', '前缀和']
---
# [NOIP 2015 普及组] 求和
## 题目背景

NOIP2015 普及组 T3
## 题目描述

一条狭长的纸带被均匀划分出了 $n$ 个格子，格子编号从 $1$ 到 $n$。每个格子上都染了一种颜色 $color_i$ 用 $[1,m]$ 当中的一个整数表示），并且写了一个数字 $number_i$。

| 编号 | 1 | 2 | 3 | 4 | 5 | 6 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| **颜色和数字** | $\color{blue}{5}$ | $\color{blue}{5}$ | $\color{red}{3}$ | $\color{red}{2}$ | $\color{blue}{2}$ | $\color{red}{2}$ |

定义一种特殊的三元组：$(x,y,z)$，其中 $x,y,z$ 都代表纸带上格子的编号，这里的三元组要求满足以下两个条件：

1. $x,y,z$ 都是整数，$x<y<z,y-x=z-y$。

2. $color_x=color_z$。

满足上述条件的三元组的分数规定为 $(x+z) \times (number_x+number_z)$。整个纸带的分数规定为所有满足条件的三元组的分数的和。这个分数可能会很大，你只要输出整个纸带的分数除以 $10007$ 所得的余数即可。

## 输入格式

第一行是用一个空格隔开的两个正整数 $n$ 和 $m,n$ 表纸带上格子的个数，$m$ 表纸带上颜色的种类数。

第二行有 $n$ 用空格隔开的正整数，第 $i$ 个数字表示纸带上编号为 $i$ 格子上面写的数字 $number_i$。

第三行有 $n$ 用空格隔开的正整数，第 $i$ 数字表示纸带上编号为 $i$ 格子染的颜色 $color_i$。

## 输出格式

一个整数，表示所求的纸带分数除以 $10007$ 所得的余数。

## 样例

### 样例输入 #1
```
6 2
5 5 3 2 2 2
2 2 1 1 2 1
```
### 样例输出 #1
```
82

```
### 样例输入 #2
```
15 4
5 10 8 2 2 2 9 9 7 7 5 6 4 2 4
2 2 3 3 4 3 3 2 4 4 4 4 1 1 1
```
### 样例输出 #2
```
1388
```
## 提示

**样例 1 解释**

纸带如题目描述中的图所示。

所有满足条件的三元组为：$(1, 3, 5), (4, 5, 6)$。

所以纸带的分数为 $(1 + 5) \times (5 + 2) + (4 + 6) \times (2 + 2) = 42 + 40 = 82$。


对于第 $1$ 组至第 $2$ 组数据， $1 ≤ n ≤ 100, 1 ≤ m ≤ 5$；

对于第 $3$ 组至第 $4$ 组数据，$1 ≤ n ≤ 3000, 1 ≤ m ≤ 100$；

对于第 $5$ 组至第 $ 6 $ 组数据，$1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000$，且不存在出现次数超过 $ 20 $ 的颜色；

对于全部 $10$ 组数据，$1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000, 1 ≤ color_i ≤ m,1≤number_i≤100000$。



---

---
title: "神秘数字"
layout: "post"
diff: 普及+/提高
pid: P2804
tag: ['搜索', '数学', '线性数据结构', '二分', '递归']
---
# 神秘数字
## 题目背景

在公元XXXX年，侦探小明收到了组织的神秘信息，在Y市的某个地方有一道神秘的门。小明到达了那个门后，发现门上有一行字：“这个门需要密码才能解锁。”小明左找右找，终于找到了一张字条：“现在给你n个数，请你求出这n个数里面，有多少个连续的数的平均数大于某个给定的数M？注意：这个数可能会很大，请输出这个数对92084931取模的结果。最终的结果即是这个门的密码。”小明苦思冥想了半天，但始终找不到答案。于是他来求助于你。请你帮他解决这个问题。由于小明十分着急，他最多只能等1秒。

## 题目描述

给定n个数，请你帮助小明求出里面有多少个连续的数的平均数大于给定的某个数M.并将这个方案数输出。注意：这个数可能会很大，所以请输出这个数对92084931取模的结果。

## 输入格式

两行。第一行为两个数n和M。第二行为n个数。

## 输出格式

一行一个数，即问题的解对92084931取模的结果

## 样例

### 样例输入 #1
```
4 3
1 5 4 2
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
4 4
5 2 7 3
```
### 样例输出 #2
```
6
```
## 提示

【样例解释】

①对于这4个数，问题的解有{5}，{4}，{5,4}，{1,5,4}，{5,4,2}共5组。

②对于这4个数，问题的解有{5}，{7}，{2,7}，{7,3}，{5,2,7}，{5,2,7,3}共6组。

【数据规模】

对于10%的数据，1＜n≤10.

对于30%的数据，1＜n≤1000.

对于50%的数据，1＜n≤30000.

对于100%的数据，1＜n≤200000，1＜M≤3000，每个数均为正整数且不大于5000.



---

---
title: "[USACO22FEB] Email Filing S"
layout: "post"
diff: 普及+/提高
pid: P8188
tag: ['模拟', '贪心', '线性数据结构', 'USACO', '2022']
---
# [USACO22FEB] Email Filing S
## 题目描述

Farmer John has fallen behind on organizing his inbox. The way his screen is organized, there is a vertical list of folders on the left side of the screen and a vertical list of emails on the right side of the screen. There are $M$ total folders, numbered $1 \ldots M$ $(1 \le M \le 10^4)$. His inbox currently contains $N$ emails numbered $1\ldots N$ $(1 \le N \le 10^5)$; the $i$th email needs to be filed into folder $f_i$ $(1\le f_i\le M)$. 

FJ's screen is rather small, so he can only view $K$ $(1\le K\le \min(N,M))$ folders and $K$ emails at once.  Initially, his screen starts out displaying folders
$1 \ldots K$ on the left and emails $1 \ldots K$ on the right. To access other folders and emails, he needs to scroll through these respective lists. For example, if he scrolls down one position in the list of folders, his screen will display folders $2 \ldots K+1$, and then scrolling down one position further it will display folders $3 \ldots K+2$.  When FJ drags an email into a folder, the email disappears from the email list, and the emails after the one that disappeared shift up by one position.  For example, if emails $1, 2, 3, 4, 5$ are currently displayed and FJ drags email 3 into its appropriate folder, the email list will now show emails $1, 2, 4, 5, 6$. FJ can only drag an email into the folder to which it needs to be filled.

Unfortunately, the scroll wheel on FJ's mouse is broken, and he can only scroll downwards, not upwards.  The only way he can achieve some semblance of upward scrolling is if he is viewing the last set of $K$ emails in his email list, and
he files one of these.  In this case, the email list will again show the last $K$ emails that haven't yet been filed, effectively scrolling the top email up by one. If there are fewer than $K$ emails remaining, then all of them will be
displayed. 

Please help FJ determine if it is possible to file all of his emails.
## 输入格式

The first line of input contains $T$ $(1≤T≤10)$, the number of subcases in this input, all of which must be solved correctly to solve the input case. The $T$ subcases then follow. For each subcase, the first line of input contains $M,N$ and $K$. The next line contains $f_1\cdots f_N$.

It is guaranteed that the sum of $M$ over all subcases does not exceed $10^4$, and that the sum of $N$ over all subcases does not exceed $10^5$.
## 输出格式

Output $T$ lines, each one either containing either YES or NO, specifying whether FJ can successfully file all his emails in each of the $T$ subcases.
## 样例

### 样例输入 #1
```
6
5 5 1
1 2 3 4 5
5 5 1
1 2 3 5 4
5 5 1
1 2 4 5 3
5 5 2
1 2 4 5 3
3 10 2
1 3 2 1 3 2 1 3 2 1
3 10 1
1 3 2 1 3 2 1 3 2 1
```
### 样例输出 #1
```
YES
YES
NO
YES
YES
NO
```
## 提示

【数据范围】

- In inputs 2-10, the sum of $M$ over all subcases does not exceed $10^3$.
- In inputs 11-12, no additional constraints.
## 题目翻译

### 题目描述

Farmer John 在整理他的收件箱时落后了。他的屏幕布局如下：屏幕左侧是文件夹的垂直列表，右侧是邮件的垂直列表。总共有 $M$ 个文件夹，编号为 $1 \ldots M$（$1 \leq M \leq 10^4$）。他的收件箱目前包含 $N$ 封邮件，编号为 $1 \ldots N$（$1 \leq N \leq 10^5$）；第 $i$ 封邮件需要归档到文件夹 $f_i$（$1 \leq f_i \leq M$）。

FJ 的屏幕很小，因此他一次只能查看 $K$ 个文件夹和 $K$ 封邮件（$1 \leq K \leq \min(N, M)$）。初始时，他的屏幕显示左侧的文件夹 $1 \ldots K$ 和右侧的邮件 $1 \ldots K$。为了访问其他文件夹和邮件，他需要滚动这些列表。例如，如果他在文件夹列表中向下滚动一个位置，屏幕将显示文件夹 $2 \ldots K+1$，再向下滚动一个位置则显示文件夹 $3 \ldots K+2$。当 FJ 将一封邮件拖入文件夹时，该邮件会从邮件列表中消失，其后的邮件会向前移动一个位置。例如，如果当前显示的邮件是 $1, 2, 3, 4, 5$，而 FJ 将邮件 $3$ 拖入其对应的文件夹，邮件列表将显示 $1, 2, 4, 5, 6$。FJ 只能将邮件拖入其需要归档的文件夹。

不幸的是，FJ 的鼠标滚轮坏了，他只能向下滚动，不能向上滚动。唯一能实现类似向上滚动的效果是，当他查看邮件列表的最后 $K$ 封邮件时，如果他归档了其中一封邮件，邮件列表将再次显示尚未归档的最后 $K$ 封邮件，从而将最上面的邮件向上滚动一个位置。如果剩余的邮件少于 $K$ 封，则显示所有剩余的邮件。

请帮助 FJ 判断是否能够归档所有邮件。

### 输入格式

输入的第一行包含 $T$（$1 \leq T \leq 10$），表示输入中的子用例数量，所有子用例都必须正确解决才能解决整个输入用例。接下来的 $T$ 行是每个子用例的输入。对于每个子用例，第一行包含 $M$、$N$ 和 $K$。第二行包含 $f_1 \cdots f_N$。

保证所有子用例的 $M$ 之和不超过 $10^4$，所有子用例的 $N$ 之和不超过 $10^5$。

### 输出格式

输出 $T$ 行，每行包含 `YES` 或 `NO`，表示 FJ 是否能够成功归档所有邮件。

### 数据范围

- 在输入 2-10 中，所有子用例的 $M$ 之和不超过 $10^3$。
- 在输入 11-12 中，没有额外限制。


---

---
title: "「QFOI R1」头"
layout: "post"
diff: 普及+/提高
pid: P9715
tag: ['线性数据结构', '洛谷原创', 'O2优化', '洛谷月赛', '链表']
---
# 「QFOI R1」头
## 题目背景

可以看看这个讨论：<https://www.luogu.com.cn/discuss/703835>。
## 题目描述

小 R 是一个可爱的女孩子。有一天，她在被摸头时，突然灵光乍现，便随手加强了一道题给你做。

这道题的名字叫涂色游戏。初始时你有一个 $n$ 行 $m$ 列的网格，所有格子上都没有颜色。有 $k$ 种颜色的刷子，颜色编号为 $1\sim k$。然后给出 $q$ 次操作，每次操作给出 $op,l,r,c,t$ 五个参数：

- 如果 $op=1$，表示将第 $l\sim r$ 行的所有格子涂成颜色 $c$。
- 如果 $op=2$，表示将第 $l\sim r$ 列的所有格子涂成颜色 $c$。
- 如果 $t=0$，意味着如果涂色时遇到已经被染色的格子，就不再进行染色。
- 如果 $t=1$，意味着如果涂色时遇到已经被染色的格子，就用新的颜色覆盖它。

在所有涂色操作结束以后，对于每种颜色，求出有多少个格子被染成了这种颜色。
## 输入格式

第一行四个整数 $n,m,k,q$，表示行数、列数、颜色数和操作数。

接下来 $q$ 行，每行五个整数 $op,l,r,c,t$，表示这次操作的参数。
## 输出格式

一行 $k$ 个整数，第 $i$ 个整数表示被染成颜色 $i$ 的格子数量。
## 样例

### 样例输入 #1
```
5 5 2 4
1 2 4 1 0
2 4 5 1 1
2 2 4 2 0
1 1 1 2 1
```
### 样例输出 #1
```
17 7
```
### 样例输入 #2
```
5 5 3 6
2 1 3 3 1
2 2 4 1 0
1 4 4 2 0
2 1 1 1 0
1 2 5 2 0
1 1 5 3 0
```
### 样例输出 #2
```
5 4 16
```
## 提示

**样例 $1$ 解释**

用浅灰色表示颜色 $1$，灰色表示颜色 $2$。

涂色过程如图所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/gl7dmh5b.png)

共有 $17$ 个区域被染成颜色 $1$，$7$ 个区域被染成颜色 $2$。

---

**数据范围**

本题共 $20$ 个测试点，每个测试点 $5$ 分。

对于全部数据，保证 $1\le n,m,q\le 2\times 10^6$，$1\le k\le 5\times 10^5$，$op\in\{1,2\}$，若 $op=1$ 则 $1\le l\le r\le n$，若 $op=2$ 则 $1\le l\le r\le m$，$1\le c\le k$，$t\in\{0,1\}$。

- 对于测试点 $1\sim 3$：保证 $n,m,k,q\le 200$。
- 对于测试点 $4\sim 6$：保证 $n,m,k,q\le 2\times 10^3$。
- 对于测试点 $7\sim 9$：保证 $n,m,k,q\le 10^5$，$op=1$。
- 对于测试点 $10\sim 12$：保证 $n,m,k,q\le 10^5$，$t=1$。
- 对于测试点 $13\sim 18$：保证 $n,m,k,q\le 10^5$。
- 对于测试点 $19\sim 20$：无特殊限制。


---


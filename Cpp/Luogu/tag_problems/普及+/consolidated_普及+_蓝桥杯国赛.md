---
title: "[蓝桥杯 2023 国 A] 相连的边"
layout: "post"
diff: 普及+/提高
pid: P10418
tag: ['2023', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 A] 相连的边
## 题目描述

给定一棵包含 $n$ 个结点的树，找出 $3$ 条边使得这三条边的端点仅经过这三条边即可互相到达且三条边的长度和尽可能大。
## 输入格式

输入第一行包含一个整数 $n$ 表示树的结点数。

接下来 $n−1$ 行，每行包含两个整数，用一个空格分隔。其中第 $i$ 行的两个数 $x_i,y_i$，表示编号为 $i+1$ 和 $x_i$ 的结点之间有一条长度为 $y_i$ 的边。
## 输出格式

输出一行，包含一个整数表示满足要求的三条边的长度之和的最大值。
## 样例

### 样例输入 #1
```
5
1 1
2 1
3 7
1 10

```
### 样例输出 #1
```
12

```
## 提示

**【样例解释 1】**

结点 $2$ 和结点 $1$ 的边长为 $1$，结点 $3$ 和结点 $2$ 的边长为 $1$，结点 $4$ 和结点 $3$ 的边长为 $7$，结点 $5$ 和结点 $1$ 的边长为 $10$。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，$4\le n\le 300$；  
对于 $40\%$ 的评测用例，$4\le n\le 5000$；  
对于所有评测用例，$4\le n\le 2\times 10^5$，$1\le x_i<i$，$1\le y_i\le 10^9$。


---

---
title: "[蓝桥杯 2023 国 A] 01 游戏"
layout: "post"
diff: 普及+/提高
pid: P10419
tag: ['2023', '深度优先搜索 DFS', '剪枝', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 A] 01 游戏
## 题目描述

小蓝最近玩上了 $01$ 游戏，这是一款带有二进制思想的棋子游戏，具体来说游戏在一个大小为 $N\times N$ 的棋盘上进行，棋盘上每个位置都需要放置一位数字 $0$ 或者数字 $1$，初始情况下，棋盘上有一部分位置已经被放置好了固定的数字，玩家不可以再进行更改。玩家需要在其他所有的空白位置放置数字，并使得最终结果满足以下条件：

1. 所有的空白位置都需要放置一个数字 $0/1$；
2. 在水平或者垂直方向上，相同的数字不可以连续出现大于两次；
3. 每一行和每一列上，数字 $0$ 和数字 $1$ 的数量必须是相等的 (例如 $N=4$，则表示每一行/列中都需要有 $2$ 个 $0$ 和 $2$ 个 $1$)；
4. 每一行都是唯一的，因此每一行都不会和另一行完全相同；同理每一列也都是唯一的，每一列都不会和另一列完全相同。

现在请你和小蓝一起解决 $01$ 游戏吧！题目保证所有的测试数据都拥有一个唯一的答案。
## 输入格式

输入的第一行包含一个整数 $N$ 表示棋盘大小。

接下来 $N$ 行每行包含 $N$ 个字符，字符只可能是 `0`、`1`、`_` 中的其中一个 (ASCII 码分别为 $48$，$49$，$95$)，`0` 表示这个位置数字固定为 $0$，`1` 表示这个位置数字固定为 $1$，`_` 表示这是一个空白位置，由玩家填充。
## 输出格式

输出 $N$ 行每行包含 $N$ 个字符表示题目的解，其中的字符只能是 `0` 或者 `1`。
## 样例

### 样例输入 #1
```
6
_0____
____01
__1__1
__1_0_
______
__1___

```
### 样例输出 #1
```
100110
010101
001011
101100
110010
011001

```
## 提示

**【评测用例规模与约定】**

对于 $60\%$ 的评测用例，$2\le N\le 6$;  
对于所有评测用例，$2\le N\le 10$，$N$ 为偶数。

感谢 @rui_er 提供测试数据。


---

---
title: "[蓝桥杯 2023 国 Python A] 2023"
layout: "post"
diff: 普及+/提高
pid: P10986
tag: ['2023', '组合数学', '容斥原理', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Python A] 2023
## 题目背景

建议使用 PyPy3 提交本题。
## 题目描述

给定 $n, m$，请求出所有 $n$ 位十进制整数中有多少个数中恰好出现了 $m$ 个 $2023$。

例如 $00202312023$ 是一个 $11$ 位的出现了 $2$ 个 $2023$ 的十进制整数。

由于结果可能很大，请输出答案对 $998,244,353$ 取模的结果。



## 输入格式

输入一行包含两个整数 $n,m$，用一个空格分隔。


## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
5 1
```
### 样例输出 #1
```
20
```
## 提示

对于 $40\%$ 的评测用例，$n \le 10^5,m \le 10$；

对于所有评测用例，$4 \le n \le 10^5,0 \le 4m \le n$。


---

---
title: "[蓝桥杯 2023 国 Python A] 走方格"
layout: "post"
diff: 普及+/提高
pid: P10988
tag: ['2023', '广度优先搜索 BFS', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Python A] 走方格
## 题目描述

给定一个 $N$ 行 $N$ 列的方格，第 $i$ 行第 $j$ 列的方格坐标为 $(i, j)$，高度为
$H_{i,j}$。小蓝从左上角坐标 $(0, 0)$ 出发，目的地是右下角坐标 $(N − 1, N − 1)$。
当小蓝位于第 $r$ 行第 $c$ 列时，他有如下的移动方式：
1. 若 $r + 1 < N$，可以移动到 $(r + 1, c)$，花费 $1$ 秒；
1. 若 $c + 1 < N$，可以移动到 $(r, c + 1)$，花费 $1$ 秒；
1. 对于任意整数 $L$，若 $H_{r,c} > H_{r,c+1} > \cdots > H_{r,c+L}$，可以移动到 $(r, c + L)$，花费 $1$ 秒；
1. 对于任意整数 $L$，若 $H_{r,c} > H_{r,c−1} > \cdots > H_{r,c−L}$，可以移动到 $(r, c − L)$，花费 $1$ 秒。

现在给出方格，请问小蓝从 $(0, 0)$ 移动到 $(N − 1, N − 1)$ 最少需要多少秒？

## 输入格式

输入的第一行包含一个整数 $N$ 表示方格大小。
接下来 $N$ 行，每行包含 $N$ 个整数，表示每个方格上的数字。

## 输出格式

输出一个整数表示答案。
## 样例

### 样例输入 #1
```
4
0 1 9 3
2 9 3 7
8 4 8 9
9 8 0 7

```
### 样例输出 #1
```
5
```
## 提示

对于 $20\%$ 的评测用例，$1 \le N \le 10$；

对于 $50\%$ 的评测用例，$1 \le N \le 100$；

对于所有评测用例，$1 \le N \le 1000,0 \le H_{i, j} \le 100$。

#### 样例解释
移动顺序为：$(0, 0)\rightarrow (1, 0)\rightarrow(2, 0)\rightarrow(3, 0)\rightarrow(3, 2)\rightarrow(3, 3)$，其中坐标 $(3, 0),(3, 1),(3, 2)$ 处的数字分别为 $9 > 8 > 0$，所以可以花费 $1$ 秒从 $(3, 0)$
移动到 $(3, 2)$。



---

---
title: "[蓝桥杯 2023 国 Python A] 选段排序"
layout: "post"
diff: 普及+/提高
pid: P10991
tag: ['贪心', '2023', '排序', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Python A] 选段排序
## 题目描述

给定一个长度为 $n$ 的序列 $A_i$ 以及两个下标 $p, q(p < q)$。你可以选择任意一个区间 $[L, R]$ 并将序列的这个范围内的元素 $A_L \sim A_R$ 从小到大排序。

求选择一个区间排序后 $A_q − A_p$ 的值最大可以是多少。

## 输入格式

输入的第一行包含三个整数 $n, p, q$，相邻两个整数之间使用一个空格分隔。

第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \cdots, A_n$，相邻两个整数之间使用一个空格分隔。

## 输出格式

输出一行，包含一个整数表示 $A_q − A_p$ 的最大值。
## 样例

### 样例输入 #1
```
5 1 4
4 5 3 3 1

```
### 样例输出 #1
```
3

```
## 提示

对于 $20\%$ 的评测用例，$n \le 100 ,A_i \le 200$；

对于 $40\%$ 的评测用例，$n \le 2000 ,A_i \le 3000$；

对于所有评测用例，$1 \le p \le q \le n \le 2 \times 10^5,1 \le A_i \le 10^6$。


---

---
title: "[蓝桥杯 2023 国 Python B] 困局"
layout: "post"
diff: 普及+/提高
pid: P12215
tag: ['2023', '组合数学', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Python B] 困局
## 题目描述

小蓝发现有个小偷在坐标 $0$ 处，正在往 $x$ 轴正方向逃离并保持逃离方向不变。小蓝不想让他快速逃离（即走到坐标 $n + 1$ 处），准备设立 $k$ 道双向传送门拖延其时间，每道传送门可以连接 $x$ 轴上的两个不同的整点坐标 $p \leftrightarrow q$，其中 $p, q \in [1, n]$，同时每个坐标上最多作为一道传送门的端点。

当小偷达到一个整点时，如果其上有传送门，则会触发传送门到达传送门另一端，当然同一个传送门不能连续触发，当无法传送时小偷会保持向 $x$ 轴正方向移动。小蓝想通过设置这些传送门使得小偷被至少传送 $2k$ 次，请问有多少种设置传送门的方式可以完成目标？
## 输入格式

输入一行包含两个正整数 $n, k$，用一个空格分隔。
## 输出格式

输出一行，包含一个整数表示答案。答案可能很大，请输出答案对 $998244353$ 取模的结果。
## 样例

### 样例输入 #1
```
5 2
```
### 样例输出 #1
```
5
```
## 提示

### 样例说明

其中一种连接方式为 $1 \leftrightarrow 4, 2 \leftrightarrow 5$，小偷的行走路线为 $0 \rightarrow 1 \rightarrow 4 \rightarrow 5 \rightarrow 2 \rightarrow 3 \rightarrow 4 \rightarrow 1 \rightarrow 2 \rightarrow 5 \rightarrow 6$，一共被传送了 $4$ 次。

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，$n \leq 8$；
- 对于所有评测用例，$1 \leq n \leq 10^5$，$0 < k < \min(n, 8)$。


---

---
title: "[蓝桥杯 2023 国 Java B] 星球"
layout: "post"
diff: 普及+/提高
pid: P12220
tag: ['动态规划 DP', '2023', '蓝桥杯国赛', '状压 DP']
---
# [蓝桥杯 2023 国 Java B] 星球
## 题目描述

小明驾驶飞船对某星系发起攻击。星系中有 $n$ 颗星球，编号依次是 $1, 2, \ldots, n$。第 $i$ 颗星球的坐标为 $(x_i, y_i, z_i)$，且其防御强度为 $w_i$。

小明需要规划出进攻这 $n$ 颗星球的顺序使得其进攻所需能量最少。

对于一个遍历顺序 $p_1, p_2, \ldots, p_n$ 来说，小明进攻需要的能量为 $E = \displaystyle \sum_{i=2}^{n} d(p_{i-1}, p_i) \times w_i$，其中 $d(p_{i-1}, p_i)$ 表示 $p_{i-1}, p_i$ 两颗星球之间的直线距离。小明想知道进攻所需最少能量是多少。
## 输入格式

输入共 $n + 1$ 行。

第一行为一个正整数 $n$。

后面 $n$ 行，每行四个整数 $x_i, y_i, z_i, w_i$。
## 输出格式

输出共 $1$ 行，一个浮点数（保留两位小数）。
## 样例

### 样例输入 #1
```
3
4 3 3 5
2 2 3 5
3 1 1 3
```
### 样例输出 #1
```
18.53
```
## 提示

### 样例说明

当进攻顺序为 $\{1, 2, 3\}$ 时，所需能量最小，为 $5\sqrt{5} + 3\sqrt{6}$。

### 评测用例规模与约定

- 对于 $20\%$ 的数据，保证 $n \leq 8$。
- 对于 $100\%$ 的数据，保证 $n \leq 18$，$0 \leq x_i, y_i, z_i, w_i \leq 100$。


---

---
title: "[蓝桥杯 2023 国 Java B] 非对称二叉树"
layout: "post"
diff: 普及+/提高
pid: P12223
tag: ['动态规划 DP', '2023', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Java B] 非对称二叉树
## 题目描述

小明觉得不对称的东西有着独特的美感。

对于一棵含有 $n$ 个结点的二叉树，小明规定如果对于其中任意一个结点 $i$ 都满足条件：$\max \{h_{l_i}, h_{r_i}\} \geq k \times \min \{h_{l_i}, h_{r_i}\}$ 则此二叉树为一棵非对称二叉树。其中 $l_i, r_i$ 分别为 $i$ 的左儿子和右儿子，$h_x$ 表示以 $x$ 为根的子树的高度（如果结点 $x$ 不存在则视为高度等于 $0$）。

给定 $n, k$，计算有多少棵不同的非对称二叉树。
## 输入格式

输入共 $1$ 行，两个正整数 $n$、$k$。
## 输出格式

输出共 $1$ 行，一个整数。
## 样例

### 样例输入 #1
```
4 2
```
### 样例输出 #1
```
12
```
## 提示

### 样例说明

所有 $12$ 种情况如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/bvh1audb.png)

### 评测用例规模与约定

- 对于 $20\%$ 的数据，保证 $n \leq 12$。
- 对于 $100\%$ 的数据，保证 $n \leq 35$，$1 \leq k \leq n$。


---

---
title: "[蓝桥杯 2023 国 Java B] 游戏"
layout: "post"
diff: 普及+/提高
pid: P12225
tag: ['单调队列', '2023', '期望', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Java B] 游戏
## 题目描述

熊大和熊二在玩游戏。他们将 $n$ 个正整数 $a_1, a_2, \dots, a_n$ 排成一行，然后各用一个长度为 $k$ 的框在这个数组中各自随机框选出一段长度为 $k$ 的连续子序列（随机框选指在合法的 $n - k + 1$ 个连续子序列中均匀随机）。熊大记录了他框出的 $k$ 个数中的最大值 $P$，熊二记录了他框出的 $k$ 个数的最小值 $Q$，他们突然有个疑问：$P - Q$ 的期望是多少？
## 输入格式

输入共 $2$ 行。

第一行为两个正整数 $n, k$。

第二行为 $n$ 个由空格隔开的正整数 $a_1, a_2, \dots, a_n$。
## 输出格式

输出共 $1$ 行，一个浮点数（请保留两位小数）。
## 样例

### 样例输入 #1
```
3 2
1 2 3
```
### 样例输出 #1
```
1.00
```
## 提示

### 样例说明

一共有四种情况：

- 熊大框出 $[1, 2]$，$P = 2$；熊二框出 $[1, 2]$，$Q = 1$，$P - Q = 1$。
- 熊大框出 $[1, 2]$，$P = 2$；熊二框出 $[2, 3]$，$Q = 2$，$P - Q = 0$。
- 熊大框出 $[2, 3]$，$P = 3$；熊二框出 $[1, 2]$，$Q = 1$，$P - Q = 2$。
- 熊大框出 $[2, 3]$，$P = 3$；熊二框出 $[2, 3]$，$Q = 2$，$P - Q = 1$。

所以 $P - Q$ 的期望为 $(1 + 0 + 2 + 1) / 4 = 1.00$。

### 评测用例规模与约定

- 对于 $20\%$ 的数据，保证 $n \leq 10^2$。
- 对于 $40\%$ 的数据，保证 $n \leq 10^3$。
- 对于 $100\%$ 的数据，保证 $n \leq 10^5$，$0 < a_i \leq 10^9$，$0 < k \leq n$。


---

---
title: "[蓝桥杯 2023 国 Java A] 最大算式"
layout: "post"
diff: 普及+/提高
pid: P12234
tag: ['贪心', '2023', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Java A] 最大算式
## 题目描述

给定 $n$ 个非负整数 $A_i$，你可以在不改变这些数顺序的前提下任意在他们之间插入 $\tt{+},\tt{*},\tt{(},\tt{)}$ 四种符号。

请问在得到的算式合法的前提下，算式的结果最大可以是多少？

由于结果很大，你只需要输出答案对 $10^9 + 7$ 取模的结果即可。
## 输入格式

输入的第一行包含一个整数 $n$。

第二行包含 $n$ 个整数，分别表示 $A_1, A_2, \cdots, A_n$，相邻两个整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
7
1 2 1 1 1 2 1
```
### 样例输出 #1
```
27
```
## 提示

### 样例说明

$(1 + 2) \times (1 + 1 + 1) \times (2 + 1) = 27$。

### 评测用例规模与约定

- 对于 $40\%$ 的评测用例，$n \leq 5000$；
- 对于所有评测用例，$1 \leq n \leq 10^5$，$0 \leq A_i \leq 10^9$。


---

---
title: "[蓝桥杯 2023 国 Java A] 连续数组"
layout: "post"
diff: 普及+/提高
pid: P12236
tag: ['2023', '记忆化搜索', '蓝桥杯国赛', '状压 DP']
---
# [蓝桥杯 2023 国 Java A] 连续数组
## 题目描述

小蓝对连续数组很感兴趣，对于一个长度为 $N$ 的连续数组 $nums$，$nums$ 中的元素取值范围为 $1 \sim N$，且 $nums$ 中不存在重复元素，每两个相邻的数组元素 $nums[i]$、$nums[i + 1]$ 之间都存在关系($1 \leq i \leq N - 1$)，且只可能是以下两种关系中的一种:

1. 连续，此时 $nums[i + 1]$ 等于 $nums[i] + 1$;
2. 不连续，此时 $nums[i + 1]$ 不等于 $nums[i] + 1$。

现在给出一个长度为 $N$ 的数组中任意相邻的数组元素之间的关系，请问共有多少种满足条件的连续数组？
## 输入格式

输入的第一行包含一个整数 $N$ 表示数组长度。

第二行包含 $N - 1$ 个整数，相邻的整数之间使用一个空格分隔，表示连续数组中相邻元素之间的关系，取值只能是 $0$ (表示不连续关系)或 $1$ (表示连续关系)。其中第 $i$ ($1 \leq i \leq N - 1$)个整数表示 $nums[i]$ 和 $nums[i + 1]$ 之间的关系。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
5
0 0 1 1
```
### 样例输出 #1
```
3
```
## 提示

### 样例说明

符合条件的连续数组有：$[1, 5, 2, 3, 4]$、$[2, 1, 3, 4, 5]$、$[5, 4, 1, 2, 3]$。

### 评测用例规模与约定

对于 $30\%$ 的评测用例，$1 \leq N \leq 10$；

对于所有评测用例，$1 \leq N \leq 15$。


---

---
title: "[蓝桥杯 2023 国 Java A] 质数排序"
layout: "post"
diff: 普及+/提高
pid: P12237
tag: ['2023', '素数判断,质数,筛法', '组合数学', '排列组合', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Java A] 质数排序
## 题目描述

我们定义质数排序为将一个序列中的所有下标为质数的位置进行升序排序，其它位置上的数不变。

例如，对 $8, 7, 6, 5, 4, 3, 2, 1$ 进行质数排序会得到 $8, 2, 4, 5, 6, 3, 7, 1$。给定 $n$，求 $1 \sim n$ 的每个排列进行质数排序后的逆序对的数量的和。由于结果很大，你只需要输出答案对 $998244353$ 取模的结果即可。
## 输入格式

输入一行包含一个整数 $n$。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
6
```
## 提示

### 评测用例规模与约定

- 对于 $30\%$ 的评测用例，$n \leq 10$；
- 对于所有评测用例，$1 \leq n \leq 10^6$。


---

---
title: "[蓝桥杯 2024 国 Java B] 园丁"
layout: "post"
diff: 普及+/提高
pid: P12255
tag: ['2024', '数论', '树的遍历', '素数判断,质数,筛法', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java B] 园丁
## 题目描述

小明是一位尽职尽责的园丁。这天他负责维护一棵树，树上有 $n$ 个结点 $1, 2, \ldots, n$，根结点为 $1$，结点 $i$ 的权值为 $a_i$。他需要更改一些结点的权值为任意正整数，使得对于任意一个至少有 $2$ 个儿子结点的结点 $i$ 满足：任意两个 $i$ 的儿子结点的权值的乘积都不是完全平方数。请问小明至少需要修改多少个结点的权值？
## 输入格式

输入共 $n+1$ 行。

第一行为一个正整数 $n$。

第二行为 $n$ 个由空格分开的正整数 $a_1, a_2, \ldots, a_n$。

后面 $n-1$ 行，每行两个正整数表示树上的一条边。
## 输出格式

输出共 $1$ 行，一个整数表示答案。
## 样例

### 样例输入 #1
```
6
1 2 9 8 4 4
1 2
1 3
1 4
2 5
2 6
```
### 样例输出 #1
```
2
```
## 提示

### 样例说明

其中一种方案：将结点 $2, 5$ 的权值分别修改为 $3, 2$。

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，保证 $n \leq 10^3$。
- 对于 $100\%$ 的评测用例，保证 $1\leq n \leq 10^5$，$1 \leq a_i \leq 10^9$。


---

---
title: "[蓝桥杯 2024 国 Java B] 数据库"
layout: "post"
diff: 普及+/提高
pid: P12256
tag: ['2024', '组合数学', '逆元', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java B] 数据库
## 题目描述

小蓝最近设计了一款“阅后即焚”数据库，顾名思义这个数据库只有两种操作：增加一条数据和删除一条数据。简言之，这款数据库中只有一个表，且这个表只有两列：$id$ 和 $value$，其中每条数据都有一个独一无二的编号 $id$，$value$ 则是这条数据对应的存储内容。

数据库操作语句有且仅有两种：

1. $\text{INSERT}$ $id$ $value$：插入一条新的数据，编号为 $id$，内容为 $value$。
2. $\text{DELETE}$ $id$：删除编号为 $id$ 的数据。

现在给出 $N$ 条数据库语句，我们保证按照给出的语句顺序执行是合法的，合法指的是：$\text{INSERT}$ 时数据库中一定不存在编号为 $id$ 的数据，$\text{DELETE}$ 时数据库中一定存在编号为 $id$ 的数据，且同一个编号 $id$ 不会被 $\text{INSERT}$ / $\text{DELETE}$ 多次。

你可以任意调整这些语句的执行顺序，现在请问一共有多少个不同的语句执行顺序，能够使得调整之后的语句顺序依旧是合法的并且按序执行之后数据库内容和给出的初始语句顺序执行后的结果一致。结果一致指的是二者包含的 $id$ 集合是相同的，并且相同的 $id$ 对应的 $value$ 也是相同的。
## 输入格式

第一行一个整数 $N$ 表示有 $N$ 条数据库语句。

接下来输入 $N$ 行，每行一条数据库语句。
## 输出格式

一行一个整数，表示答案。由于答案可能过大，请将答案对 $1\,000\,000\,007$ 取模之后输出。
## 样例

### 样例输入 #1
```
4
INSERT 1 1
INSERT 2 2
DELETE 1
DELETE 2
```
### 样例输出 #1
```
6
```
## 提示

### 样例说明

一共有 $6$ 种不同的排列方式：

| 1 | 2 | 3 | 4 | 5 | 6 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| INSERT 1 1 | INSERT 1 1 | INSERT 2 2 | INSERT 2 2 | INSERT 1 1 | INSERT 2 2 |
| INSERT 2 2 | INSERT 2 2 | INSERT 1 1 | INSERT 1 1 | DELETE 1 | DELETE 2 |
| DELETE 1 | DELETE 2 | DELETE 1 |DELETE 2 | INSERT 2 2 | INSERT 1 1 |
| DELETE 2 | DELETE 1 | DELETE 2 | DELETE 1 | DELETE 2 | DELETE 1 |

它们都是合法的并且执行完后数据库中的内容都一样：没有任何数据。

### 评测用例规模与约定

- 对于 $30\%$ 的评测用例，$1 \leq N \leq 10$。
- 对于 $60\%$ 的评测用例，$1 \leq N \leq 1000$。
- 对于 $100\%$ 的评测用例，$1 \leq N \leq 10^5$，$id$ 和 $value$ 均是 32 位有符号整数。


---

---
title: "[蓝桥杯 2024 国 Java B] 背包问题"
layout: "post"
diff: 普及+/提高
pid: P12258
tag: ['搜索', '堆', '2024', '剪枝', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java B] 背包问题
## 题目描述

神奇商店中一共有 $N$ 种不同的物品，第 $i$ 种物品的重量为 $W_i$，每种物品的数量都是无限个。店主会从中挑选任意种商品，每种商品可以选择任意个并将其装入到一个背包之中，从而可以组合出多种背包（这个背包可以容纳无限多的物品），其中背包的重量就是其中所含物品的重量之和。

小蓝想要的背包中至少要有 $K$ 件物品。小蓝想要知道，在所有满足他要求的背包中，如果将背包重量从小到大排序并去除重复的重量，排名第 $L$ 的重量是多少。
## 输入格式

第一行输入三个整数，用空格分隔，依次是 $N$、$K$、$L$。

第二行输入 $N$ 个用空格分隔的整数表示 $N$ 件物品的重量。
## 输出格式

输出一行，包含一个整数表示答案。
## 样例

### 样例输入 #1
```
7 2 7
84 21 12 3 65 5 41
```
### 样例输出 #1
```
13
```
## 提示

### 样例说明

背包中物品个数大于等于 $2$ 时，从小到大依次出现的背包重量为：

$6 = 3 + 3$、$8 = 3 + 5$、$9 = 3 + 3 + 3$、$10 = 5 + 5$、$11 = 3 + 3 + 5$、$12 = 3 + 3 + 3 + 3$、$13 = 3 + 5 + 5$。

### 评测用例规模与约定

- 对于 $40\%$ 的评测用例，$1 \leq W_i \leq 100$，$1 \leq L \leq 10$。
- 对于 $100\%$ 的评测用例，$1 \leq N \leq 10$，$1 \leq K \leq 10$，$1 \leq W_i \leq 10^9$，$1 \leq L \leq 10^5$


---

---
title: "[蓝桥杯 2024 国 Java B] 激光炮"
layout: "post"
diff: 普及+/提高
pid: P12261
tag: ['数学', '2024', '三分', 'Special Judge', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java B] 激光炮
## 题目描述

小明在二维平面上放置了 $n$ 门激光炮，第 $i$ 门激光炮位于坐标 $(-10^5, a_i)$，射向靶点 $(10^5, b_i)$，形成 $n$ 条线段。他想使用一条垂直于 $x$ 轴且其中一个端点在 $x$ 轴上的线段挡住所有激光炮的发射路线，这条线段的长度最短为多少？
## 输入格式

输入共 $n+1$ 行。

第一行为一个正整数 $n$。

后面 $n$ 行，每行 2 个由空格分开的非负整数表示 $a_i, b_i$。
## 输出格式

输出共 $1$ 行，一个浮点数表示答案（输出四舍五入到 $2$ 位小数）。
## 样例

### 样例输入 #1
```
3
0 100000
100000 200000
200000 0
```
### 样例输出 #1
```
133333.33
```
## 提示

### 样例说明

第 $2,3$ 门激光炮发射路线的交点为 $(-\frac{100000}{3}, \frac{400000}{3})$，因此，只需要在 $(-\frac{100000}{3}, 0)$ 处放置一条长度为 $\frac{400000}{3} = 133333.33$ 的线段即可挡住所有 3 门激光炮。

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，保证 $n \leq 10^2$。
- 对于 $100\%$ 的评测用例，保证 $n \leq 10^5$，$0 \leq a_i, b_i \leq 10^6$。


---

---
title: "[蓝桥杯 2024 国 Python B] 括号与字母"
layout: "post"
diff: 普及+/提高
pid: P12271
tag: ['2024', '前缀和', '栈', '蓝桥杯国赛', '离线处理']
---
# [蓝桥杯 2024 国 Python B] 括号与字母
## 题目描述

给定一个仅包含小写字母和括号的字符串 $S$，保证括号可以两两匹配。

给出 $Q$ 组询问，每组询问给出一个小写字母 $c_i$ 和一个数 $x_i$，询问 $S$ 中有多少对匹配的括号之间有不少于 $x_i$ 个 $c_i$。

## 输入格式

输入的第一行包含一个字符串 $S$。

第二行包含一个整数 $Q$。

接下来 $Q$ 行，每行包含一个小写字母 $c_i$ 和一个整数 $x_i$ 表示一组询问，用一个空格分隔。
## 输出格式

输出 $Q$ 行，每行包含一个整数，依次表示每个询问的答案。
## 样例

### 样例输入 #1
```
((a)()((b)((c))))
3
a 2
b 1
c 1
```
### 样例输出 #1
```
0
3
4
```
## 提示

### 评测用例规模与约定

- 对于 $40\%$ 的评测用例，$|S|, Q \leq 5000$；
- 对于 $70\%$ 的评测用例，$|S| \leq 100000$；
- 对于所有评测用例，$1 \leq |S| \leq 10^6$，$1 \leq Q \leq 100000$，$0 \leq x_i < 10^6$。其中 $|S|$ 表示 $S$ 的长度。


---

---
title: "[蓝桥杯 2024 国 Python B] 异位和"
layout: "post"
diff: 普及+/提高
pid: P12273
tag: ['数学', '2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Python B] 异位和
## 题目描述

给定一个数组 $A$，我们称 $A$ 的异位和数组为另一个等长的数组 $B = F(A)$，满足

$$B_i = \sum_{j \neq i} A_j$$

类似地，其二次异位和数组为 $F(F(A))$，三次异位和数组为 $F(F(F(A)))$，以此类推。

给定若干次询问，每次问 $A$ 的 $k_i$ 次异位和数组的第 $x_i$ 个元素的值是多少。输出答案对 $998244353$ 取模后的结果。
## 输入格式

输入的第一行包含一个整数 $n$。

第二行包含 $n$ 个整数 $A_1, A_2, \ldots, A_n$，相邻整数之间使用一个空格分隔。

第三行包含一个整数 $Q$ 表示询问次数。

接下来 $Q$ 行，每行包含两个整数 $k_i, x_i$ 表示一组询问，用一个空格分隔。
## 输出格式

输出 $Q$ 行，每行包含一个整数，依次表示每个询问的答案。
## 样例

### 样例输入 #1
```
5
1 2 3 4 5
4
1 1
2 5
7 3
999 4
```
### 样例输出 #1
```
14
50
49152
781284616
```
## 提示

### 评测用例规模与约定

- 对于 $60\%$ 的评测用例，$1 \leq n, Q, k_i \leq 5000$；
- 对于所有评测用例，$1 \leq n, Q \leq 10^5$，$1 \leq A_i, k_i \leq 10^9$，$1 \leq x_i \leq n$。


---

---
title: "[蓝桥杯 2024 国 Python B] 设计"
layout: "post"
diff: 普及+/提高
pid: P12274
tag: ['并查集', '2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Python B] 设计
## 题目描述

小蓝是 H 市的市长，她正在用设计软件规划 H 市的道路建设。

小蓝可以选定两个地区，用一条双向道路将这两个地区连接。由于预算等因素的动态变化，小蓝经常需要拆除一些已经建设好的道路，同时，她希望知道对于当前的两个地区，是否存在一条由多条道路组成的路径能够连接这两个地区。
## 输入格式

输入的第一行包含两个正整数 $n, m$，用一个空格分隔，其中 $n$ 表示地区个数，$m$ 表示操作次数。

接下来 $m$ 行，每行表示一个操作。对于每一行：

- $1$ $x_i$ $y_i$ 表示小蓝修建了一条连接地区 $x_i$ 与地区 $y_i$ 的双向道路。
- $2$ 表示小蓝拆除了当前 H 市中还未被拆除的最后修建的一条道路，如果当前城市中已经不存在道路，则小蓝不会进行任何操作。
- $3$ $x_i$ $y_i$ 表示小蓝希望知道地区 $x_i$ 与地区 $y_i$ 是否连通，即是否存在一条由多条道路组成的路径能够连接这两个地区。
## 输出格式

对于每个操作 $3$ 输出 `Yes` 或 `No`，其中 `Yes` 表示连通，`No` 表示不连通。
## 样例

### 样例输入 #1
```
2 5
3 1 2
1 1 2
3 1 2
2
3 1 2
```
### 样例输出 #1
```
No
Yes
No
```
### 样例输入 #2
```
3 8
1 1 2
1 1 3
1 2 3
2
3 2 3
2
3 1 2
3 2 3
```
### 样例输出 #2
```
Yes
Yes
No
```
## 提示

### 评测用例规模与约定

- 对于 $50\%$ 的评测用例，$n, m \leq 3000$。
- 对于所有评测用例，$1 \leq n, m \leq 300000$，$1 \leq x_i, y_i \leq n$，$x_i \neq y_i$。


---

---
title: "[蓝桥杯 2024 国 Python B] 工厂"
layout: "post"
diff: 普及+/提高
pid: P12275
tag: ['贪心', '2024', 'Special Judge', '图论建模', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Python B] 工厂
## 题目描述

H 市是一座制造业十分发达的城市。在 H 市中，工厂可以生产 $n$ 种不同的物品，部分物品都可以以特定的价格 $a_i$ 在市场上售出而带来收益。生产方式分为两类，使用第一类生产方式每个工人可以在一天时间内生产若干件物品 $y$。使用第二类生产方式，每个工人可以在一天时间内使用若干件物品 $x$ 生产若干件物品 $y$，其中 $x \leq y$，即只能将编号较小的物品加工成编号较大的物品。

小蓝作为 H 市的市长自然希望能够最大化收益，由于 H 市的人口非常多，你只需要帮她计算出平均一天内每个工人能够获得的最大收益即可。
## 输入格式

输入的第一行包含两个正整数 $n, m$，用一个空格分隔，其中 $n$ 表示物品种数，$m$ 表示生产方式总数。

第二行包含 $n$ 个正整数 $a_i$，相邻整数之间使用一个空格分隔，表示物品的售价，若 $a_i = 0$ 则表示这种物品无法在市场上售出。

接下来 $m$ 行，每行包含四个非负整数 $x_i, y_i, k_i, w_i$，相邻整数之间使用一个空格分隔，表示一个工人可以在一天时间内使用 $k_i$ 件物品 $x_i$ 生产 $w_i$ 件物品 $y_i$。特殊地，如果 $k_i = 0$（此时 $x_i$ 不一定为 $0$，请忽略 $x_i$ 的值）则表示该种生产方式是第一类生产方式，不需要原材料。
## 输出格式

输出一行包含一个实数，四舍五入保留正好两位小数，表示平均每个工人在一天时间内能够获得的最大收益。
## 样例

### 样例输入 #1
```
3 3
1 0 2
1 1 0 6
1 2 5 10
2 3 6 10
```
### 样例输出 #1
```
9.52
```
## 提示

### 样例说明

$1$ 个工人可以在一天时间内生产 $6$ 份小麦，或者将 $5$ 份小麦加工成 $10$ 份面粉，或者将 $6$ 份面粉加工成 $10$ 份饼干。

那么最理想的情况是 $5$ 个工人生产小麦，$6$ 个工人将小麦加工成面粉，$10$ 个工人将面粉加工成饼干后在市场上以 $2$ 的价格出售。

此时需要 $21$ 个工人生产，共能获得 $200$ 的收益。平均每个工人一天时间内获得的收益约为 $9.52$。

### 评测用例规模与约定

- 对于 $50\%$ 的评测用例，$1 \leq n, m \leq 300$，$w_i = 1$，$0 \leq k_i \leq 1$；
- 另存在 $20\%$ 的评测用例，$x_i = y_i$；
- 对于所有评测用例，$1 \leq n, m \leq 300000$，$0 \leq a_i \leq 10^6$，$1 \leq w_i \leq 10$，$0 \leq k_i \leq 10$，$1 \leq x_i \leq y_i \leq n$。保证数据中至少存在一个 $k_i = 0$。


---

---
title: "[蓝桥杯 2024 国 Python A] 羊圈"
layout: "post"
diff: 普及+/提高
pid: P12282
tag: ['2024', 'Special Judge', '期望', '蓝桥杯国赛', '状压 DP']
---
# [蓝桥杯 2024 国 Python A] 羊圈
## 题目描述

小蓝养了 $m$ 头羊，它们站成一排，第 $i$ 头羊有 $p_i$ 的概率跑掉。小蓝为了不让他的羊跑掉，购买了 $n$ 个羊圈，第 $i$ 个羊圈最多可以框住连续的 $l_i$ 只羊，让它们无法逃跑。小蓝想知道，在合理安排羊圈位置的情况下，能跑掉的羊的数量的期望的最小值是多少？

请注意：羊圈不一定都使用，也不一定按顺序使用。
## 输入格式

输入的第一行包含两个正整数 $n, m$，用一个空格分隔。

第二行包含 $n$ 个正整数 $l_1, l_2, \cdots, l_n$，相邻整数之间使用一个空格分隔。

第三行包含 $m$ 个浮点数 $p_1, p_2, \cdots, p_m$，每个浮点数小数点后不超过 $2$ 位小数，相邻浮点数之间使用一个空格分隔。
## 输出格式

输出一行包含一个浮点数表示答案，四舍五入保留正好两位小数。
## 样例

### 样例输入 #1
```
3 10
1 2 3
0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
```
### 样例输出 #1
```
1.00
```
## 提示

### 样例说明

第一个羊圈框住第 $5$ 头羊，第二个羊圈框住第 $9$ 至第 $10$ 头羊，第三个羊圈框住第 $6$ 至第 $8$ 头羊，剩下的羊逃跑的数量的期望为 $0.1 + 0.2 + 0.3 + 0.4 = 1.0$

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，$1 \leq n \leq 8$；
- 对于所有评测用例，$1 \leq n \leq 15$，$1 \leq m \leq 200$，$1 \leq l_i \leq m$，$0 \leq p_i \leq 1$。


---

---
title: "[蓝桥杯 2024 国 Python A] 排练"
layout: "post"
diff: 普及+/提高
pid: P12283
tag: ['贪心', '二分', '2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Python A] 排练
## 题目背景

本题测试数据不保证正确。
## 题目描述

小蓝的班上有 $n$ 名同学正在为校庆活动排练节目，他们在舞台上站成一排。若把他们看做在数轴上，从左到右第 $i$ 名同学的位置即为 $a_i$。为了美观，小蓝想在队伍中插入一些新同学，使得在新队伍中，对于任意三名相邻的同学的位置 $a_{i-1}, a_i, a_{i+1}$ 满足 $a_{i+1} - a_i \leq 2(a_i - a_{i-1})$。小蓝想知道最少增加多少名同学可以满足条件。

## 输入格式

输入的第一行包含一个正整数 $n$。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$ ，相邻整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
4
1 3 16 17
```
### 样例输出 #1
```
2
```
## 提示

### 样例说明

其中一种方案：在 $6, 10$ 处插入两名同学，新队伍为 $1, 3, 6, 10, 16, 17$，满足条件。

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，$1 \leq n \leq 10^3$；
- 对于所有评测用例，$1 \leq n \leq 10^5$，$1 \leq a_i \leq 10^8$，$a_{i+1} > a_i$。


---

---
title: "[蓝桥杯 2024 国 Java A] 空间传送装置"
layout: "post"
diff: 普及+/提高
pid: P12286
tag: ['2024', '数论', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java A] 空间传送装置
## 题目描述

蓝桥王国拥有 $42$ 座城市以及 $42$ 位骑士。这些骑士按照 $1$ 到 $42$ 的编号顺序，分别居住在对应编号的城市中。即第 $1$ 位骑士居住在城市 $1$，第 $2$ 位骑士居住在城市 $2$，依此类推。

最近，王国中引入了一项革命性技术：空间传送装置。该装置可以根据一个长度为 $42$ 的数字排列 $a$，将所有骑士一次性传送至新的城市。

排列 $a$ 必须由 $1 \sim 42$ 共 $42$ 个数字组成，且每个数字只出现一次。在传送操作中，位于城市 $i$（$i = 1, 2, 3, \cdots, 42$）的骑士会被传送到城市 $a_i$。例如，如果 $a_1$ 的值为 $3$，那么当前位于城市 $1$ 的骑士会被传送至城市 $3$。

为测试技术的可靠性，王国决定连续 $2024$ 天每天使用同一排列 $a$ 进行一次传送操作。

小蓝负责为这次测试设计排列 $a$，她的目标是确保所有骑士在经过 $2024$ 天传送后，都能返回自己的起始城市。而在此之前的任何一天，不会出现所有骑士都回到起始城市的情况。

请问，有多少种不同的数字排列 $a$ 能满足小蓝的需求？由于答案可能很大，因此你只需要将答案对 $10^9 + 7$ 取模后提交即可。

数字排列 $a$ 是由 $1$ 到 $42$ 这 $42$ 个数字按照一定顺序排列而成的序列。每个数字在排列中只能出现一次，且所有数字必须全部包含在排列中。

如果两个排列中至少有一个位置上的数字不同，则这两个排列被视为不同的数字排列。例如，$\{1, 2, 3, \cdots, 42\}$ 和 $\{1, 3, 2, \cdots, 42\}$ 就是不同的数字排列，因为它们在第二个位置上的数不相同。
## 输出格式

这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。


---

---
title: "[蓝桥杯 2024 国 Java A] 基因组合"
layout: "post"
diff: 普及+/提高
pid: P12290
tag: ['2024', '字典树 Trie', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java A] 基因组合
## 题目描述

在医学领域，两位杰出的医生，小蓝和小乔，正在研究一种新型的基因治疗方案。他们需要从 $n$ 个候选基因中分别选择一个，并通过某种特定的运算将它们组合起来，以评估治疗方案的有效性。

已知这 $n$ 个候选基因可以用一个数组 $\{a_1, a_2, \cdots, a_n\}$ 来表示，其中 $a_i$ 代表第 $i$ 个基因的特性数值。而将两个基因组合起来的方式，则是将它们的特性数值进行异或运算（用符号 $\oplus$ 表示）。

小蓝倾向于激进的治疗方案，他总是希望所选基因组合的异或值尽可能大，以获得显著的治疗效果。小乔则更注重治疗的稳定性，他总是希望所选基因组合的异或值尽可能小，以降低治疗风险。

现在，两位医生需要决定先后选择的顺序。

假设双方都足够聪明，且都会使用最佳策略来最大化或最小化基因组合的异或值。请问，如果小蓝先选择基因，小乔后选择，那么他们能够得到的基因组合的最大异或值会是多少？反之，如果小乔先选择基因，小蓝后选择，那么他们能够得到的基因组合的最小异或值又会是多少？
## 输入格式

输入的第一行包含一个整数 $n$，表示候选基因的数量。

第二行包含 $n$ 个整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔，依次表示每个基因的特性数值。
## 输出格式

输出一行，包含两个整数。第一个整数表示小蓝先选择基因时能够得到的基因组合的最大异或值；第二个整数表示小乔先选择基因时能够得到的基因组合的最小异或值。
## 样例

### 样例输入 #1
```
4
2 3 5 6
```
### 样例输出 #1
```
3 5
```
## 提示

### 样例说明

在给定样例中，候选基因的数量为 $4$，特性数值分别为 $2$、$3$、$5$ 和 $6$。

当小蓝先选择基因时，小蓝可以选择特性值为 $6$ 的基因，使基因组合的异或值尽可能大，小乔则会选择特性值为 $5$ 的基因，使基因组合的异或值尽可能小：$6 \oplus 5 = 3$。

当小乔先选择基因时，小乔可以选择特性值为 $6$ 的基因，使基因组合的异或值尽可能小，小蓝则会选择特性值为 $3$ 的基因，使基因组合的异或值尽可能大：$6 \oplus 3 = 5$。

### 评测用例规模与约定

- 对于 $30\%$ 的评测用例，$2 \leq n \leq 10^3$，$1 \leq a_i \leq 10^5$。
- 对于所有评测用例，$2 \leq n \leq 10^5$，$1 \leq a_i \leq 10^9$。


---

---
title: "[蓝桥杯 2024 国 Java A] 粉刷匠小蓝"
layout: "post"
diff: 普及+/提高
pid: P12291
tag: ['2024', '组合数学', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java A] 粉刷匠小蓝
## 题目描述

小蓝是一名勤劳的粉刷匠，今天他收到了一份来自蓝桥学院的委托，需要为学院的 $n$ 面墙进行粉刷。这 $n$ 面墙从左到右依次排列，编号从 $1$ 到 $n$。起初，所有墙的颜色均为白色。

学院希望小蓝能将其中一部分墙刷成蓝色，以营造一种冷色调的艺术氛围。为此，学院给小蓝提供了一个长度为 $n$ 的数组 $\{a_1, a_2, \cdots, a_n\}$，来指定每面墙的颜色要求。具体地，如果 $a_i = 0$，则第 $i$ 面墙保持白色；如果 $a_i = 1$，则小蓝需要将第 $i$ 面墙刷成蓝色。

小蓝每次只能刷一面墙，他会将一面墙完整的刷完后再刷另一面墙。为了确保整体墙面的视觉效果，学院还提一个小小的要求：在粉刷过程中，如果要将第 $i$ 面墙刷成蓝色，那么它右侧（第 $i + 1$ 面墙 $\sim$ 第 $n$ 面墙）蓝色的墙的个数必须是偶数（包括 $0$ 个）。

现在，请你计算小蓝共有多少种刷墙顺序可以满足学院的要求？由于答案可能很大，因此你只需要给出答案对 $10^9 + 7$ 取模后的结果即可。

在本题中，不同的刷墙方法只与小蓝刷墙的顺序有关。例如，先刷第 $1$ 面墙再刷第 $2$ 面墙，与先刷第 $2$ 面墙再刷第 $1$ 面墙，被视为两种不同的方法。
## 输入格式

输入的第一行包含一个正整数 $n$，表示墙的数量。

第二行包含 $n$ 个整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔，按编号从 $1$ 到 $n$ 的顺序依次表示每面墙的颜色要求。
## 输出格式

输出一行包含一个整数，表示满足要求的刷墙顺序数量对 $10^9 + 7$ 取模后的结果。
## 样例

### 样例输入 #1
```
4
1 1 1 1
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
2
0 0
```
### 样例输出 #2
```
1
```
## 提示

### 样例说明

在样例 $1$ 中，有 $4$ 面墙，且都需要刷为蓝色。总共有以下 $4$ 种粉刷顺序可以满足学院的要求：

1. $[1,2,3,4]$：先刷第 $1$ 面，再刷第 $2$ 面，然后刷第 $3$ 面，最后刷第 $4$ 面。
2. $[1,3,4,2]$：先刷第 $1$ 面，再刷第 $3$ 面，然后刷第 $4$ 面，最后刷第 $2$ 面。
3. $[2,3,1,4]$：先刷第 $2$ 面，再刷第 $3$ 面，然后刷第 $1$ 面，最后刷第 $4$ 面。
4. $[3,4,1,2]$：先刷第 $3$ 面，再刷第 $4$ 面，然后刷第 $1$ 面，最后刷第 $2$ 面。

在样例 2 中，有 $2$ 面墙，且都要保持白色。只有 $1$ 种刷墙方法可以满足学院的要求，即不刷任何一面墙壁。

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，$1 \leq n \leq 13$，$a_i = 1$。
- 对于所有评测用例，$1 \leq n \leq 2 \times 10^5$，$0 \leq a_i \leq 1$。


---

---
title: "[蓝桥杯 2024 国 C] 循环位运算"
layout: "post"
diff: 普及+/提高
pid: P12316
tag: ['动态规划 DP', '2024', '背包 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 C] 循环位运算
## 题目背景

蓝桥杯原题为 **做完 $m$ 次操作**，根据下载得到的测试数据分析应当为 **做了不超过 $m$ 次操作**。洛谷的题面根据实际测试数据进行编写。
## 题目描述

给定 $n$ 个数 $A_i$，每个数我们都将其视为一个 $32$ 位的二进制数。你可以进行 $m$ 次操作，每次选择任意一个数将其循环左移一次。

循环左移表示将某个数的二进制位均左移一位，同时最高位移动到最低位。例如对于一个 $8$ 位二进制数 $10010010$，循环左移一次后为 $00100101$，两次后为 $01001010$。

问做了**不超过** $m$ 次操作后，$n$ 个数的和最大是多少。
## 输入格式

输入的第一行包含两个整数 $n, m$，用一个空格分隔。

接下来 $n$ 行，每行包含一个整数 $A_i$。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3 9
2365587456
2399141888
9437184
```
### 样例输出 #1
```
7535067152
```
## 提示

### 评测用例规模与约定

- 对于 $30\%$ 的评测用例，$n, m \leq 12$；
- 对于 $60\%$ 的评测用例，$n, m \leq 100$；
- 对于所有评测用例，$1 \leq n, m \leq 1000$，$0 \leq A_i < 2^{32}$。


---

---
title: "[蓝桥杯 2024 国研究生组] 分割字符串"
layout: "post"
diff: 普及+/提高
pid: P12318
tag: ['模拟', '字符串', '图论', '2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国研究生组] 分割字符串
## 题目描述

给定一个仅含小写字母的字符串 $S$ ，你可将其分割成任意份子串。我们要求分割后任何一段的长度都不大于 $5$ ，且相邻的两个子串不能含有相同的字母。例如 $\tt{abcdae}$ 分割为 $\tt{abcd}$ 和 $\tt{ae}$ 都含 $\tt{a}$，不合法，但可以分割为 $\tt{abcda}$ 和 $\tt{e}$，或者 $\tt{ab}$、$\tt{cd}$、$\tt{ae}$ 等。

问该字符串的所有长度小于等于 $5$ 的本质不同的子串中，哪些在任何分割方案中都没有出现过，按字典序将它们全部输出。

## 输入格式

输入一行包含一个字符串表示 $S$。
## 输出格式

输出的第一行包含一个整数 $t$ ，表示题目要求的字符串的数量。

接下来 $t$ 行，每行包含一个要求的字符串 $r_i$ ，按字典序排序。
## 样例

### 样例输入 #1
```
abab
```
### 样例输出 #1
```
4
ab
aba
ba
bab
```
## 提示

### 评测用例规模与约定

- 对于 $30\%$ 的评测用例，$|S| \leq 10$；
- 对于 $60\%$ 的评测用例，$|S| \leq 5000$；
- 对于所有评测用例，$1 \leq |S| \leq 10^5$。


---

---
title: "[蓝桥杯 2025 国 B] 蓝桥星数字"
layout: "post"
diff: 普及+/提高
pid: P12835
tag: ['数学', '二分', '2025', '数位 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 B] 蓝桥星数字
## 题目描述

地球上，我们习惯用十进制数字来记录万物，从个位、十位，逐级向上构成了我们熟悉的自然数体系。

然而，在遥远的蓝桥星，数字的排列和解读方式却与我们截然不同。蓝桥星人并不单纯地以数值大小来衡量一个数字，他们更注重数字内部蕴含的“节奏感”。因此，对他们而言，任何一个有效的数字，其从左到右每一位上的数字奇偶性都必须是交替出现的。

例如，对于 10 这个数字，其十位是奇数 1，个位是偶数 0，呈现奇偶交替，因此 10 是个有效的数字。而对于 13 这个数字，其十位是奇数 1，个位也是奇数 3，不符合奇偶交替的条件，因此 13 不是个有效的数字。

根据这个规则，蓝桥星的数字序列从 10 开始，依次为 $10, 12, 14, 16, 18, 21, 23, 25, 27, 29, 30, \ldots$。

只不过，随着文明的发展，蓝桥星人需要一种方法，来快速找到第 $N$ 个符合这种奇偶交替规则的数字，以满足其日益增长的数字处理需求。现在，请你帮助蓝桥星人，编写程序找出并输出第 $N$ 个符合奇偶交替规则的数字。

## 输入格式

输入包含一个正整数 $N$，表示需要查找第 $N$ 个符合规则的数字。

## 输出格式

输出一个整数，表示第 $N$ 个符合奇偶交替规则的数字。
## 样例

### 样例输入 #1
```
1
```
### 样例输出 #1
```
10
```
### 样例输入 #2
```
11
```
### 样例输出 #2
```
30
```
## 提示

**【评测用例规模与约定】**

对于 20% 的评测用例，$1 \leq N \leq 10^5$。

对于 100% 的评测用例，$1 \leq N \leq 10^{12}$。


---

---
title: "[蓝桥杯 2025 国 A] 树"
layout: "post"
diff: 普及+/提高
pid: P12844
tag: ['2025', '树形 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 A] 树
## 题目描述

给定一棵树，你需要从树上选择若干个点，使得选择的任意两点之间的距离均大于 $2$。

输出符合条件的选择的方案数（可以选中任意个，但不能不选）。由于答案可能很大，你只需要输出答案对 $998244353$ 取模的结果。
## 输入格式

输入的第一行包含一个正整数 $n$。

接下来 $n - 1$ 行，每行包含两个正整数 $u_i, v_i$，用一个空格分隔，表示结点 $u_i$ 和结点 $v_i$ 之间有一条边。保证给定的图是一棵树。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
6
1 2
1 3
3 4
3 5
5 6
```
### 样例输出 #1
```
12
```
## 提示

**【评测用例规模与约定】**

对于 40% 的评测用例，$1 \leq n \leq 20$；

对于 80% 的评测用例，$1 \leq n \leq 5000$；

对于所有评测用例，$1 \leq n \leq 3 \times 10^5$，$u_i \neq v_i$，$1 \leq u_i, v_i \leq n$。


---

---
title: "[蓝桥杯 2025 国 Python A] 上升序列构造"
layout: "post"
diff: 普及+/提高
pid: P12872
tag: ['贪心', '2025', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Python A] 上升序列构造
## 题目描述

小蓝手里有一个长度为 $n$ 的十进制正整数序列 $(a_1, a_2, \cdots, a_n)$，他希望修改这个序列中的一些数使其变为一个上升序列，即满足对于所有的 $i$，$2 \leq i \leq n$，都有 $a_{i-1} < a_i$。他只能通过在这些正整数的十进制表示中增加数字 0 来构造这个上升序列，他想知道最少增加多少个 0 可以满足条件。
## 输入格式

输入的第一行包含一个正整数 $n$。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
6
527559 483873 913413 181072 822487 853172
```
### 样例输出 #1
```
8
```
## 提示

**【样例说明】**

其中一种方案，更改后的序列为 $(527559, 4083873, 9013413, 10081072, 80022487, 85003172)$，共增加 8 个 $0$。

**【评测用例规模与约定】**

对于 20% 的评测用例，$1 \leq n \leq 10$；

对于所有评测用例，$1 \leq n \leq 5000$，$1 \leq a_i \leq 10^6$。增加 0 之后允许超过 $10^6$。



---

---
title: "[蓝桥杯 2025 国 Python A] 网络流量监控"
layout: "post"
diff: 普及+/提高
pid: P12875
tag: ['模拟', '字符串', '2025', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Python A] 网络流量监控
## 题目背景

2025-06-16 21:45 根据题意和样例，目前洛谷数据的 $q_i$ 中不带 `*` 通配符。如果蓝桥杯官方数据中证实带有通配符，那么我们会修改本题数据。
## 题目描述

网络安全团队需要开发一个系统来监控和检测恶意网络流量。他们收集了一系列已知的恶意请求路径模式，每个模式都有一个对应的风险等级。你的任务是实现一个算法，检测给定的网络请求路径是否匹配这些模式，并返回匹配模式中最高的风险等级。下面是恶意请求路径的相关描述：

### 路径格式
- 路径由斜杠（/）分隔的若干段组成，如 `/api/users/profile`。
- 路径总是以斜杠（/）开头。
- 路径中的每一段可以是由小写英文字母和数字组成的非空字符串。当路径为路径模式时，路径中的一段还可以是通配符 `*` 或 `**`。

### 通配符规则
- 通配符包括单通配符（`*`）和双通配符（`**`），只能是路径模式中的完整一段。一个路径中最多有一段通配符，不能出现两个单通配符，不能出现两个双通配符，也不能同时出现单通配符和双通配符。
- 单通配符（`*`）用于匹配路径中的任意一段。
    - 例如：`/api/*/delete` 可以匹配 `/api/users/delete` 或 `/api/files/delete`，但不能匹配 `/api/admin/users/delete`。
- 双通配符（`**`）用于匹配路径中的零段或连续多段。
    - 例如：`/api/admin/**` 可以匹配 `/api/admin`、`/api/admin/users` 或 `/api/admin/users/profile`。
    - 例如：`/static/**/execute` 可以匹配 `/static/execute`、
`/static/js/execute` 或 `/static/css/js/execute`。

### 风险评估
- 每个恶意路径模式都有一个风险等级。
- 如果一个请求同时匹配多个模式，返回风险等级最高的。
- 如果不匹配任何模式，返回 `SAFE`。

你需要实现一个算法，给定恶意请求路径模式集合和一系列网络请求路径，判断每个网络请求是否触发警报，并且返回触发的最高风险等级。
## 输入格式

输入的第一行包含一个正整数 $n$ ，表示恶意路径模式的数量

接下来 $n$ 行，每行包含一个整数 $l_i$ 和一个字符串 $p_i$ ，用一个空格分隔，表示一个恶意请求路径模式，$l_i$ 表示风险等级，$p_i$ 表示路径模式。

接下来一行包含一个整数 $m$ ，表示要检测的网络请求数量。

接下来 $m$ 行，每行包含一个字符串 $q_i$ ，表示一个网络请求路径。
## 输出格式

对于每个网络请求路径，输出一行，包含检测结果。如果触发警报，输出 `ALERT: [风险等级]`；如果没有触发警报，输出 `SAFE`。
## 样例

### 样例输入 #1
```
5
80 /api/admin/**
60 /api/*/delete
75 /*/config/system
90 /api/users/*/password
50 /static/**/execute
8
/api/users/profile
/api/admin/users
/api/config/delete
/dev/config/system
/static/js/execute
/api/users/123/password
/static/css/js/execute
/api/admin
```
### 样例输出 #1
```
SAFE
ALERT: 80
ALERT: 60
ALERT: 75
ALERT: 50
ALERT: 90
ALERT: 50
ALERT: 80
```
## 提示

**【样例说明】**

1. `/api/users/profile` - 不匹配任何模式，所以是 SAFE。
2. `/api/admin/users` - 匹配 `/api/admin/**`，风险等级 80。
3. `/api/config/delete` - 匹配 `/api/*/delete`，其中 `*` 匹配 `config`，风险等级 60。
4. `/dev/config/system` - 匹配 `/*/config/system`，其中 `*` 匹配 `dev`，风险等级 75。
5. `/static/js/execute` - 匹配 `/static/**/execute`，其中 `**` 匹配 `js`，风险等级 50。
6. `/api/users/123/password` - 匹配 /`api/users/*/password`，其中 `*` 匹配 `123`，风险等级 90。
7. `/static/css/js/execute` - 匹配 `/static/**/execute`，其中 `**` 匹配 `css/js`，风险等级 50。
8. `/api/admin` - 匹配 `/api/admin/**`，其中 `**` 匹配空（0 个段），风险等级 80。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，$1 \leq n \leq 10, 1 \leq m \leq 10$；

对于 $40\%$ 的评测用例，$1 \leq n \leq 100, 1 \leq m \leq 100$；

对于 $60\%$ 的评测用例，$1 \leq n \leq 1000, 1 \leq m \leq 1000$；

对于所有评测用例，$1 \leq n \leq 10,000$，$1 \leq m \leq 1000$，$1 \leq l_i \leq 50000$，$1 \leq |p_i| \leq 50$，$1 \leq |q_i| \leq 50$。


---

---
title: "[蓝桥杯 2025 国 Python A] 杨辉三角"
layout: "post"
diff: 普及+/提高
pid: P12876
tag: ['数学', '2025', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Python A] 杨辉三角
## 题目描述

小蓝最近迷上了杨辉三角, 杨辉三角是一个无限向下递增的数字三角形。下图展示了杨辉三角的前 $11$ 行：

![](https://cdn.luogu.com.cn/upload/image_hosting/ofo2lqoz.png)

我们定义函数 $f(i)$ 表示数字 $i$ 在杨辉三角中出现的次数（其中 $i \geq 2$）。

现在，给定一个正整数 $n$（$n \geq 2$），请你完成以下任务：
- 对于所有满足 $2 \leq x \leq n$ 的整数 $x$，计算出对应的 $f(x)$；
- 将所有具有相同 $f(x)$ 值的数字归为一组；
- 统计并输出每个不同的 $f(x)$ 值出现了多少次。
## 输入格式

输入一行包含一个正整数 $n$。

## 输出格式

输出若干行。第 $i$ 行包含两个整数 $v_i, c_i$，用一个空格分隔，表示使得函数 $f(x) = v_i$ 的个数为 $c_i$。按照 $v_i$ 从小到大的顺序输出。
## 样例

### 样例输入 #1
```
5
```
### 样例输出 #1
```
1 1
2 3
```
## 提示

**【样例说明】**

$x$ 的取值范围是 $[2, 5]$，其中 $f(2) = 1$，$f(3) = f(4) = f(5) = 2$，即值为 $1$ 出现了 $1$ 次，值为 $2$ 出现了 $3$ 次。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，$2 \leq n \leq 100$；

对于 $40\%$ 的评测用例，$2 \leq n \leq 1000$；

对于 $60\%$ 的评测用例，$2 \leq n \leq 10,000$；

对于所有评测用例，$2 \leq n \leq 100,000$。


---

---
title: "[蓝桥杯 2025 国 Python A] 心意"
layout: "post"
diff: 普及+/提高
pid: P12877
tag: ['2025', 'KMP 算法', '差分', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Python A] 心意
## 题目描述

小蓝有一个序列 $a$，同时他的朋友小乔有一个序列 $b$。

我们认为两个序列是和谐的，当且仅当存在某个数 $x$，使得对于所有的 $i$ 有 $a_i + x = b_i$。

现在小蓝可以让序列 $a$ 旋转，即通过一次参数为 $k$ 的旋转可以将序列 $a_1, a_2, \cdots, a_n$ 变为 $a_{1+k}, a_{2+k}, \cdots, a_n, a_1, a_2, \cdots, a_k$。

小蓝希望知道，是否存在这样的旋转操作，能够让序列 $a$ 和 $b$ 是和谐的。

输出共一行，一个自然数 $k$ 表示参数为 $k$ 的旋转操作能够让 $a, b$ 是和谐的，如果存在多个这样的 $k$，请输出最小的 $k$，如果不存在这样的 $k$，请输出 $-1$。
## 输入格式

输入的第一行包含一个正整数 $n$。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔。

第三行包含 $n$ 个正整数 $b_1, b_2, \cdots, b_n$，相邻整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案，如果不存在，请输出整数 $-1$。
## 样例

### 样例输入 #1
```
4
2 3 4 5
2 3 4 1
```
### 样例输出 #1
```
1
```
## 提示

**【样例说明】**

小蓝可以让序列 $a$ 旋转得到 $3 \ 4 \ 5 \ 2$，根据和谐序列的定义，令 $x = -1$，那么此时 $a, b$ 就是和谐的。

**【评测用例规模与约定】**

对于 $50\%$ 的评测用例，$n \leq 3000$；

对于 $80\%$ 的评测用例，对于任意 $i \neq j$ 有 $a_i \neq a_j$；

对于所有评测用例，$1 \leq n \leq 5 \times 10^5$，$1 \leq a_i, b_i \leq 10^9$。


---

---
title: "[蓝桥杯 2025 国 C] 数字配对"
layout: "post"
diff: 普及+/提高
pid: P12880
tag: ['动态规划 DP', '2025', '双指针 two-pointer', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 C] 数字配对
## 题目描述

小蓝有一个长度为 $n$ 的正整数数组 $A = [a_1, a_2, \cdots, a_n]$，每当他从中拿出一对数 $(a_i, a_j)$，其中 $i < j$，他会得到它们的差 $b = a_j - a_i$。然而，他特别喜欢整数 $1$，所以他想知道在数组 $A$ 中最多同时能取出多少对正整数 $(a_i, a_j)$，每个数最多被取一次，使得它们的差为 $1$。
## 输入格式

输入的第一行包含一个正整数 $n$。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
6
2 1 3 6 4 7
```
### 样例输出 #1
```
2
```
## 提示

**【样例说明】**

其中一种方案：$(a_1, a_3), (a_4, a_6)$。

提示：$(a_1, a_2)$ 的差为 $a_2 - a_1 = -1$，不是小蓝喜欢的。

**【评测用例规模与约定】**

对于 $40\%$ 的评测用例，$1 \leq n \leq 10^3$，$1 \leq a_i \leq 10^3$；

对于所有评测用例，$1 \leq n \leq 10^6$，$1 \leq a_i \leq 10^6$。


---

---
title: "[蓝桥杯 2025 国 C] 数列染色"
layout: "post"
diff: 普及+/提高
pid: P12882
tag: ['动态规划 DP', '单调队列', '2025', '动态规划优化', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 C] 数列染色
## 题目描述

有一个长度为 $n$ 的数列 $(a_1, a_2, \cdots, a_n)$，初始时只有 $a_1$ 和 $a_n$ 是黑色的，其它数都是白色的。小蓝可以选择若干白色的数将其染黑，但是必须满足相邻的两个黑色的数之间最多包含 $k$ 个白色的数，他想让所有黑色的数的和尽可能小，请问他最少可以让所有黑色的数的和为多少。
## 输入格式

输入的第一行包含两个整数 $n, k$，用一个空格分隔。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
8 2
5 2 7 5 5 9 3 7
```
### 样例输出 #1
```
19
```
## 提示

**【样例说明】**

选择染黑 $a_2, a_5$，黑色的数的和为 $5 + 2 + 5 + 7 = 19$。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，$1 \leq n \leq 10$；

对于 $50\%$ 的评测用例，$1 \leq n \leq 5000$；

对于所有评测用例，$0 \leq k < n \leq 10^5$，$1 \leq a_i \leq 10^6$。



---

---
title: "[蓝桥杯 2025 国 C] 正方形构造"
layout: "post"
diff: 普及+/提高
pid: P12883
tag: ['2025', '组合数学', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 C] 正方形构造
## 题目描述

小蓝正在二维坐标系中构造正方形，他手上有 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，他想知道有多少个有序四元组 $(i, j, p, q)$ 满足 $i, j, p, q$ 互不相同，且四个点：$(0,0)$、$(-a_i, a_j)$、$(a_p, a_q)$、$(a_p - a_i, a_j + a_q)$ 能构成一个正方形？
## 输入格式

输入的第一行包含一个正整数 $n$ 。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$ ，相邻整数之间使用一个空格分隔。

## 输出格式

输出一行包含一个整数表示答案。答案可能很大，请输出答案除以 $1000000007$ （即 $10^9 + 7$ ）的余数。
## 样例

### 样例输入 #1
```
15
1 1 1 1 2 2 1 2 2 2 1 1 1 1 1
```
### 样例输出 #1
```
8760
```
## 提示

**【样例说明】**

可用的数一共有 $10$ 个 $1$ 和 $5$ 个 $2$。

取 $a_i = 1, a_j = 2, a_p = 2, a_q = 1$ 时，有 $A_{10}^2 A_{5}^2 = 1800$ 种方案；

取 $a_i = 2, a_j = 1, a_p = 1, a_q = 2$ 时，有 $A_{10}^2 A_{5}^2 = 1800$ 种方案；

取 $a_i = 1, a_j = 1, a_p = 1, a_q = 1$ 时，有 $A_{10}^{4} = 5040$ 种方案；

取 $a_i = 2, a_j = 2, a_p = 2, a_q = 2$ 时，有 $A_{5}^{4} = 120$ 种方案；

总共有 $8760$ 种方案。

**【评测用例规模与约定】**

对于 $40\%$ 的评测用例，$1 \leq n \leq 100$；

对于所有评测用例，$1 \leq n \leq 1000000$，$1 \leq a_i \leq 1000$。


---

---
title: "[蓝桥杯 2025 国 C] 整齐的数"
layout: "post"
diff: 普及+/提高
pid: P12884
tag: ['2025', '数位 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 C] 整齐的数
## 题目描述

小蓝喜欢整齐的数，也就是对于一个数，他喜欢那些所有相邻数位上数字的差的绝对值之和较小的数。

小蓝认为，如果一个数所有的相邻数位之间的差值的绝对值之和不超过 $m$ ，这个数就是整齐的。

给定 $n, m$ ，请你帮小蓝求出 $n$ 以内有多少个非负整数是整齐的。
## 输入格式

输入一行包含两个正整数 $n, m$ ，用一个空格分隔。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
233 1
```
### 样例输出 #1
```
46
```
## 提示

**【样例说明】**

符合输入要求的所有数分别为：

- 0,1,2,3,4,5,6,7,8,9；
- 10,11,12,21,22,23,32,33,34,43,44,45,54,55,56,65,66,67,76,77,78,87,88,89,98,99；
- 100,110,111,112,122,211,221,222,223,233。

**【评测用例规模与约定】**

对于 30% 的评测用例，$1 \leq n \leq 10^6$；

对于所有评测用例，$1 \leq n \leq 10^{18}$，$1 \leq m \leq 200$。


---

---
title: "[蓝桥杯 2025 国 Java B] 道具摆放"
layout: "post"
diff: 普及+/提高
pid: P12890
tag: ['树状数组', '2025', '分治', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Java B] 道具摆放
## 题目描述

小蓝是社区剧团的道具员，他负责管理一排编号为 $1$ 到 $N$ 的道具箱。平常，这些道具箱会按编号升序排列在舞台上。

今天晚上有一场重要的演出，演出开始前，导演小李递给小蓝一份清单，上面写着他想要的道具箱排列顺序：$P_1, P_2, \ldots, P_N$。导演希望小蓝在演出过程中将这排箱子调整成这个顺序。由于舞台空间狭小，每次调整只能交换相邻两个箱子的位置。且每完成一次交换，舞台灯光就会闪烁一次作为提示。

灯光系统有个特别的节奏设定：每进行 $M$ 次闪烁，灯光就会切换一种模式。为了配合这种节奏，导演强调：必须在某次灯光切换模式的那一瞬间完成所有调整工作。这意味着，小蓝完成调整所需的交换次数必须是 $M$ 的整数倍。

现在，请你帮小蓝计算一下，他最少需要多少次交换操作才能按照导演的要求完成调整。如果无论如何都无法满足要求，则输出 $-1$。

## 输入格式

第一行包含两个整数 $N$ 和 $M$，分别表示道具箱的数量和灯光模式切换的周期。

第二行包含 $N$ 个整数 $P_1, P_2, \ldots, P_N$，表示导演想要的道具箱排列顺序。
## 输出格式

输出一个整数，表示最少需要的操作次数。如果无法满足导演的要求，则输出 $-1$。
## 样例

### 样例输入 #1
```
3 2
3 1 2
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3 3
1 2 3
```
### 样例输出 #2
```
0
```
### 样例输入 #3
```
3 2
1 3 2
```
### 样例输出 #3
```
-1
```
## 提示

**【评测用例规模与约定】**

对于 $50\%$ 的评测用例，$1 \leq N, M \leq 10^2$，$1 \leq P_i \leq N$，$P_1, P_2, \ldots, P_N$ 互不相同。

对于 $100\%$ 的评测用例，$1 \leq N \leq 10^5$，$1 \leq M \leq 10^9$，$1 \leq P_i \leq N$，$P_1, P_2, \ldots, P_N$ 互不相同。



---

---
title: "[蓝桥杯 2025 国 Java B] 隔离网络"
layout: "post"
diff: 普及+/提高
pid: P12893
tag: ['并查集', '2025', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Java B] 隔离网络
## 题目描述

小蓝负责一家科技公司的数据中心安全。该数据中心包含 $N$ 台服务器，编号为 $1$ 到 $N$，以及 $M$ 条数据链路，编号为 $1$ 到 $M$。每条数据链路都连接着两台服务器。

最近，数据中心遭到了网络攻击，病毒正在通过这些链路快速蔓延。为了阻止病毒扩散，小蓝需要采取紧急措施，对网络进行隔离。他计划进行一系列操作，每次操作都包含以下两个步骤：

1. 确定当前网络中所有连通的服务器集群——即通过链路直接或间接相连的服务器集合。
2. 对于每个连通的服务器集群，禁用该集群内编号最小的那条数据链路，以切断病毒传播的途径。

小蓝会重复执行上述操作，直到数据中心的所有数据链路都被禁用、整个数据中心的网络都被隔离。对此，请你帮助小蓝计算出，他总共需要进行多少次操作？
## 输入格式

输入数据第一行包含两个正整数 $N$ 和 $M$，分别表示服务器的数量和数据链路的数量。

接下来 $M$ 行，每行包含两个正整数 $u_i$ 和 $v_i$，表示第 $i$ 条数据链路连接的服务器编号。数据链路的编号按照输入顺序从上到下依次为 $1$ 到 $M$。

## 输出格式

输出一个整数，表示小蓝需要进行的操作次数。
## 样例

### 样例输入 #1
```
5 3
1 2
2 3
4 5
```
### 样例输出 #1
```
2
```
## 提示

**【样例说明】**

第一次操作：

1. 识别两个连通的服务器集群：
   - 集群 1：服务器 $(1,2,3)$
   - 集群 2：服务器 $(4,5)$

2. 对于集群 1，禁用编号最小的链路 $1-2$；对于集群 2，禁用编号最小的链路 $4-5$。

第一次操作结束后，仅剩余一个连通的服务器集群：服务器 $(2,3)$。

第二次操作：

1. 识别剩余的连通服务器集群: 服务器 $(2,3)$。
2. 禁用编号最小的链路 $2-3$。

第二次操作结束后，网络中不再有连通的服务器集群，隔离完成。总共需要 2 次操作。

**【评测用例规模与约定】**

对于 $40\%$ 的评测用例，$2 \leq N \leq 10^3$，$1 \leq M \leq \min(\frac{N \times (N-1)}{2}, 2 \times 10^3)$。

对于 $100\%$ 的评测用例，$2 \leq N \leq 10^5$，$1 \leq M \leq \min(\frac{N \times (N-1)}{2}, 2 \times 10^5)$。



---

---
title: "[蓝桥杯 2025 国 Java B] 智能交通信号灯"
layout: "post"
diff: 普及+/提高
pid: P12894
tag: ['树状数组', '2025', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 Java B] 智能交通信号灯
## 题目描述

蓝桥智慧城市在一条主干道上沿路安装了 $N$ 个智能交通信号灯，这些信号灯按位置从 $1$ 到 $N$ 编号。每个信号灯都有着一种控制模式，对于第 $i$ 个信号灯，其控制模式用 $A_i$ 表示，$A_i$ 是一个大于等于 $1$ 的整数。

为了评估信号灯配置的 “多样性”，交通管理专家提出了一种度量方式：对于任意两个不同位置 $x$ 和 $y$，它们的多样性分数被定义为大于等于 $1$ 的整数中，第一个既不是 $A_x$ 也不是 $A_y$ 的数值，记作 $\text{mex}(A_x, A_y)$。例如，当 $A_x = 1$ 且 $A_y = 2$ 时，$\text{mex}(1, 2) = 3$；当 $A_x = 1$ 且 $A_y = 3$ 时，$\text{mex}(1, 3) = 2$；当 $A_x = 2$ 且 $A_y = 2$ 时，$\text{mex}(2, 2) = 1$。

政府希望通过分析和调整信号灯配置，提升道路通行效率。为此，他们计划执行 $M$ 条操作指令，每条指令为以下两类之一：

- $1\ l\ r$：查询操作。计算所有满足 $l \leq i < j \leq r$ 的信号灯对 $(A_i, A_j)$，其多样性分数 $\text{mex}(A_i, A_j)$ 的总和。
- $2\ k\ x$：调整操作。将第 $k$ 个信号灯的控制模式 $A_k$ 修改为新的值 $x$。

现在，请你协助政府依次处理这 $M$ 次操作，并输出每个查询操作的结果。
## 输入格式

第一行包含两个整数 $N$ 和 $M$，分别表示信号灯的数量和操作指令的数量。

第二行包含 $N$ 个整数 $A_1, A_2, \ldots, A_N$，表示初始的信号灯控制模式。

接下来 $M$ 行，每行描述一条操作指令，格式如上所述。

## 输出格式

对于每个查询操作，输出一行包含一个整数，表示多样性分数的总和。
## 样例

### 样例输入 #1
```
5 3
1 2 3 4 5
1 1 5
2 1 2
1 1 5
```
### 样例输出 #1
```
15
10
```
## 提示

**【样例说明】**

初始时信号灯的控制模式依次为：$1, 2, 3, 4, 5$。第一次查询区间 $[1, 5]$，$\text{mex}$ 值分别为 $3, 2, 2, 2, 1, 1, 1, 1, 1, 1$，总和为 $15$。

第二次操作后，信号灯的控制模式依次为：$2, 2, 3, 4, 5$。第二次查询区间 $[1, 5]$，$\text{mex}$ 值均为 $1$，总和为 $10$。

**【评测用例规模与约定】**

对于 $10\%$ 的评测用例，$2 \leq N, M \leq 100$，$1 \leq l < r \leq N$，$1 \leq k \leq N$，$1 \leq A_i, x \leq 10^3$。

对于 $40\%$ 的评测用例，$2 \leq N, M \leq 10^3$，$1 \leq l < r \leq N$，$1 \leq k \leq N$，$1 \leq A_i, x \leq 10^5$。

对于 $100\%$ 的评测用例，$2 \leq N, M \leq 10^5$，$1 \leq l < r \leq N$，$1 \leq k \leq N$，$1 \leq A_i, x \leq 10^9$。



---

---
title: "[蓝桥杯 2013 国 C] 横向打印二叉树"
layout: "post"
diff: 普及+/提高
pid: P8603
tag: ['模拟', '树形数据结构', '2013', '蓝桥杯国赛']
---
# [蓝桥杯 2013 国 C] 横向打印二叉树
## 题目背景

二叉树可以用于排序。
## 题目描述

其原理很简单：对于一个排序二叉树添加新节点时，先与根节点比较，若小则交给左子树继续处理，否则交给右子树。

当遇到空子树时，则把该节点放入那个位置。

比如，`10 8 5 7 12 4` 的输入顺序，应该建成二叉树如图 $1$ 所示。

本题目要求：根据已知的数字，建立排序二叉树，并在标准输出中横向打印该二叉树。

## 输入格式

输入数据为一行空格分开的 $N$ 个整数。$N<100$，每个数字不超过 $10000$。

$N$ 并没有在输入中给出。

输入数据中没有重复的数字。
## 输出格式

输出该排序二叉树的横向表示,为了便于评卷程序比对空格的数目，请把空格用句点代替。
## 样例

### 样例输入 #1
```
10 8 5 7 12 4
```
### 样例输出 #1
```
...|-12
10-|
...|-8-|
.......|...|-7
.......|-5-|
...........|-4
```
### 样例输入 #2
```
10 5 20
```
### 样例输出 #2
```
...|-20
10-|
...|-5
```
### 样例输入 #3
```
5 10 20 8 4 7
```
### 样例输出 #3
```
.......|-20
..|-10-|
..|....|-8-|
..|........|-7
5-|
..|-4
```
## 提示

样例解释 1：

![](https://cdn.luogu.com.cn/upload/image_hosting/4z42ybq4.png)

时限 1 秒, 64M。蓝桥杯 2013 年第四届国赛


---

---
title: "[蓝桥杯 2014 国 B] Log 大侠"
layout: "post"
diff: 普及+/提高
pid: P8618
tag: ['2014', '蓝桥杯国赛']
---
# [蓝桥杯 2014 国 B] Log 大侠
## 题目描述

atm 参加了速算训练班，经过刻苦修炼，对以 $2$ 为底的对数算得飞快，人称 Log 大侠。

一天，Log 大侠的好友 drd 有一些整数序列需要变换，Log 大侠正好施展法力。

变换的规则是：对其某个子序列的每个整数变为 $[\log_2(x)+1]$ 其中 [] 表示向下取整，就是对每个数字求以 $2$ 为底的对数，然后取下整。

例如对序列 $3,4,2$ 操作一次后，这个序列会变成 $2,3,2$。

drd 需要知道，每次这样操作后，序列的和是多少。
## 输入格式

第一行两个正整数 $n,m$。

第二行 $n$ 个数，表示整数序列，都是正数。

接下来 $m$ 行，每行两个数 $L$，$R$ 表示 atm 这次操作的是区间 $[L,R]$，数列序号从 $1$ 开始。
## 输出格式

输出 $m$ 行，依次表示 atm 每做完一个操作后，整个序列的和。
## 样例

### 样例输入 #1
```
3 3
5 6 4
1 2
2 3
1 3
```
### 样例输出 #1
```
10
8
6
```
## 提示

对于 $30\%$ 的数据，$n,m \le 10^3$。

对于 $100\%$ 的数据，$n,m \le 10^5$。

时限 1 秒, 256M。蓝桥杯 2014 年第五届国赛

官方数据似乎有错。重造数据按照 $1 \leq a_i \leq 10^9$ 设计。


---

---
title: "[蓝桥杯 2016 国 AC] 路径之谜"
layout: "post"
diff: 普及+/提高
pid: P8642
tag: ['搜索', '2016', '蓝桥杯国赛']
---
# [蓝桥杯 2016 国 AC] 路径之谜
## 题目描述

小明冒充 $X$ 星球的骑士，进入了一个奇怪的城堡。

城堡里边什么都没有，只有方形石头铺成的地面。

假设城堡地面是 $n\times n$ 个方格。如图所示。

![](https://cdn.luogu.com.cn/upload/image_hosting/ku6hk346.png)

按习俗，骑士要从西北角走到东南角。

可以横向或纵向移动，但不能斜着走，也不能跳跃。

每走到一个新方格，就要向正北方和正西方各射一箭。

（城堡的西墙和北墙内各有 $n$ 个靶子）

同一个方格只允许经过一次。但不必做完所有的方格。

如果只给出靶子上箭的数目，你能推断出骑士的行走路线吗？

有时是可以的，比如如图中的例子。

本题的要求就是已知箭靶数字，求骑士的行走路径（测试数据保证路径唯一）
## 输入格式

第一行一个整数 $N(0<N<20)$，表示地面有 $N \times N$ 个方格。

第二行 $N$ 个整数，空格分开，表示北边的箭靶上的数字（自西向东）

第三行 $N$ 个整数，空格分开，表示西边的箭靶上的数字（自北向南）
## 输出格式

一行若干个整数，表示骑士路径。

为了方便表示，我们约定每个小格子用一个数字代表，从西北角开始编号 $:0,1,2,3 \cdots $。

比如，图中的方块编号为：

```
0  1  2  3
4  5  6  7
8  9  10 11
12 13 14 15
```
## 样例

### 样例输入 #1
```
4
2 4 3 4
4 3 3 3
```
### 样例输出 #1
```
0 4 5 1 2 3 7 11 10 9 13 14 15
```
## 提示

时限 1 秒, 256M。蓝桥杯 2016 年第七届国赛


---

---
title: "[蓝桥杯 2016 国 B] 机器人塔"
layout: "post"
diff: 普及+/提高
pid: P8644
tag: ['2016', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2016 国 B] 机器人塔
## 题目描述

X 星球的机器人表演拉拉队有两种服装，A 和 B。

他们这次表演的是搭机器人塔。

类似：

```
     A
    B B
   A B A
  A A B B
 B B B A B
A B A B B A
```

队内的组塔规则是：

A 只能站在 AA 或 BB 的肩上。

B 只能站在 AB 或 BA 的肩上。

你的任务是帮助拉拉队计算一下，在给定 A 与 B 的人数时，可以组成多少种花样的塔。
## 输入格式

输入一行两个整数 $M$ 和 $N$，空格分开（$0<M,N<N+M<231$，保证存在 $k\in \mathbb{N}$，$N+M=\frac{k(k-1)}{2}$），分别表示 A、B 的人数。
## 输出格式

要求输出一个整数，表示可以产生的花样种数。
## 样例

### 样例输入 #1
```
1 2
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
3 3
```
### 样例输出 #2
```
4
```
## 提示

时限 1 秒, 256M。蓝桥杯 2016 年第七届


---

---
title: "[蓝桥杯 2017 国 C] 小数第 n 位"
layout: "post"
diff: 普及+/提高
pid: P8652
tag: ['模拟', '2017', '数论', '蓝桥杯国赛']
---
# [蓝桥杯 2017 国 C] 小数第 n 位
## 题目描述

我们知道，整数做除法时，有时得到有限小数，有时得到无限循环小数。

如果我们把有限小数的末尾加上无限多个 $0$，它们就有了统一的形式。

本题的任务是：在上面的约定下，求整数除法小数点后的第 $n$ 位开始的 $3$ 位数。
## 输入格式

一行三个整数：$a$，$b$，$n$，用空格分开。$a$ 是被除数，$b$ 是除数，$n$ 是所求的小数后位置（$0<a,b,n<10^9$）
## 输出格式

一行 $3$ 位数字，表示：$a$ 除以 $b$，小数后第 $n$ 位开始的 $3$ 位数字。
## 样例

### 样例输入 #1
```
1 8 1
```
### 样例输出 #1
```
125
```
### 样例输入 #2
```
1 8 3
```
### 样例输出 #2
```
500
```
### 样例输入 #3
```
282866 999000 6
```
### 样例输出 #3
```
914
```
## 提示

时限 1 秒, 256M。蓝桥杯 2017 年第八届国赛


---

---
title: "[蓝桥杯 2017 国 A] 填字母游戏"
layout: "post"
diff: 普及+/提高
pid: P8658
tag: ['2017', '记忆化搜索', '蓝桥杯国赛']
---
# [蓝桥杯 2017 国 A] 填字母游戏
## 题目描述

小明经常玩 LOL 游戏上瘾，一次他想挑战 K 大师，不料 K 大师说：

“我们先来玩个空格填字母的游戏，要是你不能赢我，就再别玩 LOL 了”。

K 大师在纸上画了一行 $n$ 个格子，要小明和他交替往其中填入字母。

并且：

1. 轮到某人填的时候，只能在某个空格中填入 `L` 或 `O`。

2. 谁先让字母组成了 `LOL` 的字样，谁获胜。

3. 如果所有格子都填满了，仍无法组成 `LOL`，则平局。

小明试验了几次都输了，他很惭愧，希望你能用计算机帮他解开这个谜。
## 输入格式

本题的输入格式为：

第一行，数字 $n$（$n<10$），表示下面有 $n$ 个初始局面。

接下来，$n$ 行，每行一个串（长度 $<20)$，表示开始的局面。

比如：`******`，表示有 $6$ 个空格。

`L****`，表示左边是一个字母 $L$，它的右边是 $4$ 个空格。
## 输出格式

要求输出 $n$ 个数字，表示对每个局面，如果小明先填，当 K 大师总是用最强着法的时候，小明的最好结果。

`1` 表示能赢。

`-1` 表示必输。

`0` 表示可以逼平。
## 样例

### 样例输入 #1
```
4
***
L**L
L**L***L
L*****L
```
### 样例输出 #1
```
0
-1
1
1
```
## 提示

时限 1 秒, 256M。蓝桥杯 2017 年第八届国赛


---

---
title: "[蓝桥杯 2018 国 B] 搭积木"
layout: "post"
diff: 普及+/提高
pid: P8675
tag: ['2018', '区间 DP', '前缀和', '蓝桥杯国赛']
---
# [蓝桥杯 2018 国 B] 搭积木
## 题目描述

小明对搭积木非常感兴趣。他的积木都是同样大小的正立方体。

在搭积木时，小明选取 $m$ 块积木作为地基，将他们在桌子上一字排开，中间不留空隙，并称其为第 $0$ 层。

随后，小明可以在上面摆放第 $1$ 层，第 $2$ 层，……，最多摆放至第 $n$ 层。摆放积木必须遵循三条规则：

规则 $1$：每块积木必须紧挨着放置在某一块积木的正上方，与其下一层的积木对齐；

规则 $2$：同一层中的积木必须连续摆放，中间不能留有空隙；

规则 $3$：小明不喜欢的位置不能放置积木。

其中，小明不喜欢的位置都被标在了图纸上。图纸共有 $n$ 行，从下至上的每一行分别对应积木的第 $1$ 层至第 $n$ 层。每一行都有 $m$ 个字符，字符可能是 `.` 或 `X`，其中 `X` 表示这个位置是小明不喜欢的。

现在，小明想要知道，共有多少种放置积木的方案。他找到了参加蓝桥杯的你来帮他计算这个答案。

由于这个答案可能很大，你只需要回答这个答案对 $1000000007(10^9+7)$ 取模后的结果。

注意：地基上什么都不放，也算作是方案之一种。
## 输入格式

输入数据的第一行有两个正整数 $n$ 和 $m$，表示图纸的大小。

随后 $n$ 行，每行有 $m$ 个字符，用来描述图纸。每个字符只可能是 `.` 或 `X`。
## 输出格式

输出一个整数，表示答案对 $10^9+7$ 取模后的结果。
## 样例

### 样例输入 #1
```
2 3
..X
.X.
```
### 样例输出 #1
```
4
```
## 提示

**【样例解释】**

成功的摆放有（其中O表示放置积木）：

```
 1       2       3       4
..X     ..X     O.X     ..X
.X.     OX.     OX.     .XO
```

**【数据约定】**

对于 $10\%$ 的数据，$n=1$，$m \le 30$；

对于 $40\%$ 的数据，$n \le 10$，$m \le 30$；

对于 $100\%$ 的数据，$n \le 100$，$m \le 100$。

时限 1 秒, 256M。蓝桥杯 2018 年第九届国赛


---

---
title: "[蓝桥杯 2019 国 AC] 大胖子走迷宫"
layout: "post"
diff: 普及+/提高
pid: P8693
tag: ['2019', '广度优先搜索 BFS', '最短路', '蓝桥杯国赛']
---
# [蓝桥杯 2019 国 AC] 大胖子走迷宫
## 题目描述

小明是个大胖子，或者说是个大大胖子，如果说正常人占用 $1\times1$ 的面积，小明要占用 $5\times5$ 的面积。

由于小明太胖了，所以他行动起来很不方便。当玩一些游戏时，小明相比小伙伴就吃亏很多。小明的朋友们制定了一个计划，帮助小明减肥。计划的主要内容是带小明玩一些游戏，让小明在游戏中运动消耗脂肪。走迷宫是计划中的重要环节。

朋友们设计了一个迷宫，迷宫可以看成是一个由 $n\times n$ 个方阵组成的方阵，正常人每次占用方阵中 $1\times1$ 的区域，而小明要占用 $5\times5$ 的区域。小明的位置定义为小明最正中的一个方格。迷宫四周都有障碍物。为了方便小明，朋友们把迷宫的起点设置在了第 $3$ 行第 $3$ 列，终点设置在了第 $n-2$ 行第 $n-2$ 列。

小明在时刻 $0$ 出发，每单位时间可以向当前位置的上、下、左、右移动单位 $1$ 的距离，也可以停留在原地不动。小明走迷宫走得很辛苦，如果他在迷宫里面待的时间很长，则由于消耗了很多脂肪，他会在时刻 $k$ 变成一个胖子，只占用 $3\times3$ 的区域。如果待的时间更长，他会在时刻 $2\times k$ 变成一个正常人，只占用 $1\times1$ 的区域。注意，当小明变瘦时迷宫的起点和终点不变。

请问，小明最少多长时间能走到迷宫的终点。注意，小明走到终点时可能变瘦了也可能没有变瘦。
## 输入格式

输入的第一行包含两个整数 $n$，$k$。
接下来 $n$ 行，每行一个由 $n$ 个字符组成的字符串，字符为 `+` 表示为空地，
字符为 `*` 表示为阻碍物。
## 输出格式

输出一个整数，表示答案。
## 样例

### 样例输入 #1
```
9 5
+++++++++
+++++++++
+++++++++
+++++++++
+++++++++
***+*****
+++++++++
+++++++++
+++++++++

```
### 样例输出 #1
```
16
```
## 提示

对于 $30 \%$ 的评测用例, $1 \leq n \leq 50$。

对于 $60 \%$ 的评测用例, $1 \leq n \leq 100$。

对于所有评测用例, $1 \leq n \leq 300$，$1 \leq k \leq 1000$。

蓝桥杯 2019 年国赛 A 组 F 题（C 组 I 题）。


---

---
title: "[蓝桥杯 2019 国 AC] 估计人数"
layout: "post"
diff: 普及+/提高
pid: P8694
tag: ['搜索', '2019', '蓝桥杯国赛', 'Dilworth 定理']
---
# [蓝桥杯 2019 国 AC] 估计人数
## 题目描述

给定一个 $N \times M$ 的方格矩阵，矩阵中每个方格标记 `0` 或者 `1` 代表这个方格是不是有人踩过。

已知一个人可能从任意方格开始，之后每一步只能向右或者向下走一格。走了若干步之后，这个人可以离开矩阵。这个人经过的方格都会被标记为 `1`，包括开始和结束的方格。注意开始和结束的方格不需要一定在矩阵边缘。

请你计算至少有多少人在矩阵上走过。
## 输入格式

输入第一行包含两个整数 $N$、$M$。
以下 $N$ 行每行包含一个长度为 $M$ 的 01 串，代表方格矩阵。
## 输出格式

输出一个整数代表答案。
## 样例

### 样例输入 #1
```
5 5
00100
11111
00100
11111
00100
```
### 样例输出 #1
```
3
```
## 提示

对于所有评测用例, $1 \leq N, M \leq 20$, 标记为 `1` 的方格不超过 $200$ 个。

蓝桥杯 2019 年国赛 A 组 G 题（C 组 H 题）。


---

---
title: "[蓝桥杯 2019 国 B] 排列数"
layout: "post"
diff: 普及+/提高
pid: P8699
tag: ['动态规划 DP', '2019', '蓝桥杯国赛']
---
# [蓝桥杯 2019 国 B] 排列数
## 题目描述

在一个排列中，一个折点是指排列中的一个元素，它同时小于两边的元素，或者同时大于两边的元素。

对于一个 $1 ∼ n$ 的排列，如果可以将这个排列中包含 $t$ 个折点，则它称为一个 $t + 1$ 单调排列。

例如，排列 $(1, 4, 2, 3)$ 是一个 $3$ 单调排列，其中 $4$ 和 $2$ 都是折点。

给定 $n$ 和 $k$，请问 $1 ∼ n$ 的所有排列中有多少个 $k$ 单调排列？

## 输入格式

输入一行包含两个整数 $n$, $k$。
## 输出格式

输出一个整数，表示答案。答案可能很大，你可需要输出满足条件的排列
数量除以 $123456$ 的余数即可。

## 样例

### 样例输入 #1
```
4 2

```
### 样例输出 #1
```
12

```
## 提示

对于 $20 \%$ 的评测用例, $1 \leq k \leq n \leq 10$;

对于 $40 \%$ 的评测用例, $1 \leq k \leq n \leq 20$; 对于 $60 \%$ 的评测用例, $1 \leq k \leq n \leq 100$;

对于所有评测用例， $1 \leq k \leq n \leq 500$ 。 


蓝桥杯 2019 年国赛 B 组 G 题。


---

---
title: "[蓝桥杯 2019 国 B] 最优包含"
layout: "post"
diff: 普及+/提高
pid: P8703
tag: ['动态规划 DP', '2019', '蓝桥杯国赛']
---
# [蓝桥杯 2019 国 B] 最优包含
## 题目描述

我们称一个字符串 $S$ 包含字符串 $T$ 是指 $T$ 是 $S$ 的一个子序列，即可以从字符串 $S$ 中抽出若干个字符，它们按原来的顺序组合成一个新的字符串与 $T$ 完全一样。

给定两个字符串 $S$ 和 $T$，请问最少修改 $S$ 中的多少个字符，能使 $S$ 包含 $T$。
## 输入格式

输入两行，每行一个字符串。第一行的字符串为 $S$，第二行的字符串为 $T$。两个字符串均非空而且只包含大写英文字母。
## 输出格式

输出一个整数，表示答案。
## 样例

### 样例输入 #1
```
ABCDEABCD
XAABZ

```
### 样例输出 #1
```
3

```
## 提示

对于 $20 \%$ 的评测用例, $1 \leq|T| \leq|S| \leq 20$;

对于 $40 \%$ 的评测用例, $1 \leq|T| \leq|S| \leq 100$;

对于所有评测用例, $1 \leq|T| \leq|S| \leq 1000$。

蓝桥杯 2019 年国赛 B 组 F 题。


---

---
title: "[蓝桥杯 2020 国 C] 补给"
layout: "post"
diff: 普及+/提高
pid: P8733
tag: ['2020', '蓝桥杯国赛', '状压 DP']
---
# [蓝桥杯 2020 国 C] 补给
## 题目描述

小蓝是一个直升飞机驾驶员，他负责给山区的 $n$ 个村庄运送物资。

每个月，他都要到每个村庄至少一次，可以多于一次，将村庄需要的物资运送过去。

每个村庄都正好有一个直升机场，每两个村庄之间的路程都正好是村庄之间的直线距离。

由于直升机的油箱大小有限，小蓝单次飞行的距离不能超过 $D$。每个直升机场都有加油站，可以给直升机加满油。

每个月，小蓝都是从总部出发，给各个村庄运送完物资后回到总部。如果方便，小蓝中途也可以经过总部来加油。

总部位于编号为 $1$ 的村庄。

请问，要完成一个月的任务，小蓝至少要飞行多长距离？
## 输入格式

输入的第一行包含两个整数 $n$，$D$，分别表示村庄的数量和单次飞行的距离。

接下来 $n$ 行描述村庄的位置，其中第 $i$ 行两个整数 $x_i$，$y_i$ 分别表示编号为 $i$ 的村庄的坐标。村庄 $i$ 和村庄 $j$ 之间的距离为 $\sqrt{(x_i-x_j)^2+(y_i-y_j)^2}$。
## 输出格式

输出一行，包含一个实数，四舍五入保留正好 $2$ 位小数，表示答案。
## 样例

### 样例输入 #1
```
4 6
1 1
4 5
8 5
11 1
```
### 样例输出 #1
```
28.00
```
## 提示

对于所有数据，保证，$1\le n\le20,1\le x_i,y_i\le10^4,1\le D\le10^5$。

蓝桥杯 2020 年国赛 C 组 I 题。


---

---
title: "[蓝桥杯 2021 国 ABC] 异或变换"
layout: "post"
diff: 普及+/提高
pid: P8763
tag: ['2021', '分治', '位运算', '蓝桥杯国赛']
---
# [蓝桥杯 2021 国 ABC] 异或变换
## 题目描述

小蓝有一个 01 串 $s=s_{1} s_{2} s_{3} \cdots s_{n}$。

以后每个时刻, 小蓝要对这个 01 串进行一次变换。每次变换的规则相同。 对于 01 串 $s=s_{1} s_{2} s_{3} \cdots s_{n}$, 变换后的 01 串 $s^{\prime}=s_{1}^{\prime} s_{2}^{\prime} s_{3}^{\prime} \cdots s_{n}^{\prime}$ 为：

$$
\begin{aligned}
&s_{1}^{\prime}=s_{1} \\
&s_{i}^{\prime}=s_{i-1} \oplus s_{i}
\end{aligned}
$$

其中 $a \oplus b$ 表示两个二进制的异或, 当 $a$ 和 $b$ 相同时结果为 $0$ , 当 $a$ 和 $b$ 不同时结果为 $1$ 。

请问, 经过 $t$ 次变换后的 01 串是什么?
## 输入格式

输入的第一行包含两个整数 $n, t$, 分别表示 01 串的长度和变换的次数。

第二行包含一个长度为 $n$ 的 01 串。
## 输出格式

输出一行包含一个 01 串, 为变换后的串。

## 样例

### 样例输入 #1
```
5 3
10110
```
### 样例输出 #1
```
11010
```
## 提示

**【样例说明】**

初始时为 `10110` , 变换 1 次后变为 `11101` , 变换 2 次后变为 `10011` , 变换 3 次后变为 `11010`。

**【评测用例规模与约定】**

对于 $40 \%$ 的评测用例, $1 \leq n \leq 100,1 \leq t \leq 1000$。

对于 $80 \%$ 的评测用例, $1 \leq n \leq 1000,1 \leq t \leq 10^{9}$。

对于所有评测用例, $1 \leq n \leq 10000,1 \leq t \leq 10^{18}$。

蓝桥杯 2021 国赛 A 组 F 题（B 组 G 题，C 组 G 题）。


---

---
title: "[蓝桥杯 2021 国 BC] 二进制问题"
layout: "post"
diff: 普及+/提高
pid: P8764
tag: ['2021', '数位 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2021 国 BC] 二进制问题
## 题目描述

小蓝最近在学习二进制。他想知道 $1$ 到 $N$ 中有多少个数满足其二进制表示中恰好有 $K$ 个 `1`。你能帮助他吗?
## 输入格式

输入一行包含两个整数 $N$ 和 $K$。
## 输出格式

输出一个整数表示答案。
## 样例

### 样例输入 #1
```
7 2
```
### 样例输出 #1
```
3
```
## 提示

对于 $30 \%$ 的评测用例, $1 \leq N \leq 10^{6}, 1 \leq K \leq 10$ 。

对于 $60 \%$ 的评测用例, $1 \leq N \leq 2 \times 10^{9}, 1 \leq K \leq 30$ 。

对于所有评测用例, $1 \leq N \leq 10^{18}, 1 \leq K \leq 50$ 。 

蓝桥杯 2021 国赛 B 组 H 题（C 组 J 题）。


---

---
title: "[蓝桥杯 2021 国 C] 巧克力"
layout: "post"
diff: 普及+/提高
pid: P8769
tag: ['贪心', '堆', '2021', '蓝桥杯国赛']
---
# [蓝桥杯 2021 国 C] 巧克力
## 题目描述

小蓝很喜欢吃巧克力，他每天都要吃一块巧克力。

一天小蓝到超市想买一些巧克力。超市的货架上有很多种巧克力，每种巧克力有自己的价格、数量和剩余的保质期天数，小蓝只吃没过保质期的巧克力，请问小蓝最少花多少钱能买到让自己吃 $x$ 天的巧克力。
## 输入格式

输入的第一行包含两个整数 $x$，$n$，分别表示需要吃巧克力的天数和巧克力的种类数。

接下来 $n$ 行描述货架上的巧克力，其中第 $i$ 行包含三个整数 $a_i$，$b_i$，$c_i$，表示第 $i$ 种巧克力的单价为 $a_i$，保质期还剩 $b_i$ 天（从现在开始的 $b_i$ 天可以吃），数量为 $c_i$。
## 输出格式

 输出一个整数表示小蓝的最小花费。如果不存在让小蓝吃 $x$ 天的购买方案，输出 $−1$。
## 样例

### 样例输入 #1
```
10 3
1 6 5
2 7 3
3 10 10
```
### 样例输出 #1
```
18

```
## 提示

**【样例说明】**

一种最佳的方案是第 $1$ 种买 $5$ 块，第 $2$ 种买 $2$ 块，第 $3$ 种买 $3$ 块。前 $5$ 天吃第 $1$ 种，第 $6$、$7$ 天吃第 $2$ 种，第 $8$ 至 $10$ 天吃第 $3$ 种。

**【评测用例规模与约定】**

对于 $30\%$ 的评测用例，$n,x \le 1000$。

对于所有评测用例，$1\le n,x\le 10^5$，$1 ≤ a_i,b_i ,c_i\le10^9$。

蓝桥杯 2021 国赛 C 组 I 题。


---

---
title: "[蓝桥杯 2022 国 AC] 内存空间"
layout: "post"
diff: 普及+/提高
pid: P8791
tag: ['模拟', '2022', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 AC] 内存空间
## 题目描述

小蓝最近总喜欢计算自己的代码中定义的变量占用了多少内存空间。

为了简化问题，变量的类型只有以下三种：

`int`：整型变量，一个 int 型变量占用 $4$ Byte 的内存空间。

`long`：长整型变量，一个 long 型变量占用 $8$ Byte 的内存空间。

`String`：字符串变量，占用空间和字符串长度有关，设字符串长度为 $L$，则字符串占用 $L$ Byte 的内存空间，如果字符串长度为 $0$ 则占用 $0$ Byte 的内存空间。

定义变量的语句只有两种形式，第一种形式为：

```
type var1=value1,var2=value2...;
```

定义了若干个 type 类型变量 var1、var2、……，并且用 value1、value2……初始化。

多个变量之间用 `,` 分隔，语句以 `;` 结尾，type 可能是 `int`、`long` 或 `String`。例如 `int a=1,b=5,c=6;` 占用空间为 $12$ Byte；`long a=1,b=5;` 占用空间为 $16$ Byte；`String s1="",s2="hello",s3="world";` 占用空间为 $10$ Byte。

第二种形式为：

```
type[] arr1=new type[size1],arr2=new type[size2]…;
```

定义了若干 type 类型的一维数组变量 arr1、arr2……，且数组的大小为 size1、size2……，多个变量之间用 `,` 进行分隔，语句以 `;` 结尾，type 只可能是 `int` 或 `long`。例如 `int[] a1=new int[10]`；占用的内存空间为 $40$ Byte；`long[] a1=new long[10],a2=new long[10];` 占用的内存空间为 $160$ Byte。

已知小蓝有 $T$ 条定义变量的语句，请你帮他统计下一共占用了多少内存空间。结果的表示方式为：$\texttt{aGBbMBcKBdB}$，其中 $a$、$b$、$c$、$d$ 为统计的结果，$\texttt{GB}$、$\texttt{MB}$、$\texttt{KB}$、$\texttt{B}$ 为单位。优先用大的单位来表示，$1\texttt{GB}=1024\texttt{MB}$，$1\texttt{MB}=1024\texttt{KB}$，$1\texttt{KB}=1024\texttt{B}$，其中 `B` 表示 Byte。如果 $a$、$b$、$c$、$d$ 中的某几个数字为 $0$，那么不必输出这几个数字及其单位。题目保证一行中只有一句定义变量的语句，且每条语句都满足题干中描述的定义格式，所有的变量名都是合法的且均不重复。题目中的数据很规整，和上述给出的例子类似，除了类型后面有一个空格，以及定义数组时 `new` 后面的一个空格之外，不会出现多余的空
格。
## 输入格式

输入的第一行包含一个整数 $T$，表示有 $T$ 句变量定义的语句。

接下来 $T$ 行，每行包含一句变量定义语句。
## 输出格式

输出一行包含一个字符串，表示所有语句所占用空间的总大小。
## 样例

### 样例输入 #1
```
1
long[] nums=new long[131072];
```
### 样例输出 #1
```
1MB
```
### 样例输入 #2
```
4
int a=0,b=0;
long x=0,y=0;
String s1="hello",s2="world";
long[] arr1=new long[100000],arr2=new long[100000];
```
### 样例输出 #2
```
1MB538KB546B
```
## 提示

**【样例说明】**

样例 1，占用的空间为 $131072 \times 8 = 1048576$ ，换算过后正好是 $1\texttt{MB}$，其它三个单位 $\texttt{GB}$、$\texttt{KB}$、$\texttt{B}$ 前面的数字都为 $0$，所以不用输出。

样例 2，占用的空间为 $4 \times 2 + 8 \times 2 + 10 + 8 \times 100000 \times 2$ B，换算后是 $1\texttt{MB}538\texttt{KB}546\texttt{B}$。

**【评测用例规模与约定】**

对于所有评测用例，$1 \leq T \leq 10$，每条变量定义语句的长度不会超过 $1000$。所有的变量名称长度不会超过 $10$，且都由小写字母和数字组成。对于整型变量，初始化的值均是在其表示范围内的十进制整数，初始化的值不会是变量。对于 String 类型的变量，初始化的内容长度不会超过 $50$，且内容仅包含小写字母和数字，初始化的值不会是变量。对于数组类型变量，数组的长度为一个整数，范围为：$[0, 2^{30}]$，数组的长度不会是变量。$T$ 条语句定义的变量所占的内存空间总大小大于 $0$ B 且小于 $1024$ GB。

蓝桥杯 2022 国赛 A 组 C 题（C 组 D 题）。


---

---
title: "[蓝桥杯 2022 国 A] 最大公约数"
layout: "post"
diff: 普及+/提高
pid: P8792
tag: ['贪心', '2022', '数论', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 A] 最大公约数
## 题目描述

给定一个数组，每次操作可以选择数组中任意两个相邻的元素 $x, y$ 并将其中的一个元素替换为 $\gcd(x, y)$，其中 $\gcd(x, y)$ 表示 $x$ 和 $y$ 的最大公约数。请问最少需要多少次操作才能让整个数组只含 $1$。
## 输入格式

输入的第一行包含一个整数 $n$，表示数组长度。

第二行包含 $n$ 个整数 $a_1, a_2,\dots, a_n$，相邻两个整数之间用一个空格分隔。
## 输出格式

输出一行包含一个整数，表示最少操作次数。如果无论怎么操作都无法满足要求，输出 $-1$。
## 样例

### 样例输入 #1
```
3
4 6 9
```
### 样例输出 #1
```
4
```
## 提示

**【评测用例规模与约定】**

- 对于 $30\%$ 的评测用例，$n \leq 500$，$a_i \leq 1000$；
- 对于 $50\%$ 的评测用例，$n \leq 5000$，$a_i \leq 10^6$；
- 对于所有评测用例，$1 \leq n \leq 10^5$，$1 \leq a_i \leq 10^9$。

蓝桥杯 2022 国赛 A 组 D 题。


---

---
title: "[蓝桥杯 2022 国 A] 选素数"
layout: "post"
diff: 普及+/提高
pid: P8795
tag: ['2022', '数论', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 A] 选素数
## 题目描述

小蓝有一个数 $x$，每次操作小蓝会选择一个小于 $x$ 的素数 $p$，然后在 $x$ 成为 $p$ 的倍数前不断将 $x$ 加 $1$，（如果 $x$ 一开始就是 $p$ 的倍数则 $x$ 不变）。

小乔看到了小蓝进行了 $2$ 次上述操作后得到的结果 $n$，他想知道 $x$ 在一开始是多少。如果有多种可能，他想知道 $x$  一开始最小可以是多少，而如果不存在任何解，说明小乔看错了，此时请输出 $-1$。
## 输入格式

输入一行包含一个整数 $n$，表示经过两次操作后 $x$ 的值。
## 输出格式

输出一行包含一个整数表示 $x$ 的初始值。如果有多个解，输出最小的。如果不存在解，请输出 $-1$。
## 样例

### 样例输入 #1
```
22
```
### 样例输出 #1
```
8
```
## 提示

**【评测用例规模与约定】**

- 对于 $60\%$ 的评测用例，$1 \leq n \leq 5000$；
- 对于所有评测用例，$1 \leq n \leq 10^6$。

蓝桥杯 2022 国赛 A 组 G 题。


---

---
title: "[蓝桥杯 2022 国 B] 最大数字"
layout: "post"
diff: 普及+/提高
pid: P8801
tag: ['2022', '数位 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 B] 最大数字
## 题目描述

给定一个正整数 $N$。你可以对 $N$ 的任意一位数字执行任意次以下 2 种操作:

1. 将该位数字加 $1$。如果该位数字已经是 $9$，加 $1$ 之后变成 $0$。

2. 将该位数字减 $1$。如果该位数字已经是 $0$，减 $1$ 之后变成 $9$。

你现在总共可以执行 $1$ 号操作不超过 $A$ 次，$2$ 号操作不超过 $B$ 次。

请问你最大可以将 $N$ 变成多少?
## 输入格式

第一行包含 3 个整数：$N$，$A$，$B$ 。
## 输出格式

一个整数代表答案。
## 样例

### 样例输入 #1
```
123 1 2
```
### 样例输出 #1
```
933
```
## 提示

**【样例说明】**

对百位数字执行 $2$ 次 $2$ 号操作，对十位数字执行 $1$ 次 $1$ 号操作。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据，$1 \leq N \leq 100 ; 0 \leq A, B \leq 10$ 

对于 $100 \%$ 的数据, $1 \leq N \leq 10^{17} ; 0 \leq A, B \leq 100$ 

蓝桥杯 2022 国赛 B 组 D 题。


---

---
title: "[蓝桥杯 2022 国 B] 费用报销"
layout: "post"
diff: 普及+/提高
pid: P8803
tag: ['动态规划 DP', '2022', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 B] 费用报销
## 题目描述

小明在出差结束后返回了公司所在的城市，在填写差旅报销申请时，粗心的小明发现自己弄丢了出差过程中的票据。

为了弥补小明的损失，公司同意小明用别的票据进行报销，但是公司财务要求小明提交的票据中任意两张的日期差不小于 $K$ 天，且总金额不得超过实际差旅费用 $M$。

比如财务要求 $K=7$ 时，若小明提交了一张 1 月 8 日的票据，小明就不能提交 1 月 2 日至 1 月 14 日之间的其他票据，1 月 1 日及之前和 1 月 15 日及之后的票据则可以提交。

公司的同事们一起给小明凑了 $N$ 张票据，小明现在想要请你帮他整理一下，从中选取出符合财务要求的票据, 并使总金额尽可能接近 $M$ 。

需要注意，由于这些票据都是同一年的，因此 12 月底的票据不会影响到 1 月初票据的提交。这一年不是闰年。
## 输入格式

第 $1$ 行：$3$ 个整数, $N, M, K$。

第 $2 \ldots N+1$ 行：每行 3 个整数 $m_{i}, d_{i}, v_{i}$, 第 $i+1$ 行表示第 $i$ 张票据时间的月份 $m_{i}$ 和日期 $d_{i}$，$v_{i}$ 表示该票据的面值。
## 输出格式

第 $1$ 行：$1$ 个整数, 表示小明能够凑出的最大报销金额。
## 样例

### 样例输入 #1
```
4 16 3
1 1 1
1 3 2
1 4 4
1 6 8
```
### 样例输出 #1
```
10
```
## 提示

**【样例说明】**

选择 1 月 3 日和 1 月 6 日的票据

**【评测用例规模与约定】**

对于 $100 \%$ 的评测用例, $1 \leq N \leq 1000,1 \leq M \leq 5000,1 \leq K \leq 50,1 \leq m_{i} \leq$ $12,1 \leq d_{i} \leq 31,1 \leq v_{i} \leq 400$

日期保证合法。 


蓝桥杯 2022 国赛 B 组 F 题。


---

---
title: "[蓝桥杯 2022 国 B] 机房"
layout: "post"
diff: 普及+/提高
pid: P8805
tag: ['2022', '最近公共祖先 LCA', '前缀和', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 B] 机房
## 题目描述

这天，小明在机房学习。

他发现机房里一共有 $n$ 台电脑，编号为 1 到 $n$，电脑和电脑之间有网线连接，一共有 $n-1$ 根网线将 $n$ 台电脑连接起来使得任意两台电脑都直接或者间接地相连。

小明发现每台电脑转发、发送或者接受信息需要的时间取决于这台电脑和多少台电脑直接相连，而信息在网线中的传播时间可以忽略。比如如果某台电脑用网线直接连接了另外 $d$ 台电脑, 那么任何经过这台电脑的信息都会延迟 $d$ 单位时间 (发送方和接收方也会产生这样的延迟，当然如果发送方和接收方都是 同一台电脑就只会产生一次延迟)。

小明一共产生了 $m$ 个疑问：如果电脑 $u_{i}$ 向电脑 $v_{i}$ 发送信息，那么信息从 $u_{i}$ 传到 $v_{i}$ 的最短时间是多少?

## 输入格式

输入共 $n+m$ 行，第一行为两个正整数 $n, m$ 。

后面 $n-1$ 行，每行两个正整数 $x, y$ 表示编号为 $x$ 和 $y$ 的两台电脑用网线 直接相连。

后面 $m$ 行，每行两个正整数 $u_{i}, v_{i}$ 表示小明的第 $i$ 个疑问。

## 输出格式

输出共 $m$ 行，第 $i$ 行一个正整数表示小明第 $i$ 个疑问的答案。
## 样例

### 样例输入 #1
```
4 3
1 2
1 3
2 4
2 3
3 4
3 3
```
### 样例输出 #1
```
5
6
1
```
## 提示

**【样例说明】**

这四台电脑各自的延迟分别为 $2,2,1,1$ 。

对于第一个询问, 从 $2$ 到 $3$ 需要经过 $2,1,3$, 所以时间和为 $2+2+1=5$。对于第二个询问，从 $3$ 到 $4$ 需要经过 $3,1,2,4$，所以时间和为 $1+2+2+1=6$。

对于第三个询问，从 $3$ 到 $3$ 只会产生一次延迟, 所以时间为 1。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据，保证 $n, m \leq 1000$;

对于 $100 \%$ 的数据，保证 $n, m \leq 10^5$。

蓝桥杯 2022 国赛 B 组 H 题。


---

---
title: "[蓝桥杯 2022 国 B] 搬砖"
layout: "post"
diff: 普及+/提高
pid: P8806
tag: ['动态规划 DP', '2022', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 B] 搬砖
## 题目描述

这天，小明在搬砖。

他一共有 $n$ 块砖，他发现第 $i$ 砖的重量为 $w_{i}$，价值为 $v_{i}$。他突然想从这些砖中选一些出来从下到上堆成一座塔，并且对于塔中的每一块砖来说，它上面所有砖的重量和不能超过它自身的价值。

他想知道这样堆成的塔的总价值（即塔中所有砖块的价值和）最大是多少。

## 输入格式

输入共 $n+1$ 行, 第一行为一个正整数 $n$, 表示砖块的数量。

后面 $n$ 行, 每行两个正整数 $w_{i}, v_{i}$ 分别表示每块砖的重量和价值。
## 输出格式

一行，一个整数表示答案。
## 样例

### 样例输入 #1
```
5
4 4
1 1
5 2
5 5
4 3
```
### 样例输出 #1
```
10
```
## 提示

**【样例说明】**

选择第 $1$、$2$、$4$ 块砖，从上到下按照 $2$、$1$、$4$ 的顺序堆成一座塔，总价值为 $4+1+5=10$。

**【评测用例规模与约定】**

对于 $20 \%$ 的数据，保证 $n \leq 10$;

对于 $100 \%$ 的数据，保证 $n \leq 1000 ; w_{i} \leq 20 ; v_{i} \leq 20000$ 。

蓝桥杯 2022 国赛 B 组 J 题。


---

---
title: "[蓝桥杯 2022 国 C] 数组个数"
layout: "post"
diff: 普及+/提高
pid: P8810
tag: ['动态规划 DP', '2022', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 C] 数组个数
## 题目描述

  小蓝有一个长度为 $n$ 的数组 $B = (b_0,b_1,\cdots,b_{n−1})$，数组 $B$ 是由另一个长度为 $n$ 的环形数组 $A = (a_0,a_1,\cdots,a_{n−1})$ 经过一次相邻最大化操作得到的，其中 $a_i$ 与 $a_{i+1}$ 相邻，$a_0$ 与 $a_{n−1}$ 相邻。

形式化描述为：

$$
b_i=
\begin{cases}
\max\{a_{n-1},a_0,a_1\}& i=0\\
\max\{a_{i-1},a_i,a_{i+1}\}& 0<i<n-1\\
\max\{a_{n-2},a_{n-1},a_0\}& i=n-1\\
\end{cases}
$$

小蓝想知道，可能有多少个满足条件的数组 $A$，经过一次相邻最大化操作后能得到数组 $B$，注意 $A$ 中的每个元素都要求为非负整数。
## 输入格式

输入的第一行包含一个整数 $n$，表示数组长度。

第二行包含 $n$ 个整数 $b_0,b_1,\cdots,b_{n−1}$，相邻两个整数之间用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案，答案可能很大，请输出答案除以 $1000000007$（即 $10^9+7$）后的余数。
## 样例

### 样例输入 #1
```
5
8 6 1 8 8
```
### 样例输出 #1
```
7
```
## 提示

**【样例说明】**

可能的 $A$ 数组有 $7$ 个 ：$(6,0,0,1,8)$、$(6,0,1,0,8)$、$(6,0,1,1,8)$、$(6,1,0,0,8)$、$(6,1,0,1,8)$、$(6,1,1,0,8)$、$(6,1,1,1,8)$。

【评测用例规模与约定】

对于 $30\%$ 的评测用例，$3≤n≤10$；

对于 $60\%$ 的评测用例，$3≤n≤100$；

对于所有评测用例，$3 ≤ n ≤ 1000$，$0 ≤ b_i ≤ 10$。

蓝桥杯 2022 国赛 C 组 G 题。


---

---
title: "[蓝桥杯 2022 国 C] 打折"
layout: "post"
diff: 普及+/提高
pid: P8812
tag: ['2022', '枚举', '差分', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 C] 打折
## 题目描述

小蓝打算采购 $n$ 种物品，每种物品各需要 $1$ 个。

小蓝所住的位置附近一共有 $m$ 个店铺，每个店铺都出售着各种各样的物品。

第 $i$ 家店铺会在第 $s_i$ 天至第 $t_i$ 天打折，折扣率为 $p_i$，对于原件为 $b$ 的物品，折后价格为 $\lfloor\frac {b\cdot p_j}{100}\rfloor$。其它时间需按原价购买。

小蓝很忙，他只能选择一天的时间去采购这些物品。请问，他最少需要花多少钱才能买到需要的所有物品。

题目保证小蓝一定能买到需要的所有物品。
## 输入格式

输入的第一行包含两个整数 $n,m$，用一个空格分隔，分别表示物品的个数和店铺的个数。


接下来依次包含每个店铺的描述。每个店铺由若干行组成，其中第一行包含四个整数 $s_i,t_i, p_i,c_i$，相邻两个整数之间用一个空格分隔，分别表示商店优惠的起始和结束时间、折扣率以及商店内的商品总数。之后接 $c_i$ 行，每行包含两个整数 $a_j,b_j$，用一个空格分隔，分别表示该商店的第 $j$ 个商品的类型和价格。商品的类型由 $1$ 至 $n$ 编号。
## 输出格式

输出一行包含一个整数表示小蓝需要花费的最少的钱数。
## 样例

### 样例输入 #1
```
2 2
1 2 89 1
1 97
3 4 77 1
2 15
```
### 样例输出 #1
```
101
```
## 提示

对于 $40\%$ 的评测用例，$n,m≤500，s_i ≤t_i ≤100，\sum c_i ≤2000$；

对于 $70\%$ 的评测用例，$n,m≤5000，\sum c_i ≤20000$；

对于所有评测用例，$1 ≤ n,m ≤ 10^5，1 ≤ c_i ≤ n，\sum c_i ≤ 4\times10^5，1 ≤ s_i ≤t_i ≤10^9，1 < p_i < 100，1≤a_j ≤n，1≤b_j ≤10^9$。

蓝桥杯 2022 国赛 C 组 I 题。


---

---
title: "[蓝桥杯 2023 国 B] 逃跑"
layout: "post"
diff: 普及+/提高
pid: P9428
tag: ['2023', '期望', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 B] 逃跑
## 题目描述

小明所在星系有 $n$ 颗星球，编号为 $1$ 到 $n$。这些星球通过 $n-1$ 条无向边连成一棵树。根结点为编号为 $1$ 的星球。

为了在星际战争到来时逃到其他星系，小明在根结点设置了逃离用的传送门。每个星球的人只需要一直往父结点星球移动就可以抵达根结点。为了方便各个星球的人去往根结点，小明将其中 $m$ 个星球设置为了跳板星球。在从某个星球去往根结点的路径上，当一个人经过任意星球（包括起点星球）时，他可以尝试直接跳跃到 **其前往根结点路径上的除当前星球以外的第一个跳板星球**，其时间花费和走到父结点星球的时间花费相同，都是 $1$ 单位时间。

然而，因为技术问题，向跳板星球的跳跃并不一定成功，每一次跳跃都有 $p$ 的概率失败，并转而跳跃到当前星球的父结点星球（相当于直接走到父结点星球）；同时此跳板星球失效，将 **不再视为跳板星球**。

为了衡量移动效率，小明想知道，如果一个人在这 $n$ 颗星球中随机选择一颗出发前往根结点，其花费的最短时间的期望是多少单位时间？
## 输入格式

输入共 $n + 1$ 行，第一行为两个正整数 $n$、$m$ 和一个浮点数 $p$。

后面 $n - 1$ 行，每行两个正整数 $x_i,y_i$ 表示第 $i$ 条边的两个端点。

最后一行，共 $m$ 个正整数表示所有跳板星球的编号。
## 输出格式

一行，一个浮点数，表示答案（请保留两位小数）。
## 样例

### 样例输入 #1
```
4 1 0.2
1 2
2 3
3 4
2
```
### 样例输出 #1
```
1.30
```
## 提示

### 样例说明

从 $1$ 号星球出发的时间花费为 $0$；  
从 $2$ 号星球出发的时间花费为 $1$；  
从 $3$ 号星球出发的时间花费为 $2$；  
从 $4$ 号星球出发的时间花费为 $0.8 \times 2 + 0.2 \times 3 = 2.2$。

所以期望时间为 $\dfrac{0+1+2+2.2}{4}=1.3$。

### 评测用例规模与约定

 - 对于 $30\%$ 的数据，保证 $1 \le n \le 2000$。
 - 对于 $100\%$ 的数据，保证 $1 \le n \le 10^6$，$1 \le m \le n$，$0 < p < 1$。
 
 第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 J 题


---


---
title: "[蓝桥杯 2023 省 B] 整数删除"
layout: "post"
diff: 普及+/提高
pid: P12085
tag: ['堆', '2023', '链表', '蓝桥杯省赛']
---
# [蓝桥杯 2023 省 B] 整数删除
## 题目描述

给定一个长度为 $N$ 的整数数列：$A_{1},A_{2},\ldots,A_{N}$。你要重复以下操作 $K$ 次：

每次选择数列中最小的整数（如果最小值不止一个，选择最靠前的），将其删除。并把与它相邻的整数加上被删除的数值。

输出 $K$ 次操作后的序列。
## 输入格式

第一行包含两个整数 $N$ 和 $K$。

第二行包含 $N$ 个整数，$A_{1},A_{2},A_{3},\ldots,A_{N}$。
## 输出格式

输出 $N-K$ 个整数，中间用一个空格隔开，代表 $K$ 次操作后的序列。
## 样例

### 样例输入 #1
```
5 3
1 4 2 8 7
```
### 样例输出 #1
```
17 7
```
## 提示

**【样例说明】**

数列变化如下，中括号里的数是当此操作中被选择的数：
```plain
[1] 4 2 8 7
5 [2] 8 7
[7] 10 7
17 7
```
**【评测用例规模与约定】**

对于 $20 \%$ 的数据，$1 \leq K<N \leq 10^4$。

对于 $100 \%$ 的数据，$1 \leq K<N \leq 5 \times 10^{5}$，$0 \leq A_{i} \leq 10^{8}$。 

蓝桥杯 2023 省赛 B 组 H 题。


---

---
title: "[KOI 2023 Round 2] ZigZag"
layout: "post"
diff: 普及+/提高
pid: P12665
tag: ['2023', '链表', 'KOI（韩国）']
---
# [KOI 2023 Round 2] ZigZag
## 题目背景

试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。

按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。
## 题目描述

给定一个长度为 $N$ 的序列 $A_1, A_2, \dots, A_N$，该序列是 $1$ 到 $N$ 之间的所有整数的一个排列，也就是说，$1$ 到 $N$ 的每个整数恰好出现一次。

$A$ 的一个**子序列**是通过从 $A$ 中删除 $0$ 个或多个元素得到的序列。

给定三个整数 $x, y, z$（$1 \leq x, y, z \leq N$ 且 $y \leq z$），定义 $f(x, y, z)$ 为满足以下条件的 $A$ 的子序列所能取得的**最大长度**：

1. 子序列中的元素只能从原序列中下标处于区间 $[y, z]$ 的部分选取。也就是说，子序列只能由 $A_y, A_{y+1}, \dots, A_z$ 组成。
2. 子序列中所有的元素值都不超过 $x$。
3. 子序列必须是一个**之字形序列（Zigzag）**。

长度为 $K$ 的序列 $S_1, S_2, \dots, S_K$ 是**之字形序列**，当且仅当对于所有满足 $1 \leq i \leq K - 2$ 的 $i$，满足以下条件之一：

- 如果 $S_i < S_{i+1}$，则有 $S_{i+1} > S_{i+2}$；
- 如果 $S_i > S_{i+1}$，则有 $S_{i+1} < S_{i+2}$。

更具体地说，所有长度不超过 $2$ 的序列都被认为是之字形序列。

请注意，空序列的长度为 $0$，它满足上述所有条件，因此总有 $f(x, y, z) \geq 0$。

现在，对于所有满足 $1 \leq y \leq z \leq N$ 的整数对 $(y, z)$，将所有 $f(x, y, z)$ 的值相加，定义为 $g(x)$。

你的任务是：对于每个 $x = 1, 2, \dots, N$，计算并输出 $g(x)$ 的值。
## 输入格式

第一行输入一个整数 $N$。  
第二行输入 $A_1, A_2, \dots, A_N$，各数之间以空格分隔。

## 输出格式

输出 $N$ 行，第 $i$ 行输出 $g(i)$ 的值（$1 \leq i \leq N$）。

## 样例

### 样例输入 #1
```
3
1 2 3
```
### 样例输出 #1
```
3
7
9
```
### 样例输入 #2
```
6
3 1 4 6 5 2
```
### 样例输出 #2
```
10
16
22
34
40
46
```
## 提示

**限制条件**

- 所有输入均为整数。
- $2 \leq N \leq 200\,000$
- 对于所有 $i$（$1 \leq i \leq N$），有 $1 \leq A_i \leq N$；
- 对于所有 $i, j$（$1 \leq i < j \leq N$），有 $A_i \ne A_j$（即 $A$ 是一个排列）。

**子任务**

1. （10 分）$N \leq 15$
2. （13 分）$N \leq 100$
3. （17 分）$N \leq 500$
4. （22 分）$N \leq 5\,000$
5. （38 分）无附加限制

翻译由 ChatGPT-4o 完成


---

---
title: "「QFOI R1」头"
layout: "post"
diff: 普及+/提高
pid: P9715
tag: ['线性数据结构', '洛谷原创', 'O2优化', '洛谷月赛', '链表']
---
# 「QFOI R1」头
## 题目背景

可以看看这个讨论：<https://www.luogu.com.cn/discuss/703835>。
## 题目描述

小 R 是一个可爱的女孩子。有一天，她在被摸头时，突然灵光乍现，便随手加强了一道题给你做。

这道题的名字叫涂色游戏。初始时你有一个 $n$ 行 $m$ 列的网格，所有格子上都没有颜色。有 $k$ 种颜色的刷子，颜色编号为 $1\sim k$。然后给出 $q$ 次操作，每次操作给出 $op,l,r,c,t$ 五个参数：

- 如果 $op=1$，表示将第 $l\sim r$ 行的所有格子涂成颜色 $c$。
- 如果 $op=2$，表示将第 $l\sim r$ 列的所有格子涂成颜色 $c$。
- 如果 $t=0$，意味着如果涂色时遇到已经被染色的格子，就不再进行染色。
- 如果 $t=1$，意味着如果涂色时遇到已经被染色的格子，就用新的颜色覆盖它。

在所有涂色操作结束以后，对于每种颜色，求出有多少个格子被染成了这种颜色。
## 输入格式

第一行四个整数 $n,m,k,q$，表示行数、列数、颜色数和操作数。

接下来 $q$ 行，每行五个整数 $op,l,r,c,t$，表示这次操作的参数。
## 输出格式

一行 $k$ 个整数，第 $i$ 个整数表示被染成颜色 $i$ 的格子数量。
## 样例

### 样例输入 #1
```
5 5 2 4
1 2 4 1 0
2 4 5 1 1
2 2 4 2 0
1 1 1 2 1
```
### 样例输出 #1
```
17 7
```
### 样例输入 #2
```
5 5 3 6
2 1 3 3 1
2 2 4 1 0
1 4 4 2 0
2 1 1 1 0
1 2 5 2 0
1 1 5 3 0
```
### 样例输出 #2
```
5 4 16
```
## 提示

**样例 $1$ 解释**

用浅灰色表示颜色 $1$，灰色表示颜色 $2$。

涂色过程如图所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/gl7dmh5b.png)

共有 $17$ 个区域被染成颜色 $1$，$7$ 个区域被染成颜色 $2$。

---

**数据范围**

本题共 $20$ 个测试点，每个测试点 $5$ 分。

对于全部数据，保证 $1\le n,m,q\le 2\times 10^6$，$1\le k\le 5\times 10^5$，$op\in\{1,2\}$，若 $op=1$ 则 $1\le l\le r\le n$，若 $op=2$ 则 $1\le l\le r\le m$，$1\le c\le k$，$t\in\{0,1\}$。

- 对于测试点 $1\sim 3$：保证 $n,m,k,q\le 200$。
- 对于测试点 $4\sim 6$：保证 $n,m,k,q\le 2\times 10^3$。
- 对于测试点 $7\sim 9$：保证 $n,m,k,q\le 10^5$，$op=1$。
- 对于测试点 $10\sim 12$：保证 $n,m,k,q\le 10^5$，$t=1$。
- 对于测试点 $13\sim 18$：保证 $n,m,k,q\le 10^5$。
- 对于测试点 $19\sim 20$：无特殊限制。


---


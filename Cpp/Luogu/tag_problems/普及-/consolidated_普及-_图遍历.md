---
title: "[蓝桥杯青少年组省赛 2022] 路线"
layout: "post"
diff: 普及-
pid: B4292
tag: ['图论', '2022', '图遍历', '蓝桥杯青少年组']
---
# [蓝桥杯青少年组省赛 2022] 路线
## 题目描述

有一个旅游景区，景区中有 $N$ 个景点，景点以数字 $1$ 到 $N$ 编号，其中编号为 $N$ 的景点为游客服务中心所在地。景区中有 $M$ 条连接路线，每条路线连接两个景点。

已知：
1. 一个景点可以被多条路线连接；
2. 景点之间的连接路线都可以双向行走；

当给出 $N$ 个景点和 $M$ 条连接路线，及 $M$ 条路线的连接关系，请你计算出从编号 $1$ 到编号 $N-1$ 的每一个景点，到达游客服务中心至少需要经过几条路线。如果某个景点不能到达游客服务中心则输出 $-1$。

例如：
- 当 $N=5$，$M=4$ 时
- 4 条路线的连接关系为：$1\leftrightarrow2$、$1\leftrightarrow3$、$2\leftrightarrow4$、$2\leftrightarrow5$
- 则：
  - 景点 $1$ 到达景点 $5$（游客服务中心）至少经过 $2$ 条路线（路线 $2$，路线 $4$）
  - 景点 $2$ 到达景点 $5$ 至少经过 $1$ 条路线（路线 $4$）
  - 景点 $3$ 到达景点 $5$ 至少经过 $3$ 条路线（路线 $1$，路线 $2$，路线 $4$）
  - 景点 $4$ 到达景点 $5$ 至少经过 $2$ 条路线（路线 $3$，路线 $4$）
## 输入格式

第一行输入两个正整数 $N$ 和 $M$（$4 \leq N \leq 100$，$1 \leq M \leq 100$），$N$ 表示景点个数，$M$ 表示路线条数，两个正整数之间一个空格隔开。

接下来输入 $M$ 行，每行包括两个正整数 $S$，$E$（$1 \leq S \leq N$，$1 \leq E \leq N$，$S \neq E$），两个正整数之间一个空格隔开，表示编号 $S$ 和编号 $E$ 的两个景点有一条路线连接。

## 输出格式

一行输出多个整数。按照 $1$ 到 $N-1$ 的编号顺序，分别输出每个景点到达编号 $N$（游客服务中心），经过几条路线可以到达，如果某个景点不能到达则输出 $-1$，整数之间一个空格隔开。
## 样例

### 样例输入 #1
```
5 4
1 2
1 3
2 4
2 5
```
### 样例输出 #1
```
2 1 3 2
```


---

---
title: "[GESP202312 六级] 工作沟通"
layout: "post"
diff: 普及-
pid: P10109
tag: ['图论', '2023', '图遍历', 'GESP']
---
# [GESP202312 六级] 工作沟通
## 题目描述

某公司有 $N$ 名员工，编号从 $0$ 至 $N-1$。其中，除了 $0$ 号员工是老板，其余每名员工都有一个直接领导。我们假设编号为 $i$ 的员工的直接领导是 $f_i$。

该公司有严格的管理制度，每位员工只能受到本人或直接领导或间接领导的管理。具体来说，规定员工 $x$ 可以管理员工 $y$，当且仅当 $x=y$，或 $x=f_y$，或 $x$ 可以管理 $f_y$。特别地，$0$ 号员工老板只能自我管理，无法由其他任何员工管理。

现在，有一些同事要开展合作，他们希望找到一位同事来主持这场合作，这位同事必须能够管理参与合作的所有同事。如果有多名满足这一条件的员工，他们希望找到编号最大的员工。你能帮帮他们吗？
## 输入格式

第一行一个整数 $N$，表示员工的数量。

第二行 $N - 1$ 个用空格隔开的正整数，依次为 $f_1,f_2,\dots f_{N−1}$。

第三行一个整数 $Q$，表示共有 $Q$ 场合作需要安排。

接下来 $Q$ 行，每行描述一场合作：开头是一个整数 $m$（$2 \le m \le N$），表示参与本次合作的员工数量；接着是 $m$ 个整数，依次表示参与本次合作的员工编号（保证编号合法且不重复）。

保证公司结构合法，即不存在任意一名员工，其本人是自己的直接或间接领导。
## 输出格式

输出 $Q$ 行，每行一个整数，依次为每场合作的主持人选。

## 样例

### 样例输入 #1
```
5
0 0 2 2
3
2 3 4
3 2 3 4
2 1 4
```
### 样例输出 #1
```
2
2
0
```
### 样例输入 #2
```
7
0 1 0 2 1 2
5
2 4 6
2 4 5
3 4 5 6
4 2 4 5 6
2 3 4
```
### 样例输出 #2
```
2
1
1
1
0
```
## 提示

**样例解释 1**

对于第一场合作，员工$3,4$ 有共同领导 $2$ ，可以主持合作。

对于第二场合作，员工 $2$ 本人即可以管理所有参与者。

对于第三场合作，只有 $0$ 号老板才能管理所有员工。

**数据范围**

对于 $50\%$ 的测试点，保证 $N \leq 50$。

对于所有测试点，保证 $3 \leq N \leq 300$，$Q \leq 100$。



------------
2024/1/28 添加一组 hack 数据。


---

---
title: "【深基18.例3】查找文献"
layout: "post"
diff: 普及-
pid: P5318
tag: ['图论', '图遍历']
---
# 【深基18.例3】查找文献
## 题目描述

小 K 喜欢翻看洛谷博客获取知识。每篇文章可能会有若干个（也有可能没有）参考文献的链接指向别的博客文章。小 K 求知欲旺盛，如果他看了某篇文章，那么他一定会去看这篇文章的参考文献（如果他之前已经看过这篇参考文献的话就不用再看它了）。

假设洛谷博客里面一共有 $n(n\le10^5)$ 篇文章（编号为 1 到 $n$）以及 $m(m\le10^6)$ 条参考文献引用关系。目前小 K 已经打开了编号为 1 的一篇文章，请帮助小 K 设计一种方法，使小 K 可以不重复、不遗漏的看完所有他能看到的文章。

这边是已经整理好的参考文献关系图，其中，文献 X → Y 表示文章 X 有参考文献 Y。不保证编号为 1 的文章没有被其他文章引用。

![](https://cdn.luogu.com.cn/upload/image_hosting/f4n4tlhi.png)

请对这个图分别进行 DFS 和 BFS，并输出遍历结果。如果有很多篇文章可以参阅，请先看编号较小的那篇(因此你可能需要先排序)。
## 输入格式

共 $m+1$ 行，第 1 行为 2 个数，$n$ 和 $m$，分别表示一共有 $n(n\le10^5)$ 篇文章（编号为 1 到 $n$）以及$m(m\le10^6)$ 条参考文献引用关系。

接下来 $m$ 行，每行有两个整数 $X,Y$ 表示文章 X 有参考文献 Y。
## 输出格式

共 2 行。
第一行为 DFS 遍历结果，第二行为 BFS 遍历结果。
## 样例

### 样例输入 #1
```
8 9
1 2
1 3
1 4
2 5
2 6
3 7
4 7
4 8
7 8
```
### 样例输出 #1
```
1 2 5 6 3 7 8 4 
1 2 3 4 5 6 7 8 
```


---


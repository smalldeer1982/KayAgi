---
title: "[语言月赛202211] Power Strip"
layout: "post"
diff: 普及-
pid: B3681
tag: ['2022', '树论', '语言月赛']
---
# [语言月赛202211] Power Strip
## 题目描述

理塘大学举行了第五人格校内排位赛，很多同学带了自己的笔记本电脑用来比赛。笔记本需要供电，但是很快同学们发现了一个问题，赛场里只有一个插座！因此同学们将自己的插排带到了赛场里。

具体的，同学们一共带来了 $n$ 个插排，我们分别将其标号为 $1 \sim n$。

下一个问题是插排的安装问题。由于赛场里只有一个插座，因此同学们只能用如图的 “插排插插排” 的方式。

![](https://cdn.luogu.com.cn/upload/image_hosting/eed9tli7.png)

$$\begin{matrix} \color{red} \small \text{请注意，这种情况只是服务于题目背景，但是十分不符合用电安全！} \\\color{red} \small \text{在生活用电中，请保证安全至上！}\end{matrix}$$

具体的，你会得到一个长度为 $n - 1$ 的序列 $u _ 2, \cdots, u _ n$。 除编号为 $1$ 的插排连接在插座上外，$u _ i$ 代表编号为 $i$ 的插排连接在 $u _ i$ 编号的插排上，我们保证 $u _ i < i$。

插排安装好后，同学们将充电器插在了不同的插座上。最后，我们可以用一个序列 $a _ 1, a _ 2, \cdots, a _ n$ 表示充电器的使用情况。具体的，对于标号为 $i$ 的插座，其被插上了 $a _ i$ 个充电器。

我们定义插排 $i$ 向某个充电器**供电**，当且仅当电流从赛场中的唯一一个插座流向这个充电器的时候，经过了插排 $i$。

如果对供电的概念有疑问，可以参照**样例解释 #1**进一步理解。

现在同学们想要知道，对于每一个插排，这个插排在向几个充电器**供电**。然而这个问题对于他们来说太难，所以他们找到了你，希望你能够帮他们解决这个问题。

## 输入格式

输入共三行。

第一行为一个整数 $n$，代表插排数量。

第二行 $n - 1$ 个整数 $u _ \bold{2}, u _ 3, \cdots, u _ n$，代表第 $2 \sim n$ 号插排连接的插排序号。

第三行 $n$ 个整数 $a _ 1, a _ 2, \cdots, a _ n$，代表 $1 \sim n$ 插排上插上的的充电器数量。
## 输出格式

输出一行。

第一行为 $n$ 个整数，以一个空格隔开，代表每个插排**供电**的充电器数量。
## 样例

### 样例输入 #1
```
6
1 2 1 4 5
1 2 3 1 2 4
```
### 样例输出 #1
```
13 5 3 7 6 4
```
## 提示

**【样例 #1 解释】**

我们使用紫色矩形表示一个充电器，样例 #1 的插排排布如下图：

![](https://cdn.luogu.com.cn/upload/image_hosting/jbftzsfa.png)

以 $4$ 号插排举例，显然 $4, 5, 6$ 号插排上的充电器供电都需要经过 $4$ 号插排。电流方向如下图蓝色箭头所示。

![](https://cdn.luogu.com.cn/upload/image_hosting/z8o6ucz4.png)

$4$ 号插排供电的充电器共有 $1 + 2 + 4 = 7$ 个。

**【数据规模与约定】**

对于前 $10\%$ 的数据，保证 $n = 2$。

对于前 $20\%$ 的数据，保证 $n \leq 10$。

对于前 $50\%$ 的数据，保证 $n \leq 5 \times 10 ^ 3$。

对于另外 $10\%$ 的数据，保证对任意的 $2 \leq i \leq n, u_i = i - 1$。

对于另外 $10\%$ 的数据，保证对任意的 $2 \leq i \leq n, u_i = 1$。

对于所有数据，保证 $2 \leq n \leq 1 \times 10 ^ 6, 0 \leq a _ i \leq 10 ^ 9, 1 \leq u _ i < i$。


---

---
title: "碧树"
layout: "post"
diff: 普及-
pid: P11242
tag: ['数学', '洛谷原创', 'O2优化', '树论', '洛谷月赛']
---
# 碧树
## 题目背景

[English statement](https://www.luogu.com.cn/problem/U505210). **You must submit your code at the Chinese version of the statement.**

小 T 不知道交流是什么。

是为了弄懂一串奇怪的符号，然后再把它放入他人的大脑吗？

是为了得到一些抽象的知识，然后再用它打破自己的习惯吗？

为了交流，小 T 最终决定接通了 $\text{220V}$ 的电压。
## 题目描述

> t1k1x1ww。

小 T 注视着这一串自己不能理解的符号，决定先和你交流一个 OI 题目。

小 T 有一棵有根树，它共有 $k$ 个叶子结点，同时他还告诉了你，其叶子结点的深度分别为 $a_1\dots a_k$。请你帮他计算，这棵树最少包含多少个结点。小 T 保证存在至少一棵这样的树。

如果您不熟悉题面中的若干定义，我们乐意提醒您：

- 图上的 **简单路径** 指一条经过顶点不重复、经过边不重复的路径。
- 一棵 **树** 是一张联通，且任意两点之间有且仅有一条简单路径的图。在一棵树里，我们会选择一个节点为根结点。
- 树上的 **叶子结点** 为不是根结点，且度数为 $1$ 的结点。
- 树上一个节点的 **深度** 是该结点到根结点的简单路径上结点的个数。
## 输入格式

第一行一个整数 $k$。

接下来一行 $k$ 个整数，描述 $a_1\dots a_k$。
## 输出格式

仅一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
4
2 3 4 5
```
### 样例输出 #1
```
8

```
### 样例输入 #2
```
7
6 6 7 8 4 2 4
```
### 样例输出 #2
```
14

```
## 提示

### 样例解释

- 对于第一组数据，下面是一棵可能的树：

![](https://cdn.luogu.com.cn/upload/image_hosting/kh6cgtyp.png?x-oss-process=image/resize,m_lfit,h_400,w_400)

其大小为 $8$，其中叶子 $3, 5, 6, 8$ 的深度分别为 $2, 3, 4, 5$。容易证明没有大小 $\leq 7$ 的树符合题意。

### 数据规模与约定

**本题采用捆绑测试和子任务依赖。**

- Subtask 0（0 pts）：样例。
- Subtask 1（30 pts）：$k = 2$。
- Subtask 2（30 pts）：$a_1 = a_2 = \dots = a_k$。
- Subtask 3（40 pts）：无特殊限制。依赖于子任务 $0 \sim 2$。

对于所有数据，保证 $1 \leq k \leq 10^5$，$2 \leq a_i \leq 10^5$，且保证存在至少一棵这样的树。


---


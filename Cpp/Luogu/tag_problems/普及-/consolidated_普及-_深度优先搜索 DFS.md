---
title: "寻找团伙"
layout: "post"
diff: 普及-
pid: B3618
tag: ['搜索', '深度优先搜索 DFS', '进制']
---
# 寻找团伙
## 题目描述

世界局势风云变幻，你想办一件大事。办事自然要有人参与，你能从 $n$ 个人里面挑选一部分人共襄盛举。

要办这件事，一共涉及 $k$ 方面的能力，例如游说他人的能力、玩游戏的能力、睡觉的能力。每位人士都会具备某一些能力，例如机器猫就可能擅长睡觉、擅长玩游戏，而不擅长游说他人。

你的计划很宏伟，因此你希望团队拥有很全面的能力。不幸的是，如果团队中有偶数个人拥有同一类能力，那么他们就会分成两派，争执不下，导致整个团队丧失这方面的能力。相应地，如果这项能力只有奇数个人拥有，那么他们总能形成一个多数派，帮团队去做这方面的工作。

需要注意的是，团队拥有的每一项能力，对计划的成功率的贡献是不一样的。第一项能力最重要，它的权重是 $2^{k-1}$；第二项能力的权重是 $2^{k-2}$；依次类推。第 $k$ 项能力最不重要，权重只有 $1$。

计划的成功率得分，即是**团队拥有的所有能力对应的权重之和**。

你希望计划成功率最大。因此，你需要选出合适的人士，来参与到你的宏图伟业中。

## 输入格式

第一行，两个正整数 $n, k$。分别表示供你挑选的人的数量，以及能力的种类数。  
接下来 $n$ 行，每行表示每个人拥有的能力。这一行首先有一个整数 $c$，表示该人士拥有多少种能力；接下来是 $c$ 个 $[1, k]$ 之间的正整数，表示该人士拥有哪些能力。


## 输出格式

仅一行，一个整数，表示计划的成功率得分。
## 样例

### 样例输入 #1
```
5 5
1 1
1 2
1 3
1 4
1 5
```
### 样例输出 #1
```
31
```
### 样例输入 #2
```
3 5
3 1 2 3
4 2 3 4 5
2 3 4
```
### 样例输出 #2
```
28
```
### 样例输入 #3
```
3 5
2 1 2
3 5 3 2
3 4 2 5
```
### 样例输出 #3
```
30
```
### 样例输入 #4
```
21 60
0 
0 
3 60 27 48
0 
1 48
2 52 14
2 4 31
0 
0 
2 28 43
2 6 31
0 
1 7
3 45 6 48
0 
1 51
0 
2 28 20
2 37 51
1 8
53 59 39 29 23 53 27 13 16 44 34 38 24 9 32 58 54 31 1 7 45 3 30 36 17 48 42 22 18 21 6 11 25 33 37 52 10 60 49 57 2 28 8 14 5 47 4 41 35 43 50 46 26 12
```
### 样例输出 #4
```
1152884121210322895
```
## 提示

#### 样例解释

第一组样例，共 5 个人，每个人拥有的能力不一样。最终选择的结果是让这 5 个人都参与计划，得分 $16+8+4+2+1 = 31$。

第二组样例，我们选择只让 $1$ 参与。那么团队具有能力 $1,2, 3$，得分 $16+8+4=28$。

第三组样例，我们让 $1,2,3$ 参与。由于团队中有偶数个成员拥有能力 $5$，故团队并不拥有能力 $5$。奇数个成员拥有能力 $2$，故团队拥有能力 $2$。最终，团队具有能力 $1,2,3,4$。得分 $16+8+4+2=30$。

#### 数据规模与约定

对于 $100\%$ 的数据，有 $n\leq 21, k\leq 60$。





---

---
title: "枚举元组"
layout: "post"
diff: 普及-
pid: B3621
tag: ['深度优先搜索 DFS']
---
# 枚举元组
## 题目描述

$n$ 元组是指由 $n$ 个元素组成的序列。例如 $(1,1,2)$ 是一个三元组、$(233,254,277,123)$ 是一个四元组。

给定 $n$ 和 $k$，请按字典序输出全体 $n$ 元组，其中元组内的元素是在 $[1, k]$ 之间的整数。

「字典序」是指：优先按照第一个元素从小到大的顺序，若第一个元素相同，则按第二个元素从小到大……依此类推。详情参考样例数据。
## 输入格式

仅一行，两个正整数 $n, k$。
## 输出格式

若干行，每行表示一个元组。元组内的元素用空格隔开。
## 样例

### 样例输入 #1
```
2 3
```
### 样例输出 #1
```
1 1
1 2
1 3
2 1
2 2
2 3
3 1
3 2
3 3
```
### 样例输入 #2
```
3 3
```
### 样例输出 #2
```
1 1 1
1 1 2
1 1 3
1 2 1
1 2 2
1 2 3
1 3 1
1 3 2
1 3 3
2 1 1
2 1 2
2 1 3
2 2 1
2 2 2
2 2 3
2 3 1
2 3 2
2 3 3
3 1 1
3 1 2
3 1 3
3 2 1
3 2 2
3 2 3
3 3 1
3 3 2
3 3 3
```
## 提示

对于 $100\%$ 的数据，有 $n\leq 5, k\leq 4$。


---

---
title: "枚举子集（递归实现指数型枚举）"
layout: "post"
diff: 普及-
pid: B3622
tag: ['深度优先搜索 DFS']
---
# 枚举子集（递归实现指数型枚举）
## 题目描述

今有 $n$ 位同学，可以从中选出任意名同学参加合唱。

请输出所有可能的选择方案。
## 输入格式

仅一行，一个正整数 $n$。
## 输出格式

若干行，每行表示一个选择方案。

每一种选择方案用一个字符串表示，其中第 $i$ 位为 `Y` 则表示第 $i$ 名同学参加合唱；为 `N` 则表示不参加。

需要以字典序输出答案。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
NNN
NNY
NYN
NYY
YNN
YNY
YYN
YYY
```
## 提示

对于 $100\%$ 的数据，保证 $1\leq n\leq 10$。


---

---
title: "枚举排列（递归实现排列型枚举）"
layout: "post"
diff: 普及-
pid: B3623
tag: ['深度优先搜索 DFS']
---
# 枚举排列（递归实现排列型枚举）
## 题目描述

今有 $n$ 名学生，要从中选出 $k$ 人排成一列拍照。

请按字典序输出所有可能的排列方式。
## 输入格式

仅一行，两个正整数 $n, k$。
## 输出格式

若干行，每行 $k$ 个正整数，表示一种可能的队伍顺序。
## 样例

### 样例输入 #1
```
3 2
```
### 样例输出 #1
```
1 2
1 3
2 1
2 3
3 1
3 2
```
## 提示

对于 $100\%$ 的数据，$1\leq k\leq n \leq 10$。


---

---
title: "迷宫寻路"
layout: "post"
diff: 普及-
pid: B3625
tag: ['广度优先搜索 BFS', '深度优先搜索 DFS']
---
# 迷宫寻路
## 题目描述

机器猫被困在一个矩形迷宫里。

迷宫可以视为一个 $n\times m$ 矩阵，每个位置要么是空地，要么是墙。机器猫只能从一个空地走到其上、下、左、右的空地。

机器猫初始时位于 $(1, 1)$ 的位置，问能否走到 $(n, m)$ 位置。

## 输入格式

第一行，两个正整数 $n,m$。  

接下来 $n$ 行，输入这个迷宫。每行输入一个长为 $m$ 的字符串，`#` 表示墙，`.` 表示空地。
## 输出格式

仅一行，一个字符串。如果机器猫能走到 $(n, m)$，则输出 `Yes`；否则输出 `No`。
## 样例

### 样例输入 #1
```
3 5
.##.#
.#...
...#.
```
### 样例输出 #1
```
Yes
```
## 提示

#### 样例解释

路线如下：$(1,1)\to (2,1) \to (3,1) \to (3,2)\to (3,3) \to (2, 3) \to (2, 4) \to (2, 5) \to (3, 5)$

#### 数据规模与约定 

对于 $100\%$ 的数据，保证 $1 \leq n, m \leq 100$，且 $(1,1)$ 和 $(n, m)$ 均为空地。


---

---
title: "[CCC 2024 J5] Harvest Waterloo"
layout: "post"
diff: 普及-
pid: P10294
tag: ['搜索', '2024', 'CCC（加拿大）', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# [CCC 2024 J5] Harvest Waterloo
## 题目描述

有一款新出现的广受欢迎的收割模拟游戏叫做 Harvest Waterloo。游戏在一块矩形南瓜地上进行，南瓜地里有成捆的干草和不同大小的南瓜。游戏开始时，一个农民在其中一个南瓜的位置上。

农民通过在整片土地上向左、向右、向上或向下移动来收割南瓜。农民不能斜着移动，不能穿过干草，也不能离开田地。

你的工作是确定农民收获的南瓜的总价值。其中一个小南瓜值 $1$ 美元，一个中等大小的南瓜值 $5$ 美元，而一个大南瓜值 $10$ 美元。
## 输入格式

输入的第一行是一个整数 $R > 0$ 表示南瓜地的行数。

第二行是一个整数 $C > 0$ 表示南瓜地的列数。

接下来 $R$ 行描述了整个南瓜地。每行包含 $C$ 个字符并且每个字符要么表示一个南瓜，要么表示干草：`S` 表示小南瓜，`M` 表示中等大小的南瓜，`L` 表示一个大南瓜，`*` 表示干草。

下一行包含一个整数 $A$ 满足 $0 \leq A < R$，最后一行是一个整数 $B$ 满足 $0 \leq B < C$。表示农民一开始在第 $A$ 行第 $B$ 列的位置。南瓜地的左上角称为第 $0$ 行第 $0$ 列。
## 输出格式

输出一个整数 $V$ 表示农民能够收割的南瓜的总价值。

## 样例

### 样例输入 #1
```
6
6
**LMLS
S*LMMS
S*SMSM
******
LLM*MS
SSL*SS
5
1

```
### 样例输出 #1
```
37

```
### 样例输入 #2
```
6
6
**LMLS
S*LMMS
S*SMSM
***SLL
LLM*MS
SSL*SS
2
4

```
### 样例输出 #2
```
88

```
## 提示

**【样例 1 解释】**

![](https://cdn.luogu.com.cn/upload/image_hosting/sppn2crp.png)

农民在第 $5$ 行第 $1$ 列开始可以收割 $6$ 个南瓜。可以收割到 $2$ 个小南瓜，$1$ 个中等大小的南瓜和 $3$ 个大南瓜。收割的南瓜的总价值是 $2 \times 1 + 1 \times 5 + 3 \times 10 = 37$。

**【样例 2 解释】**

![](https://cdn.luogu.com.cn/upload/image_hosting/dni4nwdv.png)

农民在第 $2$ 行第 $4$ 列开始可以收割 $19$ 个南瓜。可以收割到 $8$ 个小南瓜，$6$ 个中等大小的南瓜和 $5$ 个大南瓜。收割的南瓜的总价值是 $8 \times 1 + 6 \times 5 + 5 \times 10 = 88$。

**【数据范围】**

**本题采用捆绑测试。**

对于所有数据，保证 $1\leq R,C\leq 10^5$，$1\leq R\times C\leq 10^5$。

下面的表格显示了 $15$ 分的分配方案：

| 分值 | 描述 | 范围 |
| :-: | :- | :-: |
| $1$ | 南瓜地很小并且不存在干草。 | $R \times C \leq 100$ |
| $4$ | 南瓜地很小并且干草把南瓜地分割为一些矩形区域。 | $R \times C \leq 100$ |
| $5$ | 南瓜地很小并且干草可以在任意位置。 | $R \times C \leq 100$ |
| $5$ | 南瓜地可能很大并且干草可以在任意位置。 | $R \times C \leq 10^5$ |


---

---
title: "[NOIP 2001 普及组] 求先序排列"
layout: "post"
diff: 普及-
pid: P1030
tag: ['字符串', '树形数据结构', '2001', '递归', 'NOIP 普及组', '深度优先搜索 DFS']
---
# [NOIP 2001 普及组] 求先序排列
## 题目描述

给出一棵二叉树的中序与后序排列。求出它的先序排列。（约定树结点用不同的大写字母表示，且二叉树的节点个数 $ \le 8$）。

## 输入格式

共两行，均为大写字母组成的字符串，表示一棵二叉树的中序与后序排列。

## 输出格式

共一行一个字符串，表示一棵二叉树的先序。

## 样例

### 样例输入 #1
```
BADC
BDCA

```
### 样例输出 #1
```
ABCD

```
## 提示

**【题目来源】**

NOIP 2001 普及组第三题


---

---
title: "[NOIP 2002 普及组] 选数"
layout: "post"
diff: 普及-
pid: P1036
tag: ['搜索', '2002', 'NOIP 普及组', '深度优先搜索 DFS', '素数判断,质数,筛法']
---
# [NOIP 2002 普及组] 选数
## 题目描述

已知 $n$ 个整数 $x_1,x_2,\cdots,x_n$，以及 $1$ 个整数 $k$（$k<n$）。从 $n$ 个整数中任选 $k$ 个整数相加，可分别得到一系列的和。例如当 $n=4$，$k=3$，$4$ 个整数分别为 $3,7,12,19$ 时，可得全部的组合与它们的和为：

$3+7+12=22$

$3+7+19=29$

$7+12+19=38$

$3+12+19=34$

现在，要求你计算出和为素数共有多少种。

例如上例，只有一种的和为素数：$3+7+19=29$。
## 输入格式

第一行两个空格隔开的整数 $n,k$（$1 \le n \le 20$，$k<n$）。

第二行 $n$ 个整数，分别为 $x_1,x_2,\cdots,x_n$（$1 \le x_i \le 5\times 10^6$）。

## 输出格式

输出一个整数，表示种类数。
## 样例

### 样例输入 #1
```
4 3
3 7 12 19

```
### 样例输出 #1
```
1

```
## 提示

**【题目来源】**

NOIP 2002 普及组第二题


---

---
title: "组合型枚举"
layout: "post"
diff: 普及-
pid: P10448
tag: ['深度优先搜索 DFS']
---
# 组合型枚举
## 题目描述

从 $1 \sim n$ 这 $n$ 个整数中随机选出 $m$ 个，输出所有可能的选择方案。
## 输入格式

两个整数 $n, m$ ,在同一行用空格隔开。
## 输出格式

按照从小到大的顺序输出所有方案，每行 $1$ 个。

首先，同一行内的数升序排列，相邻两个数用一个空格隔开。

其次，对于两个不同的行，对应下标的数一一比较，字典序较小的排在前面（例如 `1 3 5 7` 排在 `1 3 6 8` 前面）。
## 样例

### 样例输入 #1
```
5 3
```
### 样例输出 #1
```
1 2 3 
1 2 4 
1 2 5 
1 3 4 
1 3 5 
1 4 5 
2 3 4 
2 3 5 
2 4 5 
3 4 5 
```
## 提示

对于所有测试数据满足 $0 \le m \le n$ ,  $ n+(n-m) \le 25 $。


---

---
title: "小猫爬山"
layout: "post"
diff: 普及-
pid: P10483
tag: ['深度优先搜索 DFS']
---
# 小猫爬山
## 题目描述

Freda 和 rainbow 饲养了 $N(N\le 18)$ 只小猫，这天，小猫们要去爬山。经历了千辛万苦，小猫们终于爬上了山顶，但是疲倦的它们再也不想徒步走下山了

Freda 和 rainbow 只好花钱让它们坐索道下山。索道上的缆车最大承重量为 $W$，而 $N$ 只小猫的重量分别是 $C_1,C_2,\dots C_N$。当然，每辆缆车上的小猫的重量之和不能超过 $W(1\le C_i,W \le 10^8)$。每租用一辆缆车，Freda 和 rainbow 就要付 $1$ 美元，所以他们想知道，最少需要付多少美元才能把这 $N$ 只小猫都运送下山？
## 输入格式

第一行包含两个用空格隔开的整数，$N$ 和 $W$。
接下来 $N$ 行每行一个整数，其中第 $i+1$ 行的整数表示第 $i$ 只小猫的重量 $C_i$。
## 输出格式

输出一个整数，最少需要多少美元，也就是最少需要多少辆缆车。
## 样例

### 样例输入 #1
```
5 1996
1
2
1994
12
29
```
### 样例输出 #1
```
2
```


---

---
title: "[蓝桥杯 2025 省 A] 黑白棋"
layout: "post"
diff: 普及-
pid: P12139
tag: ['搜索', '2025', '深度优先搜索 DFS', '剪枝', '蓝桥杯省赛']
---
# [蓝桥杯 2025 省 A] 黑白棋
## 题目描述

小蓝最近迷上了一款名为“黑白棋填充”的游戏。该游戏在一个方形网格棋盘上进行，其中部分格子已经填有黑色或白色的棋子，而其他格子为空，等待玩家填入棋子。  

游戏规则是，玩家需要按照以下规则填满整个棋盘，才能算作胜利：  
1. **黑白棋子数量均等**：  
   在每一行和每一列中，黑色棋子和白色棋子的数量必须相等。  
2. **相邻棋子限制**：  
   在棋盘的任何一行或一列中，不能有超过两个相同颜色的棋子连续排列（即不允许出现“黑黑黑”或“白白白”的情况）。  
3. **行列唯一性**：  
   每一行的棋子排列方式必须是唯一的，不能与棋盘中的任何其他行完全相同。  
   每一列的棋子排列方式必须是唯一的，不能与棋盘中的任何其他列完全相同。  
   行与列之间的棋子排列不作比较，即行可以与列相同，无需满足行列间的唯一性。

![](https://cdn.luogu.com.cn/upload/image_hosting/xybv3cow.png)

现在有一个 $6 \times 6$ 的棋盘，如上图所示，其中部分格子已填入棋子（黑色或白色），其余格子需要你填充，题目保证有唯一解。  

请给出唯一的正确解，并按照以下格式输出答案：  

- 黑色棋子用 $1$ 表示，白色棋子用 $0$ 表示。  
- 从左到右、从上到下的顺序，依次遍历棋盘上的所有格子，并将这些值拼接成一个长度为 $36$ 的字符串。  

例如，假设最终填充完成后的棋盘如下（仅为示例，并非真实答案）：  
```plain
1 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 1 0 0 0
0 0 1 1 0 0
0 0 1 1 1 1
```
则输出结果应为：`100000000000000000001000001100001111`。
## 输出格式

这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。


---

---
title: "高手去散步"
layout: "post"
diff: 普及-
pid: P1294
tag: ['搜索', '洛谷原创', '深度优先搜索 DFS']
---
# 高手去散步
## 题目背景

高手最近谈恋爱了。不过是单相思。“即使是单相思，也是完整的爱情”，高手从未放弃对它的追求。今天，这个阳光明媚的早晨，太阳从西边缓缓升起。于是它找到高手，希望在晨读开始之前和高手一起在鳌头山上一起散步。高手当然不会放弃这次梦寐以求的机会，他已经准备好了一切。

## 题目描述

鳌头山上有 $n$ 个观景点，观景点两两之间有游步道共 $m$ 条。高手的那个它，不喜欢太刺激的过程，因此那些没有路的观景点高手是不会选择去的。另外，她也不喜欢去同一个观景点一次以上。而高手想让他们在一起的路程最长（观景时它不会理高手），已知高手的穿梭机可以让他们在任意一个观景点出发，也在任意一个观景点结束。
## 输入格式

第一行，两个用空格隔开的整数 $n$ 、 $m.$ 之后 $m$ 行，为每条游步道的信息：两端观景点编号、长度。
## 输出格式

一个整数，表示他们最长相伴的路程。

## 样例

### 样例输入 #1
```
4 6
1 2 10
2 3 20
3 4 30
4 1 40
1 3 50
2 4 60
```
### 样例输出 #1
```
150
```
## 提示

对于 $100\%$ 的数据：$n \le 20$，$m \le 50$，保证观景点两两之间不会有多条游步道连接。


---

---
title: "海战"
layout: "post"
diff: 普及-
pid: P1331
tag: ['搜索', '福建省历届夏令营', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# 海战
## 题目背景

在峰会期间，武装部队得处于高度戒备。警察将监视每一条大街，军队将保卫建筑物，领空将布满了 F-2003 飞机。

此外，巡洋船只和舰队将被派去保护海岸线。不幸的是，因为种种原因，国防海军部仅有很少的几位军官能指挥大型海战。因此，他们培养了一些新海军指挥官。军官们选择了“海战”游戏来帮助他们学习。
## 题目描述

在一个方形的盘上，放置了固定数量和形状的船只，每只船却不能碰到其它的船。在本题中，我们认为船是方形的，所有的船只都是由图形组成的方形。

求出该棋盘上放置的船只的总数。
## 输入格式

第一行为两个整数 $R$ 和 $C$，用空格隔开，分别表示游戏棋盘的行数和列数。

接下来 $R$ 行，每行 $C$ 个字符，为 `#` 或 `.`。`#` 表示船只的一部分，`.` 表示水。
## 输出格式

一行一个字符串，如果船的位置放得正确（即棋盘上只存在相互之间不能接触的方形，如果两个 `#` 号上下相邻或左右相邻却分属两艘不同的船只，则称这两艘船相互接触了）。就输出 `There are S ships.`，$S$ 表示船只的数量。否则输出 `Bad placement.`。

## 样例

### 样例输入 #1
```
6 8
.....#.#
##.....#
##.....#
.......#
#......#
#..#...#
```
### 样例输出 #1
```
There are 5 ships.

```
## 提示

对于 $100\%$ 的数据，$1 \le R,C \le 1000$。


---

---
title: "求细胞数量"
layout: "post"
diff: 普及-
pid: P1451
tag: ['搜索', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# 求细胞数量
## 题目描述

一矩形阵列由数字 $0$ 到 $9$ 组成，数字 $1$ 到 $9$ 代表细胞，细胞的定义为沿细胞数字上下左右若还是细胞数字则为同一细胞，求给定矩形阵列的细胞个数。
## 输入格式

第一行两个整数代表矩阵大小 $n$ 和 $m$。

接下来 $n$ 行，每行一个长度为 $m$ 的只含字符 `0` 到 `9` 的字符串，代表这个 $n \times m$ 的矩阵。

## 输出格式

一行一个整数代表细胞个数。
## 样例

### 样例输入 #1
```
4 10
0234500067
1034560500
2045600671
0000000089

```
### 样例输出 #1
```
4
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \le n,m \le 100$。


---

---
title: "[USACO2.1] 健康的荷斯坦奶牛 Healthy Holsteins"
layout: "post"
diff: 普及-
pid: P1460
tag: ['搜索', 'USACO', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# [USACO2.1] 健康的荷斯坦奶牛 Healthy Holsteins
## 题目描述

农民 John 以拥有世界上最健康的奶牛为傲。他知道每种饲料中所包含的牛所需的最低的维他命量是多少。请你帮助农夫喂养他的牛，以保持它们的健康，使喂给牛的饲料的种数最少。

给出牛所需的最低的维他命量，输出喂给牛需要哪些种类的饲料，且所需的饲料剂量最少。

维他命量以整数表示，每种饲料最多只能对牛使用一次，数据保证存在解。

## 输入格式

第一行一个整数 $v$，表示需要的维他命的种类数。  
第二行 $v$ 个整数，表示牛每天需要的每种维他命的最小量。

第三行一个整数 $g$，表示可用来喂牛的饲料的种数。   
下面 $g$ 行，第 $n$ 行表示编号为 $n$ 饲料包含的各种维他命的量的多少。

## 输出格式

输出文件只有一行，包括牛必需的最小的饲料种数 $p$；后面有 $p$ 个数，表示所选择的饲料编号（按从小到大排列）。

如果有多个解，输出饲料序号最小的（即字典序最小）。

## 样例

### 样例输入 #1
```
4
100 200 300 400
3
50  50  50  50
200 300 200 300
900 150 389 399
```
### 样例输出 #1
```
2 1 3

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le v \le 25$，$1\le g \le 15$。  
输入的所有整数在 $[1,1000]$ 范围内。

USACO 2.1

翻译来自NOCOW



---

---
title: "南蛮图腾"
layout: "post"
diff: 普及-
pid: P1498
tag: ['字符串', '递归', '湖南', '分治', '深度优先搜索 DFS']
---
# 南蛮图腾
## 题目背景

自从到了南蛮之地，孔明不仅把孟获收拾的服服帖帖，而且还发现了不少少数民族的智慧，他发现少数民族的图腾往往有着一种分形的效果，在得到了酋长的传授后，孔明掌握了不少绘图技术，但唯独不会画他们的图腾，于是他找上了你的爷爷的爷爷的爷爷的爷爷……帮忙，作为一个好孙子的孙子的孙子的孙子……你能做到吗？
## 题目描述

给定一个正整数 $n$，参考输出样例，输出图形。
## 输入格式

每个数据输入一个正整数 $n$，表示图腾的大小（此大小非彼大小）
## 输出格式

这个大小的图腾

## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
   /\
  /__\
 /\  /\
/__\/__\

```
### 样例输入 #2
```
3
```
### 样例输出 #2
```
       /\
      /__\
     /\  /\
    /__\/__\
   /\      /\
  /__\    /__\
 /\  /\  /\  /\
/__\/__\/__\/__\
```
## 提示

数据保证，$1 \leq n \leq 10$。


---

---
title: "拯救oibh总部"
layout: "post"
diff: 普及-
pid: P1506
tag: ['模拟', '搜索', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# 拯救oibh总部
## 题目背景

oibh 总部突然被水淹没了！现在需要你的救援……

## 题目描述

oibh 被突来的洪水淹没了，还好 oibh 总部有在某些重要的地方起一些围墙。用 `*` 号表示，而一个四面被围墙围住的区域洪水是进不去的。

oibh 总部内部也有许多重要区域，每个重要区域在图中用一个 `0` 表示。

现在给出 oibh 的围墙建设图，问有多少个没被洪水淹到的重要区域。
## 输入格式

第一行为两个正整数 $x,y$。

接下来 $x$ 行，每行 $y$ 个整数，由 `*` 和 `0` 组成，表示 oibh 总部的建设图。
## 输出格式

输出没被水淹没的 oibh 总部的 `0` 的数量。
## 样例

### 样例输入 #1
```
4 5
00000
00*00
0*0*0
00*00
```
### 样例输出 #1
```
1

```
### 样例输入 #2
```
5 5
*****
*0*0*
**0**
*0*0*
*****
```
### 样例输出 #2
```
5
```
## 提示

对于 $100\%$ 的数据，$1 \le x,y \le 500$。


---

---
title: "[USACO10OCT] Lake Counting S"
layout: "post"
diff: 普及-
pid: P1596
tag: ['搜索', '2010', 'USACO', '深度优先搜索 DFS']
---
# [USACO10OCT] Lake Counting S
## 题目描述

Due to recent rains, water has pooled in various places in Farmer John's field, which is represented by a rectangle of N x M (1 <= N <= 100; 1 <= M <= 100) squares. Each square contains either water ('W') or dry land ('.'). Farmer John would like to figure out how many ponds have formed in his field. A pond is a connected set of squares with water in them, where a square is considered adjacent to all eight of its neighbors. Given a diagram of Farmer John's field, determine how many ponds he has.





## 输入格式

Line 1: Two space-separated integers: N and M \* Lines 2..N+1: M characters per line representing one row of Farmer John's field. Each character is either 'W' or '.'. The characters do not have spaces between them.



## 输出格式

Line 1: The number of ponds in Farmer John's field.


## 样例

### 样例输入 #1
```
10 12
W........WW.
.WWW.....WWW
....WW...WW.
.........WW.
.........W..
..W......W..
.W.W.....WW.
W.W.W.....W.
.W.W......W.
..W.......W.

```
### 样例输出 #1
```
3

```
## 提示

OUTPUT DETAILS: There are three ponds: one in the upper left, one in the lower left, and one along the right side.

## 题目翻译

由于近期的降雨，雨水汇集在农民约翰的田地不同的地方。我们用一个 $N\times M(1\leq N\leq 100, 1\leq M\leq 100)$ 的网格图表示。每个网格中有水（`W`） 或是旱地（`.`）。一个网格与其周围的八个网格相连，而一组相连的网格视为一个水坑。约翰想弄清楚他的田地已经形成了多少水坑。给出约翰田地的示意图，确定当中有多少水坑。

输入第 $1$ 行：两个空格隔开的整数：$N$ 和 $M$。

第 $2$ 行到第 $N+1$ 行：每行 $M$ 个字符，每个字符是 `W` 或 `.`，它们表示网格图中的一排。字符之间没有空格。

输出一行，表示水坑的数量。


---

---
title: "[USACO18FEB] Hoofball B"
layout: "post"
diff: 普及-
pid: P1677
tag: ['模拟', '2018', 'USACO', 'O2优化', '排序', '深度优先搜索 DFS']
---
# [USACO18FEB] Hoofball B
## 题目描述

为了准备即将到来的蹄球锦标赛，Farmer John 正在训练他的 $N$ 头奶牛（方便起见，编号为 $1\ldots N$，其中 $1\le N\le 100$）进行传球。这些奶牛在牛棚一侧沿直线排列，第 $i$ 号奶牛位于距离牛棚 $x_i$ 的地方（$1\le x_i\le 1000$）。每头奶牛都在不同的位置上。

在训练开始的时候，Farmer John 会将若干个球传给不同的奶牛。当第 $i$ 号奶牛接到球时，无论是从 Farmer John 或是从另一头奶牛传来的，她会将球传给最近的奶牛（如果有多头奶牛与她距离相同，她会传给其中距左边最远的那头奶牛）。为了使所有奶牛都有机会练习到传球，Farmer John 想要确保每头奶牛都持球至少一次。帮助他求出为了达到这一目的他开始时至少要传出的球的数量。假设他在开始的时候能将球传给最适当的一组奶牛。 
## 输入格式

输入的第一行包含 $N$。第二行包含 $N$ 个用空格分隔的整数，其中第 $i$ 个整数为 $x_i$。
## 输出格式

输出 Farmer John 开始的时候最少需要传出的球的数量，使得所有奶牛至少持球一次。 
## 样例

### 样例输入 #1
```
5
7 1 3 11 4
```
### 样例输出 #1
```
2
```
## 提示

在上面的样例中，Farmer John 应该将球传给位于 $x=1$ 的奶牛和位于 $x=11$ 的奶牛。位于 $x=1$ 的奶牛会将她的球传给位于 $x=3$ 的奶牛，在此之后这个球会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。位于 $x=11$ 的奶牛会将她的球传给位于 $x=7$ 的奶牛，然后球会被传给位于 $x=4$ 的奶牛，在此之后这个球也会在位于 $x=3$ 的奶牛和位于 $x=4$ 的奶牛之间来回传递。这样的话，所有的奶牛都会至少一次接到球（可能从 Farmer John，也可能从另一头奶牛）。

可以看出，不存在这样一头奶牛，Farmer John 可以将球传给她之后所有奶牛最终都能被传到球。 


---

---
title: "[USACO19OPEN] Milk Factory B"
layout: "post"
diff: 普及-
pid: P1700
tag: ['模拟', '图论', '2019', 'USACO', 'O2优化', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# [USACO19OPEN] Milk Factory B
## 题目描述

牛奶生意正红红火火！Farmer John 的牛奶加工厂内有 $N$ 个加工站，编号为 $1\dots N$（$1\le N\le 100$），以及 $N−1$ 条通道，每条连接某两个加工站。（通道建设很昂贵，所以 Farmer John 选择使用了最小数量的通道，使得从每个加工站出发都可以到达所有其他加工站）。

为了创新和提升效率，Farmer John 在每条通道上安装了传送带。不幸的是，当他意识到传送带是单向的已经太晚了，现在每条通道只能沿着一个方向通行了！所以现在的情况不再是从每个加工站出发都能够到达其他加工站了。

然而，Farmer John 认为事情可能还不算完全失败，只要至少还存在一个加工站 $i$ 满足从其他每个加工站出发都可以到达加工站 $i$。注意从其他任意一个加工站 $j$ 前往加工站 $i$ 可能会经过 $i$ 和 $j$ 之间的一些中间站点。请帮助 Farmer John 求出是否存在这样的加工站 $i$。
## 输入格式

输入的第一行包含一个整数 $N$，为加工站的数量。以下 $N−1$ 行每行包含两个空格分隔的整数 $a_i$ 和 $b_i$，满足 $1\le a_i,b_i\le N$ 以及 $a_i\neq b_i$。这表示有一条从加工站 $a_i$ 向加工站 $b_i$ 移动的传送带，仅允许沿从 $a_i$ 到 $b_i$ 的方向移动。
## 输出格式

如果存在加工站 $i$ 满足可以从任意其他加工站出发都可以到达加工站 $i$，输出最小的满足条件的 $i$。否则，输出 $−1$。
## 样例

### 样例输入 #1
```
3
1 2
3 2
```
### 样例输出 #1
```
2
```


---

---
title: "全排列问题"
layout: "post"
diff: 普及-
pid: P1706
tag: ['搜索', '数学', '递归', '深度优先搜索 DFS']
---
# 全排列问题
## 题目描述

按照字典序输出自然数 $1$ 到 $n$ 所有不重复的排列，即 $n$ 的全排列，要求所产生的任一数字序列中不允许出现重复的数字。

## 输入格式

一个整数 $n$。

## 输出格式

由 $1 \sim n$ 组成的所有不重复的数字序列，每行一个序列。

每个数字保留 $5$ 个场宽。

## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
    1    2    3
    1    3    2
    2    1    3
    2    3    1
    3    1    2
    3    2    1

```
## 提示

$1 \leq n \leq 9$。


---

---
title: "小埋与扫雷"
layout: "post"
diff: 普及-
pid: P4961
tag: ['模拟', '深度优先搜索 DFS']
---
# 小埋与扫雷
## 题目背景

小埋总是在家中打游戏，一天，她突然想玩Windows自带的扫雷，在一旁的哥哥看见了，想起了自己小时候信息课在机房玩扫雷的日子，便兴致勃勃地开始教小埋扫雷。然而，小埋还是不明白 $\mathrm{3bv}$（Bechtel's Board Benchmark Value，每局将所有非雷的方块点开所需最少左键点击数，参见[扫雷网的教程](http://saolei.net/BBS/Title.asp?Id=227) ）怎么算，于是她找到了你。

![](https://i.loli.net/2018/10/04/5bb5bd6aefb70.jpg)
## 题目描述

小埋会告诉你一盘扫雷，用一个 $n\times m$ 的矩阵表示，$1$ 是雷 ，$0$ 不是雷，请你告诉她这盘扫雷的 $\mathrm{3bv}$ 。 

周围八格没有“雷”且自身不是“雷”的方格称为“空格”，周围八格有“雷”且自身不是“雷”的方格称为“数字”，由“空格”组成的八连通块称为一个“空”。$\mathrm{3bv}=\ $周围八格没有“空格”的“数字”个数$+$“空"的个数。

如果看不懂上面的计算方式，可以看题目背景中给出的教程，或者看下面的样例解释。

注：[八连通](https://baike.baidu.com/item/%E5%85%AB%E8%BF%9E%E9%80%9A)
## 输入格式

第一行有两个整数 $n$ 和 $m$，代表这盘扫雷是一个 $n \times m$ 的矩阵。

后面的 $n$ 行每行有 $m$ 个整数，表示这个矩阵，每个数字为 $0$ 或 $1$，$1$ 代表是雷，$0$ 代表不是雷。
## 输出格式

一个整数，代表这盘扫雷的 $\mathrm{3bv}$ 。
## 样例

### 样例输入 #1
```
8 8
0 0 0 1 1 0 0 0 
1 0 0 1 0 0 0 1 
1 0 0 1 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 1 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
0 1 0 0 0 0 0 0 
```
### 样例输出 #1
```
13
```
## 提示

$1\le n,\ m\le 1000$

## 样例解释

![](https://i.loli.net/2018/10/04/5bb5bc4644183.jpg)


---

---
title: "[USACO10MAR] The Rock Game S"
layout: "post"
diff: 普及-
pid: P6183
tag: ['2010', 'USACO', 'Special Judge', '深度优先搜索 DFS']
---
# [USACO10MAR] The Rock Game S
## 题目描述

在奶牛回家休息和娱乐之前，Farmer John 希望它们通过玩游戏获得一些智力上的刺激。

游戏板由 $n$ 个相同的洞组成，这些洞最初**都是空的**。一头母牛要么用石头盖住一个空的洞，要么揭开一个先前被盖住的洞。**游戏状态**的定义是所有洞是否被石头覆盖的情况。

游戏的目标是让奶牛到达**每个可能的游戏状态**一次，最后回到初始状态。

以下是他们其中一次游戏的示例（空的洞用 `O` 表示，用石头盖住的洞用 `X` 表示）：

| 时刻 | 洞 1 | 洞 2 | 洞 3 | 描述 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $0$ | O | O | O | 一开始所有的洞都是空的 |
| $1$ | O | O | X | 盖上洞 3 |
| $2$ | X | O | X | 盖上洞 1 |
| $3$ | X | O | O | 打开洞 3 |
| $4$ | X | X | O | 盖上洞 2 |
| $5$ | O | X | O | 打开洞 1 |
| $6$ | O | X | X | 盖上洞 3 |
| $7$ | X | X | X | 盖上洞 1 |

现在牛被卡住玩不下去了！他们必须打开一个洞，然而不管他们打开哪个洞，他们都会到达一个他们已经到达过的状态。例如，如果他们从第二个洞中取出岩石，他们将到达他们在时刻 $2$ 已经访问过的状态（`X O X`）。

下面是一个 3 个孔的有效解决方案：

| 时间 | 洞 1 | 洞 2 | 洞 3 | 描述 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $0$ | O | O | O | 一开始所有的洞都是空的 |
| $1$ | O | X | O | 盖上洞 2 |
| $2$ | O | X | X | 盖上洞 3 |
| $3$ | O | O | X | 打开洞 2 |
| $4$ | X | O | X | 盖上洞 1 |
| $5$ | X | X | X | 盖上洞 2 |
| $6$ | X | X | O | 打开洞 3 |
| $7$ | X | O | O | 打开洞 2 |
| $8$ | O | O | O | 打开洞 1，恢复到原来的状态 |

现在，奶牛们厌倦了这个游戏，它们想找你帮忙。

给定 $n$，求游戏的有效解决方案序列。如果有多个解决方案，则输出**任意一个**。
## 输入格式

仅一行，一个整数 $n$。
## 输出格式

共 $2^n+1$ 行，每行一个长度为 $n$ 的字符串，其中只包含字符 `O` 和 `X`，该行中的第 $i$ 个字符表示第 $i$ 个孔在此状态下是被覆盖还是未覆盖，第一行和最后一行必须全部都是 `O`。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
OOO
OXO
OXX
OOX
XOX
XXX
XXO
XOO
OOO
```
## 提示

#### 样例 1 说明

见题目描述。

#### 数据规模与约定

对于 $100\%$ 的数据，有 $1\le n\le15$。


---

---
title: "「JYLOI Round 1」箭头调度"
layout: "post"
diff: 普及-
pid: P6635
tag: ['递归', '深度优先搜索 DFS']
---
# 「JYLOI Round 1」箭头调度
## 题目描述

moyu_028 给了你一个有 $n$ 个点 $m$ 条边的无向图，现在要给每条边赋一个方向，现在请你求出一个赋方向的方案，使得按照这个方案能够生成一个拓扑序，且使得这个拓扑序是在所有可能的拓扑序中字典序第 $k$ 小的。

## 输入格式

输入的第 1 行有 3 个正整数 $n$、$m$、$k$，含义如题所述。

接下来有 $m$ 行，这 $m$ 行中的第 $i$ 行有两个正整数 $x_i$ 和 $y_i$，表示有一条从 $x_i$ 到 $y_i$ 的无向边。
## 输出格式

输出为一行一个长度为 $m$ 的 01 串，这个 01 串中的第 $i$ 个字符表示从 $x_i$ 和 $y_i$ 之间的无向边的方向，为 0 则表示这条边是从 $x_i$ 到 $y_i$，为 1 则表示这条边是从 $y_i$ 到 $x_i$。可以证明答案唯一，且数据保证有解。
## 样例

### 样例输入 #1
```
6 7 5
1 3
2 1
4 2
4 3
4 5
3 6
5 6
```
### 样例输出 #1
```
0111001
```
### 样例输入 #2
```
11 20 20091210
2 3
3 1
2 5
4 6
7 9
8 10
8 1
7 2
2 3
3 2
4 5
5 7
7 6
7 8
9 7
9 8
10 2
2 3
1 3
1 7
```
### 样例输出 #2
```
10110000100110110111
```
## 提示

## 提示

拓扑序：在一个 DAG（有向无环图）中，我们将图中的顶点以线性方式进行排序，使得对于任何的顶点 $u$ 到 $v$ 的有向边 $(u,v)$，都可以有 $u$ 在 $v$ 的前面，则这样的序列称为拓扑序。

----------

## 样例解释

### 样例 1 解释

答案的图如下，根据图可得出答案。

![](https://i.loli.net/2020/05/23/3FK2n78JAYLrGMD.png)

-----------------

## 数据范围

对于 $100\%$ 的数据，$1 \leq n \leq 11, 1 \leq m \leq 2 \times 10^3, 1 \leq k \leq 10^8，1 \leq x_i, y_i \leq n, x_i \not= y_i$。

对于测试点 1（10 分）：$n = 1$。

对于测试点 2（30 分）：$n \leq 11, m \leq 20$。

对于测试点 3（30 分）：$n \leq 11, k = 1$。

对于测试点 4（30 分）：无特殊限制。

本题共 4 个测试点，总分为 100 分，单个测试点的时间限制为 5 秒。

## 题目来源

「JYLOI Round 1」 A

Idea：moyu_028 & abcdeffa

Solution：LiuXiangle

Data：abcdeffa


---

---
title: "[COCI 2019/2020 #1] Lutrija"
layout: "post"
diff: 普及-
pid: P7200
tag: ['2019', 'Special Judge', '深度优先搜索 DFS', '素数判断,质数,筛法', 'COCI（克罗地亚）']
---
# [COCI 2019/2020 #1] Lutrija
## 题目背景

Vedran 在赌输彩票之后，无意之间打开了 COCI 的频道。只要完成 COCI 给出的任务，他就能够免除前往新加坡 IOI2020 现场的费用。

不幸的是，Vedran 已经老了，于是你决定帮帮他。
## 题目描述

给定两个素数 $A,B$。你需要给出一个开头和结尾分别为 $A$ 和 $B$ 的序列，使得其所有元素均为素数，并且相邻两个元素之间的差值也为素数。
## 输入格式

输入两个素数 $A,B$。
## 输出格式

如果任务不可能完成，即没有满足条件的序列（以下称为有解），则只输出 `-1`。

否则，在第一行输出序列的元素个数，并在第二行输出所有元素。

如果有解，则你的构造必须满足下列二者之一：

- 序列元素个数不超过 $30$
- 任何一个元素都不超过 $10^{15}$。

如果有多组解，则输出任意一种。
## 样例

### 样例输入 #1
```
13 11
```
### 样例输出 #1
```
2
13 11
```
### 样例输入 #2
```
37 11
```
### 样例输出 #2
```
-1
```
### 样例输入 #3
```
2 17
```
### 样例输出 #3
```
3
2 19 17
```
## 提示

#### 数据规模及约定

对于 $20\%$ 的数据，如果有解，则必定有一种解，满足元素的个数不超过 $3$，且其中的所有元素都不超过 $1000$。

对于另外 $40\%$ 的数据，$2 \le A,B \le 1000$。

对于 $100\%$ 的数据，$2 \le A,B \le 10^{14},A \neq B$。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

由于平均下来每个测试点为 $2.5$ 分，因而将其中一半的测试点设置为 $2$ 分，另一半设置为 $3$ 分。

本题使用非官方的 [Special Judge](https://www.luogu.com.cn/paste/hrj05be5)，欢迎大家 hack（可私信或直接发帖）。

**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #1](https://hsin.hr/coci/archive/2019_2020/contest1_tasks.pdf)  _T2 Lutrija_ 。**


---

---
title: "「HGOI-1」Binary search"
layout: "post"
diff: 普及-
pid: P8481
tag: ['二分', '洛谷原创', 'O2优化', '深度优先搜索 DFS', '洛谷月赛']
---
# 「HGOI-1」Binary search
## 题目背景

$\text{bh1234666}$ 正在学习[二分查找](https://baike.baidu.com/item/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/10628618?fr=aladdin)。
## 题目描述

众所周知二分查找的 $\text{mid}$ 在计算时可以取 $\lfloor\dfrac{l+r}{2}\rfloor$ 或者 $\lceil\dfrac{l+r}{2}\rceil$，于是有选择困难症的 $\text{bh1234666}$ 同学在自己的二分查找代码中加入了随机化，每次随机选取其中的一个作为 $\textit{mid}$。

注意，选取不同的 mid 其他参数也会受到影响，请以代码为准。

现在 $\text{bh1234666}$ 给你了二分查找使用的序列（保证为单调递增）以及他想要寻找的数（保证在序列内），他想知道在运气最好的情况下循环需要进行几次（即代码中 $\textit{cnt}$ 的可能的最终值的最小值）。

循环：
```cpp
int find(int *num,int x,int len)
{
	int l=0,r=len-1,mid,cnt=0,w;
	while(l<r)
	{
		cnt++;
		w=rand()%2;
		mid=(l+r+w)/2;
		if(num[mid]-w<x) l=mid+!w;
		else r=mid-w;
	}
	return mid;
}
```
递归：
```
int cnt;
int get(int *num,int x,int l,int r)
{
	if(l==r) return l;
	cnt++;
	int w=rand()%2;
	int mid=(l+r+w)/2;
	if(num[mid]-w<x) return get(num,x,mid+!w,r);
	else return get(num,x,l,mid-w);
}
int find(int *num,int x,int len)
{
	cnt=0;
	return get(num,x,0,len-1);
}
```
注：以上两代码完全等价。

在此对上述代码中的 $w$ 的作用做进一步阐释。

例如对于区间 $[0,7]$，有 $8$ 个成员。虽然 $mid$ 的取值会因为 $w$ 的取值改变而改变，但是最终确定的区间一定是 $[0,3]$ 或 $[4,7]$，选手可以就上述代码自行模拟。

对于区间 $[0,6]$，有 $7$ 个成员。$\textit{mid}$ 的取值与 $w$ 的取值无关，但是 $l$ 和 $r$ 的取值会受到 $w$ 的影响，最终确定的区间可能是 $[0,2]$，$[3,6]$（$w=1$）或 $[0,3]$，$[4,6]$（$w=0$）。
## 输入格式

第一行给出一个整数 $n$ 表示序列长度。

第二行给出单调递增的 $n$ 个整数表示 $\text{bh1234666}$ 的序列。

第三行一个整数 $q$ 表示询问的次数。

接下来 $q$ 行每行一个整数表示需要查询的数字。
## 输出格式

对于每个询问回答一个整数，表示最小的循环次数。
## 样例

### 样例输入 #1
```
10
1 2 4 6 7 8 10 13 15 17
3
4
10
15
```
### 样例输出 #1
```
3
3
3
```
### 样例输入 #2
```
13
1 2 4 6 10 12 19 23 45 99 101 123 134
5
1
2
10
19
123

```
### 样例输出 #2
```
3
4
3
3
4
```
## 提示

### 样例 1 解释

找 $4$：

取 $[1,5]$。

取 $[1,3]$。

取 $[3,3]$（退出循环）。

### 样例 2 解释

查询 $10$ 的位置。

$$
[1,13] \stackrel{w=0}{\longrightarrow} [1,7]\stackrel{w=0}{\longrightarrow}[5,7] \stackrel{w=1}{\longrightarrow} [5,5]
$$

### 数据范围及约定
本题采用**捆绑测试**，共有 $3$ 个 $\text{subtask}$，最终分数为所有 $\text{subtask}$ 分数之和。

$$
\def\arraystretch{1.5}
\begin{array}{|c|c|c|}\hline
\textbf{Task} & \textbf{Score} & \text{特殊限制} \cr\hline
1 & 25 & n \le 20 \cr\hline
2 & 35 & n=2^k(k \in \mathbf{N}) \cr\hline
3 & 40 &  \cr\hline
\end{array}
$$

对于 $100\%$ 的数据，保证 $1 \le n \le 2^{20}$，$1 \le q \le 100$，$1 \le num_i \le 10^9$。

本题有 [extra sub](https://www.luogu.com.cn/problem/P8487)。


---

---
title: "[蓝桥杯 2013 国 C] 危险系数"
layout: "post"
diff: 普及-
pid: P8604
tag: ['图论', '2013', '深度优先搜索 DFS', '蓝桥杯国赛']
---
# [蓝桥杯 2013 国 C] 危险系数
## 题目背景

抗日战争时期，冀中平原的地道战曾发挥重要作用。

## 题目描述

地道的多个站点间有通道连接，形成了庞大的网络。但也有隐患，当敌人发现了某个站点后，其它站点间可能因此会失去联系。

我们来定义一个危险系数 $DF(x,y)$：

对于两个站点 $x$ 和 $y(x\neq y),$ 如果能找到一个站点 $z$，当 $z$ 被敌人破坏后，$x$ 和 $y$ 不连通，那么我们称 $z$ 为关于 $x,y$ 的关键点。相应的，对于任意一对站点 $x$ 和 $y$，危险系数 $DF(x,y)$ 就表示为这两点之间的关键点个数。

本题的任务是：已知网络结构，求两站点之间的危险系数。
## 输入格式

输入数据第一行包含 $2$ 个整数 $n(2 \le n \le 1000)$，$m(0 \le m \le 2000)$，分别代表站点数，通道数。

接下来 $m$ 行，每行两个整数 $u,v(1 \le u,v \le n,u\neq v)$ 代表一条通道。

最后 $1$ 行，两个数 $u,v$，代表询问两点之间的危险系数 $DF(u,v)$。
## 输出格式

一个整数，如果询问的两点不连通则输出 $-1$。
## 样例

### 样例输入 #1
```
7 6
1 3
2 3
3 4
3 5
4 5
5 6
1 6
```
### 样例输出 #1
```
2
```
## 提示

时限 1 秒, 64M。蓝桥杯 2013 年第四届国赛


---

---
title: "[USACO23JAN] Air Cownditioning II B"
layout: "post"
diff: 普及-
pid: P9011
tag: ['USACO', '2023', '深度优先搜索 DFS', '差分']
---
# [USACO23JAN] Air Cownditioning II B
## 题目描述

With the hottest recorded summer ever at Farmer John's farm, he needs a way to cool down his cows. Thus, he decides to invest in some air conditioners.

Farmer John's $N$ cows $(1 \le N \le 20)$ live in a barn that contains a sequence of stalls in a row, numbered $1 \cdots 100$. Cow $i$ occupies a range of these stalls, starting from stall $s_i$ and ending with stall $t_i$. The ranges of stalls occupied by different cows are all disjoint from each-other. Cows have different cooling requirements. Cow $i$ must be cooled by an amount $c_i$, meaning every stall occupied by cow $i$ must have its temperature reduced by at least $c_i$ units.

The barn contains $M$ air conditioners, labeled $1 \cdots M (1 \le M \le 10)$. The $i$-th air conditioner costs $m_i$ units of money to operate $(1 \le m_i \le 1000)$ and cools the range of stalls starting from stall $a_i$ and ending with stall $b_i$. If running, the $i$-th air conditioner reduces the temperature of all the stalls in this range by $p_i (1 \le p_i \le 10^6)$. Ranges of stalls covered by air conditioners may potentially overlap.

Running a farm is no easy business, so FJ has a tight budget. Please determine the minimum amount of money he needs to spend to keep all of his cows comfortable. It is guaranteed that if FJ uses all of his conditioners, then all cows will be comfortable. 
## 输入格式

The first line of input contains $N$ and $M$.

The next $N$ lines describe cows. The ith of these lines contains $s_i, t_i$, and $c_i$.

The next $M$ lines describe air conditioners. The ith of these lines contains $a_i, b_i, p_i$, and $m_i$.

For every input other than the sample, you can assume that $M=10$. 
## 输出格式

Output a single integer telling the minimum amount of money FJ needs to spend to operate enough air conditioners to satisfy all his cows (with the conditions listed above). 
## 样例

### 样例输入 #1
```
2 4
1 5 2
7 9 3
2 9 2 3
1 6 2 8
1 2 4 2
6 9 1 5
```
### 样例输出 #1
```
10
```
## 提示

### Explanation for Sample 1

One possible solution that results in the least amount of money spent is to select those that cool the intervals $[2,9], [1,2]$, and $[6,9]$, for a cost of $3+2+5=10$. 
## 题目翻译

## 题目描述

农夫约翰的 $N$ 头奶牛 $(1≤N≤20)$ 住在一个谷仓里，谷仓里有连续的牛栏，编号为 $1-100$ 。 奶牛 $i$ 占据了编号 $[s_i,t_i]$ 的牛栏。 不同奶牛占据的牛栏范围是互不相交的。 奶牛有不同的冷却要求，奶牛 $i$ 占用的每个牛栏的温度必须至少降低 $c_i$ 单位。

谷仓包含 $M$ 台空调，标记为 $1-M$ $(1\le M\le10)$。第 $i$ 台空调需要花费 $m_i$ 单位的金钱来运行 $(1\le m_i \le 1000)$ ，如果运行，第 $i$ 台空调将牛栏 $[a_i,b_i]$ 所有牛栏的温度降低 $p_i$（$1\le p_i\le10^6）$。 空调覆盖的牛栏范围可能会重叠。

请帮助农夫约翰求出满足所有奶牛需求要花费的最少金钱。

## 输入格式

第一行两个整数，分别为 $N$ 和 $M$。

第 $2$ 至 $(N+1)$ 行，每行三个整数，分别为 $s_i$、$t_i$ 和 $c_i$ 。

第 $(N+2)$ 至 $(M+N+1)$ 行，每行四个整数， 分别为 $a_i$、$b_i$、$p_i$ 和 $m_i$。

## 输出格式

一个整数，表示最少花费的金钱。



## 提示

### 样例解释 1

一种花费最少的可能解决方案是选择那些冷却区间为 $[2,9]$ 、$[1,2]$ 和 $[6,9]$ 的空调，成本为 $ 3+2+5=10$ .

### 数据范围

对于 $100\%$ 的数据，$1 \le N \le 20$， $1 \le M \le 10$, $ 1 \le a_i, b_i, s_i, t_i \le 100$, $1 \le c_i, p_i \le 10^6$， $1 \le m_i \le 1000$。


---

---
title: "[EC Final 2021] DFS Order"
layout: "post"
diff: 普及-
pid: P9872
tag: ['2021', 'O2优化', '深度优先搜索 DFS', '树的遍历', 'ICPC']
---
# [EC Final 2021] DFS Order
## 题目描述

Prof. Pang has a rooted tree which is rooted at $1$ with $n$ nodes. These $n$ nodes are numbered from $1$ to $n$.

Now he wants to start the depth-first search at the root. He wonders for each node $v$, what is the minimum and the maximum position it can appear in the $\textbf{depth-first search order}$. The depth-first search order is the order of nodes visited during the depth-first search. A node appears in the $j$-th ($1\le j\le n$) position in this order means it is visited after $j-1$ other nodes. Because sons of a node can be iterated in arbitrary order, multiple possible depth-first orders exist. Prof. Pang wants to know for each node $v$, what are the minimum value and the maximum value of $j$ such that $v$ appears in the $j$-th position.

Following is a pseudo-code for the depth-first search on a rooted tree. After its execution, $\texttt{dfs\_order}$ is the depth-first search order.

```
let dfs_order be an empty list

def dfs(vertex x):
    append x to the end of dfs_order.
    for (each son y of x): // sons can be iterated in arbitrary order.
        dfs(y)

dfs(root)
```
## 输入格式

The first line contains a single integer $T~(1 \le T \le 10^6)$ denoting the number of test cases.

For each test case, the first line contains an integer $n~(1 \le n \le 10 ^ 5)$. Each of the next $n-1$ lines contains two integers $x$ and $y$, indicating node $x$ is node $y$'s parent ($1\le x, y\le n$). These edges form a tree rooted at $1$.

It is guaranteed that the sum of $n$ over all test cases is no more than $10^6$.
## 输出格式

For each test case, print $n$ lines. The $i$-th line contains two integers denoting the minimum and the maximum position node $i$ can appear in the depth-first search order.
## 样例

### 样例输入 #1
```
2
4
1 2
2 3
3 4
5
1 2
2 3
2 4
1 5
```
### 样例输出 #1
```
1 1
2 2
3 3
4 4
1 1
2 3
3 5
3 5
2 5
```
## 题目翻译

给定一棵以 $1$ 为根节点的树，若按**任意顺序**进行深度优先搜索，则第 $i$ 个点最小是第几个被搜到的以及最大是第几个？


---


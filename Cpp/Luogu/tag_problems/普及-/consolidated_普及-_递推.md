---
title: "[信息与未来 2014] 最大连续部分和"
layout: "post"
diff: 普及-
pid: B4133
tag: ['动态规划 DP', '递推', '2014', '江苏', '信息与未来']
---
# [信息与未来 2014] 最大连续部分和
## 题目描述

有 $n$ 个整数排成一排，求其中的最大连续部分和。

**至少要选一个数。**
## 输入格式

第一行一个整数，表示 $n$。

第二行 $n$ 个整数 $x_1,x_2,\cdots,x_n$，相邻两数之间有一个空格。
## 输出格式

一个整数（即最大的连续的部分和）。
## 样例

### 样例输入 #1
```
7
-2 13 12 9 14 -10 2
```
### 样例输出 #1
```
48
```
## 提示

$1\le n\le 10^7,0\le |x_i|\le 10^8$。


---

---
title: "[中山市赛 2024/科大国创杯小学组 2023] 倍数子串/子串"
layout: "post"
diff: 普及-
pid: B4185
tag: ['递推', '2023', '2024', '数论', '安徽', '广东', '排列组合', '科创活动', '小学活动', '科大国创杯']
---
# [中山市赛 2024/科大国创杯小学组 2023] 倍数子串/子串
## 题目背景

本题题面为 2024 年中山市赛版本，在题面主人公上与 2023 年安徽省科大国创杯小学组略有区别。
## 题目描述

Jimmy 对数字有着异于常人的热爱。有一天，他随便写出来一个数字——$04320$，然后开始对着这个数字写写画画。他发现，从这个数字中随便选出连续的一段（Jimmy 把这个称为连续子串），有可能是 $4$ 的倍数，例如 $4$，$04$，$32$，$432$ 等；也有可能是 $5$ 的倍数，例如 $20$，$320$ 等。

Jimmy 的老师恰好路过此处，他向正沉迷于自己发现的 Jimmy 提了一个有趣的问题——给定一个指定的数字串，请问有多少连续子串是 $4$ 或者 $5$ 的倍数呢？

老师还特别提醒他：

* 连续子串的开头可以是 $0$；
* 两个连续子串只要是从数字串中的不同位置选出来的，它们就算是不同的；
* 如果一个连续子串同时是 $4$ 和 $5$ 的倍数，应当只被计算一次哦！
## 输入格式

一行一个数字串，长度为 $n$。
## 输出格式

一行一个整数，表示所有的连续子串中，为 $4$ 或者 $5$ 的倍数的数量。
## 样例

### 样例输入 #1
```
04320
```
### 样例输出 #1
```
11
```
### 样例输入 #2
```
2000
```
### 样例输出 #2
```
9
```
## 提示

### 样例解释 1

所有满足题意的连续子串分别为：$0$，$04$，$0432$，$04320$，$4$，$432$，$4320$，$32$，$320$，$20$，$0$。

其中有两个相同的 $0$，这是因为它们是从数字串中的不同位置选出来的（一个在开头处，一个在结尾处）。

### 数据范围

- 对于 $10\%$ 的数据，保证 $n = 1$。
- 对于 $60\%$ 的数据，保证 $1 \leq n \leq 10^3$。
- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 10^6$。


---

---
title: "[NOIP 2001 普及组] 数的计算"
layout: "post"
diff: 普及-
pid: P1028
tag: ['递推', '2001', '递归', 'NOIP 普及组']
---
# [NOIP 2001 普及组] 数的计算
## 题目描述

给出正整数 $n$，要求按如下方式构造数列：

1. 只有一个数 $n$ 的数列是一个合法的数列。
2. 在一个合法的数列的末尾加入一个正整数，但是这个正整数不能超过该数列最后一项的一半，可以得到一个新的合法数列。

请你求出，一共有多少个合法的数列。两个合法数列 $a, b$ 不同当且仅当两数列长度不同或存在一个正整数 $i \leq |a|$，使得 $a_i \neq b_i$。
## 输入格式

输入只有一行一个整数，表示 $n$。
## 输出格式

输出一行一个整数，表示合法的数列个数。
## 样例

### 样例输入 #1
```
6

```
### 样例输出 #1
```
6

```
## 提示

### 样例 1 解释

满足条件的数列为：
- $6$
- $6, 1$
- $6, 2$
- $6, 3$
- $6, 2, 1$
- $6, 3, 1$

### 数据规模与约定

对于全部的测试点，保证 $1 \leq n \leq 10^3$。

### 说明

本题数据来源是 NOIP 2001 普及组第一题，但是原题的题面描述和数据不符，故对题面进行了修改，使之符合数据。原题面如下，谨供参考：

> 我们要求找出具有下列性质数的个数（包含输入的正整数 $n$）。
>
> 先输入一个正整数 $n$（$n \le 1000$），然后对此正整数按照如下方法进行处理：
>
> 1. 不作任何处理；
> 2. 在它的左边拼接一个正整数，但该正整数不能超过原数，或者是上一个被拼接的数的一半；
> 3. 加上数后，继续按此规则进行处理，直到不能再加正整数为止。

感谢 @[dbxxx](/user/120868) 对本题情况的反馈，原题面的问题见[本贴](https://www.luogu.com.cn/discuss/526184)。


---

---
title: "[AHOI2024 初中组] 立方根"
layout: "post"
diff: 普及-
pid: P10373
tag: ['数学', '递推', '2024', '安徽', 'O2优化', '前缀和', '分块', '双指针 two-pointer']
---
# [AHOI2024 初中组] 立方根
## 题目背景

**特别提示：**

1. 请使用 `(int) cbrt(x + 0.5)` 计算 $\lfloor \sqrt[3]{x} \rfloor$ 的值，否则可能会出现精度误差。
2. 本题包含两组针对时间复杂度为 $O(q\sqrt[3]{x})$ 的算法的 hack 数据（#11 和 #12）。
## 题目描述

小可可想计算所有不大于 $x$ 的正整数的立方根下取整之和，但是她不会做，你能帮帮她吗？

为了彻底帮小可可弄懂这个问题，你需要回答 $q$ 组询问，对于每组询问给定的一个正整数 $x_i$，输出：

$$\sum _{j=1} ^{x_i} \lfloor j^{\frac{1}{3}} \rfloor$$

其中，$\lfloor x \rfloor$ 表示不大于 $x$ 的最大整数。
## 输入格式

第一行一个正整数 $q$。

接下来 $q$ 行，第 $i$ 行一个正整数 $x_i$。

**保证给出的 $\bm{x_1 \sim x_q}$ 单调不降。**
## 输出格式

$q$ 行，每行一个正整数，表示该组询问的答案。

**请注意答案的范围。**
## 样例

### 样例输入 #1
```
2
5
10
```
### 样例输出 #1
```
5
13
```
## 提示

### 样例 1 解释

$1 \sim 10$ 的立方根下取整的结果是：$1,1,1,1,1,1,1,2,2,2$。

### 数据范围

对于 $20\%$ 的数据，$x_q,q \le 1000$。

对于另外 $20\%$ 的数据，$q=1$。

对于另外 $20\%$ 的数据，$q \le 5000$。

对于另外 $20\%$ 的数据，$q \le 10^5$，$x_q \le 10^6$。 

对于 $100\%$ 的数据，$1 \le q \le 2 \times 10^5$，$1 \le x_1 \le x_2 \le \ldots \le x_q \le 10^{12}$。


---

---
title: "[NOIP 2003 普及组] 栈"
layout: "post"
diff: 普及-
pid: P1044
tag: ['动态规划 DP', '数学', '递推', '2003', 'NOIP 普及组', 'Catalan 数', '栈']
---
# [NOIP 2003 普及组] 栈
## 题目背景

栈是计算机中经典的数据结构，简单的说，栈就是限制在一端进行插入删除操作的线性表。

栈有两种最重要的操作，即 pop（从栈顶弹出一个元素）和 push（将一个元素进栈）。

栈的重要性不言自明，任何一门数据结构的课程都会介绍栈。宁宁同学在复习栈的基本概念时，想到了一个书上没有讲过的问题，而他自己无法给出答案，所以需要你的帮忙。
## 题目描述

![](https://cdn.luogu.com.cn/upload/image_hosting/5qxy9fz2.png)

宁宁考虑的是这样一个问题：一个操作数序列，$1,2,\ldots ,n$（图示为 1 到 3 的情况），栈 A 的深度大于 $n$。

现在可以进行两种操作，

1. 将一个数，从操作数序列的头端移到栈的头端（对应数据结构栈的 push 操作）
2. 将一个数，从栈的头端移到输出序列的尾端（对应数据结构栈的 pop 操作）

使用这两种操作，由一个操作数序列就可以得到一系列的输出序列，下图所示为由 `1 2 3` 生成序列 `2 3 1` 的过程。

![](https://cdn.luogu.com.cn/upload/image_hosting/8uwv2pa2.png)

（原始状态如上图所示）

你的程序将对给定的 $n$，计算并输出由操作数序列 $1,2,\ldots,n$ 经过操作可能得到的输出序列的总数。
## 输入格式

输入文件只含一个整数 $n$（$1 \leq n \leq 18$）。

## 输出格式

输出文件只有一行，即可能输出序列的总数目。
## 样例

### 样例输入 #1
```
3

```
### 样例输出 #1
```
5

```
## 提示

**【题目来源】**

NOIP 2003 普及组第三题


---

---
title: "最大子段和"
layout: "post"
diff: 普及-
pid: P1115
tag: ['动态规划 DP', '递推', '分治', '前缀和']
---
# 最大子段和
## 题目描述

给出一个长度为 $n$ 的序列 $a$，选出其中连续且非空的一段使得这段和最大。

## 输入格式

第一行是一个整数，表示序列的长度 $n$。

第二行有 $n$ 个整数，第 $i$ 个整数表示序列的第 $i$ 个数字 $a_i$。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
7
2 -4 3 -1 2 -4 3

```
### 样例输出 #1
```
4
```
## 提示

#### 样例 1 解释

选取 $[3, 5]$ 子段 $\{3, -1, 2\}$，其和为 $4$。

#### 数据规模与约定

- 对于 $40\%$ 的数据，保证 $n \leq 2 \times 10^3$。
- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 2 \times 10^5$，$-10^4 \leq a_i \leq 10^4$。



---

---
title: "路径计数2"
layout: "post"
diff: 普及-
pid: P1176
tag: ['递推', '线性递推']
---
# 路径计数2
## 题目描述

一个 $N \times N$ 的网格，你一开始在 $(1,1)$，即左上角。每次只能移动到下方相邻的格子或者右方相邻的格子，问到达 $(N,N)$，即右下角有多少种方法。

但是这个问题太简单了，所以现在有 $M$ 个格子上有障碍，即不能走到这 $M$ 个格子上。

## 输入格式

输入文件第 $1$ 行包含两个非负整数 $N,M$，表示了网格的边长与障碍数。

接下来 $M$ 行，每行两个不大于 $N$ 的正整数 $x, y$。表示坐标 $(x, y)$ 上有障碍不能通过，且有 $1≤x, y≤n$，且 $x, y$ 至少有一个大于 $1$，并请注意障碍坐标有可能相同。

## 输出格式

一个非负整数，为答案 $\bmod 100003$ 后的结果。

## 样例

### 样例输入 #1
```
3 1
3 1
```
### 样例输出 #1
```
5
```
## 提示

对于 $20\%$ 的数据，有$N≤3$；

对于 $40\%$ 的数据，有$N≤100$；

对于 $40\%$ 的数据，有$M=0$；

对于 $100\%$ 的数据，有$N≤1000,M≤100000$。



---

---
title: "台阶问题"
layout: "post"
diff: 普及-
pid: P1192
tag: ['递推', '斐波那契数列', '线性递推']
---
# 台阶问题
## 题目描述

有 $N$ 级台阶，你一开始在底部，每次可以向上迈 $1\sim K$ 级台阶，问到达第 $N$ 级台阶有多少种不同方式。
## 输入格式

两个正整数 $N,K$。
## 输出格式

一个正整数 $ans\pmod{100003}$，为到达第 $N$ 级台阶的不同方式数。
## 样例

### 样例输入 #1
```
5 2
```
### 样例输出 #1
```
8
```
## 提示

- 对于 $20\%$ 的数据，$1\leq N\leq10$，$1\leq K\leq3$；
- 对于 $40\%$ 的数据，$1\leq N\leq1000$；
- 对于 $100\%$ 的数据，$1\leq N\leq100000$，$1\leq K\leq100$。


---

---
title: "[IOI 1994] 数字三角形 Number Triangles"
layout: "post"
diff: 普及-
pid: P1216
tag: ['动态规划 DP', '递推', '2001', 'USACO', 'IOI']
---
# [IOI 1994] 数字三角形 Number Triangles
## 题目描述

观察下面的数字金字塔。


写一个程序来查找从最高点到底部任意处结束的路径，使路径经过数字的和最大。每一步可以走到左下方的点也可以到达右下方的点。

![](https://cdn.luogu.com.cn/upload/image_hosting/95pzs0ne.png)

在上面的样例中，从 $7 \to 3 \to 8 \to 7 \to 5$ 的路径产生了最大权值。


## 输入格式

第一个行一个正整数 $r$ ,表示行的数目。

后面每行为这个数字金字塔特定行包含的整数。


## 输出格式

单独的一行,包含那个可能得到的最大的和。

## 样例

### 样例输入 #1
```
5
7
3 8
8 1 0
2 7 4 4
4 5 2 6 5 

```
### 样例输出 #1
```
30

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le r \le 1000$，所有输入在 $[0,100]$ 范围内。

题目翻译来自NOCOW。

USACO Training Section 1.5

IOI1994 Day1T1


---

---
title: "[USACO1.5] 特殊的质数肋骨 Superprime Rib"
layout: "post"
diff: 普及-
pid: P1218
tag: ['数学', '递推', 'USACO', '素数判断,质数,筛法']
---
# [USACO1.5] 特殊的质数肋骨 Superprime Rib
## 题目描述

农民约翰的母牛总是产生最好的肋骨。你能通过农民约翰和美国农业部标记在每根肋骨上的数字认出它们。 

农民约翰确定他卖给买方的是真正的质数肋骨，是因为从右边开始切下肋骨，每次还剩下的肋骨上的数字都组成一个质数。  

举例来说：$7\ 3\ 3\ 1$ 全部肋骨上的数字 $7331$ 是质数；三根肋骨 $733$ 是质数；二根肋骨 $73$ 是质数；当然,最后一根肋骨 $7$ 也是质数。$7331$ 被叫做长度 $4$ 的特殊质数。  

写一个程序对给定的肋骨的数目 $n$，求出所有的特殊质数。$1$ 不是质数。
## 输入格式

一行一个正整数 $n$。


## 输出格式

按顺序输出长度为 $n$ 的特殊质数,每行一个。

## 样例

### 样例输入 #1
```
4

```
### 样例输出 #1
```
2333
2339
2393
2399
2939
3119
3137
3733
3739
3793
3797
5939
7193
7331
7333
7393

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 8$。

题目翻译来自NOCOW。

USACO Training Section 1.5



---

---
title: "【模板】快速幂"
layout: "post"
diff: 普及-
pid: P1226
tag: ['数学', '递推', '递归']
---
# 【模板】快速幂
## 题目描述

给你三个整数 $a,b,p$，求 $a^b \bmod p$。
## 输入格式

输入只有一行三个整数，分别代表 $a,b,p$。

## 输出格式

输出一行一个字符串 `a^b mod p=s`，其中 $a,b,p$ 分别为题目给定的值， $s$ 为运算结果。
## 样例

### 样例输入 #1
```
2 10 9

```
### 样例输出 #1
```
2^10 mod 9=7

```
## 提示

**样例解释**

$2^{10} = 1024$，$1024 \bmod 9 = 7$。

**数据规模与约定**

对于 $100\%$ 的数据，保证 $0\le a,b < 2^{31}$，$a+b>0$，$2 \leq p \lt 2^{31}$。


---

---
title: "[NOI2000] 青蛙过河"
layout: "post"
diff: 普及-
pid: P1244
tag: ['动态规划 DP', '递推', '2000', 'NOI']
---
# [NOI2000] 青蛙过河
## 题目描述

**大小各不相同**的一队青蛙站在河左岸的石墩（记为 A）上，要过到对岸的石墩（记为 D）上去。河心有几片荷叶（分别记为 $Y_1 \dots Y_m$）和几个石墩（分别记为 $S_1\dots S_n$）。图示如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/0u3st8yt.png)

青蛙的站队和移动方法规则如下：

- 每只青蛙只能站在荷叶、石墩，或者**仅比它大一号**的青蛙背上（统称为合法的落脚点）；
- 一只青蛙只有背上没有其它青蛙的时候才能够从一个落脚点跳到另一个落脚点；
- 青蛙允许从左岸 A 直接跳到河心的石墩、荷叶和右岸的石墩 D 上，允许从河心的石墩和荷叶跳到右岸的石墩 D 上；
- 青蛙在河心的石墩之间、荷叶之间以及石墩和荷叶之间可以来回跳动；
- 青蛙在离开左岸石墩后，不能再返回左岸；到达右岸后，不能再跳回；
- 假定石墩承重能力很大，允许无论多少只青蛙都可呆在上面。但是，由于石墩的面积不大，至多只能有一只青蛙直接站在上面，而其他的青蛙只能依规则 1 落在比它大一号的青蛙的背上。
- 荷叶不仅面积不大，而且负重能力也有限，至多只能有一只青蛙站在上面。
- 每一步只能移动一只青蛙，并且移动后需要满足站队规则；
- 在一开始的时候，青蛙均站在 A 上，最大的一只青蛙直接站在石墩上，而其它的青蛙依规则 6 站在比其大一号的青蛙的背上。

青蛙希望最终能够全部移动到 D 上，并完成站队。

设河心有 $m$ 片荷叶和 $n$ 个石墩，请求出这队青蛙至多有多少只，在满足站队和移动规则的前提下，能从 A 过到 D。

你的任务是对于给出的 $n,m$，计算并输出最多能有多少只青蛙可以根据以上规则顺利过河。
## 输入格式

输入两个整数 $n,m$。
## 输出格式

一个整数，表示最多能有多少只青蛙可以根据以上规则顺利过河。

## 样例

### 样例输入 #1
```
1 1

```
### 样例输出 #1
```
4

```
## 提示

$n \leq 20$，$m \leq 10^3$。


---

---
title: "数楼梯"
layout: "post"
diff: 普及-
pid: P1255
tag: ['高精度', '递推', '斐波那契数列']
---
# 数楼梯
## 题目描述

楼梯有 $N$ 阶，上楼可以一步上一阶，也可以一步上二阶。

编一个程序，计算共有多少种不同的走法。
## 输入格式

一个数字，楼梯数。

## 输出格式

输出走的方式总数。

## 样例

### 样例输入 #1
```
4
```
### 样例输出 #1
```
5
```
## 提示

- 对于 $60\%$ 的数据，$N \leq 50$；   
- 对于 $100\%$ 的数据，$1 \le N \leq 5000$。



---

---
title: "[CCC 2025 Junior] Sunny Days"
layout: "post"
diff: 普及-
pid: P12612
tag: ['递推', '2025', 'CCC（加拿大）', '双指针 two-pointer']
---
# [CCC 2025 Junior] Sunny Days
## 题目背景

Score: 15.
## 题目描述

There is a large amount of historical weather data for CEMCity. Each day in the data is listed as either a day with sunshine or a day with precipitation. Jeremy is interested in finding the record for the most consecutive days with sunshine. Unfortunately, the data is incorrect for exactly one day, but Jeremy doesn't know which day this is.

Your job is to help Jeremy determine the maximum possible number of consecutive days with sunshine.

![](https://cdn.luogu.com.cn/upload/image_hosting/mirndz24.png)
## 输入格式

The first line of input contains a positive integer, $N$, representing the number of days in the historical data. The following $N$ lines each contain either the character $S$ or the character $P$, representing a day with sunshine or a day with precipitation, respectively, in chronological order.
## 输出格式

Output the non-negative integer, $M$, which is the maximum possible number of consecutive days with sunshine.
## 样例

### 样例输入 #1
```
8
P
S
P
S
S
P
P
S
```
### 样例输出 #1
```
4
```
## 提示

**Explanation of Output for Sample Input**

If the data is incorrect for the third day, then there was sunshine from the second day to the fifth day which is four consecutive days with sunshine. This is the maximum possible number of consecutive days with sunshine. That is, no matter which day the data is incorrect for, there were not five (or more) consecutive days of sunshine.

The following table shows how the available 15 marks are distributed:

|Marks|Description|Bounds|
|:-:|:-:|:-:|
|2|There are not many days in the historical data. The data consists of a single block of all S's followed by a single block of all P's. One of these blocks may be empty.|$N\leq 1000$|
|4|There are not many days in the historical data. The data contains S's and P's possibly in mixed order.|$N\leq 1000$|
|9|There are possibly many days in the historical data.|$N\leq 500\,000$|


---

---
title: "扑克牌"
layout: "post"
diff: 普及-
pid: P1358
tag: ['数学', '递推', '福建省历届夏令营', '枚举', '背包 DP']
---
# 扑克牌
## 题目描述

组合数学是数学的重要组成部分，是一门研究离散对象的科学，它主要研究满足一定条件的组态（也称组合模型）的存在、计数以及构造等方面的问题。组合数学的主要内容有组合计数、组合设计、组合矩阵、组合优化等。

随着计算机科学的日益发展，组合数学的重要性也日渐凸显，因为计算机科学的核心内容是使用算法处理离散数据。

今天我们来研究组合数学中的一个有趣的问题，也是一个简单的计数问题：

从一副含有 $n$ 张的扑克牌(每张扑克牌都不相同)中，分给 $m$ 个人，第 $i$ 个人得到 $a_i$ 张牌，求一共有几种分法，这个数可能非常大，请输出此数模 $10007$ 后的结果。
## 输入格式

第一行两个整数为 $n,m$。

第二行 $m$ 个整数 $a_i$。

## 输出格式

此数模 $10007$ 后的结果。

## 样例

### 样例输入 #1
```
5 2
3 1

```
### 样例输出 #1
```
20

```
### 样例输入 #2
```
20 19
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1

```
### 样例输出 #2
```
8707

```
## 提示

对于 $50\%$ 的数据：$a_i=1$。

对于 $100\%$ 的数据：$1 \leq n \leq 10^4$，$1 \leq m \leq 100$，$0 \leq a_i \leq 100$。




---

---
title: "旅行"
layout: "post"
diff: 普及-
pid: P1515
tag: ['搜索', '贪心', '递推']
---
# 旅行
## 题目描述

你要进行一个行程为 $7000$ 千米的旅行，现在沿途有些汽车旅馆，为了安全起见，每天晚上都不开车，住在汽车旅馆，你手里现在已经有一个旅馆列表，用离起点的距离来标识，如下：

- $[0,990,1010,1970,2030,2940,3060,3930,4060,4970,5030,5990,6010,7000]$。

但在出发之前可能还要增加一些旅馆。

现在旅行社为了节约成本，要求每天至少行驶 $A$ 公里，国家旅行社为了安全起见，要求每天最多只能行驶 $B$ 公里。

你想知道一共有多少种旅行方案。
## 输入格式

第一行输入一个整数 $A$，第二行输入一个整数 $B$，第三行输入 $N$（$0 \le N \le 20$），表示在出发之前又新增 $N$ 个汽车旅馆；

接下来 $N$ 行，每行一个整数 $m$，表示旅馆离起点的距离（$0<m<7000$）。注意：没有任意两个旅馆在同一位置。
## 输出格式

输出一共有多少种旅行方案。

## 样例

### 样例输入 #1
```
500
1500
0

```
### 样例输出 #1
```
64

```


---

---
title: "信封问题"
layout: "post"
diff: 普及-
pid: P1595
tag: ['数学', '递推', '枚举']
---
# 信封问题
## 题目描述

某人写了 $n$ 封信和 $n$ 个信封，如果所有的信都装错了信封。求所有信都装错信封共有多少种不同情况。
## 输入格式

一个信封数 $n$，保证 $n \le 20$。
## 输出格式

一个整数，代表有多少种情况。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
3
```
### 样例输出 #2
```
2
```
## 提示

对于 $100 \%$ 的数据，$1 \le n \le 20$。


---

---
title: "迷宫"
layout: "post"
diff: 普及-
pid: P1605
tag: ['搜索', '递推', 'USACO', '枚举']
---
# 迷宫
## 题目描述

给定一个 $N \times M$ 方格的迷宫，迷宫里有 $T$ 处障碍，障碍处不可通过。

在迷宫中移动有上下左右四种方式，每次只能移动一个方格。数据保证起点上没有障碍。

给定起点坐标和终点坐标，每个方格最多经过一次，问有多少种从起点坐标到终点坐标的方案。
## 输入格式

第一行为三个正整数 $N,M,T$，分别表示迷宫的长宽和障碍总数。

第二行为四个正整数 $SX,SY,FX,FY$，$SX,SY$ 代表起点坐标，$FX,FY$ 代表终点坐标。

接下来 $T$ 行，每行两个正整数，表示障碍点的坐标。
## 输出格式

输出从起点坐标到终点坐标的方案总数。
## 样例

### 样例输入 #1
```
2 2 1
1 1 2 2
1 2

```
### 样例输出 #1
```
1
```
## 提示

对于 $100\%$ 的数据，$1 \le N,M \le 5$，$1 \le T \le 10$，$1 \le SX,FX \le n$，$1 \le SY,FY \le m$。


---

---
title: "跳马问题"
layout: "post"
diff: 普及-
pid: P1644
tag: ['模拟', '搜索', '递推', '线性递推']
---
# 跳马问题
## 题目背景

在爱与愁的故事第一弹第三章出来前先练练四道基本的回溯/搜索题吧……

## 题目描述

中国象棋半张棋盘如图 $1$ 所示。马自左下角 $(0,0)$ 向右上角 $(m,n)$ 跳。规定只能往右跳，不准往左跳。比如图 $1$ 中所示为一种跳行路线，并将路径总数打印出来。

![](https://cdn.luogu.com.cn/upload/image_hosting/8gkasdvs.png)

## 输入格式

只有一行：两个数 $n$，$m$。

## 输出格式

只有一个数：总方案数 $total$。

## 样例

### 样例输入 #1
```
4 8
```
### 样例输出 #1
```
37
```
## 提示

对于 $100\%$ 的数据：$n, m\leq 18$



---

---
title: "最大加权矩形"
layout: "post"
diff: 普及-
pid: P1719
tag: ['动态规划 DP', '递推', '枚举', '前缀和']
---
# 最大加权矩形
## 题目描述

为了更好的备战 NOIP2013，电脑组的几个女孩子 LYQ,ZSC,ZHQ 认为，我们不光需要机房，我们还需要运动，于是就决定找校长申请一块电脑组的课余运动场地，听说她们都是电脑组的高手，校长没有马上答应他们，而是先给她们出了一道数学题，并且告诉她们：你们能获得的运动场地的面积就是你们能找到的这个最大的数字。

校长先给他们一个 $n\times n$ 矩阵。要求矩阵中最大加权矩形，即矩阵的每一个元素都有一权值，权值定义在整数集上。从中找一矩形，矩形大小无限制，是其中包含的所有元素的和最大 。矩阵的每个元素属于 $[-127,127]$ ,例如

```plain
 0 –2 –7  0 
 9  2 –6  2
-4  1 –4  1 
-1  8  0 –2
```

在左下角：

```plain
9  2
-4  1
-1  8
```

和为 $15$。

几个女孩子有点犯难了，于是就找到了电脑组精打细算的 HZH，TZY 小朋友帮忙计算，但是遗憾的是他们的答案都不一样，涉及土地的事情我们可不能含糊，你能帮忙计算出校长所给的矩形中加权和最大的矩形吗？

## 输入格式

第一行：$n$，接下来是 $n$ 行 $n$ 列的矩阵。

## 输出格式

最大矩形（子矩阵）的和。

## 样例

### 样例输入 #1
```
4
0 -2 -7 0
 9 2 -6 2
-4 1 -4  1 
-1 8  0 -2

```
### 样例输出 #1
```
15
```
## 提示

$1 \leq n\le 120$


---

---
title: "矩阵 II"
layout: "post"
diff: 普及-
pid: P1722
tag: ['模拟', '搜索', '递推', 'Catalan 数']
---
# 矩阵 II
## 题目背景

usqwedf 改编系列题。

## 题目描述


如果你在百忙之中抽空看题，请自动跳到第六行。

众所周知，在中国古代算筹中，红为正，黑为负……

给定一个 $1\times 2n$ 的矩阵（usqwedf：这不是一个 $2n$ 的队列么），现让你自由地放入红色算筹和黑色算筹，使矩阵平衡[即 $\forall i \in[1, 2n]$，$1\sim i$ 格中红色算筹个数大于等于黑色算筹]。

问有多少种方案满足矩阵平衡（注意红色算筹和黑色算筹的数量必须相等）。
## 输入格式

正整数 $n$。
## 输出格式

方案数 $t$ 对 $100$ 取模后的结果。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
2
```
## 提示

样例解释： 

- 方案一：红，黑，红，黑

- 方案二：红，红，黑，黑

数据范围：

$1\le n\le 100$


---

---
title: "通天之汉诺塔"
layout: "post"
diff: 普及-
pid: P1760
tag: ['模拟', '高精度', '递推', '递归', '洛谷原创']
---
# 通天之汉诺塔
## 题目背景

直达通天路·小A历险记第四篇

## 题目描述

在你的帮助下，小 A 成功收集到了宝贵的数据，他终于来到了传说中连接通天路的通天山。但是这距离通天路仍然有一段距离，但是小 A 突然发现他没有地图！！！但是幸运的是，他在山脚下发现了一个宝箱。根据经验判断（小 A 有经验吗？），地图应该就在其中！

在宝箱上，有三根柱子以及在一根柱子上的 $n$ 个圆盘。小 A 在经过很长时间判断后，觉得这就是 hanoi 塔！（这都要琢磨）。但是移动是需要时间的，所以小 A 必须要通过制造延寿药水来完成这项任务。现在，他请你告诉他需要多少步完成，以便他造足够的延寿药水。
## 输入格式

一个数 $n$，表示有 $n$ 个圆盘。
## 输出格式

一个数 $s$，表示需要 $s$ 步。
## 样例

### 样例输入 #1
```
31
```
### 样例输出 #1
```
2147483647
```
### 样例输入 #2
```
15
```
### 样例输出 #2
```
32767
```
## 提示

### 数据范围及约定

对于所有数据，$n \le 15000$。


---

---
title: "A+B Problem（再升级）"
layout: "post"
diff: 普及-
pid: P1832
tag: ['动态规划 DP', '数学', '递推', '洛谷原创', '背包 DP', '素数判断,质数,筛法']
---
# A+B Problem（再升级）
## 题目背景

题目名称是吸引你点进来的。

实际上该题还是很水的。

## 题目描述

- $1+1=?$ 显然是 $2$。
- $a+b=?$ P1001 回看不谢。
- 哥德巴赫猜想 似乎已呈泛滥趋势。

_以上纯属个人吐槽_

给定一个正整数 $n$，求将其分解成若干个素数之和的方案总数。


## 输入格式

一行一个正整数 $n$。

## 输出格式

一行一个整数表示方案总数。
## 样例

### 样例输入 #1
```
7
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
20
```
### 样例输出 #2
```
26
```
## 提示

### 样例解释

存在如下三种方案：

- $7=7$。
- $7=2+5$。
- $7=2+2+3$。

### 数据范围及约定

- 对于 $30\%$ 的数据 $1\le n\le 10$。
- 对于 $100\%$ 的数据，$1\le n\le 10^3$。



---

---
title: "编号"
layout: "post"
diff: 普及-
pid: P1866
tag: ['数学', '递推', 'NOI 导刊', '排序']
---
# 编号
## 题目描述

太郎有 $N$ 只兔子，现在为了方便识别它们，太郎要给他们编号。兔子们向太郎表达了它们对号码的喜好，每个兔子 $i$ 想要一个整数，介于 $1$ 和 $M_i$ 之间（可以为 $1$ 或 $M_i$）。当然，每个兔子的编号是不同的。现在太郎想知道一共有多少种编号的方法。

你只用输出答案对 $10^9+7$ 取余的结果即可。如果这是不可能的，就输出 $0$。
## 输入格式

第一行是一个整数 $N$。

第二行 $N$ 个整数 $M_i$。
## 输出格式

一个整数，表示方案总数。
## 样例

### 样例输入 #1
```
2
5 8

```
### 样例输出 #1
```
35
```
## 提示

### 数据范围及约定

对于全部数据，$1 \le N \le 50$，$1\le M_i\le 1000$。


---

---
title: "水晶灯火灵"
layout: "post"
diff: 普及-
pid: P1936
tag: ['递推']
---
# 水晶灯火灵
## 题目背景

《爱与愁的故事第五弹·Halloween》第二章。

题目容易吐血请谨慎阅读！

## 题目描述

爱与愁大神兴高采烈地踏出妖精系道馆——他已经获得了妖精系徽章（鼓掌）！可是一出门就遇到一群パンプジン（Because today is Halloween）！仲谋半？没事，爱与愁大神手上还仅存着一只水晶灯火灵（完克パンプジン）。或许是因为这是爱与愁大神存活的最后一只精灵，水晶灯火灵十分振奋，一击打垮了一群パンプジン。水晶灯火灵使用了一招***（被打上了马赛克？！），刚好符合以下③条规则：

1. $m,n \in \{1,2,\cdots ,k\}$；
2. $(n^2-m\times n-m^2)^2=1$；
3. $m,n$ 为整数。

爱与愁大神非常高兴，他想要知道 $m^2+n^2$ 的最大值，以及在什么情况下可以取得最大值。你能帮助他吗？请输出 $m$ 和 $n$。
## 输入格式

输入共一个整数 $k$。

## 输出格式

共两行，第一行是 $m$ 的最大值，第二行是 $n$ 的最大值。

## 样例

### 样例输入 #1
```
1995
```
### 样例输出 #1
```
m=987
n=1597
```
## 提示

### 数据范围及约定

- 对于 $20\%$ 数据，$k \le 100$；
- 对于 $100\%$ 数据，$k \le 10^8$。



---

---
title: "上学路线"
layout: "post"
diff: 普及-
pid: P1958
tag: ['模拟', '搜索', '递推', 'NOI 导刊']
---
# 上学路线
## 题目描述

你所在城市的街道好像一个棋盘，有 $a$ 条南北方向的街道和 $b$ 条东西方向的街道。南北方向的 $a$ 条街道从西到东依次编号为 $1$ 到 $a$，而东西方向的 $b$ 条街道从南到北依次编号为 $1$ 到 $b$，南北方向的街道 $i$ 和东西方向的街道 $j$ 的交点记为 $(i,j)$。

你住在 $(1,1)$ 处，而学校在 $(a,b)$ 处，你骑自行车去上学，自行车只能沿着街道走，而且为了缩短时间只允许沿着向东和北的方向行驶。

现在有 $N$ 个交叉路口在施工 $(X_1,Y_1)$、$(X_2,Y_2)$……，$(X_n,Y_n)$，这些路口是不能通车的。

问你上学一共有多少走法?
## 输入格式

第一行包含两个整数 $a$ 和 $b$，并且满足 $1 \le a,b \le 16$。

第二行包含一个整数 $N$，表示有 $N$ 个路口在维修 $(1\le N\le 40)$。

接下来 $N$ 行，每行两个整数$X_i,Y_i$，描述路口的位置。

## 输出格式

输出一个整数表示从 $(1,1)$ 到 $(a,b)$ 的行车路线总数。
## 样例

### 样例输入 #1
```
5 4
3
2  2
2  3
4  2

```
### 样例输出 #1
```
5
```
## 提示

【样例解释】

![](https://cdn.luogu.com.cn/upload/image_hosting/d8tdwcbj.png)


---

---
title: "蜜蜂路线"
layout: "post"
diff: 普及-
pid: P2437
tag: ['高精度', '递推', '斐波那契数列']
---
# 蜜蜂路线
## 题目背景

无
## 题目描述

一只蜜蜂在下图所示的数字蜂房上爬动,已知它只能从标号小的蜂房爬到标号大的相邻蜂房,现在问你：蜜蜂从蜂房 $m$ 开始爬到蜂房 $n$，$m<n$，有多少种爬行路线？（备注：题面有误，右上角应为 $n-1$）

![](https://cdn.luogu.com.cn/upload/pic/1575.png)

## 输入格式

输入 $m,n$ 的值

## 输出格式

爬行有多少种路线

## 样例

### 样例输入 #1
```
1 14
```
### 样例输出 #1
```
377
```
## 提示

对于100%的数据，$1 \le M,N\le 1000$



---

---
title: "斐波那契数列（升级版）"
layout: "post"
diff: 普及-
pid: P2626
tag: ['模拟', '递推', '素数判断,质数,筛法']
---
# 斐波那契数列（升级版）
## 题目背景

大家都知道，斐波那契数列是满足如下性质的一个数列： 

- $f(1) = 1$
- $f(2) = 1$ 
- $f(n) = f(n-1) + f(n-2)$（$n > 2$ 且 $n$ 为整数）。

## 题目描述

请你求出第 $n$ 个斐波那契数列的数 $\bmod\,2^{31}$ 之后的值，并把它分解质因数。

## 输入格式

输入一个正整数 $n$。
## 输出格式

把第 $n$ 个斐波那契数列的数分解质因数。

## 样例

### 样例输入 #1
```
5
```
### 样例输出 #1
```
5=5
```
### 样例输入 #2
```
6
```
### 样例输出 #2
```
8=2*2*2
```
## 提示

$n \le 48$


---

---
title: "三角形计数"
layout: "post"
diff: 普及-
pid: P2807
tag: ['递推']
---
# 三角形计数
## 题目背景

三角形计数(triangle) 递推

## 题目描述

把大三角形的每条边 $n$ 等分，将对应的等分点连接起来（连接线分别平行于三条边），这样一共会有多少三角形呢？编程来解决这个问题。

## 输入格式

第一行为整数 $t(t≤100)$，表示测试数据组数；接下来 $t$ 行，每行一个正整数 $n(n≤500)$。

## 输出格式

对于每个 $n$，输出一个正整数，表示三角形个数。

## 样例

### 样例输入 #1
```
3
1
2
3
```
### 样例输出 #1
```
1
5
13
```
## 提示





---

---
title: "[USACO08FEB] Dining Cows B"
layout: "post"
diff: 普及-
pid: P2837
tag: ['动态规划 DP', '递推', '2008', 'USACO']
---
# [USACO08FEB] Dining Cows B
## 题目描述

为了避免餐厅过分拥挤，FJ 要求奶牛们分 $2$ 批就餐。每天晚饭前，奶牛们都会在餐厅前排队入内，按 FJ 的设想，所有第 $2$ 批就餐的奶牛排在队尾，队伍的前半部分则由设定为第 $1$ 批就餐的奶牛占据。

由于奶牛们不理解 FJ 的安排，晚饭前的排队成了一个大麻烦。 第 $i$ 头奶牛有一张标明她用餐批次 $D_i$ 的卡片。虽然所有 $N$ 头奶牛排成了很整齐的队伍，但谁都看得出来，卡片上的号码是完全杂乱无章的。 在若干次混乱的重新排队后，FJ 找到了一种简单些的方法：奶牛们不动，他沿着队伍从头到尾走一遍，把那些他认为排错队的奶牛卡片上的编号改掉，最终得到一个他想要的每个组中的奶牛都站在一起的队列，例如 $112222$ 或 $111122$。有的时候，FJ 会把整个队列弄得只有 $1$ 组奶牛（比方说，$1111$ 或 $222$）。 

你也晓得，FJ 是个很懒的人。他想知道，如果他想达到目的，那么他最少得改多少头奶牛卡片上的编号。所有奶牛在 FJ 改卡片编号的时候，都不会挪位置。
## 输入格式

第一行输入一个整数 $N$（$1 \le N \le 3 \times 10 ^ 4$）。

第 $2 \sim N + 1$ 行，每行 $1$ 个整数，表示第 $i$ 头牛的用餐批次 $D_i$（$1 \le D_i \le 2$）。
## 输出格式

输出 $1$ 个整数，为 FJ 最少要改几头奶牛卡片上的编号，才能让编号变成他设想中的样子。
## 样例

### 样例输入 #1
```
7
2
1
1
1
2
2
1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
5
2
2
1
2
2
```
### 样例输出 #2
```
1
```
## 提示

$1 \le N \le 3 \times 10 ^ 4$


---

---
title: "[USACO09OPEN] Cow Line S"
layout: "post"
diff: 普及-
pid: P2952
tag: ['模拟', '递推', '2009', 'USACO', '单调队列']
---
# [USACO09OPEN] Cow Line S
## 题目描述

Farmer John's N cows (conveniently numbered 1..N) are forming a line. The line begins with no cows and then, as time progresses, one by one, the cows join the line on the left or right side. Every once in a while, some number of cows on the left or right side of the line all leave the line to go graze in their favorite pasture.

FJ has trouble keeping track of all the cows in the line. Please help him.

The cows enter the line in numerical order 1..N, and once a cow leaves the line she never re-enters it. Your program will be given S (1 <= S <= 100,000) input specifications; each appears on a single line and is one of two types:

\* A cow enters the line (a parameter indicates whether on the left or right).

\* K cows leave the line from the left or right side (supplied parameters define both the number of cows and which side).

Input lines never request an operation that can not be performed.

After all the input lines have been processed, your program should print the cows in the line in order from left to right. The final line is guaranteed to be non-empty at the end of the input specifications.
## 输入格式

\* Line 1: A single integer: S

\* Lines 2..S+1: Line i+1 contains specification i in one of four formats:

\* A L -- a cow arrives on the Left of the line

\* A R -- a cow arrives on the Right of the line

\* D L K -- K cows depart the Left side of the line

\* D R K -- K cows depart the Right side of the line
## 输出格式

\* Lines 1..??: Print the numbers of the cows in the line in order from left to right, one number per line.
## 样例

### 样例输入 #1
```
10 
A L 
A L 
A R 
A L 
D R 2 
A R 
A R 
D L 1 
A L 
A R 

```
### 样例输出 #1
```
7 
2 
5 
6 
8 

```
## 提示

Input    Resulting Cow Line

A L      1

A L      2 1

A R      2 1 3

A L      4 2 1 3

D R 2    4 2

A R      4 2 5

A R      4 2 5 6

D L 1    2 5 6

A L      7 2 5 6

A R      7 2 5 6 8

感谢@ ws\_fuweidong  提供翻译。

## 题目翻译

Farmer John（以下简称 FJ）的 $N$ 头奶牛（用 $1 \dots N$ 编号）在直线上排队。一开始，这条线上没有任何奶牛，随着时间的推移，奶牛们会一个接一个地站到队伍的左边或右边。又过了一会儿，某些奶牛会从队伍里离开，去吃自己最喜欢的草料。

FJ 无法跟踪每一头奶牛，于是，他想让你来帮助他。

奶牛以 $1 \dots N$ 的顺序排队，并且离开的奶牛不会再次回来。数据将会给出 $S$（$1 \le S \le 100000$） 条指令，各占一行，分两种：

- $A$ 头奶牛加入了队列（还有一个参数，表示从左加入还是从右加入）；
- $K$ 头奶牛从左边或者右边离开了队列（还有两个参数，分别表示从左离开还是从右离开和离开多少头奶牛）。

输入的命令一定是可以执行的。

所有的操作结束后，你的程序应该以从左到右的顺序输出这个奶牛队列。数据保证最后的队列不空。

**【输入格式】**

- 第 $1$ 行：单独一个整数 $S$。
- 第 $2 \dots S+1$ 行：第 $i+1$ 行会有一条命令，有以下几种：
  - `A L`：一头奶牛从队列左边加入；
  - `A R`：一头奶牛从队列右边加入；
  - `D L K`：$K$ 头奶牛从队伍左边离开；
  - `D R K`：$K$ 头奶牛从队伍右边离开。

**【输出格式】**

- 第 $1 \dots ??$ 行：从左到右输出最后的奶牛队列，一个奶牛编号占一行。

**【样例解释】**

以下为输入的命令及对应的队列：

- `A L`：$1$；
- `A L`：$2,1$；
- `A R`：$2,1,3$；
- `A L`：$4,2,1,3$；
- `D R 2`：$4,2$；
- `A R`：$4,2,5$；
- `A R`：$4,2,5,6$；
- `D L 1`：$2,5,6$；
- `A L`：$7,2,5,6$；
- `A R`（最终序列）：$7,2,5,6,8$。


---

---
title: "金坷垃"
layout: "post"
diff: 普及-
pid: P5035
tag: ['数学', '递推', '2018']
---
# 金坷垃
## 题目背景

@rainheavy 原创

这是一道巨（du）水（liu）题

第一届中国国际博览会于2018年11.5--11.10在上海举行，特朗普统治的国家——美国带来了金坷垃。这是一种神奇的产品，~~肥料用了金坷垃，能吸收20米以下的氮磷钾~~（这是他们的广告）

可是，在经过富土（tu）康的质检员 DevZhu质检的时候发现出了点问题，金坷垃的效果并不像广告所说的那样。毕竟植物的根只能到深度为$1$的位置，金坷垃的效果有限

## 题目描述

它的效果只能如下：（以20为例）

20的约数（除本身）有10、5、4、2、1

从地下20米深处可以往上跳一个约数的长度（比如10）

现在它在10米处，10的约数（除本身）有5、2、1

再跳一个5，为5，5的约数（除本身）有1

再跳1个1，为4，4的约数（除本身）有2、1。

**1已用过，不能再用**

再跳一个2，为2。2的约数（除本身）有1。

**1已用过。**
此时没法再跳了。此时的深度为2。

按上述要求跳，把所有符合要求的能跳的所有情况全试一遍，只要有一种情况最后结果为$1$，这个肥料就合格，否则不合格。

DevZhu面对一大堆待检验的金坷垃，并不想检验那么多，他想问问你有哪些金坷垃是合格的，在这些合格的金坷垃中，初始深度排在第k个的是哪一个

把合格的金坷垃按初始深度从小到大排，请输出第k个金坷垃的初始深度，对$123456789$取模（富土康从不用1e9+7和998244353）
## 输入格式

一个数$k$
## 输出格式

合格的第$k$个金坷垃的初始深度对$123456789$取模后的结果
## 样例

### 样例输入 #1
```
1
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
2
```
### 样例输出 #2
```
2
```
## 提示

（简单死了。。。）

（给不会的人一点福利：数据里有一个是1）

对于30%的数据，$k$<=$10^5$;

对于70%的数据，$k$<=$10^9$;

对于100%的数据，$k$<=$10^{18}$；


---

---
title: "[COCI 2010/2011 #2] PUŽ"
layout: "post"
diff: 普及-
pid: P6546
tag: ['模拟', '数学', '递推', '2010', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #2] PUŽ
## 题目描述

蜗牛爬井问题：一只蜗牛要爬上 $v$ 米高的树桩，它每天白天向上爬 $a$ 米，晚上向下掉 $b$ 米。几天之后它可以爬到树桩顶？
## 输入格式

一行三个整数 $a$、$b$、$v$，用空格隔开。
## 输出格式

一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
2 1 5
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5 1 6
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
100 99 1000000000
```
### 样例输出 #3
```
999999901
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \leq  b < a \leq v \leq 1 \times 10^9$。

#### 说明

- 本题满分 $30$ 分。
- 题目译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #2](https://hsin.hr/coci/archive/2010_2011/contest2_tasks.pdf) PUŽ，译者 @[mnesia](https://www.luogu.com.cn/user/115711)。

#### 提示

请推导结果公式，单纯的模拟可能导致 `TLE`。


---

---
title: "三遣救援"
layout: "post"
diff: 普及-
pid: P7494
tag: ['递推', '2021']
---
# 三遣救援
## 题目背景

>就像第一块多米诺骨牌，那个人的出现开启了后面的故事。

穆罗在家里养了许多猪。在他的训练下，这些猪都十分乖巧。当然，有的时候这些猪也会变得十分调皮……
## 题目描述

一天早上，穆罗发现自己私存的一块蛋糕被偷吃了！他立即猜到某只猪吃了这块蛋糕，于是迅速赶到猪圈决定找出这只猪进行惩罚。

猪圈里有 $n$ 只猪，猪的序号是 $1$ 到 $n$ 之间的整数。除了偷吃了蛋糕的那只猪，其他所有猪**一样重**，而那只偷吃了蛋糕的猪会比其他猪**略重一些**（你可以假设原本猪是 $5\text{kg}$ 的，那只吃了蛋糕的猪是 $5.1\text{kg}$ 的）。穆罗无法肉眼判断是哪只猪吃了蛋糕。

幸运的是穆罗有一个天平，可以将猪赶上天平两侧，从而比较出哪边的猪更重。不过这个天平不是很大，每侧最多只能有 $m$ 只猪，否则天平就会损坏导致无法使用（偷吃蛋糕的猪**不会使天平一侧可放置的猪的数目减少**，即**无论猪是否偷吃，每侧都最多只能有 $m$ 只猪**）。

穆罗不想花费太多的时间，所以他希望知道在**天平不损坏**的前提下，**至少需要使用几次天平称量才能保证找出这只偷吃了的猪**。他希望你能求出这个数。
## 输入格式

一行，两个正整数 $n,m$。
## 输出格式

一行，一个正整数表示答案。
## 样例

### 样例输入 #1
```
4 5
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
13 6
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
8 2
```
### 样例输出 #3
```
3
```
### 样例输入 #4
```
114 514
```
### 样例输出 #4
```
5
```
### 样例输入 #5
```
19198 10
```
### 样例输出 #5
```
962
```
## 提示

#### 样例一解释：

穆罗先让 $1$ 号猪和 $2$ 号猪分别上天平两侧，再让 $3$ 号猪和 $4$ 号猪分别上天平两侧，此时一定能找出偷吃了的猪，使用天平次数为 $2$。显然只使用一次天平无法保证能找出那只偷吃了的猪。

#### 样例三解释：

天平两侧最多都只能放两只猪，所以至少需要三次才能保证找出。

------------
#### 数据范围

**本题采用捆绑测试。**

+ Subtask 1 ( $10\%$ )：$n,m\leq10$。
+ Subtask 2 ( $25\%$ )：$n,m\leq10^6$。
+ Subtask 3 ( $15\%$ )：$n\leq m$。
+ Subtask 4 ( $50\%$ )：无特殊限制。

对于所有数据，$1\leq n,m\leq10^{15}$。


---

---
title: "『XYGOI round1』三个数"
layout: "post"
diff: 普及-
pid: P9435
tag: ['递推', 'O2优化', '洛谷月赛']
---
# 『XYGOI round1』三个数
## 题目描述

MX 有一个有 $(w-2)$ 个数的集合 $S=\{3,4,5,\cdots ,w\}$。要求构造一个只包含非负整数的集合（无重复元素），使得 $S$ 里面的任何一个数都能被这个集合里面大于等于 $3$ 个不同的数相加得到，求这个集合中至少包含多少个元素。
## 输入格式

本题包含多组测试数据。

第一行输入一个整数 $T$，表示数据组数。

接下来 $T$ 行每行输入一个整数 $w$。
## 输出格式

共 $T$ 行，每行输出一个整数 $n$，表示集合至少应该含有的元素个数。
## 样例

### 样例输入 #1
```
1
4
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5
3
18
999
9999
9999999999
```
### 样例输出 #2
```
3
6
12
15
35

```
## 提示

#### 样例 1 说明：

集合元素可以为 $0,1,2,3$。

#### 数据范围：

**本题采用捆绑测试。**

对于所有数据，保证 $1\le T \le 10^5$，$3\le w \le 10^{12}$。

| Subtask | $T$ | $w$ | 分值 |
|:-:|:-:|:-:|:-:|
|0|$=1$|$w\le 10$|5|
|1|$1\le T\le 10^3$|$w\le 20$|10|
|2|$1\le T\le 50$|$w\le 10^{3}$|25|
|3|$1\le T\le 10^3$|$w\le 10^{5}$|30|
|4|$1\le T\le 10^5$|$3\le w\le 10^{12}$|30|



---

---
title: "[KMOI R1] 五五五五（Easy）"
layout: "post"
diff: 普及-
pid: P9710
tag: ['递推', 'O2优化']
---
# [KMOI R1] 五五五五（Easy）
## 题目背景

“迟序之数，非出神怪，有形可检，有数可推。”——祖冲之
## 题目描述

小宋有一个序列 $a_1,a_2\dots,a_n$，其中对于 $i\in [1,n]$，满足 $a_i\in[0,9]$。

对于 $1\le l\le r\le n$，他记 $f(l,r)$ 等于 $\overline{a_la_{(l+1)}\dots a_r}$ 的末尾连续 $5$ 的个数。

例如：对于序列 $a=\{1,1,4,5,1,4\}$，$f(2,4)=1,f(1,3)=0$。

现在请你求出:

$$\Big(\sum\limits_{l=1}^
{n}\sum\limits_{r=l}^{n} f(l,r)\Big) \bmod 10^9+7$$
## 输入格式

第一行一个正整数 $n$，表示序列的长度。

第二行 $n$ 个整数 $a_1,a_2,\dots,a_n$，表示序列 $a$。
## 输出格式

一个正整数 $ans$，表示答案。
## 样例

### 样例输入 #1
```
2
5 5
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
4
1 1 4 5
```
### 样例输出 #2
```
4
```
## 提示

## 样例 $1$ 解释：

$f(1,1)=1$。

$f(1,2)=2$。

$f(2,2)=1$。

得到答案 $ans=f(1,1)+f(1,2)+f(2,2)=4$，故输出 $4$。

## 数据范围

**本题采用 subtask 捆绑测试。**

令 $m=\max\{a_1,a_2,\dots,a_n\}$。

| 子任务编号 | 测试点编号 | $n\le$ | $m\le$ | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | $1$ | $100$ | $3$ | 无 | $3$ |
| $2$ | $2\sim 4$ | $2\times 10^5$ | $5$ | $\mathbf{A}$ | $22$ |
| $3$ | $5,6$ | $100$ | $5$ | 无 | $10$ |
| $4$ | $7\sim 10$ | $2\times 10^5$ | $5$ | $\mathbf{B}$ | $25$ |
| $5$ | $11\sim 20$ | $2\times 10^5$ | $9$ | 无 | $40$ |

特殊性质 $\mathbf{A}:$ 序列平均数为 $5$。

特殊性质 $\mathbf{B}:$ 序列单调不上升。

对于 $100\%$ 的数据：$1\le n\le 2\times 10^5$，$0\le m\le 9$。

对于 $\forall i\in [1,n]$，满足 $a_i\in[0,9]$。


---


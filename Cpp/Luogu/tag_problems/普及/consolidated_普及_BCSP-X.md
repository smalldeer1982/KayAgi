---
title: "[BCSP-X 2024 12 月小学高年级组] 质数补全"
layout: "post"
diff: 普及/提高-
pid: B4158
tag: ['2024', '北京', '枚举', '深度优先搜索 DFS', '筛法', 'BCSP-X']
---
# [BCSP-X 2024 12 月小学高年级组] 质数补全
## 题目描述

Alice 在纸条上写了一个质数，第二天再看时发现有些地方污损看不清了。

- 在大于 $1$ 的自然数中，除了 $1$ 和它本身以外不再有其他因数的自然数称为质数

请你帮助 Alice 补全这个质数，若有多解输出数值最小的，若无解输出 $-1$。

例如纸条上的数字为 $\tt{1*}$（$\tt{*}$ 代表看不清的地方），那么这个质数有可能为 $11, 13, 17, 19$，其中最小的为 $11$。
## 输入格式

第一行 $1$ 个整数 $t$，代表有 $t$ 组数据。

接下来 $t$ 行，每行 $1$ 个字符串 $s$ 代表 Alice 的数字，仅包含数字或者 $\tt{*}$，并且保证首位不是 $\tt{*}$ 或者 $0$。
## 输出格式

输出 $t$ 行，每行 $1$ 个整数代表最小可能的质数，或者 $-1$ 代表无解。
## 样例

### 样例输入 #1
```
10
1*
3**
7**
83*7
2262
6**1
29*7
889*
777*
225*
```
### 样例输出 #1
```
11
307
701
8317
-1
6011
2917
8893
-1
2251
```
### 样例输入 #2
```
10
4039***
2***5*5
4099961
25**757
7***0**
1***00*
41811*9
6***0*7
8***1**
6561*59
```
### 样例输出 #2
```
4039019
-1
4099961
2509757
7000003
1000003
4181129
6000047
8000101
6561259
```
## 提示

### 样例 3-6

参考附件中的样例。

### 数据范围

$|s|$ 代表 $s$ 串的长度，对于所有数据，$1 \leq t \leq 10, 1 \leq |s| \leq 7$，$s$ 中仅包含数字或者 $\tt{*}$，并且保证首位不是 $\tt{*}$ 或者 $0$。

本题采用捆绑测试，你必须通过子任务中的所有数据点以及其依赖的子任务，才能获得子任务对应的分数。

| 子任务编号 | 分值 | $\mid s\mid$ | 特殊性质 | 子任务依赖 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | $35$ | $\leq 7$ | $s$ 中没有 $\tt{*}$ |  |
| $2$ | $30$ | $\leq 4$ |  |  |
| $3$ | $24$ | $\leq 7$ | $s$ 中至多包含 $1$ 个 $\tt{*}$ | $1$ |
| $4$ | $11$ | $\leq 7$ |  | $1,2,3$ |



---

---
title: "[BCSP-X 2024 12 月小学高年级组] 打怪升级"
layout: "post"
diff: 普及/提高-
pid: B4159
tag: ['动态规划 DP', '2024', '北京', 'BCSP-X']
---
# [BCSP-X 2024 12 月小学高年级组] 打怪升级
## 题目描述

Alice 在玩一个游戏，游戏共有 $n$ 个关卡，你需要操作 $1$ 个主角过关，主角有 $2$ 个属性：

1. 血量
2. 等级

每关的 Boss 会对主角造成伤害（血量减小），第 $i$ 关的 Boss 对等级为 $j$ 的主角造成的伤害值为 $b[i][j]$。

每关打完 Boss 后，在进入下一关前会得到一本经验书，你有 $2$ 个选择：

1. 回血：第 $i$ 关的经验书可以使血量增加 $a[i]$。
2. 改变等级：若假设主角当前等级为 now，使用经验书可以将等级变为 $[1, now + 1]$ 中的任意值。

你需要在 $2$ 个选择中择一执行。

已知主角的初始血量为 $m$，初始等级为 $1$，游戏过程中任意时刻血量必须 $>0$。

现在请问，在通过第 $k$ 个关卡之后（可以使用第 $k$ 关的经验书），主角能达到的最大等级是多少？如果无法通过第 $k$ 关，答案为 0。

请你输出 $k = 1 \sim n$ 的所有答案，注意这 $n$ 个询问是独立的。

例如 $n = 3, m = 2, a = [2, 1, 1]$

$$b[1][1] = 1$$
$$b[2][1] = 2, b[2][2] = 3$$
$$b[3][1] = 3, b[3][2] = 3, b[3][3] = 3$$

- 当 $k = 1$ 时，第一关血量先减为 $2 - 1 = 1$，然后选择升为 2 级，答案为 $2$。
- 当 $k = 2$ 时，第一关血量先减为 $2 - 1 = 1$，然后选择加血 $1 + 2 = 3$；第二关血量减为 $3 - 2 = 1$，然后选择升为 $2$ 级，答案为 $2$。
- 当 $k = 3$ 时，无论如何选择都无法通过第 3 关，答案为 $0$。
## 输入格式

第一行 $2$ 个整数 $n, m$，代表关卡数量和初始血量。

第二行 $n$ 个整数 $a[1 \sim n]$ 代表每关经验书的加血量。

接下来 $n$ 行，第 $i$ 行包含 $i$ 个整数代表第 $i$ 关的 Boss 对等级为 $1 \sim i$ 的主角造成的伤害值。
## 输出格式

输出 $n$ 行，第 $i$ 行包含 $1$ 个整数代表通过第 $i$ 个关卡之后，主角能达到的最大等级。
## 样例

### 样例输入 #1
```
3 2
2 1 1
1
2 3
3 3 3
```
### 样例输出 #1
```
2
2
0
```
### 样例输入 #2
```
10 98
67 100 76 15 44 86 38 95 5 8
43
25 91
14 18 24
79 79 60 85
35 47 59 22 96
53 78 43 95 55 25
74 26 97 30 42 14 6
100 70 79 49 83 74 43 38
64 38 75 79 59 10 54 17 2
34 19 19 4 23 90 99 97 93 10
```
### 样例输出 #2
```
2
2
3
4
4
4
5
5
5
6
```
## 提示

### 样例 3-5

见附件。

### 数据范围

对于所有数据，$1 \leq n \leq 1500, 0 \leq a[i], b[i][j] \leq 100, 1 \leq m \leq 1500$

本题采用捆绑测试，你必须通过子任务中的所有数据点以及其依赖的子任务，才能获得子任务对应的分数。

| 子任务编号 | 分值 | $n$ | 子任务依赖 |
|:----------:|:----:|:-------:|:------------:|
| 1          | 39   | $\leq 10$ |            |
| 2          | 43   | $\leq 100$ | 1          |
| 3          | 18   | $\leq 1500$ | 1,2        |


---

---
title: "[BCSP-X 2024 12 月初中组] 序列选择"
layout: "post"
diff: 普及/提高-
pid: B4163
tag: ['动态规划 DP', '2024', '北京', '线性 DP', 'BCSP-X']
---
# [BCSP-X 2024 12 月初中组] 序列选择
## 题目描述

给定两个长度为 $ n $ 的序列 $ a, b $，找出一个长为 $ n $ 的序列 $ c $，满足对于 $ i = 1, 2, \cdots, n $，有 $ c_i = a_i $ 或 $ c_i = b_i $，使得 $\sum_{i=2}^{n} |c_i - c_{i-1}|$ 最小，你只需要输出这个最小值。

## 输入格式

- 输入的第一行包含一个正整数 $ n $。
- 接下来一行 $ n $ 个正整数，表示序列 $ a_i $。
- 接下来一行 $ n $ 个正整数，表示序列 $ b_i $。
## 输出格式

输出一行一个整数，表示 $\sum_{i=2}^{n} |c_i - c_{i-1}|$ 的最小值。
## 样例

### 样例输入 #1
```
5
1 3 4 2 5
2 5 4 2 1
```
### 样例输出 #1
```
5
```
## 提示

### 样例 1 解释
令序列 $ c = [2, 3, 4, 2, 1] $，此时 $\sum_{i=2}^{n} |c_i - c_{i-1}| = 5$，可以证明不存在更小的答案。

### 样例 2

见附件的 `seq/seq2.in` 与 `seq/seq2.ans`。

### 数据范围

- 对于 $20\%$ 的数据，满足 $n\leq 20$。
- 对于 $100\%$ 的数据，满足 $1\leq n\leq 2\times 10^5$，$0\leq |a_i|,|b_i|\leq 10^9$。


---

---
title: "[BCSP-X 2024 12 月初中组] 末日塔后传"
layout: "post"
diff: 普及/提高-
pid: B4164
tag: ['2024', '北京', 'Special Judge', '构造', 'BCSP-X']
---
# [BCSP-X 2024 12 月初中组] 末日塔后传
## 题目背景

末日塔 - 后传
## 题目描述

星球上的 $n$ 座末日塔又开始释放以太能量了。

每一座末日塔释放的以太能量都有 $n$ 种类型，对于第 $k$ 种类型的以太能量，它需要通过单向管道运送到第 $k$ 座末日塔，才能被完全抑制住。

作为曾经勇闯末日塔的先锋，你被授予在任意两座末日塔之间建造一条单向管道的权力，而你的任务则是对于所有的 $i, j \in [1, n]$，当第 $i$ 座末日塔出现第 $j$ 种以太能量时，尽你所能的将其通过管道迅速运送到能够抑制这种以太能量的末日塔。

很不幸，由于以太能量过于浓密，当其被单向管道连续运输大于两次后，以太能量散发的射线将透过管道，对星球上的所有生物进行精神控制，你的任务就失败了。

请你判断存不存在能够让你任务圆满完成的管道设计方案。如果有，请输出 YES 以及任意一种设计方案；如果没有，请输出 NO。
## 输入格式

一个正整数 $n$ 表示星球上末日塔的数量。
## 输出格式

第一行一个字符串 YES 或 NO，表示是否存在圆满完成任务的设计方案。

如果为 YES，请再输出 $n$ 行 $n$ 列的邻接矩阵 $d$，$d_{i,j} = 1/0$ 表示存在/不存在从第 $i$ 座到第 $j$ 座的单向管道。

你需要保证 $d_{i,i} = 0$ 且 $\forall i \neq j, d_{i,j} \text{ xor } d_{j,i} = 1$。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
YES
0 1 0
0 0 1
1 0 0
```
### 样例输入 #2
```
4
```
### 样例输出 #2
```
NO
```
## 提示

### 样例解释 1

$d_1$ 一次可以到 $d_2$，$d_1 $先到 $d_2$，再到 $d_3$，最多利用了两个管道；$d_2$ 和 $d_3$ 同理，所以输出 YES。

### 样例解释 2

$n=4$ 的情况，无论你怎么建图，保证不能同时有 $d_i$ 到 $d_j$ 的往返路，这样 $d_i$ 到 $d_j$ 的连接会多于 $2$ 个管道，所以输出 NO。

### 数据范围

对于 $100\%$ 的数据，$n \leq 500$。


---

---
title: "[BCSP-X 2024 6 月小学高年级组] 学习计划"
layout: "post"
diff: 普及/提高-
pid: B4172
tag: ['动态规划 DP', '2024', '北京', 'BCSP-X']
---
# [BCSP-X 2024 6 月小学高年级组] 学习计划
## 题目描述

暑假共有 $n$ 天，第 $i$ 天的精力指数为 $a[i]$，你想要利用假期**依次（按 $1, 2, \ldots, m$ 顺序）** 复习 $m$ 门功课，第 $i$ 门功课的重要程度为 $b[i]$，且**每门功课的复习时段必须连续，并且不能有某天不干事。**

假设第 $i$ 门功课的复习时段为第 $l \sim r$ 天，那么第 $i$ 门功课的收益为 $b[i] \times (a[l] + a[l + 1] + \ldots + a[r])$，你的总收益为 $m$ 门功课收益的总和。

请你制订一个复习计划，使得总收益最大。

形式化地，给定序列 $a[1 \sim n], b[1 \sim m]$，你需要把 $1, 2, \ldots, n$ 这个序列分成首尾相连且非空的 $m$ 段，假设每段的 $a$ 之和为 $s[1 \sim m]$，最大化 $\sum_{i=1}^{m} b[i] \times s[i]$ 的值。

例如 $a = [-3, 6, -1, -8, 7, -6], b = [-3, 2]$，最优策略是第 $1 \sim 4$ 天复习第 $1$ 门功课，收益为 $-3 \times (-3 + 6 - 1 - 8) = 18$；第 $5 \sim 6$ 天复习第 $2$ 门功课，收益为 $2 \times (7 - 6) = 2$；总收益为 $18 + 2 = 20$。

例如 $a = [6, 3, 5, 10, 5], b = [-8, -5, -5]$，最优策略是分成 $[1], [2, 3, 4], [5]$ 三段，总收益为 $-8 \times 6 - 5 \times (3 + 5 + 10) - 5 \times 5 = -163$。

## 输入格式

第一行 1 个整数 $T$，代表有 $T$ 组数据。

每组数据第一行 2 个整数 $n, m$，第二行 $n$ 个整数 $a[1 \sim n]$，第三行 $m$ 个整数 $b[1 \sim m]$。
## 输出格式

输出 $T$ 行，每行 1 个整数代表答案。
## 样例

### 样例输入 #1
```
5
6 2
-3 6 -1 -8 7 -6
-3 2
5 4
-9 -6 -6 -7 -8
-5 7 -9 -3
7 7
7 2 3 0 -2 4 2
-9 -2 -5 0 -7 9 -1
5 3
10 4 6 7 4
-1 -9 2
5 3
6 3 5 10 5
-8 -5 -5
```
### 样例输出 #1
```
20
144
-34
-12
-163
```
## 提示

对于所有数据，满足 $1 \leq T \leq 20, 1 \leq m \leq n \leq 2000, -10^3 \leq a[i], b[i] \leq 10^3$。

- 对于测试点 1~7：$n \leq 10$；
- 对于测试点 8~12：$n \leq 500$；
- 对于测试点 13~16：所有 $a[i], b[i]$ 为正整数；
- 对于测试点 17~20：$n \leq 2000$；


---


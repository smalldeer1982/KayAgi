---
title: "[NOIP 1998 提高组] 拼数"
layout: "post"
diff: 普及/提高-
pid: P1012
tag: ['字符串', '1998', 'NOIP 提高组', '排序']
---
# [NOIP 1998 提高组] 拼数
## 题目描述

设有 $n$ 个正整数 $a_1 \dots a_n$，将它们联接成一排，相邻数字首尾相接，组成一个最大的整数。

## 输入格式

第一行有一个整数，表示数字个数 $n$。

第二行有 $n$ 个整数，表示给出的 $n$ 个整数 $a_i$。
## 输出格式

一个正整数，表示最大的整数

## 样例

### 样例输入 #1
```
3
13 312 343

```
### 样例输出 #1
```
34331213

```
### 样例输入 #2
```
4
7 13 4 246
```
### 样例输出 #2
```
7424613
```
## 提示

对于全部的测试点，保证 $1 \leq n \leq 20$，$1 \leq a_i \leq 10^9$。

NOIP1998 提高组 第二题


---

---
title: "[NOIP 1999 提高组] 旅行家的预算"
layout: "post"
diff: 普及/提高-
pid: P1016
tag: ['贪心', '1999', '递归', 'NOIP 普及组', 'NOIP 提高组']
---
# [NOIP 1999 提高组] 旅行家的预算
## 题目描述

一个旅行家想驾驶汽车以最少的费用从一个城市到另一个城市（假设出发时油箱是空的）。给定两个城市之间的距离 $D_1$、汽车油箱的容量 $C$（以升为单位）、每升汽油能行驶的距离 $D_2$、出发点每升汽油价格$P$和沿途油站数 $N$（$N$ 可以为零），油站 $i$ 离出发点的距离 $D_i$、每升汽油价格 $P_i$（$i=1,2,…,N$）。计算结果四舍五入至小数点后两位。如果无法到达目的地，则输出 `No Solution`。

## 输入格式

第一行，$D_1$，$C$，$D_2$，$P$，$N$。

接下来有 $N$ 行。

第 $i+1$ 行，两个数字，油站 $i$ 离出发点的距离 $D_i$ 和每升汽油价格 $P_i$。

## 输出格式

所需最小费用，计算结果四舍五入至小数点后两位。如果无法到达目的地，则输出 `No Solution`。

## 样例

### 样例输入 #1
```
275.6 11.9 27.4 2.8 2
102.0 2.9
220.0 2.2

```
### 样例输出 #1
```
26.95

```
## 提示

$N \le 6$，其余数字 $ \le 500$。

NOIP1999 普及组第三题、提高组第三题


---

---
title: "[NOIP 2000 提高组] 单词接龙"
layout: "post"
diff: 普及/提高-
pid: P1019
tag: ['字符串', '搜索', '2000', 'NOIP 提高组']
---
# [NOIP 2000 提高组] 单词接龙
## 题目背景

注意：本题为上古 NOIP 原题，不保证存在靠谱的做法能通过该数据范围下的所有数据。

本题为搜索题，本题不接受 hack 数据。[关于此类题目的详细内容](https://www.luogu.com.cn/paste/isdgwj5l)

NOIP2000 提高组 T3
## 题目描述

单词接龙是一个与我们经常玩的成语接龙相类似的游戏，现在我们已知一组单词，且给定一个开头的字母，要求出以这个字母开头的最长的“龙”（每个单词都最多在“龙”中出现两次），在两个单词相连时，其重合部分合为一部分，例如 `beast` 和 `astonish`，如果接成一条龙则变为 `beastonish`，另外相邻的两部分不能存在包含关系，例如 `at` 和 `atide` 间不能相连。

## 输入格式

输入的第一行为一个单独的整数 $n$ 表示单词数，以下 $n$ 行每行有一个单词，输入的最后一行为一个单个字符，表示“龙”开头的字母。你可以假定以此字母开头的“龙”一定存在。

## 输出格式

只需输出以此字母开头的最长的“龙”的长度。

## 样例

### 样例输入 #1
```
5
at
touch
cheat
choose
tact
a

```
### 样例输出 #1
```
23

```
## 提示

样例解释：连成的“龙”为 `atoucheatactactouchoose`。

$n \le 20$。


---

---
title: "[NOIP 1999 提高组] 导弹拦截"
layout: "post"
diff: 普及/提高-
pid: P1020
tag: ['动态规划 DP', '贪心', '1999', '二分', 'NOIP 提高组', 'Special Judge', '线性 DP']
---
# [NOIP 1999 提高组] 导弹拦截
## 题目描述

某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是这种导弹拦截系统有一个缺陷：虽然它的第一发炮弹能够到达任意的高度，但是以后每一发炮弹都不能高于前一发的高度。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在试用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。

   
输入导弹依次飞来的高度，计算这套系统最多能拦截多少导弹，如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。

## 输入格式

一行，若干个整数，中间由空格隔开。
## 输出格式

两行，每行一个整数，第一个数字表示这套系统最多能拦截多少导弹，第二个数字表示如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。

## 样例

### 样例输入 #1
```
389 207 155 300 299 170 158 65
```
### 样例输出 #1
```
6
2

```
## 提示

对于前 $50\%$ 数据（NOIP 原题数据），满足导弹的个数不超过 $10^4$ 个。该部分数据总分共 $100$ 分。可使用$\mathcal O(n^2)$ 做法通过。  
对于后 $50\%$ 的数据，满足导弹的个数不超过 $10^5$ 个。该部分数据总分也为 $100$ 分。请使用 $\mathcal O(n\log n)$ 做法通过。

对于全部数据，满足导弹的高度为正整数，且不超过 $5\times 10^4$。


此外本题开启 spj，每点两问，按问给分。

NOIP1999 提高组 第一题

---

$\text{upd 2022.8.24}$：新增加一组 Hack 数据。


---

---
title: "[NOIP 2000 普及组] 计算器的改良"
layout: "post"
diff: 普及/提高-
pid: P1022
tag: ['模拟', '字符串', '数学', '2000', 'NOIP 普及组']
---
# [NOIP 2000 普及组] 计算器的改良
## 题目背景

NCL 是一家专门从事计算器改良与升级的实验室，最近该实验室收到了某公司所委托的一个任务：需要在该公司某型号的计算器上加上解一元一次方程的功能。实验室将这个任务交给了一个刚进入的新手 ZL 先生。

## 题目描述

为了很好的完成这个任务，ZL 先生首先研究了一些一元一次方程的实例：

- $4+3x=8$。
- $6a-5+1=2-2a$。
- $-5+12y=0$。

ZL 先生被主管告之，在计算器上键入的一个一元一次方程中，只包含整数、小写字母及 `+`、`-`、`=` 这三个数学符号（当然，符号“`-`”既可作减号，也可作负号）。方程中并没有括号，也没有除号，方程中的字母表示未知数。

你可假设对键入的方程的正确性的判断是由另一个程序员在做，或者说可认为键入的一元一次方程均为合法的，且有唯一实数解。

## 输入格式

一个一元一次方程。

## 输出格式

解方程的结果（精确至小数点后三位）。

## 样例

### 样例输入 #1
```
6a-5+1=2-2a

```
### 样例输出 #1
```
a=0.750
```


---

---
title: "[NOIP 2000 普及组] 税收与补贴问题"
layout: "post"
diff: 普及/提高-
pid: P1023
tag: ['数学', '2000', 'NOIP 普及组', '枚举']
---
# [NOIP 2000 普及组] 税收与补贴问题
## 题目背景

每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）

## 题目描述

你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。

- 总利润 $=$ 单位商品利润 $\times$ 销量
- 单位商品利润 $=$ 单位商品价格 $-$ 单位商品成本（减去税金 或者 加上补贴）

## 输入格式

输入的第一行为政府对某种商品的预期价；

 第二行有两个整数，第一个整数为商品成本，第二个整数为以成本价销售时的销售量；
 
 接下来若干行，每行都有两个整数，第一个为某价位时的单价，第二个为此时的销量，以一行 `-1 -1` 表示所有已知价位及对应的销量输入完毕；
 
 输入的最后一行为一个单独的整数表示在已知的最高单价外每升高一块钱将减少的销量。

## 输出格式

输出有两种情况：若在政府预期价上能得到最大总利润，则输出一个单独的整数，数的正负表示是补贴还是收税，数的大小表示补贴或收税的金额最小值。若有多解，取绝对值最小的输出。

如在政府预期价上不能得到最大总利润，则输出 `NO SOLUTION`。

## 样例

### 样例输入 #1
```
31
28 130
30 120
31 110
-1  -1
15
```
### 样例输出 #1
```
4

```
## 提示

### 数据范围及约定

保证输入的所有数字均小于 $10^5$。

### 样例解释（2023/6/22 更新）

如下图所示是输入样例所对应的价格变化图，横轴表示销售价格，纵轴表示销量。

![](https://cdn.luogu.com.cn/upload/image_hosting/21mhtm5i.png)

根据题意，$28$ 元是商品的成本。销售价格不应该低于 $28$ 元；当销售价格大于给出的价格的最大值 $31$ 元后，按照售价每提高一元，销量降低 $15$ 计算，例如当售价为 $33$ 元时，销量为 $110-15\times (33-31)=80$。在给出来的价位之间，销量呈线性变化。

当政府给该商品补贴 $4$ 元后，企业将该商品定价为 $31$ 元时，取得的利润为 $31-28+4=7$ 元，销量为 $110$ 件，总利润为 $7\times 110=770$ 元，是企业在所有定价下能够取得的最大的总利润。此时企业的售价为政府的期望售价，因此是一个合法方案。


---

---
title: "[NOIP 2001 提高组] 数的划分"
layout: "post"
diff: 普及/提高-
pid: P1025
tag: ['搜索', '递推', '2001', 'NOIP 提高组', '剪枝']
---
# [NOIP 2001 提高组] 数的划分
## 题目描述

将整数 $n$ 分成 $k$ 份，且每份不能为空，任意两个方案不相同（不考虑顺序）。

例如：$n=7$，$k=3$，下面三种分法被认为是相同的。

$1,1,5$;   
$1,5,1$;   
$5,1,1$.

问有多少种不同的分法。

## 输入格式

$n,k$ （$6<n \le 200$，$2  \le k  \le  6$）

## 输出格式

$1$ 个整数，即不同的分法。

## 样例

### 样例输入 #1
```
7 3

```
### 样例输出 #1
```
4

```
## 提示

四种分法为：  
$1,1,5$;  
$1,2,4$;  
$1,3,3$;  
$2,2,3$.

**【题目来源】**

NOIP 2001 提高组第二题


---

---
title: "[NOIP 2001 提高组] 统计单词个数"
layout: "post"
diff: 普及/提高-
pid: P1026
tag: ['字符串', '动态规划 DP', '2001', 'NOIP 提高组', '枚举']
---
# [NOIP 2001 提高组] 统计单词个数
## 题目描述

给出一个长度不超过 $200$ 的由小写英文字母组成的字母串（该字串以每行 $20$ 个字母的方式输入，且保证每行一定为 $20$ 个）。要求将此字母串分成
 $k$ 份，且每份中包含的单词个数加起来总数最大。  

每份中包含的单词可以部分重叠。当选用一个单词之后，其第一个字母不能再用。例如字符串 `this` 中可包含 `this` 和 `is`，选用 `this` 之后就不能包含
 `th`。

单词在给出的一个不超过 $6$ 个单词的字典中。

要求输出最大的个数。

## 输入格式

每组的第一行有两个正整数 $p,k$。
$p$ 表示字串的行数，$k$ 表示分为 $k$ 个部分。

接下来的 $p$ 行，每行均有 $20$ 个字符。

再接下来有一个正整数 $s$，表示字典中单词个数。
接下来的 $s$ 行，每行均有一个单词。

## 输出格式

$1$个整数，分别对应每组测试数据的相应结果。

## 样例

### 样例输入 #1
```
1 3
thisisabookyouareaoh
4
is
a
ok
sab

```
### 样例输出 #1
```
7

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$2 \le k \le 40$，$1 \le s \le 6$。

【样例解释】
划分方案为 this / isabookyoua / reaoh

**【题目来源】**

NOIP 2001 提高组第三题


---

---
title: "[NOIP 2002 提高组] 自由落体"
layout: "post"
diff: 普及/提高-
pid: P1033
tag: ['数学', '2002', 'NOIP 提高组']
---
# [NOIP 2002 提高组] 自由落体
## 题目描述

在高为 $H$ 的天花板上有 $n$ 个小球，体积不计，位置分别为 $0,1,2,\cdots,n-1$。在地面上有一个小车（长为 $L$，高为 $K$，距原点距离为 $S_1$）。已知小球下落距离计算公式为 $d=0.5 \times g \times (t^2)$，其中 $g=10$，$t$ 为下落时间。地面上的小车以速度 $V$ 前进。

如下图：

![](https://cdn.luogu.com.cn/upload/image_hosting/1d177dhg.png)

小车与所有小球同时开始运动，当小球距小车的距离 $\le  0.0001$ (感谢 Silver_N 修正) 时，即认为小球被小车接受（小球落到地面后不能被接受）。

请你计算出小车能接受到多少个小球。

## 输入格式

$H,S_1,V,L,K,n$（$1 \le H,S_1,V,L,K,n \le 100000$）
## 输出格式

小车能接受到的小球个数。
## 样例

### 样例输入 #1
```
5.0 9.0 5.0 2.5 1.8 5

```
### 样例输出 #1
```
1

```
## 提示

当球落入车的尾部时，算作落入车内。

**【题目来源】**

NOIP 2002 提高组第三题


---

---
title: "[NOIP 2002 普及组] 产生数"
layout: "post"
diff: 普及/提高-
pid: P1037
tag: ['高精度', '2002', 'NOIP 普及组', '深度优先搜索 DFS']
---
# [NOIP 2002 普及组] 产生数
## 题目描述

给出一个整数 $n$ 和 $k$ 个变换规则。

规则：
- 一位数可变换成另一个一位数。
- 规则的右部不能为零。

例如：$n=234,k=2$。有以下两个规则：

- $2\longrightarrow 5$。  
- $3\longrightarrow 6$。 

上面的整数 $234$ 经过变换后可能产生出的整数为（包括原数）:

- $234$。
- $534$。
- $264$。
- $564$。

共 $4$ 种不同的产生数。

现在给出一个整数 $n$ 和 $k$ 个规则。求出经过任意次的变换（$0$ 次或多次），能产生出多少个不同整数。

仅要求输出个数。
## 输入格式

第一行两个整数 $n,k$，含义如题面所示。

接下来 $k$ 行，每行两个整数 $x_i,y_i$，表示每条规则。
## 输出格式

共一行，输出能生成的数字个数。

## 样例

### 样例输入 #1
```
234 2
2 5
3 6

```
### 样例输出 #1
```
4

```
## 提示

对于 $100\%$ 数据，满足 $n \lt 10^{30}$，$k \le 15$。

**【题目来源】**

NOIP 2002 普及组第三题


---

---
title: "[NOIP 2003 普及组] 麦森数"
layout: "post"
diff: 普及/提高-
pid: P1045
tag: ['数学', '高精度', '2003', 'NOIP 普及组']
---
# [NOIP 2003 普及组] 麦森数
## 题目描述

形如 $2^{P}-1$ 的素数称为麦森数，这时 $P$ 一定也是个素数。但反过来不一定，即如果 $P$ 是个素数，$2^{P}-1$ 不一定也是素数。到 1998 年底，人们已找到了 37 个麦森数。最大的一个是 $P=3021377$，它有 909526 位。麦森数有许多重要应用，它与完全数密切相关。

任务：输入 $P(1000<P<3100000)$，计算 $2^{P}-1$ 的位数和最后 $500$ 位数字（用十进制高精度数表示）

## 输入格式

文件中只包含一个整数 $P(1000<P<3100000)$

## 输出格式

第一行：十进制高精度数 $2^{P}-1$ 的位数。

第 $2\sim 11$ 行：十进制高精度数 $2^{P}-1$ 的最后 $500$ 位数字。（每行输出 $50$ 位，共输出 $10$ 行，不足 $500$ 位时高位补 $0$）

不必验证 $2^{P}-1$ 与 $P$ 是否为素数。

## 样例

### 样例输入 #1
```
1279

```
### 样例输出 #1
```
386
00000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000
00000000000000104079321946643990819252403273640855
38615262247266704805319112350403608059673360298012
23944173232418484242161395428100779138356624832346
49081399066056773207629241295093892203457731833496
61583550472959420547689811211693677147548478866962
50138443826029173234888531116082853841658502825560
46662248318909188018470682222031405210266984354887
32958028878050869736186900714720710555703168729087

```
## 提示

**【题目来源】**

NOIP 2003 普及组第四题


---

---
title: "[NOIP 2008 普及组] 排座椅"
layout: "post"
diff: 普及/提高-
pid: P1056
tag: ['贪心', '2008', 'NOIP 普及组', '排序']
---
# [NOIP 2008 普及组] 排座椅
## 题目描述

上课的时候总会有一些同学和前后左右的人交头接耳，这是令小学班主任十分头疼的一件事情。不过，班主任小雪发现了一些有趣的现象，当同学们的座次确定下来之后，只有有限的 $D$ 对同学上课时会交头接耳。

同学们在教室中坐成了 $M$ 行 $N$ 列，坐在第 $i$ 行第 $j$ 列的同学的位置是 $(i,j)$，为了方便同学们进出，在教室中设置了 $K$ 条横向的通道，$L$ 条纵向的通道。

于是，聪明的小雪想到了一个办法，或许可以减少上课时学生交头接耳的问题：她打算重新摆放桌椅，改变同学们桌椅间通道的位置，因为如果一条通道隔开了 $2$ 个会交头接耳的同学，那么他们就不会交头接耳了。

请你帮忙给小雪编写一个程序，给出最好的通道划分方案。在该方案下，上课时交头接耳的学生的对数最少。

## 输入格式

第一行，有 $5$ 个用空格隔开的整数，分别是 $M,N,K,L,D(2 \le N,M \le 1000,0 \le K<M,0 \le L<N,D \le 2000)$。

接下来的 $D$ 行，每行有 $4$ 个用空格隔开的整数。第 $i$ 行的 $4$ 个整数 $X_i,Y_i,P_i,Q_i$，表示坐在位置 $(X_i,Y_i)$ 与 $(P_i,Q_i)$ 的两个同学会交头接耳（输入保证他们前后相邻或者左右相邻）。

输入数据保证最优方案的唯一性。

## 输出格式

共两行。  
第一行包含 $K$ 个整数 $a_1,a_2,\ldots,a_K$，表示第 $a_1$ 行和 $a_1+1$ 行之间、第 $a_2$ 行和 $a_2+1$ 行之间、…、第 $a_K$ 行和第 $a_K+1$ 行之间要开辟通道，其中 $a_i< a_{i+1}$，每两个整数之间用空格隔开（行尾没有空格）。

第二行包含 $L$ 个整数 $b_1,b_2,\ldots,b_L$，表示第 $b_1$ 列和 $b_1+1$ 列之间、第 $b_2$ 列和 $b_2+1$ 列之间、…、第 $b_L$ 列和第 $b_L+1$ 列之间要开辟通道，其中$b_i< b_{i+1}$，每两个整数之间用空格隔开（列尾没有空格）。

## 样例

### 样例输入 #1
```
4 5 1 2 3
4 2 4 3
2 3 3 3
2 5 2 4

```
### 样例输出 #1
```
2
2 4

```
## 提示

![](https://cdn.luogu.com.cn/upload/image_hosting/0z0p5x1i.png)

上图中用符号\*、※、+标出了 $3$ 对会交头接耳的学生的位置，图中 $3$ 条粗线的位置表示通道，图示的通道划分方案是唯一的最佳方案。

2008 年普及组第二题



---

---
title: "[NOIP 2008 普及组] 传球游戏"
layout: "post"
diff: 普及/提高-
pid: P1057
tag: ['模拟', '动态规划 DP', '递推', '2008', 'NOIP 普及组']
---
# [NOIP 2008 普及组] 传球游戏
## 题目描述

上体育课的时候，小蛮的老师经常带着同学们一起做游戏。这次，老师带着同学们一起做传球游戏。

游戏规则是这样的：$n$ 个同学站成一个圆圈，其中的一个同学手里拿着一个球，当老师吹哨子时开始传球，每个同学可以把球传给自己左右的两个同学中的一个（左右任意），当老师再次吹哨子时，传球停止，此时，拿着球没有传出去的那个同学就是败者，要给大家表演一个节目。

聪明的小蛮提出一个有趣的问题：有多少种不同的传球方法可以使得从小蛮手里开始传的球，传了 $m$ 次以后，又回到小蛮手里。两种传球方法被视作不同的方法，当且仅当这两种方法中，接到球的同学按接球顺序组成的序列是不同的。比如有三个同学 $1$ 号、$2$ 号、$3$ 号，并假设小蛮为 $1$ 号，球传了 $3$ 次回到小蛮手里的方式有 $1 \rightarrow 2 \rightarrow 3 \rightarrow 1$ 和 $1 \rightarrow 3 \rightarrow 2 \rightarrow 1$，共 $2$ 种。

## 输入格式

一行，有两个用空格隔开的整数 $n,m(3 \le n \le 30,1 \le m \le 30)$。

## 输出格式

$1$ 个整数，表示符合题意的方法数。

## 样例

### 样例输入 #1
```
3 3
```
### 样例输出 #1
```
2
```
## 提示

### 数据范围及约定

- 对于 $40\%$ 的数据，满足：$3 \le n \le 30,1 \le m \le 20$；
- 对于 $100\%$ 的数据，满足：$3 \le n \le 30,1 \le m \le 30$。

2008普及组第三题



---

---
title: "[NOIP 2008 普及组] 立体图"
layout: "post"
diff: 普及/提高-
pid: P1058
tag: ['模拟', '字符串', '2008', 'NOIP 普及组', '枚举']
---
# [NOIP 2008 普及组] 立体图
## 题目描述

小渊是个聪明的孩子，他经常会给周围的小朋友们讲些自己认为有趣的内容。最近，他准备给小朋友们讲解立体图，请你帮他画出立体图。

小渊有一块面积为 $m \times n$ 的矩形区域，上面有 $m \times n$ 个边长为 $1$ 的格子，每个格子上堆了一些同样大小的积木（积木的长宽高都是 $1$），小渊想请你打印出这些格子的立体图。我们定义每个积木为如下格式，并且不会做任何翻转旋转，只会严格以这一种形式摆放：

$$
\def\arraystretch{1e-10}
\begin{aligned}
&\verb!  +---+!\\
&\verb! /   /|!\\
&\verb!+---+ |!\quad\textsf{高}\\
&\verb!|   | +!\\
&\verb!|   |/ !\quad\textsf{宽}\\
&\verb!+---+  !\\
& \quad\textsf{长}
\end{aligned}$$


每个顶点用 $1$ 个加号 `+` 表示，长用 $3$ 个 `-` 表示，宽用 $1$ 个 `/`，高用两个 `|` 表示。字符 `+`，`-`，`/`，`|` 的 ASCII 码分别为 $43$，$45$，$47$，$124$。字符 `.`（ASCII 码 $46$）需要作为背景输出，即立体图里的空白部分需要用 `.` 来代替。立体图的画法如下面的规则：

若两块积木左右相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+---+!\\
\verb!./   /   /|!\\
\verb!+---+---+ |!\\
\verb!|   |   | +!\\
\verb!|   |   |/.!\\
\verb!+---+---+..!\\
\end{aligned}
$$

若两块积木上下相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+!\\
\verb!./   /|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/.!\\
\verb!+---+..!\\
\end{aligned}
$$

若两块积木前后相邻，图示为：

$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!....+---+!\\
\verb!.../   /|!\\
\verb!..+---+ |!\\
\verb!./   /| +!\\
\verb!+---+ |/.!\\
\verb!|   | +..!\\
\verb!|   |/...!\\
\verb!+---+....!\\
\end{aligned}
$$

立体图中，定义位于第 $(m,1)$ 的格子（即第 $m$ 行第 $1$ 列的格子）上面自底向上的第一块积木（即最下面的一块积木）的左下角顶点为整张图最左下角的点。

## 输入格式

第一行有用空格隔开的$2$个整数 $m$ 和 $n$，表示有 $m \times n$ 个格子 $(1 \le m,n \le 50)$。

接下来的 $m$ 行，是一个 $m \times n$ 的矩阵，每行有 $n$ 个用空格隔开的整数，其中第 $i$ 行第 $j$ 列上的整数表示第 $i$ 行第 $j$ 列的格子上摞有多少个积木（$1 \le $ 每个格子上的积木数 $ \le 100$）。

## 输出格式

输出包含题目要求的立体图，是一个 $K$ 行 $L$ 列的字符串矩阵，其中 $K$ 和 $L$ 表示最少需要 $K$ 行 $L$ 列才能按规定输出立体图。


## 样例

### 样例输入 #1
```
3 4
2 2 1 2
2 2 1 1
3 2 1 2

```
### 样例输出 #1
```
......+---+---+...+---+
..+---+  /   /|../   /|
./   /|-+---+ |.+---+ |
+---+ |/   /| +-|   | +
|   | +---+ |/+---+ |/|
|   |/   /| +/   /|-+ |
+---+---+ |/+---+ |/| +
|   |   | +-|   | + |/.
|   |   |/  |   |/| +..
+---+---+---+---+ |/...
|   |   |   |   | +....
|   |   |   |   |/.....
+---+---+---+---+......
```
## 提示

NOIP2008普及组第四题



---

---
title: "[NOIP 2006 普及组] Jam 的计数法"
layout: "post"
diff: 普及/提高-
pid: P1061
tag: ['模拟', '2006', 'NOIP 普及组']
---
# [NOIP 2006 普及组] Jam 的计数法
## 题目描述

Jam 是个喜欢标新立异的科学怪人。他不使用阿拉伯数字计数，而是使用小写英文字母计数，他觉得这样做，会使世界更加丰富多彩。

在他的计数法中，每个数字的位数都是相同的（使用相同个数的字母），英文字母按原先的顺序，排在前面的字母小于排在它后面的字母。我们把这样的“数字”称为 Jam 数字。在 Jam 数字中，每个字母互不相同，而且从左到右是严格递增的。每次，Jam 还指定使用字母的范围，例如，从 $2\sim 10$，表示只能使用 ${b,c,d,e,f,g,h,i,j}$ 这些字母。如果再规定位数为 $5$，那么，紧接在 Jam 数字 $\texttt{bdfij}$ 之后的数字应该是 $\texttt{bdghi}$。（如果我们用 $U$、$V$ 依次表示 Jam 数字 $\texttt{bdfij}$ 与 $\texttt{bdghi}$，则 $U<V$，且不存在 Jam 数字 $P$，使 $U<P<V$）。

你的任务是：对于从文件读入的一个 Jam 数字，按顺序输出紧接在后面的 $5$ 个 Jam 数字，如果后面没有那么多 Jam 数字，那么有几个就输出几个。
## 输入格式

共 $2$ 行。

第 $1$ 行为 $3$ 个正整数 $s, t, w$，用一个空格隔开。

（其中 $s$ 为所使用的最小的字母的序号，$t$ 为所使用的最大的字母的序号。$w$ 为数字的位数，这 $3$ 个数满足：$1\le s<T\le 26,2\le w\le t-s$）

第 $2$ 行为具有 $w$ 个小写字母的字符串，为一个符合要求的 Jam 数字。

所给的数据都是正确的，不必验证。
## 输出格式

最多为 $5$ 行，为紧接在输入的 Jam 数字后面的 $5$ 个 Jam 数字，如果后面没有那么多 Jam 数字，那么有几个就输出几个。每行只输出一个 Jam 数字，是由 $w$ 个小写字母组成的字符串，不要有多余的空格。
## 样例

### 样例输入 #1
```
2 10 5
bdfij

```
### 样例输出 #1
```
bdghi
bdghj
bdgij
bdhij
befgh

```
## 提示

NOIP 2006 普及组 第三题



---

---
title: "[NOIP 2006 提高组] 作业调度方案"
layout: "post"
diff: 普及/提高-
pid: P1065
tag: ['模拟', '2006', 'NOIP 提高组']
---
# [NOIP 2006 提高组] 作业调度方案
## 题目描述

我们现在要利用 $m$ 台机器加工 $n$ 个工件，每个工件都有 $m$ 道工序，每道工序都在不同的指定的机器上完成。每个工件的每道工序都有指定的加工时间。

每个工件的每个工序称为一个操作，我们用记号 `j-k` 表示一个操作，其中 $j$ 为 $1$ 到 $n$ 中的某个数字，为工件号；$k$ 为 $1$ 到 $m$ 中的某个数字，为工序号，例如 `2-4` 表示第 $2$ 个工件第 $4$ 道工序的这个操作。在本题中，我们还给定对于各操作的一个安排顺序。

例如，当 $n=3,m=2$ 时，`1-1,1-2,2-1,3-1,3-2,2-2` 就是一个给定的安排顺序，即先安排第 $1$ 个工件的第 $1$ 个工序，再安排第 $1$ 个工件的第 $2$ 个工序，然后再安排第 $2$ 个工件的第 $1$ 个工序，等等。

一方面，每个操作的安排都要满足以下的两个约束条件。

1. 对同一个工件，每道工序必须在它前面的工序完成后才能开始；

2. 同一时刻每一台机器至多只能加工一个工件。

另一方面，在安排后面的操作时，不能改动前面已安排的操作的工作状态。

由于同一工件都是按工序的顺序安排的，因此，只按原顺序给出工件号，仍可得到同样的安排顺序，于是，在输入数据中，我们将这个安排顺序简写为 `1 1 2 3 3 2`。

还要注意，“安排顺序”只要求按照给定的顺序安排每个操作。不一定是各机器上的实际操作顺序。在具体实施时，有可能排在后面的某个操作比前面的某个操作先完成。

例如，取 $n=3,m=2$，已知数据如下（机器号/加工时间）：


工件号 |工序 1 | 工序 2
-|-|-
$1$  |  $1/3$  |  $2/2$
$2$  |  $1/2$  |  $2/5$
$3$  |  $2/2$  |  $1/4$

则对于安排顺序 `1 1 2 3 3 2`，下图中的两个实施方案都是正确的。但所需要的总时间分别是 $10$ 与 $12$。

方案 1，用时 $10$：

|      时间       |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |  10   |
| :-------------: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| 机器 1 执行工序 | `1-1` | `1-1` | `1-1` | `2-1` | `2-1` | `3-2` | `3-2` | `3-2` | `3-2` |  无   |
| 机器 2 执行工序 | `3-1` | `3-1` |  无   | `1-2` | `1-2` | `2-2` | `2-2` | `2-2` | `2-2` | `2-2` |

方案 2，用时 $12$：

|      时间       |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |  10   |  11   |  12  |
| :-------------: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| 机器 1 执行工序 | `1-1` | `1-1` | `1-1` | `2-1` | `2-1` |   无   |  无   | `3-2` | `3-2` | `3-2` | `3-2` |  无   |
| 机器 2 执行工序 | 无 | 无 |  无   | `1-2` | `1-2` | `3-1` | `3-1` | `2-2` | `2-2` | `2-2` | `2-2` | `2-2` |

当一个操作插入到某台机器的某个空档时（机器上最后的尚未安排操作的部分也可以看作一个空档），可以靠前插入，也可以靠后或居中插入。为了使问题简单一些，我们约定：在保证约束条件 $(1.)(2.)$ 的条件下，尽量靠前插入。并且，我们还约定，如果有多个空档可以插入，就在保证约束条件 $(1.)(2.)$ 的条件下，插入到最前面的一个空档。于是，在这些约定下，上例中的方案一是正确的，而方案二是不正确的。

显然，在这些约定下，对于给定的安排顺序，符合该安排顺序的实施方案是唯一的，请你计算出该方案完成全部任务所需的总时间。

## 输入格式

第 $1$ 行为两个正整数 $m$, $n$，用一个空格隔开，
其中 $m(<20)$ 表示机器数，$n(<20)$ 表示工件数。

第 $2$ 行：$m \times n$ 个用空格隔开的数，为给定的安排顺序。

接下来的 $2n$ 行，每行都是用空格隔开的 $m$ 个正整数，每个数不超过 $20$。

其中前 $n$ 行依次表示每个工件的每个工序所使用的机器号，第 $1$ 个数为第 $1$ 个工序的机器号，第 $2$ 个数为第 $2$ 个工序机器号，等等。

后 $n$ 行依次表示每个工件的每个工序的加工时间。

可以保证，以上各数据都是正确的，不必检验。

## 输出格式

$1$ 个正整数，为最少的加工时间。

## 样例

### 样例输入 #1
```
2 3
1 1 2 3 3 2
1 2 
1 2 
2 1
3 2 
2 5 
2 4

```
### 样例输出 #1
```
10
```
## 提示

NOIP 2006 提高组 第三题



---

---
title: "[NOISG 2024 Prelim] School Photo"
layout: "post"
diff: 普及/提高-
pid: P10710
tag: ['2024', '双指针 two-pointer', 'NOISG（新加坡）']
---
# [NOISG 2024 Prelim] School Photo
## 题目背景

翻译自 [NOI SG 2024 Prelim C.School Photo](https://github.com/noisg/noi-2024-prelim)。
## 题目描述

Zane 是 NOI 学校的校长。NOI 学校有 $n$ 个班，每个班有 $s$ 名同学。第 $i$ 个班中的第 $j$ 名同学的身高是 $a_{i,j}$。

现在 Zane 想从每个班上选出一名同学拍照，使得这 $n$ 名同学中最高的同学和最低的同学的身高差最小。

请你输出这个最小值。
## 输入格式

第一行，两个整数 $n,s$；

接下来 $n$ 行，每行 $s$ 个整数，表示 $a$。
## 输出格式

一行一个整数表示答案。
## 样例

### 样例输入 #1
```
2 3
2 1 8
5 4 7

```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
3 3
3 1 4
2 7 18
9 8 10
```
### 样例输出 #2
```
4
```
## 提示

### 【样例 #2 解释】

选择 $a_{1,3},a_{2,2},a_{3,2}$，答案为 $8-4=4$。

### 【数据范围】

|$\text{Subtask}$|分值|特殊性质|
|:-:|:-:|:-:|
|$0$|$0$|样例|
|$1$|$11$|$n=2$|
|$2$|$22$|$n,s\le100$|
|$3$|$9$|$n,s\le250$|
|$4$|$33$|$n,s\le500$|
|$5$|$25$|无|

对于 $100\%$ 的数据，$1\le n,s \le 1000,1\le a_{i,j} \le 10^9$。


---

---
title: "[NOIP 2012 普及组] 寻宝"
layout: "post"
diff: 普及/提高-
pid: P1076
tag: ['模拟', '2012', 'NOIP 普及组']
---
# [NOIP 2012 普及组] 寻宝
## 题目描述

传说很遥远的藏宝楼顶层藏着诱人的宝藏。小明历尽千辛万苦终于找到传说中的这个藏宝楼，藏宝楼的门口竖着一个木板，上面写有几个大字：寻宝说明书。说明书的内容如下：

藏宝楼共有 $N+1$ 层，最上面一层是顶层，顶层有一个房间里面藏着宝藏。除了顶层外，藏宝楼另有 $N$ 层，每层 $M$ 个房间，这 $M$ 个房间围成一圈并按逆时针方向依次编号为 $0,…,M-1$。其中一些房间有通往上一层的楼梯，每层楼的楼梯设计可能不同。每个房间里有一个指示牌，指示牌上有一个数字$x$，表示从这个房间开始按逆时针方向选择第 $x$ 个有楼梯的房间（假定该房间的编号为 $k$），从该房间上楼，上楼后到达上一层的 $k$ 号房间。比如当前房间的指示牌上写着 $2$，则按逆时针方向开始尝试，找到第 $2$ 个有楼梯的房间，从该房间上楼。如果当前房间本身就有楼梯通向上层，该房间作为第一个有楼梯的房间。

寻宝说明书的最后用红色大号字体写着：“寻宝须知：帮助你找到每层上楼房间的指示牌上的数字（即每层第一个进入的房间内指示牌上的数字）总和为打开宝箱的密钥”。

请帮助小明算出这个打开宝箱的密钥。

## 输入格式

第一行有两个整数 $N$ 和 $M$，之间用一个空格隔开。$N$ 表示除了顶层外藏宝楼共 $N$ 层楼，$M$ 表示除顶层外每层楼有 $M$ 个房间。

接下来 $N \times M$ 行，每行两个整数，之间用一个空格隔开，每行描述一个房间内的情况，其中第 $(i-1) \times M+j$ 行表示第 $i$ 层 $j-1$ 号房间的情况（$i=1,2,…, N$；$j=1,2,…,M$）。第一个整数表示该房间是否有楼梯通往上一层（$0$ 表示没有，$1$ 表示有），第二个整数表示指示牌上的数字。注意，从$j$号房间的楼梯爬到上一层到达的房间一定也是 $j$ 号房间。

最后一行，一个整数，表示小明从藏宝楼底层的几号房间进入开始寻宝（注：房间编号从 $0$ 开始）。

## 输出格式

一个整数，表示打开宝箱的密钥，这个数可能会很大，请输出对 $20123$ 取模的结果即可。

## 样例

### 样例输入 #1
```
2 3
1 2
0 3
1 4
0 1
1 5
1 2
1

```
### 样例输出 #1
```
5
```
## 提示

【数据范围】

对于 $50\%$ 数据，有$0<N≤1000,0<x≤10^4$；  
对于 $100\%$ 数据，有$0<N≤10000,0<M≤100,0<x≤10^6$。

NOIP 2012 普及组 第二题


---

---
title: "[NOIP 2012 普及组] 摆花"
layout: "post"
diff: 普及/提高-
pid: P1077
tag: ['模拟', '动态规划 DP', '2012', 'NOIP 普及组']
---
# [NOIP 2012 普及组] 摆花
## 题目描述

小明的花店新开张，为了吸引顾客，他想在花店的门口摆上一排花，共 $m$ 盆。通过调查顾客的喜好，小明列出了顾客最喜欢的 $n$ 种花，从 $1$ 到 $n$ 标号。为了在门口展出更多种花，规定第 $i$ 种花不能超过 $a_i$ 盆，摆花时同一种花放在一起，且不同种类的花需按标号的从小到大的顺序依次摆列。

试编程计算，一共有多少种不同的摆花方案。
## 输入格式

第一行包含两个正整数 $n$ 和 $m$，中间用一个空格隔开。

第二行有 $n$ 个整数，每两个整数之间用一个空格隔开，依次表示 $a_1,a_2, \cdots ,a_n$。
## 输出格式

一个整数，表示有多少种方案。注意：因为方案数可能很多，请输出方案数对 $10^6+7$ 取模的结果。
## 样例

### 样例输入 #1
```
2 4
3 2

```
### 样例输出 #1
```
2
```
## 提示

【数据范围】

对于 $20\%$ 数据，有 $0<n \le 8,0<m \le 8,0 \le a_i \le 8$。

对于 $50\%$ 数据，有 $0<n \le 20,0<m \le 20,0 \le a_i \le 20$。

对于 $100\%$ 数据，有 $0<n \le 100,0<m \le 100,0 \le a_i \le 100$。

NOIP 2012 普及组 第三题



---

---
title: "[NOIP 2012 提高组] 借教室"
layout: "post"
diff: 普及/提高-
pid: P1083
tag: ['2012', '二分', 'NOIP 提高组', '前缀和', '差分']
---
# [NOIP 2012 提高组] 借教室
## 题目描述

在大学期间，经常需要租借教室。大到院系举办活动，小到学习小组自习讨论，都需要向学校申请借教室。教室的大小功能不同，借教室人的身份不同，借教室的手续也不一样。

面对海量租借教室的信息，我们自然希望编程解决这个问题。

我们需要处理接下来 $n$ 天的借教室信息，其中第 $i$ 天学校有 $r_i$ 个教室可供租借。共有 $m$ 份订单，每份订单用三个正整数描述，分别为 $d_j,s_j,t_j$，表示某租借者需要从第 $s_j$ 天到第 $t_j$ 天租借教室（包括第 $s_j$ 天和第 $t_j$ 天），每天需要租借 $d_j$ 个教室。

我们假定，租借者对教室的大小、地点没有要求。即对于每份订单，我们只需要每天提供 $d_j$ 个教室，而它们具体是哪些教室，每天是否是相同的教室则不用考虑。

借教室的原则是先到先得，也就是说我们要按照订单的先后顺序依次为每份订单分配教室。如果在分配的过程中遇到一份订单无法完全满足，则需要停止教室的分配，通知当前申请人修改订单。这里的无法满足指从第 $s_j$ 天到第 $t_j$ 天中有至少一天剩余的教室数量不足 $d_j$ 个。

现在我们需要知道，是否会有订单无法完全满足。如果有，需要通知哪一个申请人修改订单。

## 输入格式

第一行包含两个正整数 $n,m$，表示天数和订单的数量。

第二行包含 $n$ 个正整数，其中第 $i$ 个数为 $r_i$，表示第 $i$ 天可用于租借的教室数量。

接下来有 $m$ 行，每行包含三个正整数 $d_j,s_j,t_j$，表示租借的数量，租借开始、结束分别在第几天。

每行相邻的两个数之间均用一个空格隔开。天数与订单均用从 $1$ 开始的整数编号。
## 输出格式

如果所有订单均可满足，则输出只有一行，包含一个整数 $0$。否则（订单无法完全满足）

输出两行，第一行输出一个负整数 $-1$，第二行输出需要修改订单的申请人编号。

## 样例

### 样例输入 #1
```
4 3 
2 5 4 3 
2 1 3 
3 2 4 
4 2 4
```
### 样例输出 #1
```
-1 
2
```
## 提示

【输入输出样例说明】

第 $1 $份订单满足后，$4 $天剩余的教室数分别为 $0,3,2,3$。第 $2$ 份订单要求第 $2 $天到第 $4$ 天每天提供 $3$ 个教室，而第 $3$ 天剩余的教室数为$ 2$，因此无法满足。分配停止，通知第 $2$ 个申请人修改订单。

【数据范围】

对于 $10\%$ 的数据，有 $1\le n,m\le 10$；

对于 $30\%$ 的数据，有 $1\le n,m\le 1000$；

对于 $70\%$ 的数据，有 $1 \le n,m \le 10^5$；

对于 $100\%$ 的数据，有 $1 \le n,m \le 10^6$，$0 \le r_i,d_j\le 10^9$，$1 \le s_j\le t_j\le n$。


NOIP 2012 提高组 第二天 第二题

2022.2.20 新增一组 hack 数据


---

---
title: "[NOIP 2004 提高组] 合并果子"
layout: "post"
diff: 普及/提高-
pid: P1090
tag: ['贪心', '2004', '堆', 'NOIP 提高组', '优先队列']
---
# [NOIP 2004 提高组] 合并果子
## 题目描述

在一个果园里，多多已经将所有的果子打了下来，而且按果子的不同种类分成了不同的堆。多多决定把所有的果子合成一堆。

每一次合并，多多可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过 $n-1$ 次合并之后， 就只剩下一堆了。多多在合并果子时总共消耗的体力等于每次合并所耗体力之和。

因为还要花大力气把这些果子搬回家，所以多多在合并果子时要尽可能地节省体力。假定每个果子重量都为 $1$ ，并且已知果子的种类 数和每种果子的数目，你的任务是设计出合并的次序方案，使多多耗费的体力最少，并输出这个最小的体力耗费值。

例如有 $3$ 种果子，数目依次为 $1$ ， $2$ ， $9$ 。可以先将 $1$ 、 $2$ 堆合并，新堆数目为 $3$ ，耗费体力为 $3$ 。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为 $12$ ，耗费体力为 $12$ 。所以多多总共耗费体力 $=3+12=15$ 。可以证明 $15$ 为最小的体力耗费值。
## 输入格式

共两行。  
第一行是一个整数 $n(1\leq n\leq 10000)$ ，表示果子的种类数。  

第二行包含 $n$ 个整数，用空格分隔，第 $i$ 个整数 $a_i(1\leq a_i\leq 20000)$ 是第 $i$ 种果子的数目。


## 输出格式

一个整数，也就是最小的体力耗费值。输入数据保证这个值小于 $2^{31}$ 。
## 样例

### 样例输入 #1
```
3 
1 2 9 

```
### 样例输出 #1
```
15

```
## 提示

对于 $30\%$ 的数据，保证有 $n \le 1000$：

对于 $50\%$ 的数据，保证有 $n \le 5000$；

对于全部的数据，保证有 $n \le 10000$。



---

---
title: "[NOIP 2004 提高组] 合唱队形"
layout: "post"
diff: 普及/提高-
pid: P1091
tag: ['动态规划 DP', '2004', '单调队列', 'NOIP 提高组', '线性 DP']
---
# [NOIP 2004 提高组] 合唱队形
## 题目描述

$n$ 位同学站成一排，音乐老师要请其中的 $n-k$ 位同学出列，使得剩下的 $k$ 位同学排成合唱队形。

合唱队形是指这样的一种队形：设 $k$ 位同学从左到右依次编号为 $1,2,$ … $,k$，他们的身高分别为 $t_1,t_2,$ … $,t_k$，则他们的身高满足 $t_1< \cdots <t_i>t_{i+1}>$ … $>t_k(1\le i\le k)$。

你的任务是，已知所有 $n$ 位同学的身高，计算最少需要几位同学出列，可以使得剩下的同学排成合唱队形。
## 输入格式

共二行。

第一行是一个整数 $n$（$2\le n\le100$），表示同学的总数。

第二行有 $n$ 个整数，用空格分隔，第 $i$ 个整数 $t_i$（$130\le t_i\le230$）是第 $i$ 位同学的身高（厘米）。
## 输出格式

一个整数，最少需要几位同学出列。

## 样例

### 样例输入 #1
```
8
186 186 150 200 160 130 197 220

```
### 样例输出 #1
```
4

```
## 提示

对于 $50\%$ 的数据，保证有 $n \le 20$。

对于全部的数据，保证有 $n \le 100$。



---

---
title: "[NOIP 2007 普及组] 守望者的逃离"
layout: "post"
diff: 普及/提高-
pid: P1095
tag: ['动态规划 DP', '贪心', '2007', 'NOIP 普及组']
---
# [NOIP 2007 普及组] 守望者的逃离
## 题目背景

NOIP2007 普及组 T3
## 题目描述

恶魔猎手尤迪安野心勃勃，他背叛了暗夜精灵，率领深藏在海底的娜迦族企图叛变。

守望者在与尤迪安的交锋中遭遇了围杀，被困在一个荒芜的大岛上。

为了杀死守望者，尤迪安开始对这个荒岛施咒，这座岛很快就会沉下去。到那时，岛上的所有人都会遇难。

守望者的跑步速度为 $17m/s$，以这样的速度是无法逃离荒岛的。庆幸的是守望者拥有闪烁法术，可在 $1s$ 内移动 $60m$，不过每次使用闪烁法术都会消耗魔法值 $10$ 点。守望者的魔法值恢复的速度为 $4$ 点每秒，只有处在原地休息状态时才能恢复。

现在已知守望者的魔法初值 $M$，他所在的初始位置与岛的出口之间的距离 $S$，岛沉没的时间 $T$。你的任务是写一个程序帮助守望者计算如何在最短的时间内逃离荒岛，若不能逃出，则输出守望者在剩下的时间内能走的最远距离。

注意：守望者跑步、闪烁或休息活动均以秒为单位，且每次活动的持续时间为整数秒。距离的单位为米。

## 输入格式

输入数据共一行三个非负整数，分别表示 $M$，$S$，$T$。

## 输出格式

输出数据共两行。

第一行一个字符串 $\texttt{Yes}$ 或 $\texttt{No}$，即守望者是否能逃离荒岛。

第二行包含一个整数。第一行为 $\texttt{Yes}$ 时表示守望者逃离荒岛的最短时间；第一行为 $\texttt{No}$ 时表示守望者能走的最远距离。

## 样例

### 样例输入 #1
```
39 200 4

```
### 样例输出 #1
```
No
197

```
### 样例输入 #2
```
36 255 10
```
### 样例输出 #2
```
Yes
6
```
## 提示

对于 $30\%$ 的数据，$1  \le  T   \le  10$，$ 1   \le   S   \le  100$；

对于 $50\%$ 的数据，$1   \le  T   \le   10^3$，$ 1   \le  S  \le   10^4$；

对于 $100\%$ 的数据，$1   \le   T   \le   3\times  10^5$，$0   \le   M   \le   10^3$，$ 1   \le  S   \le   10^8$。



---

---
title: "[NOIP 2007 普及组] Hanoi 双塔问题"
layout: "post"
diff: 普及/提高-
pid: P1096
tag: ['数学', '高精度', '递推', '2007', '递归', 'NOIP 普及组']
---
# [NOIP 2007 普及组] Hanoi 双塔问题
## 题目描述

给定 A、B、C 三根足够长的细柱，在 A 柱上放有 $2n$ 个中间有孔的圆盘，共有 $n$ 个不同的尺寸，每个尺寸都有两个相同的圆盘，注意这两个圆盘是不加区分的（下图为 $n=3$ 的情形）。

![](https://cdn.luogu.com.cn/upload/image_hosting/mq2iklbv.png)

现要将这些圆盘移到 C 柱上，在移动过程中可放在 B 柱上暂存。要求：

1. 每次只能移动一个圆盘；
2. A、B、C 三根细柱上的圆盘都要保持上小下大的顺序。

任务：设 $A_n$ 为 $2n$ 个圆盘完成上述任务所需的最少移动次数，对于输入的 $n$，输出 $A_n$。


## 输入格式

一个正整数 $n$，表示在 A 柱上放有 $2n$ 个圆盘。

## 输出格式

一个正整数, 为完成上述任务所需的最少移动次数 $A_n$。

## 样例

### 样例输入 #1
```
1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2
```
### 样例输出 #2
```
6
```
## 提示

**限制**

- 对于 $50\%$ 的数据，$1  \le  n  \le  25$；
- 对于 $100\%$ 的数据，$1  \le  n  \le  200$。

**提示**

设法建立 $A_n$ 与 $A_{n-1}$ 的递推关系式。



---

---
title: "[NOISG 2020 Qualification] Cryptography"
layout: "post"
diff: 普及/提高-
pid: P11319
tag: ['2020', '康托展开', 'NOISG（新加坡）']
---
# [NOISG 2020 Qualification] Cryptography
## 题目背景

Charles 是一位密码学家，他正在研究生成随机数的新方法。他试图通过组合多个随机数源来创建一个密码学安全的伪随机数生成器（CSPRNG）。
## 题目描述

他发明了一种算法，包括以下步骤：

1. 随机生成一个长度为 $N$ 的正整数序列 $S$，其中元素两两不同。
2. 随机打乱 $S$，得到一个长度为 $N$ 的排列 $P$。
3. 计算排列 $P$ 的字典序排名。
4. 输出排名对 $10^9 + 7$ 取模的结果。

排列 $P$ 的字典序排名定义为所有小于等于 $P$ 的排列数量。

Charles 是一位密码学家，但不是程序员。现在，给定排列 $P$，请帮助 Charles 计算其字典序排名，并对 $10^9 + 7$ 取模。
## 输入格式

第一行包含一个整数 $N$，表示排列的长度。  
第二行包含 $N$ 个正整数 $P_1, P_2, \dots, P_N$，表示排列 $P$。
## 输出格式

输出一个整数，表示排列 $P$ 的字典序排名，对 $10^9 + 7$ 取模。
## 样例

### 样例输入 #1
```
3
42 100 1
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5
1 5 2 4 3
```
### 样例输出 #2
```
20
```
### 样例输入 #3
```
2
2 1
```
### 样例输出 #3
```
2
```
## 提示

【样例解释】

对于样例 #1，以下是所有排列的字典序：

1. $[1, 42, 100]$ 
2. $[1, 100, 42]$
3. $[42, 1, 100]$
4. $[42, 100, 1]$
5. $[100, 1, 42]$
6. $[100, 42, 1]$

排列 $[42, 100, 1]$ 的字典序排名为 $4$。

【数据范围】

- $1 \leq N \leq 3 \times 10^5$  
- $1 \leq P_i \leq 10^9$  
- 对于任意 $i \neq j$，$P_i \neq P_j$

| 子任务编号 | 分值       | 限制条件                                              |
|:--------:|:---------:|:--------------------------------------------------:|
| $1$      | $5$       | $N = 2$                                              |
| $2$      | $9$       | $1 \leq N \leq 8$                                    |
| $3$      | $10$      | $P$ 为严格递增或递减                                 |
| $4$      | $11$      | $P = [k, 1, \dots, k-1, k+1, \dots, N]$，$1 \leq k \leq N$ |
| $5$      | $21$      | $1 \leq N \leq 3 \times 10^3, 1 \leq P_i \leq N$     |
| $6$      | $13$      | $1 \leq N \leq 3 \times 10^3$                        |
| $7$      | $19$      | $1 \leq P_i \leq N$                                  |
| $8$      | $12$      | 无其他特殊限制                                       |


---

---
title: "[NOISG 2024 Finals] Problem Setter"
layout: "post"
diff: 普及/提高-
pid: P11349
tag: ['2024', 'NOISG（新加坡）']
---
# [NOISG 2024 Finals] Problem Setter
## 题目背景

Stuart 是一名热衷于编程比赛的题目设计者，他为多个比赛设定了许多问题。他希望将自己的一些问题提交到编程比赛中，以获得更多的荣誉。
## 题目描述

Stuart 可以将题目提交到 $c$ 个比赛中。如果将问题提交到第 $i$ 个比赛，他的满意度会增加 $s_i$。但由于比赛的结构和其他题目设计者的竞争，第 $i$ 个比赛只会接受质量至少为 $m_i$ 的题目。每个比赛可以接受多个问题，每个问题都会增加 $s_i$ 的满意度。

Stuart 总共设计了 $p$ 道问题，他认为第 $j$ 道问题的质量是 $q_j$。但由于问题准备过程的难度，提交第 $j$ 道问题到任何比赛会使他的满意度减少 $d_j$。显然，每个问题最多只能提交到一个比赛，或者可以选择不提交。

请帮 Stuart 找到一个最优的提交方案，以使他的满意度最大化。如果所有提交方案都会导致负满意度，他可以选择不提交任何问题，最终满意度为 $0$。
## 输入格式

- 第一行包含两个整数 $c$ 和 $p$，分别表示比赛数量和问题数量。
- 接下来的 $c$ 行中，第 $i$ 行包含两个整数 $m_i$ 和 $s_i$，表示第 $i$ 个比赛的最低问题质量和增加的满意度。
- 接下来的 $p$ 行中，第 $j$ 行包含两个整数 $q_j$ 和 $d_j$，表示第 $j$ 道问题的质量和提交所带来的满意度损失。


## 输出格式

- 输出一个整数，表示 Stuart 可以获得的最大满意度。如果他选择不提交任何问题，输出 $0$。
## 样例

### 样例输入 #1
```
3 3
2 5
1 1
8 3
3 2
9 4
1 3
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
3 4
2 3
1 1
8 4
2 0
7 0
1 0
8 0
```
### 样例输出 #2
```
11
```
### 样例输入 #3
```
5 1
3 4
1 2
5 6
2 8
4 0
3 6
```
### 样例输出 #3
```
2
```
## 提示

【样例解释】

对于样例 #1：
- 比赛 $1$ 的最低质量要求为 $2$，问题 $1$ 满足条件，提交后增加 $5 - 2 = 3$ 的满意度。
- 比赛 $1$ 的最低质量要求为 $2$，问题 $2$ 满足条件，提交后增加 $5 - 4 = 1$ 的满意度。
- 最终满意度为 $3 + 1 = 4$。
- 问题 $3$ 和其他比赛没有提交。

对于样例 #2：
- 根据提交方案，最优满意度为 $11$。

对于样例 #3：
- 最优方案使满意度为 $2$。

【数据范围】

- $1 \leq c, p \leq 200,000$
- $0 \leq m_i, s_i, q_j, d_j \leq 1,000,000$

| 子任务编号 | 分值 | 限制条件                     |
|:---:|:---:|:---:|
| $0$ | $0$  | 样例测试用例                     |
| $1$ | $18$ | $1 \leq c \leq 1,000, p = 1$     |
| $2$ | $16$ | $1 \leq c, p \leq 1,000$         |
| $3$ | $26$ | $d_j = 0$                        |
| $4$ | $40$ | 无额外限制                       |


---

---
title: "[NOIP 2010 普及组] 导弹拦截"
layout: "post"
diff: 普及/提高-
pid: P1158
tag: ['模拟', '2010', 'NOIP 普及组', '枚举', '排序']
---
# [NOIP 2010 普及组] 导弹拦截
## 题目描述

经过 $11$ 年的韬光养晦，某国研发出了一种新的导弹拦截系统，凡是与它的距离不超过其工作半径的导弹都能够被它成功拦截。当工作半径为 $0$ 时，则能够拦截与它位置恰好相同的导弹。但该导弹拦截系统也存在这样的缺陷：每套系统每天只能设定一次工作半径。而当天的使用代价，就是所有系统工作半径的平方和。

某天，雷达捕捉到敌国的导弹来袭。由于该系统尚处于试验阶段，所以只有两套系统投入工作。如果现在的要求是拦截所有的导弹，请计算这一天的最小使用代价。
## 输入格式

第一行包含 $4$ 个整数 $x_1,y_1,x_2,y_2$，每两个整数之间用一个空格隔开，表示这两套导弹拦截系统的坐标分别为 $(x_1,y_1), (x_2,y_2)$。第二行包含 $1$ 个整数 $N$，表示有 $N$ 颗导弹。接下来 $N$ 行，每行两个整数 $x,y$，中间用一个空格隔开，表示一颗导弹的坐标 $(x,y)$。不同导弹的坐标可能相同。
## 输出格式

一个整数，即当天的最小使用代价。

## 样例

### 样例输入 #1
```
0 0 10 0
2
-3 3
10 0
```
### 样例输出 #1
```
18
```
### 样例输入 #2
```
0 0 6 0
5
-4 -2
-2 3
4 0
6 -2
9 1
```
### 样例输出 #2
```
30
```
## 提示

两个点 $(x_1,y_1),(x_2,y_2)$ 之间距离的平方是 $(x_1-x_2)^2+(y_1-y_2)^2$。

两套系统工作半径 $r_1,r_2$ 的平方和，是指 $r_1,r_2$ 分别取平方后再求和，即 $r_1^2+r_2^2$。

### 样例 1 说明

样例 $1$ 中要拦截所有导弹，在满足最小使用代价的前提下，两套系统工作半径的平方分别为 $18$ 和 $0$。

### 样例 2 说明

样例 $2$ 中的导弹拦截系统和导弹所在的位置如下图所示。要拦截所有导弹，在满足最小使用代价的前提下，两套系统工作半径的平方分别为 $20$ 和 $10$。

![](https://cdn.luogu.com.cn/upload/image_hosting/cvgomt03.png)

【数据范围】。

- 对于 $10\%$ 的数据，$N=1$。
- 对于 $20\%$ 的数据，$1\le N\le 2$。
- 对于 $40\%$ 的数据，$1\le N\le 100$。
- 对于 $70\%$ 的数据，$1\le N\le 1000$。
- 对于 $100\%$ 的数据，$1\le N\le 10^5$，且所有坐标分量的绝对值都不超过 $1000$。

NOIP2010 普及组 第三题


---

---
title: "[NOISG 2018 Finals] Collecting Mushrooms"
layout: "post"
diff: 普及/提高-
pid: P11594
tag: ['2018', '前缀和', '差分', 'NOISG（新加坡）']
---
# [NOISG 2018 Finals] Collecting Mushrooms
## 题目背景

译自 [NOISG 2018 Finals A. Collecting Mushrooms](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/collectmushrooms)。
## 题目描述

螃蟹 Lim Li 在她的花园里打造了一个蘑菇种植园。这个蘑菇种植园可以看成一个 $R$ 行 $C$ 列的网格，其中每一格要么是空的，要么有一朵蘑菇，要么有一个洒水器。

举个例子，一个 $R=5,C=5$ 的蘑菇种植园可能是长这样子的：

![](https://cdn.luogu.com.cn/upload/image_hosting/qqn2ssqx.png)

一朵蘑菇和一个洒水器之间的距离被定义为它们的横坐标差的绝对值与纵坐标差的绝对值的较大值。换句话说，假设一朵蘑菇位于 $X_m$ 行 $Y_m$ 列，一个洒水器位于 $X_s$ 行 $Y_s$ 列，那么它们之间的距离为 $\max(|X_m-X_s|,|Y_m-Y_s|)$。

一个洒水器只能浇到距离自己不超过 $D$ 的蘑菇。下图展示了 $D=1$ 时洒水器可以浇到的区域：

![](https://cdn.luogu.com.cn/upload/image_hosting/sr5w3lov.png)

一朵蘑菇如果可以被至少 $K$ 个洒水器浇到，则我们称它是**好蘑菇**。你需要帮 Lim Li 计数在她的蘑菇种植园里有多少朵**好蘑菇**。
## 输入格式

第一行包含四个整数 $R,C,D,K$，含义如题意所述。

接下来 $R$ 行，每行 $C$ 个字符，描述一个蘑菇种植园。每个字符表示一个格子：

- `.` 表示一个空格子。
- `M` 表示一个有一朵蘑菇的格子。
- `S` 表示一个有一个洒水器的格子。
## 输出格式

一行一个整数，表示**好蘑菇**的数量。
## 样例

### 样例输入 #1
```
5 5 1 1
....M
.M...
..S..
.S...
...M.
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
4 4 4 1
....
.M..
..MM
...S
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
1 8 5 2
SM..MM.S
```
### 样例输出 #3
```
2
```
### 样例输入 #4
```
5 5 2 2
....M
.M...
..S..
.S...
...M.
```
### 样例输出 #4
```
2
```
## 提示

### 样例 #1 解释

所有洒水器可以浇到的距离范围都是 $1$，也就是每个洒水器都能且仅能洒到与自己八连通的格子。只有位于 $(2,2)$ 的蘑菇可以被浇到水。

这组样例满足子任务 $3,4,6$。

### 样例 #2 解释

唯一的洒水器可以浇到的距离范围是 $4$，所以可以浇到所有蘑菇。

这组样例满足子任务 $1,2,4,6$。

### 样例 #3 解释

所有蘑菇都需要被两头的洒水器浇到才能成为**好蘑菇**。因为洒水器可以浇到的距离范围都是 $5$，所以只有从左往右第二朵和第三朵蘑菇满足**好蘑菇**的要求。

这组样例满足子任务 $4,5,6$。

### 样例 #4 解释

因为洒水器可以浇到的距离范围都是 $2$，所以只有位于 $(2,2)$ 和 $(5,4)$ 的蘑菇可以同时被两个洒水器浇到。

这组样例满足子任务 $4,6$。

### 子任务

对于 $100\%$ 的数据，$2\le RC\le 5\times 10^5$，$1\le D\le \max(R,C)$，$1\le K\le RC$。保证种植园中至少有一朵蘑菇和一个洒水器。

| 子任务 | 得分 | 数据范围及特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $9$ | $1\le R,C\le 100$，$D=\max(R,C)$，$K=1$ |
| $2$ | $10$ | $1\le R,C\le 100$，$D=\max(R,C)$ |
| $3$ | $18$ | $1\le R,C\le 100$，$D=1$，$K=1$ |
| $4$ | $23$ | $1\le R,C\le 500$，洒水器和蘑菇的数量均少于 $500$ |
| $5$ | $19$ | $R=1$ |
| $6$ | $21$ | 无特殊限制 |



---

---
title: "[NOISG 2018 Finals] Journey"
layout: "post"
diff: 普及/提高-
pid: P11595
tag: ['动态规划 DP', '2018', 'NOISG（新加坡）']
---
# [NOISG 2018 Finals] Journey
## 题目背景

译自 [NOISG 2018 Finals B. Journey](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/journey)。
## 题目描述

Kuno 要从 A 市到 B 市旅行，但在路途中他可能会停下来休息。

允许他停留的共有 $N$ 个城市，编号为 $0$ 到 $N-1$，其中 $0$ 号城市表示 A 市，$N-1$ 号城市表示 B 市，编号越大的城市距离 B 市越近。

为了让旅行保持一定的效率，中途停留需要满足以下限制：

- 第 $i$ 次停留的城市必须比第 $i-1$ 次离 B 市**严格**更近。特别地，我们认为第 $0$ 次停留的城市是 A 市。
- 从 A 市出发，直到从 B 市结束停留离开，整个过程不能超过 $M$ 天。换句话说，我们不允许你在 A 市停留，但允许你在 B 市停留。

Kuno 在城市之间的移动和停留基于城市之间的航线和城市中的酒店系统。每个城市 $i$ 都存在 $H$ 条用 $(j,k)$ 表示的航线，表示你可以通过这条航线从城市 $i$ 前往城市 $j$，但是一旦使用这条航线，就必须在城市 $j$ 中停留不少于 $k$ 天。**特别地，每个城市都有一条直接前往 B 市的航线**。

注意可能存在完全相同或起点终点相同的航线，此时你需要把它们视为**不同航线**。你应当忽略远离 B 市的航线。

在飞机中度过的时间忽略不计。

到达一个城市即算作在该城市停留，即使停留了 $0$ 天。

你的任务是，对每一个 $d\in[1,m]$，帮助 Kuno 计数他从 A 市出发到从 B 市结束停留返回花费 $d$ 天的方案数。特别地，若方案数超过 $5\times 10^8$，你只需输出 $5\times 10^8+1$。

两个旅行方案不同当且仅当以下三条任意一条成立：

1. 一个旅行方案中需要在城市 $i$ 停留，而另一个不用。
2. 存在一个城市 $i$，使得两个旅行方案离开该城市的时间不同。**特别地，也包括从 B 市离开的时间不同**。
3. 两个行程都从城市 $i$ 到城市 $j$，但使用的航线不同。

例如，对于两个均为 A 市到 C 市，再从 C 市到 D 市，最后从 D 市到 B 市的旅行方案，如果一个是在第二天离开 C 市，另一个是在第三天离开 C 市，那么它们就是不同的方案。此外，如果输入中存在两条同样从 D 市前往 B 市的航线，即便出发时间和到达时间相同，也是不同的方案。

如你仍无法完全理解题意，请阅读**样例解释**。
## 输入格式

第一行包含三个整数 $N,M,H$，表示城市数量，旅行天数上限，和每个城市的航线数量。

接下来的输入包含 $N-1$ 行，第 $i$ 行包含 $2H$ 个用空格分割的整数，每两个为一组 $(j,k)$，描述从城市 $i-1$ 出发的 $H$ 条航线。


## 输出格式

输出 $m$ 个用空格隔开的整数，依次表示从 A 市出发直至从 B 市结束停留离开共花费恰好 $1,2,3,\cdots ,m$ 天的旅行方案数。注意如果方案数超过 $5\times 10^8$，则应输出 $5\times 10^8+1$。
## 样例

### 样例输入 #1
```
4 4 3
1 2 2 2 3 0
2 2 2 3 3 0
3 1 3 3 3 0
```
### 样例输出 #1
```
1 1 3 6
```
### 样例输入 #2
```
4 8 3
1 0 2 1 3 0
3 1 3 2 3 0
3 1 3 1 3 0
```
### 样例输出 #2
```
2 5 11 17 23 29 35 41
```
### 样例输入 #3
```
4 11 3
1 0 2 0 3 0
0 0 2 0 3 0
0 0 0 0 3 0
```
### 样例输出 #3
```
4 8 13 19 26 34 43 53 64 76 89
```
### 样例输入 #4
```
8 8 8
1 0 1 0 1 0 1 0 1 0 1 0 1 0 7 0
2 0 2 0 2 0 2 0 2 0 2 0 2 0 7 0
3 0 3 0 3 0 3 0 3 0 3 0 3 0 7 0
4 0 4 0 4 0 4 0 4 0 4 0 4 0 7 0
5 0 5 0 5 0 5 0 5 0 5 0 5 0 7 0
6 0 6 0 6 0 6 0 6 0 6 0 6 0 7 0
7 0 7 0 7 0 7 0 7 0 7 0 7 0 7 0
```
### 样例输出 #4
```
960800 6702725 26746084 80092734 199948848 439388874 500000001 500000001
```
## 提示

### 样例 #1 解释

样例 #1 输入描述了一个具有 $4$ 座城市，每个城市有 $3$ 条不同的航线出发的情况：

| 出发城市 | 航线 $1$ 终点 | $\text{Min.}$ | 航线 $2$ 终点 | $\text{Min.}$ | 航线 $3$ 终点 | $\text{Min.}$ |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| A 市 | 城市 $1$ | $2$ 天 | 城市 $2$ | $2$ 天 | B 市 | $0$ 天 |
| 城市 $1$ | 城市 $2$ | $2$ 天 | 城市 $2$ | $3$ 天 | B 市 | $0$ 天 |
| 城市 $2$ | B 市 | $1$ 天 | B 市 | $3$ 天 | B 市 | $0$ 天 |

为了方便表格描述，我们用 $\text{Min.}$ 表示了每条航线对目的地最少停留天数的要求。

所有 $1$ 天的旅行方案如下；

| 旅行方案 | 方案 |
| :----------: | :----------: |
| $1$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |

所有 $2$ 天的旅行方案如下：

| 旅行方案 | 方案 |
| :----------: | :----------: |
| $1$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |

所有 $3$ 天的旅行方案如下：

| 旅行方案 | 方案 |
| :----------: | :----------: |
| $1$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $2$ 天；在第 $3$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |
| $2$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |
| $3$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $2$ 天。 |

所有 $4$ 天的旅行方案如下：

| 旅行方案 | 方案 |
| :----------: | :----------: |
| $1$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $2$ 天；在第 $3$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |
| $2$ | 在第 $1$ 天从 A 市通过航线 $1$ 抵达城市 $1$，在城市 $1$ 停留 $3$ 天；在第 $4$ 天从城市 $1$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |
| $3$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $1$ 天。 |
| $4$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $3$ 天；在第 $4$ 天从城市 $2$ 通过航线 $3$ 抵达 B 市，在 B 市停留 $0$ 天。 |
| $5$ | 在第 $1$ 天从 A 市通过航线 $2$ 抵达城市 $2$，在城市 $2$ 停留 $2$ 天；在第 $3$ 天从城市 $2$ 通过航线 $1$ 抵达 B 市，在 B 市停留 $1$ 天。 |
| $6$ | 在第 $1$ 天从 A 市通过航线 $3$ 抵达 B 市，在 B 市停留 $3$ 天。 |

### 样例 #2 解释

这组样例中除 A 市外所有城市的出发航线均直接到达 B 市。它满足子任务 $1,3,4$。

### 样例 #3 解释

这组样例中所有的航线均不限制目的地最少停留天数。它满足子任务 $2,3,4$。

### 样例 #4 解释

注意若方案数超过 $5\times 10^8$，你只需输出 $5\times 10^8+1$。它满足子任务 $2,3,4$。

### 子任务

对于 $100\%$ 的数据，$N\le 10^4,M\le 400,H\le 100$，其余输入均在此范围下合法。

| 子任务 | 得分 | 数据范围及特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $20$ | 除 A 市外所有城市的出发航线均直接到达 B 市，$N,M,H\le 10$ |
| $2$ | $23$ | 所有的航线均不限制目的地最少停留天数，$N,M,H\le 20$ |
| $3$ | $26$ | $N,M,H\le 100$ |
| $4$ | $31$ | 无特殊限制 |



---

---
title: "[NOISG 2018 Finals] Lightning Rod"
layout: "post"
diff: 普及/提高-
pid: P11596
tag: ['2018', 'O2优化', 'NOISG（新加坡）']
---
# [NOISG 2018 Finals] Lightning Rod
## 题目背景

译自 [NOISG 2018 Finals C. Lightning Rod](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/lightningrod)。
## 题目描述

新加坡的城市天际线可以看成一个平面直角坐标系，第 $i$ 栋大楼的顶端是点 $(X_i,Y_i)$。

一根避雷针可以安装在大楼的顶端上。它的保护区域为从该大楼顶端向左下方和右下方作两条与坐标轴呈 $45^\circ$ 的射线所产生的 $\frac{1}{4}$ 平面。所有顶端在该保护区域内或落在保护区域边缘上的大楼都可以被保护到。

换句话说，若避雷针安装在大楼 $i$ 上，则所有且仅所有满足 $|X_i-X_j|\le Y_i-Y_j$ 的大楼 $j$ 可以被该避雷针保护到。

你的任务是找出最少的安装避雷针数量，使得所有大楼都可以被至少一根避雷针保护到。
## 输入格式

第一行一个正整数 $N$，表示大楼的总数。

接下来 $N$ 行每行两个正整数 $X_i,Y_i$，表示第 $i$ 栋大楼的顶端是 $(X_i,Y_i)$。**保证 $X_i$ 按照输入顺序单调不递减**。

注意：本题输入量较大，请使用较快的输入方式。我们在下发文件中下发了三种语言实现的快速读入模板。
## 输出格式

一行一个整数，表示最少的安装避雷针数量。
## 样例

### 样例输入 #1
```
2
1 1
2 1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2
1 0
2 1
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
4
1 1
3 2
4 3
5 1
```
### 样例输出 #3
```
2
```
## 提示

### 样例 #1 解释

所有大楼都需要安装避雷针。

这组样例满足所有子任务。

### 样例 #2 解释

在大楼 $2$ 的顶端安装避雷针。

这组样例满足子任务 $2$ 至 $7$。

### 样例 #3 解释

![](https://cdn.luogu.com.cn/upload/image_hosting/glq0s3hc.png)

如图所示，在大楼 $1$ 和大楼 $3$ 的顶端安装避雷针。

这组样例满足子任务 $3,4,5,7$。

### 子任务

对于 $100\%$ 的数据，$2\le N\le 10^7$，$0\le X_i,Y_i\le 10^9$。

| 子任务 | 得分 | $N$ | $X_i,Y_i$ |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $4$ | 无特殊限制 | $Y_i=1$ |
| $2$ | $7$ | $=2$ | 无特殊限制 |
| $3$ | $12$ | $\le20$ | 无特殊限制 |
| $4$ | $21$ | $\le 2\times 10^3$ | 无特殊限制 |
| $5$ | $26$ | $\le 2\times 10^5$ | 无特殊限制 |
| $6$ | $10$ | 无特殊限制 | $X_i=i,Y_i\le 1$ |
| $7$ | $20$ | 无特殊限制 | 无特殊限制 |



---

---
title: "[NOIP 2010 普及组] 三国游戏"
layout: "post"
diff: 普及/提高-
pid: P1199
tag: ['贪心', '博弈论', '2010', 'NOIP 普及组']
---
# [NOIP 2010 普及组] 三国游戏
## 题目描述

小涵很喜欢电脑游戏，这些天他正在玩一个叫做《三国》的游戏。

在游戏中，小涵和计算机各执一方，组建各自的军队进行对战。游戏中共有 $N$ 位武将（$N$ 为偶数且不小于 $4$），任意两个武将之间有一个“默契值”，表示若此两位武将作为一对组合作战时，该组合的威力有多大。游戏开始前，所有武将都是自由的（称为自由武将，一旦某个自由武将被选中作为某方军队的一员，那么他就不再是自由武将了），换句话说，所谓的自由武将不属于任何一方。

游戏开始，小涵和计算机要从自由武将中挑选武将组成自己的军队，规则如下：小涵先从自由武将中选出一个加入自己的军队，然后计算机也从自由武将中选出一个加入计算机方的军队。接下来一直按照“小涵 $\to$ 计算机 $\to$ 小涵 $\to\dots$ ”的顺序选择武将，直到所有的武将被双方均分完。然后，程序自动从双方军队中各挑出一对默契值最高的武将组合代表自己的军队进行二对二比武，拥有更高默契值的一对武将组合获胜，表示两军交战，拥有获胜武将组合的一方获胜。

已知计算机一方选择武将的原则是尽量破坏对手下一步将形成的最强组合，它采取的具体策略如下：任何时刻，轮到计算机挑选时，它会尝试将对手军队中的每个武将与当前每个自由武将进行一一配对，找出所有配对中默契值最高的那对武将组合，并将该组合中的自由武将选入自己的军队。 下面举例说明计算机的选将策略，例如，游戏中一共有$6$个武将，他们相互之间的默契值如下表所示：

| 武将编号 |  1   |  2   |  3   |  4   |  5   |  6   |
| :------: | :--: | :--: | :--: | :--: | :--: | :--: |
|  **1**   |      | $5$  | $28$ | $16$ | $29$ | $27$ |
|  **2**   | $5$  |      | $23$ | $3$  | $20$ | $1$  |
|  **3**   | $28$ | $23$ |      | $8$  | $32$ | $26$ |
|  **4**   | $16$ | $3$  | $8$  |      | $33$ | $11$ |
|  **5**   | $29$ | $20$ | $32$ | $33$ |      | $12$ |
|  **6**   | $27$ | $1$  | $26$ | $11$ | $12$ |      |

双方选将过程如下所示：

|        | 小涵 | 轮到计算机时可选的自由武将 |  计算机    |  计算机选将说明    |
| :----: | :--: | :----------: | :--: | :--: |
| 第一轮 | $5$ | $1,2,3,4,6$ | $\color{magenta}4$ | 小涵手中的 $5$ 号武将与 $4$ 号的默契值最高，所以计算机选择 $4$ 号。 |
| 第二轮 | $5,3$ | $1,2,6$ | $4,\color{magenta}1$ |  小涵手中的 $5$ 号和 $3$ 号武将与自由武将中配对可产生的最大默契值为 $29$，是由 $5$ 号与 $1$ 号配对产生的，所以计算机选择 $1$ 号。  |
| 第三轮 | $5,3,6$ | $2$ | $4,1,\color{magenta}2$ |      |

小涵想知道，如果计算机在一局游戏中始终坚持上面这个策略，那么自己有没有可能必胜？如果有，在所有可能的胜利结局中，自己那对用于比武的武将组合的默契值最大是多少？  

假设整个游戏过程中，对战双方任何时候均能看到自由武将队中的武将和对方军队的武将。为了简化问题，保证对于不同的武将组合，其默契值均不相同。

## 输入格式

共 $N$ 行。

第一行为一个偶数 $N$，表示武将的个数。

第 $2$ 行到第 $N$ 行里，第 $i+1$ 行有 $N-i$ 个非负整数，每两个数之间用一个空格隔开，表示 $i$ 号武将和 $i+1,i+2,\dots,N $ 号武将之间的默契值（$0≤\text{默契值}\le10^9$）。

## 输出格式

共一或二行。

若对于给定的游戏输入，存在可以让小涵获胜的选将顺序，则输出 $ 1$，并另起一行输出所有获胜的情况中，小涵最终选出的武将组合的最大默契值。如果不存在可以让小涵获胜的选将顺序，则输出 $0$。

## 样例

### 样例输入 #1
```
6 
5 28 16 29 27 
23 3 20 1 
8 32 26 
33 11 
12 

```
### 样例输出 #1
```
1
32


```
### 样例输入 #2
```
8 
42 24 10 29 27 12 58 
31 8 16 26 80 6 
25 3 36 11 5 
33 20 17 13 
15 77 9 
4 50 
19 
```
### 样例输出 #2
```
1
77
```
## 提示

**数据范围**

对于 $ 40\%$ 的数据有 $N≤10$。

对于 $ 70\%$ 的数据有 $ N≤18$。

对于 $100\%$ 的数据有 $4\le N≤500$。保证对于不同的武将组合，其默契值均不相同。

NOIP2010 普及组 第四题


---

---
title: "[NOISG 2025 Finals] Monsters"
layout: "post"
diff: 普及/提高-
pid: P12015
tag: ['贪心', '2025', 'NOISG（新加坡）']
---
# [NOISG 2025 Finals] Monsters
## 题目描述

Penguinland is an infinite number line with n monsters. The $i$-th monster is initially at position $a[i]$ on the number line, with health $h[i]$. It is guaranteed that no two monsters share the same initial position.

Today, Brian the penguin wishes to defeat all the monsters! To defeat them, Brian has planted $k$ mines at certain positions. The $j$-th mine is located at position $x[j]$. Detonating a mine **instantly destroys all monsters** standing on that position, and each mine can be detonated any number of times. However, each detonation costs $1$ dollar. It is guaranteed that no two mines are planted at the same position.

In addition to detonating mines, Brian can also perform two types of operations:

- Move a monster left or right by $1$ unit along the number line.
- Increase or decrease a monster’s health by $1$.

Each operation costs $1$ dollar to execute.

A monster is considered defeated if its health reaches $0$ or if it is destroyed by a mine. Help Brian find the minimum cost (in dollars) needed to defeat all the monsters.

## 输入格式

Your program must read from standard input.

The first line of input contains two space-separated integers $n$ and $k$.

The following $n$ lines each contain two space-separated integers. The $i$-th of these lines contains $a[i]$ and $h[i]$.

The last line of input contains $k$ space-separated integers $x[1], x[2], \ldots, x[k]$.

## 输出格式

Your program must print to standard output.

Output a single integer, the minimum cost (in dollars) needed to defeat all the monsters.

The output should contain only a single integer. Do not print any additional text such as Enter a number or The answer is.

## 样例

### 样例输入 #1
```
3 1
2 2
4 5
5 4
5
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5 2
7 7
6 3
10 4
4 4
9 1
7 10
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
10 5
19 10
5 3
1 2
3 6
17 2
20 3
8 2
12 3
14 2
15 1
40 13 37 14 6
```
### 样例输出 #3
```
23
```
## 提示

### Subtasks

For all test cases, the input will satisfy the following bounds:

- $1 \leq n, k \leq 200\,000$
- $1 \leq a[i], h[i] \leq 10^9$ for all $1 \leq i \leq n$
- $1 \leq x[i] \leq 10^9$ for all $1 \leq i \leq k$
- $a[i] \neq a[j]$ for all $i \neq j$
- $x[i] \neq x[j]$ for all $i \neq j$

Your program will be tested on input instances that satisfy the following restrictions:

| Subtask | Marks | Additional constraints |
| :-: | :-: | :-: |
| $0$ | $0$ | Sample test cases |
| $1$ | $14$ | $k = 1$ |
| $2$ | $6$ | $k = 2$ |
| $3$ | $10$ | $n, k \leq 18$ |
| $4$ | $30$ | $n, k \leq 3000$ |
| $5$ | $29$ | $h[i] = 10^9$ |
| $6$ | $11$ | No additional constraints |

### Sample Test Case 1 Explanation

There are $n = 3$ monsters and $k = 1$ mine. Brian can:

- Decrease the health of monster $1$ to $0$, costing $2$ dollars.
- Move monster $2$ to the right by $1$ unit (changing its position from $4$ to $5$), costing $1$ dollar.
- Detonate the mine at position $5$, defeating both monsters $2$ and $3$, costing $1$ dollar.

The total cost needed is $2 + 1 + 1 = 4$ dollars.

This test case is valid for subtasks $1, 3, 4$, and $6$.

### Sample Test Case 2 Explanation

This test case is valid for subtasks $2, 3, 4$, and $6$.

There are $n = 5$ monsters and $k = 2$ mines. Brian can:

- Decrease the health of monster $5$ to $0$, costing $1$ dollar.
- Detonate mine $2$, defeating monster $3$, costing $1$ dollar.
- Move monster $2$ to the right by $1$ unit (changing its position from $6$ to $7$), costing $1$ dollar.
- Move monster $4$ to the right by $3$ units (changing its position from $4$ to $7$), costing $3$ dollars.
- Detonate mine $1$, defeating monsters $1, 2$, and $4$, costing $1$ dollar.

The total cost needed is $1 + 1 + 1 + 3 + 1 = 7$ dollars.

### Sample Test Case 3 Explanation

This test case is valid for subtasks $3, 4$, and $6$.



---

---
title: "[NOISG 2025 Prelim] Snacks"
layout: "post"
diff: 普及/提高-
pid: P12194
tag: ['2025', 'NOISG（新加坡）']
---
# [NOISG 2025 Prelim] Snacks
## 题目描述

Shor the Duck has prepared $n$ plates of snacks to enjoy while watching movies! The $i$-th plate initially contains a snack with a deliciousness value of $a[i]$.

You need to process $q$ queries. In the $j$-th query, Shor will do **both** of the following, in order:

1. Eat every snack whose deliciousness is between $l[j]$ and $r[j]$ (inclusive).
2. Then, replace each eaten snack with a new snack of deliciousness $x[j]$.

Before processing any queries, and after each query, Shor wants you to determine the sum of deliciousness of snacks across all plates.

Formally, you are given an array $a$ of length $n$ and must process $q$ queries. Before processing any queries, print the sum of all elements in $a$. In the $j$-th query, update every element $a[i]$ such that $l[j] \leq a[i] \leq r[j]$ by setting $a[i] = x[j]$, then print the updated sum of all elements in $a$.

## 输入格式

Your program must read from standard input.

The first line of input contains two space-separated integers $n$ and $q$.

The second line of input contains $n$ space-separated integers $a[1], a[2], \ldots, a[n]$.

The following $q$ lines of input each contain three space-separated integers. The $j$-th of these lines contains $l[j], r[j]$, and $x[j]$, describing the $j$-th query.

## 输出格式

Your program must print to standard output.

The output should contain $q + 1$ lines.

The first line of output should contain a single integer, the sum of all elements in a before all queries.

The following $q$ lines of input should each contain one integer. The $i$-th of these lines should contain the sum of elements in a after the $i$-th query.

## 样例

### 样例输入 #1
```
5 3
1 6 2 4 6
6 6 3
2 2 3
3 3 5
```
### 样例输出 #1
```
19
13
14
20
```
### 样例输入 #2
```
6 4
929 121 5 3 919 72
1 133 0
70 79 0
900 999 0
1 1000 0
```
### 样例输出 #2
```
2049
1848
1848
0
0
```
### 样例输入 #3
```
6 5
7 72 727 123 321 9
7 9 10
10 72 727
111 222 30
123 727 99
111 222 333
```
### 样例输出 #3
```
1259
1263
3352
3259
525
525
```
## 提示

### Subtasks

For all test cases, the input will satisfy the following bounds:

- $1 \leq n \leq 200\,000$
- $0 \leq q \leq 200\,000$
- $0 \leq a[i] \leq 10^9$ for all $1 \leq i \leq n$
- $0 \leq x[j] \leq 10^9$ for all $1 \leq j \leq q$
- $0 \leq l[j] \leq r[j] \leq 10^9$ for all $1 \leq j \leq q$

Your program will be tested on input instances that satisfy the following restrictions:

| Subtask | Marks | Additional Constraints |
| :-: | :-: | :-: |
| $0$ | $0$ | Sample test cases |
| $1$ | $5$ | $q = 0$ |
| $2$ | $12$ | $n, q \leq 2000$ |
| $3$ | $21$ | $l[j] = r[j] \leq 200\,000$ and $a[i], x[j] \leq 200\,000$ |
| $4$ | $13$ | $l[j] = r[j]$ |
| $5$ | $16$ | $x[j] = 0$ |
| $6$ | $33$ | No additional constraints |

### Sample Test Case 1 Explanation

This test case is valid for subtasks $2, 3, 4$, and $6$.

### Sample Test Case 2 Explanation

This test case is valid for subtasks $2, 5$, and $6$.

### Sample Test Case 3 Explanation

This test case is valid for subtasks $2$ and $6$.

Before all queries, the array a is $[7, 72, 727, 123, 321, 9]$, with a sum of $1259$.

After the first query, the array a becomes $[10, 72, 727, 123, 321, 10]$, with a sum of $1263$.

After the second query, the array a becomes $[727, 727, 727, 123, 321, 727]$, with a sum of $3352$.

After the third query, the array a becomes $[727, 727, 727, 30, 321, 727]$, with a sum of $3259$.

After the fourth query, the array a becomes $[99, 99, 99, 30, 99, 99]$, with a sum of $525$.

After the fifth query, the array a becomes $[99, 99, 99, 30, 99, 99]$, with a sum of $525$.



---

---
title: "[NOIP 2011 普及组] 瑞士轮"
layout: "post"
diff: 普及/提高-
pid: P1309
tag: ['模拟', '2011', '递归', 'NOIP 普及组', '排序']
---
# [NOIP 2011 普及组] 瑞士轮
## 题目背景

在双人对决的竞技性比赛，如乒乓球、羽毛球、国际象棋中，最常见的赛制是淘汰赛和循环赛。前者的特点是比赛场数少，每场都紧张刺激，但偶然性较高。后者的特点是较为公平，偶然性较低，但比赛过程往往十分冗长。

本题中介绍的瑞士轮赛制，因最早使用于$1895$年在瑞士举办的国际象棋比赛而得名。它可以看作是淘汰赛与循环赛的折中，既保证了比赛的稳定性，又能使赛程不至于过长。

## 题目描述

$2 \times N$ 名编号为 $1\sim 2N$ 的选手共进行R 轮比赛。每轮比赛开始前，以及所有比赛结束后，都会按照总分从高到低对选手进行一次排名。选手的总分为第一轮开始前的初始分数加上已参加过的所有比赛的得分和。总分相同的，约定编号较小的选手排名靠前。

每轮比赛的对阵安排与该轮比赛开始前的排名有关：第$1$ 名和第$2$ 名、第 $3$ 名和第 $4$名、……、第$2K - 1 $名和第$ 2K$名、……  、第$2N - 1 $名和第$2N$名，各进行一场比赛。每场比赛胜者得$1 $分，负者得 $0 $分。也就是说除了首轮以外，其它轮比赛的安排均不能事先确定，而是要取决于选手在之前比赛中的表现。

现给定每个选手的初始分数及其实力值，试计算在R 轮比赛过后，排名第$ Q$ 的选手编号是多少。我们假设选手的实力值两两不同，且每场比赛中实力值较高的总能获胜。

## 输入格式

第一行是三个正整数$N,R ,Q$,每两个数之间用一个空格隔开，表示有 $2 \times N $名选手、$R$ 轮比赛，以及我们关心的名次 $Q$。

第二行是$2 \times N$ 个非负整数$s_1, s_2, …, s_{2N}$，每两个数之间用一个空格隔开，其中$ s_i $表示编号为$i$ 的选手的初始分数。 第三行是$2 \times N$ 个正整数$w_1 , w_2 , …, w_{2N}$，每两个数之间用一个空格隔开，其中 $w_i$ 表示编号为$i$ 的选手的实力值。

## 输出格式

一个整数，即$R$ 轮比赛结束后，排名第$ Q$ 的选手的编号。

## 样例

### 样例输入 #1
```
2 4 2 
7 6 6 7 
10 5 20 15 

```
### 样例输出 #1
```
1

```
## 提示

【样例解释】

 ![](https://cdn.luogu.com.cn/upload/pic/98.png) 

【数据范围】

对于$30\% $的数据，$1 ≤ N ≤ 100$；

对于$50\% $的数据，$1 ≤ N ≤ 10,000 $；

对于$100\%$的数据，$1 ≤ N ≤ 100,000,1 ≤ R ≤ 50,1 ≤ Q ≤ 2N,0 ≤ s_1, s_2, …, s_{2N}≤10^8,1 ≤w_1, w_2 , …, w_{2N}≤ 10^8$。

noip2011普及组第3题。



---

---
title: "[NOIP 2011 提高组] 选择客栈"
layout: "post"
diff: 普及/提高-
pid: P1311
tag: ['递推', '2011', 'NOIP 提高组']
---
# [NOIP 2011 提高组] 选择客栈
## 题目描述

丽江河边有 $n$ 家很有特色的客栈，客栈按照其位置顺序从 $1$ 到 $n$ 编号。每家客栈都按照某一种色调进行装饰（总共 $k$ 种，用整数 $0 \sim k-1$ 表示），且每家客栈都设有一家咖啡店，每家咖啡店均有各自的最低消费。

两位游客一起去丽江旅游，他们喜欢相同的色调，又想尝试两个不同的客栈，因此决定分别住在色调相同的两家客栈中。晚上，他们打算选择一家咖啡店喝咖啡，要求咖啡店位于两人住的两家客栈之间（包括他们住的客栈），且咖啡店的最低消费不超过 $p$ 。

他们想知道总共有多少种选择住宿的方案，保证晚上可以找到一家最低消费不超过 $p$ 元的咖啡店小聚。
## 输入格式

共 $n+1$ 行。

第一行三个整数 $n, k, p$，每两个整数之间用一个空格隔开，分别表示客栈的个数，色调的数目和能接受的最低消费的最高值；

接下来的 $n$ 行，第 $i+1$ 行两个整数，之间用一个空格隔开，分别表示 $i $ 号客栈的装饰色调 $a_i$ 和 $i$ 号客栈的咖啡店的最低消费 $b_i$。
## 输出格式

一个整数，表示可选的住宿方案的总数。

## 样例

### 样例输入 #1
```
5 2 3 
0 5 
1 3 
0 2 
1 4 
1 5 

```
### 样例输出 #1
```
3

```
## 提示

### 样例解释

![](https://cdn.luogu.com.cn/upload/pic/101.png) 

2 人要住同样色调的客栈，所有可选的住宿方案包括：住客栈①③，②④，②⑤，④⑤，但是若选择住 $4,5$号客栈的话，$4,5$ 号客栈之间的咖啡店的最低消费是 $4$ ，而两人能承受的最低消费是 $3$ 元，所以不满足要求。因此只有前 $3$ 种方案可选。

### 数据范围

- 对于 $30\% $ 的数据，有 $n \leq 100$ ；
- 对于 $50\% $ 的数据，有 $n \leq 1\,000$；
- 对于 $100\%$ 的数据，有 $2 \leq n \leq 2 \times 10^5$，$1 \leq k
 \leq 50$，$0 \leq p \leq 100$，$0 \leq b_i \leq 100$。


---

---
title: "[NOIP 2011 提高组] 计算系数"
layout: "post"
diff: 普及/提高-
pid: P1313
tag: ['数学', '2011', 'NOIP 提高组']
---
# [NOIP 2011 提高组] 计算系数
## 题目描述

给定一个多项式 $(by+ax)^k$，请求出多项式展开后 $x^n\times y^m$ 项的系数。
## 输入格式

输入共一行，包含 $5$ 个整数，分别为 $a,b,k,n,m$，每两个整数之间用一个空格隔开。
## 输出格式

输出共一行，包含一个整数，表示所求的系数。

这个系数可能很大，输出对 $10007$ 取模后的结果。
## 样例

### 样例输入 #1
```
1 1 3 1 2

```
### 样例输出 #1
```
3
```
## 提示

【数据范围】

对于 $30\%$ 的数据，有 $ 0\le k\le 10$。

对于 $50\%$ 的数据，有 $ a=1$，$b=1$。

对于 $100\%$ 的数据，有 $0\le k\le 1000$，$0\le n,m\le k$，$n+m=k$，$0\le a,b\le 10^6$。

noip2011 提高组 day2 第 1 题。



---

---
title: "[NOIP 2014 提高组] 联合权值"
layout: "post"
diff: 普及/提高-
pid: P1351
tag: ['动态规划 DP', '2014', 'NOIP 提高组', '树形 DP', '最近公共祖先 LCA']
---
# [NOIP 2014 提高组] 联合权值
## 题目背景

NOIP2014 提高组 D1T2
## 题目描述

无向连通图 $G$ 有 $n$ 个点，$n-1$ 条边。点从 $1$ 到 $n$ 依次编号,编号为 $i$ 的点的权值为 $W_i$，每条边的长度均为 $1$。图上两点 $(u, v)$ 的距离定义为 $u$ 点到 $v$ 点的最短距离。对于图 $G$ 上的点对 $(u, v)$，若它们的距离为 $2$，则它们之间会产生 $W_v \times W_u$ 的联合权值。

请问图 $G$ 上所有可产生联合权值的有序点对中，联合权值最大的是多少？所有联合权值之和是多少？
## 输入格式

第一行包含 $1$ 个整数 $n$。

接下来 $n-1$ 行,每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的点之间有边相连。

最后 $1$ 行，包含 $n$ 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上编号为 $i$ 的点的权值为 $W_i$。
## 输出格式

输出共 $1$ 行，包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上联合权值的最大值和所有联合权值之和。由于所有联合权值之和可能很大，输出它时要对 $10007$ 取余。
## 样例

### 样例输入 #1
```
5  
1 2  
2 3
3 4  
4 5  
1 5 2 3 10 
```
### 样例输出 #1
```
20 74
```
## 提示

**样例解释**

![](https://cdn.luogu.com.cn/upload/image_hosting/5zkpab9k.png)

本例输入的图如上所示，距离为 $2$ 的有序点对有$(1,3)$ 、$(2,4)$ 、$(3,1)$ 、$(3,5) $、$(4,2)$ 、$(5,3) $。

其联合权值分别为 $2,15,2,20,15,20$。其中最大的是 $20$，总和为 $74$。

 
**数据说明**

- 对于 $30\%$ 的数据，$1 < n \leq 100$；
- 对于 $60\%$ 的数据，$1 < n \leq 2000$；
- 对于 $100\%$ 的数据，$1 < n \leq 2\times 10^5$，$0 < W_i \leq 10000$。

保证一定存在可产生联合权值的有序点对。


---

---
title: "最接近神的人"
layout: "post"
diff: 普及/提高-
pid: P1774
tag: ['线段树', '树状数组', '递归', 'NOI 导刊', '排序']
---
# 最接近神的人
## 题目描述

破解了符文之语，小 FF 开启了通往地下的道路。当他走到最底层时，发现正前方有一扇巨石门，门上雕刻着一幅古代人进行某种活动的图案。而石门上方用古代文写着“神的殿堂”。小 FF 猜想里面应该就有王室的遗产了。但现在的问题是如何打开这扇门……。

仔细研究后，他发现门上的图案大概是说：古代人认为只有智者才是最容易接近神明的。而最聪明的人往往通过一种仪式选拔出来。仪式大概是指，即将隐退的智者为他的候选人写下一串无序的数字，并让他们进行一种操作，即交换序列中相邻的两个元素。而用最少的交换次数使原序列变成不下降序列的人即是下一任智者。

小 FF 发现门上同样有着 $n$ 个数字。于是他认为打开这扇门的秘诀就是找到让这个序列变成不下降序列所需要的最小次数。但小 FF 不会……只好又找到了你，并答应事成之后与你三七分……
## 输入格式

第一行为一个整数 $n$，表示序列长度。

第二行为 $n$ 个整数，表示序列中每个元素。
## 输出格式

一个整数 $\mathit{ans}$，即最少操作次数。

## 样例

### 样例输入 #1
```
4
2 8 0 3

```
### 样例输出 #1
```
3
```
## 提示

### 数据范围及约定

- 对于 $30\%$ 的数据 $1≤n≤10^4$。
- 对于 $100\%$ 的数据 $1≤n≤5\times 10^5$，$A_i\in [-2^{31}, 2^{31})$。

### 样例解释

开始序列为 $[2,8,0,3]$，目标序列为 $[0, 2, 3, 8]$，可进行三次操作的目标序列：

1. 交换 $(8,0)$，序列变成 $[2,0,8,3]$；
2. 交换 $(2,0)$，序列变成 $[0,2,8,3]$；
3. 交换 $(8,3)$，序列变成 $[0,2,3,8]$。



---

---
title: "跑步"
layout: "post"
diff: 普及/提高-
pid: P1793
tag: ['NOI 导刊']
---
# 跑步
## 题目描述

新牛到部队，CG 要求它们每天早上搞晨跑，从 $A$ 农场跑到 $B$ 农场。从 $A$ 农场到 $B$ 农场中有 $n-2$ 个路口，分别标上号，$A$ 农场为 $1$ 号，$B$ 农场为 $n$ 号，路口分别为 $2,3,4,\cdots,n-1$ 号，从 $A$ 农场到 $B$ 农场有很多条路径可以到达，而 CG 发现有的路口是必须经过的，即每条路径都经过的路口，CG 要把它们记录下来，这样 CG 就可以先到那个路口，观察新牛们有没有偷懒，而你的任务就是找出所有必经路口。
## 输入格式

第一行两个用空格隔开的整数 $n\ (3 \le n \le 2000)$ 和 $e\ (1 \le e \le 8000)$。

接下来从第 $2$ 到第 $e+1$ 行，每行两个用空格隔开的整数 $p$ 和 $q$，表示路口 $p$ 和 $q$ 之间有路径直达。

输入数据保证必经路口一定存在，并且每个路口都和 $A$ 农场、$B$ 农场相连通。
## 输出格式

第一行一个整数 $m$，表示必经路口的数目。

第二行按从小到大的顺序依次输出每个必经路口的编号，每两个数之间用一个空格隔开。
## 样例

### 样例输入 #1
```
6 6

1 2

2 4

2 3

3 5

4 5

5 6


```
### 样例输出 #1
```
2

2 5


```


---

---
title: "装备运输"
layout: "post"
diff: 普及/提高-
pid: P1794
tag: ['动态规划 DP', 'NOI 导刊', '背包 DP']
---
# 装备运输
## 题目描述

德国放松对英国的进攻后，把矛头指向了东边——苏联。$1943$ 年初，东线的战斗进行到白热化阶段。据可靠情报，$90$ 余万德国军队在库尔斯克准备发动浩大攻势。因此，朱可夫元帅要求你立即从远东的军工厂运输大量装备支援库尔斯克前线。列车司机告诉你，一趟列车最多可以容纳 $V$ 体积的武器装备，但是你可能不能装满，因为列车承受不了那么大的重量，一趟列车最多可以承载 $G$ 单位的重量。同时，军工厂仓库提供给你一份装备清单，详细记录了每件装备的体积、重量和火力。为了有效支援朱可夫元帅，你要找到一种方案，使得总火力值最大。
## 输入格式

第一行两个整数 $V$ 和 $G$，表示最大体积和重量。

第二行一个整数 $N$，表示仓库有 $N$ 件装备。

第三到 $N+2$ 行，每行 $3$ 个数 $T_i,V_i,G_i$，表示各装备的火力值、体积和重量。
## 输出格式

输出一个数，表示可能获得的最大火力值。

## 样例

### 样例输入 #1
```
6 5 
4
10 2 2
20 3 2 
40 4 3 
30 3 3 

```
### 样例输出 #1
```
50

```
## 提示

对于 $100\%$ 的数据，$1\le V, G, N \le 500$，$1 \leq T_i, V_i, G_i \leq 10^9$。


---

---
title: "小明搬家"
layout: "post"
diff: 普及/提高-
pid: P1798
tag: ['NOI 导刊']
---
# 小明搬家
## 题目描述

小明要搬家了，大家都来帮忙。

小明现在住在第 $N$ 楼，总共 $K$ 个人要把 $M$ 个大箱子搬上 $N$ 楼。

最开始 $M$ 个箱子都在 $1$ 楼，但是经过一段混乱的搬运已经乱掉了。最后大家发现这样混乱地搬运过程效率太低了，于是总结出了提高效率的方法。

大家的速度都是每分钟上（或下）一层楼。所有向上走的人手中都拿一个箱子，所有向下走的人手中都不拿箱子。到达第 $N$ 层立刻放下箱子向下走，到达第 $1$ 层立刻拿起箱子向上走。当一个人向上走，另一人向下走而在楼道里相遇时，向上走的人将手中的箱子交给另一人，两人同时反向。即原来拿箱子向上走的人不拿箱子向下走，原来不拿箱子向下走的人现拿着箱子向上走。

求将所有箱子搬完所需的最短时间。
## 输入格式

第一行 $N, K, M$，分别表示楼层数、人数、还放在一楼地上的箱子数。

接下来 $K$ 行，每行两个数 $A_i,B_i$。

$A_i$ 表示第 $i$ 人现所在的楼层数，$B_i$ 为 $0$ 或 $1$，为 $0$ 表示第 $i$ 人正拿着箱子向上走，为 $1$ 表示第 $i$ 人不拿箱子向下走。

输入满足没有任意两人正在同一楼层，在第 $1$ 层的人一定正拿着箱子向上走，在第 $N$ 层的人一定正不拿箱子向下走。
## 输出格式

仅包含一个整数，为搬完箱子的时间。

## 样例

### 样例输入 #1
```
5 2 4

1 0

3 0


```
### 样例输出 #1
```
20
```
## 提示

对于 $30\%$ 的数据，$K \leq 100$，$M \leq 100$；

对于 $60\%$ 的数据，$K \leq 1000$，$M \leq 10^9$;

对于 $100\%$ 的数据，$N \le 10^9$，$K \le 5 \times 10^5$，$M \le 10^9$。


---

---
title: "跑步"
layout: "post"
diff: 普及/提高-
pid: P1806
tag: ['动态规划 DP', '数学', 'NOI 导刊', '组合数学']
---
# 跑步
## 题目描述

路人甲准备跑 $n$ 圈来锻炼自己的身体，他准备分多次（$\gt1$）跑完，每次都跑正整数圈，然后休息下再继续跑。

为了有效地提高自己的体能，他决定每次跑的圈数都必须比上次跑的多。

可以假设他刚开始跑了 $0$ 圈，那么请问他可以有多少种跑完这 $n$ 圈的方案？
## 输入格式

一行一个整数，代表 $n$。
## 输出格式

一个整数表示跑完这 $n$ 圈的方案数。
## 样例

### 样例输入 #1
```
212
```
### 样例输出 #1
```
995645335
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $5\le n\le 500$。


---

---
title: "最长路"
layout: "post"
diff: 普及/提高-
pid: P1807
tag: ['图论', 'NOI 导刊', '广度优先搜索 BFS', '拓扑排序']
---
# 最长路
## 题目描述

设 $G$ 为有 $n$ 个顶点的带权有向无环图，$G$ 中各顶点的编号为 $1$ 到 $n$，请设计算法，计算图 $G$ 中 $1, n$ 间的最长路径。
## 输入格式

输入的第一行有两个整数，分别代表图的点数 $n$ 和边数 $m$。

第 $2$ 到第 $(m + 1)$ 行，每行 $3$ 个整数 $u, v, w$（$u<v$），代表存在一条从 $u$ 到  $v$ 边权为 $w$ 的边。
## 输出格式

输出一行一个整数，代表 $1$ 到 $n$ 的最长路。

若 $1$ 无法到达 $n$，请输出 $-1$。
## 样例

### 样例输入 #1
```
2 1
1 2 1
```
### 样例输出 #1
```
1
```
## 提示

**【数据规模与约定】**

- 对于 $20\%$的数据，$n \leq 100$，$m \leq 10^3$。
- 对于 $40\%$ 的数据，$n \leq 10^3$，$m \leq 10^{4}$。
- 对于 $100\%$ 的数据，$1 \leq n \leq 1500$，$0 \leq m \leq 5 \times 10^4$，$1 \leq u, v \leq n$，$-10^5 \leq w \leq 10^5$。


---

---
title: "素数密度"
layout: "post"
diff: 普及/提高-
pid: P1835
tag: ['NOI 导刊', '枚举', '素数判断,质数,筛法']
---
# 素数密度
## 题目背景

UPD:

- 2024.8.12：加入一组 Hack 数据。
## 题目描述

 给定 $L,R$，请计算区间 $[L,R]$ 中素数的个数。

   $1\leq L\leq R < 2^{31}$，$R-L\leq 10^6$。
## 输入格式

第一行，两个正整数 $L$ 和 $R$。
## 输出格式

一行，一个整数，表示区间中素数的个数。

## 样例

### 样例输入 #1
```
2 11
```
### 样例输出 #1
```
5
```


---

---
title: "Play with Power"
layout: "post"
diff: 普及/提高-
pid: P1839
tag: ['NOI 导刊']
---
# Play with Power
## 题目描述

Masha 和 Stas 正在玩一个游戏。在游戏的开始，给出一个数  $n$，同时有两个正整数  $a,b$，初始时满足 $a^b\le n$。

Masha 先手。每一回合，玩家要将 $a,b$ 的其中一个数加上  $1$，但不能使 $a^b>n$，否则该玩家输。

现在，Masha 想知道，假如两人都使用最优策略，对于同一个 $n$ 和不同的 $a,b$，谁将获胜呢？

## 输入格式

第一行一个数  $n$。

第二行一个数  $t$，表示数据组数。

接下来  $t$ 行，每行两个数  $a,b$，描述每组数据。

## 输出格式

共  $t$ 行，对于每组数据：

- 若 Masha 获胜，输出 `Masha`。
- 若 Stas 获胜，输出 `Stas`。
- 若平手，输出 `Missing`。
## 样例

### 样例输入 #1
```
9 

2 

2  2 

1  4 
```
### 样例输出 #1
```
Masha 

Missing
```
## 提示

#### 数据规模与约定

- 对于  $30\%$ 的数据，有  $1\le n\le 2\cdot10^3$。
- 对于  $100\%$ 的数据，有  $1\le n\le 10^8$， $1\le t\le 100$， $1\le a,b,a^b\le n$。


---

---
title: "Color the Axis"
layout: "post"
diff: 普及/提高-
pid: P1840
tag: ['并查集', 'NOI 导刊']
---
# Color the Axis
## 题目描述

在一条数轴上有 $n$ 个点，分别是 $1,2,\ldots,n$。一开始所有的点都被染成黑色。接着我们进行 $m$ 次操作，第 $i$ 次操作将 $[l_i,r_i]$ 这些点染成白色。请输出每个操作执行后剩余黑色点的个数。
## 输入格式

输入一行为 $n$ 和 $m$。下面 $m$ 行每行两个数 $l_i$，$r_i$。
## 输出格式

输出 $m$ 行，为每次操作后剩余黑色点的个数。
## 样例

### 样例输入 #1
```
10 3   
3 3   
5 7   
2 8     
```
### 样例输出 #1
```
9     
6     
3
```
## 提示

- 对于 $30\%$ 的数据，有 $1\le n\le2000$，$1\le m\le2000$；
- 对于 $100\%$ 的数据，有 $1\le l_i\le r_i\le n\le 2\times 10^5$，$1\le m\le 2\times10^5$。


---

---
title: "影像之结构化特征"
layout: "post"
diff: 普及/提高-
pid: P1845
tag: ['NOI 导刊']
---
# 影像之结构化特征
## 题目描述

在影像比对中，有一种方法是利用影像中的边缘（edge）信息，计算每个边缘资讯中具有代表性的结构化特征，以作为比对两张影像是否相似的判断标准。Water-filling 方法是从每个边缘图的一个端点开始，绕着相连的边缘点走并依序编号。若走到某一步时，遇到一个以上不同的连接点，则分成不同路径同时继续走，直到没有任何连接点为止。如果一个点和另一个点为上下左右相邻，就称为连接。

例如，在图 $1$ 的影像中包含三个边缘图，每个边缘图由一些互相连接的边缘点构成。图中以黑色的方块代表边缘点，白色的方块代表背景。在 Water-filling 方法中，首先，从第一行（row）开始，由左至右，由上至下，先找到第一个黑点并编号为 $1$。接着，找 $1$ 的下一个尚未编号的连接点并编号为 $2$。依此方法继续往下一个点前进依次编号。在编号 $6$ 的点之后有两个尚未编号的连接点，此时，则分为两条路线，并同时编号为 $7$ 继续往下走。当走到没有任何的相连点时，则结束现有边缘图的编号，并继续对影像中的其它边缘图编号。走完图 $1$ 所有边缘图后所得到的编号如图 $2$ 所示。所以，走完这三个边缘图所需要的步数分别为 $12$、 $7$ 及 $3$；所以，$12$、$7$ 及 $3$ 可以作为代表此张影像的结构化特征。请注意：位于斜对角上的两点不能算做连接，如：

![](https://cdn.luogu.com.cn/upload/pic/704.png)

请写一个程序计算每个影像中，以 Water-filling 方法走完其中所有的边缘图后，将每个边缘图需走的步数依走访的顺序列出。
## 输入格式

输入文件包含一个正方形的影像。每组影像以图的宽度 $n$ 开头 $(1 \le n \le 1000)$。接下来的 $n$ 行代表影像的内容：$0$ 表示背景的白点，$1$ 表示黑色的边缘点。
## 输出格式

对每一个输入的影像，以 Water-filling 方法走完所有的边缘图后，先印出此张影像中共有几个边缘图。接着，将每个边缘图需走的步数按升序列出。
## 样例

### 样例输入 #1
```
10 
0000000000 
0011110000 
0000010000 
0011111000 
0010110100 
0010010110 
0011110010 
0100010010 
0100000110 
0100000000 
```
### 样例输出 #1
```
3 
3 
7 
12
```


---

---
title: "发射站"
layout: "post"
diff: 普及/提高-
pid: P1901
tag: ['NOI 导刊', '栈', '单调栈']
---
# 发射站
## 题目描述

某地有 $N$ 个能量发射站排成一行，每个发射站 $i$ 都有不相同的高度 $H_i$，并能向两边（两端的发射站只能向一边）同时发射能量值为 $V_i$ 的能量，发出的能量只被两边**最近的且比它高**的发射站接收。显然，每个发射站发来的能量有可能被 $0$ 或 $1$ 或 $2$ 个其他发射站所接受。

请计算出接收最多能量的发射站接收的能量是多少。

## 输入格式

第 $1$ 行一个整数 $N$。

第 $2$ 到 $N+1$ 行，第 $i+1$ 行有两个整数 $H_i$ 和 $V_i$，表示第 $i$ 个发射站的高度和发射的能量值。
## 输出格式

输出仅一行，表示接收最多能量的发射站接收到的能量值。答案不超过 32 位带符号整数的表示范围。

## 样例

### 样例输入 #1
```
3
4 2 
3 5 
6 10

```
### 样例输出 #1
```
7
```
## 提示

对于 $40\%$ 的数据，$1\le N\le 5000,1\le H_i\le 10^5,1\le V_i\le 10^4$。

对于 $70\%$ 的数据，$1\le N\le 10^5,1\le H_i\le 2\times 10^9,1\le V_i\le 10^4$。

对于 $100\%$ 的数据，$1\le N\le 10^6,1\le H_i\le 2\times 10^9,1\le V_i\le 10^4$。


---

---
title: "最长括号匹配"
layout: "post"
diff: 普及/提高-
pid: P1944
tag: ['字符串', '动态规划 DP', 'NOI 导刊']
---
# 最长括号匹配
## 题目描述

对一个由(,),[,]括号组成的字符串，求出其中最长的括号匹配子串。具体来说，满足如下条件的字符串成为括号匹配的字符串：

  1.(),[]是括号匹配的字符串。

2.若A是括号匹配的串，则(A),[A]是括号匹配的字符串。

3.若A,B是括号匹配的字符串，则AB也是括号匹配的字符串。

例如：(),[],([]),()()都是括号匹配的字符串，而][,[(])则不是。

字符串A的子串是指由A中连续若干个字符组成的字符串。

例如，A,B,C,ABC,CAB,ABCABCd都是ABCABC的子串。空串是任何字符串的子串。

## 输入格式

输入一行，为一个仅由()[]组成的非空字符串。

## 输出格式

输出也仅有一行，为最长的括号匹配子串。若有相同长度的子串，输出位置靠前的子串。

## 样例

### 样例输入 #1
```
([(][()]]()

```
### 样例输出 #1
```
[()]

```
### 样例输入 #2
```
())[]
```
### 样例输出 #2
```
()
```
## 提示

【数据范围】

对20%的数据，字符串长度<=100.

对50%的数据，字符串长度<=10000.

对100%的数据，字符串长度<=1000000.



---

---
title: "遗址"
layout: "post"
diff: 普及/提高-
pid: P1959
tag: ['搜索', 'NOI 导刊']
---
# 遗址
## 题目描述

很久很久以前有一座寺庙，从上往下看寺庙的形状正好是一个正方形，由 $4$ 个角上竖立的圆柱搭建而成。现在圆柱都倒塌了，只在地上留下圆形的痕迹，可是现在地上有很多这样的痕迹，专家说一定是最大的那个。

写一个程序，给出圆柱的坐标，找出由 $4$ 个圆柱构成的最大的正方形，因为这就是寺庙的位置，要求计算出最大的面积。注意正方形的边不一定平行于坐标轴。

例如图有 $10$ 根柱子，其中 $(4,2),\allowbreak(5,2),\allowbreak(5,3),\allowbreak(4,3)$ 可以形成一个正方形，$(1,1),\allowbreak(4,0),\allowbreak(5,3),\allowbreak(2,4)$ 也可以，后者是其中最大的，面积为 $10$。

![](https://cdn.luogu.com.cn/upload/image_hosting/pjic0frl.png)

## 输入格式

第一行包含一个 $N(1\leq N\leq 3000)$，表示柱子的数量。

接下来 $N$ 行，每行有两个空格隔开的整数表示柱子的坐标（坐标值在 $0$ 到 $5000$ 之间），柱子的位置互不相同。
## 输出格式

如果存在正方形，输出最大的面积，否则输出 $0$。
## 样例

### 样例输入 #1
```
10
9 4
4 3
1 1
4 2
2 4
5 8
4 0
5 3
0 5
5 2

```
### 样例输出 #1
```
10
```
## 提示


【数据范围】

$30\%$ 满足：$1\leq N \leq100$。

$60\%$ 满足：$1\leq N \leq500$。

$100\%$ 满足：$1\leq N \leq3000$。



---

---
title: "郁闷的记者"
layout: "post"
diff: 普及/提高-
pid: P1960
tag: ['图论', 'NOI 导刊', 'Special Judge']
---
# 郁闷的记者
## 题目描述

你是一个体育报社的记者，你接受到一个艰难的任务：有 $N$ 支足球队参加足球比赛，现在给你一些比赛的结果，需要你给出各支球队的排名，从 $1$ 到 $N$。

以下是给你的一些信息：

 1. 没有平局；
 2. 不同的球队排名不能相同；
 3. 对于所有满足 $1 \le a<b \le N$，第 $a$ 名的球队一定可以打败第 $b$ 名的球队。

给你部分比赛结果，要求给出排名，并且判断是否存在另一种排名方法满足给你的比赛结果。

## 输入格式

第一行输入 $N(1 \le N \le 5000)$，表示球队的数量，编号为 $1$ 到 $N$。

第二行输入 $M(1 \le M \le 100,000)$，表示给出的比赛场数。

接下来 $M$ 行，每行两个整数 $X_i$，$Y_i$，表示 $X_i$ 能打败 $Y_i$。

## 输出格式

输出包含 $N+1$ 行，前 $N$ 行描述球队的排名，第 $i$ 个数表示第 $i$ 名的球队，第 $N+1$ 行包含一个整数，如果为 $0$ 表示不存在其他的排名方法，如果为 $1$ 表示还有其他的排名方法。

## 样例

### 样例输入 #1
```
3
2
2 1
2 3
```
### 样例输出 #1
```
2
1
3
1

```
## 提示

【数据范围】

$30\%$ 的数据满足：$1 \le N \le7$，$1 \le M \le 15$

$60\%$的数据满足：$1 \le N \le 100$，$1 \le M \le 2000$

$100\%$ 的数据满足：$1 \le N \le 5000$，$1 \le M \le 100000$


本题已加入spj，如果输出的最后一行错误将会提示 `Your decide is wrong!`

如果存在多种排名情况，排名错误将会提示 `Wrong ranks!`

如果情况固定且您的答案错误将会提示 `In line X,Your ans is wrong:expected = X,found = Y`



---

---
title: "[NOIP 2013 提高组] 转圈游戏"
layout: "post"
diff: 普及/提高-
pid: P1965
tag: ['模拟', '数学', '2013', 'NOIP 提高组']
---
# [NOIP 2013 提高组] 转圈游戏
## 题目背景

NOIP2013 提高组 D1T1
## 题目描述

$n$ 个小伙伴（编号从 $0$ 到 $n-1$）围坐一圈玩游戏。按照顺时针方向给 $n$ 个位置编号，从 $0$ 到 $n-1$。最初，第 $0$ 号小伙伴在第 $0$ 号位置，第 $1$ 号小伙伴在第 $1$ 号位置，……，依此类推。游戏规则如下：每一轮第 $0$ 号位置上的小伙伴顺时针走到第 $m$ 号位置，第 $1$ 号位置小伙伴走到第 $m+1$ 号位置，……，依此类推，第 $n - m$ 号位置上的小伙伴走到第 $0$ 号位置，第 $n - m+1$ 号位置上的小伙伴走到第 $1$ 号位置，……，第 $n-1$ 号位置上的小伙伴顺时针走到第 $m-1$ 号位置。

现在，一共进行了 ${10}^k$ 轮，请问 $x$ 号小伙伴最后走到了第几号位置。
## 输入格式

共一行，包含四个整数 $n, m, k, x$，每两个整数之间用一个空格隔开。

## 输出格式

一个整数，表示 ${10}^k$ 轮后 $x$ 号小伙伴所在的位置编号。
## 样例

### 样例输入 #1
```
10 3 4 5

```
### 样例输出 #1
```
5

```
## 提示

对于 $30\%$ 的数据，$0 < k < 7$；

对于 $80\%$ 的数据，$0 < k < {10}^7$；

对于 $100\%$ 的数据，$1 < n < {10}^6$，$0 < m < n$，$0 \le x \le n$，$0 < k < {10}^9$。


---

---
title: "[NOIP 2013 提高组] 积木大赛"
layout: "post"
diff: 普及/提高-
pid: P1969
tag: ['模拟', '贪心', '2013', '递归', 'NOIP 提高组']
---
# [NOIP 2013 提高组] 积木大赛
## 题目背景

NOIP2013 提高组 D2T1
## 题目描述

春春幼儿园举办了一年一度的“积木大赛”。今年比赛的内容是搭建一座宽度为 $n$ 的大厦，大厦可以看成由 $n$ 块宽度为 $1$ 的积木组成，第 $i$ 块积木的最终高度需要是 $h_i$。

在搭建开始之前，没有任何积木（可以看成 $n$ 块高度为 $0$ 的积木）。接下来每次操作，小朋友们可以选择一段连续区间 $[l, r]$，然后将第 $L$ 块到第 $R$ 块之间（含第 $L$ 块和第 $R$ 块）所有积木的高度分别增加 $1$。

小 M 是个聪明的小朋友，她很快想出了建造大厦的最佳策略，使得建造所需的操作次数最少。但她不是一个勤于动手的孩子，所以想请你帮忙实现这个策略，并求出最少的操作次数。

## 输入格式

包含两行，第一行包含一个整数 $n$，表示大厦的宽度。

第二行包含 $n$ 个整数，第 $i$ 个整数为 $h_i$。

## 输出格式

建造所需的最少操作数。

## 样例

### 样例输入 #1
```
5
2 3 4 1 2
```
### 样例输出 #1
```
5
```
## 提示

**样例解释**

其中一种可行的最佳方案，依次选择：$[1,5]$，$ [1,3]$，$[2,3]$，$[3,3]$，$ [5,5]$。

**数据范围**

- 对于 $30\%$ 的数据，有 $1 \leq n \leq 10$；
- 对于 $70\%$ 的数据，有 $1 \leq n \leq 1000$；
- 对于 $100\%$ 的数据，有 $1 \leq n \leq 100000$，$0 \leq h_i \leq 10000$。



---

---
title: "[NOIP 2013 提高组] 花匠"
layout: "post"
diff: 普及/提高-
pid: P1970
tag: ['动态规划 DP', '2013', 'NOIP 提高组']
---
# [NOIP 2013 提高组] 花匠
## 题目背景

NOIP2013 提高组 D2T2
## 题目描述

花匠栋栋种了一排花，每株花都有自己的高度。花儿越长越大，也越来越挤。栋栋决定把这排中的一部分花移走，将剩下的留在原地，使得剩下的花能有空间长大，同时，栋栋希望剩下的花排列得比较别致。

具体而言，栋栋的花的高度可以看成一列整数 $h_1,h_2,\ldots,h_n$。设当一部分花被移走后，剩下的花的高度依次为 $g_1,g_2,\ldots,g_m$，则栋栋希望下面两个条件中至少有一个满足：

条件 A：对于所有的 $1 \le i \le \frac{m}{2}$，有 $g_{2 i} > g_{2 i - 1}$，同时对于所有的 $1 \le i \le \frac{m}{2}$，有 $g_{2 i} > g_{2 i + 1}$；  
条件 B：对于所有的 $1 \le i \le \frac{m}{2}$，有 $g_{2 i} < g_{2 i - 1}$，同时对于所有的 $1 \le i \le \frac{m}{2}$，有 $g_{2 i} < g_{2 i + 1}$。

注意上面两个条件在 $m = 1$ 时同时满足，当 $m > 1 $ 时最多有一个能满足。

请问，栋栋最多能将多少株花留在原地。

## 输入格式

第一行包含一个整数 $n$，表示开始时花的株数。

第二行包含 $n$ 个整数，依次为 $h_1,h_2,\ldots,h_n$，表示每株花的高度。

## 输出格式

输出一行，包含一个整数，表示最多能留在原地的花的株数。
## 样例

### 样例输入 #1
```
5
5 3 2 1 2

```
### 样例输出 #1
```
3

```
## 提示

**输入输出样例说明**

有多种方法可以正好保留 $3$ 株花，例如，留下第 $1$、$4$、$5$ 株，高度分别为 $5$、$1$、$2$，满足条件 B。

**数据范围**

对于 $20\%$的数据，$n \le 10$；

对于 $30\%$的数据，$n \le 25$；

对于 $70\%$的数据，$n \le 1000$，$0 \le h_i \le 1000$；

对于 $100\%$的数据，$1 \le n \le {10}^5$，$0 \le h_i \le {10}^6$，所有的 $h_i$ 随机生成，所有随机数服从某区间内的均匀分布。



---

---
title: "[NOI2011] 道路修建"
layout: "post"
diff: 普及/提高-
pid: P2052
tag: ['树形数据结构', '2011', 'NOI', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# [NOI2011] 道路修建
## 题目描述

在 W 星球上有 $n$ 个国家。为了各自国家的经济发展，他们决定在各个国家之间建设双向道路使得国家之间连通。但是每个国家的国王都很吝啬，他们只愿意修建恰好 $n - 1$ 条双向道路。

每条道路的修建都要付出一定的费用，这个费用等于道路长度乘以道路两端 的国家个数之差的绝对值。例如，在下图中，虚线所示道路两端分别有 $2$ 个、$4$ 个国家，如果该道路长度为 $1$，则费用为 $1×|2 - 4|=2$。图中圆圈里的数字表示国家的编号。
 
 ![](https://cdn.luogu.com.cn/upload/pic/2604.png) 

由于国家的数量十分庞大，道路的建造方案有很多种，同时每种方案的修建费用难以用人工计算，国王们决定找人设计一个软件，对于给定的建造方案，计算出所需要的费用。请你帮助国王们设计一个这样的软件。

## 输入格式

输入的第一行包含一个整数 $n$，表示 W 星球上的国家的数量，国家从 $1$ 到 $n$ 编号。

接下来 $n–1$ 行描述道路建设情况，其中第 $i$ 行包含三个整数 $a_i,b_i$ 和 $c_i$，表示第 $i$ 条双向道路修建在 $a_i$ 与 $b_i$ 两个国家之间，长度为 $c_i$。

## 输出格式

输出一个整数，表示修建所有道路所需要的总费用。

## 样例

### 样例输入 #1
```
6
1 2 1
1 3 1
1 4 2
6 3 1
5 2 1
```
### 样例输出 #1
```
20
```
## 提示

对于 $100\%$ 的数据，$1\leq a_i, b_i\leq n$，$0\leq c_i\leq10^6$，$2\leq n\leq 10^6$。
|测试点编号|$n=$|
|:-:|:-:|
|$1$|$2$|
|$2$|$10$|
|$3$|$100$|
|$4$|$200$|
|$5$|$500$|
|$6$|$600$|
|$7$|$800$|
|$8$|$1000$|
|$9$|$10^4$|
|$10$|$2\times 10^4$|
|$11$|$5\times 10^4$|
|$12$|$6\times 10^4$|
|$13$|$8\times 10^4$|
|$14$|$10^5$|
|$15$|$6\times 10^5$|
|$16$|$7\times 10^5$|
|$17$|$8\times 10^5$|
|$18$|$9\times 10^5$|
|$19,20$|$10^6$|




---

---
title: "[NOIP 2016 普及组] 海港"
layout: "post"
diff: 普及/提高-
pid: P2058
tag: ['模拟', '2016', 'NOIP 普及组']
---
# [NOIP 2016 普及组] 海港
## 题目背景

NOIP2016 普及组 T3
## 题目描述

小 K 是一个海港的海关工作人员，每天都有许多船只到达海港，船上通常有很多来自不同国家的乘客。

小 K 对这些到达海港的船只非常感兴趣，他按照时间记录下了到达海港的每一艘船只情况；对于第 $i$ 艘到达的船，他记录了这艘船到达的时间 $t_i$ (单位：秒)，船上的乘客数 $k_i$，以及每名乘客的国籍 $x_{i,1}, x_{i,2},\dots,x_{i,k}$。

小K统计了 $n$ 艘船的信息，希望你帮忙计算出以每一艘船到达时间为止的 $24$ 小时（$24$ 小时 $=86400$ 秒）内所有乘船到达的乘客来自多少个不同的国家。

形式化地讲，你需要计算 $n$ 条信息。对于输出的第 $i$ 条信息，你需要统计满足 $t_i-86400<t_p \le t_i$ 的船只 $p$，在所有的 $x_{p,j}$ 中，总共有多少个不同的数。

## 输入格式

第一行输入一个正整数 $n$，表示小 K 统计了 $n$ 艘船的信息。

接下来 $n$ 行，每行描述一艘船的信息：前两个整数 $t_i$ 和 $k_i$ 分别表示这艘船到达海港的时间和船上的乘客数量，接下来 $k_i$ 个整数 $x_{i,j}$ 表示船上乘客的国籍。

保证输入的 $t_i$ 是递增的，单位是秒；表示从小K第一次上班开始计时，这艘船在第 $t_i$ 秒到达海港。

保证 $1 \le n \le 10^5$，$\sum{k_i} \le 3\times 10^5 $ ，$1\le x_{i,j} \le 10^5$， $1 \le t_{i-1}\le  t_i    \le  10^9$。


其中 $\sum{k_i}$ 表示所有的 $k_i$ 的和。

## 输出格式

输出 $n$ 行，第 $i$ 行输出一个整数表示第 $i$ 艘船到达后的统计信息。

## 样例

### 样例输入 #1
```
3
1 4 4 1 2 2
2 2 2 3
10 1 3
```
### 样例输出 #1
```
3
4
4

```
### 样例输入 #2
```
4
1 4 1 2 2 3
3 2 2 3
86401 2 3 4
86402 1 5
```
### 样例输出 #2
```
3
3
3
4
```
## 提示

【样例解释 1】

第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $4,1,2,2$，共来自 $3$ 个不同的国家；

第二艘船在第 $2$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4 + 2 = 6$ 个乘客，分别是来自国家 $4,1,2,2,2,3$，共来自 $4$ 个不同的国家；

第三艘船在第 $10$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船、第二艘船和第三艘船，共有 $4+2+1=7$ 个乘客，分别是来自国家 $4,1,2,2,2,3,3$，共来自 $4$ 个不同的国家。

【样例解释 2】

第一艘船在第 $1$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船，共有 $4$ 个乘客，分别是来自国家 $1,2,2,3$，共来自 $3$ 个不同的国家。

第二艘船在第 $3$ 秒到达海港，最近 $24$ 小时到达的船是第一艘船和第二艘船，共有 $4+2=6$ 个乘客，分别是来自国家 $1,2,2,3,2,3$，共来自 $3$ 个不同的国家。

第三艘船在第 $86401$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船和第三艘船，共有 $2+2=4$ 个乘客，分别是来自国家 $2,3,3,4$，共来自 $3$ 个不同的国家。

第四艘船在第 $86402$ 秒到达海港，最近 $24$ 小时到达的船是第二艘船、第三艘船和第四艘船，共有 $2+2+1=5$ 个乘客，分别是来自国家 $2,3,3,4,5$，共来自 $4$个 不同的国家。

【数据范围】

- 对于 $10\%$ 的测试点，$n=1,\sum k_i \leq 10,1 \leq x_{i,j} \leq 10, 1 \leq t_i \leq 10$。
- 对于 $20\%$ 的测试点，$1 \leq n \leq 10, \sum k_i \leq 100,1 \leq x_{i,j} \leq 100,1 \leq t_i \leq 32767$。
- 对于 $40\%$ 的测试点，$1 \leq n \leq 100, \sum k_i \leq 100,1 \leq x_{i,j} \leq 100,1 \leq t_i \leq 86400$。
- 对于 $70\%$ 的测试点，$1 \leq n \leq 1000, \sum k_i \leq 3000,1 \leq x_{i,j} \leq 1000,1 \leq t_i \leq 10^9$。
- 对于 $100\%$ 的测试点，$1 \leq n \leq 10^5,\sum k_i \leq 3\times 10^5, 1 \leq x_{i,j} \leq 10^5,1\leq t_i \leq 10^9$。



---

---
title: "[NOIP 1996 提高组] 挖地雷"
layout: "post"
diff: 普及/提高-
pid: P2196
tag: ['动态规划 DP', '搜索', '2001', 'NOIP 提高组', '深度优先搜索 DFS', '1996']
---
# [NOIP 1996 提高组] 挖地雷
## 题目描述

在一个地图上有 $N\ (N \le 20)$ 个地窖，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后可以沿着指出的连接往下挖（仅能选择一条路径），当无连接时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。

## 输入格式

有若干行。

第 $1$ 行只有一个数字，表示地窖的个数 $N$。

第 $2$ 行有 $N$ 个数，分别表示每个地窖中的地雷个数。

第 $3$ 行至第 $N+1$ 行表示地窖之间的连接情况：

第 $3$ 行有 $n-1$ 个数（$0$ 或 $1$），表示第一个地窖至第 $2$ 个、第 $3$ 个 $\dots$ 第 $n$ 个地窖有否路径连接。如第 $3$ 行为 $11000\cdots 0$，则表示第 $1$ 个地窖至第 $2$ 个地窖有路径，至第 $3$ 个地窖有路径，至第 $4$ 个地窖、第 $5$ 个 $\dots$ 第 $n$ 个地窖没有路径。

第 $4$ 行有 $n-2$ 个数，表示第二个地窖至第 $3$ 个、第 $4$ 个 $\dots$ 第 $n$ 个地窖有否路径连接。

……

第 $n+1$ 行有 $1$ 个数，表示第 $n-1$ 个地窖至第 $n$ 个地窖有否路径连接。（为 $0$ 表示没有路径，为 $1$ 表示有路径）。
## 输出格式

第一行表示挖得最多地雷时的挖地雷的顺序，各地窖序号间以一个空格分隔，不得有多余的空格。

第二行只有一个数，表示能挖到的最多地雷数。

## 样例

### 样例输入 #1
```
5
10 8 4 7 6
1 1 1 0
0 0 0
1 1
1

```
### 样例输出 #1
```
1 3 4 5
27
```
## 提示

**【题目来源】**

NOIP 1996 提高组第三题


---

---
title: "[NOIP 2014 普及组] 螺旋矩阵"
layout: "post"
diff: 普及/提高-
pid: P2239
tag: ['模拟', '数学', '2014', 'NOIP 普及组']
---
# [NOIP 2014 普及组] 螺旋矩阵
## 题目背景

NOIP2014 普及组 T3
## 题目描述

一个 $n$ 行 $ n$ 列的螺旋矩阵可由如下方法生成：


从矩阵的左上角（第 $1$ 行第 $1$ 列）出发，初始时向右移动；如果前方是未曾经过的格子，则继续前进，否则右转；重复上述操作直至经过矩阵中所有格子。根据经过顺序，在格子中依次填入 $1, 2, 3, \dots, n^2$，便构成了一个螺旋矩阵。


下图是一个 $n = 4$ 时的螺旋矩阵。

$$\begin{pmatrix}
 1 &    2  &   3   &  4 \\
12 &   13  &  14   &  5 \\
11 &   16  &  15   &  6 \\
10 &    9  &   8   &  7 \\
\end{pmatrix}$$

现给出矩阵大小 $n$ 以及 $i$ 和 $j$，请你求出该矩阵中第 $i$ 行第 $j$ 列的数是多少。

## 输入格式

共一行，包含三个整数 $n$, $i$, $j$，每两个整数之间用一个空格隔开，分别表示矩阵大小、待求的数所在的行号和列号。

## 输出格式

一个整数，表示相应矩阵中第 $i$ 行第 $j$ 列的数。

## 样例

### 样例输入 #1
```
4 2 3
```
### 样例输出 #1
```
14
```
## 提示

【数据说明】

对于 $50\%$ 的数据，$1 \leqslant n \leqslant 100$;

对于 $100\%$ 的数据，$1 \leqslant n \leqslant 30,000,1 \leqslant i \leqslant n,1 \leqslant j \leqslant n$。



---

---
title: "[NOIP 2014 提高组] 寻找道路"
layout: "post"
diff: 普及/提高-
pid: P2296
tag: ['搜索', '图论', '2014', 'NOIP 提高组']
---
# [NOIP 2014 提高组] 寻找道路
## 题目背景

NOIP2014 提高组 D2T2
## 题目描述

在有向图 $G$ 中，每条边的长度均为 $1$，现给定起点和终点，请你在图中找一条从起点到终点的路径，该路径满足以下条件：

1. 路径上的所有点的出边所指向的点都直接或间接与终点连通。
2. 在满足条件 $1$ 的情况下使路径最短。

注意：图 $G$ 中可能存在重边和自环，题目保证终点没有出边。

请你输出符合条件的路径的长度。
## 输入格式

第一行有两个用一个空格隔开的整数 $n$ 和 $m$，表示图有 $n$ 个点和 $m$ 条边。

接下来的 $m$ 行每行 $2$ 个整数 $x,y$，之间用一个空格隔开，表示有一条边从点 $x$ 指向点 $y$。

最后一行有两个用一个空格隔开的整数 $s,t$，表示起点为 $s$，终点为 $t$。
## 输出格式

输出只有一行，包含一个整数，表示满足题目描述的最短路径的长度。如果这样的路径不存在，输出 $-1$。
## 样例

### 样例输入 #1
```
3 2
1 2
2 1
1 3
```
### 样例输出 #1
```
-1
```
### 样例输入 #2
```
6 6
1 2
1 3
2 6
2 5  
4 5
3 4
1 5
```
### 样例输出 #2
```
3
```
## 提示

**样例 1 解释**

![](https://cdn.luogu.com.cn/upload/image_hosting/2p3mke49.png) 

如上图所示，箭头表示有向道路，圆点表示城市。起点 $1$ 与终点 $3$ 不连通，所以满足题目描述的路径不存在，故输出 $-1$。

**样例 2 解释**

![](https://cdn.luogu.com.cn/upload/image_hosting/tm2e1lqq.png)
如上图所示，满足条件的路径为 $1\to 3\to 4\to 5$。注意点 $2$ 不能在答案路径中，因为点 $2$ 连了一条边到点 $6$，而点 $6$ 不与终点 $5$ 连通。

**数据范围及约定**

- 对于 $30\%$ 的数据，$0<n\le10$，$0<m\le 20$。
- 对于 $60\%$ 的数据，$0<n\le100$，$0<m\le 2000$。
- 对于 $100\%$ 的数据，$0<n\le 10^4$，$0<m\le 2\times 10^5$，$0<x,y,s,t\le n,x,s\ne t$。


---

---
title: "[NOIP 2015 提高组] 信息传递"
layout: "post"
diff: 普及/提高-
pid: P2661
tag: ['图论', '2015', '并查集', 'NOIP 提高组']
---
# [NOIP 2015 提高组] 信息传递
## 题目背景

NOIP2015 Day1T2
## 题目描述

有 $n$ 个同学（编号为 $1$ 到 $n$）正在玩一个信息传递的游戏。在游戏里每人都有一个固定的信息传递对象，其中，编号为 $i$ 的同学的信息传递对象是编号为 $T_i$ 的同学。

游戏开始时，每人都只知道自己的生日。之后每一轮中，所有人会同时将自己当前所知的生日信息告诉各自的信息传递对象（注意：可能有人可以从若干人那里获取信息，但是每人只会把信息告诉一个人，即自己的信息传递对象）。当有人从别人口中得知自己的生日时，游戏结束。请问该游戏一共可以进行几轮？
## 输入格式

输入共 $2$ 行。

第一行包含 $1$ 个正整数 $n$，表示 $n$ 个人。

第二行包含 $n$ 个用空格隔开的正整数 $T_1,T_2,\cdots,T_n$，其中第 $i$ 个整数 $T_i$ 表示编号为 $i$ 的同学的信息传递对象是编号为 $T_i$ 的同学，$T_i\leq n$ 且 $T_i\neq i$。
## 输出格式

共一行一个整数，表示游戏一共可以进行多少轮。
## 样例

### 样例输入 #1
```
5
2 4 2 3 1
```
### 样例输出 #1
```
3
```
## 提示

**样例 1 解释：**

![](https://cdn.luogu.com.cn/upload/image_hosting/3ca5zl3c.png)

游戏的流程如图所示。当进行完第 $3$ 轮游戏后，$4$ 号玩家会听到 $2$ 号玩家告诉他自己的生日，所以答案为 $3$。当然，第 $3$ 轮游戏后，$2$ 号玩家、 $3$ 号玩家都能从自己的消息来源得知自己的生日，同样符合游戏结束的条件。

- 对于 $30\%$ 的数据，$n\le 200$；
- 对于 $60\%$ 的数据，$n\le 2500$；
- 对于 $100\%$ 的数据，$n\le 2\times 10^5$。



---

---
title: "[NOIP 2015 提高组] 跳石头"
layout: "post"
diff: 普及/提高-
pid: P2678
tag: ['贪心', '2015', '二分', 'NOIP 提高组']
---
# [NOIP 2015 提高组] 跳石头
## 题目背景

NOIP2015 Day2T1
## 题目描述

一年一度的“跳石头”比赛又要开始了！

这项比赛将在一条笔直的河道中进行，河道中分布着一些巨大岩石。组委会已经选择好了两块岩石作为比赛起点和终点。在起点和终点之间，有 $N$ 块岩石（不含起点和终点的岩石）。在比赛过程中，选手们将从起点出发，每一步跳向相邻的岩石，直至到达终点。

为了提高比赛难度，组委会计划移走一些岩石，使得选手们在比赛过程中的最短跳跃距离尽可能长。由于预算限制，组委会至多从起点和终点之间移走 $M$ 块岩石（不能移走起点和终点的岩石）。
## 输入格式

第一行包含三个整数 $L,N,M$，分别表示起点到终点的距离，起点和终点之间的岩石数，以及组委会至多移走的岩石数。保证 $L \geq 1$ 且 $N \geq M \geq 0$。

接下来 $N$ 行，每行一个整数，第 $i$ 行的整数 $D_i\,( 0 < D_i < L)$， 表示第 $i$ 块岩石与起点的距离。这些岩石按与起点距离从小到大的顺序给出，且不会有两个岩石出现在同一个位置。
## 输出格式

一个整数，即最短跳跃距离的最大值。
## 样例

### 样例输入 #1
```
25 5 2 
2
11
14
17 
21
```
### 样例输出 #1
```
4
```
## 提示

### 输入输出样例 1 说明

将与起点距离为 $2$ 和 $14$ 的两个岩石移走后，最短的跳跃距离为 $4$（从与起点距离 $17$ 的岩石跳到距离 $21$ 的岩石，或者从距离 $21$ 的岩石跳到终点）。

### 数据规模与约定

对于 $20\%$的数据，$0 \le M \le N \le 10$。    
对于 $50\%$ 的数据，$0 \le M \le N \le 100$。  
对于 $100\%$ 的数据，$0 \le M \le N \le 50000,1 \le L 
 \le 10^9$。



---

---
title: "[NOIP 2016 提高组] 组合数问题"
layout: "post"
diff: 普及/提高-
pid: P2822
tag: ['数学', '2016', 'NOIP 提高组', '组合数学']
---
# [NOIP 2016 提高组] 组合数问题
## 题目背景

NOIP2016 提高组 D2T1
## 题目描述

组合数 $\binom{n}{m}$ 表示的是从 $n$ 个物品中选出 $m$ 个物品的方案数。举个例子，从 $(1,2,3)$ 三个物品中选择两个物品可以有 $(1,2),(1,3),(2,3)$ 这三种选择方法。根据组合数的定义，我们可以给出计算组合数 $\binom{n}{m}$ 的一般公式：

$$\binom{n}{m}=\frac{n!}{m!(n-m)!}$$

其中 $n!=1\times2\times\cdots\times n$；特别地，定义 $0!=1$。

小葱想知道如果给定 $n,m$ 和 $k$，对于所有的 $0\leq i\leq n,0\leq j\leq \min \left ( i, m \right )$ 有多少对 $(i,j)$ 满足 $k\mid\binom{i}{j}$。
## 输入格式

第一行有两个整数 $t,k$，其中 $t$ 代表该测试点总共有多少组测试数据，$k$ 的意义见问题描述。

接下来 $t$ 行每行两个整数 $n,m$，其中 $n,m$ 的意义见问题描述。
## 输出格式

共 $t$ 行，每行一个整数代表所有的 $0\leq i\leq n,0\leq j\leq \min \left ( i, m \right )$ 中有多少对 $(i,j)$ 满足 $k\mid\binom{i}{j}$。
## 样例

### 样例输入 #1
```
1 2
3 3
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
2 5
4 5
6 7
```
### 样例输出 #2
```
0
7

```
## 提示

【样例1说明】

在所有可能的情况中，只有 $\binom{2}{1} = 2$ 一种情况是 $2$ 的倍数。

【子任务】

![](https://cdn.luogu.com.cn/upload/pic/3457.png)

- 对于全部的测试点，保证 $0 \leq n, m \leq 2 \times 10^3$，$1 \leq t \leq 10^4$。


---

---
title: "[NOIP 2017 提高组] 小凯的疑惑"
layout: "post"
diff: 普及/提高-
pid: P3951
tag: ['数学', '2017', 'NOIP 提高组', '不定方程', '中国剩余定理 CRT', '构造']
---
# [NOIP 2017 提高组] 小凯的疑惑
## 题目背景

NOIP2017 提高组 D1T1
## 题目描述

小凯手中有两种面值的金币，两种面值均为正整数且彼此互素。每种金币小凯都有无数个。在不找零的情况下，仅凭这两种金币，有些物品他是无法准确支付的。现在小凯想知道在无法准确支付的物品中，最贵的价值是多少金币？

注意：输入数据保证存在小凯无法准确支付的商品。

## 输入格式

两个正整数 $a$ 和 $b$，它们之间用一个空格隔开，表示小凯中金币的面值。

## 输出格式

一个正整数 $N$，表示不找零的情况下，小凯用手中的金币不能准确支付的最贵的物品的价值。

## 样例

### 样例输入 #1
```
3 7
```
### 样例输出 #1
```
11

```
## 提示

【输入输出样例 1 说明】

小凯手中有面值为 $3$ 和 $7$ 的金币无数个，在不找零的前提下无法准确支付价值为 $1,2,4,5,8,11$ 的物品，其中最贵的物品价值为 $11$，比 $11$ 贵的物品都能买到，比如：

$12 = 3 \times 4 + 7 \times 0$；

$13 = 3 \times 2 + 7 \times 1$；

$14 = 3 \times 0 + 7 \times 2$；

$15 = 3 \times 5 + 7 \times 0 $。


【数据范围与约定】

对于 $30\%$ 的数据： $1 \le a,b \le 50 $。

对于 $60\%$ 的数据： $1 \le a,b \le 10^4 $。

对于$ 100\%$ 的数据：$1 \le a,b \le 10^9 $。



---

---
title: "[NOIP 2017 提高组] 奶酪"
layout: "post"
diff: 普及/提高-
pid: P3958
tag: ['搜索', '2017', '并查集', 'NOIP 提高组', '广度优先搜索 BFS', '深度优先搜索 DFS']
---
# [NOIP 2017 提高组] 奶酪
## 题目背景

NOIP2017 提高组 D2T1
## 题目描述

现有一块大奶酪，它的高度为 $h$，它的长度和宽度我们可以认为是无限大的，奶酪中间有许多半径相同的球形空洞。我们可以在这块奶酪中建立空间坐标系，在坐标系中，奶酪的下表面为 $z = 0$，奶酪的上表面为 $z = h$。

现在，奶酪的下表面有一只小老鼠 Jerry，它知道奶酪中所有空洞的球心所在的坐标。如果两个空洞相切或是相交，则 Jerry 可以从其中一个空洞跑到另一个空洞，特别地，如果一个空洞与下表面相切或是相交，Jerry 则可以从奶酪下表面跑进空洞；如果一个空洞与上表面相切或是相交，Jerry 则可以从空洞跑到奶酪上表面。

位于奶酪下表面的 Jerry 想知道，在不破坏奶酪的情况下，能否利用已有的空洞跑 到奶酪的上表面去?

空间内两点 $P_1(x_1,y_1,z_1)$、$P2(x_2,y_2,z_2)$ 的距离公式如下：


$$\mathrm{dist}(P_1,P_2)=\sqrt{(x_1-x_2)^2+(y_1-y_2)^2+(z_1-z_2)^2}$$

## 输入格式

每个输入文件包含多组数据。

第一行，包含一个正整数 $T$，代表该输入文件中所含的数据组数。

接下来是 $T$ 组数据，每组数据的格式如下： 第一行包含三个正整数 $n,h,r$，两个数之间以一个空格分开，分别代表奶酪中空洞的数量，奶酪的高度和空洞的半径。

接下来的 $n$ 行，每行包含三个整数 $x,y,z$，两个数之间以一个空格分开，表示空洞球心坐标为 $(x,y,z)$。

## 输出格式

 $T$ 行，分别对应 $T$ 组数据的答案，如果在第 $i$ 组数据中，Jerry 能从下表面跑到上表面，则输出 `Yes`，如果不能，则输出 `No`。

## 样例

### 样例输入 #1
```
3 
2 4 1 
0 0 1 
0 0 3 
2 5 1 
0 0 1 
0 0 4 
2 5 2 
0 0 2 
2 0 4
```
### 样例输出 #1
```
Yes
No
Yes
```
## 提示

【输入输出样例 $1$ 说明】

 ![](https://cdn.luogu.com.cn/upload/pic/10860.png) 

第一组数据,由奶酪的剖面图可见：

第一个空洞在 $(0,0,0)$ 与下表面相切；

第二个空洞在 $(0,0,4)$ 与上表面相切；

两个空洞在 $(0,0,2)$ 相切。

输出 `Yes`。

 
第二组数据,由奶酪的剖面图可见：

两个空洞既不相交也不相切。

输出 `No`。

 
第三组数据,由奶酪的剖面图可见：

两个空洞相交，且与上下表面相切或相交。

输出 `Yes`。

【数据规模与约定】

对于 $20\%$ 的数据，$n = 1$，$1 \le h$，$r \le  10^4$，坐标的绝对值不超过 $10^4$。

对于 $40\%$ 的数据，$1 \le n \le 8$，$1 \le h$，$r \le 10^4$，坐标的绝对值不超过 $10^4$。

对于 $80\%$ 的数据，$1 \le n \le 10^3$，$1 \le h , r \le 10^4$，坐标的绝对值不超过 $10^4$。

对于 $100\%$ 的数据，$1 \le n \le 1\times 10^3$，$1 \le h , r \le 10^9$，$T \le 20$，坐标的绝对值不超过 $10^9$。


---

---
title: "[NOIP 2018 提高组] 铺设道路"
layout: "post"
diff: 普及/提高-
pid: P5019
tag: ['贪心', '2018', '树状数组', 'NOIP 提高组']
---
# [NOIP 2018 提高组] 铺设道路
## 题目背景

NOIP2018 提高组 D1T1
## 题目描述

春春是一名道路工程师，负责铺设一条长度为 $n$ 的道路。 

铺设道路的主要工作是填平下陷的地表。整段道路可以看作是 $n$ 块首尾相连的区域，一开始，第 $i$ 块区域下陷的深度为 $d_i$ 。 

春春每天可以选择一段连续区间 $[L,R]$ ，填充这段区间中的每块区域，让其下陷深度减少 $1$。在选择区间时，需要保证，区间内的每块区域在填充前下陷深度均不为 $0$ 。 

春春希望你能帮他设计一种方案，可以在最短的时间内将整段道路的下陷深度都变为 $0$ 。 
## 输入格式

输入文件包含两行，第一行包含一个整数 $n$，表示道路的长度。 第二行包含 $n$ 个整数，相邻两数间用一个空格隔开，第 $i$ 个整数为 $d_i$ 。 
## 输出格式

输出文件仅包含一个整数，即最少需要多少天才能完成任务。 
## 样例

### 样例输入 #1
```
6   
4 3 2 5 3 5 

```
### 样例输出 #1
```
9
```
## 提示

【样例解释】

一种可行的最佳方案是，依次选择： 
$[1,6]$、$[1,6]$、$[1,2]$、$[1,1]$、$[4,6]$、$[4,4]$、$[4,4]$、$[6,6]$、$[6,6]$。   

【数据规模与约定】

对于 $30\%$ 的数据，$1 ≤ n ≤ 10$ ；    
对于 $70\%$ 的数据，$1 ≤ n ≤ 1000$ ；     
对于 $100\%$ 的数据，$1 ≤ n ≤ 100000 , 0 ≤ d_i ≤ 10000$ 。   


---

---
title: "[NOI2001] 反正切函数的应用"
layout: "post"
diff: 普及/提高-
pid: P5695
tag: ['数学', '2001', 'NOI']
---
# [NOI2001] 反正切函数的应用
## 题目背景

反正切函数可展开成无穷级数，有如下公式

$$ \arctan(x) = \sum_{n = 0}^\infty \frac{(-1) ^ n x ^ {2n + 1}}{2n + 1} ( 0 \le x \le 1 ) \tag{1} $$

使用反正切函数计算 是一种常用的方法。例如，最简单的计算 的方法：

$$
\begin{aligned}
\pi & = 4 \arctan(1) \\
    & = 4(1 - \frac{1}{3} + \frac{1}{5} - \frac{1}{7} + \frac{1}{9} - \frac{1}{11} + \dots)
\end{aligned}
\tag{2}
$$

然而，这种方法的效率很低，但我们可以根据角度和的正切函数公式：

$$ \tan(\alpha + \beta) = \frac{\tan(\alpha) + \tan(\beta)}{1 - \tan(\alpha) \tan(\beta)} \tag{3} $$

通过简单的变换得到：

$$ \arctan(p) + \arctan(q) = \arctan(\frac{p + q}{1 - p q}) \tag{4} $$

利用这个公式，令 $ p = \frac{1}{2}, q = \frac{1}{3} $，则 $ \frac{p + q}{1 - p q} = 1 $，有

$$ \arctan(\frac{1}{2}) + \arctan(\frac{1}{3}) = \arctan(\frac{\frac{1}{2} + \frac{1}{3}}{1 - \frac{1}{2} \cdot \frac{1}{3}}) = \arctan(1) $$
## 题目描述

我们将公式 $ 4 $ 写成如下形式

$$ \arctan(\frac{1}{a}) = \arctan(\frac{1}{b}) + \arctan(\frac{1}{c}) $$

其中 $ a, b, c \in \mathbb{N^+} $。

我们的问题是：对于每一个给定的 $a$，求 $ b + c $ 的值。我们保证对于任意的 $ a $ 都存在整数解。如果有多个解，要求你给出 $ b + c $ 最小的解。

## 输入格式

输入文件中只有一个正整数 $ a $。
## 输出格式

输出文件中只有一个整数，为 $ b + c $ 的值。
## 样例

### 样例输入 #1
```
1
```
### 样例输出 #1
```
5
```
## 提示

$1 \le a \le 6\times 10^4 $。


---

---
title: "[NOI2000] 单词查找树"
layout: "post"
diff: 普及/提高-
pid: P5755
tag: ['2000', 'NOI']
---
# [NOI2000] 单词查找树
## 题目描述

在进行文法分析的时候，通常需要检测一个单词是否在我们的单词列表里。为了提高查找和定位的速度，通常都要画出与单词列表所对应的单词查找树，其特点如下：
-	根节点不包含字母，除根节点外每一个节点都仅包含一个大写英文字母；
-	从根节点到某一节点，路径上经过的字母依次连起来所构成的字母序列，称为该节点对应的单词。单词列表中的每个词，都是该单词查找树某个节点所对应的单词；
-	在满足上述条件下，该单词查找树的节点数最少。


例：图一的单词列表对应图二的单词查找树


![](https://cdn.luogu.com.cn/upload/image_hosting/zolscsb0.png)

对一个确定的单词列表，请统计对应的单词查找树的节点数（包括根节点）

## 输入格式

一个单词列表，每一行仅包含一个单词。每个单词仅由大写的英文字符组成，长度不超过 $63$ 个字符。文件总长度不超过 32K，至少有一行数据。
## 输出格式

仅包含一个整数。该整数为单词列表对应的单词查找树的节点数。
## 样例

### 样例输入 #1
```
A
AN
ASP
AS
ASC
ASCII
BAS
BASIC

```
### 样例输出 #1
```
13

```


---

---
title: "[NOI1997] 竞赛排名"
layout: "post"
diff: 普及/提高-
pid: P5759
tag: ['1997', 'NOI']
---
# [NOI1997] 竞赛排名
## 题目描述

某市组织了一次中学生科技全能竞赛，每个选手要参加数学、物理、化学、天文、地理、生物、计算机和英语共八项竞赛,最后综合八项竞赛的成绩排出总名次。

选手编号依次为： $1,2,\dots,N$（$N$ 为参赛总人数）。设 $x_{i, j}$（$1 \le i \le N, 1 \le j \le 8$）分别表示编号为 $i$ 的选手第 $j$ 项竞赛的成绩。其它指标如下：

- 第 $j$（$1 \le j \le 8$）项竞赛的平均分 $avg_j = \frac{1}{N} \sum_{i=1}^N x_{i, j}$
- 选手 $i$（$1 \le i \le N$）的总分 $sumx_i = \sum_{j=1}^8 x_{i, j}$
- 选手 $i$（$1 \le i \le N$）第 $j$（$1 \le j \le 8$）项竞赛的位置分

$$
y_{i, j}= \begin{cases} 0 & \left(\sum_{i = 1} ^ N |x_{i, j} - avg_j| = 0\right) \\ \frac{x_{i, j} - avg_j}{\frac{1}{N} \sum_{i = 1} ^ N |x_{i ,j} - agv_j|} & \left(\sum_{i = 1} ^ N |x_{i, j} - avg_j| \ne 0\right)\end{cases}
$$

- 选手 $i$（$1 \le i \le N$）的总位置分 $sumy_i = \sum_{j=1}^3 y_{i, j} + 0.8 \sum_{j=4}^8 y_{i, j}$

排名规则如下:
1. 总位置分高的选手名次在前；
2. 若两个或两个以上的选手总位置分相同，则总分高的选手名次在前；
3. 若两个或两个以上的选手总位置分和总分均相同，则编号在前的选手名次在前。

请你为竞赛组委会编一程序，计算本次全能竞赛的总排名情况。
## 输入格式

第一行为参赛总人数 $N$，从第二行到第 $N$ 行依次为编号为 $1$ 到编号为 $N$ 的选手的成绩，每行有 $8$ 个 $0 \sim 100$ 之间的整数，代表该选手的 $8$ 项竞赛成绩 。同一行相邻两个数之间用一个空格符隔开。
## 输出格式

有 $N$ 行，从第 $1$ 行到第 $N$ 行依次为排名第 $1$ 的选手的编号，排名第 $2$ 的选手的编号，……，排名第 $N$ 的选手的编号。
## 样例

### 样例输入 #1
```
3
72 82 73 68 95 86 82 90
72 90 50 60 80 70 65 80
72 82 73 68 95 86 82 90

```
### 样例输出 #1
```
1
3
2

```
## 提示

#### 数据范围

对于所有测试数据，满足 $1 \le N \le 1000$。


---

---
title: "[NOI1997] 最佳游览"
layout: "post"
diff: 普及/提高-
pid: P5761
tag: ['1997', 'NOI']
---
# [NOI1997] 最佳游览
## 题目描述

有一座旅游城，它的街道成网格状（如图）．其中东西向的街道是“风景线"、两旁分布着许多景观：南北向的街道都是"林萌道"，两旁没有任何建筑物。由于游客众多，" 风景线”被规定为单行道，游客在风景线上只能从西走到东，林荫道上则可以任意行走。

一名游客将到这座旅游城旅游。他根据自己对景观的喜好给所有的风景线打了分，分值是从 $-100$ 到 $+100$ 的整数，分值越大表示我们的旅游者越喜欢这条风景线上的景致。显然这位游客不可能给这座旅游城的所有风景线都打负分。

![](https://cdn.luogu.com.cn/upload/image_hosting/62qfloek.png)

游客可以从旅游城的任一个十字路口开始游览，在任一个十字路口结束游览。我们的旅游者希望一路上游览的所有风景线的分值之和能够尽可能地大。请你写一个程序，帮助这位游客寻找一条最佳的游览路线。

## 输入格式

第一行是两个整数 $M$ 和 $N$ ，之间用一个空格符隔开， $M$ 表示旅游城南北向林萌道的段数， $N$ 表示东西向风景线的段数，($ 1 \le M \le 100$，$1 \le N \le 20001 $)。

接下来的 $M$ 行依次给出了由北向南各条风景线的分值信息。每行有 $N-1$ 个整数，依次表示了自西向东每段风景线的分值。同一行相邻两个数之间用一个空格隔开。

## 输出格式

只有一行，含一个整数，表示你的程序所找到的最佳游览路线的总分值。

## 样例

### 样例输入 #1
```
3 6
-50 -47 -36 -30 -23
17 -19 34 -13 -8
-42 -3 -43 34 -45
```
### 样例输出 #1
```
82
```
## 提示

**样例解释**

路径为 $17 \to -3 \to 34 \to 34$，答案为 $82$。


---

---
title: "[NOI1999] 最优联通子集"
layout: "post"
diff: 普及/提高-
pid: P5766
tag: ['1999', 'NOI']
---
# [NOI1999] 最优联通子集
## 题目描述

众所周知，我们可以通过直角坐标系把平面上的任何一个点 $P$ 用一个有序数对 $(x,y)$ 来唯一表示，如果 $x,y$ 都是整数，我们就把点 $P$ 称为整点，否则点 $P$ 称为非整点。我们把平面上所有整点构成的集合记为 $W$。

定义 1 ：两个整点 $P_1(x_1,y_1),P_2(x_2,y_2)$，若 $|x_1-x_2|+|y_1-y_2|=1$，则称 $P_1,P_2$ 相邻，记作 $P_1$~$P_2$ ，否则称 $P_1,P_2$ 不相邻。

定义 2 ：设点集 $S$ 是 $W$ 的一个有限子集，即 $S$=$\{P_1,P_2,…,P_n\}$ $(n \ge 1)$，其中 $P_i (1 \le i \le n)$ 属于 $W$，我们把 $S$ 称为整点集。

定义 3 ：设 $S$ 是一个整点集，若点 $R$,$T$ 属于 $S$ ，且存在一个有限的点序列 $Q_1,Q_2,…,Q_k$ 满足: 
1. $Q_i$ 属于 $S$ （$ 1 \le i \le k $）;
2. $Q_1$ = $R$,$Q_k$ = $T$;
3. $Q_i$~$Q_{i+1} (1 \le i \le k-1)$，即 $Q_i$ 与 
 $Q_{i+1}$ 相邻;
4. 对于任何 $1 \le i<j \le k$ 有 $Q_i≠Q_j$;

我们则称点 $R$ 与点 $T$ 在整点集 $S$ 上连通，把点序列 $Q_1,Q_2,…,Q_k$ 称为整点集 $S$ 中连接点 $R$ 与点 $T$ 的一条道路。

定义 4 ：若整点集 $V$ 满足：对于 $V$ 中的任何两个整点， $V$ 中有且仅有一条连接这两点的道路，则 $V$ 称为单整点集。

定义 5 ：对于平面上的每一个整点，我们可以赋予它一个整数，作为该点的权，于是我们把一个整点集中所有点的权的总和称为该整点集的权和。

我们希望对于给定的一个单整点集 $V$ ，求出一个 $V$ 的最优连通子集 $B$ ，满足：
1. $B$ 是 $V$ 的子集
2. 对于 $B$ 中的任何两个整点，在 $B$ 中连通；
3. $B$ 是满足条件 (1) 和 (2) 的所有整点集中权和最大的。

## 输入格式

第一行是一个整数 $N$ ，表示单整点集 $V$ 中点的个数；

以下 $N$ 行中，第 $i$ 行 $(1 \le i \le N) $ 有三个整数，$X_i,Y_i,C_i$ 依次表示第 $i$ 个点的横坐标，纵坐标和权。同一行相邻两数之间用一个空格分隔。

## 输出格式

仅一个整数，表示所求最优连通集的权和。
## 样例

### 样例输入 #1
```
5
0 0 -2
0 1 1
1 0 1
0 -1 1
-1 0 1

```
### 样例输出 #1
```
2

```


---

---
title: "[NOI1997] 最优乘车"
layout: "post"
diff: 普及/提高-
pid: P5767
tag: ['1997', 'NOI']
---
# [NOI1997] 最优乘车
## 题目描述

H 城是一个旅游胜地，每年都有成千上万的人前来观光。为方便游客，巴士公司在各个旅游景点及宾馆，饭店等地都设置了巴士站并开通了一些单程巴士线路。每条单程巴士线路从某个巴士站出发，依次途经若干个巴士站，最终到达终点巴士站。

一名旅客最近到 H 城旅游，他很想去 S 公园游玩，但如果从他所在的饭店没有一路巴士可以直接到达 S 公园，则他可能要先乘某一路巴士坐几站，再下来换乘同一站台的另一路巴士，这样换乘几次后到达 S 公园。

现在用整数 $1 , 2 , … , N$ 给 H 城的所有的巴士站编号，约定这名旅客所在饭店的巴士站编号为 $1$，S 公园巴士站的编号为 $N$。

写一个程序，帮助这名旅客寻找一个最优乘车方案，使他在从饭店乘车到 S 公园的过程中换车的次数最少。


## 输入格式

第一行有两个数字 $M$ 和 $N$（$ 1 \le M \le 100$，$ 1 < N \le 500 $），表示开通了 $M$ 条单程巴士线路，总共有 $N$ 个车站。

从第二行到第 $M$ 行依次给出了第 $1$ 条到第 $M$ 条巴士线路的信息。其中第 $i+1$ 行给出的是第 $i$ 条巴士线路的信息，从左至右按运行顺序依次给出了该线路上的所有站号相邻两个站号之间用一个空格隔开。


## 输出格式

只有一行。如果无法乘巴士从饭店到达 S公园，则输出 `NO` ；

否则输出你的程序所找到的最少换车次数，换车次数为 $0$ 表示不需换车即可到达。


## 样例

### 样例输入 #1
```
3 7
6 7
4 7 3 6
2 1 3 5

```
### 样例输出 #1
```
2

```


---

---
title: "棋盘游戏"
layout: "post"
diff: 普及/提高-
pid: P5877
tag: ['NOI 导刊']
---
# 棋盘游戏
## 题目描述

为了增强幼儿园小朋友的数数能力，小虎老师给了一个家庭游戏作业。让小虎那一块空的围棋盘，随机在一些方格中放些棋子（有黑白两种颜色），如果一个方格和它的上、下、左、右四个方格之一有相同颜色的棋子，则认为两个格子是相互连通的。这期间，要求小虎不断统计共有多少个连通块。

如下图是一个 $5\times 9$ 的一块棋盘，其中 `.` 表示空格，`*` 表示黑棋子，`@`表示白棋子。

则有 $4$ 块连通子块。
```
.  .  .  .  .  .  .  .  .
.  .  *  *  .  .  @  @  .
.  *  *  @  @  .  @  @  .
.  .  *  @  .  .  *  .  .
.  .  .  .  .  .  .  .  .
```

哥哥大虎在一边看一边想，如果棋盘是 $N\times N$ 的，共放了 $M$ 个棋子，如何使用计算机解决这个问题呢？
## 输入格式

第一行两个整数：$N,M$。

接下来有 $M$ 行，每行三个整数：$c, x, y$。分别表示依次放入棋子的颜色（$0$ 表示白色，$1$ 表示黑色）、要放入格子的横坐标和格子的纵坐标。

## 输出格式

共 $M$ 行。第 $i$ 行一个整数，表示放入第 $i$ 个棋子后，当前有多少个棋子连通块。
## 样例

### 样例输入 #1
```
3 5    
1 1 1  
1 1 2  
0 2 2  
1 3 1  
1 2 1  

```
### 样例输出 #1
```
1 
1 
2 
3 
2

```
### 样例输入 #2
```
3 5
1 1 2
1 2 1
1 3 2
1 2 3
1 2 2

```
### 样例输出 #2
```
1
2
3
4
1

```
## 提示

对于 $30\%$ 数据：$1\le N \le 10$。

对于 $60\%$ 数据：$1\le N\le 100$。

对于 $100\%$ 数据：$1\le N\le 500$，$1\le M \le N \times N$，$ 0 \le c \le 1$，$ 1\le x, y \le N$。


---

---
title: "[NOI Online #2 入门组] 未了"
layout: "post"
diff: 普及/提高-
pid: P6473
tag: ['贪心', '2020', '二分', 'NOI Online']
---
# [NOI Online #2 入门组] 未了
## 题目描述

由于触犯天神，Sisyphus 将要接受惩罚。

宙斯命 Sisyphus 推一块巨石上长度为 $L$ 的山坡。Sisyphus 匀速向上推的速度为每年 $v$ 的长度（由于是匀速，故经过 $\frac{1}{2}$ 年将能向上推 $\frac{v}{2}$ 的长度）。然而，宙斯并不希望 Sisyphus 太快到达山顶。宙斯可以施展 $n$ 个魔法，若宙斯施展第 $i$ 个魔法 $(1\leq i \leq n)$，则当 Sisyphus 第一次到达位置  $a_i$ 时，他将会同巨石一起滚落下山底，并从头推起。（滚落的时间忽略不计，即可看作第一次到达位置 $a_i$ 后 Sisyphus 立即从山底重新出发）

例如宙斯施用了 $a_i=3$ 和 $a_i=5$ 的两个魔法。Sisyphus 的速度 $v=1$ ，山坡的长度 $L = 6$，则他推石上山过程如下：

- 用 $3$ 年走到位置 $3$。

- 受 $a_i=3$ 的魔法影响，回到了山底出发。

- 再用 $3$ 年走到位置 $3$，然而因为是第二次到达，$a_i=3$ 的魔法不起作用。

- 用 $2$ 年走到位置 $5$。

- 受 $a_i=5$ 的魔法影响，回到了山底出发。

- 用 $6$ 年从山底走到了山顶。花费的总时间为 $14$ 年。

现在，宙斯有 $q$ 个询问。对于第 $i$ 个询问 $t_i$，宙斯想知道，他最少需要施展多少个魔法才能使 Sisyphus 到达山顶所用的年数大于 $t_i$
## 输入格式

第一行三个整数 $n,L,v$ 分别表示魔法的种类数，山坡的长度，Sisyphus 的速度。

第二行 $n$ 个整数。第 $i$ 个整数 $a_i$ 表示第 $i$ 个魔法作用的位置。$(1<i<n)$

第三行一个整数 $q$ 表示宙斯的询问个数。

接下来 $q$ 行每行一个整数，第 $i$ 行的整数 $t_i$ 表示宙斯的第 $i$ 个询问。$(1<i<n)$
## 输出格式

输出 $q$ 行，每行恰好一个整数，第 $i$ 行的整数对应第 $i$ 个询问的答案。$(1 \leq i\leq q)$

如果宙斯无论如何都不能使 Sisyphus 使用的年数大于 $t_i$，请输出 $-1$。
## 样例

### 样例输入 #1
```
3 6 3
3 5 1
4
1
3
4
5

```
### 样例输出 #1
```
0
1
2
-1

```
## 提示

1. 不使用任何魔法，Sisyphus 需要 $2$ 年走上山顶。
2. 使用魔法 $2$ ，Sisyphus 需要 $\frac{11}{3}$ 年走上山顶。（用时 $\frac{5}{3}$ 年走到魔法 $2$ 的位置并滚落下山，再用时 $\frac{6}{3}=2$ 年走到山顶）
3. 使用魔法 $1,2$ ，Sisyphus 需要 $\frac{14}{3}$ 年走上山顶。
4. 宙斯不能使 Sisyphus 用大于 $5$ 年的时间走上山顶。

对于测试点 $1\sim 8:n=1$。

对于测试点 $9\sim 12:n=2$。

对于测试点 $13\sim 17:n,q\le 1000$。

对于所有测试点：$1 \leq n,q \leq 2 \times 10^5$，$1\leq v\leq L\leq 10^{9}$，$1\leq a_i < L$，$1 \leq t_i\leq 10^9$。

数据保证 $a_i$ 两两不同。


---

---
title: "[NOI Online #2 提高组] 涂色游戏"
layout: "post"
diff: 普及/提高-
pid: P6476
tag: ['数学', '2020', 'Special Judge', 'NOI Online']
---
# [NOI Online #2 提高组] 涂色游戏
## 题目背景

1s 256M
## 题目描述

你有 $10^{20}$ 个格子，它们从 $0$ 开始编号，初始时所有格子都还未染色，现在你按如下规则对它们染色：

1. 编号是 $p_1$ 倍数的格子（包括 $0$ 号格子，下同）染成红色。
2. 编号是 $p_2$ 倍数的格子染成蓝色。
3. 编号既是 $p_1$ 倍数又是 $p_2$ 倍数的格子，你可以选择染成红色或者蓝色。

其中 $p_1$ 和 $p_2$ 是给定的整数，若格子编号是 $p_1$ 或 $p_2$ 的倍数则它必须要被染色。在忽略掉所有未染色格子后，你不希望存在 $k$ 个连续的格子颜色相同，因为你认为这种染色方案是无聊的。现在给定 $p_1$, $p_2$, $k$，你想知道是否有一种染色方案不是无聊的。

## 输入格式

本题包含多组数据。

第一行一个整数 $T$ 表示数据组数。

每组数据一行三个正整数 $p_1$, $p_2$, $k$，变量意义见题目描述。
## 输出格式

对于每组数据，输出一行一个字符串，若存在一种染色方案不是无聊的，则输出 `YES`，否则输出 `NO`。

选手程序输出结果与样例或题面中的一种格式相符即可，即不区分大小写。例如，如果标准答案为 `YES` ，则输出结果 `YES/Yes/yes` 都视为正确。
## 样例

### 样例输入 #1
```
4
2 10 4
2 3 6
1 4 7
1 1 2
```
### 样例输出 #1
```
No
Yes
Yes
Yes
```
### 样例输入 #2
```
8
370359350 416913505 3
761592061 153246036 6
262185277 924417743 5
668232501 586472717 2
891054824 169842323 6
629603359 397927152 2
2614104 175031972 68
924509243 421614240 4
```
### 样例输出 #2
```
Yes
Yes
Yes
No
No
No
Yes
Yes
```
## 提示

| 测试点编号 | $p_1$, $p_2 \leq$ | $k \leq$ | $T \leq$ |
| :-- | :-- | :-- | :-- |
| 1 $\sim$ 3 | $15$ | $15$ | $3375$ |
| 4 $\sim$ 6 | $10^3$ | $10^3$ | $10^4$ |
| 7 $\sim$ 8 | $10^3$ | $10^3$ | $10$ |
| 9 $\sim$ 10 | $10^5$ | $10^3$ | $10^3$ |
| 11 $\sim$ 12 | $10^5$ | $5 \times 10^5$ | $10$ |
| 13 $\sim$ 14 | $10^5$ | $5 \times 10^5$ | $10^5$ |
| 15 | $10^9$ | $10^9$ | $10$ |
| 16 $\sim$ 20 | $10^9$ | $10^9$ | $10^6$ |

对于所有测试点：$1 \leq T\leq 10^6$，$1\leq p_1,p_2$，$k\le 10^9$。


---

---
title: "[NOI Online #3 入门组] 买表"
layout: "post"
diff: 普及/提高-
pid: P6567
tag: ['动态规划 DP', '2020', 'NOI Online']
---
# [NOI Online #3 入门组] 买表
## 题目描述

Jimmy 到 Symbol 的手表店买手表，Jimmy 只带了 $n$ 种钱币，第 $i$ 种钱币的面额为 $k_i$ 元，张数为 $a_i$ 张。Symbol 的店里一共有 $m$ 块手表，第 $i$ 块手表的价格为 $t_i$ 元。

Symbol 的手表店不能找零，所以 Jimmy 只能在凑出恰好的钱数时才能购买一块手表。现在对于店里的每块手表，Jimmy 想知道他能不能凑出恰好的钱数进行购买。

## 输入格式

第一行两个空格分隔的整数 $n$ 和 $m$ 表示钱币数与手表数。

接下来 $n$ 行每行两个空格分隔的整数 $k_i$ 和 $a_i$ 表示钱币的面额和张数。

第 $n+2$ 行，共 $m$ 个用空格分隔的整数 $t_i$，表示每块手表的价格。

## 输出格式

一共 $m$ 行，对于第 $i$ 行，如果能凑出恰好的钱数购买第 $i$ 块手表则输出 `Yes` 否则输出 `No`，注意只有首字母大写。
## 样例

### 样例输入 #1
```
3 5
1 2
5 1
6 3
3 19 21 1 7
```
### 样例输出 #1
```
No
Yes
No
Yes
Yes

```
## 提示

#### 样例 1 解释

- 第二块手表 $19=6 \times 3+1=6 \times 2+5+1 \times 2$，可以恰好凑出。
- 第四块手表 $1=1 \times 1$，可以恰好凑出。
- 第五块手表 $7=5+2\times 1=6 \times 1+1$，可以恰好凑出。

#### 数据规模与约定
- 对于 $50\%$ 的数据，保证 $n\leq 10$，$m \leq 60$，$a_i \leq 20$，$k_i \leq 5000$，$t_i \leq 250$。
- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 200$，$1 \leq m \leq 10^5$，$1 \leq a_i \leq 1000$，$1 \leq k_i \leq 500000$，$0 \leq t_i \leq 500000$。

#### 说明

data provider：@皎月半洒花。


---

---
title: "[NOI Online 2021 入门组] 切蛋糕"
layout: "post"
diff: 普及/提高-
pid: P7471
tag: ['2021', 'NOI Online']
---
# [NOI Online 2021 入门组] 切蛋糕
## 题目描述

Alice、Bob 和 Cindy 三个好朋友得到了一个圆形蛋糕，他们打算分享这个蛋糕。

三个人的需求量分别为 $a,b,c$，现在请你帮他们切蛋糕，规则如下：

1. 每次切蛋糕可以选择蛋糕的任意一条直径，并沿这条直径切一刀（注意切完后不会立刻将蛋糕分成两部分）。

2. 设你一共切了 $n$ 刀，那么你将得到 $2n$ 个扇形的蛋糕（特别地，切了 $0$ 刀被认为是有一个扇形，即整个圆形蛋糕），将这些蛋糕分配给 Alice，Bob 和 Cindy，要求每个扇形蛋糕只能完整地分给一个人。

3. 三人分到的蛋糕面积比需要为 $a:b:c$（不保证是最简比例，且如果 $a:b:c$ 中某个数为 $0$，表示那个人不吃蛋糕）。

为了完成这个任务，你至少需要切几刀？
## 输入格式

本题单个测试点包含多组数据。

第一行包含一个整数 $T$，表示数据组数。

接下来 $T$ 行，每行包含三个整数 $a,b,c$，表示三人的需求量。
## 输出格式

输出 $T$ 行，第 $i$ 行的输出表示第 $i$ 组数据中你至少需要切蛋糕的次数。
## 样例

### 样例输入 #1
```
6
0 0 8
0 5 3
9 9 0
6 2 4
1 7 4
5 8 5
```
### 样例输出 #1
```
0
2
1
2
3
2
```
## 提示

### 样例 $1$ 解释
![](https://cdn.luogu.com.cn/upload/image_hosting/i3pai9va.png)

### 数据范围与提示
$30\%$ 的数据满足：$a=b=0$。

$60\%$ 的数据满足：$a=0$。

$100\%$ 的数据满足：$1\le T\le 10^4，0\le a,b,c\le 10^8$，保证 $a+b+c>0$。

数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 提供。


---

---
title: "[NOI Online 2021 入门组] 吃豆人"
layout: "post"
diff: 普及/提高-
pid: P7472
tag: ['2021', '枚举', 'NOI Online']
---
# [NOI Online 2021 入门组] 吃豆人
## 题目描述

有一个 $n$ 行 $n$ 列的正方形点阵，左上角点坐标为 $(1, 1)$，右下角点坐标为 $(n, n)$。

点阵中每个整点上都有数量不一的豆子，坐标为 $(i, j)$ 的点上有 $a_{i,j}$ 个豆子。

你可以放置吃豆人，可以将点阵中任意的整点作为吃豆人的初始位置，再给定左上、左下、右上、右下之一作为吃豆人的初始方向。

吃豆人会不断沿初始方向行进，吃光遇到的所有豆子，直到碰到点阵的边界，此时：

1. 如果吃豆人处于正方形点阵四个角之一的位置，那么就会停止行动；

2. 否则，吃豆人的行进路线将以这条边界为镜面发生反射，下图展示了一个路径某两次发生反射的例子：

![](https://cdn.luogu.com.cn/upload/image_hosting/6tji95nq.png)

现在，你需要放置两个吃豆人，求两个吃豆人最多共能吃到多少个豆子？注意同一个豆子只能被吃一次。

## 输入格式

第一行包含一个整数 $n$，表示点阵大小。

接下来 $n$ 行，每行包含 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数表示 $a_{i,j}$。

## 输出格式

输出一行一个整数，表示两个吃豆人最多共能吃到的豆子数量。
## 样例

### 样例输入 #1
```
4
20 1 19 2
3 18 4 17
16 5 15 6
7 14 8 13
```
### 样例输出 #1
```
132
```
## 提示

### 样例 1 解释

在 $(1, 1)$ 和 $(1, 3)$ 位置放置吃豆人，初始方向分别为右下和左下，即可吃到位于
$(1, 1)$，$(1, 3)$，$(2, 2)$，$(2, 4)$，$(3, 1)$，$(3, 3)$，$(4, 2)$，$(4, 4)$ 位置上的豆子，总个数为 $132$，
达到最大，路径分别如下图绿线和红线所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/1axaad1b.png)

### 数据范围

对于 $30\%$ 的数据，$n\leq 3$。

对于 $60\%$ 的数据：$n\leq 100$。

对于 $100\%$ 的数据：$2\leq n\leq 1000$，$0\leq a_{i,j}\leq 1000$。

数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 和 [Karry5307](https://www.luogu.com.cn/user/60990) 共同提供。

感谢 [Silence_water](https://www.luogu.com.cn/user/338630) 提供一组 hack 数据。


---

---
title: "[NOIP2021] 报数"
layout: "post"
diff: 普及/提高-
pid: P7960
tag: ['2021', 'NOIP 提高组', 'O2优化', '素数判断,质数,筛法']
---
# [NOIP2021] 报数
## 题目描述

报数游戏是一个广为流传的休闲小游戏。参加游戏的每个人要按一定顺序轮流报数，但如果下一个报的数是 $7$ 的倍数，或十进制表示中含有数字 $7$，就必须跳过这个数，否则就输掉了游戏。

在一个风和日丽的下午，刚刚结束 SPC20nn 比赛的小 r 和小 z 闲得无聊玩起了这个报数游戏。但在只有两个人玩的情况下计算起来还是比较容易的，因此他们玩了很久也没分出胜负。此时小 z 灵光一闪，决定把这个游戏加强：任何一个十进制中含有数字 $7$ 的数，它的所有倍数都不能报出来！

形式化地，设 $p(x)$ 表示 $x$ 的十进制表示中是否含有数字 $7$，若含有则 $p(x) = 1$，否则 $p(x) = 0$。则一个正整数 $x$ 不能被报出，当且仅当存在正整数 $y$ 和 $z$ ，使得 $x = yz$ 且 $p(y) = 1$。


例如，如果小 r 报出了 $6$ ，由于 $7$ 不能报，所以小 z 下一个需要报 $8$；如果小 r 报出了 $33$，则由于 $34 = 17 \times 2$，$35 = 7 \times 5$ 都不能报，小 z 下一个需要报出 $36$ ；如果小 r 报出了 $69$，由于 $70 \sim 79$ 的数都含有 $7$，小 z 下一个需要报出 $80$ 才行。

现在小 r 的上一个数报出了 $x$，小 z 想快速算出他下一个数要报多少，不过他很快就发现这个游戏可比原版的游戏难算多了，于是他需要你的帮助。当然，如果小 r 报出的 x 本身是不能报出的，你也要快速反应过来小 r 输了才行。

由于小 r 和小 z 玩了很长时间游戏，你也需要回答小 z 的很多个问题。
## 输入格式

第一行，一个正整数 $T$ 表示小 z 询问的数量。

接下来 $T$ 行，每行一个正整数 $x$，表示这一次小 r 报出的数。
## 输出格式

输出共 $T$ 行，每行一个整数，如果小 r 这一次报出的数是不能报出的，输出 $-1$，否则输出小 z 下一次报出的数是多少。
## 样例

### 样例输入 #1
```
4
6
33
69
300

```
### 样例输出 #1
```
8
36
80
-1

```
### 样例输入 #2
```
5
90
99
106
114
169

```
### 样例输出 #2
```
92
100
109
-1
180

```
### 样例输入 #3
```
见附件中的 number/number3.in
```
### 样例输出 #3
```
见附件中的 number/number3.ans
```
### 样例输入 #4
```
见附件中的 number/number4.in
```
### 样例输出 #4
```
见附件中的 number/number4.ans
```
## 提示

**【样例解释 #1】**

这一组样例的前 $3$ 次询问在题目描述中已有解释。

对于第 $4$ 次询问，由于 $300 = 75 \times 4$，而 $75$ 中含有 $7$ ，所以小 r 直接输掉了游戏。

**【数据范围】**

对于 $10\%$ 的数据，$T \leq 10$，$x \leq 100$。  
对于 $30\%$ 的数据，$T \leq 100$，$x \leq 1000$。  
对于 $50\%$ 的数据，$T \leq 1000$，$x \leq 10000$。  
对于 $70\%$ 的数据，$T \leq 10000$，$x \leq 2 \times {10}^5$。  
对于 $100\%$ 的数据，$1 \le T \leq 2 \times {10}^5$，$1 \le x \leq {10}^7$。


---


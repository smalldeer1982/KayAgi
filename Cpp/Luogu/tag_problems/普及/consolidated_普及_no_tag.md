---
title: "[图论与代数结构 101] 图的代数表示"
layout: "post"
diff: 普及/提高-
pid: B3600
tag: []
---
# [图论与代数结构 101] 图的代数表示
## 题目描述





给定一张 $n$ 个点 $m$ 条边的图，**有可能存在重边和自环**。请你给出这张图所有的代数表示。





## 输入格式



第一行四个正整数 $n$，$m$，$type1$ 和 $type2$。其中 $n$ 和 $m$ 分别表示图的点数和边数。$type1 = 0$ 表示该图为无向图，$type1 = 1$ 表示该图为有向图。$type2 = 0$ 表示该图不是赋权图，$type2 = 1$ 表示该图是赋权图。

如果 $type2 = 0$，接下来 $m$ 行，每行两个正整数 $u$ 和 $v$ 表示一条边。

如果 $type2 = 1$，接下来 $m$ 行，每行三个正整数 $u$ ， $v$ 和 $d$ 表示一条边，其中 $d$ 为这条边的边权。
## 输出格式



按顺序输出下列代数表示：

1. 邻接矩阵或权矩阵。输出 $n$ 行，每行 $n$ 个数表示矩阵。如果该图存在重边则不输出。如果 $type2 = 0$ 输出邻接矩阵，如果 $type2 = 1$ 输出权矩阵。

2. 关联矩阵。输出 $n$ 行，每行 $m$ 个数表示矩阵。如果 $type2 = 1$ 或有自环则不输出。

3. 邻接表。输出 $n$ 行。如果 $type2 = 0$ 每行输出 $d _ i$ 个数，其中 $d _ i$ 为节点 $i$ 的度数（无向图）或正度（有向图），每个数表示一条与 $i$ 相接的边。如果 $type2 = 1$ 每行输出 $2d _ i$ 个数，每两个数表示一条边。

4. 正向表。如果 $type2 = 0$ 输出两行，分别表示向量 $A$ 和向量 $B$ 。如果 $type2 = 1$ 输出三行，分别表示向量 $A$，向量 $B$ 和向量 $Z$。

5. 逆向表。如果 $type1 = 0$ 则不输出（因为此时逆向表与正向表相同）。如果 $type2 = 0$ 输出两行，分别表示向量 $A$ 和向量 $B$ 。如果 $type2 = 1$ 输出三行，分别表示向量 $A$，向量 $B$ 和向量 $Z$。

其中，邻接表、正向表、逆向表每个点对应的所有边按输入顺序输出。

**正向表与逆向表的 $A$向量是 $n + 1$ 维向量，有向图中 $A(n + 1) = m + 1$，无向图中 $A(n + 1) = 2m + 1$。**
## 样例

### 样例输入 #1
```
3 3 0 0
2 3
1 3
1 2
```
### 样例输出 #1
```
0 1 1
1 0 1
1 1 0
0 1 1
1 0 1
1 1 0
3 2
3 1
2 1
1 3 5 7
3 2 3 1 2 1
```
### 样例输入 #2
```
3 3 1 1
3 1 5
2 2 4
3 1 3
```
### 样例输出 #2
```
2 4
1 5 1 3
1 1 2 4
2 1 1
4 5 3
1 3 4 4
3 3 2
5 3 4
```
### 样例输入 #3
```
3 3 0 1
1 3 5
2 2 3
2 3 1
```
### 样例输出 #3
```
0 0 5
0 3 1
5 1 0
3 5
2 3 2 3 3 1
1 5 2 1
1 2 5 7
3 2 2 3 1 2
5 3 3 1 5 1
```
### 样例输入 #4
```
4 3 0 1
3 3 5
2 4 6
2 4 7
```
### 样例输出 #4
```
4 6 4 7
3 5 3 5
2 6 2 7
1 1 3 5 7
4 4 3 3 2 2
6 7 5 5 6 7
```
## 提示



对于所有数据，满足 $1 \le n \le 300$，$1 \le m \le 300$，$1 \le 边权 \le 32768$。

**细节提示：**

1.无向图中一些数组可能需要 $2 m$ 的长度，请仔细检查以免数组开小。

2.无向图中如果存在自环，则在邻接表和正向表中都需要将这条边输出两次，但不影响邻接矩阵或权矩阵的输出。

3.逆向表中对于连向一点的边也要按输入顺序输出而不是边权大小顺序。

4.无向带权图中每条非自环边都会修改权矩阵中两个位置。

5.无法通过时可以通过构造有向/无向、带权/不带权、有/无自环、有/无重边的小数据来检查代码。


##### 样例一解释

第 $1$ 行至第 $3$ 行是邻接矩阵；

第 $4$ 行至第 $6$ 行是关联矩阵；

第 $7$ 行至第 $9$ 行是邻接表；

第 $10$ 行至第 $11$ 行是正向表。

##### 样例二解释

第 $1$ 行至第 $2$ 行是邻接表；

第 $3$ 行至第 $5$ 行是正向表；

第 $6$ 行至第 $8$ 行是逆向表。


---

---
title: "[图论与代数结构 201] 最短路问题_1"
layout: "post"
diff: 普及/提高-
pid: B3601
tag: []
---
# [图论与代数结构 201] 最短路问题_1
## 题目描述

给定一张 $n$ 个点、$m$ 条边的有向图，求 $1$ 号点到每个点的最短路径长度。

**注意，图可能存在重边和自环，保证不存在负环。**
## 输入格式

第一行两个整数 $n, m$。

接下来 $m$ 行，每行三个整数 $u_i, v_i, w_i$。表示一条从 $u_i$ 到 $v_i$ 长度为 $w_i$ 的有向边。
## 输出格式

一行 $n$ 个整数，第 $i$ 个整数表示 $1$ 到 $i$ 的最短路径长度，如果不存在从 $1$ 到 $i$ 的路径则第 $i$ 个整数用 $-1$ 替代。
## 样例

### 样例输入 #1
```
4 5
1 2 1
2 3 4
1 3 3
4 1 5
3 1 2

```
### 样例输出 #1
```
0 1 3 -1
```
### 样例输入 #2
```
10 50
5 9 6
1 3 10
3 1 1
10 2 5
8 5 1
10 10 6
6 5 2
1 5 10
2 5 5
10 1 4
1 5 2
8 8 7
7 2 7
9 2 8
3 1 4
6 2 5
3 9 9
4 9 5
5 10 9
10 1 9
5 4 5
9 1 2
5 10 6
3 8 7
10 3 7
5 8 8
9 2 6
9 8 6
3 2 8
1 3 8
1 10 1
7 8 4
9 4 5
4 6 2
2 7 6
10 1 5
9 9 7
6 7 4
1 1 7
8 3 10
8 3 9
10 9 8
3 9 1
7 4 8
1 5 4
8 4 4
3 4 4
9 9 2
2 10 4
8 9 6

```
### 样例输出 #2
```
0 6 8 7 2 9 12 10 8 1
```
## 提示

本题没有部分分。

对于所有数据，$1\leq n,m \leq 2\times 10^3$，$-10^9\leq w_i\leq 10^9$。

请注意答案上界的大小，可能需要使用 C++ 中的 `long long int` 类型。


---

---
title: "[图论与代数结构 202] 最短路问题_2"
layout: "post"
diff: 普及/提高-
pid: B3602
tag: []
---
# [图论与代数结构 202] 最短路问题_2
## 题目描述

给定一张 $n$ 个点、$m$ 条边的有向图，求 $1$ 号点到每个点的最短路径长度。

**注意，图可能存在重边和自环。**
## 输入格式

第一行两个整数 $n, m$。

接下来 $m$ 行，每行三个整数 $u_i, v_i, w_i$。表示一条从 $u_i$ 到 $v_i$ 长度为 $w_i$ 的有向边。
## 输出格式

一行 $n$ 个整数，第 $i$ 个整数表示 $1$ 到 $i$ 的最短路径长度，如果不存在从 $1$ 到 $i$ 的路径则第 $i$ 个整数用 $-1$ 替代。
## 样例

### 样例输入 #1
```
4 5
1 2 1
2 3 4
1 3 3
4 1 5
3 1 2

```
### 样例输出 #1
```
0 1 3 -1
```
### 样例输入 #2
```
10 50
5 9 6
1 3 10
3 1 1
10 2 5
8 5 1
10 10 6
6 5 2
1 5 10
2 5 5
10 1 4
1 5 2
8 8 7
7 2 7
9 2 8
3 1 4
6 2 5
3 9 9
4 9 5
5 10 9
10 1 9
5 4 5
9 1 2
5 10 6
3 8 7
10 3 7
5 8 8
9 2 6
9 8 6
3 2 8
1 3 8
1 10 1
7 8 4
9 4 5
4 6 2
2 7 6
10 1 5
9 9 7
6 7 4
1 1 7
8 3 10
8 3 9
10 9 8
3 9 1
7 4 8
1 5 4
8 4 4
3 4 4
9 9 2
2 10 4
8 9 6

```
### 样例输出 #2
```
0 6 8 7 2 9 12 10 8 1
```
## 提示

本题没有部分分。

对于所有数据，$1\leq n,m \leq 3\times 10^5$，$1\leq w_i\leq 10^9$。

请注意答案上界的大小，可能需要使用 C++ 中的 `long long int` 类型。


---

---
title: "集合运算 2"
layout: "post"
diff: 普及/提高-
pid: B3633
tag: []
---
# 集合运算 2
## 题目背景

集合是数学中的一个概念，用通俗的话来讲就是：一大堆数在一起就构成了集合。

集合有如下的特性：

- 无序性：任一个集合中，每个元素的地位都是相同的，元素之间是无序的。

- 互异性：一个集合中，任何两个元素都认为是不相同的，即每个元素只能出现一次。

- 确定性：给定一个集合，任给一个元素，该元素或者属于或者不属于该集合，二者必居其一，不允许有模棱两可的情况出现。

元素 $a$ 属于集合 $A$ 记作 $a\in A$，反之则记作 $a\notin A$。

如果对于任意集合 $A$ 内的元素 $a$，都有 $a\in B$，则称 $A$ 为 $B$ 的子集，记作 $A\subseteq B$。

若集合 $A$，$B$ 满足集合 $A$ 中的元素都能够在 $B$ 中找到，且集合 $B$ 中的元素都能在 $A$ 中找到，则称集合 $A$ 与 $B$ 相等，记作 $A=B$。

若一个集合中不存在任何元素，则称该集合为空集，记作 $\varnothing$。空集是所有集合的子集。

一个集合内的元素个数称为该集合的大小。$A$ 集合的大小可记作 $|A|$。

集合 $C$ 是集合 $A$ 与 $B$ 的交集，当且仅当对于任何元素 $a\in C$，有 $a\in A$ 且 $a\in B$，并且对于任何元素 $b\notin C$，有 $b\notin A$ 或 $b\notin B$。记作 $C=A\cap B$。

集合 $C$ 是集合 $A$ 与 $B$ 的并集，当且仅当对于任何元素 $a\in C$，有 $a\in A$ 或 $a\in B$，并且对于任何元素 $b\notin C$，有 $b\notin A$ 且 $b\notin B$。记作 $C=A\cup B$。

简单地说，交集是由所有同时属于两个集合的元素所构成的，就像两个集合相交；而并集是由所有属于其中任意一个集合的元素所构成的，就像两个集合合并。

设集合 $A\subseteq U$，称集合 $B$ 为集合 $A$ 关于集合 $U$ 的补集，当且仅当 $B$ 集合内的所有元素恰好为所有属于 $U$ 集合但不属于 $A$ 集合的元素。记作 $B=\complement_UA$。显然可以得到这样的一个式子：$|U|=|A|+|\complement_UA|$，对于任何 $A \subseteq U$ 成立。

简单地说，补集就是与一个集合互补的集合，每个元素恰好在其中两者之一。

特别地，对于形如 $\{x|a\le x\le b\}$ 的集合，可以记作 $[a,b]$。其中，如果左侧符号改为小于号，则左侧中括号改为小括号。右侧同理。
## 题目描述

现在给予两个集合 $A$ 和 $B$，均由 $0$ 到 $63$ 之间的整数组成。全集 $U=\{x|0\le x\le 63,x\in \mathbb{Z}\}$。

请依次求出：

- $|A|$
- $A\cap B$
- $A\cup B$
- $\complement_UA$
- $A=B$ 是否成立
- $A\subseteq B$ 是否成立
- $0 \in A$ 是否成立

## 输入格式

输入四行。

第一行一个整数 $x(0\le x \le 63)$，表示集合 $A$ 的元素个数。

第二行 $x$ 个整数 $a_1,...a_x$，表示集合 $A$ 的各个元素，保证不重复。如果 $A$ 是空集，则这一行没有数字。

第三行一个整数 $y(0\le y \le 63)$，表示集合 $B$ 的元素个数。

第四行 $y$ 个整数 $b_1,...b_y$，表示集合 $B$ 的各个元素，保证不重复。如果 $B$ 是空集，则这一行没有数字。
## 输出格式

输出七行。

第一行输出一个整数，表示 $|A|$。

第二行输出若干个整数，表示 $A\cap B$ 中对应元素。

第三行输出若干个整数，表示 $A\cup B$ 中对应元素。

第四行输出若干个整数，表示 $\complement_UA$ 中对应元素。

第五至第七行，各输出一个整数，分别表示$A=B$、$A\subseteq B$、$0 \in A$ 是否成立。如果成立则本行输出 $1$，否则输出 $0$。 

输出一个集合对应的元素时，从小到大输出，用空格隔开。如果是空集，则这一行什么也不输出，保留换行。
## 样例

### 样例输入 #1
```
4
1 3 5 8
3
3 6 8
```
### 样例输出 #1
```
4
3 8
1 3 5 6 8
0 2 4 6 7 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63
0
0
0
```
### 样例输入 #2
```
0

4
1 2 3 4
```
### 样例输出 #2
```
0

1 2 3 4
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63
0
1
0
```


---

---
title: "集合运算 3"
layout: "post"
diff: 普及/提高-
pid: B3695
tag: ['O2优化']
---
# 集合运算 3
## 题目背景

关于集合、交集、并集的定义请参考 https://www.luogu.com.cn/problem/B3633。

以下给出对称差的定义：

对两个集合 $A, B$，规定 $A$ 和 $B$ 的对称差 $A \Delta B$ 为在 $A$ 中出现但不在 $B$ 中出现，或在 $B$ 中出现但不在 $A$ 中出现的元素。  
例如，$A = \{1, 2, 3\}$，$B = \{2, 3, 5\}$，则 $A \Delta B = \{1, 5\}$
## 题目描述

给定 $n$ 个集合 $s_1, s_2, \dots s_n$，每个集合都含有 $[1, m]$ 之间的若干个整数。

现在，有 $q$ 次操作，每次操作如下：
- `1 x y`：将 $s_x$ 中的每个元素都加上 $y$，再删去其中大于 $m$ 的；
- `2 x y`：将 $s_x$ 中的每个元素都减去 $y$，再删去其中小于 $1$ 的；
- `3 x y`：查询 $s_x$ 和 $s_y$ 的**交集**的元素个数；
- `4 x y`：查询 $s_x$ 和 $s_y$ 的**并集**的元素个数；
- `5 x y`：查询 $s_x$ 和 $s_y$ 的**对称差**的元素个数；

## 输入格式

第一行有三个数，依次表示集合的个数 $n$，集合元素的最大值 $m$ 和操作次数 $q$。

第 $2$ 到第 $(n + 1)$ 行，每行有若干个整数，第 $(i + 1)$ 行的整数描述集合 $i$ 的元素：  
每行首先有一个整数 $c_i$ 表示 $s_i$ 的元素个数，接下来有 $c$ 个互不相同的整数 $s_{i,1}, s_{i,2}, \dots s_{i, c_i}$ 表示集合 $s_i$ 里的元素。

接下来 $q$ 行，每行三个整数 $o, x, y$，表示一次操作。具体见『题目描述』。
## 输出格式

对于每个查询操作，请输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
2 5 5
3 1 2 3
4 1 2 4 5
1 2 1
2 1 1
3 1 2
4 1 2
5 1 2
```
### 样例输出 #1
```
1
4
3
```
## 提示

### 数据规模与约定

对于全部的测试点，保证 $1 \leq n,m,q \leq 3 \times 10^4$，$1 \leq \sum_{i = 1}^n c_i \leq 10^6$，$1 \leq x, y \leq n$，$1 \leq o \leq 5$。集合里的元素都是不超过 $m$ 的正整数。

感谢 @[Zyingyzzz](/user/434929) 提供 hack 数据一组。


---

---
title: "组合数问题"
layout: "post"
diff: 普及/提高-
pid: B3717
tag: ['O2优化', '逆元']
---
# 组合数问题
## 题目描述

给出 $T$ 次询问，每次给出 $n,m$，请求出 $\binom{n}{m}$ 对 $998,244,353$ 取模的结果。

其中 $\binom{n}{m}$ 为二项式系数，它的另一种写法是 $C_n^m$。
## 输入格式

输入的第一行是两个整数，分别表示询问的次数 $T$ 和所给出 $n$ 的最大值 $N$。  
接下来 $T$ 行，每行两个整数，依次表示给出的 $n$ 和 $m$。
## 输出格式

为了避免输出过大，请你输出一行一个整数，表示所有询问的结果的**按位异或和**。
## 样例

### 样例输入 #1
```
3 5
3 3
4 2
5 3
```
### 样例输出 #1
```
13
```
## 提示

### 样例 1 解释

三组询问的答案依次是 $1, 6, 10$。

### 数据规模与约定

对 $100\%$ 的数据，保证 $1 \leq T \leq 5 \times 10^6$，$0 \leq m \leq n \leq N \leq 5 \times 10^6$。

### 提示

请注意大量的数据读入对程序效率造成的影响，选择合适的读入方式，避免超时。


---

---
title: "扔骰子问题 1"
layout: "post"
diff: 普及/提高-
pid: B3718
tag: ['Special Judge', 'O2优化']
---
# 扔骰子问题 1
## 题目描述

有 $n$ 个六面骰子，投掷时，每个面朝上的概率均相同，且每个骰子的投掷结果相互独立。

现在投掷出这些骰子，请问恰好有 $m$ 个骰子的朝上面为一号面（仅有一个点的面）的概率是多少？

请你求出这个概率对 $998,244,353$ 取模的结果。
## 输入格式

**本题单测试点内有多组测试数据**。

第一行是一个整数，表示数据组数 $T$。

接下来 $T$ 行，每行两个整数，分别表示一组数据的 $n$ 和 $m$。
## 输出格式

共输出两行。

第一行输出一个仅含小写字母的字符串，表示『骰』这个字的汉语拼音（不含声调）。  
第二行输出一行一个整数， 表示所有询问答案的**按位异或和**。
## 样例

### 样例输入 #1
```
3
4 2
9 8
123456 789
```
### 样例输出 #1
```
#####
563183570
```
## 提示

### 样例 1 解释

样例输出的第一行被抹去了，你应该用一个仅含小写字母的字符串替换它。

### 数据规模与约定

对 $100\%$ 的测试点，保证 $1 \leq T \leq 5 \times 10^6$，$m \leq n \leq 5 \times 10^6$，$n \geq 1$，$m \geq 0$。

### 评分说明

本题共两行输出，第二行输出错误得 $0$ 分，第二行输出正确但第一行输出错误的，得 $50$ 分。


---

---
title: "扔骰子问题 2"
layout: "post"
diff: 普及/提高-
pid: B3728
tag: ['O2优化']
---
# 扔骰子问题 2
## 题目描述

有 $n$ 个六面骰子，投掷时，每个面朝上的概率均相同，且每个骰子的投掷结果相互独立。

现在投掷出这些骰子，请问所有骰子朝上的面的点数之和恰好为 $m$ 的概率是多少？

请你求出这个概率对 $998,244,353$ 取模的结果。
## 输入格式

**本题单测试点内有多组测试数据**。

第一行是一个整数，表示数据组数 $T$。

接下来 $T$ 行，每行两个整数，分别表示一组数据的 $n$ 和 $m$。
## 输出格式

输出一行一个整数，表示所有询问的答案的**按位异或和**。
## 样例

### 样例输入 #1
```
5
1 6
2 7
13 98
23 999
234 567
```
### 样例输出 #1
```
873483306
```
## 提示

### 数据规模与约定

对 $100\%$ 的测试点，保证 $1 \leq T \leq 6 \times 10^6$，$1 \leq n \leq 10^3$，$1 \leq m \leq 6 \times 10^3$。


---

---
title: "[信息与未来 2017] 房屋积水"
layout: "post"
diff: 普及/提高-
pid: B3731
tag: ['2017', '江苏', '信息与未来']
---
# [信息与未来 2017] 房屋积水
## 题目描述

乌龟家的屋顶是凹凸不平的，所以每次雨后都会积水。为了知道屋顶是否会在暴雨后塌掉，他把屋顶的形状给了你，希望你帮他计算暴雨后屋顶的积水总量。

乌龟的屋顶由顺次排在同一水平线上的 $n$ 个宽度为 $1$、高度为整数 (分别给出) 的瓦片组成。例如给定 $n=5$，瓦片的高度分别为 $4,2,3,5,1$，屋顶可以画在下图所示的网格中，灰色格子为瓦片。

暴雨过后，如果一个方格向左右两侧延伸都能到达瓦片占据的方格，它就会积水。所以图中波浪线格子在暴雨后会积水，屋顶的积水方格总数为 $3$。

![](https://cdn.luogu.com.cn/upload/image_hosting/qd0c3htr.png)

---

试题中使用的生成数列 $R$ 定义如下：整数 $0\leq R_1\lt 201701$ 在输入中给出。

对于 $i\gt 1,R_i=(R_{i−1}\times 6807+2831)\mod 201701$。
## 输入格式

两个整数 $n,R_1$，表示屋顶的宽度和生成数列的首项。从左向右数第 $i(1\leq i\leq n)$ 个瓦片的高度 $a_i=R_i\mod 10$。
## 输出格式

一个整数，表示暴雨后屋顶积水方格的总数。
## 样例

### 样例输入 #1
```
10 1
```
### 样例输出 #1
```
23
```
## 提示

$1\leq n\leq100$。

>本题原始满分为 $15\text{pts}$。


---

---
title: "[信息与未来 2021] 文本分类"
layout: "post"
diff: 普及/提高-
pid: B3759
tag: ['2021', '江苏', '信息与未来']
---
# [信息与未来 2021] 文本分类
## 题目背景

“分类” 是人工智能中很重要的一项任务，例如区分视频中的⼀帧图像是否存在异常事件、辨别图片中是否有待检索的目标、划分音频中词语的分界位置等。
## 题目描述

虽然属于“人工智能”的范畴，但分类问题也可以简单理解成是一个计算机函数 $f$，它输⼊一系列数据（例如代表图片颜色的二维数组、代表⽂本的字符串等），$f(x)$ 返回 $0$ 或 $1$，其中 $1$ 则代表 $x$ 具有某种特征，属于这⼀分类。

今天，⼤家要挑战一项文本的分类任务：识别一个单词序列是由英文书写的，还是由汉语拼音书写的。以下分别是两段文字，是用汉语拼音和英文书写的，你能正确地分类吗？

1. While a number of definitions of artificial intelligence (AI) have surfaced over the last few decades, John McCarthy offers the following definition in this 2004 paper, " It is the science and engineering of making intelligent machines, especially intelligent computer programs. It is related to the similar task of using computers to understand human intelligence, but AI does not have to confine itself to methods that are biologically observable."

1. Ren gong zhi neng shi yan jiu、kai fa yong yu mo ni、yan shen he kuo zhan ren.de zhi neng de li lun、fang fa ji ying yong xi tong de yi men xin de ji shu ke xue.
## 输入格式

输⼊数据的第一行是你需要分类文本的任务数量 $T$。

接下来 $T$ 行，每⾏描述了⼀个文本分类任务，首先是整数 $n$ 表示单词的个数，接下来 $n$ 个空格分隔的、仅由小写字母 $\tt{a}\sim \tt{z}$ 组成的字符串代表了⼀段待分类的文本。输⼊保证每个单词（对中⽂来说是每个字）之间都有一个空格。
## 输出格式

为每个分类任务输出一行，如果待分类的文本是拼音书写的，输出 `Pinyin`，如是英文书写的，输出 `English`（注意 `Pinyin` 和 `English` 的大小写）。
## 样例

### 样例输入 #1
```
2
14 zhe ge ti mu qi shi bi ni xiang xiang de yao jian dan
6 this problem has a simple solution
```
### 样例输出 #1
```
Pinyin
English
```
## 提示

对于 $100\%$ 的数据，满足 $1\leq T\leq 10,10^3\leq n\leq 10^4$ 并且文本都来自真实、易于人类阅读的文本。

>本题原始满分为 $15\text{pts}$。


---

---
title: "[信息与未来 2021] 掷骰子"
layout: "post"
diff: 普及/提高-
pid: B3760
tag: ['2021', '江苏', '信息与未来']
---
# [信息与未来 2021] 掷骰子
## 题目背景

骰子是一个正六面体（立方体），每一面上有圆点表示的数字（圆点的数量表示数字的大小）。一个普通的骰子的六个面上分别有 $1\sim 6$ 这 $6$ 个不同的数字：

![](https://cdn.luogu.com.cn/upload/image_hosting/unawcttj.png)
## 题目描述

但是今天你得到了一个特殊的骰子，虽然每个面上的数字依然是 $1\sim 6$ 之间的一个，但不同面上的数字却可能重复。为了还原骰子上的数字，你使用摄像头从不同角度拍摄了多张骰子的照片（骰⼦可能在空间中任意翻转）。但限于摄像头的角度，你拍摄的每张照⽚都只能拍到骰子的三个面。

你需要根据摄像头拍摄到的多张照片，推断出骰子每个面上可能的数字。
## 输入格式

输⼊数据的第一行为一个整数 $n$，代表摄像头拍摄的次数。

接下来 $n$ 行，每行三个整数 $x,y,z(1\leq x,y,z\leq 6)$，代表⼀次摄像机拍摄到骰子三个面上的数字，如下图所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/i18m9lvu.png)

输⼊数据保证所有的 $x,y,z$ 都是从同⼀个骰⼦拍摄得到的。
## 输出格式

输出一行两个整数（中间用⼀个空格隔开），分别表示满足摄像头拍摄到结果的骰子上数字和的最⼩值和最大值。
## 样例

### 样例输入 #1
```
2
1 1 1
2 2 1
```
### 样例输出 #1
```
8 13
```
### 样例输入 #2
```
2
1 2 3
4 5 6
```
### 样例输出 #2
```
21 21
```
## 提示

### 样例解释
#### 样例 $1$
我们知道骰子上至少有三个 $1$、两个 $2$。剩下的数字可能是 $1$ 也可能是 $6$。

#### 样例 $2$
这是一个“普通”的骰⼦，$1\sim 6$ 这些数字恰好出现⼀次。

对于 $20\%$ 的数据，$0\le n\leq 1$。

对于 $100\%$ 的数据，$0\leq n\leq 20$。

>本题原始满分为 $20\text{pts}$。


---

---
title: "[信息与未来 2022] 完美字符串"
layout: "post"
diff: 普及/提高-
pid: B3773
tag: ['2022', '江苏', '信息与未来']
---
# [信息与未来 2022] 完美字符串
## 题目描述

你可能见过下面这一句英文：

> "The quick brown fox jumps over the lazy dog."

短短的一句话就包含了所有 $26$ 个英文字母！因此这句话广泛地用于字体效果的展示。更短的还有：

> "The five boxing wizards jump quickly."

所以你很好奇：还有没有更多这样包含所有 $26$ 个英文字母的句子？于是你用爬虫在互联网上爬取了许多英文文本，并且提取出了其中的单词。你现在希望从一个很长的单词序列中找出**一段连续出现的**单词，它满足：

- 所有 $26$ 个英文字母都至少出现一次；
- 长度尽可能短，即包含的字母总数尽可能少。
## 输入格式

输入的第一行包含一个整数 $n$，代表单词序列的长度，即单词的数量。

输入的第二行包含 $n$ 个空格分隔的英文单词（**单词仅由小写字母构成**）。输入数据保证每个小写英文字母都至少出现一次。
## 输出格式

输出一行一个整数，是你找到的单词序列中的字母总数。
## 样例

### 样例输入 #1
```
13
there is a quick brown fox jumping over the lazy dog and cat
```
### 样例输出 #1
```
37
```
## 提示

最短满足条件的单词序列是 "is a quick brown fox jumping over the lazy dog"，共有 $37$ 个字母。

对于 $40\%$ 的数据，满足 $n\leq 100$；  
对于 $100\%$ 的数据，满足 $1\leq n\leq 100,000$。每个单词的长度不超过 $10$ 个字符，且单词全部由小写英文字母 $\texttt{a-z}$ 构成。


---

---
title: "[GESP202309 五级] 巧夺大奖"
layout: "post"
diff: 普及/提高-
pid: B3872
tag: ['2023', 'GESP']
---
# [GESP202309 五级] 巧夺大奖
## 题目描述

小明参加了一个巧夺大奖的游戏节目。主持人宣布了游戏规则：

1. 游戏分为 $n$ 个时间段，参加者每个时间段可以选择一个小游戏。

2. 游戏中共有 $n$ 个小游戏可供选择。

3. 每个小游戏有规定的时限和奖励。对于第 $i$ 个小游戏，参加者必须在第 $T_i$ 个时间段结束前完成才能得到奖励 $R_i$。

小明发现，这些小游戏都很简单，不管选择哪个小游戏，他都能在一个时间段内完成。关键问题在于，如何安排每个时间段分别选择哪个小游戏，才能使得总奖励最高？
## 输入格式

输入第一行，包含一个正整数 $n$。$n$ 既是游戏时间段的个数，也是小游戏的个数。约定 $1\le n\le500$。

输入第二行，包含 $n$ 个正整数。第 $i$ 个正整数为 $T_i$，即第 $i$ 个小游戏的完成期限。约定 $1\le T_i\le n$。

输入第三行，包含 $n$ 个正整数。第 $i$ 个正整数为 $R_i$，即第 $i$ 个小游戏的完成奖励。约定 $1\le R_i\le 1000$。
## 输出格式

输出一行，包含一个正整数 $C$，为最高可获得的奖励。
## 样例

### 样例输入 #1
```
7
4 2 4 3 1 4 6
70 60 50 40 30 20 10
```
### 样例输出 #1
```
230
```
## 提示

**样例解释 1**

$7$ 个时间段可分别安排完成第 4、2、3、1、6、7、5 个小游戏，其中第 4、2、3、1、7 个小游戏在期限内完成。因此，可以获得总计 $40+60+50+70+10=230$ 的奖励。


---

---
title: "[语言月赛 202409] 考试"
layout: "post"
diff: 普及/提高-
pid: B4033
tag: ['洛谷原创', 'O2优化', '语言月赛']
---
# [语言月赛 202409] 考试
## 题目描述

迅风和他的好朋友一同参加了 $n$ 场考试，而迅风拥有预知未来和**提升自己分数**的能力。

在第 $i$ 场考试中，迅风知道他自己原来取得 $a_i$ 分，他的好朋友**一定会**取得 $b_i$ 分。

而他们很喜欢争个高下，设迅风在 $x$ 场考试中分数比他的好朋友高，在 $y$ 场考试中分数比他的好朋友低，那么：

- 若 $x>y$，则说明在这 $n$ 场考试中，迅风更胜一筹。
- 若 $x<y$，则说明迅风的好朋友更胜一筹。
- 若 $x=y$，则说明两人打平。

迅风发现自己可能会输给他的朋友，于是他可以选择若干场考试**提升自己的分数**，记增加的分数总和为 $sum$。

迅风想知道，自己要在这 $n$ 场考试中更胜一筹，所需的 $sum$ 最小为多少？
## 输入格式

输入的第一行有一个正整数 $n$ 表示考试数量。

第二行有 $n$ 个正整数 $a_1,\ldots,a_n$，表示迅风每场考试的分数。

第三行有 $n$ 个正整数 $b_1,\ldots, b_n$，表示迅风的朋友每场考试的分数。
## 输出格式

输出一个非负整数 $sum$ 表示答案。
## 样例

### 样例输入 #1
```
3
30 10 9995
100 1 10000

```
### 样例输出 #1
```
6

```
### 样例输入 #2
```
4
10 20 50 90
11 22 50 90

```
### 样例输出 #2
```
3

```
### 样例输入 #3
```
3
100 100 1
3 3 1

```
### 样例输出 #3
```
0

```
## 提示

**【样例 1 解释】**

只要把第 $3$ 次考试的得分提升 $6$ 分，就可以在第 $2,3$ 次考试中获得比朋友更高的分数，从而 $x=2,y=1$，迅风更胜一筹。

**【样例 2 解释】**

只要把第 $1,3,4$ 次考试的得分各提升 $1$ 分，就可以让 $x=2,y=1$，从而让迅风更胜一筹。

**【样例 3 解释】**

哪怕不提升分数，也有 $x=2,y=0$ 了，迅风已经更胜一筹。

**【数据范围】**

本题共有 $20$ 个测试点，测试点等分。

|测试点编号|$n\le$|特殊性质|
|:-:|:-:|:-:|
|$1\sim 2$|$2$||
|$3\sim 6$|$100$|$a_i,b_i\le 2$|
|$7$|$1000$|每次考试两人成绩都相等|
|$8\sim 11$|$1000$|迅风成绩递增，他朋友成绩递减|
|$12\sim 15$|$1000$|每次考试两人成绩都不相等|
|$16\sim 20$|$1000$||

**关于测试点 $8\sim 11$，这里的递增和递减是不严格的，如 $1,5,5,8,10$ 也视为递增。**

特别地，编号为奇数的测试点 $n$ 为奇数，编号为偶数的测试点 $n$ 为偶数。

对于全体数据，保证 $1\le n\le 1000$，$1\le a_i,b_i\le 10^4$（也就是 $10000$），输入皆为整数。

**【后记】**
祝各位参加 $2024$ 年 CSP 比赛的选手 rp++！


---

---
title: "[GESP202412 五级] 奇妙数字"
layout: "post"
diff: 普及/提高-
pid: B4070
tag: ['2024', 'GESP']
---
# [GESP202412 五级] 奇妙数字
## 题目描述

小杨认为一个数字 $x$ 是奇妙数字当且仅当 $x=p^a$，其中 $p$ 为任意质数且 $a$ 为正整数。例如，$8=2^3$，所以 $8$ 是奇妙的，而 $6$ 不是。

对于一个正整数 $n$，小杨想要构建一个包含 $m$ 个奇妙数字的集合 $\{x_1,x_2,\cdots,x_m\}$，使其满足以下条件：
- 集合中不包含相同的数字。
- $x_1\times x_2\times \cdots\times x_m$ 是 $n$ 的因子（即 $x_1,x_2,\cdots,x_m$ 这 $m$ 个数字的乘积是 $n$ 的因子）。

小杨希望集合包含的奇妙数字尽可能多，请你帮他计算出满足条件的集合最多包含多少个奇妙数字。
## 输入格式

第一行包含一个正整数 $n$，含义如题面所示。
## 输出格式

输出一个正整数，代表满足条件的集合最多包含的奇妙数字个数。
## 样例

### 样例输入 #1
```
128
```
### 样例输出 #1
```
3
```
## 提示

#### 样例解释

关于本样例，符合题意的一个包含 $3$ 个奇妙数字的集合是 $\{2,4,8\}$。首先，因为 $2=2^1$，$4=2^2$，$8=2^3$，所以 $2,4,8$ 均为奇妙数字。同时，$2\times 4\times 8=64$ 是 $128$ 的的因子。

由于无法找到符合题意且同时包含 $4$ 个奇妙数字的集合，因此本样例的答案为 $3$。

#### 数据范围

对于 $100\%$ 的数据，保证 $2\le n\le 10^{12}$。

| 子任务编号 | 得分占比 | $n$ |
| :--: | :--: | :--: |
| $1$ | $20\%$ | $\le 10$ |
| $2$ | $20\%$ | $\le 1\,000$ |
| $3$ | $60\%$ | $\le 10^{12}$ |




---

---
title: "[GESP202412 五级] 武器强化"
layout: "post"
diff: 普及/提高-
pid: B4071
tag: ['2024', 'GESP']
---
# [GESP202412 五级] 武器强化
## 题目描述

小杨有 $n$ 种武器和 $m$ 种强化材料。第 $i$ 种强化材料会适配第 $p_i$ 种武器，小杨可以花费 $c_i$ 金币将该材料对应的适配武器修改为任意武器。

小杨最喜欢第 $1$ 种武器，因此他希望适配该武器的强化材料种类数**严格大于**其他的武器，请你帮小杨计算为了满足该条件最少需要花费多少金币。
## 输入格式

第一行包含两个正整数 $n,m$，含义如题面所示。

之后 $m$ 行，每行包含两个正整数 $p_i,c_i$，代表第 $i	$ 种强化材料的适配武器和修改花费。
## 输出格式

输出一个整数，代表能够使适配第 $1$ 种武器的强化材料种类数**严格大于**其他的武器最少需要花费的金币。
## 样例

### 样例输入 #1
```
4 4
1 1
2 1
3 1
3 2
```
### 样例输出 #1
```
1
```
## 提示

#### 样例解释

花费 $1$，将第三种强化材料的适配武器由 $3$ 改为 $1$。此时，武器 $1$ 有 $2$ 种强化材料适配，武器 $2$ 和武器 $3$ 都各有 $1$ 种强化材料适配，满足适配第 $1$ 种武器的强化材料种类数**严格大于**其他的武器。

#### 数据范围

对于 $100\%$ 的数据，保证 $1\le n,m\le 1\, 000$，$1\le p_i\le n$，$1\le c_i\le 10^9$。

| 子任务编号 | 得分占比 | $n$ | $m$ |
| :--: | :--: | :--: | :--: |
| $1$ | $20\%$ | $\le 2$ | $\le 1\, 000$ |
| $2$ | $20\%$ | $\le 1\,000$ | $\le 2$ |
| $3$ | $60\%$ | $\le 1\, 000$ | $\le 1\, 000$ |



---

---
title: "[CSP-X2022 山东] 动物园"
layout: "post"
diff: 普及/提高-
pid: B4098
tag: ['2022', '山东', 'CSP-X 小学组']
---
# [CSP-X2022 山东] 动物园
## 题目描述

某动物园里有 $n$ 个场馆和 $m$ 种动物（$m ≤ n$）。

$n$ 个场馆的编号分别用 $1,2,3, . . , n$ 表示；$m$ 种动物的编号分别用 $1,2,3, . . , m$ 表示。每一个场馆中只饲养了一只动物，不同的场馆可能饲养着相同种类的动物。

这个动物园的门票比较特殊，游客在购买门票时必须说明要参观的场馆的起止编号 $a$ 和 $b$（起止编号会打印到游客购买的门票上），代表游客只能参观动物园的第 $a$ 个场馆至第 $b$ 个场馆（包含 $a,b$）里的动物，其他的场馆不能去。门票按一个场馆十元收费。

如果你购买的门票的起止场馆编号是 $3$ 到 $8$，那么你需要花 $60$ 元钱购买门票，只能观看$3,4,5,6,7,8$ 号场馆的动物。

小明希望看到动物园内所有种类的动物，同时小明是个非常节约的孩子，他希望花最少的钱买门票。 请你帮小明计算：他最少需要花费多少钱买门票才能看到所有种类的动物（同一种动物他可能不止看一个）。注意：小明只能买一张门票。
## 输入格式

第一行两个整数 $n,m$，分别表示动物园内的场馆数量及动物种类数量。

第二行是 $x_1,x_2,\cdots,x_n$，其中 $x_i$ 表示第 $i$ 个场馆中的动物种类编号。
## 输出格式

一行一个整数 $p$，表示小明的门票费用。
## 样例

### 样例输入 #1
```
12 5
2 5 3 1 3 2 4 1 1 5 3 4 3
```
### 样例输出 #1
```
60
```
## 提示

对于 $30\%$ 的数据，有 $ n ≤ 200 , m ≤ 20$。

对于 $60\%$ 的数据，有 $n ≤ 1000 , m ≤ 1000$。

对于 $100\%$ 的数据，有 $1 ≤ n≤ 10^6，1 ≤ x_i ≤ m ≤ 2 × 10^3$。


---

---
title: "[CSP-X2022 山东] 摧毁"
layout: "post"
diff: 普及/提高-
pid: B4099
tag: ['2022', '山东', 'CSP-X 小学组']
---
# [CSP-X2022 山东] 摧毁
## 题目描述

坐地日行八万里，巡天遥看一千河。

2077 年，人类不仅仅是赛博科技得到了发展，太空技术也已经得到了极大的发展。地球的不同外轨道上已经充斥着各种功能用途的人造卫星。因为一个轨道上的卫星数量是有上限的，且卫星更新换代速度很快，如果想要发射新的卫星，需要把所有旧的卫星摧毁。

人类有两种不同的武器可以摧毁卫星，具体如下（其中 $\rm PW$ 为新的能量单位）：

1. 使用定点激光武器花费 $1\ \rm{PW}$ 的代价摧毁任意轨道上指定的一个卫星。

2. 使用脉冲轨道武器花费 $c\ \rm{PW}$ 的代价把某一轨道上的所有卫星摧毁。

现在有 $n$ 个旧卫星分布在不同的外轨道上，你的任务是摧毁这些旧卫星。给出这 $n$ 个卫星的轨道编号，求将这些卫星全部摧毁的最小代价是多少？
## 输入格式

第一行一个正整数 $T$，表示测试数据组数。

接下来对于每组测试数据（注意：每组测试数据有 $2$ 行数据，以下共 $2T$ 行数据）：

第一行两个正整数 $n$ 和 $c$ 表示需要摧毁的卫星数量和使用脉冲轨道武器的代价。

第二行 是 $x_1,x_2,x_3,\cdots, x_n$，其中 $x_i$ 表示第 $i$ 个卫星的轨道编号。
## 输出格式

输出 $T$ 行答案，对于每组测试数据，输出一行一个整数表示摧毁所有卫星的代价。
## 样例

### 样例输入 #1
```
4
10 1
2 1 4 5 2 4 5 5 1 2
5 2
3 2 1 2 2
2 2
1 1
2 2
1 2
```
### 样例输出 #1
```
4
4
2
2
```
## 提示

对于 $30\%$ 的数据，$T = 1,1 ≤ n ≤ 10，1 ≤ x_i ≤ 10，1 ≤ c ≤ 10$；

对于 $60\%$ 的数据，$1 ≤ n ≤ 10^3， 1 ≤ x_i ≤ 1000，1 ≤ c ≤ 100$；

对于 $100\%$ 的数据，$1 ≤ T ≤ 10,1 ≤ n ≤ 10^6, 1 ≤ x_i ≤ 10^6，1 ≤ c ≤ 100$，且所有测试数据的 $n$ 加起来不超过 $10^6$。


---

---
title: "[CSP-X2023 山东] 赚钱"
layout: "post"
diff: 普及/提高-
pid: B4100
tag: ['2023', '山东', 'CSP-X 小学组']
---
# [CSP-X2023 山东] 赚钱
## 题目描述

小 A 很喜欢旅游，他的国家共有 $n$ 个城市，编号依次为 $1$ 到 $n$，这个暑假小 A 打算从 $1$ 号城市开始按编号从小到大依次旅游完所有的城市，最后达到 $n$ 号城市，而且他不走回头路，每个城市只走一次。

小 A 很聪明，在没出发之前，他已经了解到，每个城市都有他喜欢的小熊纪念品，但是每个城市的价格却不完全一样（在同一个城市买入和卖出一个小熊纪念品的价格相同），于是小 A 打算从经过的某一个城市 $x$ 买一个纪念品，然后在后面经过的某个城市 $y$ 卖掉，从而赚取其中的差价。**但是他必须在某个城市买 $1$ 次，而且只能买 $1$ 个，并且一定要在后面的某个城市卖掉（不能在同一个城市先买入后再卖出）**，因为他家里已经有很多小熊纪念品了。

如，$2$ 号城市的纪念品价格是 $10$ 元，$6$ 号城市的纪念品是 $8$ 元，$10$ 号城市的纪念品是 $18$ 元，假设小 A 在 $2$ 号城市花 $10$ 元钱买了一个纪念品，如果在 $6$ 号城市卖掉他就亏了 $2$ 元（赚 $-2$ 元），如果在 $10$ 号城市卖，他就会赚 $8$ 元。

小 A 希望赚的钱越多越好。

问：小 A 最多能赚多少钱（当然也有可能亏钱）？
## 输入格式


第一行一个整数 $n$，表示城市的个数。

第二行，$n$ 个用一个空格隔开的正整数，$a_1,a_2,\ldots,a_n$，依次表示小 A 要经过的城市的纪念品的价格。
## 输出格式


输出一个整数，表示小 A 能赚到钱的最大值。
## 样例

### 样例输入 #1
```
5
2 1 6 8 4
```
### 样例输出 #1
```
7
```
### 样例输入 #2
```
6
10 8 7 5 3 1
```
### 样例输出 #2
```
-1
```
## 提示

对于 $30\%$ 的数据：$n\le 1000$。

对于 $100\%$ 的数据：$2\le n\le 2\times 10^5$，$0\lt a_i\le 2\times 10^9$。


---

---
title: "[CSP-X2023 山东] 回文字符串"
layout: "post"
diff: 普及/提高-
pid: B4101
tag: ['2023', '山东', 'CSP-X 小学组']
---
# [CSP-X2023 山东] 回文字符串
## 题目描述


作为一个新手，小明刚学了回文字符串，知道了一个字符串如果关于中心对称，则该字符串为回文字符串。

于是他自己就发明了属于他自己的回文字符串，即符合以下条件的字符串 $S$ 是回文字符串：

首先把字符串 $S$ 分割成 $n$ 个子串 $S_1,S_2,\ldots,S_n$，即 $S_1+S_2+\ldots+S_n = S$（其中 $+$ 为字符串拼接操作）。

分割成的子串数量需要大于 $1$，且不能为空，即 $n > 1$ 且 $S_i$ 为非空子串。

对于所有的 $i \in[1, n]$ 有：要么 $S_i$ 与 $S_{n−i+1}$ 相等，要么 $S_i$ 与 $S_{n−i+1}$ 互为回文。（补充说明：字符串 $A$ 和 $B$ 互为回文指 $A$ 倒过来与 $B$ 相等，反之亦然。举例说明：$\texttt{abc}$ 与 $\texttt{cba}$ 互为回文。）

给定一个字符串 $S$，请你帮助小明确定该字符串是否是在上述规则下的回文字符串。

如果是，他还想将字符串 $S$ 分成尽可能多的子串。
## 输入格式

一行一个字符串 $S$。

## 输出格式



如果不能满足要求，输出一行一个字符串 $\texttt{NO}$；否则，输出两行，第一行一个字符串 $\texttt{YES}$，第二行一个整数 $n$ 表示最大的子串数量。
## 样例

### 样例输入 #1
```
abcababcba
```
### 样例输出 #1
```
YES 
8
```
### 样例输入 #2
```
goodluckhavefun
```
### 样例输出 #2
```
NO
```
### 样例输入 #3
```
wahacodewaha
```
### 样例输出 #3
```
YES
3
```
## 提示


### 样例解释

- 样例 $1$ 解释：最多可以把字符串分成 $\texttt{(a)(b)(c)(ab)(a)}$ 共 8 个子串。
- 样例 $2$ 解释：很显然不存在满足题意的分割方案。
- 样例 $3$ 解释：最多可以把字符串分成 $\texttt{(waha)(code)(waha)}$ 共 3 个子串。


### 数据范围

对于 $30\%$ 的数据，$1\le |S|\le 10$；（其中 $S$ 为给定字符串的长度）

对于 $60\%$ 的数据，$1\le |S |\le 10^3$；

其中有 $30\%$ 的数据，输入的字符串为回文字符串；

对于 $100\%$ 的数据，$1\le| S |\le10^4$，保证输入的字符串全为小写字母。


---

---
title: "[CSP-X2023 山东] 代价"
layout: "post"
diff: 普及/提高-
pid: B4103
tag: ['2023', '山东', 'CSP-X 小学组']
---
# [CSP-X2023 山东] 代价
## 题目描述

因为“黑发不知勤学早”，于是小明成为了一名伟大的流水线工人，天天起早摸黑打螺丝。

这一天，小明所在的流水线生成了 $n$ 件产品，其中第 $i$ 号产品规格用一个正整数 $a_i$ 表示。

所谓流水线，就是需要标准化。于是，小明想把这 $n$ 件产品规格修整得全部相同。

小明手边有两种工具来进对产品进行修整，但是使用不同工具需要花费不同的代价，小明可以进行以下操作任意次：

- 使用一次第一种工具花费 $A$ 的代价将第 $i$ 件产品的规格 $a_i$ 修改成 $a_i+1$（其中 $i\in [1,n]$）。
- 使用一次第二种工具花费 $B$ 的代价将第 $i$ 件产品的规格 $a_i$ 修改成 $a_i-1$（其中 $i\in [1,n]$）。

现在小明想要花费最少的代价将所有产品的规格都变得相同，于是他找到了自幼勤学苦练的你来帮忙。

你只需要计算出把所有产品调整为相同规格的最小代价即可。

## 输入格式

第一行三个正整数 $n,A,B$，分别表示产品数量，使用一次第一种工具的代价 $A$ 和使用一次第二种工具的代价 $B$。

第二行 $n$ 个正整数 $a_1,a_2,\ldots,a_n$ 表示每件产品的产品规格。
## 输出格式

一行一个整数表示最小的总代价。

## 样例

### 样例输入 #1
```
3 1 1 
1 2 5
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
3 1 100 
1 2 5
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
3 2 5 
9999999999 9999999999 9999999999
```
### 样例输出 #3
```
0
```
## 提示


### 样例解释

- 样例 $1$ 解释：两种操作的代价相等，所以把所有产品规格修改成 $2$ 花费的代价最小，计算可得最小代价为 $4$（$1$ 变为$2$，$5$ 变为 $4$，$4$ 再变为 $3$，$3$ 再变为 $2$，已经规格相同，共 $4$ 次）。
- 样例 $2$ 解释：因为二操作代价 $B$ 太大，所以把所有产品规格修改成 $5$ 花费代价最小，计算可得最小代价为 $7$（用一操作，$1$ 变为 $5$ 需要 $4$ 次，$2$ 变为 $5$ 需要 $3$ 次，共 $7$ 次）。


### 数据范围

对于 $30\%$ 的数据，$1\le n\le 10$，$1\le a_i \le100 $，$1\le A,B \le10$；

对于 $60\%$ 的数据，$1\le n\le 10^5$，$1\le a_i \le10^5 $，$1\le A,B \le100$；

其中有 $30\%$ 的数据，$A=B$；

对于 $100\%$ 的数据，$1\le n\le 10^5$，$1\le a_i \le10^9 $，$1\le A,B \le1000$。
	


---

---
title: "[CSP-X2024 山东] 刷题"
layout: "post"
diff: 普及/提高-
pid: B4107
tag: ['2024', '山东', 'CSP-X 小学组']
---
# [CSP-X2024 山东] 刷题
## 题目描述

比赛之路多艰，做题方得提升。努力刷题的人在比赛中往往能取得很好的成绩，小红就是这样的人。

为了继续提升自己的编程实力，小红整理了一份刷题题单，并选中了题单中的 $n$ 道编程题，将它们从 $1$ 到 $n$ 编号，计划用 $m$ 天时间按照题目编号顺序做完所有的题目（一道题目只能在同一天完成，不可以使用多天完成同一道题目）。

在小红的计划中，她完成第 $i$ 道题目的时间为 $a_i$。因为题目有难有易，小红做题时可以找好朋友小明帮忙解题，通过询问小明一道题目的解法，可以省去这个题目的做题时间。当然了，小红做题是为了提升自己，而不是提升小明。因此小红决定一天最多求助小明一次。

本题 $m$ 天中，小红做题时间最长一天的总耗时定义为 $T$（小明帮忙做的题目不计入小红的做题总时间）。请你帮小红求出 $T$ 的最小值是多少？
## 输入格式

第一行两个正整数 $n,m$ 分别表示小红做的题目以及小红刷完这些题目计划所用天数。

第二行 $n$ 个正整数，分别表示每个题目解题所用时间 $a_i$。
## 输出格式

输出仅一行，$m$ 天中耗时最长一天的总耗时 $T$ 的最小值。
## 样例

### 样例输入 #1
```
4 2
1 2 3 3
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
3 4
999 999 999
```
### 样例输出 #2
```
0
```
## 提示

对于 $30\%$ 的数据，满足 $1 \leq n \leq 10^3$。

对于 $60\%$ 的数据，满足 $1 \leq n \leq 10^4$。

对于 $100\%$ 的数据，满足 $1 \leq n \leq 10^5,0 \leq a_i \leq 10^4,1 \leq m \leq 1000$。


---

---
title: "[CCPC 2023 北京市赛] 游戏"
layout: "post"
diff: 普及/提高-
pid: P10039
tag: ['2023', 'XCPC']
---
# [CCPC 2023 北京市赛] 游戏
## 题目描述

小 I 和小 J 又在玩游戏。

小 J 找来了一棵 $n$ 个点的树。树上的每条边有开启和关闭两个状态，初始树上每条边都是开启的。

初始树上有一颗棋子放在 $1$ 号节点。小 I 可以移动棋子，目标是将棋子移动到一个度数**恰好**为 $1$ 的节点上；小 J 可以关闭树上的边，目标是阻止小 I 将棋子移动到度数恰好为 $1$ 的节点上。

游戏分为若干轮，每轮有如下环节：

1. 小 I 任务判定：如果棋子在度数恰好为 $1$ 的节点上，小 I 获胜，否则进入第 2 步；
2. 小 J 行动：小 J 将一条目前开启的边，将这条边永久关闭，进入第 3 步，如果目前不存在开启的边则直接跳过行动进入第 3 步；
3. 小 I 行动：小 I 选择一条连接当前棋子所在节点且开启的边，将棋子移动到这条边的另一个节点上。如果没有这样的边，小 J 获胜，否则进入新的一轮，回到第 1 步。

小 J 想知道，如果小 I 和小 J 知道这棵树的形态且绝顶聪明，谁会获胜。
## 输入格式

第一行一个整数 $n (1 \le n \le 10^5)$ 表示树的节点数，接下来 $n-1$ 行每行两个整数 $u,v (1 \le u, v \le n)$，表示树上的一条边。
## 输出格式

如果小 I 获胜，输出 `You win, temporarily.`，否则输出 `Wasted.`。
## 样例

### 样例输入 #1
```
6
1 2
2 3
2 4
1 5
5 6
```
### 样例输出 #1
```
Wasted.
```
### 样例输入 #2
```
7
1 2
2 3
2 4
1 5
5 6
5 7
```
### 样例输出 #2
```
You win, temporarily.
```
## 提示

【样例解释 1】

小 J 的策略如下：

- 小 J 将 $(1,2)$ 关闭，这样小 I 只能移动到 $5$；
- 小 J 将 $(5,6)$ 关闭，这样小 I 只得移动回 $1$；
- 小 J 将 $(1,5)$ 关闭，于是小 I 无法移动。


---

---
title: "[CCPC 2023 北京市赛] 广播"
layout: "post"
diff: 普及/提高-
pid: P10043
tag: ['2023', 'XCPC']
---
# [CCPC 2023 北京市赛] 广播
## 题目描述

小 I 正在学习使用 Pytorch。这是一个非常热门的用于机器学习训练的 Python 库。

小 I 注意到，Pytorch 中对于张量运算有称作“广播”(broadcast)的机制。你可以认为张量是高维数组。对于一个 $k$ 维张量 $A$，我们用长度为 $k$ 的序列 $(a_1,a_2,\cdots,a_k)$ 表示其各个维度的长度，也就是说 $A$ 是一个 $a_1 \times a_2 \times \cdots \times a_k$ 的张量。

对于两个张量 $A$ 和 $B$，设它们的维度分别为 $(a_1,a_2,\cdots,a_m)$ 和 $(b_1,b_2,\cdots,b_n)$，称 $A$ 和 $B$ 是 **可广播的**，当且仅当以下性质成立：

- 对于任意整数 $0 \le i \le \min(n,m) - 1$，要么 $a_{m-i} = b_{n-i}$，要么 $a_{m-i}$ 和 $b_{n-i}$ 中至少有一个是 $1$。

现在小 I 有两个张量，它们的维度分别是 $(p_1,p_2,\cdots,p_m)$ 和 $(q_1,q_2,\cdots,q_n)$，它们不一定是可广播的。

为此，小 I 可以使用 Pytorch 内置的函数进行若干次操作（可以不做操作），每次操作对序列 $p$ 或 $q$ 进行以下修改：

- 选择 $p$ 或 $q$，在选定序列的任意一个位置插入一个 $1$。

小 I 想知道他最少要多少次操作才能让两个张量变为可广播的。
## 输入格式

输入的第一行两个整数 $m,n(1 \le m,n \le 2000)$ 表示两个张量的维度。

第二行 $m$ 个整数 $p_1,p_2,\cdots,p_m (1 \le p_i \le 2000)$ 描述第一个张量每个维度的长度。

第三行 $n$ 个整数 $q_1,q_2,\cdots,q_n (1 \le q_i \le 2000)$ 描述第二个张量每个维度的长度。
## 输出格式

输入一行一个整数表示最少的插入 $1$ 的数量使得两个张量变为可广播的。
## 样例

### 样例输入 #1
```
4 2
2 1 3 2
4 2
```
### 样例输出 #1
```
1
```
## 提示

在序列 $q$ 的第二个位置之前插入一个 $1$（得到 `4 1 2`），两个张量就会变为可广播的。


---

---
title: "[CCPC 2023 北京市赛] 图"
layout: "post"
diff: 普及/提高-
pid: P10048
tag: ['2023', 'XCPC']
---
# [CCPC 2023 北京市赛] 图
## 题目描述

给定一个 $n$ 个点的无向正权完全图，请对于每一条边 $(a,b)$，求出是否存在一个点对 $(x,y)$ 使得 $x\rightarrow y$ 的所有最短路都经过 $(a,b)$。
## 输入格式

第一行一个正整数 $n (1 \le n \le 500)$ 表示图的点数。

接下来 $n$ 行每行 $n$ 个数，构成一个大小为 $n\times n$ 的矩阵，第 $i$ 行第 $j$ 个数 $a_{i,j}(1\leq a_{i,j}\leq 10^6)$ 表示 $(i,j)$ 之间的边长度，特别地，$a_{i,i} = 0$.

保证 $a_{i,j}=a_{j,i}$。
## 输出格式

输出一个大小为 $n$ 的 $01$ 矩阵，其中第 $i$ 行第 $j$ 列为 $1$ 表示边 $(i,j)$ 满足题目中提出的要求，$0$ 表示不满足。

特别的，当 $i=j$ 时输出 $0$。
## 样例

### 样例输入 #1
```
4
0 3 2 100
3 0 8 100
2 8 0 10
100 100 10 0
```
### 样例输出 #1
```
0110
1000
1001
0010
```


---

---
title: "Reverse and Rotate"
layout: "post"
diff: 普及/提高-
pid: P10058
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# Reverse and Rotate
## 题目描述

给定一个字符串 $S$ 和 $n$ 次操作，每次操作为以下 $3$ 种形式之一：

1. `< x` 表示将 $S$ 向左循环移动 $x$ 位。例如：$\mathtt{abcde}$ 执行 `< 2` 后变成 $\mathtt{cdeab}$。

2. `> x` 表示将 $S$ 向右循环移动 $x$ 位。例如：$\mathtt{abcde}$ 执行 `> 2` 后变成 $\mathtt{deabc}$。

3. `rev` 表示将 $S$ 翻转。例如：$\mathtt{abcde}$ 执行 `rev` 后变成 $\mathtt{edcba}$。

求 $S$ 在**依次**执行这 $n$ 次操作后得到的字符串 $S'$。

注：对于 $S=s_0s_1\cdots s_{k-1}$，将其向左循环移动 $x$ 位，会变成 $s_{-x}S_{-x+1}\cdots S_{-x+k-1}$；向右循环移动 $x$ 位，会变成 $s_{x}S_{x+1}\cdots S_{x+k-1}$。对于 $x\equiv y\pmod k$，有 $s_x=s_y$。
## 输入格式

第一行一个字符串 $S$。

第二行一个整数 $n$。

接下来 $n$ 行，每行一个操作。
## 输出格式

一行一个字符串 $S'$，表示**依次**执行 $n$ 次操作后得到的字符串。
## 样例

### 样例输入 #1
```
abcde
3
> 2
rev
< 2
```
### 样例输出 #1
```
aedcb
```
## 提示

**【样例 1 解释】**

- 原字符串为 $\mathtt{abcde}$；
- 第一次操作后，字符串变为 $\mathtt{deabc}$；
- 第二次操作后，字符串变为 $\mathtt{cbaed}$；
- 第三次操作后，字符串变为 $\mathtt{aedcb}$。

**【数据规模与约定】**

记 $|S|$ 表示字符串 $S$ 的长度。

| 测试点编号 | 特殊性质 |
| :----------: | :----------: |
| $1\sim3$ | $\vert S\vert,n,x \le 1000$ |
| $4$ | 没有 `rev` 操作 |
| $5$ | $S=\mathtt{aa...abb...b}$ |
| $6\sim10$ | 无 |

对于 $100\%$ 的数据，$1 \le |S|,n \le 10^6$，$0 \le x \le 10^9$，$S$ 仅由小写字母组成。


---

---
title: "[GDKOI2024 普及组] 刷野 II"
layout: "post"
diff: 普及/提高-
pid: P10073
tag: ['2024', '广东', 'Special Judge', 'O2优化']
---
# [GDKOI2024 普及组] 刷野 II
## 题目描述

Zayin 是一个与怪物战斗的巫师，这次他将面临 $n$ 个站成一排的怪物，其中第 $i$ 个怪物的生命值是 $a_i$。

Zayin 知道许多被压制的咒语，在这场战斗中，他决定使用一个名为” 闪电连击” 的咒语来一口气击败所有的怪物。让我们看看这个咒语是如何工作的。

- 首先，Zayin 选择一个怪物 $i(1 \leq i \leq n)$ 以及咒语的初始力量 $x$。
- 然后这个咒语会首先击中怪物 $i$，随后对于除第一个目标怪物外，Zayin 可以选择一个没有被该咒语击中过，并且与其中一个已经被击中的怪物相邻的怪物。
- 第一个被击中的目标怪物会受到 $x$ 的伤害，第二个目标怪物会受到 $x-1$ 的伤害，第三个受到 $x-2$ 的伤害，以此类推。不难看出，每个怪物都会被击中恰好一次。

如果一个怪物受到的伤害不低于其生命值，则视为死亡。

Zayin 想展示他作为一个高级巫师的能力，所以他希望在只使用一次咒语就能杀死所有怪物的前提下，使用最少的初始力量 $x$。

现在你需要求出所需的最少的初始力量，并给出一个方案。如果有多个不同的方案，只需要给出任意一个就可以了。
## 输入格式

第一行包含两个整数 $d, n$，表示测试点编号和怪物数。

接下来一行 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 个怪物的血量。
## 输出格式

第一行输出一个整数 $x$，表示最少的初始力量。

接下来第二行输出 $n$ 个用空格分割的下标 $monster_i(1 \leq i \leq n)$，其中 $monster_i$ 表示第 $i$ 个击中的目标怪物。
## 样例

### 样例输入 #1
```
1 10
19 9 12 5 10 7 16 15 17 12
```
### 样例输出 #1
```
25
1 2 3 4 5 6 7 8 9 10
```
## 提示

对于所有测试数据，保证 $1 \leq n \leq 5 \times 10^6$
，$1 \leq a_i \leq 10^9$。

| 测试点编号 | $n\leq$ |
| :----------: | :----------: |
| $1$ | $10$ |
| $2$ | $20$ |
| $3$ | $500$ |
| $4$ | $5000$ |
| $5$ | $5\times 10^4$ |
| $6,7$ | $5\times 10^5$ |
| $8,9,10$ | $5\times 10^6$ |



---

---
title: "[GDKOI2024 普及组] 捉迷藏"
layout: "post"
diff: 普及/提高-
pid: P10076
tag: ['2024', '广东', 'O2优化']
---
# [GDKOI2024 普及组] 捉迷藏
## 题目描述

Zayin 和 Ziyin 正在玩有趣的捉迷藏游戏。

该游戏在一颗具有 $n$ 个节点（编号从 $1$ 到 $n$）的树上进行。

在游戏的开始，Zayin 在节点 $a$，而 Ziyin 在节点 $b$。他们轮流操作，Zayin 先移动。在每次移动中，Zayin
能移动到距离当前所在点不超过 $da$ 的节点上，而 Ziyin 能移动到距离当前所在点不超过 $db$ 的节点上（注意
可以保持在当前点不动）。

当某次移动后，其中一人抓住了另外一人，即移动到了另外一人的节点上，则游戏结束，被抓住的人输掉游戏。

当 Zayin 和 Ziyin 都按最优策略移动的话，谁会是最后赢家呢。

注解：
- 一颗具有 $n$ 个节点的树是指一个具有 $n$ 个节点，$n - 1$ 条边的连通无向图。
- 树上两个节点的距离定义为连接该两点的最短路径所包含的边数。
## 输入格式

每个测试点包含多个测试用例。

第一行包含两个整数 $d, t$，表示测试点编号，和测试用例的数量。每个测试用例的描述如下。

第一行包含两个整数 $n, q$ —— 分别为顶点数、询问数。

接下来 $n-1$ 行每行包含两个整数 $u, v (1 \leq u, v \leq n, u \neq v)$，表示顶点 $u$ 和 $v$ 之间具有一条直接相连的边，保证这些边形成一棵树。

接下来 $q$ 行每行包含四个整数 $a, b, da, db(1 \leq a, b, da, db \leq n)$ 作为一次游戏，分别表示 Zayin 初始节点、Ziyin 初始节点、Zayin 最大移动距离、Ziyin 最大移动距离。
## 输出格式

对于每个测试用例的每次游戏，输出一行 `Zayin` 或 `Ziyin` 表示最后赢家，特别地如果在 $10^{10^5}$ 轮内游
戏没有仍结束，则输出 `Draw` 表示平局。

## 样例

### 样例输入 #1
```
1 2
6 5
2 3
2 6
2 1
4 3
5 1
5 4 1 2
6 4 4 3
1 4 5 4
5 2 1 4
2 5 1 5
4 5
1 4
3 4
2 4
4 2 2 3
4 3 2 2
4 3 3 3
1 2 1 1
1 2 1 2
```
### 样例输出 #1
```
Ziyin
Zayin
Zayin
Ziyin
Ziyin
Zayin
Zayin
Zayin
Draw
Ziyin
```
## 提示

保证所有测试用例的 $n$ 之和不超过 $10^6$，$q$ 之和不超过 $10^6$。

| 数据点编号 | $\sum n \leq$ | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $10$ | 无 |
| $2$ | $100$ | $q=1$ |
| $3$ | $100$ | 无 |
| $4$ | $10^4$ | $q=1$ |
| $5$ | $10^4$ | 无 |
| $6$ | $10^6$ | $q=1$ |
| $7,8,9,10$ | $10^6$ | 无 |



---

---
title: "「Daily OI Round 3」Pigeon"
layout: "post"
diff: 普及/提高-
pid: P10126
tag: ['洛谷原创', 'Special Judge', 'O2优化']
---
# 「Daily OI Round 3」Pigeon
## 题目背景

> 最近，忙吗，也不说打个电话。哦，是吗，嘿嘿原来没给过你号码。但这，不是，你不找我的理由，下次罚你陪我等到太阳出头。——recollect_i 的博客
## 题目描述

recollect_i 给了你长度为 $n$ 的序列 $x$，你需要求出一个实数 $y$ 使得对于所有 $1\leq i<j\leq n$，$\vert x_j-y\vert>\vert x_i-y\vert$，或报告无解。
## 输入格式

第一行一个整数 $n$，表示序列长度。

第二行 $n$ 个整数 $x$，表示序列。
## 输出格式

如果有解，第一行输出字符串 `lovely`，第二行输出一个实数 $y$。

为了避免精度问题，如果您输出的方案满足对于所有 $ 1\leq i<j\leq n$，$\vert x_j-y\vert-\vert x_i-y\vert>10^{-6}$，则认为您的答案正确。

同时您需要保证 $-2\times 10^9\leq y\leq 2\times 10^9$，且 $y$ 的小数点后不超过 $10$ 位，否则无法保证评测的正确性。

如果无解，一行输出字符串 `pigeon`。
## 样例

### 样例输入 #1
```
5
1 2 3 4 5
```
### 样例输出 #1
```
lovely
-114514
```
### 样例输入 #2
```
5
3 2 1 6 7
```
### 样例输出 #2
```
lovely
3.1416
```
### 样例输入 #3
```
5
3 2 1 4 5
```
### 样例输出 #3
```
pigeon
```
## 提示

#### 【提示】

输出格式中 $>10^{-6}$ 只是为了避免精度问题，您可以当成要求 $\vert x_j-y\vert>\vert x_i-y\vert$。

可以证明，如果有解，则一定存在 $y$ 满足 $-2\times 10^{9}\leq y\leq2\times 10^{9}$ 且对于所有 $1\leq i<j\leq n$，$\vert x_j-y\vert-\vert x_i-y\vert>0.2$，且小数点后位数不超过 $3$。

#### 【数据范围】

对于全部数据保证：$5\leq n\leq10^5$，$-10^9\leq x_i\leq10^9$。


---

---
title: "[GESP样题 八级] 区间"
layout: "post"
diff: 普及/提高-
pid: P10288
tag: ['GESP']
---
# [GESP样题 八级] 区间
## 题目背景

小杨有一个长度为 $n$ 的正整数序列 $A$。
## 题目描述

小杨有一个长度为 $n$ 的正整数序列 $A$。

小杨有 $q$ 次询问。第 $i$ 次（$1\le i\le q$）询问时，小杨会给出 $l_i,r_i,x_i$，请你求出 $x_i$ 在 $A_{l_i}, A_{l_i+1}, \dots A_{r_i}$ 中出现的次数。
## 输入格式

第一行包含一个正整数 $T$，表示数据组数。

对于每组数据：第一行包含一个正整数 $n$，表示序列 $A$ 的长度。  
第二行包含 $n$ 个正整数 $A_1,A_2,\dots,A_n$，表示序列 $A$。  
第三行包含一个正整数 $q$，表示询问次数。接下来 $q$ 行，每行三个正整数 $l_i,r_i,x_i$，表示一组询问。
## 输出格式

对于每组数据，输出 $q$ 行。第 $i$ 行（$1\le i\le q$）输出一个非负整数，表示第 $i$ 次询问的答案。

## 样例

### 样例输入 #1
```
2
5
7 4 6 1 1
2
1 2 3
1 5 1
5
1 2 3 4 5
2
5 5 3
1 4 3
```
### 样例输出 #1
```
0
2
0
1
```
## 提示

|子任务|分值|$n$|$q$|$\max A_i$|
|-|-|-|-|-|
|$1$|$30$|$\le 100$|$\le 100$|$\le 10$|
|$2$|$30$|$\le 10^5$|$\le 10^5$|$\le 10^5$|
|$3$|$40$|$\le 10^5$|$\le 10^5$|$\le 10^9$|

对于全部数据，保证有 $1 \leq T\le 5$，$1 \le n,q\le 10^5$，$1 \le A_i\le 10^9$。


---

---
title: "[SHUPC 2024] 为美好的世界献上爆焰！"
layout: "post"
diff: 普及/提高-
pid: P10316
tag: ['2024', '高校校赛']
---
# [SHUPC 2024] 为美好的世界献上爆焰！
## 题目背景

小 A 目前正在带着小 B 进行攻打魔王城的每日一爆演练。
## 题目描述

具体来说，魔王城的结界护盾共有 $x$ 的血量，小A想在 $n$ 天内完成对魔王城护盾的破坏。每天小 B 的魔力值会恢复至 $m$ ，且魔力值的上限为 $M$ ，使用爆裂魔法时每 $1$ 点魔力值可以对魔王城护盾造成 $1$ 点伤害。当然，爆裂魔法每天只能使用一次。

为了确保小 B 可以造成充足的伤害，小 A 每天可以花钱去商店购买魔晶石为小 B 增加魔力值。但是商店每天出售的魔晶石的数量、价格、和魔力值都有所不同。且当天出售的**魔晶石只能当天使用**，不然会过期，无法补充魔力。小A现在想知道，如果要小 B 能够顺利爆破魔王城的护盾，最少需要花费多少钱？（如果无法完成破坏，则输出 `-1`）

**注意**：由于小 B 的魔力值具有上限，因此当魔晶石魔力含量 $h$ 加上小 B 当前魔力值 $m$ 大于等于 $M$ 时，使用该魔晶石只能使小 B 的魔力值变为 $M$ ，也就是说 $ m'=\min(M,m+h)$ 。
## 输入格式

第一行输入四个正整数，$n,x,M,m$ （$1 \le n,x,M \le 5000,m \le M$）。

接下来会有 $n$ 组数据，每组数据有三行。

第一行代表第 $i$ 天出售的魔晶石数量 $\text{num}_i\ (1 \le \text{num} \le 5000)$ ，数据保证 $\sum_{i=1}^{n}\text{num}_i\le 5000$。

第二行共 $\text{num}_i$ 个正整数，代表第 $i$ 天出售的第 $j$ 个魔晶石的价格 $p_{i,j}\ (1\le p_{i,j} \le 10^9)$ 。

第三行共 $\text{num}_i$ 个正整数，代表第 $i$ 天出售的第 $j$ 个魔晶石的魔力值 $h_{i,j}\ (1 \le h_{i,j} \le M)$ ，数据保证 $\sum_{i=1}^{n}\sum_{j=1}^{\text{num}_i}h_{i,j}\le 5000$。
## 输出格式

输出一个整数，代表所求的答案。
## 样例

### 样例输入 #1
```
2 17 10 6
3
1 1 2
2 1 7
2
1 2
3 4
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2 20 10 8
3
10 2 3
8 2 1
1
1
1
```
### 样例输出 #2
```
-1
```
### 样例输入 #3
```
2 17 10 9
3
1 1 2
2 2 7
2
1 2
3 4
```
### 样例输出 #3
```
0
```
## 提示

样例解释：

样例 1 中，可以选择购买第一天的第一个魔晶石，花费为 $1$，当天总魔力值为 $8$。再购买第二天的第一个魔晶石，花费为 $1$，当天总魔力值为 $9$。这样两天总共可以造成 $17$ 点伤害，成功破坏结界，且花费最少为 $2$。

样例 2 中，因为存在魔力值上限，因此第一天最多造成 $10$ 点伤害，而第二天最多造成 $9$ 点伤害，因此无法破坏结界。


---

---
title: "[PA 2024] Mrówki"
layout: "post"
diff: 普及/提高-
pid: P10349
tag: ['2024', 'PA（波兰）']
---
# [PA 2024] Mrówki
## 题目描述

**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda próbna [Mrówki](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/mro/)**

数轴上有 $n$ 只蚂蚁，第 $i$ 只位于点 $x=i$。每只蚂蚁面向右（数轴的正方向）或者向左（数轴正方向的反方向）。蚂蚁小到我们可以认为他们是独立的点。

信号发出后，所有蚂蚁开始以相同的单位速度朝它们面向的方向前进。如果两只蚂蚁相撞（位于同一点），它们就会弹开，也就是说，它们都会改变行进方向，继续前进。可以证明，经过一定时间后，不会再发生碰撞。你能编写一个程序，计算出每只蚂蚁会与其他蚂蚁碰撞多少次吗？
## 输入格式

第一行一个整数 $n\ (1\le n\le 300\,000)$，表示蚂蚁的数量。

第二行包含一个长为 $n$ 的字符串，字符串仅包含 `L` 和 `P`。其中第 $i$ 个字符表示蚂蚁 $i$ 面向的方向，如果为 `L`，则初始面向左，如果为 `P`，则初始面向右。
## 输出格式

输出一行 $n$ 个整数，第 $i$ 个整数表示第 $i$ 只蚂蚁与其他蚂蚁的碰撞次数。
## 样例

### 样例输入 #1
```
6
LPPLPL

```
### 样例输出 #1
```
0 1 3 3 2 1

```
## 提示

第一只蚂蚁一开始面向左，不会与其他蚂蚁碰撞。最后一只蚂蚁会在 $x=5.5$ 处与第五只蚂蚁相撞，然后开始向右行进，并且再也不会停下来。第三只蚂蚁在 $x=3.5$ 处与第四只蚂蚁碰撞后，开始向左行走。第二只蚂蚁会在 $x=3$ 处碰撞，然后向左转，之后一直走下去。


---

---
title: "[PA 2024] Obrazy"
layout: "post"
diff: 普及/提高-
pid: P10358
tag: ['2024', 'PA（波兰）']
---
# [PA 2024] Obrazy
## 题目背景

PA 2024 3C
## 题目描述

**题目译自 [PA 2024](https://sio2.mimuw.edu.pl/c/pa-2024-1/dashboard/) Runda 3 [Obrazy](https://sio2.mimuw.edu.pl/c/pa-2024-1/p/obr/)，感谢 Macaronlin 提供翻译**

给定尺寸为 $h\times w$ 的矩形墙面，以及 $n$ 种尺寸的正方形画框，每种尺寸画框都有无穷多个。对于任意两种不同尺寸的画框，其中一个尺寸的边长总能整除另一个尺寸的边长。

现用这些画框完全覆盖墙面，而且画框之间不能重叠，只能边缘相接，请求出最少需要购买多少个画框？如果不可能完全覆盖墙面，则程序应输出 $-1$。
## 输入格式

第一行两个整数 $h$ 和 $w\ (1\le h,w\le 10^9)$，表示墙面大小。

第二行一个整数 $n\ (1\le n\le 30)$，表示画框个数。

第三行 $n$ 个整数 $d_1,d_2,\ldots,d_n\ (1\le d_i\le 10^9,d_i<d_{i+1})$，表示每个正方形画框的大小，保证 $d_{i+1}$ 能被 $d_i$ 整除。
## 输出格式

输出一行一个整数，如果可以完全覆盖墙面，输出最少要购买多少画框，否则输出 $-1$。
## 样例

### 样例输入 #1
```
6 10
3
1 3 6

```
### 样例输出 #1
```
9

```
### 样例输入 #2
```
3 3
1
2

```
### 样例输出 #2
```
-1
```
## 提示

在第一个样例中，Byteasar 可以用九个画框（六个 $1\times 1$、两个 $3\times 3$ 和一个 $6\times 6$）覆盖一面墙，具体如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/t6g3zuws.png)

在第二个样例中，无法完全覆盖墙面。


---

---
title: "「LAOI-4」Colors"
layout: "post"
diff: 普及/提高-
pid: P10368
tag: ['O2优化', '洛谷比赛']
---
# 「LAOI-4」Colors
## 题目背景

做这个题：

![](https://cdn.luogu.com.cn/upload/image_hosting/6053fe2y.png)
## 题目描述

给定长度为 $n$ 的字符串 $A$。  
- 若 $A_{i-1}=A_{i+1}$，则称 $A_i$ 为 「可消除的」。

定义一次操作为：消除 $A$ 中所有「可消除的」字符。

请你输出操作 $k$ 次后的 $A$。
## 输入格式

第一行一个正整数 $T,id$，表示数据组数和子任务编号。

对于每组数据，第一行一个正整数 $n$ 和一个整数 $k$。

接下来一行是一个长为 $n$ 的字符串。

## 输出格式

对于每组数据，输出一行一个字符串表示答案。
## 样例

### 样例输入 #1
```
3 0
3 1
aba
5 2
acaca
3 0
abc
```
### 样例输出 #1
```
aa
aa
abc
```
## 提示

样例解释：

- 对于第 $1$ 组数据，字符串为 $\text{aba}$，一次操作后为 $\text{aa}$。
- 对于第 $2$ 组数据，字符串为 $\text{acaca}$，一次操作后为 $\text{aa}$，两次操作后为 $\text{aa}$。
- 对于第 $3$ 组数据，字符串为 $\text{abc}$，零次操作后为 $\text{abc}$。

**「本题采用捆绑测试」**

| $\text{Subtask}$ | $\sum n \le$|  特殊性质 | 子任务依赖| 总分值 |
| :--------------: | :-----: |:-----:|:--: | :--------: |
|       $1$        |  $10^6$ |    $\text{A}$    |无| $5$ |
$2$        | $300$  | $k\le 300$ |无| $10$ |
$3$        | $10^3$  | 无| $2$| $15$ |
|       $4$        | $10^6$  | $\text{B}$ |无| $10$ |
|       $5$        | $10^6$ | $\text{C}$ |$4$| $20$ |
|       $6$        | $10^7$ |     无     |$1\sim5 $| $40$ |


对于 $100\%$ 的数据，$1  \le \sum n \le 10^7$，$1 \le  T \le 10^5$，$0\le k\le 10^{18}$，字符串均由小写字母组成。

特殊性质 $\text{A}$：$A$ 是一个 $\text{a}\sim\text{z}$ 的排列。

特殊性质 $\text{B}$：$\forall i\in[1,n-2], A_i= A_{i+2}$。

特殊性质 $\text{C}$：保证 $A_i$ 只可能有两种取值。



---

---
title: "[蓝桥杯 2023 国 A] XYZ"
layout: "post"
diff: 普及/提高-
pid: P10416
tag: ['2023', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 A] XYZ
## 题目描述

给定一个区间 $[L,R]$，请求出有多少组 $X,Y,Z$ 满足 $X+Y=Z$ 且 $L\le X,Y,Z\le R$。
## 输入格式

本题包含多组询问。

输入的第一行包含一个整数 $T$ 表示询问组数。

接下来 $T$ 行，每行包含两个整数 $L_i,R_i$，用一个空格分隔，表示一组询问。
## 输出格式

输出 $T$ 行，每行包含一个整数，表示满足条件的 $X,Y,Z$ 的组数。
## 样例

### 样例输入 #1
```
2
1 3
1 4
```
### 样例输出 #1
```
3
6

```
## 提示

**【样例解释 1】**

$1+1=2$  
$1+2=3$  
$2+1=3$  
$1+3=4$  
$2+2=4$  
$3+1=4$

**【评测用例规模与约定】**

对于 $30\%$ 的评测用例，$T\le 1000$，$L_i,R_i\le 100$。  
对于所有评测用例，$1\le T\le 100000$，$1\le L_i\le R_i\le 10^9$。


---

---
title: "[蓝桥杯 2024 省 B] R 格式"
layout: "post"
diff: 普及/提高-
pid: P10425
tag: ['2024', '蓝桥杯省赛']
---
# [蓝桥杯 2024 省 B] R 格式
## 题目描述

小蓝最近在研究一种浮点数的表示方法：$R$ 格式。对于一个大于 $0$ 的浮点数 $d$，可以用 $R$ 格式的整数来表示。给定一个转换参数 $n$，将浮点数转换为 $R$ 格式整数的做法是：
1. 将浮点数乘以 $2^n$。
2. 四舍五入到最接近的整数。
## 输入格式

一行一个整数 $n$ 和一个浮点数 $d$。
## 输出格式

一行一个整数表示 $d$ 用 $R$ 格式表示出的值。
## 样例

### 样例输入 #1
```
2 3.14
```
### 样例输出 #1
```
13
```
## 提示

### 样例 1 解释

$3.14 \times 2^2 = 12.56$，四舍五入后为 $13$。

### 数据规模与约定

用 $t$ 表示将 $d$ 视为字符串时的长度。

- 对于 $50\%$ 的数据，保证 $n \le 10$，$t \le 15$。
- 对于全部的测试数据，保证 $1 \le n \le 1000$，$1 \le t \le 1024$，保证 $d$ 是小数，即包含小数点。


---

---
title: "[蓝桥杯 2024 省 B] 宝石组合"
layout: "post"
diff: 普及/提高-
pid: P10426
tag: ['2024', '蓝桥杯省赛']
---
# [蓝桥杯 2024 省 B] 宝石组合
## 题目描述


在一个神秘的森林里，住着一个小精灵名叫小蓝。有一天，他偶然发现了一个隐藏在树洞里的宝藏，里面装满了闪烁着美丽光芒的宝石。这些宝石都有着不同的颜色和形状，但最引人注目的是它们各自独特的 “闪亮度” 属性。每颗宝石都有一个与生俱来的特殊能力，可以发出不同强度的闪光。小蓝共找到了 $n$ 枚宝石，第 $i$ 枚宝石的 “闪亮度” 属性值为 $H_i$，小蓝将会从这 $n$ 枚宝石中选出三枚进行组合，组合之后的精美程度 $S$ 可以用以下公式来衡量：

$$
S = H_a H_b H_c \cdot \frac{\operatorname{LCM}(H_a, H_b, H_c)}{\operatorname{LCM}(H_a, H_b) \cdot\operatorname{LCM}(H_a, H_c) \operatorname{LCM}(H_b, H_c)}
$$

其中 $\operatorname{LCM}$ 表示的是最小公倍数函数。

小蓝想要使得三枚宝石组合后的精美程度 $S$ 尽可能的高，请你帮他找出精美程度最高的方案。如果存在多个方案 $S$ 值相同，优先选择按照 $H$ 值升序排列后字典序最小的方案。

## 输入格式


第一行一个整数 $n$ 表示宝石个数。  
第二行有 $n$ 个整数 $H_1, H_2, \dots H_n$ 表示每个宝石的闪亮度。

## 输出格式


输出一行包含三个整数表示满足条件的三枚宝石的 “闪亮度”。
## 样例

### 样例输入 #1
```
5
1 2 3 4 9

```
### 样例输出 #1
```
1 2 3
```
## 提示

### 数据规模与约定

- 对 $30\%$ 的数据，$n \leq 100$，$H_i \leq 10^3$。
- 对 $60\%$ 的数据，$n \leq 2 \times 10^3$。
- 对全部的测试数据，保证 $3 \leq n \leq 10^5$，$1 \leq H_i \leq 10^5$。


---

---
title: "[XJTUPC 2024] 雪中楼"
layout: "post"
diff: 普及/提高-
pid: P10522
tag: ['2024', 'O2优化', '高校校赛']
---
# [XJTUPC 2024] 雪中楼
## 题目描述

西安交通大学下雪了，所有楼顶都被积雪覆盖。

在梧桐道上有 $n$ 座房子，自南向北第 $i$ 座房子的标号是 $i$，所有房子的高度互不相同。LNC 从南向北，依次登上每栋楼楼顶，然后他会回头观察他已经到达过的房子，并记录下这些房子中，比当前他所在房子矮的所有房子中，最高的房子的编号，记为 $a_i$。特殊的，当没有房子比当前房子矮的时候，$a_i=0$。

现在给你所有的 $a_i$，要求你还原出所有楼的大小关系。由于高度的具体值未知，你只需要按照高度从低到高，输出房子编号。

可以证明对于任何合法的输入，均存在唯一解。
## 输入格式

输入第一行一个正整数 $n$ ($1\le n \le 2\times 10^5$)，代表房子个数。

接下来一行 $n$ 个非负整数 $a_i$，满足 $0\le a_i <i$，两两之间用空格隔开。
## 输出格式

输出一行 $n$ 个正整数构成的排列，用空格隔开，表示最终的答案。
## 样例

### 样例输入 #1
```
5
0 0 0 0 2

```
### 样例输出 #1
```
4 3 2 5 1 

```
## 提示

假设高度是一个 $1\sim n$ 的排列，那么可以发现高度为 $5, 3, 2, 1, 4$ 是唯一的解，按照高度排名输出得到 $4, 3, 2, 5, 1$。



---

---
title: "[XJTUPC 2024] 生命游戏"
layout: "post"
diff: 普及/提高-
pid: P10530
tag: ['2024', 'O2优化', '高校校赛']
---
# [XJTUPC 2024] 生命游戏
## 题目背景

在著名的生命游戏中，二维方格中每个细胞死或活的状态由它周围的八个细胞（上、下、左、右、左上、左下、右上、右下）所决定。

具体规则如下：

孤单死亡：如果细胞的邻居小于等于 1 个，则该细胞在下一次状态将死亡；

拥挤死亡：如果细胞的邻居在 4 个及以上，则该细胞在下一次状态将死亡；

稳定：如果细胞的邻居为 2 个或 3 个，则下一次状态为稳定存活；

复活：如果某位置原无细胞存活，而该位置的邻居为 3 个，则该位置将复活一个细胞。

在此规则下也出现了很多有趣的图形，比如说下图就是"轻量级飞船"连续的五个回合的情况：它的周期是 4，每 2 个回合会向右边走一格。

![](https://cdn.luogu.com.cn/upload/image_hosting/28o5txyh.png)
## 题目描述

现在我们将在树上进行简化版的生命游戏，首先将给出一棵含有 $n$ 个点，$n-1$ 条边的树和一个整数 $k$。

在每回合时，当前剩余的度数为 $k$ 的点及与其连接的边会瞬间同时被删去。

形式化的，每回合都将按顺序进行如下操作：

   -  统计当前剩余每个点的度数（一个点的度数定义为为，这个点当前连接的边的条数）。
   - 将所有度数**恰好**为 $k$ 的点标记。
   - 将上一步标记的点及其连接的边全部删去。

我们希望知道在无穷多回合后，这棵树将被分为多少个连通块。若最终两个点能够直接或间接的通过若干条边相连，则认为这两个点属于同一个连通块。
## 输入格式

第一行两个整数 $n,k$ ($0\le k < n \le 10^6$)，用空格隔开。

接下来 $n-1$ 行，每行两个用空格隔开的正整数 $u_i,v_i$ ($1\le u_i, v_i \le n$) 表示 $u_i$ 和 $v_i$ 之间有一条边。

输入的数据量较大，建议使用快速的读入方式。
## 输出格式

共一行一个整数，表示无穷多回合之后剩余的连通块个数。

## 样例

### 样例输入 #1
```
3 1
1 2
2 3

```
### 样例输出 #1
```
1

```
### 样例输入 #2
```
4 2
1 2
2 3
3 4

```
### 样例输出 #2
```
2

```
### 样例输入 #3
```
10 3
1 2
2 3
9 4
3 5
5 6
6 7
3 9
5 8
5 10

```
### 样例输出 #3
```
5

```
## 提示


对于样例 1:

这棵树的初始形态为：

![](https://cdn.luogu.com.cn/upload/image_hosting/g5x6u2fx.png)

其中三个点的度数依次为 $1,2,1$。

在一回合过后，点 $1,3$ 被删除。

这棵树变为：

![](https://cdn.luogu.com.cn/upload/image_hosting/5x6vo3it.png)

容易发现之后这棵树的形态将不会变化，所以最终的连通块个数是 $1$。

对于样例 2：

初始形态为：

![](https://cdn.luogu.com.cn/upload/image_hosting/hdq30nrf.png)

一回合之后变为：

![](https://cdn.luogu.com.cn/upload/image_hosting/td8lj616.png)

之后保持不变，最终连通块个数为 $2$。

对于样例 3：

初始形态：

![](https://cdn.luogu.com.cn/upload/image_hosting/tfu21fc0.png)

一回合之后变为：

![](https://cdn.luogu.com.cn/upload/image_hosting/3ad1bwnz.png)

再过一回合之后变为：

![](https://cdn.luogu.com.cn/upload/image_hosting/2ax9h1tt.png)

之后保持不变，最终连通块个数为 $5$。


---

---
title: "[ICPC 2024 Xi'an I] Triangle"
layout: "post"
diff: 普及/提高-
pid: P10562
tag: ['2024', 'O2优化', 'ICPC']
---
# [ICPC 2024 Xi'an I] Triangle
## 题目描述

There are three points $A(a, 0)$, $B(0, b)$, $C(0, 0)$ in the plane rectangular coordinate system. Define the size of triangle $ABC$ as the number of squares that belong to it.
    
    
    
For integers $x,y$, one square is defined by four points $(x, y)$, $(x + 1, y)$, $(x, y + 1)$, $(x + 1, y + 1)$. We consider a square to belong to a triangle if half or more of it is inside the triangle.
    
    
    
For example, when $a = 8, b = 6$, the size of triangle $ABC$ will be $24$. The image below shows which squares are counted in the triangle.

![](https://cdn.luogu.com.cn/upload/image_hosting/3fnqi74y.png)
## 输入格式


    
The first and only line contains two integers $a\ (1\le a\le 10^6)$ and $b\ (1\le b\le 10^6)$.
## 输出格式


Print an integer: the size of triangle $ABC$.
    
## 样例

### 样例输入 #1
```
6 8
```
### 样例输出 #1
```
24
```
### 样例输入 #2
```
5 5

```
### 样例输出 #2
```
15
```
### 样例输入 #3
```
1 999999
```
### 样例输出 #3
```
500000
```


---

---
title: "[JRKSJ R8] 三七二十一"
layout: "post"
diff: 普及/提高-
pid: P10571
tag: ['2024', '洛谷原创', 'O2优化', '洛谷月赛', 'Ad-hoc']
---
# [JRKSJ R8] 三七二十一
## 题目描述

给你一个由 $1\sim 9$ 的数字组成的数字串 $s$。定义一个数字串 $s$ 表示的数为将其看作十进制数得到的数。形式化地说，长为 $n$ 的数字串 $s$ 表示的数是 $\sum_{i=1}^n  10^{n-i}s_i$。

你可以对这个数字串执行若干次操作，每次操作中你可以选定一个位置 $1\le p\le n$ 并将 $s_p$ 修改为任意 $1\sim 9$ 中的数字。你需要使该数字串**不存在**任何一个非空子串满足这个子串表示的数字是 $2^k(k\in \N)$ 即 $2$ 的任意**非负整数**次幂，请你求出最少的操作次数。
## 输入格式

一行一个数字串 $s$。
## 输出格式

一行一个整数表示答案。
## 样例

### 样例输入 #1
```
2468
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
164
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
65535
```
### 样例输出 #3
```
0
```
## 提示

### 样例解释

对于样例 $1$，满足表示的数是 $2$ 的非负整数次幂的 $s$ 的非空子串有 $2,4,8$，将 $s$ 修改为 $5963$ 是最优解之一。

对于样例 $2$，满足表示的数是 $2$ 的非负整数次幂的 $s$ 的非空子串有 $1,4,16,64$，将 $s$ 修改为 $666$ 是最优解之一。


### 数据规模与约定
**本题采用捆绑测试。**

令 $n=|s|$。

| $\text{Subtask}$ | $n\le $ | 分值 |
| :----------: | :----------: | :----------: |
| $1$ | $4$ | $10$ |
| $2$ | $8$ | $10$ |
| $3$ | $17$ | $20$ |
| $4$ | $10^3$ | $20$ |
| $5$ | $10^6$ | $40$ |

对于 $100\%$ 的数据，$1\le n\le 10^6$，$s$ 由 $1\sim 9$ 的数字组成。


---

---
title: "[蓝桥杯 2024 国 A] 最长子段"
layout: "post"
diff: 普及/提高-
pid: P10579
tag: ['2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 A] 最长子段
## 题目描述

给定一个长度为 $n$ 的序列 $(s_1,s_2,\cdots,s_n)$ 和三个数 $a,b,c$，你需要找出一对 $L,R$ 满足如下式子：

$$
\sum\limits_{i=L}^Rs_i>a(bR-cL),1 \le L \le R \le n
$$

即，序列中的第 $L$ 至 $R$ 项之和大于 $a\cdot (b\cdot R - c \cdot L)$，求出满足条件的 $L,R$ 中 $R - L + 1$ 的最大值。

测试数据保证存在这样的一对 $L$ 和 $R$。
## 输入格式

输入的第一行包含四个整数 $n,a,b,c$，相邻整数之间使用一个空格分隔。

第二行包含 $n$ 个整数 $s_1,s_2,\cdots,s_n$，相邻整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
4 1 5 6
1 2 3 4
```
### 样例输出 #1
```
3
```
## 提示

对于 $60\%$ 的评测用例，$n\le 5000$；  
对于所有评测用例，$1\le n\le 3 \times 10^5$，$1\le a,b,c\le 1000$，$|s_i| \le 10^9$。


---

---
title: "Buy Tickets"
layout: "post"
diff: 普及/提高-
pid: P10688
tag: ['O2优化']
---
# Buy Tickets
## 题目描述

> Railway tickets were difficult to buy around the Lunar New Year in China, so we must get up early and join a long queue…

The Lunar New Year was approaching, but unluckily the Little Cat still had schedules going here and there. Now, he had to travel by train to Mianyang, Sichuan Province for the winter camp selection of the national team of Olympiad in Informatics.

It was one o’clock a.m. and dark outside. Chill wind from the northwest did not scare off the people in the queue. The cold night gave the Little Cat a shiver. Why not find a problem to think about? That was none the less better than freezing to death!

People kept jumping the queue. Since it was too dark around, such moves would not be discovered even by the people adjacent to the queue-jumpers. “If every person in the queue is assigned an integral value and all the information about those who have jumped the queue and where they stand after queue-jumping is given, can I find out the final order of people in the queue?” Thought the Little Cat.
## 输入格式

There will be several test cases in the input. Each test case consists of N + 1 lines where N (1 ≤ N ≤ 200,000) is given in the first line of the test case. The next N lines contain the pairs of values Posi and Vali in the increasing order of i (1 ≤ i ≤ N). For each i, the ranges and meanings of Posi and Vali are as follows:

- Posi ∈ [0, i − 1] — The i-th person came to the queue and stood right behind the Posi-th person in the queue. The booking office was considered the 0th person and the person at the front of the queue was considered the first person in the queue.
_ Vali ∈ [0, 32767] — The i-th person was assigned the value Vali.

There no blank lines between test cases. Proceed to the end of input.
## 输出格式

For each test cases, output a single line of space-separated integers which are the values of people in the order they stand in the queue.
## 样例

### 样例输入 #1
```
4
0 77
1 51
1 33
2 69
4 
0 20523
1 19243
1 38900
0 31492
```
### 样例输出 #1
```
77 33 69 51
31492 20523 38900 19243
```


---

---
title: "[SNCPC2024] 换座位"
layout: "post"
diff: 普及/提高-
pid: P10693
tag: ['2024', 'O2优化', '陕西', 'XCPC']
---
# [SNCPC2024] 换座位
## 题目描述

树王国在筹备着举办一次盛大的庆典！

Shirost 作为树王国的庆典设计师，准备邀请 $n$ 个嘉宾来参加本次庆典。庆典上一共准备了 $2n$ 个座位，**一个座位最多只能坐一个人且一个人恰好坐一个座位**。Shirost 初步计划将第 $i$ 个嘉宾安排在第 $i$ 个座位上。但是总统调查了这 $n$ 个嘉宾的意愿，第 $i$ 个嘉宾的心仪座位为第 $a_i$ 个座位。但除非能坐到心仪座位上，否则他们只愿意坐在原来的座位上。总统希望 Shirost 能够修改计划，使得尽可能多的嘉宾坐在他们的心仪座位上。

形式化的讲，你需要找到长为 $n$ 的数组 $b_i$ ($1 \leq i \leq n, 1 \leq b_i \leq 2n$) 满足 $\forall i \neq j,b_i \neq b_j$ 且 $\forall i, b_i=i$ 或 $b_i=a_i$。且最大化 $b_i = a_i$ 的个数。

你只需要输出最多的个数即可。
## 输入格式

输入第一行为一个整数 $n$ ($1 \leq n \leq 10^{5}$)，表示总人数。

第二行 $n$ 个整数 $a_i$ ($1 \leq a_i \leq 2n$)，由空格隔开，表示每个人的心仪座位。

## 输出格式

输出仅一行一个整数，表示最多有多少嘉宾坐在他们的心仪座位上。
## 样例

### 样例输入 #1
```
5
2 6 4 5 3

```
### 样例输出 #1
```
5

```
## 提示



对于第一个样例，所有人都可以换到自己的心仪座位。



---

---
title: "[SNCPC2024] 消失的数字"
layout: "post"
diff: 普及/提高-
pid: P10697
tag: ['2024', 'O2优化', '陕西', 'XCPC']
---
# [SNCPC2024] 消失的数字
## 题目描述

uuku 正在学习数位 DP！

但某一天，他发现 $1,2,\ldots,9$ 这九个数字中的 $x$ 消失了，也就是说所有包含 $x$ 这个数字的数都消失了。

这让他非常惊慌，因为这对统计数的个数有很大的影响。

现在，他希望你能帮助他求出这种情况下数 $n$ 在未消失的自然数中从小到大排在第几位。
## 输入格式

本题有多组测试数据，输入第一行为一个整数 $T$（$1 \leq T \leq 10^5$），表示测试数据的组数。

对于每组测试数据：

共一行两个整数 $n, x$ ($0 \leq n \leq 10^{18},1 \leq x \leq 9$)，由空格隔开，含义如题目描述所述。

数据保证 $n$ 中不包含数字 $x$。
## 输出格式

对于每组测试数据：输出一行一个整数，表示数 $n$ 的排名。

## 样例

### 样例输入 #1
```
5
9 4
99 7
12345678 9
9475632111234123 8
998244353114514 7

```
### 样例输出 #1
```
9
81
6053445
1758041005111510
205404686678741

```
## 提示



对于样例的第一组数据，自然数列变为 $0,1,2,3,5,6,7,8,9$, 其中数 $9$ 是第 $9$ 个。


---

---
title: "[SEERC 2020] Divisible by 3"
layout: "post"
diff: 普及/提高-
pid: P10740
tag: ['2020', 'ICPC']
---
# [SEERC 2020] Divisible by 3
## 题目描述

定义一个序列 $b$ 的权重为 $\sum_{i=1}^n \sum_{j=1}^{i-1} b_i \times b_j$。

现在你有一个长度为 $n$ 的数组 $a$，求一共存在多少种 $(l,r)$ 使得 $1 \leq l \leq r \leq n$ 且 $[a_l, a_{l+1},\ldots,a_r]$ 的权重能被 $3$ 整除。
## 输入格式

第一行一个整数 $n\ (1 \leq n \leq 5 \times 10^5)$。

然后 $n$ 个整数 $a_i\ (0 \leq a_i \leq 10^9)$。
## 输出格式

输出方案总数。
## 样例

### 样例输入 #1
```
3
5 23 2021

```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5
0 0 1 3 3
```
### 样例输出 #2
```
15
```
### 样例输入 #3
```
10
0 1 2 3 4 5 6 7 8 9
```
### 样例输出 #3
```
20
```
## 提示

对于第一个样例，存在 $[1,1]$、$[2,2]$、$[3,3]$、$[1,3]$ 共 $4$ 种方案。


---

---
title: "[SEERC 2020] Mistake"
layout: "post"
diff: 普及/提高-
pid: P10748
tag: ['2020', 'Special Judge', 'ICPC']
---
# [SEERC 2020] Mistake
## 题目描述

你有 $k$ 个机器，每个机器都**未按序**存储了 $1 \sim n$ 共 $n$ 个数，当你启动某个机器时，该机器会将其存储的数最前面的数打印出来，然后删除它。

但是很幸运，你知道 $m$ 对 $(a_i,b_i)$，表示每个存储的 $a_i$ 都在 $b_i$ 前面。

你还知道你依次启动的机器输出了哪些，请对于每个打印的数，确定一种方案表示它是由哪个机器启动得来，保证每个数出现的次数 $=n$。

存在多种可行解，输出任何都可以得分。
## 输入格式

第一行三个整数 $n,k,m\ (1 \leq n,k\leq 5 \times 10^5, 0 \leq m \leq 2.5 \times 10^5, 1 \leq n \times k \leq 5 \times 10^5)$。

然后 $m$ 行每行两个 $a_i,b_i\ (1 \leq a_i,b_i \leq n)$，保证不存在环。

然后一行 $n \times k$ 的数，表示依次启动的机器输出的序列。
## 输出格式

输出一种合法的启动方案。
## 样例

### 样例输入 #1
```
3 3 2
1 2
1 3
1 1 2 3 3 2 1 2 3
```
### 样例输出 #1
```
1 2 2 1 2 1 3 3 3
```


---

---
title: "[CEOI 2024] 玩具谜题"
layout: "post"
diff: 普及/提高-
pid: P10804
tag: ['2024', 'CEOI（中欧）']
---
# [CEOI 2024] 玩具谜题
## 题目描述

**题目译自 [CEOI 2024](https://ceoi2024.fi.muni.cz/) Day2 T1「[Toy](https://ceoi2024.fi.muni.cz/page/tasks/statements/toy.pdf)」**

CEOI 2024 的命题人 Ben 从科学委员会收到了一份礼物——一个玩具。这个玩具是个谜题，可以想象成一个 $H$ 行 $W$ 列的网格，上面放着一个金属物体。这个金属物体由两部分组成：一个横向的 $1$ 行 $K$ 列的部分和一个纵向的 $L$ 行 $1$ 列的部分，这两部分松散地连接在一起。它们都不能旋转，但可以在网格内水平或垂直滑动，只要它们始终重叠在一个方格上。

网格里还有一些障碍物。金属物体的任何部分都不能穿过障碍物，更糟糕的是，它们也不能（即使部分）移出网格。Ben 的任务是将金属物体从指定起始位置移动到（可能不同的）目标位置，使得两部分重叠在指定的目标方格上。

然而，Ben 玩这个玩具已经有一段时间了，还没有解开谜题。事实上，他开始怀疑组织者在捉弄他，给了他一个无解的谜题。因此，他向你求助，想知道这个谜题是否有解。
## 输入格式

输入的第一行包含四个空格分隔的整数 $W, H, K, L$，分别表示谜题的宽度、高度、横向部分的宽度和纵向部分的高度。第二行包含四个整数 $x_h, y_h, x_v, y_v$，表示横向部分最左上角方格的坐标和纵向部分最左上角方格的坐标。

行从上到下编号为 $0$ 到 $H-1$，列从左到右编号为 $0$ 到 $W-1$。$x$ 坐标表示列号，$y$ 坐标表示行号。

接下来的 $H$ 行每行包含 $W$ 个字符，表示网格。字符 `.` 表示空方格，字符 `X` 表示障碍物，字符 `*` 表示目标方格。

保证金属物体的初始位置合法，即两部分重叠在一个方格上，并且两部分不与障碍物重叠也不超出网格。

只有一个目标方格，即玩具中只有一个字符 `*`，它可能与金属物体的初始位置重叠。
## 输出格式

如果可以将金属物体移动到目标方格，则输出一行 `YES`，否则输出 `NO`。
## 样例

### 样例输入 #1
```
4 3 2 2
0 1 0 0
.X.*
....
...X
```
### 样例输出 #1
```
YES
```
### 样例输入 #2
```
2 3 2 3
0 1 0 0
.X
.*
.X
```
### 样例输出 #2
```
NO
```
## 提示

**样例解释 1**

初始状态如下：

![toy-sample1-v3.svg](https://img.loj.ac.cn/2024/07/15/154b44c9149f4.svg)

我们可以先将纵向部分向下移动一格，然后尽可能地交替移动横向和纵向部分，直到无法继续。接着，我们可以将纵向部分向上并向右移动，到达目标方格，最后将横向部分向上移动，也到达目标方格。

**样例解释 2**

无法移动纵向部分而不碰到障碍物，因此永远无法到达目标方格。

对于所有输入数据，满足：

- $2 \leq W, H \leq 1\,500$
- $2 \leq K \leq W, 2 \leq L \leq H$
- $0 \leq x_h \leq W - K, 0 \leq y_h \leq H - 1$
- $0 \leq x_v \leq W - 1, 0 \leq y_v \leq H - L$

详细子任务附加限制及分值如下表所示。

| 子任务 | 附加限制 | 分值 |
| :--: | :--: | :--: |
|  $1$  | $W, H \le 50$ | $14$  |
|  $2$  | $W, H \le 90$| $21$ |
|  $3$  | $W, H \le 300, K, L \le 10$ | $9$ |
|  $4$  | $W, H \le 360$ | $29$ |
|  $5$  | 无附加限制| $27$ |



---

---
title: "【MX-S2-T1】 变"
layout: "post"
diff: 普及/提高-
pid: P10810
tag: ['O2优化', '梦熊比赛']
---
# 【MX-S2-T1】 变
## 题目背景

原题链接：<https://oier.team/problems/S2A>。
## 题目描述

已知一个仅由小写英文字母构成的字符串 $s$。

每次操作时，你可以任意选择 $s$ 中的一个字符，并将它修改为任意小写英文字母。

你可以按任意顺序对其进行不超过 $k$ 次操作，以最小化 $s$ 的**严格循环节**的长度。当然，不进行操作也是可以的。

请输出在进行完所有操作后，最小的可能的 $s$ 的严格循环节的长度。

> 一个字符串 $t$ 被称为 $s$ 的严格循环节，当且仅当 $s$ 可以通过将 $t$ 重复若干次来构造。
> 
> 例如：`mai` 是 `maimai` 的严格循环节，`dx` 是 `dx` 的严格循环节。但 `ov` 不是 `ovo` 的严格循环节。

## 输入格式

第一行一个非负整数 $k$。

第二行一个字符串 $s$，仅包含小写英文字母。

## 输出格式

一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
1
test

```
### 样例输出 #1
```
4

```
### 样例输入 #2
```
3
test

```
### 样例输出 #2
```
1

```
### 样例输入 #3
```
3
apollo

```
### 样例输出 #3
```
3

```
## 提示

**【样例解释 \#1】**

可以证明：最多进行一次操作的情况下，严格循环节长度至少为 $4$。

**【样例解释 \#2】**

可以通过 $3$ 次操作，将 `test` 修改为 `ssss`，严格循环节长度为 $1$。

**【数据范围】**

**本题采用捆绑测试。**

- Subtask 0（17 pts）：$k = 0$，$|s| \leq 6$。
- Subtask 1（14 pts）：$k = 1$，$|s| \leq 20$。
- Subtask 2（16 pts）：$k = 1$，$|s| \leq 500$。
- Subtask 3（32 pts）：$k < |s| \leq 10^5$。
- Subtask 4（21 pts）： 无特殊限制。

对于所有测试数据，保证 $0 \leq k < |s| \leq 10^6$，$s$ 中仅包含小写英文字母。

**2024.7.28：新增了一组 Hack 数据。**


---

---
title: "【MX-S3-T1】「FeOI Round 1」野心"
layout: "post"
diff: 普及/提高-
pid: P10885
tag: ['梦熊比赛']
---
# 【MX-S3-T1】「FeOI Round 1」野心
## 题目背景

原题链接：<https://oier.team/problems/S3A>。

---

![](bilibili:BV1eZ4y1w7n1)
## 题目描述

给出一个 $1 \sim n$ 的排列 $p$，询问存在多少个数 $i$（$1 \le i <n$）满足 $[p_1,p_2,\cdots,p_i]$ 和 $[p_{i+1},p_{i+2},\cdots,p_n]$ 排序后都是等差数列。
## 输入格式

**本题单个测试点内包含多组数据。**

第一行一个整数 $T$ 表示数据组数。

接下来，对于每组数据，格式如下：

第一行一个数 $n$ 表示排列长度。

接下来一行 $n$ 个数表示排列 $p$。
## 输出格式

对于每组测试数据，输出一行一个数表示询问的答案。
## 样例

### 样例输入 #1
```
2
4
1 3 2 4
5
1 5 3 2 4
```
### 样例输出 #1
```
3
3
```
### 样例输入 #2
```
4
6
2 1 4 3 6 5
6
1 2 3 4 5 6
3
1 3 2
1
1
```
### 样例输出 #2
```
2
5
2
0
```
### 样例输入 #3
```
6
2
1 2
20
16 2 10 18 4 6 8 20 14 12 3 9 17 13 1 15 7 11 19 5
9
3 4 1 5 2 6 7 8 9
10
1 3 2 4 7 6 5 8 10 9
13
5 7 3 11 1 9 13 6 10 4 2 8 12
5
1 2 3 4 5
```
### 样例输出 #3
```
1
1
4
5
1
4
```
## 提示

**【样例解释 #1】**

第一组：三种拆分为 $[1,3,2][4]$，$[1,3][2,4]$，$[1][3,2,4]$。

第二组：三种拆分为 $[1][5,3,2,4]$，$[1,5][3,2,4]$，$[1,5,3][2,4]$。

**【样例解释 #2】**

第一组：两种拆分为 $[2,1][4,3,6,5]$，$[2,1,4,3][6,5]$。

第二组：每种拆分都是合法的。

第三组：每种拆分都是合法的。

第四组：不存在拆分方案，故没有方案合法。

**【数据范围】**

**本题开启捆绑测试。**

设 $\sum n$ 为单个测试点内所有的 $n$ 之和。

对于 $100\%$ 的数据，$1 \le T \le 10^5$，$1 \le n \le 10^6$，$1 \le \sum n \le 2 \times 10^6$，保证 $p$ 是排列且 $1 \le p_i \le n$。

| 子任务编号 | $n $ | $\sum n $ | 分数 |
| :-: | :-: | :-: | :-: |
| $1$ | $\le 10^3$ | $\le 5\times 10^3$ | $30$ |
| $2$ | $\le 10^5$ | $\le 5\times 10^5$ | $30$ |
| $3$ | $\le 10^6$ | $\le 2\times 10^6$ | $40$ |

**请使用较快的输入输出方式。**

**新增子任务 4 为 hack 数据，分值为 $\boldsymbol{0}$。**


---

---
title: "[蓝桥杯 2024 国 B] 立定跳远"
layout: "post"
diff: 普及/提高-
pid: P10909
tag: ['2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 B] 立定跳远
## 题目描述

在运动会上，小明从数轴的原点开始向正方向立定跳远。项目设置了 $n$ 个检查点 $a_1, a_2, \cdots , a_n$ 且 $a_i \ge a_{i−1} > 0$。小明必须先后跳跃到每个检查点上且只能跳跃到检查点上。同时，小明可以自行再增加 $m$ 个检查点让自己跳得更轻松。

在运动会前，小明制定训练计划让自己单次跳跃的最远距离达到 $L$，并且学会一个爆发技能可以在运动会时使用一次，使用时可以在该次跳跃时的最远距离变为 $2L$。小明想知道，$L$ 的最小值是多少可以完成这个项目？
## 输入格式

输入共 $2$ 行。

第一行为两个正整数 $n,m$。

第二行为 $n$ 个由空格分开的正整数 $a_1, a_2, \cdots, a_n$。
## 输出格式

输出共 $1$ 行，一个整数表示答案。
## 样例

### 样例输入 #1
```
5 3
1 3 5 16 21
```
### 样例输出 #1
```
3
```
## 提示

**【样例说明】**

增加检查点 $10, 13, 19$，因此每次跳跃距离为 $1,2, 2, 5, 3, 3, 3, 2$，在第三次跳跃时使用技能即可。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，保证 $n \le 10^2$，$m \le 10^3$，$a_i \le 10^3$。  
对于 $100\%$ 的评测用例，保证 $2 \le n \le 10^5$，$m \le 10^8$，$0 < a_i \le 10^8$。


---

---
title: "[蓝桥杯 2024 国 B] 数星星"
layout: "post"
diff: 普及/提高-
pid: P10912
tag: ['2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 B] 数星星
## 题目描述

小明正在一棵树上数星星，这棵树有 $n$ 个结点 $1, 2,\cdots, n$。他定义树上的一个子图 $G$ 是一颗星星，当且仅当 $G$ 同时满足：

1. $G$ 是一棵树。
2. $G$ 中存在某个结点，其度数为 $|V_G| - 1$。其中 $|V_G|$ 表示这个子图含有的结点数。

两颗星星不相同当且仅当它们包含的结点集合 $V_G$ 不完全相同。小明想知道这棵树上有多少颗不同的星星包含的结点的数量在区间 $[L, R]$ 中，答案对 $1000000007$ 取模。
## 输入格式

输入共 $n + 1$ 行。

第一行为一个正整数 $n$。

后面 $n - 1$ 行，每行两个正整数表示树上的一条边。

第 $n + 1$ 行，两个正整数 $L, R$。
## 输出格式

输出共 $1$ 行，一个整数表示答案。
## 样例

### 样例输入 #1
```
6
1 2
1 3
2 4
2 5
3 6
3 4
```
### 样例输出 #1
```
6
```
## 提示

**【样例说明】**

包含 $3$ 个结点的星星有 $5$ 个，它们的结点集合分别为 $\{1, 2, 3\}$，$\{1, 2, 4\}$，$\{1, 2, 5\}$，$\{2, 4, 5\}$，$\{1, 3, 6\}$。

包含 $4$ 个结点的星星有 $1$ 个，它的结点集合为 $\{1, 2, 4, 5\}$。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，保证 $n \le 20$。  
对于 $100\%$ 的评测用例，保证 $n \le 10^5$，$1 \le L \le R \le n$。



---

---
title: "[蓝桥杯 2024 国 B] 跳石头"
layout: "post"
diff: 普及/提高-
pid: P10914
tag: ['2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 B] 跳石头
## 题目描述

小明正在和朋友们玩跳石头的小游戏，一共有 $n$ 块石头按 $1$ 到 $n$ 顺序排成一排，第 $i$ 块石头上写有正整数权值 $c_i$。

如果某一时刻小明在第 $j$ 块石头，那么他可以选择跳向第 $j + c_j$ 块石头（前提 $j + c_j \le n$）或者跳向第 $2j$ 块石头（前提 $2j \le n$），没有可跳跃的目标时游戏结束。

假如小明选择从第 $x$ 块石头开始跳跃，如果某块石头**有可能**被小明经过（“经过” 指存在某一时刻小明在这个石头处），则将这块石头的权值纳入得分集合 $S_x$，那么小明从第 $x$ 块石头开始跳跃的得分为 $|S_x|$。

比如如果小明从第 $x$ 块石头出发，所有可能经过的石头上的权值分别为 $5,3,5,2, 3$，那么 $S_x = \{5, 3, 2\}$ 得分为 $|S_x| = 3$。小明可以任选一块石头开始跳跃，请求出小明最多能获得的分数。
## 输入格式

输入共 $2$ 行。

第一行为一个正整数 $n$。

第二行为 $n$ 个由空格分开的正整数 $c_1, c_2,\cdots, c_n$。
## 输出格式

输出共 $1$ 行，一个整数表示答案。
## 样例

### 样例输入 #1
```
5
4 3 5 2 1
```
### 样例输出 #1
```
4
```
## 提示

**【样例说明】**

从第一块石头出发得分最多，路径有以下几种：

1. $1$ 号 $\to 5$ 号：选择从 $1$ 号跳到 $1 + c_1=5$ 号。
2. $1$ 号 $\to 2$ 号 $\to 5$ 号：第一次选择从 $1$ 号跳到 $2 \times 1=2$ 号，第二次选择从 $2$ 号跳到 $2 + c_2 = 5$ 号。
3. $1$ 号 $\to 2$ 号 $\to 4$ 号：第一次选择从 $1$ 号跳到 $2 \times 1=2$ 号，第二次选择从 $2$ 号跳到 $2 \times 2 = 4$ 号。

所以所有可能经过的石头的权值的集合为 $S_1 = \{c_1, c_2, c_4, c_5\} = \{4, 3, 2, 1\}$，得分为 $|S_1| = 4$。

**【评测用例规模与约定】**

对于 $20\%$ 的评测用例，保证 $n \le 20$。  
对于 $100\%$ 的评测用例，保证 $n \le 40000$，$c_i \le n$。


---

---
title: "Happybob's Puzzle (UBC001A)"
layout: "post"
diff: 普及/提高-
pid: P10921
tag: ['O2优化']
---
# Happybob's Puzzle (UBC001A)
## 题目描述

给定一棵有 $n$ 个点的树，每条边的长度都是 $1$，你需要构造一个 $1\sim n$ 的排列 $p$，满足以下条件：

- 对于每个满足 $1\le i<n$ 的整数 $i$，点 $p_i$ 到点 $p_{i+1}$ 的简单路径长度为奇数。

如果有解，请输出字典序最小的排列 $p$；否则，输出 $-1$。
## 输入格式

**本题有多组测试数据。**

第一行，一个正整数 $t$，表示测试数据组数。

对于每组测试数据：

第一行，一个正整数 $n$。

接下来的 $n-1$ 行，每行两个正整数 $u,v$，表示点 $u,v$ 之间有一条边。
## 输出格式

$t$ 行，每行 $n$ 个正整数或一个整数 $-1$，表示该组测试数据的答案。
## 样例

### 样例输入 #1
```
2
3
1 2
2 3
7
1 2
1 3
2 4
2 5
3 6
3 7
```
### 样例输出 #1
```
1 2 3
-1
```
## 提示

**数据范围**

对于所有数据，都有 $1\le t,n,\sum n\le 10^5$，保证有 $1 \leq u, v \leq n$ 且 $u \neq v$。保证输入构成一棵树。其中 $\sum n$ 表示所有测试数据的 $n$ 的总和。


---

---
title: "西瓜种植"
layout: "post"
diff: 普及/提高-
pid: P10934
tag: []
---
# 西瓜种植
## 题目背景

笨笨：小西瓜，小西瓜~

路人甲：不会呀，这西瓜明明就大着啊……

笨笨：那……大西瓜，大西瓜~

路人甲：这么快就改口了……

笨笨：西瓜西瓜~可爱的西瓜~
## 题目描述

  笨笨种了一块西瓜地，但这块西瓜地的种植范围是一条直线的……
  
  笨笨在一番研究过后，得出了 $m$ 个结论，这 $m$ 个结论可以使他收获的西瓜最多。
  
  笨笨的结论是这样的：
  
  从西瓜地 $B$ 处到 $E$ 处至少要种植 $T$ 个西瓜，这个范围的收获就可以最大化。
  
  笨笨不想那么辛苦，所以他想种植的西瓜尽量少，而又满足每一个所得的结论。
## 输入格式

第一行两个数 $n$, $m$（$0<n \le 5000$，$0 \le m\le 3000$），表示笨笨的西瓜地长 $n$，笨笨得出 $m$ 个结论。

接下来 $m$ 行表示笨笨的 $m$ 个结论，每行三个数 $b$, $e$, $t$（$1 \le b\le e\le n$，$0 \le t\le e-b+1$）。
## 输出格式

输出笨笨最少需种植多少西瓜。

## 样例

### 样例输入 #1
```
9 4
1 4 2
4 6 2
8 9 2
3 5 2
```
### 样例输出 #1
```
5
```
## 提示

基本上来说，笨笨的西瓜地就是一条壮观的线……


---

---
title: "GF和猫咪的玩具"
layout: "post"
diff: 普及/提高-
pid: P10942
tag: ['O2优化']
---
# GF和猫咪的玩具
## 题目描述

GF 同学和猫咪得到了一个特别的玩具，这个玩具由 $n$ 个金属环（编号为 $1 \sim n$）和 $m$ 条绳索组成，每条绳索连接两个不同的金属环，并且长度相同。GF 左手拿起金属环 $L$，猫咪右手(或者说:爪)拿起金属环 $R\ (L \ne R)$，然后尽量的向两边拉，他希望选择合适的 $L$ 和 $R$，使得被拉紧的绳索尽量的多。 

注：如果像样例那样 $1 \to 2 \to 4 \to 3 \to 5 \to 6 \to 1$ 构成了一个环，我们认为拉 $1$ 和 $3$ 时只能拉紧一边（$1 \to 2 \to 4 \to 3$ 或 $3 \to 5 \to 6 \to 1$）而不算全部拉紧。通俗地说，也就是当两个环之间有几个绳索数相等的连接方法时，只算其中一条连接方法拉紧，不算全部拉紧。

## 输入格式

第一行包含两个正整数 $n,m$（$n \le 100$）；

接下来的 $m$ 行包含两个正整数 $a,b$，表示有一条绳索连接了 $a$ 和 $b$ 的绳索。

## 输出格式

仅包含一个整数，表示最多能拉紧的绳索数。
## 样例

### 样例输入 #1
```
6 6
1 2
1 6
2 4
6 5
4 3
5 3
```
### 样例输出 #1
```
3
```


---

---
title: "正整数拆分"
layout: "post"
diff: 普及/提高-
pid: P10955
tag: []
---
# 正整数拆分
## 题目描述

给定一个正整数 $N$，要求把 $N$ 拆分成若干个正整数相加的形式，参与加法运算的数可以重复。

**注意**:

  * 拆分方案不考虑顺序；
  * 至少拆分成 $2$ 个数的和。

求拆分的方案数 $\bmod 2147483648$ 的结果。
## 输入格式

一个正整数 $N$。
## 输出格式

输出一个整数，表示结果。
## 样例

### 样例输入 #1
```
7
```
### 样例输出 #1
```
14
```
## 提示

$1 \le N \le 4000$


---

---
title: "划分大理石"
layout: "post"
diff: 普及/提高-
pid: P10961
tag: ['O2优化']
---
# 划分大理石
## 题目描述

有价值分别为 $1,2,\dots,6$ 的大理石各 $a_1,a_2,\dots,a_6$ 块，现要将它们分成两部分，使得两部分价值之和相等，问是否可以实现。其中大理石的总数不超过 $20000$。 
## 输入格式

本题有多组数据，每组数据以单独的一行 $6$ 个整数呈现，分别表示 $a_1,a_2,\dots,a_6$。如果一行中 $6$ 个整数均为 $0$，表示输入文件结束。

对于每一个测试点，有效测试数据组数不超过 $100$ 组。
## 输出格式

对于每一组数据，如果划分成功，输出 `Can`，否则输出 `Can't`。
## 样例

### 样例输入 #1
```
4 7 4 5 9 1
9 8 1 7 2 4
6 6 8 5 9 2
1 6 6 1 0 7
5 9 3 8 8 4
0 0 0 0 0 0
```
### 样例输出 #1
```
Can't
Can
Can't
Can't
Can
```


---

---
title: "Computer"
layout: "post"
diff: 普及/提高-
pid: P10962
tag: []
---
# Computer
## 题目描述

A school bought the first computersome time ago(so this computer's id is 1). During the recent years the schol bought N-1 new computers. ach new computer wasconnected to one ofsetled eartier. Managers ofschool are anxious about slow finctioning ofthe net and want to know the maximum distance si for which i-thcomputer needs to send signal (i.e. length of cable to the most distant computer). You need to provide this information.

![](https://cdn.luogu.com.cn/upload/image_hosting/2dycu3sg.png)

Hint: he example input is coresponding to this graph. And from the graph, you can se that the computer 4 is farthest one from 1, so S1 =3. Computer 4 and 5 are the farthest ones from 2, so S2=2. Computer 5 is the farthest one from3.so S3=3. We also get S4=4，S5-4.

## 输入格式

Input file contains multiple test cases.in each case there is natural number N (N<=10000) in the first line, folowed by (N-1) lines with descriptions of computers. ithline contains two natural numbers - number of computer.to which i-th computer is conected and leneth ofcable used for connection. "otaleneth of cable doe notexceed 10^9. Numbers in lines ofinput are separated by a space.

## 输出格式

For each case output N lines. i-th line must contain number Si for i-th computer (1<-i<=N)

## 样例

### 样例输入 #1
```
5
1 1
2 1
3 1
1 1
```
### 样例输出 #1
```
3
2
3
4
4
```


---

---
title: "Largest Submatrix"
layout: "post"
diff: 普及/提高-
pid: P10965
tag: ['O2优化']
---
# Largest Submatrix
## 题目描述

Now here is a matrix with letter 'a','b','c','w','x','y','z' and you can change 'w' to 'a' or 'b', change 'x' to 'b' or 'c', change 'y' to 'a' or 'c', and change 'z' to 'a', 'b' or 'c'. After you changed it, what's the largest submatrix with the same letters you can make?
## 输入格式

The input contains multiple test cases. Each test case begins with $m$ and $n (1 <m,n< 1000)$ on line. Then come the elements of a matrix in row-major order on m lines each with n letters. The input ends once EOF is met.
## 输出格式

For each test case, output one line containing the number of elements of the largest submatrix of all same letters.

## 样例

### 样例输入 #1
```
2 4
abcw
wxyz
```
### 样例输出 #1
```
3
```
## 题目翻译

### 题目描述

现在你有一个有 $n$ 行，$m$ 列的矩阵，它的每个元素都是 `a`，`b`，`c`，`w`，`x`，`y`，`z`，中的一个。现在你可以进行无限次如下操作：

- 将 `w` 替换为 `a` 或 `b`。
- 将 `x` 替换为 `b` 或 `c`。
- 将 `y` 替换为 `a` 或 `c`。
- 将 `z` 替换为 `a` 或 `b` 或 `c`。

在你操作结束后，这个矩阵最大的全部元素都相同的子矩阵的元素个数最多是多少？

### 输入格式

**本题有多组测试数据。**

对于每组测试数据，第一行是两个整数 $n,m$，分别代表初始矩阵的行、列数。

之后的 $n$ 行，每行 $m$ 个字符，表示初始的矩阵。

### 输出格式

对于每组测试数据，输出一行，表示你操作结束后这个矩阵最大的全部元素都相同的子矩阵的元素个数的最大值。

### 样例解释

操作后的矩阵可以是这个样子：

```
abcw
wccc
```


---

---
title: "【MX-X4-T2】「Jason-1」加法"
layout: "post"
diff: 普及/提高-
pid: P11062
tag: ['O2优化', '梦熊比赛']
---
# 【MX-X4-T2】「Jason-1」加法
## 题目背景

原题链接：<https://oier.team/problems/X4C>。
## 题目描述

给定两个整数 $a, b$（可能为负），你可以进行任意多次操作（也可以不操作），每次操作你需要在如下两种形式中进行选择：

- 操作 1：将 $a$ 赋值为 $a$ 与 $b$ 的和，即 $a \gets a + b$。
- 操作 2：将 $b$ 赋值为 $a$ 与 $b$ 的和，即 $b \gets a + b$。

你的目标是最小化 $a$ 与 $b$ 的差的绝对值 $\lvert a-b \rvert$，请输出最小值。
## 输入格式

**本题输入包含多组数据。**

第一行，一个正整数 $T$，表示数据组数。对于每组数据：

- 仅一行，两个整数 $a, b$。
## 输出格式

对于每组数据：

- 仅一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
5
1 1
3 7
-4 1
-5 -8
4 0

```
### 样例输出 #1
```
0
3
0
3
0

```
### 样例输入 #2
```
2
-6 9
34 -51

```
### 样例输出 #2
```
0
0

```
## 提示

**【样例解释 #1】**

对于第 1 组数据，一种可行的操作方案是：不进行任何操作，$\lvert a-b \rvert=0$。

对于第 2 组数据，一种可行的操作方案是：先使用操作 2，$b$ 被赋值为 $10$；再使用操作 1，$a$ 被赋值为 $13$，此时 $\lvert a-b \rvert=3$，可以证明这是能够达到的最小值。

对于第 3 组数据，一种可行的操作方案是：连续使用 $5$ 次操作 1，$a$ 依次被赋值为 $-3,-2,-1,0,1$，此时 $a$ 和 $b$ 相等，$\lvert a-b \rvert=0$。

对于第 4 组数据，一种可行的操作方案是：不进行任何操作，此时 $\lvert a-b \rvert=3$。

对于第 5 组数据，一种可行的操作方案是：使用操作 2，$b$ 被赋值为 $4$，此时 $\lvert a-b \rvert=0$。

**【样例解释 #2】**

对该样例中的两组数据，均可先使用 $1$ 次操作 2，再使用 $3$ 次操作 1，使得差的绝对值为 $0$。

**【数据范围】**

| 测试点编号 | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: |
| 1 | A | $27$ |
| 2 | B | $31$ |
| 3 | 无 | $42$ |

- 特殊性质 A：保证 $\lvert a \rvert, \lvert b \rvert \le 10$。
- 特殊性质 B：保证 $a,b \ge 1$。

对于 $100\%$ 的数据，$1 \le T \le 10^5$，$\lvert a \rvert, \lvert b \rvert \le 10^9$。



---

---
title: "Alice and Bob"
layout: "post"
diff: 普及/提高-
pid: P11072
tag: ['O2优化']
---
# Alice and Bob
## 题目描述

Alice 和 Bob 在一起玩游戏。

初始时给定一个值域在 $0$ 到 $n$ 之间的整数序列 $a$，然后他（她）们轮流进行如下操作，Alice 先操作。

- 操作：任意重排 $a_{1\sim a_1}$。

如果某一个人操作前 $a_1=0$，则他（她）立刻输，因为他（她）无法进行操作。

如果某次操作结束后某一个人存在两次**他（她）的**操作满足**操作结束后**的 $a_1$ 相同，则他（她）立刻输。

现在给定非负整数序列 $a$，假设两人足够聪明，问谁有必胜策略。
## 输入格式

**本题多测。**

第一行，一个正整数 $T$，表示数据组数。

随后输入 $T$ 组数据。对于每组数据，第一行输入一个正整数 $n$，第二行输入 $n$ 个非负整数 $a_i$。
## 输出格式

对于每一组数据，输出一行一个字符串 `Alice` 或者 `Bob`，分别表示先手必胜与后手必胜。
## 样例

### 样例输入 #1
```
4
2
2 1
2
2 0
3
1 2 3
3
0 1 1
```
### 样例输出 #1
```
Bob
Alice
Bob
Bob
```
## 提示

| 测试点编号 $id$ | $n=$ | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1\sim 20$ | $id$ | 无 |
| $21$ | $20$ | $a_1=0$ |
| $22$ | $20$ | $a_1=1$ |
| $23$ | $20$ | $a_i$ 全相同 |
| $24\sim 25$ | $20$ | $a_i$ 两两不同 |

对于所有数据，保证 $1\le T,n\le 20$，$0\le a_i\le n$。


---

---
title: "[ROIR 2024] 数组划分 (Day 2)"
layout: "post"
diff: 普及/提高-
pid: P11124
tag: ['2024', 'Special Judge', 'ROIR（俄罗斯）']
---
# [ROIR 2024] 数组划分 (Day 2)
## 题目背景

翻译自 [ROIR 2024 D2T1](https://neerc.ifmo.ru/school/archive/2023-2024/ru-olymp-regional-2024-day2.pdf)。
## 题目描述

给定一个数组 $A = [a_1, a_2, \dots, a_n]$，其中包含 $n$ 个正整数。

需要将数组元素涂成两种颜色，使得任意两个同一颜色的元素 $x$ 和 $y$ 不满足以下条件：
- $x=p\times y$，其中 $p$ 是一个素数。

保证存在这样的涂色方案。
## 输入格式

第一行包含一个整数 $n$（$1 \leq n \leq 100000$），表示数组的元素个数。

第二行包含 $n$ 个整数 $a_1, a_2, \dots, a_n$（$1 \leq a_i \leq 10^6$），即数组中的元素。
## 输出格式

输出数组的划分方案。具体地，输出一行 $n$ 个整数，如果第 $i$ 个数字为 $1$，表示第 $i$ 个元素应涂成第一种颜色；如果为 $2$，则表示第 $i$ 个元素应涂成第二种颜色。

如果存在多个合适的划分方案，可以输出其中任何一个。
## 样例

### 样例输入 #1
```
4
1 2 3 4
```
### 样例输出 #1
```
2 1 1 2
```
### 样例输入 #2
```
1
20
```
### 样例输出 #2
```
1
```
## 提示

| 子任务 | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $0$ | $0$ | 同样例 |
| $1$ | $9$ | $a_i\le2$ |
| $2$ | $19$ | $a_i=p^k$，其中 $p$ 是素数 |
| $3$ | $12$ | $a_i\le3$ |
| $4$ | $13$ | $a_i\le4$ |
| $5$ | $21$ | $n\le10$ |
| $6$ | $26$ | 无 |

对于 $100\%$ 的数据，$1 \leq n \leq 100000$，$1 \leq a_i \leq 10^6$。


---

---
title: "「SFMOI Round I」Strange Homura Game"
layout: "post"
diff: 普及/提高-
pid: P11145
tag: ['洛谷原创', '交互题', 'Special Judge', 'O2优化', '洛谷月赛', 'Ad-hoc']
---
# 「SFMOI Round I」Strange Homura Game
## 题目背景

[English statement](https://www.luogu.com.cn/problem/T514577). **You must submit your code at the Chinese version of the statement.**

> 伝えたいコトバは たったひとつ / 想要传达的言语 唯有一个 \
> キミがいたから 強くなれた / 因有你在 我变坚强了 \
> 2 人ならどんな空も飛べるね / 只要两人一起就能任意飞翔 \
> キミをいつでも 信じてるから / 因为一直都 坚信着你 \
> ずっとずっと夢を見ていよう / 能同做此梦不复醒吧
## 题目描述


**本题和 B1 是不同的问题，请分别仔细阅读两题题面。**

**这是一道交互题。**


**提示**：我们在题目描述的最后提供了一份简要的、形式化描述的题面。

焰和圆在玩游戏。

焰在心中想了一个正整数 $m$，让圆猜出 $m$ 的值。当然，焰不会为难圆，所以 $\textcolor{red}{2}\le m\le 10^{17}$。焰不会作弊，也就是说，**焰不会悄悄更换想好的数字。**

圆可以问焰：对于**非负**整数 $x$，$x\bmod m$ 的值是多少。圆需要用最少的询问次数来猜出 $m$ 的值。（为了得到全部分数，最多只能使用 $2$ 次询问。）

焰一共和圆玩了 $T$ 次游戏。圆的数学很好，在 $\varepsilon $ 秒内就秒了这题，但是她在军训，于是她找来了你，来帮她猜出这 $T$ 次游戏的答案。



**形式化地**：有一个隐藏的正整数 $m\in [\textcolor{red}{2},10^{17}]$。每次询问给定**非负**整数 $x$，回答 $x\bmod m$。用最少的询问次数找出 $m$。共有 $T$ 组测试数据。$m$ 的数值在事先确定，不会根据询问变化，也就是说，**交互库是非适应性的**。

【实现细节】

对于每个测试点，输入一行一个正整数 $T$，表示游戏次数。

对于每组测试数据，你可以用以下的格式发起一次询问：

- $\texttt{? }x$：询问 $x\bmod m$ 的值。你需要保证 $x$ 是**非负**整数，且 $x \in \textcolor{red}{ [0,10^{18}]}$。
	
    从标准输入流读入一个整数表示答案。特别地，若整数是 $\texttt{-1}$，你的程序已经被判定为 $\texttt{Wrong Answer}$，此时你需要立刻终止程序。

你可以用以下的格式回答答案：

- $\texttt{! }m$：回答 $m$ 的值。

在发起询问后，需要刷新缓冲区，否则可能导致 TLE。

- 在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。 特别地，利用 `std::endl` 来换行也会刷新缓冲区。
- 在 Pascal 中，使用 `flush(output)`。  
- 在 Python 中，使用 `stdout.flush()`。  
- 对于其它语言，可自行查阅文档。

## 输入格式

见【实现细节】。
## 输出格式

见【实现细节】。
## 样例

### 样例输入 #1
```
1

0

1
```
### 样例输出 #1
```

? 5

? 1

! 5
```
## 提示


#### 数据范围

对于 $100\%$ 的数据，保证 $1\le T\le 100$，$m$ 为正整数，$\textcolor{red}{2}\le m\le 10^{17}$。

#### 评分方式

记单个测试点中，你的询问次数的最大值为 $Q$。则得分 $\mathrm{score}$ 如下所示：

$$
\begin{aligned}
\mathrm{score}=\begin{cases}
0, & Q\in [101,+\infty) \\
30, & Q\in [3,101) \\
50, & Q\in [0,3) \\
\end{cases}
\end{aligned}
$$

本题得分为所有测试点得分的最小值。


---

---
title: "[ROIR 2018] 书页 (Day2)"
layout: "post"
diff: 普及/提高-
pid: P11181
tag: ['2018', 'ROIR（俄罗斯）']
---
# [ROIR 2018] 书页 (Day2)
## 题目描述

**译自 ROI 2018 Regional. Day2 T2.** ***[Старая книга](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***

一群年轻的考古学家正在发掘一座古图书馆。他们偶然发现了一本旧书的残片。经过研究，他们得出了以下结论。

每一页上要么全是文本（称为文本页），要么全是插图（称为插图页）。已知前 $k$ 页全是插图页。这本书有页码，但只在文本页注明页码。已知注明的页码的总和为 $s$。

很可惜，考古学家既无法确定这本书有多少页，也无法确定哪些页面是插图页。不过，考古学家想知道，这本书最少有几个插图页。
## 输入格式

第一行一个整数 $k$，第二行一个整数 $s$。
## 输出格式

输出一行，表示这本书最少有几个插图页。
## 样例

### 样例输入 #1
```
1
8
```
### 样例输出 #1
```
3
```
## 提示

### 样例解释

满足 $k=1,$ $s=8$ 的情况共有三种：
- 图文图图图文（4 个插图页）
- 图图文图文（3 个插图页）
- 图图图图图图图文（7 个插图页）

综上，至少会有 3 个插图页。

### 数据范围

|子任务编号|分值|$k$|$s$|
|:-:|:-:|:-:|:-:|
|1|15|$k = 0$|$1 ≤ s ≤ 200$|
|2|20|$k = 0$|$1 ≤ s ≤ 10^{12}$|
|3|30|$0 ≤ k ≤ 199$|$k + 1 ≤ s ≤ 200$|
|4|35|$0 ≤ k ≤ 10^9$|$k + 1 ≤ s ≤ 10^{12}$|


---

---
title: "[ROIR 2018] 分形 (Day2)"
layout: "post"
diff: 普及/提高-
pid: P11182
tag: ['2018', 'ROIR（俄罗斯）']
---
# [ROIR 2018] 分形 (Day2)
## 题目描述

**译自 ROI 2018 Regional. Day2 T3.** ***[Красота фейерверка](http://neerc.ifmo.ru/school/archive/2017-2018/ru-olymp-regional-2018-day2.pdf)***

已知一棵包含 $n$ 个元素的有根树 $T^1$。定义 $T^m$ 为一棵树，生成方式是在 $T^{m-1}$ 的每个叶结点下面连一棵 $T^1$ 而得。

![](https://cdn.luogu.com.cn/upload/image_hosting/s596ep9z.png)

试求 $T^m$ 的直径的长度（这里的长度指的是直径上的点数）。
## 输入格式

第一行 $n,m$。  
第二行 $p_2\ldots p_n,\ \ $ $p_i$ 表示结点 $p_i$ 与结点 $i$ 有边连接。
## 输出格式

输出一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
4 2
1 1 2
```
### 样例输出 #1
```
10
```
## 提示

### 样例解释

![](https://cdn.luogu.com.cn/upload/image_hosting/g4tsci1c.png)

### 数据范围

$3≤n≤2\times 10^5,$ $1≤m≤2\times 10^5,$ $1\le p_i\le i-1.$

|子任务编号|分值|$n$|$m$|
|:-:|:-:|:-:|:-:|
|1|19|$3 ≤ n ≤ 5000$|$m = 1$|
|2|10| |$m=1$|
|3|20|$3 ≤ n ≤ 5000$|$1 ≤ m ≤ 5000$|
|4|19|$3 ≤ n≤ 5000$||
|5|32||&nbsp;|



---

---
title: "[CSP-J 2024] 小木棍"
layout: "post"
diff: 普及/提高-
pid: P11229
tag: ['2024', 'O2优化', 'CSP-J 入门级']
---
# [CSP-J 2024] 小木棍
## 题目描述

小 S 喜欢收集小木棍。在收集了 $n$ 根长度相等的小木棍之后，他闲来无事，便用它们拼起了数字。用小木棍拼每种数字的方法如下图所示。

![](https://cdn.luogu.com.cn/upload/image_hosting/8zubqass.png)

现在小 S 希望拼出一个**正**整数，满足如下条件：

- 拼出这个数**恰好**使用 $n$ 根小木棍；
- 拼出的数没有前导 $0$；
- 在满足以上两个条件的前提下，这个数尽可能小。

小 S 想知道这个数是多少，可 $n$ 很大，把木棍整理清楚就把小 S 折腾坏了，所以你需要帮他解决这个问题。如果不存在正整数满足以上条件，你需要输出 $-1$ 进行报告。
## 输入格式

本题有多组测试数据。

输入的第一行包含一个正整数 $T$，表示数据组数。

接下来包含 $T$ 组数据，每组数据的格式如下：

一行包含一个整数 $n$，表示木棍数。
## 输出格式

对于每组数据：输出一行，如果存在满足题意的正整数，输出这个数；否则输出 $-1$。
## 样例

### 样例输入 #1
```
5
1
2
3
6
18
```
### 样例输出 #1
```
-1
1
7
6
208
```
## 提示

**【样例 1 解释】**

- 对于第一组测试数据，不存在任何一个正整数可以使用恰好一根小木棍摆出，故输出 $-1$。
- 对于第四组测试数据，注意 $0$ 并不是一个满足要求的方案。摆出 $9$、$41$ 以及 $111$ 都恰好需要 $6$ 根小木棍，但它们不是摆出的数最小的方案。
- 对于第五组测试数据，摆出 $208$ 需要 $5 + 6 + 7 = 18$ 根小木棍。可以证明摆出任何一个小于 $208$ 的正整数需要的小木棍数都不是 $18$。注意尽管拼出 $006$ 也需要 $18$ 根小木棍，但因为这个数有前导零，因此并不是一个满足要求的方案。

**【数据范围】**

对于所有测试数据，保证：$1 \leq T \leq 50$，$1 \leq n \leq 10^5$。

| 测试点编号 | $n\leq$ | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $20$ | 无 |
| $2$ | $50$ | 无 |
| $3$ | $10^3$ | A |
| $4,5$ | $10^5$ | A |
| $6$ | $10^3$ | B |
| $7,8$ | $10^5$ | B |
| $9$ | $10^3$ | 无 |
| $10$ | $10^5$ | 无 |

特殊性质 A：保证 $n$ 是 $7$ 的倍数且 $n \geq 100$。

特殊性质 B：保证存在整数 $k$ 使得 $n = 7k + 1$，且 $n \geq 100$。


---

---
title: "[GESP202409 六级] 算法学习"
layout: "post"
diff: 普及/提高-
pid: P11247
tag: ['2024', 'GESP']
---
# [GESP202409 六级] 算法学习
## 题目描述

小杨计划学习 $m$ 种算法，为此他找了 $n$ 道题目来帮助自己学习，每道题目最多学习一次。

小杨对于 $m$ 种算法的初始掌握程度均为 $0$。第 $i$ 道题目有对应的知识点 $a_i$，即学习第 $i$ 道题目可以令小杨对第 $a_i$ 种算法的掌握程度提高 $b_i$。小杨的学习目标是对于 $m$ 种算法的掌握程度均至少为 $k$。

小杨认为连续学习两道相同知识点的题目是不好的，小杨想请你编写程序帮他计算出他最少需要学习多少道题目才能使得他在完成学习目标的同时避免连续学习两道相同知识点的题目。

## 输入格式

第一行三个正整数 $m, n, k$，代表算法种类数，题目数和目标掌握程度。  
第二行 $n$ 个正整数 $a_1, a_2, ..., a_n$，代表每道题目的知识点。  
第二行 $n$ 个正整数 $b_1, b_2, ..., b_n$，代表每道题目提升的掌握程度。
## 输出格式

输出一个整数，代表小杨最少需要学习题目的数量，如果不存在满足条件的方案，输出 -1。
## 样例

### 样例输入 #1
```
3 5 10
1 1 2 3 3
9 1 10 10 1
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
2 4 10
1 1 1 2
1 2 7 10
```
### 样例输出 #2
```
-1
```
## 提示

### 样例 1 解释

一种最优学习顺序为第一道题，第三道题，第四道题，第二道题。

### 数据规模与约定

| 子任务编号 | 数据点占比 | $m$ | $n$ | $b_i$ | $k$ |
| :-: | :-: | :-: | :-: | :-: | :-: |
| $1$ | $30\%$ | $2$ | $\leq 9$ | $\leq 10$ | $\leq 10$ |
| $2$ | $40\%$ | $\leq 9$ | $\leq 9$ | $\leq 10$ | $\leq 10$ |
| $3$ | $40\%$ | $\leq 10^5$ | $\leq 10^5$ | $\leq 10^5$ | $\leq 10^5$ |

对于全部数据，保证有 $1 \leq m, n, b_i, k \leq 10^5$，$1 \leq a_i \leq m$。


---

---
title: "[GESP202409 七级] 小杨寻宝"
layout: "post"
diff: 普及/提高-
pid: P11249
tag: ['2024', 'GESP']
---
# [GESP202409 七级] 小杨寻宝
## 题目描述

小杨有一棵包含 $n$ 个节点的树，树上的一些节点放置有宝物。

小杨可以任意选择一个节点作为起点并在树上移动，但是小杨只能经过每条边至多一次，当小杨经过一条边后，这条边就会消失。小杨每经过一个放置有宝物的节点就会取得该宝物。

小杨想请你帮他判断自己能否成功取得所有宝物。
## 输入格式


**本题单个测试点内有多组测试数据**。输入第一行包含一个正整数 $t$，代表测试用例组数。  
接下来是 $t$ 组测试用例。对于每组测试用例，一共 $n+1$ 行。

第一行包含一个正整数 $n$，代表树的节点数。  
第二行包含 $n$ 个非负整数 $a_1, a_2, \dots a_n$，其中如果 $a_i = 1$，则节点 $i$ 放置有宝物；若 $a_i = 0$，则节点 $i$ 没有宝物。  
之后 $n - 1$ 行，每行包含两个正整数 $x_i, y_i$，代表存在一条连接节点 $x_i$ 和 $y_i$ 的边。

## 输出格式


对于每组测试数据，如果小杨能成功取得所有宝物，输出 Yes，否则输出 No。
## 样例

### 样例输入 #1
```
2
5
0 1 0 1 0
1 2
1 3
3 4
3 5
5
1 1 1 1 1
1 2
1 3
3 4
3 5

```
### 样例输出 #1
```
Yes
No

```
## 提示


### 样例 1 解释

对于第一组测试用例，小杨从节点 $2$ 出发，按照 $2-1-3-4$ 的顺序即可成功取得所有宝物。

### 数据规模与约定

| 子任务编号 | 数据点占比 | $t$ | $n$ |
| :-: | :-: | :-: | :-: |
| $1$ | $20\%$ | $\leq 10$ | $\leq 5$ |
| $2$ | $20\%$ | $\leq 10$ | $\leq 10^3$ |
| $3$ | $60\%$ | $\leq 10$ | $\leq 10^5$ |

对全部的测试点，保证 $1 \leq t \leq 10$，$1 \leq n \leq 10^5$，$0 \leq a_i \leq 1$，且保证树上至少有一个点放置有宝物。


---

---
title: "[GDKOI2023 普及组] Macaron"
layout: "post"
diff: 普及/提高-
pid: P11254
tag: ['2023', '广东', 'O2优化']
---
# [GDKOI2023 普及组] Macaron
## 题目描述

给出 $n\times m$ 的一块二维平面作为 Nana 的家，左上角墙角为 $(0, 0)$ ，右下角墙角为 $(n + 1, m + 1)$。其中
家里有 $k$ 个家具，每个家具会占其中一个点，题目将会给出每个家具的坐标。

马卡龙是一只扫地机器人，半径为 $r$ 的圆形的它可以向上下左右四个方向移动，移动前后必须保持圆心在整点上，并且不能穿过家具或外墙进行打扫，即身躯不可以与家具或墙壁有重合部分（允许相切）。它初始圆心位置为 $(x_s, y_s)$ ，将会从此出发，打扫它能到达的区域。

马卡龙想知道自己可以打扫到多大面积。你只需要告诉马卡龙，它出发后它的圆心可以到达的平面内的
整点数量。

对了，你只用将答案告诉马卡龙就够了，不需要告诉 Nana ，因为马卡龙不希望伤心的 Nana 会为这些
琐事烦心。
## 输入格式

第一行有两个整数 $n, m$ ，表示 Nana 的家的大小。

第二行有一个整数 $r^2$ ，表示马卡龙半径的平方。

第三行有两个整数 $x_s, y_s$ ，表示马卡龙出发的位置，保证在其初始位置上，马卡龙不会与家具有重合部
分。

第四行有一个整数 $k$，接下来 $k$ 行里每行给出两个整数 $x, y$ ，表示其中一个家具的坐标。
## 输出格式

仅一个整数 $ans$ ，表示答案。
## 样例

### 样例输入 #1
```
10 10
5
4 5
5
7 10
6 10
5 9
4 9
4 10
```
### 样例输出 #1
```
29
```
### 样例输入 #2
```
见/example/macaron/下的 macaron1.in
```
### 样例输出 #2
```
见/example/macaron/下的 macaron1.out
```
## 提示

### 数据范围

对所有数据满足 $0 \le k \le n \times  m，1 \le r \le \min(\lfloor \frac{n}{2} \rfloor , \lfloor \frac{m}{2} \rfloor)$；

其中有 $30\%$ 的数据点满足 $1 \le n, m \le 100$;

剩下 $70\%$ 的数据点满足 $1 \le n, m \le 1000$。


---

---
title: "[GDKOI2023 普及组] 交换机"
layout: "post"
diff: 普及/提高-
pid: P11257
tag: ['2023', '广东', 'O2优化']
---
# [GDKOI2023 普及组] 交换机
## 题目描述

Moon 正在准备计算机网络的开学考，复习到了有关交换机的知识。交换机具有令人惊奇的特性那就是它的表是自动、动态和自治地建立的，即没有来自网络管理员或来自配置协议的任何干预。换句话说，交换机是自学习的。这种能力大概是通过如下方式实现的:

1) 交换机表初始为空。
2) 对于在每个接口接收到的每个数据帧，该交换机在其表中存储数据帧的源 $\text{MAC}$ 地址。
3) 如果在一段时间 (称为老化期) 后，交换机没有接收到含有某个源 $\text{MAC}$  地址的数据帧，就会在表中删除这个源 $\text{MAC}$  地址。

现在给出了某天中一个交换机所有收到的数据帧（每一个数据帧包含一个源 $\text{MAC}$  地址，以及该数据帧的到达时间），请你帮助 Moon 算出在这一天中，这个交换机的表最少需要多少项，才可以使得这天所有数据帧的信息可以存储下来。**注意为了简单起见，每个时间点先进行删除操作再进行插入操作。**

简单来说，需要维护一个字符串集合 $S$，有若干次插入操作，每次插入操作包含一个字符串以及一个有效时间区间（区间长度为定值），需要求出所有时间内，字符串集合 $S$ 大小的最大值。
## 输入格式

第一行两个整数 $n，k$，分别表示数据帧的个数，以及老化期时间（单位：分钟）。

接下来 $n$ 行，每行两个字符串 $s_1, s_2$，表示数据帧包含的源地址帧，以及到达时间，其中 $s_1$ 是一个 MAC
地址，包含 $12$ 个 $16$ 进制数，$s_2$ 的格式为 $a:b$，其中 $0 \le a \le 23, 0 \le b \le 59$，表示该数据帧在 $a$ 时 $b$ 分钟 $0$ 秒到达交换机，并且 $a, b$ 不足 $10$ 的数字前面要补充一个零。
## 输出格式

一行，一个整数，代表答案。
## 样例

### 样例输入 #1
```
4 10
0123456789ABCDEF 00:10
0000000000ABCDEF 08:11
0123456789ABCDEF 00:15
0000000000ABCDEF 00:11
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3 60
0123456789ABCDEF 13:00
0000000000000000 14:00
0123456789ABCDEF 12:30
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
见/example/switch/下的 switch1.in 
```
### 样例输出 #3
```
见/example/switch/下的 switch1.out
```
## 提示

### 样例解释

样例 $1$ 中，时刻 $00:11$ 分表项中有 $2$ 个源 $\text{MAC}$ 地址 $\text{0123456789ABC}$ 和 $\text{0000000000ABCDEF}$，所以至
少需要表项大小至少为 $2$，可以证明这是最少需要的表项大小。

### 数据范围

对于所有的数据，有 $1 \le n \le 10^5, 1 \le k \le 1440$；

对于 $50\%$ 的数据，有 $1 \le n \le 500$。


---

---
title: "「Diligent-OI R1 C」DlgtRank"
layout: "post"
diff: 普及/提高-
pid: P11273
tag: ['洛谷原创', '洛谷月赛']
---
# 「Diligent-OI R1 C」DlgtRank
## 题目描述

给你一个长为 $n$ 的序列 $a_1\sim a_n$。这里定义 $a_i$ 的**排名**为 $a$ 中**严格大于** $a_i$ 的数的个数 $+1$。

现有一些操作来更改 $a$ 中的元素。所有操作之前会事先给你一个常量 $k$。每次操作前，定义 $a_i$ 是**可移动**的，当且仅当**仅将 $a_i$ 的值加上 $k$，其他值不变**后，$a_i$ 的排名不变。否则 $a_i$ 在这次操作是不可移动的。然后这次操作为：将序列中所有可移动的数加上 $k$。

可以证明经过若干次操作后，$a$ 中所有值都会变成可移动的，并且第一次达到这种状态时，后面的操作也会是这种状态。也就是说，无论做多少次操作，$a$ 中每个值为**不可移动**状态的次数是有限的。

现在询问，做足够多次这个操作后，$a$ 中每个值为**不可移动**状态的次数是多少。
## 输入格式

第一行输入两个整数 $n,k$。

接下来一行，输入 $n$ 个整数 $a_1\sim a_n$ 表示初始时的 $a$ 数列。
## 输出格式

输出一行 $n$ 个整数。第 $i$ 个整数表示 $a_i$ 在操作过程中为**不可移动**状态的次数。
## 样例

### 样例输入 #1
```
3 1
1 3 4
```
### 样例输出 #1
```
1 1 0
```
### 样例输入 #2
```
6 2
1 2 5 6 7 8
```
### 样例输出 #2
```
4 3 3 2 1 0
```
### 样例输入 #3
```
8 10
1 14 5 14 19 19 8 10
```
### 样例输出 #3
```
5 1 4 1 0 0 3 2
```
## 提示

#### 样例 #1 解释

初始的 $a_1=1,a_2=3,a_3=4$。

操作一次后 $a_1=2,a_2=3,a_3=5$。$a_2$ 不可移动，是因为如果仅将 $a_2$ 加上 $1$，它的排名会由 $2$ 变成 $1$。

操作两次后 $a_1=2,a_2=4,a_3=6$。$a_1$ 不可移动，是因为如果仅将 $a_1$ 加上 $1$，它的排名会由 $3$ 变成 $2$。

操作三次后 $a_1=3,a_2=5,a_3=7$。这次操作所有值都是可移动的了。可以证明再操作任意多次也不会再出现不可移动的状态了。

因此过程中 $a_1$ 有一次不可移动，$a_2$ 有一次不可移动，$a_3$ 没有不可移动的时候。

#### 数据范围与约定

对于 $100\%$ 数据，$1\le n\le2\times10^5$，$1\le k,a_i\le10^9$。

| Subtask 编号 | $n\le$ | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: | :----------: |
| $0$ | $1$ | ABC | $4$ |
| $1$ | $100$ | C | $14$ |
| $2$ | $100$ | 无 | $13$ |
| $3$ | $3000$ | C | $18$ |
| $4$ | $3000$ | 无 | $16$ |
| $5$ | $2\times10^5$ | A | $6$ |
| $6$ | $2\times10^5$ | BC | $8$ |
| $7$ | $2\times10^5$ | C | $7$ |
| $8$ | $2\times10^5$ | 无 | $14$ |

特殊性质 A：所有的 $a_i$ 都相等。

特殊性质 B：对于任意的 $i<n$ 满足 $a_{i+1}=a_i+k$。

特殊性质 C：对于任意的 $i\neq j$ 满足 $a_i\neq a_j$。


---

---
title: "「GFOI Round 2」Jom & Terry"
layout: "post"
diff: 普及/提高-
pid: P11280
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# 「GFOI Round 2」Jom & Terry
## 题目背景

**[English statement](https://www.luogu.com.cn/problem/T533492). You must submit your code at the Chinese version of the statement.**

我在做 [#3406. 「2020-2021 集训队作业」Tom & Jerry](https://loj.ac/p/3406)……

你说得对，但是：
> Tom and Jerry is an American animated media franchise and series of comedy short films created in 1940 by William Hanna and Joseph Barbera. Best known for its 161 theatrical short films by Metro-Goldwyn-Mayer, the series centers on the rivalry between the titular characters of a cat named Tom and a mouse named Jerry. Many shorts also feature several recurring characters.
> 
> In its original run, Hanna and Barbera produced 114 Tom and Jerry shorts for MGM from 1940 to 1958. During this time, they won seven Academy Awards for Best Animated Short Film, tying for first place with Walt Disney's Silly Symphonies with the most awards in the category. After the MGM cartoon studio closed in 1957, MGM revived the series with Gene Deitch directing an additional 13 Tom and Jerry shorts for Rembrandt Films from 1961 to 1962. Tom and Jerry became the highest-grossing animated short film series of that time, overtaking Looney Tunes. Chuck Jones produced another 34 shorts with Sib Tower 12 Productions between 1963 and 1967. Five more shorts have been produced since 2001, making a total of 166 shorts.
>
> A number of spin-offs have been made, including the television series The Tom and Jerry Show (1975), The Tom and Jerry Comedy Show (1980–1982), Tom & Jerry Kids (1990–1993), Tom and Jerry Tales (2006–2008), and The Tom and Jerry Show (2014–2021). In 1992, the first feature-length film based on the series, Tom and Jerry: The Movie, was released. 13 direct-to-video films have been produced since 2002. In 2021, a a live-action/animated hybrid film was released. In 2019, a musical adaptation of the series, titled Tom and Jerry: Purr-Chance to Dream, debuted in Japan, in advance of Tom and Jerry's 80th anniversary.
## 题目描述

Terry 和 Jom 在一个 $n$ 个点 $m$ 条边的有“根”无向连通图上博弈（图的根为 $r$），遵循以下规则：

- Terry 先手；
- 两人轮流在图上移动，每次只能走一条边（也可以睡觉，啥都不干）；
- Terry 不能走到 Jom 所在的结点（我们认为只有 Terry 自投罗网时才会被抓到，即如果 Terry 先移动到结点 $u$ 后 Jom 在同一回合也移动到 $u$ 是合法的）。

给定 $q$ 次询问，每次询问给定 Terry 和 Jom 的起点 $a, b$，你需要回答 Terry 能否到达根（即点 $r$）。
## 输入格式

第一行包含三个整数 $n, m, r$，表示点数、边数和根的编号；

接下来 $m$ 行，每行包含两个整数 $(u, v)$ 表示一条边（注意可能存在重边或自环）；

接下来一行包含一个整数 $q$，表示询问数；

接下来 $q$ 行，每行包含两个整数 $a, b$，表示 Terry 和 Jom 的起点。
## 输出格式

因为这是签到题，所以你应该在开头输出 `I'm here!`。

接下来 $q$ 行的第 $i$ 行，如果在第 $i$ 次询问中 Terry 能到达根就输出 `Terry`，否则输出 `Jom`。
## 样例

### 样例输入 #1
```
5 4 3
4 3
3 2
1 5
1 2
2
1 2
5 4
```
### 样例输出 #1
```
I'm here!
Jom
Jom
```
### 样例输入 #2
```
5 5 4
1 4
4 3
3 2
4 5
5 3
2
3 1
5 1
```
### 样例输出 #2
```
I'm here!
Terry
Terry
```
## 提示

#### 【提示】

本题 IO 量较大，请选手使用较快的读入输出方式。

#### 【数据范围】

**本题采用捆绑测试。**

| 子任务编号 | $n, m, q \le$ |     特殊性质     | 分值 |
| :--------: | :-----------: | :--------------: | :--------: |
|    $0$     |       $10^6$       | A |    $1$     |
|    $1$     |     $10$      |        无        |    $9$     |
|    $2$     |       $10^6$       |  B  |    $15$    |
|    $3$     |       $10^6$       | C |    $15$    |
|    $4$     |       $10^6$       |        无        |    $60$    |

- 特殊性质 A：$q = 0$。
- 特殊性质 B：保证图是一条链。
- 特殊性质 C：保证图是一个菊花。

对于所有数据，满足：

- $1 \le n, m \le 10^6$；
- $0 \le q \le 10^6$；
- $1 \le r, u, v, a, b \le n$；
- 给定的图是一个无向连通图。


---

---
title: "无穷的迭代器"
layout: "post"
diff: 普及/提高-
pid: P11310
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# 无穷的迭代器
## 题目背景

[The English statement for T3](/problem/U508232)

You can also see the pdf at the bottom of the chinese problem statement.
## 题目描述

对于实数 $ r $，记一次操作为：

* 找到不小于 $ r $ 的最小整数即 $ \lceil r \rceil $，并将 $ r $ 的值乘上 $ \lceil r \rceil $。

现在给定非负整数 $ k $，对于 $ r=k+\frac{1}{2} $，至少需要对 $ r $ 进行几次操作才能使 $ r $ 为整数？
## 输入格式

本题多测，第一行一个整数 $ T $ 代表数据组数。

对于每组数据：

一行一个整数 $k$，含义见题目描述。
## 输出格式

对于每组数据：

若可以变成整数，输出一行一个整数代表你找到的最小的次数。

若不能变成整数，输出一行 `NO!`。
## 样例

### 样例输入 #1
```
1
4
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
1
0
```
### 样例输出 #2
```
NO!
```
## 提示

**【样例 1 解释】**

| 操作次数 | $ r= $ |
|:-:|:-:|
| 初始 | $ \frac{9}{2} $ |
| $ 1 $ | $ \frac{45}{2} $ |
| $ 2 $ | $ \frac{1035}{2} $ |
| $ 3 $ | $ 268065 $ |

**【数据规模与约定】**

**提示：本题采用捆绑计分。**

对于 $ 100\% $ 的数据，$ 1 \le T \le 20 $，$ 0 \le k \le 10^{18} $。

* Subtask 1（15 pts）：$ 1 \le k \le 10 $。
* Subtask 2（40 pts）：$ 1 \le k \le 100 $。
* Subtask 3（45 pts）：$ 0 \le k \le 10^{18} $。


---

---
title: "[NOISG 2024 Finals] Problem Setter"
layout: "post"
diff: 普及/提高-
pid: P11349
tag: ['2024', 'NOISG（新加坡）']
---
# [NOISG 2024 Finals] Problem Setter
## 题目背景

Stuart 是一名热衷于编程比赛的题目设计者，他为多个比赛设定了许多问题。他希望将自己的一些问题提交到编程比赛中，以获得更多的荣誉。
## 题目描述

Stuart 可以将题目提交到 $c$ 个比赛中。如果将问题提交到第 $i$ 个比赛，他的满意度会增加 $s_i$。但由于比赛的结构和其他题目设计者的竞争，第 $i$ 个比赛只会接受质量至少为 $m_i$ 的题目。每个比赛可以接受多个问题，每个问题都会增加 $s_i$ 的满意度。

Stuart 总共设计了 $p$ 道问题，他认为第 $j$ 道问题的质量是 $q_j$。但由于问题准备过程的难度，提交第 $j$ 道问题到任何比赛会使他的满意度减少 $d_j$。显然，每个问题最多只能提交到一个比赛，或者可以选择不提交。

请帮 Stuart 找到一个最优的提交方案，以使他的满意度最大化。如果所有提交方案都会导致负满意度，他可以选择不提交任何问题，最终满意度为 $0$。
## 输入格式

- 第一行包含两个整数 $c$ 和 $p$，分别表示比赛数量和问题数量。
- 接下来的 $c$ 行中，第 $i$ 行包含两个整数 $m_i$ 和 $s_i$，表示第 $i$ 个比赛的最低问题质量和增加的满意度。
- 接下来的 $p$ 行中，第 $j$ 行包含两个整数 $q_j$ 和 $d_j$，表示第 $j$ 道问题的质量和提交所带来的满意度损失。


## 输出格式

- 输出一个整数，表示 Stuart 可以获得的最大满意度。如果他选择不提交任何问题，输出 $0$。
## 样例

### 样例输入 #1
```
3 3
2 5
1 1
8 3
3 2
9 4
1 3
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
3 4
2 3
1 1
8 4
2 0
7 0
1 0
8 0
```
### 样例输出 #2
```
11
```
### 样例输入 #3
```
5 1
3 4
1 2
5 6
2 8
4 0
3 6
```
### 样例输出 #3
```
2
```
## 提示

【样例解释】

对于样例 #1：
- 比赛 $1$ 的最低质量要求为 $2$，问题 $1$ 满足条件，提交后增加 $5 - 2 = 3$ 的满意度。
- 比赛 $1$ 的最低质量要求为 $2$，问题 $2$ 满足条件，提交后增加 $5 - 4 = 1$ 的满意度。
- 最终满意度为 $3 + 1 = 4$。
- 问题 $3$ 和其他比赛没有提交。

对于样例 #2：
- 根据提交方案，最优满意度为 $11$。

对于样例 #3：
- 最优方案使满意度为 $2$。

【数据范围】

- $1 \leq c, p \leq 200,000$
- $0 \leq m_i, s_i, q_j, d_j \leq 1,000,000$

| 子任务编号 | 分值 | 限制条件                     |
|:---:|:---:|:---:|
| $0$ | $0$  | 样例测试用例                     |
| $1$ | $18$ | $1 \leq c \leq 1,000, p = 1$     |
| $2$ | $16$ | $1 \leq c, p \leq 1,000$         |
| $3$ | $26$ | $d_j = 0$                        |
| $4$ | $40$ | 无额外限制                       |


---

---
title: "[POI 2024/2025 R1] Walki robotów"
layout: "post"
diff: 普及/提高-
pid: P11385
tag: ['POI（波兰）', '2024']
---
# [POI 2024/2025 R1] Walki robotów
## 题目背景

原题译自 [POI 2024/2025 R1 Walki robotów](https://sio2.mimuw.edu.pl/c/oi32-1/p/wal/)。
## 题目描述

在 Bajtocji 正在进行一场大型年度机器人锦标赛，其中有 $n$ 个机器人参赛，它们的编号从 $1$ 到 $n$。第 $i$ 个机器人由两个参数描述，$s_{i}$ 和 $z_{i}\ (1 \leq s_{i}, z_{i} \leq n)$，分别表示机器人的力量和敏捷度。力量值 $s_{i}$ 各不相同。敏捷度值 $z_{i}$ 也各不相同。

锦标赛由一系列单挑比赛组成。在每场比赛中，两个尚未被淘汰的机器人进行对决。在第 $i$ 个机器人对战第 $j$ 个机器人的比赛中，如果 $s_{i}>s_{j}$ 或 $z_{i}>z_{j}$，那么第 $i$ 个机器人将淘汰第 $j$ 个机器人。相应地，如果 $s_{i}<s_{j}$ 或 $z_{i}<z_{j}$，那么第 $j$ 个机器人将淘汰第 $i$ 个机器人。请注意，这意味着在同一场比赛中可能会有两个机器人都被淘汰。如果某个机器人没有在比赛中被淘汰，它可以继续参与后续比赛。

锦标赛的直播收视率最高，当最终所有机器人都被淘汰时。你的任务是检查是否可以安排一系列比赛，使得最终所有机器人都被淘汰。
## 输入格式

输入的第一行包含一个整数 $n\ (1 \leq n \leq 2\cdot 10^5)$。接下来的 $n$ 行描述了机器人的信息。第 $i$ 个机器人的描述包含两个整数 $s_{i}$ 和 $z_{i}\ (1 \leq s_{i}, z_{i} \leq n)$。保证 $s_{1}, s_{2}, \ldots, s_{n}$ 互不相同。保证 $z_{1}, z_{2}, \ldots, z_{n}$ 互不相同。即 $s,z$ 都是 $1 \sim n$ 的两个排列。
## 输出格式

如果可以安排一系列比赛，使得最终所有机器人都被淘汰，则输出 `TAK`。否则，输出 `NIE`。
## 样例

### 样例输入 #1
```
4
1 4
2 2
3 3
4 1
```
### 样例输出 #1
```
TAK
```
### 样例输入 #2
```
2
1 1
2 2
```
### 样例输出 #2
```
NIE
```
### 样例输入 #3
```
见下发 wal1ocen.in
```
### 样例输出 #3
```
见下发 wal1ocen.out
```
### 样例输入 #4
```
见下发 wal2ocen.in
```
### 样例输出 #4
```
见下发 wal2ocen.out
```
### 样例输入 #5
```
见下发 wal3ocen.in
```
### 样例输出 #5
```
见下发 wal3ocen.out
```
### 样例输入 #6
```
见下发 wal4ocen.in
```
### 样例输出 #6
```
见下发 wal4ocen.out
```
### 样例输入 #7
```
见下发 wal5ocen.in
```
### 样例输出 #7
```
见下发 wal5ocen.out
```
## 提示

对于样例一，如果在第一场比赛中第一个和第二个机器人对决，第二场比赛中第三个和第四个机器人对决，那么所有机器人都将被淘汰。

对于样例三，该样例满足 $n=8, s_{i}=i, z_{i}=n-i+1$。

对于样例四，该样例满足 $n=20$，存在一个机器人可以击败所有其他机器人，并且没有机器人可以击败它。

对于样例五，该样例满足 $n=500$，可以将所有机器人配对，使每对机器人互相淘汰。

对于样例六，该样例满足 $n=200000, s_{i}=i$ 且 $z_{i}=i$ 对 $1 \leq i \leq \frac{n}{2}$，并且 $s_{i}=i$ 且 $z_{i}=\frac{3n}{2}-i+1$ 对 $\frac{n}{2}<i \leq n$。

对于样例七，该样例满足 $n=5$。

| 子任务编号 | 特殊性质 | 分值 |
| :-----------: | :----------- | :----------- |
| $1$ | $n \leq 8$ | $10$ |
| $2$ | $n \leq 20$ | $10$ |
| $3$ | $n \leq 1000$ | $30$ |
| $4$ | 无特殊性质 | $50$ |



---

---
title: "[COCI 2024/2025 #1] 等级 / Hijerarhija"
layout: "post"
diff: 普及/提高-
pid: P11389
tag: ['2024', 'COCI（克罗地亚）']
---
# [COCI 2024/2025 #1] 等级 / Hijerarhija
## 题目背景


译自 [COCI 2024/2025 #1](https://hsin.hr/coci/) T3。$\texttt{3s,0.5G}$。满分为 $90$。
## 题目描述


有 $n$ 个节点，给定 $(n-1)$ 对点之间的父子关系。

有 $m$ 个修改，每次给定一对父子，将它们的关系反转（即，原来的父亲变成儿子，儿子变成父亲）。

在第一次修改前，和每次修改后，输出这张图是否是一棵有根树。
## 输入格式

第一行，一个正整数 $n$。

接下来 $(n-1)$ 行，每行两个正整数 $u,v$，表示 $u$ 是 $v$ 的父亲。

接下来一行，一个正整数 $m$。

接下来 $m$ 行，每行两个正整数 $u,v$，表示一次修改。保证 $u,v$ 是父子关系。
## 输出格式


输出 $(m+1)$ 行：

在对应时刻，若是有根树，输出 $\texttt{DA}$（克罗地亚语「是」）；否则输出 $\texttt{NE}$（克罗地亚语「否」）。

**保证至少有一个回答是 $\texttt{DA}$**。
## 样例

### 样例输入 #1
```
3
1 2
1 3
3
1 2
1 2
1 3
```
### 样例输出 #1
```
DA
DA
DA
DA
```
### 样例输入 #2
```
4
2 1
2 3
1 4
4
4 1
4 1
3 2
1 4
```
### 样例输出 #2
```
DA
NE
DA
DA
NE
```
## 提示

对于 $100\%$ 的数据，保证：

- $2\le n\le 3\times 10^5$；    
- $0\le m\le 10^6$；
- $1\le u,v\le n$，$u\neq v$。
- **至少有一个回答是 $\texttt{DA}$**。


| 子任务编号 | $n,m\le$ |  特殊性质 | 得分 |  
| :--: | :--: | :--: |:--: | 
| $ 1 $    | $300$ | A    |   $ 7 $   |  
| $ 2 $    | $300$ |  |  $ 12 $   |  
| $ 3 $    | $10^3$  |  | $ 16 $   |
| $ 4 $    | $3\times 10^5$  | A | $ 15 $   |
| $ 5 $    | $3\times 10^5$  | B | $ 23 $   |
| $ 6 $    | $3\times 10^5$  | | $ 17 $   |

- 特殊性质 A：$m=0$。
- 特殊性质 B：对于 $\forall 1\le i\lt n$，$(i,i+1)$ 间有父子关系。





---

---
title: "排队"
layout: "post"
diff: 普及/提高-
pid: P11396
tag: ['洛谷原创', '洛谷月赛']
---
# 排队
## 题目描述

第一届喵喵喵编程大赛即将开始，本次比赛有 $n$ 只喵喵参赛，编号依次为 $1,2,\ldots, n$，已经分成了若干组，每一组喵喵的编号都是连续的一段。

根据报名情况，你已经知道第 $i$ 只喵喵会第 $p_i$ 个到达现场，保证 $p_i$ 构成 $1\sim n$ 的排列。

一组喵喵的到达时间被定义为这一组喵喵中**最早到达**的喵喵的到达时间。

喵喵的排队规则如下：

- 先把所有的喵喵组按每组喵喵的到达时间从小到大排序。
- 然后对于同一组喵喵，按照每只喵喵的到达时间从小到大排序。

按照这个排队规则，可以得到一个新的排列 $q_1,\ldots,q_n$，其中 $q_i$ 表示从前往后第 $i$ 只喵喵的**到达时间**。

你已经知道了所有 $p_i$，但是不清楚喵喵的分组，你想知道排列 $q_1,q_2,\ldots,q_n$ 的字典序最大可能是什么。
## 输入格式

输入的第一行有一个正整数 $n$，表示喵喵数量。

第二行有 $n$ 个正整数 $p_1,p_2,\ldots,p_n$，表示每只喵喵的到达顺序。
## 输出格式

输出一行 $n$ 个正整数，表示 $q$ 的字典序最大可能。
## 样例

### 样例输入 #1
```
4
2 1 4 3

```
### 样例输出 #1
```
1 4 2 3

```
### 样例输入 #2
```
6
6 5 4 3 2 1

```
### 样例输出 #2
```
1 2 3 4 5 6

```
## 提示

【样例 1 解释】

所有可能的分组情况有 $8$ 种可能，下面分别列出：

|分组情况|最终排列 $q$|
|:-:|:-:|
|$(2)(1)(4)(3)$|$1,2,3,4$|
|$(2)(1)(4,3)$|$1,2,3,4$|
|$(2)(1,4)(3)$|$1,4,2,3$|
|$(2)(1,4,3)$|$1,3,4,2$|
|$(2,1)(4)(3)$|$1,2,3,4$|
|$(2,1)(4,3)$|$1,2,3,4$|
|$(2,1,4)(3)$|$1,2,4,3$|
|$(2,1,4,3)$|$1,2,3,4$|

关于表格，我们以 $(2)(1,4,3)$ 这个分组方式为例，演示排队结果的计算：

- 首先 $(2)$ 这组喵喵的到达时间为第 $2$，$(1,4,3)$ 这组喵喵的到达时间为第 $1$，从而 $(1,4,3)$ 排在前面。
- 然后 $(1,4,3)$ 这组喵喵内部按照到达时间排序，得到 $1,3,4$；$(2)$ 这组喵喵内部按照到达时间排序得到 $2$。
- 最后把每组喵喵的排序结果拼起来，得到 $1,3,4,2$。

【样例 2 解释】

读者不难验证，无论喵喵怎么分组，因为无论组内还是组外都是从小到大排序的，所以 $q_i$ 永远是 $1,2,3,4,5,6$。

【数据范围】

对于全体数据，保证 $1\le n\le 3\times 10^5$，且 $p_i$ 构成 $1\sim n$ 的一个排列。

|子任务编号|$n\le$|特殊性质|分值|
|:-:|:-:|:-:|:-:|
|1|$3$||11|
|2|$16$||16|
|3|$2000$||22|
|4|$3\times 10^5$|A|17|
|5|$3\times 10^5$||34|

- 特殊性质 A：存在 $1\le k\le n$ 使得 $p_1>p_2>\ldots >p_{k-1}> p_k < p_{k+1}<\ldots < p_n$。例如，样例 2 就是 $k=6$ 的情形。


---

---
title: "[Code+#8 初赛] 集合划分"
layout: "post"
diff: 普及/提高-
pid: P11399
tag: ['2022', 'Special Judge', 'Code+']
---
# [Code+#8 初赛] 集合划分
## 题目背景

搬运自 [Code+ #8 初赛](https://gitlink.org.cn/thusaa/codeplus8pre)。
## 题目描述

小 B、小 Y 和小 Z 是形影不离的好朋友，同时也是坚定的 xx 主义者。

这天，他们得到了 $n$ 块蛋糕，第 $i$ 块重量是 $a_i$。 蛋糕不能切开，只能整块地分给某一个人；蛋糕更不能浪费，即每块蛋糕都应归于三个人中的一个。

他们都具有大公无私的奉献精神，因此毫不在意自己分到的蛋糕重量比其他人小；但本着“主义高于友谊”的原则，他们必须保证任何两个人分到的蛋糕重量之和都严格大于第三个人，否则分到重量最小的两个人就会联合起来把旧世界打个落花流水。

由于生产力过度发达，蛋糕的数量和重量都已经远远超出他们的人脑计算能力，于是他们前来请教掌握计算机技术的你，希望你能为他们给出一组合理的分配方案，或确定该方案不存在。
## 输入格式

输入共包含两行。

第一行输入一个正整数 $n$。

第二行输入 $n$ 个正整数 $a_1,a_2,…,a_n$。
## 输出格式

若不存在合法的分配方案，输出 `Internationale!`。

若存在，则输出一个长度为 $n$ 的字符串，每个字符均为 `B`、`Y`、`Z` 中的一个，第 $i$ 个字符代表第 $i$ 块蛋糕的归属。

若有多组合法方案，给出任意一组即可。
## 样例

### 样例输入 #1
```
6
7 5 4 1 2 8
```
### 样例输出 #1
```
ZYBZYB
```
### 样例输入 #2
```
5
1 2 6 1 1
```
### 样例输出 #2
```
Internationale!
```
## 提示

**本题采用子任务评测。你必须通过一个子任务内的全部测试点，才能获得对应的分数。**

对于全部数据，$3\le n\le 2\times 10^5,\ 1\le a_i\le 10^9$。

子任务 $1$（$10$ 分）：保证 $n=3$。

子任务 $2$（$16$ 分）：保证 $n\le 16$。

子任务 $3$（$16$ 分）：保证 $n\le 10^3,a_i\le n$。

子任务 $4$（$28$ 分）：保证存在合法解。

子任务 $5$（$30$ 分）：无特殊限制。


---

---
title: "[EPXLQ2024 fall round] Simple Math Problem"
layout: "post"
diff: 普及/提高-
pid: P11416
tag: []
---
# [EPXLQ2024 fall round] Simple Math Problem
## 题目背景


![](https://cdn.luogu.com.cn/upload/image_hosting/v0535jal.png)

于是原先的 C 变成了 A，原先的 D 变成了 B，原先的 F 变成了 E，然后就有了这道题。

注：想拿到**快速 AK 变换奖**请在代码注释部分写明本题代码复杂度证明。
## 题目描述

Cute_QiQi 有一个可爱的整数 $n$。

现在，Cute_QiQi 想知道有多少个 $m \in (0,n)$，满足 $nm$ 能被 $n-m$ 整除。
## 输入格式

**本题单个测试点内有多组测试数据。**

第一行一个整数 $T$，表示数据组数。

以下 $T$ 行，每行一个整数 $n$。
## 输出格式

输出 $T$ 行，每行一个整数表示答案。
## 样例

### 样例输入 #1
```
2
114
1919
```
### 样例输出 #1
```
13
4
```
## 提示

### 样例解释

当 $n = 114$ 时，可有 $m \in \{38,57,76,78,95,96,102,105,108,110,111,112,113\}$。

当 $n = 1919$ 时，可有 $m \in \{1558,1818,1900,1918\}$。

### 数据规模与约定

**本题采用捆绑测试与子任务依赖。**

设 $p$ 为 $n$ 质因数分解后最大的质数，$p,q$ 均为质数。

| $\text{Subtask}$ | $n \le$ | 特殊性质 | 分值 | 依赖子任务
| :-: | :-: | :-: | :-: | :-: |
| $0$ | $10^{14}$ | $n = p$ | $2$ | |
| $1$ | $10^3$ | |  $7$ | |
| $2$ | $10^6$ | |$11$ | $1$ |
| $3$ | $10^9$ | |$24$ | $1,2$ |
| $4$ | $10^{14}$ | $n = pq$ |  $12$ | |
| $5$ | $10^{14}$ | $p \le 10^6$ |   $15$ | |
| $6$ | $10^{14}$ | |  $29$ | $0,1,2,3,4,5$ |

对于所有数据，$1 \le n \le 10^{14}, 1 \le T \le 10$。


---

---
title: "N角进攻"
layout: "post"
diff: 普及/提高-
pid: P11463
tag: ['O2优化']
---
# N角进攻
## 题目背景

t1e 在篮球课上学习了三角进攻的传球战术，他由此联想到了 $n$ 角进攻，并产生了一些疑问。
## 题目描述

$n$ 角进攻由排成一排的 $n$ 个人发起，初始时球员从左到右依次标号为 $1,2,\cdots, n$，且篮球初始在队伍正中间的 $\frac{n + 1}{2}$ 号球员手中（保证 $n$ 为奇数）。

- 第 $1$ 次传球，正中间的球员可以选择一个方向（左或右），将篮球传递到该方向上距离他最近的球员手中，传球后，正中间的球员从队列中移出，并重新在队列的最左边或最右边插入（与传球方向保持一致）。

- 对于之后的传球，当前处在队列正中间的球员必须选择与上次传递相反的方向，传球后依然是正中间的球员从队列中移出，并重新在队列的最左边或最右边插入（与传球方向保持一致）。

例如，以下是 $n = 3$，初始时中间球员向左边传球，经过 $3$ 次传球后的情况：

```
第 0 次传球后 : 1 2 3 （接下来 2 号球员向左传球）
第 1 次传球后 : 2 1 3 （接下来 1 号球员向右传球）
第 2 次传球后 : 2 3 1 （接下来 3 号球员向左传球）
第 3 次传球后 : 3 2 1 
```

现在 t1e 想知道有 $n$ 名球员，初始时正中间球员向方向 $x$ 传球（$x = 0$ 代表左，$x = 1$ 代表右），经过 $k$ 次传球之后的局面。



## 输入格式

**本题有多组数据**。

第一行一个正整数 $T$，表示数据组数。

对于每组数据：

一行三个整数，分别代表 $n, x, k$。
## 输出格式

对于每组数据：

输出一个 $1$ 到 $n$ 的排列，代表 $k$ 次传球后的最终状态。
## 样例

### 样例输入 #1
```
3
3 0 3
5 1 2
5 1 7
```
### 样例输出 #1
```
3 2 1
4 1 2 5 3
3 5 2 1 4
```
### 样例输入 #2
```
5
7 0 1
7 0 2
7 0 3
7 0 4
7 0 5
```
### 样例输出 #2
```
4 1 2 3 5 6 7
4 1 2 5 6 7 3
5 4 1 2 6 7 3
5 4 1 6 7 3 2
6 5 4 1 7 3 2

```
## 提示

$1 \le T \le 200$，$3 \le n,\sum n \le 2\times 10^5$，$x \in \{0, 1\}$，$0\le k \le 10^{18}$，保证 $n$ 是奇数。


---

---
title: "支配剧场"
layout: "post"
diff: 普及/提高-
pid: P11464
tag: ['O2优化']
---
# 支配剧场
## 题目背景

> May all the beauty be blessed. 
## 题目描述

布洛妮娅和符华在寻找琪亚娜的途中，被支配之律者困在了支配剧场的高塔回廊之中。布洛妮娅敏锐地发现，虚无回廊是由一些支配之律者生成的积木构成的，只要击碎其中一些积木，就能解除空间的限制，让她们逃出高塔回廊。

具体来说，整个高塔回廊可以由一张高为 $n$，宽为 $m$ 的地图表示。第 $1$ 行为空间的最高点，第 $n$ 行为空间的最低点。高塔由 $K$ 块积木堆叠而成，符华每次可以击碎高塔中任意的积木，但必须保证高塔不会倒塌（否则她们会落入虚数空间），以及击碎积木后，高塔回廊的高度不变（即不能把最顶层的积木全部击碎）。

如果一块积木最底层的长度是 $L$，那么当且仅当其**最底层**与地板或者其他积木的接触面积 $L'$ 满足 $L' \ge \left\lceil \frac{L}{2} \right\rceil$ 时，这块积木不会失去平衡。当所有积木**都**不失去平衡时，我们认为整个高塔回廊**不会倒塌**。

积木的最底层长度被定义为**积木行坐标最大的方块总个数**。例如：

```
0 1 0
1 1 1
0 1 0
```
这张图中，$1$ 号积木的最底层长度是 $1$，因为其所占的格子中，行坐标最大的只有一个格子 $(3,2)$。

请帮布洛妮娅计算一下，符华最多能击碎多少个积木？
## 输入格式

第一行两个整数 $n,m$, 表示地图范围。

接下来 $n$ 行，每行 $m$ 个整数。第 $i$ 行第 $j$ 个整数 $a_{i,j}$，表示第 $i$ 行第 $j$ 列的格子属于第 $a_{i,j}$ 块积木。若 $a_{i,j} = 0$，则这个位置是空的。
## 输出格式

一行一个整数，表示符华能击碎的最多的积木块数。
## 样例

### 样例输入 #1
```
5 3
2 2 2
2 3 1
2 3 1
2 3 1
1 1 1
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
5 5
0 0 2 2 2
3 3 2 2 2
3 3 3 2 2
1 2 2 2 4
1 1 1 2 4
```
### 样例输出 #2
```
3
```
## 提示

$1\leq n,m\leq 30$，积木块数 $K$ 满足 $1\leq K \leq 15$，且保证高塔初始一定不会倒塌，同一块积木一定是一个四联通块。

**【样例 1 解释】**

符华可以击碎 $3$ 号积木，这不会导致高塔坍塌，也不会降低高塔的高度。可以证明没有更优的方案。

**【样例 2 解释】**

可以击碎 $1,3,4$ 号积木。


---

---
title: "水上舞者索尼娅"
layout: "post"
diff: 普及/提高-
pid: P11465
tag: ['O2优化', '逆元']
---
# 水上舞者索尼娅
## 题目背景

2024 年 12 月 18 日，《炉石传说》31.2.2 补丁上线，水上舞者索尼娅遭到削弱。现在，在这道题目中，你打开时空之门，回到了水索被削弱前的时候。

![](https://cdn.luogu.com.cn/upload/image_hosting/8et35uji.png)
## 题目描述

你的场上有 $k$ 个【水上舞者索尼娅】，你的手牌中有 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $n$ 根）】，你有无尽的法力值，你的手牌数量没有上限。

在你的场上有 $k$ 个【水上舞者索尼娅】的情况下：

当你使用 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x$ 根）】时，你将得到：
- $k$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $x$ 根）】。
- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x-1$ 根）】。（若 $x=1$，则不会得到）

当你使用 $1$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $x$ 根）】时，你将得到：
- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $x-1$ 根）】。（若 $x=1$，则不会得到）

你一共可以使用多少次【一串香蕉】？

由于答案可能很大，你只需求出答案对 $10^9+7$ 取模的余数。
## 输入格式

**本题有多组数据**。

第一行一个正整数 $T$，表示数据组数。

对于每组数据：

一行两个正整数 $n,k$。
## 输出格式

对于每组数据：

输出一行一个整数，表示答案对 $10^9+7$ 取模的余数。
## 样例

### 样例输入 #1
```
3
2 2
3 1
12 34

```
### 样例输出 #1
```
12
14
178629506

```
## 提示

$1\le T\le10^5$， $1\le n,k\le10^9$。

**【样例解释】**

对于第 $1$ 组数据：

场上有 $2$ 个【水上舞者索尼娅】，初始手牌中有 $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $2$ 根）】。

使用：$1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $2$ 根）】。\
手牌：
- $2$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $2$ 根）】。
- $1$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。

使用：$2$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $2$ 根）】。\
手牌：
- $3$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。

使用：$3$ 张法力值消耗为 $1$ 的【一串香蕉（还剩 $1$ 根）】。\
手牌：
- $6$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $1$ 根）】。

使用：$6$ 张法力值消耗为 $0$ 的【一串香蕉（还剩 $1$ 根）】。\
手牌：
- 空

共使用 $1+2+3+6=12$ 张【一串香蕉】。


---

---
title: "透明立方体"
layout: "post"
diff: 普及/提高-
pid: P11466
tag: ['Special Judge', 'O2优化']
---
# 透明立方体
## 题目背景

NIT 很喜欢观察透明的立方体。
## 题目描述

有一个透明的立方体，设它的长宽高分别为 $n,m,k$（$n\ge m\ge k$）。

立方体中共有 $n\times m\times k$ 个 $1\times1
\times1$ 的小立方体。每个小立方体可由其在三维空间中的坐标 $(a,b,c)$ 表示（$1\le a\le n$，$1\le b\le m$，$1\le c\le k$）。

现将立方体的一部分染黑，我们可以选择一些 $1\times1\times1$ 的小立方体将其染黑。

一个立方体变得不透明，当且仅当从正面，侧面，顶面观察立方体，立方体均不再有透明的地方。

你需要求出最少染黑多少个 $1\times1\times1$ 的小立方体才能使得立方体变得不透明，并给出方案。

若有多个染色数最小的方案，给出任意一个可行方案即可。
## 输入格式

一行三个正整数，表示 $n,m,k$。
## 输出格式

第一行一个整数表示最小的染色数 $x$。

接下来 $x$ 行每行三个正整数 $a,b,c$，表示我们将立方体中 $(a,b,c)$ 这个小立方体染黑了。

你需要保证 $1\leq a\leq n$，$1\leq b\leq m$，$1\leq c\leq k$。
## 样例

### 样例输入 #1
```
3 2 2

```
### 样例输出 #1
```
6
1 1 1
3 1 1
2 1 2
2 2 1
1 2 2
3 2 2

```
## 提示

$1\le k\le m\le n\le 50$。


---

---
title: "[ROIR 2019] 完全平方 (Day 1)"
layout: "post"
diff: 普及/提高-
pid: P11496
tag: ['2019', 'Special Judge', 'ROIR（俄罗斯）']
---
# [ROIR 2019] 完全平方 (Day 1)
## 题目背景

翻译自 [ROIR 2019 D1T2](https://neerc.ifmo.ru/school/archive/2018-2019/ru-olymp-regional-2019-day1.pdf)。
## 题目描述

我们知道序列 $0,0+1,0+1+3,0+1+3+5,\dots,0+1+3+\dots+(2i-1),\dots$ 的第 $i$ 项是 $i^2$，即，这个序列里的数全部都是完全平方数。

现在我们不让这个序列从 $0$ 开始，而是从 $k$ 开始：$k,k+1,k+1+3,k+1+3+5,\dots,k+1+3+\dots+(2i-1),\dots$。

你需要找到这个序列中最小的完全平方数，并输出它的算术平方根。
## 输入格式

输入一个整数 $k$。
## 输出格式

输出序列中最小的完全平方数的算术平方根，如果没有，输出 `none`。
## 样例

### 样例输入 #1
```
0
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
-5
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
2
```
### 样例输出 #3
```
none
```
## 提示

### 样例解释：

- 样例 $1$ 中的序列即为题目中提到的完全平方数序列，其中最小的数是 $0$，$\sqrt0=0$。
- 样例 $2$ 中的序列为 $-5,-4,-1,4,11,20,\dots$，其中最小的完全平方数是 $4$，$\sqrt4=2$。
- 样例 $3$ 中的序列为 $2,3,6,11,18,\dots$，可以证明其中不存在完全平方数。

### 数据范围：

数据中 Subtask 0 为样例。

| 子任务 | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $7$ | $0\le k\le1000$ |
| $2$ | $10$ | $0 \leq k \leq 10^5$ |
| $3$ | $27$ | $0 \leq k \leq 10^{12}$ |
| $4$ | $7$ | $-1000 \leq k \leq 1000$ |
| $5$ | $10$ | $-10^5 \leq k \leq 10^5$ |
| $6$ | $39$ | $-10^{12} \leq k \leq 10^{12}$ |


---

---
title: "[ROIR 2017] 计算器 (Day 1)"
layout: "post"
diff: 普及/提高-
pid: P11507
tag: ['2017', 'Special Judge', 'ROIR（俄罗斯）']
---
# [ROIR 2017] 计算器 (Day 1)
## 题目背景

翻译自 [ROIR 2017 D1T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day1.pdf)。
## 题目描述

今天的信息技术课作业要求设计一个特殊的计算器，该计算器的工作方式如下：

首先，用户输入一个正整数 $n$，该数字会被显示在屏幕上。然后，用户可以按下三个按钮：A，B 和 C。

- 按下按钮 A 时，屏幕上的数字将除以 $2$，向下取整。例如，对于数字 $114$，执行此操作后结果为 $57$；对于数字 $191$，结果为 $95$。
- 按下按钮 B 时，屏幕上的数字加 $1$，然后再除以 $2$，向下取整。例如，对于数字 $114$，执行此操作后结果为 $57$；对于数字 $191$，结果为 $96$。
- 按下按钮 C 时，执行以下操作：如果屏幕上的数字大于 $0$，则减去 $1$ 后除以 $2$，向下取整；如果屏幕上的数字是 $0$，则数字保持不变。例如，对于数字 $114$，执行此操作后结果为 $56$；对于数字 $191$，结果为 $95$。

用户输入了数字 $n$，并将按一定顺序按下操作按钮。具体地，用户将会按下按钮 A 共 $a$ 次，按下按钮 B 共 $b$ 次，按下按钮 C 共 $c$ 次。你需要求出在执行这些操作后最小可能得到的数字是多少。
## 输入格式

输入一行四个整数 $n,a,b,c$（$1 \leq n \leq 10^{18}$，$0 \leq a, b, c \leq 60$）。
## 输出格式

输出一个整数表示答案。
## 样例

### 样例输入 #1
```
72 2 1 1
```
### 样例输出 #1
```
4
```
## 提示

### 样例解释

用户可以依次按下按钮 B，A，C，A，屏幕上的数字将会这样变化：$72\to36\to18\to8\to4$。

### 数据范围

| 子任务 | 分值 | $1\le n\le$ | 其它特殊性质 |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $26$ | $10^9$ | $0\le a+b+c\le7$ |
| $2$ | $23$ | $10^{18}$ | $c=0$ |
| $3$ | $24$ | $10^{18}$ | $b=0$ |
| $4$ | $27$ | $10^{18}$ | 无特殊性质 |


---

---
title: "[ROIR 2017] 大型直线对撞机 (Day 2)"
layout: "post"
diff: 普及/提高-
pid: P11511
tag: ['2017', 'Special Judge', 'ROIR（俄罗斯）']
---
# [ROIR 2017] 大型直线对撞机 (Day 2)
## 题目背景

翻译自 [ROIR 2017 D2T2](https://neerc.ifmo.ru/school/archive/2016-2017/ru-olymp-regional-2017-day2.pdf)。
## 题目描述

科学家在一个国际科学实验室里进行研究，研究的是粒子在大型直线对撞机（简称：BLC）实验装置中的行为。BLC 呈一条直线，粒子被放置在这条直线上的某些点上，粒子可以沿着这条直线移动。

在本次实验中，BLC 上放置了 $n$ 个粒子，每个粒子要么是带一个单位负电荷的电子（$e^-$），要么是带一个单位正电荷的正电子（$e^+$）。第 $i$ 个粒子最初被放置在坐标 $x_i$ 的位置。实验开始后，粒子会沿直线向不同的方向移动：$e^-$ 沿负方向移动，而 $e^+$ 则沿正方向移动。所有粒子的速度绝对值相同，均为 $1$。

如果在移动过程中，$e^-$ 和 $e^+$ 在某一位置碰撞，它们会相互作用并湮灭。它们的湮灭不会影响其他粒子的行为。

科学家们选择了 $m$ 个不同的时间点 $t_1, t_2, \dots, t_m$ 对 BLC 中的粒子进行观测。对于每个时间点，他们希望知道，在每个时间点之后，BLC 还剩下多少个粒子。时间从 $0$ 开始。恰好在观测的时间点湮灭的粒子不应被计入粒子总数。

你需要编写一个程序，根据粒子的初始位置和类型，以及给定的观测时间点，来计算每个时间点后 BLC 中剩余的粒子数。
## 输入格式

第一行包含一个整数 $n$，表示粒子的数量（$1 \leq n \leq 200000$）。

接下来的 $n$ 行，每行包含两个整数 $x_i$ 和 $v_i$，分别表示第 $i$ 个粒子的坐标和类型（$-10^9 \leq x_1 < x_2 < \dots < x_n \leq 10^9$，其中 $v_i = -1$ 表示电子 $e^-$，$v_i = 1$ 表示正电子 $e^+$）。

接下来一行包含一个整数 $m$，表示观测时间点的数量（$1 \leq m \leq 200000$）。

最后一行包含 $m$ 个整数 $t_1, t_2, \dots, t_m$，表示科学家选择观测的时间点（$0 \leq t_1 < t_2 < \dots < t_m \leq 10^9$）。
## 输出格式

对于每个观测时间点，输出一个整数，表示该时间点之后 BLC 中剩余的粒子数量。
## 样例

### 样例输入 #1
```
4
-1 1
0 -1
1 1
5 -1
4
0 1 2 3
```
### 样例输出 #1
```
4
2
0
0
```
## 提示

### 样例解释

在样例中，初始时 BLC 中有 4 个粒子：一个 $e^+$ 粒子在坐标 $-1$，一个 $e^-$ 粒子在坐标 $0$，一个 $e^+$ 粒子在坐标 $1$，一个 $e^-$ 粒子在坐标 $5$。

- 在时间 $0.5$ 时，第一个 $e^+$ 粒子和第一个 $e^-$ 粒子碰撞，在坐标 $-0.5$ 处湮灭。
- 在时间 $1$ 时，剩余的两颗粒子在坐标 $2$ 和 $4$。
- 在时间 $2$ 时，这两个粒子在坐标 $3$ 处碰撞并湮灭。
- 在时间 $3$ 时，BLC 中没有剩余粒子。

### 数据范围

| 子任务 | 分值 | $1\le n\le$ | $\vert x_i\vert\le$ | $1\le m\le$ | $0\le t_i\le$ |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | $35$ | $100$ | $100$ | $1$ | $100$ |
| $2$ | $12$ | $100$ | $10^9$ | $1$ | $10^9$ |
| $3$ | $12$ | $200000$ | $10^9$ | $1$ | $10^9$ |
| $4$ | $41$ | $200000$ | $10^9$ | $200000$ | $10^9$ |


---

---
title: "[Code+#5] 逻辑树"
layout: "post"
diff: 普及/提高-
pid: P11540
tag: ['Code+']
---
# [Code+#5] 逻辑树
## 题目背景

**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。


## 题目描述

有一棵树，叫逻辑树。

这个树有根，有 $2N-1$ 个节点，其中 $N$ 个叶子，每个非叶节点恰好有两个孩子。

每个叶子上有一个 01 变量，它的取值可能为 True 或 False。每个非叶节点上有一个逻辑运算符，这个运算可能为 AND 或者 OR。

一个非叶节点的取值定义为它两个儿子的取值，作这个节点上的运算得到的结果。

有一个黑恶势力想知道这个树的根节点的取值，他准备了一个长度为 $N$ 的询问序列 $\{P_i\}$，每个叶子在这个序列中恰好出现一次。

黑恶势力会依次询问这些叶子的值，**但是**，如果他发现某一次询问是不必要的，那么他会跳过这个无意义的询问（为了帮助理解，考虑 x AND y 在我们知道 x 为 False 之后，不必知道 y 的值就可推算 x AND y 的值）。

当然，邪恶总是能战胜正义，黑恶势力总能达到他的目的。但是我们可以拖慢他的节奏，你现在可以安排每个叶子的权值，使得黑恶势力询问的次数尽可能多，在此基础上，我们希望这个树的根节点取值尽量为 True。

请你计算一组解，任何一种合法方案都是可以接受的。
## 输入格式

第一行一个整数 $N$，意义如题面所示。

接下来一行 $N-1$ 个整数，第 $i$ 个数代表节点 $N+i$ 上的运算符，其中 $0$ 表示 `AND`，$1$ 表示 `OR`。

接下来 $2N-2$ 行，每行两个整数，描述一条边。

最后一行 $N$ 个整数，表示黑恶势力的询问序列。

你可以认为 $1\sim N$ 是叶子，$N+1\sim 2N-1$ 是非叶节点，且 $N+1$ 是根，输入数据保证每个非叶节点有两个孩子。
## 输出格式

输出一个长度为 $N$ 的 01串 $S$，其中 $S_i$ 表示第 $i$ 个叶子的取值，$0$ 为 False, $1$ 为 True.
## 样例

### 样例输入 #1
```
4
0 1 0
5 6
5 7
6 1
6 2
7 3
7 4
4 2 3 1

```
### 样例输出 #1
```
1011
```
## 提示

**数据范围：**

$\def\arraystretch{1.21}
\begin{array}{|c|c|c|}\hline
\bold{\small{子任务}}&\textbf{score}&\textbf{constraints}\\\hline
\text{A}&40&\small{树的高度不超过 50}\\\hline
\text{B}&60&\small{无特殊限制}\\\hline
\end{array}$

对于所有数据，$N\le 5\times 10^5$。

对于所有数据，保证 $1\le m<n\le1000$，$1\le k\le10000$，$1\le p_i\le n,1\le x_i\le m$，$p_i$ 互不相等。



---

---
title: "[Code+#5] 监控中心"
layout: "post"
diff: 普及/提高-
pid: P11545
tag: ['Code+']
---
# [Code+#5] 监控中心
## 题目背景

**题目来源：**[link](https://www.gitlink.org.cn/thusaa/codeplus5)。
## 题目描述

随着战争的推进，C 国已经在 D 国的 $n$ 个城市中的每个城市，都至少建立了一个情报中心。除此之外，TAC 规划了 $m$ 条双向的信息传输通道，其中第 $i$ 条形如 $(a_i,b_i)$，表示在城市 $a_i$ 和城市 $b_i$ 之间可以直接传递、交换情报。经过合理规划，任意两个城市之间都可以直接或间接地传递情报。

然而 D 国的军队也不是吃素的。在军队的秘密围剿下，一些城市的情报中心可能会被歼灭而失效。如果一个城市 $c$ 的情报中心失效了，那么所有和 $c$ 有传输通道的、还未失效的城市将会无法发送情报，总而将这条错误信息报告到总部。即如果有一条形如 $(a,b)$ 的传输通道，那么就会有这样四种情况：

- $a$ 和 $b$ 的情报中心同时有效，那么传输正常，没有错误信息；

- $a$ 的情报中心有效而 $b$ 的情报中心被歼灭，则 $a$ 的情报中心会报告“无法给 $b$ 发送信息”的错误信息；

- $b$ 的情报中心有效而 $a$ 的情报中心被歼灭，则 $b$ 的情报中心会报告“无法给 $a$ 发送信息”的错误信息；

- $a$ 和 $b$ 的情报中心同时被歼灭，则两个城市都无法发出错误信息。

现在，TAC 有 $q$ 个事件。在每个事件中，TAC 得到了若干条错误信息。请你根据这些错误信息，确定出**被歼灭的**的情报中心的个数。注意：不同的事件是**独立**的；并且**至少存在一个**有效的情报中心。

## 输入格式

第一行两个整数 $n$，$m$，表示城市的个数和传输通道的个数；

接下来 $m$ 行，每行 $(a_i,b_i)$（$1\le i\le m$），表示一条传输通道；

接下来一行一个整数 $q$；

接下来 $q$ 行，每行 $c_i+1$ 个数，其中第一个数为 $c_i$ 表示错误信息的个数，接下来有 $c_i$ 个数 $e_1,e_2,\cdots,e_{c_i}$；其中如果 $e_i > 0$，表示 $a_{e_i}$ 因为无法给 $b_{e_i}$ 发送信息而发出错误信息，否则表示 $b_{-e_i}$ 因为无法给 $a_{-e_i}$ 发送信息而发出错误信息。
## 输出格式

输出 $q$ 行，每行一个整数，表示每个事件**被歼灭**的情报中心的个数。
## 样例

### 样例输入 #1
```
7 6
1 2
2 3
3 4
4 5
5 6
6 7
6
1 1 
1 2 
1 3 
2 1 2
3 2 3 4
1 5
```
### 样例输出 #1
```
6
5
4
11
12
2
```
## 提示

**数据范围：**


$\def\arraystretch{1.44}
\begin{array}{|c|c|c|}\hline
\bold{\small{子任务}}&\textbf{score}&\textbf{constraints}\\\hline
\text{A}&20&1\le N\le 10^5,m=n-1,b_i-a_i=1,\sum c\le 10^6\\\hline
\text{B}&30&1\le N\le10^5,m=n-1,\sum c\le10^6\\\hline
\text{C}&20&m=n-1\\\hline
\text{D}&30&\small{无特殊限制}\\\hline
\end{array}$

对于所有数据，保证 $1\le n\le 10^6$，$0\le m\le 2.5\times 10^6$，$1\le q,\sum_{i=1}^q c_i \le 10^7$。


---

---
title: "[ROIR 2016] 太空移民 (Day 1)"
layout: "post"
diff: 普及/提高-
pid: P11552
tag: ['2016', 'ROIR（俄罗斯）']
---
# [ROIR 2016] 太空移民 (Day 1)
## 题目背景

翻译自 [ROIR 2016 D1T2](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day1.pdf)。
## 题目描述

为了开发火星，必须建立一个研究基地。基地应该由 $n$ 个相同的矩形模块组成。每个模块都是一个居住舱，其大小为 $a \times b$。

为了提高模块的可靠性，工程师们可以在每个模块周围添加一层额外的保护层。该保护层的厚度应为一个整数，并且所有模块的保护层厚度必须相同。保护层厚度为 $d$ 的模块，其大小为 $(a + 2d) \times (b + 2d)$。

所有模块必须放置在一个提前准备好的矩形区域内，区域的大小为 $w \times h$。所有模块的边要与这个矩形区域的边平行，且所有模块的朝向必须一致（即，必须全部横着放或全部竖着放）。

你需要求出可以给每个模块添加的最大保护层厚度是多少。
## 输入格式

输入五个数 $n,a,b,w,h$（$1\le n,a,b,w,h\le10^{18}$），用空格隔开。
## 输出格式

输出一个整数，表示可以为每个模块添加的最大保护层厚度。如果无法添加保护层，则可以添加的厚度为 $0$。
## 样例

### 样例输入 #1
```
11 2 3 21 25
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
1 5 5 6 6
```
### 样例输出 #2
```
0
```
## 提示

### 样例解释

样例 $1$ 图示：

![](https://cdn.luogu.com.cn/upload/image_hosting/6b9dfczt.png)

### 数据范围

| 子任务 | 是否捆绑 | 分值 | $1\le n\le$ | $1\le a,b,w,h\le$ |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | 是 | $26$ | $1000$ | $1000$ |
| $2$ | 是 | $23$ | $1000$ | $10^9$ |
| $3$ | 否 | $24$ | $10^9$ | $10^{18}$ |
| $4$ | 否 | $27$ | $10^{18}$ | $10^{18}$ |


---

---
title: "[ROIR 2016] 超级跳棋 (Day 2)"
layout: "post"
diff: 普及/提高-
pid: P11556
tag: ['2016', 'Special Judge', 'ROIR（俄罗斯）']
---
# [ROIR 2016] 超级跳棋 (Day 2)
## 题目背景

翻译自 [ROIR 2016 D2T2](https://neerc.ifmo.ru/school/archive/2015-2016/ru-olymp-regional-2016-day2.pdf)。
## 题目描述

Andrey 是超级跳棋比赛的裁判。每场比赛中有三名玩家参与。每个玩家在比赛过程中会得到一定的正整数分数。如果在比赛结束时，第一个玩家得到了 $a$ 分，第二个玩家得到了 $b$ 分，第三个玩家得到了 $c$ 分，那么我们说比赛以得分 $a\;\!\text:\;\!b\;\!\text:\;\!c$ 结束。

Andrey 知道超级跳棋的规则要求，比赛结果中任何两个玩家的得分之比最多为 $k$。比赛结束后，Andrey 将显示比赛结果，将三张写有玩家得分的卡片放到专门的显示屏上。Andrey 有 $n$ 张这样的卡片，上面写的数字分别是 $x_1,x_2,\dots,x_n$。

为了测试自己为比赛做好了多少准备，Andrey 希望知道，使用他拥有的 $n$ 张卡片，他能在显示屏上显示多少种不同的得分组合。
## 输入格式

第一行输入两个整数 $n,k$（$3 \leq n \leq 100000$，$1 \leq k \leq 10^9$）。

第二行输入 $n$ 个整数 $x_1, x_2, \dots, x_n$ （$1 \leq x_i \leq 10^9$）。
## 输出格式

输出一个整数，表示 Andrey 可以在显示屏上显示的不同得分组合的数量。
## 样例

### 样例输入 #1
```
5 2
1 1 2 2 3
```
### 样例输出 #1
```
9
```
## 提示

### 样例解释

在样例中，Andrey 可以显示的得分组合有：$1\;\!\text:\;\!1\;\!\text:\;\!2,\;\! 1\;\!\text:\;\!2\;\!\text:\;\!1,\;\! 2\;\!\text:\;\!1\;\!\text:\;\!1,\;\! 1\;\!\text:\;\!2\;\!\text:\;\!2,\;\! 2\;\!\text:\;\!1\;\!\text:\;\!2,\;\! 2\;\!\text:\;\!2\;\!\text:\;\!1,\;\! 2\;\!\text:\;\!2\;\!\text:\;\!3,\;\! 2\;\!\text:\;\!3\;\!\text:\;\!2,\;\! 3\;\!\text:\;\!2\;\!\text:\;\!2%吐槽：这个间距太难调整了！！！11$。

其它用现有卡片组成的三元组不满足条件，因为这样会出现两个玩家的得分之比超过了 $k = 2$ 的情况。

### 数据范围

| 子任务 | 是否捆绑 | 分值 | $3\le n\le$ | $1\le k\le$ | $1\le x_i\le$ | 其它特殊性质 |
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | 是 | $15$ | $100000$ | $1$ | $100000$ |  |
| $2$ | 是 | $23$ | $100$ | $100$ | $100$ |  |
| $3$ | 是 | $30$ | $100000$ | $10^9$ | $10^9$ | 所有 $x_i$ 互不相同 |
| $4$ | 是 | $32$ | $100000$ | $10^9$ | $10^9$ |  |


---

---
title: "「chaynOI R1 T2」画图软件"
layout: "post"
diff: 普及/提高-
pid: P11569
tag: ['O2优化']
---
# 「chaynOI R1 T2」画图软件
## 题目背景

### 14:27 添加了 T2 样例解释。

![](https://cdn.luogu.com.cn/upload/image_hosting/g3femwbe.png)

## 题目描述

给你一个序列 $a$，你可以进行不超过 $k$ 次「落笔」操作，每次选择一个 $p(1\le p\le n)$ 使得 $a_p \gets a_p +1$（即让 $a$ 中的第 $p$ 项加上 $1$），求出让 $a$ 为非负公差的等差数列的最终序列可能的情况数。
## 输入格式

第一行两个整数 $n,k$。

第二行 $n$ 个整数，表示序列 $a$。

## 输出格式

一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
5 6
1 2 3 4 5
```
### 样例输出 #1
```
2
```
## 提示

### 样例解释

共 $(1,2,3,4,5),(2,3,4,5,6)$，$2$ 种。

### 数据范围

对于 $100\%$ 的数据，$1 \le n,a_i \le 10^6$，$k\le 10^7$。

**本题采用捆绑测试。**

+ Subtask 1(20pts)：$n,k \le 100$。
+ Subtask 2(15pts)：$n \le 100$。
+ Subtask 3(15pts)：$k \le 10^5$。
+ Subtask 4(50pts)：无特殊限制。


---

---
title: "[CCC 2020] Escape Room"
layout: "post"
diff: 普及/提高-
pid: P11580
tag: ['2020', 'CCC（加拿大）']
---
# [CCC 2020] Escape Room
## 题目背景

本题译自 [Canadian Computing Competition](https://cemc.uwaterloo.ca/resources/past-contests?contest_category=29) [2020 Senior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCSrProblemSet.html) T2/[2020 Junior](https://cemc.uwaterloo.ca/sites/default/files/documents/2020/2020CCCJrProblemSet.html) T5 Escape Room。

## 题目描述

你需要判断是否可以从一个房间逃脱。房间是一个 $m$ 行 $n$ 列的矩阵，每个位置包含一个正整数。我们用 $(x,y)$ 表示第 $x$ 行，第 $y$ 列的单元格。

当你从 $(1,1)$ 开始，并成功走到 $(m,n)$ 时，你便成功逃脱了。如果你在一个包含值 $num$ 的单元格中，那么若你可以跳到 $(x,y)$，当前仅当 $x \times y=num$。例如，如果你在一个包含 $6$ 的单元格中，你可以跳到单元格 $(2,3)$。
## 输入格式

第一行一个整数 $m(1 \le m \le 1000)$，表示网格的列数。

第二行一个整数 $n(1\le n \le 1000)$，表示网格的行数。

接下来 $m$ 行，每行 $n$ 个整数，表示当前格子中的值 $num(1 \le num \le 10^6)$。
## 输出格式

如果可以从房间逃脱，则输出 `yes`。否则输出 `no`。
## 样例

### 样例输入 #1
```
3
4
3 10 8 14
1 11 12 12
6 2 3 9
```
### 样例输出 #1
```
yes
```
## 提示

#### 【样例解释】
从 $(1,1)$ 开始，其包含的值为 $3$，从这里可以跳到单元格 $(1,3)$。

这个单元格包含 $8$，因此从这里可以跳到单元格 $(2,4)$。

这个单元格包含 $12$，因此从这里可以跳到单元格 $(3,4)$。
#### 【数据范围】
**本题采用捆绑测试**。

由于原题 Subtask 分值，本题满分 105 分。
| Subtask | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: |
| 1 | $m=n=2$ | 7 |
| 2 | $m=1$ | 14 |
| 3 | 所有单元格中的整数是唯一的 | 28 |
| 4 | $1\le m,n \le200$ | 28 |
| 5 | 无 | 28 |


---

---
title: "[NOISG 2018 Finals] Lightning Rod"
layout: "post"
diff: 普及/提高-
pid: P11596
tag: ['2018', 'O2优化', 'NOISG（新加坡）']
---
# [NOISG 2018 Finals] Lightning Rod
## 题目背景

译自 [NOISG 2018 Finals C. Lightning Rod](https://github.com/noisg/sg_noi_archive/tree/master/2018/tasks/lightningrod)。
## 题目描述

新加坡的城市天际线可以看成一个平面直角坐标系，第 $i$ 栋大楼的顶端是点 $(X_i,Y_i)$。

一根避雷针可以安装在大楼的顶端上。它的保护区域为从该大楼顶端向左下方和右下方作两条与坐标轴呈 $45^\circ$ 的射线所产生的 $\frac{1}{4}$ 平面。所有顶端在该保护区域内或落在保护区域边缘上的大楼都可以被保护到。

换句话说，若避雷针安装在大楼 $i$ 上，则所有且仅所有满足 $|X_i-X_j|\le Y_i-Y_j$ 的大楼 $j$ 可以被该避雷针保护到。

你的任务是找出最少的安装避雷针数量，使得所有大楼都可以被至少一根避雷针保护到。
## 输入格式

第一行一个正整数 $N$，表示大楼的总数。

接下来 $N$ 行每行两个正整数 $X_i,Y_i$，表示第 $i$ 栋大楼的顶端是 $(X_i,Y_i)$。**保证 $X_i$ 按照输入顺序单调不递减**。

注意：本题输入量较大，请使用较快的输入方式。我们在下发文件中下发了三种语言实现的快速读入模板。
## 输出格式

一行一个整数，表示最少的安装避雷针数量。
## 样例

### 样例输入 #1
```
2
1 1
2 1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2
1 0
2 1
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
4
1 1
3 2
4 3
5 1
```
### 样例输出 #3
```
2
```
## 提示

### 样例 #1 解释

所有大楼都需要安装避雷针。

这组样例满足所有子任务。

### 样例 #2 解释

在大楼 $2$ 的顶端安装避雷针。

这组样例满足子任务 $2$ 至 $7$。

### 样例 #3 解释

![](https://cdn.luogu.com.cn/upload/image_hosting/glq0s3hc.png)

如图所示，在大楼 $1$ 和大楼 $3$ 的顶端安装避雷针。

这组样例满足子任务 $3,4,5,7$。

### 子任务

对于 $100\%$ 的数据，$2\le N\le 10^7$，$0\le X_i,Y_i\le 10^9$。

| 子任务 | 得分 | $N$ | $X_i,Y_i$ |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $4$ | 无特殊限制 | $Y_i=1$ |
| $2$ | $7$ | $=2$ | 无特殊限制 |
| $3$ | $12$ | $\le20$ | 无特殊限制 |
| $4$ | $21$ | $\le 2\times 10^3$ | 无特殊限制 |
| $5$ | $26$ | $\le 2\times 10^5$ | 无特殊限制 |
| $6$ | $10$ | 无特殊限制 | $X_i=i,Y_i\le 1$ |
| $7$ | $20$ | 无特殊限制 | 无特殊限制 |



---

---
title: "『Fwb』黑巧の安排"
layout: "post"
diff: 普及/提高-
pid: P11602
tag: []
---
# 『Fwb』黑巧の安排
## 题目描述

Fwb 可喜欢吃黑巧了。

Fwb 有一个专门用来装黑巧的盒子，但很不巧，今天盒子空了，Fwb 又该出去买点巧克力了。

由于 Fwb 也知道吃多了巧克力对身体不好，所以他决定他买的巧克力必须只能吃 $a$ 天，且不能多也不能少。

Fwb 吃巧克力是有规律的：他会在第一天吃一块巧克力，在品尝到巧克力的美味后，第二天吃两块巧克力，第 $i$ 天吃 $2^{i-1}$ 块巧克力（$i>0$）。

当剩余的巧克力不够一天吃的时候，Fwb 就会选择不吃；反之，当剩余的巧克力够一天吃的时候，Fwb 就一定会吃。

若在第 $i$ 天吃完的巧克力之后仍剩余 $k$ 颗，且 $k<2^i$，则 Fwb 会在第 $i+1$ 天再次吃 $1$ 颗，在第 $i+2$ 天再次吃 $2$ 颗，以此类推。换句话说，当 $k<2^i$ 时，第 $i+m$ 天会吃 $2^{m-1}$ 颗。

现在需要你求出，Fwb 在恰好吃 $a$ 天的前提下，最少需要购买多少颗巧克力。
## 输入格式

**本题包含多组测试数据。**

第一行输入一个正整数 $t$，表示数据组数。

接下来 $t$ 行，每行包含一个正整数 $a$，代表 Fwb 购买的巧克力需要恰好吃 $a$ 天。
## 输出格式

输出共 $t$ 行。对于每一个输入的 $a$，输出一个正整数代表 Fwb 至少需要购买的巧克力数量。
## 样例

### 样例输入 #1
```
3
5
2
3
```
### 样例输出 #1
```
9
2
4
```
### 样例输入 #2
```
6
263
749
409
761
729
382
```
### 样例输出 #2
```
16760809
1095216660441
939524067
1099510579161
549755805658
503316452
```
## 提示

#### 【样例 1 解释】

第一次询问：要求恰好 $5$ 天吃完，则买 $9$ 颗巧克力。安排如下：

- 第一天吃 $1$ 颗，剩余 $8$ 颗。
- 第二天吃 $2$ 颗，剩余 $6$ 颗。
- 第三天吃 $4$ 颗，剩余 $2$ 颗。
- 不够 $8$ 颗，第四天只能再从 $1$ 颗吃起，剩余 $1$ 颗。
- 不够 $2$ 颗，第五天只能再从 $1$ 颗吃起，吃 $1$ 颗，恰好吃完。

可以证明，没有更优的安排。

第二次询问：要求恰好两天吃完，买 $2$ 颗巧克力，每天 $1$ 颗即可。

第三次询问：要求恰好三天吃完，买 $4$ 颗巧克力，每天分别吃 $1,2,1$ 颗。

#### 【数据范围】

对于 $30\%$ 的数据，$1\le a\le 10$。

对于 $100\%$ 的数据，$1\le t,a\le 1000$。

保证答案在 $long\ long$ 范围内。


---

---
title: "Max,Mex"
layout: "post"
diff: 普及/提高-
pid: P11638
tag: ['洛谷原创', 'O2优化', 'Ad-hoc', '洛谷比赛']
---
# Max,Mex
## 题目背景

**hack 数据已添加，位于 Subtask#5，不计分。**

**请注意本题特殊的空间限制。**

本题中定义 $\max\{S\}$ 为 $S$ 中的最大值，$\operatorname{mex}\{S\}$ 为 $S$ 中最小没出现过的自然数。
## 题目描述

给定一个长度为 $n$ 的序列 $a$。

一次操作你可以选定一个 $(i,j)$，满足 $1\le i,j\le n$ 以及 $i\neq j$，令 $x=\max\{a_i,a_j\}$，$y=\operatorname{mex}\{a_i,a_j\}$，那么 $a_i=x$，$a_j=y$。

请问进行若干次操作后，$\sum_{i=1}^n a_i$ 最大为多少？
## 输入格式

第一行一个正整数 $n$。

第二行 $n$ 个正整数，第 $i$ 个为 $a_i$。
## 输出格式

一行一个整数，为问题的答案。
## 样例

### 样例输入 #1
```
6
0 0 4 5 1 4
```
### 样例输出 #1
```
18
```
## 提示

**【样例解释】**

操作 $(5,1)$，$(5,2)$，答案为 $2+2+4+5+1+4=18$。

**【数据范围】**

- Subtask#1（$10\text{pts}$）：$n=1$，**空间限制 4MB**；
- Subtask#2（$20\text{pts}$）：$a_i\ge 2$，**空间限制 512MB**；
- Subtask#3（$30\text{pts}$）：无特殊限制，**空间限制 512MB**。
- Subtask#4（$40\text{pts}$）：无特殊限制，**空间限制 4MB**。
- Subtask#5（$0\text{pts}$）：hack，**空间限制 512MB**。


对于 $100\%$ 的数据，$1\le n\le 10^6$，$0\le a_i\le 10^9$。


---

---
title: "【MX-X8-T2】「TAOI-3」终有一天，飞向水平线的彼方"
layout: "post"
diff: 普及/提高-
pid: P11643
tag: ['O2优化', '梦熊比赛']
---
# 【MX-X8-T2】「TAOI-3」终有一天，飞向水平线的彼方
## 题目背景

原题链接：<https://oier.team/problems/X8C>。

---

天与海交界的地方，到底哪边更深呢？

## 题目描述

Mio 有一个长度为 $n$ 的正整数数列 $a_1, \ldots, a_n$。她会对这个序列进行若干次操作，每次她会选择一对正整数 $l,r$，满足 $1 \le l \le r \le n$，且 $(r-l+1)$ 为偶数，然后进行以下两种操作中的一种：

- 对于所有整数 $i \in [l,r]$，令 $a_i \gets a_i+\left(|i-\frac{r+l}{2}|+\frac{1}{2}\right)$。
- 对于所有整数 $i \in [l,r]$，令 $a_i \gets a_i-\left(|i-\frac{r+l}{2}|+\frac{1}{2}\right)$。

形象化地，你可以把这理解为，选择某区间内最中间的数作为中轴，然后把区间内的所有数加上或减去它与中轴的距离。例如，如果选择 $l=1$，$r=8$，效果就是把数列的前 $8$ 个数分别加上或减去 $4,3,2,1,1,2,3,4$。

在 Mio 的操作中，她希望任意时刻数列里的所有数都是正整数。

现在，Mio 想要知道，能否用这样的操作把数列 $a_1, \ldots, a_n$ 变成目标正整数数列 $b_1, \ldots, b_n$。
## 输入格式

**本题有多组测试数据。**

第一行，一个正整数 $T$，表示测试数据组数。对于每组数据：
- 第一行，一个正整数 $n$。
- 第二行，$n$ 个正整数 $a_1, \ldots, a_n$。
- 第三行，$n$ 个正整数 $b_1, \ldots, b_n$。
## 输出格式

$T$ 行，对于每组数据，若 Mio 能够达成她的目的，输出一行 `Yes`，否则输出一行 `No`。
## 样例

### 样例输入 #1
```
2
5
1 3 4 3 3
2 2 3 2 1
5
1 2 1 1 1
1 1 1 2 2

```
### 样例输出 #1
```
Yes
No

```
## 提示

**【样例解释】**

对于第一组数据，一种合法的方案为：

先选取 $l=2$，$r=5$ 进行一次减少操作，数列变为 $[1,1,3,2,1]$。

再选取 $l=1$，$r=2$ 进行一次增加操作，数列变为 $[2,2,3,2,1]$。

对于第二组数据，可以证明不存在合法的方案。

**【数据范围】**

对于 $20\%$ 的数据，$n \le 5$，$a_i,b_i \le 4$。

对于另外 $40\%$ 的数据，$\forall 1 \le i \le j \le n$，$a_i=a_j$，$b_i=b_j$。

对于所有数据，保证 $1 \le T \le 5$，$1 \le n \le 10^5$，$1 \le a_i,b_i \le 10^9$。


---

---
title: "[JOI 2025 Final] 方格染色 / Grid Coloring"
layout: "post"
diff: 普及/提高-
pid: P11662
tag: ['2025', 'JOI（日本）']
---
# [JOI 2025 Final] 方格染色 / Grid Coloring
## 题目背景

译自 [第24回日本情報オリンピック 本選](https://contests.ioi-jp.org/joi-ho-2025/index.html) T1。

## 题目描述


要把一个 $N\times N$ 的网格图染色。我们记第 $i$ 行第 $j$ 列的格子为 $(i,j)$。

第一行和第一列的格子已经被染了色。具体地，$\forall 1\le i\le N$，格子 $(i,1)$ 的颜色为 $A_i$，格子 $(1,i)$ 的颜色为 $B_i$。根据定义 $A_1=B_1$。

对于剩下的格子，考虑如下的染色过程：

- 对于 $i=2,3,\cdots,N$，按如下的方案染色第 $i$ 行：
    - 对于 $j=2,3,\cdots,N$，按如下的方案染色格子 $(i,j)$：
        - 记 $\operatorname{color}(i,j)$ 为格子 $(i,j)$ 的颜色（对应的数字）。则 $\operatorname{color}(i,j)=\max(\operatorname{color}(i-1,j),\operatorname{color}(i,j-1))$。

在染色结束后，输出哪种颜色被染在最多的格子上，以及这种颜色被染在多少个格子上。如果有多种颜色，输出数字最大的那种。
## 输入格式


如下所示：


> $N$\
> $A_1$ $A_2$ $\cdots$ $A_N$\
> $B_1$ $B_2$ $\cdots$ $B_N$
## 输出格式


输出一行两个整数，以空格分隔：

- 第一个整数，表示被染在最多的格子上的颜色。如果有多种颜色，输出数字最大的那种。
- 第二个整数，表示这种颜色被染在了多少个格子上。

## 样例

### 样例输入 #1
```
3
5 2 5
5 3 1
```
### 样例输出 #1
```
5 4
```
### 样例输入 #2
```
3
1 7 8
1 3 5
```
### 样例输出 #2
```
8 3
```
### 样例输入 #3
```
4
2 1 2 1
2 1 1 2
```
### 样例输出 #3
```
2 10
```
## 提示


### 样例解释

#### 样例 $1$ 解释

最后各个格子的颜色如下所示：

| $5$ | $3$ | $1$ |
| :--: | :--: | :--: |
| $2$ | $3$ | $3$ |
| $5$ | $5$ | $5$ |

颜色 $5$ 被染在了 $4$ 个格子上，所以输出 $\texttt{5 4}$。


该样例满足子任务 $1,2,5$ 的限制。

#### 样例 $2$ 解释

最后各个格子的颜色如下所示：

| $1$ | $3$ | $5$ |
| :--: | :--: | :--: |
| $7$ | $7$ | $7$ |
| $8$ | $8$ | $8$ |

颜色 $7,8$ 都被染在了 $3$ 个格子上，所以输出较大的 $\texttt{8 3}$。


该样例满足子任务 $1,2,4,5$ 的限制。

#### 样例 $3$ 解释

该样例满足子任务 $1,2,3,5$ 的限制。

### 数据范围

- $2\le N\le 2\times 10^5$。
- $1\le A_i\le 10^9$（$1\le i\le N$）。
- $1\le B_i\le 10^9$（$1\le i\le N$）。
- $A_1=B_1$。
- 输入的值全部是整数。

### 子任务

1. （15pts）$N\le 500$，$A_i,B_i\le 10^5$（$1\le i\le N$）。
2. （10pts）$N\le 500$。
3. （20pts）$A_i,B_i\le 2$（$1\le i\le N$）。
4. （25pts）$A_i\lt A_{i+1},B_i\lt B_{i+1}$（$\forall 1\le i\le N-1$）；
5. （30pts）无额外限制。




---

---
title: "[USACO25JAN] It's Mooin' Time II B"
layout: "post"
diff: 普及/提高-
pid: P11668
tag: ['USACO', '2025']
---
# [USACO25JAN] It's Mooin' Time II B
## 题目描述

Farmer John 正在试图向 Elsie 描述他最喜欢的 USACO 竞赛，但她很难理解为什么他这么喜欢它。他说「竞赛中我最喜欢的部分是 Bessie 说 『现在是哞哞时间』并在整个竞赛中一直哞哞叫」。

Elsie 仍然不理解，所以 Farmer John 将竞赛以文本文件形式下载，并试图解释他的意思。竞赛被定义为一个包含 $N$（$1\le N\le 10^6$）个整数的数组 $a_1, a_2, \dots, a_N$（$1\le a_i\le N$）。Farmer John 定义哞叫为一个包含三个整数的数组，其中第二个整数等于第三个整数，但不等于第一个整数。一种哞叫被称为在竞赛中发生，如果可以从数组中移除整数，直到只剩下这一哞叫。

由于 Bessie 据称「在整个竞赛中一直哞哞叫」，请帮助 Elsie 计算竞赛中发生的不同哞叫的数量！两种哞叫是不同的，如果它们并非由相同的整数以相同的顺序组成。
## 输入格式

输入的第一行包含 $N$。

第二行包含 $N$ 个空格分隔的整数 $a_1,a_2,\dots,a_N$。
## 输出格式

输出竞赛中发生的不同哞叫的数量。

**注意这个问题涉及到的整数可能需要使用 64 位整数型（例如，Java 中的 "long"，C/C++ 中的 "long long"）。**
## 样例

### 样例输入 #1
```
6
1 2 3 4 4 4
```
### 样例输出 #1
```
3
```
## 提示

### 样例解释

竞赛包含三种不同的哞叫："1 4 4"，"2 4 4" 和 "3 4 4"。

### 子任务

- 测试点 2-4：$N\le 10^2$。
- 测试点 5-7：$N\le 10^4$。
- 测试点 8-11：没有额外限制。


---

---
title: "[USACO25JAN] Cow Checkups B"
layout: "post"
diff: 普及/提高-
pid: P11669
tag: ['USACO', '2025']
---
# [USACO25JAN] Cow Checkups B
## 题目描述

**注意：我们建议使用 Python 以外的其他语言以获得本题目的全部分数。**

Farmer John 的 $N$（$1 \leq N \leq 7500$）头奶牛站成一行，奶牛 $1$ 在队伍的最前面，奶牛 $N$ 在队伍的最后面。FJ 的奶牛也有许多不同的品种。他用从 $1$ 到 $N$ 的整数来表示每一品种。队伍从前到后第 $i$ 头奶牛的品种是 $a_i$（$1 \leq a_i \leq N$）。

FJ 正在带他的奶牛们去当地的奶牛医院进行体检。然而，奶牛兽医非常挑剔，仅愿意当队伍中第 $i$ 头奶牛为品种 $b_i$（$1 \leq b_i \leq N$）时对其进行体检。

FJ 很懒惰，不想完全重新排列他的奶牛。他将执行以下操作恰好一次。

选择两个整数 $l$ 和 $r$，使得 $1 \leq l \le r \leq N$。反转队伍中第 $l$ 头奶牛到第 $r$ 头奶牛之间的奶牛的顺序。
FJ 想要衡量这种方法有多少效果。对于每一个 $c=0 \ldots N$，请帮助 FJ 求出使得恰好 $c$ 头奶牛被检查的不同操作 $(l,r)$ 的数量。两种操作 $(l_1,r_1)$ 和 $(l_2,r_2)$ 不同，当且仅当 $l_1 \neq l_2$ 或者 $r_1 \neq r_2$。
## 输入格式

输入的第一行包含 $N$。

第二行包含 $a_1, a_2, \ldots, a_N$。

第三行包含 $b_1, b_2, \ldots, b_N$。
## 输出格式

输出 $N+1$ 行，第 $i$ 行包含使得 $i-1$ 头奶牛被检查的不同操作 $(l,r)$ 的数量。
## 样例

### 样例输入 #1
```
3
1 3 2
3 2 1
```
### 样例输出 #1
```
3
3
0
0
```
### 样例输入 #2
```
3
1 2 3
1 2 3
```
### 样例输出 #2
```
0
3
0
3
```
### 样例输入 #3
```
7
1 3 2 2 1 3 2
3 2 2 1 2 3 1
```
### 样例输出 #3
```
0
6
14
6
2
0
0
0
```
## 提示

### 样例解释


#### 样例 #1：

如果 FJ 选择 $(l=1,r=1)$，$(l=2,r=2)$ 或 $(l=3,r=3)$，则没有奶牛将会被检查。注意这些操作并没有改变奶牛的位置。
以下操作会导致一头奶牛被检查。

- $(l=1,r=2)$：FJ 反转第一头和第二头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[3,1,2]$。第一头奶牛将会被检查。
- $(l=2,r=3)$：FJ 反转第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[1,2,3]$。第二头奶牛将会被检查。
- $(l=1,r=3)$：FJ 反转第一头，第二头和第三头奶牛的顺序，因此新队伍中每头奶牛的品种将为 $[2,3,1]$。第三头奶牛将会被检查。

#### 样例 #2

三种导致 $3$ 头奶牛被检查的可能操作为 $(l=1,r=1)$，$(l=2,r=2)$ 和 $(l=3,r=3)$。

#### 样例 #3

两种导致 $4$ 头奶牛被检查的可能操作为 $(l=4,r=5)$ 和 $(l=5,r=7)$。

### 子任务
- 测试点 4-6: $N\le 100$
- 测试点 7-13: 无特殊限制


---

---
title: "[Algo Beat Contest 001 D] Dreamed Sequence"
layout: "post"
diff: 普及/提高-
pid: P11682
tag: ['O2优化']
---
# [Algo Beat Contest 001 D] Dreamed Sequence
## 题目背景

|               Problem               | Score |                         Idea                          |                             Std                              |                      Data                       |                            Check                             |                           Solution                           |
| :---------------------------------: | :---: | :---------------------------------------------------: | :----------------------------------------------------------: | :---------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|    $\text{D - Dreamed Sequence}$    | $425$ |  [orchardist](https://www.luogu.com.cn/user/347582)   |      [orchardist](https://www.luogu.com.cn/user/347582)      | [joe_zxq](https://www.luogu.com.cn/user/623577) |     [fcy20180201](https://www.luogu.com.cn/user/866154)      | [Link](https://www.luogu.com.cn/article/8ibxe6et) by [joe_zxq](https://www.luogu.com.cn/user/623577) |

![](https://pic.imgdb.cn/item/6719d910d29ded1a8ca39d07.png)
## 题目描述

给定长度为 $N$ 的序列 $A$ 和 $B$。

定义 $A$ 和 $B$ 两序列相乘 $A\times B$ 的规则如下，其中模数 $M=10^9+7$：

* 设 $A$ 序列为 $\{A_1,A_2,\dots,A_N\}$，$B$ 序列为 $\{B_1,B_2,\dots,B_N\}$，则相乘得到的序列为 $\{A_1B_1 \bmod M,A_2B_2 \bmod M,\dots,A_NB_N \bmod M\}$。

数学家小 G 梦想着让 $A\times B$ 得到的序列中出现次数最多的数出现的次数尽可能大。为了实现这一点，小 G 可以将 $B$ 数组任意重排列。小 G 想知道，出现次数最多的数最多出现多少次。

请你帮小 G 找到他梦想中的序列。如果小 G 获得了诺贝尔数学奖，他将会与你分享奖金。

## 输入格式

第一行包含一个整数 $N$。

第二行包含 $N$ 个整数，表示 $A$ 序列。

第三行包含 $N$ 个整数，表示 $B$ 序列。
## 输出格式

一个整数，表示答案。
## 样例

### 样例输入 #1
```
5
1 2 3 4 5
2 4 6 8 5
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
10
1 12 38 48 10 19 23 19 32 6
10 46 20 11 36 25 36 28 50 50

```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
2
1 999999999
1 1000000000
```
### 样例输出 #3
```
1
```
## 提示

#### 样例解释 #1

重排 $B$ 序列得 $\{8,4,5,2,6\}$，此时 $A\times B$ 得到的数组为 $\{8,8,15,8,30\}$，其中 $8$ 出现次数最多，出现 $3$ 次。

可以证明不存在重排 $B$ 序列的方式，使得答案大于 $3$。

#### 数据范围

对于 $100\%$ 的数据，保证 $1 \le N \le 2000$，$1 \le A_i,B_i \le 10^9$。



---

---
title: "[JOIGST 2024] 相聚 / いっしょ"
layout: "post"
diff: 普及/提高-
pid: P11686
tag: []
---
# [JOIGST 2024] 相聚 / いっしょ
## 题目背景

译自 [日本情報オリンピック 第4回女性部門 (JOIG 2023/2024) 春季トレーニング](https://www2.ioi-jp.org/joig-camp/2024/2024-sp-tasks/) R1T1。
## 题目描述

在一条笔直的道路上有 $N$ 只河狸。这条道路可以视为数轴，第 $i$ 只（$1 ≤ i ≤ N$）河狸位于坐标 $X_i$ 处。

由于河狸生性怕寂寞，当且仅当同一坐标存在至少一只其他河狸时，它们才会感到快乐。

现在需要通过合理移动河狸，在确保所有河狸都快乐的前提下，使它们的移动距离总和尽可能小。河狸**可以不移动**。

给定 $N$ 只河狸的坐标，请编写程序计算使所有河狸都快乐时，河狸移动距离总和的最小值。

可以证明本题中答案一定是整数。

## 输入格式

如下所示：

> $N$ \
> $X_1$ $X_2$ $\cdots$ $X_N$
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
4
1 2 3 4
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
5
1 9 8 2 7
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
10
9 20 5 10 8 1 10 19 15 4
```
### 样例输出 #3
```
10
```
## 提示

### 样例解释

#### 样例 $1$ 解释

第一只河狸移动到 $2$ 处，第三只河狸移动到 $4$ 处。可以证明没有更优的方案。

该样例满足所有子任务的限制。

#### 样例 $2$ 解释

第一只河狸移动到 $2$ 处，第二只河狸和第五只河狸移动到 $8$ 处。可以证明没有更优的方案。



该样例满足子任务 $3,4$ 的限制。

#### 样例 $3$ 解释

该样例满足子任务 $3,4$ 的限制。


### 数据范围

- $2\le N\le 3\times 10^5$；
- $1\le X_i\le 10^9$；
- 输入的值全部是整数。

### 子任务

1. （17pts） $N=4$。
2. （20pts）$\forall 1\le i\le N$，$X_i=i$。
3. （35pts）$N\le 100$；$\forall 1\le i\le N$，$X_i\le 100$。
4. （28pts）无额外限制。

翻译来自 DeepSeek-R1 并经过人工微调。


---

---
title: "[JOIG 2025] ポスター 2 / Poster 2"
layout: "post"
diff: 普及/提高-
pid: P11724
tag: ['2025', 'O2优化', 'JOI（日本）']
---
# [JOIG 2025] ポスター 2 / Poster 2
## 题目描述

JOI 学院的理惠为三月举行的文化节制作了一张海报。海报可以视为一个 $N\times N$ 的网格；有 $K$ 种颜色，编号分别为 $1$ 到 $K$，每个格子的颜色是 $K$ 种颜色之一；具体地，网格的颜色可以用一个矩阵 $A$ 来表示：记第 $i$ 行第 $j$ 列的格子为 $(i,j)(1\le i,j\le N)$，那么 $(i,j)$ 的颜色为 $A_{i,j}(1\le A_{i,j}\le K)$。

学生希望海报的颜色可以丰富一点；他们定义一张海报的“鲜艳程度”为满足以下条件的 $(i,j)(1\le i,j\le N-1)$ 的个数：

- $(i,j),(i+1,j),(i,j+1),(i+1,j+1)$ 中出现的颜色种类数不小于 $3$。

即 $A$ 中出现元素种类数不小于 $3$ 的 $2\times 2$ 子矩阵个数。

例如，下图中的海报的鲜艳程度为 $2$，因为存在 $2$ 个满足上述条件的 $2\times 2$ 子矩阵（已使用蓝框标出）。

![](https://cdn.luogu.com.cn/upload/image_hosting/t5fmqlcc.png)

由于时间紧迫，学生们希望通过恰好**一次**以下操作，或者**不进行操作**，来最大化海报的鲜艳程度：

- 选择**恰好一个**格子 $(i,j)$ 和一个与该格子原先颜色不同的颜色 $c(1\le c\le K)$，将格子 $(i,j)$ 的颜色改为 $c$，即 $A_{i,j}\gets c$。

请求出最终能得到的海报的最大鲜艳程度。
## 输入格式

第一行输入两个整数 $N,K$。

接下来 $N$ 行，每行输入 $N$ 个整数 $A_{i,j}$。
## 输出格式

输出一行一个整数，表示最终能得到的海报的最大鲜艳程度。
## 样例

### 样例输入 #1
```
2 3
1 2
2 1
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
5 5
1 1 1 2 2
1 1 1 2 2
3 3 1 2 2
3 3 5 5 5
3 3 5 5 5
```
### 样例输出 #2
```
5
```
### 样例输入 #3
```
5 1000000000
104289385 946930886 881692778 914636916 257747795
524238335 819885386 849760493 696516649 389641422
225202363 550490028 883368690 302520060 344897765
267513928 565180541 740383427 404089172 503455737
135005211 621595368 394702567 926956430 436465782
```
### 样例输出 #3
```
16
```
### 样例输入 #4
```
3 3
1 2 3
2 2 2
3 2 1
```
### 样例输出 #4
```
2
```
### 样例输入 #5
```
10 11
2 2 1 3 4 3 4 3 3 5
3 2 4 3 4 4 3 3 5 5
3 4 2 2 5 5 5 5 5 5
4 2 2 3 5 3 5 5 5 6
2 2 3 5 5 5 6 6 7 5
4 4 4 5 6 4 6 7 6 6
3 3 5 4 6 6 6 5 6 8
3 3 4 4 6 5 7 7 6 8
4 4 4 6 7 5 5 8 8 7
4 4 6 5 6 6 7 6 6 9
```
### 样例输出 #5
```
39
```
## 提示

#### 【样例解释 #1】

如下图所示，将 $(2,2)$ 的颜色改为颜色 $3$，可以使得鲜艳程度为 $1$。

![](https://cdn.luogu.com.cn/upload/image_hosting/762orsul.png)

可以证明不存在更优的方案。

该样例满足子任务 $1,3,4,5$ 的限制。

#### 【样例解释 #2】

如下图所示，将 $(2,3)$ 的颜色改为颜色 $4$，可以使得鲜艳程度为 $5$。

![](https://cdn.luogu.com.cn/upload/image_hosting/wewhdqwb.png)

可以证明不存在更优的方案。

该样例满足子任务 $3,4,5$ 的限制。

#### 【样例解释 #3】

该样例满足子任务 $2,4,5$ 的限制。

#### 【样例解释 #4】

该样例满足子任务 $3,4,5$ 的限制。

#### 【样例解释 #5】

该样例满足子任务 $4,5$ 的限制。

#### 【数据范围】

- $2\le N\le 270$；
- $3\le K\le 10^9$；
- $1\le A_{i,j}\le K(1\le i,j\le N)$。

#### 【子任务】

1. （$9$ 分）$N=2,K=3$；
2. （$6$ 分）$A_{i,j}(1\le i,j\le N)$ 两两不同；
3. （$27$ 分）$N,K\le 10$；
4. （$26$ 分）$N\le 10$；
5. （$32$ 分）无附加限制。


---

---
title: "[COCI 2024/2025 #5] 挂画 / Zid"
layout: "post"
diff: 普及/提高-
pid: P11752
tag: ['2025', 'COCI（克罗地亚）']
---
# [COCI 2024/2025 #5] 挂画 / Zid
## 题目背景

译自 [COCI 2024/2025 #5](https://hsin.hr/coci/) T2。$\texttt{1s,0.5G}$。满分为 $70$。

## 题目描述


有一面 $n$ 行 $m$ 列的矩形墙，被划分为 $n\times m$ 个区域。墙上有些区域有钉子，用 $\texttt{\#}$ 表示；其他的区域没有钉子，用 $\texttt{.}$。

现在要在墙上挂画。我们说一种挂画方式是合法的，当且仅当：

- 画占据墙上的一个矩形区域；
- 画占据的区域中**至多一个**区域存在钉子。

求出有多少种合法的挂画方式。
## 输入格式


第一行，两个正整数 $n,m$。

接下来 $n$ 行，第 $i$ 行一个字符串 $c$，$c_{i,j}$ 表示墙上第 $i$ 行第 $j$ 列的区域的状态。
## 输出格式

输出一行一个正整数表示答案。

## 样例

### 样例输入 #1
```
3 3
...
...
..#
```
### 样例输出 #1
```
36
```
### 样例输入 #2
```
4 4
....
.#..
#...
#.#.
```
### 样例输出 #2
```
76
```
### 样例输入 #3
```
5 5
.....
#..#.
..#.#
.....
..#..
```
### 样例输出 #3
```
154
```
## 提示


#### 样例解释

- 样例 $1$ 解释：随便怎么放都是合法的。

#### 数据范围

对于 $100\%$ 的数据，保证 $1\le n\le 500$。

| 子任务编号 |  $n,m\le$ | 得分 |  
| :--: | :--: | :--: | 
| $ 1 $    |  $10$  |   $ 17 $   |  
| $ 2 $    |  $100$  |  $ 21 $   |  
| $ 3 $   |  $500$  | $32$ |



---

---
title: "[JOI 2019 Final] 勇者比太郎 / Bitaro the Brave"
layout: "post"
diff: 普及/提高-
pid: P11788
tag: ['2019', 'JOI（日本）']
---
# [JOI 2019 Final] 勇者比太郎 / Bitaro the Brave
## 题目描述

勇者比太郎正在面对恶魔。

为了攻击恶魔，比太郎会在一个 $H\times W$ 的网格上放置三种道具（分别记作 `J,O,I`）并施放咒语。网格上往下数第 $i$ 行 $(1\le i\le H)$，左往右数第 $j$ 列 $(1\le j\le W)$ 的格子坐标记为 $(i,j)$。

现在，比太郎在网格的每个格子中放置了三种道具中的一种，比太郎将施放一个咒语，其威力取决于三种道具的排列方式。具体的，威力大小等于满足以下条件的有序四元组 $(i,j,k,l)$，满足 $(1\le i<k\le H,1\le j<l\le W)$ 的数量。

条件：$(i,j)$ 位置的格子上的道具为 `J`，$(i,l)$ 位置上的道具为 `O`，$(k,j)$ 位置上的道具为 `I`。

比太郎想知道他的咒语的威力是多少。

请写一个程序，根据三种道具在网格上的排列，计算出咒语的威力（即满足上述条件的四元组数量）。
## 输入格式

第一行两个整数 $H,W$，表示网格长宽。

接下来 $H$ 行，每行 $W$ 个字符，描述网格每个格子的道具。
## 输出格式

一行一个整数，表示最大的威力。
## 样例

### 样例输入 #1
```
3 4
JOIJ
JIOO
IIII
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
4 4
JJOO
JJOO
IIJO
IIIJ
```
### 样例输出 #2
```
17
```
## 提示

【数据范围与约定】

- $ 2 \le H \le 3000 $。
- $ 2 \le W \le 3000 $。

1. 对于 $20 \%$ 的数据，$ H \le 100,W \le 100 $。
2. 对于 $30 \%$ 的数据，$ H \le 500,W \le 500 $。
3. 对于 $50 \%$ 的数据，无特殊限制。


---

---
title: "[JOI 2016 Final] 橙子装箱 / Oranges"
layout: "post"
diff: 普及/提高-
pid: P11793
tag: ['2016', 'JOI（日本）']
---
# [JOI 2016 Final] 橙子装箱 / Oranges
## 题目描述

CXR 决定将收获的 $n$ 个橙子分装进一些箱子内。在 NXY 的工厂中，橙子排列在输送带上，依次编号为 $1\dots n$。橙子 $i(1\leq i\leq n)$ 的大小为 $A_i$。由于分拣不方便，同一个箱子内，橙子的编号必须连续。

一个箱子内最多可以装 $m$ 个橙子。在一个箱子内装一些橙子的成本为 $k+s\times (a-b)$。$k$ 是箱子本身的成本，所有箱子的成本一样。$s$ 是该箱子中橙子的数目。 $a$ 是该箱子中最大橙子的大小，$b$ 是该箱子中最小橙子的大小。

求包装这 $n$ 个橙子所需的最小成本。
## 输入格式

第一行有三个整数 $n,m,k$，用空格分隔。

在接下来的 $n$ 行中，第 $i$ 行 $(1\leq i\leq n)$ 有一个整数 $A_i$。
## 输出格式

输出一个整数，表示包装这 $n$ 个橙子所需的最小成本。
## 样例

### 样例输入 #1
```
6 3 6
1
2
3
1
2
1
```
### 样例输出 #1
```
21
```
### 样例输入 #2
```
16 4 12
3
10
13
10
19
9
12
16
11
2
19
9
13
2
13
19
```
### 样例输出 #2
```
164
```
### 样例输入 #3
```
16 6 14
19
7
2
15
17
7
14
12
3
14
5
10
17
20
19
12
```
### 样例输出 #3
```
177
```
### 样例输入 #4
```
10 1 1000000000
1
1
1
1
1
1
1
1
1
1
```
### 样例输出 #4
```
10000000000
```
## 提示

【数据范围与约定】

- $1\le N\le 2\times 10^4$。
- $1\le M\le 10^3$。
- $0\le K\le 10^9$。
- $1\le A_i\le 10^9 (1\le i\le N)$。
- $M\le N$。

1. Subtask $1$（$20$ pts）：$N\le 20$。
2. Subtask $2$（$50$ pts）：$N \le 2000,M \le 100$。
3. Subtask $3$（$30$ pts）：无特殊限制。


---

---
title: "【MX-X9-T2】『GROI-R3』XOR"
layout: "post"
diff: 普及/提高-
pid: P11798
tag: ['Special Judge', 'O2优化', '梦熊比赛']
---
# 【MX-X9-T2】『GROI-R3』XOR
## 题目描述

给出四个非负整数 $l, r, k, x$。你需要找到任意一个整数 $n$ 满足 $l \leq n \leq r$ 且 $\bigoplus\limits_{i=k}^n i = x$。其中，$\bigoplus\limits_{i=k}^n i$ 表示 $k \sim n$ 中所有整数的二进制按位异或和。

如有多解，求出任何一个均可。如果无解，请指出。
## 输入格式

**本题有多组测试数据。**

第一行，一个正整数 $T$，表示数据组数。接下来，对于每组数据：

- 仅一行，四个非负整数 $l, r, k, x$。
## 输出格式

对于每组数据：

- 仅一行，一个整数，为你求出的 $n$；或当无解时输出 $-1$。

**本题使用自定义校验器检验你的输出是否正确，故有解时你只需要求出任意一个满足条件的 $\bm n$。**
## 样例

### 样例输入 #1
```
6
1 10 1 7
16 30 7 7
432327 42682357 114514 1
45445 473274 4741 280230
713243 34783411 114514 1919810
432754349 970503499 231891327 987305496

```
### 样例输出 #1
```
6
19
432327
-1
1919810
923498342

```
## 提示

**【样例解释】**

对于第一组数据，取 $n = 6$，则 $1 \oplus 2 \oplus \cdots \oplus 6 = 7$，符合题意。可以证明，这是在 $[1, 10]$ 范围内唯一合法的解。

对于第二组数据，容易验证 $n = 19$ 是一组合法的解。此外，在 $[16, 30]$ 区间内，$n = 23$ 和 $n = 27$ 也合法，所以输出它们也正确。

**【数据范围】**

| 测试点编号 | $T \leq$ | $r \leq$ | 特殊性质 |
| :----------: | :----------: | :----------: | :----------: |
| $1\sim 4$ | $5000$ | $5000$ |  |
| $5\sim 8$ | $10^5$ | $10^9$ | AB |
| $9\sim 14$ | $10^5$ | $10^9$ | A |
| $15\sim 20$ | $10^5$ | $10^9$ |  |

- 特殊性质 A：保证 $k$ 为偶数。
- 特殊性质 B：保证 $x \leq 1$。

对于 $100\%$ 的数据，保证 $1 \leq T \leq 10^5$，$1 \leq k \leq l \leq r \leq 10^9$，$0 \leq x \leq 2\times 10^9$。


---

---
title: "[CCC 2025 Senior] 破译 / Cryptogram Cracking Club"
layout: "post"
diff: 普及/提高-
pid: P11858
tag: ['2025', 'CCC（加拿大）']
---
# [CCC 2025 Senior] 破译 / Cryptogram Cracking Club
## 题目背景

译自 CCC 2025 Senior T2。本题满分为 $15$。
## 题目描述

给定一个小写字母组成的字符串 $s$ 和一个非负整数 $c$。你需要求出，将这个字符串无限重复后，第 $c$ 个位置上的字符是什么。注意字符串是 $\text{0}-\text{indexed}$ 的，也就是 $s_0$ 是第一个字符。

为了减少输入量，我们将字符串做了压缩：具体地，我们将一段连续的相同字母 $\underbrace{\texttt{aa}\cdots\texttt{aa}}_{k\text{ 个}}$ 压缩成字母+出现次数 $\texttt{a}k$ 的形式。例如，$\texttt{aaaabccdddd}$ 被压缩成 $\texttt{a4b1c2d4}$。

## 输入格式

第一行，一个只含小写字母和数字的压缩后的字符串 $s'$。

第二行，一个非负整数 $c$。
## 输出格式

一个小写字母，表示答案。
## 样例

### 样例输入 #1
```
r2d2
8
```
### 样例输出 #1
```
r
```
### 样例输入 #2
```
a4b1c2d10
100
```
### 样例输出 #2
```
d
```
## 提示


#### 样例解释

- 样例 $1$ 解释：$\texttt{r2d2}$ 压缩前是 $\texttt{rrdd}$。

重复无数多次即为 $\texttt{rrddrrdd\textcolor{red}{r}rdd}\cdots$。

- 样例 $2$ 解释：$\texttt{a4b1c2d10}$ 压缩前是 $\texttt{aaaabccdddddddddd}$。




#### 子任务

对于 $100\%$ 的数据，保证：

- $2\le |s'|\le 10^5$；
- $s'$ 中出现的整数的范围是 $[1,10^{12}]$；
- $0\le c\le 10^{12}$。

---

- $\text{Subtask 0(0 points})$：样例。
- $\text{Subtask 1(6 points})$：
	- $0\le c\le 2\times 10^3$；
	- $s'$ 中出现的整数的范围是 $[1,9]$；
    - 压缩前，$s$ 的长度不超过 $2000$。
- $\text{Subtask 2(3 points})$：
	- $0\le c\le 10^6$；
    - 压缩前，$s$ 的长度不超过 $10^6$。
- $\text{Subtask 3(3 points})$：
    - 压缩前，$s$ 的长度不超过 $10^6$。
- $\text{Subtask 4(3 points})$：无特殊限制。


---

---
title: "「o.OI R1」CX"
layout: "post"
diff: 普及/提高-
pid: P11863
tag: ['O2优化']
---
# 「o.OI R1」CX
## 题目背景

[CX - Levitatexc](https://music.163.com/#/song?id=455692044)
## 题目描述

给定一棵 $n$ 个节点的树。树上的节点从 $1$ 到 $n$ 编号，树的根节点为 $1$ 号节点。

你可以选中这棵树上的若干个节点（**可以全选，可以全不选**）。

选中节点 $u$ 时**同时进行两步操作**：

1. 覆盖以节点 $u$ 为根的子树中的所有边 $1$ 次。若 $u$ 是叶子节点，那么这一步没有边被覆盖。
2. 覆盖节点 $u$ 到 $1$ 的路径上的所有边 $1$ 次。若 $u=1$，那么这一步没有边被覆盖。

求有多少种选节点的方案，使得树上的所有边都**恰好**被覆盖 $1$ 次。两种方案不同当且仅当至少一个节点在其中一个方案被选中，在另一个方案没被选中。答案对 $998244353$ 取模。
## 输入格式

第一行一个正整数 $n$。

第二行 $n-1$ 个正整数 $f_2,f_3,\cdots,f_n$，表示编号为 $2\sim n$ 的节点各自父亲节点的编号。
## 输出格式

一行一个正整数，表示选点的方案数对 $998244353$ 取模的值。
## 样例

### 样例输入 #1
```
6
1 1 2 3 3
```
### 样例输出 #1
```
3
```
## 提示

**「数据范围」**

**本题采用捆绑测试。**

对于所有测试数据，保证：

- $1 \leq n \leq 5\times10^5$。
- 对于 $2 \leq i \leq n$，$f_i < i$。

| 子任务 | $n$ | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: | :----------: |
| $0$ | $\leq 8$ | 无 | $15$ |
| $1$ | $\leq 5\times10^5$ | $f_i = 1$，其中 $2 \leq i \leq n$ | $10$ |
| $2$ | $\leq 5\times10^5$ | $f_i = i - 1$，其中 $2 \leq i \leq n$ | $10$ |
| $3$ | $\leq 5\times10^5$ | 无 | $65$ |


---

---
title: "[威海市赛2024] 抽卡"
layout: "post"
diff: 普及/提高-
pid: P11868
tag: ['Special Judge']
---
# [威海市赛2024] 抽卡
## 题目描述

小威有 $a+b$ 张神奇卡片。

一共有 $a$ 张 $A$ 卡，$b$ 张 $B$ 卡。     

小威负责抽卡，他每次会随机抽出一张卡片。小海负责猜，当剩余 $A$ 卡的数量小于 $B$ 卡剩余数量时，他就会猜 $B$，如果 $A$ 剩余的数量大于 $B$ 剩余的数量，那么他就会猜 $A$，否则不猜。

小海想知道他期望能猜对多少次。
## 输入格式

一行两个整数 $a, b$。

对于所有数据，满足：$0 \leq a, b \leq 2 \times 10^5$。
## 输出格式

一个实数表示期望下猜对的次数。

当你的输出与答案的误差不超过 $10^{-6}$ 时，视为答案正确。
## 样例

### 样例输入 #1
```
1 1
```
### 样例输出 #1
```
1.00000000
```
### 样例输入 #2
```
12 12
```
### 样例输出 #2
```
12.00000000
```
## 提示

样例 #1 中，第一次小海没猜，第二次不管剩下一张什么卡，小海总能猜对。所以期望是 $1$。


---

---
title: "[XRCOI Round 1] A. 相聚相逢本无意"
layout: "post"
diff: 普及/提高-
pid: P11890
tag: ['Special Judge', 'O2优化']
---
# [XRCOI Round 1] A. 相聚相逢本无意
## 题目背景

> 花开花落终有时，相聚相逢本无意。
## 题目描述

初见时，她给了小 S 一个可以为空的序列 $A$，长度为 $n$。

她定义了序列的**前缀 MEX 序列** $B$，满足 $B$ 的第 $i$ 项为 $\text{MEX}\{A_1,A_2,\dots,A_i\}$，对于一个由有限个非负整数组成的数列 $X$，我们定义 $\text{MEX}$ 为数列中**不包含的最小非负整数**。比如 $\text{MEX}\{1,2,3\}=0,\text{MEX}\{0,1,2,4\}=3$。

作为初见时的考验，小 S 需要构造一个**单调不降**的 $A$ 数组，使得其前缀 $\text{MEX}$ 数组 $B$ 满足一些约束。或者判定没有任何一种符合要求的 $A$ 存在。

具体的，$B$ 数组需要满足的限制形如 $k$ 个二元组 $(x,y)$，表示数 $x$ 在 $B$ 中**恰好**出现了 $y$ 次。

不需要最小化构造的 $A$ 数组的大小或者使构造满足其它没有给定的额外条件。

小 S 不会这个问题，所以他请你来帮忙了。
## 输入格式

第一行一个非负整数 $k$，表示构造的 $A$ 需要满足的二元组的个数。

接下来 $k$ 行，每行 $2$ 个非负整数，表示一个二元组 $(x,y)$。
## 输出格式

如果不存在合法情况，输出一行一个数 $-1$。

否则输出两行：

第一行一个整数 $n$，为你构造的序列 $A$ 的长度，需满足 $0\le n\le 2\times 10^5$。

第二行 $n$ 个正整数，为你构造的序列 $A$ 的元素，需满足 $0\le A_i\le 10^9$ 且 $\forall i\in[1,n-1],A_i\le A_{i+1}$。

## 样例

### 样例输入 #1
```
4
1 1
3 1
2 3
4 1
```
### 样例输出 #1
```
6
0 1 1 1 2 3 
```
### 样例输入 #2
```
4
1 1
3 0
2 3
4 1
```
### 样例输出 #2
```
-1
```
## 提示

#### 样例解释

第一个样例中，构造出来的 $B=(1,2,2,2,3,4)$， 符合以上 $k$ 个二元组的要求。

更详细的，有：

$B_1=\text{MEX}\{A_1\}=\text{MEX}\{0\}=1$；

$B_2=\text{MEX}\{A_1,A_2\}=\text{MEX}\{0,1\}=2$；

$B_3=\text{MEX}\{A_1,A_2,A_3\}=\text{MEX}\{0,1\}=2$；

$B_4=\text{MEX}\{A_1,A_2,A_3,A_4\}=\text{MEX}\{0,1\}=2$；

$B_5=\text{MEX}\{A_1,A_2,A_3,A_4,A_5\}=\text{MEX}\{0,1,2\}=3$；

$B_6=\text{MEX}\{A_1,A_2,A_3,A_4,A_5,A_6\}=\text{MEX}\{0,1,2,3\}=4$。

第二个样例中，可以证明没有任何一个 $A$ 满足要求。

#### 数据规模与约定

**本题采用捆绑测试和子任务依赖并开启 Special Judge。**

你可以输出任意一组满足条件的情况，如果不存在合法情况输出 $-1$。

其中子任务 $0$ 为样例，记 $0$ 分。

| 子任务编号 | 分值 |     特殊性质      | 子任务依赖 |
| :--------: | :--: | :---------------: | :--------: |
|    $1$     | $30$ | $x\not=0,y\not=0$ |     无     |
|    $2$     | $30$ |     $x\not=0$     |     $1$      |
|    $3$     | $30$ |     $y\not=0$     |     $1$      |
|    $4$     | $10$ |    无特殊性质     |  $1,2,3$   |


对于 $100 \%$ 的数据，保证 $0\le k,x,y\le 100$，且给出的二元组中 $x$ 两两不同。

**不保证 $x$ 单调递增。**


---

---
title: "必胜"
layout: "post"
diff: 普及/提高-
pid: P11899
tag: []
---
# 必胜
## 题目背景

福尔魔斯和花生在玩游戏。但福尔魔斯总是赢。

花生什么时候才能发现福尔魔斯生成的初始局面总是有必胜策略呢？
## 题目描述

福尔魔斯和花生在玩一个和数学有关的游戏。  

初始场上有 $n$ 个整数 $a_1\sim a_n$ 。  
两人轮流行动，某人行动时需从下面两种操作中选择一种执行：  
- 选择场上的一个数 $a_i$ ，将其除以其最大的质因子。
- 选择场上的一个数 $a_i$ ，将其改为它自身的平方。任意时刻，该玩家使用该操作的总次数不能超过其总分值。

若某名玩家操作结束后，场上有数等于 $1$ ，将其移除，令这名玩家获得 $1$ 分。  
初始双方分数都为 $0$ ，若场上没有剩余的数，结束游戏，分数较多的一方获胜。  
福尔魔斯先手。求双方都采取最优策略的前提下，哪方能获胜，或是返回平局。


## 输入格式

**此题多测。**  
第一行一个整数 $T$ ，代表数据组数。  
每一组数据中：  
第一行是一个整数 $n$ ，代表场上数字个数。  
第二行是 $n$ 个整数 $a_1\sim a_n$ ，代表场上的 $n$ 个整数。
## 输出格式

共 $T$ 行，每行一个字符串，若会平局，输出 ```Draw``` ；否则若是 福尔魔斯 能赢，输出 ```Lucky_Holmes``` ；否则输出 ```Angry_Waston``` 。

## 样例

### 样例输入 #1
```
3
1
2
2
2 2
1
4
```
### 样例输出 #1
```
Lucky_Holmes
Draw
Angry_Waston
```
### 样例输入 #2
```
4
3
9 10 15
3
9 10 30
2
11 14
4
11 4 5 14
```
### 样例输出 #2
```
Angry_Waston
Lucky_Holmes
Lucky_Holmes
Angry_Waston
```
### 样例输入 #3
```
3
8
7 12 15 17 21 23 30 31
10
10 11 12 13 14 15 16 17 18 19
6
16 17 18 16 17 18
```
### 样例输出 #3
```
Angry_Waston
Angry_Waston
Angry_Waston
```
## 提示

#### 样例一解释：
一共有 3 组数据。

第一组数据有一个二，福尔魔斯可以进行一次操作一，使 2 变成 1。花生无法进行操作。故答案为福尔魔斯赢。

第二组数据有两个 2，无论福尔魔斯怎么操作，他都只能消掉一个 2，获得一分；而花生总可以拿到 1 分，所以结果为平局。

第三组数据只有一个 4，福尔魔斯进行操作一之后花生再操作，花生得分，故为花生获胜。

#### 样例二解释

第一组数据中，$9 = 3\times 3, 10 = 2\times 5, 15 = 3\times 5$，无论福尔魔斯怎么选择对哪个数进行操作，花生都可以再进行一次操作得分，故花生胜。

---
对于所有数据，满足 $1\le T\le10^4$ ，$1\le\sum{n}\le2\times10^6$ ， $2\le a_i\le10^7$ 。  

|  #   |       特殊性质        | 分值 |
| :--: | :-------------------: | :--: |
|  0   | $n=1$ |  5  |
|  1   | $\sum{n}\le 6 , a_i\le10$ |  10  |
|  2   | $\sum{n}\le4\times10^2,a_i\le4\times10^3$ |  13  |
|  3   | $\sum{n}\le10^4$ |  17  |
|  4   | $a_i$ 为质数 |  10  |
|  5   | $a_i$ 不为质数 |  20  |
|  6   | 无特殊限制 |  25  |


---

---
title: "[PA 2025] 上班 / Praca"
layout: "post"
diff: 普及/提高-
pid: P11914
tag: ['2025', 'PA（波兰）']
---
# [PA 2025] 上班 / Praca
## 题目背景

PA 2025 R1B.
## 题目描述

一天被分为 $n$ 段时间。每段时间可能会有以下三种事情：

1. 举行了一场线下会议；
2. 举行了一场线上会议；
3. 空闲。

每段时间内，Bajtazar 所在的地点可能有三种：

- 在家：
	- 在家里无法参加线下会议（被迫翘掉会议）。
    - 在家里**可以**参加线上会议（也可以选择翘掉会议做题）。
    - 在家里可以做题。
- 在公司：
	- 在公司**必须**参加线下会议。
    - 在公司**必须**参加线上会议。
    - 在公司**无法**做题。
- 在通勤：
	- 通勤时无法参加线下会议（被迫翘掉会议）。
	- 通勤时无法参加线上会议（被迫翘掉会议）。
	- 通勤时无法做题。

一天开始时（第 $1$ 段时间初），Bajtazar 在家里。一天结束时（第 $n$ 段时间末），Bajtazar 必须回到家中。

Bajtazar 可以选择去办公室**至多一次**。从家到办公室、从办公室回家都要通勤。

通勤会消耗 $t$ 段时间，即如果选择在第 $i$ 段时间初开始通勤，在第 $(i+t-1)$ 段时间末会结束通勤。

Bajtazar 想打一辈子算法竞赛，所以他想抽出尽可能多的时间做题。但是他最多能翘掉 $k$ 场会议，请帮他算出至多能用多少个时间段来做题。

## 输入格式

第一行，三个整数 $n,k,t$。

第二行，一个长度为 $n$ 的字符串 $s$。$s_i\in \{1,2,3\}$，表示第 $i$ 段时间的类型（1：线下会议；2：线上会议；3：空闲）。
## 输出格式

如果不可能翘掉 $\le k$ 场会议，输出一行一个 $-1$。

否则输出一行一个非负整数表示答案。
## 样例

### 样例输入 #1
```
10 1 2
3233313132
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
7 0 2
3313233
```
### 样例输出 #2
```
0
```
### 样例输入 #3
```
6 5 1
231323
```
### 样例输出 #3
```
6
```
### 样例输入 #4
```
4 1 1
1331
```
### 样例输出 #4
```
-1
```
## 提示

### 样例解释

样例 $1$ 解释：一个最优解如下。

1. 解题（在家）
2. 线上会议（在家）
3. 解题（在家）
4. 通勤（去办公室）
5. 通勤（去办公室）
6. 线下会议（在办公室）
7. 通勤（回家） 
8. 通勤（回家，被迫翘掉一场会议）
9. 解题（在家） 
10. 线上会议（在家）

- 样例 $2$ 解释：唯一一个解如下。

1. 通勤（去办公室） 
2. 通勤（去办公室） 
3. 线下会议（在办公室） 
4. 空闲（在办公室） 
5. 线上会议（在办公室） 
6. 通勤（回家） 
7. 通勤（回家）

- 样例 $3$ 解释：一整天都待在家里，翘掉所有会议。
- 样例 $4$ 解释：第一场会议和最后一场会议都无法参加。

### 数据范围

- $3\le n\le 8\, 000$；
- $0\le k\le n$；
- $1\le t\lt n/2$。



---

---
title: "[PA 2025] 学区房 / Szkoła"
layout: "post"
diff: 普及/提高-
pid: P11916
tag: ['2025', 'PA（波兰）']
---
# [PA 2025] 学区房 / Szkoła
## 题目背景

PA 2025 R2C.

## 题目描述


有 $n$ 栋建筑在一条笔直的马路上，自西向东依次编号为 $1\sim n$。相邻两栋建筑的距离为 $1$ 米。

有 $m$ 个两两不交的区间 $[l_i,r_i]$，表示编号在 $[l_i,r_i]$ 内的房子**不**提供租赁服务。

有一所学校，在编号为 $s$ 的建筑中。保证编号为 $s$ 的建筑**不**提供租赁服务。

现在想要选择一栋提供租赁服务的建筑 $p$，最小化到学校的距离（即最小化 $|s-p|$）。请帮忙求出这栋建筑的编号。


## 输入格式

第一行，三个正整数 $n,m,s$。

接下来 $m$ 行，每行两个正整数 $l_i,r_i$。

数据保证：

- 编号为 $s$ 的建筑**不**提供租赁服务；
- $m$ 个区间两两不交；
- 至少存在一栋建筑提供租赁服务。


## 输出格式

输出一个正整数，表示选择建筑的编号。

特别地，若有多解，输出最小的那个编号。

## 样例

### 样例输入 #1
```
10 2 7
5 9
1 2
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
15 4 9
4 5
10 13
1 1
6 9
```
### 样例输出 #2
```
14
```
## 提示


### 样例解释

- 样例 $1$ 解释：$p=4,10$ 是两个解。由于要求编号最小，输出 $4$。
- 样例 $2$ 解释：只有唯一的一栋提供租赁服务的建筑，即编号 $14$ 的建筑。

### 数据范围


- $ 2 \leq n \leq 10^{12}$；
- $1 \leq m \leq 1000$；
- $1 \leq s \leq n $；
- 编号为 $s$ 的建筑**不**提供租赁服务；
- $m$ 个区间两两不交；
- 至少存在一栋建筑提供租赁服务。



---

---
title: "[CrCPC 2024] AI 的末日"
layout: "post"
diff: 普及/提高-
pid: P11931
tag: ['2024', 'XCPC']
---
# [CrCPC 2024] AI 的末日
## 题目背景

译自 [Natjecanje timova studenata informatičara hrvatskih sveučilišta](https://hsin.hr/studenti2024/) A.
## 题目描述

有 $n$ 件衣服要被**依次**叠好。

一共有 $k$ 种衣服，第 $j$ 种衣服要被叠到第 $j$ 堆上。第 $i$ 件衣服的种类为 $a_i$。

你随身带着一本数学笔记本。你不想弄脏它，于是把它放在某一堆上。但是**衣服不能叠在笔记本上**，如果要把一件衣服叠在笔记本所在的堆上，那么必须先把笔记本移走。

你可以任意选择初始时笔记本的位置，也可以在合法的前提下任意选择把笔记本移到哪堆。在最优策略下，至少需要**移**多少次笔记本？

## 输入格式

第一行，两个正整数 $n,k$。

接下来 $n$ 行，第 $i$ 行一个正整数 $a_i$。
## 输出格式

一行一个非负整数表示答案。
## 样例

### 样例输入 #1
```
8 3
3
1
2
1
1
3
3
2
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
1 2
1
```
### 样例输出 #2
```
0
```
## 提示

- $1\le n\le 10^6$，$2\le k\le 10^9$；
- $1\le a_i\le k$。

样例解释：一开始放在第 $1$ 堆上，然后放在第 $3$ 堆上，然后移回第 $1$ 堆。



---

---
title: "[NOISG 2025 Prelim] Snacks"
layout: "post"
diff: 普及/提高-
pid: P12194
tag: ['2025', 'NOISG（新加坡）']
---
# [NOISG 2025 Prelim] Snacks
## 题目描述

Shor the Duck has prepared $n$ plates of snacks to enjoy while watching movies! The $i$-th plate initially contains a snack with a deliciousness value of $a[i]$.

You need to process $q$ queries. In the $j$-th query, Shor will do **both** of the following, in order:

1. Eat every snack whose deliciousness is between $l[j]$ and $r[j]$ (inclusive).
2. Then, replace each eaten snack with a new snack of deliciousness $x[j]$.

Before processing any queries, and after each query, Shor wants you to determine the sum of deliciousness of snacks across all plates.

Formally, you are given an array $a$ of length $n$ and must process $q$ queries. Before processing any queries, print the sum of all elements in $a$. In the $j$-th query, update every element $a[i]$ such that $l[j] \leq a[i] \leq r[j]$ by setting $a[i] = x[j]$, then print the updated sum of all elements in $a$.

## 输入格式

Your program must read from standard input.

The first line of input contains two space-separated integers $n$ and $q$.

The second line of input contains $n$ space-separated integers $a[1], a[2], \ldots, a[n]$.

The following $q$ lines of input each contain three space-separated integers. The $j$-th of these lines contains $l[j], r[j]$, and $x[j]$, describing the $j$-th query.

## 输出格式

Your program must print to standard output.

The output should contain $q + 1$ lines.

The first line of output should contain a single integer, the sum of all elements in a before all queries.

The following $q$ lines of input should each contain one integer. The $i$-th of these lines should contain the sum of elements in a after the $i$-th query.

## 样例

### 样例输入 #1
```
5 3
1 6 2 4 6
6 6 3
2 2 3
3 3 5
```
### 样例输出 #1
```
19
13
14
20
```
### 样例输入 #2
```
6 4
929 121 5 3 919 72
1 133 0
70 79 0
900 999 0
1 1000 0
```
### 样例输出 #2
```
2049
1848
1848
0
0
```
### 样例输入 #3
```
6 5
7 72 727 123 321 9
7 9 10
10 72 727
111 222 30
123 727 99
111 222 333
```
### 样例输出 #3
```
1259
1263
3352
3259
525
525
```
## 提示

### Subtasks

For all test cases, the input will satisfy the following bounds:

- $1 \leq n \leq 200\,000$
- $0 \leq q \leq 200\,000$
- $0 \leq a[i] \leq 10^9$ for all $1 \leq i \leq n$
- $0 \leq x[j] \leq 10^9$ for all $1 \leq j \leq q$
- $0 \leq l[j] \leq r[j] \leq 10^9$ for all $1 \leq j \leq q$

Your program will be tested on input instances that satisfy the following restrictions:

| Subtask | Marks | Additional Constraints |
| :-: | :-: | :-: |
| $0$ | $0$ | Sample test cases |
| $1$ | $5$ | $q = 0$ |
| $2$ | $12$ | $n, q \leq 2000$ |
| $3$ | $21$ | $l[j] = r[j] \leq 200\,000$ and $a[i], x[j] \leq 200\,000$ |
| $4$ | $13$ | $l[j] = r[j]$ |
| $5$ | $16$ | $x[j] = 0$ |
| $6$ | $33$ | No additional constraints |

### Sample Test Case 1 Explanation

This test case is valid for subtasks $2, 3, 4$, and $6$.

### Sample Test Case 2 Explanation

This test case is valid for subtasks $2, 5$, and $6$.

### Sample Test Case 3 Explanation

This test case is valid for subtasks $2$ and $6$.

Before all queries, the array a is $[7, 72, 727, 123, 321, 9]$, with a sum of $1259$.

After the first query, the array a becomes $[10, 72, 727, 123, 321, 10]$, with a sum of $1263$.

After the second query, the array a becomes $[727, 727, 727, 123, 321, 727]$, with a sum of $3352$.

After the third query, the array a becomes $[727, 727, 727, 30, 321, 727]$, with a sum of $3259$.

After the fourth query, the array a becomes $[99, 99, 99, 30, 99, 99]$, with a sum of $525$.

After the fifth query, the array a becomes $[99, 99, 99, 30, 99, 99]$, with a sum of $525$.



---

---
title: "「WyOJ Round 1」启 · 破茧初阳"
layout: "post"
diff: 普及/提高-
pid: P12226
tag: []
---
# 「WyOJ Round 1」启 · 破茧初阳
## 题目背景

>一叶渔船两小童，收篙停棹坐船中。怪生无雨都张伞，不是遮头是使风。
>
>—— 杨万里 《舟过安仁》
## 题目描述

求从公元后 $1$ 年至公元后 $n$ 年有多少年为快乐年？  

快乐年的定义为：能被 $a$ 整除且不能被 $b$ 整除，或者是能被 $c$ 整除的年份，即将闰年定义中的 $4,100,400$ 依次替换为 $a,b,c$。
## 输入格式

**本题有多组数据**。 

第一行一个整数 $T$，表示数据组数。  

对于每组数据：  

一行四个整数 $n,a,b,c$，表示公元后 $n$ 年，快乐年定义中的 $a,b,c$。
## 输出格式

输出一个数，表示答案。
## 样例

### 样例输入 #1
```
5
2024 5 4 7
1024 5 10 15
114514 5 3 9
998244 3 5 3
353998 7 9 6
```
### 样例输出 #1
```
549
136
27991
332748
98332
```
## 提示

对于 $100\%$ 的数据，$1\le T\le 10^5$，$1\le n\le 10^{18}$，$1\le a,b,c\le 10^9$。

| 测试点 | 特殊性质 |
| :-----------: | :-----------: |
| $1\sim 4$ | $1\le T\le 5$，$1\le n\le 10^6$ |
| $5\sim 10$ | 无特殊性质 |



---

---
title: "[ICPC 2022/2023 WF] Riddle of the Sphinx"
layout: "post"
diff: 普及/提高-
pid: P12295
tag: ['2022', '2023', '交互题', 'Special Judge', 'ICPC']
---
# [ICPC 2022/2023 WF] Riddle of the Sphinx


---

---
title: "[JOI2025 预选赛 R2] 台球"
layout: "post"
diff: 普及/提高-
pid: P12457
tag: ['2024', 'JOI（日本）']
---
# [JOI2025 预选赛 R2] 台球
## 题目描述

比太郎在玩台球。JOI 国的台球是使用摆在台上的 $N$ 个球 $1,2,\ldots,N$ 的游戏，台上设有落球用的洞。落在洞里的球不会放回台上，那个球也不能再一次落洞。比太郎的目的是尽量把写有大号码的球落在洞里。

打球是一项需要集中注意力的工作。初始，比太郎的注意力是 $X$，击打球 $i$（$1≤i≤N$）后集中力减少 $A_i$。集中力不足 $A_i$ 时，不能击打球 $i$。

另外，在该台球中存在关于落球顺序的规则，具体来说，$P_i=-1$（$1≤i≤N$）时，球 $i$ 可以随时落下，$P_i ≠ -1$ 时，为了使球 $i$ 落下，球 $P_i$ 必须已经落下。

当给出了比太郎所具有的集中力和各球的信息时，判定比太郎是否能够将球击落洞中，在能够击落下球的情况下，求出能够落下的球的编号的最大值。
## 输入格式

输入数据以如下格式给出：
$$
\begin{aligned}
&N\ X\\
& A_1\ A_2\ \cdots\ A_N\\
&P_1\ P_2\ \cdots\ P_N\\
\end{aligned}
$$
## 输出格式

输出一行一个整数，为比太郎击落的球的编号最大值。

如果比太郎无法击落球，输出 $-1$。
## 样例

### 样例输入 #1
```
6 7
1 2 4 3 10 100
-1 -1 -1 -1 -1 -1
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5 12
1 2 3 5 8
-1 1 2 3 4
```
### 样例输出 #2
```
4
```
### 样例输入 #3
```
8 10
3 1 4 1 5 9 2 6
-1 1 2 -1 4 4 5 7
```
### 样例输出 #3
```
7
```
### 样例输入 #4
```
2 1000000000000000
1 1
2 1
```
### 样例输出 #4
```
-1
```
### 样例输入 #5
```
9 2468024680
123456789 234567891 345678912 456789123 567891234 678912345 789123456 891234567 912345678
6 5 4 -1 3 2 1 9 8
```
### 样例输出 #5
```
6
```
## 提示

### 样例解释

#### 样例 #1
首先，比太郎的集中力是 $7$。
对于所有的 $i$（$1≤i≤N$），由于 $P_i=-1$，所以只要集中力足够，所有的球都可以随时掉到洞里。

例如，如下所示，比太郎可以击落 $4$ 个球。

- 首先，把球 $3$ 打到洞里，比太郎的集中力减少了 $4$，剩下的集中力为 $3$。
- 接着，把球 $4$ 打到洞里，比太郎的集中力减少了 $3$，剩下的集中力为 $0$。
- 另外，比太郎不能把球 $5,6$ 打到洞里。因此，比太郎可以掉到洞里的球的号码的最大值是 $4$。

### 数据范围

- $1 \leq  N \leq 200 000$
- $1 \leq  X \leq  10^{15}$
- $1 \leq A_i \leq 10^9 (1 \leq i \leq N)$
- $1 \leq P_i \leq N$ 或 $P_i = -1(1 \leq  i \leq N)$
- $P_i \neq i (1 \leq i \leq N)$

子任务如下：

1. （6 分）$N \leq1000, P_i = -1 (1 \leq i \leq N)$
2. （9 分）$N \leq1000, P_1 = -1, P_i = i-1 (2 \leq i \leq N)$
3. （16 分）$N \leq 1000, P_i < i (1 \leq i \leq  N)$．
4. （20 分）$P_i < i (1 \leq i \leq N)$
5. （19 分）$N \leq 1000$
6. （30 点）无其他限制


---

---
title: "有序表的合并"
layout: "post"
diff: 普及/提高-
pid: P1366
tag: ['O2优化']
---
# 有序表的合并
## 题目描述

给出两个数列 $a, b$，均按不降序排序。其中保证 $a$ 中没有重复的数字。

现在请你求出：$a$ 中每一个数字在 $b$ 中出现了几次？
## 输入格式

**本题单测试点内有多组测试数据**。

输入的第一行是一个整数，表示数据组数 $T$。接下来按顺序给出每组数据的输入信息：

第一行为两个整数，依次表示 $a$ 数列的长度 $n$ 和 $b$ 数列的长度 $m$。  
第二行有 $n$ 个整数表示数列 $a$，第 $i$ 个整数表示 $a_i$。  
第三行有 $m$ 个整数表示数列 $b$，第 $i$ 个整数表示 $b_i$。
## 输出格式

为了避免输出过大，对于每组数据，请你输出一行一个整数，表示数列 $a$ 的每个数在 $b$ 中出现次数的**按位异或和**。

形式化的，设 $a_i$ 在 $b$ 中出现了 $c_i$ 次，则你需要输出 $c_1 \bigoplus c_2 \bigoplus \dots \bigoplus c_n$ 的值，其中 $\bigoplus$ 表示按位异或操作。你可以参考提示来完成计算。
## 样例

### 样例输入 #1
```
1
3 5
1 3 6
1 3 3 5 5
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
1
9 4
1 2 3 4 5 6 7 8 9
1 1 4 5
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
2
3 5
1 3 6
1 3 3 5 5
9 4
1 2 3 4 5 6 7 8 9
1 1 4 5
```
### 样例输出 #3
```
3
2
```
## 提示

### 样例 1 解释

- $a_1 = 1$ 在 $b$ 中出现了 $1$ 次。
- $a_2 = 3$ 在 $b$ 中出现了 $2$ 次。
- $a_3 = 6$ 在 $b$ 中出现了 $0$ 次。

故输出为 $1 \bigoplus 2 = 3$。

### 样例 2 解释

$1, 4, 5$ 分别在 $b$ 中出现了 $2, 1, 1$ 次，故输出为 $2 \bigoplus 1 \bigoplus 1 = 2$。

### 数据规模与约定

对于全部的测试点，保证：
- $1 \leq T \leq 10$；
- $1 \leq n, m \leq 10^7$，$\sum (n + m) \leq  10^7$；
- $1 \leq a_i, b_i < 2^{64}$，且 $a_i < a_{i + 1}$，$b_i \leq b_{i + 1}$。

其中 $\sum (n+m)$ 表示单测试点内所有 $n$ 与 $m$ 的和，即输入数列的总长度不超过 $10^7$。

### 提示

- 请注意大量数据读入对程序效率造成的影响，选择合适的读入方式，避免超时。
- 请采用合适的数据类型存储变量，避免溢出。
- 如果你不知道什么是按位异或和，可以在你的代码里添加如下的函数：

```cpp
template <class T>
T getXorSum(T *begin, T *end) {
  T ret = 0;
  for (T *it = begin; it != end; ++it) ret ^= *it;
  return ret;
}
```
这一函数的作用是计算传入数组（包括 `std::vector`）某一左闭右开区间的按位异或和，返回值类型与传入数组的类型相同，调用方法与 `std::sort` 类似，例如，要求数组 $a$ 的 $a_1 \sim a_n$ 的按位异或和，则调用 `getXorSum(a + 1, a + 1 + n)`，求 $a_0 \sim a_{n - 1}$ 的按位异或和，则调用 `getXorSum(a, a + n)`。如果 $a$ 是 `std::vector`，则将上述调用代码里的 `a` 均改为 `a.begin()` 即可。



---

---
title: "NOI元丹"
layout: "post"
diff: 普及/提高-
pid: P1371
tag: []
---
# NOI元丹
## 题目描述

小A打算开始炼 $\texttt{NOI}$ 元丹（什么鬼），据说吃了可以提高 $\texttt{NOI}$ 时的成绩。

是这么练的。元丹有三种元核，`N`、`O`、`I`。现有很多个这样原核，按顺序排成一行。炼元丹时，从左往右分别挑出 `N`、`O`、`I` 三个原核吞下。

现在他关心，有几种服用方式……且慢！

他觉得服用方式太少，以至于不能成仙。所以他可以通过某个途径，得到 `N`、`O`、`I` 的三种原核中的**任意一个**，至于哪一种由他决定。然后他将获得这个原核的插入到这一排原核中的任意位置（包括最前最后）。

现在你要知道，新的元核序列中能有多少种 `N`、`O`、`I` 的取出方式。子串的字母并不要求连续。
## 输入格式

第一行，一个整数 $N$，表示字符串的长度。

第二行，一行字符串，里面只有只有 `N`、`O`、`I` 三种字母。
## 输出格式

表示出最多可以提炼出来的 $\texttt{NOI}$ 元丹的方案种数。
## 样例

### 样例输入 #1
```
5
NOIOI
```
### 样例输出 #1
```
6
```
## 提示

样例解释：

他可以获取一个 `N` 元核，加到最前面。

```plain
NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI | NNOIOI
~ ~~   | ~ ~  ~ | ~   ~~ |  ~~~   |  ~~  ~ |  ~  ~~
```
对于 $30\%$ 的数据 $N \le 200$。

对于 $50\%$ 的数据 $N \le 2000$。

对于 $100\%$ 的数据 $3 \le N \le 10 ^ 5$。



---

---
title: "[入门赛 #21] 星云 hard ver."
layout: "post"
diff: 普及/提高-
pid: P1708
tag: ['2024', 'O2优化', '语言月赛']
---
# [入门赛 #21] 星云 hard ver.
## 题目背景

本题与 easy ver. 的区别在于本题**有**多组测试数据。

你看，那一抹云，衬着星星，多美啊！
## 题目描述

定义星云数为位数不大于 $n$ 且各数位之和不超过 $k$ 的正整数，给定 $n,k$，求星云数的个数。
## 输入格式

**本题有多组测试数据。**

第一行输入一个整数 $T$，表示测试数据组数。

对于每组测试数据：  
第一行输入两个整数 $n,k$。
## 输出格式

对于每组测试数据：  
输出一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
2
2 1
3 2

```
### 样例输出 #1
```
2
9

```
## 提示

### 数据规模与约定

对于 $50\%$ 的数据，$1 \leq n \leq 2$。  
对于 $100\%$ 的数据，$1 \leq T \leq 10^5$，$1 \leq n \leq 7$，$1 \leq k \leq 100$。


---

---
title: "跑步"
layout: "post"
diff: 普及/提高-
pid: P1793
tag: ['NOI 导刊']
---
# 跑步
## 题目描述

新牛到部队，CG 要求它们每天早上搞晨跑，从 $A$ 农场跑到 $B$ 农场。从 $A$ 农场到 $B$ 农场中有 $n-2$ 个路口，分别标上号，$A$ 农场为 $1$ 号，$B$ 农场为 $n$ 号，路口分别为 $2,3,4,\cdots,n-1$ 号，从 $A$ 农场到 $B$ 农场有很多条路径可以到达，而 CG 发现有的路口是必须经过的，即每条路径都经过的路口，CG 要把它们记录下来，这样 CG 就可以先到那个路口，观察新牛们有没有偷懒，而你的任务就是找出所有必经路口。
## 输入格式

第一行两个用空格隔开的整数 $n\ (3 \le n \le 2000)$ 和 $e\ (1 \le e \le 8000)$。

接下来从第 $2$ 到第 $e+1$ 行，每行两个用空格隔开的整数 $p$ 和 $q$，表示路口 $p$ 和 $q$ 之间有路径直达。

输入数据保证必经路口一定存在，并且每个路口都和 $A$ 农场、$B$ 农场相连通。
## 输出格式

第一行一个整数 $m$，表示必经路口的数目。

第二行按从小到大的顺序依次输出每个必经路口的编号，每两个数之间用一个空格隔开。
## 样例

### 样例输入 #1
```
6 6

1 2

2 4

2 3

3 5

4 5

5 6


```
### 样例输出 #1
```
2

2 5


```


---

---
title: "小明搬家"
layout: "post"
diff: 普及/提高-
pid: P1798
tag: ['NOI 导刊']
---
# 小明搬家
## 题目描述

小明要搬家了，大家都来帮忙。

小明现在住在第 $N$ 楼，总共 $K$ 个人要把 $M$ 个大箱子搬上 $N$ 楼。

最开始 $M$ 个箱子都在 $1$ 楼，但是经过一段混乱的搬运已经乱掉了。最后大家发现这样混乱地搬运过程效率太低了，于是总结出了提高效率的方法。

大家的速度都是每分钟上（或下）一层楼。所有向上走的人手中都拿一个箱子，所有向下走的人手中都不拿箱子。到达第 $N$ 层立刻放下箱子向下走，到达第 $1$ 层立刻拿起箱子向上走。当一个人向上走，另一人向下走而在楼道里相遇时，向上走的人将手中的箱子交给另一人，两人同时反向。即原来拿箱子向上走的人不拿箱子向下走，原来不拿箱子向下走的人现拿着箱子向上走。

求将所有箱子搬完所需的最短时间。
## 输入格式

第一行 $N, K, M$，分别表示楼层数、人数、还放在一楼地上的箱子数。

接下来 $K$ 行，每行两个数 $A_i,B_i$。

$A_i$ 表示第 $i$ 人现所在的楼层数，$B_i$ 为 $0$ 或 $1$，为 $0$ 表示第 $i$ 人正拿着箱子向上走，为 $1$ 表示第 $i$ 人不拿箱子向下走。

输入满足没有任意两人正在同一楼层，在第 $1$ 层的人一定正拿着箱子向上走，在第 $N$ 层的人一定正不拿箱子向下走。
## 输出格式

仅包含一个整数，为搬完箱子的时间。

## 样例

### 样例输入 #1
```
5 2 4

1 0

3 0


```
### 样例输出 #1
```
20
```
## 提示

对于 $30\%$ 的数据，$K \leq 100$，$M \leq 100$；

对于 $60\%$ 的数据，$K \leq 1000$，$M \leq 10^9$;

对于 $100\%$ 的数据，$N \le 10^9$，$K \le 5 \times 10^5$，$M \le 10^9$。


---

---
title: "蠕虫游戏"
layout: "post"
diff: 普及/提高-
pid: P1815
tag: []
---
# 蠕虫游戏
## 题目描述

蠕虫是一个古老的电脑游戏，它有许多版本。但所有版本都有一个共同的规则：操纵一条蠕虫在屏幕上转圈，并试着去避免撞到自己或障碍物。

这里我们将模拟一个简单的版本。游戏将在 $50 \times 50$ 的棋盘上进行，棋盘的左上角为 $(1,1)$，蠕虫在初始时是一串 $20$ 个相连的方格。所谓相连是指方格在水平或垂直方向上相接。蠕虫开始时是水平地伸展开的，从 $(25,11)$ 到 $(25,30)$。其中 $(25,30)$ 是它的头。蠕虫只能向东 $\verb!E!$、西 $\verb!W!$、南 $\verb!S!$、北 $\verb!N!$ 四个方向移动，但不能向自己移动，因此在开始时向西 $\verb!W!$ 是不允许的。每次移动时，蠕虫向给定的方向移动，一次只移一格，并且保持它的长度不变。因此只有蠕虫的头和尾所占据的方格在移动一步后被改变。注意：蠕虫的头能移动到虫尾刚刚让出的空格。

你将被给定一系列移动指令并模拟虫的移动，直到蠕虫撞上了自己，或者蠕虫越出了棋盘，或者蠕虫成功地完成了这些指令。在前两种情况下你应当忽略剩下的指令。
## 输入格式

每个输入文件包含了多组数据，每个数据占两行。

第一行是一个整数 $n\ (n<100)$，表示移动指令的指令数（以 $n=0$ 表示输入结束）；

第二行包括了 $n$ 个字符，只有可能是 $\verb!ESWN!$ 中的一种，字符之间没有空格，表示移动的指令。
## 输出格式

每个数据输出一行，格式为以下 $3$ 种中的一种： 

- $\texttt{The worm ran into itself on move \textrm{\it m}.}$
- $\texttt{The worm ran off the board on move \textrm{\it m}.}$
- $\texttt{The worm successfully made all \textrm{\it m} moves.}$

其中，$m$ 是你要决定输出的步数。

## 样例

### 样例输入 #1
```
18 
NWWWWWWWWWWSESSSWS 
20 
SSSWWNENNNNNWWWWSSSS 
30 
EEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 
13 
SWWWWWWWWWNEE 
0
```
### 样例输出 #1
```
The worm successfully made all 18 moves. 
The worm ran into itself on move 9. 
The worm ran off the board on move 21. 
The worm successfully made all 13 moves.
```


---

---
title: "Play with Power"
layout: "post"
diff: 普及/提高-
pid: P1839
tag: ['NOI 导刊']
---
# Play with Power
## 题目描述

Masha 和 Stas 正在玩一个游戏。在游戏的开始，给出一个数  $n$，同时有两个正整数  $a,b$，初始时满足 $a^b\le n$。

Masha 先手。每一回合，玩家要将 $a,b$ 的其中一个数加上  $1$，但不能使 $a^b>n$，否则该玩家输。

现在，Masha 想知道，假如两人都使用最优策略，对于同一个 $n$ 和不同的 $a,b$，谁将获胜呢？

## 输入格式

第一行一个数  $n$。

第二行一个数  $t$，表示数据组数。

接下来  $t$ 行，每行两个数  $a,b$，描述每组数据。

## 输出格式

共  $t$ 行，对于每组数据：

- 若 Masha 获胜，输出 `Masha`。
- 若 Stas 获胜，输出 `Stas`。
- 若平手，输出 `Missing`。
## 样例

### 样例输入 #1
```
9 

2 

2  2 

1  4 
```
### 样例输出 #1
```
Masha 

Missing
```
## 提示

#### 数据规模与约定

- 对于  $30\%$ 的数据，有  $1\le n\le 2\cdot10^3$。
- 对于  $100\%$ 的数据，有  $1\le n\le 10^8$， $1\le t\le 100$， $1\le a,b,a^b\le n$。


---

---
title: "影像之结构化特征"
layout: "post"
diff: 普及/提高-
pid: P1845
tag: ['NOI 导刊']
---
# 影像之结构化特征
## 题目描述

在影像比对中，有一种方法是利用影像中的边缘（edge）信息，计算每个边缘资讯中具有代表性的结构化特征，以作为比对两张影像是否相似的判断标准。Water-filling 方法是从每个边缘图的一个端点开始，绕着相连的边缘点走并依序编号。若走到某一步时，遇到一个以上不同的连接点，则分成不同路径同时继续走，直到没有任何连接点为止。如果一个点和另一个点为上下左右相邻，就称为连接。

例如，在图 $1$ 的影像中包含三个边缘图，每个边缘图由一些互相连接的边缘点构成。图中以黑色的方块代表边缘点，白色的方块代表背景。在 Water-filling 方法中，首先，从第一行（row）开始，由左至右，由上至下，先找到第一个黑点并编号为 $1$。接着，找 $1$ 的下一个尚未编号的连接点并编号为 $2$。依此方法继续往下一个点前进依次编号。在编号 $6$ 的点之后有两个尚未编号的连接点，此时，则分为两条路线，并同时编号为 $7$ 继续往下走。当走到没有任何的相连点时，则结束现有边缘图的编号，并继续对影像中的其它边缘图编号。走完图 $1$ 所有边缘图后所得到的编号如图 $2$ 所示。所以，走完这三个边缘图所需要的步数分别为 $12$、 $7$ 及 $3$；所以，$12$、$7$ 及 $3$ 可以作为代表此张影像的结构化特征。请注意：位于斜对角上的两点不能算做连接，如：

![](https://cdn.luogu.com.cn/upload/pic/704.png)

请写一个程序计算每个影像中，以 Water-filling 方法走完其中所有的边缘图后，将每个边缘图需走的步数依走访的顺序列出。
## 输入格式

输入文件包含一个正方形的影像。每组影像以图的宽度 $n$ 开头 $(1 \le n \le 1000)$。接下来的 $n$ 行代表影像的内容：$0$ 表示背景的白点，$1$ 表示黑色的边缘点。
## 输出格式

对每一个输入的影像，以 Water-filling 方法走完所有的边缘图后，先印出此张影像中共有几个边缘图。接着，将每个边缘图需走的步数按升序列出。
## 样例

### 样例输入 #1
```
10 
0000000000 
0011110000 
0000010000 
0011111000 
0010110100 
0010010110 
0011110010 
0100010010 
0100000110 
0100000000 
```
### 样例输出 #1
```
3 
3 
7 
12
```


---

---
title: "接力赛跑"
layout: "post"
diff: 普及/提高-
pid: P1882
tag: []
---
# 接力赛跑
## 题目描述

$N (1\le N\le 1000)$ 只奶牛（编号为 $1$ 到 $N$）在进行一个特别的接力赛跑，这个比赛特别之处在于，若干只奶牛可以同时跑。

在 $t=0$ 时刻，牛 $1$ 开始沿着跑道跑。

通常，牛 $i$ 跑完一圈需要的时间为 $L_i (1\le L_i\le 1000)$ 秒。当它重新越过起点线的瞬间，它会通知另外 $M_i (1\le M_i\le N)$ 只奶牛 $A_{ij} (1\le j\le M_i)$ 起跑。注意可能出现 $M_i=0$ 并且 $A_i$ 不存在的情况。

每一只开始赛跑的奶牛，等到它回到起点时，都会通知其他奶牛起跑。可能出现多只奶牛通知同一只奶牛起跑的情况，但是每一只奶牛只愿意跑一圈，所以它被第二次叫到的时候就不愿意再跑了。

农场主希望你帮他确定总的赛跑时间（也就是从比赛开始到最后一只奶牛越过终点的时间）。
## 输入格式

第一行一个整数 $N$，表示参赛的牛的数量。

第 $2$ 行到第 $N+1$ 行：第 $i+1$ 行包含多个用空格隔开的整数：$L_i$、$M_i$ 和 $M_i$ 个整数 $A_{ij}$。
## 输出格式

一个整数，表示整个比赛结束的时间。
## 样例

### 样例输入 #1
```
5
4 2 2 4
3 3 1 3 4
7 1 5
4 2 3 5
1 0
```
### 样例输出 #1
```
14
```


---

---
title: "不想兜圈的老爷爷"
layout: "post"
diff: 普及/提高-
pid: P1992
tag: ['洛谷原创']
---
# 不想兜圈的老爷爷
## 题目描述

一位年过古稀的老爷爷在乡间行走

而他不想兜圈子 因为那会使他昏沉

偶然路过小A发扬助人为乐优良传统 带上地图 想知道路况是否一定使他清醒

usqwedf补充：为了让欢乐赛充满欢乐 小A还想问你一些数学作业……

## 输入格式

一行 n m k 表示乡间共有 n 个村庄 m 条道路

接下来 m 行 每行两个整数 x y 表示 村 x -> 村 y 单向连通

## 输出格式

第一行 输出 Yes/No [清醒/不清醒]

第二行 若为 Yes 输出 2^k对9997取模 反之 输出 k^2

## 样例

### 样例输入 #1
```
3 3 3

1 2

2 3

3 1
```
### 样例输出 #1
```
No

9


```
## 提示

[数据范围]

对于70%的数据 1<=n<=100 1<=m<=1000 1<=k<=30

对于100%的数据 1<=n<=1000 1<=m<=10000 1<=k<=10^9

另外，基于欢乐赛性质，我们保证数据当中至少有 20% 答案为 No



---

---
title: "硬币的面值"
layout: "post"
diff: 普及/提高-
pid: P2001
tag: ['洛谷原创']
---
# 硬币的面值
## 题目描述

小 A 有 $n$ 种硬币，现在要买一样不超过 $m$ 元的商品，他不想得到找钱（多脏啊），同时又不想带太多的硬币，且硬币可以重复，现在已知这 $n$ 种硬币的价值，请问最少需要多少硬币就能组合成所有可能的价格？

## 输入格式

第一行两个数：$n, m$。

下一行，共 $n$ 个数字，表示硬币的面值。

## 输出格式

一行一个数，表示最少需要多少硬币。如果无解请输出 `No answer!!!`。
## 样例

### 样例输入 #1
```
5 31

1 2 8 4 16


```
### 样例输出 #1
```
5


```
## 提示

【数据范围】

只有 9、10 会卡人，放心贪

对于 $20\%$ 的数据，$1 \le n \le 10$，$1 \le m \le 100$。  
对于 $60\%$ 的数据，$1 \le n \le 1000$，$1 \le m \le 10000$。  
对于 $80\%$ 的数据，$1 \le n \le 30000$，$1 \le m \le 2 \times {10}^9$。  
对于 $100\%$ 的数据，$1 \le n \le 2 \times {10}^5$，$1 \le m \le 2^{63}$。



---

---
title: "分队问题"
layout: "post"
diff: 普及/提高-
pid: P2062
tag: []
---
# 分队问题
## 题目描述

给定 $n$ 个选手，将他们分成若干只队伍。其中第 $i$ 个选手要求自己所属的队伍的人数大等于 $a_i$ 人。

在满足所有选手的要求的前提下，最大化队伍的总数。

注：每个选手属于且仅属于一支队伍。
## 输入格式

第一行一个整数 $n$，表示人数。

以下 $n$ 行，每行一个整数表示 $a_i$。
## 输出格式

输出队伍总数的最大值。数据保证有解。

## 样例

### 样例输入 #1
```
5

2

1

2

2

3 


```
### 样例输出 #1
```
2
```
## 提示

对于 $20\%$ 的数据，$n \leq 10$。

对于 $40\%$ 的数据，$n \leq 1000$。

对于 $60\%$ 的数据，$n \leq 10000$。

对于 $100\%$ 的数据，$1 \leq n \leq 10^6$。


---

---
title: "数字对"
layout: "post"
diff: 普及/提高-
pid: P2090
tag: []
---
# 数字对
## 题目描述

对于一个数字对(a, b)，我们可以通过一次操作将其变为新数字对(a+b, b)或(a, a+b)。

给定一正整数n，问最少需要多少次操作可将数字对(1, 1)变为一个数字对，该数字对至少有一个数字为n。

## 输入格式

第一行一个正整数 n

## 输出格式

一个整数表示答案。

## 样例

### 样例输入 #1
```
5
```
### 样例输出 #1
```
3
```
## 提示

样例解释：

(1,1)  →  (1,2)  →  (3,2)  →  (5,2)

对于30%的数据， 1 <= n <= 1000

对于60%的数据， 1 <= n <= 20000

对于100%的数据，1 <= n <= 10^6



---

---
title: "[HNOI2002] DNA分子的最佳比对"
layout: "post"
diff: 普及/提高-
pid: P2268
tag: ['2002', '各省省选', '湖南']
---
# [HNOI2002] DNA分子的最佳比对
## 题目描述

$\operatorname{DNA}$ 分子是人类遗传信息的载体，它间接地指导蛋白质的合成。$\operatorname{DNA}$ 分子是由四种核苷酸组成的长链，这四种核苷酸分别是腺嘌呤核苷酸（用 $\operatorname{A}$ 代表）、鸟嘌呤核苷酸（用 $\operatorname{G}$ 代表）、胞嘧啶核苷酸（用 $\operatorname{C}$ 代表）和胸腺嘧啶核苷酸（用 $\operatorname{T}$ 代表）。习惯上用一个字符集为 $\{\operatorname{A,T,C,G}\}$ 的字符串来表示一个 $\operatorname{DNA}$ 分子序列，如 $\operatorname{CGTTAGA}$ 。

在生物进化过程中， $\operatorname{DNA}$ 分子可能发生各种各样的突变。这种突变形成了生物遗传信息的改变，从而使生物得以分化，构成了生物的多样性。

主要的突变有三种：

1. 在一个 $\operatorname{DNA}$ 序列中插入一个新的核苷酸，

2.  $\operatorname{DNA}$ 序列中丢失了一个核苷酸，

3.  $\operatorname{DNA}$ 序列中的某个核苷酸被另一个核苷酸所取代。

所谓两个 $\operatorname{DNA}$ 序列的一个比对是寻找一种排列方式，使得两个 $\operatorname{DNA}$ 序列在同样的位置上有相同的核苷酸，而若在同样的位置上两个DNA序列的核苷酸不同，则是由三种突变之一得到。例如，对两个 $\operatorname{DNA}$ 序列 $T_1 =\operatorname{ATCAG}$ ， $T_2 =\operatorname{ACTAG}$ ，可以按如下方式比对，（ $-$ 表示空白）

比对一：

| $T_1$ | $T_2$ |
| :----------- | :----------- |
| $A$ | $A$ |
| $T$ | $-$ |
| $C$ | $C$ |
| $-$ | $T$ |
| $A$ | $A$ |
| $G$ | $G$ |

也可以按如下方式比对

比对二：

| $T_1$ | $T_2$ |
| :----------- | :----------- |
| $A$ | $A$ |
| $T$ | $C$ |
| $C$ | $T$ |
| $A$ | $A$ |
| $G$ | $G$ |

如果两个 $\operatorname{DNA}$ 序列在相同的位置上有越多相同的核苷酸对，则表明它们之间越相似，即它们存在功能上的相似性和进化史上的亲缘关系。

对于两个 $\operatorname{DNA}$ 序列的一个比对，规定如下得分方式：

1. 一个同样的位置上有相同的核苷酸对，则可得 $1$ 分；

2. 一个同样的位置上有不同的核苷酸对，则得 $0$ 分；

3. 如果在某个位置上一个序列有核苷酸，而另一个序列在该位置上为 $-$，则得 $-2$ 分。例如，比对一的得分是 $0$ 分，比对二的得分是 $3$ 分。

问题是：对于两个 $\operatorname{DNA}$ 序列，寻找一种比对方式，使得它们的得分最高。
## 输入格式

输入数据共有两行。

第一行为 $\text{DNA}$ 序列 $T _ 1$，第二行为 $\text{DNA}$ 序列 $T _ 2$。序列的长度不大于 $1000$。序列中的字母是英文小写或者大写字母。

## 输出格式

程序运行结束时，在屏幕上输出所找出的最大的得分。

## 样例

### 样例输入 #1
```
Atcag
Actag

```
### 样例输出 #1
```
3
```


---

---
title: "就是干！"
layout: "post"
diff: 普及/提高-
pid: P2301
tag: []
---
# 就是干！
## 题目背景

loidc 有着特别的作死技巧，但是有一天他特别的技巧失效了。

Mr.Cao 发现了他在与其他哲学家摔跤，于是 Mr.Cao 带着浩浩荡荡的老师大军来讨伐 Loidc。
## 题目描述

眼看着老师大军浩浩荡荡的向机房前进。LOI 的同学们决定动用自己的力量来保卫他们的好朋友 loidc。现在每个人都要挑选自己的武器——两根木棍。一根用做远距离投掷，另一根用做近距离搏斗。每个人都想挑到最好的，但这是不可能的。但是为了让多数人满意，也为了减少大家的矛盾。cony 设计了一个矛盾指数，这个指数就是每个人的不舒服指数和，不舒服指数就 $(L1-L2)^2$，其中 $L1,L2$ 分别是两根木棍的长度。

cony 决定让矛盾指数最少，于是他来向你寻求帮助，希望你能告诉他矛盾指数至少有多少。
## 输入格式

第一行两个数 $m,n$。

表示有 $n$ 个人，$m$ 个木棍。

接下来 $m$ 个数表示每个木棍（肯定有解）。
## 输出格式

一个数，最少的矛盾指数。
## 样例

### 样例输入 #1
```
5 2
3
1
4
5
8

```
### 样例输出 #1
```
5
```
## 提示

$m \leq 2000,n \leq 500$


---

---
title: "loidc，卖卖萌"
layout: "post"
diff: 普及/提高-
pid: P2309
tag: []
---
# loidc，卖卖萌
## 题目背景

loidc 萌萌哒。

他最近一直在靠卖萌追求他的真爱——vivym，经过几轮攻势后 vivym 酱眼看就要被他所攻略。擅长数据结构的 vivym 决定利用强大的数据结构之力帮助自己逃脱。
## 题目描述

vivym 给了 loidc 一串阿拉伯数字。他将一个数串的每个数字之和定义为该数串的数串和，vivym 要求 loidc 求出数串中有多少个子串的数串和为正数。他想了半天总是解决不好，于是他便将这一棘手的问题交给了编程能力极强的你，他希望你能在 1 s 内解决。不然 vivym 就要闪现过墙幽灵疾步跑掉了。
## 输入格式

第一行一个数 $n$，表示数串的长度。

第二行一共 $n$ 个数，它就是那串阿拉伯数字。
## 输出格式

一个数，表示数串中有多少个子串的数串和为正数。
## 样例

### 样例输入 #1
```
3
8 -9 2

```
### 样例输出 #1
```
3
```
## 提示

- 对于 $30\%$ 的数据：$n\leq 10^3$；
- 对于 $100\%$ 的数据：$1 \leq n\leq 10^5$。

题目读入的其他变量均介于 $-100\ldots 100$ 之间。


---

---
title: "loidc，看看海"
layout: "post"
diff: 普及/提高-
pid: P2310
tag: []
---
# loidc，看看海
## 题目背景

loidc喜欢大海。在他放假的时候他经常一个人跑到海边独自玩耍。

在浪花的冲击下，他可以忘记打代码的烦躁，真是惬意极了。


虽然今天是周六，但今天可是11.8号。在早晨放松之余他可不能忘掉OI知识。

## 题目描述

loidc准备带着LOI的队员们考完试后到海边玩耍。所以他想写一个程序让队员们了解在一段时间内海浪的情况。他的命令是这样的x y k输入的，这是要询问在时间[x,y]内海浪高度第k小的单位时刻是那个时刻。

但是在他刚准备打开Dev-pas++ 的时候，loidc发现他的电脑坏掉了。于是一向喜欢偷懒的他就向你求助。他希望你能在1S内完成程序的运行。


当然loidc会提前告诉你所有时段海浪的高度，这点你放心。至于他是如何得到的，这就不得而知了。

## 输入格式

第一行一个数n，表示总时间段。

第二行n个数，一次表示1~n单位时刻海浪的高度。（数据保证各个时刻海浪高度均不相同）

第三行一个数m，表示有m个询问。

接下来m行，每行3个数x y k，表示一个询问。（数据保证k<=y-x+1）

## 输出格式

一共m行，是每个询问的回答。

## 样例

### 样例输入 #1
```
5
1 2 3 4 5
3
2 4 2
1 5 1
3 3 1

```
### 样例输出 #1
```
3
1
3

```
## 提示

30%   n<=200   m<=200

100%  n<=4000  m<=4000

海浪高度取值范围1——100000。



---

---
title: "loidc，想想看"
layout: "post"
diff: 普及/提高-
pid: P2311
tag: []
---
# loidc，想想看
## 题目背景

话说 loidc 现在正在家闲的无聊，这天 loidc 正在观看比赛，他突然很有兴趣想了解一段时间内中国队获得金牌的情况。
## 题目描述

还有一点，loidc 有特殊能力，可以预知未来，他可以准确的猜到中国队在某一个单位时间内获得的金牌数。但是，还有但是！由于工作量太大，再加上猜金牌要费很多的体力，所以他无法准确的计算出一段时间内获得的金牌数最大的单位时间是哪个，就因为这样 loidc 很郁闷。他思索来思索去就想到了你，因为他知道你是个 OIer，所以他对你呵呵一笑就把问题交给你了，loidc 希望你能在 1 s 内得出答案。

## 输入格式

第一行一个 $n$，表示有 $n$ 个时间段。

接下来一行有 $n$ 个数 $a_i$，$a_i$ 表示 loidc 猜到的中国队在第 $i$ 个时间段内获得的金牌数。

然后，第三行有一个数 $m$，表示 loidc 有个问题。

接下来有 $m$ 行，每行有 $2$ 个数分别为 $x_i$，$y_i$，表示要询问在时间段 $[x_i,y_i]$ 内中国队获得金牌数最大的是哪个单位时间。

loidc 有一个习惯，他问问题是有先后的，也就是说后一个问题总是在前一个问题之后提出的。

注意对于第 $i$ 个提问和第 $i+1$ 个提问严格的有 $x_i \le x_{i+1}$、$y_i \le y_{i+1}$。
## 输出格式

一共 $m$ 行，每行一个 $k_i$，表示第 $i$ 个询问的答案。
## 样例

### 样例输入 #1
```
5
2 3 4 5 6
5
1 1
1 2
2 3
3 4
4 5

```
### 样例输出 #1
```
1
2
3
4
5

```
## 提示

$30\%$：$n \le 1000$，$m \le 1000$。

$100\%$：$n \le {10}^5$，$m \le {10}^5$。

其他有关输入输出均小于 `maxlongint`。

数据保证 $a_i$ 没有相同的。


---

---
title: "[SDOI2005] 位图"
layout: "post"
diff: 普及/提高-
pid: P2335
tag: ['2005', '各省省选', '山东']
---
# [SDOI2005] 位图
## 题目描述

现在我们给出一个 $n\ \times m$ 的单色位图，且该图中至少含有一个白色的像素。我们用 $(i,j)$ 来代表第 $i$ 行第 $j$ 列的像素，并且定义两点 $p_1=(i_1,j_1)$ 和 $p_2=(i_2,j_2)$ 之间的距离为：

$$d(p_1,p_2)=|i_1-i_2|+|j_1-j_2|$$

### 任务

请写一个程序，读入该位图，并对于每个像素，计算出离该像素最近的白色像素与它的距离。把结果输出。
## 输入格式

第一行包括两个用空格分开的整数 $n$ 和 $m$，$1 \le n \le 150$，$1 \le m \le 150$。

以下的 $n$ 行每行包括一个长度为 $m$ 的整数为 $0$ 或 $1$，在第 $i+1$ 行的第 $j$ 个字符如果为 $1$，那么表示像素 $(i,j)$ 为白的，否则为黑的。
## 输出格式

输出一个 $n\ \times m$ 的数表，其中的第 $i$ 行的第 $j$ 个数字为 $f(i,j)$ 表示像素 $(i,j)$ 到最近的白色像素的距离。
## 样例

### 样例输入 #1
```
3 4
0 0 0 1
0 0 1 1
0 1 1 0
```
### 样例输出 #1
```
3 2 1 0
2 1 0 0
1 0 0 1
```


---

---
title: "[USACO07FEB] Bronze Lilypad Pond B"
layout: "post"
diff: 普及/提高-
pid: P2385
tag: ['2007', 'USACO']
---
# [USACO07FEB] Bronze Lilypad Pond B
## 题目描述

为了让奶牛们娱乐和锻炼，农夫约翰建造了一个美丽的池塘。这个长方形的池子被分成了 M 行 N 列个方格（1 ≤ M, N ≤ 30） 。一些格子是坚固得令人惊讶的莲花，还有一些格子是岩石，其余的只是美丽、纯净、湛蓝的水。

贝西正在练习芭蕾舞，她站在一朵莲花上，想跳到另一朵莲花上去，她只能从一朵莲花跳到另一朵莲花上，既不能跳到水里，也不能跳到岩石上。

贝西的舞步很像象棋中的马步：每次总是先横向移动 M1 (1 ≤ M1 ≤ 30)格，再纵向移动 M2 (1 ≤ M2 ≤ 30, M1≠M2)格，或先纵向移动 M1 格，再横向移动 M2 格。最多时，贝西会有八个移动方向可供选择。

给定池塘的布局和贝西的跳跃长度，请计算贝西从起点出发，到达目的地的最小步数，我们保证输入数据中的目的地一定是可达的。

## 输入格式

第一行：四个用空格分开的整数：M，N，M1 和 M2

第二行到 M + 1 行：第 i + 1 行有 N 个用空格分开的整数，描述了池塘第

i 行的状态：0 为水，1 为莲花，2 为岩石，3 为贝西所在的起点，4 为贝西想去

的终点。

## 输出格式

第一行：从起点到终点的最少步数。

## 样例

### 样例输入 #1
```
4 5 1 2
1 0 1 0 1
3 0 2 0 4
0 1 2 0 0
0 0 0 1 0
```
### 样例输出 #1
```
2
```


---

---
title: "[SDOI2005] 矩形"
layout: "post"
diff: 普及/提高-
pid: P2449
tag: ['2005', '各省省选', '山东']
---
# [SDOI2005] 矩形
## 题目描述

现在我们在一个平面上画了n个矩形。每一个矩形的两边都与坐标轴相平行，且矩形定点的坐标均为整数。现我们定义满足如下性质的图形为一个块：

1.每一个矩形都是一个块；

2.如果两个块有一段公共的部分，那么这两个块就会形成一个新的块，否则这两个块就是不同的。

示例：

图1中的矩形形成了两个不同的块。图2中的矩形形成了一个块。

 ![](https://cdn.luogu.com.cn/upload/pic/1579.png) 

任务：

请写一个程序：

1.从文本文件PRO.IN中读入各个矩形的顶点坐标；

2.找出这些矩形中不同的块的数目；

3.把结果输出到文本文件PRO.OUT中。

## 输入格式

文本文件PRO.IN的第一行包括一个整数n，1  n  7000，为矩形的数目。以下的n行为矩形顶点的坐标。每一个矩形都是用四个整数来描述的：左下角的x坐标、左下角的y坐标、右上角的x坐标和右上角的y坐标。所有的坐标都是不大于10000的非负整数。

## 输出格式

在文本文件PRO.OUT中输出唯一的一个整数——这些矩形所形成的不同的块的数目。

## 样例

### 样例输入 #1
```
9

0 3 2 6

4 5 5 7

4 2 6 4

2 0 3 2

5 3 6 4

3 2 5 3

1 4 4 7

0 0 1 4

0 0 4 1


```
### 样例输出 #1
```
2
```


---

---
title: "[AHOI2005] 矿藏编码"
layout: "post"
diff: 普及/提高-
pid: P2539
tag: ['2005', '各省省选', '安徽']
---
# [AHOI2005] 矿藏编码
## 题目描述

探险机器人在 Samuel 星球发现了一片广阔的矿藏区。在这个矿藏区中，有高耸的山峰，也有平坦的平地。为了方便考察，整个矿藏区被划分 个格子区域。

例如下图，就是一个 $K=2$ 即 $4 \times 4$ 的矿藏区：

 ![](https://cdn.luogu.com.cn/upload/pic/1646.png) 

其中黑色表示山峰，白色表示平地。

探险空间站已经将这片矿藏区的详细信息扫描并记录下来。由于矿藏区的面积实在太大，所以科学家们采用了一种特殊的编码方式记录。

- 如果这片矿藏区全部是平地，则编码为 `0`。
- 如果这片矿藏区全部是山峰，则编码为 `1`。
- 否则，将矿藏区均匀划分成 $4$ 份，如下 所示：
     ![](https://cdn.luogu.com.cn/upload/pic/1647.png) 

依次对每份进行编码，得 $S_1,S_2,S_3,S_4$。该矿藏区的编码 $S$ 为 $2S_1S_2S_3S_4$。
例如上图中，矿藏区的编码为：`2021010210001`。

小联希望你能根据给定的编码统计出这片矿藏区一共有多少格子区域是平地。

## 输入格式

第一行有一个整数K，表示有矿藏区的规模为 $K$（$1 < K < 50$）。

第二行有一串编码，由  `0`、`1` 组成，长度不超过 $200$，表示该矿藏区的编码。
## 输出格式

单行输出一个整数，表示矿藏区中一共有多少格子是平地。

## 样例

### 样例输入 #1
```
2
2021010210001
```
### 样例输出 #1
```
9
```


---

---
title: "[AHOI2004] 实验基地"
layout: "post"
diff: 普及/提高-
pid: P2545
tag: ['2004', '各省省选', '安徽']
---
# [AHOI2004] 实验基地
## 题目描述

![](https://cdn.luogu.com.cn/upload/pic/1656.png)

## 输入格式

第一行有一个整数N(3<N<2000)，表示登陆地带的大小是2×N。随后的两行每一行有N个整数（其绝对值不超过10^6），表示对应的矩形土地的适用度评估值，各个整数之间用一个空格隔开。

## 输出格式

只有一行输出，为整数M，即所确定的实验基地的适用度。

## 样例

### 样例输入 #1
```
4
-1 2 -3 4
5 6 7 8
```
### 样例输出 #1
```
31
```


---

---
title: "[AHOI2002] 哈利·波特与魔法石"
layout: "post"
diff: 普及/提高-
pid: P2559
tag: ['2002', '各省省选', '安徽']
---
# [AHOI2002] 哈利·波特与魔法石
## 题目描述

![](https://cdn.luogu.com.cn/upload/pic/1681.png)

## 输入格式

文件中第一行有七个数，分别是 S1、 S2 、 …、 S7 ；第二行有两个数，依次分别是起点城市 i 和终点城市 j ；第三行有一个正整数 c ，c<=10000， 表示随后的 c 行中每行存放了一对能直接通达的城市的信息。 能直接通达的城市的信息由三个数组成， 依次分别是两个城市的编号和这两个城市之间的地形。城市的编号都是不超过 100 的正整

数， 但是各个城市的编号未必连续。 文件里同一行中相邻的两个数都是用一个空白字符隔开的。

## 输出格式

以一行的形式输出起点城市i 与终点城市 j 之间的最快路线所需要的时间。

## 样例

### 样例输入 #1
```
0 1 0 0 0 0 0
1 4
4
1 2 1
1 3 1
2 4 2
3 4 3
```
### 样例输出 #1
```
5
```


---

---
title: "游戏预言"
layout: "post"
diff: 普及/提高-
pid: P2649
tag: []
---
# 游戏预言
## 题目描述

John 和朋友们在玩纸牌游戏，他们一共有 $m$ 个人（包括 John）。他们的纸牌比较特殊，一共有 $n \times m$ 张牌，牌号分别为 $1,2,\dots,n \times m$，没有牌号相同的牌。每个人先拿到 $n$ 张牌，然后，每一轮，每个人出一张牌，谁最大则谁赢得这一轮。现在已知 John 手中的 $n$ 张牌，计算他最少能赢得多少轮。
## 输入格式

第一行为两个整数 $m$ 和 $n$。

第二行有 $n$ 个正整数，表示 John 手中的 $n$ 张牌的数值。
## 输出格式

仅一个整数，表示 John 最少能赢的次数。
## 样例

### 样例输入 #1
```
2 5
1 7 2 10 9
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
6 11
62 63 54 66 65 61 57 56 50 53 48
```
### 样例输出 #2
```
4
```
## 提示

对于 $100 \%$ 的数据，$2 \le m \le 20$，$1 \le n \le 50$。


---

---
title: "漂亮字串"
layout: "post"
diff: 普及/提高-
pid: P2773
tag: []
---
# 漂亮字串
## 题目描述

Caima认为O和X是最优美的两个字母，由O、X组成的串是最优美的串。在这些最优美的串中，如果任意只包含X的字串，长度不超过maxX，任意只包含O的子串，长度不超过maxO，且整个串最多有countO个O，countX个X。那么这个就是超级优美无敌串。现在Caima想知道最长的超级优美无敌串有多长，希望你告诉他。

## 输入格式

输入包含多行，至文件结束为止；

每行四个数，依次是CountO、CountX、maxO、maxX.

CountO、CountX、maxO、maxX均大于等于0小于等于1000000

## 输出格式

每组数据输出一行，一个数表示最长的超级优美无敌串的长度

## 样例

### 样例输入 #1
```
10 10 0 0
3 5 1 1
```
### 样例输出 #1
```
0
7
```


---

---
title: "[SDOI2007] 小组队列"
layout: "post"
diff: 普及/提高-
pid: P2776
tag: ['2007', '各省省选', '山东']
---
# [SDOI2007] 小组队列
## 题目背景

嘛，这道非常简单的给大家提供信心的省选题洛谷居然没有！

这么简单的题怎么可以没有！

给大家提升士气是义不容辞的责任！

所以我就来补一下啦..

值得一提的是，标程是我自己做的..

很渣，因为数据很水所以能 AC..

大神勿喷..

## 题目描述

有 $m$ 个小组， $n$ 个元素，每个元素属于且仅属于一个小组。


支持以下操作：


`push x`：使元素 `x` 进队，如果前边有 `x` 所属小组的元素，`x` 会排到自己小组最后一个元素的下一个位置，否则 `x` 排到整个队列最后的位置。

`pop`：出队，弹出队头并输出出队元素，出队的方式和普通队列相同，即排在前边的元素先出队。

## 输入格式

第一行有两个正整数 $n$, $m$，分别表示元素个数和小组个数，元素和小组均从 $0$ 开始编号。

接下来一行 $n$ 个非负整数 $A_i$，表示元素 $i$ 所在的小组。

接下来一行一个正整数 $T$ ，表示操作数。

接下来 $T$ 行，每行为一个操作。

## 输出格式

对于每个出队操作输出一行，为出队的元素。

## 样例

### 样例输入 #1
```
4 2
0 0 1 1
6
push 2
push 0
push 3
pop
pop
pop
```
### 样例输出 #1
```
2
3
0
```
## 提示

对于 $30\%$ 的数据，$1≤n≤100$，$1≤m≤10$，$T≤50$。

对于 $100\%$ 的数据，$1≤n≤100000$，$1≤m≤300$，$T≤100000$，输入保证操作合法。



---

---
title: "[AHOI2016初中组] 迷宫"
layout: "post"
diff: 普及/提高-
pid: P2778
tag: ['2016', '安徽']
---
# [AHOI2016初中组] 迷宫
## 题目描述

小雪和小可可被困在了一个无限大的迷宫中。

已经知道这个迷宫有 $N$ 堵环状的墙，如果把整个迷宫看作是一个二维平面，那么每一堵墙都是平面上一个圆。**任意两个圆不相交，不重合，也不会相切，但有可能相互包含**。小雪和小可可分别被困在了 $2$ 个不同的位置，且保证他们的位置与这些圆不重合。

他们只有破坏墙面才能穿过去。

小雪希望知道，如果他们要相见，至少要破坏掉多少堵墙？他们可以在任何位置相见。
## 输入格式

第一行有一个整数 $N$，表示有多少堵墙。

之后 $N$ 行，每一行有 $3$ 个整数 $x, y, r$，表示有一堵环状的墙是以 $(x,y)$ 为圆心，$r$ 为半径的。

再下一行有一个整数 $Q$，表示有多少组询问。

之后 $Q$ 行，每一行有 $4$ 个整数 $a, b, c, d$，给出了一组询问，表示小雪所在的位置为 $(a,b)$，小可可所在的位置为 $(c,d)$。
## 输出格式

输出 $Q$ 行，对应 $Q$ 次询问，每一行输出一个整数，表示最少需要破坏掉多少堵墙才能相见。
## 样例

### 样例输入 #1
```
3
0 0 1
3 0 1
2 0 4
1
0 0 3 0
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3
0 0 1
0 0 2
4 0 1
2
0 0 4 0
0 0 0 4
```
### 样例输出 #2
```
3
2
```
## 提示

对于 $20\%$ 的数据，$0\le N\le 200$。

对于 $40\%$ 的数据，$0\le N\le 1000$。

对于 $100\%$ 的数据，$0\le N, Q\le 8000,-10^8\le x,y,r, a, b, c, d\le 10^8$。

此外，还有额外的 $20\%$ 的数据，满足 $0\le N\le 1000,0\le Q\le 1000$。

大数据点时限 $\rm 3\ s$。


---

---
title: "学校选址 II"
layout: "post"
diff: 普及/提高-
pid: P2803
tag: []
---
# 学校选址 II
## 题目描述

在一条大路一旁有许多栋楼，每栋楼里有许多小学生（哈哈哈一波小学生来袭！）。但是这条路上没有小学！！！！所以唯恐世界不乱的牛A打算在路上（汽车什么的都不敢来这个小学生云集的地方咯，所以不用担心安全问题）任选几点（可以和楼重合，当然也可以不重合）建立小学，且使所有小学生上学走的路程之和最短。牛A发现修建一所小学根本无法满足他唯恐世界不乱的（变态）心理，所以他准备建立K所小学。

## 输入格式

第一行2个整数，表示楼数n，学校数k（1<=n,k<=100）

第二行n个整数，表示每栋楼的学生数（0＜每栋楼学生数≤100 )

第三行n-1个数，分别表示楼i到楼i+1之间距离（1≤距离≤100，1≤i≤n-1）

## 输出格式

即学生走的距离和的最小值

## 样例

### 样例输入 #1
```
3 2
24 18 31
10 8
```
### 样例输出 #1
```
144
```


---

---
title: "宋荣子的城堡"
layout: "post"
diff: 普及/提高-
pid: P2817
tag: ['2016', '山东']
---
# 宋荣子的城堡
## 题目描述

saruka 有一座大大的城堡！城堡里面有 $n$ 个房间，每个房间上面都写着一个数字 $p_i$。有一天，saruka 邀请他的小伙伴 LYL 和 MagHSK 来城堡里玩耍，他们约定，如果某一个人当前站在 $i$ 号房间里，那么下一步他就要去 $p_i$ 号房间，在下一步就要去 $p_{p_i}$ 号房间。

为了增加趣味性，saruka 决定重新书写一下每个房间的 $p_i$，以满足：

- 如果从编号为 $1 \sim k$ 的某个房间走，按照规则走，必须能走回 $1$ 号房间。特别的，如果从 $1$ 号房间开始走，也要走回 $1$ 号房间。（至少走一步，如果 $p_1 = 1$，从 $1$ 走到 $1$ 也算合法）。

- 如果从编号大于 $k$ 的房间开始，按照规则走，一定不能走到 $1$ 号房间。

saruka 想知道，一共有多少书写 $p_i$ 的方案可以满足要求，答案对 $10 ^ 9 + 7$ 取模。
## 输入格式

共一行两个数字 $n,k$，含义如题。
## 输出格式

一个数字，表示合法的方案数。答案对 $10 ^ 9 + 7$ 取模。
## 样例

### 样例输入 #1
```
5 2
```
### 样例输出 #1
```
54
```
### 样例输入 #2
```
7 4
```
### 样例输出 #2
```
1728
```
## 提示

对于 $100 \%$ 的数据，$1 \le n \le 10 ^ {18},1 \le k \le \min(n,8)$。


---

---
title: "[USACO14DEC] Marathon S"
layout: "post"
diff: 普及/提高-
pid: P2849
tag: ['2014', 'USACO']
---
# [USACO14DEC] Marathon S
## 题目描述

Unhappy with the poor health of his cows, Farmer John enrolls them in an assortment of different physical fitness activities. His prize cow Bessie is enrolled in a running class, where she is eventually expected to run a marathon through the downtown area of the city near Farmer John's farm!


The marathon course consists of N checkpoints (3 <= N <= 500) to be visited in sequence, where checkpoint 1 is the starting location and checkpoint N is the finish. Bessie is supposed to visit all of these checkpoints one by one, but being the lazy cow she is, she decides that she will skip up to K checkpoints (K < N) in order to shorten her total journey. She cannot skip checkpoints 1 or N, however, since that would be too noticeable.


Please help Bessie find the minimum distance that she has to run if she can skip up to K checkpoints.


Since the course is set in a downtown area with a grid of streets, the distance between two checkpoints at locations (x1, y1) and (x2, y2) is given by |x1-x2| + |y1-y2|.

Bessie 参加城市马拉松比赛，要顺序经过 $N (3 \leq N \leq 500)$ 个检查点，其中检查点 $1$ 是起点，检查点 $N$ 是终点。 Bessie尝试略过 $K(K < N)$ 个检查点，以减少总路程，检查点 $1$ 和检查点 $N$ 不能被略过。两个检查点的距离是 $|x_1-x_2| + |y_1-y_2|$。

输入输出格式

## 输入格式

The first line gives the values of N and K.


The next N lines each contain two space-separated integers, x and y,representing a checkpoint (-1000 <= x <= 1000, -1000 <= y <= 1000).


The checkpoints are given in the order that they must be visited.


Note that the course might cross over itself several times, with several checkpoints occurring at the same physical location. When Bessie skips such a checkpoint, she only skips one instance of the checkpoint -- she does not skip every checkpoint occurring at the same location.

## 输出格式

Output the minimum distance that Bessie can run by skipping up to K checkpoints. In the sample case shown here, skipping the checkpoints at (8, 3) and (10, -5) leads to the minimum total distance of 4.

## 样例

### 样例输入 #1
```
5 2
0 0
8 3
1 1
10 -5
2 2
```
### 样例输出 #1
```
4
```
## 题目翻译

【题目描述】

由于对他的奶牛的健康状况不佳而感到不满，牧场主约翰让它们参加各种各样的体育健身活动。最让他感到自豪的奶牛是 Bessie，她将参加约翰牧场附近城市里的马拉松比赛！

马拉松比赛有 $N$ 个检查点 $(3\leq N\leq 500)$ ，需要按顺序访问。检查点 $1$ 是起点，检查点 $N$ 是终点。Bessie 应该按顺序一一访问所有的这些检查点，但由于她是一头懒惰的牛（懒惰竟然还选择跑马拉松！），于是她决定跳过 $K(K<N)$ 个检查点以缩小她的赛程。但她不能跳过第 $1$ 个和第 $N$ 个检查点，因为这样太明显了。

请你帮助 Bessie 计算出跳过中间的 $K$ 个检查点后她最少要跑多少距离。

注意：由于街道是网格状的，我们用坐标来表示点的位置。但是 $(x_1,y_1),(x_2,y_2)$ 两点间的距离应为 $|x_1-x_2|+|y_1-y_2|$，这种测量距离的方法被称为“曼哈顿”距离，这是因为在市中心的网格路中，你可以沿平行于 $x$ 轴或 $y$ 轴的方向走，但不能沿直线到达。

【输入格式】

第一行：两个正整数 $N$ 和 $K$。

第 $2$ 行到第 $N+1$ 行，每行两个整数$x,y (-1000\leq x\leq 1000,-1000\leq y\leq 1000)$。

这里给出了检查点的顺序，她必须按顺序访问。注意：可能会有几个检查点出现在同一位置，Bessie 跳过这样的检查点时，相当于只跳过其中的一个检查点。

【输出格式】

输出跳过某一个检查点后 Bessie 可以跑的最短距离。

感谢@彭骐飞 提供的翻译


---

---
title: "[USACO07MAR] Monthly Expense S"
layout: "post"
diff: 普及/提高-
pid: P2884
tag: ['2007', 'USACO']
---
# [USACO07MAR] Monthly Expense S
## 题目描述

Farmer John is an astounding accounting wizard and has realized he might run out of money to run the farm. He has already calculated and recorded the exact amount of money (1 ≤ moneyi ≤ 10,000) that he will need to spend each day over the next N (1 ≤ N ≤ 100,000) days.

FJ wants to create a budget for a sequential set of exactly M (1 ≤ M ≤ N) fiscal periods called "fajomonths". Each of these fajomonths contains a set of 1 or more consecutive days. Every day is contained in exactly one fajomonth.

FJ's goal is to arrange the fajomonths so as to minimize the expenses of the fajomonth with the highest spending and thus determine his monthly spending limit.

给出农夫在n天中每天的花费，要求把这n天分作m组，每组的天数必然是连续的，要求分得各组的花费之和应该尽可能地小，最后输出各组花费之和中的最大值

## 输入格式

Line 1: Two space-separated integers: N and M


Lines 2..N+1: Line i+1 contains the number of dollars Farmer John spends on the ith day

## 输出格式

Line 1: The smallest possible monthly limit Farmer John can afford to live with.

## 样例

### 样例输入 #1
```
7 5
100
400
300
100
500
101
400
```
### 样例输出 #1
```
500
```
## 提示

If Farmer John schedules the months so that the first two days are a month, the third and fourth are a month, and the last three are their own months, he spends at most $500 in any month. Any other method of scheduling gives a larger minimum monthly limit.



---

---
title: "[USACO08OCT] Pasture Walking G"
layout: "post"
diff: 普及/提高-
pid: P2912
tag: ['2008', 'USACO']
---
# [USACO08OCT] Pasture Walking G
## 题目描述

The N cows (2 <= N <= 1,000) conveniently numbered 1..N are grazing among the N pastures also conveniently numbered 1..N. Most conveniently of all, cow i is grazing in pasture i.

Some pairs of pastures are connected by one of N-1 bidirectional walkways that the cows can traverse. Walkway i connects pastures A\_i and B\_i (1 <= A\_i <= N; 1 <= B\_i <= N) and has a length of L\_i (1 <= L\_i <= 10,000).

The walkways are set up in such a way that between any two distinct pastures, there is exactly one path of walkways that travels between them. Thus, the walkways form a tree.

The cows are very social and wish to visit each other often. Ever in a hurry, they want you to help them schedule their visits by computing the lengths of the paths between 1 <= L\_i <= 10,000 pairs of pastures (each pair given as a query p1,p2 (1 <= p1 <= N; 1 <= p2 <= N).

POINTS: 200

有N(2<=N<=1000)头奶牛，编号为1到W，它们正在同样编号为1到N的牧场上行走.为了方 便，我们假设编号为i的牛恰好在第i号牧场上.

有一些牧场间每两个牧场用一条双向道路相连，道路总共有N - 1条，奶牛可以在这些道路 上行走.第i条道路把第Ai个牧场和第Bi个牧场连了起来(1 <= A\_i <= N; 1 <= B\_i <= N)，而它的长度 是 1 <= L\_i <= 10,000.在任意两个牧场间，有且仅有一条由若干道路组成的路径相连.也就是说，所有的道路构成了一棵树.

奶牛们十分希望经常互相见面.它们十分着急，所以希望你帮助它们计划它们的行程，你只 需要计算出Q(1 < Q < 1000)对点之间的路径长度•每对点以一个询问p1,p2 (1 <= p1 <= N; 1 <= p2 <= N). 的形式给出.


## 输入格式

\* Line 1: Two space-separated integers: N and Q

\* Lines 2..N: Line i+1 contains three space-separated integers: A\_i, B\_i, and L\_i

\* Lines N+1..N+Q: Each line contains two space-separated integers representing two distinct pastures between which the cows wish to travel: p1 and p2

## 输出格式

\* Lines 1..Q: Line i contains the length of the path between the two pastures in query i.

## 样例

### 样例输入 #1
```
4 2 
2 1 2 
4 3 2 
1 4 3 
1 2 
3 2 

```
### 样例输出 #1
```
2 
7 

```
## 提示

Query 1: The walkway between pastures 1 and 2 has length 2.

Query 2: Travel through the walkway between pastures 3 and 4, then the one between 4 and 1, and finally the one between 1 and 2, for a total length of 7.



---

---
title: "[USACO09JAN] Earthquake Damage G"
layout: "post"
diff: 普及/提高-
pid: P2932
tag: ['2009', 'USACO']
---
# [USACO09JAN] Earthquake Damage G
## 题目描述

Wisconsin has had an earthquake that has struck Farmer John's farm! The earthquake has damaged some of the pastures so that they are unpassable. Remarkably, none of the cowpaths was damaged.

As usual, the farm is modeled as a set of $P(1 \le P \le 30,000)$ pastures conveniently numbered $1\ldots P$ which are connected by a set of $C (1 \le C \le 100,000)$ non-directional cowpaths conveniently numbered $1\ldots C$. Cowpath $i$ connects pastures $a_i$ and $b_i (1 \le a_i \le P; 1 \le b_i \le P)$. Cowpaths might connect $a_i$ to itself or perhaps might connect two pastures more than once.  The barn is located in pasture $1$.

A total of $N (1 \le N \le P)$ cows (in different pastures) sequentially contact Farmer John via moobile phone with an integer message $report_j (2 \le report_j \le P)$ that indicates that pasture $report_j$ is undamaged but that the calling cow is unable to return to the barn from pasture $report_j$ because she could not find a path that does not go through damaged pastures.

After all the cows report in, determine the minimum number of pastures (including ones that are uncrossable) from which it is not possible to return to the barn.

Note: Feedback on some of the test data will be provided on the first $50$ submissions.
## 输入格式

Line $1$: Three space-separated integers: $P$,$C$,and $N$.

Lines $2\ldots C+1$: Line $i+1$ describes cowpath $i$ with two integers: $a_i$ and $b_i$.

Lines $C+2\ldots C+N+1$: Line $C+1+j$ contains a single integer: $report_j$.

## 输出格式

Line $1$: A single integer that is the minimum count of pastures from which a cow can not return to the barn (including the damaged pastures themselves)

## 样例

### 样例输入 #1
```
4 3 1 
1 2 
2 3 
3 4 
3 

```
### 样例输出 #1
```
3 

```
## 提示

Pasture $2$ is damaged, resulting in cows in pastures $2, 3, 4$ not being able to return to the barn.
## 题目翻译

### 题目描述

农夫 John 的农场遭受了一场地震。有一些牛棚遭到了损坏，但幸运地，所有牛棚间的路经都还能使用。FJ 的农场有 $P(1 \le P \le 3\times 10^4)$ 个牛棚，编号 $1\ldots P$。$C(1 \le C \le 1\times 10^5)$ 条双向路径连接这些牛棚,编号为 $1\ldots C$，路经 $i$ 连接牛棚 $a_i$ 和 $b_i (1 \le a_i \le P;1 \le b\_i \le P)$。$a_i$ 与 $b_i$ 可能相同，两个牛棚之间可能有多条路经。农庄在编号为 $1$ 的牛棚。$N (1 
\le N \le P)$ 头在不同牛棚的牛通过手机短信告诉 FJ 它们的牛棚 $report_j(2 \le report_j \le P)$ 没有损坏，但是它们无法通过路径和没有损坏的牛棚回到到农场。当 FJ 接到所有短信之后，找出最小的不可能回到农庄的牛棚数目。这个数目包括损坏的牛棚。注意：前 $50$ 次提交将提供在一些测试数据上的运行结果。




---

---
title: "[USACO09MAR] Moon Mooing G"
layout: "post"
diff: 普及/提高-
pid: P2942
tag: ['2009', 'USACO']
---
# [USACO09MAR] Moon Mooing G
## 题目描述

A full moon casts some sort of spell on the cows and, like their cousins the wolves and coyotes, they bay at the moon -- mooing instead of howling, of course.

Each 'moo' lasts a certain amount of time. A short 'moo' might last time 1; a longer one might last time 24 or even 1,000,000,000 or longer (cows can really moo when they want to). No 'moo' will last more than or equal to 2^63.

It should come as no surprise that the cows have a pattern to their moos.  Bessie will choose an integer c (1 <= c <= 100) that is the initial length of a moo.

After Bessie moos for length c, the cows calculate times for

subsequent moos. They apply two formulae to each moo time to yield even more moo times. The two formulae are:

```cpp
f1(c)=a1*c/d1+b1 (integer divide, of course) and 
f2(c)=a2*c/d2+b2. 
They then successively use the two new times created by evaluating f1(c) and f2(c) to create even more mooing times. They keep a sorted list of all the possible mooing times (discarding duplicates). 
They are allowed to moo a total of N times (1 <= N <= 4,000,000). Please determine the length of the longest moo before they must quit. 
The constants in the formulae have these constraints: 1 <= d1 < a1; d1 < a1 <= 20; 0 <= b1 <= 20; 1 <= d2 < a2; d2 < a2 <= 20; 0 <= b2 <= 20. 
Consider an example where c=3 and N=10. The constants are: 
a1=4    b1=3     d1=3 
a2=17   b2=8     d2=2 
```
The first mooing time is 3, given by the value of c. The total list of mooing times is:
```cpp
1. c=3             ->  3       6. f2(3)=17*3/2+8  -> 33 
2. f1(3)=4*3/3+3   ->  7       7. f1(28)=4*28/3+3 -> 40 
3. f1(7)=4*7/3+3   -> 12       8. f1(33)=4*33/3+3 -> 47 
4. f1(12)=4*12/3+3 -> 19       9. f1(40)=4*40/3+3 -> 56 
5. f1(19)=4*19/3+3 -> 28      10. f1(47)=4*47/3+3 -> 65 
The tenth time is 65, which would be the proper answer for this set of inputs. 
```
Partial feedback will be provided on the first 50 submissions.
MEMORY LIMIT: 64MB

满月的时候，和狼一样，牛们也在月光下叫，他们从不嚎叫，而是哞叫。

每次哞叫都有一个时长，可能是 $1$ 秒，可能是 $10^9$ 秒或更久，牛们真的非常能叫.当然，没有哞叫时长会超过或等于 $2^{63}$。

牛们的哞叫可以找到规律，这并不奇怪。贝茜会选择一个整数 $c(c\le100)$ 来作为初始时长之后，牛们根据两条公式确定更多的时长：

$f_1(c)=\lfloor a_1c/d_1\rfloor+b_1$

$f_2(c)=\lfloor a_2c/d_2\rfloor+b_2$ 

牛们用这两条公式不断地迭代、计算，算得大量的时长.然后她们将这些时长排序，剔除重复的时长，最后取前 $N(1<N< 4000000)$ 个整数为她们 $N$ 次哞叫的时长.请你计算，第 $N$ 次哞叫的时长是多少。公式中的常量均为整数，满足下列关系： 

$1 \le d_1 < a_1 \le 20$; $0\le b_1 \le 20$;

$1 \le d_2 < a_2 \le 20$; $0\le b_2\le 20$。

## 输入格式

\* Line 1: Two space-separated integers: c and N

\* Line 2: Three space-separated integers: a1, b1, and d1

\* Line 3: Three space-separated integers: a2, b2, and d2

## 输出格式

\* Line 1: A single line which contains a single integer which is the length of the Nth moo

## 样例

### 样例输入 #1
```
3 10 
4 3 3 
17 8 2 

```
### 样例输出 #1
```
65 

```


---

---
title: "[USACO09OCT] Invasion of the Milkweed G"
layout: "post"
diff: 普及/提高-
pid: P2960
tag: ['2009', 'USACO']
---
# [USACO09OCT] Invasion of the Milkweed G
## 题目描述

Farmer John has always done his best to keep the pastures full of luscious, delicious healthy grass for the cows. He has lost the battle, though, as the evil milkweed has attained a foothold in the northwest part of his farm.

The pasture, as usual, is partitioned into a rectilinear grid of height Y (1 <= Y <= 100) and width X (1 <= X <= 100) with (1,1) being in the lower left corner (i.e., arranged as a normal X,Y coordinate grid). The milkweed has initially begun growing at square (Mx,My). Each week the milkweed propagates to all non-rocky squares that surround any square it already occupies, as many as eight more squares (both the rectilinear squares and the diagonals). After only one week in those squares, it is ready to move on to more squares.

Bessie wants to enjoy all the grass she can before the pastures are taken over by milkweed. She wonders how long it can last. If the milkweed is in square (Mx,My) at time zero, at what time does it complete its invasion of the pasture (which, for the given input data, will always happen)?

The pasture is described by a picture with '.'s for grass and '\*'s for boulders, like this example with X=4 and Y=3:

```
....
..*.
.**.
```

If the milkweed started in the lower left corner (row=1, column=1), then the map would progress like this:

```
    ....  ....  MMM.  MMMM  MMMM
    ..*.  MM*.  MM*.  MM*M  MM*M
    M**.  M**.  M**.  M**.  M**M
week  0    1    2    3    4
```

The milkweed has taken over the entire field after 4 weeks.
## 输入格式

\* Line 1: Four space-separated integers: X, Y, Mx, and My

\* Lines 2..Y+1: Line y+1 describes row (Y+2-y) of the field with X characters ('.' for grass and '\*' for a boulder)

## 输出格式

\* Line 1: A single integer that is the week number when the milkweed takes over the last remaining non-boulder square of the pasture.

## 样例

### 样例输入 #1
```
4 3 1 1 
.... 
..*. 
.**. 

```
### 样例输出 #1
```
4 

```
## 题目翻译

Farmer John 一直努力让他的草地充满鲜美多汁的而又健康的牧草。可惜天不从人愿，他在植物大战人类中败下阵来。邪恶的乳草已经在他的农场的西北部份占领了一片立足之地。

草地像往常一样，被分割成一个高度为 $Y\,(1 \le Y \le 100)$, 宽度为 $X\,(1 \le X \le 100)$ 的直角网格。$(1,1)$ 是左下角的格（也就是说坐标排布跟一般的 $X$，$Y$ 坐标相同）。乳草一开始占领了格 $(M_x,M_y)$。每个星期，乳草传播到已被乳草占领的格子四面八方的每一个没有很多石头的格（包括垂直与水平相邻的和对角在线相邻的格）。1 周之后，这些新占领的格又可以把乳草传播到更多的格里面了。

Bessie 想要在草地被乳草完全占领之前尽可能的享用所有的牧草。她很好奇到底乳草要多久才能占领整个草地。如果乳草在 0 时刻处于格 $(M_x,M_y)$，那么会在哪个时刻它们可以完全占领入侵整片草地呢？对给定的数据总是会发生。


---

---
title: "[USACO10NOV] Visiting Cows G"
layout: "post"
diff: 普及/提高-
pid: P2996
tag: ['2010', 'USACO']
---
# [USACO10NOV] Visiting Cows G
## 题目描述

After many weeks of hard work, Bessie is finally getting a vacation! After many weeks of hard work, Bessie is finally getting a vacation!  numbered 1..N. The cows have set up quite an unusual road network with exactly N-1 roads connecting pairs of cows C1 and C2 (1 <= C1 <= N; 1 <= C2 <= N; C1 != C2) in such a way that there exists a unique path of roads between any two cows.

FJ wants Bessie to come back to the farm soon; thus, he has instructed Bessie that if two cows are directly connected by a road, she may not visit them both. Of course, Bessie would like her vacation to be as long as possible, so she would like to determine the maximum number of cows she can visit.

经过了几周的辛苦工作,贝茜终于迎来了一个假期.作为奶牛群中最会社交的牛,她希望去拜访N(1<=N<=50000)个朋友.这些朋友被标号为1..N.这些奶牛有一个不同寻常的交通系统,里面有N-1条路,每条路连接了一对编号为C1和C2的奶牛(1 <= C1 <= N; 1 <= C2 <= N; C1<>C2).这样,在每一对奶牛之间都有一条唯一的通路. FJ希望贝茜尽快的回到农场.于是,他就指示贝茜,如果对于一条路直接相连的两个奶牛,贝茜只能拜访其中的一个.当然,贝茜希望她的假期越长越好,所以她想知道她可以拜访的奶牛的最大数目.

## 输入格式

\* Line 1: A single integer: N

\* Lines 2..N: Each line describes a single road with two

space-separated integers: C1 and C2

## 输出格式

\* Line 1: A single integer representing the maximum number of cows that Bessie can visit.

## 样例

### 样例输入 #1
```
7 
6 2 
3 4 
2 3 
1 2 
7 6 
5 6 

```
### 样例输出 #1
```
4 

```
## 提示

Bessie knows 7 cows. Cows 6 and 2 are directly connected by a road, as are cows 3 and 4, cows 2 and 3, etc. The illustration below depicts the roads that connect the cows:

1--2--3--4

|
5--6--7


Bessie can visit four cows. The best combinations include two cows on the top row and two on the bottom. She can't visit cow 6 since that would preclude visiting cows 5 and 7; thus she visits 5 and 7. She can also visit two cows on the top row: {1,3}, {1,4}, or {2,4}.



---

---
title: "[USACO10NOV] Banner S"
layout: "post"
diff: 普及/提高-
pid: P2997
tag: ['2010', 'USACO']
---
# [USACO10NOV] Banner S
## 题目背景

题目大意(by:曹彦臣)：


平面上有(0,0)到(n,m)的(n+1)\*(m+1)个点。问有多少点对所连的线段不过其他点，且长度在[l,h]范围内。

## 题目描述

Bessie is returning from a long trip abroad, and Farmer John wants to erect a nice 'Welcome Home' banner in her pasture for her arrival. The banner will hang between two poles on a wire whose length is in the range L1..L2 (1 <= L1 <= L2; L1 <= L2 <= 1,500).

The pasture's size is W x H (1 <= W <= 1,000; 1 <= H <= 1,000), and Farmer John has installed a post at every point with integer

coordinates. Of these (W + 1) \* (H + 1) points, Farmer John must pick just two that will hold either end of the wire from which he will hang the banner.

FJ wants no interference with his banner as it hangs and requires that no post be directly under the tight wire he stretches between the two chosen posts.

Farmer John needs your help to figure out how many possible ways he can hang the banner. He knows the number is large and that a 32-bit integer might not be sufficient to compute the answer.

Consider the example pasture below, with W = 2 and H = 1: 

\* \* \*
\* \* \*
The banner size is in the range 2..3. This pasture contains (2+1) \* (1+1) = 6 points and has (6 take 2) = (6\*5)/(2\*1) = 15 different potential pairs of points between which the banner-holding wire might stretch:

```cpp
(0,0)-(0,1)   (0,0)-(2,1)   (0,1)-(2,1)   (1,1)-(2,0) 
(0,0)-(1,0)   (0,1)-(1,0)   (1,0)-(1,1)   (1,1)-(2,1) 
(0,0)-(1,1)   (0,1)-(1,1)   (1,0)-(2,0)   (2,0)-(2,1) 
(0,0)-(2,0)   (0,1)-(2,0)   (1,0)-(2,1) 
```
Of these pairs, only four have a length in the range 2..3:
Len                       Len

(0,0)-(2,0) 2.00          (0,1)-(2,0) 2.24 

(0,0)-(2,1) 2.24          (0,1)-(2,1) 2.00 

Of these four, the pairs (0,0)-(2,0) and (0,1)-(2,1) both have a post directly on the line between the endpoints, and thus are 

unsuitable.

So, just two pairs of points out of 15 are acceptable candidates for hanging the banner wire.

## 输入格式

\* Line 1: Four space-separated integers: W, H, L1, and L2

## 输出格式

\* Line 1: A single integer denoting the number of possible banners

## 样例

### 样例输入 #1
```
2 1 2 3 

```
### 样例输出 #1
```
2 

```
## 题目翻译

贝西正要从一趟长途旅行中回来，Farmer John想要在她的牧场里布置一个“欢迎回家”的横幅来迎接她。这个横幅将会拴在一个范围为L1到L2 (1 <= L1 <= L2; L1 <= L2 <= 1,500)的线的两端

牧场面积为W × H (1 <= W <= 1000;1 <= H <= 1000)，并且Farmer John在每个整数坐标的点都安装了一个杆子。在这(W + 1) * (H + 1)点中，Farmer John必须选择两个点来固定他将悬挂旗帜的线的两端。

FJ希望他的旗帜挂上去之后不会被挡住，所以在两个柱子之间的线上不能有其他柱子。

Farmer John需要你的帮助来计算出他有多少种可能的方式来悬挂横幅。他知道这个数字很大，一个32位的整数可能不足以计算出答案。

示例，W = 2, H = 1: 横幅大小在2到3的范围内。这个牧场包含(2+1)(1+1)= 6个点，并且有(6选2)=(65)/(2*1)= 15个不同的潜在点对，在这些点之间可以拉出这几条线:


(0,0)-(0,1)   (0,0)-(2,1)   (0,1)-(2,1)   (1,1)-(2,0) 
(0,0)-(1,0)   (0,1)-(1,0)   (1,0)-(1,1)   (1,1)-(2,1) 
(0,0)-(1,1)   (0,1)-(1,1)   (1,0)-(2,0)   (2,0)-(2,1) 
(0,0)-(2,0)   (0,1)-(2,0)   (1,0)-(2,1)
在这些对中，只有四个的长度在2..3的范围内:

(0,0)-(2,0) 2.00

(0,1)-(2,0) 2.24

(0,0)-(2,1) 2.24

(0,1)-(2,1) 2.00

在这四个中，(0,0)-(2,0)和(0,1)-(2,1)在端点之间的直线上都有一个柱子，因此是不合适的。

所以，15对点中只有两对点可以作为悬挂横幅线的候选点。


---

---
title: "[USACO11FEB] The Triangle S"
layout: "post"
diff: 普及/提高-
pid: P3016
tag: ['2011', 'USACO']
---
# [USACO11FEB] The Triangle S
## 题目描述

For her spectacular milk output for the previous month, Farmer John has awarded Bessie a prize -- with a twist.  He has given her a triangular grid with N (1 <= N <= 700) rows (whose lengths vary from 1 through N, of course). Row i of the the grid has i values labeled v\_ij (-1,000,000,000 <= v\_ij <= 1,000,000,000) where j is in the range 1..i.

Bessie chooses a sub-triangle whose side length is at least K (1 <= K <= 20; 1 <= K <= N) within the triangular grid. The sub-triangle is another triangular grid which might be oriented the same as the original triangle or might be 'upside down' with its shorter rows on the bottom instead of the top.

After she chooses her sub-triangle, Farmer John will take the average of all the numbers in the sub-triangle, discarding the digits to the right of the decimal point, and give her that many gold coins (or take that many gold coins from her if the number is negative). Naturally, Bessie would like to maximize her prize (or minimize her loss). Help her solve this problem.

By way of example, Bessie is given this triangular grid with N = 3 rows and must choose a sub-triangle with a side length of at least K = 2. A graphical representation of the triangle is shown below:

```cpp
    / \
   / 5 \
  /-8  4\
 /2 -3  6\
 ---------
```
She could choose any of five valid sub-triangles (one of which is the entire original triangle):

```cpp
                                                   /\
    / \         / \        / \         / \        /5 \       
   / 5 \       / \5\      / 5 \       / 5/\      /----\    
  /-8  4\     /-8 \4\    /-8  4\     /-8/ 4\    /\-8 4/\ 
 /2 -3  6\   / 2 -3\6\  /-------\   / 2/-3 6\  / 2\-3/6 \ 
 ---------   ---------  -2  -3  6   ---------  ----------  
  entire      lower        top          lower     upside
 triangle     left                      right      down
```
The one that is lined below is the one with the highest average:

```cpp
    / \
   / 5/\
  /-8/ 4\
 / 2/-3 6\
 ---------
```
The average of this sub-triangle is (4+6-3)/3, which is about

2.3333...; without the fraction, the answer is 2. 

Help Bessie calculate the maximum amount of coins which she could receive.

TIME LIMIT: 2 seconds

MEMORY LIMIT: 32 MB

有一个n(1<=n<=700)行的等腰三角形，里面有很多数(-1,000,000,000 <= 数 <= 1,000,000,000)，现在可以选择边长至少为k(1<=k<=20,1<=k<=n)，至多为2k的相似等腰三角形，并且可以倒着选，比如样例可以有这些选择方法：


样例：

```cpp
                                                   /\
    / \         / \        / \         / \        /5 \       
   / 5 \       / \5\      / 5 \       / 5/\      /----\    
  /-8  4\     /-8 \4\    /-8  4\     /-8/ 4\    /\-8 4/\ 
 /2 -3  6\   / 2 -3\6\  /-------\   / 2/-3 6\  / 2\-3/6 \ 
 ---------   ---------  -2  -3  6   ---------  ----------  
  entire      lower        top          lower     upside
 triangle     left                      right      down
```
最后问你可以得到的最大平均值为多少（平均值：选出的三角形的累加和div选出个数）

## 输入格式

\* Line 1: Two space-separated integers: N and K

\* Lines 2..N+1: Line i+1 will contain i space-separated integers: v\_ij

## 输出格式

\* Line 1: The maximum number of coins that Bessie can receive (or, if negative, the best she can do for her loss).

## 样例

### 样例输入 #1
```
3 2 
5 
-8 4 
2 -3 6 

```
### 样例输出 #1
```
2 

```
## 提示

感谢 zzkksunboy 提供翻译。



---

---
title: "[USACO11MAR] Meeting Place S"
layout: "post"
diff: 普及/提高-
pid: P3019
tag: ['2011', 'USACO']
---
# [USACO11MAR] Meeting Place S
## 题目描述

Bessie and Jonell are great friends. Since Farmer John scrambles where the cows graze every day, they are sometimes quite far from each other and can't talk.

The pastures and paths on FJ's farm form a 'tree' structure.  Each pasture has exactly one distinct path to any other pasture, and each pasture (except pasture #1, the 'root') also has a single parent node.

Bessie and Jonell have decided that they will always meet at the closest pasture that that is both an ancestor of Jonell's pasture and of Bessie's pasture.

FJ created a map of his N (1 <= N <= 1,000) pastures (conveniently numbered 1..N) that tells the parent P\_i (1 <= P\_i <= N) of each pasture except pasture 1, which has no parent.

FJ has released his daily grazing schedule for the next M (1 <= M <= 1,000) days, so Bessie and Jonell are deciding where they should meet each day for gossip. On day k, Bessie is in pasture B\_k (1 <= B\_k <= N) and Jonell is in pasture J\_k (1 <= J\_k <= N).

Given a map and schedule, help Bessie and Jonell find their meeting places.

```cpp
Consider, for example, the following farm layout:

                            Pasture      Parent Pasture
             [1]           ---------    ----------------
            / | \              1              ---
           /  |  \             2               1 
         [2] [3] [6]           3               1
         /        | \          4               2
        /         |  \         5               8
      [4]        [8]  [9]      6               1
                /   \          7               8
               /     \         8               6
             [5]     [7]       9               6

Here are the meeting places that Bessie and Jonell would choose
given a six day schedule of their initial grazing locations:

              Bessie      Jonell       Meeting Place
             --------    --------     ---------------
                 2           7               1
                 4           2               2
                 1           1               1
                 4           1               1
                 7           5               8
                 9           5               6
```



## 输入格式

\* Line 1: Two space-separated integers: N and M

\* Lines 2..N: Line i contains a single integer that describes the parent of pasture i:  P\_i

\* Lines N+1..N+M: Line k+N describes Bessie and Jonell's respective pastures with two space-separated integers: B\_k and J\_k



## 输出格式

\* Lines 1..M: Line j contains the meeting place Bessie and Jonell would use for line j+N of the input

## 样例

### 样例输入 #1
```
9 6 
1 
1 
2 
8 
1 
8 
6 
6 
2 7 
4 2 
3 3 
4 1 
7 5 
9 5 

```
### 样例输出 #1
```
1 
2 
3 
1 
8 
6 

```
## 题目翻译

农场是由N（1≤N≤1000）个节点组成的一棵树，1是树的根。有两头奶牛分别在两个节点，他们有M（1≤M≤1000）天要见面，见面地点在她们所在两个节点的路径上离根节点最近的节点。求出每天她们见面的节点编号。
输入：第一行两个整数N, M，接下来N-1行（这里的 i 是从 2 ~ n），第i行表示第i个节点的父亲编号，接下来M行每行两个整数表示当天两头奶牛所在的节点编号。
输出：输出M行，回答每个询问。

感谢@x咫尺天涯x 提供的翻译和ROY1994 提供的建议


---

---
title: "[USACO11MAR] Bovine Bridge Battle S"
layout: "post"
diff: 普及/提高-
pid: P3021
tag: ['2011', 'USACO']
---
# [USACO11MAR] Bovine Bridge Battle S
## 题目背景

给定N（4 <= N <= 1,000）个整点的坐标 (-1,000,000,000 <= X\_i <= 1,000,000,000; -1,000,000,000 <= Y\_i <= 1,000,000,000，X\_i，Y\_i∈Z)，求card{{(X\_a,Y\_a),(X\_b,Y\_b),(X\_c,Y\_c),(X\_d,Y\_d)}|四点呈中心对称}

## 题目描述

Each of Farmer John's N (4 <= N <= 1,000) cows is patiently waiting in the main pasture with cow i at point with integer coordinates (X\_i, Y\_i) (-1,000,000,000 <= X\_i <= 1,000,000,000; -1,000,000,000 <= Y\_i <= 1,000,000,000).

The cows wish to form into groups of four in order to play Bridge, their new favorite card game. Each group must satisfy an important constraint: four cows are allowed to team up if and only if there exists some point X somewhere in the plane (and not coincident with any of the four points of the potential group of four) such that rotating any of the group's cows 180 degrees about that point X gives the position of some other cow in the group.

Please help the cows determine the number of sets of four cows that can form a Bridge group.

By way of example, suppose eight cows are standing at eight points:

|
f\*
```cpp
|             a = (-3, 1)    e = (-1, 1) 
b*     |             b = (-2, 2)    f = ( 0, 3) 
a      e  |             c = (-3, 0)    g = ( 2, 0) 
*     *  |             d = (-2, 0)    h = ( 3, 0) 
```
c  d     |     g  h
---------\*--\*-----+-----\*--\*---------

|
Then the three legal sets of four cows are {a, b, e, d} (they rotate around point (-2, 1)), {b, c, e, f} (around the point (-1.5, 1.5)), and {c, d, g, h} (around (0,0)).

The supplied locations of the cows given are all distinct, although they are supplied in no particular order. Furthermore, the answer will fit into a signed 32-bit integer.

## 输入格式

\* Line 1: A single integer: N

\* Lines 2..N+1: Line i+1 contains two space-separated integers: X\_i and Y\_i

## 输出格式

\* Line 1: A single integer that is the number of sets of 4 cows that form valid groups for bridge.

## 样例

### 样例输入 #1
```
8 
-3 0 
-2 0 
-1 1 
0 3 
2 0 
-3 1 
3 0 
-2 2 

```
### 样例输出 #1
```
3 

```
## 题目翻译

农场主约翰有 $N$ 头牛，牛 $i$ 位于整数坐标点 $(X_i,Y_i)$。

奶牛们希望每四头牛分成一组，玩他们最喜欢的纸牌游戏“桥牌”。

每组必须满足一个重要的约束条件：

当且仅当平面中存在点 $X$ 时（一组的四个点允许重合，并且 $X$ 不与可能的组中的四个点中的任何一个相重合），使得组中的四个点呈中心对称。

请帮助奶牛确定可以组成一个桥群的四头奶牛的数量。

举个例子，假设八头牛站在八个点上：

$a=(-3,1),b=(-2,2),c=(-3,0),d=(-2,0),e=(-1,1),f=(0,3),g=(2,0),h=(3,0)$

四头牛的三个合法集合是：

{$a,b,e,d$}，关于 $ (-2，1)$ 对称，

{$b,c,e,f$}，关于 $(-1.5，1.5)$ 对称，

{$c,d,g,h$}，关于 $(0,0)$ 对称。

$4\le N\le 10^3$，$-10^8\le X_i,Y_i\le 10^8$，$X_i,Y_i\in Z$。


---

---
title: "[USACO10OCT] Making Money G"
layout: "post"
diff: 普及/提高-
pid: P3027
tag: ['2010', 'USACO']
---
# [USACO10OCT] Making Money G
## 题目背景

FJ又经营起了古董生意，买卖一些像奶牛圣诞树上的装饰之类的小玩意。他知道他会将他能存储的N(1<=N<=100)件不同的奶牛古董每件都卖出。


而且如果他的钱足够多他可以买他想要的任意数量的古董（即他可以购买的古董数量没有限制）。他只有M(1<=M<=100,000)元钱来买古董，但他想要在他经商的第一年年末最大化他的利润（这有点难以解释）。


第i种古董采购需要花费Ci(1<=Ci<=100,000)元钱，每卖掉一件可以获得Ri(1<=Ri<=100,000)元钱(每卖一件的利润为Ri-Ci)。FJ可以以任意顺序卖出他的货物。他并不需要花光他所有的钱来购买古董。


FJ在他经商的第一年年末能得到的最大总利润（利润=初始钱数-总花费+总收入）是多少呢？输入数据保证这个数字不会超过1,000,000,000.


假设FJ只有3种古董而且开始时有M=17元钱。下面是三种古董的花费和收入。


古董 花费 收入


1 2 4

2 5 6

3 3 7

在这种情况下，FJ应该花15元购买5个3号古董，再花2元购买1个1号古董，总共17元。他的利润是5\*(7-3)+1\*(4-2)=5\*4+1\*2=22元。他不能获得比这更多的利润了。


提示：第二个样例很有挑战性，但我们的答案是正确的。


输入格式：


第1行：两个以空格分开的整数：N和M


第2行到第N+1行：第i+1行包括两个以空格分开的整数：Ci和Ri


输出格式


第1行：FJ能获得的最大利润

## 题目描述

FJ has gone into the curio business, buying and selling knickknacks like cow Christmas tree ornaments. He knows he will sell every single curio he can stock from a catalog of N (1 <= N <= 100)

different cow curios, and he can buy as many of each kind of curio as his heart desires. He has only M (1 <= M <= 100,000) money to invest but wants to maximize his profit (which has a slightly unusual definition) at the end of his first year in business.

Curio type i costs C\_i (1 <= C\_i <= 100,000) money to purchase and yields R\_i (1 <= R\_i <= 100,000) revenue for each curio sold (a profit of R\_i-C\_i). FJ can mix and match the curios he sells in any way he wishes. He need not spend all his money when purchasing curios.

What is the greatest amount of total profit (profit = initial\_cash - all\_costs + all\_sales) FJ can have at the end of his first year? This number is guaranteed to be less than 1,000,000,000.

Consider the situation when FJ has just 3 kinds of curios and starts with M=17. Below are the cost and revenue numbers for each curio:

Curio     Cost     Revenue

#        C\_i       R\_i

1         2         4

2         5         6

3         3         7

In this case, FJ should purchase 5 curios of type 3 for 15 money and 1 more curio of type 1 for 2 money, a total of 17 money. His profit will be 5 \* (7-3) + 1 \* (4-2) = 5\*4 + 1\*2 = 22 money. He can do no better than this given the cost and revenue structure.

NOTE: The second test case is challenging -- but our answer is correct.

## 输入格式

\* Line 1: Two space-separated integers: N and M

\* Lines 2..N+1: Line i+1 contains two space-separated integers: C\_i and R\_i

## 输出格式

\* Line 1: The maximum profit FJ can generate given the costs and revenues

## 样例

### 样例输入 #1
```
3 17 
2 4 
5 6 
3 7 

```
### 样例输出 #1
```
22 

```


---

---
title: "[USACO11NOV] Tile Exchanging S"
layout: "post"
diff: 普及/提高-
pid: P3030
tag: ['2011', 'USACO']
---
# [USACO11NOV] Tile Exchanging S
## 题目描述

Farmer John wants to remodel the floor of his barn using a collection of square tiles he recently purchased from the local square mart store (which of course, only sells square objects).  Unfortunately, he didn't measure the size of the barn properly before making his purchase, so now he needs to exchange some of his tiles for new square tiles of different sizes.

The N square tiles previously purchased by FJ have side lengths A\_1...A\_N. He would like to exchange some of these with new square tiles so that the total sum of the areas of the his tiles is exactly M.  Square mart is currently offering a special deal: a tile of side length A\_i can be exchanged for a new tile of side length B\_i for a cost of

|A\_i-B\_i|\*|A\_i-B\_i| units. However, this deal only applies to 
previously-purchased tiles -- FJ is not allowed to exchange a tile that he has already obtained via exchanging some other tile (i.e., a size-3 tile cannot be exchanged for a size-2 tile, which is then exchanged for a size-1 tile).

Please determine the minimum amount of money required to exchange tiles so that the sum of the areas of the tiles becomes M.  Output -1 if it is impossible to obtain an area of M.


## 输入格式

\* Line 1: Two space-separated integers, N (1<=N<=10) and M 

(1<=M<=10,000). 

\* Lines 2..1+N: Each line contains one of the integers A\_1 through A\_N, describing the side length of an input square

(1<=A\_i<=100). 


## 输出格式

\* Line 1: The minimum cost of exchanging tiles to obtain M units of total area, or -1 if this is impossible.

## 样例

### 样例输入 #1
```
3 6 
3 
3 
1 

```
### 样例输出 #1
```
5 

```
## 提示

There are 3 tiles.  Two are squares of side length 3, and one is a square with side length 1.  We would like to exchange these to make a total area of 6.


Exchange one of the side-3 squares for a side-2 square, and another side-3 square for a side-1 square.  This gives the desired area of 4+1+1=6 and costs 4+1=5 units.

感谢 wjcwinmt 提供翻译

## 题目翻译

有 $N$ 个正方形，依次给出它们的边长，要求可以换掉一些正方形：如果边长为 $A_i$ 的正方形换成边长为 $B_i$ 的正方形所需代价为：$|A_i-B_i| \times |A_i-B_i|$。问至少花费多少代价使得这 $N$ 个正方形面积总和为 $M$？若无论如何也不可能使这 $N$ 个正方形面积总和为 $M$ 则输出 $-1$。


---

---
title: "[USACO12JAN] Bale Share S"
layout: "post"
diff: 普及/提高-
pid: P3040
tag: ['2012', 'USACO']
---
# [USACO12JAN] Bale Share S
## 题目描述

FJ 有 $n$ 包干草，第 $i$ 干草的重量是 $s_i$，他想尽可能平均地将干草分给三个农场。

他希望分配后的干草重量最大值尽可能地小，比如，$b_1,b_2,b_3$ 是分配后的三个值，假设 $b_1 \ge b_2 \ge b_3$，则他希望 $b_1$ 的值尽可能地小。

请计算 $b_1$ 的最小值。

## 输入格式

第一行一个正整数 $n$。  
接下来 $n$ 行，每行一个正整数表示重量。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
8 
14 
2 
5 
15 
8 
9 
20 
4 

```
### 样例输出 #1
```
26 

```
## 提示

【样例解释】  
一种满足要求的分配方案是：  
农场 1: $2,9,15$，$b_1 = 26$   
农场 2: $4,8,14$，$b_2 = 26$   
农场 3: $5,20$，$b_3 = 25$   

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 20$，$1 \le s_i \le 100$。


---

---
title: "[USACO12DEC] Wifi Setup S"
layout: "post"
diff: 普及/提高-
pid: P3062
tag: ['2012', 'USACO']
---
# [USACO12DEC] Wifi Setup S
## 题目描述

Farmer John's N cows (1 <= N <= 2000) are all standing at various positions along the straight path from the barn to the pasture, which we can think of as a one-dimensional number line.  Since his cows like to stay in email contact with each-other, FJ wants to install Wifi base stations at various positions so that all of the cows have wireless coverage.

After shopping around, FJ learns that the cost of a Wifi base station depends on distance it can transmit: a base station of power r costs A + B\*r, where A is a fixed cost for installing the base station and B is a cost per unit of transmission distance.  If FJ installs such a device at position x, then it can transmit data to any cow located in the range x-r ... x+r.  A base station with transmission power of r=0 is allowed, but this only provides coverage to a cow located at the same position as the transmitter.

Given the values of A and B, as well as the locations of FJ's cows, please determine the least expensive way FJ can provide wireless coverage for all his cows.

给出在同一条直线上的n个点和两个数A，B，现在要在这条直线上放置若干个信号塔，每个信号塔有一个r值，假设它的位置是x，则它能覆盖的范围是x-r~x+r，放置一个信号塔的花费是A+B\*r，问要覆盖所有的点最小的花费是多少。

## 输入格式

\* Line 1: Three space-separated integers: N A B (0 <= A, B <= 1000).

\* Lines 2..1+N: Each line contains an integer in the range

0..1,000,000 describing the location of one of FJ's cows.

## 输出格式

\* Line 1: The minimum cost of providing wireless coverage to all cows.

## 样例

### 样例输入 #1
```
3 20 5 
7 
0 
100 

```
### 样例输出 #1
```
57.5 

```
## 提示

There are 3 cows at positions 7, 0, and 100.  Installation of a base station of power r costs 20 + 5\*r.


The optimal solution is to build a base station at position 3.5 (with power 3.5) and another at position 100 (with power 0).  The first base station covers cows 1 and 2, and the second covers cow 3.



---

---
title: "[USACO13DEC] Vacation Planning S"
layout: "post"
diff: 普及/提高-
pid: P3094
tag: ['2013', 'USACO']
---
# [USACO13DEC] Vacation Planning S
## 题目描述

有N(1 <= N <= 200)个农场，用1..N编号。航空公司计划在农场间建立航线。对于任意一条航线，选择农场1..K中的农场作为枢纽(1 <= K <= 100, K <= N)。


当前共有M (1 <= M <= 10,000)条单向航线连接这些农场，从农场u\_i 到农场 v\_i, 将花费 d\_i美元。(1 <= d\_i <= 1,000,000).


航空公司最近收到Q (1 <= Q <= 10,000)个单向航行请求。第i个航行请求是从农场a\_i到农场 b\_i，航行必须经过至少一个枢纽农场（可以是起点或者终点农场），因此可能会多次经过某些农场。


请计算可行航行请求的数量，及完成所有可行请求的总费用。

## 输入格式

\* Line 1: Four integers: N, M, K, and Q.

\* Lines 2..1+M: Line i+1 contains u\_i, v\_i, and d\_i for flight i.

\* Lines 2+M..1+M+Q: Line 1+M+i describes the ith trip in terms of a\_i and b\_i

## 输出格式

\* Line 1: The number of trips (out of Q) for which a valid route is possible.

\* Line 2: The sum, over all trips for which a valid route is possible, of the minimum possible route cost.

## 样例

### 样例输入 #1
```
3 3 1 3 
3 1 10 
1 3 10 
1 2 7 
3 2 
2 3 
1 2 

```
### 样例输出 #1
```
2 
24 

```
## 提示

There are three farms (numbered 1..3); farm 1 is a hub.  There is a $10 flight from farm 3 to farm 1, and so on.  We wish to look for trips from farm 3 to farm 2, from 2->3, and from 1->2.


The trip from 3->2 has only one possible route, of cost 10+7.  The trip from 2->3 has no valid route, since there is no flight leaving farm 2.  The trip from 1->2 has only one valid route again, of cost 7.



---

---
title: "[TJOI2007] 迷路"
layout: "post"
diff: 普及/提高-
pid: P3843
tag: ['2007', '各省省选', '天津']
---
# [TJOI2007] 迷路
## 题目背景

小 A 和小 B 在一个二维空间中迷路了，每个人在这个空间中都按照自己特定的路线行

走，由于他们的路线都是周期性的，因此你可以把这种路线理解为一种“轨道”：即一条封

闭的路线，路线的终点和起点重合，这样才能“周期”的行走。

## 题目描述

两个人行走的速度都是每秒一个单位距离，而且他们的路线都是平行于坐标轴的。基于

此，如果两个人无限的走下去，我们想知道他们每一秒相离最近的距离。（我们只考虑两人

在每秒行走后相离的距离，不考虑他们在这 1 秒内某个时刻的距离）

## 输入格式

输入文件中有两个相似的部分，分别描述小 A 和小 B 的行走轨道。在每一个部分中的

第一行有三个整数，sx、sy 和 m，前两个整数表示其初始位置，第三个整数表示轨道中折线

的数目，以下 m 行，每行有一个整数 d 和一个非空格字符 c，d 和 c 之间用一个空格隔开。

d 表示小 A 或小 B 沿坐标的正方向行走的距离，而 c 为’X’或’Y’，表示是 X 坐标轴还是 Y

坐标轴。输入数据保证在每一个部分中，我们从起点(sx, sy)开始，执行 m 次行走步骤后，一定能

回到起点，即这个轨道是封闭的。

## 输出格式

输出文件中只包含一个实数，精确到小数点后两位。表示能观测到的两个人的最近距离，

如果可能在某个时间两个人到达同一个点，则输出 0.00。

## 样例

### 样例输入 #1
```
0 0 4
-1 Y
-1 X
1 Y
1 X
1 0 4
-1 X
1 Y
1 X
-1 Y
```
### 样例输出 #1
```
1.00
```
## 提示

100%的数据中，对于任何 m 和 d，有 1 ≤ m, d ≤ 100，轨道的初始坐标的绝对值不超

过 2 000。



---

---
title: "[TJOI2008] 小偷"
layout: "post"
diff: 普及/提高-
pid: P3859
tag: ['2008', '各省省选', '天津']
---
# [TJOI2008] 小偷
## 题目背景

一位著名的小偷进入了一个充满宝石的储藏室，这个储藏室是由一连串房间构成的，房间的标号从 $0$ 开始，想进入第 $i$ 个房间就必须从第 $i-1$ 个房间进入，如图：

![](https://cdn.luogu.com.cn/upload/pic/6100.png)

## 题目描述

上图为三个房间的情况，黑色的部分为连通两个房间的门，从左向右的编号分别为 $0,1,2\cdots$。已知当小偷从第 $0$ 个门进入储藏室时，储藏室的计时系统开始计时，每个门都有自己的关闭时间。每个屋里有不同种类的宝石，对于每种宝石，它的价值和小偷拿走它所耗费的时间也是不同的，为了简化问题，我们设想小偷在各个屋子之间走动的时间可以忽略不计，而且所有屋子里各种宝石的数量都是无限多的，那么请问小偷在能成功逃出来的情况下，可能获得宝石的最大价值。

附：对于每扇门，小偷都必须在严格早于此门关闭的时候出来才可以。
## 输入格式

每组测试数据的第一行有两个整数 $N$ 和 $M$，分别代表储藏室有 $N$ 个房间，并且有 $M$ 种宝石。第二行中会有 $N$ 个正整数，分别表示第 $i$ 个门关闭的时间（门的编号从 $0$ 开始），接下来的 $M$ 行，每行有三个整数 $r,v$ 和 $t$，分别代表这种宝石所在的房间编号为 $r$，它的价值为 $v$，小偷拿走它所耗费的时间为 $t$。
## 输出格式

输出小偷在成功逃出储藏室的情况下获得宝石的最大价值。

## 样例

### 样例输入 #1
```
3 4
9 5 5
0 1 2
1 2 2
2 3 2
2 5 3

```
### 样例输出 #1
```
8
```
## 提示

### 样例解释

虽然在第 $2$ 个房间中价值为 $5$ 的宝石好，但是不如拿两次价值为 $3$ 的宝石，在拿两次第 $0$ 房间中价值为 $1$ 的宝石，总价值为 $8$。

### 数据范围及约定

对于 $100\%$ 的数据，储藏室的屋子数量不超过 $50$，每扇门关闭的时间不超过 $1000$，并且宝石的数量不超过 $100$，价值不超过 $1000$。


---

---
title: "导弹拦截III"
layout: "post"
diff: 普及/提高-
pid: P3903
tag: []
---
# 导弹拦截III
## 题目描述

很多年以前，A 国发明了一种导弹系统用来拦截敌对势力发射的导弹。

这个系统可以发射一颗导弹拦截从由到远、高度不增加的多个导弹。

但是现在，科学家们发现这个防御系统还不够强大，所以他们发明了另外一套导弹系统。

这个新系统可以发射一颗导弹由近到远的拦截更多的导弹。

当这个系统启动，首先选择一颗敌人的导弹进行拦截，然后拦截一颗更远的高度更低的导弹进行拦截，然后拦截比第二颗更远的但高度更高的导弹……以此类推，拦截的第奇数颗导弹比前一颗导弹更远、更高，拦截的第偶数颗导弹比前一个更远、更低。

现在，给你一个从近到远的导弹高度列表，计算新系统发射一颗导弹可以拦截的最多的导弹数目。
## 输入格式

第一行是一个整数 $n$，表示敌人发射的导弹数目。接下来的一行有 $n$ 个整数，表示由近到远的。
## 输出格式

仅一个整数，表示拦截的最多导弹的数量。
## 样例

### 样例输入 #1
```
4
5 3 2 4
```
### 样例输出 #1
```
3
```
## 提示

$1\leq n\leq 10^3$，$1\leq $ 导弹高度 $\leq 10^9$。


---

---
title: "[Code+#3] 投票统计"
layout: "post"
diff: 普及/提高-
pid: P4263
tag: ['Code+']
---
# [Code+#3] 投票统计
## 题目描述

为了总结过去一段时间的命题工作，王队长组织了“我最喜欢的题目”评选活动，并邀请各位选手给题目进行投票。

具体来说，每道题目有一个正整数作为它的编号，一共有 $n$ 名选手给它们进行投票，每位选手投且仅投给一道题，其中第 $i$ 位选手所投票的题目编号为 $a_i$。

由于投票的选手众多，所以王队长请你来帮忙统计得票数。你需要找出收获选手投票最多的**题目数量**与**他们的编号**，并按**从小到大**的顺序列出这些编号。但这里有一个**例外情况**：如果所有被投票的题目得票数都相同，则王队长认为这次活动比较失败，你应该**输出-1**。


## 输入格式

输入数据第一行包含一个正整数 $T$，表示测试数据的组数，各组数据之间没有空行。

接下来 $2T$ 行，依次描述每组数据：

每组数据包含两行，其中第一行包含一个正整数 $n$，表示参与这次活动的选手人数。第二行包含 $n$ 个由空格隔开的正整数 $a_1\sim a_n$，其中第 $i$ 个数 $a_i$ 表示第 $i$ 位选手所投票的题目编号。


## 输出格式

输出应由 $T$ 组数据组成，各组数据之间没有空行。对于每一组数据：

若没有出现题面所述的例外情况，则这组测试数据输出两行，其中第一行输出一个正整数 $m$，表示收获选手投票最多的题目数量，第二行按**从小到大**的顺序输出 $m$ 个正整数，表示这些题目的编号。

若出现题面所述的例外情况，则这组测试数据输出一行，请**输出-1**。

## 样例

### 样例输入 #1
```
3
10
2 6 1 2 1 1 2 6 7 1
10
10 3 6 6 3 10 6 6 6 2
10
8 8 10 10 10 10 8 5 8 8
```
### 样例输出 #1
```
1
1
1
6
1
8
```
### 样例输入 #2
```
3
10
1 4 3 1 8 8 7 2 8 7
10
1 10 9 1 3 2 9 9 2 1
10
4 1 5 4 1 9 5 5 4 1
```
### 样例输出 #2
```
1
8
2
1 9
3
1 4 5
```
### 样例输入 #3
```
3
10
3 3 10 8 8 3 10 8 10 3
10
2 2 8 6 8 4 2 4 4 8
10
6 2 5 6 7 5 7 10 2 10
```
### 样例输出 #3
```
1
3
3
2 4 8
-1

```
## 提示

测试点编号|$n$的范围|$a_i$的范围|特殊约定
-|-|-|-
1|$=2000$|$\leq n$|得票数最多的题目唯一
2|同上|同上|同上
3|同上|$\leq 10^9$|同上
4|同上|$\leq n$|不会出现例外情况
5|同上|同上|同上
6|同上|$\leq 10^9$|同上
7|同上|$\leq n$|无
8|同上|同上|同上
9|同上|$\leq 10^9$|同上
10|同上|同上|同上
11|$=100000$|$\leq n$|得票数最多的题目唯一
12|同上|同上|同上
13|同上|$\leq 10^9$|同上
14|同上|$\leq n$|不会出现例外情况
15|同上|同上|同上
16|同上|$\leq 10^9$|同上
17|同上|$\leq n$|无
18|同上|同上|同上
19|同上|$\leq 10^9$|同上
20|同上|同上|同上

Credit： https://www.luogu.org/discuss/show?postid=35727


---

---
title: "[COCI 2006/2007 #1] Slikar"
layout: "post"
diff: 普及/提高-
pid: P4328
tag: ['2006', 'COCI（克罗地亚）']
---
# [COCI 2006/2007 #1] Slikar
## 题目描述

The evil emperor Cactus has in his possession the Magic Keg and has flooded the Enchanted Forest! The Painter and the three little hedgehogs now have to return to the Beaver's den where they will be safe from the water as quickly as possible!
The map of the Enchanted Forest consists of R rows and C columns. Empty fields are represented by '.' characters, flooded fields by '*' and rocks by 'X'. Additionally, the Beaver's den is represented by 'D' and the Painter and the three little hedgehogs are shown as 'S'.
Every minute the Painter and the three little hedgehogs can move to 4 neighbouring fields (up, down, left or right). Every minute the flood expands as well so that all empty fields that have at least one common side with a flooded field become flooded as well. Neither water nor the Painter and the three little hedgehogs can pass through rocks. Naturally, the Painter and the three little hedgehogs cannot pass through flooded fields, and water cannot flood the Beaver's den.
Write a program that will, given a map of the Enchanted Forest, output the shortest time needed for the Painter and the three little hedgehogs to safely reach the Beaver's den.
Note: The Painter and the three little hedgehogs cannot move into a field that is about to be flooded (in the same minute).
## 输入格式

The first line of input will contain two integers, R and C, smaller than or equal to 50.
The following R lines will each contain C characters ('.', '*', 'X', 'D' or 'S'). The map will contain exactly one 'D' character and exactly one 'S' character.
## 输出格式

Output the shortest possible time needed for the Painter and the three little hedgehogs to safely reach the Beaver's den. If this is impossible output the word “KAKTUS” on a line by itself.
## 样例

### 样例输入 #1
```
3 3
D.*
...
.S.
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
3 3
D.*
...
..S
```
### 样例输出 #2
```
KAKTUS
```
### 样例输入 #3
```
3 6
D...*.
.X.X..
....S.
```
### 样例输出 #3
```
6
```
## 提示

Clarification of the second sample test: The best they can do is to go along the lower border and then the left border, and get flooded one minute before reaching the den.
## 题目翻译

给你一个$R*C$ 的矩阵，这个矩阵由 $*$  , $.$ (点) , $D$  , $S$  , $X$ 组成，会有洪水从$*$ 处涌出，每单位时间都会淹没和其四联通的平地，$.$ (点)表示平地，$X$ 是障碍，不可通行，也不会没淹没，$S$ 是出发点，三只刺猬(?)从这里出发前往庇护所，它们只能在没有被洪水淹没的平地上移动，并且每单位时间只能移动到周围一个四联通的格子，$D$ 表示庇护所，庇护所不会被洪水淹没。

输入第一行两个整数$R,C$ （$R,C\leq 50$ ），接下来使这个矩阵。

输出到达庇护所的最短时间，或者输出“KAKTUS”，表示根本不可能到。

感谢@Khassar 提供的翻译


---

---
title: "[CERC2015] Kernel Knights"
layout: "post"
diff: 普及/提高-
pid: P4355
tag: ['2015', 'Special Judge']
---
# [CERC2015] Kernel Knights
## 题目描述

Jousting is a medieval contest that involves people on horseback trying to strike each other with wooden lances while riding at high speed. A total of 2n knights have entered a jousting tournament – n knights from each of the two great rival houses. Upon arrival, each knight has challenged a single knight from the other house to a duel. 

A kernel is deﬁned as some subset S of knights with the following two properties:

• No knight in S was challenged by another knight in S. 

• Every knight not in S was challenged by some knight in S.

Given the set of the challenges issued, ﬁnd one kernel. It is guaranteed that a kernel always exists.
## 输入格式

The ﬁrst line contains an integer n (1 ≤ n ≤ 100000) – the number of knights of each house. The knights from the ﬁrst house are denoted with integers 1 through n, knights from the second house with integers n+1 through 2n. 

The following line contains integers $f_1$, $f_2$,..., $f_n$ – the k-th integer fk is the index of the knight challenged by knight k $(n+1≤ f_k ≤2n)$. 

The following line contains integers $s_1$,$s_2$,...,$s_n$ – the k-th integer sk is the index of the knight challenged by knight n+k $(1≤s_k ≤n)$. 
## 输出格式

Output the indices of the knights in the kernel on a single line. If there is more than one solution, you may output any one.

SPJ的格式校验较为严格，请在每个数字后面都输出一个空格，且在最后一个空格输出后请不要输出任何符号。
## 样例

### 样例输入 #1
```
4 
5 6 7 7 
1 3 2 3
```
### 样例输出 #1
```
1 2 4 8
```
## 提示

Central Europe Regional Contest 2015 Problem K


## 题目翻译

骑术是一项中世纪的比赛，人们骑在马背上，在高速骑行时，试图用木制长矛互相攻击。总共有2n个骑士参加了一个激战锦标赛——来自两个主要竞争对手的N个骑士。到达后，每一个骑士都从另一个房间挑战一个骑士进行决斗。

内核被定义为骑士的一些子集，具有以下两个属性：

•S中没有骑士受到S中另一个骑士的挑战。

每一个不在S中的骑士都会受到一些S中的骑士的挑战。

考虑到所面临的一系列挑战，确定一个内核。可以保证内核始终存在。


---

---
title: "[Code+#4] 组合数问题"
layout: "post"
diff: 普及/提高-
pid: P4369
tag: ['Special Judge', 'Code+']
---
# [Code+#4] 组合数问题
## 题目描述

众所周知，小葱同学擅长计算，尤其擅长计算组合数，所以小葱给了你两个数 $x$ 和 $k$，希望你把 $x$ 分成恰好 $k$ 个不同的组合数的和。所谓不同，即对于两个组合数 $C(n_1,m_1)$ 和 $C(n_2,m_2)$，如果 $n_1\neq n_2$​​ 或者 $m_1\neq m_2$​，我们就称这两个组合数是不同的。为了使得计算不过于复杂，你需要保证你给出的任何一个组合数 $C(n,m)$ 满足 $0\leq m\leq n\leq x$。数据保证一定有解。
## 输入格式

从标准输入读入数据。

第一行两个整数 $x,k$。

## 输出格式

输出到标准输出。

$k$ 行，每行两个整数 $n,m$ 代表一个组合数 $C(n,m)$。如果有多种可能的答案，任意输出一组即可。

## 样例

### 样例输入 #1
```
6 2
```
### 样例输出 #1
```
3 1
3 2
```
## 提示

对于 $20\%$ 的数据，$k=1$。

对于另外 $20\%$ 的数据，$x\leq 100$。

对于另外 $20\%$ 的数据，$k=2$。

对于 $100\%$ 的数据，$1\leq x\leq 10^9,1\leq k\leq 10^3.$

Credit: https://www.luogu.org/discuss/show/38908


---

---
title: "[COCI 2017/2018 #4] Izbori"
layout: "post"
diff: 普及/提高-
pid: P4520
tag: ['2017', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2017/2018 #4] Izbori
## 题目描述

In a land with developed democracy far, far away, presidential elections for the football
association are taking place. This land consists of N counties, and each county has its own
football association. There are M presidential candidates labeled with 1, 2, … M. Each of the
football associations will select exactly one candidate to cast their vote for. The winner of the
election is the candidate with the most votes. If multiple candidates get the most amount of
votes, the winner is the one with the smallest label.

During the election campaign, candidates visited the counties and tried to gain their
sympathies. After having met all the candidates, each county’s football association
determined the order in which they would cast their vote for each candidate.

For example, let’s assume that there are four candidates in the election and that one
county’s order is 2, 1, 4, 3. This means that, unless they revoke their candidacy, the
candidate with label 2 will get the county’s vote. If candidate 2 revokes their candidacy, and
candidate 1 is still in the race, then they will get the vote, and so on.

Zdravko is a passionate football fan, and also a close friend of candidate with label K. He
wants to know which candidate will win if neither of the candidates revokes their candidacy.

He also wants to know what is the minimal number of candidates he must persuade to
revoke their candidacy in order for his friend, candidate K, to become the president of the
football association.

Zdravko is currently dealing with other problems, so he is hoping that you will answer these
questions.

## 输入格式

The first line of input contains the numbers N (1 ≤ N ≤ 100), M (1 ≤ M ≤ 15) and K (1 ≤ K ≤
M) from the task.

Each of the following N lines contains the orders given by the counties’ football associations,
i.e. a permutation of the first M natural numbers.
## 输出格式

You must output the answers to the questions from the task, each in its own line.
## 样例

### 样例输入 #1
```
3 4 1
3 4 1 2
4 2 3 1
3 4 2 1
```
### 样例输出 #1
```
3
3
```
### 样例输入 #2
```
4 1 1
1
1
1
1
```
### 样例输出 #2
```
1
0
```
### 样例输入 #3
```
4 4 4
2 3 1 4
2 3 1 4
1 3 2 4
4 3 2 1
```
### 样例输出 #3
```
2
3
```
## 提示

The output must consist of two non-empty lines, each containing a single integer. ~~The correct answer to each of the questions is worth 50% of points for that test case.(不会做spj没用)~~

**Clarification of the first test case:**

The land where the elections are being held consists of 3 counties, and there are 4 candidates for the
president of the association. If neither of the candidates revoke their candidacy, candidate 3 will win
the elections with two votes. Candidate 1 will only win if all the other candidates revoke their
candidacy.

**Clarification of the second test case:**

There is only one candidate, Zdravko’s friend, so they will surely win.
## 题目翻译

有 $n$ 个县和 $m$ 个候选人，每个县都有一个候选人的排名。每个县会给所有没有弃权的候选人中，在它们那里排名最靠前的投一票。得票最多的候选人当选，特殊地，若多个人得票相同，编号更小的候选人当选。

求:

1. 若没有候选人弃权，哪个候选人当选。
2. 最少几个候选人弃权可以使得编号为 $k$ 的候选人当选。

每一问占当前测试点的 $50 \%$ 分数。


---

---
title: "[COCI 2011/2012 #5] RAZBIBRIGA"
layout: "post"
diff: 普及/提高-
pid: P4596
tag: ['2011', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #5] RAZBIBRIGA
## 题目描述

四个长度相同的单词可以拼成一个正方形，如下图，`"HLAD","NIVA","HSIN","DEDA"` 拼成了一个 $4\times 4$ 的正方形。

![](https://cdn.luogu.com.cn/upload/image_hosting/7i3lhwgv.png)

现在给你 $N$ 个等长的单词，求这些单词的子集可以拼成多少个不同的正方形，输出方案数。

注意，**同一方格内不能有重复的单词**，如果两个单词至少有一个字符不同，那这两个单词就是不同的。
## 输入格式

第一行，一个整数 $N$，表示单词数。

接着 $N$ 行，每行一个单词，由大写字母组成，如题所示。
## 输出格式

一行，一个整数，表示方案数。

方案数可能很大，你需要开 `long long` 或 `int64`。
## 样例

### 样例输入 #1
```
4
NIVA
HLAD
HSIN
DEDA

```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
6
BAKA
BARA
BALC
CALC
ARHC
BLIC

```
### 样例输出 #2
```
8
```
## 提示

$4\le N\le 10^{5}$。

每个单词至多有 $10$ 个字符。

单词由大写字母构成。

题目译自 [COCI 2011/2012 #5 T4](https://hsin.hr/coci/archive/2011_2012/contest5_tasks.pdf)。


---

---
title: "[COCI 2017/2018 #5] Spirale"
layout: "post"
diff: 普及/提高-
pid: P4614
tag: ['2017', 'COCI（克罗地亚）']
---
# [COCI 2017/2018 #5] Spirale
## 题目描述

Little Stjepan often likes to go out with his friends and have fun in a popular nightclub in
Zagreb. However, Stjepan sometimes drinks too much soda and gets light headed from all
the sugar. Last night was an example of this, which is why Stjepan had the same image in
his mind the whole time. It was a scribble of number spirals of some sort. Since he can’t
quite remember what the image looked like, but can describe it, he is asking you to
reconstruct it for him.

Stjepan recalls that the image was of the shape of a table consisting of numbers written in ​N
rows and ​M columns. Also, he recalls that there were ​K spirals in that table. For each spiral,
the starting position is known, as well as the direction it’s moving in, which can be clockwise
and counter-clockwise. An example is shown in the images below. The spirals created
Stjepan’s image in exactly $10^{100}$ steps in the following way:
1. Initially, the table is empty, and each spiral is in its own starting position.
2. In each following step, each spiral moves to its next position. It is possible that, at
times, the spirals leave the boundaries of the table, but also to return within it.
3. After exactly $10^{100}$ steps, for each field in the table, the final value is the value of the
earliest step in which one of the spirals touched that field.

![](https://cdn.luogu.com.cn/upload/pic/19205.png)
## 输入格式

The first line of input contains positive integers ​N
, ​M
(1 ≤ ​N
, ​M
≤ 50) and ​K
(1 ≤ ​K
≤ ​N
*​M
).
Each of the following ​K lines contains three positive integers ​$X_i$
, ​$Y_i$ and ​$T_i$ (1 ≤ ​X ≤ ​N
, 1 ≤ ​Y ≤
M
, 0 ≤ ​T ≤ 1), the starting position of the $i^{th}$
spiral and its direction (0 - clockwise, 1 -
counter-clockwise). No two spirals will begin in the same field.
## 输出格式

You must output ​N lines with ​M numbers, representing the table after each spiral makes
$10^{100}$ steps.
## 样例

### 样例输入 #1
```
3 3 1
2 2 0
```
### 样例输出 #1
```
9 2 3
8 1 4
7 6 5
```
### 样例输入 #2
```
3 3 1
2 2 1
```
### 样例输出 #2
```
3 2 9
4 1 8
5 6 7
```
### 样例输入 #3
```
3 3 2
1 1 0
1 2 0
```
### 样例输出 #3
```
1 1 4
6 5 5
19 18 17
```
## 提示

In test cases worth 50% of total points, it will hold: ​N
=​M
i ​K
=1 and ​$X_i$
=​$Y_i$
=$\lfloor\frac{N+1}{2}\rfloor$, i.e. ​$X_i$
and ​$Y_i$ 
will be equal to the integer division of ​N
+1 with 2.

![](https://cdn.luogu.com.cn/upload/pic/19206.png)

For simplicity’s sake, the letter A was added to the numbers from the first spiral, and the letter B to the
numbers from the second spiral. Only the first 20 steps of the first spiral are shown, and 21 steps of
the second spiral. The fields in gray are the fields from the table we’re interested in, all other fields are
out of the table’s bounds, but are shown to illustrate the way the spirals move outside of the table.
## 题目翻译

### 题目描述

小斯捷潘经常喜欢和朋友们一起去萨格勒布一家很受欢迎的夜总会玩。不过，斯捷潘有时会喝太多苏打水，糖分过多会让他头晕目眩。昨晚就是一个例子，所以斯捷潘脑海中一直浮现着同一个画面。那是一个潦草的数字螺旋。由于他不太记得那幅图的样子，但可以描述出来，所以他请求您为他重现那幅图。

斯捷潘回忆说，图像是一张表格，由 $N$ 行 $M$ 列数字组成。此外，他还记得表格中有 $K$ 个螺旋。每个螺旋的起始位置和移动方向都是已知的，有顺时针和逆时针两种。下面的图片就是一个例子。这些螺旋以如下方式创建了斯捷潘的图像，步数正好为 $10^{100}$ ：

1. 一开始，表格是空的，每个螺旋都在自己的起始位置。
2. 在接下来的每一步中，每个螺旋都会移动到下一个位置。有时，螺旋可能会离开表格，但也可能会返回到表格内。
3. 经过整整 $10^{100}$ 步后，对于表格中的每个格子，格子中的数值就是其中一个螺旋最少经过该格子的步数。

![](https://cdn.luogu.com.cn/upload/pic/19205.png)

### 输入格式

第一行输入包含正整数 $N$ , $M$ （ $1 ≤ N , M ≤ 50$ ）和 $K$ （ $1 ≤ K ≤ N \times M$ ）。下面 $K$ 行中的每一行都包含三个正整数 $X_i,Y_i,T_i$ （ $1 ≤ X_i ≤ N , 1 ≤ Y_i ≤ M , 0 ≤ T_i ≤ 1$ ），第 $i$ 个螺旋的起始位置和方向（ $0$ 表示顺时针，$1$ 表示逆时针）。没有螺旋的起始位置在同一格子上。

### 输出格式

您必须输出一个 $N$ 行 $M$ 列的表格，表示在每个螺旋移动 $10^{100}$ 步之后的表格。

### 说明/提示

对于 $50\%$ 的数据来说，保证 $N=M,K=1$ 并且 $X_i=Y_i=\lfloor\frac{N+1}{2}\rfloor$ （也就是说， $X_i$ 和 $Y_i$ 会等于 $N+1$ 除以 $2$ 再下取整的结果。）

![](https://cdn.luogu.com.cn/upload/pic/19206.png)

为简单起见，在第一个螺旋的数字后面加上字母 `A` ，在第二个螺旋的数字后面加上字母 `B` 。只显示了第一个螺旋的前 $20$ 步和第二个螺旋的前 $21$ 步。灰色格子是表格中的格子，其他格子都超出了表格的范围，但显示出来是为了说明螺旋在表格外移动的方式。


---

---
title: "[COCI 2017/2018 #5] Birokracija"
layout: "post"
diff: 普及/提高-
pid: P4615
tag: ['2017', 'COCI（克罗地亚）']
---
# [COCI 2017/2018 #5] Birokracija
## 题目描述

Mirko has become CEO of a huge corporation. This corporation consists of ​N people,
labeled from 1 to ​N
, and Mirko is labeled 1. The corporation is structured so that each
employee (except Mirko) has a boss, and we say that employee is an assistant to that boss.
Each boss can have multiple assistants, but still reports to their boss. This holds for
everyone except Mirko, who is at the top of the pyramid and doesn’t have a boss, but has his
assistants.

When Mirko gets a task from the investors, he then delegates that task to his assistant with
the minimal number. This assistant then delegates the task to their assistant with the
minimal number, and this process repeats until the task is given to an unlucky person
without an assistant, who then must do the task.

This is when the real problems begin. The person that did the task gets paid 1 coin, the boss
of that person gets 2 coins, the boss of that person gets 3 coins, and so on, all the way to
Mirko, who gets as many coins as there are people in this sequence. After that, the
employee that really did the job realizes how unfair the system is and quits their job out of
principle.

When it comes to doing the next task in the corporation, there is a person less, so maybe the
paychecks are less, but the work must continue. Tasks are piling up, so the whole procedure
(assigning a new task, doing it, dividing paychecks and the person doing the task quitting)
repeats until Mirko is left alone in the corporation and does his first (also his last) task.

Of course, Mirko will have amassed quite a fortune until then, but he also wants to know how
much money each of the employees earned.
## 输入格式

The first line of input contains the positive integer ​N (2 ≤ ​N ≤ 2·$10^5$​ ), the number of
employees (including Mirko).

The following line contains ​N- 1 positive integers $a_2$​ , ​$a_3$​ , ​$a_4$ , …, ​$a_n$
(1 ≤ ​$a_i$
< ​i
), where ​$a_i$
denotes the boss of employee ​i
.
## 输出格式

You must output a single line consisting of ​N numbers, the $i^{th}$ number corresponding to the
amount of money earned by the $i^{th}$ employee.
## 样例

### 样例输入 #1
```
3
1 1
```
### 样例输出 #1
```
5 1 1
```
### 样例输入 #2
```
5
1 2 2 4
```
### 样例输出 #2
```
13 8 1 3 1
```
## 提示

In test cases worth 50% of total points, it will hold 2 ≤ ​N
≤ 5000.

**Clarification of the second test case:**

Mirko assigns the first task to employee 2, who then assigns it to employee 3, who then does it. For
this, employee 3 gets 1 coin, employee 2 gets 2 coins, and employee 1 (Mirko) gets 3 coins.
Employee 3 then quits.

Mirko assigns the second task to employee 2, who then assigns it to employee 4 (because employee
3 quit), who then assigns it to employee 5, who then does it. For this, employee 5 gets 1 coin,
employee 4 gets 2 coins, employee 2 gets 3 coins, and employee 1 gets 4 coins. Employee 5 then quits.

The procedure is repeated for a total of 5 tasks.

In total, Mirko gets 13 coins, employee 2 gets 8, employee 4 gets 3, and employee 3 and 5 each get 1
coin.
## 题目翻译

Mirko是一家大公司的CEO。该公司由$N$人组成，编号为1到N，Mirko编号为$1$。公司的结构像一棵树一样，每个员工（Mirko除外）都有老板，我们说这个员工是该老板的助手。每个老板都可以有多名助手。Mirko没有老板，但有他的助手。

之后会有一些任务，Mirko会将该任务委托给他编号最小的助手。然后，该助手也将任务委托给他编号最小的助手，并且这个过程重复进行，直到任务被发送给没有助手的人，然后他必须亲自完成任务。

执行任务的人获得1个硬币，那个人的老板获得2个硬币，那个人的老板获得3个硬币，依此类推，一直到Mirko。之后，真正完成工作的员工意识到系统的不公平并感到伤心，并且不会再执行任务（也就是辞职）。

当公司收到的下一个任务时，因为少了一个人，所以薪水可能更少，但工作必须继续。任务是无限多的（直到公司倒闭），因此整个过程（分配新任务，执行任务，划分薪水和执行任务人员的退出）重复进行，最后Mirko独自留在公司并完成他的第一个（也是他的最后一个）任务。

当然，在此之前，Mirko将积累相当多的财富，但他也想知道每个员工赚了多少钱。

输入输出格式

输入格式：
第一行有一个整数$N(2 ≤ N ≤ 2e5)$，既包括Mirko在内的员工的个数。
紧接着第二行有$n-1$个整数，分别为$a2,a3,\cdots ,an(1 ≤ a_i < i )$，$ai$表示$ai$的上级。

输出格式

输出一行$N$个整数，第$i$个整数表示编号为$i$的人
能得到的金币数。

说明

$50\%$的数据满足$2≤N≤5000$。


---

---
title: "[BalticOI 2011] Plagiarism (Day2)"
layout: "post"
diff: 普及/提高-
pid: P4670
tag: ['2011', 'BalticOI（波罗的海）']
---
# [BalticOI 2011] Plagiarism (Day2)
## 题目描述

The participants of the World Programming Competition submitted $N$ solution files $f_1 ,...,f_N$ to the grading system. Before accepting the results as final, the jury would like to rule out any possibility of plagiarism. They have a program that takes two files and compares them to decide if they are too similar to each other.

However, the number of files is rather big and it would take too much time to compare all pairs. On the other hand, many pairs could be quickly eliminated based on the fact that the file sizes are too different.

More precisely, the jury decided to fully skip comparing every pair where the size of the smaller file is less than 90% of the size of the larger one. So, the comparison program has to examine only those distinct pairs of files $(f_i, f_j)$ where $i≠j, size(f_i) \le size(f_j)$ and $size(f_i) \ge 0.9 \times size(f_j)$.

Write a program that computes the number of pairs of files that will have to be examined.
## 输入格式

The first line of input contains the integer $N$, the number of solution files submitted. The second line contains $N$ integers $size(f_1),\cdots,size(f_N)$, each showing the size of one file.
## 输出格式

The first and only line of output must contain one integer, the number of pairs of files that will have to be examined.
## 样例

### 样例输入 #1
```
2
2 1
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
5
1 1 1 1 1
```
### 样例输出 #2
```
10
```
## 提示

对于 $50\%$ 的数据，$1 \le N \le 2000$。

对于所有数据，$1 \le N \le 10^5,1 \le f_i \le 10^8$。
## 题目翻译

Description

世界编程大赛的选手们提交N份程序文件f1, …, fN给评测系统。在将评测结果正式公布之前，评委会想要排除一切可能的剽窃现象。他们已有一个对比程序，用来比较两份程序文件，并判断它们是否太过相似了。 然而程序文件的数目相当大，把每两份（一对，pair）文件都进行比较的话将花太多的时间。另一方面，许多对(pair)可以直接被排除，如果文件的大小相差太大的话。 更准确地说，评委会决定，如果每两份文件（一对，pair）中，较小文件的体积小于较大文件的体积的90%，那将直接不比较这样的一对(pair)。所以，对比程序只比较这样的一对(fi, fj)： i≠j, size(fi )≤ size(fj )且size(fi )≥0.9∙size(fj )。 编写程序计算有多少对(pair)文件需要被比较。

Input:

第1行包含一个整数N，即提交的程序文件总数。 第2行包含N个整数size(f1), …, size(fN)，每个整数代表文件的体积大小。

Output:

第1行，也是唯一的一行，给出一个整数，即需要被比较的文件的对(pair)的数目。

感谢@谦谦君子 提供翻译


---

---
title: "[CERC2017] Assignment Algorithm"
layout: "post"
diff: 普及/提高-
pid: P4736
tag: ['2017']
---
# [CERC2017] Assignment Algorithm
## 题目描述

A low-budget airline is designing a sophisticated algorithm that will assign more desirable seats to passengers who buy tickets earlier. Their airplane has $r$ rows of seats, where $r$ is an even integer. There are also $3$ exit rows in the airplane; those rows do not contain any seats but only provide access to the emergency exits. One exit row is in the very front of the airplane (before the first row of seats), one in the very back (behind the last row of seats) and one right in the middle. The rows are numbered with integers $1$ through $r + 3$ with row numbers increasing from the front to the back of the airplane. Rows
numbered $1$, $r/2 + 2$ and $r + 3$ are exit rows while all the other rows are seat rows.
The seating configuration is “3–3–3” — each seat row contains three groups of three seats with the passenger aisles between the groups. Seats in the same row are denoted with consecutive letters left to right corresponding to the pattern “``ABC.DEF.GHI``”.
When a passenger purchases a ticket, she is assigned a seat according to the following rules:
   1.    If there is an empty seat in a row directly after an exit row, all other rows are ignored in the following step (but they are not ignored when balancing the airplane in the last step).
   2.    First, we select a seat row with the largest number of empty seats. If there are multiple such rows,we select the one closest to an exit row (distance between rows $a$ and $b$ is simply $|a − b|$). If there are still multiple such rows, we select the one with the lowest number.
   3.    Now, we consider empty seats in the selected row and select one with the highest priority. Seat priorities, from highest to lowest are as follows:
   - (a) Aisle seats in the middle group (``D`` or ``F``).
   - (b) Aisle seats in the first and third group (``C`` or ``G``).
   - (c) Window seats (``A`` or ``I``).
   - (d) Middle seat in the middle group (``E``).
   - (e) Other middle seats (``B`` or ``H``).

If there are two empty seats with the same highest priority, we consider the balance of the entire airplane. The airplane’s left side contains all seats with letters ``A``, ``B``, ``C`` or ``D``, while the right side contains all seats with letters ``F``, ``G``, ``H`` or ``I``. We select an empty seat in the side with more empty seats. If both sides have the same number of empty seats, we select the seat in the left side of the airplane.

Some of the airplane’s seats are already reserved (possibly using a completely different procedure from the one described above). Determine the seats assigned to the next $n$ passengers purchasing a ticket.

## 输入格式

The first line contains two integers $r$ and $n(2 \le r \le 50, 1 \le n \le 26)$ — the number of seat rows in the airplane (always an even integer) and the number of new passengers purchasing tickets. The following $r + 3$ lines contain the current layout of the airplane. The $j-th$ line contains exactly $11$ characters — the layout of the row $j$ of the airplane. Exit rows and aisles are denoted with the “``.``” characters. The “``#``” character denotes a reserved seat, while the “``-``” character denotes a seat that is currently empty. You may assume there will be at least $n$ empty seats in the airplane.

## 输出格式

Output $r + 3$ lines containing the final layout of the airplane. The layout should be exactly the same as in input with the following exception: the seat assigned to the $j-th$ passenger purchasing a ticket should be denoted with the $j-th$ lowercase letter of the English alphabet.

## 样例

### 样例输入 #1
```
2 17
...........
---.#--.---
...........
---.---.---
...........

```
### 样例输出 #1
```
...........
hnd.#lb.fpj
...........
kqg.cma.eoi
...........

```
### 样例输入 #2
```
6 26
...........
---.---.###
#-#.---.---
---.###.---
...........
---.###.---
#--.#-#.--#
#--.--#.#-#
...........

```
### 样例输出 #2
```
...........
gke.aic.###
#-#.mzo.r-v
x-p.###.n-t
...........
fjb.###.dlh
#-s.#-#.w-#
#-u.qy#.#-#
...........

```
## 题目翻译

## 题目描述

一家航空公司正在设计一种复杂的算法，将为提前购票的乘客分配更理想的座位。他们的飞机有 $r$ 排座位，其中 $r$ 是一个偶数。飞机上有 $3$ 行出口行，这些排没有座位，只提供通往紧急出口的通道。一个出口排在飞机的最前面（在第一排座椅之前），一个在最后面（在最后一排座椅之后），另一个在中间的位置。这些行用整数 $1$ 到 $r+3$ 进行编号，行号从飞机前部到后部递增。

编号为 $1$、$r/2+2$ 和 $r+3$ 的行是出口行，而所有其他行都是座位行。
座位配置为 “$3–3–3$” 每排座位包含三个组三个座位，每组座位之间有乘客通道。同一排座位用从左到右的连续字母表示，对应于“``ABC.DEF.GHI``”模式。
当乘客购买机票时，会根据以下规则为其分配座位：

1.如果在出口排的正后方有一排空座位，则在接下来的步骤中忽略所有其他排（但在最后一步中平衡飞机时不忽略）。

2.首先，我们选择空座位数最多的一排座位。如果有多个这样的行，则选择最靠近出口行的行（行 $a$ 和 $b$ 之间的距离仅为 $|a− b|$）。如果仍有多个这样的行，则选择编号最低的行。

3.现在，我们考虑所选行中的空座位，并选择一个优先级最高的座位。座位优先级从高到低排序按照如下规则：\
-（a）中间组的过道座位（即`D`或`F`）。\
-（b）第一组和第三组的过道座位（即``C``或``G``）。\
-（c）靠窗座位（即``A``或``I``）。\
-（d）中间组中的中间座位（即`E`）。\
-（e）第一组和第三组的中间座位（即``B``或``H``）。\
如果有两个空座位具有相同的最高优先级，我们会考虑整个飞机的平衡。飞机左侧包含字母``A``、``B``、`C`或`D`的所有座位，而右侧包含字母`F` 、`G`、`H`或 `I` 的所有座位。我们在空座位较多的一侧选择一个空座位。如果两边有相同数量的空座位，则优先选择飞机左侧的座位。\
飞机的一些座位已经预定好了（即输入中的 `#`）。现在请你确定分配给第 $i$ 个购票的乘客的座位。

## 输入格式

第一行包含两个整数 $r$ 和 $n$ （$2\le r \le50，1\le n \le26$）表示飞机中的座位排数（保证为偶数）和购买机票的乘客数。第 $2$ 到 $r+3$ 行包含飞机的当前布局。第 $j$ 行正好包含 $11$ 个字符，即飞机第 $j$ 行的布局。出口行和通道用 “``.``” 字符表示。“``#``” 字符表示已经预定好的座位，而“``-``”表示当前空座位。保证飞机上至少有 $n$ 个空座位。

## 输出格式

输出包含飞机最终布局的 $r+3$ 行。整体布局应与输入中的布局相同，分配给第 $j$ 个购票乘客的座位应使用英文字母，依次从小写字母 $a$ 到 $z$ 表示。

### 样例输入 #1.

```
2 17
...........
---.#--.---
...........
---.---.---
...........
```

### 样例输出 #1

```
...........
hnd.#lb.fpj
...........
kqg.cma.eoi
...........
```

### 样例输入 #2

```
6 26
...........
---.---.###
#-#.---.---
---.###.---
...........
---.###.---
#--.#-#.--#
#--.--#.#-#
...........
```

### 样例输出 #2

```
...........
gke.aic.###
#-#.mzo.r-v
x-p.###.n-t
...........
fjb.###.dlh
#-s.#-#.w-#
#-u.qy#.#-#
...........
```


---

---
title: "[CERC2017] Hidden Hierarchy"
layout: "post"
diff: 普及/提高-
pid: P4746
tag: ['2017']
---
# [CERC2017] Hidden Hierarchy
## 题目描述

You are working on the user interface for a simple text-based file explorer. One of your tasks is to build a navigation pane displaying the directory hierarchy. As usual, the filesystem consists of directories which may contain files and other directories, which may, in turn, again contain files and other directories etc. Hence, the directories form a hierarchical tree structure. The top-most directoryin the hierarchy is called the root directory. If directory $d$ directly contains directory $e$ we will say that $d$ is the parent directory of $e$ while $e$ is a subdirectory od $d$. Each file has a size expressed in bytes. The directory size is simply the total size of all files directly or indirectly contained inside that directory.

All files and all directories except the root directory have a name — a string that always starts with a letter and consists of only lowercase letters and “``.``” (dot) characters. All items (files and directories) directly inside the same parent directory must have unique names. Each item (file and directory) can be uniquely described by its path — a string built according to the following rules:
   - Path of the root directory is simply “``/``” (forward slash).
   - For a directory $d$, its path is obtained by concatenating the directory names top to bottom along the hierarchy from the root directory to $d$, preceding each name with the “``/``” character and placing another “``/``” character at the end of the path.
   - For a file $f$ , its path is the concatenation of the parent directory path and the name of file $f$ .

We display the directory hierarchy by printing the root directory. We print a directory $d$ by outputting a line of the form “$m_d \ p_d \ s_d$” where $p_d$ and $s_d$ are the path and size of directory $d$ respectively, while $m_d$ is its expansion marker explained shortly. If $d$ contains other directories we must choose either to collapse it or to expand it. If we choose to expand $d$ we print (using the same rules) all of its subdirectories in lexicographical order by name. If we choose to collapse directory $d$, we simply ignore its contents.

The expansion marker $m_d$ is a single blank character when $d$ does not have any subdirectories, “``+``” (plus) character when we choose to collapse $d$ or a “``-``” (minus) character when we choose expand $d$.

Given a list of files in the filesystem and a threshold integer $t$, display the directory hierarchy ensuring that each directory of size at least $t$ is printed. Additionally, the total number of directories printed should be minimal. Assume there are no empty directories in the filesystem — the entire hierarchy can be deduced from the provided file paths. Note that the root directory has to be printed regardless of its size. Also note that a directory of size at least $t$ only has to be printed, but not necessarily expanded.

## 输入格式

The first line contains an integer $n(1 \le n \le 1 000)$ — the number of files. Each of the following $n$ lines contains a string $f$ and an integer $s(1 \le s \le 10^6)$ — the path and the size of a single file. Each path is at most $100$ characters long and is a valid file path according to the rules above. All paths will be different.

The following line contains an integer $t(1 \le t \le 10^9)$ — the threshold directory size.
## 输出格式

Output the minimal display of the filesystem hierarchy for the given threshold as described above.

## 样例

### 样例输入 #1
```
9
/sys/kernel/notes 100
/cerc/problems/a/testdata/in 1000000
/cerc/problems/a/testdata/out 8
/cerc/problems/a/luka.cc 500
/cerc/problems/a/zuza.cc 5000
/cerc/problems/b/testdata/in 15
/cerc/problems/b/testdata/out 4
/cerc/problems/b/kale.cc 100
/cerc/documents/rules.pdf 4000
10000
```
### 样例输出 #1
```
- / 1009727
- /cerc/ 1009627
/cerc/documents/ 4000
- /cerc/problems/ 1005627
- /cerc/problems/a/ 1005508
/cerc/problems/a/testdata/ 1000008
+ /cerc/problems/b/ 119
+ /sys/ 100

```
### 样例输入 #2
```
8
/b/test/in.a 100
/b/test/in.b 1
/c/test/in.a 100
/c/test/in.b 1
/c/test/pic/in.a.svg 10
/c/test/pic/in.b.svg 10
/a/test/in.a 99
/a/test/in.b 1
101

```
### 样例输出 #2
```
- / 322
+ /a/ 100
- /b/ 101
/b/test/ 101
- /c/ 121
+ /c/test/ 121
```
### 样例输入 #3
```
2
/a/a/a 100
/b.txt 99
200

```
### 样例输出 #3
```
+ / 199

```
## 题目翻译

## 题目描述

假设你正在开发一个简单的以输入文字为基础的文件夹浏览器。你的工作之一就是要构建一个导航目录来显示这些文件夹的上下关系。通常而言，这些文件夹很可能是互相嵌套的——比如，某个文件夹下还有一个文件夹，当然也可能会包含某些文件。因此，这些文件夹会形成一种树状结构。在这个目录中，最顶端的那个文件夹称之为根目录。如果文件夹d中直接含有文件夹e，那么我们称之为文件夹d是文件夹e的父文件夹，而文件夹e是文件夹d的子文件夹。每个文件都有一个用字节数来表示的大小。一个文件夹的大小是被直接或不直接包含于其中的所有文件的大小之和。

所有的文件和文件夹（除根目录外）都有一个名字——一个只由小写字符和点（“."）组成并且只由小写字母开头的字符串。包含于同一个父目录下的文件或文件夹的名字必定各不相同。而且，路径与文件是一一对应的。生成路径的规则如下：

- 根目录路径是“/”
- 文件夹d的路径是从根目录开始，沿着文件夹的父子关系，顺次往下，在每个文件夹名字前添加一个“/”，相互连接，并在路径的最末尾添加一个“/”。
- 文件f的路径是由它的父文件夹的路径加上文件名得到的。

通过打印根目录，我们能够显示文件夹的上下父子关系。打印文件夹d时，我们输出一个“md pd sd”形式的字符串。其中，pd是文件夹d的路径，sd是文件夹d的大小，md是文件夹d的扩展标记。如果文件夹d包含其他文件夹，我们可以选择是否展开它。如果我们要展开文件夹d，我们就要以字典序打印它里面包含的所有文件和文件夹。如果我们不打开文件夹d，那么我们就可以忽略其中的内容。

如果d是一个空文件夹（即没有包含任何文件或文件夹），那么md就仅仅是一个空字符。当我们要展开这个文件夹的时候，md是一个“-”，而如果我们不展开这个文件夹的是md是一个“+”。

现在，输入一列文件和一个限制性整数t。请你打印（按照前述展开打印方法）所有的大小不小于t的文件夹。并且，打印的文件夹总数一定是最小的。保证不存在空文件夹即整个文件夹上下关系都可从输入的文件路径中推断得出。注意，大小不小于t的文件夹必须要被打印，但不一定要展开。根目录不论多大都要被打印。

## 输入输出格式

### 输入格式

第一行输入包含一个整数n（1<=n<=1000）表示文件的总数。之后的n行中，每行包含一个字符串f和一个整数s（1<=s<=10^6）。其中，f表示文件路径和单个文件的大小。每个路径最多含有100个字符并保证是一个合法路径。所有的路径保证各不相同。

之后的一行包含限制性整数t（1<=t<=10^9）。

### 输出格式

按照前述方法输出最少的展开文件的方法。


---

---
title: "[CERC2014] Wheels"
layout: "post"
diff: 普及/提高-
pid: P4760
tag: ['2014']
---
# [CERC2014] Wheels
## 题目描述

A very important and complicated machine consists of $n$ wheels, numbered $1, 2, . . . , n$. They are actually cogwheels, but the cogs are so small that we can model them as circles on the plane.

Every wheel can spin around its center.

Two wheels cannot overlap (they do not have common interior points), but they can touch.

If two wheels touch each other and one of them rotates, the other one spins as well, as their micro-cogs are locked together.

A force is put to wheel $1$ (and to no other wheel), making it rotate at the rate of exactly one turn per minute, clockwise. Compute the rates of other wheels’ movement. You may assume that the machine is not jammed (the movement is physically possible).

## 输入格式

The first line of input contains the number of test cases $T$. The descriptions of the test cases follow:

Each test case consists of one line containing the number of wheels $n(1 \le n \le 1000)$ . 

Each of the following lines contain three integers $x, y$ and $r(-10 000 \le x, y \le 10 000, 1 \le r \le 10 000)$ where $(x, y)$ denote the Cartesian coordinates of the wheel’s center and $r$ is its radius.
## 输出格式

For each test case, output $n$ lines, each describing the movement of one wheel, in the same order as in the input. For every wheel, output either ``p/q clockwise`` or ``p/q counterclockwise``,where the irreducible fraction $p/q$ is the number of wheel turns per minute. If $q$ is $1$, output just $p$ as an integer. If a wheel is standing still, output ``not moving``.
## 样例

### 样例输入 #1
```
1
5
0 0 6
6 8 4
-9 0 3
6 16 4
0 -11 4

```
### 样例输出 #1
```
1 clockwise
3/2 counterclockwise
2 counterclockwise
3/2 clockwise
not moving
```
## 题目翻译

一个非常重要和复杂的机器由$n$个轮子组成，编号为$1,2,…,n$。它们其实是齿轮，但是齿太小了，我们可以把它们近似看成成平面上的圆。



每一个齿轮都能围绕它的中心旋转。



两个齿轮不会重叠（因为它们内部没有共同的点），但它们可以互相接触。



如果两个齿轮相互接触，其中一个齿轮转动，另一个齿轮也随之转动，因为它们的齿被卡在一起。



一个力作用于齿轮1（并且力没有作用于其他齿轮），使它以每分钟转一圈的速度顺时针旋转。计算其他齿轮的运动速度。你可以假设机器没有卡住（运动在物理理论上是可以的）。



输入格式：



输入包括多组数据，第一行为组数$T$；



对于每组数据如下：



第一行包括一个齿轮数$n,(1 \le n \le 1000)$。



接下来$n$行每行包含三个整数$x,y,r,(10000≤x,y≤10000,1≤r≤10000)$，其中$(x,y)$表示齿轮中心的笛卡尔坐标（直角坐标），$r$是其半径。



输出格式：



对于每组数据，输出$n$行，第$i$行为第$i$个齿轮的运动状态。对于每个齿轮，输出或`p/q clockwise`或`p/q counterclockwise`，其中最简分数`p/q`是每分钟齿轮转数。如果$q$为$1$，则输出整数$p$。如果齿轮静止不动，则输出`not moving`。 


---

---
title: "心碎"
layout: "post"
diff: 普及/提高-
pid: P4903
tag: []
---
# 心碎
## 题目背景

NOIP2015初赛。CYD大神在他的母校跪掉了。初赛那天，他回到原来的教室参观了一下，发现那张遍布了N个洞的课桌还摆在那里——那是他初中时和XHY同学坐过的桌子。这时，CYD大神的心都碎了。

## 题目描述

CYD大神的心可以看做一个环，内外都顺时针均匀分布了N个一一正对应的点。当他看到第i个洞时，就会想起第Ai件往事，这会在CYD大神的心上外侧第i个点和内侧第Ai个点间留下一道伤痕(i<Ai时为顺时针，i>Ai时逆时针，i=Ai时正对应)。

CYD大神觉得，他的心一定不会再碎了，所以，他想让你帮他写一个程序，确定一个Ai的排列，使得他的心碎的块数最多。

## 输入格式

第一行，一个正整数N。

## 输出格式

仅一行，一个正整数表示CYD大神的心最多碎成多少块。

## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
3
```
### 样例输出 #2
```
5
```
### 样例输入 #3
```
4
```
### 样例输出 #3
```
9
```
## 提示

对于40%数据，前i\*10%,N<=i\*5。

对于50%数据，N<=50。

对于70%数据，N<=233。

对于100%数据，N<=2333。

/\*P.S.样例解释\*/

样例1:1->2,2->1

样例2:1->2,2->3,3->1,注意：若1->3,2->2,3->1，则三线共点。

样例3:1->3,2->4,3->2,4->1



---

---
title: "Agent1"
layout: "post"
diff: 普及/提高-
pid: P4936
tag: ['O2优化']
---
# Agent1
## 题目背景

2018年11月17日，中国香港将会迎来一场`XM大战`，是世界各地的`ENLIGHTENED`与`RESISTANCE`开战的地点，某地 的`ENLIGHTENED总部`也想派`Agent`去参加这次的`XM大战`，与世界其他地方的`ENLIGHTENED`并肩作战。
## 题目描述

某地的`ENLIGHTENED总部`总部有$N$个`Agent`，每个`Agent`的能力值互不相同，现在`ENLIGHTENED行动指挥`想要派出$A,B$两队`Agent`去参加`XM大战`。但是参加大战的两个队伍要满足两个要求：

1. $A$队中能力最大的`Agent`的能力值要小于$B$队能力最弱的`Agent`的能力值。
2. $A,B$两队都要有人参战。

并不一定所有的`Agent`都要去参加`XM大战`的，心急的`ENLIGHTENED行动指挥`想知道有多少种安排`Agent`参加大战的方案。由于答案可能很大，所以只需要你求出答案模$(10^9+7)$的值就可以了。
## 输入格式

输入仅一行，为一个整数$N$。
## 输出格式

输出答案模$(10^9+7)$的值。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
6
```
### 样例输出 #2
```
129
```
## 提示

对于$20\%$的数据 $N \leq 10$

对于$40\%$的数据 $N \leq 10^3$

对于$60\%$的数据 $N \leq 10^5$

对于$100\%$的数据 $N \leq 10^9$


---

---
title: "[USACO14JAN] Cross Country Skiing S"
layout: "post"
diff: 普及/提高-
pid: P4955
tag: ['2014', 'USACO']
---
# [USACO14JAN] Cross Country Skiing S
## 题目描述

The cross-country skiing course at the winter Moolympics is described by an $M * N$ grid of elevations (1 <= M,N <= 500), each elevation being in the range 0 .. 1,000,000,000.  

Some of the cells in this grid are designated as waypoints for the course.  The organizers of the Moolympics want to assign a difficulty rating $D$ to the entire course so that a cow can reach any waypoint from any other waypoint by repeatedly skiing from a cell to an adjacent cell with absolute elevation difference at most $D$.  Two cells are adjacent if one is directly north, south, east, or west of the other.  The difficulty rating of the course is the minimum value of $D$ such that all waypoints are mutually reachable in this fashion.
## 输入格式

* Line 1: The integers $M$ and $N$.

* Lines 2..1+M: Each of these $M$ lines contains $N$ integer elevations.

* Lines 2+M..1+2M: Each of these $M$ lines contains $N$ values that are either $0$ or $1$, with $1$ indicating a cell that is a waypoint.
## 输出格式

The ski course is described by a 3 x 5 grid of elevations.  The upper-left, upper-right, and lower-right cells are designated as waypoints.
## 样例

### 样例输入 #1
```
3 5
20 21 18 99 5
19 22 20 16 26
18 17 40 60 80
1 0 0 0 1
0 0 0 0 0
0 0 0 0 1
```
### 样例输出 #1
```
21
```
## 提示

If D = 21, the three waypoints are reachable from each-other.  If D < 21, then the upper-right waypoint cannot be reached from the other two.
## 题目翻译

乡村越野滑雪比赛在一个 m×n (1<=m,n<=500）的二维表格中进行，每个格子的海拔在 0 至 1000000000 之间。滑雪者可以从一个格子滑到相邻格子，（可以从高处滑到低处，也可以从低处滑到高处），难度值 D 是两者之间的海拔差的绝对值。相邻的格子是指有公共边的格子。一条路径的难度值是指该路径上相邻两格子的难度值的最大值。现在给出若干个关键格子，求所有这些关键格子相互可达的最小的难度值 D。


---

---
title: "[COCI 2017/2018 #7] Clickbait"
layout: "post"
diff: 普及/提高-
pid: P5053
tag: ['2017', 'COCI（克罗地亚）']
---
# [COCI 2017/2018 #7] Clickbait
## 题目描述

While surfing online, Slavko came across an ad displaying a system of containers and pipes
(an example of such system is illustrated in the image below) with the message: “If container
**1** starts filling up with water, determine the order in which the containers get filled up.”

![](https://cdn.luogu.com.cn/upload/pic/44318.png)

The system consists of K containers denoted with numbers from 1 to K, and we can describe
it using a matrix of characters with N rows and M columns. The containers are **in the shape of a rectangle**​, and the outlines of the containers and pipes are shown with the following
characters:

-  ‘-’ if it’s a horizontal part of the outline,
-  ‘|’ if it’s a vertical part of the outline, and
-  ‘+’ if it’s a spot where the horizontal and vertical parts of the outline connect. An exception is where the containers and pipes connect. In that case, the container outline dominates (see sample tests).

In an arbitrary place within each container, there is a string of digits that represent the label
of the container, and all the other fields in the matrix are equal to ‘.’ (dot).

All containers except the one labeled with 1 have **exactly one** supply pipe that enters the
container in its **upper side**​. The container labeled with 1 does not have a supply pipe.

The containers can have multiple (also possible, zero) discharge pipes that leave the
container out of its **lateral side**​. The places where discharge pipes leave a container will be
in mutually **distinct rows** in the matrix.

The pipes directly connect two containers, which means that **it is not possible** to split the
pipes or connect multiple pipes into one, and no two pipes will intersect. On their way,
looking from the source to the destination container, the pipes always descend to the
following row or stay in the same row. In other words, they never go back to the previous
row, so the water can flow freely from one container to another.

The water enters a container until it is full. If the water level reaches the level of the
discharge pipe, the water will flow through that pipe until the container the pipe leads into is
filled up.

Help Slavko and determine the order in which the containers will fill up.

**Please note:**
- The test data is such that each character ‘+’ is surrounded with **exactly one character** ‘-’ to the left or the right side and **exactly one** character ‘|’ to the upper or lower side, and **all other** adjacent characters in directions up, down, left and right will be equal to ‘.’ (dot).
- The only places where the pipe in the matrix is in a field adjacent to the container outline are the places where the pipe enters or exits the container. In other words, a pipe will never run right next to a container (except where it connects with the
container). The entry for the supply pipe is labeled with the character ‘|’ above a container, whereas the exit of the discharge pipe is labeled with the character ‘-’ on the lateral side of a container.
## 输入格式

The first line contains two integers N and M (1 ≤ N, M ≤ 1000), matrix dimensions.

The following N lines contain M characters describing the container system.
## 输出格式

You must output K lines. The $i^{th}$
line contains the label of the container that fills up $i^{th}$
. A
solution will always exist and will be unique.
## 样例

### 样例输入 #1
```
12 13
..+--+.......
+-|..|.......
|.|.1|--+....
|.+--+..|....
|......+----+
+---+..|..2.|
....|..+----+
.+--+........
.|...........
+---+........
|.3.|........
+---+........
```
### 样例输出 #1
```
2
3
1
```
### 样例输入 #2
```
8 10
..........
.......+-+
...+---|1|
...|...+-+
...|......
..+-+.....
..|2|.....
..+-+.....

```
### 样例输出 #2
```
2
1
```
## 提示

In test cases worth 70% of total points, it will hold N, M ≤ 100.

**Clarification of the first test case:**

Container 1 starts filling up with water.

The water level in container 1 grows, and in one moment reaches the level of the discharge pipe leading to container 2. The water flows through the pipe until container 2 fills up.

After that, the water level in container 1 keeps growing until it reaches the level of the discharge pipe leading to container 3, which fills up next.

Finally, the water level in container 1 keeps growing and the container fills up.
## 题目翻译

在上网的时候，Slavko遇到了一个广告，这个广告上面有一个由容器和管道组成的系统（如图是一个系统的例子）和一行字：“如果往编号为1的容器里注水，请确定这些容器被注满水的顺序。”
这个系统包含K个编号为1到K的容器，并且我们可以用一个N×M的矩阵来描述它。**这些容器的形状为长方形**。容器和管道的轮廓将用这些字符表示：
- 如果字符为‘-’，那么这个位置是容器和管道的轮廓的水平部分。
- 如果字符为‘|’，那么这个位置是容器和管道的轮廓的垂直部分。
- 如果字符为‘+’，那么这个位置同时是容器和管道的轮廓的水平和垂直部分。（即容器的四个角，管道的拐弯部分），一个例外是容器与管道的相交部分，在这个位置不使用+。
在每一个容器内的某个位置内，都存在一个表示这个容器编号的数字串。矩阵内既不是容器和管道的轮廓，又不是表示容器编号的数字串的位置上的字符为'.'。
除了编号为1的容器以外，所有的容器的**顶部都接入且只接入了一条可以使水进入容器的**管道。编号为1的容器的顶部没有管道。
每个容器的**侧面**可以接入多条（也可以没有）可以使水流出容器的管道。**没有两个可以使水流出容器的管道与容器的连接处在同一个高度。**
管道必须有方向的连接两个容器，这也就意味着一条管道**不能**在某些地方分成两条管道，或是两条管道交汇成一条管道，并且没有两条管道会相交。并且管道永远不会向上拐弯，所以可以保证管道里的水可以正常的向下流动并且流入对应接入的容器里。
水只能进入没有被装满水的容器。如果一个容器中的水位达到了可以使水流出的管道的高度，水将会流入这个管道的另一端所接入的容器里，直到那个容器满了为止。
请帮助Slavko确定这些容器被注满水的顺序。
**请注意：**
- 在矩阵中，每一个字符'+'都**有且仅有一个**'-'字符在其左边或右边与其相邻，并且**有且仅有一个**'|'字符在其上边或下边与其相邻。其余的与其相邻的字符将均为'.'。
- 在字符矩阵中，管道与容器轮廓相邻的唯一可能的位置是管道与容器连接的位置。换句话说，除了管道与容器连接的情况，管道不可能与容器相邻。在与容器连接的位置，管道使水流入容器的一端用'|'标识，使水流出容器的一端用'-'标识。

输入格式

第一行，两个整数N,M(1≤N,M≤1000)，表示矩阵的大小。
接下来的N行，每行M个字符，描述了如题目所述的容器系统。

输出格式

你必须输出K行。第i行表示第i个被注满水的容器的编号。输入保证存在唯一解。

说明

对于$70%$的数据，满足N,M≤100。
样例1的解释：
开始向容器1注水。
容器1中的水位升高，并且在某个时刻达到通向容器2的管道的高度。水流进管道并最终流向容器2，直到容器2装满水为止。
此后，容器1中的水位继续升高，直到达到通向容器3的管道的高度，水流进管道并最终流向容器3，直到容器3装满水为止。
最后，容器1中的水位持续升高，直到容器1装满水。


---

---
title: "Tweetuzki 爱等差数列"
layout: "post"
diff: 普及/提高-
pid: P5077
tag: []
---
# Tweetuzki 爱等差数列
## 题目描述

Tweetuzki 特别喜欢等差数列。尤其是公差为 $1$ 且全为正整数的等差数列。

显然，对于每一个数 $s$，都能找到一个对应的公差为 $1$ 且全为正整数的等差数列各项之和为 $s$。这时，Tweetuzki 想知道，满足这样条件的等差数列，最小的首项是多少。

由于 Tweetuzki 的数学非常差，尤其是因式分解，所以请你告诉他结果。
## 输入格式

输入仅包含一行一个整数 $s$ $(1 \le s \le 10^{12})$.
## 输出格式

输出两个正整数，分别表示这个等差数列的首项和末项。请注意输出最小的首项。
## 样例

### 样例输入 #1
```
9
```
### 样例输出 #1
```
2 4
```
### 样例输入 #2
```
16
```
### 样例输出 #2
```
16 16
```
### 样例输入 #3
```
1000000007
```
### 样例输出 #3
```
500000003 500000004
```
## 提示

**样例解释 1**

$2 + 3 + 4 = 9$

**样例解释 2**

$16 = 16$

## 数据范围

对于 $10\%$ 的数据，$s \le 10^6$。  
对于 $100\%$ 的数据，$1 \le s \le 10^{12}$。

## 提示

若有一个数列 $a$，每一项 $a_i$ 都满足 $a_i \in \mathbb{N_{+}}$ 且 $a_i - a_{i - 1} = a_{i + 1} - a_i = 1$，则称这个数列为一个公差为 $1$ 且全为正整数的等差数列。


---

---
title: "Tweetuzki 爱伊图"
layout: "post"
diff: 普及/提高-
pid: P5079
tag: []
---
# Tweetuzki 爱伊图
## 题目背景

Tweetuzki 的教练最近常常在群里发有关「伊图科技」的文章。「伊图科技」是一家专注于计算机视觉技术的上海创业公司，其人脸识别技术在世界处于领先地位。2018 年 6 月，在全球工业界黄金标准 FRVT 测试中，依图在千万分之一误报下识别准确率接近 $99\%$，是全球工业界在此项指标下的最好水平，这是依图科技连续第二年摘得此项竞赛的冠军，也是首个夺得此项竞赛冠军的中国团队。2018 年 11 月 16 日，美国国家标准与技术研究院（NIST）公布了全球权威人脸识别比赛（FRVT）最新报告，依图算法继续保持第一，在千万分之一误报下的识别准确率超过 $99\%$，是目前全球人脸识别技术的最好水平。

更重要的是，伊图科技的创始人，是附中的毕业生——Tweetuzki 的学长呢！人脸识别真的好难呢！Tweetuzki 常常幻想，要是自己的程序能有学长们的亿万分之一厉害，那就很好了呢！
## 题目描述

Tweetuzki 希望设计出一个程序，这个程序应当能识别输入矩阵中隐藏的数字。

输入的是一个 $r \times c$ 的字符矩阵，矩阵中的元素只有 `. `或 `#`。其中 `#` 可以构成一些数字。输入的矩阵将严格遵守以下规则：

- 除 $1$ 占 $5 \times 1$ 的长方形区域外，其余数字均占 $5 \times 3$ 的长方形区域。

- 相邻两个数字间至少有一列 `.`，即**数字不会贴在一块儿**；且数字**只会左右排放**，不会上下排放。这两点综合起来可以表述为：对于两个数字 $A$ 和 $B$（$A$ 在 $B$ 的左侧），若它们在横向上延伸的区间分别为 $[l_A, r_A]$ 和 $[l_B, r_B]$，那么一定满足 $l_B \ge r_A + 2$。

- 数字的组成严格按照如下所列：

  ```plain
  数字的组成方式：
  #   # # #   # # #   # . #   # # #   # # #   # # #   # # #   # # #   # # # 
  #   . . #   . . #   # . #   # . .   # . .   . . #   # . #   # . #   # . # 
  #   # # #   # # #   # # #   # # #   # # #   . . #   # # #   # # #   # . # 
  #   # . .   . . #   . . #   . . #   # . #   . . #   # . #   . . #   # . # 
  #   # # #   # # #   . . #   # # #   # # #   . . #   # # #   # # #   # # # 
  
  所代表的数字：
  1     2       3       4       5       6       7       8       9       0
  ```

  **数字不会倾斜、放大或缩小。**具体可见样例。

- 除构成数字的长方形区域外，其余位置皆由 `.` 填充。保证所有的 `#` 的连通块一定都能够组成数字，且一定满足上述规则。

由于 Tweetuzki 太弱了，于是向你求助，聪明的你，能不能帮助 Tweetuzki 解决这个问题呢？
## 输入格式

第一行两个正整数 $r, c$ $(5 \le r \le 10, 3 \le c \le 10^5)$，表示矩阵的行数和列数。  
接下来 $r$ 行，每行输入 $c$ 个字符，用空格隔开，保证只含有 `.` 和 `#` 两种字符。输入矩阵保证合法且一定含有隐藏数字。
## 输出格式

输出仅包含一行一个只含数字的字符串，**按照顺序**输出这个矩阵中隐藏的数字。
## 样例

### 样例输入 #1
```
6 10
# . . . . . # . . #
# . . . # . # . . #
# . . . # . # . . #
# . . . # . # . . #
# . . . # . # . . #
. . . . # . . . . .
```
### 样例输出 #1
```
1111
```
### 样例输入 #2
```
8 37
. . . # # # . . . . . . . . . . . . . . . . . . # # # . # . . . . . . . .
. # . # . # . . . . . . . . # # # . . . . . . . # . # . # . . . . . . . .
. # . # # # . . . . . . . . # . . . # # # . . . # # # . # . . # # # . . .
. # . . . # . . . # # # . . # # # . # . # . . . # . # . # . . . . # . . .
. # . # # # . . . . . # . . # . # . # . # . . . # # # . # . . . . # . . .
. # . . . . . . . # # # . . # # # . # . # . . . . . . . . . . . . # . . .
. . . . . . . . . # . . . . . . . . # # # . . . . . . . . . . . . # . . .
. . . . . . . . . # # # . . . . . . . . . . . . . . . . . . . . . . . . .

```
### 样例输出 #2
```
19260817
```
### 样例输入 #3
```
9 94
# # # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # # # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
# . # . . . . . . . . . . . . . . . . . . . . . . . . # . # . . . . . . . . . . # . . . . . . . . . . . # # # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
# . # . . . # . . . . . . . . . . . . . . . # # # . . # . # . . . . . . . . . . # # # . . . . . . . . . # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
# . # . . . # . . # # # . . . . . . . . . . . . # . . # # # . . . . . . . . . . . . # . . . . . . . . . # # # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
# # # . . . # . . . . # . . . . . . . . . . # # # . . . . # . . . . . . . . . . # # # . . . . . . . . . # . # . . . . . . . # # # . . . . . . # # # . . . . . . . . . # # # . . . . . . . .
. . . . . . # . . # # # . . . . . . . . . . . . # . . . . # . . . . . . . . . . . . . . . . . . . . . . # # # . . . . . . . . . # . . . . . . # . # . . . . . . . . . # . # . . . . . . . .
. . . . . . # . . # . . . . . . . . . . . . # # # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # . . . . . . # # # . . . . . . . . . # # # . . . . . . . .
. . . . . . . . . # # # . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # . . . . . . # . # . . . . . . . . . . . # . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . # . . . . . . # # # . . . . . . . . . # # # . . . . . . . .

```
### 样例输出 #3
```
0123456789

```
## 提示

### 样例解释

建议复制进记事本（或各种 IDE）中用等宽字体查看。 

###  子任务

**_Subtask_ #1 _(30 points)_**：矩阵中仅有数字 $1$。  
**_Subtask_ #2 _(30 points)_**：矩阵中不含有数字 $1$ 和 $4$。  
**_Subtask_ #3 _(40 points)_**：无特殊性质。


---

---
title: "数学"
layout: "post"
diff: 普及/提高-
pid: P5087
tag: []
---
# 数学
## 题目背景



在```小奔```这片神奇的土地上，有一个毒瘤教练```小奔```。

题解：https://blog.csdn.net/kkkksc03/article/details/84928333
## 题目描述

小奔热衷于乘法，他最喜欢做的事情是：从一个有 $N$ 个元素的序列里取出 $K$ 个数，（注意：不能取同一个元素好几次，取不同但是值相同的元素则是允许的）
然后算出这$K$个数的积作为这个组合的分数。

小奔想试遍所有的这些组合，然后算出所有这些组合的分数之和。但是他还要
出模拟赛虐爆我们这些蒟蒻，所以他只好把这个任务交给了你。

小奔（~~在某些方面~~）还是很仁慈的，所以你不用写高精度，只要输出答案膜 $10^9+7$ 的结果就可以了。
## 输入格式

第一行两个整数 $N$ 和 $K$。

第二行 $N$ 个整数 $A_i$ 描述序列。
## 输出格式

一行一个整数表示答案。
## 样例

### 样例输入 #1
```
3 3
1 1 1
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
4 3
1 1 1 2
```
### 样例输出 #2
```
7
```
## 提示

#### 样例#2解释：

```小奔```可以取```{A[1],A[2],A[3]},{A[1],A[2],A[4]},{A[1],A[3],A[4]},{A[2],A[3],A[4]}```四种组合，它们的分值分别是$1,2,2,2$。加起来就是$7$。

#### 数据范围：

对于10%的数据，$N\le 5000,K\le 2$；

对于30%的数据，$N\le 10^5,K\le 3$；

对于50%的数据，$N\le 10^5,K\le 5$；

对于100%的数据，$1\le N\le 10^5,1\le K \le 300 \& \& K\le N,1\le A[i]\le 10^8$。


---

---
title: "[USACO04OPEN] Cave Cows 2"
layout: "post"
diff: 普及/提高-
pid: P5097
tag: ['2004', 'USACO']
---
# [USACO04OPEN] Cave Cows 2
## 题目描述

洞窟里有一道长长的通道．它由 $ N $ ( $ 1 \leq N \leq 25000 $ )段道尾相连构成，编号分别为 $ 1 \ldots N $ 。

每个通道有一个阈值，其范围在 $ [1,10^9] $ 。依次通过 $ i \ldots j $ 的通道，那奶牛的体重指数就不能超过 $ i \ldots j $ 通道中阈值的最小值。贝茜有 
$ Q $ ( $ 1 \leq Q \leq 25000 $ )个问题，想请教你由 $ i $ 到 $ j $ 的通道的阈值的最小值。
## 输入格式

第1行输入 $ N $ 和 $ Q $ 。

接下来 $ N $ 行输入每个通道的阈值，之后 $ Q $ 行每行两个整数，对应问题中的 $ i $ 和 $ j $（ $ i<j $ ）。
## 输出格式

对于每个问题，输出其结果。
## 样例

### 样例输入 #1
```
10 4
75
30
100
38
50
51
52
20
81
5
1 10
3 5
6 9
8 10
```
### 样例输出 #1
```
5
38
20
5
```


---

---
title: "[USACO04OPEN] Cave Cows 3"
layout: "post"
diff: 普及/提高-
pid: P5098
tag: ['2004', 'USACO']
---
# [USACO04OPEN] Cave Cows 3
## 题目描述

约翰的 $ N $ ( $ 1 \leq N \leq 50000 $ )只牛在一个黑魃魃的洞里探险，他们只能通过叫声交流。

两只牛之间的曼哈顿距离决定了声音传播的时间。即牛1与牛2交流，需要的时间为
 $ |x_1-x_2|+|y_1-y_2| $ 。其中 $ -10^6 \leq x_1,x_2,y_1,y_2 \leq 10^6 $ 。

那任意一对牛之间交流时间的最大值为多少？
## 输入格式

第1行输入 $ N $ ，接下来每行输入一只牛的坐标。
## 输出格式

交流时间最大值（即最大曼哈顿距离）。
## 样例

### 样例输入 #1
```
5
1 1
3 5
2 7
8 1
4 4
```
### 样例输出 #1
```
12
```
## 提示

样例解释：

$ (2,7) $ 和 $ (8,1) $ 两点间的距离最大，为12。


---

---
title: "HKE与他的小朋友"
layout: "post"
diff: 普及/提高-
pid: P5151
tag: []
---
# HKE与他的小朋友
## 题目背景

HKE 带着 $n$ 个小朋友做游戏。

## 题目描述

现在有 $n$ 个座位编号为 $1$ 至 $n$，这些小朋友也编号 $1$ 至 $n$。一开始所有小朋友都坐在相应的座位上。HKE 的游戏可用一个 $n$ 的排列 $A(A_1,A_2, \cdots, A_n)$ 表示。一轮游戏时，对于所有的 $1\leq i\leq n$，坐在位置 $i$ 上的小朋友坐到位置 $A_i$ 上。

现在游戏进行了 $k$ 轮，HKE 想知道游戏结束后，位置 $1,2,\cdots, n$ 分别坐了几号小朋友？

## 输入格式

第一行两个整数 $n,k$。

第二行一个排列 $A_1,A_2, \cdots, A_n$。

## 输出格式

一行 $n$ 个数表示位置 $1,2, \cdots, n$ 上的小朋友的编号。

## 样例

### 样例输入 #1
```
5 5
2 3 1 5 4
```
### 样例输出 #1
```
2 3 1 5 4
```
### 样例输入 #2
```
5 4
2 3 1 5 4
```
### 样例输出 #2
```
3 1 2 4 5
```
## 提示

- 对于 $30\%$ 的数据，$n\leq1000$，$k\leq1000$；
- 对于 $100\%$ 的数据，$n\leq100000$，$k\leq2^{31}-1$。



---

---
title: "WD与矩阵"
layout: "post"
diff: 普及/提高-
pid: P5159
tag: ['O2优化']
---
# WD与矩阵
## 题目背景

WD整日沉浸在矩阵中，无法自拔……
## 题目描述

WD 特别喜欢矩阵，尤其是 01 矩阵。

一天，CX 给了 WD 一个巨大的 $n$ 行 $m$ 列的 01 矩阵，WD 发现这个矩阵每行、每列的异或值都是 0。

CX 随后就问道：“WD，你知道有多少 01 矩阵每行每列异或值都是 0 吗！？”WD 当然不会这个问题，于是他来请教你。

由于答案可能很大，输出结果模 $998\,244\,353$ 的值即可。
## 输入格式

第一行一个数 $T$，表示数据组数。

接下来 $T$ 行每行两个数 $n,m$，分别表示询问的行数和列数。
## 输出格式

共 $T$ 行，每行一个数，表示答案对 $998\,244\,353$ 取模的结果。
## 样例

### 样例输入 #1
```
2
2 2
2 2018
```
### 样例输出 #1
```
2
851481696
```
## 提示

- subtask1（11pts）：$1\le T\le 10,~1\le n,m\le 4$
- subtask2（43pts）：$1\le T\le 5,~1\le n\le 5,~1\le m\le 1,000$
- subtask3（46pts）：$1\le T\le 10^5,~1\le n,m\le 10^9$


---

---
title: "[COCI 2009/2010 #4] KABOOM"
layout: "post"
diff: 普及/提高-
pid: P5187
tag: ['2009', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #4] KABOOM
## 题目描述

 **译自 [COCI 2010.02](http://hsin.hr/coci/archive/2009_2010/) T5「[KABOOM](http://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf)」**
 
**注意本题的时间限制。**

Luka 在实验室里发现了一条奇怪的胶带。胶带分为 $N$ 段，从左到右依次编号为 $1\ldots N$。胶带厚度忽略不计。

胶带只能在两段的交点处弯折，且只能折叠 180°。

显然胶带有两面。胶带的一面涂满了粘性超大的胶，另一面则只有前 $A$ 段和后 $B$ 段涂了粘性超大的胶。

请问 Luka 有多少种折叠方式使他能还原现场（Luka 的手不会粘住胶带，但如果两个胶面粘一起了 Luka 就撕不开了）。答案对 $10301$ 取模。

## 输入格式

第一行，三个整数 $N,A,B$。  

## 输出格式

一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
4 1 1
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
5 2 2
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
6 1 2
```
### 样例输出 #3
```
7
```
## 提示

#### 样例说明 1

![p1.png](https://i.loli.net/2018/12/30/5c28c761ee3a3.png)
![p2.png](https://i.loli.net/2018/12/30/5c28c761e48c0.png)

#### 数据范围与提示

$1\le A+B\le N\le 1000,$ $A>0,$ $B>0$.


---

---
title: "[COCI 2009/2010 #5] PROGRAM"
layout: "post"
diff: 普及/提高-
pid: P5190
tag: ['2009', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #5] PROGRAM
## 题目描述

 **译自 [COCI 2010.03.06](http://hsin.hr/coci/archive/2009_2010/) T5「[PROGRAM](http://hsin.hr/coci/archive/2009_2010/contest5_tasks.pdf)」**

开始时，$\mathit{seq}$ 数组已清零。请注意 $\mathit{seq}$ 数组的第一个元素的下标是 0 而非 1。

```cpp
void something (int jump) {
  for (int i = 0; i < N; i += jump)
    ++seq[i];
}
```

Mirko 调用了 $\tt something$ 函数 $K$ 次，第 $i$ 次调用时 $\tt jump= \it X_i$。

接下来有 $Q$ 次查询，每次查询包含两个整数 $L_i,$ $R_i$，对于每组查询请输出 $\displaystyle\sum_{i=L_i}^{R_i}\mathit{seq}_i$。
## 输入格式

第一行：$N,K$。  
接下来一行 $K$ 个整数，第 $i$ 个为 $X_i$。  
第 $N+2$ 行：$Q$。  
接下来 $Q$ 行：每行两个整数 $L_i,$ $R_i$。
## 输出格式

共 $Q$ 行，第 $i$ 行包含第 $i$ 组查询的答案。
## 样例

### 样例输入 #1
```
10 4
1 1 2 1
3
0 9
2 6
7 7
```
### 样例输出 #1
```
35
18
3
```
### 样例输入 #2
```
11 3
3 7 10
3
0 10
2 6
7 7
```
### 样例输出 #2
```
8
2
1
```
### 样例输入 #3
```
1000000 6
12 3 21 436 2 19
2
12 16124
692 29021
```
### 样例输出 #3
```
16422
28874
```
## 提示

#### 样例说明 1
$seq=\{4, 3, 4, 3, 4, 3, 4, 3, 4, 3\}$

#### 样例说明 2
$seq=\{3, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1\}$

#### 数据范围与提示
$1≤N,K,Q≤10^6,$ $1≤X_i<N,$ $0≤L_i≤R_i<N$.


---

---
title: "整数校验器"
layout: "post"
diff: 普及/提高-
pid: P5238
tag: ['洛谷月赛']
---
# 整数校验器
## 题目描述

有些时候需要解决这样一类问题：判断一个数 $x$ 是否合法。

$x$ 合法当且仅当其满足如下条件：

- $x$ 格式合法，一个格式合法的整数要么是 $0$，要么由一个可加可不加的负号，一个 $1$ 到 $9$ 之间的数字，和若干个 $0$ 到 $9$ 之间的数字依次连接而成。
- $x$ 在区间 $[l,r]$ 范围内（即 $l \le x \le r$）。

你需要实现这样一个校验器，对于给定的 $l, r$，多次判断 $x$ 是否合法。
## 输入格式

第一行三个整数 $l,r,T$，表示校验器的校验区间为 $[l,r]$，以及需要校验的 $x$ 的个数。

接下来 $T$ 行，每行一个 $x$，表示要校验的数，保证 $x$ 长度至少为 $1$ 且仅由 '0'~'9' 及 '-' 构成，且 '-' 只会出现在第一个字符。
## 输出格式

输出共 $T$ 行，每行一个整数，表示每个 $x$ 的校验结果。

校验结果规定如下：$0$ 表示 $x$ 合法；$1$ 表示 $x$ 格式不合法；$2$ 表示 $x$ 格式合法且不在 $[l,r]$ 区间内。
## 样例

### 样例输入 #1
```
-3 3 4
0
00
-0
100000000000000000000
```
### 样例输出 #1
```
0
1
1
2

```
## 提示

对于 $100\%$ 的数据，$0 \le T \le 512$，$l,r$ 在 $64$ 位有符号整型范围内（即 $-2^{63}\le l \le r \le 2^{63}-1$）。

保证输入文件大小不超过 $\text{128KB}$。数据在 linux 下生成，没有 '\r' 字符。

以下为部分特殊限制（互不包含）：

- 有 $5\%$ 的数据，$T=0$。
- 有 $25\%$ 的数据，保证 $x$ 格式一定合法。
- 有 $30\%$ 的数据，保证如果 $x$ 格式合法，那么 $x$ 一定在 $64$ 位有符号整形范围内。

其中有一个不计分的hack测试点，用于考察long long边界数字的判断，如果是100分UnAC的话，那么可能是你没有考虑这一种情况。


---

---
title: "【深基17.例5】木材仓库"
layout: "post"
diff: 普及/提高-
pid: P5250
tag: []
---
# 【深基17.例5】木材仓库
## 题目描述

博艾市有一个木材仓库，里面可以存储各种长度的木材，但是保证没有两个木材的长度是相同的。作为仓库负责人，你有时候会进货，有时候会出货，因此需要维护这个库存。有不超过 100000 条的操作：

- 进货，格式`1 Length`：在仓库中放入一根长度为 Length(不超过 $10^9$) 的木材。如果已经有相同长度的木材那么输出`Already Exist`。
- 出货，格式`2 Length`：从仓库中取出长度为 Length 的木材。如果没有刚好长度的木材，取出仓库中存在的和要求长度最接近的木材。如果有多根木材符合要求，取出比较短的一根。输出取出的木材长度。如果仓库是空的，输出`Empty`。
## 样例

### 样例输入 #1
```
7
1 1
1 5
1 3
2 3
2 3
2 3
2 3
```
### 样例输出 #1
```
3
1
5
Empty

```


---

---
title: "【深基17.例6】学籍管理"
layout: "post"
diff: 普及/提高-
pid: P5266
tag: []
---
# 【深基17.例6】学籍管理
## 题目描述

您要设计一个学籍管理系统，最开始学籍数据是空的，然后该系统能够支持下面的操作（不超过 $10^5$ 条）：

- 插入与修改，格式`1 NAME SCORE`：在系统中插入姓名为 NAME(由字母和数字组成不超过 20 个字符的字符串，区分大小写) ，分数为 $\texttt{SCORE}$（$0<\texttt{SCORE}<2^{31}$） 的学生。如果已经有同名的学生则更新这名学生的成绩为 SCORE。如果成功插入或者修改则输出`OK`。
- 查询，格式`2 NAME`：在系统中查询姓名为 NAME 的学生的成绩。如果没能找到这名学生则输出`Not found`，否则输出该生成绩。
- 删除，格式`3 NAME`：在系统中删除姓名为 NAME 的学生信息。如果没能找到这名学生则输出`Not found`，否则输出`Deleted successfully`。
- 汇总，格式`4`：输出系统中学生数量。
## 样例

### 样例输入 #1
```
5
1 lxl 10
2 lxl
3 lxl
2 lxl
4
```
### 样例输出 #1
```
OK
10
Deleted successfully
Not found
0

```


---

---
title: "Chino的树学"
layout: "post"
diff: 普及/提高-
pid: P5551
tag: []
---
# Chino的树学
## 题目背景

Chino非常喜欢树
## 题目描述

Chino树是一棵具有某种性质的满二叉树，具体来说，对于这棵树的每一个非叶子节点，它的左子节点$(A)$的右子节点$(C)$与它的右子节点$(B)$的左子节点$(D)$的值相同，且$C$与$D$下方的子树也完全相同。现在，Chino想知道，要如何从根节点走到其中任意叶节点使路上经过的节点的权值之和最大。

![](https://cdn.luogu.com.cn/upload/pic/23672.png )

$Orz yky,dyh,wjk,jjy,cxr,gsy,cpy,zcy,tyz,yy,hz,zhr,ygg$
## 输入格式

第一行，一个数，$n$，代表该二叉树的层数。

第二行，$2^n-1$个数，代表该二叉树的先序遍历。
## 输出格式

一行，一个数，代表点权最大和。
## 样例

### 样例输入 #1
```
3
6 17 43 55 20 55 38
```
### 样例输出 #1
```
81
```
### 样例输入 #2
```
4
6 20 72 61 26 55 26 7 17 55 26 7 38 7 35
```
### 样例输出 #2
```
159
```
## 提示

![](https://cdn.luogu.com.cn/upload/pic/23674.png )
![](https://cdn.luogu.com.cn/upload/pic/23675.png )
![](https://cdn.luogu.com.cn/upload/pic/23673.png )
答案longlong救星


---

---
title: "「SWTR-1」Escape"
layout: "post"
diff: 普及/提高-
pid: P5582
tag: ['2019']
---
# 「SWTR-1」Escape
## 题目背景

有一天，当 $\mathrm{Sunny}$ 闲逛的时候，发现了一个按钮。

好奇心驱使他按下了这个按钮。

突然间，天旋地转 $\dots$
## 题目描述

醒来之后，$\mathrm{Sunny}$ 发现自己站在一个奇怪的地方。

这个地方有 $n$ 个平台，**形成了一个环**。

这时，$\mathrm{Ethan}$ 的声音响起：

“哈哈哈哈哈哈，恭喜你，你是第一个来到**死亡之地**的人。”

“正如你所看到的，这个地方有 $n$ 个平台，你现在站在 $0$ 号平台上。”

“剩余平台按顺时针编号 $1,2,3\dots n-1$，也就是说，你身后的那个平台就是 $n-1$ 号平台。”

“你每次能够**顺时针**跳 $i$ 个平台，$i\in[1,n]$，每次的 $i$ 可以不一样。”

“如果你能够经过所有平台（初始 $0$ 号位置不算），那你就能逃出**死亡之地**了。”

（这里指的是一开始的 $0$ 号位置不算经过，需要再次经过 $0$ 号位置）

“不过，这样太简单了，我会给你一些数 $a_j$，表示你**不能一次顺时针跳 $a_j$ 个平台**。”

“还有，你必须要用**最少**的跳跃次数完成我的任务。”

“如果你不能满足我的上面两个要求，所有平台就会消失，你将会掉入下面的岩浆之中。”

现在，$\mathrm{Sunny}$ 想知道他是否可能逃出这个地方。

如果不行，输出```-1```，否则输出他最少所需的跳跃次数。

因为 $\mathrm{Sunny}$ 觉得死亡之地实在是太有趣了，所以他决定多玩几次，**多组数据**。
## 输入格式

第一行，一个正整数 $T$，代表数据组数。

接下来 $2\times T$ 行，共 $T$ 组数据：

第 $2\times i-1$ 行，两个整数 $n,k$，$k$ 代表该组数据 $a_j$ 的个数。

第 $2\times i$ 行，$k$ 个数，第 $j$ 个数表示 $a_j$。
## 输出格式

$T$ 行，第 $i$ 行表示第 $i$ 组数据的输出。
## 样例

### 样例输入 #1
```
3
5 4
1 2 3 4
5 4
1 2 4 5
6 3
1 3 5
```
### 样例输出 #1
```
-1
5
-1
```
## 提示

---

### 样例说明

第一组数据：

$\mathrm{Sunny}$ 每次只能顺时针跳 $5$ 个平台，易知不可能完成。

第二组数据：

$\mathrm{Sunny}$ 每次只能顺时针跳 $3$ 个平台，跳 $5$ 次即可。

---

### 数据范围与约定

$0\leq k\leq n\leq 10^6,1\leq n$。

保证 $\sum{n_i}\leq 3*10^6,a_j\leq n$，且**互不相同**。

测试点 $1:5\%,n=1$。

测试点 $2:5\%,n\leq5$。

测试点 $3:10\%,n\leq15$。

测试点 $4:15\%,n\leq300$。

测试点 $5:25\%,n\leq5000$。

测试点 $6:40\%,n\leq10^6$。

---

梦醒了……


---

---
title: "【AFOI-19】数码排序"
layout: "post"
diff: 普及/提高-
pid: P5626
tag: []
---
# 【AFOI-19】数码排序
## 题目背景

小L从虚拟世界里出来啦！

---

**加强版[链接](https://www.luogu.org/problem/P5634)**
## 题目描述

逃出来的同时，也有一部分数码逃了出来，吵着闹着让小L帮他们排序

虚拟世界的数码都是不可见的

小L目前只会选择排序，插入排序，冒泡排序，归并排序

所以小L想问他在最坏情况下最少需要几次比较，才能使序列有序

-------

[排序的模板代码](https://www.luogu.org/paste/fdtepscp)
## 输入格式

输入仅有一行，给定一个正整数 $n$，表示序列的长度
## 输出格式

输出最小的比较次数
## 样例

### 样例输入 #1
```
4
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
5
```
### 样例输出 #2
```
8
```
## 提示

- **样例$1$解释**

长度为$4$的序列归并调用，分成$2$组，一组$2$个元素。$2$个元素分别比较一次， 合并时最坏比较$3$次，所以是$3+1+1=5$。

- **数据范围**

对于$10\%$的数据，$n \leq 1000$

对于$30\%$的数据，$n \leq 1000000$

对于$100\%$的数据，$n \leq 10^{16}$

**数据保证随机**



---

---
title: "[CSP-J2019 江西] 次大值"
layout: "post"
diff: 普及/提高-
pid: P5682
tag: ['2019', 'CSP-J 入门级']
---
# [CSP-J2019 江西] 次大值
## 题目描述

Alice 有 $n$ 个正整数，数字从 $1 \sim n$ 编号，分别为 $a_1,a_2, \dots , a_n$。  
Bob 刚学习取模运算，于是便拿这 $n$ 个数进行练习，他写下了所有 

$$a_i \bmod a_j (1 \le i,j \le n \wedge i \neq j)$$  

的值，其中 $\bmod$ 表示取模运算。  

Alice 想知道所有的结果中，严格次大值是多少。将取模后得到的所有值进行去重，即相同的结果数值只保留一个，剩余数中第二大的值就称为严格次大值。
## 输入格式

第一行一个正整数 $n$，表示数字个数。  
第二行 $n$ 个正整数表示 $a_i$。
## 输出格式

仅一行一个整数表示答案。  
若取模结果去重后剩余数字不足两个，则输出 $-1$。
## 样例

### 样例输入 #1
```
4
4 5 5 6
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
4
1 1 1 1
```
### 样例输出 #2
```
-1
```
### 样例输入 #3
```
7
12 3 8 5 7 20 15
```
### 样例输出 #3
```
12
```
## 提示

【数据范围】  
对于 $40\%$ 的数据，$1\le n,a_i \le 100$；  
对于 $70\%$ 的数据，$1\le n \le 3000$，$1\le a_i \le 10^5$；  
对于 $100\%$ 的数据，$3 \le n \le 2\times 10^5$，$1\le a_i \le 10^9$。

【样例 $1$ 解释】  
所有取模的结果为 $\{4,4,4,1,0,5,1,0,5,2,1,1\}$。  
去重后有：$\{0,1,2,4,5 \}$，结果为 $4$。


---

---
title: "[CSP-S2019 江西] 和积和"
layout: "post"
diff: 普及/提高-
pid: P5686
tag: ['2019', 'CSP-S 提高级']
---
# [CSP-S2019 江西] 和积和
## 题目背景

JXCSP-S T2
## 题目描述

给定两个下标从 $1$ 到 $n$ 编号的序列 $a_i,b_i$，定义函数 $S(l,r)(1\le l\le r\le n)$ 为：

$$\sum_{i=l}^r a_i\times \sum_{i=l}^r b_i$$

请你求出下列式子的值：

$$\sum_{l=1}^n \sum_{r=l}^n S(l,r)$$

由于答案可能很大，你只需要给出答案模 $10^9+7$ 后的结果。
## 输入格式

第一行一个正整数 $n$ 表示序列长度。  
第二行 $n$ 个正整数表示 $a_i$。  
第三行 $n$ 个正整数表示 $b_i$。
## 输出格式

仅一行一个整数表示答案模 $10^9+7$  后的结果。
## 样例

### 样例输入 #1
```
3
2 3 4
3 4 5
```
### 样例输出 #1
```
244
```
### 样例输入 #2
```
5
11 22 33 44 55
12 34 56 78 90
```
### 样例输出 #2
```
201542
```
## 提示

【数据范围】   
对于 $20\%$  的数据：$n\le 10$ , $a_i,b_i\le 10$；   
对于 $40\%$  的数据：$n\le 200$ , $a_i,b_i\le 100$；    
对于 $70\%$  的数据：$n\le 3000$ , $a_i,b_i\le 10^5$；    
对于 $100\%$  的数据：$3\le n\le 5\times 10^5$ , $1\le a_i,b_i\le 10^9$。


---

---
title: "[JSOI2010] 排名"
layout: "post"
diff: 普及/提高-
pid: P5754
tag: ['2010', '各省省选', '江苏']
---
# [JSOI2010] 排名
## 题目背景

在植树节那天，小 L，小 H，小 X 却要面对繁忙的考试。

考完后，按照惯例，他们讨论起了成绩。小 L 非常八卦，他向全班 $N$ 个同学问了他们的成绩情况。当然，就如你想象的那样，每个人也不愿意透露太多信息，每个人值说了他的分数比哪一个同学低，也有些人没说任何信息。

勤奋的小 H 和爱偷懒的小 X 对于班上所有同学的成绩排名都有一个“心理期望”，也就是说，小 H 可能认为 XX 会排第 $1$，YY 会排第 $2$……但小 X 却会认为 XX 应该排最后 $1$ 名，YY 会排倒数第 $2$ 名。

不过理想和现实总是有差距的，通过小 L 打探到的情报， XX 不能排在第 $1$ 了，但是，小 H 仍然觉得 XX 应该排在尽可能前。

小 L 由此想到了一个问题，他想知道小 H 和小 X 知道他打探到的情报之后，对班上同学的心里排名是什么样的。

每个同学的编号即为小 H 的心理排名，也就是说，小 H 希望编号越靠前的同学排名也尽量靠前，而小 X 希望希望编号越靠前的同学排名尽量靠后。（注意不是越后面的同学排名越靠前）
## 题目描述

给定一个长度为 $N$ 的数列 $A$，其中 $A_i$ 表示第 $i$ 个同学的分数比第 $A_i$ 个同学的分数低（或者说，第 $i$ 个同学的排名在第 $A_i$ 个同学之后）。当然，$A_i$ 有可能等于 $0$，则表明没有关于第 $i$ 个同学的信息。

你需要得到一个长度为 $N$ 的数列 $H$，表示班上同学的排名。这个排名要求是满足所有 $A_i$ 构成的约束的排名中字典序最小的哪一个。

同时，你还需要得到一个数列 $X$，表示班上同学的排名。这个排名要求是满足所有 $A_i$ 构成的约束的排名中字典序最大的哪一个。
## 输入格式

第 $1$ 行一个正整数 $N$，表示班上同学的个数。

第 $2$ 行包含 $N$ 个用空格隔开的非负整数，第 $i$ 个数表示 $A_i$。
## 输出格式

两行，每行 $N$ 个正整数，用空格隔开。其中，第 $1$ 行为小 L 的心理排名，第 $2$ 行为小 X 的心理排名。
## 样例

### 样例输入 #1
```
4
3 0 2 2
```
### 样例输出 #1
```
3 1 2 4
4 1 3 2
```
## 提示

### 样例解释

共有 $3$ 种排名满足大小关系：

```plain
4 1 3 2
4 1 2 3
3 1 2 4
```

其中，`3 1 2 4` 字典序最小，`4 1 3 2` 字典序最大。

### 数据范围

对于 $10\%$ 的数据，$N\leq 10$。

对于 $20\%$ 的数据，$N\leq 20$。

对于 $40\%$ 的数据，$N\leq 2\times 10^3$。

对于 $100\%$ 的数据，$1 \leq N\leq 2\times 10^5,A_i\leq N$。其中，第 $5$ 组数据保证 $N=1.2\times 10^4$。


---

---
title: "[NOI2000] 单词查找树"
layout: "post"
diff: 普及/提高-
pid: P5755
tag: ['2000', 'NOI']
---
# [NOI2000] 单词查找树
## 题目描述

在进行文法分析的时候，通常需要检测一个单词是否在我们的单词列表里。为了提高查找和定位的速度，通常都要画出与单词列表所对应的单词查找树，其特点如下：
-	根节点不包含字母，除根节点外每一个节点都仅包含一个大写英文字母；
-	从根节点到某一节点，路径上经过的字母依次连起来所构成的字母序列，称为该节点对应的单词。单词列表中的每个词，都是该单词查找树某个节点所对应的单词；
-	在满足上述条件下，该单词查找树的节点数最少。


例：图一的单词列表对应图二的单词查找树


![](https://cdn.luogu.com.cn/upload/image_hosting/zolscsb0.png)

对一个确定的单词列表，请统计对应的单词查找树的节点数（包括根节点）

## 输入格式

一个单词列表，每一行仅包含一个单词。每个单词仅由大写的英文字符组成，长度不超过 $63$ 个字符。文件总长度不超过 32K，至少有一行数据。
## 输出格式

仅包含一个整数。该整数为单词列表对应的单词查找树的节点数。
## 样例

### 样例输入 #1
```
A
AN
ASP
AS
ASC
ASCII
BAS
BASIC

```
### 样例输出 #1
```
13

```


---

---
title: "[NOI1997] 竞赛排名"
layout: "post"
diff: 普及/提高-
pid: P5759
tag: ['1997', 'NOI']
---
# [NOI1997] 竞赛排名
## 题目描述

某市组织了一次中学生科技全能竞赛，每个选手要参加数学、物理、化学、天文、地理、生物、计算机和英语共八项竞赛,最后综合八项竞赛的成绩排出总名次。

选手编号依次为： $1,2,\dots,N$（$N$ 为参赛总人数）。设 $x_{i, j}$（$1 \le i \le N, 1 \le j \le 8$）分别表示编号为 $i$ 的选手第 $j$ 项竞赛的成绩。其它指标如下：

- 第 $j$（$1 \le j \le 8$）项竞赛的平均分 $avg_j = \frac{1}{N} \sum_{i=1}^N x_{i, j}$
- 选手 $i$（$1 \le i \le N$）的总分 $sumx_i = \sum_{j=1}^8 x_{i, j}$
- 选手 $i$（$1 \le i \le N$）第 $j$（$1 \le j \le 8$）项竞赛的位置分

$$
y_{i, j}= \begin{cases} 0 & \left(\sum_{i = 1} ^ N |x_{i, j} - avg_j| = 0\right) \\ \frac{x_{i, j} - avg_j}{\frac{1}{N} \sum_{i = 1} ^ N |x_{i ,j} - agv_j|} & \left(\sum_{i = 1} ^ N |x_{i, j} - avg_j| \ne 0\right)\end{cases}
$$

- 选手 $i$（$1 \le i \le N$）的总位置分 $sumy_i = \sum_{j=1}^3 y_{i, j} + 0.8 \sum_{j=4}^8 y_{i, j}$

排名规则如下:
1. 总位置分高的选手名次在前；
2. 若两个或两个以上的选手总位置分相同，则总分高的选手名次在前；
3. 若两个或两个以上的选手总位置分和总分均相同，则编号在前的选手名次在前。

请你为竞赛组委会编一程序，计算本次全能竞赛的总排名情况。
## 输入格式

第一行为参赛总人数 $N$，从第二行到第 $N$ 行依次为编号为 $1$ 到编号为 $N$ 的选手的成绩，每行有 $8$ 个 $0 \sim 100$ 之间的整数，代表该选手的 $8$ 项竞赛成绩 。同一行相邻两个数之间用一个空格符隔开。
## 输出格式

有 $N$ 行，从第 $1$ 行到第 $N$ 行依次为排名第 $1$ 的选手的编号，排名第 $2$ 的选手的编号，……，排名第 $N$ 的选手的编号。
## 样例

### 样例输入 #1
```
3
72 82 73 68 95 86 82 90
72 90 50 60 80 70 65 80
72 82 73 68 95 86 82 90

```
### 样例输出 #1
```
1
3
2

```
## 提示

#### 数据范围

对于所有测试数据，满足 $1 \le N \le 1000$。


---

---
title: "[NOI1997] 最佳游览"
layout: "post"
diff: 普及/提高-
pid: P5761
tag: ['1997', 'NOI']
---
# [NOI1997] 最佳游览
## 题目描述

有一座旅游城，它的街道成网格状（如图）．其中东西向的街道是“风景线"、两旁分布着许多景观：南北向的街道都是"林萌道"，两旁没有任何建筑物。由于游客众多，" 风景线”被规定为单行道，游客在风景线上只能从西走到东，林荫道上则可以任意行走。

一名游客将到这座旅游城旅游。他根据自己对景观的喜好给所有的风景线打了分，分值是从 $-100$ 到 $+100$ 的整数，分值越大表示我们的旅游者越喜欢这条风景线上的景致。显然这位游客不可能给这座旅游城的所有风景线都打负分。

![](https://cdn.luogu.com.cn/upload/image_hosting/62qfloek.png)

游客可以从旅游城的任一个十字路口开始游览，在任一个十字路口结束游览。我们的旅游者希望一路上游览的所有风景线的分值之和能够尽可能地大。请你写一个程序，帮助这位游客寻找一条最佳的游览路线。

## 输入格式

第一行是两个整数 $M$ 和 $N$ ，之间用一个空格符隔开， $M$ 表示旅游城南北向林萌道的段数， $N$ 表示东西向风景线的段数，($ 1 \le M \le 100$，$1 \le N \le 20001 $)。

接下来的 $M$ 行依次给出了由北向南各条风景线的分值信息。每行有 $N-1$ 个整数，依次表示了自西向东每段风景线的分值。同一行相邻两个数之间用一个空格隔开。

## 输出格式

只有一行，含一个整数，表示你的程序所找到的最佳游览路线的总分值。

## 样例

### 样例输入 #1
```
3 6
-50 -47 -36 -30 -23
17 -19 34 -13 -8
-42 -3 -43 34 -45
```
### 样例输出 #1
```
82
```
## 提示

**样例解释**

路径为 $17 \to -3 \to 34 \to 34$，答案为 $82$。


---

---
title: "[NOI1999] 最优联通子集"
layout: "post"
diff: 普及/提高-
pid: P5766
tag: ['1999', 'NOI']
---
# [NOI1999] 最优联通子集
## 题目描述

众所周知，我们可以通过直角坐标系把平面上的任何一个点 $P$ 用一个有序数对 $(x,y)$ 来唯一表示，如果 $x,y$ 都是整数，我们就把点 $P$ 称为整点，否则点 $P$ 称为非整点。我们把平面上所有整点构成的集合记为 $W$。

定义 1 ：两个整点 $P_1(x_1,y_1),P_2(x_2,y_2)$，若 $|x_1-x_2|+|y_1-y_2|=1$，则称 $P_1,P_2$ 相邻，记作 $P_1$~$P_2$ ，否则称 $P_1,P_2$ 不相邻。

定义 2 ：设点集 $S$ 是 $W$ 的一个有限子集，即 $S$=$\{P_1,P_2,…,P_n\}$ $(n \ge 1)$，其中 $P_i (1 \le i \le n)$ 属于 $W$，我们把 $S$ 称为整点集。

定义 3 ：设 $S$ 是一个整点集，若点 $R$,$T$ 属于 $S$ ，且存在一个有限的点序列 $Q_1,Q_2,…,Q_k$ 满足: 
1. $Q_i$ 属于 $S$ （$ 1 \le i \le k $）;
2. $Q_1$ = $R$,$Q_k$ = $T$;
3. $Q_i$~$Q_{i+1} (1 \le i \le k-1)$，即 $Q_i$ 与 
 $Q_{i+1}$ 相邻;
4. 对于任何 $1 \le i<j \le k$ 有 $Q_i≠Q_j$;

我们则称点 $R$ 与点 $T$ 在整点集 $S$ 上连通，把点序列 $Q_1,Q_2,…,Q_k$ 称为整点集 $S$ 中连接点 $R$ 与点 $T$ 的一条道路。

定义 4 ：若整点集 $V$ 满足：对于 $V$ 中的任何两个整点， $V$ 中有且仅有一条连接这两点的道路，则 $V$ 称为单整点集。

定义 5 ：对于平面上的每一个整点，我们可以赋予它一个整数，作为该点的权，于是我们把一个整点集中所有点的权的总和称为该整点集的权和。

我们希望对于给定的一个单整点集 $V$ ，求出一个 $V$ 的最优连通子集 $B$ ，满足：
1. $B$ 是 $V$ 的子集
2. 对于 $B$ 中的任何两个整点，在 $B$ 中连通；
3. $B$ 是满足条件 (1) 和 (2) 的所有整点集中权和最大的。

## 输入格式

第一行是一个整数 $N$ ，表示单整点集 $V$ 中点的个数；

以下 $N$ 行中，第 $i$ 行 $(1 \le i \le N) $ 有三个整数，$X_i,Y_i,C_i$ 依次表示第 $i$ 个点的横坐标，纵坐标和权。同一行相邻两数之间用一个空格分隔。

## 输出格式

仅一个整数，表示所求最优连通集的权和。
## 样例

### 样例输入 #1
```
5
0 0 -2
0 1 1
1 0 1
0 -1 1
-1 0 1

```
### 样例输出 #1
```
2

```


---

---
title: "[NOI1997] 最优乘车"
layout: "post"
diff: 普及/提高-
pid: P5767
tag: ['1997', 'NOI']
---
# [NOI1997] 最优乘车
## 题目描述

H 城是一个旅游胜地，每年都有成千上万的人前来观光。为方便游客，巴士公司在各个旅游景点及宾馆，饭店等地都设置了巴士站并开通了一些单程巴士线路。每条单程巴士线路从某个巴士站出发，依次途经若干个巴士站，最终到达终点巴士站。

一名旅客最近到 H 城旅游，他很想去 S 公园游玩，但如果从他所在的饭店没有一路巴士可以直接到达 S 公园，则他可能要先乘某一路巴士坐几站，再下来换乘同一站台的另一路巴士，这样换乘几次后到达 S 公园。

现在用整数 $1 , 2 , … , N$ 给 H 城的所有的巴士站编号，约定这名旅客所在饭店的巴士站编号为 $1$，S 公园巴士站的编号为 $N$。

写一个程序，帮助这名旅客寻找一个最优乘车方案，使他在从饭店乘车到 S 公园的过程中换车的次数最少。


## 输入格式

第一行有两个数字 $M$ 和 $N$（$ 1 \le M \le 100$，$ 1 < N \le 500 $），表示开通了 $M$ 条单程巴士线路，总共有 $N$ 个车站。

从第二行到第 $M$ 行依次给出了第 $1$ 条到第 $M$ 条巴士线路的信息。其中第 $i+1$ 行给出的是第 $i$ 条巴士线路的信息，从左至右按运行顺序依次给出了该线路上的所有站号相邻两个站号之间用一个空格隔开。


## 输出格式

只有一行。如果无法乘巴士从饭店到达 S公园，则输出 `NO` ；

否则输出你的程序所找到的最少换车次数，换车次数为 $0$ 表示不需换车即可到达。


## 样例

### 样例输入 #1
```
3 7
6 7
4 7 3 6
2 1 3 5

```
### 样例输出 #1
```
2

```


---

---
title: "[AHOI2006] 斐波卡契的兔子"
layout: "post"
diff: 普及/提高-
pid: P5775
tag: ['2006', '各省省选', '安徽']
---
# [AHOI2006] 斐波卡契的兔子
## 题目描述

卡卡开始养兔子了！妈妈给他买了一对刚出生的兔子，卡卡了解到兔子的繁殖规律是这样的：才出生的一对兔子在一个月后将第一次生出一胎 $a$ 对兔子，接着在出生后的二个月又将生出 $b$ 对兔子，在第三个月和以后每个月都会繁殖 $c$ 对兔子（$a \le b \le c$）。   由斐波纳契数列我们知道兔子的繁殖速度是很快的，然而卡卡有兔子一样多的好朋友，卡卡想在 $m$ 个月后有 $k$ 对兔子，以便分给他们的好友，他的愿望是否能够实现呢？

[任务] 编写一个程序：从输入文件中读入输入信息；计算 $m$ 个月后卡卡将有多少对兔子，设之为 $P$；计算如果 $m$ 个月后卡卡要拥有至少 $k$ 对兔子，那么开始时妈妈至少应该为卡卡购买多少对兔子，设之为 $Q$ ；将结果输出至输出文件。
## 输入格式

输入文件的第一行有四个正整数：$a$，$b$，$c$ 和 $m$；而第二行则仅含一个正整数 $k$。它们的含义见上文描述。
## 输出格式

输出两行，第一行是一个整数 $P$ 而第二行是一个整数 $Q$。
## 样例

### 样例输入 #1
```
0 1 1 10
10000

```
### 样例输出 #1
```
89
113
```
## 提示

$0 \le a \le b \le c \le 100$，$1 \le m \le 3000$，$1 \le k \le 10^{6000}$。


---

---
title: "[SEERC 2019] Absolute Game"
layout: "post"
diff: 普及/提高-
pid: P5804
tag: ['2019', 'ICPC']
---
# [SEERC 2019] Absolute Game
## 题目描述

Alice 和 Bob 在玩一个游戏。Alice 有一个包含 $n$ 个整数的数列 $a$，Bob 有一个包含 $n$ 个整数的数列 $b$。每一回合中，玩家需要从他的数列中删去一个数字。玩家轮流进行回合，Alice 先手。

当两个数列中都只剩下一个数字的时候，游戏结束。令 Alice 的数列剩下的数字为 $x$，Bob 的数列剩下的数字为 $y$。Alice 想要最大化 $x$ 与 $y$ 之差的绝对值，而 Bob 想最小化这个值。两个玩家都以最优策略游戏。

请算出游戏结束时的结果。
## 输入格式

第一行包含一个整数 $n \ (1 \leq n \leq 1 \ 000)$，代表每个数列中的数字个数。

第二行包含 $n$ 个整数 $a_1, a_2, \dots, a_n \ (1 \leq a_i \leq 10^9)$，代表 Alice 的数列中的数字。

第三行包含 $n$ 个整数 $b_1, b_2, \dots, b_n \ (1 \leq b_i \leq 10^9)$，代表 Bob 的数列中的数字。
## 输出格式

输出当两个玩家都以最优策略游戏时，$x$ 与 $y$ 之差的绝对值。
## 样例

### 样例输入 #1
```
4
2 14 7 14
5 10 9 22
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
1
14
42
```
### 样例输出 #2
```
28
```
## 提示

第一个样例中，$x=14, y=10$，因此两个数之差为 $4$。

第二个样例中，两个数列都只剩下一个数字了，因此 $x=14, y=42$。


---

---
title: "[SEERC 2019] Graph and Cycles"
layout: "post"
diff: 普及/提高-
pid: P5805
tag: ['2019', 'ICPC']
---
# [SEERC 2019] Graph and Cycles
## 题目描述

有一个 $n$ 个点的无向有边权的完全图，其中 $n$ 是奇数。

定义一个大小为 $k$ 的*环边组*为一个边构成的数组 $[e_1, e_2, \dots, e_k]$，且具有以下性质：

- $k$ 大于 $1$。
- 对于任意 $[1, k]$ 中的整数 $i$，边 $e_i$ 与 $e_{i-1}$ 和 $e_{i+1}$ 都恰好有一个相同的端点（规定 $e_0=e_k, e_{k+1}=e_1$）。

显然一个环边组中的边构成了图上的一个环。

定义一个参数为两条边 $e_1, e_2$ 的函数 $f(e_1, e_2)$，其函数值为两条边中边权的较大值。

定义一个环边组 $C=[e_1, e_2, \dots, e_k]$ 的*价值*为对于任意 $[1, k]$ 中的整数 $i$，$f(e_i, e_{i+1})$ 的值之和（规定 $e_{k+1}=e_1$）。

定义一个图的*环分割*为一组无交集的环边组，且这些环边组的并包含了图上所有的边。定义一个图的环分割的*价值*为其中所有环边组的价值之和。

一个图可能存在多组环分割。给定一个图，你的任务是找到价值最小的环分割并输出该最小价值。
## 输入格式

第一行包含一个整数 $n \ (3 \leq n \leq 999, n \bmod 2 = 1)$，代表图的点数。

接下来的 $\frac{n\cdot (n-1)}{2}$ 行每行包含三个整数 $u, v$ 和 $w \ (1 \leq u, v \leq n, u \neq v, 1 \leq w \leq 10^9)$，代表点 $u$ 和点 $v$ 间有一条边权为 $w$ 的边。
## 输出格式

输出一个整数，代表给定图的最小价值环分割的价值。
## 样例

### 样例输入 #1
```
3
1 2 1
2 3 1
3 1 1
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
5
4 5 4
1 3 4
1 2 4
3 2 3
3 5 2
1 4 3
4 2 2
1 5 4
5 2 4
3 4 2
```
### 样例输出 #2
```
35
```
## 提示

以下样例解释中，边以输入顺序编号，$e_i$ 代表输入顺序中的第 $i$ 条边。

第一个样例中，唯一的环分割为 $S=\{ [e_1, e_2, e_3] \}$。$f(e_1, e_2)+f(e_2,e_3)+f(e_3,e_1)=1+1+1=3$。

第二个样例中，最优的环分割为 $S=\{ [e_3, e_8, e_9], [e_2,e_4,e_7,e_{10},e_5,e_1,e_6] \}$。环边组 $[e_3,e_8,e_9]$ 的价值为 $12$，$[e_2,e_4,e_7,e_{10},e_5,e_1,e_6]$ 的价值为 $23$，因此环分割的价值为 $35$。


---

---
title: "【L&K R-03】课表的排列"
layout: "post"
diff: 普及/提高-
pid: P5823
tag: ['2019', '洛谷原创', 'Special Judge']
---
# 【L&K R-03】课表的排列
## 题目背景

小 L 早上来到教室，发现今天的课表非常有趣。
## 题目描述

今天的课表是：

    语文 数学 英语 语文 英语 数学

今天的课表上一共有三个科目：语文、数学、英语。每个科目都有两节课。每科的两节课间隔的课程数分别为 $2,3,1$，从小到大排序后为 $1,2,3$，是一个公差为 $1$ 的等差数列。

小 L 想知道，对于更多的科目，具有这样有趣性质的课表是否存在。换句话说，如果课表上一共有 $n$ 个科目，每个科目都有且仅有两节课，小 L 想知道是否存在一个课表，满足这 $n$ 科的两节课间隔的课程数从小到大排序后是一个公差为 $1$ 的等差数列。

但是，小 L 只会写时间复杂度为 $O((2n)!\times n\log_2 n)$ 的算法，于是他求助于你，请你判断是否存在这样的课表，如果存在，还要输出一种可能的情况。
## 输入格式

输入仅一行，一个 **奇数** $n$，表示课表上的课程数。
## 输出格式

输出仅一行。

如果不存在这样的课表，输出  `-1`；

如果存在这样的课表，输出 $2n$ 个整数，表示课表。令 $1,2,\ldots ,n$ 中的每一个整数对应一个科目，每个整数在课表中均会出现两次，且满足小 L 的性质。由于可能有多种可能的答案，你可以给出任意一种课表，刚到教室的小 K 会写出程序来检验你的课表是否满足小 L 的性质。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
1 2 3 1 3 2
```
## 提示

**本题使用 Special Judge。**

本题共 $20$ 个数据点，每个数据点 $5$ 分。

| 数据编号$~x$ | $n=$ |
| :-----------: | :-----------: |
| $1\sim 10$ | $2x+1$ |
| $11\sim 15$ | $200x+1$ |
| $16\sim 20$ | $100000x+1$ |


---

---
title: "[IOI 2015] boxes"
layout: "post"
diff: 普及/提高-
pid: P5849
tag: ['2015', 'IOI']
---
# [IOI 2015] boxes
## 题目描述

IOI2015 开幕式正在进行最后一个环节。按计划在开幕式期间，每个代表队都将收到由主办方发放的一个装有纪念品的盒子。然而所有志愿者都被精彩的开幕式所吸引，除 Aman 外其他人完全忘记了发放纪念品这件事。Aman 是一位热情的志愿者，为使得 IOI 尽量圆满，他要用最短的时间将所有纪念品发放出去。

开幕式的场地是一个圆环，被分为 $L$个完全相等的区域，这些区域的编号依次为 $0$ 到 $L-1$，也就是说，对于$0\le 
 i\le L-2$,区域 $i$ 与区域 $i+1$ 相邻，且区域 $L-1$ 与区域 $0$ 相邻。场地上共有 $N$ 个代表队，每队坐在上面的一个区域上，每个区域可以包含任意多个代表队，也可以为空。

一共有 $N$ 个相同的纪念品。开始，Aman 和所有纪念品都在区域 $0$。Aman 应该给每队一个纪念品，并且在发放完最后一个纪念品后他必须回到区域 $0$。注意，有些队可能坐在区域 $0$。

在任意时刻，Aman 只能够携带至多 $K$ 个纪念品。Aman 必须从区域 $0$ 取走这些纪念品，且取纪念品不需要时间。纪念品一旦从区域 $0$ 被取走后，Aman 只能将其发放给某个代表队或者随身携带。无论何时，Aman 携带一个或更多的纪念品到达一个这样的区域，该区域有一个代表队尚未收到纪念品，Aman 便可将他携带的一个纪念品发给这个代表队。这种发放也在瞬间完成。他所花的时间都消耗在区域之间的移动上。无论携带多少纪念品，Aman 都需要 $1$ 秒钟从一个区域移动到其相邻的区域（可以顺时针移动也可以逆时针移动）。

你的任务是计算出 Aman 发放完所有纪念品并返回到他的最初区域所需要的最短时间（秒数）。
## 输入格式

- 第 $1$ 行有三个整数 $N$，$K$，$L$，分别表示 代表队的数目，Aman 每次最多能携带的纪念品数量 ，开幕式场地上的区域数目；
- 第 $2$ 行有 $N$ 个整数，分别为 $p[0],\cdots,p[N−1]$，其中 $p[i]$ （$0\le i\le N-1$）代表第 $i$ 支代表队所在区域编号。$p$ 的元素按非递减排序。
## 输出格式

共一行，Aman 所需要的最短时间（秒数）。
## 样例

### 样例输入 #1
```
3 2 8
1 2 5

```
### 样例输出 #1
```
10

```
## 提示

对于 $100\%$ 的数据，$1\le N\le 10^7$，$1\le K\le N$，$1\le L\le 10^9$。


---

---
title: "棋盘游戏"
layout: "post"
diff: 普及/提高-
pid: P5877
tag: ['NOI 导刊']
---
# 棋盘游戏
## 题目描述

为了增强幼儿园小朋友的数数能力，小虎老师给了一个家庭游戏作业。让小虎那一块空的围棋盘，随机在一些方格中放些棋子（有黑白两种颜色），如果一个方格和它的上、下、左、右四个方格之一有相同颜色的棋子，则认为两个格子是相互连通的。这期间，要求小虎不断统计共有多少个连通块。

如下图是一个 $5\times 9$ 的一块棋盘，其中 `.` 表示空格，`*` 表示黑棋子，`@`表示白棋子。

则有 $4$ 块连通子块。
```
.  .  .  .  .  .  .  .  .
.  .  *  *  .  .  @  @  .
.  *  *  @  @  .  @  @  .
.  .  *  @  .  .  *  .  .
.  .  .  .  .  .  .  .  .
```

哥哥大虎在一边看一边想，如果棋盘是 $N\times N$ 的，共放了 $M$ 个棋子，如何使用计算机解决这个问题呢？
## 输入格式

第一行两个整数：$N,M$。

接下来有 $M$ 行，每行三个整数：$c, x, y$。分别表示依次放入棋子的颜色（$0$ 表示白色，$1$ 表示黑色）、要放入格子的横坐标和格子的纵坐标。

## 输出格式

共 $M$ 行。第 $i$ 行一个整数，表示放入第 $i$ 个棋子后，当前有多少个棋子连通块。
## 样例

### 样例输入 #1
```
3 5    
1 1 1  
1 1 2  
0 2 2  
1 3 1  
1 2 1  

```
### 样例输出 #1
```
1 
1 
2 
3 
2

```
### 样例输入 #2
```
3 5
1 1 2
1 2 1
1 3 2
1 2 3
1 2 2

```
### 样例输出 #2
```
1
2
3
4
1

```
## 提示

对于 $30\%$ 数据：$1\le N \le 10$。

对于 $60\%$ 数据：$1\le N\le 100$。

对于 $100\%$ 数据：$1\le N\le 500$，$1\le M \le N \times N$，$ 0 \le c \le 1$，$ 1\le x, y \le N$。


---

---
title: "[POI 2017] Podzielno"
layout: "post"
diff: 普及/提高-
pid: P5956
tag: ['2017', 'POI（波兰）']
---
# [POI 2017] Podzielno
## 题目描述

$B$ 进制数，每个数字 $i \in [0,B)$ 有 $a_i$ 个。你要用这些数字组成一个最大的 $B$ 进制数 $X$(不能有前导零，不需要用完所有数字)，使得 $X$ 是 $B-1$ 的倍数。 $q$ 次询问，每次询问 $X$ 在 $B$进制下的第 $k$ 位数字是什么(最低位是第 $0$ 位)。 
## 输入格式

第一行包含两个正整数 $B,q$。

第二行包含 $B$ 个正整数 $a_0,a_1,a_2,...,a_{B-1}$。

接下来 $q$ 行，每行一个整数 $k$，表示一个询问。
## 输出格式

输出 $q$ 行，每行一个整数，依次回答每个询问，如果那一位不存在，请输出 `-1`。
## 样例

### 样例输入 #1
```
3 3
1 1 1
0
1
2
```
### 样例输出 #1
```
0
2 
-1
```
## 提示

对于 $100\%$ 的数据，$2\le B\le10^6$，$1\le q\le 10^5$，$1\le a_i\le10^6$，$0\le k\le10^{18}$。


---

---
title: "[PA 2019] A+B"
layout: "post"
diff: 普及/提高-
pid: P5965
tag: ['2019', 'PA（波兰）']
---
# [PA 2019] A+B
## 题目描述

在列竖式计算两个十进制数的和的时候，人们可能会错算成这样：

![](https://cdn.luogu.com.cn/upload/image_hosting/g0xa2tjn.png)

在图里的左边，$248+208$ 被错算成了 $4416$。

给定正整数 $n$，问有多少对非负整数 $a,b$ 满足 $a+b$ 会被错算成 $n$。

请注意 $a$ 可以等于 $b$，且 $a=1,b=2$ 和 $a=2,b=1$ 是两种不同的方案。
## 输入格式

第一行包含一个正整数 $n$。
## 输出格式

输出一个整数，即满足条件的 $a,b$ 的数量。
## 样例

### 样例输入 #1
```
112
```
### 样例输出 #1
```
50
```
## 提示

对于 $100\%$ 的数据，$1\le n<10^{18}$。


---

---
title: "[PA 2013] Iloczyn"
layout: "post"
diff: 普及/提高-
pid: P5973
tag: ['2013', 'PA（波兰）']
---
# [PA 2013] Iloczyn
## 题目描述

给定正整数 $n$ 和 $k$，问能否将 $n$ 分解为 $k$ 个不同正整数的乘积。
## 输入格式

第一行一个数 $T$ 表示测试组数。

接下来 $T$ 行每行两个数 $n,k$。
## 输出格式

输出 $T$ 行,若可以被分解,输出 `TAK` 否则输出 `NIE`。
## 样例

### 样例输入 #1
```
3
15 2
24 4
24 5
```
### 样例输出 #1
```
TAK
TAK
NIE
```
## 提示

对于 $100\%$ 的数据，$1\le T\le 4\times 10^3$，$1\le n\le 10^9$，$1\le k\le 20$。


---

---
title: "[PA 2019] Wina"
layout: "post"
diff: 普及/提高-
pid: P5989
tag: ['2019', 'PA（波兰）']
---
# [PA 2019] Wina
## 题目描述

 $n$ 行 $\dfrac{n\times(n+1)}{2}$ 个数叠成了一个数塔。

给定 $k$，你需要从中拿走恰好 $k$ 个数，使得拿走的数的最小值最小。一个数能被拿走当且仅当它左上角和右上角都没有数或者那个数已经被拿走了。
## 输入格式

第一行两个正整数 $n,k$。
接下来 $n$ 行，第$i$行 $i$个正整数 $a[i][1],a[i][2],...,a[i][i](1\le a[i][j]\le 2019)$，表示从上往下第 $i$ 行从左往右第 $j$ 个数。
## 输出格式

输出一行一个整数，即拿走的数的最小值的最小值。
## 样例

### 样例输入 #1
```
5 7
1999
2019 2010
850 1500 1600
900 900 710 900
1000 800 600 800 1000
```
### 样例输出 #1
```
710
```
## 提示

对于 $100\%$ 的数据，$1\le n\le 2000$，$1\le k\le \dfrac{n\times(n+1)}{2}$。


### 样例解释：

![](https://cdn.luogu.com.cn/upload/image_hosting/pya9rv24.png)


---

---
title: "[PA 2015] Równanie"
layout: "post"
diff: 普及/提高-
pid: P5991
tag: ['2015', 'PA（波兰）']
---
# [PA 2015] Równanie
## 题目描述

对于一个正整数 $n$，定义 $\operatorname{f}(n)$ 为它十进制下每一位数字的平方的和。

现在给定三个正整数 $k,a,b$，请求出满足 $a\le n\le b$ 且 $k\times \operatorname{f}(n)=n$ 的 $n$ 的个数。
## 输入格式

第一行包含三个正整数 $k,a,b$。
## 输出格式

输出一个整数，即满足条件的 $n$ 的个数。
## 样例

### 样例输入 #1
```
51 5000 10000
```
### 样例输出 #1
```
3
```
## 提示

对于 $100\%$ 的数据，$1\le k,a,b\le 10^{18}$，$a\le b$。

---

### 样例解释：

满足的 $3$ 个 $n$ 分别为 $7293,7854$ 和 $7905$。


---

---
title: "[PA 2014] Lustra"
layout: "post"
diff: 普及/提高-
pid: P5995
tag: ['2014', 'PA（波兰）']
---
# [PA 2014] Lustra
## 题目描述

Byteasar 公司专门外包生产带有镜子的衣柜。

刚刚举行的招标会上，有 $n$ 个工厂参加竞标。所有镜子都是长方形的，每个工厂能够制造的镜子都有其各自的最大、最小宽度和最大、最小高度。镜子不可以旋转。

如果存在某家工厂满足这样的条件：其他所有工厂能够制造的镜子，它都能够制造。那么这家工厂显然会胜出。若不存在，评判工作将会遇到麻烦。

Byteasar 想知道，是否存在某家工厂符合上述条件。
## 输入格式

第一行有一个整数 $t$，表示测试数据数量。

对于每一组测试数据，第一行有一个整数 $n$。

接下来 $n$行，每行有四个整数 $w1,w2,h1,h2$，表示这家工厂能够制造的镜子的宽度 $w$、高度 $h$ 需要满足 $w_1\le w\le w_2,h_1\le h\le h_2$。
## 输出格式

输出共有 $t$ 行，每行为 `TAK` (是)或 `NIE` (否)，表示是否存在某家工厂符合条件。
## 样例

### 样例输入 #1
```
3
3
2 3 3 5
1 4 2 6
1 3 4 6
3
1 5 1 3
2 4 1 3
3 4 2 5
4
1 2 1 10
1 2 3 8
2 2 7 10
1 2 1 10
```
### 样例输出 #1
```
TAK
NIE
TAK
```
## 提示

对于 $100\%$ 的数据，$1\le t\le 10$，$2\le n\le 10^5$，$1\le w_1\le w_2\le 10^9$，$1\le h_1\le h_2\le 10^9$。


---

---
title: "[USACO05JAN] Moo Volume S"
layout: "post"
diff: 普及/提高-
pid: P6067
tag: ['2005', 'USACO']
---
# [USACO05JAN] Moo Volume S
## 题目描述

Farmer John 的农场上有 $N$ 头奶牛（$1 \leq N \leq 10^5$），第 $i$ 头奶牛的位置为 $x_i$（$0 \leq x_i \leq 10^9$）。

奶牛很健谈，每头奶牛都和其他 $N-1$ 头奶牛聊天。第 $i$ 头奶牛和第 $j$ 头奶牛聊天时，音量为 $|x_i-x_j|$。

请您求出所有奶牛聊天音量的总和。
## 输入格式

第一行一个整数 $N$。

接下来 $N$ 行，每行一个整数 $x_i$。
## 输出格式

输出总音量。

**保证答案在 64 位带符号整数的表示范围内。**
## 样例

### 样例输入 #1
```
5
1
5
3
2
4
```
### 样例输出 #1
```
40
```
## 提示

- 子任务 1（原测试数据，1 分）：$N \leq 10^4$；
- 子任务 2（99 分）：无特殊限制。


---

---
title: "[EER2] 谔运算"
layout: "post"
diff: 普及/提高-
pid: P6102
tag: ['洛谷月赛']
---
# [EER2] 谔运算
## 题目背景

在某个谔谔的一天中，CYJian 做到一道谔运算的谔谔题，CYJian 发现他不会做，于是决心从头开始研究令人谔谔的谔运算。
## 题目描述

首先，CYJian 写出了一个长度为 $n$ 的数列 $a$。

然后他灵光一动，写出了下面这个谔谔的式子：

$$\sum_{i=1}^{n}\sum_{j=1}^{n}\sum_{k=1}^{n}\sum_{l=1}^{n} (a_i\ {\rm or}\ a_j)\ {\rm xor}\ (a_k\ {\rm and}\ a_l)$$

CYJian 觉得这个是一个谔运算的简单式子，摁计算器花了 $114514{\rm s}$ 就算出来了答案。

为了证明你吊打 $114514$ 个 CYJian，请你在 $1{\rm s}$ 内算出来这个式子的值吧。你只需要给出答案对 $2^{32}$ 取模的值即可。
## 输入格式

第一行一个正整数 $n$ 表示数列的长度。

第二行 $n$ 个非负整数，第 $i$ 个数表示 $a_i$。
## 输出格式

一行一个非负整数，表示题目描述中给出式子的值。
## 样例

### 样例输入 #1
```
2
1 2

```
### 样例输出 #1
```
30

```
### 样例输入 #2
```
6
1 1 4 5 1 4

```
### 样例输出 #2
```
3944

```
### 样例输入 #3
```
7
1 9 1 9 8 1 0

```
### 样例输出 #3
```
12892

```
## 提示

样例一解释：

$(1\ {\rm or}\ 1)\ {\rm xor}\ (1\ {\rm and}\ 1) = 0$

$(1\ {\rm or}\ 1)\ {\rm xor}\ (1\ {\rm and}\ 2) = 1$

$(1\ {\rm or}\ 1)\ {\rm xor}\ (2\ {\rm and}\ 1) = 1$

$(1\ {\rm or}\ 1)\ {\rm xor}\ (2\ {\rm and}\ 2) = 3$

$(1\ {\rm or}\ 2)\ {\rm xor}\ (1\ {\rm and}\ 1) = 2$

$(1\ {\rm or}\ 2)\ {\rm xor}\ (1\ {\rm and}\ 2) = 3$

$(1\ {\rm or}\ 2)\ {\rm xor}\ (2\ {\rm and}\ 1) = 3$

$(1\ {\rm or}\ 2)\ {\rm xor}\ (2\ {\rm and}\ 2) = 1$

$(2\ {\rm or}\ 1)\ {\rm xor}\ (1\ {\rm and}\ 1) = 2$

$(2\ {\rm or}\ 1)\ {\rm xor}\ (1\ {\rm and}\ 2) = 3$

$(2\ {\rm or}\ 1)\ {\rm xor}\ (2\ {\rm and}\ 1) = 3$

$(2\ {\rm or}\ 1)\ {\rm xor}\ (2\ {\rm and}\ 2) = 1$

$(2\ {\rm or}\ 2)\ {\rm xor}\ (1\ {\rm and}\ 1) = 3$

$(2\ {\rm or}\ 2)\ {\rm xor}\ (1\ {\rm and}\ 2) = 2$

$(2\ {\rm or}\ 2)\ {\rm xor}\ (2\ {\rm and}\ 1) = 2$

$(2\ {\rm or}\ 2)\ {\rm xor}\ (2\ {\rm and}\ 2) = 0$

对所有结果求和，即可得到答案为 $30$。

---

**本题采用捆绑测试。**

对于 $100\%$ 的测试点：$1 \leq n \leq 5 \times 10^5$，$0 \leq a_i \leq 2^{32}-1$。

本题共 $6$ 个子任务，各子任务的分值及约定如下：

子任务 $1$（$1$ 分）：为样例一。

子任务 $2$（$14$ 分）：$1 \leq n \leq 80$。

子任务 $3$（$25$ 分）：$0 \leq a_i \leq 80$。

子任务 $4$（$30$ 分）：$0 \leq a_i \leq 5000$。

子任务 $5$（$25$ 分）：$1 \leq n \leq 1000$。

子任务 $6$（$5$ 分）：无特殊限制。

---

#### 友情提示

请注意数据范围。

**如果您不知道上面的谔运算是什么，请参考[这里](https://www.luogu.com.cn/paste/oe4a9czd)**。


---

---
title: "[USACO17JAN] Hoof, Paper, Scissor S"
layout: "post"
diff: 普及/提高-
pid: P6120
tag: ['2017', 'USACO']
---
# [USACO17JAN] Hoof, Paper, Scissor S
## 题目背景

*本题与 [金组同名题目](/problem/P3609) 在题意上一致，唯一的差别在于对变手势次数的限制。*
## 题目描述

你可能玩过“石头，剪刀，布”，这个游戏在奶牛中同样流行，不过它的名字变成了“蹄子，剪刀，布”。

“蹄子，剪刀，布”和“石头，剪刀，布”的规则十分类似，两只奶牛数到三，然后出一个代表蹄子，剪刀或布的手势。蹄子胜过剪刀，剪刀胜过布，布胜过蹄子。特别地，如果两只奶牛的手势相同，则视为平局。

现在 FJ 和 Bassie 要进行 $N$ 轮对抗。Bassie 已经预测了 FJ 每一轮要出的手势。然而 Bassie 很懒，她最多只想变换一次手势。

现在请你帮 Bassie 求出她最多能赢多少轮。
## 输入格式

第一行输入一个整数 $N$（$1 \leq N \leq 10^5$）。

接下来 $N$ 行，每行一个字母，代表 FJ 这一轮出的手势。`H` 代表蹄子（Hoof），`S` 代表剪刀（Scissors），`P` 代表布（Paper）。
## 输出格式

输出一个整数，代表 Bassie 在最多变换一次手势的前提下最多赢多少轮。
## 样例

### 样例输入 #1
```
5
P
P
H
P
S
```
### 样例输出 #1
```
4
```


---

---
title: "[USACO07NOV] Best Cow Line S"
layout: "post"
diff: 普及/提高-
pid: P6140
tag: ['2007', 'USACO']
---
# [USACO07NOV] Best Cow Line S
## 题目背景

*本题和 [2007 年 12 月月赛金组同名题目](/problem/P2870) 在题意上一致，唯一的差别是数据范围。*
## 题目描述

Farmer John 打算带领 $N$（$1 \leq N \leq 2\,000$）头奶牛参加一年一度的”全美农场主大奖赛“。在这场比赛中，每个参赛者必须让他的奶牛排成一列，然后带领这些奶牛从裁判面前依此走过。

今年，竞赛委员会在接受报名时，采用了一种新的登记规则：取每头奶牛名字的首字母，按照它们在队伍中的次序排成一列。将所有队伍的名字按字典序升序排序，从而得到出场顺序。

FJ 由于事务繁忙，他希望能够尽早出场。因此他决定重排队列。

他的调整方式是这样的：每次，他从原队列的首端或尾端牵出一头奶牛，将她安排到新队列尾部。重复这一操作直到所有奶牛都插入新队列为止。

现在请你帮 FJ 算出按照上面这种方法能排出的字典序最小的队列。
## 输入格式

第一行一个整数 $N$。

接下来 $N$ 行每行一个大写字母，表示初始队列。
## 输出格式

输出一个长度为 $N$ 的字符串，表示可能的最小字典序队列。

每输出 $80$ 个字母需要一个换行。
## 样例

### 样例输入 #1
```
6
A
C
D
B
C
B
```
### 样例输出 #1
```
ABCBCD
```


---

---
title: "[USACO10OPEN] Mountain Watching S"
layout: "post"
diff: 普及/提高-
pid: P6181
tag: ['2010', 'USACO']
---
# [USACO10OPEN] Mountain Watching S
## 题目描述

一天，Bessie 望着远处的山脉，在思考：“哪一座山最宽呢？”

Bessie 设法测量了 $N$ 个位置的高度 $h_i$（$1 \leq N \leq 10^5$，$1 \leq h_i \leq 10^9$）。一座山被定义为一个高度先不下降，后不上升的子序列。视野边缘的山脉也只会增加或减少高度。一座山的宽度被定义为这座山包含的位置数量。

下面是一个例子：

```plain
           *******                   *
          *********                 ***
          **********               *****
          ***********           *********               *
*      *****************       ***********             *** *
**    *******************     *************   * *     *******      *
**********************************************************************
3211112333677777776543332111112344456765432111212111112343232111111211
aaaaaa                   ccccccccccccccccccccc eeeeeee    ggggggggg
  bbbbbbbbbbbbbbbbbbbbbbbbbbbb             ddddd ffffffffff  hhhhhhhhh
```

每座山都已经用字母标出来了。这里 `b` 山脉的宽度最大，为 $28$。
## 输入格式

第一行一个整数 $N$。

接下来 $N$ 行，每行一个整数 $h_i$。
## 输出格式

输出最宽的山的宽度。
## 样例

### 样例输入 #1
```
7
3
2
3
5
4
1
6
```
### 样例输出 #1
```
5
```


---

---
title: "「SWTR-4」Meeting in the Forest"
layout: "post"
diff: 普及/提高-
pid: P6211
tag: []
---
# 「SWTR-4」Meeting in the Forest
## 题目背景

每当月圆时分，五个族群的族猫们都会聚集在小岛上，进行每月的森林大会。蒟星为了了解其它五族猫的特点，就扮成了一只独行猫来到小岛上……
## 题目描述

森林大会上有 $n$ 只猫，每只猫的武力值为 $a_i$，于是蒟星列出了下面这样一个方程：

$$x^n+\sum_{i=1}^{n}a_ix^{n-i}=0$$

- 通俗地讲，这个方程就是 $x^n+a_1x^{n-1}+a_2x^{n-2}+\cdots+a_{n-1}x+a_n=0$。

蒟星根据 TA 优（cu）秀（bi）的数学知识可以知道，这个方程在复数集内有 $n$ 个根，不妨把这 $n$ 个根设为 $x_1, x_2, ..., x_n$。

接下来蒟星想要知道森林大会上的猫的实力如何，于是列出了下面一个表达式：

$$\sum_{i=1}^{n}(b_i\times \sum_{1\le j_1 < j_2 <\cdots< j_i \le n}^{n}x_{j_1}x_{j_2}\cdots x_{j_i})$$

- $\sum_{1\le j_1 < j_2 < \cdots < j_i \le n}^{n}x_{j_1}x_{j_2}\cdots x_{j_i}$ 就是从方程的 $n$ 个根中选出 $i$ 个，求所有可能方案的 $i$ 个根的乘积之和。

但蒟星只要这个表达式对 $10^9+7$ 取模后的值就好了。

- 若答案为负数 $a$，请输出 $a + (10^9+7)$。

蒟星把这个任务交给了您，不过他已经告诉你了 $n$，$a_i$ 和 $b_i$，您能帮帮 TA 吗？
## 输入格式

第一行一个整数 $n$ —— 表示方程的次数。

第二行 $n$ 个整数 $a_1, a_2, ... a_n$ —— 意义见题目描述。

第三行 $n$ 个整数 $b_1, b_2, ... b_n$ —— 同上。
## 输出格式

输出一行，一个数，表示这个表达式对 $10^9+7$ 取模后的值。
## 样例

### 样例输入 #1
```
2
-2 1
1 1
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
3
-3 0 4
2 3 4
```
### 样例输出 #2
```
999999997
```
## 提示

【样例 $1$ 说明】

原方程为 $x^2-2x+1=0$，此时 $x_1=x_2=1$。

表达式的值为 $x_1+x_2+x_1x_2=1+1+1=3$。

【样例 $2$ 说明】

原方程为 $x^3-3x^2+4=0$，此时 $x_1=-1,x_2=x_3=2$。

表达式的值为 

$$\begin{aligned}&2\cdot (x_1+x_2+x_3)+3\cdot(x_1x_2+x_1x_3+x_2x_3)+4\cdot x_1x_2x_3\\=\ &2\times(-1+2+2)+3\times(-2+(-2)+4)+4\times (-4)\\=\ &-10\end{aligned}$$

因为 $-10$ 为负数，所以输出 $-10+(10^9+7)=999999997$。

【数据范围与约定】

对于 $10\%$ 的数据，$n=1$。

对于另外 $20\%$ 的数据，$n=2$。

对于 $40\%$ 的数据，$n\leq 10$。

对于 $60\%$ 的数据，$n\leq 10^3$。

对于 $100\%$ 的数据，$1\leq n \le 2 \times 10^5$，$-10^9 \le a_i, b_i \le 10^9$。

【Tips】

[韦达定理](https://baike.baidu.com/item/%E9%9F%A6%E8%BE%BE%E5%AE%9A%E7%90%86/105027?fr=aladdin)也许会对你有帮助。

【Source】

[Sweet Round 04](https://www.luogu.com.cn/contest/26414)$\ \ $C

idea & std：[蒟蒻的名字](https://www.luogu.com.cn/user/147999)


---

---
title: "[USACO06OPEN] The Climbing Wall S"
layout: "post"
diff: 普及/提高-
pid: P6245
tag: ['2006', 'USACO']
---
# [USACO06OPEN] The Climbing Wall S
## 题目背景

题目是经过简写保证不改变原有题意的题目。
## 题目描述

Bessie 要爬墙，墙宽 $30000$ ，高 $H$，墙上有 $F$ 个不同的落脚点 $(X,Y)$。

$(0,0)$ 在左下角的地面。任意落脚点至少相距 $300$。至少有一条路可以上去，Bessie 每次最多爬 $1000$ 个单位距离，且可以向任意方向爬行。

一旦她到达了一个高度距离 $H$ 不到 $1000$ 的落脚点，可以直接到墙顶。Bessie 的起点可以在任一高度不超过 $1000$ 的落脚点上。问Bessi爬到顶端的最少次数。

本题距离指**欧几里得距离**。
## 输入格式

第一行有两个以空格分隔的整数 $H$ 和 $F$ 。

第二到 $F+1$ 行，每行是落脚点的坐标 $(X,Y)$，$X$ 是距攀岩墙左边的距离，$Y$ 是离地面的距离。
## 输出格式

输出仅一个整数，Bessie 到达攀岩墙顶部所需的最少步数。
## 样例

### 样例输入 #1
```
3000 5
600 800
1600 1800
100 1300
300 2100
1600 2300
```
### 样例输出 #1
```
3
```
## 提示

#### 样例说明

分别经过 $(600,800),(100,1300),(300,2100)$。

$1001\le H\le 3\times 10^4$

$1\le F\le 10^4$


---

---
title: "准备战斗，选择你的英雄"
layout: "post"
diff: 普及/提高-
pid: P6248
tag: []
---
# 准备战斗，选择你的英雄
## 题目背景

zjf，被 NOIP 普及组初赛戏耍，pj 1= -> 初赛三等，愤恨地离开了 OI，深陷中考的泥潭当中。据说，他颓废是因为玩多了 [OW](https://ow.blizzard.cn/home) 这款游戏。
## 题目描述

目前，游戏共有 $31$ 个英雄，每局可以派 $6$ 个英雄上场。实际能使用的英雄数将会小于 $31$。简单地假设，每位英雄对团队的贡献可以用一个正整数 $v_i$ 表示。团队的总能力等于所有英雄的贡献之和。特别地，对于 $m$ 组特定的英雄，他们一起出现会让团队总能力提高 $x_i$。

**另注：英雄组合可以重复，若重复请多次计数。**
## 输入格式

第一行两个整数 $n$，$m$，表示可选英雄个数和特定的组合数。  
接下来 $n$ 行，每行先给出第 $i$ 个英雄的名字，然后再输入一个整数 $v_i$。  
接下来 $m$ 行，每行两个字符串 $a$，$b$ 和一个整数 $x_i$，表示若英雄 $a$ 和英雄 $b$ 一起出现时总能力提高 $x_i$。  
**保证：$a$ 和 $b$ 不是同一个英雄。**


## 输出格式

一个整数，表示团队能力值的最大值。
## 样例

### 样例输入 #1
```
7 0
Sigma 10
Orisa 10
Mei 10
Reaper 10
Moira 10
Lucio 10
Doomfist 1
```
### 样例输出 #1
```
60
```
### 样例输入 #2
```
8 2
Pharah 5
Mercy 5
Reinhardt 10
DVA 10
SOLDIER:76 12
Torbjorn 5
Anna 8
Baptiste 10
Pharah Mercy 20
Anna Pharah 5
```
### 样例输出 #2
```
75
```
## 提示

#### 样例 1 解释
我们应该选择前 $6$ 名英雄。

---

#### 样例 2 解释
我们应该选择 Pharah、Mercy、Reinhardt、DVA、SOLDIER:76、Anna

---

#### 数据范围
对于 $40\%$ 的数据，$m=0$。  
对于 $100\%$ 的数据，$6\le n \le 30$，$0\le m \le 30$，*$1\le x_i,v_i \le 100$*，英雄名字长度 $\le 10$，字符集包括大小写字母、数字以及冒号（ `:` ）。每个英雄的名字各不相同。



---

---
title: "[COCI 2014/2015 #3] SILUETA"
layout: "post"
diff: 普及/提高-
pid: P6265
tag: ['2014', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #3] SILUETA
## 题目背景

画家文森特有一次发现自己身处一个摩天大楼林立的大都市，于是他立刻下来画画，陶醉于这一美妙的景象。由于一些普通程序员无法理解的原因，文森特决定只画眼前摩天大楼的轮廓。不幸的是，在他完成这幅杰作一周后，这幅画被烧了。

为了重建这幅画，文森特向各个方向寻求帮助，现在轮到你了！
## 题目描述

从你的角度来看，文森特的摩天大楼是长方形的，它的边平行于坐标轴，一边位于横坐标上。图片的横坐标应该用字符 `*` 表示，摩天大楼的轮廓用 `#` 表示，其余部分用 `.` 表示。图像的左边缘必须以摩天大楼开始，而图像的右边缘必须以摩天大楼结束。此外，为了验证数学家得到的结果，输出给定轮廓的周长，而不是计算横坐标上的边。
## 输入格式

第一行输入包含一个整数 $n$，即摩天大楼的数量。

以下 $n$ 行中的每一行都包含三个整数 $l_i,r_i$ 和 $h_i$，分别表示第 $i$ 座摩天大楼的位置。在笛卡尔坐标系中，这座摩天大楼被认为是一个矩形，左下角在 $(l_i,0)$ 中，右上角在 $(r_i,h_i)$ 中。
## 输出格式

第一行输出一个整数，表示摩天大楼轮廓的周长。

接下来的 $h+1$ 行，其中 $h+1$ 是最高摩天大楼的高度，必须包含题目描述中描述的文森特的绘图。
## 样例

### 样例输入 #1
```
3
1 5 4
7 11 3
9 13 5

```
### 样例输出 #1
```
28
........####
####....#..#
#..#..###..#
#..#..#....#
#..#..#....#
************

```
### 样例输入 #2
```
6
2 8 7
5 13 5
2 18 3
23 26 5
20 31 7
21 30 10
```
### 样例输出 #2
```
61
...................#########.
...................#.......#.
...................#.......#.
######............##.......##
#....#............#.........#
#....######.......#.........#
#.........#.......#.........#
#.........######..#.........#
#..............#..#.........#
#..............#..#.........#
*****************************

```
## 提示

#### 样例输入输出 1 解释 

如下图，蓝色表示摩天大楼的轮廓（字符 `#`），而黄色是文森特绘画中横坐标的一部分（字符 `*`）。

![](https://cdn.luogu.com.cn/upload/image_hosting/ynl2n5os.png)

#### 数据规模与约定

- 对于 $50\%$ 的数据，保证 $1\le n\le 100$，$1\le l_i,r_i,h_i\le 100$。
- 对于 $100\%$ 的数据，保证 $1\le n\le 10^4$，$1\le l_i,r_i,h_i\le 10^3$，$3 \leq r_i - l_i \leq 10^3$。


---

---
title: "[COCI 2016/2017 #1] Jetpack"
layout: "post"
diff: 普及/提高-
pid: P6285
tag: ['2016', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2016/2017 #1] Jetpack
## 题目描述

Mirko 正在玩一款小游戏。在一个 $10$ 行 $n$ 列的矩阵中，他需要从左下角出发，避免在障碍物处停留，最终到达第 $n$ 列的任意位置。每秒，他都会向右移动一个单位。

在游戏中，Mirko 拥有一个喷气背包（游戏开始时关闭）：

- 打开喷气背包时，每秒他将额外向上移动一个单位（即向右上方移动），直到他处于矩阵顶端的一行。
- 关闭喷气背包时，每秒他将额外向下移动一个单位（即向右下方移动），直到他处于矩阵底端的一行。

他可以在任意一秒打开喷气背包，并在任意秒后关闭。将此记为一次操作。

现在，Mirko 想让你设计一系列操作，使他能够顺利结束游戏。
## 输入格式

第一行一个整数 $n$，表示矩阵的列数。

接下来 $10$ 行，每行 $n$ 个字符。表示相应位置是否存在障碍物。字符只可能是 `.` 或 `X`。

- `.` 表示该区域不存在障碍物。
- `X` 表示该区域存在障碍物。
## 输出格式

**本题使用 Special Judge**。

第一行一个非负整数 $p$，表示 Mirko 应进行操作的次数。

接下来 $p$ 行，每行两个正整数 $t_i$ 和 $x_i$，表示 Mirko 需要在第 $t_i$ 秒打开喷气背包，并在 $x_i$ 秒后关闭。

若存在多种答案，请输出任意一种。

另外：

- 操作应按时间顺序给出，且在一次操作完成前无法进行其他操作。即 $t_i+x_i\le t_{i+1}$。
- 游戏结束后 Mirko 无法进行任何操作。即 $t_i<n$。
- Mirko 不希望操作次数过多。即 $0\le p\le 5\times 10^4$。
## 样例

### 样例输入 #1
```
11
.....XX...X
....XX...XX
...XX...XX.
...........
....XXX....
...........
.....X.....
....XX...X.
...XX...XX.
...X...XX.. 
```
### 样例输出 #1
```
2
1 4
7 2 
```
### 样例输入 #2
```
20
X..................X
.X................X.
..X..............X..
...X............X...
....X..........X....
.....X........X.....
......X......X......
.......X....X.......
........X..X........
.........XX......... 
```
### 样例输出 #2
```
1
8 10 
```
## 提示

#### 样例 1 解释

下图为样例输出一所表示的路径。

```
.....XX...X
....XX...XX
...XX...XX.
...........
....XXX....
.....*...*.
....*X*.*.*
...*XX.*.X.
..*XX...XX.
**.X...XX.. 
```

---

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1\le n\le 10^5$。

数据保证至少存在一种方案，能使得 Mirko 能够顺利结束游戏。

------------

#### 说明

**题目译自 [COCI2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #1](https://hsin.hr/coci/archive/2016_2017/contest1_tasks.pdf) _T2 Jetpack_**。


---

---
title: "[PA 2018] Palindrom"
layout: "post"
diff: 普及/提高-
pid: P6312
tag: ['2018', 'PA（波兰）']
---
# [PA 2018] Palindrom
## 题目描述

**译自 [PA 2018](https://sio2.mimuw.edu.pl/c/pa-2018-1/dashboard/)  Runda 3 [Palindrom](https://sio2.mimuw.edu.pl/c/pa-2018-1/p/pal/)**

**请特别注意本题的内存限制。**

给出一个字符串，请你判断其是否为回文串。

回文串是指从左往右读与从右往左读完全相同。
## 输入格式

第一行一个整数 $n$。在有些数据中它代表了字符串的长度，有些数据中 $n=0$ （即不告诉你长度）。

第二行一个字符串，即需要判断的串。
## 输出格式

如果是回文串，则输出 `TAK`，否则输出 `NIE`。
## 样例

### 样例输入 #1
```
5
kajak
```
### 样例输出 #1
```
TAK
```
### 样例输入 #2
```
0
kanu
```
### 样例输出 #2
```
NIE
```
## 提示

#### 数据范围

**本题采用捆绑测试**

对于 $100\%$ 的数据，保证字符串长度不超过 $2\times 10^7$。

您可以假设在任何测试数据中都有 $n>0$ 或者 $n=0$。

感谢 @[Infinite_Eternity](/user/897776) 提供的测试数据！



---

---
title: "[COCI 2006/2007 #4] ZBRKA"
layout: "post"
diff: 普及/提高-
pid: P6323
tag: ['2006', 'COCI（克罗地亚）']
---
# [COCI 2006/2007 #4] ZBRKA
## 题目描述

在一个长度为 $n$ 的排列中找出逆序对数量恰好为 $c$ 的排列总数。（$\bmod \ 10^9+7$）
## 输入格式

输入共一行为两个整数 $n,c$。
## 输出格式

输出逆序对数量恰好为 $c$ 的排列总数。（$\bmod \ 10^9+7$）
## 样例

### 样例输入 #1
```
10 1
```
### 样例输出 #1
```
9
```
### 样例输入 #2
```
4 3
```
### 样例输出 #2
```
6
```
### 样例输入 #3
```
9 13
```
### 样例输出 #3
```
17957
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1\le n\le 10^3$，$1\le c\le 10^4$。

#### 说明

**题目译自 [COCI2006-2007](https://hsin.hr/coci/archive/2006_2007/) [CONTEST #4](https://hsin.hr/coci/archive/2006_2007/contest4_tasks.pdf) *T4 ZBRKA***


---

---
title: "[COCI 2006/2007 #4]  JOGURT"
layout: "post"
diff: 普及/提高-
pid: P6324
tag: ['2006', 'COCI（克罗地亚）']
---
# [COCI 2006/2007 #4]  JOGURT
## 题目描述

给定一棵完全二叉树，共 $n$ 层。

我们将根节点记为在第 $0$ 层，根节点的两个子节点记为在第 $1$ 层，以此类推。

现在，我们要把 $1\sim 2^n-1$ 这 $2^n-1$ 个数字不重复无遗漏的分别填入每个节点，使得对于任意的 $d$，以第 $d$ 层的一个节点为根，它的左右子树分别的数字之和的差的绝对值等于 $2^d$。

请你给出一个可行的方案，只需输出这个方案的[先序遍历](https://baike.baidu.com/item/%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/6442839?fr=aladdin)即可。
## 输入格式

输入一行一个整数 $n$，表示树的层数。
## 输出格式

输出一行 $2^n-1$ 个 $1\sim 2^n-1$ 的整数，用空格隔开，为一个可能的先序遍历。

**如果有多种答案，输出任意一种即可，本题使用 SPJ**。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
3 1 2
```
### 样例输入 #2
```
3
```
### 样例输出 #2
```
3 1 7 5 6 2 4
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1\le n\le 15$。

#### 说明

**题目译自 [COCI2006-2007](https://hsin.hr/coci/archive/2006_2007/) [CONTEST #4](https://hsin.hr/coci/archive/2006_2007/contest4_tasks.pdf) *T5 JOGURT***

感谢 @[一扶苏一](https://www.luogu.com.cn/user/65363) 提供SPJ！


---

---
title: "[COCI 2007/2008 #3] DEJAVU"
layout: "post"
diff: 普及/提高-
pid: P6355
tag: ['2007', 'COCI（克罗地亚）']
---
# [COCI 2007/2008 #3] DEJAVU
## 题目描述

给出平面内的 $n$ 个点，计算有多少不同的直角三角形，满足其顶点均为给出的点，**且直角边均平行于坐标轴**。

两个直角三角形不同当且仅当它们存在至少一个顶点不同。
## 输入格式

输入第一行包含一个整数 $n$，表示点的数量。

接下来的 $n$ 行，每行两个整数，表示一个点的坐标。


## 输出格式

输出直角三角形的数量。
## 样例

### 样例输入 #1
```
3
4 2
2 1
1 3
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
5
1 2
2 1
2 2
2 3
3 2
```
### 样例输出 #2
```
4
```
### 样例输入 #3
```
6
10 10
20 10
10 20
20 20
30 20
30 30
```
### 样例输出 #3
```
8
```
## 提示

#### 数据规模与约定

- 对于 $40\%$ 的数据，保证 $n<100$；
- 对于 $70\%$ 的数据，保证 $n<10^4$；
- 对于 $100\%$ 的数据，保证 $3\le n\le 10^5$，坐标的数值在 $1$ 和 $10^5$ 之间，且不存在任何两个点的坐标相同。

#### 说明

**题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #3](https://hsin.hr/coci/archive/2007_2008/contest3_tasks.pdf) *T4 DEJAVU***。


---

---
title: "[传智杯 #2 初赛] 众数出现的次数"
layout: "post"
diff: 普及/提高-
pid: P6365
tag: ['传智杯']
---
# [传智杯 #2 初赛] 众数出现的次数
## 题目描述

传智专修学员的课堂上，为了活跃气氛，并巩固位运算的知识，同学们玩起了一个游戏。

班级里有 $n(n\le10^6)$ 名同学，每位同学都获得了两张卡，红卡或者黑卡。每张卡上都有一个不超过 $10^9$ 的非负整数。第 $i$ 位同学手里红卡数字是 $a_i$ ，黑卡数字是 $b_i$。

现在需要每位同学出牌。每位同学可以直接将红卡上的数字打出，或者将自己的红卡上的数字和自己黑卡数字进行按位异或操作后的结果打出。最后老师会收集所有同学打出的数字。

这些数字中出现次数最多的数字是众数。在所有同学合作的最优策略下，我们希望众数对应数字出现的次数尽可能多。请问出现次数最多的数字是多少呢？
## 输入格式

第一行，一个正整数 $n$。

接下来 $n$ 行，其中第 $i$ 行时非负整数 $a_i,b_i$ 代表第 $i$ 名同学手上红卡和黑卡的数字。
## 输出格式

一个整数，表示答案。如果有多个解，请输出最小的那个。
## 样例

### 样例输入 #1
```
4
21 9
28 9
28 3
17 4
```
### 样例输出 #1
```
21
```
## 提示

样例解释：

众数出现次数最多是 $3$ 次，有如下两种方法：

- $1$ 号同学直接出红卡，$2$ 号同学出红黑异或，$3$ 号同学随便出，$4$ 号同学出红黑异或。这样 $1,2,4$ 号同学都可以打出 $21$。
- $1$ 号同学出红黑异或，$2$ 号同学直接出红卡，$3$ 号同学直接出红卡，$4$ 号同学随便出。这样 $1,2,3$ 号同学都可以打出 $28$。

所以 $21$ 和 $28$ 都是出现次数最多的众数，因为最多可以出现 $3$ 次，不存在出现 $4$ 次的方案。但是由于要求如果有多解输出小的，请输出 $21$。


---

---
title: "[COCI 2007/2008 #4]  MUZICARI"
layout: "post"
diff: 普及/提高-
pid: P6389
tag: ['2007', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2007/2008 #4]  MUZICARI
## 题目描述

在一场音乐会上，一支有 $n$ 名乐师的乐队共连续演奏 $t$ 分钟，但每名乐师都有自己想要休息的时长。对于第 $i$ 名乐师，他想休息 $a_i$ 分钟。但为了整体的和谐，不能有**三个及以上**的乐师在同一个时刻休息（但是可以在上一个乐师刚刚结束的时刻开始下一个人的休息）。

请你安排每名乐师开始休息的时刻。
## 输入格式

输入第一行为两个整数 $t,n$。

第二行为 $n$ 个整数 $a_1,\dots ,a_n$，表示每名乐师希望休息的时长。
## 输出格式

输出一行 $n$ 个整数，表示安排每名乐师的开始休息的时刻，按照输入的顺序输出每名乐师。

**注意：尽管方案可能不唯一，但数据保证方案一定存在，本题使用SPJ。**
## 样例

### 样例输入 #1
```
8 3
4 4 4
```
### 样例输出 #1
```
0 2 4
```
### 样例输入 #2
```
10 5
7 5 1 2 3
```
### 样例输出 #2
```
3 3 9 0 0
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1\le t\le 5000$，$1\le n\le 500$。
#### 说明

**题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #4](https://hsin.hr/coci/archive/2007_2008/contest4_tasks.pdf) *T4  MUZICARI***。


---

---
title: "[COCI 2014/2015 #2] STUDENTSKO"
layout: "post"
diff: 普及/提高-
pid: P6403
tag: ['2014', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #2] STUDENTSKO
## 题目描述

一年一度的萨格勒布大学学生乒乓球团体赛将于下周六举行！每队由 $k$ 名学生组成。$n$ 个兴奋的学生们正在排队等候登记。Krešo 在登记处工作。他真的不想做他的工作，所以他决定不让学生选择团队。他决定第一组将由第一个排队的 $k$ 名学生组成，第二组由下面的 $k$ 名学生组成，第三组由后面的 $k$ 名学生组成，以此类推。（$n\equiv 0\pmod k$，因此没有人剩余。）

Ante 用一个整数来估计每个玩家的技能。他希望第一队拥有最弱的 $k$ 个球员，第二队拥有第二弱的 $k$ 个球员，依此类推，最后一队拥有最强的 $k$ 个球员。

Krešo 刚刚休息了一下，Ante 决定转移排队的学生以达到自己的目标。他转移学生的方式是告诉一个学生从队列中走出来，在另一个学生后面排队，或者走到队列的前面。每转移一个学生花费一分钟。Krešo 有可能随时从休息中回来，所以 Ante 需要尽快实现他的目标。帮助 Ante 确定实现目标所需的最少分钟数。
## 输入格式

第一行输入包含整数 $n$ 和 $k$，满足 $n\bmod k=0$。

第二行包含 $n$ 个空格分隔的整数 $v_i$，表示第 $i$ 个站在队列中的玩家技能的水平。

所有参赛者都有不同水平的技能。
## 输出格式

仅一行，即转移学生所用的最短分钟数。
## 样例

### 样例输入 #1
```
4 1
9 12 5 13
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
6 2
16 2 1 7 5 10
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
6 3
7 9 8 3 6 5 
```
### 样例输出 #3
```
3
```
## 提示

#### 样例 3 说明

Ante 应该将技能等级为 $5,6$ 和 $3$ 的学生移到队列的前面，花了三分钟。

#### 数据范围与约定

- 对于 $30\%$ 的数据，有 $1\le n\le 20$。
- 对于 $100\%$ 的数据，有 $1\le n\le k\le 5\times 10^3$。

对于所有合法的 $v_i$，都有 $1\le v_i\le 10^9$。

#### 说明

**题目译自 [COCI2014-2015](https://hsin.hr/coci/archive/2014_2015/) [CONTEST #2](https://hsin.hr/coci/archive/2014_2015/contest2_tasks.pdf) _T3 STUDENTSKO_。**


---

---
title: "[COCI 2008/2009 #2] SVADA"
layout: "post"
diff: 普及/提高-
pid: P6423
tag: ['2008', 'COCI（克罗地亚）']
---
# [COCI 2008/2009 #2] SVADA
## 题目描述

当地的动物园已经获得了一个大型开放式花园，动物可以像在其自然栖息地中那样随意移动，并以平常的恶作剧来招待游客。

最受欢迎的动物是猴子。随着他们的攀登，跳跃和其他坎，他们使老老游客都感到高兴。

一种猴子专门研究爬高大的树木和摘椰子。另一种专门研究它们的开放性。
有 $n$ 只第一种猴子（编号 $1$ 到 $n$）和 $m$ 种第二种猴子（编号 $1$ 到 $m$）。

第一种猴子的第 $k$ 只需要 $A_k$ 秒才能在树上找到一个好地方，然后摘下第一个椰子。之后，猴子每 $B_k$ 秒产生一个新的椰子。

第二种猴子的第 $k$ 只需要 $C_k$ 秒的时间才能找到打开椰子的好工具，然后打开第一个椰子。之后，猴子每 $D_k$ 秒打开另一个椰子。

不幸的是，第二种猴子非常具有攻击性，因此这两种类型可能不会同时出现在花园中。因此，动物园管理员会在第一类猴子摘下所有椰子后立刻赶走它们。类似地，如果打开所有椰子后，相同类型的猴子停留时间过长，则会发生争斗。因此，动物园管理员将在它们打开所有椰子后将它们送走。

动物园管理员需要在所有椰子都被采摘后立即到达，然后在猴子将它们全部打开后立即返回。猴子进入或离开花园所需的时间也很小。

Tomislav 特别喜欢第二种猴子，但到来时总是看不见它们。请帮助他计算第二种猴子到达的时间（他知道猴子在花园里度过的总时间，但不知道花园里椰子的数量）。
## 输入格式

第一行一个整数 $t$，表示猴子在花园中度过的总时间，以秒为单位。

第二行一个整数 $n$，表示第一种猴子的只数。

以下 $n$ 行，每行两个整数 $A_k$ 和 $B_k$，表示第 $k$ 只第一种猴子的两个相关数据，具体解释请参照题目描述。

接下来一行一个整数 $m$，表示第二种猴子的只数。

以下 $m$ 行，每行两个整数 $C_k$ 和 $D_k$，表示第 $k$ 只第二种猴子的两个相关数据，具体解释请参照题目描述。
## 输出格式

一行一个整数，表示第一种猴子到来到第二种猴子到来之间的秒数。
## 样例

### 样例输入 #1
```
12
1
3 1
1
5 1
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
20 
2
3 2
1 3
3
3 1
4 1
5 1
```
### 样例输出 #2
```
13
```
## 提示

#### 数据规模与约定
对于 $100\%$ 的数据，有 $1 \leq t \leq 1 \times 10^9,1 \leq n,m \leq 100,1 \leq A_k,B_k,C_k,D_k \leq 1 \times 10^9$。
#### 说明
#### 题目译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CONTEST #2](https://hsin.hr/coci/archive/2008_2009/contest2_tasks.pdf) SVADA，译者 @[mnesia](https://www.luogu.com.cn/user/115711)。


---

---
title: "[USACO3.1] 形成的区域 Shaping Regions"
layout: "post"
diff: 普及/提高-
pid: P6432
tag: ['USACO']
---
# [USACO3.1] 形成的区域 Shaping Regions
## 题目描述

$n$ 个不同颜色且不透明的长方形被放在一张宽为 $a$ 长为 $b$ 的白纸上。它们的边于白纸的边缘平行，且所有的长方形都放置在白纸内。

现在将他们重叠，重叠后会出现不同形状的各种颜色，你需要求出每种颜色的面积。

白纸的左下角的坐标为原点 $(0,0)$，且坐标轴平行于白纸边缘。
## 输入格式

输入数据共 $n+1$ 行。

第一行三个整数，$a,b,n$。

第二到 $n+1$ 行，每行五个整数，$llx,lly,urx,ury,color$，表示一个长方形的左下角和右上角的坐标以及颜色编号。**注：颜色 1 和底部白纸的颜色相同**。
## 输出格式

一个所有能被看到颜色和该颜色的总面积的汇总，一行内格式为编号和面积，即使颜色的区域不是连续的，仍可以输出，并且按 $color$ 的增序排序输出，不要输出没有区域的颜色。
## 样例

### 样例输入 #1
```
20 20 3
2 2 18 18 2
0 8 19 19 3
8 0 10 19 4
```
### 样例输出 #1
```
1 91
2 84
3 187
4 38
```
## 提示

**样例输入输出 1 解释**

白纸经过各层覆盖后，各种颜色的面积分别为 $91,84,187,38$。

---

**数据规模与约定**

对于 $100\%$ 的数据，$1 \leq n \leq 10^3$，$1 \leq a,b \leq 10^4$，$1 \leq llx,lly,urx,ury \leq a,b$，$1 \leq color \leq n+1$。


---

---
title: "[COCI 2011/2012 #6] ZAGRADE"
layout: "post"
diff: 普及/提高-
pid: P6439
tag: ['2011', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #6] ZAGRADE
## 题目描述

给定一个算术表达式，有些部分用括号括起来表示优先级的不同。请你删除一些互相匹配的括号对，并输出所以删除的方案。按照字典序输出。

比如，给定一个算术表达式 `(2+(2*2)+2)`，所有合法的方案为 `(2+2*2+2)` `2+(2*2)+2` `2+2*2+2`。而 `(2+2*2)+2` `2+(2*2+2)` 并不合法，因为删除的括号对不互相匹配。
## 输入格式

输入一行一个算术表达式。
## 输出格式

输出不同的通过删除合法的括号对获得的算术表达式。按照字典序输出。
## 样例

### 样例输入 #1
```
(0/(0))
```
### 样例输出 #1
```
(0/0)
0/(0)
0/0
```
### 样例输入 #2
```
(2+(2*2)+2)
```
### 样例输出 #2
```
(2+2*2+2)
2+(2*2)+2
2+2*2+2
```
### 样例输入 #3
```
(1+(2*(3+4)))
```
### 样例输出 #3
```
(1+(2*3+4))
(1+2*(3+4))
(1+2*3+4)
1+(2*(3+4))
1+(2*3+4)
1+2*(3+4)
1+2*3+4
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证给出的算术表达式的长度不超过 $200$，输入仅包含 `+` `-` `*` `/` `(` `)`。

#### 说明

**题目译自 [COCI2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #6](https://hsin.hr/coci/archive/2011_2012/contest6_tasks.pdf) *T3 ZAGRADE***。


---

---
title: "[传智杯 #2 决赛] 建设岛屿"
layout: "post"
diff: 普及/提高-
pid: P6463
tag: ['传智杯']
---
# [传智杯 #2 决赛] 建设岛屿
## 题目描述

“动物森友会”是一款自由度很高的游戏，可以在自己的无人岛上建房子、种花种树，还能钓鲈鱼。

![](https://cdn.luogu.com.cn/upload/image_hosting/hd1w4hsq.png)

如果一个 $(2k-1)\times(2k-1)$ 的正方形土地满足最外圈的高度是 1，第二圈的高度是 2……以此类推，它就是一个高度为 k 的金字塔。下图是高度为 1 到 4 的金字塔的示例：

![](https://cdn.luogu.com.cn/upload/image_hosting/5gix9oyp.png)


小 A 的岛大小是 $n\times m$ 的矩形，每个位置的高度都是已知的。他想要建造一个大大的金字塔。他拥有最多 $k$ 次改造地形机会，每次可以选择一个坐标，将这个点的高度增加 1，但是不能减少高度。请问，他能完成的金字塔的最高高度是多少？
## 输入格式

每个测试点由多组数据组成。

第一行为一个整数 $T$，代表数据的组数。

对于每组数据，第一行是三个整数 $n,m,k$，表示岛的大小和操作次数上限。接下来是个 $n$ 行 $m$ 列的矩阵，表示最开始的高度，每个数字之间用空格分隔。
## 输出格式

输出 $T$ 行，对于每行，都输出一个整数，表示每组数据下可以完成金字塔的最大高度。
## 样例

### 样例输入 #1
```
3
5 5 10
1 1 1 1 1
1 2 1 1 1
1 1 1 1 1
1 1 1 2 1
1 1 1 1 1
5 5 5
1 1 1 1 1
1 2 1 1 1
1 1 1 1 1
1 1 1 2 1
1 1 1 1 1
1 1 1000000000
2
```
### 样例输出 #1
```
3
2
0
```
## 提示

对于所有测试数据，$1\le T \le 5$，$1 \le n,m \le 350$，$1\le k \le 10^8$，初始高度 0 到 50 的非负整数。


---

---
title: "[COCI 2008/2009 #6] NERED"
layout: "post"
diff: 普及/提高-
pid: P6469
tag: ['2008', 'COCI（克罗地亚）']
---
# [COCI 2008/2009 #6] NERED
## 题目描述

有一个方阵，方阵每行、每列均有 $n$ 个格子。每个格子上都有一个数，初始时均为 $0$。有 $m$ 次修改，每次会将某个格子上的数 $+1$。

定义一步操作为将某个**非零**格子上的数 $-1$，将另一个格子（可以为 $0$）上的数 $+1$。

请求出最小的操作步数，使得所有格子上的数均为 $0$ 或 $1$，且所有为 $1$ 的格子构成一个矩形。输出操作步数。
## 输入格式

第一行有两个整数，分别表示方阵的行列数 $n$ 和修改数 $m$。

接下来 $m$ 行，每行两个整数 $x, y$，表示将 $x$ 行 $y$ 列的格子上的数增加 $1$。
## 输出格式

输出一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
3 2
1 1
1 1

```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
4 3
2 2
4 4
1 1

```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
5 8
2 2
3 2
4 2
2 4
3 4
4 4
2 3
2 3 

```
### 样例输出 #3
```
3
```
## 提示

#### 【样例解释】

**样例 1 解释**

将第 $1$ 行第 $1$ 列减去 $1$，第 $2$ 行第 $1$ 列加上 $1$。

**样例 3 解释**

- 将第 $2$ 行第 $3$ 列减去 $1$，在第 $3$ 行第 $3$ 列加上 $1$。
- 将第 $4$ 行第 $2$ 列减去 $1$，在第 $2$ 行第 $5$ 列加上 $1$。
- 将第 $4$ 行第 $4$ 列减去 $1$，在第 $3$ 行第 $5$ 列加上 $1$。

#### 【数据规模与约定】

对于全部的测试点，保证：

- $1 \leq n \leq 100$，$1 \leq m \leq n^2$。
- $1 \leq x, y \leq n$。
- 输入数据一定存在解。

#### 【说明】

**题目译自 [COCI2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CONTEST #6](https://hsin.hr/coci/archive/2008_2009/contest6_tasks.pdf) *T3 NERED***，翻译来自 @[一扶苏一](https://www.luogu.com.cn/user/65363)。


---

---
title: "[CRCI2006-2007] TETRIS"
layout: "post"
diff: 普及/提高-
pid: P6480
tag: ['2007', 'O2优化', 'COCI（克罗地亚）']
---
# [CRCI2006-2007] TETRIS
## 题目描述

有如下七种俄罗斯方块的图形：

![](https://cdn.luogu.com.cn/upload/image_hosting/5p1l1cba.png)

在使用时可以将它们旋转 $90$，$180$，$270$ 度或不进行旋转。

现在有一个有 $n$ 列，高度不限的方格阵，第 $i$ 列的底部 $a_i$ 行已经有了图形（即最下方 $a_i$ 行在之前已经被放上了方块），每一列只有底部的连续若干行有方块。

下一次要落下的方块是 $m$ 号方块，请求出下落后有多少种布局满足不存在任何一个格子，它本身不被方块占据但是上方的格子被方块占据。也即求出多少种布局满足任何一列只有底部连续若干行有方块。

两种布局不同当且仅当存在一个格子，在其中一种布局中该格子被方块占据，在另一种布局中不被占据。
## 输入格式

第一行有两个整数，分别表示方格阵的行数 $n$ 和下一次下落的方块编号 $m$。

第二行有 $n$ 个整数，第 $i$ 个整数 $a_i$ 表示第 $i$ 列的只有底部连续 $a_i$ 行有方块。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
6 5
2 1 1 1 0 1

```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
5 1
0 0 0 0 0

```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
9 4
4 3 5 4 6 5 7 6 6

```
### 样例输出 #3
```
1
```
## 提示

#### 样例 1 解释

下面六张图中，左上角的图是方格阵的初始布局，另外五张图是五种情况。

![](https://cdn.luogu.com.cn/upload/image_hosting/42ycyc2d.png)

#### 数据规模与约定

对于全部的测试点，保证：

- $1 \leq n \leq 100$，$1 \leq m \leq 7$。
- $0 \leq a_i \leq 100$。

#### 说明

**题目译自 [COCI2006-2007](https://hsin.hr/coci/archive/2006_2007/) [Regional Competition](https://hsin.hr/coci/archive/2006_2007/regional_tasks.pdf) *T2 TETRIS***，翻译来自 @[一扶苏一](https://www.luogu.com.cn/user/65363)。


---

---
title: "[COCI 2006/2007] FIREFLY"
layout: "post"
diff: 普及/提高-
pid: P6481
tag: ['2006', 'COCI（克罗地亚）']
---
# [COCI 2006/2007] FIREFLY
## 题目背景

一只日本萤火虫飞进了一个充满障碍的山洞。
## 题目描述

山洞中有两种障碍物：石笋（从地面向上生长）和钟乳石（从洞顶垂挂下来）。山洞长 $n$ 个单位，高 $h$ 个单位。从左到右第一个障碍物是石笋；紧接着钟乳石与石笋依次交替出现。

下图是一个长 $14$ 个单位，高 $5$ 个单位的山洞示例：

![](https://cdn.luogu.com.cn/upload/image_hosting/bcb6bifp.png)

这只日本萤火虫并不会绕开障碍物，而只会沿着同一高度飞行。凭借着自己精湛的功夫，他会从山洞的一端，以某一高度撞开所有障碍物而达到另一端。

![](https://cdn.luogu.com.cn/upload/image_hosting/3t9jf6ny.png)

例如在上图中，如果萤火虫选择高度 $4$ 来飞行，那么它总共会撞到 $8$ 个障碍物。

但这并不是最好的选择。因为如果它选择高度 $1$ 或高度 $5$ 飞行的话，只需要撞开 $7$ 个障碍物就行了。

为了减轻疼痛，你需要帮助萤火虫找出最少需要摧毁的障碍的数量和摧毁最少障碍物的高度种类数。
## 输入格式

输入第一行两个整数 $n,h$，表示山洞的长度和高度。数据保证 $n$ 是偶数。

接下来的 $n$ 行，每行一个整数，表示障碍物的长度。保证所有障碍物的长度都小于 $h$。
## 输出格式

输出一行两个整数，分别为最少需要摧毁的障碍物数量和摧毁最少的障碍物有多少种高度的选择。
## 样例

### 样例输入 #1
```
6 7
1
5
3
3
5
1
```
### 样例输出 #1
```
2 3
```
### 样例输入 #2
```
14 5
1
3
4
2
2
4
3
4
3
3
3
2
3
3
```
### 样例输出 #2
```
7 2
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $2\le n\le 2\times 10^5$，$2\le h\le 5\times 10^5$。

#### 说明

**题目译自 [COCI2006-2007](https://hsin.hr/coci/archive/2006_2007/) [Regional Competition](https://hsin.hr/coci/archive/2006_2007/regional_tasks.pdf) *T3 FIREFLY***。


---

---
title: "[COCI 2010/2011 #4] PROSJEK"
layout: "post"
diff: 普及/提高-
pid: P6485
tag: ['2010', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #4] PROSJEK
## 题目描述

你有 $5$ 种数字： $1,2,3,4,5$。

你需要从中选取尽量少的数字，使得这些数之和的平均数为 $P$。

**需要注意的是，这 $5$ 种数字每种有任意多个。**
## 输入格式

输入一行一个实数 $P$。

$P$ 为一个 $1\sim 9$ 位的小数。
## 输出格式

输出一行五个数，分别表示 $1,2,3,4,5$ 取用的数量。

**如果有多种最优的方案，输出任意一种即可。本题使用 SPJ。**
## 样例

### 样例输入 #1
```
5.0
```
### 样例输出 #1
```
0 0 0 0 1
```
### 样例输入 #2
```
4.5
```
### 样例输出 #2
```
0 0 0 1 1
```
### 样例输入 #3
```
3.20
```
### 样例输出 #3
```
0 0 4 1 0
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1\le P\le 5$。

#### 说明

**题目译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #4](https://hsin.hr/coci/archive/2010_2011/contest4_tasks.pdf) *T4 PROSJEK***。


---

---
title: "[COCI 2016/2017 #2] Tavan"
layout: "post"
diff: 普及/提高-
pid: P6495
tag: ['2016', 'COCI（克罗地亚）']
---
# [COCI 2016/2017 #2] Tavan
## 题目描述

Željko 正在读奶奶的一封信。由于年代久远，信中的一些单词已经无法辨认。他选出了一个长度为 $n$ 的单词，将其中 $m$ 个无法辨认的字母替换为 `#`。

对于每一处 `#`，奶奶都给出了 $k$ 个字母，该处原先的字母是这 $k$ 个字母之一。所有可能的单词中**按字典序排列**的第 $x$ 个，即为原先的单词。

请你帮助他们找出原先的单词。
## 输入格式

第一行四个整数 $n,m,k,x$。

第二行一个长度为 $n$ 的字符串，表示 Željko 选出的单词。

接下来 $m$ 行，每行一个长度为 $k$ 的字符串，表示奶奶给出的字母。
## 输出格式

一行，一个字符串，表示原先的单词。
## 样例

### 样例输入 #1
```
9 2 3 7
po#olje#i
sol
znu 
```
### 样例输出 #1
```
posoljeni
```
### 样例输入 #2
```
4 1 2 2
#rak
zm 
```
### 样例输出 #2
```
zrak 
```
## 提示

#### 样例 1 解释

所有可能的单词按字典序排列如下：

- `pololjeni`
- `pololjeui`
- `pololjezi`
- `poooljeni`
- `poooljeui`
- `poooljezi`
- `posoljeni`
- `posoljeui`
- `posoljezi`

第 $7$ 个单词为 `posoljeni`。

------------

#### 数据规模与约定

对于 $100\%$ 的数据，$1\le n\le 500$，$1\le m\le n$，$1\le k\le 26$，$1\le x\le 10^9$。

所有字符串中仅包含小写字母和 `#`。

------------

#### 说明

**题目译自 [COCI2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #2](https://hsin.hr/coci/archive/2016_2017/contest2_tasks.pdf) _T2 Tavan_**。


---

---
title: "[COCI 2016/2017 #2]  Prosječni"
layout: "post"
diff: 普及/提高-
pid: P6497
tag: ['2016', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2016/2017 #2]  Prosječni
## 题目描述

Slavko 想在一个 $n\times n$ 的矩阵内填入 $n^2$ 个互不相等的正整数，使其满足：

- 每行 $n$ 个数的平均数是该行内的一个整数。
- 每列 $n$ 个数的平均数是该列内的一个整数。
- 对于矩阵中的任意一个元素 $a_{i,j}$，都有 $1\le a_{i,j}\le 10^9$。

请你帮助他找出任意一种可行的方案。
## 输入格式

一行，一个整数 $n$。
## 输出格式

**本题使用 Special Judge**。

若无解，输出 `-1`。

否则，输出 $n$ 行，每行 $n$ 个整数，表示任意一个符合要求的矩阵。
## 样例

### 样例输入 #1
```
3 
```
### 样例输出 #1
```
1 2 3
4 5 6
7 8 9 
```
### 样例输入 #2
```
2 
```
### 样例输出 #2
```
-1 
```
## 提示

#### 样例 1 解释

各行的平均数分别为 $2,5,8$，均为相应行内的一个整数。

各列的平均数分别为 $4,5,6$，均为相应列内的一个整数。

------------

#### 数据规模与约定

对于 $100\%$ 的数据，$1\le n\le 100$。

------------

#### 说明

**题目译自 [COCI2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #2](https://hsin.hr/coci/archive/2016_2017/contest2_tasks.pdf) _T4 Prosječni_**。


---

---
title: "[COCI 2010/2011 #3] ZNANSTVENIK"
layout: "post"
diff: 普及/提高-
pid: P6502
tag: ['2010', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #3] ZNANSTVENIK
## 题目描述

给定一个 $r\times c$ 的字母矩阵。你需要从这个矩阵的第一行开始，删除尽量多的行， 且保证矩阵任意两列都不相等。输出最多可以删除的行数。

- 两列相等定义为在这两列中同一行的字母都相等。
- 初始的矩阵中任意两列都是不相等的。
## 输入格式

输入第一行两个整数 $r,c$。

接下来的 $r$ 行，每行 $c$ 个字母，描述这个字母矩阵。

保证矩阵中的字母皆为小写字母。
## 输出格式

输出一行一个整数，表示最多可以删除的行数。
## 样例

### 样例输入 #1
```
2 6
dobarz
adatak
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
3 4
alfa
beta
zeta
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
4 6
mrvica
mrvica
marica
mateja
```
### 样例输出 #3
```
1
```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $2\le r,c\le 1000$。

#### 说明

**题目译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #3](https://hsin.hr/coci/archive/2010_2011/contest3_tasks.pdf) *T4 ZNANSTVENIK***。


---

---
title: "[CRCI2007-2008] NIKOLA"
layout: "post"
diff: 普及/提高-
pid: P6507
tag: ['2007', 'O2优化', 'COCI（克罗地亚）']
---
# [CRCI2007-2008] NIKOLA
## 题目描述

有一行 $n$ 个格子，编号为 $1\sim n$，Nikola 从 $1$ 号格子出发，想要前往 $n$ 号格子。

他的行程包含若干次跳跃，第一次只能跳到 $2$ 号格子，接下来的跳跃必须满足以下条件：

- 如果他向 $n$ 号格子的方向跳跃，那么每次必须比前一次多跳一个距离的格子；

- 如果他向 $1$ 号格子的方向跳跃，那么每次必须与上一次的跳跃距离完全相同。

例如，在第一次跳跃之后（位于 $2$ 号格），Nikola 可以选择跳到 $4$ 或者 $1$。

每进入一个格子，Nikola 都要支付相应的入场费。第 $i$ 个格子需要付费 $a_i$。他希望在能到达 $n$ 号格的前提下尽可能少的花钱。你需要求出这个最小值。
## 输入格式

输入第一行一个整数 $n$，表示格子的数量。

接下来的 $n$ 行，每行一个整数 $a_i$，依次表示 $1\sim n$ 号格子的入场费。
## 输出格式

输出一行一个整数，表示最小的花费。

**注意：刚开始所在的 $1$ 号格子不计费，但多次经过同一个格子需要计费。**
## 样例

### 样例输入 #1
```
6
1
2
3
4
5
6
```
### 样例输出 #1
```
12
```
### 样例输入 #2
```
8
2
3
4
3
1
6
1
4
```
### 样例输出 #2
```
14
```
## 提示

#### 样例 1 解释

在第一个样例中，Nikola 的路线为 $1-2-1-3-6$。共花费 $2+1+3+6=12$ 。


#### 数据规模与约定

对于 $100\%$ 的数据，保证 $2\le n\le 1000$，$1\le a_i\le 500$。

#### 说明

**题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [Regional Competition](https://hsin.hr/coci/archive/2007_2008/regional_tasks.pdf) *T2 NIKOLA***。


---

---
title: "[QkOI#R1] Quark and Equations"
layout: "post"
diff: 普及/提高-
pid: P6511
tag: []
---
# [QkOI#R1] Quark and Equations
## 题目描述

给定 $n,m$，求有几组正整数对 $(i,j)$ 满足下列方程组：

$$
\begin{cases}
   i+j=n \\
   \lfloor\frac{i}{j}\rfloor+\lceil\frac{j}{i}\rceil=m
\end{cases}
$$

上式中，$\lfloor x\rfloor$ 表示对 $x$ 向下取整，$\lceil x\rceil$ 表示对 $x$ 向上取整。
## 输入格式

**本题单个数据点含多组数据。**

第一行一个整数 $T$ 表示这个数据点有几组数据。

接下来 $T$ 行每行两个整数 $n,m$ ，含义如题面所述。
## 输出格式

你的输出应有 $T$ 行。

对于每一组数据，输出一行一个整数表示你的答案。
## 样例

### 样例输入 #1
```
2
2 2
2 1

```
### 样例输出 #1
```
1
0
```
### 样例输入 #2
```
1
6 2

```
### 样例输出 #2
```
2

```
## 提示

### 样例解释

当 $n=m=2$ 时，只有 $(1,1)$ 满足条件。  
当 $n=2,m=1$ 时，无解。  
当 $n=6,m=2$ 时，只有 $(2,4),(3,3)$ 满足条件。

---

### 数据范围

**本题采用捆绑测试。**

- Subtask 1（10 pts）：$T,n,m\le 500$。
- Subtask 2（40 pts）：$T,n,m\le 5000$。
- Subtask 3（5 pts）：$m=1$。
- Subtask 4（5 pts）：$m>n$。
- Subtask 5（5 pts）：$m\in[n-1,n]$。
- Subtask 6（35 pts）：无特殊限制。

对于 $100\%$ 的数据，$1\le T\le 10^5$，$1\le n,m\le 10^{7}$。


---

---
title: "[COCI 2013/2014 #1] ORGANIZATOR"
layout: "post"
diff: 普及/提高-
pid: P6539
tag: ['2013', 'COCI（克罗地亚）']
---
# [COCI 2013/2014 #1] ORGANIZATOR
## 题目背景

有一场比赛，要求你算出参加决赛的人数。
## 题目描述

参加决赛的人数满足以下描述：

现有 $n$ 个整数，分别为 $A_1,A_2,\cdots,A_n$。

需要找到一个正整数 $x$，假设有 $m(m \geq 2)$ 个 $A_i$ 是 $x$ 的倍数，则参加决赛的人数是 $s$，他的值为 $m\cdot x$。

请注意，对于一个正整数 $x$，如果其对应的 $m$ 值为 $1$，则该方案不合法。

请找出令 $s$ 尽可能大的 $x$，并输出 $s$。
## 输入格式

输入的第一行包含正整数 $n$。

输入的第二行包含 $n$ 个用空格隔开的整数 $A_i$。
## 输出格式

输出一个整数 $s$。
## 样例

### 样例输入 #1
```
3
1 2 4
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
2
1 5
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
5
4 6 3 8 9
```
### 样例输出 #3
```
9
```
## 提示

#### 样例 1 解释
令 $x=2$，此时 $A_{2,3}$ 满足条件，答案为 $2\times 2=4$。

#### 【数据规模与约定】
- 对于 $30\%$ 的数据，$n<1000$。
- 对于 $100\%$ 的数据，满足 $2\le n\le 2\times 10^5$，$1\le A_i\le 2\times 10^6$。

-----
#### 【说明】
**题目译自 [COCI2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST #1](https://hsin.hr/coci/archive/2013_2014/contest1_tasks.pdf)  _T5 ORGANIZATOR_。**


---

---
title: "[COCI 2010/2011 #2] IGRA"
layout: "post"
diff: 普及/提高-
pid: P6548
tag: ['2010', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #2] IGRA
## 题目描述

解决了繁琐的任务后，Mirko 决定与他的好朋友 Slavko 一起玩游戏。

他们在一张纸上写了一个含有 $n$ 个字母的序列。每个人轮流使用序列中的字母拼写一个单词，即从序列中删除单个字母并将其附加到单词的末尾。Mirko 开始了第一回合。当序列中没有剩余字母时，游戏结束。

一个比另一个单词更美丽的单词指这个单词按照字典序排在另一个单词前面。在游戏结束时拥有更美丽单词的玩家将获胜。 如果两个玩家的单词都一样，他们就都输了这一轮。

Mirko 玩得比 Slavko 更好，因此他决定通过始终选择序列中最右边的字母来使 Slavko 玩得更容易一些。 知道了这一点，Slavko 想知道他是否有可能获胜，以及他可能得到的最美丽的单词是什么。
## 输入格式

第一行一个整数 $n$，具体含义请见题目描述。

第二行一个长度为 $n$ 的字符串，表示初始序列。
## 输出格式

第一行一个大写字符串 `NE` 或 `DA`，`DA` 表示 Slavko 可能获胜，`NE` 表示 Slavko 不可能获胜。

第二行一个字符串，表示 Slavko 可能得到的最美丽的单词。
## 样例

### 样例输入 #1
```
2
ne
```
### 样例输出 #1
```
NE
n
```
### 样例输入 #2
```
4
kava
```
### 样例输出 #2
```
DA
ak
```
### 样例输入 #3
```
8
cokolada
```
### 样例输出 #3
```
DA
acko
```
## 提示

#### 数据规模与约定

- 对于 $50\%$ 的数据，保证 $n = 2\times k(1 \leq k \leq 500)$ 且 $k$ 为整数。
- 对于 $100\%$ 的数据，保证 $n = 2\times k(1 \leq k \leq 10^5)$ 且 $k$ 为整数，所有读入的、输出的第二行的字符均为小写字母。

#### 说明

- 本题满分 $80$ 分。
- 题目译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #2](https://hsin.hr/coci/archive/2010_2011/contest2_tasks.pdf) IGRA，译者 @[mnesia](https://www.luogu.com.cn/user/115711)。


---

---
title: "座位调查"
layout: "post"
diff: 普及/提高-
pid: P6582
tag: ['洛谷月赛']
---
# 座位调查
## 题目背景

ION 2048 结束了，但 ℲƆƆ 发现，一个机房里发生了性质恶劣的作弊事件。
## 题目描述

Youyou 奉命来到该机房进行调查。已知该机房是一个 $n \times m$ 的矩阵，每个位置是 `O` 或 `X`，其中 `O` 表示该位置是座位，`X` 表示该位置是空地。**每个座位上都必须坐有学生**，当然，至少有一个座位。

要想查明作弊的学生，Youyou 必须知道这个机房中的考生有多少种座位的可能。ION 2048 有来自 $k$ 个学校的考生参加，且座位满足以下要求：

* 考场中的座位是由若干长条形组成的，这样方便管理；
* 任意考生不可能和来自同学校的考生座位相邻，可以避免交流。

两个座位是相邻的当且仅当它们有一条**公共边**。

条形定义为除了两个端点只有一个相邻的座位外，每个座位都恰好有两个相邻座位，当然，一个座位也属于条形的。

例如，下面的都**是**「条形的座位」。

![](https://cdn.luogu.com.cn/upload/image_hosting/g7ew1c6c.png)

下面的都**不是**「条形的座位」。

![](https://cdn.luogu.com.cn/upload/image_hosting/x7z4d6yx.png)

注：方格中的数字表示与其相邻的座位的个数。

试求出合法的座位方案总数，由于结果可能很大，请输出结果对质数 $998244353$ 取模的结果。如果这个机房本身就不可能是 ION 2048 的考试机房，答案应当是 $0$。
## 输入格式

第一行三个正整数，$n,m$ 和 $k$。

接下来 $n$ 行，每行 $m$ 个字符，表示机房的情况。保证只有 `O`，`X` 两种字符，且 `O` 至少出现一次。
## 输出格式

一行一个整数，表示结果对质数 $998244353$ 取模的结果。
## 样例

### 样例输入 #1
```
2 3 2
OOX
XXO
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
2 3 3
XOX
XOO
```
### 样例输出 #2
```
12
```
### 样例输入 #3
```
2 3 4
XOO
XOO
```
### 样例输出 #3
```
0
```
## 提示

**样例 1 解释**

可能有以下 $4$ 种情况，红色代表学校 $1$ 的学生，蓝色代表学校 $2$ 的学生：

![](https://cdn.luogu.com.cn/upload/image_hosting/d6riqiby.png)

**样例 2 解释**

可能有以下 $12$ 种情况，红色代表学校 $1$ 的学生，蓝色代表学校 $2$ 的学生，黄色代表学校 $3$ 的学生：

![](https://cdn.luogu.com.cn/upload/image_hosting/4ni46qzf.png)

**样例 3 解释**

机房不是条形安排的，所以答案为 $0$。

**数据规模与约定**

* Subtask 1（10 分）：$n = 1$，$k = 2$；
* Subtask 2（15 分）：$n = 1$，$2 \le m,k \le 8$；
* Subtask 3（15 分）：$n = 1$；
* Subtask 4（20 分）：保证座位设置是条形的，$k = 2$；
* Subtask 5（20 分）：保证座位设置是条形的；
* Subtask 6（20 分）：无特殊限制。

对于全部的数据，$1 \le n, m \le 10^3$，$2 \le k \le 10^9$。


---

---
title: "蛋糕 Cake"
layout: "post"
diff: 普及/提高-
pid: P6614
tag: ['Special Judge']
---
# 蛋糕 Cake
## 题目背景

>   道不同不相为谋。

$\text{.cilohocohc}$ 喜欢吃蛋糕，尤其是巧克力蛋糕。

$\text{LeverImmy}$ 送了一个超级大的巧克力蛋糕给她做生日礼物，蛋糕上面点缀着许多巧克力布丁。

$\text{.cilohocohc}$ 一个人肯定是吃不完那么大一个蛋糕的，于是她要 $\text{LeverImmy}$ 帮她蛋糕切成两块，使得两块蛋糕上的布丁数之比为 $a : b$。

蛋糕可以抽象为一个二维平面；而做蛋糕的作坊很缺心眼，因此每个布丁都很小，可以看成二维平面上的一个 **整点**。

$\text{LeverImmy}$ 的刀技非常高超，所以他准备秀一下，他只会以一个 **斜率不小于 $1$ ，不大于 $10^{12}$ 的一次函数图像** 为轮廓在蛋糕上划一刀。

他想考考聪明的你，如果是你，你会怎么划？

## 题目描述

已知 $n$ 以及 $a, b$，求一个一次函数 $f(x) = k(x - x_0) + y_0 (1 \le k \le 10^{12})$，使得 $f(x)$ 将平面内的 $n$ 个点恰好分为个数之比 $a : b$ 的两部分。

如果你不知道一次函数为什么要这样表示，这里有 [点斜式](https://baike.baidu.com/item/%E7%82%B9%E6%96%9C%E5%BC%8F/921468?fr=aladdin) 的定义。

## 输入格式

第一行三个整数 $n, a, b$，表示点的个数以及你要分成两部分的比例。

接下来的 $n$ 行，第 $i$ 行两个整数 $x_i, y_i$ 表示平面上的点 $(x_i, y_i)$。

数据保证 **任意两个点不重合**。

## 输出格式

输出数据共一行三个整数，分别表示题目中的 $k, x_0, y_0$。

请务必保证 $1 \le k \le 10^{12}, -10^5 \le x_0, y_0 \le 10^{5}$。

如果有点 **恰好** 落在你给的直线上，我们视作其位于直线 **上方**。

## 样例

### 样例输入 #1
```
2 1 1
0 1
1 0
```
### 样例输出 #1
```
1 0 0
```
## 提示

本题采用 **捆绑测试**。

$\text{Subtask 1 (10 pts)}:$ 保证 $n \in \{2, 3\}$；

$\text{Subtask 2 (30 pts)}:$ 保证 $\left|x_i\right|, \left|y_i\right| \le 10$；

$\text{Subtask 3 (60 pts)}:$ 保证 $2 \le n \le 10^5$，$0 \le \left|x_i\right|, \left|y_i\right| \le 10^5$。

对于所有数据，保证 $(a + b) | n$ 且 $ab \neq 0$。

---

#### Special Judge

**本题采用 $\text{Special Judge}$。**

spj 返回信息一览：

`Your answer is correct!`：你的结果是正确的；

`Your answer is wrong, expected ratio as a : b, found A : B.`：你的函数有问题，它把所有的点分割成了 $A : B$ 的两部分而不是 $a : b$ 的两部分；

`Oops, data out of range!`：你所给出的点的横纵坐标，或是斜率，在题目要求的范围外。

注意，你在 **赛时** 并不能看到 Special Judge 的返回结果。



---

---
title: "[COCI 2019/2020 #2] Slagalica"
layout: "post"
diff: 普及/提高-
pid: P6676
tag: ['2019', 'COCI（克罗地亚）', '分类讨论']
---
# [COCI 2019/2020 #2] Slagalica
## 题目背景

## 本题征集 SPJ。但若您写的是正解，即，输出了字典序最小解，仍可获得 AC 的评测结果。


小斌喜欢玩拼图。
## 题目描述

小斌得到了一个由 $n$ 个部分组成的一维拼图游戏。他很快意识到每块拼图都属于以下类型之一：

![](https://cdn.luogu.com.cn/upload/image_hosting/vkiyrjd5.png)

另外，已知在这 $n$ 片拼图中，恰好有一个 $5$ 号拼图或 $6$ 号拼图（左边框）和一个 $7$ 号拼图或 $8$ 号拼图（右边框）。

小斌希望将所有块排列成一行，以使第一个（最左边的）拼图类型为 $5$ 号拼图或 $6$ 号拼图，而最后一个（最右边的）拼图类型为 $7$ 号拼图或 $8$ 号拼图。如果有两块拼图，则可以彼此相邻放置，并且仅当它们的相邻边框的形状不同时，即一个边框具有凹凸，而另一个边框具有一个凸出才可以相邻放置。

对于小斌来说，这个问题太简单了，因此他决定在每个部分上写一个唯一的正整数。现在，他想要寻找出字典序最小的方案。

注意：拼图不能旋转！

## 输入格式

输入数据共 $n + 1$ 行。

第一行，一个正整数 $n$。

接下来，$n$ 行，包含两个整数 $x_i$ 和 $a_i$，它们表示 $i$ 的类型，$x_i$ 拼图编号，$a_i$ 表示 Fabian 在上面写的数字。数据保证所有 $a_i$ 不重复。
## 输出格式

输出数据共一行。

第一行，如果小斌无法解决拼图游戏，输出 `-1`。 否则，您应该输出拼图上数字按字典序排列最小的方案。
## 样例

### 样例输入 #1
```
5
1 5
2 7
2 3
8 4
6 1

```
### 样例输出 #1
```
1 3 7 5 4
```
### 样例输入 #2
```
3
5 1
7 2
4 3

```
### 样例输出 #2
```
1 3 2
```
### 样例输入 #3
```
5
2 5
2 7
2 3
8 4
6 1

```
### 样例输出 #3
```
-1
```
## 提示

#### 样例 #1 解释
只有 $2$ 种解法，如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/lnprd06v.png)

可以看出，第二种解法的字典序较小，所以输出 `1 3 7 5 4`。



#### 数据规模及约定

对于 $100\%$ 的数据，$2 \le n \le 10^5, 1 \le x_i \le 8, 1 \le a_i \le 10^9$。

没有给出字典序最小解而只构造一组解可以得到 $40\%$ 的分数。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2019-2020](https://hsin.hr/coci/archive/2019_2020/) [CONTEST #2](https://hsin.hr/coci/archive/2019_2020/contest2_tasks.pdf) *T2 Slagalica*。**


---

---
title: "[COCI 2015/2016 #5] POPLAVA"
layout: "post"
diff: 普及/提高-
pid: P6726
tag: ['2015', 'COCI（克罗地亚）']
---
# [COCI 2015/2016 #5] POPLAVA
## 题目描述

有一个由 $N$ 列组成的柱状图，从左至右的柱子高度分别为 $h_1,h_2,\dots,h_N$。

现在你需要向其中储水，柱状图的容量定义为使得水的结构“稳定”时最多所能储水的量。即水在重力作用下不会流动。下图为一个稳定的例子。

![](https://cdn.luogu.com.cn/upload/image_hosting/7tnaf06j.png)

具体来说，我们设从左至右每一列上水的高度为 $v_1,v_2,\dots,v_N$。记 $s_i=h_i+v_i$ ，当满足下列条件时为稳定状态：

- 对于任意的 $i\geq2$，当$v_i>0$ 时，有$s_i\le s_{i-1}$；

- 对于任意的 $i\le N-1$，当$v_i>0$ 时，有$s_i\le s_{i+1}$；

- $v_1=v_N=0$。

现在你需要选择一个 $1\sim N$ 的排列作为柱子 $h_1,h_2,\dots,h_N$ 的高度，使得柱状图的容量为 $X$。如果不存在，则输出 `-1`。如果有多种方案，输出任意一种即可。


## 输入格式

输入一行两个整数 $N,X$。
## 输出格式

如果方案不存在，输出 `-1`；

否则输出一行 $N$个整数，为 $h_1,h_2,\dots,h_N$。**输出任意一种方案即可，本题使用 SPJ。**
## 样例

### 样例输入 #1
```
3 1
```
### 样例输出 #1
```
3 1 2
```
### 样例输入 #2
```
4 1
```
### 样例输出 #2
```
4 3 1 2
```
### 样例输入 #3
```
8 17
```
### 样例输出 #3
```
6 2 3 1 8 4 5 7
```
## 提示

#### 样例解释

##### 样例 $1$

$v_1=0,v_2=1,v_3=0$。

##### 样例 $2$

$v_1=0,v_2=0,v_3=1,v_4=0$。

##### 样例 $3$

此样例与题图所对应。

#### 数据规模与约定

对于 $100\%$ 的数据，$1\le N\le 10^6$，$1\le X\le 10^{15}$。

#### 说明

**题目译自 [COCI2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #5](https://hsin.hr/coci/archive/2015_2016/contest5_tasks.pdf) *T4 POPLAVA***。


---

---
title: "[BalticOI 2010] Matching Bins (Day2)"
layout: "post"
diff: 普及/提高-
pid: P6807
tag: ['2010', 'BalticOI（波罗的海）']
---
# [BalticOI 2010] Matching Bins (Day2)
## 题目描述

给定一行 $N$ 个整数 $A_1,A_2,\dots,A_N$。 $M=\max\{A_1,A_2,\dots A_N\}$。

你需要找到一个最大的整数 $K$，使得从左至右共 $K$ 个数都小于接下来的 $K$ 个数。
## 输入格式

输入第一行两个整数 $M,N$，表示数列中的最大数和数的个数。

第二行 $N$ 个整数 $A_1,A_2,\dots,A_N$。
## 输出格式

输出一行一个整数，为最大的 $K$。
## 样例

### 样例输入 #1
```
5 10
2 2 1 4 3 2 5 4 2 3
```
### 样例输出 #1
```
4
```
## 提示

对于 $100\%$ 的数据，保证 $1\le M\le 2\times 10^3$，$1\le N\le 2\times 10^4$，$1\le A_i\le M$。

----

**题目译自 [BalticOI 2010](https://www.luogu.com.cn/problem/U125995) [Day2](https://boi.cses.fi/files/boi2010_day2.pdf) *T1 Matching Bins***。


---

---
title: "onu"
layout: "post"
diff: 普及/提高-
pid: P6851
tag: ['Special Judge', 'O2优化', '洛谷月赛']
---
# onu
## 题目背景

小 C 和小 D 是好朋友。他们正在尝试一种全新的牌类游戏——onu！
## 题目描述

为了增加一点趣味性，小 C 和小 D 每人买了 $v$ 颗糖用来当作筹码。

onu 的规则是这样的：

游戏共 $m$ 轮，由两人进行，一位先手，一位后手。在这里，我们默认先手的玩家是小 C，而后手的玩家是小 D。

在最开始时，小 C 会得到 $m$ 张牌，每张牌有其对应的花色、点数。而小 D 会得到 $n$ 张牌。

每一轮开始时，小 C 会打出一张牌，放在桌面上展示给小 D 看。

在此之后，小 D 需要跟牌，即打出他手上的一张牌，且该张牌必须满足其花色与小 C 打出的牌相同。若小 D 没有满足条件的牌或者是他**选择弃权（也就是说，可以选择当前回合是否打出牌）**，弃掉小 C 打出的牌后跳过该轮，视为小 D 败。

在小 D 打出满足要求的牌后，进行一次拼点，也即比较小 C 和小 D 打出的牌的点数：如果小 D 出的牌的点数**大于等于**小 C 的牌的点数，则小 D 胜，否则小 D 败。容易知道，这样不会出现平局的情况。

最后，胜的一方会从败的一方拿走 $c$ 颗糖，且双方均需弃掉打出的牌，并会**再从商店买等于自己打出的牌的点数颗糖**。例如小 C 和小 D 打的点数分别是 $3$ 和 $5$，那么小 C 会去购买 $3$ 颗糖，小 D 购买 $5$ 颗。

为了不破坏两人间的友好关系，不出现一方被另一方完全赢光的情况，他们在最开始买糖时，已经约定好了 $v \ge c \times m$。

现在，小 D 通过一些神秘手段，知道了小 C 在这 $m$ 轮中打出的所有牌，他希望在 $m$ 轮游戏进行之后，让自己的糖数尽量多。你可以帮他找到最优的方案吗？
## 输入格式

第一行四个正整数表示 $n, m, c, v$，含义如题目描述所示。

接下来 $n$ 行中，第 $i$ 行每行两个正整数 $a _i, b _i$，表示了小 D 一开始拥有的第 $i$ 张牌的花色、点数。

接下来 $m$ 行中，第 $i$ 行每行两个正整数 $a _i, b _i$，表示小 C 第 $i$ 轮会打出的牌的花色、点数。

注意可能会有花色点数均相同的牌。
## 输出格式

输出共 $m + 1$ 行。

第一行输出一个正整数，表示在最优方案中，小 D 最多能剩余的糖数。

接下来 $m$ 行中，第 $i$ 行输出一行一个正整数，表示小 D 在第 $i$ 轮打出的牌的编号。如果小 D 跳过了该轮，输出 `-1`。

**本题采用 Special Judge，如果有多种最优方案，输出任意一个即可。**
## 样例

### 样例输入 #1
```
3 3 1 4
3 5
1 2
2 6
1 6
3 5
1 4
```
### 样例输出 #1
```
10
2
1
-1
```
### 样例输入 #2
```
1 2 1 5
1 5
1 8
1 4
```
### 样例输出 #2
```
10
-1
1
```
## 提示

#### 「样例 1 解释」

以 $(a, b)$ 来表示一张花色为 $a$，点数为 $b$ 的牌。

一开始，小 D 有 $4$ 颗糖。小 C 会依次打出 $(1, 6), (3, 5), (1, 4)$ 三张牌。

一种最优的方案是：

第一轮，小 C 打出第一张牌 $(1, 6)$，小 D 打出第二张牌 $(1, 2)$，小 D 负，被拿走 $1$ 颗糖，购买 $2$ 颗糖。此时其有 $5$ 颗糖。

第二轮，小 C 打出 $(3, 5)$，小 D 打出 $(3, 5)$，由于点数**大于等于**小 C 的牌，所以小 D 胜，拿到 $1$ 颗糖，购买 $5$ 颗糖。此时其有 $11$ 颗糖。

第三轮，小 C 打出 $(1, 4)$。由于小 D 在第一轮已经打出过第二张牌 $(1, 2)$ 了，所以没有牌能打，输出 $-1$ 并判小 D 负，被拿走 $1$ 颗糖，此时其有 $10$ 颗糖。

#### 「样例 2 解释」

最开始有 $5$ 颗糖。

第一轮时小 C 打出 $(1, 8)$，小 D 选择弃权，败，于是剩下了 $5 - 1 = 4$ 颗糖；

第二轮时小 C 打出 $(1, 4)$，小 D 打出 $(1, 5)$，胜，得到 $5 + 1$ 颗糖，故最终小 D 有 $10$ 颗糖。

----

#### 「Special Judge 说明」

**请认真阅读输出格式**。

每个测试点仅有 $0$ 分和满分的区别。如果你的输出出现了以下情况，将会被判为 $0$ 分：

- 输出格式不符，如没有正确换行，输出了一些奇奇怪怪的字符等。
- 输出的最优糖果数与标准答案不同。
- 打牌的方案不合法，即不能打出已经弃掉的牌，也不能打出花色与小 C 打出的牌不相同的牌。
- 按照你所输出的方案打完牌后，小 D 的剩余糖果数与你第一行所输出的数字不同。

---

#### 「数据范围」

**本题采用捆绑测试**。

- Subtask 1(10 points)：$n, m \le 5$；
- Subtask 2(30 points)：$n, m \le 1000$；
- Subtask 3(20 points)：$c = 0$；
- Subtask 4(20 points)：$a _i = 1$；
- Subtask 5(20 points)：无特殊限制。

所有数据保证 $1 \le n, m, a _i, b _i\le 10 ^5$，$0 \le c \le 10 ^5$，$c \times m \le v \le 10 ^{12}$。


---

---
title: "[ICPC 2017 WF] Need for Speed"
layout: "post"
diff: 普及/提高-
pid: P6933
tag: ['2017', 'Special Judge', 'ICPC']
---
# [ICPC 2017 WF] Need for Speed
## 题目描述

![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14637/1.png)

Sheila is a student and she drives at ypical student car: it is old, slow, rusty, and falling apart. Recently,the needle on the speedometer fell off. She glued it back on, but she might have placed it at the wrong angle. Thus, when the speedometer reads $s$,her true speed is $s+c$, where $c$ is an unknown constant(possibly negative).

Sheila made a careful record of a recent journey and wants to use this to compute $c$ . The journey consisted of $n$ segments. In the $i^{th}$ segment she traveled a distance of $d_{i}$ and the speedometer read $s_{i}$ for the entire segment. This whole journey took time $t$ . Help Sheila by computing $c$ .

Note that while Sheila's speedometer might have negative readings, her true speed was greater than zero for each segment of the journey.


## 输入格式



The first line of input contains two integers $n (1 \le n \le 1 000)$ , the number of sections in Sheila's journey, and $t (1 \le t \le 10^{6}),$ the total time. This is followed by $n$ lines, each describing one segment of Sheila's journey. The $i^{th}$ of these lines contains two integers $d_{i} (1 \le d_{i} \le 1 000)$ and $s_{i} (|s_{i}| \le 1 000)$ , the distance and speedometer reading for the $i^{th}$ segment of the journey. Time is specified in hours, distance in miles, and speed in miles per hour.


## 输出格式



Display the constant $c$ in miles per hour. Your answer should have an absolute or relative error of less than $10^{−6}.$


## 样例

### 样例输入 #1
```
3 5
4 -1
4 0
10 3

```
### 样例输出 #1
```
3.000000000

```
### 样例输入 #2
```
4 10
5 3
2 2
3 6
3 1

```
### 样例输出 #2
```
-0.508653377

```
## 提示

Time limit: 1 s, Memory limit: 512 MB. 

spj provider:@[shenyouran](/user/137367).
## 题目翻译

在你面前的是一个坏掉的速度表，当显示速度为 $s$ km/h 时，实际速度为 $s+c$ km/h，$c$ 为固定的常数，为任意实数。你打算计算这个 $c$，于是准备用这个速度表记录速度。现在你要走 $n$ 段路程，第 $i$ 段路程距离为 $d_i$ 米，显示的指数为 $s_i$ km/h，总共路程用了 $t$ 小时。求 $c$ 的值。

你的答案应该与正确答案的差在 $10^{-6}$ 以内。

$1 \le n \le 1000$，$1 \le t \le 10^6$，$1 \le d_i \le 1000$，$|s_i| \le 1000$。

翻译者：一只书虫仔


---

---
title: "[ICPC 2017 WF] Secret Chamber at Mount Rushmore"
layout: "post"
diff: 普及/提高-
pid: P6937
tag: ['2017', 'ICPC']
---
# [ICPC 2017 WF] Secret Chamber at Mount Rushmore
## 题目描述



![](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/14641/1.png)

By now you have probably heard that there is a spectacular stone sculp-ture featuring four famous U.S. presidents at Mount Rushmore.  How-ever, very few people know that this monument contains a secret cham-ber. This sounds like something out of a plot of a Hollywood movie, butthe chamber really exists.  It can be found behind the head of AbrahamLincoln and was designed to serve as a Hall of Records to store impor-tant historical U.S. documents and artifacts.  Historians claim that theconstruction of the hall was halted in 1939 and the uncompleted cham-ber was left untouched until the late 1990s,  but this is not the wholetruth.

In $1982$ , the famous archaeologist $S$ . Dakota Jones secretly visited the monument and found that the chamber actually was completed, but it was kept confidential. This seemed suspicious and after some poking around, she found a hidden vault and some documents inside. Unfortunately, these documents did not make any sense and were all gibberish. She suspected that they had been written in a code, but she could not decipher them despite all her efforts.

Earlier this week when she was in the area to follow the ACM-ICPC World Finals, Dr. Jones finally discovered the key to deciphering the documents, in Connolly Hall of $SDSM&T$ . She found a document that contains a list of translations of letters. Some letters may have more than one translation, and others may have no translation. By repeatedly applying some of these translations to individual letters in the gibberish documents, she might be able to decipher them to yield historical U.S . documents such as the Declaration of Independence and the Constitution. She needs your help.

You are given the possible translations of letters and a list of pairs of original and deciphered words. Your task is to verify whether the words in each pair match. Two words match if they have the same length and if each letter of the first word can be turned into the corresponding letter of the second word by using the available translations zero or more times.


## 输入格式



The first line of input contains two integers $m (1 \le m \le 500)$ and $n (1 \le n \le 50)$ , where $m$ is the number of translations of letters and $n$ is the number of word pairs. Each of the next $m$ lines contains two distinct space-separated letters a and $b$ , indicating that the letter a can be translated to the letter $b$ . Each ordered pair of letters $(a , b)$ appears at most once. Following this are $n$ lines, each containing a word pair to check. Translations and words use only lowercase letters $‘a'-‘z',$ and each word contains at least $1$ and at most $50$ letters.


## 输出格式



For each pair of words, display yes if the two words match, and no otherwise.


## 样例

### 样例输入 #1
```
9 5
c t
i r
k p
o c
r o
t e
t f
u h
w p
we we
can the
work people
it of
out the

```
### 样例输出 #1
```
yes
no
no
yes
yes

```
### 样例输入 #2
```
3 3
a c
b a
a b
aaa abc
abc aaa
acm bcm

```
### 样例输出 #2
```
yes
no
yes

```
## 提示

Time limit: 1 s, Memory limit: 512 MB. 


## 题目翻译

一共有 $m$ 种字母的转换关系，每一种转换关系表示为，可以从小写字母 $a$ 转化为小写字母 $b$，转换关系单向且不重复。现在给定 $n$ 组询问，每一组询问字符串 $s$ 是否能通过转换关系变为 $t$。

$1 \le m \le 500$，$1 \le n \le 50$，$a,b$ 只为小写字母，$s,t$ 只包含小写字母，长度在 $[1,50]$ 内。

翻译者：一只书虫仔


---

---
title: "[ICPC 2018 WF] Comma Sprinkler"
layout: "post"
diff: 普及/提高-
pid: P6942
tag: ['2018', 'ICPC']
---
# [ICPC 2018 WF] Comma Sprinkler
## 题目描述

As practice will tell you, the English rules for comma placement are complex, frustrating, and often ambiguous. Many people, even the English, will, in practice, ignore them, and, apply custom rules, or, no rules, at all.

Doctor Comma Sprinkler solved this issue by developing a set of rules that sprinkles commas in a sentence with no ambiguity and little simplicity. In this problem you will help Dr. Sprinkler by producing an algorithm to automatically apply her rules.

Dr. Sprinkler's rules for adding commas to an existing piece of text are as follows:

If a word anywhere in the text is preceded by a comma, find all occurrences of that word in the text, and put a comma before each of those occurrences, except in the case where such an occurrence is the first word of a sentence or already preceded by a comma.

If a word anywhere in the text is succeeded by a comma, find all occurrences of that word in the text, and put a comma after each of those occurrences, except in the case where such an occurrence is the last word of a sentence or already succeeded by a comma.

Apply rules $1$ and $2$ repeatedly until no new commas can be added using either of them.

As an example, consider the text

please sit spot. sit spot, sit. spot here now here.

Because there is a comma after spot in the second sentence, a comma should be added after spot in the third sentence as well (but not the first sentence, since it is the last word of that sentence). Also, because there is a comma before the word sit in the second sentence, one should be added before that word in the first sentence (but no comma is added before the word sit beginning the second sentence because it is the first word of that sentence). Finally, notice that once a comma is added after spot in the third sentence, there exists a comma before the first occurrence of the word here. Therefore, a comma is also added before the other occurrence of the word here. There are no more commas to be added so the final result is

please, sit spot. sit spot, sit. spot, here now, here.


## 输入格式



The input contains one line of text, containing at least $2$ characters and at most $1 000 000$ characters. Each character is either a lowercase letter, a comma, a period, or a space. We define a word to be a maximal sequence of letters within the text. The text adheres to the following constraints:

The text begins with a word.

Between every two words in the text, there is either a single space, a comma followed by a space, or a period followed by a space (denoting the end of a sentence and the beginning of a new one).

The last word of the text is followed by a period with no trailing space.


## 输出格式



Display the result after applying Dr. Sprinkler's algorithm to the original text.


## 样例

### 样例输入 #1
```
please sit spot. sit spot, sit. spot here now here.

```
### 样例输出 #1
```
please, sit spot. sit spot, sit. spot, here now, here.

```
### 样例输入 #2
```
one, two. one tree. four tree. four four. five four. six five.

```
### 样例输出 #2
```
one, two. one, tree. four, tree. four, four. five, four. six five.

```
## 提示

Time limit: 8 s, Memory limit: 1024 MB. 


## 题目翻译

给定一些文本，对他添加逗号。

添加的规则为：

1. 找到一个单词前面有逗号，就在文本中的其他这个单词前添加一个逗号，除非这个单词是句子的第一个单词，或单词前已经有逗号了。
2. 找到一个单词后面有逗号，就在文本中的其他这个单词后添加一个逗号，除非这个单词是句子的最后一个单词，或单词后已经有逗号了。
3. 重复 1 和 2 直到不能填加逗号。

$2 \le $ 文本长度 $ \le 10^6$。

文本满足以下特征：

- 文本开头为一个单词；
- 两个单词之间为一个空格，或者一个逗号一个空格，或者一个句号一个空格；
- 文本末尾为一个句号。

翻译者：一只书虫仔


---

---
title: "[NEERC 2017] Easy Quest"
layout: "post"
diff: 普及/提高-
pid: P6956
tag: ['2017', 'Special Judge', 'ICPC']
---
# [NEERC 2017] Easy Quest
## 题目描述



A young hero is starting his heroic life. The wise wizard suggested him an easy first quest. During this quest our young hero meets $n$ magical creatures, in specific order. In order to help the young hero, the wizard gave him a clue -- a list of $n$ integers $a_{i}.$

If $a_{i}$ is positive, then the i-th magical creature is benevolent and gives to our hero one magical item of type $a_{i}.$ The hero can keep several items of the same type.

If $a_i$ is negative, then the i-th magical creature is evil and in order to defeat it the young hero needs one magical item of type $−a_{i}.$ All magical items are fragile and can be used only once.

If $a_{i}$ is zero, then the i-th creature is a unicorn. It gives the hero any magical item he asks for, but only one.

Your task is to help the young hero to finish the first quest, defeating all enemies on the way, or say that it is impossible.


## 输入格式



The first line of input contains one integer $n (1 \le n \le 1000)$ . The second line contains $n$ integers $a_{i} (−1000 \le a_{i} \le 1000)$ .


## 输出格式



If it is impossible to defeat all enemies, then output one string `No`. If it is possible, then output string `Yes`, and in the next line output the types of items the hero should ask the unicorns for, in order they meet during the quest. Types must be integers in range from $1$ to $1000$ inclusive. If there are several solutions, output any of them.


## 样例

### 样例输入 #1
```
10
1 0 -4 0 0 -1 -3 0 -1 -2

```
### 样例输出 #1
```
Yes
4 1 3 2

```
### 样例输入 #2
```
5
5 8 0 -6 -3

```
### 样例输出 #2
```
No

```
### 样例输入 #3
```
3
2 -2 -2

```
### 样例输出 #3
```
No

```
## 提示

Time limit: 3 s, Memory limit: 512 MB. 

spj provider:@[shenyouran](/user/137367).
## 题目翻译

一个英雄进行了一次探索。在这次探索中，英雄按特定顺序遇到了 $n$ 个魔法生物，第 $i$ 个魔法生物对应 $a_i$。

当 $a_i$ 为正数时，第 $i$ 个魔法生物会给英雄提供一个为 $a_i$ 的魔法物品。

当 $a_i$ 为负数时，第 $i$ 个魔法生物需要英雄消耗一个为 $-a_i$ 的魔法物品。

当 $a_i$ 为 $0$ 时，第 $i$ 个魔法生物可以给英雄提供一个任意的魔法物品。

你需要回答英雄是否可以完成这次探索（经过所有魔法生物），如果可以，请回答 $a_i$ 为 $0$ 魔法生物应该为英雄提供哪种魔法物品。


---

---
title: "[NEERC 2015] Generators"
layout: "post"
diff: 普及/提高-
pid: P6979
tag: ['2015', 'Special Judge', 'ICPC']
---
# [NEERC 2015] Generators
## 题目描述



Little Roman is studying linear congruential generators -- one of the oldest and best known pseudorandom number generator algorithms. Linear congruential generator (LCG) starts with a non-negative integer number $x_{0}$ also known as seed and produces an infinite sequence of non-negative integer numbers $x_{i} (0 \le x_{i} < c)$ which are given by the following recurrence relation:

$x_{i+1} = (ax_{i} + b)$ mod $c$

here a , $b$ , and $c$ are non-negative integer numbers and $0 \le x_{0} < c$ .

Roman is curious about relations between sequences generated by different LCGs. In particular, he has $n$ different LCGs with parameters $a^{(j)}, b^{(j)},$ and $c^{(j)}$ for $1 \le j \le n$ , where the j-th LCG is generating a sequence $x_{i}^{(j)}.$ He wants to pick one number from each of the sequences generated by each LCG so that the sum of the numbers is the maximum one, but is not divisible by the given integer number $k$ .

Formally, Roman wants to find integer numbers $t_{j} \ge 0$ for $1 \le j \le n$ to maximize $s = Σ^{n}_{j=1} x_{t_{j}}^{(j)}  subject$ to constraint that $s$ mod $k ≠ 0$ .


## 输入格式



The first line of the input file contains two integer numbers $n$ and $k (1 \le n \le 10 000 , 1 \le k \le 10^{9}).$ The following $n$ lines describe LCGs. Each line contains four integer numbers $x_{0}^{(j)}, a^{(j)}, b^{(j)},$ and $c^{(j)} (0 \le a^{(j)}, b^{(j)} \le 1000 , 0 \le x_{0}^{(j)} < c^{(j)} \le 1000)$ .


## 输出格式



If Roman's problem has a solution, then write on the first line of the output file a single integer $s$ -- the maximum sum not divisible by $k$ , followed on the next line by $n$ integer numbers $t_{j} (0 \le t_{j} \le 10^{9})$ specifying some solution with this sum.

Otherwise, write to the output file a single line with the number $−1$ .


## 样例

### 样例输入 #1
```
2 3
1 1 1 6
2 4 0 5

```
### 样例输出 #1
```
8
4 1

```
### 样例输入 #2
```
2 2
0 7 2 8
2 5 0 6

```
### 样例输出 #2
```
-1

```
## 提示

Time limit: 1 s, Memory limit: 256 MB. 


## 题目翻译

### 题目描述

罗曼在学习线性同余发生器——最古老，也是最广为人知的伪随机数生成算法之一。线性同余发生器（LCG）以 $x_0$ 为随机种子，生成很多非负整数 $x_i$ ,它遵循以下规则：

给定非负整数 $a,b,c\space(0≤x_0<c)$ ，
$x_{i+1} = (ax_i+b)\space mod \space c$

罗曼很好奇由不同LCG产生的序列之间的关系。特别地，他有 $n$ 个不同的LCG，含有参数 $a^{(j)}, b^{(j)}, c^{(j)}\space(1≤j≤n)$。第 $j$ 个LCG会生成一个序列 $x_i^{(j)}$ 。

他希望能从每个LCG产生的序列中挑出一个数，使他们的和最大，且不被给定的 $k$ 整除。

**格式化一点来说**，他希望找到整数 $t_j \space(t_j>0,1≤j≤n)$ ，使$s=\sum\limits_{j=1}^nx_{t_j}^{(j)}$最大，且$s\not\equiv0(mod\space k)$。

### 输入格式 

第 $1$ 行包括两个整数$n,k$。

$(1≤n≤10000,1≤k≤10^9)$


接下来 $n$ 行描述LCG，每行包括4个整数：$x_0^{(j)},a^{(j)}, b^{(j)}, c^{(j)}$ 。

$(0≤a^{(j)}, b^{(j)}≤1000,0≤x_0^{(j)}<c^{(j)}≤1000)$

### 输出格式 

如果有解，第 $1$ 行输出 $s$，第 $2$ 行输出 $n$ 个 $t_j$ 。

$(0≤t_j≤10^9)$ 。

如果无解，输出 $-1$ 。

### 说明/提示
时间限制：1秒

空间限制：256MB


---

---
title: "[NEERC 2014] Alter Board"
layout: "post"
diff: 普及/提高-
pid: P6985
tag: ['2014', 'Special Judge', 'ICPC']
---
# [NEERC 2014] Alter Board
## 题目描述

Little Dima gave his little brother Petya interactive chess board of size $n \times m$ as a present. There are many awesome features of this board but one is Petya's favorite. He can choose any rectangle formed by board squares and perform an inversion. Every white cell in the inverted rectangle becomes black and every black one becomes white.

In the initial state the board is colored in chess style, namely every cell is either black or white and every two cells that share a side have different colors. Little Petya wants to perform several inversions described above to turn all cells into the same color. He is impatient, so he asks you to provide him with instructions to do it with the minimal number of inversions.
## 输入格式

Contains two integers $n$ and $m (1 \le n , m \le 50) -$ the number of rows and columns on the board, respectively.
## 输出格式


The first line must contain the number of inversions $k$ required to transform the board.

The following $k$ lines must describe inversions, one per line. Each line must contains $4$ integers $-$ row and column of one of the corners of the corresponding rectangle and row and column of the opposite corner. Any two opposite corners can be used to specify a rectangle.

Rows of the board are numbered from $1$ to $n$ . Columns of the board are numbered from $1$ to $m$ . 
## 样例

### 样例输入 #1
```
2 2

```
### 样例输出 #1
```
2
1 1 1 1
2 2 2 2

```
## 提示

Time limit: 1 s, Memory limit: 256 MB. 

spj provider:@[shenyouran](/user/137367).
## 题目翻译

给出了一个 $n$ 行 $m$ 列的国际象棋棋盘。每次可以选择一个矩形区域，将里面的所有格子的颜色翻转。问最少需要多少次才能让所有格子变成同色？请输出一组合法的翻转方案。



---

---
title: "[NEERC 2014] Joke with permutation"
layout: "post"
diff: 普及/提高-
pid: P6994
tag: ['2014', 'Special Judge', 'ICPC']
---
# [NEERC 2014] Joke with permutation
## 题目描述

Joey had saved a permutation of integers from $1$ to $n$ in a text file. All the numbers were written as decimal numbers without leading spaces.

Then Joe made a practical joke on her: he removed all the spaces in the file.

Help Joey to restore the original permutation after the Joe's joke! 
## 输入格式

The input file contains a single line with a single string -- the Joey's permutation without spaces.

The Joey's permutation had at least $1$ and at most $50$ numbers. 
## 输出格式

Write a line to the output file with the restored permutation. Don’t forget the spaces!

If there are several possible original permutations, write any one of them.
## 样例

### 样例输入 #1
```
4111109876532

```
### 样例输出 #1
```
4 1 11 10 9 8 7 6 5 3 2

```
## 提示

Time limit: 1 s, Memory limit: 256 MB. 

Thanks to checker provider:@[Arcturus1350
](/user/57699).
## 题目翻译

给出数字之间无分隔符的 $1\dots n$ 的排列构成的字符串，将其还原为合法的排列。

保证 $n\leq 50$，输入数据均保证有解。如有多解输出任一即可。

样例可能有助于你更好理解题意。


---

---
title: "[NWRRC 2017] Boolean Satisfiability"
layout: "post"
diff: 普及/提高-
pid: P7020
tag: ['2017', 'ICPC']
---
# [NWRRC 2017] Boolean Satisfiability
## 题目描述



Boolean satisfiability problem (SAT) is known to be a very hard problem in computer science. In this problem you are given a Boolean formula, and you need to find out if the variables of a given formula can be consistently replaced by the values true or false in such a way that the formula evaluates to true. SAT is known to be NP-complete problem. Moreover, it is NP-complete even in case of $3-CNF$ formula $(3-SAT).$ However, for example, SAT problem for $2-CNF$ formulae $(2-SAT)$ is in $P$ .

$#SAT$ is the extension of SAT problem. In this problem you need to check if it is possible, and count the number of ways to assign values to variables. This problem is known to be $#P-complete$ even for $2-CNF$ formulae. We ask you to solve $#1-DNF-SAT,$ which is $#SAT$ problem for $1-DNF$ formulae.

You are given a Boolean formula in $1-DNF$ form. It means that it is a disjunction (logical or) of one or more clauses, each clause is exactly one literal, each literal is either variable or its negation (logical not).

Formally:

$〈formula〉 ::= 〈clause〉 | 〈formula〉 ∨ 〈clause〉$

$〈clause〉 ::= 〈literal〉$

$〈literal〉 ::= 〈variable〉 | ¬ 〈variable〉$

$〈variable〉 ::=$ A . . . $Z |$ a . . . $z$

Your task is to find the number of ways to replace all variables with values true and false (all occurrences of the same variable should be replaced with same value), such that the formula evaluates to true.


## 输入格式



The only line of the input file contains a logical formula in $1-DNF$ form (not longer than $1000$ symbols). Logical operations are represented by $‘|'$ (disjunction) and $‘ \sim ' (negatio_n).$ The variables are $‘A'$ . . . $‘Z'$ and $‘a'$ . . . $‘z'$ (uppercase and lowercase letters are different variables). The formula contains neither spaces nor other characters not mentioned in the grammar.


## 输出格式



Output a single integer -- the answer for $#SAT$ problem for the given formula.


## 样例

### 样例输入 #1
```
a

```
### 样例输出 #1
```
1

```
### 样例输入 #2
```
B|~B

```
### 样例输出 #2
```
2

```
### 样例输入 #3
```
c|~C

```
### 样例输出 #3
```
3

```
### 样例输入 #4
```
i|c|p|c

```
### 样例输出 #4
```
7

```
## 提示

Time limit: 3 s, Memory limit: 512 MB. 


## 题目翻译

给定一个由大小写字母（变量），``|`` 和 ``~`` 组成的布尔代数式，求对于给定的变量，有多少种方案使得给定的代数式值为 ``True`` 。

注：

``a|b`` 表示 $a\vee b$ , 也就是 C++ 中的 ``a || b`` 。

``~a`` 表示 $\neg a$，也就是 C++ 中的 ``(!a)`` 。

变量只有可能由单个字母构成。


---

---
title: "「MCOI-03」村国"
layout: "post"
diff: 普及/提高-
pid: P7043
tag: ['O2优化', '洛谷月赛']
---
# 「MCOI-03」村国
## 题目背景

$\texttt{What did this player dream?}$

他梦见了什么？

$\texttt{This player dreamed of sunlight and trees.Of fire and water.}$

他梦见了阳光与树木。梦见了火与水。

$\texttt{It dreamed it created. And it dreamed it destroyed. It dreamed it hunted,}$ 
$\texttt{and was hunted. It dreamed of shelter.}$

他梦见他的创造，亦梦见他毁灭。它梦见他在狩猎，亦梦见被猎捕。他梦见温馨的居所。

$\texttt{Hah, the original interface. A million years old, and it still works.But}$ 
$\texttt{ what true structure did this player create, in the reality behind the screen?}$

哎，那原始的界面。经历百万年的岁月，它依然在工作。只是他在屏幕后的真实里，到底创造了什么真实的世界呢？
## 题目描述

C 国一共有 $N$ 个村庄，$N-1$ 条道路。这些道路都可以双向通行。保证小 S 可以从一座村庄到其他任何一座村庄。这 $N$ 个村庄编号为 $1$ 到 $N$。

刚开始小 S 对第 $i$ 个村庄的好感值为 $A_i$。小 S 的假期一共有 $M$ 天，他会在 C 国旅行一共 $M$ 天。每一天他会选择来到当前好感值最高的村庄。如果有好感值相同的村庄，他会选择编号最小的村庄。假设这一天他来到村庄 $X$，那么这一天结束后，与村庄 $X$ 直接相邻所有村庄的好感值都会增加 $1$。即能从 $X$ 出发仅经过一条道路到达的村庄好感值会增加 $1$。因为小 S 已经在村庄 $X$ 待过一天了，所以这一天结束后村庄 $X$ 的好感值并不会增加。

现在小 S 想要知道经过 $M$ 天的旅行后好感值最高的村庄。

如果有多个好感值最高的村庄，输出编号最小的。
## 输入格式

**本题单个测试点包含多组测试数据**。        
第一行一个正整数 $T$ 表示数据组数。      
对于每组数据：      
第一行包括两个正整数 $N,M$，表示村庄个数和旅行天数。     
接下来一行 $N$ 个整数，第 $i$ 个整数表示第 $i$ 座村庄的好感值 $A_i$。        
接下来 $N-1$ 行。每行两个整数 $x,y$ 表示村庄 $x$ 和村庄 $y$ 之间有一条双向通行的道路。
## 输出格式

一个整数表示 $M$ 天结束后好感值最高的村庄的编号。如果有多个好感值最高的村庄，输出编号最小的。
## 样例

### 样例输入 #1
```
2
2 3
2 6
1 2
3 5
2 6 4
1 3
2 3
```
### 样例输出 #1
```
2
3
```
## 提示

#### 样例说明

对于第一组数据，小 S 在 $2$ 号村庄旅行了 $3$ 天，结束时村庄 $1,2$ 的好感值分别为 $5,6$。所以答案输出 $2$。

对于第二组数据，结束时三个村庄的好感值分别为 $3,7,8$，所以答案输出 $3$。

#### 数据规模与约定

对于 $100\%$ 的数据，$1 \le N\le 2\times10^6$，$1 \le M\le10^{18}$，$1 \le A_i\le2^{31}-1$，$1 \le T\le10$。

| 测试点编号 | $A_i\le$ | $\sum N \le$ | $M \le $ | 测试点分值 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $\rm 1$ | $10$ | $20$ | $10$ | $5$ |
| $\rm 2$ | $10^2$ | $2 \times 10^2$ | $10^2$ | $10$ |
| $\rm 3$ | $10^3$ | $2 \times 10^3$ | $10^3$ | $15$ |
| $\rm 4$ | $10^5$ | $2 \times 10^5$ | $10^5$ | $25$ |
| $\rm 5$ |  | $2 \times 10^6$ |  | $45$ |

#### 提示

**本题输入量较大，请使用较快的读入方式。**


---

---
title: "[NWRRC 2015] Distribution in Metagonia"
layout: "post"
diff: 普及/提高-
pid: P7051
tag: ['2015', 'Special Judge', 'ICPC']
---
# [NWRRC 2015] Distribution in Metagonia
## 题目描述



There are one hundred noble families in the country of Metagonia, and each year some of these families receive several ritual cubes from the Seer of the One. The One has several rules about cube distribution: if a family receives at least one cube, every prime divisor of the number of cubes received should be either $2$ or $3$ , moreover if one family receives a $> 0$ cubes and another family in the same year receives $b > 0$ cubes then a should not be divisible by $b$ and vice versa.

You are the Seer of the One. You know in advance how many cubes would be available for distribution for the next $t$ years. You want to find any valid distribution of cubes for each of these years. Each year you have to distribute all cubes available for that year.


## 输入格式



The first line of input file contains a single integer $t$ -- the number of years to come $(1 \le t \le 1000)$ . Each of the following $t$ lines contains a single integer $n_{i}$ -- the number of cubes to distribute in i-th year $(1 \le n_{i} \le 10^{18}).$


## 输出格式



For each year $i$ output two lines. The first line should contain $m_{i}$ -- the number of families that would receive at least one cube in i-th year $(1 \le m_{i} \le 100)$ . The second line should contain $m_{i}$ integers -- the number of cubes received by each family. The sum of these numbers should be equal to $n_{i}.$


## 样例

### 样例输入 #1
```
4
1
2
3
10

```
### 样例输出 #1
```
1
1
1
2
1
3
2
4 6

```
## 提示

Time limit: 2 s, Memory limit: 256 MB. 


## 题目翻译

在一个叫做 镁铊铬铌氩$ (Metagonia)$ 的国度中，有$100$个贵族家庭。

每年，这些贵族家庭都要收到来自先知之首的若干个典礼用的小方块。先知有一些分配小方块的规则：

1. 如果某年有一个家庭收到了小方块，那么这个家庭所收到的小方块的个数的质因数只能是$2$和$3$。

2. 如果某年有一个家庭收到了$a>0$个小方块，同年另一个家庭收到了$b>0$个小方块，那么$a$不整除$b$，$b$也不整除$a$。

现在，你作为先知之首，你知道你接下来的$t$年中，你每年有多少个小方块。你现在想要找到任意一个可行的方案，以便在接下来$t$年中能够进行按规则分配。

--------

第一行，包含一个正整数$t(1≤t≤1000)$。

接下来有$t$行，每行有一个正整数$n_i(1≤n_i≤10^{18})$，表示在第$i$年中，你可以用于支配的小方块个数。

--------

对于每年输出两行。第一行应包含一个数$m_i$,表示能够收到小方块的家庭的数目。

第二行有$m_i$个整数，代表每个家庭应该收到的小方块的个数。这些整数之和应该等于$n_i$。

---------

时间限制：$2s$

空间限制：$256MB$

翻译提供：@Trexmao


---

---
title: "[NWRRC 2013] Flight Boarding Optimization"
layout: "post"
diff: 普及/提高-
pid: P7084
tag: ['2013', 'ICPC']
---
# [NWRRC 2013] Flight Boarding Optimization
## 题目描述



Peter is an executive boarding manager in Byteland airport. His job is to optimize the boarding process. The planes in Byteland have $s$ rows, numbered from $1$ to $s$ . Every row has six seats, labeled A to $F$ .

![](/upload/images2/flgithseat.png)

There are $n$ passengers, they form a queue and board the plane one by one. If the i-th passenger sits in a row $r_{i}$ then the difficulty of boarding for him is equal to the number of passengers boarded before him and sit in rows $1$ . . . $r_{i}−1$ . The total difficulty of the boarding is the sum of difficulties for all passengers. For example, if there are ten passengers, and their seats are $6A, 4B, 2E, 5F, 2A, 3F, 1C, 10E, 8B, 5A,$ in the queue order, then the difficulties of their boarding are $0 , 0 , 0 , 2 , 0 , 2 , 0 , 7 , 7 , 5$ , and the total difficulty is $23$ .

To optimize the boarding, Peter wants to divide the plane into $k$ zones. Every zone must be a continuous range of rows. Than the boarding process is performed in $k$ phases. On every phase, one zone is selected and passengers whose seats are in this zone are boarding in the order they were in the initial queue. $ $

In the example above, if we divide the plane into two zones: rows $5-10$ and rows $1-4$ , then during the first phase the passengers will take seats $6A, 5F, 10E, 8B, 5A,$ and during the second phase the passengers will take seats $4B, 2E, 2A, 3F, 1C,$ in this order. The total difficulty of the boarding will be $6$ .

Help Peter to find the division of the plane into $k$ zones which minimizes the total difficulty of the boarding, given a specific queue of passengers.


## 输入格式



The first line contains three integers $n (1 \le n \le 1000) , s (1 \le s \le 1000)$ , and $k (1 \le k \le 50$ ; $k \le s)$ . The next line contains $n$ integers $r_{i} (1 \le r_{i} \le s)$ .

Each row is occupied by at most $6$ passengers.


## 输出格式



Output one number, the minimal possible difficulty of the boarding.


## 样例

### 样例输入 #1
```
10 12 2
6 4 2 5 2 3 1 11 8 5

```
### 样例输出 #1
```
6

```
## 提示

Time limit: 2 s, Memory limit: 256 MB. 


## 题目翻译

## 题目描述

Peter是 Byteland 机场的高级登机管理人员。他的工作是优化登机流程。Byteland 中的飞机有$s$行，编号从1到$s$。每排有六个座位，标有$A$到$F$。

有$n$名乘客，他们排成一队，一个接一个地登上飞机。如果第$i$位乘客坐在第$r_i$排，那么，他登机的难度等于在他前面登机的并且坐在第1......$r_i$ $-$1排的乘客人数之和。



登机的总难度是所有乘客的登机难度之和。例如，如果有十名乘客，他们的座位分别是$6A、4B、2E、5F、2A、3F、1C、10E、8B、5A$，按照排队顺序排列，那么他们登机的难度分别是$0、0、0、2、0、2、0、7、7、5$，总难度是$23$。

为了优化登机，Peter希望将飞机划分成$k$个区域。每个分区都必须是连续的行数。然后分成$k$段执行登机流程。在每个阶段，选择一个区域，座位在该区域的乘客将按照他们在初始队列中的顺序登机。

在上面的示例中，如果我们将平面划分为两个区域：第 $5-10$ 行和第$1-4$ 行，则在第一阶段，乘客将依次就座$6A、5F、10E、8B、5A$。在第二阶段，乘客将依次就座$4B、2E、2A、3F、1C$。登机的总难度为$6$。

帮助Peter找到将飞机划分为$k$个区域的方法，在给定特定乘客队列的情况下，将登机的总难度降至最低。

## 输入格式

第一行包括三个整数$n(1≤n≤1000)$,$s(1≤s≤1000)$和$k(1≤k≤1000)$

第二行包括$n$个整数$r_i(1≤r_i≤s)$ 



## 输出格式

输出一行一个数，最小的登机总难度


---

---
title: "「RdOI R1」序列(sequence)"
layout: "post"
diff: 普及/提高-
pid: P7128
tag: ['2020', 'Special Judge']
---
# 「RdOI R1」序列(sequence)
## 题目描述

有一序列 $x$ ，长度为 $q$ ，序列中的每个数只出现一次。

即：序列 $x$ 是 $1$ 到 $q$ 的一个排列。

对于序列 $x$ 的操作只有一种：对于一个数 $x_i$ ，你可以使其与 $x_{2i}$ 或 $x_{2i+1}$ 交换位置(如果它们存在的话)。

现在请你使序列 $x$ 变为一个升序序列，并按顺序输出你进行的操作。
## 输入格式

输入数据共 $2$ 行。

第 $1$ 行， $1$ 个正整数，$q$。

第 $2$ 行， $q$ 个正整数， $x_{1～q}$。
## 输出格式

输出数据共 $ans$ 行， $ans$ 表示你的操作次数。

第 $1$ ~ $ans$ 行，每行两个整数，$i$ ，$j$ ，表示交换 $x_i$ 和 $x_j$ 的位置 $(i < j)$。
## 样例

### 样例输入 #1
```
3
3 1 2
```
### 样例输出 #1
```
1 3
1 2
```
### 样例输入 #2
```
7
1 3 2 7 6 4 5
```
### 样例输出 #2
```
2 4
1 2
1 3
3 7
2 5
1 2
1 3
3 6
1 2
2 5
1 3
1 2
2 4
1 2
1 3
1 2
```
## 提示

【样例说明】

样例#1说明：

交换 $2$ 和 $3$ ，序列变为：$2,1,3$。

再交换 $2$ 和 $1$ ，序列变为：$1,2,3$。

【数据范围】

对于 $40\%$ 的数据，$3 \le q \le 2^{10}$。

对于 $100\%$ 的数据，$3 \le q \le 2^{17}$，$1 \le x_i \le q$。

【提示】

- 使用 Special Judge。
- $q = 2 ^ p - 1(p \in \mathbb{N}^*)$  
- 最多进行 $2q\times\lceil\log_2 q\rceil$ 次操作。
- 样例的输出数据只是众多方案中的一种。
- 因为是 `special judge` ，因此不提供附加样例。

---

【文件读入读出】**（模拟，提交代码时不需使用）**

- 文件名：`sequence.cpp`
- 读入文件名：`sequence.in`
- 读出文件名：`sequence.out`



---

---
title: "「dWoi R1」Sweet Fruit Chocolate"
layout: "post"
diff: 普及/提高-
pid: P7159
tag: []
---
# 「dWoi R1」Sweet Fruit Chocolate
## 题目背景

[事情来源 ……](https://www.bilibili.com/video/BV19Z4y1K7dH)

我们的东条妈妈在残害了梦野之后，还想继续她的事业，残害可怜的最原。她发现最原很喜欢吃甜甜的巧克力，另外还有一种东西叫做西西弗水果，他富含营养但没那么好吃，因此，她想把这些巧克力淋在西西弗水果上。
## 题目描述

东条把想淋的巧克力做成了一个巧克力喷泉树。巧克力喷泉树是一棵 $n$ 个节点的树。每个节点都有一个西西弗水果。对于每一个节点 $u$，你有两种选择：你可以在节点 $u$ 放置 $a_u$ 个水果，也可以一个水果都不放。然后，东条会在根节点往下淋巧克力汁。节点 $u$ 给最原带来的营养值是 $u$ 及其子树中所放置的西西弗水果的数量。东条想要知道，对于所有 $2^n$ 个放水果方案，最原所获得的营养值之和的总和是多少。答案对 $998244353$ 取余。

树的根节点为 $1$。
## 输入格式

第一行一个正整数 $n$。

第二行 $n$ 个正整数 $a_i$。

后面 $n-1$ 行每行两个正整数 $u,v$ $(1\le u,v\le n)$，代表有树中一条边 $(u,v)$。
## 输出格式

一行，一个整数代表答案。
## 样例

### 样例输入 #1
```
3
1 1 2
1 2
2 3
```
### 样例输出 #1
```
36
```
## 提示

#### 样例 1 解释

用 $S$ 表示选中状态

- $S=000$ 贡献 $0$
- $S=001$ 贡献 $1$
- $S=010$ 贡献 $2$
- $S=011$ 贡献 $3$
- $S=100$ 贡献 $6$
- $S=101$ 贡献 $7$
- $S=110$ 贡献 $8$
- $S=111$ 贡献 $9$

#### 数据规模与约定

对于 $20\%$ 的数据，满足 $n\le 20$。

对于另外 $30\%$ 的数据，满足 $u=v-1$。

对于 $100\%$ 的数据，满足 $2\le n\le 10^6$，$1 \le a_i \le 10^9$。


---

---
title: "[COCI 2014/2015 #4] PŠENICA"
layout: "post"
diff: 普及/提高-
pid: P7175
tag: ['2014', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #4] PŠENICA
## 题目描述

Mirko 和 Slavko 每年在 Saint Lucy’s Day 种植圣诞小麦。小麦的茎秆生长速度不同，经过一段时间后，小麦变得相当凌乱。他们决心通过玩下面的游戏来解决这个问题，游戏将轮流进行如下环节：

- Mirko 选择一根高度最小的麦秆使其高度变成次小值。
- Slavko 选择一根高度最大的麦秆使其高度变成次大值。
- 如果剩下的不同高度的数量不小于 $3$，游戏继续进行，否则结束，结束时需要操作者为输家了。

给定小麦秸秆的高度，Mirco 先手。请确定游戏的赢家以及结束后高度的最小值与最大值。
## 输入格式

第一行输入包含整数 $n$，即小麦秸秆的数量。

第二行输入包含 $n$ 个空格分隔的整数 $h_i$，表示单个小麦秸秆的高度。
## 输出格式

第一行输出输出赢家的姓名（`Mirko`或 `Slavko`）。

第二行输出游戏结束时最短和最长的麦秆的高度。
## 样例

### 样例输入 #1
```
3
3 3 3
```
### 样例输出 #1
```
Slavko
3 3

```
### 样例输入 #2
```
4
3 1 2 1

```
### 样例输出 #2
```
Slavko
1 2
```
### 样例输入 #3
```
7
2 1 3 3 5 4 1 
```
### 样例输出 #3
```
Slavko
2 3
```
## 提示

#### 样例 1 说明

初始时 Mirko 便不能操作，因此，Slavko 是赢家。

#### 数据规模与约定

- 对于 $50\%$ 的数据，有 $1\le n\le 500$。
- 对于 $80\%$ 的数据，有 $1\le n\le 3\times 10^3$。
- 对于 $100\%$ 的数据，有 $1\le n\le 10^5$。

对于所有合法的 $h_i$，都有 $1\le h_i\le 10^5$。

#### 说明

**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T2 PŠENICA_。**


---

---
title: "[COCI 2014/2015 #4] PRIPREME"
layout: "post"
diff: 普及/提高-
pid: P7176
tag: ['2014', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #4] PRIPREME
## 题目描述

Ante 和 Goran 正在准备 $n$ 个团队。他们每个人各有一个算法需要向所有团队讲解。

当然，他们不能两人同时对同一个团队讲解，也不能同时对多个团队讲解。

给定对每个团队讲解所需的时间，你需要确定讲解所需的最少时间。
## 输入格式

第一行输入包含整数 $n$，即团队数量。

下一行包含 $n$ 个空格分隔的整数 $a_i$，表示对第 $i$ 个团队讲解所需的时间。
## 输出格式

仅一行，即讲解所需的最少时间。
## 样例

### 样例输入 #1
```
3
2 2 2
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
3
4 1 2
```
### 样例输出 #2
```
8
```
### 样例输入 #3
```
4
1 3 2 1
```
### 样例输出 #3
```
7
```
## 提示

#### 样例 1 说明

每个团队都需要 $2$ 个单位时间来理解和实现一个算法，以下是一种可行的授课方法。

| Ante | Goran | 用时 |
| :----------: | :----------: | :----------: |
| 团队 1 | 团队 2 | $2$ |
| 团队 2 | 团队 3 | $2$ |
| 团队 3 | 团队 1 | $2$ |
| 全部完成 | 全部完成 | $6$ |

#### 样例 2 说明

其中一种最佳的时间安排是 Ante 依次给团队 $2,3, {\color{red}x},1$ 讲解，但是在 $\color{red}x$ 中有一个 $1$ 个单位时间的暂停。Goran 将依次给团队 $1,3,2$ 讲课。

#### 数据规模与约定

- 对于 $40\%$ 的数据，有 $1\le n\le 7$。
- 对于 $100\%$ 的数据，有 $1\le n\le 3\times 10^5$。

对于所有合法的 $a_i$，都有 $a_i\in [1,3\times 10^5]$。

#### 说明

**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T3 PRIPREME_。**


---

---
title: "[COCI 2014/2015 #4] MRAVI"
layout: "post"
diff: 普及/提高-
pid: P7177
tag: ['2014', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #4] MRAVI
## 题目描述

Bobi 每天早上起床喂他最喜欢的宠物：蚂蚁。他把它们放在一个有管道系统的玻璃瓶中，管道系统可以表示为一棵有 $n$ 个节点的树。管道用树的边缘表示。树的根位于用 $1$ 表示的节点上。在管道系统内部，由于重力的作用，液体从节点流向其子节点。我们知道每个管道的流量 $x_i$：从父节点到子节点的流量百分比。让我们观察以下示例：

![](https://cdn.luogu.com.cn/upload/image_hosting/oi3ubdfd.png)

图片中的节点 $1$ 有 $12$ 升液体，之后有两个管道。一个的流量是 $x_i=30$，另一个是 $x_i=70$。节点 $2$ 将得到 $3.6$ 升，节点 $3$ 得到 $8.4$ 升。在输入数据中，来自同一节点的管道流量之和始终等于 $100$。Bobi 的一些管子不只是普通的管子，它们有点奇怪。它们是超级管道，有超能力将流经它们的液体流量平方。在前面的例子中，如果第一个管道有超能力，节点 $2$ 得到 $12.96$ 升，节点 $3$ 仍然只有 $8.4$ 升。现在请注意，一个节点的流出液体比进入的液体多。这正是这些管道是超级管道的原因！

所有的超级管道都可以由波比开启或关闭。蚂蚁只生活在树的叶子里（没有孩子的节点）。对于每一片叶子，我们知道需要多少液体来喂养生活在叶子里的蚂蚁。Bobi 想把 $L$ 升液体倒进树根里喂蚂蚁。他没有多少钱，所以他想知道他需要购买的最低液体量，以保证所有蚂蚁的饲料。
## 输入格式

第一行输入包含整数 $n$。

以下 $n-1$ 行中的每一行包含四个整数 $a_i,b_i,x_i,t_i$，其中 $a_i$ 和 $b_i$ 是管道的末端（管道连接的节点的编号），$x_i$ 是液体通过管道的流量，$t_i$ 表示管道是否具有超能力。如果 $t_i$ 为 $1$，则该管道具有超能力，否则它不具有超能力。

下一行包含 $n$ 个整数 $k_i$，用于描述第 $i$ 个节点中蚂蚁所需的液体量。如果第 $i$ 个节点不是叶，$k_i$ 将是 $-1$。
## 输出格式

仅一行，即 $L$。

**注意：本题采用 SPJ，与正确解的误差不超过 $10^{-3}$ 即视为正确。**
## 样例

### 样例输入 #1
```
5
1 2 50 0
1 3 50 0
2 4 25 0
2 5 75 1
-1 -1 4 1 9
```
### 样例输出 #1
```
8.00
```
### 样例输入 #2
```
3
1 2 20 1
1 3 80 1
-1 4 8
```
### 样例输出 #2
```
10.0000
```
### 样例输入 #3
```
6
1 2 100 1
2 3 20 0
2 4 20 0
2 5 60 0
4 6 100 1
-1 -1 1 -1 1 2
```
### 样例输出 #3
```
2.659
```
## 提示

#### 样例 1 说明

如果 Bobi 向根节点中注入 $8$ 升液体，节点 $3$ 得到 $4$ 升，节点 $4$ 得到 $1$ 升，节点 $5$ 得到 $9$ 升。这些节点是叶子（其中有蚂蚁）中蚂蚁需要得到的最小数量。所以，$8$ 升是满足“蚂蚁”条件的最低液体量。

#### 数据规模与约定

对于 $100\%$ 的数据，都有 $1\le n\le 10^3$，$1\le a_i,b_i\le n$，$1\le x_i\le 100$，$t_i\in\{0,1\}$，$k_i\in[1,10]$。

**数据保证 $L$ 的值不超过 $2\times 10^9$。**

#### 说明

**题目译自 [COCI2014-2015 CONTEST #4](https://hsin.hr/coci/archive/2014_2015/contest4_tasks.pdf) _T4 MRAVI_。**


---

---
title: "[COCI 2007/2008 #6] GRANICA"
layout: "post"
diff: 普及/提高-
pid: P7191
tag: ['2007', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2007/2008 #6] GRANICA
## 题目描述

Luka 首先从 $n$ 个车牌上的数字写在一张纸上。然后，他尝试找到整数 $m$，以使纸上的所有数除以 $m$ 都得到相同的余数。

Luka 想找到尽可能多的不同的 $m$。

编写一个程序，给定 Luka 的 $n$ 个整数，确定所有 $m$。

注意，你需要保证 $m$ 是正整数，即，$m> 1$。
## 输入格式

第一行，一个正整数 $n$，表示数的个数。

接下来，$n$ 行，每行一个数 $a_i$，表示纸上的数，保证互不相同。

数据保证有一个 $m$ 符合要求。
## 输出格式

第一行，任意序输出所有符合要求的 $m$。
## 样例

### 样例输入 #1
```
3
6
34
38 

```
### 样例输出 #1
```
2 4

```
### 样例输入 #2
```
5
5
17
23
14
83 

```
### 样例输出 #2
```
3
```
## 提示

#### 样例 #1 解释
所有整数除以 $2$ 时都为 $0$，除以 $4$ 时为 $2$。

#### 数据规模及约定
- 对于 $60\%$ 的数据，$2 \le n \le 100$，$1 \le a_i \le 10^4$。
- 对于 $100\%$ 的数据，$2 \le n \le 100$，$1 \le a_i \le 10^9$。

#### 说明
- 本题满分 $50$ 分。
- 本题默认开启 O2 优化开关。
- 题目译自 [COCI2007-2008](https://hsin.hr/coci/archive/2007_2008/) [CONTEST #6](https://hsin.hr/coci/archive/2007_2008/contest6_tasks.pdf) T3 GRANICA，译者 @[tearing](https://www.luogu.com.cn/user/219791)。
- 感谢 @[tiger2005](https://www.luogu.com.cn/user/60864) 提供的 checker，您可以在附件处下载。


---

---
title: "[RC-04] 01 背包"
layout: "post"
diff: 普及/提高-
pid: P7223
tag: []
---
# [RC-04] 01 背包
## 题目描述

有一个容积为 $+\infty $ 的背包，你要往里面放物品。

你有 $n$ 个物品，第 $i$ 个体积为 $a_i$。

你有一个幸运数字 $p$，若放入的物品体积和为 $k$，你会得到 $p^k$ 的收益。**特别地，$0^0=1$。**

求所有 $2^n$ 种放入物品的方案的收益和。答案很大，因此请输出它对 $998244353$ 取模的值。
## 输入格式

第一行两个整数 $n,p$。

接下来一行 $n$ 个正整数 $a_1\sim a_n$，描述这 $n$ 个物品的体积。
## 输出格式

输出一个整数，为所有 $2^n$ 种方案的收益和对 $998244353$ 取模的值。
## 样例

### 样例输入 #1
```
2 2
1 4
```
### 样例输出 #1
```
51
```
## 提示

【样例解释】

答案为 $2^0+2^1+2^4+2^5=51$。

【数据范围】

对于所有数据，$1\le n\le 10^6$，$0\le p,a_i<998244353$。

详细数据范围如下表：

| 测试点编号 | $n$ | $p$ | $\sum_{i=1}^na_i$ | 每测试点分数 |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| $1$ |  | $=0$ |  | $2$ |
| $2\sim 5$ | $\le 22$ |  |  | $6$ |
| $6\sim 9$ | $\le 1000$ |  | $\le 1000$ | $6$ |
| $10\sim 14$ | $\le 100000$ |  | $\le 100000$ | $5$ |
| $15$ |  |  |  | $25$ |


---

---
title: "[RC-04] 走迷宫"
layout: "post"
diff: 普及/提高-
pid: P7225
tag: ['交互题', 'Special Judge']
---
# [RC-04] 走迷宫
## 题目背景

**这是一道交互题。** 

请确保您提交前认真阅读过 <https://www.luogu.com.cn/blog/luogu/interactive-problems>，并且熟知 P1947 的写法。

您可以直接在以下样例程序中编辑：

```cpp
#include<bits/stdc++.h>
using namespace std;
extern "C" bool move_to(char position);
extern "C" string find_out_map(int X,int Y,int N){
	return "233";
}
```

同时本题不支持 Pascal，祝愿 Pascal 党早日转 C++。
## 题目描述

### 题目描述

**这是一道交互题。** 

你被困在一个迷宫内，你需要求出这个迷宫的地图。

迷宫是 $n\times n$ 的网格，每个位置上要么是障碍，要么是路。障碍用 `1` 表示，路用 `0` 表示。坐标按照从上到下，从左到右编号，第 $i$ 行第 $j$ 列坐标为 $(i,j)$。

定义两个格子连通当且仅当他们有公共边（四连通）。保证恰好存在一个 `0` 构成的连通块，并且你的出生点在这个连通块中。

### 实现细节

你需实现一个函数：

`string find_out_map(int x,int y,int n)`

参数为三个整数 $x,y,n$，返回值为一个字符串。其中 $x,y$ 表示你的坐标为 $(x,y)$（$1<x,y<n$），$n$ 为地图大小。

你返回的字符串的第 $i$ 位（$0\le i<n\times n$）为 `1` 表示地图的第 $\lfloor\dfrac{i}{n}\rfloor+1$ 行，第 $i+1-n\lfloor \dfrac{i}{n}\rfloor$ 列是障碍；反之为路。

你可以调用以下函数以找出答案：

`bool move_to(char position)`

其中 `position` 为 `WASD` 中任一个，分别表示试图向上，左，下，右（分别为横坐标减一，纵坐标减一，横坐标加一，纵坐标加一）移动。若这个函数返回 `1`，说明你成功向这个方向移动一格；否则说明这个方向上有障碍物，移动失败。注意除了最开始，你都不能从交互器获得当前坐标。假如 `position` 不合法，交互器的行为是未定义的。

保证地图开始时已确定，不会动态构造。保证第一列，第一行，第 $n$ 列，第 $n$ 行都是障碍。

**你的函数可能会被调用多次，请注意初始化。**
## 输入格式

这部分你无法读取，其中包含 $n$ 与地图。输入文件以加密形式给出，并且交互器中也不会解密存储。
## 输出格式

没有输出。
## 提示

### 交互过程范例

假设地图为

```
1111
1011
1001
1111
```

最初传进来的参数为 $(2,2,4)$。

下面是一种合法的交互过程：

| 选手调用 | 交互器返回 |
| :----------: | :----------: |
| `move_to('S')` | 1 |
| `move_to('D')` | 1 |
| `move_to('W')` | 0 |
| 返回 `1111101110011111` | Accepted |

### 数据范围与限制

**本题时间限制 $2$ 秒，空间限制 $512\text{MB}$，且保证交互库最坏情况下所用时间小于 $0.5$ 秒、空间小于 $15\text{MB}$。**

首先交互题会受到和常规题相同的限制，如超时/超空间会导致整个测试点得零分。

在此基础上，当且仅当你报告的迷宫地图完全正确时你得分。设你调用函数最多的一次次数为 $W$，则你得到该测试点的满分，当且仅当 $W\le 5\times 10^5$。

对于 $100\%$ 的数据，$5\le n\le 500$。设调用你的函数的次数为 $x$（相当于有多组数据，你需要初始化），则 $1\le x\le 50$。详细数据范围如下，$(T)$ 表示这个测试点分数为 $T$ 分。

- 测试点 $1\ (8)$：$n=5,x\le 50$。
- 测试点 $2\ (8)$：$n=7,x\le 50$。
- 测试点 $3\ (20)$：$n\le 10,x\le 50$。
- 测试点 $4\ (10)$：$n\le 500,x\le 7$。保证仅存在恰好一个 `1` 构成的连通块。
- 测试点 $5\ (10)$：$n\le 20,x\le 20$。
- 测试点 $6\ (10)$：$n\le 50,x\le 20$。
- 测试点 $7\ (9)$：$n\le 100,x\le 10$。
- 测试点 $8\ (10)$：$n\le 200,x\le 7$。
- 测试点 $9\ (15)$：$n\le 500,x\le 7$。

### 交互题怎么调试

本题交互过程太过简单，因此本题不提供交互器。请选手自行编写。

假如你不知道怎么做：只需编写一个程序，读入地图，并且实现 `move_to` 函数，然后把你的答案函数放于其中即可运行。


---

---
title: "[BalticOI 2012] 括号 (Day1)"
layout: "post"
diff: 普及/提高-
pid: P7248
tag: ['2012', 'BalticOI（波罗的海）']
---
# [BalticOI 2012] 括号 (Day1)
## 题目描述

一个合法括号序列的定义如下：

- () 和 [] 是合法括号序列
- 若 A 是合法括号序列，则 (A) 和 [A] 也是合法括号序列
- 若 A 和 B 都是合法括号序列，则 AB 也是合法括号序列

在包含至少一对方括号的合法括号序列中，我们可以将 [ 和 ] 都用 ( 代替，这样就能够得到一个不合法括号序列。

例如 (( 和 ((((())) 都是不合法括号序列，前者可以由合法括号序列 \[] 转化而来，后者可以通过 \[]((()))，(\[](()))，((\[]())) 和 (((\[]))) 这四种合法括号序列转化而来。

现在给出一个不合法括号序列，求有多少种合法括号序列，在将其中的方括号用 ( 代替后，可以得到给定的括号序列。
## 输入格式

第一行一个正整数 $n$，表示给出的不合法括号序列的长度。  
第二行一个长度为 $n$ 的字符串，代表给出的序列，只包含 ( 和 )。
## 输出格式

输出符合要求的合法括号序列总数对 $10^9+9$ 取模后的结果。
## 样例

### 样例输入 #1
```
4
((()
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
8
((((((((
```
### 样例输出 #2
```
14
```
## 提示

**【样例解释#1】** 

满足条件的合法括号序列有两种：\[]() 和 ([])。

**【数据范围】**

- 对于 20% 的数据，满足 $n \leq 50$
- 对于 50% 的数据，满足 $n \leq 1000$
- 对于 100% 的数据，满足 $2\leq n \leq 30000$

**【说明】**

译自 [BalticOI 2012 Day1 T1. Brackets](http://www.boi2012.lv/data/day1/eng/brackets.pdf)


---

---
title: "ix35 的等差数列"
layout: "post"
diff: 普及/提高-
pid: P7273
tag: ['O2优化']
---
# ix35 的等差数列
## 题目背景

等差数列是指从第二项起，每一项与它的前一项的差等于同一个常数的一种数列，并称这个常数为公差。特别地，认为只有一项的数列也是等差数列，其公差视为 $0$。
## 题目描述

给定一包含 $n$ 项的正整数列 $a_1, a_2, \ldots , a_n$，满足 $1 \leq a_i \leq w$。

现可以进行若干次修改，一次修改可将数列的任意一项修改为任意 $\leq w$ 的正整数。

求：至少进行多少次修改，才能使得原数列变为一公差为非负整数的等差数列。
## 输入格式

第一行两个整数 $n, w$。  
接下来一行 $n$ 个整数 $a_1, a_2, \ldots , a_n$。
## 输出格式

一行一个整数，所求答案。
## 样例

### 样例输入 #1
```
6 1000
1 2 999 4 72 6
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
10 2
2 1 2 2 1 1 2 2 2 2
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
1 1
1
```
### 样例输出 #3
```
0
```
## 提示

**【样例解释 #1】**

将 $a_3$ 修改为 $3$，$a_5$ 修改为 $5$。

---

**【数据范围】**

**本题采用捆绑测试。**

- Subtask 1（$20$ 分）：$n = 2$，$w = 2$。
- Subtask 2（$20$ 分）：$n, w \leq 100$。
- Subtask 3（$10$ 分）：$a_i = 1$。
- Subtask 4（$20$ 分）：$n, w \leq 1000$。
- Subtask 5（$30$ 分）：没有特殊限制。

对于 $100 \%$ 的数据，$1 \leq n, w \leq 3 \times 10^5$。

---

原始 idea：ix35。


---

---
title: "「EZEC-5」人赢"
layout: "post"
diff: 普及/提高-
pid: P7286
tag: ['洛谷月赛']
---
# 「EZEC-5」人赢
## 题目背景

> “我们在 小 Z 面前秀个恩爱吧。”\
>“好的。”

小 Z 发现他身边都是人赢，这使他非常自闭。

小 Z 又看着身边的潇，不禁陷入了沉思……

![](https://cdn.luogu.com.cn/upload/image_hosting/b1ij58kc.png)
## 题目描述

潇有一个数组 $k$，下标为 $1$ 到 $n$ 。

潇定义 $f(x,y)=\begin{cases} \min(k_x,k_y) \times (x + y) &x \ne y \\ k_x\times x&x=y \end{cases}$ 。

潇想知道对于任意的 $1 \le x,y \le n$，$f(x,y)$ 的最大值是多少。但是她不会做，于是就问了善良的 小 Z，然而非常想在妹子面前表现的 小 Z 发现他也不会做，就只能够求助善良的你了。
## 输入格式

第一行一个整数 $n$。

第二行 $n$ 个整数 $k$，第 $i$ 个整数为 $k_i$。含义如上文。
## 输出格式

一行一个整数，表示对于任意的 $1 \le x,y \le n$，$f(x,y)$ 的最大值。
## 样例

### 样例输入 #1
```
3
3 2 1
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
5
3 4 5 4 3
```
### 样例输出 #2
```
28
```
## 提示

### 数据范围

**本题采用捆绑测试。**

- Subtask 1（20 points）：$1 \le n \le 5000$。

- Subtask 2（10 points）：保证所有 $k_{i}$ 都相等。

- Subtask 3（20 points）：$k_i \le 10^3$。

- Subtask 4（50 points）：无特殊性质。

对于 $100\%$ 的数据，$1 \le n \le 10^6$，$1 \le k_{i} \le 10^9$。

------------

本题加强版：[link](https://www.luogu.com.cn/problem/P7291)。


---

---
title: "[COCI 2018/2019 #1] Zamjena"
layout: "post"
diff: 普及/提高-
pid: P7304
tag: ['2018', 'COCI（克罗地亚）']
---
# [COCI 2018/2019 #1] Zamjena
## 题目描述

Vlatko 喜欢与整数数组打交道。

他在纸上写下了两个分别包含 $N$ 个元素的数组，其中每个元素是一个整数，或者是表示一个变量的字符串（字符串仅包含小写字母）。

一个变量可以被任何一个整数替换，而两个数组中可能会多次出现同一变量。假如这种情况出现，则替换时需要将该变量出现过所有位置均替换会为待替换整数。

Vlatko 好奇能不能将所有变量替换为特定的整数，使得两个数组相等。当两个数组所有位置处的整数均对应相等，则两个数组相等。
## 输入格式

第一行输入正整数 $N$，表示每个数组中元素个数。

第二行输入第一个数组的 $N$ 个元素。

第三行输入第二个数组的 $N$ 个元素。

数组中的每个元素为下列二者之一：

- 一个小于 $1000$ 的正整数
- 一个长度不超过 $10$ 的仅包含小写字母的字符串，表示一个变量。
## 输出格式

如果有方案能在替换后使得两个数组相等，则输出 `DA`，否则输出 `NE`。
## 样例

### 样例输入 #1
```
3
3 1 2
3 1 x
```
### 样例输出 #1
```
DA
```
### 样例输入 #2
```
4
4 5 iks ipsilon
1 iks 3 iks
```
### 样例输出 #2
```
NE
```
### 样例输入 #3
```
5
x 3 x y 3
x y 2 z 3
```
### 样例输出 #3
```
DA
```
## 提示

#### 样例 3 解释

当把 $x,y,z$ 分别替换为 $2,3,3$ 时，两个数组相等，均为 $(2,3,2,3,3)$。

#### 数据规模与约定

对于 $20\%$ 的数据，每个变量在两个数组中仅出现一次。

对于另外 $20\%$ 的数据，数组中只包含两个变量 $x,y$。

对于 $100\%$ 的数据，$1 \le N \le 5 \times 10^4$。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T2 Zamjena_。**


---

---
title: "[COCI 2018/2019 #2] Kocka"
layout: "post"
diff: 普及/提高-
pid: P7309
tag: ['2018', 'COCI（克罗地亚）']
---
# [COCI 2018/2019 #2] Kocka
## 题目背景

在儿童游乐场里，编者被一个由金属横杠组成的立方体所吸引，于是他想出了一个有趣的问题。这里是二维的版本。
## 题目描述

给定一个 $N \times N$ 的矩阵。有些区域被堵塞，而有些区域是空白的。在观察的过程中，他从 $4$ 个方向对该矩阵进行观察。先从左侧开始，记录下每一行的第一个堵塞处前有几排是空出的。如果没有堵塞，则记下 $-1$。接着他如法炮制，分别从右侧、上方和下方进行观察并记录。

这样，他总共写下了 $4N$ 个数字，其中每个方位均写下了 $N$ 个数字。然而，未知的恶棍摧毁了矩阵，他所剩的只有他写下的数字。

编者想问你他写的数字是否存在错误，即是否可以通过这些数字还原出一个 $N \times N$ 的矩阵。
## 输入格式

第一行输入正整数 $N$，表示矩阵的规模。

第二行包含 $N$ 个整数 $L_i$，表示从左侧观察所记下的数字。

第三行包含 $N$ 个整数 $R_i$，表示从右侧观察所记下的数字。

第四行包含 $N$ 个整数 $U_i$，表示从上方观察所记下的数字。

第五行包含 $N$ 个整数 $D_i$，表示从下方观察所记下的数字。
## 输出格式

如果给定的数字可以还原出一个 $N \times N$ 的矩阵，则输出 `DA`，否则输出 `NE`。
## 样例

### 样例输入 #1
```
3
-1 2 0
-1 0 1
2 2 1
0 0 1
```
### 样例输出 #1
```
DA
```
### 样例输入 #2
```
3
-1 0 1
-1 2 1
-1 2 -1
1 0 -1
```
### 样例输出 #2
```
NE
```
## 提示

#### 样例 1 解释

![](https://cdn.luogu.com.cn/upload/image_hosting/50ve94cy.png)

#### 数据规模与约定

对于 $40\%$ 的数据，$N \le 1000$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$-1 \le L_i,R_i,U_i,D_i \lt N$。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #2](https://hsin.hr/coci/archive/2018_2019/contest2_tasks.pdf)  _T2 Kocka_。**


---

---
title: "[COCI 2018/2019 #4] Wand"
layout: "post"
diff: 普及/提高-
pid: P7370
tag: ['2018', 'COCI（克罗地亚）']
---
# [COCI 2018/2019 #4] Wand
## 题目背景

Kile 看到了 Nikola 的题目之后有了灵感，便创作出了自己的版本。
## 题目描述

$N$ 位分别用 $1,2,\cdots,N$ 表示的巫师将参与 $M$ 次决斗。

现有一个魔杖。如果魔杖目前归属于巫师 A，而巫师 A 被巫师 B 击败，则魔杖将归属于巫师 B。魔杖最初归属于巫师 $1$。

Kile 想知道，在只调整决斗的顺序的条件之下，魔杖最终可能会归属于谁。
## 输入格式

第一行输入正整数 $N,M$。

接下来的 $M$ 行输入正整数 $X_i,Y_i$，表示巫师 $X_i$ 将击败巫师 $Y_i$。
## 输出格式

输出 $N$ 个字符，其中若魔杖最终可能归属于巫师 $k$，则在第 $k$ 个字符处输出 $1$，否则在此处输出 $0$。
## 样例

### 样例输入 #1
```
3 2
2 3
3 1
```
### 样例输出 #1
```
011
```
### 样例输入 #2
```
2 2
2 1
1 2
```
### 样例输出 #2
```
11
```
### 样例输入 #3
```
5 5
3 1
2 1
4 3
4 5
2 5
```
### 样例输出 #3
```
01110
```
## 提示

#### 样例 1 解释

如果巫师 $1,3$ 先进行决斗，然后轮到巫师 $2,3$，魔杖将最终归属于巫师 $2$。

如果巫师 $2,3$ 先进行决斗，然后轮到巫师 $1,3$，魔杖将最终归属于巫师 $3$。

#### 数据规模与约定

对于 $20\%$ 的数据，$1 \le N,M \le 10$。

对于 $100\%$ 的数据，$1 \le N,M \le 10^5$，$1 \le X_i,Y_i \le N$，$X_i \neq Y_i$。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #4](https://hsin.hr/coci/archive/2018_2019/contest4_tasks.pdf)  _T2 Wand_。**


---

---
title: "[COCI 2018/2019 #5] Jarvis"
layout: "post"
diff: 普及/提高-
pid: P7375
tag: ['2018', 'COCI（克罗地亚）']
---
# [COCI 2018/2019 #5] Jarvis
## 题目描述

Ivan 拥有 $N$ 架无人机，每架无人机均有一个出厂属性值和一个出战需求属性值。他可以选定一个整数 $X$（$X$ 不一定为正整数），将所有无人机在出厂属性值的基础上加上 $X$。

求能够出战（即属性值与出战需求属性值相等）的无人机的最大数量。
## 输入格式

第一行输入整数 $N$，表示无人机的数量。

第二行输入 $N$ 个整数 $A_i$，表示无人机的出厂属性值。

第三行输入 $N$ 个整数 $B_i$，表示无人机的出战需求属性值。
## 输出格式

输出能够出战的无人机的最大数量。
## 样例

### 样例输入 #1
```
1
1
2
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
2
0 0
1 1
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
2
1 2
5 5
```
### 样例输出 #3
```
1
```
## 提示

#### 样例 3 解释

若选定 $X=3$，则属性值分别变为 $1+3=4$ 和 $2+3=5$，则只有第二架可以出战。若 $X=4$，则属性值分别 $5$ 和 $6$，则只有第一架可以出战。可以证明，没有能够使得两架都能出战的整数 $X$。

#### 数据规模与规定

对于 $40\%$ 的数据，$-10 \le A_i,B_i \le 10$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$-10^6 \le A_i,B_i \le 10^6$。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #5](https://hsin.hr/coci/archive/2018_2019/contest5_tasks.pdf)  _T2 Jarvis_。**


---

---
title: "[COCI 2020/2021 #5] Po"
layout: "post"
diff: 普及/提高-
pid: P7399
tag: ['2020', 'COCI（克罗地亚）']
---
# [COCI 2020/2021 #5] Po
## 题目描述

有一个长度为 $n$ 的数组。在初始状态下，所有元素都为 $0$。

每次操作，可以将一个连续的区间 $[l,r]$ 内的所有数加上一个正整数 $x$，但要求任意两个操作区间要么互不相交，要么一个包含另外一个。

请问能将原数组变为给定数组 $a$ 的最少操作次数。
## 输入格式

第一行输入整数 $n$。

第二行输入 $n$ 个非负整数 $a_i$。
## 输出格式

输出所需最少操作次数。
## 样例

### 样例输入 #1
```
3
2 2 2
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
5
2 3 3 3 2
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
6
1 2 3 2 1 3
```
### 样例输出 #3
```
4
```
## 提示

#### 样例 2 解释

一种最优的方案是：将所有元素都加上 $2$，再将中间三个元素都加上 $1$。

#### 数据规模与约定

对于 $30$ 分的数据，$1 \le n \le 1000$。

对于 $100\%$ 的数据，$1 \le n \le 10^5$，$0 \le a_i \le 10^9$。

#### 说明

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2020-2021](https://hsin.hr/coci/) [CONTEST #5](https://hsin.hr/coci/contest5_tasks.pdf)  _T2 Po_。**


---

---
title: "[CERC2018] The Silence of the Lamps"
layout: "post"
diff: 普及/提高-
pid: P7464
tag: ['2018', 'ICPC']
---
# [CERC2018] The Silence of the Lamps
## 题目描述

**译自[ [CERC2018]](https://contest.felk.cvut.cz/18cerc/) [The Silence of the Lamps](https://contest.felk.cvut.cz/18cerc/solved/lamps.pdf)**

在开始之前，如果之前没有见过台灯，那么现在我们把它看做一个用玻璃做的长方体（一个矩形表面的箱子），里面都是煤气。灯的所有边长度都是整数。

曾经，我们的一位讲师曾因破坏路灯而被判刑。他肯定疯了，因为他认为一些路灯向他高声尖叫。

在他的想法里，他遵从一个奇怪的行为模式。他只会认出并且破坏表面不是正方形，并且体积不超过一个给定数值的路灯。后来，在与医生 Clarice 的一次会谈中，他说他非常害怕大型物体和形状过于规则的物体。

你的任务是数出所有满足讲师条件的可能长方体。
## 输入格式

第一行一个整数 $T$，表示数据组数。

接下来 $T$ 行，每行一个整数 $N$，表示最大可识别的路灯体积。
## 输出格式

对于每组数据，输出会被破坏的不同路灯个数。
## 样例

### 样例输入 #1
```
5
5
6
10
30
666
```
### 样例输出 #1
```
0
1
3
26
2406
```
## 提示

$1≤T≤10^5$，$1≤N≤10^6$。


---

---
title: "[NOI Online 2021 入门组] 切蛋糕"
layout: "post"
diff: 普及/提高-
pid: P7471
tag: ['2021', 'NOI Online']
---
# [NOI Online 2021 入门组] 切蛋糕
## 题目描述

Alice、Bob 和 Cindy 三个好朋友得到了一个圆形蛋糕，他们打算分享这个蛋糕。

三个人的需求量分别为 $a,b,c$，现在请你帮他们切蛋糕，规则如下：

1. 每次切蛋糕可以选择蛋糕的任意一条直径，并沿这条直径切一刀（注意切完后不会立刻将蛋糕分成两部分）。

2. 设你一共切了 $n$ 刀，那么你将得到 $2n$ 个扇形的蛋糕（特别地，切了 $0$ 刀被认为是有一个扇形，即整个圆形蛋糕），将这些蛋糕分配给 Alice，Bob 和 Cindy，要求每个扇形蛋糕只能完整地分给一个人。

3. 三人分到的蛋糕面积比需要为 $a:b:c$（不保证是最简比例，且如果 $a:b:c$ 中某个数为 $0$，表示那个人不吃蛋糕）。

为了完成这个任务，你至少需要切几刀？
## 输入格式

本题单个测试点包含多组数据。

第一行包含一个整数 $T$，表示数据组数。

接下来 $T$ 行，每行包含三个整数 $a,b,c$，表示三人的需求量。
## 输出格式

输出 $T$ 行，第 $i$ 行的输出表示第 $i$ 组数据中你至少需要切蛋糕的次数。
## 样例

### 样例输入 #1
```
6
0 0 8
0 5 3
9 9 0
6 2 4
1 7 4
5 8 5
```
### 样例输出 #1
```
0
2
1
2
3
2
```
## 提示

### 样例 $1$ 解释
![](https://cdn.luogu.com.cn/upload/image_hosting/i3pai9va.png)

### 数据范围与提示
$30\%$ 的数据满足：$a=b=0$。

$60\%$ 的数据满足：$a=0$。

$100\%$ 的数据满足：$1\le T\le 10^4，0\le a,b,c\le 10^8$，保证 $a+b+c>0$。

数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 提供。


---

---
title: "⎌ Nurture ⎌"
layout: "post"
diff: 普及/提高-
pid: P7522
tag: ['2021']
---
# ⎌ Nurture ⎌
## 题目背景

![Nurture](https://mivik.gitee.io/image/nurture_wallpaper.jpg)

> "I realized I shouldn't write music with the expectation that the productivity or achievement will fix my problems, but instead with the hope that my honest expression will move people the way music moves me."
>
> — Robinson in a letter to his fans
## 题目描述

Mivik 正在听 Nurture，但这时教练走了进来，Mivik 便假装自己在做这道题。

你有一个长度为 $n$ 的序列 $v$，你每次可以 **取出** 两个数 $a,b$，并把 $a-b$ 添加到序列中。重复操作直到序列中只剩下一个数，你需要求出这个数的最大值。

~~（结果教练一眼秒了这水题，Mivik 因没事刷水题被批判了一番）~~
## 输入格式

第一行一个正整数 $n$，代表序列的长度。

第二行 $n$ 个整数，第 $i$ 个整数 $v_i$ 代表序列第 $i$ 项的元素。
## 输出格式

一行一个整数，代表最终剩下的数的最大值。
## 样例

### 样例输入 #1
```
3
1 2 3
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
4
-4 5 -2 -3
```
### 样例输出 #2
```
14
```
### 样例输入 #3
```
8
2 0 2 1 0 4 2 3
```
### 样例输出 #3
```
14
```
## 提示

### 样例解释

样例一：第一步取出 $1,2$，并把 $1-2=-1$ 添加到序列中，此时序列为 $[3,-1]$；然后取出 $3,-1$，将 $3-(-1)=4$ 添加到序列中，此时序列只剩下一个数 $4$。可以证明不存在使剩下的数更大的操作方式。

### 数据范围

对于全部数据，有 $1\le n\le 3\cdot 10^5$，$|v_i|\le 10^9$。

Subtask 1 (15 pts)：保证 $n\le 3$。

Subtask 2 (30 pts)：保证 $v_i\ge0$。

Subtask 3 (55 pts)：无特殊限制。


---

---
title: "Cytoid"
layout: "post"
diff: 普及/提高-
pid: P7523
tag: ['2021']
---
# Cytoid
## 题目背景

![Welcome to Cytoid!](https://cdn.luogu.com.cn/upload/image_hosting/zzg1blb0.png)

众所周知，尽管很菜，但 colazcy 仍然很喜欢玩 Cytus。
## 题目描述

一天，colazcy 又在越级打谱。不到一分钟，colazcy 把手机一摔，骂道：“什么垃圾铺面！” 于是他准备在 Cytoid 上面做一个自制铺恶心别人。

colazcy 准备上一波劲爆 $m$ 押，共有 $n$ 排。也就是说，他的铺面是一个 $n\times m$ 的矩阵，其中每一个位置可以是 Drag 也可以是 Click。colazcy 已经确定了其中一些位置应该是什么元素，但剩下的还没有确定。

但是 colazcy 发现，他铺面对应的矩形如果有一个子矩形中所有元素都是 Drag，那么玩家就可以一直按住糊过去。colazcy 定义一张铺面的简单度为这张铺面对应的矩形中全都是 Drag 的子矩形个数。

现在 colazcy 把他还未完成的铺面给了你，希望你告诉他：如果他等概率随机地把剩下没有决定的元素填成 Drag / Click，最终铺面简单度的期望是多少。不难观察到答案总是一个有理数，你只需要输出这个答案对 $998244353$ 取模的结果。如果你不知道如何将一个有理数对质数取模，可以参考 [有理数取模](https://www.luogu.com.cn/problem/P2613)。
## 输入格式

第一行两个正整数 $n,m$，分别代表矩阵的行数和列数。

接下来 $n$ 行，第 $i$ 行有一个长度为 $m$ 的字符串，其第 $j$ 位为 `o` 代表这个位置被确定为 Drag，为 `x` 代表其被确定为 Click，为 `?` 表示这个位置还没有确定。
## 输出格式

一行一个整数，代表简单度的期望对 $998244353$ 取模的结果。
## 样例

### 样例输入 #1
```
2 2
oo
xo
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
2 2
oo
?o
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
3 4
o?o?
?xox
o?xo
```
### 样例输出 #3
```
499122189
```
## 提示

### 样例解释

样例一：整个铺面已经确定，而简单度 = 全是 Drag 的子矩阵数目 = $5$。

样例二：只有一个位置没有确定：当这个位置填 Drag 时，简单度为 $9$；当这个位置填 Click 时，简单度为 $5$。则期望简单度为 $\dfrac{9+5}2=7$。

### 数据范围

对于全部数据，有 $1\le n,m\le 100$。

Subtask 1 (15 pts)：保证没有尚未确定的元素（即输入没有 `?`）。

Subtask 2 (15 pts)：保证尚未确定的元素个数 $\le 3$。

Subtask 3 (30 pts)：保证 $n\le 30$。

Subtask 4 (40 pts)：无特殊限制。


---

---
title: "[COCI 2009/2010 #1] DOBRA"
layout: "post"
diff: 普及/提高-
pid: P7541
tag: ['2009', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #1] DOBRA
## 题目描述

Lea 写下了一个单词，之后她把单词中的一些字母用下划线 `_` 替换。接下来 Lea 会用其他字母代替下划线。

Lea 认为如果一个单词不包含 $3$ 个及以上**连续的元音字母**、$3$ 个及以上**连续的辅音字母**，并且至少包含**一个**大写字母 `L`，那么这个单词就是**令人愉快**的。

**提示**：元音字母仅包含 $\texttt{a,e,i,o,u}$，其他的字母都是辅音字母。

求 Lea 有多少种方案将下划线替换成大写字母，使得这个单词是**令人愉快的**。
## 输入格式

一行一个字符串，表示 Lea 写下的单词。

保证字符串中最多有 $10$ 个下划线，并且只会出现大写字母和下划线。
## 输出格式

一行一个整数，表示方案数。

**注意：** 你需要使用 $64$ 位有符号整数。在 C/C++ 中使用 `long long`，Pascal 中使用 `int64`。
## 样例

### 样例输入 #1
```
L_V
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
V__K
```
### 样例输出 #2
```
10
```
### 样例输入 #3
```
JA_BU_K_A
```
### 样例输出 #3
```
485
```
## 提示

#### 【数据范围】

对于 $100\%$ 的数据，字符串长度 $\le 100$。

#### 【说明】

本题分值按 COCI 原题设置，满分 $70$。

题目译自 [**COCI2009-2010 CONTEST #1**](https://hsin.hr/coci/archive/2009_2010/contest1_tasks.pdf) _**T3 DOBRA**_。


---

---
title: "[COCI 2009/2010 #1] MALI"
layout: "post"
diff: 普及/提高-
pid: P7542
tag: ['2009', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #1] MALI
## 题目描述

Mirko 和 Slavko 正在玩游戏。游戏共有 $N$ 个回合，在第 $k$ 个回合，Slavko 给出两个整数 $A_k$ 和 $B_k$。请你帮助 Mirko 解决以下问题：

前 $k$ 个回合中 Slavko 给出了数字 $A_1,A_2,...,A_k$ 和 $B_1,B_2,...,B_k$。将这些数两两配成 $k$ 个数对 $(A_i,B_j)$（$1 \le i,j \le k$），使得序列 $A$ 和序列 $B$ 的每一个数**都只在这些数对中出现一次**，并且使所有数对的**和**（$A_i + B_j$）**的最大值最小**。
## 输入格式

第一行包含一个整数 $N$，表示游戏的回合数。

接下来 $N$ 行的第 $i$ 行包含两个整数 $A_i,B_i$，表示 Slavko 在第 $i$ 个回合中给出的两个数字。
## 输出格式

输出 $N$ 行，第 $i$ 行表示第 $i$ 个回合最小的最大数对和。
## 样例

### 样例输入 #1
```
3
2 8
3 1
1 4
```
### 样例输出 #1
```
10
10
9
```
### 样例输入 #2
```
3
1 1
2 2
3 3
```
### 样例输出 #2
```
2
3
4
```
## 提示

#### 【数据范围】

对于 $50\%$ 的数据，$1 \le N \le 200$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$1 \le A_i,B_i \le 100$。

#### 【说明】

本题分值按 COCI 原题设置，满分 $100$。

题目译自 [**COCI2009-2010 CONTEST #1**](https://hsin.hr/coci/archive/2009_2010/contest1_tasks.pdf) _**T4 MALI**_。


---

---
title: "[COCI 2020/2021 #6] Alias"
layout: "post"
diff: 普及/提高-
pid: P7551
tag: ['2020', 'COCI（克罗地亚）']
---
# [COCI 2020/2021 #6] Alias
## 题目描述

Novak 和 Rafael 在玩一个猜单词的游戏。

Rafael 脑中有一个包含 $n$ 个单词的数据库。数据库中还有 $m$ 对形如 $x, y, t$ 的链接，表示如果他记起或听到了单词 $x$，他会在 $t$ 毫秒后记起单词 $y$。

游戏将进行 $q$ 轮，每轮游戏相互独立。每一轮游戏开始时，Novak 将说出初始单词 $a$。他想知道，多少毫秒后 Rafael 会记起目标单词 $b$？
## 输入格式

第一行两个整数 $n, m$。

接下来 $m$ 行每行两个字符串 $x_i, y_i$ 和一个整数 $t_i$，表示一对链接。

接下来一行一个整数 $q$。

接下来 $q$ 行，每行两个字符串 $a_i, b_i$，表示第 $i$ 轮游戏中的初始单词和目标单词。
## 输出格式

共 $q$ 行，表示每轮游戏的答案。

如果 Rafael 能记起目标单词，输出一个整数，表示所需要的时间。否则，输出 `Roger`。
## 样例

### 样例输入 #1
```
3 2
novak goat 1
goat simulator 3
2
novak simulator
simulator goat
```
### 样例输出 #1
```
4
Roger
```
### 样例输入 #2
```
3 3
kile legend 4
legend beer 5
beer kile 6
2
kile beer
legend kile
```
### 样例输出 #2
```
9
11
```
### 样例输入 #3
```
4 5
rafael me 5
me ow 6
ow ausopenfinal 2012
ausopenfinal me 2
rafael ausopenfinal 2
3
rafael me
me rafael
ow me
```
### 样例输出 #3
```
4
Roger
2014
```
## 提示

#### 样例 1 解释

第一轮游戏中，Novak 说出单词 `novak`。$1$ 毫秒后，Rafael 记起单词 `goat`。又过了 $3$ 毫秒，他记起目标单词 `simulator`。

第二轮游戏中，Novak 说出单词 `simulator`，但 Rafael 不会记起任何其他单词。

------------

#### 数据规模与约定

对于 $20$ 分的数据，$n \le 10$。  
对于 $40$ 分的数据，$n \le 100$。  
对于 $100\%$ 的数据，$2 \le n \le 10^3$，$1 \le m \le 10^3$，$1 \le t_i \le 10^9$，$1 \le q \le 10^3$。保证单词的长度不超过 $20$ 且仅含小写字母。

------------

#### 说明

**本题分值按 COCI 原题设置，满分 $70$**。

**题目译自 [COCI2020-2021](https://hsin.hr/coci/archive/2020_2021/) [CONTEST #6](https://hsin.hr/coci/archive/2020_2021/contest6_tasks.pdf) _T2 Alias_**。


---

---
title: "[USACO21OPEN] Do You Know Your ABCs? S"
layout: "post"
diff: 普及/提高-
pid: P7556
tag: ['USACO', '2021', '分类讨论']
---
# [USACO21OPEN] Do You Know Your ABCs? S
## 题目描述

Farmer John 的奶牛正在 mooZ 视频会议平台上举行每日集会。她们发明了一个简单的数字游戏，为会议增添一些乐趣。

Elsie 有三个正整数 $A$、$B$ 和 $C$（$1\le A\le B\le C$）。这些数字是保密的，她不会直接透露给她的姐妹 Bessie。她告诉 Bessie $N$（$4\le N\le 7$）个不同的整数 $x_1,x_2,\ldots,x_N$（$1\le x_i\le 10^9$），并宣称每一个 $x_i$ 都是 $A$、$B$、$C$、$A+B$、$B+C$、$C+A$ 或 $A+B+C$ 之一。然而，Elsie 可能在撒谎；这些整数 $x_i$ 可能并没有对应任何一组合法的 $(A,B,C)$。

Bessie 百思不得其解，所以需要靠你来求出与 Elsie 给出的数相符合的三元组 $(A,B,C)$ 的数量。

每个输入包含 $T$（$1\le T\le 100$）组需要独立求解的测试用例。
## 输入格式

输入的第一行包含 $T$。

每个测试用例的第一行包含 $N$，为 Elsie 给 Bessie 的整数的数量。

每个测试用例的第二行包含 $N$ 个不同的整数 $x_1,x_2,\ldots,x_N$。
## 输出格式

对于每个测试用例，输出与 Elsie 给出的数相符合的三元组 $(A,B,C)$ 的数量。
## 样例

### 样例输入 #1
```
10
7
1 2 3 4 5 6 7
4
4 5 7 8
4
4 5 7 9
4
4 5 7 10
4
4 5 7 11
4
4 5 7 12
4
4 5 7 13
4
4 5 7 14
4
4 5 7 15
4
4 5 7 16
```
### 样例输出 #1
```
1
3
5
1
4
3
0
0
0
1
```
## 提示

#### 样例说明

对于 $x=\{4,5,7,9\}$，五个可能的三元组如下：

$$(2, 2, 5), (2, 3, 4), (2, 4, 5), (3, 4, 5), (4, 5, 7).$$

#### 测试点性质：

- 测试点 $1 \sim 4$ 中，所有的 $x_i$ 不超过 $50$。
- 测试点 $5 \sim 5$ 满足 $N=7$。
- 测试点 $7 \sim 15$ 没有额外限制。

#### 说明

供题：Benjamin Qi


---

---
title: "[AHOI2021初中组] 坑"
layout: "post"
diff: 普及/提高-
pid: P7622
tag: ['2021', '安徽']
---
# [AHOI2021初中组] 坑
## 题目背景

AHOI2021 初中组 T2

**你可以选择跳过背景部分。**

买东西的路上小雪吸了好几口雾霾，最后打了个喷嚏。恶劣的天气、压抑的氛围让小雪心情越来越差，之后倒起了苦水：

“唉！今天又被一个不靠谱的同学坑了，浪费了我好多时间。”

“期中考试还早，有什么好焦虑的呢？别卷了，正好来看看最近在蛐蛐国流行的一个游戏吧。”

小雪看了游戏来了精神：看起来好像很解压。
## 题目描述

游戏在一个左右无限延伸的数轴上进行，上面有 $n$ 只跳蚤和 $m$ 个坑，它们都可以被抽象成数轴上的一个点。

玩家每回合需要选择让所有跳蚤一起向左/向右跳一个单位长度。如果一个代表跳蚤的点与一个代表坑的点重合了，跳蚤就会掉进坑中，发出惨叫后死去。

郁闷的小雪想用最快的时间杀死所有跳蚤，请你帮小雪计算一下这个最少的回合数。
## 输入格式

第一行两个空格隔开的正整数 $n,m$。

第二行 $n$ 个空格隔开的整数 $x_1,x_2,\ldots,x_n$，其中 $x_i$ 表示第 $i$ 只跳蚤初始时的坐标。

第三行 $m$ 个空格隔开的整数 $y_1,y_2,\ldots,y_m$，其中 $y_i$ 表示第 $i$ 个坑的坐标。

输入数据保证以上 $n+m$ 个坐标两两互不相等。
## 输出格式

仅一行一个整数，表示杀死所有跳蚤的最少回合数。
## 样例

### 样例输入 #1
```
3 2
3 -1 2
0 10
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
见附加文件的 hole2.in。 
```
### 样例输出 #2
```
见附加文件的 hole2.ans。
```
## 提示

【样例 1 解释】

第一回合让所有跳蚤向右跳一步，第 2 个跳蚤进第一个坑，剩下两个跳蚤分别位于 4, 3。

下面四回合让所有跳蚤向左跳，两个跳蚤都进入第一个坑，游戏结束。


【数据范围与提示】

**提示：本题输入规模较大，请避免使用过慢的输入方式。**

- 对于 $20\%$ 的数据，保证 $1 \le n \le 20$，$1 \le m \le 300$；
- 对于另外 $20\%$ 的数据，保证 $1 \le n,m \le 300$；
- 对于另外 $20\%$ 的数据，保证 $1 \le x_i,y_i \le 2000$；
- 对于另外 $10\%$ 的数据，保证 $1 \le n,m \le 2000$；
- 对于另外 $10\%$ 的数据，保证 $m=2$；
- 对于 $100\%$ 的数据，保证 $1 \le n,m \le 2 \times 10^5$，$-10^9 \le x_i,y_i \le 10^9$。


---

---
title: "[COCI 2010/2011 #5] BRODOVI"
layout: "post"
diff: 普及/提高-
pid: P7633
tag: ['2010', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #5] BRODOVI
## 题目描述

Mirko 住在一个难得有船经过的有港口的小镇上。然而，直到今天，Mirko 还记得那天所有造访过这个港口的船只都出现了。他用索引 $1$ 表示这一天。

许多天过去了，Mirko 记下了至少有一艘船访问港口的日子，把这些日子命名为娱乐日。

此外，Mirko 注意到每艘船都定期访问港口。例如，长度为 $3$ 的间隔表示某艘船在第 $1$ 天、第 $4$ 天、第 $7$ 天、第 $10$ 天等时间访问港口。

给出 Mirko 的娱乐日列表（包括今天，且今天也是一个娱乐日），计算访问他的港口的最小可能的船只数量。

注:所有娱乐日都出现在 Mirko 的列表上，保证永远存在答案。
## 输入格式

输入的第 $1$ 行包含一个整数 $N$，即娱乐天的个数。

下面 $N$ 行，每行一个整数 $A_i$，表示表上的娱乐天数，按升序排列。第一个和最后一个娱乐天分别是 Mirko 开始监测港口交通的日期和今天。今天将一直出现在列表上。第一个索引总是 $1$。
## 输出格式

输出共一行，一个整数，为最小的访问 Mirko 的港口的船舶的数量。
## 样例

### 样例输入 #1
```
3
1
3
4 
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
5
1
7
10
13
19 

```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
3
1
500000000
999999999
```
### 样例输出 #3
```
1
```
## 提示

**【样例说明#1】**

最少需要两条船，第一条每 $2$ 天来一次，第二条每 $3$ 天来一次。

**【数据范围】**

对于 $70\%$ 的数据，$A_i\le 5\times 10^6$

对于 $100\%$ 的数据，$2\le N\le 5000$，$1 \le A_i\le 10^9$

**【说明】**

**【说明】**

本题分值按 COCI 原题设置，满分 $70$。

题目译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #5](https://hsin.hr/coci/archive/2010_2011/contest5_tasks.pdf)  _**T3 BRODOVI**_。


---

---
title: "[COCI 2010/2011 #5] HONI"
layout: "post"
diff: 普及/提高-
pid: P7634
tag: ['2010', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #5] HONI
## 题目描述

COCI 的出题者必须从一堆题目中选择在下一轮中出现的题目。

题目的难度用 $1$ 到 $n$ 的整数来描述，但是对于某些题目来说，这并不容易准确地确定它们的难度。COCI 的出题者认为这些题目可以被视为有两个连续难度之一。例如，某些题目可以被视为难度为 $3$ 或 $4$。

下一轮 COCI 将包含的 $N$ 个题目。每一个难度，都会有且仅有一个题目。当然，没有题目会出现两次。

找出出题者为下一轮选择题目的不同方法的数量。我们认为两种方法是不同的仅当相同的任务分配给了不同的难度。

由于预期的结果可以非常大，输出的方案数 $\% 10^9+7$。
## 输入格式

输入的第一行包含整数 $N$。

第二行包含 $N$ 个整数 $A_i$，第 $i$ 个数代表困难度恰好为 $i$ 的题目的数量。

第三行输入包含 $N-1$ 个整数 $B_i$，第 $i$ 个数代表困难度为 $i$ 或 $i+1$ 的题目的数量。
## 输出格式

输出共一行，一个整数，表示方案数 $\% 10^9+7$。
## 样例

### 样例输入 #1
```
3
3 0 1
0 1 

```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
4
1 5 3 0
0 2 1 
```
### 样例输出 #2
```
33
```
## 提示

**【样例解释#1】**

共 $3$ 种方案：将难度为 $2$ 或 $3$ 的题目视为难度为 $2$ 的，因为难度为 $1$ 的题目有 $3$ 道，所以共 $3$ 种方案。

**【数据范围】**

对于 $100\%$ 的数据，$2\le N\le 10^5$，$0\le A_i,B_i\le 10^9$。

**【说明】**

本题分值按 COCI 原题设置，满分 $100$。

题目译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #5](https://hsin.hr/coci/archive/2010_2011/contest5_tasks.pdf)  _**T4 HONI**_。


---

---
title: "[JOI2018] Art Exhibition"
layout: "post"
diff: 普及/提高-
pid: P7667
tag: ['2018', 'JOI（日本）']
---
# [JOI2018] Art Exhibition
## 题目背景

JOI 共和国将举行一个艺术展。许多来自全国各地的艺术作品将在艺术展中展出。
## 题目描述

有 $N$ 件艺术品是展览的候选作品。艺术品编号从 $1$ 到  $N$。每件艺术品都定义了两个整数：尺寸和价值。艺术品 $i$（$1 \leq i \leq N$）的尺寸为 $A_i$，艺术品 $i$ 的价值为 $B_i$。  
在艺术展中，至少会选择并展示一件艺术品。由于展厅足够大，可以将 $N$ 件作品全部展示。但是，由于 JOI 共和国人的审美意识，我们希望展览选择的艺术品，使展出的艺术品尺寸之间的差异不会太大。另一方面，我们想展示许多具有高价值的艺术品。我们决定按照以下规则选择展览的艺术品：  
- 在选择的展览作品中，$A_{max}$ 为所选作品中最大的尺寸，$A_{min}$ 为所选作品中最小的尺寸。设 $S$ 为所选艺术品的总价值。  
- 然后，我们想要最大化 $S−(A_{max}−A_{min})$。  
现给定展览的艺术品候选数量，以及每件艺术品的尺寸和价值，请编写一个程序来计算 $S−(A_{max}−A_{min})$ 的最大值。
## 输入格式

第一行包含一个整数 $N$，即展览艺术品的候选数量。接下来的 $N$ 行的第 $i$ 行包含两个空格分隔的整数 $A_i$、$B_i$，这意味着艺术品 $i$ 的尺寸是 $A_i$，价值是 $B_i$。
## 输出格式

唯一的一行包含一个整数为 $S−(A_{max}−A_{min})$ 的最大值。
## 样例

### 样例输入 #1
```
3
2 3
11 2
4 5
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
6
4 1
1 5
10 3
9 1
4 2
5 3
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
15 
1543361732 260774320
2089759661 257198921
1555665663 389548466
4133306295 296394520
2596448427 301103944
1701413087 274491541
2347488426 912791996
2133012079 444074242
2659886224 656957044
1345396764 259870638
2671164286 233246973
2791812672 585862344
2996614635 91065315
971304780 488995617
1523452673 988137562
```
### 样例输出 #3
```
4232545716
```
## 提示

#### 数据规模与约定  
对于 $100 \%$ 的数据，$2 \leq N \leq 5×10^5$，$1 \leq A_i \leq 10^{15}$（$1 \leq i \leq N$），$1 \leq B_i \leq 10^9$（$1 \leq i \leq N$）。  
- Subtask $1$（$10$ points）：$N \leq 16$。  
- Subtask $1$（$20$ points）：$N \leq 300$。  
- Subtask $2$（$20$ points）：$N \leq 5000$。  
- Subtask $3$（$50$ points）：没有额外的限制。  
#### 样例说明  
**对于样例 $1$**：本次展览共有 $3$ 幅作品候选。每件艺术品的尺寸和价值如下：  
- 艺术品 $1$ 的尺寸为 $2$，价值为 $3$。  
- 艺术品 $2$ 的尺寸为 $11$，价值为 $2$。  
- 艺术品 $3$ 的尺寸为 $4$，价值为 $5$。  

在这种情况下，如果我们为展览选择艺术品 $1$ 和艺术品 $3$，我们有 $S−(A_{max}−A_{min})$  如下：  
- 在选择的艺术品中，艺术品 $3$ 的尺寸最大。因此，$A_{max} = 4$。  
- 在所选的艺术品中，艺术品 $1$ 的尺寸最小。因此，$A_{min} = 2$。  
- 所选艺术品的总价值为 $3+5=8$。因此，$S=8$。  
由于 $S−(A_{max}−A_{min})$ 不能大于 $7$，因此输出 $6$。
#### 题目说明：  
来源于 The 17th Japanese Olympiad in Informatics (JOI 2017/2018) Final Round 的 [T2：Art Exhibition](https://www.ioi-jp.org/joi/2017/2018-ho/2018-ho-t2-en.pdf)。  
由 @[求学的企鹅](/user/271784) 翻译整理。


---

---
title: "[COCI 2013/2014 #5] OBILAZAK"
layout: "post"
diff: 普及/提高-
pid: P7673
tag: ['2013', 'COCI（克罗地亚）']
---
# [COCI 2013/2014 #5] OBILAZAK
## 题目描述

给出一棵有 $2^K-1$ 个节点的完全二叉树，遍历这棵树的规律如下：

- 起点是二叉树第一层的唯一一个节点。

- 如果当前节点的左孩子还没有记录到，那么就记录左孩子的编号并移动到左孩子处。

- 如果当前节点没有左孩子或者左孩子已经记录过，就记录当前节点的编号。

- 如果当前节点已经记录过，那么就记录右孩子的编号并移动到右孩子处。

- 如果当前节点及此节点的左右孩子都已经记录过，那么就移动到当前节点的父节点处。

现在给出从第一层的节点出发记录下的编号顺序，请你求出原本的完全二叉树。
## 输入格式

第一行，一个整数 $K$，表示这个完全二叉树有 $2^K-1$ 个节点；

第二行，$2^K-1$ 个整数，表示从第一层的节点出发记录下的编号顺序。
## 输出格式

输出共 $K$ 行，为原本的完全二叉树。
## 样例

### 样例输入 #1
```
2
2 1 3 
```
### 样例输出 #1
```
1
2 3 
```
### 样例输入 #2
```
3
1 6 4 3 5 2 7
```
### 样例输出 #2
```
3
6 2
1 4 5 7
```
## 提示

**【样例解释 #1】**

![](https://cdn.luogu.com.cn/upload/image_hosting/wk4ai6vq.png)

先移动到节点 $1$，发现左孩子没有记录，移动到节点 $2$ 并记录节点 $2$；发现节点 $2$ 没有孩子，返回节点 $1$ ，发现此节点没有记录，记录节点 $1$；发现右孩子没有记录，移动到节点 $3$ 并记录节点 $3$。

**【样例解释 #2】**

![](https://cdn.luogu.com.cn/upload/image_hosting/e8txnko0.png)

**【数据范围】**

对于 $100\%$ 的数据，$1\le K\le 10$。

**【说明】**

本题分值按 COCI 原题设置，满分 $80$。

题目译自[COCI2013_2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST #5](https://hsin.hr/coci/archive/2013_2014/contest5_tasks.pdf) _**T2 OBILAZAK**_


---

---
title: "[COCI 2013/2014 #5]  EKSPLOZIJA"
layout: "post"
diff: 普及/提高-
pid: P7674
tag: ['2013', 'COCI（克罗地亚）']
---
# [COCI 2013/2014 #5]  EKSPLOZIJA
## 题目描述

给出一个字符串和一个目标字符串，在给出的字符串中找到所有的目标字符串并删除。

将剩下的小字符串按照原来的顺序拼接，再继续在剩下的字符串中持续这种操作，直到没有更多的目标字符串出现为止。

请打印出剩下的字符串。如果没有剩下的字符串，输出 `FRULA`。
## 输入格式

第一行，一个字符串，表示原字符串；

第二行，一个字符串，表示目标字符串。
## 输出格式

一行，一个字符串，表示剩下的字符串。
## 样例

### 样例输入 #1
```
mirkovC4nizCC44
C4 
```
### 样例输出 #1
```
mirkovniz
```
### 样例输入 #2
```
12ab112ab2ab
12ab
```
### 样例输出 #2
```
FRULA
```
## 提示

**【样例解释 #1】**

第一次删除，原字符串变为 `mirkov**nizC**4` （`*` 表示被删除的字符），即 `mirkovnizC4`。

第二次删除，字符串变为 `mirkovniz**`，即 `mirkovniz`。

**【样例解释 #2】**

第一次删除，原字符串变为 `****1****2ab` （`*` 表示被删除的字符），即 `12ab`。

第二次删除，字符串变为 `****`。故输出 `FRULA`。

**【数据范围】**

对于 $50\%$ 的数据，$1\le $ 原字符串长度 $\le 3000$；

对于 $100\%$ 的数据，$1\le $ 原字符串长度 $\le 10^6$，$1\le $ 目标字符串长度 $\le 36$，所有字符串均由大写字母、小写字母和数字 $0,1...9$ 组成，保证目标字符串中没有重复的字符。

**【说明】**

本题分值按 COCI 原题设置，满分 $100$。

题目译自[COCI2013_2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST #5](https://hsin.hr/coci/archive/2013_2014/contest5_tasks.pdf) _**T3 EKSPLOZIJA**_


---

---
title: "[COCI 2008/2009 #5] LUBENICA"
layout: "post"
diff: 普及/提高-
pid: P7681
tag: ['2008', 'COCI（克罗地亚）']
---
# [COCI 2008/2009 #5] LUBENICA
## 题目描述

一个班有 $n$ 个孩子，他们上课时并没有认真听课，而是在玩 Facebook 社交网页上的扔西瓜游戏。

第一节课上，Goran 向他的每个朋友扔了一个西瓜，**随后几节课**，孩子们都会按照以下方式采取行动：

- 如果上节课一个人被奇数个西瓜扔中，那么这节课他会向所有他的朋友各扔一个西瓜。
- 如果上节课一个人被偶数（**包括 $0$**）个西瓜扔中，那么这节课他会向所有他的朋友各扔两个西瓜。

孩子们按照 $1\sim n$ 编号，其中 Goran 的编号为 $1$。

现在，给定孩子的个数 $n$ 和他们所有人的朋友关系，请求出 $h$ 节课之后，孩子们一共扔了多少个西瓜。
## 输入格式

输入共 $n+1$ 行。

第一行，两个整数 $n,h$，分别表示孩子的个数和课程的节数。  
随后 $n$ 行，每行 $n$ 个整数（**不用空格隔开**），形成一个矩阵。第 $i$ 行描述第 $i$ 个孩子的朋友关系，具体地，如果第 $i$ 行第 $j$ 个元素是 $1$，则表示第 $i$ 个孩子和第 $j$ 个孩子是朋友，否则不是。

输入矩阵是对称的（即 $A$ 如果是 $B$ 的朋友，那么 $B$ 也会是 $A$ 的朋友），并且保证不会出现一个孩子和自己成为朋友的情况。
## 输出格式

输出仅一行，一个整数，表示 $h$ 节课之后孩子们扔出的西瓜总数。
## 样例

### 样例输入 #1
```
4 1
0110
1001
1001
0110
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
4 2
0110
1001
1001
0110
```
### 样例输出 #2
```
14
```
### 样例输入 #3
```
5 3
01000
10110
01000
01001
00010 
```
### 样例输出 #3
```
26
```
## 提示

**【样例 1/2 解释】**

对于样例 $1/2$，首先，Goran 在第一节课上向第 $2$、$3$ 号孩子扔出一个西瓜，并且没有其他孩子扔出西瓜。因此，样例 $1$ 的答案为 $2$。  
第二节课上，第 $2$、$3$ 号孩子都向第 $1$、$4$ 号孩子各扔出一个西瓜，同时第 $1$、$4$ 号孩子由于在上一节课没有被西瓜扔中，因此他们都向第 $2$、$3$ 号孩子各扔出 $2$ 个西瓜。因此第二节课上一共扔出了 $2\times 2\times 1+2\times 2\times 2=12$ 个西瓜。

因此，前两节课一共扔出了 $2+12=14$ 个西瓜，而这就是样例 $2$ 的答案。

**【数据范围】**

对于 $50\%$ 的数据，满足 $h\leqslant 1000$。  
对于所有数据，$1\leqslant n\leqslant 20$，$1\leqslant h\leqslant 10^9$。

**【题目来源】**

本题来源自 **_[COCI 2008-2009](https://hsin.hr/coci/archive/2008_2009/) [CONTEST 5](https://hsin.hr/coci/archive/2008_2009/contest5_tasks.pdf) T4 LUBENICA_**，按照原题数据配置，满分 $100$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。


---

---
title: "[COCI 2009/2010 #4] IKS"
layout: "post"
diff: 普及/提高-
pid: P7696
tag: ['2009', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #4] IKS
## 题目背景

Mirko 的伟大的曾祖母 Katica 是一位狂热的数学家，她喜欢用数学游戏折磨她的曾孙。
## 题目描述

这一天，她在一张纸上写下了一个 $n$ 个数字的序列，并告知 Mirko 可以做如下操作若干次：

- 选取序列中的两个数字（我们不妨称之为 $A,B$），然后选取能整除 $A$ 的质数 $X$。之后，Mirko 把 $A$ 擦去并在原来的位置上写下 $\frac AX$，然后他把 $B$ 擦去并在原来的位置上写下 $B\times X$。

Mirko 希望得到最大分数，因为这样他可以从他的曾祖母那里得到糖果。一个包含 $n$ 个数字的序列的分数是**这 $n$ 个数字的最大公因数**。

Mirko 并不擅长这个，但又很想希望得到糖果，因此找到了你，希望你能编写一个程序计算最大的可能分数，同时他也希望你能够得出在得到最大可能的分数的前提下最少应当执行的操作数。
## 输入格式

输入共两行。

第一行一个整数 $n$，代表序列中的元素个数。  
第二行包含 $n$ 个整数，描述 Katica 给 Mirko 的序列。
## 输出格式

输出仅一行两个整数，第一个整数表示 Mirko 最大能够得到的分数，第二个整数表示 Mirko 在能够获得最大的分数的前提下最少应当执行的操作数。
## 样例

### 样例输入 #1
```
3
4 4 1
```
### 样例输出 #1
```
2 1
```
### 样例输入 #2
```
3
8 24 9
```
### 样例输出 #2
```
12 3
```
### 样例输入 #3
```
5
4 5 6 7 8
```
### 样例输出 #3
```
2 2
```
## 提示

**【样例 1 解释】**

对于样例 $1$，Mirko 可以选择序列中的 $4$ 和 $1$ 两个数，并选择 $4$ 的唯一质因子 $2$。之后 Mirko 将 $4$ 和 $1$ 擦去，并在它们原来所在的位置上都写下了 $2$，这样这个序列的分数是 $2$。可以证明这样的方案可以获得最大的分数并且在此前提下操作数最少。

**【数据范围】**

对于所有数据，$1\leqslant n\leqslant 100$，序列中的元素不超过 $10^6$。

**【题目来源】**

本题来源自 **_[COCI 2009-2010](https://hsin.hr/coci/archive/2009_2010/) [CONTEST 4](https://hsin.hr/coci/archive/2009_2010/contest4_tasks.pdf) T3 IKS_**，按照原题数据配置，满分 $70$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。


---

---
title: "[COCI 2011/2012 #3] POGODAK"
layout: "post"
diff: 普及/提高-
pid: P7744
tag: ['2011', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #3] POGODAK
## 题目背景

Mirko 不喜欢拉丁文作业，所以他和 Slavko 打了个赌。输的人将在整个月内写他们两个人的作业。Mirko 想赢，所以他设计了这个问题用来打赌。
## 题目描述

在他的桌子上，他发现了一个立方体，如图中所示。

![](https://cdn.luogu.com.cn/upload/image_hosting/csekseld.png)

在这个立方体中，两个对立面的点数之和等于 $7$。这意味着，$6$ 在 $1$ 的对面，$5$ 在 $2$ 的对面，$4$ 在 $3$ 的对面。Mirko 将立方体放在了一个 $r\times c$ 的矩阵的左上方，最初立方体的方向是上侧显示 $1$，右侧显示 $3$。Mirko 现在依次重复以下动作：

1. 向右滚动立方体，直到它到达最后一列；
2. 向下滚动到下一行；
3. 向左滚动立方体，直到它到达第一列；
4. 像第二步一样，向下滚动到下一行。

Mirko 不停地重复这些步骤，直到立方体不能够再滚动为止。当一个立方体到达某一格时，Mirko 在这个格子中写下立方体的顶部的数字。最后他把他写的所有数字加起来。Mirko 与 Slavko 打了个赌，赌他能毫无差错地算出这个和。帮助 Slavko 算出这个和以验证 Mirko 的答案。 
## 输入格式

输入仅一行，两个整数 $r,c$，分别表示矩阵的行数和列数。
## 输出格式

输出仅一行一个整数，表示最终矩阵里面填入的所有数字的和。
## 样例

### 样例输入 #1
```
3 2
```
### 样例输出 #1
```
19
```
### 样例输入 #2
```
3 4
```
### 样例输出 #2
```
42
```
### 样例输入 #3
```
737 296
```
### 样例输出 #3
```
763532
```
## 提示

**【样例 1 解释】**

对于样例 $1$，最终矩阵里面填入的数字如下所示：

| $1$ | $4$ |
| :----------: | :----------: |
| $1$ | $5$ |
| $3$ | $5$ |

因此最终的和为 $1+4+1+5+3+5=19$。

**【数据范围】**

对于 $50\%$ 的数据，满足 $r,c\leqslant 100$。  
对于所有数据，$1\leqslant r,c\leqslant 10^5$。

**【题目来源】**

本题来源自 **_[COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST 3](https://hsin.hr/coci/archive/2011_2012/contest3_tasks.pdf) T3 POGODAK_**，按照原题数据配置，满分 $100$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。


---

---
title: "[COCI 2013/2014 #2] PUTNIK"
layout: "post"
diff: 普及/提高-
pid: P7751
tag: ['2013', 'COCI（克罗地亚）']
---
# [COCI 2013/2014 #2] PUTNIK
## 题目描述

销售员 Sept 有一个任务，即游览 $N$ 座城市（从 $1$ 到 $N$ 编号），每座城市只能游览**恰好一次**。

这 $N$ 座城市中，每两座之间都有一列航班。Sept 追求效率，所以他希望在飞行上消耗的时间最少。为此，他可以调整这些城市的游览顺序。

但 Sept 对这个游览顺序有一个奇怪的要求：

- 对于城市 $1$ 没有要求。
- 如果要游览城市 $K(K\in[2,N])$，则所有编号小于 $K$ 的城市，要么都在游览城市 $K$ 前游览完，要么都在游览城市 $K$ 后游览完。\
  换句话说，对于两个城市 $X,Y(1\le X,Y< K)$，不能在城市 $K$ 前游览城市 $X$ 而在城市 $K$ 后游览城市 $Y$。

在这些限制下，给定每两座城市之间乘坐航班所需的时间，求出 Sept 在飞行上消耗的最少时间。
## 输入格式

第一行一个整数 $N$，即城市的数量。

接下来 $N$ 行 $N$ 列整数。我们令 $(A,B)$ 表示第 $A$ 行的第 $B$ 个数，则有

- $(A,B)$ 表示城市 $A,B$ 之间乘坐航班所需的时间。
- 若 $A=B$，$(A,B)=0$。
- $(A,B)=(B,A)$。
## 输出格式

仅一行一个整数，即 Sept 在飞行上消耗的最少时间。
## 样例

### 样例输入 #1
```
3 
0 5 2 
5 0 4 
2 4 0
```
### 样例输出 #1
```
7
```
### 样例输入 #2
```
4 
0 15 7 8 
15 0 16 9 
7 16 0 12 
8 9 12 0
```
### 样例输出 #2
```
31
```
## 提示

#### 样例 1 说明

顺序 $\tt2,1,3$ 或 $\tt3,1,2$ 都是可以的。

注意到 $\tt1,3,2$ 用时更短，但不符合 Sept 的奇怪要求。

#### 样例 2 说明

顺序 $\tt3,1,2,4$ 或 $\tt4,2,1,3$ 都是可以的。

#### 数据规模与约定

**本题不采用捆绑测试，在评测中也不会体现 Subtask。**

- Subtask 1 $\tt(40pts)$：$2\le N\le 10$。
- Subtask 2 $\tt(20pts)$：$2\le N\le 20$。
- Subtask 3 $\tt(60pts)$：无特殊限制。

对于 $100\%$ 的数据，有 $2\le N\le 1500$，$0\le (A,B)\le 10^3$。

#### 来源

**本题译自 [COCI2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 2](https://hsin.hr/coci/archive/2013_2014/contest2_tasks.pdf) _T4 PUTNIK_。**

按照原题数据配置，本题满分 $120$ 分。


---

---
title: "[COCI 2016/2017 #5] Unija"
layout: "post"
diff: 普及/提高-
pid: P7762
tag: ['2016', 'COCI（克罗地亚）']
---
# [COCI 2016/2017 #5] Unija
## 题目描述

给定 $N$ 个几何中心位于平面直角坐标系原点的矩形。将这 $N$ 个矩形进行涂色，求被涂色的总面积。
## 输入格式

第一行，一个整数 $N$。

接下来的 $N$ 行，每行两个偶数 $X,Y$，分别表示矩形的宽和长（分别对应横向长度和纵向长度）。
## 输出格式

输出被涂色的总面积。
## 样例

### 样例输入 #1
```
3
8 2
4 4
2 6
```
### 样例输出 #1
```
28
```
### 样例输入 #2
```
5
2 10
4 4
2 2
8 8
6 6
```
### 样例输出 #2
```
68
```
## 提示

**【样例 1 图解】**

![](https://cdn.luogu.com.cn/upload/image_hosting/g1w4hrf7.png?x-oss-process=image/resize,m_lfit,h_389,w_485)

**【数据规模与约定】**

对于 $40\%$ 的数据，输入的整数均小于 $3333$。

对于 $50\%$ 的数据，没有具有包含关系的矩形。

对于 $100\%$ 的数据，$1 \le N \le 10^6$，$2 \le X,Y \le 10^7$。

**【提示与说明】**

**题目译自 [COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #5](https://hsin.hr/coci/archive/2016_2017/contest5_tasks.pdf) _T3 Unija_。**

**本题分值按 COCI 原题设置，满分 $100$。**


---

---
title: "[COCI 2011/2012 #5] DNA"
layout: "post"
diff: 普及/提高-
pid: P7767
tag: ['2011', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #5] DNA
## 题目描述

有一个由 $A,B$ 组成的 $N$ 个字母的序列。

每次操作可以有两种情况：

1. 改变序列中的一个字符 （$A\to B$ 或 $B\to A$）；

2. 改变序列的前缀，即对 $1$ 到 $K(1\le K\le N)$ 的字符进行操作 1。

求最少进行多少次操作可以使序列全部为 $A$。
## 输入格式

第一行一个整数，表示 $N$。

第二行 $N$ 个字符，表示该序列。
## 输出格式

一行，一个整数，表示答案。
## 样例

### 样例输入 #1
```
4
ABBA
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
5
BBABB
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
12
AAABBBAAABBB
```
### 样例输出 #3
```
4
```
## 提示

$1\le N\le 10^{6}$。

序列仅由 `'A','B'` 构成。

题目译自 [COCI 2011/2012 #5 T3](https://hsin.hr/coci/archive/2011_2012/contest5_tasks.pdf)。


---

---
title: "「MCOI-Zero / AC6-M01」Invasion of Gracemeria"
layout: "post"
diff: 普及/提高-
pid: P7780
tag: ['O2优化']
---
# 「MCOI-Zero / AC6-M01」Invasion of Gracemeria
## 题目背景

我们的首都 Gracemeria 正在遭受不明势力袭击！

空袭造成的破坏遍布全城。

全机，立刻紧急升空迎击！

---

「Garuda 1，你可以起飞了。」

……

「Garuda 1，升空。Cerberus 队，跑道已经清空，你们准备好了就起飞。」

「所有飞机升空后听从 AWACS 的命令。」

「这不是演习。重复一遍，这不是演习！」

……

「这里是 AWACS Ghost Eye。」

……

「Garuda 1，你没僚机。」

「让我看看……   
　Shamrock。」
 
「你也是单机一架，对吗？」

「很好。   
　从现在起你就是 Garuda 2 了。」
 
「你好，这里是 Garuda 2。」

「没时间自我介绍了，快。   
　Garuda 1，加速，我会跟上。」

「尽管给我命令就好。」

「Garuda 队，你们已经可以同 Gracemeria 上空的敌军交战。」

……

**「May the Golden King smiles on us！！」**

$$_{{\frac{\large\text{ACE COMBAT }\Large6}{\tiny{\text{F i r e s\quad O f\quad L i b e r a t i o n}}}}}\\ \text{Mission 01} \\\Large\text{Invasion Of Gracemeria}\\\tiny -\textit{ Through the Heart Of a Nation }-$$

![](https://cdn.luogu.com.cn/upload/image_hosting/nd20pe59.png)
## 题目描述

给定一个长度为 $n$ 的序列 $a$，初始都是 $0$，和一个正整数 $k$。

现有 $q$ 次操作，每次操作给定 $i,v$，表示给序列 $a$ 的后缀 $a_{[i,n]}$ 加上 $v$。

每次操作后，请你输出 **所有数在序列中出现次数的 $k$ 次方和** 对 $20051131$ 取模的结果。

$20051131$ 是质数。
## 输入格式

第一行三个整数 $n,q,k$。

接下来 $q$ 行，每行两个整数，表示这次操作的 $i,v$。
## 输出格式

$q$ 行，每行一个整数，表示这次操作之后所有数在序列中出现次数的 $k$ 次方和对 $20051131$ 取模的值。
## 样例

### 样例输入 #1
```
5 5 2
1 1
2 1
3 1
4 1
5 1
```
### 样例输出 #1
```
25
17
11
7
5
```
## 提示

第一次操作后，有 $5$ 个 $1$，答案为 $5^2=25$。

第二次操作后，有 $1$ 个 $1$ 和 $4$ 个 $2$，答案为 $1^2+4^2=17$。

类似的，答案分别为 $1^2+1^2+3^2=11,1^2+1^2+1^2+2^2=7,5\times 1^2=5$。

---

- Subtask 1（20 pts）：$n,q\leq 2\times 10^3$。
- Subtask 2（40 pts）：$n\leq 2\times 10^3$。
- Subtask 3（40 pts）：无特殊限制。

对 $100\%$ 的数据，保证 $1\leq n,v,k\leq 20051130$，$1\leq q\leq 5\times 10^5$，$1\leq i\leq n$。

idea：Sol1，solution：Sol1，code：Sol1，data：Sol1 & 斜揽残箫


---

---
title: "[COCI 2016/2017 #6] Turnir"
layout: "post"
diff: 普及/提高-
pid: P7787
tag: ['2016', 'COCI（克罗地亚）']
---
# [COCI 2016/2017 #6] Turnir
## 题目描述

给定一个由 $2^N$ 个正整数组成的数列。每一轮将这些数字按照给定的顺序进行比大小，大的数字留下，小的数字淘汰，直至只剩下最后一个数字为止。

现在给你这 $2^N$ 个数字的初始排列顺序，请你求出每个数字能活到的最大的轮数。
## 输入格式

第一行，一个整数 $N$；

第二行，$2^N$ 个整数 $A_i$，表示数列中的数。
## 输出格式

一行，$2^N$ 个整数，分别表示第 $i$ 个数能活到的轮数。
## 样例

### 样例输入 #1
```
2
1 4 3 2
```
### 样例输出 #1
```
2 0 1 1
```
### 样例输入 #2
```
4
5 3 2 6 4 8 7 1 2 4 3 3 6 4 8 1
```
### 样例输出 #2
```
1 2 2 1 1 0 1 3 2 1 2 2 1 1 0 3
```
### 样例输入 #3
```
1
1 1
```
### 样例输出 #3
```
0 0
```
## 提示

**【样例解释 #2】**

![](https://cdn.luogu.com.cn/upload/image_hosting/tricmynf.png)

**【数据范围】**

对于 $100\%$ 的数据，$1\le N\le 20$，$0\le A_i\le 1\times 10^9$。

**【说明】**

本题分值按 COCI 原题设置，满分 $100$。

题目译自 [COCI2016_2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST #6](https://hsin.hr/coci/archive/2016_2017/contest6_tasks.pdf) _**T3 TURNIR**_


---

---
title: "[COCI 2015/2016 #6] PIANINO"
layout: "post"
diff: 普及/提高-
pid: P7799
tag: ['2015', 'COCI（克罗地亚）']
---
# [COCI 2015/2016 #6] PIANINO
## 题目描述

$\text{Mirka}$ 是个业余钢琴家，她正在学习一首乐曲。但她不太能找准音，因此她会采用一种特殊的技巧。

这首乐曲中有 $N$ 个音符，每个音符都有一个标准音 $a_i$。$\text{Mirka}$ 能准确地弹出第一个音，接下来她会确定一个值 $K$。

- 如果下一个音符的标准音大于当前音符的标准音，她就会将自己当前弹的音升高 $K$。
- 如果下一个音符的标准音小于当前音符的标准音，她就会将自己当前弹的音降低 $K$。
- 如果下一个音符的标准音等于当前音符的标准音，她不会改变当前弹的音。

如果当前弹的音等于当前字符的标准音，就算 $\text{Mirka}$ 弹准了一个音。请帮她确定一个非负整数 $K$，使得她弹准的音最多。
## 输入格式

第一行包含一个整数 $N$。

第二行包含 $N$ 个整数 $a_i$，其中 $a_i$ 为第 $i$ 个音符的标准音。
## 输出格式

第一行输出一个整数，为 $\text{Mirka}$ 最多能弹准的音。

第二行输出一个非负整数，为 $K$ 的值。您只需输出**任意一种满足条件**的 $K$ 即可。
## 样例

### 样例输入 #1
```
5
1 2 0 3 1
```
### 样例输出 #1
```
3
2
```
### 样例输入 #2
```
7
2 1 -6 -2 1 6 10
```
### 样例输出 #2
```
5
4
```
## 提示

**【样例 1 解释】**

当 $K=2$ 时，她弹出的音为 **1**，3，1，**3**，**1**，共弹准了 $3$ 个音。

注意 $K=1$ 也是一种可行的方案。

**【样例 2 解释】**

当 $K=4$ 时，她弹出的音为 **2**，-2，**-6**，**-2**，2，**6**，**10**，共弹准了 $5$ 个音。

**【数据范围】**

对于 $100\%$ 的数据，$2\le N\le 10^6$，$-10^9\le a_i\le 10^9$。

**【评分方式】**

本题启用非官方的自行编写的 [Special Judge](https://www.luogu.com.cn/paste/i91dcbr2)，也可在附件中获取。欢迎大家 Hack（可私信或直接发帖）。Hack 数据作为测试点单独放在最后，对应测试点分数均为 0 分。

**【题目来源】**

**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [CONTEST #6](https://hsin.hr/coci/archive/2015_2016/contest6_tasks.pdf) T3 PIANINO**。

**本题分值按 COCI 原题设置，满分 $100$**。


---

---
title: "谜"
layout: "post"
diff: 普及/提高-
pid: P7813
tag: ['2021', 'O2优化', '洛谷月赛']
---
# 谜
## 题目背景

$\text{我需要你给我方向}$

$\text{哪怕要我独自穿过人海茫茫}$

$\text{为了你尝风霜}$

$\text{我流浪远方}$

$\text{需要你给我力量}$

$\text{无论如何我会坚强}$

$\text{只要你给我希望}$

[Source](https://www.kugou.com/song-36/1y5t3b.html)
## 题目描述

在一个大小为 $N$ 的数字三角形中：

- 第 $1$ 行为 $1$；
- 第 $2$ 行为 $2\sim3$；
- 第 $3$ 行为 $4\sim6$；
- 第 $4$ 行为 $7\sim10$；
- $\cdots~\cdots$
- 第 $N$ 行包含 $N$ 个数字，为 $\frac{N(N-1)}{2}+1\sim\frac{N(N+1)}{2}$。

下图展示了一个 $N=5$ 的数字三角形。

![](https://cdn.luogu.com.cn/upload/image_hosting/fpx5rw7l.png)

---

记 $(i,j)$ 表示第 $i$ 行第 $j$ 个数字。

已知 $(i,j)$ 能直接到达 $(i+1,j)$ 或 $(i+1,j+1)$，反之，$(i+1,j)$ 或 $(i+1,j+1)$ 也能直接到达 $(i,j)$。

现在任选一个数字作为起点，求 **连续** 地经过 $K$ 个 **不同** 的数字时，这 $K$ 个数的和的最大值，对 $10^9+7$ 取模。
## 输入格式

**本题包含多组数据测试。**

第一行，输入一个正整数 $T$，表示询问组数。

接下来 $T$ 行，每行输入两个正整数 $N,K$。
## 输出格式

共 $T$ 行，每行输出一个整数，表示答案对 $10^9+7$ 取模的结果。
## 样例

### 样例输入 #1
```
1
5 5
```
### 样例输出 #1
```
61
```
### 样例输入 #2
```
5
2676 1930
5148 3667
5453 4764
16734806 16332913
26943973 33293903 
```
### 样例输出 #2
```
909411538
587883333
823595806
727601062
965648555
```
## 提示

#### 样例说明

对于样例 #1，如题面中的图所示，一种可行的方案是：以 $13$ 为起点，$13\rightarrow9\rightarrow14\rightarrow10\rightarrow15$，和为 $13+9+14+10+15=61$。

### 数据范围

**本题采用捆绑测试。**

| Subtask | 分值 | $N\le$ | $K\le$ |
| :----------: | :----------: | :----------: | :----------: |
| $1$ | $30$ | $10^3$  |  |
| $2$ | $30$ | $10^6$ |  |
| $3$ | $30$ | $10^9$ | $1$ |
| $4$ | $10$ | $10^9$ |  |

对于 $100\%$ 的数据：$1\le T\le 10^5$，$1\le\color{red}\dfrac{K+1}{2}\le N\color{black}\le10^9$。


---

---
title: "「JZOI-2」猜数列"
layout: "post"
diff: 普及/提高-
pid: P7849
tag: ['交互题', 'Special Judge']
---
# 「JZOI-2」猜数列
## 题目背景

团员们满脑子都是办周年庆，但小僖只想摸鱼。

于是小僖拿出了最喜欢的数列来考考你。
## 题目描述

小僖有一个乱序的等差数列 $A$。

你可以发出两种询问：

1. 询问原序列下标为 $x,y$ 的数在等差数列（非模意义下）中的大小关系。
1. 询问原序列下标为 $x$ 的数在等差数列（模意义下）中的值。

但由于交互库出了点问题，你的询问 $2$ 最多能询问 $q$ 次。

给定等差数列的长度 $n$ 和询问次数 $q$，和固定的模数 $p=10^{9}+7$，求这个等差数列的公差 $d$。

**总询问次数不得超过 $2n$ 次。交互完成后请立刻输出答案。**

**交互方式：**

输入数列的长度 $n$ 和询问次数 $q$ 以开始交互。

交互过程中，您可以进行题目描述中的两种询问。

对于第一种询问，交互库将会返回 $1$ 代表 $>$ 或 $0$ 代表 $<$ 。询问格式为 `> x y`。

对于第二种询问，交互库将会返回一个正整数 $A_i$。询问格式为 `? x`。

在您确定答案后，请以 `! d` 的形式输出一行，停止交互。

在您输出一行后，请清空缓冲区：

在 C++ 中，使用 `fflush(stdout)` 或 `cout.flush()`。

在 Pascal 中，使用 `flush(output)`。

在 Python 中，使用 `stdout.flush()`。

其它语言请自行查阅文档。

**请遵循题目完成交互，发出不合法询问可能会出现 TLE，WA 等问题。**
## 输入格式

见交互方式。
## 输出格式

见交互方式。

数据保证不会有多种可能的 $d$。
## 样例

### 样例输入 #1
```
3 6
1
2
3
```
### 样例输出 #1
```
? 1
? 2
? 3
! 1
```
## 提示

对于 $50\%$ 的数据保证 $q=2n$。

另 $50\%$ 的数据保证 $q=2$。

对于 $100\%$ 的数据保证 $2\leq n\leq 100000$，$0\leq A_i< p$，$1\le d < p$


---

---
title: "「SWTR-7」My rating is -32（easy version）"
layout: "post"
diff: 普及/提高-
pid: P7874
tag: ['O2优化', '洛谷月赛']
---
# 「SWTR-7」My rating is -32（easy version）
## 题目背景

#### 本题是 My rating is ... 的 easy 版本。注意题目限制和数据范围与 [hard](https://www.luogu.com.cn/problem/T167832) 版本不同。

#### 请注意特殊的时空限制，题目描述下方有简化题意。

[My rating is -32.](https://codeforces.com/blog/entry/71123)

说明：上方的帖子是机房里某个同学很久很久以前的黑历史，现在成了机房传世经典，不是为了出比赛才发的，请不要误会。
## 题目描述

小 A 想在 Codeforces 上发 $n$ 篇帖子！例如：

> “My rating is 1064.”
>
> “I am PolarSea.”
>
> “你知道 phi 吗？你知道你的 phi 处是哪里吗？你知道它的 price 吗？1e9 + 7。”
>
>“每道题都很简单，全场虐题不用烦。T1 到场先签到，T2 上手随便切，T3 一交就能过，T4 稍想也能 A。DP 转移很容易，数学结论尽皆知。建图方法极明显，数据结构很一般。不卡空间不卡常，码量不大手不酸。没有毒瘤大模拟，只有良多大水题。片刻四题提交过，人人 AK 笑开颜。”
>
> “……”

为此，小 A 新注册了 $k$ 个账号。他决定**按照从 $1$ 到 $n$ 的顺序**发出每篇帖子，并**用到所有 $k$ 个账号**。不过刷屏过多会引起 Mike 的注意并被封号，小 A 当然不希望这样：他进行了一些评估，得到了每篇帖子的安全指数 $a_i$，表示他发出第 $i$ 篇帖子后不被封号的概率。

由于第一印象非常重要，小 A 定义一个账号的安全指数为该账号所发出的**第一篇**帖子的安全指数。此外，如果**用同一个账号连续发出两个帖子**，Mike 会立刻封掉这个账号，因此这种情况**是不合法的**。

小 A 希望找到这样一个发帖方案，使得所有账号的安全指数之和最大。你只需要求出安全指数之和的最大值即可。

---

**「简化题意」**

将 $1\sim n$ **不重不漏**地分进 $k$ 个集合 $S_1,S_2,\cdots,S_k$ 中，满足**相邻的数不在同一集合** 且 $|S_i|>0$。求 

$$\sum_{i=1}^k a[{\min_{j\in S_i}j}]$$

的最大值，其中 $[]$ 表示**下标**。
## 输入格式

**本题有多组数据。**

第一行一个整数 $t$，表示该测试点编号。  
第二行一个整数 $T$，表示数据组数。

对于每组数据：

第一行两个整数 $n,k$。  
第二行 $n$ 个整数 $a_1,a_2,\cdots,a_n$ 表示每个帖子的安全指数。
## 输出格式

对于每组数据，一行一个整数表示答案。
## 样例

### 样例输入 #1
```
0
3
4 2
1 1 3 2
8 3
1 3 2 8 6 4 7 5
40 10
9843011 22841896 42690334 3412396 8420789 100693326 23390709 11537210 145661796 21418321 16914724 146120903 14287416 9157773 259599687 16469809 13371424 221660485 23554750 3004543 19382066 514113557 959488450 162305801 377127750 240963428 597774302 18789772 647693870 517468301 547221960 162988230 309004668 267293109 867629494 476230153 70400563 100943563 140708197 999999999

```
### 样例输出 #1
```
2
12
5684074840
```
## 提示

**「样例 1 说明」**

小 A 只能使用账号 $1$ 发帖子 $1$ 和 $3$，剩下的帖子用账号 $2$ 发。其安全程度为 $a_{\min(1,3)}+a_{\min(2,4)}=2$。

**「数据范围与约定」**

本题共有 6 个测试点。

- Testcase #0（1 points）：是样例。
- Testcase #1（10 points）：$k=2$。
- Testcase #2（30 points）：$n\leq 10$，$k\leq 4$。
- Testcase #3（15 points）：$k=3$。
- Testcase #4（20 points）：$n\leq 64$，$k\leq 7$。
- Testcase #5（24 points）：无特殊限制。

对于 $100\%$ 的数据，$2 \leq k \leq n \leq 10^4$，$0 \leq a_i \leq 10^9$，$T=10$。  
对于所有测试点，**时间限制 200ms，空间限制 16MB。**

**「题目来源」**

[Sweet Round 07](https://www.luogu.com.cn/contest/) B1。  
idea & solution：[tzc_wk](https://www.luogu.com.cn/user/115194)；data & 验题：[Alex_Wei](https://www.luogu.com.cn/user/123294)。

> **My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. My rating is -32. ……**
>
> **Upvote&emsp;-43&emsp;Downvote&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;PolarSea**  


---

---
title: "[入门赛 #10] Coin Selection G（hard version）"
layout: "post"
diff: 普及/提高-
pid: P7891
tag: ['2023', 'O2优化', '语言月赛']
---
# [入门赛 #10] Coin Selection G（hard version）
## 题目描述

Farmer John 和 Bessie 正在一起玩硬币选择游戏。

初始时桌面上有 $n$ 枚硬币，每枚硬币有一个面额，我们使用 $a _ 1, a _ 2, \cdots, a _ n$ 分别代表第 $1, 2, \cdots, n$ 枚硬币的面额。

他们还各有一个属于自己的钱包，初始时，钱包都是空的。

从 **Bessie** 开始，双方轮流操作。每次操作中，当前的操作者会从桌面上剩余的硬币中选择**面值不超过当前自己钱包中硬币的总面额**的硬币中**面额最大的**一枚硬币，把它从桌子上拿走，放到自己的钱包里。如果桌面上剩余的**所有**硬币面值都**超过了自己钱包里已有硬币的总面额**，那么选择剩余的所有硬币中面额**最小**的一个。

当桌面上没有硬币时，游戏结束。

请你分别求出，	游戏结束后，Farmer John 和 Bessie 钱包里硬币的总面额。
## 输入格式

第一行为一个整数，代表初始时桌面上的硬币的数量 $n$。  
第二行为 $n$ 个整数 $a _ 1, a _ 2, \cdots, a _ n$，分别代表第 $1, 2, \cdots, n$ 枚硬币的面额。
## 输出格式

输出一行两个整数，第一个整数表示 Bessie 最终钱包里硬币的总面额，第二个整数表示 Farmer John 最终钱包里的总面额。
## 样例

### 样例输入 #1
```
2
3 2
```
### 样例输出 #1
```
2 3
```
### 样例输入 #2
```
5
1 2 3 4 5
```
### 样例输出 #2
```
9 6
```
## 提示

### 数据规模与约定

- 对 $100\%$ 的数据，保证 $1 \leq n \leq 10^5$，$1 \leq a_i \leq 10^{9}$。

Provider：一扶苏一


---

---
title: "兜心の顶"
layout: "post"
diff: 普及/提高-
pid: P7903
tag: ['2021', 'Special Judge', 'O2优化', '洛谷月赛']
---
# 兜心の顶
## 题目背景

Source：[八仙敬酒](/paste/78f1vlm0)，这是可以点的。

- 吕洞宾——醉酒提壶力千钧；
- 铁拐李——旋肘膝撞醉还真；
- **汉钟离——跌步抱坛兜心顶**；
- 蓝采和——单提敬酒拦腰破；
- 张果老——醉酒抛杯踢连环；
- 曹国舅——仙人敬酒锁喉扣；
- 韩湘子——擒腕击胸醉吹箫；
- 何仙姑——弹腰献酒醉荡步。
## 题目描述

给定正整数 $n$，要求构造一棵 $n$ 个结点的树，满足树的直径的重心 **不是** 树的重心。

同时这棵树需满足：直径$^1$、重心$^2$、直径的重心$^3$全部唯一。

---

注：

- 树的直径$^1$：[https://oi-wiki.org/graph/tree-diameter/](https://oi-wiki.org/graph/tree-diameter/)
- 树的重心$^2$：[https://oi-wiki.org/graph/tree-centroid/](https://oi-wiki.org/graph/tree-centroid/)
- 树的直径的重心$^3$：将树的直径（一条链）视作一棵树，求其中心（一个点）。
## 输入格式

第一行输入一个正整数 $n$，表示树的结点个数。
## 输出格式

第一行输出一个正整数 $n$。

接下来 $n-1$ 行，每行输出两个正整数 $u,v$，表示树的一条边。

无解输出 `-1`。

**本题采取 Special Judge，输出任意一组合法解均给分。**
## 样例

### 样例输入 #1
```
20
```
### 样例输出 #1
```
20
20 18
1 3
19 12
19 4
16 1
4 1
1 7
16 10
7 20
13 8
10 2
18 13
13 17
14 18
11 19
16 5
2 6
16 9
17 15
```
### 样例输入 #2
```
2
```
### 样例输出 #2
```
-1
```
## 提示

#### 样例说明

![](https://cdn.luogu.com.cn/upload/image_hosting/kdgu2xd9.png)

样例 #1 中直径的重心是 $7$，树的重心是 $1$，$1\ne7$。

样例 #2 中 $n=2$，只有两个点时显然重心不可能唯一。

#### 数据范围

**本题采取捆绑测试。**

| 子任务编号 | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $30$ | $n\le10$ |
| $2$ | $30$ | $n$ 是奇数 |
| $3$ | $30$ | $n$ 是偶数 |
| $4$ | $10$ | 无 |

对于 $100\%$ 的数据：$1\le n\le10^4$。

**本题提供 Special Judge 源码，参见下方附件。**


---

---
title: "[COCI 2021/2022 #1] Kamenčići"
layout: "post"
diff: 普及/提高-
pid: P7928
tag: ['2021', 'COCI（克罗地亚）']
---
# [COCI 2021/2022 #1] Kamenčići
## 题目描述

Alice 和 Bob 又在玩游戏。

在他们面前有 $n$ 块石头排成一行，石头有红和蓝两种颜色。

Alice 先手，每次每人从两端选择一端取出一块石头，谁先取出 $k$ 块红色石头谁输掉。

假设 Alice 和 Bob 都是绝顶聪明的，求出最后谁获胜。
## 输入格式

第一行为两个整数 $n,k$。

接下来一行一个长度为 $n$ 的字符串，仅由 `C` 和 `P` 组成，`C` 表示红色石头，`P` 表示蓝色石头。
## 输出格式

如果 Alice 必胜，输出 `DA`，否则输出 `NE`。
## 样例

### 样例输入 #1
```
4 1
CCCP
```
### 样例输出 #1
```
DA
```
### 样例输入 #2
```
8 2
PCPPCCCC

```
### 样例输出 #2
```
DA
```
### 样例输入 #3
```
9 1
PPCPPCPPC
```
### 样例输出 #3
```
NE
```
## 提示

#### 数据范围
对于全部数据，$1\le k<n\le 350$，红色石头至少出现 $2k-1$ 次。

| Subtask | 特殊限制 | 分值 |
| :----------: | :--------: | :-------: |
| $1$ | $n\le 20$ | $10$ | 
| $2$ | $n\le 50$ | $20$ |
| $3$ | 无特殊限制 | $40$ |

#### 说明
**本题总分 $70$ 分。**

本题译自 [Croatian Open Competition in Informatics 2021/2022](https://hsin.hr/coci/archive/2021_2012) [Contest #1](https://hsin.hr/coci/archive/2021_2022/contest1_tasks.pdf) T2 Kamenčići。


---

---
title: "「Wdcfr-1」Alice Wins! (hard version)"
layout: "post"
diff: 普及/提高-
pid: P7940
tag: ['Special Judge', 'O2优化']
---
# 「Wdcfr-1」Alice Wins! (hard version)
## 题目背景

![](https://cdn.luogu.com.cn/upload/image_hosting/zshuq5iq.png)
## 题目描述

**The difference between the versions is the limit of operations.**

Alice is a cute girl who has a lot of dolls.

There are $4\cdot n$ dolls playing *rock-paper-scissors*. They are divided into two teams: Team A and Team B. Each team contains $2\cdot n$ dolls.

A total of $2\cdot n$ rounds of the game will be played. In the $i$-th round, the $i$-th doll in Team A will play against the $i$-th doll in Team B. If the doll in Team A wins, Team A will get $1$ point. If it loses, Team A will lose $1$ point. If it ties, Team A will not get points.

Alice knows all the dolls' choices in this game. To be precise, she uses two arrays $a$ and $b$ to represent the choices of the dolls in the two teams. $a_i$ means the choice of the $i$-th doll in Team A, and $b_i$ means the choice of the $i$-th doll in Team B. In this question, we use $1$ for rock, $2$ for scissors, and $3$ for paper.

Now for **each team**, Alice wants to change the choices of **exact** $n$ dolls to make the score of Team A as high as possible.

Find the maximum score of Team A and its construction method. If there are multiple answers print any of them (you still have to maximize the score of Team A).
## 输入格式

Each test contains multiple testcases. The first line contains an integer $T$, the number of test cases.

For each test case, the first line contains one integer $n$.

Then two lines follow, containing an array $a$ of length $2\cdot n$ and an array $b$ of length $2\cdot n$, respectively.
## 输出格式

For each test case, output three lines.

The first line contains one integer, which is the maximize the score of Team A.

The second line contains an array $a'$ of length $2\cdot n$, which represents the modified $a$ array. For integers $1$ to $2\cdot n$, if $a_i \ne a'_i$, then it means you have modified the hand shape of one player in Team A.

The third line contains an array $b'$ of length $2\cdot n$, which represents the modified $b$ array. For integers $1$ to $2\cdot n$, if $b_i \ne b'_i$, then it means you have modified the hand shape of one player in Team B.
## 样例

### 样例输入 #1
```
1
1
1 2
1 2
```
### 样例输出 #1
```
2
1 1
2 2
```
## 提示

### Explanation

For the first test case, we can change $a_2$ to $1$ and $b_1$ to $2$. Then Team A can get $2$ points. It can be proved that this is the maximum score that Team A can get.

### Constraints

$1\le T,n \le 10^5;\ 1\le a_i,b_i \le 3$. The sum of $n$ of all test cases $\le 10^5$.
## 题目翻译

AB 每队 $2n$ 人正在玩石头剪刀布。A 队第 $i$ 个人出 $a_i$，B 队第 $i$ 个人出 $b_i$。编号相同的人会对战。若 A 队赢则加一分，平不得分，输扣一分。你必须**恰好**改变**每队** $n$ 个人的出拳方案，使得 A 队的得分最高。输出得分的最大值和任意一组构造方案。

本题中，我们用 $1$ 代表石头，$2$ 代表剪刀，$3$ 代表布。


---

---
title: "「Wdcfr-1」Magical Expression"
layout: "post"
diff: 普及/提高-
pid: P7941
tag: ['O2优化']
---
# 「Wdcfr-1」Magical Expression
## 题目描述

Nitori is learning postfix expressions. She has a incomplete postfix expression $E$ of length $n$. Being a Youkai, she wants to find its magical property.

Her postfix expression contains the Bitwise Or operator (denoted as `|`), the Bitwise And operator (denoted as `&`), and numbers `0` and `1`. Being incomplete, some operators have not been decided yet and are denoted as `?`. She promised that $E$ **will become a *vaild* postfix expression** after you complete it.

In this problem, the term *substring* is defined as a continuous segment of $E$. **Two substrings are considered different as long as their positions or length differ.**  So `1?0`, `01?0` are all substrings of `01?01?|`  , but `0101` is not.

Nitori found out that a substring of her expression is *magical* if and only if the following conditions are met:

- It is possible to transform it into a *valid* postfix expression after replacing `?` with either `&` or `|` .
- Among these transformations, it is possible to find at least one of them that after applying it, the expression yields $0$,  and at least one of them that after applying it, the expression yields $1$.

Your task is to find out the number of *magical* substrings.

## 输入格式

The first line contains an integer $T$, the number of test cases.

For each test case, input one integer $n$ and an expression $E$ in a single line.
## 输出格式

For each test case, print one integer which is the answer.
## 样例

### 样例输入 #1
```
2
3 01?
7 01?01?|
```
### 样例输出 #1
```
1
3
```
## 提示

### Constraints

$1\le T,n\le 2\times 10^6$. The sum of $n$ of all test cases $\le 2\times 10^6$.
## 题目翻译

给定一个合法的含 `|&?01` 的后缀表达式（以字符串形式给出，其为“合法的”代表将所有 `?` 替换为运算符后其会成为一个合法的后缀表达式），试求出其有多少个子串满足：

- 将所有的 `?` 替换成 `|` 或 `&` 后，该串为合法的后缀表达式；
- 存在一种将所有的 `?` 替换成 `|` 或 `&` 的方法使得该式所得结果为 $0$，同时也存在替换方法使得结果为 $1$。

请输出这样的子串的数量。两个子串是不同的仅当它们长度不同或位置不同。


---

---
title: "[✗✓OI R1] 铝锤制作"
layout: "post"
diff: 普及/提高-
pid: P7947
tag: ['Special Judge', 'O2优化']
---
# [✗✓OI R1] 铝锤制作
## 题目背景

DPair 打算用米德拉什给大家带来笑容。

因为 Lillia 不知道什么是米德拉什，所以打算阻止 Ta。  

为了阻止 DPair，你需要制作一个小铝锤。

如果你不知道如何制作小铝锤，你可以参考题目下方给出的视频。

或者，你也可以选择做这场月赛的签到题。
## 题目描述

构造一个正整数数列 $a$，使 $a$ 中所有元素之积为 $n$，所有元素之和为 $k$。如果不存在这样的数列，输出 `-1`。
## 输入格式

一行两个正整数 $n,k$。
## 输出格式

第一行一个整数 $m$，代表这个数列的长度。  
接下来一行 $m$ 个正整数 $a_i$，代表这个数列。要求 $1\leq m \leq 1000$，$1\leq a_i \leq 1000$。  
特别的，如果没有符合要求的数列，直接输出 `-1`。

**本题采用 Special Judge。如果有多种答案，输出任意一种即可。**
## 样例

### 样例输入 #1
```
67 68
```
### 样例输出 #1
```
2
1 67
```
### 样例输入 #2
```
100 1
```
### 样例输出 #2
```
-1
```
### 样例输入 #3
```
80 16
```
### 样例输出 #3
```
6
1 1 4 5 1 4
```
## 提示

**【样例解释】**

对于样例一，显然有 $1\times67=67,1+67=68$。  
对于样例二，可以证明没有合法的解。

**【数据范围】**

对于 $10\%$ 的数据，$1\leq n,k \leq 3$；  
对于 $30\%$ 的数据，$1\leq n,k \leq 10$；  
另有 $10\%$ 的数据，$n=k$；  
对于 $100\%$ 的数据，$1\leq n,k \leq 100$。

![](bilibili:av498389435)


---

---
title: "[✗✓OI R1] 前方之风"
layout: "post"
diff: 普及/提高-
pid: P7948
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# [✗✓OI R1] 前方之风
## 题目背景

>「不错的恶意。」  
> 女性呵呵笑道。  
>「但是，如果向我发出恶意，你可是会死哦？」

你不知道什么动作会被算作发出恶意，所以你决定做一道题来分散自己的注意力。
## 题目描述

给出一个长度为 $n$ 的序列 $a$ 和 $q$ 个询问，第 $i$ 个询问给出 $k_i$。对于每次询问，你需要进行以下操作：
1. 求出剩下的数的平均数 $\mathit{avg}$。
2. 将剩下的数中 $<\mathit{avg}-k_i$ 的数删去。
3. 重复以上两个步骤直到所有数都不会被删去。
4. 输出最后会剩下几个数。

**注意：询问之间是独立的，也就是说，不会真的删去那些数。**
## 输入格式

**本题有多组测试数据。**

第一行一个整数 $T$，表示测试数据的数量。  
对于每一组数据，第一行两个整数 $n,q$，表示数字个数和询问数量。  
接下来一行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。  
接下来一行 $q$ 个整数，第 $i$ 个整数表示 $k_i$。
## 输出格式

输出共 $T$ 行，每行输出 $q$ 个整数，第 $i$ 个数表示第 $i$ 次询问最终会剩下几个数。
## 样例

### 样例输入 #1
```
5
9 9
19 99 63 39 72 46 97 38 68 
0 6 4 0 7 1 0 3 6 
6 8
88 62 48 50 8 47 
0 6 1 5 2 2 6 1 
6 5
33 3 54 17 26 64 
87 89 92 70 59 
18 19
71 52 77 38 12 34 82 14 57 39 91 7 56 86 35 68 38 14 
9 9 1 5 1 3 4 5 6 1 6 0 3 0 2 1 3 5 8 
10 15
4 77 78 76 5 19 98 94 77 81 
17 43 4 86 2 91 85 4 81 74 44 16 21 69 32 

```
### 样例输出 #1
```
1 2 2 1 2 2 1 2 2
1 1 1 1 1 1 1 1
6 6 6 6 6
4 4 1 3 1 2 2 3 3 1 3 1 2 1 1 1 2 3 4
7 7 2 10 2 10 10 2 10 10 7 7 7 10 7

```
### 样例输入 #2
```
1
5 1
20 0 0 0 0
5
```
### 样例输出 #2
```
5
```
## 提示

**【样例解释】**

对于第一组样例，当 $k=0$ 时，显然只会留下 $99$。  
当 $k=6$ 时，删除数的步骤如下：
- 平均数为 $60\dfrac{1}{9}$，留下 $99,63,72,97,68$。
- 平均数为 $79.8$，留下 $99,97$。
- 平均数为 $98$，停止删除。

**【数据范围】**

对于 $100\%$ 的数据，满足 $1\leq n,q \le 10^5$，$1\le T \le 10$，$0 \le a_i,k_i \le 10^9$。

| subtask | 特殊数据范围 | 分数 |  时间限制
| :----------: | :----------: | :----------: |  :----------: |
| 1 | $n,q \le 200$ | 20 |   300ms 
| 2 | $n,q \le 2000$ | 30  | 300ms
| 3 |  | 50 | 800ms|

>「不错的恶意。」  
> 女性呵呵笑道。  
>「而且你运气很不错，如果放在以前，你早就死了。」

![](https://cdn.luogu.com.cn/upload/image_hosting/6icoj36r.png)


---

---
title: "[COCI 2014/2015 #6] KRATKI"
layout: "post"
diff: 普及/提高-
pid: P7957
tag: ['2014', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #6] KRATKI
## 题目背景

我们都非常熟悉「最长单调子序列」问题：

>给定一个长度为 $n$ 的数列，你需要求出它的 LMS（即最长单调子序列）的长度。\
>**请注意**，这里「LMS」是指「递增子序列和递增递减子序列中**更长的一个**」。\
>即需要对 LIS 和 LDS 的长度取最大值。

现在你需要解决一个 LMS 的逆问题。
## 题目描述

给定数列的长度 $n$。

你需要构造出一个 $n$ 的排列，使得它的 LMS 长度为 $k$。
## 输入格式

仅一行两个整数 $n,k$。
## 输出格式

如果无解，输出 $\texttt{-1}$。

否则输出一行 $n$ 个整数，即你构造的数列。

**如果存在多组解，输出任意一种。**
## 样例

### 样例输入 #1
```
4 3
```
### 样例输出 #1
```
1 4 2 3
```
### 样例输入 #2
```
5 1
```
### 样例输出 #2
```
-1
```
### 样例输入 #3
```
5 5
```
### 样例输出 #3
```
1 2 3 4 5
```
## 提示

#### 样例 1 说明

$\{1,4,2,3\}$ 的 **LMS** 为 $\{1,2,3\}$，长度为 $3$，符合要求。

#### 数据规模与约定

**本题采用 Special Judge。**

对于 $100\%$ 的数据，有 $1\le k\le n\le 10^6$。

#### 说明

按原题配置，满分 120 分。

译自 **[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/)** [Contest #6](https://hsin.hr/coci/archive/2014_2015/contest6_tasks.pdf) Task D _**KRATKI**_。

由于原数据没有一些特殊的数据，本题添加了数据 #11。如果你没通过它，会得到 120 Unaccept。


---

---
title: "Alice and Bob are playing a Normal Game"
layout: "post"
diff: 普及/提高-
pid: P8002
tag: ['O2优化', '洛谷月赛']
---
# Alice and Bob are playing a Normal Game
## 题目描述

给定一个长度为 $n$ 的序列，Alice 和 Bob 交替操作一共 $k$ 次，第 $i$ 次当前操作的人必须选一个 $-x_i \sim x_i$ 的整数把它插在序列开头或结尾，Alice 先手（也就是说 $i$ 为奇数时由 Alice 来插入一个 $-x_i\sim x_i$ 的整数，$i$ 为偶数时由 Bob 来插入一个 $-x_i\sim x_i$ 的整数）。

记最终的序列为 $a_1,a_2,\dots,a_{n+k}$，则得分为 $\sum_{i=1}^{n+k} (-1)^{i-1}a_i$。Alice 希望得分最大，Bob 希望得分最小。在两人都采取最优策略的情况下，求最终得分。
## 输入格式

第一行两个正整数 $n,k$ 表示初始序列长度以及操作次数。

接下来一行 $n$ 个整数 $a_1,a_2,\dots,a_n$，表示初始的序列。

接下来一行 $k$ 个非负整数，第 $i$ 个表示 $x_i$。
## 输出格式

一行一个整数表示答案。
## 样例

### 样例输入 #1
```
2 2
1 3
2 2
```
### 样例输出 #1
```
-2
```
## 提示

**本题采用捆绑测试**

| 子任务编号 | 分值 | 特殊限制 |
| :----------: | :----------: | :----------: |
| $0$ | $25$ | $n,k,x_i\le 5$ |
| $1$ | $25$ | $n,k\le 10$ |
| $2$ | $25$ | $n,k\le 100$ |
| $3$ | $25$ | 无特殊限制 |

对于所有数据，保证 $1\le n,k\le 2\times 10^5$，$0\le |a_i|,x_i\le 10^9$。

本题测试点较多，为了保证评测速度，本题时限 500ms，保证时限在 std 所用最大时间的 5 倍以上。


---

---
title: "[COCI 2021/2022 #3] Cijanobakterije"
layout: "post"
diff: 普及/提高-
pid: P8028
tag: ['2021', 'COCI（克罗地亚）']
---
# [COCI 2021/2022 #3] Cijanobakterije
## 题目描述

一位微生物学家有 $n$ 个蓝藻细菌。这些细菌中有 $m$ 组细菌 $(a_i,b_i)$，表示 $a_i$ 和 $b_i$ 之间有一条生物链。若干条生物链顺次连接之后可组成长链。长链的长度定义为这条长链上的细菌数量。

现可在细菌之间两两添加若干条生物链，使得添加之后的所有生物链均不存在环。

求在进行若干次添加生物链的操作后，最长的长链的长度是多少。
## 输入格式

第一行，两个整数 $n,m$。

接下来的 $m$ 行，每行两个正整数 $a_i,b_i$，表示 $a_i,b_i$ 两个细菌之间有一条生物链。数据保证 $a_i \neq b_i$ 且同一条生物链只会出现一次，同时这 $m$ 条生物链不会存在环。
## 输出格式

输出最长的长链的长度。
## 样例

### 样例输入 #1
```
100 0
```
### 样例输出 #1
```
100
```
### 样例输入 #2
```
8 6
1 2
1 3
1 4
5 6
5 7
5 8
```
### 样例输出 #2
```
6
```
### 样例输入 #3
```
6 5
1 2
2 3
3 4
4 6
4 5
```
### 样例输出 #3
```
5
```
## 提示

**【样例 2 解释】**

在 $2$ 和 $6$ 之间添加一条生物链后，最长的长链为 $3-1-2-6-5-7$，长度为 $6$。

**【数据规模与约定】**

**本题采用子任务捆绑测试。**

- Subtask 1（15 pts）：$m=n-1$。
- Subtask 2（6 pts）：$b_i=a_i+1$。
- Subtask 3（6 pts）：$1 \le a_i \le 2$。
- Subtask 4（15 pts）：$1 \le n \le 1000$。
- Subtask 5（28 pts）：无特殊限制。

对于 $100\%$ 的数据，$1 \le n \le 10^5$，$0 \le m \lt n$，$1 \le a_i,b_i \le n$。

**【提示与说明】**

**题目译自 [COCI 2021-2022](https://hsin.hr/coci/) [CONTEST #3](https://hsin.hr/coci/contest3_tasks.pdf) _Task 2 Cijanobakterije_。**

**本题分值按 COCI 原题设置，满分 $70$。**


---

---
title: "[COCI 2015/2016 #7] Prozor"
layout: "post"
diff: 普及/提高-
pid: P8033
tag: ['2015', 'COCI（克罗地亚）']
---
# [COCI 2015/2016 #7] Prozor
## 题目描述

一扇规模为 $R \times S$ 的窗户上有若干只苍蝇。现有一把苍蝇拍，它可以消灭 $K \times K$ 矩形区域内（不含边界）的所有苍蝇。

请选择一种苍蝇拍的放置位置，使得被消灭的苍蝇数量最多。输出消灭的苍蝇的最大值和该方案。如果有多种符合的方案，请输出任意一种。
## 输入格式

第一行，三个整数 $R,S,K$。

接下来的 $R$ 行，每行 $S$ 个字符 $\texttt *$（表示苍蝇）或 $\texttt .$（表示空白区域）。数据保证至少能消灭一只苍蝇。
## 输出格式

第一行，输出能消灭苍蝇数量的最大值。当程序只答对该值时，可以获得 $50\%$ 的分数。

接下来的 $R$ 行，每行 $S$ 个字符。在输入的字符矩阵的基础上，将所选定的 $K \times K$ 矩形的四个角改为 $\texttt +$、横向边改为 $\texttt -$、纵向边改为 $\texttt |$ 即可。选定的矩形区域必须完全在整个矩阵内部。

**注：如果只想获得 $\mathbf{50\%}$ 的部分分，请只输出一个整数，即消灭苍蝇数量的最大值。此时，** $\red {\mathbf{请不要输出任何多余的字符（包括但不限于空格和换行符），否则会被判错。}}$
## 样例

### 样例输入 #1
```
3 5 3
.....
.*.*.
.....
```
### 样例输出 #1
```
1
+-+..
|*|*.
+-+..
```
### 样例输入 #2
```
7 6 4
......
.*.*.*
......
.*.*..
..*...
..*...
*....*
```
### 样例输出 #2
```
2
......
.*.*.*
+--+..
|*.|..
|.*|..
+--+..
*....*
```
### 样例输入 #3
```
9 9 6
***......
......*.*
.*....*..
..*...*..
..*.*....
..*....*.
.....*...
.*...***.
.........
```
### 样例输出 #3
```
6
***......
......*.*
.*....*..
..*+----+
..*|*...|
..*|...*|
...|.*..|
.*.|.***|
...+----+
```
## 提示

**【数据规模与约定】**

- 对于 $100\%$ 的数据，$3 \le K \le R,S \le 100$。

**【提示与说明】**

欢迎大家通过私信或发帖对自行编写的 [Special Judge](https://www.luogu.com.cn/paste/luaa2ic5) 进行 hack。

**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 2 Prozor_。**

**本题分值按 COCI 原题设置，满分 $80$。**


---

---
title: "[COCI 2015/2016 #7] Otpor"
layout: "post"
diff: 普及/提高-
pid: P8035
tag: ['2015', 'COCI（克罗地亚）']
---
# [COCI 2015/2016 #7] Otpor
## 题目描述

众所周知，电阻的连接包括串联和并联两种。而一条电路的所有电阻可以视为这条电路的等效电阻 $R_{ekv}$。当电阻串联时，可以这样表示：

$$\text{(R1-R2-R3-...-RK)}$$

同时满足公式：

$$R_{ekv}=\sum_{i=1}^K R_i$$

并联时可以这样表示：

$$\text{(R1|R2|R3|...|RK)}$$

同时满足公式：

$$R_{ekv}=\frac{1}{\sum_{i=1}^K \frac{1}{R_i}}$$

现有一个包含 $N$ 种阻值为 $R_i$ 的电阻和足够多的导线。给定这些电阻的连接方式，求整条电路的等效电阻值。
## 输入格式

第一行，一个整数 $N$。

第二行，$N$ 个实数 $R_i$。

第三行，一个字符串 $S$，表示电路。字符串只包含 $\texttt R$、$\texttt 1 \sim \texttt 9$、$\texttt ($、$\texttt )$、$\texttt -$ 和 $\texttt |$。数据保证不会有括号不匹配或不合法的现象，同时括号的数量将会最小化。任何一对括号内都不会同时出现 $\texttt -$ 和 $\texttt |$。电路只包含给定的 $N$ 种电阻，且可能出现任意（包括 $0$）次。
## 输出格式

输出整条电路的等效电阻值。输出与标准答案相差不超过 $10^{-5}$ 则视为正确。
## 样例

### 样例输入 #1
```
3
2 3 6
(R1-R2-R3)
```
### 样例输出 #1
```
11.00000
```
### 样例输入 #2
```
3
2 3 6
(R1|R2|R3)
```
### 样例输出 #2
```
1.00000
```
### 样例输入 #3
```
5
5.0 5.0 5.0 5.0 5.0
((R1-(R2|R3)-(R4|R5))|(R1-(R2|R3)-(R4|R5)))
```
### 样例输出 #3
```
5.00000
```
## 提示

**【数据规模与约定】**

- 对于 $20\%$ 的数据，$N=3$ 且电路恰好包含这三种电阻。
- 对于 $40\%$ 的数据，$S$ 中只包含一对括号。
- 对于 $100\%$ 的数据，$1 \le N \le 9$，$0 \lt R_i \lt 100$，$1 \le |S| \le 10^5$。

**【提示与说明】**

**题目译自 [COCI 2015-2016](https://hsin.hr/coci/archive/2015_2016/) [#7](https://hsin.hr/coci/archive/2015_2016/contest7_tasks.pdf) _Task 4 Otpor_。**

**本题分值按 COCI 原题设置，满分 $120$。**


---

---
title: "[COCI 2016/2017 #7] POKLON"
layout: "post"
diff: 普及/提高-
pid: P8041
tag: ['2016', 'COCI（克罗地亚）']
---
# [COCI 2016/2017 #7] POKLON
## 题目描述

今天，Kile 在庆祝他的生日。他最好的朋友 Ivan 决定送给他一个特殊的天平。这种天平的特点是它是递归的，即在每个梁的末端，要么有一个砝码，要么有一个新的天平，要么什么都没有。当然，如果天平左梁上的总质量大于右梁上的总质量，则天平会向左倾斜。类似地，如果右侧梁上的质量较大，则天平向右倾斜。否则，我们说天平是平衡的。注意这里和我们平常所了解的天平的平衡条件是不同的。下图是一个该类天平的例子。 

![](https://cdn.luogu.com.cn/upload/image_hosting/vupj9ham.png)

Kile 真的很喜欢这份礼物，作为一名真正的计算机科学家，他立即尝试使用总质量尽可能小的新的砝码来平衡这份礼物。新砝码的重量应该是**正实数**。如果某一个天平本身是平衡的，并且它的所有子天平都是平衡的，那么我们说这个天平是平衡的。

成功平衡天平后，Kile 决定在胸前纹上天平上砝码的总质量，以二进制表示，不带前导零。可以证明总质量必然是一个**正整数**。我们想知道 Kile 在胸前纹的的号码是多少，即以质量尽可能小的新的砝码来平衡这个天平之后，天平上所有砝码的总质量的二进制表示。
## 输入格式

第一行输入一个整数 $N$，表示天平里面包含的子天平数量。根天平的编号为 $1$。  
随后 $N$ 行，第 $i$ 行两个整数 $a,b$，其中，如果 $a$ 是正数，那么就表示 $i$ 号天平左端是一个天平，否则表示 $i$ 号天平左端是一个质量为 $-a$ 的砝码；如果 $b$ 是正数，那么就表示 $i$ 号天平右端是一个天平，否则表示 $i$ 号天平右端是一个质量为 $-b$ 的砝码。
## 输出格式

输出仅一行，表示以质量尽可能小的新的砝码来平衡这个天平之后，天平上所有砝码的总质量的二进制表示。**不包含前导零**。
## 样例

### 样例输入 #1
```
2
2 -10
-4 -3
```
### 样例输出 #1
```
10100
```
### 样例输入 #2
```
4
2 3
-9 4
-2 -13
-1 -7
```
### 样例输出 #2
```
111000
```
## 提示

**【样例 1 解释】**

天平的初始状态见题目描述中的图片。Kile 将会在 $2$ 号天平的左侧放一个质量为 $1$ 的砝码，右侧放一个质量为 $2$ 的砝码。此时，两个天平都处于平衡状态，可以证明这种方案增加的新的砝码的质量是最小的。此时，天平上所有砝码的总质量是 $5+5+10=20$，其二进制表示为 $10100$。

**【数据范围】**

对于所有数据，$1\leqslant N\leqslant 10^6$，$-10^9\leqslant a,b\leqslant N$。

**【题目来源】**

本题来源自 **_[COCI 2016-2017](https://hsin.hr/coci/archive/2016_2017/) [CONTEST 7](https://hsin.hr/coci/archive/2016_2017/contest7_tasks.pdf) T4 POKLON_**，按照原题数据配置，满分 $120$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。


---

---
title: "[COCI 2011/2012 #4] ZIMA"
layout: "post"
diff: 普及/提高-
pid: P8081
tag: ['2011', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #4] ZIMA
## 题目描述

给定 $N$ 天的气温情况。规定：

- 当一天的温度小于 $0$ 时，则称之为冰冻日。
- 当连续 $T$ 天都是冰冻日时，则称之为一个持续时间为 $T$ 的冰期。

冰期来临之前的若干天都会被标为警示状态。若一个冰期的持续时间为 $T$ 天，则规定：

- 若一段冰期不是所有冰期中最长的，那么冰期来临之前的 $2T$ 天都被标记为警示状态。
- 若一段冰期是所有冰期中最长的，那么冰期来临之前的 $3T$ 天都被标记为警示状态。特别地，如果有多个最长的冰期，则只有一个被标记 $3T$ 天，其它的都为 $2T$ 天。
- 若当前正处于冰期，则不允许对当前冰期进行警示，但若条件允许，可以对未来的冰期进行警示。

你可以任意选择一个最长的冰期使得其来临之前需要被标记 $3T$ 天。求在所有选择的情况中，处于警示状态天数的最大值。
## 输入格式

第一行，一个正整数 $N$。

第二行，$N$ 个整数 $T_i$，表示这 $N$ 天的温度。
## 输出格式

输出处于警示状态天数的最大值。
## 样例

### 样例输入 #1
```
8
1 -1 4 3 8 -2 3 -3
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
15
1 2 -1 2 3 4 5 6 1 4 8 3 -1 -2 1
```
### 样例输出 #2
```
8
```
## 提示

**【样例 1 解释】**

长度最长的冰期有 $3$ 个：$\texttt{-1; -2; -3}$。

当选择 $\texttt{-2}$ 作为需要在来临之前标记 $3T$ 天为警示状态的冰期时，处于警示状态的天数最大：

|天数|$1$|$2$|$3$|$4$|$5$|$6$|$7$|$8$|
| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |
|温度|$1$|$-1$|$4$|$3$|$8$|$-2$|$3$|$-3$|
|是否为冰期|否|是|否|否|否|是|否|是|
|是否处于警示状态|是|否|是|是|是|是|是|否|

**【数据规模与约定】**

- 对于 $40\%$ 的数据，最长的冰期唯一。
- 对于 $100\%$ 的数据，$1 \le N \le 10^5$，$|T_i| \le 100$。

**【提示与说明】**

**题目译自 [COCI 2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #4](https://hsin.hr/coci/archive/2011_2012/contest4_tasks.pdf) _Task 2 ZIMA_。**

**本题分值按 COCI 原题设置，满分 $100$。由于洛谷不支持非整数分数，因此对于除不尽的情况进行了调整。**


---

---
title: "[COCI 2013/2014 #3] KOLINJE"
layout: "post"
diff: 普及/提高-
pid: P8244
tag: ['2013', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2013/2014 #3] KOLINJE
## 题目描述

在一年一度的生猪屠宰会上，屠夫 Bajs 正在进行活动的最后一个环节——将自己那条屡获殊荣的火腿拿出一部分，分给参加活动的所有人。

今年的生猪屠宰会一共有 $n$ 个人参加，其中第 $i$ 个人目前已经吃了 $a_i$ 千克火腿。Bajs 将自己的火腿按照 $b_1:b_2:\cdots:b_n$ 的比例分给所有人，换句话说，令 $S=\sum\limits_{j=1}^nb_j$，则第 $i$ 个人将分到总火腿重量的 $\dfrac{b_i}S$。

但是，直到现在，Bajs 也没能确定他要拿出的火腿总量，因为在给每个人分完火腿并吃完以后，现场将根据每个人吃的火腿的千克数从大到小列出一个排名表（如果有两个人吃的肉的千克数相同，则按照两个人的编号从小到大排序），并宣布本次生猪屠宰会的年度人物，即排名表的第一位。虽然 Bajs 曾多次受到他人贿赂，但是他仍旧不愿改变分配的比例，并说他很诚实并且心地善良。Bajs 是个重度强迫症患者，因此他希望排名表上的人的编号从前往后依次为 $1,2,\cdots,n$。请你帮助 Bajs 确定他要拿出的火腿总量，以满足 Bajs 的要求。
## 输入格式

第一行输入一个整数 $n$，表示参加生猪屠宰会的人数。  
随后 $n$ 行，每行输入两个整数 $a_i,b_i$，分别表示第 $i$ 个人已经吃的火腿的千克数和在火腿的分配中所占的比重（具体见『题目描述』部分）。
## 输出格式

如果无论 Bajs 拿出多少火腿都不能满足要求，输出 `-1`。

否则，输出一个**实数** $x$，表示 Bajs 拿出的火腿千克数。你需要保证：

- $0\leqslant x\leqslant 10^7$。
- $x$ 的小数点后不得超过 $12$ 个数位。建议自行对答案四舍五入后再输出。

上面两点中若有至少一点不满足，均会被判定为 `WA`。

如有多解，输出任意一个解即可。即**你不需要保证 Bajs 拿出的火腿千克数最小**。
## 样例

### 样例输入 #1
```
3
7 1
3 2
10 0
```
### 样例输出 #1
```
10.5
```
### 样例输入 #2
```
3
2 1
4 0
0 3
```
### 样例输出 #2
```
-1
```
### 样例输入 #3
```
5
15 4
6 7
12 5
9 6
1 7
```
### 样例输出 #3
```
87
```
## 提示

**【样例 1 解释】**

Bajs 拿出了 $10.5$ 千克火腿，由于分配的比例为 $1:2:0$，因此三个人依次分配到 $3.5$ 千克、$7$ 千克和 $0$ 千克火腿，最终三个人依次共吃了 $10.5$ 千克、$10$ 千克和 $10$ 千克火腿。这满足 Bajs 的要求。

**【数据范围与限制】**

对于所有数据，$2\leqslant n\leqslant 1000$，$0\leqslant a_i,b_i\leqslant 10^6$。

**【题目来源】**

本题来源自 **_[COCI 2013-2014](https://hsin.hr/coci/archive/2013_2014/) [CONTEST 3](https://hsin.hr/coci/archive/2013_2014/contest3_tasks.pdf) T4 KOLINJE_**，按照原题数据配置，满分 $120$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。

欢迎对[本题 checker](https://www.luogu.com.cn/paste/7p24epxh) 提出改进意见。


---

---
title: "皇室战争"
layout: "post"
diff: 普及/提高-
pid: P8247
tag: []
---
# 皇室战争
## 题目描述

训练场可以看作成一个 $n \times m$ 的字符矩阵，每个单元为`S`，`K`或`.`。

`S`为神箭游侠，`K`为骷髅。众所周知，神箭游侠的箭是可以穿透的。（我们把他的箭的射程看作是一条射线，且无限长）。由于骷髅很脆，所以打一下就死。已知骷髅都不会动，问你他最少射几箭才能使所有的骷髅都死亡？

假设所有的人物都站在点上，且无限小。
## 输入格式

第 1 行 2 个数，$n$ 和 $m$。

第 2 至第 $n+1$ 行，每行 $m$ 个字符，代表骷髅`K`，空地`.`和神箭游侠`S`，神箭游侠只会有一个。
## 输出格式

一个数，即最少射的箭数。
## 样例

### 样例输入 #1
```
3 5
K...K
.K.K.
..S..
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3 5
KKKKK
KKSKK
KKKKK
```
### 样例输出 #2
```
12
```
## 提示

* Subtask 1（15 分）：$1 \le n,m \le 10$；
* Subtask 2（20 分）：$1 \le n,m \le 400$；
* Subtask 3（35 分）：$1 \le n,m \le 10^3$；
* Subtask 4（30 分）：$1 \le n\times m \le 10^6$。

$n,m$ 均为正整数。

样例 $1$ 解释：

![](https://cdn.luogu.com.cn/upload/image_hosting/9vabxn60.png)



---

---
title: "简单数列"
layout: "post"
diff: 普及/提高-
pid: P8248
tag: ['Special Judge']
---
# 简单数列
## 题目描述

给你一个数 $n$，你需要求出一个长度为 $n$ 的数组 $a$，（下标从 $1$ 开始，且元素都为 $1,2,3$ 或 $4$），使得：

* 对于第 $i$ 个数，对于所有的 $1 \le len \le \lfloor\frac{i}{2}\rfloor$, $a_{i-len+1\dots i}$ 与 $a_{i-len\times2+1\dots i-len}$ 不相同。（$\lfloor x \rfloor$ 表示对 $x$ 下取整）

* 说人话，就是没有任何连续的连续子串相同。
## 输入格式

一行一个正整数 $n$。
## 输出格式

一行，$n$ 个正整数，数组 $a$。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
1 2 3
```
### 样例输入 #2
```
6
```
### 样例输出 #2
```
1 2 3 4 1 3
```
## 提示

对于 $20\%$ 的数据，满足 $1 \le n \le 10$；

对于 $40\%$ 的数据，满足 $1 \le n \le 30$；

对于 $100\%$ 的数据，满足 $1 \le n \le 500$。


---

---
title: "模法问题"
layout: "post"
diff: 普及/提高-
pid: P8249
tag: []
---
# 模法问题
## 题目背景

简单题，无背景。
## 题目描述

你有两个正整数 $a,b$。

你还有一个正整数 $q$，你要执行 $q$ 次询问。

对于每一次询问，你得到两个正整数 $l,r$。

你需要求出求 $\max\{(i \bmod a)+(i \bmod b) \}$，其中 $i$ 是正整数且 $i \in [l,r] $。
## 输入格式

第一行两个正整数 $a,b$。

第二行一个正整数 $q$。

接下来 $q$ 行，每行两个正整数 $l,r$。
## 输出格式

对于每一次询问，输出一行，包含一个整数表示答案。
## 样例

### 样例输入 #1
```
5 7
4
1 5
5 7
33 34
34 35
```
### 样例输出 #1
```
8
7
10
10
```
## 提示

对于 $30\%$ 的数据，满足 $1\le q\le10^3$，$1 \le l \le r \le 10^3$；

对于 $70\%$ 的数据，满足 $1\le q\le10^3$，$1 \le l \le r \le 10^9$；

对于 $100\%$ 的数据，满足 $1\le a,b\le 10^3$，$1\le q\le10^5$，$1 \le l \le r \le 10^9$。


---

---
title: "[COCI 2012/2013 #2] KRIZALJKA"
layout: "post"
diff: 普及/提高-
pid: P8296
tag: ['2012', 'COCI（克罗地亚）']
---
# [COCI 2012/2013 #2] KRIZALJKA
## 题目背景

**本题分值按 COCI 原题设置，满分 $80$。**
## 题目描述

你喜欢玩填字游戏吗？如果是，你可能会知道传统的初学游戏，如下所示：

***

![](https://cdn.luogu.com.cn/upload/image_hosting/pi8lxkai.png)

- 水平方向上：

  1. 用于冷却电脑的设备

  2. 固态水

  3. 用来获得

- 垂直方向上：

  1. 又小又软又甜的水果
  
  2. 强力纸牌
  
  3. 渔夫的工具
***

给定六个有三个字母的单词，你需要把它们放在 $3\times 3$ 的方格上，使得水平与垂直均出现这几个单词。

## 输入格式

输入共 $6$ 行，每行一个有三个大写字母的单词。保证按字典序给出。
## 输出格式

如果不存在解法，输出 $0$。否则输出三行三列的字母矩阵。

如果存在多解，输出每行头尾相接形成的九个字符的字典序最小的方案。
## 样例

### 样例输入 #1
```
ANA
ANA
DAR
DAR
RAD
RAD
```
### 样例输出 #1
```
DAR
ANA
RAD
```
### 样例输入 #2
```
EVO
HEP
HIR
IVA
PAD
ROD
```
### 样例输出 #2
```
HEP
IVA
ROD
```
### 样例输入 #3
```
AKO
CES
DOC
DON
ESI
KES
```
### 样例输出 #3
```
0
```


---

---
title: "[COCI 2021/2022 #4] Autobus"
layout: "post"
diff: 普及/提高-
pid: P8312
tag: ['2021', 'COCI（克罗地亚）']
---
# [COCI 2021/2022 #4] Autobus
## 题目描述

在一个国家里有 $n$ 座城市。这些城市由 $m$ 条公交线路连接，其中第 $i$ 条线路从城市 $a_i$ 出发，到 $b_i$ 停止，路程中耗时 $t_i$ 分钟。

Ema 喜欢旅行，但她并不喜欢在公交线路之间换乘。在旅行过程中，她希望**最多**只需坐 $k$ 个不同的公交线路。

Ema 想知道，从城市 $c_i$ 到城市 $d_i$ 的最短旅行时间是多少（最多坐 $k$ 个不同的公交线路）。
## 输入格式

第一行包含两个整数 $n,m$，分别表示城市的数量和公交车线路的数量。

接下来 $m$ 行，第 $i+1$ 包含三个整数 $a_i,b_i,t_i$，分别表示第 $i$ 条公交车线路的起点、终点和从起点到终点所需的时间。

接下来一行包含两个整数 $k,q$，最大坐的不同公交线路的个数和问题题的个数。

接下来 $q$ 行，第 $m+j+3$ 行包含两个整数 $c_j,d_j$，表示询问从城市 $c_j$ 到城市 $d_j$ 的最短旅行时间。
## 输出格式

输出包含 $q$ 行，第 $i$ 行包含一个整数，表示从城市 $c_i$ 到城市 $d_i$ 的最短旅行时间。
## 样例

### 样例输入 #1
```
4 7
1 2 1
1 4 10
2 3 1
2 4 5
3 2 2
3 4 1
4 3 2
1 3
1 4
4 2
3 3

```
### 样例输出 #1
```
10
-1
0
```
### 样例输入 #2
```
4 7
1 2 1
1 4 10
2 3 1
2 4 5
3 2 2
3 4 1
4 3 2
2 3
1 4
4 2
3 3
```
### 样例输出 #2
```
6
4
0

```
### 样例输入 #3
```
4 7
1 2 1
1 4 10
2 3 1
2 4 5
3 2 2
3 4 1
4 3 2
3 3
1 4
4 2
3 3
```
### 样例输出 #3
```
3
4
0

```
## 提示

**【样例解释】**

![](https://cdn.luogu.com.cn/upload/image_hosting/kxv8k07a.png)

每个样例中的答案都已经标记在图中。

**【数据规模与约定】**

**本题采用子任务捆绑测试。**

- Subtask 1（15 pts）：$k ≤ n ≤ 7$。
- Subtask 2（15 pts）：$k ≤ 3$。
- Subtask 3（25 pts）：$k ≤ n$。
- Subtask 4（15 pts）：没有额外限制。

对于 $100\%$ 的数据，$2\le n \le 70,1\le m,t_i\le 10^6,1\le a_i,b_i,c_j,d_j\le n,1\le k\le10^9,1\le q \le n^2$。

**【提示与说明】**

**本题分值按 COCI 原题设置，满分 $70$。**

**题目译自 [COCI2021-2022](https://hsin.hr/coci/) [CONTEST #4](https://hsin.hr/coci/contest4_tasks.pdf) T2  Autobus。** 


---

---
title: "[COCI 2021/2022 #5] Dijamant"
layout: "post"
diff: 普及/提高-
pid: P8325
tag: ['2021', 'COCI（克罗地亚）']
---
# [COCI 2021/2022 #5] Dijamant
## 题目描述

桌上摆放有若干颗『钻石』。

当一个正方形旋转 $45^\circ$ 时，它就形成了『菱形』的形状。规定外形形如『菱形』且外边框均为 $\texttt \#$ 但内部均为 $\texttt .$ 的图形为一颗『钻石』。

给定一个 $n \times m$ 大小的桌面，统计桌上摆放有多少颗『钻石』。
## 输入格式

第一行两个正整数 $n,m$，表示桌面的大小。

接下来的 $n$ 行，每行 $m$ 个字符 $\texttt \#$ 或 $\texttt .$，表示桌面。
## 输出格式

『钻石』的数量。
## 样例

### 样例输入 #1
```
7 25
.#...#....#....#.....#...
#.#..#...#.#...#....#.#..
.#...#..#...#..#...#...#.
.....#...#.#...#..#.....#
.....#....#....#...#...#.
.....#.........#....#.#..
.....#.........#.....#...
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
11 17
.....#........#..
....#.#........#.
...#...#....#...#
..#.....#....#.#.
.#....#..#....#..
#....#.#..#......
.#....#..#.......
..#.....#........
...#...#.........
....#.#..........
.....#...........
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
5 11
##.#.#.#.##
#.#.#.#.#.#
.#.#.#.#.#.
#.#.#.#.#.#
##.#.#.#.##
```
### 样例输出 #3
```
14
```
## 提示

**【样例 2 解释】**

看起来好像有 $3$ 颗，但实际上有两个『菱形』互相包含，因此不符合『外边框均为 $\texttt \#$ 但内部均为 $\texttt .$』的定义。故只有 $1$ 颗『钻石』。

**【数据规模与约定】**

**本题采用捆绑测试。**

- Subtask 1（20 pts）：$1 \le n,m \le 100$。
- Subtask 2（50 pts）：无特殊限制。

对于 $100\%$ 的数据，$1 \le n,m \le 2000$。

**【来源】[COCI 2021-2022#5](https://hsin.hr/coci/contest5_tasks.pdf) Task 2 Dijamant。**


---

---
title: "[COCI 2021/2022 #6] Zemljište"
layout: "post"
diff: 普及/提高-
pid: P8343
tag: ['2021', 'COCI（克罗地亚）']
---
# [COCI 2021/2022 #6] Zemljište
## 题目描述

有一块地，大小为 $r \times s$，$\rm Matej$ 想买下它。这块地每个 $1\times1$ 的正方形都有不同的价格。  

设一片非空子矩阵价格总和为 $m$，则这片子矩阵的权值为 $|m-a|+|m-b|$，您需要找到最小权值的子矩阵。  

您只需要输出最小权值即可。

## 输入格式

第一行包含四个正整数 $r$, $s$ , $a$ 和 $b$ 。

下面 $r$ 行，第 $i$ 行，有 $s$ 个正整数，第 $j$ 个数表示 $c_{i,j}$，表示价格。
## 输出格式

一行一个整数 $v$，表示最小非空子矩阵的权值。
## 样例

### 样例输入 #1
```
2 2 10 10
1 3
4 1

```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3 2 3 4
1 9
1 1
8 1
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
3 4 5 3
1 1 1 1
9 6 7 6
8 1 9 7

```
### 样例输出 #3
```
2
```
## 提示

### 样例解释 2  
![](https://cdn.luogu.com.cn/upload/image_hosting/2mzt4qih.png)

如图，总价格是$1 + 1 = 2$，这块地的权值是 $|3−2| + |4−2| =3$。

### 数据范围：

对于 $14\%$ 的数据：$1\le r,s\le20$

对于 $28\%$ 的数据：$1\le r,s\le100$

对于 $100\%$ 的数据：$1\le r,s\le500$，$1\le a,b,c_{i,j}\le10^9$

##### 本题分值与 [COCI 2021-2022#6](https://hsin.hr/coci/contest6_tasks.pdf) 分值相同，满分 $70$ 分


---

---
title: "[PFOI Round1] Two Sequences"
layout: "post"
diff: 普及/提高-
pid: P8378
tag: ['洛谷原创', '洛谷月赛']
---
# [PFOI Round1] Two Sequences
## 题目背景

syzf2222 喜欢并查集！特别是路径压缩的并查集。
## 题目描述



```cpp
inline int find(int x){
	if(x==fa[x])return x;
	return fa[x]=find(fa[x]);
}
inline void merge(int x,int y){
	fx=find(x),fy=find(y);
	if(fx==fy)return;fa[fx]=fy;
}
```

这是他惯用的并查集代码，初始时对于每个 $x$ 有 `fa[x]=x`。

接下来的 $T$ 天中，每天小 h 都给了他一个 $n$，表示并查集的大小（每天的 $n$ 可能是不同的）。

调皮的小 x 见他不在机房，每天都在并查集上不断 `merge`。
注意到小 x 不喜欢 `==`，他觉得这特别像他的眼睛，于是他不会使 `merge` 函数在第二行的条件语句中被 `return`，否则他会十分气愤。

现在的已知信息就只有最终的 $fa$ 数组了。
而 syzf2222 希望还原小 x 的操作序列（即若干次按顺序进行的 `merge` 操作）。由于他名字里有很多个 2 而且本人也非常 2 ，他希望知道对于每一天，有多少个 $fa$ 数组**恰好**能被还原成**两种**操作序列，答案对 $998244353$ 取余数。

两个操作序列不同，当且仅当某次 `merge` 时的变量 `fx,fy` 至少有一个不同。


## 输入格式

第一行一个整数 $T$。

后面 $T$ 行，每行读入一个整数 $n$ 表示小 h 给的数。
## 输出格式

$T$ 行，每行一个整数表示答案对 $998244353$ 取余数的结果。
## 样例

### 样例输入 #1
```
4
3
20
8492
114514
```
### 样例输出 #1
```
3
61560
822256526
988192964

```
## 提示

【样例解释】

对于第一天，$n=3$，共有 $fa=[1,1,1],[2,2,2],[3,3,3]$ 这三种 $fa$ 数组使得恰有两种操作序列。

以 $fa=[1,1,1]$ 为例，两种操作序列分别为 `merge(2,1),merge(3,1)` 和 `merge(3,1),merge(2,1)`，其他 `merge` 参数不同的方案与上述两种的其中一种是本质相同的（每次的 `fx,fy` 都一样）。

---

【数据范围】

**「本题采用捆绑测试」**

- $\texttt{Subtask 1(10 pts)：}T=1,\ n\le 10$；
- $\texttt{Subtask 2(30 pts)：}T=10^2,\ n\le 10^3$；
- $\texttt{Subtask 3(60 pts)：}$无特殊限制。

对于 $100\%$ 的数据，满足 $1\le T\le 10^5,\ 1\le n\le 10^9$。


---

---
title: "[POI 2003] Smugglers"
layout: "post"
diff: 普及/提高-
pid: P8385
tag: ['2003', 'POI（波兰）']
---
# [POI 2003] Smugglers
## 题目描述

Byteotia 因为它丰富的金矿资源而闻名世界. 所以在和它的邻国 Bitland 的边界上每年都有大量的金矿交易。不幸的是由于税务的繁重，商人带着矿产穿过边境时都要交纳矿产价格的 $50\%$ 作为关税。但是幸运的是，有一些炼金术士已经发明了一些方法能把某一种矿产转化成另一种的矿物。于是这样在交易时就可以先把昂贵的矿产转化成便宜的，等到带过边境以后在转换回来。但是由于这项工作费时费力，炼金术士对于每种转换都要收取相应的费用。现在有个商人想将 $1$ kg 金子带过边境，他想知道最少的花费是多少。
## 输入格式

第一行仅一个数 $n$ 表示有多少种金属矿产。

接下来 $n$ 行，表示每种金属 $1$ kg 的单价。第 $k+1$ 行的数 $p_k$ 为第 $k$ 种金属的单价。我们假设金子的标号为 $1$。接下来一个正数 $m$ 表示一共有 $m$ 种转换方式。接下来 $m$ 行每行描述一个转换，它由三个数 $a$，$b$，$c$ 表示把 $1$ kg 的 $a$ 金属转换为 $1$ kg 的 $b$ 金属需要 $c$ 的代价。对于特定的金属对 $a$ 和 $b$ 最多只会出现一次。
## 输出格式

输出一行，表示把 $1$ kg 的金子带过边境的最小花费。
## 样例

### 样例输入 #1
```
4
200
100
40
2
6
1 2 10
1 3 5
2 1 25
3 2 10
3 4 5
4 1 50
```
### 样例输出 #1
```
60
```
## 提示

对于 $100\%$ 的数据，$1 \le n \le 5000$，$0 \le p_k \le 10^9$，$0 \le m \le 100000$，$1 \le a,b \le n$，$0 \le c \leq 10000$。


---

---
title: "「GLR-R3」立春"
layout: "post"
diff: 普及/提高-
pid: P8474
tag: ['洛谷原创', '洛谷月赛']
---
# 「GLR-R3」立春
## 题目背景

&emsp;&emsp;「从此雪消风自软，梅花合让柳条新」

---

&emsp;&emsp;“明天就要返校了呢。”

&emsp;&emsp;灰色的长发被身后的人儿慢慢地顺着，顺着，于假期最后一个慵懒的清晨醒来，与春日的第一抹阳光迷迷糊糊地耳语，她的目光随着点过窗外的鸟雀，停留在那丛褐色的光秃枝丫。

&emsp;&emsp;“天依？”

&emsp;&emsp;赤红色的眸子随之望去，片刻，静默。

&emsp;&emsp;“如果我能告诉它，今天是立春，是春天的……”

&emsp;&emsp;“那么它会抽芽，繁盛，会成为我们窗外或红或绿的美妙。”

&emsp;&emsp;“——因为它本该如此，希望如此吧。”

---

&emsp;&emsp;**立春**&emsp;「雏鸟站在悬崖上　展开了翅膀　地平线上的梦想　照进一缕光」

## 题目描述

由于天依刚睡醒，害怕第一题的题面就迷糊了大家，所以本题只有简要题意。~~（其实是实在编不下去了。）~~

设 $\sigma$ 为任意一个长度为 $n$ 的排列，$\tau(\sigma)$ 表示其中的逆序对个数，请求出

$$
\sum_\sigma 2^{\tau(\sigma)}
$$

对 $(10^9+7)$ 取模的结果。
## 输入格式

输入一行一个整数 $n$，表示排列的长度。
## 输出格式

输出一行一个整数，表示所求得的答案。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
21
```
## 提示

#### 题意解释

本节为部分选手介绍**逆序对的定义**，对此熟悉的选手可以跳过本节。

对于长度为 $n$ 的排列 $\sigma$，假设下标从 $1$ 开始，那么我们称 $(i,j)$ 构成逆序对，当且仅当 $1\le i<j\le n$，并且 $\sigma_i>\sigma_j$；$\tau(\sigma)$ 则表示总共有多少对不同的 $(i,j)$ 满足上述条件。

举个例子，对于排列 $\sigma=\lang 2,4,1,3\rang$，有逆序对 $(1,3),(2,3),(2,4)$，所以 $\tau(\sigma)=3$。可见只要 $\sigma$ 中元素的大小关系确定，$\tau(\sigma)$ 就是确定的。

#### 样例 #1 解释

$$
\begin{aligned}
\sum_{\sigma}2^{\tau(\sigma)} &= 2^{\tau(\lang 1,2,3\rang)}+2^{\tau(\lang 1,3,2\rang)}+2^{\tau(\lang 2,1,3\rang)}+2^{\tau(\lang 2,3,1\rang)}+2^{\tau(\lang 3,1,2\rang)}+2^{\tau(\lang 3,2,1\rang)}\\
&= 2^0+2^1+2^1+2^2+2^2+2^3\\
&= 21.
\end{aligned}
$$

### 数据规模与约定

**本题采用 Subtask 的计分方式。**

| 子任务编号 |    $n$    | 分值 |
| :--------: | :-------: | :--: |
|    $1$     |  $\le4$   | $5$  |
|    $2$     |  $\le10$  | $20$ |
|    $3$     | $\le100$  | $20$ |
|    $4$     | $\le10^3$ | $25$ |
|    $5$     | $\le10^7$ | $30$ |




---

---
title: "「GLR-R3」雨水"
layout: "post"
diff: 普及/提高-
pid: P8475
tag: ['洛谷原创', '洛谷月赛']
---
# 「GLR-R3」雨水
## 题目背景

&emsp;&emsp;「天将化雨舒清景，萌动生机待绿田」

---

&emsp;&emsp;在天依面前口口声声说着习惯了，才开学没几天，文化课和乐队训练的压力可是又让阿绫头疼呢。

&emsp;&emsp;浓缩为一个晚上的周末。站在阳台上，摸索朦胧于雨声的城市轮廓。雨水之日的雨，对于眼前的高楼大厦——们，恐怕也难有一些别样的意境吧。

&emsp;&emsp;“雨水节令的雨、白露节令的露、霜降节令的霜、小雪节令的雪各十二钱……”

&emsp;&emsp;胡乱想着，阿绫噗嗤一声笑了出来，“但是不管在哪里，雨中的空气，雨后的初阳，总是清新得叫人欢喜。”向着雨幕笑笑，拨弄这手里的旧吉他，不知不觉哼起那首歌来。

---

&emsp;&emsp;**雨水**&emsp;「等凉雨　的温度　将不安燥热中和　寻觅着　风的波折」
## 题目描述



身后的门被敲响，接过天依包回来的一大盒多肉，放下东西贴贴一会儿之后，她们决定把多肉们在阳台上排成一排。

多肉们的高度不尽相同，天依先将一共 $n$ 盆多肉随意排成一排，从左到右第 $i$ 盆的高度为 $a_i$。为了美观，她希望交换某些多肉的位置，使得由高度组成的序列 $A$ 的**字典序**尽可能小，不过，为了照顾多肉们的感受（？）她要求阿绫只能选取 $A$ 的一个**长度为偶数的子序列**（长度可以为 $0$），交换序列里第 $1$ 盆和第 $2$ 盆，第 $3$ 盆和第 $4$ 盆……的位置，然后放回它们原来的位置中。

苦活交给了阿绫，思考的工作自然交给你啦！请告诉阿绫，仅使用**一次**选取子序列的操作，她能够得到的字典序最小的新高度序列 $A'$。

#### 形式化题意

给定一个长为 $n$ 的整数序列 $A$，下标从 $1$ 开始。你可以**任取一个**自然数 $k$ 以及一个序列 $\lang 1,2,\dots,n\rang$ 的，长度为 $2k~(k\in\mathbb N)$ 的**子序列** $P$，并对于所有 $i=1,2,\dots,k$，交换 $A_{P_{2i-1}}$ 与 $A_{P_{2i}}$ 的值。求在所有可能得到的新序列 $A'$ 中，**字典序** 最小的序列。

**字典序**：对于长度为 $n$ 的序列 $A$ 和 $B$，定义 $A$ 的字典序小于 $B$，当且仅当：

$$
\exists i\in[1,n], (\forall j\in[1,i), A_j=B_j)\land A_i<B_i.
$$

**注意**：本题输入输出方式具有特殊性。详见「输入格式」与「输出格式」。

## 输入格式

为节省程序输入耗时，序列 $A$ 将在你的程序内部由 `xorShift128Plus` 和提供的种子生成。下面给出 C++ 语言下的示例程序：

```cpp
#include <cstdio> // scanf

const int MAXN = 712; // Set a right value according to your solution.
int n, a[MAXN + 1];

namespace Generator {

unsigned long long k1, k2;
int thres;

inline unsigned long long xorShift128Plus() {
    unsigned long long k3 = k1, k4 = k2;
    k1 = k4, k3 ^= (k3 << 23), k2 = k3 ^ k4 ^ (k3 >> 17) ^ (k4 >> 26);
    return k2 + k4;
}

inline void generate() {
    for (int i = 1; i <= n; ++i) {
        a[i] = xorShift128Plus() % thres;
    }
}

} // namespace Generator.

int main() {
    scanf("%d", &n);
    scanf("%llu %llu %d", &Generator::k1, &Generator::k2, &Generator::thres);
    Generator::generate();
    // Now array a[1..n] represents the sequence A in the statement.
    return 0;
}
```

输入文件仅有一行，包含四个整数 $n,k_1,k_2,\textit{thres}$。

程序读入序列长度 $n$，种子 $k_1,k_2$ 和序列值上限 $\textit{thres}$，用 `xorShift128Plus` 连续生成 $n$ 个随机数，将它们对 $\textit{thres}$ 取模的值依次赋给 $a_1,a_2,\cdots,a_n$，得到序列 $A$。请使用其他语言的选手自行查阅相关信息实现生成器。

## 输出格式

为节省程序输出耗时，你的程序应当输出一行一个整数，表示 $\left(\sum_{i=1}^ni\times A_i'\right)\bmod2^{64}$ 的值。

## 样例

### 样例输入 #1
```
7 20120712 21702102 4
```
### 样例输出 #1
```
43
```
### 样例输入 #2
```
10 114514 19198 10
```
### 样例输出 #2
```
256
```
## 提示

#### 样例 #1 解释

生成的序列为 $A=\lang 1,1,3,0,0,1,3\rang$，选取 $k=1,P=\lang 1,5\rang$, 得到答案序列为 $A'=\lang 0,1,3,0,1,1,3\rang$，按照要求计算知答案为 $43$。

#### 样例 #2 解释

生成的序列为 $A=\lang 2,8,0,6,2,2,1,7,8,3\rang$，选取 $k=3,P=\lang 1,3,4,7,8,10\rang$, 得到答案序列为 $A'=\lang 0,8,2,1,2,2,6,3,8,7\rang$，按照要求计算知答案为 $256$。

### 数据规模与约定

**本题采用 Subtask 的计分方式。**

对于 $100\%$ 的测试数据，$1\le n\le10^7$，$2\le \textit{thres}\le10^9$，$0\le k_1,k_2<2^{64}$。

对于不同的子任务，作如下约定：

 | 子任务编号 |    $n$    |     $\textit{thres}$     | 特殊性质 | 分值 |
| :--------: | :-------: | :---------: | :------: | :--: |
|    $1$     | $\le10^5$ |  $\le10^9$   |  **有**  | $10$ |
|    $2$     |   $\le20$    | $\le10$ |    无    | $15$ |
|    $3$     | $\le10^7$ | $=2$  |    无    | $20$ |
|    $4$     | $\le10^7$ | $\le10^7$ |    无    | $25$ |
|    $5$     | $\le10^7$ | $\le10^9$ |    无    | $30$ |

- **特殊性质**：保证程序正确生成的序列 $A$ 中不存在相等元素。

- **注意**：本题时限为 $0.5\text s$。

- ~~热知识：《世末歌者》演唱于夏日，显然不在雨水节气。~~



---

---
title: "Bassline"
layout: "post"
diff: 普及/提高-
pid: P8551
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# Bassline
## 题目背景

fuwa↑ fuwa↑ fuwa↑ fuwa↑

赫尔德开始使用当下热潮的聊天软件 BassLine，那么第一步自然是加好友了！加好友既需要确认自己和对方有共同兴趣，又需要能加到足够多的好友。赫尔德将其抽象成了下面这个问题，让你来帮她解决。
## 题目描述

本题中，区间 $[l,r]$ 指所有大于等于 $l$ 且小于等于 $r$ 的整数组成的集合，如 $[3,3]$ 代表 $\{3\}$，$[3,7]$ 代表 $\{3,4,5,6,7\}$。

给定 $n$ 个区间，第 $i$ 个区间是 $[l_i,r_i]$。

你需要选择两个整数 $x\le y$，满足：

- 对于所有区间 $[l_i,r_i]$（$1\le i \le n$），以下两个条件之一满足：
	1. $[x,y]$ 被 $[l_i,r_i]$ 包含，换言之， $[x,y]\cap[l_i,r_i]=[x,y]$。
    2.  $[x,y]$ 与 $[l_i,r_i]$ 无交集，换言之，$[x,y]\cap[l_i,r_i]=\varnothing$。

若有 $k$ 个区间满足条件 1，则你的得分是 $k(y-x)$。输出你最大的可能的得分。
## 输入格式

第一行一个正整数表示 $n$。

接下来 $n$ 行，每行两个数 $l_i,r_i$，描述一个区间。
## 输出格式

一行一个自然数表示答案。
## 样例

### 样例输入 #1
```
4
1 3
4 7
5 9
7 10

```
### 样例输出 #1
```
2

```
## 提示

**【样例解释】**

对于样例，$[5,6]$ 是最优的区间之一，其含于 $[4,7],[5,9]$，且与 $[1,3],[7,10]$ 没有交集。此时 $k=2$，因此答案为 $2\times(6-5)=2$。$[1,3]$ 也是一个最优的区间。

$[5,7]$ 并非合法的区间，因为它与 $[7,10]$ 有交集，也并不含于 $[7,10]$。

---

**【数据范围】**

对于所有数据保证 $1 \le n \le 3 \times {10}^5$，$1 \le l_i \le r_i \le 3 \times {10}^5$。

- 子任务 1（20 分）：$n,l_i,r_i \le 10$；
- 子任务 2（20 分）：$n \le {10}^3$；
- 子任务 3（20 分）：$l_i, r_i \le {10}^3$；
- 子任务 4（40 分）：无特殊限制。


---

---
title: "球状精灵的传说"
layout: "post"
diff: 普及/提高-
pid: P8585
tag: ['Special Judge', 'O2优化']
---
# 球状精灵的传说
## 题目描述

你在人马座的三叶星云里，发现了一类新生物：球状精灵。

球状精灵是一类外形为标准椭球形的精灵。每只精灵有三个维度的**幅度** $\{r_1,r_2,r_3\}$，分别表示其三维世界中三个方向上的尺度。

而关于球状精灵有一个传说：族群中**声望值最高**的球状精灵会获得升入四维宇宙的机会。而某个幅度为 $\{r_1,r_2,r_3\}$ 的球状精灵的声望值 $\rho$ 定义为：

$$\rho=\left\lfloor{\frac{1}{4}\min\{r_1,r_2,r_3\}^3}\right\rfloor$$ 

其中 $\left\lfloor\right\rfloor$ 表示下取整。

同时，每只球状精灵可以选择与别的精灵**拥抱至多一次**，之后两者会合成为**一个新的球状精灵**。两只球状精灵能够拥抱，当且仅当它们**存在至少一个幅度面能够重合**。具体来讲，即需要两只精灵的幅度**存在至少两个值相同**。

例如，两只精灵三个方向上的幅度分别为 $\{a,x,y\}$ 和 $\{b,x,y\}$，那么他们可以选择拥抱并生成一只幅度为 $\{a+b,x,y\}$ 的新精灵。但是注意，精灵们都是漂浮在宇宙中的，所以他们可以任意旋转。比如幅度为 $\{x,y,z\}$ 的精灵可以任意旋转成为 $\{x,z,y\},\{z,x,y\},\{z,y,x\},\{y,z,x\},\{y,x,z\}$ 的精灵。**拥抱形成的新精灵不能再次参与拥抱。**

现在球状精灵们想知道，族群中能够升入四维宇宙的精灵，声望值最高能是多少？

请仔细阅读输入格式和输出格式以获取更详细的讯息。
## 输入格式

第 $1$ 行共一个正整数 $n$，表示族群中最初的球状精灵数目。最初全部的球状精灵都没有拥抱过。

第 $2\sim n+1$ 行，每行三个非负整数 $r_{i,1},r_{i,2},r_{i,3}$，分别表示编号为 $i$ 的球状精灵三个维度的幅度。

## 输出格式

第一行，输出一个整数 $opt$:

  - 当最优情况下，升入四维空间的球状精灵是最初未拥抱过的精灵之一时，$opt=0$。

  - 当最优情况下，升入四维空间的精灵是由原来的两只精灵拥抱生成时，$opt=1$。

第二行，有两种情况：

  - 当 $opt=0$ 时，输出一个整数 $i$，表示升入四维空间的精灵是编号为 $i$ 的精灵。

  - 当 $opt=1$ 时，输出两个整数 $i,j$，表示最终升入四维空间的精灵由编号为 $i,j$ 的精灵拥抱生成。

第三行，共一个整数，表示最优情况下升入四维空间精灵的声望值为多少。

如果最优解有多种方案，输出任意一种情况即可。
## 样例

### 样例输入 #1
```
4
1 3 5
1 2 3
2 2 3
4 3 5
```
### 样例输出 #1
```
0
4
6
```
### 样例输入 #2
```
10
2 5 5
4 3 3
1 3 2
3 4 3
3 2 5
3 4 3
2 3 4
4 5 5
2 3 4
5 3 4
```
### 样例输出 #2
```
1
1 8
31
```
## 提示


对于 $10\%$ 的数据，$1\leq n\leq 20$。

对于 $40\%$ 的数据，$1\leq n\leq 800$。

对于 $70\%$ 的数据，$1\leq n\leq 5000$。

对于 $85\%$ 的数据，$1\leq n\leq 10^5$。

对于 $100\%$ 的数据，$1\leq n\leq 5\times 10^5$，$1\leq r_{i,1},r_{i,2},r_{i,3} \leq 10^3$。



---

---
title: "新的家乡"
layout: "post"
diff: 普及/提高-
pid: P8587
tag: ['O2优化']
---
# 新的家乡
## 题目背景

2102 年，太阳系的生态终于不再支持人类的生存。人类打算沿着之前建好的星际长途路线去往金牛座蟹状星云中的某行星 $\beta$ 谋求发展。

## 题目描述

你作为第一批科研人员，提前来到了 $\beta$ 星建造基地。

$\beta$ 星盛产锰钛矿石。基地需要一些**高度相同**的柱子，而每根柱子都需要由**恰好**两根锰钛矿石顺次连接组成。例如，若你有两根高度分别为 $h_x,h_y$ 的锰钛矿石，那么你可以用两者合成为一根高度为 $h_x+h_y$ 的柱子。每根锰钛矿石**显然至多被使用一次**。

现在你来到了 $\beta$ 星的锰钛矿场，摆在你面前的是 $n$ 根高度分别为 $h_i$ 的锰钛矿石。经过严密思考后你发现，房屋的牢固程度应该取决于柱子的数目，而不是柱子的高度。所以你想知道，使用面前这 $n$ 根矿石最多可以建造出多少根高度相同的柱子？

但小花觉得这个问题太 easy 了，于是 ta 选择多问你一嘴：假设柱子高度均为 $h$，基地最多可以建出 $\mathrm{res}$ 根柱子，那么在柱子数目同为 $\mathrm{res}$ 时 $h$ 可以有几种不同的取值？
## 输入格式

输入共两行。

第一行共一个正整数 $n$，表示锰钛矿石的数量。

第二行共 $n$ 个正整数 $h_i$，含义见题目描述。
## 输出格式

输出共一行两个整数 $\mathrm{res}$ 和 $\mathrm{ans}$，分别表示最多的柱子数目以及最优答案下有多少种不同的高度方案。

## 样例

### 样例输入 #1
```
4
4 7 6 5
```
### 样例输出 #1
```
2 1
```
### 样例输入 #2
```
6
1 1000 100 1500 10 1800
```
### 样例输出 #2
```
1 15
```
## 提示

额外样例见附加文件 `ex.in/out`。

对于 $20\%$ 的数据，$1\leq n\leq 100$。

对于 $40\%$ 的数据，$1\leq n \leq 10^3$。

对于 $70\%$ 的数据，$1\leq n\leq 10^5$。

对于 $100\%$ 的数据，$1\leq n\leq 10^6$，$1\leq h_i \leq 3\times 10^3$。



---

---
title: "[蓝桥杯 2013 省 A] 大臣的旅费"
layout: "post"
diff: 普及/提高-
pid: P8602
tag: ['2013', '蓝桥杯省赛']
---
# [蓝桥杯 2013 省 A] 大臣的旅费
## 题目描述

很久以前，T 王国空前繁荣。为了更好地管理国家，王国修建了大量的快速路，用于连接首都和王国内的各大城市。

为节省经费，T 国的大臣们经过思考，制定了一套优秀的修建方案，使得任何一个大城市都能从首都直接或者通过其他大城市间接到达。同时，如果不重复经过大城市，从首都到达每个大城市的方案都是唯一的。

J 是 T 国重要大臣，他巡查于各大城市之间，体察民情。所以，从一个城市马不停蹄地到另一个城市成了 J 最常做的事情。他有一个钱袋，用于存放往来城市间的路费。

聪明的 J 发现，如果不在某个城市停下来修整，在连续行进过程中，他所花的路费与他已走过的距离有关，在走第 $x - 1$ 千米到第 $x$ 千米这一千米中（$x$ 是整数），他花费的路费是 $x+10$ 这么多。也就是说走 $1$ 千米花费 $11$，走 $2$ 千米要花费 $23$。

J 大臣想知道：他从某一个城市出发，中间不休息，到达另一个城市，所有可能花费的路费中最多是多少呢？

## 输入格式

输入的第一行包含一个整数 $n(n \le 10^5)$，表示包括首都在内的 $T$ 王国的城市数。

城市从 $1$ 开始依次编号，$1$ 号城市为首都。

接下来 $n-1$ 行，描述 $T$ 国的高速路（$T$ 国的高速路一定是 $n-1$ 条）。

每行三个整数 $P_i,Q,D_i$，表示城市 $P_i$ 和城市 $Q_i$ 之间有一条高速路，长度为 $D_i(D_i \le 1000)$ 千米。
## 输出格式

输出一个整数，表示大臣J最多花费的路费是多少。


## 样例

### 样例输入 #1
```
5
1 2 2
1 3 1
2 4 5
2 5 4
```
### 样例输出 #1
```
135
```
## 提示

样例解释：大臣 J 从城市 $4$ 到城市 $5$ 要花费 $135$ 的路费。

时限 5 秒, 64M。蓝桥杯 2013 年第四届省赛


---

---
title: "[蓝桥杯 2014 省 AB] 蚂蚁感冒"
layout: "post"
diff: 普及/提高-
pid: P8611
tag: ['2014', '蓝桥杯省赛']
---
# [蓝桥杯 2014 省 AB] 蚂蚁感冒
## 题目描述

长 $100$ 厘米的细长直杆子上有 $n$ 只蚂蚁。它们的头有的朝左，有的朝右。

每只蚂蚁都只能沿着杆子向前爬，速度是 $1$ 厘米 / 秒。

当两只蚂蚁碰面时，它们会同时掉头往相反的方向爬行。

这些蚂蚁中，有 $1$ 只蚂蚁感冒了。并且在和其它蚂蚁碰面时，会把感冒传染给碰到的蚂蚁。

请你计算，当所有蚂蚁都爬离杆子时，有多少只蚂蚁患上了感冒。
## 输入格式

第一行输入一个整数 $n(1<n<50)$ 表示蚂蚁的总数。

接着的一行是 $n$ 个用空格分开的整数 $X_i(-100<X_i<100)$，$X_i$ 的绝对值，表示蚂蚁离开杆子左边端点的距离。正值表示头朝右，负值表示头朝左，数据中不会出现 $0$ 值，也不会出现两只蚂蚁占用同一位置。其中，第一个数据代表的蚂蚁感冒了。


## 输出格式

要求输出 $1$ 个整数，表示最后感冒蚂蚁的数目。
## 样例

### 样例输入 #1
```
3
5 -2 8
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
5
-10 8 -20 12 25
```
### 样例输出 #2
```
3
```


---

---
title: "[蓝桥杯 2014 省 AB] 地宫取宝"
layout: "post"
diff: 普及/提高-
pid: P8612
tag: ['2014', '蓝桥杯省赛']
---
# [蓝桥杯 2014 省 AB] 地宫取宝
## 题目描述

X 国王有一个地宫宝库。是 $n \times m$ 个格子的矩阵。每个格子放一件宝贝。每个宝贝贴着价值标签。

地宫的入口在左上角，出口在右下角。

小明被带到地宫的入口，国王要求他只能向右或向下行走。

走过某个格子时，如果那个格子中的宝贝价值比小明手中任意宝贝价值都大，小明就可以拿起它（当然，也可以不拿）。

当小明走到出口时，如果他手中的宝贝恰好是 $k$ 件，则这些宝贝就可以送给小明。

请你帮小明算一算，在给定的局面下，他有多少种不同的行动方案能获得这 $k$ 件宝贝。
## 输入格式

输入一行 $3$ 个整数，用空格分开：$n$，$m$，$k(1 \le n,m \le 50,1 \le k \le 12)$。

接下来有 $n$ 行数据，每行有 $m$ 个整数 $C_i(0 \le C_i \le 12)$ 代表这个格子上的宝物的价值。


## 输出格式

要求输出一个整数，表示正好取 $k$ 个宝贝的行动方案数。该数字可能很大，输出它对 $1000000007(10^9+7)$ 取模的结果。
## 样例

### 样例输入 #1
```
2 2 2
1 2
2 1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2 3 2
1 2 3
2 1 5
```
### 样例输出 #2
```
14
```
## 提示

时限 1 秒, 256M。蓝桥杯 2014 年第五届省赛


---

---
title: "[蓝桥杯 2014 国 A] 排列序数"
layout: "post"
diff: 普及/提高-
pid: P8620
tag: ['2014', '蓝桥杯国赛']
---
# [蓝桥杯 2014 国 A] 排列序数
## 题目描述

如果用 a b c d 这 $4$ 个字母组成一个串，有 $4!=24$ 种，如果把它们排个序，每个串都对应一个序号：

```text
  abcd  0
  abdc  1
  acbd  2
  acdb  3
  adbc  4
  adcb  5
  bacd  6
  badc  7
  bcad  8
  bcda  9
  bdac  10
  bdca  11
  cabd  12
  cadb  13
  cbad  14
  cbda  15
  cdab  16
  cdba  17
  ...
```

现在有不多于10个两两不同的小写字母，给出它们组成的串，你能求出该串在所有排列中的序号吗？

## 输入格式

一行，一个串。
## 输出格式

一行，一个整数，表示该串在其字母所有排列生成的串中的序号。注意：最小的序号是 $0$。

## 样例

### 样例输入 #1
```
bdca
```
### 样例输出 #1
```
11
```
### 样例输入 #2
```
cedab
```
### 样例输出 #2
```
70
```
## 提示

时限 1 秒, 256M。蓝桥杯 2014 年第五届国赛


---

---
title: "[蓝桥杯 2020 省 A1] 超级胶水"
layout: "post"
diff: 普及/提高-
pid: P8709
tag: ['2020', '蓝桥杯省赛', 'Ad-hoc']
---
# [蓝桥杯 2020 省 A1] 超级胶水
## 题目描述

小明有 $n$ 颗石子，按顺序摆成一排，他准备用胶水将这些石子粘在一起。
 
每颗石子有自己的重量，如果将两颗石子粘在一起，将合并成一颗新的石子，重量是这两颗石子的重量之和。

为了保证石子粘贴牢固，粘贴两颗石子所需要的胶水与两颗石子的重量乘积成正比，本题不考虑物理单位，认为所需要的胶水在数值上等于两颗石子重量的乘积。

每次合并，小明只能合并位置相邻的两颗石子，并将合并出的新石子放在原来的位置。

现在，小明想用最少的胶水将所有石子粘在一起，请帮助小明计算最少需要多少胶水。
## 输入格式

输入的第一行包含一个整数 $n$，表示初始时的石子数量。

第二行包含 $n$ 个整数 $w_1, w_2, \cdots, w_n$ 依次表示每颗石子的重量。
## 输出格式

输出一行包含一个整数，表示最少需要的胶水数。
## 样例

### 样例输入 #1
```
3
3 4 5
```
### 样例输出 #1
```
47
```
### 样例输入 #2
```
8
1 5 2 6 3 7 4 8
```
### 样例输出 #2
```
546
```
## 提示

对于 $20\%$ 的评测用例，$1 \le n \le 15$。

对于 $60\%$ 的评测用例，$1\leq n \leq 100$。

对于 $80\%$ 的评测用例，$1\leq n \leq 1000$。

对于所有评测用例，$1\leq n \leq 10^5$，$1 \leq w_i \leq 1000$。

蓝桥杯 2020 第一轮省赛 A 组 I 题。


---

---
title: "无知时诋毁原神"
layout: "post"
diff: 普及/提高-
pid: P8880
tag: ['Special Judge', 'O2优化']
---
# 无知时诋毁原神
## 题目背景

纳西妲很喜欢排列。

![](https://img2.huashi6.com/images/resource/thumbnail/2022/07/28/14225_32552389084.jpg?imageMogr2/quality/100/interlace/1/thumbnail/700x)

画师 pid：72405030
## 题目描述

纳西妲有一个 $0\sim n-1$ 的排列 $c$。她希望你构造两个同样为 $0\sim n-1$ 的排列的 $a,b$，满足 $\forall i\in[1,n],c_i=(a_i+b_i)\bmod n$。如果纳西妲的要求无法被满足，请输出 $-1$。
## 输入格式

第一行，一个整数 $n$。

第二行，$n$ 个整数，表示排列 $c$。
## 输出格式

如果不存在满足要求的构造，输出一行 $-1$。

否则，输出两行，每行 $n$ 个整数，第一行为 $a_i$，第二行为 $b_i$。
## 样例

### 样例输入 #1
```
3
2 1 0
```
### 样例输出 #1
```
2 0 1
0 1 2
```
### 样例输入 #2
```
4
1 3 0 2
```
### 样例输出 #2
```
-1
```
## 提示

### 数据范围

- $\text{Subtask 1(30 pts)}$：$n\le 10$。
- $\text{Subtask 2(20 pts)}$：保证有解。
- $\text{Subtask 3(50 pts)}$：无特殊性质。

对于 $100\%$ 的数据，保证 $1\le n\le 10^5$，$c$ 构成一个排列。


---

---
title: "懂事时理解原神"
layout: "post"
diff: 普及/提高-
pid: P8881
tag: ['O2优化']
---
# 懂事时理解原神
## 题目背景

胡桃喜欢用 dfs 求最短路，尽管这有可能会得到错误的答案。

![](https://img2.huashi6.com/images/resource/2021/03/01/8812956h7p1.jpg?imageMogr2/quality/100/interlace/1/thumbnail/700x)

画师 pid：6657532
## 题目描述

具体地，给定一个有 $n$ 个点和 $m$ 条边的无向无权图。则 dfs 求最短路的算法伪代码具体如下：

```
vis[], dis[]
dfs(u):
	vis[u] = 1
	记所有满足 u,v 之间有边且 !vis[v] 的点 v 构成的序列为 S
	以随机的顺序遍历 S: 
		dis[v] = dis[u] + 1
		dfs(v)
solve():
	for i in [1, n]: 
    	dis[i] = -1;
        vis[i] = 0
	dis[1] = 0
	dfs(1)
```

其中，```以随机的顺序遍历 S``` 可以被理解为随机打乱 $S$，得到每一种结果的概率均为 $\frac{1}{|S|!}$，并按照打乱后的顺序遍历。

现在，胡桃想要知道，如果她调用函数 ```solve()```，得到的最短路数组 ```dis[]``` 完全正确的概率有多大。```dis[]``` 被认为完全正确，当且仅当 $\forall i\in[1,n]$，```dis[i]``` 的值均等于从 $1$ 到 $i$ 的最短路长度（特别地，若 $1$ 无法走到 $i$，则认为 $1$ 到 $i$ 的最短路长度为 $-1$）。
## 输入格式

**本题多组询问。** 第一行输入一个数 $T$，表示询问组数。

对于每组询问：

第一行，两个整数 $n,m$。

第二行至第 $m+1$ 行，每行两个整数 $u,v$，表示 $u,v$ 之间有一条边。
## 输出格式

对于每组询问，输出一个实数，为 ```dis[]``` 数组完全正确的概率。**你需要输出答案保留三位小数（四舍五入）后的结果。**
## 样例

### 样例输入 #1
```
1
5 4
1 3
1 2
3 4
2 5
```
### 样例输出 #1
```
1.000
```
### 样例输入 #2
```
1
4 4
1 2
2 3
3 1
4 3
```
### 样例输出 #2
```
0.000
```
## 提示

- 对于 $20\%$ 的数据，$n,m\le 10$。
- 对于 $50\%$ 的数据，$n,m\le 1000$。
- 对于另外 $30\%$ 的数据，保证所给出的图为一仙人掌（任意一条边至多只出现在一条环上）。
- 对于 $100\%$ 的数据，$1\le n,m\le 50000，1\le T\le 10$，保证所输入的图无重边、自环。


---

---
title: "「JEOI-R1」棋"
layout: "post"
diff: 普及/提高-
pid: P8884
tag: ['O2优化']
---
# 「JEOI-R1」棋
## 题目背景

| 出题 | 标程 | 数据 | 验题 | 题解 |
| -----------: | -----------: | -----------: | -----------: | -----------: |
 | [RedNebula](/user/478829) | [RedNebula](/user/478829) | [RedNebula](/user/478829) and [gyyyyx](/user/554574) | [gyyyyx](/user/554574) | [RedNebula](/user/478829) |
 
[RedNebula](/user/478829) 和 [_JF_](/user/361141) 在下一盘棋，然后……
## 题目描述

现在有一个 $n\times m$ 的棋盘，从上到下依次是 $1\sim n$ 行，从左到右依次是 $1\sim m$ 列，一个位于第 $x$ 行第 $y$ 列的位置被标记为 $(x,y)$。共有 $c$ 个棋子，**不重叠**地摆放在棋盘的某些位置上。一个位于 $(x,y)$ 的棋子可以走向 $(x-1,y-1),(x-1,y+1),(x+1,y-1),(x+1,y+1)$（如果这些位置**存在**且其上**没有棋子**）。

现有若干询问，每次询问给定 $x_1,y_1,x_2,y_2,p$，然后给定 $p$ 个位置，表示一个子矩阵的左上角位置为 $(x_1,y_1)$，右下角位置为 $(x_2,y_2)$，问是否可以移动棋子（无次数限制）使得矩阵内**有且仅有**给定的 $p$ 个位置上有棋子。**询问之间相互独立。**

为了减少程序时间复杂度的常数影响，**建议使用更快的读入方式。**
## 输入格式

第一行三个正整数 $n,m,c$，表示棋盘的列数、行数和已有的棋子数。

接下来 $c$ 行，一行两个整数 $a_i,b_i$，表示有一个棋子位于 $a_i$ 行 $b_i$ 列处。

接下来一行一个正整数 $q$。

接下来 $q$ 组询问。每一组询问第一行是五个正整数 $x_1,y_1,x_2,y_2,p$，接下来 $p$ 行每行两个正整数 $c_i,d_i$，表示只希望矩阵内有棋子的位置。
## 输出格式

对于每个询问，如果可以移动棋子（无次数限制）使得矩阵内有且仅有给定的位置上有棋子，输出 `YES`，否则输出 `NO`。
## 样例

### 样例输入 #1
```
3 3 5
1 2
1 3
2 1
3 2
3 3
3
1 2 2 3 0
1 2 3 3 4
1 2
1 3
2 3
3 3
1 1 2 3 2
1 3
2 2
```
### 样例输出 #1
```
NO
YES
NO
```
## 提示

**【样例解释 \#1】**

解释以 `0` 代表空位，`1` 代表放置了棋子的位置。

初始状态：

```plain
011
100
011
```

对于第一个询问，可以证明 $(1,2)$ 处的棋子无法移出 $(1,2)$ 到 $(2,3)$ 的矩阵。

对于第二个询问，考虑把 $(3,2)$ 处的棋子移到 $(2,3)$，得：

```plain
011
101
001
```

满足询问要求。移动方式不唯一。

对于第三个询问，可以证明 $(2,1)$ 处的棋子无法移出 $(1,1)$ 到 $(2,3)$ 的矩阵。

**【数据范围】**

对于 $25\%$ 的数据，$n,m,q\le 10$，$c\le 20$。

对于另外 $25\%$ 的数据，保证 $a_i+b_i\equiv 0 \pmod 2$，$c_i+d_i\equiv 0 \pmod 2$。

对于另外 $25\%$ 的数据，保证 $n\cdot m-c\le(x_2-x_1+1)\cdot (y_2-y_1+1)-p$。

对于 $100\%$ 的数据，$2\le n,m\le 10^5$，$1\le c,q\le 10^5$，$c\le n\cdot m$，$1\le a_i\le n$，$1\le b_i\le m$，$\sum p\le 2\times 10^5$。对于每个询问，$1\le p\le (x_2-x_1+1)\cdot (y_2-y_1+1)$，$x_1\le c_i\le x_2$，$y_1\le d_i\le y_2$。

**【提示与说明】**

提供一种较快的读入一个 `int` 类型非负整数的方式。调用下文中的 `read()`，其作用是返回输入中的一个非负整数，同时读取其后的一个字符。

```cpp
int read() {
  int x(0);
  char c(getchar());
  while (c < '0' || c > '9') c = getchar();
  while (c >= '0' && c <= '9') x = (x << 3) + (x << 1) + (c ^ 48), c = getchar();
  return x;
}
```


---

---
title: "[RC-06] Multiples"
layout: "post"
diff: 普及/提高-
pid: P8909
tag: ['O2优化']
---
# [RC-06] Multiples
## 题目描述

给出 $n$，以及一个长度为 $n$ 的数组 $a$，$a_1\sim a_n$ 都是正整数，且 $a_i$ 在 $[1,10^9]$ 均匀随机生成。

对每个 $0\le k\le n$ 计算 $[1,m]$ 中有几个正整数 $x$ 恰好是 $k$ 个 $a_i$ 的倍数（也就是恰好存在 $k$ 个 $1\le i\le n$，$a_i\mid x$）。
## 输入格式

第一行两个正整数 $n,m$。

接下来一行 $n$ 个正整数 $a_1\sim a_n$。
## 输出格式

输出一行 $n+1$ 个整数，第 $i$ 个是 $k=i-1$ 的答案。
## 样例

### 样例输入 #1
```
5 1000000
1 2 3 4 5
```
### 样例输出 #1
```
0 266666 333335 266665 116668 16666
```
## 提示

本题没有部分分，只有 AC 才能得分。

所有数据均满足：$1\le n\le 2500$，$1\le m\le 10^9$，$1\le a_i\le 10^9$，且 $a_i$ 在 $[1,10^9]$ 中均匀随机生成。

**本题有 $6$ 组数据满足 $n=2500$，$2$ 组数据满足 $n\le 10$，共 $8$ 组数据。**

**所有数据都是如下方式生成：运行以下伪代码恰好一次生成，将其输出作为你的输入。**

```
function rnd(int l,int r):

return [l,r] 之内的随机整数

function main():

输入本组数据的 n,m
输出 n,m
输出 n 个正整数，都是 rnd(1,10^9) 的返回值
```

如果你不理解上面的生成方式，也可以阅读对应的 C++ 代码：

```cpp
#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
int main(){
	freopen("in.txt","w",stdout);
	int n,m;
	cin>>n>>m;
	cout<<n<<' '<<m<<'\n';
	mt19937_64 rng(time(0));
	const int M=1e9;
	for(int i=1;i<=n;i++)cout<<rng()%M+1<<' ';
}
```

样例不满足 $a_i$ 在 $[1,10^9]$ 均匀随机生成，因此样例不是合法的输入数据。测试数据中不包含样例。


---

---
title: "[RC-06] Operation Sequence"
layout: "post"
diff: 普及/提高-
pid: P8910
tag: ['Special Judge', 'O2优化']
---
# [RC-06] Operation Sequence
## 题目描述

给出 $n$，以及一个长度为 $n+1$ 的数组 $[a_1,a_2,\dots,a_{n+1}]$，初始时 $a_i=i\ (1\le i\le n)$，$a_{n+1}=0$。

你只能进行以下一种操作，通过输出特定字符串完成操作：

- 输出 `i j` ：其中 $i,j$ 为正整数，要求 $1\le i,j\le n+1$，表示把 $a_i$ 赋值为 $a_j$。

请把 $a$ 数组**的前 $n$ 位**向**右**循环移位 $K$ 位；即，在执行完毕你输出的所有操作后，要求 $a$ 数组第 $i\ (1\le i\le K)$ 位等于 $n-K+i$；第 $i\ (K+1\le i\le n)$ 位等于 $i-K$，第 $n+1$ 位任意。你只能进行至多 $T=\lfloor1.5n\rfloor$ 次赋值操作。

如果你进行的操作数多于 $T$ 也可以获得部分分，具体地，设你的操作次数为 $S$：

- 如果 $S\le T$，得 $100$ 分。
- 如果 $T<S\le 4T$，得 $50$ 分。
- 如果 $S>4T$，得 $0$ 分。

你在本题的得分是所有测试点中所有数据里得分的最小值。
## 输入格式

本题单个测试点内有多组数据。

第一行是数据组数 $T$。

对于每组数据：

第一行两个正整数 $n,K$。
## 输出格式

对于每组数据：

在第一行输出操作数 $k\ (0\le k\le 4T)$。**请注意，不需要最小化 $k$。**

接下来 $k$ 行，每行输出两个正整数 $i,j$，表示一次操作。$(1\le i,j\le n+1)$
## 样例

### 样例输入 #1
```
2
3 0
2 1
```
### 样例输出 #1
```
0
3
3 1
1 2
2 3
```
## 提示

所有数据均满足：$1\le T\le 10^4$，$1\le n\le 10^5$，$0\le K\le n-1$。保证同一个测试点中所有 $n$ 的和不超过 $5\times 10^5$。


---

---
title: "[DTOI 2023] B. 去年 11 月卵梦蕾简易钨丝"
layout: "post"
diff: 普及/提高-
pid: P8939
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# [DTOI 2023] B. 去年 11 月卵梦蕾简易钨丝
## 题目背景

# 大样例已修复

![](https://cdn.luogu.com.cn/upload/image_hosting/4il8fn7w.png)
## 题目描述

给定序列 $\{a_n\}$，支持两种形如 `opt x` 操作：

1. `1 x`：删除一个数 $x$，若序列中没有 $x$，则输出 $-1$ 并跳过本次操作，**若有多个 $x$，则仅删除一个**。

2. `2 x`：向序列中插入一个数 $x$。

**对于每个未被跳过的操作**，试求出 $a$ 的一个排列 $p$，最小化 $\sum \limits_{i=1}^{n} \lvert p_{i+1}-p_i\rvert$ 的值，即最小化 $\lvert p_2-p_1\rvert+\lvert p_3-p_2\rvert+\dots+\lvert p_{n+1}-p_n\rvert$ 的值，其中 $p_{n+1}=p_1$。

**保证任意时刻序列内至少有 $1$ 个数。**

---
$p$ 是 $a$ 的排列当且仅当对于 $\forall x$，$\sum [p_i=x]=\sum [a_i=x]$。

简而言之，$p$ 是 $a$ 经过某种方式重排后的结果。 

例如 $\{1,1,4,5,1,4\}$ 是 $\{1,5,4,1,4,1\}$ 的一个排列，但是 $\{1,5,4,1,4,7\}$ 不是。
## 输入格式

输入共 $q + 2$ 行。

第 $1$ 行两个正整数 $n, q$。

第 $2$ 行 $n$ 个非负整数 $a_1, a_2, \dots, a_n$，代表初始的序列。
		
第 $3 \sim q + 2$ 行，每行两个数 $opt, x$ ， 代表一个询问。 
## 输出格式

输出有多行。

每行输出 $1$ 个数，代表一个未被忽略的询问的答案，否则输出 `-1`。
	
## 样例

### 样例输入 #1
```
5 3
1 2 3 4 10
1 4
1 10
2 9
```
### 样例输出 #1
```
18
4
16
```
## 提示

#### 【样例 1 解释】
对于第一个询问，删除了序列中的数 $4$，则当前序列为$ 1, 2, 3, 10 $， 可以证明 $18$ 为当前序列的最小答案。
	
对于第二个询问，删除了序列中的数 $10$，则当前序列为$ 1, 2, 3 $， 可以证明 $4$ 为当前序列的最小答案。
	
对于第三个询问，向序列中添加了一个数 $9$，则当前序列为$ 1, 2, 3, 9 $， 可以证明 $16$ 为当前序列的最小答案。

#### 【样例 2】

见附加文件中的 `abs/abs2.in` 与 `abs/abs2.out`。

该样例满足测试点 $1\sim 4$ 的限制。

#### 【样例 3】

见附加文件中的 `abs/abs3.in` 与 `abs/abs3.out`。

该样例满足测试点 $7\sim 10$ 的限制。

#### 【数据范围与提示】
记 $w$ 为值域大小，对于所有测试数据，保证 $n,q\leq 10^6$，$0\leq w\leq 10^6$。
	
每个测试点的具体限制见下表：

| 测试点编号 | $n,q\leq$ | $w$ |
| :----------: | :----------: | :----------: |
| $1\sim 4$ | $100$ | $10$ |
| $5\sim 6$ | $10^3$ | $10^3$ |
| $7\sim 10$ | $10^6$ | $10^6$ |



---

---
title: "[YsOI2022] NOIp 和省选"
layout: "post"
diff: 普及/提高-
pid: P8948
tag: ['洛谷原创', 'Special Judge']
---
# [YsOI2022] NOIp 和省选
## 题目背景

Ysuperman 为了检验他的教学水平，决定给幼儿园的小朋友们来两场摸底考试！
## 题目描述

其中一场考试有四道题目，满分 $400$；另一场考试有六道题目，满分 $600$。每个人每场考试得分都是一个 $0$ 到满分间的一个**非负整数**（可以为 $0$ 或者满分）。

有 $n$ 名同学参加了这两场考试，其中第 $i$ 名同学第一场得分 $a_i$，第二场得分 $b_i$，Ysuperman 通过以下规则计算第 $i$ 名同学的**标准得分** $c_i$：

1. 分别统计两场比赛的最高分 $A,B$，有 $A\ne 0$，$B\ne 0$。
2. 令 $c_i=1000(\frac{a_i}{A}+\frac{b_i}{B})$，其中 $c_i$ **四舍五入保留到整数**。

在算出了每位同学的标准得分后，Ysuperman 粗心地弄丢了每位同学的原始分，你能帮 TA 找到任意一组可能的原始分吗？

简单来说，已知 $n$ 和每位同学的**标准得分** $c_{1\sim n}$，Ysuperman 希望你找到一组合法的 $a_{1\sim n}$，$b_{1\sim n}$ 满足上述要求。

特别的，有个十分强的小朋友 Qiu 在两场考试中都拿到了**最高分**，也就是保证 $c_1=2000$。另外其他小朋友水平都差不多，所以保证有 $\forall i>1,c_i\in [10,1990]$。
## 输入格式

第一行一个正整数 $n$。

接下来 $n$ 行，第 $i$ 行一个正整数 $c_i$。
## 输出格式

输出共 $n$ 行，第 $i$ 行两个非负整数 $a_i,b_i$，由题意可知你需要保证 $a_i\in [0,400]$，$b_i\in [0,600]$ 并且 $\max a_i>0$，$\max b_i>0$。
## 样例

### 样例输入 #1
```
4
2000
1319
1476
996
```
### 样例输出 #1
```
233 525
147 361
200 324
0 523
```
### 样例输入 #2
```
4
2000
1704
1658
1542
```
### 样例输出 #2
```
400 454
352 374
352 353
320 337
```
## 提示

样例一中构造的 $a,b$ 合法，理由如下：

两场比赛最高得分分别为 $233$ 和 $525$。

$1000\times (233\div 233 + 525\div 525)=2000$。

$1000\times (147\div 233 + 361\div 525) \approx 1318.520\approx 1319$。

$1000\times (200\div 233 + 324\div 525)\approx 1475.512\approx 1476$。

$1000\times (0\div 233 + 523\div 525)\approx 996.190\approx 996$。

前 $20\%$ 的数据保证 $n\le 20$。

另外 $20\%$ 的数据保证 $c_i$ 是 $10$ 的倍数。

另外 $20\%$ 的数据保证 $c_i$ 是 $5$ 的倍数。

另外 $20\%$ 的数据保证 $c_i$ 是 $2$ 的倍数。

对于 $100\%$ 的数据，满足 $1\le n\le 10^4$，$c_1=2000$，$\forall i>1,c_i\in[10,1990]$。


---

---
title: "「CGOI-3」招魂术"
layout: "post"
diff: 普及/提高-
pid: P8956
tag: ['洛谷原创']
---
# 「CGOI-3」招魂术
## 题目背景

墓园的骷髅海！

要塞的禁魔球！

塔楼的三后排！

据点的破甲比蒙！

地下城的满魔抗黑龙！

![](https://cdn.luogu.com.cn/upload/image_hosting/j0kff14j.png)

###### 塔楼↑

-----
燊队来打英雄无敌 3 了。
## 题目描述

招魂术是墓园阵营的核心法术。

拥有招魂术的英雄，在每场战争结束后，能根据消灭的敌军数目来获得一定数量的骷髅。我们可以用整数 $A,B$ 来描述招魂术。设 $F_{A,B}(i)$ 表示消灭 $i$ 个敌人所能获得的骷髅数量，有：

$$F_{A,B}(1)=A,F_{A,B}(2)=B,F_{A,B}(x)=\lfloor \sqrt{F_{A,B}(x-2)F_{A,B}(x-1)}\rfloor+1\;(x \ge 3)$$

现在燊队要在酒馆招募一个英雄，英雄甲招魂术的属性为 $A,B$，英雄乙招魂术的属性为 $X,Y$。为了比较两个英雄招魂术的强弱，请你计算以下式子的值：

$$\prod_{i=1}^nF_{X,Y}(i)-F_{A,B}(i)$$

燊队当然知道怎么做，但他想考考你。
## 输入格式

第一行一个整数 $T$，表示询问组数。

接下来 $T$ 行，每行五个整数 $n,A,B,X,Y$。
## 输出格式

输出为 $T$ 行，即每组询问答案对 $998244353$ 取模的结果。

建议使用 `sqrtl` 和 `long double` 进行开平方。
## 样例

### 样例输入 #1
```
4
5 2 10 1 8
11 4 5 1 4
19 1 9 8 10
114 51 4 1919 810
```
### 样例输出 #1
```
998244317
998242817
939523984
604148977
```
## 提示

#### 样例说明

在样例说明中，设 $F_{A,B}$ 为 $f$，$F_{X,Y}$ 为 $g$。

对于第一组询问：

- $f$ 的前 $n$ 位为 $f=\{2,10,5,8,7\}$。

- $g$ 的前 $n$ 位为 $g=\{1,8,3,5,4\}$。

所以最终的答案为 $(1-2)\times(8-10)\times(3-5)\times(5-8)\times(4-7)=-36$，对 $998244353$ 取模后的结果是 $998244317$。

---

#### 数据范围

对于 $40\%$ 的数据，$n \le 100$。

对于另外 $10\%$ 的数据，每组询问满足 $A=B,X=Y$。

对于另外 $10\%$ 的数据，$T=1$。

对于 $100\%$ 的数据，$1 \le A,B,X,Y,n \le 10^9$，$1 \le T \le 5\times 10^4$。


---

---
title: "[入门赛 #9] 神树大人挥动魔杖 (Hard Version)"
layout: "post"
diff: 普及/提高-
pid: P9006
tag: ['2023', 'O2优化', '语言月赛']
---
# [入门赛 #9] 神树大人挥动魔杖 (Hard Version)
## 题目背景

**本题与 Easy Version 题意完全相同，仅有 $n,k$ 的数据范围有所不同。**
## 题目描述

神树大人挥动魔杖，召唤出了 $9 \times 10^{n-1}$ 只家养小精灵。每只家养小精灵都有一个互不相同的 $n$ 位数编号 $a_i$。

神树大人希望将这些家养小精灵分为 $k$ 组。第 $p$ 组的所有家养小精灵满足编号 $a_i$ 对 $k$ 取模余 $p-1$，即 $a_i \equiv p-1 \pmod k$。

神树大人想要知道，每一组小精灵分别有多少只。由于答案可能很大，你只需要输出答案对 $100,000,007$ 取模的结果
## 输入格式

输入共一行两个整数，依次为 $n,k$。
## 输出格式

输出一行 $k$ 个整数，由空格分隔。第 $i$ 个整数代表第 $i$ 组小精灵的个数。
## 样例

### 样例输入 #1
```
3 10
```
### 样例输出 #1
```
90 90 90 90 90 90 90 90 90 90

```
## 提示

对于 $100\%$ 的数据，$1 \le n \le 5000$，$1 \le k \le 1000$。


---

---
title: "[入门赛 #9] 大碗宽面 (Hard Version)"
layout: "post"
diff: 普及/提高-
pid: P9008
tag: ['2023', 'O2优化', '语言月赛']
---
# [入门赛 #9] 大碗宽面 (Hard Version)
## 题目背景


**本题与 Easy Version 题意完全相同，仅有 $n$ 的数据范围和空间限制不同**。

扶苏和她的朋友们在 Impart 酒店开派对。
## 题目描述

算上扶苏，本次派对共有 $n$ 个人。但是，并不是任何两个人都互相认识，并且互相认识的人关系也未必好。

具体而言，任意两个人可能是如下三种关系之一：
1. 敌人
2. 朋友
3. 陌生人

派对的一大重要活动是相互握手。对任意两个人 $u,v$，他们之间的握手情况遵循下面的规则：
1. 如果 $u$ 和 $v$ 是朋友关系，那么他们一定握手一次。
2. 如果 $u$ 和 $v$ 是敌人关系，那么他们一定**不**握手。
3. 如果 $u$ 和 $v$ 是陌生人关系，且存在一个人 $w$，使得 $w$ 是 $u$ 和 $v$ 之一的朋友，同时是 $u,v$ 中另一人的敌人，则 $u$ 和 $v$ **不会**握手，否则 $u$ 和 $v$ 一定握手一次。

对第三条规则，简单的说法是：一对陌生人之间，如果某一方的朋友是另一方的敌人，则不握手，否则握手。

已知共有 $p$ 对人是朋友关系，$q$ 对人是敌人关系。除了这 $p + q$ 对人，其他每对人均为陌生人关系。

请你求出本次派对一共握手了多少次。
## 输入格式

第一行是三个整数，依次表示参加派对的人数 $n$，朋友关系的条数 $p$ 和敌人关系的条数 $q$。  
接下来 $p$ 行，每行两个整数 $u,v$，表示 $u$ 和 $v$ 是朋友关系。  
接下来 $q$ 行，每行两个整数 $u, v$，表示 $u$ 和 $v$ 是敌人关系。
## 输出格式

输出一行一个整数，表示本次派对的握手次数。
## 样例

### 样例输入 #1
```
4 2 2
1 2
2 3
1 4
1 3
```
### 样例输出 #1
```
3
```
## 提示

### 样例 1 解释

共有 $(1,2), (1,3), (1,4), (2,3), (2,4), (3,4)$ $6$ 对人。
- $(1,2)$ 是朋友，握手。
- $(1,3)$ 是敌人，不握手。
- $(1,4)$ 是敌人，不握手。
- $(2,3)$ 是朋友，握手。
- $(2,4)$ 是陌生人，但是 $1$ 是 $2$ 的朋友，也是 $4$ 的敌人，所以不握手。
- $(3,4)$ 是陌生人，但是不存在任何一个人既是 $3$ 和 $4$ 之一的敌人也是另一个人的朋友，故握手。

综上，一共握手 $3$ 次。

### 数据规模与约定

以下设 $m = p + q$，即 $m$ 是朋友和敌人关系条数之和。

- 对 $100\%$ 的数据，保证 $2 \leq n \leq 10^6$，$1 \leq u, v \leq n$，$0 \leq p,q \leq m \leq 10^3$，$u \neq v$。同一对敌人或朋友关系不会出现两次，不会有一对人同时是敌人或朋友关系。

By 一扶苏一


---

---
title: "[PA 2021] Pandemia"
layout: "post"
diff: 普及/提高-
pid: P9046
tag: ['2021', 'PA（波兰）']
---
# [PA 2021] Pandemia
## 题目描述

某国有 $n$ 座城市，其中 $\forall 1 \leq i < n$，城市 $i$ 与城市 $i + 1$ 有**双向**道路相连。

该国发生了疫情，一个城市要么无人感染，要么全体感染。具体地，一个城市初始时被感染当且仅当 $s_i = 1$。

疫情会扩散，每一天上午，你可以为一个未感染的城市的居民接种疫苗，下午，每个被感染的城市会向相邻的城市扩散，如果相邻的城市未接种疫苗，它将立即全员感染。

你作为城市管理者，想要知道执行最优策略的情况下，最少会有几个城市的所有人都被感染。
## 输入格式

**本题有多组测试数据。**

第一行一个整数 $T$，表示数据组数。

对于每组数据：

第一行，一个整数 $n$；

第二行，一个长度为 $n$ 的字符串 $s$。
## 输出格式

对于每组数据：

一行，一个整数，表示所求的值。
## 样例

### 样例输入 #1
```
3
8
00110100
10
1001000010
4
0000
```
### 样例输出 #1
```
5
7
0
```
## 提示

#### 样例 #1 解释
测试点一：第一天接种城市 $7$，第二天接种城市 $1$。

测试点二：第一天接种城市 $5$，第二天接种城市 $7$。

测试点三：初始不存在疫情，因此不需要接种。
#### 数据范围
对于 $100\%$ 的数据，$1 \leq n, T \leq 10^5$，$1 \leq \sum n \leq 10^6$。


---

---
title: "[PA 2020] Punkty rankingowe"
layout: "post"
diff: 普及/提高-
pid: P9093
tag: ['2020', 'Special Judge', 'PA（波兰）']
---
# [PA 2020] Punkty rankingowe
## 题目描述

**题目译自 [PA 2020](https://sio2.mimuw.edu.pl/c/pa-2020-1/dashboard/) Runda 1 [Punkty rankingowe](https://sio2.mimuw.edu.pl/c/pa-2020-1/p/ran/)。**

Bytie 决定认真准备今年的 PA。为了训练，他创建了一个 BitForces 账号，BitForces 是一个定期举办编程竞赛的平台。

Bytie 知道这个平台使用一种积分系统（也称为 rating），这个系统会让他知道自己的进步，也可以将自己的成绩与其他选手比较。选手的 rating 是一个整数（可能为负数）。在账号创建后，Bytie 的 rating 是 $0$，参加每场比赛后，他的 rating 都会加或减某一个整数。此外，在每场比赛后的 rating 变化历史是可以在平台上看到的。兴奋的 Bytie 开始分析这些数据。他在纸上写下了 $n$ 个连续的数字：

- 在一场比赛之后的最大 rating 上升；
- 在连续两场比赛之后的 rating 上升之和的最大值；
- 在连续三场比赛之后的 rating 上升之和的最大值；
- 以此类推，直到他写到在连续 $n$ 场比赛之后的 rating 上升之和的最大值；

几天后 Bytie 想要回想起 rating 变化的序列。然而，此时 BitForces 正出现技术问题。请帮助 Bytie 还原一个合法的 rating 变化序列，使其长度至少为 $n$ 并且符合写在纸上的数据。
## 输入格式

输入第一行包含一个整数 $n$，表示写在纸上的数字个数。

第二行包含 $n$ 个整数 $a_1,a_2,\cdots,a_n$。对于每个 $1\le j\le n$，连续 $j$ 场比赛的 rating 最大增幅恰好为 $a_j$。
## 输出格式

如果存在一个 rating 变化序列满足所有题目描述中的条件，输出一行 `TAK`。之后输出一行一个整数 $k$。第三行输出找到的 rating 变化序列 $b_1,b_2,\ldots,b_k$。如果有多种答案，输出任意一种均可。

如果不存在这样的变化序列，输出一行 `NIE` 即可。

可以证明对于输入如果存在一个 rating 变化序列，那么一定存在一个满足以上限制的序列。
## 样例

### 样例输入 #1
```
4
3 4 5 -1

```
### 样例输出 #1
```
TAK
9
2 2 -7 0 3 -7 3 -1 3
```
### 样例输入 #2
```
10
3 1 4 1 5 9 2 6 5 3
```
### 样例输出 #2
```
NIE
```
## 提示

#### 样例 1 解释

以下是一、二、三、四次连续比赛中名次增加最多的区间。

![](https://cdn.luogu.com.cn/upload/image_hosting/uvrbz3bh.png)

------------

#### 数据范围

**本题采用捆绑测试**

对于 $100\%$ 的数据，保证 $1\le n\le 300$，$-10^6\le a_i\le 10^6$，$n\le k\le 10^5$，$-10^{13}\le b_k\le 10^{13}$。


---

---
title: "[IOI 2009] Garage"
layout: "post"
diff: 普及/提高-
pid: P9115
tag: ['2009', 'IOI', 'O2优化']
---
# [IOI 2009] Garage
## 题目背景

IOI2009 D2T1
## 题目描述

一个停车场有 $N$ 个停车位，依次编号为 $1$ 到 $N$。每天早上，停车场的所有停车位都是空的。当一辆车到达停车场时，服务员检查是否有空的停车位。如果没有，则这辆车将在入口处等待，直到有新的停车位。如果有，则这辆车将停在编号最小的空的停车位上。如果多辆车在入口处等待，则它们会按照到达的顺序排成队列，当出现空的停车位时，队列中的第一辆车（最早到达的车辆）将停在该停车位上。

每辆车的停车费是它的重量乘以对应停车位的特定比率，和它在停车场停了多久无关。

停车场管理员得知今天将有 $M$ 辆车前来停车，以及它们到达和离开的顺序。帮他计算今天的收入。

**任务**：编写一个程序，给定每个停车位的特定比率，每辆车的重量和所有车辆到达和离开的顺序，求出车库的总收入。
## 输入格式

第一行包含两个由空格隔开的整数 $N, M$，分别表示停车位数和车辆数。

接下来 $N$ 行描述了停车位的收费率。其中第 $s$ 行包含一个整数 $R_s$，表示编号为 $s$ 的停车位每千克收费的价格。

接下来 $M$ 行描述了车辆的重量。车辆从 $1$ 到 $M$ 编号，其中第 $k$ 行包含一个整数 $W_k$，表示编号为 $k$ 的车辆的重量，单位千克。

接下来 $2M$ 行描述了所有车辆到达和离开的时间顺序。一个正数 $i$ 表示编号为 $i$ 的车辆到达停车场。一个负数 $-i$ 表示编号为 $i$ 的车离开停车场。没有车辆会在到达之前离开停车场，且 $1\sim M$ 每辆车会在序列中出现恰好两次，一次到达，一次离开。此外，没有车辆会在停入停车场之前离开，也就是说，不会有队列中的车辆离开。
## 输出格式

一行一个整数，表示停车场管理员今天的收入。
## 样例

### 样例输入 #1
```
3 4
2
3
5
200
100
300
800
3
2
-3
1
4
-4
-2
-1

```
### 样例输出 #1
```
5300

```
### 样例输入 #2
```
2 4
5
2
100
500
1000
2000
3
1
2
4
-1
-3
-2
-4

```
### 样例输出 #2
```
16200
```
## 提示

### 样例解释

- 样例 1：
  - 车辆 $3$ 停在车位 $1$，支付 $300\times 2 = 600$ 美元。
  - 车辆 $2$ 停在车位 $2$，支付 $100\times 3 = 300$ 美元。
  - 车辆 $1$ 停在车位 $1$（车辆 $3$ 空出的停车位），支付 $200\times 2 = 400$ 美元。
  - 车辆 $4$ 停在车位 $3$，支付 $800\times 5 = 4000$ 美元。

- 样例 2：
  - 车辆 $3$ 停在车位 $1$，支付 $1000\times 5 = 5000$ 美元。
  - 车辆 $1$ 停在车位 $2$，支付 $100\times 2 = 200$ 美元。
  - 车辆 $2$ 到达并在入口处等待。
  - 车辆 $4$ 到达并在入口处等待，排在车辆 $2$ 之后。
  - 当车辆 $1$ 离开时，车辆 $2$ 停在空出的车位 $2$，支付 $500\times 2 = 1000$ 美元。
  - 当车辆 $3$ 离开时，车辆 $4$ 停在空出的车位 $1$，支付 $2000\times 5 = 10000$ 美元。

### 数据范围与约定

- 对于 $40\%$ 的数据，没有车辆会在停车场等待。
- 对于 $100\%$ 的数据，$1\leq N\leq 100$，$1\leq M\leq 2000$，$1\leq R_s\leq 100$，$1\leq W_k\leq 10 ^ 4$。


---

---
title: "「GLR-R4」小满"
layout: "post"
diff: 普及/提高-
pid: P9155
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# 「GLR-R4」小满
## 题目背景

&emsp;&emsp;「树阴满地日当午，梦觉流莺时一声」

---

&emsp;&emsp;乐队训练之余，锻炼时间可是必不可少的，可是就算几个女孩子撒开蹄子跑，也不可能在高三打球狂人的统治下抢到一块羽毛球场的。经过了数周从训练室冲到球场，再从球场灰心地踱回训练室的循环后，阿绫绝望地向大家宣布了一个坏消息：“只能打野球了。”

&emsp;&emsp;“还有几个月了哟……”

&emsp;&emsp;“老 V 你又来了！”才回训练室的阿绫扶着门抱怨着。

&emsp;&emsp;“所以你们打球得抓紧时间啦！”

---

&emsp;&emsp;**小满**&emsp;「生活一圈圈日子一年年　总是这样重复一遍又一遍」
## 题目描述

&emsp;&emsp;野场羽毛球，在生态环境良好的校园里，可是经常遭遇不测的——

&emsp;&emsp;“天依！怎么球又被挂树上啦！”

&emsp;&emsp;如阿绫所见，她们仅剩的一颗可怜的羽毛球被天依用吃包子的劲儿抡到树上去了。为了避免找别人的排球或者篮球来砸树的尴尬，阿绫这次特意准备了一根折叠杆。

&emsp;&emsp;折叠杆初始时处于完全收缩状态，我们认为它的长度 $\ell=0$。完全展开折叠杆需要 $n$ 步，每步为以下两种情况之一：

1.  将杆末端的折叠处展开。此操作没有额外参数，操作完成后 $\ell\gets 2\ell$，即杆的长度变为原来的两倍。

2.  将杆末端的伸缩处展开。此操作将给出额外可变参数 $d$，操作完成后 $\ell\gets \ell+d$，即杆的长度增加 $d$。

&emsp;&emsp;树上球的高度、杆最终的高度和天依吃包子的劲儿可能都是庞大的，所以阿绫需要你来计算一下杆最终的长度 $\ell$。你需要回答阿绫 $n$ 次操作依次完成后，**$\ell$ 的二进制表示**。
## 输入格式

第一行一个整数 $T$ ，表示你需要分别处理的数据组数。

对于每组数据：

- 第一行一个整数 $n$，表示将进行的操作次数；

- 接下来 $n$ 行，每行格式形如 `1` 或 `2 d`，分别描述两类操作。其中整数 $d$ 用十进制表示。
## 输出格式

对于每组测试数据，输出最终的 $\ell$ 的二进制表示。**你的答案不应包含多余的前导零**。
## 样例

### 样例输入 #1
```
2
2
1
2 0
5
1
2 1
2 2
1
2 6
```
### 样例输出 #1
```
0
1100
```
## 提示

#### 样例 #1 解释

对于第一组测试数据：$\ell$ 的变化过程为：$0 \rightarrow 0 \rightarrow 0$，而 $(0)_{10}=(0)_2$。

对于第二组测试数据：$\ell$ 的变化过程为：$0 \rightarrow 0 \rightarrow 1 \rightarrow 3 \rightarrow 6 \rightarrow 12$，而 $(12)_{10}=(1100)_2$。  

### 数据规模与约定  

对于 $100\%$ 的数据，$1\leq T \leq 5$，$1\leq  n \leq 10^5$，$0\leq d < 2^{16}$。

对于不同的子任务，作如下约定：

| 子任务编号 |     $n$     | 特殊性质 | 子任务分值 |
| :--------: | :---------: | :------: | :--------: |
|    $1$     |  $\leq 20$  |    无    |    $10$    |
|    $2$     | $\leq 10^5$ |    有    |    $20$    |
|    $3$     | $\leq 10^3$ |    无    |    $40$    |
|    $4$     | $\leq 10^5$ |    无    |    $30$    |
  
- 特殊性质：仅存在第二种操作。



---

---
title: "[COCI 2022/2023 #4] Zrinka"
layout: "post"
diff: 普及/提高-
pid: P9173
tag: ['2022', 'COCI（克罗地亚）']
---
# [COCI 2022/2023 #4] Zrinka
## 题目描述

给你两个长度分别为 $n$ 和 $m$ 的数组，它们只由 $0$ 和 $1$ 组成。

你的任务是用偶数替换每个 $0$，用奇数替换每个 $1$。

替换之后，两个数组都应该是单调递增的且所有元素均大于 $0$，并且你最多可以使用每个正整数一次，使用的最大数字要尽可能的小。
## 输入格式

第一行由 $n+1$ 个整数组成，第一个是 $n(n\leq 5000)$，其他是描述第一个数组的。

第二行由 $m+1$ 个整数组成，第一个是 $m(m\leq 5000)$，其他是描述第二个数组的。
## 输出格式

一行一个正整数，即最大数字。
## 样例

### 样例输入 #1
```
0
4 1 0 1 1
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
4 0 1 0 1
4 1 0 0 1
```
### 样例输出 #2
```
9
```
### 样例输入 #3
```
5 0 1 0 0 1
4 0 0 0 1
```
### 样例输出 #3
```
13
```
## 提示

样例 $1$ 解释：

一组可行解：$(\varnothing),(1,2,3,5)$

样例 $2$ 解释：

一组可行解：$(2,3,4,5),(1,6,8,9)$。

样例 $3$ 解释：

一组可行解：$(2, 3, 6, 8, 9),(4,10,12,13)$。

|子任务编号|	附加限制|	分值|
|:-:|:-:|:-:|
| $0$ | 是样例 | $0$ |
| $1$ |	$n=0$ | $15$ |
| $2$ |	第一个数组只包括 $0$ | $20$ |
| $3$ |	$n,m\leq 500$ | $20$ |
| $4$ |	无附加限制 | $7$ |


---

---
title: "「PEOI Rd1」异或（xor）"
layout: "post"
diff: 普及/提高-
pid: P9223
tag: ['O2优化']
---
# 「PEOI Rd1」异或（xor）
## 题目描述

给定两个正整数 $n,m$，求：

$$\sum_{i=1}^{n}\sum_{j=1}^{m}\left(i \oplus j\right) $$

其中，$\oplus$ 表示按位异或运算（即 C++ 中的 `^` 符号）。答案对 $998244353$ 取模。
## 输入格式

本题包含多组数据。

第一行输入一个整数 $T$，表示数据组数。

接下来 $T$ 行，每行输入两个整数 $n,m$。
## 输出格式

输出共 $T$ 行，每行一个整数，表示每组询问的答案。
## 样例

### 样例输入 #1
```
2
2 2
3 3
```
### 样例输出 #1
```
6
12
```
### 样例输入 #2
```
2
4 8
8 9
```
### 样例输出 #2
```
144
420
```
## 提示

#### 样例解释

第一个样例第一组数据：

$\begin{aligned}&(1 \oplus 1)+(1 \oplus 2)+(2 \oplus 1)+(2 \oplus 2)\\=\ &0+3+3+0\\=\ &6\end{aligned}$

第二组数据：

$\begin{aligned}&(1 \oplus 1)+(1 \oplus 2)+(1 \oplus 3)+(2 \oplus 1)+(2 \oplus 2)+(2 \oplus 3)+(3 \oplus 1)+(3 \oplus 2)+(3 \oplus 3)\\=\ &0+3+2+3+0+1+2+1+0\\=\ &12\end{aligned}$

---

#### 数据范围

|子任务|$n,m \leq$|特殊性质|分值|
|:-:|:-:|:-:|:-:|
|$1$|$10^3$|无|$10$|
|$2$|$10^6$|无|$20$|
|$3$|$10^{16}$|A|$20$|
|$4$|$10^{16}$|无|$50$|

- 特殊性质 A：保证 $n=2^p-1$，$m=2^q-1$，其中 $p,q\in\mathbb Z$。

对于 $100\%$ 的数据，保证 $1 \leq n,m \leq 10^{16}$，$1 \leq T \leq 50$。


---

---
title: "[蓝桥杯 2023 省 A] 更小的数"
layout: "post"
diff: 普及/提高-
pid: P9232
tag: ['2023', '蓝桥杯省赛']
---
# [蓝桥杯 2023 省 A] 更小的数
## 题目描述

![image](https://cdn.luogu.com.cn/upload/image_hosting/y1rd2iun.png)

小蓝有一个长度均为 $n$ 且仅由数字字符 $0 \sim 9$ 组成的字符串，下标从 $0$ 到 $n-1$，你可以将其视作是一个具有 $n$ 位的十进制数字 $num$，小蓝可以从 $num$ 中选出一段连续的子串并将子串进行反转，最多反转一次。小蓝想要将选出的子串进行反转后再放入原位置处得到的新的数字 $num_{new}$ 满足条件 $num_{new}<num$，请你帮他计算下一共有多少种不同的子串选择方案，只要两个子串在 $num$ 中的位置不完全相同我们就视作是不同的方案。

注意，我们允许前导零的存在，即数字的最高位可以是 $0$，这是合法的。
## 输入格式

输入一行包含一个长度为 $n$ 的字符串表示 $num$（仅包含数字字符 $0 \sim 9$），从左至右下标依次为 $0 \sim n-1$。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
210102
```
### 样例输出 #1
```
8
```
## 提示

#### 【样例说明】

一共有 $8$ 种不同的方案：

1. 所选择的子串下标为 $0\sim1$，反转后的 $num_{new} = 120102 < 210102$；
2. 所选择的子串下标为 $0\sim2$，反转后的 $num_{new} =  012102 < 210102$；
3. 所选择的子串下标为 $0\sim3$，反转后的 $num_{new} =  101202 < 210102$；
4. 所选择的子串下标为 $0\sim4$，反转后的 $num_{new} =  010122 < 210102$；
5. 所选择的子串下标为 $0\sim5$，反转后的 $num_{new} =  201012 < 210102$；
6. 所选择的子串下标为 $1\sim2$，反转后的 $num_{new} =  201102 < 210102$；
7. 所选择的子串下标为 $1\sim4$，反转后的 $num_{new} =  201012 < 210102$；
8. 所选择的子串下标为 $3\sim4$，反转后的 $num_{new} =  210012 < 210102$。

#### 【评测用例规模与约定】

对于 $20\%$ 的评测用例，$1 \le n \le 100$；

对于 $40\%$ 的评测用例，$1 \le n \le 1000$；

对于所有评测用例，$1 \le n \le 5000$。



---

---
title: "[蓝桥杯 2023 省 B] 飞机降落"
layout: "post"
diff: 普及/提高-
pid: P9241
tag: ['2023', '蓝桥杯省赛']
---
# [蓝桥杯 2023 省 B] 飞机降落
## 题目描述

$N$ 架飞机准备降落到某个只有一条跑道的机场。其中第 $i$ 架飞机在 $T_{i}$ 时刻到达机场上空，到达时它的剩余油料还可以继续盘旋 $D_{i}$ 个单位时间，即它最早可以于 $T_{i}$ 时刻开始降落，最晩可以于 $T_{i}+D_{i}$ 时刻开始降落。降落过程需要 $L_{i}$ 个单位时间。

一架飞机降落完毕时，另一架飞机可以立即在同一时刻开始降落，但是不能在前一架飞机完成降落前开始降落。

请你判断 $N$ 架飞机是否可以全部安全降落。
## 输入格式

输入包含多组数据。

第一行包含一个整数 $T$，代表测试数据的组数。

对于每组数据，第一行包含一个整数 $N$。

以下 $N$ 行，每行包含三个整数 $T_{i},D_{i},L_{i}$。
## 输出格式

对于每组数据，输出 `YES` 或者 `NO`，代表是否可以全部安全降落。

## 样例

### 样例输入 #1
```
2
3
0 100 10
10 10 10
0 2 20
3
0 10 20
10 10 20
20 10 20
```
### 样例输出 #1
```
YES
NO
```
## 提示

**【样例说明】**

对于第一组数据，可以安排第 3 架飞机于 0 时刻开始降落，20 时刻完成降落。安排第 2 架飞机于 20 时刻开始降落，30 时刻完成降落。安排第 1 架飞机于 30 时刻开始降落，40 时刻完成降落。

对于第二组数据，无论如何安排，都会有飞机不能及时降落。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据，$N \leq 2$。

对于 $100 \%$ 的数据，$1 \leq T \leq 10$，$1 \leq N \leq 10$，$0 \leq T_{i},D_{i},L_{i} \leq 10^{5}$。 

蓝桥杯 2023 省赛 B 组 D 题。


---

---
title: "[蓝桥杯 2023 省 B] 接龙数列"
layout: "post"
diff: 普及/提高-
pid: P9242
tag: ['2023', '蓝桥杯省赛']
---
# [蓝桥杯 2023 省 B] 接龙数列
## 题目描述

对于一个长度为 $K$ 的整数数列：$A_{1},A_{2},\ldots,A_{K}$，我们称之为接龙数列当且仅当 $A_{i}$ 的首位数字恰好等于 $A_{i-1}$ 的末位数字（$2 \leq i \leq K$）。

例如 $12,23,35,56,61,11$ 是接龙数列；$12,23,34,56$ 不是接龙数列，因为 $56$ 的首位数字不等于 $34$ 的末位数字。所有长度为 $1$ 的整数数列都是接龙数列。

现在给定一个长度为 $N$ 的数列 $A_{1},A_{2},\ldots,A_{N}$，请你计算最少从中删除多少 个数，可以使剩下的序列是接龙序列？
## 输入格式

第一行包含一个整数 $N$。

第二行包含 $N$ 个整数 $A_{1},A_{2},\ldots,A_{N}$。
## 输出格式

一个整数代表答案。
## 样例

### 样例输入 #1
```
5
11 121 22 12 2023
```
### 样例输出 #1
```
1
```
## 提示

**【样例说明】**

删除 $22$，剩余 $11,121,12,2023$ 是接龙数列。 

**【评测用例规模与约定】**

对于 $20 \%$ 的数据，$1 \leq N \leq 20$。

对于 $50 \%$ 的数据，$1 \leq N \leq 10^4$。

对于 $100 \%$ 的数据，$1 \leq N \leq 10^{5}$，$1 \leq A_{i} \leq 10^{9}$。所有 $A_{i}$ 保证不包含前导 0。

蓝桥杯 2023 省赛 B 组 E 题。


---

---
title: "[PA 2022] Palindrom"
layout: "post"
diff: 普及/提高-
pid: P9251
tag: ['2022', 'PA（波兰）']
---
# [PA 2022] Palindrom
## 题目描述

**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda próbna [Palindrom](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/pal/)**

Bytie 参加了计算机俱乐部，因此知道了什么是回文串。回文串是从左向右读和从右向左读一样的单词。比如 `oko`，`kajak`，`kobyłamamałybok` 和 `ababbaba` 都是回文串，但是 `kajaki`，`zoo`，`alamakota` 和 `abaababa` 都不是回文串。

他迅速打开了笔记本并写下了一个只包含 `a` 和 `b` 两个字母的单词。然而在回忆了一会儿后，他想起这个单词不一定是一个回文串，因此他决定修改一下！在一秒内，它可以选择两个相邻的字母并交换他们的位置。他是否可以通过有限次操作（或者什么也不做）把这个字符串变成一个回文串？如果可以的话，最少要多少秒才可以？请帮他写一个程序计算这个最小时间。
## 输入格式

输入一行一个字符串，表示 Bytie 所写的单词。这个字符串仅包含 `a` 和 `b` 两种字母。
## 输出格式

输出一行一个整数，如果可以通过有限次操作将这个字符串变为回文串，输出最小时间，否则输出 $-1$。
## 样例

### 样例输入 #1
```
abbaaab

```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
ab
```
### 样例输出 #2
```
-1
```
## 提示

对于 $100\%$ 的数据，满足：

字符串长度不超过 $2 \times 10^5$。


---

---
title: "[PA 2022] Muzyka pop 2"
layout: "post"
diff: 普及/提高-
pid: P9256
tag: ['2022', 'PA（波兰）']
---
# [PA 2022] Muzyka pop 2
## 题目描述

**题目译自 [PA 2022](https://sio2.mimuw.edu.pl/c/pa-2022-1/dashboard/) Runda 2 [Muzyka pop 2](https://sio2.mimuw.edu.pl/c/pa-2022-1/p/muz/)**

你可能还记得，Matthew 喜欢流行音乐。他刚刚编好一首新歌，就差给这首歌谱一个结尾了。

Matthew 想让这个结尾包含一些非空的音符，这些音符用其响度表示，响度是一个正整数。Matthew 可以使用任何响度的音符，但结尾的任务是逐渐淡出整首歌——出于这个原因，结尾的音符响度必须形成一个严格递减的序列。

你可能知道或记得，流行音乐中好的节拍是很重要的。这次 Matthew 发现响度为 $x$ 的音符的节拍值为 $x$ 的二进制形式中 $1$ 的个数。考虑这首歌的剩余部分，他想让这个结尾所有音符的节拍值之和恰好为 $n$。

帮他找到这个正确的音符响度序列。可以证明总存在至少一个满足条件的序列，因此你的任务是输出字典序最小的序列。

注：如果对于两个数字序列 $A$ 和 $B$，在两序列第一个不同的位置，$A$ 序列中这个位置包含的整数比 $B$ 序列的小，我们称数字序列 $A$ 的字典序比 $B$ 的字典序小。如果不存在这个位置，则称更短的那个数字序列字典序更小。例如，序列 $[1, 10000000]$ 的字典序小于序列 $[2,2]$，序列 $[4, 2, 20, 30, 40]$ 的字典序小于 $[4, 2, 100, 1]$，并且序列 $[5,4,3,2]$ 的字典序小于序列 $[5,4,3,2,1]$。
## 输入格式

输入一行一个整数 $n$，表示要求的序列中音符的节拍值之和。
## 输出格式

输出第一行包含一个整数 $k$，表示找到的这个序列的长度。

第二行包含 $k$ 个正整数，表示找到的这个序列。这个序列应该是字典序最小且严格递减的，并且这些正整数的二进制表示中 $1$ 的个数和应恰好是 $n$。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
2
3 1

```
### 样例输入 #2
```
10
```
### 样例输出 #2
```
6
7 5 4 3 2 1

```
## 提示

对于 $100\%$ 的数据，满足：

$1\le n\le 10 ^ 6$。


---

---
title: "[CEOI 2013] 灌水 / Watering"
layout: "post"
diff: 普及/提高-
pid: P9273
tag: ['2013', '提交答案', 'Special Judge', 'CEOI（中欧）']
---
# [CEOI 2013] 灌水 / Watering
## 题目背景

upd on 2023/11/01: 本题部分分已修复。

翻译自 [CEOI 2013 Day 2](https://ceoi2013.hsin.hr/tasks/tasks_day2.pdf)。

Sara 是一位专注的农民，拥有一块大的长方形土地。她的土地被分成网格状的若干个单元格，共有 $5\times R$ 行和 $5\times C$ 列。此外，每隔五行有一道横向的围栏，每隔五列有一道纵向的围栏。这些围栏将土地划分成了 $R\times C$ 个大小为 $5\times5$ 的区域，称为田地。

![](https://cdn.luogu.com.cn/upload/image_hosting/1d5z6e4a.png)

这块农田两个最常见的问题是鸟害和旱灾。为了对抗鸟害，有些田地安置了稻草人。稻草人（如果有的话）占据一个单元格，每个 $5\times5$ 的田地最多只能有一个稻草人。

在干旱期，可能会持续数月时间，Sara 使用洒水器来浇灌她的庄稼。每个洒水器都有三个喷嘴：一个主喷嘴和两个侧喷嘴。它正好占据三个单元格，并浇灌所有这些单元格。侧喷嘴总是占据紧邻主喷嘴（上、下、左或右）的两个单元格。因此，单个洒水器可以浇灌到的三个单元格如图所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/mkdmixtp.png)

Sara 要在未被稻草人占据的每个单元格上恰好放置一个洒水器。含有稻草人的单元格不能包含洒水器喷嘴。此外，喷嘴不能放置在 Sara 的土地之外。被单个洒水器浇灌的三个单元格不一定属于同一 $5\times5$ 领域：它们也可以属于相邻的领域。在这种情况下，Sara 必须在两个由同一洒水器浇灌的相邻领域之间的栅栏上钻一个洞。
## 题目描述

**这是一个提交答案题。您将获得 $10$ 个输入文件，只需提交相应的输出文件即可。您可以从附件里的 `watering.in.zip` 中下载输入文件。**

提交一个可行的浇灌方案，使得它满足所有的要求。

如果存在多个解决方案，可以提交任何一个。
## 输入格式

输入的第一行包含一对整数 $R$ 和 $C$（$1≤R,C≤100$），它们表示 Sara 的土地的大小。


接下来的 $6\times R-1$ 行，每行包含一个长度为 $6\times C-1$ 的字符序列。它们代表 Sara 的田地和它们之间的围栏。即使围栏实际上是无限薄的，它也用字符表示。


一个单元格用一个字符表示。点字符 `.` 表示空单元格，而 `#` 字符表示稻草人。垂直围栏用 `|` 字符表示，水平围栏用 `-` 字符表示。交叉点用 `+` 字符表示。
## 输出格式

输出文件应该包含采用与输入文件相同格式的文本表示具有有效喷水器排列的字段。栅栏中的每个孔应该由下划线字符 `_` 表示。输入文件中的所有空单元格（点）都应替换为小写字母 `a` - `z` ，以满足以下规则：

1. 由同一喷水器浇灌的任何三个单元格都由相同的字母表示，即使它们不全部在同一个 $5\times5$ 的农田中。
2. 如果同一块田中相邻的两个单元格由不同的喷水器浇灌，则它们必须用不同的字母表示。
3. 如果不同农田中的两个相邻单元格由不同的喷水器浇灌，并且它们之间有一个栅栏孔，则它们必须用不同的字母表示（但是这样钻孔的意义何在）。
4. 允许将属于不同农田的相邻单元格表示为相同的字母，只要满足所有先前的规则。
## 样例

### 样例输入 #1
```
2 2
.....|.....
.....|.....
...#.|.....
.....|.....
.....|.....
-----+-----
.....|.....
.....|.....
.....|.....
.....|.....
.....|.....
```
### 样例输出 #1
```
aaacc|dxxxa
bbbce|dyyya
ddd#e|dzzza
ccbae|fccbb
cbbaa|ffcdb
-----+---_-
ssrrr|tttdd
saaax_xxeee
yxbbb|zdaaa
yxccc|zdbbb
yxddd|zdccc
```
## 提示

每个测试点的分值为 $10$ 分。如果输出方案无效，该测试点将获得零分。如果方案有效，则将按以下方式进行评分：
- 如果栅栏上的孔的数量不超过 $R\times C$，则得分为 $10$ 分。
- 否则，得分为 $5$ 分。


在 $10$ 个测试输入中的 $4$ 个中，每个田地都有一个稻草人。

SPJ 提供者：@[cff_0102](https://www.luogu.com.cn/user/542457) 。注：附件中的文件请用记事本/写字板打开。


---

---
title: "[POI 2020] Cukiernia / 糕点店"
layout: "post"
diff: 普及/提高-
pid: P9294
tag: ['2020', 'POI（波兰）']
---
# [POI 2020] Cukiernia / 糕点店
## 题目背景

**题目译自 [XXVIII Olimpiada Informatyczna – I etap](https://sio2.mimuw.edu.pl/c/oi28-1/dashboard/) [Cukiernia](https://sio2.mimuw.edu.pl/c/oi28-1/p/cuk/)。**
## 题目描述

Bajtuś 面包店售卖蛋糕，甜甜圈和羊角面包三种食物。在面包店中，有 $n$ 个橱窗，在正常情况下，每个货架上只应该放置一种食物。但一天早上，面包店老板 Bajtazara 的儿子 Bajtuś 偷偷进入了面包店，将所有的食物摆放得乱七八糟。

面包店马上就要开门了，Bajtazara 急切地想要重新摆放食物，使得每个货架上只有一种食物（特别地，一个货架上没有食物也是允许的）。请你帮助他求出，至少需要移动多少次食物才能达成目标。
## 输入格式

第一行一个整数 $n$，代表面包店中货架的数量。

接下来 $n$ 行，第 $i$ 行三个整数 $d_i,p_i,r_i$，分别代表该货架上现有的蛋糕数，甜甜圈数和羊角面包数。数据保证面包店中至少有一份食物。
## 输出格式

输出一个整数，表示需要移动食物的最小次数。
## 样例

### 样例输入 #1
```
5
5 1 1
0 3 4
1 4 3
4 0 0
0 0 0
```
### 样例输出 #1
```
9
```
### 样例输入 #2
```
3
1 1 2
2 1 1
1 1 2
```
### 样例输出 #2
```
7
```
### 样例输入 #3
```
5
5 5 5
5 5 5
5 5 5
5 5 5
5 5 5
```
### 样例输出 #3
```
50
```
## 提示

【样例解释#1】：

一种合法的移动方案如下：

1. 将一个甜甜圈从货架 $1$ 移动至货架 $3$，将一个羊角面包从货架 $1$ 移动至货架 $2$；
2. 将三个甜甜圈从货架 $2$ 移动至货架 $3$；
3. 将一个蛋糕从货架 $3$ 移动至货架 $1$，将三个羊角面包从货架 $3$ 移动至货架 $2$；

在此之后，货架 $1$ 只有蛋糕，货架 $2$ 只有羊角面包，货架 $3$ 只有甜甜圈，货架 $4$ 只有蛋糕，货架 $5$ 是空的。

【数据范围】：

所有测试点均满足：$3 \leq n \leq 3 \times 10^5$，$0 \leq d_i,p_i,r_i \leq 10^9$。

| 子任务编号 | $n \leq$        | 分值 |
| :----------: | :---------------: | :----: |
| $1$        | $10$            | $15$ |
| $2$        | $5 \times 10^3$ | $35$ |
| $3$        | $3 \times 10^5$ | $50$ |


---

---
title: "[CCC 2023 J5] CCC Word Hunt"
layout: "post"
diff: 普及/提高-
pid: P9303
tag: ['2023', 'CCC（加拿大）']
---
# [CCC 2023 J5] CCC Word Hunt
## 题目描述

In the CCC Word Hunt, words are hidden in a grid of letters. The letters of a hidden word always appear in order on horizontal, vertical, or diagonal line segments in one of two ways.One way is for the letters of a word to appear on one line segment. The other way is for the letters of a word to appear on one line segment up to some letter and then on a second line segment that forms a right angle at this letter.

Given a grid of letters and a single word to search for, your job is to determine the number of times that particular word is hidden in the grid.
## 输入格式

The first line of input will contain a string of distinct uppercase letters $W$,representing the word you are to search for in the grid. The length of $W$ will be at least two. The second line of input will be an integer $R(1 \le R \le 100)$, where $R$ is the number of rows in the grid.The third line of input will be an integer $C(1 \le C \le 100)$, where $C$ is the number of columns in the grid.

The remaining input will provide the letters in the grid. It will consist of $R$ lines, where each line contains $C$ uppercase letters separated by single spaces.
## 输出格式

The following table shows how the available 15 marks are distributed:

| Marks | Word Placement |
| :----------: | :---------- |
| $2$ | On one horizontal line segment |
| $2$ | On one horizontal or vertical line segment |
| $2$ | On one horizontal, vertical, or diagonal line segment |
| $9$ | On one line segment or two perpendicular line segments |

The output will consist of a single non-negative integer $H$, representing the number of times the word is hidden in the grid.
## 样例

### 样例输入 #1
```
MENU
5
7
F T R U B L K
P M N A X C U
A E R C N E O
M N E U A R M
M U N E M N S
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
NATURE
6
9
N A T S F E G Q N
S A I B M R H F A
C F T J C U C L T
K B H U P T A N U
D P R R R J D I R
I E E K M E G B E
```
### 样例输出 #2
```
4
```
## 提示

**本题采用捆绑测试**。

- Subtask $1$（$2$ points）：隐藏字符串一定在一条水平线段上。
- Subtask $2$（$2$ points）：隐藏字符串一定在一个水平或垂直线段上。
- Subtask $3$（$2$ points）：隐藏字符串一定在一个水平、垂直或对角线线段上。
- Subtask $4$（$9$ points）：隐藏字符串一定在一个线段或两个互相垂直的线段上。

样例 $1$ 图解：

![](https://cdn.luogu.com.cn/upload/image_hosting/wqo2un8k.png)

样例 $2$ 图解：

![](https://cdn.luogu.com.cn/upload/image_hosting/v082p2qr.png)
## 题目翻译

在 CCC Word Hunt 这款游戏中，它的每一关都会给你一个目标字符串 $W$（$2 \leq |W| \leq R + C - 1$），然后你需要在一个 $R \times C$（$1 \leq R,C \leq 100$）的矩阵中寻找这个字符串，而且找到目标字符串的方法有且仅有 $2$ 种，分别为：

- 这个隐藏字符串按水平、垂直或对角斜线排成了一条直线。

- 这个隐藏字符串先进行一段，然后转 $90$ 度再进行一段。

请计算出该 $R \times C$ 的矩阵中一共包含几个隐藏字符串。


---

---
title: "[ICPC 2022 Xi'an R] Hotel"
layout: "post"
diff: 普及/提高-
pid: P9363
tag: ['2022', 'O2优化', 'ICPC']
---
# [ICPC 2022 Xi'an R] Hotel
## 题目描述

You are doing volunteer work for a programming competition in an ancient hotel. Unfortunately, the hotel provides no phone signal or tap water since it can be dated back to the Qin Dynasty, and you have to assign the contestants to the hotel rooms manually instead of using the internet apps. Fortunately, the hotel has sufficient rooms, and you have taken a computer that lets you do some computation locally.

There are $n$ teams, each with exactly $3$ contestants. There are $2$ types of rooms in the hotel, the single room and double room, which can receive at most $1$ and $2$ contestants, respectively. To avoid embarrassing contestants, if two contestants are assigned to a double room, they must come from the same team and have the same gender.

The cost of each room of the same type is the same, but different types may have different costs. Your program needs to calculate the minimum price the host has to pay. The teams are waiting in the registration hall now, and the competition finance officer relies on you to save costs and make a fortune by the residual value. Be quick, or the finance officer will sue you for violating his reputation!
## 输入格式

The first line of input contains three integers $n$, $c_1$ and $c_2$ ($1 \leq n, c_1, c_2 \leq 1\,000$), denoting the number of teams, the cost of a single room and a double room respectively.

In the following $n$ lines, each line contains a string $S$ with exactly $3$ uppercase English letters. The letters in a string denote the genders of the contestants in one team and will be represented by $\texttt{A}$ to $\texttt{Z}$, respecting the diversity of human beings.
## 输出格式

The output should contain a single integer, denoting the minimum cost of hotel allocation for contestants.
## 样例

### 样例输入 #1
```
3 1 3
MMM
MMM
FFF

```
### 样例输出 #1
```
9

```
### 样例输入 #2
```
3 3 1
ABC
DEF
GHI

```
### 样例输出 #2
```
9

```
### 样例输入 #3
```
10 438 438
WWW
SOU
PUN
ETC
OME
CFI
NAL
GOO
DHO
TEL

```
### 样例输出 #3
```
12264

```
## 提示

**Source**: The 2022 ICPC Asia Xi'an Regional Contest Problem F.

**Author**: fstqwq.
## 题目翻译

### 题目描述

你正在一个古代的酒店里为一场编程竞赛做志愿工作。酒店的历史可以追溯到秦朝，所以酒店不提供手机信号和自来水。你无法使用网络软件，不得不手动为参赛者分配房间。幸运的是，酒店拥有充足的房间，并且你有一台电脑帮你做一些计算。

共有 $n$ 个队伍，每个队伍恰有 $3$ 名选手。酒店有两种房间，单人间和双人间，分别可以容纳 $1$ 和 $2$ 名选手。为了避免使选手尴尬，如果两名选手分配到了同一个双人间，他们必须来自同一个队伍，并拥有相同的性别。

相同种类的房间的花费相同，但不同种类的房间花费可能不同。你需要计算主办方最少需要花多少钱。选手们已经在登记厅等候多时，而竞赛财务经理依靠你来节省开支，私吞剩下来的钱发大财。你需要尽快完成任务，否则财务经理将起诉你侵犯了他的名誉权！

$1\leq n, c_1, c_2\leq 1000$。

### 输入格式

第一行三个整数 $n, c_1, c_2$，分别表示队伍数量，单人间单价和双人间单价。

接下来的 $n$ 行，每行一个长度为 $3$ 的字符串 $S$ 表示一个队伍的参赛队员的性别。为了尊重人类的多样性，$S$ 可能包含从 $\texttt A$ 到 $\texttt Z$ 的所有大写字母。

### 输出格式

输出一行一个整数表示分配房间的最小代价。


---

---
title: "红草莓"
layout: "post"
diff: 普及/提高-
pid: P9391
tag: ['洛谷原创', 'O2优化', '洛谷月赛']
---
# 红草莓
## 题目描述

有一个由 $n$ 颗珍珠串成的项链，项链是一个环，首尾相连。其中有一颗珍珠上有特殊的记号，我们称它为**起始珍珠**。

有个外星人很会发射宇宙射线，他依次发射了 $m$ 轮宇宙射线，第 $i$ 轮有一个参数 $a_i$，表示：

- 外星人从起始珍珠开始数，起始珍珠是 $0$ 号，起始珍珠的下一个珍珠是 $1$ 号，以此类推（数完一圈后还会继续，例如 $n$ 号珍珠仍然是起始珍珠，$n+1$ 号珍珠是起始珍珠的下一个珍珠）。外星人会对编号为 $0,a_i,2a_i,\dots$ 这些 $a_i$ 倍数位置上的珍珠都发射一次宇宙射线。

一开始所有珍珠都是红色的，而当一个珍珠被发射宇宙射线后就会被从红色染成蓝色。

你需要输出：对于每轮操作，有多少个操作前为红色的珍珠被这轮操作变成了蓝色。
## 输入格式

第一行：两个整数 $n,m$。

第二行：$m$ 个整数 $a_1,\dots,a_m$。
## 输出格式

第一行：$m$ 个整数，分别表示每轮操作中有多少个操作前为红色的珍珠被变为蓝色。
## 样例

### 样例输入 #1
```
6 6
6 3 4 2 5 1

```
### 样例输出 #1
```
1 1 2 0 2 0

```
## 提示

**【样例解释】**

如图是初始时以及每次操作后各珍珠的颜色，起始珍珠编号为 $0$，可以看到，每次操作新染蓝的珍珠数量分别为 $1,1,2,0,2,0$：

![](https://cdn.luogu.com.cn/upload/image_hosting/mt4dg5ap.png)

---

**【数据范围】**

对于全部数据：$1\leq n,m\leq 5\times 10^5$，$1\leq a_i\leq n$。

|     子任务编号     |    $n\leq$     |    $m\leq$     |  特殊限制   | 分值 |
| :----------------: | :------------: | :------------: | :---------: | :--: |
| $\text{Subtask 1}$ |     $100$      |     $100$      |     无      | $15$ |
| $\text{Subtask 2}$ |     $1000$     |     $1000$     |     无      | $15$ |
| $\text{Subtask 3}$ |     $10^5$     |     $10^5$     | $a_i\mid n$ | $20$ |
| $\text{Subtask 4}$ |     $10^5$     |      $10$      |     无      | $20$ |
| $\text{Subtask 5}$ | $5\times 10^5$ | $5\times 10^5$ |     无      | $30$ |

---

![](https://cdn.luogu.com.cn/upload/image_hosting/nzd79suj.png)


---

---
title: "『STA - R2』Locked"
layout: "post"
diff: 普及/提高-
pid: P9408
tag: ['O2优化']
---
# 『STA - R2』Locked
## 题目背景

GOD_hj 有一把数字密码锁，但是他陷于 whk，没时间来开锁。
## 题目描述

这把锁从左到右有 $n$ 个数，组成了一个序列 $\{a\}$。

由于 GOD_hj 的记性不好，所以只要将锁设置为输入任意单峰序列即可打开。具体为：
$$ a_1 \le \cdots \le a_i \ge a_{i+1} \ge \cdots \ge a_n\quad (1 \le i \le n) $$

GOD_hj 的锁是拨动式的，即拨一下就能换成临近的一个数（$0$ 和 $9$ 可以互换）。

求最少拨几下可以开锁。
## 输入格式

第一行一个整数，$n$。

第二行 $n$ 个整数，为序列 $\{a\}$。
## 输出格式

一个整数，为最少要拨动几下。
## 样例

### 样例输入 #1
```
3
1 2 3
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
7
1 2 6 5 6 7 2
```
### 样例输出 #2
```
1
```
## 提示

**【样例解释】**

样例二：把第四个 $5$ 变为 $6$ 或把第三个 $6$ 变为 $5$。

**【数据范围】**

**本题采用捆绑测试。**

$$
\newcommand{\arraystretch}{1.5}
\begin{array}{c|c|c|c}\hline\hline
\textbf{Subtask} & \bm n\le &\textbf{分值}&\textbf{特殊性质} \\\hline
\textsf{1} & 5 & 5 & \textbf{无} \\\hline
\textsf{2} & 10^3 & 25 & \textbf{无} \\\hline
\textsf{3}  & 5\times 10^5 & 20 & \textbf{无} \\\hline
\textsf{4} & 5\times 10^6 & 10 & a_i\in\{0,1\} \\\hline
\textsf{5} & 5\times 10^6 & 40 & \textbf{无} \\\hline\hline
\end{array}
$$

对于全部数据，$1\le n\le 5\times 10^6$，$0\le a_i<10$。

**Upd on 2023/06/12**：新加 5 组 Hack 数据，放入 Subtask 6，不计分。


---

---
title: "[蓝桥杯 2023 国 B] 抓娃娃"
layout: "post"
diff: 普及/提高-
pid: P9426
tag: ['2023', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 B] 抓娃娃
## 题目描述

小明拿了 $n$ 条线段练习抓娃娃。他将所有线段铺在数轴上，第 $i$ 条线段的左端点在 $l_i$，右端点在 $r_i$。小明用 $m$ 个区间去框这些线段，第 $i$ 个区间的范围是 $[L_i, R_i]$。如果一个线段有 **至少一半** 的长度被包含在某个区间内，则将其视为被这个区间框住。请计算出每个区间框住了多少个线段？


## 输入格式

输入共 $n + m + 1$ 行。

第一行为两个正整数 $n, m$。

后面 $n$ 行，每行两个整数 $l_i, r_i$。

后面 $m$ 行，每行两个整数 $L_i, R_i$。
## 输出格式

输出共 $m$ 行，每行一个整数。
## 样例

### 样例输入 #1
```
3 2
1 2
1 3
3 4
1 4
2 4
```
### 样例输出 #1
```
3
2
```
## 提示

### 评测用例规模与约定

 - 对于 $20\%$ 的数据，保证 $n, m \le 10^3$。
 - 对于 $100\%$ 的数据，保证 $n, m ≤ 10^5$，$l_i < r_i$，$0 < l_i, r_i, L_i, R_i \le 10^6$，$\max \{r_i − l_i\} \le \min \{R_i − L_i\}$。
 
第十四届蓝桥杯大赛软件赛决赛 C/C++ 大学 B 组 H 题


---

---
title: "[入门赛 #14] 魔法少女扶苏 (Hard Version)"
layout: "post"
diff: 普及/提高-
pid: P9457
tag: ['2023', 'O2优化', '语言月赛']
---
# [入门赛 #14] 魔法少女扶苏 (Hard Version)
## 题目描述

给定一个 $n$ 行 $m$ 列的数字矩阵，第 $i$ 行第 $j$ 列的数称为 $a_{i,j}$。

扶苏可以释放任意多次魔法，每次施放魔法，矩阵里的**每个**数字都会被减去 $1$。

现在扶苏想知道，她至少需要释放几次魔法，才能让矩阵中存在至少 $k$ 个位置 $(x, y)$，满足 $a_{x, y}$ 大于或等于它所在行和列的元素之和。

形式化地，你需要计算最小的魔法释放次数使得施放魔法后存在至少 $k$ 个位置 $(x, y)$，满足 $a_{x, y} \geq \sum \limits _{i = 1}^n a_{i,y} + \sum \limits _{i = 1}^m a_{x,i}$。
## 输入格式

第一行是三个整数，表示矩阵的行数 $n$，列数 $m$ 和要求符合条件的位置个数 $k$。

接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行的第 $j$ 个整数表示初始的 $a_{i,j}$。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
2 3 1
1 2 3
4 5 6

```
### 样例输出 #1
```
3
```
## 提示

### 样例 1 解释

释放 $3$ 次魔法后，矩阵变为

$$\begin{matrix}-2 & -1 & 0\\1& 2&3\\\end{matrix}$$

于是 $a_{1,1} = -2 > (-1) + (-3) = \sum\limits_{i =1}^n a_{i,1} + \sum\limits_{i = 1}^m a_{1, i}$。

### 数据规模与约定

- 对 $100\%$ 的数据，保证 $1 \leq n, m \leq 3 \times 10^3$，$1 \leq k \leq n \times m$，$0 \leq a_i \leq 10^{11}$。

### 提示

**请使用合理的读入方式，避免超时。**


---

---
title: "[入门赛 #14] 扶苏和串 (Hard Version)"
layout: "post"
diff: 普及/提高-
pid: P9458
tag: ['2023', 'O2优化', '语言月赛']
---
# [入门赛 #14] 扶苏和串 (Hard Version)
## 题目背景

众所周知，每个月入门赛的字符串题都是扶苏来枚举 idea 出出来的。
## 题目描述

给定一个 01 字符串 $s$，你可以任选 $s$ 的一个非空子串，把这个子串在 $s$ 中**翻转**一次。

问你能得到字典序最小的字符串是什么？

形式化的，你可以选择一个区间 $[l, r]$ 满足 $1 \leq l \leq r \leq |s|$，构造一个串 $t$ 满足：

$$t_i = \begin{cases}s_i, &i < l \text{ 或 } i > r \\ s_{r - (i - l)}, & l \leq i \leq r\end{cases}$$

最小化字符串 $t$ 的字典序。
## 输入格式

输入只有一行一个字符串，表示 $s$。
## 输出格式

输出一行一个字符串，表示得到的字典序最小的字符串。
## 样例

### 样例输入 #1
```
101
```
### 样例输出 #1
```
011
```
### 样例输入 #2
```
0010100
```
### 样例输出 #2
```
0000101
```
## 提示

### 样例 1 解释

$s = \texttt{\underline{10}1}$，翻转下划线标出的子串，得到 $t = \texttt{011}$

### 样例 2 解释

$s = \texttt{00\underline{10100}}$，翻转下划线标出的子串，得到 $\texttt{0000101}$。

### 数据规模与约定

下面用 $|s|$ 表示输入字符串的长度。

- 对 $100\%$ 的数据，$1 \leq |s| \leq 3000$。$s$ 只含字符 $\texttt{0,1}$。


---

---
title: "[yLOI2022] 西施江南"
layout: "post"
diff: 普及/提高-
pid: P9473
tag: ['O2优化', '洛谷月赛']
---
# [yLOI2022] 西施江南
## 题目背景

> 我晤江南面 如逢西施颜  
> 清芬宜送岸 菡萏新雨前  
> 皓腕分珠帘 珠露扬波珠玉敛  
> 天然一段聚散 嫣然曾与言  
> 平芜辙尚浅 无韵化湖田  
> 林园虽工典 芳姿不可嵌  
> 何人冠诗篇 重街杳杳重门掩  
> 似有柔荑遮目 空谷足尖

银临《西施江南》
## 题目描述

给定 $n$ 个正整数 $a_1, a_2, a_3, \dots a_n$，记 $g$ 是这些数的**最大公约数**，$l$ 是这些数的**最小公倍数**。请你判断 $l \times g$ 是否等于 $a_1 \times a_2 \times \dots \times a_n$。
## 输入格式

**本题单测试点内有多组测试数据**。

输入的第一行是一个整数 $T$，表示测试数据组数。对每组数据按如下格式输入：

每组数据的第一行是一个整数，表示整数个数 $n$。  
每组数据的第二行有 $n$ 个整数，第 $i$ 个整数表示 $a_i$。
## 输出格式

对每组数据依次输出一行一个字符串表示答案。

- 若 $l \times g = a_1 \times a_2 \times \dots \times a_n$，请输出 $\texttt{Yes}$。
- 否则，请输出 $\texttt{No}$。
## 样例

### 样例输入 #1
```
3
2
2 3
3
2 3 4
3
3 8 35
```
### 样例输出 #1
```
Yes
No
Yes
```
### 样例输入 #2
```
见附加文件中的 C2.in
```
### 样例输出 #2
```
见附加文件中的 C2.ans
```
## 提示

### 数据规模与约定

以下用 $N$ 表示单个测试点内 $n$ 的和，即 $N = \sum n$。

- 对 $12\%$ 的数据，保证 $n = 2$。
- 对 $36\%$ 的数据，保证 $n \leq 5$。
- 对 $52\%$ 的数据，保证 $N \leq 1000$。
- 对 $76\%$ 的数据，保证 $N,a_i \leq 10^5$。
- 对 $100\%$ 的数据，保证 $2 \leq n,N \leq 5 \times 10^5$，$2 \leq a_i \leq 10^8$，$1 \leq T \leq 20$。

### 提示

**数据千万条，清空第一条**。  
**多测不清空，爆零两行泪**。  
**清空不规范，超时总相伴**。


---

---
title: "「CROI · R1」浣熊的溪石"
layout: "post"
diff: 普及/提高-
pid: P9554
tag: ['O2优化']
---
# 「CROI · R1」浣熊的溪石
## 题目背景

>回首往昔，碧空如洗，日暖风恬。\
溪石深浅有致地错落在明澈似玉的梦枫溪里。\
浣熊们水上跑酷的无限趣忆亦于此伊始……

## 题目描述

日升月落，春去秋来，梦枫溪石的高度千变万化。
爱思考的小浣熊 CleverRaccoon 想探寻这些溪石究竟能构成多少种不同的高度序列。

现有若干个长度为 $n$ 的非负整数列 $a$。

当 $n>1$ 时，$a_1,a_n$ 的取值为 $0\sim m$，其它数 $a_i$ 的取值为 $0\sim m-1$，其中 $2\leq i \leq n-1$。

当 $n=1$ 时，$a_1$ 的取值为 $0\sim m+1$。

**定义**：当且仅当 $\forall i\in\{1,2,\dots ,n\},a_i=b_i$ 或 $\forall i\in\{1,2,\dots ,n\},a_i=b_{n-i+1}$ 时，数列 $a,b$ 相同。

现给定 $n,m$，请求出最多有多少个**不同**的数列，答案对 $998244353$ 取模。
## 输入格式

**本题包含多组测试数据。**

第一行，输入一个正整数 $T$，表示数据组数。

接下来 $T$ 行，每行输入以空格间隔的 $2$ 个正整数 $n,m$，意义见题目描述。
## 输出格式

共 $T$ 行，对于每组数据，一行输出一个正整数，表示答案对 $998244353$ 取模的结果。
## 样例

### 样例输入 #1
```
3
1 3
2 2
6 3
```
### 样例输出 #1
```
5
6
666

```
## 提示

#### 解释 #1

当 $n=1,m=3$ 时，$a_i\in\{0,1,2,3,4\}$，共有 $5$ 种不同的高度序列。

当 $n=2,m=2$ 时，共有 $6$ 种不同的高度序列，详情如下：

|序号|$a_1=$|$a_2=$|
|:-:|:-:|:-:|
|$1$|$0$|$0$|
|$2$|$0$|$1$|
|$3$|$0$|$2$|
|$4$|$1$|$1$|
|$5$|$1$|$2$|
|$6$|$2$|$2$|

#### 数据范围
**本题采用 Subtask 捆绑测试。**

|Subtask|$n\leq$|$m\leq$|$T\leq$|特殊性质|Score|
|:-:|:-:|:-:|:-:|:-:|:-:|
|$0$|$10$|$10$|$10$|无特殊性质|$10$|
|$1$|$10^3$|$1$|$10^3$|$m=1$|$5$|
|$2$|$10^3$|$3$|$10$|$m=3$|$10$|
|$3$|$10^3$|$10^3$|$1$|无特殊性质|$15$|
|$4$|$10^6$|$10^3$|$100$|无特殊性质|$10$|
|$5$|$10^6$|$10^6$|$10^6$|无特殊性质|$20$|
|$6$|$10^9$|$10^9$|$10^6$| $n$ 为奇数|$10$|
|$7$|$10^9$|$10^9$|$10^6$| $n$ 为偶数|$10$|
|$8$|$10^{18}$|$10^9$|$10^6$|无特殊性质|$10$|

对于 $100\%$ 的数据，保证 $1\leq n\leq10^{18},1\leq m\leq10^9,1\leq T\leq10^6$。


---

---
title: "[SDCPC 2023] Matching"
layout: "post"
diff: 普及/提高-
pid: P9562
tag: ['2023', '山东', 'O2优化', 'XCPC']
---
# [SDCPC 2023] Matching
## 题目描述

Given an integer sequence $a_1, a_2, \cdots, a_n$ of length $n$, we construct an undirected graph $G$ from the sequence. More precisely, for all $1 \le i < j \le n$, if $i - j = a_i - a_j$, there will be an undirected edge in $G$ connecting vertices $i$ and $j$. The weight of the edge is $(a_i + a_j)$.

Find a matching of $G$ so that the sum of weight of all edges in the matching is maximized, and output this maximized sum.

Recall that a matching of an undirected graph means that we choose some edges from the graph such that any two edges have no common vertices. Specifically, not choosing any edge is also a matching.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:

The first line contains an integer $n$ ($2 \le n \le 10^5$) indicating the length of the sequence.

The second line contains $n$ integers $a_1, a_2, \cdots, a_n$ ($-10^9 \le a_i \le 10^9$) indicating the sequence.

It's guaranteed that the sum of $n$ of all test cases will not exceed $5 \times 10^5$.
## 输出格式

For each test case output one line containing one integer indicating the maximum sum of weight of all edges in a matching.
## 样例

### 样例输入 #1
```
3
9
3 -5 5 6 7 -1 9 1 2
3
-5 -4 -3
3
1 10 100

```
### 样例输出 #1
```
30
0
0

```
## 提示

For the first sample test case, the optimal choice is to choose the three edges connecting vertex $3$ and $5$, vertex $4$ and $7$, and finally vertex $8$ and $9$. The sum of weight is $(5 + 7) + (6 + 9) + (1 + 2) = 30$.

For the second sample test case, as all edges have negative weights, the optimal matching should not choose any edge. The answer is $0$.

For the third sample test case, as there is no edge in the graph, the answer is $0$.
## 题目翻译

**【题目描述】**

给定长度为 $n$ 的整数序列 $a_1, a_2, \cdots, a_n$，我们将从该序列中构造出一张无向图 $G$。具体来说，对于所有 $1 \le i < j \le n$，若 $i - j = a_i - a_j$，则 $G$ 中将存在一条连接节点 $i$ 与 $j$ 的无向边，其边权为 $(a_i + a_j)$。

求 $G$ 的一个匹配，使得该匹配中所有边的边权之和最大，并输出最大边权之和。

请回忆：无向图的匹配，指的是从该无向图中选出一些边，使得任意两条边都没有公共的节点。特别地，不选任何边也是一个匹配。

**【输入格式】**

有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：

第一行输入一个整数 $n$（$2 \le n \le 10^5$）表示序列的长度。

第二行输入 $n$ 个整数 $a_1, a_2, \cdots, a_n$（$-10^9 \le a_i \le 10^9$）表示序列。

保证所有数据中 $n$ 之和不超过 $5 \times 10^5$。

**【输出格式】**

每组数据输出一行一个整数，表示匹配的最大边权之和。

**【样例解释】**

对于第一组样例数据，最优方案是选择连接节点 $3$ 和 $5$，节点 $4$ 和 $7$，以及节点 $8$ 和 $9$ 的三条边，边权之和为 $(5 + 7) + (6 + 9) + (1 + 2) = 30$。

对于第二组样例数据，由于每条边的边权都是负数，因此最优匹配不应该选择任何边，答案为 $0$。

对于第三组样例数据，由于图中不存在任何边，因此答案为 $0$。


---

---
title: "[ICPC 2020 Nanjing R] Evil Coordinate"
layout: "post"
diff: 普及/提高-
pid: P9626
tag: ['2020', 'Special Judge', 'O2优化', 'ICPC', '南京']
---
# [ICPC 2020 Nanjing R] Evil Coordinate
## 题目描述

A robot is standing on an infinite 2-dimensional plane. Programmed with a string $s_1s_2\cdots s_n$ of length $n$, where $s_i \in \{\text{`U'}, \text{`D'}, \text{`L'}, \text{`R'}\}$, the robot will start moving from $(0, 0)$ and will follow the instructions represented by the characters in the string.

More formally, let $(x, y)$ be the current coordinate of the robot. Starting from $(0, 0)$, the robot repeats the following procedure $n$ times. During the $i$-th time:

- If $s_i = \text{`U'}$ the robot moves from $(x, y)$ to $(x, y+1)$;
- If $s_i = \text{`D'}$ the robot moves from $(x, y)$ to $(x, y-1)$;
- If $s_i = \text{`L'}$ the robot moves from $(x, y)$ to $(x-1, y)$;
- If $s_i = \text{`R'}$ the robot moves from $(x, y)$ to $(x+1, y)$.-

However, there is a mine buried under the coordinate $(m_x, m_y)$. If the robot steps onto $(m_x, m_y)$ during its movement, it will be blown up into pieces. Poor robot!

Your task is to rearrange the characters in the string in any order, so that the robot will not step onto $(m_x, m_y)$.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:

The first line contains two integers $m_x$ and $m_y$ ($-10^9 \le m_x, m_y \le 10^9$) indicating the coordinate of the mine.

The second line contains a string $s_1s_2\cdots s_n$ of length $n$ ($1 \le n \le 10^5$, $s_i \in \{\text{`U'}, \text{`D'}, \text{`L'}, \text{`R'}\}$) indicating the string programmed into the robot.

It's guaranteed that the sum of $n$ of all test cases will not exceed $10^6$.
## 输出格式

For each test case output one line. If a valid answer exists print the rearranged string, otherwise print ``Impossible`` instead. If there are multiple valid answers you can print any of them.
## 样例

### 样例输入 #1
```
5
1 1
RURULLD
0 5
UUU
0 3
UUU
0 2
UUU
0 0
UUU

```
### 样例输出 #1
```
LDLRUUR
UUU
Impossible
Impossible
Impossible

```
## 题目翻译

一个机器人位于平面直角坐标系的原点处。给定一串指令，由 `UDLR` 四个字符构成，分别表示向上下左右移动 $1$ 单位长度。

$(m_x, m_y)$ 处埋有地雷，你需要任意重排指令使得机器人不会经过该坐标，判定是否有解并构造方案。

多组数据。指令长度不超过 $10 ^ 5$，长度总和不超过 $10 ^ 6$。


---

---
title: "[ICPC 2020 Nanjing R] Let's Play Curling"
layout: "post"
diff: 普及/提高-
pid: P9633
tag: ['2020', 'O2优化', 'ICPC', '南京']
---
# [ICPC 2020 Nanjing R] Let's Play Curling
## 题目描述

Curling is a sport in which players slide stones on a sheet of ice toward a target area. The team with the nearest stone to the center of the target area wins the game.

Two teams, Red and Blue, are competing on the number axis. After the game there are $(n+m)$ stones remaining on the axis, $n$ of them for the Red team and the other $m$ of them for the Blue. The $i$-th stone of the Red team is positioned at $a_i$ and the $i$-th stone of the Blue team is positioned at $b_i$.

Let $c$ be the position of the center of the target area. From the description above we know that if there exists some $i$ such that $1 \le i \le n$ and for all $1 \le j \le m$ we have $|c - a_i| < |c - b_j|$ then Red wins the game. What's more, Red is declared to win $p$ points if the number of $i$ satisfying the constraint is exactly $p$.

Given the positions of the stones for team Red and Blue, your task is to determine the position $c$ of the center of the target area so that Red wins the game and scores as much as possible. Note that $c$ can be any real number, not necessarily an integer.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:

The first line contains two integers $n$ and $m$ ($1 \le n, m \le 10^5$) indicating the number of stones for Red and the number of stones for Blue.

The second line contains $n$ integers $a_1, a_2, \cdots, a_n$ ($1 \le a_i \le 10^9$) indicating the positions of the stones for Red.

The third line contains $m$ integers $b_1, b_2, \cdots, b_m$ ($1 \le b_i \le 10^9$) indicating the positions of the stones for Blue.

It's guaranteed that neither the sum of $n$ nor the sum of $m$ will exceed $5 \times 10^5$.
## 输出格式

For each test case output one line. If there exists some $c$ so that Red wins and scores as much as possible, output one integer indicating the maximum possible $\textbf{score}$ of Red (NOT $c$). Otherwise output ``Impossible`` (without quotes) instead.
## 样例

### 样例输入 #1
```
3
2 2
2 3
1 4
6 5
2 5 3 7 1 7
3 4 3 1 10
1 1
7
7
```
### 样例输出 #1
```
2
3
Impossible
```
## 提示

For the first sample test case we can assign $c = 2.5$ so that the stones at position 2 and 3 for Red will score.

For the second sample test case we can assign $c = 7$ so that the stones at position 5 and 7 for Red will score.
## 题目翻译

# [ICPC2020 Nanjing R] Let's Play Curling

## 题目描述

红队和蓝队在冰面上向目标区域滑动冰壶，距离目标区域中心最近的队伍获胜。

两支队伍在一条直线上竞争。比赛结束后，有   $(n+m)$ 个冰壶在直线上, $n$ 个是红队的，剩下 $m$ 个是蓝队的。 红队的第 $i$ 个冰壶被放在 $a_i$ ，蓝队的第 $i$ 个冰壶被放在 $b_i$ 。

设 $c$ 是中心。如果存在一些 $i$ 使得 $1 \le i \le n$ 并且对于所有 $1 \le j \le m$ 都有 $|c - a_i| < |c - b_j|$ 红队就赢得比赛。另外，如果满足条件的 $i$ 的数目是 $p$ ，则认为红队赢得 $p$ 分。

给你红蓝两队的冰壶的位置，请你确定中心 $c$ 的值，使红队得分最多。注意， $c$ 是任意实数，不一定是整数。

## 输入格式

有很多测试样例。第一行输入一个整数 $T$ ，表示样例数量。对于每个测试样列：

第一行包括两个整数 $n$ 和 $m$ ($1 \le n, m \le 10^5$) 分别表示红队和蓝队的冰壶数量。

第二行包括 $n$ 个整数 $a_1, a_2, \cdots, a_n$ ($1 \le a_i \le 10^9$) 表示红队的冰壶的位置。

第三行包括 $m$ 个整数 $b_1, b_2, \cdots, b_m$ ($1 \le b_i \le 10^9$)表示蓝队的冰壶的位置。

数据保证 $n$ 的总和以及 $m$ 的总和都不会超过 $5 \times 10^5$ 。

## 输出格式

每一个测试样列输出一行。如果存在 $c$ 使得红队获胜且得分最多, 输出一个整数表示红队最大 $\textbf{ 得分 }$ (不是 $c$) 。否则输出 ``Impossible`` ( 不带等号 ) 。

## 样例 #1

### 样例输入 #1

```
3
2 2
2 3
1 4
6 5
2 5 3 7 1 7
3 4 3 1 10
1 1
7
7
```

### 样例输出 #1

```
2
3
Impossible
```

## 提示

对于第一个样例，当 $c = 2.5$ 时，红队的位于 2 和 3 的冰壶可以得分。

对于第二个样例，当 $c = 7$ 时，红队的位于 5 和 7 的冰壶可以得分。


---

---
title: "「yyOI R1」youyou 的篡改（Easy Ver.）"
layout: "post"
diff: 普及/提高-
pid: P9636
tag: ['O2优化']
---
# 「yyOI R1」youyou 的篡改（Easy Ver.）
## 题目背景

**Easy Version 与 Hard Version 仅最后所求内容不同，其他描述均一致。**
## 题目描述

youyou 准备举办一场比赛，这场比赛有 $n$ 道题，每一道题都有一个难度值 $v_i$。

youyou 给出一个计数分量 $k(k\le n)$，他认为，第 $x(x \geq k)$ 道题的可做性 $a_x$ 应当是第 $1\sim x$ 题所有题目中将难度值从小到大排序后难度较大的 $k$ 道题目难度值之和。

由于第 $1 \sim k-1$ 题难度过于简单，youyou 不想考虑这些题目的可做性。

那么这场比赛的总可做性即为第 $k$ 道题至第 $n$ 道题可做性之和，即 $\sum^{n}_{i=k}a_i$
 的值。

youyou 可以篡改题目 $m$ 的难度为任意正整数，但是他并不希望这场比赛过难或者过简单，所以他要求总可做性必须介于 $[l,r]$ 之间。

youyou 想知道，他通过篡改题目 $m$ 的难度，可以将总可做性最大篡改为多少？

特别的，如不存在一组解请输出 $-1$。
## 输入格式

第一行输入五个正整数，分别为 $n,m,k,l,r$。

第二行输入 $n$ 个整数，第 $i$ 个数 $v_i$ 为第 $i$ 道题难度值。
## 输出格式

仅一行，输出一个数，表示在满足条件的前提下，总可做性可改为的最大值。
## 样例

### 样例输入 #1
```
5 1 1 5 10
1 2 2 2 2
```
### 样例输出 #1
```
10
```
## 提示

### 样例解释#1

因为 $m=1$，因此 $a_1$ 是可以被篡改的，当 $a_1=2$ 时，总可做性为 $2+2+2+2+2=10$，因为 $10 \in [5,10]$，因此可以将总可做性最大篡改为 $10$。

## 数据范围

本题启用 **Subtask**，对于每一个 **Subtask**，你需要通过全部测试点才能得到该部分的分数。

| 子任务编号 | $n$ | 分数 |
| :-----------: | :-----------: | :-----------: |
| $1$ | $\le10$ | $15$ |
| $2$ | $\le10^3$ | $15$ |
| $3$ | $\le10^5$ | $70$ |


对于 $100\%$ 的数据，$1\le k,t \le n \le 10^5$，$1 \le l \le r \le 10^{9}$，$0\le v_i\le10^9$。


---

---
title: "[ICPC 2022 Jinan R] Identical Parity"
layout: "post"
diff: 普及/提高-
pid: P9671
tag: ['2022', 'Special Judge', 'O2优化', 'ICPC', '济南']
---
# [ICPC 2022 Jinan R] Identical Parity
## 题目描述

Let the value of a sequence be the sum of all numbers in it.

Determine whether there exists a permutation of length $n$ such that the values of all subsegments of length $k$ of the permutation share the same parity. The values share the same parity means that they are all odd numbers or they are all even numbers.

A subsegment of a permutation is a contiguous subsequence of that permutation. A permutation of length $n$ is a sequence in which each integer from $1$ to $n$ appears exactly once.
## 输入格式

The first line contains one integer $T~(1\le T \le 10^5)$, the number of test cases.

For each test case, the only line contains two integers $n,k~(1 \le k \le n \le 10^9)$.
## 输出格式

For each test case, output $\texttt{Yes}$ (without quotes) if there exists a valid permutation, or $\texttt{No}$ (without quotes) otherwise.

You can output $\texttt{Yes}$ and $\texttt{No}$ in any case (for example, strings $\texttt{YES}$, $\texttt{yEs}$ and $\texttt{yes}$ will be recognized as positive responses).
## 样例

### 样例输入 #1
```
3
3 1
4 2
5 3
```
### 样例输出 #1
```
No
Yes
Yes
```
## 提示

In the first test case, it can be shown that there does not exist any valid permutation.

In the second test case, $[1,2,3,4]$ is one of the valid permutations. Its subsegments of length $2$ are $[1,2],[2,3],[3,4]$. Their values are $3,5,7$, respectively. They share the same parity.

In the third test case, $[1,2,3,5,4]$ is one of the valid permutations. Its subsegments of length $3$ are $[1,2,3],[2,3,5],[3,5,4]$. Their values are $6,10,12$, respectively. They share the same parity.
## 题目翻译

### 题目描述

定义一个序列的 **权值** 等于这个序列所有的元素之和。

试判断：是否存在一个长度为 $n$ 的 **排列**，满足以下约束条件？

- 其所有长度为 $k$ 的 **子区间** 的权值具有相同的奇偶性。

### 输入格式

第一行一个整数 $T$ $(1\leqslant T\leqslant 10^5)$，表示测试数据组数。

对于每组测试数据，仅有一行两个整数 $n,k$ $(1\leqslant k\leqslant n\leqslant 10^9)$，含义见“题目描述”。

### 输出格式

对于每组测试数据，输出一行一个字符串。若存在符合题意的排列，输出 $\texttt{Yes}$；否则，输出 $\texttt{No}$。

你可以以任意的大小写输出 $\texttt{Yes}$ 和 $\texttt{No}$（例如，$\texttt{YES}$，$\texttt{yEs}$ 和 $\texttt{yes}$ 都会被视作合法的输出）。

### 样例解释

对于第一组测试数据，能够证明不存在任何符合题意的排列。

对于第二组测试数据，$[1,2,3,4]$ 是一个符合题意的排列。其所有长度为 $2$ 的子区间分别为 $[1,2],[2,3],[3,4]$，它们的权值分别为 $3,5,7$，具有相同的奇偶性。

对于第三组测试数据，$[1,2,3,5,4]$ 是一个符合题意的排列。其所有长度为 $3$ 的子区间分别为 $[1,2,3],[2,3,5],[3,5,4]$，它们的权值分别为 $6,10,12$，具有相同的奇偶性。


---

---
title: "[ICPC 2022 Jinan R] Best Carry Player"
layout: "post"
diff: 普及/提高-
pid: P9679
tag: ['2022', 'O2优化', 'ICPC', '济南']
---
# [ICPC 2022 Jinan R] Best Carry Player
## 题目描述

Prof. Pang is given $n$ numbers $a_1,\ldots, a_n$. It is easy to add the numbers up using a computer. But Prof. Pang treasures his computer so much and wants to reduce its workload. He decides to simulate the following program by hand. 

![](https://cdn.luogu.com.cn/upload/image_hosting/ajtj92in.png)


Unlike a computer, the time needed for Prof. Pang to simulate the program is proportional to the total number of **carries**(which means “进位” in Chinese) when calculating $s+a[i]$ for each $i$ from $1$ to $n$. Prof. Pang adds numbers **by column addition in base-ten**, just like what we normally do in primary school. For example, there are two carries in the following addition.

![](https://cdn.luogu.com.cn/upload/image_hosting/c779jeox.png)

Please permute the array $a_1,\ldots, a_n$ so that the total number of carries when Prof. Pang simulates the program is as small as possible. (By ''permute an array'', we mean that you can change the order of the elements arbitrarily.)

## 输入格式

The first line contains one integer $T~(1\le T \le 10^5)$, the number of test cases.

For each test case, the first line contains one positive integer $n~(1\le n \le 10^5)$. The next line contains $n$ integers $a_1,\ldots, a_n~(1 \le a_i\le 10^9)$ denoting the numbers Prof. Pang is given. 

It is guaranteed that the sum of $n$ over all test cases is no more than $10^5$.
## 输出格式

For each test case, output one line containing the minimum amount of carries.
## 样例

### 样例输入 #1
```
2
3
9 99 999
1
12345
```
### 样例输出 #1
```
5
0
```
## 题目翻译

### 简要题面

这里我们定义一个电脑运行 $a+b$ 的速度是 $a+b$ 中出现的进位的次数。

给定一个数组 $a_1,a_2,...,a_n$，请找出正确的排序使得计算这个数组的和时运行的速度最短，请找出最少的进位次数。

### 输入格式

**本题有多组数据**。

第一行一个整数 $T$，表示数据组数。

对于每组数据：

第一行一个整数 $n$。  

接下来一行 $n$ 个整数，表示输入的数组 $a$。

### 输出格式

对于每组数据，输出最小的进位次数。

### 数据范围

对于 $100 \%$ 的数据： $1 \leq \sum n \leq 10^5$， $1 \leq a_i \leq 10^9$


---

---
title: "[GDCPC 2023] New Houses"
layout: "post"
diff: 普及/提高-
pid: P9693
tag: ['2023', '广东', 'O2优化', 'XCPC']
---
# [GDCPC 2023] New Houses
## 题目描述

With the construction and development of Guangdong, more and more people choose to come to Guangdong to start a new life. In a recently built community, there will be $n$ people moving into $m$ houses which are arranged in a row. The houses are numbered from $1$ to $m$ (both inclusive). House $u$ and $v$ are neighboring houses, if and only if $|u-v|=1$. We need to assign each person to a house so that no two people will move into the same house. If two people move into a pair of neighboring houses, they will become neighbors of each other.

Some people like to have neighbors while some don't. For the $i$-th person, if he has at least one neighbor, his happiness will be $a_i$; Otherwise if he does not have any neighbor, his happiness will be $b_i$.

As the planner of this community, you need to maximize the total happiness.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:

The first line contains two integers $n$ and $m$ ($1 \le n \le 5 \times 10^5$, $1 \le m \le 10^9$, $n \le m$) indicating the number of people and the number of houses.

For the following $n$ lines, the $i$-th line contains two integers $a_i$ and $b_i$ ($1 \le a_i, b_i \le 10^9$) indicating the happiness of the $i$-th person with and without neighbors.

It's guaranteed that the sum of $n$ of all test cases will not exceed $10^6$.
## 输出格式

For each test case output one line containing one integer indicating the maximum total happiness.
## 样例

### 样例输入 #1
```
3
4 5
1 100
100 1
100 1
100 1
2 2
1 10
1 10
2 3
100 50
1 1000
```
### 样例输出 #1
```
400
2
1050
```
## 提示

For the first sample test case, the optimal strategy is to let person $1$ move into house $1$ and let person $2$ to $4$ move into house $3$ to $5$. Thus, person $1$ have no neighbors while person $2$ to $4$ have neighbors. The answer is $100 + 100 + 100 + 100 = 400$. Of course, we can also let person $2$ to $4$ move into house $1$ to $3$ and let person $1$ move into house $5$. This will also give us $400$ total happiness.

For the second sample test case, as there are only $2$ houses, person $1$ and $2$ have to be neighbors. The answer is $1 + 1 = 2$.

For the third sample test case, the optimal strategy is to let person $1$ move into house $1$ and let person $2$ move into house $3$. Thus, both of them have no neighbors. The answer is $50 + 1000 = 1050$.
## 题目翻译

**【题目描述】**

随着广东的建设与发展，越来越多人选择来到广东开始新生活。在一片新建的小区，有 $n$ 个人要搬进 $m$ 栋排成一行的房子，房子的编号从 $1$ 到 $m$（含两端）。房子 $u$ 和 $v$ 相邻，当且仅当 $|u-v|=1$。我们需要为每一个人安排一栋房子，要求所有人入住的房子互不相同。若两个人住进了一对相邻的房子，则这两个人互为邻居。

有的人喜欢自己有邻居，而有的人不喜欢。对于第 $i$ 个人，如果他有至少一位邻居，则他的满意度为 $a_i$；否则如果他没有邻居，则他的满意度为 $b_i$。

您作为小区的规划者，需要最大化所有人的总满意度。

**【输入格式】**

有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：

第一行输入两个整数 $n$ 和 $m$（$1 \le n \le 5 \times 10^5$，$1 \le m \le 10^9$，$n \le m$），表示人数和房子数。

对于接下来的 $n$ 行，第 $i$ 行输入两个整数 $a_i$ 和 $b_i$（$1 \le a_i, b_i \le 10^9$），表示第 $i$ 个人在有邻居和没有邻居时的满意度。

保证所有数据 $n$ 之和不超过 $10^6$。

**【输出格式】**

每组数据输出一行一个整数表示最大总满意度。

**【样例解释】**

对于第一组样例数据，最优方案是让第 $1$ 个人入住房子 $1$，第 $2$ 到 $4$ 个人入住房子 $3$ 到 $5$。这样，第 $1$ 个人没有邻居，而第 $2$ 到 $4$ 个人都有邻居。答案为 $100 + 100 + 100 + 100 = 400$。当然，也可以让第 $2$ 到 $4$ 个人入住房子 $1$ 到 $3$，第 $1$ 个人入住房子 $5$，也能得到 $400$ 的总满意度。

对于第二组样例数据，由于只有 $2$ 栋房子，因此第 $1$ 和第 $2$ 个人必须成为邻居。答案为 $1 + 1 = 2$。

对于第三组样例数据，最优方案是让第 $1$ 个人入住房子 $1$，第 $2$ 个人入住房子 $3$。这样，两个人都没有邻居。答案为 $50 + 1000 = 1050$。


---

---
title: "[COCI 2022/2023 #2] Ekspert"
layout: "post"
diff: 普及/提高-
pid: P9736
tag: ['2022', 'Special Judge', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2022/2023 #2] Ekspert
## 题目描述

给定四个变量 $\texttt{A}$，$\texttt{B}$，$\texttt{C}$，$\texttt{D}$，初始值为 $x$，$y$，$0$，$1$。

你可以对它们进行如下操作：

选择两个变量，将他们相加的和存储在一个变量中。

请你使用该种操作不超过 $100$ 次，使任意一个变量的值等于 $x\times y$。
## 输入格式

一行，两个整数 $x$，$y$（$1\le x\times y\le10^{18}$），含义如题目所述。
## 输出格式

第一行，数出一个正整数 $n$（$0\le n\le100$），表示操作次数。

接下来 $n$ 行，第 $i$ 行记录第 $i$ 次操作，形如 $\texttt{R1 R2 R3}$，表示将 $\texttt{R1}$ 和 $\texttt{R2}$ 的和存储在 $\texttt{R3}$ 中。
## 样例

### 样例输入 #1
```
1 2
```
### 样例输出 #1
```
1
A A A
A
```
### 样例输入 #2
```
3 2
```
### 样例输出 #2
```
6
D C C
D C C
D C C
D C C
D C C
D C C
C

```
## 提示

| $\text{Subtask}$|分值|特殊性质|
|:-:|:-:|:-:|
|$1$|$14$|$x,y \le 50$ |
|$2$|$14$|$x\times y \le 10^4$|
|$3$|$42$|无|

**本题满分 $70$ 分。**



---

---
title: "[CSP-J 2023] 一元二次方程"
layout: "post"
diff: 普及/提高-
pid: P9750
tag: ['2023', 'O2优化', 'CSP-J 入门级']
---
# [CSP-J 2023] 一元二次方程
## 题目背景

众所周知，对一元二次方程 $ax ^ 2 + bx + c = 0, (a \neq 0)$，可以用以下方式求实数解：

- 计算 $\Delta = b ^ 2 - 4ac$，则:
	1. 若 $\Delta < 0$，则该一元二次方程无实数解。
  	2. 否则 $\Delta \geq 0$，此时该一元二次方程有两个实数解 $x _ {1, 2} = \frac{-b \pm \sqrt \Delta}{2a}$。
 
例如：

- $x ^ 2 + x + 1 = 0$ 无实数解，因为 $\Delta = 1 ^ 2 - 4 \times 1 \times 1 = -3 < 0$。
- $x ^ 2 - 2x + 1 = 0$ 有两相等实数解 $x _ {1, 2} = 1$。
- $x ^ 2 - 3x + 2 = 0$ 有两互异实数解 $x _ 1 = 1, x _ 2 = 2$。

在题面描述中 $a$ 和 $b$ 的最大公因数使用 $\gcd(a, b)$ 表示。例如 $12$ 和 $18$ 的最大公因数是 $6$，即 $\gcd(12, 18) = 6$。
## 题目描述

现在给定一个一元二次方程的系数 $a, b, c$，其中 $a, b, c$ **均为整数且 $a \neq 0$**。你需要判断一元二次方程 $a x ^ 2 + bx + c = 0$ 是否有实数解，并按要求的格式输出。

**在本题中输出有理数 $v$ 时须遵循以下规则：**

- 由有理数的定义，存在唯一的两个整数 $p$ 和 $q$，满足 $q > 0$，$\gcd(p, q) = 1$ 且 $v = \frac pq$。
- 若 $q = 1$，**则输出 `{p}`，否则输出 `{p}/{q}`**，其中 `{n}` 代表整数 $n$ 的值；
- 例如：

	- 当 $v = -0.5$ 时，$p$ 和 $q$ 的值分别为 $-1$ 和 $2$，则应输出 `-1/2`；
   - 当 $v = 0$ 时，$p$ 和 $q$ 的值分别为 $0$ 和 $1$，则应输出 `0`。
   
**对于方程的求解，分两种情况讨论：**

1. 若 $\Delta = b ^ 2 - 4ac < 0$，则表明方程无实数解，此时你应当输出 `NO`；
2. 否则 $\Delta \geq 0$，此时方程有两解（可能相等），记其中较大者为 $x$，则：
	1. 若 $x$ 为有理数，则按有理数的格式输出 $x$。
   2. 否则根据上文公式，$x$ 可以被**唯一**表示为 $x = q _ 1 + q _ 2 \sqrt r$ 的形式，其中：
   
   		- $q _ 1, q _ 2$ 为有理数，且 $q _ 2 > 0$；
      - $r$ 为正整数且 $r > 1$，且不存在正整数 $d > 1$ 使 $d ^ 2 \mid r$（即 $r$ 不应是 $d ^ 2$ 的倍数）；
   
   此时：
   
   1. 若 $q _ 1 \neq 0$，则按有理数的格式输出 $q _ 1$，并再输出一个加号 `+`；
   2. 否则跳过这一步输出；
   
   随后：
   
   1. 若 $q _ 2 = 1$，则输出 `sqrt({r})`；
   2. 否则若 $q _ 2$ 为整数，则输出 `{q2}*sqrt({r})`；
   3. 否则若 $q _ 3 = \frac 1{q _ 2}$ 为整数，则输出 `sqrt({r})/{q3}`；
   4. 否则可以证明存在唯一整数 $c, d$ 满足 $c, d > 1, \gcd(c, d) = 1$ 且 $q _ 2 = \frac cd$，此时输出 `{c}*sqrt({r})/{d}`；
   
   上述表示中 `{n}` 代表整数 `{n}` 的值，详见样例。
   
   如果方程有实数解，则按要求的格式输出两个实数解中的较大者。否则若方程没有实数解，则输出 `NO`。
## 输入格式

输入的第一行包含两个正整数 $T, M$，分别表示方程数和系数的绝对值上限。

接下来 $T$ 行，每行包含三个整数 $a, b, c$。
## 输出格式

输出 $T$ 行，每行包含一个字符串，表示对应询问的答案，格式如题面所述。

**每行输出的字符串中间不应包含任何空格**。
## 样例

### 样例输入 #1
```
9 1000
1 -1 0
-1 -1 -1
1 -2 1
1 5 4
4 4 1
1 0 -432
1 -3 1
2 -4 1
1 7 1
```
### 样例输出 #1
```
1
NO
1
-1
-1/2
12*sqrt(3)
3/2+sqrt(5)/2
1+sqrt(2)/2
-7/2+3*sqrt(5)/2
```
## 提示

**【样例 #2】**

见附件中的 `uqe/uqe2.in` 与 `uqe/uqe2.ans`。

**【数据范围】**

对于所有数据有：$1 \leq T \leq 5000$，$1 \leq M \leq 10 ^ 3$，$|a|,|b|,|c| \leq M$，$a \neq 0$。

| 测试点编号 | $M \leq$ | 特殊性质 A | 特殊性质 B | 特殊性质 C |
| :-: | :-: | :-: | :-:| :-:|
| $1$ | $1$ | 是 | 是 | 是 |
| $2$ | $20$ | 否 | 否 | 否 |
| $3$ | $10 ^ 3$ | 是 | 否 | 是 |
| $4$ | $10 ^ 3$  | 是 | 否 | 否 |
| $5$ | $10 ^ 3$  | 否 | 是 | 是 |
| $6$ | $10 ^ 3$  | 否 | 是 | 否 |
| $7, 8$ | $10 ^ 3$  | 否 | 否 | 是 |
| $9, 10$ | $10 ^ 3$  | 否 | 否 | 否 |

其中：

- 特殊性质 A：保证 $b = 0$；
- 特殊性质 B：保证 $c = 0$；
- 特殊性质 C：如果方程有解，那么方程的两个解都是整数。


---

---
title: "[COCI 2022/2023 #3] Dirigent"
layout: "post"
diff: 普及/提高-
pid: P9757
tag: ['2022', 'COCI（克罗地亚）']
---
# [COCI 2022/2023 #3] Dirigent
## 题目描述

信息学冬令营以一场传统舞蹈结营。一共有 $n$ 名学生参与。他们每个人都有分别有一个 $1\sim n$ 之间的编号。

一开始，指挥者 Kreso 要求学生们围成一个圈，使得每个学生都与另外两个学生拉着手。

Alenka 想知道是否有可能通过将且仅将一对相邻同学分开手，使得这样形成的同学序列按照编号排序。例如，如果他们的顺序是 `3 4 1 2`，那么圈可以从 `4` `1` 两个同学间断开；但是如果顺序是 `2 1 4 3`，那么没有一种合理的方式。

在这一晚，Kreso 准备下达 $q$ 条指令。在每条指令中，他会要求两个学生交换位置。在每一次交换之后你需要帮助 Alenka 回答他的问题。

## 输入格式

第一行包含两个整数 $n,q$，表示学生的数量和交换数。

第二行包含 $n$ 个整数 $a_i$，描述第 $i$ 个位置的学生编号。

在接下来的 $q$ 行中，每行两个整数 $x_i,y_i$，描述 Kreso 的第 $i$ 条指令，即标号 $x_i$ 的学生和标号 $y_i$ 的学生交换位置。
## 输出格式

共 $q$ 行。

在第 $i$ 行输出在第 $i$ 次交换后 Alenka 的问题的答案。

如果答案是肯定的，输出 `DA`，否则输出 `NE`。
## 样例

### 样例输入 #1
```
5 2
2 3 4 5 1
1 3
3 1
```
### 样例输出 #1
```
NE
DA
```
### 样例输入 #2
```
4 2
2 3 1 4
4 2
3 4
```
### 样例输出 #2
```
NE
DA
```
### 样例输入 #3
```
6 5
2 1 5 6 3 4
3 1
3 4
3 2
4 5
5 4
```
### 样例输出 #3
```
NE
NE
DA
NE
DA
```
## 提示

**【样例解释 #2】**

![](https://cdn.luogu.com.cn/upload/image_hosting/382d6t5r.png)

**【数据范围】**

| 子任务 | 分值 | 特殊性质 |
| :----------: | :----------: | :----------: |
| $1$ | $15$ | $n,q \leq 500$ |
| $2$ | $20$ | $n,q \leq 5000$ |
| $3$ | $35$ | 无特殊性质 |

对于 $100\%$ 的数据，满足 $1\leq n,q \leq 3\times10^5,1\le a_i\le n, 1\le x_i,y_i\le n,x_i\neq y_i$。

本题满分 $70$ 分。


---

---
title: "[ROIR 2021] 好数 (Day 2)"
layout: "post"
diff: 普及/提高-
pid: P9766
tag: ['2021', 'ROIR（俄罗斯）']
---
# [ROIR 2021] 好数 (Day 2)
## 题目背景

**译自 [ROIR 2021](http://neerc.ifmo.ru/school/archive/2020-2021.html) Day2 T2  [Числа](http://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-regional-2021-day2.pdf)**。

## 题目描述

定义第一类好数为所有数位上的数字均相同的数。

定义第二类好数为满足如下任意一个条件的数：
- 为第一类好数。
- 设 $t$ 为数的位数，则有 $t-1$ 位数上的数字相同，且无前导零。

现给定一个 $x$，求出 $\ge x$ 的第一个第 $k+1$ 类好数 $y$。
## 输入格式

第一行一个整数 $x$。

第二行一个整数 $k$。
## 输出格式

一行一个整数 $y$。
## 样例

### 样例输入 #1
```
700
0
```
### 样例输出 #1
```
777
```
### 样例输入 #2
```
700
1
```
### 样例输出 #2
```
700
```
## 提示

对于所有子任务 $1\le x\le 10^{17}$，$k\in\{0,1\}$。

| 子任务编号 |        特殊限制         | 分值 |
| :--------: | :---------------------: | :--: |
|    $1$     | $1\le x\le 10^5$，$k=0$ | $15$ |
|    $2$     |          $k=0$          | $20$ |
|    $3$     |    $1\le x\le 10^5$     | $21$ |
|    $4$     |       无特殊限制        | $44$ |


---

---
title: "[ROIR 2021] 染色 (Day 2)"
layout: "post"
diff: 普及/提高-
pid: P9767
tag: ['2021', 'Special Judge', 'ROIR（俄罗斯）']
---
# [ROIR 2021] 染色 (Day 2)
## 题目背景

**译自 [ROIR 2021](http://neerc.ifmo.ru/school/archive/2020-2021.html) Day2 T3  [Хорошие раскраски](http://neerc.ifmo.ru/school/archive/2020-2021/ru-olymp-regional-2021-day2.pdf)**。
## 题目描述

用 $c$ 种颜色对一个 $n\times m$ 的矩阵染色，要求对于任意 $1\le x_1<x_2\le n$，$1\le y_1<y_2\le m$，$(x_1,y_1)$，$(x_2,y_1)$，$(x_1,y_2)$，$(x_2,y_2)$ 所染的颜色不完全相同。

试构造一组方案。

数据保证有解。
## 输入格式

一行三个整数 $n,m,c$。
## 输出格式

输出 $n$ 行，每一行 $m$ 个范围在 $1\sim c$ 的整数，表示染色的颜色种类。
## 样例

### 样例输入 #1
```
2 2 2
```
### 样例输出 #1
```
1 2
2 2
```
## 提示

- 对于 $25\%$ 的数据，$c=2$。
- 对于另外 $75\%$ 的数据，$c=3$。
- 对于 $100\%$ 的数据，$2\le n,m\le 10$，$2\le c\le 3$。

注：附件为本题的 Special Judge，供大家调试。


---

---
title: "[HUSTFC 2023] 简单的加法乘法计算题"
layout: "post"
diff: 普及/提高-
pid: P9769
tag: ['2023', 'O2优化', '高校校赛']
---
# [HUSTFC 2023] 简单的加法乘法计算题
## 题目描述

JokerShaco 有一个数字 $x$，最开始 $x=0$，他想要把 $x$ 变成 $y$。为了达到这个目标，他可以利用两个集合 $A$ 和 $B$。其中集合 $A$ 包含 $n$ 个元素，分别是从 $1$ 到 $n$ 的所有正整数；集合 $B$ 包含 $m$ 个元素。每次它可以对 $x$ 进行如下任意次操作：
- 选择 $A$ 中的一个元素 $a$，令 $x$ 加上 $a$。
- 选择 $B$ 中的一个元素 $b$，令 $x$ 乘以 $b$。

已知 $y$，$n$，$m$ 和 $B$ 中 $m$ 个元素的具体值，JokerShaco 想知道让 $x$ 变成 $y$ 的最少操作次数。
## 输入格式

第一行包含三个整数 $y\ (1\le y\le 5\cdot 10^6)$，$n\ (1\le n\le 5\cdot 10^6)$ 和 $m\ (1\le m\le 10)$，其含义如题目所述。

第二行包含 $m$ 个正整数，其中第 $i$ 个表示 $B$ 中的第 $i$ 个元素 $b_i\ (1\le b_i\le 5\cdot 10^6)$。
## 输出格式

输出一个整数，表示让 $x$ 变成 $y$ 的最少操作次数。在题目条件下可知一定能将 $x$ 变成 $y$。
## 样例

### 样例输入 #1
```
10 3 1
2

```
### 样例输出 #1
```
3

```
### 样例输入 #2
```
100 6 3
2 3 5

```
### 样例输出 #2
```
3

```


---

---
title: "[HUSTFC 2023] 网格染色"
layout: "post"
diff: 普及/提高-
pid: P9772
tag: ['2023', 'O2优化', '高校校赛']
---
# [HUSTFC 2023] 网格染色
## 题目描述

有一个由 $n\times n$ 个小正方形组成的网格图，其中每个小正方形的边长为 $1$，Walk Alone 和 Kelin 在这上面进行一场染色游戏，游戏的规则如下：
- Walk Alone 和 Kelin 轮流进行操作，Walk Alone 先手。
- 当轮到 Walk Alone 操作时，他选择一条尚未被染色的正方形边框并将其染成**红色**。操作结束时，如果这条边框是一个（或两个）正方形最后一条被染色的边框，则自动将该正方形也同样染成**红色**。
- 当轮到 Kelin 操作时，他选择一条尚未被染色的正方形边框并将其染成**蓝色**。操作结束时，如果这条边框是一个（或两个）正方形最后一条被染色的边框，则自动将该正方形也同样染成**蓝色**。
- 当所有的边框都被染色后，游戏结束。此时染成自己所属颜色的正方形数量更多的一方获胜；或者当数量相等时，达成平局。

例如，在 $2\times 2$ 的网格图中，一种可能的游戏过程如下：

![1](https://cdn.luogu.com.cn/upload/image_hosting/zkbfy296.png)

已知网格图的边长 $n$，如果两人都积极进行游戏（按照最优策略，尽可能地让自己获胜，或者在自己无法获胜的前提下尽可能地达成平局），请你推断哪一方会获胜或达成平局。

## 输入格式

一行包含一个整数 $n\ (1\le n\le 10^9$)，表示网格图的边长。
## 输出格式

如果 Walk Alone 获胜，输出 `Walk Alone`；否则如果 Kelin 获胜，输出 `Kelin`；否则平局输出 `Draw`。
## 样例

### 样例输入 #1
```
1

```
### 样例输出 #1
```
Kelin

```


---

---
title: "[HUSTFC 2023] Azur Lane"
layout: "post"
diff: 普及/提高-
pid: P9780
tag: ['2023', 'O2优化', '高校校赛']
---
# [HUSTFC 2023] Azur Lane
## 题目描述

你是港区的一位指挥官，你可以通过培养指挥喵来增强舰队的实力，指挥喵由对应的喵箱培育。喵箱有 $k$ 个等级，等级越高稀有度越高。你每天会获得若干个喵箱（至少一个），然后再使用 ''一键放入'' 将这些喵箱放到喵窝里进行培育。''一键放入'' 会优先放入稀有度更高的喵箱（即按照稀有度从高到低排序后依次放入），放入的喵箱会排在已放入喵箱的后面，在**每天结束时**系统会自动扣除与喵窝中喵箱数量相等的钱。最开始时你的喵窝里没有喵箱。

因为你非常懒，所以你会等 $n$ 天后才把喵箱一起打开。在你 $n$ 天后进入喵窝时，你看到了 $m$ 个喵箱，用一个长度为 $m$ 的序列 $a$ 表示喵窝里按放入先后顺序排列的喵箱的等级。但是你已经忘了这 $n$ 天里你每天获得了多少喵箱了，你甚至忘了 $n$ 的值是多少，显然这有许多情况。你想知道，对于满足 $1 \leq n \leq m$ 的所有整数 $n$，在所有情况中，这 $n$ 天总共扣除的钱数至少为多少？
## 输入格式

第一行包含两个整数 $m\ (1 \leq m \leq 10^6)$，$k\ (1 \leq k \leq 10^6)$，分别表示喵窝中喵箱的数量和喵箱的最高等级。

第二行包含 $m$ 个整数 $a_{1}, a_{2}, \ldots, a_{m}\ (1 \leq a_i \leq k)$，表示喵窝中排列着的喵箱的等级。


## 输出格式

输出一行用空格间隔的 $m$ 个整数，其中第 $i$ 个整数表示当 $n=i$ 时在所有可能的情况下至少会扣除的钱数。如果没有合法的情况，请输出 $-1$。


## 样例

### 样例输入 #1
```
3 3
2 3 1

```
### 样例输出 #1
```
-1 4 6 
```
### 样例输入 #2
```
8 4
3 2 4 2 1 2 3 2

```
### 样例输出 #2
```
-1 -1 -1 21 22 25 29 36 
```
## 提示

样例一解释：

当 $n=1$ 时，无法在一天内获得这 $3$ 个喵箱（第二个喵箱的等级大于第一个喵箱的等级，不符合 ``一键放入'' 从高到低放入的原则），因此输出 $-1$。

当 $n=2$ 时，第一天获得第一个喵箱，此时喵窝内有 $1$ 个喵箱，当天花费为 $1$；第二天获得后两个喵箱，此时喵窝内有 $3$ 个喵箱，当天花费为 $3$。因此总钱数为 $4$。

当 $n=3$ 时，每天依次获得一个喵箱，总钱数为 $1+2+3=6$。


---

---
title: "[ROIR 2020] 超速 (Day1)"
layout: "post"
diff: 普及/提高-
pid: P9784
tag: ['2020', 'ROIR（俄罗斯）']
---
# [ROIR 2020] 超速 (Day1)
## 题目描述

**译自 [ROIR 2020](http://neerc.ifmo.ru/school/archive/2019-2020.html) Day1 T2.** ***[Превышение скорости](http://neerc.ifmo.ru/school/archive/2019-2020/ru-olymp-regional-2020-day1.pdf)*** ，译者 ShineEternal

超速行驶是一种危险的犯法行为，大大增加了交通事故导致悲惨后果的可能性。不幸的是使用使用雷达和相机控制速度并不能完全解决问题。为了防止这种行为的出现，根据汽车在一段道路上的行驶时间来罚款，可以对超速行为进行限制。

现在有 $n$ 段从 $1\sim n$ 编号的公路。第 $i$ 段公路长 $l_i$ 米，其限速为 $v_i$ 米每秒。超速就要罚款，但是为了体现按劳分配，还要对不同程度的超速设置不同的罚款金额。

具体来说，如果不超速则不收罚款；否则，用 $e$ 表示汽车在这段公路上的**最大速度减去限速**的值：

- 如果 $0<e\leq a_1$，则惩罚为 $f_1$ 个货币单位。

- 如果 $a_1<e\leq a_2$，则惩罚为 $f_2$ 个货币单位。

- ...

- 如果 $a_{m-2}<e\leq a_{m-1}$，则惩罚为 $f_{m-1}$ 个货币单位。

- 如果 $a_{m-1}<e$，则惩罚为 $f_m$ 个货币单位。

目前，有 $q$ 辆车要经过这 $n$ 段道路，每辆车在 $s_i$ 时间到达 $1$ 号路段，在 $t_i$ 时间离开 $n$ 号路段。

你需要计算每辆车在**所有路段中最高**被罚款的金额**至少**是多少。

时间从道路开放起计算，即从 $0$ 开始计算。
## 输入格式

第一行一个正整数 $n$，表示道路段数。

接下来的两行，每行 $n$ 个数，第一行为 $v_i$，第二行为 $l_i$。

第四行为一个正整数 $m$，表示罚款的 $m$ 种不同范围。

接下来的两行，第一行 $m-1$ 个数，为 $a_i$；第二行 $m$ 个数，为 $f_i$。

第七行为一个正整数 $q$，表示共有 $q$ 辆车。

接下来的 $q$ 行，每行两个整数 $s_i,t_i$。
## 输出格式

输出共 $q$ 行。

对于每辆车，输出它最少被罚款的金额。
## 样例

### 样例输入 #1
```
3
10 20 30
400 500 600
6
1 5 10 12 16
100 300 600 800 1000 1500
3
10 100
20 70
45 100
```
### 样例输出 #1
```
0
800
600
```
## 提示

对于 $100\%$ 的数据，$1\leq n\leq 10$，$1\leq v_i,l_i,a_i,f_i\leq 10^9$，$1\leq m\leq 10^5$，$1\le q\le 10^5$，$1\leq s_i<t_i\leq 10^9$。

|任务编号|特殊限制|分值|
|:-:|:-:|:-:|
|$1$|$n=1,m=1$|$5$|
|$2$|$m=1$|$10$|
|$3$|$n=1,m\leq 10$|$9$|
|$4$|$n=1$|$12$|
|$5$|$m\leq 10,a_i\leq 10$|$13$|
|$6$|$m\leq 10$|$14$|
|$7$|无特殊限制|$37$|


---

---
title: "[NERC 2018] Lazyland"
layout: "post"
diff: 普及/提高-
pid: P9802
tag: ['2018', 'ICPC']
---
# [NERC 2018] Lazyland
## 题目背景

翻译自 [NERC 2018](https://neerc.ifmo.ru/archive/2018/neerc-2018-statement.pdf) L 题。
## 题目描述

一个城市里有 $n$ 个人，和 $k$ 种职业，其中，每个人都有一个现在正在从事的职业 $a_i$，但是很遗憾，由于某些职业的空缺，使得这个城市根本无法继续正常生存下去。

你作为一城之主，自然不希望看到自己的城市这样子下去，你决定说服其中的某些人，使得每种职业都有人在做，对于每个人 $i$，你需要耗费 $b_i$ 的时间去说服。

你需要求出你去说服的时间的最小值。
## 输入格式

第一行两个整数 $n$ 和 $k (1 \leq k \leq n \leq 10^5)$，分别表示 $n$ 个人和 $k$ 种职业。

第二行 $n$ 个整数 $a_i (1 \leq a_i \leq k)$，表示第 $i$ 个人正在从事的职业 。

第三行 $n$ 个整数 $b_i (1 \leq b_i \leq 10^9)$，表示第 $i$ 个人被说服去做别的职业的时间。
## 输出格式

输出去说服市民的最小时间。
## 样例

### 样例输入 #1
```
8 7
1 1 3 1 5 3 7 1
5 7 4 8 1 3 5 2
```
### 样例输出 #1
```
10
```
### 样例输入 #2
```
3 3
3 1 2
5 3 4
```
### 样例输出 #2
```
0
```
## 提示

对于所有的数据，保证 $1 \leq k \leq n \leq 10^5$，$1 \leq a_i \leq k$，$1 \leq b_i \leq 10^9$。

对于样例一，分别令 $1$，$6$，$8$ 号市民去从事 $2$，$4$，$6$ 号职业。


---

---
title: "[POI 2022 ~2023R1] ply"
layout: "post"
diff: 普及/提高-
pid: P9805
tag: ['POI（波兰）', '2022', '2023']
---
# [POI 2022 ~2023R1] ply
## 题目背景

题目译自 [POI2022~2023R1 ply](https://sio2.mimuw.edu.pl/c/oi30-1/p/ply/)。
## 题目描述

定义“合法括号串”及其深度如下：

- 空串是一个合法括号串，深度为 $0$。
- 如果 $w$ 是一个合法括号串，深度为 $h$，则 $(w)$ 也是一个合法括号串，深度为 $h+1$。
- 如果 $w_1$ 和 $w_2$ 都是合法括号串，深度分别为 $h_1$ 和 $h_2$，则 $w_1w_2$ 也是一个合法括号串，深度为 $\max(h_1,h_2)$。

定义翻转一个字符为：

- 如果当前字符为 `(`，修改为 `)`。
- 如果当前字符为 `)`，修改为 `(`。

你需要通过翻转 $s$ 当中某些字符使得深度不超过 $H$，求最小操作次数。
## 输入格式

第一行两个数字 $n \ (2 \leq n \leq 10^6)$ 和 $H \ (1 \leq H \leq \frac{n}{2})$，分别表示 $|s|$ 和要求修改后不超过的深度。

第二行一个字符串 $s$，表示原来的括号串。
## 输出格式

输出最小修改次数。
## 样例

### 样例输入 #1
```
8 2
(()(()))
```
### 样例输出 #1
```
2
```
## 提示

对于样例，可以修改为 `(()()())`，这样深度为 $2$。

子任务分配如下：

| 子任务编号 | 特殊性质 | 分值 |
| :-----------: | :-----------: | :-----------: |
| $1$ | $n \leq 20$ | $20$ |
| $2$ | $n \leq 3000$ | $40$ |
| $3$ | $n \leq 10^6$ 且 $H = h-1$ | $20$ |
| $4$ | $n \leq 10^6$ | $20$ |

注：$h$ 为输入的括号串的深度。

本题中，子任务 $0$ 为样例。


---

---
title: "[POI 2022 ~2023R1] poc"
layout: "post"
diff: 普及/提高-
pid: P9806
tag: ['POI（波兰）', '2022', '2023']
---
# [POI 2022 ~2023R1] poc
## 题目背景

题目译自 [POI2022~2023R1 poc](https://sio2.mimuw.edu.pl/c/oi30-1/p/poc/)。

## 题目描述

小 A 和小 B 在记录过往的车辆的类型！

已知类型分别有 $1 \sim k$ 个，每种车辆必然属于其中之一。

小 A 按顺序细心地记录了所有的车辆的类型，但是贪玩的小 B 只按顺序记录了一部分车辆。

小 A 记录的内容长度为 $n$，小 B 记录的长度为 $m$。

称在小 A 记录中的第 $i$ 辆车“可能被 B 记录到”当且仅当在小 A 的记录中存在一个包含 $i$ 的子序列与小 B 所记录的完全相同。

保证小 B 记录的序列一定是小 A 记录的子序列，问哪些车辆是可能会被小 B 记录到，哪些没有。
## 输入格式

第一行三个整数 $n,m,k \ (1 \leq n,m,k \leq 3 \times 10^5)$。

第二行一个长度为 $n$ 的序列，表示小 A 记录的序列。

第三行一个长度为 $m$ 的序列，表示小 B 记录的序列。

上述序列中的元素均满足 $1\leq$ 序列元素 $\leq k$。
## 输出格式

对于每个小 A 记录到的车辆，请确定它能否被记录到，能输出 $1$，不能输出 $0$。
## 样例

### 样例输入 #1
```
9 4 3
1 3 2 1 2 3 1 3 2
1 3 1 2

```
### 样例输出 #1
```
1 1 0 1 1 1 1 0 1
```
## 提示

对于样例，存在如下的子序列：

$(1,2,4,5)$，$(1,2,4,9)$，$(1,2,7,9)$，$(1,6,7,9)$，$(4,6,7,9)$。

注意到 $3$ 和 $8$ 一直都没被取到，故不能被小 B 记录到。

子任务分配如下：

| 子任务编号 | 特殊性质 | 分值 |
| :-----------: | :-----------: | :-----------: |
| $1$ | $n,m \leq 100$ | $15$ |
| $2$ | $n,m \leq 2000$ | $20$ |
| $3$ | 每种类型的车辆最多被小 A 记录一次 | $15$ |
| $4$ | 无附加限制 | $50$ |

时间限制：Subtask1 1s，Subtask2 10s，Subtask3 和 Subtask4 6s。


---

---
title: "[CCC 2015 S3] Gates"
layout: "post"
diff: 普及/提高-
pid: P9812
tag: ['2015', 'CCC（加拿大）']
---
# [CCC 2015 S3] Gates
## 题目描述

机场有 $n$ 个登机口，你需要按顺序安排 $m$ 架飞机，第 $i$ 架飞机只能使用 $1 \sim g_{i}$ 号登机口，一个登机口永久只能被一架飞机使用。**当没有登机口可以供某架飞机使用时机场便会关闭，之后的飞机都不能登机。**

请确定一种方案，使得有登机口的飞机数量最多。
## 输入格式

第一行一个整数 $n$。

第二行一个整数 $m$。

接下来 $m$ 行，每行一个整数 $g_{i}$。
## 输出格式

一行一个整数，表示最多能安排的飞机数量。
## 样例

### 样例输入 #1
```
4
3
4
1
1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
4
6
2
2
3
3
4
4
```
### 样例输出 #2
```
3
```
## 提示

**【数据范围】：**

对于 $40\%$ 的数据，$1 \leq n,m \leq 2 \times 10^{3}$。

对于 $100\%$ 的数据，$1 \leq n,m \leq 10^{5}$，$1 \leq g_{i} \leq n$。

本题中 Subtask 0 为原题数据，Subtask 1 为 Hack 数据，Hack 数据不计分。


---

---
title: "wbyblD"
layout: "post"
diff: 普及/提高-
pid: P9815
tag: ['O2优化']
---
# wbyblD
## 题目背景

> D题，我不要被hack！！！
## 题目描述

有 $n+2$ 个点排成一排，编号为 $0\sim n+1$。对于第 $i$ 号点有两个整数 $a_i,b_i$，其中 $0\le i\le n+1$。规定初始时 $a_0=b_0=a_{n+1}=b_{n+1}=0$。

设你当前在第 $x$ 号点，当前的移动方向为 $y$，初始时 $x=0,y=1$。

你将按如下方式移动直到 $x,y$ 某一次变化后满足 $x=0,y=-1$ 或 $x=n+1,y=1$。

- 若 $y=1$，首先将 $x$ 增加 $1$，此时若 $a_x>0$ 则将 $y$ 变成 $-1$，否则 $y$ 不变，最后再将 $a_x$ 减少 $1$。
- 若 $y=-1$，首先将 $x$ 减少 $1$，此时若 $b_x>0$ 则将 $y$ 变成 $1$，否则 $y$ 不变，最后再将 $b_x$ 减少 $1$。

问最后结束时 $x$ 会在第几号点，事实上，最后 $x$ 仅可能在第 $0$ 号点或第 $n+1$ 号点。
## 输入格式

本题有多组测试数据。第一行输入一个正整数 $T$，表示测试数据组数，接下来分别输入 $T$ 组数据。

对于每组测试数据，第一行输入一个正整数 $n$。

接下来 $n$ 行每行输入两个非负整数 $a_i,b_i$，表示 $a_i,b_i$ 的初始值。
## 输出格式

对于每组测试数据输出一行一个整数表示最后结束时 $x$ 会在第几号点。
## 样例

### 样例输入 #1
```
3
1
1 1
3
0 1
1 1
1 0
3
0 1
2 3
4 5
```
### 样例输出 #1
```
0
4
0
```
## 提示

#### 样例解释

对于样例第 $1$ 组数据，$(x,y)$ 依次为 $(0,1)\to (1,1)\to (1,-1)\to (0,-1)$。

对于样例第 $2$ 组数据，$(x,y)$ 依次为 $(0,1)\to (1,1)\to (2,1)\to (2,-1)\to (1,-1)\to (1,1)\to (2,1)\to (3,1)\to (3,-1)\to (2,-1)\to (2,1)\to (3,1)\to (4,1)$。

对于样例第 $3$ 组数据，$(x,y)$ 依次为 $(0,1)\to (1,1)\to (2,1)\to (2,-1)\to (1,-1)\to (1,1)\to (2,1)\to (2,-1)\to (1,-1)\to (0,-1)$。

#### 数据范围与约定

对于前 $30\%$ 的测试点，保证 $n,a_i,b_i\le 10$。

对于前 $60\%$ 的测试点，保证 $\sum n\le 5000$。

对于另外 $20\%$ 的测试点，保证 $T=10$，$n=10^5$，$a_i,b_i$ 在指定范围内均匀随机生成。特别的，保证除该档部分分外所有测试点满足 $T\ne 10$。

对于所有测试点，保证 $1\le T\le 10^4$，$1\le n\le 10^5$，$1\le \sum n\le 10^6$，$0\le a_i,b_i\le 10^6$。


---

---
title: "[ICPC 2020 Shanghai R] Gitignore"
layout: "post"
diff: 普及/提高-
pid: P9831
tag: ['2020', '上海', 'O2优化', 'ICPC']
---
# [ICPC 2020 Shanghai R] Gitignore
## 题目描述

Your git project (you don't need to be familiar with git to solve this problem) has some files that should be ignored from synchronizing. You need to calculate the minimum number of lines needed for gitignore.

Formally, your project is a folder. A folder can have files and sub folders. There are no empty folders (i.e. folders without any files or sub folders inside). Initially, the git software will synchronize all the files in your project. However, you can specify some files and folders in the settings (which is called gitignore) to exclude them from synchronizing. For each line in gitignore, you can specify either a file or all the files in a folder. You can $\textbf{not}$  ignore the whole project folder (i.e. an empty line in gitignore).

You are given paths for all the files in the project and whether they should be ignored or shouldn't. Your task is to calculate the minimum number of lines for gitignore.
## 输入格式

The input contains several test cases. The first line contains a single positive integer $T$ which is the number of test cases. For each test case, you are first given two non-negative numbers $n$ and $m$. And then $n$ non-empty lines of file paths that should be $\textbf{ignored}$, and $m$ non-empty lines of file paths that should $\textbf{not}$ be ignored.

The paths are strings containing lower-cased English alphabets and slashes (`/`) only. Slashes are used to separate folders, sub folders and file name. For exapmle, ``a/b/c/d`` indicates folder ``a`` in the project folder, folder ``b`` in folder ``a``, folder ``c`` in ``b`` and file ``d`` in folder ``c``. All the paths are valid, specifically:

- The path is non-empty and it always indicates a file (i.e. the path does not end with a slash).
- The path does not start with a slash.
- Folder names and file names are non-empty (i.e. there are no consecutive slashes).
- File paths are always unique (i.e. all the paths in a test case are different).
- In a folder, no sub folders and files share the same names. For example, there won't be two files ``a/b/a`` and ``a/b/a/d`` in one test case. However, files ``a/b/a`` and ``a/b/b`` are allowed.

$1\leq n+m\leq 100$ holds and in the whole input there are no more than $1,000$ characters in file paths (i.e. the sum of lengths of file path strings in the whole input file is no more than $1,000$).
## 输出格式

$T$ lines of non-negative integers, the minimum number of gitignore lines for each test case.
## 样例

### 样例输入 #1
```
2
3 0
data/train
data/test
model
3 1
data/train
data/test
model
data/sample
```
### 样例输出 #1
```
2
3
```
## 提示

In the first sample test case, the corresponding gitignore file contains $2$ lines: a folder line ``data/`` and a file name ``model``.

In the second sample test case, the corresponding gitignore file contains $3$ file lines: ``data/train``, ``data/test`` and ``model``.
## 题目翻译

你使用 git 管理的一个项目有一些需要被忽略的文件。你需要计算 .gitignore 文件中至少写入多少行。

详细来说，你的项目是一个文件夹，文件夹可以含有文件或子文件夹。在本题中，不会出现空文件夹（不含文件或子文件夹的文件夹）。git 软件会同步你项目中所有的文件，但是，你可以在 .gitignore 中写入一些信息，使某些文件或文件夹不被同步。在 .gitignore 文件中的一行，你可以指定一个文件或者一个文件夹，使得这个文件或这个文件夹中的所有文件不被同步。**你不可以忽略整个项目文件夹。**

你会得到项目中所有文件的路径，以及他们是否应该被同步，你的任务是计算 .gitignore 文件中最少的行数。


---

---
title: "[ICPC 2021 Nanjing R] Klee in Solitary Confinement"
layout: "post"
diff: 普及/提高-
pid: P9842
tag: ['2021', 'Special Judge', 'O2优化', 'ICPC', '南京']
---
# [ICPC 2021 Nanjing R] Klee in Solitary Confinement
## 题目描述

Since the traveler comes, People in Monstadt suddenly raise great interest in computer programming and algorithms, including Klee, the Spark Knight of the Knights of Favonius.

![](https://cdn.luogu.com.cn/upload/image_hosting/xcnn0v4q.png)

Being sent to solitary confinement by Jean again, Klee decides to spend time learning the famous Mo's algorithm, which can compute with a time complexity of $\mathcal{O}(n^{1.5})$ for some range query problem without modifications.

To check whether Klee has truly mastered the algorithm (or in fact making another bombs secretly), Jean gives her a problem of an integer sequence $a_1, a_2, \cdots, a_n$ along with some queries $[l_i, r_i]$ requiring her to find the mode number in the contiguous subsequence $a_{l_i}, a_{l_i + 1}, \cdots, a_{r_i}$. The mode number is the most common number (that is to say, the number which appears the maximum number of times) in the subsequence.

With the help of Mo's algorithm, Klee solves that problem without effort, but another problem comes into her mind. Given an integer sequence $a_1, a_2, \cdots, a_n$ of length $n$ and an integer $k$, you can perform the following operation at most once: Choose two integers $l$ and $r$ such that $1 \le l \le r \le n$ and add $k$ to every $a_i$ where $l \le i \le r$. Note that it is OK not to perform this operation. Compute the maximum occurrence of the mode number of the whole sequence if you choose to perform (or not perform) the operation optimally.
## 输入格式

There is only one test case in each test file.

The first line of the input contains two integers $n$ and $k$ ($1 \le n \le 10^6$, $-10^6 \le k \le 10^6$) indicating the length of the sequence and the additive number.

The second line of the input contains $n$ integers $a_1, a_2, \cdots, a_n$ ($-10^6 \le a_i \le 10^6$) indicating the original sequence.
## 输出格式

Output one line containing one integer indicating the maximum occurrence of the mode number of the whole sequence after performing (or not performing) the operation.
## 样例

### 样例输入 #1
```
5 2
2 2 4 4 4

```
### 样例输出 #1
```
5

```
### 样例输入 #2
```
7 1
3 2 3 2 2 2 3

```
### 样例输出 #2
```
6

```
### 样例输入 #3
```
7 1
2 3 2 3 2 3 3

```
### 样例输出 #3
```
5

```
### 样例输入 #4
```
9 -100
-1 -2 1 2 -1 -2 1 -2 1

```
### 样例输出 #4
```
3

```
## 提示

For the first sample test case, choose $l = 1$ and $r = 2$ and we'll result in the sequence $\{4, 4, 4, 4, 4\}$. The mode number is obviously $4$ which appears $5$ times.

For the second sample test case, choose $l = 4$ and $r = 6$ and we'll result in the sequence $\{3, 2, 3, 3, 3, 3, 3\}$. The mode number is $3$ which appears $6$ times.

For the fourth sample test case, choose not to perform the operation. The mode number is $1$ and $-2$ which both appear $3$ times.
## 题目翻译

给定 $n,k$ 和一个长为 $n$ 的序列，你可以选择对区间 $[l, r]$ 的数整体加上 $k$，也可以不加。最大化众数出现次数并输出。


---

---
title: "[ICPC 2021 Nanjing R] Windblume Festival"
layout: "post"
diff: 普及/提高-
pid: P9852
tag: ['2021', 'Special Judge', 'O2优化', 'ICPC', '南京']
---
# [ICPC 2021 Nanjing R] Windblume Festival
## 题目描述

The Windblume Festival in Mondstadt is coming! People are preparing windblumes for Barbatos and for those they love and adore. The Windblume Festival is also an opportunity to improve the relationships people have.

![](https://cdn.luogu.com.cn/upload/image_hosting/nbhhi3bg.png)

During the festival, a famous game will be played every year, invented by Jean, the Acting Grand Master of the Knights of Favonius. In the game, $n$ players numbered from $1$ to $n$ stand in a circle, each holding an integer with them. Each turn, one player will be removed. The game will end when there is only one player left.

For each turn, let $k$ be the number of players remaining and $a_i$ be the integer player $i$ holds. Two adjacent players, $x$ and $(x \bmod k + 1)$ are selected and player $(x \bmod k + 1)$ is removed from the game. Player $x$'s integer will then change from $a_x$ to $(a_x - a_{x \bmod k + 1})$. Player $y$ in this turn will become player $(y - 1)$ in the next turn for all $x < y \le k$, though the integer they hold will not change.

Jean wants to know the maximum possible integer held by the last remaining player in the game by selecting the players in each round optimally.
## 输入格式

There are multiple test cases. The first line of the input contains one integer $T$ indicating the number of test cases. For each test case:

The first line contains one integer $n$ ($1 \le n \le 10^6$) indicating the initial number of players.

The next line contains $n$ integers $a_i$ ($-10^9 \le a_i \le 10^9$) where $a_i$ is the integer held by player $i$ at the beginning.

It is guaranteed that the sum of $n$ of all test cases will not exceed $10^6$.
## 输出格式

For each test case output one line containing one integer indicating the maximum possible integer.
## 样例

### 样例输入 #1
```
5
4
1 -3 2 -4
11
91 66 73 71 32 83 72 79 84 33 93
12
91 66 73 71 32 83 72 79 84 33 33 93
13
91 66 73 71 32 83 72 79 84 33 33 33 93
1
0

```
### 样例输出 #1
```
10
713
746
779
0

```
## 提示

For the first sample test case follow the strategy shown below, where the underlined integers are the integers held by the players selected in each turn.

$\{\underline{1}, -3, 2, \underline{-4}\}$ (select $x = 4$) $\to$ $\{-3, \underline{2, -5}\}$ (select $x = 2$) $\to$ $\{\underline{-3, 7}\}$ (select $x = 2$) $\to$ $\{10\}$.
## 题目翻译

给一个长度为 $n$ 环形整数序列 $a$, 每次操作可以任意选择一个下标 $x$，令 $ a_x = a_x - a_{(x\bmod n)+1}$，之后移除 $a_{(x\bmod n)+1}$。
  
最后会剩下一个元素，要求最大化这个元素。

数据范围 $1\le n\le10^6,-10^9\le a_i\le 10^9$。


---

---
title: "[CCC 2008 S4] Twenty-four"
layout: "post"
diff: 普及/提高-
pid: P9861
tag: ['2008', 'CCC（加拿大）']
---
# [CCC 2008 S4] Twenty-four
## 题目描述

Twenty-four is a popular card game designed to be played by four players. Each player is dealt a deck of cards, which are kept face down. On every turn, each of the four players turns over the top card of his or her deck, so that it is visible to all. The goal is to find an arithmetic expression using the values of the cards (with $A$ meaning $1$, $J$ meaning $11$, $Q$ meaning $12$, and K meaning $13$) that evaluates to the number $24$. For example, for the example in the illustration, one possible expression would be:

$((A \times K) - J) \times Q$

$((1 \times 13) - 11) \times 12$

The first player to find such an expression wins the turn, and adds all four cards to the bottom of his or her deck.

Each valid arithmetic expression must use all four cards, and must combine their values using addition, subtraction, multiplication, or division. Parentheses are allowed to specify precedence of operations. Juxtaposing cards to make multiple-digit decimal numbers is not allowed (e.g. you cannot place the cards $2$ and $4$ beside each other to make $24$). Non-integer quotients of division are also not allowed, even as a partial result (of a subexpression of the overall expression).

In some cases, the players may take a very long time to find an expression evaluating to $24$. In fact, in some cases, no such expression exists. Your task is to determine, given four cards, an expression that evaluates to the largest number less than or equal to $24$.
## 输入格式

The first line contains an integer $1 \leq N \leq 5$ indicating the number of card hands that follow. Each hand consists of four lines. Each of these lines is an integer $1 \leq C \leq 13$ indicating the value of a card.
## 输出格式

For each hand, output a line containing an integer n if the cards can be combined using arithmetic operators to evaluate to $n$. The value $n$ should be the largest possible value amongst all possible arithmetic expressions using these $4$ cards, so long as $n \leq 24$.
## 样例

### 样例输入 #1
```
3
3
3
3
3
1
1
1
1
12
5
13
1
```
### 样例输出 #1
```
24
4
21
```
## 题目翻译

有一个算 $24$ 点的游戏，每局游戏都会给你 $4$ 个整数$(1 \leq$ 每个数 $\leq 13$，表示你所需要用其来凑出 $24$ 点。你可以将其中的两个数通过加减乘除的运算，得到一个新数，一直重复如此的操作，直到你剩下一个整数，那便是你游戏的答案。

现在，你需要根据给出的那 $4$ 个整数，来计算出一个整数 $n$，使其最接近 $24$，同时也不能超出 $24$，问 $n$ 是多少。

你一共玩了 $N(1 \leq N \leq 5)$ 局这样的游戏，请你求出每局游戏对应的 $n$。


---

---
title: "[ICPC 2018 Qingdao R] Flippy Sequence"
layout: "post"
diff: 普及/提高-
pid: P9887
tag: ['2018', 'O2优化', 'ICPC', '青岛']
---
# [ICPC 2018 Qingdao R] Flippy Sequence
## 题目描述

DreamGrid has just found two binary sequences $s_1, s_2, \dots, s_n$ and $t_1, t_2, \dots, t_n$ ($s_i, t_i \in \{0, 1\}$ for all $1 \le i \le n$) from his virtual machine! He would like to perform the operation described below exactly twice, so that $s_i = t_i$ holds for all $1 \le i \le n$ after the two operations.

The operation is: Select two integers $l$ and $r$ ($1 \le l \le r \le n$), change $s_i$ to $(1 - s_i)$ for all $l \le i \le r$.

DreamGrid would like to know the number of ways to do so.

We use the following rules to determine whether two ways are different:

- Let $A = (a_1, a_2, a_3, a_4)$, where $1 \le a_1 \le a_2 \le n, 1 \le a_3 \le a_4 \le n$, be a valid operation pair denoting that DreamGrid selects integers $a_1$ and $a_2$ for the first operation and integers $a_3$ and $a_4$ for the second operation;
- Let $B = (b_1, b_2, b_3, b_4)$, where $1 \le b_1 \le b_2 \le n, 1 \le b_3 \le b_4 \le n$, be another valid operation pair denoting that DreamGrid selects integers $b_1$ and $b_2$ for the first operation and integers $b_3$ and $b_4$ for the second operation.
- $A$ and $B$ are considered different, if there exists an integer $k$ ($1 \le k \le 4$) such that $a_k \ne b_k$.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:

The first line contains an integer $n$ ($1 \le n \le 10^6$), indicating the length of two binary sequences.

The second line contains a string $s_1s_2\dots s_n$ ($s_i \in \{\text{`0'}, \text{`1'}\}$) of length $n$, indicating the first binary sequence.

The third line contains a string $t_1t_2\dots t_n$ ($t_i \in \{\text{`0'}, \text{`1'}\}$) of length $n$, indicating the second binary sequence.

It's guaranteed that the sum of $n$ in all test cases will not exceed $10^7$.
## 输出格式

For each test case, output an integer denoting the answer.
## 样例

### 样例输入 #1
```
3
1
1
0
2
00
11
5
01010
00111
```
### 样例输出 #1
```
0
2
6
```
## 提示

For the second sample test case, there are two valid operation pairs: $(1, 1, 2, 2)$ and $(2, 2, 1, 1)$.

For the third sample test case, there are six valid operation pairs: $(2, 3, 5, 5)$, $(5, 5, 2, 3)$, $(2, 5, 4, 4)$, $(4, 4, 2, 5)$, $(2, 4, 4, 5)$ and $(4, 5, 2, 4)$.
## 题目翻译

给定两个长度为 $n$ 的 **01** 字符串 $s,\,t$。你需要求出有多少个 $1 \le l_1 \le r_1 \le n,\, 1 \le l_2 \le r_2 \le n$，使得分别**取反** $s$ 串的区间 $[l_1,\,r_1]$ 和区间 $[l_2,\,r_2]$ 内的字符串后，$s$ 和 $t$ 相等。取反的定义是对于 01 字符串 $a$，若 $a_i = 0$ 则令 $a_i \leftarrow 1$，否则令 $a_i \leftarrow 0$。

$1\leq n\leq 10 ^ 6$，$\sum n\leq 10 ^ 7$。


---

---
title: "[ICPC 2018 Qingdao R] Books"
layout: "post"
diff: 普及/提高-
pid: P9894
tag: ['2018', 'O2优化', 'ICPC', '青岛']
---
# [ICPC 2018 Qingdao R] Books
## 题目描述

DreamGrid went to the bookshop yesterday. There are $n$ books in the bookshop in total. Because DreamGrid is very rich, he bought the books according to the strategy below:

- Check the $n$ books from the 1st one to the $n$-th one **in order**.
- For each book being checked now, if DreamGrid has enough money (not less than the book price), he'll buy the book and his money will be reduced by the price of the book.
- In case that his money is less than the price of the book being checked now, he will skip that book.


BaoBao is curious about how rich DreamGrid is. You are asked to tell him the maximum possible amount of money DreamGrid took before buying the books, which is a non-negative integer. All he knows are the prices of the $n$ books and the number of books DreamGrid bought in total,  indicated  by $m$. 

## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:

The first line contains two integers $n$ and $m$ ($1 \le n \le 10^5$, $0 \le m \le n$), indicating the number of books in the bookshop and the number of books DreamGrid bought in total.

The second line contains $n$ non-negative integers $a_1, a_2, ... , a_n$ ($0 \le a_i \le 10^9$), where $a_i$ indicates the price of the $i$-th book checked by DreamGrid.

It's guaranteed that the sum of $n$ in all test cases will not exceed $10^6$.
## 输出格式

For each test case output one line.

If it's impossible to buy $m$ books for any initial number of money, output ``Impossible'' (without quotes).

If DreamGrid may take an infinite amount of money, output ``Richman'' (without quotes).

In other cases, output a non-negative integer, indicating the maximum number of money he may take.

## 样例

### 样例输入 #1
```
4
4 2
1 2 4 8
4 0
100 99 98 97
2 2
10000 10000
5 3
0 0 0 0 1
```
### 样例输出 #1
```
6
96
Richman
Impossible
```
## 题目翻译

共有 $n$ 本书，第 $i$ 本书的价格为 $a_i$。买书的策略为：按编号顺序从小到大遍历每本书，若书的价格不超过剩余钱数，则购买，否则跳过。

问初始最多有多少钱能恰好买 $m$ 本书。若初始可以有无穷多的钱，则输出 `Richman`。若不能恰好买 $m$ 本数，则输出 `Impossible`。

多组测试数据。

$1\leq n\leq 10 ^ 5$，$0\leq m\leq n$，$0\leq a_i\leq 10 ^ 9$，$\sum n\leq 10 ^ 6$。


---

---
title: "[COCI 2023/2024 #1] Labirint"
layout: "post"
diff: 普及/提高-
pid: P9904
tag: ['2023', 'O2优化', 'COCI（克罗地亚）']
---
# [COCI 2023/2024 #1] Labirint
## 题目背景

Teo 和克罗地亚 EJOI 队伍在一个迷宫里面。
## 题目描述

这个迷宫是一个 $n\times m$ 的网格，用坐标 $(1,1)$ 表示左上角的单元格，用坐标 $(n,m)$ 表示右下角的单元格。每一对相邻（四连通，即与上、下、左、右相邻）的单元格之间都有一道门，门有四种颜色：蓝、红、绿、橙，分别用字符 `P`、`C`、`Z`、`N` 表示。只能通过门移动到其它单元格。

现在 Teo 给你 $q$ 组询问，每次询问给定 $a,b,c,d$，表示找到一条从 $(a,b)$ 到 $(c,d)$ 的路径，最小化经过的门的颜色数，请你回答最少的颜色数量。
## 输入格式

第一行两个整数 $n,m$ 表示网格的行数和列数。

接下来一个 $n$ 行 $m-1$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i,j+1)$ 之间的门的颜色。

接下来一个 $n-1$ 行 $m$ 列的字符矩阵，其中第 $i$ 行第 $j$ 列的字符表示 $(i,j)$ 和 $(i+1,j)$ 之间的门的颜色。

接下来一行一个整数 $q$，表示询问数量。

接下来 $q$ 行，第 $i$ 行四个整数 $a_i,b_i,c_i,d_i$ 表示询问是 $(a_i,b_i)$ 到 $(c_i,d_i)$ 路径上门的颜色个数的最小值。
## 输出格式

$q$ 行，每行一个整数表示这组询问的答案。
## 样例

### 样例输入 #1
```
1 8
CPZNCCP
4
1 1 1 8
1 3 1 5
1 8 1 4
1 2 1 3
```
### 样例输出 #1
```
4
2
3
1
```
### 样例输入 #2
```
3 3
PP
PP
PP
CCC
CCC
3
1 1 3 3
3 3 2 2
1 1 1 3
```
### 样例输出 #2
```
2
2
1
```
### 样例输入 #3
```
4 4
CCC
CPC
PPP
CNP
ZZZZ
PPPP
CPZC
4
3 1 2 3
1 1 4 4
2 2 3 3
1 4 4 1
```
### 样例输出 #3
```
1
2
1
3
```
## 提示

### 【样例说明#3】

如图所示。

![](https://cdn.luogu.com.cn/upload/image_hosting/292r7hr3.png)

- 第一组询问，只需经过蓝色门；
- 第二组询问，只需经过蓝色门和绿色门；
- 第三组询问，只需经过蓝色门；
- 第四组询问，按图中的路径走，只需经过红色门、蓝色门、绿色门。

### 【数据范围】

对于 $100\%$ 的数据，$1\leq n,m,q\leq100$，$nm>1$，$1\leq a_i,c_i\leq n$，$1\leq b_i,d_i\leq m$，$(a_i,b_i)\ne(c_i,d_i)$，字符矩阵只有字符 `P`、`C`、`Z`、`N` 组成。

**本题采用捆绑测试。**

| 子任务 | 特殊性质 | 分值 |
| :----------: | :----------: | :----------: |
| $1$ | $n=1$ | $11$ |
| $2$ | 第一个字符矩阵中的字符只包含 `P`,第二个字符矩阵中的字符只包含 `C` | $13$ |
| $3$ | 所有字符矩阵中的字符只包含 `C` 和 `P` | $24$ |
| $4$ | 无特殊性质 | $22$ |

### 【说明】

本题分值按 COCI 原题设置，满分 $70$。

题目译自 [COCI2022-2023](https://hsin.hr/coci/) [CONTEST #1](https://hsin.hr/coci/contest1_tasks.pdf) _**T2 Labirint**_。


---

---
title: "[NFLSPC #6] 来点不那么魔怔的题面"
layout: "post"
diff: 普及/提高-
pid: P9928
tag: ['Special Judge', 'O2优化']
---
# [NFLSPC #6] 来点不那么魔怔的题面
## 题目描述

给定一个 $1\sim n$ 的排列 $p$ 和一个整数 $k$，要求找到 $p$ 的一个子序列 $\{p_{i_1}, p_{i_2}, \cdots, p_{i_m}\}$（$1\le i_1 < i_2 < \cdots < i_m\le n$）满足：

- 恰好有 $k$ 个 $j$ 满足 $1\le j\le m$ 且 $p_{i_j}$ 是 $p_{i_1}, p_{i_2}, \cdots, p_{i_m}$ 中从小往大数第 $j$ 个。

如果有多解，输出任意一组解即可。如果不存在合法的子序列，输出 $-1$。
## 输入格式

第一行两个整数 $n, k$。

接下来一行 $n$ 个整数 $p_1, p_2, \cdots, p_n$ 表示给定的排列。
## 输出格式

如果无解，输出一行一个整数 $-1$。

否则第一行输出一个整数 $m$ 表示子序列的长度。你需要保证 $1\le m\le n$。

接下来一行输出 $m$ 个整数 $i_1, i_2, \cdots, i_m$ 表示子序列的下标。你需要保证 $1\le i_j\le n$ 且 $i_j < i_{j+1}$（$1\le j < m$）。
## 样例

### 样例输入 #1
```
4 1
4 2 1 3

```
### 样例输出 #1
```
3
2 3 4

```
## 提示

对于所有数据，$1\le n\le 10 ^ 5$，$1\le k\le n$，$p_1, p_2, \cdots, p_n$ 为 $1\sim n$ 的排列。

- 子任务 1（$10$ 分）：$n\leq 20$。
- 子任务 2（$10$ 分）：$k = 2$。
- 子任务 3（$30$ 分）：$k = 3$。
- 子任务 4（$30$ 分）：$n\leq 10 ^ 3$。
- 子任务 5（$20$ 分）：无特殊限制。

Source：NFLSPC #6 D by tzc_wk


---

---
title: "[NFLSPC #6] 1064 病毒"
layout: "post"
diff: 普及/提高-
pid: P9930
tag: ['O2优化']
---
# [NFLSPC #6] 1064 病毒
## 题目背景

你的电脑中了 1064 病毒，现在电脑里储存的所有数字都开始坍缩了！

为了更彻底地毁灭你的电脑，对于十进制下的 $n$ 位数，邪恶的 1064 病毒会将它按照某种规则迭代至少 $n + 1$ 次，以确保你无法还原。

面对 1064 病毒，你手足无措。但是作为 OIer 的你想知道道道道道道道道道道道到到到到到到到到


## 题目描述

定义数字串为只含有数码 $0\sim 9$ 的串，奇数数码为 $1, 3, 5, 7, 9$，偶数数码为 $0, 2, 4, 6, 8$。

对数字串 $x$，设其中奇数数码，偶数数码和总数码个数分别为 $a, b, c$，则 $a + b = c = |x|$。定义 $g(x)$ 为将 $a, b, c$ 依次写下得到的数字串，**不忽略前导零**。例如 $g(\texttt{0}) = \texttt {011}$，$g(\texttt{1064}) = \texttt{134}$，$g(\texttt {822}) = \texttt {033}$，$g(\texttt{1092515503}) = \texttt{7310}$。

设 $f_k(x)$ 表示将 **数字** $x$ **忽略前导零** 写成数字串 $x'$ 后，将 $g(x')$ 迭代 $k$ 次得到的数字串对应的数字，即设 $x ^ * = g(g(\cdots g(x')))$（共有 $k$ 个 $g$），则 $f_k(x)$ 为将 $x ^ *$ 写成数字后的结果。

给定 $n, k$（**保证 $n < k$**），求 $\sum_{i = 0} ^ {10 ^ n - 1} f_k(i)$。

多组数据。
## 输入格式

第一行一个整数 $T$。

接下来 $T$ 行，每行两个整数 $n, k$ 表示一组数据。
## 输出格式

对每组数据，输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
1
0 1

```
### 样例输出 #1
```
11

```
## 提示

对于所有数据，$1\leq T\leq 60$，$0\leq n < k \leq 10 ^ 5$，$\sum k\leq 10 ^ 5$。

- 测试点 1（$30$ 分）：$n\leq 5$，$k\leq 15$。  
- 测试点 2（$70$ 分）：无特殊限制。

Source：NFLSPC #6 F by Alex_Wei


---


---
title: "[信息与未来 2019] 新斐波那契数列"
layout: "post"
diff: 普及/提高-
pid: B3752
tag: ['数学', '2019', '二分', '江苏', '斐波那契数列', '信息与未来']
---
# [信息与未来 2019] 新斐波那契数列
## 题目描述

给定正整数 $a(a\ge1)$，新斐波那契数列 $f_a$ 按如下方式定义：
- $f_a(1) = 1$；
- $f_a(2) = a$；
- $f_a(n) = f_a(n − 1) + f_a(n − 2)\ (n > 2)$。

例如，给定 $a = 4$，有 $f_4(1) = 1, f_4(2) = 4, f_4(3) = 5, f_4(4) = 9, f_4(5) = 14, \cdots$ 现在已知新斐波那契数列中的一项 $x$，但并不知道 $n$ 和 $a$ 的值是多少。请你求出所有可能的 $n,a(n\ge2)$ 满足 $f_a(n) = x$。
## 输入格式

你需要在一个测试数据中处理多个新斐波那契数列问题。输入第一行 $T$ 表示问题的数量。

接下来 $T$ 行， 每行一个整数：待求解的 $x$。
## 输出格式

对于每个新斐波那契数列问题，按照 $n$ 从小到大的顺序，输出所有可能的 $n,a$ 满足 $f_a(n) = x$。每行输出一对 $n$ 和 $a$，由一个空格分隔。
## 样例

### 样例输入 #1
```
2
9
123
```
### 样例输出 #1
```
2 9
3 8
4 4
2 123
3 122
4 61
6 24
10 3
```
## 提示

对于 $60\%$ 的测试数据，有 $1\le x\le10^6$。

对于 $100\%$ 的测试数据，有 $2\le x\le10^9,1\le T\le20$。
> 本题原始满分为 $15\text{pts}$。


---

---
title: "[常州市赛 2021] 数字翻转"
layout: "post"
diff: 普及/提高-
pid: B4206
tag: ['搜索', '二分', '2021', '江苏', '枚举', '科创活动', '小学活动']
---
# [常州市赛 2021] 数字翻转
## 题目背景

搬运自 <http://czoj.com.cn/p/442>。数据为民间数据。
## 题目描述

小 $\text X$ 在做数学题的时候发现了一类有趣的数字。把这样的数字写在一张不透明的纸上，倒过来（把纸旋转 $180$ 度，转轴垂直于纸面）看还是同样的数字。例如 $69$ 就是这样的数字。  

![](https://cdn.luogu.com.cn/upload/image_hosting/71ognnjx.png)

注意，小 $\text X$ 用的是以下字体：  

![](https://cdn.luogu.com.cn/upload/image_hosting/ll5qcrqa.png)

现在小 $\text X$ 会问你 $Q$ 次问题，每次问你 $L$ 到 $R$ 之间有多少个这样有趣的数字。
## 输入格式

第一行为 $1$ 个正整数 $Q$，表示有 $Q$ 个问题。  
接下来 $Q$ 行，每行两个整数 $L$ 和 $R$ 描述问题。
## 输出格式

对于每个问题，依次输出一行一个整数表示答案。 
## 样例

### 样例输入 #1
```
3
1 260
3333 8888
1 1234567654321
```
### 样例输出 #1
```
11
17
77758
```
## 提示

### 样例解释
$1$ 到 $260$ 中有趣的数字： $2,5,8,22,55,69,88,96,202,222,252$。
### 数据范围
本题共有 $10$ 个测试点，每个测试点 $10$ 分。  
对于所有数据，$1\le Q\le10^5$，$1\le L\le R<10^{14}$。
|测试点编号|$Q$|$R$|
|:-:|:-:|:-:|
|$1$|$=1$|$<10$|
|$2$|$\le10^5$|$<10$|
|$3$|$=1$|$<10^3$|
|$4$|$\le10^5$|$<10^3$|
|$5$|$=1$|$<10^6$|
|$6$|$\le10^5$|$<10^6$|
|$7$|$=1$|$<10^{10}$|
|$8$|$\le10^5$|$<10^{10}$|
|$9$|$=1$|$<10^{14}$|
|$10$|$\le10^5$|$<10^{14}$|



---

---
title: "[常州市赛 2023] 积木"
layout: "post"
diff: 普及/提高-
pid: B4222
tag: ['动态规划 DP', '二分', '2023', '江苏', '前缀和', 'ST 表', '科创活动', '小学活动']
---
# [常州市赛 2023] 积木
## 题目背景

搬运自 <http://czoj.com.cn/p/679>。数据为民间数据。
## 题目描述

小 X 在地上玩积木，每块积木都是一个 $1\times 1\times 1$ 的正方体。地面可以看成一个 $n\times m$ 的网格，其中每一小格内都整齐地从下到上堆着若干块积木。其中第 $i$ 行第 $j$ 列中有 $h_{i,j}$ 块积木。

现在小 X 想要拿走一些积木，使得剩下来到积木组成一个正方体，正方体指的是长、宽、高都相同的长方体。

小 X 想问你他最少拿掉多少块积木才能使得最后剩下来的积木组成一个正方体。
## 输入格式

第一行，$2$ 个整数 $n$ 和 $m$ 表示地面的大小。 接下来 $n$ 行，每行 $m$ 个非负整数。第 $i$ 行第 $j$ 个数表示 $h_{i,j}$。
## 输出格式

一行一个整数表示答案。
## 样例

### 样例输入 #1
```
3 3 
2 2 1 
3 2 2 
3 1 2
```
### 样例输出 #1
```
10
```
### 样例输入 #2
```
5 5 
4 4 3 4 3
3 4 3 3 3 
3 3 1 4 4 
3 4 4 3 3 
4 3 4 4 4
```
### 样例输出 #2
```
77
```
## 提示

本题共有 $12$ 个测试点。

|测试点编号|$n,m$|$h_{i,j}$|
|:-:|:-:|:-:|
|$1\sim3$|$1\le n,m\le50$|$0\le h_{i,j}\le1000$|
|$4\sim6$|$1\le n,m\le200$|$0\le h_{i,j}\le 1000$|
|$7\sim9$|$1\le n,m\le1000$|$0\le h_{i,j}\le 20$|
|$10\sim12$|$1\le n,m\le1000$|$0\le h_{i,j}\le1000$|


---

---
title: "[海淀区小学组 2025] 统计数对"
layout: "post"
diff: 普及/提高-
pid: B4241
tag: ['二分', '2025', '北京', '哈希 hashing', '科创活动', '小学活动']
---
# [海淀区小学组 2025] 统计数对
## 题目背景

2025 年海淀区中小学生信息学竞赛小学组复赛题目，数据为洛谷自造。

为更好区分不同时间复杂度的做法，本题时间限制下调到 500 毫秒。
## 题目描述

陶陶是一个计算机爱好者，对二进制数有着特别的喜好，遇到各种各样的数据，他总能找到跟 $2$ 的整数次幂的关系。现在，他获得了一个长度为 $n$ 的数列 $a_1, a_2, \dots, a_n$，他发现其中有些元素的和恰好是 $2$ 的整数次幂。对于给定的 $a_1, a_2, \dots, a_n$，你的任务是统计有多少个数对 $(i, j)$ 满足 $a_i + a_j = 2^x$，其中 $x \in \N^*$，$i < j$，这里 $\N^*$ 表示正整数集合。

## 输入格式

第一行包含一个整数 $n$，第二行包含 $n$ 个整数 $a_1, a_2, \dots, a_n$。
## 输出格式

仅有一个正整数，表示满足 $a_i + a_j$ 是 $2$ 的整数次幂的数对 $(i, j)$ 的个数。
## 样例

### 样例输入 #1
```
4
7 3 2 1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3
1 1 1
```
### 样例输出 #2
```
3
```
## 提示

- 对于 $40\%$ 的数据，$1 \leq n \leq 10^3$，对于每一个正整数 $i$，$1 \leq i \leq n$，都有 $1 \leq a_i \leq 10^9$。
- 对于另外 $60\%$ 的数据，$1 \leq n \leq 10^5$，对于每一个正整数 $i$，$1 \leq i \leq n$，都有 $1 \leq a_i \leq 10^9$。


---

---
title: "[海淀区小学组 2025] 蜂窝网络"
layout: "post"
diff: 普及/提高-
pid: B4242
tag: ['二分', '2025', '北京', '科创活动', '小学活动']
---
# [海淀区小学组 2025] 蜂窝网络
## 题目背景

2025 年海淀区中小学生信息学竞赛小学组复赛题目，数据为洛谷自造。
## 题目描述

有 $n$ 个城市编号从 $1$ 到 $n$ 和 $m$ 个信号发射塔编号从 $1$ 到 $m$ 都分布在一条直线上，如果选择直线上某个点的坐标为 $0$，则这 $n$ 个城市的坐标可以描述为 $a_1, a_2, \dots, a_n$，这 $m$ 个信号发射塔的坐标可描述为 $b_1, b_2, \dots, b_m$。每个信号发射塔能为它左右不超过 $r$ 的距离以内的城市提供上网流量，你的任务是确定 $r$ 最小为多少时才能保证所有城市都有网络信号？
## 输入格式

第一行包含两个正整数 $n$ 和 $m$，分别表示城市的个数和信号发射塔的个数，第二行包含 $n$ 个整数 $a_1, a_2, \dots, a_n$，依次为每个城市的位置坐标，第三行包含 $m$ 个整数 $b_1, b_2, \dots, b_m$，依次为每个信号发射塔的位置坐标。允许多个城市或信号发射塔位置相同。

## 输出格式

仅有一个整数，能使所有城市都有网络信号覆盖的最小的 $r$ 值。
## 样例

### 样例输入 #1
```
3 2
-2 2 4
-3 0
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5 3
1 5 10 14 17
4 11 15
```
### 样例输出 #2
```
3
```
## 提示

- 对于 $30\%$ 的数据，$1 \leq n, m \leq 500$，对于整数 $i, j$，$\forall i \in [1, n]$，$1 \leq a_i \leq 500$，$\forall j \in [1, m]$，$1 \leq b_j \leq 500$。
- 对于另外 $70\%$ 的数据，$1 \leq n, m \leq 10^5$，对于整数 $i, j$，$\forall i \in [1, n]$，$\forall j \in [1, m]$，$-10^9 \leq a_i, b_j \leq 10^9$。


---

---
title: "[CCO 2022] Alternating Heights"
layout: "post"
diff: 普及/提高-
pid: P10050
tag: ['二分', '2022', 'CCO（加拿大）', '深度优先搜索 DFS', '图论建模', '双指针 two-pointer']
---
# [CCO 2022] Alternating Heights
## 题目描述

Troy 计划给 CCO 的学生拍一张合影，他向你寻求帮助。

有 $K$ 个学生，编号从 $1$ 到 $K$。Troy 忘记了学生的身高，但他记得没有两个学生的身高相同。

Troy 有一个序列 $A_{1}, A_{2}, \ldots, A_{N}$，表示合影中从左到右的学生顺序。一个学生可能在 $A$ 中出现多次。你不确定这张合影会怎么拍，但你不愿意认为 Troy 犯了错误。

Troy 会给你 $Q$ 个形式为 $x,y$ 的询问，每个询问为「给定学生序列 $A_{x}, A_{x+1}, \ldots, A_{y}$，他们的身高能否形成一个交替序列？」更具体地说，我们用 $h_i$ 表示第 $i$ 个学生的身高。如果存在一种身高分配$ h_1, h_2, \ldots, h_K$，使得 $h_{A_{x}}>h_{A_{x+1}}<h_{A_{x+2}}>h_{A_{x+3}}<\ldots h_{A_{y}}$，回答 `YES`；否则回答 `NO`。

注意，每个查询都是独立的：也就是说，询问 $i$ 的身高分配与询问 $j$ 的身高分配无关 $(i\neq j)$。
## 输入格式

第一行包含三个用空格分隔的整数 $N, K$ 和 $Q$。

第二行包含 $N$ 个整数，表示 $A_{1}, A_{2}, \ldots, A_{N}\left(1 \leq A_{i} \leq K\right)$。

接下来的 $Q$ 行，每行包含两个用空格分隔的整数 $x$ 和 $y (1 \leq x<y \leq N)$，表示一组查询。
## 输出格式

输出 $Q$ 行。第 $i$ 行，输出 `YES` 或者 `NO`，表示 Troy 的第 $i$ 个查询的答案。
## 样例

### 样例输入 #1
```
6 3 3
1 1 2 3 1 2
1 2
2 5
2 6
```
### 样例输出 #1
```
NO
YES
NO
```
## 提示

## 样例说明

对于第一个询问，不可能有 $h_1>h_1$，所以答案是 `NO`。

对于第二个询问，$h_1>h_2<h_3>h_1$ 的一种方案是 $h_1=160 \mathrm{~cm}, h_2=140 \mathrm{~cm}, h_3=180 \mathrm{~cm}$。另一种方案是 $h_1=1.55 \mathrm{~m}, h_2=1.473 \mathrm{~m}, h_3=1.81 \mathrm{~m}$。

对于第三个询问，不可能同时有 $h_1>h_2$ 和 $h_1<h_2$。

## 数据范围

对于所有的数据，有 $2 \leq N \leq 3000$，$2 \leq K \leq N$，$1 \leq Q \leq 10^{6}$。

子任务编号|	分值|	$N$|	$K$|	$Q$
:-:|:-:|:-:|:-:|:-:
$1$|	$16$|	$2 \leq N \leq 3000$|	$K=2$|	$1 \leq Q \leq 10^{6}$
$2$|	$24$|	$2 \leq N \leq 500$|	$2 \leq K \leq \min (N, 5)$|$1 \leq Q \leq 10^{6}$
$3$	|$28$|	$2 \leq N \leq 3000$	|$2 \leq K \leq N$	|$1 \leq Q \leq 2000$
$4$|	$32$| $2 \leq N \leq 3000$	|$2 \leq K \leq N$	|	$1 \leq Q \leq 10^{6}$


---

---
title: "[NOIP 1999 提高组] 导弹拦截"
layout: "post"
diff: 普及/提高-
pid: P1020
tag: ['动态规划 DP', '贪心', '1999', '二分', 'NOIP 提高组', 'Special Judge', '线性 DP']
---
# [NOIP 1999 提高组] 导弹拦截
## 题目描述

某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是这种导弹拦截系统有一个缺陷：虽然它的第一发炮弹能够到达任意的高度，但是以后每一发炮弹都不能高于前一发的高度。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在试用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。

   
输入导弹依次飞来的高度，计算这套系统最多能拦截多少导弹，如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。

## 输入格式

一行，若干个整数，中间由空格隔开。
## 输出格式

两行，每行一个整数，第一个数字表示这套系统最多能拦截多少导弹，第二个数字表示如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。

## 样例

### 样例输入 #1
```
389 207 155 300 299 170 158 65
```
### 样例输出 #1
```
6
2

```
## 提示

对于前 $50\%$ 数据（NOIP 原题数据），满足导弹的个数不超过 $10^4$ 个。该部分数据总分共 $100$ 分。可使用$\mathcal O(n^2)$ 做法通过。  
对于后 $50\%$ 的数据，满足导弹的个数不超过 $10^5$ 个。该部分数据总分也为 $100$ 分。请使用 $\mathcal O(n\log n)$ 做法通过。

对于全部数据，满足导弹的高度为正整数，且不超过 $5\times 10^4$。


此外本题开启 spj，每点两问，按问给分。

NOIP1999 提高组 第一题

---

$\text{upd 2022.8.24}$：新增加一组 Hack 数据。


---

---
title: "[COCI 2023/2024 #3] Milano C.le"
layout: "post"
diff: 普及/提高-
pid: P10225
tag: ['二分', '2023', 'COCI（克罗地亚）']
---
# [COCI 2023/2024 #3] Milano C.le
## 题目背景

**译自 [COCI 2023/2024 Contest #3](https://hsin.hr/coci/archive/2023_2024) T3「[Milano C.le](https://hsin.hr/coci/archive/2023_2024/contest3_tasks.pdf)」**
## 题目描述

Silvia 目前在米兰中央车站，她注意到车站有很多站台。她觉得站台数量太多了，所以她打算统计有多少真正需要的站台。

Silvia 同样注意到这个车站的一个有趣的事实：出发和到达时刻表每两天就会重复一次，并且时刻表满足所有 $n$ 列火车在一天到达车站，并且在另一天离开。注意按这种方式，没有火车会在所有火车都到达之前离开。

车站的站台足够长，可以满足所有 $n$ 列火车都能在同一站台停成一列。然而，如果火车 $x$ 先进入站台，然后 $y$ 进入同一站台，则火车 $x$ 不可以在火车 $y$ 离开站台之前离开。

Silvia 想知道在不存在由于排在某列火车前面的火车还没离开导致这列火车无法离开的情况下，最少需要多少站台可以使所有火车都停下。
## 输入格式

第一行一个整数 $n\ (1\le n\le 2\cdot 10^5)$，表示火车的数量。

第二行包含 $n$ 个整数 $a_i\ (1\le a_i\le n,\forall i\neq j,a_i\neq a_j)$，表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站。序列 $(a_i)$ 是一个排列。

第三行包含 $n$ 个整数 $b_i\ (1\le b_i\le n,\forall i\neq j,b_i\neq b_j)$，表示第 $i$ 列火车在第二天第 $b_i$ 个离开车站。序列 $(b_i)$ 是一个排列。
## 输出格式

输出一行一个整数，表示最少需要多少个站台。
## 样例

### 样例输入 #1
```
5
3 5 2 4 1
3 2 5 1 4

```
### 样例输出 #1
```
2

```
### 样例输入 #2
```
5
3 1 2 5 4
4 2 3 1 5

```
### 样例输出 #2
```
4

```
### 样例输入 #3
```
3
3 2 1
1 2 3

```
### 样例输出 #3
```
1
```
## 提示

### 样例解释 2

![](https://cdn.luogu.com.cn/upload/image_hosting/4ol0mhxg.png)

上图展示了一个样例二中站台上可能的列车调度情况。列车上 $(i:a_i/b_i)$ 的标签表示第 $i$ 列火车在第一天第 $a_i$ 个到达车站，然后在第二天第 $b_i$ 个离开车站。火车 $(2:1/2)$ 不能比火车 $(4:5/1)$ 更早离开车站。

### 样例解释 3

所有火车均可在同一站台排成一列，没有任何问题。

### 子任务

| 子任务 |               附加限制               | 分值 |
| :--------: | :----------------------------------: | :--: |
|    $1$     |              $n\le 10$               | $21$ |
|    $2$     | 最小所需站台数要么是 $1$，要么是 $2$ | $18$ |
|    $3$     |            $n\le 1\ 000$             | $31$ |
|    $4$     |              无附加限制              | $40$ |


---

---
title: "[GESP202403 七级] 交流问题"
layout: "post"
diff: 普及/提高-
pid: P10378
tag: ['图论', '2024', '图论建模', '二分图', 'GESP']
---
# [GESP202403 七级] 交流问题
## 题目描述

来自两所学校 $A$、$B$ 的 $n$ 名同学聚在一起相互交流。为了方便起见，我们把这些同学从 $1$ 至 $n$ 编号。他们共进行了 $m$ 次交流，第 $i$ 次交流中，编号为 $u_i, v_i$ 的同学相互探讨了他们感兴趣的话题，并结交成为了新的朋友。

由于这次交流会的目的是促进两校友谊，因此只有不同学校的同学之间会交流。同校同学并不会互相交流。

作为 $A$ 校顾问，你对 $B$ 校的规模非常感兴趣，你希望求出 $B$ 校至少有几名同学、至多有几名同学。
## 输入格式

第一行两个正整数，表示同学的人数 $n$、交流的次数 $m$。  
接下来 $m$ 行，每行两个整数 $u_i, v_i$，表示一次交流。  
## 输出格式

输出一行两个整数，用单个空格隔开，分别表示 $B$ 校至少有几名同学、至多有几名同学。
## 样例

### 样例输入 #1
```
4 3
1 2
2 3
4 2

```
### 样例输出 #1
```
1 3
```
### 样例输入 #2
```
7 5
1 2
2 3
4 2
5 6
6 7

```
### 样例输出 #2
```
2 5
```
## 提示

### 数据规模与约定

- 对 $30\%$ 的数据，保证 $n \leq 17$，$m \leq 50$。
- 对 $60\%$ 的数据，保证 $n \leq 500$，$m \leq 2000$。
- 对全部的测试数据，保证 $1 \leq u_i, v_i \leq n \leq 10^5$，$1 \leq m \leq 2\times 10^5$，输入是合法的，即交流一定是跨校开展的。


---

---
title: "「XSOI-R1」凑点"
layout: "post"
diff: 普及/提高-
pid: P10402
tag: ['数学', '二分', '洛谷原创', 'Special Judge', 'O2优化', '构造']
---
# 「XSOI-R1」凑点
## 题目描述

小 T 会给你一个长度为 $n$ 的整数数列，你手上有一个数 $x$，初始为 $0$，你可以执行以下操作，使得最终 $x$ 与 $c$ 的差小于 $10^{-4}$。

你可以对 $x$ 进行至多 $k$ 次操作：

- `add i`，对计数器 $x$ 加上 $a_i$，然后 $a_i$ 不能再进行任何操作。

- `sub i`，对计数器 $x$ 减上 $a_i$，然后 $a_i$ 不能再进行任何操作。

- `mul i`，对计数器 $x$ 乘上 $a_i$，然后 $a_i$ 不能再进行任何操作。

- `sqrt i`，将 $a_i$ 赋值为 $\sqrt {a_i}$，每个 $a_i$ 只能开方一次。

- `pow f`，将计数器 $x$ 变为 $x^f$，$f$ 可以为浮点数。

所有 $a_i$ 都必须给 $x$ 进行一次加或减或乘操作。

在运算过程中，$a_i$ 和 $x$ 的值均不能超过 $10^{10}$。题目保证有解，如有多种方案，输出一种即可。

本题精度要求较大，请提高算法的精度。
## 输入格式

第一行三个整数 $n$，$k$，$c$。

第二行 $n$ 个整数，表示序列 $a$。
## 输出格式

第一行一个整数表示总操作数 $g$。

接下来 $g$ 行为你的操作序列。
## 样例

### 样例输入 #1
```
5 25 3
3 3 3 3 3
```
### 样例输出 #1
```
5
add 1
add 2
sub 3
sub 4
add 5

```
### 样例输入 #2
```
3 9 3
1 3 3
```
### 样例输出 #2
```
5
sqrt 2
sqrt 3
add 1
mul 2
mul 3

```
### 样例输入 #3
```
3 9 77
4 5 4
```
### 样例输出 #3
```
4
add 1
add 2
pow 2
sub 3
```
## 提示

**【样例解释 #1】**

- $x$ 加上 $a_1$，此时 $x$ 为 $3$。

- $x$ 加上 $a_2$，此时 $x$ 为 $6$。

- $x$ 减去 $a_3$，此时 $x$ 为 $3$。

- $x$ 减去 $a_4$，此时 $x$ 为 $0$。

- $x$ 加上 $a_5$，此时 $x$ 为 $3$。

**【样例解释 #2】**

- 将 $a_2$ 开根号，此时 $a=[1,\sqrt3,3]$。

- 将 $a_3$ 开根号，此时 $a=[1,\sqrt3,\sqrt3]$。

- $x$ 加上 $a_1$，此时 $x$ 为 $1$。

- $x$ 乘上 $a_2$，此时 $x$ 为 $\sqrt3$。

- $x$ 乘上 $a_3$，此时 $x$ 为 $3$。

**【样例解释 #3】**

- $x$ 加上 $a_1$，此时 $x$ 为 $4$。

- $x$ 加上 $a_2$，此时 $x$ 为 $9$。

- 将 $x$ 变为 $x^2$，此时 $x$ 为 $81$。

- 将 $x$ 减去 $a_3$，此时 $x$ 为 $77$。

### 数据规模与约定


**本题采用捆绑测试。**

- subtask 0（10 pts）：$n\leq 5$，$k=n^2$，保证可以使用加与减的运算得到解。

- subtask 1（20 pts）：$n \leq 5$，$k=n^2$，保证可以可以使用加、减、乘、开方运算得到解。

- subtask 2（15 pts）：$n \leq 10$，$a_i \leq 2$，$k=n+1$。

- subtask 3（55 pts）：$k=n+1$。

对于所有数据：$0 \leq n \leq 10^{5}$，$\sum_{i=1}^{n}{a_i} \le 10^{10}$，$0 \leq c\leq 10^{10}$。


---

---
title: "[蓝桥杯 2023 国 A] 第 K 小的和"
layout: "post"
diff: 普及/提高-
pid: P10417
tag: ['二分', '2023', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 A] 第 K 小的和
## 题目描述

给定两个序列 $A,B$，长度分别为 $n,m$。

设另有一个序列 $C$ 中包含了 $A,B$ 中的数两两相加的结果 ($C$ 中共有 $n\times m$ 个数)。问 $C$ 中第 $K$ 小的数是多少。请注意重复的数需要计算多次。例如 $1,1,2,3$ 中，最小和次小都是 $1$，而 $3$ 是第 $4$ 小。
## 输入格式

输入的第一行包含三个整数 $n,m,K$，相邻两个整数之间使用一个空格分隔。

第二行包含 $n$ 个整数，分别表示 $A_1,A_2,\ldots,A_n$，相邻两个整数之间使用一个空格分隔。

第三行包含 $m$ 个整数，分别表示 $B_1,B_2,\ldots,B_m$，相邻两个整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3 4 5
1 3 4
2 3 5 6

```
### 样例输出 #1
```
6
```
## 提示

**【评测用例规模与约定】**


- 对于 $40\%$ 的评测用例，$n,m\le 5000$，$A_i,B_i\le 1000$;
- 对于所有评测用例，$1\le n,m\le 10^5$，$1\le A_i,B_i\le 10^9$，$1\le K\le n\times m$。



---

---
title: "「MYOI-R3」极差"
layout: "post"
diff: 普及/提高-
pid: P10444
tag: ['贪心', '二分', '洛谷原创', 'O2优化', '洛谷月赛', '双指针 two-pointer', 'Ad-hoc']
---
# 「MYOI-R3」极差
## 题目描述

对于一个序列 $c$ ，定义 $c$ 的极差为 $c$ 中最大值与最小值之差。现在给定一个长度为 $n$ 的序列 $a$，问是否能将其分成至少两个长度大于 $1$ 的子序列，使得每个子序列的极差都相等（注意，所有元素都必须分配且每个元素仅能分配到一个子序列中）。
## 输入格式

**本题包含多组数据**。

第一行两个整数 $T,id$，表示数据组数和子任务编号。

对于每组数据，

第一行一个正整数 $n$，表示数组长度。

第二行 $n$ 个整数表示序列 $a$。
## 输出格式


对于每组数据，输出一行一个字符串 `Yes` 或 `No`。
## 样例

### 样例输入 #1
```
2 1
6
1 1 4 5 1 4
7
1 9 1 9 8 1 0
```
### 样例输出 #1
```
No
Yes
```
## 提示

### 样例 $\small\text{1}$ 解释

样例符合子任务 1 的约束，$id=1$。


询问一：

可以证明，没有任何方案满足条件。

询问二：

合法分配的一种子序列集合如下：
- $\{1,9\}$。
- $\{1,9\}$。
- $\{8,1,0\}$。

答案不唯一。

### 数据规模与约定

**本题采用捆绑测试**。

- Subtask 1（20 points）：$4\le \sum n\le 20,a_i\ge 0$。
- Subtask 2（20 points）：$4\le \sum n\le 100,a_i\ge 0$。
- Subtask 3（20 points）：$4\le \sum n\le 10^3,a_i\ge 0$。
- Subtask 4（10 points）：$a$ 数组中元素相等。
- Subtask 5（30 points）：无特殊限制。


对于 $100\%$ 的数据，$4\le \sum n\le 10^6,0\le |a_i|\le 10^9,1\le T\le 300$。



---

---
title: "[USACO03MAR] Best Cow Fences G"
layout: "post"
diff: 普及/提高-
pid: P10450
tag: ['动态规划 DP', '二分', '前缀和']
---
# [USACO03MAR] Best Cow Fences G
## 题目描述

**原题来自：USACO 2003 Mar. Green**

给定一个长度为 $n$ 的非负整数序列 $A$ ，求一个平均数最大的，长度不小于 $L$ 的子段。
## 输入格式

第一行用空格分隔的两个整数 $n$ 和 $L$；

第二行为 $n$ 个用空格隔开的非负整数，表示 $A_i$。
## 输出格式

输出一个整数，表示这个平均数的 $1000$ 倍。不用四舍五入，直接输出。
## 样例

### 样例输入 #1
```
10 6
6 4 2 10 3 8 5 9 4 1
```
### 样例输出 #1
```
6500
```
## 提示

$1 \leq n \leq 10^5,0 \leq A_i \leq 2000$。


---

---
title: "防线"
layout: "post"
diff: 普及/提高-
pid: P10460
tag: ['二分', '前缀和']
---
# 防线
## 题目描述

lsp 学习数学竞赛的时候受尽了同仁们的鄙视，终于有一天……受尽屈辱的 lsp 黑化成为了黑暗英雄 Lord lsp。就如同中二漫画的情节一样，Lord lsp 打算毁掉这个世界。数学竞赛界的精英 lqr 打算阻止 Lord lsp 的阴谋，于是她集合了一支由数学竞赛选手组成的超级行动队。由于队员们个个都智商超群，很快，行动队便来到了 Lord lsp 的黑暗城堡的下方。

但是，同样强大的 Lord lsp 在城堡周围布置了一条“不可越过”的坚固防线。防线由很多防具组成，这些防具分成了 $N$ 组。我们可以认为防线是一维的，那么每一组防具都分布在防线的某一段上，并且同一组防具是等距离排列的。也就是说，我们可以用三个整数 $S$，$E$ 和 $D$ 来描述一组防具，即这一组防具布置在防线的 $S,S + D,S + 2D，\dots，S + KD$（$K\in \Z，S + KD\leq E，S + (K + 1)D>E$） 位置上。

黑化的 Lord lsp 设计的防线极其精良。如果防线的某个位置有偶数个防具，那么这个位置就是毫无破绽的（包括这个位置一个防具也没有的情况，因为 $0$ 也是偶数）。只有有奇数个防具的位置有破绽，但是整条防线上也最多只有一个位置有奇数个防具。作为行动队的队长，lqr 要找到防线的破绽以策划下一步的行动。但是，由于防具的数量太多，她实在是不能看出哪里有破绽。作为 lqr 可以信任的学弟学们，你们要帮助她解决这个问题。
## 输入格式

输入文件的第一行是一个整数 $T$，表示有 $T$ 组互相独立的测试数据。 

每组数据的第一行是一个整数 $N$。

之后 $N$ 行，每行三个整数 $S_i$，$E_i$，$D_i$，代表第 $i$ 组防具的三个参数。
## 输出格式

对于每组测试数据，如果防线没有破绽，即所有的位置都有偶数个防具，输出一行 `There's no weakness.`。

否则在一行内输出两个空格分隔的整数 $P$ 和 $C$，表示在位置 $P$ 有 $C$ 个防具。当然 $C$ 应该是一个奇数。
## 样例

### 样例输入 #1
```
3
2
1 10 1 
2 10 1 
2
1 10 1 
1 10 1 
4
1 10 1 
4 4 1 
1 5 1 
6 10 1

```
### 样例输出 #1
```
1 1
There's no weakness. 
4 3
```
## 提示

对于 $30\%$ 的数据，满足防具总数不多于 $10  ^ {7}$。

对于 $100\%$ 的数据，满足防具总数不多于 $10  ^ {8}$，$S_{i}\le E_{i} $，$1\le T \le 5$，$N \le 200000$，$0 \le S_{i}$ ，$E_{i}$ ，$D_{i} \le 2^{31} - 1$。


---

---
title: "Dropping Test"
layout: "post"
diff: 普及/提高-
pid: P10505
tag: ['二分', 'O2优化', '分数规划']
---
# Dropping Test
## 题目描述

在某个课程中，你需要进行 $n$ 次测试。 

如果你在共计 $b_i$ 道题的测试 $i$ 上的答对题目数量为 $a_i$，你的累积平均成绩就被定义为

$$100\times \dfrac{\displaystyle \sum_{i=1}^n a_i}{\displaystyle \sum_{i=1}^n b_i}$$

给定您的考试成绩和一个正整数 $k$，如果您被允许放弃任何 $k$ 门考试成绩，您的累积平均成绩的可能最大值是多少。

假设您进行了 $3$ 次测试，成绩分别为 $5/5,0/1$ 和 $2/6$。

在不放弃任何测试成绩的情况下，您的累积平均成绩是

$$100\times \frac{5+0+2}{5+1+6}=50$$

然而，如果你放弃第三门成绩，则您的累积平均成绩就变成了

$$100\times \frac{5+0}{5+1}\approx 83.33\approx 83$$
## 输入格式

输入包含多组测试用例，每个测试用例包含三行。

对于每组测试用例，第一行包含两个整数 $n$ 和 $k$。

第二行包含 $n$ 个整数，表示所有的 $a_i$。

第三行包含 $n$ 个整数，表示所有的 $b_i$。

当输入用例 $n=k=0$ 时，表示输入终止，且该用例无需处理。
## 输出格式

对于每个测试用例，输出一行结果，表示在放弃 $k$ 门成绩的情况下，可能的累积平均成绩最大值。

结果应四舍五入到最接近的整数。
## 样例

### 样例输入 #1
```
3 1
5 0 2
5 1 6
4 2
1 2 7 9
5 6 7 9
0 0
```
### 样例输出 #1
```
83
100
```
## 提示

数据范围 $1 \le n \le 1000$, $0 \le k < n$, $0 \le a_i \le b_i \le 10^9$。


---

---
title: "[GESP202406 五级] 黑白格"
layout: "post"
diff: 普及/提高-
pid: P10719
tag: ['数学', '二分', '2024', '前缀和', 'GESP']
---
# [GESP202406 五级] 黑白格
## 题目描述

小杨有一个 $n$ 行 $m$ 列的网格图，其中每个格子要么是白色，要么是黑色。

小杨想知道至少包含 $k$ 个黑色格子的最小子矩形包含了多少个格子。
## 输入格式

第一行包含三个正整数 $n,m,k$，含义如题面所示。

之后 $n$ 行，每行⼀个长度为 $m$ 的 $\texttt{01}$ 串，代表网格图第 $i$ 行格子的颜色，如果为 $\texttt{0}$，则对应格子为白色，否则为黑色。
## 输出格式

输出一个整数，代表至少包含 $k$ 个黑色格子的最小子矩形包含格子的数量，如果不存在则输出 $0$。
## 样例

### 样例输入 #1
```
4 5 5
00000
01111
00011
00011
```
### 样例输出 #1
```
6
```
## 提示

#### 样例解释

对于样例 $1$，假设 $(i,j)$ 代表第 $i$ 行第 $j$ 列，至少包含 $5$ 个黑色格子的最小子矩形的四个顶点为 $(2,4)$，$(2,5)$，$(4,4)$，$(4,5)$，共包含 $6$ 个格子。

#### 数据范围

对于全部数据，保证有 $1\le n,m\le 100$，$1\le k\le n\times m$。

| 子任务编号 | 得分 | $n,m$ |
| :--: | :--: | :--: |
| $1$ | $20$ | $\le 10$  |
| $2$ | $40$ | $n=1$，$1\le m\le 100$ |
| $3$ | $40$ | $\le 100$|

Update on 2024/7/9：添加了若干组 hack 数据，感谢 @cff_0102 的贡献。


---

---
title: "[NOIP 2012 提高组] 借教室"
layout: "post"
diff: 普及/提高-
pid: P1083
tag: ['2012', '二分', 'NOIP 提高组', '前缀和', '差分']
---
# [NOIP 2012 提高组] 借教室
## 题目描述

在大学期间，经常需要租借教室。大到院系举办活动，小到学习小组自习讨论，都需要向学校申请借教室。教室的大小功能不同，借教室人的身份不同，借教室的手续也不一样。

面对海量租借教室的信息，我们自然希望编程解决这个问题。

我们需要处理接下来 $n$ 天的借教室信息，其中第 $i$ 天学校有 $r_i$ 个教室可供租借。共有 $m$ 份订单，每份订单用三个正整数描述，分别为 $d_j,s_j,t_j$，表示某租借者需要从第 $s_j$ 天到第 $t_j$ 天租借教室（包括第 $s_j$ 天和第 $t_j$ 天），每天需要租借 $d_j$ 个教室。

我们假定，租借者对教室的大小、地点没有要求。即对于每份订单，我们只需要每天提供 $d_j$ 个教室，而它们具体是哪些教室，每天是否是相同的教室则不用考虑。

借教室的原则是先到先得，也就是说我们要按照订单的先后顺序依次为每份订单分配教室。如果在分配的过程中遇到一份订单无法完全满足，则需要停止教室的分配，通知当前申请人修改订单。这里的无法满足指从第 $s_j$ 天到第 $t_j$ 天中有至少一天剩余的教室数量不足 $d_j$ 个。

现在我们需要知道，是否会有订单无法完全满足。如果有，需要通知哪一个申请人修改订单。

## 输入格式

第一行包含两个正整数 $n,m$，表示天数和订单的数量。

第二行包含 $n$ 个正整数，其中第 $i$ 个数为 $r_i$，表示第 $i$ 天可用于租借的教室数量。

接下来有 $m$ 行，每行包含三个正整数 $d_j,s_j,t_j$，表示租借的数量，租借开始、结束分别在第几天。

每行相邻的两个数之间均用一个空格隔开。天数与订单均用从 $1$ 开始的整数编号。
## 输出格式

如果所有订单均可满足，则输出只有一行，包含一个整数 $0$。否则（订单无法完全满足）

输出两行，第一行输出一个负整数 $-1$，第二行输出需要修改订单的申请人编号。

## 样例

### 样例输入 #1
```
4 3 
2 5 4 3 
2 1 3 
3 2 4 
4 2 4
```
### 样例输出 #1
```
-1 
2
```
## 提示

【输入输出样例说明】

第 $1 $份订单满足后，$4 $天剩余的教室数分别为 $0,3,2,3$。第 $2$ 份订单要求第 $2 $天到第 $4$ 天每天提供 $3$ 个教室，而第 $3$ 天剩余的教室数为$ 2$，因此无法满足。分配停止，通知第 $2$ 个申请人修改订单。

【数据范围】

对于 $10\%$ 的数据，有 $1\le n,m\le 10$；

对于 $30\%$ 的数据，有 $1\le n,m\le 1000$；

对于 $70\%$ 的数据，有 $1 \le n,m \le 10^5$；

对于 $100\%$ 的数据，有 $1 \le n,m \le 10^6$，$0 \le r_i,d_j\le 10^9$，$1 \le s_j\le t_j\le n$。


NOIP 2012 提高组 第二天 第二题

2022.2.20 新增一组 hack 数据


---

---
title: "【MX-J3-T2】 Substring"
layout: "post"
diff: 普及/提高-
pid: P10995
tag: ['二分', '梦熊比赛']
---
# 【MX-J3-T2】 Substring
## 题目背景

原题链接：<https://oier.team/problems/J3C>。
## 题目描述

你有一个数列 $a$，**其中 $1\sim n$ 各出现了一次**。

当你任意选一对 $1\le l\le r\le n$，并将 $a_l,a_{l+1},\ldots,a_r$ 排成一行，你就得到了 $a$ 的一个子串，记为 $a_{l\sim r}$，称 $l$ 为左端点，$r$ 为右端点。

你需要把 $a$ 所有子串按字典序从小到大排序。但是为了避免输出量过大，我会给出 $q$ 个问题，每次给出一个 $k$，求字典序第 $k$ 小的子串左右端点。

---

如果你不知道什么是字典序，看这里：

对于两个数列 $p,q$，称 $p$ 的字典序小于 $q$（记为 $p<q$），当且仅当存在**自然数** $k$ 使 $p,q$ 的前 $k$ 个数相同且 $p_{k+1}<q_{k+1}$。

特别地，若 $p$ 是 $q$ 的前缀且 $p\ne q$，也认为 $p$ 的字典序小于 $q$。

例如：
- $[1,2]<[3,2]$（当 $k=0$）
- $[3,1,100]<[3,2,1]$（当 $k=1$）
- $[3,4]<[3,4,6]$（$p$ 是 $q$ 前缀）
## 输入格式

输入的第一行有两个正整数 $n,q$ 表示序列长度和询问个数。

第二行有 $n$ 个正整数 $a_1,a_2,\ldots,a_n$，表示这个数列。

之后有 $q$ 行，每行有一个正整数 $k$，表示要求的子串的排名。
## 输出格式

对于每个问题，输出一行两个整数 $l,r$，表示字典序第 $k$ 小的子串是 $a_{l\sim r}$。
## 样例

### 样例输入 #1
```
3 6
3 1 2
1
2
3
4
5
6

```
### 样例输出 #1
```
2 2
2 3
3 3
1 1
1 2
1 3

```
### 样例输入 #2
```
50 25
42 22 27 8 44 11 14 31 37 10 48 15 12 40 13 4 25 9 19 5 2 18 6 1 32 3 38 33 43 34 46 47 23 35 21 20 45 39 50 7 36 17 24 29 16 30 49 26 28 41
1178
991
755
1094
689
132
671
635
421
659
448
334
327
213
1206
453
1160
583
388
781
150
692
23
1162
62

```
### 样例输出 #2
```
37 48
27 44
3 28
1 46
43 47
20 34
33 37
2 19
15 44
2 43
7 27
6 31
6 24
4 29
32 37
7 32
5 44
19 47
13 47
44 45
23 24
43 50
24 46
5 46
26 30

```
## 提示

**【样例解释 #1】**

数列 $3,1,2$ 共有 $6$ 个子串，从小到大排序的结果为：$[1],[1,2],[2],[3],[3,1],[3,1,2]$。

**【数据范围】**

|测试点编号|$n\le$|$q\le$|特殊性质|
|:-:|:-:|:-:|:-:|
|$1\sim 3$|$200$|$200$||
|$4\sim 7$|$1000$|$3\times 10^5$||
|$8\sim 9$|$3000$|$3\times 10^5$||
|$10\sim 13$|$3\times 10^5$|$10$||
|$14\sim 15$|$3\times 10^5$|$3\times 10^5$|$a_i=i$|
|$16\sim 20$|$3\times 10^5$|$3\times 10^5$||

对于全体数据，保证 $1\le n,q\le 3\times 10^5$，$1\le k\le \dfrac{n(n+1)}{2}$，$a_i$ 中 $1\sim n$ 各有一个，输入皆为整数。


---

---
title: "修复公路"
layout: "post"
diff: 普及/提高-
pid: P1111
tag: ['二分', '并查集', '排序']
---
# 修复公路
## 题目背景

A 地区在地震过后，连接所有村庄的公路都造成了损坏而无法通车。政府派人修复这些公路。
## 题目描述

给出 A 地区的村庄数 $N$，和公路数 $M$，公路是双向的。并告诉你每条公路的连着哪两个村庄，并告诉你什么时候能修完这条公路。问最早什么时候任意两个村庄能够通车，即最早什么时候任意两条村庄都存在至少一条修复完成的道路（可以由多条公路连成一条道路）。
## 输入格式

第 $1$ 行两个正整数 $N,M$。

下面 $M$ 行，每行 $3$ 个正整数 $x,y,t$，告诉你这条公路连着 $x,y$ 两个村庄，在时间 $t$ 时能修复完成这条公路。
## 输出格式

如果全部公路修复完毕仍然存在两个村庄无法通车，则输出 $-1$，否则输出最早什么时候任意两个村庄能够通车。
## 样例

### 样例输入 #1
```
4 4
1 2 6
1 3 4
1 4 5
4 2 3
```
### 样例输出 #1
```
5
```
## 提示

$1\leq x, y\leq N \le 10 ^ 3$，$1\leq M, t \le 10 ^ 5$。


---

---
title: "[JOIG 2024] たくさんの数字 / Many Digits"
layout: "post"
diff: 普及/提高-
pid: P11201
tag: ['二分', '2024', 'O2优化', 'JOI（日本）']
---
# [JOIG 2024] たくさんの数字 / Many Digits
## 题目描述

JOI 高中的 Aoi 决定在 $N\times N$ 的表格中写下 $N^2$ 个非负整数。具体地，给定两个长度为 $N$ 的序列 $A,B$，她会在第 $i$ 行第 $j$ 列的格子上写下 $A_i+B_j$。

Aoi 想知道写出这些数需要多少个字符。也就是说，你需要求出写出的 $N^2$ 个整数在十进制下的位数的和。
## 输入格式

第一行输入一个整数 $N$。

第二行输入 $N$ 个整数 $A_1,A_2,\ldots,A_N$。

第三行输入 $N$ 个整数 $B_1,B_2,\ldots,B_N$。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
3
97 79 7
20 2 21
```
### 样例输出 #1
```
20
```
### 样例输入 #2
```
4
8 97 996 9995
1 2 3 4

```
### 样例输出 #2
```
46
```
### 样例输入 #3
```
1
500000000
500000000
```
### 样例输出 #3
```
10
```
### 样例输入 #4
```
7
436981378 523812834 456708479 413571178 506402783 598271009 523936624
401203104 501634329 506090236 527167431 485527116 439442403 568364549
```
### 样例输出 #4
```
463
```
## 提示

#### 【样例解释 #1】

|$+$|$\textbf{20}$|$\textbf{2}$|$\textbf{21}$|
|:-:|:-:|:-:|:-:|
|$\textbf{97}$|$117$|$99$|$118$|
|$\textbf{79}$|$99$|$81$|$100$|
|$\textbf{7}$|$27$|$9$|$28$|

未加粗字体为 Aoi 填写的内容。

例如，第 $1$ 行第 $1$ 列的方格中的整数为 $A_1 + B_1 = 97 + 20 = 117$，位数为 $3$。第 $3$ 行第 $2$ 列的方格中的整数为 $A_3 + B_2 = 7 + 2 = 9$，位数为 $1$。

$9$ 个数的位数分别为 $3, 2, 3, 2, 2, 3, 2, 1, 2$，故位数之和为 $3 + 2 + 3 + 2 + 2 + 3 + 2 + 1 + 2 = 20$。

该样例满足子任务 $2,3,8$ 的限制。

#### 【样例解释 #2】

|$+$|$\textbf{1}$|$\textbf{2}$|$\textbf{3}$|$\textbf{4}$|
|:-:|:-:|:-:|:-:|:-:|
|$\textbf{8}$|$9$|$10$|$11$|$12$|
|$\textbf{97}$|$98$|$99$|$100$|$101$|
|$\textbf{996}$|$997$|$998$|$999$|$1000$|
|$\textbf{9995}$|$9996$|$9997$|$9998$|$9999$|

未加粗字体为 Aoi 填写的内容。

例如，第 $2$ 行第 $3$ 列的方格中的整数为 $A_2 + B_3 = 97 + 3 = 100$，位数为 $3$。第 $4$ 行第 $2$ 列的方格中的整数为 $A_4 + B_2 = 9995 + 2 = 9997$，位数为 $4$。

可以得出答案为 $46$。

该样例满足子任务 $2,6,7,8$ 的限制。

#### 【样例解释 #3】

方格中仅有一个整数 $10^9$，位数为 $10$，故位数之和为 $10$。

该样例满足子任务 $1,2,4,5,8$ 的限制。

#### 【样例解释 #4】

该样例满足子任务 $2,5,8$ 的限制。

#### 【数据范围】

- $1\le N\le 1.5\times 10^5$；
- $1\le A_i\le 999,999,999(1\le i\le N)$；
- $1\le B_j\le 999,999,999(1\le j\le N)$。

#### 【子任务】

1. （$5$ 分）$N=1$；
2. （$11$ 分）$N\le 2000$；
3. （$15$ 分）$A_i\le 2000(1\le i\le N)$，$B_j\le 2000(1\le j\le N)$；
4. （$8$ 分）$10^8\le A_i\le 5\times 10^8(1\le i\le N)$，$10^8\le B_j\le 5\times 10^8(1\le j\le N)$；
5. （$22$ 分）$10^8\le A_i(1\le i\le N)$，$10^8\le B_j(1\le j\le N)$；
6. （$12$ 分）$A_i\le 1.5\times 10^5(1\le i\le N)$，$B_j = j(1\le j\le N)$；
7. （$13$ 分）$B_j=j(1\le j\le N)$；
8. （$14$ 分）无附加限制。


---

---
title: "【MX-X7-T2】[LSOT-3] 姬誉蛙"
layout: "post"
diff: 普及/提高-
pid: P11561
tag: ['二分', 'O2优化', '梦熊比赛']
---
# 【MX-X7-T2】[LSOT-3] 姬誉蛙
## 题目背景

原题链接：<https://oier.team/problems/X7C>。

姬誉蛙——每十六年在陆地上出现一次的 奇迹般的青蛙

呱…呱呱呱呱…

快把门打开啊 呱呱
## 题目描述

Ringo 为了解除姬誉蛙的诅咒需要做出由 Tabuki 出的一道题。

定义一个 $01$ 串的权值为这个串中 $0$ 的数量与 $1$ 的数量的乘积。

给你一个长度为 $n$ 的 $01$ 串。你想知道将整个串恰好划分为 $k$ 个连续子串后，这 $k$ 个子串的最大权值最小可以是多少。
## 输入格式

第一行，两个正整数 $n, k$。

第二行，一个长度为 $n$ 的 $01$ 串。
## 输出格式

仅一行，一个整数，表示最大权值最小可以是多少。
## 样例

### 样例输入 #1
```
9 2
100000001
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
18 3
100000010101001000
```
### 样例输出 #2
```
6
```
## 提示

**【样例解释 #1】**

分成的两段分别为 `10000` 和 `0001`。第一段的权值为 $4\times 1=4$，第二段的权值为 $3\times 1=3$，最大值为 $4$。

可以证明不存在使得最大权值更小的方案。需要注意的是，`1000` 和 `00001` 也是一个最大权值为 $4$ 的方案。

**【样例解释 #2】**

可以分成三段 `1000000`、`10101`、`001000`，最大权值为第二段的 $2\times 3=6$。

**【数据范围】**

对于 $15\%$ 的数据，$n\le 20$。

对于 $40\%$ 的数据，$n\le 5000$。

对于另外 $10\%$ 的数据，串中仅含有 $0$。

对于全部的数据，$1\le k\le n\le 10^6$，串中仅含 $0$ 或 $1$。


---

---
title: "数列分段 Section II"
layout: "post"
diff: 普及/提高-
pid: P1182
tag: ['贪心', '二分', '前缀和']
---
# 数列分段 Section II
## 题目描述

对于给定的一个长度为 $N$ 的正整数数列 $A_{1\sim N}$，现要将其分成 $M$（$M\leq N$）段，并要求每段连续，且每段和的最大值最小。

关于最大值最小：

例如一数列 $4\ 2\ 4\ 5\ 1$ 要分成 $3$ 段。

将其如下分段：

$$[4\ 2][4\ 5][1]$$

第一段和为 $6$，第 $2$ 段和为 $9$，第 $3$ 段和为 $1$，和最大值为 $9$。

将其如下分段：

$$[4][2\ 4][5\ 1]$$

第一段和为 $4$，第 $2$ 段和为 $6$，第 $3$ 段和为 $6$，和最大值为 $6$。

并且无论如何分段，最大值不会小于 $6$。

所以可以得到要将数列 $4\ 2\ 4\ 5\ 1$ 要分成 $3$ 段，每段和的最大值最小为 $6$。

## 输入格式

第 $1$ 行包含两个正整数 $N,M$。  

第 $2$ 行包含 $N$ 个空格隔开的非负整数 $A_i$，含义如题目所述。

## 输出格式

一个正整数，即每段和最大值最小为多少。

## 样例

### 样例输入 #1
```
5 3
4 2 4 5 1
```
### 样例输出 #1
```
6
```
## 提示

对于 $20\%$ 的数据，$N\leq 10$。

对于 $40\%$ 的数据，$N\leq 1000$。

对于 $100\%$ 的数据，$1\leq N\leq 10^5$，$M\leq N$，$A_i < 10^8$， 答案不超过 $10^9$。



---

---
title: "[TOIP 2023] 裁員風暴"
layout: "post"
diff: 普及/提高-
pid: P11849
tag: ['二分', '2023', '双指针 two-pointer', '台湾']
---
# [TOIP 2023] 裁員風暴
## 题目描述

孫執行長任職於美味蛋糕股份有限公司，
因為今年財報不如預期股東寄了公開信呼應公司能刪減成本，
孫執行長決定要讓公司一些夥伴走自己的路。

孫執行長列出 $n$ 個公司目標，
並請員工們各自從 $n$ 個公司目標挑 $1$ 個或 $2$ 個他們認為最重要的目標，
做出相同選擇的員工會被分類到同一個**小組**。
已知每種可能的目標組合都至少有一位員工選擇，
可以計算出恰選擇 $1$ 個目標的小組有 $n$ 組，恰選擇 $2$ 個目標的小組有 $\frac{n(n-1)}{2}$ 組，
合計共有 $n + \frac{n(n-1)}{2} = \frac{n(n+1)}{2}$ 個小組。

透過 AI 大數據分析，每個公司目標都被 AI 賦予一個權重，這裡用 $w_i$ 來表示第 $i$ 的公司目標的權重。
並且我們可以用一個 $01$-序列 $y$ 序列：$y_1, y_2, \cdots, y_n$ 來表示一個小組所選擇的目標，
有選擇第 $i$ 個公司目標則 $y_i = 1$，否則 $y_i = 0$。
AI 定義**裁指數**為：

$$\left( \dfrac{\displaystyle \sum_{i=1}^{n}w_i\times y_i}{\displaystyle \sum_{j=1}^{n} y_j} \right)$$

孫執行長決定把所有小組的裁指數排名，如果一個人所屬於**裁指數前 $k$ 大的小組**就予以開除。

想請你幫忙孫執行長找出排序後第 $k$ 大的裁指數。

例如：$n=3$ 而 $k=4$，
$w_1=5, w_2=-2, w_3=3$，
會有 $\dfrac{3(3+1)}{2} = 6$ 個小組，
每個小組的裁指數如下表 :

|$y_1$|$y_2$|$y_3$|裁指數                 |
|:---:|:---:|:---:|:------------------------------|
| $0$ | $0$ | $1$ |$(0+0+3)/(0+0+1) =           3$|
| $0$ | $1$ | $0$ |$(0-2+0)/(0+1+0) =          -2$|
| $0$ | $1$ | $1$ |$(0-2+3)/(0+1+1) = \frac{1}{2}$|
| $1$ | $0$ | $0$ |$(5+0+0)/(1+0+0) =           5$|
| $1$ | $0$ | $1$ |$(5+0+3)/(1+0+1) =           4$|
| $1$ | $1$ | $0$ |$(5-2+0)/(1+1+0) = \frac{3}{2}$|

裁指數排序後為 $-2, \frac{1}{2}, \frac{3}{2}, 3, 4, 5$，
並且第 $4$ 大為 $\frac{3}{2}$。
（備註：如果裁指數排名第 $k$ 大和第 $k+1$ 大的裁指數相等，
那孫執行長會另外想方法決定裁員名單，不需替他擔心）
## 样例

### 样例输入 #1
```
3 4
5 -2 3
```
### 样例输出 #1
```
3
2
```
### 样例输入 #2
```
3 3
5 -2 3
```
### 样例输出 #2
```
3
1
```
### 样例输入 #3
```
9 45
5 -1 2 -3 6 -9 7 3 2
```
### 样例输出 #3
```
-9
1
```


---

---
title: "[蓝桥杯 2025 省 C/Python A] 倒水"
layout: "post"
diff: 普及/提高-
pid: P12167
tag: ['二分', '2025', '蓝桥杯省赛']
---
# [蓝桥杯 2025 省 C/Python A] 倒水
## 题目描述

小蓝有 $n$ 个装了水的瓶子，从左到右摆放，第 $i$ 个瓶子里装有 $a_i$ 单位的水。为了美观，小蓝将水循环染成了 $k$ 种颜色，也就是说，第 $i$ 个瓶子和第 $i + k$ 个瓶子里的水的颜色相同。

小蓝发现有的瓶子里的水太少了，因此他规定如果第 $i$ 个瓶子和第 $j$ 个瓶子中的水颜色相同并且满足 $i < j$，即可将任意整数单位的水从第 $i$ 个水瓶倒出，倒入第 $j$ 个水瓶中。小蓝想知道任意次操作后所有瓶子中的水的最小值 $\min\{a_i\}$ 最大可以是多少？
## 输入格式

输入的第一行包含两个正整数 $n, k$，用一个空格分隔。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
7 3
8 5 5 2 2 3 4
```
### 样例输出 #1
```
3
```
## 提示

### 样例说明

其中一种方案：
- $a_1$ 往 $a_4$ 倒入 $3$ 单位；
- $a_2$ 往 $a_5$ 倒入 $2$ 单位；
- $a_3$ 往 $a_6$ 倒入 $1$ 单位；
最终每个瓶子里的水：$5, 3, 4, 5, 4, 4, 4$，最小值为 $3$。

### 评测用例规模与约定

- 对于 $40\%$ 的评测用例，$1 \leq n, a_i \leq 100$；
- 对于所有评测用例，$1 \leq n, a_i \leq 100000$，$1 \leq k \leq n$。


---

---
title: "[蓝桥杯 2024 国 Python B] 切木棒"
layout: "post"
diff: 普及/提高-
pid: P12269
tag: ['二分', '2024', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Python B] 切木棒
## 题目描述

给定 $n$ 根木棒，第 $i$ 根木棒的长度为 $L_i$。

每次你可以选择任意一根木棒并将其切成两段，切完后两段的长度都必须为整数。

请问，如果一共切 $m$ 次，在所有的方案中，切完后木棒中最长的一根最短是多少？
## 输入格式

输入的第一行包含两个整数 $n, m$，用一个空格分隔。

第二行包含 $n$ 个正整数 $L_1, L_2, \ldots, L_n$，依次表示每根木棍的长度。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3 3
3 4 6
```
### 样例输出 #1
```
3
```
## 提示

### 评测用例规模与约定

- 对于 $60\%$ 的评测用例，$n \leq 5000$；
- 对于所有评测用例，$1 \leq n \leq 3 \times 10^5$，$1 \leq m, L_i \leq 10^9$。


---

---
title: "[蓝桥杯 2022 省 Python B] 技能升级"
layout: "post"
diff: 普及/提高-
pid: P12370
tag: ['数学', '二分', '2022', '蓝桥杯省赛']
---
# [蓝桥杯 2022 省 Python B] 技能升级
## 题目描述

小蓝最近正在玩一款 RPG 游戏。他的角色一共有 $N$ 个可以加攻击力的技能。其中第 $i$ 个技能首次升级可以提升 $A_i$ 点攻击力，以后每次升级增加的点数都会减少 $B_i$。$\lceil\frac{A_i}{B_i}\rceil$（上取整）次之后，再升级该技能将不会改变攻击力。

现在小蓝可以总计升级 $M$ 次技能，他可以任意选择升级的技能和次数。请你计算小蓝最多可以提高多少点攻击力？
## 输入格式

输入第一行包含两个整数 $N$ 和 $M$。

以下 $N$ 行每行包含两个整数 $A_i$ 和 $B_i$。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3 6
10 5
9 2
8 1
```
### 样例输出 #1
```
47
```
## 提示

### 评测用例规模与约定

- 对于 $40\%$ 的评测用例, $1 \leq N, M \leq 1000$;
- 对于 $60\%$ 的评测用例, $1 \leq N \leq 10^4$, $1 \leq M \leq 10^7$;
- 对于所有评测用例, $1 \leq N \leq 10^5$, $1 \leq M \leq 2 \times 10^9$, $1 \leq A_i, B_i \leq 10^6$。


---

---
title: "[蓝桥杯 2023 省 Python B] 管道"
layout: "post"
diff: 普及/提高-
pid: P12380
tag: ['二分', '2023', '蓝桥杯省赛']
---
# [蓝桥杯 2023 省 Python B] 管道
## 题目描述

有一根长度为 $len$ 的横向的管道，该管道按照单位长度分为 $len$ 段，每一段的中央有一个可开关的阀门和一个检测水流的传感器。

一开始管道是空的，位于 $L_i$ 的阀门会在 $S_i$ 时刻打开，并不断让水流入管道。

对于位于 $L_i$ 的阀门，它流入的水在 $T_i (T_i \geq S_i)$ 时刻会使得从第 $L_i - (T_i - S_i)$ 段到第 $L_i + (T_i - S_i)$ 段的传感器检测到水流。

求管道中每一段中间的传感器都检测到有水流的最早时间。
## 输入格式

输入的第一行包含两个整数 $n, len$，用一个空格分隔，分别表示会打开的阀门数和管道长度。

接下来 $n$ 行每行包含两个整数 $L_i, S_i$，用一个空格分隔，表示位于第 $L_i$ 段管道中央的阀门会在 $S_i$ 时刻打开。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3 10
1 1
6 5
10 2
```
### 样例输出 #1
```
5
```
## 提示

### 评测用例规模与约定

- 对于 $30\%$ 的评测用例，$n \leq 200$，$S_i, len \leq 3000$；
- 对于 $70\%$ 的评测用例，$n \leq 5000$，$S_i, len \leq 10^5$；
- 对于所有评测用例，$1 \leq n \leq 10^5$，$1 \leq S_i, len \leq 10^9$，$1 \leq L_i \leq len$，$L_{i-1} < L_i$。


---

---
title: "「YLLOI-R1-T2」圣诞星"
layout: "post"
diff: 普及/提高-
pid: P12413
tag: ['贪心', '二分', '洛谷原创', 'O2优化', '排序', '洛谷月赛']
---
# 「YLLOI-R1-T2」圣诞星
## 题目背景

![圣诞星](bilibili:BV14Q4y137d1)
## 题目描述

小 Y 在商店里一共要买 $n$ 个商品，第 $i$ 个要买的商品价格为 $a_i$ 元。

在买这些商品前，小 Y 可以买任意多张优惠券，对于每一张优惠券，其价格为 $w$ 元。每有一张优惠券，在买任何商品时可以优惠 $1$ 元，但任何一个商品最低只能优惠到 $0$ 元。（优惠券不算商品）

在付钱过程中，每付完一个商品的钱，小 Y 还能再获得一张优惠券。

现在小 Y 想知道，最少需要多少钱才可以买完自己要买的商品。

注：所有的优惠券都是永久性的。
## 输入格式

第一行两个整数 $n,w$。

第二行 $n$ 个整数 $a_i$。
## 输出格式

一个整数，表示小 Y 买完所有自己要买的商品所需的最少钱数。
## 样例

### 样例输入 #1
```
4 3
3 4 5 5
```
### 样例输出 #1
```
9
```
### 样例输入 #2
```
4 3
4 4 3 3
```
### 样例输出 #2
```
7
```
## 提示

#### 【样例解释#1】

下面展示一种最优方案。

先购买 $3$ 张优惠券，花费 $3\times 3=9$ 元。

接下来使用 $0$ 元购买第 $1$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $2$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $3$ 个要买的商品（$5$ 张优惠券优惠了 $5$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $4$ 个要买的商品（$6$ 张优惠券优惠了 $5$ 元，因为任何一个商品最低只能优惠到 $0$ 元），并再获得一张优惠券。

因此一共花费 $9+0+0+0+0=9$ 元。

#### 【样例解释#2】

下面展示一种最优方案。

先购买 $1$ 张优惠券，花费 $1\times 3=3$ 元。

接下来使用 $2$ 元购买第 $4$ 个要买的商品（$1$ 张优惠券优惠了 $1$ 元），并再获得一张优惠券。

接下来使用 $1$ 元购买第 $3$ 个要买的商品（$2$ 张优惠券优惠了 $2$ 元），并再获得一张优惠券。

接下来使用 $1$ 元购买第 $2$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $1$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。

因此一共花费 $3+2+1+1+0=7$ 元。

#### 【数据范围】

**本题采用捆绑测试。**

- Subtask 1（10 pts）：$\forall a_i=i$。
- Subtask 2（10 pts）：$w=1$。
- Subtask 3（20 pts）：$n,a_i,w\le 10$。
- Subtask 4（30 pts）：$n,a_i,w\le 1000$。
- Subtask 5（30 pts）：无特殊限制。

对于全部数据，保证：$1\le n\le 10^5$，$1\le a_i,w\le 10^9$。


---

---
title: "「MSTOI-R1」热开水"
layout: "post"
diff: 普及/提高-
pid: P12519
tag: ['二分', '洛谷原创', '洛谷比赛']
---
# 「MSTOI-R1」热开水
## 题目背景

小 M 最近在玩一款新游戏，$rks$ 是这款游戏中评判玩家实力的数值。$rks$ 分为单曲 $rks$ 和总 $rks$，它们都是两位小数。

游玩一首曲子后，会获得一个评分  $acc$（即准度），以百分比的形式表现。
## 题目描述

每首曲子都有一个难度定数。当一个曲的 $acc\ge 70\%$ 时，这个曲才会计算 $rks$，否则该曲 $rks$ 为 $0$。单曲 $rks=[\frac{(100\times acc-55)}{45}]^2\times$ 难度定数 。

如果一个曲你游玩了多次，那么这个曲的单曲 $rks$ 会保留最高的一次。总 $rks=$ 最大的 $4$ 个单曲 $rks$ 和 $acc$ 为 $100\%$ 的曲里面最大的单曲 $rks$（如果没有 $acc$ 为 $100\%$ 的曲子则将这一项的值视为 $0$）这 $5$ 个单曲 $rks$ 的平均值。

为了方便表示和计算，单曲 $rks$ 和总 $rks$ 都应保留 $2$ 位小数（非四舍五入）。

小 M 有 $n$ 首曲子可以玩，对于第 $i$ 首曲子，难度定数为 $c_i$，小 M 第 $1$ 天玩的 $acc$ 可以达到 $a_i\%$，第 $k$ 天可以达到 $min(100\%,a_i\%+(k-1)\times b_i\%)$。小 M 每天都会游玩这 $n$ 首曲子，请问小 M 最早在第几天总 $rks$ 可以 $\ge m$。
## 输入格式

第一行输入一个正整数 $n$ 和一个小数 $m$。

接下来 $n$ 行，每行输入三个小数 $a_i$，$b_i$，$c_i$。

接下来一行输入 $5$ 个小数 $d_i$，前 $4$ 个是小 M 最大的 $4$ 个单曲 $rks$，最后一个是小 M $acc$ 为 $100\%$ 的曲里面最大的单曲 $rks$。请注意，这 $5$ 个单曲 $rks$ 所属的歌曲全部都不是上面所输入的 $n$ 首，另外，你可以将它们视为小 M 在第 $0$ 天的成绩。
## 输出格式

一行输出一个整数，表示小 M 最早在第几天总 $rks$ 可以 $\ge m$。如果不能做到，请输出 `-1`。
## 样例

### 样例输入 #1
```
3 8.31
70.00 10.00 9.50
60.00 40.00 9.00
50.00 10.00 9.10
8.00 0.00 9.00 8.00 9.00
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3 11.00
70.00 10.00 9.50
100.00 10.00 9.00
50.00 10.00 9.10
15.10 15.10 15.10 15.10 15.10
```
### 样例输出 #2
```
0
```
## 提示

数据保证**输入的小数都是两位小数**。注意**计算过程中的所有小数您都应该保留两位小数（非四舍五入）**（例如包括计算单曲 $rks$ 时 $\div 45$ 之后，也要保留 $2$ 位小数再继续计算），否则可能会与答案存在偏差。

建议您使用下面这段代码进行保留两位小数：

```cpp
double retain2(double x)
{
	int y;
	double z;
	x*=100;
	y=x;
	z=y/100.0;
	return z;
}
```

对于 $100\%$ 的数据，$1\le n\le10^5$，$0\le m\le17$，$0\le a_i\le100$，$0.01\le b_i\le100$，$1\le c_i\le17$，$0\le d_i\le17$。

测试点|特殊性质
---|---
$1\sim3$|$n\le100$
$4$|$m=0$
$5$|$d_i=0$
$6\sim10$|$n\le10^3$
$11\sim15$|$n\le10^4$
$16\sim20$|无


---

---
title: "[KOI 2023 Round 1] 道具获取"
layout: "post"
diff: 普及/提高-
pid: P12656
tag: ['二分', '2023', '前缀和', 'KOI（韩国）']
---
# [KOI 2023 Round 1] 道具获取
## 题目背景

试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。

按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。
## 题目描述

你正在开发一款游戏，玩家将在二维地图中驾驶汽车收集道具。

地图上有 $N$ 个可以获取道具的箱子。第 $i$ 个箱子的位置是 $(x_i, y_i)$，每当汽车经过这个位置时，可以获得 $w_i$ 个道具。

汽车只能沿与 x 轴或 y 轴平行的方向移动。汽车的每次移动通过两个整数 $d$ 和 $v$ 来表示：

- 若 $d = 0$，表示 x 坐标增加 $v$；
- 若 $d = 1$，表示 y 坐标增加 $v$；
- 若 $d = 2$，表示 x 坐标减少 $v$；
- 若 $d = 3$，表示 y 坐标减少 $v$。

此时，位于起点位置的箱子不能获取道具。换句话说，如果汽车从 $(s_x, s_y)$ 移动到 $(e_x, e_y)$，则不能获取 $(s_x, s_y)$ 位置的箱子的道具，但可以获取 $(e_x, e_y)$ 位置的箱子的道具。

汽车从 $(1, 1)$ 开始，接下来会移动 $Q$ 次。给出汽车的移动方向和距离，计算 $Q$ 次移动过程中能够获得的道具总数。
## 输入格式

第一行包含两个用空格分隔的整数 $N$ 和 $Q$，分别表示箱子的数量和汽车的移动次数。

接下来的 $N$ 行中，每行包含三个整数 $x_i$、$y_i$、$w_i$，表示第 $i$ 个箱子的位置在 $(x_i, y_i)$，且经过该位置可以获得 $w_i$ 个道具。

接下来的 $Q$ 行中，每行包含两个整数 $d_j$、$v_j$，表示汽车向方向 $d_j$ 移动距离 $v_j$。
## 输出格式

输出一行，表示 $Q$ 次移动过程中能获得的道具总数。
## 样例

### 样例输入 #1
```
4 6
5 5 3
5 8 5
3 5 2
1 5 1
0 4
1 9
3 5
2 3
2 1
0 5
```
### 样例输出 #1
```
24
```
### 样例输入 #2
```
3 3
1 3 1
2 2 1
3 1 1
1 3
0 2
3 3
```
### 样例输出 #2
```
2
```
## 提示

**样例 1 说明**

如图所示，每次移动都会获得绿色标记的物品。

![](https://cdn.luogu.com.cn/upload/image_hosting/33bp5q6s.png)

**限制条件**

- 所有输入数值均为整数。
- $1 \leq N \leq 200\,000$
- $1 \leq Q \leq 200\,000$
- $1 \leq x_i \leq 200\,000$
- $1 \leq y_i \leq 200\,000$
- $1 \leq w_i \leq 200\,000$
- $0 \leq d_j \leq 3$
- $1 \leq v_j \leq 200\,000$
- 所有箱子的位置彼此不同。
- 汽车在任意时刻的 x、y 坐标都在 $[1, 200\,000]$ 范围内。

**子问题**

1. （9 分）$N \leq 2\,000$，$Q \leq 2\,000$，$x_i \leq 1\,000$，$y_i \leq 1\,000$，$w_i \leq 10$，汽车所有时刻的坐标 $\leq 1\,000$
2. （17 分）$N \leq 2\,000$，$Q \leq 2\,000$，$w_i \leq 10$
3. （15 分）所有箱子的 x 坐标互不相同，且 y 坐标也互不相同。
4. （37 分）所有 $w_i = 1$
5. （22 分）无额外限制。

翻译由 ChatGPT-4o 完成


---

---
title: "[KOI 2021 Round 2] 累计距离"
layout: "post"
diff: 普及/提高-
pid: P12725
tag: ['二分', '2021', '前缀和', 'KOI（韩国）']
---
# [KOI 2021 Round 2] 累计距离
## 题目背景

试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。

按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。
## 题目描述

KOI 国是一个由 $N$ 个村庄构成的国家，这些村庄分布在数轴上。其中第 $i$ 个村庄（$1 \leq i \leq N$）位于位置 $x_i$，并有 $a_i$ 名居民。不会有两个不同村庄位于相同的位置。

KOI 国计划召开一场所有国民都要参加的大会。为此，所有人需要前往会议举办地点，所有人前往该地点所需的移动距离之和称为“累计距离”，我们用 $f(x)$ 表示当会议举办地点为 $x$ 时的累计距离。

住在第 $i$ 个村庄的人前往位置为 $x$ 的会议地点时，需要移动的距离为 $|x_i - x|$。由于第 $i$ 个村庄有 $a_i$ 名居民，因此该村居民所需的总移动距离为 $a_i \times |x_i - x|$。

将所有村庄的该值加总，即可得到在位置 $x$ 举办会议时的累计距离：

$$
f(x) = \sum_{i=1}^{N} a_i \times |x_i - x|
$$

例如，若村庄的位置为 $x_1 = 1$、$x_2 = 3$、$x_3 = 6$，各村庄的居民数分别为 $a_1 = 2$、$a_2 = 1$、$a_3 = 3$，当会议地点为 $x = 4$ 时，累计距离为：

$$
f(4) = 2 \times |1 - 4| + 1 \times |3 - 4| + 3 \times |6 - 4| = 13
$$

KOI 国已经准备了 $Q$ 个会议地点候选位置。第 $j$ 个候选位置（$1 \leq j \leq Q$）为 $q_j$。多个候选位置之间不会重复，但候选位置可能与某个村庄位置相同。

请编写程序，计算每一个候选会议地点 $q_j$ 的累计距离 $f(q_j)$。
## 输入格式

第一行包含两个整数 $N$ 和 $Q$，用一个空格隔开。

接下来的 $N$ 行，每行包含两个整数 $a_i$ 和 $x_i$，表示每个村庄的居民人数及其位置。

接下来的 $Q$ 行，每行一个整数 $q_j$，表示一个候选会议地点的位置。
## 输出格式

输出 $Q$ 行。第 $j$ 行输出会议地点为 $q_j$ 时的累计距离 $f(q_j)$。

## 样例

### 样例输入 #1
```
3 1
2 1
1 3
3 6
4
```
### 样例输出 #1
```
13
```
### 样例输入 #2
```
4 5
3 -4
1 -10
2 11
4 6
6
-5
1
-12
14
```
### 样例输出 #2
```
56
84
66
144
116
```
## 提示

**约束条件**

- $1 \leq N \leq 200\,000$
- 对于所有 $i$（$1 \leq i \leq N$），$1 \leq a_i \leq 1\,000$
- 对于所有 $i$，$-10^9 \leq x_i \leq 10^9$
- $1 \leq Q \leq 200\,000$
- 对于所有 $j$，$-10^9 \leq q_j \leq 10^9$
- 对任意 $1 \leq i_1 < i_2 \leq N$，$x_{i_1} \ne x_{i_2}$（村庄位置各不相同）
- 对任意 $1 \leq j_1 < j_2 \leq Q$，$q_{j_1} \ne q_{j_2}$（候选位置各不相同）
- 所有给定数值均为整数

**子任务**

1. （9 分）$N,Q \leq 5\,000$
2. （21 分）对所有 $i$，满足 $1 \leq x_i \leq 200\,000$，且对所有 $j$，满足 $1 \leq q_j \leq 200\,000$
3. （25 分）对所有 $i$，$a_i = 1$
4. （45 分）无额外约束条件


---

---
title: "磨合"
layout: "post"
diff: 普及/提高-
pid: P12733
tag: ['数学', '贪心', '二分', '2025', '洛谷原创', '排序', '前缀和', '洛谷月赛']
---
# 磨合
## 题目背景

[This](https://www.luogu.com.cn/problem/U29089) is the English statement.\
But you can only submit your solution here.

> 「能够像这样『磨合』，实在是帮了个大忙。」\
——绫濑沙季
## 题目描述

Yuuta 和 Saki 遇到了 $n$ 个问题，问题的难度为 $d_1,\dots,d_n$。

他们可以以任意顺序解决问题，对于准备解决的第 $i$ 个问题，每将难度减少 $1$，两人需要花费 $i$ 秒。将难度减少为 $0$ 时问题被解决，他们才可以继续解决下一个问题。

如果他们正在在解决第 $i$ 个问题，但剩余时间少于 $i$ 秒，他们就不能继续解决剩下的问题了，第 $i$ 个问题也没有解决。

他们想要知道，如果共有 $t$ 秒，那么最多能解决多少个问题。由于他们可能面对很多种不同情况，所以会多次改变 $t$ 进行询问。
## 输入格式

第一行输入两个整数 $n,q$ 表示问题总数和询问次数。

第二行输入 $n$ 个整数，表示 $d_1,\dots,d_n$。

接下来 $q$ 行，每行输入一个整数表示询问的总时间 $t$。
## 输出格式

对于每次询问输出一行一个整数表示最多能解决的问题数量。
## 样例

### 样例输入 #1
```
3 2
1 7 3
10
16

```
### 样例输出 #1
```
2
3

```
### 样例输入 #2
```
10 3
923 243 389 974 100 485 296 377 61 552
2403
5819
0

```
### 样例输出 #2
```
5
6
0

```
## 提示

#### 样例解释

若 $t=10$，则第 $1$ 个解决难度为 $7$ 的问题，第 $2$ 个解决难度为 $1$ 的问题，花费的时间为 $1\times7+2\times1=9$ 秒。可以证明他们无法解决三个问题。

若 $t=16$，则依次解决难度为 $7,3,1$ 的问题，花费的时间为 $1\times7+2\times3+3\times1=16$ 秒。

#### 数据范围与限制

**本题采用捆绑测试，各 Subtask 的限制与分值如下。**

| Subtask No. | $n\le$ | $q\le$ | $d_i\le$ | $t\le$ | 分值 | 依赖子任务 |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| $1$ | $10$ | $1$ | $10$ | $10^3$ | $13$ |  |
| $2$ | $10^3$ | $1$ | $10^3$ | $10^9$ | $24$ | $1$ |
| $3$ | $10^3$ | $10^6$ | $10^3$ | $10^9$ | $16$ | $1,2$ |
| $4$ | $10^6$ | $1$ | $10^3$ | $10^{16}$ | $16$ | $1,2$ |
| $5$ | $10^6$ | $10^6$ | $10^3$ | $10^{16}$ | $31$ | $1,2,3,4$ |

对于所有数据，满足 $1\le n,q\le10^6$，$1\le d_i\le10^3$，$0\le t\le10^{16}$。


---

---
title: "[蓝桥杯 2025 国 B] 子串去重"
layout: "post"
diff: 普及/提高-
pid: P12838
tag: ['字符串', '二分', '2025', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 B] 子串去重
## 题目背景

洛谷数据默认字符串由小写字母构成。
## 题目描述

给定一个字符串 $S$ 以及若干组询问，每个询问包含两个区间 $(L_a, R_a)$, $(L_b, R_b)$，你需要判定 $S_{L_a}, S_{L_a+1}, \ldots, S_{R_a}$ 与 $S_{L_b}, S_{L_b+1}, \ldots, S_{R_b}$ 去重后有多少个位置上的字符是不同的。

这里的去重指的是每个子串对于每种字符，只保留第一个出现的那个，后续出现的直接丢弃。

例如 $\tt{aabcbac}$ 在选中区间 $[1,5]$ 时，得到子串 $\tt{aabcb}$，去重后为 $\tt{abc}$，选中区间 $[3,6]$ 时得到 $\tt{bcba}$，去重后为 $\tt{bca}$。

特别地，两个长度不同的子串中，较长串的多出的部分每个位置都视为不同。
## 输入格式

输入第一行包含一个字符串 $S$。

第二行包含一个整数 $m$，表示询问次数。

接下来 $m$ 行，每行包含四个整数，表示一次询问。
## 输出格式

输出共 $m$ 行，每行一个整数对应每次询问的答案。
## 样例

### 样例输入 #1
```
aabcbabacdab
3
1 1 2 2
1 10 6 9
4 7 9 12
```
### 样例输出 #1
```
0
1
2
```
## 提示

**【评测用例规模与约定】**

对于 40% 的评测用例，$|S| \leq 10$, $m = 1$。

对于 60% 的评测用例，$|S|, m \leq 5000$。

对于 100% 的评测用例，$1 \leq |S|, m \leq 10^5$, $1 \leq L_a \leq R_a \leq |S|$, $1 \leq L_b \leq R_b \leq |S|$。


---

---
title: "[NERC 2020 Online] Miser"
layout: "post"
diff: 普及/提高-
pid: P12862
tag: ['2020', '二分', '拓扑排序', 'ICPC', 'NERC/NEERC']
---
# [NERC 2020 Online] Miser
## 题目描述

In some non-classical University, there is going to be an opening ceremony of the cafeteria in $n$ days. In front of the closed cafeteria, there is a sign with a number --- how many days are left before the opening.

For each day out of these $n$, the director of the cafeteria knows all the people who are coming to the University and are going to see the sign. The director has to choose a sign with a number each day, such that each person who is coming to the University sees that the number on the sign is decreasing. The director is a typical $\emph{miser}$ who spends as little money as possible and wants to order the minimum possible number of different signs. Your task is to help the director find this number.

Consider the first test case: person $1$ comes on days $1$, $2$ and $5$, and person $2$ comes on days $2$, $3$ and $4$. The director can order just four signs with numbers $1$, $2$, $3$ and $4$, to put a sign with $1$ on days $5$ and $4$, a sign with $2$ on day $3$, a sign with $3$ on day $2$, and a sign with $4$ on day $1$. Thus, person $1$ will see the signs $4$, $2$, and $1$ and person $2$ will see the signs $3$, $2$, and $1$.
## 输入格式

The first line of the input contains an integer $n$ --- the total number of days before the opening of the~cafeteria. The next $n$ lines contain the description of each day. The description starts with the positive integer $k$ --- the number of people that come to the University this day. This integer is followed by $k$ distinct integers --- the identifiers of the people that come.

The sum of all $k$ over all days does not exceed $10^5$. Identifiers of people are positive and do not exceed $10^5$.
## 输出格式

Output one integer --- the minimum possible number of different signs that have to be ordered.
## 样例

### 样例输入 #1
```
5
1 1
2 1 2
1 2
1 2
1 1
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5
1 1
1 1
1 1
1 1
1 1
```
### 样例输出 #2
```
5
```


---

---
title: "[GCJ Farewell Round #2] Spacious Sets"
layout: "post"
diff: 普及/提高-
pid: P12953
tag: ['递推', '二分', '2023', 'Google Code Jam']
---
# [GCJ Farewell Round #2] Spacious Sets
## 题目描述

Ada and John are best friends. Since they are getting bored, Ada asks John to solve a puzzle for her.

A set $S$ is considered *spacious* if the absolute difference between each pair of distinct elements of $S$ is at least $\mathbf{K}$, that is, $|x - y| \geq \mathbf{K}$ for all $x, y \in S$, with $x \neq y$.

Ada has a list of distinct integers $\mathbf{A}$ of size $\mathbf{N}$, and an integer $\mathbf{K}$. For each $\mathbf{A}_i$, she asks John to find the maximum size of a set $S_i$ made of elements from $\mathbf{A}$, such that $S_i$ contains $\mathbf{A}_i$ and is spacious.

Note: The sets $S_i$ do not need to be made of consecutive elements from the list.
## 输入格式

The first line of the input gives the number of test cases, $\mathbf{T}$. $\mathbf{T}$ test cases follow. The first line of each test case contains two integers $\mathbf{N}$ and $\mathbf{K}$. The next line contains $\mathbf{N}$ integers $\mathbf{A}_1 \mathbf{A}_2 \ldots \mathbf{A}_{\mathbf{N}}$.

## 输出格式

For each test case, output one line containing Case # $x$: $y_1 \ y_2 \ldots \ y_{\mathbf{N}}$, where $x$ is the test case number (starting from 1) and $y_i$ is the maximum size of a spacious set of elements from $\mathbf{A}$ that contains $\mathbf{A}_i$.
## 样例

### 样例输入 #1
```
2
3 2
1 2 3
6 4
2 7 11 19 5 3
```
### 样例输出 #1
```
Case #1: 2 1 2
Case #2: 4 4 4 4 3 4
```
## 提示

**Sample Explanation**

In Sample Case #1, a spacious set cannot contain $1$ and $2$, nor it can contain $2$ and $3$. That implies that $S_2 = \{2\}$ and using $S_1 = S_3 = \{1, 3\}$ makes them of maximum size.

In Sample Case #2, possible sets of maximum size are:

* $S_1 = S_2 = S_3 = S_4 = \{2, 7, 11, 19\}$,
* $S_5 = \{11, 19, 5\}$, and
* $S_6 = \{7, 11, 19, 3\}$.

**Limits**

- $1 \leq \mathbf{T} \leq 100$.
- $-10^9 \leq \mathbf{A}_i \leq 10^9$, for all $i$.
- $\mathbf{A}_i \neq \mathbf{A}_j$, for all $i \neq j$.

**Test Set 1 (4 Pts, Visible Verdict)**

- $1 \leq \mathbf{N} \leq 10$.
- $1 \leq \mathbf{K} \leq 100$.

**Test Set 2 (10 Pts, Visible Verdict)**

- $1 \leq \mathbf{K} \leq 10^9$.

For at most 15 cases:

- $1 \leq \mathbf{N} \leq 10^5$.

For the remaining cases:

- $1 \leq \mathbf{N} \leq 10^3$.


---

---
title: "[GESP202506 五级] 奖品兑换"
layout: "post"
diff: 普及/提高-
pid: P13013
tag: ['二分', '2025', 'GESP']
---
# [GESP202506 五级] 奖品兑换
## 题目背景

为了保证只有时间复杂度正确的代码能够通过本题，时限下降为 400 毫秒。
## 题目描述

班主任给上课专心听讲、认真完成作业的同学们分别发放了若干张课堂优秀券和作业优秀券。同学们可以使用这两种券找班主任兑换奖品。具体来说，可以使用 $a$ 张课堂优秀券和 $b$ 张作业优秀券兑换一份奖品，或者使用 $b$ 张课堂优秀券和 $a$ 张作业优秀券兑换一份奖品。

现在小 A 有 $n$ 张课堂优秀券和 $m$ 张作业优秀券，他最多能兑换多少份奖品呢？
## 输入格式

第一行，两个正整数 $n,m$，分别表示小 A 持有的课堂优秀券和作业优秀券的数量。

第二行，两个正整数 $a,b$，表示兑换一份奖品所需的两种券的数量。
## 输出格式

输出共一行，一个整数，表示最多能兑换的奖品份数。

## 样例

### 样例输入 #1
```
8 8
2 1
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
314159 2653589
27 1828
```
### 样例输出 #2
```
1599
```
## 提示

对于 $60\%$ 的测试点，保证 $1 \le a,b \le 100$，$1 \le n,m \le 500$。

对于所有测试点，保证 $1 \le a,b \le 10^4$，$1 \le n,m \le 10^9$。


---

---
title: "[GCJ 2017 Qualification] Tidy Numbers"
layout: "post"
diff: 普及/提高-
pid: P13159
tag: ['数学', '贪心', '2017', '二分', 'Google Code Jam']
---
# [GCJ 2017 Qualification] Tidy Numbers
## 题目描述

Tatiana likes to keep things tidy. Her toys are sorted from smallest to largest, her pencils are sorted from shortest to longest and her computers from oldest to newest. One day, when practicing her counting skills, she noticed that some integers, when written in base 10 with no leading zeroes, have their digits sorted in non-decreasing order. Some examples of this are 8, 123, 555, and 224488. She decided to call these numbers $tidy$. Numbers that do not have this property, like 20, 321, 495 and 999990, are not tidy.

She just finished counting all positive integers in ascending order from 1 to $N$. What was the last tidy number she counted?

## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ lines follow. Each line describes a test case with a single integer $N$, the last number counted by Tatiana.

## 输出格式

For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the last tidy number counted by Tatiana.
## 样例

### 样例输入 #1
```
4
132
1000
7
111111111111111110
```
### 样例输出 #1
```
Case #1: 129
Case #2: 999
Case #3: 7
Case #4: 99999999999999999
```
## 提示

**Sample Explanation**

Note that the last sample case would not appear in the Small dataset.

**Limits**

- $1 \leq T \leq 100$.

**Small dataset (5 Pts, Test Set 1 - Visible)**

- $1 \leq N \leq 1000$.

**Large dataset (10 Pts, Test Set 2 - Hidden)**

- $1 \leq N \leq 10^{18}$.


---

---
title: "[GCJ 2015 #1A] Haircut"
layout: "post"
diff: 普及/提高-
pid: P13216
tag: ['2015', '二分', 'Google Code Jam']
---
# [GCJ 2015 #1A] Haircut
## 题目描述

You are waiting in a long line to get a haircut at a trendy barber shop. The shop has $B$ barbers on duty, and they are numbered $1$ through $B$. It always takes the $k$th barber exactly $M_k$ minutes to cut a customer's hair, and a barber can only cut one customer's hair at a time. Once a barber finishes cutting hair, he is immediately free to help another customer.

While the shop is open, the customer at the head of the queue always goes to the lowest-numbered barber who is available. When no barber is available, that customer waits until at least one becomes available.

You are the $N$-th person in line, and the shop has just opened. Which barber will cut your hair?

## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow; each consists of two lines. The first contains two space-separated integers $B$ and $N$ -- the number of barbers and your place in line. The customer at the head of the line is number $1$, the next one is number $2$, and so on. The second line contains $M_1$, $M_2$, $\dots $, $M_B$.

## 输出格式

For each test case, output one line containing "Case #$x$: $y$", where $x$ is the test case number (starting from $1$) and $y$ is the number of the barber who will cut your hair.
## 样例

### 样例输入 #1
```
3
2 4
10 5
3 12
7 7 7
3 8
4 2 1
```
### 样例输出 #1
```
Case #1: 1
Case #2: 3
Case #3: 1
```
## 提示

**Sample Explanation**

In Case #1, you are the fourth person in line, and barbers $1$ and $2$ take $10$ and $5$ minutes, respectively, to cut hair. When the shop opens, the first customer immediately has the choice of barbers $1$ and $2$, and she will choose the lowest-numbered barber, $1$. The second customer will immediately be served by barber $2$. The third customer will wait since there are no more free barbers. After $5$ minutes, barber $2$ will finish cutting the second customer's hair, and will serve the third customer. After $10$ minutes, both barbers $1$ and $2$ will finish; you are next in line, and you will have the choice of barbers $1$ and $2$, and will choose $1$.

**Limits**

- $1 \leq T \leq 100$.
- $1 \leq N \leq 10^9$.

**Small dataset(11 Pts)**

- Time limit: ~~240~~ 5 seconds.
- $1 \leq B \leq 5$.
- $1 \leq M_k \leq 25$.

**Large dataset**

- Time limit: ~~480~~ 10 seconds.
- $1 \leq B \leq 1000$.
- $1 \leq M_k \leq 100000$.


---

---
title: "[GCJ 2013 #1A] Bullseye"
layout: "post"
diff: 普及/提高-
pid: P13285
tag: ['数学', '2013', '二分', 'Google Code Jam']
---
# [GCJ 2013 #1A] Bullseye
## 题目描述

Maria has been hired by the Ghastly Chemicals Junkies (GCJ) company to help them manufacture **bullseyes**. A **bullseye** consists of a number of concentric rings (rings that are centered at the same point), and it usually represents an archery target. GCJ is interested in manufacturing black-and-white bullseyes.

![](https://cdn.luogu.com.cn/upload/image_hosting/dl5refc0.png)

Maria starts with $t$ millilitres of black paint, which she will use to draw rings of thickness $1 \mathrm{~cm}$ (one centimetre). A ring of thickness $1 \mathrm{~cm}$ is the space between two concentric circles whose radii differ by $1 \mathrm{~cm}$.

Maria draws the first black ring around a white circle of radius $r \mathrm{~cm}$. Then she repeats the following process for as long as she has enough paint to do so:

1. Maria imagines a white ring of thickness $1 \mathrm{~cm}$ around the last black ring.
2. Then she draws a new black ring of thickness $1 \mathrm{~cm}$ around that white ring.

Note that each "white ring" is simply the space between two black rings.

The area of a disk with radius $1 \mathrm{~cm}$ is $\pi \mathrm{cm}^{2}$. One millilitre of paint is required to cover area $\pi \mathrm{cm}^{2}$. What is the maximum number of black rings that Maria can draw? Please note that:

* Maria only draws complete rings. If the remaining paint is not enough to draw a complete black ring, she stops painting immediately.
* There will always be enough paint to draw at least one black ring.
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case consists of a line containing two space separated integers: $r$ and $t$.

## 输出格式

For each test case, output one line containing "Case #x: $y$", where $x$ is the case number (starting from $1$) and $y$ is the maximum number of black rings that Maria can draw.
## 样例

### 样例输入 #1
```
5
1 9
1 10
3 40
1 1000000000000000000
10000000000000000 1000000000000000000
```
### 样例输出 #1
```
Case #1: 1
Case #2: 2
Case #3: 3
Case #4: 707106780
Case #5: 49
```
## 提示

**Limits**

**Small dataset (11 Pts, Test set 1 - Visible)**

- $1 \leq T \leq 1000 .$
- $1 \leq r, t \leq 1000 .$

**Large dataset (13 Pts, Test set 2 - Hidden)**

- $1 \leq T \leq 6000 .$
- $1 \leq r \leq 10^{18} .$
- $1 \leq t \leq 2 \times 10^{18} .$


---

---
title: "封锁阳光大学"
layout: "post"
diff: 普及/提高-
pid: P1330
tag: ['搜索', '图论', '福建省历届夏令营', '广度优先搜索 BFS', '深度优先搜索 DFS', '二分图']
---
# 封锁阳光大学
## 题目描述

曹是一只爱刷街的老曹，暑假期间，他每天都欢快地在阳光大学的校园里刷街。河蟹看到欢快的曹，感到不爽。河蟹决定封锁阳光大学，不让曹刷街。

阳光大学的校园是一张由 $n$ 个点构成的无向图，$n$ 个点之间由 $m$ 条道路连接。每只河蟹可以对一个点进行封锁，当某个点被封锁后，与这个点相连的道路就被封锁了，曹就无法在这些道路上刷街了。非常悲剧的一点是，河蟹是一种不和谐的生物，当两只河蟹封锁了相邻的两个点时，他们会发生冲突。

询问：最少需要多少只河蟹，可以封锁所有道路并且不发生冲突。

## 输入格式

第一行两个正整数，表示节点数和边数。
接下来 $m$ 行，每行两个整数 $u,v$，表示点 $u$ 到点 $v$ 之间有道路相连。

## 输出格式

仅一行如果河蟹无法封锁所有道路，则输出 `Impossible`，否则输出一个整数，表示最少需要多少只河蟹。

## 样例

### 样例输入 #1
```
3 3
1 2
1 3
2 3

```
### 样例输出 #1
```
Impossible

```
### 样例输入 #2
```
3 2
1 2
2 3

```
### 样例输出 #2
```
1
```
## 提示

【数据规模】   
对于 $100\%$ 的数据，$1\le n \le 10^4$，$1\le m \le 10^5$，保证没有重边。


---

---
title: "[COCI 2020/2021 #2] Odasiljaci"
layout: "post"
diff: 普及/提高-
pid: P13427
tag: ['2020', '二分', '并查集', 'Special Judge', '生成树', '连通块', 'COCI（克罗地亚）']
---
# [COCI 2020/2021 #2] Odasiljaci
## 题目描述

Sadly, this is the last time Sean will play James Bond.

His mission is to network $n$ antennas that are scattered across a vast desert, which can be represented as a 2D plane. He will set the transmission radius of each antenna to be the same non negative real number $r$. The range of an antenna is defined as the set of all points whose distance to the antenna is at most $r$. If ranges of two antennas have a common point, those antennas can directly communicate. Also, if antennas $A$ and $B$ can communicate, as well as antennas $B$ and $C$, then antennas $A$ and $C$ are also able to communicate, through antenna $B$.

Sean wants to network the antennas, i.e. make possible for every two antennas to communicate. Since $M$ has limited his spending for this mission, and larger radii require more money, Sean will choose the smallest possible radius $r$. Help him solve this problem!
## 输入格式

The first line contains an integer $n$ ($1 \leq n \leq 1000$), the number of antennas.

Each of the following $n$ lines contains integers $x_i$ and $y_i$ ($0 \leq x_i, y_i \leq 10^9$), coordinates of the $i$-th antenna.
## 输出格式

Output the minimal radius.

Your answer will be considered correct if its absolute or relative error doesn't exceed $10^{-6}$.
## 样例

### 样例输入 #1
```
2
1 1
2 2
```
### 样例输出 #1
```
0.7071068
```
### 样例输入 #2
```
7
2 3
3 4
4 5
0 1
3 1
4 2
1 5
```
### 样例输出 #2
```
1.4142135
```
### 样例输入 #3
```
4
2020 20
20 2020
2020 2020
20 20
```
### 样例输出 #3
```
1000.0000000
```
## 提示

Clarification of the second example:

![](https://cdn.luogu.com.cn/upload/image_hosting/dxxoyzwk.png)


---

---
title: "「Cfz Round 6」Kyu-kurarin"
layout: "post"
diff: 普及/提高-
pid: P13500
tag: ['贪心', '二分', '洛谷原创', '前缀和', '洛谷月赛']
---
# 「Cfz Round 6」Kyu-kurarin
## 题目背景

ちゃんと笑えなきゃね  
必须保持笑容才行啊

大した取り柄も無いから  
除此之外我一无所有
## 题目描述

Yuki 是一位魔法少女，她有着 $n$ 块冰，其中第 $i$ 块冰的质量为 $a_i$。

对于所有正整数 $t$：

- 第 $(t-0.5)$ 秒，Yuki 可以对最多 $k$ 块不同的**未完全融化**（即质量大于 $0$）的冰使用魔法，使它们的质量都增加 $1$；
- 第 $t$ 秒，每块冰都会发生融化，它们的质量都会减少 $1$。

Yuki 需要你求出最大的非负整数 $s$，满足在第 $s$ 秒及第 $s$ 秒前，Yuki 可以使用她的魔法从而使得每块冰都没有完全融化（即满足每块冰的质量始终大于 $0$）。
## 输入格式

第一行包含两个正整数 $n,k$。

第二行包含 $n$ 个正整数 $a_1,\dots,a_n$。
## 输出格式

输出一行，包含一个非负整数，表示最大的非负整数 $s$，满足在第 $s$ 秒及第 $s$ 秒前，Yuki 可以使用她的魔法从而使得每块冰都没有完全融化（即满足每块冰的质量始终大于 $0$）。
## 样例

### 样例输入 #1
```
3 1
3 1 4
```
### 样例输出 #1
```
2
```
## 提示

### 样例 1 解释

Yuki 可以这样使用魔法：

- 第 $0.5$ 秒时，Yuki 对第 $2$ 块冰使用魔法，此时 $3$ 块冰的质量分别为 $3,2,4$；
- 第 $1$ 秒时，所有冰发生融化，此时 $3$ 块冰的质量分别为 $2,1,3$；
- 第 $1.5$ 秒时，Yuki 对第 $2$ 块冰使用魔法，此时 $3$ 块冰的质量分别为 $2,2,3$；
- 第 $2$ 秒时，所有冰发生融化，此时 $3$ 块冰的质量分别为 $1,1,2$。

容易证明，在第 $3$ 秒时，一定有冰会完全融化，所以最大的满足要求的正整数 $s$ 等于 $2$。

### 样例 2

见题目附件中的 $\textbf{\textit{ice/ice2.in}}$ 与 $\textbf{\textit{ice/ice2.ans}}$。

该组样例满足测试点 $3$ 的限制。

### 样例 3

见题目附件中的 $\textbf{\textit{ice/ice3.in}}$ 与 $\textbf{\textit{ice/ice3.ans}}$。

该组样例满足测试点 $5$ 的限制。

### 样例 4

见题目附件中的 $\textbf{\textit{ice/ice4.in}}$ 与 $\textbf{\textit{ice/ice4.ans}}$。

该组样例满足测试点 $6$ 的限制。

### 样例 5

见题目附件中的 $\textbf{\textit{ice/ice5.in}}$ 与 $\textbf{\textit{ice/ice5.ans}}$。

该组样例满足测试点 $9$ 的限制。

### 样例 6

见题目附件中的 $\textbf{\textit{ice/ice6.in}}$ 与 $\textbf{\textit{ice/ice6.ans}}$。

该组样例满足测试点 $10$ 的限制。

### 数据范围

对于所有测试数据：

- $2 \le n \le 10^6$；
- $1 \le k \le n-1$；
- $1 \le a_i \le 10^6$。

|测试点编号|$n\le$|$k\le$|$a_i \le$|特殊性质|
|:---:|:---:|:---:|:---:|:---:|
|$1$|$2$|$1$|$10^6$|否|
|$2$|$10^3$|$1$|$10^3$|是|
|$3$|$10^3$|$1$|$10^3$|否|
|$4$|$10^3$|$n-1$|$10^3$|是|
|$5$|$10^3$|$n-1$|$10^3$|否|
|$6$|$10^6$|$1$|$10^6$|是|
|$7$|$10^6$|$1$|$10^6$|否|
|$8$|$10^6$|$10$|$10^6$|否|
|$9$|$10^6$|$n-1$|$10^6$|是|
|$10$|$10^6$|$n-1$|$10^6$|否|

特殊性质：保证所有冰的质量相等，即 $a_1=a_2=\dots=a_n$。



---

---
title: "【MGVOI R1-B】完美重排（sort）"
layout: "post"
diff: 普及/提高-
pid: P13730
tag: ['二分', 'O2优化', '排序', '前缀和', '双指针 two-pointer']
---
# 【MGVOI R1-B】完美重排（sort）
## 题目描述

Siby 同学有一个长度为 $n$ 的数组 $a$，其下标编号为 $1 \sim n$。保证数组 $a$ 是一个长度为 $n$ 的排列，也就是说，$1\sim n$ 中的每个正整数都在数组 $a$ 中出现 **恰好一次**。

在此基础上，Siby 同学定义了 **完美重排** 操作：

::::info[完美重排的定义]{open}

* 第一步：选择两个下标 $L,R$（必须满足 $1\le L\le R\le n$）；
  
* 第二步：将 $a_L,...,a_R$ （即数组 $a$ 中下标在 $L$ 和 $R$ 之间的元素）按照 **从小到大** 的顺序重新排序。

::::

例如，若 $a=[4,3,2,1]$，选择 $L=2,R=4$ 进行一次完美重排操作（也就是将 $a_2,a_3,a_4$ 按照从小到大的顺序排序），得到的新数组为 $a'=[4,1,2,3]$。

接下来，他将进行 $Q$ 组询问（询问之间彼此独立），其中第 $i$ 组询问包含两个参数 $x_i,y_i$（$x_i< y_i$），表示询问你有多少种进行 **恰好一次** 完美重排的方案，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。

提示：只要完美重排操作中选择的 $L$ 不同或 $R$ 不同，就被认为是两种不同的方案。
## 输入格式

第一行包含两个正整数 $n,Q$，分别表示数组 $a$ 的长度和询问的次数。

第二行包含 $n$ 个正整数，其中第 $i$ 个正整数表示数组 $a$ 中的元素 $a_i$（$1\le a_i\le n$）。

接下来 $Q$ 行，其中第 $i$ 行包含两个正整数 $x_i,y_i$（$1\le x_i< y_i \le n$），表示第 $i$ 组询问的两个参数。
## 输出格式

共输出 $Q$ 行。

对于第 $i$ 组询问而言：仅需在第 $i$ 行输出一个非负整数，表示完美重排的方案数。方案应进行恰好一次完美重排，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。


## 样例

### 样例输入 #1
```
4 3
3 4 1 2
1 3
1 4
2 4
```
### 样例输出 #1
```
1
0
2
```
### 样例输入 #2
```
7 10
6 3 5 7 2 4 1
1 3
1 4
1 7
2 3
2 4
2 5
3 5
4 6
5 6
6 7

```
### 样例输出 #2
```
2
1
0
3
1
0
3
4
1
2
```
## 提示


**【样例 #1】**

::::info[样例 #1 解释]
此样例下，$a=[3,4,1,2]$。

* 对于第一组询问：只需取 $L=1，R=4$ 进行一次完美重排，就能使得 $a_1$ 在重排后的下标为 $3$（重排前：$a=[\red{3},4,1,2]$，重排后：$a'=[1,2,\red{3},4]$）。可以证明这是唯一的一种方案，故方案数为 $1$；

* 对于第二组询问：可以证明，无论如何选取 $L,R$，都不可能使得 $a_1$ 在重排后的下标为 $4$，故方案数为 $0$；

* 对于第三组询问：

1. 第一种方案是取 $L=1，R=4$ 进行一次完美重排（重排前：$a=[3,\red{4},1,2]$，重排后：$a'=[1,2,3,\red{4}]$）；
  
2. 第二种方案是取 $L=2，R=4$ 进行一次完美重排（重排前：$a=[3,\red{4},1,2]$，重排后：$a'=[3,1,2,\red{4}]$），可以验证均满足条件。不存在其它满足条件的方案了，故方案数为 $2$。
::::


**【样例 #2】**

::::info[样例 #2 解释]
此样例下，$a=[6,3,5,7,2,4,1]$。

为了简便，我们用数对 $(i,j)$ 来表示选取 $L=i$，$R=j$ 进行一次完美重排的方案。各组询问对应的所有方案见下表：

| 询问编号 | 方案数 | 方案 1 | 方案 2 | 方案 3 | 方案 4 |
|:-:|:-:|:-:|:-:|:-:|:-:|
| **1** | $2$ | $(1,3)$ | $(1,4)$
| **2** | $1$ | $(1,5)$
| **3** | $0$ |
| **4** | $3$ | $(1,7)$ | $(2,5)$ | $(2,6)$
| **5** | $1$ | $(2,7)$
| **6** | $0$ |
| **7** | $3$ | $(1,7)$ | $(2,6)$ | $(3,6)$
| **8** | $4$ | $(1,6)$ | $(2,6)$ | $(3,6)$ | $(4,6)$ 
| **9** | $1$ | $(5,7)$ |
| **10** | $2$ | $(5,7)$ | $(6,7)$ |

::::



**【样例 #3】**

见附件中的 ```sort/sort3.in``` 与 ```sort/sort3.ans```。

这个样例满足测试点 $7 \sim 12$ 的限制。

**【样例 #4】**

见附件中的 ```sort/sort4.in``` 与 ```sort/sort4.ans```。

这个样例满足测试点 $13 \sim 14$ 的限制。

**【样例 #5】**

见附件中的 ```sort/sort5.in``` 与 ```sort/sort5.ans```。

这个样例满足测试点 $15 \sim 20$ 的限制。



---




**【数据范围】**

对于所有测试点，保证 $2\le n\le 10^4$，$1\le Q\le 2\times 10^3$，$1\le x_i< y_i\le n$，且数组 $a$ 是 $1\sim n$ 的排列。

::cute-table{tuack}

| **测试点编号** | $n \le$ | $Q \le$ |  **特殊性质** |
|:-:|:-:|:-:|:-:|
| $1 \sim 6$ | $20$ | $20$ | 无 | 
| $7 \sim 12$ | $500$ | $100$ | ^ | 
| $13 \sim 14$ | $10^4$ | $2\times 10^3$ | **A** | 
| $15 \sim 20$ | ^ | ^ | 无 | 

特殊性质 **A**：保证 $a_i=n-i+1$。

* 分值分配：每个测试点的分值为 $5$ 分。
  
* 请注意本题特殊的内存限制。


---

---
title: "[JOIGST 2025] 雪球 2 / Snowball 2"
layout: "post"
diff: 普及/提高-
pid: P13734
tag: ['二分', '2025', 'O2优化', '分治', '前缀和', 'JOISC/JOIST（日本）']
---
# [JOIGST 2025] 雪球 2 / Snowball 2
## 题目描述

Aoi 在雪地里玩耍。在 Aoi 面前，有 $N$ 个雪球从左到右排成一列，编号为 $1$ 到 $N$。第 $i$ 个雪球初始时的大小为 $A_i$。

Aoi 希望她能造出一个大雪球。为此，Aoi 决定重复以下操作，直到雪球的数量变为 $1$ 或无法进行操作：

- 选择相邻的两个雪球，假设左侧的雪球大小为 $l$，右侧的雪球大小为 $r$，则需要满足 $0\le l-r\le 1$；
- 将选定的两个雪球合并成一个大小为 $l+r$ 的雪球；
- 换句话说，如果操作前有 $k$ 个雪球，从左到右大小分别为 $s_1,s_2,\ldots,s_k$，则可以选择一个 $t(1\le t\le k-1)$ 满足 $0\le s_t-s_{t+1}\le 1$ 进行操作，操作后的 $k-1$ 个雪球从左到右大小分别为 $s_1,s_2,\ldots,s_{t-1},s_t+s_{t+1},s_{t+2},\ldots,s_k$。

判断 Aoi 是否能通过操作将所有雪球合并成一个大雪球。
## 输入格式

第一行输入一个整数 $N$。

第二行输入 $N$ 个整数 $A_1,A_2,\ldots,A_N$。
## 输出格式

输出一行一个字符串，如果可以合成一个大雪球输出 `Yes`，否则输出 `No`。
## 样例

### 样例输入 #1
```
5
1 1 1 1 1
```
### 样例输出 #1
```
Yes
```
### 样例输入 #2
```
3
2 2 2
```
### 样例输出 #2
```
No
```
### 样例输入 #3
```
8
5 4 3 2 1 2 3 4
```
### 样例输出 #3
```
No
```
### 样例输入 #4
```
16
3 2 1 6 2 1 3 2 1 3 12 6 1 1 1 2
```
### 样例输出 #4
```
Yes
```
## 提示

#### 【样例解释 #1】

Aoi 可以通过执行以下操作合成一个大雪球：

- 选择从左到右第 $4$ 和第 $5$ 个雪球，操作后雪球大小变为 $1,1,1,2$；
- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $2,1,2$；
- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $3,2$；
- 选择从左到右第 $1$ 和第 $2$ 个雪球，操作后雪球大小变为 $5$。

该样例满足所有子任务的限制。

#### 【样例解释 #2】

Aoi 无法通过执行操作合成一个大雪球。

该样例满足所有子任务的限制。

#### 【样例解释 #3】

该样例满足子任务 $2,3,4,5$ 的限制。

#### 【样例解释 #4】

该样例满足子任务 $3,4,5$ 的限制。

#### 【数据范围】

- $2\le N\le 5\times 10^5$；
- $1\le A_i\le 10^{12}(1\le i\le N)$。

#### 【子任务】

1. （$15$ 分）$A_1=A_2=\cdots=A_N$；
2. （$18$ 分）$N\le 8$；
3. （$18$ 分）$N\le 200$；
4. （$19$ 分）$N\le 5000$；
5. （$30$ 分）无附加限制。


---

---
title: "Extended Fibonacci"
layout: "post"
diff: 普及/提高-
pid: P13762
tag: ['数学', '二分', 'Special Judge', 'O2优化', 'Fibonacci 数列', '构造']
---
# Extended Fibonacci
## 题目描述

定义斐波那契数列 $f$ 如下：

1. $f_{1}=f_{2}=1$；

2. $f_{i} = f_{i-1} + f_{i-2}$，其中 $i \geq 3$ 且 $i$ 为整数。

定义当 $y-x$ 是偶数时，$v(x,y) = 1$，否则 $v(x,y) = 0$。

现在给出非负整数 $a$，请问是否存在一对正整数 $p,q$，满足 $p \leq q \leq 2 \times 10^{9}$ 且 $\sum\limits_{i=p}^{q-1}\sum\limits_{j=i+1}^{q} v(f_{i},f_{j}) = a$（也就是要求从斐波那契数列第 $p$ 项到第 $q$ 项中，在不考虑某一项减去自身的情况下，有 $a$ 对数的差值是偶数）？如果存在，输出**任意**一组解，否则请输出 $-1$。
## 输入格式

本题有多组数据。

第一行一个正整数 $t$ 表示数据组数。

接下来 $t$ 行，每行一个非负整数 $a$。
## 输出格式

对于每组数据，若有解输出**任意**一组可行的正整数解 $p,q(1 \leq p \leq q \leq 2 \times 10^{9})$，否则输出 $-1$。
## 样例

### 样例输入 #1
```
7
0
1
2
5
44422
1919810
905304292476
```
### 样例输出 #1
```
2 3
2 4
3 6
-1
114 514
-1
114514 1919810
```
## 提示

#### 【样例解释】

计算可得斐波那契数列前 $6$ 项为 $1,1,2,3,5,8$。

对于第 $1$ 组数据，因为 $f_{3} - f_{2} = 2 - 1 = 1$ 不是偶数，所以当 $p = 2, q = 3$ 时结果为 $0$，符合要求。由于解不唯一，$p = 1, q = 1$ 等其他答案也是符合要求的。

对于第 $2$ 组数据，注意到 $f_{3} - f_{2} = 2 - 1 = 1$ 不是偶数，$f_{4} - f_{3} = 3 - 2 = 1$ 也不是偶数，但 $f_{4} - f_{2} = 3 - 1 = 2$ 是偶数。所以当 $p = 2, q = 4$ 时结果为 $1$，符合要求。由于解不唯一，$p = 1, q = 2$ 等其他答案也是符合要求的。

对于第 $3$ 组数据，因为 $f_{6} - f_{3},f_{5} - f_{4}$ 均为偶数，而其他情况均不为偶数，所以当 $p = 3, q = 6$ 时结果为 $2$，符合要求。当然也存在其他满足要求的解。

对于第 $4$ 组数据，可以证明不存在任何符合要求的解。

|子任务编号|分值|$t \leq$|$a \leq$|
|:-:|:-:|:-:|:-:|
|$1$|$10$|$6$|$5$|
|$2$|$15$|$101$|$100$|
|$3$|$15$|$1001$|$1000$|
|$4$|$15$|$10^{4}$|$2 \times 10^{6}$|
|$5$|$20$|$1000$|$2 \times 10^{9}$|
|$6$|$25$|$10^{5}$|$10^{17}$|

对于 $100\%$ 的数据，$t \leq 10^{5},a \leq 10^{17}$。


---

---
title: "营救"
layout: "post"
diff: 普及/提高-
pid: P1396
tag: ['图论', '二分', '并查集', '福建省历届夏令营', '最短路', '生成树']
---
# 营救
## 题目背景

“咚咚咚……”“查水表！”原来是查水表来了，现在哪里找这么热心上门的查表员啊！小明感动得热泪盈眶，开起了门……
## 题目描述

妈妈下班回家，街坊邻居说小明被一群陌生人强行押上了警车！妈妈丰富的经验告诉她小明被带到了 $t$ 区，而自己在 $s$ 区。

该市有 $m$ 条大道连接 $n$ 个区，一条大道将两个区相连接，每个大道有一个拥挤度。小明的妈妈虽然很着急，但是不愿意拥挤的人潮冲乱了她优雅的步伐。所以请你帮她规划一条从 $s$ 至 $t$ 的路线，使得经过道路的拥挤度最大值最小。
## 输入格式

第一行有四个用空格隔开的 $n$，$m$，$s$，$t$，其含义见【题目描述】。

接下来 $m$ 行，每行三个整数 $u, v, w$，表示有一条大道连接区 $u$ 和区 $v$，且拥挤度为 $w$。

**两个区之间可能存在多条大道**。
## 输出格式

输出一行一个整数，代表最大的拥挤度。
## 样例

### 样例输入 #1
```
3 3 1 3
1 2 2
2 3 1
1 3 3
```
### 样例输出 #1
```
2

```
## 提示

#### 数据规模与约定

- 对于 $30\%$ 的数据，保证 $n\leq 10$。
- 对于 $60\%$ 的数据，保证 $n\leq 100$。
- 对于 $100\%$ 的数据，保证 $1 \leq n\leq 10^4$，$1 \leq m \leq 2 \times 10^4$，$w \leq 10^4$，$1 \leq s, t \leq n$。且从 $s$ 出发一定能到达 $t$ 区。

--- 

#### 样例输入输出 1 解释

小明的妈妈要从 $1$ 号点去 $3$ 号点，最优路线为 $1$->$2$->$3$。


---

---
title: "KC 喝咖啡"
layout: "post"
diff: 普及/提高-
pid: P1570
tag: ['二分', '洛谷原创', '分数规划']
---
# KC 喝咖啡
## 题目描述

话说 KC 和 SH 在福州的时候常常跑去 85°C 喝咖啡或者其他的一些什么东西。

这天，KC 想要喝一杯咖啡，服务员告诉他，现在有 $n$ 种调料，这杯咖啡只可以加入其中的 $m$ 种（当然 KC 一定会加入 $m$ 种，不会加入少于 $m$ 种的调料），根据加入的调料不同，制成这杯咖啡要用的时间也不同，得到的咖啡的美味度也不同。

KC 在得知所有的 $n$ 种调料后，作为曾经的化竞之神的他，马上就知道了所有调料消耗的时间 $c _ i$ 以及调料的美味度 $v _ i$。由于 KC 急着回去刷题，所以他想尽快喝到这杯咖啡，但他又想喝到美味的咖啡，所以他想出了一个办法，他要喝到 $\dfrac{\sum v _ i}{\sum c _ i}$ 最大的咖啡，也就是单位时间的美味度最大的咖啡。

现在，KC 把调料信息告诉了 SH，要 SH 帮他算出喝到的咖啡的 $\dfrac{\sum v _ i}{\sum c _ i}$，但 SH 不想帮 KC 算这东西，于是 KC 就只能拜托你来算了。

注释：$\sum$ 表示求和，所以 $\dfrac{\sum v _ i}{\sum c _ i}$ 表示美味度的总和除以消耗时间的总和。

## 输入格式

输入数据共三行。

第一行为一个整数 $n, m$，表示调料种数和能加入的调料数。

接下来两行，每行为 $n$ 个数，第一行第 $i$ 个整数表示调料 $i$ 的美味度 $v _ i$，第二行第 $i$ 个整数表示调料 $i$ 消耗的时间 $c _ i$。

## 输出格式

一个实数 $T$，表示 KC 喝的咖啡的最大 $\dfrac{\sum v _ i}{\sum c _ i}$，保留三位小数。

## 样例

### 样例输入 #1
```
3 2
1 2 3
3 2 1

```
### 样例输出 #1
```
1.667

```
## 提示

**样例 1 解释**：

KC 选 $2$ 号和 $3$ 号调料，$\dfrac{\sum v _ i}{\sum c _ i} = \dfrac{2 + 3}{2 + 1} = 1.667$。

可以验证不存在更优的选择。

**数据范围**：

对 $20 \%$ 的数据：$1 \leq n \leq 5$。

对 $50 \%$ 的数据：$1 \leq n \leq 10$。

对 $80 \%$ 的数据：$1 \leq n \leq 50$。

对 $100 \%$ 的数据：$1 \leq n \leq 200, 1 \leq m \leq n, 1 \leq c[i], v[i] \leq 1 \times 10 ^ 4$。

数据保证答案不超过 $1000$。



---

---
title: "切绳子"
layout: "post"
diff: 普及/提高-
pid: P1577
tag: ['二分', 'Special Judge']
---
# 切绳子
## 题目描述

有 $N$ 条绳子，它们的长度分别为 $L_i$。如果从它们中切割出 $K$ 条长度相同的绳子，这 $K$ 条绳子每条最长能有多长？答案保留到小数点后 $2$ 位(直接舍掉 $2$ 位后的小数)。

## 输入格式

第一行两个整数 $N$ 和 $K$，接下来 $N$ 行，描述了每条绳子的长度 $L_i$ 。

## 输出格式

切割后每条绳子的最大长度。答案与标准答案误差不超过 $0.01$ 或者相对误差不超过 $1\%$ 即可通过。
## 样例

### 样例输入 #1
```
4 11
8.02
7.43
4.57
5.39
```
### 样例输出 #1
```
2.00
```
## 提示

对于 $100\%$ 的数据 $0<L_i\leq 100000.00,0<n\leq 10000,0<k\leq 10000$



---

---
title: "[yLOI2018] 树上的链"
layout: "post"
diff: 普及/提高-
pid: P1612
tag: ['2018', '二分', 'O2优化', '栈']
---
# [yLOI2018] 树上的链
## 题目描述

给定一棵有 $n$ 个节点的树。每个节点有一个点权和一个参数。节点 $i$ 的权值为 $w_i$，参数为 $c_i$。$1$ 是这棵树的根。

现在，对每个节点 $u$（$1 \leq u \leq n$），请在树上你找到最长的一条链 $v_1, v_2, \dots v_m$，满足如下条件：

1. $v_1 = u$。
2. 对 $2 \leq i \leq m$， 有 $v_i$ 是 $v_{i - 1}$ 的父节点。
3. 链上节点的点权和不超过 $c_u$，即 $\sum_{j = 1}^m w_{v_j} \leq c_u$。 
## 输入格式

第一行是一个整数，表示树的节点数 $n$。  
第二行有 $n - 1$ 个整数 $p_2, p_3, \dots p_n$，其中 $p_i$ 表示节点 $i$ 的父节点。  
第三行有 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的权值 $w_i$。  
第四行有 $n$ 个整数，第 $i$ 个整数表示节点 $i$ 的参数 $c_i$。
## 输出格式

输出一行 $n$ 个用空格隔开的整数，第 $i$ 个整数表示节点 $i$ 对应的链的最长长度。
## 样例

### 样例输入 #1
```
5
1 1 2 2
1 2 3 4 5
1 3 3 6 8
```
### 样例输出 #1
```
1 2 1 2 3
```
## 提示

### 数据规模与约定

对全部的测试点，保证 $1 \leq u, v \leq n \leq 10^5$，$1 \leq p_i \lt i$，$1 \leq w_i \leq c_i \leq 10^9$。


---

---
title: "逛画展"
layout: "post"
diff: 普及/提高-
pid: P1638
tag: ['二分', 'USACO', '单调队列', '队列', '双指针 two-pointer']
---
# 逛画展
## 题目描述


博览馆正在展出由世上最佳的 $m$ 位画家所画的图画。

游客在购买门票时必须说明两个数字，$a$ 和 $b$，代表他要看展览中的第 $a$ 幅至第 $b$ 幅画（包含 $a,b$）之间的所有图画，而门票的价钱就是一张图画一元。

Sept 希望入场后可以看到所有名师的图画。当然，他想最小化购买门票的价格。

请求出他购买门票时应选择的 $a,b$，数据保证一定有解。

若存在多组解，**输出 $a$ 最小的那组**。
## 输入格式

第一行两个整数 $n,m$，分别表示博览馆内的图画总数及这些图画是由多少位名师的画所绘画的。

第二行包含 $n$ 个整数 $a_i$，代表画第 $i$ 幅画的名师的编号。

## 输出格式

一行两个整数 $a,b$。
## 样例

### 样例输入 #1
```
12 5
2 5 3 1 3 2 4 1 1 5 4 3

```
### 样例输出 #1
```
2 7
```
## 提示

#### 数据规模与约定

- 对于 $30\%$ 的数据，有 $n\le200$，$m\le20$。
- 对于 $60\%$ 的数据，有 $n\le10^5$，$m\le10^3$。
- 对于 $100\%$ 的数据，有 $1\leq n\le10^6$，$1 \leq a_i \leq m\le2\times10^3$。


---

---
title: "扩散"
layout: "post"
diff: 普及/提高-
pid: P1661
tag: ['图论', '树形数据结构', '二分']
---
# 扩散
## 题目描述

一个点每过一个单位时间就会向四个方向扩散一个距离，如图。

![](https://cdn.luogu.com.cn/upload/image_hosting/cd4e53lw.png)

两个点 $a$ 、 $b$ 连通，记作 $e(a,b)$，当且仅当 $a,b$ 的扩散区域有公共部分。连通块的定义是块内的任意两个点 $u,v$ 都必定存在路径 $e(u,a_0),e(a_0,a_1),\cdots,e(a_k,v)$。给定平面上的 $n$ 个点，问最早什么时刻它们形成一个连通块。

## 输入格式

第一行一个数 $n$，以下 $n$ 行，每行一个点坐标。
## 输出格式

一个数，表示最早的时刻所有点形成连通块。

## 样例

### 样例输入 #1
```
2

0 0

5 5
```
### 样例输出 #1
```
5
```
## 提示

### 数据范围及约定

对于 $20\%$ 的数据，满足 $1 \le N \le 5;1 \le X_i,Y_i \le 50$。

对于 $100\%$ 的数据，满足 $1 \le N \le 50$，$1 \le X_i,Y_i \le 10^9$。


---

---
title: "奶牛晒衣服"
layout: "post"
diff: 普及/提高-
pid: P1843
tag: ['模拟', '贪心', '二分']
---
# 奶牛晒衣服
## 题目背景

熊大妈决定给每个牛宝宝都穿上可爱的婴儿装 。但是由于衣服很湿，为牛宝宝晒衣服就成了很不爽的事情。于是，熊大妈请你（奶牛）帮助她完成这个重任。

## 题目描述

一件衣服在自然条件下用一秒的时间可以晒干 $a$ 点湿度。抠门的熊大妈只买了一台烘衣机 。使用用一秒烘衣机可以让一件衣服额外烘干 $b$ 点湿度（一秒晒干 $a+b$ 湿度），但在同一时间内只能烘一件衣服。现在有 $n$ 件衣服，第 $i$ 衣服的湿度为 $w_i$（保证互不相同），要你求出弄干所有衣服的最少时间（湿度为 $0$ 为干 ）。

## 输入格式

第一行三个整数，分别为 $n,a,b$。  
接下来 $2$ 到 $n+1$ 行，第 $i$ 行输入 $w_i$。
## 输出格式

一行，弄干所有衣服的最少时间。

## 样例

### 样例输入 #1
```
3 2 1
1
2
3
```
### 样例输出 #1
```
1
```
## 提示

### 样例解释

让机器烘第三件衣服即可一秒完成。

### 数据范围

$1 \le w_i,a,b,n \le 5 \times 10^5$


---

---
title: "[COCI 2011/2012 #5] EKO / 砍树"
layout: "post"
diff: 普及/提高-
pid: P1873
tag: ['2011', '二分', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #5] EKO / 砍树
## 题目描述

伐木工人 Mirko 需要砍 $M$ 米长的木材。对 Mirko 来说这是很简单的工作，因为他有一个漂亮的新伐木机，可以如野火一般砍伐森林。不过，Mirko 只被允许砍伐一排树。

Mirko 的伐木机工作流程如下：Mirko 设置一个高度参数 $H$（米），伐木机升起一个巨大的锯片到高度 $H$，并锯掉所有树比 $H$ 高的部分（当然，树木不高于 $H$ 米的部分保持不变）。Mirko 就得到树木被锯下的部分。例如，如果一排树的高度分别为 $20,15,10$ 和 $17$，Mirko 把锯片升到 $15$ 米的高度，切割后树木剩下的高度将是 $15,15,10$ 和 $15$，而 Mirko 将从第 $1$ 棵树得到 $5$ 米，从第 $4$ 棵树得到 $2$ 米，共得到 $7$ 米木材。

Mirko 非常关注生态保护，所以他不会砍掉过多的木材。这也是他尽可能高地设定伐木机锯片的原因。请帮助 Mirko 找到伐木机锯片的最大的整数高度 $H$，使得他能得到的木材至少为 $M$ 米。换句话说，如果再升高 $1$ 米，他将得不到 $M$ 米木材。
## 输入格式

第 $1$ 行 $2$ 个整数 $N$ 和 $M$，$N$ 表示树木的数量，$M$ 表示需要的木材总长度。

第 $2$ 行 $N$ 个整数表示每棵树的高度。
## 输出格式

$1$ 个整数，表示锯片的最高高度。
## 样例

### 样例输入 #1
```
4 7
20 15 10 17
```
### 样例输出 #1
```
15
```
### 样例输入 #2
```
5 20
4 42 40 26 46
```
### 样例输出 #2
```
36
```
## 提示

对于 $100\%$ 的测试数据，$1\le N\le10^6$，$1\le M\le2\times10^9$，树的高度 $\le 4\times 10^5$，所有树的高度总和 $>M$。


---

---
title: "【模板】三分 | 函数"
layout: "post"
diff: 普及/提高-
pid: P1883
tag: ['搜索', '二分', '三分']
---
# 【模板】三分 | 函数
## 题目描述

给定 $n$ 个二次函数 $f_1(x),f_2(x),\dots,f_n(x)$（均形如 $ax^2+bx+c$），设 $F(x)=\max\{f_1(x),f_2(x),...,f_n(x)\}$，求 $F(x)$ 在区间 $[0,1000]$ 上的最小值。
## 输入格式

输入第一行为正整数 $T$，表示有 $T$ 组数据。

每组数据第一行一个正整数 $n$，接着 $n$ 行，每行 $3$ 个整数 $a,b,c$，用来表示每个二次函数的 $3$ 个系数，注意二次函数有可能退化成一次。
## 输出格式

每组数据输出一行，表示 $F(x)$ 的在区间 $[0,1000]$ 上的最小值。答案精确到小数点后四位，四舍五入。
## 样例

### 样例输入 #1
```
2
1
2 0 0
2
2 0 0
2 -4 2

```
### 样例输出 #1
```
0.0000
0.5000

```
## 提示

对于 $50\%$ 的数据，$n\le 100$。

对于 $100\%$ 的数据，$T<10$，$\ n\le 10^4$，$0\le a\le 100$，$|b| \le 5\times 10^3$，$|c| \le 5\times 10^3$。


---

---
title: "A/B Problem II"
layout: "post"
diff: 普及/提高-
pid: P2005
tag: ['高精度', '二分']
---
# A/B Problem II
## 题目背景

为了让大家紧张的心情放松一下，这一题题是一道非常简单的题目。

## 题目描述

给出正整数 $N$ 和 $M$，请你计算 $N \div M$（$N / M$ 的下取整）。
## 输入格式

两行，两个正整数，$N$ 和 $M$。
## 输出格式

一行，一个整数，表示 $N \div M$。
## 样例

### 样例输入 #1
```
1000 
333

```
### 样例输出 #1
```
3

```
## 提示

- 对于 $60 \%$ 的数据：$ N,M \le 750!$，答案 $ \le 7!$。
- 对于 $100 \%$ 的数据：$N,M \le 6250!$，答案 $ \le 13!$。

请注意：上面的两句话并不是感叹句，而是陈述句。标点符号使用没有错误。


---

---
title: "yyy2015c01 的 U 盘"
layout: "post"
diff: 普及/提高-
pid: P2370
tag: ['动态规划 DP', '贪心', '二分', '洛谷原创', '排序', '背包 DP']
---
# yyy2015c01 的 U 盘
## 题目背景

在 2020 年的某一天，我们的 yyy2015c01 买了个高端 U 盘。

## 题目描述

你找 yyy2015c01 借到了这个高端的 U 盘，拷贝一些重要资料，但是你发现这个 U 盘有一些问题：

1. 这个 U 盘的传输接口很小，只能传输大小不超过 $L$ 的文件。
2. 这个 U 盘容量很小，一共只能装不超过 $S$ 的文件。

但是你要备份的资料却有很多，你只能备份其中的一部分。

为了选择要备份哪些文件，你给所有文件设置了一个价值 $V_i$，你希望备份的文件总价值不小于 $p$。

但是很快你发现这是不可能的，因为 yyy2015c01 的传输接口太小了，你只有花钱买一个更大的接口（更大的接口意味着可以传输更大的文件，但是购买它会花费更多的钱）。

注意：你的文件不能被分割（你只能把一个文件整个的传输进去，并储存在U盘中）,

你放在 U 盘中文件的总大小不能超过 U 盘容量。

现在问题来了：你想知道，在满足 U 盘中文件价值之和**不小于** $p$ 时，最小需要多大的接口。
## 输入格式

第 $1$ 行，三个正整数 $n,p,S$ 分别表示文件总数，希望最小价值 $p$ ，U 盘大小。

接下来 $n$ 行，每行两个正整数 $W_{i},V_{i}$，表示第 $i$ 个文件的大小和价值。
## 输出格式

输出一个正整数表示最小需要的接口大小。

如果无解输出 `No Solution!`。
## 样例

### 样例输入 #1
```
3 3 5
2 2
1 2
3 2
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2 3 505
1 2
500 1
```
### 样例输出 #2
```
500
```
### 样例输入 #3
```
3 3 2
2 2
1 2
3 2
```
### 样例输出 #3
```
No Solution!
```
### 样例输入 #4
```
4 5 6
5 1
5 2
5 3
1 1
```
### 样例输出 #4
```
No Solution!
```
## 提示

$1 \le n, W_i, S \le 10^3$，$1 \leq V_i \leq 10^6$，$1 \leq p \leq 10^9$。

数据较小，请勿乱搞。

样例解释 $1$：买一个大小为 $2$ 接口，把物品 $1$ 、$2$ 放进$\text{U}$盘。

样例解释 $2$：买一个大小为 $500$ 的接口。

样例解释 $3$：本来可以买大小为 $2$ 的接口，可是 U 盘容量放不下足够的文件。

如果数据出现疏漏，请联系出题人 [a710128](https://www.luogu.com.cn/user/2573)

向本题主人公 yyy2015c01 同学致敬！


---

---
title: "地标访问"
layout: "post"
diff: 普及/提高-
pid: P2390
tag: ['搜索', '贪心', '二分', '洛谷原创']
---
# 地标访问
## 题目背景

改编自 USACO2007Nov 铜组 Exploration

## 题目描述

贝西在一条道路上旅行，道路上有许多地标，贝西想要在日落之前访问尽可能多的路标。将道路视为一条数轴，贝西从原点出发，道路上有 $n(1 \le n \le 5\times 10^4)$ 个地标，每个地标有一个坐标 $x_i(|x_i| \le 10^5)$ 且地标的坐标各不相同，$t(1 \le T \le 10^9)$ 分钟之后将会日落。
## 输入格式

第一行：两个整数 $t,n$。

第二行至第 $n+1$ 行：地标的坐标 $x_i$。
## 输出格式

一个整数，贝西能访问的最多的地标数

## 样例

### 样例输入 #1
```
25 14
16
8
-7
3
10
-15
-17
6
-12
14
-13
2
9
-5

```
### 样例输出 #1
```
8
```
## 提示

1、贝西日落时不用回到原点。

2、与原模拟水题不同。

3、数据较原题有所修改



---

---
title: "木材加工"
layout: "post"
diff: 普及/提高-
pid: P2440
tag: ['贪心', '线性数据结构', '二分', '递归']
---
# 木材加工
## 题目背景

要保护环境

## 题目描述

木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。

当然，我们希望得到的小段木头越长越好，请求出 $l$ 的最大值。

木头长度的单位是 $\text{cm}$，原木的长度都是正整数，我们要求切割得到的小段木头的长度也是正整数。

例如有两根原木长度分别为 $11$ 和 $21$，要求切割成等长的 $6$ 段，很明显能切割出来的小段木头长度最长为 $5$。
## 输入格式


第一行是两个正整数 $n,k$，分别表示原木的数量，需要得到的小段的数量。

接下来 $n$ 行，每行一个正整数 $L_i$，表示一根原木的长度。
## 输出格式

仅一行，即 $l$ 的最大值。

如果连 $\text{1cm}$ 长的小段都切不出来，输出 `0`。
## 样例

### 样例输入 #1
```
3 7
232
124
456
```
### 样例输出 #1
```
114
```
## 提示


#### 数据规模与约定

对于 $100\%$ 的数据，有 $1\le n\le 10^5$，$1\le k\le 10^8$，$1\le L_i\le 10^8(i\in[1,n])$。


---

---
title: "[NOIP 2015 提高组] 跳石头"
layout: "post"
diff: 普及/提高-
pid: P2678
tag: ['贪心', '2015', '二分', 'NOIP 提高组']
---
# [NOIP 2015 提高组] 跳石头
## 题目背景

NOIP2015 Day2T1
## 题目描述

一年一度的“跳石头”比赛又要开始了！

这项比赛将在一条笔直的河道中进行，河道中分布着一些巨大岩石。组委会已经选择好了两块岩石作为比赛起点和终点。在起点和终点之间，有 $N$ 块岩石（不含起点和终点的岩石）。在比赛过程中，选手们将从起点出发，每一步跳向相邻的岩石，直至到达终点。

为了提高比赛难度，组委会计划移走一些岩石，使得选手们在比赛过程中的最短跳跃距离尽可能长。由于预算限制，组委会至多从起点和终点之间移走 $M$ 块岩石（不能移走起点和终点的岩石）。
## 输入格式

第一行包含三个整数 $L,N,M$，分别表示起点到终点的距离，起点和终点之间的岩石数，以及组委会至多移走的岩石数。保证 $L \geq 1$ 且 $N \geq M \geq 0$。

接下来 $N$ 行，每行一个整数，第 $i$ 行的整数 $D_i\,( 0 < D_i < L)$， 表示第 $i$ 块岩石与起点的距离。这些岩石按与起点距离从小到大的顺序给出，且不会有两个岩石出现在同一个位置。
## 输出格式

一个整数，即最短跳跃距离的最大值。
## 样例

### 样例输入 #1
```
25 5 2 
2
11
14
17 
21
```
### 样例输出 #1
```
4
```
## 提示

### 输入输出样例 1 说明

将与起点距离为 $2$ 和 $14$ 的两个岩石移走后，最短的跳跃距离为 $4$（从与起点距离 $17$ 的岩石跳到距离 $21$ 的岩石，或者从距离 $21$ 的岩石跳到终点）。

### 数据规模与约定

对于 $20\%$的数据，$0 \le M \le N \le 10$。    
对于 $50\%$ 的数据，$0 \le M \le N \le 100$。  
对于 $100\%$ 的数据，$0 \le M \le N \le 50000,1 \le L 
 \le 10^9$。



---

---
title: "奇怪的函数"
layout: "post"
diff: 普及/提高-
pid: P2759
tag: ['数学', '二分', '洛谷原创']
---
# 奇怪的函数
## 题目描述

使得 $x^x$ 达到或超过 $n$ 位数字的最小正整数 $x$ 是多少？

## 输入格式

一个正整数 $n$。

## 输出格式

使得 $x^x$ 达到 $n$ 位数字的最小正整数 $x$。

## 样例

### 样例输入 #1
```
11
```
### 样例输出 #1
```
10
```
## 提示

对于全部数据，$1\le n\le 2\times 10^9$。



---

---
title: "[USACO06DEC] River Hopscotch S"
layout: "post"
diff: 普及/提高-
pid: P2855
tag: ['2006', '二分', 'USACO']
---
# [USACO06DEC] River Hopscotch S
## 题目描述

Every year the cows hold an event featuring a peculiar version of hopscotch that involves carefully jumping from rock to rock in a river. The excitement takes place on a long, straight river with a rock at the start and another rock at the end, L units away from the start (1 ≤ L ≤ 1,000,000,000). Along the river between the starting and ending rocks, N (0 ≤ N ≤ 50,000) more rocks appear, each at an integral distance Di from the start (0 < Di < L).

To play the game, each cow in turn starts at the starting rock and tries to reach the finish at the ending rock, jumping only from rock to rock. Of course, less agile cows never make it to the final rock, ending up instead in the river.

Farmer John is proud of his cows and watches this event each year. But as time goes by, he tires of watching the timid cows of the other farmers limp across the short distances between rocks placed too closely together. He plans to remove several rocks in order to increase the shortest distance a cow will have to jump to reach the end. He knows he cannot remove the starting and ending rocks, but he calculates that he has enough resources to remove up to M rocks (0 ≤ M ≤ N).

FJ wants to know exactly how much he can increase the shortest distance \*before\* he starts removing the rocks. Help Farmer John determine the greatest possible shortest distance a cow has to jump after removing the optimal set of M rocks.

奶牛跳房子：从N块石头中移除M块，使得间距最小值最大。

## 输入格式

Line 1: Three space-separated integers: L, N, and M


Lines 2..N+1: Each line contains a single integer indicating how far some rock is away from the starting rock. No two rocks share the same position.

## 输出格式

Line 1: A single integer that is the maximum of the shortest distance a cow has to jump after removing M rocks

## 样例

### 样例输入 #1
```
25 5 2
2
14
11
21
17
```
### 样例输出 #1
```
4
```
## 提示

Before removing any rocks, the shortest jump was a jump of 2 from 0 (the start) to 2. After removing the rocks at 2 and 14, the shortest required jump is a jump of 4 (from 17 to 21 or from 21 to 25).



---

---
title: "[USACO08NOV] Time Management S"
layout: "post"
diff: 普及/提高-
pid: P2920
tag: ['贪心', '2008', '二分', 'USACO', '排序']
---
# [USACO08NOV] Time Management S
## 题目描述

Ever the maturing businessman, Farmer John realizes that he must manage his time effectively. He has N jobs conveniently numbered 1..N (1 <= N <= 1,000) to accomplish (like milking the cows, cleaning the barn, mending the fences, and so on).

To manage his time effectively, he has created a list of the jobs that must be finished. Job i requires a certain amount of time T\_i (1 <= T\_i <= 1,000) to complete and furthermore must be finished by time S\_i (1 <= S\_i <= 1,000,000). Farmer John starts his day at time t=0 and can only work on one job at a time until it is finished.

Even a maturing businessman likes to sleep late; help Farmer John determine the latest he can start working and still finish all the jobs on time.

作为一名忙碌的商人，约翰知道必须高效地安排他的时间。他有 $N(1\le N\le 1000)$ 个工作要做，比如给奶牛挤奶，清洗牛棚，修理栅栏之类的。

为了高效，约翰列出了所有工作的清单。第 $i(1\le i\le N)$ 个工作需要 $T_i(1\le T_i\le 1000)$ 单位的时间来完成，而且必须在 $1\le S_i\le 10^6$ 或之前完成。现在是 $0$ 时刻。约翰做一份工作必须直到做完才能停止。

所有的商人都喜欢睡懒觉。请帮约翰计算他最迟什么时候开始工作，可以让所有工作按时完成。（如果始终无法完成全部任务，输出 $-1$）

## 输入格式

\* Line 1: A single integer: N

\* Lines 2..N+1: Line i+1 contains two space-separated integers: T\_i and S\_i

## 输出格式

\* Line 1: The latest time Farmer John can start working or -1 if Farmer John cannot finish all the jobs on time.

## 样例

### 样例输入 #1
```
4 
3 5 
8 14 
5 20 
1 16 

```
### 样例输出 #1
```
2 

```
## 提示

Farmer John has 4 jobs to do, which take 3, 8, 5, and 1 units of time, respectively, and must be completed by time 5, 14, 20, and 16, respectively.


Farmer John must start the first job at time 2. Then he can do the second, fourth, and third jobs in that order to finish on time.



---

---
title: "[USACO10FEB] Chocolate Eating S"
layout: "post"
diff: 普及/提高-
pid: P2985
tag: ['贪心', '2010', '二分', 'USACO']
---
# [USACO10FEB] Chocolate Eating S
## 题目描述

Bessie has received N (1 <= N <= 50,000) chocolates from the bulls, but doesn't want to eat them too quickly, so she wants to plan out her chocolate eating schedule for the next D (1 <= D <= 50,000) days in order to maximize her minimum happiness level over the set of those days.

Bessie's happiness level is an integer that starts at 0 and halves (rounding down if necessary) over night as she sleeps. However, when she eats chocolate i, her happiness level increases by integer H\_i (1 <= H\_i <= 1,000,000). If she eats chocolates on a day, her happiness for that day is considered the happiness level after she eats the chocolates. Bessie insists that she eat the chocolates in the order that she received them.

If more than one optimal solution exists, print any one of them.

Consider a sequence of 5 chocolates to be eaten over a period of 5 days; they respectively bring happiness (10, 40, 13, 22, 7).

If Bessie eats the first chocolate (10 happiness) on the first day and then waits to eat the others, her happiness level is 10 after the first day.

Here is the complete schedule which turns out to maximize her minimum happiness:

Day  Wakeup happiness   Happiness from eating   Bedtime happiness 1            0                10+40                  50

2           25                 ---                   25

3           12                  13                   25

4           12                  22                   34

5           17                   7                   24

The minimum bedtime happiness is 24, which turns out to be the best Bessie can do.

Bessie 拿到了 $N$（$1 \leq N \leq 5\times 10 ^ 4$）块巧克力。她决定想个办法吃掉这些巧克力，使得它在吃巧克力的这段时间里，最不开心的一天尽可能的开心。并且一共吃 $D$（$1 \leq D \leq 5\times 10 ^ 4$）天。

每块巧克力有一个开心值 $H_i$（$1 \leq H_i \leq 10 ^ 6$），当某天你吃下那块巧克力时，你将获得那块巧克力的开心值。每一天的开心值是所有当天吃掉的巧克力的总开心值之和。每天晚上 Bessie 睡觉之后，它的开心值会减半。也就是说，比如昨天 Bessie 的开心值为 $50$，那么今天早上一醒来就会有 $25$ 点的开心值，舍去小数点后数字。另外，Bessie 还有一个怪癖，她喜欢按照巧克力本来的排列顺序吃。

Bessie 第一天的开心值为 $0$，求一个每天吃巧克力的方案，使得 Bessie 最不开心的一天尽可能的开心。

## 输入格式

\* Line 1: Two space separated integers: N and D

\* Lines 2..N+1: Line i+1 contains a single integer: H\_i

第一行：两个整数 $N$ 和 $D$，中间用空格分隔。

第 $2$ 行至第 $N + 1$ 行：每行一个整数，第 $i + 1$ 行表示 $H_i$ 的值。
## 输出格式

\* Line 1: A single integer, the highest Bessie's minimum happiness can be over the next D days

\* Lines 2..N+1: Line i+1 contains an integer that is the day on which Bessie eats chocolate i


第一行：一个整数，表示 Bessie 在 $D$ 天中最不开心的一天最大可能的开心值。

第 $2$ 至第 $n + 1$ 行，每行一个整数，第 $i + 1$ 行表示 Bessie 吃第 $i$ 块巧克力的日期。
## 样例

### 样例输入 #1
```
5 5 
10 
40 
13 
22 
7 

```
### 样例输出 #1
```
24 
1 
1 
3 
4 
5 

```


---

---
title: "三分"
layout: "post"
diff: 普及/提高-
pid: P3382
tag: ['二分', '三分', 'Special Judge']
---
# 三分
## 题目背景

本题可能存在严重精度问题，部分数据下难以通过。本题数据较水，仅供参考。
## 题目描述

如题，给出一个 $N$ 次函数，保证在范围 $[l, r]$ 内存在一点 $x$，使得 $[l, x]$ 上单调增，$[x, r]$ 上单调减。试求出 $x$ 的值。
## 输入格式

第一行一次包含一个正整数 $N$ 和两个实数 $l, r$，含义如题目描述所示。

第二行包含 $N + 1$ 个实数，从高到低依次表示该 $N$ 次函数各项的系数。
## 输出格式

输出为一行，包含一个实数，即为 $x$ 的值。若你的答案满足以下二者之一，则算正确：
- 你的答案 $x'$ 与标准答案 $x$ 的相对或绝对误差不超过 $10^{-5}$。
- 你的答案 $x'$ 与标准答案 $x$ 对应的函数值，即 $f(x') $ 和 $f(x)$ 的相对或绝对误差不超过 $10^{-5}$。


## 样例

### 样例输入 #1
```
3 -0.9981 0.5
1 -3 -3 1
```
### 样例输出 #1
```
-0.41421
```
## 提示

对于 $100\%$ 的数据，$6 \le N \le 13$，函数系数均在 $[-100,100]$ 内且至多 $15$ 位小数，$|l|,|r|\leq 10$ 且至多 $15$ 位小数。$l\leq r$。

**【样例解释】**

 ![](https://cdn.luogu.com.cn/upload/pic/2297.png) 

如图所示，红色段即为该函数 $f(x) = x^3 - 3 x^2 - 3x + 1$ 在区间 $[-0.9981, 0.5]$ 上的图像。

当 $x = -0.41421$ 时图像位于最高点，故此时函数在 $[l, x]$ 上单调增，$[x, r]$ 上单调减，故 $x = -0.41421$，输出 $-0.41421$。



---

---
title: "小鸟的设备"
layout: "post"
diff: 普及/提高-
pid: P3743
tag: ['贪心', '二分', 'Special Judge']
---
# 小鸟的设备
## 题目背景

小鸟有 $n$ 个可同时使用的设备。

## 题目描述

第 $i$ 个设备每秒消耗 $a_i$ 个单位能量。能量的使用是连续的，也就是说能量不是某时刻突然消耗的，而是匀速消耗。也就是说，对于任意实数，在 $k$ 秒内消耗的能量均为 $k\times a_i$ 单位。在开始的时候第 $i$ 个设备里存储着 $b_i$ 个单位能量。

同时小鸟又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能 $p$ 个单位，充能也是连续的，不再赘述。你可以在任意时间给任意一个设备充能，从一个设备切换到另一个设备的时间忽略不计。

小鸟想把这些设备一起使用，直到其中有设备能量降为  $0$。所以小鸟想知道，在充电器的作用下，她最多能将这些设备一起使用多久。
## 输入格式

第一行给出两个整数 $n,p$。

接下来 $n$ 行，每行表示一个设备，给出两个整数，分别是这个设备的 $a_i$ 和 $b_i$。

## 输出格式

如果小鸟可以无限使用这些设备，输出 $-1$。

否则输出小鸟在其中一个设备能量降为 $0$ 之前最多能使用多久。

设你的答案为 $a$，标准答案为 $b$，只有当 $a,b$ 满足 
$\dfrac{|a-b|}{\max(1,b)} \leq 10^{-4}$ 的时候，你能得到本测试点的满分。

## 样例

### 样例输入 #1
```
2 1
2 2
2 1000

```
### 样例输出 #1
```
2.0000000000
```
### 样例输入 #2
```
1 100
1 1
```
### 样例输出 #2
```
-1 
```
### 样例输入 #3
```
3 5
4 3
5 2
6 1
```
### 样例输出 #3
```
0.5000000000 
```
## 提示

对于 $100\%$ 的数据，$1\leq n\leq 100000$，$1\leq p\leq 100000$，$1\leq a_i,b_i\leq100000$。



---

---
title: "[TJOI2007] 路标设置"
layout: "post"
diff: 普及/提高-
pid: P3853
tag: ['模拟', '搜索', '2007', '二分', '各省省选', '天津']
---
# [TJOI2007] 路标设置
## 题目背景

B 市和 T 市之间有一条长长的高速公路，这条公路的某些地方设有路标，但是大家都感觉路标设得太少了，相邻两个路标之间往往隔着相当长的一段距离。为了便于研究这个问题，我们把公路上相邻路标的最大距离定义为该公路的“空旷指数”。

## 题目描述

现在政府决定在公路上增设一些路标，使得公路的“空旷指数”最小。他们请求你设计一个程序计算能达到的最小值是多少。请注意，公路的起点和终点保证已设有路标，公路的长度为整数，并且原有路标和新设路标都必须距起点整数个单位距离。

## 输入格式

第 $1$ 行包括三个数 $L,N,K$，分别表示公路的长度，原有路标的数量，以及最多可增设的路标数量。


第 $2$ 行包括递增排列的 $N$ 个整数，分别表示原有的 $N$ 个路标的位置。路标的位置用距起点的距离表示，且一定位于区间 $[0,L]$ 内。

## 输出格式

输出 $1$ 行，包含一个整数，表示增设路标后能达到的最小“空旷指数”值。

## 样例

### 样例输入 #1
```
101 2 1
0 101
```
### 样例输出 #1
```
51
```
## 提示

公路原来只在起点和终点处有两个路标，现在允许新增一个路标，应该把新路标设在距起点 $50$ 或 $51$ 个单位距离处，这样能达到最小的空旷指数 $51$。

$50\%$ 的数据中，$2 \leq N \leq 100$，$0 \leq K \leq 100$。

$100\%$ 的数据中，$2 \leq N \leq 100000$, $0 \leq K \leq100000$。

$100\%$ 的数据中，$0 < L \leq 10000000$。


---

---
title: "递增"
layout: "post"
diff: 普及/提高-
pid: P3902
tag: ['动态规划 DP', '二分', '树状数组', '离散化']
---
# 递增
## 题目描述

现有数 $A_1,A_2,\cdots,A_n$，修改最少的数字为**实数**，使得数列严格单调递增。

注：原题误表述为修改为整数，现已纠正为实数。本题数据确保按照修改为整数的做法也可以 AC（只是不能过样例）
## 输入格式

第一行，一个整数 $n$。

第二行，$n$ 个整数$A_1,A_2,\cdots,A_n$

## 输出格式

1 个整数，表示最少修改多少个数字

## 样例

### 样例输入 #1
```
3
1 3 2
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
8
1 2 3 4 4 5 6 7
```
### 样例输出 #2
```
1
```
## 提示

• 对于50% 的数据，$N \le 10^3$

• 对于100% 的数据，$1 \le N \le 10^5 , 1 \le A_i \le 10^9$



---

---
title: "[Code+#1] 木材"
layout: "post"
diff: 普及/提高-
pid: P4058
tag: ['二分', 'O2优化', '优先队列', 'Code+']
---
# [Code+#1] 木材
## 题目描述

有 $n$ 棵树，初始时每棵树的高度为 $H_i$，第 $i$ 棵树每月都会长高 $A_i$。现在有个木料长度总量为 $S$ 的订单，客户要求每块木料的长度不能小于  $L$，而且木料必须是整棵树（即不能为树的一部分）。现在问你最少需要等多少个月才能满足订单。

## 输入格式

第一行 $3$ 个用空格隔开的非负整数 $n,S,L$，表示树的数量、订单总量和单块木料长度限制。

第二行 $n$ 个用空格隔开的非负整数，依次为 $H_1,H_2, ... ,H_n$。

第三行 $n$ 个用空格隔开的非负整数，依次为 $A_1,A_2, ... ,A_n$。

## 输出格式

输出一行一个整数表示答案。

## 样例

### 样例输入 #1
```
3 74 51
2 5 2
2 7 9

```
### 样例输出 #1
```
7
```
## 提示

对于样例，在六个月后，各棵树的高度分别为 $14,47,56$，此时无法完成订单。

在七个月后，各棵树的高度分别为 $16,54,65$，此时可以砍下第 $2$ 和第 $3$ 棵树完成订单了。

 ![](https://cdn.luogu.com.cn/upload/pic/12821.png) 

来自 CodePlus 2017 11 月赛，清华大学计算机科学与技术系学生算法与竞赛协会 荣誉出品。

Credit：idea/郑林楷 命题/郑林楷 验题/王聿中

Git Repo：https://git.thusaac.org/publish/CodePlus201711

感谢腾讯公司对此次比赛的支持。



---

---
title: "[BJWC2008] 秦腾与教学评估"
layout: "post"
diff: 普及/提高-
pid: P4403
tag: ['2008', '倍增', '二分', '各省省选']
---
# [BJWC2008] 秦腾与教学评估
## 题目描述

在秦腾进入北京大学学习的第一个学期，就不幸遇到了前所未有的教学评估。

在教学评估期间，同学们被要求八点起床，十一点回宿舍睡觉，不 准旷课，上课不准迟到，上课不准睡觉……甚至连著名的北大三角地也在教学评估期间被以影响校容的理由被拆除。这些“变态”规定令习惯了自由自在随性生活学习的北大同学叫苦不迭。

这一天又到了星期五，一大早就是秦腾最不喜欢的高等代数课。可是因为是教学评估时期，不能迟到，于是他在八点五分的 时候挣扎着爬出了宿舍，希望能赶快混进在八点钟已经上课了的教室。

可是，刚一出宿舍楼门他就傻眼了: 从宿舍到教学楼的路上已经站满了教学评估团的成员。他们的目的就是抓住像他这样迟到的学生，扣除学校的分数。

秦腾当然不能让评估团得逞。他经过观察发现，整个评估团分成了N个小组，每个小组的成员都分布在从宿舍楼到教学楼的路上的某一段，并且同一小组的成员间的距离是相等的。于是，我们可以用三个整数S,
 E, D来描述评估团的小组: 既该小组的成员在从宿舍到教学楼的路上的:S, S + D, S + 2D, …, S + KD (K ∈ Z, S + KD ≤ E, S + (K + 1)D > E)位置。

观 察到了教学评估团的这一特点，又经过了认真的思考，秦腾想出了对策: 如果在路上的某一位置有奇数个教学评估团成员，他就可以运用调虎离山，声东击西，隔山打牛，暗度陈仓……等方法，以这一地点为突破口到达教学楼。

但是由于 教学评估团的成员的十分狡猾，成员位置安排的设计极其精妙，导致在整条路上几乎没有这样的位置出现。即使由于安排不慎重出现了这样的位置，最多也仅有一个。

现在秦腾观察出了所有小组的安排，但是由于整个教学评估团的人数太多，他实在看不出这样的位置是否存在。

现在，你的任务是写一个程序，帮助他做出判断。
## 输入格式

输入文件的第一行为一个整数T。

接下来输入T组相互独立的测试数据。

每组测试数据的第一行包含一个整数，代表N接下来的N行，每行三个整数Si, Ei, Di, 代表第i个小组对应的三个参数。
## 输出格式

对于每个测试数据，如果题目中所求的位置不存在，既任意位置都有偶数个教学评估团的成员存在，在输出文件的中打印一行:`Poor QIN Teng:(` (不包含引号)否则打印两个整数Posi, Count，代表在唯一的位置Posi，有Count个教学评估团的成员。

根据题意，Count应为奇数。
## 样例

### 样例输入 #1
```
3 
2 
1 10 1 
2 10 1 
2 
1 10 1 
1 10 1 
4 
1 10 1 
4 4 1 
1 5 1 
6 10 1 
```
### 样例输出 #1
```
1 1 
Poor QIN Teng:( 
4 3 
```
## 提示

教学评估团的总人数不大于10^8  

Si ≤ Ei  
1 ≤ T ≤ 5  
N ≤ 200000  
0 ≤ Si, Ei, Di ≤ 2^31 – 1  

输入文件的大小不大于2048KB 


---

---
title: "[USACO18DEC] Convention S"
layout: "post"
diff: 普及/提高-
pid: P5119
tag: ['2018', '二分', 'USACO']
---
# [USACO18DEC] Convention S
## 题目描述

一场别开生面的牛吃草大会就要在 Farmer John 的农场举办了！

世界各地的奶牛将会到达当地的机场，前来参会并且吃草。具体地说，有 $N$ 头奶牛到达了机场（$1\le N\le 10^5$），其中奶牛 $i$ 在时间 $t_i$（$0\le t_i\le 10^9$）到达。Farmer John 安排了 $M$（$1\le M\le 10^5$）辆大巴来机场接这些奶牛。每辆大巴可以乘坐 $C$ 头奶牛（$1\le C\le N$）。Farmer John 正在机场等待奶牛们到来，并且准备安排到达的奶牛们乘坐大巴。当最后一头乘坐某辆大巴的奶牛到达的时候，这辆大巴就可以发车了。Farmer John 想要做一个优秀的主办者，所以并不想让奶牛们在机场等待过长的时间。如果 Farmer John 合理地协调这些大巴，等待时间最长的奶牛等待的时间的最小值是多少？一头奶牛的等待时间等于她的到达时间与她乘坐的大巴的发车时间之差。

输入保证 $MC\ge N$。
## 输入格式

输入的第一行包含三个空格分隔的整数 $N$，$M$，和 $C$。第二行包含 $N$ 个空格分隔的整数，表示每头奶牛到达的时间。
## 输出格式

输出一行，包含所有到达的奶牛中的最大等待时间的最小值。
## 样例

### 样例输入 #1
```
6 3 2
1 1 10 14 4 3
```
### 样例输出 #1
```
4
```
## 提示

如果两头时间 $1$ 到达的奶牛乘坐一辆巴士，时间 $3$ 和时间 $4$ 到达的奶牛乘坐乘坐第二辆，时间 $10$ 和时间 $14$ 到达的奶牛乘坐第三辆，那么等待时间最长的奶牛等待了 $4$ 个单位时间（时间 $10$ 到达的奶牛从时间 $10$ 等到了时间 $14$）。


---

---
title: "[CEOI 2012] 工作规划"
layout: "post"
diff: 普及/提高-
pid: P6092
tag: ['贪心', '2012', '二分', 'CEOI（中欧）']
---
# [CEOI 2012] 工作规划
## 题目描述

CEOI 在 $N$ 天内收到了 $M$ 个任务，每个任务需要 $1$ 台机器工作 $1$ 天来完成。CEOI 有很多台机器，每台机器一天只能完成一个任务。 CEOI 要求每个任务最多只能推迟 $D$ 天完成。换言之，如果一个客户在第 $S$ 天提交了一个任务，CEOI 必须在第 $S+D$ 天之前完成它。

请你写程序求出每个任务最多推迟 $D$ 天的前提下，最少需要多少台机器才能按要求完成所有任务。
## 输入格式

第一行输入包含三个整数， $N$ 是 CEOI 接受任务的天数， $D$ 是每个任务最多可以推迟的天数。$M$ 是任务的个数。

第二行是 $M$ 个被空格分隔的整数。第 $i$ 个数代表收到第 $i$ 个任务时间。第 $N-D$ 天之后均没有任务。所有的任务按照输入顺序从 $1$ 到 $N$ 依次编号。
## 输出格式

输出一个整数，即能完成任务的最少机器数。
## 样例

### 样例输入 #1
```
8 2 12 
1 2 4 2 1 3 5 6 2 3 6 4
```
### 样例输出 #1
```
2
```
## 提示

对于 $50\%$ 的测试点，$M \le 10^5$。

对于所有测试点，$1 \le N \le {10}^5$，$0 \le D < N$ , $1 \le M< 10^6$。


---

---
title: "[USACO19FEB] Dishwashing G"
layout: "post"
diff: 普及/提高-
pid: P6099
tag: ['2019', '二分', 'USACO', '栈']
---
# [USACO19FEB] Dishwashing G
## 题目背景

Bessie 和 Elsie 正在帮助 Farmer John 洗碗，这是一个比人们想象的更复杂的过程。
## 题目描述

两头奶牛决定 Bessie 负责涂肥皂，Elsie 负责冲洗。

刚开始的时候，$N$ 个脏盘子（保证是从 $1$ 到 $N$ 的一个排列）堆在 Bessie 那里，而 Elsie 这边的堆是空的。而在她们俩之间，则有一张专门放涂过肥皂的盘子的桌子。

每个冲洗步骤需要执行以下两个操作之一：

- Bessie 从脏盘子堆顶取出一个盘子，涂上肥皂，然后放在桌子上。将这个盘子放在桌子上时，Bessie 只能放在现有的非空盘堆的顶端，或是在最右边新增一个盘堆。
- Elsie 从桌子最左边的盘堆的顶端拿起盘子，将它冲洗后放在干净的盘堆顶端。

她们希望干净的盘堆能按编号排序，编号最小的在底端，编号最大的在顶端。然而她们发现有的时候这并不可能做到。现在给定脏盘子的堆叠顺序，请你求出一个最大前缀，使得该前缀的所有盘子洗干净后，能按上面的要求堆叠。
## 输入格式

第一行一个整数 $N$（$1 \leq N \leq 10^5$）。

接下来 $N$ 行，每行一个整数，代表 Bessie 的脏盘子堆的堆叠顺序。输入的第一个盘子在堆的顶部。
## 输出格式

输出该序列的最大前缀长度，使得该前缀的所有盘子洗干净后，能按小号在下，大号在上的规则堆叠。
## 样例

### 样例输入 #1
```
5
4
5
2
3
1
```
### 样例输出 #1
```
4
```


---

---
title: "[USACO16JAN] Angry Cows S"
layout: "post"
diff: 普及/提高-
pid: P6174
tag: ['2016', '二分', 'USACO']
---
# [USACO16JAN] Angry Cows S
## 题目描述

Bessie 设计了一款新游戏：*Angry Cows*。在这个游戏中，玩家发射奶牛，每头奶牛落地时引爆一定范围内的干草。游戏的目标是使用一组奶牛引爆所有干草。

$N$ 捆干草排列在数轴上的不同位置。第 $i$ 捆干草的的位置为 $x_i$。如果一个威力为 $R$ 的奶牛在 $x$ 位置落地，她将引爆 $[x-R,x+R]$ 范围内的所有干草。

你现在可以发射 $K$ 头奶牛，每头奶牛的威力都是 $R$，现在你需要确定 $R$ 的最小值，使得用 $K$ 头奶牛可以引爆所有干草。
## 输入格式

第一行两个整数 $N,K$（$1 \leq N \leq 5 \times 10^4$，$1 \leq K \leq 10$）。

接下来 $N$ 行，第 $i$ 行一个整数 $x_i$（$0 \leq x_i \leq 10^9$）。
## 输出格式

输出一个整数，即 $R$ 的最小值。
## 样例

### 样例输入 #1
```
7 2
20
25
18
8
10
3
1
```
### 样例输出 #1
```
5
```


---

---
title: "[USACO20OPEN] Social Distancing S"
layout: "post"
diff: 普及/提高-
pid: P6281
tag: ['贪心', '2020', '二分', 'USACO']
---
# [USACO20OPEN] Social Distancing S
## 题目描述

由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们的健康。

为了限制疾病的传播，Farmer John 的 $N$ 头奶牛（$2\le N\le 10^5$）决定践行“社交距离”，分散到农场的各处。农场的形状如一维数轴，上有 $M$ 个互不相交的区间（$1\le M\le 10^5$），其中有可用来放牧的青草。奶牛们想要使她们位于不同的整数位置，每个位置上均有草，并且最大化 $D$ 的值，其中 $D$ 为最近的两头奶牛之间的距离。请帮助奶牛们求出 $D$ 的最大可能值。
## 输入格式

输入的第一行包含 $N$ 和 $M$。以下 $M$ 行每行用两个整数 $a$ 和 $b$ 描述一个区间，其中 $0\le a\le b\le 10^{18}$。没有两个区间有重合部分或在端点处相交。位于一个区间的端点上的奶牛视为在草上。
## 输出格式

输出 $D$ 的最大可能值，使得所有奶牛之间的距离均不小于 $D$ 单位。保证存在 $D>0$ 的解。
## 样例

### 样例输入 #1
```
5 3
0 2
4 7
9 9
```
### 样例输出 #1
```
2
```
## 提示

### 样例解释
取到 $D=2$ 的一种方式是令奶牛们处在位置 $0$、$2$、$4$、$6$ 和 $9$。

### 子任务
- 测试点 $2$-$3$ 满足 $b\le 10^5$。
- 测试点 $4$-$10$ 没有额外限制。


---

---
title: "[NOI Online #2 入门组] 未了"
layout: "post"
diff: 普及/提高-
pid: P6473
tag: ['贪心', '2020', '二分', 'NOI Online']
---
# [NOI Online #2 入门组] 未了
## 题目描述

由于触犯天神，Sisyphus 将要接受惩罚。

宙斯命 Sisyphus 推一块巨石上长度为 $L$ 的山坡。Sisyphus 匀速向上推的速度为每年 $v$ 的长度（由于是匀速，故经过 $\frac{1}{2}$ 年将能向上推 $\frac{v}{2}$ 的长度）。然而，宙斯并不希望 Sisyphus 太快到达山顶。宙斯可以施展 $n$ 个魔法，若宙斯施展第 $i$ 个魔法 $(1\leq i \leq n)$，则当 Sisyphus 第一次到达位置  $a_i$ 时，他将会同巨石一起滚落下山底，并从头推起。（滚落的时间忽略不计，即可看作第一次到达位置 $a_i$ 后 Sisyphus 立即从山底重新出发）

例如宙斯施用了 $a_i=3$ 和 $a_i=5$ 的两个魔法。Sisyphus 的速度 $v=1$ ，山坡的长度 $L = 6$，则他推石上山过程如下：

- 用 $3$ 年走到位置 $3$。

- 受 $a_i=3$ 的魔法影响，回到了山底出发。

- 再用 $3$ 年走到位置 $3$，然而因为是第二次到达，$a_i=3$ 的魔法不起作用。

- 用 $2$ 年走到位置 $5$。

- 受 $a_i=5$ 的魔法影响，回到了山底出发。

- 用 $6$ 年从山底走到了山顶。花费的总时间为 $14$ 年。

现在，宙斯有 $q$ 个询问。对于第 $i$ 个询问 $t_i$，宙斯想知道，他最少需要施展多少个魔法才能使 Sisyphus 到达山顶所用的年数大于 $t_i$
## 输入格式

第一行三个整数 $n,L,v$ 分别表示魔法的种类数，山坡的长度，Sisyphus 的速度。

第二行 $n$ 个整数。第 $i$ 个整数 $a_i$ 表示第 $i$ 个魔法作用的位置。$(1<i<n)$

第三行一个整数 $q$ 表示宙斯的询问个数。

接下来 $q$ 行每行一个整数，第 $i$ 行的整数 $t_i$ 表示宙斯的第 $i$ 个询问。$(1<i<n)$
## 输出格式

输出 $q$ 行，每行恰好一个整数，第 $i$ 行的整数对应第 $i$ 个询问的答案。$(1 \leq i\leq q)$

如果宙斯无论如何都不能使 Sisyphus 使用的年数大于 $t_i$，请输出 $-1$。
## 样例

### 样例输入 #1
```
3 6 3
3 5 1
4
1
3
4
5

```
### 样例输出 #1
```
0
1
2
-1

```
## 提示

1. 不使用任何魔法，Sisyphus 需要 $2$ 年走上山顶。
2. 使用魔法 $2$ ，Sisyphus 需要 $\frac{11}{3}$ 年走上山顶。（用时 $\frac{5}{3}$ 年走到魔法 $2$ 的位置并滚落下山，再用时 $\frac{6}{3}=2$ 年走到山顶）
3. 使用魔法 $1,2$ ，Sisyphus 需要 $\frac{14}{3}$ 年走上山顶。
4. 宙斯不能使 Sisyphus 用大于 $5$ 年的时间走上山顶。

对于测试点 $1\sim 8:n=1$。

对于测试点 $9\sim 12:n=2$。

对于测试点 $13\sim 17:n,q\le 1000$。

对于所有测试点：$1 \leq n,q \leq 2 \times 10^5$，$1\leq v\leq L\leq 10^{9}$，$1\leq a_i < L$，$1 \leq t_i\leq 10^9$。

数据保证 $a_i$ 两两不同。


---

---
title: "[COCI 2010/2011 #7] POŠTAR"
layout: "post"
diff: 普及/提高-
pid: P6705
tag: ['2010', '二分', 'COCI（克罗地亚）']
---
# [COCI 2010/2011 #7] POŠTAR
## 题目背景

Mirko 在一个山中小镇里得到了一个邮递员的差事。这个小镇可以用一个 $n \times n$ 的矩阵表示。每个区域有三种状态：用 $\texttt{K}$ 表示房屋，用 $\texttt{P}$ 表示邮局或用 $\texttt{.}$ 表示牧场。此外，每个区域被分配一个高度。

每天早晨，Mirko 都给镇上的每户人家送邮件。他从用 $\texttt{P}$ 表示的区域开始。Mirko 只能水平、垂直或斜向移动到相邻的区域。他一旦送完最后一封邮件，就必须返回邮局。

Mirko 不知道他的工作会有多无聊。令 Mirko 在投递邮件时所到的最高处和最低处的高度之差等于他的疲劳度。帮他找出疲劳度最小的方式，让 Mirko 投递所有的邮件。
## 题目描述

给定一个 $n \times n$ 的矩阵。

每个位置可能有 $\texttt{K}$ $\texttt{P}$ $\texttt{.}$ 三种可能状态，此外还有一个高度 $h_{i,j}$。

你需要从状态为 $\texttt{P}$ 的位置开始，水平、垂直或斜向移动，经过所有状态为 $\texttt{K}$ 的位置，最终回到起点。

在这路程中，你需要让经过的位置的 $max_h-min_h$ 最小化。

请你求出最小化的值。
## 输入格式

第一行包含一个整数 $n$。

下面的 $n$ 行每行 $n$ 个字符表示矩阵。

下面的 $n$ 行每行 $n$ 个正整数，表示区域高度。
## 输出格式

一个非负整数表示最小疲劳度。
## 样例

### 样例输入 #1
```
2
P.
.K
2 1
3 2
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
3
P..
.KK
...
3 2 4
7 4 2
2 3 1
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
3
K.P
...
K.K
3 3 4
9 5 9
8 3 7
```
### 样例输出 #3
```
5
```
## 提示

#### 样例 1 解释

从邮局开始，Mirko 可以直接移动到房屋，然后再回到邮局。因为这两个区域高度相同，所以 Mirko的疲劳等于  $0$。

#### 数据规模及约定


对于矩阵，其中 $\texttt{P}$ 将正好出现一次，而 $\texttt{K}$ 将至少出现一次。

对于 $100\%$ 的数据 $2 \le n \le 50$

#### 说明

本题满分 $100$ 分。

译自 [COCI2010-2011](https://hsin.hr/coci/archive/2010_2011/) [CONTEST #7](https://hsin.hr/coci/archive/2010_2011/contest7_tasks.pdf) T4 POŠTAR



---

---
title: "[COCI 2018/2019 #1] Cipele"
layout: "post"
diff: 普及/提高-
pid: P7305
tag: ['2018', '二分', 'COCI（克罗地亚）']
---
# [COCI 2018/2019 #1] Cipele
## 题目描述

在各种各样的项目上消耗经费之后，Nadan 决定为软件开发者提供高质量的鞋子。

Nadan 在地下室找到了 $N$ 只左脚鞋和 $M$ 只右脚鞋。因为它们的来源未知，因此鞋子的大小也不尽相同。

Nadan 想让你配对尽可能多的鞋子（即在所有鞋子配对完毕后不能继续配对）。每一对应当包含一只左脚鞋和一只右脚鞋。当穿上一双鞋时，应当使得鞋子的丑陋度最小化。一双鞋子的丑陋度定义为：所有配对的鞋子中，左脚和右脚大小之差的绝对值的最大值。
## 输入格式

第一行输入正整数 $N,M$，分别表示左脚鞋和右脚鞋的数量。

第二行输入 $N$ 个整数 $L_i$，表示左脚鞋的大小。

第二行输入 $M$ 个整数 $R_i$，表示右脚鞋的大小。
## 输出格式

输出所有配对方式中丑陋度的最小值。
## 样例

### 样例输入 #1
```
2 3
2 3
1 2 3
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
4 3
2 39 41 45
39 42 46
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
5 5
7 6 1 2 10
9 11 6 3 12
```
### 样例输出 #3
```
4
```
## 提示

#### 样例 2 解释

Nadan 的左脚鞋有 $4$ 只，右脚鞋有 $3$ 只，最多可以配成 $3$ 对。一种配对方式为：**39-46**，41-42，45-39，第一双的两只鞋大小之差的绝对值最大，因而丑陋度为 $7$。

一种更好的配对方式为：39-39，41-42，45-46。该配对方式的丑陋度为 $1$，为所有配对方式中，丑陋度最小的。

#### 数据规模与约定

对于 $20\%$ 的数据，$N=M$。

对于另外 $50\%$ 的数据，$N,M \le 5000$。

对于 $100\%$ 的数据，$1 \le N,M \le 10^5$，$1 \le L_i,R_i \le 10^9$。

#### 说明

**本题分值按 COCI 原题设置，满分 $90$。**

**题目译自 [COCI2018-2019](https://hsin.hr/coci/archive/2018_2019/) [CONTEST #1](https://hsin.hr/coci/archive/2018_2019/contest1_tasks.pdf)  _T3 Cipele_。**


---

---
title: "[USACO21OPEN] Acowdemia S"
layout: "post"
diff: 普及/提高-
pid: P7557
tag: ['二分', 'USACO', '2021']
---
# [USACO21OPEN] Acowdemia S
## 题目描述

由于对计算机科学的热爱，以及有朝一日成为 「Bessie 博士」的诱惑，奶牛 Bessie 开始攻读计算机科学博士学位。经过一段时间的学术研究，她已经发表了 $N$ 篇论文（$1 \leq N \leq 10^5$），并且她的第 $i$ 篇论文得到了来自其他研究文献的 $c_i$ 次引用（$0 \leq c_i \leq 10^5$）。

Bessie 听说学术成就可以用 $h$ 指数来衡量。$h$ 指数等于使得研究员有至少 $h$ 篇引用次数不少于 $h$ 的论文的最大整数 $h$。例如，如果一名研究员有 $4$ 篇论文，引用次数分别为 $(1,100,2,3)$，则 $h$ 指数为 $2$，然而若引用次数为 $(1,100,3,3)$ 则 $h$ 指数将会是 $3$。

为了提升她的 $h$ 指数，Bessie 计划写至多 $K$ 篇综述（$0 \leq K \leq 10^5$），并在每篇综述中引用许多她曾经写过的论文。然而，由于页数限制，她至多可以在一篇综述中引用 $L$ 篇论文（$0 \leq L \leq 10^5$）。当然，一篇综述中她只能引用一篇论文至多一次（但是一篇论文可以在多篇综述中被引用）。

请帮助 Bessie 求出在写完这些综述后她可以达到的最大 $h$ 指数。Bessie 不可以在一篇综述中引用她写的其他综述。

注意 Bessie 的导师可能会告知她纯粹为了提升 $h$ 指数而写综述存在违反学术道德的嫌疑；我们不建议其他学者模仿 Bessie 的行为。
## 输入格式

输入的第一行包含 $N$、$K$ 和 $L$。

第二行包含 $N$ 个空格分隔的整数 $c_1,\ldots, c_N$。
## 输出格式

输出最大可以达到的 $h$ 指数。
## 样例

### 样例输入 #1
```
4 4 1
1 100 1 1
```
### 样例输出 #1
```
3
```
## 提示

#### 样例说明

在这个样例中，Bessie 可以写至多一篇综述。如果 Bessie 引用她的第一、第三、第四篇论文中的任意一篇，她的 $h$ 指数会变为 $2$。

#### 测试点性质：

- 测试点 $1 \sim 6$ 满足 $N\le 100$。
- 测试点 $7 \sim 16$ 没有额外限制。

#### 说明

供题：Dhruv Rohatgi


---

---
title: "双重素数（2021 CoE-II A）"
layout: "post"
diff: 普及/提高-
pid: P7588
tag: ['数学', '二分', '2021', 'O2优化', '素数判断,质数,筛法']
---
# 双重素数（2021 CoE-II A）
## 题目描述

素数（质数）是指在大于 $1$ 的自然数中，除了 $1$ 和它本身以外不再有其他因数的自然数。定义**双重素数**为这样的素数：它的各位数字之和也是一个素数。给定一个闭区间，试确定在该区间内双重素数的个数。
## 输入格式

**输入包含多组测试数据。**

输入第一行包含一个整数 $T$，表示测试数据的组数。接下来每行一组测试数据，每组测试数据包含以空格分隔的两个整数 $L$ 和 $R$。
## 输出格式

每组测试数据输出一行，包含一个整数，表示在闭区间 $[L,\ R]$ 内双重素数的个数。
## 样例

### 样例输入 #1
```
4
3 3
4 4
1 5
1 15
```
### 样例输出 #1
```
1
0
3
5
```
## 提示

**样例说明**

从 $1$ 到 $15$ 共有 $6$ 个素数：$2$，$3$，$5$，$7$，$11$，$13$。前五个素数各自的数字之和也是素数，因此都是双重素数。素数 $13$ 的各位数字之和为 $4$，不是素数，故 $13$ 不是双重素数。

------------


**数据范围**

- Subtask $1$ ：$1 \le L \le R \le 10^2$，$10$ 分。
- Subtask $2$ ：$1 \le L \le R \le 10^4$，$20$ 分。
- Subtask $3$ ：$1 \le L \le R \le 10^6$，$60$ 分。
- Subtask $4$ ：$1 \le L \le R \le 10^8$，$10$ 分。

对于 $100\%$ 的数据，$1 \le T \le 100$。


------------

**提示（数据已经加强）**

最后一个子任务要求你的程序必须具有较高的空间使用效率和时间效率，否则容易超出内存限制或时间限制。


---

---
title: "[COCI 2014/2015 #7] PROSJEK"
layout: "post"
diff: 普及/提高-
pid: P7795
tag: ['2014', '二分', '单调队列', 'Special Judge', 'COCI（克罗地亚）']
---
# [COCI 2014/2015 #7] PROSJEK
## 题目描述

给定一个有 $n$ 个整数的数列 $a$。请找出一个长度至少为 $k$ 的连续子序列，使这个子序列的所有数的平均值最大。
## 输入格式

输入共 $2$ 行。

第一行输入两个整数 $n,k$。  
第二行输入 $n$ 个整数 $a_1,a_2,\dots,a_n$，表示数列 $a$ 的所有数。
## 输出格式

输出仅一行，一个实数，表示长度至少为 $k$ 的连续子序列的数的最大平均值。

在每个测试点中，只要你的程序给出的答案和标准答案的相对误差不超过 $10^{-3}$，你的程序就可以通过该测试点。
## 样例

### 样例输入 #1
```
4 1
1 2 3 4
```
### 样例输出 #1
```
4.000000
```
### 样例输入 #2
```
4 2
2 4 3 4
```
### 样例输出 #2
```
3.666666
```
### 样例输入 #3
```
6 3
7 1 2 1 3 6
```
### 样例输出 #3
```
3.333333
```
## 提示

**【数据范围】**

对于 $30\%$ 的数据，保证 $n\leqslant 5000$。  
对于所有数据，$1\leqslant k\leqslant n\leqslant 3\times 10^5$，$1\leqslant a_i\leqslant 10^6$。

**【题目来源】**

本题来源自 **_[COCI 2014-2015](https://hsin.hr/coci/archive/2014_2015/) [CONTEST 7](https://hsin.hr/coci/archive/2014_2015/contest7_tasks.pdf) T5 PROSJEK_**，按照原题数据配置，满分 $140$ 分。

由 [Eason_AC](https://www.luogu.com.cn/user/112917) 翻译整理提供。


---

---
title: "[WFOI - 01] 硬币（coin）"
layout: "post"
diff: 普及/提高-
pid: P7996
tag: ['数学', '二分', '洛谷原创', 'O2优化', '洛谷月赛']
---
# [WFOI - 01] 硬币（coin）
## 题目描述

你面前有一排 $n$ **堆**硬币排成一线，**同一堆硬币**的面值相同，记第 $i$ 堆硬币的面值为 $a_i$。而**每堆硬币**的数量都相同，记为 $x$。

现在你知道每第 $i$ 堆硬币的面值 $a_i$，你需要确定一个**正整数** $x$，使得**每堆硬币的总金额的**方差最接近于一个**正整数** $k$。

两数 **“最接近”** 的定义：两数之差的绝对值最小。

方差定义：方差 $s ^ 2 = \cfrac{(a_1 - \bar x)^2 + (a_2 - \bar x) ^ 2 + \cdots + (a_n - \bar x) ^ 2}{n}$，其中 $\bar x$ 代表 $x$ 的平均值。
## 输入格式

第一行两个数 $n,k$。

第二行 $n$ 个数，第 $i$ 个数表示 $a_i$，表示第 $i$ 堆硬币的面值 $a_i$。
## 输出格式

一行一个**正整数**，表示符合题意的 $x$ 值。如果有不同的答案，输出最小的一个。如果无论 $x$ 取什么值方差都为 $0$，输出一行 `No answer!`。
## 样例

### 样例输入 #1
```
7 47
7 2 4 6 3 7 10
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
4 4
4 4 4 4
```
### 样例输出 #2
```
No answer!
```
## 提示


**【样例 $\#1$ 解释】**

  当 $x=3$ 时，第 $i$ 个堆的硬币金额为 $3\times a_i$，这些硬币堆的金额分别为 $21,6,12,18,9,21,30$，可以计算得这些硬币金额的方差约为 $58.78$，可以证明当 $x=3$ 时方差最接近 $47$。

**【样例 $\#2$ 解释】**

  可以发现，无论 $x$ 的取值，方差都会为 $0$，所以输出 `No answer!`。







**【数据规模】**

**本题采用 Subtask 捆绑测试。**

Subtask 编号 | $n,\forall a_i\le$ | $k\le$ | $\footnotesize\texttt{测试点数目}$ |
:-: | :-: | :-: | :-:
**Subtask #0 $(20\texttt{pts})$** | $10^3$ | $10^9$| $6$ |
**Subtask #1 $(25\texttt{pts})$** | $10^5$ | $10^{12}$| $6$ |
**Subtask #2 $(25\texttt{pts})$** | $10^5$ | $10^{18}$| $6$ |
**Subtask #3 $(30\texttt{pts})$** | $7\times10^6$ | $3\times 10^{18}$| $6$ |

对于 $100\%$ 的数据，$1\le n,\forall a_i\le7\times10^6$，$1\le k\le3\times10^{18}$。记原来 $a$ 数组的方差为 $p$，则数据满足 $p=0$ 或 $p\in[0.25,\ 2^{63}-1]$ 。





**【提示】**

  本题读入量较大，请使用合适的读入方式。此处推荐[快速读入模板](https://www.luogu.com.cn/paste/bcfvgxr7)，对于 $\texttt{C/C++}$ 语言，你也可以使用 `scanf` 语句完成读入。
  
  为避免卡精度，建议 `C/C++` 选手使用 $\texttt{double}$ 类型，并不建议使用 `eps`。


---

---
title: "[JOI 2022 Final] 自学 (Self Study)"
layout: "post"
diff: 普及/提高-
pid: P8161
tag: ['贪心', '二分', '2022', 'O2优化', 'JOI（日本）']
---
# [JOI 2022 Final] 自学 (Self Study)
## 题目描述

在 JOI 高中高一的第三个学期的 $M$ 个星期的时间内，有 $N$ 门课，编号为 $1 \sim N$。每个星期有 $N$ 个课时，第 $i$ 个课时上课程 $i$ 的一节课。

比太郎是一位高一学生。对于 $N \times M$ 个课时中的每一个，他会选择如下行动中的一个：

- 行动 1：比太郎去上课。如果他去上了课程 $i$ 的一节课，那么他对课程 $i$ 的理解程度会增加 $A_i$。
- 行动 2：比太郎不去上课。他转而选择任意一门课，并且自学选中的那门课。如果他选中了课程 $i$ 进行了时长为一课时的自学，那么他对课程 $i$ 的理解程度会增加 $B_i$。

一开始，对每门课的理解程度都为 $0$。由于比太郎想要在课后练习算法竞赛，他在非上课时间内不会学习。当第三个学期的所有课时结束后，期末考就会举行。

比太郎不想挂科。所以他想要最大化在期末考时对每门课的理解程度的最小值。

给定学期的长度，课程的数量，以及对理解程度的提升数值，请写一个程序计算在期末考时对每门课的理解程度的最小值的最大可能值。
## 输入格式

第一行，两个正整数 $N, M$。

第二行，$N$ 个正整数 $A_1, A_2, \ldots, A_N$。

第三行，$N$ 个正整数 $B_1, B_2, \ldots, B_N$。
## 输出格式

输出一行，一个数，表示在期末考时对每门课的理解程度的最小值的最大可能值。
## 样例

### 样例输入 #1
```
3 3
19 4 5
2 6 2

```
### 样例输出 #1
```
18

```
### 样例输入 #2
```
2 1
9 7
2 6

```
### 样例输出 #2
```
7

```
### 样例输入 #3
```
5 60000
630510219 369411957 874325200 990002527 567203997
438920902 634940661 593780254 315929832 420627496

```
### 样例输出 #3
```
41397427274960

```
### 样例输入 #4
```
4 25
1 2 3 4
1 2 3 4

```
### 样例输出 #4
```
48

```
## 提示

**【样例解释 \#1】**

举个例子，如果比太郎按如下方式学习，则他对课程 $1, 2, 3$ 的理解程度将分别为 $19, 18, 19$。

- 第一周课程 $1$ 的课：自学课程 $2$；
- 第一周课程 $2$ 的课：自学课程 $2$；
- 第一周课程 $3$ 的课：去上课程 $3$ 的课；
- 第二周课程 $1$ 的课：去上课程 $1$ 的课；
- 第二周课程 $2$ 的课：自学课程 $3$；
- 第二周课程 $3$ 的课：去上课程 $3$ 的课；
- 第三周课程 $1$ 的课：自学课程 $3$；
- 第三周课程 $2$ 的课：自学课程 $2$；
- 第三周课程 $3$ 的课：去上课程 $3$ 的课。

由于对每门课的最小的理解程度不能大于等于 $19$，输出 $18$。

这个样例满足子任务 $3, 5$ 的限制。

**【样例解释 \#2】**

这个样例满足子任务 $1, 3, 5$ 的限制。

**【样例解释 \#3】**

这个样例满足子任务 $3, 5$ 的限制。

**【样例解释 \#4】**

这个样例满足子任务 $2, 3, 4, 5$ 的限制。

----

**【数据范围】**

**本题采用捆绑测试。**

对于 $100 \%$ 的数据，$1 \le N \le 3 \times {10}^5$，$1 \le M \le {10}^9$，$1 \le A_i, B_i \le {10}^9$。

- 子任务 $1$（$10$ 分）：$M = 1$。
- 子任务 $2$（$25$ 分）：$N \cdot M \le 3 \times {10}^5$，$A_i = B_i$。
- 子任务 $3$（$27$ 分）：$N \cdot M \le 3 \times {10}^5$。
- 子任务 $4$（$29$ 分）：$A_i = B_i$。
- 子任务 $5$（$9$ 分）：无特殊限制。

----

**译自 [JOI 2022 Final](https://www.ioi-jp.org/joi/2021/2022-ho/index.html) T2「[自習](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2.pdf) / [Self Study](https://www.ioi-jp.org/joi/2021/2022-ho/2022-ho-t2-en.pdf)」**


---

---
title: "[USACO22OPEN] Alchemy B"
layout: "post"
diff: 普及/提高-
pid: P8268
tag: ['二分', 'USACO', '递归', '2022']
---
# [USACO22OPEN] Alchemy B
## 题目描述

总是热衷于培养新的爱好的奶牛 Bessie 正在学习如何转化金属。对于 $1 \le i \le N \le 100$，她有 $a_i$（$0 \le a_i \le 10^4$）单位的金属 $i$。此外，她知道 $K$（$1\le K< N$）个配方，她可以融合若干种金属各一单位，制造一单位编号大于所有被融合金属的金属。另外保证，对于每种金属，Bessie 最多知道一种制造该金属的配方。

计算经过一系列转化后，Bessie 可能拥有的金属 $N$ 的最大单位数。
## 输入格式

输入的第一行包含 $N$。

第二行包含 $N$ 个整数 $a_i$。

第三行包含 $K$。

以下 $K$ 行每行包含两个整数 $L$ 和 $M$（$M\ge 1$），随后是 $M$ 个整数。后 $M$ 个整数表示配方中用于制造一单位金属 $L$ 所需要被融合的金属。输入保证 $L$ 大于这 $M$ 个数。
## 输出格式

输出在应用一系列零次或多次转化后，Bessie 可能拥有的金属 $N$ 的最大单位数。
## 样例

### 样例输入 #1
```
5
2 0 0 1 0
3
5 2 3 4
2 1 1
3 1 2
```
### 样例输出 #1
```
1
```
## 提示

【样例解释】

在这个例子中，以下是一种最优的转化方式：

- 将一单位金属 1 转化为金属 2。
- 将一单位金属 2 转化为金属 3。
- 将一单位金属 3 和金属 4 转化为金属 5。

现在 Bessie 还有一单位金属 1 和一单位金属 5。她无法再制造更多的金属 5。

【测试点性质】

- 测试点 2 中，对于 $1\le i< N$，一单位金属 $i$ 可以被转化为一单位金属 $i+1$；

- 测试点 3-4 中，每个配方均将一单位的一种金属转化为另一种金属；

- 测试点 5-11 没有额外限制。


---

---
title: "[蓝桥杯 2015 国 C] 机器人繁殖"
layout: "post"
diff: 普及/提高-
pid: P8629
tag: ['高精度', '2015', '二分', '蓝桥杯国赛']
---
# [蓝桥杯 2015 国 C] 机器人繁殖
## 题目描述

X 星系的机器人可以自动复制自己。它们用 $1$ 年的时间可以复制出 $2$ 个自己，然后就失去复制能力。
每年X星系都会选出 $1$ 个新出生的机器人发往太空。也就是说，如果X星系原有机器人 $5$ 个，  
$1$ 年后总数是：$5 + 9 = 14$  
$2$ 年后总数是：$5 + 9 + 17 = 31$

如果已经探测经过 $n$ 年后的机器人总数 $s$，你能算出最初有多少机器人吗？
## 输入格式

输入一行两个数字 $n$ 和 $s$，用空格分开，含义如上。$n$ 不大于 $100$，$s$ 位数不超过 $50$ 位。
## 输出格式

要求输出一行，一个整数，表示最初有机器人多少个。
## 样例

### 样例输入 #1
```
2 31
```
### 样例输出 #1
```
5
```
### 样例输入 #2
```
97 2218388550399401452619230609499
```
### 样例输出 #2
```
8
```
## 提示

时限 1 秒, 512M。蓝桥杯 2015 年第六届国赛


---

---
title: "[蓝桥杯 2018 省 B] 递增三元组"
layout: "post"
diff: 普及/提高-
pid: P8667
tag: ['动态规划 DP', '2018', '二分', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2018 省 B] 递增三元组
## 题目描述

给定三个整数数组 $A = [A_1, A_2,\cdots, A_N]$，$B = [B_1, B_2,\cdots, B_N]$，$C = [C_1, C_2,\cdots,C_N]$。

请你统计有多少个三元组 $(i, j, k)$ 满足：
1. $1 \le i, j, k \le N$  
2. $A_i < B_j < C_k$
## 输入格式

第一行包含一个整数 $N$。

第二行包含 $N$ 个整数 $ A_1, A_2,\cdots, A_N$。

第三行包含 $N$ 个整数 $ B_1, B_2,\cdots, B_N$。

第四行包含 $N$ 个整数 $ C_1, C_2,\cdots, C_N$。


## 输出格式

一个整数表示答案
## 样例

### 样例输入 #1
```
3
1 1 1
2 2 2
3 3 3
```
### 样例输出 #1
```
27
```
## 提示

对于 $30\%$ 的数据，$1 \le N \le 100$。

对于 $60\%$ 的数据，$1 \le N \le 1000$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$0 \le A_i, B_i, C_i \le 10^5$。


---

---
title: "[蓝桥杯 2021 省 B] 杨辉三角形"
layout: "post"
diff: 普及/提高-
pid: P8749
tag: ['二分', '2021', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2021 省 B] 杨辉三角形
## 题目描述

下面的图形是著名的杨辉三角形:

![](https://cdn.mathpix.com/cropped/2022_09_29_08f7179868ee6cb62df7g-11.jpg?height=350&width=704&top_left_y=944&top_left_x=676)

如果我们按从上到下、从左到右的顺序把所有数排成一列，可以得到如下数列：

$1,1,1,1,2,1,1,3,3,1,1,4,6,4,1, \ldots$

给定一个正整数 $N$，请你输出数列中第一次出现 $N$ 是在第几个数。
## 输入格式

输入一个整数 $N$ 。
## 输出格式

输出一个整数代表答案。
## 样例

### 样例输入 #1
```
6
```
### 样例输出 #1
```
13
```
## 提示

对于 $20 \%$ 的评测用例, $1 \leq N \leq 10$;

对于所有评测用例, $1 \leq N \leq 10^9$ 。 

蓝桥杯 2021 第一轮省赛 B 组 H 题。


---

---
title: "[蓝桥杯 2022 国 A] 环境治理"
layout: "post"
diff: 普及/提高-
pid: P8794
tag: ['二分', '2022', '最短路', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 A] 环境治理
## 题目描述

LQ 国拥有 $n$ 个城市，从 $0$ 到 $n - 1$ 编号，这 $n$ 个城市两两之间都有且仅有一条双向道路连接，这意味着任意两个城市之间都是可达的。每条道路都有一个属性 $D$，表示这条道路的灰尘度。当从一个城市 A 前往另一个城市 B 时，可能存在多条路线，每条路线的灰尘度定义为这条路线所经过的所有道路的灰尘度之和，LQ 国的人都很讨厌灰尘，所以他们总会优先选择灰尘度最小的路线。

LQ 国很看重居民的出行环境，他们用一个指标 $P$ 来衡量 LQ 国的出行环境，$P$ 定义为：

$$P=\sum \limits_{i=0}^{n-1} \sum \limits_{j=0}^{n-1} d(i,j)$$

其中 $d(i,j)$ 表示城市 $i$ 到城市 $j$ 之间灰尘度最小的路线对应的灰尘度的值。

为了改善出行环境，每个城市都要有所作为，当某个城市进行道路改善时，会将与这个城市直接相连的所有道路的灰尘度都减少 $1$，但每条道路都有一个灰尘度的下限值 $L$，当灰尘度达到道路的下限值时，无论再怎么改善，道路的灰尘度也不会再减小了。

具体的计划是这样的：

- 第 $1$ 天，$0$ 号城市对与其直接相连的道路环境进行改善；
- 第 $2$ 天，$1$ 号城市对与其直接相连的道路环境进行改善；

……
- 第 $n$ 天，$n - 1$ 号城市对与其直接相连的道路环境进行改善；
- 第 $n + 1$ 天，$0$ 号城市对与其直接相连的道路环境进行改善；
- 第 $n + 2$ 天，$1$ 号城市对与其直接相连的道路环境进行改善；

……

LQ 国想要使得 $P$ 指标满足 $P \leq Q$。请问最少要经过多少天之后，$P$ 指标可以满足 $P \leq Q$。如果在初始时就已经满足条件，则输出 $0$；如果永远不可能满足，则输出 $-1$。
## 输入格式

输入的第一行包含两个整数 $n, Q$，用一个空格分隔，分别表示城市个数和期望达到的 $P$ 指标。

接下来 $n$ 行，每行包含 $n$ 个整数，相邻两个整数之间用一个空格分隔，其中第 $i$ 行第 $j$ 列的值 $D_{i,j} (D_{i,j}=D_{j,i},D_{i,i} = 0)$ 表示城市 $i$ 与城市 $j$ 之间直接相连的那条道路的灰尘度。

接下来 $n$ 行，每行包含 $n$ 个整数，相邻两个整数之间用一个空格分隔，其中第 $i$ 行第 $j$ 列的值 $L_{i,j} (L_{i,j} = L_{j,i}, L_{i,i} = 0)$ 表示城市 $i$ 与城市 $j$ 之间直接相连的那条道路的灰尘度的下限值。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3 10
0 2 4
2 0 1
4 1 0
0 2 2
2 0 0
2 0 0
```
### 样例输出 #1
```
2

```
## 提示

**【样例说明】**

初始时的图如下所示，每条边上的数字表示这条道路的灰尘度：

![](https://cdn.luogu.com.cn/upload/image_hosting/5lz6auke.png)

此时每对顶点之间的灰尘度最小的路线对应的灰尘度为：

- $d(0, 0) = 0, d(0, 1) = 2, d(0, 2) = 3$；
- $d(1, 0) = 2, d(1, 1) = 0, d(1, 2) = 1$；
- $d(2, 0) = 3, d(2, 1) = 1, d(2, 2) = 0$。

初始时的 $P$ 指标为 $(2 + 3 + 1) \times 2 = 12$，不满足 $P \leq Q = 10$;

第一天，$0$ 号城市进行道路改善，改善后的图示如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/mrhf5wx6.png)

注意到边 $(0, 2)$ 的值减小了 $1$，但 $(0, 1)$ 并没有减小，因为 $L_{0,1} = 2$ ，所以 $(0, 1)$ 的值不可以再减小了。此时每对顶点之间的灰尘度最小的路线对应的灰尘度为：

- $d(0, 0) = 0, d(0, 1) = 2, d(0, 2) = 3$，
- $d(1, 0) = 2, d(1, 1) = 0, d(1, 2) = 1$，
- $d(2, 0) = 3, d(2, 1) = 1, d(2, 2) = 0$。

此时 $P$ 仍为 $12$。

第二天，1 号城市进行道路改善，改善后的图示如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/tjxis3yb.png)

此时每对顶点之间的灰尘度最小的路线对应的灰尘度为：

- $d(0, 0) = 0, d(0, 1) = 2, d(0, 2) = 2$，
- $d(1, 0) = 2, d(1, 1) = 0, d(1, 2) = 0$，
- $d(2, 0) = 2, d(2, 1) = 0, d(2, 2) = 0$。

此时的 $P$ 指标为 $(2 + 2) \times 2 = 8 < Q$，此时已经满足条件。

所以答案是 $2$。

**【评测用例规模与约定】**

- 对于 $30\%$ 的评测用例，$1 \leq n \leq 10$，$0 \leq L_{i,j} \leq D_{i,j} \leq 10$；
- 对于 $60\%$ 的评测用例，$1 \leq n \leq 50$，$0 \leq L_{i,j} \leq D_{i,j} \leq 10^5$；
- 对于所有评测用例，$1 \leq n \leq 100$，$0 \leq L_{i,j} \leq D_{i,j} \leq 10^5$，$0 \leq Q \leq 2^{31} - 1$。

蓝桥杯 2022 国赛 A 组 F 题。


---

---
title: "[蓝桥杯 2022 国 B] 卡牌"
layout: "post"
diff: 普及/提高-
pid: P8800
tag: ['贪心', '二分', '2022', '排序', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 B] 卡牌
## 题目描述

这天，小明在整理他的卡牌。

他一共有 $n$ 种卡牌，第 $i$ 种卡牌上印有正整数数 $i(i \in[1, n])$, 且第 $i$ 种卡牌现有 $a_{i}$ 张。

而如果有 $n$ 张卡牌，其中每种卡牌各一张，那么这 $n$ 张卡牌可以被称为一套牌。小明为了凑出尽可能多套牌，拿出了 $m$ 张空白牌, 他可以在上面写上数 $i$，将其当做第 $i$ 种牌来凑出套牌。然而小明觉得手写的牌不太美观，决定第 $i$ 种牌最多手写 $b_{i}$ 张。

请问小明最多能凑出多少套牌?
## 输入格式

输入共 3 行，第一行为两个正整数 $n$，$m$ 。

第二行为 $n$ 个正整数 $a_{1}, a_{2}, \ldots, a_{n}$ 。

第三行为 $n$ 个正整数 $b_{1}, b_{2}, \ldots, b_{n}$ 。

## 输出格式

一行，一个整数表示答案。
## 样例

### 样例输入 #1
```
4 5
1 2 3 4
5 5 5 5
```
### 样例输出 #1
```
3
```
## 提示

**【样例说明】**

这 $5$ 张空白牌中，拿 $2$ 张写 $1$，拿 $1$ 张写 $2$，这样每种牌的牌数就变为了 $3,3,3,4$，可以凑出 $3$ 套牌，剩下 $2$ 张空白牌不能再帮助小明凑出一套。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据，保证 $n \leq 2000$;

对于 $100 \%$ 的数据，保证 $n \leq 2 \times 10^{5} ; a_{i}, b_{i} \leq n ; m \leq n^{2}$ 。 

蓝桥杯 2022 国赛 B 组 C 题。


---

---
title: "[传智杯 #5 初赛] E-梅莉的市场经济学"
layout: "post"
diff: 普及/提高-
pid: P8873
tag: ['数学', '二分', '传智杯']
---
# [传智杯 #5 初赛] E-梅莉的市场经济学
## 题目背景

梅莉这个学期选修了经济学。但是主修心理学的她实在不擅长经济领域的分析，为此她时常抱怨自己学不会，想退课。

但是如果现在退掉的话这学期的学分就不够啦，因此她根据“梦中”的经历，“胡诌”了一个简单到不现实的市场模型，并依据这个模型编起了 essay。为了方便地编出图表，她需要写一个程序来查询每个时刻的市场贸易差。
## 题目描述

市场每一天的贸易差可以视为一个有周期性规律的数列 $a$：$\color{red}[0],\color{blue}[0,\allowbreak 1,\allowbreak 0,\allowbreak -1,\allowbreak 0],\color{red}[0,\allowbreak 1,\allowbreak 2,\allowbreak 1,\allowbreak 0,\allowbreak -1,\allowbreak -2,\allowbreak -1,\allowbreak 0],\allowbreak \color{blue}[0,\allowbreak 1,\allowbreak 2,\allowbreak 3,\allowbreak 2,\allowbreak 1,\allowbreak 0,\allowbreak -1,\allowbreak -2,\allowbreak -3,\allowbreak -2,\allowbreak -1,\allowbreak 0]\dots$ 具体而言，$a$ 可以被分为无穷段，第 $i$ 段的内容为 $\{0,\allowbreak 1,\allowbreak \cdots,\allowbreak i,\allowbreak i-1,\allowbreak \cdots,0,\allowbreak -1,\allowbreak \cdots,\allowbreak -i,\allowbreak -i+1,\allowbreak \cdots 0\}$。如下图所示，是将 $a$ 数列内的前一些点绘制在坐标轴上的情况：

![](https://cdn.luogu.com.cn/upload/image_hosting/wrl89jka.png)

现在梅莉对市场发起了 $q$ 次询问，每次她会给定一个 $k$，希望求出 $a_k$ 是多少。
## 输入格式

- 第一行有一个正整数 $q$，表示询问次数。
- 接下来 $q$ 行，每行一个正整数 $k$，描述每次询问。
## 输出格式

- 输出共 $q$ 行。对于每次询问，输出对应的结果。
## 样例

### 样例输入 #1
```
9
1
10
100
1000
10000
100000
1000000
10000000
100000000
```
### 样例输出 #1
```
0
1
6
-9
-11
-128
406
1629
5154
```
## 提示

对于所有数据，$1 \leq q \leq 10^5$，$1 \leq k \leq 4\times 10^{18}$。


---

---
title: "[PA 2021] Sumy"
layout: "post"
diff: 普及/提高-
pid: P9050
tag: ['贪心', '二分', '2021', '排序', 'PA（波兰）']
---
# [PA 2021] Sumy
## 题目描述

有 $n$ 条鱼，其中第 $i$ 条的质量为 $a_i$ 克。

$x$ 能吃掉 $y$ 当且仅当 $a_x > a_y$。

若 $x$ 吃了 $y$，$y$ 会消失，$a_x$ 会变为 $a_x + a_y$。

你可以随意指定吃鱼的顺序，直至留下一条鱼为止。

求每一条鱼是否可能被作为最后**唯一**的鱼留下。**若最终无法只剩下一条鱼，则每条鱼均不满足此条件。**
## 输入格式

第一行，一个整数 $n$；

第二行，$n$ 个整数 $a_1, a_2, \cdots, a_n$。
## 输出格式

一行，一个长度为 $n$ 的字符串 $s$，其中 $s_i = \text{T}$ 表示第 $i$ 条鱼满足上述条件，$s_i = \text{N}$ 表示第 $i$ 条鱼不满足上述条件。
## 样例

### 样例输入 #1
```
6
2 7 1 8 2 8
```
### 样例输出 #1
```
NTNTNT
```
### 样例输入 #2
```
3
5 4 4
```
### 样例输出 #2
```
TNN
```
## 提示

#### 样例 #1 解释
下面用 $x \rightarrow y$ 表示 $x$ 吃 $y$。

留下 $2$ 号鱼的一种方案如下：$2 \rightarrow 1, 2 \rightarrow 3, 2 \rightarrow 4, 2 \rightarrow 5, 2 \rightarrow 6$。
#### 数据范围
对于 $100\%$ 的数据，$1 \leq n \leq 5 \times 10^5$，$1 \leq a_i \leq 10^9$。


---

---
title: "[USACO23FEB] Cow-libi S"
layout: "post"
diff: 普及/提高-
pid: P9125
tag: ['二分', 'USACO', '2023']
---
# [USACO23FEB] Cow-libi S
## 题目描述

**Note: The time limit for this problem is 4s, two times the default.**

Somebody has been grazing in Farmer John's $G(1 \le G \le 10^5)$ private gardens! Using his expert forensic knowledge, FJ has been able to determine the precise time each garden was grazed. He has also determined that there was a single cow that was responsible for every grazing incident. 

In response to these crimes each of FJ's $N(1 \le N \le 10^5)$ cows have provided an alibi that proves the cow was in a specific location at a specific time. Help FJ test whether each of these alibis demonstrates the cow's innocence. 

A cow can be determined to be innocent if it is impossible for her to have travelled between all of the grazings and her alibi. Cows travel at a rate of $1$ unit distance per unit time. 
## 输入格式

The first line of input will contain $G$ and $N$ separated by a space.

The next $G$ lines contain the integers $x, y$, and $t (−10^9 \le x,y \le 10^9;0 \le t \le 10^9)$

separated by a space describing the location and time of the grazing. It will always be possible for a single cow to travel between all grazings.

The next $N$ lines contain $x$, $y$, and $t(−10^9 \le x,y \le 10^9;0 \le t \le 10^9)$ separated by a space describing the location and time of each cow's alibi. 
## 输出格式

Output a single integer: the number of cows with alibis that prove their innocence. 
## 样例

### 样例输入 #1
```
2 4
0 0 100
50 0 200
0 50 50
1000 1000 0
50 0 200
10 0 170
```
### 样例输出 #1
```
2
```
## 提示

### Explanation for Sample 1

There were two grazings; the first at $(0,0)$ at time 100 and the second at $(50,0)$ at time $200$.

The first cow's alibi does not prove her innocence. She has just enough time to arrive at the first grazing.

The second cow's alibi does prove her innocence. She is nowhere near any of the grazings.

Unfortunately for the third cow, being at the scene of the crime does not prove innocence.

Finally, the fourth cow is innocent because it's impossible to make it from her alibi to the final grazing in time. 

### SCORING

 - Inputs $2-4$: $1 \le G,N \le 10^3$. Also, for both the fields and alibis, $−10^6 \le x,y \le 10^6$ and $0 \le t \le 10^6$.
 - Inputs $5-11$: No additional constraints.
## 题目翻译

### 题目描述

注意：本题的时间限制为 4 秒，是默认限制的两倍。

有人在 Farmer John 的 $G(1 \leq G \leq 10^5)$ 个私人花园里偷吃了庄稼！通过他的专业法医知识，Farmer John 确定了每个花园被偷吃的具体时间。他还发现，这些事件的罪魁祸首是一头单独的奶牛。

为了回应这些犯罪行为，Farmer John 的 $N(1 \leq N \leq 10^5)$ 头奶牛每头都提供了一个不在作案现场的证明（即“不在场证明”），表明奶牛在特定时间出现在特定位置。请帮助 Farmer John 判断这些“不在场证明”中哪些能够证明奶牛的清白。

如果一头奶牛无法在她的“不在场证明”位置与所有被偷吃地点之间往返，则可以确定这头奶牛是清白的。奶牛的移动速度为每单位时间 $1$ 单位距离。本题中提到的距离均为欧几里得距离。

### 输入格式

第一行包含两个用空格分隔的整数 $G$ 和 $N$。

接下来的 $G$ 行，每行包含三个用空格分隔的整数 $x, y, t$（$-10^9 \leq x, y \leq 10^9; 0 \leq t \leq 10^9$），描述某次偷吃事件的地点和时间。可以保证单独一头奶牛可以在所有被偷吃地点之间往返。

接下来的 $N$ 行，每行包含 $x, y, t$（$-10^9 \leq x, y \leq 10^9; 0 \leq t \leq 10^9$），描述某头奶牛的“不在场证明”中提到的位置和时间。

### 输出格式

输出一个整数，表示能够证明清白的奶牛的数量。

### 样例 1 的解释

共有两次偷吃事件，第一次发生在 $(0,0)$，时间为 $100$；第二次发生在 $(50,0)$，时间为 $200$。

- 第一头奶牛的“不在场证明”无法证明她的清白。她刚好有足够的时间到达第一次偷吃事件的地点。
- 第二头奶牛的“不在场证明”能够证明她的清白。她远离任何偷吃事件的地点。
- 不幸的是，第三头奶牛在偷吃事件的现场，这并不能证明她的清白。
- 最后，第四头奶牛是清白的，因为她不可能在时间限制内从她的“不在场证明”地点赶到最后一次偷吃事件的地点。

### 评分标准

- 测试点 $2-4$：$1 \leq G, N \leq 10^3$。此外，对于偷吃地点和“不在场证明”，$-10^6 \leq x, y \leq 10^6$ 且 $0 \leq t \leq 10^6$。
- 测试点 $5-11$：无额外限制。


---

---
title: "[SDCPC 2023] Fast and Fat"
layout: "post"
diff: 普及/提高-
pid: P9559
tag: ['贪心', '二分', '2023', '山东', 'O2优化', 'XCPC']
---
# [SDCPC 2023] Fast and Fat
## 题目描述

You're participating in a team competition of trail running. There are $n$ members in your team where $v_i$ is the speed of the $i$-th member and $w_i$ is his/her weight.

The competition allows each team member to move alone or carry another team member on their back. When member $i$ carries member $j$, if member $i$'s weight is greater than or equal to member $j$'s weight, member $i$'s speed remains unchanged at $v_i$. However, if member $i$'s weight is less than member $j$'s weight, member $i$'s speed will decrease by the difference of their weight and becomes $v_i - (w_j - w_i)$. If member $i$'s speed will become negative, then member $i$ is not able to carry member $j$. Each member can only carry at most one other member. If a member is being carried, he/she cannot carry another member at the same time.

For all members not being carried, the speed of the slowest member is the speed of the whole team. Find the maximum possible speed of the whole team.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:

The first line contains an integer $n$ ($1 \le n \le 10^5$) indicating the number of team members.

For the following $n$ lines, the $i$-th line contains two integers $v_i$ and $w_i$ ($1 \le v_i, w_i \le 10^9$) indicating the speed and weight of the $i$-th member.

It's guaranteed that the sum of $n$ of all test cases will not exceed $10^5$.
## 输出格式

For each test case output one line containing one integer indicating the maximum speed of the whole team.
## 样例

### 样例输入 #1
```
2
5
10 5
1 102
10 100
7 4
9 50
2
1 100
10 1
```
### 样例输出 #1
```
8
1
```
## 提示

The optimal strategy for the sample test case is shown as follows:

- Let member $1$ carry member $4$. As $w_1 > w_4$, member $1$'s speed remains unchanged, which is still $10$.
- Let member $3$ carry member $2$. As $w_3 < w_2$, member $3$'s speed will decrease by $w_2 - w_3 = 2$ and becomes $10 - 2 = 8$.
- Member $5$ shall move alone. His/Her speed is $9$.

So the answer is $8$.
## 题目翻译

**【题目描述】**

您正在参加一场团体越野比赛。您的队伍共有 $n$ 名队员，其中第 $i$ 名队员的速度为 $v_i$，体重为 $w_i$。

比赛允许每名队员独立行动，也允许一名队员背着另一名队员一起行动。当队员 $i$ 背着队员 $j$ 时，如果队员 $i$ 的体重大于等于队员 $j$，则队员 $i$ 的移动速度不会变化，仍然为 $v_i$；如果队员 $i$ 的体重小于队员 $j$，则队员 $i$ 的移动速度会减去两者的体重差值，即变为 $v_i - (w_j - w_i)$。如果队员 $i$ 的移动速度将变为负数，则队员 $i$ 无法背起队员 $j$。每名队员最多只能背负另一名队员，被背负的队员无法同时背负其他队员。

所有未被背负的队员中，最慢的队员的速度，即为整个队伍的速度。求整个队伍能达到的最大速度。

**【输入格式】**

有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数，对于每组测试数据：

第一行输入一个整数 $n$（$1 \le n \le 10^5$）表示队员人数。

对于接下来 $n$ 行，第 $i$ 行输入两个整数 $v_i$ 和 $w_i$（$1 \le v_i, w_i \le 10^9$）表示第 $i$ 名队员的速度和体重。

保证所有数据中 $n$ 之和不超过 $10^5$。

**【输出格式】**

每组数据输出一个整数，表示整个队伍可以达到的最大速度。

**【样例解释】**

样例数据的最优策略如下：

- 队员 $1$ 背起队员 $4$。因为 $w_1 > w_4$，因此队员 $1$ 速度不变，仍然为 $10$。
- 队员 $3$ 背起队员 $2$。因为 $w_3 < w_2$，因此队员 $3$ 的速度减少 $w_2 - w_3 = 2$，即速度变为 $10 - 2 = 8$。
- 队员 $5$ 独立行动，速度为 $9$。

因此答案为 $8$。


---

---
title: "「NnOI R2-T4」Colorful Days♪"
layout: "post"
diff: 普及/提高-
pid: P9572
tag: ['二分', '洛谷原创', 'O2优化']
---
# 「NnOI R2-T4」Colorful Days♪
## 题目描述

给出如下定义：

1. 定义 $ AB $ 为 $ A $ 数组后拼接 $ B $ 数组。
2. 定义 $ A^{0}=\{\} $（即空数组），且对 $i=1,2,3,\cdots$，$ A^{i}=A^{i-1}A$。
2. 定义 $ \operatorname{LCS}(A,B) $ 为 $ A $ 数组和 $ B $ 数组的**最长公共子序列**长度。

现给定长度为 $ n $ 的数组 $ S $ 和长度为 $ m $ 的数组 $ T $，数组中的数均为正整数。

你现在需要找到最小的非负整数 $k$，使得 $ \operatorname{LCS}(S^k,T) $ 最大。

出题人很仁慈，如果你无法最小化 $k$，你也可以拿到一部分分数。
## 输入格式

第一行四个整数 $ n,m,c_1,c_2 $，后两个整数为输出参数 0 或 1。

第二行 $ n $ 个正整数，代表 $ S $ 数组。

第三行 $ m $ 个正整数，代表 $ T $ 数组。
## 输出格式

输出两个整数 $ c_1 \cdot \operatorname{LCS}(S^k,T)$ 和 $c_2\cdot k$。
## 样例

### 样例输入 #1
```
3 4 1 1
23 34 53
53 25 23 34
```
### 样例输出 #1
```
3 2
```
### 样例输入 #2
```
9 10 1 1
15 12 26 21 26 21 23 12 23
26 11 21 15 16 15 12 23 17 12
```
### 样例输出 #2
```
7 3
```
## 提示

**【样例 1 解释】**

当 $k = 2$ 时，$S^k = \text{\{23 34 \textcolor{red}{53 23 34} 53\}}$，其中标红的是 $S^k$ 和 $T$ 的最长公共子序列。

**【数据范围】**

**提示：本题开启捆绑测试。**

对于 $ 100\% $ 的数据，保证 $ 1 \le n,m,S_i,T_i \le 10^6 $，$ c_1,c_2 \in \{0,1\} $。

$$
\def\r{\cr\hline}
\def\None{\text{None}}
\def\arraystretch{1.5}
\begin{array}{c|c|c}
\textbf{Subtask} & \textbf{Sp. Constraints} & \textbf{Score}\r
\textsf1& c_1=c_2=0 & 2 \r
\textsf2& n \le 10^3，m \le 10^2 & 8 \r
\textsf3& n \le 10^4，m \le 10^3 & 15 \r
\textsf4& c_2=0 & 15 \r
\textsf5& n,m \le 10^5，S_i,T_i \le 26 & 20 \r
\textsf6& 无特殊限制 & 40 \r
\end{array}
$$

在赛后新添加的 hack 测试点会加入 subtask7。

### 题目来源

| 项目 | 人员 |
|:-:|:-:|
|idea| 船酱魔王 |
|data| 船酱魔王 |
|check| Sudohry |
|solution| 船酱魔王 |


---

---
title: "[GDCPC 2023] Path Planning"
layout: "post"
diff: 普及/提高-
pid: P9698
tag: ['二分', '2023', '广东', 'O2优化', 'XCPC']
---
# [GDCPC 2023] Path Planning
## 题目描述

There is a grid with $n$ rows and $m$ columns. Each cell of the grid has an integer in it, where $a_{i, j}$ indicates the integer in the cell located at the $i$-th row and the $j$-th column. Each integer from $0$ to $(n \times m - 1)$ (both inclusive) appears exactly once in the grid.

Let $(i, j)$ be the cell located at the $i$-th row and the $j$-th column. You now start from $(1, 1)$ and need to reach $(n, m)$. When you are in cell $(i, j)$, you can either move to its right cell $(i, j + 1)$ if $j < m$ or move to its bottom cell $(i + 1, j)$ if $i < n$.

Let $\mathbb{S}$ be the set consisting of integers in each cell on your path, including $a_{1, 1}$ and $a_{n, m}$. Let $\text{mex}(\mathbb{S})$ be the smallest non-negative integer which does not belong to $\mathbb{S}$. Find a path to maximize $\text{mex}(\mathbb{S})$ and calculate this maximum possible value.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ indicating the number of test cases. For each test case:

The first line contains two integers $n$ and $m$ ($1 \le n, m \le 10^6$, $1 \le n \times m \le 10^6$) indicating the number of rows and columns of the grid.

For the following $n$ lines, the $i$-th line contains $m$ integers $a_{i, 1}, a_{i, 2}, \cdots, a_{i, m}$ ($0 \le a_{i, j} < n \times m$) where $a_{i, j}$ indicates the integer in cell $(i, j)$. Each integer from $0$ to $(n \times m - 1)$ (both inclusive) appears exactly once in the grid.

It's guaranteed that the sum of $n \times m$ of all test cases will not exceed $10^6$.
## 输出格式

For each test case output one line containing one integer indicating the maximum possible value of $\text{mex}(\mathbb{S})$.
## 样例

### 样例输入 #1
```
2
2 3
1 2 4
3 0 5
1 5
1 3 0 4 2
```
### 样例输出 #1
```
3
5
```
## 提示

For the first sample test case there are $3$ possible paths.

- The first path is $(1, 1) \to (1, 2) \to (1, 3) \to (2, 3)$. $\mathbb{S} = \{1, 2, 4, 5\}$ so $\text{mex}(\mathbb{S}) = 0$.
- The second path is $(1, 1) \to (1, 2) \to (2, 2) \to (2, 3)$. $\mathbb{S} = \{1, 2, 0, 5\}$ so $\text{mex}(\mathbb{S}) = 3$.
- The third path is $(1, 1) \to (2, 1) \to (2, 2) \to (2, 3)$. $\mathbb{S} = \{1, 3, 0, 5\}$ so $\text{mex}(\mathbb{S}) = 2$.

So the answer is $3$.

For the second sample test case there is only $1$ possible path, which is $(1, 1) \to (1, 2) \to (1, 3) \to (1, 4) \to (1, 5)$. $\mathbb{S} = \{1, 3, 0, 4, 2\}$ so $\text{mex}(\mathbb{S}) = 5$.
## 题目翻译

**【题目描述】**

有一个 $n$ 行 $m$ 列的网格。网格里的每个格子都写着一个整数，其中第 $i$ 行第 $j$ 列的格子里写着整数 $a_{i, j}$。从 $0$ 到 $(n \times m - 1)$ 的每个整数（含两端）在网格里都恰好出现一次。

令 $(i, j)$ 表示位于第 $i$ 行第 $j$ 列的格子。您现在需要从 $(1, 1)$ 出发并前往 $(n, m)$。当您位于格子 $(i, j)$ 时，您可以选择走到右方的格子 $(i, j + 1)$（若 $j < m$），也可以选择走到下方的格子 $(i + 1, j)$（若 $i < n$）。

令 $\mathbb{S}$ 表示路径上每个格子里的整数形成的集合，包括 $a_{1, 1}$ 和 $a_{n, m}$。令 $\text{mex}(\mathbb{S})$ 表示不属于 $\mathbb{S}$ 的最小非负整数。请找出一条路径以最大化 $\text{mex}(\mathbb{S})$，并求出这个最大的值。

**【输入格式】**

有多组测试数据。第一行输入一个整数 $T$ 表示测试数据组数。对于每组测试数据：

第一行输入两个整数 $n$ 和 $m$（$1 \le n, m \le 10^6$，$1 \le n \times m \le 10^6$）表示网格的行数和列数。

对于接下来 $n$ 行，第 $i$ 行输入 $m$ 个整数 $a_{i, 1}, a_{i, 2}, \cdots, a_{i, m}$（$0 \le a_{i, j} < n \times m$），其中 $a_{i, j}$ 表示格子 $(i, j)$ 里的整数。从 $0$ 到 $(n \times m - 1)$ 的每个整数（含两端）在网格里都恰好出现一次。

保证所有数据 $n \times m$ 之和不超过 $10^6$。

**【输出格式】**

每组数据输出一行一个整数，表示最大的 $\text{mex}(\mathbb{S})$。

**【样例解释】**

对于第一组样例数据，共有 $3$ 条可能的路径。

- 第一条路径为 $(1, 1) \to (1, 2) \to (1, 3) \to (2, 3)$。$\mathbb{S} = \{1, 2, 4, 5\}$ 因此 $\text{mex}(\mathbb{S}) = 0$。
- 第二条路径为 $(1, 1) \to (1, 2) \to (2, 2) \to (2, 3)$。$\mathbb{S} = \{1, 2, 0, 5\}$ 因此 $\text{mex}(\mathbb{S}) = 3$。
- 第三条路径为 $(1, 1) \to (2, 1) \to (2, 2) \to (2, 3)$。$\mathbb{S} = \{1, 3, 0, 5\}$ 因此 $\text{mex}(\mathbb{S}) = 2$。

因此答案为 $3$。

对于第二组样例数据，只有 $1$ 条可能的路径，即 $(1, 1) \to (1, 2) \to (1, 3) \to (1, 4) \to (1, 5)$。$\mathbb{S} = \{1, 3, 0, 4, 2\}$ 因此 $\text{mex}(\mathbb{S}) = 5$。


---

---
title: "[ICPC 2020 Shanghai R] Walker"
layout: "post"
diff: 普及/提高-
pid: P9822
tag: ['数学', '2020', '二分', '上海', 'Special Judge', 'O2优化', 'ICPC']
---
# [ICPC 2020 Shanghai R] Walker
## 题目描述

As a world-famous traveler, Prof. Pang's research interest is to travel as many places as possible in his life.

We have a segment $[0, n]$. There are two travelers on it. The first one is on position $p_1$ with velocity $v_1$ (which means s/he can walk $v_1$ unit on the segment per second). The second one is on position $p_2$ with velocity $v_2$.

From their respective beginning points, travelers can walk on the segment. They cannot walk outside the segment. Whenever they want to change their direction, they can turn around immediately.

Please help Prof. Pang to calculate the minimum  possible time by which every position of the segment is passed by at least one traveler.
## 输入格式

The first line contains one integer $test~(1\le test\le 10000)$ -- the number of test cases.

The $i$-th of the next $test$ lines contains five numbers $n, p_{1, i}, v_{1, i}, p_{2, i}, v_{2, i}$ ($0 < n \le 10000$, $0\le p_{1, i},p_{2, i} \le n$, $0.001 \le v_{1, i},v_{2, i} \le 1000$). All numbers have at most $3$ digits after the decimal point.
## 输出格式

For each test case, we should output one number -- the minimum time that every position of the segment is passed by at least one traveler.

Your answer is considered correct if its absolute or relative error does not exceed $10^{-6}$.
## 样例

### 样例输入 #1
```
2
10000.0 1.0 0.001 9999.0 0.001
4306.063 4079.874 0.607 1033.423 0.847
```
### 样例输出 #1
```
5001000.0000000000
3827.8370013755
```
## 题目翻译

作为著名的旅行者，Prof. Pang 的研究兴趣是在一生中到尽可能多的地方旅游。

在一条 $[0,n]$ 的线段上有两名旅行者，第一名在位置 $p_1$ 以 $v_1$ （每秒钟可以走 $v_1$ 单位的距离）的速度开始运动，第二名在位置 $p_2$ 以 $v_2$ 的速度开始运动。

从他们分别的起始点出发，旅行者可以在线段上移动，但不可以走出线段。他们可以随时改变自己的方向。

请帮助 Prof. Pang 计算至少需要多少时间，线段上的每个位置都至少被一名旅行者经过。


---

---
title: "[USACO20JAN] Race B"
layout: "post"
diff: 普及/提高-
pid: P9948
tag: ['数学', '贪心', '2020', '二分', 'USACO', 'O2优化']
---
# [USACO20JAN] Race B
## 题目描述

Bessie 正在参加一场 $K$（$1\le K\le 10^9$）米的跑步比赛。她从 $0$ 米每秒的速度开始比赛。在每一秒中，她可以选择将她的速度增加 $1$ 米每秒，保持速度不变，或者将她的速度减少 $1$ 米每秒。例如，在第一秒中，她可以将她的速度增加到 $1$ 米每秒，跑 $1$ 米，或者保持她的速度 $0$ 米每秒不变，跑 $0$ 米。Bessie 的速度不会降低到小于零。

Bessie 始终朝着终点线的方向跑，她想要花费整数秒的时间完成比赛。此外，她不想在终点时跑得太快：在 Bessie 跑完 $K$ 米的时刻，她希望她的速度不超过 $X$（$1\le X\le 10^5$）米每秒。Bessie 想要对于 $N$（$1\le N\le 1000$）个不同的 $X$ 值知道她多快可以完成比赛。 
## 输入格式

输入的第一行包含两个整数 $K$ 和 $N$。

以下 $N$ 行每行包含一个整数 $X$。 
## 输出格式

输出 $N$ 行，每行包含一个整数，表示 Bessie 完成比赛时的速度小于或等于 $X$ 的情况下跑完 $K$ 米需要的最小时间。 
## 样例

### 样例输入 #1
```
10 5
1
2
3
4
5
```
### 样例输出 #1
```
6
5
5
4
4
```
## 提示

### 样例解释 1

当 $X=1$ 时，一种最优方案为：

1. 将速度增加到 $1$ 米/秒，跑 $1$ 米
2. 将速度增加到 $2$ 米/秒，跑 $2$ 米，总计跑 $3$ 米
3. 将速度保持在 $2$ 米/秒，总计跑 $5$ 米
4. 将速度保持在 $2$ 米/秒，总计跑 $7$ 米
5. 将速度保持在 $2$ 米/秒，总计跑 $9$ 米
6. 将速度降低到 $1$ 米/秒，总计跑 $10$ 米

当 $X=3$ 时，一种最优方案为：

1. 将速度增加到 $1$ 米/秒，跑 $1$ 米
2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米
3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米
4. 将速度保持在 $3$ 米/秒，总计跑 $9$ 米
5. 将速度保持在 $3$ 米/秒，总计跑 $12$ 米

注意当 $X=3$ 时，以下方案是不合法的：

1. 将速度增加到 $1$ 米/秒，跑 $1$ 米
2. 将速度增加到 $2$ 米/秒，总计跑 $3$ 米
3. 将速度增加到 $3$ 米/秒，总计跑 $6$ 米
4. 将速度增加到 $4$ 米/秒，总计跑 $10$ 米

这是因为在 Bessie 跑完 $10$ 米的时刻，她的速度是 $4$ 米/秒。 


---

---
title: "[USACO20OPEN] Social Distancing I B"
layout: "post"
diff: 普及/提高-
pid: P9952
tag: ['贪心', '2020', '二分', 'USACO', 'O2优化']
---
# [USACO20OPEN] Social Distancing I B
## 题目描述

一种新型疾病，COWVID-19，开始在全世界的奶牛之间传播。Farmer John 正在采取尽可能多的预防措施来防止他的牛群被感染。

Farmer John 的牛棚是一个狭长的建筑物，有一排共 $N$ 个牛栏（$2\le N\le 10^5$）。有些牛栏里目前有奶牛，有些目前空着。得知“社交距离”的重要性，Farmer John 希望使得 $D$ 尽可能大，其中 $D$ 为最近的两个有奶牛的牛栏的距离。例如，如果牛栏 $3$ 和 $8$ 是最近的有奶牛的牛栏，那么 $D=5$。

最近两头奶牛新来到 Farmer John 的牛群，他需要决定将她们分配到哪两个之前空着的牛栏。请求出他如何放置这两头新来的奶牛，使得 $D$ 仍然尽可能大。Farmer John 不能移动任何已有的奶牛；他只想要给新来的奶牛分配牛栏。 
## 输入格式

输入的第一行包含 $N$。下一行包含一个长为 $N$ 的字符串，由 $0$ 和 $1$ 组成，描述牛棚里的牛栏。$0$ 表示空着的牛栏，$1$ 表示有奶牛的牛栏。字符串中包含至少两个 $0$，所以有至少有足够的空间安置两头新来的奶牛。
## 输出格式

输出 Farmer John 以最优方案在加入两头新来的奶牛后可以达到的最大 $D$ 值（最近的有奶牛的牛栏之间的距离）。 
## 样例

### 样例输入 #1
```
14
10001001000010
```
### 样例输出 #1
```
2
```
## 提示

### 样例解释 1

在这个例子中，Farmer John 可以以这样的方式加入奶牛，使得牛栏分配变为 `10x010010x0010`，其中 `x` 表示新来的奶牛。此时 $D=2$。不可能在加入奶牛之后取到更大的 $D$ 值。 

### 测试点性质

- 测试点 $2-6$ 满足 $N\le 10$。
- 测试点 $7-8$ 满足 $N\le 100$。
- 测试点 $9-11$ 满足 $N\le 5000$。
- 测试点 $12-15$ 没有额外限制。


---

---
title: "[USACO23DEC] Cowntact Tracing 2 B"
layout: "post"
diff: 普及/提高-
pid: P9975
tag: ['贪心', '二分', 'USACO', '2023', 'O2优化']
---
# [USACO23DEC] Cowntact Tracing 2 B
## 题目描述

Farmer John 有 $N$ 头奶牛排成一列（$1 \leq N \leq 3\cdot 10^5$）。不幸的是，有一种疾病正在传播。

最初，有一些奶牛被感染。每到夜晚，被感染的奶牛会将疾病传播给它左右两边的奶牛（如果这些奶牛存在的话）。一旦奶牛被感染，她就会持续处于感染状态。

经过一些晚上，Farmer John 意识到情况已经失控，因此他对奶牛进行了检测以确定哪些奶牛感染了疾病。请找出最少有多少头奶牛最初可能感染了这种疾病。
## 输入格式

第一行为一个整数 $N$，即 Farmer John 拥有的奶牛数量。

接下来一行，包含长度为 $N$ 的由 $1$ 和 $0$ 组成的位串。其中 $1$ 表示一头被感染的奶牛，$0$ 表示一头在经过若干晚之后仍未被感染的奶牛。
## 输出格式

输出一个整数，表示最少有多少头奶牛可能最初感染了这种疾病。
## 样例

### 样例输入 #1
```
5
11111
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
6
011101
```
### 样例输出 #2
```
4
```
## 提示

### 样例解释 1

假设只有中间的奶牛最初被感染。那么，奶牛们将按以下顺序被感染：

- 第 $0$ 晚：$00100$（第三只奶牛一开始被感染）
- 第 $1$ 晚：$01110$（第二和第四只奶牛现在被感染了）
- 第 $2$ 晚：$11111$（第一和第五只奶牛现在被感染了）
- 第 $3$ 晚：$11111$（所有的奶牛都已经被感染了，没有新的奶牛被感染）
- ……

经过两个或更多的晚上，奶牛们的状态即与输入的状态相符。还有许多其他的初始状态和夜晚数量可能导致了输入的状态，例如：

- 第 $0$ 晚：$10001$
- 第 $1$ 晚：$11011$
- 第 $2$ 晚：$11111$

或者：

- 第 $0$ 晚：$01001$
- 第 $1$ 晚：$11111$

或者：

- 第 $0$ 晚：$01000$
- 第 $1$ 晚：$11100$
- 第 $2$ 晚：$11110$
- 第 $3$ 晚：$11111$

所有这些初始状态中至少有一头奶牛被感染。

### 样例解释 2

唯一可能导致这个最终状态的初始状态和夜晚数是：没有经过任何夜晚，输入中的四头感染的奶牛都是从最开始就感染了这种疾病。

### 测试点性质

- 测试点 $3-7$ 满足 $N \le 1000$。
- 测试点 $8-12$ 没有额外限制。


---


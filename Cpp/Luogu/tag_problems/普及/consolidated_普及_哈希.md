---
title: "[海淀区小学组 2025] 统计数对"
layout: "post"
diff: 普及/提高-
pid: B4241
tag: ['二分', '2025', '北京', '哈希 hashing', '科创活动', '小学活动']
---
# [海淀区小学组 2025] 统计数对
## 题目背景

2025 年海淀区中小学生信息学竞赛小学组复赛题目，数据为洛谷自造。

为更好区分不同时间复杂度的做法，本题时间限制下调到 500 毫秒。
## 题目描述

陶陶是一个计算机爱好者，对二进制数有着特别的喜好，遇到各种各样的数据，他总能找到跟 $2$ 的整数次幂的关系。现在，他获得了一个长度为 $n$ 的数列 $a_1, a_2, \dots, a_n$，他发现其中有些元素的和恰好是 $2$ 的整数次幂。对于给定的 $a_1, a_2, \dots, a_n$，你的任务是统计有多少个数对 $(i, j)$ 满足 $a_i + a_j = 2^x$，其中 $x \in \N^*$，$i < j$，这里 $\N^*$ 表示正整数集合。

## 输入格式

第一行包含一个整数 $n$，第二行包含 $n$ 个整数 $a_1, a_2, \dots, a_n$。
## 输出格式

仅有一个正整数，表示满足 $a_i + a_j$ 是 $2$ 的整数次幂的数对 $(i, j)$ 的个数。
## 样例

### 样例输入 #1
```
4
7 3 2 1
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
3
1 1 1
```
### 样例输出 #2
```
3
```
## 提示

- 对于 $40\%$ 的数据，$1 \leq n \leq 10^3$，对于每一个正整数 $i$，$1 \leq i \leq n$，都有 $1 \leq a_i \leq 10^9$。
- 对于另外 $60\%$ 的数据，$1 \leq n \leq 10^5$，对于每一个正整数 $i$，$1 \leq i \leq n$，都有 $1 \leq a_i \leq 10^9$。


---

---
title: "[CCC 2007] Snowflake Snow Snowflakes"
layout: "post"
diff: 普及/提高-
pid: P10467
tag: ['2007', 'CCC（加拿大）', '哈希 hashing']
---
# [CCC 2007] Snowflake Snow Snowflakes
## 题目描述

You may have heard that no two snowflakes are alike. Your task is to write a program to determine whether this is really true. Your program will read information about a collection of snowflakes, and search for a pair that may be identical. Each snowflake has six arms. For each snowflake, your program will be provided with a measurement of the length of each of the six arms. Any pair of snowflakes which have the same lengths of corresponding arms should be flagged by your program as possibly identical.
## 输入格式

The first line of input will contain a single integer $n$, $0 < n \le 100000$ , the number of snowflakes to follow. This will be followed by $n$ lines, each describing a snowflake. Each snowflake will be described by a line containing six integers (each integer is at least $0$ and less than $10000000$) , the lengths of the arms of the snow ake. The lengths of the arms will be given in order around the snowflake (either clockwise or counterclockwise), but they may begin with any of the six arms. For example, the same snowflake could be described as $1 2 3 4 5 6$ or $4 3 2 1 6 5$ . 
## 输出格式

If all of the snowflakes are distinct, your program should print the message:

`No two snowflakes are alike.`

If there is a pair of possibly identical snow akes, your program should print the message:

`Twin snowflakes found.`
## 样例

### 样例输入 #1
```
2 
1 2 3 4 5 6 
4 3 2 1 6 5
```
### 样例输出 #1
```
Twin snowflakes found.
```
## 题目翻译

**【题目描述】**

你可能听说过没有两片雪花是相同的。你的任务是编写一个程序来确定这是否真的是正确的。你的程序将读取关于一组雪花的信息，并搜索可能相同的一对雪花。每片雪花有六条“角”。对于每片雪花，你的程序将提供每条角的长度测量。任何一对长度对应的角相同的雪花都应该被你的程序标记为可能相同。

**【输入格式】**

输入的第一行包含一个整数 $n$，$0 < n \le 100000$，表示接下来的雪花数量。接下来的 $n$ 行描述每片雪花。每片雪花由包含六个整数的一行描述（每个整数至少为 $0$ 且小于 $10000000$），表示雪花的六条角的长度。角的长度将按顺序围绕着雪花给出（顺时针或逆时针），但它们可以从六个角中的任何一条开始。例如，同一片雪花可以描述为 $1\ 2\ 3\ 4\ 5\ 6$ 或 $4\ 3\ 2\ 1\ 6\ 5$。

**【输出格式】**

如果所有的雪花都是不同的，你的程序应该打印消息：

`No two snowflakes are alike.`

如果有一对可能相同的雪花，你的程序应该打印消息：

`Twin snowflakes found.`

翻译来自于：[ChatGPT](https://chatgpt.com/)


---

---
title: "兔子与兔子"
layout: "post"
diff: 普及/提高-
pid: P10468
tag: ['哈希 hashing']
---
# 兔子与兔子
## 题目描述

很久很久以前，森林里住着一群兔子。

有一天，兔子们想要研究自己的 DNA 序列。

我们首先选取一个好长好长的 DNA 序列（小兔子是外星生物，DNA 序列可能包含 $26$ 个小写英文字母）。

然后我们每次选择两个区间，询问如果用两个区间里的 DNA 序列分别生产出来两只兔子，这两个兔子是否一模一样。

注意两个兔子一模一样只可能是他们的 DNA 序列一模一样。
## 输入格式

第一行输入一个 DNA 字符串 $S$。

第二行一个数字 $m$，表示 $m$ 次询问。

接下来 $m$ 行，每行四个数字 $l_1, r_1, l_2, r_2$，分别表示此次询问的两个区间，注意字符串的位置从 $1$ 开始编号。
## 输出格式

对于每次询问，输出一行表示结果。

如果两只兔子完全相同输出 `Yes`，否则输出 `No`（注意大小写）。
## 样例

### 样例输入 #1
```
aabbaabb
3
1 3 5 7
1 3 6 8
1 2 1 2
```
### 样例输出 #1
```
Yes
No
Yes
```
## 提示

数据保证，$1 \le |S|,m \le 1000000$。其中，$|S|$ 为字符串 $S$ 的长度。


---

---
title: "匹配统计"
layout: "post"
diff: 普及/提高-
pid: P10479
tag: ['O2优化', '哈希 hashing']
---
# 匹配统计
## 题目描述

阿轩在纸上写了两个字符串，分别记为 $A$ 和 $B$。利用在数据结构与算法课上学到的知识，他很容易地求出了"字符串 $A$ 从任意位置开始的后缀子串“与“字符串 $B$”匹配的长度。

不过阿轩是一个勤学好问的同学，他向你提出了 $Q$ 个问题：在每个问题中，他给定你一个整数 $X$，请你告诉他有多少个位置，满足“字符串 $A$ 从该位置开始的后缀子串"与 $B$ 匹配的长度恰好为 $X$。

例如：A=aabcde，B=ab，则 $A$ 有 aabcde、abcde、bcde、cde、de、e 这 $6$ 个后缀子串，它们与 $B=ab$ 的匹配长度分别是 $1,2,0,0,0,0$。因此 $A$ 有 $4$ 个位置与 $B$ 的匹配长度恰好为 $0$，有 $1$ 个位置的匹配长度恰好为 $1$，有 $1$ 个位置的匹配长度恰好为 $2$。
## 输入格式

第一行三个整数 $N,M,Q$，表示 $A$ 串长度、$B$ 串长度、问题个数。

第二行是字符串 $A$，第三行是字符串 $B$。

接下来 $Q$ 行每行 $1$ 个整数 $x$，表示一个问题。


## 输出格式

共 $Q$ 行，依次表示每个问题的答案。
## 样例

### 样例输入 #1
```
6 2 5
aabcde
ab
0
1
2
3
4
```
### 样例输出 #1
```
4
1
1
0
0
```
## 提示

数据保证，$1\leq N,M,Q,X\leq 200000$。


---

---
title: "[EPXLQ2024 fall round] 风吹起了从前"
layout: "post"
diff: 普及/提高-
pid: P11412
tag: ['排序', '哈希 hashing', '字典树 Trie']
---
# [EPXLQ2024 fall round] 风吹起了从前
## 题目背景

对于过去，温昭雪有着断断续续的记忆。
## 题目描述

具体地，她有 $n$ 条记忆，每条记忆是一个长度不超过 $100$ 的字符串。第 $i$ 条记忆 $S_i$ 位于她心灵的 $r_i$ 深处，对她有 $v_i$ 的价值。

温昭雪正在试图恢复自己记忆中的美好，可记忆实在太多太复杂，她只能想到她记忆的一段前缀 $Q$ 和她能到达的最深位置 $d$。只有满足对应的 $Q$ 是 $S_i$ 的前缀且 $r_i \le d$ 的记忆才能被温昭雪回想到。

现在，温昭雪有 $m$ 次尝试。她想知道，对于每次尝试，她能获得的所有记忆价值之和是多少。
## 输入格式

输入第一行包含 $n,m$。

以下 $n$ 行，每行两个整数 $r_i,v_i$ 和一个字符串 $S_i$，空格分隔。

以下 $m$ 行，每行一个整数 $d$ 和一个字符串 $Q$，空格分隔。保证 $Q$ 至少是某一个 $S_i$ 的前缀，**但不保证一定存在一个记忆能被回想到**。
## 输出格式

输出 $m$ 行，每行表示对于每次尝试，她能获得的所有记忆价值之和是多少。
## 样例

### 样例输入 #1
```
5 6
5 6 abcab
7 10 abcba
4 3 abc
3 6 ade
2 4 cde
2 abc
4 abc
5 abc
6 a
7 c
8 ab
```
### 样例输出 #1
```
0
3
9
15
4
19
```
## 提示

### 提示

本题对前缀的定义为：对于字符串 $S,P$，若 $|P| \le |S|$ 且对所有 $1 \le i \le |P|$ 均有 $S_i=P_i$，则称 $P$ 是 $S$ 的前缀。

### 数据规模与约定

**本题采用捆绑测试。**

| $\text{Subtask}$ | $n \le$ | $ m\le$ | 特殊性质 | 分值 |
| :-: | :-: | :-: | :-: | :-: |
| $0$ | $100$ | $100$ | | $11$ |
| $1$ | $10^4$ | $10^5$ | $d = 10^9$ | $13$ |
| $2$ | $10^4$ | $10^5$ | 字符串长度不超过 $2$ | $9$ |
| $3$ | $10^4$ | $10^3$ | | $26$ |
| $4$ | $10^4$ | $10^5$ | | $41$ |

对于所有数据，保证 $1 \le |S_i|,|Q| \le100, 0 \le r_i,v_i,d \le 10^9$，所有字符串仅由小写字母组成。

请注意时间复杂度常数因子带来的影响。

请考虑使用较快的输入输出方式。


---

---
title: "【模板】哈希表"
layout: "post"
diff: 普及/提高-
pid: P11615
tag: ['哈希表']
---
# 【模板】哈希表
## 题目背景

本题读入量较大，建议使用快速读入。

```
char buf[1<<23],*p1=buf,*p2=buf;
#define gc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)
inline unsigned long long rd() {//读入一个 64 位无符号整数
	unsigned long long x=0;
	char ch=gc();
	while(!isdigit(ch))ch=gc();
	while(isdigit(ch)) x=x*10+(ch^48),ch=gc();
	return x;
}
```
## 题目描述

你需要维护一个映射 $f:[0,2^{64})\to[0,2^{64})$，初始 $\forall x\in [0,2^{64}),f(x)=0$。

有 $n$ 次操作，每次操作给出二元组 $(x,y)$，表示查询 $f(x)$ 的值，之后 $f(x)\gets y$。
## 输入格式

第一行，一个正整数 $n$。

接下来 $n$ 行，每行两个整数 $x,y$ 描述一次操作。
## 输出格式

为了减少输出量，设第 $i$ 次操作的答案为 $ans_i$，你只需要输出 $\sum_{i=1}^ni\times ans_i$ 对 $2^{64}$ 取模的结果。
## 样例

### 样例输入 #1
```
5
0 4
0 998244353
1000000000000000000 20120712
1000000000000000000 1000000000000000000
1000000000000000000 998244353
```
### 样例输出 #1
```
5000000000080482856
```
## 提示

样例的 $ans$ 分别为：$0,4,0,20120712,1000000000000000000$。

对于 $100\%$ 的数据，$1\le n \le 5\times 10^6,0\le x,y<2^{64}$。

| 子任务 | $n$ |
| :----------: | :----------: |
| $0$ | $\le 10$ |
| $1$ | $\le 10^5$ |
| $2$ | $\le 10^6$ |
| $3$ | $\le 5\times 10^6$ |
| $4$ | $\le 5\times 10^6$ |

子任务 $0\sim 3$ 的数据生成方式较为随机，子任务 $4$ 是针对 `unordered_map`，`gp_hash_table`，`cc_hash_table` 和一些错误的哈希方式等的 hack。

如果你认为你的代码复杂度正确却没有通过，记得使用快速读入。


---

---
title: "魔族密码"
layout: "post"
diff: 普及/提高-
pid: P1481
tag: ['树形 DP', '哈希 hashing', '字典树 Trie', '差分']
---
# 魔族密码
## 题目背景

风之子刚走进他的考场，就……

花花：当当当当~~偶是魅力女皇——花花！！^^（华丽出场，礼炮，鲜花）

风之子：我呕……（杀死人的眼神）快说题目！否则……-\_-###
## 题目描述



花花：……咦~~好冷~~我们现在要解决的是魔族的密码问题（自我陶醉：搞不好魔族里面还会有人用密码给我和菜虫写情书咧，哦活活，当然是给我的比较多拉\*^\_^\*）。

魔族现在使用一种新型的密码系统。每一个密码都是一个给定的仅包含小写字母的英文单词表，每个单词至少包含 $1$ 个字母，至多 $75$ 个字母。如果在一个由一个词或多个词组成的表中，除了最后一个以外，每个单词都被其后的一个单词所包含，即前一个单词是后一个单词的前缀，则称词表为一个词链。例如下面单词组成了一个词链：

- $\verb!i!$；
- $\verb!int!$；
- $\verb!integer!$。

但下面的单词不组成词链：

- $\verb!integer!$；
- $\verb!intern!$。

现在你要做的就是在一个给定的单词表中取出一些词，组成最长的词链，就是包含单词数最多的词链。将它的单词数统计出来，就得到密码了。

风之子：密码就是最长词链所包括的单词数阿……

## 输入格式

这些文件的格式是，第一行为单词表中的单词数 $N$（$1 \le N \le 2000$），下面每一行有一个单词，按字典顺序排列，中间也没有重复的单词。
## 输出格式

输出共一行，一个整数，表示密码。
## 样例

### 样例输入 #1
```
5
i
int
integer
intern
internet

```
### 样例输出 #1
```
4

```


---

---
title: "[蓝桥杯 2015 国 B] 密文搜索"
layout: "post"
diff: 普及/提高-
pid: P8630
tag: ['2015', '哈希 hashing', '蓝桥杯国赛']
---
# [蓝桥杯 2015 国 B] 密文搜索
## 题目描述

福尔摩斯从 X 星收到一份资料，全部是小写字母组成。

他的助手提供了另一份资料：许多长度为 $8$ 的密码列表。

福尔摩斯发现，这些密码是被打乱后隐藏在先前那份资料中的。

请你编写一个程序，从第一份资料中搜索可能隐藏密码的位置。要考虑密码的所有排列可能性。
## 输入格式

输入第一行：一个字符串 $s$，全部由小写字母组成，长度小于 $1024 \times 1024$。

紧接着一行是一个整数 $n,$ 表示以下有 $n$ 行密码，$1 \le n \le 1000$。

紧接着是 $n$ 行字符串，都是小写字母组成，长度都为 $8$。
## 输出格式

一个整数，表示每行密码的所有排列在 $s$ 中匹配次数的总和。
## 样例

### 样例输入 #1
```
aaaabbbbaabbcccc
2
aaaabbbb
abcabccc
```
### 样例输出 #1
```
4
```
## 提示

第一个密码匹配了 $3$ 次，第二个密码匹配了 $1$ 次，一共 $4$ 次。

时限 3 秒, 512M。蓝桥杯 2015 年第六届国赛


---

---
title: "「RiOI-03」匀速相遇"
layout: "post"
diff: 普及/提高-
pid: P9914
tag: ['洛谷原创', 'O2优化', '哈希 hashing', '洛谷月赛', '双指针 two-pointer']
---
# 「RiOI-03」匀速相遇
## 题目背景

当大家都在加速时，我与你，在人生中的十字路口，匀速地相遇了。

确是惊动我心的一瞥，却是无法逗留的遗憾，我们再次，朝着自己的方向匀速奔跑。下次再见，又会是什么时候呢……
## 题目描述

平面直角坐标系上有 $n + m$ 个点，其中：

- 有 $n$ 个 $\rm A$ 类点，它们在初始时依次位于位置 $(1, 0), (2, 0), (3, 0), \dots, (n, 0)$。
- 有 $m$ 个 $\rm B$ 类点，它们在初始时依次位于位置 $(0, 1), (0, 2), (0, 3), \dots, (0, m)$。

在某一个时刻，$\rm A, B$ 类点同时开始运动。具体地：

- 对于第 $i$ 个 $\rm A$ 类点，其以 $a_i$ 个单位长度每秒的速度向上（即 $y$ 轴正方向）匀速运动。特别地，若 $a_i = 0$，则该点始终保持静止。
- 对于第 $i$ 个 $\rm B$ 类点，其以 $b_i$ 个单位长度每秒的速度向右（即 $x$ 轴正方向）匀速运动。特别地，若 $b_i = 0$，则该点始终保持静止。

相遇与分离实在是再平凡不过的了。作为匆匆时光里的一名过客，在这个你暂留的驿站里，你能否帮小 T 解决这个简单的问题：求出有多少点对会在某个时刻相遇，即它们在某一刻共点。

由于你无法使时间静止，所以所有点无论相遇与否，都会永无止境地运动下去。祝愿在这道路上奔跑的你，能有一天与理想匀速相遇，永不停息。
## 输入格式

第一行两个正整数 $n, m$。

第二行 $n$ 个整数 $a_1\dots a_n$，依次表示第 $1\dots n$ 个 $\rm A$ 类点的运动速度。

第三行 $m$ 个整数 $b_1\dots b_m$，依次表示第 $1\dots m$ 个 $\rm B$ 类点的运动速度。
## 输出格式

一行一个整数，表示有多少点对会在某个时刻相遇。
## 样例

### 样例输入 #1
```
3 3
1 2 3
3 2 1
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
3 3
2 5 1
83 101 98
```
### 样例输出 #2
```
0
```
## 提示

### 样例解释 1

当 $t = 1$ 时，第 $2$ 个 $\rm A$ 类点和第 $2$ 个 $\rm B$ 类点同时到达点 $(2, 2)$。这也是在本组样例中的唯一一次相遇，故输出 $1$。

### 数据规模与约定

**本题开启捆绑测试。**

+ Subtask 0（10 pts）：$n \leq 10$，$m \leq 10$。
+ Subtask 1（20 pts）：$n \leq 5\times 10^3$，$m \leq 5\times 10^3$。
+ Subtask 2（30 pts）：保证 $\forall a_i \geq 1$，$\forall b_i \geq 1$。
+ Subtask 3（40 pts）：无特殊限制。

对于所有数据，$1 \leq n, m \leq 10^6$，$0 \leq a_i, b_i \leq 10^9$。


---


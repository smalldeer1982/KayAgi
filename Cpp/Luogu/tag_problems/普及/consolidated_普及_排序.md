---
title: "[语言月赛 202210] 军训"
layout: "post"
diff: 普及/提高-
pid: B3675
tag: ['2022', 'Special Judge', 'O2优化', '排序', '构造', '语言月赛']
---
# [语言月赛 202210] 军训
## 题目描述

某 E 刚结束军训，军训教官将所有同学排成了 $n$ 行 $m$ 列。

教官组织同学们进行分列式练习，同学们将按行为单位进行练习。第 $i$ 行第 $j$ 名同学摆臂的高度为 $a_{i,j}$，踢腿的高度为 $b_{i,j}$。

教官认为，每一行同学的不整齐度为摆臂高度方差与踢腿高度方差之和。形式化的，第 $i$ 行同学的不整齐度为 
$$
\dfrac{1}{m} \times \sum\limits_{j=1}^{m}{\Bigg(a_{i,j}-\dfrac{\sum\limits_{k=1}^{m}{a_{i,k}}}{m}\Bigg)^2} + \dfrac{1}{m} \times \sum\limits_{j=1}^{m}{\Bigg(b_{i,j}-\dfrac{\sum\limits_{k=1}^{m}{b_{i,k}}}{m}\Bigg)^2}
$$

其中，$\sum\limits_{j=1}^m{a_{i,j}}$ 代表 $a_{i,1}+a_{i,2}+a_{i,3}+\cdots+a_{i,m}$。

教官希望对若干行进行位置上的对调，使得最终排出的方阵中，从第 $1$ 行至第 $n$ 行不整齐度依次递增。若有两行不整齐度相同，可以任意安排其顺序。

请你编写程序，给出一种交换方案。请注意，每一步交换是即刻完成的。

例如，给出如下的交换方案：

第一步，交换第 $1$ 行和第 $2$ 行；第二步，交换第 $2$ 行和第 $3$ 行。

初始：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $1$ |
| $2$ | $2$ |
| $3$ | $3$ |

第一步完成后：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $2$ |
| $2$ | $1$ |
| $3$ | $3$ |

第二步完成后：

| 当前行数 | 初始行号 |
|:---: | :---: |
| $1$ | $2$ |
| $2$ | $3$ |
| $3$ | $1$ |

**提示：例如，将第 $1$ 行与第 $3$ 行交换后，原第 $1$ 行将被叫做第 $3$ 行，而不是仍被叫做第 $1$ 行。**

**具体解释可参照样例 #2 解释。**
## 输入格式

输入共 $2n+1$ 行。

输入的第一行为两个整数 $m,n$，分别代表列数和行数。

接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 个代表 $a_{i,j}$。

接下来 $n$ 行，每行 $m$ 个整数，第 $i$ 行第 $j$ 个代表 $b_{i,j}$。
## 输出格式

输出若干行。

输出的第一行为一个整数 $K$，代表你交换方案中交换的次数。

接下来 $K$ 行，每行输出两个整数 $x,y$，代表将第 $x$ 行与第 $y$ 行的同学进行交换。

**注意：$K$ 应当不超过 $n^2$**。
## 样例

### 样例输入 #1
```
3 3
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1
1 1 1
```
### 样例输出 #1
```
3
1 2
1 3
2 3
```
### 样例输入 #2
```
3 3
3 6 9
2 4 6
1 2 3
1 1 1
1 1 1
1 1 1
```
### 样例输出 #2
```
3
1 2
2 3
1 2
```
## 提示

### 样例 #2 解释

仅考虑摆臂高度，在前两次交换后，阵列变成如下的样子：

$\begin{matrix} 1: & 2 & 4 & 6 \\ 2: & 1 & 2 & 3 \\ 3: & 3 & 6 & 9 \end{matrix}$

此时，原第 $3$ 行现被叫做第 $2$ 行，原第 $2$ 行现被叫做第 $1$ 行。如果我们想要将它们交换，应该输出 `1 2` 而不是 `2 3`。

### 数据规模与约定

对于 $30\%$ 的数据，所有 $a_{i,j}$ 均相同，$b_{i,j}$ 均相同。  

对于另外 $20\%$ 的数据，满足 $n\le 100$，$m\le 100$。

对于 $100\%$ 的数据，$1 \le n,m \le 1000$，$1 \le a_{i,j},b_{i,j} \le 100$。

### Special Judge

本题答案不唯一，将有 Special Judge 对你的答案进行检查，所有合法答案均可以得分。

Problem Assigned by 览遍千秋 | 七海


---

---
title: "[GESP202309 六级] 小杨的握手问题"
layout: "post"
diff: 普及/提高-
pid: B3874
tag: ['树状数组', '递归', '2023', '排序', 'GESP']
---
# [GESP202309 六级] 小杨的握手问题
## 题目描述

小杨的班级里共有 $N$ 名同学，学号从 $0$ 至 $N-1$。

某节课上，老师安排全班同学进行一次握手游戏，具体规则如下：老师安排了一个顺序，让全班 $N$ 名同学依次进入教室。每位同学进入教室时，需要和 **已经在教室内** 且 **学号小于自己** 的同学握手。

现在，小杨想知道，整个班级总共会进行多少次握手。

**提示：可以考虑使用归并排序进行降序排序，并在此过程中求解。**
## 输入格式

输入包含 $2$ 行。第一行一个整数 $N$ ，表示同学的个数；第二行 $N$ 个用单个空格隔开的整数，依次描述同学们进入教室的顺序，每个整数在 $0 \sim N-1$ 之间，表示该同学的学号。

保证每位同学会且只会进入教室一次。

## 输出格式

输出一行一个整数，表示全班握手的总次数。
## 样例

### 样例输入 #1
```
4
2 1 3 0
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
6
0 1 2 3 4 5
```
### 样例输出 #2
```
15
```
## 提示

**样例解释 1**:

$2$ 号同学进入教室，此时教室里没有其他同学。

$1$ 号同学进入教室，此时教室里有 $2$ 号同学。$1$ 号同学的学号小于 $2$ 号同学，因此他们之间不需要握手。

$3$ 号同学进入教室，此时教室里有 $1,2$ 号同学。$3$ 号同学的学号比他们都大，因此 $3$ 号同学需要分别和另外两位同学握手。

$0$ 号同学进入教室，此时教室里有 $1,2,3$ 号同学。$0$ 号同学的学号比他们都小，因此 $0$ 号同学不需要与其他同学握手。

**样例解释2：**

全班所有同学之间都会进行握手，因为每位同学来到教室时，都会发现他的学号是当前教室里最大的，所以他需要和教室里的每位其他同学进行握手。

对于 $30\%$ 的测试点，保证 $N\le100$。

对于所有测试点，保证 $2\le N\le3\times10^5$。



---

---
title: "[信息与未来 2024] 数据排序"
layout: "post"
diff: 普及/提高-
pid: B3982
tag: ['模拟', '2024', '江苏', '排序', '信息与未来']
---
# [信息与未来 2024] 数据排序
## 题目描述

在计算机世界中，“表格”是一种简单、基础而且十分通用的数据结构，在数据库、人工智能等领域中都有广泛的应用。表格由若干行、若干列的单元格组成：

| Name     | p1   | p2   | p3   | Score |
| :------- | :--- | ---- | ---- | ----- |
| ZhangSan | 40   | 30   | 28   | 98    |
| LiSi     | 40   | 28   | 30   | 98    |
| WangWu   | 40   | 25   | 20   | 85    |

CSV (Comma-Separated Values) 是一种常用的表格格式。Dr. X 需要你编程处理简化的 CSV 文
件，格式规定如下：

- CSV 文件包含 $n$ 行数据，其中第一行是标题行。
- CSV 文件每行一个字符串，对应了表格的一行。行中的单元格由**半角逗号**分隔。
- 每个单元格至少包含一个字符。单元格有两种类型：
  - **数值单元格**：由至少一个数字字符 $(0\sim 9)$ 组成。
  - **字符串单元格**：由数字字符 $(0\sim 9)$ 和大小写字母 $(\tt{a\sim z},\tt{A\sim Z})$ 组成,且至少包含一个字母。

- 标题行的所有单元格都是字符串单元格，且互不相同。标题行中包含了列的名称。

以下是一个 CSV 文件的示例：

```
Name,p1,p2,p3,Score
ZhangSan,40,30,28,98
LiSi,40,28,30,98
WangWu,40,25,20,85
```

你的任务是**根据指定的列为表格中的行排序**。例如根据 `Score- , Name+ , p3-` 排序意味着：

- 优先按 Score 列从大到小排序。Score 列都是数值单元格，因此按数值排序。

- 如果 Score 列相同，按 Name 列从小到大排序。Name 列都是字符串单元格，因此按照字典排序。

- 如果 Score 和 Name 列都相同，按 p3 列从大到小排序。p3 列都是数值单元格，因此按数
  值排序。

我们保证 CSV 文件每一行的单元格数量相同，且除标题行外，**每一列要么全是数值单元格，要么全是字符串单元格**。
## 输入格式

输入数据分为两部分。第一部分描述了 CSV 表格：
- 第一行一个整数 $n$，表示 CSV 文件的行数（**包含标题行**）。
- 接下来 $n$ 行,每行一个字符串，描述 CSV 表格中的行。

第二部分描述了排序要求:

- 第一行一个整数 $m$，表示排序依据列的数量。

- 接下来 $m$ 行，每行一个字符串，按顺序给出了排序依据的列名及排序方式（加号或减号）。加号代表升序排列、减号代表降序排列。
## 输出格式

输出 $n$ 行，为排序后的 CSV 表格（**包含标题行**）。对于所有排序依据列的值都相同的行，保持它们在输入文件中的相对顺序。
## 样例

### 样例输入 #1
```
4
Name,p1,p2,p3,Score
ZhangSan,40,30,28,98
LiSi,40,28,30,98
WangWu,40,25,20,85
3
Score-
Name+
p3-
```
### 样例输出 #1
```
Name,p1,p2,p3,Score
LiSi,40,28,30,98
ZhangSan,40,30,28,98
WangWu,40,25,20,85
```
## 提示

对于 $100\%$ 的数据，满足 $1 \leq n \leq 100$，表格不超过 $10$ 列，字符串单元格不超过 $16$ 个字符，且数值单元格中的数值是 $0$ 到 $10^4$ 之间的整数。

>本题原始满分为 $20\text{pts}$。


---

---
title: "[CSP-X2020 山东] 分糖果"
layout: "post"
diff: 普及/提高-
pid: B4091
tag: ['模拟', '贪心', '2020', '山东', '排序', 'CSP-X 小学组']
---
# [CSP-X2020 山东] 分糖果
## 题目背景

老师组织一群孩子围成一个圈进行游戏，游戏结束后老师会根据每个孩子的表现进行评分并给予糖果奖励。
## 题目描述

每个孩子只能看见与自己相邻的 $2$ 个孩子（左边的和右边的）的情况，只会关心相邻的且比自己评分低的同学的糖果数（如果相邻 $2$ 个孩子的评分相等，则不关心）。为保证公平，相邻的孩子中，评分高的孩子必须获得更多的糖果(如果左右相邻 $2$ 个孩子的评分相等，则不关心，即分最少的糖果 $1$ 个）。同时，为鼓励孩子的积极性，每个孩子至少都能拿到 $1$ 个糖果。现在需要你帮助老师来分发糖果，问怎么分配才能使要准备的糖果数最少？计算出需要的最少糖果数。
## 输入格式

输入有二行，第一行一个正整数 $n$ 表示孩子的个数。

第二行 $n$ 个非负整数，相邻的数用空格隔开，分别表示孩子的表现评分。
## 输出格式

一个整数，表示最少需要准备的糖果数。
## 样例

### 样例输入 #1
```
3
1 2 0
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
4
2 3 3 3
```
### 样例输出 #2
```
6
```
## 提示

【数据范围】

对于 $40\%$ 的数据，$1\leq n\leq 100$；

对于 $100\%$ 的数据，$1\leq n\leq 10^5$;

所有评分都是 $0$ 到 $100$ 之间的一个整数。

【样例解释】

样例一，分别分配 $2,3,1$ 的糖果，所以最少需要 $6$ 个糖果。

样例二，分别分配 $1,2,1,2$ 的糖果，所以最少需要 $6$ 个糖果。


---

---
title: "[常州市赛 2020] 勇士斗恶龙"
layout: "post"
diff: 普及/提高-
pid: B4201
tag: ['模拟', '贪心', '2020', '江苏', '排序', '科创活动', '小学活动']
---
# [常州市赛 2020] 勇士斗恶龙
## 题目背景

搬运自 <http://czoj.com.cn/p/449>。数据为民间数据。
## 题目描述

小 $\text X$ 穿越到了异世界，国王命令他招揽勇士，杀死恶龙，救回公主。  
异世界是高度数据化的。恶龙有一个攻击力 $\text{ATK}$ ，一个生命值 $\text{HP}$ 。类似的，每个勇士也有一个攻击力 $A_i$ ，一个生命值 $H_i$ 。  
战斗是回合制的，并且每次只能由一个勇士和恶龙单挑。战斗中，每个回合恶龙的生命值会减去这个勇士的攻击力，这个勇士的生命值会减去恶龙的攻击力。如果回合结束的时候恶龙的生命值小于等于 $0$，那么恶龙就被杀死了；如果这个勇士的生命值小于等于 $0$，那么这个勇士就被击败了，需要换上另一个勇士继续战斗。当然，如果恶龙还没有被杀死，勇士却全部被击败了，那么这场战役就彻底失败了。  
不过聪明的小 $\text X$ 安排了一个特殊的战术：在一名勇士被击败后立刻让另一名勇士发起攻击，这样恶龙在勇士们的车轮战术下疲于招架，受到第二个勇士的伤害变为两倍，受到第三个勇士的伤害变为三倍……以此类推。  
现在一共有 $n$ 名勇士报名，小 $\text X$ 想问问你，如果合理安排勇士出战的顺序，最少要招揽多少名勇士才能杀死恶龙？
## 输入格式

第一行为一个正整数 $n$，表示一共有 $n$ 名勇士报名。  
第二行两个正整数 $\text{ATK}$ 和 $\text{HP}$ 表示恶龙的攻击力和生命值。  
接下来共有 $n$ 行，每行两个正整数 $A_i$ 和 $H_i$ 表示这名勇士的攻击力和生命值。  
## 输出格式

输出一个整数，表示最少要招揽多少名勇士才能杀死恶龙。
如果不可能杀死恶龙，输出 `Fail`。
## 样例

### 样例输入 #1
```
2
1 9
2 2
1 1
```
### 样例输出 #1
```
2
```
## 提示

### 样例说明
- 两名勇士都招揽。先派出 $2$ 号勇士；  
- 第一回合，恶龙生命值变为 $8$，勇士生命值变为 $0$。勇士被击败；  
- 紧接着派出 $1$ 号勇士；  
- 第二回合，恶龙生命值变为 $4$ （两倍伤害），勇士生命值变为 $1$ ；  
- 第三回合，恶龙生命值变为 $0$ ，勇士生命值变为 $0$ 。恶龙被杀死；  
- 勇士虽然也被击败了，但恶龙已经死了，所以还是胜利了！  
### 数据范围
本题共有 $10$ 个测试点。  
对于所有数据，$1\le n\le 10^5,1\le\text{ATK}, A_i,H_i\le10^6,1\le \text{HP}\le 10^{18}$。  
|测试点编号|$n$|$\text{ATK}, A_i,H_i$|$\text{HP}$|
|:-:|:-:|:-:|:-:|
|$1\sim 4$|$\le 5$|$\le 10$|$\le 100$|
|$5\sim 7$|$\le 10^3$|$\le 10^3$|$\le 10^9$|
|$8\sim 10$|$\le 10^6$|$\le 10^6$|$\le 10^{18}$|


---

---
title: "[常州市赛 2023] 洗牌"
layout: "post"
diff: 普及/提高-
pid: B4220
tag: ['贪心', '2023', '江苏', '排序', '科创活动', '小学活动']
---
# [常州市赛 2023] 洗牌
## 题目背景

搬运自 <http://czoj.com.cn/p/677>。数据为民间数据。
## 题目描述

小 X 有 $n$ 张标有数字的纸牌，第 $i$ 张纸牌上面的数是 $a_i$，现在小 X 想通过洗牌打乱它们的顺序。

对于一个洗牌后的顺序，小 X 觉得相邻两张纸牌上数的差的绝对值之和越大，牌就洗的 越乱。

举个例子：现在有 $4$ 张纸牌，纸牌上的数依次为 $[1,2,3,4]$。

假设洗完牌后，纸牌上的数依次 $[4,3,2,1]$，相邻两张纸牌上数的差的绝对值之和为 $\left|4-3\right|+\left|3-2\right|+\left|2-1\right|=1+1+1=3$。

假设洗完牌后，纸牌上的数依次 $[2,4,1,3]$，相邻两张纸牌上数的差的绝对值之和为 $\left|4-2\right|+\left|4-1\right|+\left|3-1\right|=2+3+2=7$。

那么小 X 就会觉得 $[2,4,1,3]$ 的顺序比 $[4,3,2,1]$ 更乱。

小 X 想要问问你，对于所有顺序，相邻两张纸牌上数的差的绝对值之和最大能是多少。
## 输入格式

第一行 $1$ 个正整数 $n$，表示纸牌的张数。 第二行 $n$ 个正整数 $a_i$，表示第 $i$ 张纸牌上的数。注意具有相同数字的纸牌可能有多张。
## 输出格式

输出一行一个整数，表示答案。
## 样例

### 样例输入 #1
```
4 
1 2 3 4
```
### 样例输出 #1
```
7
```
### 样例输入 #2
```
5
1 2 3 4 5
```
### 样例输出 #2
```
11
```
### 样例输入 #3
```
10
1 2 3 4 5 6 7 8 9 10
```
### 样例输出 #3
```
49
```
## 提示

本题共有 $11$ 个测试点。

保证当测试点编号是偶数时，$n$ 也是偶数。

|测试点编号|$n$|$a_i$|
|:-:|:-:|:-:|
|$1\sim3$|$1\le n\le 10$|$1\le a_i\le10^6$|
|$4\sim8$|$1\le n\le 100$|$1\le a_i\le 10$|
|$9\sim11$|$1\le n\le10^5$|$1\le a_i\le 10^6$|


---

---
title: "[蓝桥杯青少年组国赛 2022] 金箍棒"
layout: "post"
diff: 普及/提高-
pid: B4298
tag: ['贪心', '线段树', '2022', '排序', '蓝桥杯青少年组']
---
# [蓝桥杯青少年组国赛 2022] 金箍棒
## 题目背景

为区分各种时间复杂度的做法，本题时间限制下调到 500 毫秒。
## 题目描述

淘气的悟空变出了 $N$ 根高度各不相同的金箍棒（$1 \leq $ 高度 $\leq 1000$），并排列成一排。悟空可以对每根金箍棒施法，让金箍棒高度变短或者变长，但每一次施法只能使一根金箍棒变短 $1$ 个高度或者变长 $1$ 个高度。

现在悟空想通过施法将 $K$（$K \leq N$）根相邻的金箍棒高度变为相同，且要求施法的次数最少，请你帮助悟空计算出最少需要施法几次可以使 $K$ 根相邻的金箍棒高度变为相同。

例如：$N=3$，$K=2$，$3$ 根金箍棒初始高度分别为 $3$、$6$、$1$。

- 第一次对高度为 $3$ 的金箍棒施法变长 $1$ 个高度，变为 $4$；
- 第二次对高度为 $6$ 的金箍棒施法变短 $1$ 个高度，变为 $5$；
- 第三次对高度为 $4$ 的金箍棒施法变长 $1$ 个高度，变为 $5$；

$2$ 根相邻的金箍棒高度变为相同，最少施法 $3$ 次。
## 输入格式

第一行输入两个正整数 $N$、$K$（$1 \leq K \leq N \leq 10000$），$N$ 表示金箍棒的根数，$K$ 表示需要将 $K$ 根相邻的金箍棒高度变为相同，两个整数之间以一个空格隔开。

第二行输入 $N$ 个各不相同的正整数（$1 \leq$ 正整数$\leq 1000$），表示 $N$ 根金箍棒的初始高度，$N$ 个整数之间以一个空格隔开。

## 输出格式

输出一个整数，表示悟空最少需要施法几次可以使 $K$ 根相邻的金箍棒高度变为相同。
## 样例

### 样例输入 #1
```
3 2
3 6 1
```
### 样例输出 #1
```
3
```


---

---
title: "[语言月赛 202504] 礼堂预约"
layout: "post"
diff: 普及/提高-
pid: B4319
tag: ['2025', '排序', '数组', '语言月赛']
---
# [语言月赛 202504] 礼堂预约
## 题目描述

小 M 所在的学校有一个礼堂，礼堂里至多能同时进行一个活动，因此需要预约。每个活动占据**某一天**的上午、下午或者晚上。

礼堂负责人**按照时间顺序**接收到了 $n$ 个活动预约，其中第 $i$ 个活动预约描述了活动如下信息：

- 活动类型 $type_i$：一个大写字母，`O` 表示学校官方活动，`C` 表示社团活动，`P` 表示个人活动。
- 活动日期 $date_i$：使用 `YYYYMMDD` 格式表示，例如 `20250411` 表示 $2025$ 年 $4$ 月 $11$ 日。
- 活动时间 $time_i$：一个大写字母，`M` 表示上午，`A` 表示下午，`E` 表示晚上。

负责人每收到一个新的活动预约，会直接加入日程，接下来重复执行如下流程，直到日程里没有冲突：

- 我们规定学校官方活动**优先于**社团活动**优先于**个人活动。如果冲突的两个活动预约类型不同，那么把优先程度更低的活动向后挪一天（活动时间不变）。
- 如果冲突的两个活动类型相同，那么遵循先到先得的原则，把较后预约的活动向后挪一天。
- 注意向后挪动一天可能引发新的冲突，此时对于新冲突的两个活动，仍然按照上述方案调整。

给出这 $n$ 个活动预约的信息，请输出最终每个活动在日程里的活动日期，**按照活动预约的提交顺序输出。**
## 输入格式

输入的第一行有一个正整数 $n$，表示活动个数。

之后 $n$ 行，每行依次输入一个大写字母 $type_i$、一个八位数日期 $date_i$ 和一个大写字母 $time_i$，表示一个活动预约，具体含义同题目描述。
## 输出格式

输出 $n$ 行，每行一个八位数日期，其中第 $i$ 行表示的是第 $i$ 个提交的活动预约最终的日期。
## 样例

### 样例输入 #1
```
5
P 20250419 A
O 20250419 A
C 20250419 A
C 20250419 E
C 20250420 A

```
### 样例输出 #1
```
20250422
20250419
20250420
20250419
20250421

```
### 样例输入 #2
```
6
P 20280228 M
P 20280228 M
P 20290228 A
P 20290228 A
P 20991231 E
P 20991231 E

```
### 样例输出 #2
```
20280228
20280229
20290228
20290301
20991231
21000101

```
### 样例输入 #3
```
5
C 20250419 E
C 20250420 A
P 20250419 A
O 20250419 A
C 20250419 A

```
### 样例输出 #3
```
20250419
20250420
20250422
20250419
20250421

```
## 提示

【样例 1 解释】

活动 $1$ 是个人活动，希望在 $2025$ 年 $4$ 月 $19$ 日下午进行，没有冲突。

活动 $2$ 是官方活动，希望在 $2025$ 年 $4$ 月 $19$ 日下午进行，和活动 $1$ 冲突。因此，活动 $1$ 被修改到 $4$ 月 $20$ 日下午。

活动 $3$ 是社团活动，希望在 $2025$ 年 $4$ 月 $19$ 日下午进行，和活动 $2$ 冲突。

- 由于活动 $2$ 是官方活动，所以把活动 $3$ 延后一天到 $4$ 月 $20$ 日下午。
- 然而现在活动 $3$ 和活动 $1$ 冲突，而活动 $1$ 优先程度更低，所以活动 $1$ 被修改到 $4$ 月 $21$ 日下午。

活动 $4$ 是社团活动，希望在 $2025$ 年 $4$ 月 $19$ 日晚上进行，没有冲突。

活动 $5$ 是社团活动，希望在 $2025$ 年 $4$ 月 $20$ 日下午进行，和活动 $3$ 冲突。

- 由于活动 $3,5$ 都是社团活动，按照先到先得原则，把活动 $5$ 延后到 $2025$ 年 $4$ 月 $21$ 日下午。
- 现在活动 $5$ 和活动 $1$ 冲突，所以把活动 $1$ 延后到 $2025$ 年 $4$ 月 $22$ 日。

【样例 2 解释】

注意日期的计算。

【样例 3 解释】

按照收到活动预约的时间给出，不代表活动预约按照 $date_i$ 排序。

【数据范围】

对于全部数据，保证 $1\le n\le 5000$，$type_i$ 一定是 `O`、`C`、`P` 之一，$time_i$ 一定是 `M`，`A`，`E` 之一，$date_i$ 一定是 $2000$ 年 $1$ 月 $1$ 日到 $2099$ 年 $12$ 月 $31$ 日之间、真实存在的日期。（注意并不保证最终的日期在这个范围内。）

本题共有 $10$ 个测试点，每个 $10$ 分。部分测试点有特殊性质，具体如下：

|测试点编号|$n\le$|特殊性质 A|特殊性质 B|
|:-:|:-:|:-:|:-:|
|$1,2$|$500$|保证|保证|
|$3$|$500$|不保证|保证|
|$4$|$500$|保证|不保证|
|$5,6$|$500$|不保证|不保证|
|$7$|$5000$|保证|保证|
|$8,9,10$|$5000$|不保证|不保证|

- 特殊性质 A：每个活动的最终日期和预约日期在同一个月内（例如样例 1）。
- 特殊性质 B：每个活动预约仅产生至多一次冲突，不会连续冲突（例如样例 2）。




---

---
title: "[NOIP 1998 提高组] 拼数"
layout: "post"
diff: 普及/提高-
pid: P1012
tag: ['字符串', '1998', 'NOIP 提高组', '排序']
---
# [NOIP 1998 提高组] 拼数
## 题目描述

设有 $n$ 个正整数 $a_1 \dots a_n$，将它们联接成一排，相邻数字首尾相接，组成一个最大的整数。

## 输入格式

第一行有一个整数，表示数字个数 $n$。

第二行有 $n$ 个整数，表示给出的 $n$ 个整数 $a_i$。
## 输出格式

一个正整数，表示最大的整数

## 样例

### 样例输入 #1
```
3
13 312 343

```
### 样例输出 #1
```
34331213

```
### 样例输入 #2
```
4
7 13 4 246
```
### 样例输出 #2
```
7424613
```
## 提示

对于全部的测试点，保证 $1 \leq n \leq 20$，$1 \leq a_i \leq 10^9$。

NOIP1998 提高组 第二题


---

---
title: "[DTCPC 2024] 环"
layout: "post"
diff: 普及/提高-
pid: P10166
tag: ['贪心', '2024', '拓扑排序', '洛谷月赛']
---
# [DTCPC 2024] 环
## 题目背景

环
## 题目描述

给定无重边无自环的有向图 $G$ 和序列 $\{a_n\}$，每次可以花费 $a_i+a_j$ 的代价加上一条 $i\to j$ 的边，试花费最小代价使得可以找到 $k\geq 2$ 个不同的点 $p_1,p_2,\dots,p_k$，满足 $\forall i\in [1,k]$，都有一条 $p_i\to p_{i\bmod k+1}$ 的边。
## 输入格式

第一行两个整数 $n,m$（$2\le n\le 5 \times 10^5$，$n-1 \le m \le 10^6$），表示图的点数和边数。

第二行输入 $n$ 个整数，表示序列 $\{a_n\}$（$1\le a_i\le 10^9$）。

接下来 $m$ 行，每行两个整数 $u,v$（$1\le u,v\le n$），表示存在一条有向边 $u\to v$。
## 输出格式

一行一个整数表示最小代价。
## 样例

### 样例输入 #1
```
5 5
1 2 3 4 5 
1 2
2 3
3 4
1 5
5 4 
```
### 样例输出 #1
```
3
```


---

---
title: "[GESP样题 七级] 最长不下降子序列"
layout: "post"
diff: 普及/提高-
pid: P10287
tag: ['拓扑排序', 'GESP']
---
# [GESP样题 七级] 最长不下降子序列
## 题目描述

小杨有个包含 $n$ 个节点 $m$ 条边的有向无环图，其中节点的编号为 $1$ 到 $n$。

对于编号为 $i$ 的节点，其权值为 $w_i$。对于图中的一条路径，根据路径上的经过节点的先后顺序可以得到一个节点权值的序列，小杨想知道图中所有可能序列中最长不下降子序列的最大长度。

注：给定一个序列 $S$，其最长不下降子序列 $S'$ 是原序列中的如下子序列：整个子序列 $S'$ 单调不降，并且是序列中最长的单调不降子序列。例如，给定序列 $S = [11,12,13,9,8,17,19]$，其最长不下降子序列为 $S'=[11,12,13,17,19]$，长度为 $5$。
## 输入格式

第一行包含两个正整数 $n,m$，表示节点数和边数。 
 
第二行包含 $n$个正整数 $A_1, A_2, \dots A_n$，表示节点 $1$ 到 $n$ 的点权。  

之后 $m$ 行每行包含两个正整数 $u_i, v_i$，表示第 $i$ 条边连接节点 $u_i$ 和 $v_i$，方向为从 $u_i$ 到 $v_i$。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
5 4
2 10 6 3 1
5 2
2 3
3 1
1 4
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
6 11
1 1 2 1 1 2
3 2
3 1
5 3
4 2
2 6
3 6
1 6
4 6
1 2
5 1
5 4
```
### 样例输出 #2
```
4
```
### 样例输入 #3
```
6 11
5 9 10 5 1 6
5 4
5 2
4 2
3 1
5 3
6 1
4 1
4 3
5 1
2 3
2 1
```
### 样例输出 #3
```
4
```
## 提示

### 数据规模与约定

| 子任务 | 分值 | $n\le$ | $A_i \le$ | 特殊约定 |
| :-: | :-: | :-: | :-: | :-:|
| $1$ | $30$ | $10^3$ | $10$ | 输入的图是一条链 |
| $2$ | $30$ | $10^5$ | $2$ | 无 |
| $3$ | $40$ | $10^5$ | $10$ | 无|

对全部的测试数据，保证 $1 \leq n \leq 10^5$，$1 \leq m \leq 10^5$，$1 \leq A_i \leq 10$。



---

---
title: "可达性统计"
layout: "post"
diff: 普及/提高-
pid: P10480
tag: ['拓扑排序', '位运算']
---
# 可达性统计
## 题目描述

给定一张 $N$ 个点 $M$ 条边的有向无环图，分别统计从每个点出发能够到达的点的数量。
## 输入格式

第一行两个整数 $N,M$，接下来 $M$ 行每行两个整数 $x,y$，表示从 $x$ 到 $y$ 的一条有向边。
## 输出格式

输出共 $N$ 行，表示每个点能够到达的点的数量。
## 样例

### 样例输入 #1
```
10 10
3 8
2 3
2 5
5 9
5 9
2 3
3 9
4 8
2 10
4 9
```
### 样例输出 #1
```
1
6
3
3
2
1
1
1
1
1
```
## 提示

测试数据满足 $1 \le N,M \le 30000$，$1 \le x,y \le N$。


---

---
title: "[NOIP 2008 普及组] 排座椅"
layout: "post"
diff: 普及/提高-
pid: P1056
tag: ['贪心', '2008', 'NOIP 普及组', '排序']
---
# [NOIP 2008 普及组] 排座椅
## 题目描述

上课的时候总会有一些同学和前后左右的人交头接耳，这是令小学班主任十分头疼的一件事情。不过，班主任小雪发现了一些有趣的现象，当同学们的座次确定下来之后，只有有限的 $D$ 对同学上课时会交头接耳。

同学们在教室中坐成了 $M$ 行 $N$ 列，坐在第 $i$ 行第 $j$ 列的同学的位置是 $(i,j)$，为了方便同学们进出，在教室中设置了 $K$ 条横向的通道，$L$ 条纵向的通道。

于是，聪明的小雪想到了一个办法，或许可以减少上课时学生交头接耳的问题：她打算重新摆放桌椅，改变同学们桌椅间通道的位置，因为如果一条通道隔开了 $2$ 个会交头接耳的同学，那么他们就不会交头接耳了。

请你帮忙给小雪编写一个程序，给出最好的通道划分方案。在该方案下，上课时交头接耳的学生的对数最少。

## 输入格式

第一行，有 $5$ 个用空格隔开的整数，分别是 $M,N,K,L,D(2 \le N,M \le 1000,0 \le K<M,0 \le L<N,D \le 2000)$。

接下来的 $D$ 行，每行有 $4$ 个用空格隔开的整数。第 $i$ 行的 $4$ 个整数 $X_i,Y_i,P_i,Q_i$，表示坐在位置 $(X_i,Y_i)$ 与 $(P_i,Q_i)$ 的两个同学会交头接耳（输入保证他们前后相邻或者左右相邻）。

输入数据保证最优方案的唯一性。

## 输出格式

共两行。  
第一行包含 $K$ 个整数 $a_1,a_2,\ldots,a_K$，表示第 $a_1$ 行和 $a_1+1$ 行之间、第 $a_2$ 行和 $a_2+1$ 行之间、…、第 $a_K$ 行和第 $a_K+1$ 行之间要开辟通道，其中 $a_i< a_{i+1}$，每两个整数之间用空格隔开（行尾没有空格）。

第二行包含 $L$ 个整数 $b_1,b_2,\ldots,b_L$，表示第 $b_1$ 列和 $b_1+1$ 列之间、第 $b_2$ 列和 $b_2+1$ 列之间、…、第 $b_L$ 列和第 $b_L+1$ 列之间要开辟通道，其中$b_i< b_{i+1}$，每两个整数之间用空格隔开（列尾没有空格）。

## 样例

### 样例输入 #1
```
4 5 1 2 3
4 2 4 3
2 3 3 3
2 5 2 4

```
### 样例输出 #1
```
2
2 4

```
## 提示

![](https://cdn.luogu.com.cn/upload/image_hosting/0z0p5x1i.png)

上图中用符号\*、※、+标出了 $3$ 对会交头接耳的学生的位置，图中 $3$ 条粗线的位置表示通道，图示的通道划分方案是唯一的最佳方案。

2008 年普及组第二题



---

---
title: "[EC Final 2020] Rooks"
layout: "post"
diff: 普及/提高-
pid: P10821
tag: ['模拟', '2020', 'O2优化', '排序', 'ICPC']
---
# [EC Final 2020] Rooks
## 题目描述

Prof. Pang plays chess against his rival Prof. Shou. They are the only two players in the game. The chessboard is very large and can be viewed as a 2D plane. Prof. Pang placed $n_1$ rooks and Prof. Shou placed $n_2$ rooks. Each rook is a point with integer coordinates on the chessboard. One rook is $\textit{attacked}$ by another rook if they satisfy all of the following conditions:

- They are placed by different players.
- They have the same $x$-coordinate or $y$-coordinate.
- There is no other rook on the line segment between them.

Help Prof. Pang and Prof. Shou to decide which rooks are attacked.
## 输入格式

The first line contains two integers $n_1, n_2$ ($1\le n_1, n_2\le 200000$) separated by a single space denoting the number of rooks placed by Prof. Pang and the number of rooks placed by Prof. Shou.

The $i$-th ($1\le i\le n_1$) line of the next $n_1$ lines contains two integers $x, y$ ($-10^9\le x, y\le 10^9$) separated by a single space denoting the location $(x, y)$ of the $i$-th rook placed by Prof. Pang.

The $i$-th ($1\le i\le n_2$) line of the next $n_2$ lines contains two integers $x, y$ ($-10^9\le x, y\le 10^9$) separated by a single space denoting the location $(x, y)$ of the $i$-th rook placed by Prof. Shou.

It is guaranteed that the $n_1+n_2$ rooks placed by the players are distinct (i.e., no two rooks can have the same location).
## 输出格式

Output a string with length $n_1$ on the first line. The $i$-th ($1\le i\le n_1$) character should be $1$ if the $i$-th rook placed by Prof. Pang is attacked and $0$ otherwise.

Output a string with length $n_2$ on the second line. The $i$-th ($1\le i\le n_2$) character should be $1$ if the $i$-th rook placed by Prof. Shou is attacked and $0$ otherwise.

## 样例

### 样例输入 #1
```
3 2
0 0
0 1
1 0
0 -1
-1 0
```
### 样例输出 #1
```
100
11
```


---

---
title: "Happybob's Numbers (UBC001B)"
layout: "post"
diff: 普及/提高-
pid: P10922
tag: ['贪心', 'O2优化', '排序']
---
# Happybob's Numbers (UBC001B)
## 题目描述

happybob 在地上有 $n$ 个数，第 $i$ 个记为 $a_i$。happybob 正在研究如何将这些数全部删除。在他开始进行所有操作以前，他有一次按任意顺序摆放这些数的机会。他接下来要按照如下方式进行删数：

- happybob 有一个删数下标 $h$（初始时 $h=1$），他会设立一个新变量 $H$，其值为 $a_h$ ，然后对于每一个满足 $h\le i<k$ 的正整数 $i$ 都执行 $a_i\gets a_{i+1}$（这里 $k$ 是当前地上剩余的数的个数）并删除数 $a_k$，在这之后他会把 $h$ 赋值为 $H$。

- **如果在任何一次操作过后，$h$ 严格大于当前地上剩余的数的个数，那么他将不能再删除任何数。**

当然以他的这种删数方式不一定可以删完所有数，所以他现在想问你：他最多能删除多少个数？
## 输入格式

第一行，一个正整数 $t$，表示测试数据组数。

对于每组数据：

第一行，一个正整数 $n$，表示 $a$ 的大小；

第二行，$n$ 个正整数表示 $a$ 中的元素。

## 输出格式

$t$ 行，每行一个正整数，表示该组测试数据对应的答案。

## 样例

### 样例输入 #1
```
2
3
1 2 3
4
114 514 1919 810
```
### 样例输出 #1
```
3
1
```
## 提示

#### 样例解释

对于第一个数据点，happybob 可以把 $a$ 数组排序为 $[2, 3, 1]$。以下是删数过程：

| 操作次数 | $h$（操作完成后） | 地上的数（操作完成后） |
| -- | -- | -- |
| 初始 | $1$ | $[2, 3, 1]$ |
| $1$ | $2$ | $[3, 1]$ |
| $2$ | $1$ | $[3]$ |
| $3$ | $3$ | $[]$ |

地上没有数了，也就是一共删除了 $3$ 个数。

对于第二个数据点，可以证明，无论怎么排序 $a$，都只能删除一个数。

#### 数据范围

**本题有多组测试数据。**

对于 $100\%$ 的数据，保证 $1 \le t,n,\sum n\le 5 \times 10^5$，$1\le a_i\le 10^9$。其中 $\sum n$ 表示所有测试数据中 $n$ 的和。


---

---
title: "修复公路"
layout: "post"
diff: 普及/提高-
pid: P1111
tag: ['二分', '并查集', '排序']
---
# 修复公路
## 题目背景

A 地区在地震过后，连接所有村庄的公路都造成了损坏而无法通车。政府派人修复这些公路。
## 题目描述

给出 A 地区的村庄数 $N$，和公路数 $M$，公路是双向的。并告诉你每条公路的连着哪两个村庄，并告诉你什么时候能修完这条公路。问最早什么时候任意两个村庄能够通车，即最早什么时候任意两条村庄都存在至少一条修复完成的道路（可以由多条公路连成一条道路）。
## 输入格式

第 $1$ 行两个正整数 $N,M$。

下面 $M$ 行，每行 $3$ 个正整数 $x,y,t$，告诉你这条公路连着 $x,y$ 两个村庄，在时间 $t$ 时能修复完成这条公路。
## 输出格式

如果全部公路修复完毕仍然存在两个村庄无法通车，则输出 $-1$，否则输出最早什么时候任意两个村庄能够通车。
## 样例

### 样例输入 #1
```
4 4
1 2 6
1 3 4
1 4 5
4 2 3
```
### 样例输出 #1
```
5
```
## 提示

$1\leq x, y\leq N \le 10 ^ 3$，$1\leq M, t \le 10 ^ 5$。


---

---
title: "『STA - R8』轮回疯狂"
layout: "post"
diff: 普及/提高-
pid: P11208
tag: ['O2优化', '排序']
---
# 『STA - R8』轮回疯狂
## 题目描述

给一个 $1$ 到 $n$ 的排列 $p$，你可以使用两种操作：
- 轮回：交换 $p$ 中相邻的两个位置。
- 疯狂：删除 $p$ 中的最小值。如果 $p$ 为空则不能进行操作。

问最少需要多少次操作才能使得序列单调递增。
## 输入格式

第一行一个正整数 $n$。

第二行 $n$ 个正整数，描述排列 $p$。
## 输出格式

一行一个正整数，表示答案。
## 样例

### 样例输入 #1
```
3
3 2 1
```
### 样例输出 #1
```
2
```
## 提示

样例解释：先删除 $p_3$，再交换 $p_1,p_2$。

***
**本题采用捆绑测试。**

数据范围：
- Subtask 1 (10pts)：$n\le 3$。
- Subtask 2 (30pts)：$n\le 10^3$。
- Subtask 3 (10pts)：$p_i=n-i+1$。
- Subtask 4 (50pts)：无特殊限制。


对于全部数据，$1\le n\le 10^5$，$p$ 是 $1$ 到 $n$ 的排列。


---

---
title: "【MX-J8-T2】 黑洞"
layout: "post"
diff: 普及/提高-
pid: P11214
tag: ['数学', '贪心', 'O2优化', '枚举', '排序', '梦熊比赛']
---
# 【MX-J8-T2】 黑洞
## 题目背景

原题链接：<https://oier.team/problems/J8B>。

---

![](https://cdn.luogu.com.cn/upload/image_hosting/a8hxrkor.png)

上图给出了二维下与红点在同一条对角线上的所有方格。

考虑三维下的情况，下图给出了与红色方块在同一条对角线上的所有方块。

![](https://cdn.luogu.com.cn/upload/image_hosting/56pkuoah.png)

本题我们将会把对角线这个概念推广到 $n$ 维上。
## 题目描述

已知一片 $n$ 维空间，第 $i$ 维的大小为 $m_i$。我们使用一个 $n$ 维坐标 $(x_1, x_2, \dots, x_n)$ 表示这片 $n$ 维空间里的一个位置，其中 $x_i$ 为 $[1, m_i]$ 间的整数。

在位置 $(a_1, a_2, \dots, a_n)$ 处有一颗黑洞。这片 $n$ 维空间中所有与它在同一条对角线上的位置都将被吞噬：
- 称位置 $(a_1, a_2, \dots, a_n)$ 与 $(b_1, b_2, \dots, b_n)$ 在同一条对角线上，当且仅当存在一个整数 $k \geq 0$，使得对每个 $1 \leq i \leq n$，都有 $\lvert a_i - b_i \rvert = k$。

你需要求出共有多少个位置会被黑洞吞噬（即与黑洞在同一条对角线上，包括黑洞所处位置本身）。答案对 $10^9 + 7$ 取模。
## 输入格式

第一行，一个正整数 $n$，表示维度数。

第二行，$n$ 个正整数 $m_1, \dots, m_n$，表示每一维的大小。

第三行，$n$ 个正整数 $a_1, \dots, a_n$，表示黑洞的位置。
## 输出格式

仅一行一个整数，表示该 $n$ 维空间中被黑洞吞噬的位置个数。答案对 $10^9 + 7$ 取模。
## 样例

### 样例输入 #1
```
2
6 6 
2 3
```
### 样例输出 #1
```
8
```
### 样例输入 #2
```
2
999999999 999999999
500000000 500000000
```
### 样例输出 #2
```
999999990
```
### 样例输入 #3
```
3
5 7 8
4 5 2
```
### 样例输出 #3
```
12
```
## 提示

**【样例解释 \#1】**

如题目背景中的图所示，其中红色圆形为黑洞所在位置，黑色方格为被黑洞吞噬的位置，共 $8$ 个。

**【样例解释 \#2】**

有 $1999999997$ 个位置被黑洞吞噬，$1999999997$ 对 $10^9+7$ 取模的结果为 $999999990$。

**【样例解释 \#3】**

如题目背景中的图所示，$(1,2,5)$，$(2,3,4)$，$(2,7,4)$，$(3,4,1)$，$(3,4,3)$，$(3,6,1)$，$(3,6,3)$，$(4,5,2)$，$(5,4,1)$，$(5,4,3)$，$(5,6,1)$，$(5,6,3)$ 共 $12$ 个位置被黑洞吞噬。

**【样例 \#4】**

见附件中的 `hole/hole4.in` 与 `hole/hole4.ans`。

该组样例满足测试点 $9 \sim 10$ 的约束条件。

**【样例 \#5】**

见附件中的 `hole/hole5.in` 与 `hole/hole5.ans`。

该组样例满足测试点 $11 \sim 13$ 的约束条件。

**【样例 \#6】**

见附件中的 `hole/hole6.in` 与 `hole/hole6.ans`。

该组样例满足测试点 $14 \sim 19$ 的约束条件。

**【样例 \#7】**

见附件中的 `hole/hole7.in` 与 `hole/hole7.ans`。

该组样例满足测试点 $20 \sim 25$ 的约束条件。

**【数据范围】**

本题共 $25$ 个测试点，每个 $4$ 分。
  
|测试点编号|$n$|$m_i\le$|
| :-----------: | :-------------:|:-----------:|
|$1\sim2$|$=2$|$10^6$|
|$3\sim4$|$=2$|$10^9$|
|$5\sim6$|$=3$|$10^6$|
|$7\sim8$|$=3$|$10^9$|
|$9\sim10$|$\le20$|$15$|
|$11\sim13$|$\le20$|$10^9$|
|$14\sim19$|$\le1000$|$10^9$|
|$20\sim25$|$\le2\times10^5$|$10^9$|

对于全部数据，保证：$2\le n\le 2\times10^5$，$1\le a_i\le m_i\le 10^9$。


---

---
title: "旅行计划"
layout: "post"
diff: 普及/提高-
pid: P1137
tag: ['动态规划 DP', '图论', '递推', '排序', '拓扑排序']
---
# 旅行计划
## 题目描述

小明要去一个国家旅游。这个国家有 $N$ 个城市，编号为 $1$ 至 $N$，并且有 $M$ 条道路连接着，小明准备从其中一个城市出发，并只往东走到城市 $i$ 停止。

所以他就需要选择最先到达的城市，并制定一条路线以城市 $i$ 为终点，使得线路上除了第一个城市，每个城市都在路线前一个城市东面，并且满足这个前提下还希望游览的城市尽量多。

现在，你只知道每一条道路所连接的两个城市的相对位置关系，但并不知道所有城市具体的位置。现在对于所有的 $i$，都需要你为小明制定一条路线，并求出以城市 $i$ 为终点最多能够游览多少个城市。
## 输入格式

第一行为两个正整数 $N, M$。

接下来 $M$ 行，每行两个正整数 $x, y$，表示了有一条连接城市 $x$ 与城市 $y$ 的道路，保证了城市 $x$ 在城市 $y$ 西面。

## 输出格式

$N$ 行，第 $i$ 行包含一个正整数，表示以第 $i$ 个城市为终点最多能游览多少个城市。

## 样例

### 样例输入 #1
```
5 6
1 2
1 3
2 3
2 4
3 4
2 5

```
### 样例输出 #1
```
1
2
3
4
3

```
## 提示

均选择从城市 $1$ 出发可以得到以上答案。

- 对于 $20\%$ 的数据，$1\le N ≤ 100$；
- 对于 $60\%$ 的数据，$1\le N ≤ 1000$；
- 对于 $100\%$ 的数据，$1\le N ≤ 100000$，$1\le M ≤ 200000$。



---

---
title: "[GESP202412 六级] 运送物资"
layout: "post"
diff: 普及/提高-
pid: P11376
tag: ['贪心', '2024', '排序', 'GESP']
---
# [GESP202412 六级] 运送物资
## 题目描述

小杨管理着 $m$ 辆货车，每辆货车每天需要向 A 市和 B 市运送若干次物资。小杨同时拥有 $n$ 个运输站点，这些站点位于 A 市和 B 市之间。

每次运送物资时，货车从初始运输站点出发，前往 A 市或 B 市，之后返回初始运输站点。A 市、B 市和运输站点的位置可以视作数轴上的三个点，其中 A 市的坐标为 $0$，B 市的坐标为 $x$，运输站点的坐标为 $p$ 且有 $0 \lt p \lt x$。货车每次去 A 市运送物资的总行驶路程为 $2p$，去 B 市运送物资的总行驶路程为 $2(x - p)$。

对于第 $i$ 个运输站点，其位置为 $p_i$ 且至多作为 $c_i$ 辆车的初始运输站点。小杨想知道，在最优分配每辆货车的初始运输站点的情况下，所有货车每天的最短总行驶路程是多少。
## 输入格式

第一行包含三个正整数 $n,m,x$，代表运输站点数量、货车数量和两市距离。

之后 $n$ 行，每行包含两个正整数 $p_i$ 和 $c_i$，代表第 $i$ 个运输站点的位置和最多容纳车辆数。

之后 $m$ 行，每行包含两个正整数 $a_i$ 和 $b_i$，代表第 $i$ 辆货车每天需要向 A 市运送 $a_i$ 次物资，向 B 市运送 $b_i$ 次物资。
## 输出格式

输出一个正整数，代表所有货车每天的最短总行驶路程。
## 样例

### 样例输入 #1
```
3 4 10
1 1
2 1
8 3
5 3
7 2
9 0
1 10000
```
### 样例输出 #1
```
40186
```
## 提示

第 $1$ 辆车的初始运输站点为站点 $3$，第 $2$ 辆车的初始运输站点为站点 $2$。第 $3$ 辆车的初始运输站点为站点 $1$，第 $4$ 辆车的初始运输站点为站点 $3$。此时总驶路程最短，为 $40186$。

| 子任务编号 | 数据点占比 |     $n$     |     $s$     |    $c_i$    |
| :--------: | :--------: | :---------: | :---------: | :---------: |
|    $1$     |   $20\%$   |     $2$     |     $2$     |     $1$     |
|    $2$     |   $20\%$   | $\leq 10^5$ | $\leq 10^5$ |     $1$     |
|    $3$     |   $60\%$   | $\leq 10^5$ | $\leq 10^5$ | $\leq 10^5$ |

对于全部数据，保证有 $1\leq n,m\leq 10^5$，$2\leq x\leq 10^8$，$0\lt p_i\lt x$，$1\leq c_i\leq 10^5$，$0\leq a_i,b_i\leq 10^5$。数据保证 $\sum c_i\geq m$。


---

---
title: "[EPXLQ2024 fall round] 风吹起了从前"
layout: "post"
diff: 普及/提高-
pid: P11412
tag: ['排序', '哈希 hashing', '字典树 Trie']
---
# [EPXLQ2024 fall round] 风吹起了从前
## 题目背景

对于过去，温昭雪有着断断续续的记忆。
## 题目描述

具体地，她有 $n$ 条记忆，每条记忆是一个长度不超过 $100$ 的字符串。第 $i$ 条记忆 $S_i$ 位于她心灵的 $r_i$ 深处，对她有 $v_i$ 的价值。

温昭雪正在试图恢复自己记忆中的美好，可记忆实在太多太复杂，她只能想到她记忆的一段前缀 $Q$ 和她能到达的最深位置 $d$。只有满足对应的 $Q$ 是 $S_i$ 的前缀且 $r_i \le d$ 的记忆才能被温昭雪回想到。

现在，温昭雪有 $m$ 次尝试。她想知道，对于每次尝试，她能获得的所有记忆价值之和是多少。
## 输入格式

输入第一行包含 $n,m$。

以下 $n$ 行，每行两个整数 $r_i,v_i$ 和一个字符串 $S_i$，空格分隔。

以下 $m$ 行，每行一个整数 $d$ 和一个字符串 $Q$，空格分隔。保证 $Q$ 至少是某一个 $S_i$ 的前缀，**但不保证一定存在一个记忆能被回想到**。
## 输出格式

输出 $m$ 行，每行表示对于每次尝试，她能获得的所有记忆价值之和是多少。
## 样例

### 样例输入 #1
```
5 6
5 6 abcab
7 10 abcba
4 3 abc
3 6 ade
2 4 cde
2 abc
4 abc
5 abc
6 a
7 c
8 ab
```
### 样例输出 #1
```
0
3
9
15
4
19
```
## 提示

### 提示

本题对前缀的定义为：对于字符串 $S,P$，若 $|P| \le |S|$ 且对所有 $1 \le i \le |P|$ 均有 $S_i=P_i$，则称 $P$ 是 $S$ 的前缀。

### 数据规模与约定

**本题采用捆绑测试。**

| $\text{Subtask}$ | $n \le$ | $ m\le$ | 特殊性质 | 分值 |
| :-: | :-: | :-: | :-: | :-: |
| $0$ | $100$ | $100$ | | $11$ |
| $1$ | $10^4$ | $10^5$ | $d = 10^9$ | $13$ |
| $2$ | $10^4$ | $10^5$ | 字符串长度不超过 $2$ | $9$ |
| $3$ | $10^4$ | $10^3$ | | $26$ |
| $4$ | $10^4$ | $10^5$ | | $41$ |

对于所有数据，保证 $1 \le |S_i|,|Q| \le100, 0 \le r_i,v_i,d \le 10^9$，所有字符串仅由小写字母组成。

请注意时间复杂度常数因子带来的影响。

请考虑使用较快的输入输出方式。


---

---
title: "轰炸"
layout: "post"
diff: 普及/提高-
pid: P1142
tag: ['计算几何', '枚举', '排序']
---
# 轰炸
## 题目描述

“我该怎么办？”飞行员 klux 向你求助。

事实上，klux 面对的是一个很简单的问题，但是他实在太菜了。

klux 要想轰炸某个区域内的一些地方，它们是位于平面上的一些点，但是（显然地）klux 遇到了抵抗，所以 klux 只能飞一次，而且由于飞机比较破，一点起飞就只能沿直线飞行，无法转弯。现在他想一次轰炸最多的地方。

## 输入格式

第一行一个整数 $n$。

接下来 $n$ 行，每行有一对整数，表示一个点的坐标。没有一个点会出现两次。

## 输出格式

一个整数，表示一条直线能覆盖的最多的点数。

## 样例

### 样例输入 #1
```
5
1 1
2 2
3 3
9 10
10 11

```
### 样例输出 #1
```
3

```
## 提示

### 数据范围

对于全部数据，保证 $1\le n\le 700$。

本题翻译并改编自 uva270，数据及解答由 uva 提供。



---

---
title: "[NOIP 2010 普及组] 导弹拦截"
layout: "post"
diff: 普及/提高-
pid: P1158
tag: ['模拟', '2010', 'NOIP 普及组', '枚举', '排序']
---
# [NOIP 2010 普及组] 导弹拦截
## 题目描述

经过 $11$ 年的韬光养晦，某国研发出了一种新的导弹拦截系统，凡是与它的距离不超过其工作半径的导弹都能够被它成功拦截。当工作半径为 $0$ 时，则能够拦截与它位置恰好相同的导弹。但该导弹拦截系统也存在这样的缺陷：每套系统每天只能设定一次工作半径。而当天的使用代价，就是所有系统工作半径的平方和。

某天，雷达捕捉到敌国的导弹来袭。由于该系统尚处于试验阶段，所以只有两套系统投入工作。如果现在的要求是拦截所有的导弹，请计算这一天的最小使用代价。
## 输入格式

第一行包含 $4$ 个整数 $x_1,y_1,x_2,y_2$，每两个整数之间用一个空格隔开，表示这两套导弹拦截系统的坐标分别为 $(x_1,y_1), (x_2,y_2)$。第二行包含 $1$ 个整数 $N$，表示有 $N$ 颗导弹。接下来 $N$ 行，每行两个整数 $x,y$，中间用一个空格隔开，表示一颗导弹的坐标 $(x,y)$。不同导弹的坐标可能相同。
## 输出格式

一个整数，即当天的最小使用代价。

## 样例

### 样例输入 #1
```
0 0 10 0
2
-3 3
10 0
```
### 样例输出 #1
```
18
```
### 样例输入 #2
```
0 0 6 0
5
-4 -2
-2 3
4 0
6 -2
9 1
```
### 样例输出 #2
```
30
```
## 提示

两个点 $(x_1,y_1),(x_2,y_2)$ 之间距离的平方是 $(x_1-x_2)^2+(y_1-y_2)^2$。

两套系统工作半径 $r_1,r_2$ 的平方和，是指 $r_1,r_2$ 分别取平方后再求和，即 $r_1^2+r_2^2$。

### 样例 1 说明

样例 $1$ 中要拦截所有导弹，在满足最小使用代价的前提下，两套系统工作半径的平方分别为 $18$ 和 $0$。

### 样例 2 说明

样例 $2$ 中的导弹拦截系统和导弹所在的位置如下图所示。要拦截所有导弹，在满足最小使用代价的前提下，两套系统工作半径的平方分别为 $20$ 和 $10$。

![](https://cdn.luogu.com.cn/upload/image_hosting/cvgomt03.png)

【数据范围】。

- 对于 $10\%$ 的数据，$N=1$。
- 对于 $20\%$ 的数据，$1\le N\le 2$。
- 对于 $40\%$ 的数据，$1\le N\le 100$。
- 对于 $70\%$ 的数据，$1\le N\le 1000$。
- 对于 $100\%$ 的数据，$1\le N\le 10^5$，且所有坐标分量的绝对值都不超过 $1000$。

NOIP2010 普及组 第三题


---

---
title: "[COCI 2024/2025 #4] 力 / Benzinska"
layout: "post"
diff: 普及/提高-
pid: P11650
tag: ['贪心', '2025', '排序', 'COCI（克罗地亚）']
---
# [COCI 2024/2025 #4] 力 / Benzinska
## 题目背景

译自 [COCI 2024/2025 #4](https://hsin.hr/coci/) T2。$\texttt{1s,0.5G}$。满分为 $70$。

## 题目描述


在数轴上，Malnar 从原点（$x=0$）出发，前往 $x=X$ 处。

Malnar 初始有 $D$ 单位能量，每走一个单位长度消耗一单位能量。在整个过程中，能量必须**不小于** $0$。

有 $n$ 个餐馆，第 $i$ 个餐馆位于 $x=x_i$ 处，在第 $i$ 个餐馆用餐可以使能量增加 $y_i$。**至多只能在每个餐馆用一次餐，且不同餐馆的 $x_i$ 可能相同。**

求出为了达成目标，至少需要在多少个餐馆用餐。
## 输入格式


第一行，三个正整数 $n,D,X$。

第二行，$n$ 个正整数 $x_1,\ldots,x_n$。

第三行，$n$ 个正整数 $y_1,\ldots,y_n$。

## 输出格式


如果不可能，输出一行一个 $\texttt{-1}$。

否则输出一行一个非负整数表示答案。
## 样例

### 样例输入 #1
```
5 5 12
3 4 7 8 11
3 2 1 2 1
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
5 10 40
1 20 30 2 38
7 7 7 7 7
```
### 样例输出 #2
```
5
```
### 样例输入 #3
```
4 5 12
3 6 9 10
2 1 2 2
```
### 样例输出 #3
```
-1
```
## 提示


#### 样例解释

样例 $1$ 解释：在第 $1,2,4$ 个餐馆用餐。

#### 数据范围

对于 $100\%$ 的数据，保证：

- $1\le n\le 2\times 10^5$；
- $1\le D,X,y_i\le 10^9$；
- $1\le x_i\lt X$。


| 子任务编号 | $n\le$ |  特殊性质 | 得分 |  
| :--: | :--: | :--: |:--: | 
| $ 1 $    | $2\times 10^5$ |  A   |   $ 15 $   |  
| $ 2 $    | $10^3$ |   |  $ 30 $   |  
| $ 3 $    | $2\times 10^5$  |  | $ 25 $   |

- 特殊性质 A：$y_i$ 全相等。




---

---
title: "刷题"
layout: "post"
diff: 普及/提高-
pid: P1167
tag: ['模拟', '数学', '贪心', '洛谷原创', '排序']
---
# 刷题
## 题目描述

NOIP 临近了，小 A 却发现他已经不会写题了。好在现在离竞赛还有一段时间，小 A 决定从现在开始夜以继日地刷题。也就是说小 A 废寝忘食，一天二十四小时地刷题。

今天的日期（时间）是 yyyy 年 mm 月 dd 日 hh 时 MM 分，考试的时间是 yyyy2 年 mm2 月 dd2 日 hh2 时 MM2 分。这之间的所有时间小 A 都用来刷题了，那么考试之前他最多能刷多少题呢？注意哦，考虑闰年。

时间紧张小 A 只管数量不管质量。当然有的题目容易一些，有的题目难一些。根据小 A 的经验，他能一眼看出写出某一个题目需要的时间，以分钟记。

现在给出洛谷 Online Judge 的题目列表，请你挑出最多的题目使小A能在竞赛前写出来。

我们假设从远古到未来，历法的表示与现在一样。

## 输入格式

第一行一个整数 $N$，表示洛谷 Online Judge 的题目数，$N≤5000$。

接下来$N$行，每行一个整数表示刷该题需要用的时间，以分钟记（$ \le 10000$）。（这个题本身是什么并不重要，不是么？`小A`已经写过题目数为 $0$ 个）。

接下来两行依次是当前时间和竞赛时间。时间给出的格式是：`yyyy-mm-dd-hh:MM`，例如：`2007-06-23-02:00`，采用 $24$ 小时制，每天从 00:00 到 23:59，年份从 $0000$ 到 $9999$。

## 输出格式

一行，一个整数，NOIP 前最多刷的题目数。

## 样例

### 样例输入 #1
```
2
1
1
2007-06-23-11:59
2007-06-23-12:00
```
### 样例输出 #1
```
1
```


---

---
title: "[GESP202503 五级] 平均分配"
layout: "post"
diff: 普及/提高-
pid: P11960
tag: ['贪心', '2025', '排序', 'GESP']
---
# [GESP202503 五级] 平均分配
## 题目描述

小 A 有 $2n$ 件物品，小 B 和小 C 想从小 A 手上买走这些物品。对于第 $i$ 件物品，小 B 会以 $b_i$ 的价格购买，而小 C 会以 $c_i$ 的价格购买。为了平均分配这 $2n$ 件物品，小 A 决定小 B 和小 C 各自只能买走恰好 $n$ 件物品。你能帮小 A 求出他卖出这 $2n$ 件物品所能获得的最大收入吗？
## 输入格式

第一行，一个正整数 $n$。

第二行，$2n$ 个整数 $b_1,b_2,\dots,b_{2n}$。

第三行，$2n$ 个整数 $c_1,c_2,\dots,c_{2n}$。
## 输出格式

一行，一个整数，表示答案。
## 样例

### 样例输入 #1
```
3
1 3 5 6 8 10
2 4 6 7 9 11
```
### 样例输出 #1
```
36
```
### 样例输入 #2
```
2
6 7 9 9
1 2 10 12
```
### 样例输出 #2
```
35
```
## 提示

#### 数据范围

对于 $20\%$ 的测试点，保证 $1\le n\le8$。

对于另外 $20\%$ 的测试点，保证 $0\le b_i\le1$，$0\le  c_i\le1$。

对于所有测试点，保证 $1\le n\le10^5$，$0\le b_i\le10^9$，$0\le c_i\le10^9$。


---

---
title: "[USACO1.3] 修理牛棚 Barn Repair"
layout: "post"
diff: 普及/提高-
pid: P1209
tag: ['搜索', '贪心', 'USACO', '排序']
---
# [USACO1.3] 修理牛棚 Barn Repair
## 题目描述

在一个月黑风高的暴风雨夜，Farmer John 的牛棚的屋顶、门被吹飞了 好在许多牛正在度假，所以牛棚没有住满。   

牛棚一个紧挨着另一个被排成一行，牛就住在里面过夜。有些牛棚里有牛，有些没有。 所有的牛棚有相同的宽度。   

自门遗失以后，Farmer John 必须尽快在牛棚之前竖立起新的木板。他的新木材供应商将会供应他任何他想要的长度，但是吝啬的供应商只能提供有限数目的木板。 Farmer John 想将他购买的木板总长度减到最少。

给出 $m,s,c$，表示木板最大的数目、牛棚的总数、牛的总数；以及每头牛所在牛棚的编号，请算出拦住所有有牛的牛棚所需木板的最小总长度。

## 输入格式

一行三个整数 $m,s,c$，意义如题目描述。   
接下来 $c$ 行，每行包含一个整数，表示牛所占的牛棚的编号。

## 输出格式

输出一行一个整数，表示所需木板的最小总长度。

## 样例

### 样例输入 #1
```
4 50 18
3 
4 
6 
8 
14
15 
16 
17 
21
25 
26 
27 
30 
31 
40 
41 
42 
43

```
### 样例输出 #1
```
25

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le m \le 50$，$1\le c \le s \le 200$。 

USACO Training Section 1.3



---

---
title: "[蓝桥杯 2025 省 Python A/研究生组] 最大数字"
layout: "post"
diff: 普及/提高-
pid: P12186
tag: ['贪心', '高精度', '2025', '排序', '蓝桥杯省赛']
---
# [蓝桥杯 2025 省 Python A/研究生组] 最大数字
## 题目描述

我们有 $n$ 个连续的整数 $1, 2, 3, \cdots, n$，可以自由排列它们的顺序。

然后，我们把这些数字转换成二进制表示，按照排列顺序拼接形成一个新的二进制数。

我们的目标是让这个二进制数的值最大，并输出这个二进制对应的十进制表示。
## 输入格式

输入一行包含一个正整数 $n$。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
30
```
## 提示

### 评测用例规模与约定

- 对于 $20\%$ 的评测用例，$1 \leq n \leq 10$；
- 对于 $40\%$ 的评测用例，$1 \leq n \leq 100$；
- 对于 $60\%$ 的评测用例，$1 \leq n \leq 500$；
- 对于 $80\%$ 的评测用例，$1 \leq n \leq 1000$；
- 对于所有评测用例，$1 \leq n \leq 10000$。


---

---
title: "[JSOI2008] 完美的对称"
layout: "post"
diff: 普及/提高-
pid: P1227
tag: ['模拟', '数学', '2008', '各省省选', '江苏', '排序']
---
# [JSOI2008] 完美的对称
## 题目描述

在峰会期间，必须使用许多保镖保卫参加会议的各国代表。代表们除了由他自己的随身保镖保护外，组委会还指派了一些其他的特工和阻击手保护他们。为了使他们的工作卓有成效，使被保卫的人的安全尽可能得到保障，保镖被分配到被保护人的各个方向。

保镖的最佳站立位置应该是这样的：被保护人应站在所有保镖的对称中心。但是，只要被保护人一移动，保镖就很难根据要人的新位置调整位置。大多数的特工都很难对此作出实时调整。

因此，安全部长决定将该过程逆转一下，保镖先站好自己的位置，然后要人在他们的对称中心找到合适的位置。如果要人随便走动，我们就对他的安全不必负责。

你的工作是使这个过程自动操作。给出一组 $N$ 个点（保镖的位置），你要找出它们的对称中心 $S$，在这儿被保护人将相对安全。下面以此类推。

首先我们给定一点 $A$ 以及对称中心 $S$，点 $A'$ 是点 $A$ 以 $S$ 为对称中心形成的像点，即点 $S$ 是线段 $AA'$ 的对称中心。

点阵组（$X$）以 $S$ 为中心的像点是由每个点的像点组成的点阵组。$X$ 是用来产生对称中心 $S$ 的，即点阵 $X$ 以 $S$ 为中心的像点的集合即为点阵 $X$ 本身。

![](https://cdn.luogu.com.cn/upload/image_hosting/trym53o8.png)

## 输入格式

输入文件第一行是一个整数 $N$，$1\le N\le 20000$，接下来的 $N$ 行每行包含用空格隔开的两个整数 $X_i$ 和 $Y_i$，$-10^5\le X_i,Y_i\le 10^5$，表示这组点阵中第 $i$ 个点的笛卡尔坐标值。


因为任何两个保镖都不会站在同一个位置上，所以在给定的作业中，任何两点都不相同。但注意保镖可以站在被保护人相同的位置。

## 输出格式

输出文件仅有一行。如果给定的点阵能产生一个对称中心，则输出 $\texttt{V.I.P.  should  stay  at (}x\texttt{,}y\texttt{).}$，其中 $x$ 和 $y$ 代表中心的笛卡尔坐标值，格式为四舍五入保留至小数点后一位。


如果该组点阵无对称中心，输出 `This is a dangerous situation!`，注意输出时除了两个单词之间用一个空格隔开外，不要输出多余空格。

## 样例

### 样例输入 #1
```
8

1 10

3 6

6 8

6 2

3 -4

1 0

-2 -2

-2 4


```
### 样例输出 #1
```
V.I.P. should stay at (2.0,3.0).
```
## 提示

JSOI2008 第二轮。



---

---
title: "智力大冲浪"
layout: "post"
diff: 普及/提高-
pid: P1230
tag: ['贪心', '排序']
---
# 智力大冲浪
## 题目描述

小伟报名参加中央电视台的智力大冲浪节目。本次挑战赛吸引了众多参赛者，主持人为了表彰大家的勇气，先奖励每个参赛者 $m$ 元。先不要太高兴，因为这些钱还不一定都是你的。接下来主持人宣布了比赛规则：

首先，比赛时间分为 $n$ 个时段，它又给出了很多小游戏，每个小游戏都必须在规定期限 $t_i$ 前完成。如果一个游戏没能在规定期限前完成，则要从奖励费 $m$ 元中扣去一部分钱 $w_i$，$w_i$ 为自然数，不同的游戏扣去的钱是不一样的。当然，每个游戏本身都很简单，保证每个参赛者都能在一个时段内完成，而且都必须从整时段开始。主持人只是想考考每个参赛者如何安排组织自己做游戏的顺序。作为参赛者，小伟很想赢得冠军，当然更想赢取最多的钱！注意：比赛绝对不会让参赛者赔钱!

## 输入格式

第一行为 $m$，表示一开始奖励给每位参赛者的钱；

第二行为 $n$，表示有 $n$ 个小游戏；

第三行有 $n$ 个数，分别表示游戏 $1$ 到 $n$ 的规定完成期限；

第四行有 $n$ 个数，分别表示游戏 $1$ 到 $n$ 不能在规定期限前完成的扣款数。
## 输出格式

输出仅一行，表示小伟能赢取最多的钱。
## 样例

### 样例输入 #1
```
10000
7
4 2 4 3 1 4 6
70 60 50 40 30 20 10

```
### 样例输出 #1
```
9950
```
## 提示

对于 $100\%$ 的数据，$1 \le n \le 500$，$1 \le m \le 5 \times 10^5$，$1 \le t_i \le n$，$1 \le w_i \le 1000$。


---

---
title: "「YLLOI-R1-T2」圣诞星"
layout: "post"
diff: 普及/提高-
pid: P12413
tag: ['贪心', '二分', '洛谷原创', 'O2优化', '排序', '洛谷月赛']
---
# 「YLLOI-R1-T2」圣诞星
## 题目背景

![圣诞星](bilibili:BV14Q4y137d1)
## 题目描述

小 Y 在商店里一共要买 $n$ 个商品，第 $i$ 个要买的商品价格为 $a_i$ 元。

在买这些商品前，小 Y 可以买任意多张优惠券，对于每一张优惠券，其价格为 $w$ 元。每有一张优惠券，在买任何商品时可以优惠 $1$ 元，但任何一个商品最低只能优惠到 $0$ 元。（优惠券不算商品）

在付钱过程中，每付完一个商品的钱，小 Y 还能再获得一张优惠券。

现在小 Y 想知道，最少需要多少钱才可以买完自己要买的商品。

注：所有的优惠券都是永久性的。
## 输入格式

第一行两个整数 $n,w$。

第二行 $n$ 个整数 $a_i$。
## 输出格式

一个整数，表示小 Y 买完所有自己要买的商品所需的最少钱数。
## 样例

### 样例输入 #1
```
4 3
3 4 5 5
```
### 样例输出 #1
```
9
```
### 样例输入 #2
```
4 3
4 4 3 3
```
### 样例输出 #2
```
7
```
## 提示

#### 【样例解释#1】

下面展示一种最优方案。

先购买 $3$ 张优惠券，花费 $3\times 3=9$ 元。

接下来使用 $0$ 元购买第 $1$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $2$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $3$ 个要买的商品（$5$ 张优惠券优惠了 $5$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $4$ 个要买的商品（$6$ 张优惠券优惠了 $5$ 元，因为任何一个商品最低只能优惠到 $0$ 元），并再获得一张优惠券。

因此一共花费 $9+0+0+0+0=9$ 元。

#### 【样例解释#2】

下面展示一种最优方案。

先购买 $1$ 张优惠券，花费 $1\times 3=3$ 元。

接下来使用 $2$ 元购买第 $4$ 个要买的商品（$1$ 张优惠券优惠了 $1$ 元），并再获得一张优惠券。

接下来使用 $1$ 元购买第 $3$ 个要买的商品（$2$ 张优惠券优惠了 $2$ 元），并再获得一张优惠券。

接下来使用 $1$ 元购买第 $2$ 个要买的商品（$3$ 张优惠券优惠了 $3$ 元），并再获得一张优惠券。

接下来使用 $0$ 元购买第 $1$ 个要买的商品（$4$ 张优惠券优惠了 $4$ 元），并再获得一张优惠券。

因此一共花费 $3+2+1+1+0=7$ 元。

#### 【数据范围】

**本题采用捆绑测试。**

- Subtask 1（10 pts）：$\forall a_i=i$。
- Subtask 2（10 pts）：$w=1$。
- Subtask 3（20 pts）：$n,a_i,w\le 10$。
- Subtask 4（30 pts）：$n,a_i,w\le 1000$。
- Subtask 5（30 pts）：无特殊限制。

对于全部数据，保证：$1\le n\le 10^5$，$1\le a_i,w\le 10^9$。


---

---
title: "种树"
layout: "post"
diff: 普及/提高-
pid: P1250
tag: ['贪心', '排序', '差分约束']
---
# 种树
## 题目背景

一条街的一边有几座房子，因为环保原因居民想要在路边种些树。
## 题目描述

路边的地区被分割成块，并被编号成 $1, 2, \ldots,n$。每个部分为一个单位尺寸大小并最多可种一棵树。

每个居民都想在门前种些树，并指定了三个号码 $b$，$e$，$t$。这三个数表示该居民想在地区 $b$ 和 $e$ 之间（包括 $b$ 和 $e$）种至少 $t$ 棵树。

居民们想种树的各自区域可以交叉。你的任务是求出能满足所有要求的最少的树的数量。
## 输入格式

输入的第一行是一个整数，代表区域的个数 $n$。

输入的第二行是一个整数，代表房子个数 $h$。

第 $3$ 到第 $(h + 2)$ 行，每行三个整数，第 $(i + 2)$ 行的整数依次为 $b_i, e_i, t_i$，代表第 $i$ 个居民想在 $b_i$ 和 $e_i$ 之间种至少 $t_i$ 棵树。
## 输出格式

输出一行一个整数，代表最少的树木个数。
## 样例

### 样例输入 #1
```
9
4
1 4 2
4 6 2
8 9 2
3 5 2
```
### 样例输出 #1
```
5

```
## 提示

#### 数据规模与约定

对于 $100\%$ 的数据，保证：

- $1 \leq n \leq 3 \times 10^4$，$1 \leq h \leq 5 \times 10^3$。
- $1 \leq b_i \leq e_i \leq n$，$1 \leq t_i \leq e_i - b_i + 1$。


---

---
title: "[KOI 2024 Round 2] 路灯"
layout: "post"
diff: 普及/提高-
pid: P12648
tag: ['模拟', '数学', '2024', '枚举', '排序', 'KOI（韩国）']
---
# [KOI 2024 Round 2] 路灯
## 题目背景

试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。

按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。
## 题目描述

在一条数轴表示的直线道路上，安装了 $N$ 盏路灯。每盏路灯的位置按从左到右依次为 $A_1 < A_2 < \cdots < A_N$。

我们定义某个位置 $x$ 的“黑暗程度”为该位置到所有路灯之间距离的最小值。即，黑暗程度等于数列 $|A_1 - x|, |A_2 - x|, \dots, |A_N - x|$ 中的最小值。其中，$|y|$ 表示 $y$ 的绝对值，若 $y \geq 0$，则 $|y| = y$；若 $y < 0$，则 $|y| = -y$。

例如，若 $N = 3$，且路灯分别位于 $A_1 = 1$、$A_2 = 4$、$A_3 = 8$，那么从位置 $x = 0$ 到 $x = 10$ 的黑暗程度如下：

| 位置 $x$ | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
|----------|---|---|---|---|---|---|---|---|---|----|----|
| 黑暗程度 | 1 | 0 | 1 | 1 | 0 | 1 | 2 | 1 | 0 | 1  | 2  |
| 是否有灯 |   | O |   |   | O |   |   |   | O |    |    |

给定一个整数 $L$，我们关心从 $x = 0$ 到 $x = L$ 这 $L+1$ 个整数位置的黑暗程度。请你编程，输出其中按黑暗程度从小到大排序后的前 $K$ 小的值。
## 输入格式

第一行输入三个整数 $L,\ N,\ K$，用空格隔开。  
第二行输入 $N$ 个整数 $A_1, A_2, \dots, A_N$，表示每盏路灯的位置，以空格隔开。

## 输出格式

输出 $K$ 行，第 $i$ 行输出从小到大排序后的第 $i$ 小黑暗程度值。

## 样例

### 样例输入 #1
```
10 3 4
1 4 8
```
### 样例输出 #1
```
0
0
0
1
```
### 样例输入 #2
```
4 5 5
0 1 2 3 4
```
### 样例输出 #2
```
0
0
0
0
0
```
### 样例输入 #3
```
7 1 4
3
```
### 样例输出 #3
```
0
1
1
2
```
### 样例输入 #4
```
9 4 10
0 3 6 9
```
### 样例输出 #4
```
0
0
0
0
1
1
1
1
1
1
```
## 提示

**约束条件**

- 所有输入为整数。
- $1 \leq L \leq 10^{18}$
- $1 \leq N \leq 300\,000$
- $1 \leq K \leq 500\,000$
- $K \leq L + 1$
- $0 \leq A_1 < A_2 < \cdots < A_N \leq L$

**子问题**

1. （10 分）$N = 1$  
2. （20 分）$N \leq 2\,500,\ L \leq 2\,500$  
3. （15 分）$2 \leq N$ 且 $N - 1$ 整除 $L$，且 $A_i = \dfrac{L}{N-1} \times (i - 1)$  
4. （20 分）$L \leq 5\,000\,000$  
5. （35 分）无额外限制条件

翻译由 ChatGPT-4o 完成


---

---
title: "磨合"
layout: "post"
diff: 普及/提高-
pid: P12733
tag: ['数学', '贪心', '二分', '2025', '洛谷原创', '排序', '前缀和', '洛谷月赛']
---
# 磨合
## 题目背景

[This](https://www.luogu.com.cn/problem/U29089) is the English statement.\
But you can only submit your solution here.

> 「能够像这样『磨合』，实在是帮了个大忙。」\
——绫濑沙季
## 题目描述

Yuuta 和 Saki 遇到了 $n$ 个问题，问题的难度为 $d_1,\dots,d_n$。

他们可以以任意顺序解决问题，对于准备解决的第 $i$ 个问题，每将难度减少 $1$，两人需要花费 $i$ 秒。将难度减少为 $0$ 时问题被解决，他们才可以继续解决下一个问题。

如果他们正在在解决第 $i$ 个问题，但剩余时间少于 $i$ 秒，他们就不能继续解决剩下的问题了，第 $i$ 个问题也没有解决。

他们想要知道，如果共有 $t$ 秒，那么最多能解决多少个问题。由于他们可能面对很多种不同情况，所以会多次改变 $t$ 进行询问。
## 输入格式

第一行输入两个整数 $n,q$ 表示问题总数和询问次数。

第二行输入 $n$ 个整数，表示 $d_1,\dots,d_n$。

接下来 $q$ 行，每行输入一个整数表示询问的总时间 $t$。
## 输出格式

对于每次询问输出一行一个整数表示最多能解决的问题数量。
## 样例

### 样例输入 #1
```
3 2
1 7 3
10
16

```
### 样例输出 #1
```
2
3

```
### 样例输入 #2
```
10 3
923 243 389 974 100 485 296 377 61 552
2403
5819
0

```
### 样例输出 #2
```
5
6
0

```
## 提示

#### 样例解释

若 $t=10$，则第 $1$ 个解决难度为 $7$ 的问题，第 $2$ 个解决难度为 $1$ 的问题，花费的时间为 $1\times7+2\times1=9$ 秒。可以证明他们无法解决三个问题。

若 $t=16$，则依次解决难度为 $7,3,1$ 的问题，花费的时间为 $1\times7+2\times3+3\times1=16$ 秒。

#### 数据范围与限制

**本题采用捆绑测试，各 Subtask 的限制与分值如下。**

| Subtask No. | $n\le$ | $q\le$ | $d_i\le$ | $t\le$ | 分值 | 依赖子任务 |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| $1$ | $10$ | $1$ | $10$ | $10^3$ | $13$ |  |
| $2$ | $10^3$ | $1$ | $10^3$ | $10^9$ | $24$ | $1$ |
| $3$ | $10^3$ | $10^6$ | $10^3$ | $10^9$ | $16$ | $1,2$ |
| $4$ | $10^6$ | $1$ | $10^3$ | $10^{16}$ | $16$ | $1,2$ |
| $5$ | $10^6$ | $10^6$ | $10^3$ | $10^{16}$ | $31$ | $1,2,3,4$ |

对于所有数据，满足 $1\le n,q\le10^6$，$1\le d_i\le10^3$，$0\le t\le10^{16}$。


---

---
title: "尼克的任务"
layout: "post"
diff: 普及/提高-
pid: P1280
tag: ['动态规划 DP', '枚举', '排序']
---
# 尼克的任务
## 题目描述

尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。

尼克的一个工作日为 $n$ 分钟，从第 $1$ 分钟开始到第 $n$ 分钟结束。当尼克到达单位后他就开始干活，公司一共有 $k$ 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 $p$ 分钟开始，持续时间为 $t$ 分钟，则该任务将在第 $(p+t-1)$ 分钟结束。

写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。
## 输入格式

输入数据第一行含两个用空格隔开的整数 $n$ 和 $k$。

接下来共有 $k$ 行，每一行有两个用空格隔开的整数 $p$ 和 $t$，表示该任务从第 $p$ 分钟开始，持续时间为 $t$ 分钟。
## 输出格式

输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。
## 样例

### 样例输入 #1
```
15 6
1 2
1 6
4 11
8 5
8 1
11 5

```
### 样例输出 #1
```
4

```
## 提示

#### 数据规模与约定

- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 10^4,1 \leq k \leq 10^4,1 \leq p \leq n,1 \leq p+t-1 \leq n$。


---

---
title: "[NERC 2020 Online] Miser"
layout: "post"
diff: 普及/提高-
pid: P12862
tag: ['2020', '二分', '拓扑排序', 'ICPC', 'NERC/NEERC']
---
# [NERC 2020 Online] Miser
## 题目描述

In some non-classical University, there is going to be an opening ceremony of the cafeteria in $n$ days. In front of the closed cafeteria, there is a sign with a number --- how many days are left before the opening.

For each day out of these $n$, the director of the cafeteria knows all the people who are coming to the University and are going to see the sign. The director has to choose a sign with a number each day, such that each person who is coming to the University sees that the number on the sign is decreasing. The director is a typical $\emph{miser}$ who spends as little money as possible and wants to order the minimum possible number of different signs. Your task is to help the director find this number.

Consider the first test case: person $1$ comes on days $1$, $2$ and $5$, and person $2$ comes on days $2$, $3$ and $4$. The director can order just four signs with numbers $1$, $2$, $3$ and $4$, to put a sign with $1$ on days $5$ and $4$, a sign with $2$ on day $3$, a sign with $3$ on day $2$, and a sign with $4$ on day $1$. Thus, person $1$ will see the signs $4$, $2$, and $1$ and person $2$ will see the signs $3$, $2$, and $1$.
## 输入格式

The first line of the input contains an integer $n$ --- the total number of days before the opening of the~cafeteria. The next $n$ lines contain the description of each day. The description starts with the positive integer $k$ --- the number of people that come to the University this day. This integer is followed by $k$ distinct integers --- the identifiers of the people that come.

The sum of all $k$ over all days does not exceed $10^5$. Identifiers of people are positive and do not exceed $10^5$.
## 输出格式

Output one integer --- the minimum possible number of different signs that have to be ordered.
## 样例

### 样例输入 #1
```
5
1 1
2 1 2
1 2
1 2
1 1
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
5
1 1
1 1
1 1
1 1
1 1
```
### 样例输出 #2
```
5
```


---

---
title: "[蓝桥杯 2025 国 C] 宗门大比"
layout: "post"
diff: 普及/提高-
pid: P12881
tag: ['贪心', '2025', '排序', '蓝桥杯国赛', '分类讨论']
---
# [蓝桥杯 2025 国 C] 宗门大比
## 题目描述

小蓝所在宗门准备进行宗门大比，共有 $n$ 名弟子参与，从左到右站成一排。第 $i$ 名弟子的功力值为 $a_i$，小蓝是第 $k$ 名弟子。宗门大比将举行 $m$ 次切磋，每次切磋由两名弟子进行，其中功力值高的弟子将获胜，功力值低的弟子的功力值将减 $1$。如果切磋的两名弟子功力值相同则平局，切磋后两名弟子的功力值保持不变。同一名弟子可能参与多次切磋，也可能一次都不参与。一名弟子可以和多名弟子切磋，两人也可以进行多次切磋。

切磋结束后，弟子们将按照功力值从高到低的顺序进入藏宝阁进行功法挑选，功力值相同的弟子按初始站位靠左的优先。小蓝想知道，如果他能规定每次切磋的人选，他在最优情况下能第几个进入藏宝阁？
## 输入格式

输入的第一行包含三个正整数 $n, m, k$，相邻整数之间使用一个空格分隔。

第二行包含 $n$ 个正整数 $a_1, a_2, \cdots, a_n$，相邻整数之间使用一个空格分隔。

## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
6 2 2
5 5 5 6 3 2
```
### 样例输出 #1
```
2
```
## 提示

**【样例说明】**

其中一种方案：第一次切磋 $(a_1, a_4)$，第二次切磋 $(a_1, a_6)$，最终功力值分别为 $4, 5, 5, 6, 3, 1$，小蓝 $a_2 = 5$ 排第二。

**【评测用例规模与约定】**

对于 $40\%$ 的评测用例，$2 \leq n \leq 100$；

对于所有评测用例，$2 \leq n \leq 500000$，$1 \leq a_i \leq 1000$，$1 \leq k, m \leq n$。


---

---
title: "[GCJ 2022 Qualification] Chain Reactions"
layout: "post"
diff: 普及/提高-
pid: P12982
tag: ['2022', '拓扑排序', 'Google Code Jam']
---
# [GCJ 2022 Qualification] Chain Reactions
## 题目描述

Wile lives alone in the desert, so he entertains himself by building complicated machines that run on chain reactions. Each machine consists of $\mathbf{N}$ modules indexed $1, 2, \ldots, \mathbf{N}$. Each module may point at one other module with a lower index. If not, it points at the abyss.

Modules that are not pointed at by any others are called *initiators*. Wile can manually trigger initiators. When a module is triggered, it triggers the module it is pointing at (if any) which in turn may trigger a third module (if it points at one), and so on, until the chain would hit the abyss or an already triggered module. This is called a *chain reaction*.

Each of the $\mathbf{N}$ modules has a fun factor $\mathbf{F}_i$. The fun Wile gets from a chain reaction is the largest fun factor of all modules that triggered in that chain reaction. Wile is going to trigger each initiator module once, in some order. The overall fun Wile gets from the session is the sum of the fun he gets from each chain reaction.

For example, suppose Wile has 4 modules with fun factors $\mathbf{F}_1 = 60$, $\mathbf{F}_2 = 20$, $\mathbf{F}_3 = 40$, and $\mathbf{F}_4 = 50$ and module 1 points at the abyss, modules 2 and 3 at module 1, and module 4 at module 2. There are two initiators (3 and 4) that Wile must trigger, in some order.

![](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/v8jwu5d8)

As seen above, if Wile manually triggers module 4 first, modules 4, 2, and 1 will get triggered in the same chain reaction, for a fun of $\max(50, 20, 60) = 60$. Then, when Wile triggers module 3, module 3 will get triggered alone (module 1 cannot get triggered again), for a fun of 40, and an overall fun for the session of $60 + 40 = 100$.

![](https://www.luogu.com.cn/fe/api/problem/downloadAttachment/94l7nhpi)

However, if Wile manually triggers module 3 first, modules 3 and 1 will get triggered in the same chain reaction, for a fun of $\max(40, 60) = 60$. Then, when Wile triggers module 4, modules 4 and 2 will get triggered in the same chain reaction, for a fun of $\max(50, 20) = 50$, and an overall fun for the session of $60 + 50 = 110$.

Given the fun factors and the setup of the modules, compute the maximum fun Wile can get if he triggers the initiators in the best possible order.
## 输入格式

The first line of the input gives the number of test cases, $\mathbf{T}$. $\mathbf{T}$ test cases follow, each described using 3 lines. Each test case starts with a line with a single integer $\mathbf{N}$, the number of modules Wile has. The second line contains $\mathbf{N}$ integers $\mathbf{F}_1, \mathbf{F}_2, \ldots, \mathbf{F}_\mathbf{N}$ where $\mathbf{F}_i$ is the fun factor of the $i$-th module. The third line contains $\mathbf{N}$ integers $\mathbf{P}_1, \mathbf{P}_2, \ldots \mathbf{P}_\mathbf{N}$. If $\mathbf{P}_i = 0$, that means module $i$ points at the abyss. Otherwise, module $i$ points at module $\mathbf{P}_i$.

## 输出格式

For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the maximum fun Wile can have by manually triggering the initiators in the best possible order.
## 样例

### 样例输入 #1
```
3
4
60 20 40 50
0 1 1 2
5
3 2 1 4 5
0 1 1 1 0
8
100 100 100 90 80 100 90 100
0 1 2 1 2 3 1 3
```
### 样例输出 #1
```
Case #1: 110
Case #2: 14
Case #3: 490
```
## 提示

**Sample Explanation**

Sample Case #1 is the one explained in the problem statement.

In Sample Case #2, there are $4$ initiators (modules $2$ through $5$), so there are $4$ chain reactions. Activating them in order $3, 5, 4, 2$ yields chains of fun $3, 5, 4, 2$ for an overall fun of $14$. Notice that we are summing the four highest fun numbers in the input, so there is no way to get more than that.

In Sample Case #3, an optimal activation order of the $5$ initiators is $4, 5, 7, 6, 8$.

**Limits**

- $1 \leq \mathbf{T} \leq 100$.
- $1 \leq \mathbf{F}_i \leq 10^9$.
- $0 \leq \mathbf{P}_i \leq i - 1$, for all $i$.

**Test Set 1 (10 Pts, Visible Verdict)**

- Time limit: 5 seconds.
- $1 \leq \mathbf{N} \leq 10$.

**Test Set 2 (12 Pts, Visible Verdict)**

- Time limit: 5 seconds.
- $1 \leq \mathbf{N} \leq 1000$.

**Test Set 3 (5 Pts, Hidden Verdict)**

- Time limit: 10 seconds.
- $1 \leq \mathbf{N} \leq 100000$.


---

---
title: "[GCJ 2021 #1C] Closest Pick"
layout: "post"
diff: 普及/提高-
pid: P13032
tag: ['数学', '贪心', '2021', 'Special Judge', '排序', 'Google Code Jam']
---
# [GCJ 2021 #1C] Closest Pick
## 题目描述

You are entering a raffle for a lifetime supply of pancakes. $\textbf{N}$ tickets have already been sold. Each ticket contains a single integer between $1$ and $\textbf{K}$, inclusive. Different tickets are allowed to contain the same integer. You know exactly which numbers are on all of the tickets already sold and would like to maximize your odds of winning by purchasing two tickets (possibly with the same integer on them). You are allowed to choose which integers between $1$ and $\textbf{K}$, inclusive, are on the two tickets.

![](https://cdn.luogu.com.cn/upload/image_hosting/dzt1cd5t.png)

You know you are the last customer, so after you purchase your tickets, no more tickets will be purchased. Then, an integer $c$ between $1$ and $\textbf{K}$, inclusive, is chosen uniformly at random. If one of your tickets is strictly closer to $c$ than all other tickets or if both of your tickets are the same distance to $c$ and strictly closer than all other tickets, then you win the raffle. Otherwise, you do not win the raffle.

Given the integers on the $\textbf{N}$ tickets purchased so far, what is the maximum probability of winning the raffle you can achieve by choosing the integers on your two tickets optimally?

## 输入格式

The first line of the input gives the number of test cases, $\textbf{T}$. $\textbf{T}$ test cases follow. Each test case consists of two lines. The first line of a test case contains two integers $\textbf{N}$ and $\textbf{K}$: the number of tickets already sold and the limit of the range of integers to pick from, respectively. The second line contains $\textbf{N}$ integers $\textbf{P}_1, \textbf{P}_2, \ldots, \textbf{P}_\textbf{N}$, representing the integers on the tickets that have already been purchased.

## 输出格式

For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from $1$) and $y$ is the maximum win probability you can achieve if you choose your tickets optimally. $y$ will be considered correct if it is within an absolute or relative error of $10^{-6}$ of the correct answer. See the FAQ for an explanation of what that means, and what formats of real numbers we accept.
## 样例

### 样例输入 #1
```
4
3 10
1 3 7
4 10
4 1 7 3
4 3
1 2 3 2
4 4
1 2 4 2
```
### 样例输出 #1
```
Case #1: 0.5
Case #2: 0.4
Case #3: 0.0
Case #4: 0.25
```
## 提示

**Sample Explanation**

In Sample Case #1, you can purchase tickets with the integers $4$ and $8$ on them and then win if $4$, $5$, $8$, $9$, or $10$ are chosen giving you $\frac{5}{10} = 0.5$ probability of winning. Purchasing tickets with the integers $6$ and $8$ on them also yields a $0.5$ probability of winning, but no combination yields more.

In Sample Case #2, $6$ and $8$ is a possible optimal pair of tickets, which wins when $c$ is one of $6$, $8$, $9$, or $10$. Note that the integers on the tickets are not necessarily given in sorted order.

In Sample Case #3, every possible $c$ is at distance $0$ from an already purchased ticket, so you cannot win regardless of your choices.

In Sample Case #4, if you pick $3$ for at least one of your tickets, you win on $c = 3$, for $\frac{1}{4} = 0.25$ win probability. There is no way to win when $c$ is any other integer, so that is the best you can do.

**Limits**

- $1 \leq \textbf{T} \leq 100$.
- $1 \leq \textbf{N} \leq 30$.
- $1 \leq \textbf{P}_i \leq \textbf{K}$, for all $i$.

**Test Set 1 (9 Pts, Visible Verdict)**

- $1 \leq \textbf{K} \leq 30$.

**Test Set 2 (16 Pts, Visible Verdict)**

- $1 \leq \textbf{K} \leq 10^9$.


---

---
title: "[GCJ 2021 #2] Minimum Sort"
layout: "post"
diff: 普及/提高-
pid: P13035
tag: ['2021', '交互题', 'Special Judge', '排序', 'Google Code Jam']
---
# [GCJ 2021 #2] Minimum Sort
## 题目描述

In this problem, you need to sort a list of $N = 100$ distinct integers in strictly increasing order. You can rearrange the list by swapping the contents of any two positions (they do not need to be adjacent). Unfortunately, you cannot read those contents directly. You can access information about the list contents by querying the minimum of a range. The minimum query gives you the position of the minimum value over a range of consecutive positions. For example, in the list $[51, 33, 100, 11]$, the minimum over the range between positions 2 and 4, inclusive (1-based), is at position 4 and the minimum between positions 1 and 3 is at position 2.

Queries about the minimum within a range are limited by a coin budget per test case. Larger ranges are cheaper: asking about the position of the minimum between positions $i$ and $j$ (for $i < j$) costs $\lceil 10^8 / (j - i + 1) \rceil$ coins, where $\lceil x \rceil$ is the smallest integer greater than or equal to $x$ (that is, $x$ rounded up). Swap operations, on the other hand, do not cost any coins.

Write a program that sorts lists of integers using any number of swaps and at most $6 \times 10^8$ coins per test case distributed among any number of minimum queries.

### Interactive Protocol

This is an interactive problem.

Initially, the judge will send you a single line containing two integers $\mathbf{T}$ and $\mathbf{N}$: the number of test cases and the number of elements to sort within each test case, respectively. The judge has the initial lists preset before it gets any input from your program, and the only changes done to them during the exchanges with your program are the swaps that you request.

Then, you must process $\mathbf{T}$ test cases. Each test case consists of a series of exchanges plus an additional line indicating you are done. Each exchange consists of you printing one line and the judge printing one line in response. Your program must print a single line containing one of these options:

- An uppercase $\mathbf{M}$ and two integers $i$ and $j$ with $i < j$ representing a minimum query. The judge responds with a single integer representing the position of the minimum value in the list within 1-based positions $i$ and $j$, inclusive.
- An uppercase $\mathbf{S}$ and two integers $i$ and $j$ with $i < j$ representing a swap operation. The judge swaps the two elements at 1-based positions $i$ and $j$ and responds with 1.
- An uppercase $\mathbf{D}$ representing that you are done sorting the list. The judge checks the list. It responds with 1 if the list is sorted in strictly increasing order and -1 if it is not.

After the judge responds 1 to a $\mathbf{D}$, it will finish if it was the last test case or it will immediately start waiting for your first command for the next test case. After receiving the judge's response for the $\mathbf{T}$-th case, your program must finish in order to not receive a Time Limit Exceeded error.

If the judge receives an invalidly formatted line or invalid values from your program at any moment, including a minimum operation whose cost would exceed your remaining budget for the test case, the judge will print a single number -1. After the judge prints -1 for any of the reasons explained above, it will not print any further output. If your program continues to wait for the judge after receiving a -1, your program will time out, resulting in a Time Limit Exceeded error. Notice that it is your responsibility to have your program exit in time to receive a Wrong Answer judgment instead of a Time Limit Exceeded error. As usual, if the memory limit is exceeded, or your program gets a runtime error, you will receive the appropriate judgment.
## 输入格式

See Interactive Protocol.
## 输出格式

See Interactive Protocol.
## 样例

### 样例输入 #1
```
2 4

4

2

1

4

1

1

3

1

3

2

1
```
### 样例输出 #1
```

M 2 4

M 1 3

S 1 4

M 3 4

S 3 4

D

M 1 4

S 1 3

M 3 4

M 2 4

D
```
## 提示

You can use this testing tool to test locally or on our platform. To test locally, you will need to run the tool in parallel with your code; you can use our interactive runner for that.

Instructions for the testing tool are included in comments within the tool. We encourage you to add your own test cases. Please be advised that although the testing tool is intended to simulate the judging system, it is **NOT** the real judging system and might behave differently.

**Limits**

**Test Set 1 (15 Pts, Visible Verdict)**

- $\mathbf{T} = 100$.
- $\mathbf{N} = 100$.


---

---
title: "[NOIP 2011 普及组] 瑞士轮"
layout: "post"
diff: 普及/提高-
pid: P1309
tag: ['模拟', '2011', '递归', 'NOIP 普及组', '排序']
---
# [NOIP 2011 普及组] 瑞士轮
## 题目背景

在双人对决的竞技性比赛，如乒乓球、羽毛球、国际象棋中，最常见的赛制是淘汰赛和循环赛。前者的特点是比赛场数少，每场都紧张刺激，但偶然性较高。后者的特点是较为公平，偶然性较低，但比赛过程往往十分冗长。

本题中介绍的瑞士轮赛制，因最早使用于$1895$年在瑞士举办的国际象棋比赛而得名。它可以看作是淘汰赛与循环赛的折中，既保证了比赛的稳定性，又能使赛程不至于过长。

## 题目描述

$2 \times N$ 名编号为 $1\sim 2N$ 的选手共进行R 轮比赛。每轮比赛开始前，以及所有比赛结束后，都会按照总分从高到低对选手进行一次排名。选手的总分为第一轮开始前的初始分数加上已参加过的所有比赛的得分和。总分相同的，约定编号较小的选手排名靠前。

每轮比赛的对阵安排与该轮比赛开始前的排名有关：第$1$ 名和第$2$ 名、第 $3$ 名和第 $4$名、……、第$2K - 1 $名和第$ 2K$名、……  、第$2N - 1 $名和第$2N$名，各进行一场比赛。每场比赛胜者得$1 $分，负者得 $0 $分。也就是说除了首轮以外，其它轮比赛的安排均不能事先确定，而是要取决于选手在之前比赛中的表现。

现给定每个选手的初始分数及其实力值，试计算在R 轮比赛过后，排名第$ Q$ 的选手编号是多少。我们假设选手的实力值两两不同，且每场比赛中实力值较高的总能获胜。

## 输入格式

第一行是三个正整数$N,R ,Q$,每两个数之间用一个空格隔开，表示有 $2 \times N $名选手、$R$ 轮比赛，以及我们关心的名次 $Q$。

第二行是$2 \times N$ 个非负整数$s_1, s_2, …, s_{2N}$，每两个数之间用一个空格隔开，其中$ s_i $表示编号为$i$ 的选手的初始分数。 第三行是$2 \times N$ 个正整数$w_1 , w_2 , …, w_{2N}$，每两个数之间用一个空格隔开，其中 $w_i$ 表示编号为$i$ 的选手的实力值。

## 输出格式

一个整数，即$R$ 轮比赛结束后，排名第$ Q$ 的选手的编号。

## 样例

### 样例输入 #1
```
2 4 2 
7 6 6 7 
10 5 20 15 

```
### 样例输出 #1
```
1

```
## 提示

【样例解释】

 ![](https://cdn.luogu.com.cn/upload/pic/98.png) 

【数据范围】

对于$30\% $的数据，$1 ≤ N ≤ 100$；

对于$50\% $的数据，$1 ≤ N ≤ 10,000 $；

对于$100\%$的数据，$1 ≤ N ≤ 100,000,1 ≤ R ≤ 50,1 ≤ Q ≤ 2N,0 ≤ s_1, s_2, …, s_{2N}≤10^8,1 ≤w_1, w_2 , …, w_{2N}≤ 10^8$。

noip2011普及组第3题。



---

---
title: "[GCJ 2018 Qualification] Trouble Sort"
layout: "post"
diff: 普及/提高-
pid: P13133
tag: ['2018', '排序', 'Google Code Jam']
---
# [GCJ 2018 Qualification] Trouble Sort
## 题目描述

Deep in Code Jam's secret algorithm labs, we devote countless hours to wrestling with one of the most complex problems of our time: efficiently sorting a list of integers into non-decreasing order. We have taken a careful look at the classic bubble sort algorithm, and we are pleased to announce a new variant.

The basic operation of the standard bubble sort algorithm is to examine a pair of adjacent numbers, and reverse that pair if the left number is larger than the right number. But our algorithm examines a group of three adjacent numbers, and if the leftmost number is larger than the rightmost number, it reverses that entire group. Because our algorithm is a "triplet bubble sort", we have named it Trouble Sort for short.

```
  TroubleSort(L): // L is a 0-indexed list of integers
    let done := false
    while not done:
      done = true
      for i := 0; i < len(L)-2; i++:
        if L[i] > L[i+2]:
          done = false
          reverse the sublist from L[i] to L[i+2], inclusive
```

For example, for $L = 5 \ 6 \ 6 \ 4 \ 3$, Trouble Sort would proceed as follows:

- First pass:
    - inspect $5 \ 6 \ 6$, do nothing: $5 \ 6 \ 6 \ 4 \ 3$
    - inspect $6 \ 6 \ 4$, see that $6 > 4$, reverse the triplet: $5 \ 4 \ 6 \ 6 \ 3$
    - inspect $6 \ 6 \ 3$, see that $6 > 3$, reverse the triplet: $5 \ 4 \ 3 \ 6 \ 6$
- Second pass:
    - inspect $5 \ 4 \ 3$, see that $5 > 3$, reverse the triplet: $3 \ 4 \ 5 \ 6 \ 6$
    - inspect $4 \ 5 \ 6$, do nothing: $3 \ 4 \ 5 \ 6 \ 6$
    - inspect $5 \ 6 \ 6$, do nothing: $3 \ 4 \ 5 \ 6 \ 6$
- Then the third pass inspects the three triplets and does nothing, so the algorithm terminates.

We were looking forward to presenting Trouble Sort at the Special Interest Group in Sorting conference in Hawaii, but one of our interns has just pointed out a problem: it is possible that Trouble Sort does not correctly sort the list! Consider the list $8 \ 9 \ 7$, for example.

We need your help with some further research. Given a list of $\mathbf N$ integers, determine whether Trouble Sort will successfully sort the list into non-decreasing order. If it will not, find the index (counting starting from 0) of the first sorting error after the algorithm has finished: that is, the first value that is larger than the value that comes directly after it when the algorithm is done.

## 输入格式

The first line of the input gives the number of test cases, $\mathbf{T}$. $\mathbf{T}$ test cases follow. Each test case consists of two lines: one line with an integer $\mathbf{N}$, the number of values in the list, and then another line with $\mathbf{N}$ integers $\mathbf{V}_\mathbf{i}$, the list of values.

## 输出格式

For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is ok if Trouble Sort correctly sorts the list, or the index (counting starting from 0) of the first sorting error, as described above.
## 样例

### 样例输入 #1
```
2
5
5 6 8 4 3
3
8 9 7
```
### 样例输出 #1
```
Case #1: OK
Case #2: 1
```
## 提示

**Sample Explanation**

Sample Case #1 is similar to the first one described in the problem statement. Trouble Sort correctly sorts this list, so the answer is OK.

Sample Case #2 is the second one described in the problem statement. Trouble Sort does not correctly sort this list, since it terminates with the list $7\ 9\ 8$. The $9$ is the first value in the list that is larger than the next value, so the index of the first sorting error is $1$.

**Limits**

- $1 \leq T \leq 100.$
- $0 \leq V_i \leq 10^9,$ for all $i$.

**Test set 1 (8 Pts, Visible)**

- $3 \leq N \leq 100.$
- Time limit (for the entire test set): 10 seconds.

**Test set 2 (15 Pts, Hidden)**

- $3 \leq N \leq 10^5.$
- Time limit (for the entire test set): 20 seconds.

**Special Note**

Notice that test set 2 for this problem has a large amount of input, so using a non-buffered reader might lead to slower input reading. In addition, keep in mind that certain languages have a small input buffer size by default.


---

---
title: "[GCJ 2017 #1C] Ample Syrup"
layout: "post"
diff: 普及/提高-
pid: P13168
tag: ['2017', '堆', 'Special Judge', '排序', 'Google Code Jam']
---
# [GCJ 2017 #1C] Ample Syrup
## 题目描述

The kitchen at the Infinite House of Pancakes has just received an order for a stack of $K$ pancakes! The chef currently has $N$ pancakes available, where $N \geq K$. Each pancake is a cylinder, and different pancakes may have different radii and heights.

As the sous-chef, you must choose $K$ out of the $N$ available pancakes, discard the others, and arrange those $K$ pancakes in a stack on a plate as follows. First, take the pancake that has the largest radius, and lay it on the plate on one of its circular faces. (If multiple pancakes have the same radius, you can use any of them.) Then, take the remaining pancake with the next largest radius and lay it on top of that pancake, and so on, until all $K$ pancakes are in the stack and the centers of the circular faces are aligned in a line perpendicular to the plate, as illustrated by this example:

![](https://cdn.luogu.com.cn/upload/image_hosting/57lkgshp.png)

You know that there is only one thing your diners love as much as they love pancakes: syrup! It is best to maximize the total amount of exposed pancake surface area in the stack, since more exposed pancake surface area means more places to pour on delicious syrup. Any part of a pancake that is not touching part of another pancake or the plate is considered to be exposed.

If you choose the $K$ pancakes optimally, what is the largest total exposed pancake surface area you can achieve?
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each begins with one line with two integers $N$ and $K$: the total number of available pancakes, and the size of the stack that the diner has ordered. Then, $N$ more lines follow. Each contains two integers $R_i$ and $H_i$: the radius and height of the $i$-th pancake, in millimeters.

## 输出格式

For each test case, output one line containing `Case #x: y`, where $x$ is the test case number (starting from 1) and $y$ is the maximum possible total exposed pancake surface area, in millimeters squared. $y$ will be considered correct if it is within an absolute or relative error of $10^{-6}$ of the correct answer.
## 样例

### 样例输入 #1
```
4
2 1
100 20
200 10
2 2
100 20
200 10
3 2
100 10
100 10
100 10
4 2
9 3
7 1
10 1
8 4
```
### 样例输出 #1
```
Case #1: 138230.076757951
Case #2: 150796.447372310
Case #3: 43982.297150257
Case #4: 625.176938064
```
## 提示

**Sample Explanation**

In sample case #1, the "stack" consists only of one pancake. A stack of just the first pancake would have an exposed area of $\pi \times R_0^2 + 2 \times \pi \times R_0 \times H_0 = 14000\pi \text{ mm}^2$. A stack of just the second pancake would have an exposed area of $44000\pi \text{ mm}^2$. So it is better to use the second pancake.

In sample case #2, we can use both of the same pancakes from case #1. The first pancake contributes its top area and its side, for a total of $14000\pi \text{ mm}^2$. The second pancake contributes some of its top area (the part not covered by the first pancake) and its side, for a total of $34000\pi \text{ mm}^2$. The combined exposed surface area is $48000\pi \text{ mm}^2$.

In sample case #3, all of the pancakes have radius 100 and height 10. If we stack two of these together, we effectively have a single new cylinder of radius 100 and height 20. The exposed surface area is $14000\pi \text{ mm}^2$.

In sample case #4, the optimal stack uses the pancakes with radii of 8 and 9.

**Limits**

- $1 \leq T \leq 100$.
- $1 \leq K \leq N$.
- $1 \leq R_i \leq 10^6$, for all $i$.
- $1 \leq H_i \leq 10^6$, for all $i$.

**Small dataset (9 Pts, Test Set 1 - Visible)**

- $1 \leq N \leq 10$.

**Large dataset (16 Pts, Test Set 2 - Hidden)**

- $1 \leq N \leq 1000$.


---

---
title: "雷达安装"
layout: "post"
diff: 普及/提高-
pid: P1325
tag: ['贪心', '计算几何', '排序']
---
# 雷达安装
## 题目描述

假设海岸线是一条无限延伸的直线。它的一侧是陆地，另一侧是海洋。每一座小岛是在海面上的一个点。雷达必须安装在陆地上（包括海岸线），并且每个雷达都有相同的扫描范围 $d$。你的任务是建立尽量少的雷达站，使所有小岛都在扫描范围之内。

数据使用笛卡尔坐标系，定义海岸线为 $x$ 轴。在 $x$ 轴上方为海洋，下方为陆地。



## 输入格式

第一行包括 $2$ 个整数 $n$ 和 $d$，$n$ 是岛屿数目，$d$ 是雷达扫描范围。

接下来 $n$ 行，每行两个整数，为岛屿坐标。

## 输出格式

一个整数表示最少需要的雷达数目，若不可能覆盖所有岛屿，输出 `-1`。

## 样例

### 样例输入 #1
```
3 2
1 2
-3 1
2 1

```
### 样例输出 #1
```
2
```
## 提示

### 样例 1 解释

![](https://cdn.luogu.com.cn/upload/image_hosting/fnezefht.png)

### 数据范围

对于全部数据，$n\le1000$，$ d \le 2\times 10^4$，$ | x_i | \le 2 \times 10^6 $，$ 0 \le y_i \le 2\times 10^4$。


---

---
title: "[GCJ 2013 #2] Ticket Swapping"
layout: "post"
diff: 普及/提高-
pid: P13294
tag: ['贪心', '2013', '排序', '栈', 'Google Code Jam']
---
# [GCJ 2013 #2] Ticket Swapping
## 题目描述

The city has built its first subway line, with a grand total of $N$ stations, and introduced a new way of paying for travel. Instead of just paying for one ticket and making an arbitrary journey, the price you pay is now based on entry cards.

When entering the subway, each passenger collects an entry card, which specifies the station the passenger entered at. When leaving the subway, the passenger has to give up the entry card, and is charged depending on the distance (in stations traveled) between the entry station specified on the entry card, and the exit station on which the entry card is surrendered. The payment depends on the distance between these stations as follows:

* if they are the same station, you don't pay;
* if they are adjacent stations, you pay $N$ pounds;
* if the distance is two stations, you pay $2N - 1$: a charge $N$ for the first stop and $N - 1$ for the second;
* the third station costs $N-2$ (so you pay $3N - 3$ for a three-station-long trip), the fourth stop $N-3$, and the $i$th stop $N + 1 - i$;
* thus, if you travel from one end of the subway to the other (a distance of $N-1$ stations), you pay $2$ pounds for the last station traveled, and a grand total of $(N^2 + N - 2) / 2$ in total.

After introducing this system the city noticed their gains are not as big as they expected. They figured out this might be due to people swapping their entry cards — so, for instance, if one person enters at station $A$, travels two stations to $B$ and exits, while another person enters at $B$, travels three stations to $C$ and exits, they would normally pay (in total) $2N - 1 + 3N - 3 = 5N - 4$. But if the two people swapped their entry cards at station $B$, then the first one would travel for free (as he would surrender an entry card specifying the station $B$ while exiting a station $B$, and so register a distance of zero); while the second person will exit at station $C$ and surrender an entry card specifying station $A$, which is $5$ stations away, and pays $5N - 10$, at a net loss of six pounds to the city!

The city now wants to learn how much they can possibly lose if this practice becomes widespread. We will consider only one direction (from station $1$ to station $N$, passing through all the stations in order) of the subway, and only one train on this line. We assume a passenger travelling from $o$ to $e$ obtains an entry card at $o$, can swap her entry card any number of times with any other passengers anywhere between $o$ and $e$, including swapping with people who leave at $o$ or those who enter at $e$, and then exit the train at $e$ with some entry card (it is necessary to surrender some entry card to exit the subway). We also assume the passenger will not exit the train in the meantime (that is, will not surrender the currently held card and obtain a new one).

You are given a map of traffic (specifying how many passengers travel this train from which station to which), and you should calculate the city's financial loss, assuming passengers swap their cards to maximize this loss.
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case contains the number $N$ of stops (the stops are numbered $1$ to $N$), and the number $M$ of origin-endpoint pairs given. The next $M$ lines contain three numbers each: the origin stop $o_i$, the end stop $e_i$ and $p_i$: the number of passengers that make this journey.

## 输出格式

For each test case, output one line containing "Case #$x$: $y$", where $x$ is the case number (starting from $1$) and $y$ is the total loss the city can observe due to ticket swapping, modulo $1000002013$.

## 样例

### 样例输入 #1
```
3
6 2
1 3 1
3 6 1
6 2
1 3 2
4 6 1
10 2
1 7 2
6 9 1
```
### 样例输出 #1
```
Case #1: 6
Case #2: 0
Case #3: 10
```
## 提示

**Sample Explanation**

The first test case is the case described in the problem statement - two passengers meet at station 3 and swap tickets. In the second test case the two passengers don't meet at all, so they can't swap tickets (and so the city incurs no loss). In the third case, only one of the early passengers can swap tickets with the later passenger.

**Limits**

- $1 \leq T \leq 20$.
- $1 \leq o_i < e_i \leq N$

**Small dataset (8 Pts, Test set 1 - Visible)**

- $2 \leq N \leq 100$.
- $1 \leq M \leq 100$.
- $1 \leq p_i \leq 100$.

**Large dataset (11 Pts, Test set 2 - Hidden)**

- $2 \leq N \leq 10^9$.
- $1 \leq M \leq 1000$.
- $1 \leq p_i \leq 10^9$.


---

---
title: "瑞瑞的木板"
layout: "post"
diff: 普及/提高-
pid: P1334
tag: ['堆', '福建省历届夏令营', '排序']
---
# 瑞瑞的木板
## 题目背景

瑞瑞想要亲自修复在他的一个小牧场周围的围栏。
## 题目描述

他测量栅栏并发现他需要 $n$ 根木板，每根的长度为整数 $l_i$。于是，他买了一根足够长的木板，长度为所需的 $n$ 根木板的长度的总和，他决定将这根木板切成所需的 $n$ 根木板（瑞瑞在切割木板时不会产生木屑，不需考虑切割时损耗的长度)。

瑞瑞切割木板时使用的是一种特殊的方式，这种方式在将一根长度为 $x$ 的木板切为两根时，需要消耗 $x$ 个单位的能量。瑞瑞拥有无尽的能量，但现在提倡节约能量，所以作为榜样，他决定尽可能节约能量。显然，总共需要切割 $(n-1)$ 次，问题是，每次应该怎么切呢？请编程计算最少需要消耗的能量总和。
## 输入格式

输入的第一行是整数，表示所需木板的数量 $n$。

第 $2$ 到第 $(n + 1)$ 行，每行一个整数，第 $(i + 1)$ 行的整数 $l_i$ 代表第  $i$ 根木板的长度 $l_i$。
## 输出格式

一个整数，表示最少需要消耗的能量总和。
## 样例

### 样例输入 #1
```
3
8
5
8

```
### 样例输出 #1
```
34

```
## 提示

#### 输入输出样例 1 解释

将长度为 $21$ 的木板，第一次切割为长度为 $8$ 和长度为 $13$ 的，消耗 $21$ 个单位的能量，第二次将长度为 $13$ 的木板切割为长度为 $5$ 和 $8$ 的，消耗 $13$ 个单位的能量，共消耗 $34$ 个单位的能量，是消耗能量最小的方案。

----

#### 数据规模与约定

- 对于 $100\%$ 的数据，保证 $1\le n \le 2 \times 10^4$，$1 \leq l_i \leq 5 \times 10^4$。


---

---
title: "[GCJ 2011 #1C] Space Emergency"
layout: "post"
diff: 普及/提高-
pid: P13372
tag: ['贪心', '2011', '排序', 'Google Code Jam']
---
# [GCJ 2011 #1C] Space Emergency
## 题目描述

There's an emergency—in space! You need to send your fleet's flagship as quickly as possible from star $0$ to star $N$, traveling through the other stars in increasing numerical order along the way ($0 \rightarrow 1 \rightarrow \ldots \rightarrow N$). Your flagship normally travels at a speed of $0.5$ parsecs per hour.

In addition to sending your flagship, you can order your engineers to build up to $L$ speed boosters at different stars. Building a speed booster takes $t$ hours, and all $L$ speed boosters can be built in parallel. While your flagship travels from a star with a completed speed booster to the next star, its speed is $1$ parsec per hour.

If a speed booster is completed at a star while your flagship is traveling from that star to the next one, your flagship will start moving faster as soon as the speed booster is completed.

How many hours does it take your flagship to get to star $N$ if you build speed boosters to make it arrive as soon as possible?
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ lines follow. Each contains integers, $L$, $t$, $N$ and $C$, followed by $C$ integers $a_i$, all separated by spaces. $a_i$ is the number of parsecs between star $k\times C+i$ and star $k\times C+i+1$, for all integer values of $k$.

For example, with $N=8$, $C=3$, $a_0=3$, $a_1=5$ and $a_2=4$, the distances between stars are $[3, 5, 4, 3, 5, 4, 3, 5]$.

## 输出格式

For each test case, output one line containing "Case #$x$: $y$", where $x$ is the case number (starting from $1$) and $y$ is a single integer: the number of hours it takes to reach star $N$. The answer is guaranteed to always be an integer.
## 样例

### 样例输入 #1
```
2
2 20 8 2 3 5
1 4 2 2 10 4
```
### 样例输出 #1
```
Case #1: 54
Case #2: 20
```
## 提示

**Explanation**

In the second case, we can build one speed booster. The distances between stars are $[10, 4]$. We build the speed booster on the first star. After $4$ hours, our flagship has gone $2$ parsecs and the speed booster is complete. It takes our flagship another $8$ hours to get to star $1$, then $8$ more hours to get to star $2$, our destination.

Note: This problem takes place in a universe where the speed of light is much higher than $1$ parsec per hour, so we don't have to worry about special relativistic effects.

**Limits**

- $1 \leq T \leq 100$.
- $1 \leq C \leq 1000$.
- $C \leq N$.
- $1 \leq a_i \leq 10^4$.
- $0 \leq t \leq 10^{11}$.
- $t$ is even.

**Small dataset (12 Pts, Test set 1 - Visible)**

- $1 \leq N \leq 1000$.
- $0 \leq L \leq 2$.
- Time limit: ~~30~~ 3 seconds.

**Large dataset (25 Pts, Test set 2 - Hidden)**

- $1 \leq N \leq 10^6$.
- $0 \leq L \leq N$.
- Time limit: ~~60~~ 6 seconds.


---

---
title: "[COCI 2012/2013 #4] RAZLIKA"
layout: "post"
diff: 普及/提高-
pid: P13416
tag: ['数学', '贪心', '2012', '单调队列', '排序', '差分', 'COCI（克罗地亚）']
---
# [COCI 2012/2013 #4] RAZLIKA
## 题目描述

Mirko's newest math homework assignment is a very difficult one! Given a sequence, $V$, of $N$ integers, remove exactly $K$ of them from the sequence. Let $M$ be the largest difference of any two remaining numbers in the sequence, and $m$ the smallest such difference. Select the $K$ integers to be removed from $V$ in such a way that the sum $M + m$ is the smallest possible. Mirko isn't very good at math, so he has asked you to help him!

## 输入格式

The first line of input contains two positive integers, $N$ ($3 \leq N \leq 1\,000\,000$) and $K$ ($1 \leq K \leq N - 2$).

The second line of input contains $N$ space-separated positive integers – the sequence $V$ ($-5\,000\,000 \leq V_i \leq 5\,000\,000$).
## 输出格式

The first and only line of output must contain the smallest possible sum $M + m$.
## 样例

### 样例输入 #1
```
5 2
-3 -2 3 8 6
```
### 样例输出 #1
```
7
```
### 样例输入 #2
```
6 2
-5 8 10 1 13 -1
```
### 样例输出 #2
```
13
```
### 样例输入 #3
```
6 3
10 2 8 17 2 17
```
### 样例输出 #3
```
6
```


---

---
title: "[NWRRC 2023] Jumping Frogs"
layout: "post"
diff: 普及/提高-
pid: P13590
tag: ['贪心', '2023', '排序', 'ICPC', 'NWRRC']
---
# [NWRRC 2023] Jumping Frogs
## 题目描述

Julia is a fan of wild nature photos. Yesterday, she took two photos of a beautiful river with water lilies and some frogs sitting on them. 

There are many water lilies on the river, numbered with consecutive positive integers from left to right, starting from $1$. Both photos were taken from exactly the same spot, and both photos have the same $n$ frogs sitting on water lilies. Each water lily can hold at most one frog.

After comparing the photos, Julia found out that all the frogs moved between the photos, since no water lily had a frog sitting on it in both photos. However, Julia couldn't understand which frog from the first photo moved to which water lily in the second photo, as all frogs looked exactly the same!

One thing is for sure: each frog jumped to a different water lily. Some frogs moved $\textit{to the left}$, to a water lily with a smaller number, while the other frogs moved $\textit{to the right}$, to a water lily with a larger number.

To investigate the movement of frogs, Julia wants to answer the following question: how many frogs moved to the left between the photos? As it may not be possible to find a unique answer to this question, you need to help Julia to find all possible answers.
## 输入格式

The first line contains a single integer $n$, denoting the number of frogs ($1 \le n \le 200\,000$).

The second line contains $n$ integers $a_1, a_2, \ldots, a_n$, denoting the water lilies with frogs on them in the first photo, in increasing order ($1 \le a_1 < a_2 < \cdots < a_n \le 10^9$).

The third line contains $n$ integers $b_1, b_2, \ldots, b_n$, denoting the water lilies with frogs on them in the second photo, in increasing order ($1 \le b_1 < b_2 < \cdots < b_n \le 10^9$).

All $2n$ given integers are distinct: no water lily has a frog sitting on it in both photos.
## 输出格式

In the first line, print a single integer $k$, denoting the number of possible answers to Julia's question.

In the second line, print $k$ integers $c_1, c_2, \ldots, c_k$, denoting all possible answers in increasing order ($0 \le c_1 < c_2 < \cdots < c_k \le n$).
## 样例

### 样例输入 #1
```
4
10 20 30 40
1 2 51 52
```
### 样例输出 #1
```
1
2
```
### 样例输入 #2
```
4
10 20 30 40
5 15 25 35

```
### 样例输出 #2
```
4
1 2 3 4
```
### 样例输入 #3
```
1
100
200
```
### 样例输出 #3
```
1
0
```
## 提示

In the first example, frogs that ended up on water lilies $1$ and $2$ must have moved to the left, while frogs that ended up on water lilies $51$ and $52$ must have moved to the right. Thus, we know for sure that exactly $2$ frogs moved to the left between the photos.


---

---
title: "【MGVOI R1-B】完美重排（sort）"
layout: "post"
diff: 普及/提高-
pid: P13730
tag: ['二分', 'O2优化', '排序', '前缀和', '双指针 two-pointer']
---
# 【MGVOI R1-B】完美重排（sort）
## 题目描述

Siby 同学有一个长度为 $n$ 的数组 $a$，其下标编号为 $1 \sim n$。保证数组 $a$ 是一个长度为 $n$ 的排列，也就是说，$1\sim n$ 中的每个正整数都在数组 $a$ 中出现 **恰好一次**。

在此基础上，Siby 同学定义了 **完美重排** 操作：

::::info[完美重排的定义]{open}

* 第一步：选择两个下标 $L,R$（必须满足 $1\le L\le R\le n$）；
  
* 第二步：将 $a_L,...,a_R$ （即数组 $a$ 中下标在 $L$ 和 $R$ 之间的元素）按照 **从小到大** 的顺序重新排序。

::::

例如，若 $a=[4,3,2,1]$，选择 $L=2,R=4$ 进行一次完美重排操作（也就是将 $a_2,a_3,a_4$ 按照从小到大的顺序排序），得到的新数组为 $a'=[4,1,2,3]$。

接下来，他将进行 $Q$ 组询问（询问之间彼此独立），其中第 $i$ 组询问包含两个参数 $x_i,y_i$（$x_i< y_i$），表示询问你有多少种进行 **恰好一次** 完美重排的方案，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。

提示：只要完美重排操作中选择的 $L$ 不同或 $R$ 不同，就被认为是两种不同的方案。
## 输入格式

第一行包含两个正整数 $n,Q$，分别表示数组 $a$ 的长度和询问的次数。

第二行包含 $n$ 个正整数，其中第 $i$ 个正整数表示数组 $a$ 中的元素 $a_i$（$1\le a_i\le n$）。

接下来 $Q$ 行，其中第 $i$ 行包含两个正整数 $x_i,y_i$（$1\le x_i< y_i \le n$），表示第 $i$ 组询问的两个参数。
## 输出格式

共输出 $Q$ 行。

对于第 $i$ 组询问而言：仅需在第 $i$ 行输出一个非负整数，表示完美重排的方案数。方案应进行恰好一次完美重排，使得数组 $a$ 中原先下标为 $x_i$ 的元素，在重排后的下标为 $y_i$。


## 样例

### 样例输入 #1
```
4 3
3 4 1 2
1 3
1 4
2 4
```
### 样例输出 #1
```
1
0
2
```
### 样例输入 #2
```
7 10
6 3 5 7 2 4 1
1 3
1 4
1 7
2 3
2 4
2 5
3 5
4 6
5 6
6 7

```
### 样例输出 #2
```
2
1
0
3
1
0
3
4
1
2
```
## 提示


**【样例 #1】**

::::info[样例 #1 解释]
此样例下，$a=[3,4,1,2]$。

* 对于第一组询问：只需取 $L=1，R=4$ 进行一次完美重排，就能使得 $a_1$ 在重排后的下标为 $3$（重排前：$a=[\red{3},4,1,2]$，重排后：$a'=[1,2,\red{3},4]$）。可以证明这是唯一的一种方案，故方案数为 $1$；

* 对于第二组询问：可以证明，无论如何选取 $L,R$，都不可能使得 $a_1$ 在重排后的下标为 $4$，故方案数为 $0$；

* 对于第三组询问：

1. 第一种方案是取 $L=1，R=4$ 进行一次完美重排（重排前：$a=[3,\red{4},1,2]$，重排后：$a'=[1,2,3,\red{4}]$）；
  
2. 第二种方案是取 $L=2，R=4$ 进行一次完美重排（重排前：$a=[3,\red{4},1,2]$，重排后：$a'=[3,1,2,\red{4}]$），可以验证均满足条件。不存在其它满足条件的方案了，故方案数为 $2$。
::::


**【样例 #2】**

::::info[样例 #2 解释]
此样例下，$a=[6,3,5,7,2,4,1]$。

为了简便，我们用数对 $(i,j)$ 来表示选取 $L=i$，$R=j$ 进行一次完美重排的方案。各组询问对应的所有方案见下表：

| 询问编号 | 方案数 | 方案 1 | 方案 2 | 方案 3 | 方案 4 |
|:-:|:-:|:-:|:-:|:-:|:-:|
| **1** | $2$ | $(1,3)$ | $(1,4)$
| **2** | $1$ | $(1,5)$
| **3** | $0$ |
| **4** | $3$ | $(1,7)$ | $(2,5)$ | $(2,6)$
| **5** | $1$ | $(2,7)$
| **6** | $0$ |
| **7** | $3$ | $(1,7)$ | $(2,6)$ | $(3,6)$
| **8** | $4$ | $(1,6)$ | $(2,6)$ | $(3,6)$ | $(4,6)$ 
| **9** | $1$ | $(5,7)$ |
| **10** | $2$ | $(5,7)$ | $(6,7)$ |

::::



**【样例 #3】**

见附件中的 ```sort/sort3.in``` 与 ```sort/sort3.ans```。

这个样例满足测试点 $7 \sim 12$ 的限制。

**【样例 #4】**

见附件中的 ```sort/sort4.in``` 与 ```sort/sort4.ans```。

这个样例满足测试点 $13 \sim 14$ 的限制。

**【样例 #5】**

见附件中的 ```sort/sort5.in``` 与 ```sort/sort5.ans```。

这个样例满足测试点 $15 \sim 20$ 的限制。



---




**【数据范围】**

对于所有测试点，保证 $2\le n\le 10^4$，$1\le Q\le 2\times 10^3$，$1\le x_i< y_i\le n$，且数组 $a$ 是 $1\sim n$ 的排列。

::cute-table{tuack}

| **测试点编号** | $n \le$ | $Q \le$ |  **特殊性质** |
|:-:|:-:|:-:|:-:|
| $1 \sim 6$ | $20$ | $20$ | 无 | 
| $7 \sim 12$ | $500$ | $100$ | ^ | 
| $13 \sim 14$ | $10^4$ | $2\times 10^3$ | **A** | 
| $15 \sim 20$ | ^ | ^ | 无 | 

特殊性质 **A**：保证 $a_i=n-i+1$。

* 分值分配：每个测试点的分值为 $5$ 分。
  
* 请注意本题特殊的内存限制。


---

---
title: "[JOIGST 2025] 茶话会 / Tea Party"
layout: "post"
diff: 普及/提高-
pid: P13737
tag: ['贪心', '2025', 'O2优化', '排序', 'JOISC/JOIST（日本）']
---
# [JOIGST 2025] 茶话会 / Tea Party
## 题目描述

葵计划举办一场茶话会，共有包括葵在内的 $M$ 位参与者，编号为 $1$ 到 $M$。葵打算给每位参与者分发一块蛋糕和一杯红茶。

为此，葵准备了 $N$ 块蛋糕（编号 $1$ 到 $N$）和 $M$ 杯红茶（编号 $1$ 到 $M$），其中 $N \geq M$。蛋糕 $i$（$1 \leq i \leq N$）的品牌是 $A_i$，美味度是 $B_i$。红茶 $j$（$1 \leq j \leq M$）的品牌是 $C_j$，美味度是 $D_j$。

葵希望通过合理分配蛋糕和红茶，最大化所有参与者的**幸福度总和**。

分配规则如下：

葵会从 $N$ 块蛋糕中选择 $M$ 块分配给参与者（剩余蛋糕由葵在其他时间食用，不影响幸福度）。当参与者获得蛋糕 $i$ 和红茶 $j$ 时，其幸福度计算方式为：

- 若蛋糕与红茶品牌相同（$A_i = C_j$），则幸福度为 $B_i + D_j$。
- 若品牌不同（$A_i \neq C_j$），则幸福度为 $B_i$。

请计算通过优化分配蛋糕和红茶，所有参与者幸福度总和的最大值。
## 输入格式

输入按以下格式从标准输入给出：

> $N$ $M$  
$A_1$ $A_2$ $\cdots$ $A_N$  
$B_1$ $B_2$ $\cdots$ $B_N$  
$C_1$ $C_2$ $\cdots$ $C_M$  
$D_1$ $D_2$ $\cdots$ $D_M$
## 输出格式

输出一行，表示葵合理分配准备的蛋糕和红茶时，所有参与者幸福度总和的最大值。
## 样例

### 样例输入 #1
```
4 3
1 1 2 3
2 1 2 4
1 1 2
3 1 1
```
### 样例输出 #1
```
12
```
### 样例输入 #2
```
5 3
1 2 3 4 5
4695 53325 57544 74342 81986
1 2 3
59037 23296 16434
```
### 样例输出 #2
```
232949
```
### 样例输入 #3
```
4 3
2 1 3 1
52 49 72 31
3 1 3
0 0 0
```
### 样例输出 #3
```
173
```
### 样例输入 #4
```
5 2
1 1 2 3 5
0 0 0 0 0
1 1
3 1
```
### 样例输出 #4
```
4
```
## 提示

#### 【样例解释 #1】

葵可以按以下方式分配蛋糕和红茶，使所有参与者的幸福度总和达到最大值 $12$：

-   参与者 $1$ 获得蛋糕 $1$ 和红茶 $1$，幸福度为 $2 + 3 = 5$。
-   参与者 $2$ 获得蛋糕 $3$ 和红茶 $3$，幸福度为 $2 + 1 = 3$。
-   参与者 $3$ 获得蛋糕 $4$ 和红茶 $2$，幸福度为 $4$。

无论如何分配，所有参加者的幸福度总和都不会超过 $12$，因此输出 $12$。

该样例满足子任务 $4$ 的限制。

#### 【样例解释 #2】

该样例满足子任务 $3,4$ 的限制。

#### 【样例解释 #3】

该样例满足子任务 $1,4$ 的限制。

#### 【样例解释 #4】

该样例满足子任务 $2,4$ 的限制。

#### 【数据范围】

-   $1 \leq M \leq N \leq 200\,000$。
-   $1 \leq A_i \leq N$（$1 \leq i \leq N$）。
-   $0 \leq B_i \leq 10^9$（$1 \leq i \leq N$）。
-   $1 \leq C_j \leq N$（$1 \leq j \leq M$）。
-   $0 \leq D_j \leq 10^9$（$1 \leq j \leq M$）。
-   输入的所有值都是整数。

#### 【子任务】

1.  （$8$ 分）$D_j = 0$（$1 \leq j \leq M$）。
2.  （$19$ 分）$B_i = 0$（$1 \leq i \leq N$）。
3.  （$31$ 分）$A_i = i$（$1 \leq i \leq N$），$C_j = j$（$1 \leq j \leq M$）。
4.  （$42$ 分）无附加限制。


---

---
title: "最接近神的人"
layout: "post"
diff: 普及/提高-
pid: P1774
tag: ['线段树', '树状数组', '递归', 'NOI 导刊', '排序']
---
# 最接近神的人
## 题目描述

破解了符文之语，小 FF 开启了通往地下的道路。当他走到最底层时，发现正前方有一扇巨石门，门上雕刻着一幅古代人进行某种活动的图案。而石门上方用古代文写着“神的殿堂”。小 FF 猜想里面应该就有王室的遗产了。但现在的问题是如何打开这扇门……。

仔细研究后，他发现门上的图案大概是说：古代人认为只有智者才是最容易接近神明的。而最聪明的人往往通过一种仪式选拔出来。仪式大概是指，即将隐退的智者为他的候选人写下一串无序的数字，并让他们进行一种操作，即交换序列中相邻的两个元素。而用最少的交换次数使原序列变成不下降序列的人即是下一任智者。

小 FF 发现门上同样有着 $n$ 个数字。于是他认为打开这扇门的秘诀就是找到让这个序列变成不下降序列所需要的最小次数。但小 FF 不会……只好又找到了你，并答应事成之后与你三七分……
## 输入格式

第一行为一个整数 $n$，表示序列长度。

第二行为 $n$ 个整数，表示序列中每个元素。
## 输出格式

一个整数 $\mathit{ans}$，即最少操作次数。

## 样例

### 样例输入 #1
```
4
2 8 0 3

```
### 样例输出 #1
```
3
```
## 提示

### 数据范围及约定

- 对于 $30\%$ 的数据 $1≤n≤10^4$。
- 对于 $100\%$ 的数据 $1≤n≤5\times 10^5$，$A_i\in [-2^{31}, 2^{31})$。

### 样例解释

开始序列为 $[2,8,0,3]$，目标序列为 $[0, 2, 3, 8]$，可进行三次操作的目标序列：

1. 交换 $(8,0)$，序列变成 $[2,0,8,3]$；
2. 交换 $(2,0)$，序列变成 $[0,2,8,3]$；
3. 交换 $(8,3)$，序列变成 $[0,2,3,8]$。



---

---
title: "最长路"
layout: "post"
diff: 普及/提高-
pid: P1807
tag: ['图论', 'NOI 导刊', '广度优先搜索 BFS', '拓扑排序']
---
# 最长路
## 题目描述

设 $G$ 为有 $n$ 个顶点的带权有向无环图，$G$ 中各顶点的编号为 $1$ 到 $n$，请设计算法，计算图 $G$ 中 $1, n$ 间的最长路径。
## 输入格式

输入的第一行有两个整数，分别代表图的点数 $n$ 和边数 $m$。

第 $2$ 到第 $(m + 1)$ 行，每行 $3$ 个整数 $u, v, w$（$u<v$），代表存在一条从 $u$ 到  $v$ 边权为 $w$ 的边。
## 输出格式

输出一行一个整数，代表 $1$ 到 $n$ 的最长路。

若 $1$ 无法到达 $n$，请输出 $-1$。
## 样例

### 样例输入 #1
```
2 1
1 2 1
```
### 样例输出 #1
```
1
```
## 提示

**【数据规模与约定】**

- 对于 $20\%$的数据，$n \leq 100$，$m \leq 10^3$。
- 对于 $40\%$ 的数据，$n \leq 10^3$，$m \leq 10^{4}$。
- 对于 $100\%$ 的数据，$1 \leq n \leq 1500$，$0 \leq m \leq 5 \times 10^4$，$1 \leq u, v \leq n$，$-10^5 \leq w \leq 10^5$。


---

---
title: "逆序对"
layout: "post"
diff: 普及/提高-
pid: P1908
tag: ['树状数组', '递归', '离散化', '排序']
---
# 逆序对
## 题目描述

猫猫 TOM 和小老鼠 JERRY 最近又较量上了，但是毕竟都是成年人，他们已经不喜欢再玩那种你追我赶的游戏，现在他们喜欢玩统计。

最近，TOM 老猫查阅到一个人类称之为“逆序对”的东西，这东西是这样定义的：对于给定的一段正整数序列，逆序对就是序列中 $a_i>a_j$ 且 $i<j$ 的有序对。知道这概念后，他们就比赛谁先算出给定的一段正整数序列中逆序对的数目。注意序列中可能有重复数字。

**Update：数据已加强。**
## 输入格式

第一行，一个数 $n$，表示序列中有 $n$ 个数。

第二行 $n$ 个数，表示给定的序列。序列中每个数字不超过 $10^9$。

## 输出格式

输出序列中逆序对的数目。

## 样例

### 样例输入 #1
```
6
5 4 2 6 3 1

```
### 样例输出 #1
```
11
```
## 提示

对于 $25\%$ 的数据，$n \leq 2500$。

对于 $50\%$ 的数据，$n \leq 4 \times 10^4$。

对于所有数据，$1 \leq n \leq 5 \times 10^5$。

请使用较快的输入输出。

应该不会有人 $O(n^2)$ 过 50 万吧 —— 2018.8 chen_zhe。


---

---
title: "最小函数值"
layout: "post"
diff: 普及/提高-
pid: P2085
tag: ['数学', '堆', '排序', '优先队列']
---
# 最小函数值
## 题目描述

有 $n$ 个函数，分别为 $F_1,F_2,\dots,F_n$。定义 $F_i(x)=A_ix^2+B_ix+C_i(x\in\mathbb N*)$。给定这些 $A_i$、$B_i$ 和 $C_i$，请求出所有函数的所有函数值中最小的 $m$ 个（如有重复的要输出多个）。
## 输入格式

第一行输入两个正整数 $n$ 和 $m$。  

以下 $n$ 行每行三个正整数，其中第 $i$ 行的三个数分别为 $A_i$、$B_i$ 和 $C_i$。
## 输出格式

输出将这 $n$ 个函数所有可以生成的函数值排序后的前 $m$ 个元素。这 $m$ 个数应该输出到一行，用空格隔开。
## 样例

### 样例输入 #1
```
3 10
4 5 3
3 4 5
1 7 1

```
### 样例输出 #1
```
9 12 12 19 25 29 31 44 45 54
```
## 提示

#### 数据规模与约定

对于全部的测试点，保证 $1 \leq n,m\le10000$，$1 \leq A_i\le10,B_i\le100,C_i\le10^4$。


---

---
title: "运输"
layout: "post"
diff: 普及/提高-
pid: P2094
tag: ['贪心', '排序']
---
# 运输
## 题目描述

现在已知 $N$ 件商品，和搬运它们其中每一件的费用。现在搬家公司老板 Mr.sb 决定让我们每次任意选取 $2$ 件商品。然后这 $2$ 件商品只算一件商品的费用。但是这个商品的搬运费用是将选出的 $2$ 个商品的费用之和除以 $k$ 的运算结果。如此反复。直到只收一件商品的钱。这个就是商店要付的费用。掌柜的想尽可能的少付钱，以便将更多的钱捐给希望工程。所以请你帮他计算一下最少只用付多少钱。

## 输入格式

第一行两个整数 $n,k$。

第二行 $n$ 个整数 $w_1,w_2,\ldots,w_n$，表示每一件物品搬运费。

## 输出格式

一行一个整数表示最少付多少钱。

## 样例

### 样例输入 #1
```
5 2
1 2 3 4 5
```
### 样例输出 #1
```
1
```
## 提示

$n,k,w_i$ 均为非负数。

$n,k\le 10^4$。

---

$\text{upd 2022.7.24}$：新增加一组 Hack 数据。题目是否存在该数据范围下的正确解法有争议。


---

---
title: "[USACO14JAN] Recording the Moolympics S"
layout: "post"
diff: 普及/提高-
pid: P2255
tag: ['贪心', '2014', 'USACO', '排序']
---
# [USACO14JAN] Recording the Moolympics S
## 题目描述

Being a fan of all cold-weather sports (especially those involving cows),Farmer John wants to record as much of the upcoming winter Moolympics as possible.


The television schedule for the Moolympics consists of N different programs(1 <= N <= 150), each with a designated starting time and ending time.  FJ has a dual-tuner recorder that can record two programs simultaneously.

Please help him determine the maximum number of programs he can record in total.

农民约翰热衷于所有寒冷天气的运动（尤其是涉及到牛的运动）， 农民约翰想录下尽可能多的电视节目。 moolympics 的节目时间表有 $N$ 个不同的节目 （$1\le N\le 150$），每个节目给定开始时间和结束时间。FJ 有一个双调谐器录音机，可以同时录制两个节目。 请帮助他确定他能录制的节目的最大数量。

## 输入格式

\* Line 1: The integer N.


\* Lines 2..1+N: Each line contains the start and end time of a single program (integers in the range 0..1,000,000,000).

- 第 $1$ 行：整数 $N$。 
- 第 $2$ 到第 $N+1$ 行：每行包含单个节目的开始和结束时间（范围为 $0…1000000000$ 的整数）。
## 输出格式

\* Line 1: The maximum number of programs FJ can record.

仅一行，FJ可以记录的最大节目数量。  
## 样例

### 样例输入 #1
```
6
0 3
6 7
3 10
1 5
2 8
1 9
```
### 样例输出 #1
```
4
```
## 提示

INPUT DETAILS:


The Moolympics broadcast consists of 6 programs.  The first runs from time 0 to time 3, and so on.


OUTPUT DETAILS:


FJ can record at most 4 programs.  For example, he can record programs 1 and 3 back-to-back on the first tuner, and programs 2 and 4 on the second tuner.


Source: USACO 2014 January Contest, Silver



---

---
title: "yyy2015c01 的 U 盘"
layout: "post"
diff: 普及/提高-
pid: P2370
tag: ['动态规划 DP', '贪心', '二分', '洛谷原创', '排序', '背包 DP']
---
# yyy2015c01 的 U 盘
## 题目背景

在 2020 年的某一天，我们的 yyy2015c01 买了个高端 U 盘。

## 题目描述

你找 yyy2015c01 借到了这个高端的 U 盘，拷贝一些重要资料，但是你发现这个 U 盘有一些问题：

1. 这个 U 盘的传输接口很小，只能传输大小不超过 $L$ 的文件。
2. 这个 U 盘容量很小，一共只能装不超过 $S$ 的文件。

但是你要备份的资料却有很多，你只能备份其中的一部分。

为了选择要备份哪些文件，你给所有文件设置了一个价值 $V_i$，你希望备份的文件总价值不小于 $p$。

但是很快你发现这是不可能的，因为 yyy2015c01 的传输接口太小了，你只有花钱买一个更大的接口（更大的接口意味着可以传输更大的文件，但是购买它会花费更多的钱）。

注意：你的文件不能被分割（你只能把一个文件整个的传输进去，并储存在U盘中）,

你放在 U 盘中文件的总大小不能超过 U 盘容量。

现在问题来了：你想知道，在满足 U 盘中文件价值之和**不小于** $p$ 时，最小需要多大的接口。
## 输入格式

第 $1$ 行，三个正整数 $n,p,S$ 分别表示文件总数，希望最小价值 $p$ ，U 盘大小。

接下来 $n$ 行，每行两个正整数 $W_{i},V_{i}$，表示第 $i$ 个文件的大小和价值。
## 输出格式

输出一个正整数表示最小需要的接口大小。

如果无解输出 `No Solution!`。
## 样例

### 样例输入 #1
```
3 3 5
2 2
1 2
3 2
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2 3 505
1 2
500 1
```
### 样例输出 #2
```
500
```
### 样例输入 #3
```
3 3 2
2 2
1 2
3 2
```
### 样例输出 #3
```
No Solution!
```
### 样例输入 #4
```
4 5 6
5 1
5 2
5 3
1 1
```
### 样例输出 #4
```
No Solution!
```
## 提示

$1 \le n, W_i, S \le 10^3$，$1 \leq V_i \leq 10^6$，$1 \leq p \leq 10^9$。

数据较小，请勿乱搞。

样例解释 $1$：买一个大小为 $2$ 接口，把物品 $1$ 、$2$ 放进$\text{U}$盘。

样例解释 $2$：买一个大小为 $500$ 的接口。

样例解释 $3$：本来可以买大小为 $2$ 的接口，可是 U 盘容量放不下足够的文件。

如果数据出现疏漏，请联系出题人 [a710128](https://www.luogu.com.cn/user/2573)

向本题主人公 yyy2015c01 同学致敬！


---

---
title: "摄像头"
layout: "post"
diff: 普及/提高-
pid: P2712
tag: ['拓扑排序']
---
# 摄像头
## 题目描述

食品店里有 $n$ 个摄像头，这种摄像头很笨拙，只能拍摄到固定位置。现有一群胆大妄为的松鼠想要抢劫食品店，为了不让摄像头拍下他们犯罪的证据，他们抢劫前的第一件事就是砸毁这些摄像头。

为了便于砸毁摄像头，松鼠歹徒们把所有摄像头和摄像头能监视到的地方统一编号，一个摄像头能被砸毁的条件是该摄像头所在位置不被其他摄像头监视。

现在你的任务是帮松鼠们计算是否可以砸掉所有摄像头，如不能则输出还没砸掉的摄像头的数量。
## 输入格式

第 $1$ 行，一个整数 $n$，表示摄像头的个数。

第 $2$ 到 $n+1$ 行是摄像头的信息，包括：摄像头的位置 $x$，以及这个摄像头可以监视到的位置数 $m$，之后 $m$ 个数 $y$ 是此摄像头可以监视到的位置。(砸了这些摄像头之后自然这些位置就监视不到了)
## 输出格式

若可以砸掉所有摄像头则输出“ $\texttt{YES}$ ”，否则输出还没砸掉的摄像头的数量。（不带引号）
## 样例

### 样例输入 #1
```
5
1 1 2
2 1 1
3 1 7
4 1 1
5 0

```
### 样例输出 #1
```
2
```
## 提示

$1 \leq n \leq 100$。

$0 \leq m \leq 100$。

$0 \leq x,y \leq 500$。



---

---
title: "友好城市"
layout: "post"
diff: 普及/提高-
pid: P2782
tag: ['动态规划 DP', '2001', '排序']
---
# 友好城市
## 题目描述

有一条横贯东西的大河，河有笔直的南北两岸，岸上各有位置各不相同的 $N$ 个城市。北岸的每个城市有且仅有一个友好城市在南岸，而且不同城市的友好城市不相同。每对友好城市都向政府申请在河上开辟一条直线航道连接两个城市，但是由于河上雾太大，政府决定避免任意两条航道交叉，以避免事故。编程帮助政府做出一些批准和拒绝申请的决定，使得在保证任意两条航道不相交的情况下，被批准的申请尽量多。

## 输入格式

第一行，一个整数 $N$，表示城市数。

第二行到第 $N+1$ 行，每行两个整数，中间用一个空格隔开，分别表示南岸和北岸的一对友好城市的坐标。

## 输出格式

仅一行，输出一个整数，表示政府所能批准的最多申请数。

## 样例

### 样例输入 #1
```
7
22 4
2 6
10 3
15 12
9 8
17 17
4 2
```
### 样例输出 #1
```
4
```
## 提示

### 数据规模与约定

- 对于 $50\%$ 的数据，$1 \leq N \leq 5000$，$0 \leq x _ i \leq 10000$。
- 对于 $100\%$ 的数据，$1 \leq N \leq 2 \times 10 ^ 5$，$0 \leq x _ i \leq 10 ^ 6$。



---

---
title: "[USACO07JAN] Protecting the Flowers S"
layout: "post"
diff: 普及/提高-
pid: P2878
tag: ['模拟', '贪心', '2007', 'USACO', '排序']
---
# [USACO07JAN] Protecting the Flowers S
## 题目描述

Farmer John went to cut some wood and left N (2 ≤ N ≤ 100,000) cows eating the grass, as usual. When he returned, he found to his horror that the cluster of cows was in his garden eating his beautiful flowers. Wanting to minimize the subsequent damage, FJ decided to take immediate action and transport each cow back to its own barn.

Each cow i is at a location that is Ti minutes (1 ≤ Ti ≤ 2,000,000) away from its own barn. Furthermore, while waiting for transport, she destroys Di (1 ≤ Di ≤ 100) flowers per minute. No matter how hard he tries, FJ can only transport one cow at a time back to her barn. Moving cow i to its barn requires 2 × Ti minutes (Ti to get there and Ti to return). FJ starts at the flower patch, transports the cow to its barn, and then walks back to the flowers, taking no extra time to get to the next cow that needs transport.

Write a program to determine the order in which FJ should pick up the cows so that the total number of flowers destroyed is minimized.

有 $n$ 头奶牛跑到 FJ 的花园里去吃花儿了，它们分别在距离牛圈 $T_i$（这里指 FJ 到那里需要 $T_i$ 分钟) 处吃花，每分钟会吃掉 $D_i$ 朵花，FJ 现在要将它们给弄回牛圈，但是他每次只能弄一头回去，来回用时总共为 $2 \times T_i$ 分钟，在这段时间内，其它的奶牛会继续吃 FJ 的花，速度保持不变，当然正在被赶回牛圈的奶牛不能继续吃了。现在求在最好的方案下奶牛吃掉花的最小朵数。

## 输入格式

Line 1: A single integer N


Lines 2..N+1: Each line contains two space-separated integers, Ti and Di, that describe a single cow's characteristics

## 输出格式

Line 1: A single integer that is the minimum number of destroyed flowers

## 样例

### 样例输入 #1
```
6
3 1
2 5
2 3
3 2
4 1
1 6
```
### 样例输出 #1
```
86
```
## 提示

FJ returns the cows in the following order: 6, 2, 3, 4, 1, 5. While he is transporting cow 6 to the barn, the others destroy 24 flowers; next he will take cow 2, losing 28 more of his beautiful flora. For the cows 3, 4, 1 he loses 16, 12, and 6 flowers respectively. When he picks cow 5 there are no more cows damaging the flowers, so the loss for that cow is zero. The total flowers lost this way is 24 + 28 + 16 + 12 + 6 = 86.



---

---
title: "[USACO07NOV] Milking Time S"
layout: "post"
diff: 普及/提高-
pid: P2889
tag: ['动态规划 DP', '2007', 'USACO', '排序', '背包 DP']
---
# [USACO07NOV] Milking Time S
## 题目描述

Bessie 可以在接下来 $N$ 个小时内产奶，为了方便，我们把这 $N$ 个小时 $1\dots N$ 编号。

FJ 在这 $N$ 个小时内有 $M$ 段时间可以来给 Bessie 挤奶，第 $i$ 段时间从 $Start_i$ 开始到 $End_i$ 结束，可以得到 $Eff_i$ 加仑牛奶。

每次 FJ 给 Bessie 挤奶之后，Bessie 都要休息 $R$ 个小时，FJ 才能开始下一次挤奶。

现在，FJ 需要您计算出 Bessie 在这 $N$ 个小时内最多产多少奶。
## 输入格式

第一行有三个整数，分别表示 $N,M,R$。

第 $2\dots M+1$ 行，第 $i+1$ 行有三个整数 $Start_i,End_i,Eff_i$，描述一段挤奶的时间。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
12 4 2
1 2 8
10 12 19
3 6 24
7 10 31
```
### 样例输出 #1
```
43
```
## 提示

#### 数据规模与约定
对于全部的测试点，保证 $1\le N\le 10^6$，$1\le M\le 10^3$，$1\le Start_i<end_i\le N$，$1\le Eff_i\le 10^6$。


---

---
title: "[USACO08JAN] Cell Phone Network G"
layout: "post"
diff: 普及/提高-
pid: P2899
tag: ['2008', 'USACO', '排序', '树形 DP', '拓扑排序']
---
# [USACO08JAN] Cell Phone Network G
## 题目描述

Farmer John has decided to give each of his cows a cell phone in hopes to encourage their social interaction. This, however, requires him to set up cell phone towers on his N (1 ≤ N ≤ 10,000) pastures (conveniently numbered 1..N) so they can all communicate.

Exactly N-1 pairs of pastures are adjacent, and for any two pastures A and B (1 ≤ A ≤ N; 1 ≤ B ≤ N; A ≠ B) there is a sequence of adjacent pastures such that A is the first pasture in the sequence and B is the last. Farmer John can only place cell phone towers in the pastures, and each tower has enough range to provide service to the pasture it is on and all pastures adjacent to the pasture with the cell tower.

Help him determine the minimum number of towers he must install to provide cell phone service to each pasture.

Farmer John 想让他的所有牛用上手机以便相互交流。他需要建立几座信号塔在 $N$ 块草地中。已知与信号塔相邻的草地能收到信号。给你 $N-1$ 个草地 $(A,B)$ 的相邻关系，问：最少需要建多少个信号塔能实现所有草地都有信号。

## 输入格式

\* Line 1: A single integer: N

\* Lines 2..N: Each line specifies a pair of adjacent pastures with two space-separated integers: A and B

## 输出格式

\* Line 1: A single integer indicating the minimum number of towers to install

## 样例

### 样例输入 #1
```
5
1 3
5 2
4 3
3 5

```
### 样例输出 #1
```
2

```


---

---
title: "[USACO08NOV] Time Management S"
layout: "post"
diff: 普及/提高-
pid: P2920
tag: ['贪心', '2008', '二分', 'USACO', '排序']
---
# [USACO08NOV] Time Management S
## 题目描述

Ever the maturing businessman, Farmer John realizes that he must manage his time effectively. He has N jobs conveniently numbered 1..N (1 <= N <= 1,000) to accomplish (like milking the cows, cleaning the barn, mending the fences, and so on).

To manage his time effectively, he has created a list of the jobs that must be finished. Job i requires a certain amount of time T\_i (1 <= T\_i <= 1,000) to complete and furthermore must be finished by time S\_i (1 <= S\_i <= 1,000,000). Farmer John starts his day at time t=0 and can only work on one job at a time until it is finished.

Even a maturing businessman likes to sleep late; help Farmer John determine the latest he can start working and still finish all the jobs on time.

作为一名忙碌的商人，约翰知道必须高效地安排他的时间。他有 $N(1\le N\le 1000)$ 个工作要做，比如给奶牛挤奶，清洗牛棚，修理栅栏之类的。

为了高效，约翰列出了所有工作的清单。第 $i(1\le i\le N)$ 个工作需要 $T_i(1\le T_i\le 1000)$ 单位的时间来完成，而且必须在 $1\le S_i\le 10^6$ 或之前完成。现在是 $0$ 时刻。约翰做一份工作必须直到做完才能停止。

所有的商人都喜欢睡懒觉。请帮约翰计算他最迟什么时候开始工作，可以让所有工作按时完成。（如果始终无法完成全部任务，输出 $-1$）

## 输入格式

\* Line 1: A single integer: N

\* Lines 2..N+1: Line i+1 contains two space-separated integers: T\_i and S\_i

## 输出格式

\* Line 1: The latest time Farmer John can start working or -1 if Farmer John cannot finish all the jobs on time.

## 样例

### 样例输入 #1
```
4 
3 5 
8 14 
5 20 
1 16 

```
### 样例输出 #1
```
2 

```
## 提示

Farmer John has 4 jobs to do, which take 3, 8, 5, and 1 units of time, respectively, and must be completed by time 5, 14, 20, and 16, respectively.


Farmer John must start the first job at time 2. Then he can do the second, fourth, and third jobs in that order to finish on time.



---

---
title: "[USACO13FEB] Milk Scheduling S"
layout: "post"
diff: 普及/提高-
pid: P3074
tag: ['贪心', '2013', 'USACO', '枚举', '拓扑排序']
---
# [USACO13FEB] Milk Scheduling S
## 题目描述

Farmer John's N cows (1 <= N <= 10,000) are conveniently numbered 1..N. Each cow i takes T(i) units of time to milk.  Unfortunately, some cows must be milked before others, owing to the layout of FJ's barn.  If cow A must be milked before cow B, then FJ needs to completely finish milking A before he can start milking B.

In order to milk his cows as quickly as possible, FJ has hired a large number of farmhands to help with the task -- enough to milk any number of cows at the same time.  However, even though cows can be milked at the same time, there is a limit to how quickly the entire process can proceed due to the constraints requiring certain cows to be milked before others.  Please help FJ compute the minimum total time the milking process must take.

农民约翰有N头奶牛(1<=N<=10,000)，编号为1...N。每一头奶牛需要T(i)单位的时间来挤奶。不幸的是，由于FJ的仓库布局，一些奶牛要在别的牛之前挤奶。比如说，如果奶牛A必须在奶牛B前挤奶，FJ就需要在给奶牛B挤奶前结束给奶牛A的挤奶。


为了尽量完成挤奶任务，FJ聘请了一大批雇工协助任务——同一时刻足够去给任意数量的奶牛挤奶。然而，尽管奶牛可以同时挤奶，但仍需要满足以上的挤奶先后顺序。请帮助FJ计算挤奶过程中的最小总时间。

## 输入格式

\* Line 1: Two space-separated integers: N (the number of cows) and M (the number of milking constraints; 1 <= M <= 50,000).

\* Lines 2..1+N: Line i+1 contains the value of T(i) (1 <= T(i) <= 100,000).

\* Lines 2+N..1+N+M: Each line contains two space-separated integers A and B, indicating that cow A must be fully milked before one can start milking cow B.  These constraints will never form a cycle, so a solution is always possible.

## 输出格式

\* Line 1: The minimum amount of time required to milk all cows.

## 样例

### 样例输入 #1
```
3 1 
10 
5 
6 
3 2 

```
### 样例输出 #1
```
11 

```
## 提示

There are 3 cows.  The time required to milk each cow is 10, 5, and 6, respectively.  Cow 3 must be fully milked before we can start milking cow 2.


Cows 1 and 3 can initially be milked at the same time.  When cow 3 is finished with milking, cow 2 can then begin.  All cows are finished milking after 11 units of time have elapsed.



---

---
title: "[USACO14DEC] Cow Jog S"
layout: "post"
diff: 普及/提高-
pid: P3111
tag: ['模拟', '2014', 'USACO', '排序', '广度优先搜索 BFS']
---
# [USACO14DEC] Cow Jog S
## 题目描述

 

The cows are out exercising their hooves again!  There are N cows

jogging on an infinitely-long single-lane track (1 <= N <= 100,000).

Each cow starts at a distinct position on the track, and some cows jog

at different speeds.


 

With only one lane in the track, cows cannot pass each other.  When a

faster cow catches up to another cow, she has to slow down to avoid

running into the other cow, becoming part of the same running group.

 

The cows will run for T minutes (1 <= T <= 1,000,000,000).  Please

help Farmer John determine how many groups will be left at this time.

Two cows should be considered part of the same group if they are at


the same position at the end of T minutes. 

有N (1 <= N <= 100,000)头奶牛在一个单人的超长跑道上慢跑，每头牛的起点位置都不同。由于是单人跑道，所有他们之间不能相互超越。当一头速度快的奶牛追上另外一头奶牛的时候，他必须降速成同等速度。我们把这些跑走同一个位置而且同等速度的牛看成一个小组。


请计算T (1 <= T <= 1,000,000,000)时间后，奶牛们将分为多少小组。


## 输入格式

INPUT: (file cowjog.in) 

The first line of input contains the two integers N and T.


The following N lines each contain the initial position and speed of a

single cow.  Position is a nonnegative integer and speed is a positive

integer; both numbers are at most 1 billion.  All cows start at

distinct positions, and these will be given in increasing order in

the input.


 
## 输出格式

OUTPUT: (file cowjog.out) 

A single integer indicating how many groups remain after T minutes.


## 样例

### 样例输入 #1
```
5 3 
0 1 
1 2 
2 3 
3 2 
6 1 

 


```
### 样例输出 #1
```
 

3 

 

```


---

---
title: "[USACO16OPEN] Field Reduction S"
layout: "post"
diff: 普及/提高-
pid: P3142
tag: ['2016', 'USACO', '枚举', '排序']
---
# [USACO16OPEN] Field Reduction S
## 题目描述

Farmer John's $N$ cows ($5 \leq N \leq 50,000$) are all located at distinct positions in his two-dimensional field.  FJ wants to enclose all of the cows with a rectangular fence whose sides are parallel to the x and y axes, and he wants this fence to be as small as possible so that it contains every cow (cows on the boundary are allowed).

FJ is unfortunately on a tight budget due to low milk production last quarter. He would therefore like to build an even smaller fenced enclosure if possible, and he is willing to sell up to three cows from his herd to make this possible.

Please help FJ compute the smallest possible area he can enclose with his fence after removing up to three cows from his herd (and thereafter building the tightest enclosing fence for the remaining cows).

For this problem, please treat cows as points and the fence as a collection of four line segments (i.e., don't think of the cows as "unit squares").  Note that the answer can be zero, for example if all remaining cows end up standing  in a common vertical or horizontal line.
## 输入格式

The first line of input contains $N$.  The next $N$ lines each contain two integers specifying the location of a cow.  Cow locations are positive integers in the range $1 \ldots 40,000$.

## 输出格式

Write a single integer specifying the minimum area FJ can enclose with his fence after removing up to three carefully-chosen cows from his herd.

## 样例

### 样例输入 #1
```
6
1 1
7 8
10 9
8 12
4 100
50 7
```
### 样例输出 #1
```
12
```
## 题目翻译

### 题目描述

Farmer John 的 $N$ 头奶牛（$5 \leq N \leq 50,000$）都位于他二维牧场中的不同位置。FJ 希望用一个边平行于 $x$ 轴和 $y$ 轴的矩形围栏围住所有的奶牛，并且他希望这个围栏尽可能小，以便能够包含每头奶牛（允许奶牛位于边界上）。

不幸的是，由于上个季度牛奶产量低，FJ 的预算非常紧张。因此，他希望如果可能的话，建造一个更小的围栏，并且他愿意从他的牛群中出售最多三头奶牛来实现这一目标。

请帮助 FJ 计算在从他的牛群中移除最多三头奶牛后，他可以用围栏围住的最小可能面积（然后为剩余的奶牛建造最紧密的围栏）。

对于这个问题，请将奶牛视为点，将围栏视为四条线段的集合（即不要将奶牛视为“单位正方形”）。请注意，答案可能为零，例如如果所有剩余的奶牛最终站在一条共同的垂直线或水平线上。

### 输入格式

输入的第一行包含 $N$。接下来的 $N$ 行每行包含两个整数，表示一头奶牛的位置。奶牛的位置是范围在 $1 \ldots 40,000$ 的正整数。

### 输出格式

输出一个整数，表示 FJ 在从他的牛群中精心选择移除最多三头奶牛后，可以用围栏围住的最小面积。


---

---
title: "[HAOI2009] 巧克力"
layout: "post"
diff: 普及/提高-
pid: P3173
tag: ['贪心', '递推', '2009', '河南', '排序', '前缀和']
---
# [HAOI2009] 巧克力
## 题目描述

有一块 $n \times m$ 的矩形巧克力，准备将它切成 $n \times m$ 块。巧克力上共有 $n-1$ 条横线和 $m-1$ 条竖线，你每次可以沿着其中的一条横线或竖线将巧克力切开，无论切割的长短，沿着每条横线切一次的代价依次为 $y_1,y_2,\cdots,y_{n-1}$，而沿竖线切割的代价依次为 $x_1,x_2,\cdots,x_{m-1}$。

例如，对于下图 $6 \times 4$ 的巧克力，我们先沿着三条横线切割，需要 $3$ 刀，得到 $4$ 条巧克力，然后再将这 $4$ 条巧克力沿竖线切割，每条都需要 $5$ 刀，则最终所花费的代价为 $y_1+y_2+y_3+4 \times (x_1+x_2+x_3+x_4+x_5)$。

![](https://cdn.luogu.com.cn/upload/image_hosting/juiv548x.png)


当然，上述简单切法不见得是最优切法，那么怎样切割该块巧克力，花费的代价最少呢？

## 输入格式


第一行为两个整数 $n$ 和 $m$；

接下来 $n-1$ 行，每行一个整数，分别代表 $x_1,x_2,\cdots,x_{n-1}$；

接下来 $m-1$ 行，每行一个整数，分别代表 $y_1,y_2,\cdots,y_{m-1}$。
## 输出格式

输出一整数，为切割巧克力的最小代价。

## 样例

### 样例输入 #1
```
6 4
2
1
3
1
4
4
1
2
```
### 样例输出 #1
```
42
```
## 提示


$30\%$ 的数据，$n \leq 100,m \leq 100$；

$100\%$ 的数据，$n \leq 10000,m \leq 10000$；


---

---
title: "Geodetic集合"
layout: "post"
diff: 普及/提高-
pid: P3906
tag: ['图论', '枚举', '排序', '最短路']
---
# Geodetic集合
## 题目描述

图 $\text G$ 是一个无向连通图，没有自环，并且两点之间至多只有一条边。我们定义顶点 $v,u$ 的最短路径就是从 $v$ 到 $u$ 经过边最少的路径。所有包含在 $v-u$ 的最短路径上的顶点被称为 $v-u$ 的 Geodetic 顶点，这些顶点的集合记作 $I(v,u)$。

我们称集合 $I(v,u)$ 为一个 Geodetic 集合。

例如下图中，$I(2,5)=\{2,3,4,5\}$，$I(1,5)=\{1,3,5\}$，$I(2,4)=\{2,4\}$。

![](https://cdn.luogu.com.cn/upload/image_hosting/26c7a19d.png)

给定一个图 $\text G$ 和若干点对 $v,u$，请你分别求出 $I(v,u)$。
## 输入格式

第一行为两个整数 $n,m$，分别表示图 $\text G$ 的顶点数和边数（顶点编号为 $1\sim n$）。  
接下来 $m$ 行，每行两个整数 $a,b$，表示 顶点 $a$ 和 $b$ 之间有一条无向边。  
第 $m+2$ 行有一个整数 $k$，表示给定的点对数。  
接下来 $k$ 行，每行两个整数 $v,u$，表示每个点对的起点和终点。 
## 输出格式

共 $k$ 行，对于输入文件中每一个点对 $v,u$，按顶点顺序一行输出 $I(v,u)$ 里面的所有点的编号。
## 样例

### 样例输入 #1
```
5 6
1 2
1 3
2 3
2 4
3 5
4 5
3
2 5
5 1
2 4
```
### 样例输出 #1
```
2 3 4 5
1 3 5
2 4
```
## 提示

对于所有数据，满足 $1\leqslant n\leqslant 40$，$1\leqslant m\leqslant \frac{n(n-1)}2$。


---

---
title: "最大食物链计数"
layout: "post"
diff: 普及/提高-
pid: P4017
tag: ['动态规划 DP', '搜索', '图论', '排序', '深度优先搜索 DFS', '拓扑排序']
---
# 最大食物链计数
## 题目背景

你知道食物链吗？Delia 生物考试的时候，数食物链条数的题目全都错了，因为她总是重复数了几条或漏掉了几条。于是她来就来求助你，然而你也不会啊！写一个程序来帮帮她吧。

## 题目描述

给你一个食物网，你要求出这个食物网中最大食物链的数量。

（这里的“最大食物链”，指的是**生物学意义上的食物链**，即**最左端是不会捕食其他生物的生产者，最右端是不会被其他生物捕食的消费者**。）

Delia 非常急，所以你只有 $1$ 秒的时间。

由于这个结果可能过大，你只需要输出总数模上 $80112002$ 的结果。

## 输入格式

第一行，两个正整数 $n、m$，表示生物种类 $n$ 和吃与被吃的关系数 $m$。

接下来 $m$ 行，每行两个正整数，表示被吃的生物A和吃A的生物B。

## 输出格式

一行一个整数，为最大食物链数量模上 $80112002$ 的结果。

## 样例

### 样例输入 #1
```
5 7
1 2
1 3
2 3
3 5
2 5
4 5
3 4
```
### 样例输出 #1
```
5
```
## 提示

各测试点满足以下约定：

 ![](https://cdn.luogu.com.cn/upload/pic/12011.png) 

【补充说明】

数据中不会出现环，满足生物学的要求。（感谢 @AKEE ）



---

---
title: "[USACO17DEC] The Bovine Shuffle S"
layout: "post"
diff: 普及/提高-
pid: P4089
tag: ['2017', 'USACO', '拓扑排序']
---
# [USACO17DEC] The Bovine Shuffle S
## 题目描述

Convinced that happy cows generate more milk, Farmer John has installed a giant disco ball in his barn and plans to teach his cows to dance!

Looking up popular cow dances, Farmer John decides to teach his cows the "Bovine Shuffle". The Bovine Shuffle consists of his $N$ cows ($1 \leq N \leq 100,000$) lining up in a row in some order, then performing successive "shuffles", each of which potentially re-orders the cows. To make it easier for his cows to locate themselves, Farmer John marks the locations for his line of cows with positions $1 \ldots N$, so the first cow in the lineup will be in position 1, the next in position 2, and so on, up to position $N$.


A shuffle is described with $N$ numbers, $a_1 \ldots a_N$, where a cow in position $i$ moves to position $a_i$ during the shuffle (and so, each $a_i$ is in the range $1 \ldots N$). Every cow moves to its new location during the shuffle. Unfortunately, all the $a_i$'s are not necessarily distinct, so multiple cows might try to move to the same position during a shuffle, after which they will move together for all remaining shuffles.


Farmer John notices that some positions in his lineup contain cows in them no matter how many shuffles take place. Please help him count the number of such positions.


## 输入格式

The first line of input contains $N$, the number of cows. The next line contains the $N$ integers $a_1 \ldots a_N$.

## 输出格式

Please output the number of positions that will always contain cows, no matter how many shuffles take place.

## 样例

### 样例输入 #1
```
4
3 2 1 3
```
### 样例输出 #1
```
3

```
## 题目翻译

### 题目描述

Farmer John 坚信快乐的奶牛能产更多的奶，因此他在谷仓里安装了一个巨大的迪斯科球，并计划教他的奶牛跳舞！

在查阅了流行的奶牛舞蹈后，Farmer John 决定教他的奶牛“Bovine Shuffle”。Bovine Shuffle 包括他的 $N$ 头奶牛（$1 \leq N \leq 100,000$）以某种顺序排成一行，然后进行连续的“洗牌”，每次洗牌可能会重新排列奶牛的顺序。为了让奶牛更容易找到自己的位置，Farmer John 为他的奶牛队伍标记了位置 $1 \ldots N$，因此队伍中的第一头奶牛位于位置 1，第二头位于位置 2，依此类推，直到位置 $N$。

一次洗牌由 $N$ 个数字 $a_1 \ldots a_N$ 描述，其中位于位置 $i$ 的奶牛在洗牌期间移动到位置 $a_i$（因此，每个 $a_i$ 都在 $1 \ldots N$ 范围内）。每头奶牛在洗牌期间都会移动到它的新位置。不幸的是，所有的 $a_i$ 不一定互不相同，因此多只奶牛可能会在洗牌期间尝试移动到同一位置，之后它们将在所有剩余的洗牌中一起移动。

Farmer John 注意到，无论进行多少次洗牌，他的队伍中某些位置始终会有奶牛。请帮助他计算这样的位置数量。

### 输入格式

输入的第一行包含 $N$，表示奶牛的数量。第二行包含 $N$ 个整数 $a_1 \ldots a_N$。

### 输出格式

请输出无论进行多少次洗牌，始终会有奶牛的位置数量。


---

---
title: "[USACO18FEB] Rest Stops S"
layout: "post"
diff: 普及/提高-
pid: P4266
tag: ['贪心', '2018', 'USACO', '排序']
---
# [USACO18FEB] Rest Stops S
## 题目描述

Farmer John and his personal trainer Bessie are hiking up Mount Vancowver. For their purposes (and yours), the mountain can be represented as a long straight trail of length $L$ meters ($1 \leq L \leq 10^6$). Farmer John will hike the trail at a constant travel rate of $r_F$ seconds per meter ($1 \leq r_F \leq 10^6$). Since he is working on his stamina, he will not take any rest stops along the way.
Bessie, however, is allowed to take rest stops, where she might find some tasty grass. Of course, she cannot stop just anywhere! There are $N$ rest stops along the trail ($1 \leq N \leq 10^5$); the $i$-th stop is $x_i$ meters from the start of the trail ($0 < x_i < L$) and has a tastiness value $c_i$ ($1 \leq c_i \leq 10^6$). If Bessie rests at stop $i$ for $t$ seconds, she receives $c_i \cdot t$ tastiness units.

When not at a rest stop, Bessie will be hiking at a fixed travel rate of $r_B$ seconds per meter ($1 \leq r_B \leq 10^6$). Since Bessie is young and fit, $r_B$ is strictly less than $r_F$.

Bessie would like to maximize her consumption of tasty grass. But she is worried about Farmer John; she thinks that if at any point along the hike she is behind Farmer John on the trail, he might lose all motivation to continue!

Help Bessie find the maximum total tastiness units she can obtain while making sure that Farmer John completes the hike.
## 输入格式

The first line of input contains four integers: $L$, $N$, $r_F$, and $r_B$. The next $N$ lines describe the rest stops. For each $i$ between $1$ and $N$, the $i+1$-st line contains two integers $x_i$ and $c_i$, describing the position of the $i$-th rest stop and the tastiness of the grass there.
It is guaranteed that $r_F > r_B$, and $0 < x_1 < \dots < x_N < L $. **Note that $r_F$ and $r_B$ are given in seconds per meter!**
## 输出格式

A single integer: the maximum total tastiness units Bessie can obtain.
## 样例

### 样例输入 #1
```
10 2 4 3
7 2
8 1
```
### 样例输出 #1
```
15
```
## 提示

In this example, it is optimal for Bessie to stop for $7$ seconds at the $x=7$ rest stop (acquiring $14$ tastiness units) and then stop for an additional $1$ second at the $x=8$ rest stop (acquiring $1$ more tastiness unit, for a total of $15$ tastiness units).

Problem credits: Dhruv Rohatgi
## 题目翻译

### 题目描述

Farmer John 和他的私人教练 Bessie 正在攀登温哥华山。为了他们的目的（以及你的目的），这座山可以表示为一条长度为 $L$ 米的长直步道（$1 \leq L \leq 10^6$）。Farmer John 将以每米 $r_F$ 秒的恒定速度徒步（$1 \leq r_F \leq 10^6$）。由于他正在锻炼耐力，他不会在途中休息。

然而，Bessie 被允许在休息站休息，她可能会在那里找到一些美味的草。当然，她不能随便停下来！步道上有 $N$ 个休息站（$1 \leq N \leq 10^5$）；第 $i$ 个休息站距离步道起点 $x_i$ 米（$0 < x_i < L$），并且有一个美味值 $c_i$（$1 \leq c_i \leq 10^6$）。如果 Bessie 在第 $i$ 个休息站休息 $t$ 秒，她会获得 $c_i \cdot t$ 的美味单位。

当不在休息站时，Bessie 将以每米 $r_B$ 秒的固定速度徒步（$1 \leq r_B \leq 10^6$）。由于 Bessie 年轻且健康，$r_B$ 严格小于 $r_F$。

Bessie 希望最大化她摄入的美味草量。但她担心 Farmer John；她认为如果在徒步的任何时刻她在步道上落后于 Farmer John，他可能会失去继续前进的动力！

请帮助 Bessie 找到在确保 Farmer John 完成徒步的情况下，她能获得的最大总美味单位。

### 输入格式

输入的第一行包含四个整数：$L$、$N$、$r_F$ 和 $r_B$。接下来的 $N$ 行描述了休息站。对于每个 $i$ 从 $1$ 到 $N$，第 $i+1$ 行包含两个整数 $x_i$ 和 $c_i$，分别描述第 $i$ 个休息站的位置和草的美味值。
保证 $r_F > r_B$，且 $0 < x_1 < \dots < x_N < L$。**注意，$r_F$ 和 $r_B$ 的单位是秒每米！**

### 输出格式

输出一个整数：Bessie 能获得的最大总美味单位。


### 提示

在这个例子中，Bessie 最优的策略是在 $x=7$ 的休息站休息 $7$ 秒（获得 $14$ 个美味单位），然后在 $x=8$ 的休息站再休息 $1$ 秒（获得 $1$ 个美味单位，总共 $15$ 个美味单位）。


---

---
title: "[USACO18OPEN] Out of Sorts S"
layout: "post"
diff: 普及/提高-
pid: P4378
tag: ['2018', 'USACO', '树状数组', '排序']
---
# [USACO18OPEN] Out of Sorts S
## 题目描述

留意着农场之外的长期职业生涯的可能性，奶牛 Bessie 开始在不同的在线编程网站上学习算法。

她到目前为止最喜欢的算法是“冒泡排序”。这是 Bessie 的对长度为 $N$ 的数组 $A$ 进行排序的奶牛码实现。

```
sorted = false
while (not sorted):
   sorted = true
   moo
   for i = 0 to N-2:
      if A[i+1] < A[i]:
         swap A[i], A[i+1]
         sorted = false
```
显然，奶牛码中的“moo”指令的作用只是输出“moo”。奇怪的是，Bessie 看上去执着于在她的代码中的不同位置使用这个语句。

给定一个输入数组，请预测 Bessie 的代码会输出多少次“moo”。
## 输入格式

输入的第一行包含 $N$（$1 \leq N \leq 100,000$）。接下来 $N$ 行描述了 $A[0] \ldots A[N-1]$，每个数都是一个范围为 $0 \ldots 10^9$ 的整数。输入数据不保证各不相同。
## 输出格式

输出“moo”被输出的次数。
## 样例

### 样例输入 #1
```
5
1
5
3
8
2
```
### 样例输出 #1
```
4

```
## 提示

供题：Brian Dean


---

---
title: "kls与flag"
layout: "post"
diff: 普及/提高-
pid: P4889
tag: ['枚举', '排序', '洛谷月赛']
---
# kls与flag
## 题目背景

kls毒奶非常厉害。
## 题目描述

有$n$个OI选手，每个人插了一个flag。有一天因为某种原因，flag都被触发了，所以地上有一排$n$根竹竿，竹竿的间距均为一个单位长度，高度在$1\sim m$之间。

kls看到这些竹竿，感觉不好看，于是准备把它们全部放倒。

在这之前，kls想到了一个数学问题。每根竹竿可以往左倒或者往右倒。如果两根竹竿在选择方向放倒之后，它们的顶端可以重合，那么称它们是优秀的。现在kls想要知道，有多少对竹竿是优秀的。
## 输入格式

第一行两个数$n,m$，表示竹竿的个数和最大高度。

第二行$n$个正整数，表示每根竹竿的高度。
## 输出格式

输出一行，只有一个数，表示有多少对竹竿是优秀的。
## 样例

### 样例输入 #1
```
5 5
2 3 3 3 2
```
### 样例输出 #1
```
3
```
## 提示

### 样例解释

![法法](https://cdn.luogu.com.cn/upload/pic/25795.png)

- 1号和2号向左倒可以顶端重合
- 4号和5号向右倒可以顶端重合
- 1号向右，5号向左可以顶端重合

### 数据范围

对于30%的数据，满足$n\le 2000$，$m\le 5000$；

对于60%的数据，满足$n\le 200000$，$m\le 500000$；

对于100%的数据，满足$n \le 200000$，$m \le 10^9$。


---

---
title: "血小板与凝血因子"
layout: "post"
diff: 普及/提高-
pid: P4960
tag: ['Special Judge', '枚举', '排序']
---
# 血小板与凝血因子
## 题目背景

为了尽快修复伤口，血小板们正在搬运凝血因子。它们（没毛病）正在讨论怎么分配，因为它们太可爱了，所以就让你来解决这个问题。

![](https://i.loli.net/2018/10/05/5bb7372e781b1.jpg)
## 题目描述

血小板们有两种不同的容器，第一种容器每个容器中只能装同一种凝血因子，第二种容器每个容器中每种凝血因子最多出现一次。为了方便，血小板们想用**同一种**容器装下所有的凝血因子。

换句话说，把 $n$ 个正整数 $a_1$ ~ $a_n$ 分成一些不相交的集合 $S_1$ ~ $S_m$，满足以下两个条件**之一**： 
1. $\forall a_i,\ a_j\in S_k,\ k\in [1,\ m]$ 有 $a_i=a_j$
2. $\forall a_i,\ a_j\in S_k,\ k\in [1,\ m],\ i\neq j$ 有 $a_i\neq a_j$

因为血小板的数量比较少，所以你要把所有的凝血因子装到尽量少的容器里。它们想知道，如何划分能使容器的总数最小。
## 输入格式

第一行，一个正整数 $n$，表示凝血因子的个数。

第二行，$n$ 个正整数 $a_i$，分别表示凝血因子的种类。
## 输出格式

第一行，两个正整数，第一个正整数代表容器数的最小值 $m$，第二个正整数代表所用容器的种类（$1$ 或 $2$）。

接下来的 $m$ 行，每行第一个正整数 $c_i$ 代表这个容器装的凝血因子个数，后面的 $c_i$ 个数代表这个容器中装的每个凝血因子的种类。

输出任意一组合法的最优解即可，输出顺序不限。
## 样例

### 样例输入 #1
```
7
1 2 3 5 4 4 4
```
### 样例输出 #1
```
3 2
1 4
5 3 1 2 4 5
1 4
```
### 样例输入 #2
```
3
20181110 20181111 20181111
```
### 样例输出 #2
```
2 1
1 20181110
2 20181111 20181111
```
### 样例输入 #3
```
3
20181110 20181111 20181111
```
### 样例输出 #3
```
2 2
2 20181110 20181111
1 20181111
```
### 样例输入 #4
```
5
3 2 3 2 3
```
### 样例输出 #4
```
2 1
3 3 3 3
2 2 2
```
## 提示

$1\le n\le 1000,\ \ 1\le a_i\le 10^9$。

## 样例解释

### 样例一：

选用第二种容器，分别放入 $\{4\}$，$\{3,1,2,4,5\}$，$\{4\}$，这是一组可行的最优解，更改三个容器的顺序、容器 $2$ 中 $5$ 个凝血因子的顺序可以得到另外的最优解。

### 样例二/三：

这两组样例输入相同，既可以选用第一种容器，也可以选用第二种容器。

两组样例的输出分别为一组可行的最优解，改变顺序可以得到另外的几组最优解。

### 样例四：

选用第一种容器，分别放入 $\{3,3,3\}$，$\{2,2\}$，这是一组可行的最优解，更改两个容器的顺序可以得到另一组最优解。


---

---
title: "会议座位"
layout: "post"
diff: 普及/提高-
pid: P5149
tag: ['排序', '字典树 Trie']
---
# 会议座位
## 题目背景

话说校长最近很喜欢召开全校教职工大会，让老师们强行听他装逼

## 题目描述

现在校长在校园网上公布了一份座位表，$n$ 位老师从左到右依次排成一行。老师们都对这个座位很满意。

然而到了开会时，校长不小心把座位表打乱了，老师们很不满。老师们并不在意自己的位置变了多少，但如果有一对老师 $a$ 和 $b$，他们原来的座位是 $a$ 在 $b$ 左边，现在变成了 $a$ 在 $b$ 右边，那么这一对老师便会贡献一单位不满值。

校长想知道这些老师的总不满值是多少。
## 输入格式

第一行一个正整数 $n$，为 $n$ 位老师。

第二行有 $n$ 个字符串，每个字符串代表老师的名字（大小写敏感）。这一行代表原来的座位表。

第三行有 $n$ 个字符串，代表打乱后的座位表。
## 输出格式

一行，一个正整数，表示老师们的总不满值。
## 样例

### 样例输入 #1
```
3
Stan Kyle Kenny
Kyle Stan Kenny
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
5
A B C D E
B A D E C
```
### 样例输出 #2
```
3
```
## 提示

对于 $30\%$ 的数据，$1\le n \le 10^3$。

对于 $100\%$ 的数据，$1\le n \le 10^5$，每位老师名字长度不超过 $5$，只有大小写字母并且互不相同。注意名字对大小写敏感。


---

---
title: "[USACO19JAN] Mountain View S"
layout: "post"
diff: 普及/提高-
pid: P5199
tag: ['贪心', '2019', 'USACO', '排序']
---
# [USACO19JAN] Mountain View S
## 题目背景

USACO 2019 年一月月赛银组第三题
## 题目描述

从农场里奶牛 Bessie 的牧草地向远端眺望，可以看到巍峨壮丽的山脉绵延在地平线上。山脉里由 $N$ 座山峰（$1≤N≤10^5$）。如果我们把 Bessie 的视野想象成 $xy$ 平面，那么每座山峰都是一个底边在 $x$ 轴上的三角形。山峰的两腰均与底边成 $45$ 度角，所以山峰的峰顶是一个直角。于是山峰 $i$ 可以由它的峰顶坐标 $(x_i,y_i)$ 精确描述。没有两座山峰有完全相同的峰顶坐标。

Bessie 尝试数清所有的山峰，然而由于它们几乎是相同的颜色，所以如果一座山峰的峰顶在另一座山峰的三角形区域的边界上或是内部，她就无法看清。

请求出 Bessie 能够看见的不同的山峰的峰顶的数量，也就是山峰的数量。
## 输入格式

输入的第一行包含 $N$。以下 $N$ 行每行包含 $x_i$（$0\le x_i\le 10^9$）和$y_i$（$1\le y_i\le 10^9$），描述一座山峰的峰顶的坐标。
## 输出格式

输出 Bessie 能够分辨出的山峰的数量。
## 样例

### 样例输入 #1
```
3
4 6
7 2
2 5
```
### 样例输出 #1
```
2
```
## 提示

在这个例子中，Bessie 能够看见第一座和最后一座山峰。第二座山峰被第一座山峰掩盖了。


---

---
title: "[USACO19FEB] Sleepy Cow Herding S"
layout: "post"
diff: 普及/提高-
pid: P5541
tag: ['模拟', '贪心', '2019', 'USACO', '排序']
---
# [USACO19FEB] Sleepy Cow Herding S
## 题目描述

Farmer John 的 $N$ 头奶牛，总是会迷路走到农场上遥远的地方去！他需要你帮助将她们一起赶回来。

农场的草地大体是一块狭长的区域——我们可以将其想象成一条数轴，奶牛可以占据数轴上的任意整数位置。这 $N$ 头奶牛现在正位于不同的整数位置，Farmer John 想要移动她们，使得她们占据 $N$ 个相邻的位置（例如，位置 $6$、$7$、$8$）。

不幸的是，奶牛们现在很困，Farmer John 要让她们集中精力听从命令移动并不容易。任意时刻，他只能使得一头处在“端点”（在所有奶牛中位置最小或最大）位置的奶牛移动。当他移动奶牛时，他可以命令她走到任意一个未被占用的整数位置，只要在新的位置上她不再是一个端点。可以看到随着时间的推移，这样的移动可以使奶牛们趋向越来越近。

请求出使得奶牛们集中到相邻位置所进行的移动次数的最小和最大可能值。
## 输入格式

先输入一个整数 $N$（$N \leq 100000$），接下来输入 $N$ 个数，表示 $N$ 头奶牛的位置。
## 输出格式

输出的第一行包含 Farmer John 需要将奶牛们聚集起来所需进行的最小移动次数。第二行包含他将奶牛聚集起来能够进行的最大移动次数。
## 样例

### 样例输入 #1
```
3 
4 
7 
9
```
### 样例输出 #1
```
1
2
```
## 提示

2019 USACO 二月月赛银牌组第一题


---

---
title: "[USACO20FEB] Timeline G"
layout: "post"
diff: 普及/提高-
pid: P6145
tag: ['图论', '2020', 'USACO', '拓扑排序', '差分约束']
---
# [USACO20FEB] Timeline G
## 题目描述

Bessie 在过去的 $M$ 天内参加了 $N$ 次挤奶。但她已经忘了她每次挤奶是在哪个时候了。

对于第 $i$ 次挤奶，Bessie 记得它不早于第 $S_i$ 天进行。另外，她还有 $C$ 条记忆，每条记忆形如一个三元组 $(a,b,x)$，含义是第 $b$ 次挤奶在第 $a$ 次挤奶结束至少 $x$ 天后进行。

现在请你帮 Bessie 算出在满足所有条件的前提下，每次挤奶的最早日期。

保证 Bessie 的记忆没有错误，这意味着一定存在一种合法的方案，使得：

- 第 $i$ 次挤奶不早于第 $S_i$ 天进行，且不晚于第 $M$ 天进行；
- 所有的记忆都得到满足；
## 输入格式

第一行三个整数 $N,M,C$。保证 $1 \leq N,C \leq 10^5$，$2 \leq M \leq 10^9$。

接下来一行包含 $N$ 个整数 $S_1, S_2 , \ldots, S_n$，保证 $\forall 1 \leq i \leq n$，都满足 $1 \leq S_i \leq M$。

下面 $C$ 行每行三个整数 $a,b,x$，描述一条记忆。保证 $a \neq b$，且 $1 \leq x \leq M$。
## 输出格式

输出 $N$ 行，每行一个整数，第 $i$ 行的数表示第 $i$ 次挤奶的最早日期。
## 样例

### 样例输入 #1
```
4 10 3
1 2 3 4
1 2 5
2 4 2
3 4 4
```
### 样例输出 #1
```
1
6
3
8
```
## 提示

- 测试点 $2 \sim 4$ 满足 $N,C \leq 10^3$。
- 测试点 $5 \sim 10$ 没有特殊限制。


---

---
title: "[USACO15DEC] High Card Wins S"
layout: "post"
diff: 普及/提高-
pid: P6179
tag: ['贪心', '2015', 'USACO', '排序']
---
# [USACO15DEC] High Card Wins S
## 题目描述

Bessie 是纸牌游戏的忠实粉丝。对她而言，其他奶牛都算不上对手。更糟糕的是，其他奶牛在打牌时的行为都是完全能预测的。尽管如此，Bessie 知道取胜仍然是个挑战。

Bessie 和她的朋友 Elsie 正在玩一种纸牌游戏。这个游戏里要用到一副 $2N$ 张牌的套牌，编号从 $1$ 到 $2N$。Bessie 和 Elsie 每个人各分得 $N$ 张卡片。接下来进行 $N$ 轮比赛，Bessie 和 Elsie 每轮各出一张牌。每一轮谁的牌编号更大，谁就赢得了本轮的胜利。

Bessie 已经预测了 Elsie 的出牌顺序，请帮助 Bessie 算出她最多能赢多少轮。
## 输入格式

第一行一个整数 $N$（$1 \leq N \leq 5 \times 10^4$）。

接下来 $N$ 行，第 $i$ 行一个整数，表示 Elsie 第 $i$ 轮出的牌。注意 Bessie 手中的 $N$ 张牌很容易从输入中推出。
## 输出格式

输出 Bessie 最多能赢多少轮。
## 样例

### 样例输入 #1
```
3
1
6
4
```
### 样例输出 #1
```
2
```
## 提示

Bessie 手中拿着 $2,3,5$ 三张牌。

它第一轮出 $2$，第二轮出 $3$，第三轮出 $5$，从而赢得一，三两轮。可以证明不存在更优的方案。


---

---
title: "[COCI 2009/2010 #3] RAZGOVOR"
layout: "post"
diff: 普及/提高-
pid: P7260
tag: ['2009', '排序', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #3] RAZGOVOR
## 题目描述

可爱村只有一条长长的街道，从东向西延伸，有 $m$ 户人家。每栋房子都有一个单独的房号，从 $1$ 开始到 $m$ 结束。

最近的暴风雪摧毁了大部分电话线，所以市长出资建造了一个新的电话线。Mirko 对这个新的电话网络的普及程度很感兴趣，所以他在一些点上安装了特殊的探测器。

探测器可以检测到两栋房子之间的任何电话，一栋房子在探测器的 **东边**，一栋房子在探测器的 **西边**。

在第一个月结束时，Mirko 撤掉了所有的探测器，现在想知道在这一个月里，可能打过的电话中，**最小** 的电话数量是多少。



## 输入格式

第一行，两个正整数，$n, m$，分别表示探测器和房屋的数量。

接下来，$n$ 行，每行两个正整数 $P_i$，和 $C_i$，编号为 $i$ 的探测器检测到的位置和电话总数。 我们说，如果且仅当一个探测器在编号为 $P_i$ 和 $P_i+1$ 的房屋之间时，他就在位置 $P_i$ 上。

**同一位置上最多有一个探测器。**
## 输出格式

输出一个正整数，表示最小的通话次数。

## 样例

### 样例输入 #1
```
3 4
3 1
2 2
1 1

```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2 3
1 23
2 17

```
### 样例输出 #2
```
23
```
### 样例输入 #3
```
3 9
7 2
8 3
3 4

```
### 样例输出 #3
```
5
```
## 提示

#### 数据规模及约定

- 对于 $50\%$ 的数据，$1 \le n \le 10^3$，$1 \le C_i \le 10^3$，$n < m \le 10^9$，$1 \le P_i < M$。
- 对于 $100\%$ 的数据，$1 \le n \le 10^5$，$1 \le C_i \le 10^9$，$n < m \le 10^9$，$1 \le P_i < M$。

#### 说明
翻译自 [COCI 2009-2010 #3 T4 RAZGOVOR](https://hsin.hr/coci/archive/2009_2010/contest3_tasks.pdf)，满分 100，每个测试点 10 分，共 10 个测试点。


---

---
title: "「PMOI-4」生成树"
layout: "post"
diff: 普及/提高-
pid: P7319
tag: ['贪心', '2021', 'O2优化', '排序', '洛谷月赛']
---
# 「PMOI-4」生成树
## 题目背景

> 题目正解不会很难，反正很难的也必不会做，所以宁愿相信题目都是善良的。

——command_block 《考前小贴士》

djy 出了一道生成树的题，然后发现做法假了，就把这个题改了一下，作为这场比赛的 B。
## 题目描述

给定 $n$ 个数，第 $i$ 个数的原始权值是 $w_i$，你要按照某种顺序将这些数依次选择。

若当前是第 $i$ 次选数，选择的**原始权值**为 $k$，则其他所有**未被选过**的数的权值均加上 $(-1)^{i+k+1} \times k$。

你需要求出一种选数方案，使得选出的 $n$ 个数**最终**的**权值**和**最大**。
## 输入格式

第一行一个正整数 $n$。

第二行 $n$ 个整数 $w_i$，表示第 $i$ 个数的权值。
## 输出格式

一行一个整数，表示最大权值和。
## 样例

### 样例输入 #1
```
7
1 -1 -2 2 -3 3 4
```
### 样例输出 #1
```
66
```
## 提示

【样例解释】

依次选择**编号**为 $\{7,6,5,3,4,1,2\}$ 的数即可。

【数据范围】

**本题采用捆绑测试**。

- Subtask 1（20pts）：$n \le 7$。
- Subtask 2（30pts）：$n \le  10^3$。
- Subtask 3（30pts）：保证所有的 $w_i \ge 0$ 或所有的 $w_i \le 0$。
- Subtask 4（20pts）：无特殊限制。

对于 $100\%$ 的数据满足，$1 \le n \le 10^5,-10^9 \le w \le 10^9$。


---

---
title: "「TOCO Round 1」自适应 PVZ"
layout: "post"
diff: 普及/提高-
pid: P7391
tag: ['贪心', '平衡树', '排序']
---
# 「TOCO Round 1」自适应 PVZ
## 题目背景

爆切今天的毒瘤三维计算几何后，$\color{black}\texttt{Q}\color{red}\texttt{wQcOrZ}$ 打开了某个有趣的 exe 文件。
## 题目描述

可怜的 $\color{black}\texttt Q\color{red}\texttt{wQcOrZ}$ 在草坪上遇到了 $n$ 只僵尸，第 $i$ 只僵尸在 $l_i$ 时刻出现，会在 $r_i$ 时刻走进房子。

$\color{black}\texttt Q\color{red}\texttt{wQcOrZ}$ 手头有 $m$ 个豌豆射手。若一个豌豆射手在 $l_i$ 至 $r_i$ 时刻（不包括两个端点）持续攻击 $i$ 僵尸则可以杀死 $i$ 僵尸，但在攻击过程中不能攻击另外两只僵尸且攻击的僵尸不能更换。

现在 $\color{black}\texttt Q\color{red}\texttt{wQcOrZ}$ 想知道在合理的安排下，最少有几只僵尸会进入他的房子。
## 输入格式

第一行两个整数 $n,m$ 表示僵尸数量和豌豆射手数量。

接下来 $n$ 行每行两个整数 $l_i$ 和 $r_i$ 表示僵尸 $i$ 的出现时刻和走进房子时刻。
## 输出格式

一个整数表示答案。
## 样例

### 样例输入 #1
```
2 1
1 2
3 4
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
3 2
1 3
1 3
2 4
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
2 1
1 3
3 5
```
### 样例输出 #3
```
0
```
## 提示

对于 $30\%$ 的数据，$n,m\leq 6$。  
对于 $60\%$ 的数据，$n,m\leq 10^3$。  
对于另外 $20\%$ 的数据，$m\geq n$。  
对于 $100\%$ 的数据，$1\leq n,m\leq 2\times 10^5$，$1\leq l_i<r_i\leq 10^9$。


---

---
title: "[CSP-J 2021] 插入排序"
layout: "post"
diff: 普及/提高-
pid: P7910
tag: ['2021', 'O2优化', '枚举', '排序', 'CSP-J 入门级']
---
# [CSP-J 2021] 插入排序
## 题目描述

插入排序是一种非常常见且简单的排序算法。小 Z 是一名大一的新生，今天 H 老师刚刚在上课的时候讲了插入排序算法。

假设比较两个元素的时间为 $\mathcal O(1)$，则插入排序可以以 $\mathcal O(n^2)$ 的时间复杂度完成长度为 $n$ 的数组的排序。不妨假设这 $n$ 个数字分别存储在 $a_1, a_2, \ldots, a_n$ 之中，则如下伪代码给出了插入排序算法的一种最简单的实现方式：

这下面是 C/C++ 的示范代码：

```cpp
for (int i = 1; i <= n; i++)
	for (int j = i; j >= 2; j--)
		if (a[j] < a[j-1]) {
			int t = a[j-1];
			a[j-1] = a[j];
			a[j] = t;
		}
```

这下面是 Pascal 的示范代码：

```pascal
for i:=1 to n do
	for j:=i downto 2 do
		if a[j]<a[j-1] then
			begin
				t:=a[i];
				a[i]:=a[j];
				a[j]:=t;
			end;
```

为了帮助小 Z 更好的理解插入排序，小 Z 的老师 H 老师留下了这么一道家庭作业：

H 老师给了一个长度为 $n$ 的数组 $a$，数组下标从 $1$ 开始，并且数组中的所有元素均为非负整数。小 Z 需要支持在数组 $a$ 上的 $Q$ 次操作，操作共两种，参数分别如下：

$1~x~v$：这是第一种操作，会将 $a$ 的第 $x$ 个元素，也就是 $a_x$ 的值，修改为 $v$。保证 $1 \le x \le n$，$1 \le v \le 10^9$。**注意这种操作会改变数组的元素，修改得到的数组会被保留，也会影响后续的操作**。

$2~x$：这是第二种操作，假设 H 老师按照**上面的伪代码**对 $a$ 数组进行排序，你需要告诉 H 老师原来 $a$ 的第 $x$ 个元素，也就是 $a_x$，在排序后的新数组所处的位置。保证 $1 \le x \le n$。**注意这种操作不会改变数组的元素，排序后的数组不会被保留，也不会影响后续的操作**。

H 老师不喜欢过多的修改，所以他保证类型 $1$ 的操作次数不超过 $5000$。

小 Z 没有学过计算机竞赛，因此小 Z 并不会做这道题。他找到了你来帮助他解决这个问题。
## 输入格式

第一行，包含两个正整数 $n, Q$，表示数组长度和操作次数。

第二行，包含 $n$ 个空格分隔的非负整数，其中第 $i$ 个非负整数表示 $a_i$。

接下来 $Q$ 行，每行 $2 \sim 3$ 个正整数，表示一次操作，操作格式见【**题目描述**】。
## 输出格式

对于每一次类型为 $2$ 的询问，输出一行一个正整数表示答案。
## 样例

### 样例输入 #1
```
3 4
3 2 1
2 3
1 3 2
2 2
2 3

```
### 样例输出 #1
```
1
1
2

```
## 提示

**【样例解释 #1】**

在修改操作之前，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 2, 1$。

在修改操作之后，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 1, 2$。

注意虽然此时 $a_2 = a_3$，但是我们**不能将其视为相同的元素**。

**【样例 #2】**

见附件中的 `sort/sort2.in` 与 `sort/sort2.ans`。

该测试点数据范围同测试点 $1 \sim 2$。

**【样例 #3】**

见附件中的 `sort/sort3.in` 与 `sort/sort3.ans`。

该测试点数据范围同测试点 $3 \sim 7$。

**【样例 #4】**

见附件中的 `sort/sort4.in` 与 `sort/sort4.ans`。

该测试点数据范围同测试点 $12 \sim 14$。

**【数据范围】**

对于所有测试数据，满足 $1 \le n \le 8000$，$1 \le Q \le 2 \times {10}^5$，$1 \le x \le n$，$1 \le v,a_i \le 10^9$。

对于所有测试数据，保证在所有 $Q$ 次操作中，至多有 $5000$ 次操作属于类型一。

各测试点的附加限制及分值如下表所示。

| 测试点 | $n \le$ | $Q \le$ | 特殊性质 |
|:-:|:-:|:-:|:-:|
| $1 \sim 4$ | $10$ | $10$ | 无 |
| $5 \sim 9$ | $300$ | $300$ | 无 |
| $10 \sim 13$ | $1500$ | $1500$ | 无 |
| $14 \sim 16$ | $8000$ | $8000$| 保证所有输入的 $a_i,v$ 互不相同 |
| $17 \sim 19$ | $8000$ | $8000$ | 无 |
| $20 \sim 22$ | $8000$ | $2 \times 10^5$ | 保证所有输入的 $a_i,v$ 互不相同 |
| $23 \sim 25$ | $8000$ | $2 \times 10^5$ | 无 |


---

---
title: "[传智杯 #4 决赛] 排排队"
layout: "post"
diff: 普及/提高-
pid: P8197
tag: ['Special Judge', 'O2优化', '排序', '构造', '传智杯']
---
# [传智杯 #4 决赛] 排排队
## 题目描述


cyq 在 tsyz 担任了体育老师，负责排队一事。

在 tsyz 中，每个人都有一个身高 $a_{i}$，并且只有**相邻**的两个人可以交换位置。cyq 带领的队伍有 $n$ 个人,他现在要给大家排队形。

给定一个长度为 $n$ 的序列 $b$，一个队形被认为美观，当且仅当对于所有的 $i = 1, 2, 3, \dots n$，$a_{i} =b_{i}$。cyq 想知道，他能否让大家的队形变得美观，并且交换相邻两个人的次数不超过 $n^2$ 次。这个问题把 $cyq$ 难住了，请你帮他来解决这个问题，如果存在合法的交换方案，输出 `YES`，并给出一组方案；否则，输出 `NO`。
## 输入格式

**本题单测试点内有多组测试数据**。

第一行是一个整数 $T$，表示数据组数，对于每组数据：  
第一行是一个整数，表示队伍的长度 $n$。  
第二行有 $n$ 个整数，第 $i$ 个整数表示第 $i$ 个人的身高 $a_i$。  
第三行有 $n$ 个整数，第 $i$ 个整数表示美观队形里第 $i$ 个人的身高 $b_i$。
## 输出格式

对每组数据依次分别输出答案。

对于每组数据，若存在一种方案，则在第一行输出一个 `YES`，否则输出一个 `NO`。

如果输出 `YES`，下面则输出若干行每行两个整数 $i,j$，表示第 $i$ 个同学和第 $j$ 个同学交换位置，显然 $|i-j|=1$。在交换完成后，你还需要输出一行 `0 0` 表示你的操作结束了，请注意数组的下标从 1 开始编号至 $n$。

如果输出 `NO`，则接下来什么都不需要输出。

**请特别注意，对于每组数据，你的操作次数不能超过 $n^2$（不包括 `0 0` 一行），否则将得到 WA(Wrong Answer) 的结果**。
## 样例

### 样例输入 #1
```
3
4
1 2 2 3
3 2 2 1
3
1 2 3
1 2 4
1
1
1

```
### 样例输出 #1
```
YES
4 3
2 3
1 2
3 2
3 4
0 0
NO
YES
0 0

```
## 提示

### 数据规模与约定

对于全部的测试点，保证 $1\leq T \leq 10$，$1\leq n \leq 10^3$，$1\leq a_{i},b_{i}\leq 10^9$，且各个测试点 $n$ 之和不超过 $1000$，即 $\sum n\leq 10^3$。

### 提示
- 请注意大量的输出输出对程序效率造成的影响，不要频繁刷新缓冲区。例如，对于使用 `std::cout` 的 C++ 选手，请使用 `'\n'` 而不是 `std::endl` 来换行；对于 java 选手，请选择高效率的输出方式，如使用 PrintWriter；python 选手可以正常的使用 print 而无需考虑效率问题。
- 请按照输出格式的要求输出您的答案，如果格式不符合要求，返回的评测信息将可能是 TLE、RE、WA、UKE 等任何结果。

### C++ 语言的高效输出样例
```cpp
#include <iostream>
int main() {
  std::ios::sync_with_stdio(false);
  std::cin.tie(0);
  for (int i = 1; i <= 5; ++i) {
    std::cout << i << '\n'; // 注意这里不能使用 std::endl
  }
}
```

### Java 语言的高效输出样例
```java
import java.io.PrintWriter;

public class Main {
  public static void main(String[] args) {
    PrintWriter ot = new PrintWriter(System.out);
    for (int i = 1; i <= 5; ++i) {
      ot.println(i);
    }
    ot.flush(); // 请务必保证在程序结束时运行本条语句，否则在缓冲区的内容无法输出
  }
}


---

---
title: "[蓝桥杯 2020 国 ABC] 答疑"
layout: "post"
diff: 普及/提高-
pid: P8732
tag: ['贪心', '2020', '排序', '蓝桥杯国赛']
---
# [蓝桥杯 2020 国 ABC] 答疑
## 题目描述

有 $n$ 位同学同时找老师答疑。每位同学都预先估计了自己答疑的时间。老师可以安排答疑的顺序，同学们要依次进入老师办公室答疑。

一位同学答疑的过程如下:

1. 首先进入办公室，编号为 $i$ 的同学需要 $s_{i}$ 毫秒的时间。

2. 然后同学问问题老师解答，编号为 $i$ 的同学需要 $a_{i}$ 毫秒的时间。

3. 答疑完成后，同学很高兴，会在课程群里面发一条消息，需要的时间可以忽略。

4. 最后同学收拾东西离开办公室，需要 $e_{i}$ 毫秒的时间。一般需要 $10$ 秒、$20$ 秒或 $30$ 秒，即 $e_{i}$ 取值为 $10000$、$20000$ 或 $30000$。

一位同学离开办公室后，紧接着下一位同学就可以进入办公室了。

答疑从 $0$ 时刻开始。老师想合理的安排答疑的顺序，使得同学们在课程群里面发消息的时刻之和最小。

## 输入格式

输入第一行包含一个整数 $n$，表示同学的数量。

接下来 $n$ 行, 描述每位同学的时间。其中第 $i$ 行包含三个整数 $s_{i}, a_{i}, e_{i}$，意义如上所述。
## 输出格式

输出一个整数，表示同学们在课程群里面发消息的时刻之和最小是多少。
## 样例

### 样例输入 #1
```
3
10000 10000 10000
20000 50000 20000
30000 20000 30000
```
### 样例输出 #1
```
280000
```
## 提示

**【样例说明】**

按照 $1,3,2$ 的顺序答疑，发消息的时间分别是 $20000,80000,180000$ 。

**【评测用例规模与约定】**

对于 $30 \%$ 的评测用例, $1 \leq n \leq 20$ 。

对于 $60 \%$ 的评测用例, $1 \leq n \leq 200$ 。

对于所有评测用例, $1 \leq n \leq 1000,1 \leq s_{i} \leq 60000,1 \leq a_{i} \leq 1000000$, $e_{i} \in\{10000,20000,30000\}$ ，即 $e_{i}$ 一定是 $10000 、 20000 、 30000$ 之一。 

蓝桥杯 2020 年国赛 A 组 H 题（B 组 H 题, C 组 J 题）。


---

---
title: "[蓝桥杯 2022 国 B] 卡牌"
layout: "post"
diff: 普及/提高-
pid: P8800
tag: ['贪心', '二分', '2022', '排序', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 B] 卡牌
## 题目描述

这天，小明在整理他的卡牌。

他一共有 $n$ 种卡牌，第 $i$ 种卡牌上印有正整数数 $i(i \in[1, n])$, 且第 $i$ 种卡牌现有 $a_{i}$ 张。

而如果有 $n$ 张卡牌，其中每种卡牌各一张，那么这 $n$ 张卡牌可以被称为一套牌。小明为了凑出尽可能多套牌，拿出了 $m$ 张空白牌, 他可以在上面写上数 $i$，将其当做第 $i$ 种牌来凑出套牌。然而小明觉得手写的牌不太美观，决定第 $i$ 种牌最多手写 $b_{i}$ 张。

请问小明最多能凑出多少套牌?
## 输入格式

输入共 3 行，第一行为两个正整数 $n$，$m$ 。

第二行为 $n$ 个正整数 $a_{1}, a_{2}, \ldots, a_{n}$ 。

第三行为 $n$ 个正整数 $b_{1}, b_{2}, \ldots, b_{n}$ 。

## 输出格式

一行，一个整数表示答案。
## 样例

### 样例输入 #1
```
4 5
1 2 3 4
5 5 5 5
```
### 样例输出 #1
```
3
```
## 提示

**【样例说明】**

这 $5$ 张空白牌中，拿 $2$ 张写 $1$，拿 $1$ 张写 $2$，这样每种牌的牌数就变为了 $3,3,3,4$，可以凑出 $3$ 套牌，剩下 $2$ 张空白牌不能再帮助小明凑出一套。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据，保证 $n \leq 2000$;

对于 $100 \%$ 的数据，保证 $n \leq 2 \times 10^{5} ; a_{i}, b_{i} \leq n ; m \leq n^{2}$ 。 

蓝桥杯 2022 国赛 B 组 C 题。


---

---
title: "「UOI-R1」智能推荐"
layout: "post"
diff: 普及/提高-
pid: P8893
tag: ['O2优化', '拓扑排序']
---
# 「UOI-R1」智能推荐
## 题目背景

数据已加强。
## 题目描述

现在有 $N$ 道题。

天数的编号从 $0$ 开始，每一天你可以做若干道题，你只能做以前推荐过的或者当天推荐的题（每道题只可以做一次）。第一天，智能推荐会推荐 $p$ 道题。

推荐规则如下：

对于第 $i$ 道题，如果有可能被推荐的话，就会有一个题目集合 $s_i$。当且仅当你把 $s_i$ 中每一道题都做出来并且其中有一道题是当天做的，那么下一天就会推荐第 $i$ 题。

你想做完第 $K$ 道题，问至少第几天你才能满足愿望？

## 输入格式

第一行三个整数 $N,K,p$，含义如题目所述。

第二行 $p$ 个整数，表示第一天推荐的题的题号。

第三行一个整数 $R$，表示有 $R$ 条推荐规则。

接下来 $R$ 行，每行包含一条规则，每行格式如下：

一个整数 $v_i$，表示要推荐的题的题号。接着一个整数 $s_i$，表示要使得这道题被推荐，一共要做的题目数量。接下来 $s_i$ 个整数 $p_i$，表示要做的每道题。

## 输出格式

一个整数表示最少第几天才能满足愿望。

如无论如何，第 $K$ 题都无法完成，则输出 `-1`。

## 样例

### 样例输入 #1
```
5 5 2
1 2
3
3 2 1 2
4 3 1 2 3
5 3 1 3 4
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
1 1 1
1
0
```
### 样例输出 #2
```
0
```
### 样例输入 #3
```
7 7 2
1 2
2
3 2 1 2
6 2 1 2
```
### 样例输出 #3
```
-1
```
### 样例输入 #4
```
见文件附件的 rec4.in
```
### 样例输出 #4
```
见文件附件的 rec4.ans
```
## 提示

**【样例解释 #1】**

第 $0$ 天推了第 $1,2$ 题，都做了。

第 $1$ 推了第 $3$ 题，做了。

第 $2$ 推了第 $4$ 题，做了。

第 $3$ 推了第 $5$ 题，也就是第 $K$ 题，做了。

第 $3$ 天即可做完第 $K$ 题目。

**【样例解释 #2】**

第 $0$ 天推了第 $1$ 题，也就是第 $K$ 题，做了。
第 $0$ 天就做完了。

**【数据范围】**

以下记 $\left| s_i \right|$ 表示推荐规则中第 $i$ 条规则中，如果 $v_i$ 被推荐，要做的所有题。

对于 $30\%$ 的数据，保证 $1 \leq N \leq 100$。

对于 $50\%$ 的数据，保证没有环。

对于 $100\%$ 的数据，保证 $1 \le K,s_i,p_i,v_i \le N \le 5\times 10^3$，$0 \leq R \leq 5 \times 10^3$。$|s_i|$ 互不相同，且对于每一个 $|s_i|$ 都有 $p_i$ 互不相同，$v_i$ 互不相同。



---

---
title: "[PA 2021] Sumy"
layout: "post"
diff: 普及/提高-
pid: P9050
tag: ['贪心', '二分', '2021', '排序', 'PA（波兰）']
---
# [PA 2021] Sumy
## 题目描述

有 $n$ 条鱼，其中第 $i$ 条的质量为 $a_i$ 克。

$x$ 能吃掉 $y$ 当且仅当 $a_x > a_y$。

若 $x$ 吃了 $y$，$y$ 会消失，$a_x$ 会变为 $a_x + a_y$。

你可以随意指定吃鱼的顺序，直至留下一条鱼为止。

求每一条鱼是否可能被作为最后**唯一**的鱼留下。**若最终无法只剩下一条鱼，则每条鱼均不满足此条件。**
## 输入格式

第一行，一个整数 $n$；

第二行，$n$ 个整数 $a_1, a_2, \cdots, a_n$。
## 输出格式

一行，一个长度为 $n$ 的字符串 $s$，其中 $s_i = \text{T}$ 表示第 $i$ 条鱼满足上述条件，$s_i = \text{N}$ 表示第 $i$ 条鱼不满足上述条件。
## 样例

### 样例输入 #1
```
6
2 7 1 8 2 8
```
### 样例输出 #1
```
NTNTNT
```
### 样例输入 #2
```
3
5 4 4
```
### 样例输出 #2
```
TNN
```
## 提示

#### 样例 #1 解释
下面用 $x \rightarrow y$ 表示 $x$ 吃 $y$。

留下 $2$ 号鱼的一种方案如下：$2 \rightarrow 1, 2 \rightarrow 3, 2 \rightarrow 4, 2 \rightarrow 5, 2 \rightarrow 6$。
#### 数据范围
对于 $100\%$ 的数据，$1 \leq n \leq 5 \times 10^5$，$1 \leq a_i \leq 10^9$。


---

---
title: "「TAOI-1」拼凑的断音"
layout: "post"
diff: 普及/提高-
pid: P9217
tag: ['Special Judge', 'O2优化', '排序', '期望']
---
# 「TAOI-1」拼凑的断音
## 题目背景

> flick tap flick tap 面を滑って \
> swipe tap swipe tap 「A.R→T」\
> flick tap flick tap 開いて叩いて \
> swipe swipe swipe swipe …もう嫌だな \
> ズルズル 糸が呟く
## 题目描述

你的面前有 $n$ 个音符，它们的动听程度由数列 $\{a_n\}$ 描述。

现在有 $n$ 种魔法，第 $i$ 种魔法会让 $a_i$ 增加 $s(s \gt 0)$。每种魔法的成功几率都为 $\dfrac{p}{q}$，并且彼此独立。

求在施加魔法情况下，最终最动听的音符的动听程度（即，$\max\limits_{i=1}^n a_i$）的期望。

**本题目有 Special Judge，你可以用两种不同的方式输出答案，具体见【输出格式】处**。
## 输入格式

第一行为四个整数 $n, p, q, s$。

第二行为 $n$ 个整数 $a_i$，由空格隔开。
## 输出格式

**本题有两种不同的输出格式**。

- 第一种输出格式：

  请在第一行输出 `1`。
  
  接着，在第二行输出所求的期望，它应当是一个实数。
  
  如果您的答案与标准答案相差不超过 $10^{-4}$，则判定为正确。但由于众所周知的浮点数的误差，不保证评测结果百分百准确。如果您确信自己的程序正确但无法 AC，可以尝试使用第二种输出方式。

- 第二种输出格式：
  
  请在第一行输出 `2`。
  
  接下来，若你求出的期望是 $\dfrac{m}{n}$（显然期望为一个有理数），则请在第二行输出它对 $998244353$ 取模的结果，即一个 $[0, 998244353)$ 的整数 $x$，使得 $xn \equiv m \pmod {998244353}$。
## 样例

### 样例输入 #1
```
3 1 3 2
1 2 3
```
### 样例输出 #1
```
1
3.888889
```
### 样例输入 #2
```
3 1 3 2
1 2 3
```
### 样例输出 #2
```
2
554580200
```
## 提示

### 数据范围

**本题采用捆绑测试**。

- Subtask 1（20 points）：$n \leq 15$。
- Subtask 2（15 points）：保证 $\forall i \in [1, n), a_i \leq a_{i+1}$，$a_n \geq a_{n-1}+s$。
- Subtask 3（15 points）：保证 $\forall i,j\in[1,n], a_i = a_j$。
- Subtask 4（50 points）：无特殊限制。

对于所有测试数据，$1 \leq n \leq 10^5$，$1 \leq p \lt q \leq 10^7$，$1 \leq a_i,s \leq 10^7$。

### 样例解释

注意到两个样例的输入相同，区别仅在于输出格式不同。

以下列举了所有可能的魔法施加情况和其对应的最大值以及出现概率：

| 魔法情况 | 动听度最大值 | 出现概率 | 对期望的贡献 |
| :------: | :----------: | :------: | :----------: |
|${\color{black}1},{\color{black}2},{\color{black}3}$|$3$|$\dfrac{8}{27}$|$\dfrac{8}{9}$|
|${\color{red}3},{\color{black}2},{\color{black}3}$|$3$|$\dfrac{4}{27}$|$\dfrac{4}{9}$|
|${\color{black}1},{\color{red}4},{\color{black}3}$|$4$|$\dfrac{4}{27}$|$\dfrac{16}{27}$|
|${\color{black}1},{\color{black}2},{\color{red}5}$|$5$|$\dfrac{4}{27}$|$\dfrac{20}{27}$|
|${\color{red}3},{\color{red}4},{\color{black}3}$|$4$|$\dfrac{2}{27}$|$\dfrac{8}{27}$|
|${\color{red}3},{\color{black}2},{\color{red}5}$|$5$|$\dfrac{2}{27}$|$\dfrac{10}{27}$|
|${\color{black}1},{\color{red}4},{\color{red}5}$|$5$|$\dfrac{2}{27}$|$\dfrac{10}{27}$|
|${\color{red}3},{\color{red}4},{\color{red}5}$|$5$|$\dfrac{1}{27}$|$\dfrac{5}{27}$|

可得，最终的答案为 $\dfrac{35}{9}$。

+ 若使用第一种输出方式，它的值约为 $3.888889$。
+ 若使用第二种输出方式，可以发现 $554580200 \times 9 \equiv 35 \pmod {998244353}$。


---

---
title: "「MXOI Round 1」涂色"
layout: "post"
diff: 普及/提高-
pid: P9583
tag: ['模拟', '洛谷原创', 'O2优化', '排序', '差分', '洛谷月赛']
---
# 「MXOI Round 1」涂色
## 题目描述

小 C 正在用彩铅给一张 $n$ 行 $m$ 列的方格纸涂色。初始时，所有方格都是空白的。

他一共要进行 $q$ 次涂色，每次涂色会选取一行或一列，给这一行或这一列的所有方格都添加 $1$ 层颜色。

小 C 喜欢浅色，所以他会在每次涂色结束后，把所有被涂上 $k$ 层颜色的方格的颜色都擦掉，让这些方格都变成空白的。

小 C 想知道，在最终共有多少方格被涂上了颜色。
## 输入格式

第一行四个整数 $n,m,q,k$。

接下来 $q$ 行，每行两个整数 $op,x$。

若 $op=1$，则表示给第 $x$ 行的所有方格都添加 $1$ 层颜色；  
若 $op=2$，则表示给第 $x$ 列的所有方格都添加 $1$ 层颜色。
## 输出格式

一个整数，表示在最终共有多少方格被涂上了颜色。
## 样例

### 样例输入 #1
```
3 4 5 3
1 3
2 4
1 2
1 3
2 2
```
### 样例输出 #1
```
8
```
## 提示

#### 【样例解释 #1】

第 $1$ 行第 $1$ 列的方格没有被涂上颜色，第 $1$ 行第 $2$ 列的方格被涂上了 $1$ 层颜色，第 $1$ 行第 $3$ 列的方格没有被涂上颜色，第 $1$ 行第 $4$ 列的方格被涂上了 $1$ 层颜色；

第 $2$ 行第 $1$ 列的方格被涂上了 $1$ 层颜色，第 $2$ 行第 $2$ 列的方格被涂上了 $2$ 层颜色，第 $2$ 行第 $3$ 列的方格被涂上了 $1$ 层颜色，第 $2$ 行第 $4$ 列的方格被涂上了 $2$ 层颜色；

第 $3$ 行第 $1$ 列的方格被涂上了 $2$ 层颜色，第 $3$ 行第 $2$ 列的方格的颜色被擦掉了，第 $3$ 行第 $3$ 列的方格被涂上了 $2$ 层颜色，第 $3$ 行第 $4$ 列的方格的颜色也被擦掉了；

最终，共有 $8$ 个方格被涂上了颜色。

#### 【样例 #2】

见附加文件中的 `paint/paint2.in` 与 `paint/paint2.ans`。

该样例满足测试点 $1$ 的限制。

#### 【样例 #3】

见附加文件中的 `paint/paint3.in` 与 `paint/paint3.ans`。

该样例满足测试点 $5$ 的限制。

#### 【样例 #4】

见附加文件中的 `paint/paint4.in` 与 `paint/paint4.ans`。

该样例满足测试点 $20$ 的限制。

#### 【数据范围】

对于 $100\%$ 的数据，$1 \le n,m \le 2\times 10^5$，$1 \le k \le q \le 5 \times 10^5$，$op \in \{1,2\}$，保证当 $op=1$ 时 $1 \le x \le n$，当 $op=2$ 时 $1 \le x \le m$。

|测试点编号|$n,m \le$|$q \le$|特殊性质|
|:---:|:---:|:---:|:---:|
|$1\sim4$|$3000$|$3000$|无|
|$5\sim9$|$3000$|$5\times10^5$|无|
|$10\sim12$|$2\times10^5$|$5\times10^5$|A|
|$13\sim16$|$2\times10^5$|$5\times10^5$|B|
|$17\sim20$|$2\times10^5$|$5\times10^5$|无|

特殊性质 A：保证 $op=1$。

特殊性质 B：保证 $k=2$。


---

---
title: "「MXOI Round 2」排名"
layout: "post"
diff: 普及/提高-
pid: P9587
tag: ['动态规划 DP', '贪心', '洛谷原创', 'O2优化', '排序', '前缀和', '洛谷月赛']
---
# 「MXOI Round 2」排名
## 题目描述

小 C 有一个长度为 $n$ 的数组 $a$。

小 C 定义，$f(i)$ 为 $a_i$ 的前排名，其中 $f(i)$ 等于数组 $a$ 中大于 $a_i$ 的元素个数加 $1$。

小 C 还定义，$g(i)$ 为 $a_i$ 的后排名，其中 $g(i)$ 等于数组 $a$ 中大于等于 $a_i$ 的元素个数。

每次操作，小 C 需要选择一个不大于 $n$ 的正整数 $t$，并将 $a_t$ 的值增加 $1$。

小 C 想知道，对于每一个 $1 \le i \le n$，想要使 $f(i) \le k \le g(i)$，最少需要进行多少次操作？

可以证明一定存在一种操作方案使得 $f(i) \le k \le g(i)$。
## 输入格式

第一行三个整数 $c,n,k$，其中 $c$ 表示测试点编号。$c=0$ 表示该测试点为样例。

第二行 $n$ 个整数，表示给定的数组 $a$。
## 输出格式

共 $n$ 行，每行一个整数，其中第 $i$ 行的整数表示想要使 $f(i) \le k \le g(i)$ 所至少需要进行的操作数。
## 样例

### 样例输入 #1
```
0 6 3
1 1 4 5 1 4
```
### 样例输出 #1
```
3
3
0
2
3
0
```
## 提示

#### 【样例解释 #1】

当 $i=1$ 时，小 C 可以选择 $t=1$ 并进行 $3$ 次操作。此时 $f(i)=2$，$g(i)=4$，满足 $f(i) \le k \le g(i)$。可以证明此时小 C 至少需要进行 $3$ 次操作。

当 $i=4$ 时，小 C 可以选择 $t=3$ 进行 $1$ 次操作，再选择 $t=6$ 进行 $1$ 次操作。此时 $f(i)=1$，$g(i)=3$，满足 $f(i) \le k \le g(i)$。可以证明此时小 C 至少需要进行 $2$ 次操作。

#### 【样例 #2】

见附加文件中的 `rank/rank2.in` 与 `rank/rank2.ans`。

该样例满足测试点 $7$ 的限制。

#### 【样例 #3】

见附加文件中的 `rank/rank3.in` 与 `rank/rank3.ans`。

该样例满足测试点 $20$ 的限制。

#### 【数据范围】

对于 $100\%$ 的数据，$1 \le k \le n \le 5 \times 10^5$，$1 \le a_i \le 10^9$。

|测试点编号|$n \le$|$a_i \le$|特殊性质|
|:---:|:---:|:---:|:---:|
|$1\sim6$|$2000$|$10^9$|A|
|$7\sim10$|$2000$|$10^9$|无|
|$11\sim14$|$5\times10^5$|$10^9$|B|
|$15\sim20$|$5\times10^5$|$10^9$|无|

特殊性质 A：保证对于所有的 $1 \le i \lt n$，都有 $a_i \ge a_{i+1}$。

特殊性质 B：保证 $k=1$。


---

---
title: "[USACO20OPEN] Cowntact Tracing B"
layout: "post"
diff: 普及/提高-
pid: P9954
tag: ['模拟', '2020', 'USACO', 'O2优化', '枚举', '排序']
---
# [USACO20OPEN] Cowntact Tracing B
## 题目描述

由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们（编号为 $1\ldots N$）的健康。

最近，Farmer John 对他的所有奶牛进行了检测，发现有一部分奶牛对该疾病的检测结果呈阳性。利用牛棚内的视频监控，他得以查看最近的奶牛之间的互动行为，结果发现奶牛们互相打招呼时，她们会握蹄，不幸的是这是一种会将疾病从一头奶牛传播给另一头奶牛的行为。Farmer John 汇总了一个添加了时间戳的清单，每条数据的形式为 $(t,x,y)$，表示在时间 $t$，奶牛 $x$ 与奶牛 $y$ 握了蹄。Farmer John 同时还知道以下信息：

（一）他的农场上恰有一头奶牛最初带有携带疾病（我们将这头奶牛称为“零号病人”）。

（二）一旦一头奶牛被感染，她会在接下来的 $K$ 次握蹄中传染疾病（可能会与同一头奶牛握蹄多次）。握蹄 $K$ 次后，她不再在此后的握蹄中传染疾病（因为此时她意识到了她会传染疾病，于是会仔细地洗蹄）。

（三）一旦一头奶牛被感染，她会持续处于被感染状态。

不幸的是，Farmer John 不知道他的 $N$ 头奶牛中的哪一头是零号病人，也不知道 $K$ 的值！基于他的数据，请帮助他缩小这些未知量的范围。保证至少有一种可能的情况。 
## 输入格式

输入的第一行包含 $N$（$2\le N\le 100$）和 $T$（$1\le T\le 250$）。下一行包含一个长为 $N$ 的字符串，每个字符均为 $0$ 或 $1$，表述目前 Farmer John 的 $N$ 头奶牛的状态——$0$ 表示一头健康的奶牛，$1$ 表示一头染病的奶牛。以下 $T$ 行每行包含 Farmer John 的互动清单中的一条记录，由三个整数 $t$、$x$ 和 $y$ 组成，其中 $t$ 为一次互动发生的正整数时间（$t\le 250$），$x$ 和 $y$ 为范围 $1\ldots N$ 内的不同整数，表示时间 $t$ 握蹄的两头奶牛。在每一时刻至多只有一次互动发生。 
## 输出格式

输出一行，包含三个整数 $x$、$y$ 和 $z$，其中 $x$ 为可能为零号病人的奶牛数量，$y$ 为与数据一致的最小可能 $K$ 值，$z$ 为与数据一致的最大可能 $K$ 值（如果通过数据无法推断 $K$ 的上界，$z$ 输出 `Infinity`）。注意可能有 $K=0$。 
## 样例

### 样例输入 #1
```
4 3
1100
7 1 2
5 2 3
6 2 4
```
### 样例输出 #1
```
1 1 Infinity
```
## 提示

### 样例解释 1

唯一可能是零号病人的是奶牛 $1$。对于所有的 $K>0$，奶牛 $1$ 在时刻 $7$ 感染奶牛 $2$，而奶牛 $3$ 和奶牛 $4$ 均不会被感染。 


---

---
title: "[USACO20DEC] Stuck in a Rut B"
layout: "post"
diff: 普及/提高-
pid: P9957
tag: ['2020', 'USACO', 'O2优化', '枚举', '排序']
---
# [USACO20DEC] Stuck in a Rut B
## 题目描述

Farmer John 最近扩大了他的农场，从奶牛们的角度看来这个农场相当于是无限大了！奶牛们将农场上放牧的区域想作是一个由正方形方格组成的无限大二维方阵，每个方格中均有美味的草（将每个方格看作是棋盘上的一个方格）。Farmer John 的 $N$ 头奶牛（$1\le N\le 50$）初始时位于不同的方格中，一部分朝向北面，一部分朝向东面。

每一小时，每头奶牛会执行以下二者之一：

 - 如果她当前所在的方格里的草已经被其他奶牛吃掉了，则她会停下。
 - 吃完她当前所在的方格中的所有草，并向她朝向的方向移动一个方格。

经过一段时间，每头奶牛的身后会留下一条被啃秃了的轨迹。

如果两头奶牛在一次移动中移动到了同一个有草的方格，她们会分享这个方格中的草，并在下一个小时继续沿她们朝向的方向移动。

请求出每头奶牛吃到的草的数量。有些奶牛永远不会停下，从而吃到无限多的草。 
## 输入格式

输入的第一行包含 $N$。以下 $N$ 行，每行描述一头奶牛的起始位置，包含一个字符 `N`（表示朝向北面） 或 `E`（表示朝向东面），以及两个非负整数 $x$ 和 $y$（$0\le x\le 10^9$，$0\le y\le 10^9$）表示方格的坐标。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。

为了使方向和坐标尽可能明确，如果一头奶牛位于方格 $(x,y)$ 并向北移动，她会到达方格 $(x,y+1)$。如果她向东移动，她会到达方格 $(x+1,y)$。
## 输出格式

输出 $N$ 行。输出的第 $i$ 行包含输入中的第 $i$ 头奶牛吃到草的方格的数量。如果一头奶牛可以吃到无限多的草，为这头奶牛输出 `Infinity`。
## 样例

### 样例输入 #1
```
6
E 3 5
N 5 3
E 4 6
E 10 4
N 11 2
N 8 1
```
### 样例输出 #1
```
5
3
Infinity
Infinity
2
5
```
## 提示

### 测试点性质

 - 测试点 $2-5$ 中，所有坐标不超过 $100$。
 - 测试点 $6-10$ 没有额外限制。


---


---
title: "[信息与未来 2019] 新斐波那契数列"
layout: "post"
diff: 普及/提高-
pid: B3752
tag: ['数学', '2019', '二分', '江苏', '斐波那契数列', '信息与未来']
---
# [信息与未来 2019] 新斐波那契数列
## 题目描述

给定正整数 $a(a\ge1)$，新斐波那契数列 $f_a$ 按如下方式定义：
- $f_a(1) = 1$；
- $f_a(2) = a$；
- $f_a(n) = f_a(n − 1) + f_a(n − 2)\ (n > 2)$。

例如，给定 $a = 4$，有 $f_4(1) = 1, f_4(2) = 4, f_4(3) = 5, f_4(4) = 9, f_4(5) = 14, \cdots$ 现在已知新斐波那契数列中的一项 $x$，但并不知道 $n$ 和 $a$ 的值是多少。请你求出所有可能的 $n,a(n\ge2)$ 满足 $f_a(n) = x$。
## 输入格式

你需要在一个测试数据中处理多个新斐波那契数列问题。输入第一行 $T$ 表示问题的数量。

接下来 $T$ 行， 每行一个整数：待求解的 $x$。
## 输出格式

对于每个新斐波那契数列问题，按照 $n$ 从小到大的顺序，输出所有可能的 $n,a$ 满足 $f_a(n) = x$。每行输出一对 $n$ 和 $a$，由一个空格分隔。
## 样例

### 样例输入 #1
```
2
9
123
```
### 样例输出 #1
```
2 9
3 8
4 4
2 123
3 122
4 61
6 24
10 3
```
## 提示

对于 $60\%$ 的测试数据，有 $1\le x\le10^6$。

对于 $100\%$ 的测试数据，有 $2\le x\le10^9,1\le T\le20$。
> 本题原始满分为 $15\text{pts}$。


---

---
title: "[ROIR 2023] 斐波那契乘积 (Day 1)"
layout: "post"
diff: 普及/提高-
pid: P10095
tag: ['搜索', '数学', '递归', '2023', 'Special Judge', '枚举', '深度优先搜索 DFS', '斐波那契数列', 'ROIR（俄罗斯）']
---
# [ROIR 2023] 斐波那契乘积 (Day 1)
## 题目背景

翻译自 [ROIR 2023 D1T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。

斐波那契数指斐波那契数列（$f_0=1,f_1=1,f_i=f_{i-2}+f_{i-1}$）中出现的数。
## 题目描述

给定一个自然数 $n$，求出将其表示为若干个大于 $1$ 的斐波那契数的乘积的方案数。
## 输入格式

第一行一个数 $t$，表示数据组数。

接下来 $t$ 行，每行输入一个数 $n$。
## 输出格式

对于每组测试数据，输出一个数表示答案。
## 样例

### 样例输入 #1
```
5
2
7
8
40
64
```
### 样例输出 #1
```
1
0
2
2
3
```
## 提示

样例解释：
- $2=2$。
- $7$ 无法被表示为斐波那契乘积。
- $8=8=2\times2\times2$。
- $40=5\times8=2\times2\times2\times5$。
- $64=8\times8=2\times2\times2\times8=2\times2\times2\times2\times2\times2$。

本题使用捆绑测试。

| 子任务编号 | 分值 | $2\le n\le$ |
| :----------: | :----------: | :----------: |
| $1$ | $15$ | $100$ |
| $2$ | $17$ | $10^5$ |
| $3$ | $9$ | $n$ 是 $2$ 的整数次幂 |
| $4$ | $38$ | $10^9$ |
| $5$ | $21$ | $10^{18}$ |

对于所有数据，$1\le t\le50$，$2\le n\le10^{18}$。


---

---
title: "终于结束的起点"
layout: "post"
diff: 普及/提高-
pid: P4994
tag: ['递推', '枚举', '斐波那契数列', '洛谷月赛']
---
# 终于结束的起点
## 题目背景

> 终于结束的起点  
> 终于写下句点  
> 终于我们告别  
> 终于我们又回到原点  
> ……

一个个 OIer 的竞赛生涯总是从一场 NOIp 开始，大多也在一场 NOIp 中结束，好似一次次轮回在不断上演。  
如果这次 NOIp 是你的起点，那么祝你的 OI 生涯如同夏花般绚烂。  
如果这次 NOIp 是你的终点，那么祝你的 OI 回忆宛若繁星般璀璨。  
也许这是你最后一次在洛谷上打比赛，也许不是。  
不过，无论如何，祝你在一周后的比赛里，好运。

当然，这道题也和轮回有关系。
## 题目描述

广为人知的斐波拉契数列 $\mathrm{fib}(n)$ 是这么计算的

$$
\mathrm{fib}(n)=\begin{cases}
0,& n=0 \\
1,& n=1 \\
\mathrm{fib}(n-1) + \mathrm{fib}(n-2),& n>1
\end{cases}
$$

也就是 $0, 1, 1, 2, 3, 5, 8, 13 \cdots$，每一项都是前两项之和。

小 F 发现，如果把斐波拉契数列的每一项对任意大于 $1$ 的正整数 $M$ 取模的时候，数列都会产生循环。

当然，小 F 很快就明白了，因为 ($\mathrm{fib}(n - 1) \bmod M$) 和 ($\mathrm{fib}(n - 2) \bmod M)$ 最多只有 $M ^ 2$ 种取值，所以在 $M  ^ 2$ 次计算后一定出现过循环。

甚至更一般地，我们可以证明，无论取什么模数 $M$，最终模 $M$ 下的斐波拉契数列都会是 $0, 1, \cdots, 0, 1, \cdots$。

现在，给你一个模数 $M$，请你求出最小的 $n > 0$，使得 $\mathrm{fib}(n) \bmod M = 0, \mathrm{fib}(n + 1) \bmod M = 1$。
## 输入格式

输入一行一个正整数 $M$。
## 输出格式

输出一行一个正整数 $n$。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
6
```
### 样例输出 #2
```
24
```
## 提示

#### 样例 1 解释

斐波拉契数列为 $0, 1, 1, 2, 3, 5, 8, 13, 21, 34, \cdots$，在对 $2$ 取模后结果为 $0, 1, 1, 0, 1, 1, 0, 1, 1, 0, \cdots$。

我们可以发现，当 $n = 3$ 时，$f(n) \bmod 2= 0, f(n + 1) \bmod 2 = 1$，也就是我们要求的 $n$ 的最小值。

#### 数据范围

对于 $30\%$ 的数据，$M \leq 18$；

对于 $70\%$ 的数据，$M \leq 2018$；

对于 $100\%$ 的数据，$2 \leq M \leq 706150=\verb!0xAC666!$。

#### 提示

如果你还不知道什么是取模 $(\bmod)$，那我也很乐意告诉你，模运算是求整数除法得到的余数，也就是竖式除法最终「除不尽」的部分，也即
$$a \bmod M =k \iff a = bM + k\ (M > 0, 0 \leq k < M)$$
其中 $a, b, k$ 都是非负整数。

如果你使用 `C` / `C++`，你可以使用 `%` 来进行模运算。

如果你使用 `Pascal`，你可以使用 `mod` 来进行模运算。


---


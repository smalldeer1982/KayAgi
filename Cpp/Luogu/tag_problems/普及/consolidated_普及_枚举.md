---
title: "[NICA #2] 回来吧我的小波"
layout: "post"
diff: 普及/提高-
pid: B3832
tag: ['模拟', '数学', 'O2优化', '枚举']
---
# [NICA #2] 回来吧我的小波
## 题目背景

小波我错了，你快回来吧！
## 题目描述

给定一个仅包含数字 $1,2,3,4,5,6,7,8,9$ 的数字串 $s$，你要选择两个不交区间 $[l_1,r_1],[l_2,r_2](1\le l_1\le r_1<l_2\le r_2\le |s|)$，设 $[l_1,r_1]$ 区间串取出来的数字为 $x$，$[l_2,r_2]$ 区间串取出来的数字为 $y$，要求 $x|y$。如果存在这样两个不交区间，那么我们称数字串 $s$ 是好的。（这里的 $|$ 表示整除，你可以理解为 $x$ 为 $y$ 的一个因数）

现在给定一个仅包含数字 $1,2,3,4,5,6,7,8,9$ 的数字串 $S$，询问它有多少个子串是好的。（这里的子串**不要求**是本质不同的）
## 输入格式

输入仅一行一个仅包含 $1,2,3,4,5,6,7,8,9$ 的数字串 $S$。
## 输出格式

输出一个正整数，表示好的子串数量。
## 样例

### 样例输入 #1
```
327
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
114514
```
### 样例输出 #2
```
12
```
## 提示

#### 样例1解释

只有一个好串 `327`，你可以选择两个不交区间 $[1,1],[2,3]$，取出来的数字分别是 $3$ 和 $27$，显然 $3$ 是 $27$ 的一个因数，所以这个串是好串。

其他子串 `3`，`2`，`7`，`32`，`27` 都不是好的，因为不存在这样的两个不交区间。

#### 样例2解释

共有 $12$ 个好串，分别为 `114514`、`11451`、`1145`、`114`、`11`、`14514`、`1451`、`145`、`14`、`4514`、`514`、`14`。（注意到里面有两个 `14`，但是由于它们位置不同，我们还是认为这是两个不同的子串）

#### 数据范围

对于所有数据，保证 $2\le |S|\le 10^6$。


---

---
title: "[信息与未来 2024] 间谍卫星"
layout: "post"
diff: 普及/提高-
pid: B3980
tag: ['搜索', '数学', '2024', '江苏', 'Special Judge', '枚举', '广度优先搜索 BFS', '信息与未来']
---
# [信息与未来 2024] 间谍卫星
## 题目描述

Dr. X 研制的间谍卫星拍摄到了许多 U 国建筑的照片。为了找出其中的军事设施，Dr. X 需要估算建筑的大小。Dr. X 发现，所有间谍卫星拍摄的照片都恰好包含一个完整的正方形，其中建筑边界上的像素被标记为了白色（用 $1$ 表示），其余像素被标记为了黑色（用 $0$ 表示）。一些照片的案例如下：

![](https://cdn.luogu.com.cn/upload/image_hosting/5ponzg18.png)

你的任务是根据拍摄的照片估算被摄正方形的**边长** (米)。照片中的每个像素都代表一个一米乘一米的正方形。
## 输入格式

输入数据第一行包含一个整数 $n$，代表间谍卫星拍摄照片的数量，随后是 $n$ 张照片，其中每张照片 $128$ 行，每行 $128$ 个字符，$1$ 表示白色，$0$ 表示黑色。两张照片之间有一个空行。
## 输出格式

为每张照片输出一个整数或小数，代表估计的正方形边长。输入数据保证每张照片中都恰好只包含一个正方形，且正方形的边界完全在照片内。
## 样例

### 样例输入 #1
```
见附件中的 sample.in
```
### 样例输出 #1
```
53
```
## 提示

本题仅有一个 $n\leq 100$ 的测试数据，且测试数据和样例数据的生成方式相同。

当你对一幅照片估计的边长和实际建筑边长差距不超过 $2$ 时，则认为估计正确。若估计正确的照片比例 $A > 0.5$，本题得分为 $(A − 0.5) \times 30$ 向下取整，否则得零分。

我们在生成每张照片时，都先在平面上生成一个随机的、边长为整数、边界宽度为 $1$ 像素的正方形，然后“拍摄”得到它的照片。

>本题原始满分为 $15\text{pts}$。


---

---
title: "[信息与未来 2016] 方格取数"
layout: "post"
diff: 普及/提高-
pid: B4140
tag: ['搜索', '2016', '江苏', '枚举', '信息与未来']
---
# [信息与未来 2016] 方格取数
## 题目描述

在 $n$ 行 $m$ 列的方格矩阵中，每个方格都包含一个数字。小明可以从任意方格出发开始移动。每次移动可以移到与当前方格有一条边相邻的方格（即向上、下、左或右方向移动 $1$ 格，且不能移出边界）。除此之外，你移动到的方格中的数字必须比当前方格中的数字更大。

请你帮助小明编程规划移动路径，使路径上经过的所有数字之和最大。
## 输入格式

一行三个正整数 $n,m,s$。

本题方格 $a$ 中的数据根据输入的初始数字 $s$ 按照如下算法生成：

$$
\begin{aligned}
&\text{for } i=1\text{ to } n\\
&\quad\text{for } j=1\text{ to } m\\
&\qquad s\gets(s\times345) \bmod 19997\\
&\qquad a_{i,j}\gets (s\bmod 10)+1\\
&\quad \text{end for}\\
&\text{end for}
\end{aligned}
$$
## 输出格式

所有合法路径中的最大数字和。
## 样例

### 样例输入 #1
```
4 5 97
```
### 样例输出 #1
```
24
```
### 样例输入 #2
```
40 50 1
```
### 样例输出 #2
```
47
```
## 提示

### 样例 $\textbf 1$ 解释
样例数据 1 对应的矩阵如下。图中路径数字之和 $4+5+7+8=24$。
$$
\begin{array}{|c|c|c|c|c|}\hline 
9 & 7 & 10 & 10 & 8\\\hline
2 & 9 & 2 & 5 &3\\\hline
2 & 5 & \red5 & \red7 & 7\\\hline
5 & 8 & \red4 & \red8 & 5\\\hline
\end{array}
$$
### 数据范围
$1\le n,m\le 100,1\le s\le 19997$。
> 本题原始满分为 $20\text{pts}$。


---

---
title: "[信息与未来 2016] 素数分解"
layout: "post"
diff: 普及/提高-
pid: B4141
tag: ['搜索', '2016', '江苏', '枚举', '信息与未来']
---
# [信息与未来 2016] 素数分解
## 题目描述

素数，又称质数，是指除 $1$ 和其自身之外，没有其他约数的正整数。例如，$2,3,5,7,13$ 都是质数，而 $4,9,12,18$ 则不是。

虽然素数不能分解成除 $1$ 和其自身之外整数的乘积，但却可以分解成更多素数的和。你需要编程求出一个正整数最多能分解成多少个互不相同的素数的和。
## 输入格式

一行一个正整数 $n$。
## 输出格式

一行一个正整数，表示 $n$ 最多能分解成多少个不同的素数的和。
## 样例

### 样例输入 #1
```
21
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
128
```
### 样例输出 #2
```
9
```
## 提示

### 样例 $\textbf 1$ 解释
$21=2+3+5+11$。
### 数据范围
$10\le n\le 200$。

**保证有解。**
> 本题原始满分为 $20\text{pts}$。


---

---
title: "[BCSP-X 2024 12 月小学高年级组] 质数补全"
layout: "post"
diff: 普及/提高-
pid: B4158
tag: ['2024', '北京', '枚举', '深度优先搜索 DFS', '筛法', 'BCSP-X']
---
# [BCSP-X 2024 12 月小学高年级组] 质数补全
## 题目描述

Alice 在纸条上写了一个质数，第二天再看时发现有些地方污损看不清了。

- 在大于 $1$ 的自然数中，除了 $1$ 和它本身以外不再有其他因数的自然数称为质数

请你帮助 Alice 补全这个质数，若有多解输出数值最小的，若无解输出 $-1$。

例如纸条上的数字为 $\tt{1*}$（$\tt{*}$ 代表看不清的地方），那么这个质数有可能为 $11, 13, 17, 19$，其中最小的为 $11$。
## 输入格式

第一行 $1$ 个整数 $t$，代表有 $t$ 组数据。

接下来 $t$ 行，每行 $1$ 个字符串 $s$ 代表 Alice 的数字，仅包含数字或者 $\tt{*}$，并且保证首位不是 $\tt{*}$ 或者 $0$。
## 输出格式

输出 $t$ 行，每行 $1$ 个整数代表最小可能的质数，或者 $-1$ 代表无解。
## 样例

### 样例输入 #1
```
10
1*
3**
7**
83*7
2262
6**1
29*7
889*
777*
225*
```
### 样例输出 #1
```
11
307
701
8317
-1
6011
2917
8893
-1
2251
```
### 样例输入 #2
```
10
4039***
2***5*5
4099961
25**757
7***0**
1***00*
41811*9
6***0*7
8***1**
6561*59
```
### 样例输出 #2
```
4039019
-1
4099961
2509757
7000003
1000003
4181129
6000047
8000101
6561259
```
## 提示

### 样例 3-6

参考附件中的样例。

### 数据范围

$|s|$ 代表 $s$ 串的长度，对于所有数据，$1 \leq t \leq 10, 1 \leq |s| \leq 7$，$s$ 中仅包含数字或者 $\tt{*}$，并且保证首位不是 $\tt{*}$ 或者 $0$。

本题采用捆绑测试，你必须通过子任务中的所有数据点以及其依赖的子任务，才能获得子任务对应的分数。

| 子任务编号 | 分值 | $\mid s\mid$ | 特殊性质 | 子任务依赖 |
| :----------: | :----------: | :----------: | :----------: | :----------: |
| $1$ | $35$ | $\leq 7$ | $s$ 中没有 $\tt{*}$ |  |
| $2$ | $30$ | $\leq 4$ |  |  |
| $3$ | $24$ | $\leq 7$ | $s$ 中至多包含 $1$ 个 $\tt{*}$ | $1$ |
| $4$ | $11$ | $\leq 7$ |  | $1,2,3$ |



---

---
title: "「GXPC-S 2024」扫雷"
layout: "post"
diff: 普及/提高-
pid: B4167
tag: ['模拟', '搜索', '2024', '枚举', '广西']
---
# 「GXPC-S 2024」扫雷
## 题目背景

小林最近迷上了扫雷游戏。
## 题目描述

一个扫雷游戏可以被抽象成一个 $n$ 行 $m$ 列的字符矩阵，不妨记第 $i$ 行第 $j$ 列的字符为 $S_{i,j}$。

若 $S_{i,j}=\texttt{*}$，表示格子 $(i,j)$ 上有一个地雷；

若 $S_{i,j}=\texttt{?}$，表示格子 $(i,j)$ 情况未知；

若 $S_{i,j}\in [0,8]$，表示格子 $(i,j)$ 周围的 $8$ 个格子中有 $S_{i,j}$ 个地雷（这个格子本身没有地雷）。
形式化地说，记

$$
f(i,j)=\begin{cases}
1, & (i,j)\text{ 上有地雷} \\
0, & \text{其他情况} \\
\end{cases}
$$

特别地，对于超出棋盘边界的情况，规定 $f(i,j)=0$。
则 $\displaystyle S_{i,j}=\sum_{p=-1}^1\sum_{q=-1}^1 f(i+p,j+q)$。

给定一个棋盘，你可以任意决定每个 $\texttt{?}$ 格子上是否有炸弹。你想要知道是否存在方案使得这个棋盘是合法的。
我们定义一个棋盘**合法**，当且仅当填有数字 $x$ 的格子周围的八个格子上恰好有 $x$ 个炸弹。

你需要解决 $T$ 组数据。
## 输入格式

**本题单个测试点内含多组测试数据。**

第一行，一个正整数 $T$，代表数据组数；

对于每组数据，输入 $(n+1)$ 行：

- 第一行，两个正整数 $n,m$，描述棋盘的行数和列数；
- 接下来 $n$ 行，第 $(i+1)$ 行的第 $j$ 个字符描述 $S_{i,j}$。
## 输出格式

对于每组数据，输出一行。

若存在合法的方案，输出 `YES`；否则输出 `NO`。
## 样例

### 样例输入 #1
```
3
2 2
**
2?
2 2
*1
3?
2 2
**
21
```
### 样例输出 #1
```
YES
NO
NO
```
## 提示

对于第一组数据：问号处选择不填是一种合法方案。可以证明这是唯一的合法方案。

**本题采用捆绑测试。**

- Subtask 1（20pts）：至多存在 $1$ 组 $(i,j)$，使得 $S_{i,j}=\texttt{?}$；
- Subtask 2（80pts）：无额外约束。

对于 $100\%$ 的数据，保证：

- $1\le T,n,m\le 10$；
- 至多存在 $10$ 组 $(i,j)$，使得 $S_{i,j}=\texttt{?}$；
- $\forall 1\le i\le n,1\le j\le m$，保证 $S_{i,j}\in\{0,1,2,3,4,5,6,7,8,\texttt{?},\texttt{*}\}$。



---

---
title: "[常州市赛 2021] 烧菜"
layout: "post"
diff: 普及/提高-
pid: B4204
tag: ['数学', '贪心', '2021', '江苏', '枚举', '科创活动', '小学活动']
---
# [常州市赛 2021] 烧菜
## 题目背景

搬运自 <http://czoj.com.cn/p/440>。
## 题目描述

小 $\text{X}$ 正在指挥 $M$ 个机器人做一道家常菜：白灼青菜。  
把一根青菜烧成菜肴需要两个步骤：洗菜和水煮。显然，一根青菜不可能同时被清洗和水煮，也不可能先被水煮后被清洗。  
现在小 $\text{X}$ 告诉你他是怎么指挥的。每当一个机器人空下来： 
- 如果有青菜还没被清洗，就让这个机器人清洗这根青菜
- 否则如果有青菜还没被水煮，就让这个机器人水煮这根青菜
- 都没有就让这个机器人关机

现在一共需要把 $N$ 根青菜烧成菜肴，任何一个机器人清洗都要花 $A$ 分钟，水煮要花 $B$ 分钟。小 $\text X$ 想请你告诉他多少分钟后所有菜能被烧好。
## 输入格式

一行 $4$ 个正整数 $N,M,A,B$，含义见问题描述。
## 输出格式

输出 $1$ 行包含一个整数，表示多少分钟后所有菜能被烧好。
## 样例

### 样例输入 #1
```
3 2 9 5
```
### 样例输出 #1
```
23
```
## 提示

### 样例解释
为了方便说明，把机器人标号为 $1$ 号机器人和 $2$号机器人；把青菜标号为 $1$ 号、 $2$ 号、 $3$ 号青菜。实际上，机器人间是没有区别的，青菜间也是没有区别的。  
- 第 $0$ 分钟， $1$ 号机器人开始洗 $1$ 号青菜， $2$ 号机器人开始洗 $2$ 号青菜。  
- 第 $9$ 分钟， $1$ 号机器人开始洗 $3$ 号青菜， $2$ 号机器人开始煮 $1$ 号青菜。  
- 第 $14$ 分钟， $2$ 号机器人开始煮 $2$ 号青菜。  
- 第 $18$ 分钟， $1$ 号机器人开始煮 $3$ 号青菜。  
- 第 $19$ 分钟， $2$ 号机器人关机。  
- 第 $23$ 分钟，所有菜都被烧好了， $1$ 号机器人关机。
### 数据范围
本题共有 $20$ 个测试点。  
对于所有数据，满足 $1\le N,M,A,B\le 2000$。
|测试点编号|$N,M,A,B$|特殊性质|
|:-:|:-:|:-:|
|$1\sim2$|$\le50$|$M>N$|
|$3\sim4$|$\le50$|$M=1$|
|$5\sim6$|$\le50$|$A=B$|
|$7\sim10$|$\le50$|无|
|$11\sim12$|$\le2000$|$M>N$|
|$13\sim14$|$\le2000$|$M=1$|
|$15\sim16$|$\le2000$|$A=B$|
|$17\sim20$|$\le2000$|无|


---

---
title: "[常州市赛 2021] 数字翻转"
layout: "post"
diff: 普及/提高-
pid: B4206
tag: ['搜索', '二分', '2021', '江苏', '枚举', '科创活动', '小学活动']
---
# [常州市赛 2021] 数字翻转
## 题目背景

搬运自 <http://czoj.com.cn/p/442>。数据为民间数据。
## 题目描述

小 $\text X$ 在做数学题的时候发现了一类有趣的数字。把这样的数字写在一张不透明的纸上，倒过来（把纸旋转 $180$ 度，转轴垂直于纸面）看还是同样的数字。例如 $69$ 就是这样的数字。  

![](https://cdn.luogu.com.cn/upload/image_hosting/71ognnjx.png)

注意，小 $\text X$ 用的是以下字体：  

![](https://cdn.luogu.com.cn/upload/image_hosting/ll5qcrqa.png)

现在小 $\text X$ 会问你 $Q$ 次问题，每次问你 $L$ 到 $R$ 之间有多少个这样有趣的数字。
## 输入格式

第一行为 $1$ 个正整数 $Q$，表示有 $Q$ 个问题。  
接下来 $Q$ 行，每行两个整数 $L$ 和 $R$ 描述问题。
## 输出格式

对于每个问题，依次输出一行一个整数表示答案。 
## 样例

### 样例输入 #1
```
3
1 260
3333 8888
1 1234567654321
```
### 样例输出 #1
```
11
17
77758
```
## 提示

### 样例解释
$1$ 到 $260$ 中有趣的数字： $2,5,8,22,55,69,88,96,202,222,252$。
### 数据范围
本题共有 $10$ 个测试点，每个测试点 $10$ 分。  
对于所有数据，$1\le Q\le10^5$，$1\le L\le R<10^{14}$。
|测试点编号|$Q$|$R$|
|:-:|:-:|:-:|
|$1$|$=1$|$<10$|
|$2$|$\le10^5$|$<10$|
|$3$|$=1$|$<10^3$|
|$4$|$\le10^5$|$<10^3$|
|$5$|$=1$|$<10^6$|
|$6$|$\le10^5$|$<10^6$|
|$7$|$=1$|$<10^{10}$|
|$8$|$\le10^5$|$<10^{10}$|
|$9$|$=1$|$<10^{14}$|
|$10$|$\le10^5$|$<10^{14}$|



---

---
title: "[常州市赛 2024] 密码"
layout: "post"
diff: 普及/提高-
pid: B4226
tag: ['模拟', '2024', '江苏', '枚举', '循环结构', '科创活动', '小学活动']
---
# [常州市赛 2024] 密码
## 题目背景

搬运自 <http://czoj.com.cn/p/952>。数据为民间数据。
## 题目描述

小 Y 发现了一个密码，这个密码的初始形式排列成了 $n\times n$ 的矩阵的形式。小 Y 需要首先按照蛇形矩阵的方式解读这个密码，如下图所示，从第一行第一个字符开始，第一步向右走，然后向左下方走到边界，接下去沿着边界走一步（可能向下可能向右），再向右上方走到边界，接下去沿着边界走一步（可能向下可能向右）……不断重复这个过程直到走到第 $n$ 行的第 $n$ 列停止。

![](https://cdn.luogu.com.cn/upload/image_hosting/meopj1yd.png)

小 Y 把走过路径的字符串起来，就得到了一个长度为 $n\times n$ 的字符串 $\tt THISISAVERYGOODPOEMITHINK$，这是密码的中间形式，而小 Y 需要把这个密码排列成最终形式，最终形式是把这个中间形式的密码按照螺旋矩阵的方式填入一个 $n\times n$ 的矩形中，如下图所示，从第一行第一个字符开始，第一步开始一直向右走直到碰到边界或是已有字符 ，再向下走到边界或已有字符，再向左走到边界或已有字符，再向上走到边界或已有字符……不断重复这个过程直到无路可走停止。


![](https://cdn.luogu.com.cn/upload/image_hosting/wcb1pbkq.png)

每走一步就往当前位置中填入一个密码中间形式字符串中的字符，就得到了密码的最终形式。

现在给出密码的初始形式，小 Y 想让你告诉他密码的最终形式。
## 输入格式

第 $1$ 行 $1$ 个正整数 $n$，表示密码初始形式矩阵的大小。

第 $2\sim n+1$ 行每行 $n$ 个字符（字符都是大写字母）表示密码的初始形式。
## 输出格式

$n$ 行每行 $n$ 个大写字母表示密码的最终形式。


## 样例

### 样例输入 #1
```
2
AB
CD
```
### 样例输出 #1
```
AB
DC
```
### 样例输入 #2
```
4
ABCD
EFGH
IJKL
MNOP
```
### 样例输出 #2
```
ABEI
KHLF
NPOC
MJGD
```
### 样例输入 #3
```
5
THSAD
IIVOP
SEOOH
RGETI
YMINK
```
### 样例输出 #3
```
THISI
POEMS
DNKIA
OIHTV
OGYRE
```
## 提示

对于所有数据，$1\le n\le 500$，字符均为大写字母。

|测试点编号|$n$|特殊性质|
|:-:|:-:|:-:|
|$1\sim3$|$\le 2$|无|
|$4$|$\le100$|$\alpha$|
|$5\sim7$|$\le 5$|无|
|$8\sim10$|$\le500$|无|
- 特殊性质 $\alpha$：保证矩阵中的所有字符完全相同。


---

---
title: "[蓝桥杯青少年组国赛 2022] 翻卡片"
layout: "post"
diff: 普及/提高-
pid: B4297
tag: ['2022', '枚举', '连通块', '蓝桥杯青少年组']
---
# [蓝桥杯青少年组国赛 2022] 翻卡片
## 题目描述

小蓝在玩翻卡片游戏，每张卡片一面写着大写字母 `A`，另一面写着大写字母 `B`。首先将卡片排成一个 $N \times N$ 的矩阵。有的卡片是 `A` 面朝上，有的卡片是 `B` 面朝上。

现给定 $N$ 的值，及 $N \times N$ 矩阵中每张卡片的状态，请你帮助小蓝挑选一张 `B` 面的卡，翻转成 `A` 面，使得翻转后的上、下、左、右四个方向相连的 `A` 面卡片最多，并将相连最多的卡片数量输出。

例如：$N=3$，$3 \times 3$ 的矩阵中的卡片状态如下：

| A | B | B |
|---|---|---|
| A | B | A |
| B | A | B |

选择第二行第二列的那张 `B` 面卡片，翻转为 `A` 面，可以使翻转后四个方向相连的 `A` 面卡片最多，为 $5$ 张。

| A | B | B |   | A | B | B |
|---|---|---|---|---|---|---|
| A | B | A | $\rightarrow$ | A | A | A |
| B | A | B |   | B | A | B |
## 输入格式

第一行输入一个正整数 $N$（$2 \leq N \leq 50$），表示矩阵的行数和列数。

第二行开始输入 $N$ 行，每行输入 $N$ 个字符（`A` 或者 `B`），表示矩阵中卡片状态，字符之间以一个空格隔开。
## 输出格式

输出一个整数，表示翻转后相连的 `A` 面卡片的最大数量。
## 样例

### 样例输入 #1
```
3
A B B
A B A
B A B
```
### 样例输出 #1
```
5
```


---

---
title: "[ROIR 2023] 斐波那契乘积 (Day 1)"
layout: "post"
diff: 普及/提高-
pid: P10095
tag: ['搜索', '数学', '递归', '2023', 'Special Judge', '枚举', '深度优先搜索 DFS', '斐波那契数列', 'ROIR（俄罗斯）']
---
# [ROIR 2023] 斐波那契乘积 (Day 1)
## 题目背景

翻译自 [ROIR 2023 D1T2](https://neerc.ifmo.ru/school/archive/2022-2023/ru-olymp-regional-2023-day1.pdf)。

斐波那契数指斐波那契数列（$f_0=1,f_1=1,f_i=f_{i-2}+f_{i-1}$）中出现的数。
## 题目描述

给定一个自然数 $n$，求出将其表示为若干个大于 $1$ 的斐波那契数的乘积的方案数。
## 输入格式

第一行一个数 $t$，表示数据组数。

接下来 $t$ 行，每行输入一个数 $n$。
## 输出格式

对于每组测试数据，输出一个数表示答案。
## 样例

### 样例输入 #1
```
5
2
7
8
40
64
```
### 样例输出 #1
```
1
0
2
2
3
```
## 提示

样例解释：
- $2=2$。
- $7$ 无法被表示为斐波那契乘积。
- $8=8=2\times2\times2$。
- $40=5\times8=2\times2\times2\times5$。
- $64=8\times8=2\times2\times2\times8=2\times2\times2\times2\times2\times2$。

本题使用捆绑测试。

| 子任务编号 | 分值 | $2\le n\le$ |
| :----------: | :----------: | :----------: |
| $1$ | $15$ | $100$ |
| $2$ | $17$ | $10^5$ |
| $3$ | $9$ | $n$ 是 $2$ 的整数次幂 |
| $4$ | $38$ | $10^9$ |
| $5$ | $21$ | $10^{18}$ |

对于所有数据，$1\le t\le50$，$2\le n\le10^{18}$。


---

---
title: "[NOIP 2000 普及组] 税收与补贴问题"
layout: "post"
diff: 普及/提高-
pid: P1023
tag: ['数学', '2000', 'NOIP 普及组', '枚举']
---
# [NOIP 2000 普及组] 税收与补贴问题
## 题目背景

每样商品的价格越低，其销量就会相应增大。现已知某种商品的成本及其在若干价位上的销量（产品不会低于成本销售），并假设相邻价位间销量的变化是线性的且在价格高于给定的最高价位后，销量以某固定数值递减。（我们假设价格及销售量都是整数）

对于某些特殊商品，不可能完全由市场去调节其价格。这时候就需要政府以税收或补贴的方式来控制。（所谓税收或补贴就是对于每个产品收取或给予生产厂家固定金额的货币）

## 题目描述

你是某家咨询公司的项目经理，现在你已经知道政府对某种商品的预期价格，以及在各种价位上的销售情况。要求你确定政府对此商品是应收税还是补贴的最少金额（也为整数），才能使商家在这样一种政府预期的价格上，获取相对其他价位上的最大总利润。

- 总利润 $=$ 单位商品利润 $\times$ 销量
- 单位商品利润 $=$ 单位商品价格 $-$ 单位商品成本（减去税金 或者 加上补贴）

## 输入格式

输入的第一行为政府对某种商品的预期价；

 第二行有两个整数，第一个整数为商品成本，第二个整数为以成本价销售时的销售量；
 
 接下来若干行，每行都有两个整数，第一个为某价位时的单价，第二个为此时的销量，以一行 `-1 -1` 表示所有已知价位及对应的销量输入完毕；
 
 输入的最后一行为一个单独的整数表示在已知的最高单价外每升高一块钱将减少的销量。

## 输出格式

输出有两种情况：若在政府预期价上能得到最大总利润，则输出一个单独的整数，数的正负表示是补贴还是收税，数的大小表示补贴或收税的金额最小值。若有多解，取绝对值最小的输出。

如在政府预期价上不能得到最大总利润，则输出 `NO SOLUTION`。

## 样例

### 样例输入 #1
```
31
28 130
30 120
31 110
-1  -1
15
```
### 样例输出 #1
```
4

```
## 提示

### 数据范围及约定

保证输入的所有数字均小于 $10^5$。

### 样例解释（2023/6/22 更新）

如下图所示是输入样例所对应的价格变化图，横轴表示销售价格，纵轴表示销量。

![](https://cdn.luogu.com.cn/upload/image_hosting/21mhtm5i.png)

根据题意，$28$ 元是商品的成本。销售价格不应该低于 $28$ 元；当销售价格大于给出的价格的最大值 $31$ 元后，按照售价每提高一元，销量降低 $15$ 计算，例如当售价为 $33$ 元时，销量为 $110-15\times (33-31)=80$。在给出来的价位之间，销量呈线性变化。

当政府给该商品补贴 $4$ 元后，企业将该商品定价为 $31$ 元时，取得的利润为 $31-28+4=7$ 元，销量为 $110$ 件，总利润为 $7\times 110=770$ 元，是企业在所有定价下能够取得的最大的总利润。此时企业的售价为政府的期望售价，因此是一个合法方案。


---

---
title: "Exciting Days"
layout: "post"
diff: 普及/提高-
pid: P10246
tag: ['模拟', '洛谷原创', '枚举', '洛谷月赛']
---
# Exciting Days
## 题目背景

网上流传一种说法，称 $10$ 月 $24$ 日是“程序员节”，因为 $1024$ 恰好是 $2^{10}$，而计算机和二进制有密切联系。

如果某个不使用地球历法的外星文明，也不一定用传统的二进制计算机，会不会也有类似的传统呢？
## 题目描述

某个星球的历法和地球虽然数值上和地球不同，但是其结构和地球人的历法大体相似。具体地，他们的一年有 $n$ 个月，其中第 $i$ 个月有 $a_i$ 天。

定义 $m$ 月 $d$ 日的**特征值**为将 $m,d$ 的十进制写出（不含前导 $0$）后，直接拼接的结果。例如 $3$ 月 $7$ 日特征值是 $37$，$12$ 月 $20$ 日特征值是 $1220$。

如果一个日期的特征值是 $k$ 的自然数次幂，则称这个日期是**广义程序员节**。你可以求出这个星球的所有广义程序员节吗？
## 输入格式

**本题有多组测试数据。** 输入的第一行有一个正整数 $T$，表示测试数据组数。

每组测试数据输入两行。第一行有两个正整数 $n,k$，含义和题目描述一致；第二行有 $n$ 个正整数 $a_1,\ldots,a_n$ 表示每个月的天数。
## 输出格式

对于每组测试数据，先输出一行一个自然数表示广义程序员节个数；再输出若干行，每行一对用空格隔开的正整数 $m,d$ 表示 $m$ 月 $d$ 日表示一个程序员节。

在同一组测试数据中，输出的日期应按照一年当中的顺序输出。
## 样例

### 样例输入 #1
```
2
2 1
11 12
12 2
31 29 31 30 31 30 31 31 30 31 30 31

```
### 样例输出 #1
```
0
7
1 6
1 28
3 2
5 12
6 4
10 24
12 8
```
## 提示

【样例解释】

对于第一组数据，外星人的日历有两个月，第一个月有 $11$ 天，第二个月有 $12$ 天。现在要求特征值是 $1$ 的整数次幂，只能是 $1$，然而日期的特征值**至少是两位数**，因此不存在符合要求的日期。

对于第二组数据，这是地球人闰年时的公历，不难发现输出的日期特征值确实都是 $2$ 的自然数次幂。

【数据范围】

本题共 $25$ 个测试点，每个 $4$ 分。数据范围中，$\sum n$ 表示所有测试数据的 $n$ 之和，例如样例的 $\sum n=14$。

|测试点编号|$T\le$|$\sum n\le$|$a_i\le$|特殊性质|
|:-:|:-:|:-:|:-:|:-:|
|$1$|$1$|$1000$|$1000$|$k=6$|
|$2\sim 3$|$1$|$1000$|$1000$||
|$4\sim 6$|$3$|$1000$|$1000$||
|$7\sim 11$|$3$|$10^4$|$10^4$||
|$12\sim 14$|$1$|$3\times 10^5$|$10^9$||
|$15\sim 17$|$3$|$3\times 10^5$|$10^9$||
|$18\sim 19$|$10^4$|$10^4$|$10^9$|$n=1$|
|$20\sim 21$|$10^4$|$9\times 10^4$|$10^9$|$n\le 9$|
|$22\sim 25$|$10^4$|$3\times 10^5$|$10^9$||

对于全部数据，保证 $1\le T\le 10^4$，$1\le n\le 3\times 10^5$，$1\le \sum n\le 3\times 10^5$，$1\le a_i,k\le 10^9$，输入皆为整数。

为避免卡常，题目保证单个测试点输出的日期不超过 $2\times 10^4$ 个。


---

---
title: "[NOIP 2001 提高组] 统计单词个数"
layout: "post"
diff: 普及/提高-
pid: P1026
tag: ['字符串', '动态规划 DP', '2001', 'NOIP 提高组', '枚举']
---
# [NOIP 2001 提高组] 统计单词个数
## 题目描述

给出一个长度不超过 $200$ 的由小写英文字母组成的字母串（该字串以每行 $20$ 个字母的方式输入，且保证每行一定为 $20$ 个）。要求将此字母串分成
 $k$ 份，且每份中包含的单词个数加起来总数最大。  

每份中包含的单词可以部分重叠。当选用一个单词之后，其第一个字母不能再用。例如字符串 `this` 中可包含 `this` 和 `is`，选用 `this` 之后就不能包含
 `th`。

单词在给出的一个不超过 $6$ 个单词的字典中。

要求输出最大的个数。

## 输入格式

每组的第一行有两个正整数 $p,k$。
$p$ 表示字串的行数，$k$ 表示分为 $k$ 个部分。

接下来的 $p$ 行，每行均有 $20$ 个字符。

再接下来有一个正整数 $s$，表示字典中单词个数。
接下来的 $s$ 行，每行均有一个单词。

## 输出格式

$1$个整数，分别对应每组测试数据的相应结果。

## 样例

### 样例输入 #1
```
1 3
thisisabookyouareaoh
4
is
a
ok
sab

```
### 样例输出 #1
```
7

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$2 \le k \le 40$，$1 \le s \le 6$。

【样例解释】
划分方案为 this / isabookyoua / reaoh

**【题目来源】**

NOIP 2001 提高组第三题


---

---
title: "勇气（Courage）"
layout: "post"
diff: 普及/提高-
pid: P10320
tag: ['数学', '洛谷原创', '枚举', '洛谷比赛']
---
# 勇气（Courage）
## 题目背景

数学家渴求真理的美德，永不停歇的力量的源泉 —— 勇气。
****
「勇气之光」乔伊，是杜沃夫族的接任族长，也是拥有古代战神之力的战士。
## 题目描述

乔伊有一项技能，可以将 $x$ 的攻击力强化为 $x^2$。但这个技能并不完美，除了第一次之外，每一次**使用该技能前**，攻击力都会衰减到之前的一半。

比如最初的攻击力为 $\color{red}6$，强化后变成 $6^2=\color{red}{36}$。而在下一次强化前，会先衰减到 $36/2=18$，然后再强化为 $18^2=\color{red}{324}$。

乔伊想知道，如果最初的攻击力为 $x$，至少需要多少次强化，可以使其**不小于** $2^n$？  
如果无论强化多少次，都不可能达到要求，请输出 `inf`。
## 输入格式

输入一行两个正整数 $x,n$。分别表示初始攻击力为 $x$，以及要达到 $2^n$ 的攻击力。
## 输出格式

输出一行一个整数或字符串 `inf`，表示答案。
## 样例

### 样例输入 #1
```
2 1
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
3 6
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
16 335
```
### 样例输出 #3
```
7
```
## 提示

【样例 $1$ 解释】  
初始攻击力 $x=2$ 就已经达到了 $2^n=2$，不需要使用技能就满足了要求，故答案为 $0$。

【样例 $2$ 解释】  
初始攻击力为 $3$，需要达到 $2^6=64$。第一次用技能后变为 $9$，第二次后变为 $(9/2)^2=81/4$，第三次变为 $((81/4)/2)^2=6561/64$，已经达到了要求，故答案为 $3$。

【数据范围】  
**本题采用捆绑测试。**  

Subtask 1（15 pts）：$n\le 60$；  
Subtask 2（20 pts）：$x=4$；  
Subtask 3（25 pts）：$n\le 10^5$；  
Subtask 4（40 pts）：无特殊限制。

对于全部的数据，$2\le x\le 10^9$，$1\le n \le 10^9$。


---

---
title: "[NOIP 2008 普及组] 立体图"
layout: "post"
diff: 普及/提高-
pid: P1058
tag: ['模拟', '字符串', '2008', 'NOIP 普及组', '枚举']
---
# [NOIP 2008 普及组] 立体图
## 题目描述

小渊是个聪明的孩子，他经常会给周围的小朋友们讲些自己认为有趣的内容。最近，他准备给小朋友们讲解立体图，请你帮他画出立体图。

小渊有一块面积为 $m \times n$ 的矩形区域，上面有 $m \times n$ 个边长为 $1$ 的格子，每个格子上堆了一些同样大小的积木（积木的长宽高都是 $1$），小渊想请你打印出这些格子的立体图。我们定义每个积木为如下格式，并且不会做任何翻转旋转，只会严格以这一种形式摆放：

$$
\def\arraystretch{1e-10}
\begin{aligned}
&\verb!  +---+!\\
&\verb! /   /|!\\
&\verb!+---+ |!\quad\textsf{高}\\
&\verb!|   | +!\\
&\verb!|   |/ !\quad\textsf{宽}\\
&\verb!+---+  !\\
& \quad\textsf{长}
\end{aligned}$$


每个顶点用 $1$ 个加号 `+` 表示，长用 $3$ 个 `-` 表示，宽用 $1$ 个 `/`，高用两个 `|` 表示。字符 `+`，`-`，`/`，`|` 的 ASCII 码分别为 $43$，$45$，$47$，$124$。字符 `.`（ASCII 码 $46$）需要作为背景输出，即立体图里的空白部分需要用 `.` 来代替。立体图的画法如下面的规则：

若两块积木左右相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+---+!\\
\verb!./   /   /|!\\
\verb!+---+---+ |!\\
\verb!|   |   | +!\\
\verb!|   |   |/.!\\
\verb!+---+---+..!\\
\end{aligned}
$$

若两块积木上下相邻，图示为：


$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!..+---+!\\
\verb!./   /|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/|!\\
\verb!+---+ |!\\
\verb!|   | +!\\
\verb!|   |/.!\\
\verb!+---+..!\\
\end{aligned}
$$

若两块积木前后相邻，图示为：

$$
\def\arraystretch{1e-10}
\begin{aligned}
\verb!....+---+!\\
\verb!.../   /|!\\
\verb!..+---+ |!\\
\verb!./   /| +!\\
\verb!+---+ |/.!\\
\verb!|   | +..!\\
\verb!|   |/...!\\
\verb!+---+....!\\
\end{aligned}
$$

立体图中，定义位于第 $(m,1)$ 的格子（即第 $m$ 行第 $1$ 列的格子）上面自底向上的第一块积木（即最下面的一块积木）的左下角顶点为整张图最左下角的点。

## 输入格式

第一行有用空格隔开的$2$个整数 $m$ 和 $n$，表示有 $m \times n$ 个格子 $(1 \le m,n \le 50)$。

接下来的 $m$ 行，是一个 $m \times n$ 的矩阵，每行有 $n$ 个用空格隔开的整数，其中第 $i$ 行第 $j$ 列上的整数表示第 $i$ 行第 $j$ 列的格子上摞有多少个积木（$1 \le $ 每个格子上的积木数 $ \le 100$）。

## 输出格式

输出包含题目要求的立体图，是一个 $K$ 行 $L$ 列的字符串矩阵，其中 $K$ 和 $L$ 表示最少需要 $K$ 行 $L$ 列才能按规定输出立体图。


## 样例

### 样例输入 #1
```
3 4
2 2 1 2
2 2 1 1
3 2 1 2

```
### 样例输出 #1
```
......+---+---+...+---+
..+---+  /   /|../   /|
./   /|-+---+ |.+---+ |
+---+ |/   /| +-|   | +
|   | +---+ |/+---+ |/|
|   |/   /| +/   /|-+ |
+---+---+ |/+---+ |/| +
|   |   | +-|   | + |/.
|   |   |/  |   |/| +..
+---+---+---+---+ |/...
|   |   |   |   | +....
|   |   |   |   |/.....
+---+---+---+---+......
```
## 提示

NOIP2008普及组第四题



---

---
title: "【MX-J3-T3】 Tuple"
layout: "post"
diff: 普及/提高-
pid: P10996
tag: ['枚举', '梦熊比赛']
---
# 【MX-J3-T3】 Tuple
## 题目背景

原题链接：<https://oier.team/problems/J3D>。
## 题目描述

你有 $m$ 个三元组 $(u_i,v_i,w_i)$，保证 $1\le u_i<v_i<w_i\le n$ 且三元组两两不同。有多少组 $(a,b,c,d)$ 满足 $1\le a<b<c<d\le n$，且在这 $m$ 个三元组当中，存在四个三元组 $(a,b,c),\allowbreak (a,b,d),\allowbreak (a,c,d),\allowbreak (b,c,d)$？
## 输入格式

输入的第一行有两个正整数 $n,m$ 表示三元组数字范围和三元组个数。

之后 $m$ 行，每行一组 $u_i,v_i,w_i$ 表示一个三元组。
## 输出格式

输出一行一个自然数表示答案。
## 样例

### 样例输入 #1
```
7 11
1 2 3
2 3 4
1 3 4
1 2 4
3 4 5
4 5 6
3 5 6
3 4 6
1 2 7
2 3 7
1 3 7

```
### 样例输出 #1
```
3

```
### 样例输入 #2
```
9 30
1 2 3
1 2 5
1 2 6
1 3 4
1 3 5
1 3 6
1 3 7
1 3 8
1 3 9
1 4 5
1 4 6
1 4 9
1 7 9
2 3 4
2 3 5
2 3 6
2 3 7
2 3 8
2 3 9
2 4 9
2 5 8
2 6 7
2 7 9
3 4 5
3 4 8
3 4 9
3 5 9
3 7 8
3 7 9
3 8 9

```
### 样例输出 #2
```
7
```
## 提示

**【样例解释 #1】**

有 $(1,2,3,4),(3,4,5,6),(1,2,3,7)$ 符合题意。

**【数据范围】**

|测试点编号|$n\le$|$m\le$|特殊性质|
|:-:|:-:|:-:|:-:|
|$1,2$|$20$|$100$||
|$3\sim 5$|$80$|$10^3$||
|$6\sim 8$|$2000$|$10^4$||
|$9\sim 12$|$300$|$5\times 10^4$|三元组随机均匀生成|
|$13\sim 17$|$300$|$5\times 10^4$||
|$18$|$2000$|$5\times 10^4$|$u_i=1$|
|$19\sim 25$|$2000$|$5\times 10^4$||

对于全体数据，保证 $4\le n\le 2000$，$4\le m\le 5\times 10^4$。


---

---
title: "[USACO06FEB] Backward Digit Sums G/S"
layout: "post"
diff: 普及/提高-
pid: P1118
tag: ['搜索', '2006', 'USACO', '枚举', '深度优先搜索 DFS']
---
# [USACO06FEB] Backward Digit Sums G/S
## 题目描述

`FJ` and his cows enjoy playing a mental game. They write down the numbers from $1$ to$ N(1 \le N  \le 10)$ in a certain order and then sum adjacent numbers to produce a new list with one fewer number.  They repeat this until only a single number is left.  For example, one instance of the game (when $N=4$) might go like this:

```cpp
    3   1   2   4
      4   3   6
        7   9
         16
```
Behind `FJ`'s back, the cows have started playing a more difficult game, in which they try to determine the starting sequence from only the final total and the number $N$.  Unfortunately, the game is a bit above `FJ`'s mental arithmetic capabilities.


Write a program to help `FJ` play the game and keep up with the cows.


## 输入格式

共一行两个正整数 $n,sum$。

## 输出格式

输出包括一行，为字典序最小的那个答案。

当无解的时候，请什么也不输出。

## 样例

### 样例输入 #1
```
4 16
```
### 样例输出 #1
```
3 1 2 4
```
## 提示

- 对于 $40\%$ 的数据，$1\le n\le 7$；  
- 对于 $80\%$ 的数据，$1\le n \le 10$；
- 对于 $100\%$ 的数据，$1\le n \le 12$，$1\le sum\le 12345$。

## 题目翻译


有这么一个游戏：

写出一个 $1\sim n$ 的排列 $a$，然后每次将相邻两个数相加，构成新的序列，再对新序列进行这样的操作，显然每次构成的序列都比上一次的序列长度少 $1$，直到只剩下一个数字位置。

下面是一个例子：

- $3,1,2,4$；
- $4,3,6$；
- $7,9$；
- $16$。

最后得到 $16$ 这样一个数字。

现在想要倒着玩这样一个游戏，如果知道 $n$，以及最后得到的数字的大小 $sum$，请你求出最初序列 $a_i$（应该是一个 $1\sim n$ 的排列）。若答案有多种可能，则输出字典序最小的那一个。

我们称序列 $a=\lang a_1,a_2,\cdots,a_n\rang$ 的字典序小于序列 $b=\lang b_1,b_2,\cdots,b_n\rang$ 的字典序，当且仅当存在一个位置 $p$，满足 $a_1=b_1,a_2=b_2,\cdots,a_{p-1}=b_{p-1},a_p<b_p$。


---

---
title: "【MX-J8-T2】 黑洞"
layout: "post"
diff: 普及/提高-
pid: P11214
tag: ['数学', '贪心', 'O2优化', '枚举', '排序', '梦熊比赛']
---
# 【MX-J8-T2】 黑洞
## 题目背景

原题链接：<https://oier.team/problems/J8B>。

---

![](https://cdn.luogu.com.cn/upload/image_hosting/a8hxrkor.png)

上图给出了二维下与红点在同一条对角线上的所有方格。

考虑三维下的情况，下图给出了与红色方块在同一条对角线上的所有方块。

![](https://cdn.luogu.com.cn/upload/image_hosting/56pkuoah.png)

本题我们将会把对角线这个概念推广到 $n$ 维上。
## 题目描述

已知一片 $n$ 维空间，第 $i$ 维的大小为 $m_i$。我们使用一个 $n$ 维坐标 $(x_1, x_2, \dots, x_n)$ 表示这片 $n$ 维空间里的一个位置，其中 $x_i$ 为 $[1, m_i]$ 间的整数。

在位置 $(a_1, a_2, \dots, a_n)$ 处有一颗黑洞。这片 $n$ 维空间中所有与它在同一条对角线上的位置都将被吞噬：
- 称位置 $(a_1, a_2, \dots, a_n)$ 与 $(b_1, b_2, \dots, b_n)$ 在同一条对角线上，当且仅当存在一个整数 $k \geq 0$，使得对每个 $1 \leq i \leq n$，都有 $\lvert a_i - b_i \rvert = k$。

你需要求出共有多少个位置会被黑洞吞噬（即与黑洞在同一条对角线上，包括黑洞所处位置本身）。答案对 $10^9 + 7$ 取模。
## 输入格式

第一行，一个正整数 $n$，表示维度数。

第二行，$n$ 个正整数 $m_1, \dots, m_n$，表示每一维的大小。

第三行，$n$ 个正整数 $a_1, \dots, a_n$，表示黑洞的位置。
## 输出格式

仅一行一个整数，表示该 $n$ 维空间中被黑洞吞噬的位置个数。答案对 $10^9 + 7$ 取模。
## 样例

### 样例输入 #1
```
2
6 6 
2 3
```
### 样例输出 #1
```
8
```
### 样例输入 #2
```
2
999999999 999999999
500000000 500000000
```
### 样例输出 #2
```
999999990
```
### 样例输入 #3
```
3
5 7 8
4 5 2
```
### 样例输出 #3
```
12
```
## 提示

**【样例解释 \#1】**

如题目背景中的图所示，其中红色圆形为黑洞所在位置，黑色方格为被黑洞吞噬的位置，共 $8$ 个。

**【样例解释 \#2】**

有 $1999999997$ 个位置被黑洞吞噬，$1999999997$ 对 $10^9+7$ 取模的结果为 $999999990$。

**【样例解释 \#3】**

如题目背景中的图所示，$(1,2,5)$，$(2,3,4)$，$(2,7,4)$，$(3,4,1)$，$(3,4,3)$，$(3,6,1)$，$(3,6,3)$，$(4,5,2)$，$(5,4,1)$，$(5,4,3)$，$(5,6,1)$，$(5,6,3)$ 共 $12$ 个位置被黑洞吞噬。

**【样例 \#4】**

见附件中的 `hole/hole4.in` 与 `hole/hole4.ans`。

该组样例满足测试点 $9 \sim 10$ 的约束条件。

**【样例 \#5】**

见附件中的 `hole/hole5.in` 与 `hole/hole5.ans`。

该组样例满足测试点 $11 \sim 13$ 的约束条件。

**【样例 \#6】**

见附件中的 `hole/hole6.in` 与 `hole/hole6.ans`。

该组样例满足测试点 $14 \sim 19$ 的约束条件。

**【样例 \#7】**

见附件中的 `hole/hole7.in` 与 `hole/hole7.ans`。

该组样例满足测试点 $20 \sim 25$ 的约束条件。

**【数据范围】**

本题共 $25$ 个测试点，每个 $4$ 分。
  
|测试点编号|$n$|$m_i\le$|
| :-----------: | :-------------:|:-----------:|
|$1\sim2$|$=2$|$10^6$|
|$3\sim4$|$=2$|$10^9$|
|$5\sim6$|$=3$|$10^6$|
|$7\sim8$|$=3$|$10^9$|
|$9\sim10$|$\le20$|$15$|
|$11\sim13$|$\le20$|$10^9$|
|$14\sim19$|$\le1000$|$10^9$|
|$20\sim25$|$\le2\times10^5$|$10^9$|

对于全部数据，保证：$2\le n\le 2\times10^5$，$1\le a_i\le m_i\le 10^9$。


---

---
title: "取数游戏"
layout: "post"
diff: 普及/提高-
pid: P1123
tag: ['搜索', '枚举', '深度优先搜索 DFS']
---
# 取数游戏
## 题目描述

一个 $N\times M$ 的由非负整数构成的数字矩阵，你需要在其中取出若干个数字，使得取出的任意两个数字不相邻（若一个数字在另外一个数字相邻 $8$ 个格子中的一个即认为这两个数字相邻），求取出数字和最大是多少。
## 输入格式

第一行有一个正整数 $T$，表示了有 $T$ 组数据。

对于每一组数据，第一行有两个正整数 $N$ 和 $M$，表示了数字矩阵为 $N$ 行 $M$ 列。

接下来 $N$ 行，每行 $M$ 个非负整数，描述了这个数字矩阵。
## 输出格式

共 $T$ 行，每行一个非负整数，输出所求得的答案。

## 样例

### 样例输入 #1
```
3
4 4
67 75 63 10
29 29 92 14
21 68 71 56
8 67 91 25
2 3
87 70 85
10 3 17
3 3
1 1 1
1 99 1
1 1 1


```
### 样例输出 #1
```
271
172
99

```
## 提示

### 样例解释

对于第一组数据，取数方式如下：

$$\begin{matrix}
[67] & 75 & 63 & 10 \\
29 & 29 & [92] & 14 \\
[21] & 68 & 71 & 56 \\
8 & 67 & [91] & 25 \\
\end{matrix}$$


### 数据范围及约定

- 对于$20\%$的数据，$1\le N, M \le 3$；
- 对于$40\%$的数据，$1\le N, M\le 4$；
- 对于$60\%$的数据，$1\le N, M\le 5$；
- 对于$100\%$的数据，$1\le N, M\le 6$，$1\le T\le 20$。



---

---
title: "轰炸"
layout: "post"
diff: 普及/提高-
pid: P1142
tag: ['计算几何', '枚举', '排序']
---
# 轰炸
## 题目描述

“我该怎么办？”飞行员 klux 向你求助。

事实上，klux 面对的是一个很简单的问题，但是他实在太菜了。

klux 要想轰炸某个区域内的一些地方，它们是位于平面上的一些点，但是（显然地）klux 遇到了抵抗，所以 klux 只能飞一次，而且由于飞机比较破，一点起飞就只能沿直线飞行，无法转弯。现在他想一次轰炸最多的地方。

## 输入格式

第一行一个整数 $n$。

接下来 $n$ 行，每行有一对整数，表示一个点的坐标。没有一个点会出现两次。

## 输出格式

一个整数，表示一条直线能覆盖的最多的点数。

## 样例

### 样例输入 #1
```
5
1 1
2 2
3 3
9 10
10 11

```
### 样例输出 #1
```
3

```
## 提示

### 数据范围

对于全部数据，保证 $1\le n\le 700$。

本题翻译并改编自 uva270，数据及解答由 uva 提供。



---

---
title: "[COCI 2024/2025 #3] 红蓝牌 / Karte"
layout: "post"
diff: 普及/提高-
pid: P11475
tag: ['2024', '枚举', 'COCI（克罗地亚）']
---
# [COCI 2024/2025 #3] 红蓝牌 / Karte
## 题目背景


译自 [COCI 2024/2025 #3](https://hsin.hr/coci/) T2。$\texttt{1s,0.5G}$。满分为 $70$。

## 题目描述

在 Vito 的桌子上，有 $N$ 张编号分别为 $1\sim N$ 的红牌和 $M$ 张编号分别为 $1\sim M$ 的蓝牌。

将一张红牌和一张蓝牌称为「一对」，给定若干个二元组 $(c,p)$。若一对牌中，红牌编号为 $c$，蓝牌编号为 $p$，则称这对牌是**好对**。

一个牌堆包含若干张红牌和若干张蓝牌。定义一个牌堆的**价值** $w$ 为牌堆中选出一对，使得这个对是一个好对的方案数。

令 $r$ 为牌堆中红牌的数量，$b$ 为牌堆中蓝牌的数量，定义牌堆的**强度** $\mathrm{strength}$ 为：

$$\mathrm{strength}=w-X\cdot r-Y\cdot b$$

其中 $X$ 和 $Y$ 是给定的常数。

帮助 Vito 确定：选择若干张红牌和蓝牌构成一个牌堆，这个牌堆的最大强度为多少。注意，他也**可以一张牌都不选**（即构成一个空的牌堆）。
## 输入格式

第一行，四个非负整数 $N,M,X,Y$。

接下来 $N$ 行，每行一个长度为 $M$ 的 $\texttt{01}$ 串，其中第 $i$ 行的字符串中第 $j$ 位为 $1$ 表示 $(i,j)$ 是好的，否则表示不是好的。
## 输出格式

输出一行一个非负整数，表示可以构成的牌堆的最大强度。
## 样例

### 样例输入 #1
```
2 2 0 0
11
10
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
3 3 1 0
111
111
000
```
### 样例输出 #2
```
4
```
### 样例输入 #3
```
3 3 1 1
111
101
011
```
### 样例输出 #3
```
1
```
## 提示



### 样例解释

样例 $1$ 中，Vito 可以选择所有的卡牌，能产生 $3$ 个好对，牌堆的最大强度为 $3$。

样例 $2$ 中，Vito 可以选择编号为 $1,2$ 的红牌和所有的蓝牌，能产生 $6$ 个好对，牌堆的最大强度为 $4$（由于选择了两张红牌，所以要将好对数减去 $2X=2$ 作为牌堆的强度）。

### 数据范围


对于 $100\%$ 的数据，保证：

- $1\le N,M\le 21$；
- $0\le X,Y\le 30$；
- 输入的字符串中仅包含 $0$ 和 $1$。


| 子任务编号 | 特殊性质 | 得分 |
| :-: | :-: | :-: |
| $1$ | $Y=0$ | $18$ |
| $2$ | $1\le N,M\le 9$ | $11$ |
| $3$ | $1\le N,M\le 15$ | $24$ |
| $4$ | 无 | $17$ |


---

---
title: "[NOIP 2010 普及组] 导弹拦截"
layout: "post"
diff: 普及/提高-
pid: P1158
tag: ['模拟', '2010', 'NOIP 普及组', '枚举', '排序']
---
# [NOIP 2010 普及组] 导弹拦截
## 题目描述

经过 $11$ 年的韬光养晦，某国研发出了一种新的导弹拦截系统，凡是与它的距离不超过其工作半径的导弹都能够被它成功拦截。当工作半径为 $0$ 时，则能够拦截与它位置恰好相同的导弹。但该导弹拦截系统也存在这样的缺陷：每套系统每天只能设定一次工作半径。而当天的使用代价，就是所有系统工作半径的平方和。

某天，雷达捕捉到敌国的导弹来袭。由于该系统尚处于试验阶段，所以只有两套系统投入工作。如果现在的要求是拦截所有的导弹，请计算这一天的最小使用代价。
## 输入格式

第一行包含 $4$ 个整数 $x_1,y_1,x_2,y_2$，每两个整数之间用一个空格隔开，表示这两套导弹拦截系统的坐标分别为 $(x_1,y_1), (x_2,y_2)$。第二行包含 $1$ 个整数 $N$，表示有 $N$ 颗导弹。接下来 $N$ 行，每行两个整数 $x,y$，中间用一个空格隔开，表示一颗导弹的坐标 $(x,y)$。不同导弹的坐标可能相同。
## 输出格式

一个整数，即当天的最小使用代价。

## 样例

### 样例输入 #1
```
0 0 10 0
2
-3 3
10 0
```
### 样例输出 #1
```
18
```
### 样例输入 #2
```
0 0 6 0
5
-4 -2
-2 3
4 0
6 -2
9 1
```
### 样例输出 #2
```
30
```
## 提示

两个点 $(x_1,y_1),(x_2,y_2)$ 之间距离的平方是 $(x_1-x_2)^2+(y_1-y_2)^2$。

两套系统工作半径 $r_1,r_2$ 的平方和，是指 $r_1,r_2$ 分别取平方后再求和，即 $r_1^2+r_2^2$。

### 样例 1 说明

样例 $1$ 中要拦截所有导弹，在满足最小使用代价的前提下，两套系统工作半径的平方分别为 $18$ 和 $0$。

### 样例 2 说明

样例 $2$ 中的导弹拦截系统和导弹所在的位置如下图所示。要拦截所有导弹，在满足最小使用代价的前提下，两套系统工作半径的平方分别为 $20$ 和 $10$。

![](https://cdn.luogu.com.cn/upload/image_hosting/cvgomt03.png)

【数据范围】。

- 对于 $10\%$ 的数据，$N=1$。
- 对于 $20\%$ 的数据，$1\le N\le 2$。
- 对于 $40\%$ 的数据，$1\le N\le 100$。
- 对于 $70\%$ 的数据，$1\le N\le 1000$。
- 对于 $100\%$ 的数据，$1\le N\le 10^5$，且所有坐标分量的绝对值都不超过 $1000$。

NOIP2010 普及组 第三题


---

---
title: "安全逃离（数据有误）"
layout: "post"
diff: 普及/提高-
pid: P1172
tag: ['模拟', '枚举']
---
# 安全逃离（数据有误）
## 题目背景

**注意本题数据有误，请暂时不要提交**
## 题目描述

农夫`john`最近在研究如果发生重大事故，如何让农场里的奶牛逃离问题。他想要确信在紧急情况下，所有的奶牛都有一个安全逃离方案。因为在紧急情况下，奶牛们都会失去观察和判断能力，所以最近`john`一直在教奶牛们逃离的方法，他的方法很简单，就是任何时候都只向北方或东方逃离，北方是行坐标减1的方向，东方是列坐标加1的方向。奶牛们虽笨，不过这一点事关自己的生命，所以他们牢记在心，而且也一定会这么做。

当然也会出问题，奶牛们在逃离的方向上会横冲直撞，为了阻止奶牛之间互相冲撞造成伤害，`john`要求任何一个奶牛的逃离路线不能经过其它奶牛的初始位置。一个逃离方案是安全的如果它能够满足上面的要求，反之它就是不安全的。

奶牛们所在的土地（农场）被划分成了$r$行和$c$列的一个矩形地图。奶牛们都待在这个矩形中的某一个位置。

请帮助`john`确定给定的一个地图上是否存在一个安全的逃离方案。

比如，下面的两个图：

左边的例子表示了一个能够安全逃离的地图，因为没有任何一个奶牛的逃离路线上包括其他奶牛。右边的例子表示了一个不安全的地图，因为位于$(4,1)$的奶牛不论是向东逃离还是向北逃离，它的路线上都会有别的奶牛，从这个图中拿掉任意一头奶牛，这个地图都会变成安全的。

```plain
  安全     不安全
- ||||C--  C.....
- ||||C--  ^.....
- |C||C--  |.....
- CC++---  C-->C.
- ..CCC--  ......
```

`C` 表示奶牛，直线表示逃离路线。
## 输入格式

第$1$行：两个整数$r,c$，用1个空格隔开，表示矩形的行数和列数（均 $\le 50$）。

第$2$行：一个整数$n$，表示奶牛的个数（$ \le 100$）。

第$3$到$n+2$行：共$n$行，每行有$2$个整数，之间用$1$个空格隔开，分别表示这头奶牛所在的行和列。

## 输出格式

如果这块土地是安全的，输出 $0$。

如果移走任意一头奶牛这块土地还是不安全，输出 $-1$。如果移走一头奶牛就可以使这块土地安全，应从小到大输出所有符合要求的奶牛的编号，每个编号占一行。

## 样例

### 样例输入 #1
```
5 5
5
1 1
2 4
3 1
2 2
2 1

```
### 样例输出 #1
```
1
5

```


---

---
title: "[USACO1.3] 最长的回文 Calf Flac"
layout: "post"
diff: 普及/提高-
pid: P1210
tag: ['字符串', '搜索', 'USACO', '枚举']
---
# [USACO1.3] 最长的回文 Calf Flac
## 题目描述

据说如果你给无限只母牛和无限台巨型便携式电脑（有非常大的键盘 ), 那么母牛们会制造出世上最棒的回文。你的工作就是去寻找这些牛制造的奇观（最棒的回文）。

在寻找回文时不用理睬那些标点符号、空格（但应该保留下来以便做为答案输出）, 只用考虑字母 ${\tt A}\sim {\tt Z}$ 和 ${\tt a}\sim {\tt z}$。要你寻找的最长的回文的文章是一个不超过 $20{,}000$ 个字符的字符串。我们将保证最长的回文不会超过 $2{,}000$ 个字符（在除去标点符号、空格之前）。
## 输入格式

输入文件不会超过 $20,000$ 字符。这个文件可能一行或多行，但是每行都不超过 $80$ 个字符（不包括最后的换行符）。
## 输出格式

输出的第一行应该包括找到的最长的回文的长度。

下一行或几行应该包括这个回文的原文（没有除去标点符号、空格），把这个回文输出到一行或多行（如果回文中包括换行符）。

如果有多个回文长度都等于最大值，输出最前面出现的那一个。

## 样例

### 样例输入 #1
```
Confucius say: Madam, I'm Adam. 
```
### 样例输出 #1
```
11
Madam, I'm Adam
```
## 提示

题目翻译来自NOCOW。

USACO Training Section 1.3



---

---
title: "DerrickLo's Decimals (UBC002A)"
layout: "post"
diff: 普及/提高-
pid: P12178
tag: ['O2优化', '枚举']
---
# DerrickLo's Decimals (UBC002A)
## 题目描述

有一个循环节长度为 $n$ 的纯循环小数，它可以表示为 $a = 0.\dot{a_1}a_2\dots\dot{a_n}$。

由于 DerrickLo 的计算机受奶龙影响产生了精度问题，它只给 DerrickLo $n$ 个数 $b_1, b_2, \dots, b_n$，其中 $b_i$ 表示将 $a$ 四舍五入到小数点后 $i$ 位后第 $i$ 位的值。

DerrickLo 请你帮忙计算出所有可能的 $a$ 的值，将它们求和后**乘以 $10^n - 1$** 输出。

注意，这里的四舍五入只看下一位的数值。令 $\text{round}$ 表示四舍五入函数，则 $\text{round}(0.5) = 1$，$\text{round}(0.49999) = 0$。形式化地，$b_i$ 可以表示为 $(\text{round}(a \times 10^i)) \bmod 10$。
## 输入格式

第一行一个整数 $n$，表示循环节长度。

第二行 $n$ 个整数，以一个空格分隔，表示 $b_1, b_2, \dots, b_n$。
## 输出格式

一行一个整数，表示答案。

可以证明，答案的位数不超过 $n$，**若不到 $n$ 位，设答案位数为 $k$，请先输出 $n-k$ 个前导零再输出答案。**
## 样例

### 样例输入 #1
```
4
0 1 3 2
```
### 样例输出 #1
```
0132
```
### 样例输入 #2
```
4
6 9 8 7
```
### 样例输出 #2
```
5876
```
## 提示

## 样例解释

### 样例 $1$

令 $a = 0.\dot{0}13\dot{2}$，则有：

- $a$ 四舍五入到第一位的值为 $0.0$，第一位为 $0$。
- $a$ 四舍五入到第二位的值为 $0.01$，第二位为 $1$。
- $a$ 四舍五入到第三位的值为 $0.013$，第三位为 $3$。
- $a$ 四舍五入到第四位的值为 $0.0132$，第四位为 $2$。

因此 $a = 0.\dot{0}13\dot{2}$ 符合题目要求。

可以证明，没有其他答案，故符合条件的 $a$ 的和为 $0.\dot{0}13\dot{2}$，乘以 $10^4 - 1$ 后为 $132$，补齐前导零后为 $0132$。

### 样例 $2$

令 $a = 0.\dot{5}87\dot{6}$，则有：

- $a$ 四舍五入到第一位的值为 $0.6$，第一位为 $6$。
- $a$ 四舍五入到第二位的值为 $0.59$，第二位为 $9$。
- $a$ 四舍五入到第三位的值为 $0.588$，第三位为 $8$。
- $a$ 四舍五入到第四位的值为 $0.5877$，第四位为 $7$。

因此 $a = 0.\dot{5}87\dot{6}$ 符合题目要求。

可以证明，没有其他答案，故符合条件的 $a$ 的和为 $0.\dot{5}87\dot{6}$，乘以 $10^4 - 1$ 后为 $5876$。

## 数据范围

对于所有数据，满足 $1 \le n \le 10^6$，$0 \le b_i \le 9$。


---

---
title: "[蓝桥杯 2023 国 C] 定时任务"
layout: "post"
diff: 普及/提高-
pid: P12240
tag: ['模拟', '字符串', '2023', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 C] 定时任务
## 题目描述

Cron 表达式在定时任务中经常被使用，在这里我们用了一种简化后的版本 SimpleCron 表达式：SimpleCron 表达式是一个具有时间含义的字符串，字符串以 $4$ 个空格隔开，分为 $5$ 个域，格式为 $X \ X \ X \ X \ X$，其中 $X$ 是一个域的占位符。$5$ 个域从左至右依次为秒 $(0 - 59)$、分钟 $(0 - 59)$、小时 $(0 - 23)$、日期 $(1 - 31)$、月份 $(1 - 12)$，其中括号内为他们各自的取值范围。同时域内取值也可以使用一些特殊字符（每个域内只能使用一种特殊字符）：

1. 特殊字符 $\tt{*}$（ASCII 码为 $42$）表示所有可能的值。例如：在分钟域内表示每一分钟；在日期域内表示月内的每一天。
2. 特殊字符 $\tt{,}$（ASCII 码为 $44$）表示列出枚举值。例如：在秒域内，$3,20$ 表示分别在 3 秒和 20 秒执行一次任务。
3. 特殊字符 $\tt{-}$（ASCII 码为 $45$）表示范围，可以视为连续的若干个枚举值。例如：$1 - 5$ 等价于 $1,2,3,4,5$。

例如，

$$ 421,3,151 - 31 * $$

表示的含义是每个月份中的每一天中的 $01:02:04$、$03:02:04$、$15:02:04$ 这三个时刻各执行一次，在 $2023$ 年一共会执行 $1095$ 次。

现在给出你一个合法的 SimpleCron 表达式，其中用到的所有数字均没有前导零。请问在 $2023$ 一整年当中，使用了这个表达式的定时任务总计会执行多少次？
## 输入格式

输入一行，包含一个 SimpleCron 字符串。
## 输出格式

输出一行，包含一个整数表示答案。
## 样例

### 样例输入 #1
```
4 2 1,3,15 1-31 *
```
### 样例输出 #1
```
1095
```
## 提示

### 评测用例规模与约定

对于所有评测用例，$0 \leq$ 秒域的取值 $\leq 59$，$0 \leq$ 分钟域的取值 $\leq$ $59$，$0 \leq$ 小时域的取值 $\leq 23$，$1 \leq$ 日期域的取值 $\leq 31$，$1 \leq$ 月份域的取值 $\leq 12$。


---

---
title: "[蓝桥杯 2024 国 Java B] 宝塔"
layout: "post"
diff: 普及/提高-
pid: P12253
tag: ['搜索', '2024', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2024 国 Java B] 宝塔
## 题目描述

小蓝最近迷上了宝塔游戏，这是一款迷宫填数游戏，玩家需要按照规则将高度为 $1$ 至 $N$ 的宝塔放置在一个 $N \times N$ 大小的水平放置的棋盘当中，每个宝塔占据棋盘的一个方格。具体规则如下：

1. 宝塔的高度只有 $1, 2, \ldots, N$。
2. 每一行、每一列中不可以出现相同高度的宝塔。
3. 棋盘周围的箭头中的数字表示从这个位置看向棋盘时可以看到的宝塔个数。

下图 1 是一个棋盘以及答案以供参考。图 2 是你需要解决的问题，你需要输出 $25$ 个数字表示答案，按照棋盘布局从左至右、从上至下的顺序输出即可。例如对于图 1 对应的棋盘而言，输出的答案是：$1432432121433214$。题目保证答案只有一个。

![](https://cdn.luogu.com.cn/upload/image_hosting/e1n8xxik.png)
## 输出格式

这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只需要**编写一个程序输出这个整数**，输出多余的内容将无法得分。


---

---
title: "[KOI 2024 Round 2] 路灯"
layout: "post"
diff: 普及/提高-
pid: P12648
tag: ['模拟', '数学', '2024', '枚举', '排序', 'KOI（韩国）']
---
# [KOI 2024 Round 2] 路灯
## 题目背景

试题来源：<https://koi.or.kr/archives/>。中文翻译做了少量本土化修改。

按照[署名—非商业性使用—相同方式共享 4.0 协议国际版](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans)进行授权。
## 题目描述

在一条数轴表示的直线道路上，安装了 $N$ 盏路灯。每盏路灯的位置按从左到右依次为 $A_1 < A_2 < \cdots < A_N$。

我们定义某个位置 $x$ 的“黑暗程度”为该位置到所有路灯之间距离的最小值。即，黑暗程度等于数列 $|A_1 - x|, |A_2 - x|, \dots, |A_N - x|$ 中的最小值。其中，$|y|$ 表示 $y$ 的绝对值，若 $y \geq 0$，则 $|y| = y$；若 $y < 0$，则 $|y| = -y$。

例如，若 $N = 3$，且路灯分别位于 $A_1 = 1$、$A_2 = 4$、$A_3 = 8$，那么从位置 $x = 0$ 到 $x = 10$ 的黑暗程度如下：

| 位置 $x$ | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
|----------|---|---|---|---|---|---|---|---|---|----|----|
| 黑暗程度 | 1 | 0 | 1 | 1 | 0 | 1 | 2 | 1 | 0 | 1  | 2  |
| 是否有灯 |   | O |   |   | O |   |   |   | O |    |    |

给定一个整数 $L$，我们关心从 $x = 0$ 到 $x = L$ 这 $L+1$ 个整数位置的黑暗程度。请你编程，输出其中按黑暗程度从小到大排序后的前 $K$ 小的值。
## 输入格式

第一行输入三个整数 $L,\ N,\ K$，用空格隔开。  
第二行输入 $N$ 个整数 $A_1, A_2, \dots, A_N$，表示每盏路灯的位置，以空格隔开。

## 输出格式

输出 $K$ 行，第 $i$ 行输出从小到大排序后的第 $i$ 小黑暗程度值。

## 样例

### 样例输入 #1
```
10 3 4
1 4 8
```
### 样例输出 #1
```
0
0
0
1
```
### 样例输入 #2
```
4 5 5
0 1 2 3 4
```
### 样例输出 #2
```
0
0
0
0
0
```
### 样例输入 #3
```
7 1 4
3
```
### 样例输出 #3
```
0
1
1
2
```
### 样例输入 #4
```
9 4 10
0 3 6 9
```
### 样例输出 #4
```
0
0
0
0
1
1
1
1
1
1
```
## 提示

**约束条件**

- 所有输入为整数。
- $1 \leq L \leq 10^{18}$
- $1 \leq N \leq 300\,000$
- $1 \leq K \leq 500\,000$
- $K \leq L + 1$
- $0 \leq A_1 < A_2 < \cdots < A_N \leq L$

**子问题**

1. （10 分）$N = 1$  
2. （20 分）$N \leq 2\,500,\ L \leq 2\,500$  
3. （15 分）$2 \leq N$ 且 $N - 1$ 整除 $L$，且 $A_i = \dfrac{L}{N-1} \times (i - 1)$  
4. （20 分）$L \leq 5\,000\,000$  
5. （35 分）无额外限制条件

翻译由 ChatGPT-4o 完成


---

---
title: "尼克的任务"
layout: "post"
diff: 普及/提高-
pid: P1280
tag: ['动态规划 DP', '枚举', '排序']
---
# 尼克的任务
## 题目描述

尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。

尼克的一个工作日为 $n$ 分钟，从第 $1$ 分钟开始到第 $n$ 分钟结束。当尼克到达单位后他就开始干活，公司一共有 $k$ 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 $p$ 分钟开始，持续时间为 $t$ 分钟，则该任务将在第 $(p+t-1)$ 分钟结束。

写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。
## 输入格式

输入数据第一行含两个用空格隔开的整数 $n$ 和 $k$。

接下来共有 $k$ 行，每一行有两个用空格隔开的整数 $p$ 和 $t$，表示该任务从第 $p$ 分钟开始，持续时间为 $t$ 分钟。
## 输出格式

输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。
## 样例

### 样例输入 #1
```
15 6
1 2
1 6
4 11
8 5
8 1
11 5

```
### 样例输出 #1
```
4

```
## 提示

#### 数据规模与约定

- 对于 $100\%$ 的数据，保证 $1 \leq n \leq 10^4,1 \leq k \leq 10^4,1 \leq p \leq n,1 \leq p+t-1 \leq n$。


---

---
title: "[蓝桥杯 2025 国 A] 土地整平计划"
layout: "post"
diff: 普及/提高-
pid: P12842
tag: ['2025', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2025 国 A] 土地整平计划
## 题目描述

小蓝作为一个二维生物快乐地生活在二维坐标系中，他最近得到了一块土地，他想把这块土地整平用于修建花园。具体来说，这块土地从左到右长度为 $n$ 格，第 $i$ 格的高度为 $h_i (i \in [1, n])$。小蓝每次可以花费代价 $w$ 将一段连续的区间 $[l, r]$ 中的土地高度都变为 $w$，其中 $l \leq r$，这段区间需要满足以下三组条件之一：

1. $l = 1$, $r < n$，且对于 $i \in [l, r]$ 有 $h_i \neq h_{r+1}$，此时代价 $w = h_{r+1}$；
2. $l > 1$, $r = n$，且对于 $i \in [l, r]$ 有 $h_i \neq h_{l-1}$，此时代价 $w = h_{l-1}$；
3. $1 < l \leq r < n$，$h_{l-1} = h_{r+1}$，且对于 $i \in [l, r]$ 有 $h_i \neq h_{l-1}$，此时代价 $w = h_{l-1} = h_{r+1}$。

小蓝希望在若干次操作之后将这块土地整平，即所有格子的高度都相等，并且花费的代价总和最小。请你帮助他计算一下最小花费。

## 输入格式

输入的第一行包含一个正整数 $n$。

第二行包含 $n$ 个正整数 $h_1, h_2, \ldots, h_n$，相邻整数之间使用一个空格分隔。
## 输出格式

输出一行包含一个整数表示答案。
## 样例

### 样例输入 #1
```
8
5 4 10 4 20 5 4 5
```
### 样例输出 #1
```
10
```
## 提示

**【样例说明】**

选择将土地高度都变为 $5$，只需操作两次：将 $[2,5]$ 和 $[7,7]$ 的高度都变为 $5$，代价总和为 $10$。

**【评测用例规模与约定】**

对于 50% 的评测用例，$1 \leq n \leq 5000$；

对于所有评测用例，$1 \leq n \leq 10^6$，$1 \leq h_i \leq 10^6$。


---

---
title: "[GCJ 2012 Qualification] Recycled Numbers"
layout: "post"
diff: 普及/提高-
pid: P13313
tag: ['模拟', '2012', '枚举', 'Google Code Jam']
---
# [GCJ 2012 Qualification] Recycled Numbers
## 题目描述

Do you ever become frustrated with television because you keep seeing the same things, recycled over and over again? Well I personally don't care about television, but I do sometimes feel that way about numbers.

Let's say a pair of distinct positive integers $(n, m)$ is *recycled* if you can obtain $m$ by moving some digits from the back of $n$ to the front without changing their order. For example, $(12345, 34512)$ is a recycled pair since you can obtain $34512$ by moving $345$ from the end of $12345$ to the front. Note that $n$ and $m$ must have the same number of digits in order to be a recycled pair. Neither $n$ nor $m$ can have leading zeros.

Given integers $A$ and $B$ with the same number of digits and no leading zeros, how many distinct recycled pairs $(n, m)$ are there with A $\leqslant n < m \leqslant$ B?

## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case consists of a single line containing the integers $A$ and $B$.

## 输出格式

For each test case, output one line containing "Case #x: y", where $x$ is the case number (starting from 1), and $y$ is the number of recycled pairs $(n, m)$ with $A \leqslant n < m \leqslant B$.
## 样例

### 样例输入 #1
```
4
1 9
10 40
100 500
1111 2222
```
### 样例输出 #1
```
Case #1: 0
Case #2: 3
Case #3: 156
Case #4: 287
```
## 提示

**Are we sure about the output to Case #4?**

Yes, we're sure about the output to Case #4.

**Limits**

- $1 \leq T \leq 50$.
- $A$ and $B$ have the same number of digits.

**Test set 1 (10 Pts, Visible Verdict)**

$1 \leq A \leq B \leq 1000$.

**Test set 2 (15 Pts, Hidden Verdict)**

$1 \leq A \leq B \leq 2000000$.


---

---
title: "[GCJ 2010 #2] Elegant Diamond"
layout: "post"
diff: 普及/提高-
pid: P13399
tag: ['模拟', '2010', '枚举', 'Google Code Jam']
---
# [GCJ 2010 #2] Elegant Diamond
## 题目描述

The king has hired you to make him an elegant diamond. An elegant diamond is a two-dimensional object made out of digits that's symmetric about a horizontal and a vertical axis. For example, the following four shapes are elegant diamonds:

```
   2       8      3     7
  3 3     8 8    2 2
 4 1 4     8      3
  3 3 
   2
```

These three shapes are diamonds, but are not elegant:

```
  2       1        3
 1 1     1 2      1 1
  1     1 1 1    3 1 3
         2 1      1 1
          1        2
```

These three shapes are not diamonds:

```
  1     2     8   8
 1 1   222      0
        2     00000
```

The king will start by giving you a diamond, which may not be elegant. Your job is to make it elegant by enhancing it, adding digits on to make a bigger diamond. Because you don't want to spend too much money, you want to do it with as little cost as possible.

### Definitions

A diamond of size $k$ is $2k-1$ lines of digits, 0-9, separated by single spaces, organized in the following way:

* Line $i$ ($1 \leq i \leq k$) contains $k-i$ spaces, then $i$ digits separated by single spaces.
* Line $i$ ($k < i < 2k$) contains $i-k$ spaces, then $2k-i$ digits separated by single spaces.

An elegant diamond of size $k$ is a diamond of size $k$ with the following two symmetry properties:

* Horizontal symmetry: Let $c_i$ be the number of digits on line $i$. The $j^{\text{th}}$ digit on line $i$ (where $j=1$ for the first digit) must be the same as the $c_i+1-j^{\text{th}}$ digit.
* Vertical symmetry: The $j^{\text{th}}$ digit on line $i$ (where $i=1$ for the first line) must be the same as the $j^{\text{th}}$ digit on line $2k-i$.

A diamond of size $k$ can be enhanced by adding digits to it. The result of enhancing a diamond of size $k$ has the following properties:

* The result is a diamond of size $\geq k$.
* The original diamond is part of the result. In other words, there exist some $X$ and some $Y$ such that, for all values of $i$ and $j$ such that the $j^{\text{th}}$ character of the $i^{\text{th}}$ line of the original is a digit (as opposed to a space), the $j+X^{\text{th}}$ character on the $i+Y^{\text{th}}$ line of the result is also a digit and it's the same as the $j^{\text{th}}$ character on the $i^{\text{th}}$ line of the original.

The cost of enhancing a diamond is equal to the number of digits in the result of the enhancement, minus the number of digits in the original diamond.
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case consists of a single integer $k$ in a line on its own, followed by a diamond of size $k$.

## 输出格式

For each test case, output one line containing "Case #$x$: $y$", where $x$ is the case number (starting from 1) and $y$ is the minimum cost required to enhance the given diamond into an elegant diamond. If the diamond is already elegant, $y=0$.
## 样例

### 样例输入 #1
```
4
1
0
2
 1
2 2
 1
2
 1
1 2
 1
3
  1
 6 3
9 5 5
 6 3
  1
```
### 样例输出 #1
```
Case #1: 0
Case #2: 0
Case #3: 5
Case #4: 7
```
## 提示

**Sample Explanation**

There are four cases. The first two cases start as elegant diamonds of size 1 and 2, respectively, and don't need to be enhanced; so the cost is 0. The third case can be enhanced to look like:
```
  3
 1 1
1 2 1
 1 1
  3
```
There are several possible enhancements, but this is one with the lowest possible cost, which is 5. In the fourth case we can enhance the diamond into the following elegant diamond:
```
   9
  1 1
 6 3 6
9 5 5 9
 6 3 6
  1 1
   9
```
...for a cost of 7.

**Limits**

- $1 \leq T \leq 100.$

**Small dataset (4 Pts, Test set 1 - Visible)**

- Time limit: ~~30~~ 3 seconds.
- $1 \leq k \leq 10.$

**Large dataset (8 Pts, Test set 2 - Hidden)**

- Time limit: ~~60~~ 6 seconds.
- $1 \leq k \leq 51.$


---

---
title: "[COCI 2019/2020 #4] Spiderman"
layout: "post"
diff: 普及/提高-
pid: P13423
tag: ['数学', '2019', '枚举', 'COCI（克罗地亚）']
---
# [COCI 2019/2020 #4] Spiderman
## 题目描述

Little Ivan likes to play Yamb and read Marvel superhero comics. His favorite superhero is spider-man, a friendly neighbourhood teenager named Peter Parker who got his superpowers via a radioactive spider bite. Ivan fantasizes that one day he will be able to jump from one skyscraper to another, just like spider-man does in the comics. During one such fantasy, he fell asleep.

In his dream he was no longer named Ivan, his name was Peter Parkour$^{1}$ and, you guessed it, he was able to use his parkour skills to jump between skyscrapers. He quickly realized that there are exactly $N$ skyscrapers in his surroundings and he somehow knew that $i$-th of those skyscrapers is $h_i$ meters tall. He knows that he is able to jump from the $i$-th skyscraper to the $j$-th skyscraper if the remainder when dividing $h_i$ with $h_j$ is equal to $K$. Help Ivan determine, for every skyscraper, the number of other skyscrapers he can jump to.

## 输入格式

The first line contains two integers $N$ ($1 \leq N \leq 300\,000$) and $K$ ($0 \leq K < 10^6$) from the task description.

The next line contains $N$ integers $h_i$ ($1 \leq h_i \leq 10^6$) from the task description.
## 输出格式

In a single line you should output $N$ space-separated integers such that the $i$-th of those integers represents the number of different skyscrapers on which Peter Parkour can jump on if he jumps from the $i$-th skyscraper.

## 样例

### 样例输入 #1
```
2 1
5 5
```
### 样例输出 #1
```
0 0
```
### 样例输入 #2
```
6 3
4 3 12 6 8 2
```
### 样例输出 #2
```
0 4 0 0 0 0
```
### 样例输入 #3
```
5 1
1 3 5 7 2
```
### 样例输出 #3
```
4 1 1 2 0
```
## 提示

Clarification of the third example:
- From the first skyscraper of height 1 Peter can jump on any other skyscraper.
- From the second skyscraper of height 3 Peter can jump only on a skyscraper of height 2.
- From the third skyscraper of height 5 Peter can jump only on a skyscraper of height 2.
- From the fourth skyscraper of height 7 Peter can jump on skyscrapers of heights 2 and 3.
- From the fifth skyscraper of height 2 Peter cannot jump on any other skyscraper.

### Scoring

- In test cases worth a total of $14$ points, it will hold $1 \leq N \leq 2\,000$
- In test cases worth an additional $14$ points, there will be at most $2\,000$ skyscrapers of different heights.
- In test cases worth an additional $14$ points, it will hold $K = 0$.


---

---
title: "[NWRRC 2023] Kitchen Timer"
layout: "post"
diff: 普及/提高-
pid: P13591
tag: ['2023', '枚举', '位运算', 'ICPC', 'NWRRC']
---
# [NWRRC 2023] Kitchen Timer
## 题目描述

Kenny has a microwave in his kitchen. The microwave has a pretty weird one-button timer interface. 

When you have put some food into the microwave and want it to start heating, you should press the button one or multiple times. When you press the button for the first time, the timer is set for $1$ minute. If you immediately press the button again, $2$ minutes are added to the timer, for a total of $3$ minutes. If you immediately press the button yet again, $4$ more minutes are added to the timer, and so on. If you press the button for the $k$-th time without a pause, it adds $2^k$ minutes to the timer.

It seems impossible to set the timer for some periods of time by using the button: for example, how to set the timer for $2$ minutes? Fortunately, you can reset the button counter by making a pause for one second. So, for example, if you press the button, make a pause for one second, and then press the button again, the timer is set for $2$ minutes. Another example: if you press, press, pause, press, press, press, the total time on the timer is $1+2+1+2+4=10$ minutes.

Kenny needs to heat his food for exactly $x$ minutes. Help him to find the minimum number of one-second pauses he needs to set the timer. Let us assume that only pauses take time, while time to press the button is ignored.
## 输入格式

Each test contains multiple test cases. The first line contains the number of test cases $t$ ($1 \le t \le 10^4$). The description of the test cases follows.

The only line of each test case contains a single integer $x$, denoting the number of minutes Kenny needs to heat the food for ($1 \le x \le 10^{18}$).
## 输出格式

For each test case, print a single integer, denoting the minimum number of one-second pauses Kenny needs to make when setting the microwave timer for $x$ minutes.
## 样例

### 样例输入 #1
```
7
1
2
3
4
10
239
123456789012
```
### 样例输出 #1
```
0
1
0
1
1
4
19
```
## 提示

In the first example test case, no pauses are needed: Kenny can just press the button once.

In the second example test case, Kenny can press, pause, press to set the timer for $2$ minutes.

In the third example test case, Kenny can just press the button twice to set the timer for $3$ minutes.

In the fourth example test case, Kenny can press, press, pause, press to set the timer for $1 + 2 + 1 = 4$ minutes.


---

---
title: "[USACO1.3] 虫洞 wormhole"
layout: "post"
diff: 普及/提高-
pid: P1444
tag: ['图论', 'USACO', '枚举']
---
# [USACO1.3] 虫洞 wormhole
## 题目描述

Farmer John 周末进行高能物理实验的结果却适得其反，导致 $n$ 个虫洞出现在农场上，农场是一个二维平面，没有两个虫洞处于同一位置。

根据他的计算，FJ 知道他的虫洞两两配对，形成 $\dfrac{n}{2}$ 对配对。例如，如果 $A$ 和 $B$ 的虫洞连接成一对，进入虫洞 $A$ 的任何物体将从虫洞 $B$ 出去，方向不变；反之亦然。  

然而这可能发生相当令人不快的后果。例如，假设有两个成对的虫洞 $A(1,1)$ 和 $B(3,1)$，Bessie 从 $(2,1)$ 开始朝着 $x$ 正方向移动。Bessie 将进入虫洞 $B(3,1)$，从 $A(1,1)$ 出去，然后再次进入 $B$，困在一个无限循环中！

FJ 知道他的农场里每个虫洞的确切位置。他知道 Bessie 总是向 $x$ 正方向走进来，虽然他不记得贝茜的当前位置。  

请帮助 FJ 计算有多少种虫洞配对方案，使得存在一个位置，使得 Bessie 从该位置出发，会被困在一个无限循环中。
## 输入格式

第一行一个正整数 $n$，表示虫洞数量。

接下来 $n$ 行，每行两个整数 $x,y$，表示一个虫洞的坐标。
## 输出格式

输出一行一个整数表示答案。

## 样例

### 样例输入 #1
```
4
0 0
1 0
1 1
0 1
```
### 样例输出 #1
```
2
```
## 提示

### 数据范围
对于 $100\%$ 的数据，$2\le n \le 12$，$0 \le x,y \le 10^9$。  
保证 $n$ 为偶数。

### 样例解释

将虫洞编号为 $1 \sim 4$，然后通过将 $1,2$ 和 $3,4$ 匹配，如果 Bessie 从 $(0,0)$ 到 $(1,0)$ 之间的任意位置出发，她会陷入无限循环中。

相似的，在相同的起始点，如果配对是 $1,3$ 和 $2,4$，贝茜也会陷入循环。（如果贝西从 $3$ 进去，$1$ 出来，她会走向 $2$ ，然后被传送到 $4$，最后又回到 $3$）

仅有 $1,4$ 和 $2,3$ 的配对允许贝茜从任何二维平面上的点向 $x$ 正方向走，而不出现无限循环。

题面翻译摘自 NOCOW


---

---
title: "[USACO2.2] 序言页码 Preface Numbering"
layout: "post"
diff: 普及/提高-
pid: P1465
tag: ['搜索', 'USACO', '枚举']
---
# [USACO2.2] 序言页码 Preface Numbering
## 题目描述

给定 $n$，求 $1 \sim n$ 的 **罗马数字** 表示中，各个字符出现了多少次。

比如 $n = 5$，表示为  I, II, III, IV, V。总共有 $7$ 个 I 出现，$2$ 个 V 出现。

## 输入格式

一个整数 $n$。

## 输出格式

每行一个字符和一个数字 $k$，表示这个字符出现了 $k$ 次。字符必须按罗马数字表中的递增顺序输出。

## 样例

### 样例输入 #1
```
5

```
### 样例输出 #1
```
I 7
V 2
```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 3500$。

翻译来自NOCOW

USACO 2.2



---

---
title: "积木城堡"
layout: "post"
diff: 普及/提高-
pid: P1504
tag: ['动态规划 DP', '枚举', '背包 DP']
---
# 积木城堡
## 题目描述

XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  

小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。

小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  

可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。

任务：

请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。

注意：一座城堡的高度，是组成它的所有积木的棱长之和。
## 输入格式

第一行是一个整数 $n$，表示一共有 $n$ 座城堡。  

以下 $n$ 行每行是一系列非负整数，用一个空格分隔，按从下往上的顺序依次给出一座城堡中所有积木的**棱长**。用 `-1` 结束。

## 输出格式

一个整数，表示最后城堡的最大可能的高度。  
如果找不到合适的方案，则输出 $0$。

## 样例

### 样例输入 #1
```
2
2 1 -1
3 2 1 -1

```
### 样例输出 #1
```
3

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1 \le n \le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。


---

---
title: "Likecloud-吃、吃、吃"
layout: "post"
diff: 普及/提高-
pid: P1508
tag: ['动态规划 DP', '搜索', '枚举']
---
# Likecloud-吃、吃、吃
## 题目背景

问世间，青春期为何物？

答曰：“甲亢，甲亢，再甲亢；挨饿，挨饿，再挨饿！”

## 题目描述

正处在某一特定时期之中的李大水牛由于消化系统比较发达，最近一直处在饥饿的状态中。某日上课，正当他饿得头昏眼花之时，眼前突然闪现出了一个 $n \times m(n,m \le 200)$ 的矩型的巨型大餐桌，而自己正处在这个大餐桌的一侧的中点下边。餐桌被划分为了 $n \times m$ 个小方格，每一个方格中都有一个圆形的巨型大餐盘，上面盛满了令李大水牛朝思暮想的食物。李大水牛已将餐桌上所有的食物按其所能提供的能量打了分（有些是负的，因为吃了要拉肚子），他决定从自己所处的位置吃到餐桌的另一侧，但他吃东西有一个习惯——只吃自己前方或左前方或右前方的盘中的食物。

由于李大水牛已饿得不想动脑了，而他又想获得最大的能量，因此，他将这个问题交给了你。

每组数据的出发点都是最后一行的中间位置的下方！
## 输入格式

第一行为m n（n为奇数），李大水牛一开始在最后一行的中间的下方

接下来为m\*n的数字距阵.

共有m行,每行n个数字.数字间用空格隔开.代表该格子上的盘中的食物所能提供的能量.

数字全是整数.

## 输出格式

一个数,为你所找出的最大能量值.

## 样例

### 样例输入 #1
```
6 7
16 4 3 12 6 0 3
4 -5 6 7 0 0 2
6 0 -1 -2 3 6 8
5 3 4 0 0 -2 7
-1 7 4 0 7 -5 6
0 -1 3 4 12 4 2

```
### 样例输出 #1
```
41

```
## 提示

快吃！快吃！快吃！



---

---
title: "I Hate It"
layout: "post"
diff: 普及/提高-
pid: P1531
tag: ['模拟', '线段树', '枚举']
---
# I Hate It
## 题目背景

很多学校流行一种比较的习惯。老师们很喜欢询问，从某某到某某当中，分数最高的是多少。这让很多学生很反感。

## 题目描述

不管你喜不喜欢，现在需要你做的是，就是按照老师的要求，写一个程序，模拟老师的询问。当然，老师有时候需要更新某位同学的成绩。

## 输入格式

第一行，有两个正整数 $n$ 和 $m$（$0<n \le 2\times 10^5,0<m<5000$），分别代表学生的数目和操作的数目。学生 ID 编号分别从 $1$ 编到 $n$。

第二行包含 $n$ 个整数，代表这 $n$ 个学生的初始成绩，其中第 $i$ 个数代表 ID 为 $i$ 的学生的成绩。

接下来有 $m$ 行。每一行有一个字符 $c$（只取 `Q` 或 `U`），和两个正整数 $a$，$b$。

- 当 $c$ 为 `Q` 的时候，表示这是一条询问操作，它询问 ID 从 $a$ 到 $b$（包括 $a,b$） 的学生当中，成绩最高的是多少；
- 当 $c$ 为 `U` 的时候，表示这是一条更新操作，如果当前 $a$ 学生的成绩低于 $b$，则把 ID 为 $a$ 的学生的成绩更改为 $b$，否则不改动。
## 输出格式

对于每一次询问操作输出一行一个整数，表示最高成绩。

## 样例

### 样例输入 #1
```
5 6
1 2 3 4 5
Q 1 5
U 3 6
Q 3 4
Q 4 5
U 2 9
Q 1 5
```
### 样例输出 #1
```
5
6
5
9

```


---

---
title: "尴尬的数字"
layout: "post"
diff: 普及/提高-
pid: P1555
tag: ['模拟', '数学', 'USACO', '枚举', '进制']
---
# 尴尬的数字
## 题目背景

Bessie 刚刚学会了不同进制数之间的转换，但是她总是犯错误，因为她的两个前蹄不能轻松的握住钢笔。

## 题目描述

每当 Bessie 将一个数转换成新的进制时，她总会写错一位数字。例如，她将 14 转化成 2 进制数，正确的结果是 1110，但她可能会写成 0110 或 1111。Bessie 从不会意外的增加或删减数字，所以她可能会写出以 0 开头的错误数字。

给出 Bessie 转换后 $N$ 的 2 进制形式和 3 进制形式，请计算出 $N$ 的正确数值（用十进制表示）。$N$ 可能会达到 $10^9$，输入数据保证解的存在唯一性。

## 输入格式

第一行，$N$ 的 2 进制表示（有一位是错误的数字）。

第二行，$N$ 的 3 进制表示（有一位是错误的数字）。
## 输出格式

$N$ 的正确值。

## 样例

### 样例输入 #1
```
1010
212
```
### 样例输出 #1
```
14
```


---

---
title: "倒水"
layout: "post"
diff: 普及/提高-
pid: P1582
tag: ['枚举', '进制']
---
# 倒水
## 题目描述

一天，CC 买了 $N$ 个容量可以认为是无限大的瓶子，开始时每个瓶子里有 $1$ 升水。接着 CC 发现瓶子实在太多了，于是他决定保留不超过 $K$ 个瓶子。每次他选择两个当前含水量相同的瓶子，把一个瓶子的水全部倒进另一个里，然后把空瓶丢弃。（不能丢弃有水的瓶子）

显然在某些情况下 CC 无法达到目标，比如 $N = 3$、$K = 1$。此时 CC 会重新买一些新的瓶子（新瓶子容量无限，开始时有 $1$ 升水），以达到目标。

现在 CC 想知道，最少需要买多少新瓶子才能达到目标呢？

## 输入格式

一行两个正整数 $N, K$（$1 \le N \le 2 \times 10^9$，$K \le 1000$）。
## 输出格式

一个非负整数，表示最少需要买多少新瓶子。

## 样例

### 样例输入 #1
```
3 1

```
### 样例输出 #1
```
1

```
### 样例输入 #2
```
13 2
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
1000000 5
```
### 样例输出 #3
```
15808
```


---

---
title: "四方定理"
layout: "post"
diff: 普及/提高-
pid: P1586
tag: ['动态规划 DP', '数学', '枚举']
---
# 四方定理
## 题目描述

四方定理是众所周知的：任意一个正整数$n$，可以分解为不超过四个整数的平方和。例如：$25=1^{2}+2^{2}+2^{2}+4^{2}$，当然还有其他的分解方案，$25=4^{2}+3^{2}$和$25=5^{2}$。给定的正整数$n$，编程统计它能分解的方案总数。注意：$25=4^{2}+3^{2}$和$25=3^{2}+4^{2}$视为一种方案。

## 输入格式

第一行为正整数$t$($t\le 100$)，接下来$t$行，每行一个正整数$n$($n\le 32768$)。

## 输出格式

对于每个正整数$n$，输出方案总数。

## 样例

### 样例输入 #1
```
1
2003
```
### 样例输出 #1
```
48
```


---

---
title: "集合"
layout: "post"
diff: 普及/提高-
pid: P1621
tag: ['搜索', '数学', '并查集', '枚举', '素数判断,质数,筛法']
---
# 集合
## 题目描述

Caima 给你了所有 $[a,b]$ 范围内的整数。一开始每个整数都属于各自的集合。每次你需要选择两个属于不同集合的整数，如果这两个整数拥有大于等于 $p$ 的公共质因数，那么把它们所在的集合合并。

重复如上操作，直到没有可以合并的集合为止。

现在 Caima 想知道，最后有多少个集合。
## 输入格式

一行，共三个整数 $a,b,p$，用空格隔开。
## 输出格式

一个数，表示最终集合的个数。

## 样例

### 样例输入 #1
```
10 20 3
```
### 样例输出 #1
```
7
```
## 提示

#### 样例 1 解释

对于样例给定的数据，最后有 $\{10,20,12,15,18\},\{13\},\{14\},\{16\},\{17\},\{19\},\{11\}$ 共 $7$ 个集合，所以输出应该为 $7$。

#### 数据规模与约定
- 对于 $80\%$ 的数据，$1 \leq a \leq b \leq 10^3$。
- 对于 $100%$ 的数据，$1 \leq a \leq b \leq 10^5,2 \leq p \leq b$。




---

---
title: "贪婪的Copy"
layout: "post"
diff: 普及/提高-
pid: P1690
tag: ['搜索', '枚举', '最短路']
---
# 贪婪的Copy
## 题目描述

Copy 从卢牛那里听说在一片叫 yz 的神的领域埋藏着不少宝藏，于是 Copy 来到了这个被划分为 $n$ 个区域的神地。卢牛告诉了Copy这里共有 $n$ 个宝藏，分别放在第 $P_i$ 个 $(1\le P_i\le N)$ 区域。Copy还得知了每个区域之间的距离。现在 Copy 从 $1$ 号区域出发，要获得所有的宝藏并到 $n$ 号区域离开。Copy 很懒，只好来找你为他寻找一条合适的线路，使得他走过的距离最短。

## 输入格式

第一行一个正整数 $N(1\le N\le 100)$

接下来一个 $N\times N$ 的矩阵，第 $i+1$ 行第 $j$ 列的数字表示区域 $i,j$ 之间的距离。每个距离用空格隔开，距离保证 $i\to j\le 1000$。请注意的 $i \to j$ 距离并不一定等于 $j \to i$ 的距离。

第 $N+2$ 行一个整数 $P(0\le P\le 10)$。

第 $N+3$ 行共 $P$ 个用空格隔开的整数，表示有宝藏的区域编号。

## 输出格式

一个整数，为 Copy 获得全部宝藏需要的最短距离。数据保证答案小于等于 maxlongint。

## 样例

### 样例输入 #1
```
2
0 4
5 0
2
1 2

```
### 样例输出 #1
```
4

```
### 样例输入 #2
```
3
0 2 6
1 0 4
7 10 0
1
2

```
### 样例输出 #2
```
6

```
## 提示

- 对 $30\%$ 的数据，$1\le n\le 15$，其余如题所述。
- 对 $100\%$ 的数据，全部数据范围如题所述。



---

---
title: "洛谷的文件夹"
layout: "post"
diff: 普及/提高-
pid: P1738
tag: ['模拟', '字符串', '树形数据结构', '洛谷原创', '枚举']
---
# 洛谷的文件夹
## 题目描述

kkksc03 是个非凡的空想家！在短时间内他设想了大量网页，然后总是交给可怜的 lzn 去实现。

洛谷的网页端，有很多文件夹，文件夹还套着文件夹。

例如：$\verb!/luogu/application/controller!$ 表示根目录下有一个名称为 $\verb!luogu!$ 的文件夹，这个文件夹下有一个名称 $\verb!application!$ 的文件夹，其中还有名为 $\verb!controller!$ 的文件夹。

每个路径的第 $1$ 个字符总是 $\verb!/!$，且没有两个连续的 $\verb!/!$，最后的字符不是 $\verb!/!$。所有名称仅包含数字和小写字母。

目前根目录是空的。kkksc03 想好了很多应该有的文件夹路径名。问题是，需要是使这些文件夹都存在，需要新建几个文件夹呢？

## 输入格式

输入文件第 $1$ 行为一个正整数 $N$。

接下来 $N$ 行，每行为一个描述路径的字符串，长度均不超过 $100$。
## 输出格式

输出应包含 $N$ 行，每行 $1$ 个正整数，第 $i$ 行输出若要使第 $1$ 个路径到第 $i$ 个路径存在，最少需要新建多少个文件夹。
## 样例

### 样例输入 #1
```
2
/luogu/application/controller
/luogu/application/view

```
### 样例输出 #1
```
3
4

```
### 样例输入 #2
```
3
/chicken
/chicken/egg
/chicken
```
### 样例输出 #2
```
1
2
2
```
### 样例输入 #3
```
4
/a
/a/b
/a/c
/b/b
```
### 样例输出 #3
```
1
2
3
5
```
## 提示

### 数据范围及约定


- 对于 $20\%$ 数据，有 $N \le 20$；
- 对于 $50\%$ 数据，有 $N \le 200$；
- 另有 $30\%$ 数据，有对于所有路径最多存在两个 $\verb!/!$（包含第 $1$ 个字符）；
- 对于所有数据，$N \le 1000$。


---

---
title: "素数密度"
layout: "post"
diff: 普及/提高-
pid: P1835
tag: ['NOI 导刊', '枚举', '素数判断,质数,筛法']
---
# 素数密度
## 题目背景

UPD:

- 2024.8.12：加入一组 Hack 数据。
## 题目描述

 给定 $L,R$，请计算区间 $[L,R]$ 中素数的个数。

   $1\leq L\leq R < 2^{31}$，$R-L\leq 10^6$。
## 输入格式

第一行，两个正整数 $L$ 和 $R$。
## 输出格式

一行，一个整数，表示区间中素数的个数。

## 样例

### 样例输入 #1
```
2 11
```
### 样例输出 #1
```
5
```


---

---
title: "打开所有的灯"
layout: "post"
diff: 普及/提高-
pid: P2040
tag: ['模拟', '搜索', '递归', '枚举', '剪枝']
---
# 打开所有的灯
## 题目背景

pmshz在玩一个益(ruo)智(zhi)的小游戏，目的是打开九盏灯所有的灯，这样的游戏难倒了pmshz。。。

## 题目描述

这个灯很奇(fan)怪(ren)，点一下就会将这个灯和其周围四盏灯的开关状态全部改变。现在你的任务就是就是告诉pmshz要全部打开这些灯。



例如
```
0  1  1
1  0  0
1  0  1
```

点一下最中间的灯【2,2】就变成了
```
0  0  1
0  1  1
1  1  1
```

再点一下左上角的灯【1,1】就变成了

```
1  1  1
1  1  1
1  1  1
```

达成目标。最少需要2步。

输出2即可。

## 输入格式

九个数字，3\*3的格式输入，每两个数字中间只有一个空格，表示灯初始的开关状态。（0表示关，1表示开）

## 输出格式

1个整数，表示最少打开所有灯所需要的步数。

## 样例

### 样例输入 #1
```
0 1 1
1 0 0
1 0 1
```
### 样例输出 #1
```
2
```
## 提示

这个题水不水，就看你怎么考虑了。。。。



---

---
title: "魔术棋子"
layout: "post"
diff: 普及/提高-
pid: P2049
tag: ['动态规划 DP', '枚举', '背包 DP']
---
# 魔术棋子
## 题目描述

在一个 $M \times N$ 的魔术棋盘中，每个格子中均有一个整数，当棋子走进这个格子中，则此棋子上的数会被乘以此格子中的数。一个棋子从左上角走到右下角，只能向右或向下行动，请问此棋子走到右下角后，模（mod）$K$ 可以为几？

如以下 $2 \times 3$ 棋盘：

```
3    4    4
5    6    6
```
棋子初始数为 $1$，开始从左上角进入棋盘，走到右下角，上图中，最后棋子上的数可能为 $288,432$ 或 $540$。所以当 $K = 5$ 时，可求得最后的结果为：$0,2,3$。

## 输入格式

第一行为三个数，分别为 $M,N,K (1 \leq M,N,K \leq 100)$。以下 $M$ 行，每行 $N$ 个数，分别为此方阵中的数。

## 输出格式

第一行为可能的结果个数。

第二行为所有可能的结果（按升序输出）。
## 样例

### 样例输入 #1
```
2 3 5
3 4 4
5 6 6

```
### 样例输出 #1
```
3
0 2 3

```


---

---
title: "最后的迷宫"
layout: "post"
diff: 普及/提高-
pid: P2199
tag: ['搜索', '枚举', '广度优先搜索 BFS', '队列']
---
# 最后的迷宫
## 题目背景

哈利•波特作为三强争霸赛的第四名选手，历尽艰险闯到了最后一关——迷宫。

现在，迷宫里只剩下哈利和塞德里克了，哈利只有在塞德里克前面拿到奖杯，才能赢得比赛。哈利只要能看到奖杯，就可以用飞来咒拿到它，所以，现在的问题是哈利如何能尽早地看到奖杯。

## 题目描述

哈利的视力非常好，他能从迷宫的一端沿直线看到迷宫的另一端（但他只能看八个方向——东北，东，东南，南，西南……），而且他跑得非常快，跑一步（向上、下、左、右移动一格）只需要 $1\text{s}$。但迷宫是不透光的，而且，要烧掉迷宫的墙也不容易，所以哈利决定绕到一个能够看到奖杯的地方。现在，哈利希望你能帮他确定最短需要多长时间才能拿到奖杯。

## 输入格式

第一行为 $2$ 个数 $N,M$ 表示迷宫的规模（$N$ 为高，$M$ 为宽）

接下来是 $N \times M$ 的迷宫，$\texttt{O}$ 表示空地，$\texttt{X}$ 表示墙。

最后是多对数据，分别是奖杯坐标及哈利的坐标（显然不可能在墙上），每对占一行，$0$ 为结束标志。

## 输出格式

根据每对数据，计算哈利拿到奖杯的最短时间，每对一行。如果魔法部有意难为选手，用墙将奖杯包围了起来，输出 $\texttt{Poor Harry}$。

## 样例

### 样例输入 #1
```
3 4
OXXO
XXOO
XOOO
3 2 2 4
3 3 1 1
0 0 0 0

```
### 样例输出 #1
```
1
Poor Harry

```
## 提示

对于 $30\%$ 的数据，有 $N\times M\le100$；

对于 $60\%$ 的数据，有 $N\times M\le1600$；

对于 $100\%$ 的数据，有 $N\times M\le16384$。

询问数据对数不超过 $512$。



---

---
title: "[HNOI2003] 激光炸弹"
layout: "post"
diff: 普及/提高-
pid: P2280
tag: ['动态规划 DP', '2003', '各省省选', '湖南', '枚举', '前缀和']
---
# [HNOI2003] 激光炸弹
## 题目描述

一种新型的激光炸弹，可以摧毁一个边长为 $m$ 的正方形内的所有目标。现在地图上有 $n$ 个目标，用整数 $x_i$ , $y_i$ 表示目标在地图上的位置，每个目标都有一个价值 $v_i$。激光炸弹的投放是通过卫星定位的，但其有一个缺点，就是其爆破范围，即那个边长为 $m$ 的边必须与 $x$ 轴，$y$ 轴平行。若目标位于爆破正方形的边上，该目标不会被摧毁。

现在你的任务是计算一颗炸弹最多能炸掉地图上总价值为多少的目标。

可能存在多个目标在同一位置上的情况。
## 输入格式

输入的第一行为整数 $n$ 和整数 $m$；

接下来的 $n$ 行，每行有 $3$ 个整数 $x, y, v$，表示一个目标的坐标与价值。
## 输出格式

输出仅有一个正整数，表示一颗炸弹最多能炸掉地图上总价值为多少的目标（结果不会超过 $32767$ ）。
## 样例

### 样例输入 #1
```
2 1
0 0 1
1 1 1

```
### 样例输出 #1
```
1
```
## 提示

**数据规模与约定**

- 对于 $100\%$ 的数据，保证 $1 \le n \le 10^4$，$0 \le x_i ,y_i \le 5\times 10^3$，$1 \le m \le 5\times 10^3$，$1 \le v_i < 100$。


---

---
title: "[HNOI2005] 汤姆的游戏"
layout: "post"
diff: 普及/提高-
pid: P2313
tag: ['计算几何', '2005', '各省省选', '湖南', '枚举']
---
# [HNOI2005] 汤姆的游戏
## 题目描述

汤姆是个好动的孩子,今天他突然对圆规和直尺来了兴趣。于是他开始在一张很大很大的白纸上画很多很多的矩形和圆。画着画着,一不小心将他的爆米花弄撒了,于是白纸上就多了好多好多的爆米花。汤姆发现爆米花在白纸上看起来就像一个个点,有些点落在矩形或圆内部,而有些则在外面。于是汤姆开始数每个点在多少个矩形或圆内部。毕竟汤姆还只是个孩子,而且点、矩形和圆又非常多。所以汤姆数了好一会都数不清,于是就向聪明的你求助了。你的任务是：在给定平面上N个图形(矩形或圆)以及M个点后，请你求出每个点在多少个矩形或圆内部(这里假设矩形的边都平行于坐标轴)。

## 输入格式

从文件input.txt中读入数据，文件第一行为两个正整数N和M，其中N表示有多少个图形(矩形或圆)，M表示有多少个点。接下来的N行是对每个图形的描述，具体来说，第i+1行表示第i个图形。先是一个字母,若该字母为“r”，则表示该图形是一个矩形,这时后面将有4个实数x1,y1,x2,y2，表示该矩形的一对对角顶点的坐标分别为(x1,y1)和(x2,y2)；若该字母为“c”，则表示该图形是一个圆,这时后面将有3个实数x,y,r,表示该圆以(x,y)为圆心并以r为半径。最后M行是对每个点的描述，其中每行将有两个实数x,y,表示一个坐标为(x,y)的点。

## 输出格式

输出文件output.txt中包含M行,每行是一个整数,其中第i行的整数表示第i个点在多少个图形内部(当某点在一个图形的边界上时，我们认为该点不在这个图形的内部)。

## 样例

### 样例输入 #1
```
3 4 
r 1.015 0.750 5.000 4.000
c 6.000 5.000 2.020
r 6.500 7.200 7.800 9.200
3.500 2.500
4.995 3.990
2.300 8.150
6.900 8.000

```
### 样例输出 #1
```
1
2
0
1

```
## 提示

对于100%的数据，$N,M\le 500$



---

---
title: "赚钱"
layout: "post"
diff: 普及/提高-
pid: P2648
tag: ['枚举']
---
# 赚钱
## 题目背景

改编自某题

## 题目描述

zzy现在决定环游中国，顺便赚点钱。zzy在一个城市最多只能赚D元，然后他可以选择退休也就是停止赚钱，或者去其它城市工作。当然，他可以在别处工作一阵子后又回到原来的城市再赚D元。这样的往返次数是没有任何限制的。

城市间有P条单向路径连接，共有C座城市，编号从1到C。路径i从城市Ai到城市Bi，在路径行走上不用任何花费。

zzy还可以乘飞机从某个城市飞到另一个城市。共有F条单向的航线，第i条航线是从城市Ji飞到另一座城市Ki，费用是Ti元。假如zzy身上没有现钱，他可以用以后赚的钱来付机票钱。

zzy可以从任何一个城市出发开始赚钱，并且选择在任何时候、任何城市退休。现在zzy想要知道，如果在工作时间上不做限制，那么zzy共可以赚多少钱呢？如果赚的钱也不会出现限制，那么就输出orz。

## 输入格式

第一行，4个用空格分开的正整数，D，P，C，F。

第二行到P+1行，第i+1行包含2个用空格分开的整数，表示一条从城市Ai到城市Bi的单向路径。

接下来的F行，每行3个用空格分开的正整数，表示一条从城市Ji到城市Ki的单向航线，费用为Ti。

## 输出格式

如果zzy赚的钱没有限制，输出orz。如果有限制，那么就输出在给定的规则下zzy最多可以赚到的钱数。

## 样例

### 样例输入 #1
```
100 3 5 2
1 5
2 3
1 4
5 2 150
2 5 120
```
### 样例输出 #1
```
250
```
## 提示

对于100%的数据，1<=D<=1000，1<=P<=200，2<=C<=300，1<=F<=400。



---

---
title: "2038年问题"
layout: "post"
diff: 普及/提高-
pid: P2655
tag: ['模拟', '搜索', '洛谷原创', '枚举']
---
# 2038年问题
## 题目描述

网络时代，机会与危机共存。“千年虫”解决之后，会不会有新的“虫”出现？回答是肯定的，“2038年”就是一个新的关卡。

也许大家都已经知道计算机的2000年问题是什么概念，但是什么时候又冒出来一个2038年问题的呢？

用C语言编制的程序不会碰到2000年问题，但是会有2038年问题。这是因为，大多数C语言程序都使用到一个叫做“标准时间库”的程序库，这个时间库用一个标准的4字节也就是32位的形式来储存时间信息。

当初设计的时候，这个4字节的时间格式把1970年1月1日凌晨0时0分0秒作为时间起点，这时的时间值为0。以后所有的时间都是从这个时间开始一秒一秒累积得来的。

比方说如果时间已经累积到了919642718这个数值，就是说这时距离1970年1月1日凌晨0时0分0已经过去了919642718秒，换算一下就应该是1999年2月21日星期天16时18分38秒。

这样计算时间的好处在于，把任意两个时间值相减之后，就可以很迅速地得到这两个时间之间相差的秒数，然后你可以利用别的程序把它换算成明白易懂的年月日时分秒的形式。

一个4字节也就是32位的存储空间的最大值是2147483647，请注意！2038年问题的关键也就在这里———当时间一秒一秒地跳完2147483647那惊心动魄的最后一秒后，它就会转为负数也就是说时间无效。那一刻的准确的时间为2038年1月19日星期二晚上03:14:07，之后所有用到这种“标准时间库”的C语言程序都会碰到时间计算上的麻烦。

你要解决的问题是，现有一台计算机，表示时间的变量长度为N位。给定一个“时间起点”，求出对于这个“时间起点”时间，最后的有效时间是什么时候。

## 输入格式

第一行为数据组数T

第2……T+1行，每行7个数字描述一组数据，分别为表示时间的变量长度（二进制位数），然后是“时间起点”的年份，月份，日期，小时，分钟，秒数。

## 输出格式

T行，对于每组数据，输出1行，6个数字，分别表示最后的有效时间的年份，月份，日期，小时，分钟，秒数。

## 样例

### 样例输入 #1
```
1                             

16 2000 1 1 0 0 0
```
### 样例输出 #1
```
2000 1 1 9 6 7
```
### 样例输入 #2
```
2

32 1970 1 1 0 0 0

32 2015 11 8 8 30 0
```
### 样例输出 #2
```
2038 1 19 3 14 7

2083 11 26 11 44 7
```
## 提示

对于50%的数据 变量的位数<=16;

对于所有数据，变量长度<=32,数据组数<=1000,0<=年份<=10000



---

---
title: "[USACO08FEB] Game of Lines S"
layout: "post"
diff: 普及/提高-
pid: P2665
tag: ['模拟', '2008', 'USACO', '枚举']
---
# [USACO08FEB] Game of Lines S
## 题目背景

Farmer John 最近发明了一个游戏，来考验自命不凡的贝茜。

## 题目描述

Farmer John has challenged Bessie to the following game: FJ has a board with dots marked at N (2 ≤ N ≤ 200) distinct lattice points. Dot i has the integer coordinates Xi and Yi (-1,000 ≤ Xi ≤ 1,000; -1,000 ≤ Yi ≤ 1,000).

Bessie can score a point in the game by picking two of the dots and drawing a straight line between them; however, she is not allowed to draw a line if she has already drawn another line that is parallel to that line. Bessie would like to know her chances of winning, so she has asked you to help find the maximum score she can obtain.

游戏开始的时 候，FJ 会给贝茜一块画着 $N (2 \le N \le 200)$ 个不重合的点的木板，其中第 $i$ 个点的横、纵坐标分别为 $X_i$ 和 $Y_i (-1000 \le X_i \le 1000, -1000 \le Y_i \le 1000)$。

贝茜可以选两个点画一条过它们的直线，当且仅当平面上不存在与画出直线 平行的直线。游戏结束时贝茜的得分，就是她画出的直线的总条数。为了在游戏中胜出，贝茜找到了你，希望你帮她计算一下最大可能得分。

## 输入格式

第 $1$ 行: 输入 1 个正整数：$N$

第 $2 \cdots N+1$ 行: 第 $i+1$ 行用 $2$ 个用空格隔开的整数$X_i,Y_i$，描述了点 $i$ 的坐标。

## 输出格式

第 1 行: 输出 1 个整数，表示贝茜的最大得分，即她能画出的互不平行的线段数

## 样例

### 样例输入 #1
```
4 
-1 1 
-2 0 
0 0 
1 1
```
### 样例输出 #1
```
4 
```
## 提示

贝茜能画出以下 $4$ 种斜率的直线：$-1$，$0$，$\dfrac{1}{3}$ 以及 $1$。


---

---
title: "[USACO3.2] 饲料调配 Feed Ratios"
layout: "post"
diff: 普及/提高-
pid: P2729
tag: ['搜索', '数学', 'USACO', '枚举', '剪枝']
---
# [USACO3.2] 饲料调配 Feed Ratios
## 题目背景

农夫约翰从来只用调配得最好的饲料来喂他的奶牛。饲料用三种原料调配成：大麦，燕麦和小麦。他知道自己的饲料精确的配比，在市场上是买不到这样的饲料的。他只好购买其他三种混合饲料（同样都由三种麦子组成），然后将它们混合，来调配他的完美饲料。

## 题目描述

给出三组整数，表示 大麦：燕麦：小麦 的比例，找出用这三种饲料调配 x：y：z 的饲料的方法。

例如，给出目标饲料 3：4：5 和三种饲料的比例：

1:2:3
3:7:1
2:1:2
你必须编程找出使这三种饲料用量最少的方案，要是不能用这三种饲料调配目标饲料，输出“NONE”。“用量最少”意味着三种饲料的用量（整数）的和必须最小。


对于上面的例子，你可以用8份饲料1，1份饲料2，和5份饲料3，来得到7份目标饲料：

8\*(1:2:3) + 1\*(3:7:1) + 5\*(2:1:2) = (21:28:35) = 7\*(3:4:5)

表示饲料比例的整数以及目标饲料的都是小于100的非负整数。表示各种饲料的份数的整数，都小于100。一种混合物的比例不会由其他混合物的比例直接相加得到。

## 输入格式

Line 1: 三个用空格分开的整数，表示目标饲料

Line 2..4: 每行包括三个用空格分开的整数，表示农夫约翰买进的饲料的比例

## 输出格式

输出文件要包括一行，这一行要么有四个整数，要么是“NONE”。前三个整数表示三种饲料的份数，用这样的配比可以得到目标饲料。第四个整数表示混合三种饲料后得到的目标饲料的份数。

## 样例

### 样例输入 #1
```
3 4 5
1 2 3
3 7 1
2 1 2 
```
### 样例输出 #1
```
8 1 5 7
```
## 提示

题目翻译来自NOCOW。

USACO Training Section 3.2



---

---
title: "[USACO09JAN] Best Spot S"
layout: "post"
diff: 普及/提高-
pid: P2935
tag: ['2009', 'USACO', '枚举', '最短路']
---
# [USACO09JAN] Best Spot S
## 题目描述

Bessie, always wishing to optimize her life, has realized that she really enjoys visiting F (1 <= F <= P) favorite pastures F\_i of the P (1 <= P <= 500; 1 <= F\_i <= P) total pastures (conveniently

numbered 1..P) that compose Farmer John's holdings.

Bessie knows that she can navigate the C (1 <= C <= 8,000) bidirectional cowpaths (conveniently numbered 1..C) that connect various pastures to travel to any pasture on the entire farm. Associated with each path P\_i is a time T\_i (1 <= T\_i <= 892) to traverse that path (in either direction) and two path endpoints a\_i and b\_i (1 <= a\_i <= P; 1 <= b\_i <= P).

Bessie wants to find the number of the best pasture to sleep in so that when she awakes, the average time to travel to any of her F favorite pastures is minimized.

By way of example, consider a farm laid out as the map below shows, where \*'d pasture numbers are favorites. The bracketed numbers are times to traverse the cowpaths.

```cpp

            1*--[4]--2--[2]--3
                     |       |
                    [3]     [4]
                     |       |
                     4--[3]--5--[1]---6---[6]---7--[7]--8*
                     |       |        |         |
                    [3]     [2]      [1]       [3]
                     |       |        |         |
                    13*      9--[3]--10*--[1]--11*--[3]--12*
```
The following table shows distances for potential 'best place' of pastures 4, 5, 6, 7, 9, 10, 11, and 12:

```cpp
      * * * * * * Favorites * * * * * *
 Potential      Pasture Pasture Pasture Pasture Pasture Pasture     Average
Best Pasture       1       8      10      11      12      13        Distance
------------      --      --      --      --      --      --      -----------
    4              7      16       5       6       9       3      46/6 = 7.67
    5             10      13       2       3       6       6      40/6 = 6.67
    6             11      12       1       2       5       7      38/6 = 6.33
    7             16       7       4       3       6      12      48/6 = 8.00
    9             12      14       3       4       7       8      48/6 = 8.00
   10             12      11       0       1       4       8      36/6 = 6.00 ** BEST
   11             13      10       1       0       3       9      36/6 = 6.00
   12             16      13       4       3       0      12      48/6 = 8.00

```
Thus, presuming these choices were the best ones (a program would have to check all of them somehow), the best place to sleep is pasture 10.

约翰拥有 $P(1 \leq P \leq 500)$ 个牧场，贝茜特别喜欢其中的 $F$ 个。所有的牧场由 $C(1 < C \leq 8000)$条双向路连接，第 $i$ 条路连接着 $a_i,b_i$，需要 $T_i(1 \leq T_i < 892)$ 个单位时间来通过。

作为一只总想优化自己生活方式的奶牛，贝茜喜欢自己某一天醒来，到达所有那 $F$ 个她喜欢的牧场的平均需时最小。那她前一天应该睡在哪个牧场呢？请帮助贝茜找到这个最佳牧场。

由样例解释可见，在样例环境下，牧场 $10$ 到所有贝茜喜欢的牧场的平均距离最小，为最佳牧场。

## 输入格式

\* Line 1: Three space-separated integers: P, F, and C

\* Lines 2..F+1: Line i+2 contains a single integer: F\_i

\* Lines F+2..C+F+1: Line i+F+1 describes cowpath i with three

space-separated integers: a\_i, b\_i, and T\_i

## 输出格式

\* Line 1: A single line with a single integer that is the best pasture in which to sleep. If more than one pasture is best, choose the smallest one.

## 样例

### 样例输入 #1
```
13 6 15 
11 
13 
10 
12 
8 
1 
2 4 3 
7 11 3 
10 11 1 
4 13 3 
9 10 3 
2 3 2 
3 5 4 
5 9 2 
6 7 6 
5 6 1 
1 2 4 
4 5 3 
11 12 3 
6 10 1 
7 8 7 

```
### 样例输出 #1
```
10 

```
## 提示

As the problem statement


As the problem statement.



---

---
title: "[USACO13JAN] Party Invitations S"
layout: "post"
diff: 普及/提高-
pid: P3068
tag: ['2013', 'USACO', '枚举', '前缀和']
---
# [USACO13JAN] Party Invitations S
## 题目描述

Farmer John is throwing a party and wants to invite some of his cows to show them how much he cares about his herd.  However, he also wants to invite the smallest possible number of cows, remembering all too well the disaster that resulted the last time he invited too many cows to a party.

Among FJ's cows, there are certain groups of friends that are hard to separate.  For any such group (say, of size k), if FJ invites at least k-1 of the cows in the group to the party, then he must invite the final cow as well, thereby including the entire group.  Groups can be of any size and may even overlap with each-other, although no two groups contain exactly the same set of members.  The sum of all group sizes is at most 250,000.

Given the groups among FJ's cows, please determine the minimum number of cows FJ can invite to his party, if he decides that he must definitely start by inviting cow #1 (his cows are conveniently numbered 1..N, with N at most 1,000,000).


## 输入格式

\* Line 1: Two space-separated integers: N (the number of cows), and G (the number of groups).

\* Lines 2..1+G: Each line describes a group of cows.  It starts with an integer giving the size S of the group, followed by the S cows in the group (each an integer in the range 1..N).


## 输出格式

\* Line 1: The minimum number of cows FJ can invite to his party.



## 样例

### 样例输入 #1
```
10 4 
2 1 3 
2 3 4 
6 1 2 3 4 6 7 
4 4 3 2 1 

```
### 样例输出 #1
```
4 

```
## 提示

There are 10 cows and 4 groups.  The first group contains cows 1 and 3, and so on.


In addition to cow #1, FJ must invite cow #3 (due to the first group constraint), cow #4 (due to the second group constraint), and also cow #2 (due to the final group constraint).


## 题目翻译

农夫约翰要举办一个聚会，他要邀请一些奶牛来参加。在约翰的奶牛朋友圈中，有一些奶牛是好基友，对于每一个奶牛朋友圈，没有一个完全与之相同的，假设这个奶牛朋友圈有 $k$ 头奶牛，如果约翰已经邀请了 $k-1$ 头，那么剩下的那头牛也得邀请。约翰想让你告诉他，他最少需要邀请多少头奶牛？我们假设 $1$ 号奶牛已经被邀请了。

**【输入格式】**

第一行 $N$ 和 $G$ 表示共有 $N$ 头奶牛和 $G$ 个朋友圈。

接下来 $G$ 行，每行开头输入一个整数 $k$，表示朋友圈里有 $k$ 头牛，接着输入 $k$ 个整数，表示朋友圈里的牛。

**【输出格式】**

一行，一个整数，表示约翰最少需要邀请的牛的头数。

**【数据范围】**

$1 \leq  N\leq1000000$。

设所有的奶牛朋友圈的大小之和为 $M$，则 $1 \leq  M\leq250000$。


---

---
title: "[USACO13FEB] Milk Scheduling S"
layout: "post"
diff: 普及/提高-
pid: P3074
tag: ['贪心', '2013', 'USACO', '枚举', '拓扑排序']
---
# [USACO13FEB] Milk Scheduling S
## 题目描述

Farmer John's N cows (1 <= N <= 10,000) are conveniently numbered 1..N. Each cow i takes T(i) units of time to milk.  Unfortunately, some cows must be milked before others, owing to the layout of FJ's barn.  If cow A must be milked before cow B, then FJ needs to completely finish milking A before he can start milking B.

In order to milk his cows as quickly as possible, FJ has hired a large number of farmhands to help with the task -- enough to milk any number of cows at the same time.  However, even though cows can be milked at the same time, there is a limit to how quickly the entire process can proceed due to the constraints requiring certain cows to be milked before others.  Please help FJ compute the minimum total time the milking process must take.

农民约翰有N头奶牛(1<=N<=10,000)，编号为1...N。每一头奶牛需要T(i)单位的时间来挤奶。不幸的是，由于FJ的仓库布局，一些奶牛要在别的牛之前挤奶。比如说，如果奶牛A必须在奶牛B前挤奶，FJ就需要在给奶牛B挤奶前结束给奶牛A的挤奶。


为了尽量完成挤奶任务，FJ聘请了一大批雇工协助任务——同一时刻足够去给任意数量的奶牛挤奶。然而，尽管奶牛可以同时挤奶，但仍需要满足以上的挤奶先后顺序。请帮助FJ计算挤奶过程中的最小总时间。

## 输入格式

\* Line 1: Two space-separated integers: N (the number of cows) and M (the number of milking constraints; 1 <= M <= 50,000).

\* Lines 2..1+N: Line i+1 contains the value of T(i) (1 <= T(i) <= 100,000).

\* Lines 2+N..1+N+M: Each line contains two space-separated integers A and B, indicating that cow A must be fully milked before one can start milking cow B.  These constraints will never form a cycle, so a solution is always possible.

## 输出格式

\* Line 1: The minimum amount of time required to milk all cows.

## 样例

### 样例输入 #1
```
3 1 
10 
5 
6 
3 2 

```
### 样例输出 #1
```
11 

```
## 提示

There are 3 cows.  The time required to milk each cow is 10, 5, and 6, respectively.  Cow 3 must be fully milked before we can start milking cow 2.


Cows 1 and 3 can initially be milked at the same time.  When cow 3 is finished with milking, cow 2 can then begin.  All cows are finished milking after 11 units of time have elapsed.



---

---
title: "[USACO13DEC] Milk Scheduling S"
layout: "post"
diff: 普及/提高-
pid: P3093
tag: ['贪心', '2013', 'USACO', '枚举']
---
# [USACO13DEC] Milk Scheduling S
## 题目描述

Farmer John has N cows that need to be milked (1 <= N <= 10,000), each of which takes only one unit of time to milk.

Being impatient animals, some cows will refuse to be milked if Farmer John waits too long to milk them.  More specifically, cow i produces g\_i gallons of milk (1 <= g\_i <= 1000), but only if she is milked before a deadline at time d\_i (1 <= d\_i <= 10,000).  Time starts at t=0, so at most x total cows can be milked prior to a deadline at time t=x.

Please help Farmer John determine the maximum amount of milk that he can obtain if he milks the cows optimally.

FJ有N(1 <= N <= 10,000)头牛要挤牛奶，每头牛需要花费1单位时间。


奶牛很厌烦等待，奶牛i在它的截止时间d\_i (1 <= d\_i <= 10,000)前挤g(1 <= g\_i <= 1000)的奶，否则将不能挤奶。时间t开始时为0，即在时间t=x时，最多可以挤x头奶牛。


请计算FJ的最大挤奶量。

## 输入格式

\* Line 1: The value of N.

\* Lines 2..1+N: Line i+1 contains the integers g\_i and d\_i.

## 输出格式

\* Line 1: The maximum number of gallons of milk Farmer John can obtain.

## 样例

### 样例输入 #1
```
4 
10 3 
7 5 
8 1 
2 1 

```
### 样例输出 #1
```
25 

```
## 提示

There are 4 cows.  The first produces 10 gallons of milk if milked by time 3, and so on.


Farmer John milks cow 3 first, giving up on cow 4 since she cannot be milked by her deadline due to the conflict with cow 3.  Farmer John then milks cows 1 and 2.



---

---
title: "[USACO15OPEN] Bessie Goes Moo S"
layout: "post"
diff: 普及/提高-
pid: P3123
tag: ['搜索', '2015', 'USACO', '枚举']
---
# [USACO15OPEN] Bessie Goes Moo S
## 题目描述

Farmer John and Bessie the cow love to exchange math puzzles in their free time.

The last puzzle FJ gave Bessie was quite difficult and she failed to solve it.

Now she wants to get even with FJ by giving him a challenging puzzle.

Bessie gives FJ the expression $(B+E+S+S+I+E)(G+O+E+S)(M+O+O)$, containing the seven variables $B,E,S,I,G,O,M$ (the "$O$" is a variable, not a zero).  For each variable, she gives FJ a list of up to 500 integer values the variable can possibly take.

She asks FJ to count the number of different ways he can assign values to the variables so the entire expression evaluates to a multiple of 7.

Note that the answer to this problem can be too large to fit into a 32-bit integer, so you probably want to use 64-bit integers (e.g., "long long"s in C or C++).
## 输入格式

The first line of the input contains an integer $N$.  The next $N$ lines each contain a variable and a possible value for that variable.  

Each variable will appear in this list at least once and at most 500 times. No possible value will be listed more than once for the same variable. All possible values will be in the range $-10^5$ to $10^5$.

## 输出格式

Print a single integer, giving the number of ways FJ can assign values to variables so the expression above evaluates to a multiple of 7.

## 样例

### 样例输入 #1
```
10
B 2
E 5
S 7
I 10
O 16
M 19
B 3
G 1
I 9
M 2
```
### 样例输出 #1
```
2
```
## 提示

The two possible assignments are


(B,E,S,I,G,O,M) = (2, 5, 7, 9,  1, 16, 19) -> 51,765

(B,E,S,I,G,O,B) = (2, 5, 7, 9,  1, 16, 2 ) -> 34,510

## 题目翻译

### 题目描述

Farmer John 和奶牛 Bessie 喜欢在空闲时间互相出数学谜题。

上一次 FJ 给 Bessie 出的谜题非常难，她没能解出来。

现在，她想通过给 FJ 出一个有挑战性的谜题来报复他。

Bessie 给 FJ 的表达式是 $(B+E+S+S+I+E)(G+O+E+S)(M+O+O)$，其中包含七个变量 $B,E,S,I,G,O,M$（"$O$" 是一个变量，不是零）。对于每个变量，她给 FJ 提供了一个最多包含 500 个整数值的列表，表示该变量可能取的值。

她要求 FJ 计算有多少种不同的方式可以为这些变量赋值，使得整个表达式的值是 7 的倍数。

注意，这个问题的答案可能太大，无法用 32 位整数表示，因此你可能需要使用 64 位整数（例如，C 或 C++ 中的 "long long"）。

### 输入格式

输入的第一行包含一个整数 $N$。接下来的 $N$ 行每行包含一个变量及其可能的值。

每个变量在这个列表中至少出现一次，最多出现 500 次。对于同一个变量，不会列出重复的可能值。所有可能的值都在 $-10^5$ 到 $10^5$ 的范围内。

### 输出格式

输出一个整数，表示 FJ 可以为变量赋值的方式数，使得上述表达式的值是 7 的倍数。

### 说明/提示

两种可能的赋值方式是：

$(B,E,S,I,G,O,M) = (2, 5, 7, 9, 1, 16, 19)$ -> 51,765

$(B,E,S,I,G,O,B) = (2, 5, 7, 9, 1, 16, 2)$ -> 34,510


---

---
title: "[USACO16JAN] Fort Moo P"
layout: "post"
diff: 普及/提高-
pid: P3135
tag: ['动态规划 DP', '2016', 'USACO', '枚举']
---
# [USACO16JAN] Fort Moo P
## 题目描述

Bessie is building a fort with her friend Elsie. Like any good fort, this one needs to start with a sturdy frame. Bessie wants to build a frame in the shape of a one-meter-wide rectangular outline, atop which she will build the fort.

Bessie has already chosen a site on which to build the fort -- a piece of land measuring $N$ meters by $M$ meters ($1 \leq N, M \leq 200$). Unfortunately, the  site has some swampy areas that cannot be used to support the frame.  Please help Bessie determine the largest area she can cover with her fort (the area of the rectangle supported by the frame), such that the frame avoids sitting on any of the swampy areas.
## 输入格式

Line 1 contains integers $N$ and $M$.

The next $N$ lines each contain $M$ characters, forming a grid describing the site.  A character of '.' represents normal grass, while 'X' represents a swampy spot.
## 输出格式

A single integer representing the maximum area that Bessie can cover with her fort.
## 样例

### 样例输入 #1
```
5 6
......
..X..X
X..X..
......
..X...
```
### 样例输出 #1
```
16
```
## 提示

In the example, the placement of the optimal frame is indicated by 'f's below:

```cpp
.ffff.
.fX.fX
Xf.Xf.
.ffff.
..X...
```
## 题目翻译

### 题目描述

Bessie 正在和她的朋友 Elsie 一起建造一个堡垒。像任何好的堡垒一样，这个堡垒需要一个坚固的框架。Bessie 想要建造一个一米宽的矩形轮廓框架，然后在这个框架上建造堡垒。

Bessie 已经选择了一个建造堡垒的地点——一块 $N$ 米乘 $M$ 米的土地（$1 \leq N, M \leq 200$）。不幸的是，这块地有一些沼泽区域，不能用来支撑框架。请帮助 Bessie 确定她可以用堡垒覆盖的最大面积（由框架支撑的矩形的面积），使得框架不会坐落在任何沼泽区域上。

### 输入格式

第 1 行包含整数 $N$ 和 $M$。

接下来的 $N$ 行每行包含 $M$ 个字符，形成一个描述地点的网格。字符 '.' 表示普通草地，而 'X' 表示沼泽区域。

### 输出格式

一个整数，表示 Bessie 可以用堡垒覆盖的最大面积。

### 说明/提示

在示例中，最优框架的位置由下面的 `f` 表示：

```
.ffff.
.fX.fX
Xf.Xf.
.ffff.
..X...
```


---

---
title: "[USACO16FEB] Load Balancing S"
layout: "post"
diff: 普及/提高-
pid: P3138
tag: ['2016', '线段树', 'USACO', '枚举', '前缀和']
---
# [USACO16FEB] Load Balancing S
## 题目背景

*本题与 [白金组同名题目](/problem/P6172) 在题意上一致，唯一的差别是数据范围。*
## 题目描述

Farmer John 的 $N$ 头奶牛（$1 \leq N \leq 1000$）散布在整个农场上。整个农场是一个无限大的二维平面，第 $i$ 头奶牛的坐标是 $(x_i,y_i)$（保证 $x_i,y_i$ 均为正奇数，且 $x_i,y_i \leq 10^6$），且没有任意两头奶牛在同一位置上。

FJ 希望修建一条竖直方向的栅栏，它的方程是 $x=a$，他还希望修建一条水平方向的栅栏，它的方程是 $y=b$。为了防止栅栏经过奶牛，$a,b$ 均要求是偶数。容易发现，这两个栅栏会在 $(a,b)$ 处相交，将整个农场分割为四个区域。

FJ 希望这四个区域内的奶牛数量较为均衡，尽量避免一个区域奶牛多而另一个区域奶牛少的情况。令 $M$ 为四个区域里奶牛最多区域的奶牛数量，请帮 FJ 求出 $M$ 的最小值。
## 输入格式

第一行一个整数 $N$。

接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述第 $i$ 头奶牛的位置。
## 输出格式

输出 $M$ 的最小值。
## 样例

### 样例输入 #1
```
7
7 3
5 5
7 13
3 1
11 7
5 3
9 1
```
### 样例输出 #1
```
2
```


---

---
title: "[USACO16OPEN] Field Reduction S"
layout: "post"
diff: 普及/提高-
pid: P3142
tag: ['2016', 'USACO', '枚举', '排序']
---
# [USACO16OPEN] Field Reduction S
## 题目描述

Farmer John's $N$ cows ($5 \leq N \leq 50,000$) are all located at distinct positions in his two-dimensional field.  FJ wants to enclose all of the cows with a rectangular fence whose sides are parallel to the x and y axes, and he wants this fence to be as small as possible so that it contains every cow (cows on the boundary are allowed).

FJ is unfortunately on a tight budget due to low milk production last quarter. He would therefore like to build an even smaller fenced enclosure if possible, and he is willing to sell up to three cows from his herd to make this possible.

Please help FJ compute the smallest possible area he can enclose with his fence after removing up to three cows from his herd (and thereafter building the tightest enclosing fence for the remaining cows).

For this problem, please treat cows as points and the fence as a collection of four line segments (i.e., don't think of the cows as "unit squares").  Note that the answer can be zero, for example if all remaining cows end up standing  in a common vertical or horizontal line.
## 输入格式

The first line of input contains $N$.  The next $N$ lines each contain two integers specifying the location of a cow.  Cow locations are positive integers in the range $1 \ldots 40,000$.

## 输出格式

Write a single integer specifying the minimum area FJ can enclose with his fence after removing up to three carefully-chosen cows from his herd.

## 样例

### 样例输入 #1
```
6
1 1
7 8
10 9
8 12
4 100
50 7
```
### 样例输出 #1
```
12
```
## 题目翻译

### 题目描述

Farmer John 的 $N$ 头奶牛（$5 \leq N \leq 50,000$）都位于他二维牧场中的不同位置。FJ 希望用一个边平行于 $x$ 轴和 $y$ 轴的矩形围栏围住所有的奶牛，并且他希望这个围栏尽可能小，以便能够包含每头奶牛（允许奶牛位于边界上）。

不幸的是，由于上个季度牛奶产量低，FJ 的预算非常紧张。因此，他希望如果可能的话，建造一个更小的围栏，并且他愿意从他的牛群中出售最多三头奶牛来实现这一目标。

请帮助 FJ 计算在从他的牛群中移除最多三头奶牛后，他可以用围栏围住的最小可能面积（然后为剩余的奶牛建造最紧密的围栏）。

对于这个问题，请将奶牛视为点，将围栏视为四条线段的集合（即不要将奶牛视为“单位正方形”）。请注意，答案可能为零，例如如果所有剩余的奶牛最终站在一条共同的垂直线或水平线上。

### 输入格式

输入的第一行包含 $N$。接下来的 $N$ 行每行包含两个整数，表示一头奶牛的位置。奶牛的位置是范围在 $1 \ldots 40,000$ 的正整数。

### 输出格式

输出一个整数，表示 FJ 在从他的牛群中精心选择移除最多三头奶牛后，可以用围栏围住的最小面积。


---

---
title: "[USACO16OPEN] Diamond Collector S"
layout: "post"
diff: 普及/提高-
pid: P3143
tag: ['贪心', '2016', 'USACO', '枚举', '双指针 two-pointer']
---
# [USACO16OPEN] Diamond Collector S
## 题目描述

Bessie the cow, always a fan of shiny objects, has taken up a hobby of mining diamonds in her spare time!  She has collected $N$ diamonds ($N \leq 50,000$) of varying sizes, and she wants to arrange some of them in a pair of  display cases in the barn.


Since Bessie wants the diamonds in each of the two cases to be relatively similar in  size, she decides that she will not include two diamonds in the same case if their sizes differ by more than $K$ (two diamonds can be displayed together in the same case if their sizes differ by exactly $K$).  Given $K$, please help Bessie determine the maximum number of diamonds she can display in both cases together.
## 输入格式

The first line of the input file contains $N$ and $K$ ($0 \leq K \leq 1,000,000,000$).

The next $N$ lines each contain an integer giving the size of one of the diamonds.  All sizes will be positive and will not exceed $1,000,000,000$.

## 输出格式

Output a single positive integer, telling the maximum number of diamonds that Bessie can showcase in total in both the cases.
## 样例

### 样例输入 #1
```
7 3
10
5
1
12
9
5
14
```
### 样例输出 #1
```
5
```
## 题目翻译

### 题目描述

奶牛 Bessie 一直喜欢闪闪发光的物体，她最近在业余时间开始了一项爱好——挖掘钻石！她收集了 $N$ 颗大小各不相同的钻石（$N \leq 50,000$），并希望将它们中的一部分放在谷仓里的两个展示柜中展示。

由于 Bessie 希望每个展示柜中的钻石大小相对接近，她决定如果两颗钻石的大小相差超过 $K$，就不能将它们放在同一个展示柜中（如果两颗钻石的大小相差恰好为 $K$，则可以将它们一起展示在同一个展示柜中）。给定 $K$，请帮助 Bessie 确定她可以在两个展示柜中一起展示的最大钻石数量。

### 输入格式

输入文件的第一行包含 $N$ 和 $K$（$0 \leq K \leq 1,000,000,000$）。

接下来的 $N$ 行每行包含一个整数，表示一颗钻石的大小。所有钻石的大小均为正数且不超过 $1,000,000,000$。

### 输出格式

输出一个正整数，表示 Bessie 可以在两个展示柜中一起展示的最大钻石数量。


---

---
title: "[USACO17FEB] Why Did the Cow Cross the Road II S"
layout: "post"
diff: 普及/提高-
pid: P3662
tag: ['2017', 'USACO', '枚举', '前缀和', '队列']
---
# [USACO17FEB] Why Did the Cow Cross the Road II S
## 题目描述

The long road through Farmer John's farm has $N$ crosswalks across it, conveniently numbered $1 \ldots N$ ($1 \leq N \leq 100,000$). To allow cows to cross at these crosswalks, FJ installs electric crossing signals, which light up with a green cow icon when it is ok for the cow to cross, and red otherwise. Unfortunately, a large electrical storm has damaged some of his signals. Given a list of the damaged signals, please compute the minimum number of signals that FJ needs to repair in order for there to exist some contiguous block of at least $K$ working signals.
## 输入格式

The first line of input contains $N$, $K$, and $B$ ($1 \leq B, K \leq N$). The next $B$ lines each describe the ID number of a broken signal.
## 输出格式

Please compute the minimum number of signals that need to be repaired in order for there to be a contiguous block of $K$ working signals somewhere along the road.

## 样例

### 样例输入 #1
```
10 6 5
2
10
1
5
9
```
### 样例输出 #1
```
1
```
## 题目翻译

### 题目描述

穿过 Farmer John 农场的长路上有 $N$ 个人行横道，方便地用编号 $1 \ldots N$ 标识（$1 \leq N \leq 100,000$）。为了让奶牛能够通过这些横道过马路，FJ 安装了电子过马路信号灯，当奶牛可以安全过马路时，信号灯会显示绿色的奶牛图标，否则显示红色。不幸的是，一场大雷暴损坏了他的一些信号灯。给定损坏信号灯的列表，请计算 FJ 需要修复的最少信号灯数量，以便存在至少 $K$ 个连续的信号灯正常工作。

### 输入格式

输入的第一行包含 $N$、$K$ 和 $B$（$1 \leq B, K \leq N$）。接下来的 $B$ 行每行描述一个损坏信号灯的 ID 编号。

### 输出格式

请计算需要修复的最少信号灯数量，以便在道路上某处存在一个长度为 $K$ 的连续正常工作信号灯块。


---

---
title: "[USACO17OPEN] Bovine Genomics S"
layout: "post"
diff: 普及/提高-
pid: P3670
tag: ['2017', 'USACO', '离散化', '枚举']
---
# [USACO17OPEN] Bovine Genomics S
## 题目描述

Farmer John owns $N$ cows with spots and $N$ cows without spots. Having just completed a course in bovine genetics, he is convinced that the spots on his cows are caused by mutations in the bovine genome.


At great expense, Farmer John sequences the genomes of his cows. Each genome is a string of length $M$ built from the four characters A, C, G, and T. When he lines up the genomes of his cows, he gets a table like the following, shown here


for $N=3$:


```cpp
Positions: 1 2 3 4 5 6 7 ... M

Spotty Cow 1: A A T C C C A ... T
Spotty Cow 2: G A T T G C A ... A
Spotty Cow 3: G G T C G C A ... A

Plain Cow 1: A C T C C C A ... G
Plain Cow 2: A G T T G C A ... T
Plain Cow 3: A G T T C C A ... T
```

Looking carefully at this table, he surmises that positions 2 and 4 are sufficient to explain spottiness. That is, by looking at the characters in just these two positions, Farmer John can predict which of his cows are spotty and which are not (for example, if he sees G and C, the cow must be spotty).


Farmer John is convinced that spottiness can be explained not by just one or two positions in the genome, but by looking at a set of three distinct positions.  Please help him count the number of sets of three distinct positions that can each explain spottiness.
## 输入格式

The first line of input contains $N$ ($1 \leq N \leq 500$) and $M$ ($3 \leq M \leq 50$). The next $N$ lines each contain a string of $M$ characters; these describe the genomes of the spotty cows. The final $N$ lines describe the genomes of the plain cows.

## 输出格式

Please count the number of sets of three distinct positions that can explain spottiness. A set of three positions explains spottiness if the spottiness trait can be predicted with perfect accuracy among Farmer John's population of cows by looking at just those three locations in the genome.

## 样例

### 样例输入 #1
```
3 8
AATCCCAT
GATTGCAA
GGTCGCAA
ACTCCCAG
ACTCGCAT
ACTTCCAT
```
### 样例输出 #1
```
22
```
## 题目翻译

### 题目描述

Farmer John 拥有 $N$ 头有斑点的牛和 $N$ 头没有斑点的牛。他刚刚完成了一门关于牛遗传学的课程，并确信他牛身上的斑点是由牛基因组中的突变引起的。

Farmer John 花费巨资对他的牛进行了基因组测序。每个基因组是一个由字符 A、C、G 和 T 组成的长度为 $M$ 的字符串。当他将牛的基因组排列起来时，会得到如下表格，这里展示的是 $N=3$ 的情况：

```
位置：1 2 3 4 5 6 7 ... M

斑点牛 1：A A T C C C A ... T  
斑点牛 2：G A T T G C A ... A  
斑点牛 3：G G T C G C A ... A  

普通牛 1：A C T C C C A ... G  
普通牛 2：A G T T G C A ... T  
普通牛 3：A G T T C C A ... T 
```

仔细观察这个表格后，他推测位置 2 和 4 足以解释斑点现象。也就是说，通过仅查看这两个位置的字符，Farmer John 可以预测哪些牛是有斑点的，哪些是没有斑点的（例如，如果他看到 G 和 C，这头牛一定是有斑点的）。

Farmer John 确信，斑点现象不仅仅可以通过基因组中的一个或两个位置来解释，而是可以通过查看三个不同的位置来解释。请帮助他计算能够解释斑点现象的三个不同位置集合的数量。

### 输入格式

输入的第一行包含 $N$（$1 \leq N \leq 500$）和 $M$（$3 \leq M \leq 50$）。接下来的 $N$ 行每行包含一个长度为 $M$ 的字符串，这些字符串描述了斑点牛的基因组。最后的 $N$ 行描述了普通牛的基因组。

### 输出格式

请计算能够解释斑点现象的三个不同位置集合的数量。如果通过查看基因组中这三个位置的字符，可以在 Farmer John 的牛群中完美准确地预测斑点性状，那么这个三个位置的集合就解释了斑点现象。


---

---
title: "小 Y 拼木棒"
layout: "post"
diff: 普及/提高-
pid: P3799
tag: ['洛谷原创', '枚举', '组合数学']
---
# 小 Y 拼木棒
## 题目背景

上道题中，小 Y 斩了一地的木棒，现在她想要将木棒拼起来。
## 题目描述

有 $n$ 根木棒，现在从中选 $4$ 根，想要组成一个正三角形，问有几种选法？

答案对 $10^9+7$ 取模。
## 输入格式

第一行一个整数 $n$。

第二行往下 $n$ 行，每行 $1$ 个整数，第 $i$ 个整数 $a_i$ 代表第 $i$ 根木棒的长度。
## 输出格式

一行一个整数代表答案。

## 样例

### 样例输入 #1
```
4 
1
1
2
2
```
### 样例输出 #1
```
1
```
## 提示

#### 数据规模与约定

- 对于 $30\%$ 的数据，保证 $n \le 5 \times 10^3$。
- 对于 $100\%$ 的数据，保证 $1 \leq n \le 10^5$，$1 \le a_i \le 5 \times 10^3$。

关于标题：因为一些不可抗力的原因，名称进行了更改。深表歉意。


---

---
title: "[USACO1.2] 命名那个数字 Name That Number"
layout: "post"
diff: 普及/提高-
pid: P3864
tag: ['模拟', '字符串', '搜索', 'USACO', '枚举', '深度优先搜索 DFS']
---
# [USACO1.2] 命名那个数字 Name That Number
## 题目描述

在威斯康辛州牛守志大农场经营者之中，都习惯于请会计部门用连续数字给母牛打上烙印。但是,母牛本身并没感到这个系统的便利,它们更喜欢用它们喜欢的名字来呼叫它们的同伴，而不是用像这个的语句"C'mon, #4364, get along."。请写一个程序来帮助可怜的牧牛工将一只母牛的烙印编号翻译成一个可能的名字。因为母牛们现在都有手机了，使用标准的按键的排布来把将数目翻译为文字:( 除了 "Q" 和 "Z")

```
2: A,B,C     5: J,K,L    8: T,U,V
3: D,E,F     6: M,N,O    9: W,X,Y
4: G,H,I     7: P,R,S
```
可接受的名字都被放在这样一个叫作"dict.txt" 的文件中，它包含一连串的少于 5,000个（准确地说是4617个）可被接受的牛的名字。 (所有的名字都是大写的且已按字典序排列) 请读入母牛的编号并返回那些能从编号翻译出来并且在字典中的名字。举例来说,编号 4734 能产生的下列各项名字: GPDG GPDH GPDI GPEG GPEH GPEI GPFG GPFH GPFI GRDG GRDH GRDI GREG GREH GREI GRFG GRFH GRFI GSDG GSDH GSDI GSEG GSEH GSEI GSFG GSFH GSFI HPDG HPDH HPDI HPEG HPEH HPEI HPFG HPFH HPFI HRDG HRDH HRDI HREG HREH HREI HRFG HRFH HRFI HSDG HSDH HSDI HSEG HSEH HSEI HSFG HSFH HSFI IPDG IPDH IPDI IPEG IPEH IPEI IPFG IPFH IPFI IRDG IRDH IRDI IREG IREH IREI IRFG IRFH IRFI ISDG ISDH ISDI ISEG ISEH ISEI ISFG ISFH ISFI 碰巧，81个中只有一个"GREG"是有效的(在字典中)。

写一个程序来对给出的编号打印出所有的有效名字，如果没有则输出NONE。编号可能有12位数字。

## 输入格式

第一行一行包含一个编号(长度可能从1到12)。

接下来4617行，每行一个字符串表示可以被接受的名字
## 输出格式

(file namenum.out)

以字典顺序输出一个有效名字的不重复列表，一行一个名字。 如果没有有效名字，输出'NONE'。 //注释：似乎数字只有8^4种排列（1与0不能用）

## 样例

### 样例输入 #1
```
4734
NMSL
GREG
LSDC
....(太多了不写了)
```
### 样例输出 #1
```
GREG

```


---

---
title: "Geodetic集合"
layout: "post"
diff: 普及/提高-
pid: P3906
tag: ['图论', '枚举', '排序', '最短路']
---
# Geodetic集合
## 题目描述

图 $\text G$ 是一个无向连通图，没有自环，并且两点之间至多只有一条边。我们定义顶点 $v,u$ 的最短路径就是从 $v$ 到 $u$ 经过边最少的路径。所有包含在 $v-u$ 的最短路径上的顶点被称为 $v-u$ 的 Geodetic 顶点，这些顶点的集合记作 $I(v,u)$。

我们称集合 $I(v,u)$ 为一个 Geodetic 集合。

例如下图中，$I(2,5)=\{2,3,4,5\}$，$I(1,5)=\{1,3,5\}$，$I(2,4)=\{2,4\}$。

![](https://cdn.luogu.com.cn/upload/image_hosting/26c7a19d.png)

给定一个图 $\text G$ 和若干点对 $v,u$，请你分别求出 $I(v,u)$。
## 输入格式

第一行为两个整数 $n,m$，分别表示图 $\text G$ 的顶点数和边数（顶点编号为 $1\sim n$）。  
接下来 $m$ 行，每行两个整数 $a,b$，表示 顶点 $a$ 和 $b$ 之间有一条无向边。  
第 $m+2$ 行有一个整数 $k$，表示给定的点对数。  
接下来 $k$ 行，每行两个整数 $v,u$，表示每个点对的起点和终点。 
## 输出格式

共 $k$ 行，对于输入文件中每一个点对 $v,u$，按顶点顺序一行输出 $I(v,u)$ 里面的所有点的编号。
## 样例

### 样例输入 #1
```
5 6
1 2
1 3
2 3
2 4
3 5
4 5
3
2 5
5 1
2 4
```
### 样例输出 #1
```
2 3 4 5
1 3 5
2 4
```
## 提示

对于所有数据，满足 $1\leqslant n\leqslant 40$，$1\leqslant m\leqslant \frac{n(n-1)}2$。


---

---
title: "纪念邮票"
layout: "post"
diff: 普及/提高-
pid: P3910
tag: ['数学', '枚举']
---
# 纪念邮票
## 题目描述

邮局最近推出了一套纪念邮票，这套邮票共有 $N$ 张，邮票面值各不相同，按编号顺序为 $1$ 分，$2$ 分，……，$N$ 分。

小明是个集邮爱好者，他很喜欢这套邮票，可惜现在他身上只有 $M$ 分，并不够把全套都买下，但是他希望刚好花光所有的钱。作为一个集邮爱好者，小明也不想买的邮票编号断断续续，所以小明打算买面值 $a$ 分至 $b$ 分的 $b-a+1$ 张连续的邮票，且总价值刚好为 $M$ 分。

你的任务是求出所有符合要求的方案，以 $\left[a,b\right]$ 的形式输出。
## 输入格式

输入文件只有一行。包含两个整数 $N$ 和 $M$（$1\le N,M \le 10^9$），之间用空格隔开。
## 输出格式

输出文件每行包含一个合法方案：$\left[a,b\right]$，按 $a$ 值从小到大输出。
## 样例

### 样例输入 #1
```
20 15
```
### 样例输出 #1
```
[1,5]
[4,6]
[7,8]
[15,15]
```


---

---
title: "[SDOI2016] 排列计数"
layout: "post"
diff: 普及/提高-
pid: P4071
tag: ['递推', '2016', '各省省选', '山东', '枚举', '线性递推', '逆元']
---
# [SDOI2016] 排列计数
## 题目描述

求有多少种 $1$ 到 $n$ 的排列 $a$，满足序列恰好有 $m$ 个位置 $i$，使得 $a_i = i$。

答案对 $10^9 + 7$ 取模。
## 输入格式

**本题单测试点内有多组数据**。

输入的第一行是一个整数 $T$，代表测试数据的整数。

以下 $T$ 行，每行描述一组测试数据。

对于每组测试数据，每行输入两个整数，依次代表 $n$ 和 $m$。
## 输出格式

共输出 $T$ 行，对于每组测试数据，输出一行一个整数代表答案。
## 样例

### 样例输入 #1
```
5
1 0
1 1
5 2
100 50
10000 5000
```
### 样例输出 #1
```
0
1
20
578028887
60695423
```
## 提示

#### 数据规模与约定

本题共 20 个测试点，各测试点等分，其数据规模如下表。

| 测试点编号 | $T =$  | $n, m \leq$ |  测试点编号  |      $T =$      | $n, m \leq$ |
| :--------: | :----: | :---------: | :----------: | :-------------: | :---------: |
| $1\sim 3$  | $10^3$ |     $8$     | $10 \sim 12$ |     $10^3$      |   $10^3$    |
| $4 \sim 6$ | $10^3$ |    $12$     | $13 \sim 14$ | $5 \times 10^5$ |   $10^3$    |
| $7 \sim 9$ | $10^3$ |    $100$    | $15 \sim 20$ | $5 \times 10^5$ |   $10^6$    |

对于全部的测试点，保证 $1 \leq T \leq 5 \times 10^5$，$1 \leq n \leq 10^6$，$0 \leq m \leq 10^6$。


---

---
title: "[USACO17DEC] My Cow Ate My Homework S"
layout: "post"
diff: 普及/提高-
pid: P4086
tag: ['递推', '2017', '线段树', 'USACO', '枚举', '前缀和']
---
# [USACO17DEC] My Cow Ate My Homework S
## 题目描述

In your bovine history class, you have been given a rather long homework assignment with $N$ questions ($3 \leq N \leq 100,000$), each graded with an integer score in the range 0...10,000. As is often customary, your teacher plans to assign a final grade by discarding a question on which you received the lowest score and then averaging the remaining scores together. Unfortunately, your pet cow Bessie has just eaten your answers to the first $K$ questions! ($K$ could be as small as 1 or as large as $N-2$).

After copious explanation, your teacher finally believes your story, and agrees to grade the remaining non-eaten part of the assignment the same way as before -- by removing the lowest-scoring question (or one such question, in the event of a tie) and averaging the rest.


Please output all values of $K$ which would have earned you the maximum possible score according to this grading scheme, in sorted order.


## 输入格式

The first line of input contains $N$, and the next line contains the scores on the $N$ homework questions.

## 输出格式

Please output, one value per line, all values of $K$ which would have earned you the maximum possible score.

## 样例

### 样例输入 #1
```
5
3 1 9 2 7
```
### 样例输出 #1
```
2
```
## 提示

If Bessie eats the first two questions, then the remaining scores are 9, 2, and 7. Removing the minimum and averaging, we get a final grade of 8, which is the highest possible.

## 题目翻译

### 题目描述

在你的牛历史课上，你被布置了一份相当长的作业，包含 $N$ 个问题（$3 \leq N \leq 100,000$），每个问题的得分是一个在 0 到 10,000 之间的整数。按照惯例，你的老师计划通过去掉你得分最低的一个问题，然后对剩余问题的得分取平均来给出最终成绩。不幸的是，你的宠物奶牛 Bessie 刚刚吃掉了你前 $K$ 个问题的答案！（$K$ 可能小到 1，也可能大到 $N-2$）。

经过多次解释，你的老师终于相信了你的说法，并同意按照之前的方式对剩余的未被吃掉的部分作业进行评分——即去掉得分最低的问题（或在得分相同的情况下去掉其中一个），然后对剩余问题取平均。

请输出所有能够使你获得最高可能成绩的 $K$ 值，并按升序排列。

### 输入格式

输入的第一行包含 $N$，第二行包含 $N$ 个作业问题的得分。

### 输出格式

请逐行输出所有能够使你获得最高可能成绩的 $K$ 值。

### 说明/提示

如果 Bessie 吃掉了前两个问题，那么剩余的得分是 9、2 和 7。去掉最低分并取平均后，最终成绩为 8，这是可能的最高成绩。


---

---
title: "消失之物"
layout: "post"
diff: 普及/提高-
pid: P4141
tag: ['动态规划 DP', '递推', '枚举', '分治', '背包 DP']
---
# 消失之物
## 题目描述

ftiasch 有 $n$ 个物品, 体积分别是 $w_1,w_2,\dots,w_n$。由于她的疏忽，第 $i$ 个物品丢失了。   

“要使用剩下的 $n-1$ 物品装满容积为 $x$ 的背包，有几种方法呢？”——这是经典的问题了。  

她把答案记为 $\text{cnt}(i,x)$ ，想要得到所有$i \in [1,n]$, $x \in [1,m]$ 的 $\text{cnt}(i,x)$ 表格。

![](https://cdn.luogu.com.cn/upload/pic/13426.png)

## 输入格式

第一行两个整数 $n,m$，表示物品的数量和最大的容积。
第二行 $n$ 个整数 $w_1,w_2,\dots,w_n$，表示每个物品的体积。

## 输出格式

输出一个 $n \times m$ 的矩阵，表示 $\text{cnt}(i,x)$ 的**末位数字**。

## 样例

### 样例输入 #1
```
3 2
1 1 2
```
### 样例输出 #1
```
11
11
21
```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n,m \le 2000$，且 $1\le v_i\le m$。

【样例解释】  
如果物品 3 丢失的话，只有一种方法装满容量是 2 的背包，即选择物品 1 和物品 2。

---

$\text{upd 2023.8.11}$：新增加五组 Hack 数据。



---

---
title: "[CERC2015] ASCII Addition"
layout: "post"
diff: 普及/提高-
pid: P4346
tag: ['模拟', '字符串', '2015', '枚举']
---
# [CERC2015] ASCII Addition
## 题目背景

Nowadays, there are smartphone applications that instantly translate text and even solve math problems if you just point your phone’s camera at them. Your job is to implement a much simpler functionality reminiscent of the past – add two integers written down as ASCII art.
## 题目描述

An ASCII art is a matrix of characters, exactly 7 rows high, with each individual character either a dot or the lowercase letter x.

An expression of the form a + b is given, where both a and b are positive integers. The expression is converted into ASCII art by writing all the expression characters (the digits of a and b as well as the + sign) as 7  5 matrices, and concatenating the matrices together with a single column of dot characters between consecutive individual matrices. The exact matrices corresponding to the digits and the + sign are as follows:

![](https://cdn.luogu.com.cn/upload/pic/16222.png )

Given an ASCII art for an expression of the form a + b, find the result of the addition and write it out in the ASCII art form.
## 输入格式

Input consists of exactly 7 lines and contains the ASCII art for an expression of the form a + b, where
both a and b are positive integers consisting of at most 9 decimal digits and written without leading
zeros.
## 输出格式

Output 7 lines containing ASCII art corresponding to the result of the addition, without leading zeros.
## 样例

### 样例输入 #1
```
....x.xxxxx.xxxxx.x...x.xxxxx.xxxxx.xxxxx.......xxxxx.xxxxx.xxxxx
....x.....x.....x.x...x.x.....x.........x...x...x...x.x...x.x...x
....x.....x.....x.x...x.x.....x.........x...x...x...x.x...x.x...x
....x.xxxxx.xxxxx.xxxxx.xxxxx.xxxxx.....x.xxxxx.xxxxx.xxxxx.x...x
....x.x.........x.....x.....x.x...x.....x...x...x...x.....x.x...x
....x.x.........x.....x.....x.x...x.....x...x...x...x.....x.x...x
....x.xxxxx.xxxxx.....x.xxxxx.xxxxx.....x.......xxxxx.xxxxx.xxxxx
```
### 样例输出 #1
```
....x.xxxxx.xxxxx.xxxxx.x...x.xxxxx.xxxxx
....x.....x.....x.x.....x...x.x.........x
....x.....x.....x.x.....x...x.x.........x
....x.xxxxx.xxxxx.xxxxx.xxxxx.xxxxx.....x
....x.x.........x.....x.....x.....x.....x
....x.x.........x.....x.....x.....x.....x
....x.xxxxx.xxxxx.xxxxx.....x.xxxxx.....x
```
## 提示

样例：1234567+890=1235457

Central Europe Regional Contest 2015 Problem A
## 题目翻译

# 题目背景

现在，如果你只是用手机的相机对着它们，智能手机应用可以即时翻译文本，甚至解决数学问题。您的工作是实现一个更简单的功能，回忆过去——添加两个作为ASCII艺术的整数。

# 题目描述

ASCII艺术是一个字符矩阵，正好是7行高，每个字符都是点或小写字母X。

给出了A +B形式的表达式，其中A和B都是正整数。通过将所有的表达式字符（A和B的数字以及符号）作为7 5个矩阵，将这些矩阵转换成ASCII艺术，并将矩阵与单个字符的单个列串联在连续的各个矩阵之间。对应于数字和+符号的精确矩阵如下：

![](https://cdn.luogu.org/upload/pic/16222.png)

给定一个ASCII艺术来表达A+B的形式，找到加法的结果并用ASCII艺术形式写出。

# 输入输出格式

#### 输入格式：

输入由7行组成，包含用于A+B形式的表达式的ASCII技术，其中A和B都是由至多9个十进制数字组成的正整数，并且没有前导零。

#### 输出格式：

输出包含ASCII艺术的7行，对应于加法的结果，没有前导零。

感谢@剑圣夜雨声烦 提供的翻译


---

---
title: "[Code+#4] 喵呜"
layout: "post"
diff: 普及/提高-
pid: P4368
tag: ['模拟', '数学', '枚举', 'Code+']
---
# [Code+#4] 喵呜
## 题目描述

在马路边有一排整齐的 $n$ 棵樱花树，每棵树的高度都恰好为 $h$。某天，一只可爱的小猫偶然跑到树上来玩，但是这只小猫有些对樱花过敏，所以她现在想赶快离开这些樱花树。

具体来说，现在小猫位于第 $x$ 棵樱花树上高度为 $y$ 的位置，她可以通过两种跳跃来离开樱花树：

轻轻跳：向左或向右移动 $a$ 棵樱花树的同时，所在高度下降 $b$，即一次轻轻跳可以从起点移动到第 $x+a$ 或 $x-a$ 棵树上高度为 $y-b$ 的位置，注意当小猫所在高度不大于 $b$ 时不可以使用轻轻跳。

使劲跳：向左或向右移动 $a$ 棵樱花树的同时，所在高度上升 $b$，即一次使劲跳可以从起点移动到第 $x+a$ 或 $x-a$ 棵树上高度为 $y+b$ 的位置，注意当小猫所在高度大于 $h-b$ 时不可以使用使劲跳。

为了离开这片樱花树，小猫需要移动到第 $1$ 或第 $n$ 棵树上，高度为 $h$ 或 $1$ 的位置（这样她可以呼吸新鲜空气或者直接走开樱花树）。现在小猫想知道，自己最少需要多少次跳跃才能达成目标。由于她是一只可爱的小猫，所以希望由你来告诉她。

## 输入格式

从标准输入读入数据。

输入数据第一行包含一个正整数 $T$，表示测试数据的组数，各组数据之间没有空行。

接下来 $T$ 行，依次描述每组数据：

每组数据包含一行，包含六个正整数 $n,h,x,y,a,b$，其含义见题目描述。

## 输出格式

输出到标准输出。

输出由 $T$ 组数据组成，各组数据之间没有空行。对于每一组数据：

若小猫可以成功离开樱花树，请输出她需要的最少跳跃次数。

若小猫无法通过给定的跳跃方法离开樱花树，**请输出-1**。

## 样例

### 样例输入 #1
```
3
5 5 3 3 2 2
5 7 3 5 2 2
5 7 4 6 1 1
```
### 样例输出 #1
```
1
1
1
```
### 样例输入 #2
```
3
5 5 3 3 3 2
5 7 1 4 2 2
5 7 1 2 1 2
```
### 样例输出 #2
```
-1
-1
-1
```
### 样例输入 #3
```
4
999999999999 999999999999 454545454545 454545454545 1 1
777777777777 777777777777 343434343434 343434343434 1 1
777777777777 999999999999 343434343434 454545454545 1 1
999999999999 777777777777 454545454545 343434343434 1 1
```
### 样例输出 #3
```
454545454544
343434343433
-1
-1
```
## 提示

| 测试点编号 | $n,h$ 的范围 | 特殊约定 |
| :----------: | :----------: | :----------: |
|$1,2$  | $\le10$ | $b=1$ |
|$3,4$  |  $\le10$| $a=b=1$ |
|$5,6,7,8$  |$\le10$  | 无 |
|$9,10$  | $\le500$ | $b=1$ |
|  $11,12$| $\le500$ | $a=b=1$ |
|$13,14,15$  | $\le500$ | 无 |
|$16,17$  | $\le10^5$ | $h\le10$ |
|$18,19,20$  | $\le10^5$ | 无 |
| $21,22$ | $\le10^{15}$ | $h\le10$ |
| $23,24,25$ | $\le10^{15}$ | 无 |

对于所有数据，保证 $n \geq 2$，$a < n$，$b \leq h$。

Credit: https://www.luogu.org/discuss/show/38908


---

---
title: "[COCI 2006/2007 #2] KOLONE"
layout: "post"
diff: 普及/提高-
pid: P4415
tag: ['模拟', '2006', '枚举', 'COCI（克罗地亚）']
---
# [COCI 2006/2007 #2] KOLONE
## 题目描述

When moving, ants form rows so that each ant except the first is behind another ant. It is not widely known what happens when two rows of ants moving in opposite directions run into each other in a passage too narrow for both rows to pass through. One theory says that, in that situation, ants will jump over each other.
From the moment the rows meet, each second every ant jumps over (or gets jumped over, as they agree upon) the ant in front of himself so that the two ants swap places, but only if the other ant is moving in the opposite direction. Find the order of the ants after T seconds.
## 输入格式

The first line contains two integers N1 and N2, the numbers of ants in the first and second rows, respectively.
The next two rows contain the orders of ants in the first and second row (first to last). Each ant is uniquely determined by an uppercase letter of the English alphabet (this letter is unique between both rows).
The last line of input contains the integer T (0 ≤ T ≤ 50).
## 输出格式

Output the order of the ants after T seconds on a single line. Our viewpoint is such that the first row of ants comes from our left side and the other one from our right side.
## 样例

### 样例输入 #1
```
3 3
ABC
DEF
0
```
### 样例输出 #1
```
CBADEF
```
### 样例输入 #2
```
3 3
ABC
DEF
2
```
### 样例输出 #2
```
CDBEAF
```
### 样例输入 #3
```
3 4
JLA
CRUO
3
```
### 样例输出 #3
```
CARLUJO
```
## 题目翻译

当蚂蚁移动时，蚂蚁排成一行，每个蚂蚁除了第一个蚂蚁都在另一个蚂蚁后面。众所周知，当两排蚂蚁在相反的方向上移动时，在一条太窄的通道中，两排都不能通过。一种理论认为，在这种情况下，蚂蚁会跳过对方。每隔一段时间，每一个蚂蚁都会跳过（或跳过去，就像他们同意的一样）蚂蚁在自己前面，这样两个蚂蚁交换位置，但是只有当另一只蚂蚁朝相反的方向移动时。在T秒后找到蚂蚁的顺序。
输入格式:
第一行包含两个整数N1和N2，分别在第一行和第二行中的蚂蚁的数量。接下来的两行包含第一行和第二行中的蚂蚁顺序（第一到最后一行）。每一个蚂蚁都是由一个大写字母（英文字母）唯一决定的（这两个字母在两行之间是唯一的）。输入的最后一行包含整数T(T小于50）。
输出格式:
在一条线上输出T秒后蚂蚁的顺序。我们的观点是，第一排蚂蚁来自我们的左侧，另一个来自我们的右侧。

感谢@心之所爱 提供的翻译


---

---
title: "[CERC2014] Sums"
layout: "post"
diff: 普及/提高-
pid: P4759
tag: ['2014', '枚举']
---
# [CERC2014] Sums
## 题目描述

Given an integer $N$, express it as the sum of at least two consecutive positive integers. For example:
   
   - $10 = 1 + 2 + 3 + 4$
   - $24 = 7 + 8 + 9$

If there are multiple solutions, output the one with the smallest possible number of summands.

## 输入格式

The first line of input contains the number of test cases $T$. The descriptions of the test cases follow:

Each test case consists of one line containing an integer $N(1 \le N \le 10^9)$.
## 输出格式

For each test case, output a single line containing the equation in the format:
``N = a + (a+1) + ... + b`` as in the example. If there is no solution, output a single word ``IMPOSSIBLE`` instead.

## 样例

### 样例输入 #1
```
3
8
10
24

```
### 样例输出 #1
```
IMPOSSIBLE
10 = 1 + 2 + 3 + 4
24 = 7 + 8 + 9

```
## 题目翻译

## 题目大意

一共有 $T$ 组数据，每组数据给定一个数 $N$，请将 $N$ 分解为几个连续正整数的和，如果有多种情况，请输出最小数最大的情况。

## 输入格式：

第一行，一个整数 $T$，表示数据组数。

第 $2$ 行至第 $T+1$ 行，每行一个整数 $N$，表示要拆分的数字。

## 输出格式

 $T$ 行，每行一个式子，表示拆分结果。

如果无解，请输出 `IMPOSSIBLE`。



---

---
title: "[USACO15DEC] Fruit Feast G"
layout: "post"
diff: 普及/提高-
pid: P4817
tag: ['2015', 'USACO', '枚举']
---
# [USACO15DEC] Fruit Feast G
## 题目描述

Bessie has broken into Farmer John's house again! She has discovered a pile of lemons and a pile of oranges in the kitchen (effectively an unlimited number of each), and she is determined to eat as much as possible.

Bessie has a maximum fullness of $T$ $(1 ≤ T ≤ 5,000,000)$. Eating an orange increases her fullness by $A$, and eating a lemon increases her fullness by $B$ ($1 ≤ A,B ≤ T$). Additionally, if she wants, Bessie can drink water at most one time, which will instantly decrease her fullness by half (and will round down).

Help Bessie determine the maximum fullness she can achieve! 
## 输入格式

The first (and only) line has three integers $T$, $A$, and $B$. 
## 输出格式

 A single integer, representing the maximum fullness Bessie can achieve. 
## 样例

### 样例输入 #1
```
8 5 6
```
### 样例输出 #1
```
8
```
## 提示

Problem credits: Nathan Pinsker 
## 题目翻译

### 题目描述

Bessie 再次闯入了 Farmer John 的房屋！她在厨房发现了一堆柠檬和一堆橙子（每种水果的数量都可以视为无限），并决定尽可能多吃。

Bessie 的最大饱腹度为 $T$（$1 \leq T \leq 5,000,000$）。每吃一个橙子会使饱腹度增加 $A$，每吃一个柠檬会使饱腹度增加 $B$（$1 \leq A,B \leq T$）。此外，Bessie 最多可以喝一次水，这将使饱腹度立即减半（向下取整）。

请帮助 Bessie 计算她能达到的最大饱腹度！

### 输入格式

唯一一行包含三个整数 $T$、$A$ 和 $B$。

### 输出格式

输出一个整数，表示 Bessie 能达到的最大饱腹度。

### 说明/提示

题目提供者：Nathan Pinsker  


---

---
title: "[USACO15FEB] Cow Hopscotch S"
layout: "post"
diff: 普及/提高-
pid: P4825
tag: ['2015', 'USACO', '枚举', '前缀和']
---
# [USACO15FEB] Cow Hopscotch S
## 题目描述

Just like humans enjoy playing the game of Hopscotch, Farmer John's cows have invented a variant of the game for themselves to play. Being played by clumsy animals weighing nearly a ton, Cow Hopscotch almost always ends in disaster, but this has surprisingly not deterred the cows from attempting to play nearly every afternoon.

The game is played on an $R$ by $C$ grid $(2 <= R <= 100,$ $2 <= C <= 100)$, where each square is labeled with an integer in the range $1...K (1 <= K <= R * C)$. Cows start in the top-left square and move to the bottom-right square by a sequence of jumps, where a jump is valid if and only if:

1. You are jumping to a square labeled with a different integer than your current square,

2. The square that you are jumping to is at least one row below the current square that you are on, and

3. The square that you are jumping to is at least one column to the right of the current square that you are on.

Please help the cows compute the number of different possible sequences of valid jumps that will take them from the top-left square to the bottom-right square.
## 输入格式

The first line contains the integers $R, C,$ and $K$. The next $R$ lines will each contain $C$ integers, each in the range $1..K$.
## 输出格式

Output the number of different ways one can jump from the top-left square to the bottom-right square, mod $1000000007$. 
## 样例

### 样例输入 #1
```
4 4 4
1 1 1 1
1 3 2 1
1 2 4 1
1 1 1 1
```
### 样例输出 #1
```
5
```
## 题目翻译

### 题目描述

与人类喜欢玩跳格子游戏类似，Farmer John 的奶牛们也发明了自己的版本。游戏在一个 $R \times C$ 的网格上进行（$2 \leq R,C \leq 100$），每个格子标有 $1 \ldots K$ 的整数（$1 \leq K \leq R \times C$）。奶牛从左上角出发，通过一系列有效跳跃到达右下角。跳跃被定义为有效当且仅当满足以下条件：

1. 目标格子与当前格子的数字不同  
2. 目标格子位于当前格子下方至少一行  
3. 目标格子位于当前格子右侧至少一列  

请计算从左上角到右下角的不同有效跳跃路径总数。

### 输入格式

第一行包含三个整数 $R$, $C$, $K$。  
接下来 $R$ 行每行包含 $C$ 个整数，每个数在 $1 \ldots K$ 范围内。

### 输出格式

输出从左上角到右下角的不同路径数量，结果对 $1000000007$ 取模。


---

---
title: "三去矩阵"
layout: "post"
diff: 普及/提高-
pid: P4888
tag: ['模拟', '搜索', '枚举', '洛谷月赛']
---
# 三去矩阵
## 题目背景

无
## 题目描述

现在小Y有个$l \times l$的正方形字母矩阵，现在他想进行$q$次询问，每次询问最长的以$(x_i,y_i)$为中心的在一条水平或竖直的直线上的回文串的长度。
## 输入格式

第一行输入两个整数$l,q$，分别表示矩阵的边长和询问的个数。

接下来的$l$行，每行$l$个字母，表示这个矩阵上的字母。

接下来的$q$行，每行两个整数$x_i,y_i$，表示第$i$个询问为在询问矩阵中最长的以$(x_i,y_i)$为中心的在一条直线上的回文串的长度。
## 输出格式

输出$q$行，第$i$行为对于第$i$个询问的回答。

## 样例

### 样例输入 #1
```
5 5
abcba
bcdcb
cdedc
bcdcb
abcba
1 1
1 2
1 3
2 3
3 3
```
### 样例输出 #1
```
1
1
5
5
5

```
## 提示

对于$20\%$的数据，$1 \le l \le 2$

另有$20\%$的数据，$q = 1$

另有$20\%$的数据，字母矩阵中心对称，上下对称，左右对称且对角线对称。

对于$100\%$的数据，$1 \le l,q \le 2000$，字母只有小写字母。


---

---
title: "kls与flag"
layout: "post"
diff: 普及/提高-
pid: P4889
tag: ['枚举', '排序', '洛谷月赛']
---
# kls与flag
## 题目背景

kls毒奶非常厉害。
## 题目描述

有$n$个OI选手，每个人插了一个flag。有一天因为某种原因，flag都被触发了，所以地上有一排$n$根竹竿，竹竿的间距均为一个单位长度，高度在$1\sim m$之间。

kls看到这些竹竿，感觉不好看，于是准备把它们全部放倒。

在这之前，kls想到了一个数学问题。每根竹竿可以往左倒或者往右倒。如果两根竹竿在选择方向放倒之后，它们的顶端可以重合，那么称它们是优秀的。现在kls想要知道，有多少对竹竿是优秀的。
## 输入格式

第一行两个数$n,m$，表示竹竿的个数和最大高度。

第二行$n$个正整数，表示每根竹竿的高度。
## 输出格式

输出一行，只有一个数，表示有多少对竹竿是优秀的。
## 样例

### 样例输入 #1
```
5 5
2 3 3 3 2
```
### 样例输出 #1
```
3
```
## 提示

### 样例解释

![法法](https://cdn.luogu.com.cn/upload/pic/25795.png)

- 1号和2号向左倒可以顶端重合
- 4号和5号向右倒可以顶端重合
- 1号向右，5号向左可以顶端重合

### 数据范围

对于30%的数据，满足$n\le 2000$，$m\le 5000$；

对于60%的数据，满足$n\le 200000$，$m\le 500000$；

对于100%的数据，满足$n \le 200000$，$m \le 10^9$。


---

---
title: "血小板与凝血因子"
layout: "post"
diff: 普及/提高-
pid: P4960
tag: ['Special Judge', '枚举', '排序']
---
# 血小板与凝血因子
## 题目背景

为了尽快修复伤口，血小板们正在搬运凝血因子。它们（没毛病）正在讨论怎么分配，因为它们太可爱了，所以就让你来解决这个问题。

![](https://i.loli.net/2018/10/05/5bb7372e781b1.jpg)
## 题目描述

血小板们有两种不同的容器，第一种容器每个容器中只能装同一种凝血因子，第二种容器每个容器中每种凝血因子最多出现一次。为了方便，血小板们想用**同一种**容器装下所有的凝血因子。

换句话说，把 $n$ 个正整数 $a_1$ ~ $a_n$ 分成一些不相交的集合 $S_1$ ~ $S_m$，满足以下两个条件**之一**： 
1. $\forall a_i,\ a_j\in S_k,\ k\in [1,\ m]$ 有 $a_i=a_j$
2. $\forall a_i,\ a_j\in S_k,\ k\in [1,\ m],\ i\neq j$ 有 $a_i\neq a_j$

因为血小板的数量比较少，所以你要把所有的凝血因子装到尽量少的容器里。它们想知道，如何划分能使容器的总数最小。
## 输入格式

第一行，一个正整数 $n$，表示凝血因子的个数。

第二行，$n$ 个正整数 $a_i$，分别表示凝血因子的种类。
## 输出格式

第一行，两个正整数，第一个正整数代表容器数的最小值 $m$，第二个正整数代表所用容器的种类（$1$ 或 $2$）。

接下来的 $m$ 行，每行第一个正整数 $c_i$ 代表这个容器装的凝血因子个数，后面的 $c_i$ 个数代表这个容器中装的每个凝血因子的种类。

输出任意一组合法的最优解即可，输出顺序不限。
## 样例

### 样例输入 #1
```
7
1 2 3 5 4 4 4
```
### 样例输出 #1
```
3 2
1 4
5 3 1 2 4 5
1 4
```
### 样例输入 #2
```
3
20181110 20181111 20181111
```
### 样例输出 #2
```
2 1
1 20181110
2 20181111 20181111
```
### 样例输入 #3
```
3
20181110 20181111 20181111
```
### 样例输出 #3
```
2 2
2 20181110 20181111
1 20181111
```
### 样例输入 #4
```
5
3 2 3 2 3
```
### 样例输出 #4
```
2 1
3 3 3 3
2 2 2
```
## 提示

$1\le n\le 1000,\ \ 1\le a_i\le 10^9$。

## 样例解释

### 样例一：

选用第二种容器，分别放入 $\{4\}$，$\{3,1,2,4,5\}$，$\{4\}$，这是一组可行的最优解，更改三个容器的顺序、容器 $2$ 中 $5$ 个凝血因子的顺序可以得到另外的最优解。

### 样例二/三：

这两组样例输入相同，既可以选用第一种容器，也可以选用第二种容器。

两组样例的输出分别为一组可行的最优解，改变顺序可以得到另外的几组最优解。

### 样例四：

选用第一种容器，分别放入 $\{3,3,3\}$，$\{2,2\}$，这是一组可行的最优解，更改两个容器的顺序可以得到另一组最优解。


---

---
title: "终于结束的起点"
layout: "post"
diff: 普及/提高-
pid: P4994
tag: ['递推', '枚举', '斐波那契数列', '洛谷月赛']
---
# 终于结束的起点
## 题目背景

> 终于结束的起点  
> 终于写下句点  
> 终于我们告别  
> 终于我们又回到原点  
> ……

一个个 OIer 的竞赛生涯总是从一场 NOIp 开始，大多也在一场 NOIp 中结束，好似一次次轮回在不断上演。  
如果这次 NOIp 是你的起点，那么祝你的 OI 生涯如同夏花般绚烂。  
如果这次 NOIp 是你的终点，那么祝你的 OI 回忆宛若繁星般璀璨。  
也许这是你最后一次在洛谷上打比赛，也许不是。  
不过，无论如何，祝你在一周后的比赛里，好运。

当然，这道题也和轮回有关系。
## 题目描述

广为人知的斐波拉契数列 $\mathrm{fib}(n)$ 是这么计算的

$$
\mathrm{fib}(n)=\begin{cases}
0,& n=0 \\
1,& n=1 \\
\mathrm{fib}(n-1) + \mathrm{fib}(n-2),& n>1
\end{cases}
$$

也就是 $0, 1, 1, 2, 3, 5, 8, 13 \cdots$，每一项都是前两项之和。

小 F 发现，如果把斐波拉契数列的每一项对任意大于 $1$ 的正整数 $M$ 取模的时候，数列都会产生循环。

当然，小 F 很快就明白了，因为 ($\mathrm{fib}(n - 1) \bmod M$) 和 ($\mathrm{fib}(n - 2) \bmod M)$ 最多只有 $M ^ 2$ 种取值，所以在 $M  ^ 2$ 次计算后一定出现过循环。

甚至更一般地，我们可以证明，无论取什么模数 $M$，最终模 $M$ 下的斐波拉契数列都会是 $0, 1, \cdots, 0, 1, \cdots$。

现在，给你一个模数 $M$，请你求出最小的 $n > 0$，使得 $\mathrm{fib}(n) \bmod M = 0, \mathrm{fib}(n + 1) \bmod M = 1$。
## 输入格式

输入一行一个正整数 $M$。
## 输出格式

输出一行一个正整数 $n$。
## 样例

### 样例输入 #1
```
2
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
6
```
### 样例输出 #2
```
24
```
## 提示

#### 样例 1 解释

斐波拉契数列为 $0, 1, 1, 2, 3, 5, 8, 13, 21, 34, \cdots$，在对 $2$ 取模后结果为 $0, 1, 1, 0, 1, 1, 0, 1, 1, 0, \cdots$。

我们可以发现，当 $n = 3$ 时，$f(n) \bmod 2= 0, f(n + 1) \bmod 2 = 1$，也就是我们要求的 $n$ 的最小值。

#### 数据范围

对于 $30\%$ 的数据，$M \leq 18$；

对于 $70\%$ 的数据，$M \leq 2018$；

对于 $100\%$ 的数据，$2 \leq M \leq 706150=\verb!0xAC666!$。

#### 提示

如果你还不知道什么是取模 $(\bmod)$，那我也很乐意告诉你，模运算是求整数除法得到的余数，也就是竖式除法最终「除不尽」的部分，也即
$$a \bmod M =k \iff a = bM + k\ (M > 0, 0 \leq k < M)$$
其中 $a, b, k$ 都是非负整数。

如果你使用 `C` / `C++`，你可以使用 `%` 来进行模运算。

如果你使用 `Pascal`，你可以使用 `mod` 来进行模运算。


---

---
title: "专心OI - 找祖先"
layout: "post"
diff: 普及/提高-
pid: P5002
tag: ['搜索', '枚举', '最近公共祖先 LCA']
---
# 专心OI - 找祖先
## 题目背景

Imakf 是一个小蒟蒻，他最近刚学了 LCA，他在手机 APPstore 里看到一个游戏也叫做 LCA 就下载了下来。
## 题目描述

这个游戏会给出你一棵树，这棵树有 $N$ 个节点，根结点是 $R$，系统会选中 $M$ 个点 $P_1,P_2 \cdots P_M$，要Imakf 回答有多少组点对 $(u_i,v_i)$ 的最近公共祖先是 $P_i$。Imakf 是个小蒟蒻，他就算学了 LCA 也做不出，于是只好求助您了。


## 输入格式

第一行三个整数 $N , R , M$。

此后 $N-1$ 行，每行两个数 $a,b$，表示 $a,b$ 之间有一条边。

此后 $1 $行，共 $M$ 个数，表示$P_i$。

保证给出的边形成一棵树。
## 输出格式

输出共 $M$ 行，每行一个数，第 $i$ 行的数表示有多少组点对 $(u_i,v_i)$ 的最近公共祖先是 $P_i$。
## 样例

### 样例输入 #1
```
7 1 3
1 2
1 3
2 4
2 5
3 6
3 7
1 2 4
```
### 样例输出 #1
```
31
7
1
```
## 提示

样例 1 的树如下图所示：

![](https://cdn.luogu.com.cn/upload/pic/37971.png)

 对于询问 1 $~(1,1)
(1,2)
(1,3)
(1,4)
(1,5)
(1,6)
(1,7)
(2,1)
(2,3)
(2,6)
(2,7)
(3,1)
(3,2)
(3,4)
(3,5)
(4,1)
(4,3)$

$
(4,6)
(4,7)
(5,1)
(5,3)
(5,6)
(5,7)
(6,1)
(6,2)
(6,4)
(6,5)
(7,1)
(7,2)
(7,4)
(7,5)$ 共 $31$ 组点对。

询问 2 $(2,2)
(2,4)
(2,5)
(4,2)
(4,5)
(5,2)
(5,4)$ 共 $7$ 组点对。

对于询问 3 $(4,4)$ 共 $1$ 组点对。

$1\le R\le N\leq10000$，$0\le M\leq50000$。


---

---
title: "[USACO18DEC] Back and Forth B"
layout: "post"
diff: 普及/提高-
pid: P5118
tag: ['模拟', '搜索', '2018', 'USACO', '枚举']
---
# [USACO18DEC] Back and Forth B
## 题目描述

Farmer John 有两个挤奶棚，每个挤奶棚里各有一个奶罐和一个装有 $10$ 个各种尺寸的桶的储物柜。他喜欢将在两个挤奶棚之间来回运送牛奶作为一种锻炼方式。

周一，Farmer John 量了恰好 $1000$ 加仑的牛奶放在第一个挤奶棚的奶罐里，又量了恰好 $1000$ 加仑的牛奶放在第二个挤奶棚的奶罐里。

周二，他从第一个挤奶棚里取出一个桶，并装满牛奶，然后将牛奶运到第二个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第二个挤奶棚。

周三，他从第二个挤奶棚里取出一个桶（可能是周二留在这里的），并装满牛奶，然后将牛奶运到第一个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第一个挤奶棚。

周四，他从第一个挤奶棚里取出一个桶（可能是周三留在这里的），并装满牛奶，然后将牛奶运到第二个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第二个挤奶棚。

周五，他从第二个挤奶棚里取出一个桶（可能是周二或周四留在这里的），并装满牛奶，然后将牛奶运到第一个挤奶棚，并将牛奶倒进奶罐。他把这个桶留在了第一个挤奶棚。

此时 Farmer John 测量了第一个挤奶棚的奶罐里的牛奶。他总共可能得到多少种不同的读数？

## 输入格式

输入的第一行包含 $10$ 个整数，为第一个挤奶棚里初始的桶的容积。输入的第二行也包含 $10$ 个整数，为第二个挤奶棚里初始的桶的容积。 所有桶的容积均在 $1\dots 100$ 的范围内。
## 输出格式

输出 Farmer John 在周五之后测量第一个挤奶棚里的奶罐的牛奶时可能得到的读数的数量。
## 样例

### 样例输入 #1
```
1 1 1 1 1 1 1 1 1 2
5 5 5 5 5 5 5 5 5 5
```
### 样例输出 #1
```
5
```
## 提示

在这个例子中，最后第一个挤奶棚的奶罐中的牛奶量总共有 $5$ 种可能的结果：

$1000$：FJ 可以在每次往返的时候都携带同一个桶，从而不会改变第一个挤奶棚的奶罐的牛奶量。

$1003$：FJ 可以在周二运送 $2$ 个单位，周三 $5$ 个单位，周四 $1$ 个单位，周五 $1$ 个单位。

$1004$：FJ 可以在周二运送 $1$ 个单位，周三 $5$ 个单位，周四 $1$ 个单位，周五 $1$ 个单位。

$1007$：FJ 可以在周二运送 $1$ 个单位，周三 $5$ 个单位，周四 $2$ 个单位，周五 $5$ 个单位。

$1008$：FJ 可以在周二运送 $1$ 个单位，周三 $5$ 个单位，周四 $1$ 个单位，周五 $5$ 个单位。


---

---
title: "[MtOI2019] 膜Siyuan"
layout: "post"
diff: 普及/提高-
pid: P5614
tag: ['数学', '2019', '洛谷原创', 'O2优化', '枚举', '洛谷月赛']
---
# [MtOI2019] 膜Siyuan
## 题目背景

你强归你强，$\mathsf S\mathsf{\color{red} iyuan}$ 比你强。——$\mathsf S \mathsf{\color{red} iyuan}$

disangan233 最近发现了一款 OIer 们的游戏：[膜 $\color{black} \mathsf S \mathsf{\color{red} iyuan}$](https://lmoliver.github.io/mosiyuan/index.html)。

他被里面的「真理 IV」所困惑，于是他找到了你寻求帮助。

## 题目描述

给你 $1$ 个正整数 $M$，$n(n\leq 5)$ 个正整数 $3$ 元组 $\{a_i,b_i,c_i\}(a_i,b_i,c_i\leq M\leq 2000)$，请你求出所有满足

$$
\forall i\leq n ,s.t.~|a_i-x|\oplus |b_i-y|\oplus |c_i-z| = 9
$$

的**有序**正整数 $3$ 元组 $\{x,y,z\}(x,y,z \leq M)$的个数。

其中，$\forall$ 表示 "对于所有"，$s.t.$ 表示 "使得"，$A \oplus B \oplus C$ 表示 $A,B,C$ 的异或和。

对于 C++，`A^B^C` 或 `A xor B xor C` 即为 $A \oplus B \oplus C$ 的答案 。

这里提供一份模板：

```cpp
if ((a ^ b ^ c) == 9) 
{
	Your code here...
}
```

对于 $2$ 个有序 $3$ 元组 $A,B$，如果 $x_A \not =x_B$ 或 $y_A \not =y_B$ 或 $z_A \not =z_B$，$A,B$ 即被视为是不同的。

## 输入格式

共 $n+1$ 行。

第 $1$ 行输入 $2$ 个正整数 $n$，$M$。

接下来 $n$ 行第 $i$ 行输入 $3$ 个正整数 $a_i,b_i,c_i$。
## 输出格式

共 $1$ 行，输出 $1$ 个非负整数表示所求答案。
## 样例

### 样例输入 #1
```
5 200
21 84 198
38 47 102
44 47 132 
63 150 166
76 79 132
```
### 样例输出 #1
```
4
```
## 提示

#### 样例解释 $1$

所有满足条件的 $\{x,y,z\}$ 有： 

$\{88,88,120\}$，$\{88,104,104\}$，$\{120,120,120\}$ 和 $\{120,136,104\}$。

共 $4$ 个。

### 子任务

对于 $10\%$ 的数据，保证与样例完全一致。

对于 $60\%$ 的数据，保证 $M\leq 200$。

对于所有数据，保证 $a_i,b_i,c_i\leq M\leq 2000$，$n\leq 5$。


### 题目来源

[MtOI2019 Extra Round](https://www.luogu.org/contest/22614) T2

出题人：disangan233

验题人：Studying Father



---

---
title: "[USACO20JAN] Berry Picking S"
layout: "post"
diff: 普及/提高-
pid: P6002
tag: ['2020', 'USACO', '枚举']
---
# [USACO20JAN] Berry Picking S
## 题目描述

Bessie 和她的妹妹 Elsie 正在 Farmer John 的浆果园里采浆果。Farmer John 的浆果园里有 $N$ 棵浆果树（$1 \leq N \leq 1000$）；树 $i$ 上有 $B_i$ 个浆果（$1 \leq B_i \leq 1000$）。Bessie 有 $K$ 个篮子（$1 \leq K \leq 1000$，$K$ 为偶数）。每个篮子里可以装同一棵树上采下的任意多个浆果，但是不能装来自于不同的树上的浆果，因为它们的口味可能不同。篮子里也可以不装浆果。

Bessie 想要使得她得到的浆果数量最大。但是，Farmer John 希望 Bessie 与她的妹妹一同分享，所以 Bessie 必须将浆果数量较多的 $K/2$ 个篮子给 Elsie。这表示 Elsie 很有可能最后比 Bessie 得到更多的浆果，这十分不公平，然而姐妹之间往往就是这样。

帮助 Bessie 求出她最多可以得到的浆果数量。
## 输入格式

输入的第一行包含空格分隔的整数 $N$ 和 $K$。

第二行包含 $N$ 个空格分隔的整数 $B_1,B_2,\ldots,B_N$。
## 输出格式

输出一行答案。
## 样例

### 样例输入 #1
```
5 4
3 6 8 4 2
```
### 样例输出 #1
```
8
```
## 提示

### 样例解释

如果 Bessie 在

- 一个篮子里装树 2 的 6 个浆果
- 两个篮子里每个装树 3 的 4 个浆果
- 一个篮子里装树 4 的 4 个浆果

那么她能够得到两个各装有 4 个浆果的篮子，总共 8 个浆果。

### 子任务

- 测试点 $1 \sim 4$ 满足 $K \leq 10$。
- 测试点 $5 \sim 11$ 没有额外限制。


---

---
title: "[YsOI2020] 植树"
layout: "post"
diff: 普及/提高-
pid: P6591
tag: ['O2优化', '枚举', '深度优先搜索 DFS']
---
# [YsOI2020] 植树
## 题目背景


Ysuperman 响应号召，决定在幼儿园里植树。
## 题目描述

Ysuperman 有一棵 $n$ 个节点的无根树 $T$。如果你不知道树是什么，TA 很乐意告诉你，树是一个没有环的无向联通图。

既然树是无根的，那就没有办法种植。Ysuperman 研究了很久的园艺，发现一个节点如果可以成为根，它必须十分平衡，这意味着以它为根时，与它**直接相连的节点，他们的子树大小都相同**。

你作为幼儿园信息组一把手，Ysuperman 给你一棵树，你能在 $1s$ 内找到所有可能成为根的节点吗？
## 输入格式

第一行一个正整数 $n$，表示树的节点个数。

此后 $n-1$ 行，每行两个正整数 $u_i,v_i$，表示树上有一条直接连接 $u_i,v_i$ 的边。保证每条边只会给出一次。
## 输出格式

不超过 $n$ 个从小到大的整数，用空格隔开，表示每一个可能成为根的节点。
## 样例

### 样例输入 #1
```
2
1 2

```
### 样例输出 #1
```
1 2 
```
### 样例输入 #2
```
4
1 2
2 3
3 4

```
### 样例输出 #2
```
1 4 

```
### 样例输入 #3
```
9
1 2
1 3
4 1
5 1
1 6
1 9
8 1
1 7

```
### 样例输出 #3
```
1 2 3 4 5 6 7 8 9 

```
## 提示

### 样例说明

#### 样例说明 $1$。

![](https://cdn.luogu.com.cn/upload/image_hosting/gsiug69y.png)

以 $1$ 为根时，与 $1$ 直接相连的点有 $\{2\}$，因为只有一个所以大小全部相同。

以 $2$ 为根时，与 $2$ 直接相连的点有 $\{1\}$，因为只有一个所以大小全部相同。

所以答案为 $1,2$。

#### 样例说明 $2$

![](https://cdn.luogu.com.cn/upload/image_hosting/p7fsretv.png)

以 $1$ 为根时，与 $1$ 直接相连的点有 $\{2\}$，因为只有一个所以大小全部相同。

以 $2$ 为根时，与 $2$ 直接相连的点有 $\{1,3\}$，子树大小分别为 $\{1,2\}$，不相同。

以 $3$ 为根时，与 $3$ 直接相连的点有 $\{2,4\}$，子树大小分别为 $\{2,1\}$，不相同。

以 $4$ 为根时，与 $4$ 直接相连的点有 $\{3\}$，因为只有一个所以大小全部相同。

所以答案为 $1,4$。

----

### 数据范围

**本题采用捆绑测试。**

| $\rm{subtask}$ | $n$ |  分数|
| :-----------: | :-----------: | :----: |
| $1$ | $\le 5000$ | $40$ |
| $2$ | $\le 10^6$ | $60$ |

对于 $100\%$ 的数据，满足 $1 \le n\le 10^6$。

------

### 提示

由于输入输出量较大，你可能需要快速输入/输出。


---

---
title: "[yLOI2020] 金陵谣"
layout: "post"
diff: 普及/提高-
pid: P7094
tag: ['数学', '2020', 'O2优化', '枚举']
---
# [yLOI2020] 金陵谣
## 题目背景

> 水几绕，山几重，何处金陵城。   
> 访名都，寻形胜，龙虎倚江东。   
> 书留翰墨，曲落潮声。   
> 草木几度枯荣。

——银临《金陵谣》
## 题目描述

江苏南京，亦称金陵，是一座历史文化名城。有了古城的衬托，江苏省的高考模拟题都显地那么棘手，难以解决。切切在一轮复习过程中便碰到一道江苏省模拟题，在七瑾的帮助下，切切很快秒杀了该题，但切切觉得不够，想用这道题来刁难你。解决本题就能吃到切切和七瑾撒的糖。

给定四个正整数 $a, b, c, d$，求有多少对正整数 $(x, y)$ 满足

$$\frac a x + \frac b c = \frac d y$$
## 输入格式

**本题单测试点内有多组测试数据**。

第一行是一个整数，表示数据组数 $T$。

接下来 $T$ 行，每行四个整数，依次表示一组数据的 $a, b, c, d$。
## 输出格式

对于每组数据，输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
1
1 1 3 2
```
### 样例输出 #1
```
3
```
## 提示

### 样例 1 解释

求 $\frac 1 x + \frac 1 3 = \frac 2 y$ 的正整数解对数，分别是 $(x = 3, y = 3)$，$(x = 6, y = 4)$，$(x = 15, y = 5)$。

### 数据规模与约定

本题共有 20 个测试点，每个测试点 $5$ 分。

- 对于测试点 $1$，保证 $T = 0$。
- 对于测试点 $2 \sim 16$，共 $15$ 个测试点，对于 $a, b, c, d$ 四个数中至少存在一个数为 $1$ 共有 $15$ 种情况，每个测试点对应一种情况。
- 对于测试点 $17 \sim 20$，没有特殊约定。

对于全部的测试点，保证 $0 \leq T \leq 20$，$1 \leq a, b, c, d \leq 10^6$，$d \times c \leq 10^6$。

### 提示

+ 众所周知，高考不考数论。
+ 本题共有两个样例文件，见附加中的 song.zip。


---

---
title: "「PMOI-4」人赢"
layout: "post"
diff: 普及/提高-
pid: P7318
tag: ['数学', '枚举', '矩阵乘法', '洛谷月赛']
---
# 「PMOI-4」人赢
## 题目背景

众所周知，ducati 是人 win。

现在 lhm 也想成为人 win，于是 ducati 扔给了 lhm 下面这道题，并且 ducati 承诺在 lhm 完成此题后教他如何成为人 win。
## 题目描述

现在 lhm 手中有一个无穷长的衔尾数列 $a$，它满足：

- 对于数列中的每一个 $a_i(i>2)$，它总为 $a_{i-2} \times a_{i-1}$ 的**个位数**。

ducati 将给 lhm 衔尾数列的前两位 $a_1=n,a_2=m$ 与位置 $k$，它的任务是算出 $a_k$。

由于 lhm 太菜了并不会这道题，但他仍然想成为人 win，所以他只好请聪明的你来帮他完成这个问题。
## 输入格式

第一行三个整数 $n,m,k$。
## 输出格式

一行一个整数，表示数列中位置 $k$ 的数字。
## 样例

### 样例输入 #1
```
1 6 10
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
7 2 7
```
### 样例输出 #2
```
2
```
## 提示

【样例解释 $1$】

数列 $1$ 至 $10$ 位依次为：$1,6,6,6,6,6,6,6,6,\color{red}{6}$。所以答案为 $6$。

【样例解释 $2$】

数列 $1$ 至 $7$ 位依次为：$7,2,4,8,2,6,\color{red}{2}$。所以答案为 $2$。


【数据范围】

**本题采用捆绑测试**。

- Subtask 1（30pts）：$1 \leq k \leq 10^6$。
- Subtask 2（70pts）：无特殊限制。

对于 $100\%$ 的数据，$0 \leq n,m \leq 9$，$1 \leq k \leq 10^{12}$。


---

---
title: "[NOI Online 2021 入门组] 吃豆人"
layout: "post"
diff: 普及/提高-
pid: P7472
tag: ['2021', '枚举', 'NOI Online']
---
# [NOI Online 2021 入门组] 吃豆人
## 题目描述

有一个 $n$ 行 $n$ 列的正方形点阵，左上角点坐标为 $(1, 1)$，右下角点坐标为 $(n, n)$。

点阵中每个整点上都有数量不一的豆子，坐标为 $(i, j)$ 的点上有 $a_{i,j}$ 个豆子。

你可以放置吃豆人，可以将点阵中任意的整点作为吃豆人的初始位置，再给定左上、左下、右上、右下之一作为吃豆人的初始方向。

吃豆人会不断沿初始方向行进，吃光遇到的所有豆子，直到碰到点阵的边界，此时：

1. 如果吃豆人处于正方形点阵四个角之一的位置，那么就会停止行动；

2. 否则，吃豆人的行进路线将以这条边界为镜面发生反射，下图展示了一个路径某两次发生反射的例子：

![](https://cdn.luogu.com.cn/upload/image_hosting/6tji95nq.png)

现在，你需要放置两个吃豆人，求两个吃豆人最多共能吃到多少个豆子？注意同一个豆子只能被吃一次。

## 输入格式

第一行包含一个整数 $n$，表示点阵大小。

接下来 $n$ 行，每行包含 $n$ 个整数，其中第 $i$ 行第 $j$ 个整数表示 $a_{i,j}$。

## 输出格式

输出一行一个整数，表示两个吃豆人最多共能吃到的豆子数量。
## 样例

### 样例输入 #1
```
4
20 1 19 2
3 18 4 17
16 5 15 6
7 14 8 13
```
### 样例输出 #1
```
132
```
## 提示

### 样例 1 解释

在 $(1, 1)$ 和 $(1, 3)$ 位置放置吃豆人，初始方向分别为右下和左下，即可吃到位于
$(1, 1)$，$(1, 3)$，$(2, 2)$，$(2, 4)$，$(3, 1)$，$(3, 3)$，$(4, 2)$，$(4, 4)$ 位置上的豆子，总个数为 $132$，
达到最大，路径分别如下图绿线和红线所示：

![](https://cdn.luogu.com.cn/upload/image_hosting/1axaad1b.png)

### 数据范围

对于 $30\%$ 的数据，$n\leq 3$。

对于 $60\%$ 的数据：$n\leq 100$。

对于 $100\%$ 的数据：$2\leq n\leq 1000$，$0\leq a_{i,j}\leq 1000$。

数据由 [SSerxhs](https://www.luogu.com.cn/user/29826) 和 [Karry5307](https://www.luogu.com.cn/user/60990) 共同提供。

感谢 [Silence_water](https://www.luogu.com.cn/user/338630) 提供一组 hack 数据。


---

---
title: "[省选联考 2021 B 卷] 数对"
layout: "post"
diff: 普及/提高-
pid: P7517
tag: ['各省省选', '2021', 'O2优化', '枚举']
---
# [省选联考 2021 B 卷] 数对
## 题目描述

给定 $n$ 个正整数 $a_i$，请你求出有多少个数对 $(i, j)$ 满足 $1 \le i \le n$，$1 \le j \le n$，$i \ne j$ 且 $a_i$ 是 $a_j$ 的倍数。
## 输入格式

第一行，一个整数 $n$，表示数字个数。  
第二行，$n$ 个整数，表示 $a_i$。
## 输出格式

输出一行，一个整数，表示答案。
## 样例

### 样例输入 #1
```
6
16 11 6 1 9 11

```
### 样例输出 #1
```
7

```
### 样例输入 #2
```
见附件中的 pair/pair2.in。
```
### 样例输出 #2
```
见附件中的 pair/pair2.ans。
```
## 提示

对于 $40 \%$ 的数据，$n \le 1000$。  
对于 $70 \%$ 的数据，$1 \le a_i \le 5 \times {10}^3$。  
对于 $100 \%$ 的数据，$2 \le n \le 2 \times {10}^5$，$1 \le a_i \le 5 \times {10}^5$。


---

---
title: "[COCI 2011/2012 #2] ZADAĆA"
layout: "post"
diff: 普及/提高-
pid: P7616
tag: ['数学', '2011', '枚举', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #2] ZADAĆA
## 题目描述

给定 $N$ 个正整数 $A_1,A_2,...,A_N$ 和 $M$ 个正整数 $B_1,B_2,...,B_M$，求：

$$\gcd(\prod\limits_{i=1}^NA_i,\prod\limits_{i=1}^MB_i)$$
## 输入格式

第一行包含一个正整数 $N$。

第二行包含 $N$ 个正整数 $A_i$。

第三行包含一个正整数 $M$。

第四行包含 $M$ 个正整数 $B_i$。
## 输出格式

输出一行，表示答案。**如果答案超过九位数，你只需输出它的最后九位即可**。
## 样例

### 样例输入 #1
```
3
2 3 5
2
4 5
```
### 样例输出 #1
```
10
```
### 样例输入 #2
```
4
6 2 3 4
1
1
```
### 样例输出 #2
```
1
```
### 样例输入 #3
```
3
358572 83391967 82
3
50229961 1091444 8863
```
### 样例输出 #3
```
000012028
```
## 提示

#### 【样例 1 解释】

$\gcd(30,20) = 10$，因此答案为 $10$。

#### 【数据范围】

对于 $100\%$ 的数据，$1 \le N,M \le 1000$，$1 \le A_i,B_i \le 10^9$。

#### 【说明】

本题分值按 COCI 原题设置，满分 $100$。

题目译自 **[COCI2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #2](https://hsin.hr/coci/archive/2011_2012/contest2_tasks.pdf)** ___T3 ZADAĆA___。


---

---
title: "[COCI 2011/2012 #1] MATRIX"
layout: "post"
diff: 普及/提高-
pid: P7626
tag: ['模拟', '2011', '枚举', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #1] MATRIX
## 题目描述

有一个 $N \times N$ 的矩阵，找出它的美丽值最大的子矩阵，要求这个子矩阵是正方形，即长和宽相等。

定义一个矩阵的**美丽值**为：将这个矩阵**主对角线**上的数的和定义为 $A$，另一条对角线上的数的和定义为 $B$，则这个矩阵的美丽值为 $A - B$。
## 输入格式

输入的第一行包含一个正整数 $N$。

接下来 $N$ 行每行包含 $N$ 个整数，表示这个矩阵。
## 输出格式

输出一行一个整数，表示最大的美丽值。
## 样例

### 样例输入 #1
```
2
1 -2
4 5
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
3
1 2 3
4 5 6
7 8 9
```
### 样例输出 #2
```
0
```
### 样例输入 #3
```
3
-3 4 5
7 9 -2
1 0 -6
```
### 样例输出 #3
```
5
```
## 提示

#### 【数据范围】

对于 $100\%$ 的数据，$1 \le N \le 400$，矩阵元素 $\in [-10^3,10^3]$。

#### 【说明】

本题分值按 COCI 原题设置，满分 $80$。

题目译自 **[COCI2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #1](https://hsin.hr/coci/archive/2011_2012/contest1_tasks.pdf)** ___T2 MATRIX___。


---

---
title: "[COCI 2009/2010 #2] RIMSKI"
layout: "post"
diff: 普及/提高-
pid: P7773
tag: ['模拟', '字符串', '2009', '枚举', '其它技巧', 'COCI（克罗地亚）']
---
# [COCI 2009/2010 #2] RIMSKI
## 题目背景

本题为[$\texttt{COCI 2009-2010}\ 2^\texttt{nd}\ \texttt{round}\ \text{T2 RIMSKI}$](https://hsin.hr/coci/archive/2009_2010/contest2_tasks.pdf)。

分值按原题设置，满分 $50$。
## 题目描述

给定一个罗马数字 $B$，把 $B$ 的字符重新排列，要求让排列后的数字最小。
## 输入格式

一行一个罗马数字 $B$。
## 输出格式

一行一个罗马数字，为你重排后能得到的最小的数字。
## 样例

### 样例输入 #1
```
VIII
```
### 样例输出 #1
```
VIII
```
### 样例输入 #2
```
VI
```
### 样例输出 #2
```
IV
```
### 样例输入 #3
```
III
```
### 样例输出 #3
```
III
```
### 样例输入 #4
```
LI
```
### 样例输出 #4
```
LI
```
## 提示

$1\leq B< 100$。

注意，在本题中`I`如果在大数字之前，它只能在`V` 、`X`之前。输入遵循同样的规则。（这就是样例 $4$ 的输出为什么是 `LI` 而不是 `IL`。）


---

---
title: "[CSP-J 2021] 插入排序"
layout: "post"
diff: 普及/提高-
pid: P7910
tag: ['2021', 'O2优化', '枚举', '排序', 'CSP-J 入门级']
---
# [CSP-J 2021] 插入排序
## 题目描述

插入排序是一种非常常见且简单的排序算法。小 Z 是一名大一的新生，今天 H 老师刚刚在上课的时候讲了插入排序算法。

假设比较两个元素的时间为 $\mathcal O(1)$，则插入排序可以以 $\mathcal O(n^2)$ 的时间复杂度完成长度为 $n$ 的数组的排序。不妨假设这 $n$ 个数字分别存储在 $a_1, a_2, \ldots, a_n$ 之中，则如下伪代码给出了插入排序算法的一种最简单的实现方式：

这下面是 C/C++ 的示范代码：

```cpp
for (int i = 1; i <= n; i++)
	for (int j = i; j >= 2; j--)
		if (a[j] < a[j-1]) {
			int t = a[j-1];
			a[j-1] = a[j];
			a[j] = t;
		}
```

这下面是 Pascal 的示范代码：

```pascal
for i:=1 to n do
	for j:=i downto 2 do
		if a[j]<a[j-1] then
			begin
				t:=a[i];
				a[i]:=a[j];
				a[j]:=t;
			end;
```

为了帮助小 Z 更好的理解插入排序，小 Z 的老师 H 老师留下了这么一道家庭作业：

H 老师给了一个长度为 $n$ 的数组 $a$，数组下标从 $1$ 开始，并且数组中的所有元素均为非负整数。小 Z 需要支持在数组 $a$ 上的 $Q$ 次操作，操作共两种，参数分别如下：

$1~x~v$：这是第一种操作，会将 $a$ 的第 $x$ 个元素，也就是 $a_x$ 的值，修改为 $v$。保证 $1 \le x \le n$，$1 \le v \le 10^9$。**注意这种操作会改变数组的元素，修改得到的数组会被保留，也会影响后续的操作**。

$2~x$：这是第二种操作，假设 H 老师按照**上面的伪代码**对 $a$ 数组进行排序，你需要告诉 H 老师原来 $a$ 的第 $x$ 个元素，也就是 $a_x$，在排序后的新数组所处的位置。保证 $1 \le x \le n$。**注意这种操作不会改变数组的元素，排序后的数组不会被保留，也不会影响后续的操作**。

H 老师不喜欢过多的修改，所以他保证类型 $1$ 的操作次数不超过 $5000$。

小 Z 没有学过计算机竞赛，因此小 Z 并不会做这道题。他找到了你来帮助他解决这个问题。
## 输入格式

第一行，包含两个正整数 $n, Q$，表示数组长度和操作次数。

第二行，包含 $n$ 个空格分隔的非负整数，其中第 $i$ 个非负整数表示 $a_i$。

接下来 $Q$ 行，每行 $2 \sim 3$ 个正整数，表示一次操作，操作格式见【**题目描述**】。
## 输出格式

对于每一次类型为 $2$ 的询问，输出一行一个正整数表示答案。
## 样例

### 样例输入 #1
```
3 4
3 2 1
2 3
1 3 2
2 2
2 3

```
### 样例输出 #1
```
1
1
2

```
## 提示

**【样例解释 #1】**

在修改操作之前，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 2, 1$。

在修改操作之后，假设 H 老师进行了一次插入排序，则原序列的三个元素在排序结束后所处的位置分别是 $3, 1, 2$。

注意虽然此时 $a_2 = a_3$，但是我们**不能将其视为相同的元素**。

**【样例 #2】**

见附件中的 `sort/sort2.in` 与 `sort/sort2.ans`。

该测试点数据范围同测试点 $1 \sim 2$。

**【样例 #3】**

见附件中的 `sort/sort3.in` 与 `sort/sort3.ans`。

该测试点数据范围同测试点 $3 \sim 7$。

**【样例 #4】**

见附件中的 `sort/sort4.in` 与 `sort/sort4.ans`。

该测试点数据范围同测试点 $12 \sim 14$。

**【数据范围】**

对于所有测试数据，满足 $1 \le n \le 8000$，$1 \le Q \le 2 \times {10}^5$，$1 \le x \le n$，$1 \le v,a_i \le 10^9$。

对于所有测试数据，保证在所有 $Q$ 次操作中，至多有 $5000$ 次操作属于类型一。

各测试点的附加限制及分值如下表所示。

| 测试点 | $n \le$ | $Q \le$ | 特殊性质 |
|:-:|:-:|:-:|:-:|
| $1 \sim 4$ | $10$ | $10$ | 无 |
| $5 \sim 9$ | $300$ | $300$ | 无 |
| $10 \sim 13$ | $1500$ | $1500$ | 无 |
| $14 \sim 16$ | $8000$ | $8000$| 保证所有输入的 $a_i,v$ 互不相同 |
| $17 \sim 19$ | $8000$ | $8000$ | 无 |
| $20 \sim 22$ | $8000$ | $2 \times 10^5$ | 保证所有输入的 $a_i,v$ 互不相同 |
| $23 \sim 25$ | $8000$ | $2 \times 10^5$ | 无 |


---

---
title: "[CSP-J 2021] 网络连接"
layout: "post"
diff: 普及/提高-
pid: P7911
tag: ['模拟', '2021', 'O2优化', '枚举', 'CSP-J 入门级']
---
# [CSP-J 2021] 网络连接
## 题目描述

TCP/IP 协议是网络通信领域的一项重要协议。今天你的任务，就是尝试利用这个协议，还原一个简化后的网络连接场景。

在本问题中，计算机分为两大类：服务机（`Server`）和客户机（`Client`）。服务机负责建立连接，客户机负责加入连接。

需要进行网络连接的计算机共有 $n$ 台，编号为 $1 \sim n$，这些机器将按编号递增的顺序，依次发起一条建立连接或加入连接的操作。

每台机器在尝试建立或加入连接时需要提供一个地址串。服务机提供的地址串表示它尝试建立连接的地址，客户机提供的地址串表示它尝试加入连接的地址。

一个符合规范的地址串应当具有以下特征：

1. 必须形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为非负整数；
2. $0 \le a, b, c, d \le 255$，$0 \le e \le 65535$；
3. $a, b, c, d, e$ 均不能含有多余的前导 $0$。

相应地，不符合规范的地址串可能具有以下特征：

1. 不是形如 `a.b.c.d:e` 格式的字符串，例如含有多于 $3$ 个字符 `.` 或多于 $1$ 个字符 `:` 等情况；
2. 整数 $a, b, c, d, e$ 中某一个或多个超出上述范围；
3. 整数 $a, b, c, d, e$ 中某一个或多个含有多余的前导 $0$。

例如，地址串 `192.168.0.255:80` 是符合规范的，但 `192.168.0.999:80`、`192.168.00.1:10`、`192.168.0.1:088`、`192:168:0:1.233` 均是不符合规范的。

如果服务机或客户机在发起操作时提供的地址串不符合规范，这条操作将被直接忽略。

在本问题中，我们假定凡是符合上述规范的地址串均可参与正常的连接，你无需考虑每个地址串的实际意义。

由于网络阻塞等原因，不允许两台服务机使用相同的地址串，如果此类现象发生，后一台尝试建立连接的服务机将会无法成功建立连接；除此之外，凡是提供符合规范的地址串的服务机均可成功建立连接。

如果某台提供符合规范的地址的客户机在尝试加入连接时，与先前某台已经成功建立连接的服务机提供的地址串相同，这台客户机就可以成功加入连接，并称其连接到这台服务机；如果找不到这样的服务机，则认为这台客户机无法成功加入连接。

请注意，尽管不允许两台不同的服务机使用相同的地址串，但多台客户机使用同样的地址串，以及同一台服务机同时被多台客户机连接的情况是被允许的。

你的任务很简单：在给出每台计算机的类型以及地址串之后，判断这台计算机的连接情况。
## 输入格式

第一行，一个正整数 $n$。

接下来 $n$ 行，每行两个字符串 $\mathit{op}, \mathit{ad}$，按照编号从小到大给出每台计算机的类型及地址串。

其中 $\mathit{op}$ 保证为字符串 `Server` 或 `Client` 之一，$\mathit{ad}$ 为一个长度不超过 $25$ 的，仅由数字、字符 `.` 和字符 `:` 组成的非空字符串。

每行的两个字符串之间用恰好一个空格分隔开，每行的末尾没有多余的空格。
## 输出格式

输出共 $n$ 行，每行一个正整数或字符串表示第 $i$ 台计算机的连接状态。其中：

如果第 $i$ 台计算机为服务机，则：

1. 如果其提供符合规范的地址串且成功建立连接，输出字符串 `OK`。
2. 如果其提供符合规范的地址串，但由于先前有相同地址串的服务机而无法成功建立连接，输出字符串 `FAIL`。
3. 如果其提供的地址串不是符合规范的地址串，输出字符串 `ERR`。

如果第 $i$ 台计算机为客户机，则：

1. 如果其提供符合规范的地址串且成功加入连接，输出一个正整数表示这台客户机连接到的服务机的编号。
2. 如果其提供符合规范的地址串，但无法成功加入连接时，输出字符串 `FAIL`。
3. 如果其提供的地址串不是符合规范的地址串，输出字符串 `ERR`。
## 样例

### 样例输入 #1
```
5
Server 192.168.1.1:8080
Server 192.168.1.1:8080
Client 192.168.1.1:8080
Client 192.168.1.1:80
Client 192.168.1.1:99999

```
### 样例输出 #1
```
OK
FAIL
1
FAIL
ERR

```
### 样例输入 #2
```
10
Server 192.168.1.1:80
Client 192.168.1.1:80
Client 192.168.1.1:8080
Server 192.168.1.1:80
Server 192.168.1.1:8080
Server 192.168.1.999:0
Client 192.168.1.1.8080
Client 192.168.1.1:8080
Client 192.168.1.1:80
Client 192.168.1.999:0

```
### 样例输出 #2
```
OK
1
FAIL
FAIL
OK
ERR
ERR
5
1
ERR

```
### 样例输入 #3
```
见附件中的 network/network3.in。
```
### 样例输出 #3
```
见附件中的 network/network3.ans。
```
### 样例输入 #4
```
见附件中的 network/network4.in。
```
### 样例输出 #4
```
见附件中的 network/network4.ans。
```
## 提示

**【样例解释 #1】**

计算机 $1$ 为服务机，提供符合规范的地址串 `192.168.1.1:8080`，成功建立连接；

计算机 $2$ 为服务机，提供与计算机 $1$ 相同的地址串，未能成功建立连接；

计算机 $3$ 为客户机，提供符合规范的地址串 `192.168.1.1:8080`，成功加入连接，并连接到服务机 $1$；

计算机 $4$ 为客户机，提供符合规范的地址串 `192.168.1.1:80`，找不到服务机与其连接；

计算机 $5$ 为客户机，提供的地址串 `192.168.1.1:99999` 不符合规范。

**【数据范围】**

| 测试点编号 | $n \le$ | 特殊性质 |
|:-:|:-:|:-:|
| $1$ | $10$ | 性质 1 2 3 |
| $2 \sim 3$ | $100$ | 性质 1 2 3 |
| $4 \sim 5$ | $1000$ | 性质 1 2 3 |
| $6 \sim 8$ | $1000$ | 性质 1 2 |
| $9 \sim 11$ | $1000$ | 性质 1 |
| $12 \sim 13$ | $1000$ | 性质 2 |
| $14 \sim 15$ | $1000$ | 性质 4 |
| $16 \sim 17$ | $1000$ | 性质 5 |
| $18 \sim 20$ | $1000$ | 无特殊性质 |

“性质 1”为：保证所有的地址串均符合规范；  
“性质 2”为：保证对于任意两台不同的计算机，如果它们同为服务机或者同为客户机，则它们提供的地址串一定不同；  
“性质 3”为：保证任意一台服务机的编号都小于所有的客户机；  
“性质 4”为：保证所有的地址串均形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为不超过 ${10}^9$ 且不含有多余前导 $0$ 的非负整数；  
“性质 5”为：保证所有的地址串均形如 `a.b.c.d:e` 的格式，其中 $a, b, c, d, e$ 均为只含有数字的非空字符串。

对于 $100 \%$ 的数据，保证 $1 \le n \le 1000$。

**【提供 hack 数据感谢】**  

- [xyf007](/user/68273)。


---

---
title: "[COCI 2007/2008 #5] AVOGADRO"
layout: "post"
diff: 普及/提高-
pid: P7935
tag: ['模拟', '2007', '枚举', '队列', 'COCI（克罗地亚）']
---
# [COCI 2007/2008 #5] AVOGADRO
## 题目描述

Luka 画了一张 $3$ 行 $N$ 列的表格，然后将整数 $1$ 到 $N$ 写进表格。对于表格第一行，每个整数只出现一次。对于其余两行，每个数字可以出现任意次或者不出现。

Luka 现在可以删去任意一些列。完成后，他对这个表的每一行进行升序排序。

他希望得到一张表，使得表中的三行在升序排序后完全相同。请您求出他至少需要删去多少列。
## 输入格式

第一行，一个整数 $N$，表示表中数字的列数。

接下来三行，每行包含 $N$ 个整数。这些整数都在 $1$ 到 $N$ 之间，第一行每个数字有且仅出现一次。
## 输出格式

一行，一个整数，表示 Luka 至少需要删除的列数。
## 样例

### 样例输入 #1
```
7
5 4 3 2 1 6 7
5 5 1 1 3 4 7
3 7 1 4 5 6 2 
```
### 样例输出 #1
```
4
```
### 样例输入 #2
```
9
1 3 5 9 8 6 2 4 7
2 1 5 6 4 9 3 4 7
3 5 1 9 8 6 2 8 7
```
### 样例输出 #2
```
2
```
## 提示

对于 $40\%$ 的测试点，$N\le 100$。

对于 $70\%$ 的测试点，$N\le 10000$。

对于 $100\%$ 的测试点，$1\le N\le 10^5$。

### 样例 1 解释：

对于样例 1，Luka 需要删除第二、第四、第六和第七列。删除并排序后，这三行都只包含 $1,3,5$ 三个整数。

本题分值按照原比赛设置，满分 $60$ 分。


---

---
title: "[Aya Round 1 B] 甲（one）"
layout: "post"
diff: 普及/提高-
pid: P8467
tag: ['模拟', '洛谷原创', 'O2优化', '枚举', '洛谷月赛']
---
# [Aya Round 1 B] 甲（one）
## 题目描述

定义长度为 $5$ 的序列 $S$ 为「好的」，当且仅当存在长度为 $5$ 的排列 $P$，满足 $S_{P_1}-1=S_{P_2}=S_{P_3}+1$ 且 $S_{P_4}=S_{P_5}$。现有一长度为 $5$ 的整数序列 $a$，满足 $0\le a_i \le 9(1\le i \le 5)$。其中 $a_1 \sim a_4$ 给定。试判断是否存在 $a_5$ 满足 $a$ 为「好的」。

其中，长度为 $5$ 的排列 $P$，指的是一个长度为 $5$ 的数列，其中 $1,2,3,4,5$ 在这个数列中出现且只出现一次。
## 输入格式

**本题含有多组数据。**

- 第一行输入一个整数 $T$ 代表数据组数。
- 接下来 $T$ 行每行输入四个整数 $a_1,a_2,a_3,a_4$。表示一组数据。
## 输出格式

- 输出共 $T$ 行。对于每组数据，若存在满足条件的 $a_5$，输出 $1$；否则输出 $0$。
## 样例

### 样例输入 #1
```
5
3 2 8 4
1 2 3 4
1 9 4 9
1 0 0 1
0 0 4 2
```
### 样例输出 #1
```
1
1
0
0
1
```
## 提示

### 附加样例

- 样例 $2$ 见下发文件中的 $\textbf{\textit{one2.in/one2.ans}}$。该样例满足测试点 $2$ 的限制。
- 样例 $3$ 见下发文件中的 $\textbf{\textit{one3.in/one3.ans}}$。该样例满足测试点 $5$ 的限制。

### 样例解释

#### 样例 \#1

- 对于第 $1$ 组数据，可以令 $a_5=8$。此时存在 $P=\{4,1,2,5,3\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。
- 对于第 $2$ 组数据，可以令 $a_5=4$。此时存在 $P=\{3,2,1,4,5\}$，满足 $a_{P_1}-1=a_{P_2}=a_{P_3}+1$ 且 $a_{P_4}=a_{P_5}$。故输出 $1$。
- 对于第 $3$ 组数据，不存在可以使 $a$ 为「好的」的 $a_5$。

$$
\begin{aligned}
\fcolorbox{black}{#fbb}{3\ \ 2\ \ 8\ \ 4} + \fcolorbox{black}{yellow}{8} &\Rightarrow \fcolorbox{black}{#fbb}{2\ \ 3\ \ 4} + \fcolorbox{black}{yellow}{8\ \ 8}\ {\color{green}\sqrt{}}\\
\fcolorbox{black}{#fbb}{1\ \ 2\ \ 3\ \ 4} + \fcolorbox{black}{yellow}{4} &\Rightarrow \fcolorbox{black}{#fbb}{1\ \ 2\ \ 3} + \fcolorbox{black}{yellow}{4\ \ 4}\ {\color{green}\sqrt{}}\\
\fcolorbox{black}{#fbb}{1\ \ 9\ \ 4\ \ 9} +   \begin{cases}
\fcolorbox{black}{yellow}{0}\\
\fcolorbox{black}{yellow}{1}\\
\cdots\\
\fcolorbox{black}{yellow}{9}
\end{cases}&\Rightarrow
{\color{red}\xcancel{\color{black}
\begin{cases}
\fcolorbox{black}{#fbb}{1\ \ 9\ \ 4\ \ 9\ \ 0}\\
\fcolorbox{black}{#fbb}{1\ \ 9\ \ 4\ \ 9\ \ 1}\\
\cdots\\
\fcolorbox{black}{#fbb}{1\ \ 9\ \ 4\ \ 9\ \ 9}
\end{cases}}}
\end{aligned}
$$

### 数据范围

$$
\def\arraystretch{1.5}
\begin{array}{|c|c|c|} \hline
\textbf{\textsf{测试点}} & \bm{{T\le}} & \textbf{\textsf{特殊性质}} \cr\hline
1 & 100 & \textbf{A} \cr\hline
2 & 100 & \textbf{B} \cr\hline
3 & 100 & - \cr\hline
4 & 1000 & - \cr\hline
5 & 10^5 & - \cr\hline
\end{array}
$$

- 特殊性质 $\bf A$：$a_1=a_2=a_3=a_4$。
- 特殊性质 $\bf B$：$a_1,a_2,a_3,a_4$ 互不相等。

对于 $100\%$ 的数据，$1\le T\le 10^5$，$0\le a_i \le 9$。


---

---
title: "[蓝桥杯 2013 省 B] 带分数"
layout: "post"
diff: 普及/提高-
pid: P8599
tag: ['2013', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2013 省 B] 带分数
## 题目描述

$100$ 可以表示为带分数的形式：$100 = 3 + \frac{69258}{714}$。

还可以表示为：$100 = 82 + \frac{3546}{197}$。

注意特征：带分数中，数字 $1$ ~ $9$ 分别出现且只出现一次（不包含 $0$）。

类似这样的带分数，$100$ 有 $11$ 种表示法。





## 输入格式

从标准输入读入一个正整数 $N(N<10^6)$。
## 输出格式

程序输出数字 $N$ 用数码 $1$ ~ $9$ 不重复不遗漏地组成带分数表示的全部种数。

注意：不要求输出每个表示，只统计有多少表示法！
## 样例

### 样例输入 #1
```
100
```
### 样例输出 #1
```
11
```
### 样例输入 #2
```
105
```
### 样例输出 #2
```
6
```
## 提示

原题时限 3 秒, 64M。蓝桥杯 2013 年第四届省赛


---

---
title: "[蓝桥杯 2018 省 A] 倍数问题"
layout: "post"
diff: 普及/提高-
pid: P8663
tag: ['2018', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2018 省 A] 倍数问题
## 题目描述

众所周知，小葱同学擅长计算，尤其擅长计算一个数是否是另外一个数的倍数。但小葱只擅长两个数的情况，当有很多个数之后就会比较苦恼。现在小葱给了你 $n$ 个数，希望你从这 $n$ 个数中找到三个数，使得这三个数的和是 $K$ 的倍数，且这个和最大。数据保证一定有解。
## 输入格式

从标准输入读入数据。

第一行包括 $2$ 个正整数表示 $n$ 和 $K$。

第二行 $n$ 个正整数，代表给定的 $n$ 个数。
## 输出格式

输出一行一个整数代表所求的和。
## 样例

### 样例输入 #1
```
4 3
1 2 3 4
```
### 样例输出 #1
```
9
```
## 提示

**【样例解释】**

选择 $2$、$3$、$4$。

**【数据约定】**

对于 $30\%$ 的数据，$n \le 100$。

对于 $60\%$ 的数据，$n \le 1000$。

对于另外 $20\%$ 的数据，$K \le 10$。

对于 $100\%$ 的数据，$1 \le n \le 10^5$，$1 \le K \le 10^3$，给定的 $n$ 个数均不超过 $10^8$。

时限 1 秒，256M。蓝桥杯 2018 年第九届省赛。


---

---
title: "[蓝桥杯 2018 省 B] 递增三元组"
layout: "post"
diff: 普及/提高-
pid: P8667
tag: ['动态规划 DP', '2018', '二分', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2018 省 B] 递增三元组
## 题目描述

给定三个整数数组 $A = [A_1, A_2,\cdots, A_N]$，$B = [B_1, B_2,\cdots, B_N]$，$C = [C_1, C_2,\cdots,C_N]$。

请你统计有多少个三元组 $(i, j, k)$ 满足：
1. $1 \le i, j, k \le N$  
2. $A_i < B_j < C_k$
## 输入格式

第一行包含一个整数 $N$。

第二行包含 $N$ 个整数 $ A_1, A_2,\cdots, A_N$。

第三行包含 $N$ 个整数 $ B_1, B_2,\cdots, B_N$。

第四行包含 $N$ 个整数 $ C_1, C_2,\cdots, C_N$。


## 输出格式

一个整数表示答案
## 样例

### 样例输入 #1
```
3
1 1 1
2 2 2
3 3 3
```
### 样例输出 #1
```
27
```
## 提示

对于 $30\%$ 的数据，$1 \le N \le 100$。

对于 $60\%$ 的数据，$1 \le N \le 1000$。

对于 $100\%$ 的数据，$1 \le N \le 10^5$，$0 \le A_i, B_i, C_i \le 10^5$。


---

---
title: "[蓝桥杯 2018 国 C] 交换次数"
layout: "post"
diff: 普及/提高-
pid: P8672
tag: ['贪心', '2018', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2018 国 C] 交换次数
## 题目描述

IT 产业人才需求节节攀升。业内巨头百度、阿里巴巴、腾讯（简称 BAT）在某海滩进行招聘活动。

招聘部门一字排开。由于是自由抢占席位，三大公司的席位随机交错在一起，形如：

`ABABTATT`，这使得应聘者十分别扭。

于是，管理部门要求招聘方进行必要的交换位置，使得每个集团的席位都挨在一起。即最后形如：

`BBAAATTT` 这样的形状，当然，也可能是：

`AAABBTTT` 等。

现在，假设每次只能交换 $2$ 个席位，并且知道现在的席位分布，

你的任务是计算：要使每个集团的招聘席位都挨在一起需要至少进行多少次交换动作。
## 输入格式

输入是一行 $n$ 个字符（只含有字母 `B`、`A` 或 `T`），表示现在的席位分布。
## 输出格式

输出是一个整数，表示至少交换次数。
## 样例

### 样例输入 #1
```
TABTABBTTTT
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
TTAAABB
```
### 样例输出 #2
```
0
```
## 提示

输入字符串的长度 $n$ 不大于 $10^5$。

时限 1 秒, 256M。蓝桥杯 2018 年第九届国赛


---

---
title: "[蓝桥杯 2019 国 AC] 轨道炮"
layout: "post"
diff: 普及/提高-
pid: P8695
tag: ['2019', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2019 国 AC] 轨道炮
## 题目描述

小明在玩一款战争游戏。地图上一共有 $N$ 个敌方单位，可以看作 2D 平面上的点。其中第 $i$ 个单位在 $0$ 时刻的位置是 $(X_i, Y_i)$，方向是 $D_i$ (上下左右之一, 用 `U`/`D`/`L`/`R` 表示)，速度是 $V_i$。小明的武器是轨道炮，只能使用一次，不过杀伤力巨大。小明可以选择在某个非负整数时刻释放轨道炮，轨道炮一次可以消灭在一条直线 (平行于坐标轴) 上的所有敌方单位。请你计算小明最多能消灭多少敌方单位。
## 输入格式

输入第一行包含一个整数 $N$。
以下 $N$ 行每行包含 $3$ 个整数 $X_i$, $Y_i$, $V_i$，以及一个大写字符 $D_i$。
## 输出格式

输出一个整数代表答案。
## 样例

### 样例输入 #1
```
4
0 0 1 R
0 10 1 R
10 10 2 D
2 3 2 L

```
### 样例输出 #1
```
3
```
## 提示

对于所有评测用例，$1 \le N \le 1000$，$-10^6 \le X_i, Y_i \le 10^6$，$0 \le V_i \le 10^6$。

蓝桥杯 2019 年国赛 A 组 H 题（C 组 J 题）


---

---
title: "[蓝桥杯 2020 省 A1] 整数小拼接"
layout: "post"
diff: 普及/提高-
pid: P8708
tag: ['2020', '枚举', '双指针 two-pointer', '蓝桥杯省赛']
---
# [蓝桥杯 2020 省 A1] 整数小拼接
## 题目描述

给定一个长度为 $n$ 的数组 $A_1,A_2,\cdots,A_n$。你可以从中选出两个数 $A_i$ 和 $A_j$($i\neq j$)，然后将 $A_i$ 和 $A_j$ 一前一后拼成一个新的整数。例如 `12` 和 `345` 可以拼成 `12345` 或 `34512`。注意交换 $A_i$ 和 $A_j$ 的顺序总是被视为 $2$ 种拼法，即便是 $A_i=A_j$ 时。

请你计算有多少种拼法满足拼出的整数小于等于 $K$。

## 输入格式

第一行包含 $2$ 个整数 $n$ 和 $K$。

第二行包含 $n$ 个整数 $A_1,A_2,\cdots,A_n$。
## 输出格式

一个整数代表答案。
## 样例

### 样例输入 #1
```
4 33
1 2 3 4
```
### 样例输出 #1
```
8
```
## 提示

对于 $30\%$ 的评测用例 $1\le n\le1000$，$1\le k\le10^8$，$1\le A_i\le10^4$。

对于所有评测用例，$1\le n\le10^5$，$1\le k\le10^{10}$，$1\le A_i\le10^9$。

蓝桥杯 2020 第一轮省赛 A 组 H 题。


---

---
title: "[蓝桥杯 2020 省 B1] 整数拼接"
layout: "post"
diff: 普及/提高-
pid: P8712
tag: ['2020', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2020 省 B1] 整数拼接
## 题目描述

给定一个长度为 $n$ 的数组 $A_1,A_2,\cdots,A_n$。你可以从中选出两个数 $A_i$ 和 $A_j$（$i\neq j$），然后将 $A_i$ 和 $A_j$ 一前一后拼成一个新的整数。例如 `12` 和 `345` 可以拼成 `12345` 或 `34512`。注意交换 $A_i$ 和 $A_j$ 的顺序总是被视为 $2$ 种拼法，即便是 $A_i=A_j$ 时。

请你计算有多少种拼法满足拼出的整数是 $K$ 的倍数。

## 输入格式

第一行包含 $2$ 个整数 $n$ 和 $K$。

第二行包含 $n$ 个整数 $A_1,A_2,\cdots,A_n$。
## 输出格式

一个整数代表答案。
## 样例

### 样例输入 #1
```
4 2
1 2 3 4
```
### 样例输出 #1
```
6
```
## 提示

对于所有评测用例，$1\le n\le10^5$，$1\le k\le10^5$，$1\le A_i\le10^9$。

蓝桥杯 2020 第一轮省赛 B 组 I 题。


---

---
title: "[蓝桥杯 2020 省 AB2] 子串分值"
layout: "post"
diff: 普及/提高-
pid: P8715
tag: ['2020', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2020 省 AB2] 子串分值
## 题目描述

对于一个字符串 $S$, 我们定义 $S$ 的分值 $f(S)$ 为 $S$ 中恰好出现一次的字符个数。例如 $f\left({ }^{\prime \prime} \mathrm{aba}{ }^{\prime \prime}\right)=1$，$f\left({ }^{\prime \prime} \mathrm{abc}{ }^{\prime \prime}\right)=3$，$f\left({ }^{\prime \prime} \mathrm{aaa} \mathrm{a}^{\prime \prime}\right)=0$ 。

现在给定一个字符串 $S[0 . . n-1]$（长度为 $n$），请你计算对于所有 $S$ 的非空 子串 $S[i . . j](0 \leq i \leq j<n)$，$f(S[i . . j])$ 的和是多少。

## 输入格式

输入一行包含一个由小写字母组成的字符串 $S$。
## 输出格式

输出一个整数表示答案。
## 样例

### 样例输入 #1
```
ababc
```
### 样例输出 #1
```
21
```
## 提示

对于 $20 \%$ 的评测用例, $1 \leq n \leq 10$;

对于 $40 \%$ 的评测用例, $1 \leq n \leq 100$;

对于 $50 \%$ 的评测用例, $1 \leq n \leq 1000$;

对于 $60 \%$ 的评测用例, $1 \leq n \leq 10000$;

对于所有评测用例, $1 \leq n \leq 100000$。

蓝桥杯 2020 第二轮省赛 A 组 H 题（B 组 H 题）。


---

---
title: "[蓝桥杯 2020 省 AB2] 回文日期"
layout: "post"
diff: 普及/提高-
pid: P8716
tag: ['2020', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2020 省 AB2] 回文日期
## 题目描述

2020 年春节期间，有一个特殊的日期引起了大家的注意：2020 年 2 月 2 日。因为如果将这个日期按 `yyyymmdd` 的格式写成一个 $8$ 位数是 `20200202`，恰好是一个回文数。我们称这样的日期是回文日期。

有人表示 `20200202` 是“千年一遇” 的特殊日子。对此小明很不认同，因为不到 2 年之后就是下一个回文日期：`20211202` 即 2021 年 12 月 2 日。

也有人表示 `20200202` 并不仅仅是一个回文日期，还是一个 `ABABBABA` 型的回文日期。对此小明也不认同，因为大约 $100$ 年后就能遇到下一个 `ABABBABA` 型的回文日期：`21211212` 即 2121 年12 月12 日。算不上“千年一遇”，顶多算“千年两遇”。

给定一个 8 位数的日期，请你计算该日期之后下一个回文日期和下一个 `ABABBABA` 型的回文日期各是哪一天。

## 输入格式

输入包含一个八位整数 $N$，表示日期。
## 输出格式

输出两行，每行 $1$ 个八位数。第一行表示下一个回文日期，第二行表示下
一个 `ABABBABA` 型的回文日期。

## 样例

### 样例输入 #1
```
20200202
```
### 样例输出 #1
```
20211202
21211212

```
## 提示

对于所有评测用例，$10000101 \le N \le 92200229$，保证 $N$ 是一个合法日期的 $8$ 位数表示。

蓝桥杯 2020 第二轮省赛 A 组 G 题（B 组 G 题）。


---

---
title: "[蓝桥杯 2021 省 B] 杨辉三角形"
layout: "post"
diff: 普及/提高-
pid: P8749
tag: ['二分', '2021', '枚举', '蓝桥杯省赛']
---
# [蓝桥杯 2021 省 B] 杨辉三角形
## 题目描述

下面的图形是著名的杨辉三角形:

![](https://cdn.mathpix.com/cropped/2022_09_29_08f7179868ee6cb62df7g-11.jpg?height=350&width=704&top_left_y=944&top_left_x=676)

如果我们按从上到下、从左到右的顺序把所有数排成一列，可以得到如下数列：

$1,1,1,1,2,1,1,3,3,1,1,4,6,4,1, \ldots$

给定一个正整数 $N$，请你输出数列中第一次出现 $N$ 是在第几个数。
## 输入格式

输入一个整数 $N$ 。
## 输出格式

输出一个整数代表答案。
## 样例

### 样例输入 #1
```
6
```
### 样例输出 #1
```
13
```
## 提示

对于 $20 \%$ 的评测用例, $1 \leq N \leq 10$;

对于所有评测用例, $1 \leq N \leq 10^9$ 。 

蓝桥杯 2021 第一轮省赛 B 组 H 题。


---

---
title: "[蓝桥杯 2021 国 ABC] 123"
layout: "post"
diff: 普及/提高-
pid: P8762
tag: ['2021', '枚举', '组合数学', '蓝桥杯国赛']
---
# [蓝桥杯 2021 国 ABC] 123
## 题目描述

小蓝发现了一个有趣的数列, 这个数列的前几项如下:

$1,1,2,1,2,3,1,2,3,4, \ldots$

小蓝发现, 这个数列前 $1$ 项是整数 $1$ , 接下来 $2$ 项是整数 $1$ 至 $2$ , 接下来 $3$ 项是整数 $1$ 至 $3$ , 接下来 $4$ 项是整数 $1$ 至 $4$ , 依次类推。

小蓝想知道, 这个数列中, 连续一段的和是多少。
## 输入格式

输入的第一行包含一个整数 $T$, 表示询问的个数。

接下来 $T$ 行, 每行包含一组询问, 其中第 $i$ 行包含两个整数 $l_{i}$ 和 $r_{i}$, 表示 询问数列中第 $l_{i}$ 个数到第 $r_{i}$ 个数的和。
## 输出格式

输出 $T$ 行, 每行包含一个整数表示对应询问的答案。
## 样例

### 样例输入 #1
```
3
1 1
1 3
5 8
```
### 样例输出 #1
```
1
4
8
```
## 提示

对于 $10 \%$ 的评测用例, $1 \leq T \leq 30,1 \leq l_{i} \leq r_{i} \leq 100$ 。

对于 $20 \%$ 的评测用例, $1 \leq T \leq 100,1 \leq l_{i} \leq r_{i} \leq 1000$ 。

对于 $40 \%$ 的评测用例, $1 \leq T \leq 1000,1 \leq l_{i} \leq r_{i} \leq 10^{6}$ 。

对于 $70 \%$ 的评测用例, $1 \leq T \leq 10000,1 \leq l_{i} \leq r_{i} \leq 10^{9}$ 。

对于 $80 \%$ 的评测用例, $1 \leq T \leq 1000,1 \leq l_{i} \leq r_{i} \leq 10^{12}$ 。

对于 $90 \%$ 的评测用例, $1 \leq T \leq 10000,1 \leq l_{i} \leq r_{i} \leq 10^{12}$ 。

对于所有评测用例, $1 \leq T \leq 100000,1 \leq l_{i} \leq r_{i} \leq 10^{12}$ 。 

蓝桥杯 2021 国赛 A 组 E 题（B 组 F 题，C 组 F 题）。


---

---
title: "[蓝桥杯 2022 省 B] 统计子矩阵"
layout: "post"
diff: 普及/提高-
pid: P8783
tag: ['2022', '枚举', '双指针 two-pointer', '蓝桥杯省赛']
---
# [蓝桥杯 2022 省 B] 统计子矩阵
## 题目描述

给定一个 $N \times M$ 的矩阵 $A$，请你统计有多少个子矩阵 (最小 $1 \times 1$, 最大 $N \times M)$ 满足子矩阵中所有数的和不超过给定的整数 $K$。

## 输入格式

第一行包含三个整数 $N, M$ 和 $K$。

之后 $N$ 行每行包含 $M$ 个整数, 代表矩阵 $A$。
## 输出格式

一个整数代表答案。
## 样例

### 样例输入 #1
```
3 4 10
1 2 3 4
5 6 7 8
9 10 11 12
```
### 样例输出 #1
```
19
```
## 提示

**【样例说明】**

满足条件的子矩阵一共有 $19$，包含:

大小为 $1 \times 1$ 的有 $10$ 个。

大小为 $1 \times 2$ 的有 $3$ 个。 大小为 $1 \times 3$ 的有 $2$ 个。

大小为 $1 \times 4$ 的有 $1$ 个。

大小为 $2 \times 1$ 的有 $3$ 个。

**【评测用例规模与约定】**

对于 $30 \%$ 的数据, $N, M \leq 20$.

对于 $70 \%$ 的数据, $N, M \leq 100$.

对于 $100 \%$ 的数据, $1 \leq N, M \leq 500,0 \leq A_{i j} \leq 1000,1 \leq K \leq 2.5\times10^8$. 

蓝桥杯 2022 省赛 B 组 F 题。


---

---
title: "[蓝桥杯 2022 国 C] 取模"
layout: "post"
diff: 普及/提高-
pid: P8807
tag: ['2022', '数论', '枚举', '鸽笼原理', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 C] 取模
## 题目描述

给定 $n, m$，问是否存在两个不同的数 $x,y$ 使得 $1 \le x < y \le m$ 且 $n \bmod x = n \bmod ⁡y$。
## 输入格式

输入包含多组独立的询问。

第一行包含一个整数 $T$ 表示询问的组数。

接下来 $T$ 行每行包含两个整数 $n,m$，用一个空格分隔，表示一组询问。
## 输出格式

  输出 $T$ 行，每行依次对应一组询问的结果。如果存在，输出单词 `Yes`；如果不存在，输出单词 `No`。
## 样例

### 样例输入 #1
```
3
1 2
5 2
999 99
```
### 样例输出 #1
```
No
No
Yes
```
## 提示

对于 $20\%$ 的评测用例，$T \le 100$，$n, m \le 1000$；

对于 $50\%$ 的评测用例，$T \le 10000$，$n, m \le 10^5$；

对于所有评测用例，$1\le T \le 10^5$，$1\le n\le 10^9$，$2\le m \le 10^9$。

蓝桥杯 2022 国赛 C 组 C 题。


---

---
title: "[蓝桥杯 2022 国 C] 斐波那契数组"
layout: "post"
diff: 普及/提高-
pid: P8808
tag: ['2022', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 C] 斐波那契数组
## 题目描述

如果数组 $A = (a_0,a_1,\cdots,a_{n − 1})$ 满足以下条件，就说它是一个斐波那契数组：

1. $n>2$。
2. $a_0=a_1$。
3. 对于所有的 $i\ge2$ 都有 $a_i=a_{i-1}+a_{i-2}$。

现在，给出一个数组 $A$，你可以执行任意次修改，每次修改将数组中的某个位置的元素修改为一个大于 $0$ 的整数。请问最少修改几个元素之后，数组 $A$ 会变成一个斐波那契数组。
## 输入格式

输入的第一行包含一个整数 $n$，表示数组 $A$ 中的元素个数。

第二行包含 $n$ 个整数 $a_0,a_1,\cdots,a_{n−1}$，相邻两个整数之间用一个空格分隔。
## 输出格式

  输出一行包含一个整数表示最少需要修改数组 $A$ 中的几个元素之后，数组 $A$ 可以变为一个斐波那契数组。
## 样例

### 样例输入 #1
```
5
1 2 2 4 8
```
### 样例输出 #1
```
3
```
## 提示

**【样例说明】**

将原数组修改为 $(1,1,2,3,5)$，最少修改三个元素变成了一个斐波那契数组。

**【评测用例规模与约定】**

对于所有评测用例， $3 ≤ n ≤ 10^5$，$1 ≤ a_i ≤ 10^6$。

蓝桥杯 2022 国赛 C 组 E 题。


---

---
title: "[蓝桥杯 2022 国 C] 近似 GCD"
layout: "post"
diff: 普及/提高-
pid: P8809
tag: ['2022', '枚举', '蓝桥杯国赛']
---
# [蓝桥杯 2022 国 C] 近似 GCD
## 题目描述

 小蓝有一个长度为 $n$ 的数组 $A = (a_1,a_2,\cdots,a_n)$，数组的子数组被定义为从原数组中选出连续的一个或多个元素组成的数组。数组的最大公约数指的是数组中所有元素的最大公约数。如果最多更改数组中的一个元素之后，数组的最大公约数为 $g$，那么称 $g$ 为这个数组的近似 GCD。一个数组的近似 GCD 可能有多种取值。

具体的，判断 $g$ 是否为一个子数组的近似 GCD 如下：

1. 如果这个子数组的最大公约数就是 $g$，那么说明 $g$ 是其近似 GCD。
2. 在修改这个子数组中的一个元素之后（可以改成想要的任何值），子数组的最大公约数为 $g$，那么说明 $g$ 是这个子数组的近似 GCD。

小蓝想知道，数组 $A$ 有多少个长度大于等于 $2$ 的子数组满足近似 GCD 的值为 $g$。
## 输入格式

输入的第一行包含两个整数 $n,g$，用一个空格分隔，分别表示数组 $A$ 的长度和 $g$ 的值。

第二行包含 $n$ 个整数 $a_1,a_2,\cdots,a_n$，相邻两个整数之间用一个空格分隔。
## 输出格式

  输出一行包含一个整数表示数组 $A$ 有多少个长度大于等于 $2$ 的子数组的近似 GCD 的值为 $g$。
## 样例

### 样例输入 #1
```
5 3
1 3 6 4 10
```
### 样例输出 #1
```
5
```
## 提示

**【样例说明】**

满足条件的子数组有 $5$ 个 ：

$[1,3]$：将 $1$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。
   
$[1,3,6]$：将 $1$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。

$[3,6]$：这个子数组的最大公约数就是 $3$，满足条件。

$[3,6,4]$：将 $4$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。

$[6,4]$：将 $4$ 修改为 $3$ 后，这个子数组的最大公约数为 $3$，满足条件。

【评测用例规模与约定】

对于 $20\%$ 的评测用例，$2\le n\le100$；
  
对于 $40\%$ 的评测用例，$2\le n\le1000$；

对于所有评测用例，$2\le n\le10^5$，$1\le g,a_i \le10^9$。

蓝桥杯 2022 国赛 C 组 F 题。


---

---
title: "[传智杯 #3 决赛] 面试"
layout: "post"
diff: 普及/提高-
pid: P8838
tag: ['枚举', '深度优先搜索 DFS', '传智杯']
---
# [传智杯 #3 决赛] 面试
## 题目背景

disangan233 和 disangan333 去面试了，面试官给了一个问题，热心的你能帮帮他们吗？
## 题目描述

现在有 $n$ 个服务器，服务器 $i$ 最多能处理 $a_i$ 大小的数据。

接下来会有 $k$ 条指令 $b_k$，指令 $i$ 表示发送 $b_i$ 的数据，需要你分配一个空闲的服务器。

请你算出一个序列 $p_k$ 表示指令 $i$ 的数据分配给服务器 $p_i$，且 $p_k$ 的字典序最小；如果无法分配，输出 "-1"。

对于所有数据，$n,k\leq 6$，$a_i,b_i \leq 10$。 
## 输入格式

输入共 $3$ 行。

第 $1$ 行输入 $2$ 个正整数 $n,k$。

第 $2$ 行输入 $n$ 个正整数 $a_i$，表示服务器 $i$ 最多能处理的数据大小。

第 $3$ 行输入 $k$ 个正整数 $b_i$，表示指令 $i$。
## 输出格式

输出共 $1$ 行 $k$ 个正整数 $p_1\ldots p_k$，或者输出 "-1"。
## 样例

### 样例输入 #1
```
6 6
1 9 1 9 8 1
1 1 4 5 1 4
```
### 样例输出 #1
```
1 3 2 4 6 5
```
## 提示

### 样例解释

第 1 条指令分给服务器 1；  
第 2 条指令分给服务器 3；  
第 3 条指令分给服务器 2；  
第 4 条指令分给服务器 4；  
第 5 条指令分给服务器 6；  
第 6 条指令分给服务器 5。


---

---
title: "[CCC 2023 S2] Symmetric Mountains"
layout: "post"
diff: 普及/提高-
pid: P9325
tag: ['模拟', '2023', '枚举', 'CCC（加拿大）', '区间 DP', '双指针 two-pointer']
---
# [CCC 2023 S2] Symmetric Mountains
## 题目描述

Rebecca is a tour guide and is trying to market the Rocky Mountains for her magazine. She recently took a beautiful picture consisting of $N$ mountains where the $i\text{-th}$ mountain from the left has a height $h_i$. She will crop this picture for her magazine, by possibly removing some mountains from the left side of the picture and possibly removing some mountains from the right side of the picture. That is, a crop consists of consecutive mountains starting from the $l\text{-th}$ to the $r\text{-th}$ mountain where $l \leq r$. To please her magazine readers, Rebecca will try to find the most symmetric crop.

We will measure the $asymmetric\ value$ of a crop as the sum of the absolute difference for every pair of mountains equidistant from the midpoint of the crop. To help understand that definition, note that the absolute value of $a$ number $v$, written as $|v|$, is the non-negative value of v: for example $\lvert -6 \rvert = 6$ and $|14| = 14$. The asymmetric value of a crop is the sum of all $|h_{l+i} - h_{r-i}|$ for $0 \leq i \leq \frac{r-l}{2}$. To put that formula in a different way, we pair up the mountains working from the outside in toward the centre, calculate the absolute difference in height of each of these pairs, and sum them up.

Because Rebecca does not know how wide the picture needs to be, for all possible crop lengths, find the asymmetric value of the most symmetric crop (the crop with the minimum asymmetric value).
## 输入格式

The first line consists of an integer $N$, representing the number of mountains in the picture.

The second line consists of $N$ space-separated integers, where the $i\text{-th}$ integer from the left represents $h_i$.

The following table shows how the available 15 marks are distributed:

| Marks | Bounds on $N$ | Bounds on $h_i$ | Additional Constraints |
| :-----------: | :-----------: | :-----------: | :-----------: |
| $5$ | $1 \leq N \leq 300$ | $0 \leq h_i \leq 10^5$ | None. |
| $5$ | $1 \leq N \leq 5000$ | $0 \leq h_i \leq 10^5$ | Height of mountains are in non-decreasing order from left to right. |
| $5$ | $1 \leq N \leq 5000$ | $0 \leq h_i \leq 10^5$ | None. |

## 输出格式

Output on one line $N$ space-separated integers, where the $i\text{-th}$ integer from the left is the asymmetric value of the most symmetric picture of crops of length $i$.
## 样例

### 样例输入 #1
```
7
3 1 4 1 5 9 2
```
### 样例输出 #1
```
0 2 0 5 2 10 10
```
### 样例输入 #2
```
4
1 3 5 6
```
### 样例输出 #2
```
0 1 3 7
```
## 提示

Explanation of Output for Sample Input $1$:

We will show why the fifth value from the left is $2$.Let us try to compute all the asymmetric values of crops with length $5$.

The height of the mountains in the first crop is $[3, 1, 4, 1, 5]$. The asymmetric value of this crop is $|3 - 5| + |1 - 1| + |4 - 4| = 2$.

The height of the mountains in the second crop is $[1, 4, 1, 5, 9]$. The asymmetric value of this crop is $|1 - 9| + |4 - 5| + |1 - 1| = 9$.

The height of the mountains in the last crop is $[4, 1, 5, 9, 2]$. The asymmetric value of this crop is $|4 - 2| + |1 - 9| + |5 - 5| = 10$.

Hence, the most symmetric crop of length $5$ is $2$.

Explanation of Output for Sample Input $2$:

This sample satisfies the second subtask. Note that the only crop of length $4$ is $[1, 3, 5, 6]$ which has asymmetric value of $|1 - 6| + |3 - 5| = 7$.

**本题采用捆绑测试**：

- Subtask 1（5 points）：$1\leq N \leq 300$，$0\leq h_i \leq 10^5$。

- Subtask 2（5 points）：$1 \leq N \leq 5000$，$0 \leq h_i \leq 10^5$，保证山的高度从左到右单调不减。

- Subtask 3（5 points）：$1\leq N\leq 5000$，$0 \leq h_i \leq 10^5$。
## 题目翻译

Rebecca 有一张落基山脉的照片，上面排列着 $N(1\leq N \leq 5000)$ 座山，从左向右的第 $i$ 座山的高度是 $h_i(1\leq h_i \leq 10^5)$。Rebecca 截图保留照片的一个连续段，这张截图的不对称性定义为：处于截图上对称位置的山的高度差的绝对值之和（截图最左和最右的山的高度差，左数第二和右数第二的山的高度差，诸如此类的和）。

Rebecca 想要知道对于长度为 $i$ 的截图，拥有的最小不对称性。请你对于 $1\leq i \leq N$，输出这个值。


---

---
title: "[GDCPC 2023] Peg Solitaire"
layout: "post"
diff: 普及/提高-
pid: P9700
tag: ['搜索', '2023', '广东', 'O2优化', '枚举', 'XCPC']
---
# [GDCPC 2023] Peg Solitaire
## 题目描述

$\textit{Peg Solitaire}$ is a single-player boardgame on a chessboard with $n$ rows and $m$ columns. Each cell of the chessboard either is empty, or contains a chesspiece. Initially, there are $k$ chesspieces on the chessboard.

During the game, the player can choose a chesspiece, jump it over an adjacent chesspiece into an empty cell, and finally remove the chesspiece which is jumped over. More precisely, let $(i, j)$ be the cell on the $i$-th row and the $j$-th column, the player can perform operations of the following four types.

![](https://cdn.luogu.com.cn/upload/image_hosting/ugauif68.png)

Given the initial state of the chessboard, the player can perform the operations any number of times (including zero times). Calculate the minimum possible number of chesspieces remaining on the chessboard.
## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$ ($1 \le T \le 20$) indicating the number of test cases. For each test case:

The first line contains three integers $n$, $m$ and $k$ ($1 \le n, m \le 6$, $1 \le k \le \min(6, n \times m)$) indicating the number of rows and columns of the chessboard and the initial number of chesspieces.

For the following $k$ lines, the $i$-th line contains two integers $x_i$ and $y_i$ ($1 \le x_i \le n$, $1 \le y_i \le m$) indicating that there is a chesspiece in the cell on the $x_i$-th row and the $y_i$-th column at the beginning. Except from these $k$ cells, all other cells are empty at the beginning. The positions of these $k$ cells contain no duplicate.
## 输出格式

For each test case output one line containing one integer indicating the minimum possible number of chesspieces remaining on the chessboard.

## 样例

### 样例输入 #1
```
3
3 4 5
2 2
1 2
1 4
3 4
1 1
1 3 3
1 1
1 2
1 3
2 1 1
2 1
```
### 样例输出 #1
```
2
3
1
```
## 提示

The first sample test case is explained as follows.

![](https://cdn.luogu.com.cn/upload/image_hosting/aragowha.png)

For the second sample test case, as the chessboard does not contain empty cell at the beginning, the player cannot perform any operation.

For the third sample test case, as the chessboard has less than three cells, the player cannot perform any operation.

## 题目翻译

**【题目描述】**

``独立钻石``是一种单人桌游。游戏在 $n$ 行 $m$ 列的棋盘上进行，棋盘上的每一格要么是空格，要么有一枚棋子。一开始，棋盘上共有 $k$ 枚棋子。

在游戏中，玩家可以选择一枚棋子，将它跳过相邻棋子到空格上，并移除被跳过的棋子。具体来说，令 $(i, j)$ 表示位于第 $i$ 行第 $j$ 列的格子，玩家可以执行以下四种操作。

![](https://cdn.luogu.com.cn/upload/image_hosting/pgosoztu.png)

给定一个初始的棋盘，求经过任意次操作（包括零次）之后，棋盘上最少能剩余几枚棋子。

**【输入格式】**

有多组测试数据。第一行输入一个整数 $T$（$1 \le T \le 20$）表示测试数据组数。对于每组测试数据：

第一行输入三个整数 $n$，$m$ 和 $k$（$1 \le n, m \le 6$，$1 \le k \le \min(6, n \times m)$）表示棋盘的行数，列数和初始棋子的数量。

对于接下来 $k$ 行，第 $i$ 行输入两个整数 $x_i$ 和 $y_i$（$1 \le x_i \le n$，$1 \le y_i \le m$）表示一开始第 $x_i$ 行第 $y_i$ 列的格子里有一枚棋子。除了这 $k$ 个格子之外，其它格子一开始都是空格。这 $k$ 个格子的位置不会重复。

**【输出格式】**

每组数据输出一行一个整数，表示经过任意次操作（包括零次）之后，棋盘上最少能剩余几枚棋子。

**【样例解释】**

第一组样例数据解释如下。

![](https://cdn.luogu.com.cn/upload/image_hosting/aragowha.png)

对于第二组样例数据，由于初始棋盘不存在空格，因此无法进行任何操作。

对于第三组样例数据，由于棋盘不足三格，因此无法进行任何操作。


---

---
title: "[USACO20OPEN] Cowntact Tracing B"
layout: "post"
diff: 普及/提高-
pid: P9954
tag: ['模拟', '2020', 'USACO', 'O2优化', '枚举', '排序']
---
# [USACO20OPEN] Cowntact Tracing B
## 题目描述

由于高传染性的牛传染病 COWVID-19 的爆发，Farmer John 非常担忧他的奶牛们（编号为 $1\ldots N$）的健康。

最近，Farmer John 对他的所有奶牛进行了检测，发现有一部分奶牛对该疾病的检测结果呈阳性。利用牛棚内的视频监控，他得以查看最近的奶牛之间的互动行为，结果发现奶牛们互相打招呼时，她们会握蹄，不幸的是这是一种会将疾病从一头奶牛传播给另一头奶牛的行为。Farmer John 汇总了一个添加了时间戳的清单，每条数据的形式为 $(t,x,y)$，表示在时间 $t$，奶牛 $x$ 与奶牛 $y$ 握了蹄。Farmer John 同时还知道以下信息：

（一）他的农场上恰有一头奶牛最初带有携带疾病（我们将这头奶牛称为“零号病人”）。

（二）一旦一头奶牛被感染，她会在接下来的 $K$ 次握蹄中传染疾病（可能会与同一头奶牛握蹄多次）。握蹄 $K$ 次后，她不再在此后的握蹄中传染疾病（因为此时她意识到了她会传染疾病，于是会仔细地洗蹄）。

（三）一旦一头奶牛被感染，她会持续处于被感染状态。

不幸的是，Farmer John 不知道他的 $N$ 头奶牛中的哪一头是零号病人，也不知道 $K$ 的值！基于他的数据，请帮助他缩小这些未知量的范围。保证至少有一种可能的情况。 
## 输入格式

输入的第一行包含 $N$（$2\le N\le 100$）和 $T$（$1\le T\le 250$）。下一行包含一个长为 $N$ 的字符串，每个字符均为 $0$ 或 $1$，表述目前 Farmer John 的 $N$ 头奶牛的状态——$0$ 表示一头健康的奶牛，$1$ 表示一头染病的奶牛。以下 $T$ 行每行包含 Farmer John 的互动清单中的一条记录，由三个整数 $t$、$x$ 和 $y$ 组成，其中 $t$ 为一次互动发生的正整数时间（$t\le 250$），$x$ 和 $y$ 为范围 $1\ldots N$ 内的不同整数，表示时间 $t$ 握蹄的两头奶牛。在每一时刻至多只有一次互动发生。 
## 输出格式

输出一行，包含三个整数 $x$、$y$ 和 $z$，其中 $x$ 为可能为零号病人的奶牛数量，$y$ 为与数据一致的最小可能 $K$ 值，$z$ 为与数据一致的最大可能 $K$ 值（如果通过数据无法推断 $K$ 的上界，$z$ 输出 `Infinity`）。注意可能有 $K=0$。 
## 样例

### 样例输入 #1
```
4 3
1100
7 1 2
5 2 3
6 2 4
```
### 样例输出 #1
```
1 1 Infinity
```
## 提示

### 样例解释 1

唯一可能是零号病人的是奶牛 $1$。对于所有的 $K>0$，奶牛 $1$ 在时刻 $7$ 感染奶牛 $2$，而奶牛 $3$ 和奶牛 $4$ 均不会被感染。 


---

---
title: "[USACO20DEC] Stuck in a Rut B"
layout: "post"
diff: 普及/提高-
pid: P9957
tag: ['2020', 'USACO', 'O2优化', '枚举', '排序']
---
# [USACO20DEC] Stuck in a Rut B
## 题目描述

Farmer John 最近扩大了他的农场，从奶牛们的角度看来这个农场相当于是无限大了！奶牛们将农场上放牧的区域想作是一个由正方形方格组成的无限大二维方阵，每个方格中均有美味的草（将每个方格看作是棋盘上的一个方格）。Farmer John 的 $N$ 头奶牛（$1\le N\le 50$）初始时位于不同的方格中，一部分朝向北面，一部分朝向东面。

每一小时，每头奶牛会执行以下二者之一：

 - 如果她当前所在的方格里的草已经被其他奶牛吃掉了，则她会停下。
 - 吃完她当前所在的方格中的所有草，并向她朝向的方向移动一个方格。

经过一段时间，每头奶牛的身后会留下一条被啃秃了的轨迹。

如果两头奶牛在一次移动中移动到了同一个有草的方格，她们会分享这个方格中的草，并在下一个小时继续沿她们朝向的方向移动。

请求出每头奶牛吃到的草的数量。有些奶牛永远不会停下，从而吃到无限多的草。 
## 输入格式

输入的第一行包含 $N$。以下 $N$ 行，每行描述一头奶牛的起始位置，包含一个字符 `N`（表示朝向北面） 或 `E`（表示朝向东面），以及两个非负整数 $x$ 和 $y$（$0\le x\le 10^9$，$0\le y\le 10^9$）表示方格的坐标。所有 $x$ 坐标各不相同，所有 $y$ 坐标各不相同。

为了使方向和坐标尽可能明确，如果一头奶牛位于方格 $(x,y)$ 并向北移动，她会到达方格 $(x,y+1)$。如果她向东移动，她会到达方格 $(x+1,y)$。
## 输出格式

输出 $N$ 行。输出的第 $i$ 行包含输入中的第 $i$ 头奶牛吃到草的方格的数量。如果一头奶牛可以吃到无限多的草，为这头奶牛输出 `Infinity`。
## 样例

### 样例输入 #1
```
6
E 3 5
N 5 3
E 4 6
E 10 4
N 11 2
N 8 1
```
### 样例输出 #1
```
5
3
Infinity
Infinity
2
5
```
## 提示

### 测试点性质

 - 测试点 $2-5$ 中，所有坐标不超过 $100$。
 - 测试点 $6-10$ 没有额外限制。


---

---
title: "[USACO23DEC] Cycle Correspondence S"
layout: "post"
diff: 普及/提高-
pid: P9978
tag: ['USACO', '2023', 'O2优化', '枚举', '分类讨论']
---
# [USACO23DEC] Cycle Correspondence S
## 题目描述

Farmer John 有 $N$（$3 \le N \le 5\cdot 10^5$）座谷仓，其中 $K$ 对不同的谷仓连接在一起。

一开始，Annabelle 为每座谷仓分配了一个 $[1,N]$ 范围内的整数编号，并发现编号为 $a_1,\dots,a_K$ 的谷仓按照顺序形成了一个环形连接。换句话说，对于所有的 $1 \le i < K$，谷仓 $a_i$ 和 $a_{i+1}$ 相连，谷仓 $a_K$ 与 $a_1$ 亦相连。所有的 $a_i$ 不相同。

然后，Bessie 也为每个谷仓分配了一个 $[1,N]$ 范围内的整数编号，并发现编号为 $b_1,\dots,b_K$ 也按照顺序形成了一个环形链接。所有的 $b_i$ 不相同。

一些（可能没有或全部）谷仓被 Annabelle 和 Bessie 分配了相同的编号。计算最多有多少个这样的谷仓。
## 输入格式

第一行包含 $N$ 和 $K$。

接下来一行包含 $a_1,\dots,a_K$。

接下来一行包含 $b_1,\dots,b_K$。
## 输出格式

分配了相同编号谷仓的最大数量。
## 样例

### 样例输入 #1
```
6 3
1 2 3
2 3 1
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
6 3
1 2 3
4 5 6
```
### 样例输出 #2
```
0
```
### 样例输入 #3
```
6 4
1 2 3 4
4 3 2 5
```
### 样例输出 #3
```
4
```
## 提示

### 样例解释 1

Annabelle 和 Bessie 可以为每个谷仓分配相同的编号。

### 样例解释 2

Annabelle 和 Bessie 无法为任何谷仓分配相同的编号。

### 样例解释 3

Annabelle 和 Bessie 可以分配编号 $2,3,4,6$ 给相同的谷仓。

### 测试点性质

- 测试点 $4-5$ 满足 $N \le 8$。
- 测试点 $6-8$ 满足 $N \le 5000$。
- 测试点 $9-15$ 没有额外限制。


---


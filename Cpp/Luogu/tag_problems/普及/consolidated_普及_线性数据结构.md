---
title: "“非常男女”计划"
layout: "post"
diff: 普及/提高-
pid: P1114
tag: ['线性数据结构', '前缀和']
---
# “非常男女”计划
## 题目描述

近来，初一年的 `XXX` 小朋友致力于研究班上同学的配对问题（别想太多，仅是舞伴），通过各种推理和实验，他掌握了大量的实战经验。例如，据他观察，身高相近的人似乎比较合得来。

万圣节来临之际，`XXX` 准备在学校策划一次大型的 “非常男女” 配对活动。对于这次活动的参与者，`XXX` 有自己独特的选择方式。他希望能选择男女人数相等且身高都很接近的一些人。这种选择方式实现起来很简单。他让学校的所有人按照身高排成一排，然后从中选出连续的若干个人，使得这些人中男女人数相等。为了使活动更热闹，`XXX` 当然希望他能选出的人越多越好。请编写程序告诉他，他最多可以选出多少人来。

## 输入格式

第一行有一个正整数 $n\ (1\le n \le 10^5)$，代表学校的人数。

第二行有 $n$ 个用空格隔开的数，这些数只能是 $0$ 或 $1$，其中，$0$ 代表是一个女生，$1$ 代表是一个男生。

## 输出格式

输出一个非负整数。这个数表示在输入数据中最长的一段男女人数相等的子区间的长度。

如果不存在男女人数相等的子区间，请输出 $0$。

## 样例

### 样例输入 #1
```
9
0 1 0 0 0 1 1 0 0

```
### 样例输出 #1
```
6
```


---

---
title: "队列安排"
layout: "post"
diff: 普及/提高-
pid: P1160
tag: ['模拟', '线性数据结构', '构造']
---
# 队列安排
## 题目描述

一个学校里老师要将班上 $N$ 个同学排成一列，同学被编号为 $1\sim N$，他采取如下的方法：

1. 先将 $1$ 号同学安排进队列，这时队列中只有他一个人；

2. $2\sim N$ 号同学依次入列，编号为 $i$ 的同学入列方式为：老师指定编号为 $i$ 的同学站在编号为 $1\sim(i-1)$ 中某位同学（即之前已经入列的同学）的左边或右边；

3. 从队列中去掉 $M$ 个同学，其他同学位置顺序不变。

在所有同学按照上述方法队列排列完毕后，老师想知道从左到右所有同学的编号。
## 输入格式

第一行一个整数 $N$，表示了有 $N$ 个同学。

第 $2\sim N$ 行，第 $i$ 行包含两个整数 $k,p$，其中 $k$ 为小于 $i$ 的正整数，$p$ 为 $0$ 或者 $1$。若 $p$ 为 $0$，则表示将 $i$ 号同学插入到 $k$ 号同学的左边，$p$ 为 $1$ 则表示插入到右边。

第 $N+1$ 行为一个整数 $M$，表示去掉的同学数目。

接下来 $M$ 行，每行一个正整数 $x$，表示将 $x$ 号同学从队列中移去，如果 $x$ 号同学已经不在队列中则忽略这一条指令。

## 输出格式

一行，包含最多 $N$ 个空格隔开的整数，表示了队列从左到右所有同学的编号。

## 样例

### 样例输入 #1
```
4
1 0
2 1
1 0
2
3
3
```
### 样例输出 #1
```
2 4 1
```
## 提示

**【样例解释】**

将同学 $2$ 插入至同学 $1$ 左边，此时队列为：

`2 1`

将同学 $3$ 插入至同学 $2$ 右边，此时队列为：

`2 3 1`  

将同学 $4$ 插入至同学 $1$ 左边，此时队列为：

`2 3 4 1`  

将同学 $3$ 从队列中移出，此时队列为：

`2 4 1`  

同学 $3$ 已经不在队列中，忽略最后一条指令

最终队列：

`2 4 1`  

**【数据范围】**

对于 $20\%$ 的数据，$1\leq N\leq 10$。

对于 $40\%$ 的数据，$1\leq N\leq 1000$。

对于 $100\%$ 的数据，$1<M\leq N\leq 10^5$。



---

---
title: "H数"
layout: "post"
diff: 普及/提高-
pid: P1748
tag: ['模拟', '数学', '线性数据结构', 'USACO']
---
# H数
## 题目描述

所谓 H 数，是指只含有 $2,3,5,7$ 这些质因数的数，如 $630$ 是 H 数，而 $22$ 不是。

现在要求输出第 $n$ 个 H 数，为了方便起见将 $H[1]$ 定为 $1$。已知 $n$ 不超过 $10000$，最后数据在 int64 范围之内。

## 输入格式

一个数 $n$(如题目)

## 输出格式

第 $n$ 个H数

## 样例

### 样例输入 #1
```
30
```
### 样例输出 #1
```
49
```
### 样例输入 #2
```
1
```
### 样例输出 #2
```
1
```
## 提示

穷举会爆掉，要用生成法，最好加优化，不然空间复杂度比较大



---

---
title: "脑力达人之分割字串"
layout: "post"
diff: 普及/提高-
pid: P2031
tag: ['字符串', '动态规划 DP', '线性数据结构']
---
# 脑力达人之分割字串
## 题目背景

好吧，该来的废话还是要来的。

画外音：

终于，在两轮的重重选拔之后，我们的海选终于结束了。现在进入我们的循环赛环节。循坏赛一共有四场，最后选出得分最高的 $16$ 人进入对决，得分相同则和按用时排名，若仍有不能确定 $16$ 人的情况，则去尾处理。

欢迎您收看有洛谷卫视重磅推出的综合性文艺知识类节目“开心玩游戏，轻松赢比赛”，我是 LUWM。学编程，就选洛谷， 感谢洛谷 Online Judge 对本节目的大力支持。下面，我们有请 $10$ 位选手上台，由大屏幕给出题目。

## 题目描述

现在有一个字符串，你可以对这个字符串进行拆分，如 `abcvsdaas` 可以拆分为 `abc|vs|d|aas`，现在再给你一个字典，要求分割成的每一个子串必须要有包含其中的任意一个单词。那么最多可以分为几个子串呢？

## 输入格式

第一行，一行字符串

第二行一个正整数 $N$，表示字典中字符串的数量

接下来 $N$ 行，每行一个字符串 $A_i$，表示字典中的一个字符串。

## 输出格式

一个整数，表示最多的分割数。

## 样例

### 样例输入 #1
```
asdsd

3

as

sd

ds
```
### 样例输出 #1
```
2
```
## 提示

特殊情况：

如果原字符串不能被分割，请输出 $0$。



数据范围：

对于 $20\%$ 的数据，$1\leq |s| \leq 50,1\leq n\leq 50$。

对于 $100\%$ 的数据，$1\leq |A_i| \leq |s|\leq 300，1\leq N\leq 500$。

其中，$|s|,|A_i|$ 表示字符串 $s$ 与 $A_i$ 的长度。


---

---
title: "宗教问题"
layout: "post"
diff: 普及/提高-
pid: P2072
tag: ['动态规划 DP', '线性数据结构']
---
# 宗教问题
## 题目背景

在一个地区有许多种宗教，不同信仰的教徒经常发生矛盾，最为治安管理的人需要把这些人分开，以免矛盾激化。

## 题目描述

已知一个地方有M种宗教(编号为1—M)，有N个教徒(编号为1—N)，每个教徒信且只信一种宗教。现在要按顺序把这N个教徒分成一些集体，每个集体的危险值定义为这个集体中的宗教种数，且一个集体的宗教种类不能超过K种，否则就会无限危险，

问：
1.这N个教徒至少要分为几个集体，

2.这些集体的危险值总和至少为多少。

## 输入格式

第一行三个正整数N  M  K，以空格隔开

第二行N个正整数，为每个教徒信的宗教编号

## 输出格式

第一行 一个正整数，为最少集体数

第二行 一个正整数，为最小危险值。

## 样例

### 样例输入 #1
```
10 4 3

1 2 3 4 3 4 3 2 1 2


```
### 样例输出 #1
```
3

6


```
## 提示

【样例解释】

最少集体数：1  2  3 // 4  3  4  3  2 // 1  2  共3个集体

最小危险值：1  2 // 3  4  3  4  3 // 2  1  2   2+2+2=6


【数据范围】

对于20%的数据  N≤20

对于50%的数据  N≤100

对于100%的数据  N≤1000  M≤20  1≤K＜M



---

---
title: "[USACO14JAN] Bessie Slows Down S"
layout: "post"
diff: 普及/提高-
pid: P2338
tag: ['模拟', '贪心', '2014', '线性数据结构', 'USACO']
---
# [USACO14JAN] Bessie Slows Down S
## 题目背景

奶牛题

## 题目描述

Bessie the cow is competing in a cross-country skiing event at the winter Moolympic games.  She starts out at a speed of 1 meter per second. However, as she becomes more tired over time, she begins to slow down. Each time Bessie slows down, her speed decreases: she moves at 1/2 meter per second after slowing down once, then 1/3 meter per second after slowing down twice, and so on.

You are told when and where Bessie slows down, in terms of a series of events.  An event like this:

T 17
means that Bessie slows down at a specific time -- here, 17 seconds into the race.  An event like this:

D 10
means that Bessie slows down at a specific distance from the start -- in this case, 10 meters.

Given a list of N such events (1 <= N <= 10,000), please compute the amount of time, in seconds, for Bessie to travel an entire kilometer.  Round your answer to the nearest integer second (0.5 rounds up to 1).

贝西正在参加一项滑雪比赛。她从起点出发的时候，速度恒定为每秒 1 米。然而，随着比赛进程的增加，她会犯很多错误，每次失误都会使她的速度下降。当她第一次失误后，速度会下降到每秒1/2 米，第二次失误后，速度会下降到每秒 1/3 米，第 k 次失误后，速度会下降到每秒 1/(k + 1) 米。

约翰记录了贝西的所有失误，一共有 N 个。有两种失误，一种发生在比赛开始后的某个时间点，另一种发生在赛道的某个位置上。有时，贝西可能在某个时间点到达某个位置，而恰好在这个时间点和位置上都有一次失误的记录，这两个记录要算作不同的失误，会对贝西的速度造成两次影响。比赛的终点距离起点有 1000 米，请问贝西需要多少时间才能滑过终点？

## 输入格式

第一行：单个整数 N ，1 ≤ N ≤ 10000

第二行到第 N + 1 行：每行开头有个大写字母，代表贝西的一个失误类型：

– 如果是 T，接下来会有一个整数 S，表示在比赛开始后的第 S 秒钟整发生了一次失误，

1 ≤ S ≤ 10^7

– 如果是 D，接下来会有一个整数 X，表示在距离起点 X 米处发生了一次失误，1 ≤ X ≤

1000
## 输出格式

单个整数：表示贝西需要多少秒才能滑到终点，如果精确的时间不是整数，则用四舍五入的方

法向最接近的整数取整

## 样例

### 样例输入 #1
```
2
T 30
D 10
```
### 样例输出 #1
```
2970
```
## 提示

前 10 秒，贝西的速度是每秒 1 米，她滑了 10 米。然后她遭遇了第一次失误，在接下

来的 20 秒内，她又滑了 10 米。之后她遭遇了第二次失误，还剩下 980 米，所以她共计花去

10 + 20 + 2940 = 2970 秒才完成比赛



---

---
title: "木材加工"
layout: "post"
diff: 普及/提高-
pid: P2440
tag: ['贪心', '线性数据结构', '二分', '递归']
---
# 木材加工
## 题目背景

要保护环境

## 题目描述

木材厂有 $n$ 根原木，现在想把这些木头切割成 $k$ 段长度**均**为 $l$ 的小段木头（木头有可能有剩余）。

当然，我们希望得到的小段木头越长越好，请求出 $l$ 的最大值。

木头长度的单位是 $\text{cm}$，原木的长度都是正整数，我们要求切割得到的小段木头的长度也是正整数。

例如有两根原木长度分别为 $11$ 和 $21$，要求切割成等长的 $6$ 段，很明显能切割出来的小段木头长度最长为 $5$。
## 输入格式


第一行是两个正整数 $n,k$，分别表示原木的数量，需要得到的小段的数量。

接下来 $n$ 行，每行一个正整数 $L_i$，表示一根原木的长度。
## 输出格式

仅一行，即 $l$ 的最大值。

如果连 $\text{1cm}$ 长的小段都切不出来，输出 `0`。
## 样例

### 样例输入 #1
```
3 7
232
124
456
```
### 样例输出 #1
```
114
```
## 提示


#### 数据规模与约定

对于 $100\%$ 的数据，有 $1\le n\le 10^5$，$1\le k\le 10^8$，$1\le L_i\le 10^8(i\in[1,n])$。


---

---
title: "小 Q 的赚钱计划"
layout: "post"
diff: 普及/提高-
pid: P2721
tag: ['动态规划 DP', '递推', '线性数据结构']
---
# 小 Q 的赚钱计划
## 题目背景

小 Q（郑重其事地）：今年我一定要赚大钱！！！

## 题目描述

小 Q 决定在新的一年里赚大钱，小 P 给 TA 推荐了理财。小 Q 在今年初（非闰年）有 $10^5$ 元（好有钱啊），有 $N$ 个理财产品，每个理财产品用三个参数描述：购买时间，投资天数，年利息率。每个时刻小 Q 只能拥有最多一件产品，求一年后最多可以获得多少钱。

## 输入格式

第 $1$ 行，一个整数 $N$。

接下来 $N$ 行，每行为 $3$ 个空格隔开的字符串 $A, B, C$；

- $A$ 表示发行时间，格式为 MMDD；
- $B$ 是一个整数，为投资天数，范围 $[10,300]$；
- $C$ 为最多 $2$ 位小数，代表百分之几的年利息，范围 $[3,30]$；

## 输出格式

一个数，为年底最多可以获得的连本带利的资金数目，保留两位有效小数。

## 样例

### 样例输入 #1
```
3
0101 100 4.5
0201 30 5
0402 50 7.8
```
### 样例输出 #1
```
101483.84
```
## 提示

$0 \le N \le 10^4$


---

---
title: "家谱"
layout: "post"
diff: 普及/提高-
pid: P2814
tag: ['字符串', '搜索', '图论', '线性数据结构', '并查集']
---
# 家谱
## 题目背景

现代的人对于本家族血统越来越感兴趣。

## 题目描述

给出充足的父子关系，请你编写程序找到某个人的最早的祖先。

## 输入格式

输入由多行组成，首先是一系列有关父子关系的描述，其中每一组父子关系中父亲只有一行，儿子可能有若干行，用 `#name` 的形式描写一组父子关系中的父亲的名字，用 `+name` 的形式描写一组父子关系中的儿子的名字；接下来用 `?name` 的形式表示要求该人的最早的祖先；最后用单独的一个 `$` 表示文件结束。
## 输出格式

按照输入文件的要求顺序，求出每一个要找祖先的人的祖先，格式为：本人的名字 $+$ 一个空格 $+$ 祖先的名字 $+$ 回车。
## 样例

### 样例输入 #1
```
#George
+Rodney
#Arthur
+Gareth
+Walter
#Gareth
+Edward
?Edward
?Walter
?Rodney
?Arthur
$
```
### 样例输出 #1
```
Edward Arthur
Walter Arthur
Rodney George
Arthur Arthur
```
## 提示

规定每个人的名字都有且只有 $6$ 个字符，而且首字母大写，且没有任意两个人的名字相同。最多可能有 $10^3$ 组父子关系，总人数最多可能达到 $5 \times 10^4$ 人，家谱中的记载不超过 $30$ 代。


---

---
title: "【模板】单调栈"
layout: "post"
diff: 普及/提高-
pid: P5788
tag: ['线性数据结构', '栈', '单调栈']
---
# 【模板】单调栈
## 题目背景

模板题，无背景。  

2019.12.12 更新数据，放宽时限，现在不再卡常了。
## 题目描述

给出项数为 $n$ 的整数数列 $a_{1 \dots n}$。

定义函数 $f(i)$ 代表数列中第 $i$ 个元素之后第一个大于 $a_i$ 的元素的**下标**，即 $f(i)=\min_{i<j\leq n, a_j > a_i} \{j\}$。若不存在，则 $f(i)=0$。

试求出 $f(1\dots n)$。
## 输入格式

第一行一个正整数 $n$。

第二行 $n$ 个正整数 $a_{1\dots n}$。
## 输出格式

一行 $n$ 个整数表示 $f(1), f(2), \dots, f(n)$ 的值。  
## 样例

### 样例输入 #1
```
5
1 4 2 3 5

```
### 样例输出 #1
```
2 5 4 5 0

```
## 提示

【数据规模与约定】

对于 $30\%$ 的数据，$n\leq 100$；

对于 $60\%$ 的数据，$n\leq 5 \times 10^3$ ；

对于 $100\%$ 的数据，$1 \le n\leq 3\times 10^6$，$1\leq a_i\leq 10^9$。


---


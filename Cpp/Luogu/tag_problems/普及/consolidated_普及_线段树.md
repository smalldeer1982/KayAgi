---
title: "[蓝桥杯青少年组国赛 2022] 金箍棒"
layout: "post"
diff: 普及/提高-
pid: B4298
tag: ['贪心', '线段树', '2022', '排序', '蓝桥杯青少年组']
---
# [蓝桥杯青少年组国赛 2022] 金箍棒
## 题目背景

为区分各种时间复杂度的做法，本题时间限制下调到 500 毫秒。
## 题目描述

淘气的悟空变出了 $N$ 根高度各不相同的金箍棒（$1 \leq $ 高度 $\leq 1000$），并排列成一排。悟空可以对每根金箍棒施法，让金箍棒高度变短或者变长，但每一次施法只能使一根金箍棒变短 $1$ 个高度或者变长 $1$ 个高度。

现在悟空想通过施法将 $K$（$K \leq N$）根相邻的金箍棒高度变为相同，且要求施法的次数最少，请你帮助悟空计算出最少需要施法几次可以使 $K$ 根相邻的金箍棒高度变为相同。

例如：$N=3$，$K=2$，$3$ 根金箍棒初始高度分别为 $3$、$6$、$1$。

- 第一次对高度为 $3$ 的金箍棒施法变长 $1$ 个高度，变为 $4$；
- 第二次对高度为 $6$ 的金箍棒施法变短 $1$ 个高度，变为 $5$；
- 第三次对高度为 $4$ 的金箍棒施法变长 $1$ 个高度，变为 $5$；

$2$ 根相邻的金箍棒高度变为相同，最少施法 $3$ 次。
## 输入格式

第一行输入两个正整数 $N$、$K$（$1 \leq K \leq N \leq 10000$），$N$ 表示金箍棒的根数，$K$ 表示需要将 $K$ 根相邻的金箍棒高度变为相同，两个整数之间以一个空格隔开。

第二行输入 $N$ 个各不相同的正整数（$1 \leq$ 正整数$\leq 1000$），表示 $N$ 根金箍棒的初始高度，$N$ 个整数之间以一个空格隔开。

## 输出格式

输出一个整数，表示悟空最少需要施法几次可以使 $K$ 根相邻的金箍棒高度变为相同。
## 样例

### 样例输入 #1
```
3 2
3 6 1
```
### 样例输出 #1
```
3
```


---

---
title: "[USACO03Open] Lost Cows"
layout: "post"
diff: 普及/提高-
pid: P10497
tag: ['线段树', '树状数组']
---
# [USACO03Open] Lost Cows
## 题目描述

N (2 <= N <= 8,000) cows have unique brands in the range 1..N. In a spectacular display of poor judgment, they visited the neighborhood 'watering hole' and drank a few too many beers before dinner. When it was time to line up for their evening meal, they did not line up in the required ascending numerical order of their brands.Regrettably, FJ does not have a way to sort them. 

Furthermore, he's not very good at observing problems. Instead of writing down each cow's brand, he determined a rather silly statistic: For each cow in line, he knows the number of cows that precede that cow in line that do, in fact, have smaller brands than that cow.Given this data, tell FJ the exact ordering of the cows.
## 输入格式

Line 1: A single integer, N

Lines 2..N: These N-1 lines describe the number of cows that precede a given cow in line and have brands smaller than that cow. Of course, no cows precede the first cow in line, so she is not listed. Line 2 of the input describes the number of preceding cows whose brands are smaller than the cow in slot #2; line 3 describes the number of preceding cows whose brands are smaller than the cow in slot #3; and so on.
## 输出格式

Lines 1..N: Each of the N lines of output tells the brand of a cow in line. Line #1 of the output tells the brand of the first cow in line; line 2 tells the brand of the second cow; and so on.
## 样例

### 样例输入 #1
```
5
1
2
1
0
```
### 样例输出 #1
```
2
4
5
3
1
```
## 题目翻译

### 题目描述

有 $N$ 头奶牛，已知它们的编号为 $1∼N$ 且各不相同，但不知道每头奶牛的具体编号。

现在这 $N$ 头奶牛站成一列，已知第 $i$ 头奶牛前面有 $a_i$ 头牛编号小于它，求每头奶牛的编号。

### 输入格式

第 $1$ 行，输入一个整数 $N$

第 $2...N$ 行，每行输入一个整数 $a_i$，表示第 $i$ 头奶牛前面有 $a_i$ 头奶牛的编号小于它（因为第一头奶牛前面没有奶牛，所以 $i$ 从 $2$ 开始）。

### 输出格式

输出包含 $N$ 行，每行输出一个整数表示奶牛的编号。

第 $i$ 行输出第 $i$ 头奶牛的编号。

### 数据范围

$2 \le N \le 8000$。


---

---
title: "「FSLOI Round I」迷雾"
layout: "post"
diff: 普及/提高-
pid: P11078
tag: ['线段树', '洛谷原创', 'O2优化', '差分', '洛谷月赛']
---
# 「FSLOI Round I」迷雾
## 题目背景

**[English statement.](https://www.luogu.com.cn/problem/T500989) You must submit your code at the Chinese version of the statement.**

小 F 来到了迷雾之森。
## 题目描述

整个迷雾之森可以由一个 $n \times m$ 的矩阵表示，`X` 代表有迷雾的地块，`.` 代表空地。从上到下给每行标号为 $1,2,\cdots,n$，从左到右给每列标号为 $1,2,\cdots,m$。除此之外，还会给定一个迷雾系数 $k$。

小 F 进行了 $q$ 次移动。第 $i$ 次移动由一个字符 $c_i$，两个数字 $a_i,b_i$ 描述，更具体地说：

- $c_i$ 为 `U` 时，向上走 $a_i$ 步。
- $c_i$ 为 `D` 时，向下走 $a_i$ 步。
- $c_i$ 为 `L` 时，向左走 $a_i$ 步。
- $c_i$ 为 `R` 时，向右走 $a_i$ 步。

当然，小 F 不可以走出这个 $ n \times m $ 的范围。换句话说，若走到边界处，立即结束此次移动。

若第 $i$ 次移动**结束**后小 F 停留在有迷雾的地块上，则小 F 会对从 $i+k$ 开始，之后每 $k$ 次移动的 $c$ 进行一次修改，一共修改 $b_i$ 个移动。也就是说，小 F 会对 $c_{i+k},c_{i+2\times k},\cdots,c_{i+b_i \times k}$ 进行一次**修改**（保证 $i+b_i\times k \leq q$）。若 $b_i=0$ 则相当于不做修改。**注意所有操作的 $k$ 是一样的**。

修改 $c_x$ 即为按照以下规则替换 $c_x$：

- 若 $c_x$ 为 `U`，则替换为 `D`。
- 若 $c_x$ 为 `D`，则替换为 `U`。
- 若 $c_x$ 为 `R`，则替换为 `L`。
- 若 $c_x$ 为 `L`，则替换为 `R`。

初始时小 F 在点 $(1,1)$ 处，请输出 $q$ 次移动后小 F 所在的位置 $(x,y)$。
## 输入格式

第一行四个整数 $n,m,q,k$。

接下来 $n$ 行，每行一个长度为 $m$，由 `.` 和 `X` 构成的字符串，描述整个迷雾之森。

接下来 $q$ 行，每行先是一个字符 $c_i$，然后依次是两个整数 $a_i,b_i$，描述每次移动。
## 输出格式

共一行。

两个整数 $x,y$，表示小 F 最终的位置。
## 样例

### 样例输入 #1
```
3 3 4 1
..X
.XX
XXX
D 1 2
R 1 2
D 2 0
L 1 0

```
### 样例输出 #1
```
1 3

```
### 样例输入 #2
```
10 10 8 2
XX.XX.X...
XXX..XXX.X
XXX.X.XXXX
XXXXXXX.X.
.XX...XX.X
.XXX.X.X.X
...XXX.XXX
XX...XX...
X..XX....X
XXXXX...XX
U 2 1
L 1 3
R 3 1
L 1 2
D 2 1
R 5 1
L 4 0
D 3 0

```
### 样例输出 #2
```
1 10

```
## 提示

**【样例 1 解释】**

小 F 的位置变化如下：

$(1,1) \rightarrow (2,1) \rightarrow (2,2)\rightarrow (1,2) \rightarrow (1,3)$

序列 $c$ 的变化如下：

$ \lbrace \texttt{D,R,D,L} \rbrace \rightarrow \lbrace \texttt{D,R,D,L} \rbrace \rightarrow \lbrace \texttt{D,R,U,R} \rbrace \rightarrow \lbrace \texttt{D,R,U,R} \rbrace \rightarrow \lbrace \texttt{D,R,U,R} \rbrace$

**【数据规模与约定】**

**本题采用捆绑测试。**

对于 $100 \%$ 的数据，保证：
- $1 \leq n,m \leq 500$
- $1 \leq k \leq 20$
- $1\leq q \leq 2 \times 10^5$
- $1 \leq a_i,b_i \leq 10^6$
- $c_i$ 为 `L`，`R`，`U`，`D` 四个字符中的一个。

|子任务|分值|特殊性质|
|:-----:|:-----:|:-----:|
|$1$|$5$|$q=1$|
|$2$|$15$|$n,m,q\leq 100$|
|$3$|$20$|$k=1$|
|$4$|$30$|$n=1$|
|$5$|$30$|无|


---

---
title: "[APC001] D - Array Again"
layout: "post"
diff: 普及/提高-
pid: P11139
tag: ['模拟', '线段树', 'O2优化']
---
# [APC001] D - Array Again
## 题目描述

你需要维护一个数列，支持 $4$ 种操作：

1. `1 x y`：连续向数列中插入 $y$ 个数 $x$。
2. `2 x y`：连续在数列中删除 $y$ 次 $x$。如果在某一次删除中 $x$ 已经不存在于数列中，则忽略此操作。
3. `3`：对数列进行去重，即，对于每个在数列中出现过的不同的正整数 $x$，如果它在数列中出现了大于 $1$ 次，则只在数列中保留一个 $x$，其余全部删除。
4. `4 x`：查询数列中 $x$ 的出现次数。

对于每个操作 $4$，请求出其答案。
## 输入格式

第一行一个整数 $q$，表示询问次数。

接下来 $q$ 行，每行若干个整数，表示一次操作。
## 输出格式

对于每次操作 $4$ 输出一行，表示其答案。

数据保证至少有一次操作 $4$。
## 样例

### 样例输入 #1
```
5
1 2 10
2 2 5
4 2
3
4 2
```
### 样例输出 #1
```
5
1
```
### 样例输入 #2
```
4
1 1000000000 1000000000
1 1000000000 1000000000
1 1000000000 1000000000
4 1000000000
```
### 样例输出 #2
```
3000000000
```
### 样例输入 #3
```
20
4 95002957
2 384405322 255642125
2 384405322 174926753
2 384405322 51265222
1 384405322 311383201
4 384405322
1 384405322 5464229
4 22438767
4 17075617
1 384405322 153189933
1 230228188 148299369
1 7168162 387115701
1 384405322 154480360
1 384405322 438458686
3
1 7961090 98996809
4 153074129
1 975025351 171484003
1 384405322 650527951
4 384405322
```
### 样例输出 #3
```
0
311383201
0
0
0
650527952
```
## 提示

### 样例解释 $1$

第 $1$ 次操作：插入 $10$ 个 $2$。

第 $2$ 次操作：删除 $5$ 个 $2$。此后数列中只包含 $5$ 个 $2$。

第 $3$ 次操作：查询 $2$ 的出现次数，共 $5$ 次。

第 $4$ 次操作：对数列进行去重。此后数列中只包含一个 $2$。

第 $5$ 次操作：查询 $2$ 的出现次数，共 $1$ 次。

### 样例解释 $2$

请注意答案可能会超过 `int` 的范围。

### 数据范围

对于 $100\%$ 的数据，$1\le q\le 10^5$，$1\le x,y\le 10^9$。

请注意：由于本题所在比赛没有部分分，故只有通过所有的测试点才可以获得满分，否则会获得 $0$ 分。


---

---
title: "I Hate It"
layout: "post"
diff: 普及/提高-
pid: P1531
tag: ['模拟', '线段树', '枚举']
---
# I Hate It
## 题目背景

很多学校流行一种比较的习惯。老师们很喜欢询问，从某某到某某当中，分数最高的是多少。这让很多学生很反感。

## 题目描述

不管你喜不喜欢，现在需要你做的是，就是按照老师的要求，写一个程序，模拟老师的询问。当然，老师有时候需要更新某位同学的成绩。

## 输入格式

第一行，有两个正整数 $n$ 和 $m$（$0<n \le 2\times 10^5,0<m<5000$），分别代表学生的数目和操作的数目。学生 ID 编号分别从 $1$ 编到 $n$。

第二行包含 $n$ 个整数，代表这 $n$ 个学生的初始成绩，其中第 $i$ 个数代表 ID 为 $i$ 的学生的成绩。

接下来有 $m$ 行。每一行有一个字符 $c$（只取 `Q` 或 `U`），和两个正整数 $a$，$b$。

- 当 $c$ 为 `Q` 的时候，表示这是一条询问操作，它询问 ID 从 $a$ 到 $b$（包括 $a,b$） 的学生当中，成绩最高的是多少；
- 当 $c$ 为 `U` 的时候，表示这是一条更新操作，如果当前 $a$ 学生的成绩低于 $b$，则把 ID 为 $a$ 的学生的成绩更改为 $b$，否则不改动。
## 输出格式

对于每一次询问操作输出一行一个整数，表示最高成绩。

## 样例

### 样例输入 #1
```
5 6
1 2 3 4 5
Q 1 5
U 3 6
Q 3 4
Q 4 5
U 2 9
Q 1 5
```
### 样例输出 #1
```
5
6
5
9

```


---

---
title: "最接近神的人"
layout: "post"
diff: 普及/提高-
pid: P1774
tag: ['线段树', '树状数组', '递归', 'NOI 导刊', '排序']
---
# 最接近神的人
## 题目描述

破解了符文之语，小 FF 开启了通往地下的道路。当他走到最底层时，发现正前方有一扇巨石门，门上雕刻着一幅古代人进行某种活动的图案。而石门上方用古代文写着“神的殿堂”。小 FF 猜想里面应该就有王室的遗产了。但现在的问题是如何打开这扇门……。

仔细研究后，他发现门上的图案大概是说：古代人认为只有智者才是最容易接近神明的。而最聪明的人往往通过一种仪式选拔出来。仪式大概是指，即将隐退的智者为他的候选人写下一串无序的数字，并让他们进行一种操作，即交换序列中相邻的两个元素。而用最少的交换次数使原序列变成不下降序列的人即是下一任智者。

小 FF 发现门上同样有着 $n$ 个数字。于是他认为打开这扇门的秘诀就是找到让这个序列变成不下降序列所需要的最小次数。但小 FF 不会……只好又找到了你，并答应事成之后与你三七分……
## 输入格式

第一行为一个整数 $n$，表示序列长度。

第二行为 $n$ 个整数，表示序列中每个元素。
## 输出格式

一个整数 $\mathit{ans}$，即最少操作次数。

## 样例

### 样例输入 #1
```
4
2 8 0 3

```
### 样例输出 #1
```
3
```
## 提示

### 数据范围及约定

- 对于 $30\%$ 的数据 $1≤n≤10^4$。
- 对于 $100\%$ 的数据 $1≤n≤5\times 10^5$，$A_i\in [-2^{31}, 2^{31})$。

### 样例解释

开始序列为 $[2,8,0,3]$，目标序列为 $[0, 2, 3, 8]$，可进行三次操作的目标序列：

1. 交换 $(8,0)$，序列变成 $[2,0,8,3]$；
2. 交换 $(2,0)$，序列变成 $[0,2,8,3]$；
3. 交换 $(8,3)$，序列变成 $[0,2,3,8]$。



---

---
title: "忠诚"
layout: "post"
diff: 普及/提高-
pid: P1816
tag: ['线段树', '倍增', 'ST 表']
---
# 忠诚
## 题目描述

老管家是一个聪明能干的人。他为财主工作了整整  $10$ 年。财主为了让自已账目更加清楚，要求管家每天记  $k$ 次账。由于管家聪明能干，因而管家总是让财主十分满意。但是由于一些人的挑拨，财主还是对管家产生了怀疑。于是他决定用一种特别的方法来判断管家的忠诚，他把每次的账目按  $1, 2, 3 \ldots$ 编号，然后不定时的问管家问题，问题是这样的：在   $a$ 到  $b$ 号账中最少的一笔是多少？为了让管家没时间作假，他总是一次问多个问题。
## 输入格式

输入中第一行有两个数  $m, n$，表示有  $m$ 笔账  $n$ 表示有  $n$ 个问题。

第二行为  $m$ 个数，分别是账目的钱数。

后面  $n$ 行分别是  $n$ 个问题，每行有   $2$ 个数字说明开始结束的账目编号。
## 输出格式

在一行中输出每个问题的答案，以一个空格分割。
## 样例

### 样例输入 #1
```
10 3
1 2 3 4 5 6 7 8 9 10
2 7
3 9
1 10
```
### 样例输出 #1
```
2 3 1
```
## 提示

对于 $100\%$ 的数据，$m \leq 10^5$，$n \leq 10^5$。


---

---
title: "滑动窗口 /【模板】单调队列"
layout: "post"
diff: 普及/提高-
pid: P1886
tag: ['模拟', '线段树', '单调队列', '队列']
---
# 滑动窗口 /【模板】单调队列
## 题目描述

有一个长为 $n$ 的序列 $a$，以及一个大小为 $k$ 的窗口。现在这个从左边开始向右滑动，每次滑动一个单位，求出每次滑动后窗口中的最大值和最小值。

例如，对于序列 $[1,3,-1,-3,5,3,6,7]$ 以及 $k = 3$，有如下过程：

$$\def\arraystretch{1.2}
\begin{array}{|c|c|c|}\hline
\textsf{窗口位置} & \textsf{最小值} & \textsf{最大值} \\ \hline
\verb![1   3  -1] -3   5   3   6   7 ! & -1 & 3 \\ \hline
\verb! 1  [3  -1  -3]  5   3   6   7 ! & -3 & 3 \\ \hline
\verb! 1   3 [-1  -3   5]  3   6   7 ! & -3 & 5 \\ \hline
\verb! 1   3  -1 [-3   5   3]  6   7 ! & -3 & 5 \\ \hline
\verb! 1   3  -1  -3  [5   3   6]  7 ! & 3 & 6 \\ \hline
\verb! 1   3  -1  -3   5  [3   6   7]! & 3 & 7 \\ \hline
\end{array}
$$
## 输入格式

输入一共有两行，第一行有两个正整数 $n,k$。
第二行 $n$ 个整数，表示序列 $a$

## 输出格式

输出共两行，第一行为每次窗口滑动的最小值   
第二行为每次窗口滑动的最大值 

## 样例

### 样例输入 #1
```
8 3
1 3 -1 -3 5 3 6 7
```
### 样例输出 #1
```
-1 -3 -3 -3 3 3
3 3 5 5 6 7
```
## 提示

【数据范围】    
对于 $50\%$ 的数据，$1 \le n \le 10^5$；  
对于 $100\%$ 的数据，$1\le k \le n \le 10^6$，$a_i \in [-2^{31},2^{31})$。



---

---
title: "送花"
layout: "post"
diff: 普及/提高-
pid: P2073
tag: ['线段树', '平衡树']
---
# 送花
## 题目背景

小明准备给小红送一束花，以表达他对小红的爱意。他在花店看中了一些花，准备用它们包成花束。

## 题目描述

这些花都很漂亮，每朵花有一个美丽值 $W$，价格为 $C$。

小明一开始有一个空的花束，他不断地向里面添加花。他有以下几种操作：

- $1\ W\ C$：添加一朵美丽值为 $W$，价格为 $C$ 的花。  
**如果此时花束中已经有了相等价格的花，那么这朵花不能加入花束。**
- $2$：删除当前花束里最贵的一朵花。
- $3$：删除当前花束里最便宜的一朵花。
- $-1$：完成添加与删除，开始包装花束。

**当花束为空时，忽略操作 $2$ 和 $3$。**

请你写一个程序，计算出开始包装花束时，花束中所有花的美丽值的总和，以及小明需要为花束付出的总价格。
## 输入格式

若干行，每行一个操作，以 $-1$ 结束。
## 输出格式

一行，两个空格隔开的正整数表示开始包装花束时，花束中所有花的美丽值的总和。以及小明需要为花束付出的总价格。
## 样例

### 样例输入 #1
```
1 1 1
1 2 5
2
1 3 3
3
1 5 2
-1

```
### 样例输出 #1
```
8 5
```
## 提示

设操作数为 $m$。

- 对于 $20\%$ 数据，$m \le 100$，$1\le W,C\le 10^3$。
- 对于全部数据，$m \le 10^5$，$1\le W,C\le 10^6$。


---

---
title: "查单词"
layout: "post"
diff: 普及/提高-
pid: P2412
tag: ['字符串', '搜索', '线段树', '洛谷原创']
---
# 查单词
## 题目背景

滚粗了的 HansBug 在收拾旧英语书，然而他发现了什么奇妙的东西。

## 题目描述

蒟蒻 HansBug 在一本英语书里面找到了一个单词表，包含 $N$ 个单词（每个单词内包含大小写字母）。现在他想要找出某一段连续的单词内字典序最大的单词。

## 输入格式

第一行包含两个正整数 $N, M$，分别表示单词个数和询问个数。

接下来 $N$ 行每行包含一个字符串，仅包含大小写字母，长度不超过 $15$，表示一个单词。单词**大小写不敏感**。

再接下来 $M$ 行每行包含两个整数 $x, y$，表示查询求从第 $x$ 到第 $y$ 个单词中字典序最大的单词。如果有两个单词忽略大小写情况下字典序相同，**输出靠后的那个**。
## 输出格式

输出包含 $M$ 行，每行为一个字符串，分别依次对应 $M$ 个询问的结果。

## 样例

### 样例输入 #1
```
5 5
absi
hansbug
lzn
kkk
yyy
1 5
1 1
1 2
2 3
4 4
```
### 样例输出 #1
```
yyy
absi
hansbug
lzn
kkk

```
## 提示

### 样例说明

第一次操作：在{absi,hansbug,lzn,kkk,yyy}中找出字典序最大的，故为yyy

第二次操作：在{absi}中找出字典序最大的，故为absi

第三次操作：在{absi,hansbug}中找出字典序最大的，故为hansbug

第四次操作：在{hansbug,lzn}中找出字典序最大的，故为lzn

第五次操作：在{kkk}中找出字典序最大的，故为kkk

### 数据规模

 ![](https://cdn.luogu.com.cn/upload/pic/2274.png) 



---

---
title: "[SDOI2005] 区间"
layout: "post"
diff: 普及/提高-
pid: P2434
tag: ['动态规划 DP', '贪心', '2005', '线段树', '各省省选', '山东']
---
# [SDOI2005] 区间
## 题目描述

现给定 $n$ 个闭区间 $[a_i, b_i]$（$1 \le i \le n$）。这些区间的并可以表示为一些不相交的闭区间的并。你的任务就是在这些表示方式中找出包含最少区间的方案。你的输出应该按照区间的升序排列。这里如果说两个区间 $[a, b]$ 和 $[c, d]$ 是按照升序排列的，那么我们有 $a \le b < c \le d$。

请写一个程序：

读入这些区间；

计算满足给定条件的不相交闭区间；

把这些区间按照升序输出。
## 输入格式

第一行包含一个整数 $n$（$3 \le n \le 50000$）为区间的数目。  
以下 $n$ 行为对区间的描述，第 $i$ 行为对第 $i$ 个区间的描述，为两个整数 $a_i, b_i$（$1 \le a _ i \leq b _ i \le 1000000$），表示一个区间 $[a_i, b_i]$。
## 输出格式

输出计算出来的不相交的区间。每一行都是对一个区间的描述，包括两个用空格分开的整数，为区间的上下界。你应该把区间按照升序排序。
## 样例

### 样例输入 #1
```
5

5 6

1 4

10 10

6 9

8 10


```
### 样例输出 #1
```
1 4

5 10


```
## 提示

对于 $100 \%$ 的数据，$3 \le n \le 50000$，$1 \le a _ i \leq b _ i \le 1000000$。


---

---
title: "[USACO16FEB] Load Balancing S"
layout: "post"
diff: 普及/提高-
pid: P3138
tag: ['2016', '线段树', 'USACO', '枚举', '前缀和']
---
# [USACO16FEB] Load Balancing S
## 题目背景

*本题与 [白金组同名题目](/problem/P6172) 在题意上一致，唯一的差别是数据范围。*
## 题目描述

Farmer John 的 $N$ 头奶牛（$1 \leq N \leq 1000$）散布在整个农场上。整个农场是一个无限大的二维平面，第 $i$ 头奶牛的坐标是 $(x_i,y_i)$（保证 $x_i,y_i$ 均为正奇数，且 $x_i,y_i \leq 10^6$），且没有任意两头奶牛在同一位置上。

FJ 希望修建一条竖直方向的栅栏，它的方程是 $x=a$，他还希望修建一条水平方向的栅栏，它的方程是 $y=b$。为了防止栅栏经过奶牛，$a,b$ 均要求是偶数。容易发现，这两个栅栏会在 $(a,b)$ 处相交，将整个农场分割为四个区域。

FJ 希望这四个区域内的奶牛数量较为均衡，尽量避免一个区域奶牛多而另一个区域奶牛少的情况。令 $M$ 为四个区域里奶牛最多区域的奶牛数量，请帮 FJ 求出 $M$ 的最小值。
## 输入格式

第一行一个整数 $N$。

接下来 $N$ 行，每行两个整数 $x_i,y_i$，描述第 $i$ 头奶牛的位置。
## 输出格式

输出 $M$ 的最小值。
## 样例

### 样例输入 #1
```
7
7 3
5 5
7 13
3 1
11 7
5 3
9 1
```
### 样例输出 #1
```
2
```


---

---
title: "数据结构"
layout: "post"
diff: 普及/提高-
pid: P3948
tag: ['线段树', '树状数组', '前缀和', '差分']
---
# 数据结构
## 题目背景

**引言**

数据结构学的好，未来工作没烦恼。

![](https://timgsa.baidu.com/timg?image&quality=80&size=b9999\_10000&sec=1508946101936&di=0c08b703e466d2a3b2d20dd8008821fc&imgtype=0&src=http%3A%2F%2Fjoymepic.joyme.com%2Farticle%2Fuploads%2Fallimg%2F201511%2F1446516425349678.gif)


Edgration 是一个喜欢乱搞数据结构的蒟蒻（以下简称edt），有一天，他作死想去刁难一下dalao：

edt想求一种数据结构，使得可以实现区间加，求出某一区间大于k的元素的个数

dalao1：sb线段树

dalao2：sb分块

dalao3：sb平衡树

edt: 不行，那就加上取模，求区间取膜mod后大于MIN小于MAX的元素个数

dalao1：线段树&……￥#&……%……&\*&%￥

dalao2：sb分块 &%￥……%#￥#&……&\*

dalao3：\*&……%&￥LCT维护SBT水题 &……%&……%

edt：那不仅取模，每个数乘上数组下标再取模

dalao：￥%￥￥&\*（#￥% 叽里呱啦叽里呱啦

edt：不行，在把取模的值丢到一棵树上，维护一棵仙人掌乘积方差的最小极差

dalao：替罪羊树上用sb块状链表维护Toptree上的最小费用最大流和可持久化仙人掌，算出来在基尔霍夫矩阵中反演后跑一遍fft维护的插头DP就好了，给我三分钟轻松水过。。

edt：mmp

## 题目描述

蒟蒻Edt把这个问题交给了你 ———— 一个精通数据结构的大犇，由于是第一题，这个题没那么难。。


edt 现在对于题目进行了如下的简化：


最开始的数组每个元素都是0


给出$n$，$opt$，$mod$，$min$，$max$，$mod$在int范围内


操作$A$，$Q$


$A$: $L$,$R$,$X$ 表示把$[l,R]$这个区间加上$X$

**（数组的从L到R的每个元素都加上X）**


$Q$: $L$,$R$ 表示询问$[L,R]$这个区间中元素T满足  $min<=(T*i$%$ mod)<=max$  的 T这样的数的个数（i是数组下标）

**（元素的值\*数组下标%mod在min到max范围内）**


由于 edt 请来了一位非三次元的仓鼠，他帮你用延后了部分问题，将这些询问打入了混乱时空，你的询问操作不会超过1000次，不幸的是，对于延后的询问操作可能有很多次（小于1e7次），但是保证这些延后的询问操作之后不会再次有修改操作

（就是在最后会有很多次询问，但不会进行修改）

## 输入格式

给出n，opt，mod，min，max表示序列大小，操作次数，取膜，最小值，最大值


下面opt行，给出


$A$: $L$，$R$，$X$表示区间加，保证X在int范围内(<2147483647）


$Q$：$L$，$R$表示区间查询满足条件的个数


再给出一个$Final$值，表示后面有$Final$个询问


下面$Final$行，给出


$L$，$R$表示询问区间$[L,R]$表示询问$[L,R]$之间满足条件的个数

## 输出格式

每行对于每个$Q$操作输出$Q$个数表示每次询问的值，


下面$Final$行表示$Final$个询问的值

## 样例

### 样例输入 #1
```
3 2 4 0 2
A 1 3 5
Q 2 3 
5
1 3
2 3
1 1 
2 2 
3 3

```
### 样例输出 #1
```
1
2
1
1
1
0

```
### 样例输入 #2
```
17 25 4098 310 2622
A 10 16 657212040
A 4 15 229489140
A 1 2 -433239891
A 3 12 532385784
A 10 17 56266644
A 8 10 10038874
A 6 9 13084764
A 4 5 -9206340
Q 2 8
A 2 4 -43223955
A 6 9 31478706
A 2 4 189818310
A 2 8 179421180
A 2 8 40354938
Q 8 14
A 3 6 57229575
A 6 13 132795740
A 2 17 14558022
A 14 15 -552674185
A 5 11 -1104138
Q 2 12
Q 1 14
A 3 9 524902182
A 8 12 114291440
A 3 7 107531442
1
11 12

```
### 样例输出 #2
```
3
6
7
8
2

```
### 样例输入 #3
```
20 3 4317 1020 2232
A 8 15 -434078222
A 1 2 54988154
A 13 19 81757858
15
7 11
3 5
3 9
6 9
9 13
6 19
1 20
3 5
3 10
1 7
2 14
6 10
2 3
2 3
10 12

```
### 样例输出 #3
```
0
0
0
0
0
2
2
0
0
0
0
0
0
0
0

```
## 提示

## 样例说明

给出样例1的解释：

样例1中，$a$数组修改为$5$，$5$，$5$

每个$a[i]*i$%$4$ 的值为$1$,$2$,$3$

对于Final的询问

询问$[1$，$3]$中大于等于0小于等于2的个数为2个

剩下的询问类似

## 题目说明

**注意**：

### 1.关于负数取模问题，请以 c++ 的向0取整为标准，即如：

[ $ -7 $%$ 3 = -1 $ ]  [ $ 7 $%$ 3 = 1 $ ]

### 2.一共会有50个测试点，每个点分值为2分。

因为测试点数较多，请oier们自觉地不要故意多次提交来卡评测机，出题人 edt 在这里表示由衷的感谢

## 数据范围

如果你不能作对所有点，请尝试获得部分分，所有数据都是随机生成

![](https://cdn.luogu.com.cn/upload/image_hosting/whf39g4d.png)


---

---
title: "[USACO17DEC] My Cow Ate My Homework S"
layout: "post"
diff: 普及/提高-
pid: P4086
tag: ['递推', '2017', '线段树', 'USACO', '枚举', '前缀和']
---
# [USACO17DEC] My Cow Ate My Homework S
## 题目描述

In your bovine history class, you have been given a rather long homework assignment with $N$ questions ($3 \leq N \leq 100,000$), each graded with an integer score in the range 0...10,000. As is often customary, your teacher plans to assign a final grade by discarding a question on which you received the lowest score and then averaging the remaining scores together. Unfortunately, your pet cow Bessie has just eaten your answers to the first $K$ questions! ($K$ could be as small as 1 or as large as $N-2$).

After copious explanation, your teacher finally believes your story, and agrees to grade the remaining non-eaten part of the assignment the same way as before -- by removing the lowest-scoring question (or one such question, in the event of a tie) and averaging the rest.


Please output all values of $K$ which would have earned you the maximum possible score according to this grading scheme, in sorted order.


## 输入格式

The first line of input contains $N$, and the next line contains the scores on the $N$ homework questions.

## 输出格式

Please output, one value per line, all values of $K$ which would have earned you the maximum possible score.

## 样例

### 样例输入 #1
```
5
3 1 9 2 7
```
### 样例输出 #1
```
2
```
## 提示

If Bessie eats the first two questions, then the remaining scores are 9, 2, and 7. Removing the minimum and averaging, we get a final grade of 8, which is the highest possible.

## 题目翻译

### 题目描述

在你的牛历史课上，你被布置了一份相当长的作业，包含 $N$ 个问题（$3 \leq N \leq 100,000$），每个问题的得分是一个在 0 到 10,000 之间的整数。按照惯例，你的老师计划通过去掉你得分最低的一个问题，然后对剩余问题的得分取平均来给出最终成绩。不幸的是，你的宠物奶牛 Bessie 刚刚吃掉了你前 $K$ 个问题的答案！（$K$ 可能小到 1，也可能大到 $N-2$）。

经过多次解释，你的老师终于相信了你的说法，并同意按照之前的方式对剩余的未被吃掉的部分作业进行评分——即去掉得分最低的问题（或在得分相同的情况下去掉其中一个），然后对剩余问题取平均。

请输出所有能够使你获得最高可能成绩的 $K$ 值，并按升序排列。

### 输入格式

输入的第一行包含 $N$，第二行包含 $N$ 个作业问题的得分。

### 输出格式

请逐行输出所有能够使你获得最高可能成绩的 $K$ 值。

### 说明/提示

如果 Bessie 吃掉了前两个问题，那么剩余的得分是 9、2 和 7。去掉最低分并取平均后，最终成绩为 8，这是可能的最高成绩。


---

---
title: "[BalticOI 2007] Sequence 序列问题"
layout: "post"
diff: 普及/提高-
pid: P4393
tag: ['模拟', '贪心', '2007', '线段树', 'BalticOI（波罗的海）']
---
# [BalticOI 2007] Sequence 序列问题
## 题目描述

对于一个给定的序列 $a _ 1, \cdots, a _ n$，我们对它进行一个操作 $\text{reduce}(i)$，该操作将数列中的元素 $a _ i$ 和 $a _ {i+1}$ 用一个元素 $\max(a _ i,a _ {i+1})$ 替代，这样得到一个比原来序列短的新序列。这一操作的代价是 $\max(a _ i,a _ {i+1})$。进行 $n-1$ 次该操作后，可以得到一个长度为 $1$ 的序列。

我们的任务是计算代价最小的 $\text{reduce}$ 操作步骤，将给定的序列变成长度为 $1$ 的序列。
## 输入格式

第一行为一个整数 $n$（$1 \leq n \leq 10 ^6$），表示给定序列的长度。

接下来的 $n$ 行，每行一个整数 $a _ i$（$0 \leq a _ i \leq 10 ^ 9$），为序列中的元素。
## 输出格式

只有一行，为一个整数，即将序列变成一个元素的最小代价。 

## 样例

### 样例输入 #1
```
3
1
2
3
```
### 样例输出 #1
```
5
```
## 提示

### 数据规模与约定

- 对于 $30\%$ 的测试数据，$n\le 500$； 
- 对于 $50\%$ 的测试数据，$n \le 20000$；
- 对于 $100\%$ 的测试数据，$1 \le n \le 10^6$，$0 \le a_i \le 10^9$。


---

---
title: "[蓝桥杯 2017 省 A] 油漆面积"
layout: "post"
diff: 普及/提高-
pid: P8648
tag: ['2017', '线段树', '扫描线', '差分', '蓝桥杯省赛']
---
# [蓝桥杯 2017 省 A] 油漆面积
## 题目描述

X 星球的一批考古机器人正在一片废墟上考古。

该区域的地面坚硬如石、平整如镜。

管理人员为方便，建立了标准的直角坐标系。

每个机器人都各有特长、身怀绝技。它们感兴趣的内容也不相同。

经过各种测量，每个机器人都会报告一个或多个矩形区域，作为优先考古的区域。

矩形的表示格式为 $(x_1,y_1,x_2,y_2)$，代表矩形的两个对角点坐标。

为了醒目，总部要求对所有机器人选中的矩形区域涂黄色油漆。

小明并不需要当油漆工，只是他需要计算一下，一共要耗费多少油漆。

其实这也不难，只要算出所有矩形覆盖的区域一共有多大面积就可以了。

注意，各个矩形间可能重叠。

本题的输入为若干矩形，要求输出其覆盖的总面积。

## 输入格式


第一行，一个整数 $n$，表示有多少个矩形 $(1 \le n<10000)$。

接下来的 $n$ 行，每行有 $4$ 个整数 $x_1$，$y_1$，$x_2$，$y_2$，空格分开，表示矩形的两个对角顶点坐标。

$(0 \le x_1,y_1,x_2,y_2 \le 10000)$。

## 输出格式

一行一个整数，表示矩形覆盖的总面积。
## 样例

### 样例输入 #1
```
3
1 5 10 10
3 1 20 20
2 7 15 17

```
### 样例输出 #1
```
340
```
### 样例输入 #2
```
3
5 2 10 6
2 7 12 10
8 1 15 15
```
### 样例输出 #2
```
128
```
## 提示

蓝桥杯 2022 省赛 A 组 J 题。


---


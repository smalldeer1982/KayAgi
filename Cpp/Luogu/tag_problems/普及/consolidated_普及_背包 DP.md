---
title: "[蓝桥杯 2023 国 Python A] 火车运输"
layout: "post"
diff: 普及/提高-
pid: P10987
tag: ['动态规划 DP', '2023', '背包 DP', '蓝桥杯国赛']
---
# [蓝桥杯 2023 国 Python A] 火车运输
## 题目背景

为照顾 Python 语言的效率，本题时限较大。建议使用 PyPy3 提交本题。
## 题目描述

钢厂有一辆用于运送废旧钢材的火车，它具有两节车厢，其中车厢 1 的最大载重量为 $A$，车厢 2 的最大载重量为 $B$。现在一共有 $N$ 件废旧钢材需要被运输，其中第 $i$ 件钢材的重量为 $w_i$，为了最大化运输效率，车长想要一次性运输走重量尽可能多的钢材，请你帮助车长计算出一次运输最多可以带走多大重量的钢材。

每件钢材都是独立的不可分割的，只能被放置在某一节车厢中。在装载钢材时只需要考虑重量条件即可。

## 输入格式

输入的第一行包含三个整数 $N ,A,B$，用一个空格分隔，分别表示钢材的数目以及两节车厢的最大载重。

第二行包含 $N$ 个整数，分别表示 $w_1,w_2, \cdots,w_n$，相邻两个整数之间使用一个空格分隔。
## 输出格式

输出一个整数表示答案。

## 样例

### 样例输入 #1
```
3 10 8
8 9 1

```
### 样例输出 #1
```
18
```
## 提示

对于 $30\%$ 的评测用例，$1 \le N \le 10$；

对于所有评测用例，$1 \le N \le 200,1 \le w_i
,A,B \le 1000$。

#### 样例解释

车厢 1 装入第 $2$ 件和第 $3$ 件钢材，车厢 2 装入第 $1$ 件钢材。


---

---
title: "[COCI 2024/2025 #2] 游戏 / Igre"
layout: "post"
diff: 普及/提高-
pid: P11430
tag: ['2024', '背包 DP', 'COCI（克罗地亚）']
---
# [COCI 2024/2025 #2] 游戏 / Igre
## 题目背景

译自 [COCI 2024/2025 #2](https://hsin.hr/coci/) T2。$\texttt{2s,0.5G}$。满分为 $70$。
## 题目描述

游戏 $i$ 需要 $p_i$ 分钟来学习。一款游戏只有学习怎么玩之后才可以玩。

玩一局游戏 $i$ 需要 $t_i$ 分钟，可以获得 $o_i$ 分。可以多次游玩一款游戏。

适度游戏益脑，过度游戏伤身。如果只花 $m$ 分钟来玩（包括学习玩）游戏，最多可以获得多少分？

## 输入格式

第一行，两个正整数 $n,m$。

接下来 $n$ 行，每行三个整数 $p_i,t_i,o_i$。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
3 10
2 3 5
5 1 5
3 2 5
```
### 样例输出 #1
```
25
```
### 样例输入 #2
```
4 13
0 6 5
0 3 4
0 2 3
0 4 4
```
### 样例输出 #2
```
19
```
### 样例输入 #3
```
3 10
1 1 1
3 2 3
2 3 5
```
### 样例输出 #3
```
11
```
## 提示


#### 样例解释

样例 $3$ 解释：

学第 $1,3$ 款游戏，耗时 $1+2=3$ 分钟。

游玩游戏 $1,3,3$，获得 $1+5+5=11$ 分，耗时 $1+3+3=7$ 分钟。

#### 数据范围

对于 $100\%$ 的数据，保证：

- $1\le n,m,t_i\le 5\, 000$；
- $0\le p_i\le 5\, 000$；
- $1\le o_i\le 10^9$。


| 子任务编号 | $n\le$ |  特殊性质 | 得分 |  
| :--: | :--: | :--: |:--: | 
| $ 1 $    | $1$ |     |   $ 6 $   |  
| $ 2 $    | $10$ |   |  $ 13 $   |  
| $ 3 $    | $5\, 000$  | A | $ 23 $   |
| $ 4 $    | $5\, 000$  | | $ 28 $   |

- 特殊性质 A：$\forall 1\le i\le n$，$p_i=0$。





---

---
title: "搭配购买"
layout: "post"
diff: 普及/提高-
pid: P1455
tag: ['并查集', '背包 DP', '强连通分量']
---
# 搭配购买
## 题目描述

明天就是母亲节了，电脑组的小朋友们在忙碌的课业之余挖空心思想着该送什么礼物来表达自己的心意呢？听说在某个网站上有卖云朵的，小朋友们决定一同前往去看看这种神奇的商品，这个店里有 $n$ 朵云，云朵已经被老板编号为 $1,2,3,...,n$，并且每朵云都有一个价值，但是商店的老板是个很奇怪的人，他会告诉你一些云朵要搭配起来买才卖，也就是说买一朵云则与这朵云有搭配的云都要买，电脑组的你觉得这礼物实在是太新奇了，但是你的钱是有限的，所以你肯定是想用现有的钱买到尽量多价值的云。
## 输入格式

第一行输入三个整数，$n,m,w$，表示有 $n$ 朵云，$m$ 个搭配和你现有的钱的数目。

第二行至 $n+1$ 行，每行有两个整数， $c_i,d_i$，表示第 $i$ 朵云的价钱和价值。

第 $n+2$ 至 $n+1+m$ 行 ，每行有两个整数 $u_i,v_i$。表示买第 $u_i$ 朵云就必须买第 $v_i$ 朵云,同理，如果买第 $v_i$ 朵就必须买第 $u_i$ 朵。
## 输出格式

一行，表示可以获得的最大价值。
## 样例

### 样例输入 #1
```
5 3 10
3 10
3 10
3 10
5 100
10 1
1 3
3 2
4 2

```
### 样例输出 #1
```
1

```
## 提示

- 对于 $30\%$ 的数据，满足 $1 \le n \le 100$；
- 对于 $50\%$ 的数据，满足 $1 \le n, w \le 10^3$，$1 \le m \le 100$；
- 对于 $100\%$ 的数据，满足 $1 \le n, w \le 10^4$，$0 \le m \le 5 \times 10^3$。


---

---
title: "[USACO2.2] 集合 Subset Sums"
layout: "post"
diff: 普及/提高-
pid: P1466
tag: ['递推', 'USACO', '背包 DP']
---
# [USACO2.2] 集合 Subset Sums
## 题目描述

对于从 $1\sim n$ 的连续整数集合，能划分成两个子集合，且保证每个集合的数字和是相等的。举个例子，如果 $n=3$，对于 $\{1,2,3\}$ 能划分成两个子集合，每个子集合的所有数字和是相等的：

$\{3\}$ 和 $\{1,2\}$ 是唯一一种分法（交换集合位置被认为是同一种划分方案，因此不会增加划分方案总数）  
如果 $n=7$，有四种方法能划分集合 $\{1,2,3,4,5,6,7 \}$，每一种分法的子集合各数字和是相等的:

$\{1,6,7\}$ 和 $\{2,3,4,5\}$  
$\{2,5,7\}$ 和 $\{1,3,4,6\}$  
$\{3,4,7\}$ 和 $\{1,2,5,6\}$  
$\{1,2,4,7\}$ 和 $\{3,5,6\}$  

给出 $n$，你的程序应该输出划分方案总数。
## 输入格式

输入文件只有一行，且只有一个整数 $n$

## 输出格式

输出划分方案总数。

## 样例

### 样例输入 #1
```
7

```
### 样例输出 #1
```
4

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 39$。

翻译来自NOCOW

USACO 2.2



---

---
title: "积木城堡"
layout: "post"
diff: 普及/提高-
pid: P1504
tag: ['动态规划 DP', '枚举', '背包 DP']
---
# 积木城堡
## 题目描述

XC 的儿子小 XC 最喜欢玩的游戏用积木垒漂亮的城堡。城堡是用一些立方体的积木垒成的，城堡的每一层是一块积木。  

小 XC 是一个比他爸爸 XC 还聪明的孩子，他发现垒城堡的时候，如果下面的积木比上面的积木大，那么城堡便不容易倒。所以他在垒城堡的时候总是遵循这样的规则。

小 XC 想把自己垒的城堡送给幼儿园里漂亮的女孩子们，这样可以增加他的好感度。为了公平起见，他决定送给每个女孩子一样高的城堡，这样可以避免女孩子们为了获得更漂亮的城堡而引起争执。  

可是他发现自己在垒城堡的时候并没有预先考虑到这一点。所以他现在要改造城堡。由于他没有多余的积木了，他灵机一动，想出了一个巧妙的改造方案。他决定从每一个城堡中挪去一些积木，使得最终每座城堡都一样高。为了使他的城堡更雄伟，他觉得应该使最后的城堡都尽可能的高。

任务：

请你帮助小 XC 编一个程序，根据他垒的所有城堡的信息，决定应该移去哪些积木才能获得最佳的效果。

注意：一座城堡的高度，是组成它的所有积木的棱长之和。
## 输入格式

第一行是一个整数 $n$，表示一共有 $n$ 座城堡。  

以下 $n$ 行每行是一系列非负整数，用一个空格分隔，按从下往上的顺序依次给出一座城堡中所有积木的**棱长**。用 `-1` 结束。

## 输出格式

一个整数，表示最后城堡的最大可能的高度。  
如果找不到合适的方案，则输出 $0$。

## 样例

### 样例输入 #1
```
2
2 1 -1
3 2 1 -1

```
### 样例输出 #1
```
3

```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1 \le n \le 100$，一座城堡中的积木不超过 $100$ 块，每块积木的棱长不超过 $100$。


---

---
title: "找啊找啊找GF"
layout: "post"
diff: 普及/提高-
pid: P1509
tag: ['动态规划 DP', '背包 DP']
---
# 找啊找啊找GF
## 题目背景

“找啊找啊找 GF，找到一个好 GF，吃顿饭啊拉拉手，你是我的好 GF。再见。”

“诶，别再见啊…”

七夕… 七夕… 七夕这个日子，对于 sqybi 这种单身的菜鸟来说是多么的痛苦… 虽然他听着这首叫做“找啊找啊找 GF”的歌，他还是很痛苦。为了避免这种痛苦，sqybi 决定要给自己找点事情干。他去找到了七夕模拟赛的负责人 zmc MM，让她给自己一个出题的任务。经过几天的死缠烂打，zmc MM 终于同意了。

但是，拿到这个任务的 sqybi 发现，原来出题比单身更让人感到无聊 -\_- … 所以，他决定了，要在出题的同时去办另一件能够使自己不无聊的事情——给自己找 GF。
## 题目描述

sqybi 现在看中了 $n$ 个 MM，我们不妨把她们编号 $1$ 到 $n$。请 MM 吃饭是要花钱的，我们假设请 $i$ 号 MM 吃饭要花 $rmb[i]$ 块大洋。而希望骗 MM 当自己 GF 是要费人品的，我们假设请第 $i$ 号 MM 吃饭试图让她当自己 GF 的行为（不妨称作泡该 MM）要耗费 $rp[i]$ 的人品。而对于每一个 MM 来说，sqybi 都有一个对应的搞定她的时间，对于第 $i$ 个 MM 来说叫做 $time[i]$。sqybi 保证自己有足够的魅力用 $time[i]$ 的时间搞定第 $i$ 个 MM ^\_^。

sqybi 希望搞到尽量多的 MM 当自己的 GF，这点是毋庸置疑的。但他不希望为此花费太多的时间（毕竟七夕赛的题目还没出），所以他希望在保证搞到 MM 数量最多的情况下花费的总时间最少。

sqybi 现在有 $m$ 块大洋,他也通过一段时间的努力攒到了 $r$ 的人品（这次为模拟赛出题也攒 rp 哦\~\~）。他凭借这些大洋和人品可以泡到一些 MM。他想知道，自己泡到最多的 MM 花费的最少时间是多少。

注意 sqybi 在一个时刻只能去泡一个 MM ——如果同时泡两个或以上的 MM 的话，她们会打起来的…
## 输入格式

输入的第一行是 $n$，表示 sqybi 看中的 MM 数量。

接下来有 $n$ 行，依次表示编号为 $1, 2, 3, \ldots , n$ 的一个 MM 的信息。每行表示一个 MM 的信息，有三个整数：$rmb$，$rp$ 和 $time$。

最后一行有两个整数，分别为 $m$ 和 $r$。
## 输出格式

你只需要输出一行，其中有一个整数，表示 sqybi 在保证 MM 数量的情况下花费的最少总时间是多少。
## 样例

### 样例输入 #1
```
4
1 2 5
2 1 6
2 2 2
2 2 3
5 5

```
### 样例输出 #1
```
13
```
## 提示

sqybi 说：如果题目里说的都是真的就好了…

sqybi 还说，如果他没有能力泡到任何一个 MM，那么他就不消耗时间了（也就是消耗的时间为 $0$），他要用这些时间出七夕比赛的题来攒 rp…

**【数据规模】**

对于 $20 \%$ 的数据，$1 \le n \le 10$；  
对于 $100 \%$ 的数据，$1 \le rmb \le 100$，$1 \le rp \le 100$，$1 \le time \le 1000$。  
对于 $100 \%$ 的数据，$1 \le m, r, n \le 100$。


---

---
title: "精卫填海"
layout: "post"
diff: 普及/提高-
pid: P1510
tag: ['模拟', '动态规划 DP', '背包 DP']
---
# 精卫填海
## 题目描述

本题为改编题。

> 发鸠之山，其上多柘木。有鸟焉，其状如乌，文首，白喙，赤足，名曰精卫，其名自詨。是炎帝之少女，名曰女娃。女娃游于东海，溺而不返，故为精卫。常衔西山之木石，以堙于东海。——《山海经》

精卫终于快把东海填平了！只剩下了最后的一小片区域了。同时，西山上的木石也已经不多了。精卫能把东海填平吗？

事实上，东海未填平的区域还需要至少体积为 $v$ 的木石才可以填平，而西山上的木石还剩下 $n$ 块，每块的体积和把它衔到东海需要的体力分别为 $k$ 和 $m$。精卫已经填海填了这么长时间了，她也很累了，她还剩下的体力为 $c$。
## 输入格式

输入文件的第一行是三个整数：$v,n,c$。

从第二行到第 $n+1$ 行分别为每块木石的体积和把它衔到东海需要的体力。
## 输出格式

输出文件只有一行，如果精卫能把东海填平，则输出她把东海填平后剩下的最大的体力，否则输出 `Impossible`（不带引号）。

## 样例

### 样例输入 #1
```
100 2 10
50 5
50 5
```
### 样例输出 #1
```
0
```
### 样例输入 #2
```
10 2 1
50 5
10 2
```
### 样例输出 #2
```
Impossible
```
## 提示

### 数据范围及约定

- 对于 $20\%$ 的数据，$0<n \le 50$；
- 对于 $50\%$ 的数据，$0<n \le 1000$；
- 对于 $100\%$ 的数据，$0<n \le 10^4$，所有读入的数均属于 $[0,10^4]$，最后答案不大于 $c$。



---

---
title: "装备运输"
layout: "post"
diff: 普及/提高-
pid: P1794
tag: ['动态规划 DP', 'NOI 导刊', '背包 DP']
---
# 装备运输
## 题目描述

德国放松对英国的进攻后，把矛头指向了东边——苏联。$1943$ 年初，东线的战斗进行到白热化阶段。据可靠情报，$90$ 余万德国军队在库尔斯克准备发动浩大攻势。因此，朱可夫元帅要求你立即从远东的军工厂运输大量装备支援库尔斯克前线。列车司机告诉你，一趟列车最多可以容纳 $V$ 体积的武器装备，但是你可能不能装满，因为列车承受不了那么大的重量，一趟列车最多可以承载 $G$ 单位的重量。同时，军工厂仓库提供给你一份装备清单，详细记录了每件装备的体积、重量和火力。为了有效支援朱可夫元帅，你要找到一种方案，使得总火力值最大。
## 输入格式

第一行两个整数 $V$ 和 $G$，表示最大体积和重量。

第二行一个整数 $N$，表示仓库有 $N$ 件装备。

第三到 $N+2$ 行，每行 $3$ 个数 $T_i,V_i,G_i$，表示各装备的火力值、体积和重量。
## 输出格式

输出一个数，表示可能获得的最大火力值。

## 样例

### 样例输入 #1
```
6 5 
4
10 2 2
20 3 2 
40 4 3 
30 3 3 

```
### 样例输出 #1
```
50

```
## 提示

对于 $100\%$ 的数据，$1\le V, G, N \le 500$，$1 \leq T_i, V_i, G_i \leq 10^9$。


---

---
title: "樱花"
layout: "post"
diff: 普及/提高-
pid: P1833
tag: ['动态规划 DP', '洛谷原创', '背包 DP']
---
# 樱花
## 题目背景

《爱与愁的故事第四弹·plant》第一章。

## 题目描述

爱与愁大神后院里种了 $n$ 棵樱花树，每棵都有美学值 $C_i(0 \le C_i \le 200)$。爱与愁大神在每天上学前都会来赏花。爱与愁大神可是生物学霸，他懂得如何欣赏樱花：一种樱花树看一遍过，一种樱花树最多看 $P_i(0 \le P_i \le 100)$ 遍，一种樱花树可以看无数遍。但是看每棵樱花树都有一定的时间 $T_i(0 \le T_i \le 100)$。爱与愁大神离去上学的时间只剩下一小会儿了。求解看哪几棵樱花树能使美学值最高且爱与愁大神能准时（或提早）去上学。

## 输入格式

共 $n+1$行：

第 $1$ 行：现在时间 $T_s$（几时：几分），去上学的时间 $T_e$（几时：几分），爱与愁大神院子里有几棵樱花树 $n$。这里的 $T_s$，$T_e$ 格式为：`hh:mm`，其中 $0 \leq hh \leq 23$，$0 \leq mm \leq 59$，且 $hh,mm,n$ 均为正整数。

第 $2$ 行到第 $n+1$ 行，每行三个正整数：看完第 $i$ 棵树的耗费时间 $T_i$，第 $i$ 棵树的美学值 $C_i$，看第 $i$ 棵树的次数 $P_i$（$P_i=0$ 表示无数次，$P_i$ 是其他数字表示最多可看的次数 $P_i$）。

## 输出格式

只有一个整数，表示最大美学值。

## 样例

### 样例输入 #1
```
6:50 7:00 3
2 1 0
3 3 1
4 5 4
```
### 样例输出 #1
```
11
```
## 提示

$100\%$ 数据：$T_e-T_s \leq 1000$（即开始时间距离结束时间不超过 $1000$ 分钟），$n \leq 10000$。保证 $T_e,T_s$ 为同一天内的时间。

样例解释：赏第一棵樱花树一次，赏第三棵樱花树 $2$ 次。



---

---
title: "投资的最大效益"
layout: "post"
diff: 普及/提高-
pid: P1853
tag: ['动态规划 DP', '背包 DP']
---
# 投资的最大效益
## 题目背景

约翰先生获得了一大笔遗产，他暂时还用不上这一笔钱，他决定进行投资以获得更大的效益。银行工作人员向他提供了多种债券，每一种债券都能在固定的投资后，提供稳定的年利息。当然，每一种债券的投资额是不同的，一般来说，投资越大，收益也越大，而且，每一年还可以根据资金总额的增加，更换收益更大的债券。

## 题目描述

例如：有如下两种不同的债券：

1. 投资额 $\$4000$，年利息 $\$400$；
2. 投资额 $\$3000$，年利息 $\$250$。

初始时，有 $\$10000$ 的总资产，可以投资两份债券 1 债券，一年获得 $\$800$ 的利息；而投资一份债券 1 和两份债券 2，一年可获得 $\$900$ 的利息，两年后，可获得 $\$1800$ 的利息；而所有的资产达到 $\$11800$，然后将卖掉一份债券 2，换购债券 1，年利息可达到 $\$1050$；第三年后，总资产达到 $\$12850$，可以购买三份债券 1，年利息可达到 $\$1200$，第四年后，总资产可达到 $\$14050$。

现给定若干种债券、最初的总资产，帮助约翰先生计算，经过 $n$ 年的投资，总资产的最大值。

## 输入格式

第一行为三个正整数 $s, n, d$，分别表示最初的总资产、年数和债券的种类。

接下来 $d$ 行，每行表示一种债券，两个正整数 $a, b$ 分别表示债券的投资额和年利息。

## 输出格式

仅一个整数，表示 $n$ 年后的最大总资产。

## 样例

### 样例输入 #1
```
10000 4 2

4000 400

3000 250
```
### 样例输出 #1
```
14050
```
## 提示

对于 $100 \%$ 的数据，$1 \le s \le {10}^6$，$2 \le n \le 40$，$1 \le d \le 10$，$1 \le a \le {10}^4$，且 $a$ 是 $1000$ 的倍数，$b$ 不超过 $a$ 的 $10\%$。


---

---
title: "魔术棋子"
layout: "post"
diff: 普及/提高-
pid: P2049
tag: ['动态规划 DP', '枚举', '背包 DP']
---
# 魔术棋子
## 题目描述

在一个 $M \times N$ 的魔术棋盘中，每个格子中均有一个整数，当棋子走进这个格子中，则此棋子上的数会被乘以此格子中的数。一个棋子从左上角走到右下角，只能向右或向下行动，请问此棋子走到右下角后，模（mod）$K$ 可以为几？

如以下 $2 \times 3$ 棋盘：

```
3    4    4
5    6    6
```
棋子初始数为 $1$，开始从左上角进入棋盘，走到右下角，上图中，最后棋子上的数可能为 $288,432$ 或 $540$。所以当 $K = 5$ 时，可求得最后的结果为：$0,2,3$。

## 输入格式

第一行为三个数，分别为 $M,N,K (1 \leq M,N,K \leq 100)$。以下 $M$ 行，每行 $N$ 个数，分别为此方阵中的数。

## 输出格式

第一行为可能的结果个数。

第二行为所有可能的结果（按升序输出）。
## 样例

### 样例输入 #1
```
2 3 5
3 4 4
5 6 6

```
### 样例输出 #1
```
3
0 2 3

```


---

---
title: "机器分配"
layout: "post"
diff: 普及/提高-
pid: P2066
tag: ['动态规划 DP', '搜索', '背包 DP']
---
# 机器分配
## 题目描述

总公司拥有高效设备 $M$ 台，准备分给下属的 $N$ 个分公司。各分公司若获得这些设备，可以为国家提供一定的盈利。问：如何分配这 $M$ 台设备才能使国家得到的盈利最大？求出最大盈利值。其中 $M \le 15$，$N \le 10$。分配原则：每个公司有权获得任意数目的设备，但总台数不超过设备数 $M$。

## 输入格式

第一行有两个数，第一个数是分公司数 $N$，第二个数是设备台数 $M$。

接下来是一个 $N \times M$ 的矩阵，表明了第 $i$ 个公司分配 $j$ 台机器的盈利。

最大盈利值相同时，要求编号小的公司分得设备尽可能少。

## 输出格式

第一行为最大盈利值。

接下来 $N$ 行为第 $i$ 分公司分 $x$ 台。


## 样例

### 样例输入 #1
```
3 3
30 40 50
20 30 50
20 25 30

```
### 样例输出 #1
```
70
1 1
2 1
3 1

```


---

---
title: "yyy2015c01 的 U 盘"
layout: "post"
diff: 普及/提高-
pid: P2370
tag: ['动态规划 DP', '贪心', '二分', '洛谷原创', '排序', '背包 DP']
---
# yyy2015c01 的 U 盘
## 题目背景

在 2020 年的某一天，我们的 yyy2015c01 买了个高端 U 盘。

## 题目描述

你找 yyy2015c01 借到了这个高端的 U 盘，拷贝一些重要资料，但是你发现这个 U 盘有一些问题：

1. 这个 U 盘的传输接口很小，只能传输大小不超过 $L$ 的文件。
2. 这个 U 盘容量很小，一共只能装不超过 $S$ 的文件。

但是你要备份的资料却有很多，你只能备份其中的一部分。

为了选择要备份哪些文件，你给所有文件设置了一个价值 $V_i$，你希望备份的文件总价值不小于 $p$。

但是很快你发现这是不可能的，因为 yyy2015c01 的传输接口太小了，你只有花钱买一个更大的接口（更大的接口意味着可以传输更大的文件，但是购买它会花费更多的钱）。

注意：你的文件不能被分割（你只能把一个文件整个的传输进去，并储存在U盘中）,

你放在 U 盘中文件的总大小不能超过 U 盘容量。

现在问题来了：你想知道，在满足 U 盘中文件价值之和**不小于** $p$ 时，最小需要多大的接口。
## 输入格式

第 $1$ 行，三个正整数 $n,p,S$ 分别表示文件总数，希望最小价值 $p$ ，U 盘大小。

接下来 $n$ 行，每行两个正整数 $W_{i},V_{i}$，表示第 $i$ 个文件的大小和价值。
## 输出格式

输出一个正整数表示最小需要的接口大小。

如果无解输出 `No Solution!`。
## 样例

### 样例输入 #1
```
3 3 5
2 2
1 2
3 2
```
### 样例输出 #1
```
2
```
### 样例输入 #2
```
2 3 505
1 2
500 1
```
### 样例输出 #2
```
500
```
### 样例输入 #3
```
3 3 2
2 2
1 2
3 2
```
### 样例输出 #3
```
No Solution!
```
### 样例输入 #4
```
4 5 6
5 1
5 2
5 3
1 1
```
### 样例输出 #4
```
No Solution!
```
## 提示

$1 \le n, W_i, S \le 10^3$，$1 \leq V_i \leq 10^6$，$1 \leq p \leq 10^9$。

数据较小，请勿乱搞。

样例解释 $1$：买一个大小为 $2$ 接口，把物品 $1$ 、$2$ 放进$\text{U}$盘。

样例解释 $2$：买一个大小为 $500$ 的接口。

样例解释 $3$：本来可以买大小为 $2$ 的接口，可是 U 盘容量放不下足够的文件。

如果数据出现疏漏，请联系出题人 [a710128](https://www.luogu.com.cn/user/2573)

向本题主人公 yyy2015c01 同学致敬！


---

---
title: "[USACO3.1] 邮票 Stamps"
layout: "post"
diff: 普及/提高-
pid: P2725
tag: ['模拟', '动态规划 DP', '搜索', '贪心', 'USACO', '背包 DP']
---
# [USACO3.1] 邮票 Stamps
## 题目描述

给一组 $n$ 枚邮票的面值集合和一个上限 $k$ —— 表示信封上能够贴 $k$ 张邮票。请求出最大的正整数 $m$，满足 $1$ 到 $m$ 的面值都可以用不超过 $k$ 张邮票表示出来。


## 输入格式

输入的第一行是两个整数，分别代表邮票上限 $k$ 和邮票面值数 $n$。

自第二行起，除最后一行外，每行有 $15$ 个整数 $a_i$ ，最后一行的整数个数不超过 $15$，共有 $n$ 个整数，第 $i$ 个整数代表第 $i$ 种邮票的面值 $a_i$。
## 输出格式

输出一行一个整数代表 $m$。若 $m$ 不存在请输出 $0$。
## 样例

### 样例输入 #1
```
5 2
1 3
```
### 样例输出 #1
```
13
```
## 提示

#### 样例输入输出 1 解释

有 $1$ 分和 $3$ 分的邮票；你最多可以贴 $5$ 张邮票。很容易贴出 $1$ 到 $5$ 分的邮资（用 $1$ 分邮票贴就行了），接下来的邮资也不难：


- $6 = 3 + 3$。
- $7 = 3 + 3 + 1$。
- $8 = 3 + 3 + 1 + 1 $。
- $9 = 3 + 3 + 3 $。
- $10 = 3 + 3 + 3 + 1 $。
- $11 = 3 + 3 + 3 + 1 + 1 $。
- $12 = 3 + 3 + 3 + 3 $。
- $13 = 3 + 3 + 3 + 3 + 1$。


然而，使用 $5$ 枚 $1$ 分或者 $3$ 分的邮票根本不可能贴出 $14$ 分的邮资。因此，答案为 $13$。

#### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \leq k \leq 200$，$1 \leq n \leq 50$，$1 \leq a_i \leq 10^4$。

#### 说明

题目翻译来自 NOCOW。


---

---
title: "[USACO07NOV] Milking Time S"
layout: "post"
diff: 普及/提高-
pid: P2889
tag: ['动态规划 DP', '2007', 'USACO', '排序', '背包 DP']
---
# [USACO07NOV] Milking Time S
## 题目描述

Bessie 可以在接下来 $N$ 个小时内产奶，为了方便，我们把这 $N$ 个小时 $1\dots N$ 编号。

FJ 在这 $N$ 个小时内有 $M$ 段时间可以来给 Bessie 挤奶，第 $i$ 段时间从 $Start_i$ 开始到 $End_i$ 结束，可以得到 $Eff_i$ 加仑牛奶。

每次 FJ 给 Bessie 挤奶之后，Bessie 都要休息 $R$ 个小时，FJ 才能开始下一次挤奶。

现在，FJ 需要您计算出 Bessie 在这 $N$ 个小时内最多产多少奶。
## 输入格式

第一行有三个整数，分别表示 $N,M,R$。

第 $2\dots M+1$ 行，第 $i+1$ 行有三个整数 $Start_i,End_i,Eff_i$，描述一段挤奶的时间。
## 输出格式

输出一行一个整数表示答案。
## 样例

### 样例输入 #1
```
12 4 2
1 2 8
10 12 19
3 6 24
7 10 31
```
### 样例输出 #1
```
43
```
## 提示

#### 数据规模与约定
对于全部的测试点，保证 $1\le N\le 10^6$，$1\le M\le 10^3$，$1\le Start_i<end_i\le N$，$1\le Eff_i\le 10^6$。


---

---
title: "[USACO08MAR] River Crossing S"
layout: "post"
diff: 普及/提高-
pid: P2904
tag: ['动态规划 DP', '2008', 'USACO', '背包 DP']
---
# [USACO08MAR] River Crossing S
## 题目描述

Farmer John is herding his N cows (1 <= N <= 2,500) across the expanses of his farm when he finds himself blocked by a river. A single raft is available for transportation.

FJ knows that he must ride on the raft for all crossings and that that adding cows to the raft makes it traverse the river more slowly.

When FJ is on the raft alone, it can cross the river in M minutes (1 <= M <= 1000).  When the i cows are added, it takes M\_i minutes (1 <= M\_i <= 1000) longer to cross the river than with i-1 cows (i.e., total M+M\_1 minutes with one cow, M+M\_1+M\_2 with two, etc.). Determine the minimum time it takes for Farmer John to get all of the cows across the river (including time returning to get more cows).
## 输入格式

\* Line 1: Two space-separated integers: N and M

\* Lines 2..N+1: Line i+1 contains a single integer: M\_i

## 输出格式

\* Line 1: The minimum time it takes for Farmer John to get all of the cows across the river.

## 样例

### 样例输入 #1
```
5 10 
3 
4 
6 
100 
1 

```
### 样例输出 #1
```
50 

```
## 提示

There are five cows. Farmer John takes 10 minutes to cross the river alone, 13 with one cow, 17 with two cows, 23 with three, 123 with four, and 124 with all five.


Farmer John can first cross with three cows (23 minutes), then return (10 minutes), and then cross with the last two (17 minutes). 23+10+17 = 50 minutes total.

## 题目翻译

### 题目描述
农夫约翰以及他的 $N(1 \le N \le 2500)$ 头奶牛打算过一条河，但他们所有的渡河工具，仅仅是一个木筏。 

由于奶牛不会划船，在整个渡河过程中，约翰必须始终在木筏上。在这个基础上，木筏上的奶牛数目每增加 $1$，FJ把木筏划到对岸就得花更多的时间。 

当约翰一个人坐在木筏上，他把木筏划到对岸需要 $M(1 \le M \le 1000)$ 分钟。当木筏搭载的奶牛数目从 $i-1$ 增加到 $i$ 时，约翰得多花 $M_i(1 \le M_i \le 1000)$ 分钟才能把木筏划过河（也就是说，船上有 $1$ 头奶牛时，约翰得花 $M+M_1$ 分钟渡河；船上有 $2$ 头奶牛时，时间就变成 $M+M_1+M_2$ 分钟。后面的以此类推）。那么，约翰最少要花多少时间，才能把所有奶牛带到对岸呢？当然，这个时间得包括约翰一个人把木筏从对岸划回来接下一批的奶牛的时间。

### 输入格式
* 第一行包含 $2$ 个整型变量 $N$ 和 $M$。
* 第二行包含 $2 ... N + 1$ 个整数，第 $i + 1$ 行包含 $1$ 个整数 $M_i$。

### 输出格式
* 输出共 $1$ 行，为农夫约翰让所有奶牛过河所需的最短时间。


---

---
title: "[USACO08NOV] Buying Hay S"
layout: "post"
diff: 普及/提高-
pid: P2918
tag: ['2008', 'USACO', '背包 DP']
---
# [USACO08NOV] Buying Hay S
## 题目描述

Farmer John is running out of supplies and needs to purchase H (1 <= H <= 50,000) pounds of hay for his cows.

He knows N (1 <= N <= 100) hay suppliers conveniently numbered 1..N. Supplier i sells packages that contain P\_i (1 <= P\_i <= 5,000) pounds of hay at a cost of C\_i (1 <= C\_i <= 5,000) dollars. Each supplier has an unlimited number of packages available, and the packages must be bought whole.

Help FJ by finding the minimum cost necessary to purchase at least H pounds of hay.

约翰的干草库存已经告罄，他打算为奶牛们采购 $H(1 \leq H \leq 50000)$ 磅干草。

他知道 $N(1 \leq N\leq 100)$ 个干草公司，现在用 $1$ 到 $N$ 给它们编号。第 $i$ 公司卖的干草包重量为 $P_i (1 \leq P_i \leq 5,000)$ 磅，需要的开销为 $C_i (1 \leq C_i \leq 5,000)$ 美元。每个干草公司的货源都十分充足， 可以卖出无限多的干草包。

帮助约翰找到最小的开销来满足需要，即采购到至少 $H$ 磅干草。
## 输入格式

\* Line 1: Two space-separated integers: N and H

\* Lines 2..N+1: Line i+1 contains two space-separated integers: P\_i and C\_i

## 输出格式

\* Line 1: A single integer representing the minimum cost FJ needs to pay to obtain at least H pounds of hay.

## 样例

### 样例输入 #1
```
2 15 
3 2 
5 3 

```
### 样例输出 #1
```
9 

```
## 提示

FJ can buy three packages from the second supplier for a total cost of 9.



---

---
title: "[USACO09MAR] Cow Frisbee Team S"
layout: "post"
diff: 普及/提高-
pid: P2946
tag: ['动态规划 DP', '2009', 'USACO', '背包 DP']
---
# [USACO09MAR] Cow Frisbee Team S
## 题目描述

老唐最近迷上了飞盘，约翰想和他一起玩，于是打算从他家的 $N$ 头奶牛中选出一支队伍。

每只奶牛的能力为整数，第 $i$ 头奶牛的能力为 $R_i$。飞盘队的队员数量不能少于 $1$、大于 $N$。一支队伍的总能力就是所有队员能力的总和。

约翰比较迷信，他的幸运数字是 $F$，所以他要求队伍的总能力必须是 $F$ 的倍数。请帮他算一下，符合这个要求的队伍组合有多少？由于这个数字很大，只要输出答案对 $10^8$ 取模的值。
## 输入格式

第一行：两个用空格分开的整数：$N$ 和 $F$。

第二行到 $N+1$ 行：第 $i+1$ 行有一个整数 $R_i$，表示第 $i$ 头奶牛的能力。
## 输出格式

第一行：单个整数，表示方案数对 $10^8$ 取模的值。
## 样例

### 样例输入 #1
```
4 5 
1 
2 
8 
2 

```
### 样例输出 #1
```
3 

```
## 提示

对于 $100\%$ 的数据，$1 \le N \le 2000$，$1 \le F \le 1000$，$1 \le R_i \le 10^5$。


---

---
title: "消失之物"
layout: "post"
diff: 普及/提高-
pid: P4141
tag: ['动态规划 DP', '递推', '枚举', '分治', '背包 DP']
---
# 消失之物
## 题目描述

ftiasch 有 $n$ 个物品, 体积分别是 $w_1,w_2,\dots,w_n$。由于她的疏忽，第 $i$ 个物品丢失了。   

“要使用剩下的 $n-1$ 物品装满容积为 $x$ 的背包，有几种方法呢？”——这是经典的问题了。  

她把答案记为 $\text{cnt}(i,x)$ ，想要得到所有$i \in [1,n]$, $x \in [1,m]$ 的 $\text{cnt}(i,x)$ 表格。

![](https://cdn.luogu.com.cn/upload/pic/13426.png)

## 输入格式

第一行两个整数 $n,m$，表示物品的数量和最大的容积。
第二行 $n$ 个整数 $w_1,w_2,\dots,w_n$，表示每个物品的体积。

## 输出格式

输出一个 $n \times m$ 的矩阵，表示 $\text{cnt}(i,x)$ 的**末位数字**。

## 样例

### 样例输入 #1
```
3 2
1 1 2
```
### 样例输出 #1
```
11
11
21
```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n,m \le 2000$，且 $1\le v_i\le m$。

【样例解释】  
如果物品 3 丢失的话，只有一种方法装满容量是 2 的背包，即选择物品 1 和物品 2。

---

$\text{upd 2023.8.11}$：新增加五组 Hack 数据。



---

---
title: "珈百璃堕落的开始"
layout: "post"
diff: 普及/提高-
pid: P4832
tag: ['动态规划 DP', '背包 DP']
---
# 珈百璃堕落的开始
## 题目背景


“恭喜你，珈百璃，你以学年首席的优秀成绩毕业。”

珈百璃，一位优秀的天使，今天她以学年首席的成绩毕业，从今往后，她将前往人间进行进一步修炼。

“我会努力给人类带来幸福的！”珈百璃憧憬着人间生活。

开学第一天，珈百璃就凭借着她极其可爱的外表，受到了班级成员的追捧，不仅长得可爱，成绩还很优秀，简直就是女神啊！

因为她的成绩优秀，所以她的作业也是很快就快要完成了，但是就在她快完成数学作业时，她的电脑传来了呼救的声音。

“救命啊！”

顺着这个呼救声，珈百璃望向了电脑。

“原来是游戏啊。”珈百璃看着屏幕里一位倒在地上的残血战士，注册了账号，选择了牧师职业，对这位战士进行了救治。在珈百璃开心的同时，越来越多的呼救声传来，珈百璃一个一个进行救治，但她的 level 才 1，mp 肯定不足，当她想要继续进行救治的时候，系统提示 mp 不足，并给出了氪金的提示：“屠龙宝刀，点击就送。”

“生活费天界学院倒是有给，但是……”珈百璃看着自己的存折，再看看屏幕，她纠结不已。

“救命啊！”“救……救命啊……”“救命啊！”珈百璃看着这些人一个个喊出救命，自己却无能为力，终于，她控制不住自己，点下了“氪金”按钮。

从此，珈百璃的堕落就开始了，她的作业，也停在了这道数学题上……

“薇奈特，帮我写一下作业嘛。”珈百璃央求着薇奈特。

“真是的，你好歹也是天使呢，也该自己做一点作业吧。”

“不要，我还要打游戏呢。”

“这怎么行，你是天使啊。”

“我已经决定做一位成天打游戏不学习的堕天使了。”

“真是服了你啊，那你好好打游戏吧，我帮你写。”

## 题目描述

这道题是这样的：给定一些 $\sin^2x$，$\cos^2x\ \left(x=\dfrac{\pi}{7}\right)$ 组成的式子，请你帮忙求出选择一些式子相加后得到的**最大整数答案**。
## 输入格式

第一行一个整数 $n$，表示 $n$ 个式子

接下来 $n$ 行每行一个字符串，由 $f(i)=\sin^2x,\cos^2x$ 和加号组成，$x=\dfrac{\pi}{7}$。

为了简化输入，我们以 `s` 代表 $\sin^2x$，以 `c` 代表 $\cos^2x$，并省略 `f(i)=`。
## 输出格式

一个数表示**最大整数答案**，计算全部为加法。

## 样例

### 样例输入 #1
```
3
s+c
s+c+s
c

```
### 样例输出 #1
```
3
```
## 提示

### 样例解释

三个式子都选，则加起来等于 $3$。

### 数据范围

设 `s` 和 `c` 的个数总和为 $m$。

$10\%$ 的数据 $n=1$。

另外 $20\%$ 的数据每行一个单项式。

另有 $20\%$ 的数据 $n\le20$。

$100\%$ 的数据 $n\times m\le5\times10^7,m\le10^6$。

### 提示

 - $\forall x, \sin^2x+\cos^2x=1$。


---

---
title: "[蓝桥杯 2017 省 AB] 包子凑数"
layout: "post"
diff: 普及/提高-
pid: P8646
tag: ['2017', '数论', '背包 DP', '蓝桥杯省赛']
---
# [蓝桥杯 2017 省 AB] 包子凑数
## 题目描述

小明几乎每天早晨都会在一家包子铺吃早餐。他发现这家包子铺有 $N$ 种蒸笼，其中第 $i$ 种蒸笼恰好能放 $A_i$ 个包子。每种蒸笼都有非常多笼，可以认为是无限笼。

每当有顾客想买 $X$ 个包子，卖包子的大叔就会迅速选出若干笼包子来，使得这若干笼中恰好一共有 $X$ 个包子。比如一共有 $3$ 种蒸笼，分别能放 $3$ 、 $4$ 和 $5$ 个包子。当顾客想买 $11$ 个包子时，大叔就会选 $2$ 笼 $3$ 个的再加 $1$ 笼 $5$ 个的（也可能选出 $1$ 笼 $3$ 个的再加 $2$ 笼 $4$ 个的）。

当然有时包子大叔无论如何也凑不出顾客想买的数量。比如一共有 $3$ 种蒸笼，分别能放 $4$ 、 $5$ 和 $6$ 个包子。而顾客想买 $7$ 个包子时，大叔就凑不出来了。

小明想知道一共有多少种数目是包子大叔凑不出来的。
## 输入格式


第一行包含一个整数 $N$。$(1 \le N \le 100)$。

以下 $N$ 行每行包含一个整数 $A_i$。$(1 \le A_i \le 100)$。
## 输出格式

一个整数代表答案。如果凑不出的数目有无限多个，输出 `INF`。
## 样例

### 样例输入 #1
```
2  
4  
5  
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
2  
4  
6   
```
### 样例输出 #2
```
INF
```
## 提示

对于样例 $1$，凑不出的数目包括：$1,2,3,6,7,11$。

对于样例 $2$，所有奇数都凑不出来，所以有无限多个。

蓝桥杯 2017 省赛 A 组 H 题。


---

---
title: "Colo."
layout: "post"
diff: 普及/提高-
pid: P9688
tag: ['动态规划 DP', '洛谷原创', 'O2优化', '背包 DP', '洛谷月赛']
---
# Colo.
## 题目描述

小 F 和小 Y 经常在一起玩耍，因为小 F 是一个画家，他喜欢在一个长度为 $n$，宽度为 $1$ 的网格图上画画，从左往右第 $i$ 个方格被涂成了一种颜色 $a_i$。

你觉得他的随意涂鸦太难看了，想要保留恰好 $k$ 种颜色（**你不能保留没在网格图上出现的颜色**），使得网格图上没被涂成任何一种你喜欢的颜色的网格都被剪掉，最后会剩下一些网格，你希望这些网格从左到右颜色的编号是单调不下降的。

此外，小 Y 使用的第 $i$ 种颜色有一个价值 $b_i$，小 Y 看到了你裁剪后的网格图很是高兴，于是决定付给你你选择的颜色的价值总和。

你需要求出你能够获得的最大的价值是多少。
## 输入格式

第一行两个整数 $n,k$，表示小 Y 画画的网格图的大小和你需要保留颜色的种类数。   
第二行 $n$ 个整数 $a_i$，表示小 Y 画出来的网格图从左往右第 $i$ 个格子的颜色。  
第三行 $n$ 个整数 $b_i$，表示第 $i$ 种颜色的价值。
## 输出格式

一行一个整数，表示你能够获得的最大价值；特别地，如果无法找到选择颜色的方法满足要求，输出 $-1$。
## 样例

### 样例输入 #1
```
5 2
1 2 1 3 2
5 3 1 100 100
```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
10 3
1 3 4 2 9 3 4 2 5 1
1 5 2 3 9 8 1 2 3 10
```
### 样例输出 #2
```
-1
```
## 提示

#### 【样例解释 #1】

对于第一组样例，我们可以选择 $1$ 号和 $3$ 号颜色保留，剩下的网格图即为 $[1,1,3]$，满足单调不下降这一个限制，获得的价值即为 $b_1+b_3=5+1=6$，可以证明这是最优的办法。

#### 【数据范围】

对于所有测试数据，满足 $1 \le n \le 500$，$1 \le k \le 500$，$1 \le a_i \le n$，$1 \le b_i \le 10^9$。

**本题开启捆绑测试，所有数据范围均相同的测试点捆绑为一个 $\text{Subtask}$。**

各测试点的附加限制如下表所示。

| 测试点 | $n,k \le $ | 特殊性质 |
| :-----------: | :-----------: | :-----------: |
| $1 \sim 3$ | $10$ | 无 |
| $4 \sim 5$ | $100$ | 无 |
| $6 \sim 10$ | $500$ | 不同的颜色不超过 $10$ 种 |
| $11 \sim 15$ | $500$ | 每种颜色出现的次数不超过 $2$ 次 |
| $16 \sim 20$ | $500$ | 无 |



---


---
title: "[信息与未来 2018] 棋盘游戏"
layout: "post"
diff: 普及/提高-
pid: B3740
tag: ['搜索', '贪心', '2018', '江苏', '进制', '信息与未来']
---
# [信息与未来 2018] 棋盘游戏
## 题目描述

给定一个十进制数 $x$，将它转换为二进制字符串并在高位填 $0$ 以补足 $16$ 位，就得到了
一个长度为 $16$ 的 $01$ 字符串，我们用这个字符串表示 $4 × 4$ 的棋盘，按从左到右、从上到下的顺序将 $0$（白子）、$1$（黑子）放入棋盘。

例如，$(447)_{10} = (0000 0001 1011 1111)_2$，按顺序填入棋盘（$0$ 白子、$1$ 黑子），得到如下棋盘（左边棋盘）：

![](https://cdn.luogu.com.cn/upload/image_hosting/vyma7pie.png)

我们现在可以交换棋盘中**相邻**（共享一条边的两个格子相邻，因此一个格子至多有 $4$ 个相邻的格子）的黑色和白色棋子。从左图的棋盘变为全部白子在上、全部黑子在下（右边棋盘所示）的棋盘，至少需要 $3$ 步。

对于给定的棋盘（保证棋盘中恰好有 $8$ 个白子和 $8$ 个黑子），求把棋盘变为全部白子在上、全部黑子在下最少的交换步数。
## 输入格式

输入一行一个整数 $x$，为十进制表示下的棋盘。
## 输出格式

输出一行一个整数，最少需要交换的步数。
## 样例

### 样例输入 #1
```
447
```
### 样例输出 #1
```
3
```
### 样例输入 #2
```
42405
```
### 样例输出 #2
```
8
```
## 提示

### 样例解释
#### 样例 $1$
参考上图，将 $(2, 4)$ 处的⿊⼦移动到 $(3, 2)$ 需要 $3$ 步。
#### 样例 $2$
如下图所示，$(42405)_{10} =(1010 0101 1010 0101)_2$。

![](https://cdn.luogu.com.cn/upload/image_hosting/aie8kf0n.png)
### 数据规模
$50\%$ 的测试数据满足棋盘可以在 $6$ 次交换内变为白子在上、黑子在下。

所有数据保证 $0 ≤ x < 2^{16}$，且 $x$ 转换为二进制后恰好有 $8$ 个 $1$。

> 本题原始满分为 $20\text{pts}$。


---

---
title: "[信息与未来 2019] 堆栈计算机"
layout: "post"
diff: 普及/提高-
pid: B3753
tag: ['2019', '江苏', 'Special Judge', '进制', '栈', '构造', '信息与未来']
---
# [信息与未来 2019] 堆栈计算机
## 题目描述

有一种新型的堆栈计算机，计算机的内存是一个初始为空的数列，计算机支持三种操作：
- $\tt 1$ - 将整数 $1$ 放入数列的尾部。任意时刻都可执行此操作。
- $\tt dup$ - 将数列尾部的数字复制一份，放入数列尾部。只有数列非空时才能执行此操作。
- $\tt add$ - 取出（并删除）数列尾部的两个数字，相加后放回数列的尾部。只有数列中至少有两个数字时才能执行此操作。

给定一个正整数，你需要输出一个长度不超过 $200$ 的程序（操作的序列），它在执行结束后，恰好得到一个长度为 $1$ 的数列，并且数列中的数字恰好为 $n$。下图展示了一个最终得到 $8$ 的程序。

![](https://cdn.luogu.com.cn/upload/image_hosting/unim6xbj.png)


## 输入格式

输入一行一个正整数 $n$，表示希望输出的数字。
## 输出格式

输出一个若干行（不超过 $200$ 行，否则判为不正确）的满足上述要求的程序。如有多种方案，输出任意一种即可。注意 $\tt dup$ 和 $\tt add$ 均为小写。
## 样例

### 样例输入 #1
```
1
```
### 样例输出 #1
```
1
```
### 样例输入 #2
```
8
```
### 样例输出 #2
```
1
1
add
dup
add
dup
add
```
## 提示

对于 $60\%$ 的测试数据，有 $1\le n\le10^4$。

对于 $100\%$ 的测试数据，有 $1\le n\le10^9$。
> 本题原始满分为 $15\text{pts}$。


---

---
title: "[SNCPC2024] 下棋"
layout: "post"
diff: 普及/提高-
pid: P10702
tag: ['2024', '数论', 'O2优化', '陕西', '进制', 'XCPC']
---
# [SNCPC2024] 下棋
## 题目描述

LNC 喜欢所有 $k$ 进制下所有数位的乘积为自身因子的数。他称之为 LNC 数。例如：

当 $k = 10$ 时，$y = (36)_{10}$ 是 LNC 数，因为 $(3 \times 6) \mid 36$。

当 $k = 4$ 时，$y = (12)_4$ 是 LNC 数，因为转换成十进制后 $(12)_4 = (6)_{10}$，而 $(1 \times 2) \mid 6$。

当 $k = 2$ 时，$y = (1101)_2$ 不是 LNC 数，因为转换成十进制后 $(1101)_2 = (13)_{10}$，而 $0$ 不是 $13$ 的因子。

LNC 在和 LJJ 玩一个游戏，LJJ 给出 $x$ 枚棋子，然后 LNC 选定一个整数 $k$ ($k \geq 2$)。随后他们交替取走若干枚棋子，要求取走的棋子数量是 $k$ 进制意义下的 LNC 数。LNC 先手，先取完的获胜。两个人都绝顶聪明，故都会选择最优的策略。

LJJ 觉得这个游戏很不公平，他们一共玩了 $T$ 局游戏，对于每局游戏他给出的 $x$，他希望知道最小的 $k$ 使得 LNC 先手必胜。
## 输入格式

输入第一行一个正整数 $T$ ($1 \le T \le 1 \times 10^2$)，表示数据组数。

接下来 $T$ 行每行一个正整数 $x$ ($3 \le x \le 10^{18}$)，表示 LJJ 给出的数 $x$。
## 输出格式

输出 $T$ 行每行一个正整数 $k$，表示每个询问的最小的 $k$，使 LNC 先手必胜。
## 样例

### 样例输入 #1
```
3
9
5
10

```
### 样例输出 #1
```
2
2
3

```
## 提示



当 $x=5$ 的时候，LNC 可以选择 $k=2$。$x=(5)_{10}=(101)_2$。

LNC 先手拿掉 $(11)_2$，此时 $x=(10)_2$，LJJ 只能拿走 $(1)_2$，LNC 拿走最后的 $(1)_2$ 获胜。

又因为 $k=2$ 已经不能再小了，所以最终答案为 $k=2$。 


---

---
title: "『SpOI - R1』强大到让你们所有人注视"
layout: "post"
diff: 普及/提高-
pid: P10791
tag: ['O2优化', '进制', '前缀和']
---
# 『SpOI - R1』强大到让你们所有人注视
## 题目描述

**本题包含多组测试。**

给定一个 $n$ 位的 $k$ 进制大数。

令 $S(l,r)$ 表示截取这个 $k$ 进制大数从高到低第 $l$ 位至第 $r$ 位构成的新 $k$ 进制数。

你需要求出 $\sum\limits_{1\leq l\leq r\leq n} S(l,r)$，注意这里的求和也建立在 $k$ 进制下。

由于答案可能很大，设 $(20070720)_{10}$ 在 $k$ 进制下是 $x$，你只需要输出答案对 $x$ 取模的结果。

**再次提醒：以上所有求和、运算和取值都建立在 $k$ 进制下。**
## 输入格式

第一行一个整数 $T$，表示数据组数。

每组数据第一行两个正整数 $n,k$，表示这个大数。

每组数据第二行一个数列 $a$，从高位至低位依次表示这个大 $k$ 进制数的每一位上的数。保证 $\forall i\in[1,n],0\leq a_i<k$。
## 输出格式

每组数据一行，表示答案对 $x$ 取模的结果。由于这也是一个 $k$ 进制数，所以用空格隔开依次输出每一位。

**注意你的输出中不应含有前导零。**
## 样例

### 样例输入 #1
```
1
3 2
1 1 0
```
### 样例输出 #1
```
1 1 0 1
```
### 样例输入 #2
```
1
2 20070721
20070720 1
```
### 样例输出 #2
```
2
```
## 提示

#### 样例 #1 解释

所有的 $S(l,r)$：$(1)_2,(1)_2,(0)_2,(11)_2,(10)_2,(110)_2$，把它们在 $2$ 进制下相加得到 $(1101)_2$，再在 $2$ 进制下对 $(20070720)_{10}=(1001100100100000101000000)_2$ 取模即可得到答案 $(1101)_2$。

#### 样例 #2 解释

对于这个数，$S(1,1)$ 显然被 $(\overline{20070720})_{20070721}$ 整除，$S(2,2),S(1,2)$ 被 $(\overline{20070720})_{20070721}$ 除后都余 $1$。所以取模后的答案是 $(2)_{20070721}$。

### 数据范围

**本题开启子任务捆绑与子任务依赖。**

对于 $100\%$ 的数据，$1\leq T\leq 10$，$1\leq n\leq 5\times 10^5$，$0\leq a_i<k\leq 10^9$，$2\leq k\leq 10^9$。$k$ 进制大数可能含有前导零。

| Subtask | $T\leq$ | $n\leq$ | 特殊性质 | 得分 | 子任务依赖 |
| :-----------: | :-----------: | :-----------: | :-----------: | :-----------: | :-----------: |
| 1 | $10$ | $100$ | 无 | $25$ | 无 |
| 2 | $1$ | $5\times 10^3$ | $k>20070720$ | $20$ | 无 |
| 3 | $1$ | $8\times 10^3$ | 无 | $25$ | 1,2 |
| 4 | $5$ | $5\times 10^5$ | 无 | $30$ | 1,2,3 |


---

---
title: "波浪数"
layout: "post"
diff: 普及/提高-
pid: P1112
tag: ['搜索', '数学', '进制', '构造']
---
# 波浪数
## 题目描述

波浪数是在一对**不同**数字之间交替转换的数，如 $1212121$，双重波浪数则是指在两种进制下都是波浪数的数，如十进制数 $191919$ 是一个十进制下的波浪数，它对应的十一进制数 $121212$ 也是一个波浪数，所以十进制数 $191919$ 是一个双重波浪数。特别地，只有一位的数也算作波浪数，例如 $1$。

类似的可以定义三重波浪数，三重波浪数在三种不同的进制中都是波浪数，甚至还有四重波浪数，如 $300_{(10)}=606_{(7)}=363_{(9)}=454_{(8)}=1\mathtt{A}1_{(13)}$，下标表示采用的进制。你的任务就是在指定范围内找出双重、三重、四重波浪数。

## 输入格式

单独一行包含五个用空格隔开的十进制整数 $l, r, L, R, k$。$[l, r]$ 表示应当考虑的进制的范围，$[L,R]$ 表示应当考虑的数字的范围，$k$ 表示你应该找的波浪数的重数。
## 输出格式

从小到大以十进制形式输出指定范围内的指定重数的波浪数。一行输出一个数。

## 样例

### 样例输入 #1
```
10 11 190000 960000 2
```
### 样例输出 #1
```
191919
383838
575757
767676
959595
```
## 提示

### 数据范围及约定

对于全部数据，保证 $2\le l\le r\le 32$，$1\le L\le R\le 10^7$，$k\in \{2, 3, 4\}$。


---

---
title: "[GCJ 2011 Qualification] Candy Splitting"
layout: "post"
diff: 普及/提高-
pid: P13363
tag: ['贪心', '2011', '进制', '位运算', 'Google Code Jam']
---
# [GCJ 2011 Qualification] Candy Splitting
## 题目描述

Sean and Patrick are brothers who just got a nice bag of candy from their parents. Each piece of candy has some positive integer value, and the children want to divide the candy between them. First, Sean will split the candy into two piles, and choose one to give to Patrick. Then Patrick will try to calculate the value of each pile, where the value of a pile is the sum of the values of all pieces of candy in that pile; if he decides the piles don't have equal value, he will start crying.

Unfortunately, Patrick is very young and doesn't know how to add properly. He *almost* knows how to add numbers in binary; but when he adds two 1s together, he always forgets to carry the remainder to the next bit. For example, if he wants to sum 12 (1100 in binary) and 5 (101 in binary), he will add the two rightmost bits correctly, but in the third bit he will forget to carry the remainder to the next bit:

```
  1100
+ 0101
------
  1001
```

So after adding the last bit without the carry from the third bit, the final result is 9 (1001 in binary). Here are some other examples of Patrick's math skills:

```
5 + 4 = 1
7 + 9 = 14
50 + 10 = 56
```

Sean is very good at adding, and he wants to take as much value as he can without causing his little brother to cry. If it's possible, he will split the bag of candy into two non-empty piles such that Patrick thinks that both have the same value. Given the values of all pieces of candy in the bag, we would like to know if this is possible; and, if it's possible, determine the maximum possible value of Sean's pile.
## 输入格式

The first line of the input gives the number of test cases, $T$. $T$ test cases follow. Each test case is described in two lines. The first line contains a single integer $N$, denoting the number of candies in the bag. The next line contains the $N$ integers $C_i$ separated by single spaces, which denote the value of each piece of candy in the bag.

## 输出格式

For each test case, output one line containing "Case #x: y", where $x$ is the case number (starting from 1). If it is impossible for Sean to keep Patrick from crying, $y$ should be the word "NO". Otherwise, $y$ should be the value of the pile of candies that Sean will keep.
## 样例

### 样例输入 #1
```
2
5
1 2 3 4 5
3
3 5 6
```
### 样例输出 #1
```
Case #1: NO
Case #2: 11
```
## 提示

**Limits**

- $1 \leq T \leq 100$.
- $1 \leq C_i \leq 10^6$.

**Small dataset (10 Pts, Test set 1 - Visible)**

- $2 \leq N \leq 15$.
- Time limit: ~~30~~ 3 seconds.

**Large dataset (15 Pts, Test set 2 - Hidden)**

- $2 \leq N \leq 1000$.
- Time limit: ~~60~~ 6 seconds.


---

---
title: "[USACO2.1] 海明码 Hamming Codes"
layout: "post"
diff: 普及/提高-
pid: P1461
tag: ['搜索', 'USACO', '进制', '位运算']
---
# [USACO2.1] 海明码 Hamming Codes
## 题目描述

给出 $n,b,d$，要求找出 $n$ 个由 $0,1$ 组成的编码，每个编码有 $b$ 位），使得两两编码之间至少有 $d$ 个单位的 “Hamming距离”。“  

Hamming距离”是指对于两个编码，他们二进制表示法中的不同二进制位的数目。看下面的两个编码 `0x554` 和 `0x234`（十六进制数）

```
0x554 = 0101 0101 0100
0x234 = 0010 0011 0100
不同位    xxx  xx
```

因为有五个位不同，所以“Hamming距离”是 $5$。

## 输入格式

一行，包括 $n,b,d$。

## 输出格式

$n$ 个编码（用十进制表示），要排序，十个一行。  
如果有多解，你的程序要输出这样的解：假如把它化为 $2^b$ 进制数，它的值要最小。

## 样例

### 样例输入 #1
```
16 7 3
```
### 样例输出 #1
```
0 7 25 30 42 45 51 52 75 76
82 85 97 102 120 127
```
## 提示

【数据范围】  
对于 $100\%$ 的数据，$1\le n \le 64$，$1\le b \le 8$，$1\le d \le 7$。

请解释：“必须与其他所有的数相比，Hamming 距离都符合要求，这个数才正确”

答：如样例输出，$0,7$，$0,25$，比较都符合海明码，同样 $7,25$，$7,30$，比较也符合要求，以此类推。题中至少有 $d$ 个单位，意思就是大于等于 $d$ 个单位的都可以。


USACO 2.1

翻译来自NOCOW



---

---
title: "[USACO2.3] 零的数列 Zero Sum"
layout: "post"
diff: 普及/提高-
pid: P1473
tag: ['字符串', '搜索', '数学', 'USACO', '进制']
---
# [USACO2.3] 零的数列 Zero Sum
## 题目描述

请考虑一个由 $1$ 到 $N$ 的数字组成的递增数列：$1, 2, 3, \ldots, N$。

现在请在数列中插入 `+` 表示加，或者 `-` 表示减，` `（空格） 表示空白（例如 `1-2 3` 就等于 `1-23`），来将每一对数字组合在一起（请不要在第一个数字前插入符号）。

计算该表达式的结果并判断其值是否为 $0$。 请你写一个程序找出所有产生和为零的长度为N的数列。

## 输入格式

单独的一行表示整数 $N$（$3 \leq N \leq 9$）。

## 输出格式

按照 ASCI I码的顺序，输出所有在每对数字间插入 `+`，`-`，` `（空格） 后能得到结果为零的数列。

## 样例

### 样例输入 #1
```
7

```
### 样例输出 #1
```
1+2-3+4-5-6+7
1+2-3-4+5+6-7
1-2 3+4+5+6+7
1-2 3-4 5+6 7
1-2+3+4-5+6-7
1-2-3-4-5+6+7
```
## 提示

翻译来自NOCOW

USACO 2.3



---

---
title: "尴尬的数字"
layout: "post"
diff: 普及/提高-
pid: P1555
tag: ['模拟', '数学', 'USACO', '枚举', '进制']
---
# 尴尬的数字
## 题目背景

Bessie 刚刚学会了不同进制数之间的转换，但是她总是犯错误，因为她的两个前蹄不能轻松的握住钢笔。

## 题目描述

每当 Bessie 将一个数转换成新的进制时，她总会写错一位数字。例如，她将 14 转化成 2 进制数，正确的结果是 1110，但她可能会写成 0110 或 1111。Bessie 从不会意外的增加或删减数字，所以她可能会写出以 0 开头的错误数字。

给出 Bessie 转换后 $N$ 的 2 进制形式和 3 进制形式，请计算出 $N$ 的正确数值（用十进制表示）。$N$ 可能会达到 $10^9$，输入数据保证解的存在唯一性。

## 输入格式

第一行，$N$ 的 2 进制表示（有一位是错误的数字）。

第二行，$N$ 的 3 进制表示（有一位是错误的数字）。
## 输出格式

$N$ 的正确值。

## 样例

### 样例输入 #1
```
1010
212
```
### 样例输出 #1
```
14
```


---

---
title: "还是 N 皇后"
layout: "post"
diff: 普及/提高-
pid: P1562
tag: ['搜索', '进制', '位运算']
---
# 还是 N 皇后
## 题目描述

正如题目所说，这题是著名的 $N$ 皇后问题。

## 输入格式

第一行有一个 $N$。接下来有 $N$ 行 $N$ 列描述一个棋盘，`*` 表示可放，`.` 表示不可放。

## 输出格式

输出方案总数。
## 样例

### 样例输入 #1
```
4
**.*
****
****
****
```
### 样例输出 #1
```
1
```
## 提示

$0< n\le14$



---

---
title: "倒水"
layout: "post"
diff: 普及/提高-
pid: P1582
tag: ['枚举', '进制']
---
# 倒水
## 题目描述

一天，CC 买了 $N$ 个容量可以认为是无限大的瓶子，开始时每个瓶子里有 $1$ 升水。接着 CC 发现瓶子实在太多了，于是他决定保留不超过 $K$ 个瓶子。每次他选择两个当前含水量相同的瓶子，把一个瓶子的水全部倒进另一个里，然后把空瓶丢弃。（不能丢弃有水的瓶子）

显然在某些情况下 CC 无法达到目标，比如 $N = 3$、$K = 1$。此时 CC 会重新买一些新的瓶子（新瓶子容量无限，开始时有 $1$ 升水），以达到目标。

现在 CC 想知道，最少需要买多少新瓶子才能达到目标呢？

## 输入格式

一行两个正整数 $N, K$（$1 \le N \le 2 \times 10^9$，$K \le 1000$）。
## 输出格式

一个非负整数，表示最少需要买多少新瓶子。

## 样例

### 样例输入 #1
```
3 1

```
### 样例输出 #1
```
1

```
### 样例输入 #2
```
13 2
```
### 样例输出 #2
```
3
```
### 样例输入 #3
```
1000000 5
```
### 样例输出 #3
```
15808
```


---

---
title: "失踪的7"
layout: "post"
diff: 普及/提高-
pid: P1590
tag: ['模拟', '字符串', '数学', '进制']
---
# 失踪的7
## 题目描述

远古的 Pascal 人也使用阿拉伯数字来进行计数，但是他们又不喜欢使用 $7$ ，因为他们认为 $7$ 是一个不吉祥的数字，所以 Pascal 数字 $8$ 其实表示的是自然数中的 $7$，$18$ 表示的是自然数中的 $16$ 。请计算，在正整数 $n$ 范围以内包含有多少个 Pascal 数字。

## 输入格式

第一行为正整数 $t$，接下来 $t$ 行，每行一个正整数 $n$，且保证输入 $n$ 的是 Pascal 数字


## 输出格式

对于每个正整数 $n$，输出 $n$ 以内的 Pascal 数的个数。

## 样例

### 样例输入 #1
```
2
10
20
```
### 样例输出 #1
```
9
18
```
## 提示

对于所有数据，$1 \leq t \leq 10000$，$1 \leq n \leq 2^{32}-1$。


---

---
title: "数列之异或"
layout: "post"
diff: 普及/提高-
pid: P3908
tag: ['数学', '递归', '进制']
---
# 数列之异或
## 题目描述

求$1 \bigoplus 2 \bigoplus\cdots\bigoplus N$ 的值。

$A \bigoplus B$ 即$A$ , $B$ 按位异或。

## 输入格式

1 个整数$N$。

## 输出格式

1 个整数，表示所求的值。

## 样例

### 样例输入 #1
```
3
```
### 样例输出 #1
```
0
```
## 提示

• 对于50% 的数据，$1 \le N \le 10^6$；

• 对于100% 的数据，$1 \le N \le 10^{18}$。



---

---
title: "「EZEC-2」异或"
layout: "post"
diff: 普及/提高-
pid: P6599
tag: ['数学', '贪心', '进制', '位运算', '构造']
---
# 「EZEC-2」异或
## 题目描述

有 $T$ 组询问，每次给定两个正整数 $n,l$，   

你需要构造一个长度为 $l$ 的正整数序列 $a$（编号从 $1$ 至 $l$），   

且满足 $\forall i\in[1,l]$，都有 $a_i\in[1,n]$。

求：

$$\sum_{i=1}^l\sum_{j=1}^{i-1}a_i\oplus a_j$$

的最大值。

为了避免答案过大，对于每组询问，只需要输出这个最大值对 $10^9+7$ 取模的结果。
## 输入格式

第一行一个整数 $T$，表示数据组数。

接下来第 $2$ 行到第 $T+1$ 行，每行两个整数 $n,l$ ，分别代表 $a_i$ 的最大取值与 $a$ 的长度。 

## 输出格式

共 $T$ 行，每行一个整数，对应每组询问的答案对 $10^9+7$ 取模的结果。
## 样例

### 样例输入 #1
```
1
2 3

```
### 样例输出 #1
```
6
```
### 样例输入 #2
```
2
114 514
1919 180

```
### 样例输出 #2
```
8388223
16580700
```
## 提示

**【样例解释 #1】**   
当 $n=2,l=3$，$a$ 取 $\{1,2,1\}$ 的任一排列时可以得到最大值，为 $(1\oplus2)+(1\oplus1)+(2\oplus1)=6$，易证明此时原式有最大值。

---
**【数据规模与约定】**
| 测试点编号 | $T\le$ | $n\le$ | $l\le$ |
| :----------: | :----------: | :----------: | :----------: |
| $1\sim5$ | $1$ | $10$ | $5$ |
| $6$ | $5\times 10^5$ | $10^{12}$ | $2$ |
| $7$ | $5\times 10^5$ | $10^{12}$ | $3$ |
| $8\sim10$ | $5\times 10^5$ | $10^{12}$ | $10^5$ |

对于 $100\%$ 的数据，满足 $1\le T\le 5\times10^5$，$1\le n\le 10^{12}$，$2\le l \le 10^5$。


---
**【提示】**

1. 「$\oplus$」是按位异或符号。如果您不知道什么是按位异或，可以参考[这里](https://oi-wiki.org/math/bit/#_1)。
2. 取模是一种运算，$a$ 对 $b$ 取模代表将 $a$ 赋值为 $a$ 除以 $b$ 所得到的余数。  
在 C++ / Python 中的取模符号为 `%`，在 Pascal 中的取模符号为 `mod`。
3. $\sum$ 是求和符号。如果您不知道什么是 $\sum$ 符号，可以参考[这里](https://baike.baidu.com/item/∑/1233796?fr=aladdin)。
4. 请注意数据的读入输出对程序效率造成的影响。


---

---
title: "[CSP-S2020] 动物园"
layout: "post"
diff: 普及/提高-
pid: P7076
tag: ['数学', '贪心', '2020', '进制', '位运算', 'CSP-S 提高级']
---
# [CSP-S2020] 动物园
## 题目描述

动物园里饲养了很多动物，饲养员小 A 会根据饲养动物的情况，按照《饲养指南》购买不同种类的饲料，并将购买清单发给采购员小 B。 

具体而言，动物世界里存在 $2^k$ 种不同的动物，它们被编号为 $0 \sim 2^k - 1$。动物园里饲养了其中的 $n$ 种，其中第 $i$ 种动物的编号为 $a_i$。

《饲养指南》中共有 $m$ 条要求，第 $j$ 条要求形如“如果动物园中饲养着某种动物，满足其编号的二进制表示的第 $p_j$ 位为 $1$，则必须购买第 $q_j$ 种饲料”。其中饲料共有 $c$ 种，它们从 $1 \sim c$ 编号。本题中我们将动物编号的二进制表示视为一个 $k$ 位 01 串，第 $0$ 位是最低位，第 $k - 1$ 位是最高位。 

根据《饲养指南》，小 A 将会制定饲料清单交给小 B，由小 B 购买饲料。清单形如一个 $c$ 位 $01$ 串，第 $i$ 位为 $1$ 时，表示需要购买第 $i$ 种饲料；第 $i$ 位为 $0$ 时，表示不需要购买第 $i$ 种饲料。 实际上根据购买到的饲料，动物园可能可以饲养更多的动物。更具体地，如果将当前未被饲养的编号为 $x$ 的动物加入动物园饲养后，饲料清单没有变化，那么我们认为动物园当前还能饲养编号为 $x$ 的动物。

现在小 B 想请你帮忙算算，动物园目前还能饲养多少种动物。
## 输入格式

第一行包含四个以空格分隔的整数 $n, m, c, k$。  
分别表示动物园中动物数量、《饲养指南》要求数、饲料种数与动物编号的二进制表示位数。   
第二行 $n$ 个以空格分隔的整数，其中第 $i$ 个整数表示 $a_i$。  
接下来 $m$ 行，每行两个整数 $p_i, q_i$ 表示一条要求。  
数据保证所有 $a_i$ 互不相同，所有的 $q_i$ 互不相同。
## 输出格式

仅一行一个整数表示答案。
## 样例

### 样例输入 #1
```
3 3 5 4
1 4 6
0 3
2 4
2 5
```
### 样例输出 #1
```
13
```
### 样例输入 #2
```
2 2 4 3
1 2
1 3
2 4
```
### 样例输出 #2
```
2
```
### 样例输入 #3
```
见附件中的 zoo/zoo3.in
```
### 样例输出 #3
```
见附件中的 zoo/zoo3.ans
```
## 提示

**【样例 #1 解释】**

动物园里饲养了编号为 $1, 4, 6$ 的三种动物，《饲养指南》上的三条要求为：

1. 若饲养的某种动物的编号的第 $0$ 个二进制位为 $1$，则需购买第 $3$ 种饲料。
2. 若饲养的某种动物的编号的第 $2$ 个二进制位为 $1$，则需购买第 $4$ 种饲料。
3. 若饲养的某种动物的编号的第 $2$ 个二进制位为 $1$，则需购买第 $5$ 种饲料。 

饲料购买情况为：

1. 编号为 $1$ 的动物的第 $0$ 个二进制位为 $1$，因此需要购买第 $3$ 种饲料；
2. 编号为 $4, 6$ 的动物的第 $2$ 个二进制位为 $1$，因此需要购买第 $4, 5$ 种饲料。 

由于在当前动物园中加入一种编号为 $0, 2, 3, 5, 7, 8, \ldots , 15$ 之一的动物，购物清单都不会改变，因此答案为 $13$。

**【数据范围】**

对于 $20 \%$ 的数据，$k \le n \le 5$，$m \le 10$，$c \le 10$，所有的 $p_i$ 互不相同。  
对于 $40 \%$ 的数据，$n \le 15$，$k \le 20$，$m \le 20$，$c \le 20$。  
对于 $60 \%$ 的数据，$n \le 30$，$k \le 30$，$m \le 1000$。  
对于 $100 \%$ 的数据，$0 \le n, m \le 10^6$，$0 \le k \le 64$，$1 \le c \le 10^8$。


---

---
title: "[COCI 2011/2012 #1] X3"
layout: "post"
diff: 普及/提高-
pid: P7627
tag: ['2011', '进制', 'COCI（克罗地亚）']
---
# [COCI 2011/2012 #1] X3
## 题目描述

给定一个长度为 $N$ 的序列 $A_1,A_2,...,A_N$，求序列元素两两异或的总和。
## 输入格式

输入的第一行包含一个正整数 $N$。

接下来 $N$ 行每行包含一个正整数 $A_i$。
## 输出格式

输出一行一个整数，表示两两异或后的总和。
## 样例

### 样例输入 #1
```
2
19
10
```
### 样例输出 #1
```
25
```
### 样例输入 #2
```
3
7
3
5
```
### 样例输出 #2
```
12
```
### 样例输入 #3
```
5
9
13
1
9
6
```
### 样例输出 #3
```
84
```
## 提示

#### 【样例 2 解释】

$A_1 ⊕ A_2 = 4$，$A_1 ⊕ A_3 = 2$，$A_2 ⊕ A_3 = 6$，$4 + 2 + 6 = 12$，因此答案为 $12$。

#### 【数据范围】

对于 $100\%$ 的数据，$1 \le N \le 10^6$，$1 \le A_i \le 10^6$。

#### 【说明】

本题分值按 COCI 原题设置，满分 $110$。

题目译自 **[COCI2011-2012](https://hsin.hr/coci/archive/2011_2012/) [CONTEST #1](https://hsin.hr/coci/archive/2011_2012/contest1_tasks.pdf)** ___T3 X3___。


---

---
title: "[BalticOI 2004] SCALES (Day 1)"
layout: "post"
diff: 普及/提高-
pid: P7649
tag: ['高精度', '2004', '进制', 'BalticOI（波罗的海）']
---
# [BalticOI 2004] SCALES (Day 1)
## 题目描述

给您一个平衡的臂秤，一组砝码和一个物体。这些砝码的重量为 $1,3,9,27,81, \cdots$，即每个砝码的重量为 $3$ 的幂，对于每个整数 $k≥0$ 正好有一块砝码重量 $3^k$。物体的重量是 $m$，其中 $m$ 是正整数。你的任务是把物体放在左边的秤盘上，然后把一些砝码放在左右一个或两个秤盘上，使得秤平衡。  
## 输入格式

第一行包含一个整数 $m$。
## 输出格式

第一行包含有关放在左秤盘上砝码的信息，第一个数字必须为非负整数――放在左秤盘上的砝码个数，然后是各砝码重量且按递增顺序，数字必须用单个空格分隔。第二行包含与第一行相同格式的有关放置在右秤盘上的砝码的信息。
## 样例

### 样例输入 #1
```
42
```
### 样例输出 #1
```
3 3 9 27
1 81
```
### 样例输入 #2
```
30
```
### 样例输出 #2
```
0
2 3 27
```
## 提示

#### 数据规模与约定  
对于 $100 \%$ 的数据，$1 \le m \le 10^{100}$。
#### 题目说明  
来源于 [Baltic Olympiad in Informatics 2004](http://www.boi2004.lv/) 的 [Day 1:SCALES](http://www.boi2004.lv/Uzd_diena1.pdf)。  
由 @[求学的企鹅](/user/271784) 翻译整理。


---

---
title: "[蓝桥杯 2020 国 ABC] 皮亚诺曲线距离"
layout: "post"
diff: 普及/提高-
pid: P8730
tag: ['模拟', '2020', '进制', '蓝桥杯国赛']
---
# [蓝桥杯 2020 国 ABC] 皮亚诺曲线距离
## 题目描述

皮亚诺曲线是一条平面内的曲线。

下图给出了皮亚诺曲线的 1 阶情形, 它是从左下角出发, 经过一个 $3 \times 3$ 的 方格中的每一个格子, 最终到达右上角的一条曲线。

![](https://luogu.oss-cn-hangzhou.aliyuncs.com/upload/vjudge_pic/lanqiao/2022_09_30_334c51de49a3a8e7ba1bg-05.jpg)

下图给出了皮亚诺曲线的 2 阶情形, 它是经过一个 $3^{2} \times 3^{2}$ 的方格中的每一 个格子的一条曲线。它是将 1 阶曲线的每个方格由 1 阶曲线替换而成。

![](https://luogu.oss-cn-hangzhou.aliyuncs.com/upload/vjudge_pic/lanqiao/2022_09_30_334c51de49a3a8e7ba1bg-06.jpg)

下图给出了皮亚诺曲线的 3 阶情形, 它是经过一个 $3^{3} \times 3^{3}$ 的方格中的每一 个格子的一条曲线。它是将 2 阶曲线的每个方格由 1 阶曲线替换而成。 

![](https://luogu.oss-cn-hangzhou.aliyuncs.com/upload/vjudge_pic/lanqiao/2022_09_30_334c51de49a3a8e7ba1bg-07.jpg)

皮亚诺曲线总是从左下角开始出发, 最终到达右上角。

我们将这些格子放到坐标系中, 对于 $k$ 阶皮亚诺曲线, 左下角的坐标是 $(0,0)$, 右上角坐标是 $\left(3^{k}-1,3^{k}-1\right)$, 右下角坐标是 $\left(3^{k}-1,0\right)$, 左上角坐标是 $\left(0,3^{k}-1\right)$ 。

给定 $k$ 阶皮亚诺曲线上的两个点的坐标, 请问这两个点之间, 如果沿着皮 亚诺曲线走, 距离是多少?
## 输入格式

输入的第一行包含一个正整数 $k$, 皮亚诺曲线的阶数。

第二行包含两个整数 $x_{1}, y_{1}$, 表示第一个点的坐标。 第三行包含两个整数 $x_{2}, y_{2}$, 表示第二个点的坐标。
## 输出格式

输出一个整数, 表示给定的两个点之间的距离。
## 样例

### 样例输入 #1
```
1
0 0
2 2
```
### 样例输出 #1
```
8
```
### 样例输入 #2
```
2
0 2
0 3
```
### 样例输出 #2
```
13
```
## 提示

对于 $30 \%$ 的评测用例, $0 \leq k \leq 10$ 。

对于 $50 \%$ 的评测用例, $0 \leq k \leq 20$ 。

对于所有评测用例, $0 \leq k \leq 100,0 \leq x_{1}, y_{1}, x_{2}, y_{2}<3^{k}, x_{1}, y_{1}, x_{2}, y_{2} \leq 10^{18}$ 。 数据保证答案不超过 $10^{18}$ 。

蓝桥杯 2020 年国赛 A 组 F 题（B 组 F 题, C 组 H 题）。


---

---
title: "「WHOI-4」折纸"
layout: "post"
diff: 普及/提高-
pid: P8960
tag: ['模拟', 'O2优化', '进制']
---
# 「WHOI-4」折纸
## 题目背景

吉尼斯记录：一张纸（如果接近 $4$ 公里的卫生纸可以算作一张纸）最多可以对折 $13$ 次。小 X 吹牛说打破了这个记录，但是吹太大了。
## 题目描述

小 X 向吉尼斯世界纪录组织申请了这个记录，但是他正好隔离在家，无法证明。他只好允许他们问 $t$ 个问题，确认他确实打破了记录。

他们每个问题可以要求小 X 把一张纸按照一个给定 $01$ 串 $s$ 的规则对折 $n$ 次后展开。对于第 $i$ 次折叠，如果 $s_i=0$，将纸从左到右对折，使左边对齐右边；如果 $s_i=1$，将纸从右到左对折，使右边对齐左边。对折全部是从上方翻。**接下来将会展开，展开后纸片在原位，只是保留了折痕。看看自己是否实现了这一点。**

他们想要知道，从左往右数第 $k$ 个折痕是峰折（向上突起的折痕）还是谷折（向下凹陷的折痕）。如果该询问的答案是峰折，输出 `Up`；否则输出 `Down`。请你帮帮可怜的小 X。

峰折，谷折的图示见样例解释。
## 输入格式

**本题采用多测。**

第一行一行一个正整数 $t$，代表数据组数。

接下来 $2t$ 行，每两行是一组数据。每组数据，第一行两个正整数 $n,k$。接下来一行一个长度为 $n$ 的 $01$ 串，代表 $s$。
## 输出格式

$t$ 行，每行一个字符串，代表该组数据的答案。

## 样例

### 样例输入 #1
```
7
3 1
010
3 2
010
3 3
010
3 4
010
3 5
010
3 6
010
3 7
010
```
### 样例输出 #1
```
Down
Up
Up
Down
Down
Down
Up
```
### 样例输入 #2
```
7
3 1
011
3 2
011
3 3
011
3 4
011
3 5
011
3 6
011
3 7
011
```
### 样例输出 #2
```
Down
Up
Up
Down
Down
Down
Up

```
### 样例输入 #3
```
2
13 114
1101101111010
13 514
1101101111010
```
### 样例输出 #3
```
Up
Up
```
## 提示

**样例解释**

样例 #1 解释：

动态地址：[here](https://img-blog.csdnimg.cn/c68f2ba917504417b109eb1606f4a3a5.gif)。不知道为什么洛谷显示不了了。

![](https://cdn.luogu.com.cn/upload/image_hosting/wguzrqz6.png)

由于技术原因，动图帧数略低。

样例 #2 请手动模拟。

**数据范围**

**本题采用捆绑测试。**

- Subtask 1（$20$ pts）：$t=10$，$1\le n\le5$；
- Subtask 2（$80$ pts）：$t=10^5$。

对于 $100\%$ 的数据，有 $1\le t\le 10^5$，$1\le n\le60$，$1\le k<2^n$。


---

---
title: "[SNCPC2019] Coolbits"
layout: "post"
diff: 普及/提高-
pid: P9649
tag: ['贪心', '2019', 'O2优化', '陕西', '进制', 'XCPC']
---
# [SNCPC2019] Coolbits
## 题目描述

Given $n$ intervals $[l_1, r_1], [l_2, r_2], \dots, [l_n, r_n]$, one must select an integer from each of the intervals and calculate their bitwise and value $b$. What's the maximum possible $b$ one can get?

## 输入格式

There are multiple test cases. The first line of the input contains an integer $T$, indicating the number of test cases. For each test case:

The first line contains an integer $n$ ($1 \le n \le 10^5$), indicating the number of intervals.

For the following $n$ lines, the $i$-th line contains two integers $l_i$ and $r_i$ ($0 \le l_i \le r_i \le 10^9$), indicating the $i$-th interval.

It's guaranteed that the sum of $n$ of all test cases will not exceed $10^6$.

## 输出格式

For each test case output one line containing one integer, indicating the maximum possible $b$ one can get.

## 样例

### 样例输入 #1
```
2
3
0 8
2 6
3 9
1
1 100

```
### 样例输出 #1
```
6
100

```
## 提示

For the first sample test case, one can select 7, 6 and  7 from the three intervals and get their bitwise and value 6.
## 题目翻译

**【题目描述】**

给定 $n$ 个区间 $[l_1, r_1], [l_2, r_2], \dots, [l_n, r_n]$，需要从每个区间中选择一个整数并计算它们的按位与值 $b$。能够得到的最大 $b$ 是多少？

**【输入格式】**

有多个测试用例。输入的第一行包含一个整数 $T$，表示测试用例的数量。对于每个测试用例：

第一行包含一个整数 $n$ ($1 \le n \le 10^5$)，表示区间的数量。

接下来的 $n$ 行，第 $i$ 行包含两个整数 $l_i$ 和 $r_i$ ($0 \le l_i \le r_i \le 10^9$)，表示第 $i$ 个区间。

保证所有测试用例的 $n$ 之和不超过 $10^6$。

**【输出格式】**

对于每个测试用例输出一行，包含一个整数，表示能得到的最大可能 $b$。

**【样例解释】**

对于第一个样例测试用例，可以从三个区间中选择 7、6 和 7，并得到它们的按位与值 6。

翻译来自于：[ChatGPT](https://chatgpt.com/)。


---


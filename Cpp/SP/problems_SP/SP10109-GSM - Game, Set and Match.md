---
title: "GSM - Game, Set and Match"
layout: "post"
diff: 难度0
pid: SP10109
tag: []
---

# GSM - Game, Set and Match

## 题目描述

在这个问题中，你需要帮助计算网球比赛中获胜的概率。以下是比赛计分系统的简要说明。网球比赛由若干盘组成，而每一盘又由多局构成（必要时会进行抢七局），最后每局由多个小分组成。

##### 分

每个小分都由一位选手发球开始（即将球击入对方场地的发球区），另一位选手接发球。发球选手努力将球回击到对方场地，两名选手交替击球过网。如果某位选手未能成功回球（例如，球出界），便失去这一分。具体的得分方式对我们此题无关紧要。

##### 局

局内的计分系统相当独特。当选手在一局中赢得分数时，得分从起始的 0（读作“love”）依次变为 15、30 或 40（当你以为发现了其中规律时，却发现它变得复杂了）。在局的长度上没有预设限制（即打多少分），但选手的得分总是以上述的数值表示，具体规则如下：当选手获得三分（得分为 40）并赢得下一分时，除非比分为 40-40（即“平分”），否则他将赢得这一局。在平分状态，选手需要连续赢得两分才能赢下局。赢一分后若继续赢第二分，该局就属于他；如果输了，比分则回到平分。

例子：在 40-30 的情况下，如果第一位选手赢得下一分，他将赢下整个局。然而，如果第二位选手连赢三分，这一局则由他胜出。

##### 盘

赢得一盘需要选手赢得至少六局（在当前盘内）并领先对手至少两局，但这里也有个例外。当双方局分达到 6-6 时，将会进行抢七局来决定这一盘的胜利归属。

例子：在 5-4 的情况下，如果第一位选手赢下下一局，他将以 6-4 赢下这一盘。但如果他输掉下一局，该盘仍未分出胜负，最终可能成为 7-5、5-7 或进入抢七局。

##### 抢七局

抢七局（以及所属盘）的胜利条件是选手赢得至少七分，且领先对手两分以上。

##### 比赛

在比赛中，先赢得两盘的选手为胜者（不需要连胜）。因此，根据比赛的进展情况，一场比赛可能会持续两盘或三盘。

拉法仔细研究了他与下一个对手的过往表现，明确知道他在每一分上的获胜概率固定为 $p$，无论他是发球还是接发球，以及此前所有比赛情况。你能帮他评估一下赢得整场比赛的几率吗？

## 输入格式

每个测试用例由一个浮点数 $p$ 描述，$0 \leq p \leq 1$。输入以 $-1$ 结束。

## 输出格式

对于每个测试用例，输出一行，包含拉法赢得一局、一盘和一场比赛的概率。这三个数值用空格隔开。答案应精确到绝对误差不超过 $10^{-6}$。

 **本翻译由 AI 自动生成**


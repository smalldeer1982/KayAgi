---
title: "MDT1 - Madotsuki Pattern"
layout: "post"
diff: 难度0
pid: SP13508
tag: []
---

# MDT1 - Madotsuki Pattern

## 题目描述

Madotsuki 是超现实冒险游戏《梦日记》的女主角。在梦中找到的所有物品被丢弃后，这位可怜的女孩结束了自己的生命。每年，都会有人们的小型纪念活动。而 Madotsuki 最具象征性的标志就是她衣服上的图案……

![图案](https://cdn.luogu.com.cn/upload/vjudge_pic/SP13508/33f1c9de7ae5220a019bdfa9462f5b1f04bd970a.png)

（图片来源于 [github.com/madotsuki](https://github.com/madotsuki)）

你收到一个 $n \times m$ 的设计图，其中每个元素是字符 '1'、'0' 或 '?'。你可以将每个 '?' 随意变成 '0' 或 '1'，目标是最大化该设计图中 Madotsuki 图案的出现次数。

Madotsuki 图案的形式如下：

```
101
010
101
```

需要注意的是，以下并不是一个 Madotsuki 图案：

```
010
101
010
```

## 输入格式

多组测试数据，每组包含：

第一行是两个整数 $n$ 和 $m$，分别表示设计图的行数和列数（$n \leq 1000, m \leq 10$）。

接下来的 $n$ 行中，每行有 $m$ 个字符，字符可能为 '0'、'1' 或 '?'。

## 输出格式

对于每组测试数据，输出最大可能的 Madotsuki 图案数量，以及能实现该最大数量的设计图总数。由于答案可能非常大，结果需要对 $1,000,000,007$ 取余。

## 说明/提示

- $1 \leq n \leq 1000$
- $1 \leq m \leq 10$

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
2 42 4
????
????
4 6
??????
?1010?
?0101?
??????
```

### 输出

```
1 8
6 4
```


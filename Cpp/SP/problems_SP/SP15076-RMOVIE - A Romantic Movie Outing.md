---
title: "RMOVIE - A Romantic Movie Outing"
layout: "post"
diff: 难度0
pid: SP15076
tag: []
---

# RMOVIE - A Romantic Movie Outing

## 题目描述

Brian 是一位计算机科学迷，他要和他的女朋友 Anatevka 去约会。他们选择了一家电影院作为约会地点，但当然不会去太昂贵的 IMAX 影院。

这家电影院拥有 $10^9$ 排座位，每排有 $1000$ 个座位，起初这些座位都是空的。靠近屏幕的排数从 $1..10^9$ 依次编号，每排座位从左到右编号为 $1..1000$。位于第 $r$ 排第 $c$ 列的座位表示为 $(r, c)$。前 $L$ 排（$1 \leq L \leq 1000$）的座位被视为“近”的，而后面的称为“远”的。

在电影开始前的 $T$ 分钟（$1 \leq T \leq 500,000$）内，会发生一些事件。在第 $i$ 分钟，可能有人进入并坐在空座位 $(R_i, C_i)$，或者坐在座位 $(R_i, C_i)$ 上的人离开。此外，Anatevka 可能会建议他们坐在座位 $(R_i, C_i)$ 和 $(R_i, C_i+1)$ 上。事件类型用字符 $E_i$ 表示，其中 $E_i =$ "**E**" 表示有人进入，$E_i =$ "**L**" 表示有人离开，$E_i =$ "**S**" 表示座位建议。所有提及的座位都在影院内，并且 Anatevka 建议的座位都会在“近”的区域，因为她认为这里的座位最好。

每当 Anatevka 提出一个座位建议时，Brian 需要评估其合理性。如果她建议的两个座位中有任何一个已经被占用，那么 Brian 会简单地说 “No”。否则，他将计算这两个位子安排的总体不便程度。座位 $(r, c)$ 的不便程度是其视野范围内被占用的座位数量（不包括它自己）。座位 $(r, c)$ 的视野范围包括与座位 $(1, c)$ 的曼哈顿距离不超过 $(r, c)$ 的所有座位，如下图所示（“S” 表示建议的座位，“F” 表示视野范围内的座位）：

![](../../../content/sourspinach:rmovie1.bmp)

当所有事件完成后，电影将要开始，Brian 必须决定最后的座位选择。在他看来，坐在“远”的座位上更好（因为那里有更宽广的视野），而且他深知去电影院是为了享受最佳观影体验，所以不必选两个相邻的座位。因此，他需要找出任意两个“远”的、未被占用的座位的最小总不便程度。注意，如果选择的座位之一在另一个座位的视野范围内，这个不算作它的额外不便——不便程度只由其他坐在影院的人决定。

## 输入格式

第一行包含两个整数 $L$ 和 $T$。

接下来的 $T$ 行中，每行包含一个字符 $E_i$ 和两个整数 $R_i$ 和 $C_i$，用于描述第 $i$ 个事件。

## 输出格式

针对 Anatevka 的每个建议，如果建议无效输出 “No”，否则输出这两个建议座位的总不便程度。

最后一行显示任意两个“远”的、未被占用座位的最小总不便程度。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
3 7\nE 1 2\nE 2 5\nS 3 3\nE 2 3\nL 2 5\nS 1 3\nS 2 2
```

### 输出

```

```


---
title: "TREEPAL - Tree and Palindrome"
layout: "post"
diff: 难度0
pid: SP17755
tag: []
---

# TREEPAL - Tree and Palindrome

## 题目描述

**树与回文 | TREEPAL**

给定一棵包含 $N$ 个节点的树，具备以下特性：

1. 树的根节点是节点 1。
2. 节点 1 位于第 0 层；第 1 层是节点 1 的子节点们，第 2 层是第 1 层子节点的子节点们，以此类推。
3. 每层的节点用同一个字母标记。
4. 第 0 层节点标记为 'a'，第 1 层为 'b'，第 2 层为 'c'，这样一直循环下去，第 25 层为 'z'，第 26 层又重新标记为 'a'，第 27 层为 'b'，依此类推。

在树中，若从节点 $a$ 到节点 $b$（包含 $a$ 和 $b$）沿路径取节点的字母串联，所得的字符串称为该对节点的「Bokkor」字符串。

你需要找到给定的一对不同节点。每对节点被选中的概率相同。你的任务是计算某对节点的「Bokkor」字符串是回文的概率，并将结果以分数形式 $\frac{p}{q}$ 表示（其中 $p$ 和 $q$ 互素）。

![树结构](http://dl.dropboxusercontent.com/u/34972503/SM.png)

图：树结构

在这个例子中，节点对 (2, 3) 的「Bokkor」字符串是 “bab”，是一个回文串；节点对 (4, 5) 的「Bokkor」字符串是 “cbabc”，也是一个回文串。除此之外，没有其他对形成回文的「Bokkor」字符串。

![公式](http://dl.dropboxusercontent.com/u/34972503/sm2.JPG)

总共有 2 对形成回文的「Bokkor」字符串。

 **本翻译由 AI 自动生成**


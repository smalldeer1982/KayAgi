---
title: "AROPE - Alphabetic Rope"
layout: "post"
diff: 提高+/省选-
pid: SP29455
tag: ['平衡树']
---

# AROPE - Alphabetic Rope

## 题目描述

# SP29455 字母绳  


维护一个字符串，支持以下 $3$ 种操作：  

|格式|操作|
|:-:|:-:|
|$1\ X\ Y$|把区间 $[X,Y]$ 剪切下来连接到字符串开头|
|$2\ X\ Y$|把区间 $[X,Y]$ 剪切下来连接到字符串末尾|
|$3\ Y$|查询当前字符串中第 $Y$ 个字符，输出到单独一行|  

（注：字符串的下标是从 $0$ 开始的）

## 输入格式

一个测试点只有一组数据。  

第 $1$ 行，一个字符串 $S$，表示初始的字符串。  
第 $2$ 行，一个整数 $Q$。

## 输出格式

对于每一个操作 $3$，在单独一行输出一个字符。  

## 输入输出样例  

### 输入 \#1  
```plain
gautambishal
3
3 1
2 0 5
3 0
```

### 输出 \#1  
```plain
a
b
```

## 说明/提示

对于 $100\%$ 的数据，$1 \le \vert S \vert \le 10^5$，$1 \le Q \le 10^5$。  

Translated by [rzh123](https://www.luogu.com.cn/user/237530).

## 样例 #1

### 输入

```
gautambishal\n3\n3 1\n2 0 5\n3 0
```

### 输出

```
a\nb
```


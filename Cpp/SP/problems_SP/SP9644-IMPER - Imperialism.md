---
title: "IMPER - Imperialism"
layout: "post"
diff: 难度0
pid: SP9644
tag: []
---

# IMPER - Imperialism

## 题目描述

人类对征服和扩张的野心在地球和整个宇宙中都是众所周知的。在名为“Imperius”的星球上，一系列堡垒相继建成。除了第一个堡垒外，每个新建的堡垒都会通过一条直接路径连接到一个之前建造的堡垒，以促进商业交流。

Imperius 曾经是宇宙中最和平、最繁荣的星球之一，直到有一天停止了建堡。这时，星球上出现了 **N** 个不同的帝国（编号从 1 到 **N**），每个帝国控制着一个不同的堡垒。随着征服欲望的蔓延，每年会有一个帝国征服它的所有相邻帝国，并接管他们控制的所有堡垒。如果两个帝国之间的堡垒通过路径相连，且这些堡垒分别由两个不同的帝国控制，那么这两个帝国被认为是相邻的。

最后，只会有一个帝国完全控制所有堡垒。你的任务是计算出实现这一目标所需的最小年数。

例如，下图左侧展示了一个可能的情景，六座堡垒分别被六个不同的帝国占领，每个堡垒标记有该帝国的编号。如果第一年帝国 2 征服了所有邻国，那么局势会如中图所示。最终，帝国 5 在征服它邻近的帝国之后，将统治所有堡垒，如右图所示。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP9644/bb02431ce5d359ce55ce14e75efcde381b235930.png) ![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP9644/482705546d2cef38c29185960a62ce3a0a5485fe.png) ![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP9644/89d58e6d219f43bd182e000b64bd9a69237738f7.png)

## 输入格式

输入包含若干组测试数据。每组测试数据由两行构成。第一行包含一个整数 **N**（2 ≤ **N** ≤ 10,000），表示 Imperius 星球上的堡垒数量。第二行包含 **N**-1 个整数 **P\_i**，表示堡垒 **i**+1 连接到堡垒 **P\_i**（1 ≤ **P\_i** ≤ **i**，对于 1 ≤ **i** ≤ **N**-1）。输入的最后一行为 -1，表示输入的结束，不处理为测试数据。

## 输出格式

对于每组测试数据，输出一行，一个整数，表示实现一个帝国控制所有堡垒所需的最少年数。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
6
1 2 2 4 5
7
1 1 3 3 4 4
6
1 2 2 2 2
-1
```

### 输出

```
2
2
1
```


---
title: "EC - Eliminate the Con&#64258;ict"
layout: "post"
diff: 难度0
pid: SP9939
tag: []
---

# EC - Eliminate the Con&#64258;ict

## 题目描述

冲突无处不在，从年轻人到老年人，从家庭到国家，冲突的存在可能导致争吵、打架甚至战争。如果所有的冲突都能被解决，世界将变得无比美好。

爱德华将他的一生奉献给了“冲突解决终端”的发明，最终取得了成功。这个神奇的装置能消除所有冲突。它的工作原理是这样的：

当两个人发生冲突时，他们只需要将手伸入一个“冲突解决终端”（也就是一个塑料管）。然后他们在里面玩一局“石头、剪刀、布”。决定好出什么后，管子打开，双方不能再改变出招。游戏的赢家有权做主，而输家则需服从，这样冲突就被消除了。

然而，这个游戏未必公平，因为每个人可能都会有固定的出招模式，如果这种模式被发现，别人就可以通过预测轻松取胜。

爱丽丝和鲍勃经常发生冲突，因此频繁使用“冲突解决终端”。不幸的是，爱丽丝发现了鲍勃出招的规律，并能精准预测他的手势。出于善意，爱丽丝并不想借此取胜，于是她告诉了鲍勃，他们商量出了一个新的解决冲突的方法：

他们将进行 **N** 局“石头、剪刀、布”。鲍勃会给爱丽丝设定一些限制，但这些限制只能规定她在第 _i_ 轮和第 _j_ 轮出招时必须相同或不同。如果爱丽丝在任何一轮中输掉或违反了规定，她就输了；反之，如果游戏结束她都未犯错，她就赢了。

那么，爱丽丝有可能赢吗？

## 输入格式

第一行输入一个整数 **T**（$1 \le T \le 50$），表示有多少组测试数据。

接下来的每组测试数据包括若干行。第一行包含两个整数 **N** 和 **M**（$1 \le N \le 10000$，$1 \le M \le 10000$），分别表示游戏的轮数和爱丽丝面临的限制数量。

紧接着的一行有 **N** 个整数 **B** $ _{1} $, **B** $ _{2} $, ..., **B** $ _{N} $，每个数字表示鲍勃在对应轮次会出的手势：1 代表石头，2 代表布，3 代表剪刀。

随后 **M** 行中每行有三个整数 **A**, **B**, **K**（$1 \le A, B \le N$，**K** = 0 或 1）。若 **K** 为 0，表明爱丽丝在第 **A** 轮和第 **B** 轮出招必须相同；如果 **K** 为 1，她在这两轮的出招则必须不同。

## 输出格式

针对每组测试数据，输出一行：“Case #X: Y”。其中 **X** 为测试用例编号（从 1 开始），**Y** 是“yes”或“no”，表示爱丽丝是否有可能赢得比赛。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
2
3 3
1 1 1
1 2 1
1 3 1
2 3 1
5 5
1 2 3 2 1
1 2 1
1 3 1
1 4 1
1 5 1
2 3 0
```

### 输出

```
Case #1: no
Case #2: yes
```


# é¢˜ç›®ä¿¡æ¯

# NUMOFPAL - Number of Palindromes

## é¢˜ç›®æè¿°

Each palindrome can be always created from the other palindromes, if a single character is also a palindrome. For example, the string "malayalam" can be created by some ways:

  
\* malayalam = m + ala + y + ala + m  
\* malayalam = m + a + l + aya + l + a + m  
  
We want to take the value of function NumPal(s) which is the number of different palindromes that can be created using the string S by the above method. If the same palindrome occurs more than once then all of them should be counted separately.

## è¯´æ˜/æç¤º

**Limitations**

0 < |s| <= 1000

## æ ·ä¾‹ #1

### è¾“å…¥

```
malayalam```

### è¾“å‡º

```
15```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šNUMOFPAL - å›æ–‡å­ä¸²è®¡æ•° æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šå›æ–‡å­ä¸²è®¡æ•°ï¼ˆæ ¸å¿ƒç®—æ³•ï¼šä¸­å¿ƒæ‰©å±•æ³•ã€é©¬æ‹‰è½¦ç®—æ³•ã€å“ˆå¸Œåˆ¤æ–­ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œå›æ–‡å­ä¸²è®¡æ•°â€é—®é¢˜ï¼Œå…³é”®æ˜¯**æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­æ‰€æœ‰è¿ç»­çš„å›æ–‡å­ä¸²**ï¼ˆæ³¨æ„ï¼šç›¸åŒå›æ–‡ä¸²å‡ºç°å¤šæ¬¡è¦ç®—å¤šæ¬¡ï¼Œæ¯”å¦‚â€œaaaâ€ä¸­çš„â€œaâ€å‡ºç°3æ¬¡ï¼Œâ€œaaâ€å‡ºç°2æ¬¡ï¼Œâ€œaaaâ€å‡ºç°1æ¬¡ï¼Œæ€»å…±æœ‰6ä¸ªï¼‰ã€‚  
ç®€å•æ¥è¯´ï¼Œå›æ–‡å­ä¸²å°±åƒâ€œé•œå­é‡Œçš„å­—â€â€”â€”ä»ä¸­é—´å¾€ä¸¤è¾¹çœ‹ï¼Œå­—ç¬¦éƒ½ä¸€æ ·ã€‚æ¯”å¦‚â€œmalayalamâ€ä¸­çš„â€œalaâ€å°±æ˜¯ä¸€ä¸ªå›æ–‡å­ä¸²ï¼Œå·¦å³å¯¹ç§°ã€‚  

### æ ¸å¿ƒç®—æ³•æ€è·¯å¯¹æ¯”  
- **æš´åŠ›æ³•**ï¼šåˆ†å¥‡å¶ä¸¤ç§æƒ…å†µï¼Œæšä¸¾æ¯ä¸ªå­—ç¬¦ä½œä¸ºä¸­å¿ƒï¼Œå‘ä¸¤è¾¹æ‰©å±•ï¼Œç»Ÿè®¡æ‰€æœ‰å›æ–‡å­ä¸²ï¼ˆé€‚åˆæ•°æ®é‡å°çš„æƒ…å†µï¼Œæ¯”å¦‚æœ¬é¢˜å­—ç¬¦ä¸²é•¿åº¦â‰¤1000ï¼‰ã€‚  
- **é©¬æ‹‰è½¦ç®—æ³•ï¼ˆManacherï¼‰**ï¼šé€šè¿‡æ’å…¥åˆ†éš”ç¬¦ï¼ˆå¦‚â€œ#â€ï¼‰ç»Ÿä¸€å¤„ç†å¥‡å¶å›æ–‡ï¼Œç”¨çº¿æ€§æ—¶é—´æ‰¾åˆ°æ‰€æœ‰å›æ–‡å­ä¸²çš„é•¿åº¦ï¼Œä»è€Œå¿«é€Ÿç»Ÿè®¡æ•°é‡ï¼ˆé€‚åˆé•¿å­—ç¬¦ä¸²ï¼Œæ•ˆç‡æ›´é«˜ï¼‰ã€‚  
- **å“ˆå¸Œæ³•**ï¼šé¢„å¤„ç†å­—ç¬¦ä¸²çš„æ­£åºå’Œå€’åºå“ˆå¸Œå€¼ï¼Œé€šè¿‡æ¯”è¾ƒåŒºé—´å“ˆå¸Œå€¼åˆ¤æ–­æ˜¯å¦ä¸ºå›æ–‡ï¼ˆO(1)åˆ¤æ–­ï¼Œä½†éœ€è¦é¢„å¤„ç†ï¼‰ã€‚  

### å¯è§†åŒ–è®¾è®¡æ€è·¯  
ä»¥**é©¬æ‹‰è½¦ç®—æ³•**ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ª**åƒç´ é£æ ¼çš„â€œå›æ–‡æ¢ç´¢æ¸¸æˆâ€**ï¼š  
- **åœºæ™¯**ï¼šå±å¹•ä¸Šæ˜¾ç¤ºæ’å…¥åˆ†éš”ç¬¦åçš„å­—ç¬¦ä¸²ï¼ˆå¦‚â€œ#m#a#l#a#y#a#l#a#m#â€ï¼‰ï¼Œç”¨ä¸åŒé¢œè‰²çš„åƒç´ å—è¡¨ç¤ºå­—ç¬¦ã€‚  
- **æ ¸å¿ƒæ­¥éª¤**ï¼š  
  1. ç”¨**çº¢è‰²åƒç´ å—**æ ‡è®°å½“å‰ä¸­å¿ƒä½ç½®ï¼ˆæ¯”å¦‚åˆå§‹ä¸­å¿ƒæ˜¯ç¬¬ä¸€ä¸ªâ€œ#â€ï¼‰ã€‚  
  2. ç”¨**è“è‰²åƒç´ å—**å‘ä¸¤è¾¹æ‰©å±•ï¼Œæ¯æ‰©å±•ä¸€æ­¥ï¼Œè‹¥å­—ç¬¦ç›¸åŒï¼Œåˆ™è“è‰²å—å¢åŠ ï¼ŒåŒæ—¶åœ¨å±å¹•ä¸Šæ–¹æ˜¾ç¤ºâ€œå½“å‰å›æ–‡åŠå¾„ï¼šxâ€ã€‚  
  3. å½“æ‰©å±•åœæ­¢æ—¶ï¼Œè®¡ç®—è¯¥ä¸­å¿ƒè´¡çŒ®çš„å›æ–‡å­ä¸²æ•°é‡ï¼ˆå›æ–‡åŠå¾„//2ï¼‰ï¼Œå¹¶åœ¨å±å¹•å³ä¾§ç´¯åŠ å¾—åˆ†ã€‚  
- **æ¸¸æˆåŒ–å…ƒç´ **ï¼šæ¯ç»Ÿè®¡ä¸€ä¸ªå›æ–‡å­ä¸²ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼›å®Œæˆæ‰€æœ‰ä¸­å¿ƒçš„æ‰©å±•åï¼Œæ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼Œæ˜¾ç¤ºæ€»å¾—åˆ†ï¼ˆå³ç­”æ¡ˆï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼šé©¬æ‹‰è½¦ç®—æ³•ï¼ˆä½œè€…ï¼šcodesonicï¼Œèµ4ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**é©¬æ‹‰è½¦ç®—æ³•**å®Œç¾è§£å†³äº†é—®é¢˜ï¼Œæ€è·¯æ¸…æ™°ä¸”æ•ˆç‡é«˜ï¼ˆçº¿æ€§æ—¶é—´å¤æ‚åº¦O(n)ï¼‰ã€‚ä»£ç ä¸­çš„`manacher`å‡½æ•°é€šè¿‡ç»´æŠ¤â€œæœ€è¿œå³è¾¹ç•Œâ€å’Œâ€œä¸­å¿ƒâ€ï¼Œé¿å…äº†é‡å¤æ‰©å±•ï¼Œå¤§å¤§å‡å°‘äº†è®¡ç®—é‡ã€‚é¢„å¤„ç†å‡½æ•°`change`å°†åŸå­—ç¬¦ä¸²æ’å…¥â€œ#â€ï¼Œç»Ÿä¸€å¤„ç†å¥‡å¶å›æ–‡ï¼Œéå¸¸å·§å¦™ã€‚å˜é‡å‘½åï¼ˆå¦‚`hw`è¡¨ç¤ºå›æ–‡åŠå¾„ï¼Œ`maxright`è¡¨ç¤ºæœ€è¿œå³è¾¹ç•Œï¼‰æ¸…æ™°æ˜“æ‡‚ï¼Œè¾¹ç•Œå¤„ç†ä¸¥è°¨ï¼ˆæ¯”å¦‚`ans`çš„åˆå§‹å€¼å’Œæœ€ç»ˆå‡1çš„å¤„ç†ï¼‰ã€‚ä»å®è·µè§’åº¦çœ‹ï¼Œè¿™ä»½ä»£ç å¯ä»¥ç›´æ¥ç”¨äºç«èµ›ï¼Œæ˜¯é©¬æ‹‰è½¦ç®—æ³•çš„ç»å…¸åº”ç”¨ã€‚  

### é¢˜è§£äºŒï¼šæš´åŠ›åˆ†å¥‡å¶ï¼ˆä½œè€…ï¼šcyrxdzjï¼Œèµ1ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**æš´åŠ›æ³•**åˆ†ä¸¤æ¬¡å¾ªç¯ç»Ÿè®¡å¥‡å¶å›æ–‡ï¼Œæ€è·¯éå¸¸ç›´è§‚ï¼Œé€‚åˆåˆå­¦è€…ç†è§£å›æ–‡çš„æ€§è´¨ã€‚ç¬¬ä¸€æ¬¡å¾ªç¯å¤„ç†å¥‡æ•°é•¿åº¦çš„å›æ–‡ï¼ˆä¸­å¿ƒæ˜¯å•ä¸ªå­—ç¬¦ï¼‰ï¼Œç¬¬äºŒæ¬¡å¾ªç¯å¤„ç†å¶æ•°é•¿åº¦çš„å›æ–‡ï¼ˆä¸­å¿ƒæ˜¯ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´çš„é—´éš™ï¼‰ã€‚ä»£ç ä¸­çš„`now_left`å’Œ`now_right`åƒä¸¤ä¸ªâ€œæ¢è·¯çš„å°èš‚èšâ€ï¼Œä»ä¸­å¿ƒå‡ºå‘å‘ä¸¤è¾¹çˆ¬ï¼Œç›´åˆ°é‡åˆ°ä¸åŒçš„å­—ç¬¦ã€‚è™½ç„¶æ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)ï¼Œä½†å¯¹äºæœ¬é¢˜çš„æ•°æ®é‡ï¼ˆâ‰¤1000ï¼‰å®Œå…¨è¶³å¤Ÿã€‚å˜é‡å‘½åç®€æ´ï¼ˆå¦‚`ans`è¡¨ç¤ºç­”æ¡ˆï¼Œ`len`è¡¨ç¤ºå­—ç¬¦ä¸²é•¿åº¦ï¼‰ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜¯å…¥é—¨å›æ–‡é—®é¢˜çš„å¥½ä¾‹å­ã€‚  

### é¢˜è§£ä¸‰ï¼šå“ˆå¸Œåˆ¤æ–­ï¼ˆä½œè€…ï¼šcritnosï¼Œèµ3ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£ç”¨**å“ˆå¸Œæ³•**é¢„å¤„ç†æ­£åºå’Œå€’åºå“ˆå¸Œå€¼ï¼Œé€šè¿‡æ¯”è¾ƒåŒºé—´å“ˆå¸Œå€¼åˆ¤æ–­æ˜¯å¦ä¸ºå›æ–‡ï¼Œæ€è·¯å·§å¦™ã€‚ä»£ç ä¸­çš„`a[i][j]`å­˜å‚¨ä»iåˆ°jçš„æ­£åºå“ˆå¸Œå€¼ï¼Œ`b[i][j]`å­˜å‚¨ä»iåˆ°jçš„å€’åºå“ˆå¸Œå€¼ï¼Œè‹¥ä¸¤è€…ç›¸ç­‰ï¼Œåˆ™è¯¥å­ä¸²æ˜¯å›æ–‡ã€‚è™½ç„¶é¢„å¤„ç†éœ€è¦O(nÂ²)æ—¶é—´ï¼Œä½†åˆ¤æ–­æ¯ä¸ªå­ä¸²åªéœ€O(1)æ—¶é—´ï¼Œå¯¹äºæœ¬é¢˜æ¥è¯´æ˜¯å¯è¡Œçš„ã€‚è¿™ç§æ–¹æ³•çš„äº®ç‚¹æ˜¯**å°†å›æ–‡åˆ¤æ–­è½¬åŒ–ä¸ºå“ˆå¸Œå€¼æ¯”è¾ƒ**ï¼Œé€‚åˆéœ€è¦é¢‘ç¹åˆ¤æ–­å›æ–‡çš„åœºæ™¯ã€‚  


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. å¦‚ä½•å¤„ç†å¥‡å¶é•¿åº¦çš„å›æ–‡ï¼Ÿ  
* **éš¾ç‚¹**ï¼šå¥‡æ•°é•¿åº¦çš„å›æ–‡ï¼ˆå¦‚â€œabaâ€ï¼‰ä¸­å¿ƒæ˜¯å•ä¸ªå­—ç¬¦ï¼Œå¶æ•°é•¿åº¦çš„å›æ–‡ï¼ˆå¦‚â€œabbaâ€ï¼‰ä¸­å¿ƒæ˜¯ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´çš„é—´éš™ï¼Œç›´æ¥æšä¸¾ä¼šé—æ¼å…¶ä¸­ä¸€ç§æƒ…å†µã€‚  
* **è§£å†³æ–¹æ¡ˆ**ï¼š  
  - æš´åŠ›æ³•ï¼šåˆ†ä¸¤æ¬¡å¾ªç¯ï¼Œç¬¬ä¸€æ¬¡å¤„ç†å¥‡æ•°ï¼ˆä¸­å¿ƒiï¼Œå·¦å³æŒ‡é’ˆi,iï¼‰ï¼Œç¬¬äºŒæ¬¡å¤„ç†å¶æ•°ï¼ˆä¸­å¿ƒi,i+1ï¼Œå·¦å³æŒ‡é’ˆi,i+1ï¼‰ã€‚  
  - é©¬æ‹‰è½¦æ³•ï¼šæ’å…¥åˆ†éš”ç¬¦ï¼ˆå¦‚â€œ#â€ï¼‰ï¼Œå°†åŸå­—ç¬¦ä¸²è½¬åŒ–ä¸ºâ€œ#a#b#a#â€ï¼Œè¿™æ ·æ‰€æœ‰å›æ–‡éƒ½å˜æˆå¥‡æ•°é•¿åº¦ï¼Œä¸­å¿ƒç»Ÿä¸€ä¸ºåˆ†éš”ç¬¦æˆ–å­—ç¬¦ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šåˆ†æƒ…å†µå¤„ç†æˆ–ç»Ÿä¸€æ ¼å¼ï¼Œæ˜¯è§£å†³å¥‡å¶å›æ–‡é—®é¢˜çš„å…³é”®ã€‚  

### 2. å¦‚ä½•é¿å…é‡å¤è®¡ç®—ï¼Ÿ  
* **éš¾ç‚¹**ï¼šæ¯”å¦‚â€œaaaâ€ä¸­çš„â€œaâ€ä¼šè¢«å¤šä¸ªä¸­å¿ƒç»Ÿè®¡ï¼Œå¦‚ä½•ç¡®ä¿æ¯ä¸ªå›æ–‡å­ä¸²éƒ½è¢«æ­£ç¡®è®¡æ•°ï¼Ÿ  
* **è§£å†³æ–¹æ¡ˆ**ï¼š  
  - æš´åŠ›æ³•ï¼šæ¯ä¸ªå›æ–‡å­ä¸²çš„ä¸­å¿ƒå”¯ä¸€ï¼ˆå¥‡æ•°ä¸­å¿ƒæ˜¯å­—ç¬¦ï¼Œå¶æ•°ä¸­å¿ƒæ˜¯é—´éš™ï¼‰ï¼Œå› æ­¤æ¯ä¸ªå›æ–‡å­ä¸²ä¼šè¢«å…¶ä¸­å¿ƒç»Ÿè®¡ä¸€æ¬¡ã€‚  
  - é©¬æ‹‰è½¦æ³•ï¼šå›æ–‡åŠå¾„`hw[i]`è¡¨ç¤ºä»¥iä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²é•¿åº¦ï¼Œ`hw[i]//2`å°±æ˜¯è¯¥ä¸­å¿ƒè´¡çŒ®çš„å›æ–‡å­ä¸²æ•°é‡ï¼ˆæ¯”å¦‚â€œ#a#a#â€çš„å›æ–‡åŠå¾„æ˜¯3ï¼Œè´¡çŒ®1ä¸ªå›æ–‡å­ä¸²â€œaaâ€ï¼‰ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ¯ä¸ªå›æ–‡å­ä¸²å¯¹åº”å”¯ä¸€çš„ä¸­å¿ƒï¼Œå› æ­¤ç»Ÿè®¡ä¸­å¿ƒçš„è´¡çŒ®å³å¯é¿å…é‡å¤ã€‚  

### 3. å¦‚ä½•ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼Ÿ  
* **éš¾ç‚¹**ï¼šæš´åŠ›æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)ï¼Œå¯¹äºé•¿å­—ç¬¦ä¸²ï¼ˆå¦‚n=1e5ï¼‰ä¼šè¶…æ—¶ã€‚  
* **è§£å†³æ–¹æ¡ˆ**ï¼š  
  - é©¬æ‹‰è½¦ç®—æ³•ï¼šé€šè¿‡ç»´æŠ¤â€œæœ€è¿œå³è¾¹ç•Œâ€å’Œâ€œä¸­å¿ƒâ€ï¼Œé¿å…é‡å¤æ‰©å±•ï¼Œæ—¶é—´å¤æ‚åº¦O(n)ã€‚  
  - å›æ–‡è‡ªåŠ¨æœºï¼šé€šè¿‡æ„å»ºå›æ–‡æ ‘ï¼Œçº¿æ€§æ—¶é—´ç»Ÿè®¡æ‰€æœ‰å›æ–‡å­ä¸²ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€‰æ‹©åˆé€‚çš„ç®—æ³•å¯ä»¥å¤§å¹…æå‡æ•ˆç‡ï¼Œæ¯”å¦‚é©¬æ‹‰è½¦ç®—æ³•æ˜¯å›æ–‡å­ä¸²è®¡æ•°çš„â€œæ•ˆç‡æ‹…å½“â€ã€‚  

### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **åˆ†æƒ…å†µå¤„ç†**ï¼šå¯¹äºå¥‡å¶å›æ–‡ï¼Œåˆ†ä¸¤æ¬¡å¾ªç¯æˆ–ç»Ÿä¸€æ ¼å¼ã€‚  
- **ä¸­å¿ƒæ‰©å±•æ³•**ï¼šæšä¸¾æ¯ä¸ªä¸­å¿ƒï¼Œå‘ä¸¤è¾¹æ‰©å±•ï¼Œç»Ÿè®¡å›æ–‡å­ä¸²ï¼ˆæš´åŠ›æ³•çš„æ ¸å¿ƒï¼‰ã€‚  
- **å“ˆå¸Œé¢„å¤„ç†**ï¼šé€šè¿‡å“ˆå¸Œå€¼æ¯”è¾ƒå¿«é€Ÿåˆ¤æ–­å›æ–‡ï¼ˆé€‚åˆé¢‘ç¹åˆ¤æ–­çš„åœºæ™¯ï¼‰ã€‚  
- **é©¬æ‹‰è½¦ä¼˜åŒ–**ï¼šç”¨çº¿æ€§æ—¶é—´è§£å†³å›æ–‡å­ä¸²é—®é¢˜ï¼ˆé€‚åˆé•¿å­—ç¬¦ä¸²ï¼‰ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒï¼ˆé©¬æ‹‰è½¦ç®—æ³•ï¼‰  
* **è¯´æ˜**ï¼šæœ¬ä»£ç æ¥è‡ªcodesonicçš„é¢˜è§£ï¼Œæ˜¯é©¬æ‹‰è½¦ç®—æ³•çš„ç»å…¸å®ç°ï¼Œç”¨äºç»Ÿè®¡å›æ–‡å­ä¸²æ•°é‡ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <cstdio>
  #include <iostream>
  #include <cstring>
  using namespace std;
  const int maxn = 2010; // åŸå­—ç¬¦ä¸²é•¿åº¦â‰¤1000ï¼Œæ’å…¥åˆ†éš”ç¬¦åé•¿åº¦â‰¤2000
  int n, hw[maxn], ans;
  char a[maxn], s[maxn << 1];
  void change() {
      s[0] = '#';
      for (int i = 0; i < n; i++) {
          s[i*2+1] = a[i];
          s[i*2+2] = '#';
      }
      n = n*2+1;
      s[n] = 0;
  }
  void manacher() {
      int maxright = 0, mid = 0;
      for (int i = 0; i < n; i++) {
          if (i < maxright)
              hw[i] = min(hw[2*mid - i], maxright - i);
          else
              hw[i] = 1;
          while (i - hw[i] >= 0 && i + hw[i] < n && s[i - hw[i]] == s[i + hw[i]])
              hw[i]++;
          if (i + hw[i] > maxright) {
              maxright = i + hw[i];
              mid = i;
          }
      }
  }
  int main() {
      scanf("%s", a);
      n = strlen(a);
      change();
      manacher();
      ans = 0;
      for (int i = 0; i < n; i++)
          ans += hw[i] / 2;
      printf("%d\n", ans);
      return 0;
  }
  ```
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. `change`å‡½æ•°ï¼šå°†åŸå­—ç¬¦ä¸²æ’å…¥â€œ#â€ï¼Œç»Ÿä¸€å¤„ç†å¥‡å¶å›æ–‡ï¼ˆå¦‚â€œmalayalamâ€å˜æˆâ€œ#m#a#l#a#y#a#l#a#m#â€ï¼‰ã€‚  
  2. `manacher`å‡½æ•°ï¼šè®¡ç®—æ¯ä¸ªä½ç½®çš„å›æ–‡åŠå¾„`hw[i]`ï¼Œç»´æŠ¤â€œæœ€è¿œå³è¾¹ç•Œâ€`maxright`å’Œâ€œä¸­å¿ƒâ€`mid`ï¼Œé¿å…é‡å¤æ‰©å±•ã€‚  
  3. `main`å‡½æ•°ï¼šè¯»å–è¾“å…¥ï¼Œè°ƒç”¨`change`å’Œ`manacher`ï¼Œç»Ÿè®¡æ‰€æœ‰å›æ–‡åŠå¾„çš„`hw[i]//2`ä¹‹å’Œï¼ˆå³å›æ–‡å­ä¸²æ•°é‡ï¼‰ã€‚  

### é¢˜è§£äºŒï¼šæš´åŠ›åˆ†å¥‡å¶ï¼ˆæ ¸å¿ƒä»£ç ç‰‡æ®µï¼‰  
* **äº®ç‚¹**ï¼šæ€è·¯ç›´è§‚ï¼Œé€‚åˆåˆå­¦è€…ç†è§£å›æ–‡çš„æ€§è´¨ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  // å¤„ç†å¥‡æ•°é•¿åº¦çš„å›æ–‡
  for (int i = 0; i < len; i++) {
      int now_left = i, now_right = i;
      while (now_left >= 0 && now_right < len && input[now_left] == input[now_right]) {
          ans++;
          now_left--;
          now_right++;
      }
  }
  // å¤„ç†å¶æ•°é•¿åº¦çš„å›æ–‡
  for (int i = 0; i < len-1; i++) {
      int now_left = i, now_right = i+1;
      while (now_left >= 0 && now_right < len && input[now_left] == input[now_right]) {
          ans++;
          now_left--;
          now_right++;
      }
  }
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - å¥‡æ•°å¾ªç¯ï¼šä¸­å¿ƒæ˜¯`i`ï¼Œå·¦å³æŒ‡é’ˆä»`i`å‡ºå‘ï¼Œå‘ä¸¤è¾¹æ‰©å±•ï¼Œæ¯æ‰¾åˆ°ä¸€ä¸ªå›æ–‡å­ä¸²ï¼Œ`ans`åŠ 1ã€‚  
  - å¶æ•°å¾ªç¯ï¼šä¸­å¿ƒæ˜¯`i`å’Œ`i+1`ä¹‹é—´çš„é—´éš™ï¼Œå·¦å³æŒ‡é’ˆä»`i`å’Œ`i+1`å‡ºå‘ï¼Œå‘ä¸¤è¾¹æ‰©å±•ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæš´åŠ›æ³•è™½ç„¶æ•ˆç‡ä½ï¼Œä½†èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£å›æ–‡çš„æœ¬è´¨â€”â€”å·¦å³å¯¹ç§°ã€‚  

### é¢˜è§£ä¸‰ï¼šå“ˆå¸Œåˆ¤æ–­ï¼ˆæ ¸å¿ƒä»£ç ç‰‡æ®µï¼‰  
* **äº®ç‚¹**ï¼šç”¨å“ˆå¸Œå€¼æ¯”è¾ƒå¿«é€Ÿåˆ¤æ–­å›æ–‡ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  // é¢„å¤„ç†æ­£åºå“ˆå¸Œ
  for (int i = 1; i <= len; i++)
      a[i][i] = x[i], a[i][j] = a[i][j-1] * base + x[j];
  // é¢„å¤„ç†å€’åºå“ˆå¸Œ
  for (int i = len; i >= 1; i--)
      b[i][i] = x[i], b[i][j] = b[i][j+1] * base + x[j];
  // ç»Ÿè®¡å›æ–‡å­ä¸²æ•°é‡
  for (int i = 1; i <= len; i++)
      for (int j = i; j <= len; j++)
          if (a[i][j] == b[j][i])
              s++;
  ```
* **ä»£ç è§£è¯»**ï¼š  
  - `a[i][j]`å­˜å‚¨ä»`i`åˆ°`j`çš„æ­£åºå“ˆå¸Œå€¼ï¼Œ`b[i][j]`å­˜å‚¨ä»`i`åˆ°`j`çš„å€’åºå“ˆå¸Œå€¼ã€‚  
  - è‹¥`a[i][j] == b[j][i]`ï¼Œåˆ™å­ä¸²`i~j`æ˜¯å›æ–‡ï¼Œ`s`åŠ 1ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šå“ˆå¸Œæ³•å°†å›æ–‡åˆ¤æ–­è½¬åŒ–ä¸ºæ•°å€¼æ¯”è¾ƒï¼Œé€‚åˆéœ€è¦é¢‘ç¹åˆ¤æ–­çš„åœºæ™¯ã€‚  


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤ºï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜ï¼šã€Šå›æ–‡æ¢é™©å®¶ã€‹ï¼ˆ8ä½åƒç´ é£æ ¼ï¼‰  
**è®¾è®¡æ€è·¯**ï¼šç”¨FCçº¢ç™½æœºçš„é£æ ¼ï¼Œå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºåƒç´ å—ï¼Œé€šè¿‡â€œæ¢é™©å®¶â€ï¼ˆçº¢è‰²åƒç´ å—ï¼‰ä»ä¸­å¿ƒå‡ºå‘ï¼Œå‘ä¸¤è¾¹æ‰©å±•ï¼Œå¯»æ‰¾å›æ–‡å­ä¸²ã€‚æ¯æ‰¾åˆ°ä¸€ä¸ªå›æ–‡å­ä¸²ï¼Œæ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼Œç´¯åŠ å¾—åˆ†ï¼Œå¢å¼ºè¶£å‘³æ€§ã€‚  

### åŠ¨ç”»å¸§æ­¥éª¤ä¸äº¤äº’å…³é”®ç‚¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•æ˜¾ç¤ºæ’å…¥åˆ†éš”ç¬¦åçš„å­—ç¬¦ä¸²ï¼ˆå¦‚â€œ#m#a#l#a#y#a#l#a#m#â€ï¼‰ï¼Œæ¯ä¸ªå­—ç¬¦ç”¨16x16çš„åƒç´ å—è¡¨ç¤ºï¼ˆâ€œ#â€ç”¨ç°è‰²ï¼Œå­—æ¯ç”¨å½©è‰²ï¼‰ã€‚  
   - å±å¹•ä¸‹æ–¹æœ‰â€œå¼€å§‹â€â€œå•æ­¥â€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠâ€œé€Ÿåº¦æ»‘å—â€ï¼ˆè°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦ï¼‰ã€‚  
   - æ’­æ”¾8ä½é£æ ¼çš„èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„è½»å¿«æ—‹å¾‹ï¼‰ã€‚  

2. **ç®—æ³•å¯åŠ¨**ï¼š  
   - ç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œâ€œæ¢é™©å®¶â€ï¼ˆçº¢è‰²åƒç´ å—ï¼‰ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªä¸­å¿ƒä½ç½®ï¼ˆç¬¬ä¸€ä¸ªâ€œ#â€ï¼‰ã€‚  
   - å±å¹•ä¸Šæ–¹æ˜¾ç¤ºâ€œå½“å‰ä¸­å¿ƒï¼š0â€â€œå½“å‰å›æ–‡åŠå¾„ï¼š1â€ã€‚  

3. **æ ¸å¿ƒæ‰©å±•æ­¥éª¤**ï¼š  
   - â€œæ¢é™©å®¶â€å‘ä¸¤è¾¹æ‰©å±•ï¼ˆè“è‰²åƒç´ å—ï¼‰ï¼Œæ¯æ‰©å±•ä¸€æ­¥ï¼Œè‹¥å­—ç¬¦ç›¸åŒï¼Œåˆ™è“è‰²å—å¢åŠ ï¼Œå±å¹•ä¸Šæ–¹çš„â€œå½“å‰å›æ–‡åŠå¾„â€åŠ 1ã€‚  
   - æ’­æ”¾â€œå®â€çš„éŸ³æ•ˆï¼ˆæ¯æ‰©å±•ä¸€æ­¥ï¼‰ã€‚  
   - å½“æ‰©å±•åœæ­¢ï¼ˆå­—ç¬¦ä¸åŒæˆ–è¶Šç•Œï¼‰ï¼Œè®¡ç®—è¯¥ä¸­å¿ƒè´¡çŒ®çš„å›æ–‡å­ä¸²æ•°é‡ï¼ˆå›æ–‡åŠå¾„//2ï¼‰ï¼Œå¹¶åœ¨å±å¹•å³ä¾§ç´¯åŠ å¾—åˆ†ï¼ˆå¦‚â€œå¾—åˆ†ï¼š1â€ï¼‰ã€‚  

4. **è‡ªåŠ¨æ¼”ç¤ºæ¨¡å¼**ï¼š  
   - ç‚¹å‡»â€œè‡ªåŠ¨â€æŒ‰é’®ï¼Œâ€œæ¢é™©å®¶â€è‡ªåŠ¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸­å¿ƒï¼Œé‡å¤æ‰©å±•æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰ä¸­å¿ƒå¤„ç†å®Œæ¯•ã€‚  
   - æ’­æ”¾â€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå½“æ‰€æœ‰ä¸­å¿ƒå¤„ç†å®Œæ¯•ï¼‰ï¼Œå±å¹•æ˜¾ç¤ºæ€»å¾—åˆ†ï¼ˆå³ç­”æ¡ˆï¼‰ã€‚  

5. **äº¤äº’è®¾è®¡**ï¼š  
   - â€œå•æ­¥â€æŒ‰é’®ï¼šæ‰‹åŠ¨æ§åˆ¶â€œæ¢é™©å®¶â€ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸­å¿ƒï¼Œé€‚åˆä»”ç»†è§‚å¯Ÿæ¯ä¸€æ­¥ã€‚  
   - â€œé‡ç½®â€æŒ‰é’®ï¼šæ¢å¤åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹åŠ¨ç”»ã€‚  
   - â€œé€Ÿåº¦æ»‘å—â€ï¼šè°ƒèŠ‚åŠ¨ç”»é€Ÿåº¦ï¼ˆä»â€œæ…¢â€åˆ°â€œå¿«â€ï¼‰ã€‚  

### æ—ç™½æç¤ºï¼ˆæ–‡å­—æ°”æ³¡ï¼‰  
- â€œæ¢é™©å®¶è¦å‡ºå‘å•¦ï¼ä»ä¸­å¿ƒ0å¼€å§‹ï¼Œå‘ä¸¤è¾¹æ‰¾ç›¸åŒçš„å­—ç¬¦ï½â€ï¼ˆå¯åŠ¨æ—¶ï¼‰  
- â€œå½“å‰å›æ–‡åŠå¾„æ˜¯3ï¼Œæ‰¾åˆ°1ä¸ªå›æ–‡å­ä¸²ï½â€ï¼ˆæ‰©å±•åœæ­¢æ—¶ï¼‰  
- â€œæ‰€æœ‰ä¸­å¿ƒéƒ½å¤„ç†å®Œäº†ï¼Œæ€»å¾—åˆ†æ˜¯15ï¼â€ï¼ˆç»“æŸæ—¶ï¼‰  


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
- **å›æ–‡å­ä¸²è®¡æ•°**ï¼šé©¬æ‹‰è½¦ç®—æ³•ã€æš´åŠ›æ³•ã€å“ˆå¸Œæ³•éƒ½å¯ä»¥ç”¨äºç»Ÿè®¡å›æ–‡å­ä¸²æ•°é‡ï¼Œå…¶ä¸­é©¬æ‹‰è½¦ç®—æ³•æ•ˆç‡æœ€é«˜ã€‚  
- **æœ€é•¿å›æ–‡å­ä¸²**ï¼šé©¬æ‹‰è½¦ç®—æ³•å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æœ€é•¿å›æ–‡å­ä¸²ï¼ˆå›æ–‡åŠå¾„æœ€å¤§çš„ä¸­å¿ƒï¼‰ã€‚  
- **å›æ–‡å­ä¸²ç§ç±»**ï¼šå›æ–‡è‡ªåŠ¨æœºå¯ä»¥ç»Ÿè®¡ä¸åŒå›æ–‡å­ä¸²çš„ç§ç±»ï¼ˆå»é‡ï¼‰ã€‚  

### ç»ƒä¹ æ¨èï¼ˆæ´›è°·ï¼‰  
1. **æ´›è°· P3805 ã€æ¨¡æ¿ã€‘é©¬æ‹‰è½¦ç®—æ³•**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯é©¬æ‹‰è½¦ç®—æ³•çš„æ¨¡æ¿é¢˜ï¼Œè¦æ±‚æ‰¾åˆ°æœ€é•¿å›æ–‡å­ä¸²çš„é•¿åº¦ã€‚é€šè¿‡ç»ƒä¹ ï¼Œå¯ä»¥å·©å›ºé©¬æ‹‰è½¦ç®—æ³•çš„å®ç°ã€‚  
2. **æ´›è°· P5496 ã€æ¨¡æ¿ã€‘å›æ–‡è‡ªåŠ¨æœºï¼ˆPAMï¼‰**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™æ˜¯å›æ–‡è‡ªåŠ¨æœºçš„æ¨¡æ¿é¢˜ï¼Œè¦æ±‚ç»Ÿè®¡ä¸åŒå›æ–‡å­ä¸²çš„æ•°é‡ã€‚é€šè¿‡ç»ƒä¹ ï¼Œå¯ä»¥å­¦ä¹ å›æ–‡è‡ªåŠ¨æœºçš„æ„å»ºå’Œåº”ç”¨ã€‚  
3. **æ´›è°· P1445 æœ€é•¿å›æ–‡å­ä¸²**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜è¦æ±‚æ‰¾åˆ°æœ€é•¿å›æ–‡å­ä¸²çš„é•¿åº¦ï¼Œå¯ä»¥ç”¨æš´åŠ›æ³•ã€é©¬æ‹‰è½¦ç®—æ³•æˆ–å“ˆå¸Œæ³•è§£å†³ã€‚é€šè¿‡ç»ƒä¹ ï¼Œå¯ä»¥æ¯”è¾ƒä¸åŒç®—æ³•çš„æ•ˆç‡ã€‚  
4. **æ´›è°· P2852 [USACO06DEC] Milk Patterns G**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜è¦æ±‚æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„å­ä¸²ï¼Œè™½ç„¶ä¸æ˜¯å›æ–‡é—®é¢˜ï¼Œä½†å¯ä»¥ç”¨å“ˆå¸Œæ³•è§£å†³ï¼Œå·©å›ºå“ˆå¸Œé¢„å¤„ç†çš„æŠ€å·§ã€‚  


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº«ï¼ˆè‹¥æœ‰ï¼‰

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªcodesonicï¼‰  
> â€œä¹Ÿä¸ç”¨å†™å¤ªéº»çƒ¦çš„å›æ–‡è‡ªåŠ¨æœºï¼Œç”¨é©¬æ‹‰è½¦æ±‚å‡ºä»¥æ¯ä¸ªå­—æ¯ä¸ºå¯¹ç§°è½´çš„å›æ–‡ä¸²é•¿åº¦ï¼Œå› ä¸ºä¸€ä¸ªå›æ–‡ä¸²é•¿åº¦/2å°±æ˜¯è¿™ä¸ªå›æ–‡ä¸²åŒ…å«çš„å­å›æ–‡ä¸²é•¿åº¦ï¼Œæ‰€ä»¥æœ€åç»Ÿè®¡ä¸€ä¸‹å³å¯ï½â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„ç»éªŒå¾ˆå®ç”¨ã€‚å›æ–‡è‡ªåŠ¨æœºè™½ç„¶å¼ºå¤§ï¼Œä½†å¯¹äºæœ¬é¢˜æ¥è¯´ï¼Œé©¬æ‹‰è½¦ç®—æ³•å·²ç»è¶³å¤Ÿè§£å†³é—®é¢˜ï¼Œè€Œä¸”ä»£ç æ›´ç®€æ´ã€‚è¿™æé†’æˆ‘ä»¬ï¼Œ**é€‰æ‹©åˆé€‚çš„ç®—æ³•æ¯”è¿½æ±‚å¤æ‚çš„ç®—æ³•æ›´é‡è¦**ã€‚  

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªcyrxdzjï¼‰  
> â€œå¯¹äºé•¿åº¦ä¸ºå¥‡æ•°çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥æšä¸¾è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œå®šä¹‰`left`å’Œ`right`ä¸ºå·¦å³æŒ‡é’ˆï¼Œåˆå§‹å€¼å‡ä¸ºå½“å‰ä½ç½®ã€‚ç„¶åï¼Œå¾ªç¯è¿›è¡Œæ¯”è¾ƒã€‚â€  

**ç‚¹è¯„**ï¼šè¿™ä½ä½œè€…çš„æ€è·¯å¾ˆç›´è§‚ã€‚æš´åŠ›æ³•è™½ç„¶æ•ˆç‡ä½ï¼Œä½†èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£å›æ–‡çš„æœ¬è´¨â€”â€”å·¦å³å¯¹ç§°ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œä»æš´åŠ›æ³•å…¥æ‰‹ï¼Œå†å­¦ä¹ æ›´é«˜æ•ˆçš„ç®—æ³•ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ è·¯å¾„ã€‚  


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œNUMOFPAL - å›æ–‡å­ä¸²è®¡æ•°â€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å›æ–‡é—®é¢˜çš„è§£æ³•ï¼ŒæŒæ¡æ ¸å¿ƒç®—æ³•ï¼ˆå¦‚é©¬æ‹‰è½¦ã€æš´åŠ›æ³•ã€å“ˆå¸Œæ³•ï¼‰ã€‚è®°ä½ï¼Œ**ç¼–ç¨‹èƒ½åŠ›çš„æå‡åœ¨äºæŒç»­å­¦ä¹ ã€å‹¤äºæ€è€ƒå’Œå‹‡äºå®è·µ**ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„ç¼–ç¨‹æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š165.02ç§’
# é¢˜ç›®ä¿¡æ¯

# MDOLLS - Nested Dolls

## é¢˜ç›®æè¿°

[English](/problems/MDOLLS/en/) [Vietnamese](/problems/MDOLLS/vn/) ```

Dilworth is the world's most prominent collector of Russian nested dolls:
he literally has thousands of them! You know, the wooden hollow dolls of 
different sizes of which the smallest doll is contained in the second smallest,
and this doll is in turn contained in the next one and so forth. One day he
wonders if there is another way of nesting them so he will end up with
fewer nested dolls? After all, that would make his collection even 
more magnificent! He unpacks each nested doll and measures the width 
and height of each contained doll. A doll with width w1 and height h1 will
fit in another doll of width w2 and height h= if and only if w1 < w2 and 
h1 < h2. Can you help him calculate the smallest number of nested dolls 
possible to assemble from his massive list of measurements? 
```

# AIåˆ†æç»“æœ

# ğŸ’¡ Kayçš„C++ç®—æ³•è§£æï¼šNested Dolls æ·±å…¥å­¦ä¹ æŒ‡å— ğŸ’¡


## 1. é¢˜ç›®è§£è¯»ä¸æ ¸å¿ƒç®—æ³•è¯†åˆ«

âœ¨ **æœ¬é¢˜ä¸»è¦è€ƒå¯Ÿ**ï¼šè´ªå¿ƒç®—æ³• + äºŒåˆ†æŸ¥æ‰¾ï¼ˆç±»ä¼¼æœ€é•¿é€’å¢å­åºåˆ—LISçš„å˜å½¢ï¼‰

ğŸ—£ï¸ **åˆæ­¥åˆ†æ**ï¼š  
è§£å†³â€œåµŒå¥—å¥—å¨ƒâ€é—®é¢˜çš„å…³é”®ï¼Œåœ¨äº**ç”¨æœ€å°‘çš„â€œç»„â€è£…ä¸‹æ‰€æœ‰å¥—å¨ƒ**ï¼Œæ¯ç»„å¥—å¨ƒå¿…é¡»æ»¡è¶³â€œå®½å’Œé«˜ä¾æ¬¡é€’å¢â€çš„è§„åˆ™ã€‚è¿™å°±åƒæˆ‘ä»¬æ•´ç†ç©å…·ï¼šå¦‚æœæœ‰ä¸€å †å¤§å°ä¸ä¸€çš„ç›’å­ï¼Œè¦æŠŠå®ƒä»¬å èµ·æ¥ï¼Œæ¯ä¸ªç›’å­åªèƒ½æ”¾åœ¨æ¯”å®ƒå¤§çš„ç›’å­é‡Œï¼Œæ€ä¹ˆå æ‰èƒ½è®©å †æ•°æœ€å°‘ï¼Ÿ  

è¿™é‡Œçš„æ ¸å¿ƒæ€è·¯æ˜¯**è´ªå¿ƒ+äºŒåˆ†**ï¼š  
1. **æ’åº**ï¼šå…ˆæŒ‰å¥—å¨ƒçš„**å®½åº¦å‡åº**æ’åˆ—ï¼ˆå®½åº¦å°çš„åœ¨å‰ï¼‰ï¼Œå¦‚æœå®½åº¦ç›¸åŒï¼Œåˆ™æŒ‰**é«˜åº¦é™åº**æ’åˆ—ï¼ˆé«˜åº¦å¤§çš„åœ¨å‰ï¼‰ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼š**ä¿è¯å®½åº¦å·²ç»æ»¡è¶³é€’å¢çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦å¤„ç†é«˜åº¦çš„é€’å¢é—®é¢˜**ï¼ˆå› ä¸ºå®½åº¦ç›¸åŒçš„å¥—å¨ƒæ— æ³•äº’ç›¸åµŒå¥—ï¼Œæ‰€ä»¥é«˜åº¦å¤§çš„å…ˆå¤„ç†ï¼Œé¿å…è¢«é”™è¯¯åœ°æ”¾å…¥åŒç»„ï¼‰ã€‚  
2. **ç»´æŠ¤ç»„çš„é«˜åº¦åºåˆ—**ï¼šç”¨ä¸€ä¸ªæ•°ç»„`h`è®°å½•æ¯ä¸ªç»„çš„**å½“å‰æœ€å¤§é«˜åº¦**ï¼ˆå³è¯¥ç»„æœ€å¤–å±‚å¥—å¨ƒçš„é«˜åº¦ï¼‰ã€‚å¯¹äºæ¯ä¸ªå¥—å¨ƒï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°**ç¬¬ä¸€ä¸ªèƒ½è£…ä¸‹å®ƒçš„ç»„**ï¼ˆå³`h`ä¸­ç¬¬ä¸€ä¸ªå¤§äºå½“å‰å¥—å¨ƒé«˜åº¦çš„ä½ç½®ï¼‰ï¼Œå°†å®ƒæ”¾å…¥è¯¥ç»„ï¼Œå¹¶æ›´æ–°è¯¥ç»„çš„æœ€å¤§é«˜åº¦ä¸ºå½“å‰å¥—å¨ƒçš„é«˜åº¦ï¼ˆè¿™æ ·èƒ½ç»™åç»­å¥—å¨ƒç•™å‡ºæ›´å¤§çš„ç©ºé—´ï¼‰ã€‚å¦‚æœæ²¡æœ‰èƒ½è£…ä¸‹çš„ç»„ï¼Œå°±æ–°å¼€ä¸€ä¸ªç»„ã€‚  

**æ ¸å¿ƒç®—æ³•æµç¨‹**ï¼š  
- æ’åºåï¼Œéå†æ¯ä¸ªå¥—å¨ƒï¼ˆä»åå¾€å‰æˆ–ä»å‰å¾€åï¼Œå–å†³äºæ’åºæ–¹å¼ï¼‰ã€‚  
- å¯¹äºå½“å‰å¥—å¨ƒï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨`h`æ•°ç»„ä¸­æ‰¾ç¬¬ä¸€ä¸ªå¤§äºå®ƒé«˜åº¦çš„ä½ç½®ï¼š  
  - å¦‚æœæ‰¾åˆ°ï¼Œæ›¿æ¢è¯¥ä½ç½®çš„é«˜åº¦ä¸ºå½“å‰å¥—å¨ƒçš„é«˜åº¦ï¼ˆè¡¨ç¤ºè¯¥ç»„ç°åœ¨èƒ½è£…ä¸‹æ›´å°çš„å¥—å¨ƒï¼‰ã€‚  
  - å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°†å½“å‰å¥—å¨ƒçš„é«˜åº¦åŠ å…¥`h`æ•°ç»„ï¼ˆæ–°å¼€ä¸€ä¸ªç»„ï¼‰ã€‚  

**å¯è§†åŒ–è®¾è®¡æ€è·¯**ï¼š  
æˆ‘ä»¬å¯ä»¥ç”¨**8ä½åƒç´ é£æ ¼**æ¨¡æ‹Ÿå¥—å¨ƒåˆ†ç»„è¿‡ç¨‹ï¼š  
- **åœºæ™¯**ï¼šå±å¹•å·¦ä¾§æ˜¯æ’åºåçš„å¥—å¨ƒï¼ˆå°æ–¹å—ï¼Œå®½åº¦ç”¨æ¨ªå‘é•¿åº¦è¡¨ç¤ºï¼Œé«˜åº¦ç”¨çºµå‘é•¿åº¦è¡¨ç¤ºï¼‰ï¼Œå³ä¾§æ˜¯å„ç»„çš„â€œé«˜åº¦æŸ±çŠ¶å›¾â€ï¼ˆä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒç»„ï¼‰ã€‚  
- **å…³é”®æ­¥éª¤åŠ¨ç”»**ï¼š  
  - æ’åºæ—¶ï¼Œå¥—å¨ƒæŒ‰å®½åº¦ä»å°åˆ°å¤§â€œç§»åŠ¨â€åˆ°å¯¹åº”ä½ç½®ï¼Œå®½åº¦ç›¸åŒçš„å¥—å¨ƒæŒ‰é«˜åº¦ä»å¤§åˆ°å°æ’åˆ—ã€‚  
  - å¤„ç†æ¯ä¸ªå¥—å¨ƒæ—¶ï¼Œç”¨â€œç®­å¤´â€æŒ‡å‘å®ƒè¦åŠ å…¥çš„ç»„ï¼ŒæŸ±çŠ¶å›¾çš„é«˜åº¦ä¼šâ€œæ”¶ç¼©â€åˆ°å½“å‰å¥—å¨ƒçš„é«˜åº¦ï¼ˆè¡¨ç¤ºè¯¥ç»„ç°åœ¨èƒ½è£…ä¸‹æ›´å°çš„å¥—å¨ƒï¼‰ã€‚  
  - æ–°å¼€ç»„æ—¶ï¼Œå³ä¾§ä¼šæ–°å¢ä¸€ä¸ªå½©è‰²æŸ±çŠ¶å›¾ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
- **äº¤äº’**ï¼šæ”¯æŒâ€œå•æ­¥æ‰§è¡Œâ€ï¼ˆé€ä¸€å¥—å¨ƒå¤„ç†ï¼‰ã€â€œè‡ªåŠ¨æ’­æ”¾â€ï¼ˆè°ƒæ•´é€Ÿåº¦ï¼‰ï¼Œä»¥åŠâ€œé‡ç½®â€ï¼ˆé‡æ–°å¼€å§‹ï¼‰ã€‚  


## 2. ç²¾é€‰ä¼˜è´¨é¢˜è§£å‚è€ƒ

### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šzjjc1104111ï¼Œèµ3ï¼‰  
* **ç‚¹è¯„**ï¼š  
  è¿™ä»½é¢˜è§£çš„æ€è·¯**éå¸¸æ¸…æ™°**ï¼Œç›´æ¥æŠ“ä½äº†â€œè´ªå¿ƒ+äºŒåˆ†â€çš„æ ¸å¿ƒé€»è¾‘ã€‚æ’åºæ–¹å¼é€‰æ‹©â€œå®½åº¦å‡åºã€é«˜åº¦é™åºâ€ï¼Œå¹¶**é€†åºéå†**å¥—å¨ƒï¼ˆå› ä¸ºå®½åº¦å¤§çš„å¥—å¨ƒéœ€è¦å…ˆå¤„ç†ï¼Œé¿å…è¢«é”™è¯¯åœ°æ”¾å…¥å®½åº¦å°çš„ç»„ï¼‰ã€‚ä»£ç ä¸­çš„`f`æ•°ç»„è®°å½•æ¯ç»„çš„æœ€å¤§é«˜åº¦ï¼ŒäºŒåˆ†æŸ¥æ‰¾éƒ¨åˆ†ç”¨äº†ç»å…¸çš„â€œå·¦é—­å³å¼€â€æ¨¡æ¿ï¼Œé€»è¾‘ä¸¥è°¨ã€‚  
  ä»£ç çš„**è§„èŒƒæ€§**å¾ˆå¥½ï¼šå˜é‡å`a`ï¼ˆå¥—å¨ƒæ•°ç»„ï¼‰ã€`f`ï¼ˆç»„é«˜åº¦æ•°ç»„ï¼‰å«ä¹‰æ˜ç¡®ï¼Œå¾ªç¯ç»“æ„æ¸…æ™°ã€‚**å®è·µä»·å€¼**é«˜ï¼Œå¤šç»„æ•°æ®çš„åˆå§‹åŒ–ï¼ˆ`memset(f,0,sizeof(f))`ï¼‰å’Œæ¢è¡Œå¤„ç†ï¼ˆ`cout<<ans<<"\n"`ï¼‰éƒ½å¾ˆä¸¥è°¨ï¼Œé€‚åˆç«èµ›å‚è€ƒã€‚  
  äº®ç‚¹ï¼šé€†åºéå†çš„æŠ€å·§ï¼Œé¿å…äº†å¤„ç†å®½åº¦ç›¸åŒçš„å¥—å¨ƒæ—¶çš„é”™è¯¯ï¼Œç®€åŒ–äº†é€»è¾‘ã€‚


### é¢˜è§£äºŒï¼ˆæ¥æºï¼šrainbow_catï¼Œèµ1ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„æ€è·¯ä¸é¢˜è§£ä¸€ä¸€è‡´ï¼Œä½†**æ’åºæ–¹å¼**é€‰æ‹©â€œå®½åº¦å‡åºã€é«˜åº¦é™åºâ€ï¼Œå¹¶**æ­£åºéå†**å¥—å¨ƒï¼ˆé€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¤„ç†é«˜åº¦ï¼‰ã€‚ä»£ç ä¸­çš„`cmp`å‡½æ•°å’ŒäºŒåˆ†é€»è¾‘éƒ½å¾ˆè§„èŒƒï¼Œ`ios::sync_with_stdio(0)`ç­‰è¾“å…¥è¾“å‡ºä¼˜åŒ–ä¹Ÿå¾ˆå®ç”¨ã€‚  
  äº®ç‚¹ï¼šç”¨`h`æ•°ç»„ç»´æŠ¤ç»„é«˜åº¦ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„æ¡ä»¶ï¼ˆ`h[mid]<=a[i].h`ï¼‰å¤„ç†å¾—å¾ˆå‡†ç¡®ï¼Œç¡®ä¿æ‰¾åˆ°ç¬¬ä¸€ä¸ªèƒ½è£…ä¸‹å½“å‰å¥—å¨ƒçš„ç»„ã€‚


### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šylchï¼Œèµ1ï¼‰  
* **ç‚¹è¯„**ï¼š  
  æ­¤é¢˜è§£çš„**ä»£ç ç®€æ´æ€§**çªå‡ºï¼Œç”¨`lower_bound`å‡½æ•°æ›¿ä»£äº†æ‰‹åŠ¨äºŒåˆ†ï¼Œç®€åŒ–äº†ä»£ç ã€‚æ’åºæ–¹å¼é€‰æ‹©â€œå®½åº¦é™åºã€é«˜åº¦å‡åºâ€ï¼Œæ­£åºéå†å¥—å¨ƒï¼Œé€»è¾‘ä¸å‰ä¸¤é¢˜è§£ä¸€è‡´ï¼Œä½†ä»£ç æ›´çŸ­ã€‚  
  äº®ç‚¹ï¼š`lower_bound`å‡½æ•°çš„ä½¿ç”¨ï¼ˆ`lower_bound(t+1, t+p+1, a[i].height) - t`ï¼‰ï¼Œç›´æ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºå½“å‰é«˜åº¦çš„ä½ç½®ï¼Œä»£ç æ›´é«˜æ•ˆã€‚


## 3. æ ¸å¿ƒéš¾ç‚¹è¾¨æä¸è§£é¢˜ç­–ç•¥

### 1. **éš¾ç‚¹1ï¼šå¦‚ä½•é€‰æ‹©æ’åºæ–¹å¼ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  æ’åºçš„ç›®çš„æ˜¯**å°†å®½åº¦çš„çº¦æŸè½¬åŒ–ä¸ºé«˜åº¦çš„çº¦æŸ**ã€‚å¦‚æœæŒ‰å®½åº¦å‡åºæ’åˆ—ï¼Œé‚£ä¹ˆå®½åº¦çš„çº¦æŸå·²ç»æ»¡è¶³ï¼ˆåé¢çš„å¥—å¨ƒå®½åº¦â‰¥å‰é¢çš„ï¼‰ï¼Œåªéœ€è¦å¤„ç†é«˜åº¦çš„é€’å¢é—®é¢˜ã€‚ä½†å®½åº¦ç›¸åŒçš„å¥—å¨ƒæ— æ³•äº’ç›¸åµŒå¥—ï¼Œæ‰€ä»¥éœ€è¦å°†é«˜åº¦å¤§çš„å¥—å¨ƒå…ˆå¤„ç†ï¼ˆé™åºæ’åˆ—ï¼‰ï¼Œé¿å…å®ƒä»¬è¢«é”™è¯¯åœ°æ”¾å…¥åŒç»„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šæ’åºæ–¹å¼æ˜¯è´ªå¿ƒçš„åŸºç¡€ï¼Œå¿…é¡»ä¿è¯â€œå·²å¤„ç†çš„ç»´åº¦æ»¡è¶³çº¦æŸâ€ã€‚


### 2. **éš¾ç‚¹2ï¼šå¦‚ä½•æ‰¾åˆ°èƒ½è£…ä¸‹å½“å‰å¥—å¨ƒçš„ç»„ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  ä¸ºäº†è®©åç»­å¥—å¨ƒæœ‰æ›´å¤šç©ºé—´ï¼Œæˆ‘ä»¬éœ€è¦**æ‰¾åˆ°ç¬¬ä¸€ä¸ªèƒ½è£…ä¸‹å½“å‰å¥—å¨ƒçš„ç»„**ï¼ˆå³ç»„çš„æœ€å¤§é«˜åº¦å¤§äºå½“å‰å¥—å¨ƒçš„é«˜åº¦ï¼‰ã€‚è¿™æ ·åšçš„åŸå› æ˜¯ï¼šå¦‚æœæˆ‘ä»¬æŠŠå½“å‰å¥—å¨ƒæ”¾å…¥æ›´å°çš„ç»„ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªèƒ½è£…ä¸‹çš„ç»„ï¼‰ï¼Œé‚£ä¹ˆæ›´å¤§çš„ç»„å¯èƒ½æ— æ³•è£…ä¸‹åç»­æ›´â¼¤çš„å¥—å¨ƒï¼Œå¯¼è‡´ç»„æ•°é‡å¢åŠ ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šè´ªå¿ƒçš„å…³é”®æ˜¯â€œé€‰æ‹©å½“å‰æœ€ä¼˜çš„é€‰é¡¹â€ï¼Œå³â€œæœ€å°çš„èƒ½è£…ä¸‹çš„ç»„â€ã€‚


### 3. **éš¾ç‚¹3ï¼šå¦‚ä½•ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼Ÿ**  
* **åˆ†æ**ï¼š  
  å¦‚æœç”¨æš´åŠ›æ³•éå†æ‰€æœ‰ç»„ï¼ˆO(nÂ²)ï¼‰ï¼Œå¯¹äºn=2e4çš„æƒ…å†µä¼šè¶…æ—¶ã€‚äºŒåˆ†æŸ¥æ‰¾ï¼ˆO(logn)ï¼‰å¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™åˆ°O(nlogn)ï¼Œæ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šäºŒåˆ†æŸ¥æ‰¾æ˜¯å¤„ç†â€œæœ‰åºåºåˆ—ä¸­æ‰¾ç›®æ ‡â€é—®é¢˜çš„å¸¸ç”¨ä¼˜åŒ–æ–¹æ³•ã€‚


### âœ¨ è§£é¢˜æŠ€å·§æ€»ç»“  
- **æ’åºæŠ€å·§**ï¼šæ ¹æ®é—®é¢˜çš„çº¦æŸæ¡ä»¶ï¼Œé€‰æ‹©åˆé€‚çš„æ’åºæ–¹å¼ï¼ˆå¦‚æœ¬é¢˜çš„â€œå®½åº¦å‡åºã€é«˜åº¦é™åºâ€ï¼‰ã€‚  
- **è´ªå¿ƒç­–ç•¥**ï¼šé€‰æ‹©å½“å‰æœ€ä¼˜çš„é€‰é¡¹ï¼ˆå¦‚â€œæœ€å°çš„èƒ½è£…ä¸‹çš„ç»„â€ï¼‰ï¼Œä»¥è¾¾åˆ°å…¨å±€æœ€ä¼˜ã€‚  
- **äºŒåˆ†ä¼˜åŒ–**ï¼šå¯¹äºæœ‰åºåºåˆ—ä¸­çš„æŸ¥æ‰¾é—®é¢˜ï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾æ›¿ä»£æš´åŠ›éå†ï¼Œé™ä½æ—¶é—´å¤æ‚åº¦ã€‚  


## 4. C++æ ¸å¿ƒä»£ç å®ç°èµæ

### æœ¬é¢˜é€šç”¨æ ¸å¿ƒC++å®ç°å‚è€ƒ  
* **è¯´æ˜**ï¼šæœ¬ä»£ç ç»¼åˆäº†é¢˜è§£ä¸€ã€äºŒã€ä¸‰çš„æ€è·¯ï¼Œé‡‡ç”¨â€œå®½åº¦å‡åºã€é«˜åº¦é™åºâ€æ’åºï¼Œé€†åºéå†å¥—å¨ƒï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾ç»´æŠ¤ç»„é«˜åº¦ã€‚  
* **å®Œæ•´æ ¸å¿ƒä»£ç **ï¼š  
  ```cpp
  #include <iostream>
  #include <vector>
  #include <algorithm>
  #include <cstring>
  using namespace std;

  struct Doll {
      int w, h;
  };

  bool cmp(Doll a, Doll b) {
      if (a.w != b.w) return a.w < b.w;
      return a.h > b.h; // å®½åº¦ç›¸åŒï¼Œé«˜åº¦é™åº
  }

  int main() {
      ios::sync_with_stdio(false);
      cin.tie(0);
      int t;
      cin >> t;
      while (t--) {
          int n;
          cin >> n;
          vector<Doll> a(n);
          for (int i = 0; i < n; ++i) {
              cin >> a[i].w >> a[i].h;
          }
          sort(a.begin(), a.end(), cmp);
          vector<int> h; // ç»´æŠ¤æ¯ç»„çš„æœ€å¤§é«˜åº¦
          for (int i = n - 1; i >= 0; --i) { // é€†åºéå†ï¼ˆå®½åº¦å¤§çš„å…ˆå¤„ç†ï¼‰
              int current_h = a[i].h;
              if (h.empty() || h.back() <= current_h) {
                  h.push_back(current_h); // æ–°å¼€ç»„
              } else {
                  // äºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºcurrent_hçš„ä½ç½®
                  int l = 0, r = h.size() - 1;
                  while (l < r) {
                      int mid = (l + r) / 2;
                      if (h[mid] <= current_h) {
                          l = mid + 1;
                      } else {
                          r = mid;
                      }
                  }
                  h[l] = current_h; // æ›´æ–°è¯¥ç»„çš„æœ€å¤§é«˜åº¦
              }
          }
          cout << h.size() << '\n';
      }
      return 0;
  }
  ```  
* **ä»£ç è§£è¯»æ¦‚è¦**ï¼š  
  1. **è¾“å…¥å¤„ç†**ï¼šè¯»å–å¤šç»„æ•°æ®ï¼Œæ¯ç»„æ•°æ®åŒ…å«nä¸ªå¥—å¨ƒçš„å®½åº¦å’Œé«˜åº¦ã€‚  
  2. **æ’åº**ï¼šæŒ‰å®½åº¦å‡åºã€é«˜åº¦é™åºæ’åˆ—å¥—å¨ƒã€‚  
  3. **ç»´æŠ¤ç»„é«˜åº¦**ï¼šé€†åºéå†å¥—å¨ƒï¼Œç”¨`h`æ•°ç»„è®°å½•æ¯ç»„çš„æœ€å¤§é«˜åº¦ã€‚å¯¹äºæ¯ä¸ªå¥—å¨ƒï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°èƒ½è£…ä¸‹å®ƒçš„ç»„ï¼Œæ›´æ–°ç»„é«˜åº¦æˆ–æ–°å¼€ç»„ã€‚  
  4. **è¾“å‡ºç»“æœ**ï¼š`h`æ•°ç»„çš„å¤§å°å³ä¸ºæœ€å°‘çš„ç»„æ•°é‡ã€‚


### é¢˜è§£ä¸€ï¼ˆæ¥æºï¼šzjjc1104111ï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šé€†åºéå†çš„æŠ€å·§ï¼Œé¿å…äº†å®½åº¦ç›¸åŒçš„å¥—å¨ƒè¢«é”™è¯¯æ”¾å…¥åŒç»„ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = m; i >= 1; --i) { // é€†åºéå†ï¼ˆå®½åº¦å¤§çš„å…ˆå¤„ç†ï¼‰
      if (f[ans] <= a[i].h) {
          f[++ans] = a[i].h; // æ–°å¼€ç»„
      } else {
          int l = 1, r = ans;
          while (l < r) {
              int mid = (l + r) / 2;
              if (f[mid] <= a[i].h) {
                  l = mid + 1;
              } else {
                  r = mid;
              }
          }
          f[l] = a[i].h; // æ›´æ–°ç»„é«˜åº¦
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - é€†åºéå†çš„åŸå› ï¼šå®½åº¦å¤§çš„å¥—å¨ƒéœ€è¦å…ˆå¤„ç†ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•æ”¾å…¥å®½åº¦å°çš„å¥—å¨ƒä¸­ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå®½åº¦ä¸º10çš„å¥—å¨ƒï¼Œåªèƒ½æ”¾å…¥å®½åº¦â‰¥10çš„ç»„ï¼Œä½†å®½åº¦â‰¥10çš„ç»„è¿˜æ²¡å¤„ç†ï¼Œæ‰€ä»¥é€†åºéå†å¯ä»¥ç¡®ä¿å®½åº¦å¤§çš„å¥—å¨ƒå…ˆè¢«åˆ†é…åˆ°ç»„ä¸­ã€‚  
  - äºŒåˆ†æŸ¥æ‰¾çš„æ¡ä»¶ï¼š`f[mid] <= a[i].h`è¡¨ç¤ºè¯¥ç»„çš„æœ€å¤§é«˜åº¦å°äºç­‰äºå½“å‰å¥—å¨ƒçš„é«˜åº¦ï¼Œæ— æ³•è£…ä¸‹ï¼Œæ‰€ä»¥éœ€è¦å‘å³æŸ¥æ‰¾æ›´å¤§çš„ç»„ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼šé€†åºéå†æ˜¯å¤„ç†â€œå®½åº¦ç›¸åŒâ€é—®é¢˜çš„å·§å¦™æŠ€å·§ï¼Œå€¼å¾—è®°ä½ã€‚


### é¢˜è§£ä¸‰ï¼ˆæ¥æºï¼šylchï¼‰æ ¸å¿ƒä»£ç ç‰‡æ®µèµæ  
* **äº®ç‚¹**ï¼šç”¨`lower_bound`å‡½æ•°ç®€åŒ–äºŒåˆ†æŸ¥æ‰¾ã€‚  
* **æ ¸å¿ƒä»£ç ç‰‡æ®µ**ï¼š  
  ```cpp
  for (int i = 1; i <= n; ++i) {
      if (t[p] <= a[i].height) {
          t[++p] = a[i].height; // æ–°å¼€ç»„
      } else {
          int l = lower_bound(t + 1, t + p + 1, a[i].height) - t;
          t[l] = a[i].height; // æ›´æ–°ç»„é«˜åº¦
      }
  }
  ```  
* **ä»£ç è§£è¯»**ï¼š  
  - `lower_bound`å‡½æ•°è¿”å›ç¬¬ä¸€ä¸ªå¤§äºç­‰äº`a[i].height`çš„ä½ç½®ã€‚å› ä¸º`t`æ•°ç»„æ˜¯**ä¸¥æ ¼é€’å¢**çš„ï¼ˆæ¯ç»„çš„æœ€å¤§é«˜åº¦ä¾æ¬¡å¢å¤§ï¼‰ï¼Œæ‰€ä»¥`lower_bound`æ‰¾åˆ°çš„ä½ç½®å°±æ˜¯ç¬¬ä¸€ä¸ªèƒ½è£…ä¸‹å½“å‰å¥—å¨ƒçš„ç»„ã€‚  
  - ä¾‹å¦‚ï¼Œ`t`æ•°ç»„æ˜¯`[3,5,7]`ï¼Œå½“å‰å¥—å¨ƒçš„é«˜åº¦æ˜¯4ï¼Œ`lower_bound`è¿”å›æŒ‡å‘5çš„è¿­ä»£å™¨ï¼Œå‡å»`t`çš„é¦–åœ°å€å¾—åˆ°ä½ç½®2ï¼Œå°†`t[2]`æ›´æ–°ä¸º4ï¼Œ`t`æ•°ç»„å˜ä¸º`[3,4,7]`ã€‚  
* ğŸ’¡ **å­¦ä¹ ç¬”è®°**ï¼š`lower_bound`å’Œ`upper_bound`æ˜¯STLä¸­å¸¸ç”¨çš„äºŒåˆ†æŸ¥æ‰¾å‡½æ•°ï¼Œèƒ½ç®€åŒ–ä»£ç ï¼Œæé«˜æ•ˆç‡ã€‚


## 5. ç®—æ³•å¯è§†åŒ–ï¼šåƒç´ åŠ¨ç”»æ¼”ç¤º (æ ¸å¿ƒéƒ¨åˆ†)

### åŠ¨ç”»æ¼”ç¤ºä¸»é¢˜  
**ã€Šåƒç´ å¥—å¨ƒæ•´ç†å¤§æŒ‘æˆ˜ã€‹**ï¼ˆ8ä½åƒç´ é£æ ¼ï¼Œç±»ä¼¼FCæ¸¸æˆï¼‰


### æ ¸å¿ƒæ¼”ç¤ºå†…å®¹  
1. **åœºæ™¯åˆå§‹åŒ–**ï¼š  
   - å±å¹•å·¦ä¾§æ˜¯**æ’åºåçš„å¥—å¨ƒé˜Ÿåˆ—**ï¼ˆå°æ–¹å—ï¼Œå®½åº¦ç”¨æ¨ªå‘é•¿åº¦è¡¨ç¤ºï¼Œé«˜åº¦ç”¨çºµå‘é•¿åº¦è¡¨ç¤ºï¼Œå®½åº¦ç›¸åŒçš„å¥—å¨ƒæŒ‰é«˜åº¦ä»å¤§åˆ°å°æ’åˆ—ï¼‰ã€‚  
   - å±å¹•å³ä¾§æ˜¯**ç»„é«˜åº¦æŸ±çŠ¶å›¾**ï¼ˆä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒç»„ï¼ŒæŸ±çŠ¶å›¾çš„é«˜åº¦è¡¨ç¤ºè¯¥ç»„çš„æœ€å¤§é«˜åº¦ï¼‰ã€‚  
   - åº•éƒ¨æœ‰**æ§åˆ¶é¢æ¿**ï¼šâ€œå¼€å§‹/æš‚åœâ€æŒ‰é’®ã€â€œå•æ­¥æ‰§è¡Œâ€æŒ‰é’®ã€â€œé‡ç½®â€æŒ‰é’®ï¼Œä»¥åŠâ€œé€Ÿåº¦æ»‘å—â€ï¼ˆè°ƒæ•´è‡ªåŠ¨æ’­æ”¾é€Ÿåº¦ï¼‰ã€‚  
   - èƒŒæ™¯æ˜¯å¤å¤çš„ç½‘æ ¼å›¾æ¡ˆï¼Œä¼´éš8ä½é£æ ¼çš„è½»å¿«èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚ã€Šè¶…çº§é©¬é‡Œå¥¥ã€‹çš„èƒŒæ™¯éŸ³ä¹ï¼‰ã€‚

2. **æ’åºåŠ¨ç”»**ï¼š  
   - å¥—å¨ƒä»æ— åºçŠ¶æ€â€œç§»åŠ¨â€åˆ°æ’åºåçš„ä½ç½®ï¼Œå®½åº¦å°çš„å¥—å¨ƒå‘å·¦ç§»åŠ¨ï¼Œå®½åº¦ç›¸åŒçš„å¥—å¨ƒæŒ‰é«˜åº¦ä»å¤§åˆ°å°æ’åˆ—ã€‚æ¯ç§»åŠ¨ä¸€ä¸ªå¥—å¨ƒï¼Œä¼´éšâ€œå±å‘€â€çš„åƒç´ éŸ³æ•ˆã€‚

3. **å¤„ç†å¥—å¨ƒåŠ¨ç”»**ï¼š  
   - é€†åºéå†å¥—å¨ƒï¼ˆä»å³å¾€å·¦ï¼‰ï¼Œå½“å‰å¤„ç†çš„å¥—å¨ƒä¼šâ€œé—ªçƒâ€ï¼ˆçº¢è‰²è¾¹æ¡†ï¼‰ã€‚  
   - å¯¹äºæ¯ä¸ªå¥—å¨ƒï¼Œç”¨â€œé»„è‰²ç®­å¤´â€æŒ‡å‘å³ä¾§æŸ±çŠ¶å›¾ä¸­è¦åŠ å…¥çš„ç»„ï¼š  
     - å¦‚æœæ–°å¼€ç»„ï¼Œå³ä¾§ä¼šæ–°å¢ä¸€ä¸ªå½©è‰²æŸ±çŠ¶å›¾ï¼ˆå¦‚è“è‰²ï¼‰ï¼Œä¼´éšâ€œå®â€çš„éŸ³æ•ˆã€‚  
     - å¦‚æœåŠ å…¥å·²æœ‰ç»„ï¼Œè¯¥ç»„çš„æŸ±çŠ¶å›¾ä¼šâ€œæ”¶ç¼©â€åˆ°å½“å‰å¥—å¨ƒçš„é«˜åº¦ï¼ˆå¦‚ä»7å˜æˆ4ï¼‰ï¼Œä¼´éšâ€œå•ªâ€çš„éŸ³æ•ˆã€‚  
   - å¤„ç†å®Œæ‰€æœ‰å¥—å¨ƒåï¼Œå±å¹•ä¸­å¤®æ˜¾ç¤ºâ€œæŒ‘æˆ˜æˆåŠŸï¼æœ€å°‘ç»„æ•°é‡ï¼šXâ€ï¼Œä¼´éšâ€œèƒœåˆ©â€éŸ³æ•ˆï¼ˆå¦‚ã€Šé­‚æ–—ç½—ã€‹çš„é€šå…³éŸ³ä¹ï¼‰ã€‚

4. **äº¤äº’è®¾è®¡**ï¼š  
   - **å•æ­¥æ‰§è¡Œ**ï¼šç‚¹å‡»â€œå•æ­¥â€æŒ‰é’®ï¼Œé€ä¸€å¥—å¨ƒå¤„ç†ï¼Œæ–¹ä¾¿è§‚å¯Ÿæ¯ä¸€æ­¥çš„å˜åŒ–ã€‚  
   - **è‡ªåŠ¨æ’­æ”¾**ï¼šæ‹–åŠ¨â€œé€Ÿåº¦æ»‘å—â€è°ƒæ•´æ’­æ”¾é€Ÿåº¦ï¼ˆä»æ…¢åˆ°å¿«ï¼‰ï¼Œç®—æ³•è‡ªåŠ¨æ‰§è¡Œã€‚  
   - **é‡ç½®**ï¼šç‚¹å‡»â€œé‡ç½®â€æŒ‰é’®ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œé‡æ–°å¼€å§‹ã€‚


### è®¾è®¡æ€è·¯  
- **åƒç´ é£æ ¼**ï¼šè¥é€ å¤å¤æ¸¸æˆçš„æ°›å›´ï¼Œè®©å­¦ä¹ æ›´æœ‰è¶£ã€‚  
- **åŠ¨ç”»æ•ˆæœ**ï¼šç”¨â€œé—ªçƒâ€â€œç®­å¤´â€â€œæ”¶ç¼©â€ç­‰æ•ˆæœçªå‡ºå…³é”®æ­¥éª¤ï¼Œå¸®åŠ©ç†è§£ç®—æ³•é€»è¾‘ã€‚  
- **éŸ³æ•ˆ**ï¼šç”¨ä¸åŒçš„éŸ³æ•ˆå¼ºåŒ–æ“ä½œè®°å¿†ï¼ˆå¦‚â€œå®â€è¡¨ç¤ºæ–°å¼€ç»„ï¼Œâ€œå•ªâ€è¡¨ç¤ºåŠ å…¥ç»„ï¼‰ã€‚  
- **äº¤äº’**ï¼šæ”¯æŒå•æ­¥å’Œè‡ªåŠ¨æ’­æ”¾ï¼Œæ»¡è¶³ä¸åŒå­¦ä¹ è€…çš„éœ€æ±‚ï¼ˆæ¯”å¦‚æ–°æ‰‹å¯ä»¥æ…¢æ…¢çœ‹ï¼Œé«˜æ‰‹å¯ä»¥å¿«é€Ÿè¿‡ï¼‰ã€‚


## 6. æ‹“å±•ç»ƒä¹ ä¸ç›¸ä¼¼é—®é¢˜æ€è€ƒ

### é€šç”¨æ€è·¯/æŠ€å·§è¿ç§»  
â€œè´ªå¿ƒ+äºŒåˆ†â€çš„ç­–ç•¥ä¸ä»…èƒ½è§£å†³åµŒå¥—å¥—å¨ƒé—®é¢˜ï¼Œè¿˜èƒ½è§£å†³ä»¥ä¸‹åœºæ™¯ï¼š  
1. **å¯¼å¼¹æ‹¦æˆª**ï¼ˆç¬¬äºŒé—®ï¼‰ï¼šæ±‚æœ€å°‘éœ€è¦å¤šå°‘å¥—æ‹¦æˆªç³»ç»Ÿï¼Œæ¯å¥—ç³»ç»Ÿèƒ½æ‹¦æˆªçš„å¯¼å¼¹é«˜åº¦ä¾æ¬¡é€’å‡ã€‚  
2. **é€›ç”»å±•**ï¼šæ±‚æœ€å°‘éœ€è¦å¤šå°‘å¤©çœ‹å®Œæ‰€æœ‰ç”»ï¼Œæ¯å¤©çœ‹çš„ç”»çš„ç¼–å·å¿…é¡»é€’å¢ã€‚  
3. **å¯¼å¼¹é˜²å¾¡ç³»ç»Ÿ**ï¼šæ±‚æœ€å°‘éœ€è¦å¤šå°‘å¥—é˜²å¾¡ç³»ç»Ÿï¼Œæ¯å¥—ç³»ç»Ÿèƒ½æ‹¦æˆªçš„å¯¼å¼¹é«˜åº¦è¦ä¹ˆé€’å¢è¦ä¹ˆé€’å‡ã€‚


### ç»ƒä¹ æ¨è (æ´›è°·)  
1. **æ´›è°· P1020 å¯¼å¼¹æ‹¦æˆª**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šè¿™é“é¢˜çš„ç¬¬äºŒé—®ä¸åµŒå¥—å¥—å¨ƒé—®é¢˜å®Œå…¨ä¸€è‡´ï¼Œéƒ½æ˜¯æ±‚æœ€å°‘çš„ç»„æ•°é‡ï¼Œèƒ½å¸®åŠ©ä½ å·©å›ºâ€œè´ªå¿ƒ+äºŒåˆ†â€çš„ç­–ç•¥ã€‚  
2. **æ´›è°· P1638 é€›ç”»å±•**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜éœ€è¦ç”¨è´ªå¿ƒç­–ç•¥æ‰¾åˆ°æœ€å°‘çš„å¤©æ•°ï¼Œæ¯å¤©çœ‹çš„ç”»ç¼–å·é€’å¢ï¼Œæ˜¯â€œè´ªå¿ƒ+äºŒåˆ†â€çš„å˜å½¢åº”ç”¨ã€‚  
3. **æ´›è°· P2757 å¯¼å¼¹é˜²å¾¡ç³»ç»Ÿ**  
   - ğŸ—£ï¸ **æ¨èç†ç”±**ï¼šæ­¤é¢˜éœ€è¦åŒæ—¶è€ƒè™‘é€’å¢å’Œé€’å‡çš„æƒ…å†µï¼Œæ˜¯â€œè´ªå¿ƒ+äºŒåˆ†â€çš„è¿›é˜¶ç»ƒä¹ ï¼Œèƒ½æé«˜ä½ çš„æ€ç»´èƒ½åŠ›ã€‚


## 7. å­¦ä¹ å¿ƒå¾—ä¸ç»éªŒåˆ†äº« (è‹¥æœ‰)

### å‚è€ƒç»éªŒï¼ˆæ¥è‡ªzjjc1104111ï¼‰  
> â€œå› ä¸ºæ˜¯å¤šç»„æ•°æ®ï¼Œæ‰€ä»¥è®°å¾—åˆå§‹åŒ–ï¼â€  

**ç‚¹è¯„**ï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æé†’ã€‚å¤šç»„æ•°æ®çš„åˆå§‹åŒ–ï¼ˆå¦‚`memset(f,0,sizeof(f))`ï¼‰æ˜¯ç«èµ›ä¸­å¸¸è§çš„é”™è¯¯ç‚¹ï¼Œå¦‚æœå¿˜è®°åˆå§‹åŒ–ï¼Œä¼šå¯¼è‡´åç»­æ•°æ®è¢«å‰é¢çš„æ•°æ®å½±å“ï¼Œä»è€Œå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚åœ¨ç¼–ç¨‹æ—¶ï¼Œä¸€å®šè¦å…»æˆâ€œå¤šç»„æ•°æ®åˆå§‹åŒ–â€çš„å¥½ä¹ æƒ¯ã€‚


## ç»“è¯­  
æœ¬æ¬¡å…³äºâ€œNested Dollsâ€çš„C++è§£é¢˜åˆ†æå°±åˆ°è¿™é‡Œã€‚å¸Œæœ›è¿™ä»½å­¦ä¹ æŒ‡å—èƒ½å¸®åŠ©ä½ ç†è§£â€œè´ªå¿ƒ+äºŒåˆ†â€çš„æ ¸å¿ƒé€»è¾‘ï¼ŒæŒæ¡æ’åºã€äºŒåˆ†æŸ¥æ‰¾ç­‰æŠ€å·§ã€‚è®°ä½ï¼Œç¼–ç¨‹çš„ä¹è¶£åœ¨äºä¸æ–­æ€è€ƒå’Œå®è·µï¼Œä¸‹æ¬¡æˆ‘ä»¬å†ä¸€èµ·æ¢ç´¢æ–°çš„æŒ‘æˆ˜ï¼ğŸ’ª

---
å¤„ç†ç”¨æ—¶ï¼š168.60ç§’
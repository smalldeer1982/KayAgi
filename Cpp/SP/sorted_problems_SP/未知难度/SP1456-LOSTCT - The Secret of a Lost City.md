---
title: "LOSTCT - The Secret of a Lost City"
layout: "post"
diff: 难度0
pid: SP1456
tag: []
---

# LOSTCT - The Secret of a Lost City

## 题目描述

秘密消失的城市

著名考古学家 Blue Mary 发现了一个消失城市的遗迹。她在城市中心找到了 12 块巨大的石碑，并将这座城市称为冰峰城（Ice-Peak City）。石碑上刻有各种不同的建筑结构，被 Blue Mary 称为 IPA（Ice-Peak Articles）。不幸的是，在她回到实验室后，再也找不到冰峰城了。关于冰峰城的唯一线索就是这些石碑上的建筑结构。凭借她的智慧，Blue Mary 揭示了 IPA 的语法，其结构如下：

```
<IPA>        ::= <句子>{<句子>}
<句子>        ::= <名词短语>{<动词短语><名词短语>}[<动词短语>]
<名词短语>    ::= <名词>|[<副词>]<名词短语>
<动词短语>    ::= <动词>|[<副词>]<动词短语>
<词>         ::= <动词>|<名词>|<副词>
```

其中：

- 名词、动词和副词由一个词典提供。
- “|” 表示选择，“或”的意思。
- 方括号 `[]` 中的内容可以出现，也可以不出现。
- 大括号 `{}` 中的内容可以出现多次，甚至不出现。

Blue Mary 已为 IPA 准备了一本词典。因为 IPA 的字符仅限于 26 种小写字母，所以我们用 'a' 到 'z' 来表示。

句子与词之间没有标点分隔，Blue Mary 希望你能编写一个程序，将给定的 IPA 字符串分成尽量少的句子，并进一步将这些句子分成尽量少的词。

## 输入格式

第一行给出词典中单词的数量，不超过 1000。

随后的每行包含一个形式为 "X.Y" 的单词，其中 X 是 'n'、'v' 或 'a'（分别表示名词、动词或副词），Y 是由小写字母组成的字符串，最长不超过 20 个字符。

之后的一行是一个有效的 IPA 字符串，仅由小写字母组成，以句号（.）结尾。IPA 字符串的长度不超过 5KB。

## 输出格式

第一行输出 IPA 中分成的最少句子数。
第二行输出在分成最少句子数的情况下，分成的最少词数。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
11
n.table
n.baleine
a.silly
n.snoopy
n.sillysnoopy
v.is
v.isnot
n.kick
v.kick
a.big
v.cry
sillysnoopyisnotbigtablebaleinekicksnoopysillycry.
```

### 输出

```
2
9
```


---
title: "NCKLCE - Another Necklace Problem"
layout: "post"
diff: 难度0
pid: SP1715
tag: []
---

# NCKLCE - Another Necklace Problem

## 题目描述

T 公司是一家以生产彩色项链而闻名的企业。他们设计的项链既独特又时尚，因此受到年轻人的热烈欢迎。如今，T 公司计划设计一个自助生产系统。

这个系统由硬件和软件组成，其中软件部分负责与硬件进行交互和控制。目前，硬件部分已经完成，软件部分则需要开发。公司找到了你，作为一名正在参与 NOI 的选手，希望你能开发一个模拟该系统的软件。

这条项链由 $N$ 颗珠子组成，珠子的颜色介于 $1$ 到 $c$ 之间。项链固定在一个平面上，某个位置固定为位置 1，其余位置按顺时针方向依次标记为 2 到 $n$。

你的任务是实现以下命令：

```
+------------+-------------------------------+--------------------------------------------------+
| 命令       | 参数限制                      | 说明                                             |
+------------+-------------------------------+--------------------------------------------------+
|R k         | 0 < k < N                     | 顺时针旋转 k 个位置。原位置 1 的珠子移至位置     |
|            |                               | k+1，位置 2 的珠子移至位置 k+2，依此类推。       |
+------------+-------------------------------+--------------------------------------------------+
|F           |                               | 翻转整个项链。位置 1 的珠子保持不动，位置 2 的  |
|            |                               | 珠子与位置 N 的珠子交换，位置 3 与位置 n-1 的   |
|            |                               | 珠子交换，以此类推。                             |
+------------+-------------------------------+--------------------------------------------------+
|S i j       | 1 <= i, j <= n                | 交换位置 i 和位置 j 的珠子。                     |
+------------+-------------------------------+--------------------------------------------------+
|P i j x     | 1 <= i, j <= n, x <= c        | 将从位置 i 到位置 j（顺时针方向）的珠子涂成颜色 |
|            |                               | x。                                              |
+------------+-------------------------------+--------------------------------------------------+
|C           |                               | 询问项链中有多少个连续同色的部分。每段连续同色  |
|            |                               | 的珠子算作一个部分。注意这与 CS 1,n 的结果不同。 |
+------------+-------------------------------+--------------------------------------------------+
|CS i j      | 1 <= i, j <= n                | 询问从位置 i 到位置 j（包含 i 和 j，顺时针）     |
|            |                               | 中有多少个连续同色的部分。                       |
+------------+-------------------------------+--------------------------------------------------+
```

## 输入格式

输入的第一行为两个整数 $N$ 和 $C$，代表项链的珠子数量和颜色种类。第二行为 $N$ 个整数 $x_1, x_2, \ldots, x_n$，表示从位置 1 到位置 $n$ 的珠子颜色，$1 \leq x_i \leq c$。第三行是一个整数 $Q$，表示接下来有多少条命令。接下来的 $Q$ 行中，每行是一条待执行的命令。

对于 60% 的测试数据，$n \leq 1000$，$Q \leq 1000$；  
对于 100% 的测试数据，$n \leq 500000$，$Q \leq 500000$。

## 输出格式

对���每个以 C 或 CS 开头的命令，输出对应的整数结果。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
5 3
1 2 3 2 1
4
C
R 2
P 5 5 2
CS 4 1
```

### 输出

```
4
1
```


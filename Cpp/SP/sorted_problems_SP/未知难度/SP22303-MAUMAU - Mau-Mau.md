---
title: "MAUMAU - Mau-Mau"
layout: "post"
diff: 难度0
pid: SP22303
tag: []
---

# MAUMAU - Mau-Mau

## 题目描述

「Mau-Mau」是一个广受欢迎的德国纸牌游戏，通常需要两到四名玩家，使用一副包含32张牌的法国扑克牌。你的任务是模拟一场 Mau-Mau 游戏，已知一叠已洗好的牌序、玩家数量、游戏规则以及玩家的决策规则。

这副牌有 **四种花色**（梅花 ♣、黑桃 ♠、红心 ♥、方块 ♦），每种花色下有 **八个等级** 的牌（七 [7]、八 [8]、九 [9]、十 [10]、杰克 [20]、皇后 [3]、国王 [4]、爱司 [11]）。括号中的数值对决策规则和最后得分很重要。每张牌用 **两个字母表示**：第一个字母代表花色，第二个字母代表等级，均大写，如 **CN**（梅花九）或 **HK**（红心国王）。

### 游戏规则

所有牌洗好后，按顺时针方向每次发一张给玩家。不同玩家数量，他们各得的牌数也不同：两个玩家每人 7 张，三个玩家每人 6 张，四个玩家每人 5 张。所有玩家拿到自己的牌后，只能看自己的牌。发完牌后，牌堆顶的一张牌被翻开放在桌子上，成为 **弃牌堆** 的第一张牌。剩余的牌面朝下放在桌上，作为 **抽牌堆**。

开始时，总是由拿到第一张牌的玩家开始。如果他有一张牌与弃牌堆顶的牌的花色或数值相同，可以打出这张牌。特别是，如果打出的是「行动牌」，则有一些额外规则适用。如果玩家没有匹配的牌，则必须从抽牌堆抽一张牌。如果新抽的牌匹配，可以立即打出，否则轮到下一个玩家。如果某玩家将最后一张牌放到弃牌堆上，他就获胜，游戏结束。

如果抽牌堆用尽，则将弃牌堆顶的一张牌移除，剩下的弃牌堆翻转，成为新的抽牌堆。移除的那张牌作为新的弃牌堆。这过程是在抽完最后一张牌后立即进行的，即使抽的牌刚好匹配并可以打出！因此，抽牌堆中的下一张牌总是原来弃牌堆的底牌。游戏保证不会在测试用例中完全耗光牌。

### 行动牌

七：如果打出一张「7」（或起始时弃牌堆顶是「7」），下一位玩家必须抽取两张牌作为惩罚，不能用任何牌抵消，除非他有另一张「7」。如果他打出「7」，这一轮就被「延长」：下一位玩家必须抽四张，除非他也有「7」可以继续延长。若轮到下一位，不论抽的牌数，抽卡后不能再打其他牌。行动结束，七的效果消失，下一位玩家打出任意匹配牌。

八：如果打出一张「8」（或起始弃牌是「8」），下一位玩家被跳过，继续下一个玩家的回合。如果是双人游戏，出「8」的玩家可以立刻继续出牌。这一轮结束后，八的效果消失。下一位玩家打出任意匹配牌。

杰克：杰克能匹配所有牌，除了另一张杰克和活跃的七。杰克可以视为「无花色」。此外，杰克允许玩家选择任何花色，接下来的玩家需打出与所选花色匹配的牌（除杰克）。若较开始的牌为杰克，首位玩家可打任意非杰克牌。

### 决策规则

为了模拟过程，以下为玩家应该遵循的决策规则。当然，所有决策都应在游戏规则允许范围内进行！

规则 1：如果由于活跃的七需要被惩罚抽牌，但有机会用另一张七延长这一轮，你应该这么做。

规则 2：如果你有除杰克之外的匹配牌，打出它；若有多张，选价值最高的。

规则 3：除杰克外无其他匹配牌，则出��克。

规则 4：若下个玩家仅余一张牌，则出杰克，即使有其他匹配牌。

规则 5：若选择打出杰克，应选最多的花色为后继玩家的限制花色。如有平局，选花色优先级最高的（→ 规则 6）。记得杰克是「无花色」，因此不参与计数。

规则 6：当有多张价值相同的匹配牌时，选花色级别最高的一张。花色顺序为：梅花 > 黑桃 > 红心 > 方块。

### 游戏结束

当一位玩家将其最后一张牌放在弃牌堆时，游戏结束。若最后一张牌为行动牌，该行动不执行。特别是若为「七」，则不需再进行惩罚抽牌。

最终得分为剩余牌的总价值之和。赢家得分为 0。如果赢家最后出的牌是杰克，其它玩家的得分将翻倍。得分越高，成绩越差。

## 输入格式

输入首先为一行包含测试用例数量 t<50。接着是 t 行，每行为一个 Mau-Mau 游戏的初始状态。第一部分是玩家数量（2、3 或 4），后接一个空格，然后是 32 张牌，使用上述两字符表示法，并用空格分隔。序列中第一张牌是牌堆顶卡，将先发给第一个玩家。

## 输出格式

对于每场游戏，你需要按顺序输出整个游戏中弃牌堆上的牌，从游戏开始时的第一张初始卡开始，使用空格分隔的两个字母表示法，一行显示。  
在第二行中，输出最终得分。以 "Score: "（不含引号）开头，后接第一位、第二位等玩家的得分，用空格分隔。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
2
2 SS HA SN HQ CE SQ CA DT CK CQ DJ CN HN DN CS SA CJ DA HJ HS DE HT SE DK HK ST SJ HE DS CT DQ SK
3 SA SS CQ CT DA DJ ST HA SK HK DK DS DQ CE CK DE SQ DN DT SJ SE HN CJ CS HQ HJ CN HE CA HT SN HS
```

### 输出

```
CS SS SN SA CA HA HN CN CE CK CJ DA DJ HQ HS
Score: 0 45
DT CT CE DE DN DQ DA DS SS SA HA HN HK DK CK SJ SQ
Score: 18 0 47
```


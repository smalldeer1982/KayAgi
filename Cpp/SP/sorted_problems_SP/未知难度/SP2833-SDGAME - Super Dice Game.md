---
title: "SDGAME - Super Dice Game"
layout: "post"
diff: 难度0
pid: SP2833
tag: []
---

# SDGAME - Super Dice Game

## 题目描述

Alice 和 Bob 在玩一个有趣的游戏。游戏中有一条环形轨道，由 $M$ 个连续的格子组成，编号从 $0$ 到 $M-1$，其中 $2 \le M \le 1,000,000,000$。两位玩家一开始都站在 $0$ 号格子上。他们轮流掷 $N$ 个编号从 $0$ 到 $N-1$ 的“超级骰子”，每次掷出一个。（$1 \le N \le 10,000$）

“超级骰子”的具体运作不太清楚，不过我们知道每次掷出后，骰子的数值会在 $0$ 到 $1,000,000,000$ 之间，包括这两个数。玩家的移动步数是由骰子上显示的数值构成的一个连续子序列的乘积来决定的（每次移动的计算规则各不相同，这里不详述）。

游戏中还有一个复杂的规则：如果 Alice 和 Bob 在某次移动后停在同一个格子上，则该格子编号会作为一个因子，乘到所有骰子当前显示的数值上。这可能导致某些骰子上显示的数值超过 $1,000,000,000$。需要注意的是，这个格子编号的因子只影响当前局面，不影响后续的掷骰子操作。

因为总是要处理一长串复杂的计算，Alice 和 Bob 对游戏感到有些挫败。他们需要你帮忙，给定 $R$ 次掷骰子的结果和指定的数值区间，推算出每次掷骰子后相应玩家的位置。（假设所有骰子最初都显示 $1$。）

## 输入格式

第一行包含三个整数 $R$、$N$、$M$，用空格隔开。接下来有 $R$ 行，每行由四个整数 $d$、$v$、$a$ 和 $b$ 组成，分别表示掷出的骰子编号、该骰子显示的数值和用于计算步数的骰子位置范围。

## 输出格式

针对每个掷骰子的结果，输出刚刚进行掷骰子的玩家移动后的最终位置，共有 $R$ 行。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
6 4 20
1 5 1 1
3 10 2 3
2 3 0 3
1 2 0 3
1 5 1 2
0 7 0 1
```

### 输出

```
5
10
15
10
10
0

Output Explanation:

For your assistance, here is the state of the dice after each turn:
[1, 5, 1, 1]
[1, 5, 1, 10]
[1, 5, 3, 10]
[1, 2, 3, 10]
[10, 50, 30, 100]
[7, 50, 30, 100]
```


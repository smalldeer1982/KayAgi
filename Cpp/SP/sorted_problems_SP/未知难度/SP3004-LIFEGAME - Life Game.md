---
title: "LIFEGAME - Life Game"
layout: "post"
diff: 难度0
pid: SP3004
tag: []
---

# LIFEGAME - Life Game

## 题目描述

你正在一个生物武器制造厂工作，负责管理一种传播性极强的病毒武器。这种病毒喜欢形成规则的六边形团块，即一个由多个病毒菌落组成的六边形网格。整个网格也是一个规则的六边形，每条边上有 $N$ 个菌落。

病毒会按照一定的速度进行自我繁殖。繁殖在所有菌落同时进行。在每个菌落繁殖完后，其相邻的菌落会接收到相同数量的新病毒。但需要注意的是，如果繁殖后某个菌落的病毒数量达到或超过密度限制 $M$，该菌落中的病毒便会自领攻击，数量变为除以 $M$ 的余数。

你的任务是，在给定网格大小 $N$ 和每个菌落初始病毒数量的情况下，计算经过 $L$ 个周期后所有菌落的病毒总量。

## 输入格式

输入由多组测试数据组成。

每组数据第一行包含三个整数 $N$（$1 \le N \le 6$）、$M$（$2 \le M \le 10^9$）和 $L$（$1 \le L \le 10^9$）。接下来的 $2N-1$ 行描述了每个初始状态。每行的非负整数（小于 $M$）表示该行每个菌落的初始病毒数量。第一行是最顶部 $N$ 个菌落的病毒数量，第二行是下一行中 $N+1$ 个菌落的病毒数量，依此类推。

输入以 "0 0 0" 结束。

## 输出格式

对于每个测试数据，输出测试用例编号，然后是经过 $L$ 个周期后所有菌落中的病毒总数。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
3 3 1
1 0 0
0 0 0 0
0 0 0 0 0
0 0 0 0
0 0 1
3 3 2
1 0 0
0 0 0 0
0 0 0 0 0
0 0 0 0
0 0 1
0 0 0
```

### 输出

```
Case 1: 8
Case 2: 18
```


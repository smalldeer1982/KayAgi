---
title: "RATTERN - The Room Pattern"
layout: "post"
diff: 难度0
pid: SP309
tag: []
---

# RATTERN - The Room Pattern

## 题目描述

决定在一间大小为NxM的房间里铺一层地板。方式是在地板上画一些图案。房间的地板是由1x1的正方形组成的瓷砖，每一块都可以是白色的，也可以是黑色的。房间的地图上规定了房间每个方格的所需颜色。

有四种不同形式的瓷砖：（见上图）

一块瓷砖的方格可以用不同的颜色涂上。有些类型的瓷砖可以是相同的形状，但油漆不同。不同类型的瓷砖可以有不同的成本。每种类型的可用瓷砖数量不受限制。瓷砖被允许以某种方式旋转(以90度的倍数)，但它不允许打破一个瓷砖或把它的面板向下。最初，地板的任何部分都可以用瓷砖铺设。请您计算铺砌房间其余部分所需的最低成本。

## 输入格式

t-测试样例的数量。

对于每组测试样例。第一行中，写了三个数字：N，M (房间的大小)和 K (可访问类型的瓷砖数目)。(1<=N,M<=8，1<=K<=10)。接下来是对所需的地板绘画的描述。描述的形式是 N 行 M 每个数字，其中 0 表示白色，1 表示黑色，2 表示一个已经被瓷砖覆盖的正方形。在最后的 K 行中，可用类型的瓷砖的描述格式如下：

每行由 form,cost,painting 组成

form 是一个从 1 到 4 的数字，描述了瓷砖的形状类型(见上图)。

cost 是一个不大于 10000 的整数，描述该类型的一个瓷砖的成本。

painting 是一个介于 1 到 3 个数字,由 0 或 1 之间的序列。它的长度与瓷砖所包含的方格数相同，相应的数字描述方形瓷砖的颜色，按图形中正方形的编号顺序排列。

## 输出格式

对于每个测试样例输出一个整数：放置剩余部分的最小成本，如果不能执行任务，输出 -1。

## 样例 #1

### 输入

```
1
4 3 3
2 2 2
2 0 0
2 1 2
2 2 2
2 10 0 0
1 5 1
4 6 0 0 1
```

### 输出

```
15
```


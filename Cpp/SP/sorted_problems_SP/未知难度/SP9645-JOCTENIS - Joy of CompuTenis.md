---
title: "JOCTENIS - Joy of CompuTenis"
layout: "post"
diff: 难度0
pid: SP9645
tag: []
---

# JOCTENIS - Joy of CompuTenis

## 题目描述

现代俱乐部协会每年都会举办一场名为 CompuTenis 的比赛，这项运动专为不具有明显体能优势的人设计。虽然 CompuTenis 的规则相当复杂（例如需要用胳膊肘贴着耳朵编程），但要解决这个题目无需详细了解规则。你只需知道，在一场比赛中，两名选手对抗，首先赢得 **S** 盘的选手获胜；每盘由若干局组成，选手需要至少赢 **J** 局，并且比对手多赢 **D** 局才能赢得该盘。

比赛共设有 **K** 轮，参赛人数为 **N** = 2 $ ^{K} $ 人，且所有选手都参加首轮比赛。在每一轮中，选手两两配对进行比赛，胜者晋级下一轮，败者则被淘汰。第 **K** 轮唯一的一场比赛的胜者即为整场比赛的冠军。

为了让比赛尽可能长，协会希望最大化比赛的电视转播时长，因为他们能从中获得丰厚的收益。协会对于任意一对不同选手都了解其中一人战胜另一人的概率。作为组织委员会的一员，你需要设计每一轮的比赛安排，以最大化整场比赛的期望局数。这包括决定第一轮的选手配对，以及之后每一轮中如何从前一轮中挑选比赛胜者配对进行比赛。请注意，配对只能根据上一轮胜者的标识来决定。下图展现了 **K** = 3 轮和 **N** = 8 名选手的一种可能的比赛安排。

![](https://cdn.luogu.com.cn/upload/vjudge_pic/SP9645/0b8ac9186531d1c74ae2c83591c130757880686d.png)

目前，协会只需估算其收益，因此只需告知他们比赛中最大可能的期望局数即可。

## 输入格式

输入包含多个测试用例，每个测试用例由多行构成。第一行包含四个整数 **K**、**S**、**J** 和 **D**。这里 **K** 是比赛的轮数（1 <= **K** <= 3）；**S** 是赢得比赛所需的盘数（1 <= **S** <= 10）；**J** 是选手赢得一盘所需的最少局数，而 **D** 则是选手需要多赢对手的局数（1 <= **D** <= **J** <= 100）。选手编号为 1 到 **N** = 2 $ ^{K} $。接下来的 **N** 行中，每行包含 **N** 个值。在第 **i** 行里的第 **j** 个值用整数 **P\_ij** 表示，其中 **p\_ij** = **P\_ij**/100 即为编号为 **i** 的选手赢得编号为 **j** 的选手的概率（0 <= **P\_ij** <= 100 对于 1 <= **i**, **j** <= **N**）。假设 **P\_ii** = 0（选手不和自己比赛），以及 **P\_ij** + **P\_ji** = 100 对于不同的 **i** 和 **j**。

输入以一行包含四个 -1 结束。

## 输出格式

对于每个测试用例，输出一行，包含一个有理数，表示给定比赛的最大期望局数。结果应四舍五入到两位小数。如果碰到平局，则需向上取整。即使小数部分是零，也必须保证小数点后有两位数字。

 **本翻译由 AI 自动生成**

## 样例 #1

### 输入

```
1 1 2 2
0 50
50 0
3 3 6 2
0 88 2 76 71 24 50 4
12 0 54 37 84 95 88 98
98 46 0 66 36 13 33 33
24 63 34 0 29 21 96 63
29 16 64 71 0 0 47 13
76 5 87 79 100 0 56 89
50 12 67 4 53 44 0 23
96 2 67 37 87 11 77 0
-1 -1 -1 -1
```

### 输出

```
4.00
224.08
```


---
title: "Legendary Pokemon"
layout: "post"
diff: 难度0
pid: UVA10121
tag: []
---

# Legendary Pokemon

## 题目描述

[problemUrl]: https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=13&page=show_problem&problem=1062

[PDF](https://uva.onlinejudge.org/external/101/p10121.pdf)

![](https://cdn.luogu.com.cn/upload/vjudge_pic/UVA10121/eee1065261eb0a9cf40b3feae70ff3ead076d632.png)

## 输入格式

![](https://cdn.luogu.com.cn/upload/vjudge_pic/UVA10121/83fe34efec3b539d2e7ca1acbd76579b60a5178d.png)

## 输出格式

![](https://cdn.luogu.com.cn/upload/vjudge_pic/UVA10121/54393a8bb9f6078604d2eabc5a4de0b8ba9443c9.png)

## 说明/提示

## 翻译
### 题目描述

你作为一位 pokemon 训练师，要驯服一只山洞中的野生传奇 pokemon。

你驯服这只 pokemon 的过程分为几轮，每一轮中你的 pokemon（已驯服）先采取行动（当然你可以让你的 pokemon 什么也不做），然后野生 pokemon 再采取行动。每一轮中，pokemon 可以选择采取一个行动或者使用一个道具进行攻击或回血。

一个行动可以进行很多次，但是只有以下 $3$ 种：
1. **普通攻击**
	这次行动攻击对手。结果，对手的 $\text{HP}$（生命值）会减少。
2. **改变状态**
	这个行动本身不造成任何攻击。但是可以让你的对手昏迷或者被迷惑。
    - 如果你的对手昏迷了，它就不能采取任何行动。
    - 如果你的对手被迷惑了，它有可能攻击自己。
	
    这些会在 $3$ 轮内有效。（也就是说，受影响者会在 $3$ 轮内处在不正常的状态，并且在那时，任何**改变状态**的行动都不会生效）。
3. **带毒攻击**
	这次行动攻击对手并且让它中毒。如果一个 pokemon 中毒了，在它能行动之前，它会失去额外的**中毒伤害**单位的 $\text{HP}$。中毒会持续 $3$ 轮。（也就是说，受攻击者会因中毒而受伤 $3$ 轮，在中毒期间，任何**带毒攻击**都仍能使对手受到伤害，但不会造成其他效果）。
    
在被**普通攻击**或**带毒攻击**攻击后，对手受到的伤害，被叫做这次行动的**伤害值**。这次行动击中目标的概率叫做这次行动的**精准度**。如果一只 pokemon 被迷惑了，它选择攻击自己的概率被叫做这次行动的**疑惑值**。

在本题中只有一种道具可用**超级药水**。它能恢复一只 pokemon $200$ 的 $\text{HP}$。

精灵球有以下几种类型：
1. **普通精灵球**：用来抓捕 pokemon 。（基础概率 $=5\%$）

2. **超级球**：比普通精灵球更容易抓捕 pokemon。（基础概率 $=10\%$）

3. **高级球** 比超级球更容易抓捕 pokemon。（基础概率 $=15\%$）

4. **等级球** 如果你的 pokemon 比目标 pokemon 等级高，那么基础概率 $=18\%$，否则就与**超级球**一样

5. **甜蜜球** 更容易抓取一只异性 pokemon，此时基础概率 $=20\%$，否则基础概率 $=0\%$。

一只球能抓取一只 pokemon 的概率如下计算：

总概率 $=$ 基础概率 $+$ 暴击加成 $+$ 中毒加成 $+$ 状态加成

- 暴击加成 $=5\%$ 当且仅当 $50<$ 对方 $\text{HP}\le100$。
- 暴击加成 $=10\%$ 当且仅当 $0<$ 对方 $\text{HP}\le50$。
- 中毒加成 $=10\%$ 当且仅当对方中毒。
- 状态加成 $=5\%$ 当且仅当对方在不正常的状态（昏迷或者迷惑）。

初始时，两只 pokemon 的 $\text{HP}$ 都是满的，$\text{HP}$ 值不能大于他们的 $\text{HP}$ 上限，并且处在正常状态（不昏迷、迷惑或中毒）。然后战斗开始，当一只 pokemon 的 $\text{HP}\le0$ 战斗立即结束并且传奇 pokemon 就走了（你失败了），当你抓到了传奇 pokemon 战斗也会结束（祝贺你，成功了）。

因为这只 pokemon 使野生的，它还没有受到任何智力训练。所以它一定遵从一些简单的策略：

1. 在第 $i$ 轮中，它或许会选择逃跑。它选择逃跑的概率为 $run_i\%$（它永远不会逃跑失败即使它昏迷、迷惑或中毒）。

1. 如果它选择继续战斗，它会检查它的 $\text{HP}$。如果它的 $\text{HP}\le 150$ 如果它有**超级药水**，它会使用，即使它昏迷、迷惑或中毒，否则，它会使用它仅有的普通攻击**十字劈**，它的**精确度** $=30\%$，但是**伤害值**为 $300$。

众所周知，传奇 pokemon 是 $50$ 级并且是公的。它的初始$\text{HP}$ 总是 $999$。但是人们不知道它有多少**超级药水**。人们也从来没有见过它战斗 $6$ 回合及以上，所以你默认这些在你的战斗中是真的。

### 输入格式

输入包含不超过 $20$ 组数据。

对于每一组数据，第一行有 $3$ 个整数 $l,g,\text{HP}$ 描述你的 pokemon。$l(1\le l\le100)$ 是你的 pokemon 的等级，$g(0\le g\le1)$ 是你的 pokemon 的性别，$0$ 表示公，$1$ 表示母，$\text{HP}$ 表示你的 pokemon 的初始 $\text{HP}$。

第二行 $5$ 个整数第 $i$ 个整数是 $run_i$ 保证 $0\le run_i\le run_{i+1}(1\le i\le4)$ 而且 $run_5=100$。

下一行包含 $2$ 个整数 $p_1,p_2(0\le p_1,p_2\le 10)$，$p_1$ 是你拥有的**超级药水**数量，$p_2$ 是野生 pokemon 拥有的**超级药水**数量。

接下来一行包含 $5$ 个整数 $b_1,b_2,b_3,b_4,b_5(0\le b_1,b_2,b_3,b_4,b_5\le 5)$，是你拥有上述精灵球的数量（$b_1$ 是普通精灵球数量，以此类推）。

下一行是一个整数 $k(0\le k\le4)$ 你的 pokemon 行动次数。 接下来 $k$ 行每行一个整数 $t(1\le t\le3)$  代表行动编号。如果 $t=1$，在这一行中还有两个整数，分别代表**伤害值**和**精准度** $\times100$。如果 $t=2$，在这一行中还有两个整数，分别代表**疑惑值** $\times100$ 和**精准度** $\times100$（如果疑惑值为 $0$ 代表使对手昏迷）。如果 $t=3$，在这一行中还有三个整数，分别代表**伤害值**、**中毒伤害**和**精准度** $\times100$，所有这三种类型中的值在 $0$ 与 $999$ 之间，但是 $0\le$ 精准度、困惑值 $\le100$。

当 $l=g=\text{HP}=0$ 时结束输入且不用当做一组测试。

### 输出格式

对于每组测试样例，输出一行，是你能抓到野生 pokemon 的概率。答案保留 $4$ 位小数。

### 样例输入输出

见下

### 说明/提示
#### 样例解释

你需要按照以下策略：
- 第一轮采取第二个行动（**带毒攻击**），然后再第二轮扔出你的**甜蜜球**。
- 如果**带毒攻击**成功，可能性为 $(1-10\%)\times(0.2+0.1)=0.27$，否则，可能性为 $(1-10\%)\times0.2=0.18$。
- 所以总可能性为 $60\%*0.27+40\%*0.18=0.2340$。

（注意在一些样例中，情况可能是更复杂的，甚至是动态的，你可能在不同环境下做不同的操作。）

感谢 @Freedom_King 的翻译，感谢 @Loser_King @午尘 提供的帮助。

## 样例 #1

### 输入

```
30 1 500
10 100 100 100 100
0 10
0 0 0 0 1
2
1 100 80
3 300 50 60
0 0 0
```

### 输出

```
0.2340
```


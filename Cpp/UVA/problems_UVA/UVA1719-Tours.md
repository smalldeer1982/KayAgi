---
title: "Tours"
layout: "post"
diff: NOI/NOI+/CTSC
pid: UVA1719
tag: []
---

# Tours

## 题目描述

阿卡·卡拉尼亚山国家公园正在向游客开放。该国家公园内有许多值得一看的景点和连接这些景点的道路。公园委员会已经推出了一套游客可以乘坐巴士参观各个景点的路线方案。每个环游线路都从某一个景点出发（不同的线路可能从不同的景点出发），游览多个其他景点且不重复，最后返回起点。每个环游线路至少游览3个不同的景点。在国家公园内至少有一条环游线路是可行的。

公园委员会决定，对于任何一条道路，所有的巴士将由同一家公司运营。委员会不想被指责偏袒，因此他们希望确保公园内每个可能的环游线路中的道路平均分配给每个巴士公司。他们意识到这可能很难实现。因此，他们想了解当有多少家巴士公司时可以实现对道路进行平均分配。

### **简明题意**

给定一张无向有环图，求所有的 $k$，使得存在某种划分方式使每个环上的边都平均分给 $k$ 家公司。

## 输入格式

输入文件包含多组数据，每组数据输入描述如下所示：

输入的第一行包含两个整数 $n$ $(1 \le n \le 2000)$，和 $m$ $(1 \le m \le 2000)$，分别表示公园中的地点数量和地点之间的道路数量。接下来的 $m$ 行，每行包含两个整数 $a_i$ 和 $b_i$ $(1 \le a_i < b_i \le n)$，表示地点 $a_i$ 和 $b_i$ 之间有一条双向道路相连。无重边。

## 输出格式

对于每组输入，输出所有能以所需方式将道路分配给 $k$ 家公司的可能整数 $k$。这些整数应按升序排列。

### **说明/提示**

考虑样例输入，如图 $K.1$ 所示(见原题面)。这些景点共有三个环形路线。某家公司分配到了 $1-3$ 号道路。它还必须被分配到环形路线 $1-2-3-4-1$ 上的某条道路，比如 $2-3$。但它又被分配到了环形路线 $1-2-3-1$ 上的三条道路中的两条，其他公司无法匹配，因此没有其他公司。在示例输入 $2$ 中，只有一个环形路线，因此只需将该路线的道路均分给各家公司即可。


# 题目信息

# Shoemaker's Problem

## 题目描述

有 $n$ 个任务，每个任务从接手开始每分钟罚款 $S_i$ 元，直到完成任务为止。然而每个任务需要花 $T_i$ 的时间去完成。你只能把一件任务完成才能去做下一件事情，问如何安排任务处理顺序，使得总罚款最小。注意，每个任务在第 $0$ 时刻就全部交给了你。

## 样例 #1

### 输入

```
1
4
3 4
1 1000
2 2
5 5```

### 输出

```
2 1 3 4```

# AI分析结果



## 算法分类
**贪心算法（邻项交换法）**

---

## 题解思路与核心难点

### 核心思路
- **贪心策略**：通过邻项交换法推导出排序条件。对于两个任务 $x$ 和 $y$，若先做 $x$ 的代价更小，则需满足 $T_y \cdot S_x < T_x \cdot S_y$，即按 $\frac{S_i}{T_i}$ 的比值降序排列。
- **数学推导**：通过化简总罚款公式，得出比较条件为 $S_i \cdot T_j > S_j \cdot T_i$，确定任务的优先级。
- **处理平局**：当两任务比值相等时，按输入顺序（`id`）排序。

### 解决难点
- **邻项交换的证明**：需严格证明排序条件的正确性，确保局部最优能推导全局最优。
- **输出格式处理**：末尾不能有空格，不同测试用例之间需正确处理换行符。

---

## 题解评分（≥4星）

1. **Otue（5星）**
   - **亮点**：代码结构清晰，变量命名合理，正确处理排序平局（按 `id` 排序），输出格式完美处理。
   - **代码**：使用 `sort` 函数高效排序，逻辑简洁。

2. **saixingzhe（4星）**
   - **亮点**：排序条件正确，处理输出格式细致，但变量名 `t` 和 `s` 易混淆。
   - **代码**：使用 `scanf` 提升输入效率，输出逻辑明确。

3. **yyyh_h（4星）**
   - **亮点**：注释清晰，输出处理符合要求，但 `cmp` 函数未显式处理平局（实际通过 `id` 处理）。

---

## 最优思路与技巧提炼

### 关键贪心策略
- **比较条件**：对任务 $i$ 和 $j$，若 $S_i \cdot T_j > S_j \cdot T_i$，则 $i$ 排在 $j$ 前。
- **实现技巧**：使用结构体存储任务参数，通过自定义排序函数实现贪心策略。

### 代码实现片段
```cpp
struct Task { int t, s, id; };
bool cmp(Task a, Task b) {
    if (a.s * b.t == b.s * a.t) return a.id < b.id;
    return a.s * b.t > b.s * a.t;
}
// 排序调用
sort(tasks, tasks + n, cmp);
```

---

## 同类型题与算法套路

### 相似题目
1. **P1080 国王游戏**：邻项交换法，比较左右手乘积。
2. **P1230 智力大冲浪**：任务调度，按截止时间或罚款排序。
3. **P2107 小Z的AK计划**：贪心选择顺序，优化时间分配。

### 通用解法
- **邻项交换法**：适用于需确定元素顺序的贪心问题，通过比较相邻元素交换后的代价差推导全局最优。

---

## 个人心得摘录

- **输出格式教训**：部分题解提到末尾空格或换行符处理不当导致 WA，需仔细验证边界条件。
- **贪心证明重要性**：需严格数学推导，避免仅凭直觉选择策略。

---

## 可视化与算法演示

### 动画设计
- **像素风格界面**：每个任务显示为 16x16 像素方块，颜色表示 $\frac{S_i}{T_i}$ 比值（红色高优先级，蓝色低）。
- **关键步骤高亮**：比较两个任务时，高亮其方块并显示公式 $S_i \cdot T_j$ 和 $S_j \cdot T_i$。
- **音效反馈**：交换时播放“哔”声，完成排序后播放胜利音效。

### 交互功能
- **步进控制**：支持暂停/继续，调整动画速度。
- **自动演示模式**：算法自动运行，模拟冒泡排序过程。

```javascript
// 伪代码：Canvas 绘制任务方块
function drawTask(task, x, y) {
    ctx.fillStyle = `hsl(${task.ratio * 10}, 70%, 50%)`;
    ctx.fillRect(x, y, 16, 16);
    ctx.fillText(`T:${task.t}`, x + 2, y + 8);
    ctx.fillText(`S:${task.s}`, x + 2, y + 16);
}
```

---

## 复古游戏化设计

- **8位音效**：使用 Web Audio API 播放芯片音乐，交换时触发短促音效。
- **积分系统**：每正确交换一对任务得 10 分，连击奖励递增。
- **关卡模式**：将大规模数据分阶段排序，逐步增加任务数量。

```html
<canvas id="gameCanvas"></canvas>
<audio id="swapSound" src="swap.wav"></audio>
<script>
    // 触发音效
    function playSwapSound() {
        const sound = document.getElementById("swapSound");
        sound.currentTime = 0;
        sound.play();
    }
</script>
```

---
处理用时：139.66秒
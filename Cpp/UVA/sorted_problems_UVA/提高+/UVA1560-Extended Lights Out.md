---
title: "Extended Lights Out"
layout: "post"
diff: 提高+/省选-
pid: UVA1560
tag: []
---

# Extended Lights Out

## 题目描述

有一个由按钮组成的矩阵，其中每行有 $6$ 个按钮，共 $5$ 行。每个按钮的位置上有一盏灯。

当按下一个按钮后，该按钮以及周围位置（上边、下边、左边、右边）的灯都会改变一次。即如果灯原来是点亮的，就会被熄灭；如果灯原来是熄灭的，则会被点亮。

![](https://cdn.luogu.com.cn/upload/image_hosting/gx4mjlk0.png)

在矩阵角上的按钮改变 $3$ 盏灯的状态；在矩阵边上的按钮改变 $4$ 盏灯的状态；其他的按钮改变 $5$ 盏灯的状态。

在上图中，左边矩阵中用 $\texttt{X}$ 标记的按钮表示被按下，右边的矩阵表示灯状态的改变。对矩阵中的每盏灯设置一个初始状态。请你按按钮，直至每一盏等都熄灭。

与一盏灯毗邻的多个按钮被按下时，一个操作会抵消另一次操作的结果。在下图中，第 $2$ 行第 $3,5$ 列的按钮都被按下，因此第 $2$ 行、第 $4$ 列的灯的状态就不改变。

请你写一个程序，确定需要按下哪些按钮，恰好使得所有的灯都熄灭。

![](https://cdn.luogu.com.cn/upload/image_hosting/8qgvguzw.png)

根据上面的规则，我们知道：

1. 第 $2$ 次按下同一个按钮时，将抵消第 $1$ 次按下时所产生的结果。因此，每个按钮最多只需要按下一次。
2. 各个按钮被按下的顺序对最终的结果没有影响。
3. 对第 $1$ 行中每盏点亮的灯，按下第 $2$ 行对应的按钮，就可以熄灭第 $1$ 行的全部灯。

如此重复下去，可以熄灭第 $1,2,3,4$ 行的全部灯。同样，按下第 $1,2,3,4,5$ 列的按钮，可以熄灭前 $5$ 列的灯。

## 输入格式

第一行输入一个数字 $n$，表示有 $n$组数据。


接下来每组数据由 $5$ 行组成，每一行包括 $6$ 个数字（$0$ 或 $1$）。相邻两个数字之间用单个空格隔开。$0$ 表示灯的初始状态是熄灭的，$1$ 表示灯的初始状态是点亮的。

## 输出格式

对于第 $i$ 组数据，第一行输出 $\texttt{PUZZLE \#i}$。

接下来由 $5$ 行组成，每一行包括 $6$ 个数字（$0$ 或 $1$）。相邻两个数字之间用单个空格隔开。其中的 $1$ 表示需要把对应的按钮按下，$0$ 则表示不需要按对应的按钮。

## 样例 #1

### 输入

```
2
0 1 1 0 1 0
1 0 0 1 1 1
0 0 1 0 0 1
1 0 0 1 0 1
0 1 1 1 0 0
0 0 1 0 1 0
1 0 1 0 1 1
0 0 1 0 1 1
1 0 1 1 0 0
0 1 0 1 0 0
```

### 输出

```
PUZZLE #1
1 0 1 0 0 1
1 1 0 1 0 1
0 0 1 0 1 1
1 0 0 1 0 0
0 1 0 0 0 0
PUZZLE #2
1 0 0 1 1 1
1 1 0 0 0 0
0 0 0 1 0 0
1 1 0 1 0 1
1 0 1 1 0 1
```

